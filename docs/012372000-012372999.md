# StackOverflow 问答 12372000-12372999

# c# - 我无法在从 IIS windows 7 运行的 ASP.net 网站上显示来自 sql server 2005 express 的数据

> ID：12372000
> 
> 赞同：0
> 
> 时间：2012-09-11T14:27:00.670
> 
> 标签：c#, asp.net, sql-server-2005, iis, connection-string

我正在使用运行 sql server 2005 的 Microsoft server 2003，我在 IIs 上添加了一个 asp.net 网站。这很完美。我可以在浏览器上显示网站，也可以从 sql server 读取信息。我的问题现在出现了，当我想做完全相同的事情，但我的笔记本电脑在 Windows 7 上运行 sql server 2005 express。网站在 localhost 上显示得很好，但是当我登录时它给我一个错误，说它无法读取文件. 所以我的问题是 sql server 连接字符串和 sql server express 连接字符串之间有区别吗？或者错误与连接字符串无关？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T14:33:31.337

是的，SQL Server CE 的连接字符串通常与 SQL Server 不同。SQL Server CE 是“自托管的”。您基本上连接到`app_data`目录中的文件。相反，SQL Server 有多种连接方式：通过 TCP/IP、命名管道等。

一个典型的 SQL Server 连接字符串是这样的：

```
Data Source=myServerAddress;Initial Catalog=myDataBase;User Id=myUsername;Password=myPassword; 
```

一个典型的 SQL Server CE 连接字符串是这样的：

```
Data Source=MyData.sdf;Persist Security Info=False; 
```

请注意如何为 SQL Server CE 指定数据库文件的路径。对于 SQL Server，您通常指定运行 SQL Server 服务的服务器**。**

这里还有更多示例[。](http://connectionstrings.com/)

# jquery - 一页上的简单模式弹出的多个实例

> ID：12372006
> 
> 赞同：0
> 
> 时间：2012-09-11T14:27:12.140
> 
> 标签：jquery, popup, simplemodal

我正在尝试在单个页面上创建简单模式弹出窗口的多个实例。

单击“popup_button”类的按钮时，所有“popup_content”类的弹出窗口都会同时打开 [http://jsfiddle.net/A96su/](http://jsfiddle.net/A96su/)

```
$('.popup_button').click(function (e) {
$('.popup_content').modal({
    closeClass: "popup_close",
    closeHTML: "<a href='#'>Close</a>",
    position: [36,238]
    });

    return false;
}); 
```

我试图使用最接近（），但插件仍然同时打开“popup_content”的所有实例 [http://jsfiddle.net/A96su/1/](http://jsfiddle.net/A96su/1/)

```
$('.popup_content').closest('.popup_button').click(function (e) {
$('.popup_content').modal({
    closeClass: "popup_close",
    closeHTML: "<a href='#'>Close</a>",
    position: [36,238]
    });

    return false;
}); 
```

我会很感激你的帮助！-n-

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T14:32:12.963

```
$('.popup_button').click(function (e) {
    $('.popup_content', this).modal({
        closeClass: "popup_close",
        closeHTML: "<a href='#'>Close</a>",
        position: [36,238]
        });

        return false;
    }); 
```

请注意这一行：`$('.popup_content', this)`

# asp.net-mvc-4 - ASP.NET WebAPI 从 MVC4 控制器失败

> ID：12372008
> 
> 赞同：0
> 
> 时间：2012-09-11T14:27:20.047
> 
> 标签：asp.net-mvc-4, asp.net-web-api

我是 ASP.NET Web API 的新手，我正在努力解决一个非常奇怪的问题。

我有一些调用 RESTful 服务的代码，它可以从控制台项目中正常执行，但我无法从在 .NET 4.0 下运行的 MVC4 项目中运行它

调用服务的代码非常简单：

```
internal string Test()
{
    using (var client = new HttpClient())
    {
        client.BaseAddress = new Uri("https://testserver");

        var task = client.GetAsync("/someUri")
        var response = task.Result;
        response.EnsureSuccessStatusCode();

        return response.Content.ReadAsStringAsync().Result;
    }
} 
```

如前所述，从控制台项目调用它按预期工作，我会在几毫秒内得到响应，但是如果我在几秒钟后从 MVC4 控制器中的操作调用该方法，我会收到一条消息，指出：“连接尝试失败，因为连接方一段时间后没有正确响应，或者连接的主机没有响应，建立连接失败”。

奇怪的是，在调试 MVC4 版本时，任务状态总是显示为 WaitingForActivation。

运行 fiddler 不会显示从 MVC4 版本发出的任何请求，但对于控制台版本再次显示。

经过相当认真的谷歌搜索后，我找不到其他人似乎有这个问题，所以我猜我从根本上误解了一些东西，但目前我不确定是什么！

**英国夏令时 16:55 更新，2012 年 11 月 9 日**

更奇怪的是，我刚刚创建了一个新的 MVC4 站点，我可以毫无问题地调用该方法！我现在正在尝试比较这些站点，但是一个是升级到 MVC4 的现有站点，另一个是一个新的空白站点，因此发现相关差异可能很棘手。

**2012 年 9 月 14 日英国夏令时 16:44 更新**

这现在看起来像是一些基础设施/网络问题。

我使用 .NET 4.5 将项目升级到 VS2012，以便我可以使用 async/await 来尝试建议的实现以避免死锁。这并没有改变任何东西，所以我回到了第 1 格。

我用一个新的 MVC4 项目、一个新的服务库和一个单元测试项目创建了一个新的解决方案，以在 MVC 之外运行服务库。

在服务库中，我创建了一种方法来调用公共的“我的 IP 是什么”服务，另一种方法是调用公开但仅正确响应公司 IP 地址的公司服务。

对于某些背景，我通过 VPN 连接到公司 LAN。

当与 VPN 断开连接时，在单元测试和 MVC 中，IP 服务响应 HTTP 200，公司服务按预期响应 HTTP 404。

当连接到 VPN 时，单元测试都响应 HTTP 200，MVC 都超时。

接下来，我在本地运行 MS Soap Tool，并用它来代理对公司服务的调用。所有调用（无论是来自单元测试还是 MVC）都会显示请求和响应，但是单元测试会注册响应，而 MVC 控制器不会。

我唯一的另一个想法是这可能与回复的大小有关？除了单元测试调用公司服务之外，所有的“成功”都有很少的回复？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T17:21:41.380

Microsoft 推荐的将 MVC3 升级到 MVC4 站点的方法是从一个全新的 MVC4 站点开始迁移您的视图、控制器和代码。所以我认为您的升级步骤可能是您的问题的一部分，因为您能够让它在您创建的新 MVC4 站点中工作。如果您需要手动升级现有站点，我将按照[将 ASP.NET MVC 3 项目升级到 ASP.NET MVC 4中概述的步骤进行操作](http://www.asp.net/whitepapers/mvc4-release-notes#_Toc303253806)

# ruby - 选择应该选择哪个 div 类 ruby ？（使用水）

> ID：12372009
> 
> 赞同：2
> 
> 时间：2012-09-11T14:27:22.533
> 
> 标签：ruby, watir

我在选择要存储为字符串的内容时遇到问题，因为数据具有相同的 div 类名称，并且没有要使用的集合 ID。

我知道 ruby​​ 中的第一个和最后一个运算符，但是无论如何可以选择介于两者之间的选项吗？

所以例如

```
<html>
    <body>
        <div class="example">1111</div>
        <div class="example">2222</div>
        <div class="example">3333</div>
        <div class="example">4444</div>
        <div class="example">5555</div>
    </body>
</html> 
```

如何让 ruby​​ 选择相同类名的第 4 个类，以便我可以将 4444 存储为我的字符串？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T21:11:05.177

另一种方式（使用 Watir API）：

```
browser.div(:class => "example", :index => 3) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-11T14:39:44.970

```
browser.divs(:class => "example")[3] 
```

# php - 我在 PHP 中做了一个更改密码脚本，但它不起作用

> ID：12372010
> 
> 赞同：0
> 
> 时间：2012-09-11T14:27:25.670
> 
> 标签：php

我有以下代码，它不起作用。我目前正在为系统开发一个简单的更改密码功能，但无法使其正常运行。我想知道我是否忽略了一个非常简单的解决方案？

```
<?php    
    $con = mysql_connect("localhost","root");
    if (!$con) {
        die('Could not connect: ' . mysql_error());
    }

    $username = $_POST['userid'];  
    $password = $_POST['cpword'];
    $newpassword = $_POST['pword'];
    $confirmnewpassword = $_POST['pword2'];

    $result = mysql_query("SELECT username, pword FROM login WHERE username='$username'");

    if(!$result) {
        echo "The username entered does not exist!";
    } else
        if($password != mysql_result($result, 0)) {
            echo "Entered an incorrect password";
        }

    if($newpassword == $confirmnewpassword) {
        $sql = mysql_query("UPDATE login SET pword = '$newpassword' WHERE username = '$username'");     
    }

    if(!$sql) {
        echo "Congratulations, password successfully changed!";
    } else {
        echo "New password and confirm password must be the same!";
    }       
?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T14:34:09.607

好的，因为这个危险的脚本会感染互联网，我给你一些建议。

1.  使用[哈希](http://php.net/manual/en/function.hash.php)来保存密码，没有人想要一个可见的密码。
2.  永远不要告诉用户你的数据库中有什么，就像`Entered an incorrect password`通知告诉我我找到了一个用户名，所以我的暴力破解要容易 100 倍。
3.  而全网的人喊的是：`STOP USING MYSQL`Step to [PDO](http://php.net/manual/en/book.pdo.php) or [mysqli](http://nl.php.net/manual/en/book.mysqli.php)
4.  最后但同样重要的是：听说过[mysql 注入](http://www.tizag.com/mysqlTutorial/mysql-php-sql-injection.php)吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T14:51:23.763

好的，这段代码有很多问题，所以我将它重写为最新的并且一点也不危险（大部分）。

我没有*像你真正应该*的那样在这里对密码进行哈希处理，但你可以通过一些阅读来非常简单地做到这一点（试试这个：[PHP密码的安全哈希和盐](https://stackoverflow.com/questions/401656/secure-hash-and-salt-for-php-passwords)）

有关这些问题的确切问题和解决方案的完整列表，请查看@Bondye 的帖子或对 OP 问题的评论。

免责声明：未经测试，因此可能存在一些语法错误。这仍然不是很棒，但它是比原始代码更好的起点。请参阅下面的列表，了解我所做的更改以及原因。

开始...

```
<?php
    $host = "localhost";
    $database = "yourdatabase";
    $username_db = "root";
    $password_db = "databasepassword";
    $con = mysqli_connect($hostname, $username_db, $password_db, $database) or die(mysqli_error($con));

    $username = $_POST['userid'];  
    $newpassword = $_POST['pword'];
    $confirmnewpassword = $_POST['pword2'];

    if($newpassword == $confirmnewpassword)
    {
        //password & password confirm match, do the update
        $query = sprintf("UPDATE login SET pword=%s WHERE username=%s",
                          mysql_real_escape_string($newpassword),
                          mysql_real_escape_string($username));                    
        $sql = mysqli_query($query, $con) or die(mysqli_error($con);     
        if($sql)
        {
            echo "Congratulations, password successfully changed!";
        } 
        else
        {
            //sql error or update didn't work?
            echo 'generic failure message';
        }        
    }
    else
    {
        //new password and confirm password weren't the same.
        echo "New password and confirm password must be the same!";
    }    

?> 
```

更改：删除查询以查找用户名 - 确实是个人选择，但当您要在`update`查询中对该用户进行隐式搜索时，我没有看到查询数据库以查看用户是否存在的意义。其次，您应该在他们可以访问此脚本之前登录他们，因此应该没有关于用户是否存在的问题。

`mysql`将功能更改为`mysqli`等效项。

简化并清理了混乱的`if`测试，并将验证放在查询本身之前。这更好，因为您不应该告诉您的用户您的数据库中有什么，因为这对于攻击者来说是有用的信息，而对于*此时应该已经登录的*用户完全没有用处。

希望这会有所帮助并接受更正。

# java - 无法使用 HttpURLConnection 上传 Excel 文件

> ID：12372013
> 
> 赞同：2
> 
> 时间：2012-09-11T14:27:34.693
> 
> 标签：java, io, httpurlconnection, xls

我**成功地**使用 HttpURLConnection 上传***.txt 文件**。现在我的任务是更改上传每种文件类型的程序。我用**.xls 文件****尝试**了我的程序。文件放在服务器上，但内容不可读。

 **就像你在这里看到的：

> ÃÃÂ¡Â±Ã¡>Ã¾Ã¿ Å'Â¸Ã¤ÃŒÃŒÃŒS Sheet1Sheet2Sheet3Worksheets4 $â‚¬,Ã¾Ã¿3Ã â€¦Å¸Ã²Ã¹OhÂ«â€˜+'Â³Ã™0Å“8Å'@ `xâ€žÃ¤Microsoft CorporationMicrosoft Excel@â€Ã¸(ÂºÂ»Ã¾Ã¿3Ã â€¦Å¸Ã²Ã¹OhÂ«â€˜+'Â³Ã™0Ëœ8Å’@`xâ€žÃ¤Microsoft公司Microsoft Excel@â€Ã¸(ÂºÂ»@â€Ã¸(ÂºÂ»ÃŒï¿½Ã¡Â°ÃÃ¢\pMicrosoft Corporation

这是我的代码片段：

```
 HttpURLConnection urlConn = (HttpURLConnection) new URL(testdocumentURL).openConnection(); 
    urlConn.setRequestMethod("POST");
    urlConn.setRequestProperty("X-Method-Override", "PUT");     
    urlConn.setRequestProperty("Content-Type", "text/xml"); 
    urlConn.setRequestProperty("Authorization", "Basic "+ Client.getPassword());
    urlConn.setUseCaches(false);
    urlConn.setDoInput(true);
    urlConn.setDoOutput(true);
    urlConn.setFollowRedirects(false);
    urlConn.setRequestProperty("Slug", "Connectiontest/test.xls"); 
    String write = readFile(test.xls);
    urlConn.setRequestProperty("Content-Length","" + write.length());
    urlConn.getOutputStream().write(write.getBytes("UTF8")); 
```

在我看来，有两种方法可以解决这个问题。

1.  在 .write(write.getBytes("UTF8")) 处更改**输出**
2.  改变**输入**

目前我读的文件是这样的：

```
 readFile(String test){
    BufferedReader reader = new BufferedReader(new FileReader(test));
    String line = null;
    StringBuilder stringBuilder = new StringBuilder();
    String ls = System.getProperty("line.separator");

    while ((line = reader.readLine()) != null) {
        stringBuilder.append(line);
        stringBuilder.append(ls);
    }
    reader.close();
    return stringBuilder.toString();
    } 
```

我尝试以这种方式更改 RequestProperty() ：

```
connection.setRequestProperty("content-type", "multipart/form-data"); 
```

或者

```
connection.setRequestProperty("content-type", "application/vnd.ms-excel"); 
```

有人知道像这样上传 .xls 文件吗？我的老板说，我必须更喜欢**HttpURLConnector 。**：/

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:32:44.780

不要将 Excel 文件视为`String`. 改为`readFile`将文件读入 a `byte[]`，然后将其写入连接输出流。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T14:49:32.970

将内容类型设置为 application/vnd.ms-excel 然后试一试**

# c# - 是否可以更改队列中的元素？

> ID：12372014
> 
> 赞同：8
> 
> 时间：2012-09-11T14:27:35.273
> 
> 标签：c#, queue

假设我有一个整数队列（或任何 T 类），我可以更改队列中元素的值吗？更具体地说，如果我将队列定义如下：

```
Queue<int> q = new Queue<int>(); 
```

我们可以像处理数组一样更改其元素的值吗？（如果 q 是一个数组，我们可以做这样的事情：`q[0]=1`改变它的元素）。我只是想简化场景并以 int 为例，但我的意图是尝试查看队列中 T 类的第一项，进行一些计算并更新队列以供其他程序处理。我不想让它出队，因为队列中的序列将与原始序列不同。希望我想做的事情有意义。请指教。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-11T14:31:06.847

如果队列中的项目是可变类型，那么您可以更改队列的第一个项目的值。如果不重新创建队列或执行大量入队/出队，则无法更改队列前面的项目。

作为第一种情况的示例，如果您有`Queue<MyClass>`一个定义为：

```
class MyClass
{
    public string Value { get; set; }
}

Queue<MyClass> queue = new Queue<MyClass>();
queue.Enqueue(new MyClass() { Value = "1" });
queue.Peek().Value = 2;
string value = queue.Peek().Value; // is 2 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-11T14:50:15.463

您不能直接更改其中的项目`Queue`（尽管您可以使用[Tudor 建议](https://stackoverflow.com/a/12372114/41071)的解决方法）。但是如果你想有一个队列，你不必使用`Queue`. .Net 的另一种可能类型是[`LinkedList`](http://msdn.microsoft.com/en-us/library/he2s3bh7.aspx). 它允许您从两端添加和删除东西，可以在您的场景中使用：

```
LinkedList<int> list = new LinkedList<int>();

// enqueue an item
list.AddLast(1);

// dequeue an item
var item = list.First.Value;
list.RemoveFirst();

// put item back to the front of the queue
list.AddFirst(item); 
```

您似乎想这样做以按顺序按几个模块处理每个项目。但我不确定这是做这种工作的正确方法。更好的方法可能是在每两个模块之间设置一个队列。一个模块总是从它的输入队列中取出一个项目，处理它，然后把它放到它的输出队列中。

这种方法的优点之一是更大的灵活性：一个模块可以在输出和输入上具有不同的类型，这对于“一个队列”方法是不可能的（除非你使用`object`s 的队列，或者类似的东西那）。

TPL Dataflow（.Net 4.5 中的新功能）使用这种方法通过并行化提高性能。它可以做到这一点，因为如果您没有单个中央队列，每个模块都可以独立于其他模块处理项目。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-11T14:40:06.823

只要您存储的是类之类的引用类型，您对其所做的任何更改都会反映在队列中。下面代码的输出将是“2”：

```
 public class MyClass
    {
        public int Value { get; set; }
    }

    static void Main(string[] args)
    {
        Queue<MyClass> q = new Queue<MyClass>();
        q.Enqueue(new MyClass { Value = 1 });
        var i = q.Peek();
        i.Value++;
        i = q.Peek();
        Console.WriteLine(i.Value);
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-11T14:32:39.170

您可以使用一个简单的包装器：

```
class Wrapper<T>
{
    public T Value { get; set; }
}

static void Main(string[] args)
{
    Queue<Wrapper<int>> q = new Queue<Wrapper<int>>();
    Wrapper<int> wr = new Wrapper<int> { Value = 1 };
    q.Enqueue(wr);

    Wrapper<int> wr1 = q.Peek();
    wr1.Value = 2;

    int value = q.Dequeue().Value;
    Console.WriteLine(value);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-11T15:19:58.610

```
 public static class Extensions
    {
        public static Queue<T> SetFirstTo<T>(this Queue<T> q, T value)
        {
            T[] array = q.ToArray();
            array[0] = value;
            return new Queue<T>(array);
        }
    } 
```

严格来说，这不会改变队列，因此需要重新分配。

```
 [TestMethod]
        public void Queue()
        {
            var queue = new Queue<int>(new[]{1,2,3,4});
            queue = queue.SetFirstTo(9);
            Assert.AreEqual(queue.Peek(),9);
        } 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2012-09-11T14:30:39.750

简单回答是不。它不是 Queue 对象的 API 的一部分

[http://msdn.microsoft.com/en-us/library/system.collections.queue.aspx](http://msdn.microsoft.com/en-us/library/system.collections.queue.aspx)

然而，当然一切皆有可能。您可以编写一个扩展方法来执行此操作，但它必须与对象的 API 一起使用，因此在保留顺序的同时将所有项目与更改一起出队/入队。

但是如果你想这样做，你就是把队列当作一个列表，那么为什么不使用一个列表呢？

# php - PHP 包含母版页路径问题

> ID：12372026
> 
> 赞同：0
> 
> 时间：2012-09-11T14:28:19.657
> 
> 标签：php, relative-path

我有一个像这样的文件结构：

```
Admin/index.php
index.php
master.php
site.js 
```

的简化版本`master.php`：

```
<html>
    <head>
        <script src="site.js"></script>
    </head>
    <body>
        <?php echo $content ?>
    </body>
</html> 
```

的简化版本`index.php`：

```
<?php ob_start(); ?>
Lorem ipsum
<?php
    $content = ob_get_contents();
ob_end_clean();
    include("master.php");
?> 
```

的简化版本`Admin/index.php`：

```
<?php ob_start(); ?>
Lorem ipsum
<?php
    $content = ob_get_contents();
ob_end_clean();
    include("../master.php");
?> 
```

`index.php`工作得很好，但是在`Admin/index.php`，它试图`site.js`在`Admin`文件夹中找到......

我可以使用`/absolute/path/to/site.js`，但站点的不同实例在不同的 url 下运行（例如`http://mysite.com/Instance1/Admin/index.php`等...）

那么我该如何解决这个问题，以便它`site.js`在其中的文件夹中查找`master.php`，而不是在页面文件夹中查找，*包括* `master.php`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T14:35:15.470

你可以使用 `<base href="http:/site.com/" />`

把它放在 HTML 的头部（在 之间`<head> and </head>`）。

该`<base>`标记指定文档中所有相对 URL 的基本 URL/目标。

因此，如果您将其设置为[http://yoursite.com/instance1/](http://yoursite.com/instance1/)并将您的 js 设置为 script.js ，它将从[http://yoursite.com/instance1/script.js](http://yoursite.com/instance1/script.js)获取它。

# objective-c - 使用 NSCoder 将自定义对象保存到 plist

> ID：12372030
> 
> 赞同：0
> 
> 时间：2012-09-11T14:28:27.760
> 
> 标签：objective-c, xcode, plist, nscoding, initwithcoder

所以，我意识到我需要使用 NSCoding 将我的自定义对象保存到 plist。

`initWithCoder`我正在苦苦挣扎的部分正是在我实现了and`encodeWithCoder`方法之后我是如何做到这一点的。他们分别返回`id`和`void`，所以如果他们已经将我的对象转换为 NSData 或他们对他们做的任何事情，数据在哪里，所以我可以保存它？

我有这样设置的方法：

```
- (id)initWithCoder:(NSCoder *)decoder { // Decode
    if (self = [super init]) {
        self.name = [decoder decodeObjectForKey:@"gameName"];
        self.genre = [decoder decodeObjectForKey:@"gameGenre"];
        self.rating = [decoder decodeObjectForKey:@"gameRating"];
    }
    return self;
}

- (void)encodeWithCoder:(NSCoder *)encoder { // Encode
    [encoder encodeObject:self.name forKey:@"gameName"];
    [encoder encodeObject:self.genre forKey:@"gameGenre"];
    [encoder encodeObject:self.rating forKey:@"gameRating"];
} 
```

试图弄清楚下一步是将这些对象（已经在 NSMutableArray 中）保存到 .plist 中，并在重新打开应用程序时调用。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:37:05.573

嗯，这取决于你想做什么。这可能`NSKeyedArchiver`就足够了。考虑：

```
+ (NSData *)archivedDataWithRootObject:(id)rootObject
+ (BOOL)archiveRootObject:(id)rootObject toFile:(NSString *)path 
```

它采用对象图的根对象，并使用序列化数据创建 NSData 对象，或者将数据序列化到文件中。

然后看看`NSKeyedUnarchiver`哪个有这些：

```
+ (id)unarchiveObjectWithData:(NSData *)data
+ (id)unarchiveObjectWithFile:(NSString *)path 
```

我相信这会让你朝着你的目标前进。

**编辑**

> 当我试图（我认为）告诉它我想要它写哪个数组时，我遇到了一个错误。在此行获取“预期标识符”： [rootObject setValue:[self.dataController.masterGameList] forKey:@"games"]; – 卢克奇

那是一个 KVC API。归档/取消归档方法是类方法，因此您只需使用以下命令保存整个对象图：

```
if (![NSKeyedArchiver archiveRootObject:self.dataController.masterGameList
                                 toFile:myPlistFile]) {
    // Handle error
} 
```

然后你加载它：

```
self.dataController.masterGameList =
    [NSKeyedUnarchiver unarchiveObjectWithFile:myPlistFile]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T14:48:33.677

您将需要`NSKeyedArchiver`在对象图的根对象上实现以保存然后`NSKeyedUnarchiver`重构对象图。

看[这个教程](http://cocoadevcentral.com/articles/000084.php)

# php - 用于 PHP 和故障转移的 Memcached

> ID：12372031
> 
> 赞同：13
> 
> 时间：2012-09-11T14:28:28.953
> 
> 标签：php, memcached

我们正在为我们的应用程序部署 memcached，我想让它尽可能地具有抵抗力。

我们计划使用更新的[memcacheD](http://ar2.php.net/manual/en/book.memcached.php)扩展。

我还没有完全弄清楚的一件事是，如果其中一台服务器死了会发生什么。至少，memcached 客户端似乎只是“放弃”了该服务器，并且没有在其中存储任何内容。

这种行为我很好。我们可以处理一堆缓存未命中。但是，在其中一台服务器被视为“失败”之后，后续的集合并被重新分配给剩余的服务器会很好。

因为这似乎不会自动发生；我想解决这个问题的唯一方法是让外部系统对 memcached 系统进行健康检查，并适当地更新服务器列表。

但是，如果有一个包含 10 个服务器的列表，并且假设第 5 个服务器死掉了……即使使用 Ketama 哈希，这似乎也会引发密钥的大量重新分配（这只是基于常识）。

所以理想情况下，我只想让 PHP 扩展找出服务器已关闭，将其标记为关闭指定的时间量（10 分钟），并在这 10 分钟内回退到其他服务器（分布良好）以进行设置和获取.

其他人如何解决这个问题？

**编辑**：澄清我的 libketama 点。

假设我们有 10 台服务器：

```
1,2,3,4,5,6,7,8,9,10 
```

其中一人死亡。然后，Libketama 将提供一个非常高的可能性，即丢失服务器的命中被平均分配到其余服务器：

```
1,2,3,4,inactive,6,7,8,9,10 
```

但是：如果我们手动提供和管理此列表，则情况并非如此：

```
1,2,3,4,6,7,8,9,10 // There are now 9 servers! 
```

6 现在将获得 5 以前的密钥，7 将获得 6。8个得到7个，9个得到8个，10个得到9个。第 10 台服务器获得的所有点击量不会平均分配到其余服务器中。导致几乎 50% 的所有密钥被发送到新服务器的可能性很高。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T14:48:54.090

我通常将可用服务器列表存储在 APC 中，因此我可以即时修改它。你是对的，系统会在它被列出时尝试继续使用关闭的服务器，幸运的是，使用新的散列方法，将它从轮换中拉出来并不是什么大问题。

我会避免使用全新的 PHP 扩展，或者尝试将新软件添加到您的部署堆栈中。您可能已经在使用某些东西进行监控（nagios？）。让它在每个网络服务器上调用一个简单的 PHP 脚本来调整内存列表似乎是最好的选择。

值得注意的是，在[Ketama 散列系统](http://www.last.fm/user/RJ/journal/2007/04/10/rz_libketama_-_a_consistent_hashing_algo_for_memcache_clients)下，将服务器从轮换中移除将导致*其密钥*在环上的其他位置（连续体）被重新散列，其他服务器将看不到它们在其他地方分配的密钥。将其可视化为一个圆圈，为每个服务器分配圆圈上的多个点（100-200）。密钥被散列到圆圈中并顺时针继续，直到找到服务器。从环中删除服务器只会导致这些值继续更进一步以找到新服务器。运气好的话，值的分布将平等地影响剩余的服务器。

演示哈希系统：

```
<?php

$m = new Memcached();
$m->setOption(Memcached::OPT_DISTRIBUTION, Memcached::DISTRIBUTION_CONSISTENT);

$m->addServer('localhost', 11211);
$m->addServer('localhost', 11212);
$m->addServer('localhost', 11213);
$m->addServer('localhost', 11214);
$m->addServer('localhost', 11215);
$m->addServer('localhost', 11216);
$m->addServer('localhost', 11217);
$m->addServer('localhost', 11218);
$m->addServer('localhost', 11219);
$m->addServer('localhost', 11210);

$key = uniqid(); //You may change this to md5(uniqid()); if you'd like to see a greater variation in keys. I don't think it necessary.
$m->set($key, $key, 5);

var_dump($m->get($key));

unset($m);

$m = new Memcached();
$m->setOption(Memcached::OPT_DISTRIBUTION, Memcached::DISTRIBUTION_CONSISTENT);
//one server removed. If assignment to the continuum is dependent based on add order, we would expect the get call here to fail 90% of the time, as there will only be a success if the value was stored on the first server. If the assignment is based on some hash of the server details we'd expect success 90% of the time. 
$m->addServer('localhost', 11211);
//$m->addServer('localhost', 11212);
$m->addServer('localhost', 11213);
$m->addServer('localhost', 11214);
$m->addServer('localhost', 11215);
$m->addServer('localhost', 11216);
$m->addServer('localhost', 11217);
$m->addServer('localhost', 11218);
$m->addServer('localhost', 11219);
$m->addServer('localhost', 11210);

var_dump($m->get($key));

unset($m);

$m = new Memcached();
$m->setOption(Memcached::OPT_DISTRIBUTION, Memcached::DISTRIBUTION_CONSISTENT);
//2 servers removed
$m->addServer('localhost', 11211);
$m->addServer('localhost', 11212);
//$m->addServer('localhost', 11213);
//$m->addServer('localhost', 11214);
$m->addServer('localhost', 11215);
$m->addServer('localhost', 11216);
$m->addServer('localhost', 11217);
$m->addServer('localhost', 11218);
$m->addServer('localhost', 11219);
$m->addServer('localhost', 11210);

var_dump($m->get($key));

unset($m);

$m = new Memcached();
$m->setOption(Memcached::OPT_DISTRIBUTION, Memcached::DISTRIBUTION_CONSISTENT);
//Out of order
$m->addServer('localhost', 11210);
$m->addServer('localhost', 11211);
$m->addServer('localhost', 11219);
$m->addServer('localhost', 11212);
$m->addServer('localhost', 11217);
$m->addServer('localhost', 11214);
$m->addServer('localhost', 11215);
$m->addServer('localhost', 11216);
$m->addServer('localhost', 11218);
$m->addServer('localhost', 11219);
$m->addServer('localhost', 11213);

var_dump($m->get($key));

unset($m); 
```

如果散列系统关心顺序，或者我们希望`bool(false)`在大多数次要示例上得到省略的服务器，因为早期的服务器已被删除等。但是基于我快速、完全非科学的测试，我只得到一个 bool false 10 次中的任何特定插槽。我显然刚刚在我的测试盒上启动了 10 台服务器。只给他们每个人 4mb 的内存

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T14:49:29.303

您可能想尝试`Memcached::OPT_AUTO_EJECT_HOSTS`PHP 的选项常量。它没有直接记录，但这里有一条评论[命名](http://ar2.php.net/manual/en/memcached.constants.php#104120)它。

（我没试过，所以我不能告诉你它是否有效）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T14:52:57.640

根据对评论的回答，我建议如下：

您需要构建一个缓存类。

此类将包含以下信息：

*   缓存服务器列表

    *   在线或离线状态
    *   对此服务器的请求计数
*   当前存储的密钥列表及其所在的服务器

接下来，您将需要标准函数来添加、更新和删除密钥。

每次执行这些功能之一时，您都需要检查密钥是否已经在缓存中以及它在哪个服务器上。

如果它不在服务器中，请在检索到实际 DB 值后选择请求最低的服务器以将其保存。

如果这些函数中的任何一个从缓存服务器返回错误，我会将该服务器标记为脱机，重置计数，并从该服务器上的列表中删除任何键。

此时，您可以轻松地将它们自动移动到新服务器或删除它们以便再次查询它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T20:00:56.297

我的 2 美分：为 Memcached 开发一个健壮的 HA 模块并不容易。例如考虑以下情况：

*   您将如何确定哪个服务器还活着，哪个服务器死了？您应该以某种方式在运行 Web/应用程序服务器的所有 HA 模块之间同步
*   您如何在您的网络/应用服务器之间发布此信息
*   你会有一个编排器吗？

我建议您看一下[Redis Sentinel](http://redis.io/topics/sentinel)，它现在处于 Beta 版，在过去几个月中专门为解决 Redis 中的这些问题而开发和测试。在开始开发单行代码之前，您会发现许多必须注意的极端情况。

至于这里讨论的其他问题：

*   当您丢失节点时，您将丢失 1/N 的密钥，其中 N 是您最初拥有的节点数，即包括失败的节点。这就是 Ketama 的工作原理
*   使用新的 Memcached 类在 Memcached 客户端上存储密钥绝对不是可行的方法（IMO）：（1_ 你要将所有这些密钥保存在哪里？（2）你如何在你的 web/app 节点之间同步？（3 ) 访问这些数据结构需要多长时间才能了解每个键驻留在哪个节点上？——这就是为什么 Memcached 完全基于散列函数，以使其快速和简单。

最后但同样重要的是，我建议您也检查 Memcached as-a-service 解决方案。例如，我们[Garantia Data](http://garantiadata.com/)已经解决了 Memcached 的 HA 问题。

披露：我是 Garantia Data 的联合创始人兼首席技术官。

# ruby-on-rails - NoMethodError: nil:NilClass Factory Girl/Capybara 问题的未定义方法“*”

> ID：12372033
> 
> 赞同：0
> 
> 时间：2012-09-11T14:28:35.523
> 
> 标签：ruby-on-rails, capybara, factory-bot

此特定测试试图为用户创建“状态更新”。

这是完整的错误：

```
 Failure/Error: FactoryGirl.create(:status_update, user: @user, created_at: 1.day.ago)
 NoMethodError:
   undefined method `*' for nil:NilClass
 # ./app/models/status_update.rb:31:in `default_values'
 # ./spec/models/user_spec.rb:28:in `block (3 levels) in <top (required)>' 
```

这是测试：

```
describe "Status Update Associations" do
before { @user.save }
let!(:older_status_update) do 
  FactoryGirl.create(:status_update, user: @user, created_at: 1.day.ago)
end
let!(:newer_status_update) do 
  FactoryGirl.create(:status_update, user: @user, created_at: 1.hour.ago )
end

it "should have status updates in the right order" do 
  @user.status_update.should == [newer_status_update, older_status_update]
end
end 
```

由于错误指向状态更新模型，我不妨也将其包括在此处。我怀疑这与初始化后设置的一些变量和 let！在测试中，虽然我很难尝试不同的回调。

```
class StatusUpdate < ActiveRecord::Base
   belongs_to :user

   after_initialize :default_values

   attr_accessible :current_weight,
                   :current_bf_pct,
                   :current_lbm,
                   :current_fat_weight,
                   :change_in_weight,
                   :change_in_bf_pct,
                   :change_in_lbm,
                   :change_in_fat_weight,
                   :total_weight_change,
                   :total_bf_pct_change,
                   :total_lbm_change,
                   :total_fat_change

   validates :user_id, presence: true
   validates :current_bf_pct, presence: true,
                              numericality: true,
                              length: { minimum: 4, maximum:5 }  
   validates :current_weight, presence: true,
                              numericality: true,
                              length: { minimum: 4, maximum:5 } 
   validates :current_lbm, presence: true
   validates :current_fat_weight, presence: true                   

   def default_values
     self.current_fat_weight = self.current_weight * self.current_bf_pct
     self.current_lbm = self.current_weight - self.current_fat_weight
   end  

   default_scope order: 'status_update.created_at DESC'
end 
```

这是将 'current_weight 和 current_bf_pct 添加到 default_values 方法的工厂。

```
 factory :status_update do
user
  current_weight 150
  current_bf_pct 0.15
end 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:53:07.397

是因为你的`default_values`方法。

您正在这样做`self.current_weight * self.current_bf_pct`，但它们都没有设置为数值。

# ruby-on-rails - 需要带有 ruby on rails (phusion Passenger + nginx) 支持的网络托管控制面板

> ID：12372034
> 
> 赞同：1
> 
> 时间：2012-09-11T14:28:36.027
> 
> 标签：ruby-on-rails, cpanel, plesk, webmin, kloxo

我正在寻找支持**ruby​​ on rails**应用程序部署和**phusion 乘客 + nginx支持的 web 托管控制面板、****商业或开源版本**。我试过谷歌，但我找不到合适的结果。所以请大家帮帮我。

 ***** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T14:30:01.620

您可以使用**heroku**或任何**vps 托管（linode）**或**amazon aws**进行托管，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-25T17:10:22.607

我认为现在不存在这种情况。虽然有些平台设计得像 ruby​​ on rails 应用程序的“cPanel”

**Heroku** 有工具[https://toolbelt.heroku.com/](https://toolbelt.heroku.com/)，其功能类似于控制面板，但没有 UI。一切都在终端上运行（登录、重新启动服务器、加载项/插件管理等）

**Engineyard** 有类似于 heroku toolbelt 的工具，但有自己的 UI。

我个人会选择 Heroku。社区更大，拥有更多工具/插件，并且在终端上运行。****

# php - Symfony 2.1 控制台不显示所有错误

> ID：12372042
> 
> 赞同：0
> 
> 时间：2012-09-11T14:28:53.047
> 
> 标签：php, symfony, console, symfony-2.1

我正在 Symfony 2.1 中创建一个控制台命令。

在开发这个时，我遇到了错误被吞下的问题。

一些错误会冒泡并显示正常，其他错误只会导致应用程序退出而不显示任何内容。

在下面的示例中，getFile 是一个函数，但没有关于缺少括号的错误。脚本简单地退出。

```
$this->extract($file->getFile->getPathname()); 
```

我已将错误级别设置为 E_ALL | E_STRICT 并确保在 php.ini 的 cli 版本中显示错误。

如何让 PHP 显示错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T18:29:45.527

我找到了原因，这是我自己的代码中的一个 try catch 块吞噬了错误。

# sql-server - 如何在 2 个以上的表 SqlServer 之间创建连接

> ID：12372045
> 
> 赞同：-3
> 
> 时间：2012-09-11T14:29:09.553
> 
> 标签：sql-server, tsql

> **可能重复：**
> [如何连接三个表](https://stackoverflow.com/questions/5781078/how-to-join-three-tables)

我有 4 张桌子：

*   文件夹（id_folder，名称）
*   子文件夹（id_subfolder，id_folder，名称，其他列，...）
*   片（id_piece，id_subfolder，id_folder）
*   图像（id_image，id_piece，名称，..）

如何获取一个文件夹的所有内容（例如“id_folder=1”）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T14:34:02.330

假设这些表之间的零对多关系可以工作：

```
SELECT folder.id_folder, folder.name, subfolder.id_subfolder, subfolder.name, subfolder.othercolumn, piece.id_piece, image.id_image, image.name
FROM folder
LEFT JOIN subfolder
ON folder.id_Folder = subfolder.id_folder
LEFT JOIN Piece
ON subfolder.id_subfolder = piece.id_subfolder
LEFT JOIN [image]
on piece.id_piece = image.id_piece
WHERE folder.id_folder = 1; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T14:35:10.947

你会`JOIN`你的桌子，像这样：

```
select *
from folder f
left join subfolder sf
    on f.id_folder = sf.id_folder
left join piece p
    on sf.id_subfolder = p.id_subfolder
    and sf.id_folder = p.id_folder
left join image i
    on p.id_piece = i.id_piece
where f.id_folder = 1 
```

如果您在学习`JOIN`语法方面需要帮助，那么有一个很棒[的 SQL 连接可视化解释](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)会有所帮助。

# jquery - DataTable 1.9.3 搜索问题 - 阻止 Data Table 考虑 h ref 值 -

> ID：12372055
> 
> 赞同：0
> 
> 时间：2012-09-11T14:29:35.520
> 
> 标签：jquery, asp.net, asp.net-mvc-3, datatables

在我的项目中，我创建了一个`dataTable`，除一个特殊情况外，一切正常。

在执行搜索时，我`datatable`也在搜索`href`锚标记中的 with 内的文本。但我不想考虑这种情况。

希望你理解我的问题。任何帮助都感激不尽。

我正在使用版本**DataTable 1.9.3**

**我的 javascript** :-

```
$('#dataGrid').dataTable(
        {
            "aoColumnDefs": [
            { "sType": "html", "aTargets": [1] },
            { "bSortable": false, "aTargets": [0] },
            { "bSearchable": false, "aTargets": [0] }
            ],
            "bPaginate": false,
            "bLengthChange": false,
            "bFilter": true,
            "bInfo": false,                
            "aaSorting": [[1, 'asc']]
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T13:20:02.570

我终于找到了问题，问题是我应用的数据表版本。我使用了最新版本的数据表之一 - **DataTables v1.9.3**并遇到了这个问题。

我还检查了他们最新的一个 - **DataTables v1.9.4**，它也有同样的问题。两个数据表在搜索时都会考虑锚标记的 href 值。

最后我选择了**[Datatable 1.9.0](http://ajax.aspnetcdn.com/ajax/jquery.dataTables/1.9.3/jquery.dataTables.min.js)**版本，现在它可以按预期工作了。

感谢你的帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T09:27:37.477

我可以帮助解决方法：

```
<a hhref='file.aspx'>... </a> 
```

和

```
 $("table a").mouseenter(function() {this.href=this.attr('hhref')}); 
```

# opengl - 如何在 OpenGL 3.2 中使用 GL_TEXTURE_2D_ARRAY

> ID：12372058
> 
> 赞同：4
> 
> 时间：2012-09-11T14:29:44.320
> 
> 标签：opengl, glsl, textures

因此，我尝试按照[文档](http://www.opengl.org/wiki/Array_Texture)进行操作，但是似乎无法使纹理 2D 数组起作用。

```
-(GLint)buildTextureArray:(NSArray *)arrayOfImages
{
    GLImage *sample = [GLImage imageWithImageName:[arrayOfImages objectAtIndex:0] shouldFlip:NO]; //Creates a sample to examine texture width and height
    int width = sample.width, height = sample.height;
    GLsizei count = (GLsizei)arrayOfImages.count; 

    GLuint texture3D;
    glGenTextures(1, &texture3D);
    glBindTexture(GL_TEXTURE_2D_ARRAY, texture3D);

    glPixelStorei(GL_UNPACK_ROW_LENGTH, width);
    glPixelStorei(GL_UNPACK_ALIGNMENT, 1);

    glTexParameteri(GL_TEXTURE_2D_ARRAY,GL_TEXTURE_MIN_FILTER,GL_LINEAR_MIPMAP_LINEAR);
    glTexParameteri(GL_TEXTURE_2D_ARRAY,GL_TEXTURE_MAG_FILTER,GL_LINEAR);
    glTexParameteri(GL_TEXTURE_2D_ARRAY,GL_TEXTURE_WRAP_S,GL_REPEAT);
    glTexParameteri(GL_TEXTURE_2D_ARRAY,GL_TEXTURE_WRAP_T,GL_REPEAT);
    glTexImage3D(GL_TEXTURE_2D_ARRAY, 0, GL_RGBA8, width, height, count, 0, GL_BGRA, GL_UNSIGNED_INT_8_8_8_8_REV, NULL);

    int i = 0;
    for (NSString *name in arrayOfImages) //Loops through everything in arrayOfImages
    {
        GLImage *image = [GLImage imageWithImageName:name shouldFlip:NO]; //My own class that loads an image
        glTexSubImage3D(GL_TEXTURE_2D_ARRAY, 0, 0, 0, i, image.width, image.height, 1, GL_RGBA, GL_UNSIGNED_BYTE, image.data);
        i++;
    }
    return texture3D;
}

//Setting Uniform elsewhere
glBindTexture(GL_TEXTURE_2D_ARRAY, textureArray);
glUniform1i(textures, 0);    

//Fragment Shader
#version 150

in vec3 texCoords;

uniform sampler2DArray textures;

out vec3 color;

void main()
{
    color = texture(textures, texCoords.stp, 0).rgb;
} 
```

我能够加载具有相同纹理参数的单个纹理，但我无法让它与纹理 2D 数组一起使用。我得到的只是黑色纹理。为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T15:06:49.817

```
glTexParameteri(GL_TEXTURE_2D_ARRAY,GL_TEXTURE_MIN_FILTER,GL_LINEAR_MIPMAP_LINEAR); 
```

您的纹理实际上没有*mipmap*。所以不要再告诉 OpenGL 了。

此外，***始终***为您的纹理设置[mipmap 范围参数 (`GL_TEXTURE_BASE_LAYER`和`GL_TEXTURE_MAX_LAYER`)](http://www.opengl.org/wiki/Texture#Mipmap_range)。或者更好的是，使用[纹理存储来分配纹理的存储空间](http://www.opengl.org/wiki/Texture#Immutable_texture_storage)，它会为您完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T10:47:03.667

对于 2d_array 纹理，texcoords 的“v”分量从 0 高度变化，“w”从 0 深度变化（因为它表示层）。尝试更改这些 texcordinates。

# sql - 如何从 all_tables 中选择表？

> ID：12372065
> 
> 赞同：0
> 
> 时间：2012-09-11T14:29:58.970
> 
> 标签：sql, oracle

我有如下表名模板，有一对同名加一个数字，最后是：fmj.backup_semaforo_geo_THENUMBER，例如：

```
select * from fmj.backup_semaforo_geo_06391442
select * from fmj.backup_semaforo_geo_06398164
... 
```

假设我需要从使用“fmj.backup_semaforo_geo_%”过滤器成功的每个表中选择一列，我试过这个：

```
 SELECT calle --This column is from the backup_semaforo_geo_# tables
     FROM (SELECT table_name
      FROM all_tables
     WHERE owner = 'FMJ' AND table_name LIKE 'BACKUP_SEMAFORO_GEO_%'); 
```

但我得到了 all_tables 表名数据：

```
TABLE_NAME
----------
BACKUP_SEMAFORO_GEO_06391442
BACKUP_SEMAFORO_GEO_06398164
... 
```

在没有获得 all_tables 输出的情况下如何实现这一点？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T15:34:47.783

大概您当前的查询正在获取`ORA-00904: "CALLE": invalid identifier`，因为子查询没有名为`CALLE`. 不幸的是，您不能在运行时为查询提供表名，而不得不求助于[动态 SQL](http://docs.oracle.com/cd/E14072_01/appdev.112/e10472/dynamic.htm)。

像这样的东西将遍历所有表，并且每个表都会`CALLE`从每个表中获取所有值，然后您可以遍历这些值。我曾经`DBMS_OUTPUT`显示它们，假设您在 SQL*Plus 中执行此操作或可以处理它的东西；但你可能想对他们做些别的事情。

```
set serveroutput on

declare
    -- declare a local collection type we can use for bulk collect; use any table
    -- that has the column, or if there isn't a stable one use the actual data
    -- type, varchar2(30) or whatever is appropriate
    type t_values is table of table.calle%type;
    -- declare an instance of that type
    l_values t_values;
    -- declare a cursor to generate the dynamic SQL; where this is done is a
    -- matter of taste (can use 'open x for select ...', then fetch, etc.)
    -- If you run the query on its own you'll see the individual selects from
    -- all the tables
    cursor c1 is
        select table_name,
            'select calle from ' || owner ||'.'|| table_name as query
        from all_tables
        where owner = 'FMJ'
        and table_name like 'BACKUP_SEMAFORO_GEO%'
        order by table_name;
begin
    -- loop around all the dynamic queries from the cursor
    for r1 in c1 loop
        -- for each one, execute it as dynamic SQL, with a bulk collect into
        -- the collection type created above
        execute immediate r1.query bulk collect into l_values;
        -- loop around all the elements in the collection, and print each one
        for i in 1..l_values.count loop
            dbms_output.put_line(r1.table_name ||': ' || l_values(i));
        end loop;
    end loop;
end;
/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T15:20:50.473

可能是 PLSQL 程序中的动态 SQL；

```
for a in (SELECT table_name
            FROM all_tables
            WHERE owner = 'FMJ' AND table_name LIKE 'BACKUP_SEMAFORO_GEO_%')
LOOP
   sql_stmt := ' SELECT calle FROM' || a.table_name;
   EXECUTE IMMEDIATE sql_stmt;
   ...
   ...
END LOOP; 
```

# jquery - 大型数据集的过滤下拉菜单

> ID：12372068
> 
> 赞同：4
> 
> 时间：2012-09-11T14:30:11.980
> 
> 标签：jquery, html, jquery-plugins, jquery-chosen, large-data

我正在尝试找到一种方法或插件，它能够处理大量数据（约 10,000 行）并创建一个组合框/下拉列表，可以通过键入进行过滤，或者能够滚动浏览所有记录一次。

我尝试过查看不同的插件以及编写自己的插件。那里有很多很棒的选项，但是一旦数据集变大，其中许多选项的性能就会迅速下降。

我一直在玩[selected](http://harvesthq.github.com/chosen/)。然而，我担心的是当有 10,000 条记录时的搜索性能会导致输入延迟，并且如果您尝试输入速度过快可能会锁定浏览器。还检查了 selected 的 github 页面，它似乎最近没有太大的发展。

浏览器要求是 IE 7+（由于 javascript 性能不佳，IE 确实是最大的问题）和 FF（Chrome 和 Safari 是奖励）。

这是一个**[jsfiddle](http://jsfiddle.net/GhZa2/)**，它在某种程度上模仿了将在我的案例中使用的数据类型。我还添加了所选插件，以便您查看它的执行情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T03:28:19.617

您可能希望将[Datatables](http://datatables.net/)视为替代方案。它真的很漂亮 - 你可以有一个很好的表格布局（你指的是“行”，所以我假设它是表格数据而不是单列）并且过滤是“智能/原子” - 例如，如果你输入“红色汽车” " 进入搜索框，它会给你所有包含红色和汽车的行，但不一定在一起。

它也有各种插件——包括一个使用滑块的分页器，对于大页数很有用。我已经用 2,000 多条记录运行它，只要您的 PC 有足够的 RAM，它就非常快。它支持通过 AJAX 进行动态分页作为替代方案。

它也实现了“无限滚动”，有几个参数更改和一个或两个 AJAX 调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T14:34:19.873

您确定将如此大量的数据加载到客户端并在那里处理是个好主意吗？像大多数开发人员通常做的那样——在服务器上，通过 ajax 处理输入并只加载需要的数据，这样做不是更好吗？

现在的 JS 更快，但没那么快。

# jquery - 在jquery中执行angularjs函数

> ID：12372069
> 
> 赞同：0
> 
> 时间：2012-09-11T14:30:12.667
> 
> 标签：jquery, angularjs

任何想法当用户选择 jquery 选择函数时，代码可以执行 selectResults() （角度函数）并传入用户选择的值？

```
minLength: 2,
delay: 500,
select: function (event, ui) {
    $('#fwSearch').val(ui.item.selectedValue);

    debugger;
    //navigate to the FirewallDetail page.
    selectResults($('#selectedUnit').val(ui.item.selectedValue));
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T22:12:38.900

这是使用指令的方法。 [http://plnkr.co/edit/ZFj4rz](http://plnkr.co/edit/ZFj4rz)

在此示例中，它使用`source`和`onselect`属性来处理自动完成源和选择事件。

```
app.directive('autocomplete', function() {
  return { 
    restrict: 'A',
    scope: {
      source: '=',
      onselect: '='
    },
    link: function( scope, elem, attrs ) {
      $(elem).autocomplete({
        source: scope.source,
        delay: 500,
        minLength: 2,
        select: function( event, ui ) {
          scope.onselect( ui.item.value );
        }
      });
     }
  };
}); 
```

# iphone - 通过拖动控制点调整曲线大小

> ID：12372073
> 
> 赞同：0
> 
> 时间：2012-09-11T14:30:22.393
> 
> 标签：iphone, ios, ipad, touch

我正在尝试通过拖动其 3 个控制点之一来调整绘制的 quadCurve 的大小，以便曲线适合。做到这一点的最佳方法是什么？让您知道我正在使用 imageView 进行绘图。不使用drawRect。

我知道我应该检测触摸是否在控制点上，这很容易，但我不知道在我的 touchMoved 和 touchEnded 方法之后要做什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T14:49:42.773

几件事：

*   我不会为此使用图像视图。这`drawRect:`是适合的问题。
*   不要使用`touchesMoved`. `UIPanGestureRecognizer`在控制点上使用 a 。
*   制作控制点子视图，以便您可以将手势识别器附加到它们。
*   为了正常工作，控制点通常需要有一个相当大的命中区域（大于视觉上的）。您可以通过使控制点视图大于它们绘制的内容来轻松完成此操作（因此，如果将它们绘制为 13 点圆，则将其放在 23 点视图的中间）。

有关执行所有这些操作的代码示例，请参见[CurvyTextView.m](https://github.com/rnapier/ios5ptl/blob/master/ch18/CurvyText/CurvyText/CurvyTextView.m)。它没有做最后一点（控制点视图太小而无法在真实设备上很好地使用）。忽略所有的文字绘制代码。你只关心`updateControlPoints`, `addControlPoint:color:`, `initWithFrame:`, `pan:`, 和`drawPath`。

# java - 有语法错误但没有语法的连接器/J getConnection

> ID：12372076
> 
> 赞同：1
> 
> 时间：2012-09-11T14:30:27.820
> 
> 标签：java, mysql, database, connection

我正在尝试使用 Connector/J 连接到 mysql 数据库，但无论我使用什么代码都会得到相同的消息。我可以在 debian 上使用 mysql 命令手动连接它。

错误是`You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '????????????????' at line 1`

最新的代码是：

```
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;
public class E{
  public void connect(){
    try{
      Class.forName("com.mysql.jdbc.Driver").newInstance();
      conn = DriverManager.getConnection(
           "jdbc:mysql://192.168.1.3:3306/dbname?user=dbuser&password=dbpw");
    }catch( Exception e){
      System.out.printf("Something went wrong: "+e.getMessage());
  }
} 
```

它在 getConnection 调用中失败。我使用打印语句来解决这个问题，因为 NetBeans 对此没有问题（但是当我放入一个坏主机并从 NetBeans 运行它时，它也不会抱怨）。

我遇到了与 DataSource 完全相同的问题

```
import java.sql.*;
import javax.sql.*;
...
com.mysql.jdbc.jdbc2.optional.MysqlDataSource ds
    = new com.mysql.jdbc.jdbc2.optional.MysqlDataSource();
ds.setServerName("192.168.1.3");
ds.setPortNumber(3306);
ds.setDatabaseName("dbname");
ds.setUser("dbuser");
ds.setPassword("dbpw");
conn = ds.getConnection();
... 
```

某些东西正在起作用，因为如果我输入了错误的密码，我会收到拒绝访问的消息。
我正在使用 `mysql-connector-java-5.1.22-bin.jar`5.1.21 并且遇到了同样的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:39:07.780

这些可能会帮助您：

[您的 SQL 语法有错误；检查与您的 MySQL 对应的手册](http://www.dbforums.com/mysql/1647139-you-have-error-your-sql-syntax-check-manual-corresponds-your-mysql.html)

[连接 MySQL 服务器的问题](http://forums.mysql.com/read.php?39,259743)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T14:39:42.283

你的`getConnection`陈述应该是
`conn = DriverManager.getConnection("jdbc:mysql://192.168.1.3:3306/dbname", "dbuser", "dbpw");`

参考[这个例子](http://www.roseindia.net/jdbc/jdbc-mysql/MysqlConnect.shtml)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T04:05:32.177

我发现以下内容：[JDBC 的 Stumped SQL 异常](https://stackoverflow.com/questions/4742927/stumped-sql-exception-for-jdbc)

简而言之，服务器 my.cnf 文件需要：

```
character_set_server=utf8
collation_server=utf8_general_ci 
```

它还说 GCJ（gnu java 编译器）很冒险，但我没有替换它

# installation - 如何使用 Webmin - CentOS 中的集群软件包安装程序

> ID：12372077
> 
> 赞同：1
> 
> 时间：2012-09-11T14:30:30.527
> 
> 标签：installation, package, cluster-computing, yum, webmin

我在运行 CentOS 6.2 的机器集群上使用 Webmin 1.590
我对 Webmin 的集群管理部分特别感兴趣。

我正在尝试使用**集群软件包安装程序安装软件包**
有一个名为**Package from YUM**的选项，它总是抛出以下错误：
**无法在 192.168.12.34 上安装：安装指定更新时出错**

知道为什么会发生这种情况吗？

以下是我在搜索此错误时发现的两个链接，它们都没有得到回答
[sourceforge -webmin error](http://sourceforge.net/projects/webadmin/forums/forum/600155/topic/4671253/index/page/1)
[another post about the same error](http://marc.info/?l=webmin-l&m=123793608124077)

# php - Recover an ID in a lightbox

> ID：12372084
> 
> 赞同：0
> 
> 时间：2012-09-11T14:30:48.453
> 
> 标签：php, jquery

For some context: I'm building a blog system where user can see all the articles they add. To do so I recover the ID of the articles where username=$thatUser and use a foreach loop to display. Works find except that I want user to be able to delete those articles. A little "Are you sure?" message shows up before in a lightbox and that is where the problem is. When clicking in the button to show up the lightbox, it only show the LAST ID. See the code below:

First the lightbox code (jQuery):

```
 $(document).ready(function()
    {
            $('a#deleteArticleFormJS').click(function()
            {
                   $('#background,#deleteArticle').fadeIn('fast');
            });

            $('a#hideDeleteArticle, a#cancelDeleteArticle').click(function()
            {
                   $('#background,#deleteArticle').fadeOut('fast');
            });
     }); 
```

Then PHP/html code:

```
 <?php
      //articles(); is a basic SQL query to recover the ID
      $Articles = articles();

      foreach($Articles as $Article)
      {
    ?>
      <!-- Recover the thumnail of the articles, the ID is correct. -->
      <img src="avatar/<?php echo $Article['ID']?> - Avatar.jpg">

      <!-- Link that shows the lightbox with the "Are you sure" message, the ID is correct. -->
      <a href="#<?php echo $Article['ID'];?>" id="deleteArticleFormJS">Delete</a>

      <!-- The "lightbox". -->                      
      <div id="deleteArticle">
           //*** PROBLEM: only show the LAST ID?! ***//
           Delete <?php echo $Article['ID'];?>                              
      </div>

    <!-- End of the foreach loop -->
    <?php
    }
    ?> 
```

My question is:
1 - How to get the proper ID in the lightbox?

If more details, code or anything is needed, please ask.

P.S: I'm not sure this is the right "StackExchange" site to put this. If not, I apologize.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T14:48:45.490

Try this:

```
$(document).ready(function()
{
        $('a.deleteArticleFormJS').click(function()
        {
               $('#background,#deleteArticle'+$(this).data('article-id')).fadeIn('fast');
        });

        $('a.hideDeleteArticle, a.cancelDeleteArticle').click(function()
        {
               $('#background,#deleteArticle'+$(this).data('article-id')).fadeOut('fast');
        });
 });

   <?php
      //articles(); is a basic SQL query to recover the ID
      $Articles = articles();

      foreach($Articles as $Article)
      {
    ?>
  <!-- Recover the thumnail of the articles, the ID is correct. -->
  <img src="avatar/<?php echo $Article['ID']?> - Avatar.jpg">

  <!-- Link that shows the lightbox with the "Are you sure" message, the ID is correct. -->
  <a href="#<?php echo $Article['ID'];?>" class="deleteArticleFormJS" data-article-id="<?php echo $Article['ID']; ?>" >Delete</a>

  <!-- The "lightbox". -->                      
  <div class="deleteArticle" id="deleteArticle<?php echo $Article['ID']; ?>" >
       //*** PROBLEM: only show the LAST ID?! ***//
       Delete <?php echo $Article['ID'];?>                              
  </div>

<!-- End of the foreach loop -->
<?php
}
?> 
```

# javascript - 将多个点击处理程序合并为一个

> ID：12372086
> 
> 赞同：0
> 
> 时间：2012-09-11T14:30:53.887
> 
> 标签：javascript, jquery

假设我有两个执行相同功能的单击处理程序：

```
$('#div1').click(function(event) {  
alert('here');                              
});

$('#div2').click(function(event) {  
alert('here');                              
}); 
```

如何将这两个处理程序合并为一个而不是重复调用 alert ？

就像是 ：

```
$('#div1').click.('#div2').click(function(event) {  
alert('here');                              
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T14:31:26.130

第一种方式：

```
$('#div1, #div2').click(function(event) {  
     alert('here');                              
}); 
```

第二种方式：

```
function doIt(e) {
    alert('here');
}
$('#div1').click(doIt);
$('#div2').click(doIt); 
```

请注意，您遇到此问题的事实有时意味着您应该使用一个类而不仅仅是 id，这样您就可以执行类似的操作

```
$('.alertable').click(function(event) {  
     alert('here');                              
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T14:31:17.110

试试这个：

```
$('#div1, #div2').click(function(event) {  
   alert('here');                              
}); 
```

此外，如果您有很多`div`元素，包含在一个共同的父级中，您可以利用事件委托并将单个处理程序附加到父级本身，如下所示：

```
$('.common-parent').on('click', 'div', function(event) {  
   ...                          
}); 
```

# c# - 如何进行密码加密，其中不应该有特殊字符，只有字母数字字符

> ID：12372093
> 
> 赞同：1
> 
> 时间：2012-09-11T14:31:21.153
> 
> 标签：c#, asp.net, vb.net, visual-studio-2010

我如何进行密码加密，其中不应该有特殊字符，只有字母数字字符。我正在使用 asp.net 应用程序，我在其中制作了加密的 URL，所以每当 URL 中出现特殊字符时，当我在某个地方发布时，它会破坏该 URL。就像在右对齐输入字段中一样，它总是会受到干扰，所以我需要解决它并制作加密密码，其中不应该有破坏 URL 的特殊字符。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T14:34:56.183

正常加密或散列密码，然后使用[HttpUtility.UrlEncode](http://msdn.microsoft.com/en-us/library/system.web.httputility.urlencode.aspx)或[WebUtility.UrlEncode](http://msdn.microsoft.com/en-us/library/system.net.webutility.urlencode.aspx)获取 URL 友好版本。

# actionscript-3 - 错误 #1034：类型强制失败：无法将 ... 转换为 flash.display.MovieClip

> ID：12372095
> 
> 赞同：1
> 
> 时间：2012-09-11T14:31:28.500
> 
> 标签：actionscript-3, runtime-error, addchild

我是 ActionScript 的新手，所以我可能会问一些简单的问题。

```
import flash.display.MovieClip;
var WinsRM:Array = new Array (protomanwin);
var Robotmaster:MovieClip = new MovieClip;
Robotmaster = WinsRM[0];
addChild(Robotmaster);
Robotmaster.y = 250;
Robotmaster.x = 70; 
```

没有编译器错误，但我收到此错误：

```
TypeError: Error #1034: Type Coercion failed: cannot convert protomanwin$
                        to flash.display.MovieClip. 
```

这`protomanwin`是一个有许多帧的影片剪辑。我不知道怎么了。不会显示任何符号。我还使用了一个数组，因为我希望将来有多个符号可以调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:57:49.380

似乎“protomanwin”是您库中资产的名称。在这种情况下，“protomanwin”是 Class 类型，因此您不必像现在那样进行 Robotmaster 分配，而是必须这样做：

```
Robotmaster=new WinsRM[0](); 
```

请注意，如果需要，您可以制作多个影片剪辑实例。

# php - 删除 URL 中的 .PHP 文件扩展名

> ID：12372096
> 
> 赞同：0
> 
> 时间：2012-09-11T14:31:33.480
> 
> 标签：php, .htaccess, mod-rewrite

我在强制删除 URL 中的 .php 文件扩展名时遇到了一点问题。

如果用户，我可以成功删除 .php 文件扩展名：

```
#Remove PHP if original request is /foo/bar.php
RewriteCond %{THE_REQUEST} "^[^ ]* .*?\.php[? ].*$"
RewriteRule ^(.*)\.php(\?.*)?$ $1$2 [R=301,L] 
```

我的目标是在以下情况下也删除扩展名：

```
# Remove PHP if original request is /foo.php/bar 
```

我问是因为现在用户可以转到 URL 并键入[http://www.site.com/contact.php/about](http://www.site.com/contact.php/about)，它会呈现我的关于页面。我的目标是强制删除 .php 并呈现： [http ://www.site.com/contact/about](http://www.site.com/contact/about)

我希望将上面的代码添加到其中，但我无法弄清楚。

TIA

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T14:43:17.507

以下**.htaccess**给了我请求的参数，你可以得到“页面”

```
AddDefaultCharset utf-8
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} -f
RewriteRule .* - [L]

DirectoryIndex index.php

RewriteRule ^([a-zA-Z0-9_-]{3,20})/([^/]+)/([^/]+)?$ index\.php?page=$1&s=$2&o=$3 [L]

RewriteRule ^([a-zA-Z0-9_-]{3,20})/([^/]+)?$ index\.php?page=$1&s=$2 [L]

RewriteRule ^([a-zA-Z0-9_-]{3,20})/?$ index\.php?page=$1 [L]

RewriteRule ^([a-zA-Z0-9_-]{3,20})?$ index\.php?page=$1 [L]

ErrorDocument 404 /404 
```

获取“页面”参数，然后像这样调用它

```
include('inc/'.$_REQUEST['page'].'.php'); 
```

并记住从您的链接中删除`.php`分机

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T14:58:56.857

看起来你得到了删除部分，但你错过了内部重写部分。您尝试`php`从 URL 中删除并将客户端重定向到没有它的 URL。但是您的条件与请求不匹配，请将其更改为：

```
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ .*\.php.*$
RewriteRule ^(.*)\.php(.*)?$ /$1$2 [R=301,L] 
```

然后你需要在内部重写它（不要重定向浏览器）。所以在同一个 htaccess 文件中，添加：

```
RewriteCond %{REQUEST_URI} ^/([^/]+)(.*)$
RewriteCond %{DOCUMENT_ROOT}/%1.php -f
RewriteRule ^([^/]+)(.*)$ /$1.php$2 [L] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T09:37:35.523

我对这些问题的解决方案是基本上避免使用复杂的重写规则，并通过简单的前端控制器从 php 端进行 URL 路由。

在您网站的根目录中写入以下 .htaccess 文件：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php [L] 
```

然后在同一目录下编写一个 index.php 文件。在 index.php 文件中，仍然可以获取到整个 URL 信息，并根据此选择要包含的 PHP 文件。

```
<?php
// urldecode and get rid of the query string, $_GET is still available
$url = urldecode(preg_replace('/\\?(.*)$/', '', $_SERVER['REQUEST_URI']));

if ($url == '/contact/about') {
    include 'contact.php';
} 
```

该示例非常基础，我可能忽略了您网站架构的细微之处，但从长远来看，这种方法更可行，因为您可以真正将您喜欢的任何 URL 映射到 PHP 脚本，而不必忍受 mod_rewrite 的复杂性.

这是几乎所有现有 PHP 框架（至少是 MVC 框架）都采用的模式。

这种方法的一个极简示例可以在 Slim 微框架中找到：[http ://www.slimframework.com/](http://www.slimframework.com/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T14:40:58.397

用这一条替换你的拖线：（你的规则有一个错误，这就是为什么它没有在中间检测到 .php 并且你不需要重写条件）

```
RewriteRule ^(.+)\.php(/.*)?$ /$1$2 [L,R=301] 
```

# javascript - Javascript替换？

> ID：12372097
> 
> 赞同：0
> 
> 时间：2012-09-11T14:31:35.810
> 
> 标签：javascript, replace

```
<script>
var text = "a's ..a's ...\"... ";
text = convert(text);
function convert( text )
{
    var n = text.replace(/\'/g, "&#039;");
    n = text.replace(/\"/g,"&quot;");
    return n;

}
console.log(text);
document.write(text);

</script> 
```

问题是，当它第二次替换时，它不会“记住”第一次替换的内容，因此只返回最后一次替换。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T14:33:31.307

那是因为您要替换第二个中的*原始* `text`字符串`replace`，而不是*替换*文本`n`的值：

 *```
function convert( text )
{
    var n = text.replace(/\'/g, "&#039;");
    n = n.replace(/\"/g,"&quot;");
    return n;
} 
```

`replace`不会修改您***的***原始字符串。相反，它返回一个***新***的修改后的字符串。您也可以在一个语句中同时执行两个替换：

```
return text.replace(/\'/g, "&#039;").replace(/\"/g,"&quot;"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T14:33:24.370

```
function convert( text )
{
    var n = text.replace(/\'/g, "&#039;");
    // Wrong: n = text.replace(/\"/g,"&quot;");
    // This modifies the previously edited variable.
    n = n.replace(/\"/g,"&quot;");
    return n;

} 
```*

# c++ - win32 C++ 打印字符串到打印机

> ID：12372099
> 
> 赞同：3
> 
> 时间：2012-09-11T14:31:43.480
> 
> 标签：c++, qt, winapi

在网上搜索了几天关于如何将任意字符串打印到 Windows 上的任意打印机之后，我终于想出了这段代码。

```
LPBYTE pPrinterEnum;
DWORD pcbNeeded, pcbReturned;
PRINTER_INFO_2 *piTwo = NULL;
HDC printer;
EnumPrinters(PRINTER_ENUM_LOCAL,NULL,2,NULL,0,&pcbNeeded,&pcbReturned);
pPrinterEnum = new BYTE[pcbNeeded];
if (!EnumPrinters(PRINTER_ENUM_LOCAL,NULL,2,pPrinterEnum,pcbNeeded,&pcbNeeded,&pcbReturned)) {
    qDebug() << "In Print, could not enumerate printers";
} else {
    piTwo = ((PRINTER_INFO_2*)pPrinterEnum);
    for (int i = 0; i < pcbReturned; i++) {
        QString name = QString::fromWCharArray(piTwo[i].pPrinterName);
        if (this->m_printer_path == name) {
            const WCHAR * driver = L"WINSPOOL\0";
            printer = CreateDC(NULL,piTwo[i].pPrinterName,NULL,NULL);
        }
    }
}
if (printer == 0) {
    qDebug() << "No Printer HDC";
    return;
} else {
    qDebug() << "Printer seems okay!";
}

qDebug() << "Starting Document";
DOCINFO di;
memset( &di, 0, sizeof( di ) );
di.cbSize = sizeof( di );
WCHAR * text = new WCHAR[ba.length()];
QString(ba).toWCharArray(text);
StartDoc(printer,&di);
    qDebug() << "Writing text";
    TextOut(printer,0, 0, text, ba.length());
    qDebug() << "Text Written";
EndPage(printer);
qDebug() << "Page ended";
DeleteDC(printer);
qDebug() << "DC Deleted"; 
```

一些基本的警告：

1) 我不能使用 QPrinter。我需要写原始文本，没有后记。2）在用户设置之前我不知道打印机的名称，并且在用户创建它之前我不知道要打印的字符串的大小。

附加信息：

a) 打印机工作正常，我可以从记事本、Chrome 以及几乎所有我想要的打印机打印。b）我愿意实施任何黑客攻击。将其写入文本文件并发出复制命令似乎不起作用，也就是说，我得到了一个初始化设备错误的失败。

这有效：notepad /P Documents/test_print.txt 这无效：复制 Documents\test_print.txt /D:EPSON_TM_T20 copy Documents\test_print.txt /D \MYCOMPUTER\epson_tm_t20（导致访问被拒绝，打印机被共享）打印文档\test_print.txt（无法初始化设备）

我已经尝试了几乎所有推荐的从命令行打印文本文件的方法，但都不起作用。我已经安装，重新安装了驱动程序，添加了打印机，弄乱了端口并再次完成了这一切。

显然，由于缺乏经验，我缺少一些关于 Windows 打印的简单内容。

我想要完成的是：

1）最佳方案（直接将文本写入打印机） 2）次佳方案（将文本写入文件，然后执行一些程序为我打印）记事本在打印输出的底部增加了令人讨厌的空间浪费纸张。

由于该程序是针对最终用户的，我必须找到一种自动为他们执行此操作的方法，因此我不能指望他们在从 powershell 运行命令 obscure_configuration 后单击选项卡 36 中的复选框 a。

任何帮助将不胜感激。

/杰森

**更新**

这是工作代码，在我稍微整理一下之前，它将 QByteArray 的内容打印到热敏打印机。

```
qDebug() << "Executing windows code";
BOOL     bStatus = FALSE;
DOC_INFO_1 DocInfo;
DWORD      dwJob = 0L;
DWORD      dwBytesWritten = 0L;
HANDLE     hPrinter;
wchar_t * name = new wchar_t[this->m_printer_path.length()+1];
this->m_printer_path.toWCharArray(name);
name[this->m_printer_path.length() + 1] = 0;
qDebug() << "opening printer";
bStatus = OpenPrinter(name,&hPrinter, NULL);

if (bStatus) {
    qDebug() << "Printer opened";
    DocInfo.pDocName = L"My Document";
    DocInfo.pOutputFile = NULL;
    DocInfo.pDatatype = L"RAW";
    dwJob = StartDocPrinter( hPrinter, 1, (LPBYTE)&DocInfo );
    if (dwJob > 0) {
        qDebug() << "Job is set.";
        bStatus = StartPagePrinter(hPrinter);
        if (bStatus) {
            qDebug() << "Writing text to printer";
            bStatus = WritePrinter(hPrinter,ba.data(),ba.length(),&dwBytesWritten);
            EndPagePrinter(hPrinter);
        } else {
            qDebug() << "could not start printer";
        }
        EndDocPrinter(hPrinter);
        qDebug() << "closing doc";
    } else {
        qDebug() << "Couldn't create job";
    }
    ClosePrinter(hPrinter);
    qDebug() << "closing printer";
} else {
    qDebug() << "Could not open printer";
}
if (dwBytesWritten != ba.length()) {
    qDebug() << "Wrong number of bytes";
} else {
    qDebug() << "bytes written is correct " << QString::number(ba.length()) ;
} 
```

**注意**：我确实应该向 Skizz 道歉，他写的内容实际上有助于调试基本问题。QByteArray 中的字符是专门为打印机预先格式化的，问题是，它们包含几个 NULL 字节。当试图将它们发送到打印机时，这会导致 TextOut 截断文本，只打印前几行。正如答案中所建议的，使用 WritePrinter 会忽略空字节并接受 void * 和长度，然后将其全部放在那里。

此外，他推荐使用 PrintDlg 的回复确实可以找到正确的打印机 HDC，问题是，用户首先选择打印机一次，然后不需要每次打印时都选择它，因为他们将打印很多（这是一个销售点）。

从字符串名称获取打印机 HDC 的问题是由于没有将所有重要的 NULL 字节添加到 wchar_* ，这是通过这种方式解决的：

```
wchar_t * name = new wchar_t[this->m_printer_path.length()+1];
this->m_printer_path.toWCharArray(name);
name[this->m_printer_path.length() + 1] = 0; 
```

在上面，m_printer_path 是从 Print Manager 中获取的打印机名称的字符串表示形式。

因为字符串具有打印机所需的所有格式，所以无需担心换行或任何格式。

这个问题的所有三个答案实际上对实施最终的工作解决方案非常有帮助，我对每个答案都投了赞成票，我感谢每个人花时间做出回应。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T15:00:17.823

大多数现代打印机不会对提供的数据执行任何形式的布局处理。因此，向打印机发送一系列字符充其量只是以某种默认字体打印出页面侧面的一行文本。回车也可能有效。

现代打印机通常做的是使用打印机理解的预处理数据打印页面，并定义在何处打印以及如何打印。所有这些预处理都在主机 PC 上完成，并将结果发送到打印机。这就是您通常安装打印机驱动程序的原因 - 这些驱动程序获取用户数据（无论是简单的文本文件还是 DTP 页面）并将其转换为打印机可以理解的语言。

这样做的结果是，将原始文本发送到打印机可能无法正常工作。

然后你就遇到了拥有多台具有不同属性和语言的打印机的问题。

因此，在 Windows 中，所有这些都被抽象为打印机设备上下文对象。这与图形设备上下文具有相同的界面，但您创建它的方式不同。

Win32 API 有一个通用对话框让用户选择打印机。使用[PrintDlgEx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646942.aspx)函数允许用户选择打印机。然后使用返回的 DC 将文本绘制到页面上。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T21:43:42.370

有几篇 MSDN 文章描述了如何将原始数据（打印机控制代码等）发送到打印机。

*   [如何：将数据直接发送到 GDI 打印机](http://msdn.microsoft.com/en-us/library/windows/desktop/dd162959%28v=vs.85%29.aspx)
*   [如何：将数据直接发送到 XPS 打印机](http://msdn.microsoft.com/en-us/library/windows/desktop/ff686812%28v=vs.85%29.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T16:36:50.383

你有正确的想法（尽管你应该有`StartPage`并`EndDoc`呼吁匹配）。问题是`TextOut`只绘制一行文本。它不会将长字符串分成多行等。您需要这样做（或查找代码来执行此操作）。

如果您知道文本将始终适合单个页面，您可能会用调用替换您`TextOut`的`DrawTextEx`，这可以进行基本的换行、制表符扩展等。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-09T23:57:03.970

为什么不试试 QPrint.. 它使用 Generic Text Only 驱动程序打印原始文本

```
QString prn("^XA^FO121,41^A0N,19,15^FDABC DEFGHIJKLMNOPQRSTUVWXYZ^FS^XZ");
QPrinter printer(QPrinterInfo::defaultPrinter());  //the default printer is "Generic / Text Only"

QTextDocument doc(prn);
doc.print(&printer); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-14T07:19:47.473

M在 C++ 中尝试以下代码：

```
 #include<fstream>
Class PrinterDriver{
Private:
fstream print("PRN")
Public:
Void Print(char a[]){
print >>a;}
Char GetPrinterStatus[](){
char c[];
print<<c;
return c;}}; 
```

了解它（关键）

# javascript - 这足以阻止 javascript 机器人获取 textarea 内容吗？

> ID：12372106
> 
> 赞同：-2
> 
> 时间：2012-09-11T14:32:09.597
> 
> 标签：javascript, html, textarea, bots

一些机器人通常通过使用获取 textarea 内容`document.getElementById("textAreaID").value`

我所做的是为每次页面刷新生成一个随机 ID，即：

```
<textarea id="random83721045">
</textarea> 
```

有没有办法让 javascript 机器人绕过这个随机 ID？如果是这样，有没有办法在不使用验证码的情况下阻止它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T14:50:11.200

机器人可以通过多种方式获取您的文本区域。如果他们想使用 jquery，他们可以很容易地按名称定位表单元素。

反垃圾邮件措施仅在服务器端有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T14:35:44.060

机器人通常对 textarea 内容不感兴趣。他们更喜欢将内容写入字段并尝试成功提交表单。有更好的方法来保护您的表单，例如 Captcha 或 Akismet。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T14:37:04.347

您是否试图阻止垃圾邮件发送者？算了，他们比那更聪明。他们的机器人可以在尽可能多的网站上工作，所以他们不依赖 id 来找出哪个文本区域做了什么。我怀疑许多机器人使用启发式方法，比如附近的文本字符串或元素的大小，来找出哪个文本输入做了什么。

# c# - 命令提示符 C#

> ID：12372110
> 
> 赞同：0
> 
> 时间：2012-09-11T14:32:20.577
> 
> 标签：c#, .net

> **可能重复：**
> [在 .NET 中有效地重定向标准输出](https://stackoverflow.com/questions/164736/redirect-standard-output-efficiently-in-net)
> [从 .NET 应用程序 (C#) 捕获控制台输出](https://stackoverflow.com/questions/186822/capturing-console-output-from-a-net-application-c)

我知道如何执行这样的事情：

```
SomeEXE inputfile.txt 
```

通过 C# 在命令提示符下。

我遇到的问题是 SomeEXE 打开另一个命令提示符，在其中写入给定 inputfile.txt 的输出。

通常可以获得这些输出吗？谢谢。

这是我当前的代码：

```
System.Diagnostics.Process process = new System.Diagnostics.Process();
System.Diagnostics.ProcessStartInfo startInfo = new System.Diagnostics.ProcessStartInfo();

startInfo.WindowStyle = System.Diagnostics.ProcessWindowStyle.Hidden;
startInfo.FileName = "cmd.exe";
startInfo.Arguments = "/C SomeEXE inputfile.txt";
startInfo.UseShellExecute = false;
startInfo.RedirectStandardOutput = true;

process.StartInfo = startInfo;
process.Start();

// Now use streams to capture the output
StreamReader outputReader = process.StandardOutput;

process.WaitForExit();

String line = outputReader.ReadToEnd(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:37:36.007

```
ProcessStartInfo processStartInfo = new processStartInfo("SomeEXE", "inputfile.txt");
processStartInfo.UseShellExecute = false;
processStartInfo.ErrorDialog = false;

// Here is where you grab the output:
processStartInfo.RedirectStandardOutput = true;

Process process = new Process {
  StartInfo = processStartInfo
};
process.Start();

// Now use streams to capture the output
StreamReader outputReader = process.StandardOutput;

process.WaitForExit(); 
```

现在您可以`outputStream`根据需要阅读。

*我猜这就是你的意思。另外，这里是关于[`RedirectStandardOutput`](http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.redirectstandardoutput.aspx)*

此外，如果您知道生成的文件的路径（假设`SomeEXE`写入另一个文件），您可以在执行[`File.Open`](http://msdn.microsoft.com/en-us/library/system.io.file.open.aspx)后使用它来访问其内容`SomeEXE`（请记住等到之后，否则`SomeEXE`可能仍然对文件有句柄，因此很难阅读）。

# asp.net-mvc - 主文件夹的url

> ID：12372120
> 
> 赞同：0
> 
> 时间：2012-09-11T14:32:57.053
> 
> 标签：asp.net-mvc

我有几个不同路径的安装。

费：

1.  [http://Somepath.xx/](http://Somepath.xx/)
2.  [http://Someotherpath.xy/Maincontent/](http://Someotherpath.xy/Maincontent/)

问题是，如何动态检测路径？

我找到了如何在第一种情况下执行此操作的方法：

```
Request.Url.Scheme + System.Uri.SchemeDelimiter + Request.Url.Host + (Request.Url.Port != 80 ? ":" + Request.Url.Port : "") 
```

但是对于第二个，或者对于更复杂的例子来说，如何做到这一点......我不知道。

我在控制器中需要它，就像在 View 中一样

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T14:35:19.597

您可以使用[Url.Content](http://msdn.microsoft.com/en-us/library/system.web.mvc.urlhelper.content.aspx)方法：

```
string root = Url.Content("~/"); 
```

Url 帮助器在控制器和视图中都可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T16:56:38.213

您可以查看[Server.MapPath功能并](http://msdn.microsoft.com/en-us/library/system.web.httpserverutility.mappath.aspx)[在此处查看](https://stackoverflow.com/questions/275781/server-mappath-server-mappath-server-mappath-server-mappath)其工作原理的示例和非正式解释

希望这可以帮助。

# ruby-on-rails - Rails Capistrano 部署因新宝石而失败

> ID：12372121
> 
> 赞同：1
> 
> 时间：2012-09-11T14:32:58.327
> 
> 标签：ruby-on-rails, deployment, gem, capistrano

首先让我说这是我第一次部署 Rails 应用程序，所以我对此很陌生。我的生产环境现在成功运行并使用 Capistrano 进行了部署，但由于缺少 gem，部署第一次失败。为了解决这个问题，我基本上在服务器上克隆了我的 repo，运行

```
bundle install 
```

这成功安装了 gems，并且 Capistrano 下一次成功部署。

因此，考虑到这一点，是否有一种正确的方法可以在每次部署时安装新的 gem？

我的环境是 Ubuntu Server、Apache2、Passenger、Rails。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T15:19:33.420

将此添加到 config/deploy.rb 文件的顶部将使 Capistrano 执行捆绑安装。

需要“捆绑器/capistrano”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T15:26:28.283

我们的 deploy.rb 中有以下内容

```
require 'bundler/capistrano'
load 'deploy/assets'
before 'deploy', 'rvm:install_rvm'

ssh_options[:forward_agent] = true
set :rvm_ruby_string, ENV['GEM_HOME'].gsub(/.*\//,"") # Read from local system
require 'rvm/capistrano'
set :rvm_ruby_string, '1.9.3-p194'

... 
```

对我们来说就像是一种享受，尽管通常在新版本上我们必须直接在服务器上安装一些 gem。

# javascript - Javascript setTimeout 运行两次？

> ID：12372122
> 
> 赞同：1
> 
> 时间：2012-09-11T14:32:58.767
> 
> 标签：javascript, jquery, settimeout, setinterval

```
$(document).ready(function(){
    $('#home-buzz-1').fancyTypewriter({type:true, steps:3, timeBetweenSteps:25, 'mouseOver': false, underScore:true});

    setTimeout("$('#home-buzz-2').css('display','inline');$('#home-buzz-2').fancyTypewriter({type:true, steps:3, timeBetweenSteps:25, 'mouseOver': false, underScore:true});",3000);

    setTimeout("$('#home-buzz-3').css('display','inline');$('#home-buzz-3').fancyTypewriter({type:true, steps:3, timeBetweenSteps:25, 'mouseOver': false, underScore:true});",4500);
}); 
```

我正在尝试使用 Fancy Typewriter 插件在此页面上编写动画脚本 - 该插件将文本放入元素中，并使用它制作漂亮的打字动画。但是最后两个具有 setTimeout 函数的 div 运行两次。这个想法是我希望一个 div 动画，然后在前一个完成后下一个动画。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T14:37:58.293

你不应该将字符串传递给 setTimeout 函数，试试这个：

```
$(document).ready(function(){
    $('#home-buzz-1').fancyTypewriter({type:true, steps:3, timeBetweenSteps:25, 'mouseOver': false, underScore:true});

    setTimeout(function(){
        $('#home-buzz-2').css('display','inline');
        $('#home-buzz-2').fancyTypewriter({type:true, steps:3, timeBetweenSteps:25, 'mouseOver': false, underScore:true});}
    ,3000);

    setTimeout(function(){
        $('#home-buzz-3').css('display','inline');
        $('#home-buzz-3').fancyTypewriter({type:true, steps:3, timeBetweenSteps:25, 'mouseOver': false, underScore:true});}
    ,4500);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T14:38:49.727

@zzzzBov 是对的，JS 是一种*函数*式语言：

```
setTimeout(function()
{
    $('#home-buzz-3').css('display','inline');
    $('#home-buzz-3').fancyTypewriter({type:true, steps:3, timeBetweenSteps:25, 'mouseOver': false, underScore:true});
},4500); 
```

所以 setTimout 期望传递一个函数，而不是字符串常量。它与 < 几乎相同`$(document).ready(function(){});`——您一直将函数作为参数传递。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T14:44:03.453

不需要 setTimeouts，插件在完成时有一个回调。

```
$(function(){
    function addTypeWriter(elemId) {  //You copy pasted the same thing over and over, make a helper function!
        jQuery(elemId).show().fancyTypewriter({type:true, steps:3, timeBetweenSteps:25, 'mouseOver': false, underScore:true, callback: nextOne});
    }  //chaining does the body good. Notice the callback, read the docs!
    var typewriters = ["#home-buzz-1","#home-buzz-2","#home-buzz-3"];  //elements you want to apply the effect to in sequential order
    function nextOne() {  //this is what we call
        if(typewriters.length==0) {  //if length is greater than zero, we have things to run!
            return;
        }
        var elem = typewriters.shift();  //remove first item from the array
        addTypeWriter(elem);  //fire off the annimation
    }
    nextOne(); //start it off
}); 
```

# ios - 是否有 MPMoviePlayerController 视图的开源 AVFoundation 实现？

> ID：12372124
> 
> 赞同：0
> 
> 时间：2012-09-11T14:33:09.577
> 
> 标签：ios, open-source, mpmovieplayercontroller, avfoundation

我们当前的 iOS 项目需要本地化视频资源。我们目前正在通过仅本地化每个视频的音轨来处理此问题。从那里我们使用 AVFoundation 将本地化的音轨添加到资产中。这运作良好。我们将视频和音频添加为单独的资产轨道，并且音频轨道本地化到用户区域设置。

我们的问题是我们希望视频的控件（播放按钮、洗涤器等）看起来和感觉像 MPMoviePlayerController 视频播放器。在我们从头开始编写代码之前，是否有使用 AVFoundation 的 MPMoviePlayerController 视频播放器的开源实现（顶部工具栏带有擦洗器和完成按钮，下部控件视图带有播放按钮和音量）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T14:42:39.803

您可以尝试使用`AVMutableComposition`. 你可以看看[这个](http://developer.apple.com/library/ios/#documentation/AudioVideo/Conceptual/AVFoundationPG/Articles/04_EditingAssets.html#//apple_ref/doc/uid/TP40010188-CH6-SW1)，如果你需要任何帮助，请告诉我。我很乐意提供帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T11:43:43.723

[https://bitbucket.org/brentsimmons/ngmovieplayer/](https://bitbucket.org/brentsimmons/ngmovieplayer/)

注意：上面链接的存储库已被删除；[您可以在https://github.com/Natthaphong/NGMoviePlayer](https://github.com/Natthaphong/NGMoviePlayer)尝试类似的项目（具有相同的名称）

# c - 在 fork 之后创建 pthread

> ID：12372126
> 
> 赞同：2
> 
> 时间：2012-09-11T14:33:13.880
> 
> 标签：c, sockets, pthreads, fork

我正在编写一个 C 程序，一旦它接受客户端连接就会分叉。一旦发生这种情况，我想产生两个线程，但我似乎无法让它工作。

```
 pthread_t t1, t2;
    void *r_loop();
    void *w_loop();
    .
    .
    .

sockfd = accept(r_sockfd, (struct sockaddr *) &address, &len);
if (sockfd < 0)
    printf("Error accepting\n");

if (!fork())
{
    int r_thread = pthread_create(&t1, NULL, r_loop, NULL);
    int w_thread = pthread_create(&t2, NULL, w_loop, NULL);

    pthread_join(r_thread, NULL);
    pthread_join(w_thread, NULL);
    exit(0);
} 
```

当我运行它时，函数 r_loop 和 w_loop 不会被执行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T14:44:31.673

问题可能是这样的：成功时的 pthread_create() 总是返回零。您正在向 pthread_join() 传递一个不正确的值（即零而不是 t1 和 t2），使它们立即返回。然后下面的 exit() 也会杀死新的启动线程

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T14:45:55.120

你应该通过`t1`and`t2`而不是`r_thread`and `w_thread`to `pthread_join()`。

# log4j - JAX-WS - 内存不足？

> ID：12372127
> 
> 赞同：0
> 
> 时间：2012-09-11T14:33:14.760
> 
> 标签：log4j, jax-ws

我从客户端调用一个简单的端点方法。

```
MyStatus getStatus(Car car) throws NoSuchCarException; 
```

我得到的是：

```
java.lang.OutOfMemoryError: PermGen space
at com.sun.xml.internal.ws.client.Stub.process(Stub.java:317)
at com.sun.xml.internal.ws.client.sei.SEIStub.doProcess(SEIStub.java:146)
at com.sun.xml.internal.ws.client.sei.SyncMethodHandler.invoke(SyncMethodHandler.java:98)
at com.sun.xml.internal.ws.client.sei.SyncMethodHandler.invoke(SyncMethodHandler.java:78)
at com.sun.xml.internal.ws.client.sei.SEIStub.invoke(SEIStub.java:129)
at $Proxy124.getStatus(Unknown Source)
at de.Babs.showState(Babs.java:622) 
```

问题是什么？如何从 JAX 通信中激活 xml 日志记录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T21:52:14.850

问题可能在于您的容器或应用程序服务器中部署了两个许多应用程序。`java.lang.OutOfMemoryError: PermGen space`更多是由于系统的限制（内存）而不是由于编程错误。例如，这可能意味着没有足够的内存来加载某些资源。确保在每次部署或重新部署后重新启动服务器。

要启用日志记录，只需将需要的`log4j`或`slf4j`您正在使用的任何框架放入 server 的全局库中，然后创建一个`log4j.properties`像这样的文件（如果您正在使用`log4j`）：

```
log4j.rootLogger=INFO,stdout
log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=%d [%t] %-5p %X{file} %c{1} - %m%n

####################### YourService ######################
log4j.logger.com.yourservice.servicename=DEBUG,servicename
log4j.additivity.com.yourservice.servicename=false
log4j.logger.servicename=DEBUG,servicename
log4j.additivity.servicename=false
log4j.appender.servicename=org.apache.log4j.DailyRollingFileAppender
log4j.appender.servicename.File=C:\\Servers\\glassfish-3.1.2\\gf-app-logs\\servicename.log
log4j.appender.servicename.DatePattern='.'yyyy-MM-dd
log4j.appender.servicename.layout=org.apache.log4j.PatternLayout
log4j.appender.servicename.layout.ConversionPattern=%d [%t] %-5p %X{file} %c{1} %m%n
log4j.appender.servicename.ImmediateFlush=true
######################################################## 
```

我使用的是 glassfish 3，所有的日志记录都出现在这个文件中：`C:\\Servers\\glassfish-3.1.2\\gf-app-logs\\servicename.log`. 例如，在 glassfish 3 中`log4j.properties`，需要将此文件添加到：`&{base.dir}\glassfish-3.1.2\glassfish3\glassfish\domains\domain1\config`

# java - Java 异常堆栈跟踪不打印

> ID：12372128
> 
> 赞同：7
> 
> 时间：2012-09-11T14:33:15.987
> 
> 标签：java, exception, logging, exception-handling, log4j

我有以下代码：

```
import org.apache.commons.lang.exception.ExceptionUtils;
public void myMethod() {
    try {
        // do something
    } catch (Exception e) {
        System.out.println(ExceptionUtils.getStackTrace(e)); // prints "java.lang.NullPointerException"
        System.out.println(ExceptionUtils.getFullStackTrace(e)); // prints "java.lang.NullPointerException"
        e.printStackTrace(); // prints "java.lang.NullPointerException"
    }
} 
```

我希望看到的输出是完整的堆栈跟踪，其中包含行号和失败的类的层次结构。例如，

```
Exception in thread "main" java.lang.NullPointerException
        at org.Test.myMethod(Test.java:674)
        at org.TestRunner.anotherMethod(TestRunner.java:505)
        at java.util.ArrayList(ArrayList.java:405) 
```

该代码正在一个更大的应用程序中运行，该应用程序也具有 log4j，但我希望能够将异常转换为字符串，以便我可以将其作为电子邮件发送给 Java 开发人员。

有人对如何将完整的堆栈跟踪捕获到字符串有任何想法吗？我不能使用 Thread.currentThread().getStackTrace() 因为这个应用程序在 Java 4 上运行。什么可能阻止上述代码打印完整的堆栈跟踪？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-08T13:50:45.240

这是因为 java 在服务器模式 (java -server) 下运行时会进行一些代码优化以跳过此操作。在 java args 中使用`-XX:-OmitStackTraceInFastThrow`请参阅下面的链接了解详细信息：

[http://jawspeak.com/2010/05/26/hotspot-caused-exceptions-to-lose-their-stack-traces-in-production-and-the-fix/](http://jawspeak.com/2010/05/26/hotspot-caused-exceptions-to-lose-their-stack-traces-in-production-and-the-fix/)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-11T14:55:20.860

如果您反复抛出异常，JVM 将停止填充堆栈跟踪。我不确定为什么，但可能是为了减少 JVM 的负载。您需要查看较早的堆栈跟踪以查看详细信息。

```
for (int n = 0; ; n++) {
    try {
        Integer i = null;
        i.hashCode();
    } catch (Exception e) {
        if (e.getStackTrace().length == 0) {
            System.out.println("No more stack trace after " + n + " thrown.");
            break;
        }
    } 
```

印刷

```
No more stack trace after 20707 thrown. 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-08-07T05:14:50.490

> 有人对如何将完整的堆栈跟踪捕获到字符串有任何想法吗？

您可以使用以下方式（StringWriter.toString()）将堆栈跟踪转换为字符串。

```
 StringWriter writer = new StringWriter();
 e.printStackTrace( new PrintWriter(writer,true ));
 System. out.println("exeption stack is :\n"+writer.toString()); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-11T14:55:58.650

异常可能会在您的 catch 块之前被捕获并抛出。也许在您要求执行逻辑的另一个类中。

`Exception`创建的like
`new Exception(new Throwable("java.lang.NullPointerException"));`
将打印出您所看到的内容。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-11T14:46:11.050

可能是您没有控制台输出的附加程序。你考虑加一个。如果没有，将其记录为 LOGGER.error(ex); 使用 log4j 或 SLF4J

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-11T15:06:03.180

我只能想到两个`e.printStackTrace()`可能只输出字符串的原因`"java.lang.NullPointerException"`。

*   某些东西可能调用`setStackTrace(new StackTraceElement[0])`了异常。
*   异常对象可能是一个棘手的类的实例，它覆盖了`printStackTrace()`或其他一些方法以返回误导性信息。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-10-15T22:12:31.233

> 什么可能阻止上述代码打印完整的堆栈跟踪？

`Exception`就我而言，我正在捕获的超类具有以下代码：

```
/* avoid the expensive and useless stack trace for API exceptions */
@Override
public Throwable fillInStackTrace() {
    return this;
} 
```

这意味着堆栈跟踪数组从未被填充，所以我得到的只是：

```
org.apache.kafka.AuthException: Auth failed: Invalid username or password 
```

没有堆栈信息，所以不知道它发生*在哪里。*迷人的。

我可以通过获取 的源代码`Exception`，将其复制到我的项目中并删除该`fillInStackTrace()`方法来覆盖此行为。这是一个黑客，但我需要从中获取信息`Exception`。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-02-24T22:14:24.350

确保您使用了 e.printStackTrace()，而不是 e.getStackTrace()；

# android - 如何在Android中使用Bitmap作为背景从LinearLayout中删除黑条？

> ID：12372134
> 
> 赞同：2
> 
> 时间：2012-09-11T14:33:29.200
> 
> 标签：android, xml, image, android-linearlayout

![当前布局] [http://i50.tinypic.com/qqznzs.png](http://i50.tinypic.com/qqznzs.png)

我试图让布局顶部和底部的 blakc 条变为白色而不是黑色。我已经尝试过更改背景颜色。

可绘制代码：

```
<?xml version="1.0" encoding="utf-8"?>
<bitmap xmlns:android="http://schemas.android.com/apk/res/android"
    android:gravity="clip_horizontal|clip_vertical|center"
    android:src="@drawable/theblindgoat_logo"
    android:tileMode="disabled" >
</bitmap> 
```

主要代码：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/startup"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#FFFFFF"
    android:orientation="vertical" > 
```

顺便说一句，我需要图像不要垂直拉伸，所以改变它也不是一个需要的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T15:15:16.613

这些黑条只是主题背景的颜色。要摆脱它们，您可以将位图可绘制对象更改为具有白色背景颜色的图层列表，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >

    <item>
        <color android:color="@android:color/white"/>
    </item>

    <item>
        <bitmap android:gravity="clip_horizontal|clip_vertical|center"
            android:src="@drawable/theblindgoat_logo"
            android:tileMode="disabled" />
    </item>

</layer-list> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T14:40:05.920

您可以通过两种方式摆脱黑色：

*   将背景设置`LinearLayout`为白色，然后在 `ImageView`内部添加所需的图像源

或者

*   **在AndroidManifest.xml**中设置`android:theme="@android:style/Theme.Light.NoTitleBar"`为您的活动， 其余部分保持原样

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T14:48:02.230

尝试将 LinearLayout 的背景设置为位图，如下所示：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/startup"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/theblindgoat_logo"
    android:orientation="vertical" > 
```

那应该拉伸您的图像以填充背景。**

# javascript - 拉斐尔图标悬停

> ID：12372135
> 
> 赞同：0
> 
> 时间：2012-09-11T14:33:35.567
> 
> 标签：javascript, jquery-ui, raphael

我有以下基本代码，这里是 jsfiddle：http: [//jsfiddle.net/fLZKc/](http://jsfiddle.net/fLZKc/)

```
<div id="menu">
    <ul>
        <li>
            <a href="#" class="chat"><span>Chat</span></a>
        </li>
        <li>
            <a href="#" class="heart"><span>Heart</span></a>
        </li>
        <li>
            <a href="#" class="documentation"><span>Documentation</span></a>
        </li>
    </ul>
</div> 
```

而这个javascript：

```
var bubble = "M16,5.333c-7.732,0-14,4.701-14,10.5c0,1.982,0.741,3.833,2.016,5.414L2,25.667l5.613-1.441c2.339,1.317,5.237,2.107,8.387,2.107c7.732,0,14-4.701,14-10.5C30,10.034,23.732,5.333,16,5.333z", 
    heart = "M24.132,7.971c-2.203-2.205-5.916-2.098-8.25,0.235L15.5,8.588l-0.382-0.382c-2.334-2.333-6.047-2.44-8.25-0.235c-2.204,2.203-2.098,5.916,0.235,8.249l8.396,8.396l8.396-8.396C26.229,13.887,26.336,10.174,24.132,7.971z", 
    documentation = "M26.679,7.858c-0.176-0.138-0.404-0.17-0.606-0.083l-9.66,4.183c-0.42,0.183-0.946,0.271-1.486,0.271c-0.753,0.002-1.532-0.173-2.075-0.412c-0.194-0.083-0.356-0.176-0.471-0.259c0.042-0.021,0.09-0.042,0.146-0.064l8.786-3.804l1.31,0.561V6.612c0-0.244-0.106-0.475-0.283-0.612c-0.176-0.138-0.406-0.17-0.605-0.083l-9.66,4.183c-0.298,0.121-0.554,0.268-0.771,0.483c-0.213,0.208-0.397,0.552-0.394,0.934c0,0.01,0.003,0.027,0.003,0.027v14.73c0,0.006-0.002,0.012-0.002,0.019c0,0.005,0.002,0.007,0.002,0.012v0.015h0.002c0.021,0.515,0.28,0.843,0.528,1.075c0.781,0.688,2.091,1.073,3.484,1.093c0.66,0,1.33-0.1,1.951-0.366l9.662-4.184c0.255-0.109,0.422-0.383,0.422-0.692V8.471C26.961,8.227,26.855,7.996,26.679,7.858zM20.553,5.058c-0.017-0.221-0.108-0.429-0.271-0.556c-0.176-0.138-0.404-0.17-0.606-0.083l-9.66,4.183C9.596,8.784,9.069,8.873,8.53,8.873C7.777,8.874,6.998,8.699,6.455,8.46C6.262,8.378,6.099,8.285,5.984,8.202C6.026,8.181,6.075,8.16,6.13,8.138l8.787-3.804l1.309,0.561V3.256c0-0.244-0.106-0.475-0.283-0.612c-0.176-0.138-0.407-0.17-0.606-0.083l-9.66,4.183C5.379,6.864,5.124,7.011,4.907,7.227C4.693,7.435,4.51,7.779,4.513,8.161c0,0.011,0.003,0.027,0.003,0.027v14.73c0,0.006-0.001,0.013-0.001,0.019c0,0.005,0.001,0.007,0.001,0.012v0.016h0.002c0.021,0.515,0.28,0.843,0.528,1.075c0.781,0.688,2.091,1.072,3.485,1.092c0.376,0,0.754-0.045,1.126-0.122V11.544c-0.01-0.7,0.27-1.372,0.762-1.856c0.319-0.315,0.708-0.564,1.19-0.756L20.553,5.058z";

$('.chat').each(function(i) {
    chat = Raphael($(this)[0], 40, 40)
    chat.path(bubble).attr({
        "fill" : "#333"
    })
})

$('.heart').each(function(i) {
    paper = Raphael($(this)[0], 40, 40)
    paper.path(heart).attr({
        "fill" : "#333"
    })
})
$('.documentation').each(function(i) {
    paper = Raphael($(this)[0], 40, 40)
    paper.path(documentation).attr({
        "fill" : "#333"
    })
}) 
```

我试图在每个图标上附加一个悬停动作，这样如果用户将鼠标悬停在菜单项上，图标就会改变颜色。

如果我添加鼠标悬停，例如：

```
$('.chat').each(function(i) {
    chat = Raphael($(this)[0], 40, 40);
    chat.path(bubble).attr({
        "fill" : "#333"
    })
    chat.mouseover(function() {
        $(this).attr({
            "fill" : "#fff"
        });
    });
}) 
```

我收到一个错误，“未捕获的类型错误：对象 # 没有方法 'mouseover'”

这样做的正确方法是什么？代码也可以简化吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T08:41:21.110

这里有几个问题：

1.  `mouseover`正在添加到拉斐尔论文（画布）中。它应该被添加到形状中。
2.  该代码混合了 Raphael 形状引用和 jQuery 元素引用。`$(this)`在某些情况下应该替换为`this`来指代事件的所有者（拉斐尔形状）。
3.  假设您要在鼠标移出时采取相反的行为，`hover`则应使用 Raphael 将两个处理程序与形状联系起来。

让我们通过一个代码片段示例来回顾一下：

```
$('.chat').each(function(i) {
    chat = Raphael($(this)[0], 40, 40);
    var shape = chat.path(bubble).attr({
        "fill": "#333"
    });
    shape.hover(function() {
        this.attr({
            "fill": "#fff"
        });
    }, function() {
        this.attr({
            "fill": "#333"
        });
    });
}) 
```

您可以参考[更新后的 jsFiddle](http://jsfiddle.net/eliranmal/fLZKc/1/)来进一步操作它。

# java - 如何使用jxl逐页读取excel文件

> ID：12372136
> 
> 赞同：4
> 
> 时间：2012-09-11T14:33:35.043
> 
> 标签：java, map, jxl

我正在开发一种实用程序来将 excel 文件从一种格式转换为另一种格式。有人建议我使用 jxl 库来满足以下要求。
逐页阅读文件并执行以下操作

获取工作表名称，使其成为地图的键，然后获取其列标题并使它们成为值。

这将导致以下

```
 Map<String, List<String>> result = result<key=sheetName, value=list of column headers> 
```

对给定文件中的所有工作表执行此操作

我以下列方式做到了这一点

public Map> function(String filePath) 抛出 IOException, BiffException{

```
 Map<String, List<String>> map = new HashMap<String, List<String>>(); 
    Workbook workBook=Workbook.getWorkbook(new File (filePath));
      String [] sheetNames = workBook.getSheetNames();
      Sheet sheet=null;
      List<String > fields = new ArrayList<String>();
      for (int sheetNumber =0; sheetNumber < sheetNames.length; sheetNumber++){
         sheet=workBook.getSheet(sheetNames[sheetNumber]);
         for (int columns=0;columns < sheet.getColumns();columns++){
             fields.add(sheet.getCell(columns, 0).getContents());

         }
         map.put(sheetNames[sheetNumber],fields);

      }
      return map;
} 
```

我这样做是希望获得所需的结果，但它的作用是将所有工作表的列标题存储为每个键的值。即，如果文件中有两张名为

1.  表 1
2.  表2

以下是他们的列标题

Sheet1 -> id，名称
sheet2 -> 类别，价格

然后地图会像

```
result<sheet1,<id, name, caegory, price>>
result<sheet2,<id, name, caegory, price>> 
```

无法弄清楚我做错了什么？请帮忙，因为我的项目有很多后端计算，我不想在这件事上花很多时间。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T11:25:03.357

我在这里发布后解决了这个问题，但忘记在这里给出解决方案。
上面代码中的问题是列表声明的位置。
它应该在内部声明`for`，以便在每次循环迭代后刷新（清空）并一次仅存储一张表的数据。
正确的代码如下。

```
 Map<String, List<String>> map = new HashMap<String, List<String>>(); 
      Workbook workBook=Workbook.getWorkbook(new File (filePath));
      String [] sheetNames = workBook.getSheetNames();
      Sheet sheet=null;
      for (int sheetNumber =0; sheetNumber < sheetNames.length; sheetNumber++){
         List<String > fields = new ArrayList<String>();
         sheet=workBook.getSheet(sheetNames[sheetNumber]);
         for (int columns=0;columns < sheet.getColumns();columns++){
             fields.add(sheet.getCell(columns, 0).getContents());                 
         }
         map.put(sheetNames[sheetNumber],fields); 
      }
      return map;
} 
```

希望它会帮助某人

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-12-08T05:19:59.543

```
public String ExcelValueGetFn(String FilePath, int column, int row) throws BiffException, IOException  {
    Workbook workbook = null;
    final String EXCEL_FILE_LOCATION = FilePath;
    workbook = Workbook.getWorkbook(new File(EXCEL_FILE_LOCATION));

    Sheet sheet = workbook.getSheet(0);
    Cell cell1 = sheet.getCell(column, row);
    System.out.print(cell1.getContents() + ":");

    String textToSendFromExcel = cell1.getContents();
    return textToSendFromExcel;
} 
```

# jquery - 如何在 hmtl5 页面上显示数据？

> ID：12372138
> 
> 赞同：0
> 
> 时间：2012-09-11T14:33:58.817
> 
> 标签：jquery, html

我的html5代码是

```
 <div id="tablpolicy" align="middle">
                    <div class="policydiv">
                        <div class="left">
                            <span>Policy No.</span>
                        </div>
                        <div class="right">
                            <label for="policyno" data-inline="true" id="policylbl"></label> 
                        </div>
                    </div>
                    <div class="policydiv">
                        <div class="left">
                            <span>Quote No.</span> 
                        </div>
                        <div class="right">
                            <label for="quoteno" data-inline="true" id="quotelbl"></label>
                        </div>
                    </div>
                    <div class="policydiv">
                        <div class="left">
                            <span>Product Name</span>
                        </div>
                        <div class="right">
                            <label for="productname" id="productlbl"></label>
                        </div>
                    </div>
</div> 
```

我的jQuery代码是

```
 $.ajax({
        type:"GET",
        url:"webservices.xml",
        contentType:"text/plain; charset=UTF-8",
        success: function(data){
  var renewpolicy=  $(data).find("renewpolicy");
            var quotenumber=$(renewpolicy).find("QuoteNumber").text();
            var policyno=$(renewpolicy).find("PolicyNumber").text();
            var custid=$(renewpolicy).find("custid").text();
            var productname=$(renewpolicy).find("ProductName").text();
}
}) 
```

我解析了 xml 文件并获取了 quotenumber、policyno、custid、productname 值。现在我想在表中的上述相应标签上显示这些标签值。如何将这些 xml 标签值设置为 abobe 标签以及我应该执行哪个事件使用？我们可以为此使用任何查询字符串吗？请帮我。提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:37:21.447

在`success`回调函数末尾添加`$(`your_selector `).html(`your_text `)`。

在您的情况下，您应该使用：

```
$('#policylbl').html( policyno );
$('#quotelbl').html( quotenumber );
$('#productlbl').html( productname ); 
```

您应该决定如何处理该`custid`变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T14:38:18.340

在成功回调中放置以下内容。

```
$("#quotelbl").html(quotenumber);
$("#policylbl").html(policyno);
$("#productlbl").html(productname); 
```

不过，我看不到您的 customerId 标签在哪里。

`$("#quotelbl")`是 jQuery 选择器。在这里，您将标签名称与哈希放在前面。

`.html()`这是一个 jQuery 函数，它要么返回属性的 html，要么将值传递给它，设置 html。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T14:40:32.907

你想听听[jQuery 选择器](http://api.jquery.com/category/selectors/)，然后：

```
$.ajax({
    type:"GET",
    url:"webservices.xml",
    success: function(data){

        var renewpolicy =  $(data).find("renewpolicy");
        $('#policylbl').text( renewpolicy );

    }
}); 
```

无论如何，我不建议你这样做——最好在成功回调中生成**所有**标记 [通过模板]，而不是在空元素中注入值。

顺便说一句，您将请求格式声明为 in `contentType:"text/plain; charset=UTF-8"`，但您没有提供任何请求正文 [即参数]，因此请克服它。

# javascript - xui 滑动手势在真实设备上不起作用

> ID：12372145
> 
> 赞同：0
> 
> 时间：2012-09-11T14:34:17.127
> 
> 标签：javascript, cordova, xui

我`xui-swipe.js`用于检测 Phonegap 应用程序上的左右滑动手势。

它在 android 模拟器和 iPhone 模拟器上运行良好。但是当我将此应用程序安装到真实设备（Samsung Glaxy S3）时，滑动手势仅检测一次事件，之后什么也检测不到；无论是左还是右。

这是用于检测手势的代码块（请注意，两者`xui.js`都`xui-swipe.js`包括在内）：

```
<script type="application/javascript">
    function init ()
    {
        x$("#wrapper").swipe(function(e, data){
            var offset = parseInt(sessionStorage.getItem('offset'));
            switch(data.direction) {
                case 'right':
                    if (offset>0) {
                        sessionStorage.setItem('offset', offset-1);
                        document.location = "file.html";
                    }
                    //alert('right');
                    break;

                case 'left':
                    if (offset<10) {
                        sessionStorage.setItem('offset', offset+1);
                        document.location = "file.html";
                    }else {
                        document.location = "file-end.html";
                    }
                    //alert('left');
                    break;
            }
        }, {
            swipeCapture: true,
            longTapCapture: true,
            doubleTapCapture: true,
            simpleTapCapture: false
        });
    }

    var _timer=setInterval(function(){
        if(/loaded|complete/.test(document.readyState)){
            clearInterval(_timer)
            init() // call target function
        }
    }, 10);
</script> 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T19:28:34.007

我认为你的案例陈述是错误的：

```
switch (data.type){
    case ('direction'):
      if (data.direction == 'left') {
        i--;
      } else {
        i++;
     } 
```

您首先需要检查案例“方向”，然后检查它是左还是右。

# wcf-data-services - wcf 数据服务 5.1.0 rc

> ID：12372146
> 
> 赞同：0
> 
> 时间：2012-09-11T14:34:17.920
> 
> 标签：wcf-data-services

我在 Chrome v19 上收到此错误。

我正在向 WCF 数据服务 5.1 rc 发出批处理请求

```
<?xml version="1.0" encoding="iso-8859-1" standalone="yes"?>
<error xmlns="schemas.microsoft.com/.../metadata">
 <code></code>
 <message xml:lang="en-US">An error occurred while processing this request.</message>
 <innererror>
   <message>A supported MIME type could not be found that matches the content type of the response. None of the supported type(s) 'multipart/mixed' matches the content type 'application/xml'.</message>
   <type>Microsoft.Data.OData.ODataContentTypeException</type>
   <stacktrace>
     at Microsoft.Data.OData.MediaTypeUtils.GetFormatFromContentType(String contentTypeName, ODataPayloadKind[] supportedPayloadKinds, MediaTypeResolver mediaTypeResolver, MediaType& mediaType, Encoding& encoding, ODataPayloadKind& selectedPayloadKind)&#xD;
     at Microsoft.Data.OData.MediaTypeUtils.GetFormatFromContentType(String contentTypeHeader, ODataPayloadKind[] supportedPayloadKinds, MediaTypeResolver mediaTypeResolver, MediaType& mediaType, Encoding& encoding, ODataPayloadKind& selectedPayloadKind, String& batchBoundary)&#xD;
     at Microsoft.Data.OData.ODataMessageReader.ProcessContentType(ODataPayloadKind[] payloadKinds)&#xD;
     at Microsoft.Data.OData.ODataMessageReader.ReadFromInput[T](Func`2 readFunc, ODataPayloadKind[] payloadKinds)&#xD;
     at Microsoft.Data.OData.ODataMessageReader.CreateODataBatchReader()&#xD;
     at System.Data.Services.DataService`1.HandleBatchRequest()
   </stacktrace>
 </innererror>
</error> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T15:45:49.573

批处理请求的内容类型需要为“multipart/mixed”，并遵循以下格式：

[OData.org 批量请求规范](http://www.odata.org/documentation/batch)

批处理请求中的单个请求可以具有 json 格式，但批处理请求本身是上面链接中描述的特殊格式。

# parsing - 使用 Trifecta 的布局解析器

> ID：12372150
> 
> 赞同：6
> 
> 时间：2012-09-11T14:34:20.980
> 
> 标签：parsing, haskell, parser-combinators, trifecta

我正在尝试使用 Trifecta 来解析具有类似 Haskell 布局语法的非常简单的函数式语言。我正在研究 Haddock 文档和我在 Parsec 方面的经验，因为我找不到关于 Trifecta 本身的任何介绍性材料。

我遇到的问题是使用布局的东西，因为即使是 Haddock 文档也没有多大帮助。

给定以下代码：

```
import Text.Trifecta
import Text.Trifecta.Parser.Token.Style
import Text.Trifecta.Parser.Identifier.Style
import Text.Trifecta.Layout.Combinators
import Text.Trifecta.Language.Prim

import Control.Applicative
import Control.Monad.Trans
import Data.Maybe (fromMaybe)

import Data.HashSet as HashSet
import Data.ByteString.UTF8 as UTF8

-- Copypasta from Text.Trifecta.Parser.Identifier.Style
set :: [String] -> HashSet ByteString
set = HashSet.fromList . fmap UTF8.fromString

lang :: MonadParser m => LanguageDef m
lang = LanguageDef{ languageCommentStyle = haskellCommentStyle
                  , languageIdentifierStyle = emptyIdents{ styleReserved = set keywords }
                  , languageOperatorStyle = emptyOps{ styleReserved = set ops }
                  }
  where
    keywords = ["where"]
    ops = ["="]

data Def = Def ByteString [ByteString] [ByteString] [Def]
         deriving Show

instance MonadLanguage m => MonadLanguage (Layout m) where
    askLanguage = fmap liftLanguageDef $ lift askLanguage

def :: (MonadParser m) => Layout (Language m) Def
def = Def <$> identifier <*> vars <* reservedOp "=" <*> vars <*> laidout locals
  where
    vars = many identifier
    locals = fromMaybe [] <$> optional (reserved "where" *> defs)

defs :: (MonadParser m) => Layout (Language m) [Def]
defs = laidout (many def)

test :: String -> IO ()
test =  parseTest $ run $ defs <* eof
  where
    run p = runLanguage (fst <$> runLayout p defaultLayoutState) lang 
```

我正在尝试解析以下文本`test`：

```
f x = x y a b c -- 1
  where         -- 2
    y = d       -- 3
g x = z         -- 4 
```

但它因解析错误而失败：

```
(interactive):4:2: error: expected: "=",
    identifier, letter or digit
g x = z         -- 4 
 ^ 
```

但如果我注释掉第 2 行和第 3 行，它会起作用。

那么，即使包含第 2 行和第 3 行，我如何让它解析呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T21:56:56.517

`Layout`对 Trifecta 的支持存在一些错误。我需要从 Scala 实现中移植一些修复。

值得注意的是，有几件事需要禁用行首检查而不需要，因此它尝试在出现错误的地方进行自动分号插入。

我从我的另一个代码库中移植了它，该代码库做出了稍微不同的假设，并提供了与 trifecta 略有不同的不变量。

这实际上是它目前不在 github 上的 master 分支中的很大一部分原因。

修复它以使用`parsers`基于新的 API，并移植这些更改是我在发布 0.90 之前需要做的最后一件主要事情。

与此同时，我不会依赖它。我很抱歉。

我会在此回复稳定后立即更新。

# c - 通过调试 strlen 的 Eclipse 错误

> ID：12372151
> 
> 赞同：-2
> 
> 时间：2012-09-11T14:34:22.843
> 
> 标签：c

该程序在`i=(strlen(data));`出现消息时崩溃

> “strlen()”没有可用的来源

但为什么？

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

int main (void) { 
    char data[]="Hallo";
    char buffer[100];
    if (strlen(data)!=0)
    {
        size_t i=0;
        i=(strlen(data));
        snprintf(buffer,i,"Data: %s \n",data);
        return strlen(data)+1;
    }
    return -1;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T14:59:16.053

您引用的错误消息听起来不像是崩溃。更像是一个试图进入系统库函数的调试器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T14:46:28.710

我怀疑问题的原因是

```
snprintf(buffer,i,"Data: %s \n",data); 
```

这里`i`是“缓冲区大小”。`i`也是 的长度`data`。因此，您正在将一个字符串写入比缓冲区大小更长的缓冲区。效果是[`snprintf()`](http://en.cppreference.com/w/cpp/io/c/fprintf)截断输出，因此不会写入整个`data`字符串。

实际上，`Data:`是六个字符长，比`i`（5）长。所以也许正在发生的事情是 snprintf 从不使用`%s`修改后的内容，这会以某种方式破坏堆栈？

尝试替换`i`，`sizeof(buffer)`看看是否效果更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T15:17:30.533

我刚刚在 Eclipse 中运行了这个程序，它运行良好。听起来您正在逐行浏览代码，当您`strlen`接听电话时，您会执行“Step-Into”（F5）而不是“Step Over”（F6）。所以 Eclipse 正在尝试调试`strlen`。

无论哪种方式，这是一个 Eclipse 问题，我建议您`Eclipse`在问题中添加一个标签。

# .net - 如何在标题大师中找到占位符？

> ID：12372152
> 
> 赞同：0
> 
> 时间：2012-09-11T14:34:28.357
> 
> 标签：.net, vsto, powerpoint

我编写了一个 PowerPoint 2010 插件，允许用户创建形状对。这些对是同步的（例如位置、颜色、文本...）。这些对存储为以下类的对象：

```
class Pair
{
     Shape LeftShape { get; set; }
     Shape RightShape { get; set; }
} 
```

如果修改了一个形状，其中有一对包含该形状，则另一个形状将被更新。

可以在主布局上定义对。同步在主服务器上工作。如果该对由两个占位符组成，并且我基于母版创建幻灯片，那么新形状当然不会同步。有没有办法找到形状的主人等价物，反之亦然？那么算法将是：

```
 s1's modification is recognized
 if s1 is a placeholder
     find s1's equivalent in master -> m1
     look up the partner of m1 -> m2
     find the shape in the current slide that is based on m2 -> s2
     update s2 
```

我查看了新形状的`Name`和`Id`属性。但它们与主形状的属性不同。

顺便说一句，有没有一种很好的方法来确定形状是否是占位符？如果形状没有占位符，我目前的方法是查询`PlaceholderFormat`哪个抛出异常。但这绝对不是一个好办法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:54:14.483

> > 可以在主布局上定义对。

我很好奇：怎么做？

Shape 的 .Type 属性将指示它是占位符还是其他一些形状类型。

如果形状是 msoPlaceholder ( 14 )，它是一个占位符。在这种情况下，它的 .PlaceholderFormat.Type 属性会告诉你它是哪种类型的占位符，如果它是一种可以容纳多种类型的内容，它的 .PlaceholderFormat.ContainedType 会告诉你它是否包含图表、对象、图片， ETC。

您可能会考虑使用标签来指示对。要“标记”形状范围的成员，使用当前选定的形状作为示例范围：

```
Dim oSh As Shape
For Each oSh In ActiveWindow.Selection.ShapeRange
    oSh.Tags.Add "MagicPair", "TagValue"
Next 
```

要返回其中一对的另一半，请编写一个简单的函数，查看当前幻灯片上的每个形状并检查其 MagicPair 标记值是否与第一个形状的值匹配。

# xml - 使用 Ant 解析 XML 中的文件集标签并加入路径

> ID：12372160
> 
> 赞同：0
> 
> 时间：2012-09-11T14:34:57.453
> 
> 标签：xml, ant, xml-parsing, xmltask

我有一个这样的 xml 文件（myxml.xml）

```
<fileset dir ="C:\dir1">
    <include name="abc.txt">
    <include name ="def.txt">
</fileset>
<fileset dir ="C:\dir2">
    <include name="abc2.txt">
    <include name ="def2.txt">
</fileset> 
```

我想使用我的 Ant build.xml 解析这个文件，并希望创建两个 txt 文件，比如 text1.txt 和 text2.txt，内容如下

**text1.txt**

```
C:\dir1\abc.txt
C:\dir1\def.txt 
```

和**text2.txt**应该有

```
C:\dir2\abc2.txt
C:\dir2\def2.txt 
```

知道我怎么能做到这一点:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T16:25:18.123

如果您可以选择`<fileset>`在 build.xml 文件中包含标签，您可以创建包含文件集内容的文本文件，如下所示。

```
<target name="create-text1">
  <fileset dir="C:\dir1" id="dir1.files">
    <include name="abc.txt" />
    <include name ="def.txt" />
  </fileset>
  <pathconvert pathsep="${line.separator}"
      property="text1" refid="dir1.files"/>
  <echo file="text1.txt" message="${text1}" />
</target>

<target name="create-text2">
  <fileset dir="C:\dir2" id="dir2.files">
    <include name="abc2.txt" />
    <include name ="def2.txt" />
  </fileset>
  <pathconvert pathsep="${line.separator}"
      property="text2" refid="dir2.files"/>
  <echo file="text2.txt" message="${text2}" />
</target> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T19:25:58.777

尝试这个：

构建文件：

```
<project default="createfile2">
<target name="createfile1">
    <xslt in="myxml.xml" out="text1.txt" style="test1.xslt">
        <param name="d" expression="C:\dir1"/>
    </xslt>
</target>

    <target name="createfile2" depends="createfile1">
    <xslt in="myxml.xml" out="text2.txt" style="test1.xslt">
        <param name="d" expression="C:\dir2"/>
    </xslt>
</target>
</project> 
```

XSLT 转换

```
<?xml version="1.0" standalone="yes"?> 
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:param name="d"/>
 <xsl:output omit-xml-declaration="yes" method="html"  indent="no"/>
 <xsl:strip-space elements="*"/>
<xsl:template match="/root/fileset[@dir=$d]">
    <xsl:for-each select="include">
        <xsl:value-of select="$d"/>\<xsl:value-of select="@name"/>
<xsl:text>
</xsl:text>
    </xsl:for-each>
</xsl:template>
</xsl:stylesheet> 
```

输出文件

text1.txt

```
C:\dir1\abc.txt
C:\dir1\def.txt 
```

text2.txt

```
C:\dir2\abc2.txt
C:\dir2\def2.txt 
```

# c# - 是否可以有条件的 Windows 8 模拟器？

> ID：12372163
> 
> 赞同：6
> 
> 时间：2012-09-11T14:35:08.060
> 
> 标签：c#, windows-8, microsoft-metro, simulator

当我尝试在模拟器中运行它并尝试使用请求后台执行权限时，我在我的 Windows 8 应用程序中遇到了一个奇怪的异常 `BackgroundExecutionManager.RequestAccessAsync();`

我明白了

> “WinRT 信息：在模拟器中运行此应用时，您无法更改后台任务和锁定屏幕权限。”

这显然是由于模拟器如何通过 RDP 工作的一些问题。

我的问题是，有什么办法可以在有问题的行周围加上条件以避免在模拟器中运行时调用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T16:28:29.613

当您想在模拟器中运行时，您可以设置一个条件编译符号。

# java - 拦截方法调用

> ID：12372165
> 
> 赞同：20
> 
> 时间：2012-09-11T14:35:11.253
> 
> 标签：java, android, reflection

我有这个代码

```
Foo foo = new Foo();
foo.callTheMethod(); 
```

有什么方法可以在`Foo.callTheMethod()`没有子类化或修改`Foo`类且没有`Foo`工厂的情况下拦截调用？

编辑：抱歉忘了提到这是在 Android 平台上。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-09-11T14:42:15.107

使用 Java 的[`Proxy`](http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/Proxy.html)类。它创建接口的动态实现并拦截方法，所有这些都是反射式的。

这是一个[教程](https://www.baeldung.com/java-dynamic-proxies)。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-11T14:40:08.040

您是否考虑[过面向方面的编程](https://web.archive.org/web/20120124141354/http://www.voelter.de:80/data/articles/aop/aop.html)，也许还有[AspectJ](http://www.eclipse.org/aspectj/)？有关 AspectJ/Android 信息，请参见[此处](http://code.google.com/p/android-aspectj/)和[此处](http://deansserver.co.uk/~dean/2011/07/18/aspect-oriented-android-development-tool-integration/)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-11T14:40:33.860

看看[Spring AOP](http://static.springsource.org/spring/docs/2.5.5/reference/aop.html)。您不必手动子类化您的类 - 但 Spring 将在幕后生成它们并添加代码来进行拦截。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-05-30T07:15:20.070

是的，通过[AspectJ](http://eclipse.org/aspectj/)是可能的。我将用一些代码片段来解释它：

```
public Aspect
{
    Object around()call(* Foo.callTheMethod())
    {
        // do your work
        return proceed(); 
    }                       
} 
```

# html - 将css菜单定位到右上角

> ID：12372175
> 
> 赞同：1
> 
> 时间：2012-09-11T14:35:45.360
> 
> 标签：html, css, menu, position, fixed

我很难将菜单移到/固定到右上角。任何帮助将非常感激 。

html和css代码@http: [//pastebin.com/qAcUqAU2](http://pastebin.com/qAcUqAU2)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:47:44.397

您可以进行一些小的更改，如下所示，

```
 ul#css3menu1 ul
     {
       left:57px;
     } 
```

我认为这可能对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T15:15:13.983

你可以使用这个，认为这会对你有所帮助。

创建另一个 id 或类并赋予 `text-align:right;`属性。把你的菜单代码放在这个 div 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T15:00:48.273

1.  首先我认为**将您的 div 浮动到右侧**，然后设置您的`margins 0 0 0 0 to zero`.

2.  在您的 CSS 上，您应该创建`position: absolute`使其独立，并使其
    `z-index: 100`站在顶部。

# excel - 过滤一组数据

> ID：12372177
> 
> 赞同：1
> 
> 时间：2012-09-11T14:35:49.320
> 
> 标签：excel, filtering, excel-2010, worksheet-function

所以我有一个我使用的文档，我在其中输入了每日数据。该数据在一个电子表格中记录了全年。该数据还用于计算图表等的月度值。为了让这些数据的输入更简单，重复性更小，我想把月度电子表格和年度电子表格联系起来，这样就只需要填写年度数据汇编。

有没有什么办法可以编写一个公式来遍历年度电子表格中的数据，并且只提取某个月份的数据？如果是这样，最好使用什么功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T23:41:31.107

假设您有两列，一列有日期，另一列的金额如下：

![在此处输入图像描述](../Images/8623fda2f9314aa0d295aad23aff6ac0.png)

使用 SUMIFS(sum_range,criteria_range1,criteria1,criteria_range2,criteria2) 将允许您对介于 E1 和 E2 中指定的两个日期之间的任何日期的总和范围 ($B$2:$B$10) 中的所有金额求和。

公式为： =SUMIFS(B2:B10,A2:A10,">="&E1,A2:A10,"<="&E2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T18:56:47.613

`=Vlookup()` 如果您只是将数据从每年提取到每月，我会使用。如果您尝试将每日数据计算为每月数据，您可以使用`countif()`or`sumif()`函数，具体取决于您想要完成的任务。因此，如果您尝试将所有每日数据相加以获得每月金额，您可以执行以下操作：
`=sumif(range,critera,[sumrange])` 范围将是该月份在标准中的 celss 将是月份，而 sumrange 将是月份的值。

# byte - crc16实现java

> ID：12372180
> 
> 赞同：6
> 
> 时间：2012-09-11T14:36:01.673
> 
> 标签：byte, implementation, crc, rfid, crc16

我在计算 java 中字节数组的 CRC-16 实现时遇到问题。基本上我正在尝试将字节发送到开始写入标签的 RFID。我可以通过在 mac 上查看 tcpdump 命令来查看数组的校验和值。但我的目标是自己生成它。这是我的字节数组，它应该生成 0xbe,0xd9：

```
byte[] bytes = new byte[]{(byte) 0x55,(byte) 0x08,(byte) 0x68, (byte) 0x14, 
                          (byte) 0x93, (byte) 0x01, (byte) 0x00, (byte) 0x00, 
                          (byte) 0x00, (byte) 0x00, (byte) 0x00, (byte) 0x06, 
                          (byte) 0x00, (byte) 0x00, (byte) 0x01, (byte) 0x00, 
                          (byte) 0x13, (byte) 0x50, (byte) 0x00, (byte) 0x00, 
                          (byte) 0x00, (byte) 0x22, (byte) 0x09, (byte) 0x11}; 
```

0x55 是标题。正如文档所说，它将被排除在外。

每当我在 java 上尝试这个数组（使用 0xbe，0xd9）时，RFID 就可以工作。我的问题是生成这些校验和值。我几乎搜索了整个网络，但没有机会。我找不到任何产生 0xbe,0xd9 的算法。

任何想法对我来说都是最受欢迎的。提前致谢。

编辑：这是随 rfid 提供[的协议](https://hotfile.com/dl/171580071/36ac860/Reader_Communication_protocol.doc.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T20:47:05.223

我**不确定**这是否是 C crc16 算法在 Java 中的正确翻译......但它为您的示例显示了正确的结果！

**请将其他结果与 Mac 的 CRC16 进行比较，并**在使用前对其进行压力测试。

```
public class Crc16 {
public static void main(String... a) {
    byte[] bytes = new byte[] { (byte) 0x08, (byte) 0x68, (byte) 0x14, (byte) 0x93, (byte) 0x01, (byte) 0x00,
            (byte) 0x00, (byte) 0x00, (byte) 0x00, (byte) 0x00, (byte) 0x06, (byte) 0x00, (byte) 0x00, (byte) 0x01,
            (byte) 0x00, (byte) 0x13, (byte) 0x50, (byte) 0x00, (byte) 0x00, (byte) 0x00, (byte) 0x22, (byte) 0x09,
            (byte) 0x11 };
    byte[] byteStr = new byte[4];
    Integer crcRes = new Crc16().calculate_crc(bytes);
    System.out.println(Integer.toHexString(crcRes));

    byteStr[0] = (byte) ((crcRes & 0x000000ff));
    byteStr[1] = (byte) ((crcRes & 0x0000ff00) >>> 8);

    System.out.printf("%02X\n%02X", byteStr[0],byteStr[1]);
} 

int calculate_crc(byte[] bytes) {
    int i;
    int crc_value = 0;
    for (int len = 0; len < bytes.length; len++) {
        for (i = 0x80; i != 0; i >>= 1) {
            if ((crc_value & 0x8000) != 0) {
                crc_value = (crc_value << 1) ^ 0x8005;
            } else {
                crc_value = crc_value << 1;
            }
            if ((bytes[len] & i) != 0) {
                crc_value ^= 0x8005;
            }
        }
    }
    return crc_value;
}

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-22T22:32:10.333

`rt.jar`Java 运行时 ( ) 中已经有一个 CRC16 实现。

请参阅[grepcode](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8u40-b25/sun/misc/CRC16.java#CRC16)的源代码。

如果您搜索 CRC16，您可能会在 IDE 中看到它：

[![CRC16 类搜索的图片](../Images/693659ed34b6c02d1e3c95f549d198eb.png)](https://i.stack.imgur.com/DTkBE.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T14:43:31.750

也许你在找这个？

[java中的CRC16](http://introcs.cs.princeton.edu/java/51data/CRC16.java.html)

我在此方法中使用相同的数组（变量“表”）：

```
 public Integer computeCrc16(byte[] data) {
    int crc = 0x0000;
    for (byte b : data) {
        crc = (crc >>> 8) ^ table[((crc ^ b) & 0xff)];

    }

    return (int) crc;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-06T11:08:54.690

如果你想要 ASCII 字符然后改变

byte[] bytes="02303131313233343031303345303903".getBytes();

下面是十六进制输入的正确答案，byte[] bytes = hexStringToByteArray("02303131313233343031303345303903");

公共类 CRC16 {

```
public static void main(String[] args) { 

    int[] table = {
        0x0000, 0xC0C1, 0xC181, 0x0140, 0xC301, 0x03C0, 0x0280, 0xC241,
        0xC601, 0x06C0, 0x0780, 0xC741, 0x0500, 0xC5C1, 0xC481, 0x0440,
        0xCC01, 0x0CC0, 0x0D80, 0xCD41, 0x0F00, 0xCFC1, 0xCE81, 0x0E40,
        0x0A00, 0xCAC1, 0xCB81, 0x0B40, 0xC901, 0x09C0, 0x0880, 0xC841,
        0xD801, 0x18C0, 0x1980, 0xD941, 0x1B00, 0xDBC1, 0xDA81, 0x1A40,
        0x1E00, 0xDEC1, 0xDF81, 0x1F40, 0xDD01, 0x1DC0, 0x1C80, 0xDC41,
        0x1400, 0xD4C1, 0xD581, 0x1540, 0xD701, 0x17C0, 0x1680, 0xD641,
        0xD201, 0x12C0, 0x1380, 0xD341, 0x1100, 0xD1C1, 0xD081, 0x1040,
        0xF001, 0x30C0, 0x3180, 0xF141, 0x3300, 0xF3C1, 0xF281, 0x3240,
        0x3600, 0xF6C1, 0xF781, 0x3740, 0xF501, 0x35C0, 0x3480, 0xF441,
        0x3C00, 0xFCC1, 0xFD81, 0x3D40, 0xFF01, 0x3FC0, 0x3E80, 0xFE41,
        0xFA01, 0x3AC0, 0x3B80, 0xFB41, 0x3900, 0xF9C1, 0xF881, 0x3840,
        0x2800, 0xE8C1, 0xE981, 0x2940, 0xEB01, 0x2BC0, 0x2A80, 0xEA41,
        0xEE01, 0x2EC0, 0x2F80, 0xEF41, 0x2D00, 0xEDC1, 0xEC81, 0x2C40,
        0xE401, 0x24C0, 0x2580, 0xE541, 0x2700, 0xE7C1, 0xE681, 0x2640,
        0x2200, 0xE2C1, 0xE381, 0x2340, 0xE101, 0x21C0, 0x2080, 0xE041,
        0xA001, 0x60C0, 0x6180, 0xA141, 0x6300, 0xA3C1, 0xA281, 0x6240,
        0x6600, 0xA6C1, 0xA781, 0x6740, 0xA501, 0x65C0, 0x6480, 0xA441,
        0x6C00, 0xACC1, 0xAD81, 0x6D40, 0xAF01, 0x6FC0, 0x6E80, 0xAE41,
        0xAA01, 0x6AC0, 0x6B80, 0xAB41, 0x6900, 0xA9C1, 0xA881, 0x6840,
        0x7800, 0xB8C1, 0xB981, 0x7940, 0xBB01, 0x7BC0, 0x7A80, 0xBA41,
        0xBE01, 0x7EC0, 0x7F80, 0xBF41, 0x7D00, 0xBDC1, 0xBC81, 0x7C40,
        0xB401, 0x74C0, 0x7580, 0xB541, 0x7700, 0xB7C1, 0xB681, 0x7640,
        0x7200, 0xB2C1, 0xB381, 0x7340, 0xB101, 0x71C0, 0x7080, 0xB041,
        0x5000, 0x90C1, 0x9181, 0x5140, 0x9301, 0x53C0, 0x5280, 0x9241,
        0x9601, 0x56C0, 0x5780, 0x9741, 0x5500, 0x95C1, 0x9481, 0x5440,
        0x9C01, 0x5CC0, 0x5D80, 0x9D41, 0x5F00, 0x9FC1, 0x9E81, 0x5E40,
        0x5A00, 0x9AC1, 0x9B81, 0x5B40, 0x9901, 0x59C0, 0x5880, 0x9841,
        0x8801, 0x48C0, 0x4980, 0x8941, 0x4B00, 0x8BC1, 0x8A81, 0x4A40,
        0x4E00, 0x8EC1, 0x8F81, 0x4F40, 0x8D01, 0x4DC0, 0x4C80, 0x8C41,
        0x4400, 0x84C1, 0x8581, 0x4540, 0x8701, 0x47C0, 0x4680, 0x8641,
        0x8201, 0x42C0, 0x4380, 0x8341, 0x4100, 0x81C1, 0x8081, 0x4040,
    };

    byte[] bytes = hexStringToByteArray("02303131313233343031303345303903"); // for HEX
    int crc16 = 0x0000;
    for (byte b : bytes) {

        crc16=table[(crc16 ^ b) & 0xff] ^ (crc16 >> 8);
    }

     crc16= crc16 & 0xFFFF;

    System.out.println("CRC16 = " +Integer.toHexString(crc16));

}

 public static byte[] hexStringToByteArray(String s) {
    int len = s.length();
    byte[] data = new byte[len / 2];
    for (int i = 0; i < len; i += 2) {
        data[i / 2] = (byte) ((Character.digit(s.charAt(i), 16) << 4)+ Character.digit(s.charAt(i+1), 16));
    }
    return data;
} 
```

}

# windows-phone-7 - Windows Phone 7 中有类似 RequestTheme 的东西吗？

> ID：12372185
> 
> 赞同：0
> 
> 时间：2012-09-11T14:36:22.723
> 
> 标签：windows-phone-7, xaml

我正在开发一些 winRT 应用程序并且我拥有该属性

```
RequestTheme 
```

我可以设置为明暗。因此，如果我想始终显示我的应用程序，例如在黑暗中，我可以覆盖用户默认主题。

windows phone 7 编程中是否有相同的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T16:26:58.040

Kirupa Chinnathambi 写了一篇很好的文章，涵盖了主题类型的获取[。](http://www.kirupa.com/windowsphone/detecting_the_theme.htm)这是这里最好的起点。

# python - 多行列表理解的 Pythonic 风格

> ID：12372186
> 
> 赞同：42
> 
> 时间：2012-09-11T14:36:26.483
> 
> 标签：python, coding-style, list-comprehension

> **可能重复：**
> [python 中列表推导或生成器表达式的行延续](https://stackoverflow.com/questions/5809059/line-continuation-for-list-comprehensions-or-generator-expressions-in-python)

编写长列表理解最pythonic的方法是什么？这个列表理解共有 145 列：

```
memberdef_list = [elem for elem in from_cache(classname, 'memberdefs') if elem.argsstring != '[]' and 'std::string' in null2string(elem.vartype)] 
```

如果我把它分成多行，它应该是什么样子？我在 Python 风格指南中找不到任何关于此的内容。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-09-11T14:39:59.237

PEP 8 有点早于列表理解。我通常在逻辑位置将它们分成多行：

```
memberdef_list = [elem for elem in from_cache(classname, 'memberdefs')
                  if elem.argsstring != '[]' and 
                     'std::string' in null2string(elem.vartype)] 
```

不过，大多数情况下，我首先会放弃那里的相关测试：

```
def stdstring_args(elem):
    if elem.argstring == '[]':
        return False
    return 'std::string' in null2string(elem.vartype)

memberdef_list = [elem for elem in from_cache(classname, 'memberdefs')
                  if stdstring_args(elem)] 
```

# ios - 需要为 URL 编码 NSString。CFURLCreateStringByAddingPercentEscapes 修改我的字符串

> ID：12372187
> 
> 赞同：2
> 
> 时间：2012-09-11T14:36:27.607
> 
> 标签：ios, cocoa-touch, rest, nsstring, urlencode

我的音乐播放器应用程序需要能够通过 REST API 将歌曲、艺术家和专辑名称发送到 Last.fm。为了正确发布这些值，我需要对它们进行编码，以便它们是 URL 安全的（替换 &、/、+ 等）

我做了很多研究，但找不到适合我的答案。我在网上和 StackOverflow 上找到的最常见的答案是：

```
NSString * encodedString = (__bridge NSString *)CFURLCreateStringByAddingPercentEscapes(NULL,(__bridge CFStringRef)stringToEncode,NULL,(CFStringRef)@"!*'();:@&=+$,/?%#[]",kCFStringEncodingUTF8 ); 
```

然而，这样的结果似乎不是我所期望的。显示前后结果的 NSLog 示例：

**艺术家**：

```
2012-09-11 10:20:27.803 albums[7647:5c03] Depeche Mode
2012-09-11 10:20:27.804 albums[7647:5c03] Depeche2ode 
```

**歌曲**：

```
2012-09-11 10:20:27.807 albums[7647:5c03] I Want It All (Album Version)
2012-09-11 10:20:27.808 albums[7647:5c03] I2ant2t-0X1.1A1A10D39EP-485ll228Album2ersion2 
```

**专辑**：

```
2012-09-11 10:20:27.810 albums[7647:5c03] Playing The Angel
2012-09-11 10:20:27.811 albums[7647:5c03] Playing2he-0X1.1A1A10D39EP-485ngel 
```

它不仅用转义码替换保留的字符，还破坏了我的字符串。

我已经尝试过这样做的 NSString 方法，我得到了同样的结果：

```
NSString *encodedString = [string stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]; 
```

**艺术家**：

```
2012-09-11 10:29:53.780 albums[7675:5503] Depeche Mode
2012-09-11 10:29:53.787 albums[7675:5503] Depeche2ode 
```

**歌曲**：

```
2012-09-11 10:29:53.789 albums[7675:5503] I Want It All (Album Version)
2012-09-11 10:29:53.790 albums[7675:5503] I2ant2t-0X1.1A1A100A78P-485ll2Album2ersion) 
```

**专辑**：

```
2012-09-11 10:29:53.792 albums[7675:5503] Playing The Angel
2012-09-11 10:29:53.793 albums[7675:5503] Playing2he-0X1.1A1A100A78P-485ngel 
```

我进行了广泛搜索，找不到完全相同的问题。上面列出的解决方案（在几十个博客和 SO 帖子中建议）似乎对其他人有用。

我不太了解字符串编码。我从来没有在另一个平台上处理过它，所以我不能告诉你我试图用转义码替换的字符串是如何编码的。我可以告诉你，我是从 MPMediaItem 方法中得到它的`valueForKey:MPMediaItemPropertyTitle`，所以不管它是什么，它都是 Apple 返回的。在 NSLogged 或 UI 中查找从该外观返回的字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T14:42:01.070

您的字符串显示不正确的原因很可能是因为您将 URL 作为第一个参数传递，该参数`NSLog`接受第一个参数的格式字符串。任何百分比字符都将被解释为格式字符串指令。

您需要像这样记录您的 URL：

```
NSLog(@"%@", urlToLog); 
```

此外，代码中最左边的`__bridge`部分不正确。`CFURLCreateStringByAddingPercentEscapes`名称中有“Create”，这意味着它返回的字符串需要被释放。我们想告诉 ARC 为我们处理这个问题，所以我们应该*将*所有权转移给 ARC `__bridge_transfer`：

```
NSString * encodedString = (__bridge_transfer NSString *)CFURLCreateString... 
```

# c# - C# 数学除法不正确

> ID：12372193
> 
> 赞同：-2
> 
> 时间：2012-09-11T14:36:56.280
> 
> 标签：c#, math, division

> **可能重复：**
> [除法返回零](https://stackoverflow.com/questions/9288904/division-returns-zero)
> [简单计算由于某种原因不起作用](https://stackoverflow.com/questions/12329042/simple-calculation-not-working-for-some-reason)

为什么是这样：

```
int prozent = (totalkcals / 2000) * 100; 
```

返回 0？

在这种情况下，totalkcals 是 567，我仔细检查了它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T14:37:55.963

这是因为[整数除法](http://msdn.microsoft.com/en-us/library/aa691373%28v=vs.71%29.aspx)

> 除法将结果向零舍入，结果的**绝对值是小于两个操作数的商的绝对值的最大可能整数**。当两个操作数具有相同符号时结果为零或正，当两个操作数具有相反符号时结果为零或负

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T14:38:06.217

这是因为整数除法。

```
double prozent = ((double)totalkcals / 2000) * 100; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-11T14:39:38.977

567 / 2000 = 0.2835，当转换为 int（由您的数据类型指定）时变为零。0 * 100 = 0。

所以： `double prozent = ((double)totalcals / 2000.0) * 100.0;`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-11T14:38:58.230

因为是整数计算，所以(totalkcals / 2000)的运算返回0；

# sql - 不支持 SQL 构造或语句

> ID：12372202
> 
> 赞同：1
> 
> 时间：2012-09-11T14:37:19.240
> 
> 标签：sql, sql-server, database, if-statement

我是使用 SQL 的新手，但我遇到了一个错误：

> 不支持 sql 构造或语句

每次我执行此语句时，在 Visual Studio 中：

```
IF (SELECT [Product_Availability] FROM Product WHERE [Product_Name] = @name) = 'True' 
UPDATE [Product] SET [Product_Availability] = 'False' 
WHERE ([Product_Name] = @name) 
ELSE 
UPDATE Product SET [Product_Availability] = 'True' 
WHERE ([Product_Name] = @name) 
```

尽管视觉工作室的查询部分出错，但它仍然有效；但是，当我在我的数据库处理程序类中调用它时，它不会。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T14:40:01.753

为什么不简化为单个语句而不是所有这些 if/else 东西？

```
UPDATE dbo.Product_Availability 
  SET Product_Availability = CASE Product_Availability
    WHEN 'True' THEN 'False' ELSE 'True' END
WHERE Product_Name = @name; 
```

# javascript - 一个 href 到 url 从下拉列表中抓取一个选择

> ID：12372205
> 
> 赞同：0
> 
> 时间：2012-09-11T14:37:23.257
> 
> 标签：javascript, html

我想要做的是从选择列表中选择值并在 href 调用中使用它，这是一个示例：

```
 $query="SELECT distinct(loca_cod) as id, localidad as nombre FROM $tabla WHERE     parti_cod='$stateId' order by nombre asc";
$result=mysql_query($query);

?>
<div class="styled-select">
<select name="city">
<option>Seleccione Localidad</option>
<? while($row=mysql_fetch_array($result)) { ?>
<option value = "<?=$row['id']?>"><?=$row['nombre']?></option>
<? } ?>
</select>
</div>
<br />
</tr>
<tr><td>&nbsp;</td><td></td></tr>
<tr>
<td><a href="step2.php?uch=HERE GOES THE VALUE SELECTED FROM USER class="boton_res">Continue</a></td>
</tr> 
```

关于如何进行的任何提示？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T21:54:02.060

尝试使用 do while

```
<option>Seleccione Localidad</option>
<? do {?>
<option value = "<?=$row['id']?>"><?=$row['nombre']?></option>
<? } while($row=mysql_fetch_array($result)) ; ?>
</select>
</div>
<br />
</tr>
<tr><td>&nbsp;</td><td></td></tr>
<tr>
<td><a href="step2.php?uch=HERE GOES THE VALUE SELECTED FROM USER class="boton_res">Continue</a></td>
</tr> 
```

# jquery - jquery ajax 无法得到响应

> ID：12372211
> 
> 赞同：0
> 
> 时间：2012-09-11T14:37:33.923
> 
> 标签：jquery, ajax, asynchronous

这段代码有问题

```
var MAIN_LOCATION = "http://www.bosscaffe.com/new/";
$("#gallery_page").click(function() {
    $('#gallery_photos').show();
    getPhotos();
    return false;
}); 

function getPhotos()
{
    $.ajax({
         type: "GET",
         url: MAIN_LOCATION + "classes/getEnterijerPhotos.php?lang="+LANG,
         success: function(msg){
            if (msg != 'nothing')
            {
                $('#photo_wrapper').empty();
                $('#photo_wrapper').append(msg);
            }
         }
    });
} 
```

我尝试了几件事，例如跨域：true、async:false 等...我尝试将其切换为 POST，但由于某种原因，如果我在新选项卡中触发调用，这个不会返回任何内容，我得到结果[http:// www.bosscaffe.com/new/classes/getEnterijerPhotos.php?lang=en](http://www.bosscaffe.com/new/classes/getEnterijerPhotos.php?lang=en)所以所有这些图像都准备好了，在我的本地实例上这可以工作，但在服务器上它根本不起作用，在 Chrome 中我得到状态 = 取消，任何关于这个的想法？

在任何情况下，最终解决方案都是将其传输到 JSON，但奇怪的是这样的功能不能在同一个域上运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T15:23:51.467

你在打[跨域](http://en.wikipedia.org/wiki/Same_origin_policy)电话吗？=> 是您调用页面的来源，与`MAIN_LOCATION`（相同协议、相同域、相同端口）相同。

所以如果你是`MAIN_LOCATION = 'http://www.bosscaffe.com/new/classes/getEnterijerPhotos.php?lang=en'`那么调用页面需要从`http://www.bosscaffe.com/...`

如果它是一个跨源呼叫并且您想要修复它（而不将其移动到同一源），我在[此处发布了关于该问题的答案](https://stackoverflow.com/questions/12245184/ajax-giving-blank-response/12245332#12245332)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T14:56:03.423

您没有提供足够的信息来回答您的问题，但这里有几点需要考虑：

您的第一行中有一个错字，您在画廊中有一个额外的“l”（el）。

如前所述，如果您希望回复是特定的数据类型，则需要将其列在 $.ajax() 的参数中，以便代码可以正确准备其结果。

为所有 AJAX 请求提供错误处理程序通常是个好主意，这样您就知道请求实际上已成功。在您的代码中，您的请求可能会失败（“静默”），而不会向您提供任何事实指示。

编辑

如果您从运行 PHP 服务器进程的同一主机发出请求，我怀疑您需要在 URL 中使用服务器的完全限定主机名而不是“localhost”。

# javascript - Jquerymobile mobile.Changepage 转换：someVariable

> ID：12372213
> 
> 赞同：0
> 
> 时间：2012-09-11T14:37:35.400
> 
> 标签：javascript, jquery, jquery-mobile, swipe

我有一个 jquerymobile 代码，用于使用滑动功能更改页面。我的 mobile.changePage 看起来像这样：

> $.mobile.changePage("#page"+window.now, {transition: "slide"}, false, true);

我也在使用 localStorage 来存储设置。我已将它们加载到变量 transitionSettings：

> 函数 loadSettings(){ var transitionSettings = window.localStorage.getItem("transitionsSettings");}

*transitionsSettings*变量可以是“slide”或“none” 。

我想将此字符串插入到我的*mobile.changePage 中*，以便它加载设置并设置正确的过渡。

我试过**{transition: transitionSettings}**和**{transition: +transitionSettings}**但它没有用。但是，我的*loadSettings()*函数位于名为*settings.js的***.js**文件中，而我的**mobile.changePage()**位于*slide.js*中，它们都被导入到*index.html*

 *****我认为*slide.js*应该可以毫无问题地访问*settings.js*变量。但这不起作用，整个滑动功能都被破坏了。

**关于如何将设置变量导入过渡的任何建议？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T15:23:49.537

您只需要将 transitionSettings 变量存储在可以在代码中的任何位置访问的全局变量中，您可以通过将任何 var 附加到 window 对象来实现[javascript 中的全局 var](http://snook.ca/archives/javascript/global_variable)，因此在您的示例中，您可以更改 loadSettings() 函数对此：

```
function loadSettings(){ var window.transitionSettings = window.localStorage.getItem("transitionsSettings");} 
```

并在 slide.js 中使用它，如下所示：

```
$.mobile.changePage("#page"+window.now, {transition: window.transitionSettings}, false, true); 
```

那应该可以正常工作..

您也可以从 slide.js 中获取您的设置，如下所示：

```
$.mobile.changePage("#page"+window.now, {transition: window.localStorage.getItem("transitionsSettings")}, false, true); 
```

那也应该可以正常工作..*****

# javascript - 页面加载跳转 jquery 淡入

> ID：12372215
> 
> 赞同：-1
> 
> 时间：2012-09-11T14:37:52.847
> 
> 标签：javascript, jquery, fadein

我正在使用这些脚本淡入内容，margin-right 0 第四项并进行灰色悬停：

```
$(document).ready(function(){    
    $("div.item:nth-child(4n+4)").css("margin-right", "0px");
});

$(document).ready(function(){
    $("#main").hide().fadeIn();
});

$(document).ready(function(){
    $("img.a").hover(
        function() {
            $(this).stop().animate({"opacity": "0"}, "slow");
        },
        function() {
            $(this).stop().animate({"opacity": "1"}, "slow");
     });
}); 
```

问题是，当我加载“投资组合”或“acerca”页面（特别是“acerca”部分上的文本）时，主要内容在淡入之前会跳转。我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:43:09.010

尝试将这些图片加载为 display: none 然后进行淡入淡出。应该有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T14:54:54.930

Esteban 我认为你应该默认隐藏'#main' div，这样浏览器就不会渲染它，然后在准备好的回调中进行淡入淡出。为了澄清，您的以下html：

```
<div id="main" class="clearfix"> 
```

可以改为

```
<div id="main" style="display: none;" class="clearfix"> 
```

然后改变这个jquery：

```
$(document).ready(function(){
   $("#main").hide().fadeIn();
}); 
```

对此

```
$(document).ready(function(){
   $("#main").fadeIn();
}); 
```

试试吧，我想它会工作得很好。。

顺便说一句，我是西班牙网站编码员，目前在马德里，我将很快开始自由职业，如果您需要一些项目的网站后端代码，您可以联系我 :-)

# java - 如何在“char”类型的 Switch 中实现特殊字符（？）作为选项？

> ID：12372217
> 
> 赞同：0
> 
> 时间：2012-09-11T14:37:55.950
> 
> 标签：java, switch-statement, special-characters

我正在尝试使用 Switch 语句作为菜单界面，我想知道如何包含一个“帮助”选项，该选项由用户输入“？”触发。象征。

但由于 Switch 接受类型“char”，我不确定这怎么可能。

你能指出我正确的方向吗？

到目前为止，这是我的非编译代码：

```
private char readChoice()
{   System.out.print("Choice (a/b/c/s/?/x): ");
    return In.nextLine().toLowerCase().charAt(0); }

private void execute(char choice)
{   switch (choice)
    {   case 'a': routes.show(); break;
        case 'b': customers.book(routes); break;
        case 'c': customers.show(); break;
        case 's': routes.showSchedule(); break; 
        case '\?': showHelp(); break;
        case 'x': break;    }}

private String showHelp()
{   String helpText = "  A/a  Show bookings by route\n";
    helpText +=       "  B/b Book a trip\n";
    helpText +=       "  C/c Show bookings by customer\n";
    helpText +=       "  ? Show choices\n";
    helpText +=       "  X/x Exit\n";
    return helpText;    } 
```

另一个问题是，是否有更合适的方法来实现“退出”选项，而不是在输入“x”后休息一下？

感谢您花时间阅读我的问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-11T14:39:16.993

Java 语言中的问号字符没有什么特别之处。你不需要逃避它——它不像在正则表达式中。只需使用：

```
case '?': showHelp(); break; 
```

有关您*确实*需要转义的字符（以及可用的转义序列），请参阅[JLS 第 3.10.4 节。](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.10.4)

 *编辑：根据评论，问题出在`showHelp()`方法上，它构建了一个字符串但不返回它。你可能想要这样的东西：

```
private String showHelp() {
    out.println("  A/a  Show bookings by route");
    out.println("  B/b Book a trip");
    out.println("  C/c Show bookings by customer");
    out.println("  ? Show choices");
    out.println("  X/x Exit");
} 
```

...对于一个合适的值`out`。

（顺便说一句，您的支撑样式很奇怪，我觉得很难阅读。Java 中有两种常见的支撑样式 - 我在上面的代码中显示的一种，以及“同时在单独的一行上的支撑”缩进作为右大括号”版本。为了其他可能阅读您的代码的人，可能值得采用其中一种常见的样式。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-11T14:39:09.660

无需`?`在字符中转义：

```
case '?': showHelp(); break; 
```

> 有没有更合适的方法来实现“退出”选项，而不仅仅是在输入“x”后休息一下？

如果没问题，但如果你删除它，它会以同样的方式工作。可能更有意义的是：

```
case 'x': break;
default: showErrorMessage(); 
```

所以如果用户输入了一个未经授权的字符，你让他知道。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-11T14:46:12.580

您不需要转义“？” 在一个字符中。另外 - 您当前没有对您构造并从 showHelp() 返回的 String 做任何事情。你需要做一些类似的事情：

```
String message;
switch(choice) {
 //.. stuff ommitted
 case '?': message = showHelp(); break; 
```

或者您应该在 showHelp 中显示该消息。*

# iphone - UIWebView 在 Safari 中打开 URL，但不是以 # 开头的 URL

> ID：12372228
> 
> 赞同：2
> 
> 时间：2012-09-11T14:38:21.593
> 
> 标签：iphone, objective-c, ios

我尝试使用下面的代码在 Safari 中打开我的 HTML5 应用程序中的链接。但是，该代码还在 Safari 中打开了用于应用程序内部导航的 # 链接。链接是否以 HTTP 开头，导致它们在 Safari 中打开？如果是这样，我该如何修改此脚本以排除它们？

谢谢。

以供参考

请在此处查看 GIT 存储库：[https ://github.com/philhudson91/flaming-cyril](https://github.com/philhudson91/flaming-cyril)

或者我可以写它来阻止来自我托管的域的链接打开吗？

更新

这是我现在使用的代码...

```
-(BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType;
{
NSURL *requestURL =[ [ request URL ] retain ];
NSCharacterSet * set = [[NSCharacterSet characterSetWithCharactersInString:@"#"] invertedSet];
if ([ [ requestURL scheme ] isEqualToString: @"http" ]) NSLog(@"HTTP"); if ([ [ requestURL scheme ] isEqualToString: @"https" ]) NSLog(@"HTTPS"); if (( [ [requestURL absoluteString] rangeOfCharacterFromSet:set].location == NSNotFound )) NSLog(@"Not Local"); if (( [ [ requestURL scheme ] isEqualToString: @"mailto" ])
    && ( navigationType == UIWebViewNavigationTypeLinkClicked ) ) {
    return ![ [ UIApplication sharedApplication ] openURL: [ requestURL autorelease ] ];
}
[ requestURL release ];
return YES; 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T15:52:57.960

您可以尝试以下方法：（我没有测试过，这只是验证请求方案为 http 或 https 时 URL 不包含 '#'）

```
-(BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType;
{
  NSURL *requestURL =[ [ request URL ] retain ];
  NSCharacterSet * set = [[NSCharacterSet characterSetWithCharactersInString:@"#"] invertedSet];

  NSLog([requestURL absoluteString]);

  if ( ((( ([ [ requestURL scheme ] isEqualToString: @"http" ]) || 
           ([ [ requestURL scheme ] isEqualToString: @"https" ])) && 
         ( [ [requestURL absoluteString] rangeOfCharacterFromSet:set].location != NSNotFound ) ) || 
        ( [ [ requestURL scheme ] isEqualToString: @"mailto" ]) ) && 
      ( navigationType == UIWebViewNavigationTypeLinkClicked ) ) {
      return ![ [ UIApplication sharedApplication ] openURL: [ requestURL autorelease ] ];
  }
  [ requestURL release ];
  return YES; 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T11:03:14.503

以前的答案很好，但似乎检查太多。我宁愿使用这样的东西：

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType;
{
    NSString *urlString = request.URL.absoluteString;

    if (([urlString rangeOfString:@"http://m.bu-news.com"].location != NSNotFound)) {
        return YES;
    }
    [[UIApplication sharedApplication] openURL:request.URL];
    return NO;
} 
```

这应该足够了。

更新：是否检查了您的代码并对其进行了一些测试。上面的代码按预期工作：所有导航链接在应用程序内打开，所有“阅读全文”链接在 Safari 中打开。但是没有检查所有链接，可能仍然存在一些问题。

# r - 为元分析森林图添加标题

> ID：12372230
> 
> 赞同：5
> 
> 时间：2012-09-11T14:38:30.710
> 
> 标签：r

我正在对一些研究进行元分析，并为我的结果绘制森林图。但是我似乎无法让森林图显示标题。

我的代码的一个例子是：

```
require(meta)
parameter1<-metaprop(sm="PLOGIT", 
                 event=c(4,16,3,2,10,1,0,2), 
                 n=c(90,402,89,29,153,86,21,48), 
                 level = 0.95, 
                 studlab=c("study 1",
                           "study 2",
                           "study 3",
                           "study 4",
                           "study 5",
                           "study 6",
                           "study 7",
                           "study 8"), 
                 title="meta analysis 1")
forest(parameter1) 
```

当它生成森林图时，缺少标题“元分析 1”。

我怎样才能添加这个？

提前致谢，

提摩太

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-11T15:20:27.673

在我看来，该`forest`功能没有任何明显的方式来绘制标题。但是不要绝望，`forest`使用网格图形，我们可以像这样轻松地手动添加标题。

```
grid.text("My custom title", .5, .9, gp=gpar(cex=2)) 
```

请参阅`?gpar`如何设置文本样式。

# ios - 从 Rubymotion 调用 NSSetUncaughtExceptionHandler

> ID：12372234
> 
> 赞同：0
> 
> 时间：2012-09-11T14:38:44.890
> 
> 标签：ios, rubymotion

`NSSetUncaughtExceptionHandler`我正在尝试在**Rubymotion**应用程序中使用全局异常处理程序。而且我不知道该怎么做，可能我使用的 Rubymotion 函数指针语法不正确。

在`application(application, didFinishLaunchingWithOptions:launchOptions)`我有：

```
NSSetUncaughtExceptionHandler nil do |exception|
  NSLog "exception handler block"
  applicationFailedWithException(exception)
end 
```

和处理程序（从未被调用）：

```
def applicationFailedWithException(exception)
  NSLog "applicationFailedWithException"
end 
```

然后，在运行时，当某个 NoMethodError 发生在异常处理程序块中的某个地方时，也没有调用处理程序方法。我在模拟器和设备上都试过了——没有成功。

PS有没有办法在崩溃日志中获取ruby方法堆栈，崩溃日志中的最后一个应用程序方法始终是`rb_rb2oc_exc_handler`而不是特定于应用程序的方法，这很奇怪。

谢谢

**2015 年更新**

似乎对于较新版本的 Rubymotion，您必须将对处理程序的引用保存在实例变量中，否则它将无法工作。所以它应该看起来像：

```
def application(application, didFinishLaunchingWithOptions:launchOptions)
  @exceptionHandler = lambda { |exception| uncaughtExceptionHandler(exception) }

  # or you can use a method reference, which is the same
  # @exceptionHandler = method :uncaughtExceptionHandler

  NSSetUncaughtExceptionHandler @exceptionHandler

  ...
end

def uncaughtExceptionHandler(exception)
  # log it or send it to crashlytics / flurry / whatever
  NSLog "Fatal exception catched\nName: #{exception.name}\nReason: # {exception.reason}\nInfo#{exception.userInfo}"
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-28T01:34:25.120

迪伦的回答很棒。我非常喜欢像这样的 lambdas 传递方法：

```
def application(application, didFinishLaunchingWithOptions:launchOptions)
  NSSetUncaughtExceptionHandler method(:on_exception)
end

def on_exception(exception)
  puts "Exception Name: #{exception.name}"
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T16:33:38.113

为了让它工作，我必须将一个块分配给一个变量，然后使用该变量：

```
handler = lambda do |exception|
  NSLog "Exception Name: #{exception.name}"
end
NSSetUncaughtExceptionHandler(handler) 
```

如果我然后在`NSException.raise("test", format: "test")`REPL 中输入类似的内容，我会看到 NSLog 这样做：

```
2012-09-11 09:33:05.949 exc[14723:c07] Exception Name: test
2012-09-11 09:33:05.950 exc[14723:c07] *** Terminating app due to uncaught exception 'test', reason: 'test'
*** First throw call stack:
(0x1647022 0x22bcd6 0x15efa48 0x15ef9b9 0x8f00743 0xe3c0c 0x8f0031a 0x8f000ad 0xd4c9fa2 0x259e8d9 0x259f509 0x157e803 0x157dd84 0x157dc9b 0x261f7d8 0x261f88a 0x563626 0x25d0 0x23b5)
terminate called throwing an exception% 
```

从理论上讲，您应该能够将 lambda 直接嵌套为参数，而不是先将其分配给变量，但我认为 RubyMotion 不能正确保留该块，并且如果您尝试它，应用程序会崩溃而不会出错。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-19T13:48:06.547

根据[Apple 文档](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/Exceptions/Tasks/ControllingAppResponse.html#//apple_ref/doc/uid/20000473-BBCHGJIJ)，您必须添加`ExceptionHandling.framework`到您的项目中。但即使在之后：

```
Rakefile
Motion::Project::App.setup do |app|
  app.frameworks += %w(ExceptionHandling)
end 
```

它不适用于 OS X。

# c# - 回复时如何维护/保留自定义电子邮件标题（X-header）

> ID：12372239
> 
> 赞同：10
> 
> 时间：2012-09-11T14:38:55.903
> 
> 标签：c#, asp.net, .net, smtp, pop3

我正在使用以下代码从我的 .NET 应用程序发送电子邮件，在这里我添加了自定义标题 X-Company。收到电子邮件后，我会正确获取此自定义标头，但每当我回复/转发此邮件时，自定义标头都不会回复。

```
MailMessage message = new MailMessage(From, To);                  
                message.Headers.Add("X-Company","xyz");                
                message.Body = emailMessage.ToString();
                message.Subject = Subject;                
                message.IsBodyHtml = true;               
                smtp.Send(message); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:45:35.527

这在所有电子邮件客户端中都很难做到，因为当您回复时，他们可以自由地删除他们认为不必要的标题。

如果您的唯一目标是插入一些键值对并在有人回复时将其返回给您，那么在您处理 HTML 电子邮件时，您可以拥有一个隐藏的 html 元素，其中包含您的自定义标题信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-16T15:14:16.413

我们也遇到过类似的情况，我们应该向客户发送电子邮件并阅读它们并将它们与各种活动相关联。

在研究期间，我们发现唯一没有被各种电子邮件客户端（Outook、Yahoo、Gmail 等）替换或删除的 HEADER 是“XREF”。我们已经对其进行了彻底的测试，并且自从我们首次推出它以来它一直在工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-04T16:46:25.237

正如 Parapura rajkumar 所提到的，在电子邮件中包含一个隐藏的 html 元素是解决此问题的最佳方法，因为不会在所有电子邮件提供商中保留自定义标头。

电子邮件提供商经常会破坏/删除 html 参数，我发现最可靠的走私参数的方法是将它们作为图像查询参数包含在内。

下面是附加到电子邮件正文的不可见图像的示例。您可以用自己的资源替换维基媒体图像，并通过作为查询参数走私参数。当用户回复时，您应该能够再次将其解析出来。如果您正在托管 URL，则可以在打开电子邮件时访问您的服务器，这可用于确定电子邮件的查看时间。

```
<img src='https://upload.wikimedia.org/wikipedia/commons/c/ca/1x1.png?policyref={policyref}'  alt='' width='1' height='1' border='0' style='height: 1px; width: 1px; border-width: 0px; margin: 0px; padding: 0px;'> 
```

# .net - “不要在这个热代码路径中使用 StringBuilder 或 foreach”

> ID：12372251
> 
> 赞同：32
> 
> 时间：2012-09-11T14:39:33.437
> 
> 标签：.net, optimization, foreach, signalr, stringbuilder

我正在浏览 Open Source [SignalR](http://signalr.net/)项目的源代码，我看到[这个差异代码](https://github.com/SignalR/SignalR/commit/934e581460e4850f3ee2b58b72183eceb0e223d1)，标题为*“不要在此热代码路径中使用 StringBuilder 或 foreach”*：

```
-           public static string MakeCursor(IEnumerable<Cursor> cursors)
+           public static string MakeCursor(IList<Cursor> cursors)
            { 
-               var sb = new StringBuilder();
-               bool first = true;
-               foreach (var c in cursors)
+               var result = "";
+               for (int i = 0; i < cursors.Count; i++)
                {
-                   if (!first)
+                   if (i > 0)
                    {
-                       sb.Append('|');
+                       result += '|';
                    }
-                   sb.Append(Escape(c.Key));
-                   sb.Append(',');
-                   sb.Append(c.Id);
-                   first = false;
+                   result += Escape(cursors[i].Key);
+                   result += ',';
+                   result += cursors[i].Id;
                }
-               return sb.ToString();
+               return result;
            } 
```

我理解为什么 foreach 有时效率会降低，以及为什么它被 for 取代。

但是，我了解到并体验到 StringBuilder 是连接字符串的最有效方法。所以我想知道为什么作者决定用标准串联来代替它。

这里和一般使用 StringBuilder 有什么问题？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-09-11T21:37:56.333

我进行了代码更改，是的，它在分配数量（GetEnumerator()）调用与不调用方面产生了巨大差异。想象一下这段代码每秒数百万次。分配的枚举数是荒谬的，可以避免。

编辑：我们现在反转控制以避免任何分配（直接写给作者）： [https ://github.com/SignalR/SignalR/blob/2.0.2/src/Microsoft.AspNet.SignalR.Core/Messaging/光标.cs#L36](https://github.com/SignalR/SignalR/blob/2.0.2/src/Microsoft.AspNet.SignalR.Core/Messaging/Cursor.cs#L36)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T14:48:10.357

只是希望改变这个的人实际测量了差异。

*   每次实例化一个新的字符串生成器都会产生开销。这也给内存/垃圾收集带来了压力。
*   编译器可以为简单的连接生成“stringbuilderlike”代码
*   FOR 实际上可能更慢，因为它可能需要边界检查，而 foreach 循环没有完成，因为编译器“知道”它们在边界内。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-11T16:47:00.150

这取决于`Cursor`提供给函数的 s 数量。

`StringBuilder`在连接 4-10 个字符串时，这两种方法之间的大多数比较似乎都优于字符串连接。`StringBuilder`如果我没有明确的理由，我很可能会赞成（例如，***我的问题/应用程序***的两种方法的性能比较）。我会考虑在 中预先分配一个缓冲区`StringBuilder`以避免（许多）重新分配。

请参阅[字符串连接与字符串生成器。Performance](https://stackoverflow.com/q/1612797/167251) and [Concatenating with StringBuilders vs. Strings](http://blogs.msdn.com/b/ricom/archive/2003/12/02/40778.aspx)讨论这个主题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-11T14:43:44.713

你做了多少串联？如果很多，请使用 StringBuilder。如果只有几个，那么创建 StringBuilder 的开销将超过任何优势。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-11T15:46:47.590

我会把我的钱放在

```
 StringBuilder sb = new StringBuilder();
           bool first = true;
           foreach (Cursor c in cursors)
           {
                if (first)
                {
                   first = false;  // only assign it once
                }
                else
                {
                    sb.Append('|');
                }
                sb.Append(Escape(c.Key) + ',' + c.Id);
            }
            return sb.ToString(); 
```

但我会把钱和 dfowler 的更新放在一起。查看他答案中的链接。

# jquery - scrollExtend 插件添加额外的 div

> ID：12372256
> 
> 赞同：3
> 
> 时间：2012-09-11T14:39:46.157
> 
> 标签：jquery, scroll

我需要有关**scrollExtends.js**插件的帮助。我可以动态地从数据库中添加内容，但插件会添加额外`div`的内容来包装我的内容。结果我得到了`div`我不需要的。

这是我的Javascript：

```
jQuery(document).ready(
    function() {
        var index = +$('.list_item').size()-1;
        var url = 'more.php?index='+index;
    $('.scroll_container').scrollExtend(
    {
        'target': 'div#scroll_items',
        'loadingIndicatorEnabled':true,
        'loadingIndicatorClass':'scrollExtend-loading',
        'url' : function(container) {
            return url;
        }, 
        'onSuccess':function(){
            index += 5;
            url = 'more.php?index='+index;
        }

    })
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T12:42:21.573

我只需要破解插件即可达到您要求的相同结果。只需更换

```
jQuery(new_elem).appendTo(target); 
```

在 scrollExtend.js 文件中：

```
jQuery(new_elem.html()).appendTo(target); 
```

这样你就可以绕过额外的“div”添加到你的 DOM

我希望我不会（太）迟到！;)

# javascript - 是否可以从一长串文本中自动提取随机“标签”？

> ID：12372258
> 
> 赞同：0
> 
> 时间：2012-09-11T14:39:53.627
> 
> 标签：javascript, python, tags

我在想，如果用户提交消息并单击“建议标签”按钮，则会分析他们的消息，并在表单字段中填充来自他们帖子的伊萨卡随机词。

是否有可能在可扩展的级别上做到这一点？JavaScript 是否能够处理它或更好地将 Ajax 转换回 python？

我在想某些常用词会被排除在外（a、the 和等），也许 10 个最长的词或只是随机的不常用词会被添加到像“tag1、tag2、tag3”这样的表单字段中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T14:41:40.813

当然有可能，您几乎描述了要测试的算法，并且它似乎不包含任何明显不可计算的步骤：

1.  将消息拆分为单词
2.  过滤掉常用词
3.  按长度对单词进行排序
4.  选择前十名并将它们作为标签呈现

不确定您所说的“可扩展级别”是什么意思，这对我来说听起来像是客户端。除非消息很长，即不是由人输入的，否则我认为这样做不会有任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T14:44:42.373

同意@unwind ，这取决于文本的内容长度和您获取标签的算法（可扩展性）

# c# - Fluent NHibernate 中使用复合 ID 的一对多映射

> ID：12372261
> 
> 赞同：1
> 
> 时间：2012-09-11T14:40:01.207
> 
> 标签：c#, fluent-nhibernate, nhibernate-mapping, composite-key

我在使用双方的复合键进行一对多映射时遇到问题。

这是我到目前为止所拥有的：

```
public class OneSide
{
    public virtual int A { get; set; }//-A,B,C,D together form primary key
    public virtual int B { get; set; }
    public virtual int C { get; set; }
    public virtual int D { get; set; }
    public virtual int OtherData { get; set; }
    public virtual IList<ManySide> Ls { get; set; }
}

public class OneSideMap : ClassMap<OneSide>
{
    public OneSideMap()
    {
        LazyLoad();

        CompositeId().KeyProperty(x => x.A).KeyProperty(x => x.B).KeyProperty(x => x.C).KeyProperty(x => x.D);

        Map(x => x.OtherData).Not.Nullable();
        HasMany(x => x.Ls).KeyColumns.Add("A", "B", "C", "D").Inverse().Cascade.All();
    }
}

public class ManySide
{
    public virtual OneSide OneSide { get; set; }
    public virtual int A { get; set; }//-A,B,C,D,E together form primary key
    public virtual int B { get; set; }
    public virtual int C { get; set; }
    public virtual int D { get; set; }
    public virtual int E { get; set; }
    public virtual int OtherData2 { get; set; }
}

public class ManySideMap : ClassMap<ManySide>
{
    public ManySideMap()
    {
        LazyLoad();

        CompositeId().KeyReference(x => x.A).KeyReference(x => x.B).KeyReference(x => x.C).KeyReference(x => x.D).KeyProperty(x => x.E);

        Map(x => x.OtherData2).Not.Nullable();
        References(x => x.OneSide).Columns("A", "B", "C", "D").Cascade.All();
    }
} 
```

这是数据库结构：

```
table: OneSide:
int A;
int B;
int C;
int D;
int OtherData;

table: ManySide:
int A;
int B;
int C;
int D;
int E;
int OtherData2; 
```

我知道这是不正确的，我现在不知道出了什么问题，因为我像几个小时前开始学习 NHibernate。有人可以指出我的代码有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T07:06:25.487

对 oneSide 的引用必须是 keyreference，因为您不能将列映射两次。

```
public class ManySideMap : ClassMap<ManySide>
{
    public ManySideMap()
    {
        LazyLoad();

        CompositeId()
            .KeyReference(x => x.OneSide, "A", "B", "C", "D")
            .KeyProperty(x => x.E);

        Map(x => x.OtherData2).Not.Nullable();
    }
} 
```

从 ManySide 访问 B 列非常简单，`manysideObj.OneSide.B`只要您只访问构成主键的一侧属性，它甚至不必加载 OneSide。

# jmockit - 如何使用 JMockit 模拟具有泛型的继承方法

> ID：12372267
> 
> 赞同：2
> 
> 时间：2012-09-11T14:40:07.977
> 
> 标签：jmockit

我有这个抽象类：

```
public abstract class Accessor<T extends Id, U extends Value>
{
   public U find(T id)
   {
        // let's say
        return getHelper().find(id);
   }
} 
```

和一个实现：

```
public FooAccessor extends Accessor<FooId,Foo>
{
    public Helper getHelper
    {
        // ...
        return helper;
    }
} 
```

我想模拟对 FooAccessor.find 的调用。这：

```
@MockClass(realClass=FooAccessor.class)
static class MockedFooAccessor
{
    public Foo find (FooId id)
    {
        return new Foo("mocked!");
    }
} 
```

将失败并出现此错误：

```
java.lang.IllegalArgumentException: Matching real methods not found for the following mocks of MockedFooAccessor:
Foo find (FooId) 
```

我明白为什么......但我不知道我还能怎么做。

注意：是的，我可以模拟 getHelper 方法，得到我想要的；但这更像是一个了解 JMockit 和这个特殊案例的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T20:10:05.560

我发现解决这个问题的唯一方法是使用字段

```
@Test
public void testMyFooMethodThatCallsFooFind(){
MyChildFooClass childFooClass = new ChildFooClass();
String expectedFooValue = "FakeFooValue";
new NonStrictExpectations(){{
 setField(childFooClass, "fieldYouStoreYourFindResultIn", expectedFooValue);
}};

childFooClass.doSomethingThatCallsFind();

// if your method is protected or private you use Deencapsulation class 
// instead of calling it directly like above
Deencapsulation.invoke(childFooClass, "nameOfFindMethod", argsIfNeededForFind);
// then to get it back out since you used a field you use Deencapsulation again to pull out the field
String actualFoo = Deencapsulation.getField(childFooClass, "nameOfFieldToRunAssertionsAgainst");

assertEquals(expectedFooValue ,actualFoo);

} 
```

childFooClass 不需要被模拟，也不需要模拟父级。

在不了解您的具体案例的情况下，此策略是我利用 jMockit 解封装的最佳方式，可以在不牺牲可见性的情况下测试很多东西。我知道这不能回答直接的问题，但我觉得你应该从中得到一些东西。随意投反对票并批评我社区。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T17:31:05.677

老实说，我发现它与嘲笑普通课程没有任何不同。一种方法是告诉 JMockit 只模拟`find`方法并使用`Expectations`块来提供替代实现。像这样：

```
abstract class Base<T, U> {
    public U find(T id) {
        return null;
    }
}

class Concrete extends Base<Integer, String> {
    public String work() {
        return find(1);
    }
}

@RunWith(JMockit.class)
public class TestClass {

    @Mocked(methods = "find")
    private Concrete concrete;

    @Test
    public void doTest() {

        new NonStrictExpectations() {{
            concrete.find((Integer) withNotNull());
            result = "Blah";
        }}

        assertEquals("Blah", concrete.work());
    }
} 
```

希望能帮助到你。

# asp.net - 从 asp.net 2.0 更改为 asp.net 4.0 导致 Web 服务失败

> ID：12372268
> 
> 赞同：0
> 
> 时间：2012-09-11T14:40:12.190
> 
> 标签：asp.net, web-services, iis-6

这是一个现有的 asp.net 应用程序 (VS 2008)，它调用 Web 服务。一切正常。最近，IIS（版本 6）改为使用 ASP.net 4.0（来自 asp.net 2.0），现在所有的 Web 服务调用都失败了。

应用程序日志中的错误指出“请求的表单身份验证失败。原因：提供的票无效'

我是这个应用程序的新手，只是不知道如何解决这个问题。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T14:43:55.290

所以您的应用程序是 .net 2.0 应用程序，并且您将站点版本更改为 .net 4？为什么您的网站升级到 .Net 4？将您的应用程序升级到 .Net 4，或者将您的站点降级到 .Net 2。您不能让它们不匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T14:47:48.303

你尝试过什么吗？看看[这里](http://www.aspnettricks.com/archives/forms-authentication-failed-for-the-request-reason-the-ticket-supplied-was-invalid/)。显然它与 IIS 7.5 有关

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T15:21:48.457

您也必须升级您的应用程序。基本上，您需要将您的引用从 .net 2.0 更改为 net 4 dll。

# dependency-management - Tycho 构建的 Eclipse RCP 包含不需要的可选依赖项

> ID：12372269
> 
> 赞同：7
> 
> 时间：2012-09-11T14:40:20.160
> 
> 标签：dependency-management, p2, tycho

这是第谷社区经常被问到的一个问题：

> 我将我的 Eclipse RCP 构建从 [*以前的技术*，例如`eclipse-application`/PDE 无头构建/...] 迁移到使用打包类型[使用 Tycho 构建产品的新推荐方式](http://wiki.eclipse.org/Tycho/Packaging_Types#Creating_Product_Zip_Files)`eclipse-repository`。现在我的发行版包含比以前更多的捆绑包。
> 
> 问题似乎是第谷引入了我的产品中包含的捆绑包的可选依赖项。我怎样才能防止这种情况？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-11T14:40:20.160

Tycho 的`eclipse-repository`打包类型使用相同的技术（称为*p2 ）*[构建产品发行版](http://wiki.eclipse.org/Tycho/Packaging_Types#Creating_Product_Zip_Files)，例如，在将新功能安装到 Eclipse IDE 时也使用这种技术。这样做的好处是，与其他构建技术不同，您不需要手动指定产品中所需捆绑包的所有依赖项，但 Tycho/p2 会自动为您包含它们。（这很重要，否则捆绑软件不会在运行时启动。）

 *另一方面，这也可能是一个缺点：Tycho/p2 还包括某些您希望从产品中排除的可选依赖项。

没有选项告诉 Tycho 不包含任何可选依赖项（因为 p2 没有此选项）。但是，您可以识别不需要的可选捆绑包，并使用以下配置将它们明确排除在[目标平台之外：](http://wiki.eclipse.org/Tycho/Target_Platform)

```
<plugin>
   <groupId>org.eclipse.tycho</groupId>
   <artifactId>target-platform-configuration</artifactId>
   <version>${tycho-version}</version>
   <configuration>
      <filters>
         <filter>
            <type>eclipse-plugin</type>
            <id>unwanted.bundle.id</id>
            <removeAll />
         </filter>
      </filters>
   </configuration>
</plugin> 
```

然后产品构建将不再看到排除的捆绑包，并将从安装中忽略它。

注意：如果在添加上述配置后出现依赖解析错误，则说明某些东西非可选地需要捆绑包。尽管阅读起来有点棘手，但错误消息会告诉您从您正在构建的东西到已删除的包的依赖链。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-12T12:43:31.173

我偶然发现了从我的 RCP 构建中排除 com.ibm.icu 的答案，并想发布更新。

Tycho 可以配置为暂时忽略可选依赖项，请参阅[https://wiki.eclipse.org/Tycho/Release_Notes/0.14](https://wiki.eclipse.org/Tycho/Release_Notes/0.14)

```
<plugin>
<groupId>org.eclipse.tycho</groupId>
<artifactId>target-platform-configuration</artifactId>
<version>${tychoVersion}</version>
<configuration>
  <dependency-resolution>
    <optionalDependencies>ignore</optionalDependencies>
  </dependency-resolution>
</configuration> 
```*

# dataset - 删除 SAS 数据集

> ID：12372271
> 
> 赞同：3
> 
> 时间：2012-09-11T14:40:22.377
> 
> 标签：dataset, sas

在我的 SAS 程序完成后，我想删除几个数据集。我正在使用这个语句：

```
proc datasets lib=temp;
    delete xtemp2&sysparm trades&sysparm tickers&sysparm;
quit;
run; 
```

在哪里

`&sysparm`计算为一个数字和`temp`一个`libname`。但是，我在日志文件中收到以下错误：

```
142             delete xtemp2&sysparm trades&sysparm tickers&sysparm;
            ______
            180
ERROR 180-322: Statement is not valid or it is used out of proper order. 
```

有人知道这个问题吗？

编辑：

```
Here is some more of the log file to address the answer:
NOTE: "OUT_CSV" file was successfully created.
NOTE: PROCEDURE EXPORT used (Total process time):
      real time           0.27 seconds
      cpu time            0.12 seconds

142             delete xtemp2&sysparm trades&sysparm tickers&sysparm;
        ______
        180
ERROR 180-322: Statement is not valid or it is used out of proper order. 
```

这是proc之前的代码：

```
proc export data=temp.xtemp2&sysparm outfile=out_csv dbms=csv replace;
run;

proc datasets lib=temp;
    delete xtemp2&sysparm trades&sysparm tickers&sysparm;
quit;
run; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-11T14:58:04.107

您的代码没有明显错误，除了不需要最后一次 RUN （对于 PROC DATASETS 来说，QUIT 就足够了）。我使用这些参数创建了数据集，并且提供的代码运行良好。当您在 proc 语句之前有一些东西导致 proc 语句无法编译时，通常会出现该错误。例如：

```
*
proc datasets lib=temp;
    delete xtemp2&sysparm trades&sysparm tickers&sysparm;
quit; 
```

会导致您提供的错误消息，以及几乎所有其他未正确结束的错误消息（尽管大多数其他这种性质的错误会导致前面的语句出现第二条错误消息）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T17:40:28.993

您还可以使用以下运行速度快但已被视为“已弃用”的程序：

```
 Proc Delete Data = Temp._all_;    *This will delete all datasets in temp;
 run; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T15:40:04.580

查看您的日志，您似乎没有执行您的`PROC DATASETS`语句，因此“删除”语句出现在开放代码中。正如乔所说，您的代码中可能有一个杂散字符。如果没有，请从您的 SAS 日志中重新发布更多信息。包括上一步边界中的所有内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T15:36:08.350

我怀疑 SAS 无法解析您带入 &sysparm 宏的任何有价值的东西。你检查过它的价值吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-12T11:51:52.983

大多数开发人员已经很好地回答了这个问题。但是，我想提供更多信息。

实际上，运行或退出步骤是可选的。你把它表示为数据步骤ua调查的完成。

SAS 过程步骤在遇到以下情况之一时终止：

*   “下一个”DATA 或 PROC 步骤的开始
*   达到明确的步骤边界（RUN；或 QUIT；视情况而定）
*   如果您以“批处理”模式提交作业（例如在大型机上的 SYSIN DD * 中）并且遇到输入文件的结尾（在大型机上将是 */）。

除此之外，您可以参考以下链接... [https://communities.sas.com/t5/Base-SAS-Programming/Why-use-QUIT-with-proc-SQL/td-p/97992](https://communities.sas.com/t5/Base-SAS-Programming/Why-use-QUIT-with-proc-SQL/td-p/97992)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-05-04T11:57:58.740

我正在使用这个

```
%macro drop / parmbuff store source
    DES="drop(table1,...tableN): Drops tables if they exists";
    %let num=1;
    %let stepneeded=0;
    %let stepstarted=0;
    %let dsname=%scan(&syspbuff,&num,',()');
    %do %while(&dsname ne); 
        %if %sysfunc(exist(&dsname)) %then %do;
            %let stepneeded=1;
            %if (&stepstarted eq 0) %then %do;
                proc sql;
                %let stepstarted=1;
            %end;
                drop table &dsname;
        %end;
        %if %sysfunc(exist(&dsname,view)) %then %do;
            %let stepneeded=1;
            %if (&stepstarted eq 0) %then %do;
                proc sql;
                %let stepstarted=1;
            %end;
                drop view &dsname;
        %end;
        %let num=%eval(&num+1);
        %let dsname=%scan(&syspbuff,&num,',()');
    %end;
    %if &stepstarted %then %do;
        quit;
    %end;
%mend drop; 
```

那么就`%drop(work.mytable);`

# css - CSS 网格布局

> ID：12372272
> 
> 赞同：0
> 
> 时间：2012-09-11T14:40:23.390
> 
> 标签：css, css-float

我想创建一个如下图所示的 CSS 布局：

[http://i47.tinypic.com/34y4ewk.png](http://i47.tinypic.com/34y4ewk.png)

我已经设法让它工作了，但我无法得到图像旁边的文本，如此处所示[http://jsfiddle.net/jVwf4/](http://jsfiddle.net/jVwf4/)

有关如何获取图像旁边的文本的任何建议？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T14:44:28.363

您需要翻转 and 标签的顺序`<p>`并为标签`<img>`赋予css 属性。`<img>``float: left;`

[http://jsfiddle.net/wG9uH/5/](http://jsfiddle.net/wG9uH/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T14:44:44.827

你可以像这样制作你的 HMTL 块：

```
<div>
    <p class="title">Cape Town<img width="100" height="75" src="http://www.geonames.org/img/wikipedia/131000/thumb-130255-100.jpg"></p>
</div> 
```

然后像这样将图像向左浮动：

```
.title img{
    float: left;
    margin-right: 1em;
} 
```

# macos - 窗口可可 xib 的问题

> ID：12372279
> 
> 赞同：2
> 
> 时间：2012-09-11T14:40:49.600
> 
> 标签：macos, cocoa, xib

我正在开发一个 MAC osx 应用程序。我创建了一个具有不同视图的窗口：滚动视图、选项卡视图等，创建的窗口有问题。如果我运行应用程序，

第一次 - 根据 XIB 中给出的尺寸创建窗口。

第二次 - 如果我停止它并再次运行它，则窗口被压缩 - 表格视图被压缩。因此，其他所有项目都不在正确的位置。

第三次 - 如果我再次运行它，那么一切看起来都很好，就像第一次一样。

第四次 - 像第二次一样被破坏。

...像这样，我在交替时间得到奇怪的窗口输出。

请帮忙！！

# python - 无法在 Python 中比较字符串

> ID：12372281
> 
> 赞同：2
> 
> 时间：2012-09-11T14:40:53.610
> 
> 标签：python, string, compare, match, readline

我有这段代码应该打开并读取两个文本文件，并在两个文本文件中都存在一个单词时匹配。匹配通过打印“SUCESS”并将单词写入 temp.txt 文件来表示。

```
dir = open('listac.txt','r')
path = open('paths.txt','r')
paths = path.readlines()
paths_size = len(paths)
matches = open('temp.txt','w')
dirs = dir.readlines()

for pline in range(0,len(paths)):
        for dline in range(0,len(dirs)):
                p = paths[pline].rstrip('\n').split(".")[0].replace(" ", "")
                dd = dirs[dline].rstrip('\n').replace(" ", "")
                #print p.lower()
                #print dd.lower()
                if (p.lower() == dd.lower()):
                        print "SUCCESS\n"
                        matches.write(str(p).lower() + '\n') 
```

listac.txt 被格式化为

```
/teetetet
/eteasdsa
/asdasdfsa
/asdsafads
.
. 
...etc 
```

path.txt 格式为

```
/asdadasd.php/asdadas/asdad/asd
/adadad.html/asdadals/asdsa/asd
.
.
...etc 
```

因此，我使用 split 函数来获取点之前的第一个 /asadasda（在 paths.txt 中）。问题是这些词似乎永远不会匹配，我什至在每个 IF 语句之前打印出每个比较并且它们是相等的，Python 在比较字符串之前还有其他事情吗？

=======

感谢大家的帮助。正如你所建议的，我清理了代码，所以它最终是这样的：

```
dir = open('listac.txt','r')
path = open('paths.txt','r')
#paths = path.readlines()
#paths_size = len(paths)

for line in path:
        p = line.rstrip().split(".")[0].replace(" ", "")
        for lines in dir:
                d = str(lines.rstrip())
                if p == d:
                        print p + " = " + d 
```

显然，在进入第二个 for 循环之前声明和初始化 p 会对以后的比较产生影响。当我在第二个 for 循环中声明 p 和 d 时，它不起作用。我不知道原因，但如果有人这样做，我正在听:)

再次感谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-11T14:55:57.450

当我们将整个数据文件读入内存时，为什么不尝试使用`sets`并获取交集呢？：

```
def format_data(x):
    return x.rstrip().replace(' ','').split('.')[0].lower()

with open('listac.txt') as dirFile:
     dirStuff = set( format_data(dline) for dline in dirFile )

with open('paths.txt') as pathFile:
     intersection = dirStuff.intersection( format_data(pline) for pline in pathFile )

for elem in intersection:
    print "SUCCESS\n"
    matches.write(str(elem)+"\n") 
```

我`format_data`对两个数据集使用了相同的函数，因为它们看起来或多或少相同，但如果你愿意，你可以使用多个函数。另请注意，此解决方案仅将两个文件中的 1 个文件读入内存。与对方的交点应该懒惰地计算。

正如评论中所指出的，这并没有试图保留订单。但是，如果您确实需要保留订单，请尝试以下操作：

```
<snip>
...
</snip>

with open('paths.txt') as pathFile:
    for line in pathFile:
        if format_line(line) in dirStuff:
           print "SUCCESS\n"
           #... 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-11T14:50:32.757

我必须查看更多您的数据集才能了解您为什么没有得到匹配。我已将您的一些代码重构为更加*pythonic*。

```
dirFile = open('listac.txt','r')
pathFile = open('paths.txt','r')
paths = pathFile.readlines()
dirs = dirFile.readlines()

matches = open('temp.txt','w')

for pline in paths:
    p = pline.rstrip('\n').split(".")[0].replace(" ", "")
    for dline in dirs:
        dd = dline.rstrip('\n').replace(" ", "")
        #print p.lower()
        #print dd.lower()
        if p.lower() == dd.lower():
            print "SUCCESS\n"
            matches.write(str(p).lower() + '\n') 
```

# mysql - 不显示重复行 SQLITE

> ID：12372282
> 
> 赞同：-3
> 
> 时间：2012-09-11T14:40:55.373
> 
> 标签：mysql, sql, database, sqlite

**我有一个像这样的查询：**

```
SELECT coc.title, inc.name FROM cocktail coc, ingredients inc WHERE coc.id = 1... 
```

此查询只是一个简短的示例

**结果是：**
标题：自由古巴，配料名称：可乐
标题：自由古巴，配料名称：朗姆酒
标题：自由古巴，配料名称：Limette
*我得到了 3 次标题，因为这种鸡尾酒有 3 个增量。
如果我使用这样的结果集，我会得到 3 倍的标题作为标题。*

**但我想要：**
标题：Cuba Libre，成分名称：可乐
成分名称：朗姆酒
成分名称：石灰
*我希望在我的结果集中只有一次标题和所有成分。*

我有可能在一个查询中执行此操作，还是我必须在之后仅针对成分执行另一个请求？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T15:16:44.473

如果您想要同一行中的项目，那么您可以使用[`GROUP_CONCAT()`](http://www.sqlite.org/lang_aggfunc.html)：

```
select c.c_name, group_concat(i.i_name) ingre
from cocktail c
inner join ingredients i
  on c.id = i.c_id
where c.id = 1
group by c.c_name 
```

# 请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!7/f2c10/4)

# visual-studio - 自动重新生成依赖于多个文件的文本模板

> ID：12372285
> 
> 赞同：4
> 
> 时间：2012-09-11T14:41:06.793
> 
> 标签：visual-studio, code-generation, project, t4

我的情况：

*   我有一个包含 3 个文件的 VS 2010 项目：

    *   内容.txt
    *   生成器.tt
    *   generated.js（通过 T4 生成）
*   项目文件包含它们：

    ```
    <None Include="generator.tt">
      <Generator>TextTemplatingFileGenerator</Generator>
      <LastGenOutput>generated.js</LastGenOutput>
    </None>
    <Content Include="content.txt" />
    <Content Include="generated.js">
      <AutoGen>True</AutoGen>
      <DesignTime>True</DesignTime>
      <DependentUpon>generator.tt</DependentUpon>
    </Content>
    ```

*   每次更改 generator.tt 都会重新生成 generated.js

有没有办法在更改其他文件之一时自动重新生成 generate.js（不使用任何插件）？我试图简单地添加另一个 DependentUpon 元素。但是VS只处理最后一个......

谢谢你的想法

编辑：

我忘记了一个细节： - 该解决方案必须与 TFS 一起使用。因此，当文件被修改时，它必须执行“Check Out for Edit...”。

# ios - 谁能帮我设置适用于 iOS 的 Salesforce 移动 SDK？

> ID：12372289
> 
> 赞同：3
> 
> 时间：2012-09-11T14:41:19.973
> 
> 标签：ios, mobile, sdk, salesforce

我在让这个东西工作时遇到了可怕的事情。我花了两天时间阅读 Salesforce 网站上的文档、分布式 SDK 中的示例代码，而且我的头通常都在碰壁。

最令人沮丧的部分是我认为我只是错过了登录屏幕，但我找不到任何可以告诉我如何制作的东西。据我所知，它只是一个指向 SF 登录页面的 UIWebView。

到目前为止，这是我能够弄清楚的：

1.  [将 SDK 添加到我的项目（SalesforceSDK、SalesforceOAuth、RestKit）并链接到Git 自述](https://github.com/forcedotcom/SalesforceMobileSDK-iOS/blob/master/readme.md#using-the-native-rest-sdk-in-an-existing-project)文件中提到的所有库。
2.  包含`"SFRestAPI.h"`在我用来从服务器发送和接收数据的服务器通信类中。
3.  使用随 SDK 分发的 XCode 模板中的代码调用 SFRestRequest：

    ```
    SFRestRequest *request = [[SFRestAPI sharedInstance] requestForQuery:@"SELECT Name FROM User LIMIT 10"];
    [[SFRestAPI sharedInstance] send:request delegate:self]; 
    ```

4.  添加了委托方法：

`#pragma mark - Salesforce REST API delegate methods`

 ````
- (void)request:(SFRestRequest *)request didLoadResponse:(id)jsonResponse
{
    NSLog(@"%@", jsonResponse);
}

- (void)request:(SFRestRequest *)request didFailLoadWithError:(NSError*)error
{
    NSLog(@"%@", error);
}

- (void)requestDidCancelLoad:(SFRestRequest *)request
{
    NSLog(@"%@", request);
}

- (void)requestDidTimeout:(SFRestRequest *)request
{
    NSLog(@"%@", request);
} 
```` 

`5\. 在控制台看到这个：`

 ````
`2012-09-11 10:23:44.128 ClientApp[39697:c07] SFRestAPI::send: <SFRestRequest 0xd4a9cb0 
endpoint: /services/data 
method: GET 
path: /v23.0/query 
queryParams: {
  "q" : "SELECT Name FROM User LIMIT 10"
}` 
```

没有调用 SFRestRequest 的委托方法。

这是没有用的：

### 使我的应用程序委托 SFNativeRestAppDelegate 的子类

这产生了大约 12 个重复符号错误：

```
duplicate symbol _OBJC_CLASS_$_SFNativeRestAppDelegate in:
    /Volumes/Wallace/Users/gromitt/Library/Developer/Xcode/DerivedData/ClientApp-bpccblcllzkzvudxtwutuqliagld/Build/Intermediates/ClientApp.build/Debug-iphonesimulator/ClientApp.build/Objects-normal/i386/SFNativeRestAppDelegate.o
    /Volumes/Wallace/Users/gromitt/Documents/Out to Lunch/ iOS Apps/ClientApp/ClientApp/dependencies/SalesforceSDK/libSalesforceSDK.a(SFNativeRestAppDelegate.o)
duplicate symbol _OBJC_IVAR_$_SFNativeRestAppDelegate._authViewController in:
    /Volumes/Wallace/Users/gromitt/Library/Developer/Xcode/DerivedData/ClientApp-bpccblcllzkzvudxtwutuqliagld/Build/Intermediates/ClientApp.build/Debug-iphonesimulator/ClientApp.build/Objects-normal/i386/SFNativeRestAppDelegate.o
    /Volumes/Wallace/Users/gromitt/Documents/Out to Lunch/ iOS Apps/ClientApp/ClientApp/dependencies/SalesforceSDK/libSalesforceSDK.a(SFNativeRestAppDelegate.o)
duplicate symbol _OBJC_IVAR_$_SFNativeRestAppDelegate._viewController in:
    /Volumes/Wallace/Users/gromitt/Library/Developer/Xcode/DerivedData/ClientApp-bpccblcllzkzvudxtwutuqliagld/Build/Intermediates/ClientApp.build/Debug-iphonesimulator/ClientApp.build/Objects-normal/i386/SFNativeRestAppDelegate.o
    /Volumes/Wallace/Users/gromitt/Documents/Out to Lunch/ iOS Apps/ClientApp/ClientApp/dependencies/SalesforceSDK/libSalesforceSDK.a(SFNativeRestAppDelegate.o)
duplicate symbol _OBJC_IVAR_$_SFNativeRestAppDelegate._window in:
    /Volumes/Wallace/Users/gromitt/Library/Developer/Xcode/DerivedData/ClientApp-bpccblcllzkzvudxtwutuqliagld/Build/Intermediates/ClientApp.build/Debug-iphonesimulator/ClientApp.build/Objects-normal/i386/SFNativeRestAppDelegate.o
    /Volumes/Wallace/Users/gromitt/Documents/Out to Lunch/ iOS Apps/ClientApp/ClientApp/dependencies/SalesforceSDK/libSalesforceSDK.a(SFNativeRestAppDelegate.o)
duplicate symbol _OBJC_METACLASS_$_SFNativeRestAppDelegate in:
    /Volumes/Wallace/Users/gromitt/Library/Developer/Xcode/DerivedData/ClientApp-bpccblcllzkzvudxtwutuqliagld/Build/Intermediates/ClientApp.build/Debug-iphonesimulator/ClientApp.build/Objects-normal/i386/SFNativeRestAppDelegate.o
    /Volumes/Wallace/Users/gromitt/Documents/Out to Lunch/ iOS Apps/ClientApp/ClientApp/dependencies/SalesforceSDK/libSalesforceSDK.a(SFNativeRestAppDelegate.o)
duplicate symbol _kDefaultLoginHost in:
    /Volumes/Wallace/Users/gromitt/Library/Developer/Xcode/DerivedData/ClientApp-bpccblcllzkzvudxtwutuqliagld/Build/Intermediates/ClientApp.build/Debug-iphonesimulator/ClientApp.build/Objects-normal/i386/SFNativeRestAppDelegate.o
    /Volumes/Wallace/Users/gromitt/Documents/Out to Lunch/ iOS Apps/ClientApp/ClientApp/dependencies/SalesforceSDK/libSalesforceSDK.a(SFAccountManager.o)
ld: 6 duplicate symbols for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

任何帮助表示赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T11:36:02.533

目标-> 构建设置-> 其他链接器标志

正如在 Rest Kit 教程中指定的那样，我们更改添加了一个名为`-ObjC-all_load`now edit 的标志，它只显示`-ObjC`，然后应用程序就像一个魅力一样工作。

希望这对那些将来面临这个问题的人有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T13:18:19.837

所以这有点尴尬，但我不希望人们一直试图回答这个问题，所以这里是：

我在我的应用程序中添加了两个 SFNativeAppDelegate.h 副本。我正在查看 SF Mobile SDK 中包含的文件，我一定跳过了它。所以我第二次添加了它，这就是我的问题开始的时候。

我现在可以工作了。这是我所做的：

1.  使用 SalesForce 项目模板创建本机应用程序。
2.  在 Finder 中转到您的本机应用程序目录。将`dependencies`目录复制到*现有*项目中。
3.  在 XCode 中打开 Native 项目并将 Settings.bundle 复制到现有项目中。抓住`SFAuthorizingViewController.xib`你在那里的时间。关闭本机项目。你不再需要它了。
4.  打开现有应用的 plist 文件。添加一个名为 的键`SFDCOAuthLoginHost`，并将其设置为 test.salesforce.com 或 login.salesforce.com
5.  在您现有的应用程序委托中，`SFNativeAppDelegate.h`包含`SFOAuthCoordinator.h`和 `SFOAuthCredentials.h`
6.  从此更改接口声明行：

    ```
    @interface YourAppDelegate : UIResponder <UIApplicationDelegate> 
    ```

    ...对此：

    ```
    @interface YourAppDelegate : SFNativeRestAppDelegate 
    ```

7.  向 YourAppDelegate 添加两个属性：

    ```
    @property (nonatomic, readonly) SFOAuthCoordinator *coordinator;
    @property (nonatomic, retain) SFAuthorizingViewController *authViewController; 
    ```

8.  转到 YouAppDelegate.m。添加以下行：

    ```
    // Fill these in when creating a new Remote Access client on Force.com
    static NSString *const RemoteAccessConsumerKey = @"...yourConsumerKeyGoesHere...";
    static NSString *const OAuthRedirectURI = @"https://test.salesforce.com/services/oauth2/success"; 
    ```

9.  也添加这些方法（授权协调器是我缺少的秘诀）

    ```
     #pragma mark - Salesforce.com login helpers

        - (NSString*)remoteAccessConsumerKey {
            return RemoteAccessConsumerKey;
        }

        - (NSString*)oauthRedirectURI {
            return OAuthRedirectURI;
        }

        -(NSString *)oauthLoginDomain {
            return @"test.salesforce.com";
        }

        -(void)login{
           [self.coordinator authenticate];
        }

        - (void)logout {
            [self.coordinator revokeAuthentication];
            [self.coordinator authenticate];
        }

        - (void)loggedIn {
            //provide the Rest API with a reference to the coordinator we used for login
            [[SFRestAPI sharedInstance] setCoordinator:self.coordinator];
            //[[SFRestAPI sharedInstance] setApiVersion:@"24.0"];
        }

        - (UIViewController*)newRootViewController {
            NSLog(@"You must override this method in your subclass");
            [self doesNotRecognizeSelector:@selector(newRootViewController)];
            return nil;
        }

        - (SFOAuthCoordinator*)coordinator {
            //create a new coordinator if we don't already have one
            if (nil == _coordinator) {

                NSString *appName = [[[NSBundle mainBundle] infoDictionary] objectForKey:(NSString*)kCFBundleNameKey];
                NSString *loginDomain = [self oauthLoginDomain];
                NSString *accountIdentifier = [self userAccountIdentifier];
                //here we use the login domain as part of the identifier
                //to distinguish between eg  sandbox and production credentials
                NSString *fullKeychainIdentifier = [NSString stringWithFormat:@"%@-%@-%@",appName,accountIdentifier,loginDomain];

                SFOAuthCredentials *creds = [[SFOAuthCredentials alloc]
                                             initWithIdentifier:fullKeychainIdentifier
                                             clientId: [self remoteAccessConsumerKey] encrypted:NO ];

                creds.domain = loginDomain;
                creds.redirectUri = [self oauthRedirectURI];

                SFOAuthCoordinator *coord = [[SFOAuthCoordinator alloc] initWithCredentials:creds];
                coord.scopes = [[self class] oauthScopes];

                coord.delegate = self;
                _coordinator = coord;
            }

            return _coordinator;
        } 
    ```

*现在*您已准备好使用 SFRestAPI 进行调用。如果用户尚未登录，第一次尝试使用时会出现 SalesForce 身份验证页面。

感谢所有试图提供帮助的人。再次，超级尴尬。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T19:02:53.270

让我们从`SFNativeRestAppDelegate`问题开始，因为最终，您希望从该类继承，以便您可以“免费”获得身份验证。

假设您实际上并没有在您开发的应用程序中的某个地方定义 SFNativeRestAppDelegate，看起来您可能存在导致您所看到的冲突的构建状态问题。当我在 DerivedData 文件夹中看到引用的静态库和随机符号之间的重复符号问题时，我通常会采取以下措施：

1.  关闭 Xcode。
2.  完全清除 DerivedData（`rm -rf ~/Library/Developer/Xcode/DerivedData/*`——这是临时构建数据，将在您的下一次 Xcode 构建中重新生成）。
3.  或者，删除我的应用程序 ( ) 的 Xcode 项目状态数据`rm -rf MyProjectDir/MyProjectDir.xcodeproj/project.xcworkspace/ MyProjectDir/MyProjectDir.xcodeproj/xcuserdata/`，以确保我的项目状态是干净的。

当您能够从 SFNativeRestAppDelegate 继承时，所有身份验证链接都应该在幕后发生，包括设置`[SFRestAPI sharedInstance]`对服务进行经过身份验证的调用所需的凭据。看起来无法从 SFNativeRestAppDelegate 继承是您问题的症结所在。完成后，您为 REST API 访问描述的模式看起来是正确的。

如果您有进一步的后续问题，您还可以在 developerforce.com 上咨询[移动板上](http://boards.developerforce.com/t5/Mobile/bd-p/mobile)的人员。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T16:26:23.033

您是否使用 SFRestAPI 委托设置了类？

@interface GSK_SFADataSyncManager : NSObject **< SFRestDelegate >**

```
SFRestRequest *request = [[SFRestAPI sharedInstance] requestForQuery:query];
[[SFRestAPI sharedInstance] send:request delegate:self]; 
```

尝试从构建设置中清除搜索路径...您是否还有其他库？`

# jquery - jQuery在点击事件上发送隐藏字段的值

> ID：12372290
> 
> 赞同：0
> 
> 时间：2012-09-11T14:41:23.433
> 
> 标签：jquery, buttonclick

我正在使用以下模板来显示数据库中的数据。它被重复并且多次使用相同的类。我想`onclick`在`btnDelete`.

```
<div class="Template">
    <div class="Title"></div>
    <div class="Price"></div>
    <div class="_Qty">Total Tickets:<div class="TotalQty"></div></div>
    <div class="_Qty1">Sold Tickets:<div class="UsedQty"></div></div>
    <div class="_Date">On Sale:<div class="StartDate"></div></div>
    <div class="_Date1">Sale Ends:<div class="EndDate"></div></div>
    <input type="hidden" value="8c991c10-7d88-4212-b931-5bfeff4ebcd0" />
    <input type="button" class="btnDelete" value="Remove Ticket" onclick="fnRemoveTicket(**THIS IS WHERE I NEED TO PASS HID VALUE**);"/>
    <input type="button" class="btnEdit" value="Edit Ticket"/>
</div> 
```

我不知道如何传递与按钮位于同一父级的隐藏字段的值。通常，我会选择带有某种类型的唯一选择器的按钮。然后做类似的事情`$(this).closest` or `$(this).parent`。由于我对按钮没有什么独特之处，因此我必须将它与`onclick`事件内联传递，但我不知道如何让它工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T14:45:05.413

您可以使用`prev`或`siblings`方法。

```
$('.btnDelete').click(function(){
     var val = $(this).prev().val();
     // var val = $(this).siblings("input[type='hidden']").val()
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T14:46:08.300

使用类似的东西

```
$('input.btnDelete').on('click', function(){
    var hidden = $(this).parent().find('input[type="hidden"]');
    /* actions */
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T15:00:45.543

您可以使用`siblings()`方法找到附近的元素留在同一个父级。IE：

```
 $('input.btnDelete').click(function(){
   var $hiddenVal = $(this).siblings('input[type="hidden"]').val();
   fnRemoveTicket($hiddenVal);
}); 
```

这里是可行的演示：[jsFiddle](http://jsfiddle.net/zVGNW/)

# apache - 使用基本身份验证和匿名浏览的 Apache 背后的 Artifactory

> ID：12372292
> 
> 赞同：2
> 
> 时间：2012-09-11T14:41:31.800
> 
> 标签：apache, basic-authentication, artifactory

我正在尝试在具有基本身份验证的 Apache 代理后面运行 Artifactory。我已经为其他一些 web 应用程序（Jira、Jenkins、AnthillOS）做到了这一点，但是在使用 Artifactory 时遇到了问题。Apache 配置代理 /artifactory 到独立的 Artifactory 服务器，并为 /artifactory 路径定义基本身份验证：

```
<Location "/artifactory">
  AuthUserFile /prod/data/apachePasswords
  AuthName "My Realm"
  AuthGroupFile /dev/null
  AuthType Basic
  Require valid-user
</Location> 
```

Artifactory 中激活了匿名浏览。

当我尝试通过 Web 浏览器访问时，我首先收到来自 Apache 的身份验证对话框。成功输入这些凭据后，我得到了另一个身份验证对话框，这个对话框用于“Artifactory Realm”。输入 Artifactory 帐户的凭据后，我会重新显示第一个身份验证对话框，然后循环继续。

我想得到第一个对话框，然后直接去 Artifactory 进行匿名浏览。如果我在 Apache 中禁用身份验证，我可以匿名浏览 Artifactory，但是当我在 Apache 中启用基本身份验证时，我会得到两个单独的循环身份验证对话框。有什么想法可以杀死第二个对话框吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T00:51:15.200

这周我遇到了同样的问题。“Artifactory Realm”的登录名与 Artifactory 的默认登录名相同（管理员/密码）。当您登录到“Artifactory Realm”时，它会将您登录到 Artifactory gui。我正在使用 Artifactory 2.6.5

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-12T11:16:54.897

我遇到了同样的问题，并通过取消设置 Apache 代理中的授权标头来修复它。看起来 Artifactory 对此授权标头（来自第一个对话框）感到不安，并且在第二个对话框中需要一个“好”的 Artifactory 密码。这是我的配置：

```
<Location / >
    AuthType basic
    AuthName "Apache authenticate"
    AuthUserFile /var/www/repo.domain.com/.htpasswd
    AuthGroupFile /dev/null
    Require valid-user

    RequestHeader unset Authorization

    ProxyPass http://repo.company.local:8081/artifactory/repo/
    ProxyPassReverse http://repo.company.local:8081/artifactory/repo/
</Location> 
```

要使用未设置的标头功能，必须启用 mod_headers。

# ajax - 我如何找出是什么让浏览器不断加载？

> ID：12372294
> 
> 赞同：0
> 
> 时间：2012-09-11T14:41:35.937
> 
> 标签：ajax, browser, opera

我正在使用 Opera，有时即使所有内容都已呈现，页面仍会继续加载。如何找出要加载的元素或导致正在进行的加载过程的原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T15:07:34.387

尽管所有内容似乎都已“呈现”，但页面可能仍在加载图像、JavaScript、CSS 或它引用的其他资源。浏览器执行的这个过程不被称为“ [AJAX](http://en.wikipedia.org/wiki/Ajax_%28programming%29)正如您在问题中标记的那样AJAX 是异步调用 JavaScript 来检索或提交数据而无需刷新页面。

至于检查哪些资源导致您的页面似乎仍在“加载”......

我用[Firebug](https://getfirebug.com/)的网络选项卡来查看 Firefox 中未决的资源请求。它显示了您的浏览器请求的每个资源、检索所需的时间以及整个请求和响应标头和正文。

谷歌浏览器内置了类似的东西，只需按 F12 即可调出“[开发者工具”](https://developers.google.com/chrome-developer-tools/docs/overview)”

我会假设 Opera 有类似的东西，虽然我不确定它的名字。

# jquery - 在显示之前等待所有内容加载

> ID：12372296
> 
> 赞同：3
> 
> 时间：2012-09-11T14:41:43.097
> 
> 标签：jquery

我想知道这是否是确保在显示#main div 之前加载所有图像等的好方法？

在#main div 中，我必须加载 97 张图像，有时速度不够快，因此它会在显示图像之前显示正方形。

```
$(document).ready(function(){
    $('#main').hide();
    $(window).load(function(){
        $('#main').show();
    });
}); 
```

有人可以给我一些好的建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:44:24.450

那会好的。`<div id="main">`但是，您可以使用 CSS 属性，而不是使用 jQuery 来隐藏元素：

```
#main {
    display: none;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T07:46:55.040

您可以预先加载启动页面后面的所有图像，然后在全部加载后隐藏启动页面。我目前为 73 张图片 (18mb)

检查下面链接中的答案将告诉你如何。

[https://stackoverflow.com/a/13982980/1406211](https://stackoverflow.com/a/13982980/1406211) - 包括演示

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T14:44:49.520

您可以查看延迟加载并仅加载视口（没有任何滚动的可见部分），然后（如果/何时）用户滚动其他图像显示。还将减少带宽消耗。

否则，假设您遵循标准 HTML 并为图像预加载提供宽度/高度，我不会在“暂停 UI”上投入太多精力，直到它们加载——您的布局应该保持原样在整个加载过程中，97 张图片（假设是某种缩略图）按照今天的标准应该不会花费太长时间。

后续行动：这是一个用于 jQuery的[延迟加载插件，可以](http://www.appelsiini.net/projects/lazyload)[完成我所说的](http://www.appelsiini.net/projects/lazyload/enabled.html)。（基本上是 Facebook 用它的新闻提要做什么）

# c - 无法从“request_rec”获取标头值

> ID：12372297
> 
> 赞同：1
> 
> 时间：2012-09-11T14:41:44.510
> 
> 标签：c, apache, apache2-module

## 问题

我想在我的自定义 Apache 模块中检索标头的值。（标头作为 POST 请求的一部分出现。）我正在这样做：

```
const char *myHeader = apr_table_get(r->headers_in, "MyHeader"); 
```

但是，这是给予`myHeader = NULL`。

## 细节

我在`myHeader`这里使用：

```
sprintf(query, query_template, myHeader, 2); 
```

`query`使用 DB 格式化`query_template = "call GetDelay('%s', %d)"`并在 DB 上执行。DB 将执行的查询显示为`GetDelay('(null)',2)`.

**如何检索标头值？或者我的错误是什么？**

# qt - 跨 Qt 线程共享数据

> ID：12372301
> 
> 赞同：4
> 
> 时间：2012-09-11T14:42:10.633
> 
> 标签：qt, qthread

我是 Qt 的新手，所以请原谅这个问题的简单性，但我对 Qt 线程有点困惑。假设我有 3 个线程：主要的默认 GUI 线程和我自己创建的 2 个线程（称为 WorkerThread）。我的每个 WorkerThreads 都继承自 QThread 并且是永久线程，它们经常唤醒并将数据发送到套接字并在 GUI 元素上发布状态。1) 允许 GUI 线程在 WorkerThread 对象中设置 WorkerThread 线程可以使用的数据的最佳方法是什么？2) 允许 WorkerThread 向 GUI 线程发送状态以显示给用户？3) 允许两个 WorkerThreads 使用同一个套接字？

从文档看来，当我创建一个 WorkerThread 对象时，它由创建线程拥有（除了作为新线程的 run 方法）。那么如何为新线程设置数据来执行呢？新线程使用的所有数据都必须是全局的吗？例如，我希望 GUI 允许用户为每个 WorkerThreads 选择一种数据包类型，以便在他们醒来时发送。我曾假设我会在 WorkerThread 中放置 GUI 线程将发出信号的一些插槽。当 WorkerThread 对象接收到 SetPacketType 的信号时，它将设置一个成员变量，run 方法在每次迭代时引用该变量。但是在阅读了文档之后，我不确定这是不是这样。如果 WorkerThread 对象由创建线程（在本例中为 GUI 线程）拥有，则向其发送信号不会

另外，跨线程共享套接字连接的正确技术是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T16:42:48.027

使用 Qt，在线程之间发送信息的最简单方法是使用信号和槽。Qt 自动为线程之间的连接使用排队信号（参见[Qt::ConnectionType](http://doc.qt.nokia.com/4.7/qt.html#ConnectionType-enum)），这确保了信号可以从一个线程发出，但槽将在接收器对象的线程中执行。

如果线程之间发送的数据（要完成的工作或状态信息）是 Qt 可以自动排队的东西（例如，QStrings，内置类型，如 int 和 double 等），则将信息作为参数传递给信号/插槽是发送信息的最佳方式。如果要共享大数据或复杂数据，那么您要么需要使用[qRegisterMetaType](http://doc.qt.nokia.com/4.7/qmetatype.html#qRegisterMetaType)来允许 Qt 复制数据，要么将指针传递给线程安全对象。与 Pie_Jesu 所说的不同，线程确实共享一个地址空间，因此您可以共享指针；只要确保一个线程与共享对象的交互不会干扰另一个线程的交互。

[QTcpSocket](http://doc.qt.nokia.com/4.7/qtcpsocket.html)不是线程安全的（根据 Qt 的文档，它只是可重入的），因此如果您共享套接字，您将必须负责确保线程不会以冲突的方式使用套接字。

# java - 如何在 Java 中用另一个 JPanel 替换两个 JPanel 之一？

> ID：12372302
> 
> 赞同：1
> 
> 时间：2012-09-11T14:42:10.320
> 
> 标签：java, swing, netbeans, jframe, jpanel

我为欢迎屏幕设计了一个界面，其中一个 JFrame 包含两个 JPanel（右侧的 JPanel1 和左侧的 JPanel2）。左边的按钮是切换JPanel1中的Panels。我想按下一个按钮来用另一个 JPanel 替换 JPanel1 的内容，但我不知道怎么做。请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T15:01:48.927

这是一个非常简单的示例，应该与您的描述相近。在左侧，我们有一个拥抱按钮来切换右侧面板的内容。在右侧，您有一个带有给定边框和标签的面板。当您按下按钮时，右侧的内容与另一个面板交换。

```
import java.awt.BorderLayout;
import java.awt.CardLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.FlowLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.BorderFactory;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class TestCardLayout2 {

    protected void initUI() {
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JPanel leftPanel = new JPanel(new BorderLayout());
        JLabel label = new JLabel("Left panel");
        leftPanel.add(label, BorderLayout.NORTH);
        JButton button = new JButton("Toggle right panel");
        leftPanel.add(button);
        frame.add(leftPanel, BorderLayout.WEST);

        final CardLayout cardLayout = new CardLayout();
        final JPanel rightPanel = new JPanel(cardLayout);
        rightPanel.setPreferredSize(new Dimension(200, 500));

        JPanel rightPanel1 = new JPanel(new FlowLayout(FlowLayout.LEFT));
        rightPanel1.setBorder(BorderFactory.createLineBorder(Color.RED));
        JPanel rightPanel2 = new JPanel(new FlowLayout(FlowLayout.RIGHT));
        rightPanel2.setBorder(BorderFactory.createLineBorder(Color.BLUE));
        JLabel label1 = new JLabel("Right panel 1 with a red border");
        JLabel label2 = new JLabel("Right panel 2 with a blue borer");
        rightPanel1.add(label1);
        rightPanel2.add(label2);

        rightPanel.add(rightPanel1, "panel1");
        rightPanel.add(rightPanel2, "panel2");
        frame.add(rightPanel, BorderLayout.EAST);

        button.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                cardLayout.next(rightPanel);
            }
        });
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new TestCardLayout2().initUI();
            }
        });
    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T14:54:58.823

`CardLayout`will be的替代方法`JRootPane`及其`JRootPane.setContentPane()`方法。这是一个例子：

```
final JPanel panel1 = ...;
final JPanel panel2 = ...;
boolean showingPanel1 = true;
final JRootPane rootPane = new JRootPane();
rootPane.setContentPane(panel1);
JButton switchButton = new JButton("Switch");
switchButton.addActionListener(new ActionListener() {
    public void actionPerformed(ActionEvent evt) {
        if (showingPanel1) {
            rootPane.setContentPane(panel2);
        } else {
            rootPane.setContentPane(panel1);
        }
        showingPanel = !showingPanel;
    }
}); 
```

将`rootPane`和`switchButton`组件添加到您的窗口，然后单击`switchButton`将切换出面板。

这是一个[教程](http://docs.oracle.com/javase/tutorial/uiswing/components/rootpane.html)。您应该主要关注`JRootPane.setContentPane`，教程中的其他内容不相关。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-12T13:12:28.600

我发现的最佳答案是，我将只创建一个 JFrame，并让一个大 JPanel 包含两个 JPanel（JPanelLeft 包含按钮，JPanelRight 包含按钮的功能）然后我将为每个 JButton 复制主 JPanel。当我按下任何按钮时，我将执行 (JFrame.getContentPane.removeAll) 来删除旧的 JPanel，然后是 (JFrame.getContentPane.Add(NewJPanel)。

这对我有用，并保持我想要的设计。感谢每一个人。

# c# - 专业工厂的自动注册

> ID：12372303
> 
> 赞同：1
> 
> 时间：2012-09-11T14:42:14.013
> 
> 标签：c#

我有一个处理自定义消息格式的工厂。系统中定义了几个基于这种格式的不同消息集。我正在尝试重构消息处理代码，以便消息设置为工厂“自动注册”。这将允许我们只在系统的各个部分中包含所需的消息集，并且还允许在不影响现有代码的情况下添加消息集。

注册的主要工厂类如下。

```
public class MessageFactory
{    
    internal static List<FactoryListEntry> _seriesFactories = new List<FactoryListEntry>();

    public static void RegisterSeriesFactory( long seriesId, ushort seriesVersion,
                                              ISeriesFactory factory )
    {
        MessageFactory._seriesFactories.Add( 
            new FactoryListEntry( seriesId, seriesVersion, factory ));
    }
} 
```

独特系列的自动注册类如下所示。

```
public class Series1AutoRegistration
{
    private static Series1AutoRegistration register = new Series1AutoRegistration();

    private Series1AutoRegistration()
    {
        MessageFactory.RegisterSeriesFactory( SERIES_ID,
                                              SERIES_VERSION,
                                              new Series1Factory() );

    }
} 
```

在 C++ 中，我将创建一个全局静态 Series1AutoRegistration 变量。但是，c# 不保证静态成员的初始化，直到它被使用之前，所以自动注册不会发生。有人对我如何做到这一点有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:51:27.837

你可以

1.  使用像[MEF](http://msdn.microsoft.com/en-us/library/dd460648.aspx)或[Unity](http://msdn.microsoft.com/en-us/library/ff649614.aspx)这样的框架来解决这个问题
2.  每当加载 dll 时，使用[模块初始化程序运行代码。](http://blogs.msdn.com/b/junfeng/archive/2005/11/19/494914.aspx)此功能没有 C# 支持，您需要直接按摩 IL

这个[stackoverflow问题](https://stackoverflow.com/questions/8009107/can-i-use-mef-to-create-an-extensible-factory)回答了如何使用MEF来实现类工厂

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-11T14:56:46.387

[使用单例模式](http://msdn.microsoft.com/en-us/library/ff650316.aspx)实现注册表。

获取 Instance 属性保证初始化。

# prolog - Prolog - 什么样的句子不能表达

> ID：12372309
> 
> 赞同：3
> 
> 时间：2012-09-11T14:42:31.163
> 
> 标签：prolog, logic, logic-programming, first-order-logic

我想知道你不能用 Prolog 表达什么样的句子？我一直在研究逻辑编程，并了解到与 Prolog 所基于的明确子句逻辑（Horn 子句）相比，一阶逻辑更具表现力。这对我来说是一个很难理解的话题。

因此，例如，可以表达以下句子：

```
For all cars, there does not exist at least 1 car without an engine 
```

如果有，还有其他不能表达的句子吗？如果不是，为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T15:32:01.303

您可以使用否定 ( ) 使用 Prolog 直接表达您的句子`\+`。

例如：

```
car(bmw).
car(honda).
...
car(toyota).

engine(bmw, dohv).
engine(toyota, wenkel).

no_car_without_engine:-
  \+(
    car(Car),
    \+(engine(Car, _))
  ). 
```

`no_car_without_engine/0`如果每辆车都有引擎，程序将成功，否则失败。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T20:26:40.577

Prolog 中最有问题的定义是左递归的。定义如

```
g(X) :- g(A), r(A,X). 
```

由于 Prolog 的搜索算法，最有可能失败，该算法是简单的深度优先搜索，将运行到无穷大甚至更远。

然而，号角子句的一般问题是，它们被定义为最多具有一个积极的元素。也就是说，可以找到一个仅限于这些条件的子句，例如：

```
A ∨ B 
```

因此，`∀ X: cat(X) ∨ dog(X)`不能直接表达诸如此类的事实。有一些方法可以解决这些问题，并且有一些方法可以允许这样的声明（见下文）。

阅读材料：

*   [这些幻灯片](http://webdocs.cs.ualberta.ca/~greiner/C-325/RG-Notes/prolog.ps)(p. 3) 举例说明了您无法使用 Prolog 构建哪个句子。

*   [这项工作](http://www.cl.cam.ac.uk/~jrh13/slides/pttp-26jun97/slides.pdf)（第 10 页）还解释了喇叭子句及其含义，并介绍了一种允许“无效”喇叭子句的方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-11T16:11:34.920

Prolog 是一种*编程*语言，而不是自然语言界面。

您展示的句子以一种令人费解的方式表达，以至于我很难理解它。实际上，我必须感谢 gusbro 以可以理解的方式表达它的痛苦。但他完全掩盖了**任何**编程语言在应用于自然语言时所带来的知识表示问题，甚至只是简单地**否定**一阶逻辑。这些问题是如此紧迫，以至于所选择的语言常常被认为是“不重要的”。

关于*编程*，Prolog 缺乏在 O(1)（恒定时间）内访问任何线性数据结构（即数组）的能力。然后，例如需要访问 O(1) 中的数组元素的快速排序，就不能以有效的方式实现。

但它仍然是一个图灵完备的语言，值得。那么就**没有**不能用 Prolog 表达的语句了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T10:02:44.167

因此，您正在寻找无法用分句逻辑表达的句子，而这些句子可以用一阶逻辑表达。

严格来说有很多，只是因为从句逻辑是FOL的限制。所以根据定义这是正确的。但是，您可以做的是，您可以将任何一组 FOL 语句重写为一个不等价但具有良好属性的逻辑程序。因此，例如，如果您想知道*p*是否是您的理论的结果，您可以等效地使用转换后的逻辑程序。

关于其他答案的几点说明：

1.  Prolog (\+) 中的否定是失败的否定，而不是一阶逻辑否定
2.  Prolog 是一种编程语言，正如正确指出的那样，我们应该讨论从句逻辑。
3.  左递归不是问题。您可以轻松地使用不同的选择规则或其他一些推理机制。

# sql-server-2008 - 嵌套选择 SQL

> ID：12372318
> 
> 赞同：-5
> 
> 时间：2012-09-11T14:42:50.863
> 
> 标签：sql-server-2008

我有 3 张桌子：客户、预订和付款

```
Customer
---------------
CustomerID
FirstName

Reservation
---------------
ReservationID
CustomerID (FK_Reservation_Customer)

Payment
---------------
PaymentID
ReservationID (FK_Payment_Reservation) 
```

现在我想选择表客户并保留付款。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:45:08.380

您将需要`JOIN`以下表格：

```
select *
from customer c
inner join reservation r
    on c.customerid = r.customerid
left join payment p
    on r.reservationid = p.reservationid 
```

如果您在学习 JOIN 语法方面需要帮助，那么有一个很棒[的 SQL 连接可视化解释](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)会有所帮助。

# .net - 当 DataMember 名称与属性名称不同时，将传入的 JSON 绑定到模型

> ID：12372322
> 
> 赞同：1
> 
> 时间：2012-09-11T14:43:04.463
> 
> 标签：.net, json, api, binding, web

我有这个模型类，它是通过向 .NET 4.5 Web Api 控制器发送 POST 请求来自动填充的。

```
[Serializable]
[DataContract(Name="Message")]

public class Message {

    [DataMember(Name="text")]
    public string text {get; set;}

    [DataMember(Name="id")]
    public Guid id {get; set;}

} 
```

现在，当我向控制器发送这样的请求时，我可以使用自动绑定模型：

```
POST /messages/
text=foo&id=1 
```

不幸的是，这只有效，因为 DataMember 名称与属性名称相同，只是小写。

但是，如果我的 DataMember Names 和属性名称不同怎么办，例如：

```
[DataMember(Name="content")]
public string text { get; set; }

POST /messages/
content=foo&id=1 
```

然后会导致绑定错误，因为“内容”字段不能绑定到 Message.text

无论出于何种原因，DataMember 属性都会被忽略 - 如果在序列化中将使用它，而在反序列化中则不会。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T15:01:15.620

您没有发送 JSON

这是一个带有表单域的传统帖子

```
POST /messages/
text=foo&id=1 
```

一个 JSON 将是

```
{"text":"foo","id":1} 
```

我确定这不是对您正在寻找的内容的回应，但我认为重要的是您了解您没有发送 JSON

# jquery - 用于动态复选框的 Jquery 在 IE 中不起作用

> ID：12372324
> 
> 赞同：0
> 
> 时间：2012-09-11T14:43:07.833
> 
> 标签：jquery, checkbox

我正在使用下面的代码来获取选定的 chnaeckboxes。这些复选框是在**XSLT**中动态添加的。

```
//html
<div id="centerNameChk">
<input type="checkbox" name="emailList" onclick="">
Add Workforce Center to email
</input>
</div>

//jquery
if ($("#centerNameChk :checked").size() > 0) {
  //my code is here
} 
```

上面的代码在 FF、Chrome 中运行良好，但在 IE`$("#centerNameChk :checked").size()`中总是返回 0。

我正在使用 jQuery 1.4.2 并且我更新到 1.7.2 但仍然是同样的问题。

有什么建议么...

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T15:10:17.157

尝试以下操作：

```
if ($("#centerNameChk :checkbox").is(":checked")​​​​​) {
  // my code is here
} 
```

**[演示](http://jsfiddle.net/Uzstj/)**。

# iphone - ios5中的自定义警报视图可以让我的应用程序被拒绝吗

> ID：12372328
> 
> 赞同：-2
> 
> 时间：2012-09-11T14:43:19.363
> 
> 标签：iphone, ios5, uialertview

我有一个带有 layoutsubviews 和 draw rect 方法的自定义警报视图类。Apple 是否因此而拒绝？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T15:43:56.223

人们一直在向 UIAlertView 添加子视图，通常是 textFields 和 activityIndi​​cators。我不明白为什么自定义绘图会成为问题。不要包含任何私有方法，Apple review 有一个自动测试可以检测到这一点。

如果你被拒绝，你会得到一个明确的理由，这样你就会知道要解决什么问题。

如果你是那种偏执狂，只需创建一个类似于 AlertView 的 UIView 子类。不过，你需要一些 Photoshop 印章 :-)

# jquery - 跨站点 Web 服务 ajax 调用

> ID：12372330
> 
> 赞同：0
> 
> 时间：2012-09-11T14:43:27.943
> 
> 标签：jquery, ajax, cross-domain

我在站点 A 上有一个有效的网络服务，我在站点 A 内使用该服务没有问题，现在我试图从站点 B 使用相同的服务但​​没有成功...

代码如下 -

```
$(function () {
            $.getJSON("http://siteA.com/Services/myasmx.asmx/dummy",
                {
                    sID: "tempID"
                },
            function (data) {
                //success call
.
.
                return false;
                  });
              });
        }); 
```

知道如何从站点 B 使用站点 A 网络服务吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:51:58.793

现代浏览器不允许跨站点 HTTP 请求作为安全措施。解决此问题的正确方法是在 URL 中使用 JSONP 回调。

```
$.getJSON("http://siteA.com/Services/myasmx.asmx/dummy?jsoncallback=?",
    function(data){
      // do something here
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T14:54:02.897

将 $.ajax 与 dataType: "jsonp" 一起使用 - 这将自动为您注册回调函数并避免跨域问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T14:47:03.493

这是因为跨域策略。

如果您可以在 Web 服务的响应中包含一些标头，则可以轻松绕过它。

见：[http ://www.w3.org/TR/cors/](http://www.w3.org/TR/cors/)

# facebook-like - Facebook like 按钮在未登录时消失

> ID：12372333
> 
> 赞同：2
> 
> 时间：2012-09-11T14:43:36.120
> 
> 标签：facebook-like

我对 FB like 按钮有疑问。

在我们的 iOS 和 Android 应用程序内的 web 视图中，当按下 FB like 按钮并且您没有登录时，它不会像以前那样显示登录模式，而是会消失。

这发生在`iframe`和 XFBML 版本中。

[在查看https://developers.facebook.com/docs/reference/plugins/like/](https://developers.facebook.com/docs/reference/plugins/like/)时，我也可以在移动浏览器中单击“赞”按钮时重现此问题。

我已经用 FB Dev 记录了这个，但我想我也会在这里尝试。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T08:44:23.950

我有同样的问题......你必须使用这个工具：[https ://developers.facebook.com/tools/debug](https://developers.facebook.com/tools/debug)

输入你想添加like按钮的url，这将清除facebook缓存，并且like按钮将正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-26T08:53:57.863

如果链接到的页面有限制，则可能会阻止类似按钮。这篇文章有更多关于这个问题的信息：Ttp://www.andreavahl.com/facebook/why-your-facebook-like-box-is-not-showing-up.php

# sql-server-2012 - 在 PowerView 中对图表图例进行排序

> ID：12372334
> 
> 赞同：1
> 
> 时间：2012-09-11T14:43:41.017
> 
> 标签：sql-server-2012, powerpivot, dax, powerview

我目前正在使用 PowerView 并遇到了一个小问题。我有一个折线图（如下），但我真的很想根据图表中数据点的最新值对图例（关键字）进行排序（目前按字母顺序排序）。

这可能是a）在PowerView本身中还是b）通过DAX向系列表添加某种计算列并将其定义为基础PowerPivot模型中的排序列？

![示例 PowerView 折线图](../Images/9bbd23da6b0b8cd33c0c5c823202bd1a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T13:51:19.477

在基础表格模型或 PowerPivot 工作簿中，将数据采购到 Power View 平板中，使用表示所需条件的另一列更改关键字的排序。使用 2012，您可以按模型/工作簿中的其他列对列进行排序。

# python - 如何让 Pip 尊重要求？

> ID：12372336
> 
> 赞同：10
> 
> 时间：2012-09-11T14:43:47.417
> 
> 标签：python, dependencies, pip

如果我使用 setup.py 创建`requires`，Pip 不会安装我的依赖项。

这是我的 setup.py：

```
from distutils.core import setup

setup(name='my_project',
      description="Just a test project",
      version="1.0",
      py_modules=['sample'],
      requires=['requests']) 
```

我写了一个简单的sample.py：

```
import requests

def get_example():
    return requests.get("http://www.example.com") 
```

然后我尝试安装它：

```
$ pip install -e .                                                                                    [15:39:10]
Obtaining file:///tmp/example_pip
  Running setup.py egg_info for package from file:///tmp/example_pip

Installing collected packages: my-project
  Running setup.py develop for my-project

    Creating /tmp/example_pip/my_venv/lib/python2.7/site-packages/my-project.egg-link (link to .)
    Adding my-project 1.0 to easy-install.pth file

    Installed /tmp/example_pip 
```

请注意`requests`，我的依赖项没有安装。如果我现在尝试使用我的测试项目：

```
$ python                                                                                              [15:35:40]
>>> import sample
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/tmp/example_pip/sample.py", line 1, in <module>
    import requests
ImportError: No module named requests 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-11T14:45:51.207

正确的拼写是`install_requires`，不是`requires`；这确实需要您使用[`setuptools`](http://pythonhosted.org/setuptools/setuptools.html)，而不是`distutils`：

```
from setuptools import setup

setup(name='my_project',
      description="Just a test project",
      version="1.0",
      py_modules=['sample'],
      install_requires=['requests']) 
```

我可以推荐[Python Packaging User Guide](https://packaging.python.org/en/latest/)了解细节。

# tcl - Tk Tablelist，如何找到当前正在编辑的单元格

> ID：12372340
> 
> 赞同：0
> 
> 时间：2012-09-11T14:43:56.030
> 
> 标签：tcl, tk

我正在使用`editwinpath`，它返回当前正在编辑的窗口路径，但是如何知道当前正在编辑哪个单元格？tablelist 有什么功能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T10:25:09.263

根据[文档](http://www.nemethi.de/tablelist/tablelistWidget.html)，您可以注册一个`-editstartcommand`回调，它可以让您拦截行为，以便您可以存储单元格：

```
proc editStarted {widget row column initialText} {
    global cell
    set cell $row,$column
    return $initialText
}
$yourTablelistInstance configure -editstartcommand editStarted 
```

如果您还需要知道什么时候没有被编辑，则`-editendcommand`存在类似的选项。

# android - 在 Android 中绑定到服务的问题

> ID：12372341
> 
> 赞同：4
> 
> 时间：2012-09-11T14:44:02.827
> 
> 标签：android, binding, android-service

我创建了一个名为 LocalService 的服务，我想绑定到它，以便它可以执行一些操作并将结果返回给调用客户端。我一直在尝试让[android dev 站点的示例](http://developer.android.com/reference/android/app/Service.html)正常工作，但 eclipse 在此方法上给出了编译时错误：

```
void doBindService() {
    // Establish a connection with the service. We use an explicit
    // class name because we want a specific service implementation that
    // we know will be running in our own process (and thus won't be
    // supporting component replacement by other applications).
    bindService(new Intent(Binding.this, LocalService.class), mConnection, Context.BIND_AUTO_CREATE);
    mIsBound = true;
} 
```

“Binding.this”下有一条红线，eclipse给了我：无法将绑定解析为类型。我能做些什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T15:00:21.700

只需删除 Binding，代码应如下所示：

```
bindService(new Intent(this, LocalService.class), mConnection, Context.BIND_AUTO_CREATE); 
```

构造函数的第一个参数`Intent`是[Context](http://developer.android.com/reference/android/content/Context.html)。如果您从 Activity 类调用上面的代码（任何 Activity 实例也是 Context ），则上面的代码将起作用。如果没有，您始终可以使用应用程序上下文

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T14:59:21.090

看起来`Binding`只是您输入的类名`doBindService()`（很可能是 Activity？）。如果您的班级以其他方式命名，请将其重命名为`Binding`或全部`Binding.this`替换`MyClass.this`为`this`.

# c# - 第二次流式传输文件时出错

> ID：12372349
> 
> 赞同：1
> 
> 时间：2012-09-11T14:44:31.330
> 
> 标签：c#, asp.net

将文件流式传输到浏览器时出现错误，但仅在第二次到 n 次。第一次它工作正常。

```
C:\Users\gfinzer\AppData\Local\Temp\BTnADAkZ.pdf. could not be saved because the source file could not be read 
```

这是代码：

```
protected void Page_Load(object sender, EventArgs e)
{
    //Get the parameters
    string reportName = Utils.ParseStringRequest(Request, "reportName") ?? string.Empty;
    string reportGuid = Session["reportGuid"].ToString();
    string path = Path.Combine(ReportPath(), Utils.GetSessionReportName(reportName, reportGuid));

    using (var fileStream = File.Open(path, FileMode.Open))
    {
        Response.ClearHeaders();
        Response.Clear();
        Response.ContentType = "application/octet-stream";
        Response.AddHeader("Content-Disposition", "attachment; filename=\"" + reportName + "\"");
        Response.AddHeader("Content-Length", fileStream.Length.ToString(CultureInfo.InvariantCulture));
        StreamHelper.CopyStream(fileStream, Response.OutputStream);
        Response.Flush();
    }

} 
```

这是复制流：

```
 public static void CopyStream(Stream input, Stream output)
    {
        byte[] buffer = new byte[32768];
        int read;
        while ((read = input.Read(buffer, 0, buffer.Length)) > 0)
        {
            output.Write(buffer, 0, read);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T15:01:29.230

我可能是错的，但你需要在`Response.End()`之后打电话`Flush`吗？

# xamarin.ios - Monotouch - 弹出窗口覆盖一切

> ID：12372352
> 
> 赞同：1
> 
> 时间：2012-09-11T14:44:41.520
> 
> 标签：xamarin.ios, popup, modal-dialog

在 iPhone 上，在 Xcode 中，我可以使用这样的代码显示一个覆盖所有内容的弹出视图，包括标签栏等 -

```
[[[[UIApplication sharedApplication] delegate] window] addSubview:mySpecialView]; 
```

我正在尝试在 MonoTouch 中做同样的事情，而我正在使用的代码是这样的 -

```
UIApplication.SharedApplication.Delegate.Window.AddSubview(mySpecialView); 
```

...但这会崩溃。有谁知道我做错了什么？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-11T15:00:10.033

你没有说它是如何崩溃的——但我假设你有一段`ModelNotImplementedException`时间使用该`Window`属性，因为它不是默认实现的（并且适用于情节提要）。

您可以实现它以返回`window`（自动生成的）`AppDelegate`（AppDelegate.cs 文件）的字段，或者将相同的变量公开为（静态）字段。

例如默认生成的代码

```
UIWindow window;

public override bool FinishedLaunching (UIApplication app, NSDictionary options)
{
    window = new UIWindow (UIScreen.MainScreen.Bounds);
    window.RootViewController = new UINavigationController ();
    window.MakeKeyAndVisible ();
    return true;
} 
```

会成为：

```
static UIWindow window;

public override bool FinishedLaunching (UIApplication app, NSDictionary options)
{
    window = new UIWindow (UIScreen.MainScreen.Bounds);
    window.RootViewController = new UINavigationController ();
    window.MakeKeyAndVisible ();
    return true;
}

static public UIWindow Window {
    get { return window; }
} 
```

# r - R 在 readHTMLTable 调用维基百科时崩溃

> ID：12372355
> 
> 赞同：3
> 
> 时间：2012-09-11T14:44:45.340
> 
> 标签：r, web-scraping

试图刮掉维基百科页面，我以前做过很多次这样的事情

```
library(XML)
myURL <- "http://en.wikipedia.org/wiki/List_of_US_Open_MenUs_Singles_champions"
y <- readHTMLTable(myURL,  stringsAsFactors = FALSE) 
```

R 在 RStudio 或标准 GUI 中崩溃

其他关于类似问题的 SO 评论建议使用 readLines

```
u=url(myURL)
readLines(u) #  cannot open: HTTP status was '404 Not Found' 
```

该网址实际上已重定向，因此输入了最终网址

```
myURL <- "http://en.wikipedia.org/wiki/List_of_US_Open_Men%27s_Singles_champions" 
```

这次 readLines 确实输出了页面，但是使用 XML 函数，包括 htmlParse，仍然会导致崩溃

TIA

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T15:07:47.750

我发现该软件包`httr`在解决任何网络抓取问题方面非常宝贵。在这种情况下，您需要添加用户代理配置文件，因为如果您不这样做，维基百科会阻止内容：

```
library(httr)
library(XML)
myURL <- "http://en.wikipedia.org/wiki/List_of_US_Open_Men%27s_Singles_champions"
page <- GET(myURL, user_agent("httr"))
x <- readHTMLTable(text_content(page), as.data.frame=TRUE)
head(x[[1]]) 
```

产生这个：

```
 US Open Men's Singles Champions                                                          NA
1                Official website                                                        <NA>
2                        Location                        Queens – New York City United States
3                           Venue                USTA Billie Jean King National Tennis Center
4                  Governing body                                                        USTA
5                         Created 1881 (established)Open Era: 1968\n(44 editions, until 2011)
6                         Surface  Grass (1881–1974)HarTru (1975–1977)DecoTurf (1978–Present) 
```

# iphone - 变量 ios 的引用计数

> ID：12372357
> 
> 赞同：0
> 
> 时间：2012-09-11T14:44:45.540
> 
> 标签：iphone, ios, refer

> **可能重复：**
> [如何获取 NSObject 的引用计数？](https://stackoverflow.com/questions/2640568/how-to-get-the-reference-count-of-an-nsobject)

有没有办法找出任何给定实例中单个变量的引用计数。我尝试使用堆镜头，它给出了流中的整体引用计数。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:47:15.153

您可以使用该[`-retainCount`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Protocols/NSObject_Protocol/Reference/NSObject.html#//apple_ref/occ/intfm/NSObject/retainCount)方法获取 的保留计数`NSObject`，但请记住，您几乎肯定不会取回任何有用的信息。对象可以由系统和框架的各个部分保留，因此您经常会得到意想不到的结果。

# jquery - 如何检查特定类的最大元素数？

> ID：12372359
> 
> 赞同：0
> 
> 时间：2012-09-11T14:44:50.553
> 
> 标签：jquery, addclass, toggleclass

我正在寻找做某事的最佳方式。我有一个不同类别的列表。所有列表项都是可点击的。我希望用户选择 1 到 3 个项目。

当他点击某个东西时，我在 li 上添加了一个选定的类。当他再次单击同一个项目时，它会删除类（ToggleClass() ）

我将整个事情包装在一个条件下，以计算有多少项目具有选定的类。这是我现在所在位置的小提琴：

[http://jsfiddle.net/nfQum/1/](http://jsfiddle.net/nfQum/1/)

我的问题是，当您选择了 3 个项目时，您不能“取消选择一个”，因为我的 if 语句阻止了它。这里有什么解决方案？（我也觉得这段代码真的不是最好的做法）

代码（与上面的 Fidlle 相同）

HTML

```
<ul>
  <li class="chooseCategory16"><a onclick="test(16); return false;" href="#">test1</a></li>
  ...
</ul> 
```

JS

```
function test(number) {
  if ( $("li.selected").length <= 2) {
     if( $("li.chooseCategory"+ number +"").hasClass("selected")) {                
         $("li.chooseCategory"+ number +"").removeClass("selected");
     } else {
         $("li.chooseCategory"+ number +"").addClass("selected");
     }
   }
} 
```

​</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T14:50:59.100

遵循这样的原则，如果他们做得对，你就可以让人们继续他们的任务（让用户界面不碍事），并拦截错误，并清楚地说明问题是什么，以及如何解决它，我会建议您使用的方法相同，但使用模式窗口在用户选择过多项目时通知用户。

或者，如果您可以以用户肯定会看到的方式执行此操作，则可以在列表附近使用上下文相关消息。你不想让他们不知道这个问题。

```
function test(number) {
    // always run this to allow removal of class when too many are selected
    if ($("li.chooseCategory" + number + "").hasClass("selected")) {
        $("li.chooseCategory" + number + "").removeClass("selected");
    } else {
        // move this condition inside the else
        if ($("li.selected").length <= 2) {
            $("li.chooseCategory" + number + "").addClass("selected");
        } else {
            // add notification of problem and how to solve
            // a modal window, or context sensitive help here
            alert('you can only select 3 - please deselct one!')
        }
    }
}​ 
```

## 演示：http: [//jsfiddle.net/nfQum/2/](http://jsfiddle.net/nfQum/2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T14:55:43.980

首先：避免使用内联 javascript 是一个非常好的做法。jQuery 使得将事件绑定到元素变得非常容易，而不是在您的标记中使用 javascript。我的示例展示了如何根据容器将事件绑定到这些项目。因为它使用委托事件——其中单个事件绑定到容器然后检查上下文——而不是将事件绑定到每个项目，所以它还提高了性能。

**演示：http:** [//jsfiddle.net/nate/nfQum/5/](http://jsfiddle.net/nate/nfQum/5/)

```
$('.choose').on('click', 'li', function (event) {
        // save a reference to the container ul
    var $container = $(event.delegateTarget),
        // save a reference to the li that was clicked
        $element = $(event.currentTarget);

    // if the li has the selected class...
    if ($element.hasClass('selected')) {
        // ...remove it!
        $element.removeClass('selected');
    } else {
        // if it doesn't have the selected class, check whether
        // the container has fewer than three children with the
        // selected class
        if ($container.children('.selected').length < 3) {
            // if so, go ahead and add selected to this item
            $element.addClass('selected')
        }
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T14:54:18.603

```
function test(number) {
    if ($("li.selected").length <= 2)
        {
            if($("li.chooseCategory"+ number +"").hasClass("selected")) {

                $("li.chooseCategory"+ number +"").removeClass("selected");
            }else {
                $("li.chooseCategory"+ number +"").addClass("selected");
            }
        } else {
            if( $(event.target).parent().hasClass("selected") ) {
                 $(event.target).parent().removeClass("selected");
            }                
        }
} 
```

else 部分将取消选择选定的 li。[http://jsfiddle.net/uznbu/1/](http://jsfiddle.net/uznbu/1/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-11T15:06:29.420

最好避免使用内联 javascript，所以我把它变得更加 jQuerified。

[http://jsfiddle.net/nfQum/7/](http://jsfiddle.net/nfQum/7/)

```
$('li.category').on('click',function(){
    var $this = $(this); //store you jquery object - this referes to the element clicked

    if ($this.hasClass("selected")) {
        $this.removeClass("selected");
    }else{
        if ($('li.selected').length !== 3){
            $this.addClass("selected");
        }
    }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-11T14:58:08.620

删除内联处理程序并执行以下操作：

```
$('ul li a').on('click', function(e) {
    e.preventDefault();
    $(this).parent('li')[$('li.selected').length>2?'removeClass':'toggleClass']('selected');
}); 
```

[**小提琴**](http://jsfiddle.net/pWdQB/1/)[](http://jsfiddle.net/pWdQB/1/)

# c - 如何使用 inb() 和 outb() 读取和写入 GPIO 值

> ID：12372360
> 
> 赞同：1
> 
> 时间：2012-09-11T14:44:51.253
> 
> 标签：c, io, hardware-port

我有一个带有 Fintek F75111 GPIO 的原子板。我从制造商那里得到信息，访问芯片的 SMbus 地址是 06EH。

我正在尝试在 Linux 中读取和写入 GPIO 的值。我有一个制造商为 Windows 编写的示例程序，看起来像这样。

```
#include “math.h”
#include “stdio.h”
#include “dos.h”
void main(void){
    int SMB_PORT_AD = 0x400;
    int SMB_DEVICE_ADD = 0x6E;
    /*75111R’s Add=6eh */
    //programming DIO as output //0:input 1:Output
    /* Index 10, GPIO1x Output pin control */
    SMB_Byte_WRITE(SMB_PORT_AD,SMB_DEVICE_ADD,0x10,0xff); delay(10);
    //programming DIO default LOW
    /* Index 11, GPIO1x Output Data value */
    SMB_Byte_WRITE(SMB_PORT_AD,SMB_DEVICE_ADD,0x11,0x00); delay(10);
}

unsigned char SMB_Byte_READ (int SMPORT, int DeviceID, int REG_INDEX)
{
    unsigned char SMB_R;
    outportb(SMPORT+02, 0x00); /* clear */ 
    outportb(SMPORT+00, 0xff); /* clear */ 
    delay(10);
    outportb(SMPORT+04, DeviceID+1); /* clear */ 
    outportb(SMPORT+03, REG_INDEX); /* clear */ 
    outportb(SMPORT+02, 0x48); /* read_byte */ 
    delay(10);
    SMB_R= inportb(SMPORT+05);
    return SMB_R;
}

void SMB_Byte_WRITE(int SMPORT, int DeviceID, int REG_INDEX, int REG_DATA)
{
    outportb(SMPORT+02, 0x00); /* clear */ 
    outportb(SMPORT+00, 0xff); /* clear */
    delay(10);
    outportb(SMPORT+04, DeviceID); /* clear */ 
    outportb(SMPORT+03, REG_INDEX); /* clear */
    outportb(SMPORT+05, REG_DATA); /* read_byte */
    outportb(SMPORT+02, 0x48); /* read_byte */
    delay(10);
} 
```

我试图将其转换为与 Linux 兼容的函数 inb() 和 outb()，这就是我得到的。

```
#include <stdio.h>
#include <sys/io.h>

unsigned int gpio_read(int PORT, int DEVICE, int REG_INDEX){
    unsigned int RESPONSE;

    outb(0x00, PORT+02);
    outb(0xff, PORT+00);
    usleep(100);
    outb(DEVICE+1, PORT+04);
    outb(REG_INDEX, PORT+03);
    outb(0x48, PORT+02);
    usleep(100);
    RESPONSE = inb(PORT+05);
    return RESPONSE;
}

unsigned int gpio_write(int PORT, int DEVICE, int REG_INDEX, int REG_DATA){
    outb(0x00, PORT+02);
    outb(0xff, PORT+00);
    usleep(100);
    outb(DEVICE, PORT+04);
    outb(REG_INDEX, PORT+03);
    outb(DATA, PORT+05);
    outb(0x48, PORT+02);
    usleep(100);

}

void main() {
    int PORT = 0x400;
    int DEVICE = 0x6E;
    unsigned int RESPONSE;

    // Ask access to port from kernel
    ioperm(0x400, 100, 1);

    // GPIO1x set to input (0xff is output)
    gpio_write(PORT, DEVICE, 0x10, 0x00);

        RESPONSE = gpio_read(PORT, DEVICE, 1);
        printf("\n %u \n", RESPONSE);
} 
```

GPIO1X 索引 0x10 用于设置连接到 GPIO1x 的 8 个 GPIO 端口是输出端口还是输入端口。

GPIO 的输出值使用索引 0x11 设置，如果端口用作输入端口，则索引 0x12 用于读取输入值。

问题是我不知道这是否正确或如何读取值（为什么读取函数会在读取之前输出一些东西？！？）

当我运行时：

```
RESPONSE = gpio_read(PORT, DEVICE, X); 
```

用 1..9 的值更改 X 我得到这个作为输出： 0 8 8 0 0 0 0 0 0

数字8让我很困惑...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T21:03:46.220

我宁愿使用 i2c 库，而不是直接写入 SMBus 端口。I2C（和 SMBUS）使用两个端口引脚，一个用于时钟，一个用于数据。数据在时钟边缘（同步）传输和接收，阅读代码，我无法清楚地看到它们中的哪些（时钟或数据）正在被访问以及何时被访问。

要开始，我会使用 i2ctools 作为起点（查看此站点：[http](http://elinux.org/Interfacing_with_I2C_Devices) ://elinux.org/Interfacing_with_I2C_Devices ）。此工具可帮助您查找连接到微处理器的 I2C 总线的设备，并执行基本通信。

希望能帮助到你...

# json - json 文件的 Mongoimport 有效，但 db.foo.find() 不显示

> ID：12372361
> 
> 赞同：1
> 
> 时间：2012-09-11T14:44:52.363
> 
> 标签：json, mongodb, find

我在这里想念什么？导入了 300 个对象，但我用 find() 看不到它们

导入 JSON 文件：

```
mongoimport --host localhost -db foo -collection bar --file onebigline.json
connected to: localhost
Tue Sep 11 10:36:58 imported 300 objects
MongoDB shell version: 2.2.0 
```

启动 Mongo

```
connecting to: test
> show dbs
foo 0.203125GB
local   (empty)
> use foo
switched to db foo 
```

显示从 db foo 导入的 JSON 数据

```
> db.foo.find()
> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T14:52:19.700

`mongoimport`您来自命令的集合名称是`bar`，不是`foo`，所以请尝试：

```
> db.bar.find() 
```

# ruby-on-rails - 在 Rails 控制台中绕过 Cancan 角色验证

> ID：12372362
> 
> 赞同：1
> 
> 时间：2012-09-11T14:44:54.403
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我创建了一个助手来检查 current_user 的角色，以保护某些属性不被未经授权的用户编辑。

除了我在控制台中时，验证工作正常。显然没有用户，但它仍在尝试验证，我得到：

```
 NoMethodError: undefined method `has_role?' for nil:NilClass 
```

我怎样才能绕过这个验证，或者有没有更好的方法来实现我正在做的事情？

定位模型：

```
 validate :check_archived_status, :on => :update

  def check_archived_status
    unless UserHelper.staff
      if self.archived == false
        if stuff == otherstuff
          do some other stuff
        end
      end
    end    
  end 
```

用户助手：

```
def self.staff
  staff = User.current_user.has_role?('Super', 'Admin', 'Tech')
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T21:58:47.550

您不能`current_user`在控制台上填充一些随机用户吗？
像这样: `current_user = User.last`，所以验证不会给你任何错误。

# ruby-on-rails-3 - Rails - 设计，是否可以使用 user_signed_in？没有authenticate_user！？

> ID：12372366
> 
> 赞同：0
> 
> 时间：2012-09-11T14:45:03.563
> 
> 标签：ruby-on-rails-3, devise

我在rails中做一种记事本。主页上有这种带有唯一字段“内容”的注释表格。每个人都可以创建笔记，但我正在尝试使用设计添加身份验证，以便用户可以注册并保存他们的笔记。

所以我有我的站点控制器，索引为 uniq 方法

## 现场控制器

```
def index
  @note = Note.new
end 
```

然后是一个带有创建动作的笔记控制器

## 笔记控制器

```
def create
  @note = if user_signed_in?
    current_user.notes.build(params[:note])
  else
    Note.new(params[:note])
  end

  respond_to do |format|
    if @note.save
      format.js
    else
      format.js
    end
  end
end 
```

我虽然这会起作用，但设计助手似乎只有在我添加时才起作用

```
 before_filter :authenticate_user! 
```

在我需要的控制器上。

是否可以检查是否有没有 before_filter 的用户？还是我应该制作 2 个创建方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T19:47:53.267

作为一种解决方法，您可以尝试在过滤器之前添加它：

```
before_filter :authenticate_user!, :only => [] 
```

它可能会添加助手（如果确实需要），但不适用于任何操作。

# objective-c - ViewDidLoad 和 ARC 和 XIB

> ID：12372370
> 
> 赞同：1
> 
> 时间：2012-09-11T14:45:08.773
> 
> 标签：objective-c, ios

鉴于我们正在使用 ARC 编写代码，我应该从以下实例中实例化的`nil`属性`viewDidUnload`：

1.  XIB（这里的 nilling 有时是从 IDE 生成的）

2.  来自初始化程序并且没有 IBOutlet

3.  弱的

?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:50:26.060

您的一般规则：

1.  `nil`仅此`strong IBOutlets`而已。别管`weak`那些。
2.  `nil`实例化的所有属性`viewDidLoad`，而**不是** `init`，`initWithCoder:`和`initWithNibName:bundle:`。

您还应该`nil`“即时”重新创建属性或进行`nil`检查，以释放更多内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T15:31:27.420

的目的`viewDidUnload`是让您的应用程序有机会删除对可能不再存在的用户界面对象的引用，因为在收到内存警告时视图已被删除。因此：

1.  您应该将任何*用户界面*控件设置为`nil`（因为正在卸载视图）。不需要`weak`属性（它们通常应该`weak`按照[Apple](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/LoadingResources/CocoaNibs/CocoaNibs.html#//apple_ref/doc/uid/10000051i-CH4-SW6)关于此主题的指南），但如果 Xcode 为您插入它，这不是问题。有关如何操作的指导，请参阅《[资源编程指南：Nib 文件](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/LoadingResources/CocoaNibs/CocoaNibs.html#//apple_ref/doc/uid/10000051i-CH4-SW35)`viewDidUnload`》的“内存警告”部分。

2.  对于您在 in 中设置的非用户界面对象`viewDidLoad`，我会警惕盲目地将它们设置为`nil`in `viewDidUnload`，尤其是在您不使用 ARC 的情况下（例如，如果您不小心`nil`使用了实例变量，则可能会导致泄漏）。您可能希望平衡将恢复的内存量与重新检索该数据的“成本”（例如，如果它来自某个远程服务器）。无论如何，我建议您在`didReceiveMemoryWarning`.

在我看来，我认为`viewDidUnload`这是一个机会，可以确保我不会维护对可能不再存在的用户界面对象的引用，并且我会用它`didReceiveMemoryWarning`来清空缓存或其他非 UI 相关的项目，我可以安全地清除这些项目以恢复一些内存. 如果您担心 iOS 6，请注意处理`viewDidUnload`可能会发生变化，虽然 NDA 阻止我们公开讨论它，但我建议您可能需要参考[iOS 6 Beta 4 发行说明](https://developer.apple.com/library/prerelease/ios/#releasenotes/General/RN-iOSSDK-6_0/_index.html)并查找参考`viewDidUnload`.

# javascript - 我想从同一个域操作 iframe 的内容

> ID：12372373
> 
> 赞同：0
> 
> 时间：2012-09-11T14:45:21.857
> 
> 标签：javascript, iframe

有两个网站 loc.something.com 和 www.something.com。loc.something.com 来自与 www.something.com 不同的服务器。我想知道如果在 loc.something.com 中有 iframe，我是否可以删除 www.something.com 中的某些元素？

我在本地试过了，还是不行？是不是该走了。它是同一个域something.com？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:51:45.340

除非原始 URL 在托管 URL 中，否则您无法执行此操作。iFrame 仅显示指定 URL 的内容。您无法控制这些内容。

例如，如果 iFrame 和它所托管的站点都具有 www.something.com 的 TLD，那就没问题了。

# tinymce - Tinymce 使用按钮添加文本

> ID：12372374
> 
> 赞同：1
> 
> 时间：2012-09-11T14:45:29.053
> 
> 标签：tinymce

我正在尝试在 TinyMce 编辑器之外实现一个按钮，该按钮会在单击时向活动编辑器添加文本。我怎样才能做到这一点？

（例如：我的网站上有一个按钮应该将“测试”添加到编辑器中，但它没有）。

感谢帮助 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T07:32:23.760

将此代码添加到按钮的 onClick 中：

```
// the editor id is the same id of your textarea, default "content" in case your textarea does not have an id

tinymce.get('your_editor_id').execCommand('mceInsertContent', false, "Test"); 
```

如果您的页面上有一个编辑器，您也可以`tinymce.activeEditor`使用`tinymce.get('your_editor_id')`.

# sharepoint - 如何在共享点搜索中显示拼写建议

> ID：12372376
> 
> 赞同：1
> 
> 时间：2012-09-11T14:45:29.693
> 
> 标签：sharepoint, search, sharepoint-2010, spelling, fastsearch

如何在 shaerpoint 搜索中获得拼写建议，

我用

> ```
> query.EnableSpellcheck = SpellcheckMode.Suggest; 
> ```

然后获取属性的值

> ResultTableCollection 的拼写建议

但如果我输入了错误的搜索关键字，我不会得到任何拼写更正

有什么想法吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T18:07:09.920

我可能回答得有点晚了，你能找到解决方案吗？您的问题的答案取决于您是想要获得建议还是想要拼写自动更正。

当您使用以下内容时：

```
query.EnableSpellcheck = SpellcheckMode.Suggest; 
```

如果您在搜索中出现拼写错误或拼写错误，FAST 将尝试在您的搜索查询中找到正确的术语。此建议的结果将在您作为查询结果获得的数据集的扩展属性中。无需填写建议词典，FAST 已经提供了相当大的开箱即用建议词典。

如果您想要的是自动更正，这意味着您的搜索词将被更正，并且 FAST 将使用这些新词进行新搜索，您需要：

```
query.EnableSpellcheck = SpellcheckMode.On; 
```

当然，如果您不想要建议或自动更正，剩下的选项，您指定：

```
query.EnableSpellcheck = SpellcheckMode.Off; 
```

或者，您不指定任何内容，因为 Off 是默认值。

# php - wordpress，页面开头的空白行

> ID：12372377
> 
> 赞同：0
> 
> 时间：2012-09-11T14:45:31.910
> 
> 标签：php, wordpress, session

我已经使用 wordpress 开发了一个网站。它在本地机器（windows xp）和测试服务器（ubuntu）上运行良好。但是在实时服务器上，它给出的错误如下所示。在此之前和这些错误之后有 2 个空白行。在测试服务器上，我注意到启动中有两个空白行，但是它运行良好。

我尝试删除 header.php、index.php 和其他一些文件中的一些空白行，但没有成功。

实时站点 URL 是[http://mbsocial.bsslsites.com](http://mbsocial.bsslsites.com)

```
 <br />
    <b>Warning</b>:  session_start() [<a href='function.session-start'>function.session-start</a>]: Cannot send session cookie - headers already sent by (output started at /home/bsslsite/public_html/mbsocial/wp-includes/functions.php:4954) in <b>/home/bsslsite/public_html/mbsocial/wp-content/plugins/wp-e-commerce/wpsc-core/wpsc-constants.php</b> on line <b>16</b><br />
    <br />
    <b>Warning</b>:  session_start() [<a href='function.session-start'>function.session-start</a>]: Cannot send session cache limiter - headers already sent (output started at /home/bsslsite/public_html/mbsocial/wp-includes/functions.php:4954) in <b>/home/bsslsite/public_html/mbsocial/wp-content/plugins/wp-e-commerce/wpsc-core/wpsc-constants.php</b> on line <b>16</b><br />

    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US">
        <head profile="http://gmpg.org/xfn/11">
            <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:47:14.513

从错误消息来看，我猜`<?php`在 wpsc-constants.php之前有一些空格

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T14:50:52.993

出现这种情况的最常见情况是，在设置标题信息（本例中为 cookie）之前向浏览器回显了一个空白字符或空白行。我的建议是尝试浏览主题的 functions.php 文件和 wp-e-commerce/wpsc-core/wpsc-constants.php 文件，并确保它们以`<?php`- 之前没有空格或换行符开头。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T14:48:34.077

您显然需要修复错误。幸运的是，他们指出了问题的根源——wpsc-constants.php 的第 16 行。

您似乎还应该正确配置本地开发和测试环境以显示这些错误，并正确配置生产环境以不显示这些错误。

# python - Matplotlib：在子图网格中重新定位子图

> ID：12372380
> 
> 赞同：10
> 
> 时间：2012-09-11T14:45:49.317
> 
> 标签：python, matplotlib, customization, subplot

我正在尝试制作一个包含 7 个子图的图。目前我正在绘制两列，一列有四个图，另一列有三个，即像这样：![在此处输入图像描述](../Images/b49ea8de81d621c9f9c00213fdb2eb58.png)

我正在按以下方式构建这个情节：

```
 #! /usr/bin/env python
    import numpy as plotting
    import matplotlib
    from pylab import *
    x = np.random.rand(20)
    y = np.random.rand(20)
    fig = figure(figsize=(6.5,12))
    subplots_adjust(wspace=0.2,hspace=0.2)
    iplot = 420
    for i in range(7):
       iplot += 1
       ax = fig.add_subplot(iplot)
       ax.plot(x,y,'ko')
       ax.set_xlabel("x")
       ax.set_ylabel("y")
    savefig("subplots_example.png",bbox_inches='tight') 
```

但是，对于发布，我认为这看起来有点难看——我想做的是将最后一个子图移到两列之间的中心。那么，调整最后一个子图的位置以使其居中的最佳方法是什么？即在 3X2 网格中设置前 6 个子图，下面的最后一个子图位于两列之间。如果可能的话，我希望能够保持`for`循环，以便我可以简单地使用：

```
 if i == 6:
       # do something to reposition/centre this plot 
```

谢谢，

亚历克斯

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-11T16:41:08.853

使用带有 4x4 网格的网格规范[(doc) ，并让每个绘图跨越 2 列，如下所示：](http://matplotlib.sourceforge.net/users/gridspec.html)

```
import matplotlib.gridspec as gridspec
gs = gridspec.GridSpec(4, 4)
ax1 = plt.subplot(gs[0, 0:2])
ax2 = plt.subplot(gs[0,2:])
ax3 = plt.subplot(gs[1,0:2])
ax4 = plt.subplot(gs[1,2:])
ax5 = plt.subplot(gs[2,0:2])
ax6 = plt.subplot(gs[2,2:])
ax7 = plt.subplot(gs[3,1:3])
fig = gcf()
gs.tight_layout(fig)
ax_lst = [ax1,ax2,ax3,ax4,ax5,ax6,ax7] 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-17T02:57:45.417

如果你想保留 for 循环，你可以用 来安排你的图`subplot2grid`，它允许一个`colspan`参数：

```
import numpy as np
import matplotlib.pyplot as plt

x = np.random.rand(20)
y = np.random.rand(20)
fig = plt.figure(figsize=(6.5,12))
plt.subplots_adjust(wspace=0.2,hspace=0.2)
iplot = 420
for i in range(7):
    iplot += 1
    if i == 6:
        ax = plt.subplot2grid((4,8), (i//2, 2), colspan=4)
    else:
        # You can be fancy and use subplot2grid for each plot, which doesn't
        # require keeping the iplot variable:
        # ax = plt.subplot2grid((4,2), (i//2,i%2))

        # Or you can keep using add_subplot, which may be simpler:
        ax = fig.add_subplot(iplot)
    ax.plot(x,y,'ko')
    ax.set_xlabel("x")
    ax.set_ylabel("y")
plt.savefig("subplots_example.png",bbox_inches='tight') 
```

![带有 colspan 的网格中的子图](../Images/71b0654dbec0eba5b3a83b309b038926.png)

# java - 用户注册与 Facebook 连接

> ID：12372381
> 
> 赞同：2
> 
> 时间：2012-09-11T14:45:49.627
> 
> 标签：java, facebook, database-design, relational-database

我的网站支持两种登录方式（类似于许多网站，包括 stackoverflow）。

1.  注册您的电子邮件和密码，然后登录。
2.  使用 Facebook 连接登录

所以我`User`上了一堂课（我正在使用 Ebean [JPA]）。
当用户使用 facebook connect 登录时，我使用 facebook Graph API 提取基本信息。

现在，我应该区分（在数据库级别）这两种类型的用户吗？（例如，为 . 创建单独的表`FacebookUser`。我还听说过***表继承***。这是我的情况吗？）

这两种登录选项的最佳做法是什么？
我应该提一下，我希望在不久的将来使用 Google 帐户作为登录方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T17:52:05.143

我建议您使用`users`包含用户基本信息的表格，而不管注册机制如何（下面是一个准系统示例）：

> 编号 | 姓名 | 电子邮件 | 创建日期

不同的服务将有不同的身份验证方法，因此为每个服务设置不同的表可能是个好主意：

> auth_facebook：
> 
> 编号 | facebook_id | 访问令牌 | ...
> 
> auth_网站：
> 
> 编号 | 密码 | ...

等等。通常，为了方便起见，使用多个服务登录的能力，您可能希望以一种或另一种方式集中您的用户。还要记住，关于身份验证，您将在 users 表中拥有您的主 ID，但您将有不同的验证方法，具体取决于用户用于连接的服务。对于 Facebook，您可以在 auth 之后检查 facebook_id 并查看您的哪些用户登录了。上面的架构也允许您为用户提供连接其他服务，这可能会有所帮助。

一个特定的情况是，如果您拥有人们的基本个人资料，但您希望允许他们展示他们的 GitHub 存储库、SO 代表并允许他们同时与 Facebook 朋友联系。

表继承听起来有点矫枉过正，而且很可能在不同的数据库系统中实现不同。所有这些表的视图可能更合适。

# java - 二分搜索 O(log n) 算法在顺序列表中查找重复项？

> ID：12372385
> 
> 赞同：9
> 
> 时间：2012-09-11T14:46:06.210
> 
> 标签：java, algorithm, binary-search

有谁知道在数字序列列表中查找重复项的快于线性算法？我现在正在使用 Java，但任何语言或伪代码都可以。

例如，给定这个 int[] 输入：

```
0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 7 | 8 | 9 
```

输出将是索引或值“7”。

我知道线性时间的明显遍历`O(n)`，但我试图通过二进制搜索来看看这是否可能`O(log n)`。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-11T14:48:35.403

如果您假设数字必须从 0 开始并以 1 递增，您可以将中间值与索引进行比较。如果中间是一样的走高，如果中间不是，就走低。

这将为您提供二进制搜索时间 O(log2 N)。唯一的区别是您正在与索引进行比较，而不是与固定值进行比较。

* * *

```
public static void main(String... args) {
    int[] array = {0, 1, 2, 3, 4, 5, 6, 7, 7, 8, 9};
    int duplicate = findDuplicate(array);
    System.out.println(duplicate);
}

private static int findDuplicate(int[] array) {
    int low = 0;
    int high = array.length - 1;

    while (low <= high) {
        int mid = (low + high) >>> 1;
        int midVal = array[mid];

        if (midVal == mid)
            low = mid + 1;
        else
            high = mid - 1;
    }
    return high;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T15:13:44.593

请注意，二分查找适用于排序列表。因此，如果您有一个包含重复项的排序列表，则只有在您的重复项相邻时，二分查找才有用。相邻的重要性在于，您可以在找到的密钥的上一个和下一个位置测试该密钥的存在。尝试对未排序列表使用二进制搜索的任何其他方式都会给出不正确的结果。

这是一些代码来说明我的意思。

```
import java.util.Arrays;
public class Main {
    public static void main(String[] args) {
        int[] list = {1, 2, 3, 4, 5, 6, 7, 7, 8, 9 };
        int key = 7;
        int result = Arrays.binarySearch(list, key);
        System.out.println(result);
        if( list[result+1] == key  || list[result-1] == key )
                System.out.println("yes we have a duplicate.");
    }
} 
```

我们在 O(1) 中的比较`if`仍然是二进制搜索的 O(logn)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-07T10:32:03.267

```
public class DuplicateNumber {

    public int findDuplicateNumber(List<Integer> numbers){

        int highestNumber = numbers.size() - 1;
        int total = getSum(numbers);
        int duplicate = total - (highestNumber*(highestNumber+1)/2);
        return duplicate;
    }

    public int getSum(List<Integer> numbers){

        int sum = 0;
        for(int num:numbers){
            sum += num;
        }
        return sum;
    }

    public static void main(String a[]){
        List<Integer> numbers = new ArrayList<Integer>();
        for(int i=1;i<30;i++){
            numbers.add(i);
        }
        //add duplicate number into the list
        numbers.add(22);
        DuplicateNumber dn = new DuplicateNumber();
        System.out.println("Duplicate Number: "+dn.findDuplicateNumber(numbers));
    }
} 
```

# wordpress - htaccess重写干扰wordpress

> ID：12372389
> 
> 赞同：2
> 
> 时间：2012-09-11T14:46:15.897
> 
> 标签：wordpress, apache, .htaccess

基本：

主站点位于：www.example.com

wordpress 安装在：www.example.com/blog

客户希望通过以下方式访问 wordpress 中的一些页面：www.example.com/advice/some-page

rewriteengine 一般工作，但是：

如果我在目录 /advice 中使用 htaccess 将 /advice/some-page 的任何请求重定向到 /blog/some-page，我会看到正确的内容，但 url 是 /blog/some-page。我希望谷歌和用户看到/advice/some-page。

我当前在 /advice 目录中的 htaccess：

```
RewriteEngine On
RewriteBase /
RewriteRule ^(.*)$ blog/$1 [R] 
```

我真的不擅长重写，所以感激地收到任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T14:49:11.423

您只需要删除 [R] 标志：

```
RewriteEngine On
RewriteBase /
RewriteRule ^(.*)$ blog/$1 
```

# php - Wordpress 编辑了 wp-config.php，现在我无法登录

> ID：12372394
> 
> 赞同：0
> 
> 时间：2012-09-11T14:46:32.090
> 
> 标签：php, mysql, wordpress

我有一个网站，我试图通过编辑我的 wp-config.php 文件来解决一些编码问题。更改没有帮助，所以我又改回来了。现在，当我尝试登录管理员时，我收到可怕的“您没有足够的权限”消息。不幸的是，我没有配置备份，但我 100% 确定它看起来像以前一样。

我试过这个： - 以不同的编码保存 wp-config.php - 复制一个新的 wp-config-sample.php，只需添加我的数据库设置

我在网上发现很多人在升级、迁移或其他原因后出现此错误，但我没有做这些事情之一，只是编辑了 wp-config.php 然后又回来了。有关于修复数据库、删除插件等的解决方案，但我不敢尝试它们，以防 WP 决定做一些“魔术”并关闭整个网站。此外，我看不到仅通过编辑 wp-config.php 文件如何损坏数据库。

还有其他想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T15:45:38.177

我们设法通过从另一个一切正常的安装复制数据库中 wp_options 表中 wp_user_roles 行中的所有信息来解决它。现在它可以正常工作了。

一个问题：这个值怎么会被编辑 wp-config.php 搞砸了？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T15:40:48.690

听起来你已经搞砸了你的角色。

注意：**我假设您在谈论 Wordpress 单博客模式，而不是多**

你可以试试这个：

1.  设置一个新数据库 - 使用不同的名称
2.  重命名你的`wp-config.php`（所以你没有）
3.  浏览到您的 wordpress 地址
    *   您将看到设置屏幕，进行正常设置
    *   您应该可以登录
4.  查看*新*数据库的`wp_usermeta`表（用户 #1 的记录）并将其与旧数据库的表（用户 #1 的`wp_usermeta`记录）进行比较
5.  在旧数据库中进行任何必要的更改以匹配新数据库。
6.  编辑您的 wp-config.php 并将设置切换回旧数据库

# java - 使用信号量保护数组

> ID：12372396
> 
> 赞同：1
> 
> 时间：2012-09-11T14:46:36.977
> 
> 标签：java, multithreading, semaphore

假设有很多线程调用该方法`m(int i)`并改变 position 中数组的值`i`。以下代码是否正确，或者是否存在竞争条件？

```
public class A{
    private int []a =new int[N];
    private Semaphore[] s=new Semaphore[N];

    public A(){
        for(int i =0 ; i<N ; i++)
           s[i]=new Semaphore(1);
    }

    public void m(int i){
        s[i].acquire();
        a[i]++;
        s[i].release();
    }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-11T14:49:16.073

代码是正确的，我没有看到任何竞争条件，尽管两者都`a`应该`s`进行`final`。*每次*使用需要获取和释放的锁时，还应该使用 try/finally ：

```
s[i].acquire();
try {
   a[i]++;
} finally {
   s[i].release();
} 
```

但是，对于更新数组，每个项目单独锁定的想法是非常不必要的。单个锁同样适用，因为主要成本是内存更新和其他本机同步。这就是说，如果实际操作*不是*a ，`int ++`那么您就可以使用 a`Semaphore`或其他`Lock`对象。

但对于简单的操作，类似以下的内容就可以了：

```
// make sure it is final if you are synchronizing on it
private final int[] a = new int[N];
...

public void m(int i) {
   synchronized (a) {
      a[i]++:
   }
} 
```

如果您真的担心阻塞，那么数组`AtomicInteger`是另一种可能性，但即使这样感觉也有点矫枉过正，除非分析器另有说明。

```
private final AtomicInteger[] a = new AtomicInteger[N];
...

public A(){
    for(int i = 0; i < N; i++)
       a[i] = new AtomicInteger(0);
}

public void m(int i) {
    a[i].incrementAndGet();
} 
```

**编辑：**

我刚刚编写了一个[快速愚蠢的测试程序](http://pastebin.com/xDiXEFP0)，它比较单个`synchronized`锁、一个`synchronized`锁`AtomicInteger`数组、数组和`Semaphore`数组。结果如下：

*   `synchronized`在`int[]`10617 毫秒
*   `synchronized``Object[]`在1827ms的数组上
*   `AtomicInteger`数组 1414ms
*   `Semaphore`数组 3211ms

**但是**，更重要的是，这是**10 个线程**，每个线程执行**1000 万**次迭代。当然它更快，但除非您真正进行数百万次迭代，否则您不会在应用程序中看到任何明显的性能改进。这就是[“过早优化”](http://en.wikipedia.org/wiki/Premature_optimization#When_to_optimize)的定义。您*将为*代码复杂性、增加错误的可能性、增加调试时间、增加维护成本等付出代价。引用 Knuth 的话：

> 我们应该忘记小的效率，比如大约 97% 的时间：过早优化是万恶之源。

现在，正如 OP 在评论中暗示的那样，这`i++`不是她/他正在保护的真正操作。如果增量更耗时（即如果阻塞增加），则需要锁数组。

# php - PHP 和 Doctrine 的不稳定错误

> ID：12372398
> 
> 赞同：0
> 
> 时间：2012-09-11T14:46:42.760
> 
> 标签：php, memory, doctrine-orm

我试图在 Google 上找到一些关于在运行我的一个项目时随机发生的这个奇怪的致命 PHP 错误的信息。

**在第 1341 行的 Doctrine/ORM/Persisters/BasicEntityPersister.php 中找不到类“Doctrine\ORM\ORMException”**

**第 0 行 Unknown 中允许的内存大小为 134217728 字节已用尽（尝试分配 47877190154432 字节）**

当显示一个页面时，这些错误在没有任何逻辑的情况下发生，该页面的源数据和已处理数据从一次调用到另一个调用保持不变，有时脚本在哪里：

*   运行完美，
*   在传输过程中有时会失败，
*   有时在服务器可以发送任何数据（包括 HTTP 标头）之前失败，
*   有时工作正常，但从呈现的 HTML 中进行后续 ajax 调用失败

我检查了日志文件，但找不到任何关于为什么会发生这种情况的线索。

有人可以告诉我他是否遇到这种问题和/或告诉我可以检查的事情以解决这个烦人的问题吗？

编辑：似乎是与预编译有关的 Smarty 问题...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T01:50:20.140

看起来 Doctrine 在内存中保留了太多对象（因此是持久性），您需要编写一些管理代码来刷新不需要使用的持久性对象。或者确保 Doctrine 使用文件系统而不是内存来存储持久对象。

# symfony - Swiftmailer//Twig 电子邮件未正确呈现

> ID：12372400
> 
> 赞同：6
> 
> 时间：2012-09-11T14:46:52.343
> 
> 标签：symfony, twig, swiftmailer

我正在尝试使用 symfony2 框架，并且正在尝试使用 swiftmailer 和 twig 发送电子邮件。问题是，在我目前的实现中，电子邮件是以 html 格式发送的（你可以看到标签，一切）。

这是我正在使用的控制器：

```
 public function formularioAction()
{   
    $enquiry = new Enquiry();
    $form = $this->createForm(new EnquiryType(), $enquiry);

    $request = $this->getRequest();
    if($request->getMethod() == 'POST'){
        $form->bindRequest($request);

        if($form->isValid()){

            $message = \Swift_Message::newInstance()
                    ->setSubject('Mail from the App')
                    ->setFrom('no-reply@app.com')
                    ->setTo('******@gmail.com')
                    ->setBody($this->render( 'AcmeDemoBundle:Demo:email.html.twig' ));

            $this->get('mailer')->send($message);
            //end of mail sending

            //redirect - it's important to prevent users from reposting the form if
            //they refresh the page
            return $this->redirect($this->generateUrl( '_formulario'));
        }
    }
    return $this->render('AcmeDemoBundle:Demo:formulario.html.twig', array('form' => $form->createView()));
} 
```

电子邮件使用的树枝模板：

```
{% extends "AcmeDemoBundle::layout.html.twig" %}

{% block title "Email de teste" %}

{% block content%}
<H1>Este é um render de um email de teste!</H1>
{% endblock%} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-11T14:59:48.243

您必须通过像这样调用 setBody() 方法来指定正文的内容类型。

```
$message->setBody($messageBody, 'text/html'); 
```

有关更多信息，请参阅：[http ://swiftmailer.org/docs/messages.html#setting-the-body-content](http://swiftmailer.org/docs/messages.html#setting-the-body-content)

# digital-signature - 如何让用户对 XML 文档进行数字签名？

> ID：12372404
> 
> 赞同：0
> 
> 时间：2012-09-11T14:47:02.607
> 
> 标签：digital-signature, public-key-encryption

我正在构建一个基于用户输入构建 XML 文档的 Web 应用程序。创建文档后，它需要遵循批准路径，例如工作流，其中多个用户“签署”文档。从用户的角度来看，签名只是检查一个字段并单击“接受”，但我需要的是在每个步骤中对文档进行数字签名，最终将其存储在数据库中。

我需要使用什么样的设备/工具？客户端浏览器上的 X.509 证书？应用程序生成的公钥/私钥？任何文档链接将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T15:04:18.860

证书通常不是由应用程序生成的（因为 PKI 是关于信任的，在证书的情况下是分层的）。用户使用私钥获取证书（为了简单起见），并将它们存储在安全的地方或硬件设备（智能卡、USB 令牌）上。

然后这些证书用于签署信息。在 Web 应用程序的情况下，您可以将数据本身传输到客户端或在那里发送数据的哈希值，但无论如何签名都发生在客户端（除了证书存储在中央服务器上并可以访问它们的极少数情况）每次使用证书时都由客户端授权）。

我们提供用于分布式数据签名的组件。[此答案](https://stackoverflow.com/questions/10656100/signing-pdfs-on-a-server-document-using-a-signature-from-the-user/10656679#10656679)包含有关此类签名如何工作的详细说明。您可以使用我们的解决方案或创建您自己的解决方案，同样可以。

# r - 如何在有序矩阵中转换数据框？

> ID：12372406
> 
> 赞同：1
> 
> 时间：2012-09-11T14:47:06.603
> 
> 标签：r

请输入以下代码：

```
A <- matrix(11, nrow = 4, ncol = 3)
A[,2] <- seq(119, 122, 1)
A[,3] <- seq(45, 42)
B <- matrix(39, nrow = 4, ncol = 3)
B[,2] <- seq(119, 122, 1)
B[,3] <- seq(35, 32)
C <- matrix(67, nrow = 4, ncol = 3)
C[,2] <- seq(119, 122, 1)
C[,3] <- seq(27, 24)

D <- rbind(A, B, C) 
```

你会得到`D`一个 12 x 3 的矩阵；我想知道`Mat`从`D`.

```
> Mat
    11 39 67
119 45 35 27
120 44 34 26
121 43 33 25
122 42 32 24 
```

实际上，`Mat`是`D`由 的第一列和第二列索引的最后一列`D`；例如，考虑`Mat[1,1]`哪个等于 45：它来自唯一`D`由 11 和 119 标识的行。

我怎样才能得到它？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T14:51:20.690

您可以使用`xtabs`：

```
xtabs(D[,3]~D[,2]+D[,1])
      D[, 1]
D[, 2] 11 39 67
   119 45 35 27
   120 44 34 26
   121 43 33 25
   122 42 32 24 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T14:52:10.057

```
library(reshape2)
dcast(data.frame(D), X2 ~ X1) 
```

# php - Yii 框架，TbGridView 文件名无效

> ID：12372408
> 
> 赞同：0
> 
> 时间：2012-09-11T14:47:14.967
> 
> 标签：php, twitter-bootstrap, yii

我有一个问题，我有 2 个表用户和数据，关系是一对一的，这里是 dataProvider 的代码

```
$dataProvider = new CActiveDataProvider('Users', array(
    'pagination'=> array(
        'pageSize'=> 10
    ),
    'criteria'=>array(
        'with' => array (
            'data'=>array(
                'joinType'=>'JOIN')
            )
        ),
    )
)); 
```

和关系`'data' => array(self::HAS_ONE, 'Data', 'id');`

和 TbGridView 的代码

```
$this->widget('bootstrap.widgets.TbGridView', array(
    'dataProvider'=>$dataProvider,
    'template'=>"{items} {pager}",
    'itemsCssClass'=>'table table-striped table-bordered table-condensed tableNews',
    'columns'=>array(
        array('name'=>'id', 'header'=>'#'),
        array('name'=>'name'),
        array('name'=>'email'),
        array('name'=>'data.id'),
        array('name'=>'data.investment_amount')
)); 
```

对于第二个表，我必须放置 data.fildname ，否则不起作用，并且第二个表的 fildnames 不可点击 ![TbGridView 截图](../Images/4f07a468b2dcfc889299f32e867e1e37.png)

可能是什么问题，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T17:53:38.627

```
 return new CActiveDataProvider("Users", array(
          'criteria'=>$criteria,
          'sort'=>array(
          'defaultOrder'=>$defaultOrder,
          'attributes'=>array(

            'id'=>array(
                        'asc'=>'t.id',
                     'desc'=>'t.id DESC',
                ),

            'data.investment_amount'=>array(
                        'asc'=>'data.investment_amount',
                     'desc'=>'data.investment_amount DESC',
                ), 

```

但如果你使用`sort`你需要在属性数组中定义所有名称

# java - USB Key 上的 Java 软件

> ID：12372417
> 
> 赞同：6
> 
> 时间：2012-09-11T14:47:54.873
> 
> 标签：java, usb

我写了一个Java软件。现在我想将它复制到 USB 密钥上，使其能够在可能没有 JVM 的计算机上以独立方式运行。这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T14:54:07.653

当然有。不要听破坏运动。[launch4j](http://launch4j.sourceforge.net/)允许您将可执行 jar、任何依赖项 jar 甚至 JRE 捆绑到可执行文件中。

不幸的是，没有办法制作一个跨平台的解决方案，因为 JRE 实现本身不是跨平台的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T14:50:41.797

您可以尝试使用 Java 转 EXE 程序，例如[Exelsior JET](http://www.excelsior-usa.com/jet.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T14:53:03.440

我认为最好的方法是您尝试将 jvm 安装在该 USB 棒上。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T14:56:47.567

对于要在其上运行 java 代码的每台计算机/架构，都需要一个 JVM。

您可以在您的 java 代码旁边为不同的体系结构提供几个 JVM。

或者您可以为特定平台（例如 MS Windows）创建可执行文件，请参阅 [如何为 Java 程序创建 .exe？](https://stackoverflow.com/questions/516399/how-do-i-create-an-exe-for-a-java-program)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-17T05:08:50.653

维基百科有一系列[便携式应用程序创建者](http://en.wikipedia.org/wiki/Portable_application_creators)。如果那是矫枉过正，只需使用私有 JRE。

如果您需要节省 USB 密钥上的空间，请查看这个[7-Zip SFX 技巧](http://www.excelsior-usa.com/blog/excelsior-jet/java-app-as-a-single-exe/)（适用于私有 JRE 和 Excelsior JET。）

# sql-server - 使用查询从 sql 视图中检索引用表的列表

> ID：12372419
> 
> 赞同：0
> 
> 时间：2012-09-11T14:47:55.210
> 
> 标签：sql-server, view, sql-view

有没有一种方法可以轻松检索视图下的表列表。例如，在以下视图中：

```
CREATE VIEW ExampleView AS
SELECT p.personId, p.surname, p.forename, p.countryCode, c.countryName
FROM persons AS p
INNER JOIN countries AS c ON p.countryCode = c.countryCode 
```

引用的表格是**个人**和**国家**

有没有办法查询系统表，给出视图名称，以取回引用的表？

我正在使用 SQL Server 2008

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:54:48.490

```
SELECT * FROM sys.dm_sql_referenced_entities(N'dbo.ExampleView', N'OBJECT'); 
```

# c++ - 在 C++ 中设计一个高性能的数值函数

> ID：12372428
> 
> 赞同：2
> 
> 时间：2012-09-11T14:48:29.200
> 
> 标签：c++, templates, metaprogramming

我正在构建一个旨在实现高性能计算的数字 C++ 库（当然，双重类型将是主要的算术类型）。因此，我大量使用模板元编程。描述我想要构建的内容以及我的“问题”何时发生可能很难阅读，因此我创建了一个玩具示例来“模拟”我想要做的事情。

考虑到我想设计一种方法，它需要一个容器，根据一些常数缩放其内容并返回缩放数字的总和。为简单起见，假设我希望它在大小为 3 的容器上工作。常量可能会有所不同，因此在编程时，程序员（lib 的用户）将不得不提供它们。问题是这些常量可以是单精度或双精度，可以用作模板参数。

不过，另一方面，我希望编译器发出代码，就像我对常量进行了硬编码一样。

考虑以下代码：

```
#include <iostream>
#include <vector>

#include <boost/array.hpp>

using namespace std;

template<class T, class Coefs>
struct scale_add{

    Coefs coefs;    

    template <class Iterator>
    T apply(Iterator it){
       return coefs[0] * (*(it)) + coefs[1] * (*(it + 1)) + coefs[2] * (*(it + 2));
    }
};

template <class T>
struct my_coefs : public boost::array<T, 3>{
    my_coefs() {
        (*this)[0] = static_cast<T>(3.0);
        (*this)[1] = static_cast<T>(2.7);
        (*this)[2] = static_cast<T>(4.78);
    }
};

int main(){

    vector<double> my_vec(3, 9.1) ;
    typedef scale_add<double,  my_coefs<double> > my_scale_add;
    my_scale_add msa;
    double result = msa.apply(my_vec.begin() );
    cout << result << endl;
    return 0;
    } 
```

如您所见，程序员将能够创建 my_scale_add 之类的类型！这是我目前的设计解决方案。我试图将“浮点数”表示为带有函数 value() 的结构，该函数将返回数字：

```
struct a1{
    typedef double type;
    static double value(){
        return 0.5;
    }
}; 
```

通过这种方式，我将类型放入类型列表等。唯一的问题是它可能会令人困惑，并且可能会面临类型重新定义等。但是当我编写类似 cout << a1::value() * 4.0 <<结束；编译器将内联它（根据我的一些参考资料）。

所以我的问题是，我怎样才能获得第二种方式的行为（a1::value()），而无需将类型打包到类型列表等中而产生巨大的编程开销？你能提出一种更有效的方式来表达第一个代码（好吧，这可以被认为是一个坏问题）？最后，我想说我不确定这个问题是否适合 stackoverflow，而且，我是 C++ 新手，不得不从什么是头文件跳转到什么是模板元编程，所以我可能忽略了中间的一些信息，这意味着我可能会问一些微不足道的事情。先感谢您 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T05:29:14.447

虽然我不完全理解您的意思，但我认为以下代码可能符合您的要求。

```
template<typename Container>
struct scale_add
{
     typedef typename Container::traits_type type;

     Container Impl ;
     template<typename Iterator>
     type apply( Iterator First ) {
          return std::inner_product( std::begin(Impl) , std::end(Impl) ,
                                     First , type(0) );
     }
};

template<typename K>
struct my_scale_add : public std::array<K , 3>
{
     typedef K traits_type ;

     my_scale_add() { 
          (*this)[0] = static_cast<K>( 1.0 );
          (*this)[1] = static_cast<K>( 2.0 );
          (*this)[2] = static_cast<K>( 3.0 );
     }
};

int main()
{
      std::vector<double> my_vec(3,9.1);
      scale_add<my_scale_add<double>> mObject ;

      std::cout << mObject.apply( std::begin(my_vec) ) << std::endl;

      return 0;
} 
```

# c# - 如何在不使用数据服务器的情况下将数据存储在客户端计算机上？

> ID：12372433
> 
> 赞同：0
> 
> 时间：2012-09-11T14:48:35.607
> 
> 标签：c#

如何在不使用数据服务器的情况下将数据存储在客户端计算机上？

我有 C# Windows 应用程序，想在用户的计算机上存储一些数据。我不想使用任何类型的数据服务器，例如 SQL Server 或 Access。用户无法读取此数据，并且此数据的结构类似于带有行的表。

存储数据的最佳方式是什么？我该如何处理这种情况？

请注意，我要编辑和更新此数据。

我所有的数据类型都是字符串，我不想只存储在内存中，因为在系统重新启动后，数据必须仍然可供我的应用程序工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:53:14.513

为清晰起见进行了编辑。

有2个问题：

1.  在哪里存储数据？%APPDATA% 是应用程序特定数据的理想选择，%UserProfile% 是用户特定数据的理想选择。
2.  您应该使用什么格式和文件类型？您可以以多种方式存储它，包括结构化或非结构化格式，例如 XML、CSV 等。如果您不希望用户能够阅读内容，可以通过某种方式对其进行加密。您还可以选择使用本地数据库类型，例如 SQLCE 或 SQLLite，它们可以提供您可能正在寻找的安全性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T14:50:58.200

如果您不想使用 DB，您可以使用 XML，这是一种非常标准的方法。

PS：如果您希望许多用户使用相同的 XML，也可以在每次操作时锁定文件，这样您就可以避免并发读/写错误。

一个显着的优势是您可以使用 LinqToXML 来执行查询 :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T14:51:19.817

您可以使用 SQL Server Compact，它是文件中的数据库

或者

如果你愿意，哟

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T16:14:59.897

我建议使用 SQL Server Compact，它是一个轻量级的、**基于文件**的数据库版本。您的用户*不必*安装 SQL Server 即可使用此选项。

这将是我的首选选项，因为它允许您使用 LINQ 使用 Entity Framework 等技术非常轻松地处理和查询文件中的数据。事实上，您可以使用 POCO 来表示您的应用程序实体，而 Entity Framework 将负责将信息读取和写入数据库。

如果您使用的是实体框架，您可以使用配置文件自动创建数据库。第一次使用任何实体时，将自动为您生成数据库文件（可以配置）。

```
<configuration>
    <connectionStrings>
        <add name="DatabaseContext"
             providerName="System.Data.SqlServerCe.4.0"
             connectionString="Data Source=C:\Paths\To\Location\DBName.abc"/>
    </connectionStrings>
</configuration> 
```

我建议使用系统上的特殊文件夹之一，以使应用程序的用户对此透明。

另请注意，您可以使用任何您想要的扩展名（DBName.abc 而不是 DBName.sdf），以便文件可以与您的应用程序相关联。

使用此方法还有一个优点，即您不必一次性将整个文件加载到内存中（即，您可以查询数据并返回数据的子集），如果您只是序列化您将无法做到这一点反对文件。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-11T14:55:00.113

因为它是一个 Windows 应用程序，您可以创建一个安装该应用程序的文件夹并创建 MS excel 文件并将您的数据保存在该 excel 文件中。

# javascript - Facebook Javascript SDK - 参数无效？

> ID：12372434
> 
> 赞同：0
> 
> 时间：2012-09-11T14:48:38.533
> 
> 标签：javascript, facebook-graph-api, facebook-javascript-sdk

我正在尝试通过 Facebook API 创建一个事件；但是，我不断收到此错误：

> `#`100 无效参数

这是代码：

```
 FB.api("/me/events", "post", {
        name: "Test Event",
        category: 1,
        subcategory: 1,
        host: "You",
        description: "Details",
        location: "London",
        start_time: "2012-10-05 15:00",
        end_time: "",
        privacy: "SECRET"
    }, function(response) {
        if (!response || response.error) {
           alert("Sorry this event could not be created");
           console.log(response.error.message);
       } else {
           alert("Created!");
       }
   }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T15:06:09.203

好的，我已经解决了这个问题。这些是创建事件的参数。

```
name: "Test event"
description: "The details"
location: "London"
start_time: "2012-10-05"
end_time: ""
privacy_type: "SECRET" 
```

# android - 如何创建 Twitter 或 Instagram 等标签以在所有 Android 平台上工作 > 2.2

> ID：12372435
> 
> 赞同：6
> 
> 时间：2012-09-11T14:48:43.360
> 
> 标签：android, tabs, compatibility

我在这里阅读了一些文章 [如何创建这样的 Android 选项卡（屏幕截图）？](https://stackoverflow.com/questions/10439232/how-to-create-android-tabs-like-this-screenshot)

稍后在评论中有 sherlock lib，它为具有 Android 2.2 的设备带来了 4.0 外观。

我的问题是，我试图让“丑陋”:) 旧的外观在新设备上工作。

像图像上的东西：

![在此处输入图像描述](../Images/2e8c40b9cd3fc58f705f5b79afe24fd1.png)

所以我想要标签，没有操作栏，只有 5 个带有图像和文本的框，最好来自字符串，因为它需要本地化。

所以，我使用 , 并在 tablayout.xml 中设置标题（来自字符串），并以编程方式从我的资源中将图像添加到某个选项卡。

```
th.setup();
    TabSpec specs = th.newTabSpec("tag1");
    //specs.setContent(new Intent(this,MyAppTab.class));
    specs.setContent(R.id.tab1);
    specs.setIndicator(getResources().getString(R.string.tab_myapp_title), getResources().getDrawable(R.drawable.ic_tab1_active)); 
```

现在发生的事情是在我的 Android 2.2 上。手机，它看起来很丑，但有图像，有点像我想要的，在妻子的 4.0 上，我看到只有文字的花哨的新标签。

如何添加标签图像以在所有 Android 版本中工作？

肿瘤坏死因子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-04T20:26:42.620

您可以使用[此方法](http://developer.android.com/reference/android/widget/TabHost.TabSpec.html#setIndicator%28android.view.View%29)将自定义视图用作选项卡指示器。

1.  膨胀自定义视图
    *   `View yourView = inflater.inflate(R.layout.my_tab_indicator, null);`
2.  填充它
    *   `((ImageView) yourView.findViewById(R.id.tab_indicator_icon)).setBitmapRessource(...)`
    *   `((TextView) yourView.findViewById(R.id.tab_indicator_title)).setText(...)`
3.  称呼`tabSpec.setIndicator(yourView);`

# mysql - sql查询或子查询

> ID：12372436
> 
> 赞同：0
> 
> 时间：2012-09-11T14:48:44.670
> 
> 标签：mysql, sql

所以我有一个名为城市的表，其属性路径（可以有重复或更多相等的条目）、名称和公里数，我需要对其进行过滤，以便我有条目，每个条目只有一个条目，用于具有最高公里数的路径。我现在拥有的是

```
SELECT cities.* 
FROM cities, categories 
group by cities.path , cities.kms 
ORDER BY cities.kms desc 
```

问题是它给了我重复的路径条目（我不想要），而且它也没有像我想要的那样按公里排序。我应该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T14:51:32.547

我认为您的查询中的表格没有任何用途`categories`，因此我在回答中将其删除。

```
SELECT c1.path, c1.name, c1.kms
    FROM cities c1
        INNER JOIN (SELECT c2.path, MAX(c2.kms) AS Maxkms
                        FROM cities c2
                        GROUP BY c2.path) q
            ON c1.path = q.path
                AND c1.kms = q.Maxkms 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T14:51:55.370

`GROUP BY path`只有`MAX(kms)`：

```
SELECT cities.path, MAX(cities.kms)
FROM cities
GROUP BY cities.path
ORDER BY cities.kms desc 
```

`ORDER BY`应该按顺序排序`kms`，除非它不是数字类型，否则可能是字符串。确保其类型。

# c# - 寻找最小精度

> ID：12372439
> 
> 赞同：3
> 
> 时间：2012-09-11T14:49:05.120
> 
> 标签：c#, algorithm, string-formatting

我正在尝试编写一种算法来使用.Net字符串格式化程序找到最小的精度位数以显示至少一个有效数字。

例如。

```
Value      Precision wanted:
-----      -----------------
10         0
 1         0
 0.1       1
 0.99      1   
 0.01      2
 0.009     3 
```

（不关心更多的数字，只关心第一个，因此 0.99 只需要 1 的精度。）

我能想到的最好的是：

```
int precision = (int)Math.Abs(Math.Min(0, Math.Floor(Math.Log10(value)))); 
```

这很好用，但我不禁想到有一个更优雅的解决方案。有没有数学高手可以帮帮我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T14:56:19.803

略短：

```
int precision = (int)Math.Max(0, -Math.Floor(Math.Log10(value))); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T17:08:10.220

浮点数是小数值的二进制表示。如果您的初始值是单精度浮点数，则将该数字乘以指数以得到该值，

```
((f & 0x7f800000) >> 23)-127 . 
```

如果指数是非负的，根据你所说的你会得到零（你有小数点前的数字）。

如果指数是负数，那么这很烦人，因为二进制数字与十进制不能很好地对齐。不过，它应该可以通过查找表来实现。查看[https://math.stackexchange.com/questions/3987/how-to-calculate-the-number-of-decimal-digits-for-a-binary-number#4080](https://math.stackexchange.com/questions/3987/how-to-calculate-the-number-of-decimal-digits-for-a-binary-number#4080)。

编辑：您应该了解浮点数的存储方式。

# java - 尝试登录 Twitter 时获取 HmacSHA1“消息验证码”（MAC）失败

> ID：12372440
> 
> 赞同：1
> 
> 时间：2012-09-11T14:49:05.470
> 
> 标签：java, twitter, twitter-oauth, twitter4j

在我的项目中，我正在尝试使用**twitter4j**集成 twitter 。我尝试使用示例代码登录办公室，我可以使用它成功发布推文，但是回到家我在 JCE.Jar 中遇到了奇怪的问题，上面写着

```
Failed to get HmacSHA1 "Message Authentication Code" (MAC)
  java.security.NoSuchAlgorithmException: Algorithm HmacSHA1 not available
at javax.crypto.Mac.getInstance(DashoA13*..)
at twitter4j.auth.OAuthAuthorization.generateSignature(OAuthAuthorization.java:317)
at twitter4j.auth.OAuthAuthorization.generateAuthorizationHeader(OAuthAuthorization.java:227)
at twitter4j.auth.OAuthAuthorization.generateAuthorizationHeader(OAuthAuthorization.java:273)
at twitter4j.auth.OAuthAuthorization.getAuthorizationHeader(OAuthAuthorization.java:75)
at twitter4j.internal.http.HttpClientImpl.setHeaders(HttpClientImpl.java:237)
at twitter4j.internal.http.HttpClientImpl.request(HttpClientImpl.java:113)
at twitter4j.internal.http.HttpClientWrapper.request(HttpClientWrapper.java:65)
at twitter4j.internal.http.HttpClientWrapper.post(HttpClientWrapper.java:102)
at twitter4j.auth.OAuthAuthorization.getOAuthRequestToken(OAuthAuthorization.java:121)
at twitter4j.auth.OAuthAuthorization.getOAuthRequestToken(OAuthAuthorization.java:104)
at twitter4j.TwitterBaseImpl.getOAuthRequestToken(TwitterBaseImpl.java:276)
at twitter4j.TwitterBaseImpl.getOAuthRequestToken(TwitterBaseImpl.java:269)
at org.twitterstats.App.main(App.java:23)
   Exception in thread "main" java.lang.AssertionError: java.security.NoSuchAlgorithmException: Algorithm HmacSHA1 not available
at twitter4j.auth.OAuthAuthorization.generateSignature(OAuthAuthorization.java:337)
at twitter4j.auth.OAuthAuthorization.generateAuthorizationHeader(OAuthAuthorization.java:227)
at twitter4j.auth.OAuthAuthorization.generateAuthorizationHeader(OAuthAuthorization.java:273)
at twitter4j.auth.OAuthAuthorization.getAuthorizationHeader(OAuthAuthorization.java:75)
at twitter4j.internal.http.HttpClientImpl.setHeaders(HttpClientImpl.java:237)
at twitter4j.internal.http.HttpClientImpl.request(HttpClientImpl.java:113)
at twitter4j.internal.http.HttpClientWrapper.request(HttpClientWrapper.java:65)
at twitter4j.internal.http.HttpClientWrapper.post(HttpClientWrapper.java:102)
at twitter4j.auth.OAuthAuthorization.getOAuthRequestToken(OAuthAuthorization.java:121)
at twitter4j.auth.OAuthAuthorization.getOAuthRequestToken(OAuthAuthorization.java:104)
at twitter4j.TwitterBaseImpl.getOAuthRequestToken(TwitterBaseImpl.java:276)
at twitter4j.TwitterBaseImpl.getOAuthRequestToken(TwitterBaseImpl.java:269)
at org.twitterstats.App.main(App.java:23)
    Caused by: java.security.NoSuchAlgorithmException: Algorithm HmacSHA1 not available
at javax.crypto.Mac.getInstance(DashoA13*..)
at twitter4j.auth.OAuthAuthorization.generateSignature(OAuthAuthorization.java:317)
... 12 more

 <dependencies>
  <dependency>
       <groupId>org.twitter4j</groupId>
       <artifactId>twitter4j-core</artifactId>
       <version>[2.2,)</version>
   </dependency> 
```

登录 twitter 的代码有点像这样。

```
public static void main(String args[]) thrwos Exception{
// The factory instance is re-useable and thread safe.
Twitter twitter = new TwitterFactory().getInstance();
twitter.setOAuthConsumer("[consumer key]", "[consumer secret]");
RequestToken requestToken = twitter.getOAuthRequestToken();
AccessToken accessToken = null;
BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
while (null == accessToken) {
  System.out.println("Open the following URL and grant access to your account:");
  System.out.println(requestToken.getAuthorizationURL());
  System.out.print("Enter the PIN(if aviailable) or just hit enter.[PIN]:");
  String pin = br.readLine();
  try{
     if(pin.length() > 0){
       accessToken = twitter.getOAuthAccessToken(requestToken, pin);
     }else{
       accessToken = twitter.getOAuthAccessToken();
     }
  } catch (TwitterException te) {
    if(401 == te.getStatusCode()){
      System.out.println("Unable to get the access token.");
    }else{
      te.printStackTrace();
    }
  }
}
//persist to the accessToken for future reference.
storeAccessToken(twitter.verifyCredentials().getId() , accessToken);
Status status = twitter.updateStatus(args[0]);
System.out.println("Successfully updated the status to [" + status.getText() + "].");
System.exit(0);
 }
private static void storeAccessToken(int useId, AccessToken accessToken){
  //store accessToken.getToken()
  //store accessToken.getTokenSecret()
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T13:02:16.523

虽然我不太确定为什么会出现这个问题，但只是尝试将版本升级到 Java 7 并且成功了！

# database - NoSQL 值得使用

> ID：12372441
> 
> 赞同：1
> 
> 时间：2012-09-11T14:49:07.493
> 
> 标签：database, database-design, nosql

最近我遇到了一个概念，`NoSQL`据我所知，它适用于处理大量数据。

我的问题是，使用的限制是什么`NoSQL`变得值得？是否仅适用于处理真正大量数据的公司，例如 Google、Facebook 等，或者即使数据量较小，也值得从 SQL 数据库切换到它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T19:35:26.130

我想知道您所说的“NoSQL 概念”是什么意思，因为它是不同数据库技术的广泛领域的总称。它们唯一的共同点是它们之间的区别：它们“不是（唯一的）SQL”。它们有截然不同的理念、用例和目标群体。

只是为了给你一个概述，这里有一些 NoSQL 数据库的大派系。

有**基于文档的数据库**，如 MongoDB 或 CouchDB。它们的优点是它们不需要一致的数据结构。当您的需求和数据库布局不断变化时，或者当您处理属于一起但看起来仍然非常不同的数据集时，它们很有用。当您有很多表，其中包含两个名为“key”和“value”的列，那么这些可能值得研究。

有像 Neo4j 或 GiraffeDB 这样的**图形数据库。**他们的重点是通过数据与其他数据的关系来定义数据。当您有很多带有主键的表时，它们是另外两个表的主键（可能还有一些描述它们之间关系的数据），那么这些可能适合您。

然后你就有了简单**的键值存储**，比如 MemcacheDB、Cassandra 或 Google 的 BigTable。它们非常简单，但这使它们快速且易于使用。如果您不需要存储过程、约束、触发器和所有这些高级数据库功能，而您只想快速存储和检索数据，那么这些就是您的理想之选。

这些只是新数据库世界的几个方面。

但是仍然有一个领域是关系数据库擅长的，那就是遵循 ACID 原则。大多数 NoSQL 数据库并不能完全保证所有这四个：

*   原子事务（一起处理的命令链，n-order 和 all-or-none）
*   具有约束和触发器的一致数据库模式，可确保数据库中不存在垃圾数据。
*   交易隔离 - 保证不受同时发生的其他交易影响的交易。
*   耐用性 - 即使在系统突然崩溃的情况下也不会丢失数据*

(* 公平地说，上面列出的大多数数据库确实非常耐用，尤其是那些易于设置为冗余故障转移集群的数据库。

# c++ - 显式转换函数、直接初始化和转换构造函数

> ID：12372442
> 
> 赞同：3
> 
> 时间：2012-09-11T14:49:07.430
> 
> 标签：c++, c++11, initialization, type-conversion, language-lawyer

后标准草案 n3376 以使用显式转换函数到用户定义类型的示例 (12.3.2:2) 为例：

```
class Y { };
struct Z {
  explicit operator Y() const;
};
void h(Z z) {
  Y y1(z); // OK: direct-initialization
} 
```

根据 12.3.2:2，显式转换函数“*仅被视为直接初始化的用户定义转换*”；但是，这似乎允许：

```
struct Y { Y(int); };
struct Z {
  explicit operator int() const;
};
void h(Z z) {
  Y y1(z); // direct-initialization
} 
```

这似乎与标准的意图相冲突，并且确实被 gcc-4.7.1 拒绝：

```
source.cpp: In function 'void h(Z)':
source.cpp:4:9: error: no matching function for call to 'Y::Y(Z&)'
source.cpp:4:9: note: candidates are:
source.cpp:1:12: note: Y::Y(int)
source.cpp:1:12: note:   no known conversion for argument 1 from 'Z' to 'int'
source.cpp:1:8: note: constexpr Y::Y(const Y&)
source.cpp:1:8: note:   no known conversion for argument 1 from 'Z' to 'const Y&'
source.cpp:1:8: note: constexpr Y::Y(Y&&)
source.cpp:1:8: note:   no known conversion for argument 1 from 'Z' to 'Y&&' 
```

gcc 拒绝从`Z`到`Y`via的转换是正确的`int`，还是标准确实允许这种用法？

我考虑了提到的*直接初始化*的上下文；根据 8.5:16 中对类类型的直接初始化定义，使用初始化表达式作为其参数调用构造函数，因此通过隐式转换序列 (13.3.3.1) 将其转换为参数类型。由于隐式转换序列是隐式转换 (4:3)，因此模型复制初始化 (8.5:14) 而不是直接初始化，因此 12.3.2:2 中的语言必须引用整个表达式。

另请注意，这并不违反 12.3:4（多个用户定义的转换）；相同的编译器对删除后的相同代码感到满意`explicit`（Clang 和 Comeau 也是如此）：

```
struct Y { Y(int); };
struct Z { operator int(); };
void h(Z z) {
  Y y1(z); // direct-initialization
} 
```

* * *

我认为 Jesse Good 已经确定了 13.3.1.4:1 中的`operator Y`和`operator int`案例之间的区别，但我仍然担心第三种情况：

```
struct X {};
struct Y { Y(const X &); };
struct Z {
  explicit operator X() const;
};
void h(Z z) {
  Y y1(z); // direct-initialization via class-type X
} 
```

根据13.3.1.4:1，使用as和as`X`将绑定到`const X &`构造函数的单个参数的临时初始化在直接初始化上下文中进行。我认为该条款不正确，应改为：`Y``T``X``S``Z`

> ### 13.3.1.4 通过用户定义的转换复制初始化类[over.match.copy]
> 
> 1 - [...] 当初始化一个临时绑定到构造函数的第一个参数时，该构造函数将引用可能*cv*限定为它的第一个参数，在*对象*`T`的直接初始化的上下文中使用单个参数调用*类型为 "cv2 `T`"*的，还考虑了显式转换函数。[...]

为了避免混淆，我认为 12.3.2:2 也应该修改：

> ### 12.3.2 转换函数[class.conv.fct]
> 
> 2 - 转换函数可能是显式的 (7.1.2)，在这种情况下，它仅被视为*在某些上下文 (13.3.1.4、13.3.1.5、13.3.1.6* ) 中用于直接初始化 (8.5) 的用户定义转换. [...]

对以上有什么意见吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T16:08:24.740

根据 8.5 和 13.3.1.3，`Y`考虑了 的构造函数，并通过重载决议挑选出最好的构造函数。在这种情况下，相关的构造函数是`Y(int);`复制和移动构造函数。在重载决议 13.3.2 可行函数 [over.match.viable] 的过程中指定了这一点：

> 3 其次，为了`F`成为一个可行的函数，每个参数都应该存在一个*隐式转换序列*（13.3.3.1），该序列将该参数转换为 的相应参数`F`。[...]

对于所有这些构造函数，都`Z`没有`int`从`Y`. 为了说服自己，让我们研究一下标准在 13.3.3.1 隐式转换序列 [over.best.ics] 中对隐式转换序列的说法：

> 1 隐式转换序列是用于将函数调用中的参数转换为被调用函数的相应参数类型的转换序列。转换序列是第 4 条中定义的隐式转换，这意味着它受用于初始化对象或单个表达式（8.5、8.5.3）的引用的规则控制。

如果我们交叉引用第 4 条，那么我们会了解到隐式转换是根据复制初始化定义的（即`T t=e;`，其中`T`is`int`和`e`is `z`）：

> `T t=e;`（§4.3）对于某些发明的临时变量 t（8.5），当且仅当声明格式正确时，表达式 e 才能隐式转换为类型 T。[...]

所以我采取 12.3.2:2 不申请*这个*初始化，这发生在直接初始化的更大上下文中。否则将与最新的段落相矛盾。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T23:56:31.793

正如 Luc Danton 的回答中所指出的，隐式转换是根据复制初始化定义的。然后，如果我们看 13.3.1.4:1[通过用户定义的转换复制-初始化类]：

> 当初始化表达式的类型是类类型“cv S”时， 考虑 S 及其基类**的非显式转换函数。**当初始化临时绑定到构造函数的第一个参数时，该构造函数将引用可能 cv 限定的 T 作为其第一个参数，在直接初始化的上下文中使用单个参数调用，还考虑显式转换函数。那些没有隐藏在 S 中并产生其 cv-unqualified 版本**与 T 相同类型或者是其派生类的类型是候选函数**. 返回“对 X 的引用”的转换函数根据引用的类型返回类型 X 的左值或 x 值，因此被认为在选择候选函数的过程中产生 X。

如果我理解正确，第一个有效，因为转换函数产生 a `Y`，因此是引用中第二个强调部分指出的候选函数，但是，在第二种情况下，候选函数集是空的，因为有没有转换函数，`Y`也没有第一个强调部分指出的非显式转换函数。

**关于第三种情况：**

在找到[缺陷报告 1087](http://www.comeaucomputing.com/iso/cwg_defects.html#1087)之后，显然意图是在您提到的直接初始化 cv2 T 的对象时允许、复制、移动和模板构造函数。~~如果您阅读 13.3.1.4 的第一段，它会说`Assuming that “cv1 T” is the type of the object being initialized, with T a class type`，所以我认为这意味着`of an object of type "cv2 T"`您提到了。~~但是，（阅读后），似乎由于缺陷报告引起的更改导致措辞变得模糊，并没有涵盖您提出的第三种情况。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-11T18:12:22.940

我不是语言律师，但是标准的措辞对我来说意味着将转换运算符标记为`explicit`要求您明确指定转换类型（即`int`）作为 object 初始化的一部分`y1`。使用 code `Y y1(z)`，您似乎依赖于隐式转换，因为您为 variable 指定的类型`y1`是`Y`.

因此，我希望在这种情况下正确使用显式转换运算符是：

```
Y y1( int(z) ); 
```

或者，由于您正在有效地指定演员表，最好

```
Y y1( static_cast<int> (z) ); 
```

# perl - 根据条件暂停和恢复 Perl 脚本

> ID：12372443
> 
> 赞同：1
> 
> 时间：2012-09-11T14:49:07.983
> 
> 标签：perl

我编写了一个 Perl 脚本，它一个接一个地连接到一组 URL。每次连接到 URL 时，它都会获取结果并对其执行一些操作。

但是，有几种可能会发生错误。

我试图解决的最重要的问题是可用性问题。Internet 连接可能会在两者之间停止工作。因此，假设我有一个包含 1000 个 URL 的列表，脚本已成功通过其中的 500 个，然后 Internet 停止工作，因此脚本因错误而中止。我想控制这种情况并在这里实现暂停和恢复功能。

几行代码来解释：

```
$mech=WWW::Mechanize->new();
$mech->timeout(10);

$url="http://example.com/index.php?id=";

while(<INPUT>)
{
chomp $_;
$word=$_;
$url=$url.$word;
eval{$mech->get($url);};

if($@)
{
  # Pause the Script once the if condition evaluates to true
}

....

} 
```

可能有几种情况我想暂停脚本。

所以，我知道我需要向脚本传递某种信号，这会导致它暂停。同时，应该有一个功能提供给最终用户，他们可以按“一些组合键”来恢复脚本。

我的猜测是，这将涉及一些操作系统 API 调用。

在 Linux 上，有一种方法可以通过按 Ctrl+Z 组合键来暂停进程。

但是，我不确定如何在 Perl 脚本中自动执行此操作。

如果您需要更多详细信息以便找到解决方案，请告诉我。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-11T15:35:38.210

在等待读取时阻塞进程是非常标准的。当它被阻塞时，它不会收到任何 CPU 时间。除了 Perl 通常所做的之外，不需要任何操作系统调用。因此，只需发出提示“准备恢复时按 Enter，然后阅读`STDIN`.

Blocked-on-IO 是操作系统进程表的*标准*状态。最近，我在 Perl 中编写了一个套接字测试脚本来充当虚拟服务器。一天晚上我匆忙离开，早上在我的虚拟服务器终端上发现“正在等待端口 3371...”提示。它会保持这种状态数周。

因此，您可以将整个事情包装在一个*标记*的IO 循环中，而不是像这样使用循环控制来代替死亡或呱呱坠地：

```
BIT_OF_WORK:
while ( $more_work ) { 
    ALL_GOOD:
    while ( $all_good ) {
       ...
       my $socket = open_socket() or last ALL_GOOD;
       ...
       last BIT_OF_WORK unless ( $more_work = @queue );
       ...
    }
    say 'Detected Network Down. Press Enter to continue';
    my $user_input = <STDIN>;
}
say 'Phew, that was a lot of work!'; 
```

您甚至可能会发现`redo`更多适合您的口味。

# python - 单独线程上的扭曲反应器调用

> ID：12372444
> 
> 赞同：2
> 
> 时间：2012-09-11T14:49:08.833
> 
> 标签：python, multithreading, twisted

我正在开发一个应用程序，该应用程序涉及使用 twisted api 通过 tcp 获取数据。我们的进程是侦听器应用程序，它不断侦听事件并执行以下操作..

1.  处理事件通知并构建字典以将其发送到第三方应用程序
2.  为了完成字典..它使用twisted api调用一个进程来获取一些额外的数据并完成字典。

单次执行后，我无法在主线程上执行扭曲的 api 执行..反应器停止并且主线程没有进一步的进展..

我想要的是：

1.  对于每个事件通知 --- 假脱机一个新线程以通过 tcp 进行扭曲调用以获取数据。
2.  将 mainThread 与 newThread 连接以等待其完成
3.  获取结果，与一半构建的字典合并并将其发送到第三方应用程序。

* * *

假设我在主线程中听 eventObj1 ---

处理包括步骤 1---step2---step3---step4--send to party。

假设第 4 步涉及通过 tcp 获取数据，我们应该等到结果可用，然后才能完成字典并将其发送给第三方。

因此，当 eventObj1 出现时，我将其排队以通过 tcp 获取。这样做时我说`reactor.start()` **（反应器在主线程中启动）**，一段时间后我得到数据并调用回调 dict 为 event1 构建并发送给第三方。

但是我不能再排队等待数据获取，直到我这样做`reactor.stop()`..因为直到`reactor.stop()`没有被调用主线程不能回去处理eventObj2 ..

所以我认为，我需要的是在单独的线程中启动反应器..并在主程序退出之前继续从主线程停止反应器中排队事件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T23:19:32.307

你不需要任何线程。你只是想让反应器做多件事，这实际上是拥有反应器的全部意义。请参阅此问题以获取解释：[Twisted reactor 在单个程序中启动多次？](https://stackoverflow.com/questions/5827304/twisted-reactor-starting-multiple-times-in-a-single-program)

# redmine - 从 Bugzilla 导入到 Redmine

> ID：12372445
> 
> 赞同：1
> 
> 时间：2012-09-11T14:49:08.623
> 
> 标签：redmine, bugzilla, redmine-plugins

我有一个用于项目管理的 Redmine 实例。此外，我有一个 Bugzilla 实例，其中包含错误/功能/票证。

有没有办法将选定的错误从 BZ 导入到 Redmine？我需要这是一个可重复的任务，每天运行几次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T11:18:52.287

适当修改一些导入脚本应该可以解决问题。

我曾经使用[https://github.com/ralli/migrate_from_bugzilla](https://github.com/ralli/migrate_from_bugzilla)将一次从 Bugzilla 导入到 Redmine。即使在能够对我们的安装进行一些特定更改之前，我从未见过 ruby​​。

# c# - LINQ .FromCache().ToList()？

> ID：12372448
> 
> 赞同：0
> 
> 时间：2012-09-11T14:49:15.417
> 
> 标签：c#, linq, caching, ienumerable, ilist

`.FromCache()`在结果集上使用时`IQueryable`，我应该另外调用`.ToList()`，还是可以只`IEnumerable<>`使用FromCache返回物化查询返回的结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T14:57:53.200

我假设您使用的是来自[http://petemontgomery.wordpress.com/2008/08/07/caching-the-results-of-linq-queries/](http://petemontgomery.wordpress.com/2008/08/07/caching-the-results-of-linq-queries/)的代码的衍生版本。如果您查看`FromCache`实现，您会看到`query.ToList()`已经调用了 。这意味着评估的列表是缓存的。所以，

你不需要打电话`ToList()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T14:57:32.480

这完全取决于你想用它做什么。如果您只是要检查`foreach`一次，那么您不妨将其保留为`IEnumerable`. 没有必要为了立即丢弃它而建立一个列表。

如果您计划多次迭代它可能是最好的`ToList`，这样您就不会`IQueryable`多次访问底层。`ToList`如果基础查询可能随时间变化并且您不希望这些更改反映在您的查询中，您也应该这样做。

如果您可能不需要迭代所有项目（您可能最终在第一个项目之后停止，或者中途停止，或类似的东西），那么最好将其保留为`IEnumerable`可能避免甚至获取一些数量数据放在第一位。

如果该方法不知道将如何使用它，并且它只是一个辅助方法，将被尚未编写的代码使用，那么请考虑返回`IEnumerable`. `ToList`如果调用者有令人信服的理由将其转换为列表，则调用者可以调用它。

对我来说，作为一般规则，我会留下这样的查询，`IEnumerable`除非我有一些令人信服的理由将其设为`List`.

# python - 使用 Python 从用户那里获取时间数据来安排未来 10 分钟的任务

> ID：12372450
> 
> 赞同：0
> 
> 时间：2012-09-11T14:49:19.963
> 
> 标签：python

我试图让 Python 检查给定的时间是否在未来至少 10 分钟。输入数据时，我总是返回“else”子句；`The scheduled time must be at least 10 minutes from now`
这是到目前为止我正在使用的代码：

```
while len(schedTime) == 0:
        schedTime = raw_input('Scheduled Time (hh:mm): ')

        schedHr = schedTime.split(':')[0]
        schedMi = schedTime.split(':')[1]

        try:
            testTime = int(schedHr)
            testTime = int(schedMi)
        except:
            print 'The scheduled time must be in the format hh:mm)'
            schedTime = ''
            continue

        if int(self.hr) <= int(schedHr) and int(self.mi) + 10 <= int(schedMi):
            pass
        else:
            print 'The scheduled time must be at least 10 minutes from now'
            schedTime = '' 
```

脚本的第二部分再往下一点（很多）：

```
 ### Get the current time
    now  = datetime.datetime.now()
    yrF = now.strftime('%Y')
    moF = now.strftime('%m')
    dyF = now.strftime('%d')

    then = now + datetime.timedelta(minutes=10)
    self.hr = then.strftime('%H')
    self.mi = then.strftime('%M') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T15:02:40.050

考虑使用日期时间库：[http](http://docs.python.org/library/datetime.html) ://docs.python.org/library/datetime.html 。您可以创建两个 timedelta 对象，一个用于当前时刻，一个用于计划时间。使用减法，您可以查看预定时间是否距离现在不到 10 分钟。

例如

```
t1 = datetime.timedelta(hours=self.hr, minutes=self.mi)
t2 = datetime.timedelta(hours=schedHr, minutes=schedMi)
t3 = t2 - t1
if t3.seconds < 600:
    print 'The scheduled time must be at least 10 minutes from now'
    schedTime = '' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T15:16:47.370

您应该使用 timedelta 对象。例如：

```
tdelta = datetime.timedelta(minutes=10)
#read in user_time from command line
current_time = datetime.datetime.now()
if user_time < current_time + tdelta:
    print "Something is wrong here buddy" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T14:54:28.363

这个脚本有几个问题，最明显的是你没有考虑小时翻转。例如，如果时间是下午 5 点并且有人在下午 6 点输入，则子句：

```
int(self.hr) <= int(schedHr) and int(self.mi) + 10 <= int(schedMi) 
```

将是假的，因为 self.mi 是 00 而 schedMi 是 00。

# php - jquery将属性添加到多个选择下拉列表

> ID：12372465
> 
> 赞同：1
> 
> 时间：2012-09-11T14:49:49.427
> 
> 标签：php, jquery, drupal

我有代码（根据 Brad Christie 的建议进行了编辑）：

```
drupal_add_js('

jQuery(document).ready(function(){ 

jQuery("#selFinishes option").each(function(index) {
if (jQuery(this).val() == ' . $filter_color . ') {
jQuery(this).attr("selected","selected")
}   
})

});
', "inline"); 
```

它成功地将“选定”属性（通过 PHP 添加 $filter_color）添加到选定值。但是当我像这样定位多个选择字段时：

```
 drupal_add_js('

jQuery(document).ready(function(){ 

jQuery("#selFinishes option").each(function(index) {
if (jQuery(this).val() == ' . $filter_color . ') {
jQuery(this).attr("selected","selected")
}   
})

 jQuery("#selThemes option").each(function(index) {
if (jQuery(this).val() == ' . $filter_theme . ') {
jQuery(this).attr("selected","selected")
}   
})

});
', "inline"); 
```

两个循环都无法工作！

感谢您的提示！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T15:05:37.150

上面的代码显然是混合了 javascript 和 php，但无法判断它可能有什么问题。您应该检查（通过在浏览器中查看源代码）生成的 javascript 代码是否是您想要的。如果可能，请在此处发布生成的 javascript。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T15:13:36.563

我有根据的猜测是，生成的 JavaScript 在输出时是无效的。通过变量名 ( `$filter_color`& `$filter_theme`) 猜测其中一个（或两个）很可能是导致测试`if (...val() == string)`失败的字符串，这在术语中会使整个 JavaScript 块导致语法错误并完全失败。

尝试更改输出以将值包含在字符串中（可能类似于以下内容）：

```
[snip].val() == "' . $filter_theme . '") {[/snip] 
```

请注意，我在 PHP 连接前后的变量两侧添加了双引号。这应该修复语法应该让实习生再次工作。

*同样，您的问题中的信息太少，但这将是我对解决方案的猜测*

# android - 从我的 android 应用程序查询 google places api 时请求被拒绝

> ID：12372466
> 
> 赞同：1
> 
> 时间：2012-09-11T14:49:49.083
> 
> 标签：android, google-places-api

我正在构建一个 android 应用程序，它获取用户位置并使用 google places api 返回附近的位置。

我有一个 api 密钥，我正在使用这个 url：

> [https://maps.googleapis.com/maps/api/place/search/json?location=-33.8670522,151.1957362&radius=500&types=food&name=harbour&sensor=false?key=mykey](https://maps.googleapis.com/maps/api/place/search/json?location=-33.8670522,151.1957362&radius=500&types=food&name=harbour&sensor=false?key=mykey)

我不断进入`REQUEST_DENIED`我的安卓应用程序。该链接在浏览器上运行良好，它返回一个 json。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T01:46:42.997

看起来你有一个问号`sensor=false`而不是一个＆符号。试试这个：

[https://maps.googleapis.com/maps/api/place/search/json?location=-33.8670522,151.1957362&radius=500&types=food&name=harbour&sensor=false&key=mykey](https://maps.googleapis.com/maps/api/place/search/json?location=-33.8670522,151.1957362&radius=500&types=food&name=harbour&sensor=false&key=mykey)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T18:09:50.623

我在从我的 android 应用程序连接到 Places API 并收到请求被拒绝错误时遇到了同样的问题。下面的帖子解决了我的问题。它解释说，Places API 目前不支持从 API 控制台生成的 Android 或 iOS 密钥。我将为我的应用程序使用浏览器密钥。

[stackoverflow Places API 问题](https://stackoverflow.com/questions/14654758/google-places-api-request-denied-for-android-autocomplete-even-with-the-right-a)

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-08T11:06:48.450

我遇到了同样的问题，使用浏览器密钥作为你在 android 上的密钥。这对我有用。创建浏览器密钥时，您无需填写任何内容。

# excel - 将 Excel 行转换为列（比转置更智能）

> ID：12372468
> 
> 赞同：1
> 
> 时间：2012-09-11T14:49:53.353
> 
> 标签：excel, vba

我有一些数据已由会计系统输出，但需要按摩。每张发票都输出一行，但发票上的产品类别输出为一列 - 我希望所有数据都在一行上。

![Excel 示例图像](../Images/8a3724f29b6ff79432a218894f63c875.png)

（我刚刚发现作为一个新用户到这里我不能发布图片，所以这个链接链接到一个 jpg 来解释我的意思）

所以图像显示了数据当前是如何输出的以及它需要如何输出。我假设我需要使用 VBA 来执行此操作（实际上有 1000 行数据，并且每天都会生成一个新工作表），但我对在 VBA 中使用哪些函数的任何其他想法或示例感兴趣（我我是一名 delphi 开发人员，多年来没有在 VBA 中写过任何东西，但我相信我可以通过一些提示将手转向它！）

非常感谢

大卫

# javascript - 如何从其中心为 div 设置动画

> ID：12372470
> 
> 赞同：0
> 
> 时间：2012-09-11T14:49:56.767
> 
> 标签：javascript, jquery

我正在尝试从中心为 div 标签设置动画。最初我希望 div 标签不可见。当用户点击链接时，这个 div 标签应该从它的中心开始动画。如何使用 jquery 实现这一点。这是我当前的代码。

```
<a href="#" class="linkone">link one</a><br><br><br><br>
<section class="one">one</section> 
```

这是CSS

```
.one {
        margin: 0 auto;
        width: 200px;
        height: 200px;
        border: 1px solid red;
        background: lightblue;
    } 
```

这是我的jQuery

```
$('a').on('click', function (e) {
    e.preventDefault();
    var w = 200; //$('.one').outerWidth();
    var h = 200; //$('.one').outerHeight();
    var x = $('.one').width() / 2;
    var y = $('.one').height() / 2;
    var startW = h - y/2;
    var startH = w - x/2;
    var endTop = y - h/2;
    var endLeft = x - w/2;

    $('.one').animate({
        opacity: 1,
        width: (w+200) + 'px',
        height: (h+200) + 'px',
        top: endTop+'px',
        left: endLeft+'px'
    }, 1000);

    console.log(endLeft);
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T15:06:35.303

像这样的东西：http: [//jsfiddle.net/TJNTq/](http://jsfiddle.net/TJNTq/)

```
$('.linkone').on('click', function (e) {
    e.preventDefault();
    var w = 200; //$('.one').outerWidth();
    var h = 200; //$('.one').outerHeight();
    var x = $('.one').width() / 2;
    var y = $('.one').height() / 2;
    var startW = h - y/2;
    var startH = w - x/2;
    var endTop = y - h/2;
    var endLeft = x - w/2;

    $('.one').show().animate({
        opacity: 1,
        width: (w+200) + 'px',
        height: (h+200) + 'px',
        marginTop: 0 + 'px'
    }, 1000);

    console.log(endLeft);
}); 
```

请注意，您的 top 和 left 动画没有做任何事情，因为`.one`div 没有绝对或相对定位。

# tabs - 在悬停时暂停 Twitter 引导选项卡

> ID：12372471
> 
> 赞同：1
> 
> 时间：2012-09-11T14:49:59.037
> 
> 标签：tabs, twitter-bootstrap

我让 twitter 引导选项卡按时间顺序更改。当我将鼠标悬停在它们上方时，我只想让它们停下来。这是他们按时间顺序更改的示例...

[http://library.buffalo.edu/index-km.html](http://library.buffalo.edu/index-km.html)

![在此处输入图像描述](../Images/13e5e59dd2506580495f03bde1f90064.png)

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T18:00:10.037

[我在jsfiddle](http://jsfiddle.net/maxisam/Vje9U/6/)建立了你想要的东西。让我知道这是否是你想要的。

更新说明：把css放在上面让它看起来更好看

# java - 为什么'this'可以用作Java中的参数？

> ID：12372473
> 
> 赞同：1
> 
> 时间：2012-09-11T14:50:03.880
> 
> 标签：java, android

```
public class Activity01 extends Activity implements OnClickListener,
        ViewFactory {
        ...
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            LinearLayout main_view = new LinearLayout(this);
            m_Switcher = new ImageSwitcher(this);
            main_view.addView(m_Switcher);
            m_Switcher.setId(SWITCHER_ID);
            m_Switcher.setFactory(this);
            m_Switcher.setOnClickListener(this);
            setContentView(main_view);
            ...
        }

        public void onClick(View v) {
            ...
        }
    } 
```

上面的代码来自一个Android项目，下面函数的参数设置为'this'，为什么？

```
m_Switcher.setOnClickListener(this); 
```

根据javadoc，这里应该如下所示：

```
public void setOnClickListener (View.OnClickListener l) 
```

这意味着参数应该是这样的：`View.OnClickListener`

那么为什么“这个”会在那里呢？谢谢！

注意：根据答案，我在上面给出了更完整的代码。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-11T14:52:30.823

在类声明中，您将找到它`extends`或`implements` `OnClickListener`。这意味着该类可以用作一个`OnClickListener`（因为它是其中之一）。这就是为什么你可以在这里使用**它**。

# javascript - 在 KineticJS 中缩放到固定点

> ID：12372475
> 
> 赞同：8
> 
> 时间：2012-09-11T14:50:09.590
> 
> 标签：javascript, html, canvas, scaling, kineticjs

我在将容器缩放到固定点时遇到了一些问题。
就我而言，我正在尝试将舞台缩放（缩放）到鼠标光标。

这是使用纯画布的一种方法：http: [//phrogz.net/tmp/canvas_zoom_to_cursor.html](http://phrogz.net/tmp/canvas_zoom_to_cursor.html)（如[Zoom Canvas to Mouse Cursor 中](https://stackoverflow.com/questions/5189968/zoom-canvas-to-mouse-cursor)所述）

我只是不知道如何在使用 KineticJS API 时应用相同的逻辑。

示例代码：

```
var position = this.stage.getUserPosition();
var scale = Math.max(this.stage.getScale().x + (0.05 * (scaleUp ? 1 : -1)), 0);
this.stage.setScale(scale);
// Adjust scale to position...?
this.stage.draw(); 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-01T19:59:24.390

经过大量的努力和搜索和尝试，使用[@Eric Rowell](https://stackoverflow.com/users/947917/eric-rowell)提供的提示和 SO 问题中发布的代码[Zoom in a point (using scale and translate)](https://stackoverflow.com/questions/2916081/zoom-in-on-a-point-using-scale-and-translate)我终于得到了一个固定点的放大和缩小工作使用[KineticJS](http://kineticjs.com/)。

这是一个有效的[演示](http://jsfiddle.net/FnwS5/78/)。

这是代码：

```
var ui = {
    stage: null,
    scale: 1,
    zoomFactor: 1.1,
    origin: {
        x: 0,
        y: 0
    },
    zoom: function(event) {
        event.preventDefault();
        var evt = event.originalEvent,
            mx = evt.clientX /* - canvas.offsetLeft */,
            my = evt.clientY /* - canvas.offsetTop */,
            wheel = evt.wheelDelta / 120;
        var zoom = (ui.zoomFactor - (evt.wheelDelta < 0 ? 0.2 : 0));
        var newscale = ui.scale * zoom;
        ui.origin.x = mx / ui.scale + ui.origin.x - mx / newscale;
        ui.origin.y = my / ui.scale + ui.origin.y - my / newscale;

        ui.stage.setOffset(ui.origin.x, ui.origin.y);
        ui.stage.setScale(newscale);
        ui.stage.draw();

        ui.scale *= zoom;
    }
};

$(function() {
    var width = $(document).width() - 2,
        height = $(document).height() - 5;
    var stage = ui.stage = new Kinetic.Stage({
        container: 'container',
        width: width,
        height: height
    });
    var layer = new Kinetic.Layer({
        draggable: true
    });
    var rectX = stage.getWidth() / 2 - 50;
    var rectY = stage.getHeight() / 2 - 25;

    var box = new Kinetic.Circle({
        x: 100,
        y: 100,
        radius: 50,
        fill: '#00D200',
        stroke: 'black',
        strokeWidth: 2,
    });

    // add cursor styling
    box.on('mouseover', function() {
        document.body.style.cursor = 'pointer';
    });
    box.on('mouseout', function() {
        document.body.style.cursor = 'default';
    });

    layer.add(box);
    stage.add(layer);

    $(stage.content).on('mousewheel', ui.zoom);
});​ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-12T01:01:19.580

您需要偏移舞台，使其中心点位于固定点。这是一个例子，因为舞台的中心点默认在画布的左上角。假设您的舞台宽 600 像素，高 400 像素，并且您希望舞台从中心缩放。你需要这样做：

```
var stage = new Kinetic.Stage({
   container: 'container',
   width: 600,
   height: 400,
   offset: [300, 200]
}; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-07T20:03:12.477

更新了[@juan.facorro](/users/519383/juan-facorro)的演示以缩放形状而不是舞台

[jsFiddle](http://jsfiddle.net/D6xTg/)

```
var ui = {
    stage: null,
    box: null,
    scale: 1,
    zoomFactor: 1.1,
    zoom: function(event) {
        event.preventDefault();
        var evt = event.originalEvent,
            mx = evt.offsetX,
            my = evt.offsetY,
            wheel = evt.wheelDelta / 120; //n or -n
        var zoom = (ui.zoomFactor - (evt.wheelDelta < 0 ? 0.2 : 0));
        var newscale = ui.scale * zoom;

        var origin = ui.box.getPosition();
        origin.x = mx - (mx - origin.x) * zoom;
        origin.y = my - (my - origin.y) * zoom;

        ui.box.setPosition(origin.x, origin.y);
        ui.box.setScale(newscale);
        ui.stage.draw();

        ui.scale *= zoom;
    }
};

$(function() {
    var width = $(document).width() - 2,
        height = $(document).height() - 5;
    var stage = ui.stage = new Kinetic.Stage({
        container: 'container',
        width: width,
        height: height
    });
    var layer = new Kinetic.Layer();
    var rectX = stage.getWidth() / 2 - 50;
    var rectY = stage.getHeight() / 2 - 25;

    var box = ui.box = new Kinetic.Circle({
        x: 100,
        y: 100,
        radius: 50,
        fill: '#00D200',
        stroke: 'black',
        strokeWidth: 2,
        draggable: true
    });

    // add cursor styling
    box.on('mouseover', function() {
        document.body.style.cursor = 'pointer';
    });
    box.on('mouseout', function() {
        document.body.style.cursor = 'default';
    });

    layer.add(box);
    stage.add(layer);

    $(stage.content).on('mousewheel', ui.zoom);
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-09-13T21:41:25.563

上面的演示仅在舞台的 x 和 y 坐标为 0 时才有效。例如，如果舞台是可拖动的，它将在拖动时更改这些坐标，因此它们需要包含在偏移计算中。这可以通过从画布偏移中减去它们来实现：

[jsfiddle](http://jsfiddle.net/FnwS5/117/ "jsfiddle")

```
zoom: function(event) {
    event.preventDefault();
    var evt = event.originalEvent,
        mx = evt.offsetX - ui.scale.getX(),
        my = evt.offsetY - ui.scale.getY(),
    var zoom = (ui.zoomFactor - (evt.wheelDelta < 0 ? 0.2 : 0));
    var newscale = ui.scale * zoom;

    var origin = ui.box.getPosition();
    origin.x = mx - (mx - origin.x) * zoom;
    origin.y = my - (my - origin.y) * zoom;

    ui.box.setPosition(origin.x, origin.y);
    ui.box.setScale(newscale);
    ui.stage.draw();

    ui.scale *= zoom;
} 
```

# iphone - 不应根据权限 ios 加载标签栏项目

> ID：12372480
> 
> 赞同：0
> 
> 时间：2012-09-11T14:50:17.563
> 
> 标签：iphone, ios, uitabbarcontroller, uitabbar

我正在尝试加载具有多个视图的选项卡栏，但我希望只有在用户具有权限的情况下才打开几个选项卡。是否有任何代表电话可以处理这个问题？我在 tabbardelegate 中查看了它只有 didSelectItem 不像文本字段有 bool 用于返回文本，所以我选择返回或不返回。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:56:53.407

你可以使用`- (void)tabBar:(UITabBar *)tabBar didSelectItem:(UITabBarItem *)item`你讨论过的。

```
- (void)tabBar:(UITabBar *)tabBar didSelectItem:(UITabBarItem *)item {
    if (item == 2 || item == 3) { //Tab 2 and 3 are protected
        if (!userHasPermission) {
            tabBar.selectedItem = 0; //Make user go to first tab if the user does not have permission.
        }
    }
} 
```

或者，如果您希望禁用某些项目。在你的`-viewDidLoad`

```
if (!userHasPermission) {
    UITabBarItem *tabBarItem = [[myTabBar items] objectAtIndex:2];
    [tabBarItem setEnabled:NO];
} 
```

# c# - C# Linq to XML - 简单查询不返回任何结果

> ID：12372484
> 
> 赞同：1
> 
> 时间：2012-09-11T14:50:29.410
> 
> 标签：c#, linq-to-xml

我有这个包含实体列表的 XML：

```
<?xml version="1.0" encoding="utf-8" ?>
<Connections>
  <Connection>
    <ConnectionName>connName</ConnectionName>
    <InterfaceName>Account Lookup</InterfaceName>
    <RequestFolder>C:\Documents and Settings\user\Desktop\Requests</RequestFolder>
    <ResponseFolder>C:\Documents and Settings\user\Desktop\Responses</ResponseFolder>
  </Connection>
</Connections> 
```

我正在尝试根据其名称检索其中一个并从中构建一个对象。

```
var results = (from i in this.Elements("Connection")
                           where i.Element("ConnectionName").ToString() == stubConnectionName
                           select new {
                               interfaceName = ((string)i.Element("InterfaceName").Value),
                               requestFolder = ((string)i.Element("RequestFolder").Value),
                               responseFolder = ((string)i.Element("ResponseFolder").Value),
                           }).Single();

return new StubConnection(stubConnectionName, results.interfaceName, results.requestFolder, results.responseFolder); 
```

问题是结果返回为空。我的查询有什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T14:57:19.207

```
where i.Element("ConnectionName").ToString() == stubConnectionName 
```

必须：

```
where i.Element("ConnectionName").Value == stubConnectionName 
```

因为[`XElement.ToString`](http://msdn.microsoft.com/en-us/library/bb341005.aspx)返回`<ConnectionName>connName</ConnectionName>`包括 XML 标记，而[`XElement.Value`](http://msdn.microsoft.com/en-us/library/system.xml.linq.xelement.value.aspx)只返回不带标记的封闭连接名称。

顺便说一句，您不必要地将所有值（已经是 type `string`）转换为`string`. 您可以简化：

```
var results = (from i in this.Elements("Connection")
               where i.Element("ConnectionName").Value == stubConnectionName
               select new
               {
                   interfaceName = i.Element("InterfaceName").Value,
                   requestFolder = i.Element("RequestFolder").Value,
                   responseFolder = i.Element("ResponseFolder").Value,
               }).Single(); 
```

您甚至可以更进一步，直接选择并返回您的结果，而无需在两者之间使用匿名类型：

```
return (from i in this.Elements("Connection")
        where i.Element("ConnectionName").Value == stubConnectionName
        select new StubConnection(stubConnectionName,
                                  i.Element("InterfaceName").Value,
                                  i.Element("RequestFolder").Value,
                                  i.Element("ResponseFolder").Value)).Single(); 
```

* * *

也请理解两者的区别

## `XElement.Value` *对比* `(string)XElement`

直接调用 Value 属性时要小心，因为如果元素不包含任何值，它将抛出异常。 如果您不确定它是否包含值，则将[元素](http://msdn.microsoft.com/en-us/library/bb155263) *（不是`Value`，而是`XElement`直接）转换为字符串。*如果没有，则返回 null；否则，结果是一样的。

# android - 如何以编程方式在每个活动中设置标题栏？

> ID：12372485
> 
> 赞同：0
> 
> 时间：2012-09-11T14:50:29.740
> 
> 标签：android

是否可以从一个特定活动中以编程方式在每个活动中设置标题栏？

我可以在该活动中以编程方式设置特定活动的标题栏，但随后的活动将在此后的清单中设置字符串。

要设置标题，我在活动中使用以下内容。我希望在应用程序中设置这样的每个活动。

```
setTitle(carerName + " is now logged in"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T14:56:59.430

您可以编写基本活动并调用 super 的方法。

```
public class DerivedActivity extends BaseActivity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
  ...}
    }

public class DerivedActivity2 extends BaseActivity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
     ...}
    }

public class BaseActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
setTitle(carerName + " is now logged in");
   }
   } 
```

# android - Android（AndEngine）：附有身体的精灵上下移动

> ID：12372492
> 
> 赞同：1
> 
> 时间：2012-09-11T14:50:42.050
> 
> 标签：android, andengine, physics

我试图让我的游戏中的敌人上上下下；因为我使用的是带有 Sprite 的物理体，所以我不能使用实体修饰符，所以我决定每次它的 sprite 到达某个点时使用 .setLinearVelocity(float x, float y) 方法稍微推动一下身体在屏幕中。

只有一个身体效果很好，但我需要让其他敌人（相同的精灵，不同的身体）每 5 秒产生一次并做同样的事情，但我不知道如何跟踪它们......我的意思是，我不知道不知道如何控制每个物体是否彼此独立地到达 Y 位置...

例如，现在的代码是这样的：

```
private void add_Box_Face()
{
    float random_x = (float) (28 +  (int)(Math.random() * ((this.CAMERA_WIDTH - 28*2) + 1)));

    final Body rectangle_face_body;

    final Sprite rectangle_face = new Sprite(random_x, this.y, this.mRectangleFaceTextureRegion, this.getVertexBufferObjectManager());

    rectangle_face_body = PhysicsFactory.createBoxBody(this.m_PhysicsWorld, rectangle_face, BodyType.DynamicBody, this.BOX_FIXTURE_DEF);

    rectangle_face_body.setUserData("target");

            //I give the body a initial push
    rectangle_face_body.setLinearVelocity(0, -5);

            //I register an update handler to the sprite to control if it reaches a certain Y value
    rectangle_face.registerUpdateHandler(new IUpdateHandler() 
    {
        @Override
        public void onUpdate(float pSecondsElapsed) 
        {

               if (rectangle_face.getY() >= y-50)
               {
                       //Here I just use a flag so that later on below I can do the push
                 MyApp.this.setLinearVelocity = true;
               }
        }

        @Override
        public void reset() 
        {
            // TODO Auto-generated method stub  
        }

    });

            //Here I register the physic connector and if the flag permits it, I push the body up
    this.m_PhysicsWorld.registerPhysicsConnector(new PhysicsConnector(rectangle_face, rectangle_face_body, true, false)
    {
        @Override
        public void onUpdate(float pSecondsElapsed)
        {
            super.onUpdate(pSecondsElapsed);

            if(MyApp.this.setLinearVelocity)
            {
                rectangle_face_body.setLinearVelocity(0, -3);
                MyApp.this.setLinearVelocity = false;
            }

        }
    });

    this.mscene.attachChild(rectangle_face);

} 
```

使用这样的代码，第一个主体执行计划的操作，它上下移动，但是一旦另一个主体弹出，它就会下降，另一个主体会上升，因为布尔值 setLinearVelocity 总是设置为 true，所以有一个不断向上推；当第三个身体进来时，第二个身体也会倒下，最后一个身体会上升

有了这段代码，我并没有期待太多……但我不知道我还能尝试什么……我该如何控制呢？

提前致谢 ：）

编辑：在下面的 anwser 中添加了工作代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T15:50:54.610

我建议您将敌人的代码与更新处理程序的代码分开。创建一个包含 Sprite 和 Body 的类 Enemy，将您的 Enemies 保存在一个数组中并覆盖您的 PhysicsWorld 的 onUpdate 方法，以便它通过 Enemies 数组并对所有敌人执行您想要的操作。

这是一个代码片段，显示了一种非常简单的方法：

```
mEngine.registerUpdateHandler(new IUpdateHandler() {
        @Override
        public void reset() {}

        @Override
        public void onUpdate(float pSecondsElapsed) {
            for (Enemy e : enemies) {
                e.checkPositionAndBounce();
            }
        }
    }); 
```

请注意，这可能不是一个好主意，因为此代码可能会在与物理引擎不同的线程上运行，这可能会导致各种问题。更好的方法是覆盖 PhysicsWorld 的 onUpdate 方法：

```
@Override
public void onUpdate(final float pSecondsElapsed) {
    super.onUpdate();
    for (Enemy e : enemies) {
        e.checkPositionAndBounce();
    }
} 
```

如果您不确定第一个片段的含义，请查找“匿名内部类”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T09:49:10.070

好的，这是最终的工作代码（我没有创建一个方法来检查敌人的位置或类，只是因为现在我只是在搞乱机制；我会创建一个新项目当我准备好开始了）：

```
this.m_PhysicsWorld = new PhysicsWorld(new Vector2(0, SensorManager.GRAVITY_EARTH), false)
{
    @Override
    public void onUpdate(float pSecondsElapsed)
    {
        super.onUpdate(pSecondsElapsed);

        for(int i = 0; i <= MyApp.this.mSpriteCounter; i++)
        {

            if (rectangle_face[i].getY() >= y-50)
            {       
                final PhysicsConnector spritePhysicsConnector = m_PhysicsWorld.getPhysicsConnectorManager().findPhysicsConnectorByShape(rectangle_face[i]); 

                spritePhysicsConnector.getBody().setLinearVelocity(0, -3);      
             }
        }
    }; 
```

在这段代码中， rectangle_face[] 是一个 Sprite 数组；每个精灵都是这样创建的：

```
private void add_Box_Face()
{

    float random_x = (float) (28 +  (int)(Math.random() * ((this.CAMERA_WIDTH - 28*2) + 1)));

    final Body rectangle_face_body;

    rectangle_face[this.mSpriteCounter] = new Sprite(random_x, y, this.mRectangleFaceTextureRegion, this.getVertexBufferObjectManager());

    rectangle_face_body = PhysicsFactory.createBoxBody(this.m_PhysicsWorld, rectangle_face[this.mSpriteCounter], BodyType.DynamicBody, this.BOX_FIXTURE_DEF);

    rectangle_face_body.setUserData("target");

    rectangle_face_body.setLinearVelocity(0, -5);

    this.m_PhysicsWorld.registerPhysicsConnector(new PhysicsConnector(rectangle_face[this.mSpriteCounter], rectangle_face_body, true, false));

    this.mscene.attachChild(rectangle_face[this.mSpriteCounter]);

} 
```

就是这样，再次感谢您的帮助:)

# git - 我可以将 git 存储库中的所有文件“推送”到我的 ftp 服务器（实时生产）吗？

> ID：12372493
> 
> 赞同：3
> 
> 时间：2012-09-11T14:50:42.663
> 
> 标签：git, ftp

我刚刚开始（几乎没有）了解和使用 git。我正在使用 github 和 cloud9 IDE。

我想出了如何将文件保存（提交然后推送？）到 github 存储库...

**问题**：

`Is there a command that will upload (and overwrite) files from my git to my ftp server where my website is hosted?`

我已经检查了[这个问题](https://stackoverflow.com/questions/5886363/how-to-git-push-using-ftp)，但我不确定我是否想要在我的服务器上安装一个 .git（除非我仍然可以运行我的网站）。

我也检查了[这个问题](https://stackoverflow.com/questions/2950107/git-push-into-production-ftp)，但我不确定我是否可以在我的服务器上安装任何东西。

这不是我想的那么简单吗？

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T14:55:44.560

Git 不是 FTP 客户端。但是您可以创建一个提交后挂钩来执行此操作。git hook 是一个 shell 脚本，它通过某些操作执行。当您提交时，您可以使用它来将所有源文件上传到您的 FTP 服务器。有关挂钩的更多信息，请参阅：

[http://www.kernel.org/pub/software/scm/git/docs/githooks.html](http://www.kernel.org/pub/software/scm/git/docs/githooks.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T17:00:24.560

如果您在命令行上工作 - 使用 lftp 将您的文件 ftp 到您的主机。lftp 是高度可编写脚本的，如果您愿意，可以将其添加到提交后挂钩中。

如果您使用的是 gui - 您可以尝试使用 filezilla 或任何数量的其他 ftp 客户端将您的文件移动到您的服务器。

如果这是您希望其他人在未来从事的项目，您可以考虑学习 capistrano 以实现自动部署和易于发布。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-11T12:50:07.890

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-02T16:42:40.293

无论使用 OSX，您都可以考虑这个基于 GUI 的非常方便的工作流程（我也用于一些 WordPress 的东西）：[http ://eppz.eu/blog/push-git-to-ftp/](http://eppz.eu/blog/push-git-to-ftp/)

![在此处输入图像描述](../Images/b9236a63e938c1c734b2671b5edc7a6c.png)

# android - 编译前如何在 Android.mk 中运行自定义规则？

> ID：12372500
> 
> 赞同：13
> 
> 时间：2012-09-11T14:51:10.153
> 
> 标签：android, android-ndk, makefile

在 Android NDK 中，我构建了由 SWIG 自动生成的 JNI 文件。**callmanager_wrap.cpp**是共享库的一部分：

```
LOCAL_SRC_FILES += callmanager_wrap.cpp
include $(BUILD_SHARED_LIBRARY) 
```

但我想`callmanager_wrap.cpp`在编译之前附加/编辑。更明确地说：

```
cat jnistuff.txt >> callmanager_wrap.cpp 
```

**我需要添加的内容是事先知道的，但 callmanager_wrap.cpp 不是**。它由 SWIG 生成。最终，我的自定义规则必须运行以下命令来生成 callmanager_wrap.cpp：

```
swig -c++ -java -package com.package.my -o callmanager_wrap.cpp callmanager.i 
```

根据[这篇文章](https://groups.google.com/forum/?fromgroups=#!topic/android-ndk/hrjsW1jNIAs)，无法将自定义规则添加到`Android.mk`. `Android.mk`但在 Android 资源中，我相信在 BUILT 或 INSTALLED 之后会有一些处理步骤。我尝试了以下方法：

```
MY_JNI_WRAP=callmanager_wrap.cpp

include $(CLEAR_VARS)

LOCAL_SRC_FILES += callmanager_wrap.cpp

LOCAL_INTERMEDIATE_TARGETS += myjni
myjni:
    echo "in myjni target"
    swig -c++ -java -package com.package.my -o $(MY_JNI_WRAP) callmanager.i
    cat jnistuff.txt >> $(MY_JNI_WRAP)

include $(BUILD_SHARED_LIBRARY) 
```

但是`myjni`永远不会调用目标。

1.  LOCAL_INTERMEDIATE_TARGETS 是做什么用的？
2.  我可以在不编写外部脚本或 makefile 的情况下实现我想要做的事情吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-12T07:28:57.427

我建议如下：

```
include $(CLEAR_VARS)

LOCAL_SRC_FILES += callmanager_wrap.cpp
MY_JNI_WRAP := $(LOCAL_PATH)/callmanager_wrap.cpp

$(MY_JNI_WRAP):
    echo "in myjni target"
    swig -c++ -java -package com.package.my -o $(MY_JNI_WRAP) callmanager.i
    cat jnistuff.txt >> $(MY_JNI_WRAP)
.PHONY: $(MY_JNI_WRAP)

include $(BUILD_SHARED_LIBRARY) 
```

就是这样。

我可能欠你一些解释。所以我们开始：

1.  `$(LOCAL_SRC_FILES)`是相对于 的文件名列表`$(LOCAL_PATH)`，因此要从标准 NDK 操作之外处理文件，您需要文件的完整路径，即`$(LOCAL_PATH)/callmanager_wrap.cpp`.

2.  我们指定文件`.PHONY`以保证每次运行**ndk-build**时都会执行自定义操作。但是，如果您知道哪些是 的实际依赖项`callmanager_wrap.cpp`，则可以指定它们，例如

    `$(MY_JNI_WRAP): callmanager.i jnistuff.txt $(LOCAL_PATH)/../src/com/package/my/Something.java`

    在这种情况下，您将不需要该`.PHONY`线路。

3.  如果你希望你的源目录保持干净，你可以`.INTERMEDIATE`像这样声明包装文件：

    `.INTERMEDIATE: $(MY_JNI_WRAP)`

现在**make**将在构建之后删除包装文件，如果它在构建之前不存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-20T14:23:49.543

我是这样做的：假设我需要从 .ll 文件创建 .s 文件

```
# custom build
source_ll_files := $(wildcard *.ll)
%.s:
    llc -o $@ $(patsubst %.s,%.ll,$@)

LOCAL_SRC_FILES += $(patsubst %.ll,%.s,$(source_ll_files))
# end 
```

# jquery - 我可以让 jQuery .load 不仅仅是简单地加载到元素的 HTML 吗？

> ID：12372503
> 
> 赞同：-1
> 
> 时间：2012-09-11T14:51:14.107
> 
> 标签：jquery

我有以下代码，它比我看到的[jQuery 加载](http://api.jquery.com/load/)用于：

```
 $.ajax({
            url: href,
            type: 'GET'
        })
        .success(function (content) {
            $('#content')
                .html("<div class='block-border'>" + content + "</div>")
                .applyTemplateSetup()
                .buildTableOfContent();
            if ($('#cityLegend-1').length) {
                $('#cityLegend-1').html("Question " + html);
            }
            $('#article').css('visibility', 'visible');
            var editHref = "/Admin/Contents/Edit?pk=0003000&rk=" + href.substring(2,5);
            $('#editContent').attr('data-href', editHref);
        })
        .fail(function (ajaxContext) {
            ajaxOnFailure(ajaxContext)
        }); 
```

请注意，我的内容可能包含由小组内部可信来源编写的 HTML。

有人可以告诉我是否可以为此使用 jQuery 加载。我认为这可能太多了，但我想确认一下。

此外，如果我能够使用 jQuery 加载，那么使用它有什么好处。抱歉，如果这个问题听起来不那么明智，但我问这一切的原因是我想利用我得到的一个模板函数，它为 jQuery .load 添加了功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:58:15.307

好吧，使用 this 与您通常使用的主要区别在于`load`，这是广泛地操作通过 AJAX 返回的内容、调用其他方法等。您当然可以`load`通过使用自定义回调来执行此操作，基本上所有事情这个功能正在做的事情。

我想我看不出这样做有什么好处。因为真正使用`load`over `ajax`,`get`等的主要优点是您可以从返回的内容中获取特定元素并将其放置在目标节点中。在这种情况下，似乎所有返回的内容都在使用，因此使用`load`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T16:13:50.887

*免责声明：这不是对原始问题的回答，但它回答了评论中的另一个问题。（请原谅我，社区）。*

* * *

> 如果你关心性能。在未附加到 dom 的文档片段上执行模板功能（applyTemplateSetup、buildTableOfContent）可能会更好。等一切准备好后再附加它 :) [访问 DOM 和操作它通常是一个瓶颈]

* * *

> 您能否进一步解释一下您的意思是“未附加到您的 dom 的文档片段？

* * *

这是关于尽量减少“回流”。
每次访问 DOM 来操作它时，浏览器都必须重新计算几乎所有东西的大小和位置（不包括浏览器特定的优化）。

因此，最好在将每个 Ajax 接收到的元素附加到文档之前对其进行操作，这样浏览器就不会计算任何内容。也就是说，只计算一次：将文档片段附加到文档时。文档片段是*“可以容纳 DOM 节点的轻量级容器”。*

在实践中，这对您来说意味着：

```
$.ajax({
    url: href,
    type: 'GET'
}).success(function (content) {
    var container = $('<div id="content">'); // create a new container
    //this new container is not attached to the document

    //the following manipulations cause no reflow
    container.html("<div class='block-border'>" + content + "</div>")
        .applyTemplateSetup()
        .buildTableOfContent();

    //attach the new container to the dom (replacing the old one)
    //reflowing the document only once
    $('#content').replaceWith(container);

    if ($('#cityLegend-1').length) {
        $('#cityLegend-1').html("Question " + html);
    }
    $('#article').css('visibility', 'visible');
    var editHref = "/Admin/Contents/Edit?pk=0003000&rk=" + href.substring(2, 5);
    $('#editContent').attr('data-href', editHref);
}).fail(function (ajaxContext) {
    ajaxOnFailure(ajaxContext)
}); 
```

根据您的 html 结构，当然有无限的方法可以做到这一点。这只是一个。

# python - 从文本小部件中删除内容

> ID：12372507
> 
> 赞同：0
> 
> 时间：2012-09-11T14:51:22.470
> 
> 标签：python, tkinter

在 Tkinter 中，如何从 Text Widget 中删除内容。在我的程序中，我用它来显示运行日志。我想限制它显示的行数，即在达到特定行数限制后，我想并行删除旧内容。下面是在 Text Widget 中进行内容修改的代码片段。如您所见，插入 25 行后，我正在使用“删除”方法删除 1 行。但奇怪的是，在显示了 25 行之后，它会清除整个小部件，然后在随后调用此类时，添加一行并在一段时间后将其删除。有人可以帮我解决这个问题。

```
class TextRedirector(object):
    def __init__(self, widget, tag="stdout"):
        self.widget = widget
        self.tag = tag

    def write(self, str):
        global linecount
        linecount = linecount + 1
        self.widget.configure(state="normal")
        self.widget.insert("end", str, (self.tag,))
        self.widget.update()
        if linecount > 25:
             self.widget.delete('1.0', '2.0')
        self.widget.see('end')
        self.widget.configure(state="disabled") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T16:05:51.837

您的`self.linecount`变量似乎无限增长，并且没有考虑到您正在删除一些行。所以，一旦你有> 25行，每次`write`调用它都会删除一行。

您知道可以将滚动条附加到文本小部件吗？这将允许几乎无限的文本，并让用户回滚查看旧数据。

# iphone - 将内存分配给对象时出现内存泄漏问题

> ID：12372522
> 
> 赞同：0
> 
> 时间：2012-09-11T14:52:06.767
> 
> 标签：iphone, ios, memory-leaks

我面临着非常简单的代码的内存泄漏问题。我有类'TestClass'

```
@interface TestClass : NSObject
  @property(nonatomic,retain) NSString *name;
@end 
```

它的实现是这样的：

```
@implementation TestClass
@synthesize name;
-(id)init {
    if (self = [super init]) {
        self.name = @"";
    }
    return self;
}
-(void) dealloc
{
    [name release];
    name = nil;
}
@end 
```

viewWillAppear 里面还有另一个视图控制器我正在创建对象并立即释放，如下所示

```
- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
    for (int i =0; i<50; i++) {
        TestClass *testClass = [[TestClass alloc] init] ;
        [testClass release];

    }
} 
```

泄漏仪器在线显示内存泄漏，`TestClass *testClass = [[TestClass alloc] init] ;`而如果我从 TestClass 中删除 init 和 dealloc 方法，则没有内存。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T14:54:10.970

这是因为你没有在它自己的dealloc实现的dealloc中释放TestClass：

```
-(void) dealloc
{
    [name release], name = nil;
    [super dealloc];
} 
```

另外作为提示，我建议从内存管理代码转移到[`ARC`](http://developer.apple.com/library/ios/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T14:56:26.897

什么 rckoenes 是正确的，但您可以简单地：

```
- (void)dealloc
{
    self.name = nil;
    [super dealloc];
} 
```

# c# - 无法访问 Microsoft.Xrm 命名空间

> ID：12372524
> 
> 赞同：18
> 
> 时间：2012-09-11T14:52:16.133
> 
> 标签：c#, visual-studio-2010, dynamics-crm, dynamics-crm-2011, xrm

我已下载 CRM Dynamics SDK 并将其保存在本地目录中。在我的代码中，我正在使用`EntityCollection`（在与 Xrm 命名空间相关的其他类中），这意味着我需要添加`using Microsoft.Xrm.Sdk;`.

问题是在编译过程中我收到错误消息：

> 命名空间“Microsoft”中不存在类型或命名空间名称“Xrm”（您是否缺少程序集引用？）

所以，我仔细检查了引用是否已经完成，并且非常准确地，我看到它`microsoft.xrm.sdk`确实**在**我的列表中。可以肯定的是，我已将其删除并通过指向具有相同名称的 DLL 再次添加它。但无济于事......令人惊讶的是，我的同事使用相同的代码并且它在他的机器上编译（唯一的区别是他在 Win 7 上，而我在 Win 8 上）。

我们如何解决这个问题？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-11T15:30:06.350

仔细检查您的项目设置以查看您正在使用的目标框架。如果是**.NET Framework 4 Client Profile**尝试将其更改为**.NET Framework 4**。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2015-01-14T12:24:19.410

我在用新的 2015 替换我的 crm 2013 dll 时收到了这个。

以上解决方案都不适合我。但最终让我走上正轨的是这个警告（它被列为命名空间错误下方的警告）：

> 无法解析主要参考“Microsoft.Xrm.Client, Version=5.0.9689.2166, Culture=neutral, PublicKeyToken=31bf3856ad364e35, processorArchitecture=MSIL”，因为它是针对“.NETFramework,Version=v4.5.2”框架构建的。这是比当前目标框架“.NETFramework,Version=v4.5.1”更高的版本

当我检查时，我只安装了 .Net 4.5.1，所以在安装 .Net 4.5.2 **Developper 包** 并将我的项目的目标框架切换到这个之后，一切都恢复了。

常规的 4.5.2 更新不足以在 VS 中获取此版本的 .net，您需要[开发包](http://www.microsoft.com/en-us/download/details.aspx?id=42637)

资料来源：[http ://www.syntaxwarriors.com/2015/using-crm-2015-sdk-gives-error-that-xrm-does-not-exist-in-the-namespace/](http://www.syntaxwarriors.com/2015/using-crm-2015-sdk-gives-error-that-xrm-does-not-exist-in-the-namespace/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-22T13:19:19.783

我的框架**已经设置为 .NET Framework 4**，因此在 4 客户端配置文件和常规 4 之间切换的解决方案不适用。我做的一个技巧是**将 .NET Framework 更改为 3.5 ，然后再改回 4.0**。我希望这会帮助一些人。

谢谢@Jason Lattimer。您的回答给了我如何解决我的问题的线索。

**祝 CRM 开发人员好运！**

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-08-27T21:33:43.367

这可能与这个特定问题不匹配，但我会将其添加为检查其他人的内容，以防谷歌像对我一样将他们引导到这里。

就我而言，我遇到了很多错误，例如“错误 CS0234：名称空间 'Microsoft.Xrm' 中不存在类型或名称空间名称 'Client'”。

添加**“Microsoft.CrmSdk.Extensions”NuGet 包**修复了我的编译问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-06-11T23:26:06.630

在更改为 .NET Framework 4 并将 .NET Framework 更改为 3.5 再回到 4.0 后，我的项目仍然无法正常工作。

当我选择“添加参考”窗口给出的选项时，它不起作用。

对我有用的是单击“添加参考”窗口中的*浏览*按钮并查找 Microsoft.Xrm.Sdk。*dll*文件

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-06-19T03:45:45.007

我有 .NET 4.0 作为我的目标框架，我有这个编译器错误。我尝试将其更改回 3.5，然后再更改回 4.0，但这并没有解决问题。

为我解决问题的是删除项目目录中的 bin、obj 和 tools 文件夹。我不明白为什么这样做的细节，但它对我有用。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-02-24T19:04:46.513

我遇到了这个错误，就我而言，在尝试了上述所有解决方案和网络上的其他解决方案后没有成功，最终我找到了解决方案。

问题出在我使用的 CRM SDK 版本中：2015（不想知道为什么！）。

下载 CRM 2013 SDK 版本，将程序集引用更改为该版本，问题就消失了。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-09-16T09:31:32.553

原因是 CRM 2015 SDK 是基于 .Net 4.5.2 Framework 构建的，而 Visual Studio 不支持 4.5.2。

只需下载 .Net Framework 4.5.2 Goto Project Properties 并更改框架。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-05-20T10:16:19.053

我的 CRM 2011 插件也有同样的问题。就我而言，上述解决方案均无效。

在我的代码中，我使用的是早期绑定类。生成此类文件时，我正在使用以下行以及导致错误的其他设置。

```
/codeCustomization:"Microsoft.Xrm.Client.CodeGeneration.CodeCustomization, Microsoft.Xrm.Client.CodeGeneration" 
```

一旦我添加了这个没有 codeCustomization 的新类文件，它就删除了所有错误。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-05-31T06:38:35.780

正如先前所说，

> 原因是 CRM 2015 SDK 是基于 .Net 4.5.2 Framework 构建的，而 Visual Studio 不支持 4.5.2。
> 
> 只需下载 .Net Framework 4.5.2 Goto Project Properties 并更改框架。

另一种方法是用旧 CRM SDK 中的文件替换 Microsoft.Xrm.Sdk.dll。我使用 VS2010，CRM 2011 SDK 文件解决了所有编译器错误。

PS 将项目切换到 .NET 3.5 并返回 4.0 并没有帮助

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-09-06T06:37:57.143

更新 NuGet 包帮助我解决了问题

# c# - 在多个驱动程序上运行 WebDriver NUnit 测试

> ID：12372529
> 
> 赞同：2
> 
> 时间：2012-09-11T14:52:35.330
> 
> 标签：c#, nunit, webdriver

我们最近开始使用 WebDriver（支持 Selenium 1）来执行浏览器测试，使用 NUnit 框架。由于我们想在各种浏览器中运行测试，我们为每个浏览器定义驱动程序，并在夹具设置期间将它们放在一个列表中：

```
[TestFixtureSetUp]
public void SetupTest()
{
    // Load drivers
    Drivers = new List<IWebDriver>
            {
                new ChromeDriver(),
                ...
            }; 
```

在每一个测试中，我们都会像这样遍历列表：

```
[Test]
public void SomeTest()
{
    foreach (var driver in Drivers)
    {
        driver.Navigate().GoToUrl("...");
... 
```

在所有的测试方法中都这样做感觉不对。测试方法不应该关心他们应该使用什么驱动程序。理想情况下，我们会有这样的东西：

```
public void SomeTest(IWebDriver driver)
{
    driver.Navigate().GoToUrl("...");
... 
```

我们可以解决这个问题的一种方法是使用 TestCases：

```
[TestCase(new ChromeDriver())]
[TestCase(new FireFoxDriver())]
... 
```

但这是很多重复，并将驱动程序正确初始化的问题转移到每个测试的属性中。并不是真正的收获。

有什么方法可以告诉 NUnit 框架执行整套测试并在每次运行时为各个测试注入不同的参数？或者还有其他好的解决方案吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T15:14:45.857

您应该能够使用[TestCaseSourceAttribute](http://nunit.com/index.php?p=testCaseSource&r=2.6.1)。首先创建一个提供 Web 驱动程序集合的常用类：

```
public static class WebDriverFactory
{
    public static IWebDriver[] Drivers =
    {
        new ChromeDriver(),
        new FirefoxDriver(),
        ...
    };
} 
```

接下来，像这样实现依赖于 Web 驱动程序的单元测试：

```
[Test, TestCaseSource(typeof(WebDriverFactory), "Drivers")]
public void SomeTest(IWebDriver driver)
{
    driver.Navigate().GoToUrl("...");
    ...
} 
```

可选地，为了在实现每个单元测试时减少键入，还定义一个继承自并且仅实现默认构造函数的新*Attribute*类：`TestCaseSourceAttribute`

```
public class WebDriverSourceAttribute : TestCaseSourceAttribute
{
    public WebDriverSourceAttribute() : base(typeof(WebDriverFactory), "Drivers")
    {            
    }
} 
```

使用继承的`WedDriverSource`属性，单元测试现在可以简化为：

```
[Test, WebDriverSource]
public void SomeTest(IWebDriver driver)
{
    driver.Navigate().GoToUrl("...");
    ...
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-11T15:09:13.630

没有“最好”的方法可以做到这一点，但是我完成的方法如下：

我创建了一个枚举：

```
/// <summary>
/// Enum that holds references to different browsers used in testing.
/// </summary>
public enum BrowserTypeEnum
{
    /// <summary>
    /// Google Chrome.
    /// </summary>
    Chrome, 

    /// <summary>
    /// Mozilla Firefox.
    /// </summary>
    Firefox, 

    /// <summary>
    /// Internet Explorer.
    /// </summary>
    InternetExplorer
} 
```

在 TestFixture 中这样调用它：

```
/// <summary>
/// Tests related to browsing Google
/// </summary>
[TestFixture(BrowserTypeEnum.Chrome)]
[TestFixture(BrowserTypeEnum.Firefox)]
public class GoogleTests : AbstractTestFixture
{
} 
```

在 AbstractTestFixture 中：

```
 /// <summary>
    /// Create's the browser used for this test fixture. 
    /// <para>
    /// Must always be called as part of the test fixture set up.
    /// </para>
    /// <para>
    /// It is the actual test fixture's responsibility to launch the browser. (Usually in the test fixture setup)
    /// </para>
    /// </summary>
    protected override void CreateBrowser()
    {
        switch (BrowserType)
        {
            case BrowserTypeEnum.Chrome:
                Browser = new ChromeDriver();
                break;
            case BrowserTypeEnum.Firefox:
                Browser = new FirefoxDriver();
                break;
            case BrowserTypeEnum.InternetExplorer:
                Browser = new IEDriver();
                break;
            default:
                break;
        }
    } 
```

可能不是最好的解决方案，但我发现它非常易读。另一种方法是使用 Selenium Grid 之类的东西，或者将驱动程序的类型传递给 NUnit 并直接创建它。你已经尝试过这个（通过直接类型的驱动程序），它似乎不是你所追求的。唯一的区别可能是您将驱动程序的类型传入测试夹具，而不是实际测试。

另一种选择是，如果您使用 CI 服务器解决方案，请创建一个配置设置以指示用于测试的浏览器。让 CI 驱动程序重复测试 3 次，每次都编辑该配置设置。

我同意，知道他们正在使用什么样的驱动程序并不是实际的测试责任，这就是为什么我把这个责任推到测试夹具中。我这样做的方式可能不是最“优雅”的方式，但至少对我来说是最易读的。看我的代码的人可以很容易地看到这个测试夹具正在重复，以及哪些浏览器正在重复这些步骤。

对我来说，驱动程序的创建必须始终在实际的 TestFixture 中（而不是基本测试夹具）。原因是因为在打开浏览器之前我想做一些逻辑 - 如果这个逻辑失败（在 Setup 或 TestFixtureSetup 方法中），那么 NUnit 将不会运行任何拆卸方法。因此，浏览器窗口将保持打开状态。

所以为了解决这个问题，我在 TestFixtureSetup 中做的最后一件事，在测试运行之前，叫做“CreateBrowser”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T18:01:33.847

您还可以为 NUnit 编写自己的*TestCaseProvider 插件*，以在所有浏览器上执行此迭代。

然后像这样创建一个新属性

```
[Test, TestOnAllBrowsers]
public void SomeTest(IWebDriver driver)
{
    driver.Navigate().GoToUrl("...");
} 
```

标记应在所有浏览器上运行的所有测试，并在*TestCaseProvider 插件*`driver`中填充变量。但是，如果您已经使用该属性，这可能会变得复杂。*`TestCase`*

# c++ - 正确读取和写入 std::vector 到文件中

> ID：12372531
> 
> 赞同：28
> 
> 时间：2012-09-11T14:52:41.613
> 
> 标签：c++, file-io, stl, iostream, stdvector

这就是我想说的。如何在其中写入和读取带有 std::vector 的二进制文件？

我在想类似的事情：

```
//============ WRITING A VECTOR INTO A FILE ================
const int DIM = 6;
int array[DIM] = {1,2,3,4,5,6};
std::vector<int> myVector(array, array + DIM);
ofstream FILE(Path, ios::out | ofstream::binary);
FILE.write(reinterpret_cast<const char *>(&myVector), sizeof(vector) * 6);
//=========================================================== 
```

但我不知道如何阅读这个向量。因为我认为以下是正确的，但事实并非如此：

```
ifstream FILE(Path, ios::in | ifstream::binary);
FILE.read(reinterpret_cast<const char *>(&myVector), sizeof(vector) * 6); 
```

那么，如何进行操作呢？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-09-11T15:07:23.483

尝试使用`ostream_iterator`/ `ostreambuf_iterator`、`istream_iterator`/`istreambuf_iterator`和 STL`copy`方法：

```
#include <algorithm>
#include <iostream>
#include <iterator>
#include <vector>

#include <fstream> // looks like we need this too (edit by π)

std::string path("/some/path/here");

const int DIM = 6;
int array[DIM] = {1,2,3,4,5,6};
std::vector<int> myVector(array, array + DIM);
std::vector<int> newVector;

std::ofstream FILE(path, std::ios::out | std::ofstream::binary);
std::copy(myVector.begin(), myVector.end(), std::ostreambuf_iterator<char>(FILE));

std::ifstream INFILE(path, std::ios::in | std::ifstream::binary);
std::istreambuf_iterator iter(INFILE);
std::copy(iter.begin(), iter.end(), std::back_inserter(newVector)); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-11T14:58:31.083

使用`boost::serialization`.

如果您不想使用`boost`- 写入大小和`vector`.

```
size_t sz = myVector.size();
FILE.write(reinterpret_cast<const char*>(&sz), sizeof(sz));
FILE.write(reinterpret_cast<const char*>(&myVector[0]), sz * sizeof(myVector[0])); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-11T14:56:36.723

您可以使用

```
#include <boost/serialization/vector.hpp> 
```

序列化你的向量。在这里阅读教程：[http](http://www.boost.org/libs/serialization/doc/tutorial.html#stl) ://www.boost.org/libs/serialization/doc/tutorial.html# stl`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-11T15:06:37.650

在阅读之前`vector`，您应该调整它的大小：`yourVector.size(numberOfElementsYouRead)`.

此外，`sizeof(vector<your_type>)`只是`vector`对象内部实现的大小；向量元素大小为`sizeof(std::vector<your_type>::value_type)`.

然后像这样阅读它：

```
file.read(reinterpret_cast<char *>(&myVector[0]), sizeof(vector<int>::element_type) * element_count); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-05-27T09:16:57.320

我使用了 data() 方法返回一个可用于读取和写入的地址这一事实。

// 假设 outf 是一个可写的文件指针（二进制）。// 将 myVector.size() 写入文件，然后

```
fwrite(myVector.data(), sizeof(decltype(myVector)::value_type), myVector.size(), outf); 
```

读书：

// 从文件中读取 MyVector.size() 作为 nv，inpf 是读取文件指针

```
MyVector.resize(nv);
fread(MyVector.data(), sizeof(decltype(MyVector)::value_type), nv, inpf); 
```

坚持使用文件 io 中的旧方法，但请忽略它（即使它可能会激怒你 :)）。

一个弱点是这种方式不支持字节顺序。

# c# - 如何从 C# 获取进程窗口类名称？

> ID：12372534
> 
> 赞同：3
> 
> 时间：2012-09-11T14:52:56.820
> 
> 标签：c#, process

如何获取某个进程的窗口类名？我想在 c# 中实现这一点。

我已经在c#中尝试过进程类，但我只能获取进程的窗口名称。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-11T14:56:35.187

我假设您的意思是要获取进程*主窗口的类名。*

为此，您需要使用对象的 获取主窗口的句柄`MainWindowHandle`，`Process`然后使用以下互操作方法获取类名：

```
[DllImport("user32.dll", SetLastError = true, CharSet = CharSet.Auto)]
static extern int GetClassName(IntPtr hWnd, StringBuilder lpClassName, int nMaxCount); 
```

有关示例代码，请参阅[pinvoke.net ，有关该功能的详细信息，请参阅](http://www.pinvoke.net/default.aspx/user32.getclassname)[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633582%28v=vs.85%29.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T15:07:19.190

您也可以使用[windows ui 自动化框架](http://msdn.microsoft.com/en-us/library/ms747327.aspx)来实现这一点，而无需进入 pinvoke。

```
 int pidToSearch = 316;
        //Init a condition indicating that you want to search by process id.
        var condition = new PropertyCondition(AutomationElementIdentifiers.ProcessIdProperty, 
            pidToSearch);
        //Find the automation element matching the criteria
        AutomationElement element = AutomationElement.RootElement.FindFirst(
            TreeScope.Children, condition);

        //get the classname
        var className = element.Current.ClassName; 
```

# sql - VB中如何调用SQL函数。网

> ID：12372541
> 
> 赞同：-4
> 
> 时间：2012-09-11T14:53:24.827
> 
> 标签：sql, vb.net, function, ado.net

如何调用带有两个参数的 SQL 函数？我想记住一个变量中的返回值。

功能是：

```
CREATE  FUNCTION [CheckPwd](  @User nvarchar(50),  @Pwd nvarchar(50)) 
RETURNS int
AS
BEGIN
DECLARE @RES int
DECLARE @PWD_DB varbinary(255)

  IF (@User is not null and @User != '' and @Pwd is not null and @Pwd != '' )
begin
    SELECT  @PWD_DB = password FROM UserTable WHERE username = @User
        SET @PwdRES = pwdcompare(@Pwd, @PWD_DB )
end
  ELSE
        SET @PwdRES = 0

RETURN @RES
END 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T14:58:49.783

这是一个带有存储过程的示例，使用纯 SQL 是相似的。

```
Public Function getFooID(param1 As Int32, param2 As String)As Int32
    Dim returnValue As Int32
    Using con = New SqlConnection(My.Settings.ConnectionString)
        Using cmd = New SqlCommand("dbo.Foo", con)
            cmd.CommandType = System.Data.CommandType.StoredProcedure
            cmd.Parameters.AddWithValue("@param1", param1)
            cmd.Parameters.AddWithValue("@param2", param2)
             Try
                con.Open()
                returnValue = DirectCast(cmd.ExecuteScalar(), Int32)
            Catch ex As Exception
                ' a good place to insert logging functionality '
                log.Error("Error in getFooId: " + ex.Message);
                ' note that Throw keeps the stacktrace unlike Throw ex '
                Throw
            End Try
        End Using
    End Using
    Return returnValue 
End Sub 
```

[`SqlCommand.ExecuteScalar`方法](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalar.aspx)

# php - php mail（）返回false，但不在命令行中

> ID：12372542
> 
> 赞同：9
> 
> 时间：2012-09-11T14:53:29.947
> 
> 标签：php, apache, email, ubuntu

我一直在 stackoverflow 和许多其他网站上寻找想法，但到目前为止没有任何工作，我需要更直接的帮助。

我有一个专用的 Ubuntu 服务器（9.04 jaunty），我在那里运行几个 PHP 网站，使用 apache2。我的问题是 mail() 函数已停止工作。不久前，我一直在使用 PEAR Mail Queue 处理大多数电子邮件，所以我不确定 mail() 何时停止工作，但我仍然需要它来设置 OpenCart 以及其他一些东西，但是 mail()无论我做什么，都会返回 false。即使是这个简单的代码也行不通：

```
<?php
mail('mail@example.com','test','test');
?> 
```

所以，我一直在查看 php.ini 中的 Sendmail-settings，所有这些都签出，当我在命令行中运行它时，它工作正常并向我发送一封电子邮件：

```
# sendmail
mail@example.com
test message 
```

所以我认为可能是php本身有问题，所以我尝试了以下命令：

```
# php -r "mail('mail@example.com','test','test');" 
```

它还可以毫无问题地发送电子邮件！那会是什么？我开始认为这可能是某种权限问题，也许 www-data 在运行脚本时遇到了一些问题。仍然不确定，因为我什至无法运行此脚本：

```
<?php
echo exec('whoami');
?> 
```

它也返回错误！我已经运行了**visudo**命令并添加了以下行以防万一：

```
www-data ALL=(ALL) ALL 
```

我已经将文件的用户和组所有者从**root:root**更改为**www-data:www-data**但仍然没有！

我还能尝试什么？一定有什么！谁能帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T15:53:28.027

命令行和网络服务器不共享相同的 php.ini！检查命令行和服务器模块中使用了哪个 php.ini。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T15:11:56.427

几周前我遇到了同样的问题。我试过了：

*   [PHP mail() 从命令行工作，但不是 apache](https://stackoverflow.com/questions/1462941/php-mail-works-from-command-line-but-not-apache)
*   [PHP“mail()”函数从 php5 cli 发送邮件，但在浏览器运行脚本时不发送](https://stackoverflow.com/questions/8608249/php-mail-function-sends-mail-from-php5-cli-but-not-when-the-script-is-run-by)

还有其他几个。

我的**错误日志**中有一个条目说`Segmentation fault`. 2天后发现问题。我在我的 debian 系统上使用了 Exim4，与 apache2 的组合出现了分段错误。我用 Postfix 替换了 Exim4，它起作用了！

但是，在您的情况下，您不能像 exec 一样运行`whoami`，您应该追求这条道路。

因为邮件功能最终会来到操作系统，所以一个 exec 命令应该可以工作！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T15:29:26.427

您可以使用 phpMailer throw SMTP 发送电子邮件，而无需使用 mail() 函数。代码在[这里（http://phpmailer.worxware.com/）](http://phpmailer.worxware.com/) 只是一个想法

可能可以使用[opencart](http://www.opencart.com/index.php?route=extension/extension/info&extension_id=3932)的这个扩展来使用phpmailer来代替邮件功能。我没有对此进行测试，并认为它可能会给某人一些想法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-27T06:47:01.623

就我而言，它用于我正在`php-fpm`使用的 Magento docker 图像。它保持 php 预加载（带有配置）。

重新启动后，它获得了新设置：[如何重新启动](https://serverfault.com/questions/189940/how-do-you-restart-php-fpm)或只是`sudo killall php-fpm`.

# jquery-ui - 在jquery mobile中使用ui-grid时如何删除ui-block之间的填充或空格

> ID：12372548
> 
> 赞同：0
> 
> 时间：2012-09-11T14:53:49.537
> 
> 标签：jquery-ui, css, jquery-mobile

这是链接[http://jsfiddle.net/Cbde2/](http://jsfiddle.net/Cbde2/)这里是结果[http://jsfiddle.net/Cbde2/embedded/result/](http://jsfiddle.net/Cbde2/embedded/result/)

我想要的是

> A座、B座、C座

中间没有空格或有一次 char 空格。我正在使用**jquery.mobile-1.1.0.min.css** 我相信会有一个基于修改 ui-block 或 ui-grid 的 css 的解决方案，但我在 css 方面不是很好，无法想出到目前为止的解决方案.. 感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T15:00:44.907

在您的 jquery.mobile-1.1.0.min.css 中更改此样式

```
.ui-grid-b .ui-block-a, .ui-grid-b .ui-block-b, .ui-grid-b .ui-block-c {
    width: 11.333%;
    } 
```

# java - Tomcat 替换虚拟机参数

> ID：12372550
> 
> 赞同：1
> 
> 时间：2012-09-11T14:53:52.503
> 
> 标签：java, tomcat, servlets, configuration, jvm-arguments

这可能是一个愚蠢的问题：

我目前有一些我的 Web 应用程序需要的 VM 参数。它们类似于：

```
-Dcom.company.custom.var='test' 
```

我通过以下代码访问它们：

```
System.getProperty("com.company.custom.config") 
```

我想将它们移动到其中一个 tomcat xml 文件（server.xml、context.xml 等）中，但我不确定我将如何去做。

所以我的问题是两个部分。我应该在哪里（以及如何）将这些变量放入 xml 中，以及如何在代码中访问它们？

提前致谢，如果这已经得到解答，我们深表歉意。我在这个话题上的搜索让我失望了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T14:57:01.830

如果这些是特定于应用程序的配置项，则它的标准位置是`<context-param>`in `web.xml`。像这样的东西：

```
<context-param>
    <param-name>myvar</param-name>
    <param-value>value</param-value>
</context-param> 
```

您可以使用[`ServletContext#getInitParameter(String)`](http://docs.oracle.com/javaee/5/api/javax/servlet/ServletContext.html#getInitParameter%28java.lang.String%29). 在 servlet 内部，您可以编写如下内容：

```
String myvar = getServletContext().getInitParameter("myvar"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T21:33:30.807

正式地，所有 JVM 选项都转到`setenv.sh`（对于 Unix）或`setenv.bat`（对于 Windows）。默认情况下，该文件在 Tomcat[中不存在，](http://www.tomcatexpert.com/ask-the-experts/configure-tomcat-memory-settings)但如果您创建一个，它将被启动脚本拾取。

您应该使用它的原因`server.xml`是它`server.xml`可能会从一个 Tomcat 版本更改为另一个版本，但`setenv.sh`（或 .bat）对您来说完全是自定义的。

正如您所指出的，读取此值是通过`System.getProperty(...)`.

# c# - Graphics 类的方法在哪里？

> ID：12372563
> 
> 赞同：1
> 
> 时间：2012-09-11T14:54:14.200
> 
> 标签：c#, wpf, winforms

我正在尝试在新的 WPF 项目中重用我很久以前在 Windows 窗体中实现的类。此类重写`OnRender`使用`Graphics`在窗体上绘制各种对象的对象的方法。现在我在 WPF 中使用了我的类，我已经用`Graphics`对象替换了`DrawingContext`对象，但是`Graphics`该类的某些方法没有实现。特别是方法`FillPie`, `FillEllipse`,`DrawBeziers`是我需要的。是否存在实现这些方法的类？我怎样才能实现这些方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T16:20:44.817

这是一个简单的例子，说明这样的事情如何在实践中发挥作用。

```
<Window x:Class="WpfApplication4.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow"
        Width="500"
        Height="500">
    <StackPanel>
        <Slider Name="PositionSlider"
                Margin="10"
                Maximum="50"
                Minimum="1"
                Value="10" />
        <Canvas Width="300" Height="300">
            <Path Fill="Gold"
                  Stroke="Black"
                  StrokeThickness="1">
                <Path.Data>
                    <EllipseGeometry Center="150,150"
                                     RadiusX="{Binding ElementName=PositionSlider,
                                                       Path=Value}"
                                     RadiusY="{Binding ElementName=PositionSlider,
                                                       Path=Value}" />
                </Path.Data>
            </Path>
        </Canvas>
    </StackPanel>
</Window> 
```

上面的 WPF 显示了一个简单的滑块和一个圆圈。圆的半径数据绑定到滑块的值。当您移动滑块时，圆圈会变大或变小。在您的旧世界中，当滑块（即您的缩放状态发生变化）时，您将获得一个重绘，您将在其中绘制一个更大更小的圆圈。但在 WPF 世界中，这是由依赖属性和数据绑定处理的。

![在此处输入图像描述](../Images/0ad95ce958d02844286ee4694a77a957.png)

上面的示例非常基础，您可以通过使用值转换器和实现依赖属性的对象和 INotifyPropertyChanged 进行多重绑定来做更复杂的事情，所有这些都无法在一个答案中解释。

# javascript - 来自javascript中url的正则表达式参数

> ID：12372569
> 
> 赞同：-2
> 
> 时间：2012-09-11T14:54:27.413
> 
> 标签：javascript, regex

你能帮我从 URL 中获取一些参数吗？

网址应为以下形式：`http.www.lolilol.com/gallery/Param1/Param2/Param3/`

我需要得到`Param1`和。`Param2``Param3`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T15:05:21.277

一个简单的解决方案：

```
var params = document.location.pathname.split('/').slice(2); 
```

这给了你数组`["Param1", "Param2", "Param3"]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T15:03:25.400

正则表达式会`http://www\.lolilol\.com/gallery/(.*)/(.*)/(.*)/`假设你的意思`http://www.lolilol.com/gallery/Param1/Param2/Param3/`

# iphone - 如何以图像为背景重写 GLCameraRipple 示例？

> ID：12372570
> 
> 赞同：7
> 
> 时间：2012-09-11T14:54:28.710
> 
> 标签：iphone, objective-c, ios, ipad, opengl-es

我正在尝试以图像为背景重写 Apple Sample [GLCameraRipple代码。](http://developer.apple.com/library/ios/#samplecode/GLCameraRipple/Introduction/Intro.html)实际上我正在尝试使用此代码在水图像上创建波纹效果，但代码适用于相机，相反我只想使用简单的水图像作为背景而不是相机。任何方向或任何示例代码都会有很大帮助。提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-06T02:45:01.880

相机涟漪效果的工作方式是它使三角形网格上的纹理坐标变形——所以好消息是您想要的效果与视频纹理完全不同；他们的纹理恰好是一个视频。要完成您想要的，您所要做的就是删除所有相机视频代码，并绑定您自己的纹理。

因此，在 viewDidLoad 中，您将注释掉`[self setupAVCapture]`，然后在 SetupGL 中注释掉两个纹理制服，因为您只会使用一个（两行是`glUniform1i(uniforms[UNIFORM_Y], 0);`, `glUniform1i(uniforms[UNIFORM_UV], 1);`），然后创建并绑定您自己的纹理。

GLKit 是完成此类工作的最快方法。GLKit 对你隐藏了很多 OpenGL 函数调用，但是非常快速和有效。

```
//create the GLKTextureInfo object
NSError *error;
NSDictionary *options = [NSDictionary dictionaryWithObject:[NSNumber numberWithBool:YES] forKey:GLKTextureLoaderOriginBottomLeft];
GLKTextureInfo *texture = [GLKTextureLoader textureWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"image" ofType:@"png"] options:options error:&error];
if (error) NSLog(@"Ripple FRONT TEXTURE ERROR: %@", error);

//bind the texture to texture unit 0
glActiveTexture(GL_TEXTURE0);
glBindTexture(texture.target, texture.name);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE); 
```

现在您丢失了 setupAVCapture 中包含的一些非常重要的设置。所以把它放在viewDidLoad中上面的代码之后：

```
if (_ripple == nil ||
    texture.width != _textureWidth ||
    texture.height != _textureHeight)
{
    _textureWidth = texture.width;
    _textureHeight = texture.height;

    _ripple = [[RippleModel alloc] initWithScreenWidth:_screenWidth
                                          screenHeight:_screenHeight
                                            meshFactor:_meshFactor
                                           touchRadius:5
                                          textureWidth:_textureWidth
                                         textureHeight:_textureHeight];

    [self setupBuffers];
} 
```

最后，您必须稍微更改片段着色器。

打开 Shader.fsh 并将 main 函数更改为：

```
void main()
{
    gl_FragColor = texture2D(SamplerY, texCoordVarying);
} 
```

无论如何，应该这样做。尝试 RippleModel 并看看你能做出什么样的怪异效果非常有趣。

# java - Java - 在 Java 中生成 0.5 到 6.28 之间的随机数

> ID：12372571
> 
> 赞同：2
> 
> 时间：2012-09-11T14:54:38.460
> 
> 标签：java, random

> **可能重复：**
> [使用 Java 在一个范围内生成随机数](https://stackoverflow.com/questions/363681/generating-random-number-in-a-range-with-java)

我的代码生成 0 到 1 之间的随机数。我需要生成 0.5 到 6.28 之间的随机数。

我目前的代码：

```
public class Random_Number_Generator
{
    double randomGenerator()
    {
        Random generator = new Random();
        double num = generator.nextDouble();

        return num;
    }
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-11T14:55:23.277

```
double num = generator.nextDouble()*(6.28-0.5) + 0.5; 
```

由于[nextDouble](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Random.html#nextDouble%28%29)返回一个数字 in `[0, 1[`，您通常必须这样做

```
double num = generator.nextDouble()*(max-min) + min; 
```

当你想要一个数字时`[min, max[`。

# windows - 在 .cmd 中使用 Windows 命令测试是 32 位还是 64 位并运行命令

> ID：12372578
> 
> 赞同：2
> 
> 时间：2012-09-11T14:55:06.353
> 
> 标签：windows, if-statement, cmd, command-line-arguments

我正在编写一个脚本来查找注册表值并将该值返回到 Windows 命令提示符屏幕，并将其添加到 .txt 文件中。我已经到了需要测试机器是 32 位还是 64 位的地步，这样我就知道使用哪个命令在注册表中找到我需要的值。

我正在按照我在下面写的内容寻找逻辑：

如果是 32 位，则（运行此命令）否则（运行此命令）

我希望不必有任何文本文件或此脚本工作所需的任何其他内容。以下是我到目前为止的代码。由于注册表位置是私有的，我将位置更改为一个虚构的位置。（注意：我确实有一个文本文件，该脚本从中读取我插入计算机和服务器的名称。到目前为止，我的代码可以工作，但是使用 2 个注册表查找命令，当它检查 32 位机器时，我显然没有得到正确的结果对于 64 位注册表位置）

```
@echo off

Setlocal

::sets the ldt variable to the local date and time in yyyymmdd_hhmmss
for /f "skip=1" %%c in ('wmic os get LocalDateTime') do set ldt=%%c
set ldt=%ldt:~0,8%_%ldt:~8,6%

::searches for computer names in servers.txt and then calls server sub routine. Once it goes back to the for loop it moves onto the next line in servers.txt
for /f %%c in (servers.txt) do (
set server=%%c
call:server
)
pause
goto:eof

--------------------------------------------------------------------
:server
set stamp=%date% at %time%
set DateTime=%stamp%

::Tests for a good ping, if no ping then move onto next machine
ping -n 1 -w 250 %server% > nul 
if %errorlevel% NEQ 0 (
  ECHO No Ping on %server%
  ECHO No Ping on %server% >>AuditScript_%ldt%.txt
  goto:eof
)
call:screen
call:log
goto:eof

--------------------------------------------------------------------
:screen
echo.
echo Computer name: %server%
reg query "\\%server%\HKLM\SOFTWARE\Registry Folder1\Information\" /V "Datavalue" | FIND "Datavalue"
reg query "\\%server%\HKLM\SOFTWARE\Wow6432Node\Registry Folder1\Information" /V "Datavalue" | FIND "Datavalue"
echo.
goto:eof

--------------------------------------------------------------------
:log
echo. >>AuditScript_%ldt%.txt
echo Registry value for %server% on %stamp% >>AuditScript_%ldt%.txt
reg query "\\%server%\HKLM\SOFTWARE\Registry Folder1\Information\" /V "Datavalue" | FIND "Datavalue" >>AuditScript_%ldt%.txt
reg query "\\%server%\HKLM\SOFTWARE\Wow6432Node\Registry Folder1\Information" /V "Datavalue" | FIND "Datavalue" >>AuditScript_%ldt%.txt
echo. >>AuditScript_%ldt%.txt
goto:eof

-------------------------------------------------------------------- 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T18:56:34.823

通过 cmd 你可以`%PROCESSOR_ARCHITECTURE%`像这样检查变量：

`echo %PROCESSOR_ARCHITECTURE%`这将输出`x86`或`x64`取决于操作系统

因此您可以使用以下内容：

```
@echo off

if %PROCESSOR_ARCHITECTURE% == x86 (
goto :x86
) else (
goto :x64
)

:x86
start "foo.exe"
goto :eof

:x64
start "bar.exe"
goto :eof 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-15T16:25:38.023

```
FOR /F "tokens=3" %%x in ('reg query "HKLM\SYSTEM\CurrentControlSet\Control\Session Manager\Environment" /V PROCESSOR_ARCHITECTURE') do set CPU=%%x
echo CPU Architecture: %CPU%
if "%CPU:~-2%"=="64" (
  echo Do This
) else (
  echo Do That
) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-11T20:25:46.243

尝试这个：

```
setlocal EnableDelayedExpansion

for /f "delims== tokens=2" %%a in ('wmic os get osarchitecture /value') do (
  set arch=%%a
)

if "%arch%"=="32-bit" (
  rem do some
) else (
  rem do other
)

endlocal 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-08T20:52:38.090

```
:: Installed OS
Set _Bitness=64
IF %PROCESSOR_ARCHITECTURE% == x86 (
  IF NOT DEFINED PROCESSOR_ARCHITEW6432 Set _Bitness=32
  )
Echo Operating System is %_Bitness% bit 
```

我认为这行得通

# mysql - 根据第一个表中的 id 从第二个表中选择行

> ID：12372579
> 
> 赞同：1
> 
> 时间：2012-09-11T14:55:10.960
> 
> 标签：mysql, sql

我有 2 张桌子

```
1_products
id, code, make, model, fk_group_id

1_stock
id, stock, repair 
```

我希望能够根据第一个匹配返回两个表中的所有行。说`WHERE fk_group_id = 11`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:57:32.573

这是一个：

```
SELECT *
FROM products AS p
INNER JOIN stock AS s ON p.id = s.id
WHERE fk_group_id = 11 
```

# java - servlet JAVA 中的 LDAP 绑定/搜索

> ID：12372580
> 
> 赞同：-1
> 
> 时间：2012-09-11T14:55:11.127
> 
> 标签：java, ldap

我已经构建了一个侦听端口（6666）的 Java 服务器。现在，我需要使用 LDAP 浏览器（我使用 Softerra）连接到该服务器。连接已完成，但我必须知道何时有 LDAP 绑定/搜索，但我不知道该怎么做。

这是我的服务器的代码（如果不是很清楚/很好，请随时告诉我，我对 Java Prog 很陌生。）：

```
package net.nantes.littleldap;
import java.net.*;
import java.io.*;

public class Serverside {

    public static void main(String[] args) {
        ServerSocket socketserver  ;
        Socket socket ;
        BufferedReader in;
        PrintWriter out;

        try {
            Authenticate auth = new Authenticate();
            socketserver = new ServerSocket(6666);
            System.out.println("Le serveur est à l'écoute du port "+socketserver.getLocalPort());
            auth.connect();
            socket = socketserver.accept(); 
            String inputLine = new String();
            in = new BufferedReader(
                        new InputStreamReader(
                        socket.getInputStream()));
                System.out.println("Connecté au serveur");
                while ((inputLine = in.readLine()) != null){
                    System.out.println(inputLine);
                out = new PrintWriter(socket.getOutputStream());
                out.println("Connection réussie");
                out.flush();
                }
                socket.close();
                socketserver.close();

        }catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

抱歉，消息是法语的，但这并不重要。我想也许我可以用 InputLine 做一些事情（当我打印它时，它会返回一些相对于 LDAP 的字符串，但我可能很难解析）。

那么，有什么想法吗？非常感谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T12:47:16.383

我强烈建议您使用 JNDI 或可用的 LDAP SDK 之一。我们喜欢：[https:](https://www.unboundid.com/products/ldap-sdk/) //www.unboundid.com/products/ldap-sdk/ -jim

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T16:12:26.360

除了侦听端口之外，您的服务器还必须“理解”LDAP 协议。我使用 OpenDS LDAP SDK (http://www.middleware.vt.edu/pubs/opends-sdk-0.9.0/)。

代码是这样的

```
public class MyLdapServer 
implements ServerConnectionFactory<LDAPClientContext, Integer> {

private LDAPListener listener;

public void init() {
    try {
        listener = new LDAPListener(1389, this);
    } catch (IOException e) {
        logger.error("error opening LDAP listener", e);
    }
}

public void destroy() {
   listener.close();
}

@Override
public ServerConnection<Integer> handleAccept(LDAPClientContext context)
        throws ErrorResultException {
    if (logger.isDebugEnabled())
        logger.debug("ldap connection from: " + context.getPeerAddress());

    IncomingLdapConnection ilc = new IncomingLdapConnection(context);
    return ilc;
}

private static Logger logger = LoggerFactory.getLogger(MyLdapServer.class);

} 
```

IncomingLdapConnection 允许您处理 LDAP 操作：

```
public class IncomingLdapConnection 
implements ServerConnection<Integer> {

    public void handleBind(Integer ctx, int version, BindRequest request,
        ResultHandler<? super BindResult> resultHandler,
        IntermediateResponseHandler intermediateResponseHandler)
throws UnsupportedOperationException {
    if (request.getAuthenticationType() != -128) {
        logger.warn("LDAP BIND: unsupported authentication type: " + request.getAuthenticationType());
        resultHandler.handleResult(Responses.newBindResult(ResultCode.AUTH_METHOD_NOT_SUPPORTED));
        return;
    }

    String bindName = request.getName();
    if (bindName.length() > 0) {
        if (request instanceof GenericBindRequest) {
            GenericBindRequest bindRequest = (GenericBindRequest)request;

            String userName = parseUidDn(bindName);
            if (userName == null) {
                // manche LDAP-Clients senden keine DN, sondern direkt den Namen
                userName = bindName;
            }

            String password = bindRequest.getAuthenticationValue().toString();

            logger.debug("LDAP BIND: non-anonymous bind, user = " + userName);
            anonymous = false;
        } else {
            logger.warn("LDAP BIND: non-anonymous bind, but unsupported request");
            resultHandler.handleResult(Responses.newBindResult(ResultCode.AUTH_METHOD_NOT_SUPPORTED));
            return;
        }
    } else {
        logger.debug("LDAP BIND: anonymous bind");
        anonymous = true;
    }

    boolean success = anonymous;
    if (!anonymous) {
        // authenticate user, set "success"
    }

    if (success)
        resultHandler.handleResult(Responses.newBindResult(ResultCode.SUCCESS));
    else
        resultHandler.handleResult(Responses.newBindResult(ResultCode.INVALID_CREDENTIALS));

    authenticated = success;
} 
```

**编辑**：用于回答 LDAP 搜索请求的 OpenDS 代码

```
public void handleSearch(Integer ctx, SearchRequest request,
        SearchResultHandler responseHandler, IntermediateResponseHandler intermediateResponseHandler)
    throws UnsupportedOperationException {
    if (request.getScope() == SearchScope.BASE_OBJECT && request.getName().isRootDN()) {
        logger.debug("LDAP Search: BASE_OBJECT");
        responseHandler.handleEntry(Responses.newSearchResultEntry(rootEntry));
    } else {
        // do the search
        // parameters: request.getName(), request.getScope(), request.getFilter()
    }

    responseHandler.handleResult(Responses.newResult(ResultCode.SUCCESS));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T16:05:26.927

查看[UnboundID LDAP SDK](https://www.unboundid.com/products/ldap-sdk/)和一些[示例代码](https://code.google.com/p/ldap-sample-code)。

编辑：

我不推荐使用 JNDI：

*   JNDI 使用不推荐使用的配置
*   JNDI存在软件缺陷
*   JNDI 不完全支持 LDAP 标准

### 也可以看看

*   [LDAP：编程实践](http://www.ldapguru.info/ldap/ldap-programming-practices.html)

# java - 对没有 Gson、Jackson 等的 JSONArray 进行排序

> ID：12372590
> 
> 赞同：0
> 
> 时间：2012-09-11T14:55:48.537
> 
> 标签：java, android, json, sorting, gson

在我的应用程序中，下面的类接收 JSONArray 并使用其数据填充 ListView。我希望此 ListView 中的字段按字母顺序显示。所以我想在使用它的数据之前对我的 JSONArray 进行排序。

我看到一些建议使用 GSON 或 Jackson 的主题，但我正试图以更简单的方式做到这一点。我不太了解这些库，也没有在他们的教程中找到我需要的东西。

JSON的一个例子：

```
{"0":["1","Alimentos e Bebidas","Y"],"1":["6","Beleza e Cosm\u00e9ticos","Y"],"2":
["11","Cama, Mesa e Banho","Y"],"3":["3","CDs, DVDs e Games","Y"],"4":["2","Convites 
e Cortesias","Y"],"5":["23","Cursos","Y"],"6":["8","Eletr\u00f4nicos","Y"],"7":
["16","Esporte e Lazer","Y"],"8":["14","Inform\u00e1tica e Acess\u00f3rios","Y"],
"9":["10","Limpeza","Y"],"10":["4","Livros","Y"],"11":["21","Livros no Sebo","Y"],
"12":["5","Outros","Y"],"13":["12","Roupas e Acess\u00f3rios","Y"]} 
```

我填充列表并等待用户的类方法：

```
public void proccess(){
    listview = (ListView) findViewById(R.id.include3);

    int qtdCategorias = json.length();
    categorias = new String[qtdCategorias];
    itens = new ArrayList<ItemListView>();
    for (int i=0; i<qtdCategorias; i++){
        c = json.optJSONArray(i);
        String nomeCategoria = null;
        try {
            nomeCategoria = c.getString(1); //A consulta SQL do php retorna somente categorias habilitadas
        } catch (JSONException e) {
            Log.e("CategoriasShoppingActivity", e.toString());
            e.printStackTrace();
        }
        categorias[i] = nomeCategoria;
        //ItemListView item = new ItemListView(nomeCategoria);
        //itens.add(item);
    }

    Arrays.sort(categorias);

    for (int i=0; i<qtdCategorias; i++){
        ItemListView item = new ItemListView(categorias[i]);
        itens.add(item);
    }

    adapterListView = new AdapterListView(this, itens);
    listview.setAdapter(adapterListView);

    listview.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View v,
                int position, long id) {
            c = json.optJSONArray(position);
            String name = null;
            String idt = null;
            try {
                name = c.getString(1);
                idt = c.getString(0);
            } catch (JSONException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            Intent in = new Intent(getApplicationContext(), ProdutosActivity.class);
            in.putExtra(TAG_NAME, name);
            in.putExtra(TAG_ID, idt);
            startActivity(in);
        }
    });

    } 
```

[编辑] 要从服务器请求数据，我使用这个 JSONParser 类 ()：

```
public class JSONParser{

static InputStream is = null;
static JSONArray jArr = null;
static JSONStringer jArrString = null;
static String json = "";
private static Context context;
private ProgressDialog loader;

// static HttpEntity httpEntity = null;

// constructor
public JSONParser() {

}

public JSONArray getJSONFromUrl(String url, List<NameValuePair> params) {

    // Making HTTP request
    try {
        // defaultHttpClient
        HttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);
        httpPost.setEntity(new UrlEncodedFormEntity(params));

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();

        // json = EntityUtils.toString(httpEntity);
        // HttpEntity httpEntity2 = httpEntity;
        json = EntityUtils.toString(httpEntity);
        // is = httpEntity.getContent();

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        Log.e("JSONParser", "IOException "+e.toString());
        e.printStackTrace();
    } 

    try {

        char[] c = new char[json.length()];
        json.getChars(0, json.length(), c, 0);
        int i = 0;
        while (c[i] == '\u00EF' || c[i] == '\u00BB' || c[i] == '\u00BF') { // remove
                                                                            // utf-8
                                                                            // BOM
            i++;
        }
        json = json.substring(i);

        Log.e("JSON", json);
    } catch (Exception e) {
        Log.e("Buffer Error", "Error converting result " + e.toString());
    }

    // try parse the string to a JSON object
    try {
        JSONObject json_data = new JSONObject(json);
        JSONArray hashMap_names = json_data.names();
        JSONArray hashMap_names2 = new JSONArray();
        Map hashMap = new HashMap(json_data.length());
        for (int i = 0; i != hashMap_names.length(); i++) {
            hashMap.put(String.valueOf(i), json_data.get(String.valueOf(i)));
            hashMap_names2.put(String.valueOf(i));
        }
        JSONObject hashMap_obj = new JSONObject(hashMap);

        jArr = hashMap_obj.toJSONArray(hashMap_names2);

        // jArr = new JSONArray(json);
        Log.e("JSON Parser", "succesful parsing data " + jArr.toString());
    } catch (Exception e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
        jArr = null;
    }

    // return JSON String
    return jArr;

} 
```

在这里，我在课堂上收到 JSON

```
protected void onActivityResult(int requestCode, int resultCode, Intent data){
    if (requestCode == 1){
        if (resultCode == RESULT_OK){
            try {
                json = new JSONArray(data.getStringExtra(TAG_JSON));
                Log.e("CategoriasShoppingActivity", "JSON: "+json);
            } catch (JSONException e) {
                e.printStackTrace();
            }
            proccess();
        }else{ // resultCode == RESULT_CANCELED
            Log.d("CategoriasJogarActivity", "AsyncTaskActicity retornou RESULT_CANCELED");
            finish();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T15:22:12.907

如果您可以访问服务器端代码，那么在那里对列表进行排序会更容易。如果没有，您唯一的方法是将其解析为 ArrayList 并使用任何已知算法对其进行简单排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T15:13:23.580

为什么不在序列化之前对其进行排序？使用 Comparator 接口并使用 Collections.sort 对其进行排序。排序时将比较器作为参数传递

# c# - 实体框架上的动态 Where 条件在 Datetime 中失败

> ID：12372591
> 
> 赞同：1
> 
> 时间：2012-09-11T14:55:49.960
> 
> 标签：c#, entity-framework-4

我正在使用带有 Entity Framework 4.0 的动态 where 子句来过滤结果。

像

```
ObjectQuery<T> tmp =  _context.MyTable.where("it.CreatedAt = @p0"); 
```

@p0 是一个对象参数

这工作得很好。

但问题是我想要类似的东西：

```
where("CAST(it.CreatedAt as Date) = @p0"); 
```

而 where("SqlServer.CAST(it.CreatedAt as Date) = @p0");

他们两个都失败了。

任何帮助表示赞赏

更新：

错误信息：

**找不到类型“日期”。确保加载了所需的模式并且正确导入了命名空间。**

查询在哪里

```
 it.IsDeleted = true  and (  it.OrganizationName ='05 sep 2012' OR  Cast( it.CreatedAt as Date )  =@p4 OR  1=0 ) 
```

已提供对象参数。

当前传递的值是 '9/5/2012 12:00:00 AM' 和类似：

```
string temp = SearchedQuery.Trim();
 DateTime res;
 if (DateTime.TryParse(temp, out res))
{
 query += ((" Cast( it." + field.Name +  " as Date )  =@p" + i + ""));

 ObjectParameter pr = new ObjectParameter("p" + i, res);

 param.Add(pr);

 query += " OR ";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T06:59:15.733

这对我有用。这并不完美，但在我想要的某些情况下有效。我们也可以多打扫

```
 string temp = SearchedQuery.Trim();
 DateTime res;
 if (DateTime.TryParse(temp, out res))
 {
 query += ((" ( it." + field.Name + " >@p" + i + ""));

 query += " AND ";

 ObjectParameter pr = new ObjectParameter("p" + i, res);

 i++;

 query += ((" it." + field.Name + " <@p" + i + " ) "));

 ObjectParameter pr1 = new ObjectParameter("p" + i, res.AddDays(1));

 param.Add(pr);
 param.Add(pr1);

 query += " OR ";
} 
```

# solr - Solr 复制正在创建大量索引

> ID：12372592
> 
> 赞同：2
> 
> 时间：2012-09-11T14:55:50.630
> 
> 标签：solr, replication

我在使用 solr Replication 时遇到问题。

我不能放图片给你看，但是在服务器中，有很多文件夹，名称为：index.20120909073102、index.20120909081811、index.20120909081711、index.20120909080711、index.20120909065611...

当从站从主站获取信息时，它会创建一个带有日期的新索引。但我只想复制到一个文件夹。有没有办法配置它？

天呐！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T16:05:46.827

这似乎是影响 4.0-BETA 之前的 Solr 版本的问题。有关详细信息，请参阅 JIRA 问题[SOLR-1781](https://issues.apache.org/jira/browse/SOLR-1781)

# python - 在掩码数组上使用 numpy.median

> ID：12372594
> 
> 赞同：10
> 
> 时间：2012-09-11T14:55:54.780
> 
> 标签：python, numpy

在屏蔽数组的情况下，我对 numpy.median 的输出有点困惑。这是一个简单的示例（假设导入了 numpy - 我的版本为 1.6.2）：

```
>>> a = [3.0, 4.0, 5.0, 6.0, numpy.nan]
>>> am = numpy.ma.masked_array(a, [numpy.isnan(x) for x in a]) 
```

在计算中位数时，我希望能够使用掩码数组来忽略`nan`数组中的值。这适用于使用掩码数组的任何一个`numpy.mean`或方法的平均值：`mean()`

```
>>> numpy.mean(a)
nan
>>> numpy.mean(am)
4.5
>>> am.mean()
4.5 
```

但是对于中位数，我得到：

```
>>> numpy.median(am)
5.0 
```

但我希望得到更像这样的结果：

```
>>> numpy.median([x for x in a if not numpy.isnan(x)])
4.5 
```

不幸的是 a`masked_array`没有`median`方法。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-11T14:57:25.373

使用`np.ma.median`在`MaskedArray`.

[*解释：如果我没记错的话，`np.median`不支持子类，所以它无法在`np.ma.MaskedArray`.* ]

# sql-server-2008 - 在 SQL Server 数据库中定位 BLOB

> ID：12372610
> 
> 赞同：1
> 
> 时间：2012-09-11T14:56:40.017
> 
> 标签：sql-server-2008, blob

我有一个 SQL Server 2008-R2 数据库，我正在将它的数据迁移到另一个 SQL Server 2008-R2 数据库。该数据库包含 400 多个表，但我需要找到所有包含以 BLOB 格式保存的图像和文档的表，并将这些项目放入单独的数据库（也是 SQL 2008-R2）中。

我使用以下脚本来定位所有具有 Binary、Image、Varbinary、Varchar(MAX)、nVarchar(MAX) 的表：

```
SELECT 
    OBJECT_NAME(c.id) as TableName,
    c.name as ColumnName, 
    c.colid As ColumnOrder,
    st.name as UserType,
    bt.name as BaseType
FROM 
    dbo.syscolumns c
    INNER JOIN dbo.systypes st ON st.xusertype = c.xusertype
    INNER JOIN dbo.systypes bt ON bt.xusertype = c.xtype
WHERE 
    OBJECTPROPERTY(c.id,'ISTABLE') = 1
    AND((st.name = 'nvarchar' AND c.length = 8000) OR
        (st.name = 'varchar' AND c.length = 8000) OR 
        (st.name in('sql_variant','varbinary','binary','image')))
ORDER BY
    OBJECT_NAME(c.id), 
    c.colid 
```

但这只会将列表减半，除了为这些表中的每一个构建 SELECT 语句之外，还有一种更简单的方法可以在这个数据库中查找 BLOB 文件吗？

# twitter-bootstrap - Twitter 引导文件上传

> ID：12372612
> 
> 赞同：22
> 
> 时间：2012-09-11T14:56:46.460
> 
> 标签：twitter-bootstrap

我想使用 bootstrap-fileupload.js ( [http://jasny.github.com/bootstrap/javascript.html#fileupload](http://jasny.github.com/bootstrap/javascript.html#fileupload) ) 但我对事件触发器感到困惑。

选择媒体资产后，如何触发将图像发送到 Web 脚本（例如 php）的事件？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-14T09:14:11.007

我建议您使用[https://github.com/blueimp/jQuery-File-Upload](https://github.com/blueimp/jQuery-File-Upload)进行文件上传。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-18T06:58:56.983

我偶然发现了类似的问题，我想在用户浏览/选择图像后立即通过 AJAX 请求上传图像，并使用保存的图像 ID 更新隐藏字段。我找不到 bootstrap-fileupload.js 的解决方案。所以下面的方法对我有用。

```
<script type="text/javascript" src="http://malsup.github.com/jquery.form.js"></script>
<script type="text/javascript"> 
var options = { 
        success:       showResponse  // post-submit callback 
    }; 
    $(document).ready(function()
    {
        $('#photoimg').live('change', function()
        {
            $("#imageform").ajaxForm(options).submit();         
        });
    });

    function showResponse(responseText, statusText, xhr, $form)  { 
        $('#photoUrl').val(responseText);
    }
</script> 
```

图像形式：（不能是嵌套形式！）

```
<form id="imageform" action="${pageContext.request.contextPath}/app/upload/saveimage" method="post" enctype="multipart/form-data">
                <div style="top: 25px">
                <div class="span6" style="margin-top: -545px; margin-left:680px">
                <div class="control-group">
                <label class="control-label " style="text-align: left">Photo: </label>
                <div data-fileupload="image" class="fileupload fileupload-new">
                    <div style="margin-left:-235px ;width: 150px; height: 150px; line-height: 150px;" class="fileupload-preview thumbnail" ></div>
                    <div>
                        <span class="btn btn-file" style="margin-right: 135px"><span class="fileupload-new" >Select image</span><span class="fileupload-exists">Change</span><input type="file" name="fileData" id="photoimg"/></span> <a data-dismiss="fileupload" class="btn fileupload-exists" href="#" style="margin-left: -75px">Remove</a>
                    </div>
                </div>
                </div>

                </div>
                </div>
            </form>

<input type="hidden" name="individualCustomer.personInfo.photoUrl" id="photoUrl" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T22:44:51.523

您可以通过删除 bootstrap.fileupload.js 文件将其与 jQuery File Upload ( [https://github.com/blueimp/jQuery-File-Upload](https://github.com/blueimp/jQuery-File-Upload) ) 集成，因为它与 jQuery File Uploader 存在命名冲突并且无法正常使用它。这意味着您将无法使用 Jasny 组件的更高级功能。但我建议您阅读代码并实现自己的解决方案（这并不难:)）。

您可以做的另一件事是使用不同的组件进行引导。该组件开箱即用，无需修改您的标记： http: [//gregpike.net/demos/bootstrap-file-input/demo.html](http://gregpike.net/demos/bootstrap-file-input/demo.html)。它比 jasny 组件更简单，因此在某些情况下可能更合适。

# hadoop - Hadoop——关键和价值应该是什么

> ID：12372620
> 
> 赞同：2
> 
> 时间：2012-09-11T14:57:14.593
> 
> 标签：hadoop

我是 Hadoop 新手。

我的目标是上传一个大号。将具有不同扩展名的文件放到 Hadoop 集群上，并获得如下输出：

文件扩展名

.jpeg 1000 .java 600 .txt 3000

等等。

我假设文件名必须是映射器方法的键，以便我可以读取扩展名（并且将来，做其他文件操作）

```
 public void map(Text fileName,
                   null/*will this do - value isn't required in this case*/,
                   OutputCollector<Text,IntWritable> output,
                   Reporter reporter)
                   throws IOException
           {
            Text extension = new Text(FilenameUtils.getExtension(filename));
            output.collect(extension, 1); 
        }

          public void reduce(Text key, Iterator<IntWritable> values, OutputCollector<Text, IntWritable> output, Reporter reporter) throws IOException { 
          int sum = 0; 
          while (values.hasNext()) { 
          sum += values.next().get(); 
          } 
          output.collect(key, new IntWritable(sum)); 
          }
          } 
```

**查询：**

1.  如何将文件名作为密钥发送给 Mapper？我正在考虑实现**RecordReader**接口，但不确定它是否需要，但也无法确定要使用哪个实现类！
2.  根据 API 和我的理解，**InputFormat**实现负责为处理提供拆分 - 我必须在这里做些什么来完成我的工作吗？

*请指导我，以防我对 Hadoop MapReduce 的概念做出任何根本不正确的假设。*

-------------------第一次编辑-------------------

附上代码、输出和查询：

```
/**
 * 
 */
package com.hadoop.mapred.scratchpad;

import java.io.IOException;

import org.apache.hadoop.fs.Path;
import org.apache.hadoop.io.IntWritable;
import org.apache.hadoop.io.Text;
import org.apache.hadoop.mapred.FileOutputFormat;
import org.apache.hadoop.mapred.JobClient;
import org.apache.hadoop.mapred.JobConf;

public class Main {

    /**
     * @param args
     * @throws IOException
     */
    public static void main(String[] args) throws IOException {
        // TODO Auto-generated method stub

        Main main = new Main();

        if (args == null || args.length == 0) {
            throw new RuntimeException("Enter path to read files");
        }

        main.groupFilesByExtn(args);
    }

    private void groupFilesByExtn(String[] args) throws IOException {
        // TODO Auto-generated method stub

        JobConf conf = new JobConf(Main.class);
        conf.setJobName("Grp_Files_By_Extn");

        /* InputFormat and OutputFormat from 'mapred' package ! */
        conf.setInputFormat(CustomFileInputFormat.class);
        conf.setOutputFormat(org.apache.hadoop.mapred.TextOutputFormat.class);

        /* No restrictions here ! */
        conf.setOutputKeyClass(Text.class);
        conf.setOutputValueClass(IntWritable.class);

        /* Mapper and Reducer classes from 'mapred' package ! */
        conf.setMapperClass(CustomMapperClass.class);
        conf.setReducerClass(CustomReducer.class);
        conf.setCombinerClass(CustomReducer.class);

        CustomFileInputFormat.setInputPaths(conf, new Path(args[0]));
        FileOutputFormat.setOutputPath(conf, new Path(args[1]));

        JobClient.runJob(conf);
    }

} 
```

自定义文件输入格式

```
/**
 * 
 */
package com.hadoop.mapred.scratchpad;

import java.io.IOException;

import org.apache.hadoop.io.NullWritable;
import org.apache.hadoop.mapred.FileInputFormat;
import org.apache.hadoop.mapred.FileSplit;
import org.apache.hadoop.mapred.InputSplit;
import org.apache.hadoop.mapred.JobConf;
import org.apache.hadoop.mapred.RecordReader;
import org.apache.hadoop.mapred.Reporter;

public class CustomFileInputFormat extends
        FileInputFormat<String, NullWritable> {

    @Override
    public RecordReader<String, NullWritable> getRecordReader(InputSplit aFile,
            JobConf arg1, Reporter arg2) throws IOException {
        // TODO Auto-generated method stub

        System.out.println("In CustomFileInputFormat.getRecordReader(...)");
        /* the cast - ouch ! */
        CustomRecordReader custRecRdr = new CustomRecordReader(
                (FileSplit) aFile);

        return custRecRdr;
    }

} 
```

定制的 RecordReader

```
/**
 * 
 */
package com.hadoop.mapred.scratchpad;

import java.io.IOException;

import org.apache.hadoop.io.NullWritable;
import org.apache.hadoop.io.Text;
import org.apache.hadoop.mapred.FileSplit;
import org.apache.hadoop.mapred.InputSplit;
import org.apache.hadoop.mapred.RecordReader;

public class CustomRecordReader implements RecordReader<String, NullWritable> {

    private FileSplit aFile;
    private String fileName;

    public CustomRecordReader(FileSplit aFile) {

        this.aFile = aFile;

        System.out.println("In CustomRecordReader constructor aFile is "
                + aFile.getClass().getName());
    }

    @Override
    public void close() throws IOException {
        // TODO Auto-generated method stub

    }

    @Override
    public String createKey() {
        // TODO Auto-generated method stub
        fileName = aFile.getPath().getName();

        System.out.println("In CustomRecordReader.createKey() "+fileName);

        return fileName;
    }

    @Override
    public NullWritable createValue() {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public long getPos() throws IOException {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public float getProgress() throws IOException {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public boolean next(String arg0, NullWritable arg1) throws IOException {
        // TODO Auto-generated method stub
        return false;
    }

} 
```

映射器

```
package com.hadoop.mapred.scratchpad;

import java.io.IOException;

import org.apache.commons.io.FilenameUtils;
import org.apache.hadoop.io.IntWritable;
import org.apache.hadoop.io.NullWritable;
import org.apache.hadoop.io.Text;
import org.apache.hadoop.mapred.MapReduceBase;
import org.apache.hadoop.mapred.Mapper;
import org.apache.hadoop.mapred.OutputCollector;
import org.apache.hadoop.mapred.Reporter;

public class CustomMapperClass extends MapReduceBase implements
        Mapper<String, NullWritable, Text, IntWritable> {

    private static final int COUNT = 1;

    @Override
    public void map(String fileName, NullWritable value,
            OutputCollector<Text, IntWritable> outputCollector,
            Reporter reporter) throws IOException {
        // TODO Auto-generated method stub
        System.out.println("In CustomMapperClass.map(...) : key " + fileName
                + " value = " + value);

        outputCollector.collect(new Text(FilenameUtils.getExtension(fileName)),
                new IntWritable(COUNT));

        System.out.println("Returning from CustomMapperClass.map(...)");
    }

} 
```

减速机：

```
/**
 * 
 */
package com.hadoop.mapred.scratchpad;

import java.io.IOException;
import java.util.Iterator;

import org.apache.hadoop.io.IntWritable;
import org.apache.hadoop.io.Text;
import org.apache.hadoop.mapred.JobConf;
import org.apache.hadoop.mapred.MapReduceBase;
import org.apache.hadoop.mapred.OutputCollector;
import org.apache.hadoop.mapred.Reducer;
import org.apache.hadoop.mapred.Reporter;

public class CustomReducer extends MapReduceBase implements
        Reducer<Text, IntWritable, Text, IntWritable> {

    @Override
    public void reduce(Text fileExtn, Iterator<IntWritable> countCollection,
            OutputCollector<Text, IntWritable> output, Reporter reporter)
            throws IOException {
        // TODO Auto-generated method stub

        System.out.println("In CustomReducer.reduce(...)");
        int count = 0;

        while (countCollection.hasNext()) {
            count += countCollection.next().get();
        }

        output.collect(fileExtn, new IntWritable(count));

        System.out.println("Returning CustomReducer.reduce(...)");
    }

} 
```

输出（hdfs）目录：

```
hd@cloudx-538-520:~/hadoop/logs/userlogs$ hadoop fs -ls /scratchpad/output
Warning: $HADOOP_HOME is deprecated.

Found 3 items
-rw-r--r--   4 hd supergroup          0 2012-10-11 20:52 /scratchpad/output/_SUCCESS
drwxr-xr-x   - hd supergroup          0 2012-10-11 20:51 /scratchpad/output/_logs
-rw-r--r--   4 hd supergroup          0 2012-10-11 20:52 /scratchpad/output/part-00000
hd@cloudx-538-520:~/hadoop/logs/userlogs$
hd@cloudx-538-520:~/hadoop/logs/userlogs$ hadoop fs -ls /scratchpad/output/_logs
Warning: $HADOOP_HOME is deprecated.

Found 1 items
drwxr-xr-x   - hd supergroup          0 2012-10-11 20:51 /scratchpad/output/_logs/history
hd@cloudx-538-520:~/hadoop/logs/userlogs$
hd@cloudx-538-520:~/hadoop/logs/userlogs$ 
```

日志（仅打开一个）：

```
hd@cloudx-538-520:~/hadoop/logs/userlogs/job_201210091538_0019$ ls -lrt
total 16
-rw-r----- 1 hd hd 393 2012-10-11 20:52 job-acls.xml
lrwxrwxrwx 1 hd hd  95 2012-10-11 20:52 attempt_201210091538_0019_m_000000_0 -> /tmp/hadoop-hd/mapred/local/userlogs/job_201210091538_0019/attempt_201210091538_0019_m_000000_0
lrwxrwxrwx 1 hd hd  95 2012-10-11 20:52 attempt_201210091538_0019_m_000002_0 -> /tmp/hadoop-hd/mapred/local/userlogs/job_201210091538_0019/attempt_201210091538_0019_m_000002_0
lrwxrwxrwx 1 hd hd  95 2012-10-11 20:52 attempt_201210091538_0019_m_000001_0 -> /tmp/hadoop-hd/mapred/local/userlogs/job_201210091538_0019/attempt_201210091538_0019_m_000001_0
hd@cloudx-538-520:~/hadoop/logs/userlogs/job_201210091538_0019$
hd@cloudx-538-520:~/hadoop/logs/userlogs/job_201210091538_0019$ cat attempt_201210091538_0019_m_000000_0/stdout
In CustomFileInputFormat.getRecordReader(...)
In CustomRecordReader constructor aFile is org.apache.hadoop.mapred.FileSplit
In CustomRecordReader.createKey() ExtJS_Notes.docx
hd@cloudx-538-520:~/hadoop/logs/userlogs/job_201210091538_0019$
hd@cloudx-538-520:~/hadoop/logs/userlogs/job_201210091538_0019$ 
```

正如所见 ：

1.  HDFS 上的输出是一个 0kb 的文件
2.  日志仅显示 sysout，直到线程在 CustomRecordReader

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T19:35:17.373

卡利尤格，

根据您的需要，无需将文件名传递给映射器。它已经在映射器中可用。只需按以下方式访问它。其余的很简单，只需模仿简单的字数统计程序即可。

```
 FileSplit fileSplit = (FileSplit)reporter.getInputSplit();
  String fileName = fileSplit.getPath().getName(); 
```

在新 API 的情况下，**报告**者需要更改为**上下文**

对于性能优化，您可以只创建一个记录读取器，它将简单地提供文件名作为映射器的键（与上面相同的方法）。使recordreader不读取任何文件内容。使值部分为 NullWritable。

Mapper 将文件名作为键。只需将 <file_extension,1> 作为 <key,value> 对发送到 reducer。

Reducer 需要做与 wordcount 相同的逻辑。

# java - Android Python MySQL 日期时间解析

> ID：12372621
> 
> 赞同：2
> 
> 时间：2012-09-11T14:57:15.663
> 
> 标签：java, android, python, mysql, datetime

我需要在 android 客户端、python 服务器和 mysql 服务器之间传递日期时间。

它应该工作如下：

*   android客户端将确切的时间从客户端发送到cherrypy python服务器（我猜datetime对象应该作为字符串发送？）
*   服务器必须将此字符串解析为有用的东西，以便作为日期时间对象使用

现在有两种情况：

1.  datetime对象应该写入mysql数据库（相关数据库表中有一个DATETIME类型的属性）
2.  服务器应从 mysql 数据库中检索日期时间并将其与解析的日期时间对象进行比较

在某些后台进程使用 python 日期时间对象作为输入参数完成工作后，应将新的日期时间对象传递回 android 客户端

有谁知道解决这些问题的好方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T15:29:33.997

传输日期时间值的最佳格式是[ISO 8601 标准](https://en.wikipedia.org/wiki/ISO_8601)；它们采用格式`YYYY-mm-ddTHH:MM:SS+tz:tz`，其中`T`是可选的。

Python 的`datetime.datetime`类可以使用一个简单的额外模块来解析这些（请参阅[如何解析 ISO 8601 格式的日期？](https://stackoverflow.com/questions/127803/how-to-parse-iso-formatted-date-in-python)）。[`.isoformat()`使用该方法](http://docs.python.org/library/datetime.html#datetime.datetime.isoformat)输出同样简单。

MySQL 的 DATETIME 列类型仅处理 UTC 值，但默认情况下接受 ISO 8601 日期时间字符串（使用空格而不是 a `T`），因此您必须将日期时间对象转换为 UTC（上面提到的 iso8601 模块的示例）：

```
import iso8601
utciso8601 = dt.astimezone(iso8601.iso8601.UTC).isoformat(' ')[:19] 
```

我也会将时区偏移量插入数据库；只需使用该[`tzname()`方法](http://docs.python.org/library/datetime.html#datetime.datetime.tzname)从对象中检索它，然后在使用该函数`datetime`从 MySQL 加载时再次解析它。`iso8601.iso8601.parse_timezone()`

```
# insertion:
cursor.execute('INSERT INTO dates VALUES(?, ?)', utciso8601, dt.tzname())

# querying
for row in query:
    timezone = iso8601.iso8601.parse_timezone(row[1])
    utcdt = iso8601.parse_date(row[0])
    dt = utcdt.astimezone(timezone) 
```

我不知道 Android 处理日期和时间的能力如何，但它肯定可以很好地处理 ISO 8601 格式。

# asp.net - 使用 jQuery ajax 从 ASP.NET 1.1 调用 Web 服务方法，不返回任何数据。

> ID：12372628
> 
> 赞同：0
> 
> 时间：2012-09-11T14:57:28.370
> 
> 标签：asp.net, web-services

我托管了一个由 jQuery ajax从**ASP.NET 1.1调用的 Web 服务。**

这是我用来调用网络服务的代码：

```
function OnTrimLevelChange() 
{
    var $jDecode = jQuery.noConflict();
    var vin = $jDecode("input[id*=txtVIN]").val();
    var styleId = '';
    var paramList = '{"vin": "' + vin + '","styleID": "' + styleId + '"}';
    try
    {

        $jDecode.ajax({
            type: 'POST',
            contentType: 'application/json; charset=utf-8',
            url: 'http://192.168.10.10/VINDecoder/service.asmx/CallADSWebMethod',
            data: paramList,
            dataType: 'json',
            success: function(data) {
                alert('I am here');
        },
            error: function(xml,textStatus,errorThrown) {
                alert(xml.status + "||" + xml.responseText);
            }
        });
    }
    catch(er)
    {
    }
} 
```

==================================================== =====
以上总是会出错的部分**。**
**错误：
xml.status = 0
xml.responseText = null** 

网络方法代码是：

```
[WebMethod]
public VINDescription CallADSWebMethod(string vin, string styleID)
{
       VehicleDescription vehicleDescription = FetchVehicleInfo(vin, true, styleID);

        VINDescription vinDescription = new VINDescription();

        try
        {
            if (vehicleDescription != null)
            {
                //Check if the response status of the call is successful or not.
                if (vehicleDescription.responseStatus.description.Equals("Successful"))
                {
                    vinDescription = AddToVINDescription(vehicleDescription);

                }
            }
        }
        catch (NullReferenceException ex)
        {
        }
        return vinDescription;
} 
```

注意：网络服务是在 .Net 4.0 中创建的，而我从中调用的站点是在 1.1 中。它们托管在不同的服务器中。

请让我知道我在这里缺少什么或者我在做她的什么错误..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T07:58:49.243

需要在 Web 服务中启用脚本服务执行。像这样 ：

```
[ScriptService] 
```

# jsp - 在 Webstorm 中编辑 JSP 文件

> ID：12372629
> 
> 赞同：4
> 
> 时间：2012-09-11T14:57:31.270
> 
> 标签：jsp, webstorm

根据插件的配置画面，WebStorm 5 中默认安装了一个 Java Server Pages Integration 插件。插件的描述如下：

> 为 JSP 和 JSPX 文件提供编辑、代码洞察和重构支持。

我根据现有 Java 项目的源创建了一个项目，但描述所承诺的似乎都不起作用。当我打开一个 .jsp 文件时，编辑器无法识别任何 JSP 特定标记和指令。html 和 javascript 内容的高亮显示是正确的，但是因为它不理解 JSP，所以整个文件充满了错误。那么是否可以在 Webstorm 中编辑 .jsp 文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T16:58:05.683

JSP 支持非常有限，因为大多数 JSP 功能都依赖于 Java 支持（这不是 WebStorm 的一部分）。要获得完整的 JSP 支持，请考虑 IntelliJ IDEA Ultimate 产品，它具有所有 WebStorm 功能等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T17:08:01.647

... CrazyCoder 所说的。终极版非常值得（如果你可以挥霍，几天后他们会在个人许可证上获得很好的折扣）下一个最佳选择（就免费编辑器而言）可能是 NetBeans。不是你要问的，但值得探索。

# mercurial - TortoiseHG：删除提交

> ID：12372647
> 
> 赞同：9
> 
> 时间：2012-09-11T14:58:42.000
> 
> 标签：mercurial, tortoisehg

我不小心在本地提交了一堆文件，但没有推送。所以基本上我想要做的是删除这个我的提交，然后推送一些其他的更改。

我可以通过 Backout-ing 删除提交，然后我必须在本地提交，所以它实际上是在本地删除的。

所以我的问题是，如果我进行推送，我的意外提交及其相应的恢复日志是否会公开可见？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-11T17:17:25.130

这听起来像是[`hg rollback`](https://www.mercurial-scm.org/repo/hg/help/rollback)你想要的命令。

[`hg backout <REV>`](https://www.mercurial-scm.org/repo/hg/help/backout)创建一个新的提交来反转`<REV>`. 原始提交和回退提交都将保留在您的历史记录中。这是在将错误提交推送到公共位置后必须修复的少数选项之一。

但是在这种情况下，您还没有推向公众，因此有更好的解决方案。

如果错误提交是最后一次提交（即您的提示），那么您可以使用`hg rollback`（`Repository`在 TortoiseHg 的菜单下）。该命令类似于提交的“撤消”。

如果错误提交在您的历史记录中的其他位置（但仍未被推送到公共存储库），您还可以使用[mq 扩展](https://www.mercurial-scm.org/wiki/MqExtension)来重写您的历史记录的那部分。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-28T18:15:11.193

您可以使用`hg strip -r . --keep`而不是`hg rollback`. `hg backout`仅当您推送了提交时才有必要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-26T05:36:56.137

您的问题的简单答案是肯定的。

如果您执行退出，那么它将显示在您的历史记录中。
如前所述，您想要执行 Strip。

这是对 mercurial 的扩展。
[https://www.mercurial-scm.org/wiki/StripExtension](https://www.mercurial-scm.org/wiki/StripExtension)

# c++ - Linux下区分共享驱动器上的文件和文件夹

> ID：12372648
> 
> 赞同：2
> 
> 时间：2012-09-11T14:58:43.110
> 
> 标签：c++, linux, filesystems, directory, dirent.h

我正在尝试使用以下代码列出共享驱动器上某个目录中的所有文件：

```
#include <iostream>
#include <string>

#include "dirent.h"

int main ()
{
    DIR *directoryHandle = opendir("./temp/");
    if (NULL != directoryHandle)
    {
        dirent *entry = readdir(directoryHandle);
        while (NULL != entry)
        {
            //skip directories and select only files (hopefully)
            if ((DT_DIR != entry->d_type) && (DT_REG == entry->d_type || DT_UNKNOWN == entry->d_type))
            {
                std::cout << "Name: " << entry->d_name << " Type:" << std::to_string(entry->d_type) << std::endl;
            }

            //go to next entry
            entry = readdir(directoryHandle);
        }
        closedir(directoryHandle);
    }

    return 0;
} 
```

问题是 entry->d_type 包含目录的 DT_UNKNOWN 以及目录中的文件`./temp/`。

是否有任何（可靠的）特定于 linux 的方法来尝试读取每个条目并确定它是文件还是目录？

的输出`cat /etc/SuSE-release`是：

> SUSE Linux Enterprise Desktop 11 (x86_64) VERSION = 11 PATCHLEVEL = 1

Linux版本为：2.6.32.59-0.7-default

不过，我希望这段代码也能在其他平台上运行。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T15:08:35.020

使用`stat`. 你会得到一个`struct stat`字段`st_mode`和宏`S_ISDIR`/ `S_ISREG`：

```
isDirectory = S_ISDIR(statBuf.st_mode);
isFile = S_ISREG(statBuf.st_mode); 
```

见`man 2 stat`。包括`sys/stat.h`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-11T15:08:31.437

如果你得到`DT_UNKNOWN`你将不得不继续调用[`lstat()`](http://linux.die.net/man/2/lstat)并检查该`st_mode`字段以确定这是一个文件、目录还是符号链接。如果您不关心符号链接，请`stat()`改用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-11T15:06:56.893

有一个具有命令[is_directory](http://www.boost.org/doc/libs/1_51_0/libs/filesystem/doc/reference.html#is_directory)的[boost 文件系统库](http://www.boost.org/doc/libs/1_51_0/libs/filesystem/doc/index.htm)。使用这样的库肯定会使代码也可以在其他平台上运行，但我不确定它是否适用于您的特定问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-11T15:07:12.773

试试这个。它列出目录中的文件减去文件夹：

```
#include <dirent.h> 
#include <stdio.h> 
# include <sys/types.h>
# include <sys/mode.h>
# include <stat.h>

DIR           *d;
struct dirent *dir;
struct stat s;
d = opendir("./temp/");

if (d)
{
  while ((dir = readdir(d)))
  {
    if (stat(dir->d_name,&s) != 0) {
        /* is this a regular file? */
        if ((s.st_mode & S_IFMT) == S_IFREG)
            printf("%s\n", dir->d_name);

    }
  }
  closedir(d);
} 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2014-01-29T02:25:57.930

```
unsigned char isFolder =0x4;
DIR Dir;
struct dirent *DirEntry;
Dir = opendir("c:/test/")

while(Dir=readdir(Dir))
{
    cout << DirEntry->d_name;
    if ( DirEntry->d_type == isFolder)
    {
    cout <<"Found a Directory : " << DirEntry->d_name << endl;
    } 
} 
```

# android - 如何从通知中触发广播接收器？

> ID：12372654
> 
> 赞同：9
> 
> 时间：2012-09-11T14:58:59.270
> 
> 标签：android, android-layout, android-intent

我想从通知中触发广播接收器。当我单击通知上的按钮时，它会显示此错误：

> “无法实例化接收器 com.example.testservice.myBroad：java.lang.ClassCastException：com.example.testservice.myBroad 无法转换为 android.content.BroadcastReceiver”

**更新/编辑，现在可以工作**

1.  您能帮忙处理从通知到广播接收器的 2 个按钮吗？如何将通知广播触发器的额外值传递给接收器，无论其播放按钮是按下还是暂停？

2.  现在我的按钮工作了，但是当我点击通知文本时，它不会让我进入我的活动。有什么帮助吗？

我为 2 个按钮编写了这段代码，具有额外的意图。

```
 RemoteViews layout = new RemoteViews(getPackageName(), R.layout.notification);
            layout.setTextViewText(R.id.notification_title, getString(R.string.app_name));
            Intent clickIntent = new Intent();
            clickIntent.putExtra("button","pause");
            clickIntent.setAction(ACTION_DIALOG);

            PendingIntent pendingIntent = PendingIntent.getBroadcast(getApplicationContext(), pendingRequestCode, clickIntent, pendingFlag);
            layout.setOnClickPendingIntent(R.id.notification_button,pendingIntent);
            builder.setContent(layout);

             layout = new RemoteViews(getPackageName(), R.layout.notification);
            layout.setTextViewText(R.id.notification_title, getString(R.string.app_name));
            Intent click = new Intent();
            clickIntent.putExtra("Button","play");
            clickIntent.setAction(ACTION_DIALOG);

            PendingIntent pi1 = PendingIntent.getBroadcast(getApplicationContext(), pendingRequestCode, click, pendingFlag);
            layout.setOnClickPendingIntent(R.id.notification_button1,pi1);
            builder.setContent(layout); 
```

myBroad 接收器文件

```
Bundle extrasBundle = intent.getExtras();
    String str = (String) extrasBundle.get("button");       
    Toast.makeText(context, str, Toast.LENGTH_SHORT).show();

    context.stopService(new Intent(context, myPlayService.class)); 
```

这是我的代码：

```
void showNotification() {
     int pendingRequestCode = 0;
        int pendingFlag = 0;

        final Resources res = getResources();
        final NotificationManager notificationManager = (NotificationManager) getSystemService(
                NOTIFICATION_SERVICE);
        Intent intent = new Intent(MainActivity.this,myBroad.class);
        PendingIntent pi= PendingIntent.getActivity(this, 0, intent, 0);
        Notification.Builder builder = new Notification.Builder(this)
                .setSmallIcon(R.drawable.ic_action_search)
                .setAutoCancel(true)
                .setTicker("this is notification")
                .setContentIntent(getDialogPendingIntent("Tapped the notification entry."));

            // Sets a custom content view for the notification, including an image button.
            RemoteViews layout = new RemoteViews(getPackageName(), R.layout.notification);
            layout.setTextViewText(R.id.notification_title, getString(R.string.app_name));
            Intent clickIntent = new Intent();
            clickIntent.setAction(ACTION_DIALOG);

            PendingIntent pendingIntent = PendingIntent.getBroadcast(getApplicationContext(), pendingRequestCode, clickIntent, pendingFlag);
            layout.setOnClickPendingIntent(R.id.notification_button,pendingIntent);
            builder.setContent(layout);

            // Notifications in Android 3.0 now have a standard mechanism for displaying large
            // bitmaps such as contact avatars. Here, we load an example image and resize it to the
            // appropriate size for large bitmaps in notifications.
            Bitmap largeIconTemp = BitmapFactory.decodeResource(res,
                    R.drawable.notification_default_largeicon);
            Bitmap largeIcon = Bitmap.createScaledBitmap(
                    largeIconTemp,
                    res.getDimensionPixelSize(android.R.dimen.notification_large_icon_width),
                    res.getDimensionPixelSize(android.R.dimen.notification_large_icon_height),
                    false);
            largeIconTemp.recycle();

            builder.setLargeIcon(largeIcon);

        notificationManager.notify(NOTIFICATION_DEFAULT, builder.getNotification());
 }

    PendingIntent getDialogPendingIntent(String dialogText) {
        return PendingIntent.getActivity(
                this,
                dialogText.hashCode(), // Otherwise previous PendingIntents with the same
                                       // requestCode may be overwritten.
                new Intent(ACTION_DIALOG)
                        .putExtra(Intent.EXTRA_TEXT, dialogText)
                        .addFlags(Intent.FLAG_ACTIVITY_NEW_TASK),
                0);
    } 
```

myBroad.class

```
public class myBroad extends BroadcastReceiver{
    @Override
    public void onReceive(Context context, Intent intent) {
        // TODO Auto-generated method stub
        Toast.makeText(context, "received", Toast.LENGTH_SHORT).show();

        context.stopService(new Intent(context, myPlayService.class));  
    }
} 
```

清单文件是：

```
 <application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
          </activity>

     <receiver android:name=".myBroad">
        <intent-filter >
<action android:name="android.intent.action.MEDIA_BUTTON"/>
    </intent-filter>

        </receiver>

    <service android:name="com.example.testservice.myPlayService" android:icon="@drawable/ic_action_search" android:label="@string/app_name" android:enabled="true"/>

</application> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T15:03:01.823

因为 myBroad 是一个活动对象，而不是广播对象......

而不是从活动扩展（继承），然后制作一个扩展广播接收器的内部类，然后直接从广播接收器继承。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T15:04:37.217

在您的方法中`getDialogPendingIntent`，您应该使用`PendingIntent.getBroadcast`而不是`PendingIntent.getActivity`. 这将导致您`PendingIntent`推送**广播**。

并解决这个问题：

`public class myBroad extends BroadcastReceiver`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T15:03:57.090

Exception 清楚地说明了这一点-您`myBroad`必须扩展`BroadcastReceiver`，而不是`Activity`像现在这样。

PS：您应该考虑切换到正确的命名约定。所以它应该是`MyBroad`（类）但是`myBroad`（该类的对象）。IE：

```
MyBroad myBroad = new MyBroad(); 
```

# maven - OpenJPA：既然 rodcoffin.com 已经消失，如何为 OpenJPA 获得类似 Maven 的原型？

> ID：12372657
> 
> 赞同：2
> 
> 时间：2012-09-11T14:59:14.330
> 
> 标签：maven, openjpa

Java 原型列表 [http://docs.codehaus.org/display/MAVENUSER/Archetypes+List](http://docs.codehaus.org/display/MAVENUSER/Archetypes+List)中有一个**损坏的 JPA 原型**

我尝试按照以下说明进行操作： [OpenJPA 的 Maven 原型](https://stackoverflow.com/questions/4161012/maven-archetypes-for-openjpa)

请注意，[http](http://maven.rodcoffin.com/repo) ://maven.rodcoffin.com/repo已被站点占用者接管。我不相信可以使用该站点来检索 OpenJPA 的 Maven 原型。

非常感谢您的阅读。

# php - Symfony2 和 SonataAdmin：ManyToMany 字段在创建时被插入两次（导致重复主键错误）但在更新时有效

> ID：12372665
> 
> 赞同：2
> 
> 时间：2012-09-11T14:59:47.673
> 
> 标签：php, symfony, doctrine-orm, symfony-sonata, sonata-admin

我正在尝试将标签添加到 Story 实体。我已经创建了自己的包、表单类型和数据转换器来使用[texttext](http://textextjs.com/)，我认为一切都运行良好……但事实证明，只有在现有故事中添加标签时才会出现这种情况。如果我在创建故事的同时尝试添加标签，则会引发异常，因为它试图在连接表中创建记录两次，从而导致重复的主键错误。

我认为问题不在于我的自定义表单类型和数据转换器，因为我在将请求绑定到表单之后但在持久化之前已经调试到控制器中，这里的一切似乎都很好——我的故事实体只包含我的标签'已添加，没有重复。

这是 tags 属性的配置，以防万一：

```
/**
 * @ORM\ManyToMany(targetEntity="Tag")
 * @ORM\JoinTable(name="story__story_tags",
 *   joinColumns={@ORM\JoinColumn(name="story_id", referencedColumnName="id")},
 *   inverseJoinColumns={@ORM\JoinColumn(name="tag_id", referencedColumnName="id")}
 * )
 */
protected $tags; 
```

这是我的日志输出的摘录：

```
INSERT INTO stories (created_at, updated_at, published_at, author_id, media_id, title, short_title, summary, text, slug, active, type) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) ({"1":{"date":"2012-09-11 15:07:20","timezone_type":3,"timezone":"Europe\/London"},"2":{"date":"2012-09-11 15:07:20","timezone_type":3,"timezone":"Europe\/London"},"3":{"date":"2012-09-11 14:56:00","timezone_type":3,"timezone":"Europe\/London"},"4":10,"5":68,"6":"Story with tags","7":"","8":"Test","9":"<p>test<\/p>","10":"story-with-tags","11":true,"12":"media"})
INSERT INTO story__media (id, story_media_id, media_size, show_caption) VALUES (?, ?, ?, ?) ({"1":"130","2":null,"3":"0","4":false})
SELECT s0_.slug AS slug0 FROM stories s0_ LEFT JOIN story__gallery s1_ ON s0_.id = s1_.id LEFT JOIN story__media s2_ ON s0_.id = s2_.id LEFT JOIN story__competition s3_ ON s0_.id = s3_.id WHERE s0_.slug LIKE 'story-with-tags-872875%' AND s0_.id <> ? ([130])
INSERT INTO story__counters (story_id, hits, shares, comments, updated_at) VALUES (?, ?, ?, ?, ?) ({"1":130,"2":0,"3":0,"4":0,"5":{"date":"2012-09-11 15:07:20","timezone_type":3,"timezone":"Europe\/London"}})
INSERT INTO story__sections (story_id, section_id, section_position) VALUES (?, ?, ?) ({"1":130,"2":212,"3":1})
UPDATE stories SET slug = ?, updated_at = ? WHERE id = ? (["story-with-tags-872875",{"date":"2012-09-11 15:07:20","timezone_type":3,"timezone":"Europe\/London"},130])
website/story/130 (DELETE) 11.00 ms
website/story/130 (PUT) 5.12 ms
Context: { title: 'Story with tags', summary: Test, text: '<p>test</p>', author: billy-wiggins, publishedAt: 1347371760, tags: [test] }
INSERT INTO story__story_tags (story_id, tag_id) VALUES (?, ?) ([130,9])
INSERT INTO story__story_tags (story_id, tag_id) VALUES (?, ?) ([130,9]) 
```

从第 3 行到最后一行可以看到，我的实体已被索引到 elasticsearch 中，它仅包含 1 个标签：“test”。在此之后，您可以看到 2 个重复的查询试图将标签 #9 与故事 #130 相关联。有谁知道为什么会发生这种情况？

是否有可能以某种方式使这些插入查询使用`INSERT IGNORE`语法，因为这至少可以绕过问题。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T15:33:34.917

好吧，我已经设法找到一种使用臭名昭著的黑客“解决”这个问题的方法。除非没有其他办法，否则我不太可能接受这是正确的答案，所以如果您知道解决此问题的好方法，请务必回复。

因为只有在同时创建我的 Story 实体和标签时才会出现问题，所以我扩展了`create`基本 Admin 类的方法，如下所示：（准备捏住鼻子......现在！）

```
/**
 * TODO achieve this in a non-smelly way
 * 
 * @param Story $object
 * @return mixed|void
 */
public function create($object)
{
    // Create fails when story has tags, so remove them...
    $tags = $object->getTags();
    $object->setTags(new \Doctrine\Common\Collections\ArrayCollection());
    parent::create($object);

    // ...then add them again and update.
    $object->setTags($tags);
    $this->getModelManager()->update($object);
} 
```

当然必须有一个更整洁的解决方案？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T09:20:53.373

这是__construct（）：

```
$this->Tags = new \Doctrine\Common\Collections\ArrayCollection() ; 
```

您必须对所有一对多和多对多关系执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-15T12:57:38.577

此解决方案工作正常：

```
public function __construct()
{
    $this->tags = new ArrayCollection();
}

public function addTag(Tag $tag)
{
    if (!this->tags->contains($tag)) {
        $this->tags->add($tag);
    }
} 
```

下次不添加重复键

# linux - awk：选择文本并使用它

> ID：12372667
> 
> 赞同：-1
> 
> 时间：2012-09-11T14:59:58.443
> 
> 标签：linux, unix, printing, ssh, awk

我尝试`**maniaplanet://#join=suchtbude.elite1@SMStormElite@nadeolabs**`从此文本中进行选择：

```
[2012/09/11 17:39:15] URL: maniaplanet://#join=suchtbude.elite1@SMStormElite@nadeolabs 
```

与 awk。

这是我的代码：

```
LINK=`grep "URL" $SRV_PATH/Logs/ConsoleLog.$PID.txt | awk -F"URL: " '{print $2}'`
echo -e "ManiaLink : [\033[32m$LINK\033[0m] \n" 
```

这是输出：

```
] niaLink : [maniaplanet://#join=punch.it@SMStormElite@nadeolabs 
```

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T15:06:52.273

更新：

使用字段 4，即 $4

```
awk '{print $4}' 
```

所以，

```
echo "[2012/09/11 17:39:15] URL: maniaplanet://#join=suchtbude.elite1@SMStormElite@nadeolabs" | awk '{print $4}' 
```

这会给你：

```
maniaplanet://#join=suchtbude.elite1@SMStormElite@nadeolabs 
```

即，您的序列：

```
$ LINK=`echo "[2012/09/11 17:39:15] URL: maniaplanet://#join=suchtbude.elite1@SMStormElite@nadeolabs" | awk '{print $4}'`

$ echo $LINK
maniaplanet://#join=suchtbude.elite1@SMStormElite@nadeolabs

$ echo -e "ManiaLink : [\033[32m$LINK\033[0m] \n"
ManiaLink : [maniaplanet://#join=suchtbude.elite1@SMStormElite@nadeolabs] 
```

**更新**：

这可以通过让 awk 完成所有打印来简化：

```
awk '{printf("ManiaLink : [\033[32m$%s\033[0m] \n", $4)}'` 
```

所以：

```
LINK=`echo "[2012/09/11 17:39:15] URL: maniaplanet://#join=suchtbude.elite1@SMStormElite@nadeolabs" | awk '{printf("ManiaLink : [\033[32m$%s\033[0m] \n", $4)}'` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T15:30:54.907

如果 url 总是在行尾，你可以使用这个 grep 正则表达式：

```
grep URL $SRV_PATH/Logs/ConsoleLog.$PID.txt | grep -o '[^ ]*$' 
```

# asp.net - aspx母版页中的表格标签格式错误

> ID：12372668
> 
> 赞同：1
> 
> 时间：2012-09-11T15:00:01.127
> 
> 标签：asp.net, html

我的母版页上的嵌套表有问题，它一直在工作，直到我添加到嵌套页面之一的最新添加。

在此表中，我在正文中有一个 asp:contentplaceholder，用于填写其余页面

母版页上的表格如下所示：

```
<table class="headermaintable" frame="vSides">
<tr>
<td class="headermaintd">
<table id="MasterTableID" style="height:100%;" class="widewidth" cellpadding="7">
    <tr class="headertop"> 
        <td>...</td>
        <td>...</td>
        <td>...</td>  
    </tr>
    <tr>
        <td>...</td>
        <td>...</td>
    </tr>
    <tr>
        <td>...</td>
        <td>...</td>
    </tr>
    <tr>
        <td>...</td>
        <td>
            <asp:ContentPlaceHolder id="MainContent" runat="server">
            </asp:ContentPlaceHolder>
        </td>
    </tr>
    <tr>
        <td></td>
        <td colspan="2" style="border-left:2px solid #000000;">
            <a class="BlueLink" href="..." target="_blank">
            <asp:Image ID="Image2" runat="server' ImageUrl="~/images/image2.gif" />
            </a>
        </td>
    </tr>
</table>
</td>
</tr>
</table> 
```

我发现它正在做什么，它是从嵌套表中取出最后一个表行并像这样放入主表中：

```
...
        <td>
            <asp:ContentPlaceHolder id="MainContent" runat="server">
            </asp:ContentPlaceHolder>
        </td>
    </tr>
</table>
    <tr>
        <td></td>
        <td colspan="2" style="border-left:2px solid #000000;">
            <a class="BlueLink" href="..." target="_blank">
            <asp:Image ID="Image2" runat="server' ImageUrl="~/images/image2.gif" />
            </a>
        </td>
    </tr>
        </td>
    </tr>
</table> 
```

我查看了另一页中的 html，所有标签都正确打开和关闭。有没有人见过类似的东西？如果您需要嵌套页面中的示例，我可以添加一些问题。

感谢所有可以提供有用建议的人

```
<asp:Panel ID="pnlPriceDisc" runat="server" Visible="false">
  <asp:DataList ID="dlQtyBreak" RepeatLayout="Table" Runat="Server" width="85%" CellPadding="1" CellSpacing="1">
      <HeaderTemplate>
   <tr class="style4" bgcolor="#dedede">
      <td colspan="5" align="center">
        <b>Current Price Breaks</b>
      </td>
    </tr>
    <tr bgcolor="#dedede" class="style4">
           <td align="center" width="20%"><b>Low</b></td>
      <td align="center" width="20%"><b>High</b></td>
      <td align="center" width="20%"><b>Price</b></td>
           <td align="center" width="20%"><b>Sale Price</b></td>
      <td align="center" width="20%"><b>Delete</b></td>
    </tr>
  </HeaderTemplate>
  <ItemTemplate>
    <tr class="style5" bgcolor="#eeeeee">
      <td align="center" valign="middle" width="20%">
        <asp:TextBox id="txtPBLowQty" ... />
        <asp:RequiredFieldValidator ... />
        <asp:RegularExpressionValidator ... />
      </td>
           <td align="center" valign="middle" width="20%">
        <asp:TextBox id="txtPBHighQty"... />
        <asp:RequiredFieldValidator ... />
        <asp:RegularExpressionValidator ... />
      </td>
      <td align="center" valign="middle" width="20%">
        <asp:TextBox id="txtPBPrice"  ../ />
        <asp:RequiredFieldValidator ... />
        <asp:RegularExpressionValidator ... />
      </td>
      <td align="center" valign="middle" width="20%">
        <asp:TextBox id="txtPBSalesPrice" ... />
        <asp:RegularExpressionValidator ... />
      </td>
      <td align="center" valign="middle" width="20%">
        <asp:Button id="btnPBDelete" ... />
        <asp:Label id="lblPBLinenum" ... />
      </td>
    </tr>
  </ItemTemplate>
</asp:DataList>
     <table width="85%" id="PBRowAdd" runat="server" cellpadding="1" cellspacing="1" visible="false">
  <tr bgcolor="#eeeeee" class="style5">
         <td align="center" valign="middle" width="20%">
      <asp:TextBox id="txtPBLowQtyAdd" ... />
      <asp:RequiredFieldValidator ... />
      <asp:RegularExpressionValidator .../>
    </td>
    <td align="center" valign="middle" width="20%">
      <asp:TextBox id="txtPBHighQtyAdd" ... />
      <asp:RequiredFieldValidator ... />
      <asp:RegularExpressionValidator ... />
    </td>
    <td align="center" valign="middle" width="20%">
      <asp:TextBox id="txtPBPriceAdd" ... />
      <asp:RequiredFieldValidator ... />
      <asp:RegularExpressionValidator ... />
    </td>
    <td align="center" valign="middle" width="20%">
      <asp:TextBox id="txtPBSalesPriceAdd" ... />
      <asp:RegularExpressionValidator ... />
    </td>
    <td align="center" valign="middle" width="20%">
      <asp:Button id="btnPBAddNew" ... />
    </td>
  </tr>
</table>
     <br>
<table>
  <tr>
    <td>
      <asp:Button ID="btnPBRowAdd" .../>
      <asp:button id="btnPBBack" ... />
      <asp:button id="btnPBUpdateQtyBreakList" ... />
    </td>
  </tr>
</table>
   </asp:Panel> 
```

现在在这个例子中是我发现的唯一一个导致问题的地方，如果我隐藏表“PBRowAdd”问题就消失了，但是一旦我让表可见，它就会导致问题。它在做什么导致它？

再次感谢任何可以就这个问题提供帮助的人。

# iphone - xcode - SDK 版本与用户 iPhone OS 版本的关系

> ID：12372678
> 
> 赞同：2
> 
> 时间：2012-09-11T15:00:25.583
> 
> 标签：iphone, ios, xcode

这个问题可能很简单。

那么，如果我在新 SDK 中使用了一些新类，我是否应该假设我的应用程序只能在具有相同操作系统版本号或更高版本的 iPhone 上运行？

例如，如果我使用一个类，其文档说该类仅在 iOS 5 之后存在，我是否应该假设我的应用程序只能在装有 iOS 5 的 iPhone 上运行？

还是类文档中的术语`iOS 5`仅指SDK，而不是目标部署平台？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T15:24:47.910

部署目标，iOS 和 SDK 不是同一个概念，但它们是相关的。当你看到一个方法或一个类在 iOS5 中可用时，这意味着你需要在你的机器中安装一个 SDK5 才能编译它，并且用户需要在他们的设备中安装一个 iOS5 才能执行它。但是，您可以在其下方有一个部署目标（例如 iOS4），并且只需注意运行时不要执行该部分代码。

有很多关于如何做到这一点的详细信息，但简而言之：

1.  如果它是一个方法，请在调用之前检查它是否响应该方法：`[object respondToSelector:@selector(yourNewMethod)]`

2.  如果是类，请在实例化对象之前检查该类是否存在：`NSClassFromString(@"YourNewClass")`. 此外，如果该类位于旧部署目标中不存在的新框架中，请记住将其链接为“弱”框架。否则启动时会失败。

当然，在这两种情况下，您都需要向用户提供替代响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T15:02:55.197

术语 iOS 5 是指设备上的操作系统。因此，该类仅适用于 5 后的设备，直到它被弃用。

# objective-c - MKAnnotationView 自定义标注 - 处理按钮上的触摸

> ID：12372679
> 
> 赞同：0
> 
> 时间：2012-09-11T15:00:29.240
> 
> 标签：objective-c, mkannotationview, mapkit

我正在使用 J4n0 标注代码 ( [github](https://github.com/j4n0/callout) ) 在 MapKit 中实现自定义注释。

在我的注释 ( `MyCalloutView`) 中，我使用了一个按钮和一个标签。

当我单击我的按钮时，会调用方法 handleTouch，但发送者对应的`UITapGestureRecognizer`总是`sender.view`等于我的注释视图，而不是按钮。

**MyCalloutView.h**

```
@interface MyCalloutView : CalloutView

@property (nonatomic, retain) IBOutlet UILabel* title;
@property (weak, nonatomic) IBOutlet UIButton *clickButton;

- (IBAction) handleTouch:(id)sender;

- (id) initWithAnnotation:(CalloutAnnotation*)annotation;

- (IBAction)onClickButton:(id)sender;

@end 
```

**MyCalloutView.m**

```
@implementation MyCalloutView

-(IBAction) handleTouch:(UITapGestureRecognizer *)sender {
    //LogDebug(@"touch from : %@", sender);
    UIButton *senderButton = (UIButton *)sender.view;
    LogDebug(@"Sender class : %@ - Sender Tag : %d - Sender View class : %@", [sender class], sender.view.tag, sender.view.class);
    LogDebug(@"Tap postion : (%f, %f)", [sender locationInView:sender.view].x, [sender locationInView:sender.view].y);
    if(senderButton == self.clickButton){
        LogDebug(@"le clique vient de click button !!");
    }
}
[...] 
```

**CalloutView.h** @class CalloutAnnotation;

```
@interface CalloutView : BaseCalloutView 

- (IBAction) handleTouch:(id)sender;
- (id)initWithAnnotation:(CalloutAnnotation*)annotation;

@end 
```

**CalloutView.m** @implementation CalloutView

```
-(IBAction) handleTouch:(id)sender {
    LogDebug(@"touch %@", sender);
}

- (id)initWithAnnotation:(CalloutAnnotation*)annotation
{
    NSString *identifier = NSStringFromClass([self class]);
    self = [super initWithAnnotation:annotation reuseIdentifier:identifier];
    if (self!=nil){
        [[NSBundle mainBundle] loadNibNamed:identifier owner:self options:nil];
    }

    // prevent the tap and double tap from reaching views underneath

    UITapGestureRecognizer *tapGestureRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleTouch:)];
    [self addGestureRecognizer:tapGestureRecognizer];
    UITapGestureRecognizer *doubletapGestureRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleTouch:)];
    doubletapGestureRecognizer.numberOfTapsRequired = 2;
    [self addGestureRecognizer:doubletapGestureRecognizer];

return self;
}
@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T12:50:54.343

这个问题是众所周知的。该解决方案在 GitHub 中描述：[问题 1](https://github.com/j4n0/callout/issues/1)

该解决方案对我有用。

# image - 加载图像并将宽度和高度更改为3

> ID：12372687
> 
> 赞同：0
> 
> 时间：2012-09-11T15:01:05.633
> 
> 标签：image, actionscript-3, flash, loader

我想从远程 url 和同步加载图像并更改它的宽度和高度。

我正在使用以下代码，但它想让我更改宽度和高度，我想我需要将加载器转换为位图对象。

我该怎么做，非常感谢。

```
var imageURLRequest:URLRequest = new URLRequest(pic); 
var myImageLoader:Loader = new Loader(); 
myImageLoader.load(imageURLRequest); 
var urlRequest:URLRequest = new URLRequest(pic);
var loader:Loader = new Loader();
loader.load(urlRequest);
trace(loader.width); // return 0
loader.width =100; //dosent work
allMC[i].img.addChild(loader); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T15:10:40.347

要访问加载程序加载的内容，请使用`loader.content`参考。如果您正在加载图像，您可以通过 检索其原始数据`(loader.content as Bitmap).bitmapData`，当然首先检查它是否是通过`if (loader.content is Bitmap)`。此外，您需要在加载程序完成加载后执行所有这些操作，它会发送一个指示这一点的事件。

```
...
loader.load(urlRequest);
loader.contentLoaderInfo.addEventListener(Event.COMPLETE, loaderComplete);
...
private function loaderComplete(e:Event):void {
    // now your image is fully loaded
    trace(loader.content.width);
    // etc etc, whatever you need to do with your image prior to 
    // addressing it from elsewhere.
} 
```

# mongodb - 如何对 MongoDB 文档中的哈希执行此查询（使用 Mongoid）

> ID：12372688
> 
> 赞同：2
> 
> 时间：2012-09-11T15:01:06.977
> 
> 标签：mongodb, mongoid

我正在使用 Mongoid。我有一个如下所示的文档：

```
Pet:
  foo: {bar: 1, foobar: 2}
  another_attr: 1 
```

在这种情况下，最好使用 Mongoid，我将如何查询 bar 值大于 0 且 another_attr 等于 1 的所有宠物？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-11T15:19:24.420

在 mongo 外壳中：

```
db.pets.find({"foo.bar":{$gt:0}, another_attr:1}); 
```

在蒙古语中：

```
Pet.where(:'foo.bar'.gt => 0, :another_attr => 1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T15:21:36.507

要查找 bar 值大于 0 的所有宠物，可以在查询中使用 $gt 关键字。要访问嵌套字段（栏），您可以使用点表示法：

```
db.pet.find( {"foo.bar" : {$gt : 0}}) 
```

然后，还要求 another_attr 等于 1，您可以在查询中添加另一个要求：

```
db.pet.find( {"foo.bar" : {$gt : 0} , another_attr : 1 } ) 
```

您可以在此处找到有关高级查询的文档：[http ://www.mongodb.org/display/DOCS/Advanced+Queries](http://www.mongodb.org/display/DOCS/Advanced+Queries)

# magento - 页面下方的 Magento 内容

> ID：12372689
> 
> 赞同：1
> 
> 时间：2012-09-11T15:01:10.920
> 
> 标签：magento, block

Magento CE 1.7.0.2 在页面下方显示我的自定义块的内容时遇到问题。该块显示在页面上，但内容在结束 HTML 标记之后复制到页面下方。显示布局插件只显示我的块引用一次，所以我不知道为什么会这样。我正在使用默认/自定义包。请帮忙！！！！

我的布局，如果有帮助：

```
<?xml version="1.0"?>

<layout version="0.1.0">
    <default>
        <remove name="store_language" />
        <remove name="store_switcher"/>
        <remove name="footer_links" />
    </default>
    <makeorder_index_index>
        <reference name="root">
            <action method="setTemplate"><template>page/1column.phtml</template></action>
        </reference>
        <reference name="content">
            <block type="makeorder/orderblock" output="toHtml" name="orderdispaly"
                    template="makeorder/orderdisplay.phtml"/>
        </reference>
    </makeorder_index_index>
</layout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T15:08:33.943

您应该`output="toHtml"`从“makeorder/orderblock”块属性中删除该指令。这基本上是说在初始化后立即显示块的内容 - 无论它应该放在哪里。所以它最终在“根”块之后呈现。

# jsf-2 - ui:repeat 是否需要唯一的变量名称？

> ID：12372695
> 
> 赞同：1
> 
> 时间：2012-09-11T15:01:48.283
> 
> 标签：jsf-2, facelets, mojarra, uirepeat

首先，让我解释一下结构。我有一些 JSF Facelets 页面，它们使用模板来提供带有动态生成菜单的通用标题。在该模板中，使用以下代码生成菜单：

```
<ui:repeat var="item" value="#{mainMenuBackingBean.subMenuItemsList}">
                        <td class="#{item.cssClass}">
                            <h:outputLink id="submenu_#{item.nameText}" value="#{item.linkPath}" disabled="#{item.disabled}">
                                #{item.nameText}
                            </h:outputLink>
                        </td>
                    </ui:repeat> 
```

每个单独的页面都有一个页面支持 bean，它知道如何设置其菜单，因此在呈现页面之前，使用以下代码设置菜单：

```
<f:event listener="#{specificPageBackingBeanHere.setup}" type="preRenderView"></f:event> 
```

它调用所有特定页面支持 bean 扩展的抽象类中的 setup 方法，然后进行一些调用以将正确的元素添加到 mainMenueBackingBean 的菜单列表。到目前为止，这对我们来说非常完美，直到现在我们还没有遇到任何问题。

在一个新页面上，我们有一个动态布局的表格，使用以下代码实现：

```
<table class="gridall">
        <tr>
            <td colspan="4" style="text-align: center;"><b>Table Title</td>
        </tr>
        <tr>
            ...
            column headings here
            ...
        </tr>
        <ui:repeat var="item" value="#{outgoingFaxBacking.outgoingList}">
            <tr bgcolor="#{item.status.color}">
                <td style="text-align: center;" class="itemsTopCell">
                    <h:commandLink value="#{item.itemNo}" action="#{outgoingFaxBacking.testMe}" > 
                        <f:ajax render=":rightColumn"/>
                    </h:commandLink>
                    <br/>
                    <b>Last: #{item.lastString}</b>
                </td>
                <td class="itemsTopCell">
                    #{item.description}
                </td>
                <td style="text-align: center" class="itemsTopCell">
                    <h:outputText value="#{item.quantity}">
                        <f:convertNumber maxFractionDigits="2"/>
                    </h:outputText>
                </td>
                <td style="text-align: center;" class="itemsTopCell">
                    <h:inputHidden id="notFilledNote" value="#{outgoingFaxBacking.notFilledNote}"/>
                    <h:commandButton  action="#{outgoingFaxBacking.markNotFilled(item.id)}" onclick="return(notFilled());" value="Not Filled">
                        <f:ajax execute="notFilledNote" render="@form"/>
                    </h:commandButton>
                </td>
            </tr>
            <tr bgcolor="#{item.status.color}">
                <h:panelGroup rendered="#{empty item.note}">
                    <td style="border-top: 1px;" colspan="4">
                        #{item.sig}
                    </td>
                </h:panelGroup>
                <h:panelGroup rendered="#{not empty item.note}">
                    <td style="border-top: 1px; border-bottom:0px;" colspan="4">
                        #{item.sig}
                    </td>
                </h:panelGroup>     
            </tr>
            <h:panelGroup rendered="#{not empty item.note}">
                <tr bgcolor="#{item.status.color}">
                    <td colspan="4" style="border-top: 1px;">
                        #{item.note}
                    </td>
                </tr>
            </h:panelGroup>
            <tr>
                <td style="border: 0px;font-size:2%" colspan="3">
                 &nbsp;
                </td>
            </tr>
        </ui:repeat>
    </table> 
```

页面第一次完美呈现。问题是，当您单击表中的 commandLink 或 commandButton 时（并且只有此表，页面上没有其他命令元素会导致此问题），会生成一个错误，如下所示：

> serverError：类 javax.faces.view.facelets.TagAttributeException /WEB-INF/templates/secure.xhtml @130,106 id="submenu_#{item.nameText}"：在 org.ppa.db 类型上找不到属性“nameText”。 serializabledb.FaxItemsContainer

错误位置 (@130,106) 是我在上面引用的菜单代码，但正在查看的对象类型 (FaxItemsContainer) 在上面的动态表中使用，而不是菜单。在摆弄了一会儿之后，确保它不是 ajax 问题、ui:include 问题或其他任何问题，我们最终将表中的 var 名称从“item”更改为“faxItem”，它出现了去工作。

所以最终，我的问题是我认为 ui:repeat （和其他 JSF 组件）的 var 名称在范围内是本地的，因此同一页面上的两个 ui:repeat 使用相同的 var 名称并不重要；不是这样吗？同一页面上的 ui:repeat 标签真的需要唯一的 var 名称吗？

我在 Tomcat 7 上运行 Mojarra 2.1.3。

# iphone - 使用 VLC，是否可以在同一台计算机上编码 30 到 40 个基于 IP 的网络摄像头？

> ID：12372697
> 
> 赞同：4
> 
> 时间：2012-09-11T15:01:57.220
> 
> 标签：iphone, video-streaming, vlc, mpeg, mpeg-4

我是一家小型连锁幼儿园的 IT 人员。每所学校目前都有大约 30-40 个 Axis IP 网络摄像头，范围从旧的 Axis 205,206 型号到 Axis M1011。这些摄像头允许父母登录网站，全天查看孩子的教室。IP 摄像头位于本地网络上，在端口 80 上进行流式传输。每所学校都有一个公共 IP 地址，在该地址上是一个反向代理 HTTP 服务器。我们通过基本上进行 URL 重写来直接从 Axis 网络摄像头提供 MJPEG，以允许客户端查看应用程序通过 Axis HTTP API 直接访问摄像头。

这多年来一直运行良好，甚至直到最近才在 iPhone 上运行。事实上，它仍然可以在 iPhone 上运行，但仅在连接 Wifi 时才有效。当 iPhone 通过 3G 连接时，MJPEG 流不再起作用。运营商是 AT&T。

过去几天我做了很多研究，并且知道我必须转向 Apple 设备的 HTTP Live Streaming，所以我只是想弄清楚我必须解决的难题的各个部分让它起作用。

我的 Axis 凸轮组合可能是个问题。Axis 205 和 206 仅支持 MJPEG，但 M1011 可以服务于 h.264，但显然只能通过 RTSP。如果需要或对整体解决方案有帮助，我愿意将旧的 Axis 凸轮换成 M1011。

据我目前的理解，我首先要解决的问题是将我的 30 到 40 轴 M1011 h.264 流（重新）编码/分块为 MPEG-2（.m3u8 和 .ts 文件）。

**问题 #1**

设置一台带有 VLC 命令行“批处理”文件的计算机是否可能和/或可行，以启动和编码来自 Axis 网络摄像头的 30 到 40 个输入流，并将其编码为 MPEG-2，准备为 iPhone 提供服务？我想知道处理这么多网络摄像头的稳定性、硬件要求等。这台计算机将有一个 HTTP 服务器（可能是 IIS）和一个公共 IP 地址，因此不需要比本地计算机更远地获取 MPEG-2 文件。

**问题2**

对于仅服务于 MJPEG 的旧 Axis 型号（205、206），是否也可以使用 VLC 将其编码为 MPEG-2？我是否正确假设（重新）编码或重新打包 .h264 成 MPEG-2 比将 MJPEG 编码成 MPEG-2 的“工作量”少得多，还是 CPU 的数量大致相同，等等？我已经安装了最新版本的 Videolan，很容易通过它的 RTSP URL 连接到 Axis M1011 .h264 流，所以我知道这很有效。

**问题 #3**

对于我给定配置的任一侧，任何人都可以共享任何特定的 VLC 命令行或配置：Axis M1011 .h264 和/或 Axis MJPEG 作为输入，对于输出，MPEG-2（.m3u8 和 .ts 文件），“分块” 变成苹果 iPhone 要求的尺寸，尤其是在连接 3G 时。

**问题 #4**

最后，如果有人有其他建议的方法（不同的编码器，可以更好地工作的媒体服务器等），我也想听听这些建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T16:25:53.080

如果您有足够的网络能力来接收输入流，并且有足够的 CPU 能力和 RAM 来进行编码，那么它是可能的。将单台机器用于多个 vlc 或 ffmpeg 实例没有固有的限制。

如果您的摄像机为 30 个流提供 512 kbps 输入，则需要 30x512 = 15 Mbps 的网络能力，这对于现代机器来说应该很好。

困难的部分是为 iPhone 输出获得 30 个转码。输出是一个 MPEG2 TS 容器，但在内部它必须有 mpeg4 或 h.264 编码的内容。H.264 编码很昂贵，但在 MPEG4 下需要更少的传出带宽才能获得相同的质量[大约少约 30%]

假设您可以查看 320x240 的分辨率，使用 mpeg4 的质量应该不错，输出为 256 kbps。对于 h.264，您可以达到 192 kbps [3GS 及以下的基线]

现在的麻烦是您是否有能力进行转码。这是您检查的方法

取一个代表您输入的视频文件。检查输入帧速率。将其转码为您需要的输出。检查您从 ffmpeg 获得的 fps 进行编码。注意它所在的输入速率的倍数。删除 5-10% 以处理多个同时流。这是您在机器上获得的最大值。

ffmpeg 可以从 http 或 rtsp 源获取输入并创建分段的输出。请参阅[此](https://stackoverflow.com/questions/12041077/ffmpeg-output-to-multiple-files-simultaneously)内容以了解如何使用 ffmpeg 创建分段。你仍然需要编写一个小程序来生成我猜的 m3u8 文件。

这不是微不足道的，但你会喜欢它。可以办到。

编辑：另一件事是您只需要在有人查看它时进行转码。因此，在给定时间，如果有人没有查看 10 个摄像头，您不必进行这些转码。因此，也许您应该首先统计出在给定时间查看了多少摄像机。看看你的历史。然后，您需要一台功能较弱的机器。

编辑：如果您可以处理一些编程而不是命令行，请查看：[this](http://www.ioncannon.net/programming/452/iphone-http-streaming-with-ffmpeg-and-an-open-source-segmenter/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T15:09:50.120

[ffmpeg](http://ffmpeg.org/)可能是您的替代方案。它基于命令行，跨平台，您将能够控制质量、格式和流。编码/重新编码质量基本上控制着您的应用程序的处理速度，需要吞吐量来从循环中获取数据。

# php - 使用超链接深入了解 PHP

> ID：12372700
> 
> 赞同：0
> 
> 时间：2012-09-11T15:02:26.680
> 
> 标签：php

我是 PHP 的新手，我遇到了以下代码的问题...

```
<?php 
 // Connects to Database 
 mysql_connect("localhost", "root") or die(mysql_error()); 
 mysql_select_db("test") or die(mysql_error()); 
 $data = mysql_query("SELECT country_id, country_name FROM country, channels WHERE channels.channel_id = country.channel_id AND channels.channel_id = '1'") 
 or die(mysql_error()); 
  echo "<table border=0 cellpadding=15>";
echo "<tr align = center bgcolor=white>
<td><b>Country ID</b></td><td><b>Country Name</b></td>" ; 
 while (mysql_fetch_row($data)) {
$cid = mysql_result($data, 1);
$cname = mysql_result($data, 2);

# inserts value into table as a hyperlink

echo "<tr align = center bgcolor=white><td>$cid</td><td><a href=view_country_detail.php?cid=$cid>$cname</td>";
}

# displays table

print '</table>';

 ?> 
```

为了解释我遇到的问题，我生成了超链接以深入了解从上面的代码中共享要单击的国家/地区 id 的公司，然后在“view_country_detail”页面上显示类似的布局。我无法弄清楚为什么表格的输出为我在数据库中的国家列的前两个 id 提供了重复的行。任何帮助将不胜感激，因为我在这里完全迷失了。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T15:08:39.393

我不明白你为什么使用`mysql_fetch_row`然后不想实际使用你获取的行。

你不应该`mysql_result`在这里使用。您正在做的是从结果集的第 1 行获取数据，然后从第 2 行获取数据，无论指针在您的 while 循环中位于哪一行。

试试这个：

```
while ($row = mysql_fetch_assoc($data)) {
    $cid = $row['country_id'];
    $cname = $row['country_name'];
} 
```

`mysql_fetch_assoc`我个人发现在代码中通过使用or时使用的关联键来引用字段更具可读性`mysql_fetch_array`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T15:08:49.747

尝试`while`按如下方式构建循环：

```
while($row = mysql_fetch_array($data)){
      $cid = $row[0];  //if you have the column names, replace 0 with 'column_name'
      $cname = $row[1];

      //then echo statement
 } 
```

此外，`mysql_*`函数已开始弃用过程，不应再使用，甚至`mysql_*`不鼓励使用 php 手册页状态。研究使用类似的[mysqli_* 函数](http://php.net/manual/en/mysqli.query.php)或 PDO。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T15:10:51.290

试试这个：

```
while ($row = mysql_fetch_row($data)) {
    $cid = $row[0];
    $cname = $row[1];
    ...
} 
```

`mysql_fetch_row`返回一个数组。

**然而**

You should look at stopping using the mysql_* functions - they're being deprecated. If you switch to PDO or mysqli, it helps make your code more secure, too.

# java - 在大小不等的列表中排序的问题

> ID：12372702
> 
> 赞同：-1
> 
> 时间：2012-09-11T15:02:38.323
> 
> 标签：java, sorting, collections, arraylist

我在给定类中排序时遇到问题，数据没有得到排序，这里两个列表的大小不相等，但列表在 list1 中存在键。FP 是一个具有键和值成员的 bean 类。数据是没有得到排序。我希望 list1 以相同的顺序在列表末尾附加额外的键

```
public class MyList {

    public static void main(String[] args) {
        FP f = new FP();
        f.setKey("s");
        f.setValue("he");
        FP f1 = new FP();
        f1.setKey("t");
        f1.setValue("she");
        List<FP> list = new ArrayList<FP>();
        list.add(f);
        list.add(f1);
        FP f2 = new FP();
        f2.setKey("t");
        f2.setValue("he");
        FP f3 = new FP();
        f3.setKey("s");
        f3.setValue("she");
        FP f4 = new FP();
        f4.setKey("u");
        f4.setValue("she");
        List<FP> list1 = new ArrayList<FP>();
        list1.add(f2);
        list1.add(f3);
        list1.add(f4);
        final Map<FP, Integer> indices = new HashMap<FP, Integer>();
        for (int i = 0; i < list.size(); i++) {
            indices.put(list.get(i), i);
        }
        Collections.sort(list1, new Comparator<FP>() {
            public int compare(FP o1, FP o2) {
                int index1 = (Integer) (indices.containsKey(o1) ? indices
                        .get(o1) : +1);
                int index2 = (Integer) (indices.containsKey(o2) ? indices
                        .get(o2) : +1);
                return index1 - index2;
            }

        });

        for (int i = 0; i < list1.size(); i++) {
            System.out.println("the data is" + list1.get(i).getKey());
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T15:05:33.927

我猜你的问题与 FP 对象没有覆盖`equals()`和`hashCode()`方法有关，因为这`(indices.containsKey(o1))`可能会返回 false。

当您将对象用作集合的内容并希望使用`contains()`(or)之类的调用进行查找`get(object)`时，如果您不覆盖`equals()`并且`hashCode()`查找可能会失败。

例子：

```
Set<FP> keySet=indices.keySet();
Iterator<FP> keySetIter = keySet.iterator();
while(keySetIter.hasNext())
{
FP fpObj = keySetIter.next();
//Write your equality condition here.
} 
```

# dynamic - YUI Datatable - 在页面加载后获取 DOM 元素的 ID 并在其他 YUI 事件中使用它

> ID：12372704
> 
> 赞同：0
> 
> 时间：2012-09-11T15:02:39.323
> 
> 标签：dynamic, datatable, yui

好的，所以我有一个 YUI 数据表。其中大部分与指南中所说的构建它完全相同。

我有一个控制更改每页行数的事件。它链接到每页下拉元素的行，并在下拉列表更改时将该下拉列表的值保存为 cookie。

```
var onRPPChange1 = YAHOO.util.Event.addListener("yui-pg0-1-rpp24", "change", getRPP_1); 
```

问题是每当我对数据表进行更新时，“yui-pg0-1-rpp24”（下拉列表的 ID）都会发生变化。我想扩展它，以便在页面加载时它会动态地将该下拉列表的 ID 插入到此事件侦听器中，这样我就不必在未来更新后继续编辑它。

我已经设法构建了以下内容，它将捕获 ID，并且我可以在表加载后提醒它，但到目前为止，在上面的 addListener 代码中包含这个函数的结果是行不通的。

```
var setRPPVars = function() {
        YAHOO.util.Event.onAvailable("rppSpan", this.handleOnAvailable, this); 
    }

var rppSpanIds = new Array();
var rppArray = new Array();

setRPPVars.prototype.handleOnAvailable = function() {
        var spans = document.getElementsByTagName("span");
        var n = 0;
        for(var i=0; i<spans.length; i++){
            if(spans[i].id == "rppSpan"){
                rppSpanIds[n] = spans[i];
                if(n == 0){
                    rppTopID = rppSpanIds[n].firstChild.id;
                    rppArray[0] = rppTopID;
                }
                else if(n==1){
                    rppBottomID = rppSpanIds[n].firstChild.id;
                    rppArray[1] = rppBottomID;
                }
                n++;
            }
        }
        alert(rppTopID);
        alert(rppBottomID);
        alert(rppArray);
    }

var rppEvent = new setRPPVars();

//this is the part that doesn't work:
var onRPPChange0 = YAHOO.util.Event.addListener(rppArray[0], "onchange", getRPP_0);
function getRPP_0(){setRPPVars();oRPP = rppTopID;alert("rppTopID: "+rppTopID); alert("oRPP: "+oRPP);}; 
```

你有任何建议都会很棒！

编辑：为清楚起见，此元素是每页下拉列表中的行数：

```
<span id="rppSpan">
  <select id="yui-pg0-1-rpp24" class="yui-pg-rpp-options" title="Rows per page">
    <option value="10">10</option>
    <option value="25">25</option>
    <option value="50">50</option>
    <option value="100">100</option>
  </select>
</span> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T16:00:58.763

改为订阅 YAHOO.widget.Paginator 的 rowsPerPageChange：

[http://developer.yahoo.com/yui/docs/YAHOO.widget.Paginator.html#event_rowsPerPageChange](http://developer.yahoo.com/yui/docs/YAHOO.widget.Paginator.html#event_rowsPerPageChange)

然后你不必找到实际的元素。

# sql - 包含零值的 SQL 计数

> ID：12372708
> 
> 赞同：7
> 
> 时间：2012-09-11T15:02:53.240
> 
> 标签：sql, sql-server-2008, count

我创建了以下存储过程，用于计算所选位置的特定范围之间每天的记录数：

```
[dbo].[getRecordsCount] 
@LOCATION as INT,
@BEGIN as datetime,
@END as datetime

SELECT
ISNULL(COUNT(*), 0) AS counted_leads, 
CONVERT(VARCHAR, DATEADD(dd, 0, DATEDIFF(dd, 0, Time_Stamp)), 3) as TIME_STAMP 
FROM HL_Logs
WHERE Time_Stamp between @BEGIN and @END and ID_Location = @LOCATION
GROUP BY DATEADD(dd, 0, DATEDIFF(dd, 0, Time_Stamp)) 
```

但问题是结果没有显示记录为零的日子，我很确定这与我的 WHERE 语句不允许显示零值有关，但我不知道如何解决这个问题.

提前感谢尼尔

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-11T15:11:12.403

与其说是 WHERE 子句，不如说是 GROUP BY。该查询将只返回存在的行的数据。这意味着当您按时间戳日期分组时，只会返回有行的日期。SQL Server 无法从上下文中知道您要“填空”，它也不知道用什么。

正常的答案是一个 CTE，它会产生你想看到的所有日子，从而填补空白。这有点棘手，因为它需要一个递归 SQL 语句，但这是一个众所周知的技巧：

```
WITH CTE_Dates AS
(
    SELECT @START AS cte_date
    UNION ALL
    SELECT DATEADD(DAY, 1, cte_date)
    FROM CTE_Dates
    WHERE DATEADD(DAY, 1, cte_date) <= @END
)
SELECT
cte_date as TIME_STAMP,
ISNULL(COUNT(HL_Logs.Time_Stamp), 0) AS counted_leads, 
FROM CTE_Dates
LEFT JOIN HL_Logs ON DATEADD(dd, 0, DATEDIFF(dd, 0, Time_Stamp)) = cte_date
WHERE Time_Stamp between @BEGIN and @END and ID_Location = @LOCATION
GROUP BY cte_date 
```

分解它，CTE 使用一个引用自身的联合来递归地将一天一次添加到前一个日期，并将该日期作为表格的一部分记住。如果您运行一个使用 CTE 的简单语句并从中选择 *，您会看到开始和结束之间的日期列表。然后，该语句根据日志时间戳日期将此日期列表连接到日志表，同时使用左连接保留没有日志条目的日期（从“左侧”获取所有行，无论它们在“右”侧与否）。最后，我们按日期分组并计数，我们应该得到您想要的答案。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-11T15:08:32.803

当没有数据要计算时，就没有要返回的行。

如果您想将空天包含为 0，则需要创建一个表（或临时表或子查询）来存储天数，并从中加入查询。

例如：类似的东西

```
SELECT 
    COUNT(*) AS counted_leads,  
    CONVERT(VARCHAR, DATEADD(dd, 0, DATEDIFF(dd, 0, Time_Stamp)), 3) as TIME_STAMP  
    FROM 
        TableOfDays
           left join
        HL_Logs 
           on TableOfDays.Date = convert(date,HL_Logs.Time_Stamp)
           and ID_Location = @LOCATION 
    WHERE TableOfDays.Date between @BEGIN and @END 
    GROUP BY DATEADD(dd, 0, DATEDIFF(dd, 0, Time_Stamp)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-18T17:35:28.407

使用左外连接。如

```
select count(stuff_ID), extra_NAME 
from dbo.EXTRAS 
left outer join dbo.STUFF on suff_EXTRA = extra_STUFF 
group by extra_NAME 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-27T15:10:01.700

我最近有一个类似的任务，并以此作为我工作的背景。但是，正如 robwilliams 我也解释的那样，无法使其 KeithS 解决方案正常工作。我的任务与我的工作时间略有不同，但我认为 neilrudds 问题的解决方案是

```
DECLARE @Start as DATETIME
       ,@End as DATETIME
       ,@LOCATION AS INT;

WITH CTE_Dates AS
(
    SELECT @Start AS cte_date, 0 as 'counted_leads'
    UNION ALL
    SELECT DATEADD(DAY, 1, cte_date) as cte_date, 0 AS 'counted_leads'
    FROM CTE_Dates  
    WHERE DATEADD(DAY, 1, cte_date) <= @End
)
SELECT cte_date AS 'TIME_STAMP'
      ,COUNT(HL.ID_Location) AS 'counted_leads'
FROM CTE_Dates 
LEFT JOIN HL_Logs AS HL ON CAST(HL.Time_Stamp as date) = CAST(cte_date as date)
AND DATEPART(day, HL.Time_Stamp) = DATEPART(day,cte_date)
AND HL.ID_Location = @LOCATION
group by cte_date
OPTION (MAXRECURSION 0) 
```

# java - 使用多个监视器时设置对话框位置

> ID：12372710
> 
> 赞同：4
> 
> 时间：2012-09-11T15:02:55.163
> 
> 标签：java, jdialog, multiple-monitors

我通常依靠`setLocationRelativeTo(null)`将我的对话框定位在屏幕中央，但最近我得到了第二台显示器，这种方法总是将我的对话框中心设置在主显示器上，即使主窗口在第二台显示器上也是如此。

我知道这是一件愚蠢的事情，但它让我很恼火。除了设置相对于主屏幕的位置之外，还有什么解决方案吗？我从来没有这样做过。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-07-24T20:10:23.687

我知道这个问题很老......但对于像我这样的其他疯狂程序员：

创建自己的类，扩展 JDialog 并使用 super(Frame, Modal)。

这对我有用：

```
import java.io.File;
import javax.swing.JDialog;
import javax.swing.JFileChooser;
import javax.swing.JFrame;

public class GFileChooserDialog extends JDialog {

    private JFileChooser fileChooser;   
    private File file;

    public GFileChooserDialog(JFrame relativeTo) {
        super(relativeTo, true); 
        this.setAlwaysOnTop(true);
        this.fileChooser = new JFileChooser();
        this.getContentPane().setSize(450, 300);
        int returnVal = fileChooser.showOpenDialog(this);
        if (returnVal == JFileChooser.APPROVE_OPTION) {
            file = fileChooser.getSelectedFile();            
        } 
    }

    public File getFile() {
        return file;
    }
    public void setFile(File file) {
        this.file = file;
    }   
} 
```

使用[Singelton-Pattern](http://javabeginners.de/Design_Patterns/Singleton_-Pattern.php "单一模式")作为主框架，您可以像这样调用对话框：

```
new GFileChooserDialog(Singelton.getInstance()); 
```

如果要在屏幕中央完美显示 JDialog，请不要使用 setLocationRelativeTo。而是覆盖其绘制方法并设置位置：

```
@Override
public void paint(Graphics g) {
    super.paint(g);
    Rectangle screen = this.getGraphicsConfiguration().getBounds();
    this.setLocation(
        screen.x + (screen.width - this.getWidth()) / 2,
        screen.y + (screen.height - this.getHeight()) / 2
    );
} 
```

# c# - 动态添加投影到 NHibernate 查询

> ID：12372711
> 
> 赞同：0
> 
> 时间：2012-09-11T15:02:58.397
> 
> 标签：c#, nhibernate, orm, queryover

尝试在 NHibernate QueryOver 中实现以下查询。

**SQL**

```
SELECT
     SUM(GrossChargeAmount)
FROM Charges
INNER JOIN Account on Account.Chargekey = Charges.Chargekey

SELECT
     SUM(GrossChargeAmount),
     Account.AccountHolder
FROM Charges
INNER JOIN Account on Account.Chargekey = Charges.Chargekey
GROUP BY
     Account.AccountHolder 
```

**休眠：**

```
var accountAlias = null;

var baseQuery = session.QueryOver<Charges>()
                .JoinAlias(c => c.Account, () => accountAlias)
                .SelectList(s => s.SelectSum(c => c.GrossChargeAmount)) 
```

我有构建 baseQuery 的代码。然后，根据方法参数，我希望将*GROUP BY*附加到 baseQuery，例如：

```
baseQuery.SelectList(s => s.GroupBy(() => accountAlias.AccountHolder) 
```

然而，这最终会重置我的 baseQuery 上的投影，并基本上“覆盖”初始投影（ .SelectList(s => s.SelectSum(c => c.GrossChargeAmount)) ）。在这个阶段，查询的执行不会有任何 SUM() 只是 GROUP BY。

**TLDR；**如何将投影添加到 Nhibernate QueryOver 实例？

最后，但并非最不重要的是，我在 NHibernate 2.0.50727 上运行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T15:33:15.103

尝试：

```
baseQuery.SelectList(s => 
    s.SelectSum(c => c.GrossChargeAmount)
    .GroupBy(() => accountAlias.AccountHolder)) 
```

如果您愿意，还可以构建传递给 SelectList 的表达式

# mysql - 即使在 application-context.xml 中明确指定，休眠会话也会返回 null

> ID：12372716
> 
> 赞同：0
> 
> 时间：2012-09-11T15:03:05.443
> 
> 标签：mysql, spring, hibernate

我的 application-context.xml ：

```
<?xml version="1.0" encoding="UTF-8"?> 
```

```
<bean id="myDataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
    <property name="driverClassName"><value>com.mysql.jdbc.Driver</value></property>
    <property name="url"><value>jdbc:mysql://localhost:3306/myDB</value></property>
    <property name="username"><value>myUser</value></property>
    <property name="password"><value>myPwd</value></property>

</bean>

<bean id="mySessionFactory" class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">
    <property name="dataSource" ref="myDataSource"/>                            
    <property name="mappingResources">
<list>
<value>user.hbm.xml</value>
</list>
</property>
<property name="hibernateProperties" >
<value>
hibernate.dialect=org.hibernate.dialect.MySQLDialect
</value>
</property>
</bean>

<bean id="userdao" class="x.y.z.UserDao">
<property name="sessionFactory" ref="mySessionFactory"/>

</bean>

     </beans> 
```

用户.hbm.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD//EN"
        "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">

<hibernate-mapping package="x.y.m">
<class name="User" table="user">
<id name="userId" column="id">
     <generator class="native"/>
</id>

 <property name="firstname" column="firstName" />
 <property name="lastName" column="lastName"/>
 <property name="login" column="login"/>
 <property name="pass" column="pass"/>
 <property name="superemail" column="superEmail"/>
 </class>

</hibernate-mapping> 
```

用户道.java：

```
package x.y.z;

import org.hibernate.HibernateException;
import org.hibernate.Session;
import org.hibernate.SessionFactory;
import org.hibernate.cfg.Configuration;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.orm.hibernate.support.HibernateDaoSupport;
import org.springframework.stereotype.Component;

import x.y.m.User;

@Component
public class UserDao {

    SessionFactory sessionFactory;

    public void addUser(User user) {
        Session session;
        try {
            try {

                session = this.sessionFactory.getCurrentSession();

            System.out.println(session.isConnected());
                session.save(user);
            } catch (RuntimeException e) {
                System.out.println("Not Getting Session");
                // TODO Auto-generated catch block

                e.printStackTrace();
            }
        } catch (HibernateException e) {
            // TODO Auto-generated catch block
            System.out.println("printing in the catch");
            e.printStackTrace();
        }

    }

    public void setSessionFactory(SessionFactory _sessionFactory) {
        this.sessionFactory = _sessionFactory;

    }

} 
```

用户控制器.java：

```
 package x.y.c.a;
    import org.springframework.beans.factory.annotation.Autowired;
    import org.springframework.stereotype.Controller;
    import org.springframework.ui.ModelMap;
    import org.springframework.web.bind.annotation.ModelAttribute;
    import org.springframework.web.bind.annotation.RequestMapping;
    import org.springframework.web.bind.annotation.RequestMethod;
    import org.springframework.web.servlet.ModelAndView;

    import x.y.z.UserDao;
    import x.y.m.User;

    @Controller
    public class UserController  {
        @Autowired UserDao userdao ;
        @RequestMapping(value = "/user", method = RequestMethod.GET)
           public ModelAndView student() {
              return new ModelAndView("user", "command", new User());
           }

           @RequestMapping(value = "/addUser", method = RequestMethod.POST)
           public String addStudent(@ModelAttribute("SpringWeb")User user, 
           ModelMap model) {
              model.addAttribute("userId", user.getUserId());
              model.addAttribute("login", user.getLogin());
              model.addAttribute("pass", user.getPass());
              model.addAttribute("firstname", user.getFirstname());
              model.addAttribute("lastName", user.getLastName());
              model.addAttribute("superemail", user.getSuperemail());

            //  UserDao u = new UserDao();
              System.out.println("u==null = "+ userdao==null);
             // System.out.println("u.getSessionFactory()==null = "+ userdao.getSessionFactory()==null);
              userdao.addUser(user);
             // userdao.addUser(user.getId(),user.getLogin(),user.getPass(),user.getFirstname(),user.getLastname(),user.getSuperemail());
              return "result";
           }

           /**
             * @return Returns the userdao.
             */
            public UserDao getUserdao() {
                return userdao;
            }
            /**
             * @param userdao The userdao to set.
             */
            public void setUserdao(UserDao userdao) {
                System.out.println("setting user dao ");
                this.userdao = userdao;
            }

    } 
```

尝试添加用户记录时，我不断收到以下异常：

```
20:13:44,433 INFO  [STDOUT] Not Getting Session
20:13:44,434 ERROR [STDERR] java.lang.NullPointerException
20:13:44,436 ERROR [STDERR]     at com.cpt.dao.assessment.UserDao.addUser(UserDao.java:41)
20:13:44,437 ERROR [STDERR]     at com.cpt.controller.assessment.UserController.addStudent(UserController.java:42)
20:13:44,437 ERROR [STDERR]     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
20:13:44,439 ERROR [STDERR]     at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
20:13:44,440 ERROR [STDERR]     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
20:13:44,440 ERROR [STDERR]     at java.lang.reflect.Method.invoke(Method.java:601)
20:13:44,441 ERROR [STDERR]     at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:176)
20:13:44,442 ERROR [STDERR]     at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:436)
20:13:44,443 ERROR [STDERR]     at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:424)

20:13:44,444 ERROR [STDERR]     at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:950)
20:13:44,444 ERROR [STDERR]     at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:859)
20:13:44,445 ERROR [STDERR]     at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:883)
20:13:44,445 ERROR [STDERR]     at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:792)
20:13:44,445 ERROR [STDERR]     at javax.servlet.http.HttpServlet.service(HttpServlet.java:754)
20:13:44,446 ERROR [STDERR]     at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
20:13:44,446 ERROR [STDERR]     at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:324)
20:13:44,447 ERROR [STDERR]     at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:242)
20:13:44,447 ERROR [STDERR]     at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275)
20:13:44,448 ERROR [STDERR]     at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
20:13:44,448 ERROR [STDERR]     at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:181)
20:13:44,448 ERROR [STDERR]     at org.jboss.modcluster.catalina.CatalinaContext$RequestListenerValve.event(CatalinaContext.java:285)
20:13:44,449 ERROR [STDERR]     at org.jboss.modcluster.catalina.CatalinaContext$RequestListenerValve.invoke(CatalinaContext.java:261)
20:13:44,449 ERROR [STDERR]     at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:88)
20:13:44,450 ERROR [STDERR]     at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.invoke(SecurityContextEstablishmentValve.java:100)
20:13:44,450 ERROR [STDERR]     at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
20:13:44,451 ERROR [STDERR]     at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
20:13:44,451 ERROR [STDERR]     at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:158)20:13:44,452 ERROR [STDERR]     at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
20:13:44,452 ERROR [STDERR]     at org.jboss.web.tomcat.service.request.ActiveRequestResponseCacheValve.invoke(ActiveRequestResponseCacheValve.java:53)
20:13:44,452 ERROR [STDERR]     at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:362)
20:13:44,453 ERROR [STDERR]     at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877)
20:13:44,453 ERROR [STDERR]     at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:654)
20:13:44,454 ERROR [STDERR]     at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:951)
20:13:44,455 ERROR [STDERR]     at java.lang.Thread.run(Thread.java:722) 
```

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T15:11:01.450

Decalre 一个事务管理器（我使用休眠）：

```
<!-- Enable annotation style of managing transactions -->
<tx:annotation-driven transaction-manager="transactionManager"/>

<!-- Declare a transaction manager-->
<bean id="transactionManager" class="org.springframework.orm.hibernate4.HibernateTransactionManager"
          p:sessionFactory-ref="sessionFactory"/> 
```

然后将方法或类注释为[transactional](https://stackoverflow.com/q/1079114/106261)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T16:07:45.937

您原来的问题与[此](https://stackoverflow.com/questions/4333390/service-are-constructed-twice)类似。

`UserDao`您的应用程序上下文中有两个实例- 一个在 中手动声明`application-context.xml`，另一个由`<context:component-scan>`（由于存在`@Component`）发现。前者有它的`sessionFactory`集合 (by `<property>`)，而后者没有它 (因为它不是`@Autowired`)。

因此，您应该手动声明您的 bean（并删除`@Component`），或者允许 Spring 自动发现它（并使用 注释`sessionFactory`，`@Autowired`因为在这种情况下您不手动设置它）。

`No Hibernate Session bound to thread`错误表示您解决了最初的问题，现在应该看看 NimChimpsky 的回答和[其他有关使用`@Transactional`和 Spring-managed transactions](http://static.springsource.org/spring/docs/3.0.x/reference/transaction.html#transaction-declarative)的材料。

# xmpp - 管理名册修改真正的外部网络应用程序并为用户禁用？

> ID：12372721
> 
> 赞同：0
> 
> 时间：2012-09-11T15:03:45.407
> 
> 标签：xmpp, ejabberd, rostering

我有一个网络应用程序，它是一个游戏，只有在达到一定分数后，人们才能成为朋友，并且应该自动添加到彼此的好友列表中。

试图弄清楚如何像这样在 Ejabberd 中处理名册

*   防止任何用户自行添加其他人
*   只让 webapp 处理对名册的修改（buddylist）

使用像 strophe 这样的客户端 JS 库并不安全，我需要将用户添加到彼此名册的服务器端方法。关于如何使用 Ejabberd 做到这一点的任何想法？

编辑：好的，似乎 ejabberd 的 mod_rest 提供了对（全部？）ejabbard 方法的完全访问权限

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T16:42:36.483

好的，所以在我走上正确的轨道后，我设法在一个小时内弄清楚了..

*   安装 ejabberd
*   安装 mod_rest
*   安装 mod_admin_extra

命令：

```
ejabberdctl help process_rosteritems 
```

：

```
Command Name: process_rosteritems

  Arguments: action::string
             subs::string
             asks::string
             users::string
             contacts::string

  Returns: res::rescode

  Tags: roster 

  Description: List or delete rosteritems that match filtering options 

Explanation of each argument:
 - action: what to do with each rosteritem that matches all the filtering options
 - subs: subscription type
 - asks: pending subscription
 - users: the JIDs of the local user
 - contacts: the JIDs of the contact in the roster

Allowed values in the arguments:
 ACTION = list | delete
 SUBS = SUB[:SUB]* | any
 SUB = none | from | to | both
 ASKS = ASK[:ASK]* | any
 ASK = none | out | in
 USERS = JID[:JID]* | any
 CONTACTS = JID[:JID]* | any
 JID = characters valid in a JID, and can use the globs: *, ?, ! and [...]

This example will list roster items with subscription 'none', 'from' or 'to' that have any ask property, of local users which JID is in the virtual host 'example.org' 
and that the contact JID is either a bare server name (without user part) or that has a user part and the server part contains the word 'icq':
 list none:from:to any *@example.org *:*@*icq* 
```

# facebook - 我的应用发布时无法换行

> ID：12372724
> 
> 赞同：0
> 
> 时间：2012-09-11T15:04:02.327
> 
> 标签：facebook, post, line, break

当我的应用发布在用户的 Facebook 上时，我找不到换行的方法。我尝试使用这里创建的所有这些：[Line break in Facebook status update via Graph API](https://stackoverflow.com/questions/5583507/line-break-in-facebook-status-update-via-graph-api)

```
\n 
\r
<center></center>
&#10
&#x0A
\u000A
%0A 
```

但没有任何效果。

# ruby - 需要 Ruby 正则表达式来验证“A1:B2”字符串格式

> ID：12372725
> 
> 赞同：-2
> 
> 时间：2012-09-11T15:04:02.560
> 
> 标签：ruby, regex

我正在搜索一个 ruby​​ 正则表达式，它将验证以下格式的字符串：`"A1:B2"`. 冒号左侧的字母介于`A`-之间`F`，而冒号右侧的字母介于`A`-之间`Z`，按字母顺序排列，不早于左侧的字母。

一些有效的例子是`"A1:B2"`, `"A3:B4"`, `"A5:B6"`, `"C2:D3"`。

一些无效的例子是`"E1:A2"`, `"B4:A3"`。

换句话说，考虑一个有 6 列和 n 行的 Excel 表格，因此`A`将覆盖四个单元格, , , 。`F``A1:B2``A1``A2``B1``B2`

如果您发现任何与上述场景匹配的正则表达式，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T15:16:15.890

我相当肯定这不能仅用正则表达式来完成。您可能必须使用类似的东西`/^([A-F])(\d):([A-Z])(\d)$/`，然后将 $1 与 $3 以及 $2 与 $4 进行比较。

例子：

```
def validate(str)
    /^([A-F])(\d):([A-Z])(\d)$/.match(str) && $1 < $3 && $2 < $4 
end 
```

（假设您只想在冒号的每一侧允许一个字母和一个数字。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T15:23:52.293

你不能用一个正则表达式来做到这一点。但是，您可以使用类似的东西来做到这一点

```
def validate(str)
  a,b = str.split(":")
  !(/([A-F])\d/ =~ a).nil? && !(/[#{$1}-Z]\d/ =~ b).nil?
end 
```

解释：

第一个字符将被放入 $1 然后插入到第二个正则表达式中，这样您将始终与第一部分中的字符匹配。

例子：

```
1.9.2p290 :039 > validate("A1:B2")
 => true 
1.9.2p290 :040 > validate("B2:A1")
 => false 
```

# http - HTTP over TCP 使用 Telnet/Hercules/Raw socket/

> ID：12372726
> 
> 赞同：0
> 
> 时间：2012-09-11T15:04:11.453
> 
> 标签：http, sockets, tcp

我作为客户端连接到远程服务器上的实时数据。我想将以下内容发送到服务器并保持连接打开。这是一个“推送”协议。

```
http://server.domain.com:80/protocol/dosomething.txt?POSTDATA=thePostData 
```

我可以在浏览器中调用它，这很好。但是，如果我尝试直接在 Windows 命令提示符中使用 telnet，提示符就会退出。

```
 GET protocol/dosomething.txt?POSTDATA=thePostData 
```

如果我使用 Putty.exe 并选择 Telnet 作为协议，情况也是如此。我根本看不到 Hercules 的方法，因为我认为服务器不会解释 GET

有什么办法可以做到这一点吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T15:12:09.297

如果要使用 telnet，则必须将[HTTP 协议 (RFC2616)](https://www.rfc-editor.org/rfc/rfc2616)与字母相匹配。尝试类似：

```
shell$ telnet www.google.com 80
Trying 173.194.43.50...
Connected to www.google.com (173.194.43.50).
Escape character is '^]'.
GET / HTTP/1.1
Host: www.google.com:80
Connection: close

HTTP/1.1 200 OK
Date: Tue, 11 Sep 2012 15:09:51 GMT
... 
```

您需要键入以下行，包括“连接”行之后的“空行”。

```
GET / HTTP/1.1
Host: www.google.com:80
Connection: close 
```

# java - OSGi 单元测试和包导出

> ID：12372730
> 
> 赞同：6
> 
> 时间：2012-09-11T15:04:18.230
> 
> 标签：java, unit-testing, junit, osgi

平衡从捆绑包中声明的包导出和单元测试要求的最佳方法是什么？

考虑要为其编写单元测试的捆绑包“mybundle”。捆绑包的源代码存储在 IDE 的“项目”概念中。例如：

```
mybundle
  src/java
    mybundle.package1
      ...java
  bnd.bnd 
```

我所说的*单元测试*是指对单个 POJO 的测试，与可以在包中使用这些类的更广泛的 OSGi 上下文无关。在可能的情况下，测试应该可以使用“vanilla”类加载来运行，例如通过 Eclipse 中的 JUnit 运行程序。

在开发时，这里有几种打包单元测试的方法：

## 包源中的单元测试

在这里，单元测试被添加到项目的源文件夹中：

```
mybundle
  src/java
    mybundle.package1
      ...java
  test/java
    mybundle.package1.test
      ...java
  bnd.bnd 
```

请注意附加的“.test”以区分包并避免拆分包问题。

通常会有一些措施来确保测试类不会最终出现在构建的捆绑 JAR 中。

## 单独包中的单元测试

这里添加了一个单独的包，名称后缀为“.test”，这是一般约定。

```
mybundle
  src/java
    mybundle.package1
      ...java
mybundle.test
  test/java
    mybundle.package1.test
      ...java
  bnd.bnd 
```

这样做的问题是，因为类是分离的，并且单元测试的运行可能不了解 OSGi 环境（例如使用 Eclipse JUnit 运行器），您将不得不装饰 JUnit 运行器的运行时类路径。

## 片段中的单元测试

（感谢@HollyCummins）。这里创建了一个单独的包片段：

```
mybundle.fragment
  test/java
    mybundle.package1.test
      ...java
  bnd.bnd 
```

该片段将“mybundle”声明为其宿主，从而允许它共享“mybundle”中的类，而无需导出包。

这样做的缺点是，因为片段加载是一个 OSGi 概念，所以您需要使用 OSGi 容器运行或装饰类路径。

# 出口问题

当考虑捆绑包如何执行导出包时，问题就来了。[导出尽可能少的包被认为是一种很好的做法](http://wiki.osgi.org/wiki/Export_Only_APIs)。然而，似乎单元测试会强制导出额外的包。

这对于第二个选项最为明显，具有单独的测试包。测试包中的测试必须 Import-Package 被测类，并且被测包还必须 Export-Package 所有所述被测类。

因此，显而易见的解决方案是倾向于在包源中进行单元测试，但问题很快就会在非平凡的情况下出现。您可能希望共享测试代码，例如，您可能在单独的包中拥有 OSGi 集成测试。要共享代码，您最终必须导出-打包测试包，然后当然您最终还会在构建的捆绑包中获得测试代码！

**组织 OSGi 包/项目进行测试的最佳方式是什么？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T09:15:42.950

第三种选择是使用 OSGi 片段进行单元测试。这可以确保您的测试与要测试的代码共享一个类加载器，因此不需要额外的内部包导出包。如果需要，测试片段甚至可以导出主包的内部包。该片段将有自己的包导入，因此它可以拉入共享测试代码，而不会污染主包的包导入。

正如上面的评论和更新的原始问题中提到的，使用片段仍然会给您留下一些关于如何处理构建和类路径的问题。如果您在 OSGi 容器之外运行测试，则片段的类加载器优势在很大程度上消失了，除了可能在 IDE中*引入导入的测试依赖项。*

如果您在 OSGi 容器中运行测试，与普通包相比，片段确实有一些缺点，这可能是一个问题，这取决于您如何驱动测试。片段不能声明激活器，因为它们没有独立的生命周期。声明式服务也不能以自然的方式从片段中注册，尽管蓝图服务通常[可以](https://stackoverflow.com/questions/8592860/component-inside-a-fragment-never-activated).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T09:33:57.137

使用[Maven](http://maven.apache.org/)将使选项 1 实现起来非常简单。优点是 Maven为您[管理类路径](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#Dependency_Scope)，因此任何仅用于测试的代码或依赖项都不会出现在最终包中。您甚至可以将单元测试与被测类放在同一个包中，这样您就可以从测试中访问包私有类。由于测试是使用正常的类加载执行的，`Export-Packages`因此根本不会影响它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-24T22:57:31.510

如果您在出色的隔离中测试类（正如许多单元测试通常所做的那样），为什么还要在 OSGi 框架中打包和运行此类单元测试。只需编译类，编译相应的测试类并在您喜欢的任何测试框架中运行它们。

# android - 如何在后台使用 Camera 和 SurfaceView

> ID：12372732
> 
> 赞同：0
> 
> 时间：2012-09-11T15:04:20.773
> 
> 标签：android, camera, surfaceview

我目前在我的应用程序中使用相机和 SurfaceView 来使用 Torch 等...，我在 Activity 中使用这些，如何在后台使用 Camera 和 SurfaceView，例如。：我想保持手电筒/Led Flash On，我看到很多小部件在后台运行良好，他们是怎么做到的？

谢谢 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-13T13:37:16.980

看看这里：

```
http://developer.android.com/guide/topics/media/camera.html 
```

制作显示相机预览的活动所需的所有代码。作为相机 API：

[http://developer.android.com/reference/android/hardware/Camera.html#setPreviewDisplay%28android.view.SurfaceHolder%29](http://developer.android.com/reference/android/hardware/Camera.html#setPreviewDisplay%28android.view.SurfaceHolder%29)

指定...您需要使用 SurfaceHolder 进行预览。因此，您只能使用 SurfaceView 或派生类进行自动预览。否则，您可以使用例如 TextureView 或 ImageView 自己绘制预览。您需要实现 onFramePreview 方法以从预览中获取帧并自行处理它们。通过使用 OpenGL 或 ANI API，您还可以为帧添加效果。据我所知，这是直接在预览中添加效果的唯一方法，除非这些效果可以通过在预览图像上方覆盖半透明彩色表面来实现。

# jshint - 在 WebStorm IDE 中配置 *all* JSHint 设置

> ID：12372736
> 
> 赞同：4
> 
> 时间：2012-09-11T15:04:40.277
> 
> 标签：jshint, webstorm

在对用于前端开发的 IDE 进行了一些全面的评估之后，我认为 WebStorm 领先。

一个缺失的部分是我们无法按照我们需要的方式配置 JSHint。WebStorm 首选项 GUI 提供了一些选项，但不是完整的。GUI 只允许您配置大约 30 个实际可用选项中的 15 个。

这是一个问题，因为我们不想仅仅因为 IDE 不允许我们按照我们想要的方式配置 linting 就改变我们的编码实践。

是否有一种 hacky 方法可以在 WebStorm 的后台调整 JSHint 库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-24T14:22:14.823

`.jshintrc`您可以在项目根目录中的文件中配置您想要的所有选项。这将是一个项目范围的设置。

来自[https://www.jetbrains.com/webstorm/webhelp/jshint.html](https://www.jetbrains.com/webstorm/webhelp/jshint.html)：

> 使用配置文件
> 
> 选中此复选框可根据配置文件中的设置验证代码。配置文件是一个 JSON 文件，其扩展名`.jshintrc`指定应启用或禁用哪些 JSHint 选项。WebStorm 将`.jshintrc`在工作目录中查找文件。如果搜索失败，WebStorm 将在父文件夹中搜索，然后再次在父文件夹中搜索。重复该过程，直到 WebStorm 找到`.jshintrc`或到达项目根目录。要让 WebStorm 在这种情况下仍然运行验证，请指定要使用的默认配置文件。

我已经使用了一段时间，效果很好。另外，您可以将其提交到您的 repo 并确保整个团队都遵循相同的代码风格。也是添加全局变量的好地方。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T15:18:57.417

我不知道有任何骇人听闻的方法，但您可以[投票支持现有的功能请求](http://youtrack.jetbrains.com/issue/IDEA-85681)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-12T14:52:58.693

有一个有效的按文件解决方案，但并不理想。更喜欢 IDE 或项目范围的修复/破解。

在文件顶部设置 JSHint 选项：

```
/*jshint laxcomma:true, asi:true */ 
```

# android - Android 数据库太大，无法在 onCreate 上创建

> ID：12372742
> 
> 赞同：1
> 
> 时间：2012-09-11T15:05:16.363
> 
> 标签：android, database

在我的应用程序中，我使用了两个数据库。

这是处理数据库管理和对其进行的所有查询的类。

```
public class Database {

    private DbHelper DBHelper;
    private final Context Context;
    private SQLiteDatabase MyDBone, MyDBtwo;
    static Context ctx;

    private static class DbHelper extends SQLiteOpenHelper {
        public DbHelper(Context context, String dbName, int dbVersion) {
            super(context, dbName, null, dbVersion);
        }
        @Override
        public void onCreate(SQLiteDatabase db) {

            // This is where the two databases are created                  
            }
        }
        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVesion) {
            // database upgrades are handled here
            }
        }
    }

    // database constructor
    public Database(Context c) {
        Context = c;
        ctx = c;
    }

    // database open
    public Database open() throws SQLException {

            DBHelper = new DbHelper(Context, BD_NAME, BD_VERSION);
            // I have here some if code to decide witch one of the bellow is used
            if{
            MyDBone = DBHelper.getWritableDatabase();
            } else{
            MyDBtwo = DBHelper.getWritableDatabase();
            }

        return this;
    }

    // database close
    public void close() {
        DBHelper.close();
    }

    public Cursor getData(........) {

        // My querys are made here

    }
} 
```

我的问题是数据库太大了。在 onCreate 方法中，我收到错误：`The code of method onCreate(SQLiteDatabase) is exceeding the 65535bytes limit`. 另一方面，我的应用程序变得非常大。

我想知道解决此问题的最佳方法是什么，因为我无法更改我的数据库。
由于我的应用程序必须离线运行，我无法在网络服务器上进行查询。

我相信最好的方法是，在应用程序的第一次运行时，从互联网上的某个地方（驱动器、保管箱或其他方面）下载数据库，但由于我的编程技能有点绿色，我必须推迟这个将来做。

是否有可能，维护我的数据库类，将 apk 与数据库预打包并将它们安装在 sdcard 上？另一方面，这会增加 apk 的大小（数据库总数为 15 mb）。

请就解决此问题的最佳方法提出建议。

问候，

收藏夹

# java - 使用 Phonegap 在 Eclipse for Android 中进行开发。“取消标记套接字”错误=-13

> ID：12372753
> 
> 赞同：2
> 
> 时间：2012-09-11T15:05:50.480
> 
> 标签：java, android, eclipse, cordova, cordova-2.0.0

所以我在使用 Xcode 和 Phonegap/Cordova 之前开发了 iphone/ipad 应用程序有一段时间了，向应用商店提交了一些并被接受。所以我决定将一个从ios转换为android。认为除了从 ObjectiveC 到 JAVA 的一些更改之外，所有 Phonegap 的东西都可以工作。

确实有很多，但是正如您所期望的那样，有一些错误。但让我担心的一件事是，即使我的开发设备处于空闲状态，Eclipse 中的输出窗口也会不断收到错误消息。

主要错误是：

```
Untagging socket (number) failed errno=-13 
```

说“标记”套接字的错误也失败了，同样的错误消息，我是 Eclipse 和 JAVA 的新手。而且不知道这意味着什么。

除了关于路径的一些东西之外，我已经用谷歌搜索了它，但收效甚微，但我已经检查了它们，它们似乎是正确的。

有没有人见过这个，或者知道可能发生了什么？或者我应该在哪里尝试找出发生此错误的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T00:41:16.607

您可以创建一个过滤器，然后您将只能看到来自您的应用程序的信息。

[https://stackoverflow.com/a/4044174/41679](https://stackoverflow.com/a/4044174/41679)

# android - android获取zipfile中文件的压缩大小

> ID：12372759
> 
> 赞同：1
> 
> 时间：2012-09-11T15:06:04.947
> 
> 标签：android, compression, zip

有没有办法在 zip 存档中获取一个文件的**压缩文件大小？**

`ZipEntry.getSize()`给出未压缩的大小。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T15:08:21.247

这很容易发现...

`zentr.getCompressedSize();` [http://developer.android.com/reference/java/util/zip/ZipEntry.html#getCompressedSize](http://developer.android.com/reference/java/util/zip/ZipEntry.html#getCompressedSize) ()

# spring - Spring未解决属性文件中消息的参数

> ID：12372761
> 
> 赞同：0
> 
> 时间：2012-09-11T15:06:08.937
> 
> 标签：spring, spring-mvc, properties-file, thymeleaf

我在属性文件中有以下键/消息：

```
kadjoukor.registration.form.successMessage=You've been successfully registered. An email has been sent to <b>{0}</b>. Please activate your registration by consulting your email. 
```

在我的模板中，我尝试在 Thymeleaf 模板中显示如下：

```
<div id="alert-success" th:if="${#bools.isTrue(member)}" class="alert alert-success" th:utext="#{kadjoukor.registration.form.successMessage(${member.email})}"></div> 
```

我得到的是：

```
Youve been successfully registered. An email has been sent to {0}. Please activate your registration by consulting your email. 
```

注意参数没有被它的值替换，即我得到这个：**{0}**。另请注意，撇号已被 Spring 删除......

**编辑：** 这是我配置消息源的方式：

```
<bean class="org.springframework.context.support.ResourceBundleMessageSource" id="messageSource">
    <property name="basenames" value="/META-INF/i18n/application,/META-INF/i18n/messages" />
</bean> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T15:25:54.600

为了防止这个问题，撇号**必须被另一个撇号转义**。

请参阅：[为什么在某些语言环境中未正确填写 Spring MessageSource 参数？](https://stackoverflow.com/questions/6332378/why-spring-messagesource-arguments-are-not-filled-correctly-in-some-locales)

但是，请注意，**这只发生在**消息中有一个或多个参数时。

# ruby - 如何反转 Date.parse()

> ID：12372763
> 
> 赞同：4
> 
> 时间：2012-09-11T15:06:22.463
> 
> 标签：ruby, ruby-on-rails-3.2

我的代码：

```
require 'Date'

s = "I'm going away on Oct 2, 2012th"
puts Date.parse(s)

=> 2012-10-02 
```

我想从我的字符串中删除日期，我用`Date.parse(s)`. 问题是，我知道有一个日期，但不知道它是如何写在字符串中的。我知道`Date.parse`找到它并将“2012-10-02”转换为新格式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T17:46:44.163

这是一个快速而肮脏的解决方案。该函数`date_string` 仅返回包含由 找到的日期的字符串部分`parse`。

```
require 'date'

DATE_ERROR = -1

# If the string doesn't contain a date, it raises an
# exception.  This little helper routine catches the
# exception.
def get_date(s)
    date = 0
    begin
        date = Date.parse(s)
    rescue
        date = DATE_ERROR
    end
    date
end

# Returns just the part of the string containing the date
def date_string(s)
    # First, find the date contained in the string
    date = get_date(s)

    return "" if date == DATE_ERROR

    # Repeatedly chop off characters from the front to find the
    # start of the date
    first = 1
    while date == get_date(s[first..-1])
        first += 1
    end

    # Repeatedly chop off characters from the end to find the
    # end of the date
    last = s.length - 2
    while date == get_date(s[0..last])
        last -= 1
    end

    #Return just the date
    s[first - 1..last + 1]
end

puts date_string("I'm going away on Oct 2, 2012th")
puts date_string("I'm going away on 10/2/12 and not coming back")
puts date_string("10 Nov 1999")
puts date_string("I see no date here") 
```

这输出：

```
Oct 2, 2012
10/2/12
10 Nov 1999 
```

因此，您可以执行以下操作：

```
s = "I'm going away on Oct 2, 2012th"
datestr = date_string(s)
s.gsub!(datestr, "")
puts s 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T15:10:10.013

`Date`似乎无法告诉您它在哪里找到日期。您可能必须编写自己的自定义日期查找器。

# c# - 这是使用后台工作者的正确方法吗？

> ID：12372764
> 
> 赞同：1
> 
> 时间：2012-09-11T15:06:27.437
> 
> 标签：c#, winforms

在一些代码中看到了这一点，但对我来说没有意义，所以我想知道这是否是利用背景工作者的正确方法？

它在 Form_Load 事件中像这样使用：

```
 BackgroundWorker asyncWorker = new BackgroundWorker();
    asyncWorker.DoWork += new DoWorkEventHandler(AsynchDoWork);
    asyncWorker.RunWorkerCompleted += new RunWorkerCompletedEventHandler(AsynchCompleted);
    asyncWorker.RunWorkerAsync();

   // a for each loop that can take some time to populate a combobx on the form 
```

此外，是否有更好的选择来实现相同的目标？除了后台工作者？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T15:14:21.427

如果我理解正确，您实际上要问的是您是否应该`Combobox`从后台线程或 UI 线程中填充值。

如果需要很长时间来填充的`Combobox`原因是因为实际检索项目需要很长时间 - 例如，如果您从数据库中检索它们，那么您可能应该在 a 中完成这项工作`BackgroundWorker`，然后只添加检索到的项目到`Combobox`事件`RunWorkerCompleted`。

该`RunWorkerCompleted`事件虽然仍从后台线程运行，但会在后台自动调用`Invoke`所有对 UI 元素的访问，因此更新 UI 元素没有问题。

当然，长时间运行的 lop 必须在事件**内部运行，而****不是**在与调用相同的代码块中，如您的代码示例中那样。`DoWork`**`RunWorkerAsync`**

 **相反，如果我们只是在谈论大量现成的项目，并且`AddRange`由于数量的原因，调用简单地需要很多时间，则**不能**从后台线程调用它，因为只能从以下位置访问 winforms 控件用户界面线程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T15:29:11.463

我会为此使用[Task Parralell](http://msdn.microsoft.com/en-us/library/dd460717.aspx) Library。一个很好的教程是[Task Parallel Library: 1 of n](http://www.codeproject.com/Articles/152765/Task-Parallel-Library-1-of-n)。要根据某些后台任务的结果更新组合框，您可以执行以下操作

```
// Get UI scheduler. Use this to update ui thread in continuation.
TaskScheduler uiScheduler = TaskScheduler.FromCurrentSynchronizationContext();

// You can use TPL like this...
List<object> objList = new List<object>();
Task<object[]> task = Task.Factory.StartNew<object[]>(() =>
    {
        // Pull all your data into some object.
        object[] objArr = new object[] { "Some", "Stuff", "..." };
        return objArr;
    }, TaskCreationOptions.PreferFairness);

// Continuation firs after the antecedent task is completed.
task.ContinueWith(ant =>
    {
        // Get returned data set.
        object[] resultSet = (task.Result as object[]);

        // Check task status.
        switch (task.Status)
        {
            // Handle any exceptions to prevent UnobservedTaskException.             
            case TaskStatus.RanToCompletion:
                if (task.Result != null)
                {
                    // Update UI comboBox.
                }
                break;
            default:
                break;
        }
    }, CancellationToken.None, TaskContinuationOptions.None, uiScheduler); 
```

在这里，`uiScheduler`您可以从延续委托中更新 ui 线程，该委托在前面的任务完成（成功或其他方式）时触发。

在这种情况下，延续还充当异常处理程序，以捕获`AggregateExceptions`可能从后台线程抛出的任何异常。

我希望这有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T15:14:07.563

我不确定范围，我会创建 BackgroundWorker 作为类的成员。

BackgroundWorker 将工作从 UI 线程中分离出来，并具有提供轻松访问更新进度的方法。

至于替代方案，这取决于您的目标到底是什么。如果它是一个不更新 UI 的小任务，那么 System.Threading.ThreadPool 是一个选项。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-11T15:14:22.643

回答“此外，是否有更好的选择来实现相同的目标？除了背景工作者？”。

不，这是处理长时间运行的 winform 阻塞任务的最简单方法。还有其他方法（BeginInvoke），但只使用后台工作器要容易得多。**

# powershell - 使用 VBscript 在远程机器上执行 ps 脚本

> ID：12372769
> 
> 赞同：0
> 
> 时间：2012-09-11T15:06:38.183
> 
> 标签：powershell, vbscript

我正在尝试使用 VBscript 使用6.9.0 的参数`10.0.0.20`执行一个 powershell 脚本。我相信我使用以下代码走在正确的道路上，但我不确定从这里去哪里。有什么建议么？`D:\path\script.ps1``10.0.0.199`

旁注，它需要以管理员身份运行

```
sub main()
    dim strComputer, strUser, strPassword

    strComputer = "10.0.0.20"
    strUser="userName"
    strPassword="password"

    Set objSWbemLocator = CreateObject("WbemScripting.SWbemLocator")
    Set objSWbemServices = objSWbemLocator.ConnectServer (strComputer, "root\cimv2", strUser, strPassword)
    objSWbemServices.Security_.ImpersonationLevel = 3
end sub
main 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T20:13:23.397

在远程系统上启用 PSRemoting 并以这种方式调用它，假设您的工作站和远程系统在同一个域中，并且您的域帐户对远程系统具有管理员访问权限。

```
Invoke-Command -computer "10.0.0.20" -scriptblock {. d:\path\script.ps1} 
```

# javascript - 固定柱状表结构

> ID：12372770
> 
> 赞同：1
> 
> 时间：2012-09-11T15:06:40.393
> 
> 标签：javascript, css

我想在不使用 table、tr、td 等标签的情况下创建一个类似结构的表。该表应固定其第一列和标题。我在这个 URL 下摆弄了它：http: [//jsfiddle.net/RtfZu/](http://jsfiddle.net/RtfZu/)。

我无法创建一个垂直滚动条，滚动时它也应该滚动冻结的列。

有什么见解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T15:14:13.227

您需要使您的 .table-body-scroll div 可滚动。在小提琴中，由于宽度问题导致双滚动条而中断，但您应该能够通过调整宽度并将溢出-x 设置为隐藏来解决此问题

```
.table-body-scroll
{    
    overflow-y:scroll;
} 
```

[http://jsfiddle.net/RtfZu/3/](http://jsfiddle.net/RtfZu/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T16:30:49.380

尝试添加`overflow-y: auto;`并定义 a`height`到您的`.table`元素。这应该滚动整个表格

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T07:23:38.257

顺便说一句，我创建了一个 jQuery 插件，可以使用标签呈现表格。该表也是可配置的。code4devs.com 是 URL

# silverlight - 实体框架在托管时返回 null

> ID：12372771
> 
> 赞同：0
> 
> 时间：2012-09-11T15:06:41.797
> 
> 标签：silverlight, entity-framework, hosted

我有一个 silverlight 应用程序，当我运行应用程序时，我读取数据库并将结果填充到组合框中，但是当我在服务器（IIS）上发布它时它返回一个空值，我什至无法调试错误，因为它在我将它托管在我的系统上时返回结果，但在托管时返回 null ..

请指导...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T18:47:48.783

在这里暗中捅刀。这很可能是一个安全问题。在本地调试时，您的 Web 服务器在您的凭据下运行。如果对您的数据库使用集成身份验证，则 Web 服务主机在向数据库发出请求时就像您一样。但是，当您部署时，服务器会尝试使用与运行您的站点的应用程序池关联的凭据连接到数据库。检查您的数据库连接字符串以查看它是否指向正确的数据库，并尝试使用具有访问数据库权限的帐户的命名用户/密码。

如果这不能解决问题，请尝试直接访问您的一项服务（使用 Fiddler？）以查看该服务返回的内容作为您的 Silverlight 客户端忽略的错误消息。

# extjs - ExtJS 4.1 中未选中复选框

> ID：12372775
> 
> 赞同：2
> 
> 时间：2012-09-11T15:06:51.610
> 
> 标签：extjs

我从服务器加载表单数据并用它填写表单。

```
 var form = this.getPForm().getForm().load({
        url: '/url',
        params: {
            id: record.get('id'),
        },
    }); 
```

一切正常，除了一个复选框，即使它的输入数据是`true`

```
 {
                fieldLabel: 'name',
                name: 'name',
                minLength: 5,
                maxLength: 80,
            }, {
                xtype: 'checkbox',
                fieldLabel: 'Yes?',
                name: 'yes',
                inputValue: '1',
                uncheckedValue: '0',
                    listeners:{                 
                    change:function(c){

                        alert(c.getValue());

                    }
                },
            }, 
```

在表单加载时，我收到`true`警报消息，通知表单数据已达到`checkbox`并且正在更改。但是复选框没有被选中！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T06:09:22.973

上面的加载操作完全没有说明您的问题...正如 JohnnyHK 所说，您收到什么数据（加载到表单中）从您的评论中我猜您收到的是布尔值，因此我建议您使用

```
inputValue: 'true', 
uncheckedValue: 'false' 
```

即使

```
inputValue: '1', 
uncheckedValue: '0' 
```

应该比较相等，使用普通的javascript。您也可以尝试设置默认起始值

```
value: true, 
checked: true 
```

至少我是这样做的，它对我有用。如果这没有帮助，请发布您从服务器接收的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T06:43:49.833

解决了我的问题。问题出`name`在两个不同复选框的相同属性中。感谢大家抽出时间。

# linux - 如何不被列入黑名单、垃圾邮件/垃圾邮件以发送电子邮件？

> ID：12372778
> 
> 赞同：0
> 
> 时间：2012-09-11T15:06:56.033
> 
> 标签：linux, apache, webserver, spam, mailing

如何找到我的限制和方法，以免被列入黑名单、垃圾邮件/垃圾邮件以发送电子邮件？

我每天必须发送的电子邮件地址和电子邮件数量越来越多，涉及：

*   用户注册
*   提醒
*   确认
*   消息

我想向我的社区发送邮件，但害怕被列入黑名单。几年前从虚拟服务器发送邮件时，这种情况发生过几次。

现在我拥有自己的专用服务器，并想回来发送大量电子邮件（上面列出的各种原因）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T15:12:51.553

不要发送垃圾，你应该没问题。如果您的服务器被配置为让它们出去，那么其余的就不受您的控制了。您能做的最好的事情就是确保您拥有“好看”的电子邮件内容。

垃圾邮件过滤器通常也设置为标记某些单词，例如：$%&^、%£!$ 和/或当然 $*%^。因此，您需要避免明显的电子邮件，如果您的电子邮件听起来不专业，或者看起来您正试图推销[性玩具诈骗](http://scams.wikispaces.com/Sex+Toy+Scam)（例如），那么您更有可能被标记为垃圾邮件。

此外，我发现同时提供每个电子邮件正文的 HTML 和纯文本版本可以对另一端的垃圾邮件分数产生很大影响。

[这里有一些](https://stackoverflow.com/questions/1860937/how-can-i-lower-the-spam-score-of-my-email-message)可能为您提供一些其他想法的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T15:17:26.720

除了通过专门选择提醒/新闻/任何非必要的注册（如注册）来确保您发送电子邮件的人真正想要接收这些电子邮件之外，您还可以尝试使用群发邮件，例如拥有 RestAPI 的持续联系人。

电子邮件本身应该格式正确。它不应缺少任何必需的标头（如`Date:`or `To:`），并且正文应符合`Content-Type`标头，如果内容为文本，则为所有文本，或者如果存在 HTML，则使用[multipart-mime](http://www.w3.org/Protocols/rfc1341/7_2_Multipart.html)并在一个中包含文本版本一部分，另一部分是html。此外，不要包含指向可能被列入黑名单的阴暗地方的链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T15:14:54.730

*   确保您的邮件列表选择加入或为您的社区成员提供选择退出的简单方法。
*   直接在每封电子邮件中提供选择加入/退出链接。
*   让它高度可见！
*   仅发送给您的社区成员。
*   不要每天用无意义的废话惹恼他们。
*   即使小心并为您的会员提供选择加入/退出，您也不能强迫他们使用它。
*   **意识到电子邮件客户端更容易将其标记为垃圾邮件。**

# visual-studio-2012 - Ctrl+Alt+L selects the file in solution explorer, but does not scroll to it

> ID：12372784
> 
> 赞同：0
> 
> 时间：2012-09-11T15:07:28.030
> 
> 标签：visual-studio-2012

In Visual Studio 2012, pressing Ctrl+Alt+L selects the file in solution explorer, but does not scroll to it. How can I fix that?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T15:58:21.397

Try: Ctrl+Alt+L ---> Arrow key.

# php - 标签上的自动标识

> ID：12372787
> 
> 赞同：0
> 
> 时间：2012-09-11T15:07:38.860
> 
> 标签：php, jquery, wordpress, html-heading

您好，我正在使用本地滚动条构建一面。有什么方法可以获取我的标签的值并将其用作 id。

```
<h2>test</h2> 
```

所以会是这样

```
<h2 id="test">test</h2> 
```

我正在运行wordpress。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T15:08:18.590

```
$('h2').each(function(){
   this.id = $(this).text();
}); 
```

但请注意，[并非所有字符都允许在 id 中使用](http://www.w3.org/TR/html401/types.html#type-name)：

> ID 和 NAME 标记必须以字母 ([A-Za-z]) 开头，后跟任意数量的字母、数字 ([0-9])、连字符 ("-")、下划线 ("_") , 冒号 (":") 和句点 (".")。

# lua - 在 Lua 中，如何在不复制的情况下获取数组的尾部？

> ID：12372788
> 
> 赞同：4
> 
> 时间：2012-09-11T15:07:44.653
> 
> 标签：lua

我正在使用 Lua 5.2，为了这个问题，假设这些表专门用作数组。

这是一个返回数组*尾部*的函数（数组减去它的第一个元素）：

```
function tail(t)

   if # t <= 1 then
      return nil
   end

   local newtable = {}
   for i, v in ipairs(t) do
      if i > 1 then
          table.insert(newtable, v)
      end
   end

   return newtable
end 
```

例如：

> 提示> table.concat(tail({10, 23, 8}), ", ")
> 
> 23、8

然而，这是通过返回表的新副本来实现的。有没有办法避免创建新表？

我正在寻找相当于 C 的返回指向下一个元素 ( `t++`) 的指针。可能吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-11T15:53:51.183

如前所述，这通常是不可能的。

但是，使用元表，您*可以通过**引用*原始表来实现一个`tail`功能，该功能无需复制所有数据即可执行您想要的操作。以下适用于 Lua 5.2 中的大多数操作，但例如不适用于：*`table.concat`*

 *```
function tail(t)
  return setmetatable({}, {
    __index = function(_, k) return t[k+1] end,
    __newindex = function(_, k, v) t[k+1] = v end,
    __len = function(_) return #t-1 end,
    __ipairs = function(_) return 
      function(_, i)
        if i+1==#t then return nil end
        return i+1, t[i+2] end, 
      t, 0 end,
    __pairs = function(t) return ipairs(t) end,
  })
end 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-11T11:09:43.373

这是我所知道的实现tail() 的最好方法。它制作了一张新桌子，但我认为这是无法避免的。

```
function tail(list)
    return { select(2, unpack(list)) }
end 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-11T15:50:48.267

Nicol 是正确的，您不能引用数组的切片，但是有一种更简单/更短的方法来做您想做的事情：

```
function tail(t)
  local function helper(head, ...) return #{...} > 0 and {...} or nil end
  return helper((table.unpack or unpack)(t))
end 
```

`print(table.concat(tail({10, 23, 8}), ", "))`然后将打印`23,8`.

（添加`table.unpack or unpack`使其也适用于 Lua 5.2）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-11T15:16:51.863

> 我正在寻找相当于 C 的返回指向下一个元素 (t++) 的指针。可能吗？

不，您想要这样做的唯一*可能*原因是性能。这种特性只在低级编程语言中发现。Lua 是一种脚本语言：性能并不是实现它的优先级。

只需像您正在做的那样制作另一个表格，或用于`table.remove`修改原始表格。哪个最适合您。请记住：像表和用户数据这样的大而重要的对象在 Lua 中都是通过引用存储的，而不是按值存储的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-12T12:21:03.527

prapin 的建议是使用元表来呈现序列的视图，这大致是我的做法。一个可能有帮助的抽象是为*段*定义一个元表，它可以是一个 0 元函数，它返回一对表和一个偏移索引——我们在这里只使用函数来表示元组。然后我们可以定义一个元表，使这个函数表现得像一个表：

```
do
  local tail_mt = {
    __index = function(f, k) local t, i=f(); return t[k+i] end,
    __newindex = function(f, k, v) local t,i=f(); t[k+1] = v end,
    __len = function(f) local t,i=f(); return #t-i end,
    __ipairs = function(f) 
      local t,i = f () 
      return
        function (_, j)
          if i+j>=#t then 
            return nil
          else
            return j+1, t[i+j+1] 
          end
        end, nil, 0 
      end,
  }
  tail_mt.__pairs = tail_mt.__ipairs -- prapin collapsed this functionality, so I do too

  function tail (t)
    if type(t) == "table" then
      return setmetatable ( function () return t, 1 end, tail_mt )
    elseif type(t) == "function" then
      local t1, i = t ()
      return setmetatable ( function () return t1, i+1 end, tail_mt )
    end
  end
end 
```

使用 __index 和 __newindex 元方法，您可以编写 f[2]=f[1]+1 等代码。

尽管这个（未经测试的）代码不会无休止地创建一次性元表，但它可能不如 prapin 的有效，因为它将调用 thunk（0 元函数）来获取它们的内容。但是，如果您可能对扩展功能感兴趣，比如对序列有更一般的看法，我认为这更灵活一些。*

# c++ - 从实现中抽象库依赖项是常见的做法吗？

> ID：12372792
> 
> 赞同：6
> 
> 时间：2012-09-11T15:07:52.203
> 
> 标签：c++, architecture, frameworks, software-design

我对这个问题的回答是“不”。但我的同事不同意。

我们正在重建我们的产品，并在短期内做出许多关键决定。

在做我自己的一些工作时，我注意到我们有一些内部 C++ 类来抽象一些 POSIX API（线程、互斥体、信号量和 rw 锁）和其他实用程序类。请注意，这些类是基本类，尚未从 Linux 移植（可移植性是重建的一个因素。）我们也在使用 POCO C++ 库。

我提请我的同事注意这一点，并建议我们放弃我们的内部课程，转而使用他们的 POCO 同等课程。我想充分利用我们已经在使用的库。他们建议我们应该使用 POCO 实现我们的内部类，并根据需要进一步抽象额外的 POCO 类，以免依赖于任何特定的 C++ 库（引用未来的未知数——如果我们想使用不同的库/框架，比如QT 或 boost，如果我们选择的那个结果不好或开发变得不活跃，等等）

他们也不想重构遗留代码，通过使用我们自己的类抽象 POCO 的部分，我们可以实现额外的功能（经典 OOP）。这两个论点我都可以理解。但是，我认为如果我们要重新编码，我们应该做大，或者回家。现在是重构的时候了，它真的不应该那么糟糕，特别是考虑到我们的类和 POCO 中的类（线程等）之间的相似性。关于第二点我不知道该说什么 - 我们应该只使用需要功能的扩展类？

我的同事也不想到处乱扔 POCO 命名空间。我认为我们应该选择一个库/框架/工具包，并坚持下去。充分利用其功能。这不是典型的做法吗？我见过的唯一一个抽象整个框架的项目是 Freeswitch（它提供了自己的 APR 接口。）

一个建议是，我们向彼此和潜在客户公开的 API 应该没有 POCO，但它会出现在实现中（这是有道理的。）

我们没有人真正有过此类设计决策的经验，这在当前产品中有所体现。从小就在这方面，我有一些直觉把我带到这里，但也没有实践经验。我真的想避免对已经解决的问题的糟糕解决方案。

我想我的问题归结为：在构建产品时，我们是否应该 a) 选择一个占主导地位的框架作为我们大部分代码的基础，并且 b) 期望该框架与产品紧密耦合？这不是框架的重点吗？（框架或库更适合 POCO 吗？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T15:33:05.713

首先，您公开的 API 绝对应该不含 POCO、boost、qt 或任何其他不属于标准 C++ 库的类型。这是因为基础库有自己的发布周期，与您的库的发布周期不同。如果您的库的用户也使用 boost，但使用的是不同的、不兼容的版本，他们将需要花时间来解决不兼容问题。这条规则的唯一例外是当您设计一个库作为更广泛框架的一部分发布时 - 例如，添加到 POCO 工具包。在这种情况下，您的库的发布与整个工具包的发布相关联。

但是，在内部，您应该避免使用自己的包装器，除非您抽象出来的库是真正的“商品库” ¹. 这样做的原因是当你在你的类后面隐藏一个外部库时，大多数时候你会模仿你隐藏的库的抽象级别。使用您的包装器的代码将按照外部库规定的抽象级别进行编程。当您将包装器背后的实现换成不同的框架时，您很可能会（1）调整新框架以适应旧框架的抽象级别，或者（2）需要改变方式你使用你的包装器。这两种情况都值得怀疑：如果你这样做（1），也许你不应该首先切换，如果你这样做（2），那么你的包装器被证明是无用的。

* * *

¹ “商品库”是指提供某种抽象级别的库，该抽象级别在其他类似用途的库中很常见。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-11T16:44:18.633

在两种情况下，我认为值得拥有自己的包装器：

1）您已经查看了不同系统/库上的几种不同互斥锁实现，您已经建立了一组共同​​的要求，它们都可以满足并且对于您的软件来说已经足够了。然后您定义该抽象并实施一次或多次，因为您知道您已经提前计划了灵活性。您编写的其余代码*仅*依赖于您的抽象，而不依赖于当前实现的任何附带属性。我过去曾这样做过，尽管我无法向您展示代码。

这种“最不常用接口”的一个典型例子是改变`rename`文件系统抽象，基于 Windows 无法实现原子重命名现有文件。因此，如果您将来可能将当前的 *nix 实现换成无法做到这一点的实现，那么您的代码*就*不能依赖原子重命名替换。您必须从一开始就限制接口。

如果做得好，这种接口可以*大大*简化任何类型的未来移植，无论是到新系统还是因为您想更改第三方库依赖项。然而，一个完整的框架可能太大而无法成功地做到这一点——本质上你将发明和编写自己的框架，这不是一项微不足道的任务，而且可以想象是比编写实际软件更大的任务。

2）您希望能够模拟/存根/假冒/欺骗/剽窃/无论下一个聪明的技术是什么，测试中的互斥体，并决定如果你有自己的包装器，你会发现这比你更容易'试图弄乱来自第三方库或内置的符号。

请注意，定义您自己的函数，称为`wrap_pthread_mutex_init`等`wrap_pthread_mutex_lock`，精确模仿`pthread_*`函数并采用完全相同的参数，可能满足（2）但*不满足*（1）。无论如何，正确地执行 (2) 可能需要的*不仅仅是*包装器，您通常还希望将依赖项注入到您的代码中。

在灵活性的标题下做额外的工作，而实际上没有提供灵活性，这几乎是浪费时间。根据另一个线程环境实现一个线程环境可能非常困难，甚至被*证明是不可能的。*如果您决定将来从 pthreads 切换到`std::thread`C++ 中，那么使用看起来与不同名称的 pthreads API 完全相同的抽象（大约）没有任何帮助。

对于您可能进行的另一个可能的更改，在 Windows 上实现完整的 pthreads API 是可能的，但可能比仅实现您实际需要的更困难。因此，如果您移植到 Windows，您所有的抽象节省就是搜索和替换软件其余部分中的所有调用的时间。您仍然需要 (a) 为 Windows 插入一个完整的 Posix 实现，或者 (b) 做一些工作来弄清楚您真正需要什么，然后只实现它。您的包装器对实际工作没有帮助。

# xml - Playframework RenderXml - 排除一些字段作为响应？

> ID：12372794
> 
> 赞同：1
> 
> 时间：2012-09-11T15:08:06.803
> 
> 标签：xml, playframework, field, response

在 Playframework (1.2.4) 中，我正在寻找类似于 GSON 的 @Expose 注释的函数，其中某些字段可能会在响应 (RenderXml) 中排除。XML 响应是一项要求，否则我将使用 JSON。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T09:17:20.157

完全忘记了我问过这个问题。Playframework 1 使用 XML 库 XStream，它具有类似于 GSON 的 @Expose 注释的注释，但它是倒置的。您必须使用注释排除您不希望在响应中显示的内容`@XStreamOmitField`。

一个很好的教程可以在[这里](http://xstream.codehaus.org/annotations-tutorial.html)找到。

# c++ - 使用多线程编程的调度程序

> ID：12372796
> 
> 赞同：0
> 
> 时间：2012-09-11T15:08:12.477
> 
> 标签：c++, multithreading, runtime-error

我编写了以下代码来实现循环调度程序。代码如何工作：我要求用户**在按下 'p' 后****输入进程名称**（将用于识别进程的浮点数）和**进程突发时间**（进程运行的总时间）。有**两个队列**：一个总是包含当前正在运行的进程的**作业**队列（即它总是只包含一个进程）和一个包含所有其他进程的**就绪队列。****没有等待队列**功能和多线程。每当用户进入一个新进程时，它就会被放入就绪队列并调用 rrscheduler。**********，因此代码不会太复杂。使用**time(NULL) 实现计时器************

 *****如果一个进程已经在运行并且按下了“p”，那么 rrscheduler 在将新进程添加到就绪队列后继续该进程（但是，计时器再次启动）。否则，启动就绪队列中的前端进程。*

returnname()->返回队列前面的进程名 peek()->返回队列前面的进程完成的剩余时间 deletecell()-删除队列前面的进程 append()-将进程添加到队列末尾

*队列中的每个进程都以其名称和剩余时间为特征。*

即使队列为空，peek() 也会返回 0，用于检查队列是否为空。

代码：

```
 queue<float> job(0);
  queue<float> ready(0);
  queue<float> waiting(0);
  char c;
  time_t quantum;
  time_t quantrem, timerem;
  pthread_t thread1=0;

  /////////////////////////////////////////////////
  struct arg  //this is the argument passed to the timer function
 {
 time_t  time1;
 float name1;
 time_t quantum1;
 };
  //////////////////////////////////////////////////

 void* timer(void *);

 void rrscheduler(queue<float> &ready, queue<float> &job)
 {

 if(thread1!=0)  //when 'p' was pressed, another process was executing
   pthread_cancel(thread1);

 thread1=0;

 if(job.peek()==0 && ready.peek()!=0)   //if there are no processes currently running or the process' time or quantum has finished
 {
   cout<<"on the front end of ready queue is process "<<ready.returnname()<<endl;
   float a=ready.peek();
   float b=ready.returnname();

   ready.deletecell(); //remove a process ffrom ready queue and put it in job queue
   job.append(a,b);
   cout<<"Process "<<b<<"left the ready queue and joined the job queue"<<endl;
 }

 arg arg1;
 arg1.time1=job.peek();
 arg1.name1=job.returnname();
 arg1.quantum1=quantum;

 pthread_create(&thread1, NULL, timer, (void*)(&arg1)); //call the timer function thread

 }//rrscheduler ends

 ///////////////////////////////////////////////////////

 void* timer(void *argum)
 {

 arg *arg1= (arg*)argum;
 cout<<"PROCESS "<<arg1->name1<<" HAS ENTERED THE TIMER"<<endl;
 time_t d, timejob;
 d=arg1->quantum1 + time(NULL);
 timejob=arg1->time1 + time(NULL);

 while((quantrem=d-time(NULL))>0 && (timerem=timejob-time(NULL))>0)
 {
     //execute till either the process time or the process quantum gets finished
 }
 if(timerem>0)
 {
   cout<<"Time quantum finished for "<<arg1->name1<<endl;
   job.deletecell();
   cout<<"JOB DELETED"<<endl;
   ready.append(timerem, arg1->name1);
 }
 else
 {
   cout<<"Process "<<arg1->name1<<" finished"<<endl;
   job.deletecell();
 }

 rrscheduler(ready, job);
 }

 ///////////////////////////////////////////////////////////

 int main()
 {
 cout<<"Enter time quantum"<<endl;
 cin>>quantum;
 cout<<"Press p for entering a new process "<<endl;

 while(1)
 {
   c=cin.get();

   switch(c)
   {
   case 'p':

   if(thread1!=0)  //if when 'p' is pressed, another process was executing
   {
    float n = job.returnname();
    job.deletecell();
    job.append(timerem, n);
    pthread_cancel(thread1);
   }

   thread1=0;
   cout<<"Enter the process number and time"<<endl;
   float a, timeini;
   cin>>a >>timeini;
   ready.append(timeini, a);
   rrscheduler(ready, job);

   break;

   default:
   break;
   }//switch ends here

 }//while finishes
 }//main finishes 
```

![](../Images/8fd08e029ed474e06d818ac7aadc4dd4.png)

在输出“过程 1 已进入计时器”并在输出“时间量子完成 3.99296e-34”处阻塞后，该过程进入 while 循环。

我做错了什么导致分段错误，为什么进程名称显示为 3.99296e-34？

如果有人想查看队列头文件，它就在[这里](http://textuploader.com/?p=6&id=yvubs)

提前致谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T15:12:35.733

`arg::name1`被定义为浮点数，那么它还应该显示为什么呢？您没有显示 的​​定义`returnname`，但由于`job.returnname`它与分配兼容，我假设这也已经返回一个浮点数或可转换的东西。

您可以通过在 gdb 下运行程序来找出出现段错误的位置：

```
gdb your-program 
```

当然，您应该首先使用 -g 编译您的程序。****

# process - 同一进程 Arena 的不同延迟提示

> ID：12372799
> 
> 赞同：0
> 
> 时间：2012-09-11T15:08:23.537
> 
> 标签：process, resources, delay

我需要在 Arena 的模拟过程中更改进程的延迟类型。例如，我需要`costant`前两个小时的延迟类型，然后`triangular`延迟 3 小时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T10:48:22.383

您可以尝试在流程之前做出决定。在该决定中，您可以给出有关时间决定的条件。例如，如果当前时间是 2 小时，它的退出点将转到一个分配模块，该模块会将其处理时间分配给一个想要的常数。或者如果是 3 小时，那么它将转到另一个分配，该分配会将当前实体的处理时间分配给三角分布。

之后，您可以将所有这些分配连接到“处理”模块并输入延迟类型作为表达式，这将是您选择分配处理时间的属性。

# android - 具有可选行的表格布局

> ID：12372800
> 
> 赞同：0
> 
> 时间：2012-09-11T15:08:28.863
> 
> 标签：android, android-listview, google-tv, android-gridview, android-tablelayout

我有一个动态填充的 TableLayout。

我正在为 GoogleTV 开发，所以我需要使 TableLayout 中的行可由远程 D-Pad 选择。我怎样才能做到这一点？

我在这里使用错误的方法吗？我应该改用 GridView 吗？或者可能是 ListView 适配器？

我试图找到示例和类似的问题，但没有成功。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T16:19:19.183

> 如何使行用户可选择（和可点击）？

我不知道你对可选的理解是什么。要使其可点击，只需将一个添加`OnClickListener`到您的每个`TableRows`. 为了在视觉上向用户表明该行是可点击的（就像 a`Button`按下它时那样），然后使用一个可绘制的选择器作为`TableRow`的背景。

> 我在这里使用错误的方法吗？我应该改用 GridView 吗？或者可能是 ListView 适配器？

A`GridView`不，但 a`ListView`是一个很好的候选人。如果表格没有超过您提到的大小（10 x 3），您可以使用简单的`TableLayout`. 如果您知道`TableLayout`可能需要滚动（如果需要在 a 中`ScrollView`），那么 a`ListView`会更有效。

# ms-access - Export Data to File

> ID：12372808
> 
> 赞同：0
> 
> 时间：2012-09-11T15:08:48.107
> 
> 标签：ms-access, ms-access-2010

I have a situation where i need to place a header line of information into a CSV file.

After which, i will need to append 3 queries, of varying column numbers, to this file.

Currently have this logic, but the `TransferText` line overwrites what i had placed in the file prior to it:

```
Dim fldr As String

Dim dlg As Office.FileDialog
Set dlg = Application.FileDialog(msoFileDialogFolderPicker)
With dlg
    .AllowMultiSelect = False
    .Title = "Select a Folder:"
    .Filters.Clear
    '.Filters.Add "CSV Files", "*.csv"

    If .show = True Then
        fldr = .SelectedItems(1)
    End If
End With
GC dlg

'TODO: Remove after Debugging is complete
RaiseAlert "Folder chosen: " & fldr
'-----------------------------------------

Dim file As String
file = fldr & "\Export_DelaGet_" & Format(Now(), "yyyy_mm_dd") & ".csv"

'TODO: Remove after Debugging is complete
RaiseAlert "File: " & file
'-----------------------------------------

'TODO: OpenFile and output the header line
Open file For Output As #1
Print #1, """SYS"",""Some Data""" & vbCrLf
Close 1

'Output Query/View Results to file
DoCmd.TransferText acExportDelim, "MstPrc_Spec", "vwMasterPrices_Output", file, False 
```

Would it be better for me to just Iterate through the query via RecordSet or am i missing something in TransferText?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T16:55:19.960

Unless someone else can provide me a better way of performing this, here is what i have so far.

```
Dim fldr As String

Dim dlg As Office.FileDialog
Set dlg = Application.FileDialog(msoFileDialogFolderPicker)
With dlg
    .AllowMultiSelect = False
    .Title = "Select a Folder:"
    .Filters.Clear
    '.Filters.Add "CSV Files", "*.csv"

    If .show = True Then
        fldr = .SelectedItems(1)
    End If
End With
GC dlg

'TODO: Remove after Debugging is complete
'    RaiseAlert "Folder chosen: " & fldr
'-----------------------------------------

Dim file As String
file = fldr & "\Export_" & Format(Now(), "yyyy_mm_dd") & ".csv"

'TODO: Remove after Debugging is complete
'    RaiseAlert "File: " & file
'-----------------------------------------

'TODO: OpenFile and output the header line
Open file For Output As #1
Print #1, """SYS"",""Some Data""" & vbCrLf
Close 1

Open file For Append As #2
Dim rst As DAO.Recordset, str As String

'Append MasterPrices
Set rst = CurrentDb.OpenRecordset("vwMasterPrices_Output")
If rst.RecordCount > 0 Then
    Do While Not rst.EOF
        str = """" & rst(0) & """,""" & rst(1) & """,""" & rst(2) & """,""" & rst(3) & """,""" & rst(4) & """," & Format(rst(5), "##0.00")

        Print #2, str

        'Move Next
        rst.MoveNext
    Loop
End If

'Append GroupPrice
Set rst = CurrentDb.OpenRecordset("vwGroupPrice_Output")
If rst.RecordCount > 0 Then
    Do While Not rst.EOF
        str = """" & rst(0) & """,""" & rst(1) & """,""" & rst(2) & """," & Format(rst(3), "##0.00")

        Print #2, str

        'Move Next
        rst.MoveNext
    Loop
End If

'Append GroupLocations
Set rst = CurrentDb.OpenRecordset("vwGroupLocations_Output")
If rst.RecordCount > 0 Then
    Do While Not rst.EOF
        str = """" & rst(0) & """,""" & rst(1) & """," & rst(2)

        Print #2, str
        'Move Next
        rst.MoveNext
    Loop
End If

GC rst
Close 2 
```

Unfortunately the `TransferText` method performs a `File-Output` and not a `File-Append` operation. So anything in the file prior to the `TransferText` is cleared and replaced with the output of the method.

Yes i had to have text qualifiers around Strings for the CSV.

# c# - Winforms Designer、带有 VC++ 参考的 C# 项目、工作目录问题

> ID：12372810
> 
> 赞同：1
> 
> 时间：2012-09-11T15:08:55.900
> 
> 标签：c#, winforms, visual-c++, projects-and-solutions, windows-forms-designer

我正在使用约 100 个项目（混合 C# Winforms、VC++ Winforms 和非托管 C）的解决方案。

我有一个名为“DatafiltersControls”（C#）的项目，它引用了一个名为“DatafiltersTypes”（VC++）的项目，下面显示的是特定参考的xml条目。

```
<ProjectReference Include="..\DatafiltersTypes\DatafiltersTypes.vcxproj">
  <Project>{360679FF-815C-4B39-8E5A-62C0D2A6DB31}</Project>
  <Name>DatafiltersTypes</Name>
  <Private>False</Private>
</ProjectReference> 
```

现在，问题是：“设计师只会在某些情况下加载我的控件”。经过大量研究后，我将其分解为我的开发环境以及我打开解决方案的方式。我的构建环境是从 dos 窗口内部创建的，它将替换一个新驱动器 (P:)，映射到一个目录。

创建我的目录后：

*   如果我的提示是“p:\common”作为当前工作目录，并键入 common.sln，那么所有设计师都可以正常工作。这是我最初设置该引用时的当前工作目录。
*   如果我从资源管理器中双击 common.sln，然后尝试打开“复杂”表单，则会收到以下错误：*无法加载文件或程序集“DatafiltersTypes，版本=1.0.1.0，Culture=neutral，PublicKeyToken=null”或其依赖项之一。该系统找不到指定的文件*
*   如果我的提示有“p:\”或任何其他目录作为 CWD，然后调用“p:\common\common.sln”，则设计器会中断复杂的表单（同上）

我相信具体问题是这样的：我的参考是相对添加的，基于 Visual Studio 打开时的 CWD。从那时起，设计者会打破任何“复杂”的形式，因为搜索路径是基于 cwd 的。

如果需要，我可以定义“复杂”，我有确切的情况。我理想的解决方案是允许我的引用基于驱动器的根（无论如何，我公司的开发人员已经有一个约束）。例如，而不是

....\build\output\datafilterstypes.dll，我想要 \build\output\datafilterstypes.dll 作为我的参考。

重要的是要注意：**当我加载 devenv 时，无论我的工作目录如何，一切都编译得很好，它只是设计器。**

提前致谢。

编辑：补充一下，如果

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-22T14:45:27.657

问题是设计者无法加载不纯的 C++ dll。将任何直接或间接将 C++ dll 转换为纯的项目。

# excel - Excel 2010：在公式中输入撇号？

> ID：12372812
> 
> 赞同：0
> 
> 时间：2012-09-11T15:08:59.970
> 
> 标签：excel, excel-formula

我的 excel 单元格中有一个条件，它进入`'123`我的单元格有一个条件。我想要实现的是 excel 将其理解为格式化为文本的数字，但它不是，它只是显示`'123`.

通常，当输入 '123 + enter 时，它会执行应有的操作。我的情况有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T15:47:43.207

利用`=text("123","@")`

将数字`123`包含在`text`公式中可以让您重新格式化它，并且该`@`符号告诉 excel 将其用作文本。

# c# - 工作流重新托管设计器

> ID：12372814
> 
> 赞同：1
> 
> 时间：2012-09-11T15:09:01.937
> 
> 标签：c#, workflow-foundation-4, workflow-rehosting

我希望我能理解将 xaml 文件加载到重新托管的设计器中的工作原理。取决于 xaml 定义，我得到不同的结果。

1.  Xaml，文件中的根节点是包含流程图的Activity。在创建设计器之后使用 desinger.Load(xamlFileName) 和 (new DesignerMetadata).Register() 就足够了（有人知道那是什么魔法吗？）在设计器中，我得到了类似于 Visual Studio 编辑器的工作流程。
2.  Xaml，根节点是流程图本身。相同的步骤只给了我一个设计器中的裸活动。[我尝试根据这个](https://stackoverflow.com/questions/5648672/show-an-activity-into-the-designer)在活动构建器中包装工作流（我有类似的问题）。组件没有问题（至少我是这么认为的），没有例外。我不能让它像前一点那样工作。

保存在 Visual Studio 中的 xaml 和保存在重新托管的设计器中的 xaml 之间有什么区别吗？
ActivityXamlServices.Load 有时返回 DynamicActivity，有时返回目标工作流。它取决于什么？

感谢您的任何支持。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T11:41:55.467

事实证明，这取决于给予重新托管设计师的论据。如果我从新流程图开始，xaml 中的根节点将是流程图。稍后将此类文件加载到设计器时，您不需要包装它。如果您从 ActivityBuilder 开始，您可能需要在加载 xaml 之前使用 WorkflowInspectionServices 来获取工作流。
有时要在设计器中正确显示工作流程，您需要从正确的程序集中使用 (new DesignerMetadata).Register() ，但这并不总是必要的，我不确定它依赖于什么。

# ios - 调试ios分享错误信息

> ID：12372815
> 
> 赞同：0
> 
> 时间：2012-09-11T15:09:05.737
> 
> 标签：ios, facebook, facebook-ios-sdk

我对此处描述的 Facebook iOS 共享方法有疑问：

[http://developers.facebook.com/docs/howtos/publish-to-feed-ios-sdk/](http://developers.facebook.com/docs/howtos/publish-to-feed-ios-sdk/)

当我第一次使用 Facebook 登录并分享时，它就可以工作了。之后，我收到以下错误消息：

![在此处输入图像描述](../Images/2ce6a0a3b91cc668ed2f91c5715c6d89.png)

我不知道如何调试它以及在哪里可以查找此错误代码。

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T16:14:07.827

我发现了一个错误报告[https://developers.facebook.com/bugs/169352693201670?browse=search_504e55a89e7af1b86045526](https://developers.facebook.com/bugs/169352693201670?browse=search_504e55a89e7af1b86045526)指出您现在需要使用旧的已弃用标头。

# javascript - 如何计算每个元素的高度并将这些值用作函数中的变量？

> ID：12372821
> 
> 赞同：0
> 
> 时间：2012-09-11T15:09:22.430
> 
> 标签：javascript, jquery, css, height, width

我正在尝试创建一个简单的文本手风琴，它计算每个面板的高度并将该值作为变量返回。我可以使用 if 语句获取值，`if ( i === 0 ) { $(this).height(); }`但不能将此变量传递到外部。[我可以在不使用变量的情况下做到这一点，但从长远来看它变得毫无用处。](http://jsfiddle.net/Aw39W/48/)

**简而言之：**我想计算每个元素`height`并在函数内部使用这个变量`click`。

**[这是包含问题的jsFiddle。](http://jsfiddle.net/Aw39W/59/)**

```
var panel = $('.holder div');
var trigger = $('a');

panel.each(function(i) {
    //problem starts when i try to calculate each ele's height
    var eachEleHeight = i.height();

    trigger.click(function() {
        $(this).prev('div').animate({'height':eachEleHeight+'px'},500);

        //this works widthout var eachEleHeight but became useless
        //$(this).prev('div').animate({'height':'300px'},500);
    });

    //this is for hiding text at doc.ready
    panel.css('height','56px');
});​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T15:12:51.193

如果我很好理解，试试这个：

```
panel.each(function(i, el) {

    // create a reference to te current panel
    var $el = $(el);    

    // execute a function immediately, passing both the panel and its height
    (function(p, h) {
        // the trigger is targeted as the next link after the current panel
        p.next('a').click(function() {
           p.animate({ height : h + 'px'},500);
        });
    }($el, $el.height()));

    // set each panel height 
    $el.css('height','56px');
}); 
```

小提琴示例：http: [//jsfiddle.net/Aw39W/55/](http://jsfiddle.net/Aw39W/55/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T15:14:50.147

您发布的代码有问题。**`i`**是当前元素的索引。不是元素本身。

尝试`var eachEleHeight = $(this).height();`

**[小提琴](http://jsfiddle.net/BgyGt/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T16:04:12.543

如果我理解这个问题，你想要手风琴动画功能的元素高度。这是一个技巧，但它有效。我经常使用 Mootools，所以我会用它来写。你应该能够弄清楚。

```
var orgHeight = i.offsetHeight;
i.setStyle('height','100%');
var eachEleHeight = i.offsetHeight;
i.setStyle('height',orgHeight); 
```

本质上，您将翻转元素以显示它的高度并在文档有时间使其在屏幕上可见之前将其翻转回来。

不确定这是否正是您要寻找的，但希望对您有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T17:29:23.953

您使用的事件顺序似乎有点奇怪。您实际上是在将 click 事件绑定到`a`每个`panel`元素的所有标签。试试这个：[小提琴](http://jsfiddle.net/scrimothy/pSUdQ/)

我只是使用`min-height`和`max-height`css 属性来存储初始到/从高度变量。这将自动获得您的起始高度。

# mongodb - mongo查询大于最后一个值

> ID：12372824
> 
> 赞同：0
> 
> 时间：2012-09-11T15:09:33.787
> 
> 标签：mongodb, find

说我有收藏：速度：40 速度：43 速度：78 速度：90 速度：22

我想查询速度值何时变化超过 10 英里/小时。可以将其内置到 mongo 查询中，还是应该让 javascript 来做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T15:49:13.643

我认为不可能用 mongo 查询来做到这一点。这个查询需要一次查看两个文档——据我所知，这在今天是不可能的，而且可能永远不可能有效地实现（因为如果你使用分片，单个集合的文档可能分布在不同的机器上）。

即使在 SQL 中，这看起来也很难实现——也许它可以使用自连接来实现。

如果您发现难以查询的内容，则可能表明您的模型不正确。在开始使用 javascript 进行建模之前，最好先调查一下是否有不同的模式建模方式。

# c# - 如果它存在于 ListView ItemTemplate 中，您如何获取导致回发的控件

> ID：12372825
> 
> 赞同：0
> 
> 时间：2012-09-11T15:09:38.147
> 
> 标签：c#, asp.net, autopostback

我目前正在开展一个项目，该项目涉及从数据库中的问题列表创建调查表。我正在使用带有分页的 ListView 控件来显示每个问题及其答案的选择。选项是启用了自动回发的 RadioButtons。

当单击单选按钮并导致回发时，我想获取与单选按钮关联的文本并将其插入到另一个数据库表中，该表记录每个问题的响应。由于单选按钮位于列表视图控件中，我不知道如何为此处理回发。我需要帮助来找到导致回发的单选按钮。我是 ASP.Net 的新手，请帮帮我。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T15:14:31.780

您可以使用`sender`事件处理程序的参数。例如在`CheckBox`' [`CheckedChanged`-event](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.checkbox.checkedchanged#Y684)：

```
void Check_Clicked(Object sender, EventArgs e) 
{
    var checkBox = (CheckBox) sender;
    String text = checkBox.Text;
} 
```

这适用于每个事件，您始终可以通过`sender`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T15:11:32.723

`RadioButton`有一个[CheckedChanged](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.checkbox.checkedchanged.aspx)事件，您可以使用它来获取您需要的文本。

例子：

```
<asp:RadioButton ID="radio1" runat="server"
  OnCheckedChanged="radio1_CheckedChanged" />

void radio1_CheckedChanged(object sender, EventArgs e)
{
   string text = ((RadioButton)sender).Text;
} 
```

或者您可以使用控件 ID：

```
void radio1_CheckedChanged(object sender, EventArgs e)
{
   string text = radio1.Text;
} 
```

# php - 日期和时间是如何存储在 PHP 中的 DateTime 类中的？

> ID：12372826
> 
> 赞同：0
> 
> 时间：2012-09-11T15:09:40.937
> 
> 标签：php, oop, datetime

我在 PHP 手册页中查找了 DateTime 类，发现该类根本没有任何属性。那么日期和时间是如何存储在 DateTime 对象中的呢？__construct() 或 setDate() 方法如何工作，因为没有要设置的属性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T15:16:42.900

如果您真的非常想知道，可以随时查看源代码：

[https://github.com/php/php-src/blob/master/ext/date/php_date.c](https://github.com/php/php-src/blob/master/ext/date/php_date.c)

似乎`DateTime`包含 UNIX 时间和时区。从逻辑上讲，这应该足以正确处理时间。现在我没有看4258行，建议大家不要看（除非出于好奇），改用public方法。

# javascript - 为什么不推荐使用 $.browser - 什么是更好的选择？

> ID：12372831
> 
> 赞同：0
> 
> 时间：2012-09-11T15:09:57.943
> 
> 标签：javascript, jquery, browser

所以我知道自 jQuery 1.3 以来`$.browser`已被弃用和*“皱眉”*，但它继续存在并在代码中工作。

它仍然使用普通的 javascript:`navigator.userAgent`来确定正在使用的浏览器以及版本。

* * *

**现在是否有一些关于导航器本身我不知道的东西**，我不应该使用任何一个`$.browser`或普通的香草 JS 来获取*浏览器/版本*？我只是想确保他们何时拥有 IE8（例如），他们确实拥有它，而且我没有处理错误的代码。

* * *

对于浏览器嗅探，我们还有哪些**其他选择？**我知道`$.support`，我使用`modernizr`，但有时我只需要肮脏的浏览器版本，而不是查看浏览器能够处理什么（我认为这是一个完全不同的问题解决方案）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T15:13:29.587

你自己回答这个问题。理想情况是检查功能支持。随着越来越多的浏览器和设备进入市场，这种方法应该可以扩展。

但是，如果您想做一些“肮脏和肮脏”的事情，那么浏览器检测当然可以工作，但前提是您知道您的代码可以在现有的一组浏览器中工作（或者甚至只是那些您已经测试过代码的浏览器）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T15:22:33.233

通常建议不要尝试猜测浏览器是什么，而是检查功能是否可用。浏览器和变体太多。

要检查某个功能是否可用，您只需执行以下操作：

```
if (!Array.prototype.map) {
    // not available, shut down computer ! 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T22:27:54.380

如果我“必须”知道页面上的哪个浏览器，我个人使用它；

```
(function() {
    var re_browsers = {
        firefox: /firefox\/([\d\.]+)/,
        chrome: /chrome\/([\d\.]+)/,
        safari: /webkit.*?version\/([\d\.]+)/,
        opera: /opera.*?version\/([\d\.]+)/,
        ie: /msie\s+([\d\.]+)/
        // ...
    };

    var ua = window.navigator.userAgent.toLowerCase(), k, re, browser = {};
    for (k in re_browsers) {
        if (re = re_browsers[k].exec(ua)) {
            break;
        }
    }
    browser[k] = true;
    browser["version"] = parseFloat(re && re[1]);
    browser["versionOrig"] = re[1];

    jQuery.extend({browser: browser});
})(); 
```

# javascript - 在粒子系统中渲染球体（或点）

> ID：12372834
> 
> 赞同：4
> 
> 时间：2012-09-11T15:10:12.107
> 
> 标签：javascript, 3d, three.js

我正在使用 Three.JS 库在网络浏览器中显示点云。点云在启动时生成一次，不再添加或删除点。但它确实需要旋转、平移和缩放。我已经阅读了关于在three.js中创建粒子的教程[here](http://aerotwist.com/tutorials/creating-particles-with-three-js/)

使用该示例，我可以创建正方形的粒子或使用球体的图像来创建纹理。图像更接近我想要的，但是是否可以在不使用图像的情况下生成点云？例如球体几何。

图像的问题在于，当您有数千个点时，它们似乎有时会在边缘周围相互遮挡。据我所知，一个点的 png 文件中的黑色区域似乎立即阻止了当前点后面的图像。（但它对后面的点是透明的）

图像的这种模糊化是我想使用形状生成点的原因。我尝试替换`particles = new THREE.Geometry()`并`THREE.SphereGeometry(radius, segments, rings)`尝试将顶点更改为球体。

所以我的问题是。如何修改示例代码，使其呈现球体（或点）而不是正方形？此外，对于我的特定情况，粒子系统是最有效的系统，还是我应该只生成粒子并设置它们各自的位置？正如我提到的，我只生成一次点，然后旋转、缩放、平移点。（我使用 TrackBall 示例代码让鼠标事件工作）。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-14T20:44:19.843

我不认为用球体渲染点云非常有效。您应该能够摆脱粒子系统并使用纹理或小型画布程序来绘制圆圈。

前[三个.js 示例](http://mrdoob.github.com/three.js/examples/canvas_particles_random.html)之一使用了画布程序，以下是重要的部分：

```
var PI2 = Math.PI * 2;
var program = function ( context )
{
    context.beginPath();
    context.arc( 0, 0, 1, 0, PI2, true );
    context.closePath();
    context.fill();    
};
var particle = new THREE.Particle( new THREE.ParticleCanvasMaterial( {
    color: Math.random() * 0x808008 + 0x808080,
    program: program
} ) ); 
```

![三.js 粒子](../Images/0a07f5c5dfcb23aaea2bea98857f7d31.png)

随意调整 WebGL 渲染器的代码。

我在[示例](http://mrdoob.github.com/three.js/)中看到的另一个[聪明的解决方案](http://mrdoob.github.com/three.js/examples/webgl_kinect.html)是使用编码的 webm 视频来存储数据并将其传递给 GLSL 着色器，该着色器通过 three.js 中的粒子系统呈现 ![三.js webgl kinect](../Images/f5c4c5e9061ff44c157516b28abcb1f4.png)

如果您的点云来自 Kinect，这些资源可能会很有用：

1.  [深度相机](http://creativejs.com/2012/02/depthcam/)
2.  [KinectJS](http://kinect.childnodes.com/)

![George MacKeron 的 kinect to js 解决方案](../Images/21140a1aeec74012003a5431ff1657d0.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-01-05T02:45:58.140

在将我的代码与[http://threejs.org/examples/#webgl_custom_attributes_particles3](http://threejs.org/examples/#webgl_custom_attributes_particles3)进行比较时， 我看到唯一的区别是：

> vec4 outColor = texture2D（纹理，gl_PointCoord）；
> **if ( outColor.a < 0.5 ) 丢弃；**
> gl_FragColor = outColor;

添加到片段着色器中，为我解决了这个问题。

这不是 z 战斗，因为随机地，一些角落会与远处的粒子重叠。 `material.alphaTest = 0.5`没有用，关闭深度写入/测试会打乱查看顺序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-20T12:06:07.213

> 图像的问题在于，当您有数千个点时，它们似乎有时会在边缘周围相互遮挡。据我所知，一个点的 png 文件中的黑色区域似乎立即阻止了当前点后面的图像。（但它对后面的点是透明的）

可以通过转动来摆脱底层方形结构的透明度重叠问题

```
depthTest:false 
```

那么问题是，如果您向场景中添加其他对象，深度测试将失败，并且 PointCloud 将在其他对象之前渲染，而忽略实际顺序。为了解决这个问题，您还可以关闭

```
depthWrite:false 
```

# javascript - jquery mobile上多个页面上的一个表单

> ID：12372839
> 
> 赞同：0
> 
> 时间：2012-09-11T15:10:19.263
> 
> 标签：javascript, jquery, forms, jquery-mobile

我试图提交一个很长的表单，它通过几个“页面”分发，并且“提交”按钮不发送表单。

```
<div data-role="page">
    <form action="save_data.php">
    <input type="text">
    <a href="#two">next</a>
</div>
<div data-role="page" id="#two">
    <input type="text">         
    <input type="text">
    <a href="#three">next</a>
</div>
<div data-role="page" id="#three">
    <input type="text">         
    <input type="submit">
</div> 
```

如果我放置`<form action="save_data.php">`在与提交相同的页面中，它会发送数据，否则不会发生任何事情。

我只能在同一个“页面”中发送表单，即使它实际上都是同一个文件？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T19:00:33.790

对于除最后一个表单页面之外的所有表单页面，请执行以下操作：

```
var $lastPageForm = $('.last-page').find('form');
$('.not-last-page').find('form').on('submit', function () {
    $.each($(this).find('input'), function () {
        $lastPageForm.append($(this).clone());
    });
    return false;
}); 
```

这将克隆`input`第一个表单中的每个并将这些克隆附加到最后一个表单。这样，所有表单的所有输入都会与最后一页一起提交。

此代码需要一个布局如下的多页模板：

```
<div class="not-last-page" data-role="page">
    <form>
        <input type="text">
        <a href="#two">next</a>
    </form>
</div>
<div class="not-last-page" data-role="page" id="two">
    <form>
        <input type="text">
        <a href="#three">next</a>
    </form>
</div>
<div class="last-page" data-role="page" id="three">
    <form action="save_data.php">
        <input type="text">
        <input type="submit" />
    </form>
</div> 
```

# css - 对齐图片高度

> ID：12372840
> 
> 赞同：0
> 
> 时间：2012-09-11T15:10:20.043
> 
> 标签：css

我有图片

```
 <div class="thumb-container">
                <a href="@Url.Action("OriginalPicture", new { id = Model.Id })" target="_blank">
                    <img  class="imageResource" alt="picture" src="@Url.Action("Picture", new { id = Model.Id })" />
                </a>
            </div> 
```

在我的 CSS 中，我添加了类：

```
 .thumb-container {height: 155px;} 
```

我希望，如果我有一个高度为 155px 的图像，它会填充所有高度，如果我有一个小图像，它会填充这个 div 元素的某些部分。但是我看到了，那张小图被拉长了

# tridion - 使用 Tridion2011 OData Linking.svc 渲染组件链接

> ID：12372842
> 
> 赞同：-2
> 
> 时间：2012-09-11T15:10:26.133
> 
> 标签：tridion, tridion-2011, tridion-content-delivery

我们正在使用自定义编写的代理类来处理 Mihai Cadaru 提供的 Web 服务通信（附截图），以解决动态链接问题。为了形成 LinkUrl 参数来解析动态链接/组件链接，我们遵循以下示例方法。但它的抛出错误（堆栈跟踪，调试错误）附加。请验证并提供我们出错的输入。请让我们知道我们传递的参数是否正确

**我们使用的方法：**

-->我们有两个组件 Comp1，Comp2（可以创建相同/不同的架构，猜猜这不是问题）

--> Comp2 被用作 Comp1 中的组件链接（我们在 comp1 中有一个组件链接字段）

--> 为每个组件创建了两个动态 CT 的 DCT1、DCT2（CT 具有简单的 DWT，默认完成操作）注意：还尝试将 DD4T TBB 保持在与其他方法类似的 CT 集中，但最终得到相同的错误结果

-->DWT 代码有 --> SomeLink（用于渲染组件链接，以便 LinkResolver TBB 将解析链接）还保留 OTHWayLink（用于交叉检查）

-->创建了两个页面Page1（有Comp1+DCT1），Page2（有Comp2 +DCT2）并将两个页面都发布到broker DB

--> 我们的目标是解析 Comp1 内容中存在的组件链接 (Comp2)，因此，

--> 对于 GetDynamicLink()，我们提供了如下参数。在上面附加的日志跟踪中引发了错误：400（错误请求）和异常。

```
 Param’s List --> string targetPageUri, string targetComponentUri, string targetTemplateUri, string linkText, bool showTextOnFail, string linkTagAttributes

   Param’s we passed--> Page2 tcmid, Comp2 tcmid, DCT2 tcmid ,”some link txt”,true,”some string”; 
```

--> 对于 GetComponentLink()，我们提供了如下参数。在这种情况下，我们尝试将动态和非动态 CT 的组合保留在页面内，这也会在上面附加的日志跟踪中引发错误：400（错误请求）和异常。

```
 Param’s List --> string targetComponentUri, string sourcePageUri, string excludeTemplateUri, string linkText, bool showTextOnFail, bool showAnchor, string linkTagAttributes

   Param’s we passed --> Comp2 tcmid, Page1 tcmid, DCT1 tcmid, “some link txt”,true,true,”some string” ; 
```

我们正在参考链接的[实时文档](http://sdllivecontent.sdl.com/LiveContent/web/pub.xql?action=home&pub=SDL_Tridion_2011_SPONE&lang=en-US#addHistory=true&filename=CDWSLinkingAPI.xml&docid=reference_277A2D7264B04A39870C3FE18EF245BB&inner_id=&tid=&query=&scope=&resource=&eventType=lcContent.loadDocreference_277A2D7264B04A39870C3FE18EF245BB)。

米海代理代码示例：![代理类代码](../Images/6ee7d7410e5bcd9213565c95edce049d.png) 错误信息：![错误](../Images/4f7471228b34ae398b89cb7a5af00070.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T15:29:46.037

在我看来，您的 odata 网站未在 d:/inetpub/wwwroot/odata/bin 中正确设置，因为错误消息是找不到类。

您能否确认您已将正确的 SDL Tridion dll/lib 和配置 XML 文件安装/放置到您的网站中？

这是一篇关于 SDL Tridion 如何加载这些文件的精彩文章：[http](http://www.tridiondeveloper.com/how-tridion-content-delivery-loads-configuration-files-in-dotnet) : //www.tridiondeveloper.com/how-tridion-content-delivery-loads-configuration-files-in-dotnet Odata 应用程序/网站启动并运行，这将为您正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T11:31:46.160

Content Delivery 链接服务的参数记录在[此页面上](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/reference_277A2D7264B04A39870C3FE18EF245BB)（需要登录）。我将在下面粘贴一段摘录，但您真的应该简单地将您的字符串与该页面上提到的参数进行比较。

```
Component Links
Command:/linking/componentLink (Java) or /linking.svc/componentLink (.NET)

Input parameters:
Parameter name        Default value
sourcePageURI         (none)
targetComponentURI    (none)
excludeTemplateURI    (none)
linkTagAttributes     (empty)
linkText              (empty)
showTextOnFail        true
showAnchor            false 
```

通过将这些与您粘贴在屏幕截图中的代码进行交叉检查，一切似乎都排成一行。

那回答你的问题。但我怀疑它是否能解决您的问题，因为这似乎（正如 John Winter 所建议的）更具基础设施：您在相关目录中缺少 cd_link.jar 。

如果您发现难以进一步诊断此问题，我建议联系此自定义代码的原作者（或 SDL 或其合作伙伴之一）。这将确保您从在 JAR、DLL 和配置文件加载故障排除方面经验丰富的人那里获得帮助。

# wordpress - Wordpress 媒体上传器无法正确上传

> ID：12372843
> 
> 赞同：2
> 
> 时间：2012-09-11T15:10:30.887
> 
> 标签：wordpress, media, uploader

我正在通过 Wordpress 媒体上传器上传媒体。它说它可以很好地上传文件（如果我检查我的上传文件夹，它实际上就在那里）。

但是前端的图片坏了，如果我去媒体上传器，它会显示一个坏的图片。 ![在此处输入图像描述](../Images/fb92dbfae04a6ed36c43f122765ea5a2.png) ![在此处输入图像描述](../Images/de3ea5ee1b28aa0f81580290162d22fc.png)

现在奇怪的是，如果我在媒体上传器中单击“编辑图像”，它会向我显示图像...... ![在此处输入图像描述](../Images/d688aa9b8cb460597d7123d975a6c87d.png)

图像的链接也是正确的，除非我使用该链接查看图像时被带到 404 页面。

我想补充一点，我停用了我正在使用的所有插件，并且没有任何变化。同样，我已授予 777 的上传文件夹权限。没有变化。

上传器在我的远程服务器上工作正常，但是当我在本地使用该站点（使用 MAMP）时会发生这种情况。

我只是想知道问题是什么，以及当我将站点设置在另一台服务器上时是否会发生这种情况......这是怎么回事？

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-09T05:16:23.073

检查您是否对所有 SPECIFIC 相关文件夹（, ,文件夹）有任何限制`.htaccess`或限制`php.ini``Content``Uploads``Year/Month`

其中之一是必然存在的。否则 - 这是一个托管问题/配置。

# r - 在 R 2.15.1 for Windows 上安装 lme4a 包

> ID：12372844
> 
> 赞同：1
> 
> 时间：2012-09-11T15:10:33.257
> 
> 标签：r

可能吗？如果是这样，怎么做？如果没有，我该怎么做才能让 lme4a 在 Windows 上工作？

我目前已经在 R-forge 上为 Matrix 和 Rcpp 安装了最新版本，并拥有其他所需软件包的 CRAN 版本。我从[r-](http://lme4.r-forge.r-project.org/repos/bin/windows64/contrib/2.14/) forge 得到了我的 lme4a 包。

我是否必须“降级”到 R 2.14 才能使其工作？如果是这样，管理多个 R 安装的最简单方法是什么？

# java - 组装本机 hadoop 库时出错

> ID：12372855
> 
> 赞同：1
> 
> 时间：2012-09-11T15:11:07.580
> 
> 标签：java, c++, hadoop, mapreduce

我按照[https://issues.apache.org/jira/browse/HADOOP-3123](https://issues.apache.org/jira/browse/HADOOP-3123)操作，输入命令

```
root@one: /export/hadoop-1.0.1/# ant -Dcompile.native=true -Dnonspace.os=SunOS -        Dmake.cmd=/usr/local/bin/make clean tar 
```

结果也收到了（这是一部分）

```
 [exec] checking for an ANSI C-conforming const... yes
 [exec] checking for memset... yes
 [exec] checking whether strerror_r is declared... yes
 [exec] checking for strerror_r... yes
 [exec] checking whether strerror_r returns char *... no
 [exec] configure: creating ./config.status
 [exec]  /bin/sh ./config.status
 [exec] config.status: creating Makefile
 [exec] config.status: creating config.h
 [exec] config.status: config.h is unchanged
 [exec] config.status: executing depfiles commands
 [exec] cd /export/hadoop-1.0.1/src/native && /bin/sh /export/hadoop-1.0.1/src/native/config/missing --run autoheader
 [exec] rm -f stamp-h1
 [exec] touch /export/hadoop-1.0.1/src/native/config.h.in
 [exec] cd . && /bin/sh ./config.status config.h
 [exec] /export/hadoop-1.0.1/src/native/config/missing[52]: autoheader: not found [No such file or directory]
 [exec] WARNING: `autoheader' is missing on your system.  You should only need it if
 [exec]          you modified `acconfig.h' or `configure.ac'.  You might want
 [exec]          to install the `Autoconf' and `GNU m4' packages.  Grab them
 [exec]          from any GNU archive site.
 [exec] config.status: creating config.h
 [exec] config.status: config.h is unchanged
 [exec] /usr/local/bin/make  all-am
 [exec] make[1]: Entering directory `/export/hadoop-1.0.1/build/native/SunOS-x86-32'
 [exec] if /bin/sh ./libtool --tag=CC --mode=compile gcc -DHAVE_CONFIG_H -I. -I/export/hadoop-1.0.1/src/native -I.  -I/opt/jdk1.7.0_06/include -I/opt/jdk1.7.0_06/include/solaris -I/export/hadoop-1.0.1/src/native/src -Isrc/org/apache/hadoop/io/compress/zlib -Isrc/org/apache/hadoop/io/nativeio -Isrc/org/apache/hadoop/security  -g -Wall -fPIC -O2 -m32 -g -O2 -MT ZlibCompressor.lo -MD -MP -MF ".deps/ZlibCompressor.Tpo" -c -o ZlibCompressor.lo `test -f 'src/org/apache/hadoop/io/compress/zlib/ZlibCompressor.c' || echo '/export/hadoop-1.0.1/src/native/'`src/org/apache/hadoop/io/compress/zlib/ZlibCompressor.c; \
 [exec] then mv -f ".deps/ZlibCompressor.Tpo" ".deps/ZlibCompressor.Plo"; else rm -f ".deps/ZlibCompressor.Tpo"; exit 1; fi
 [exec] mkdir .libs
 [exec]  gcc -DHAVE_CONFIG_H -I. -I/export/hadoop-1.0.1/src/native -I. -I/opt/jdk1.7.0_06/include -I/opt/jdk1.7.0_06/include/solaris -I/export/hadoop-1.0.1/src/native/src -Isrc/org/apache/hadoop/io/compress/zlib -Isrc/org/apache/hadoop/io/nativeio -Isrc/org/apache/hadoop/security -g -Wall -fPIC -O2 -m32 -g -O2 -MT ZlibCompressor.lo -MD -MP -MF .deps/ZlibCompressor.Tpo -c /export/hadoop-1.0.1/src/native/src/org/apache/hadoop/io/compress/zlib/ZlibCompressor.c  -fPIC -DPIC -o .libs/ZlibCompressor.o
 [exec]  gcc -DHAVE_CONFIG_H -I. -I/export/hadoop-1.0.1/src/native -I. -I/opt/jdk1.7.0_06/include -I/opt/jdk1.7.0_06/include/solaris -I/export/hadoop-1.0.1/src/native/src -Isrc/org/apache/hadoop/io/compress/zlib -Isrc/org/apache/hadoop/io/nativeio -Isrc/org/apache/hadoop/security -g -Wall -fPIC -O2 -m32 -g -O2 -MT ZlibCompressor.lo -MD -MP -MF .deps/ZlibCompressor.Tpo -c /export/hadoop-1.0.1/src/native/src/org/apache/hadoop/io/compress/zlib/ZlibCompressor.c -o ZlibCompressor.o >/dev/null 2>&1
 [exec] if /bin/sh ./libtool --tag=CC --mode=compile gcc -DHAVE_CONFIG_H -I. -I/export/hadoop-1.0.1/src/native -I.  -I/opt/jdk1.7.0_06/include -I/opt/jdk1.7.0_06/include/solaris -I/export/hadoop-1.0.1/src/native/src -Isrc/org/apache/hadoop/io/compress/zlib -Isrc/org/apache/hadoop/io/nativeio -Isrc/org/apache/hadoop/security  -g -Wall -fPIC -O2 -m32 -g -O2 -MT ZlibDecompressor.lo -MD -MP -MF ".deps/ZlibDecompressor.Tpo" -c -o ZlibDecompressor.lo `test -f 'src/org/apache/hadoop/io/compress/zlib/ZlibDecompressor.c' || echo '/export/hadoop-1.0.1/src/native/'`src/org/apache/hadoop/io/compress/zlib/ZlibDecompressor.c; \
 [exec] then mv -f ".deps/ZlibDecompressor.Tpo" ".deps/ZlibDecompressor.Plo"; else rm -f ".deps/ZlibDecompressor.Tpo"; exit 1; fi
 [exec]  gcc -DHAVE_CONFIG_H -I. -I/export/hadoop-1.0.1/src/native -I. -I/opt/jdk1.7.0_06/include -I/opt/jdk1.7.0_06/include/solaris -I/export/hadoop-1.0.1/src/native/src -Isrc/org/apache/hadoop/io/compress/zlib -Isrc/org/apache/hadoop/io/nativeio -Isrc/org/apache/hadoop/security -g -Wall -fPIC -O2 -m32 -g -O2 -MT ZlibDecompressor.lo -MD -MP -MF .deps/ZlibDecompressor.Tpo -c /export/hadoop-1.0.1/src/native/src/org/apache/hadoop/io/compress/zlib/ZlibDecompressor.c  -fPIC -DPIC -o .libs/ZlibDecompressor.o
 [exec]  gcc -DHAVE_CONFIG_H -I. -I/export/hadoop-1.0.1/src/native -I. -I/opt/jdk1.7.0_06/include -I/opt/jdk1.7.0_06/include/solaris -I/export/hadoop-1.0.1/src/native/src -Isrc/org/apache/hadoop/io/compress/zlib -Isrc/org/apache/hadoop/io/nativeio -Isrc/org/apache/hadoop/security -g -Wall -fPIC -O2 -m32 -g -O2 -MT ZlibDecompressor.lo -MD -MP -MF .deps/ZlibDecompressor.Tpo -c /export/hadoop-1.0.1/src/native/src/org/apache/hadoop/io/compress/zlib/ZlibDecompressor.c -o ZlibDecompressor.o >/dev/null 2>&1
 [exec] if /bin/sh ./libtool --tag=CC --mode=compile gcc -DHAVE_CONFIG_H -I. -I/export/hadoop-1.0.1/src/native -I.  -I/opt/jdk1.7.0_06/include -I/opt/jdk1.7.0_06/include/solaris -I/export/hadoop-1.0.1/src/native/src -Isrc/org/apache/hadoop/io/compress/zlib -Isrc/org/apache/hadoop/io/nativeio -Isrc/org/apache/hadoop/security  -g -Wall -fPIC -O2 -m32 -g -O2 -MT getGroup.lo -MD -MP -MF ".deps/getGroup.Tpo" -c -o getGroup.lo `test -f 'src/org/apache/hadoop/security/getGroup.c' || echo '/export/hadoop-1.0.1/src/native/'`src/org/apache/hadoop/security/getGroup.c; \
 [exec] then mv -f ".deps/getGroup.Tpo" ".deps/getGroup.Plo"; else rm -f ".deps/getGroup.Tpo"; exit 1; fi
 [exec]  gcc -DHAVE_CONFIG_H -I. -I/export/hadoop-1.0.1/src/native -I. -I/opt/jdk1.7.0_06/include -I/opt/jdk1.7.0_06/include/solaris -I/export/hadoop-1.0.1/src/native/src -Isrc/org/apache/hadoop/io/compress/zlib -Isrc/org/apache/hadoop/io/nativeio -Isrc/org/apache/hadoop/security -g -Wall -fPIC -O2 -m32 -g -O2 -MT getGroup.lo -MD -MP -MF .deps/getGroup.Tpo -c /export/hadoop-1.0.1/src/native/src/org/apache/hadoop/security/getGroup.c  -fPIC -DPIC -o .libs/getGroup.o
 [exec] make[1]: Leaving directory `/export/hadoop-1.0.1/build/native/SunOS-x86-32'
 [exec] /export/hadoop-1.0.1/src/native/src/org/apache/hadoop/security/getGroup.c: In function 'getGroupIDList':
 [exec] /export/hadoop-1.0.1/src/native/src/org/apache/hadoop/security/getGroup.c:42: warning: implicit declaration of function 'getPW'
 [exec] /export/hadoop-1.0.1/src/native/src/org/apache/hadoop/security/getGroup.c:52: warning: implicit declaration of function 'getgrouplist'
 [exec] /export/hadoop-1.0.1/src/native/src/org/apache/hadoop/security/getGroup.c: In function 'getGroupDetails':
 [exec] /export/hadoop-1.0.1/src/native/src/org/apache/hadoop/security/getGroup.c:90: error: too many arguments to function 'getgrgid_r'
 [exec] /export/hadoop-1.0.1/src/native/src/org/apache/hadoop/security/getGroup.c:90: warning: assignment makes integer from pointer without a cast
 [exec] /export/hadoop-1.0.1/src/native/src/org/apache/hadoop/security/getGroup.c: In function 'getPW':
 [exec] /export/hadoop-1.0.1/src/native/src/org/apache/hadoop/security/getGroup.c:132: error: too many arguments to function 'getpwnam_r'
 [exec] /export/hadoop-1.0.1/src/native/src/org/apache/hadoop/security/getGroup.c:132: warning: assignment makes integer from pointer without a cast
 [exec] make[1]: *** [getGroup.lo] Error 1
 [exec] make: *** [all] Error 2

 BUILD FAILED
 /export/hadoop-1.0.1/build.xml:653: exec returned: 2

 Total time: 58 seconds 
```

我提供了这些功能满足的标题文件的文本

/usr/include/grp.h

```
/*
* CDDL HEADER START
*
* The contents of this file are subject to the terms of the
* Common Development and Distribution License, Version 1.0 only
* (the "License").  You may not use this file except in compliance
* with the License.
*
* You can obtain a copy of the license at usr/src/OPENSOLARIS.LICENSE
* or http://www.opensolaris.org/os/licensing.
* See the License for the specific language governing permissions
* and limitations under the License.
*
* When distributing Covered Code, include this CDDL HEADER in each
* file and include the License file at usr/src/OPENSOLARIS.LICENSE.
* If applicable, add the following below this CDDL HEADER, with the
* fields enclosed by brackets "[]" replaced with your own identifying
* information: Portions Copyright [yyyy] [name of copyright owner]
*
* CDDL HEADER END
*/
/*  Copyright (c) 1988 AT&T */
/*    All Rights Reserved   */

 /*
  * Copyright 2004 Sun Microsystems, Inc.  All rights reserved.
  * Use is subject to license terms.
 */

#ifndef _GRP_H
#define _GRP_H

#pragma ident   "%Z%%M% %I% %E% SMI"    /* SVr4.0 1.3.3.1 */

#include <sys/feature_tests.h>

#include <sys/types.h>

#if defined(__EXTENSIONS__) || !defined(__XOPEN_OR_POSIX)
#include <stdio.h>
#endif

#ifdef  __cplusplus
extern "C" {
#endif

struct  group { /* see getgrent(3C) */
char    *gr_name;
char    *gr_passwd;
gid_t   gr_gid;
char    **gr_mem;
};

#if defined(__STDC__)

extern struct group *getgrgid(gid_t);       /* MT-unsafe */
extern struct group *getgrnam(const char *);    /* MT-unsafe */

#if defined(__EXTENSIONS__) || !defined(__XOPEN_OR_POSIX)
extern struct group *getgrent_r(struct group *, char *, int);
extern struct group *fgetgrent_r(FILE *, struct group *, char *, int);

extern struct group *fgetgrent(FILE *);     /* MT-unsafe */
extern int initgroups(const char *, gid_t);
#endif /* defined(__EXTENSIONS__) || !defined(__XOPEN_OR_POSIX) */

#if defined(__EXTENSIONS__) || !defined(__XOPEN_OR_POSIX) || defined(_XPG4_2)
extern void endgrent(void);
extern void setgrent(void);
extern struct group *getgrent(void);        /* MT-unsafe */
#endif /* defined(__EXTENSIONS__) || !defined(__XOPEN_OR_POSIX)... */

#else

extern struct group *getgrgid();        /* MT-unsafe */
extern struct group *getgrnam();        /* MT-unsafe */

#if defined(__EXTENSIONS__) || !defined(__XOPEN_OR_POSIX)
extern struct group *getgrent_r();
extern struct group *fgetgrent_r();

extern struct group *fgetgrent();       /* MT-unsafe */
extern int initgroups();
#endif /* defined(__EXTENSIONS__) || !defined(__XOPEN_OR_POSIX) */

#if defined(__EXTENSIONS__) || !defined(__XOPEN_OR_POSIX) || defined(_XPG4_2)
extern void endgrent();
extern void setgrent();
extern struct group *getgrent();        /* MT-unsafe */
#endif /* defined(__EXTENSIONS__) || !defined(__XOPEN_OR_POSIX)... */

#endif  /* __STDC__ */

/*
 * getgrgid_r() & getgrnam_r() prototypes are defined here.
*/

/*
 * Previous releases of Solaris, starting at 2.3, provided definitions of
 * various functions as specified in POSIX.1c, Draft 6\.  For some of these
 * functions, the final POSIX 1003.1c standard had a different number of
 * arguments and return values.
 *
 * The following segment of this header provides support for the standard
 * interfaces while supporting applications written under earlier
 * releases.  The application defines appropriate values of the feature
 * test macros _POSIX_C_SOURCE and _POSIX_PTHREAD_SEMANTICS to indicate
 * whether it was written to expect the Draft 6 or standard versions of
 * these interfaces, before including this header.  This header then
 * provides a mapping from the source version of the interface to an
 * appropriate binary interface.  Such mappings permit an application
 * to be built from libraries and objects which have mixed expectations
 * of the definitions of these functions.
 *
 * For applications using the Draft 6 definitions, the binary symbol is the
 * same as the source symbol, and no explicit mapping is needed.  For the
 * standard interface, the function func() is mapped to the binary symbol
 * _posix_func().  The preferred mechanism for the remapping is a compiler
 * #pragma.  If the compiler does not provide such a #pragma, the header file
 * defines a static function func() which calls the _posix_func() version;
 * this has to be done instead of #define since POSIX specifies that an
 * application can #undef the symbol and still be bound to the correct
 * implementation.  Unfortunately, the statics confuse lint so we fallback to
 * #define in that case.
 *
 * NOTE: Support for the Draft 6 definitions is provided for compatibility
 * only.  New applications/libraries should use the standard definitions.
 */

 #if    defined(__EXTENSIONS__) || !defined(__XOPEN_OR_POSIX) || \
(_POSIX_C_SOURCE - 0 >= 199506L) || defined(_POSIX_PTHREAD_SEMANTICS)

 #if    defined(__STDC__)

 #if    (_POSIX_C_SOURCE - 0 >= 199506L) || defined(_POSIX_PTHREAD_SEMANTICS)

 #ifdef __PRAGMA_REDEFINE_EXTNAME
 #pragma redefine_extname getgrgid_r __posix_getgrgid_r
 #pragma redefine_extname getgrnam_r __posix_getgrnam_r
 extern int getgrgid_r(gid_t, struct group *, char *, int, struct group **);
 extern int getgrnam_r(const char *, struct group *, char *, int,
                        struct group **);
 #else  /* __PRAGMA_REDEFINE_EXTNAME */

 extern int __posix_getgrgid_r(gid_t, struct group *, char *, size_t,
  struct group **);
 extern int __posix_getgrnam_r(const char *, struct group *, char *, size_t,
  struct group **);

 #ifdef __lint

 #define    getgrgid_r __posix_getgrgid_r
 #define    getgrnam_r __posix_getgrnam_r

 #else  /* !__lint */

 static int
 getgrgid_r(gid_t __gid, struct group *__grp, char *__buf, int __len,
    struct group **__res)
 {
  return (__posix_getgrgid_r(__gid, __grp, __buf, __len, __res));
 }
 static int
 getgrnam_r(const char *__cb, struct group *__grp, char *__buf, int __len,
    struct group **__res)
 {
  return (__posix_getgrnam_r(__cb, __grp, __buf, __len, __res));
 }

 #endif /* !__lint */
 #endif /* __PRAGMA_REDEFINE_EXTNAME */

 #else  /* (_POSIX_C_SOURCE - 0 >= 199506L) || ... */

 extern struct group *getgrgid_r(gid_t, struct group *, char *, int);
 extern struct group *getgrnam_r(const char *, struct group *, char *, int);

 #endif  /* (_POSIX_C_SOURCE - 0 >= 199506L) || ... */

 #else  /* __STDC__ */

 #if    (_POSIX_C_SOURCE - 0 >= 199506L) || defined(_POSIX_PTHREAD_SEMANTICS)

 #ifdef __PRAGMA_REDEFINE_EXTNAME
 #pragma redefine_extname getgrgid_r __posix_getgrgid_r
 #pragma redefine_extname getgrnam_r __posix_getgrnam_r
 extern int getgrgid_r();
 extern int getgrnam_r();
 #else  /* __PRAGMA_REDEFINE_EXTNAME */

 extern int __posix_getgrgid_r();
 extern int __posix_getgrnam_r();

 #ifdef __lint

 #define    getgrgid_r __posix_getgrgid_r
 #define    getgrnam_r __posix_getgrnam_r

 #else  /* !__lint */

 static int
 getgrgid_r(__gid, __grp, __buf, __len, __res)
    gid_t __gid;
    struct group *__grp;
    char *__buf;
    int __len;
    struct group **__res;
{
    return (__posix_getgrgid_r(__gid, __grp, __buf, __len, __res));
}
static int
getgrnam_r(__cb, __grp, __buf, __len, __res)
    char *__cb;
    struct group *__grp;
    char *__buf;
    int __len;
    struct group **__res;
{
    return (__posix_getgrnam_r(__cb, __grp, __buf, __len, __res));
}

#endif /* !__lint */
#endif /* __PRAGMA_REDEFINE_EXTNAME */

#else  /* (_POSIX_C_SOURCE - 0 >= 199506L) || ... */

extern struct group *getgrgid_r();
extern struct group *getgrnam_r();

#endif /* (_POSIX_C_SOURCE - 0 >= 199506L) || ... */

#endif /* __STDC__ */

#endif /* defined(__EXTENSIONS__) || !defined(__XOPEN_OR_POSIX)... */

#ifdef  __cplusplus
}
#endif

#endif  /* _GRP_H */ 
```

/usr/include/pwd.h

```
/*
 * CDDL HEADER START
 *
 * The contents of this file are subject to the terms of the
 * Common Development and Distribution License, Version 1.0 only
 * (the "License").  You may not use this file except in compliance
 * with the License.
 *
 * You can obtain a copy of the license at usr/src/OPENSOLARIS.LICENSE
 * or http://www.opensolaris.org/os/licensing.
 * See the License for the specific language governing permissions
 * and limitations under the License.
 *
 * When distributing Covered Code, include this CDDL HEADER in each
 * file and include the License file at usr/src/OPENSOLARIS.LICENSE.
 * If applicable, add the following below this CDDL HEADER, with the
 * fields enclosed by brackets "[]" replaced with your own identifying
 * information: Portions Copyright [yyyy] [name of copyright owner]
 *
 * CDDL HEADER END
*/
/*  Copyright (c) 1988 AT&T */
/*    All Rights Reserved   */

/*
 * Copyright 2004 Sun Microsystems, Inc.  All rights reserved.
 * Use is subject to license terms.
*/

#ifndef _PWD_H
#define _PWD_H

#pragma ident   "%Z%%M% %I% %E% SMI"    /* SVr4.0 1.3.1.9 */

#include <sys/feature_tests.h>

#include <sys/types.h>

#if !defined(__XOPEN_OR_POSIX) || defined(__EXTENSIONS__)
#include <stdio.h>
#endif

#ifdef  __cplusplus
extern "C" {
#endif

struct passwd {
    char    *pw_name;
    char    *pw_passwd;
    uid_t   pw_uid;
    gid_t   pw_gid;
    char    *pw_age;
    char    *pw_comment;
    char    *pw_gecos;
    char    *pw_dir;
    char    *pw_shell;
};

#if !defined(__XOPEN_OR_POSIX) || defined(__EXTENSIONS__)
struct comment {
    char    *c_dept;
    char    *c_name;
    char    *c_acct;
    char    *c_bin;
};
#endif /* !defined(__XOPEN_OR_POSIX) || defined(__EXTENSIONS__) */

#if defined(__STDC__)

extern struct passwd *getpwuid(uid_t);      /* MT-unsafe */
extern struct passwd *getpwnam(const char *);   /* MT-unsafe */

#if !defined(__XOPEN_OR_POSIX) || defined(__EXTENSIONS__)
extern struct passwd *getpwent_r(struct passwd *, char *, int);
extern struct passwd *fgetpwent_r(FILE *, struct passwd *, char *, int);
extern struct passwd *fgetpwent(FILE *);    /* MT-unsafe */
extern int putpwent(const struct passwd *, FILE *);
#endif /* !defined(__XOPEN_OR_POSIX) || defined(__EXTENSIONS__) */

#if !defined(__XOPEN_OR_POSIX) || defined(_XPG4_2) || \
    defined(__EXTENSIONS__)
extern void endpwent(void);
extern struct passwd *getpwent(void);       /* MT-unsafe */
extern void setpwent(void);
#endif /* !defined(__XOPEN_OR_POSIX) || defined(_XPG4_2) ... */

#else  /* (__STDC__) */

extern struct passwd *getpwuid();       /* MT-unsafe */
extern struct passwd *getpwnam();       /* MT-unsafe */

#if !defined(__XOPEN_OR_POSIX) || defined(__EXTENSIONS__)
extern struct passwd *getpwent_r();
extern struct passwd *fgetpwent_r();

extern struct passwd *fgetpwent();      /* MT-unsafe */
extern int putpwent();
#endif /* !defined(__XOPEN_OR_POSIX) || defined(__EXTENSIONS__) */

#if !defined(__XOPEN_OR_POSIX) || defined(_XPG4_2) || \
    defined(__EXTENSIONS__)
extern void endpwent();
extern struct passwd *getpwent();       /* MT-unsafe */
extern void setpwent();
#endif /* !defined(__XOPEN_OR_POSIX) || defined(_XPG4_2) ... */

#endif /* (__STDC__) */

/*
 * getpwuid_r() & getpwnam_r() prototypes are defined here.
*/

/*
 * Previous releases of Solaris, starting at 2.3, provided definitions of
 * various functions as specified in POSIX.1c, Draft 6\.  For some of these
 * functions, the final POSIX 1003.1c standard had a different number of
 * arguments and return values.
 *
 * The following segment of this header provides support for the standard
 * interfaces while supporting applications written under earlier
 * releases.  The application defines appropriate values of the feature
 * test macros _POSIX_C_SOURCE and _POSIX_PTHREAD_SEMANTICS to indicate
 * whether it was written to expect the Draft 6 or standard versions of
 * these interfaces, before including this header.  This header then
 * provides a mapping from the source version of the interface to an
 * appropriate binary interface.  Such mappings permit an application
 * to be built from libraries and objects which have mixed expectations
 * of the definitions of these functions.
 *
 * For applications using the Draft 6 definitions, the binary symbol is the
 * same as the source symbol, and no explicit mapping is needed.  For the
 * standard interface, the function func() is mapped to the binary symbol
 * _posix_func().  The preferred mechanism for the remapping is a compiler
 * #pragma.  If the compiler does not provide such a #pragma, the header file
 * defines a static function func() which calls the _posix_func() version;
 * this has to be done instead of #define since POSIX specifies that an
 * application can #undef the symbol and still be bound to the correct
 * implementation.  Unfortunately, the statics confuse lint so we fallback to
 * #define in that case.
 *
 * NOTE: Support for the Draft 6 definitions is provided for compatibility
 * only.  New applications/libraries should use the standard definitions.
 */

#if !defined(__XOPEN_OR_POSIX) || (_POSIX_C_SOURCE - 0 >= 199506L) || \
    defined(_POSIX_PTHREAD_SEMANTICS) || defined(__EXTENSIONS__)

#if defined(__STDC__)

#if (_POSIX_C_SOURCE - 0 >= 199506L) || defined(_POSIX_PTHREAD_SEMANTICS)

#ifdef __PRAGMA_REDEFINE_EXTNAME
#pragma redefine_extname getpwuid_r __posix_getpwuid_r
#pragma redefine_extname getpwnam_r __posix_getpwnam_r
extern int getpwuid_r(uid_t, struct passwd *, char *, int, struct passwd **);
extern int getpwnam_r(const char *, struct passwd *, char *,
                        int, struct passwd **);
#else  /* __PRAGMA_REDEFINE_EXTNAME */

extern int __posix_getpwuid_r(uid_t, struct passwd *, char *, size_t,
    struct passwd **);
extern int __posix_getpwnam_r(const char *, struct passwd *, char *,
    size_t, struct passwd **);

#ifdef __lint

#define getpwuid_r __posix_getpwuid_r
#define getpwnam_r __posix_getpwnam_r

#else   /* !__lint */

static int
getpwuid_r(uid_t __uid, struct passwd *__pwd, char *__buf, int __len,
    struct passwd **__res)
{
    return (__posix_getpwuid_r(__uid, __pwd, __buf, __len, __res));
}
static int
getpwnam_r(const char *__cb, struct passwd *__pwd, char *__buf, int __len,
    struct passwd **__res)
{
     return (__posix_getpwnam_r(__cb, __pwd, __buf, __len, __res));
}

#endif /* !__lint */
#endif /* __PRAGMA_REDEFINE_EXTNAME */

#else  /* (_POSIX_C_SOURCE - 0 >= 199506L) || ... */

extern struct passwd *getpwuid_r(uid_t, struct passwd *, char *, int);
extern struct passwd *getpwnam_r(const char *, struct passwd *, char *, int);

#endif  /* (_POSIX_C_SOURCE - 0 >= 199506L) || ... */

#else  /* __STDC__ */

#if (_POSIX_C_SOURCE - 0 >= 199506L) || defined(_POSIX_PTHREAD_SEMANTICS)

#ifdef __PRAGMA_REDEFINE_EXTNAME
#pragma redefine_extname getpwuid_r __posix_getpwuid_r
#pragma redefine_extname getpwnam_r __posix_getpwnam_r
extern int getpwuid_r();
extern int getpwnam_r();
#else  /* __PRAGMA_REDEFINE_EXTNAME */

extern int __posix_getpwuid_r();
extern int __posix_getpwnam_r();

#ifdef  __lint

#define getpwuid_r __posix_getpwuid_r
#define getpwnam_r __posix_getpwnam_r

#else   /* !__lint */

static int
getpwuid_r(__uid, __pwd, __buf, __len, __res)
    uid_t __uid;
    struct passwd *__pwd;
    char *__buf;
    int __len;
    struct passwd **__res;
{
    return (__posix_getpwuid_r(__uid, __pwd, __buf, __len, __res));
}
static int
getpwnam_r(__cb, __pwd, __buf, __len, __res)
    char *__cb;
    struct passwd *__pwd;
    char *__buf;
    int __len;
    struct passwd **__res;
{
    return (__posix_getpwnam_r(__cb, __pwd, __buf, __len, __res));
}

#endif /* !__lint */
#endif /* __PRAGMA_REDEFINE_EXTNAME */

#else  /* (_POSIX_C_SOURCE - 0 >= 199506L) || ... */

extern struct passwd *getpwuid_r();
extern struct passwd *getpwnam_r();

#endif /* (_POSIX_C_SOURCE - 0 >= 199506L) || ... */

#endif /* __STDC__ */

#endif /* !defined(__XOPEN_OR_POSIX) || (_POSIX_C_SOURCE - 0 >= 199506L)... */

#ifdef  __cplusplus
}
#endif

#endif /* _PWD_H */ 
```

函数 getgrouplist、getgrgid_r、getpwnam_r 有什么问题以及如何删除？

# php - 从单独的文件中读取 MySQL 密码

> ID：12372856
> 
> 赞同：0
> 
> 时间：2012-09-11T15:11:07.437
> 
> 标签：php, security, github

我试图在我的 PHP 源代码中混淆 MySQL 密码，因为它在 Github 上公开显示。这是我所做的：

```
$pword = file_get_contents('../.brown_bag');
$obj->password = $pword; 
```

这不起作用，我收到拒绝访问错误。文件 ,`.brown_bag`仅包含一行，其中包含仅由字母组成的字符串。我很确定`file_get_contents()`没有返回我预期的数据。我试图编写简洁、简单的代码，因此避免了整个`fopen`繁琐的过程。为什么这不起作用，有没有更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T15:21:15.197

你的代码看起来不错。唯一可能的问题是，文件路径不正确。为确保这一点，请给出文件的绝对路径，例如 (C:\a\b\c.brown_bag 或 /home/user/.brownbag)

如果上述工作，您将确定它的路径问题。如果没有，请提供确切的错误，它通过一些调试报告。

更好的方法：密码应始终放在配置文件中。配置文件是在有一些更改之前不会在 git 上提交的文件。配置文件应在本地编辑以获取密码。但是我假设您使用 .brown_bag 作为配置文件。我仍然会建议一些更好的命名约定。更好的是，将配置文件制作为 php 文件并将您的密码定义为数组或常量，或者简单地在配置文件中定义它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T14:21:21.510

至于为什么它不起作用，您是否尝试过回显从文件中读取的值？它可能像空格或换行一样简单，因此您可以尝试：

```
$obj->password = trim($pword); 
```

另一种方法是将示例配置文件添加到 github 而不是真实的，例如只添加`config.php.example`空值或示例值。

# jquery - 1 个文件中的 3 个 jQuery 库

> ID：12372860
> 
> 赞同：0
> 
> 时间：2012-09-11T15:11:40.027
> 
> 标签：jquery, jquery-plugins

我正在制作一个包含 3 个 jQuery 插件的网页。不幸的是，它们都有不同的 jQuery 基础库。

他们是：

1.  1.3.2
2.  1.5.1
3.  1.7.1

当我添加以下代码时，使用 1.3.2 的插件不起作用。

```
<script type="text/javascript">
    var jQuery_1_3_2 = $.noConflict(true);
</script> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T15:15:38.560

首先尝试他们是否也在使用另一个 jQuery 版本。然后您可以加载第一个版本，然后是第一个插件，然后是以下内容：

```
var jQ_1_3 = $.noConflict(true); 
```

然后下一个版本等等...

# javascript - 2 个具有相同模型但排序顺序不同的主干.js 集合

> ID：12372861
> 
> 赞同：3
> 
> 时间：2012-09-11T15:11:47.857
> 
> 标签：javascript, backbone.js, backbone.js-collections

我必须在同一页面上的 2 个不同位置显示相同的主干模型集合（一次在导航中，一次在主区域），并且我需要保持集合中的模型同步但允许对每个集合进行排序不同。导航始终按字母升序排列，但主内容区域中的排序可由用户配置。最好的方法是什么？我是否应该有 2 个不同的集合和事件绑定来尝试确保它们的模型始终相同（使用添加/删除/重置事件）？我应该只有 1 个集合并根据需要动态更改它的排序顺序吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T16:32:35.820

我通常认为不应该改变集合来表示暂时的重新排序，所以：

*   视图监听通常事件的集合，
*   视图在必须呈现时检索根据需要排序的自定义模型列表。

例如，

```
var C = Backbone.Collection.extend({
    comparator: function (model) {
        return model.get('name');
    },

    toJSON_sorted: function (reversed) {
        var models = this.toJSON();
        return (!reversed) ? models : models.reverse();
    }
});

var V = Backbone.View.extend({
    initialize: function () {
        this.collection.on('reset', this.render, this);
        this.collection.on('change', this.render, this);
        this.collection.on('add', this.render, this);
        this.collection.on('delete', this.render, this);
    }
});
var NavView = V.extend({
    render : function () {
        console.log(this.collection.toJSON());
    }
});
var MainView = V.extend({
    render : function () {
        var data = this.collection.toJSON_sorted(this.reversed);
        console.log(data);
    }
}); 
```

调用这些定义

```
var c=new C();
var v1 = new NavView({collection:c});
var v2 = new MainView({collection:c});
v2.reversed=true;

c.reset([
    {name:'Z'},
    {name:'A'},
    {name:'E'}
]); 
```

以预期的顺序为视图提供模型，并允许您随意更改排序方向。您还可以定制`toJSON_sorted`以处理其他字段的排序。

A Fiddle to play with [http://jsfiddle.net/nikoshr/Yu8y8/](http://jsfiddle.net/nikoshr/Yu8y8/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T15:44:01.863

如果集合包含完全相同的东西，我认为保留 1 个集合并将其用于两个显示是最整洁的。只需在渲染所需的任何可视组件之前调用 sort 函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T16:21:19.520

您所要做的就是更改比较器功能。您的收藏有方法可以做到这一点，但基本思想是

```
var mycollection = new Backbone.Collection();
mycollection.comparator = function(item) { return item.get('blah') } 
```

# jquery - Jquery die() 方法不适用于 IE7 中动态生成的按钮

> ID：12372865
> 
> 赞同：0
> 
> 时间：2012-09-11T15:12:00.780
> 
> 标签：jquery, internet-explorer, dynamic-controls

在我的网页中，我正在动态创建一些按钮，并通过使用**ON**将某些事件与按钮绑定，在某些情况下，我必须禁用此按钮，因为我正在使用 die() 方法，但它似乎不适用于 ie7，它在 Mozilla 和 chrome 上运行良好

```
$('#BtnShow').die('click'); 
```

ie7有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T15:13:36.103

`.die()`现在已弃用，请尝试使用`.off()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T15:15:40.163

使用.`.off`绑定事件时使用`.on`。

使用.`.die`绑定事件时使用`.live`。（注意：两者`.live`和`.die`都已弃用。）

使用`.undelegate`绑定事件时使用`.delegate`

使用.`.unbind`绑定事件时使用`.bind`。

**注意：**使用委托事件时，请确保使用的选择器`.on/.delegate/.live`与中的选择器匹配`.off/.undelegate/.die`

# java - url.openStream() 到 Writer

> ID：12372866
> 
> 赞同：0
> 
> 时间：2012-09-11T15:12:03.870
> 
> 标签：java, encoding, character-encoding, stream, writer

在不丢失编码/字符集的情况下，从 OutputStream（url.openStream()）写入 Writer（可以是 FileWriter 或 Stringwriter）的正确方法是什么？

```
public static String parseURLContentIntoFile(final URL url, final File fileToFill) throws IOException{      
    return parseURLContentIntoOutputWriter(url, new OutputStreamWriter(FileUtils.openOutputStream(fileToFill),"UTF-8"));        
}

public static String parseURLContentIntoString(final URL url) throws IOException{
    final StringWriter output = new StringWriter(); // Or StringBuilderWriter
    parseURLContentIntoOutputWriter(url, output);
    return output.getBuffer().toString();   //Or output.getBuilder().toString()
}

private static String parseURLContentIntoOutputWriter(final URL url, final Writer writer) throws IOException{

    InputStreamReader in = null;
    BufferedWriter out = null;
    try {
        out = new BufferedWriter(writer);
        in = new InputStreamReader(url.openStream(),"UTF-8");
        for(String line : IOUtils.readLines(in)){ //Uses a buffer internally
                      (...VERY LONG parsing...)
          if (!line.isEmpty()) IOUtils.write(line,out); 
        }
        (...Exception handling and stream closing...)
 } 
```

谢谢！

# iphone - 更改分组表视图中单元格之间的颜色

> ID：12372873
> 
> 赞同：1
> 
> 时间：2012-09-11T15:12:34.813
> 
> 标签：iphone, uitableview, grouped-table

我需要知道如何更改 Grouped UITableView 中单元格之间的颜色

注意：UITableView 有一个其他颜色的背景颜色

那么，如何实现以下内容：

![在此处输入图像描述](../Images/66d0ebec703c42ff58f403013cc3125e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T15:19:50.563

*我确实相信正确的方法是为 tableview 设置背景颜色。您可以在 viewDidLoad 方法中执行此操作，以便在视图加载时已设置颜色*

**编辑：**

我建议创建一个 UITableViewCell 的自定义子类，其中背景颜色/图像已经包含在单元格中。然后，您还必须将页眉和页脚设置为具有相同的背景颜色/图像。我相信这将是完成您想要的最简单的方法

# macos - 具有多对多数据的核心数据复选框单元格

> ID：12372874
> 
> 赞同：0
> 
> 时间：2012-09-11T15:12:34.980
> 
> 标签：macos, cocoa, core-data, checkbox, cocoa-bindings

我有一个像这样的核心数据模型（只是一个例子）：

![模型](../Images/10097eb4ad395f7462cfba5195fc1f39.png)

现在我想要一个窗口，用户可以在其中从每种成分中选择饮料的成分。像这样：

![用户界面](../Images/01a3012ac547203db5b371acf813fee9.png)

我怎样才能做到这一点？

谢谢，托马斯·冈泽尔

# java - 爪哇。尝试关闭所有连接的有效方法是什么？

> ID：12372879
> 
> 赞同：3
> 
> 时间：2012-09-11T15:13:01.100
> 
> 标签：java, error-handling, io, try-catch, ioexception

例如，我有处理输入/输出流的方法：

```
 public void doSomethingWithStreams () throws FileNotFoundException, IOException
            {
             OutputStream out1, out2;            
             InputStream in1, in2;
try{                     
            //do something with Streams: read, write, process, etc.
            }
finally{
        //There I try to close connections
        out1.close();
        out2.close();
        in1.close();
        in2.close();
        }    
            } 
```

方法可以抛出 IOException 并且它是有效的行为。但是如果我在这一行有异常：

```
 out1.close(); 
```

其他三个 Stream 将**不会**关闭。您可以推荐什么解决方案？如何？**到底**有多近？

我只有一个：

```
 public void doSomethingWithStreams () throws FileNotFoundException, IOException
            {
             OutputStream out1, out2;            
             InputStream in1, in2;
         try{            
            //do something with Streams: read, write, process, etc.
            }
finally{
        //There I try to close connections

try{out1.close();}
  finally{
     try{out2.close();}
         finally{
            try{in1.close();}
                finally{
        in2.close();}
}}

}

            } 
```

如您所见 - 我的方法是使用多个 try-finally 块。

你认为这是个好主意吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T15:14:56.967

如果三个流不相互依赖，则每个流的 try/catch 可能看起来更干净。

就像是：

```
try{
 out1.close();
}catch(Exception e)
{
....
}finally 
```

{.... }

```
try{
        out2.close();
}catch(Exception e)
{
.....
}finally 
```

{.... }

编辑：正如 iccthedral 所建议的，如果您使用 Java7，您可以使用[try-with-resource](http://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html)块。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T15:17:12.380

可能最好的方法是：

```
try (
     OutputStream out1 = ...;
     OutputStream out2 = ...;
     InputStream in1 = ...;
     InputStream in2 = ...;
) {
     ...
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-11T15:19:02.017

也许清理它的最好方法是制作这样的方法：

```
public static void close(Closeable c) {
   if (c == null) return; 
   try {
       c.close();
   } catch (IOException e) {
       // Do anything or nothing
   }
} 
```

这可以替换您的 .close() 调用，并且如果它们失败也不会抛出异常。

# opengl - glReadPixels() 返回不准确的值

> ID：12372880
> 
> 赞同：0
> 
> 时间：2012-09-11T15:13:01.603
> 
> 标签：opengl, rgb, glut, glreadpixels

我正在尝试实现洪水填充算法。但是 glReadPixels() 返回的像素的浮点 RGB 值与我设置的实际值略有不同，导致算法失败。为什么会这样？

输出返回的 RGB 值进行检查。

```
#include<iostream>
#include<GL/glut.h>
using namespace std;

float boundaryColor[3]={0,0,0}, interiorColor[3]={0,0,0.5}, fillColor[3]={1,0,0};
float readPixel[3];

void init(void) {
    glClearColor(0,0,0.5,0);
    glMatrixMode(GL_PROJECTION);
    gluOrtho2D(0,500,0,500);
}

void setPixel(int x,int y) {        
        glColor3fv(fillColor);
        glBegin(GL_POINTS); 
             glVertex2f(x,y); 
        glEnd();
}

void getPixel(int x, int y, float *color) {
    glReadPixels(x,y,1,1,GL_RGB,GL_FLOAT,color);
}

void floodFill(int x,int y) {
    getPixel(x,y,readPixel);

    //outputting values here to check
    cout<<readPixel[0]<<endl;
    cout<<readPixel[1]<<endl;
    cout<<readPixel[2]<<endl;

    if( readPixel[0]==interiorColor[0] && readPixel[1]==interiorColor[1] && readPixel[2]==interiorColor[2] ) {
        setPixel(x,y);
        floodFill(x+1,y);
        floodFill(x,y+1);
        floodFill(x-1,y);
        floodFill(x,y-1);
    }
}

void display() {
    glClear(GL_COLOR_BUFFER_BIT);

    glColor3fv(boundaryColor);
    glLineWidth(3); 

    glBegin(GL_LINE_STRIP);
        glVertex2i(150,150);        
        glVertex2i(150,350);        
        glVertex2i(350,350);        
        glVertex2i(350,150);
        glVertex2i(150,150);
    glEnd();

    floodFill(200,200);

    glFlush();
}

int main(int argc,char** argv) {
    glutInit(&argc,argv);
    glutInitDisplayMode(GLUT_SINGLE | GLUT_RGB);
    glutInitWindowPosition(100,100);
    glutInitWindowSize(500,500);
    glutCreateWindow("Flood fill");

    init();
    glutDisplayFunc(display);
    glutMainLoop();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T15:37:09.263

> 我希望颜色被读取为 0.0、0.0、0.5。

为什么？您似乎没有渲染到浮点帧缓冲区。这意味着您可能会渲染到`GL_RGBA8`存储标准化整数的缓冲区（这意味着它将 [0, 255] 范围映射到 [0, 1] 浮点值）。嗯，一个 8 位归一化整数*不能*准确地存储 0.5。它可以得到的最接近的是 127/255，即 0.498。

If you wanted "accurate values", then you should be rendering to a render target that will *give* you accurate values. IE: not the screen.

# php - PHP文件崩溃服务器

> ID：12372894
> 
> 赞同：-2
> 
> 时间：2012-09-11T15:13:45.900
> 
> 标签：php, wordpress

我正在尝试制作一个 PayPal IPN 文件，但响应不会插入到数据库中。经过一点调试，我发现我的函数有一个错误，但我不知道是哪一个。

似乎下面的代码是错误的，但我不知道为什么。对我来说看起来不错。难道我做错了什么？

```
<?php
function check_price($price, $id) {
  $valid_price = false;

  $sql = $wpdb->get_results("SELECT * FROM `webc_products` WHERE id = '$id'");
  foreach ( $sql as $prod ) {
    $num = (float)$prod->amount;
    if($num == $price){
      $valid_price = true;
    }   
  }

  return $valid_price;
}

$a = check_price(0.01, 1);
?> 
```

此外，我尝试了函数之外的代码，并且它以某种方式工作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-11T15:16:22.020

您的函数正在访问该`$wpdb`对象而实际上没有访问它（变量范围）。要么将其作为参数传递给您的函数（我建议这样做），要么在您的函数中将其声明为全局。

# css - IE8 中的不透明度不起作用 - CSS

> ID：12372896
> 
> 赞同：0
> 
> 时间：2012-09-11T15:14:05.250
> 
> 标签：css, internet-explorer, internet-explorer-8, filter, opacity

我在为 IE 8 添加不透明度时遇到了一些问题（我也希望它在 IE7 和 IE9 中工作，但我刚刚在 IE8 上对其进行了测试）。

我的CSS是这样的：

```
label{
    color: #333;
    text-decoration: none;
    border: solid 1px #bebebe;
    width: 138px;
    padding: 5px;
    text-align: center;
    -webkit-box-shadow: 0 8px 6px -6px black;
    -moz-box-shadow: 0 8px 6px -6px #333;
    box-shadow: 0 8px 6px -6px #333;
    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;
    border-radius: 5px;
    background: #f2f2f2;
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#f2f2f2', endColorstr='#bdbdbd');
    background: -webkit-gradient(linear, left top, left bottom, from(#f2f2f2), to(#bdbdbd));
    background: -moz-linear-gradient(top,  #f2f2f2,  #bdbdbd); 
    display: inline-block;
    margin-bottom: 10px;
    position: relative;
    outline: none;
} 
```

所以我的所有标签在所有资源管理器中都必须相同（这没有问题），但我想为其中一些标签添加不透明度。我正在使用：

```
.aclass{
    opacity:0.4;
    filter:alpha(opacity=40);
} 
```

但它不适用于 IE。我在这里阅读了一些文章，例如： [Opacity CSS not working in IE8](https://stackoverflow.com/questions/1948176/opacity-css-not-working-in-ie8)，[opacity in IE8 not working](https://stackoverflow.com/questions/10296204/opacity-in-ie8-not-working) 等等，但我还没有找到解决方案。我试着添加这个：

```
.aclass{
    -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(opacity=40)";
    filter: progid:DXImageTransform.Microsoft.Alpha(Opacity=40);
    opacity:0.4;
} 
```

还添加“缩放：1；” 到上一个块或“显示：块；” 但仍然无法正常工作。我还没有找到解决方案，所以如果有人可以帮助我，我将不胜感激。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T16:21:33.360

在您的梯度过滤器中，您可以定义 #AARRGGBB 而 AA == alpha 值。来自[MSDN](http://msdn.microsoft.com/en-us/library/ms532930%28v=vs.85%29.aspx)。这样做可能比为渐变和 alpha 添加独特的过滤器更幸运。

# email - 强制黑莓中正确的字体大小以在 HTML 电子邮件中呈现？

> ID：12372898
> 
> 赞同：1
> 
> 时间：2012-09-11T15:14:07.853
> 
> 标签：email, mobile, blackberry, html-email, font-size

我正在处理需要在 Blackberry OS 上良好呈现的 html 电子邮件。文本的格式在黑莓中不断被放大，见截图。

黑莓 ------------ 正确 ------------

![黑莓截图](../Images/7dfd8c8ccfdff28e6e1a7a1d27a26750.png) ![正确的截图](../Images/1f7252399dc19b08a01b9bfd051edcbb.png)

这是我当前的代码 -

```
<table cellpadding="0" cellspacing="0" border="0" width="100%" align="center" style="background-color:#000000 !important;padding:0;" bgcolor="#000000">
 <tr>
  <td style="color:#ffffff;font-size:12px;background-color:#000000;" bgcolor="#000000" valign="top">
    <span style="font-weight:bold;font-size:22px;mso-line-height-rule:exactly; line-height:24px;">
       Aliquam Commodo Velit vel Ipsum
    </span>
    <span style="mso-line-height-rule:exactly; line-height:13px;">
       <br>
    </span>
    Duis consectetur velit vel ipsum interdum anella onsequat lacus mattis.        
  </td>
 </tr>
</table> 
```

任何想法将不胜感激。这正在破坏我的大脑。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T00:28:19.580

这为我做到了：

```
@media (max-width: 600px) {
      * { -webkit-text-size-adjust:none; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T09:01:54.303

很明显，`font-size:22px`覆盖了`font-size:12px`给定的 in `td`。你可以做的是，而不是跨度将你`td`分成两个 td，让他们有不同的字体大小的 html 电子邮件`td`从而不是`span`标签中获取字体。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T15:04:10.757

尝试将 min-width='600px' 添加到表格中，因为某些设备不喜欢以 % 为单位的宽度（例如 Androids）。另外，请注意`font-size=12px`应用于两者`<span>`就像应用于`<td>`.

# python - pandas.Series/DataFrame.fillna 限制中的错误？

> ID：12372899
> 
> 赞同：3
> 
> 时间：2012-09-11T15:14:09.423
> 
> 标签：python, pandas

我一直在尝试使用 and 关键字填充 DataFrame`fillna`和`value`Series `limit`。`limit`不包括 时受到尊重，`value`但一旦包括`value`限制则不再受到尊重。这是一个使用 DataFrame 的示例：

```
import pandas as pd
import numpy as np

df = pd.DataFrame(np.random.randn(5, 3), index=['a', 'c', 'e', 'f', 'h'],columns=['one', 'two','three'])
df2 = df.reindex(['a', 'b', 'c', 'd', 'e', 'f', 'g','h','i', 'j','k'])

In [7]: df2
Out[7]:
        one       two     three
a -0.942695  0.465658 -0.966754
b       NaN       NaN       NaN
c -1.208036  0.287274 -1.116466
d       NaN       NaN       NaN
e  0.041212  0.065966 -1.895570
f  0.869104 -3.481962 -0.280699
g       NaN       NaN       NaN
h -1.151732 -0.310296 -1.701202
i       NaN       NaN       NaN
j       NaN       NaN       NaN
k       NaN       NaN       NaN

In [8]: df2.fillna(method='pad', limit=1)
Out[8]:
        one       two     three
a -0.942695  0.465658 -0.966754
b -0.942695  0.465658 -0.966754
c -1.208036  0.287274 -1.116466
d -1.208036  0.287274 -1.116466
e  0.041212  0.065966 -1.895570
f  0.869104 -3.481962 -0.280699
g  0.869104 -3.481962 -0.280699
h -1.151732 -0.310296 -1.701202
i -1.151732 -0.310296 -1.701202
j       NaN       NaN       NaN
k       NaN       NaN       NaN

In [9]: df2.fillna(value=999,method='pad', limit=1)
Out[9]:
          one         two       three
a   -0.942695    0.465658   -0.966754
b  999.000000  999.000000  999.000000
c   -1.208036    0.287274   -1.116466
d  999.000000  999.000000  999.000000
e    0.041212    0.065966   -1.895570
f    0.869104   -3.481962   -0.280699
g  999.000000  999.000000  999.000000
h   -1.151732   -0.310296   -1.701202
i  999.000000  999.000000  999.000000
j  999.000000  999.000000  999.000000
k  999.000000  999.000000  999.000000 
```

我在这里遗漏了什么，还是这是一个错误？

干杯

编辑：在 python 2.7 上使用 pandas 0.8.1 和 numpy 1.6.1

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T15:50:04.710

这实际上是设计使然。`limit`关键字被设计为与关键字一起使用，因为`method`您必须指定排序（即，向前填充或回填），而您没有`value`.

# ruby-on-rails - Ruby 有什么独特之处，以至于 Rails 选择它作为开发语言？

> ID：12372911
> 
> 赞同：0
> 
> 时间：2012-09-11T15:15:14.783
> 
> 标签：ruby-on-rails, ruby, web-applications, paradigms

我对 Ruby 和 Rails 很陌生，所以如果这是一个愚蠢的问题，请多多包涵。

Ruby 采用的想法并不是那么新颖和具有革命性。函数式编程、动态类型和元编程，它们也存在于其他语言中。

那么为什么 Rails 选择了 Ruby，而不选择 Python、Scheme、JavaScript 或任何其他语言？

Ruby 的哪些特性帮助 Rails 蓬勃发展？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T15:46:00.787

[DHH](http://www.confreaks.com/videos/431-rubyconf2010-keynote-why-ruby)的这个主题演讲有点相关。

这是[对 Jason Fried 的采访](http://www.oreillynet.com/network/2005/03/10/basecamp.html)，触及了这个问题。

> **Jason**：Ruby on Rails 是我们从 Basecamp 中提取的开源 Web 应用程序框架。当我们构建 Basecamp 时，我们并不知道我们正在同时构建 Rails，但事情就是这样发生的。大本营先来；Rails 诞生于 Basecamp。Basecamp 是神鸡，Rails 是鸡蛋。
> 
> 起初我对使用 Ruby 有一些自然的犹豫（“#@!* 是什么 Ruby？”“为什么我们不直接使用 PHP——它以前很好用？”），但是第一工程师 David Heinemeier Hansson在 Basecamp 项目上，我很有说服力地做了这个案例，我买了它。我对结果感到很兴奋。

我认为很明显，David 对在他的项目中使用 Ruby 的强烈偏好是关键。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T15:56:39.367

这是一个类似的问题，有很多讨论：[https ://softwareengineering.stackexchange.com/questions/99192/why-was-rails-written-in-ruby](https://softwareengineering.stackexchange.com/questions/99192/why-was-rails-written-in-ruby)

此外，请查看 David Heinemeier Hansson 的播客，其中谈到了他对 RoR 的灵感：http: [//thisdeveloperslife.com/post/1-0-5-homerun](http://thisdeveloperslife.com/post/1-0-5-homerun)

# ruby - ThinkingSphinx 在 RSpec 中不起作用

> ID：12372912
> 
> 赞同：1
> 
> 时间：2012-09-11T15:15:15.123
> 
> 标签：ruby, ruby-on-rails-3, rspec, thinking-sphinx

我读过帖子说这是由于事务性固定装置，但看起来我们没有使用这些固定装置。我读过其他帖子，这些帖子建议我在每次测试运行之前进行一些时髦的停止、重新启动和重新索引。这似乎没有帮助。

`ThinkingSphinx`在应用程序中运行得很好，但在测试中它的行为非常奇怪。在我的规范中创建了几个`Organization`模型后，我运行了 sphinx 搜索。它有我期待的两条记录，但也有很多零。这很烦人，但我添加了一个`:retry_stale => true`并且那些消失了，所以我对第一个查询很满意：

```
(rdb:1) p Organization.search '', :retry_stale => true
[#<Organization id: 1, ein: nil, name: "Allina", created_at: "2012-09-11 15:03:04", updated_at: "2012-09-11 15:03:04", parent_id: nil, main_phone: "7867685187x894", fax: nil, email: nil, url: nil, crm_id: 1, target_market: false, notes: nil, form990_notes: nil, mec_revenue: 750000.0, legacy_id: nil, teaching_program_type_id: nil, sponsorship_type_id: nil, is_member_council_teaching_hospitals: nil, has_teaching_program: nil, is_major_academic_medical_center: nil, does_participate_in_survey: nil, status: "modified", net_revenue: nil, gross_revenue: nil, source_name: nil, source_id: nil, import_concat_key: nil, bigtime_id: nil, is_non_hc: nil, is_client: nil, contact_record_id: nil, form990_legacy_id: nil, number_of_beds: nil, tax_exempt_status: nil, delta: true>, #<Organization id: 2, ein: nil, name: "HealthPartners", created_at: "2012-09-11 15:03:04", updated_at: "2012-09-11 15:03:04", parent_id: nil, main_phone: "3407862693x0935", fax: nil, email: nil, url: nil, crm_id: 1, target_market: false, notes: nil, form990_notes: nil, mec_revenue: nil, legacy_id: nil, teaching_program_type_id: nil, sponsorship_type_id: nil, is_member_council_teaching_hospitals: nil, has_teaching_program: nil, is_major_academic_medical_center: nil, does_participate_in_survey: nil, status: "modified", net_revenue: nil, gross_revenue: nil, source_name: nil, source_id: nil, import_concat_key: nil, bigtime_id: nil, is_non_hc: nil, is_client: nil, contact_record_id: nil, form990_legacy_id: nil, number_of_beds: nil, tax_exempt_status: nil, delta: true>] 
```

但是现在，如果我尝试按名称搜索，这在我的模型中最明确地被索引，我没有得到我的记录。

```
(rdb:1) p Organization.search 'Allina', :retry_stale => true
[] 
```

我试图修改选项无济于事，所以我想我只是尝试在星模式下搜索单个字母。结果令人不安。

```
(rdb:1) p Organization.search 'C', :star => true, :retry_stale => true
[#<Organization id: 1, ein: nil, name: "Allina", created_at: "2012-09-11 15:03:04", updated_at: "2012-09-11 15:03:04", parent_id: nil, main_phone: "7867685187x894", fax: nil, email: nil, url: nil, crm_id: 1, target_market: false, notes: nil, form990_notes: nil, mec_revenue: 750000.0, legacy_id: nil, teaching_program_type_id: nil, sponsorship_type_id: nil, is_member_council_teaching_hospitals: nil, has_teaching_program: nil, is_major_academic_medical_center: nil, does_participate_in_survey: nil, status: "modified", net_revenue: nil, gross_revenue: nil, source_name: nil, source_id: nil, import_concat_key: nil, bigtime_id: nil, is_non_hc: nil, is_client: nil, contact_record_id: nil, form990_legacy_id: nil, number_of_beds: nil, tax_exempt_status: nil, delta: true>] 
```

该`name`字段中显然没有字母“C”。我的模型还索引了`status`设置为 的字段`modified`，并索引了关联的`state`字段。`address`该值是“CA”，所以我认为*可能* `ThinkingSphinx`是用该索引找到该记录。所以我想我会尝试搜索“CA”，然后猜猜发生了什么：

```
(rdb:1) p Organization.search 'CA', :star => true, :retry_stale => true
[] 
```

没有！这种古怪的行为是怎么回事？好的，你们可能希望看到一些配置和规范助手以及一些索引定义：

# 配置/狮身人面像.yml

```
development:
  enable_star: 1
  min_infix_len: 1

test:
  enable_star: 1
  min_infix_len: 1 
```

# 规范/spec_helper.rb

```
Spork.prefork do
  require 'headless'

  headless = Headless.new(:display => 99)
  headless.start
  at_exit do
    headless.destroy
  end

  ENV["RAILS_ENV"] ||= 'test'
  require File.expand_path("../../config/environment", __FILE__)
  require 'rspec/rails'
  require 'capybara/rspec'
  require 'database_cleaner'

  #require 'rspec/autorun'
  Dir[Rails.root.join("spec/support/**/*.rb")].each {|f| require f}
  RSpec.configure do |config|
    config.use_transactional_fixtures = false
    config.treat_symbols_as_metadata_keys_with_true_values = true
    config.infer_base_class_for_anonymous_controllers = false

    config.include Devise::TestHelpers, :type => :controller
    config.extend ControllerMacros, :type => :controller
    config.include Warden::Test::Helpers, :type => :request
    config.include FactoryGirl::Syntax::Methods

    config.before(:suite) do
      DatabaseCleaner.strategy = :truncation, {
        :except => %w(sponsorship_types teaching_program_types title_groups positions tax_exempt_organization_types)}
    end

    config.before(:each) do
      DatabaseCleaner.start
    end

    config.after(:each) do
      DatabaseCleaner.clean
    end
  end
end

Spork.each_run do
end 
```

# 应用程序/模型/组织.rb

```
 define_index do
    indexes :name, :sortable => true
    indexes address(:state), :as => :state
    indexes status

    set_property :delta => true
  end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T06:23:43.640

我们在测试单元中编写了 Thinking Spec 测试。它工作得很好。在您的 spec/spec_helper.rb 中包含以下内容

```
require 'thinking_sphinx/test'
ThinkingSphinx::Test.init 
```

此外，在每个测试中，在设置中有 ThinkingSphinx::Test.start，在拆解中有 ThinkingSphinx::Test.stop

# sql - 将 ANY 运算符与字符串函数一起使用

> ID：12372914
> 
> 赞同：0
> 
> 时间：2012-09-11T15:15:17.110
> 
> 标签：sql, sql-server, tsql

我想建立一个这样的查询：

```
SELECT * FROM T1 WHERE Charindex(ANY(SELECT City FROM Cities),T1ADDRESS)>0 
```

据我了解，`ANY`运算符不能保留为 SQL 函数参数。那么，替代方案是什么？

假设我想编写一个根据一个输入参数*Address*返回 1 或 0 的 UDF 。如何在没有`for`循环运算符且不`SELECT City FROM Cities`按索引访问数组的情况下执行此操作，因为它可以在过程语言中轻松完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T16:00:51.110

你试过一个`JOIN`吗？

```
SELECT * 
FROM T1
INNER JOIN CITIES
    ON T1ADDRESS LIKE '%' + City + '%' 
```

但是不确定性能...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T15:20:14.357

你可能想做这样的事情？

```
SELECT * FROM T1 WHERE Charindex in (SELECT '%'+City+'%' FROM Cities) 
```

它解决了任何问题，但不是您要求的所有问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T15:25:07.020

怎么样，

```
SELECT 
              * 
    FROM 
            T1 
    WHERE
        EXISTS
        (
            SELECT City FROM Cities WHERE T1.T1ADDRESS LIKE '%' + City + '%' 
        ) 
```

# ruby-on-rails - Rails 上传（载波）非常慢

> ID：12372915
> 
> 赞同：1
> 
> 时间：2012-09-11T15:15:22.800
> 
> 标签：ruby-on-rails, ruby-on-rails-3

上传一个 1MB 的文件需要 3 分钟以上。（文件上传到 S3，我在雾 1.1.1 上使用 CarrierWave 0.5.8）。

想法？

# javascript - javascript 问题正文样式

> ID：12372916
> 
> 赞同：0
> 
> 时间：2012-09-11T15:15:23.493
> 
> 标签：javascript

这是我的代码，知道为什么它不起作用吗？

```
<script type="text/javascript">

windows.onload = function() {

function(){
    document.body.style.backgroundColor = ('red');
}
};

</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T15:16:13.627

没有 jquery，你可以这样做：

```
window.onload = function(){
    document.body.style.backgroundColor = 'red';
}; 
```

在您的代码中，您在提供给 onload 的回调中声明了一个函数，但您没有调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T15:19:58.143

您正在声明一个匿名函数，但从未执行它。另外，`windows.onload`可能不是你的意思。

你期待会发生什么？

如果您在文档准备就绪时尝试更改背景颜色：

```
$(document).ready(function () {
    $('body').css('backgroundColor', 'red');
});​ 
```

[http://jsfiddle.net/jbabey/8hQyu/](http://jsfiddle.net/jbabey/8hQyu/)

在没有 jQuery 的情况下模拟`document.ready`回调并不是一件容易的事，请参阅[这个问题](https://stackoverflow.com/questions/799981/document-ready-equivalent-without-jquery)。

就背景颜色而言，这很好用：

```
document.body.style.backgroundColor = ('red'); 
```

# c# - 如何将quickdic字典加载到C#中

> ID：12372917
> 
> 赞同：0
> 
> 时间：2012-09-11T15:15:30.163
> 
> 标签：c#, database, dictionary

我已经从[http://code.google.com/p/quickdic-dictionary/](http://code.google.com/p/quickdic-dictionary/)下载了一个字典文件， 但文件扩展名是 .quickdic 并且不是纯文本。

如何将 quickdic 词典 (.quickdic) 加载到 c# 中以进行简单的单词查询？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T16:45:26.730

我浏览了 git 代码，发现了一些问题。

首先，在 DictionaryActivity.java 文件中，onCreate() 中有以下内容：

```
 final String name = application.getDictionaryName(dictFile.getName());
    this.setTitle("QuickDic: " + name);
    dictRaf = new RandomAccessFile(dictFile, "r");
    dictionary = new Dictionary(dictRaf); 
```

该 Dictionary Class 不是 Java 的内置类，但根据导入位于此处：

```
 import com.hughes.android.dictionary.engine.Dictionary; 
```

当我看那里时，它显示了一个以 RandomAccessFile 作为参数的 Dictionary 的构造函数。这是源代码：

```
public Dictionary(final RandomAccessFile raf) throws IOException {
dictFileVersion = raf.readInt();
if (dictFileVersion < 0 || dictFileVersion > CURRENT_DICT_VERSION) {
  throw new IOException("Invalid dictionary version: " + dictFileVersion);
}
creationMillis = raf.readLong();
dictInfo = raf.readUTF();

// Load the sources, then seek past them, because reading them later disrupts the offset.
try {
  final RAFList<EntrySource> rafSources = RAFList.create(raf, new EntrySource.Serializer(this), raf.getFilePointer());
  sources = new ArrayList<EntrySource>(rafSources);
  raf.seek(rafSources.getEndOffset());

  pairEntries = CachingList.create(RAFList.create(raf, new PairEntry.Serializer(this), raf.getFilePointer()), CACHE_SIZE);
  textEntries = CachingList.create(RAFList.create(raf, new TextEntry.Serializer(this), raf.getFilePointer()), CACHE_SIZE);
  if (dictFileVersion >= 5) {
    htmlEntries = CachingList.create(RAFList.create(raf, new HtmlEntry.Serializer(this), raf.getFilePointer()), CACHE_SIZE);
  } else {
    htmlEntries = Collections.emptyList();
  }
  indices = CachingList.createFullyCached(RAFList.create(raf, indexSerializer, raf.getFilePointer()));
} catch (RuntimeException e) {
  final IOException ioe = new IOException("RuntimeException loading dictionary");
  ioe.initCause(e);
  throw ioe;
}
final String end = raf.readUTF(); 
if (!end.equals(END_OF_DICTIONARY)) {
  throw new IOException("Dictionary seems corrupt: " + end);
} 
```

所以，无论如何，这就是他的java代码读取文件的方式。

希望这可以帮助您在 C# 中进行模拟。

从这里你可能想看看他是如何序列化 EntrySource、PairEntry、TextEntry 和 HtmlEntry 以及 indexSerializer 的。

接下来看看 RAFList.create() 是如何工作的。

然后看看该结果如何被纳入使用 CachingList.create() 创建一个 CachingList

免责声明：我不确定 C# 中的内置序列化程序是否使用与 Java 相同的格式，因此您可能也需要模拟它:)

# php - 从 Magento 的自定义选项中删除 htmlescape。哪个文件显示自定义选项？

> ID：12372921
> 
> 赞同：1
> 
> 时间：2012-09-11T15:15:39.043
> 
> 标签：php, html, magento, e-commerce

我需要将 HTML 放入我的 Magento 商店中每个产品的自定义选项标签中，但默认情况下，将 HTML 放入自定义选项界面时，Magento 不会解析 HTML。我假设在显示自定义选项的文件中有类似“$this->htmlEscape()”的内容，我想将其删除，以便将 HTML 添加到我的选项标签中。

我很难在 Magento 中找到显示自定义选项的文件，以便我可以删除此行。有没有人可以提供任何智慧？

谢谢你，我真的很感谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T21:41:39.760

查看位于 /catalog/product/view/options/type/ 中的模板文件

您将`htmlEscape()`在第一个`<dt>`包含选项标题的内部找到。这是我做过的一个测试：

*   选项输入类型：“字段”

*   选项标题：

    `<div class="block block-cart"><div class="block-title"><strong><span>My Stylish Option Title</span></strong></div></div>`

*   更新的模板文件：catalog/product/view/options/type/ **text** .phtml

渲染：

![时尚的选项标题](../Images/2c8e5323ceec402132c5717974d51b0d.png)

# sharepoint - 如果已发布->接受，SharePoint 2010 发布网站内容会消失

> ID：12372923
> 
> 赞同：0
> 
> 时间：2012-09-11T15:15:52.467
> 
> 标签：sharepoint, publishing-site

如果网站处于已发布和接受状态，我们发布网站的主要内容会在一秒钟后消失。导航和标题是可见的。结果可与此页面上描述的问题进行比较：

[http://www.experts-exchange.com/OS/Microsoft_Operating_Systems/Server/MS-SharePoint/Q_27747131.html](http://www.experts-exchange.com/OS/Microsoft_Operating_Systems/Server/MS-SharePoint/Q_27747131.html)

当您移动鼠标时，内容会立即出现。该问题仅出现在 Internet Explorer 中。如果您查看该站点，则内容从一开始就可见。

我检查了一些 javascript，但一切似乎都很好。知道这种奇怪的行为是从哪里来的吗？

谢谢帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T16:39:51.073

我们有一个非常相似的情况......使用 Sharepoint 2010 服务器但使用 MS Internet Explorer 6 (IE6) 作为浏览器，在网络上进行快速研究我发现以下博客有类似的讨论[http://go4answers.webhost4life.com /示例/ie6-sharepoint-2010-107662.aspx](http://go4answers.webhost4life.com/Example/ie6-sharepoint-2010-107662.aspx)

解决该问题的是博客下方的答案 18：“修复：强制 #s4-bodyContainer 让 haslayout 修复所有内容。在我的情况下，**添加 #s4-bodyContainer { zoom: 1 }**或 #s4-bodyContainer { width: 100%; }（对于有效的 CSS）一举解决了空白显示问题和弹出菜单定位问题。”

希望这可以帮助。

# php - 使用 Zend Framework 2 将验证器分配给控制器中的表单

> ID：12372925
> 
> 赞同：2
> 
> 时间：2012-09-11T15:15:56.553
> 
> 标签：php, validation, zend-framework2

我有一个关于 Zend Framework 2 的问题，有人可以提供一个示例代码或链接，说明我如何将验证器类附加到我的控制器中的表单，以便它显示来自验证器的错误消息。Zend 框架开发人员建议我使用它

```
$form->getInputFilter()->get('entityName')->getValidatorChain()->add($validator); 
```

当我在控制器中添加此行时，当我尝试添加新实体时会抛出此错误

```
Fatal error: Call to undefined method Zend\Validator\ValidatorChain::add() in C:\Album\src\Album\Controller\AlbumController.php 
```

如果熟悉 Zend Framework 的人可以帮助我解决这个问题。我纯粹是在寻找将验证器添加到控制器中的表单的方法。任何建议，将不胜感激。

PS 我的 AlbumController 代码可以在[这里找到](https://stackoverflow.com/questions/12368939/zend-framework-2-doctrine-2-error-message/12369236#12369236)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T15:19:54.467

对不起，实际上`addValidator($validator)`，不仅仅是`add($validator)`。

但是，如果您查看源代码，您可能已经看到了这一点。

另外，我认为没有必要为此创建一个新问题。我也会在你的最新问题中回答这个问题。

// 编辑：哎呀，刚刚看到您在最近的问题中提出了问题，对此感到抱歉。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T15:24:16.493

不需要任何参考文档的最简单答案是了解错误消息告诉您的内容。在这种情况下`add()`，ValidatorChain 类中不存在该方法。所以，在你的编辑器中打开那个类。如果您使用具有良好代码自省功能的方法，您可以进入任何公共方法并键入`$this->`并点击自动完成快捷方式（通常是 ctrl + 空格键）。这应该为您提供可用的方法类别。浏览以合理名称开头的方法，以了解您正在尝试执行的操作，例如 add* ，您会偶然发现答案：`addValidator()`

我想将此作为评论留下，但我开始有点啰嗦。

# iphone - iOS - 点、像素和打印

> ID：12372928
> 
> 赞同：1
> 
> 时间：2012-09-11T15:16:19.477
> 
> 标签：iphone, ios, ipad

我正在创建一个要使用 iOS 打印的 UIImage。打印类型将是

```
printInfo.outputType = UIPrintInfoOutputGeneral; 
```

或者换句话说，使用普通纸。

据我所知，iOS 将以 72dpi 打印。所以，如果我想在纸上打印一个 2x3 英寸大小的 UIImage，我需要创建这个 144 x 216 点的图像，但是这个 UIImage 的像素是多少？或者换句话说，图像应该有什么尺寸？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T17:11:10.600

在我看来，72dpi 实际上是说 72 像素。所以你的图像尺寸 144 x 216 实际上是你想要打印的尺寸。UIImageView 以点而不是像素来衡量的唯一原因是因为屏幕分辨率不同。初代 iPhone 的屏幕尺寸与 4s 相同，但 4s 的屏幕中的像素要多得多。Apple 使用积分，以便更轻松地为所有设备编程。看看这个链接： [http](http://www.scantips.com/basics1a.html) ://www.scantips.com/basics1a.html我刚刚通读了一遍，希望它能回答你的问题。如果让您更加困惑，我深表歉意，我只是想提供帮助！:)

# iphone - 从 NSMutableArray 滚动图像

> ID：12372937
> 
> 赞同：1
> 
> 时间：2012-09-11T15:16:52.780
> 
> 标签：iphone, ios, xcode, animation, uiimageview

我在我的博客应用程序中解析 XML。当我解析它时，我创建了一个名为 entry 的对象，具有 Title、Article、Link、Content 和 Image 的属性。然后我有一个称为条目的可变数组，在解析完成后，我将对象条目添加到条目中。这样，要在表格视图中获取某篇文章的标题，我可以调用

```
 RSSEntry *entry = [_Entries objectAtIndex:indexPath.row];
 NSString *title = entry.Title; 
```

我想做的是在 tableview 上方有一个 UIImageView，并将其设置为滚动数组中的所有不同 UIImage，但我不确定如何实现这一点。我知道 animationImages 属性，但不确定在这一切中将什么设置为 NSArray，因为我使用带有属性的可变数组。任何建议都会有很大帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T15:26:23.710

我希望你知道如何将 UIImageView 放在 xob/storyboard 中的 tableview 上方。比我不确定你想对图像数组做什么，但如果这满足你的需要，那么它可以是一个滑动识别器，然后滑动图像

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.

    UISwipeGestureRecognizer* recognizerLeft = [[UISwipeGestureRecognizer alloc]initWithTarget:self action:@selector(swipeLeft)];

    recognizerLeft.direction =UISwipeGestureRecognizerDirectionLeft;
    recognizerLeft.numberOfTouchesRequired =1;

    [self.view addGestureRecognizer:recognizerLeft];
    [recognizerLeft release];

    UISwipeGestureRecognizer* recognizerRight = [[UISwipeGestureRecognizer alloc]initWithTarget:self action:@selector(swipeRight)];

    recognizerRight.direction =UISwipeGestureRecognizerDirectionRight;
    recognizerRight.numberOfTouchesRequired =1;

    [self.view addGestureRecognizer:recognizerRight];    
    [recognizerRight release];

}

- (IBAction)swipeLeft{
    //NSLog(@"Swipe left");
    if(pager.currentPage < pager.numberOfPages - 1){
        pager.currentPage = (pager.currentPage + 1 );
        [self pagerValueChanged];
    }

}

- (IBAction)pagerValueChanged 
{
    NSData* imgData = [images objectAtIndex:pager.currentPage];
    UIImage* img = [[UIImage alloc]initWithData:imgData];
    imageView.image = img;

    //NSLog(@"img width: %f, img height: %f", img.size.width, img.size.height);

    [img release];
} 
```

我的代码中也有分页控件和其他控件，但您可能不需要这些

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T15:26:26.287

有两种选择：

a) 通过迭代`_Entries`设置`animationImages`数组值来收集单独数组中的所有图像；

b) 准备您自己的视图，在构造函数处初始化计时器，在 处`[NSTimer scheduledTimerWithTimeInterval:target:selector:userInfo:repeats:]`更改显示的图像`selector`。要制作流畅的动画，您可以使用两个 imageView 子视图设置**动画**显示的 imageView alpha 从 1 到 0，下一个 imageView alpha 从 0 到 1。作为数据源，您可以使用`RSSEntry*`从那里获取图像的数组，并使用已知的 keypath。

第一个选项相当容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T17:51:50.930

这很容易使用数组枚举。以下代码将采用您已经配置的滚动视图，并为数组中的所有对象添加图像视图。它还将根据数组的计数动态调整滚动视图的内容大小。

```
[myMutableArray enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop){
    UIImageView *myImageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:[myMutableArray objectAtIndex:idx]]];
    [myImageView setFrame:CGRectMake(myScrollView.frame.size.width * idx, myScrollView.frame.origin.y, myScrollView.frame.size.width, myScrollView.frame.size.height)];
    [myScrollView addSubview:myImageView];
    [myScrollView setContentSize:CGSizeMake((myScrollView.frame.size.width * idx) + myScrollView.frame.size.width, myScrollView.frame.size.height)];
}]; 
```

# iphone - 自定义 MKAnnotation

> ID：12372946
> 
> 赞同：-1
> 
> 时间：2012-09-11T15:17:30.583
> 
> 标签：iphone, ios, mkannotation

我在左边有图像注释，在右边有标题、描述和按钮，现在我想创建如下注释，我该怎么做？我将不胜感激

[http://postimage.org/image/4s61pnwcf/](http://postimage.org/image/4s61pnwcf/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T15:27:07.313

标准标注固定为：左侧的图像、标题、副标题和右侧的按钮。如果你想做更复杂的事情，你必须从头开始提供你自己的视图。

[您可以使用MultiRowCalloutAnnotationView](https://github.com/grgcombs/MultiRowCalloutAnnotationView)来帮助自己。该库假定您将为它提供一个表格，但您可以只为它提供一个包含整个视图的单元格。使用它的好处是它会为您绘制漂亮的半透明标注背景。

# android - SQLite 将列转换为逗号分隔的字符串

> ID：12372947
> 
> 赞同：11
> 
> 时间：2012-09-11T15:17:35.140
> 
> 标签：android, sqlite, concatenation, transpose, delimited

我有一个包含数据行的表，需要为一列的所有行创建一个逗号分隔的字符串。这可以仅使用 SQLite 中的 SELECT 语句来实现，还是我必须将数据放入 Cursor 并通过迭代来构建字符串？

例如：

```
UserId
1df4181d-6c52-4aa3-926f-2dacb0a68c70
1df4181d-6c52-4aa3-926f-2dacb0a68c71
1df4181d-6c52-4aa3-926f-2dacb0a68c72
1df4181d-6c52-4aa3-926f-2dacb0a68c73
1df4181d-6c52-4aa3-926f-2dacb0a68c74
1df4181d-6c52-4aa3-926f-2dacb0a68c75 
```

进入

```
1df4181d-6c52-4aa3-926f-2dacb0a68c70,1df4181d-6c52-4aa3-926f-2dacb0a68c71,1df4181d-6c52-4aa3-926f-2dacb0a68c72,1df4181d-6c52-4aa3-926f-2dacb0a68c73,1df4181d-6c52-4aa3-926f-2dacb0a68c74,1df4181d-6c52-4aa3-926f-2dacb0a68c75 
```

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-09-11T15:20:56.863

您可以使用[`GROUP_CONCAT()`](http://www.sqlite.org/lang_aggfunc.html)：

```
select group_concat(yourColumn, ',')
from yourtable 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!7/2f79d/1)

# c# - 引用两个程序集，每个程序集都引用另一个程序集，但版本不同

> ID：12372949
> 
> 赞同：0
> 
> 时间：2012-09-11T15:17:38.370
> 
> 标签：c#, asp.net, reference, .net-assembly

在 ASP.Net 应用程序中，我有一堂课。

这个类需要引用我之前写的两个程序集：

```
FMDriver.dll
MyWorldObj.dll 
```

这些程序集中的每一个都使用`MySql.Data.dll`但具有不同的版本。

如果我将新项目中的引用（带有`Copy Local = true`）添加到这两个程序集，我会收到错误，因为`MYWorld.dll`找不到`MySql.Data.dll`. 也许那是因为它使用了旧版本的 MySql 库？如果我删除对`FMDrvier.dll`MyWorldObj 的引用，则可以正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T15:22:21.170

我之前使用过[绑定重定向](http://msdn.microsoft.com/en-us/library/eftw1fys.aspx)来让所有引用的程序集都使用一个版本。不确定此解决方案是否适合您。

您基本上提供了一个旧版本和一个新版本：

```
<bindingRedirect  
   oldVersion="old assembly version"
   newVersion="new assembly version"/> 
```

如果您的项目，请确保新版本`.dll`在 bin 中。

否则，似乎是时候升级程序集以使用相同的版本了。

# android - 当我添加视口元时，android web 应用程序无法全屏

> ID：12372951
> 
> 赞同：1
> 
> 时间：2012-09-11T15:17:40.163
> 
> 标签：android, web, fullscreen

我创建了一个 android web 应用程序。我通过手机的虚拟键盘填写了地址，然后按“enter”键以使用 android broswer 访问它，但是有时当虚拟键隐藏时 web 应用程序无法全屏。似乎由视口元标记插入头部标记引起。

如何解决问题？

# android - 如何在 Android 的 ImageView 中平等地缩放图像 X 和 Y？

> ID：12372952
> 
> 赞同：0
> 
> 时间：2012-09-11T15:17:46.807
> 
> 标签：android, xml, user-interface, imageview

无论父视图的大小如何，我都试图让徽标具有相同的缩放比例。现在，标志是垂直缩小的，但没有水平缩小，导致标志看起来很脏。我希望它能够平等地缩放 x 和 y，这样它就可以保持它的形状，而不会出现弄脏或拉伸的外观。

我尝试了各种 scaleTypes，但到目前为止它们似乎没有帮助。

按钮的 XML 代码：

```
<ImageView
                android:id="@+id/logo"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_centerVertical="true"
                android:layout_toRightOf="@id/title"
                android:background="@android:color/transparent"
                android:src="@android:color/transparent" /> 
```

完整的 XML 代码（给出上下文）：

```
<RelativeLayout
            android:id="@+id/menu"
            android:layout_width="fill_parent"
            android:layout_height="0dp"
            android:layout_weight="30"
            android:background="@android:color/transparent"
            android:baselineAligned="false" >

            <TextView
                android:id="@+id/title"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@android:color/transparent"
                android:gravity="right|bottom"
                android:shadowColor="@android:color/transparent"
                android:text="THE BLIND GOAT"
                android:textColor="@android:color/transparent"
                android:textSize="24dp"
                android:textStyle="bold|italic"
                android:typeface="sans" />

            <Button
                android:id="@+id/help"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@id/title"
                android:background="@android:color/transparent"
                android:clickable="false"
                android:paddingBottom="0dp"
                android:paddingLeft="2dp"
                android:paddingRight="2dp"
                android:paddingTop="0dp"
                android:text="HELP"
                android:textColor="@android:color/transparent"
                android:textSize="9dp"
                android:textStyle="bold"
                android:typeface="monospace" />

            <Button
                android:id="@+id/settings"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_toRightOf="@id/help"
                android:layout_below="@id/title"
                android:background="@android:color/transparent"
                android:clickable="false"
                android:paddingBottom="0dp"
                android:paddingLeft="2dp"
                android:paddingRight="2dp"
                android:paddingTop="0dp"
                android:text="SETTINGS"
                android:textColor="@android:color/transparent"
                android:textSize="9dp"
                android:textStyle="bold"
                android:typeface="monospace" />

            <Button
                android:id="@+id/logout"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_toRightOf="@id/settings"
                android:layout_below="@id/title"
                android:background="@android:color/transparent"
                android:clickable="false"
                android:paddingBottom="0dp"
                android:paddingLeft="2dp"
                android:paddingRight="2dp"
                android:paddingTop="0dp"
                android:text="LOGOUT"
                android:textColor="@android:color/transparent"
                android:textSize="9dp"
                android:textStyle="bold"
                android:typeface="monospace" />

            <Button
                android:id="@+id/profile"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@id/settings"
                android:background="@android:color/transparent"
                android:clickable="false"
                android:textColor="@android:color/transparent"
                android:textSize="15dp"
                android:textStyle="bold"
                android:typeface="serif" />

            <ImageView
                android:id="@+id/logo"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_centerVertical="true"
                android:layout_toRightOf="@id/title"
                android:background="@android:color/transparent"
                android:src="@android:color/transparent"
                android:scaleType="centerCrop" />
        </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T15:31:03.143

您的图像显示由两个因素决定：

ImageView 的大小（您可以将其视为可以绘制图像的 Frame 或 Canvas）及其位置。如果`ImageView`很小，则图像只能填充该空间量。

第二个因素是[这里](http://developer.android.com/reference/android/widget/ImageView.ScaleType.html)`scaleType`描述的。如果您告诉via 它的属性使用“中心”，它将以图像本机大小从中心绘制。如果您使用“fit_center”，图像将自行缩放以适应正确的比例（它不会被拉伸或压扁）。`ImageView``scaleType``scaleType``ImageView`

希望有帮助！

# java - Java：如何遍历三个列表

> ID：12372953
> 
> 赞同：2
> 
> 时间：2012-09-11T15:17:47.057
> 
> 标签：java, loops, for-loop, foreach

我有三个`List<String>`变量：`classFiles`、`usernames`和`fileDirectories`。我有一个`String`（字符串列表，但我会将列表中的每个字符串与下面的循环进行比较），它由每个列表中的一个项目组成。我想遍历所有三个列表并检查所有三个列表中的一个值是否在字符串中

解决此问题的最佳方法是什么？

```
for(String classFile:classFiles) {
//if contains classfile statement
  for(String username:usernames) {
  //if contains username statement
    for(String fileDirectory:fileDirectories) {
      //if contains filedirectory statement
    }
  }
} 
```

或者

```
for(String classFile:classFiles) {
  for(String username:usernames) {
    for(String fileDirectory:fileDirectories) {
      //if statement
    }
  }
} 
```

或者

```
for(String classFile:classFiles) {
  //make list of files that contain classFile
}

for(String username:usernames) {
  //remove items from list that do not contain username
}

for(String fileDirectory:fileDirectories){
  //remove items from list that do not contain fileDirectory
} 
```

还是有更好的方法来做到这一点？

**编辑：示例**

```
classFiles - a1, a2, a3
usernames - noc1, noc2, noc3
fileDirectories - C:/projects/a1/noc1/example.java, C:/projects/a1/ad3/example.java 
```

和要检查的字符串

```
String - C:/bin/a1/noc1/example.class 
```

我想要做的是如果fileDirectory和String都包含一个classFile和用户名，然后将它添加到一个列表中

所以在这个例子`C:/bin/a1/noc1/example.class`中将被添加到列表中，但`C:/bin/a4/fd1/example.class`不会或`C:/bin/a3/noc3/example.class`不会被添加

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-11T15:21:04.170

当您对每个循环执行删除操作时，这不是最佳选择。您应该在迭代器上使用 Iterator 和 remove 以避免并发修改异常。

反而

```
for(String fileDirectory:fileDirectories){
  //remove items from list that do not contain fileDirectory
} 
```

你应该做类似的事情

```
Iterator iter = fileDirectores.iterator();
while(iter.hasNext())
{
//Get next
//Do your check 
iter.remove();
} 
```

这导致有三个单独的迭代来完全满足您的要求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T15:35:51.357

有时最好定义您实际尝试编写的函数：

```
/**
  * Checks to see if candidate has one string in each of classFiles, usernames and fileDirectories
  */ 
public boolean hasEssentialComponents(List<String> candidate) {
  //Code here
} 
```

现在，您的第一个选项具有非常长的最大运行时间 O(n^3)。如果您希望该函数通常会失败，这意味着对于您的三个列表中的每个项目，您正在循环遍历下一个列表。其中大部分是多余的，如果这些列表很长，您将对性能产生巨大影响。

第二个略有不同，但总运行时间相同。

第三个显然更好；在这种情况下，一旦您发现列表没有组件并且您从不检查列表中的组件两次，您就会失败。然而，Java 提供了一些可以使这更容易的[糖。](http://docs.oracle.com/javase/7/docs/api/)

```
public boolean hasEssentialComponents(List<String> candidates) {
  //Sanity check the data
  if (candidate.size() != 3) { return false; } //I'm assuming a 'good' candidate has only three items.

  valid = true;
  for (String candidate:candidates) {
    if (valid &&  
        ! (   check(this.classFiles, candidate)
           || check(this.usernames, candidate)
           || check(this.fileDirectories, candidate) )
          )) {
      valid = false;
    }
  }
  return valid;
}

private boolean check(List<String> masterList, String candidate) {
  return masterList.contains(candidate);
} 
```

现在，我在这里不必要地冗长，以确保梳理出问题的各个部分。请注意，您应该尽可能使用 Java 内置函数；他们优化得很好。不要把你的清单加在一起；您正在花费不必要的时间进行复制。此外，如果您只需要这样，请只进行一次比较：请注意，如果您知道字符串列表中的元素应该在您的主列表中的哪个位置，则可以做得更好。

最后，我真的建议你先写一个方法签名。它迫使你思考你真正想要做什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T15:26:21.937

所以我认为你想得到所有三个列表之间的交集？只需使用`retainAll`List 上的方法。

```
classFiles.retainAll(usernames);
classFiles.retainAll(fileDirectories); 
```

现在`classFiles`将只有所有三个列表之间的交集。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T15:35:18.007

您可以考虑使用 HashSet 或 HashMap 来快速访问您的字符串值（使用 .contains(string)）吗？

它将消除循环。

如果我能很好地理解问题，我会这样做（不确定^^）

# javascript - 将日期和时间转换为 UTC 格式的日期 - Javascript

> ID：12372955
> 
> 赞同：0
> 
> 时间：2012-09-11T15:18:09.100
> 
> 标签：javascript, date, datetime

我有两个变量，日期和时间......

```
var date = "2012-12-05";
var time = "18:00"; 
```

如何将其格式化为 UTC 格式的日期。这样我就可以在 Facebook API 中使用它了。

Facebook 声明我需要这种格式：

*精确时间（例如，'2012-07-04T19:00:00-0700'）：在特定时间点开始的事件，在与 UTC 的特定偏移量中。这是新的 Facebook 事件跟踪时间的方式，并允许用户查看不同时区的事件。*

任何帮助将不胜感激..谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T15:24:18.610

这种格式称为`ISO 8601`

你知道你在哪个时区吗？如果你这样做，你可以这样做：

```
var datetime = date + 'T' + time + ":00+0000'; 
```

如果时区为 +0。
如果没有，那么：

```
var d = new Date()
var n = d.getTimezoneOffset();
var timeZone = Math.floor( Math.abs( n/60 ) );
var timeZoneString = (d.getTimezoneOffset() < 0 ? '-' : '+' ) + ( timeZone < 10 ? '0' + timeZone : timeZone ) + '00';

var datetime = date + 'T' + time + ':00' + timeZoneString; 
```

这是一个小提琴：http: [//jsfiddle.net/ajySr/](http://jsfiddle.net/ajySr/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T15:25:58.080

尝试以下操作：

```
var date = new Date(2012, 12, 5, 18, 0, 0, 0); 
var date_utc = new Date(date.getUTCFullYear(), date.getUTCMonth(), date.getUTCDate(),  date.getUTCHours(), date.getUTCMinutes(), date.getUTCSeconds()); 
```

该`Date`功能可以通过以下方式使用：

```
var d = new Date();
var d = new Date(milliseconds);
var d = new Date(dateString);
var d = new Date(year, month, day, hours, minutes, seconds, milliseconds); 
```

这取自此处的相关帖子：[如何将 JavaScript 日期转换为 UTC？](https://stackoverflow.com/questions/948532/how-do-you-convert-a-javascript-date-to-utc)

要了解更多信息，请参阅：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)

# rake - Rails 3 Controller 不渲染页面

> ID：12372956
> 
> 赞同：1
> 
> 时间：2012-09-11T15:18:12.923
> 
> 标签：rake, ruby-on-rails-3.2

在 rails 3 中是否有可能有一个指向控制器操作的链接，但不渲染任何东西？假设我只想调用几个 rake 任务。这可能吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-12T14:48:24.383

您可以使用以下方法渲染任何内容：

```
render :nothing => true 
```

在控制器中的操作结束时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T14:11:17.420

调用该方法并在其末尾添加一个 redirect_to 或渲染到您要查看的站点。不要忘记将此添加到您的路线中。您还可以使用 Flash 消息向用户显示发生了什么事 :)

# google-apps-script - 有没有办法在运行时调试电子表格应用程序脚本？

> ID：12372959
> 
> 赞同：1
> 
> 时间：2012-09-11T15:18:14.213
> 
> 标签：google-apps-script, google-sheets

有没有办法在运行时调试电子表格谷歌应用程序脚本？仅仅通过脚本编辑器运行它是没有用的，因为我需要调试的函数将触发事件作为参数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-26T16:34:37.857

这是一个可以测试表单提交触发功能的功能，摘自[How can I test a trigger function in GAS?](https://stackoverflow.com/questions/16089041/how-can-i-test-a-trigger-function-in-gas/16089067#16089067) .

```
function test_onFormSubmit() {
  var dataRange = SpreadsheetApp.getActiveSheet().getDataRange()
  var data = dataRange.getValues();
  var headers = data[0];
  // Start at row 1, skipping headers in row 0
  for (var row=1; row < data.length; row++) {
    var e = {};
    e.values = data[row];
    e.range = dataRange.offset(row,0,1,data[0].length);
    e.namedValues = {};
    // Loop through headers to create namedValues object
    for (var col=0; col<headers.length; col++) {
      e.namedValues[headers[col]] = e.values[col];
    }
    // Pass the simulated event to onFormSubmit
    onFormSubmit(e);
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T14:11:38.630

不知道你的问题是什么，但试试这个。

```
function get_color(e) {

  //var data = e.parameter.nameLabel

  var data = red;

  if (data == red){
    //...
  } else {
    //...
  }
} 
```

**所以你可以使用调试器来测试你的脚本而不考虑事件**

我希望它对你有帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T17:40:11.257

简单的答案是否定的——您不能在表单提交上进行调试。但是，您可以在 onSubmit 代码中编写 Logger.log 语句，然后将日志内容写入另一个电子表格或工作表，以便稍后查看。

# jquery - jQuery Mobile 从 php 加载标记 - 不会第二次增强标记

> ID：12372960
> 
> 赞同：1
> 
> 时间：2012-09-11T15:18:14.967
> 
> 标签：jquery, jquery-mobile

使用 jQuery Mobile 创建应用程序，我想要一个从服务器加载数据的页面，当我出于各种原因加载时，我正在 PHP 中构建列表项。

因此，当我第一次加载页面时，一切都很顺利，如果我再次加载它，数据会重新插入，但标记不会增强。

SO上有几个线程解决了这个确切的问题，但是接受的答案总是使用.trigger（'create'）。我已经这样做了，但没有成功，**我尝试使用 .listview('refresh')、.trigger('updatelayout')，我尝试在页面上触发这些事件，页面的类， listview div，把它放在我的ajax调用的完整：**但什么都没有。所以我求助于社区：

我正在使用 jQM 1.1.1：如果您需要更多信息，我是否错过了一些信息，我很乐意提供：

这是我的首页

```
<div data-role="page" id="frontPage">
    <div data-role="header" data-theme="e" data-id="commonHead" data-position="fixed">
        <a href="index.html" data-role="button" data-icon="home" data-iconpos="notext"></a>
        <h1>
            myApp
        </h1>
    </div>
    <div data-role="content" class="content">
        <ul data-role="listview">
            <li><a href="#" onClick="viewfList()">List</a></li>
        </ul>
    </div>
</div> 
```

这是我导航到的页面：

```
<div data-role="page" id="fView">
    <div class="commonHeader"></div>
    <div data-role="content">
        <ul data-role="listview" id="fList">

        </ul>
    </div>
</div> 
```

这是我用来调用页面的 viewfList 函数

```
function viewFeatList(){
    jQuery.ajax({ //getting my new <li>
            url: 'http://sources.mysource.com/get_list.php',
            type: 'POST',
            //data: myData,
            dataType: 'jsonp',
            jsonp: 'jsoncallback',
            success: function(data, textStatus, jqXHR){     
                $('#fList').empty(); //emptying the listview                
                for (i=0;i<data.f.length;i++){
                    $('#fList').append(data.f[i]); //appending the <li>
                    }
                $('#fList').trigger('create'); //this version's attempt to re-enhance markup
                $.mobile.changePage('#fView');   //navigate to page                         

                },
            error:  function(jqXHR, textStatus, errorThrown){
                myAlert('There was an error submitting your request')
                }
            });

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T15:44:45.037

好的，感谢评论的启发，并克服了我自己因沮丧而疏忽的疏忽，我找到了解决方案：

这是我的新功能

```
function viewfList(){
    jQuery.ajax({
            url: 'http://sources.mysource.com/get_list.php',
            type: 'POST',
            //data: myData,
            dataType: 'jsonp',
            jsonp: 'jsoncallback',
            success: function(data, textStatus, jqXHR){     
                $('#fList').empty();;               
                for (i=0;i<data.f.length;i++){
                    $('#fList').append(data.f[i]);
                    }

                $.mobile.changePage('#fView');  
                $('#fList').listview('refresh');                                            
                },
            error:  function(jqXHR, textStatus, errorThrown){
                myAlert('There was an error submitting your request')
                }
            });

    } 
```

结果 .listview('refresh') 确实有效，并且根据[CrimsonChin](https://stackoverflow.com/users/874927/crimsonchin)的建议确实在 Javascript 控制台中抛出了一个错误，但是我在页面上执行这些而不是实际的 listview 元素。当我在 listview 元素上执行它时，我得到了这个错误：

> Uncaught 不能在初始化之前调用 listview 上的方法；试图调用方法“刷新”

显然，这导致我在页面更改为**之后调用刷新。**

我对此唯一担心的是：如果有一天页面上有很多事情要做，是否有可能我会在屏幕上看到未增强的标记闪烁一秒钟，然后才会发生变化……现在不会发生但我目前正在运行一个非常基本的页面。

谢谢你的帮助。

# javascript - 如何设置jsfiddle的javascript版本？

> ID：12372963
> 
> 赞同：1
> 
> 时间：2012-09-11T15:18:32.623
> 
> 标签：javascript, jsfiddle

我想在 jsFiddle中使用 javascript 的`yield`关键字（类似于 C# 的）。`yield return`我知道 `yield`这只适用于 Firefox，我想做一个一次性的模拟，所以它不必是跨平台的。是否可以将 jsFiddle 的 javascript 设置为 1.7 版？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T15:21:51.157

`Languages`是的 - 在左侧调用的选项卡中 - 您可以将`JavaScript`下拉菜单更改为`Javascript 1.7`- 这应该在 META.stackexchange.com

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T15:20:20.613

jsFiddle 在浏览器中运行 JavaScript。因此，它使用浏览器运行的任何版本的 JS。

jsFiddle 没有固有的“JavaScript 版本”。

# c# - 如何使用 C# 代码 .Net 4.0 压缩两个文件且不使用第三方工具或软件

> ID：12372964
> 
> 赞同：0
> 
> 时间：2012-09-11T15:18:37.710
> 
> 标签：c#, winforms, email-attachments, zipfile

> **可能重复：**
> [如何在 C# 中压缩文件，不使用第 3 方 API？](https://stackoverflow.com/questions/940582/how-do-i-zip-a-file-in-c-using-no-3rd-party-apis)

我有一个创建两个文件的应用程序，一个是 txt，另一个是图像文件。我想将它们压缩在一起，然后使用计算机的默认电子邮件设置发送。我需要压缩它们的原因是因为我使用的是邮件到链接方法。这是代码：

```
public static void Main()
{
    SendMailWithMailTo(
        "dvader@deathstar.mil",
        "Rebel Base Detected",
        "Hoth, baybee!!",
        "\"C:\\Users\\Fett\\RebelBase[1].png\""); 
} 
```

所以我只能附上一个文件。所以我认为拉链可能是个好主意？我也在使用.NET 4.0。我相信 .NET 4.5 中有一些内置程序集，但我的应用程序要求是 .NET 4.o。如果可能的话，我也不想使用任何外部工具。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T15:22:17.363

Png 已经被压缩了，所以再次压缩它不会有太多好处。为什么不简单地使用 [System.Net.Mail.Attachment](http://msdn.microsoft.com/en-us/library/system.net.mail.attachment.aspx)。在我提供的链接上有一个很好的例子说明如何做到这一点

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T15:27:49.610

.NET 4.5 包括一个`ZipArchive`允许轻松压缩多个文件的新类。

[此 MSDN 条目有一些示例](http://msdn.microsoft.com/en-us/library/hh137435)。

但正如已经提到的，一些常见的图像格式已经被压缩，假设它们的大小是平庸的，你可能不会在文本文件上节省太多。

如果您坚持使用 4.0，那么重复问题的建议[`ZipPackage`](http://msdn.microsoft.com/en-us/library/system.io.packaging.zippackage.aspx)是创建 zip 存档的一种选择（尽管它支持的格式似乎有一些警告）。

.NET 中的压缩流将创建可以由 zip 客户端解压缩的文件，但它本身不支持创建多文件存档，所以如果`ZipPackage`不适合你，我猜答案是：不，你'将需要第三方库或创建您自己的 zip 标准实现。

对我来说，最简单的方法似乎是不打扰压缩并将文件直接添加到电子邮件中，但这是一个不知道平均文件大小或压缩收益的建议。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T15:55:25.090

如果您试图让操作系统启动默认邮件客户端，以便用户可以构建电子邮件（这就是您所追求的），您应该考虑`MapiMailMessage`改用。这是[一篇](http://weblogs.asp.net/jgalloway/archive/2007/02/24/sending-files-via-the-default-e-mail-client.aspx)详细介绍它的文章。

它是一个第三方库，因为使用 Windows API 并不直接，因此涉及到相当多的代码，但我敦促您意识到开源的第三方库没有任何问题。事实上，这是[一篇](http://www.koders.com/csharp/fid1230CF4A55FA5B4DC86C31DD8907824EC4FF5060.aspx?s=assemblyconfiguration)包含**所有**源代码的文章**以及**如何使用它的示例。

我为什么推荐这个？因为它本机支持多个附件，您可以不必担心压缩它们（尤其是 PNG 文件，因为这里已经说明了另一个贡献者，它们已经非常压缩）。

# sql - 在 SQL Server 2008 R2 中访问用户定义的类型

> ID：12372965
> 
> 赞同：0
> 
> 时间：2012-09-11T15:18:54.480
> 
> 标签：sql, sql-server-2008-r2, user-defined-functions, sql-function

我在主数据库（系统数据库）下的 SQL Server 中有一个用户定义的类型。当我参考主数据库（即使用主数据库）时，它几乎可以工作。但是，我无法从其他数据库访问该类型。我是否必须将其添加到其他数据库中，或者即使从当前可用的位置也可以引用它？我怎样才能让它在所有可用的数据库中都可以访问？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T11:02:24.630

您需要在每个数据库中创建 EthiopanDate 类型的副本。db_x 中的代码将无法在 master 中看到 EthiopanDate，反之亦然。这也可能是临时对象的问题 - 要在任何列中创建具有该数据类型的临时表，该类型也需要存在于 tempdb 中。出于这个原因，将类型添加到模型数据库（这将在每次启动时将其放置在 tempdb 中，以及在服务器上直接创建的每个未来数据库中）或在启动过程中添加显式创建都是有用的.

话虽如此，我已经写了为什么你可能不想这样做——这主要是关于改变它们是多么令人难以置信的痛苦：

*   [要改掉的坏习惯：使用别名类型](https://sqlblog.org/2009/10/14/bad-habits-to-kick-using-alias-types)

# html - CSS：如何在单元格表的两端放置控件

> ID：12372969
> 
> 赞同：0
> 
> 时间：2012-09-11T15:19:07.870
> 
> 标签：html, css

我在单元格表中有一个按钮和一个文本框。如何进行样式设置，以便两个控件位于相反的位置。现在，按钮粘在文本框上。我希望它们位于表格单元格的两个极端。

```
<td style= "width:300px">
   <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>       
   <asp:Button ID="Button1" runat="server" Text="Button" />
</td> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T15:20:10.580

将第一个设为“style=float:left”，第二个设为右浮动。

这可能会导致第二个出现略低于这种情况，在这种情况下，您应该首先使其浮动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T15:31:15.260

试试这个：

```
<td style= "width:300px">
   <asp:TextBox ID="TextBox1" runat="server" style="float:left;"></asp:TextBox>       
<asp:Button ID="Button1" runat="server" Text="Button" style="float:right;"width:100px; />
</td> 
```

# javascript - Array.lenght = 未定义

> ID：12372970
> 
> 赞同：0
> 
> 时间：2012-09-11T15:19:11.183
> 
> 标签：javascript, arrays

我有以下代码：

```
var transitionsSettingsClass = document.getElementsByClassName("transitionsSettings");   
var myLenght = transitionsSettingsClass.lenght;   
alert(myLenght); 
```

我得到了不确定的警报。但是，如果我使用：

```
alert(transitionsSettingsClass[0]) 
```

然后我得到一个明确的结果。我正在尝试使用这个脚本，所以它会`setAttribute`在每个带有类名 transitionsSettings 的标签中使用，并且我需要一个长度的数组来使用循环（for）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T15:20:22.700

长度=长度！！

所以你去吧！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T15:21:40.830

`document.getElementsByClassName`返回 a `NodeList`，类似于数组但不是数组。

它还有一个属性是`length`

# entity-framework-5 - 如何在实体框架5中使用guid作为主键列（身份），默认值为newid（）？

> ID：12372971
> 
> 赞同：4
> 
> 时间：2012-09-11T15:19:16.120
> 
> 标签：entity-framework-5

我通过“模型优先”使用实体框架 5.0。在 4.x 中存在一个错误：设计器无法处理带有 identy 和 defaultValue 的主列 guid：“newid()”（来源：[http ://leedumond.com/blog/using-a-guid-as-an -entitykey-in-entity-framework-4/](http://leedumond.com/blog/using-a-guid-as-an-entitykey-in-entity-framework-4/) )

是否仍然无法在 EF5 中使用它？将 c# guid 转换为 sql "uniqueid" 有什么问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-16T09:24:00.060

这对我首先进行数据库很有用，但在您创建数据库后可能会对您有所帮助 -

您可以更新表并将默认值设置为`newid()`使用 Server Management Studio（而不是通过 EF）。

然后在 EF 模型中，更新`StoreGeneratedPattern`from`none`到`Identity`。

2013 年编辑：为了完整起见，在 EF 5.0 Codefirst 中，您可以指定以下数据注释：

```
[Key]
[DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
public Guid TableIdColumn { get; set; } 
```

# android - 在 Android 的主屏幕上每隔几秒显示一个窗口

> ID：12372973
> 
> 赞同：0
> 
> 时间：2012-09-11T15:19:24.560
> 
> 标签：android

我是安卓新手。

我想在android中编写一个警报系统。

我想在主屏幕上每隔几秒（或几个小时）显示一个窗口（或对话框），我想在几秒钟后隐藏它。

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T15:24:51.653

为了每隔几秒钟显示一次对话框，您需要创建服务，您将在其中创建带有句点的计时器。并在几秒钟后隐藏使用 Toast with duration。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T16:14:14.380

使用AlarmManager触发报警，使用BroadcastReceiver处理报警通知，弹出对话框

# javascript - 回调的javascript参数

> ID：12372979
> 
> 赞同：0
> 
> 时间：2012-09-11T15:19:39.610
> 
> 标签：javascript, callback

我有一个由 ajax 完成回调递归调用的函数，我需要为这个函数设置参数。但是如何在回调中传递参数？

```
function poll(url, data, pollDelay, type){
            $.ajax({ url: url, type: 'POST', data: data, success: function(data){
                if(data != '' && type == 1) { //do answers
                doOutput(data);
                }
            }, dataType: 'html', complete: pollTimeout = setTimeout('poll()', pollDelay), timeout: 30000 });
    }

function doPoll() {
    clearTimeout(pollTimeout);
    poll('url/f.php', obj = { id: someId, data: somedata }, 10000, 1);
} 
```

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T15:21:48.803

我假设你指的是你的`setTimeout`电话？永远不要将字符串传递给`setTimeout`.

```
pollTimeout = setTimeout(function() {poll(url,data,pollDelay,type);},pollDelay); 
```

请注意，您的整个“完整”事物应该在这样的功能中：

```
$.ajax({...
    complete: function() {
        pollTimeout = setTimeout(...);
    }
...}); 
```

# c# - 使用 2 个不同的数据库视图的导航属性

> ID：12372980
> 
> 赞同：0
> 
> 时间：2012-09-11T15:19:49.130
> 
> 标签：c#, linq, entity-framework, linq-to-entities

我有一个包含“Id”字段的帐户对象，该字段映射到数据库中的视图：

```
public class Account : GeneralInfo
    {
        [Column("first_name")]
        public string FirstName { get; set; }

        [Column("last_name")]
        public string LastName { get; set; }

        public string Designation { get; set; }

        [Column("full_name")]
        public string FullName { get; set; }

        public string Email { get; set; }

        [Column("member_type")]
        public string MemberType { get; set; }

        [Column("status")]
        public string Status { get; set; }

        [Column("paid_thru")]
        public DateTime? PaidThru { get; set; }

        [Column("member_record")]
        public bool MemberRecord { get; set; }

        [Column("category")]
        public string Category { get; set; }

        public virtual Subscription Subscriptions { get; set; }
    } 
```

我还有一个订阅对象，它使用与帐户对象相同的“Id”：

```
[Table("Subscriptions")]
public class Subscription
{
    [Column("Id")]
    public string ID { get; set; }

    [Column("Balance")]
    public decimal Balance { get; set; }

} 
```

当我尝试使用“订阅”作为帐户的导航属性时，我收到一条错误消息： `{"Invalid column name 'Subscriptions_ID'."}`

如何使用 Account 对象访问“订阅”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T16:59:18.123

使用 fluent API 映射共享 PK 关系。

```
public class MyContext : DbContext
{
    // ...........

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<Subscription>().HasRequired()
           .WithOptional(a => a.Subscriptions);
    }
} 
```

# awk - 如何从awk获取总列

> ID：12372982
> 
> 赞同：0
> 
> 时间：2012-09-11T15:19:49.833
> 
> 标签：awk

我正在测试`awk`并得到了这个想法。所以我们知道

```
raja@badfox:~/Desktop/trails$ cat num.txt
1   2   3   4
1   2   3   4
4   1   2   31
raja@badfox:~/Desktop/trails$ awk '{ if ($1 == '4') print $0}' num.txt
4   1   2   31
raja@badfox:~/Desktop/trails$ 
```

因此该命令将在文件名 num.txt 的第一列检查 4 。

所以现在我想要输出，因为第 4 列也有 4，例如，如果我有 100 列信息，我想得到输出，因为我有多少列与我正在搜索的词。

我的意思是从上面的例子中我想要第 4 列和第 1 列作为输出，我正在搜索 4 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T15:31:18.403

如果您正在尝试查找包含您的搜索项的行（在本例中为值 4），并且您想要计算行中出现的此类值的数量（以及行的数据），那么您需要一些东西喜欢：

```
awk '{ count=0
       for (i = 1; i <= NF; i++) if ($i == 4) count++
       if (count) print $i ": " $0
     }' 
```

这不太适合一条 SO 线。

如果您只想确定哪些列包含搜索值，则可以使用：

```
awk '{ for (i = 1; i <= NF; i++) if ($i == 4) column[i] = 1 }
     END { for (i in column) print i }' 
```

这会将包含搜索值 4 的每一列的（关联）数组元素`column[i]`设置为 1。最后的循环以不确定（未排序）的顺序打印包含 4 的列号。GNU`awk`包括排序函数 ( `asort`, `asorti`)；POSIX`awk`没有。如果排序顺序至关重要，请考虑：

```
awk 'BEGIN { max = 0 }
           { for (i = 1; i <= NF; i++) if ($i == 4) { column[i] = 1; if (i > max) max = i } }
     END   { for (i = 1; i <= max; i++) if (column[i] == 1) print i }' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T15:23:13.743

您正在寻找`NF`变量。它是行中的字段数。

以下是如何使用它的示例：

```
{
    if (NF == 8) {
        print $3, $8;
    } else if (NF == 9) {
        print $3, $9;
    } 
} 
```

或在循环内：

```
# This will print the line if any field has the value 4
for (i=1; i<=NF; i++) {
    if ($i == 4)
        print $0
} 
```

# eclipse - Eclipse IDE 需要很长时间才能打开错误位置

> ID：12372986
> 
> 赞同：1
> 
> 时间：2012-09-11T15:19:55.743
> 
> 标签：eclipse, debugging, ide, eclipse-rcp

当运行 RCP 项目时发生错误时，**Eclipse 会**在控制台视图中显示错误的位置。您可以单击文件名，Eclipse 将立即打开文件并将光标放在正确的行中。

几天后，**我的 Eclipse 安装需要很长时间**才能完成（几分钟）。
在进度视图中，我看到一个“搜索”进程正在运行，并且在很长一段时间后文件将被打开。

你有什么想法可能是长时间持续的原因吗？

或者我怎么能在这么长时间内找出 Eclipse 在做什么？

===
更新：
设置一个全新的工作区解决了这个问题。在新工作区打开错误位置工作正常。

**我仍然想知道**在这种情况下我能做些什么来**找出 Eclipse 正在做什么**（并且花了这么长时间）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:27:38.183

我想一个很好的起点可能是 class `org.eclipse.ui.internal.console.FollowHyperlinkAction`。

如果你在 中设置断点`FollowHyperlinkAction.run()`，你可以走进去`IHyperlink.linkActivated()`看看到底发生了什么。

# passwords - jenkins 用户首次安装时的密码是多少？

> ID：12372992
> 
> 赞同：1
> 
> 时间：2012-09-11T15:20:14.227
> 
> 标签：passwords, jenkins, continuous-integration, credentials, slave

我想将一台 Jenkins 服务器（Ubuntu 12.04）置于从属模式。但是主机必须知道从机上“jenkins”用户的密码。在 Jenkins 安装过程中自动创建密码时如何指定密码？

# java - 是否有衡量 Spring 应用程序复杂性的工具或指标？

> ID：12372993
> 
> 赞同：2
> 
> 时间：2012-09-11T15:20:14.777
> 
> 标签：java, spring, code-metrics

我知道使用静态分析来测量以单一语言（例如 Java）编写的代码的复杂性的工具。像 Spring 这样的应用程序框架使得复杂性的测量变得更加困难——许多交互并不明显，它们可能跨越多种技术（例如，Java、JSP、XML）。例如，XML 文件可能指示依赖关系。是否有任何工具可以用来确定 Spring 应用程序的相对复杂性？

我对作为复杂性度量的耦合特别感兴趣。但是，我想听听任何可能适用的复杂性指标/工具。