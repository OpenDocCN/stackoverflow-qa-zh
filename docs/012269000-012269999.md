# StackOverflow 问答 12269000-12269999

# sql - 使用 SQL 别名查询或将列名连接到行值？

> ID：12269001
> 
> 赞同：3
> 
> 时间：2012-09-04T18:03:33.897
> 
> 标签：sql, postgresql, dynamic-sql

我正在使用 PostgreSQL 中的数据，该数据使用数据字典表来提供数据集中其他表的列（变量）名称的描述。例如：

表格1：

```
a00600 | a00900
-------+-------
row 1  | row 1
row 2  | row 2 
```

数据字典（键）列：

```
Variable | Description
---------+------------
a00600   | Total population
a00900   | Zipcode 
```

出于报告目的，我如何编写 SQL 以动态执行以下操作（不指定每个列名）？

```
SELECT 'a00600' AS (SELECT Key.Description
WHERE Key.Variable = 'a00600')
FROM Table 1; 
```

我意识到可能有更好的方法来解析这个问题/问题，并且对我需要完成的任何想法持开放态度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T19:05:09.683

You need to use **dynamic SQL** with a procedural language function. Usually **`plpgsql`** and use [**`EXECUTE`**](http://www.postgresql.org/docs/current/interactive/plpgsql-statements.html#PLPGSQL-STATEMENTS-EXECUTING-DYN) with it.

The tricky part is to define the *return type* at creation time.

I have compiled a number of solutions in [this related answer](https://stackoverflow.com/a/11751557/939860).
There are lots of related answer on SO already. Search for combinations of terms like `[plpgsql]` `EXECUTE` `RETURN QUERY` `[dynamic-sql]` `quote_ident`.

* * *

Your approach is commonly frowned upon among database designers.
My personal opinion: I wouldn't go that route. I *always* use basic, descriptive names. You can always add more décor in your application if needed.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T11:09:08.287

另一种获取描述而不是实际列名的方法是创建视图（每个表一个）。这可以通过自动生成视图来自动化。这看起来相当笨拙，但它有一个**巨大**的优势，即对于“复杂*”查询，生成的查询计划将与原始列名完全相同。（加入复杂查询的函数将表现不佳：优化器无法将它们分开，所以产生的行为将等同于“一次一行”）示例：

```
-- tmp schema is only for testing
DROP SCHEMA tmp CASCADE;
CREATE SCHEMA tmp ;
SET search_path=tmp;

CREATE TABLE thedata
        ( a00600 varchar
        , a00900 varchar
        );
INSERT INTO thedata(a00600 , a00900) VALUES
 ('key1', 'data1')
,('key2', 'data2');

CREATE TABLE thedict
        ( variable varchar
        , description varchar
        );

INSERT INTO thedict(variable , description) VALUES
 ('a00600'   , 'Total population')
,('a00900'   , 'Zipcode' );

CREATE OR REPLACE FUNCTION create_view_definition(zname varchar)
  RETURNS varchar AS
$BODY$
DECLARE
   thestring varchar;
   therecord RECORD;
   iter INTEGER ;
   thecurs cursor for
        SELECT co.attname AS zname, d.description AS zdesc
        FROM pg_class ct
        JOIN pg_namespace cs ON cs.oid=ct.relnamespace
        JOIN pg_attribute co ON co.attrelid = ct.oid AND co.attnum > 0
        LEFT JOIN thedict d ON d.variable = co.attname
        WHERE ct.relname = 'thedata'
        AND cs.nspname = 'tmp'
        ;
BEGIN
        thestring = '' ;
        iter = 0;
        FOR therecord IN thecurs LOOP
                IF (iter = 0) THEN
                        thestring = 'CREATE VIEW ' || quote_ident('v'||zname) || ' AS ( SELECT ' ;
                ELSE
                        thestring = thestring || ', ';
                END IF;
                iter=iter+1;

                thestring = thestring || quote_ident(therecord.zname);

                IF (therecord.zdesc IS NOT NULL) THEN
                        thestring = thestring || ' AS ' || quote_ident(therecord.zdesc);
                END IF;

        END LOOP;
        IF (iter > 0) THEN
                thestring = thestring || ' FROM ' || quote_ident(zname) || ' )' ;
        END IF;

RETURN thestring;

END;
$BODY$ LANGUAGE plpgsql;

CREATE OR REPLACE FUNCTION execute_view_definition(zname varchar)
  RETURNS INTEGER AS
$BODY$
DECLARE
   meat varchar;
BEGIN
   meat = create_view_definition(zname);
   EXECUTE meat;
RETURN 0;

END;
$BODY$ LANGUAGE plpgsql;

SELECT create_view_definition('thedata');
SELECT execute_view_definition('thedata');

SELECT * FROM vthedata; 
```

结果：

```
CREATE FUNCTION
CREATE FUNCTION
                                      create_view_definition                                       
---------------------------------------------------------------------------------------------------
 CREATE VIEW vthedata AS ( SELECT a00600 AS "Total population", a00900 AS "Zipcode" FROM thedata )
(1 row)

 execute_view_definition 
-------------------------
                       0
(1 row)

 Total population | Zipcode 
------------------+---------
 key1             | data1
 key2             | data2
(2 rows) 
```

请注意，这只是一个示例。如果是真的，我*至少*会将生成的视图放入单独的模式中，以避免名称冲突和原始模式的污染。

# google-apps-script - Google 脚本配额问题：Gmail 阅读

> ID：12269002
> 
> 赞同：1
> 
> 时间：2012-09-04T18:03:35.603
> 
> 标签：google-apps-script, gmail, quota

我的谷歌脚本代码有点麻烦。我正在尝试制作一个脚本，该脚本将自动获取主题中带有“事件”的任何电子邮件并解析文本以将其添加到日历中。我有一个过滤器，将电子邮件添加到标签“事件”，然后删除标签。

该脚本运行良好，并发布在下面。我每分钟触发一次。但是，每天我都会收到一封巨大的失败通知电子邮件，说明我已经超过了第 4 行 [GmailApp.getUserLabelbyName] 上的 gmail 读取配额。我尝试使用谷歌搜索，但找不到更多细节。

因此，根据配额网站，我每天的阅读量限制为 10,000 次。这一直失败，“事件”箱中根本没有电子邮件，因此似乎没有阅读实际的电子邮件。日历应该每分钟访问一次，即每天 1,440 次。

那么为什么我会收到 gmail 读取的配额失败？'gmail reads' 是否意味着访问 gmail（获取标签变量）或阅读电子邮件正文（getThreads）或两者兼而有之？

任何帮助将不胜感激。谢谢！

函数 MakeEvents() {

```
var label = GmailApp.getUserLabelByName("Events");            
if (label) {
  var threads = label.getThreads();    
  for (var x in threads) {      
    var messages = threads[x].getMessages();

    for (var y in messages) {

    var myHTMLContent = messages[y].getBody();
    textContent=getTextFromNode(Xml.parse(myHTMLContent, true).getElement());

    CalendarApp.getDefaultCalendar().createEventFromDescription(textContent);  

    }      
    threads[x].removeLabel(label);
  }
} 
```

}

```
function getTextFromNode(x) {
switch(x.toString()) {
case 'XmlText': return x.toXmlString();
case 'XmlElement': return x.getNodes().map(getTextFromNode).join('');
default: return ''; 
```

} }

# ruby-on-rails - 直接从 GitHub 部署 Rails

> ID：12269007
> 
> 赞同：0
> 
> 时间：2012-09-04T18:03:52.993
> 
> 标签：ruby-on-rails, deployment, github

> **可能重复：**
> [在推送时自动从 GitHub 部署到服务器](https://stackoverflow.com/questions/7303518/automatically-deploy-from-github-to-server-on-push)

有没有办法直接从 github 部署托管在 github 上的 rails 应用程序？不依赖于 heroku 或 openshift 之类的服务......因为我必须将 de git 存储库也推送到该服务器。看引导网页，看，它托管在一个 github 域下：[Boostrap](http://twitter.github.com/bootstrap/)

有没有办法部署这样的项目的主分支？至少一个 html+css+js 网页...？

或者任何与 github git 项目自动同步的服务，所以我不必每次都推送到两台服务器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T18:14:30.587

Twitter Bootstrap 站点是一个[Github Pages 站点](http://pages.github.com/)，它使用来自[Twitter Bootstrap 存储库的](https://github.com/twitter/bootstrap)[gh-pages](https://github.com/twitter/bootstrap/tree/gh-pages)分支。没有自动部署，它都是从 Github 托管的。

至于从 Github 自动部署，我会看看这个答案：

[推送时自动从 GitHub 部署到服务器](https://stackoverflow.com/questions/7303518/automatically-deploy-from-github-to-server-on-push)

# neo4j - 在单个 Cypher 查询中返回两个聚合？

> ID：12269009
> 
> 赞同：3
> 
> 时间：2012-09-04T18:04:03.183
> 
> 标签：neo4j, cypher

在获取两个值的总和并找到差异方面，我一直在与 Cypher 进行一些斗争。我有这两个查询，它们查找节点的发送总数和接收总数：

```
START addr = node(5)
MATCH addr <- [:owns] - owner - [to:transfers] -> receiver
RETURN SUM(to.value) AS Total_Sent

START addr = node(5)
MATCH addr <- [:owns] - owner <- [from:transfers] - sender
RETURN SUM(from.value) AS Total_Received 
```

基本上我的问题是 - 我如何结合这两个单独的查询，以便我可以区分 Total_Sent 和 Total_Received？我尝试了多个起点，如下所示：

```
START sendAddr = node(5), receivedAddr = node(5)
MATCH sendAddr <- [:owns] - sendOwner - [to:transfers] -> receiver, receivedAddr <- [:owns] - receiveOwner <- [from:transfers] - sender
RETURN SUM(to.value) AS Total_Sent, SUM(from.value) AS Total_Received, SUM(to.value) - SUM(from.value) AS Balance 
```

但 Total_Received 为空！对我来说，这看起来像是一个非常简单的用例——我到底做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T19:03:01.663

您不能像这样将两个查询组合在一起。:)

为了解决这个问题，我建议您使用 WITH 将查询分成两部分，如下所示：

```
START addr = node(5)
MATCH addr <- [:owns] - owner - [to:transfers] -> receiver
WITH addr, SUM(to.value) AS Total_Sent

MATCH addr <- [:owns] - owner <- [from:transfers] - sender
WITH SUM(from.value) AS Total_Received, Total_Sent

RETURN Total_Received, Total_Sent, Total_Received - Total_Sent as Total_Balance 
```

高温下，

安德烈斯

# c# - 使我的匹配系统线程安全并处理并发

> ID：12269011
> 
> 赞同：1
> 
> 时间：2012-09-04T18:04:08.907
> 
> 标签：c#, asp.net, asp.net-mvc-3, entity-framework, thread-safety

我有一个我正在尝试构建的系统，可以实时匹配用户。根据特定标准，用户的匹配是 1 对 1。我有以下数据库表（有点像聊天轮盘赌类型系统）：

```
Pool
+UserId
+Gender
+City
+Solo (bool)

Matched
+UserId
+PartnerId 
```

当用户进入某个页面时，他们被添加到`Pool`表中并`Solo`设置为 true。然后系统通过查询`Pool`表来搜索另一个用户，并返回结果`Solo`为真（意味着他们没有合作伙伴）并且`Gender`也`City`等于他们查询的任何内容。如果返回匹配项，则将两个用户都放入`Matched`数据库并将他们在表中的两`Solo`列都转换为. 如果它们断开连接，它们将从表中删除，并且它们的列将更改为。我在尝试构建线程安全和并发的方式时遇到了麻烦。以下是我遇到的一些问题：`Pool``false``Matched``Solo``true`

- 如果 2 个用户`Pool`同时查询数据库并且都返回相同的“solo”用户怎么办？我该如何防止这种情况？

- 如果 1 个用户`Pool`在用户的`solo`列被更改之前查询，那么现在该用户在结果集中返回，但从技术上讲，他不是单独的

- 我还面临哪些其他并发/线程安全问题？还有比这更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T20:20:11.020

解决这个问题的一个非常简单的方法是将你的算法包装在一个事务中，将隔离级别设置为可序列化，并在死锁的情况下重试整个业务操作。这应该可以解决您在问题中的所有顾虑。

在如此复杂的情况下，使您的应用程序能够抵抗死锁并不容易。我了解您刚刚开始使用数据库中的锁定和并发。这个解决方案虽然不完美，但可能就足够了。

如果您需要更多复杂性，您可能需要围绕悲观锁定进行一些研究。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T19:13:17.380

我认为部分问题在于“Solo”字段是多余的。它只是指示“匹配”表中是否存在有效条目。我建议删除它，而只是将“池”表加入“匹配”表，因此您不必担心保持两者同步的问题。

其他并发问题可以通过使用并发跟踪字段来解决。请参阅[在 ASP.NET MVC 应用程序中使用实体框架处理并发](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/handling-concurrency-with-the-entity-framework-in-an-asp-net-mvc-application)。

此外，这只是我的意见，但您可能需要考虑使用“审计”类型的表来保存已删除的条目，或者切换到使用临时表来“匹配”，而不是简单地删除条目。这些信息在未来可能非常有用，用于调整匹配算法等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T19:24:08.760

排队是个好主意。如果对匹配的每个请求都已排队，则查询池将不会出现争用或死锁。

# c# - 访问属性内的属性

> ID：12269018
> 
> 赞同：2
> 
> 时间：2012-09-04T18:04:37.077
> 
> 标签：c#, reflection, attributes

我有一个属性，它应用了一个属性。如何从属性 getter 或 setter 内部访问属性？

```
class Person {

    [ID("A","B")]
    public Address HomeAddress
    {
        get
        {

            // Get values A and B here ?

        }
        set { }
    }
} 
```

真的不知道该怎么做。

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T18:08:20.693

```
class Person {

    [ID("A","B")]
    public Address HomeAddress
    {
        get
        {
             System.Attribute[] attrs = System.Attribute.GetCustomAttributes(Person);
             // use attrs[0] to get "A";
             // use attrs[1] to get "B";
        }
        set { }
    }
} 
```

Ps.：我现在没有用Visual Studio，直接写到这里。抱歉，如果您发现任何小错误。

* * *

看看[这篇 MSDN 文章](http://msdn.microsoft.com/en-us/library/z919e8tw.aspx)。

```
System.Attribute[] attrs = System.Attribute.GetCustomAttributes(Person);  // Reflection. 

// Displaying output. 
foreach (System.Attribute attr in attrs)
{
     System.Console.WriteLine(attr);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T18:08:31.830

您可以尝试使用此代码

```
PropertyInfo[] propertyInfo = type.GetProperties();
foreach (var m in propertyInfo )
{                    

      foreach (Attribute a in m.GetCustomAttributes(true))
      {

      }
 } 
```

# android - 为什么 Android 文档说 Intent Extras 需要包前缀

> ID：12269019
> 
> 赞同：32
> 
> 时间：2012-09-04T18:04:37.563
> 
> 标签：android, android-intent

根据 Android 文档 Intent 额外名称必须有一个包前缀。很长一段时间以来，我一直在使用不带前缀的 Intent 额外名称，似乎没有发生冲突的机会，因为真正重要的是 Intent 操作是唯一的。那么文档是错误的还是我遗漏了什么？

[putExtra](http://developer.android.com/reference/android/content/Intent.html#putExtra%28java.lang.String,%20boolean%29)的文档说：

向意图添加扩展数据。该名称必须包含包前缀，例如应用程序 com.android.contacts 将使用“com.android.contacts.ShowAll”之类的名称。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-16T18:27:46.630

我相信 Android 文档建议使用完全合格的附加功能来处理不常见的边缘情况。边缘情况是当你是：

*   编写可以使用公共 Intent 操作（例如 Intent.ACTION_VIEW）启动的 Activity

和

*   对于您自己的使用，您希望能够将自定义附加内容传递给上述 Activity，而不会干扰正在执行完全相同的事情并且可能具有相同名称但含义或格式不同的附加内容的另一个 Activity

呸，这一切听起来都不太可能。如果您不处理公共 Intent 操作，那么似乎仍然不需要完全限定您的附加功能，但我想如果您是偏执型，那么一直这样做并没有什么坏处。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T21:10:57.470

Intent 可以传递给其他应用程序和它自己的系统，所以礼貌是使用包命名空间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-17T06:38:44.537

来自[官方教程](https://developer.android.com/training/basics/firstapp/starting-activity)：

> 使用您的应用程序包名称作为前缀来定义意图附加项的键是一种很好的做法。这样可以确保密钥是唯一的，以防您的应用程序与其他应用程序交互。

除非您的应用程序与其他应用程序交互，或者您预见到将来可能需要这样做，否则您可以安全地在附加组件中省略包前缀。

# c# - Outlook 插件 - Folder.ItemAdd 返回 parent.Name 作为源而不是目标

> ID：12269020
> 
> 赞同：2
> 
> 时间：2012-09-04T18:04:45.523
> 
> 标签：c#, visual-studio-2010, visual-studio, outlook, outlook-addin

我是 Outlook 插件开发的新手。我正在编写一个简单的应用程序，它打印出电子邮件被拖入的文件夹的名称。IE：收件箱到收件箱中的子文件夹。我遇到的问题是，有时会返回正确的 MailItem.Parent.Name，但大多数情况下它是源文件夹而不是目标文件夹。我不明白为什么这可能是因为应该为目标上的 ItemAdd 触发事件。

这是一些代码：

```
public Microsoft.Office.Interop.Outlook.Application OutlookApplication;
public Inspectors OutlookInspectors;
public Inspector OutlookInspector;
public MailItem OutlookMailItem;
private MAPIFolder inboxFolder;
private MailItem msg;
private Folder fdr;

public void OnConnection(object application, Extensibility.ext_ConnectMode connectMode, object addInInst, ref System.Array custom)
{
  OutlookApplication = application as Microsoft.Office.Interop.Outlook.Application;
  OutlookInspectors = OutlookApplication.Inspectors;
  OutlookInspectors.NewInspector += new Microsoft.Office.Interop.Outlook.InspectorsEvents_NewInspectorEventHandler(OutlookInspectors_NewInspector);

  inboxFolder = this.OutlookApplication.Session.GetDefaultFolder(OlDefaultFolders.olFolderInbox);

  foreach (Folder f in inboxFolder.Folders)
  {
    f.Items.ItemAdd += new ItemsEvents_ItemAddEventHandler(InboxItems_ItemAdd);
  }
}

void InboxItems_ItemAdd(object Item)
{
  msg = Item as MailItem;
  fdr = msg.Parent as Folder;

  MessageBox.Show("Folder Name: " + fdr.Name);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T15:13:44.007

我不知道你是如何让`Items.ItemAdd`事件发生的。我无法让您的示例正常工作，因此我创建了自己的示例。以下每次都对我有用，它总是显示目标文件夹名称。如果您不专门将集合保留`Outlook.Items`为类成员，则永远不会触发事件。请参阅[相关的 SO 帖子](https://stackoverflow.com/a/9539705/175679)。

```
private Outlook.Folder inbox;
private List<Outlook.Items> folderItems = new List<Outlook.Items>();

private void ThisAddIn_Startup(object sender, System.EventArgs e)
{
    inbox = this.Application.Session.GetDefaultFolder(Outlook.OlDefaultFolders.olFolderInbox) as Outlook.Folder;
    for (int i = 1; i < inbox.Folders.Count+1; i++)
    {
        folderItems.Add((inbox.Folders[i] as Outlook.Folder).Items);
        folderItems[i - 1].ItemAdd += (item) =>
        {
            Outlook.MailItem msg = item as Outlook.MailItem;
            Outlook.Folder target = msg.Parent as Outlook.Folder;
            string folderName = target.Name;
        };
    }
} 
```

# php - 提取div内的div标签

> ID：12269023
> 
> 赞同：0
> 
> 时间：2012-09-04T18:05:08.937
> 
> 标签：php, arrays, html, preg-match

我想在 div 中提取 div 标签...

post.php 文件：

```
<body>
<div class="home">

<div id="post_message_14674248">Content number 14674248</div>
<div id="post_message_14674255">Content number 14674255</div>
<div id="post_message_14674278">Content number 14674278</div>
<div id="post_message_14674279">Content number 14674279</div>
<div id="post_message_14674283">Content number 14674283</div>
<div id="post_message_14674290">Content number 14674290</div>
.
.
.
.
</div>
</body> 
```

extract.php 文件：

```
<?php 
$html = file_get_contents("post.php");
   $pattern = "/(<div id=\"post_message_)(.*)(<\/div>)/";
   preg_match_all($pattern, $html, $matches);
   print_r($matches);

?> 
```

但它给了我一个空数组：

```
Array ( [0] => Array ( ) [1] => Array ( ) [2] => Array ( ) [3] => Array ( ) ) 
```

我想要这样：

```
Content number 14674248
Content number 14674255
Content number 14674278
Content number 14674279
Content number 14674283
Content number 14674290 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T18:18:09.143

```
$html = new DOMDocument(); 
$html->loadHTMLFile("post.php");
$xpath = new DOMXPath($html);
$filtered = $xpath->query("//div[@class='home']/div");

foreach($filtered as $one){
    echo $one->nodeValue."\n";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T18:08:12.360

验证[file_get_contents()](http://php.net/file_get_contents)是否正常工作。如果我运行以下代码，我会得到结果：

```
<?php 
$html = '<div class="home">

<div id="post_message_14674248">Content number 14674248</div>
<div id="post_message_14674255">Content number 14674255</div>
<div id="post_message_14674278">Content number 14674278</div>
<div id="post_message_14674279">Content number 14674279</div>
<div id="post_message_14674283">Content number 14674283</div>
<div id="post_message_14674290">Content number 14674290</div>
</div>
</body>';
   $pattern = "/(<div id=\"post_message_)(.*)(<\/div>)/";
   preg_match_all($pattern, $html, $matches);
   print_r($matches);

?> 
```

您可能还想将正则表达式更改为如下所示：

```
$pattern = "/<div id=\"post_message_.*?>(.*?)<\/div>/"; 
```

# sql - SQL（oracle）比较两个列表

> ID：12269027
> 
> 赞同：1
> 
> 时间：2012-09-04T18:05:23.617
> 
> 标签：sql, oracle

我有一个表，其中有一列包含一个列表（是的，我知道这违反了规范化）。我试图找到一些“重叠”功能，即

```
SELECT * FROM TABLE WHERE 'a,b,c' OVERLAP TABLE.LISTCOLUMN 
```

因此，`LISTCOLUMN`包含 a、b 或 c 中的任何一个或全部

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T18:36:20.880

两种选择：

使用[`regexp_like`](http://psoug.org/reference/regexp.html)，如果您使用的是 Oracle 10g 或更高版本：

```
select *
  from my_table
 where regexp_like(listcolumn, '[abc]') 
```

这匹配列中`a` *或* `b` *或* `c`列中的表中的所有内容。

或者，您可以执行更可怕且难以维护的操作：

```
select *
  from my_table
 where listcolumn like '%a%'
    or listcolumn like '%b%'
    or listcolumn like '%c%' 
```

### 这是一个小[SQL Fiddle](http://www.sqlfiddle.com/#!4/12ba6/3)来演示。

但是，正如您已经知道的那样，从长远来看，正确地规范化您的数据库将为您节省很多痛苦。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-04T18:09:19.797

你的意思是：

Select * from TABLE1 where LISTCOLUMN in ('a','b','c')

# wordpress - 如果我翻译现有页面，Qtranslate 会显示主页

> ID：12269031
> 
> 赞同：2
> 
> 时间：2012-09-04T18:05:41.833
> 
> 标签：wordpress, translate, qtranslate

当我创建一个新页面并翻译它时，效果很好。

但是，如果我尝试翻译在我安装此插件之前创建的现有页面，它会重定向或显示主页。

这是我的调试信息

[http://pastebin.com/YqZ4CzAm](http://pastebin.com/YqZ4CzAm)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T07:32:25.163

@SNaRe，几个月前我遇到了同样的问题，经过努力，我们放弃了使用 qTranslate 的想法。

最后我们使用 wpml 插件（[The WordPress Multilingual Plugin](http://wpml.org/)），这是一个不错的选择。

PS 我不是在推荐你购买商业插件或者我不代表 WPML。我正在分享我的想法，以改善社区。我们选择 WPML 是因为我们的客户已准备好付款，否则我们将搜索其他免费插件选项。

Also, Here is a reason why we choose WPML instead qTranslate, posted on WordPress Codex site...

[http://codex.wordpress.org/Multilingual_WordPress](http://codex.wordpress.org/Multilingual_WordPress)

some excerpt from same post...

> The free qTranslate plugin appears to be broken with WordPress v3.0, but you can try [Multisite Language Switcher](http://wordpress.org/extend/plugins/multisite-language-switcher/), [Multilingual Press](http://wordpress.org/extend/plugins/multilingual-press/) or purchase WPML.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T22:04:40.250

如果您暂时停用 qTranslate，您可以在 HTML 视图中看到它对您的内容的作用：

```
<!--:en-->
...code...
<!--:-->

<!--:ja-->
...code...
<!--:--> 
```

这就是它在内部的工作方式。在您的编辑器中切换到 HTML 视图，并将您的帖子放在这些括号之间。如果您之后重新激活 qTranslate，则帖子不应再重定向。

如果您进行了任何重定向设置，还请检查您的 qTranslate 设置。

但请注意以下几点：qTranslate 会永久销毁您干净的 WordPress 帖子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T00:41:34.137

这可能是您安装的其他插件的问题。您是否安装了任何缓存插件？如果是这样，请尝试禁用它们并查看问题是否仍然存在。读[这个](http://wordpress.org/support/topic/plugin-w3-total-cache-qtranslate-redirect-homepage-with-w3tc)，听起来和你的问题有些相似。

# c# - AutoMapper 映射两个共享接口的具体类

> ID：12269033
> 
> 赞同：1
> 
> 时间：2012-09-04T18:05:48.430
> 
> 标签：c#, interface, automapper, automapper-2

我有一个描述两个对象的接口。一个是 DAO，另一个是 BO。所以，这就是它的样子：

```
public interface IOrder ...

public class OrderDAO : IOrder ...

public class OrderBO : IOrder ... 
```

我想将 OrderDAO 映射到 OrderBO。我最初的想法是，我可以简单地将接口映射到接口并提供两个具体对象，如下所示：

```
AutoMapper.Mapper.Map<IOrder, IOrder>(myOrderDAO, myOrderBO); 
```

但是，这并不是开箱即用的。我仍然必须创建一个地图才能将数据从 myOrderDAO 获取到 myOrderBO。

```
AutoMapper.Mapper.CreateMap<IOrder, IOrder>(); 
```

我不确定这对我有多大意义，而且我觉得我“做错了”，事实上。所以我的问题有两个。

1.  在上述场景中映射的最佳方式是什么？
2.  为什么我需要为同一个界面创建地图？

先谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T18:42:59.387

1.  这是映射的好方法。但是，如果您想减少 CreateMap 调用的数量，请创建一个创建所有地图的方法，然后在每个应用程序域中调用一次。例如来自一些静态构造函数或另一个应用程序启动事件。看看[他们如何在他们的入门中推荐它](https://github.com/AutoMapper/AutoMapper/wiki/Getting-started)

2.  即使是相同的界面，我猜仍然应该有一张地图。从好的方面来说，它使您的生活更轻松，您不必创建类似的地图等等。不过，这可能是一种优化。

# actionscript-3 - Flex 错误 #1074：非法写入模块上的只读属性 Property

> ID：12269041
> 
> 赞同：0
> 
> 时间：2012-09-04T18:06:23.370
> 
> 标签：actionscript-3, apache-flex, flex3

我一直在我的日志中看到这样的错误，并相信它可能会影响我正在尝试执行的数据网格排序。关于我应该寻找什么的任何想法？谷歌搜索拉了很多人写关于这个问题，但没有修复。

```
#1074: Illegal write to read-only property Object on Module 
```

这是我认为导致它的代码示例，尽管它看起来很基本，但我认为这就是它发生的地方，并且该对象是只读的并试图被设置。

```
public function get objectName():String
{
    if(object)
        return object.name;
    return '';
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T18:28:00.463

您应该寻找一个类 Module 的实例，您试图在其中设置一个名为 Object 的属性。

所以让我们在你的代码中说你有变量的地方`mod:Module`。错误是说你试图做这样的事情：

```
mod.Object = someValueThatDoesNotMatter;

//OR possibly

mod["Object"] = someValueThatDoesNotMatter; 
```

但是 Module 类的 Object 属性是只读的。但是 as`Object`是一个原始类型关键字，它可能永远不会起作用。

如果您发布更多代码，可以给出更好的答案。

# jpa - 在 OneToMany 关系中使用表达式

> ID：12269046
> 
> 赞同：1
> 
> 时间：2012-09-04T18:06:38.937
> 
> 标签：jpa

我有两个实体

```
@Entity  
@Table(name="MASTER")  
public class Master {  
    @Id  
    @Column(name="MASTER")  
    private Integer id;  

    @OneToMany(mappedBy="master")  
    private List<Detail> details;    

    ...  
}  

@Entity  
@Table(name="DETAIL")  
public class Detail {  
    @ManyToOne  
    @JoinColumn(name="MASTER",referencedColumnName="MASTER")
    private Master master;
    ...  
} 
```

这些实体所在的表`MASTER`和确实是具有某些特殊性的旧 dbase 表，最糟糕的是它们使用的索引类型。`DETAIL``persisted``(.dbf files with .mdx indexes)`

表 DETAIL 有一个基于表达式“str(MASTER, 7)”的索引，如果 sql 语句使用相同的公式，该索引仅由 jdbc 驱动程序使用。

使用上面的代码，`sql`检索主节点详细信息的语句是

```
SELECT MASTER, ..., FROM DETAIL WHERE MASTER = ? 
```

并且不使用`index`，所以性能非常非常糟糕。

有什么方法可以注释类，以便执行的 SQL 是

```
SELECT MASTER, ..., FROM DETAIL WHERE STR(MASTER,7) = STR(?,7)? 
```

如果必须，我不介意使用`eclipselink`扩展（或移至`hibernate`）。

如果这不可能，那么最好的选择是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T13:56:45.020

如果您的查询是 JPQL，您可以使用，

```
Select d from Detail d where FUNC('STR', d.master.id, 7) = FUNC('STR', :id, 7) 
```

如果您尝试自定义映射，您可以使用 DescriptorCustomizer 覆盖 selectQuery 的 Expression 或 SQL，

```
mapping.setSelectionSQLString("select * from detail where str(master, 7) = str(#MASTER, 7)") 
```

如果您尝试自定义 find() 查询，则可以使用 DescriptorCustomizer 覆盖描述符的 queryManager 上 readObject 的 SQL。

# android - android sdk - 无法在 ubuntu 12 上运行

> ID：12269050
> 
> 赞同：0
> 
> 时间：2012-09-04T18:07:04.757
> 
> 标签：android, ubuntu, sdk

我正在尝试按照以下 URL 中的说明在我的 ubuntu 机器上安装 android sdk。

[http://forums.team-nocturnal.com/showthread.php/772](http://forums.team-nocturnal.com/showthread.php/772)

但是......我似乎无法添加个人档案 nilarimogard 而不会收到错误消息。
当我尝试：

```
 sudo add-apt-repository ppa:nilarimogard/webupd8 
```

我收到消息：

> 回溯（最后一次调用）：文件“/usr/bin/add-apt-repository”，第 125 行，在 ppa_info = get_ppa_info_from_lp(user, ppa_name) 文件“/usr/lib/python2.7/dist-packages/softwareproperties /ppa.py"，第 80 行，在 get_ppa_info_from_lp curl.perform() pycurl.error: (7, "couldn't connect to host") root@jll:/home/me/Documents#

有什么建议么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T13:55:23.943

解决方案是手动编辑 /etc/apt/sources.list 并添加：

deb [http://ppa.launchpad.net/nilarimogard/webupd8/ubuntu](http://ppa.launchpad.net/nilarimogard/webupd8/ubuntu) oneiric main

# html - 为什么我的背景图片被嵌套弄乱了 ?

> ID：12269053
> 
> 赞同：1
> 
> 时间：2012-09-04T18:07:10.233
> 
> 标签：html, image, hyperlink, html-table

我在这里阅读了将 a`<div>`变为链接的提示： [将 div 变为链接](https://stackoverflow.com/questions/796087/make-a-div-into-a-link)

那里的一个答案表明，即使在表格中也可以使用。

目标是在不使用图像映射或 CSS 的情况下使图像中的多个文本项可点击。图像位于页面上的表格单元格中，并且`<div>`位于内部，`<td>`以便链接正确定位在图像中的文本上方。

它按预期工作，除了表格单元格中的背景图像在添加`<div>`.

这是代码：

```
<td height="419" align="left" valign="top" background="images/bg_FINAL.jpg"><img src="newimages/Splashpage.jpg" alt="" style="position:relative; left:0; top:0; " >
        <div style="height:100px; width:142px; float:none; position:relative; left:265px; top:-223px; " >
        <a href="http://SomeURL.com" style="position:absolute; top:0; left:0; width:100%; height:100%; display:block; " ></a>
        </div>
</td> 
```

bg_FINAL.jpg 图像重复低于表格的正常高度（本例中为 419px），我不明白为什么。立即删除`<div>`使其看起来再次正常（与表格接壤的纯色）。

PS作为一个新用户，我不能发布图片（显然需要10个声望点），但这里有两个截图显示了这个问题：

[http://www.box.com/s/bo8jef7o4ahy8kbeusdp](http://www.box.com/s/bo8jef7o4ahy8kbeusdp)

[http://www.box.com/s/v2mafsgomj4tksul53rz](http://www.box.com/s/v2mafsgomj4tksul53rz)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T19:13:34.400

这是在黑暗中拍摄的，因为没有提供示例或确切外观的屏幕截图，它可能不是正确的修复，但我希望它可能会有所帮助！

由于您没有声明是否希望背景重复，它会自动重复它自己。图像可能设置为与表格相同的宽度，因此您看不到它在 x 轴上重复，仅在 y 轴上重复。因此，在 td 元素内声明一个样式属性并声明 (background-repeat:none) 应该可以解决问题。

像这样。

```
<td height="419" align="left" valign="top" background="images/bg_FINAL.jpg" style="background-repeat:none;"> 
```

# cryptography - OpenSSL BIGNUM BN_mod_exp 问题

> ID：12269057
> 
> 赞同：2
> 
> 时间：2012-09-04T18:07:17.620
> 
> 标签：cryptography, openssl, bignum

我在使用 OpenSSL 的 BIGNUM 库提出“正确答案”时遇到了一些问题。我正在使用 OpenSSL 1.0.1c（2012 年 5 月，标准 Mint 存储库中提供的最新包）。

我将 BIGNUM 用于使用有限域（又名伽罗瓦域）的密码学项目。基本上我有一个大素数 (q) 和一个安全素数 (p, 其中 p = 2q + 1)。我的领域是 q 阶的 Fp。

我需要生成一个“g”。我发现最简单的方法是选择一个随机的“h”（1 < h < p-1），然后执行 g = h^((p-1)/q) mod p。有了“g”，我就可以通过执行 g^q mod p = 1 来证明它在 FF 中。

当我在纸上为任何合理的小数字这样做时，它是正确的。但是，当我使用 OpenSSL 和大素数时，它不起作用！当我测试我的 g^q mod p == 1 的结果是否时，使用 BN_is_one() 会不断失败。如果我打印出这个值，它总是一个大的不相关的素数。

到底是怎么回事？我不确定这里发生了什么，或者我是否误解了什么。

我的代码片段如下：

```
BN_generate_prime(q, KEYSIZE - 1, 0, 0, 0, 0, 0); //generate "q"

// Calculate "p" = 2q + 1 
BN_lshift1(p, q);
BN_add(p, p, one);  //one = BN_one()

// 1: gExp = (p-1)/q
// 2: h =>   1 < h < (p-1)
// 3: g = h^gExp mod p
BN_div(gExp, NULL, pMinusOne, q, ctx);      // (1)
BN_pseudo_rand_range(h, pMinusOne);         // (2)
BN_mod_exp(g, h, gExp, p, ctx);             // (3)

BN_mod_exp(temp, g, q, p, ctx); // g^q mod p = 1, or it should 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T20:35:31.490

当您在代码段中计算它时`p`，它不一定是素数，它只是一个`2*q+1`具有`q`素数形式的数字。对于 的许多小值`q`，这`p`恰好是素数，但这主要是巧合，如果您检查过，`BN_is_prime` 您可能会发现`p`您生成的 s 未通过测试。

相反，`p`通过设置`safe`参数直接生成`BN_generate_prime`，然后`q`通过右移计算，因为`safe`prime 将是您需要的形式，并且砍掉最低位会给您一个 prime `q`。

# eclipse - Eclipse - 调试线程执行时烦人的线程切换

> ID：12269059
> 
> 赞同：2
> 
> 时间：2012-09-04T18:07:27.870
> 
> 标签：eclipse, debugging

我发现我的日食有一个非常烦人的问题。在调试特定线程的执行时，当我按下`F6`（下一步）时，控件会转到其他一些随机线程。

![在此处输入图像描述](../Images/12410a1d0f86bf1fa1eee00adce3ddf9.png)

在上面的屏幕截图中，我正在调试`[Thread-691]`，当我下一步时，*有时*eclipse 会远离所选线程！

知道为什么会发生这种情况以及如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T18:48:56.143

我以前在调试运行相同代码的并发线程时看到过这种情况。我在代码中设置了一个断点，如果该线程碰巧遇到相同的断点，调试器将切换到另一个线程。

# java - 带有 JavaFX 浏览器的 Twitter4j AccesToken

> ID：12269061
> 
> 赞同：0
> 
> 时间：2012-09-04T18:07:39.007
> 
> 标签：java, twitter, oauth-2.0, javafx-2, twitter4j

我想使用带有 javafx 的嵌入式浏览器对用户进行身份验证。我可以获得 twitter 给我的 PIN（字符串），但是当我尝试创建 AccesToken 时，它没有正确创建它。（我无法获得我的令牌或 tokenSecret，两者都为空）。

这是我的代码：

```
public static void main(String[] args)
    {
    Application.launch(args);
    }

@Override
public void start(Stage primaryStage) throws Exception
    {
    primaryStage.setTitle("WebView test");

    WebView browser = new WebView();

    engine = browser.getEngine();

    twitter = new TwitterFactory().getInstance();
    twitter.setOAuthConsumer(CONSUMER_KEY, CONSUMER_SECRET);

    requestToken = twitter.getOAuthRequestToken();

    String url = requestToken.getAuthorizationURL();

    engine.load(url);

    engine.getLoadWorker().stateProperty().addListener(new ChangeListener<State>()
        {

            public void changed(ObservableValue ov, State oldState, State newState)
                {
                if (newState==State.SUCCEEDED && engine.getLocation().equals("https://api.twitter.com/oauth/authorize"))
                    {
                     String pin = engine.getDocument().getDocumentElement().getElementsByTagName("code").item(0).getTextContent();
                     printAccesToken(pin);
                    }
                }

        });

    StackPane sp = new StackPane();
    sp.getChildren().add(browser);

    Scene root = new Scene(sp);

    primaryStage.setScene(root);
    primaryStage.show();
    }

private void printAccesToken(String pin)
    {
    AccessToken accessToken = null;

    try
        {
        accessToken = twitter.getOAuthAccessToken(requestToken, pin);
        }
    catch (TwitterException e)
        {
        e.printStackTrace();
        }
    System.out.println(accessToken.getToken());

    }

/*------------------------------------------------------------------*\
|*                          Attributs Private                       *|
\*------------------------------------------------------------------*/
private WebEngine engine;
private Twitter twitter;
private RequestToken requestToken;
private static final String CONSUMER_KEY = "xxx";
private static final String CONSUMER_SECRET = "xxx"; 
```

我基于 twitter4j 提供的代码示例，据我所知，我正在做完全相同的事情，只是我得到的字符串不是通过键盘输入的，我直接从浏览器中得到它......

[http://twitter4j.org/en/code-examples.html](http://twitter4j.org/en/code-examples.html)

基于示例 #7

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-26T17:02:08.573

Twitter API 以图像格式返回 pin。它不提供字符串或整数中的引脚。那它的。您可以提示用户手动输入密码。

# web-services - 选择哪个网络服务？

> ID：12269067
> 
> 赞同：1
> 
> 时间：2012-09-04T18:07:58.397
> 
> 标签：web-services, rest, soap

我必须开发一个像**贝宝**这样的网站，它支持我需要实施网络服务的**在线交易。**简而言之，我需要使用 Web 服务构建一些**易于使用的 API**。但我真的很困惑从**REST 或 SOAP**中选择哪一个。

***Java EE***将用于开发网站。我们的 API 将主要用于**GET 、 UPDATE （PUT 在 http 动词中）**

### 我需要的 ：

*   **错误处理能力：**确保调用成功与否的清晰概念。SOAP**内置了**它，但 REST 没有。这对我们来说是*必须的*要求。
*   **简单性：** 由于我们的 API 将被各种客户使用，它需要有一个相对较小的学习曲线。在这种情况下，REST 将是一个很好的选择。*一个必须有的*属性
*   **缓存能力：**缓存肯定会是一个加分项，因为它可以节省大量资源。SOAP 不支持缓存。*拥有和高优先级*要求是一件好事。
*   **人类可读的结果：**出于调试目的可能是必要的。但*不是必须具备的*属性。

现在我应该采取哪种方式至少满足必须具备和高优先级的要求，这些要求是：

*   **错误处理能力**
*   **简单**
*   **缓存能力**

我用*谷歌搜索了很多*，但未能做出决定。如果有人可以给我**除了这两个之外更好的建议**，不胜感激。我**只需要一个满足我要求的解决方案就可以**了。

我在谷歌搜索时发现的一些资源：

*   [SOAP 与 REST](http://spf13.com/post/soap-vs-rest/)
*   [选择正确的 Web 服务协议](http://geeknizer.com/rest-vs-soap-using-http-choosing-the-right-webservice-protocol/)
*   [何时使用哪个 Web 服务](http://www.infoq.com/articles/rest-soap-when-to-use-each)

我的谷歌搜索关键词是：SOAP 与 REST，适合在线交易的 Web 服务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T16:54:18.487

海事组织，使用`REST`.

*   很简单，你甚至[可以向你的妻子解释](http://tomayko.com/writings/rest-to-my-wife)
*   允许[缓存](https://www.rfc-editor.org/rfc/rfc2616#section-13)，只要解决了 REST 问题，缓存就可以了
*   一个体面的限制人类可读的结果
*   错误处理是默认的，我的意思是每个人都`protocol`应该定义它。

# drawing - 在drawingManager'overlaycomplete'上添加信息窗口

> ID：12269068
> 
> 赞同：0
> 
> 时间：2012-09-04T18:07:59.070
> 
> 标签：drawing, maps

因此，我一直在弄清楚如何在 overlaycomplete 事件期间将信息窗口添加到标记。我已经想出了如何为标记添加标题，但我无法让信息窗口工作....有什么帮助吗？

这是我目前必须创建标题的代码...

```
google.maps.event.addListener(drawingManager, 'overlaycomplete', function(event) {
  if (event.type == google.maps.drawing.OverlayType.MARKER) {
     event.overlay.setTitle("Hello");
  }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T20:27:40.510

```
google.maps.event.addListener(drawingManager, 'overlaycomplete', function(event) {
  if (event.type == google.maps.drawing.OverlayType.MARKER) {
    //event.overlay.setTitle("Hello");
    var infowindow = new google.maps.InfoWindow({
      content: '<div id="content" onmouseover="updateContent()">Hello</div>',
      maxWidth: 10
    });
    google.maps.event.addListener(event.overlay,'click',function(){
      infowindow.open(map,event.overlay);
    });
  }
}); 
```

# c++ - Visual Studio中的Onexit.c错误？

> ID：12269072
> 
> 赞同：2
> 
> 时间：2012-09-04T18:08:18.780
> 
> 标签：c++, visual-studio, dll

当我尝试在发布模式下运行我的程序时，它会直接进入

> FPS Game.exe 中 0x6f2426ef (msvcr100.dll) 处未处理的异常：0xC0000005：访问冲突写入位置 0x12817c19。
> 
> 这是在 onxit.c 第 325 行的静态 _onexit_t __cdecl _dllonexit_nolock 函数中：*((*pend)++) = (_PVFV)func;

而且我不知道为什么我尝试了很多我无法得到它的东西，如果这就是原因，我将 sdl 链接到我的应用程序，但我真的需要帮助。

这是微软出错的代码：

```
static _onexit_t __cdecl _dllonexit_nolock (
        _onexit_t func,
        _PVFV ** pbegin,
        _PVFV ** pend
        )
{
        _PVFV   *p=NULL;
        size_t oldsize;

        /*
         * First, make sure the table has room for a new entry
         */
        if ( (oldsize = _msize_crt(*pbegin)) <= (size_t)((char *)(*pend) -
            (char *)(*pbegin)) )
        {
            /*
             * not enough room, try to grow the table
             */
            size_t grow=__min(oldsize, MAXINCR * sizeof(_PVFV));
            if((_HEAP_MAXREQ-grow<oldsize) ||
                ((p = (_PVFV *)_realloc_crt((*pbegin), oldsize + grow)) == NULL))
            {
                /*
                 * failed, try to grow by ONEXITTBLINCR
                 */
                grow=MININCR * sizeof(_PVFV);
                if ( (_HEAP_MAXREQ-grow<oldsize) ||
                    ((p = (_PVFV *)_realloc_crt((*pbegin), oldsize + grow)) == NULL ))
                {
                    /*
                     * failed again. don't do anything rash, just fail
                     */
                    return NULL;
                }
            }

            /*
             * update (*pend) and (*pbegin)
             */
            (*pend) = p + ((*pend) - (*pbegin));
            (*pbegin) = p;
        }

        /*
         * Put the new entry into the table and update the end-of-table
         * pointer.
         */
         *((*pend)++) = (_PVFV)func;

        return func;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T18:48:35.113

基于多年的经验和许多类似的经验，我的经验法则之一是“不，您不仅在编译器中发现了错误”。

首先使用调试信息构建版本 - 这至少应该让您看到堆栈并可能让您知道出了什么问题。

通常这类问题是由

*   使用错误的链接器设置或库（这是 MSVC / windows 独有的）
*   链接到未使用相同代码生成选项构建的发布库；
*   未正确初始化变量（通常不会在调试模式下显示）
*   在所有项目中没有一致的编译选项

# asp.net - 将静态数据存储在数据库或文件系统中

> ID：12269076
> 
> 赞同：3
> 
> 时间：2012-09-04T18:08:38.553
> 
> 标签：asp.net, .net, sql, xml, localization

目前，我们通过创建不同的查找表（性别、状态等...）将静态数据（例如性别、婚姻状况、状态等）存储到数据库中。我们有近 10 个查找表。所有这些表都是事务表 - 用户（存储所有用户的人口统计信息）的 FK。其中一些静态数据也被其他事务表使用。现在，在获取用户信息时，我们通常会加入这些表并获取相关文本。当然，这么多的连接会产生性能问题，而且根据 MSDN，我们在选择查询中的连接数不应超过 5 个。现在为避免这种情况，我们可以将所有静态数据移动到 xml 文件并从中读取。当然我们会缓存 xml 数据，所以它只会被读取一次。我想知道是不是一个好办法。我可以看到以下权衡 -

1.  无法保持参照完整性。
2.  在使用负载平衡时，所有服务器都需要有 xml 文件。

我不希望这些值在枚举中，因为这些需要本地化。我看到保留在 xml 中的唯一优点是它减少了 DB 的开销（创建 10 个表）。我可以很好地缓存存储在 DB 中的静态数据。那么想知道仍然将数据存储在 xml 中是比 DB 更好的选择吗？

PS：应用程序是 Web 应用程序，在 .net 3.5 中开发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-21T12:45:32.247

## 解决方案 1

不要使用合成键，即您的 MaritalStatus 表具有 msId 和 StatusText 列（例如 1，“Married”），并以 msId 为键。然后，您的数据表包含一个 msId 字段，并且必须始终连接到 MaritalStatus 表才能获取文本。相反，只需存储有用的文本，并将其设置为唯一键。在这种情况下，表格将仅包含单个文本列（“已婚”、“单身”等）。然后数据表有一个 MStatus 文本字段，其中有一个指向 MaritalStatus 表的外键。但是当你读取数据表时，你已经有了状态文本，所以你不需要加入引用表。该约束保持数据完整性。当然，如果您需要在引用表中存储多个列，这将不起作用，但我仍然建议尽可能避免使用合成键，

## 解决方案 2

有一个 ReferenceData 表。为类型、ID 和值创建列。使用类型字段而不是单独的表名，例如“MaritalStatus”。连接到为 Type 列指定文字值的引用表，然后匹配 Id 或 Value。这可能也适用于 FK 约束（但需要检查不同的数据库软件）。

# javascript - 数字和字符串全局对象的用途？

> ID：12269080
> 
> 赞同：1
> 
> 时间：2012-09-04T18:08:53.123
> 
> 标签：javascript

我可以通过做

```
var n1 = 1; 
```

或者

```
var n1 = Number(1); 
```

与字符串相同

```
var s1 = 'string1'; 
```

或者

```
var s1 = String('string1'); 
```

在什么情况下会想要使用全局对象而不是更简单的方法。

JavaScript 全局对象 String 和 Number 在编程时有用吗？

同样对于

```
Regexp, Boolean, Function 
```

这些都可以使用适当的语法来实例化，有什么目的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T18:13:13.077

让它们可用允许我们扩展它们。例如，如果浏览器没有实现它，您可以`Array.isArray`自己添加该方法。

```
Array.isArray = function( arr ) {
    return Object.prototype.toString.apply( arr ) === '[object Array]';
}; 
```

对于大多数 polyfill 来说，这很好。

另一个很好的例子是[`trim`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/Trim)字符串方法。

```
String.prototype.trim = function() {
    return this.replace(/^\s+|\s+$/g,'');
}; 
```

否则，真的没有其他用途。用 转换成数字更好，用`+`转换成字符串更好`'' +`，等等。

我经常使用的唯一一个是`Regexp`，因为它很方便`new Regexp`（保存在变量中，因为需要较少的转义或者因为它允许在多行中分解正则表达式）。

*编辑：*我只是想到了另一种用途：

```
arr.filter( Boolean ); // Removes falsy values from the array "arr"
arr.map( Number ); // Converts every element of the array to a Number 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T18:12:29.470

当`Number()`作为函数调用时，它会对作为参数传递的值执行类型转换。对于`String()`. `String(10)`将数字转换`10`为字符串`'10'`

```
var n1 = 1;
// => 1

var n2 = 's';
// => 's' 
```

但：

```
var n3 = Number(1);
// => 1

var n4 = Number('s');
// => NaN 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T18:13:03.247

来自[MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Number)：

> **Number 对象的主要用途是：**
> 
> 如果参数不能转换为数字，则返回 NaN。
> 
> 在非构造函数上下文中（即，没有 new 运算符），Number 可用于执行类型转换。

更一般地说（我邀请您阅读 MDN 中其他包装类的文档），这些类用于执行类型转换或断言。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-04T18:14:40.080

还有第三个：

```
var s1 = new String('string1'); 
```

速记`var s1 = 'string'`实际上是上面那行的速记。它们几乎相同。

你给的另一条线，

```
var s1 = String('string1'); 
```

, 实际上是一种类型转换。您正在将字符串类型转换为字符串，这是没有意义的。但你也可以写：

```
var s1 = String(10); 
```

，在这种情况下，您将数字 10 类型转换为字符串，这显然与字符串到字符串的类型转换相反。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-04T18:19:10.517

使用对象而不是基元时，有很多次和一些地方具有优势。

1）对象可以有方法。像`"hello world".length`将原始字符串“自动装箱”到对象一样简单，这样人们就可以使用长度属性。

2) 使用`String`and`Number`构造函数是转换为字符串/数字的*一种*方法，尽管通常有更好的方法。

# php - 在不知道表名和列名的情况下如何从 mysql 数据库中获取所有内容？

> ID：12269091
> 
> 赞同：2
> 
> 时间：2012-09-04T18:09:41.923
> 
> 标签：php, mysql

我在外部域上有一个 mysql 数据库。服务器上未安装 Phpmyadmin。我既不知道表名也不知道列名。有没有办法以某种方式在 PHP 中创建一个视图，向我显示数据库中包含所有列和表名的所有内容？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T18:10:13.053

您可以查询该[`INFORMATION_SCHEMA.COLUMNS`](http://dev.mysql.com/doc/en/columns-table.html)表：

```
SELECT TABLE_NAME, COLUMN_NAME
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_SCHEMA = DATABASE() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T18:14:12.017

在 mysql 命令上，您可以使用`show databases`和`show tables`

或者在 php 脚本上你可以`use mysql_list_dbs()`和`mysql_list_tables()`

[http://php.net/manual/en/function.mysql-list-dbs.php](http://php.net/manual/en/function.mysql-list-dbs.php)

[http://php.net/manual/en/function.mysql-list-tables.php](http://php.net/manual/en/function.mysql-list-tables.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T18:40:12.457

此脚本使用 PDO 执行返回数据库表和表列的查询。它使用您可以个性化的简单布局。

```
<?php

    $host = '';
    $dbname = '';
    $username = '';
    $password = '';

    $db = new PDO("mysql:host=$host;dbname=$dbname;charset=UTF-8", $username, $password);

    $sth = $db->prepare("SHOW TABLE STATUS FROM $dbname");
    $sth->execute();

    $result = $sth->fetchAll();
    foreach ($result as $info) {
        echo "<p><b>".$info['Name']."</b><br />";

        $sth2 = $db->prepare("SHOW COLUMNS FROM $dbname.{$info['Name']};");
        $sth2->execute();
        $result2 = $sth2->fetchAll();
        foreach ($result2 as $info2)
            echo " - ".$info2['Field']."<br />";

        echo "</p>";
    }

?> 
```

# cakephp - cakephp 与 ip 的数据库连接

> ID：12269092
> 
> 赞同：0
> 
> 时间：2012-09-04T18:09:55.413
> 
> 标签：cakephp, database-connection

嗨，我有一个用 cakephp 开发的网站。我想将我的 cakephp 连接到一个带有 ip 的数据库，因为我和我的朋友一起工作到同一个网络我的 ip 是：192.168.0.3 数据库的 ip 到第二台电脑：192.168.0.4

我可以 ping 192.168.0.4 进入第二台运行 xampp mysql 的电脑进入系统。

这是我的数据库配置：

```
public $default = array (
        'datasource' => 'Database/Mysql',
        'persistent' => false,
        'host' => '192.168.0.4',
        'login' => 'login',
        'password' => 'password',
        'database' => 'database',
        'prefix' => ''
    ); 
```

但是给我一个错误：错误：SQLSTATE [HY000] [2003]无法连接到'192.168.0.4'（10061）上的MySQL服务器需要数据库连接并进入第二台电脑这个错误：SQLSTATE [HY000] [2013]在“读取初始通信数据包”时丢失与 MySQL 服务器的连接，系统错误：61 需要数据库连接

pc1 和 pc2 不起作用，但是，如果 pc2（数据库所在的位置）将数据库配置写入主机：localhost，它可以工作。我没有。我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T05:07:59.607

检查您的 MySQL 配置文件 ( `/etc/mysql/my.cnf`) 中的`skip-networking`选项，该选项默认启用。将其注释掉并重新启动 MySQL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T05:18:40.820

如果你正在使用`xampp on Windows`，那么你可以通过编辑文件来解决它`your-xampppath\apache\conf\extra\httpd-xampp.conf`

并找到以下标签

```
# Close XAMPP sites here
<LocationMatch "^/(?i:(?:xampp|licenses|phpmyadmin|webalizer|server-status|server-info))">
    Order deny,allow
    Deny from all
    Allow from ::1 127.0.0.0/8 
    ErrorDocument 403 /error/HTTP_XAMPP_FORBIDDEN.html.var
</LocationMatch> 
```

并添加

```
"Allow from all" 
```

从 ::1 127.0.0.0/8 {line} 允许之后

重新启动xampp，你就完成了！！！！

# iphone - iOS - 延迟后的 Web 服务请求

> ID：12269093
> 
> 赞同：4
> 
> 时间：2012-09-04T18:09:58.457
> 
> 标签：iphone, ios, ipad, delayed-execution, performselector

我有一个搜索栏，其中包含`UITableView`在用户键入时填充（使用 JSON 服务）的建议。这些服务调用需要在 500 毫秒的非打字延迟后进行。如果用户在这 500 毫秒的时间段内开始输入，则需要取消队列中的当前呼叫，并且应用程序必须再等待 500 毫秒的非活动状态才能进行另一个`afterDelay`呼叫。我知道我必须`performSelector:withObject:afterDelay`在整个情况下使用，但我无法在适当的条件下解决。我尝试使用一堆布尔值，但它变得很脏......有什么帮助吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-04T18:21:04.587

我会使用 an`NSTimer`而不是`performSelector:withObject:afterDelay:`. 检测文本何时更改`UISearchBar`并重置计时器。

```
-(void)viewDidLoad {

    search.delegate = self;

}

-(void)searchBar:(UISearchBar *)theSearchBar textDidChange:(NSString *)searchText {

    [timer invalidate];

    timer = [NSTimer scheduledTimerWithTimeInterval:0.5 target:self selector:@selector(callTheService) userInfo:nil repeats:NO];

} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-04T18:17:48.660

这个怎么样，假设你正在检测输入一个`UITextFieldDelegate`方法：

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
    [NSObject cancelPreviousPerformRequestsWithTarget:self selector:@selector(sendNetworkRequest) object:nil];
    [self performSelector:@selector(sendNetworkRequest) withObject:nil afterDelay:0.5];
    return YES;
}

- (void)sendNetworkRequest
{
    // Here immediately send the request
} 
```

我喜欢这种解决此类问题的方法，因为这意味着我不必使用`NSTimer`或跟踪我是否正在等待查看是否输入了更多文本的任何状态。希望这可以帮助！如果您有任何问题，请告诉我。

**编辑：**看到你正在使用搜索栏。原理是一样的，只要把cancel/perform配对放到合适的`UISearchBarDelegate`方法中即可。

# c# - 我是否获得了正确的 WiFi 信号 dBm 读数？

> ID：12269094
> 
> 赞同：1
> 
> 时间：2012-09-04T18:10:05.460
> 
> 标签：c#, networking, wifi, wireless

下面的这个函数从系统获取 WiFi 信号。它目前在我的表单上显示“0”（表示我假设的强连接）。我在公司网络上的工作场所 HP 上运行它的机器。它似乎没有外部 WiFi 按钮等。“0”是我得到的真实值还是需要在真正的无线设备上进行测试？

```
public static int GetSignalStrengthAsInt()
{
    Int32 returnStrength = 0;
    ManagementObjectSearcher searcher = null;
    try
    {
        searcher = new ManagementObjectSearcher( 
            @"root\WMI", 
            @"select Ndis80211ReceivedSignalStrength 
              from MSNdis_80211_ReceivedSignalStrength 
              where active=true");

        // Call the get in order to populate the collection
        ManagementObjectCollection adapterObjects = searcher.Get();

        // Loop though the management object and pull out the signal strength
        foreach ( ManagementObject mo in adapterObjects )
        {
            returnStrength = Convert.ToInt32( 
                mo["Ndis80211ReceivedSignalStrength"].ToString());
            break;
        }
    }
    catch (Exception)
    {
    }
    finally
    {
        if ( searcher != null )
        {
            searcher.Dispose();
        }
    }
    return returnStrength;            
} 
```

returnStrength 目前正在文本框中显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-10T16:15:10.487

首先，请注意我不知道你的开发环境。以下是基于经验的一般适应症：

*   信号强度通常以 dB 为单位或以 dBm 为单位给出。

*   dB 用于信噪比。一个相当好的信号
    至少是 18~20 dB。

*   dBm 用于接收的纯功率。它通常在 -20dBm（优秀）到 -80dBm（非常差）的范围内

当无法从设备获取信息时，通常会看到 0。所以我的猜测是你的价值是无效的。

# binary - 存储一个正整数需要多少位？

> ID：12269096
> 
> 赞同：19
> 
> 时间：2012-09-04T18:10:09.467
> 
> 标签：binary, integer

你需要多少位来存储一个正整数，例如数十亿？您是否必须使用 log2 N 才能找出答案？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2014-05-01T00:14:03.770

由于我已经多次看到错误报告的答案，我想我会发布正确的答案。

表示正整数 n 所需的位数为

```
bits = floor( log2(n) + 1 ) 
```

其中 log2 表示对数基数 2。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-04T18:15:12.337

是的。存储在 k 位中的最大数量是 2^k-1，因为这些位有 2^k 个选项，其中一个是零。
因此，存储一个数 N 所需的位数为 log2(N)，但由于没有半位，因此需要将其向上舍入到上面最接近的整数。

注意：如果您需要包含负数，则符号必须多一位。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-06T13:04:09.947

`N`只是为了添加到前面的答案，您可以计算出使用任何对数基数以数学方式表示一个数字需要多少位。例如，假设我想知道表示数字 12345 需要多少位，但我的计算器只知道`ln`（自然对数）。

所以，

```
2^b = 12345 
```

采取`ln`双方的。

```
ln(2^b) = ln(12345) 
```

当然，指数对数的对数是指数乘以仅底数的对数，所以，

```
b*ln(2) = ln(12345) 
```

两边除以 ln(2)，

```
b = ln(12345) / ln(2) 
```

当然，正如另一个答案中所述，您需要将此结果四舍五入，因为要表示某个数字，您需要 2^b 等于或大于该数字。

所以，

```
b = ceil(ln(12345) / ln(2)) 
```

其中向上`ceil(f)`舍`f`入到最接近的整数。

`N`使用上述过程，您可以使用任何 log-base找到任何 number 所需的位数`logb`，即

```
b = ceil(logb(N) / logb(2)) 
```

# android - Android 应用内计费：虚拟货币

> ID：12269100
> 
> 赞同：1
> 
> 时间：2012-09-04T18:10:26.510
> 
> 标签：android, in-app-purchase

我想使用应用内计费来实现虚拟货币：例如，用户可以购买 50、100 和 250 枚硬币。

我想知道如何管理每个用户拥有的硬币数量。我必须自己管理还是Android为此提供了一些东西？如果没有，我将如何存储这些信息？如果用户有多个设备，UID 将不起作用，但我不希望存储电子邮件地址。

对这个问题有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T19:04:02.223

我所做的是将数据存储在服务器上并通过 Web 服务访问它。我最初将它存储在本地，但相当多的根用户开始编辑应用程序数据并获得额外的钱。

本质上，我在应用程序购买中使用让用户付费。当我收到交易成功的确认信息时，我会向我的服务器发送一个预定义的字符串。我不会发送像 50 这样的原始数值，因为用户可以将其设为 500 并获得额外的现金。相反，服务器将其接收到的字符串与字符串列表进行匹配。如果匹配，它会将那么多钱添加到用户的帐户中。如果没有匹配，它告诉应用程序有一个错误。

# android - 在 4.0.3 和 4.1 上工作，但在 2.1、2.2 和 2.3 上出错 - Sherlock 操作栏

> ID：12269104
> 
> 赞同：5
> 
> 时间：2012-09-04T18:10:38.197
> 
> 标签：android, android-actionbar, actionbarsherlock

我正在关注 Sherlock Action Bar 的一个简单教程。我遵循了每一步。问题是我在 2.1 到 2.3 版本上遇到错误，而在 4.0 到 4.1 版本上工作正常。
我正在使用**Android SDK 工具 20.0.3 和 Eclipse 版本 4.2.0**

```
setContentView(R.layout.activity_main); 
```

在上面的代码中它说`R cannot be resolved to a variable`。还有一些错误如下：

```
 [2012-09-04 22:18:21 - Action Bar demo] C:\Users\Karthick\Desktop\Project libs\JakeWharton-ActionBarSherlock-88fc341\library\res\values-v14\abs__styles.xml:4: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.ActionBar'.
    [2012-09-04 22:18:21 - Action Bar demo] C:\Users\Karthick\Desktop\Project libs\JakeWharton-ActionBarSherlock-88fc341\library\res\values-v14\abs__styles.xml:6: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.ActionBar.Solid'.
    [2012-09-04 22:18:21 - Action Bar demo] C:\Users\Karthick\Desktop\Project libs\JakeWharton-ActionBarSherlock-88fc341\library\res\values-v14\abs__styles.xml:8: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.Light.ActionBar'.
    [2012-09-04 22:18:21 - Action Bar demo] C:\Users\Karthick\Desktop\Project libs\JakeWharton-ActionBarSherlock-88fc341\library\res\values-v14\abs__styles.xml:10: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.Light.ActionBar.Solid'. 
```

为了更好地理解，这里有一些图像：

![在此处输入图像描述](../Images/2acbcfe234c242e7f7f1e07006ebc79d.png)

![在此处输入图像描述](../Images/db8f1cf04a29209489df255f6b9c258b.png)

我的清单文件是：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.action.bar"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="7"
    android:targetSdkVersion="15" />
<uses-permission android:name="android.permission.INTERNET"/>

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/Theme.Sherlock" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name=".Google"></activity>
</application> 
```

*有人帮助我修复 Android 2.3 中的这些错误*

**相同的代码在 Android 4.0.3 中运行良好**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T04:41:19.057

> 问题是我在 2.1 到 2.3 版本上遇到错误，而在 4.0 到 4.1 版本上工作正常。

=> 正如您所提到的，这在 4.0 和 4.1 中运行良好，但在 2.x 版本中没有，我相信您忘记在您的 style.xml 中包含兼容的 ActionBarSherlock 主题：

如果您没有包含以下值的**styles.xml ，请执行以下操作：**

```
<style name="AppTheme" parent="Theme.Sherlock.Light.DarkActionBar"/> 
```

正如您上面提到的关于styles.xml**的 values-v11 和 values-v14**，您可以在两个文件夹中使用以下值创建 styles.xml：

```
<style name="AppTheme" parent="android:Theme.Holo.Light.DarkActionBar"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T19:19:38.537

当我看你的屏幕截图时，我有点困惑。首先，您的项目应该使用 Android 4.0.3，而不是 Android 库中的 2.3。您已经在清单中使用 minSDKVersion 行覆盖了 2.3。其次，我不太清楚，但我假设在您的项目的属性中，您让您的主项目依赖于 ActionBarSherlock 库？

# c# - 处理属性更改事件

> ID：12269109
> 
> 赞同：1
> 
> 时间：2012-09-04T18:10:56.957
> 
> 标签：c#, wpf, mvvm

我对 C# 中的属性更改处理有疑问。我的场景如下：我有两个班

```
public class CustomerSupplier : ViewModelBase
{
    public Customer Customer { get; set; }

    private IEnumerable<SupplierSelect> suppliersSelect;
    public IEnumerable<SupplierSelect> SuppliersSelect 
    {
        get
        {
            return suppliersSelect;
        }
        set
        {
            suppliersSelect = value;
            this.NotifyPropertyChanged("SuppliersSelect");
        }
    }
}

public class SupplierSelect : ViewModelBase
{
    public Supplier Supplier { get; set; }

    private bool selected;
    public bool Selected 
    {
        get
        {
            return selected;
        }
        set
        {
            selected = value;
            this.NotifyPropertyChanged("Selected");
        }
    }
} 
```

ViewModelBase 只是以通常的方式实现 NotifyPropertyChanged。在我的 CustomersViewModel 中，我有一个 CustomerSupplier 类型的属性来处理关系。我需要的是从 CustomersViewModel 内部检测到 SupplierSelect 类的 Selected 属性的变化。我怎么做？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T18:17:48.223

像这样的东西：

```
public class CustomerSupplier : ViewModelBase
{
    public Customer Customer { get; set; }

    private void HandleSupplierSelectPropertChanged(object sender, PropertyChangedEventArgs args)
    {
        if (args.PropertyName == "Selected")
        {
            var selectedSupplier = (SupplierSelect)sender;
            // ...
        }
    }

    private IEnumerable<SupplierSelect> suppliersSelect;
    public IEnumerable<SupplierSelect> SuppliersSelect 
    {
        get
        {
            return suppliersSelect;
        }
        set
        {
            if (suppliersSelect != value)
            {
               if (suppliersSelect != null)
               {
                   foreach (var item in suppliersSelect)
                       item.PropertyChanged -= HandleSupplierSelectPropertChanged;
               }

               suppliersSelect = value;

               if (suppliersSelect != null)
               {
                   foreach (var item in suppliersSelect)
                       item.PropertyChanged += HandleSupplierSelectPropertChanged;
               }

               this.NotifyPropertyChanged("SuppliersSelect");
            }
        }
    }
} 
```

另请注意：如果是真正的`IEnumerable<SupplierSelect>`implements类型`INotifyCollectionChanged`，那么您必须监视集合更改以分别订阅/取消订阅`PropertyChanged`新/旧项目的事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T18:16:05.597

当您分配一个新的 SupplierSelect 时，将一个处理程序添加到 CustomerSupplier 中的 SupplierSelect 的 PropertyChanged 事件。

# jquery - assign_onchange_functions_to_inputs 未定义

> ID：12269112
> 
> 赞同：1
> 
> 时间：2012-09-04T18:11:16.980
> 
> 标签：jquery

我不知道这个错误意味着什么

我*认为*相关的代码是

```
$("#payment_plan_select").change(function(){ toggle_invoice_options() }); 
```

但不确定。

# mysql - MySQL存储过程，带有变量名的变量

> ID：12269114
> 
> 赞同：0
> 
> 时间：2012-09-04T18:11:20.650
> 
> 标签：mysql, variables, stored-procedures

我想使用另一个变量来引用一个变量。基本上我有 7 个地址字段（地址 1、地址 2 等），从 1 到 7 的循环会节省大量编码。这是我需要这个的基本情况：

```
Naddress1 = replace(Naddress1,'.','');
Naddress2 = replace(Naddress2,'.','');
Naddress3 = replace(Naddress3,'.','');
Naddress4 = replace(Naddress4,'.','');
Naddress5 = replace(Naddress5,'.','');
Naddress6 = replace(Naddress6,'.','');
Naddress7 = replace(Naddress7,'.','');
Naddress1 = replace(Naddress1,',',' ');
Naddress2 = replace(Naddress2,',',' ');
Naddress3 = replace(Naddress3,',',' ');
Naddress4 = replace(Naddress4,',',' ');
Naddress5 = replace(Naddress5,',',' ');
Naddress6 = replace(Naddress6,',',' ');
Naddress7 = replace(Naddress7,',',' ');
Naddress1 = replace(Naddress1,'/'',' ');
Naddress2 = replace(Naddress2,'/'',' ');
Naddress3 = replace(Naddress3,'/'',' ');
Naddress4 = replace(Naddress4,'/'',' ');
Naddress5 = replace(Naddress5,'/'',' ');
Naddress6 = replace(Naddress6,'/'',' ');
Naddress7 = replace(Naddress7,'/'',' '); 
```

我想要什么：

```
DECLARE address_iterator INT;
SET address_iterator = 1;
WHILE address_iterator <= 7 DO
Naddress & address_iterator = replace(Naddress & address_iterator, '.','');
Naddress & address_iterator = replace(Naddress & address_iterator, ',',' ');
Naddress & address_iterator = replace(Naddress & address_iterator, '/'',' ');
END WHILE; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T06:58:52.310

在 MySQL 中，你可以做这样的事情 -

```
UPDATE
  table
SET
  address1 = REPLACE(REPLACE(REPLACE(address1, '.', ''), ',',' '), '/',' '),
  address2 = REPLACE(REPLACE(REPLACE(address2, '.', ''), ',',' '), '/',' '),
  address3 = REPLACE(REPLACE(REPLACE(address3, '.', ''), ',',' '), '/',' '); 
```

否则，您应该在应用程序中自动执行此任务。

# java - ArrayList 的 ArrayList .. 无法多次引用它们

> ID：12269121
> 
> 赞同：2
> 
> 时间：2012-09-04T18:11:53.397
> 
> 标签：java

这是我写的一个特殊方法：

```
class A {

    private static ArrayList<ArrayList<Integer>> inputTerms = 
                                              new ArrayList<ArrayList<Integer>();

    public static void method1(ArrayList<Integer> terms) {

        int N = terms.size();
        for (int i = 0; i < N - 1; i++) {
            for (int j = i + 1; j < N; j++) {
                ArrayList<Integer> clauses = new ArrayList<Integer>();
                clauses.add(-terms.get(i));
                clauses.add(-terms.get(j));
                inputTerms.add(clauses);
            }
        }
    }
} 
```

在我的主要功能中，我有以下代码：

```
for (int i=0; i<N-1; i++){ 
   ArrayList<Integer> firstdiagonalTerms = new ArrayList<Integer>(); 
   for (int j=0; j<N-i; j++){ 
      firstdiagonalTerms.add(variable[j][i+j]); 
   } 
   method1(firstdiagonalTerms);
} 
```

我的主函数中有 4 个这样的双 for 循环，我在其中调用 method1 进行不同的迭代。然而，虽然第一个 for 循环给出了适当的答案，但当我在第二个 for 循环中声明一个 ArrayList 时，我的 inputTerns 变量被设置为 null。我该如何克服这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T18:16:29.340

我建议您使用`ArrayList<Integer[]>`而不是另一个 ArrayList。如果没有 ArrayList，您可能会丢失一些东西，但这是唯一的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T18:37:19.180

我不明白你想在这里实现什么。但是您绝对可以创建 ArrayList 的 ArrayList。

```
public class Testapp {

static ArrayList<ArrayList<Integer>> inputTerms = new ArrayList<ArrayList<Integer>>();

public static void main(String[] args) {
    int outerlist = 3;
    int innerlist = 5;
    for(int i=0; i<outerlist; i++)
    {
        ArrayList<Integer> list = new ArrayList<Integer>(); 
        for(int j=0; j<innerlist; j++)
        {
            list.add(j);
        }
        inputTerms.add(list);
    }

    Iterator outi = inputTerms.iterator();
    while(outi.hasNext()){
        ArrayList<Integer> temp = (ArrayList<Integer>)outi.next();
        Iterator ini = temp.iterator();
        while(ini.hasNext()){
            System.out.print(ini.next());
        }
        System.out.println();
    }
}
} 
```

输出：

```
01234 
01234 
01234 
```

# python - 访问内置函数的内部属性

> ID：12269122
> 
> 赞同：0
> 
> 时间：2012-09-04T18:11:53.977
> 
> 标签：python, attributes, abstraction, built-in

我有一个简单的问题。由于一切都是python中的对象，我可以访问内置对象的内部属性吗？

例如`a='some String'` ，我想访问字符串对象的内部属性`a`。

这是我尝试过的：-

```
 for x in dir(a):
  if not callable(eval('a.' + x)):
   print x 
```

但是，我得到的输出为：

`__doc__`

但是，我想访问该对象的其他属性，该对象将自己使用这些属性。

有没有办法可以访问这个对象的抽象属性？

只是为了详细说明：

```
class Some(object):
 def __init__(self, initialiser):
  self.initialiser = initialiser

s = Some('Any object can be put here, I am using a string')

print s.initialiser ## This is how I'm accessing the attribute of the class Some. Similarly, can I ##access the attributes of the string object `a` defined above? 
```

`print s`＃ 给我：`<__main__.Some object at 0x02371AF0>`

那么，为什么不`print a`给我这样的输出。因为，当我打印时调用了某个方法`a`，该方法访问存储实际字符串序列的内存并打印它。但是，当我打印时不会发生这种情况`s`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T18:28:56.150

在 Python 中您无法访问的内容很少，因为 Python 内置类型的私有属性（如果有的话）很少。

您真的很想阅读[python 数据模型](http://docs.python.org/reference/datamodel.html)，并研究[检查模块](http://docs.python.org/library/inspect.html)（包括它的[源代码](http://hg.python.org/cpython/file/tip/Lib/inspect.py)）。

这将告诉你所有你需要知道的关于你可以和不能在 python 中访问的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T01:24:24.240

除非被覆盖，`dir()`否则将为您提供对象上所有未损坏属性的列表（*如果*被覆盖，通常是有充分理由的）。您得到`__doc__`输出的原因是它是字符串类型上唯一的不可调用属性，其余的是方法。您可以通过普通属性查找直接访问它：

```
>>> s = 'string'
>>> print s.__doc__
str(object) -> string

Return a nice string representation of the object.
If the argument is a string, the return value is the same object. 
```

您希望该`str`类型具有哪些其他属性？

至于为什么打印一个字符串给你字符串，而打印一个类给你一个更抽象的表示：`print`调用`__str__`对象上的方法，这允许提供人性化的显示。对于字符串，这显然是字符串本身。对于类，使用更通用的默认值。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-04T19:01:21.900

当您打印 obj 时，python 会调用`__str__`对象上的方法。对于字符串，结果是显而易见的，但对于您的自定义类，默认`__str__`方法调用`__repr__`，它返回一些有用的信息。我很确定这并不能回答您的*实际*问题，而只是您实际提出的问题。

# css - Opera、Safari、FF 和 IE 之间的像素差异

> ID：12269123
> 
> 赞同：2
> 
> 时间：2012-09-04T18:12:05.180
> 
> 标签：css, firefox, google-chrome, opera

我有以下代码：

```
<div id="search">
    <form name="quick_find" action="index.php?main_page=advanced_search_result" method="get">
        <input type="text" name="keyword" size="35" class="rounded" style="width: 320px;" value="what are you looking for?" onfocus="if (this.value == 'what are you looking for?') this.value = '';" onblur="if (this.value == '') this.value = 'what are you looking for?';" />
        <input id="searchSubmit" type="submit" value="" />
    </form>
</div> 
```

和

```
input.rounded {
border: 1px solid #ccc;
-moz-border-radius: 15px;
-webkit-border-radius: 15px;
border-radius: 15px;
-moz-box-shadow: 2px 2px 3px #666;
-webkit-box-shadow: 2px 2px 3px #666;
box-shadow: 2px 2px 3px #666;
font-size: 18px;
padding: 2px 7px;
outline: 0;
-webkit-appearance: none;
behavior: url(PIE.htc);
z-index:10;
}

input.rounded:focus {
border-color: #339933;
}

#searchSubmit{
background: transparent url(button_search.gif) no-repeat;
width: 21px;
height: 21px;
border: none;
cursor: pointer;
margin-left: -23px; /* image is 20x20px, so leave little extra */
margin-top: 2px; /* leave some space from the top, so button looks in the middle */
z-index:1;
} 
```

**编辑：这是提交按钮的链接：[http ://traditionalirishgifts.c​​om/button_search.gif](http://traditionalirishgifts.com/button_search.gif)**

但我无法让提交按钮在 FF、Opera、IE 和 Chrome 中正确排列。我试过摆弄它，但我束手无策。

解决这个问题的唯一方法是进行浏览器黑客攻击，然后我会在不同版本的浏览器之间遇到问题吗？

![歌剧](../Images/92615d8c02445412e89cda0854f708c3.png)

![苹果浏览器](../Images/0d99a4c5166ab420f207257f663914fc.png)

![铬合金](../Images/2dccb7015d9c3a42ecf2ec90add4b17d.png)

![火狐](../Images/b5e2b6720c86163d39d0183c1b0b93fd.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T18:39:02.853

我稍微简化了 CSS 以使其更易于管理并向您展示我的方法：

[http://jsfiddle.net/G8wcP/](http://jsfiddle.net/G8wcP/)

```
<div id="search">
    <form name="quick_find" action="index.php?main_page=advanced_search_result" method="get">
        <input type="text" name="keyword" size="35" class="rounded" value="what are you looking for?" onfocus="if (this.value == 'what are you looking for?') this.value = '';" onblur="if (this.value == '') this.value = 'what are you looking for?';" />
        <input id="searchSubmit" type="submit" value="" />
    </form>
</div>​

#search{ 
    width:207px;
    position:relative;
    display:block;
    border:1px solid #ccc;
}

input.rounded {
    display:block;
    width:180px;
    height:30px;
    border:0;
}

#searchSubmit{
    display:block;
    position:absolute;    
    left:180px;
    top:5px;   
    background: red;
    width: 20px;
    height: 20px;
    cursor: pointer;
}​ 
```

正如您已经见证的那样，您采用的方法可能无法经受住跨浏览器的考验。

基本上，使用边框设置#search div 的样式。相对定位输入（文本）元素，然后绝对定位提交元素。如果您愿意，您可以相对定位这两个元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T18:50:25.797

见[http://jsfiddle.net/KUWYY/1/](http://jsfiddle.net/KUWYY/1/)

添加

```
input{
    vertical-align:middle;
} 
```

并删除

```
#searchSubmit{
    margin-top: 2px;
} 
```

# c - 一次读取一个字符的文件

> ID：12269125
> 
> 赞同：2
> 
> 时间：2012-09-04T18:12:09.350
> 
> 标签：c, readfile

我有两个`.c`文件：一个包含主要文件，另一个包含我的所有功能。

在我的主要部分中，我想一次读取一个字符，循环如下所示：

```
while(ch = ReadFile(fp)) != EOF)
{
    // Code
} 
```

其中`ch`是整数 ( `int ch;`) 并且`fp`是文件指针 ( `FILE* fp;`)。

并且（不同的`.c`文件---）：

```
int ReadFile(FILE* fp)
{
    // Some code
    return n; // The next char
} 
```

有谁知道我如何使用这种方法一次从主要读取一个字符？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-04T18:15:01.430

更新：-

著名`getc`的 from`<stdio.h>`是一个解决方案：-

```
while((ch = getc(fp)) != EOF)
    {
      //...
    } 
...
int ReadFile(FILE* fp)
{
   //Do what you wish... :)
  return getc(fp); 
} 
```

声明为`int getc( FILE * _File);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T18:25:11.607

简单地：

```
while(ch != EOF)
{ 
    ch = fgetc(fp);
    //process ch
} 
```

请记住，它`fgetc`被声明为`int`.

或者，如果您想逐个字符地构建一个字符串，您可以逐个字符地读取文件以动态分配内存，如下所示（假设`fp`已打开以供读取）：

```
char *data = NULL, *tmp;
int ch, bff = 0;

while(ch != EOF)
{
    if(!(tmp = realloc(data, bff + 2)))
    {
        free(data);
        return 1;
    }
    data = tmp;
    ch = fgetc(fp);   //or your readfile function assuming it works the same as fgetc
    data[bff++] = ch;
}
data[bff] = '\0'; 
```

就`free(data)`在你完成它的时候

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T18:30:46.137

试试这个：

```
int ReadFile(FILE* fp, int *buffer)
{
    if(fp != NULL)
    {
        *buffer = fgetc(fp);
        return *buffer;
    }
    else return NULL;
} 
```

# internet-explorer - HTA VBScript - IE CreateObject(InternetExplorer.Application) IE.Document.form1 不支持属性或方法

> ID：12269126
> 
> 赞同：1
> 
> 时间：2012-09-04T18:12:10.530
> 
> 标签：internet-explorer, vbscript, createobject

我已经这样做了几次，但是我不确定为什么这次我的 HTA vbscript 对我大喊大叫 Object 不支持此属性或方法 IE.Document.form1？

忽略等待 IE,2000 subs。

```
Function server_details(server_name)
    dim returnArray(6)

    Set IE = CreateObject("InternetExplorer.Application")
    IE.Visible = True
    IE.Navigate "http://website/Default.aspx"
    Wait IE,2000
    With IE.Document.form1
        .txtServerName.value = server_name
        .Button1.click
    End With

    Wait IE,4000

    'get info returned
    With IE.Document.all
        serverOS = .txtOS.value
        serverApp = .txtBusinessApp.value
        serverClass = .txtServerClass.value
        serverHost = .txtHost.value
        serverEnv = .txtSupportEnvironment.value
        serverCheckout = .txtCheckoutStatus.value
    End With

    IE.Quit
    Set IE = Nothing
    returnArray(0) = serverOS
    returnArray(1) = ServerApp
    returnArray(2) = serverClass
    returnArray(3) = serverHost
    returnArray(4) = serverEnv
    returnArray(5) = serverCheckout
    server_details = returnArray
End Function 
```

我的 HTA vbscript 中也有这个功能，它工作正常。

```
Function subnetDetails(server_ip)
    Set IE = CreateObject("InternetExplorer.Application")
    IE.Visible = False
    IE.Navigate "http://otherwebsite/detail.aspx"
    Wait IE,2000
    With IE.Document.aspnetForm
        .[ctl00$_SUMMARY$txtIP].value = server_ip
        .[ctl00$_SUMMARY$btnLoad].click
    End With

    'webscrape for TABLE id="ctl00_SUMMARY_gvSubnets"
    Wait IE,9000
    responseHTML = IE.Document.getElementByID("ctl00_SUMMARY_gvSubnets").outerHTML
    IE.Quit
    Set IE = Nothing

    subnetDetails = responseHTML
End Function 
```

发现 form1 在 iframe 中，可能是我无法引用它的原因。有任何想法吗？

```
<iframe id="ctl00_ContentPlaceHolder1_I1" bordercolor="White" name="I1" src="CSIS.aspx" style="border-style: none; overflow: auto; height: 2500px; width: 1100px;" frameborder="no" scrolling="no">

<html>
    <head>
        <body>
            <form name="form1" bla bla"

 </iframe> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T19:56:44.613

好的，所以想通了。iframe 造成了所有的麻烦。对于那些有相同错误消息的人，请尝试检查表单和元素不是您尝试抓取的站点内 iframe 的一部分。站点中的工作后备词获取 iframe 源并将其放入您的 vbscript 而不是您拥有的那个。

好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T19:19:01.263

很难忽略您的等待子，因为可能存在原因。你似乎使用了固定的时间，而你应该使用类似的东西

```
Do Until IE.readyState = 4
  Wscript.Sleep 100
Loop 
```

同样在遇到麻烦的情况下，最好将您的对象级别每行分离一个，更易于调试

```
With IE
  With .document
    With ... 
```

并注释掉，直到它起作用

这些 oare 一般准则，如果您发布真实 URL 和您的等待子，我们可以提供更直接的建议。

# asp.net-mvc - 无法将对象转换为 MembershipUser 类型

> ID：12269128
> 
> 赞同：0
> 
> 时间：2012-09-04T18:12:22.827
> 
> 标签：asp.net-mvc, vb.net, asp.net-mvc-3, asp.net-membership

我试图覆盖 MembershipProvider 的 GetUser 函数来简单地获取用户，以便我可以从我的数据库中访问他们的属性。我试过这个：

```
Public Overloads Overrides Function GetUser(username As String, userIsOnline As Boolean) As System.Web.Security.MembershipUser
    Dim user = db.Tbl_Employees.Where(Function(u) u.Employee_EmailAddress = username)
    Return user
End Function 
```

但是，我收到错误：

> 无法将类型为“System.Data.Entity.Infrastructure.DbQuery`1[MyBlog.Tbl_Employee]”的对象转换为类型“System.Web.Security.MembershipUser”。

我知道当我说“作为 System.Web.Security.MembershipUser”时它返回相同的类型，所以我应该改变它还是应该尝试以某种方式转换它？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T18:24:06.987

你这样做是完全错误的。您不能只是将事物随机化为其他事物。他们必须实际上是你正在铸造的东西。

您应该做的只是从您的 GetUser 方法返回 ProviderUserKey，然后使用它在会员系统之外的用户表中查找您想要的任何其他数据。

编辑：

```
var userid = (Guid)Membership.GetUser().ProviderUserKey;  // cast to your type 

var user = db.Tbl_Employees.Where(x => x.UserId == userid); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T18:18:13.773

GetUser 需要一种 MembershipUser。您正在返回不是从该对象派生的东西，因此它会抱怨。

您必须将实体映射到从 MembershipUser 继承的自定义对象中，或者创建一个新对象，传入适当的参数。

# javascript - 在 Jquery 1.8.0 中使用 not CSS 选择器的替代方法是什么？

> ID：12269129
> 
> 赞同：0
> 
> 时间：2012-09-04T18:12:25.707
> 
> 标签：javascript, jquery

当使用 Jquery 从选择中排除元素时，我喜欢使用**CSS :not**选择器，因为性能更快[:not() VS .not()](http://jsperf.com/jquery-css3-not-vs-not)，但是从 Jquery 1.8.0 开始它不再工作了:( 是否有其他替代方法可以使用在 Jquery 中具有相同或更好的性能（除了**.not()**）？谢谢！！

这适用于此处的 Jquery 1.7.2
[Fiddle](http://jsfiddle.net/AmKBS/)
但不适用于此处的 Jquery 1.8.0
[Fiddle](http://jsfiddle.net/E7gBM/)

```
$(document).ready(function(){
$("ul li:not(:first)").hide();
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T18:16:12.060

传递给它一个实际的 CSS3 选择器。它要快得多：

```
$("li:not(:first-child)").hide(); 
```

这是你的小提琴：http: [//jsfiddle.net/E7gBM/1/](http://jsfiddle.net/E7gBM/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T18:14:46.710

尝试[`:gt()`选择器](http://api.jquery.com/gt-selector/)排除第一个`li`：

```
$("ul li:gt(0)").hide(); 
```

# sql-server - 如何显示不符合条件的行

> ID：12269132
> 
> 赞同：1
> 
> 时间：2012-09-04T18:12:37.317
> 
> 标签：sql-server, tsql

我有两个链接表：

```
 Case_Table:                 Case_Clients
                                Client_ID (int, identity)
    Case_ID (int, identity) --- Case_ID (int)
    Conference_ID (int)         Relationship_ID (int)
    Other Stuff 
```

下面是列出具有户主的所有记录的 SQL 语句：

```
 SELECT Case_Table.Case_ID, 
           Case_Table.Conference_ID, 
           Case_Clients.Client_ID, 
           Case_Clients.Relationship_ID
    FROM   Case_Clients INNER JOIN
           Case_Table ON Case_Clients.Case_ID = Case_Table.Case_ID
    WHERE  (Case_Clients.Relationship_ID = 1) 
```

公司要求每个案件都有户主，我们已经采取措施强制执行，但我们仍然有没有户主的现有案件。我知道我有 100 多个没有户主的案例（Relationship_ID = 1）。

继续...我要做的是列出 Case_Table 中没有 Case_Clients 中的户主的每条记录的 Conference_ID 和 Case_ID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T18:15:45.893

您可以使用`NOT IN`检索在where 中`CaseTable`没有记录的任何记录（假设是户主记录）。`Case_Clients``RelationshipID = 1`

```
SELECT Case_Table.Case_ID, Case_Table.ConferenceID
FROM Case_Table
WHERE CaseTable.Case_ID NOT IN (
    SELECT Case_ID 
    FROM Case_Clients 
    WHERE RelationshipID = 1
) 
```

# php - 排名系统设计

> ID：12269133
> 
> 赞同：1
> 
> 时间：2012-09-04T18:12:46.590
> 
> 标签：php, mysql, ranking, voting

我需要一些帮助来弄清楚如何创建排名系统。

例如，我们以音乐专辑为例，我想在每张专辑上创建并维护三个不同的排名；在所有专辑中排名，在流派中排名和艺术家自己的专辑排名。

我正在考虑两种可能的方法：

首先，创建一个带有排名的表或将其添加到专辑表

或者

其次，使用正常的 WHERE 和 ORDER BY 参数为每​​个专辑调用三个查询。

哪个更好，或者有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T18:17:03.333

我会去一张有排名的桌子。您所描述的称为[1:n (1:many)](http://www.databaseprimer.com/relationship_1tox.html)关系。你的数据库应该是[规范化](http://www.w3schools.in/mysql/database-normalization/)的，所以去额外的表。

# c - fork()、exec 和 waitpid()

> ID：12269134
> 
> 赞同：5
> 
> 时间：2012-09-04T18:12:56.503
> 
> 标签：c, unix, process, fork, wait

我阅读了较早的问题[“fork 和 exec 之间的差异](https://stackoverflow.com/questions/1653340/exec-and-fork)”，但它让我有些疑问。

当使用`fork()`并且你在一个孩子上调用 exec 时，创建的新进程`exec`仍然是一个孩子，对吗？

杀死父进程是否也会杀死孩子？

[在顶部答案](https://stackoverflow.com/questions/1653340/exec-and-fork/1653415#1653415)中显示的绘图/示例中，他调用`wait`/`waitpid`因为如果父进程首先终止，则子进程死亡，然后您得到`ls`命令的部分输出或没有输出，对吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T18:34:11.033

`exec`用一个新的替换当前正在执行的进程映像。所以是的，孩子是一个孩子进程（它实际上是同一个进程。）

不，杀死父母不会杀死孩子（孩子是[孤儿](http://en.wikipedia.org/wiki/Orphan_process)）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T18:31:58.230

杀死父进程*不会*杀死子进程。当子进程调用一个`exec`函数时，它仍然是一个子进程。

在链接问题的示例中，流程图粗略地描述了 shell 用来调用命令的过程。除非命令是后台的，否则 shell - 父进程 - 将等到子进程终止，然后再继续读取命令。否则就没有必要等孩子了。

另请参阅[此问题](https://stackoverflow.com/questions/284325/how-to-make-child-process-die-after-parent-exits)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-04T18:39:48.740

> 当使用 fork() 并在孩子上调用 exec 时，由 exec 创建的新进程仍然是孩子，对吗？

在子进程上调用 exec 时，新进程由子进程**处理**。子进程被 exec 调用替换。

> 杀死父进程是否也会杀死孩子？

当父进程死亡时（至少在 Linux 中），通过让操作系统发送信号，子进程可能会死亡，否则它会继续存在。

> 他之所以调用wait/waitpid，是因为如果父进程首先终止，子进程就会死掉，然后你得到ls命令的部分输出或没有输出，对吗？

您希望等待子进程（如您所指的示例中所示），以便：a）您可以在完成后正确终止子进程 b）子进程可以访问父进程的所有资源......意思是如果您的孩子有一个由父级打开的文件句柄并且父级退出，但孩子假设文件只要它正在运行就会打开，那么就会发生不好的事情。

看一下这个简单的例子：首先，看一下流程列表的输出：

```
mike@linux-4puc:~> ps
PID TTY          TIME CMD
18577 pts/2    00:00:00 bash
18643 pts/2    00:00:00 ps 
```

然后运行这个小程序：

```
void main() 
{ 
    if(fork()){
      printf("parent print");
    }
    else
      while(1);
    printf("done");
} 
```

在这里，您将让父打印消息“父打印”然后“完成”。完成后检查“ps”列表，您会在树中看到一个新进程：

```
mike@linux-4puc:~> ps
PID TTY          TIME CMD
18577 pts/2    00:00:00 bash
18673 pts/2    00:00:02 a.out
18678 pts/2    00:00:00 ps 
```

那 a.out 是孩子，当父母终止时，永远坐在 while 循环中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-04T18:44:18.090

```
.. the new process created by exec is still a child right? 
```

是的，还是那个孩子。

```
Does killing the parent process kills the child too? 
```

不。如果父进程因任何原因而死，而子进程仍在执行，则子进程将被*init*[进程](http://en.wikipedia.org/wiki/Init)（进程 ID=1）进程采用，该进程将成为该[孤儿进程的新父进程](http://en.wikipedia.org/wiki/Orphan_process)。

```
calls wait/waitpid because if the parent process terminates first, the child... 
```

[waitpid/wait](http://linux.die.net/man/2/waitpid)用于将孩子的状态通知给父母。请注意，如果父进程有很多子进程，那么它通常会等待*任何子*进程，除非您指定特定子进程的进程 ID。

# mysql - Mysql EAV 匹配行作为字段或实体的属性值

> ID：12269135
> 
> 赞同：2
> 
> 时间：2012-09-04T18:12:57.007
> 
> 标签：mysql, sql, rows, entity-attribute-value

My Mysql 数据库具有由对象类型定义的对象，然后将其连接以设置其属性。它基于 Spencer 指出的实体属性值模型。

数据库比下面要复杂一些，但这应该使我的问题更加清楚。

我有一个 mysql 表`objects`，其中包含有关对象的一些基本信息，比如`create_date`, `title`，`author`当然还有`id`.

我还有一个表`object_properties`，其中包含有关对象的更多数据。

我在搜索它们时遇到了一些麻烦。例如，一个对象可能同时具有 an`end_date`和`start_date`作为单独的属性。这些将在`object_properties`.

当他们每个人都有自己的行时，如何匹配结束日期和开始日期？

通常我会这样查询它；`select * from table where start_date > value AND end_date < value`但我不能这样做，因为每个属性都是单独的行。

我尝试了以下查询；`

```
 select * 
  from object_properties 
 where object_id = 1 
   and (     (object_properties.type_id = 1)
         and (object_properties.value = 2) 
         and (     (object_properties.type_id = 2) 
               and (object_properties.value = 2)
             )
       ) 
```

在上面的示例中，这`type_id = 1`将是开始日期和`type_id =2`结束日期，但这似乎不起作用。我在想我看错了。

我意识到我的问题的标题可能是错误的，我真的不知道如何调用这种方式存储数据。

**这是我根据 Matthews 的回答使用的解决方案：**

这是我最终得到的结果：`

```
 SELECT   
      o.title,  
      o.id,  
      op1.value AS start_date,  
      op2.value AS end_date  
 FROM object o  
 JOIN object_meta_values op1 ON op1.object_id=o.id AND op1.object_type_meta_id=28  
 JOIN object_meta_values op2 ON op2.object_id=o.id AND op2.object_type_meta_id=29  
 WHERE object_type_id = 11  
 AND (12      <= op1.value AND op1.value <  16     )   
 OR (12       <  op2.value   AND op2.value   <= 16     )   
 OR (op1.value <= 12        AND 16        <= op2.value) 
```

`。非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T18:19:00.730

您可以使用多个左连接来执行此操作。

```
SELECT 
    o.create_date,
    o.title,
    o.author,
    op1.value AS start_date,
    op2.value AS end_date,
    ...
FROM object o
LEFT JOIN object_properties op1 ON op1.object_id=o.object_id AND op1.type_id=1
LEFT JOIN object_properties op2 ON op2.object_id=o.object_id AND op2.type_id=2 
```

没有属性的值最终会为空。

这种方法您也不必进行第二次查询来获取属性。

**编辑** 如果您不想检索空值，则省略`left`.`left join`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T18:19:27.010

快速的回答是，由于您需要拉两行，一种方法是修改您的查询以将 替换为`AND`，`OR`例如

```
select p.* 
  from object_properties p
 where p.object_id = 1 
   and (  
          (p.type_id = 1 and p.value = 2) 
       OR 
          (p.type_id = 2 and p.value = 2)
       ) 
```

（显然，这不是检索指定结果集的唯一方法，也不一定是最好的方法；但这样的查询会得到两行。）

您正在处理的数据模型类型通常称为“实体 - 属性 - 值”模型，或简称**EAV**模型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T18:19:51.297

您的意思是查找结束日期和开始日期相同的记录？或者你只是想要一个包含他属性的所有对象的列表？

PS 为什么不将每个属性都保存在一列而不是一行？1 个属性 id 指向对象表，你就完成了......

# linux - 如果发现某种模式，AWK 或 sed 需要从输出中删除行

> ID：12269136
> 
> 赞同：3
> 
> 时间：2012-09-04T18:13:02.417
> 
> 标签：linux, sed, awk

我需要启动一些东西来验证文件。用逗号分隔在两个字段中的文本，在第二个字段上我们可能会找到`/*/*/*`我想要的数据。我只想`/*/*`丢弃

输入文件

```
\\CIFSERVER1\Share1,/fs1_casa/c/share1
\\CIFSERVER1\Share2,/fs2_casa/c/share2
\\CIFSERVER1\Share3,/fs1_casa/c/share3
\\EDULIN\edu,/edu1
\\CIFSERVER2\root,/fs1_casa
\\CIFSERVER2\root,/fs2_casa
\\CIFSERVER2\root,/fs3_casa
\\CIFSERVER2\root,/fs1_casa 
```

输出应该是：

```
\\CIFSERVER1\Share1,/fs1_casa/c/share1
\\CIFSERVER1\Share2,/fs2_casa/c/share2
\\CIFSERVER1\Share3,/fs1_casa/c/share3 
```

应该删除什么？

```
\\EDULIN\edu,/edu1
\\CIFSERVER2\root,/fs1_casa
\\CIFSERVER2\root,/fs2_casa
\\CIFSERVER2\root,/fs3_casa
\\CIFSERVER2\root,/fs1_casa 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T18:25:52.677

如果你想在逗号后面加上三个或更多的斜线，

```
grep ',/.*/.*/' file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T18:21:32.913

`/`如果您尝试在单行之后打印所有包含超过 3 行的行，`,`您可以这样做：

```
sed -n '\@,.*/.*/.*/@p' input 
```

要限制为恰好包含 3 的那些行`/`：

```
sed -n '\@,\([^/]*/\)\{3\}[^/]*$@p' input 
```

如果您必须将搜索限制在第二个字段（例如，可能有超过 1 个逗号）：

```
awk '$2 ~ /[/].*[/].*[/]/' FS=, input 
```

或者

```
awk -F, '$2 ~ /\/.*\/.*\//'  input 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T18:24:07.033

如果你想保留逗号后有 3 个或更多斜杠的条目，删除那些有两个或更少的行，那么我会使用：

```
sed -n '/[^,]*,\/[^/]*\/[^/]*\//p' 
```

`-n`抑制正常打印。该模式查找斜线，然后是非斜线，另一个斜线，更多非斜线和另一个斜线并打印它。如果您必须在第三个斜杠之后有一个字符，请在正则表达式中`[^/]`的第三个之后添加。`\/`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-04T18:27:51.383

只有两个字段，这很容易用 grep 完成：只保留`/`逗号后有三个字符的行。

```
grep ',/.*/.*/' 
```

对于更多字段，虽然 grep 或 sed 可以工作，但使用 awk 会更容易。

```
awk -F , '$2 ~ /(\/.*){3}/ {print}' 
```

# php - Magento - 在分层导航中将属性分配给类别

> ID：12269144
> 
> 赞同：2
> 
> 时间：2012-09-04T18:13:23.850
> 
> 标签：php, magento, attributes, categories, layered-navigation

我已经和 Magento 合作了几个月了。我有一个包含 7 个子类别的产品类别。这些类别是具有产品类型子类别的各种品牌。我希望为每个品牌的产品单独添加某些属性。

例如，在“品牌 1”中有“抽屉类型”属性：2 个抽屉，4 个抽屉。还有其他我需要根据它所在的类别进行排序。

问题是 Magento 似乎并没有原生地做到这一点。该属性“抽屉类型”显示在其适用的特定品牌页面之前的每个页面上。这些属性的范围太大。

我已经从 GoMage 购买并下载了[Advanced Navigation](http://www.gomage.com/extensions/gomage-advanced-navigation.html)，但这似乎并不能解决我的问题。

为什么这不是 Magento 的一部分，我怎样才能使它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T19:14:20.857

可用于过滤的属性是根据该类别页面上可见的产品填充的。在不修改功能的情况下，我所能想到的就是将产品类别“是锚”设置为“否”并显示子类别，但这可能不是您想要做的。

# c# - 具有多个参数的 ReportViewer

> ID：12269147
> 
> 赞同：0
> 
> 时间：2012-09-04T18:13:37.310
> 
> 标签：c#, asp.net, sql, parameters, report-viewer2010

我有一个存储过程，将用于在 reportviewer（VS2010 中提供的那个）中创建报告。有 4 个参数 - 开始日期、结束日期 - 单个参数。多值参数 - 状态（6 个可能的选择）、位置（250 个可能的选择）。

我无法确定对其进行编码的正确方法，以便报告将显示日期范围内的所有项目，用于请求的各种状态/位置。

例如：显示（开始日期）2012 年 7 月 1 日和（结束日期）2012 年 9 月 3 日之间来自（位置）Hazleton 或 Butler 并且（状态）可用或已售出的所有部件。

调用存储过程的代码：

```
public DataTable StatusRpt(DateTime StartDate, DateTime EndDate)
{
    SQLCON = new SqlConnection(connectionString);
    SQLCON.Open();
    SQLCommand = new SqlCommand("spStatusRpt",SQLCON);
    SQLCommand.CommandType = CommandType.Text;
    SQLCommand.Parameters.Add("@StartDate", SqlDbType.Date).Value = StartDate;
    SQLCommand.Parameters.Add("@EndDate", SqlDbType.Date).Value = EndDate;
    //SQLCommand.Parameters.Add("@Status", SqlDbType.Int).Value = Status;
    //SQLCommand.Parameters.Add("@OrgName", SqlDbType.VarChar).Value = OrgName;

    SqlDataAdapter adapter = new SqlDataAdapter(SQLCommand);
    DataTable Detailtable = new DataTable();
    adapter.Fill(Detailtable);

    return Detailtable;
} 
```

这是我的“onClick”事件

```
protected void btnStatusReport_OnClick(object sender, EventArgs e)
{
    int Status = Convert.ToInt32(lbxStatus.SelectedValue);
    string OrgName = lbxLocations.SelectedValue;
    DateTime StartDate = Convert.ToDateTime(CalStart.SelectedDate);
    DateTime EndDate = Convert.ToDateTime(CalEnd.SelectedDate);
    lblPrint.Visible = true;
    DataTable DetailTable = equip.StatusRpt(StartDate, EndDate);

    this.RV1.Reset();
    this.RV1.LocalReport.DataSources.Clear();
    this.RV1.LocalReport.ReportPath = "Reports/StatusReport.rdlc";
    ReportDataSource rds = new ReportDataSource("StatusDS", DetailTable);
    this.RV1.LocalReport.DataSources.Add(rds);
    this.RV1.DataBind();
} 
```

我做了一些研究，但我发现的一切都是指使用 SSRS。如果有人可以告诉我如何通过代码应用过滤器，我可以过滤。

提前感谢您的任何和所有帮助。辛迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T20:26:13.313

由于您使用的是客户端报告 (RDLC)，请记住您是生成报告使用的数据的人。我相信您可以将参数传递给报告并使用它来过滤数据以进行显示，但您当然不需要。

过去，我使用服务器端报告 (RDL) 来完成这种事情。在这种情况下，我将逗号分隔的字符串传递给存储过程。在此过程中，我将其分解，将其插入到一个临时表中，并加入过滤结果的数据集。如果您有很多行并且通常只输出其中的几行，您将希望在该过程中执行此操作。如果您想在某个时候将此报告移动到服务器端，这也可能是一种更好的方法。

如果您没有很多行，那么在代码中过滤它可能同样简单。您可以为此使用 LINQ（请参阅有关在 DataTable 上使用 LINQ 的[这个问题）。](https://stackoverflow.com/questions/10855/linq-query-on-a-datatable)请记住，您可以使用任何 IEnumerable 通过 ReportDataSet 传递到报表中。

# .htaccess - htaccess 301 从带有逗号的 URL 重定向不重定向

> ID：12269151
> 
> 赞同：3
> 
> 时间：2012-09-04T18:14:10.720
> 
> 标签：.htaccess, url, redirect, url-rewriting

我有一小部分 URL，我想在我的 .htaccess 文件中进行 301 重定向。

问题是，原始 URL 包含一些奇怪的参数格式，这似乎破坏了重定向。

基本上我需要这个重定向才能工作：

```
redirect 301 "/index.php?id=365,0,0,1,0,0" http://example.com/about/ 
```

example.com 也有一个 index.php 文件，但在我看来它应该重定向。

有人对此有见解吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T18:22:26.743

替换`?id=365,0,0 ...`为`\?id=(\d\d\d.*)$`

或者

```
RewriteRule http://example.com/index.php?id=(\d\d\d.*)$ http://www./example.com/about/ [R=301,L] 
```

# java - 通过java程序读取xml文件

> ID：12269155
> 
> 赞同：0
> 
> 时间：2012-09-04T18:14:32.333
> 
> 标签：java, io

我有一个包含 XML 标记的文件，文件的名称是 abc.xml，我只想知道我应该使用哪种 IO 技术来读取该 xml 文件意味着内存映射 IO、缓冲读取器以及哪个是最快通过java程序读取xml文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T18:17:12.103

解析 XML 文件有两种主要流派：使用 SAX 和 JAXP。SAX 是一种面向流的解析技术。这意味着您在标签之后读取文件标签并且不能向后退。它非常简单快速，但使用它来实现更高级的任务可能会很困难。另一方面，JAXP 将文档表示为对象树（DOM 结构）。它速度较慢并且需要更多内存，但在复杂的 XML 文件操作中通常更容易使用。了解这两种技术是软件工程师的“必须知道”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T18:17:26.630

如果您想快速而肮脏地阅读它的 XML 文件....这里是选项...

**DOM 解析器**

**SAX 解析器**

**拉解析器**

**JAXP 和 JAXB**

**脚轮**

坦率地说，我没有使用内存映射 IO，但一直在使用 Buffered Reader 来实现相同的目的，没有任何问题......

# python - Python Pandas 习语，用于将带有列表作为值的 TimeSeries 转换为 DataFrame

> ID：12269158
> 
> 赞同：2
> 
> 时间：2012-09-04T18:14:35.213
> 
> 标签：python, dataframe, time-series, pandas

假设我有下面的示例 TimeSeries：

```
ts = pandas.TimeSeries({'a':[1,2,3,4,5], 'b':[6,7,8,9,10]}) 
```

我能想到的将其转换为 5 列 DataFrame 的最佳方法如下：

```
tsDataFrame = pandas.DataFrame(
                               [tuple(elem) for elem in ts.values], 
                               index=ts.index.values
                              ) 
```

这是实现这一点的最佳实践习语，还是有任何类型的构造函数或内置的那种“扁平化”其值是数组的列到一组列？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T02:21:45.973

像这样的东西怎么样：

```
In [3]: pandas.DataFrame(list(ts.values), index=ts.index)
Out[3]: 
   0  1  2  3   4
a  1  2  3  4   5
b  6  7  8  9  10 
```

# java - 偶尔不调用 SOAP 客户端处理程序

> ID：12269159
> 
> 赞同：0
> 
> 时间：2012-09-04T18:14:36.257
> 
> 标签：java, web-services, jakarta-ee, soap, websphere

我有一个 SOAP 客户端处理程序，它拦截消息并将 wsse 安全令牌写入标头中。但是由于某种原因，处理程序在某些情况下不会拦截 SOAP 消息，导致标头不包含 wsse 安全令牌，因此请求失败。

任何人都可以指出我仅在某些情况下遇到这种情况的原因。

一些额外的信息。只有在将我们的应用程序从带有 Portal V6.1 的 WAS6.1 迁移到带有 Portal 7 的 WAS 7 之后，我才会遇到这种情况。

问候斯内汉所罗门

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T23:40:11.393

我预计会出现错误，并且您没有看到所有内容，因为您只是在捕获异常。尝试将有问题的代码包装在 try/catch 中以进行 throwable。

# filter - 使用 ActiveSync 从最新到最旧同步电子邮件

> ID：12269164
> 
> 赞同：2
> 
> 时间：2012-09-04T18:14:52.187
> 
> 标签：filter, synchronization, range, activesync

我希望使用 ActiveSync 从最新到最旧检索给定用户的电子邮件。不幸的是，当我为所有用户的电子邮件发出同步请求时，默认情况下 ActiveSync 从最旧的电子邮件开始。对于拥有数千封电子邮件的用户来说，这是一个问题，因为他们需要等待数小时才能同步最新的电子邮件。

我考虑使用[FilterTypes](http://msdn.microsoft.com/en-us/library/gg709713%28v=exchg.80%29)首先同步 1 天前、2 天前、1 周前、...、6 个月前等的电子邮件，但我担心这种方法效率极低，因为相同的消息会结束最多同步很多次。

有没有办法同步特定范围内的电子邮件？如果是这样，我可以同步 0 到 1 天前、1 到 2 天前、2 到 3 天前等的电子邮件，而不必担心同步相同的电子邮件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T17:56:49.583

AFAIK FilterType 方法是您可以使用的唯一工具。EAS（至少，它的 MS Exchange 服务器实现）将同步您过滤范围内的项目，从最旧到最新。

请记住，用户必须等待数小时才能收到数千条消息的问题应该是一次性的。同步大文件夹后，后续的同步对话应该非常有效。

# android - Android如何在android中的imageview上显示按钮

> ID：12269166
> 
> 赞同：0
> 
> 时间：2012-09-04T18:14:58.877
> 
> 标签：android, image

我想在图像视图中的图像上显示按钮。任何人都可以知道如何做到这一点。我是android编程的新手。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T18:17:47.473

通过使用这个你可以动态地在位图上创建按钮......

```
public class MainAct extends GrapActivity implements OnClickListener {

private Button saveButton;
private Button clearButton;

// onCreate Activity
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);          

 // content view 
signature = new MyView(this); 

// Dynamically created button on bitmap & canvas

RelativeLayout myLayout = new RelativeLayout(this);        
myLayout.setLayoutParams(new RelativeLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT)); 

// For Save Button
saveButton = new Button(this); 
saveButton.setText("Save"); 
saveButton.setOnClickListener(this); 

// For Clear Button
clearButton = new Button(this); 
clearButton.setText("Clear"); 
clearButton.setOnClickListener(this); 

myLayout.addView(signature); 
myLayout.addView(saveButton); 
myLayout.addView(clearButton); 

RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(100, LayoutParams.WRAP_CONTENT); 
//Alignments
params.addRule(RelativeLayout.ALIGN_PARENT_BOTTOM); 
params.addRule(RelativeLayout.ALIGN_PARENT_LEFT); 
saveButton.setLayoutParams(params); 

//Alignments
RelativeLayout.LayoutParams params2 = new RelativeLayout.LayoutParams(100, LayoutParams.WRAP_CONTENT); 
params2.addRule(RelativeLayout.ALIGN_PARENT_RIGHT); 
params2.addRule(RelativeLayout.ALIGN_PARENT_BOTTOM); 
clearButton.setLayoutParams(params2); 

saveButton.bringToFront(); 
clearButton.bringToFront(); 
this.setContentView(myLayout); 
new Thread(new RefreshRunner()).start(); 

 // onclick listner for CLEAR button
 clearButton.setOnClickListener(new OnClickListener() {          
    public void onClick(View v) {
        //Activity for Clearing the Screen
        startActivity(new Intent(ThisAct.this, ThisAct.class));
        finish();
    }
});

// onclick listner for SAVE button
    saveButton.setOnClickListener(new OnClickListener() {  
        public void onClick(View v) { 
            //capture the image  
            try {                    
                saveAsJpg(mBitmap);     
                startActivity(new Intent(ThisAct.this, MainActivity.class));
                finish();
            } catch (IOException e) {                   
                e.printStackTrace();
            } 
        }  
    });     
 } 

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T18:18:30.813

使用布局容器，例如`FrameLayout`或`RelativeLayout`来包含`Button`and`ImageView`并为它们提供适当的属性，以便它们根据需要重叠。

# javascript - 红宝石到javascript，可能吗？如何？

> ID：12269167
> 
> 赞同：4
> 
> 时间：2012-09-04T18:14:59.520
> 
> 标签：javascript, ruby

是否有一个工作且积极维护的 ruby​​ 库将 ruby​​ 代码编译为 javascript ？

是否有用 javascript 编写的 ruby​​ 解释器？

我在谷歌上搜索这个，但我发现的都是死的或非常老的项目，这些项目近年来没有收到任何更新，这就是我们所拥有的吗？

rb2js ---- [http://rb2js.rubyforge.org/](http://rb2js.rubyforge.org/) ---- 2006

rubyJS ---- rb2js 的继任者[http://www.ntecs.de/blog/articles/2007/01/08/rubyjs-javascript-no-thank-you/](http://www.ntecs.de/blog/articles/2007/01/08/rubyjs-javascript-no-thank-you/) ---- 2007

红色 ---- [https://github.com/jessesielaff/red#readme](https://github.com/jessesielaff/red#readme) ---- 2008

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T15:23:34.333

你考虑过咖啡脚本（[http://coffeescript.org/](http://coffeescript.org/)）吗？它是一种编译成 JavaScript 的小语言，与 ruby​​ 非常相似。

# java - 如何将十六进制颜色字符串解析为整数

> ID：12269174
> 
> 赞同：4
> 
> 时间：2012-09-04T18:15:34.463
> 
> 标签：java, integer, hex, robolectric

我正在编写 Robolectric 中的一些代码，即`IntegerResourceLoader`. 以下方法抛出一个`RuntimeException`when`rawValue`是诸如**0xFFFF0000 之**类的东西：

```
@Override
public Object convertRawValue( String rawValue ) {
    try {
        return Integer.parseInt( rawValue );
    } catch ( NumberFormatException nfe ) {
        throw new RuntimeException( rawValue + " is not an integer." );
    }
} 
```

我尝试使用[Integer.decode(String)](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Integer.html#decode%28java.lang.String%29)，但即使语法似乎正确，也会引发 NumberFormatException 。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T18:33:44.550

`decode()`是正确的调用方法，但它失败了，因为 0xFFFF0000 高于整数的 0x7fffffff 最大限制。您可能需要考虑 Long。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T18:33:01.610

> 下面的方法是抛出一个`RuntimeException`什么时候`rawValue`是这样的`0xFFFF0000`

这是因为`Integer.parseInt`不是为处理`0x`前缀而设计的。

> 我尝试使用 Integer.decode(String) ，但即使语法似乎正确，也会引发 NumberFormatException 。

来自`Integer.decode`Javadoc（在您的问题中链接）：

> 此字符序列必须表示正值，否则将引发 NumberFormatException。

`0xFFFF0000`是一个负数，因此这很可能是导致此处抛出异常的原因。

**解决方案：**

如果您知道给定的值将采用 形式`0x[hexdigits]`，那么您可以使用[`Integer.parseInt(String, int)`](http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html#parseInt%28java.lang.String)which 采用基数。对于十六进制，基数是 16。像这样：

```
return Integer.parseInt(rawValue.split("[x|X]")[1], 16); 
```

这使用正则表达式`[x|X]`来拆分字符串，该字符串将`rawValue`在小写或大写“x”字符上分开，然后将其传递`parseInt`给以 16 为基数的字符串，以将其解析为十六进制。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-09-14T15:01:34.600

这就是android的做法：

```
private int parseColor(String colorString) {
    if (colorString.charAt(0) == '#') {
        // Use a long to avoid rollovers on #ffXXXXXX
        long color = Long.parseLong(colorString.substring(1), 16);
        if (colorString.length() == 7) {
            // Set the alpha value
            color |= 0x00000000ff000000;
        } else if (colorString.length() != 9) {
            throw new IllegalArgumentException("Unknown color");
        }
        return (int)color;
    }
    throw new IllegalArgumentException("Unknown color");
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-04T18:27:50.870

如果你可以去掉前面的 0x，那么你可以设置 parseInt() 的基数。所以`Integer.parseInt(myHexValue,16)`

有关详细信息，请参阅[http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html#parseInt(java.lang.String](http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html#parseInt(java.lang.String) , int)

# websphere-7 - WebSphere 应用程序服务器日志

> ID：12269182
> 
> 赞同：0
> 
> 时间：2012-09-04T18:16:00.727
> 
> 标签：websphere-7, websphere-6.1

WebSphere Application Server 中可用的不同“日志文件”有哪些？“trace.log”文件有什么用？WebSphere Application Server 中可用的不同“日志级别”有哪些？在 WebSphere Application Server 中哪里可以找到“进程 ID”？您能否推荐一本关于 WebSphere Application Server v6.1,7.0 的手册？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T14:59:44.853

1.  日志文件有：SystemOut.log（信息及以上记录，System.out）、SystemErr.log（System.err）、trace.log（信息以下记录）、native_stdout.log（JVM标准输出）、native_stderr.log（JVM标准错误）。在 WAS 日志记录取代 System.out/.err 之前，native_* 文件是操作系统级别的流重定向。

2.  当跟踪规范包含低于日志记录的级别时，将创建 trace.log 文件。它主要用于服务 (PMR)，因为它包含对 IBM 以外的人来说几乎没有意义的内部类和方法名称，尽管有一些跟踪字符串可能有用。

3.  请参阅信息中心中的[跟踪和日志记录配置](http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/topic/com.ibm.websphere.express.doc/info/exp/ae/rtrb_enabletrc.html)主题。

4.  PID 存储在 PROFILE_HOME/logs/SERVER/SERVER.pid 中。

5.  我没有具体的建议，但我建议查看[WebSphere Redbooks](http://www.redbooks.ibm.com/portals/websphere)。例如：

    *   [WebSphere Application Server V7：概念、规划和设计](http://publib-b.boulder.ibm.com/abstracts/sg247708.html?Open)
    *   [WebSphere Application Server V7 管理和配置指南](http://publib-b.boulder.ibm.com/abstracts/sg247615.html?Open)
    *   [WebSphere Application Server V7：打包应用程序以进行部署](http://publib-b.boulder.ibm.com/abstracts/redp4582.html?Open)
    *   [WebSphere Application Server V7：部署应用程序](http://publib-b.boulder.ibm.com/abstracts/redp4583.html?Open)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T18:31:02.287

您肯定只需要您正在使用的应用程序服务器配置文件的 System.Out 文件，我认为有一个 activity.log 文件，但主要用于 IBM 支持 IIRC。

trace.log 文件用于当您通过 WAS 控制台为应用服务器上运行的不同包启用 JVM 跟踪时。

日志级别是标准的 JVM 日志级别。致命错误警告信息（默认）调试跟踪

Websphere Application Server PID 可以通过管理控制台找到，或者通过“ps -ef | grep WebSphere”之类的快速命令（我倾向于通过产品文件夹名称 grep，如果您在集群环境中运行，则会为您带来节点和部署管理器）

至于手册，“Pro WebSphere Application Server Internals”是一个不错的选择，一旦您对产品有所了解，信息中心就会拥有您可能需要的大部分内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T07:09:10.467

据我所知，有两个日志文件 System.out 和 System.err。使用 System.out 进行日志记录。您可以通过运行管理控制台来更改日志级别——疑难解答——记录和跟踪不同的日志级别是 info、debug、fine、finer、finest、warn

# java - 后缀计算器 Java

> ID：12269191
> 
> 赞同：7
> 
> 时间：2012-09-04T18:16:32.333
> 
> 标签：java, calculator, postfix-notation, stack

好的，所以我必须从文件中读取后缀表达式。后缀表达式必须有空格来分隔每个运算符或操作数。到目前为止，我只有在输入文件中的运算符或操作数之间没有空格时才有效。（即如果文件有 12+，我得到的结果是 3。）为了做到这一点，我认为我需要对输入进行标记，但我不确定如何。这就是我到目前为止所拥有的。感谢您的任何回复。

```
import java.util.*;
import java.io.*;
public class PostfixCalc{
public static void main (String [] args) throws Exception {
File file = new File("in.txt");
Scanner sc = new Scanner(file);
String input = sc.next();
Stack<Integer> calc = new Stack<Integer>();
while(sc.hasNext()){
for(int i = 0; i < input.length(); i++){
    char c = input.charAt(i);
    int x = 0;
    int y = 0;
    int r = 0;
    if(Character.isDigit(c)){
       int t = Character.getNumericValue(c);
        calc.push(t);
    }
    else if(c == '+'){
        x = calc.pop();
        y = calc.pop();
        r = x+y;
        calc.push(r);
    }
     else if(c == '-'){
        x = calc.pop();
        y = calc.pop();
        r = x-y;
        calc.push(r);
    }
     else if(c == '*'){
        x = calc.pop();
        y = calc.pop();
        r = x*y;
        calc.push(r);
    }
     else if(c == '/'){
        x = calc.pop();
        y = calc.pop();
        r = x/y;
        calc.push(r);
    }
}
 }
 int a = calc.pop();
System.out.println(a);
 }
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T18:22:14.153

您需要更改几件事，您可以逐步进行。

1.  声明你`Stack`包含`Integer`s 而不是`Character`s。
2.  在读取输入的代码中，依赖`String`s 而不是`Character`s。
3.  使用 解析操作数`Integer.parseInt()`。这会将`String`s 转换为`Integer`s。（实际上，它将它们转换为`int`s，但在您的情况下，这种差异并不重要。）
4.  `Scanner.useDelimiter()`使用to设置扫描仪分隔符`\s+`，这将匹配任何空白字符的序列。

当然，还有无数其他方法可以处理您的输入，但我试图让您了解如何更改现有代码以完成它需要做的事情。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-08-10T23:05:52.657

为了标记化，您可以使用`String.split()`单个空格作为**分隔符**；

```
String[] inputs = input.split(" "); 
```

这是我刚刚编写的完整解决方案，它使用基于**单链表的****Stack**实现来制作后缀计算器；

 **### A - PostFixCalculator

```
import java.io.BufferedReader;
import java.io.FileReader;
import java.io.IOException;

public class PostFixCalculator {

    private static final String ADD = "+"; 
    private static final String SUB = "-";
    private static final String MUL = "*";
    private static final String DIV = "/";

    public void calculateFile(String fileName) throws IOException {
        BufferedReader br = null;
        StringBuilder sb = null;
        try {
            FileReader fileReader = new FileReader(fileName);
            br = new BufferedReader(fileReader);

            sb = new StringBuilder();
            String line = br.readLine();

            while (line != null) {
                sb.append(line);
                line = br.readLine();
            }

            String input = sb.toString();
            System.out.println(input + " = " + calculate(input));
        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            br.close();
        }
    }

    private int calculate(String input) {
        SinglyLinkedListStack<Integer> stack = new SinglyLinkedListStack<>();

        String[] inputs = input.split(" ");

        return handleCalculation(stack, inputs);
    }

    private static int handleCalculation(SinglyLinkedListStack<Integer> stack, String[] el) {
        int operand1, operand2;

        for(int i = 0; i < el.length; i++) {
            if( el[i].equals(ADD) || el[i].equals(SUB) || el[i].equals(MUL) || el[i].equals(DIV) ) {
                operand2 = stack.pop();
                operand1 = stack.pop();
                switch(el[i]) {
                    case ADD: {
                        int local = operand1 + operand2;
                        stack.push(local);
                        break;
                    }

                    case SUB: {
                        int local = operand1 - operand2;
                        stack.push(local);
                        break;
                    }

                    case MUL: {
                        int local = operand1 * operand2;
                        stack.push(local);
                        break;
                    }

                    case DIV: {
                        int local = operand1 / operand2;
                        stack.push(local);
                        break;
                    }
                }
            } else {
                stack.push(Integer.parseInt(el[i]));
            }
        }

        return stack.pop();
    }

} 
```

### B - 单链表栈

```
public class SinglyLinkedListStack<T> {

    private int size;
    private Node<T> head;

    public SinglyLinkedListStack() {
        head = null;
        size = 0;
    }

    public void push(T element) {
        if(head == null) {
            head = new Node(element);
        } else {
            Node<T> newNode = new Node(element);
            newNode.next = head;
            head = newNode;
        }

        size++;
    }

    public T pop() {
        if(head == null)
            return null;
        else {
            T topData = head.data;

            head = head.next;
            size--;

            return topData;
        }
    }

    public T top() {
        if(head != null)
            return head.data;
        else
            return null;
    }

    public int size() {
        return size;
    }

    public boolean isEmpty() {
        return size == 0;
    }

    private class Node<T> {
        private T data;
        private Node<T> next;

        public Node(T data) {
            this.data = data;
        }

    }

} 
```

### C - 演示

```
import java.io.IOException;

public class PostFixCalculatorDemo {
    public static void main(String[] args) throws IOException {
        PostFixCalculator calc = new PostFixCalculator();
        calc.calculateFile("postfix.txt");
    }
} 
```

### D - 示例输入文件：“postfix.txt”

```
6 5 2 3 + 8 * + 3 + * 
```

### E - 演示输出

```
6 5 2 3 + 8 * + 3 + *  = 288 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T18:22:38.937

你不需要扫描仪

只需使用[BufferedReader](http://docs.oracle.com/javase/6/docs/api/java/io/BufferedReader.html)读取文件，然后使用它的方法 readLine 来获取行

然后使用

```
String tokens[] = line.split("\\s+?") 
```

您将获得可以在您的代码中处理的“令牌”数组。

要识别号码，您可以使用以下正则表达式：

```
Pattern isNumber = Pattern.compile("^\\d+?$")
if (isNumber.matcher(token).matches()) {
    push(Integer.parseInt(token));
} 
```**

# javascript - 作为纯文本加载的脚本 - 未声明纯文本文档的字符编码。

> ID：12269192
> 
> 赞同：0
> 
> 时间：2012-09-04T18:16:33.340
> 
> 标签：javascript, forms, utf-8, character-encoding, submit

显然这不是最终形式，而是我为调试该形式而创建的一个片段。它仍然具有与最终形式相同的错误。我已经为此工作了几个小时。

我的客户端 localhost 上没有任何其他 html 表单中的其他 javascript 执行此操作。这是在 MAC 上的 MAMP 环境中。

它就在这里，我无法修复它来拯救我的**。在这一点上最受欢迎的建议。它必须是一些简单的东西。我已经尝试了所有困难的东西，但对结果没有影响。

### html文件内容

```
<!DOCTYPE html>
  <head>
    <meta charset="utf-8" />
    <title>NCSA Contact Form</title>
  </head>

  <body>
    <form action="test.js" name="frmNcsa" id="frmNcsa" method="post">
       <input type="submit" name="submitData" id="submitData" value="Submit"/>

    </form>

    <script type="text/javascript" src="test.js"></script>

  </body>
</html> 
```

### test.js 文件内容

```
 var $ = function(id){
      document.getElementById(id)
    }

    function prepareEventHandlers() {
      alert("This is test.js")
    }

    window.onload =  function () {
      prepareEventHandlers();
    } 
```

### 火狐错误信息

未声明纯文本文档的字符编码。如果文档包含 US-ASCII 范围之外的字符，则文档将在某些浏览器配置中呈现乱码。文件的字符编码需要在传输协议中声明或文件需要使用字节顺序标记作为编码签名。

### 页面重新加载后

单击表单提交按钮后，我在浏览器中看到的页面重新加载，提交按钮消失了。JS文件作为文本读入浏览器

```
var $ = function(id){
    document.getElementById(id)
}

function prepareEventHandlers() {
    alert("This is test.js")
}

window.onload =  function () {
    prepareEventHandlers();  
} 
```

## 点击提交应该做什么？

显示“这是一个测试”的警报对话框。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T18:30:46.093

通过`action="test.js"`在您的表单中，您告诉浏览器该表单应该提交（发布）到**服务器**上的 test.js ，这没有多大意义。在不了解您实际要实现的目标的更多信息的情况下，我只能假设您希望表单纯粹在客户端使用 javascript 处理？在这种情况下，您[根本不需要表格](https://stackoverflow.com/questions/5626940/html-form-that-doesnt-actually-submit-anything-to-the-server-client-side-proce)。您只需要一个带有操作的提交按钮，该操作在单击时调用您的处理程序函数。

# qt - QT: Best way to load new content (or .ui) in a window (or dialog)

> ID：12269203
> 
> 赞同：1
> 
> 时间：2012-09-04T18:17:46.123
> 
> 标签：qt

I want to create an application whose content of the window will change based on some events. E.g. I have created different .ui files for different content:

a.ui

b.ui

c.ui

After some time (or after some user action) I want to load b.ui into same window. Any idea how to do this?

(I tried to close one window and launch another. But if the user drags one then pushes 'Next' Button it will not open at same location.)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T21:54:20.643

Maybe [QStackedWidget](http://doc.qt.nokia.com/4.7-snapshot/qstackedwidget.html) is what you're looking for, it manages several widgets on top of each-other for you, showing only one at a time. Think of it as a tab widget without showing the tabs.

edit: seeing the "Next" in your post the QWizard answer is probably what you're looking for though.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T18:24:37.240

I'd use a [QWizard](http://doc-snapshot.qt-project.org/4.8/qwizard.html) for that. I suppose it is the quickest way to go.

EDIT: To be more precise, the answer to your question would be to use the [QUiLoader](http://qt-project.org/doc/qt-4.8/quiloader.html) class, to load the ui files you created at runtime. Which is exactly what you asked.

# android - 通过java使用本机内存

> ID：12269207
> 
> 赞同：1
> 
> 时间：2012-09-04T18:17:47.797
> 
> 标签：android, heap-memory, bytebuffer, unmanaged-memory

有时，需要绕过应用程序的堆内存限制并使用超出允许范围的内存。

我想到了一个解决方案，其中包括一种缓存机制，它将字节存储在本机内存中（不是在堆内存中，而是在非托管内存中）。

当然，我会考虑系统的最大可用大小。

[所以，对直接缓冲区](http://www.javamex.com/tutorials/io/nio_buffer_direct.shtml)有所了解，我用它在本机内存中存储了一个字节数组：

```
 final ByteBuffer nativeBytes=ByteBuffer.allocateDirect(bytes.length);
  nativeBytes.put(bytes); 
```

但是，似乎在 Android 上，用于此的内存是在堆中使用的，而不是在本机内存中使用的。

到底是怎么回事？是否有一种简单的替代方法可以从本机内存存储和加载数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T21:45:29.183

您可以使用 NDK 实现一些东西，它会在本机堆中为您分配内存并使用 JNI 与其通信。本机部分在 C 中实现，并使用`malloc()`调用在本机堆中分配内存。不过，您仍然会受到每个进程堆最大值的影响。

这是另一种选择。与其尝试在自己的进程中使用本机堆，不如在另一个进程中使用 dalvik 堆。

创建一个服务并在另一个进程中运行该服务。您可以在服务和应用程序的其余部分之间来回发送数据。堆限制是**每个进程**的，因此这有效地使您的应用程序可以使用的内存量加倍。

当然，这可能对您的特定情况没有帮助，但很高兴知道此选项可用。

# mono - 我使用什么 repo 在 RHEL 5.6 上安装 Mono 2+？

> ID：12269208
> 
> 赞同：2
> 
> 时间：2012-09-04T18:17:48.557
> 
> 标签：mono

我真的在这里把我的头发拉出来。[使用 YUM 在 Centos 5.5 上安装 Mono 中](https://stackoverflow.com/questions/3510320/install-mono-on-centos5-5-using-yum)列出的存储库不再存在。我已经尝试从源代码编译，但我得到了大量的错误。我真的很想拥有一个可以通过 yum 安装 mono 的 repo。

我可以使用什么 repo 来安装 Mono？太感谢了！

*   杰夫

# ruby - 在 heroku 上运行带有 gems 的 Ruby 脚本失败：没有要加载的文件

> ID：12269210
> 
> 赞同：1
> 
> 时间：2012-09-04T18:18:03.807
> 
> 标签：ruby, deployment, heroku, rubygems

我想在 heroku 服务器上运行一个 ruby​​ 脚本。问题是当我在 Heroku 上运行脚本时，它似乎看不到任何宝石！这是我刚刚创建的示例测试情况。

我在 test.rb 文件中有一个简单的 Ruby 脚本：

```
require 'rubygems'
require 'mechanize'

puts "Success!" 
```

我也有一个 Gemfile：

```
source :rubygems
ruby '1.8.7'
gem 'mechanize' 
```

一切都在我的本地机器上运行

```
~/Ruby/test % ruby test.rb
Success! 
```

当我把它推到heroku时它看起来很好

```
~/Ruby/test % git push heroku master
Enter passphrase for key '/home/sadie/.ssh/id_rsa': 
Counting objects: 9, done.
Compressing objects: 100% (7/7), done.
Writing objects: 100% (9/9), 1.02 KiB, done.
Total 9 (delta 1), reused 0 (delta 0)
-----> Heroku receiving push
-----> Ruby app detected
-----> Using Ruby version: ruby-1.8.7
-----> Installing dependencies using Bundler version 1.2.0
       Running: bundle install --without development:test --path vendor/bundle --binstubs bin/ --deployment
       Fetching gem metadata from http://rubygems.org/.......
       Installing unf_ext (0.0.5) with native extensions
       Installing unf (0.0.5)
       Installing domain_name (0.5.3)
       Installing mime-types (1.19)
       Installing net-http-digest_auth (1.2.1)
       Installing net-http-persistent (2.7)
       Installing nokogiri (1.5.5) with native extensions
       Installing ntlm-http (0.1.1)
       Installing webrobots (0.0.13)
       Installing mechanize (2.5.1)
       Using bundler (1.2.0)
       Your bundle is complete! It was installed into ./vendor/bundle
       Cleaning up the bundler cache.
-----> Discovering process types
       Procfile declares types -> (none)
       Default types for Ruby  -> console, rake
-----> Compiled slug size is 7.3MB
-----> Launching... done, v3
       http://nameless-river-3415.herokuapp.com deployed to Heroku

To git@heroku.com:nameless-river-3415.git
 * [new branch]      master -> master 
```

但运行脚本失败：

```
~/Ruby/test % heroku run 'ruby test.rb'
Running `ruby test.rb` attached to terminal... up, run.1
/app/vendor/ruby-1.8.7/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36:in `gem_original_require': no such file to load -- mechanize (LoadError)
    from /app/vendor/ruby-1.8.7/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36:in `require'
    from test.rb:2 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T16:03:35.890

尝试运行：

`heroku run bundle exec ruby test.rb`

你指定了一个特定的 ruby​​ 版本，所以你需要用它来执行它。

# ios - 浮点比较 >= 与（> 或 ==）

> ID：12269213
> 
> 赞同：4
> 
> 时间：2012-09-04T18:18:13.887
> 
> 标签：ios, floating-point

我在维护/扩展的一大段代码中注意到以下内容：

```
float systemVersion = [[[UIDevice currentDevice] systemVersion] floatValue];
if (systemVersion > 3.2 || systemVersion == 3.2 ) {
    //Stuff
} 
```

我知道浮点会由于精度而导致一些奇怪的比较行为，但是上面的行为与下面的代码块有什么不同吗？

```
float systemVersion = [[[UIDevice currentDevice] systemVersion] floatValue];
if (systemVersion >= 3.2) {
    //Stuff
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T18:25:37.283

这是同一件事。在许多编译器中，生成的机器指令是完全相同的（尽管我不能肯定这对于 clang 是正确的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T18:22:34.350

不，它不会。我认为这段代码是偶然的（可能经过几次小的调整）。

# arrays - vb.net StringBetween 函数数组

> ID：12269215
> 
> 赞同：-1
> 
> 时间：2012-09-04T18:18:14.370
> 
> 标签：arrays, vb.net

我需要一个字符串之间的函数。但是函数应该是数组。

例如：p1 和 p2 一些文本。

Mystring =“bla bla bla **StartText** bla bla bal **EndText** bla bla **StartText** bla bla **EndText** ”

这个函数是；

```
dim BetweenStrings as Array 

BetweenStrings = _GetStringBetween(Mystring,"StartText","EndText")

BetweenStrings(1) ---> bla bla bla bla

BetweenStrings(2) ---> bla bla 
```

用于所有 StartText 和 EndText 之间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T19:31:21.590

您可能想查看字符串匹配的正则表达式。例如，从您的输入字符串中，您可以执行以下操作：

```
Dim regexString = "StartText(?<found>[^EndText]+)"
Dim matches = Regex.Match(MyString, regexString)
For Each match in matches
  Console.WriteLine(match.Groups("found").Value)
Next 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T19:34:56.903

正如 Jim Wooley 所证明的那样，使用 RegEx 将是一个很好的选择。但是，如果您正在寻找非正则表达式解决方案，这应该可以工作：

```
Private Function _GetStringBetween(ByVal text As String, ByVal startTag As String, ByVal endTag As String) As String()
    Dim results As New List(Of String)()
    While text.Length <> 0
        Dim startIndex As Integer = text.IndexOf(startTag)
        If startIndex <> -1 Then
            text = text.Substring(startIndex + startTag.Length)
            Dim endIndex As Integer = text.IndexOf(endTag)
            If endIndex <> -1 Then
                results.Add(text.Substring(0, endIndex))
                text = text.Substring(endIndex + endTag.Length)
            Else
                Exit While
            End If
        Else
            Exit While
        End If
    End While
    Return results.ToArray()
End Function 
```

# javascript - 页内声音警告

> ID：12269219
> 
> 赞同：3
> 
> 时间：2012-09-04T18:18:27.020
> 
> 标签：javascript, jquery, html, audio

我需要在 PHP 支持的页面中创建声音警告，当 PHP 中的某些条件满足时播放。

我能想到的唯一方法是有条件地嵌入一个小的 Flash 文件，该文件会在浏览器中渲染时播放声音......但是，这对我来说似乎有点过时了......像JS alert() 声音就足够了（我也考虑过使用 alert() 方式）。或 Facebook 聊天消息通知声音...

任何其他想法如何做到这一点？最好使用jQuery / JS等...

（不寻找任何完整的解决方案/代码等，只是指出我正确的方向......如果有的话）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T18:36:02.723

[HTML5 音频元素](https://developer.mozilla.org/en-US/docs/Using_HTML5_audio_and_video)

```
<audio src="audio.ogg" controls autoplay loop>
     <p>Your browser does not support the audio element </p>
</audio> 
```

流行的 JS 库是[SoundManager2](http://www.schillmania.com/projects/soundmanager2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-08T11:06:30.763

当满足您想要的条件时，将此添加到您的 js 中：

```
var snd='<audio autoplay="true"><source src="sound.mp3"></audio>';  
$('body').append(snd); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T18:25:44.350

我有同样的问题，只是我用了这个：

```
if($condition)
  echo "<embed src='/file/sound/alert.swf' />" 
```

# ios - iOS 发布版本列表

> ID：12269220
> 
> 赞同：0
> 
> 时间：2012-09-04T18:18:27.160
> 
> 标签：ios, version, release

我正在寻找所有 iOS 发布版本的完整列表。苹果在Android中有这样的官方列表吗？[http://developer.android.com/guide/topics/manifest/uses-sdk-element.html](http://developer.android.com/guide/topics/manifest/uses-sdk-element.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T18:21:01.560

你最好的选择是离开 IPSW 名单

[http://www.felixbruns.de/iPod/firmware/](http://www.felixbruns.de/iPod/firmware/)

[http://osxdaily.com/2010/10/25/download-iphone-firmware-ipsw/](http://osxdaily.com/2010/10/25/download-iphone-firmware-ipsw/)

苹果内部有一个，好久没看到了，链接也没有了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T18:24:26.197

IPSW 3.0.0 3.0.0 (iPhone 2G): iPhone1,1_3.0_7A341_Restore.ipsw 3.0.0 (iPhone 3G): iPhone1,2_3.0_7A341_Restore.ipsw 3.0.0 (iPhone 3GS): iPhone2,1_3.0_7A341_Restore.ipsw 3.0.1 3.0.1 (iPhone 2G): iPhone1,1_3.0.1_7A400_Restore.ipsw 3.0.1 (iPhone 3G): iPhone1,2_3.0.1_7A400_Restore.ipsw 3.0.1 (iPhone 3GS): iPhone2,1_3.0.1_7A400_Restore。 ipsw IPSW 3.1.0 3.1.0 (iPhone 2G): iPhone1,1_3.1_7C144_Restore.ipsw 3.1.0 (iPhone 3G): iPhone1,2_3.1_7C144_Restore.ipsw 3.1.0 (iPhone 3GS): iPhone2,1_3.1_7C144_Restore.ipsw IPSW 3.1.2 3.1.2 (iPhone 2G): iPhone1,1_3.1.2_7D11_Restore.ipsw 3.1.2 (iPhone 3G): iPhone1,2_3.1.2_7D11_Restore.ipsw 3.1.2 (iPhone 3GS): iPhone2,1_3.1.2_7D11_Restore .ipsw IPSW 3.1.3 3.1.3 (iPhone 2G): iPhone1,1_3.1.3_7E18_Restore.ipsw 3.1.3 (iPhone 3G): iPhone1,2_3.1.3_7E18_Restore.ipsw 3.1.3 (iPhone 3GS): iPhone2,1_3。 1.3_7E18_Restore.ipsw IPSW 4。0.0 4.0.0 (iPhone 3G): iPhone1,2_4.0_8A293_Restore.ipsw 4.0.0 (iPhone 3GS): iPhone2,1_4.0_8A293_Restore.ipsw 4.0.0 (iPhone 4): iPhone3,1_4.0_8A293_Restore.ipsw IPSW 4.0.1 4.0.1 (iPhone 3G): iPhone1,2_4.0.1_8A306_Restore.ipsw 4.0.1 (iPhone 3GS): iPhone2,1_4.0.1_8A306_Restore.ipsw 4.0.1 (iPhone 4): iPhone3,1_4.0.1_8A306_Restore.ipsw IPSW 4.0 .2 4.0.2 (iPhone 3G): iPhone1,2_4.0.2_8A400_Restore.ipsw 4.0.2 (iPhone 3GS): iPhone2,1_4.0.2_8A400_Restore.ipsw 4.0.2 (iPhone 4): iPhone3,1_4.0.2_8A400_Restore.ipsw IPSW 4.1.0 4.1.0 (iPhone 3G): iPhone1,2_4.1_8B117_Restore.ipsw 4.1.0 (iPhone 3GS): iPhone2,1_4.1_8B117_Restore.ipsw 4.1.0 (iPhone 4): iPhone3,1_4.1_8B117_Restore.ipsw IPSW 4.2.1 iOS 4.2 作为 iOS 4.2.1 发布，此 IPSW 反映：0 (iPhone 4): iPhone3,1_4.0_8A293_Restore.ipsw IPSW 4.0.1 4.0.1 (iPhone 3G): iPhone1,2_4.0.1_8A306_Restore.ipsw 4.0.1 (iPhone 3GS): iPhone2,1_4.0.1_8A306_Restore.ipsw 4.0 .1 (iPhone 4): iPhone3,1_4.0.1_8A306_Restore.ipsw IPSW 4.0.2 4.0.2 (iPhone 3G): iPhone1,2_4.0.2_8A400_Restore.ipsw 4.0.2 (iPhone 3GS): iPhone2,1_4.0.2_8A400_Restore。 ipsw 4.0.2 (iPhone 4): iPhone3,1_4.0.2_8A400_Restore.ipsw IPSW 4.1.0 4.1.0 (iPhone 3G): iPhone1,2_4.1_8B117_Restore.ipsw 4.1.0 (iPhone 3GS): iPhone2,1_4.1_8B117_Restore。 ipsw 4.1.0 (iPhone 4)：iPhone3,1_4.1_8B117_Restore.ipsw IPSW 4.2.1 iOS 4.2 作为 iOS 4.2.1 发布，此 IPSW 反映：0 (iPhone 4): iPhone3,1_4.0_8A293_Restore.ipsw IPSW 4.0.1 4.0.1 (iPhone 3G): iPhone1,2_4.0.1_8A306_Restore.ipsw 4.0.1 (iPhone 3GS): iPhone2,1_4.0.1_8A306_Restore.ipsw 4.0 .1 (iPhone 4): iPhone3,1_4.0.1_8A306_Restore.ipsw IPSW 4.0.2 4.0.2 (iPhone 3G): iPhone1,2_4.0.2_8A400_Restore.ipsw 4.0.2 (iPhone 3GS): iPhone2,1_4.0.2_8A400_Restore。 ipsw 4.0.2 (iPhone 4): iPhone3,1_4.0.2_8A400_Restore.ipsw IPSW 4.1.0 4.1.0 (iPhone 3G): iPhone1,2_4.1_8B117_Restore.ipsw 4.1.0 (iPhone 3GS): iPhone2,1_4.1_8B117_Restore。 ipsw 4.1.0 (iPhone 4)：iPhone3,1_4.1_8B117_Restore.ipsw IPSW 4.2.1 iOS 4.2 作为 iOS 4.2.1 发布，此 IPSW 反映：2 4.0.2 (iPhone 3G): iPhone1,2_4.0.2_8A400_Restore.ipsw 4.0.2 (iPhone 3GS): iPhone2,1_4.0.2_8A400_Restore.ipsw 4.0.2 (iPhone 4): iPhone3,1_4.0.2_8A400_Restore.ipsw IPSW 4.1.0 4.1.0 (iPhone 3G): iPhone1,2_4.1_8B117_Restore.ipsw 4.1.0 (iPhone 3GS): iPhone2,1_4.1_8B117_Restore.ipsw 4.1.0 (iPhone 4): iPhone3,1_4.1_8B117_Restore.ipsw IPSW 4.2 .1 iOS 4.2 作为 iOS 4.2.1 发布，此 IPSW 反映：2 4.0.2 (iPhone 3G): iPhone1,2_4.0.2_8A400_Restore.ipsw 4.0.2 (iPhone 3GS): iPhone2,1_4.0.2_8A400_Restore.ipsw 4.0.2 (iPhone 4): iPhone3,1_4.0.2_8A400_Restore.ipsw IPSW 4.1.0 4.1.0 (iPhone 3G): iPhone1,2_4.1_8B117_Restore.ipsw 4.1.0 (iPhone 3GS): iPhone2,1_4.1_8B117_Restore.ipsw 4.1.0 (iPhone 4): iPhone3,1_4.1_8B117_Restore.ipsw IPSW 4.2 .1 iOS 4.2 作为 iOS 4.2.1 发布，此 IPSW 反映：

iPhone 4 iPhone 3GS iPhone 3G IPSW 4.2.6 iOS 4.2.6 IPSW 迄今为止仅适用于 CDMA iPhone 4 型号：

CDMA iPhone 4 IPSW 4.3 iOS 4.3 支持 iPhone 4 和 iPhone 3GS：

iPhone 4 (GSM) iPhone 3GS IPSW 4.3.1 iPhone 3GS iPhone 4 GSM iPhone IPSW for iOS 4.3.3 iPhone 3GS iPhone 4 GSM iPhone 4 CDMA – iOS 4.2.8 iPhone IPSW for iOS 4.3.4 iPhone 4 (GSM) iPhone 4 (CDMA) (iOS 4.2.9) iPhone 3GS iOS 4.3.5 IPSW iPhone iPhone 4 GSM iPhone 4 CDMA (iOS 4.2.10) iPhone 3GS iOS 5 IPSW iPhone 3GS iPhone 4 GSM iPhone 4 CDMA iOS 5.0.1 IPSW iPhone 4S iPhone 4 GSM iPhone 4 CDMA iPhone 3GS iOS 5.0.1 9A406 IPSW iPhone 4S 9A406 iOS 5.1 IPSW iPhone 3GS iPhone 4 GSM (AT&T) iPhone 4 CDMA (Verizon) iPhone 4S iOS 5.1.1 IPSW iPhone 3GS iPhone 4 GSM iPhone 4 CDMA iPhone 4S

# jakarta-ee - 注释何时以及如何在 Java 中初始化？我可以控制这个吗？

> ID：12269229
> 
> 赞同：0
> 
> 时间：2012-09-04T18:19:04.760
> 
> 标签：jakarta-ee, annotations, bean-validation

我已经指定了一个用于 Java bean-validation 的自定义注解。我对所有字段使用相同的注释类，并使用字段名称传递一个字符串参数，如下所示：

```
@CustomConstraint(value="name")
private String name;
@CustomConstraint(value="address1")
private String addressLine1; 
```

我的约束验证器维护一个 HashMap，它将字符串键（字段名称）映射到我的验证类的接口。我通过将特定字段名称与将用于验证字段的接口的具体子类配对来静态初始化此映射，如下所示：

```
private static final Map<String, CustomValidatorClass> fieldMapper; 

static {
    Map<String, CustomValidatorClass> map = new HashMap<String, CustomValidatorClass>();
    map.put("name", new NameValidator());
    map.put("address1", new Address1Validator());
    fieldMapper = Collections.unmodifiableMap(map);
} 
```

我担心这个初始化过程可能非常昂贵（我有几十个字段），并且它可能会为我正在验证的每个字段进行初始化。我希望有某种方法可以指定注释应该初始化一次并重用，或者这是默认行为。

编辑：我使用 JSF 2.0 和 bean-validation，所以我不直接阅读或调用这些注释。这是由框架处理的，这就是为什么我无法准确确定它是如何运行的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T07:55:00.237

你的问题不是很清楚，你的设计对我来说似乎很奇怪：

1.  为什么要复制注释中的字段名称？当您在运行时检查注释时，您知道哪个注释绑定到哪个字段。你的`value`似乎是多余的。

    > @CustomConstraint(value="name-of-field"))
    > 
    > 字段类型字段名称；

2.  为什么要在静态映射中将字段映射到验证器？您可以使用注释定义此映射：

    > @CustomConstraint(validator=NameValidator.class)
    > 
    > 字段类型字段名称；

我相信这就是大多数基于注释的验证框架的运作方式，例如[spring 基于注释的验证](http://springinpractice.com/2008/07/17/annotation-based-validation-with-the-spring-bean-validation-framework/)。

**编辑**

我想要阅读注释，您必须执行以下操作：

```
for(Field field : cls.getDeclaredFields()){
 Class type = field.getType();
 String name = field.getName();
 Annotation[] annotations = field.getDeclaredAnnotations();
} 
```

因此，您知道特定注释如何属于特定字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T14:29:59.703

我做了一些测试，似乎我在地图上进行的静态初始化只是在我第一次尝试验证字段时才被调用。这意味着注释不会被重复初始化，而是被重复用于每个字段。现在解决了我对大型初始化开销的担忧。

# java - 如何从条件中获取查询？

> ID：12269235
> 
> 赞同：3
> 
> 时间：2012-09-04T18:19:31.137
> 
> 标签：java, hibernate, jpa, hibernate-criteria, seam2

我正在使用`Seam 2.2.0.GA`with`JPA 1.2`提供的`Hibernate 3.3`. 有没有办法从查询中获取一个对象`org.hibernate.Query`或`javax.persistence.Query`类的对象`org.hibernate.Criteria`？将 Criteria 查询作为 EjbQL 查询字符串对我来说也是可以接受的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T18:33:02.580

不，这是不可能的。条件查询直接转换为 SQL，无需通过中间 JPQL/HQL 查询。

# ruby-on-rails - 向rails模型对象添加属性

> ID：12269237
> 
> 赞同：0
> 
> 时间：2012-09-04T18:19:44.823
> 
> 标签：ruby-on-rails

我有一个模范**生**。在*studentsController*中，我选择了一组学生。我想在第一条和最后一条记录上附加一个标志。

我将显示部分学生列表，如下所示：**students/_student**并且当用户点击每个学生时，他们会得到一个弹出窗口。

我想使用该标志来确定该学生是否是第一个/最后一个，以便我可以向 url 添加一个查询参数。例如，当您将鼠标悬停在第一个学生上时，URL 将如下所示：**localhost:3000/student/1?location=first**

通过部分显示时，部分中不存在集合，所以我不能只做这样的测试：student.first？

有任何想法吗？谢谢你。

[编辑]。这最初是对@neils 的回复，但我想我会把它放在那里：它可以工作，但是我还有另一个问题。因为我使用的是“自动滚动”功能，当用户向下滚动页面时会加载更多学生（一次 3 个），“第一个”和“最后一个”被添加到每个学生的第一个和第三个学生row 而不是集合的实际第一个和最后一个。我进行自动滚动的方式：我使用 $.getScript 来请求**index.js.erb**文件。该文件像这样渲染**students/_student**：*渲染 @students*，并附加到容器 div。我在该模板（**students/_student**）中渲染 url，因此参数每第一次/第三次渲染一次。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T03:50:22.203

如果需要，您可以继续`render @students`通话。请注意，`student_counter`当您这样做时，您会神奇地在您的部分中为您提供一个助手。现在在您的部分中，您可以通过助手或装饰器`student_counter`比较`@students.size`并设置您`link_to`的 's 。`:location=>'first/last'`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T18:30:36.000

假设您已经将一些学生集合分配给控制器中的@students ( `Student.all`, `Student.where(some_conditions)`, 不管...)，您可以执行以下操作：

添加`attr_accessor :flag`到您的`Student`模型：

```
class Student < ActiveRecord::Base
  attr_accessor :flag
  #... rest of your code
end 
```

这会在您的 Student 实例上创建一个非 ActiveRecord 属性。

比你可以在控制器中做一些事情，比如：

```
@students[0].flag = 'first'
@students[-1].flag = 'last' 
```

然后在您的视图中使用该信息。不是很优雅，但它应该可以解决问题。

**编辑：** 详细说明以上内容，使其更清楚。 **EDIT2：** 修正错误，`attr_accessor`是正确的方法，而不是`attr_accessable`......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T19:00:08.640

我不确定我是否正确理解了你的问题，但我会试一试。

假设您将`@students`其用作列表的实例变量，您可以将学生列表传递给您的部分，如下所示：

```
<%= render 'students', :locals => {:students => @students} %> 
```

在 内部`students/_students`，您可以遍历列表并使用以下方法确定它们的位置`each_with_index`：

```
<% students.each_with_index do |student, index| %> 
```

# apache - 无法在 HTTPD.CONF 文件中配置 mod_JK 以进行负载平衡

> ID：12269241
> 
> 赞同：1
> 
> 时间：2012-09-04T18:20:02.603
> 
> 标签：apache, tomcat, load-balancing, httpd.conf, mod-jk

我无法使用 mod_jk 配置 apache 负载均衡器。每次我更改 httpd.conf 文件时，apache 服务器都不会启动。

这是场景：我有 2 个 apache tomcat 实例，Tomcat 和 tomcat2，它们都在不同的端口上运行。我想用 apache mod_jk 为这两个实例建立一个负载均衡器：

我已经下载了 mod_jk.so 文件并放置在模块文件夹中。下面的配置我正在尝试 httpd.conf 文件：

```
LoadModule jk_module modules/mod_jk.so 
AddModule mod_jk.c
JkWorkersFile conf/workers.properties
JkLogFile log/httpd/mod_jk.log
JkLogLevel info
mod_jk loadbalancer
JkMount /examples/* loadbalancer 
```

这是我的workers.propertise 文件：

```
# Define list of workers that will be used
worker.list=loadbalancer
# Define Node1
worker.node1.port=8009
worker.node1.host=localhost
worker.node1.type=ajp13
worker.node1.lbfactor=1
worker.node1.cachesize=10
# Define Node2
worker.node2.port=8010
worker.node2.host=localhost
worker.node2.type=ajp13
worker.node2.lbfactor=1
worker.node2.cachesize=10
# Load-balancing behaviour
worker.loadbalancer.type=lb
worker.loadbalancer.balance_workers=node1,node2
worker.loadbalancer.sticky_session=1
# Status worker for managing load balancer
worker.status.type=status 
```

我不确定，这里有什么问题。可能是我在 httpd.conf 文件中的错误位置添加了 mod_jk conf。任何人都可以指导。任何**示例工作 HTTPD.CONF 文件都会很棒。**

谢谢你的帮助。

-桑托什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T03:57:23.323

问题解决：我使用的是与 apache 2.0 和 Apache webserver 2.2 兼容的 mod_jk.so 文件。我已经下载了兼容 2.2 版本的 mod_jk.so 文件，现在一切正常。

您可以通过选项检查详细错误：c:/your_apache_dir/bin> httpd.exe -D mod_jk

谢谢你的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-07T09:26:45.183

JkWorkersFile "conf/workers.properties" 这应该是这种方式，并且还检查 mod_jk 兼容性。

# xquery - xquery-如何在某些节点的前一个和下一个兄弟节点上放置一个“范围”条件

> ID：12269250
> 
> 赞同：0
> 
> 时间：2012-09-04T18:21:07.393
> 
> 标签：xquery

请看下面的样本——

```
<div class="patent_bibdata">
     <b> First list</b>
     <a href="1"> Name #1</a>
     <a href="2"> Name #2</a>
     <b> Second list</b>
     <a href="1"> Name #2_1</a>
     <a href="2"> Name #2_2</a>
</div> 
```

现在，我想提取具有文本“第一列表”的“b”元素之后的链接——但是，我不想要具有文本“第二列表”的“b”元素之后的链接——以及链接的数量在“第一名单”之后我不知道。

我想到的，是这样的——

```
....XQuery code defining the document as variable named "doc"
let $list:= $doc/div[ @class="patent_bibdata"]/b[. = 'First list']/following-sibling::text() -- but this should get everything after 'First list'-- including 'Second List' and 'Name #2_1' and 'Name #2_2' 
```

现在，我只知道 2 个“b”标签中的文本（即我们示例中的“名称 #1”和“名称 #2”）——所以我认为我必须以某种方式设置条件并检索链接（我需要），对这些链接的直接前任兄弟和直接后继兄弟设置条件---放置这些条件的命令是什么（如果我到目前为止是对的）？如果我不正确，那么我该如何获取那组链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T20:11:16.683

这有效：

```
$doc/div[ @class="patent_bibdata"]/b[. = ' First list']/following-sibling::a[not(preceding-sibling::b[. = ' Second list'])] 
```

考虑到您今天就 XQuery 提出的相当基本的问题，建议首先对 XQuery 有一个基本的了解。那里有一些非常好的书，我特别喜欢 Priscilla Walmsley 的那本书。

# amazon-web-services - VPC 子网实例之间的通信

> ID：12269253
> 
> 赞同：3
> 
> 时间：2012-09-04T18:21:27.300
> 
> 标签：amazon-web-services, ping, subnet, amazon-vpc

我正在尝试设置一个非常简单的 VPC 环境，但我无法让子网中的实例互相看到：即，当我从 10.0.0.93 ping 10.0.0.10 时，它没有成功。

我认为这是属于一些错误配置的问题，但是，查看我找不到问题的所有内容。

这是我的路由表（默认）：

```
rtb-14f2127c, 1 Subnet, No, vpc-1ef21276 (10.0.0.0/16)
rtb-10f21278, 0 Subnets, Yes, vpc-1ef21276 (10.0.0.0/16) 
```

只有一个 DHCP 选项：

```
dopt-12f2127a    domain-name-servers = AmazonProvidedDNS; 
```

我的网络 ACL（入站）：

```
100 ALL ALL 0.0.0.0/0   ALLOW
*   ALL ALL 0.0.0.0/0   DENY 
```

（出境）：

```
100 ALL ALL 0.0.0.0/0   ALLOW
*   ALL ALL 0.0.0.0/0   DENY 
```

我的安全组有（入站）：

```
ALL sg-b3637adf 
22 (SSH)    0.0.0.0/0   
80 (HTTP)   0.0.0.0/0   
443 (HTTPS) 0.0.0.0/0   
4848    0.0.0.0/0   
8080 (HTTP*)    0.0.0.0/0   
8258    0.0.0.0/0   
24848   0.0.0.0/0   
28009   0.0.0.0/0   
28080   0.0.0.0/0   
28181   0.0.0.0/0 
```

（出境）：

```
ALL 0.0.0.0/0
22 (SSH)    0.0.0.0/0   
80 (HTTP)   0.0.0.0/0   
443 (HTTPS) 0.0.0.0/0   
8080 (HTTP*)    0.0.0.0/0   
8258    0.0.0.0/0   
28009   0.0.0.0/0   
28080   0.0.0.0/0   
28181   0.0.0.0/0 
```

谢谢，安德里亚

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-05T06:41:46.757

我解决了这个问题：我在安全组中添加了（入站和出站）

```
ALL sg-b3637adf 
```

**我**修复了安全组 ID (sg-b3637adf) 的问题。

执行这两个步骤使实例能够 ping 自己。

对于未来的读者，如果您有一个 ICMP 端口被阻止的安全组，您将无法 ping。确保您的安全组中有一条允许所有 ICMP 访问的规则。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-14T22:21:54.617

另外，我想为遇到类似问题的其他人补充一点：如果您正在设置 VPC，您可能需要关闭您的实例特定 iptables，以便您可以使用安全组中定义的 VPC 特定防火墙规则！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-05T19:12:35.143

要在两个实例之间进行 ping 操作，应在实例之间打开所有 ICMP 端口。无需打开它们之间的所有端口。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-03T17:09:01.483

我想补充一点，如果查看您机器的路由表，您可能会认为它没有反映 AWS VPC 配置中的内容 - 例如，您的 VPC 具有 10.0.0.0/16 的本地路由，但您机器的路由表只有10.0.0.0/24 的本地路由。

不要被这条红鲱鱼分心！似乎默认路由 - 即使它不存在，并且您可能会认为它只是 Internet 网关 - 是数据包在被 VPC 本身操作之前到达的地方。

# c# - 如何解决“输入字符串的格式不正确。” 错误？

> ID：12269254
> 
> 赞同：10
> 
> 时间：2012-09-04T18:21:26.660
> 
> 标签：c#, asp.net

**我尝试了什么：**

**标记：**

```
 <asp:TextBox ID="TextBox2"   runat="server"></asp:TextBox>

    <asp:Label ID="Label1" runat="server" AssociatedControlID="TextBox2"  Text="Label"></asp:Label>

    <asp:SliderExtender ID="SliderExtender1"  TargetControlID="TextBox2"  BoundControlID="Label1" Maximum="200" Minimum="100" runat="server">
    </asp:SliderExtender> 
```

**代码背后：**

```
protected void setImageWidth()
{
    int imageWidth;
    if (Label1.Text != null)
    {
        imageWidth = 1 * Convert.ToInt32(Label1.Text);
        Image1.Width = imageWidth;
    }
} 
```

在浏览器上运行页面后，我得到`System.FormatException`：输入字符串的格式不正确。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-04T18:30:35.550

问题在于线路

```
imageWidth = 1 * Convert.ToInt32(Label1.Text); 
```

`Label1.Text`可能是也可能不是 int。[检查](http://msdn.microsoft.com/en-us/library/sf1aw27b.aspx%20for%20exceptions)。

改为使用`Int32.TryParse(value, out number)`。这将解决你的问题。

```
int imageWidth;
if(Int32.TryParse(Label1.Text, out imageWidth))
{
    Image1.Width= imageWidth;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T18:30:54.653

如果`TextBox2.Text`用作数字值的来源，必须先检查值是否存在，然后转换为整数。

如果`Convert.ToInt32`调用时文本框为空白，您将收到`System.FormatException`. 建议尝试：

```
protected void SetImageWidth()
{
   try{
      Image1.Width = Convert.ToInt32(TextBox1.Text);
   }
   catch(System.FormatException)
   {
      Image1.Width = 100; // or other default value as appropriate in context.
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T18:32:09.087

用。。。来代替

```
imageWidth = 1 * Convert.ToInt32(Label1.Text); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T18:23:59.500

因为`Label1.Text`ishold`Label`不能解析成整数，所以需要将关联文本框的文本转换成整数

```
imageWidth = 1 * Convert.ToInt32(TextBox2.Text); 
```

# javascript - 如何获取外部脚本的内容？

> ID：12269255
> 
> 赞同：2
> 
> 时间：2012-09-04T18:21:27.113
> 
> 标签：javascript, jquery, html

我在公共目录中有一个车把模板。我想用 JavaScript 访问这个文件的内容。这是脚本的代码：

```
<script id="test_template" type="text/template" src="/templates/test.hbs"></script> 
```

如果我在脚本标签内转储文件的内容（而不是使用“src”属性），我可以很容易地获取内容，但是我不会得到任何缓存。

是否可以在不使用 AJAX 调用的情况下获取此文件的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T18:23:49.643

> 是否可以在不使用 AJAX 调用的情况下获取此文件的内容？

不，您需要使用 AJAX 调用。

# jquery - 创建多级 html 下拉表单以选择 XML 文件以使用 jquery 函数对其进行解析

> ID：12269258
> 
> 赞同：1
> 
> 时间：2012-09-04T18:21:34.137
> 
> 标签：jquery, html

请幽默我。我设法用 Jquery 和 XML 文件创建了一个问答框架。用户从下拉菜单中选择他/她想要练习的问题类别。在选择时，Jquery 函数解析 XML 文件（与问题和答案类别相关）并显示给用户。

Jquery 函数非常适合我的目的，但我现在有很多很多 XML 问答文件。我想通过特定的文件组和子组将它们呈现给用户。所以我需要一个下拉菜单，其中包含初始级别的组和子组，以及最终级别的选项，允许用户选择要解析的 XML 文件。我希望子组和 XML 文件选项以水平方式向用户显示。下面的结构能够对我的 XML 文件进行分组......

[http://cryptexo.wordpress.com/2010/07/23/multi-level-select-box-in-simple-html/](http://cryptexo.wordpress.com/2010/07/23/multi-level-select-box-in-simple-html/)

但它仍然只是创建一个垂直列表，用户将花费太多时间来寻找他/她希望解析的 XML 文件。

我发现了许多使用 CSS 向用户呈现水平导航选项的示例......

[http://www.bloggermint.com/2011/06/pure-css3-multi-level-drop-down-navigation-menu/](http://www.bloggermint.com/2011/06/pure-css3-multi-level-drop-down-navigation-menu/)

但是这些示例没有包含用户选择和解析 XML 文件所需的 html 选择表单。

我尝试将 html 选择表单混合到与 CSS 相关的结构中，但现阶段没有雪茄。

如果有人读过这篇文章并理解我想做什么......并且知道我可以做到的方法......如果他们启发我，我将非常感激。

非常感谢，伙计们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T18:26:22.120

而不是热链接到 xml 文件 -

您可以保存它们的源数组 - 并从中加载它们。

```
var xmls = ['1.xml', '2.xml']; //for 1-dimensional 
```

如果您有层次结构

```
xmls = [{
   levelName : '1',
   subLevels : [{ levelName : '1.1', xml : '1.1.xml', sub-levels : [] .. }]
},
{
   levelName : '2',
   xml : '2.xml' //no sub levels here
}
.
.
]; 
```

然后，您可以根据需要使用此数组创建下拉列表。

# java - 获取当前用户的路径而不是java中的应用程序路径

> ID：12269262
> 
> 赞同：1
> 
> 时间：2012-09-04T18:22:02.713
> 
> 标签：java, file, command-line, java-io, filepath

我正在尝试在具有多个依赖项的巨型命令行应用程序中获取当前用户路径。每次一个“。” 使用时，它给了我应用程序路径（jar 所在的位置），而不是当前的用户路径（正在进行调用的位置）。

所以，当它运行时：

```
File file = new File(".");
System.out.println(file.getCanonicalPath()); 
```

给我应用程序所在的路径。

但是当我创建一个单独的小应用程序并使用相同的代码时。从不同的目录调用 jar，它给出了当前用户路径。

我将 JSAP 命令行解析器用于命令行参数，其作用方式相同。如何解决？我希望我的大应用程序获取当前用户路径，而不是应用程序路径。

什么会导致他们表现不同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T18:26:33.580

我想您会发现启动“大型应用程序”的批处理文件（/shell 脚本）在启动 Java 之前将目录更改为主 jar 文件的目录，这就是为什么您的简单测试应用程序会暂时返回用户的工作`new File(".")`目录大应用程序返回 jar 文件的目录。

尝试在批处理文件中尽早存储用户的 CWD，然后将其传递给 Java：

```
set savedcwd=%cd%
... later on ...
java "-Dsavedcwd=%savedcwd%" 
```

然后在您的应用程序中

```
String savedcwd = System.getProperty("savedcwd"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T18:24:56.877

[http://www.mindspring.com/~mgrand/java-system-properties.htm](http://www.mindspring.com/~mgrand/java-system-properties.htm)

你想要“user.home”属性，比如

```
System.getProperty("user.home"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T18:26:24.100

```
String currentDir = new File(".").getAbsolutePath();
OR
System.getProperty("user.dir") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T18:29:39.170

1）如上所述，如果要获取“当前目录”，一种方法是使用`File(".").getAbsolutePath()`

2) 如果要获取用户的 $PATH 变量（或*任何*环境变量），请使用`System.getenv()`：

*   [http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/System.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/System.html)

# ios - 我可以在 iOS 中拍摄 QR 码的照片并使用该 QR 码本身制作游戏吗？

> ID：12269266
> 
> 赞同：-2
> 
> 时间：2012-09-04T18:22:30.953
> 
> 标签：ios, maze

所以我希望能够制作一个 iOS 应用程序，用户可以在其中拍摄任何 QR 码的照片，然后该应用程序用牛头怪、物体等填充 QR 码的照片，使照片“活”起来可以这么说，这样他们就可以玩旧游戏 Minotaur，只需使用 QR 码。这个想法是按照一些逻辑（游戏规则）用对象和牛头怪动态填充任何二维码。这可能吗？或者，如果没有，如何使用预装的二维码制作类似牛头怪的迷宫游戏？感谢您的协助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T18:26:18.543

从技术上讲，您可以拍摄任何您想要的照片。二维码没有什么特别之处。一旦你有了它的图像，你应该能够用它做任何你想做的事情。您显然需要编写一个自定义图像处理库来将 QR 码变成迷宫，但这不是它是否可能的重点。

# c# - 竞争对手的应用程序安装到与我相同的文件夹中，无需管理员权限

> ID：12269269
> 
> 赞同：5
> 
> 时间：2012-09-04T18:22:38.350
> 
> 标签：c#, permissions, uac

首先大家好，感谢您多次在这里搜索帮助我或教会了我一些东西。

我已经为我玩的游戏制作了一个自定义 HUD，并且正在使用 C# 开发一个安装程序，灵感来自同一游戏的另一个 HUD。它将所有脚本文件下载并覆盖到现有目录：

```
C:\Program Files (x86)\Steam\steamapps\me\team fortress 2\tf 
```

[不幸的是，我无法控制使用哪个文件夹，因为我正在修改 Valve 安装的文件]

为了删除文件夹、添加文件夹或复制文件，我不得不在每次启动 exe 时使用应用清单来增加用户权限：

```
<requestedExecutionLevel level="requireAdministrator" uiAccess="false" /> 
```

不知何故，我受到启发的安装程序正在安装到与我相同的文件夹中，而无需强制 UAC 提示。

他的应用程序只显示一个安全警告，但如果我取消选中“始终检查”复选框，我可以一遍又一遍地运行它，而无需验证任何特殊权限：

http://www.trishtech.com/img_art_a/win7_publisher_not_verified_0.jpg>">

关于如何使我的应用程序像他的一样无缝的任何建议？我已经联系了另一个应用程序的作者，他说他也在使用 C#，但不知道他正在做什么特别的工作来完成这项工作。

编辑：我知道我们正在做一些不同的事情，以防万一他们以某种方式有所作为：

*   我正在使用文件浏览器来决定将文件放在哪里，因此可以从任何地方运行该应用程序。
    *   他只是将它们输出到与exe相同的目录，要求将exe放在目标文件夹中。
*   我正在使用 ILMerge 将 SharpZipLib 与我的应用程序捆绑在一起。
    *   他只是将 dll 留在了 exe 旁边的 zip 文件中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T20:38:38.747

如果您尝试写入“C:\Program Files (x86)”，那么您**需要**管理员权限。因此，其他应用程序不得在此处创建文件，而是在不受 UAC 保护的目录中创建文件。

如果您的文件是每个用户的，那么您可以在 appdata 文件夹中创建一个子文件夹并将文件保存在那里。

约定是创建一个文件夹来标识公司，另一个文件夹来标识产品，

例如

```
var dir = Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData) 
          +    "\\MyCompanyName\\MyApplicationName"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T20:57:53.083

> 他只是将它们输出到与exe相同的目录，要求将exe放在目标文件夹中。

我不认为会是这样。同一个exe目录应该没有什么不同，你要么有权限，要么没有。

“正常”响应是，写入您有权访问的目录。但这并不总是可能的。

如果您将应用程序作为服务运行，它只会在我认为的 Windows 下弹出一次，但这似乎不适合您的用例。

我认为不会有任何适当的方法来压制这样的消息，就像第 22 条问题一样。要做一些你不能做的事情，你需要获得许可（所以提升用户 - > UAC弹出窗口）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T18:39:02.203

我将 sgmoore 的答案标记为正确的答案，尽管我自己的案例似乎有点陌生，我也想记录下来。

我已经将我的程序简化为基础，并做了很多实验。我发现出于某种原因，他和我实际上可以将文件复制并在该目录中创建文件夹。也许它是 steamapps 文件夹的特殊之处，或者它只是一个错误，使它在这种有限的情况下实际工作，而它通常不应该用于“真实”程序。

奇怪的是，实际上需要 UAC 提示符的是从我的项目最初生成它的 \Bin\Debug\ 文件夹中运行 exe。如果我将我的 exe 移到其他地方然后运行它，它工作正常。如果我从我的 \Bin\Debug\ 文件夹中运行他的 exe，他也不起作用。我一直无法弄清楚为什么会这样。

我注意到的另一件事是，当我的应用程序将毫无例外地成功时，当我启动它时它不会提示安全警告。它只是默默地打开然后工作。任何时候它确实显示安全警告，它都会失败。

我猜协议会将这两个问题变成新问题，但目前看来它可能已经进入了边缘案例/黑客领域，因为你们所有人都同意这甚至根本不应该工作。

我将重新构建我的程序，看看在这些奇怪的情况下我是否仍然可以让它发挥全部功能，或者我是否必须重新启用 UAC 提升。

# php - PHP 中的 HTML 表格

> ID：12269271
> 
> 赞同：-1
> 
> 时间：2012-09-04T18:22:47.707
> 
> 标签：php, html-table

使用以下代码：

```
<table border="1" >
<?
    $item_count=0;  
    $select_SQL="select * from iplay_test";
    $result=mysql_query($select_SQL,$con);
    while($eachRow= mysql_fetch_array($result))
    {   
        if($item_count%3==0)
        {
            echo "<tr><td> 0 </td></tr>";           
        }
        else
        {
            echo "<td> 1</td>";
        }

    $item_count++;
    }

    ?>      
</table> 
```

我得到输出，

```
0
1    1
0
1    1
0
1    1
0
1    1
0
1    1 
```

但我应该得到类似的东西

```
0 1 1 
0 1 1
0 1 1 
```

我在这里想念什么？

我基本上这样做是为了让每行显示 3 个项目。要显示的数据将来自数据库。这个问题有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T18:24:53.070

您将每隔三个单元格打开和关闭该行。开始 tr 标签应该在第一个单元格之前，而结束标签应该在第三个单元格之后。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T18:24:46.163

您正在为每条记录开始一个新行：

```
 echo "<tr><td> 0 </td></tr>";
              ^^^^--- starts a new row 
```

将`<tr>`和`</tr>`移出此回声，并仅在每 3 条记录后发出它们，因此您会得到更像

```
<tr>
   <td>1</td><td>2</td><td>3</td>
</tr>
etc... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T18:29:45.813

我移动了`<tr>`

```
while($eachRow= mysql_fetch_array($result))
{   
    echo '<tr>';
    if($item_count%3==0)
    {
        echo "<td>0</td>";           
    }
    else
    {
        echo "<td>1</td>";
    }
    echo '</tr>';

    $item_count++;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T18:42:10.020

如下更改代码，解决了我的问题。感[谢贾沙](https://stackoverflow.com/users/1376505/jasha)

```
<table border="1" >

    <tr>
    <?
    $item_count=0;

    $select_SQL="select * from iplay_test";
    $result=mysql_query($select_SQL,$con);
    while($eachRow= mysql_fetch_array($result))
    {

    if($item_count%3==0)
    {
        if($item_count==0)
        {
        echo "<td> 0</td>";
        }
        else
        {
        echo "</tr><tr><td> 0 </td>";
        }   
    }
    else
    {
        echo "<td> 1</td>";

    }

        $item_count++;
    }

?>  

</tr>   
    </table> 
```

# php - 自定义 Wordpress 循环（网格/行）

> ID：12269274
> 
> 赞同：0
> 
> 时间：2012-09-04T18:23:00.047
> 
> 标签：php, html, wordpress

基本上我需要一个自定义的 Wordpress 帖子循环，它以以下格式输出帖子（每两个帖子都应该以这种方式格式化，所以两个帖子都在一个“col”div 中，都包含在“row”div 中。）：

```
<div class="row cols2">
<div class="col left">
<a href="#"><img src="featured-image.jpg" /></a>
<h2><a href="#">Blog Post Title</a></h2>
<p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Lorem ipsum dolor sit amet, consectetuer adipiscing elit.</p>
</div><!-- /.col left -->

<div class="col right">
<a href="#"><img src="featured-image.jpg" /></a>
<h2><a href="#">Blog Post Title</a></h2>
<p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Lorem ipsum dolor sit amet, consectetuer adipiscing elit.</p>
</div><!-- /.col right -->
</div><!-- /.row cols2 --> 
```

我使用以下循环或多或少地实现了这一点：

```
<?php $counter=1;$grids=2;global $query_string;query_posts($query_string.'&caller_get_posts=1&posts_per_page=6');if(have_posts()):while(have_posts()):the_post();if($counter==1):?>
<div class="row cols2">
<div class="col left">
<a href="<?php the_permalink()?>"><?php the_post_thumbnail('default-thumb')?></a>
<h2><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></h2>
<?php the_excerpt() ?>
</div><!-- /.col left -->

<?php elseif($counter==$grids):?>
<div class="col right">
<a href="<?php the_permalink()?>"><?php the_post_thumbnail('default-thumb')?></a>
<h2><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></h2>
<?php the_excerpt() ?>
</div><!-- /.col right -->
</div><!-- /.row cols2 -->
<?php $counter=0;endif;$counter++;endwhile;endif;?> 
```

唯一的问题是当“.row cols2” div 中只有一个帖子时，它会搞砸，因为“.row cols2”结束标记仅在连续有两个帖子时输出。如果有人对如何提供帮助有任何想法，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T18:42:20.917

我很高兴我不必使用您的代码，这是阅读的噩梦。我建议不要像这样把条件和循环混为一谈，它只会让阅读和调试变得更加困难。

关于您的问题，基本思想是您在每个偶数计数增量时输出容器，然后检查最后的计数器以查找您是否缺少任何要求（即表格中的表格单元格，元素的结束标记等）。

因此，您需要做的就是在最后检查它（我还重写了您的帖子输出，切勿不必要地重复相同的代码，这可能会在您稍后更改一个而不是另一个时导致您出现问题）。

```
<?php 
$counter=1;
$grids=2;
global $query_string;
query_posts($query_string.'&caller_get_posts=1&posts_per_page=6');

if(have_posts()):

  while(have_posts()):

    the_post();

    //-- ouput start elements
    if($counter==1): ?>
      <div class="row cols2">
      <div class="col left">
    <?php
    elseif($counter == $grids): ?>
      <div class="col right">
    <?php endif; ?>

    <?php /* Output column box content */ ?>

    <a href="<?php the_permalink()?>"><?php the_post_thumbnail('default-thumb')?></a>
    <h2><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></h2>
    <?php the_excerpt() ?>

     <?php /* always need to close the inner div */ ?>
     </div>

     <?php 
     //-- if its the second column, then end row and reset counter
    if($counter == $grids): ?>
      </div>
    <?php 
      $counter = 0;
    endif; ?>

<?php 
$counter++;
endwhile;

if($counter == 1):
  //--- output empty second column div then end the row
  ?>
  <div class="col right"></div>
  </div>
  <?php
endif; 
    ?>

<?php
/** Forgot this one */
endif;

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T14:34:47.220

终于让它正常工作了，基于 Lee 的代码，非常感谢帮助！编码：

```
<?php $counter=1;global $query_string;query_posts($query_string.'&caller_get_posts=1&posts_per_page=6');if(have_posts()):while(have_posts()):the_post();if($counter==1):?>

<div class="row cols2">
<div class="col"><?php elseif($counter==2): ?><div class="col"><?php endif; ?>

<a href="<?php the_permalink();?>"><?php the_post_thumbnail('default-thumb')?></a>
<h2><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></h2>
<?php the_excerpt() ?>
</div><!-- /.col -->

<?php if($counter==2): ?></div><!-- /.row cols2 -->
<?php $counter=0;endif;$counter++;endwhile;if($counter==2):?></div><!-- /.row cols2 --><?php endif;endif; ?> 
```

# iphone - 使用光栅化平滑 Segue

> ID：12269277
> 
> 赞同：1
> 
> 时间：2012-09-04T18:23:24.070
> 
> 标签：iphone, objective-c, ios, calayer

我有一个视图控制器，其中包含一个带有六个 CAShapeLayer 子层的按钮。我`self.view.layer.shouldRasterize = YES;`在 viewWillAppear 中添加了：以改善视图控制器被连接时的轻微卡顿。（然后我在视图控制器的 viewDidAppear 中关闭了 shouldRasterize :)。

口吃几乎完全消失了，除了在segue开始时非常轻微的初始口吃。我的猜测是这是由光栅化本身引起的。这是我第一次使用 shouldRasterize 并且我对结果非常满意，但我想检查是否有其他人有以这种方式提高 segue 性能的经验，以及是否已经避免了最初的（非常轻微的）口吃。

# ruby-on-rails-3 - Rails 3 开发站点比 Apache 2 + Phusion Passenger 上的生产站点快 10 倍

> ID：12269286
> 
> 赞同：3
> 
> 时间：2012-09-04T18:24:10.683
> 
> 标签：ruby-on-rails-3, apache2, passenger

我有一个实时生产站点（生产模式）与一个在开发模式下运行的测试站点一起运行。它们都在同一台机器上运行，使用 Rails 3、Apache 2 和 Phusion Passenger。如果我在生产站点上加载相同的页面，加载页面大约需要 4-5 秒。如果我在测试站点上请求相同的页面，则（仅）大约需要 0.5 秒。10倍的主要差异。一直认为生产会比开发快:(如果我在生产站点上重新加载页面，加载时间保持不变。这是怎么回事？我该如何调试这个问题？因为现在生产站点太慢了即使没有任何流量。

我对其他 Web 服务器进行了一些额外的测试，特别是 Litespeed 甚至 Webbrick。两者都表现出相同的奇怪行为。生产模式比开发模式慢十倍。所以它可能与 Rails 相关。但我不能把手指放在它上面。由于日志告诉我页面渲染速度很快，但是页面出现在我的屏幕上之前需要很长时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T17:38:56.663

谢谢你们的建议。我设法把它修好了。我最终决定将我所有的生产数据加载到我的开发服务器上。原来我的会话表是罪魁祸首。它包含大量数据，查询速度很慢。我添加了一个索引，问题就解决了。

# codeigniter - Codeigniter 小部件插件导致错误

> ID：12269287
> 
> 赞同：0
> 
> 时间：2012-09-04T18:24:13.770
> 
> 标签：codeigniter, module, widget

我正在尝试通过[http://codeigniter.com/forums/viewthread/109584/P20](http://codeigniter.com/forums/viewthread/109584/P20)上的wiredesignz 设置小部件插件，但我不断收到错误消息。我很确定我已经按照线程中的指示进行了所有设置，但是当我`<?php widget::run("test"); ?>`在我的视图中尝试时，我得到了以下信息：

```
class Test extends Widget { function run() { echo "test"; } } 
Fatal error: Class 'Test' not found in C:\xampp\htdocs\test\application\helpers\widget_helper.php on line 52 
```

我能想到的唯一与我的安装不同的是，我使用的是 Phil Sturgeon 的模板库。

以下是我如何构建所有内容：

**/application/helpers/widget_helper.php**

```
<?php if (!defined('BASEPATH')) exit('No direct script access allowed');
/**
 * Widget Plugin 
 * 
 * Install this file as application/plugins/widget_pi.php
 * 
 * @version:     0.21
 * $copyright     Copyright (c) Wiredesignz 2009-09-07
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
class Widget
{
    public $module_path;

    function run($file) {        
        $args = func_get_args();

        $module = '';

        /* is module in filename? */
        if (($pos = strrpos($file, '/')) !== FALSE) {
            $module = substr($file, 0, $pos);
            $file = substr($file, $pos + 1);
        }

        list($path, $file) = Modules::find($file, $module, 'widgets/');

        if ($path === FALSE) {
            $path = APPPATH.'widgets/';
        }

        Modules::load_file($file, $path);

        $file = ucfirst($file);
        $widget = new $file();

        $widget->module_path = $path;

        return call_user_func_array(array($widget, 'run'), array_slice($args, 1));    
    }

    function render($view, $data = array()) {
        extract($data);
        include $this->module_path.'views/'.$view.EXT;
    }

    function load($object) {
        $this->$object = load_class(ucfirst($object));
    }

    function __get($var) {
        global $CI;
        return $CI->$var;
    }
} 
```

**/application/widgets/test.php**

```
class Test extends Widget {

    function run() {
        echo "test";
    }

} 
```

/application/views/layouts/public.php

```
<?php widget::run("test"); ?> 
```

知道如何让这个工作吗？这只是过时了吗？

我一直在寻找更好的解决方案来做小部件，但我似乎找不到任何东西。我只需要能够逐页控制站点侧边栏上显示的内容。有没有替代方法？

编辑：错误来自评论中的小部件库

```
A PHP Error was encountered

Severity: Notice

Message: Undefined property: CI_Lang::$active_lang

Filename: libraries/widgets.php

Line Number: 26

A PHP Error was encountered

Severity: Notice

Message: Undefined property: Page::$sys_lib

Filename: libraries/widgets.php

Line Number: 87

A PHP Error was encountered

Severity: Notice

Message: Trying to get property of non-object

Filename: libraries/widgets.php

Line Number: 27

A PHP Error was encountered

Severity: Notice

Message: Undefined property: CI_Lang::$active_lang

Filename: libraries/widgets.php

Line Number: 26

A PHP Error was encountered

Severity: Notice

Message: Undefined property: Page::$sys_lib

Filename: libraries/widgets.php

Line Number: 87

A PHP Error was encountered

Severity: Notice

Message: Trying to get property of non-object

Filename: libraries/widgets.php

Line Number: 27 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T11:31:07.997

嗨，试试我的小部件库，它会为你工作，它与加载器一起工作

[小部件库](http://codeigniter.com/forums/viewthread/161374/)

# c# - TwitterService 不使用 ITwitterService

> ID：12269291
> 
> 赞同：1
> 
> 时间：2012-09-04T18:24:31.780
> 
> 标签：c#, twitter, tweetsharp

我想知道为什么 TweetSharp 中有一个 ITwitterService 接口，因为 TwitterService 类不使用它。我想在我的应用程序中使用依赖注入，甚至 twitter 服务的所有方法都是虚拟的，有一个我不能使用的接口让我有点困扰。

谢谢。

# php - Javascript + 动态菜单 + 当前链接样式 (CSS) + 基于 PHP 的站点

> ID：12269293
> 
> 赞同：0
> 
> 时间：2012-09-04T18:24:38.657
> 
> 标签：php, javascript, html, css, dynamic

**这是我的设置：**

我有一个使用动态包含的模块化站点。主页面需要标题。主页仅负责从网站上的特定链接呈现内容。因此，指向 CSS 和 js 文件的外部链接位于主页的头部，内容页面是 (php) 文档片段，旨在作为内容包含在主页中。

在客户端，我希望我的菜单使用 Javascript 动态运行。我已经使用 CSS 来设置`:hover`、`:active`和`:visited`伪类的样式。我定义了两个与活动和非活动按钮相关的单独类。我编写了 js，为链接设置了 onclick 事件，并外部链接了脚本。

**问题**

Firebug 正在检测脚本，但是当我单击链接时，该功能不会触发。

**代码**

具有内联函数调用的 HTML 菜单元素：

```
 <ul>
        <li class="navLnk"><a href="mylinks.php" tabindex="2" accesskey="2" onclick"asgnActv(this)">BANDS</a></li>
        <li class="navLnk"><a href="mylinks.php" tabindex="3" accesskey="3" onclick"asgnActv(this)">RELEASES</a></li>
 </ul> 
```

Javascript函数：

```
function asgnActv(e){
if (e.className == 'navLnk') {
    $lnkArr = document.getElementsByClassName('actvLnk');
    for (i=0; i<$linkArr.length; i++) {
        $linkArr[i].className = 'navLnk';
    }
    e.className = 'actvLnk';
  }
} 
```

主php页面头部的外部js链接：

```
<script type="text/javascript" src="script.js"></script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T18:35:22.290

我想有两个错误一个缺少@Joseph提到的“=”符号，并且在js代码中你正在检查它的className，而这个类“navLnk”被定义为它的父元素，即`< li >`

所以要工作，要么指定类来锚定元素，要么使用下面的脚本，如果你想要它用于 li 元素

```
function asgnActv(e){
   if (e.parentNode.className == 'navLnk') {
     $lnkArr = document.getElementsByClassName('actvLnk');
     for (i=0; i<$linkArr.length; i++) {
       $linkArr[i].className = 'navLnk';
     }
     e.parentNode.className = 'actvLnk';
   }
} 
```

希望这会有所帮助。

# sql-server-2008 - 如何使用另一个表 SQL Server Management Studio 2008 更新表的行

> ID：12269294
> 
> 赞同：0
> 
> 时间：2012-09-04T18:24:43.410
> 
> 标签：sql-server-2008

如果列相同，我想`test1`用另一个表中的列值更新表中的列值。`test2``provisionid, categoryid, differencetype`

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T18:26:24.177

```
UPDATE t1
    SET SomeColumn = t2.SomeColumn
    FROM test1 t1
        INNER JOIN test2 t2
            ON t1.provisionid = t2.provisionid
                AND t1.categoryid = t2.categoryid
                AND t1.differencetype = t2.differencetype; 
```

# ios - 解码 AudioStreamBasicDescription 的 mFormatFlags 编号 (ASBD.mFormatFlags)

> ID：12269295
> 
> 赞同：2
> 
> 时间：2012-09-04T18:24:45.020
> 
> 标签：ios, ios-simulator, core-audio, audio-recording, audiounit

我正在编写一个使用 CoreAudio 的音频单元 API 的 iOS 应用程序，并且在某个时候我会`AudioUnitGetProperty(audioUnit, kAudioUnitProperty_StreamFormat, ...)`打电话。那时我设置了一个断点来查看 ASBD，我发现该`mFormatFlags`字段是`41`. 问题是，我可以从那个数字（例如`kAudioFormatFlagIsNonInterleaved | kAudioFormatFlagIsPacked | ...`）中解码实际的标志名称吗？

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T23:39:18.717

这是`ostream`打印 ASBD 的重载，主要取自 Apple 示例代码：

```
std::ostream& operator<<(std::ostream& out, const AudioStreamBasicDescription& format)
{
    unsigned char formatID [5];
    *(UInt32 *)formatID = OSSwapHostToBigInt32(format.mFormatID);
    formatID[4] = '\0';

    // General description
    out << format.mChannelsPerFrame << " ch, " << format.mSampleRate << " Hz, '" << formatID << "' (0x" << std::hex << std::setw(8) << std::setfill('0') << format.mFormatFlags << std::dec << ") ";

    if(kAudioFormatLinearPCM == format.mFormatID) {
        // Bit depth
        UInt32 fractionalBits = ((0x3f << 7)/*kLinearPCMFormatFlagsSampleFractionMask*/ & format.mFormatFlags) >> 7/*kLinearPCMFormatFlagsSampleFractionShift*/;
        if(0 < fractionalBits)
            out << (format.mBitsPerChannel - fractionalBits) << "." << fractionalBits;
        else
            out << format.mBitsPerChannel;

        out << "-bit";

        // Endianness
        bool isInterleaved = !(kAudioFormatFlagIsNonInterleaved & format.mFormatFlags);
        UInt32 interleavedChannelCount = (isInterleaved ? format.mChannelsPerFrame : 1);
        UInt32 sampleSize = (0 < format.mBytesPerFrame && 0 < interleavedChannelCount ? format.mBytesPerFrame / interleavedChannelCount : 0);
        if(1 < sampleSize)
            out << ((kLinearPCMFormatFlagIsBigEndian & format.mFormatFlags) ? " big-endian" : " little-endian");

        // Sign
        bool isInteger = !(kLinearPCMFormatFlagIsFloat & format.mFormatFlags);
        if(isInteger)
            out << ((kLinearPCMFormatFlagIsSignedInteger & format.mFormatFlags) ? " signed" : " unsigned");

        // Integer or floating
        out << (isInteger ? " integer" : " float");

        // Packedness
        if(0 < sampleSize && ((sampleSize << 3) != format.mBitsPerChannel))
            out << ((kLinearPCMFormatFlagIsPacked & format.mFormatFlags) ? ", packed in " : ", unpacked in ") << sampleSize << " bytes";

        // Alignment
        if((0 < sampleSize && ((sampleSize << 3) != format.mBitsPerChannel)) || (0 != (format.mBitsPerChannel & 7)))
            out << ((kLinearPCMFormatFlagIsAlignedHigh & format.mFormatFlags) ? " high-aligned" : " low-aligned");

        if(!isInterleaved)
            out << ", deinterleaved";
    }
    else if(kAudioFormatAppleLossless == format.mFormatID) {
        UInt32 sourceBitDepth = 0;
        switch(format.mFormatFlags) {
            case kAppleLosslessFormatFlag_16BitSourceData:      sourceBitDepth = 16;    break;
            case kAppleLosslessFormatFlag_20BitSourceData:      sourceBitDepth = 20;    break;
            case kAppleLosslessFormatFlag_24BitSourceData:      sourceBitDepth = 24;    break;
            case kAppleLosslessFormatFlag_32BitSourceData:      sourceBitDepth = 32;    break;
        }

        if(0 != sourceBitDepth)
            out << "from " << sourceBitDepth << "-bit source, ";
        else
            out << "from UNKNOWN source bit depth, ";

        out << format.mFramesPerPacket << " frames/packet";
    }
    else
        out << format.mBitsPerChannel << " bits/channel, " << format.mBytesPerPacket << " bytes/packet, " << format.mFramesPerPacket << " frames/packet, " << format.mBytesPerFrame << " bytes/frame";

    return out; 
} 
```

# java - 向使用 TabPaneBuilder 创建的 TabPane 添加侦听器？

> ID：12269301
> 
> 赞同：1
> 
> 时间：2012-09-04T18:25:10.343
> 
> 标签：java, javafx-2

我有以下代码：

```
TabPaneBuilder.create()
    .tabs(
        TabBuilder.create()
            .text("Main")
            .closable(false)
            .build(),
        TabBuilder.create()
            .text("Preview")
            .content(createPreviewSplitMenu())
            .closable(false)
            .build()
        )
   .build() 
```

是否可以在此处添加侦听器，以便在选择“预览”选项卡时完成某些操作？如果是这样，我似乎找不到它，我已经查看了 API。

我不是在问一般怎么做，只是在使用 TabPaneBuilder 时。

谢谢。

编辑：如果我的要求是不可能的，也想要最简单的常规方法。

Edit2：我想做的是在选择“预览”选项卡时重绘它的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T18:58:25.477

您需要将侦听器添加到 TabBuilder！

（需要先给它起个名字，方便以后参考：）

```
TabPaneBuilder.create()
.tabs(
    TabBuilder.create()
        .text("Main")
        .closable(false)
        .build(),

//New code coming through

    previewTab = TabBuilder.create()
        .text("Preview")
        .content(createPreviewSplitMenu())
        .closable(false)

        .onSelectionChanged(new EventHandler<Event>() {
        public void handle(Event evt) {
          if (previewTab.isSelected()) {
            //code to update the tab
          }
        }
      })

      .build()
    )
.build() 
```

# php - 插入多个表时的原子性

> ID：12269304
> 
> 赞同：1
> 
> 时间：2012-09-04T18:25:31.887
> 
> 标签：php, mysqli, database, atomic

我正在设置实体的类别和子类别，因此子类别取决于类别。在设置类别时，我需要确保完成交易成功或完成交易失败。如果我一起使用 2 个查询，它仍然会一个一个地执行，因此有可能一个插入成功而另一个不成功。有没有什么好的方法可以在 php 或 mysqli 中保持原子性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T18:30:51.020

不，因为这些数据库是完全不相关的，并且没有跨数据库事务之类的东西。至少，不是我所知道的。:)

但是，如果您将事务用于插入，则会更安全*一些。*在两个数据库上启动一个事务，对两个数据库进行所有修改，然后才提交两个事务。插入/更新语句已经运行（如果出现约束错误等问题，可能会失败），因此在您即将提交的时候，不会有太多可能出错的地方。

确保您的表属于支持事务的存储类型。

[编辑]

您可以使用

```
START TRANSACTION;

-- Your queries go here

COMMIT 
```

在事务中执行语句。

有关更多信息，请阅读：[http ://dev.mysql.com/doc/refman/5.0/en/commit.html](http://dev.mysql.com/doc/refman/5.0/en/commit.html)

# ios6 - “应用内托管内容”的含义 - iOS 6 版本

> ID：12269306
> 
> 赞同：0
> 
> 时间：2012-09-04T18:25:39.030
> 
> 标签：ios6

这是否意味着现在我可以在苹果提供的（某种）网络服务中存储信息（视频、图像、文本等）？

# php - 数组有问题

> ID：12269307
> 
> 赞同：0
> 
> 时间：2012-09-04T18:25:40.093
> 
> 标签：php, arrays

我正在为 excel 创建一个导出工具，但我的数组有问题。

当我去打印时，我只看到 A？

代码：

```
$num = $_POST['num'];
    for($i =0; $i< $num; $i++){
    $firstname =  $_POST['firstnameexport'];
    $lastname = $_POST['lastnameexport'];
    $email = $_POST['emailexport'];
    $phone = $_POST['phoneexport'];
    $data = array(
    array("firstname" => $firstname[$i] , "lastname" => $lastname[$i], "email" => $email[$i], "phone" => $phone[$i])
    );
    print_r($firstname[$i]);
    } 
```

它会打印：

```
Afirstname  lastname    email   phone
A   A   A   A 
```

值正在通过表单传递

这是代码：

```
$memberfirstnamearray  = array($j => $memberfirstname);
                                    $memberlastnamearray  = array($j => $memberlastname);
                                    $memberphonearray  = array($j => $memberphone);
                                    $memberemailarray  = array($j => $memberemail);

                                    $j++;
                                    $i++; 
```

i 和 j = 0 开头

```
<input type='hidden' name='firstnameexport' value='$memberfirstnamearray' />
                                        <input type='hidden' name='lastnameexport' value='$memberlastnamearray' />
                                        <input type='hidden' name='emailexport' value='$memberphonearray' />
                                        <input type='hidden' name='phoneexport' value='$memberemailarray' />
                                        <input type='hidden' name='num' value='$j' /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T19:32:52.267

我所要做的就是在表单中的列表被填充后创建会话，如果单击导出按钮，会话将被发送到导出文件，导出文件会将其转换为 excel 文件。

感谢所有的帮助家伙！

# linux - linux路由特定机器流量抛出特定输出接口

> ID：12269309
> 
> 赞同：0
> 
> 时间：2012-09-04T18:25:51.053
> 
> 标签：linux, ubuntu, routing, routes, iptables

我有一台 linux 机器，我将其用作具有多接口和多 Internet 连接的路由器，例如 eth0--isp1

```
eth1--isp2

eth2--isp3 
```

网关是eth0 throw isp1

和 eth3--local1 10.0.0.x

```
eth4--local2 192.168.1.x 
```

我需要 local1 ip 192.168.1.10 去抛出 isp3，eth2

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T18:30:58.030

尝试`route add 192.168.1.0 netmask 255.255.255.0 dev eth4--local`，假设这些是本地连接的网络。如果没有，您还需要指定一个网关机器来路由数据包。老实说，您的问题格式不正确（并且可能属于服务器故障）。如果您已经在这些网络上拥有地址，则这些路由应该已经存在。如果你不这样做，你的问题可能比你想象的要复杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T21:29:07.963

您需要为此使用策略路由。您创建一个新的路由表并在源 IP 为 192.168.1.10 时使用它。

```
ip route add ... table $TABLENUM                  # your usual routes, for the new table
...
ip route add default via $ISP3 table $TABLENUM    # gateway for the new table
ip rule add from 192.168.1.10/32 lookup $TABLENUM # use the new table for this IP
ip rule add to 192.168.1.10/32 lookup $TABLENUM   # make it symmetric, for clarity 
```

# java - Java 多维数组排序

> ID：12269313
> 
> 赞同：0
> 
> 时间：2012-09-04T18:25:57.487
> 
> 标签：java, arrays, sorting

我完全不知道如何解决这个问题，但我在 Java 中为 AI 寻路系统使用了一个数组，我需要对这些值进行排序。这是我正在生成的数组：

```
int[][] paths = new int[Settings.GAME_COLS][Settings.GAME_ROWS]; // Just creating an Array that has room for every tile in the Game, so the Array can be used like this: paths[x][y]
int tempF = 0;

tempF = Math.abs(14 + (((aiX + 1) - playerX) + ((aiY - 1) - playerY)));
paths[aiX + 1][aiY - 1] = tempF;
tempF = Math.abs(14 + (((aiX + 1) - playerX) + ((aiY + 1) - playerY)));
paths[aiX + 1][aiY + 1] = tempF;
tempF = Math.abs(14 + (((aiX - 1) - playerX) + ((aiY + 1) - playerY)));
paths[aiX - 1][aiY + 1] = tempF;
tempF = Math.abs(14 + (((aiX - 1) - playerX) + ((aiY - 1) - playerY)));
paths[aiX - 1][aiY - 1] = tempF;
tempF = Math.abs(10 + (((aiX + 1) - playerX) + (aiY - playerY)));
paths[aiX + 1][aiY    ] = tempF;
tempF = Math.abs(10 + (((aiX - 1) - playerX) + (aiY - playerY)));
paths[aiX - 1][aiY    ] = tempF;
tempF = Math.abs(10 + ((aiX - playerX) + ((aiY + 1) - playerY)));
paths[aiX    ][aiY + 1] = tempF;
tempF = Math.abs(10 + ((aiX - playerX) + ((aiY - 1) - playerY)));
paths[aiX    ][aiY - 1] = tempF; 
```

这一切都可以完美地找到并生成包含所需信息的数组，但我需要根据添加到数组中的“tempF”值对数组进行排序。是否有捷径可寻？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T18:28:27.343

多维数组只不过是一组数组，因此您可以使用常规 [`Arrays.sort`](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html)方法对数组数组进行就地排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T18:38:13.150

```
for(int k=0;k<N;k++)  // loop for relaxation between row-column sorts
{
    for(int i=0;i<N;i++)
    {
       //row-wise sortings(for all rows)
       Arrays.sort(your_array[i]); 
    }

      for ( int c = 0 ; c < N ; c++ )
      {
         for( int d = 0 ; d < N ; d++ )               
         transposed_your_array[d][c] = your_array[c][d];         
      }  

    for(int i=0;i<N;i++)
    {
       //column-wise sortings(for all columns)
       Arrays.sort(transposed_your_array[i]);
    }

    for ( int c = 0 ; c < N ; c++ )
    {
        for( int d = 0 ; d < N ; d++ )               
        your_array[d][c] = transposed_your_array[c][d];         
    }  //getting original array from transpose

}
//There are actually N*N 1-D(N-element)arrays in a N x N matrix
//Every sort on a row-array alters the bounding column-arrays too(N of them)

//a worked example:
//8  3  8
//11 8  3
//6  12 6

//output:
//  this(0,0) is smallest element
//  ^
//  |
//  3  6  8
//  3  8  11
//  6  8  12 ---->this (2,2) is biggest element

//some other examples:
//10 8 8 
//11 4 7 
//9 5 3 
//
//3 5 9 ----> this 9 could be in place of 8 down there but this 
//4 7 10      program sorts rows first then sorts columns
//8 8 11      you can interleave them for better resolution sort(slower) 
```

# silverlight - 在同一轴上分组 StackedBarSeries 和 BarSeries

> ID：12269315
> 
> 赞同：0
> 
> 时间：2012-09-04T18:26:03.553
> 
> 标签：silverlight, silverlight-4.0, charts, silverlight-toolkit, stackedbarseries

我想在我的 Silverlight 工具包水平条形图上显示 3 个系列...2 个普通条形系列和 1 个堆叠条形系列（由 2 个组成`SeriesDefinition`）。当我添加前 2 个普通条形系列时，它们按预期彼此相邻显示。但是当我添加堆叠系列时，它占据了整行的高度。有什么方法可以组合这两种类型的系列，使其从上到下显示为 - 堆叠、条形、条形？

这是我目前的设置方式：

```
<charts:Chart Title="Manufacturer Overview" LegendTitle="Legend" Style="{StaticResource ZChartNoBackground}">
<charts:Chart.Series>
    <charts:StackedBarSeries>
        <charts:SeriesDefinition Title="Oppotunities" 
              ItemsSource="{Binding Path=TotalValueInFunnelByVendor}" 
              IndependentValueBinding="{Binding IndependentValue}" 
              DependentValueBinding="{Binding DependentValue}">
        </charts:SeriesDefinition>
        <!--SAMPLE DATA UNTIL REAL DATA IS IN-->
        <charts:SeriesDefinition Title="Flow Business" 
              ItemsSource="{Binding Path=TotalValueInFunnelByVendor}" 
              IndependentValueBinding="{Binding IndependentValue}" 
              DependentValueBinding="{Binding DependentValue}">
        </charts:SeriesDefinition>
    </charts:StackedBarSeries>
    <charts:BarSeries Title="Sales to date" 
              ItemsSource="{Binding Path=SalesToDateByVendor}" 
              IndependentValueBinding="{Binding IndependentValue}" 
              DependentValueBinding="{Binding DependentValue}">
    </charts:BarSeries>
    <charts:BarSeries Title="Forecasted" 
              ItemsSource="{Binding Path=ForecastedSalesByVendor}" 
              IndependentValueBinding="{Binding IndependentValue}" 
              DependentValueBinding="{Binding DependentValue}">
    </charts:BarSeries>
</charts:Chart.Series>
</charts:Chart> 
```

这是图表的图像。请注意，绿色和红色条已正确放置，但堆叠条是行的高度，位于其他 2 个系列的“后面”：

![图表快照](../Images/5bbbbaab8790d363268c235698ff4c2b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T18:15:59.253

因此，经过一大堆环顾四周，我得出的结论是这种行为是“设计使然”或错误。我查看了`StackedBarSeries`. 我创建了一个新类，该类继承自`StackedBarSeries`“UpdateDataItemPlacement”方法并将代码添加到该方法中，该方法将条形的高度除以 SeriesHost 中的系列数：

```
protected override void UpdateDataItemPlacement(IEnumerable<DefinitionSeries.DataItem> dataItems)
{
    /* A BUNCH OF CODE FROM TOOLKIT */

    double sum = IsStacked100 ?
       group.DataItems.Sum(di =>Math.Abs(ValueHelper.ToDouble(di.DataPoint.ActualDependentValue))) : 
       1;
    if (0 == sum)
    {
        sum = 1;
    }

    // MY ADDITION        
    var numSeries = this.SeriesHost.Series.Count;
    int index = this.SeriesHost.Series.IndexOf(this);
    // END ADDITION

    double ceiling = 0;
    double floor = 0;
    foreach (DataItem dataItem in group.DataItems)
    {
        DataPoint dataPoint = dataItem.DataPoint;
        double value = IsStacked100 ? (ValueHelper.ToDouble(dataPoint.ActualDependentValue) * (100 / sum)) : ValueHelper.ToDouble(dataPoint.ActualDependentValue);
        if (ValueHelper.CanGraph(value))
        {
            double valueCoordinate = ActualDependentAxis.GetPlotAreaCoordinate(value).Value;
            double fillerCoordinate = (0 <= value) ? ceiling : floor;

            double topCoordinate = 0, leftCoordinate = 0, height = 0, width = 0, deltaCoordinate = 0;
            if (AxisOrientation.Y == ActualDependentAxis.Orientation)
            {
                topCoordinate = plotAreaMaximumDependentCoordinate - Math.Max(valueCoordinate + fillerCoordinate, zeroCoordinate + fillerCoordinate);
                double bottomCoordinate = plotAreaMaximumDependentCoordinate - Math.Min(valueCoordinate + fillerCoordinate, zeroCoordinate + fillerCoordinate);
                deltaCoordinate = bottomCoordinate - topCoordinate;
                height = (0 < deltaCoordinate) ? deltaCoordinate + 1 : 0;
                leftCoordinate = categoryMinimumCoordinate;
                width = categoryMaximumCoordinate - categoryMinimumCoordinate + 1;

                // MY MODIFICATION
                //adjusting the width and offset to allow multiple columns to render beside each other instead of overtop
                width = width / numSeries;
                leftCoordinate = leftCoordinate + (width * index);
                //
            }
            else
            {
                leftCoordinate = Math.Min(valueCoordinate + fillerCoordinate, zeroCoordinate + fillerCoordinate);
                double rightCoordinate = Math.Max(valueCoordinate + fillerCoordinate, zeroCoordinate + fillerCoordinate);
                deltaCoordinate = rightCoordinate - leftCoordinate;
                width = (0 < deltaCoordinate) ? deltaCoordinate + 1 : 0;
                topCoordinate = categoryMinimumCoordinate;
                height = categoryMaximumCoordinate - categoryMinimumCoordinate + 1;

                //MY MODIFICATION
                //adjusting the height and offset to allow multiple columns to render beside each other instead of overtop
                height = height / numSeries;
                topCoordinate = topCoordinate + (height * index);
                //
            }

            // THE REST OF THE CODE FROM THE TOOLKIT
       }  
       else
       {
           dataPoint.Visibility = Visibility.Collapsed;
       }
   }
} 
```

# android - 按数据库列值设置文本

> ID：12269316
> 
> 赞同：0
> 
> 时间：2012-09-04T18:26:04.283
> 
> 标签：android

我有一个名为：“dbtest.db”的数据库，一个名为：“mensagens”的表，一个名为：“usuarioorigem”的列。在我的 XML 文件中，我有一个 textview 和一个按钮，当单击按钮时，我希望 textview 的值更改为列中的值：“usuarioorigem”。

我该怎么做？你能解释一下它是如何工作的吗？

我有这个代码，但它不起作用。

```
 TextView mostrar = (TextView) findViewById(R.id.tvUSUARIO);
            mostrar.setText(usuarioorigem.valueOf(returning)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T18:37:45.637

是的，你可以，有一些方法，如插入，更新可用于您各自的要求使用它们，按照本教程最适合您的问题。

[安卓 SQLite](http://www.vogella.com/articles/AndroidSQLite/article.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T19:00:45.477

定义一个**`cursor c`**指向你的数据库。

```
mostrar.setText(c.getString(c.getColumnIndex(Database.columns[0]))); // assuming that you want to retrieve the value stored in your first column. 
```

[文档](http://developer.android.com/reference/android/database/Cursor.html)中给出的[示例](http://developer.android.com/training/notepad/notepad-ex1.html)是学习游标的好方法。

# c# - 表达式方法，body的默认值

> ID：12269318
> 
> 赞同：0
> 
> 时间：2012-09-04T18:26:05.813
> 
> 标签：c#, .net, entity-framework, nhibernate, predicate

我有这个代码：

```
var listExpression = new List<Expression>();
var parameter = Expression.Parameter(typeof(T));

var memberExpression = Expression.PropertyOrField(parameter, MyProperty);
    listExpression.Add(
    Expression.Call(
        ((MemberExpression)memberExpression), "Contains", null,
        Expression.Constant((string)MyValue))
    );

Expression body = Expression.Constant(true);
foreach (var expression in listExpression)
    body = Expression.And(body, expression);

return Expression.Lambda<Func<T, bool>>(body, parameter); 
```

结果是：

```
"True & $var1.AGE >= 5" 
```

当我将此谓词与实体框架一起使用但不适用于 NHiernate 时，我没有任何问题。我认为问题是“真”。没有这个 "True" 是否可以创建这个谓词？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T18:43:37.343

代替

```
Expression body = Expression.Constant(true);
foreach (var expression in listExpression)
    body = Expression.And(body, expression); 
```

经过

```
var body = listExpression.First();//check first if listExpression.Any() would be better
listExpression.Skip(1).Aggregate(body, Expression.And); 
```

# sql-server-2008 - SQL Server 2008 查询从两个表中获取混合数据

> ID：12269319
> 
> 赞同：-1
> 
> 时间：2012-09-04T18:26:08.147
> 
> 标签：sql-server-2008

有人请告诉我 SQL 查询以获得结果....

谢谢！

![在此处输入图像描述](../Images/be3c061592194d9a557cb70b5ad819ef.png)

从上面的两个表中，我想从其中的每个表中获取`Photo`, `Name`,即`Id of max(id)``Table-A``category_id``parent_id``Table-B``1`

```
1005 E Byte Apple 3
1002 B Byte Banana 5
1007 G Byte Orange 6
1011 K Byte Mango 7 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T18:54:05.990

```
select a.id,a.name,a.photo,b.category_name,b.category_id
from table-A a join table-B s ON a.category_id = b.category_id
where parent_id = 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T18:57:22.440

试试下面的；

```
Select TBLA.ID, TBLA.Name, TBLA.Photo, TBLB.Category_Name, TBLB.Category_ID
From [table-B] TBLB
Inner Join [table-a] TBLA On TBLA.Category_ID = TBLB.Category_ID
Where TBLB.Parent_ID = 1 
And TBLA.ID = (Select Max(ID) 
      From [table-a]
      Where Category_ID = TBLB.Category_ID) 
```

# crossfilter - 如何填补 crossfilter group.all() 结果中的空白？

> ID：12269320
> 
> 赞同：1
> 
> 时间：2012-09-04T18:26:08.257
> 
> 标签：crossfilter

我有一个这样定义的数据集：

```
var hour = data.crossfilter.dimension(function(d){ return d.date.getHours() + d.date.getMinutes() / 60; });
var hours = hour.group(Math.floor); 
```

生成的结果 ( `hours.all()`) 如下所示：

```
[0, 124]
[1, 25]
[2, 5]
[3, 2]
[5, 339]
[6, 11648]
[7, 16334]
[8, 15919]
[9, 14078]
[10, 13816]
[11, 14646]
[12, 15079]
[13, 13718]
[14, 13947]
[15, 14055]
[16, 13995]
[17, 16166]
[18, 14958]
[19, 13991]
[20, 12769]
[21, 10638]
[22, 3939]
[23, 892] 
```

`3`请注意，`5`(`4`缺失)之间存在数据差距。如何配置交叉过滤器来填补空白`0`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T17:09:48.653

我认为您必须自己填写它们，因为我看不到 Crossfilter 如何将您没有赋予它的值分组。该责任应该落在您用来呈现数据的任何对象上。

你用的是d3吗？我认为线性刻度会自动做到这一点。如果没有，手动执行将非常简单。

# makefile - Makefile 处理几个文件

> ID：12269321
> 
> 赞同：0
> 
> 时间：2012-09-04T18:26:17.180
> 
> 标签：makefile

我想解析几个 json 文件，获取它们的内容，预先/附加一些文本并将新字符串保存在另一个文件中。目前我有这个适用于单个文件：

```
#set variables for shared libs
SHAREDFILE=$(SERVERPATH)/xx/mod/supervisor/cfg/prod/config.json
JSONCONF = `cat "$(SHAREDFILE)"`

share:
    @echo "Sharing node-client code in ${PROJECT}.- ENV $(ENV)..."
    @echo "parseConfig($(JSONCONF));" > $(CLIENTPATH)/public/js/shared/config.json 
```

因为据我所知，变量只能在规则之外设置，我将如何为文件列表执行此操作？

更新：要复制的文件可以在不同的目录中，但它们都应该复制到同一个目标目录中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T02:07:03.010

根据对您的文件列表的猜测：

```
SHAREDFILES = foo.json bar.json baz.json

TARGETS = $(addprefix $(CLIENTPATH)/public/js/shared/, $(SHAREDFILES))

share: $(TARGETS)

$(TARGETS) : $(CLIENTPATH)/public/js/shared/%.json : $(SERVERPATH)/xx/mod/supervisor/cfg/prod/%.json
    @echo "Sharing node-client code in ${PROJECT}.- ENV $(ENV)..."
    @echo "parseConfig(`cat $<`);" > $@ 
```

**编辑：**
如果源文件位于多个目录中，但目标都进入同一个目录......有几种方法可以做到这一点。这可能是最好的：

```
SHAREDFILES = some/path/foo.json another/path/bar.json yet/another/path/baz.json

TARGETDIR = $(CLIENTPATH)/public/js/shared
TARGETS = $(addprefix $(TARGETDIR)/, $(notdir $(SHAREDFILES)))

vpath %.json $(dir $(SHAREDFILES))

share: $(TARGETS)

$(TARGETS) : $(TARGETDIR)/%.json : %.json
    @echo "Sharing node-client code in ${PROJECT}.- ENV $(ENV)..."
    @echo "parseConfig(`cat $<`);" > $@ 
```

# php - 我的链接爬虫无法在某些网页上运行

> ID：12269327
> 
> 赞同：0
> 
> 时间：2012-09-04T18:26:27.033
> 
> 标签：php, web-crawler

我用 PHP 编写了一个程序来查找和打印网页上的所有链接。它还会进入它找到的任何链接并执行相同的操作。我的问题是，在某些网站（如 Youtube）中，它不会打印链接，也不会在其中跟随。

这是我的主要代码：

```
function echo_urls($site_address){

    if(check_valid_url($site_address)){
        $site = new site();
        $site->address = $site_address;
        $site->full_address = "<a href=\"$site_address\">$site_address</a>";
        $site->depth = 0;

        $queue = new queue();

        $queue->push($site);
        array_push($queue->seen,$site->address);

        $depth = 0;

        while(($site = $queue->get_first())){
            $depth++;
            echo $site->depth." : ".$site->full_address."<br>";
            $queue = push_links($site->address,$queue,$depth);
        }
    }
    else;
}
function push_links($site_address,$queue,$depth){
if($depth<4){
        $ch = curl_init();
        curl_setopt($ch, CURLOPT_URL,$site_address);
        curl_setopt($ch, CURLOPT_TIMEOUT, 30); //timeout after 30 seconds
        curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);
        $result=curl_exec ($ch);
        curl_close ($ch);

        if( $result ){
            preg_match_all( '/<a\s[^>]*href=([\"\']??)([^\" >]*?)\\1[^>]*>(.*)<\/a>/siU', $result, $list);

            $list = $list[0];

            foreach( $list as $item ) {
                if(!(empty($item)))
                if($result = get_all_string_between($item,"href=\"","\"")){
                    if((array_search($result[0],$queue->seen))==false){
                        $site = new site();
                        $site->address = $result[0];
                        $site->full_address = $item;
                        $site->depth = $depth;
                        $queue->push($site);
                        array_push($queue->seen,$site->address);
                    }
                }
            }
        }
    }

    return $queue;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T18:38:49.180

通过查看几个函数很难判断，但我的猜测是：

1.  YouTube 阻止了你
2.  这部分`if($depth<4){`正在停止`push_links`执行，因为它可能返回 FALSE

另外，不要为此使用 RegEx。使用类似[DOMDocument 类的东西](http://php.net/manual/en/class.domdocument.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T20:00:57.463

我通常使用 PHPQuery 来抓取网站。这很简单

[http://code.google.com/p/phpquery/](http://code.google.com/p/phpquery/)

# linq - 将查询转换为 LINQ

> ID：12269333
> 
> 赞同：0
> 
> 时间：2012-09-04T18:26:50.370
> 
> 标签：linq, lambda

如何使用 Lambda 在 Linq 中转换以下查询？

```
SELECT DISTINCT Registro, COUNT(Registro) as qnt 
FROM XML_Relatorio
WHERE Arquivo = 'redenet.xml' 
AND TipoErro <> 'Imovel Inserido' 
AND TipoErro <> 'TI'
AND DataHora BETWEEN '01-01-2012' AND '02-01-2012' 
GROUP BY Registro 
ORDER BY Registro 
```

我正在尝试以下代码，但我需要一些帮助来使用 Lambda 构建 LINQ

```
IQueryable<XML_Relatorio> quantidadeErro = db.XML_Relatorios
    .Where(a => a.Arquivo == "redenet.xml" 
           && a.TipoErro != "Imovel Inserido" 
           && a.TipoErro != "TI"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T18:34:25.543

假设`DataHora`字段是`Date`或`DateTime`类型。

```
// parse the strings to datetime 
var start = DateTime.Parse("01-01-2012");
var end = DateTime.Parse("02-01-2012");

IQueryable<XML_Relatorio> quantidadeErro = db.XML_Relatorios
   .Where(a => a.Arquivo == "redenet.xml" 
       && a.TipoErro != "Imovel Inserido" 
       && a.TipoErro != "TI"
       // and compare them...
       && a.DataHora > start && a.DataHora < end); 
```

# twitter-bootstrap - 行内有行流体可以吗？

> ID：12269335
> 
> 赞同：12
> 
> 时间：2012-09-04T18:27:11.333
> 
> 标签：twitter-bootstrap

我一直在玩 Twitter Bootstrap[网格系统](http://twitter.github.com/bootstrap/scaffolding.html#gridSystem)，并注意到我可以通过以下方式混合`row`和：`row-fluid`

```
<div class="row">
    <div class="span8">
        ...
    </div>

    <div class="span4>
        <div class="row-fluid">
            <div class="span8">
                ...
            </div>
            <div class="span4">
                ...
            </div>
        </div>
    </div>
</div> 
```

这对我有用，但是我不确定我是否可以依靠这种行为来保持一致。如果发现有关此主题的文档不清楚。

这是对网格系统的记录和可靠的使用吗？或者我应该只`row-fluid`在另一个内部使用`row-fluid`？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-04T19:45:15.903

的主要目的`.row-fluid`是改变`.spanX`元素的样式。

在 内`.row`，`.spanX`元素具有固定的像素宽度。如果您使用响应式样式表，此宽度可能会根据视口尺寸而变化。

但是，在 内`.row-fluid`，`.spanX`元素具有基于百分比的宽度。这里的一个很好的副作用是`.row-fluid`元素可以放置在**任何**元素内，并且它会简单地将自身调整为容器宽度的 100%。同样，`.spanX`此流动行中的任何元素都会相应地调整自身大小，因此每个“列”大约是容器的 12 分之一（占装订线宽度）`.row-fluid`，无论行的宽度或在 DOM 中的位置如何。

如果您想要将页面的任何区域拆分为一定数量的列，`.row-fluid`则可以使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T19:37:47.510

是的，它是可靠且有记录的。查看文档中的[基本流体网格 HTML](http://twitter.github.com/bootstrap/scaffolding.html#fluidGridSystem)部分。如您所见，您可以：

> 通过将 .row 更改为 .row-fluid 使任何行“流动”。列类保持完全相同，便于在固定网格和流动网格之间切换。

这意味着您可以在布局中的任何位置使用此组件，无论它是否流畅。您还会注意到“流体布局”部分与此部分完全分开。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T19:25:00.273

是的，您可以通过这种方式使用行和行流体。如果您也在使用，`bootstrap-responsive.css`那么当重新调整浏览器大小或在移动设备上查看页面时，网格大小会更改为适合。

# rss - 是否有“修改”字段？

> ID：12269336
> 
> 赞同：1
> 
> 时间：2012-09-04T18:27:27.720
> 
> 标签：rss

我从我的应用程序中阅读了一些 rss 提要，并且由于某些文章可以在网站上更新，我想知道是否有可以查看的字段，以便查看我得到的是相同的文章还是修改后的版本. 我知道有一个 ttl 字段，但这只是我可以在缓存中保留文章多长时间的提示：它实际上并没有说明它是否真的更新了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T13:34:29.010

只要你不是指像[云元素这样的](http://feed2.w3.org/docs/rss2.html#ltcloudgtSubelementOfLtchannelgt)东西，就没有。

> “它的目的是允许向云注册的进程收到频道更新的通知，为 RSS 提要实现轻量级的发布-订阅协议。”

请参阅w3.org[上的元素列表。](http://feed2.w3.org/docs/rss2.html#requiredChannelElements)

# git - 将用户添加到 gitosis（用户名中的配置/空格）

> ID：12269337
> 
> 赞同：0
> 
> 时间：2012-09-04T18:27:37.210
> 
> 标签：git, ssh, gitosis

我正在尝试在我的 gitosis-repository 上授权一些 Windows 用户。用户的用户名中有“空格”。

这些文件被添加到 gitosis keydir 目录并推送到源，新用户被添加为 gitosis.conf 中的成员。

问题是：如果 Windows 用户试图克隆一些东西，git 要求输入 gitosis@host 的密码。

现在的问题是：如何正确配置带有空格的用户名，为什么 git 要求输入密码？

编辑：

1.  我检查了 authorized_keys 文件 - 不包括新的公钥。这可能是原因吗？
2.  如果我将更改推送到 gitosis-admin 存储库，GIT 会输出以下警告： WARNING:gitosis.ssh:Unsafe SSH username in keyfile: 'User name with spaces@name.pub

我应该如何处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T12:22:03.663

如果 git 要求输入密码，则 git+gitosis 设置不正确。

要删除用户名中的空格，请将它们替换为下划线。用户名根本不重要，重要的是 SSH 密钥。

例子：

ssh-key 文件名：“ **keydir/user_name_with_space@myhost.com.pub** ”

包含：“ **ssh-rsa <...SSH-Key...> user_name_with_space@myhost.com** ”

在**您**的`gitosis.conf`.

gitosis 警告消息来自*/usr/share/pyshared/gitosis/ssh.py*（您的路径可能不同）。文件顶部是一个正则表达式。检查文件名。

最后，这是在 Windows 上设置 git 的 HOWTO：[Github、Windows 和 TortoiseGit](http://dbanck.de/2009/10/08/github-windows-and-tortoisegit-part-1-installing-pulling/)

# c# - 注册表 - NetworkList Profiles - 无法通过程序访问

> ID：12269345
> 
> 赞同：2
> 
> 时间：2012-09-04T18:28:05.987
> 
> 标签：c#, python, registry, vpn

连接到新网络时，Windows 会询问它是家庭网络、工作网络还是公共网络。

我使用 VPN 服务，在每个连接上，Windows 都会显示类似 . 问题是，这个数字总是大一，我不知道为什么。

我想我会检查注册表中发生的事情，发现

```
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\NetworkList\Profiles 
```

所有这些都与其他密钥一起存储在哪个密钥下。然后我决定编写一个程序来检查它们并在再次连接之前删除它们，所以它总是会在没有数字的情况下使它成为，防止注册表变得臃肿。很简单，我用 C# 制作了一个 5 行控制台程序，让它要求管理员，以管理员权限运行 Visual Studio，这样我就可以访问注册表。代码是：

```
RegistryKey key = Registry.LocalMachine;
key = key.OpenSubKey(@"SOFTWARE\Microsoft\Windows NT\CurrentVersion\NetworkList\Profiles");
foreach (string subkey in key.GetSubKeyNames())
     Console.WriteLine(subkey); 
```

那只是为了首先列出子项，但即使这样也不起作用，因为某些未知原因，没有找到，但也没有错误消息。

我也查找了如何在 Python 中执行此操作，大约两天前我才第一次阅读。

```
from _winreg import *
key = OpenKey(HKEY_LOCAL_MACHINE, r'SOFTWARE\Microsoft\Windows NT\CurrentVersion\NetworkList\Profiles', 0, KEY_ALL_ACCESS)
for i in range(1024):
print EnumKey(key, i) 
```

该代码最终也没有打印任何键，在到达末尾时给出 Expected WindowsError。

我当然可以看到名称像 {numbersAndLettersSeparatedByDashes} 的子键，它们叫什么？GUID？还是那些是别的东西？我不明白的是，我发送了 C# 和 Python 代码的人，他们也在他的 Windows 7、x64 上工作，但 C# 仅在它是 Windows 窗体解决方案时才工作。不是在控制台时。在另一台 PC 上测试 Python，相同的操作系统，但结果与我的相同。为什么？有没有办法解决这个问题？对我来说似乎很奇怪，我很乐意完成这件事。花了好几个小时却一无所获。没有错误，仍然失败。

我不知道是否可以为两种语言和 Windows 发布这样的帖子，但我不知道在其他地方可以寻求帮助。也为长度感到抱歉，但我认为这是必要的。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-01-05T08:04:22.937

您可以`NetworkList`使用管理员权限读取密钥，只需`KEY_ALL_ACCESS`将`KEY_READ`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-17T05:21:12.000

确保您正在运行以查看注册表的任何内容不仅在管理员模式下运行，而且是 64 位版本。

# javascript - jQuery("ul.sf-menu").superfish 不是函数

> ID：12269356
> 
> 赞同：0
> 
> 时间：2012-09-04T18:28:55.567
> 
> 标签：javascript, jquery, wordpress

在 Firefox 中的站点加载期间收到错误“jQuery("ul.sf-menu").superfish 不是函数”，如果我删除了 superfish，它会在下一个 javascript 片段上出错，让我相信它是一个 jQuery 参考错误，已经过四重检查并确认它正在加载：http: [//yolokids.org.previewdns.com/ ?page_id=7](http://yolokids.org.previewdns.com/?page_id=7)

这是在标题中正常加载的jquery：

```
 <script type='text/javascript' src='http://yolokids.org.previewdns.com/wp-content/themes/theme1270/js/jquery-1.8.1.min.js?ver=1.8.1'></script> 
```

下面是页脚中引用的代码：

```
 <script type="text/javascript">
                // initialise plugins
                        jQuery(document).ready(function(){
                        // main navigation init
                        jQuery('ul.sf-menu').superfish({
                            delay:       '<?php echo get_option('my_framework_sf_delay'); ?>',      // one second delay on mouseout 
                            animation:   {opacity:'<?php echo get_option('my_framework_sf_fade_in'); ?>',height:'<?php echo get_option('my_framework_sf_slide_down'); ?>'}, // fade-in and slide-down animation 
                            speed:       '<?php echo get_option('my_framework_sf_speed'); ?>',  // faster animation speed 
                            autoArrows:  <?php echo get_option('my_framework_sf_arrows'); ?>,        // generation of arrow mark-up (for submenu) 
                            dropShadows: <?php echo get_option('my_framework_sf_dropshadows'); ?>    // drop shadows (for submenu)
                        });

                        // prettyphoto init
                        jQuery("#gallery .portfolio a[rel^='prettyPhoto']").prettyPhoto({
                            animationSpeed:'slow',
                            theme:'facebook',
                            slideshow:false,
                            autoplay_slideshow: false,
                            show_title: true,
                            overlay_gallery: false
                        });

                    });
              </script>

                <?php if( is_front_page() || is_home() ) { ?>
                    <script type="text/javascript">
                        jQuery(document).ready(function(){
                          //  Initialize Backgound Stretcher
                            jQuery(document).bgStretcher({
                             images: ['<?php bloginfo( 'template_url' ); ?>/images/body-1.jpg'], imageWidth: 1920, imageHeight: 1200
                            });
                        });
                  </script>
               <?php } ?>

                <script type="text/javascript">
                jQuery(document).ready(function(){
                      //  Initialize Backgound Stretcher
                        jQuery(document).bgStretcher({
                         images: ['<?php bloginfo( 'template_url' ); ?>/images/body-2.jpg'], imageWidth: 1920, imageHeight: 1200
                        });
                    });
               </script> 
```

基本上，superfish、bgstretcher 和 pretty photo js 引用都应该在上面的 URL 上正确加载，但它们会继续从 Suckerfish js 开始一一加载失败。提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T18:36:40.303

在第 202 行，为滑块重新加载 jQuery。这有效地覆盖了 $ 和 jQuery 变量，删除了所有额外的插件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T18:37:10.613

我改变了你的电话：

```
jQuery('ul.sf-menu').superfish() 
```

至：

```
$('ul.sf-menu').superfish() 
```

它并没有为我抛出错误。

# php - 将秒转换为带两位小数的时间

> ID：12269357
> 
> 赞同：3
> 
> 时间：2012-09-04T18:28:59.357
> 
> 标签：php, datetime, mathematical-expressions

> **可能重复：**
> [在 PHP 中将秒转换为天、小时、分钟、秒](https://stackoverflow.com/questions/8273804/convert-seconds-into-days-hours-minutes-seconds-in-php)
> [如何将小数转换为时间，例如。HH:MM:SS](https://stackoverflow.com/questions/9102680/how-to-convert-a-decimal-into-time-eg-hhmmss)

我在这里做的是在 mysql 中将发布时间保存为 UTC，在从 sql 检索时间戳后，我使用`strtotime()`它来将其转换为秒，然后将偏移时间添加到这些秒以显示当前本地时间。现在的问题是，当我尝试将这些秒数重新转换为数小时时，例如

```
$seconds = 330*60 //Thats 5.30 hours and 60 seconds gives me 19800 as an output 
```

现在，当我将其重新转换为小时时，它向我显示 5.50 而不是 5.30

```
sprintf ("%.2f", 19800/60/60); //Output of 5.50 instead I want is 5.30 
```

我知道这是一个数学表达式做错了，任何帮助都会得到一个清晰的解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T18:42:43.710

不是最优雅的解决方案，但这有效：

```
$original = (19800 / 60 / 60);
$hours = floor($original);
$minutes = ($original - $hours) * 60; 
```

或者使用模数可能更好：

```
$hours = floor(19800 / 60 / 60);
$minutes = (19800 / 60) % 60; 
```

# php - 使用 php 从 Web 服务构建中获取空响应

> ID：12269365
> 
> 赞同：3
> 
> 时间：2012-09-04T18:29:54.223
> 
> 标签：php, web-services, zend-framework, soap

我想用 php 和 zend 框架创建一个 Web 服务。服务器端代码如下：

**csiService.php：**

```
<?php
require_once 'Zend/Loader.php';
require_once 'CSI.php';
$WSDL_URI="http://csi.chemicalseeker.com/csiService.php?WSDL";
if(isset($_GET["WSDL"]))
{
    Zend_Loader::loadClass('Zend_Soap_AutoDiscover');
    Zend_Loader::loadClass('Zend_Soap_Wsdl_Strategy_ArrayOfTypeSequence');
    $autodiscover = new Zend_Soap_AutoDiscover('Zend_Soap_Wsdl_Strategy_ArrayOfTypeSequence'); 
    $autodiscover->setBindingStyle(array('style' => 'document')); 
    $autodiscover->setOperationBodyStyle(array('use' => 'literal')); 
    $autodiscover->setClass('CSI'); 
    $autodiscover->handle();
} 
else
{
    Zend_Loader::loadClass('Zend_Soap_Server');
    $server = new Zend_Soap_Server($WSDL_URI);
    $server->setClass('CSI');
    $server->handle();
}
?> 
```

其中包括**CSI.php**：

```
<?php
class CSI {
    /**
     * @return string
     */
    function helloWorld()
    {
        return("Hello");
    }
}
?> 
```

**我编辑了主机文件，以便将域“csi.chemicalseeker.com”绑定到 127.0.0.1* WSDL 工作得很好，因为我访问了“http://csi.chemicalseeker.com/csiService.php?WSDL”我的浏览器：

```
<?xml version="1.0"?>
<definitions xmlns="http://schemas.xmlsoap.org/wsdl/"
    xmlns:tns="http://csi.chemicalseeker.com/csiService.php" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"
    xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap-enc="http://schemas.xmlsoap.org/soap/encoding/"
    xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" name="CSI"
    targetNamespace="http://csi.chemicalseeker.com/csiService.php">
    <types>
        <xsd:schema targetNamespace="http://csi.chemicalseeker.com/csiService.php">
            <xsd:element name="helloWorld">
                <xsd:complexType />
            </xsd:element>
            <xsd:element name="helloWorldResponse">
                <xsd:complexType>
                    <xsd:sequence>
                        <xsd:element name="helloWorldResult" type="xsd:string" />
                    </xsd:sequence>
                </xsd:complexType>
            </xsd:element>
        </xsd:schema>
    </types>
    <portType name="CSIPort">
        <operation name="helloWorld">
            <documentation>@return string</documentation>
            <input message="tns:helloWorldIn" />
            <output message="tns:helloWorldOut" />
        </operation>
    </portType>
    <binding name="CSIBinding" type="tns:CSIPort">
        <soap:binding style="document"
            transport="http://schemas.xmlsoap.org/soap/http" />
        <operation name="helloWorld">
            <soap:operation
                soapAction="http://csi.chemicalseeker.com/csiService.php#helloWorld" />
            <input>
                <soap:body use="literal" />
            </input>
            <output>
                <soap:body use="literal" />
            </output>
        </operation>
    </binding>
    <service name="CSIService">
        <port name="CSIPort" binding="tns:CSIBinding">
            <soap:address location="http://csi.chemicalseeker.com/csiService.php" />
        </port>
    </service>
    <message name="helloWorldIn">
        <part name="parameters" element="tns:helloWorld" />
    </message>
    <message name="helloWorldOut">
        <part name="parameters" element="tns:helloWorldResponse" />
    </message>
</definitions> 
```

我还编写了一个名为 CSIClient.php 的 php 客户端文件，并从浏览器访问它：

**CSIClient.php**

```
<?php
require_once 'Zend/Loader.php';
require_once 'CSI.php';
Zend_Loader::loadClass('Zend_Soap_Client');
$WSDL_URI="http://csi.chemicalseeker.com/csiService.php?WSDL";

    $client = new Zend_Soap_Client($WSDL_URI);
    echo('<pre>');
    var_dump($client->helloWorld());
    echo('</pre>');
?> 
```

结果应该是一个内容为“Hello”的字符串，但它显示一个空的stdObject：

```
object(stdClass)#3 (0) {
} 
```

我可以通过“$client->getFunctions()”和“$client->getTypes()”获取函数列表和类型列表，这意味着“CSI”类已经成功连接到Web服务。但是无法正确返回结果。

我还尝试了其他方法来调用 Web 服务。我使用 Flash Builder 调用了 helloWorld() 函数，来自服务器的响应如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope
  xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns1="http://csi.chemicalseeker.com/csiService.php">
  <SOAP-ENV:Body>
    <ns1:helloWorldResponse/>
  </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

正如我们所见，预期结果“Hello”也不包含在 SOAP 信封中。我是否错过了一些重要的事情或在我的代码中犯了一些错误？如果你有线索，请帮助我。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-21T02:36:31.087

我也在为此苦苦挣扎，但我设法通过切换到非 WSDL 模式来解决您在上面遇到的问题。

无论我尝试什么，当我尝试从我自己的自动发现生成的 WSDL 加载 WSDL 时，我总是收到相同的空响应。（感觉可能存在一些递归问题，但我现在看不到如何）

无论如何，切换到非 WSDL 模式给了我正确的响应。

尝试按如下方式创建您的服务器：

```
$server = new Zend_Soap_Server(null, array('uri' => $WSDL_URI)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T08:29:37.163

在进行测试时查看您的 php 错误日志。

您还可以启用 error_reporting`E_STRICT`或`E_NOTICE`获取更多信息错误提示：

[http://php.net/manual/de/function.error-reporting.php](http://php.net/manual/de/function.error-reporting.php)

使用[soapUI](http://www.soapui.org/)，您可以进行更多可扩展测试：

# javascript - Javascript更改查询字符串以进行刷新

> ID：12269367
> 
> 赞同：4
> 
> 时间：2012-09-04T18:30:12.913
> 
> 标签：javascript, jquery, get, refresh, query-string

我正在寻找一种在不刷新页面的情况下使用 javascript（包括 jquery）更改 html 请求的获取查询字符串的方法。刷新时将保留此查询字符串。例如，`http://thissite.site/index.html?id=123`将是原始 url，然后发生事件并且 id 更改为 235。当页面刷新时，刷新的链接将是`http://thissite.site/index.html?id=235.`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T18:33:23.513

```
window.location.search = "?id=" + encodeURIComponent(new_value) 
```

[https://developer.mozilla.org/docs/DOM/window.location](https://developer.mozilla.org/docs/DOM/window.location)

[https://developer.mozilla.org/docs/JavaScript/Reference/Global_Objects/encodeURIComponent](https://developer.mozilla.org/docs/JavaScript/Reference/Global_Objects/encodeURIComponent)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T19:52:54.853

使用 HTML 5，您可以使用以下`pushState function`. 有关[pushState 如何防止潜在的内容伪造？](https://stackoverflow.com/questions/6193983/how-does-pushstate-protect-against-potential-content-forgeries).

我也在寻找这个，并看到 bandcamp 使用它在[http://bandcamp.com/discover上进行导航](http://bandcamp.com/discover)

# wcf - 在 Web 服务应用程序中使用 lucene.net 的指南？

> ID：12269368
> 
> 赞同：4
> 
> 时间：2012-09-04T18:30:16.203
> 
> 标签：wcf, iis-7, lucene.net

刚开始阅读 Lucene.net，我希望我的一些基于 REST 的 Web 服务能够使用 Lucene.net 的强大搜索功能

但是，我遇到了一个链接，该链接说我应该创建一个 Windows 服务（使用 WCF）来执行所有 lucene 搜索/索引等，因为 IIS 会回收应用程序池，这将导致各种锁定问题。

我的问题是，这是正确的吗？如果是这样，是否有另一种方法可以在不创建 Windows 服务（使用 WCF）的情况下解决此问题？另外，由于我有基于 REST 的服务，我是否会从这些服务调用 Windows WCF 服务，这会使事情变慢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T05:42:09.880

## 索引

在阅读过程中，您会发现索引是使用`IndexWriter`类完成的。Lucene 一次只允许`IndexWriter`打开 1 个实例。使用默认锁定时，它会在索引目录中创建一个锁定文件并阻止创建任何其他 IndexWriter 实例。出于这个原因，在您可以更好地控制的过程中实现索引可能会更好。

如果您的索引过程因极端偏见而终止并且您的`IndexWriter`班级没有关闭，则索引文件夹上的锁定将保持不变，并且不允许其他实例。因此，Lucene 允许您从索引文件夹中解除锁定（使用`IndexWriter.unlock`）——这是一种危险的方法，因为如果在同一个索引上打开了两个 IndexWriter，它将破坏索引。如果您有一个正在执行索引的 Windows 服务，并且它是您的解决方案中执行索引（和任何更新）的唯一进程，您可以放心地在服务启动时解锁索引文件夹。在基于 Web 服务的环境中，您从 Web 方法执行索引 - 控制和从锁定问题中恢复会成为问题。

## 搜索

该类`IndexSearcher`用于搜索。这在只读模式下可以从您的基于服务的代码中完成。我认为没有必要为此创建一组单独的 WCF 方法。

## 优化

可能需要根据卷定期优化索引的性能。再次在单独的过程中建立索引，您可以每晚、每周或任何需要的时间安排优化。优化是通过调用一种方法来完成的。

## 索引新数据

如何以及何时让索引过程为新数据建立索引……我不知道你在索引什么数据，所以很难说。在我的场景中，我有负责输入数据的 WCF 方法 - 大量。我要求尽快将收到的数据用于搜索。所以，

我的模型层有一个通知层，当成功提交所需类型的新记录时，会在 MSMQ 的本地队列中插入一条简单的通知消息。

MSMQ 的原因是队列是持久的和事务性的，并且即使在系统重新启动崩溃后，其中的任何消息都可用 - 让我永远不会（咳嗽！）丢失任何消息。

索引服务接收通知，构建 Lucene`Document`并对数据进行索引。

还可以通过删除现有索引并爬取 Db 来触发索引服务以执行完整的重新索引。

**编辑：**

示例架构：

WCF 服务方法将数据提交到模型层。模型层通知侦听客户端在项目上成功发生了 CRUD 操作。侦听客户端在队列中发布通知。

Windows 服务处理数据索引，监视索引请求队列。

ASP.Net 应用程序提供具有搜索功能的用户界面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T03:24:03.027

您可以简单地禁用应用程序池回收并在 IIS 中托管您的应用程序/服务。要禁用配置更改的回收，请使用 disallowRotationOnConfigChange 参数。

您还可以将应用程序分为两部分：索引更新和搜索。

处理来自 Windows 服务的索引更新，并让您的 IIS 部分处理搜索（只读）。您可以通过一种机制来检测索引更新并刷新`IndexSearchers`. 这样，如果您担心使用服务的性能损失，它不会影响搜索时间，这对用户来说是重要的方面。使用此配置，您甚至可以拥有一个主索引更新节点，并在场中的不同 Web 服务器之间分配搜索。唯一的缺点是你没有类中内置的近乎实时的搜索功能`IndexWriter`。

[http://wiki.apache.org/lucene-java/NearRealtimeSearch](http://wiki.apache.org/lucene-java/NearRealtimeSearch)

话虽如此，我从来没有遇到过通过 WCF 服务公开 Lucene 功能的设置的性能问题，尤其是当您使用 NetNamedPipe 在同一台机器上或使用 NetTcp 在本地 LAN 上运行时。

# google-apps-script - 通过应用程序脚本邮件文档

> ID：12269369
> 
> 赞同：2
> 
> 时间：2012-09-04T18:30:23.767
> 
> 标签：google-apps-script

可以通过应用程序脚本邮寄谷歌文档的内容吗？我可以看到如何邮寄指向文档的链接，如果收件人有权访问，该链接可以正常工作。

可以手动执行此操作 - 选中文档 - 从更多.. 按钮选择共享... 然后作为附件发送电子邮件... - 从下一个屏幕选择附件作为下拉菜单，然后选择将项目本身粘贴到电子邮件中.

但是，我无法弄清楚如何通过脚本来做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T20:07:47.140

[这相当简单，互联网上](http://googleappsdeveloper.blogspot.be/2011/10/4-ways-to-do-mail-merge-using-google.html)有一些可用的示例，但基本上这里是如何继续将其作为 pdf 附件发送：

```
var docName = DocumentApp.openById(docID).getName();
var pdf = DocsList.getFileById(docID).getAs('application/pdf').getBytes();
var attach = {fileName: docName+".pdf",content:pdf, mimeType:'application/pdf'};
MailApp.sendEmail(emailadress, 'Your document as PDF ('+docName+')', 'see attachment', {attachments:[attach]}); 
```

我希望这个例子足够清楚。

**编辑：**根据您的评论，我认为[Henrique](http://productforums.google.com/forum/#!searchin/apps-script/convert%2420html/apps-script/gjEVtRd-kIo/rrRPCq4hRAQJ)在旧 Google 群组论坛上的这篇文章应该可以满足您的需求。（这是一种解决方法，我在许多脚本中使用了很多，而且效果很好......唯一烦人的细节是它需要从脚本编辑器授权（不是通常的红色边框弹出窗口）。

这是怎么回事：

```
function emailDocTest() {
  var id = 'Doc-Very-Long-ID-Here';
  var url = 'https://docs.google.com/feeds/';
  var doc = UrlFetchApp.fetch(url+'download/documents/Export?exportFormat=html&format=html&id='+id,
                              googleOAuth_('docs',url)).getContentText();
  var emailAdress = Session.getEffectiveUser().getEmail();
  MailApp.sendEmail(emailAdress, 'test doc send by mail as html', 'html only', {htmlBody:doc});
}

function googleOAuth_(name,scope) {
  var oAuthConfig = UrlFetchApp.addOAuthService(name);
  oAuthConfig.setRequestTokenUrl("https://www.google.com/accounts/OAuthGetRequestToken?scope="+scope);
  oAuthConfig.setAuthorizationUrl("https://www.google.com/accounts/OAuthAuthorizeToken");
  oAuthConfig.setAccessTokenUrl("https://www.google.com/accounts/OAuthGetAccessToken");
  oAuthConfig.setConsumerKey('anonymous');
  oAuthConfig.setConsumerSecret('anonymous');
  return {oAuthServiceName:name, oAuthUseToken:"always"};
} 
```

# javascript - 将 jsp 重定向到 servlet 然后到下一页

> ID：12269370
> 
> 赞同：1
> 
> 时间：2012-09-04T18:30:32.647
> 
> 标签：javascript, html, jsp, url, redirect

Page1：我有一个 JSP 页面表单来创建一个新项目。我单击提交并将其重定向到服务器端 JSP 页面。但是当我在浏览器中测试时，提交后我看到一个空白页面。我想在提交后将其重定向到 page2，其中有一个列表框并突出显示新创建的项目。

有人可以告诉我如何做这两件事 - 1\. 重定向 page1.jsp -> 服务器 JSP -> page2.jsp（我想知道如何将它重定向到 page2.jsp，我完成了 2 个步骤） 2\. 我应该能够在列表框中突出显示新创建的项目。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T12:44:13.170

在 serverJsp.jsp 的最后添加此代码（在您完成所有其他代码之后）。

```
response.sendRedirect("page2.jsp"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T19:10:43.380

我建议转发到 java servlet，而不是“服务器端 JSP”......一旦你这样做了，你可以在 doGet 或 doPost 方法的主体中处理你需要的任何逻辑，然后调用响应。 redirect(page) 转发到您想要的最终 jsp 端点。

同样，我相信，您可以在“服务器端 JSP”上的脚本中调用“response.redirect(page)”。

# objective-c - 如何在不使用全局变量的情况下在类之间共享值？

> ID：12269374
> 
> 赞同：1
> 
> 时间：2012-09-04T18:30:44.257
> 
> 标签：objective-c, ios, cocoa-touch

我构建了 5 个 UITableViews：*Continent、Country、Subcountry、Region*和*Subregion*。

每个人的数据都`UITableView`存储在数据库中。

在每次导航中，我都会检索基本数据并将 ( `prepareToSegue`)`UITableView`与我在每个类中定义的一组标记变量一起传递给下一个。都是相似的。

```
Continent(country.ContinentID=self.continentID) 
       --> Country (region.CountryID=self.countryID) 
```

我有一种感觉，我做错了，以某种丑陋的方式。你能建议我如何更聪明地完成这项任务，让我们假设，以专业的方式吗？我想在每个班级中摆脱这一束 int vars。

PS请不要建议使用全局变量。[我在这里](https://stackoverflow.com/questions/357187/when-are-global-variables-acceptable)读到了它们，全局变量被定义为比`goto`声明更邪恶。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T18:41:45.810

一种可能的解决方案是通过一个单独的类创建所有控制器，该类将跟踪基本数据并在创建期间根据需要将它们传递给控制器​​。我[在 GitHub 上的示例 Xcode 项目](http://github.com/zoul/Singletons-Suck)中对此进行了说明。远离单例，它们只不过是被美化的全局变量，并且有很多反对它们的好论据（其中一些在[这篇博](http://zmotula.tumblr.com/post/1390385240/why-singletons-suck)文中进行了解释）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T18:42:45.550

我会推荐 Singleton 设计模式来满足您的需求 - 创建一个“DataManager”来保存和维护所有数据对象，以便您可以从控制器的任何位置访问它们很方便，如果您[正确](http://lukeredpath.co.uk/blog/a-note-on-objective-c-singletons.html)实现它，它可以确保持久性和良好的表现。

# c# - 为什么 DataGridView 在点击选项卡或向下箭头时显示无效的底行并隐藏顶行，我该如何防止它？

> ID：12269377
> 
> 赞同：1
> 
> 时间：2012-09-04T18:30:45.487
> 
> 标签：c#, winforms, datagridview

我有一个 DataGridView，如果我在最后一行按向下箭头或 Tab 键，则会显示一个不存在的底行（它只是一个灰色的水平“质量”），它隐藏顶行/将其滚动到视图之外.

我不喜欢这个。我该如何预防？

## 更新

我在创建和填充代码之后添加了这段代码，它没有任何区别：

```
int rowHeight = dataGridViewPlatypus.Rows.GetRowsHeight(DataGridViewElementStates.Displayed);   
int colWidth = dataGridViewPlatypus.Columns.GetColumnsWidth(DataGridViewElementStates.Displayed);
dataGridViewPlatypus.Size = new Size(colWidth, rowHeight); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T12:43:55.990

要根据数据源的大小隐藏，您只需修改 DataGridView 的行大小。

喜欢

```
dataGridView1.Size = new System.Drawing.Size(columnSize, rowSize); 
```

# haskell - 从哪里开始阅读 GHC 的源代码

> ID：12269390
> 
> 赞同：23
> 
> 时间：2012-09-04T18:32:09.853
> 
> 标签：haskell, ghc

我正在尝试了解 GHC 的各个方面是如何实现的，例如类型推断、模式匹配和其他代码转换。

然而，代码库相当大，文件名使用了很多首字母缩略词（simpl、stg、stranal...）。这些是什么意思，代码是如何组织的？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-05T01:00:05.223

正如 hammar 所说，[GHC 评论](http://hackage.haskell.org/trac/ghc/wiki/Commentary)可能是了解 GHC 本身的最佳起点。这确实假设了一些编译器的先验知识，但是如果您的主要兴趣是修改 GHC，您可能只需具备基本的 CS 背景即可。

如果您对 GHC 背后的原理更感兴趣，例如，如果您想学习如何编写*自己的*编译器，您可能会更好地[阅读 Simon Peyton-Jones 关于相关主题的无数出版物](http://research.microsoft.com/en-us/um/people/simonpj/papers/papers.html)，包括[整本书关于实现函数式语言](http://research.microsoft.com/en-us/um/people/simonpj/papers/slpj-book-1987/index.htm)和一本介绍非严格函数式语言实现的[“教程”书。](http://research.microsoft.com/en-us/um/people/simonpj/papers/pj-lester-book/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-04T23:39:08.580

[GHC 评论](http://hackage.haskell.org/trac/ghc/wiki/Commentary)是一个很好的起点。

# php - 我在编写 SQL 查询时遇到问题

> ID：12269394
> 
> 赞同：1
> 
> 时间：2012-09-04T18:32:23.630
> 
> 标签：php, sql

我有一个这样的sql查询......

```
SELECT c.clientid, c.clientname, c.billingdate, 
       (SELECT ifnull(sum(total), 0) 
          FROM invoice i
         WHERE i.client = c.clientid AND i.isdeleted = 0) -
       (SELECT ifnull(sum(p.amount), 0) 
          FROM payment p
         INNER JOIN invoice i ON p.invoice = i.invoiceid
         WHERE i.client = c.clientid and i.isdeleted = 0) as balance, 
        CASE c.isactive+0 WHEN '1' THEN 'Stop'
                                   ELSE 'Start' END as Active
FROM client c
ORDER BY clientname 
```

这工作正常，没有错误，但请注意这部分....

```
(SELECT ifnull(sum(total), 0) 
          FROM invoice i
         WHERE i.client = c.clientid AND i.isdeleted = 0) -(SELECT ifnull(sum(p.amount), 0) 
   FROM payment p
  INNER JOIN invoice i ON p.invoice = i.invoiceid
  WHERE i.client = c.clientid AND i.isdeleted = 0) as balance 
```

我写了一个PHP脚本...

```
if($remaining < 0){
    $remaining = $row['total'];
}else{
    $remaining = $remaining + $row['total'];
} 
```

我想要做的是将我在 PHP 中编写的内容合并到我的 SQL 查询中，但我之前从未使用 if 语句编写过 SQL 查询（如果允许的话）。如何将我的 PHP 脚本合并到我的 SQL 查询中？有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T19:00:40.230

没有`if`，但是有`case`它可以让你做几乎相同的事情。您已经`case`在查询中使用了 a，所以我想您知道它是如何工作的。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T19:00:29.377

您可以包装您的结果并使用它。确保总数和剩余是结果的一部分。

```
SELECT tt.clientid, tt.clientname, tt.billingdate, tt.total, tt.remaining, tt.active 
  FROM (
            ... here goes all of your select but the the order by 
       ) tt
ORDER BY tt.clientid 
```

有了这个结构，你可以做你在 PHP 中所做的事情

```
SELECT tt.clientid, tt.clientname, tt.billingdate, tt.total, tt.active,
       CASE WHEN tt.remaining < 0 then tt.total
                                  else tt.remaining - tt.total
            END as remaining
  FROM (
            ... here goes all of your select make sure you select a total and a remaining
       ) tt
ORDER BY tt.clientid 
```

所以你要做的是实际创建一个临时视图。不确定您的数据模型，但我认为看起来像这样

```
SELECT tt.clientid, tt.clientname, tt.billingdate, tt.total, tt.active,
       CASE WHEN tt.remaining < 0 then tt.total
                                  else tt.remaining - tt.total
            END as remaining
 FROM (
    SELECT c.clientid, c.clientname, c.billingdate, 
       (SELECT ifnull(sum(total), 0) 
          FROM invoice i
         WHERE i.client = c.clientid AND i.isdeleted = 0) as total,
       (SELECT ifnull(sum(total), 0) 
          FROM invoice i
         WHERE i.client = c.clientid AND i.isdeleted = 0) -
       (SELECT ifnull(sum(p.amount), 0) 
          FROM payment p
         INNER JOIN invoice i ON p.invoice = i.invoiceid
         WHERE i.client = c.clientid and i.isdeleted = 0) as remaining, 
        CASE c.isactive+0 WHEN '1' THEN 'Stop'
                                   ELSE 'Start' END as Active
      FROM client c
      ) TT
ORDER BY clientname 
```

# sqlite - SQL 结果返回未定义的值

> ID：12269396
> 
> 赞同：0
> 
> 时间：2012-09-04T18:32:34.177
> 
> 标签：sqlite, actionscript-3, apache-flex, flex4, flex3

我有一张记录分数的表。

当我使用这个查询分数的最大值时：

```
selectStmt = new SQLStatement();
selectStmt.sqlConnection = conn;
selectStmt.text="SELECT MIN(score) FROM highscores";
selectStmt.execute();

result = selectStmt.getResult();
    var data:Object = (result.data);
    for (var i:int = 0; i < data.length; i++) 
    { 
        var row:Object = result.data[i]; 
        var output:String = "score: " + row.score;  
        trace(output);
    } 
```

输出返回一个未定义的值。

如何获得表格中的最高分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T12:42:07.773

尝试`selectStmt.text="SELECT MAX(score) AS maxScore FROM highscores";`

# windows - 如何在 Web 应用程序的客户端执行 Windows 命令？

> ID：12269397
> 
> 赞同：0
> 
> 时间：2012-09-04T18:32:38.803
> 
> 标签：windows, web-applications, command, client-side, exe

有没有办法从浏览器/客户端的 Web 应用程序调用 Windows 命令（即：exe 文件）？也许通过安装浏览器插件或客户端应用程序？我意识到 Web 浏览器的沙盒化非常好，但这只是我们部门的一个内部应用程序，所以暂时将所有安全风险放在一边。如果是这样，如何做到这一点？

这用于直接链接到托管来自 Web 应用程序的呼叫票证的 Windows 应用程序，以及特定的呼叫 ID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T21:48:15.430

我相信你必须在浏览器中安装一个插件。这将是 IE 的 ActiveX 对象或所有其他浏览器的 NPAPI 插件。

您不能因为它是一个内部应用程序而将安全隐患放在一边。如果您安装了一个允许页面发出任意命令的浏览器插件，那么您必须担心其他页面试图利用该插件。一个常见的预防措施是让插件在执行操作之前检查页面的域（例如，确保它来自您的公司域）。这通常称为站点锁定。

另一种安全方法是不让插件从页面中继任意命令，而是执行插件本身内置的一组有限命令中的一个。这可以极大地减少攻击面。

# php - 用于数组搜索的 ajax

> ID：12269399
> 
> 赞同：2
> 
> 时间：2012-09-04T18:32:46.907
> 
> 标签：php, sql, ajax, jquery-autocomplete

我的视图代码是这样的

```
<?php for($i = 1; $i <=10; $i++):?>
        <tr>
            <td width="10">
                <?php echo $i;?>
            </td>

            <td>
            <input size="10" type="text" name="code[]" value="<?php echo '';?>" id="code" />
            </td>
            <td width="20%">
                <name="product[]" value="<?php echo '';?>" id="product"/>
            </td>
            <td>
                <input size="10"type="text" name="rate[]" value="<?php echo '';?>" id="rate" />
            </td>
            <td>
                <input size="10" type="text" name="quantity[]" value="<?php echo '';?>" id="quantity" />
            </td>
            <td width="15%">
                <name="total[]" value="<?php echo '';?>" id="total"/>
            </td>
            <td>
                <input size="10" type="text" name="sell[]" value="<?php echo '';?>" id="sell" />
            </td>

        </tr>
        <?php endfor;?> 
```

在代码字段中，我只需输入代码，在产品字段中，ajax 将设置相应的产品名称。但主要问题是在第二行或第三行输入任何代码时，它也会为第一行设置产品。任何人都可以解决这个问题在ajax中同名的数组输入。我在 codigniter 框架中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T18:41:39.073

您在每一行中为相似的 HTML 标记使用相同的 ID。这是一个禁忌；ID 应在整个文档中被认为是唯一的。

将您的 ID 替换为类：

```
<td>
    <input size="10" type="text" name="code[]" value="<?php echo '';?>" class="code" />
</td> 
```

或将变量附加`$i`到每个 ID 以便它们是唯一的：

```
<td>
    <input size="10" type="text" name="code[]" value="<?php echo '';?>" id="code_<?php echo $i ?>" />
</td> 
```

并相应地调整您的 JavaScript。

# apache - 仅来自一个域的 Apache 子域

> ID：12269403
> 
> 赞同：1
> 
> 时间：2012-09-04T18:33:00.383
> 
> 标签：apache, subdomain, virtualhost

我在配置我的 apache2 服务器时遇到问题：所有域 bla.org .net .com 都路由到服务器我想要的是：所有这些访问都应该路由到一个目录，除了 dev.bla.org 这个应该是路由到另一个目录，但仅适用于 .org tld

我的配置如下：

```
<VirtualHost *:80>
    ServerAdmin webmaster@localhost
    DocumentRoot /var/dir1
    ...
</VirtualHost>
<VirtualHost *:80>
    ServerName dev.bla.org
    ServerAlias dev
    DocumentRoot /var/dir2
    ...
</VirtualHost> 
```

但它没有做我想要的。它还将 dev.bla.com 等路由到`dir2`. 如何将其限制为 .org？ `<VirtualHost *.org:80>`也不行。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T10:20:39.290

```
<VirtualHost *:80>
    ServerAdmin webmaster@bla.net
    ServerAlias bla.net *.bla.net bla.org
    DocumentRoot /var/dir1
    ...
</VirtualHost>
<VirtualHost *:80>
    ServerName dev.bla.org
    ServerAlias dev.bla.org
    DocumentRoot /var/dir2
    ...
</VirtualHost> 
```

# javascript - 如何使用 Javascript 从 URL 参数自动填充文本字段

> ID：12269408
> 
> 赞同：3
> 
> 时间：2012-09-04T18:33:33.217
> 
> 标签：javascript

这个页面（[http://forums.iis.net/t/1153336.aspx](http://forums.iis.net/t/1153336.aspx)）解释了如何做我想做的事，除了由于我们系统的限制，我只能输入javascript来提取这些信息文本框。有人可以解释我如何使用 URL 中的参数来自动填充文本框吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-04T18:39:30.817

您可以使用`location.search`访问 url 查询并将其注入您的文本值

如果您的 url 是`/page.htm?x=y`，您可以使用以下代码设置文本字段的值。[这篇文章](https://stackoverflow.com/questions/7825329/get-querystring-with-dojo/7825382#7825382)告诉你如何从查询字符串中获取值

```
// See the link above for getUrlParams
var params = getUrlParams();
document.getElementById('myTextFieldId').value = params.x; 
```

请注意，您链接到的示例存在[http://en.wikipedia.org/wiki/Cross-site_scripting](http://en.wikipedia.org/wiki/Cross-site_scripting)漏洞。为避免这种情况，您必须在将 HTML 输出到屏幕之前对其进行转义

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T18:37:52.390

您应该能够在 js 中使用 windows.location 做类似的事情

[http://css-tricks.com/snippets/javascript/get-url-and-url-parts-in-javascript/](http://css-tricks.com/snippets/javascript/get-url-and-url-parts-in-javascript/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T18:38:02.957

您可以轻松地使用[此问题](https://stackoverflow.com/questions/901115/get-query-string-values-in-javascript)的答案来使用 JavaScript 从 URL 获取参数。然后像这样设置文本框的值：

```
this.form.elements["element_name"].value = 'Some Value'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-26T01:50:56.943

如果您想要一个快速的解决方案，您可能有兴趣使用此代码片段（灵感取自[此处](https://gist.github.com/erberg-snippets/7328168#gistcomment-1564194)，但由我自己修改）：

```
function getURLParameter(e) {
  return decodeURI((new RegExp(e + "=(.+?)(&|$)").exec(location.search) || [, ""])[1]);
}

if (getURLParameter("inputKey") === "") {
  console.log("No URL param value found.");
} else {
  document.getElementById("inputBox").value = getURLParameter("inputkey");
} 
```

假设您的网址是`example.com?inputKey=hello&nbsp;world`. 如果是这样，使用上面的代码将使用短语“Hello world”填充 ID 为“inputBox”的输入。如果 URL 只是`example.com`，它不会预先填充该框，而只是表现得好像什么都没有（显示占位符等）。

# c# - Visual Studio 2012 Fakes - 如何验证方法是否被调用？

> ID：12269409
> 
> 赞同：6
> 
> 时间：2012-09-04T18:33:34.373
> 
> 标签：c#, unit-testing, visual-studio-2012, mocking, moq

由于使用 Moq，我习惯于将模拟设置为可验证。如您所知，当您想确保被测代码实际调用依赖项上的方法时，这很方便。

例如起订量：

```
// Set up the Moq mock to be verified
mockDependency.Setup(x => x.SomethingImportantToKnow()).Verifiable("Darn, this did not get called.");
target = new ClassUnderTest(mockDependency);
// Act on the object under test, using the mock dependency
target.DoThingsThatShouldUseTheDependency();
// Verify the mock was called.
mockDependency.Verify(); 
```

我一直在使用 VS2012 的“Fakes Framework”（因为不知道它的更好名称），它非常漂亮，我开始更喜欢它而不是 Moq，因为它看起来更有表现力并且使 Shims 变得容易。但是，我无法弄清楚如何重现类似于 Moq 的可验证/验证实现的行为。我在 Stubs 上找到了 InstanceObserver 属性，这听起来可能是我想要的，但截至 2012 年 9 月 4 日还没有文档，而且我不清楚如何使用它，如果它是正确的。

任何人都可以为我指出正确的方向，比如使用 VS2012 的 Fakes 进行 Moq Verifiable/Verify 之类的事情吗？

-- 2012 年 9 月 5 日编辑 --
我意识到了问题的解决方案，但我仍然想知道是否有内置方法可以使用 VS2012 Fakes 来解决这个问题。如果可以的话，我会让这个开放一段时间，让有人声称。这是我的基本想法（如果没有编译，请道歉）。

```
[TestClass]
public class ClassUnderTestTests
{
    private class Arrangements
    {
        public ClassUnderTest Target;
        public bool SomethingImportantToKnowWasCalled = false;  // Create a flag!
        public Arrangements()
        {
            var mockDependency = new Fakes.StubIDependency  // Fakes sweetness.
            {
                SomethingImportantToKnow = () => { SomethingImportantToKnowWasCalled = true; }  // Set the flag!
            }
            Target = new ClassUnderTest(mockDependency);
        }
    }

    [TestMethod]
    public void DoThingThatShouldUseTheDependency_Condition_Result()
    {
        // arrange
        var arrangements = new Arrangements();
        // act
        arrangements.Target.DoThingThatShouldUseTheDependency();
        // assert
        Assert.IsTrue(arrangements.SomethingImportantToKnowWasCalled);  // Voila!
    }
} 
```

-- 9/5/12 结束编辑 --

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T18:10:19.057

由于我没有听到更好的解决方案，我将 9/5/12 的编辑称为目前最好的方法。

**编辑** 找到描述最佳实践的神奇文章。[http://www.peterprovost.org/blog/2012/11/29/visual-studio-2012-fakes-part-3/](http://www.peterprovost.org/blog/2012/11/29/visual-studio-2012-fakes-part-3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T17:56:47.433

尽管它在复杂场景中可能有意义，但您不必使用单独的 (Arrangements) 类来存储有关被调用方法的信息。这是验证是否使用 Fakes 调用方法的更简单方法，它将信息存储在局部变量中，而不是单独类的字段中。像您的示例一样，它暗示 ClassUnderTest 调用 IDependency 接口的方法。

```
[TestMethod]
public void DoThingThatShouldUseTheDependency_Condition_Result()
{
    // arrange
    bool dependencyCalled = false;
    var dependency = new Fakes.StubIDependency()
    {
        DoStuff = () => dependencyCalled = true;
    }
    var target = new ClassUnderTest(dependency);

    // act
    target.DoStuff();

    // assert
    Assert.IsTrue(dependencyCalled);
} 
```

# javascript - 是否有任何具有良好 QUnit（或 JSUnit）测试用例的开源 Web 应用程序？

> ID：12269411
> 
> 赞同：1
> 
> 时间：2012-09-04T18:33:39.113
> 
> 标签：javascript, unit-testing, qunit

对于一个研究项目，我们正在寻找带有 QUnit 或 JSUnit 单元测试的基于 JavaScript 的 Web 应用程序。

到目前为止，我们的搜索只检索到了 Web 上 JavaScript 代码的非常简单的不完整 qunit 测试用例。提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T18:42:37.727

你看过 jQuery 吗？[https://github.com/jquery/jquery/tree/master/test](https://github.com/jquery/jquery/tree/master/test)

# python - M2Crypto RSA Unicode 字符串的编码方式与字节字符串不同

> ID：12269412
> 
> 赞同：0
> 
> 时间：2012-09-04T18:33:41.727
> 
> 标签：python, encryption, unicode, m2crypto

我正在使用带有 PKCS1 填充的 Python M2Crypto 的 RSA 对电子邮件进行编码以与外部网站的 API 一起使用。使用 unicode 时，编码的电子邮件没有从 API 返回结果，但是当我使用 str(unicode_email) 时，我收到了正确的信息。

我的印象是，在这种情况下，字符串的 unicode 和字节表示都应该有效。有谁知道为什么 unicode 失败？

参考代码：

```
from M2Crypto import RSA
email = u'email@example.com'  #fails
email = str(email)  # succeeds 
rsa = RSA.load_pub_key('rsa_pubkey.pem')
result = rsa.public_encrypt(email, RSA.pkcs1_padding).encode('base64') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T18:52:07.500

M2Crypto 模块专门处理不透明字节，它们是 0 到 255 之间的值，表示为 python`str`类型。

Python 2.x`str`类型由这样的字节组成，但`unicode`类型完全不同。[`.decode()`您可以通过使用该方法](http://docs.python.org/library/stdtypes.html#str.decode)及其镜像方法轻松地在两者之间进行转换[`.encode()`](http://docs.python.org/library/stdtypes.html#str.encode)。

当你调用`str()`一个`unicode`对象时，它通过应用默认编码进行转换，本质上它调用`email.encode(sys.getdefaultencoding())`. 这对您的全 ASCII 电子邮件地址来说很好，但您肯定会遇到`UnicodeEncodeError`其他任何异常。最好坚持只使用显式方法。

请注意，您可能必须设置在您发送的电子邮件的 MIME 标头上使用的编码。

我强烈建议您阅读[Python Unicode HOWTO](http://docs.python.org/howto/unicode.html)中的所有内容。

# c++ - 项目列表中的组合

> ID：12269420
> 
> 赞同：0
> 
> 时间：2012-09-04T18:34:37.027
> 
> 标签：c++, list, combinations, combinatorics

我有一个集合列表：
{AB}
{CDE}
{FG}

行数可以是任意的，一行中的项目数也可以是任意的。

我需要得到这个：
{ACF ACG ADF ADG AEF AEG BCF BCG BDF BDG BEF BEG}

有人可以指出一些可以做到这一点的算法，或者至少是问题的名称 - 如果有的话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T18:01:45.103

其实很简单：

这是C++中的解决方案，如果第一组是A，第二组是B，第三组是C；

```
cout << "{ ";
for( int i=0; i<a_size; ++i ) {
  for( int j=0; j<b_size; ++j ) {
    for( int k=0; k<c_size; ++k ) {
      cout << A[ i ] << B[ j ] << C[ k ] << " ";
    }
  }
}
cout << " }\n"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T18:44:21.923

您可以创建一个递归函数，该函数接受列表的原始集合和集合中列表的当前索引。然后它将遍历列表中的项目，并在每个项目上使用增加的索引调用自身。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T17:55:45.043

在你的例子中，你说你只需要这个：

{ACF ACG ADF ADG AEF AEG BCF BCG BDF BDG BEF BEG}

如果您还需要所有其他组合，那么您也许可以使用我编写的一个类来处理处理二项式系数的常用函数，这是您的问题所属的问题类型。它执行以下任务：

1.  将任何 N 选择 K 的所有 K 索引以良好的格式输出到文件。K-indexes 可以替换为更具描述性的字符串或字母。这种方法使得解决这类问题变得非常简单。

2.  将 K 索引转换为已排序二项式系数表中条目的正确索引。这种技术比依赖迭代的旧已发布技术快得多。它通过使用帕斯卡三角形固有的数学属性来做到这一点。我的论文谈到了这一点。我相信我是第一个发现并发表这种技术的人，但我可能是错的。

3.  将已排序二项式系数表中的索引转换为相应的 K 索引。

4.  使用[Mark Dominus](http://blog.plover.com/math/choose.html)方法计算二项式系数，它不太可能溢出并且适用于更大的数字。

5.  该类是用 .NET C# 编写的，并提供了一种通过使用通用列表来管理与问题相关的对象（如果有）的方法。此类的构造函数采用一个名为 InitTable 的 bool 值，当它为 true 时，将创建一个通用列表来保存要管理的对象。如果此值为 false，则不会创建表。无需创建表即可执行上述 4 种方法。提供了访问器方法来访问表。

6.  有一个关联的测试类，它显示了如何使用该类及其方法。它已经用 2 个案例进行了广泛的测试，并且没有已知的错误。

要了解此类并下载代码，请参阅[制表二项式系数](http://tablizingthebinomialcoeff.wordpress.com/)。

将此类转换为您选择的语言应该不难。

# android - 当视图获得对 android 的关注时，如何显示软键盘？

> ID：12269424
> 
> 赞同：1
> 
> 时间：2012-09-04T18:35:15.533
> 
> 标签：android

当我的活动开始时，我的 edittext 会自动获得焦点，但不会出现软键盘。此外，当我以编程方式调用`.requestFocus()`视图时，它会获得焦点，但软键盘再次没有出现。一个视图示例如下：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/LinearLayout"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical"
android:padding="10dp">

 <EditText
    android:id="@+id/editTextTransactionName"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:hint="@string/edittext_description"
    android:focusable="true"
    android:focusableInTouchMode="true"
    android:imeOptions="actionNext"
    android:inputType="text"/> 
</LinearLayout> 
```

软键盘似乎只有在我单击时才会出现。这是否有理由成为默认行为？打开用作表单的活动时，我直观地希望键盘出现，以便您可以立即输入数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T19:38:42.707

考虑阅读以下内容： [Android 操作栏选项卡和键盘焦点](https://stackoverflow.com/questions/8087715/android-actionbar-tabs-and-keyboard-focus)

requestFocus 非常不可靠。

显然这不是默认行为。如果您真的希望键盘自动出现，请在您的 中模拟“点击” `EditText`，这对我有用（这比调用更安全，`showSoftInput`因为 的行为不可靠`requestFocus`，而且您不需要对键盘进行微观管理）：

```
EditText tv = (EditText)findViewById(R.id.editText);
tv.post(new Runnable() {

            @Override
            public void run() {
                Log.d("RUN", "requesting focus in runnable");
                tv.requestFocusFromTouch();
                tv.dispatchTouchEvent(MotionEvent.obtain(SystemClock.uptimeMillis(), SystemClock.uptimeMillis(), MotionEvent.ACTION_DOWN , tv.getWidth(), tv.getHeight(), 0));
                tv.dispatchTouchEvent(MotionEvent.obtain(SystemClock.uptimeMillis(), SystemClock.uptimeMillis(), MotionEvent.ACTION_UP , tv.getWidth(), tv.getHeight(), 0));
            }
        }); 
```

我认为键盘没有打开的原因是用户必须有机会在决定首先从哪里开始编辑之前看到整个窗口。

# linked-list - Redis 数据结构空间要求

> ID：12269429
> 
> 赞同：3
> 
> 时间：2012-09-04T18:35:42.907
> 
> 标签：linked-list, redis, sortedset, space-complexity

redis中排序集和列表在空间上有什么区别？我的猜测是排序集是某种平衡二叉树，而列表是链表。这意味着在我为它们中的每一个编码的三个值之上，键、分数、值，虽然我会将链表的分数和值混合在一起，但开销是链表需要跟踪一个另一个节点，并且二叉树需要跟踪两个，因此使用排序集的空间开销为 O(N)。

如果我的值和分数都是长整数，并且指向其他节点的指针也是长整数，那么在 64 位计算机上，单个节点的空间开销似乎从 3 个长整数变为 4 个长整数，即 33%空间的增加。

这是真的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T22:08:55.243

这远远超过你的估计。假设没有使用 ziplists（即您有大量项目）。

Redis 列表是一个经典的双链表：每个项目有 3 个指针（prev,next,value）。

排序集是一个字典加上一个跳过列表。在字典中，项目也将存储 3 个指针（键、值、下一个）。跳过列表内存占用的评估更复杂：每个节点需要 1 个双精度（分数）、2 个指针（obj，backward），加上 n 对（指针，跨度值），其中 n 在 1 到 32 之间。大多数项目只需要 1或2对夫妇。

换句话说，当它不表示为 ziplist 时，排序集是迄今为止开销最大的 Redis 数据结构。与列表相比，内存开销超过 200%（即 3 倍）。

注意：使用 Redis 评估内存消耗的最佳方法是尝试使用伪数据构建一个大列表或排序集，并使用 INFO 获取内存占用。

# c++ - 缓冲区溢出会发生什么？

> ID：12269430
> 
> 赞同：2
> 
> 时间：2012-09-04T18:35:48.737
> 
> 标签：c++, linux, sockets, tcp, buffer

我在某处读到每个 TCP 连接都有自己的 125kB 输出和输入缓冲区。如果这个缓冲区已满，我仍然继续在 linux 上发送数据会怎样？

根据[http://www.kernel.org/doc/man-pages/online/pages/man2/send.2.html](http://www.kernel.org/doc/man-pages/online/pages/man2/send.2.html)数据包只是默默地丢弃，没有通知我。我能做些什么来阻止这种情况发生？有什么方法可以查明我的至少一些数据是否已正确发送，以便我可以在稍后的时间点继续？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-04T18:53:52.933

简短的回答是这样的。TCP 套接字上的“发送”调用只会阻塞，直到 TCP 滑动窗口（或内部队列缓冲区）由于远程端点接收和使用数据而打开。这与尝试将字节写入文件的速度快于磁盘可以保存它的速度没有太大区别。

如果您的套接字配置为非阻塞模式，则 send 将返回 EWOULDBLOCK 或 EAGAIN，直到可以发送数据。标准[poll](http://www.kernel.org/doc/man-pages/online/pages/man2/poll.2.html)、[select](http://www.kernel.org/doc/man-pages/online/pages/man2/select.2.html)和[epoll](http://www.kernel.org/doc/man-pages/online/pages/man4/epoll.4.html)调用将按预期工作，因此您知道何时再次“发送”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T18:38:37.760

我不知道“数据包被丢弃”。我认为更有可能的是程序对 write() 的调用将阻塞或返回失败。

# mysql - 全文 MySQL 搜索 - 返回片段

> ID：12269435
> 
> 赞同：5
> 
> 时间：2012-09-04T18:36:09.787
> 
> 标签：mysql, full-text-search

我有一个包含书籍章节的 MySQL 表。

```
Table: book_chapter
--------------------------
| id | book_id | content |
-------------------------- 
```

我目前可以像这样使用全文搜索来搜索内容：

```
SELECT * FROM book_chapter WHERE book_chapter.book_id="2" AND
MATCH (book_chapter.content) AGAINST ("unicorn hair" IN BOOLEAN MODE) 
```

但是，我想知道是否可以搜索内容并以 30 个字符片段的形式返回结果，以便用户能够感受到要点。例如，如果我搜索“独角兽头发”，我会得到这样的结果：

```
-------------------------------------------------
| id | book_id | content                        |
-------------------------------------------------
| 15 |    2    | it isn't unicorn hair. You kno |
 -------------------------------------------------
| 15 |    2    | chup and unicorn hair in soup  |
 -------------------------------------------------
| 27 |    2    | , should unicorn hair be used  |
 -------------------------------------------------
| 31 |    2    | eware of unicorn hair for bal  | 
```

请注意，同一记录有两个结果。这也可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-07-14T14:49:28.310

Mike Bryant 对查询的改进

如果匹配在字段的开头，则 SUBSTRING 将从结尾开始。

我刚刚添加了一个 IF 语句来修复它

```
SELECT 
    id, 
    book_id, 
    SUBSTRING(
        content, 
        IF(LOCATE("unicorn hair", content) > 10, LOCATE("unicorn hair", content) - 10, 1),
        10 + LENGTH("unicorn hair") + 10
    ) 
FROM 
    book_chapter 
WHERE book_chapter.book_id="2" 
AND MATCH (book_chapter.content) AGAINST ("unicorn hair" IN BOOLEAN MODE) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T18:48:43.880

尝试这样的方法来创建搜索短语的第一个匹配的片段加上它之前的 10 个字符和之后的 10 个字符（这不是 30 个字符的长度，但可能是更好的解决方案，具体取决于搜索短语的长度，即，如果您的搜索短语 > 30 个字符怎么办）。这不能满足您希望在结果集中显示同一记录的多个结果。对于类似的事情，我几乎认为您将是创建存储过程来为您完成工作的最佳服务器。

```
SELECT id, book_id, SUBSTRING(content, LOCATE("unicorn hair", content) - 10, 10 + LENGTH("unicorn hair") + 10) FROM book_chapter WHERE book_chapter.book_id="2" AND
MATCH (book_chapter.content) AGAINST ("unicorn hair" IN BOOLEAN MODE) 
```

显然，您可以将“独角兽头发”替换为您在所有位置的搜索词组。

# c++ - 创建一个可以通过赋值初始化但不可复制的类型

> ID：12269438
> 
> 赞同：2
> 
> 时间：2012-09-04T18:36:29.233
> 
> 标签：c++

我正在寻找一种可以使用其他类型的赋值来初始化但不能复制的类型。这个想法类似于作用域智能指针，因为我希望这种类型的对象在其生命周期内拥有资源，但我也希望能够使用赋值语法。所以在概要中，这就是我想要的：

```
T x = new U; // allowed
T y(new U);  // allowed
T z = x;     // not allowed
T x2(x)      // not allowed 
```

这是我到目前为止所尝试的......

```
#include <boost/noncopyable.hpp>

class U {};

class T : boost::noncopyable {
public:
    T(U *p) : p_(p) {
    }

    ~T() {
        delete p_;
    }

    operator bool() const { return p_ != 0; }

private:
    U *p_;
};

int main() {
    T x = new U; // allowed
    T y(new U);  // allowed
    //T z = x;     // not allowed
    //T x2(x)      // not allowed
} 
```

不幸的是，这会导致错误：

> $ g++ test.cc -o test /usr/include/boost/noncopyable.hpp: 在复制构造函数'T::T(const T&)': /usr/include/boost/noncopyable.hpp:27:7: 错误： 'boost::noncopyable_::noncopyable::noncopyable(const boost::noncopyable_::noncopyable&)' 是私有的 test.cc:6:30: 错误：在这个上下文中 test.cc: 在函数'int main()'中： test.cc:20:12：注意：这里首先需要合成方法 'T::T(const T&)'

**注意：C++11 的移动功能对我来说是不可选择的，因为它必须能够使用不支持 C++11 的相对较旧版本的 gcc 进行编译。**

由于缺乏 C++11 支持，我不确定是否有“好的”解决方案。但我想我会问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T19:40:44.943

如果我对评论的理解是正确的 - 你想要这样的东西：

```
U* create_T() { return new U; }
if (T t = create_T())
{
  // do something with t
} 
```

这里的问题，已经在评论中提到：这种语法`T t = u`只是调用复制构造函数。如果 u 是类型`T`，则它等价于：`T t(u)`。如果`u`像在您的示例中一样，是可转换为`T`( `here by T::T(U*)`) 的另一种类型，则实际上是这样的：`T t(T(u))`。所以在这里你有编译器抱怨的复制构造函数。

没有解决方案，因为这不是有效的`if`语法：

```
if (T i(create_T())) {} 
```

但是，如果没有好的建议，我不会写所有这些；）

您可以使用以下语法忘记复制构造函数的问题：

```
if (U* u = create_T()) {
   T t(u);
   ....
} 
```

顺便说一句，`std::auto_ptr`和你的类型有同样的问题`T`。只需将显式添加到您的`T(U*)`构造函数中，您就会看到与以下内容的相似性`auto_ptr`：

```
class U {};

class T : boost::noncopyable {
public:
    explicit T(U *p) : p_(p) {
    }

    ~T() {
        delete p_;
    }

private:
    U *p_;
};

int main() {
    T x = new U; // allowed
    T y(new U);  // allowed
    std::auto_ptr<U> a = new U;
    std::auto_ptr<U> b(new U);
} 
```

结果是：

```
prog.cpp:25: error: conversion from ‘U*’ to non-scalar type ‘T’ requested
prog.cpp:27: error: conversion from ‘U*’ to non-scalar type ‘std::auto_ptr<U>’ requested 
```

在这里我的[ideone](http://ideone.com/jz3RT)研究...

# node.js - Rhino -> Node.js 通信

> ID：12269444
> 
> 赞同：0
> 
> 时间：2012-09-04T18:37:17.753
> 
> 标签：node.js, ipc, rhino

是否可以在 Rhino 中从 Node.js 调用函数，反之亦然？我想以某种方式启用 Node.js 和 Rhino 之间的通信，即使它们使用不同的 Javascript 引擎。我已经设置了一个 node.js 服务器，我想让服务器与使用 Rhino javascript 引擎的 Java 应用程序交互。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T21:59:42.157

如果你认为你的节点进程是一个正在运行的提供 REST API 的网络服务器（例如通过“restify”包），而你的 Rhino 进程是一个 Java Web 客户端，那么我建议使用 Rhino 代码来调用 REST API 方法（通过Java 钩子）在您的节点网络服务器进程上，可能通过将对象编组为 JSON。希望这可以帮助。

# java - Ivy 依赖配置映射通配符

> ID：12269446
> 
> 赞同：4
> 
> 时间：2012-09-04T18:37:19.117
> 
> 标签：java, maven, dependencies, ivy

在常春藤依赖中，

**Q1。** 和有什么区别

> conf="运行时->编译"

对比

> conf="运行时->编译(*)"

额外的括号通配符有什么作用？

**Q2。**

以下是做什么的？

> conf="编译->编译(*)"

这不是周期性/自依赖吗？将 conf 映射回自身有什么意义？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T19:24:55.303

括号是一个[后备](http://ant.apache.org/ivy/history/2.1.0/ivyfile/dependency.html)：

> 从 1.3 开始，当您不确定依赖项是否具有所需的配置时，可以使用回退机制。您可以向 ivy 表明您想要一种配置，但如果它不存在，请使用另一种配置。指定它的语法在所需的 conf 之后的括号之间添加了备用 conf。例如，
> 
> `test->runtime(default)`
> 意味着在`test`模块的
> `runtime`
> 配置中依赖的conf是必需的，但如果不存在，它将使用
> `default`
> conf代替。如果默认配置不存在，那么它将被视为错误。请注意，* 通配符可以用作后备配置。

对于问题 2：一个 conf 总是这样读：

```
ConfFromThisFile -> ConfFromDependency 
```

所以

```
compile->compile 
```

`compile`会将依赖项的配置映射到`compile`该文件的配置。它没有循环。括号说：如果`compile`依赖项中不存在，则使用`*`.

[有关依赖关系，请参阅 ivy 文档](http://ant.apache.org/ivy/history/2.1.0/ivyfile/dependency.html)的配置映射部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T19:23:22.520

此语法用于依赖回退。`runtime->compile`意味着运行时配置取决于编译配置。编译配置必须存在，否则 Ivy 会报错。但是，`runtime->compile(*)`将首先尝试编译配置以满足依赖关系。但如果 compile 不存在，它将尝试所有其他配置。[有关更多信息，请参阅Ivy 文档](http://ant.apache.org/ivy/history/latest-milestone/ivyfile/dependency.html "常春藤博士")的配置映射部分。

基于此，`compile->compile(*)`将表明编译需要任何（全部？）配置。我猜这`compile->(*)`不是有效的语法，所以额外`compile` 保证使用回退，因为`compile`直到配置 XML 节完成后才定义。

请注意，从文档中不清楚是`(*)`指“任何”还是“所有”配置。所以，我不确定 Ivy 是否会在匹配所有依赖项（如果有的话）的第一个配置处停止，或者它是否会在联合中引入所有其他配置。

# c - `int` 类型大小 int C

> ID：12269447
> 
> 赞同：3
> 
> 时间：2012-09-04T18:37:26.037
> 
> 标签：c, integer, int

> **可能重复：**
> [C 中的 int 总是 32 位吗？](https://stackoverflow.com/questions/1231147/is-int-in-c-always-32-bit)

AFAIK，Pascal 的整数大小取决于平台（在 32 位计算机上它有 32 位，在 64 位计算机上它有 64 位）。

这在 C 中是否相同（我的意思是，在 32 位计算机上它的大小是 32 位，而在 64 位上它是 64 位）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T18:38:40.570

差不多，但编译器有控制权。`sizeof`如果您只想检查环境中发生的情况，请使用运算符。`int64_t`如果您需要确保字节数是固定的并且不将其留给环境/编译器，stddef.h 将包括（我认为在该文件中）之类的类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T18:43:59.797

它不仅取决于处理器架构，还取决于操作系统。C 语言规范没有提到整数类型的大小，因此该任务是语言实现者的工作。在此处查看投票最多的答案以获取更多背景信息：

[在 64 位 Windows 上 long 的位大小是多少？](https://stackoverflow.com/questions/384502/what-is-the-bit-size-of-long-on-64-bit-windows)

总之，在 Linux 和 Windows 上，“int”都是 32 位的。对于其他平台，您必须在他们的 C 编译器文档中检查他们的规范。然而，最佳实践是使用在`<inttypes.h>`-- `uint32_t`, `int32_t`, `uint64_t`,中找到的类型`int64_t`。

在 Windows 上，这有点困难。`inttypes.h`是 C99 的一部分，Visual C++ 不声明其符合性。您可以从[http://code.google.com/p/msinttypes/ 之](http://code.google.com/p/msinttypes/)`inttypes.h`类的项目中获取，或使用-- , , , . 还有 Microsoft 扩展, , , ，您不需要任何额外的头文件。 `<windows.h>``INT32``INT64``UINT32``UINT64``__int32``__int64``__uint32``__uint64`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T18:38:59.290

C 没有定义其整数类型的大小。你必须阅读编译器手册

唯一的规则是 sizeof char <= sizeof short <= sizeof int <= sizeof long

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-04T18:41:47.910

该决定由编译器做出，您可以通过键入以下内容来查看特定情况下整数的大小（以字节为单位）`printf("%d", (int)sizeof(int));`：。

但是，我强烈建议您不要编写依赖于`int`特定数量大小的代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-04T18:39:47.860

这是正确的。这取决于平台。

但是，这些天通常的做法是在`int`32 位或 64 位计算机上制作 32 位。在`long int`64 位计算机上`long long int`类型是 64 位，即使在 32 位计算机上类型也是 64 位。

正如@E_Net4 正确观察到的那样，C++ 标准允许与上述答案有相当大的差异，这仅适用于今天的惯例。（C++ 标准允许这种变化，因为它希望让编译器自由定义`int`，`long int`更不用说`short int`，以最大化特定处理器性能的方式。）

# html - 无法控制 div 内图像的不透明度

> ID：12269454
> 
> 赞同：6
> 
> 时间：2012-09-04T18:37:52.970
> 
> 标签：html, css, opacity

我希望 div 内的图像是不透明的，而 div 是透明的。我尝试设置图像和 div 的不透明度，但它不起作用。

jsFiddle 链接：http: [//jsfiddle.net/2BNEF/10/](http://jsfiddle.net/2BNEF/10/)

我希望图像不透明，文本透明可见。

```
<div id="targetframe">
    It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English. Many desktop publishing packages and web page editors now use Lorem Ipsum as their default model text, and a search for 'lorem ipsum' will uncover many web sites still in their infancy. Various versions have evolved over the years, sometimes
    <div id="target">
        out. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English. Many desktop publishing packages and web page editors now use Lorem Ipsum as their defaul
        <img class="myimage" src="http://www4.picturepush.com/photo/a/1365552/480/trucks-photgraphy/asdf-%2858%29.jpg?v0"/>
    </div>
</div>

#targetframe {
    background: none repeat scroll 0 0 black;
    border: 2px inset grey;
    font-family: Verdana,sans-serif;
    left: 0;
    margin: 0;
    overflow: hidden;
    padding: 0;
    position: absolute;
    top: 0;
    opacity: 0.5;
}
#target {
    background: none repeat scroll 0 0 transparent;
    height: 100%;
    left: 0;
    position: relative;
    top: 0;
    width: 100%;
    z-index: 0;
}
.myimage {
    opacity: 1;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-04T18:42:48.123

如果你设置`opacity`一个元素，那么它会被该元素的所有后代（孩子，所有孩子的孩子......）继承，*你无法阻止它*。

在这种情况下，您可以只为 div 使用 RGBa 背景（`rgba(0,0,0,.5)`而不是黑色 - [**DEMO**](http://jsfiddle.net/thebabydino/2BNEF/16/)）。RGBa 有很好的支持 - 唯一不支持它的浏览器是 IE8 和更旧的浏览器，对于那些你可以使用`filter`渐变的浏览器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T18:46:14.417

正如@Ana所说，不透明度由父母的所有孩子继承
您可以组合RGBa并将不透明度设置为Div的所有孩子

```
#targetframe > * {
    opacity: 0.5;
} 
```

而不是指定您的图像必须是不透明的

```
.myimage {
    opacity: 1;
} 
```

[http://jsfiddle.net/2BNEF/15/](http://jsfiddle.net/2BNEF/15/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T18:53:49.603

或者只是将容器作为具有所需高度和宽度的绝对定位 div 并定位图像，并为图像分配更高的 z-index，然后分配所需的不透明度。

# ruby-on-rails - 参数数量错误（1 代表 0）

> ID：12269465
> 
> 赞同：0
> 
> 时间：2012-09-04T18:38:52.477
> 
> 标签：ruby-on-rails, mocking

我正在设置一个测试，应该期望调用两个“订阅者”实例：

```
 it "sends out sms to all the subscribers" do
    @user.subscribers.create!
    @user.subscribers.create!

    Subscriber.any_instance.should_receive(:send_message).with(@message).times(2)
    post :create, {:broadcast => valid_attributes}   
  end 
```

实际代码是：

```
 def create
    @broadcast = Broadcast.new(params[:broadcast])
    current_user.subscribers.each do |subscriber|
      subscriber.send_message(@broadcast.message)
    end

    ... 
```

错误：

```
 Failure/Error: post :create, {:broadcast => valid_attributes}
     ArgumentError:
       wrong number of arguments (1 for 0)
     # ./app/controllers/broadcasts_controller.rb:41:in `block in create'
     # ./app/controllers/broadcasts_controller.rb:40:in `create'
     # ./spec/controllers/broadcasts_controller_spec.rb:73:in `block (4 levels) in <top (required)>' 
```

出于某种原因，如果我添加行： `Subscriber.any_instance.should_receive(:send_message).with(@message).times(2)`，它会失败并显示该错误消息。如果我删除该行，测试运行顺利（没有错误的参数数量问题）。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T23:33:11.897

您得到的错误是因为 'times' 方法预计会被链接到其他“接收计数”期望之一。您可以使用以下任何一种：

```
should_receive(:send_message).with(@message).exactly(2).times
should_receive(:send_message).with(@message).at_most(2).times 
```

您还可以使用不需要 'times' 方法的其他替代方法之一：

```
should_receive(:send_message).with(@message).twice
should_receive(:send_message).with(@message).at_most(:twice) 
```

更多信息可以在[rspec-mocks 文档中找到](http://rubydoc.info/gems/rspec-mocks/frames)

您可能需要在创建订阅者之前设置期望：

```
it "sends out sms to all the subscribers" do
  Subscriber.any_instance.should_receive(:send_message).with(@message).twice

  @user.subscribers.create!
  @user.subscribers.create!

  post :create, {:broadcast => valid_attributes}   
end 
```

# javascript - 选择框被其他选择框的选项禁用或启用

> ID：12269470
> 
> 赞同：12
> 
> 时间：2012-09-04T18:39:16.223
> 
> 标签：javascript, html, select

我尝试创建一个关系/连接 beetwen 2 选择框

```
<form id="creation" name="creation">
<select name="select01" id="select01">
     <option value="01">01</option>
     <option value="02">02</option>
     <option value="03">03</option>
</select>

<select name="select02" id="select02">
     <option value="aa">aa</option>
     <option value="bb">bb</option>
     <option value="cc">cc</option>
</select>
</form> 
```

我希望我的选择框**select02**在开始时被禁用，当我点击 **value02**或**value03**时，我们启用它，当我们点击**value01**时，禁用它。

目前有我的代码js。我尝试从其他功能（启用选择框的单选按钮）调整它，但它似乎不起作用。我的列表在开始时被禁用，但 onclick 不起作用......

一些身体可以帮助我吗？

```
var oui = document.creation.select01[0];

document.getElementById("select02").disabled=true;
oui.onclick = function() {
document.getElementById("select02").disabled=false;
} 
```

好的，现在，我使用以下代码：

```
<script>
var oui = document.select01;
document.getElementById("select02" ).disabled=true;
oui.onchange = function(){
document.getElementById("select02" ).disabled=false;
}
</script> 
```

我更改了我的 select01 的值，然后我的 select02 现在启用了 .. 但是我怎样才能只针对我的 select01 的 2 个选项？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-04T19:08:12.067

试试这个：

```
<form id="creation" name="creation" onchange="handleSelect()">
<select name="select01" id="select01">
     <option value="01">01</option>
     <option value="02">02</option>
     <option value="03">03</option>
</select>

<select name="select02" id="select02" disabled>
     <option value="aa">aa</option>
     <option value="bb">bb</option>
     <option value="cc">cc</option>
</select>
</form> 
```

作为 JS 脚本：

```
 function handleSelect() {
     if (this.value == '01') {
         document.getElementById('select02').disabled = true;
     } else {
         document.getElementById('select02').disabled = false;
     }
 } 
```

还有一个提示：探索 jQuery，一个非常流行的 JS 框架 (jquery.com)。您可以通过使用它非常简单地完成您的任务。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T18:42:16.993

```
​document.getElementById('select01').onchange = function () {
    document.getElementById("select02").disabled = this.value == '01';
}​​​​​​​​ 
```

这是小提琴：http: [//jsfiddle.net/PK2vc/](http://jsfiddle.net/PK2vc/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T18:40:43.537

您必须使用`onchange`而不是`onclick`. 所以下面应该是

```
oui.onclick = function() 
```

替换为

```
oui.onchange = function() 
```

祝你好运 ！！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-10T14:34:47.223

```
function handleSelect() {
  if (this.value == '01') {
     document.getElementById('select02').disabled = true;
  } else {
     document.getElementById('select02').disabled = false;
  }
} 
```

# sql-server-2008 - SQL hierarchyid 深度优先与广度优先：使用一个而不是另一个？

> ID：12269471
> 
> 赞同：2
> 
> 时间：2012-09-04T18:39:17.830
> 
> 标签：sql-server-2008, tsql, hierarchy

我知道`Breadth First Search`和`Depth First Search`。我读[了这个页面](http://www.sqlservercentral.com/articles/SQL+Server+2008/62204/)，也在 SO 上，我发现[了这个问题](https://stackoverflow.com/questions/687731/breadth-first-vs-depth-first)和[这个问题](https://stackoverflow.com/questions/1657174/what-is-breadth-first-search-useful-for)。

我想知道的是一些实用的场景，我会使用深度优先于广度搜索。`t-sql`尽管我提供的第三个问题链接有点相似，但我的问题更针对`SQL Server 2008/2012`性能。

另外，如果我使用一个而不是另一个，谁能告诉我一个例子，我可以有多少（最坏的情况）性能影响？说，如果我采用 a `dfs`，并且我在第一个节点有 50 个孩子，并且我正在搜索第二个节点，`dfs`那么我可以想象的速度会慢 50 倍，因为它首先必须横切 50 个孩子然后它会来到第二个节点。是这样还是不是？我的意思是它就像这种直接关系，是表现还是其他方面？

最后，再次重复我的问题，虽然它可能（很可能是）特定于应用程序和需求，但我想知道一些实际场景，我会使用其中一个而不是另一个，以及选择一个而不是另一个的性能成本可能是多少另一个？另外，我在维护一个分类目录我应该选择什么？比如说，我正在维护一个书籍类别目录，例如：`science => physics => astronomy`等等，哪一个是最好的？`dfs`还是`bfs`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T19:18:54.043

你几乎回答了你自己的问题。根据数据，使用最有可能首先访问所需节点的搜索方法。

# c++ - C/C++ 中的宏扩展

> ID：12269475
> 
> 赞同：2
> 
> 时间：2012-09-04T18:39:30.667
> 
> 标签：c++, macros

我从某人的代码中获得了这个宏：

```
#define Q_DEF_PROTOTYPE( Type, Name ) Type (*Name)

#define COPY_FP( pDest, pSrc ) (*((void**)(&(pDest)))) = ((void*)(pSrc))

#define LIB_QUERY(lib_handle, proc)  dlsym(lib_handle, proc)

#define Q_DEF_PROTOTYPE( Type, Name ) \
COPY_FP( p->Name, LIB_QUERY( g_library, STRINGIZE(FUNC(Name)) ) ); \
void dummy_##Name 
```

不确定，“void dummy_##Name”是做什么的？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T18:45:17.700

`##Name`它将Name 参数的值替换为字符串。

`Q_DEF_PROTOTYPE(myType, objectName) => void dummy_objectName`

# android - 在“选择操作”菜单中添加 Android 应用

> ID：12269485
> 
> 赞同：1
> 
> 时间：2012-09-04T18:40:42.953
> 
> 标签：android, image, android-intent

我正在寻找一种将我的应用程序添加到`select an action`菜单中的方法，当一个用户想要在另一个应用程序（即聊天应用程序）中添加一张图片时出现的菜单中。
因此，当用户选择该选项时，android 会列出相机、图库等应用。
好吧，我想出现在那个菜单中。我知道这是可能的（意图，意图过滤器？），但我无法得到答案:(。
谢谢，抱歉我的英语不好:$

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T18:46:54.250

可以按照[此问题](https://stackoverflow.com/questions/10341368/trying-to-provide-an-image-for-apps-calling-get-contet-intent)中的概述将自己添加到菜单中。实际上提供响应可以如此[处所示](https://stackoverflow.com/questions/11306763/activity-return-a-image)。

# asp.net - 在 MvcHtmlString.Create() 中找不到图像

> ID：12269486
> 
> 赞同：0
> 
> 时间：2012-09-04T18:40:45.270
> 
> 标签：asp.net, asp.net-mvc, razor

我有一个像这样的网格列：

```
gridSpecs.Column(header: "", columnName: "",
  format: (spec) => MvcHtmlString.Create(string.Format(
  "<a href='' onclick='RemoveEquipment({0}); return false;'><img src='~/Images/Delete.png' alt='x' /></a>",
  spec.Equipment.EquipmentId))), 
```

它可以正常工作，只是找不到图像。

![在此处输入图像描述](../Images/fe86d316d77d28fb75bcc251e69adc48.png)

事实上，chrome 控制台报告：`Failed to load resource: the server responded with a status of 404 (Not Found).`

但是，如果我将确切的代码单独放在网页的其他位置，图像将显示：

```
<img src='~/Images/Delete.png' alt='x' /> 
```

知道为什么它不会在 MvcHtmlString.Create() 方法中显示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T18:46:13.223

波浪号不会在客户端 html 标记中运行。因此，要么输入确切的绝对 URL，要么只是`~/`从 src 中删除。

希望这会有所帮助。

# ruby-on-rails-3 - Rails：创建其他记录时减少表中的属性

> ID：12269487
> 
> 赞同：1
> 
> 时间：2012-09-04T18:40:45.643
> 
> 标签：ruby-on-rails-3, activerecord, transactions, callback

所以我有两个模型：**Product**和**Sale**。它们通过**has_many :trough**关联关联，并且都具有相同的属性和属性名称（sale 有一个更难的）：

**代码片段：**

```
# Product Model

class Product < ActiveRecord::Base
  attr_accessible :qty, :color, :name, :price, :size, :type, :code
    has_many :orders
    has_many :sales, :through => :orders
end 

# Sale Model

class Sale < ActiveRecord::Base
  attr_accessible :qty, :color, :name, :salesman_name, :price, :size, :type, :code
    has_many :orders
    has_many :productos, :through => :orders
 end 
```

我想要做的是在每次创建带有名称的新销售时**减少**特定记录（产品）的*Products>Quantity*属性......减法必须等于“数量”中设置的值与已创建产品相关的新销售创建...

该应用程序是一个非常简单的库存系统，我可以在其中跟踪**库存商品和销售情况，让我们举一个实际的例子：假设我在****产品**数据库中有一个名为“袜子”的产品，我有“30”作为该产品的**数量**属性，然后有人卖**了两只袜子**（在应用程序中用 2 只袜子创建了一个新的销售）：在这种情况下，我希望产品数据库中“袜子”的值自动更新为 28。

我一直在阅读，我认为这可以通过 ActiveRecord 事务的销售模型中的 after_create 回调来完成，但我不确定如何实现这一点，有人可以帮我吗？顺便说一句，我正在考虑在这里使用类似的东西：

```
after_create :decrement_stock

  def decrement_stock
    Sale.transaction do
      Product.transaction do
        @substraction = product.sale(params[:qty])
          product.update_attributes!(:qty => @qty - @substraction)
    end
  end
end 
```

但我很确定它不会起作用，请指出正确的方向......我一直在努力解决这个问题。

感谢，并有一个愉快的一天。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T20:32:19.047

我认为你应该重建这种关联和模型

我要做的是拥有这个模型（与你的有点不同）：

推销员

```
class Salesman < ActiveRecord::Base
  attr_accessible :last_name, :name
  has_many :sales
end 
```

产品

```
class Product < ActiveRecord::Base
  attr_accessible :name, :qty
  has_many :product_sales
end 
```

销售

```
class Sale < ActiveRecord::Base
  belongs_to :salesman
  has_many :product_sales
end 
```

这就是诀窍

模型产品销售

```
class ProductSale < ActiveRecord::Base
  belongs_to :sale
  belongs_to :product
  attr_accessible :qty

  after_create :decrement_stock

  def decrement_stock
    self.product.update_attribute("qty", (product.qty - self.qty))
  end
end 
```

你有销售那个`belongs_to`推销员。

销售`has_many` `product_sales`

和`product_sales`belongs_to`product`这样`sales`在一次销售中你就有多个产品

然后当 a`ProductSale`被保存时，会有回调`after_create :decrement_stock`

您可以更新该特定产品的属性。

请记住，您将拥有每个产品的数量，而不是整个销售的数量。

这是我为您设置的一个小示例：

[https://github.com/Mr-Nizzle/inventory](https://github.com/Mr-Nizzle/inventory)

# php - 这种处理 POST 和 GET 数据的方法是一种好习惯吗？

> ID：12269489
> 
> 赞同：1
> 
> 时间：2012-09-04T18:40:49.373
> 
> 标签：php, performance, post, scalability

读完这篇[文章](http://www.tanzilo.com/2008/11/09/php-pass-all-post-and-get-variables-in-array-in-function-parameter/)后，我想知道这是否真的是注册新用户的*好习惯*。每个学习过 PHP 的人都可以看到它是如何工作的，但如果我必须手动处理所有发布数据，我只是觉得重复自己。我知道一次做起来并不“困难”，也不是太久，但我认为如果你实现类似于这段代码的东西，从长远来看，它可以以更好的方式处理。例如，要添加更多单个字段，您必须更改大量代码，在文章中进行复制/粘贴，但这里只是在数组中增加了一个字段`$ValidFields`。你怎么看？

```
function registerUser()
{
// Only place (apart of the mysql table, obviously) to add new fields of all the script.
$ValidFields = array ("name","lastname","email","password");
$tablename="users";                  // If oop, this could be done in the __construct()
foreach ($_POST as $key => $value)
  if(in_array($key,$ValidFields))
    {
    $key=mysql_real_escape_string($key);
    if ($key=="password") $value=md5($value);
    else $value=mysql_real_escape_string($value);
    if (!$mysql)  // If there is nothing inside
      {
      $mysql="INSERT INTO ".$tablename." (".$key;
      $endmysql=") VALUES ('".$value."'";
      }
    else
      {
      $mysql.=", ".$key;
      $endmysql.=", '".$value."'";
      }
    }
$mysql=$mysql.$endmysql.")";
return $mysql;
} 
```

测试在函数后添加此代码

```
$_POST['name']="testname";
$_POST['lastname']="testlastname";
$_POST['email']="teste'mail";       // Checking MySQL injection (;
$_POST['password']="testpassword";
$_POST['CakePHP']="is_a_lie";       // "Hello world" is too mainstream
echo registerUser(); 
```

返回的字符串实际上是：

```
INSERT INTO users (name, lastname, email, password) VALUES ('testname', 'testlastname', 'teste\'mail', 'testpassword') 
```

**笔记！我知道我不应该使用 mysql_**，这只是一个说明性脚本。php5 中有很多语句（PDO、MYSQLi 等），每个人都应该使用。我专注于可扩展性和性能。可以复制类似的过程来创建 HTML 表单。此外，它应该与类类似。

**我只是想知道为什么 PHP 已经开发了这么多年，并且在 1 年中我一直在研究它并在线搜索信息，我还没有看到任何类似且*可能*更有效的处理 POST 或 GET 的方法数据。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T18:44:01.833

我根本不处理 $_GET 和 $_POST。相反，我在查询中使用[参数绑定](http://php.net/manual/en/pdostatement.bindparam.php)。

所以我的插入看起来像这样：

```
public function Insert( $table, array $bind )
  {
    $this->fetch = function( $sth, $obj )  { return $obj->lastID = $obj->lastInsertId(); };
    $this->sql = array();
    $this->bindings = array();

    $columns = implode( ", ", array_keys( $bind ) );
    $values  = ':' . implode( ", :", array_keys( $bind ) );

    foreach ( $bind as $column => $value )
      $this->bindings[] = array( 'binding' => $column, 'value' => $value );

    $this->sql['insert'] = "INSERT INTO " . $table . " (" . $columns . ")  VALUES (" . $values . ")";

    return $this;
  } 
```

执行看起来像这样：

```
 public function Execute()
  {
    $sth = $this->prepare( implode( ' ', $this->sql ));
    if( !$sth )
      return false;

    foreach ( $this->bindings as $bind ) 
      if( $bind['binding'] ) {
        if( isset( $bind['type'] ))
          $sth->bindValue( ':' . $bind['binding'], $bind['value'], $bind['type'] );
        else
          $sth->bindValue( ':' . $bind['binding'], $bind['value'] );
      }

    if( $sth->execute() ) {
      $lambda = $this->fetch;
      return $lambda( $sth, $this );
    }
    else 
      return false;
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T19:14:54.897

这**绝对不是**一个好习惯——`mysql_real_escape_string`只**对**安全地包含在单引号内的数据进行转义。它不能安全地用于任何其他目的。

因此，可以通过设置精心制作的 POST 密钥将恶意内容注入到您的查询中——例如，可以设置

```
$_POST["name) SELECT CONCAT(name, CHAR(58), password) FROM users --"] = ""; 
```

在数据库中为每个现有用户创建一个用户，其名称指示现有用户的密码。如果您的应用程序公开显示用户列表，这将具有公开所有用户密码的效果。更细微的攻击也是可能的；这只是一个简单的例子。

# php - 扩展 Grid UI 元素以链接到页面

> ID：12269490
> 
> 赞同：0
> 
> 时间：2012-09-04T18:40:51.190
> 
> 标签：php, frameworks, atk4, agiletoolkit

我正在使用 Agile Toolkit 进行一些开发，并希望扩展现有的网格控件，以便每一行都包含数据（就像现在一样），但也链接到带有包含 ID 的查询字符串的页面。我希望能够做类似的事情：

```
$this->add('Grid', 'short-name', 'template-tag', array('page?id=', 'id'))->setModel('mydatasource'); 
```

我目前可以使用以下内容：

```
$this->add('Grid', 'short-name', 'template-tag')->setModel('mydatasource'); 
```

但我希望能够将我链接到的页面指定为我想要传递的字段的格式，以便单击第二行的任意位置：

```
1     Jack Johnson     Clerk
2     John Doe         Executive 
```

带我到：myapp.com/page?id=2

我将如何扩展 Grid 元素来做到这一点？还是我需要从 AbstractView 或 Lister 一直向下扩展？

谢谢！

**完整的工作解决方案：**

precacheTemplate 从 row_t 中删除了我在 html 模板中定义的变量的引用。所以我遵循了现有的做法，添加了另一个变量的重置（即它设置 to 的位置） - 这样它就留在内存中作为返回到从 Basic 重载的通用 formatRow 内的模板字段的参考网格。

Roman 之前提到过其中一些，但我终于找到了我必须重置的缺失链接。

最好的理解方法是逐行比较我的网格和基本网格（是的，我知道我是从高级扩展而来的）。

希望这可以帮助其他有完全相同问题的人。

**在页面上**

```
$this->add('ExtendedUI_GridLinkedRow', array('dest_page'=>'home', 'name'=>'assessments'), 'assessments')
    ->setModel('GrantAssessment')
    ->addCondition('uid', 1); 
```

**GridLinkedRow.php**

```
 <?php

class ExtendedUI_GridLinkedRow extends Grid_Advanced {

    function init(){
        parent::init();
    }

    function defaultTemplate(){
        return array('ExtendedUI/grid_linked_row');
    }

    function precacheTemplate(){
        // pre-cache our template for row
        // $full=false used for certain row init
        $row = $this->row_t;
        $col = $row->cloneRegion('col');

        // tbody -> column
        $row->setHTML('row_id','<?$id?>');
        $row->trySetHTML('odd_even','<?$odd_even?>');
        $col->setHTML('dest_link','<?$page_link?>');
        $row->del('cols');

        // thead -> column
        $header = $this->template->cloneRegion('header');
        $header_col = $header->cloneRegion('col');
        $header_sort = $header_col->cloneRegion('sort');

        // Totals -> column
        if($t_row = $this->totals_t){
            $t_col = $t_row->cloneRegion('col');
            $t_row->del('cols');
        }

        $header->del('cols');

        foreach($this->columns as $name=>$column){
            $col->del('content');
            $col->setHTML('content','<?$'.$name.'?>');

            if(isset($t_row)){
                $t_col->del('content');
                $t_col->setHTML('content','<?$'.$name.'?>');
                $t_col->trySetHTML('tdparam','<?tdparam_'.$name.'?>style="white-space: nowrap"<?/?>');
                $t_row->appendHTML('cols',$t_col->render());
            }

            // some types needs control over the td

            $col->setHTML('tdparam','<?tdparam_'.$name.'?>style="white-space: nowrap"<?/?>');

            $row->appendHTML('cols',$col->render());

            $header_col->set('descr',$column['descr']);
            $header_col->trySet('type',$column['type']);

            // TODO: rewrite this (and move into Advanced)
            if(isset($column['sortable'])){
                $s=$column['sortable'];
                // calculate sortlink
                $l = $this->api->getDestinationURL(null,array($this->name.'_sort'=>$s[1]));

                $header_sort->trySet('order',$column['sortable'][0]);
                $header_sort->trySet('sorticon',$this->sort_icons[$column['sortable'][0]]);
                $header_sort->set('sortlink',$l);
                $header_col->setHTML('sort',$header_sort->render());
            }else{
                $header_col->del('sort');
                $header_col->tryDel('sort_del');
            }

            if($column['thparam']){
                $header_col->trySetHTML('thparam',$column['thparam']);
            }else{
                $header_col->tryDel('thparam');
            }

            $header->appendHTML('cols',$header_col->render());

        }
        $this->row_t = $this->api->add('SMlite');
        $this->row_t->loadTemplateFromString($row->render());

        if(isset($t_row)){
            $this->totals_t = $this->api->add('SMlite');
            $this->totals_t->loadTemplateFromString($t_row->render());
        }

        $this->template->setHTML('header',$header->render());
    }

    function formatRow(){

        if(!$this->columns)throw $this->exception('No columns defined for grid');

        foreach($this->columns as $tmp=>$column){
            $this->current_row[$tmp.'_original']=@$this->current_row[$tmp];

            $formatters = explode(',',$column['type']);
            foreach($formatters as $formatter){
                if(!$formatter)continue;
                if(method_exists($this,$m="format_".$formatter)){
                    $this->$m($tmp,$column);
                }else throw new BaseException("Grid does not know how to format type: ".$formatter);
            }
            // setting cell parameters (tdparam)
            $this->applyTDParams($tmp);
            if($this->current_row[$tmp]=='')$this->current_row[$tmp]=' ';
        }
        $this->row_t->setHTML('page_link', $this->api->url($this->dest_page, array('id'=>$this->current_id)));
        return $this->current_row;
    }

} 
```

对于模板：

**grid_linked_row.html**

```
<?$Misc?>
<div id="<?$_name?>" class="atk-grid">
  <div class="atk-grid-panel">
    <?quick_search?><?/?>
    <div class="atk-buttons"><?grid_buttons?><?/?></div>
  </div>
  <table width="<?table_width?>100%<?/?>">
    <?header?>
    <thead class="ui-widget-header"><tr>
        <?cols?>
        <?col?>
        <th class="ui-widget-header" nowrap    <?$thparam?>><?sort?><i  style="float: left" class="ui-icon <?$sorticon?>"></i><a href="<?$sortlink?>"><?/sort?><?descr?>Customer<?/?><?sort_del?></a><?/?></th>
        <?/col?>
        <?/cols?>
    </tr></thead>
    <?/header?>

    <tbody class="grid_body">
      <?rows?>
      <?row?>
      <tr class="<?$odd_even?>" data-id="<?$row_id?>" rel="<?$row_id?>">
        <?cols?>
        <?col?>
        <td <?$tdparam?>><a href="<?$dest_link?>"><?$content?></a></td>
        <?/col?>
        <?/cols?>
      </tr>
      <?/row?>

      <?totals?>
      <tr class="atk-grid-totals">
        <?cols?>
        <?col?>
        <td <?$tdparam?>><?$content?></td>
        <?/col?>
        <?/cols?>
      </tr>
      <?/totals?>
      <?/rows?>

    </tbody>
    <?full_table?>
    <?/full_table?>
  </table>
  <?not_found?><div class="atk-grid-notfound ui-state-highlight ui-corner-all"><i class="ui-icon ui-icon-alert float-left"></i>No Records Found</div><?/not_found?>
  <div class="atk-paginator"><?paginator?><?/?></div>
  <?hidden_forms?><?/hidden_forms?>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T10:10:20.560

如果要将网格的所有文本值包含在链接中，可以使用以下内容：

```
$this->add('MyGrid',array('dest_page'=>'page'), 'template-tag');

class MyGrid extends Grid {
    function format_text($field){
        parent::format_text($field);

        // Wrap the value inside a link
        $this->current_row_html[$field]='<a href="'.
            $this->api->url($this->dest_page, array('id'=>$this->current_id).'">'.
            ($this->current_row_html[$field]?:
             htmlspecialchars($this->current_row[$field],ENT_NOQUOTES,'UTF-8')).
            '</a>'
    }
} 
```

# java - 如何让玩家角色和世界同时滚动？

> ID：12269491
> 
> 赞同：0
> 
> 时间：2012-09-04T18:40:54.627
> 
> 标签：java, swing, camera, awt

如何让玩家和世界同时滚动？因为无论我做什么，它总是会有一点延迟......我的观点是：我的游戏是一个 2d 横向卷轴（terraria/minecraft/rpg）游戏，我需要能够与世界一起移动地形。 .

播放器.java

```
package game.test.src;

import java.awt.Color;
import java.awt.Graphics;
import java.awt.Image;
import java.awt.Rectangle;
import java.awt.event.MouseEvent;

import javax.swing.ImageIcon;

    public class Player {

        static final int MOVE_UP = 0, MOVE_DOWN = 1, MOVE_LEFT= 2, MOVE_RIGHT = 3;
        private World world;

        private Rectangle playerRect;
        private Image playerImg;

        //Block Variables
        private int hoverX, hoverY;
        private boolean hovering = false;

        protected static int xDirection;
        protected static int yDirection;
        private Weapon weapon;

        public Player(World world){
            this.world = world;
            playerImg = new ImageIcon("H:/2D game test/Game test 2/src/game/test/src/images/Character.png").getImage();
            playerRect = new Rectangle(50, 0, 10, 36);
            weapon = new Weapon(weapon.PICKAXE);
        }
        private static void setXDirection(int d){
            xDirection = d;

        }
        private static void setYDirection(int d){
            yDirection = d;

        }
        public void update()
        {
            move();
            checkForCollision();

        }
        private void checkForCollision() {

        }
        private void move()
        {
            playerRect.x += xDirection;
            playerRect.y += yDirection;
            gravity();
        }
        private void gravity()
        {
            for(int i=0;i<world.arrayNum; i++)
            {
                if(!world.isSolid[i])
                {
                    setYDirection(1);

                }
                else if(world.isSolid[i] && playerRect.intersects(world.blocks[i]))
                {
                    setYDirection(0);
                }
            }
        }
        //MotionEvents

        public void mousePressed(MouseEvent e)
        {

        }

        public void mouseReleased(MouseEvent e)
        {

        }

        public void mouseClicked(MouseEvent e)
        {

        }

        public void mouseMoved(MouseEvent e)
        {
            int x = e.getX();
            int y = e.getY();
            int px = playerRect.x;
            int py = playerRect.y;
            for(int i = 0; i < world.arrayNum; i++)
            {
                if(weapon.isEquipped(Weapon.PICKAXE) &&
                        x > world.blocks[i].x && x < world.blocks[i].x + world.blocks[i].width && 
                        y > world.blocks[i].x && y < world.blocks[i].y + world.blocks[i].height && world.isSolid[i] && 
                        (world.blocks[i].x + (world.blocks[i].width / 2) ) <= (px + playerRect.width/2) + weapon.WEAPON_RADIUS &&
                        (world.blocks[i].x + (world.blocks[i].width / 2) ) >= (px + playerRect.width/2) - weapon.WEAPON_RADIUS &&
                        (world.blocks[i].y + (world.blocks[i].height / 2) ) <= (py + playerRect.height/2) + weapon.WEAPON_RADIUS &&
                        (world.blocks[i].y + (world.blocks[i].height / 2) ) >= (py + playerRect.height/2) - weapon.WEAPON_RADIUS)

                {
                    hovering = true;
                    hoverX = world.blocks[i].x;
                    hoverY = world.blocks[i].y;
                    break;
                }
                else
                    hovering = false;
            }
        }
        public void mouseDragged(MouseEvent e)
        {

        }
        public void mouseEntered(MouseEvent e)
        {

        }
        public void mouseExited(MouseEvent e)
        {

        }

        //Drawing Methods
        public void draw(Graphics g)
        {
            g.drawImage(playerImg, playerRect.x, playerRect.y, null);
            if(hovering)
                drawBlockOutline(g);

        }

        private void drawBlockOutline(Graphics g)
        {
            g.setColor(Color.black);
            g.drawRect(hoverX, hoverY, world.blocks[0].width,world.blocks[0].height);
        }

        private class Weapon
        {
            public static final int UNARMED = 0;
            public static final int PICKAXE = 1; 
            public static final int GUN = 2;

            public int CURRENT_WEAPON;

            public int WEAPON_RADIUS;

            public Weapon(int w)

            {
                switch(w)
                {
                    default:
                        System.out.println("No weapon selected");
                        break;
                    case UNARMED:
                        CURRENT_WEAPON = UNARMED;
                        WEAPON_RADIUS = 100;
                        break;

                    case PICKAXE:
                        CURRENT_WEAPON = PICKAXE;
                        WEAPON_RADIUS = 100;
                        break;

                    case GUN:
                        CURRENT_WEAPON = GUN;
                        WEAPON_RADIUS = 100;
                        break;

                }

            }

            public void selectWeapon(int w)
            {
                switch(w)
                {
                    default:
                        System.out.println("No weapon selected");
                        break;
                    case UNARMED:
                        CURRENT_WEAPON = UNARMED;
                        WEAPON_RADIUS = 100;
                        break;

                    case PICKAXE:
                        CURRENT_WEAPON = PICKAXE;
                        WEAPON_RADIUS = 100;
                        break;

                    case GUN:
                        CURRENT_WEAPON = GUN;
                        WEAPON_RADIUS = 100;
                        break;

                }

            }

            public boolean isEquipped(int w)

            {
                if(w == CURRENT_WEAPON)
                {
                    return true;
                }
                else
                    return false;

            }

        }
        public void moveMap(){
            for(Rectangle r : world.blocks){
                r.x += xDirection;
                r.y += yDirection;
            }
        }
        public static void stopMoveMap(){
            setXDirection(0);
            setYDirection(0);
        }
        private static void setXDirection1(int dir){
            xDirection = dir;
        }
        private static void setYDirection1(int dir){
            yDirection = dir;
        }

        public static void navigatePlayer(int nav){
            switch(nav){
                default:
                    System.out.println("default case entered... Doing nothing.");
                    break;
                case MOVE_UP:
                    setYDirection1(-1);
                    break;
                case MOVE_DOWN:
                    setYDirection1(1);
                    break;
                case MOVE_LEFT:
                    setXDirection1(-1);
                    break;
                case MOVE_RIGHT:
                    setXDirection1(1);
                    break;
            }
        }
    } 
```

世界.java

```
package game.test.src;

import java.awt.Graphics;
import java.awt.Image;
import java.awt.Rectangle;

import javax.swing.ImageIcon;

public class World {

    public Rectangle[] blocks;
    public boolean[] isSolid;
    public Image[] blockImg;
    public final int arrayNum = 500;

    //Block Images
    public Image BLOCK_GRASS, BLOCK_DIRT, BLOCK_STONE, BLOCK_SKY;

    private int x, y, xDirection, yDirection;;

    //map navigation
    static final int PAN_UP = 0, PAN_DOWN = 1, PAN_LEFT= 2, PAN_RIGHT = 3;

    public World(){
        BLOCK_GRASS = new ImageIcon("H:/2D game test/Game test 2/src/game/test/src/images/tile_grass.png").getImage();
        BLOCK_DIRT = new ImageIcon("H:/2D game test/Game test 2/src/game/test/src/images/tile_dirt.png").getImage();
        BLOCK_STONE = new ImageIcon("H:/2D game test/Game test 2/src/game/test/src/images/tile_stone.png").getImage();
        BLOCK_SKY = new ImageIcon("H:/2D game test/Game test 2/src/game/test/src/images/tile_sky.png").getImage();
        blocks = new Rectangle[500];
        blockImg = new Image[500];
        isSolid = new boolean[arrayNum];
        loadArrays();
    }

    private void loadArrays(){
        for(int i = 0; i < arrayNum; i++){
            if(x >= 500){
                x = 0;
                y += 20;
            }
            if(i >= 0 && i < 100){
                blockImg[i] = BLOCK_SKY;
                isSolid[i] = false;
                blocks[i] = new Rectangle(x, y, 20, 20);
            }
            if(i >= 100 && i < 125){
                blockImg[i] = BLOCK_GRASS;
                isSolid[i] = true;
                blocks[i] = new Rectangle(x, y, 20, 20);
            }
            if(i >= 125 && i < 225){
                blockImg[i] = BLOCK_DIRT;
                isSolid[i] = true;
                blocks[i] = new Rectangle(x, y, 20, 20);
            }
            if(i >= 225 && i < 500){
                blockImg[i] = BLOCK_STONE;
                isSolid[i] = true;
                blocks[i] = new Rectangle(x, y, 20, 20);
            }
            x += 20;
        }
    }

    public void draw(Graphics g){
        for(int i = 0; i < arrayNum; i++){
            g.drawImage(blockImg[i], blocks[i].x, blocks[i].y, null);
        }
    }

    public void moveMap(){
        for(Rectangle r : blocks){
            r.x += xDirection;
            r.y += yDirection;
        }
    }
    public void stopMoveMap(){
        setXDirection(0);
        setYDirection(0);
    }
    private void setXDirection(int dir){
        xDirection = dir;
    }
    private void setYDirection(int dir){
        yDirection = dir;
    }
    public void navigateMap(int nav){
        switch(nav){
            default:
                System.out.println("default case entered... Doing nothing.");
                break;
            case PAN_UP:
                setYDirection(-1);
                break;
            case PAN_DOWN:
                setYDirection(1);
                break;
            case PAN_LEFT:
                setXDirection(-1);
                break;
            case PAN_RIGHT:
                setXDirection(1);
                break;
        }
    }
} 
```

游戏面板.java

```
package game.test.src;

import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Image;
import java.awt.Toolkit;
import java.awt.event.KeyAdapter;
import java.awt.event.KeyEvent;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.util.logging.Level;
import java.util.logging.Logger;

import javax.swing.JPanel;

public class GamePanel extends JPanel implements Runnable {
    //Double buffering
    private Image dbImage;
    private Graphics dbg;
    //JPanel variables
    static final int GWIDTH = 500, GHEIGHT = 400;
    static final Dimension gameDim = new Dimension(GWIDTH, GHEIGHT);
    //Game variables
    private static final int DELAYS_BEFORE_YIELD = 10; 
    private Thread game;
    private volatile boolean running = false;
    private long period = 6*1000000; //ms -> nano
    //Game Objects
    World world;
    Player p1;
    public GamePanel(){
        world = new World();
        p1 = new Player(world);

        setPreferredSize(gameDim);
        setBackground(Color.WHITE);
        setFocusable(true);
        requestFocus();
        //Handle all key inputs from user
        addKeyListener(new KeyAdapter(){
            @Override
            public void keyPressed(KeyEvent e){
                if(e.getKeyCode() == KeyEvent.VK_LEFT){
                    Player.navigatePlayer(Player.MOVE_LEFT);
                    world.navigateMap(World.PAN_LEFT);
                }
                if(e.getKeyCode() == KeyEvent.VK_RIGHT){
                    Player.navigatePlayer(Player.MOVE_RIGHT);
                    world.navigateMap(World.PAN_RIGHT);
                }
                if(e.getKeyCode() == KeyEvent.VK_UP){
                    Player.navigatePlayer(Player.MOVE_UP);
                    world.navigateMap(World.PAN_UP);
                }
                if(e.getKeyCode() == KeyEvent.VK_DOWN){
                    Player.navigatePlayer(Player.MOVE_DOWN);
                    world.navigateMap(World.PAN_DOWN);
                }
            }
            @Override
            public void keyReleased(KeyEvent e){
                Player.stopMoveMap();
                world.stopMoveMap();                
            }
            @Override
            public void keyTyped(KeyEvent e){

            }

        });
        addMouseListener(new MouseAdapter()
        {
            @Override
            public void mousePressed(MouseEvent e)
            {

            }
            @Override
            public void mouseReleased(MouseEvent e)
            {

            }
            @Override
            public void mouseClicked(MouseEvent e)
            {

            }
        });
        addMouseMotionListener(new MouseAdapter()
        {
            public void mouseMoved(MouseEvent e)
            {
                p1.mouseMoved(e);
            }
            public void mouseDragged(MouseEvent e)
            {

            }
            public void mouseEntered(MouseEvent e)
            {

            }
            public void mouseExited(MouseEvent e)
            {

            }

        });

    }

    public void run(){
        long beforeTime, afterTime, diff, sleepTime, overSleepTime = 0;
        int delays = 0;
        while(running){
            beforeTime = System.nanoTime();
            gameUpdate();
            gameRender();
            paintScreen();
            afterTime = System.nanoTime();
            diff = afterTime - beforeTime;
            sleepTime = (period - diff) - overSleepTime;
            //if sleepTime is between peiod and 0, then sleep
            if(sleepTime < period && sleepTime > 0)
            {
                try{
                    Thread.sleep(sleepTime/1000000L);
                    overSleepTime = 0;
                }catch(InterruptedException ex){
                    Logger.getLogger(GamePanel.class.getName()).log(Level.SEVERE, "EXCEPTION");
                }
            }
            //the diff was greater than the period
            else if(diff > period)
            {
                overSleepTime = diff - period;
            }
            else if(++delays >= DELAYS_BEFORE_YIELD)
            {
                Thread.yield();
                delays = 0;
                overSleepTime = 0;
            }
            //the loop took less time than expected
            else
            {
                overSleepTime = 0;
            }
        }
    }

    private void gameUpdate(){
        if(running && game != null){
            world.moveMap();
            p1.update();
        }
    }

    private void gameRender(){
        if(dbImage == null){ // Create the buffer
            dbImage = createImage(GWIDTH, GHEIGHT);
            if(dbImage == null){
                System.err.println("dbImage is still null!");
                return;
            }else{
                dbg = dbImage.getGraphics();
            }
        }
        //Clear the screen
        dbg.setColor(Color.WHITE);
        dbg.fillRect(0, 0, GWIDTH, GHEIGHT);
        //Draw Game elements
        draw(dbg);
    }

    /* Draw all game content in this method */
    public void draw(Graphics g){
        world.draw(g);
        p1.draw(g);
    }

    private void paintScreen(){
        Graphics g;
        try{
            g = this.getGraphics();
            if(dbImage != null && g != null){
                g.drawImage(dbImage, 0, 0, null);
            }
            Toolkit.getDefaultToolkit().sync(); //For some operating systems
            g.dispose();
        }catch(Exception e){
            System.err.println(e);
        }
    }

    public void addNotify(){
        super.addNotify();
        startGame();
    }

    private void startGame(){
        if(game == null || !running){
            game = new Thread(this);
            game.start();
            running = true;
        }
    }

    public void stopGame(){
        if(running){
            running = false;
        }
    }

    private void log(String s){
        System.out.println(s);
    }
} 
```

谢谢您的帮助！

# c++ - 硬编码参数与从文件加载

> ID：12269493
> 
> 赞同：1
> 
> 时间：2012-09-04T18:41:15.420
> 
> 标签：c++, visual-studio-2008, coding-style, c++-cli

我正在开发一个运动控制系统，并且将有至少 5 个电机，每个电机都有参数，例如“齿轮箱比”、“每转节拍数”、“Kp”、“Ki”、“Kd”等，这些参数将被引用在构建电机实例时。

我对 StackOverflow 的问题是我应该如何组织这些数字？我知道这可能是一件优先考虑的事情，但是对于编码新手，我想我可以从你那里得到一些好的意见。

我立即看到的三种方法如下：

1.  通过变量或数字写入对构造函数的调用 - 优点：有限的编码，可以以易于更改的方式实现，但可能比#define的更难

2.  使用#define 来完成与上面类似的操作——优点：编码最少，易于更改（假设您想查看源代码）

3.  加载一个文件（可能名为“motorparameters.txt”）并将参数加载到一个数组中并从该数组中填充。如果我真的想要，我可以添加一个 GUI 方法来更改这个文件，而不是手动。-- 优点：无需深入研究源代码即可轻松更改。

这些参数可能会随着时间而改变，虽然公司里还有其他编码员，但我想以一种易于配置的方式保留它。你们中有人看到#define 与变量相比有什么特别的好处吗？我已经有一个“constants.h”文件，我可以轻松地将#defines 添加到该文件中，或者我可以在对构造函数的调用附近添加变量。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T18:48:53.100

有一个被称为[YAGNI（你不需要它）](http://en.wikipedia.org/wiki/YAGNI)的原则，它说先做最简单的事情，然后在（如果）你的需求扩大时改变它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T19:05:37.083

在我看来，要做的事情是：

*   编写一个灵活的电机类，它可以处理任何值（在合理范围内），即使您当前只关心 5 组不同的值。

*   定义一个组件，为系统中的 5 个电机返回“正确”值（或使用“正确值”为系统构造 5 个电机）

*   最初实现该组件以使用头文件中的一些硬编码值

*   保留将来用相同 API 的实现替换该组件的选项，但是通过对硬件进行查询来从资源文件、文本文件、XML 文件、与用户的 GUI 交互、离线读取值找出它认为它有什么电机，无论如何。

我这样说的基础是，您可以通过在您怀疑自己想要一个可定制点（以防止以后更改它时进行大量工作）来最小化预期工作量，但是使用满足您当前的最简单的东西来实现一定的要求。

有些人可能会说实际上不值得键入 (a) 来定义组件，最好在`main()`(b) 中构造 5 个电机以使用头文件中的常量，最好在`main()`. （b）人们被广泛鄙视为“魔术常数”的兜售者（这并不意味着他们对实现者和未来维护者的相对总编程时间*一定*是错误的，他们只是可能是）和（a）人们意见分歧. 我倾向于认为定义这种事情需要几分钟，所以我真的不在乎它是否值得。从文件中加载值涉及指定一种文件格式，一旦遇到*真正的文件，我可能会后悔*定制的理由，所以在需求出现之前，我个人不会为此烦恼。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T18:48:23.443

总体思路是将代码中会更改的部分与不会更改的部分分开。改变的可能性越大，你就越需要让它更容易改变。

如果您正在构建一个商业应用程序，其中成百上千的用户将使用许多不同的电机，那么编写 UI 并将数据存储在配置文件中可能是有意义的。

如果这是开发代码并且这些参数不太可能更改，那么将它们填充到您的 constants.h 文件中的#defines 可能是要走的路。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T18:48:42.227

如果您没有安全或 IP 问题，3 号是一个不错的选择。每当您或其他人接触您的代码时，您就会引入回归的可能性。通过将参数保存在文本文件中，您不仅可以让自己的生活更轻松，还可以减少未来可能出现的错误范围。

# macos - 为什么即使它在我的 PATH 上，Groovy 也找不到该程序？

> ID：12269494
> 
> 赞同：0
> 
> 时间：2012-09-04T18:41:19.583
> 
> 标签：macos, grails, groovy, intellij-idea, phantomjs

**tl;dr：**当我尝试从一个类执行 shell 命令时， Groovy 找不到程序（`phantomjs`在我的 上`$PATH`）——否则它从 Groovy 控制台或 Grails CLI 脚本中找到它就好了。是什么赋予了？

我们有一个 Grails 脚本来在 PhantomJS（“无头 WebKit”）中执行 JavaScript 单元测试。当这些测试在一个独立的脚本（调用它`grails test-js`）中执行时，一切正常。Grails/Gant 脚本中的相关行是：

```
// where 'jsTests' is a List with the paths to each test
def failures = 0
jsTests.each {
  Process p = "phantomjs lib/phantom-jasmine/lib/run_jasmine_test.coffee file://${it}".execute()
  failures += p.exitValue()
} 
```

但是由于我们希望它作为通常`grails test-app`循环的一部分运行，我们创建了一个`org.codehaus.groovy.grails.test.GrailsTestType`. 当我们到达实现中需要执行测试的部分时，相同的代码（如上）不起作用，并且 Groovy/Grails 抱怨：

```
java.io.IOException: Cannot run program "phantomjs": error=2, No such file or directory 
```

我的第一个想法是这`phantomjs`不是我的`$PATH`- 但我知道它是，并且再次：它在从 Grails/Gant 脚本运行时工作。所以我在 Groovy 控制台中尝试了它，并且从那里可以正常工作。

现在，如果我从 切换`phantomjs`到`/absolute/path/to/phantomjs`，那么它工作正常。但是将绝对文件系统路径硬编码到类中并不是解决方案。

那么：为什么`phantomjs`在这种情况下 Groovy 没有发现呢？

**更新：**我怀疑这可能与我的 IDE（IntelliJ Idea）有关，因为从命令行运行此错误时似乎没有发生此错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T15:14:43.943

事实证明，这与尝试从我的 IDE (IntelliJ IDEA) 中运行测试有关，更具体地说，是尝试在 OS X 机器上执行此操作。

解决方案是添加`phantomjs`到我的`PATH`using 中`launchd.conf`。我...

1.  创建`/etc/launchd.conf`
2.  添加以下行：（注意：我用[Homebrew](http://mxcl.github.com/homebrew/)安装了 PhantomJS ）

    `setenv PATH /usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin`

3.  重新启动我的机器，以便新`launchd`配置生效。
4.  回到我的 IDE 并重新运行测试。

并且所有测试都成功运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T18:54:19.597

您可以尝试使用 groovy 打印您的路径

```
['sh', '-c', 'echo $PATH' ].execute().text 
```

或者

```
println System.getenv('PATH') 
```

您可以使用 phantomjs 的绝对路径创建环境变量，并在运行时对其进行验证，并在未正确配置时发出警报。

# php - 从简单数组创建一个二维数组以供 csv 使用

> ID：12269495
> 
> 赞同：0
> 
> 时间：2012-09-04T18:41:25.660
> 
> 标签：php

用 php 创建一个 csv 文件，预期的输入是一个二维数组，因此 1 行 = 1 个内部数组。

```
$list = array (
    array('aaa', 'bbb', 'ccc', 'dddd'),
    array('123', '456', '789'),
    array('"aaa"', '"bbb"')
);

$fp = fopen('file.csv', 'w');

foreach ($list as $fields) {
    fputcsv($fp, $fields);
}

fclose($fp);

//output result in file.csv

aaa,bbb,ccc,dddd
123,456,789
"""aaa""","""bbb""" 
```

所以我有以下数组：

```
$list = array('item1','item2','item3','item4','item5','item6'); 
```

我需要把这个数组分解成csv的1个数组内的更小的数组。每个小数组都需要在索引 0 处具有“999999”，然后是`$list`数组中的下两项。所以最终的结果是这样的：

```
$newList = array( array(999999, "item1" , "item2"),
               array(999999, "item3" , "item4"),
               array(999999, "item5" , "item6")
             ); 
```

原始列表数组有时可能包含多达 100 个值。实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T19:02:50.133

这是一种不同的方法，请参阅关于将附加元素放在前面的评论（您可以在最后的合并中添加第二个数组，以便在 2 个列表项之后添加元素！）

有关工作示例，请参见此处：http: [//codepad.org/hucpT5Yo](http://codepad.org/hucpT5Yo)

```
<?php
$list = array('item1','item2','item3','item4','item5','item6');
$list_chunks = array_chunk($list,2);

$list_chunks2 = array_map(
                     create_function(
                        '$x',  
                        'return array_merge(array(
                           /* This array is prepended to the second, 
                              add as many elements as you like */
                           999999,
                           "another element to add",
                           483274832
                            ), 
                        $x);'), 
                     $list_chunks);

print_r($list_chunks2);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T18:44:47.403

```
$idx = 0;
$newarray = array();
$temparray = array('999999');
foreach($oldarray as $value) {
   $temparray[] = $value;
   if ((++$idx % 2)) == 0) {
       $newarray[] = $temparray;
       $temparray = array('999999');
   }
} 
```

# android - Flash 上的 SQLite 不起作用？

> ID：12269496
> 
> 赞同：0
> 
> 时间：2012-09-04T18:41:32.273
> 
> 标签：android, mobile, air, flash-cs6

我在移动（Android/iOs）的 Flash 项目中工作，我对 Flash 上的 SQLite 感到困惑。我没有使用 FLEX！我只使用 Flash Professional CS6。我正在尝试使用：

```
import flash.data.SQLResult;
import flash.filesystem.File;
import flash.data.SQLStatement;
import flash.data.SQLConnection;
import flash.data.SQLColumnSchema;
import flash.data.SQLTableSchema;
import flash.data.SQLSchemaResult;
import flash.events.SQLEvent;
import flash.events.SQLErrorEvent; 
```

但是所有都返回错误：“-找不到导入文件。” Flash Professional 项目中不存在“flash.data.*”???? 我如何在 Flash 项目中使用 SQLite？

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T04:37:19.310

在“属性”面板中，将目标设置为“AIR 3.x for iOS”或“AIR 3.x for Android”

# sencha-touch-2 - Sencha touch 2：创建所有类构建/缩小源后应用程序挂起

> ID：12269497
> 
> 赞同：1
> 
> 时间：2012-09-04T18:41:35.907
> 
> 标签：sencha-touch-2

我使用“sencha create jsb -a index.html -p app.jsb3”构建我的 sencha 应用程序并使用“sencha build -p app.jsb3 -d ./lib/sdk”构建它。最初 all-classes.js 在每次构建后都是空的。现在我成功地创建了 all-classes.js。从版本 2.0.0 切换到 SDK 工具版本 1.2.3 后，我运行了所有类。但是当我通过包含所有类来运行我的应用程序时，我的应用程序挂起并且没有任何进一步的工作。它只是加载第一个屏幕，没有其他工作，没有滚动，没有触发点击事件。该应用程序只是挂断。

我在我的应用程序启动方法中触发了警报消息，以验证应用程序是否正在启动并且警报是否正常工作。我还尝试在我添加到视口的第一个视图的初始化方法中添加一个警报，该视图会触发。

无法修复它。我迫切需要修复它！有谁知道如何处理这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T12:31:21.970

尝试用 sencha 构建它`app build -e production -a archive`

# java - 使用未经身份验证的 Google 电子表格

> ID：12269501
> 
> 赞同：0
> 
> 时间：2012-09-04T18:41:44.270
> 
> 标签：java, google-app-engine, google-sheets, google-data-api

所有，我有一个基于 GAE 的应用程序，我想使用谷歌电子表格（数据）API 来公开一些报告。为此，我一直在阅读[https://developers.google.com/google-apps/spreadsheets/](https://developers.google.com/google-apps/spreadsheets/)并尝试根据我的需要采用它。在我的情况下，查看报告的真正用户已经通过我的应用程序的身份验证，所以我不想使用 OAuth 1.0 或 2.0 再次对他们进行身份验证。我的用例非常简单。- 用户登录到我的应用程序 - 然后单击一个链接 - 我生成一个谷歌电子表格形式的报告并将用户重定向到报告页面。当我阅读文档时，如果不让用户再次进行身份验证，我无法弄清楚如何做到这一点。请注意，我不想在用户的 google doc 文件夹中创建文档，我想在我的文件夹中创建一个文档并查看它。

感谢您的指点。阿米尔

补充：我正在考虑这个问题，另一个挑战是我必须为每个报告添加一个文档到我的文件夹并分享它？！我希望我可以简单地将报告流式传输到用户的浏览器，但我想这是不可能的！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T20:42:58.237

如果您想在自己的文件夹中生成 Google Doc，那么您的身份验证就是后端需要的，并且共享级别为公开。

# mongodb - C# 驱动程序是否有一个好的开源 MongoDB 队列实现

> ID：12269503
> 
> 赞同：3
> 
> 时间：2012-09-04T18:41:46.127
> 
> 标签：mongodb, message-queue, mongodb-.net-driver

并不是说写一个不够容易（或有趣），可以说不要重新发明轮子是有道理的。我环顾了各种尝试，但似乎还没有遇到支持这些标准的实现；

具有MongoDB持久性的简单队列OSS系统；

*   基于 C# Driver (official) (so full POCO serialization)
*   Tailable 游标而不是轮询
*   处理消息超时（GC 正确）
*   处理消费者故障（理想情况下检测重新插入崩溃，但延迟重新插入超时很好）所以 findAndModify 完成
*   多个作者，多个消费者
*   线程安全

很高兴有;

*   允许（仅最新）消息（替换 Q 中的旧消息）

如果有人在 GitHub 上有一个我还没有找到的简单的库，请说出来！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T15:04:31.063

这是我的一个小项目——一个.net 消息总线实现，它与 MS SQL 队列或 MongoDB 一起工作（MongoDB 支持是最近添加的）。链接：[http](http://code.google.com/p/nginn-messagebus/) ://code.google.com/p/nginn-messagebus/和[http://nginn.org/blog](http://nginn.org/blog)以获取一些示例。我不确定这是否是您正在寻找的东西，它也缺乏文档和示例部门，并且与您的规格不完全匹配（轮询而不是拖尾） - 但也许值得一试。这是一个发布-订阅消息总线，如 NServiceBus 或 MassTransit - 不是原始消息队列。

PS恐怕在您的规范中有相互排斥的要求：您不能将可尾游标与并发消费者一起使用，因为您失去了原子性。如果你想尾随队列，你应该只使用一个消费者。

# java - 读取 xml 的最快和优化方式

> ID：12269504
> 
> 赞同：14
> 
> 时间：2012-09-04T18:41:46.897
> 
> 标签：java, xml

我在 XML 文件下面有这个

```
<book>
<person>
  <first>Kiran</first>
  <last>Pai</last>
  <age>22</age>
</person>
<person>
  <first>Bill</first>
  <last>Gates</last>
  <age>46</age>
</person>
<person>
  <first>Steve</first>
  <last>Jobs</last>
  <age>40</age>
</person>
</book> 
```

现在从 XML 文件中读取数据的 Java 程序如下所示。

```
import java.io.File;
import org.w3c.dom.Document;
import org.w3c.dom.*;

import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.DocumentBuilder;
import org.xml.sax.SAXException;
import org.xml.sax.SAXParseException; 

public class ReadAndPrintXMLFile{

    public static void main (String argv []){
    try {

            DocumentBuilderFactory docBuilderFactory = DocumentBuilderFactory.newInstance();
            DocumentBuilder docBuilder = docBuilderFactory.newDocumentBuilder();
            Document doc = docBuilder.parse (new File("book.xml"));

            // normalize text representation
            doc.getDocumentElement ().normalize ();
            System.out.println ("Root element of the doc is " + 
                 doc.getDocumentElement().getNodeName());

            NodeList listOfPersons = doc.getElementsByTagName("person");
            int totalPersons = listOfPersons.getLength();
            System.out.println("Total no of people : " + totalPersons);

            for(int s=0; s<listOfPersons.getLength() ; s++){

                Node firstPersonNode = listOfPersons.item(s);
                if(firstPersonNode.getNodeType() == Node.ELEMENT_NODE){

                    Element firstPersonElement = (Element)firstPersonNode;

                    //-------
                    NodeList firstNameList = firstPersonElement.getElementsByTagName("first");
                    Element firstNameElement = (Element)firstNameList.item(0);

                    NodeList textFNList = firstNameElement.getChildNodes();
                    System.out.println("First Name : " + 
                           ((Node)textFNList.item(0)).getNodeValue().trim());

                    //-------
                    NodeList lastNameList = firstPersonElement.getElementsByTagName("last");
                    Element lastNameElement = (Element)lastNameList.item(0);

                    NodeList textLNList = lastNameElement.getChildNodes();
                    System.out.println("Last Name : " + 
                           ((Node)textLNList.item(0)).getNodeValue().trim());

                    //----
                    NodeList ageList = firstPersonElement.getElementsByTagName("age");
                    Element ageElement = (Element)ageList.item(0);

                    NodeList textAgeList = ageElement.getChildNodes();
                    System.out.println("Age : " + 
                           ((Node)textAgeList.item(0)).getNodeValue().trim());

                    //------

                }//end of if clause

            }//end of for loop with s var

        }catch (SAXParseException err) {
        System.out.println ("** Parsing error" + ", line " 
             + err.getLineNumber () + ", uri " + err.getSystemId ());
        System.out.println(" " + err.getMessage ());

        }catch (SAXException e) {
        Exception x = e.getException ();
        ((x == null) ? e : x).printStackTrace ();

        }catch (Throwable t) {
        t.printStackTrace ();
        }
        //System.exit (0);

    }//end of main

} 
```

结果是..

```
Root element of the doc is book
Total no of people : 3
First Name : Kiran
Last Name : Pai
Age : 22
First Name : Bill
Last Name : Gates
Age : 46
First Name : Steve
Last Name : Jobs
Age : 40 
```

现在我的查询是请告知是否有其他最快的方式来阅读此 xml，我正在寻找最快的方法，请告知..!!

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-05T01:13:33.850

在下面使用`ReadAndPrintXMLFileWithStAX`时，当我与[gontard 给出](https://stackoverflow.com/a/12271247/383861)`ReadAndPrintXMLFileWithSAX`的答案进行比较时，StAX 方法更快。我的测试涉及在 Mac 的 JDK 1.7.0_07 上运行两个示例代码时间。`500000`

```
ReadAndPrintXMLFileWithStAX:  103 seconds
ReadAndPrintXMLFileWithSAX:   125 seconds 
```

* * *

**ReadAndPrintXMLFileWithStAX（使用 Java SE 7）**

下面是一个更优化的 StAX (JSR-173) 示例，使用`XMLStreamReader`而不是`XMLEventReader`.

```
import java.io.FileInputStream;
import java.io.InputStream;
import javax.xml.stream.*;

public class ReadAndPrintXMLFileWithStAX {

    public static void main(String argv[]) throws Exception {
        XMLInputFactory inputFactory = XMLInputFactory.newInstance();
        InputStream in = new FileInputStream("book.xml");
        XMLStreamReader streamReader = inputFactory.createXMLStreamReader(in);
        streamReader.nextTag(); // Advance to "book" element
        streamReader.nextTag(); // Advance to "person" element

        int persons = 0;
        while (streamReader.hasNext()) {
            if (streamReader.isStartElement()) {
                switch (streamReader.getLocalName()) {
                case "first": {
                    System.out.print("First Name : ");
                    System.out.println(streamReader.getElementText());
                    break;
                }
                case "last": {
                    System.out.print("Last Name : ");
                    System.out.println(streamReader.getElementText());
                    break;
                }
                case "age": {
                    System.out.print("Age : ");
                    System.out.println(streamReader.getElementText());
                    break;
                }
                case "person" : {
                    persons ++;
                }
                }
            }
            streamReader.next();
        }
        System.out.print(persons);
        System.out.println(" persons");
    }

} 
```

**输出**

```
First Name : Kiran
Last Name : Pai
Age : 22
First Name : Bill
Last Name : Gates
Age : 46
First Name : Steve
Last Name : Jobs
Age : 40
3 persons 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-04T20:56:41.260

如果性能对您来说很重要，那么您应该更喜欢[SAX](http://fr.wikipedia.org/wiki/Simple_API_for_XML)或 StAX(http://en.wikipedia.org/wiki/StAX) 而不是[DOM](http://en.wikipedia.org/wiki/Document_Object_Model)。

使用`DOM`，在第一次将`XML`文件解析为对象模型时，您可以询问它。因此，对于您的算法，有两遍。

随着`SAX`，在解析过程中，一些回调被调用（`startDocument`，`endElement`...）， `SAX`是基于事件或*推送模型*。

使用`StAX`，您可以控制解析。您将光标从一个元素移动到另一个元素。这是一个*拉模型*。

使用包含 32910000 人的文件，我将我的版本与`SAX`（Blaise Doughan 的）过度回答与`StAX`. 我删除了所有的`System.out.println`说明。我的程序用了 106 秒来读取所有文件，而另一个用了 94 秒。我想这`SAX`会更慢，因为`callback`即使它们什么都不做（*推模型*）也会调用所有的，而使用 StAX 时，光标仅在“有趣的”元素（*拉模型*）上移动。

以 java 7 为例：

```
import java.io.File;

import javax.xml.parsers.SAXParser;
import javax.xml.parsers.SAXParserFactory;

import org.xml.sax.Attributes;
import org.xml.sax.SAXException;
import org.xml.sax.helpers.DefaultHandler;

public class ReadAndPrintXMLFileWithSax {

    public static void main(String[] args) throws Exception {
        SAXParserFactory fabrique = SAXParserFactory.newInstance();
        SAXParser parser = fabrique.newSAXParser();

        File file = new File("book.xml");
        BookHandler handler = new BookHandler();
        parser.parse(file, handler);
    }

    public static class BookHandler extends DefaultHandler {
        private int count = 0;
        private StringBuilder buffer;

        @Override
        public void startElement(String uri, String localName, String qName,
                Attributes attributes) throws SAXException {
            switch (qName) {
            case "person":
                count++;
                break;
            case "first":
                buffer = new StringBuilder("First Name : ");
                break;
            case "last":
                buffer = new StringBuilder("Last Name : ");
                break;
            case "age":
                buffer = new StringBuilder("Age : ");
                break;
            }
        }

        @Override
        public void characters(char[] ch, int start, int length)
                throws SAXException {
            String content = new String(ch, start, length);
            if (buffer != null)
                buffer.append(content);
        }

        @Override
        public void endElement(String uri, String localName, String qName)
                throws SAXException {
            switch (qName) {
            case "first":
            case "last":
            case "age":
                System.out.println(buffer.toString());
                break;
            }
        }

        @Override
        public void endDocument() throws SAXException {
            System.out.println(count + " persons");
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-04T19:50:55.480

税务示例

```
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.InputStream;
import javax.xml.stream.XMLEventReader;
import javax.xml.stream.XMLInputFactory;
import javax.xml.stream.XMLStreamException;
import javax.xml.stream.events.StartElement;
import javax.xml.stream.events.XMLEvent;

public class ReadAndPrintXMLFile {

    public static void main(String argv []) {

        String inputFile = "c:/source/book.xml";

        try {
            // First create a new XMLInputFactory
            XMLInputFactory inputFactory = XMLInputFactory.newInstance();
            // Setup a new eventReader
            InputStream in = new FileInputStream(inputFile);
            XMLEventReader eventReader = inputFactory.createXMLEventReader(in);
            // Read the XML document

            while (eventReader.hasNext()) {
                XMLEvent event = eventReader.nextEvent();

                if (event.isStartElement()) {
                    StartElement startElement = event.asStartElement();

                    if (startElement.getName().getLocalPart().equals("first")) {

                        event = eventReader.nextEvent();

                        StringBuilder fName = new StringBuilder();

                        while (!event.isEndElement()) {
                            fName.append(event.asCharacters().getData());
                            event = eventReader.nextEvent();
                        }
                        System.out.println("First Name : " + fName);

                        event = eventReader.nextEvent();

                        continue;
                    }

                    if (startElement.getName().getLocalPart().equals("last")) {

                        event = eventReader.nextEvent();

                        StringBuilder lName = new StringBuilder();

                        while (!event.isEndElement()) {
                            lName.append(event.asCharacters().getData());
                            event = eventReader.nextEvent();
                        }
                        System.out.println("Last Name : " + lName);

                        event = eventReader.nextEvent();

                        continue;
                    }

                    if (startElement.getName().getLocalPart().equals("age")) {

                        event = eventReader.nextEvent();

                        StringBuilder age = new StringBuilder();

                        while (!event.isEndElement()) {
                            age.append(event.asCharacters().getData());
                            event = eventReader.nextEvent();
                        }
                        System.out.println("Age : " + age);

                        event = eventReader.nextEvent();

                        continue;
                    }

                }
            }
        } catch (FileNotFoundException e) {
            System.out.println("File not Found: " + inputFile);
        } catch (XMLStreamException e) {
            e.printStackTrace();
        }
    }

} 
```

输出：

```
First Name : Kiran
Last Name : Pai
Age : 22
First Name : Bill
Last Name : Gates
Age : 46
First Name : Steve
Last Name : Jobs
Age : 40 
```

# python - Numpy array.resize() - 'first' 归零

> ID：12269506
> 
> 赞同：3
> 
> 时间：2012-09-04T18:41:52.530
> 
> 标签：python, arrays, numpy

我可以用它`array.resize(shape)`来调整我的数组的大小，并将零添加到这些索引中而没有任何值。如果我的数组是`[1,2,3,4]`并且我使用`array.resize[5,0]`我得到`[1,2,3,4,0]`. 如何将零附加/填充到前面，产生`[0,1,2,3,4]`？

我正在动态执行此操作 - 尝试使用：

```
array.resize(arrayb.shape) 
```

我想避免（不惜一切代价）制作数组的内存副本。也就是对数组进行反转，调整大小，再反转一次。使用视图将是理想的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T20:50:45.833

您可以尝试处理具有负步幅的数组（尽管您永远无法确定调整大小可能不必制作副本）：

```
_a = np.empty(0) # original array
a = _a[::-1] # the array you work with...

# now instead of a, resize the original _a:
del a # You need to delete it first. Or resize will want refcheck=False, but that
      # will be dangerous!
_a.resize(5)
# And update a to the new array:
a = _a[::-1] 
```

但是我真的建议您以任何可能的方式使数组足够大，这看起来不是很漂亮，但我认为这是复制数据的唯一方法。你的数组也会有一个负步幅，所以它不会是连续的，所以如果这意味着你在它上面使用的某些函数必须进行复制，那么你就不走运了。

此外，如果您切片`a`，或者`_a`您必须制作一个`copy`，或者确保在调整大小之前删除它们。虽然你可以给`refcheck=False`这似乎使数据无效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T19:05:05.877

我相信你可以使用切片分配来做到这一点。我认为没有理由`numpy`需要为这样的操作制作副本，只要它对重叠进行必要的检查（当然，正如其他人所指出的那样，`resize`它本身可能必须分配一个新的内存块）。我用一个非常大的数组测试了这个方法，我发现内存使用没有跳跃。

```
>>> a = numpy.arange(10)
>>> a.resize(15)
>>> a[5:] = a[:10]
>>> a[0:5] = 0
>>> a
array([0, 0, 0, 0, 0, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9]) 
```

以下显示分配操作的内存使用量没有跳跃：

```
>>> a = numpy.arange(100000000)
>>> a.resize(150000000)
>>> a[50000000:] = a[:100000000] 
```

我不知道更好的方法，这只是一个猜想。让我知道它是否不起作用。

# asp.net - 将 ASP.NET 应用程序本地化为普通话

> ID：12269507
> 
> 赞同：7
> 
> 时间：2012-09-04T18:41:57.373
> 
> 标签：asp.net, localization

我们开发了一个中型 ASP.NET / SQL Server 应用程序，它使用资源文件来提供英语和西班牙语用户界面变体。Unicode 数据类型在整个数据库中使用。现在我们被要求添加普通话。我没有本地化到亚洲语言的经验，所以我真的无法想象这将是一份什么样的工作。

我的问题是：

1.  与本地化成另一种西方语言（如法语或德语）相比，这项工作有多复杂？
2.  除了（显然）翻译资源文件中的字符串之外，我还应该处理哪些其他问题来进行中文本地化？任何与不同字母有关的东西，也许？

非常欢迎报告以前的经验或最佳实践指南。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T14:18:19.070

1.  在技​​术方面，我认为这并不困难。如果您始终不使用 Unicode，添加对非西方语言的支持将暴露编码问题，但无论如何使用 UTF-8 编码和 Unicode SQL 类型（`nvarchar`而不是）几乎是常态。`varchar`

    我想说的是，增加的复杂性和不确定性更多是关于非技术方面的。当我们看到 1:1 的翻译时，我们大多数说英语的人都能对欧洲语言有所了解，并且会注意到很多问题。但是普通话对我们大多数人来说完全没有意义，所以让母语人士在发布前审查或至少抽查应用程序更为重要。

2.  需要注意的一件事是输入法问题：说中文的人使用 IME（输入法编辑器）来输入文本，因此避免编写自定义客户端输入代码，例如捕获和处理击键。

    另一个问题是要选择的实际文化标识符。中文有几种变体（在中国`zh-Hans`替换`zh-CHS`和使用，在台湾`zh-Hant`替换`zh-CHT`使用）。有关这方面的更多信息，请参阅[此 MSDN 页面上的注释。](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.parent)但这些是中性文化标识符（它们不是特定于国家/地区的），可用于本地化，但不能用于数字和日期格式等内容，因此理想情况下，您应该使用特定的文化标识符，例如`zh-CN`中国和`zh-TW`台湾。为 Web 应用程序选择特定的文化可能很棘手，因此这种选择通常基于您的市场预期。有关不同 .NET 文化标识符的更多信息，请参见[另一篇文章](https://stackoverflow.com/questions/732109/chinese-language-codes)。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-08T20:23:29.073

就用户界面中的文本翻译而言，中文的本地化工作可能与西方语言的本地化工作相当。与英语和西班牙语一样，中文是从左到右阅读的，因此您无需像必须支持阿拉伯语或希伯来语那样镜像页面布局。这里还有几点需要考虑：

*   **字体大小：**中文字符比拉丁字符更复杂，因此您可能需要使用更大的字体大小。英语和西班牙语在 8pt 时可读；对于中文，您至少需要 10pt。

*   **字体样式：**在英语中，**粗体**和*斜体*通常用于强调。在中文中，强调通常通过不同的字体、字体大小或颜色来实现。[谨慎使用粗体](http://blogs.msdn.com/b/oldnewthing/archive/2006/09/14/754051.aspx)，避免使用斜体。

但是，如果您的目标是亚洲市场，则可能需要进行更重大的更改。这里有一些例子：

*   **人名：**典型的中文名字是孙中山：第一个字符（孙）是姓氏，第二个和第三个字符（中山）构成了名字。这当然与西方常见的“名”+空格+“姓”的惯例相反。如果您要存储和显示姓名，您可能希望使用单个“姓名”字段而不是单独的“名字”和“姓氏”字段。

*   **颜色：**在美国，通常用绿色表示“好”，用红色表示“坏”。然而，在中国和台湾，红色是“好”的。例如，比较[Yahoo!上的股票价格！](http://finance.yahoo.com/intlindices?e=asia)与[雅虎！台湾](http://tw.stock.yahoo.com/us/worldidx.php)。

*   **缺少字母：**汉字不是基于字母的。因此，例如，提供按每个条目的第一个字母过滤列表的功能（如在名称目录中）是没有意义的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-09T07:48:52.503

关于排序顺序，中文使用不同的方法：二进制（即Unicode）、部首+笔画、拼音（=罗马化）和Bopomofo（=音节）。

在 SQL Server 上，您可以在列定义中或在语句级别使用[COLLATE 子句](http://msdn.microsoft.com/en-us/library/ms184391.aspx)定义排序顺序。也可以在数据库级别使用默认排序规则。

运行此语句以查看所有支持的中文排序规则：

```
select * from fn_helpcollations()
where name like 'chinese%' 
```

在 .Net 中，还有一个用于排序的中国文化列表，请参阅[MSDN](http://msdn.microsoft.com/en-us/library/a7zyyk0c.aspx)。

# php - 除了 MailChimp 之外，我如何将表单发布到自定义 php 脚本

> ID：12269509
> 
> 赞同：1
> 
> 时间：2012-09-04T18:42:11.603
> 
> 标签：php, jquery, forms, post, mailchimp

任何人都可以为我提供任何帮助或建议来调试此问题吗？

**我有一个`POST`邮寄给 MailChimp 的表格：**

```
<form id="mailchimp_signup" action="http://MY_MC_ACCT.us2.list-manage.com/subscribe/post" method="POST">
...
<input type="submit" class="button" name="submit" value="Subscribe to list">
... 
```

**但是，如果满足某些条件（选中的复选框），我需要此表单发送额外的电子邮件：**

```
$('input[type=submit]').click(function(e){
    if( $('input[name="more_info"]:checked').val() && !$('#mailchimp_signup').hasClass('success') ){
        e.preventDefault();
        $.post("../process_email_form.php", $('#mailchimp_signup').serialize(), function(){
            alert('posted');
            $('#mailchimp_signup').submit();
        });
    }            
}); 
```

**发生了什么：**

*   `process_email_form.php`工作正常，并发送电子邮件。

*   正在触发`alert('posted')` *。*

*   不幸的是，我似乎无法将表单提交给 MailChimp。警报触发，但什么也没有……我在控制台中看不到任何错误。

*   由于某种原因，直接在控制台中输入`$('#mailchimp_signup').submit();`甚至不会将表单发布到 MailChimp

**更多背景**

这实际上是我写的关于这个问题的第三个问题。起初我试图用 cURL 解决它，但这似乎是错误的方法。以供参考：

1.  [在从表单发布到其他人的脚本之前如何执行 php？](https://stackoverflow.com/questions/12165649/how-can-i-execute-php-before-posting-to-someone-elses-script-from-a-form)
2.  [使用 cURL 将表单发布到两个地方](https://stackoverflow.com/questions/12184620/using-curl-to-post-form-to-two-places)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T19:25:53.357

您可以在第一个请求完成后务实地提交表单。

```
$('input[type=submit]').click(function(e){
        if( $('input[name="more_info"]:checked').val() && !$('#mailchimp_signup').hasClass('success') ){
            e.preventDefault();
            $.post("../process_email_form.php", $('#mailchimp_signup').serialize(), function(){
                alert('posted');
                $.post($('#mailchimp_signup').attr('action'),$('#mailchimp_signup').serialize(),function(html){
                    //do something with the result eg. $(document).html(html);
                });
            });
        }            
    }); 
```

或者您可以在没有异步的情况下运行第一个请求，这将锁定浏览器，直到 ajax 请求完成。

```
$('input[type=submit]').click(function(e){
    if( $('input[name="more_info"]:checked').val() && !$('#mailchimp_signup').hasClass('success') ){
        $.ajax({
            url:"../process_email_form.php", 
            data:$('#mailchimp_signup').serialize(),
            type:'POST',
            async:false
        });
    }            
}); 
```

# python - 使用 python pandas 解析日期格式为年、日、小时、分钟、秒的 CSV

> ID：12269528
> 
> 赞同：6
> 
> 时间：2012-09-04T18:43:55.323
> 
> 标签：python, pandas, python-dateutil

我有几个 CSV 文件的格式：

```
Year,Day,Hour,Min,Sec.,P1'S1
 2003,  1, 0, 0,12.22, 0.541
 2003,  1, 1, 0,20.69, 0.708
 2003,  1, 2, 0, 4.95, 0.520
 2003,  1, 3, 0,13.42, 0.539
... 
```

（其中*day*是*一年*中的哪一天），我正在尝试使用**pandas**库来阅读它们（到目前为止，这似乎是一个很棒的库）。

有一个内置函数可以读取 pandas 中的 CSV，甚至更好的是，该函数应该检查列的日期类型。并自动将其用作索引（这对于我正在做的事情来说非常完美）。

问题是，我无法让它处理这种格式的日期数据。

我试过：

```
data = pd.read_csv("csvFile.csv", index_col=[0, 1],  , index_col=[0, 1, 2, 3, 4] parse_dates=True) 
```

但**它只能正确获取年份**：

```
In [36]: data.index
Out[36]: 
MultiIndex
[(<Timestamp: 2003-09-04 00:00:00>, 1, 0, 0, 12.22)
 (<Timestamp: 2003-09-04 00:00:00>, 1, 1, 0, 20.69)
 (<Timestamp: 2003-09-04 00:00:00>, 1, 2, 0, 4.95) ...,
 (<Timestamp: 2003-09-04 00:00:00>, 365, 21, 0, 3.77)
 (<Timestamp: 2003-09-04 00:00:00>, 365, 22, 0, 14.6)
 (<Timestamp: 2003-09-04 00:00:00>, 365, 23, 0, 13.36)] 
```

从文档中，我看到您可以**在 pandas 的 read_csv 函数中指定“date_parser”属性**。但是文档没有显示如何并且我无法弄清楚。任何有这方面经验的人都可以提供帮助。

干杯，布鲁诺

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-05T02:14:39.627

为了解析多列日期，你需要告诉pandas哪些列应该组合成一个日期，所以你需要说`parse_dates=['Year','Day','Hour','Min','Sec']`

您还需要定义自己的解析器，该解析器从您指定的每一列中获取一个元素`parse_dates`：

```
In [1]: import pandas as pd

In [2]: from datetime import datetime, timedelta

In [3]: from cStringIO import StringIO

In [4]: data = """\
Year,Day,Hour,Min,Sec.,P1'S1
 2003,  1, 0, 0,12.22, 0.541
 2003,  1, 1, 0,20.69, 0.708
 2003,  1, 2, 0, 4.95, 0.520
 2003,  1, 3, 0,13.42, 0.539
"""

In [5]: def parse(yr, doy, hr, min, sec):
    yr, doy, hr, min = [int(x) for x in [yr, doy, hr, min]]
    sec = float(sec)
    mu_sec = int((sec - int(sec)) * 1e6)
    sec = int(sec)
    dt = datetime(yr - 1, 12, 31)
    delta = timedelta(days=doy, hours=hr, minutes=min, seconds=sec,
                      microseconds=mu_sec)
    return dt + delta
   ...: 

In [6]: pd.read_csv(StringIO(data), parse_dates={'datetime':      
           ['Year','Day','Hour','Min','Sec.']}, 
           date_parser=parse, index_col='datetime')
Out[6]: 
                            P1'S1
datetime                         
2003-01-01 00:00:12.220000  0.541
2003-01-01 01:00:20.690000  0.708
2003-01-01 02:00:04.950000  0.520
2003-01-01 03:00:13.419999  0.539 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-21T04:26:55.183

# 使用`pandas.to_datetime()`

```
import pandas as pd

def parser(year, yday, h, m, s):
    return pd.to_datetime(year + '-' + yday + ' ' + h + ':' + m + ':' + s,
                          format='%Y-%j %H:%M:%S')

df = pd.read_csv('input.csv',
         parse_dates={'datetime': ['Year','Day','Hour','Min','Sec.']}, 
         date_parser=parser,
         index_col='datetime') 
```

# makefile - Makefile 中的假动态文件

> ID：12269529
> 
> 赞同：0
> 
> 时间：2012-09-04T18:43:58.093
> 
> 标签：makefile

我想`pocketlint`在所有`**/*.js`文件上运行。

```
.PHONY: lint_js2

LINT_JS = $(wildcard static/js/*.js static/js/**/*.js)
LINT_JS_TARGETS = $(addprefix lint__,$(LINT_JS))

#.PHONY: $(LINT_JS_TARGETS)

lint_js2: $(LINT_JS_TARGETS)
    echo $<

lint__%: %
    pocketlint $< 
```

但是，我收到此错误：

```
make: *** No rule to make target `lint__static/js/ad_list.js', needed by `lint_js2'.  Stop. 
```

1.  为什么`lint__static/js/ad_list.js`不被俘虏`lint__%`？
2.  如果我取消第二个注释`.PHONY`，它会回显`lint__static/js/ad_list.js`，但不会调用`pocketlint static/js/ad_list.js`。为什么？

如果我的方法是错误的，那么正确的方法是什么？由于任务是独立的，如果`make -j50`能做我所期望的，我将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T22:34:44.287

目前尚不清楚其意图是什么：确实`pocketlint`写了一个名为 的文件`lint__static/js/ad_list.js`，还是真的是一个虚假的文件名？反正...

1.  [重读模式如何匹配](http://www.gnu.org/software/make/manual/html_node/Pattern-Match.html)的第二段：

    > 当目标模式**不包含斜杠**时（通常不包含），**文件名中的目录名在与目标前缀和后缀比较之前从文件名中删除**。在将文件名与目标模式进行比较之后，目录名以及结束它们的斜线被添加到由模式规则的先决条件模式和文件名生成的先决条件文件名中。

    简而言之，`%`通常只匹配文件名，而不是带有斜杠的路径名。所以`lint__static/js/ad_list.js`没有被捕获，因为实际上它只是`ad_list.js`被匹配到`lint__%`.

    如果您可以安排它以便输出文件`pocketlint`等`static/js/lint__ad_list.js`，那么这可以工作：

    ```
    LINT_JS_TARGETS = $(foreach f,$(LINT_JS),$(dir $f)lint__$(notdir $f))

    lint__%: %
        pocketlint $< 
    ```

    或者，您可以`%`通过将目标模式设为路径名（包含斜杠）来匹配路径名：

    ```
    LINT_JS_TARGETS = $(addprefix linted/,$(LINT_JS))

    linted/%: %
        pocketlint $< 
    ```

    这次`%`=`static/js/ad_list.js`确实符合模式规则。

    在任何一种情况下，您都必须将`pocketlint`产生输出（如果确实产生输出）命名为不同于`lint__static/*`.

2.  对于虚假目标，隐式规则搜索被抑制（参见虚假[目标](http://www.gnu.org/software/make/manual/html_node/Phony-Targets.html)，第 5 段）。因此，当虚假`pocketlint`时，从不考虑涉及的规则。`lint__static/js/ad_list.js`

    不清楚为什么结果是*Nothing to be done for (phony)* `lint__static/js/ad_list.js`而不是*No rule to make target* `lint__static/js/ad_list.js`，但我不会为此失眠！

# c# - 如何从 sliderExtender 以编程方式获取数值？

> ID：12269532
> 
> 赞同：0
> 
> 时间：2012-09-04T18:44:03.407
> 
> 标签：c#, asp.net

**我尝试了什么：**

**标记：**

```
 <asp:TextBox ID="TextBox2"   runat="server"></asp:TextBox>

    <asp:Label ID="Label1" runat="server" AssociatedControlID="TextBox2"  Text="Label"></asp:Label>

    <asp:SliderExtender ID="SliderExtender1"  TargetControlID="TextBox2"  BoundControlID="Label1" Maximum="200" Minimum="100" runat="server">
    </asp:SliderExtender> 
```

**输出：**

![在此处输入图像描述](../Images/ab8df3222834af83091276ee0c97f836.png)

现在我怎样才能在我的 C# 代码中以编程方式获得显示“100”的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T18:47:30.893

您可以尝试使用 SliderExtender1.Value

```
var result = SliderExtender1.Value; 
```

# javascript - jquery .html 有效，但 .add 无效

> ID：12269534
> 
> 赞同：-1
> 
> 时间：2012-09-04T18:44:05.767
> 
> 标签：javascript, jquery

我的代码：

```
$(document).ready(function() {
    $(this.body).html("<p>using .html</p>"); // works
    $(this.body).add("<p>using .add</p>"); // doesn't work
});​ 
```

[一些jsfiddle](http://jsfiddle.net/ZLzw8/)

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T18:45:45.167

你想使用[`append`](http://api.jquery.com/append/)：

```
$(this.body).append("<p>using .add</p>") 
```

[`add`](http://api.jquery.com/add/)是为了别的：

> 描述：将元素添加到匹配元素的集合中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T18:45:33.860

您应该使用**append**而不是**add**。 [小提琴](http://jsfiddle.net/ZLzw8/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T18:47:30.303

add() 不会写入 DOM，它会向 jQuery 对象添加更多元素。

```
var x = $("li") //would create a jQuery object
x.add("span") //would add span tags to that object. 
```

要编写您想要 append() 或 appendTo() 的 jQuery 对象的内容...

```
x.appendTo("body"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T18:49:46.767

`add`说明：`"Add elements to the set of matched elements."` [参考](http://api.jquery.com/add/)

`html`将替换`this.body`内容。

`append`将添加到内容的末尾。也许这就是你想要的。

`$(this.body).append('<p>using .append</p>');`

# javascript - 重新加载后检测窗口的存在

> ID：12269535
> 
> 赞同：5
> 
> 时间：2012-09-04T18:44:09.480
> 
> 标签：javascript, jquery, browser, window, refresh

所以假设我这样做

```
var myWindow = false;
$('someelement').click(function(){
  var myWindow = window.open('url', 'name', 'width=100,height=200');
}); 
```

因此用户单击窗口 A 上的元素并打开一个新窗口（称为窗口 B）...

但是然后假设窗口A被重新加载...因此，var myWindow现在设置为false...但是窗口B仍然打开...如何在窗口A之后从窗口A检测窗口B的存在重新加载

我知道你可以这样做：

```
var hasWindow = window.open('', 'name'); 
```

如果它已经打开，它将返回对窗口 B 的引用。

但是如果窗口 B 还没有打开，这将触发一个窗口打开，这是不可取的

如果在窗口 B 未打开的情况下打开而不触发新窗口打开，我如何获得对窗口 B 的引用？（不诉诸饼干技巧）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T01:34:32.080

保持少量状态而不存储在 cookie 中的最佳方法是将某些内容保存到您的 window.name 中。但是，它只适用于字符串，因此如果您想要的不仅仅是一点数据，则需要将其保存为 JSON 字符串。

读书：

```
var keptState;
if (window.name !== "") {
    keptState = JSON.parse(window.name);
} 
```

来写：

```
state = {
    "popupOpened" : true,
    "popupName" : "otherWindowName"
};
window.name = JSON.stringify(state); 
```

在刷新的另一边（或者甚至离开站点并返回），它会保留你想要的变量。但是，如果您确实想要引用另一个窗口，那么您就只能靠自己了。我想不出任何方法来确定它确实存在。如果有人自行关闭弹出窗口，这将是一个问题。

至少通过这种方式，您可以查明您是否打开了它。如果你真的需要那个没有弹出窗口的窗口，那么你可以做一个弹出窗口。当我这样做时，这总是感觉有点阴暗，但这可能是满足您要求的最佳方式。

```
var myWindow = window.open('', 'otherWindowName');
myWindow.blur();
window.focus(); 
```

# python - 与 Flask 捆绑在一起的服务器在生产中使用是否安全？

> ID：12269537
> 
> 赞同：85
> 
> 时间：2012-09-04T18:44:10.697
> 
> 标签：python, flask, werkzeug

与 Flask 捆绑在一起的服务器是否可以安全地部署在生产环境中？如果没有，我应该使用什么来在生产中部署 Flask？

* * *

## 回答 #1

> 赞同：125
> 
> 时间：2012-09-04T19:16:26.793

**没有**。捆绑的服务器是*开发*服务器。它的设计并未考虑生产环境。

*   默认情况下，它一次不会处理多个请求。
*   如果您打开调试模式并弹出错误，它会打开一个外壳，允许在您的服务器上执行任意代码（想想`os.system('rm -rf /')`）。
*   开发服务器不能很好地扩展。

Flask 使用 Werkzeug 的开发服务器，文档也说了同样的话：

> 开发服务器不打算在生产系统上使用。它专为开发目的而设计，在高负载下表现不佳。对于部署设置，请查看[应用程序部署](http://werkzeug.pocoo.org/docs/0.14/deployment/)页面。

推荐的方法是[使用生产 WSGI 服务器](http://flask.pocoo.org/docs/1.0/deploying/wsgi-standalone/)来运行您的 Flask 应用程序。文档中有一个专门用于部署的部分：[部署选项](http://flask.pocoo.org/docs/deploying/)。

部署您的应用程序就像安装 uWSGI 或 gunicorn 之类的 WSGI 服务器并运行它而不是 Flask 的开发服务器一样简单：

```
gunicorn -w 4 -b 127.0.0.1:4000 myproject:app 
```

* * *

如果您提供任何静态资产（如图像或视频）、需要低级缓存或有更高的并发需求，建议使用像[nginx](http://nginx.org/)这样的网络服务器并让它处理您的所有请求。

以蹩脚的 ASCII 形式：

```
 +----------+
                | Client 2 |
                +----------+
                      |
                      V 
+----------+      +-------+      +----------+
| Client 1 |----->| nginx |<-----| Client 3 |
+----------+      +-------+      +----------+
                      ^
                      |
                      V
           /--------------------\
           | useful nginx stuff |
           | like asset serving |
           | and rate limiting  |
           \--------------------/
                      |
                      V
               +-------------+
               | WSGI server |
               +-------------+ 
```

要实际*运行*WSGI 服务器进程，可以使用[Supervisor](http://supervisord.org/)。如果由于某种原因失败，它会自动重新启动服务器，保留日志并作为守护程序运行，以便您的服务在服务器启动时启动。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-09-04T18:49:29.590

基本上，没有。内置的开发服务器在生产环境中部署并不安全。

内置的*开发*服务器就是为了这个。要在生产中使用，您应该遵循[此处](http://flask.pocoo.org/docs/deploying/)详述的步骤之一。

这些包括实现 WSGI 规范的不同服务器，例如[Apache/mod_wsgi](http://www.modwsgi.org/)或这些独立 wsgi 服务器之一[http://flask.pocoo.org/docs/deploying/wsgi-standalone/](http://flask.pocoo.org/docs/deploying/wsgi-standalone/)

还有[uWSGI](http://flask.pocoo.org/docs/deploying/uwsgi/)和[FastCGI](http://flask.pocoo.org/docs/deploying/fastcgi/)选项可用

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-08-17T09:49:03.587

虽然轻量级且易于使用，但 Flask 的内置服务器不适合生产，因为它不能很好地扩展，并且默认情况下一次只服务一个请求。 [http://flask.pocoo.org/docs/0.12/deploying/](http://flask.pocoo.org/docs/0.12/deploying/)

# java - JAVA中是如何携带通知的？

> ID：12269540
> 
> 赞同：2
> 
> 时间：2012-09-04T18:44:17.823
> 
> 标签：java, events, notifications

我正在阅读有关事件样式架构的内容并遇到了这个

> 有不同的方法来传递通知，但最常见的技术使用间接方法调用，该方法调用是通过在运行时初始化的指针进行的。

但是当 Java 没有指针时，它如何传递通知？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T19:01:35.080

Java 的事件系统基于[观察者](http://en.wikipedia.org/wiki/Observer_pattern)模式，除了在 Java Swing 中，一切都称为“侦听器”而不是“观察者”，并且通常实现[`EventListener`](http://docs.oracle.com/javase/6/docs/api/java/util/EventListener.html)（正如您可以从该链接顶部的野兽中看出的那样）。

例如，像 a 这样的组件`JButton`允许您向其添加侦听器，以关注按钮何时发生某些事情。如果您的听众关心按钮点击，您可以添加一个`ActionListener`按钮，`JButton`并将其添加到一个内部列表以供以后使用（具体来说，它使用`EventListenerList`）。当用户单击该按钮时，`JButton`该类将“触发”一个事件给`ActionListener`已向其注册的所有实现。

这基本上是观察者模式，因为您有一个正在被观察的主题（`JButton`）和一个希望收到有关主题更改或事件的通知的观察者（`ActionListener`）。

Java 本身没有指针，但这并不意味着这不能完成。在 C++ 中，您可以将函数指针传递给主体，主体将调用该函数。由于 Java 没有函数指针，因此您将实现特定接口的对象传递给主体，主体将调用该接口上的确切方法。在上面的示例中，这就是`ActionListener.actionPerformed(ActionEvent)`方法。

请注意，这种方法在 Swing 之外的其他 Java 库中也很流行，因为缺少函数指针等机制以及 Java 接口的流行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T19:03:21.447

Java Swing 使用侦听器来传递有关事件的通知。

这是 Swing 类的代码片段

```
 Font font = model.getActivityFont();
        activityTextFontButton = new JButton(getFontText(font));
        activityTextFontButton.setFont(font);
        activityTextFontButton.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent event) {
                JFontChooser fontChooser = new JFontChooser();
                fontChooser.setSelectedFont(model.getActivityFont());
                int result = fontChooser.showDialog(dialog);
                if (result == JFontChooser.OK_OPTION) {
                    Font font = fontChooser.getSelectedFont();
                    String text = getFontText(font);
                    model.setActivityFont(font);
                    activityTextFontButton.setText(text);
                    activityTextFontButton.setFont(font);
                    JButton dummy = new JButton(text);
                    setButtonSizes(activityTextFontButton, 
                            connectorTextFontButton, dummy);
                    dialog.validate();
                    dialog.pack();
                }
            }
        }); 
```

当按下按钮时，JButton 类执行属于 ActionListener 的代码。那是因为 JButton 类具有对 ActionListener 实例的引用，并且知道要执行的方法是 actionPerformed。

Java 中还有其他方法可以驱动事件（请参阅 Observer / Observed 类），但侦听器是传递有关事件的通知的一种非常酷的方法。

# core-data - Core Data 逆向关系和删除未使用的对象

> ID：12269543
> 
> 赞同：0
> 
> 时间：2012-09-04T18:44:30.493
> 
> 标签：core-data, cascading-deletes, inverse

我有一个与此类似的核心数据模型：

![在此处输入图像描述](../Images/fe9baa806e0ab8644c95274a9d8890cb.png)

*保存 Webgallery*或Article*对象*时，它可能会使用一张或多张图片。他们可以使用相同的摄影主题，但可能尺寸不同。我不保存未在*WebGallery*或*文章*中使用的图片。

*Picture*的关系*实例*和*social*被设置为级联，所以当*Picture*对象被删除时，相应的*PictureInstance*和*Social*对象也被删除。

1) 有没有办法知道图片何时不再被使用，无论是通过*WebGallery*还是通过*文章*都可以删除？

2）关系*previewPicture*和*teaserPicture*没有逆关系是否有问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T20:32:54.050

你应该有一个逆关系。反过来，问题就变得微不足道了。当一个简单的级联规则将它们从 WebGallery 和文章中删除时。（或者也许你只是想取消）。

> 您通常应该对两个方向的关系进行建模，并适当地指定反向关系。Core Data 使用此信息来确保对象图的一致性，如果发生更改（请参阅“操作关系和对象图完整性”）。有关您可能不想在两个方向上建模关系的一些原因以及如果不这样做可能出现的一些问题的讨论，请参阅“单向关系”。</p>

（核心数据编程指南）

每当您从图库或文章中删除图片时，您都可以简单地检查是否使用了图片：

```
[gallery removePictureObject:pictureToRemove];
if (pictureToRemove.galleries.count == 0 && pictureToRemove.articles.count == 0) {
    [managedObjectContext deleteObject:pictureToRemove];
} 
```

# vb.net - 如何在windows mobile应用程序中获取图片的缩略图

> ID：12269548
> 
> 赞同：2
> 
> 时间：2012-09-04T18:45:01.443
> 
> 标签：vb.net, windows-mobile-5.0

我正在 VB.NET 中开发一个小型应用程序，我需要将手机中的图像加载到图片框中。不过，我无法将图片添加到图片框中。它抛出 OutOfMemoryException。我想知道是否有任何方法可以通过将图片更改为缩略图来减小图片的大小。

```
Dim srcmap As New Bitmap(OpenFileDialog1.FileName)
Dim destbit As New Bitmap(220, 220)
Dim srcRec As New Rectangle(0, 0, srcmap.Width, srcmap.Height)
Dim destRec As New Rectangle(0, 0, 220, 220)
Dim g As Graphics
g = Graphics.FromImage(destbit)
g.DrawImage(srcmap, destRec,srcRec, GraphicsUnit.Pixel)
picturebox.Image = destbit 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T04:00:19.340

这是我针对该问题的 OpenNetCF C# 片段：

```
    ...
    //图像工厂
    使用 OpenNETCF.Drawing；
    使用 OpenNETCF.Drawing.Imaging；
    ...
            OpenNETCF.Drawing.Imaging.StreamOnFile m_stream;
            尺寸 m_size;
            ///
            /// 这也将处理大位图并在图片框上显示缩略图版本
            /// 见 http://blog.opennetcf.com/ctacke/2010/10/13/LoadingPartsOfLargeImagesInTheCompactFramework.aspx
            ///
            /// 要加载的文件名
            私人无效showImage（字符串sFileName）
            {
                var stream = File.Open(sFileName, FileMode.Open);
                m_stream = new StreamOnFile(stream);
                m_size = ImageHelper.GetRawImageSize(m_stream);
                System.Diagnostics.Debug.WriteLine("showImage loading " + sFileName + ", width/height = " + m_size.Width.ToString() + "/"+ m_size.Height.ToString());
                //CameraPreview.Image = ImageHelper.CreateThumbnail(m_stream, CameraPreview.Width, CameraPreview.Height);
                CameraSnapshot.Image = ImageHelper.CreateThumbnail(m_stream, CameraPreview.Width, CameraPreview.Height);
                显示快照（真）；//显示静止图像
                m_stream.Dispose();
                流。关闭（）；
            }

```

与 imagehelper.cs：http://code.google.com/p/intermeccontrols/source/browse/DPAG7/Hasci.TestApp.And_Controls/IntermecControls/Hasci.TestApp.IntermecCamera3/ImageHelper.cs

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T13:11:15.160

这是上面的VB代码：

```
 Imports System
    Imports System.Drawing
    Imports System.Drawing.Imaging
    Imports OpenNETCF.Drawing
    Imports OpenNETCF.Drawing.Imaging
    Imports System.Runtime.InteropServices
    Imports System.Resources
    Imports System.Reflection

    Public Class ImageHelper

        Private Shared m_factory As ImagingFactory

        Private Shared Function GetFactory() As ImagingFactory
            If (m_factory Is Nothing) Then
                m_factory = New ImagingFactory
            End If
            Return m_factory
        End Function

        Public Shared Function CreateClip(ByVal sof As StreamOnFile, ByVal x As Integer, ByVal y As Integer, ByVal width As Integer, ByVal height As Integer) As Bitmap
            Dim original As IBitmapImage = Nothing
            Dim image As IImage = Nothing
            Dim info As ImageInfo
            GetFactory.CreateImageFromStream(sof, image)
            Try
                image.GetImageInfo(info)
                GetFactory.CreateBitmapFromImage(image, info.Width, info.Height, info.PixelFormat, InterpolationHint.InterpolationHintDefault, original)
                Try
                    Dim ops As IBasicBitmapOps = CType(original, IBasicBitmapOps)
                    Dim clip As IBitmapImage = Nothing
                    Try
                        Dim rect As RECT = New RECT(x, y, (x + width), (y + height))
                        ops.Clone(rect, clip, True)
                        Return ImageUtils.IBitmapImageToBitmap(clip)
                    Finally
                        Marshal.ReleaseComObject(clip)
                    End Try
                Finally
                    Marshal.ReleaseComObject(original)
                End Try
            Finally
                Marshal.ReleaseComObject(image)
            End Try
        End Function

        Public Shared Function getScaledBitmap(ByVal sof As StreamOnFile, ByVal scalePercent As Integer) As Bitmap
            Dim thumbnail As IBitmapImage = Nothing
            Dim image As IImage = Nothing
            Dim info As ImageInfo
            Dim fScale As Decimal = (scalePercent / 100)
            '        m()
            ' do not remove the m specifier!
            GetFactory.CreateImageFromStream(sof, image)
            Try
                image.GetImageInfo(info)
                Dim newWidth As UInteger = CType((info.Width * fScale), UInteger)
                Dim newHeight As UInteger = CType((info.Height * fScale), UInteger)
                GetFactory.CreateBitmapFromImage(image, newWidth, newHeight, info.PixelFormat, InterpolationHint.InterpolationHintDefault, thumbnail)
                Try
                    Return ImageUtils.IBitmapImageToBitmap(thumbnail)
                Catch ex As Exception
                    Dim stream As System.IO.Stream = System.Reflection.Assembly.GetExecutingAssembly.GetManifestResourceStream("CameraCx7x.oom.png")
                    Return New Bitmap(stream)
                    ' (400, 300);
                Finally
                    Marshal.ReleaseComObject(thumbnail)
                End Try
            Finally
                Marshal.ReleaseComObject(image)
            End Try
        End Function

        Public Shared Function CreateThumbnail(ByVal sof As StreamOnFile, ByVal width As Integer, ByVal height As Integer) As Bitmap
            Dim thumbnail As IBitmapImage = Nothing
            Dim image As IImage = Nothing
            Dim info As ImageInfo
            GetFactory.CreateImageFromStream(sof, image)
            Try
                image.GetImageInfo(info)
                GetFactory.CreateBitmapFromImage(image, CType(width, UInteger), CType(height, UInteger), info.PixelFormat, InterpolationHint.InterpolationHintDefault, thumbnail)
                Try
                    Return ImageUtils.IBitmapImageToBitmap(thumbnail)
                Finally
                    Marshal.ReleaseComObject(thumbnail)
                End Try
            Finally
                Marshal.ReleaseComObject(image)
            End Try
        End Function

        Public Shared Function saveScaledBitmap(ByVal sof As StreamOnFile, ByVal width As Integer, ByVal height As Integer, ByVal sNewFile As String) As Boolean
            Dim bRet As Boolean = True
            Try
                Dim bmp As Bitmap = CreateThumbnail(sof, width, height)
                bmp.Save(sNewFile, System.Drawing.Imaging.ImageFormat.Jpeg)
            Catch ex As Exception
                System.Diagnostics.Debug.WriteLine(("Exception in saveScaledBitmap(): " + ex.Message))
                bRet = False
            End Try
            Return bRet
        End Function

        Public Shared Function GetRawImageSize(ByVal sof As StreamOnFile) As Size
            Dim image As IImage = Nothing
            Dim info As ImageInfo
            GetFactory.CreateImageFromStream(sof, image)
            Try
                image.GetImageInfo(info)
                Return New Size(CType(info.Width, Integer), CType(info.Height, Integer))
            Finally
                Marshal.ReleaseComObject(image)
            End Try
        End Function
    End Class 
```

这就是如何从带有标签、按钮和图片框的表单中调用它

```
 Imports OpenNETCF.Drawing
    Imports OpenNETCF.Drawing.Imaging
    Imports System.IO

    Public Class Form1
        Dim _Bitmap As Bitmap

        Private Sub showImage(ByVal filePath As String)
            'do not load the full image!
            If File.Exists(filePath) Then
                label1.Text = filePath

                If (Not (_Bitmap) Is Nothing) Then
                    _Bitmap.Dispose()
                End If
                ' a 1944x2593 image is about 15MByte !
                'create a scaled down image file
                Dim _filestream As FileStream = File.Open(filePath, FileMode.Open)
                Dim _stream As StreamOnFile = New StreamOnFile(_filestream)
                Dim fi As System.IO.FileInfo = New FileInfo(filePath)
                Dim sizeBmp As Size = ImageHelper.GetRawImageSize(_stream)
                'allow 640 hight
                Dim ratio As Integer = (sizeBmp.Height / 640)
                Dim scale As Integer = (ratio * 10)
                If (ratio > 1) Then
                    _Bitmap = ImageHelper.getScaledBitmap(_stream, scale)
                End If
                Me.pictureBox1.Image = CType(_Bitmap, Image)
                _filestream.Close()
            End If
        End Sub

        Private Sub btnLoad_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnLoad.Click
            Dim ofd As New OpenFileDialog
            ofd.InitialDirectory = "\My Documents"
            ofd.Filter = "Jpg image|*.jpg|Bmp image|*.bmp|Gif image|*.gif|All files|*.*"
            ofd.FilterIndex = 0
            Dim sFile As String
            If (ofd.ShowDialog = Windows.Forms.DialogResult.OK) Then
                sFile = ofd.FileName
                ofd.Dispose()
                showImage(sFile)
            End If
        End Sub
    End Class 
```

# html - 调整大小时的顶部菜单栏和填充顶部？

> ID：12269552
> 
> 赞同：1
> 
> 时间：2012-09-04T18:45:24.090
> 
> 标签：html, css

我有一个顶部菜单栏，位置固定并包含一些文本。当屏幕被调整为更小的尺寸时，它会压缩并且它的高度会增加以适应文本。

我在顶部菜单栏下方有一个 div，其中包含我的网站内容，使用 padding-top 向下移动。

当顶部菜单栏调整大小时，文章顶部会被顶部菜单栏的高度变化覆盖。

```
#topmenubar{position:fixed;width:100%;text-align:center;word-wrap:normal;}

#content {padding-top:40px;} 
```

解决此问题的最佳方法是什么，以便调整大小的顶部菜单栏不会覆盖我的内容？

顶部菜单栏必须始终在屏幕顶部可见，所以我想我怎样才能让 padding-top 随着屏幕宽度变小而变大或其他解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T18:57:40.197

纯 JavaScript 解决方案（不需要 jQuery）：

```
window.onresize = function() {
    document.getElementById("content").style.paddingTop = document.getElementById("topmenubar").offsetHeight;
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T18:51:14.603

### jQuery

```
$(window).resize(function(){
  var h = $("#topmenubar").height();
  $("#content").css("padding-top",h+"px");
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T18:52:59.870

您可以通过将宽度 100% 删除到某个固定像素宽度来解决此问题，以便顶部菜单栏不会调整大小，或者在某种程度上通过 min-width 属性。

# c++ - 求除数不知道怎么回事

> ID：12269557
> 
> 赞同：3
> 
> 时间：2012-09-04T18:46:01.163
> 
> 标签：c++, primes, factorization

我正在编码以找到两个数字 n 和 k 的公约数的数量。

我正在使用找到 GCD g 然后找到 GCD 的除数的方法来实现它。

然而，代码编译但在运行时给出无响应消息:(

我对此感到震惊..任何人都可以帮助调试..在此先感谢

```
#include<iostream>
#include<cstdio>
#include<cmath>
#include<cstring>
#include<vector>

using namespace std;

vector<bool>p(1000002,true);

long int getgcd(long int a, long int b)
{  if(b == 0)
          return a;
   else
          return getgcd(b, a % b);
}

void prime()
{   int i,j;
    for(i=2;i<1000001;i++)
      if(p[i])
        for(j=i*i;j<1000001;j=j+i)
             p[j]=false;
    p[0]=false;
    p[1]=false;
}

void divfind(long int a, long int b)
{
     long int g;
     g = getgcd(a,b);
     int i,s,j=0,ans=1,num=0;
     //short int fo[1000000];
     s=(int) sqrt(g);
     for(i=2;i<s+1;i++)
       if(p[i])
        {
          while(g%i==0)
          {g=g/i;
           num++;
          }
          if(num)
            ans*=++num;
          num=0;
        }
      printf("%d\n",ans);
}

int main()
{
    prime();
    long int n;
    int q;
    scanf("%ld %d",&n,&q);
    while(q--)
    {
        int t;
        long int k;
        scanf("%d%ld",&t,&k);
        if(t==1)
        divfind(n,k);
//        else if(t==2)
//       divi(n,k);
//        else
//        nodivi(n,k);
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T19:53:11.110

您遇到整数溢出 -只有(~2^15*sqrt(2)) 使用 32 位整数`i*i`才是安全的，例如：`i=46340`

```
i     i*i
46339 2147302921
46340 2147395600
46341 -2147479015
46342 -2147386332 
```

这会导致未定义的行为。

# xml - Maven JaCoCo 插件错误

> ID：12269558
> 
> 赞同：22
> 
> 时间：2012-09-04T18:46:05.730
> 
> 标签：xml, maven, maven-plugin, jacoco

我在 pom.xml 文件中配置了 Maven JaCoCo 插件，如下所示：

```
<properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <jacoco.version>0.5.9.201207300726</jacoco.version>
</properties>

<profiles>
    <profile>
        <id>jacoco4</id>
        <build>
            <plugins>
                <plugin>
                    <groupId>org.jacoco</groupId>
                    <artifactId>jacoco-maven-plugin</artifactId>
                    <version>${jacoco.version}</version>
                    <executions>
                        <execution>
                            <goals>
                                <goal>prepare-agent</goal>
                            </goals>
                            <configuration
                            <destfile>${project.build.directory}/target/jacoco.exec</destfile>
                            <datafile>${project.build.directory}/target/jacoco.exec</datafile>
                                <output>file</output>
                                <append>true</append>
                            </configuration>
                        </execution>
                        <execution>
                            <id>report</id>
                            <phase>prepare-package</phase>
                            <goals>
                                <goal>report</goal>
                            </goals>
                        </execution>
                    </executions>
                </plugin>
            </plugins>
        </build>
    </profile>
</profiles> 
```

我正在使用 Windows 7 和 apache-maven-3.0.4 插件。当我`mvn -P jacoco4 install`从 cygwin 终端或命令提示符终端键入 时，Maven 会下载并运行 JaCoCo 插件，但`jacoco.exec`似乎没有创建该文件。以下是错误消息：

```
[ERROR] Unable to read execution data file C:\Users\brownru\workspace64new\vps9\vps-fileserver\target\jacoco.exec: C:\Users\brownru\workspace64new\vps9\vps-fileserver\target\jacoco.exec (The system cannot find the file specified)
java.io.FileNotFoundException: C:\Users\brownru\workspace64new\vps9\vps-fileserver\target\jacoco.exec (The system cannot find the file specified)
        at java.io.FileInputStream.open(Native Method)
        at java.io.FileInputStream.<init>(FileInputStream.java:120)
        at org.jacoco.maven.ReportMojo.loadExecutionData(ReportMojo.java:251)
        at org.jacoco.maven.ReportMojo.executeReport(ReportMojo.java:228)
        at org.jacoco.maven.ReportMojo.execute(ReportMojo.java:217)
        at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
        at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
        at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
        at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
        at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
        at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
        at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
        at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
        at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352) 
```

无论我是否在插件的配置中包含`destfile`and说明符，都会出现此错误消息：`datafile`

```
<destfile>${project.build.directory}/target/jacoco.exec</destfile>
<datafile>${project.build.directory}/target/jacoco.exec</datafile> 
```

有人可以告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-09-17T12:28:53.360

我对 jacoco 和 maven 也有同样的麻烦。它与覆盖surefire配置的父pom有关。在这种情况下，该插件没有使用定义代理的参数（用于 jvm 参数）。

解决方案是将“argLine”配置元素放回去

```
<plugin>
  <artifactId>maven-surefire-plugin</artifactId>
  <configuration>
   <argLine>${argLine}</argLine>
  </configuration>
 </plugin> 
```

完整的插件配置看起来像

```
<plugin>
  <artifactId>maven-surefire-plugin</artifactId>
  <configuration>
    <skip>true</skip>
  </configuration>
  <executions>
    <execution>
      <id>unit-test</id>
      <phase>test</phase>
      <goals>
        <goal>test</goal>
      </goals>
      <configuration>
        <skip>${maven.test.skip}</skip>
        <argLine>${argLine}</argLine>
        <excludes>
          <exclude>**/*IntegrationTest.java</exclude>
        </excludes>
      </configuration>
    </execution>
    <execution>
      <id>integration-test</id>
      <phase>integration-test</phase>
      <goals>
        <goal>test</goal>
      </goals>
      <configuration>
        <skip>${skipITs}</skip>
        <argLine>${argLine}</argLine>
        <includes>
          <include>**/*IntegrationTest.java</include>
        </includes>
      </configuration>
    </execution>
  </executions>
</plugin>
<plugin>
    <groupId>org.jacoco</groupId>
    <artifactId>jacoco-maven-plugin</artifactId>
    <version>0.5.10.201208310627</version>
    <configuration>
        <skip>${maven.test.skip}</skip>
        <destFile>${basedir}/target/coverage-reports/jacoco-unit.exec</destFile>
        <dataFile>${basedir}/target/coverage-reports/jacoco-unit.exec</dataFile>
        <output>file</output>
        <append>true</append>
    </configuration>
    <executions>
        <execution>
            <id>jacoco-initialize</id>
            <goals>
                <goal>prepare-agent</goal>
            </goals>
        </execution>
        <execution>
            <id>jacoco-site</id>
            <phase>verify</phase>
            <goals>
                <goal>report</goal>
            </goals>
        </execution>
    </executions>
</plugin> 
```

希望它会有用

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2015-04-30T18:31:38.917

好的，我想我知道发生了什么。

默认情况下，jacoco 插件在测试阶段之前“运行”（通常它在[初始化](http://www.eclemma.org/jacoco/trunk/doc/prepare-agent-mojo.html)`prepare-agent`生命周期阶段运行目标），当它运行时，它只是将一个名为“argLine”的 maven 属性设置为类似`-javaagent=jacoco.jar`

前任：

> [INFO] argLine 设置为 -javaagent:/usernamed/.m2/repository/org/jacoco/org.jacoco.agent/ 0.5.6.201201232323/org.jacoco.agent-0.5.6.201201232323-runtime.jar=destfile=/path/到/目标/jacoco.exec

默认情况下，maven-surefire-plugin 基本上将这个属性（如果它设置为任何东西）“预先设置”到其分叉的 java 测试进程中，所以他们得到了货物。前任：`java ${argLine ends up here}> -jar /xxx/surefirebooter3741906822495182152.jar`

通常（没有 jacoco），如果您还想在该 argLine 中添加您自己的其他内容（例如，*等等*`-Xmx1G`），您只需在surefire 配置中设置它，例如

```
 <build>
   <plugins>
    <plugin>
       <artifactId>maven-surefire-plugin</artifactId>
         <configuration>
            <argLine>-Xmx1G</argLine>
          </configuration>
     </plugin> 
```

但是，如果您使用的是 jacoco，则不能通过设置全局属性来按常规方式进行操作，而是采用[这种方式](http://docs.sonarqube.org/display/PLUG/Usage+of+JaCoCo+with+Java+Plugin)（这是 pom 的根全局属性）：

```
 <properties>
    <argLine>-Xmx1G</argLine>
  </properties> 
```

如果您确实设置了，`<configuration><argLine>`那么它基本上会覆盖系统属性，因此 jacoco 参数不会传递给子进程。所以这就是你使用属性方式的原因。如果您指定一个属性`argLine`，那么 jacoco 只会将其参数添加到您指定的任何内容中，然后 surefire 将使用它。

但是，如果您的父 pom*已经*将插件设置`<configuration><argLine>`为某些东西怎么办？或者如果你自己设置它？它基本上会使用该值而不是 jacoco 设置的属性（您已指定手动覆盖）。

如果您指定`<configuration><argLine>`自己，则可以将该 argLine 更改为一个属性（见上文），然后删除`<configuration><argLine>`它，它应该可以工作。如果您无法控制父级，并且父级为 argline 指定了某些内容，那么您将需要走这`<configuration><argLine>${argLine} -Xmx1G</argLine>`条路。这是为了指示它忽略父级将此值设置为的任何值，并改用 argLine（jacoco 为您设置的那个）。（我不清楚是否有一种简单的方法可以“添加”到父 pom 对该值的值，如果有人知道如何在此处随意评论）。

但是，如果 jacoco 没有针对某个目标或某个配置文件运行呢？然后变量`${argLine}`永远不会被设置，你可能会遇到这样的错误：

> 目标 org.apache.maven.plugins:maven-surefire-plugin:2.14:test 的执行默认测试失败：分叉的虚拟机在没有正确告别的情况下终止。VM 崩溃或 System.exit 调用？[错误] 命令是/bin/sh -c cd ...java '${argLine}' ...

事实证明，jacoco 在运行时只“添加”到名为 argLine 的属性。因此，您可以安全地将 a 添加`<properties><argLine></argLine></properties>`到您的 pom 中（除非您已经在父 pom 中设置了该设置，否则您无需添加任何内容）。如果曾经调用过 jacoco，它会添加它。如果不是，它被设置为一个空字符串，这没关系。也不清楚是否有一种方法可以“添加”到属性的父级值，所以它要么继承它，如果你知道它存在，或者将它指定为空。

所以，最后对我来说，因为我的上游（无法访问）父 pom 声明它就像

`<configuration><argList>${argList}</argList></configuration>`

我被迫基本上遵循这条路线，因为它已经设置在（我无法控制的）父 pom 中，因此：

`<configuration><argList>${argList} -Xmx1G</argList></configuration>`

注意，如果你的 pom 中有这个，Intellij 会抱怨并且“不添加任何设置”到你的单元测试中：

`<configuration><argLine>${argLine} -DcustomOption=X...</argLine>`

但根本不要声明名为 argLine 的属性（即使它在命令行 mvn 上工作得很好）。修复/解决方法：声明一个空的 'argLine' 全局属性，和/或只是将您`-DcustomOption=X`移至属性声明，见上文。如果你“只”在属性声明中设置它，那么为了让 IntelliJ 拿起它，你还需要 `<configuration><argLine>${argLine}</argLine>...`：|

不幸的是，即使这还不够，它还支持声纳，尽管它与 IntelliJ + maven 一起使用。不知道为什么。改变了我解析时间的方式，所以不必弄乱这些区域（即代码中的“正确”）。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-08-29T15:18:29.390

我也遇到了这个问题：JaCoCo 没有生成“jacoco.exec”输出文件，这意味着没有发生代码覆盖率分析。

在我的情况下，这也是由于在 Maven Surefire 插件中使用自定义 argLine 覆盖了 JaCoCo Maven 插件 argLine，导致 JaCoCo 无法执行。

为了解决这个问题，我使用 JaCoCo 可选参数“propertyName”将其 argLine 导出到 Maven 属性，并将其包含在 Surefire argLine 中：

```
<plugin>
    <groupId>org.jacoco</groupId>
    <artifactId>jacoco-maven-plugin</artifactId>
    <configuration>
        <propertyName>jacoco.agent.argLine</propertyName>
    </configuration>
    ...             
</plugin>

<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-surefire-plugin</artifactId>
    <version>2.10</version>
    <configuration>
        <argLine>-XX:-UseSplitVerifier ${jacoco.agent.argLine}</argLine>
    </configuration>
</plugin> 
```

但是，当在 Netbeans 中运行单个测试时，这会导致问题。因为在这种情况下没有执行 JaCoCo 插件，所以“jacoco.agent.argLine”变量没有初始化，并且 Surefire 在运行任何测试之前失败。

在 pom 中添加一个空白属性“jacoco.agent.argLine”解决了运行单个测试时的问题，但这也阻止了 JaCoCo 在执行时导出其 argLine，从而有效地禁用了 JaCoCo。

我使用的解决方案的最后一部分是添加一个创建空白属性的配置文件，并且仅在指定单个测试时激活：

```
<profiles>
    <profile>
        <activation>                
            <property>
                <name>test</name>      
            </property>
        </activation>
        <properties>
            <jacoco.agent.argLine></jacoco.agent.argLine>
        </properties>
    </profile>
</profiles> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-10-31T07:31:28.373

我遇到了同样的问题并通过使用以下命令代替 jacoco:report -

```
mvn -X org.jacoco:jacoco-maven-plugin:report 
```

参考 -[如何从命令行配置 JaCoCo maven 插件](https://stackoverflow.com/questions/36742797/how-to-configure-jacoco-maven-plugin-from-command-line)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-05T09:13:21.900

我使用配置：

```
 <plugin>
        <groupId>org.jacoco</groupId>
        <artifactId>jacoco-maven-plugin</artifactId>
        <version>${jacoco.version}</version>
            <configuration>
                    <skip>${skipTests}</skip>
            </configuration>
            <executions>
                    <execution>
                                <id>jacoco-initialize</id>
                                <phase>initialize</phase>
                                <goals>
                                    <goal>prepare-agent</goal>
                                </goals>
                            </execution>
                            <execution>
                                <id>jacoco-site</id>
                                <phase>package</phase>
                                <goals>
                                    <goal>report</goal>
                                </goals>
                            </execution>
            </executions>
        </plugin> 
```

**更新：** 声纳生成的配置（sonar-pom.xml）：

```
<plugin>
        <artifactId>maven-surefire-plugin</artifactId>
        <version>2.12</version>
        <executions>
          <execution>
            <id>default-test</id>
            <phase>test</phase>
            <goals>
              <goal>test</goal>
            </goals>
            <configuration>
              <excludedGroups>server,ignore,integration</excludedGroups>
            </configuration>
          </execution>
        </executions>
        <configuration>
          <excludedGroups>server,ignore,integration</excludedGroups>
          <argLine>-javaagent:/tmp/jacocoagent3671192291664069011.jar=destfile=target/jacoco.exec,excludes=*_javassist_*</argLine>
          <testFailureIgnore>true</testFailureIgnore>
        </configuration>
      </plugin> 
```

一个问题 - 如何为每个构建定义“jacocoagent3671192291664069011.jar”。它应该在：

```
$M2_HOME/repository/org/jacoco/org.jacoco.agent/${jacoco.version}/org.jacoco.agent-${jacoco.version}-runtime.jar 
```

# javascript - Eclipse 的 JavaScript 编辑器插件

> ID：12269560
> 
> 赞同：128
> 
> 时间：2012-09-04T18:46:09.540
> 
> 标签：javascript, eclipse, eclipse-plugin

是否有适用于 JavaScript 的 Eclipse 插件，允许在 Eclipse 中对 .js 文件进行语法检查和自动建议？

* * *

## 回答 #1

> 赞同：285
> 
> 时间：2013-04-02T18:58:59.213

在 Eclipse 中完成以下步骤以获取 JavaScript 文件的插件：

1.  打开 Eclipse -> 转到“帮助”->“安装新软件”
2.  为您的 Eclipse 版本选择存储库。我有朱诺所以我选择了`http://download.eclipse.org/releases/juno`
3.  展开“编程语言”-> 选中“JavaScript 开发工具”旁边的框
4.  点击“下一步”->“下一步”->接受许可协议条款->“完成”
5.  等待软件安装，然后重新启动 Eclipse（在弹出窗口中单击“是”按钮）
6.  Eclipse重新启动后，打开“窗口”->“首选项”->展开“常规”和“编辑器”->单击“文件关联”->将“.js”添加到“文件类型：”列表中，如果是还没有
7.  在同一个“文件关联”对话框中，单击“关联编辑器：”部分中的“添加”
8.  选择顶部的“内部编辑”单选
9.  选择“JavaScript 查看器”。点击“确定”->“确定”

**添加 JavaScript 透视图：（可选）**
10\. 转到“窗口”->“打开透视图”->“其他...”
11\. 选择“JavaScript”。点击“确定”

**要使用突出显示的 JavaScript 语法打开 .html 或 .js 文件：**
12\. （可选）选择 JavaScript Perspective
13\. 在 [JavaScript Perspective]（或 Package Explorer [Java Perspective] 或 PyDev 的 Script Explorer 中浏览并选择 .html 或 .js 文件） Package Explorer [PyDev Perspective] 没关系。）
14\. 右键单击​​ .html 或 .js 文件 -> “打开方式” -> “其他...”
15\. 选择“内部编辑器”
16\. 选择“Java脚本编辑器”。单击“确定”（请参阅​​ JavaScript 语法现已突出显示）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-17T15:53:33.420

认为 JavaScriptDevelopmentTools 可能会做到这一点。虽然，我有 eclipse indigo，而且我很确定它会自动完成这种事情。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-10-21T08:27:39.197

> 允许语法检查的 JavaScript

JSHint-Eclipse

> 和 Eclipse 中 .js 文件的自动建议？

1.  [更多地使用 JSDoc](http://usejsdoc.org/)，因为 JSDT 对标准有很好的支持，所以你会得到更多关于你自己的代码的建议。
2.  新的 TernIDE 为 .js 和 AngulatJS .html 提供了额外的提示。将它们作为 Anide 从`http://www.nodeclipse.org/updates/anide/`

作为[Nodeclipse 的](http://www.nodeclipse.org/)负责人，我一直在寻找 Eclipse 生态系统中可用的内容。[Nodeclipse](http://www.nodeclipse.org/)网站有更多链接，我邀请[在 GitHub 上协作开发 JavaScript 工具](https://github.com/nodeclipse/nodeclipse-1/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-02-09T16:59:10.700

在 2015 年，我会选择：

*   对于小脚本：js 编辑器 + jsHint 插件
*   对于大型代码库：[TypeScript Eclipse 插件](https://github.com/palantir/eclipse-typescript)，或类似的转译语言……我只知道 TypeScript 在 Eclipse 中运行良好。

当然，您可能希望保留 JS 以便于项目设置并避免转译过程......没有最终的解决方案。

或者只是等待 ECMA6、7、... :)

# android - 在 Android 中使用 openssl-fips-2.0 共享库

> ID：12269563
> 
> 赞同：1
> 
> 时间：2012-09-04T18:46:17.590
> 
> 标签：android, android-ndk, openssl, fips

我能够按照[这个问题](https://stackoverflow.com/questions/11091905/android-build-openssl-fips-2-0?rq=1)中的指示为 Android 构建 openssl 的共享库。

例如

```
cd openssl-fips-2.0/
./config
make
make install 
```

和

```
cd openssl-1.0.1c/
./config fips --with-fipsdir=/usr/local/ssl/fips-2.0/ shared
make depend
make 
```

这将生成 libcrypto.so.1.0.0 和 libssl.so.1.0.0，并带有对应的符号链接作为 libcrypto.so 和 libssl.so。

由于 NDK 构建系统不支持版本化共享库，我不得不使用符号链接（使用 PREBUILT_SHARED_LIBRARY）。但是，有了这个，库最终以 libcrypto.so 和 libssl.so 而不是 libcrypto.so.1.0.0 和 libssl.so.1.0.0 的形式进入设备，导致我的库无法加载，因为它正在寻找对于具有版本名称的库。

链接的问题提到使用 System.load(libcrypto.so.1.0.0) 而不是使用 System.loadLibrary() 加载库，但即使使用完整路径，我也无法让它工作，因为如前所述，文件以 libcrypto.so 的形式复制到设备。

有人成功做到这一点吗？

注意：我还尝试修改 openssl-1.0.1c 配置和 makefile 以生成 libcrypto.1.0.0.so（例如，文件名和 soname 中的扩展名之前的版本号），这让我可以绕过以前加载问题。但是，当我尝试使用 FIPS_module_mode_set (FIPS_R_FINGERPRINT_DOES_NOT_MATCH) 打开 FIPS 模式时出现错误。

我还不知道为什么会这样，但这可能是由于 NDK 剥离了“不需要”的东西（见这个[问题](https://stackoverflow.com/questions/3549432/preventing-functions-from-being-stripped-from-a-static-library-when-linked-into)）......我还在看这个，但如果有人有一些关于这个的信息非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T21:39:26.177

让我们正确识别问题。导致问题的可能不是 NDK 构建，也绝对不是从静态库构建共享库时删除未使用条目的链接器。

首先，我不确定您是否可以在通常的 APK 中提供 FIPS 模式，而无需重建或至少植根 Android（参见例如[http://gcn.com/articles/2010/12/23/android-fips-security .aspx](http://gcn.com/articles/2010/12/23/android-fips-security.aspx)）。

`System.load()`加载版本化的 .so没有问题，因此当您***a）***正确指定完整路径（*例如* `System.load("/data/local/tmp/libssl.so.1.0.0")`）并且***b）***文件被传递到该路径时。对于第一次测试，我建议手动上传`libcrypto.so.1.0.0`并`libssl.so.1.0.0`到**/sdcard/**看看 FIPS 指纹是否变得更快乐。

如果**/sdcard/**上的位置导致任何问题，您可以尝试**/data/local/**或**/data/local/tmp/**。你也可以使用**/data/data/ *（你的包）* /files/**。后者有一个优点：当你的应用被卸载时，它会被系统自动删除。

要使版本化的**.so**（如`libcrypto.so.1.0.0`APK）成为 APK 的一部分，请将其复制到项目的 assets 文件夹中。您的 Java 代码将负责将其从那里复制到磁盘上的指定位置。确保此 Java 代码正确处理升级和 SD 卡交换。

# javascript - 简单的客户端文件处理，无需刷新

> ID：12269564
> 
> 赞同：15
> 
> 时间：2012-09-04T18:46:23.357
> 
> 标签：javascript, jquery, web-applications

`JavaScript`以下用例的干净简单的解决方案是什么：

在网页上，用户从她的本地文​​件系统中选择并上传一个文本文件，但不是将文件加载到服务器，而是客户端 javascript 代码打开并处理文件的内容，并将结果写入同一页面无需刷新页面。

注意：我不需要保留文件的内容——如果用户关闭页面，那么内容就会丢失，这很好。一切都应该发生在客户端的页面上——无需接触服务器。

如果有一些轻量级`JQuery`的插件，很想知道！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-04T18:55:33.117

您所说的是 HTML5 File API。我不确定描述它的最佳链接是什么，但这可能会有所帮助。[https://developer.mozilla.org/en-US/docs/Using_files_from_web_applications](https://developer.mozilla.org/en-US/docs/Using_files_from_web_applications)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-22T21:24:29.980

为方便起见，以下是打开和打印文本文件的示例：

```
<input type='file' id='file-input' /> 
```

```
let fileInput = document.getElementById('file-input')

fileInput.onchange = () => {
  const reader = new FileReader()
  reader.onload = (e) => console.log('file contents:', e.target.result)

  for (let file of fileInput.files) {
    reader.readAsText(file)
  }
} 
```

JayC 提供的链接也有 readAsBinary 和 readAsDataURL 的示例。

# java - 按名称的对象和方法

> ID：12269566
> 
> 赞同：0
> 
> 时间：2012-09-04T18:46:32.057
> 
> 标签：java, exception, methods

[注意：我是java初学者]

我尝试按名称调用对象，然后尝试按名称调用其方法，

但是这段代码抛出异常 java.lang.NoSuchMethodException：

```
Field mainClassField = mainObject.getClass()
                                 .getField( dataObject.callObject );
/* callObject is an another object */
Object callObject = mainClassField.get( mainObject );   

Method callMethod = callObject.getClass()
                      .getMethod( dataObject.callMethod ); << error on this line
callMethod.invoke(callObject, dataObject); 
```

[注意：我通过 AMF 从 actionscript 3 传递 dataObject ]

调用对象代码：

```
public class UserCallController extends Controller {

    public void getUserById(DataTransferObject dataObject) {
        Ppvchat mainClass = _inst._mainClass;

        dataObject.data.put("userData", 
                mainClass.userModel.getById( dataObject.data.getString("id") ));
    }

} 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T18:56:15.330

如果`NoSuchMethodException`这种方法确实不存在。因此，请检查以下内容。

1.  你在处理什么课。
2.  你想调用什么方法。仔细检查方法名称和签名。

无论如何，您的代码似乎是错误的。

`callObject.getClass().getMethod( dataObject.callMethod );`表示您认为该方法没有参数。

`callMethod.invoke(callObject, dataObject);`表示您认为此方法具有可从 分配的参数`dataObject`。

# java - 关于使用 Java Swing 在循环中动态加载图像的问题

> ID：12269567
> 
> 赞同：2
> 
> 时间：2012-09-04T18:46:36.247
> 
> 标签：java, image, swing

```
public String[] imagesArray = {Images.firstImage, Images.secondImage};

String imagesPath = "/testproject/images/";
 for(int i = 0; i<imagesArray.length; i++) {
    URL imageURL = this.getClass().getResource(imagesPath+imagesArray[i]);
    ImageIcon orignalImageIcon = new ImageIcon(imageURL);
    Image newImage = orignalImageIcon.getImage().getScaledInstance(100, 90, java.awt.Image.SCALE_SMOOTH);
    ImageIcon newImageIcon = new ImageIcon(newImage);

    JButton receiptButton = new JButton(newImageIcon);
    receiptButton.setBorder((new EmptyBorder(0,0,0,0)));
    toolBar.add(receiptButton);
    add(toolBar);
    } 
```

图片未显示在我的设计布局中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T19:15:31.250

问题很可能是使用`ImageIcon`加载原始图像的异步加载性质。

如果这是问题：

1.  有一个简单的方法来测试它。添加`orignalImageIcon`到按钮，看看它们是否都出现。
2.  有一种简单的方法可以修复它。加载图像使用`ImageIO.read(URL)`- 一种在图像完全加载之前将阻塞的方法。

# asp.net - 在 ASP.NET WebApi 中保留数据库连接

> ID：12269568
> 
> 赞同：0
> 
> 时间：2012-09-04T18:46:44.250
> 
> 标签：asp.net, rest, asp.net-web-api

目前我创建了一个 ASP.NET WebApi 应用程序。由于 RESTful 应用程序是无会话状态的，我正在考虑如何保留打开的数据库连接？每次用户发送 WebApi 请求时，我也可以重新打开数据库。

但是哪种解决方案会更好呢？

1.  尝试保留数据库连接 - 但如何？
2.  每次用户发送 WebApi 请求时重新打开连接？

谢谢， 安德烈亚斯

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-04T18:49:43.240

您应该尽可能少地保持连接打开。使用完后立即关闭连接。.NET 中的连接池将为您处理与数据库的物理连接，因此您不必担心性能。您实际上会通过长时间保持打开的连接来影响性能。

# wordpress - WP_List_Table 没有正确处理返回的数据？

> ID：12269570
> 
> 赞同：0
> 
> 时间：2012-09-04T18:46:52.687
> 
> 标签：wordpress

因此，按照 WP_List_Table 上的 WPEngineer 指南（顺便说一句，这是优秀的指南），我设法为我正在开发的插件的后端整理了一个基本表。使用“示例”数组，效果很好。我遇到的问题是我一生都无法弄清楚如何用实际数据替换样本数据！在我认为应该是的位置添加查询会导致查询变量具有正确的数据，但表仍然不返回任何内容。到目前为止，引用的 pastebin 是我所拥有的......有什么想法吗？

[http://pastebin.com/f0DCacfF](http://pastebin.com/f0DCacfF)

**更正：**它正在提取数据（如果我手动向数据库添加一行，表数会更新），但它显示的是一个空白表。

**注意：**示例数据似乎是一个数组，而 $wpdb->get_results 作为 stdClass 对象返回。

**样本数据设置：**

```
var $api_key_list = array(
    array( 'id' => 1,'userid' => 'Quarter Share', 'key' => 'Nathan Lowell', 'desc' => '978-0982514542' )
); 
```

**样本数据返回：**

```
Array ( [0] => Array ( [id] => 1 [userid] => 1 [key] => 098f6bcd4621d373cade4e832627b4f6 [desc] => Test API key ) ) 
```

**查询设置：**

```
$api_key_list_query = "SELECT * from $wpapi_db_table_name";
$this->api_key_list =  $wpdb->get_results($api_key_list_query); 
```

**查询返回：**

```
Array ( [0] => stdClass Object ( [id] => 1 [userid] => 1 [key] => 098f6bcd4621d373cade4e832627b4f6 [desc] => Test API key ) [1] => stdClass Object ( [id] => 2 [userid] => 1 [key] => 098f6bcd4621d373cade4e832627b4f6 [desc] => Test API key 2 ) ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T00:27:37.397

添加以下内容解决了我的问题。

```
$this->api_key_list = array();
$i = 0;
foreach($api_key_list_return as $obj) {
    foreach($obj as $key => $val) {
        $this->api_key_list[$i][$key] = $val;
    }
    $i++;
} 
```

# php - 在后台运行 php 代码块

> ID：12269573
> 
> 赞同：0
> 
> 时间：2012-09-04T18:47:06.720
> 
> 标签：php, iphone, ios4, apple-push-notifications

我有一个 php 脚本，它负责从我的 iPhone 应用程序中读取一些请求参数。一旦我对其进行了一些操作，我将它们保存在数据库中，并且需要使用苹果 APNS 发送一些推送通知消息。所以目前它在代码中是这样完成的。

```
<?php
    $param1 = $_POST['param1'];
    $param2 = $_POST['param2'];

    //saving part here

    //push notifications
    $pushService = new PushService();
    $pushService -> init();
    $pushService -> push($param1, $param2);

    //json response
    echo json_encode(array($success, $dbsavedid);
?> 
```

推动部分出现问题。现在执行此推送通知代码块需要花费大量时间，因为该表已经随着大量数据而增长。因此，iPhone 应用程序等待太长时间才能执行（以获得对 iPhone 的成功响应）。

因此，除了使用单独的脚本进行推送通知之外，有什么方法可以使这个推送部分异步并使用 echo 向 iPhone 端发送响应？另请注意，我还需要从保存的记录中获取一些数据到 iPhone 端。所以我需要输出到达 iPhone 端。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T19:13:23.683

例如，您可以使用 flush() 函数强制 PHP 发送响应。（可能还有其他可能完成）所以你要做的是在你的数据库操作完成时用 echo 写入输出缓冲区（如果你有 100-1000 条记录，这些应该非常快）并且在调用 flush( ） 功能。您的客户应该立即得到答复。

另请参阅有关 flush() 本身的链接，因为您的环境中可能有其他参数会阻止您的响应尽快到达客户端。 [http://php.net/manual/en/function.flush.php](http://php.net/manual/en/function.flush.php)

```
<?php
$param1 = $_POST['param1'];
$param2 = $_POST['param2'];

//saving part here

//json response
echo json_encode(array($success, $dbsavedid);

//response should be sent right away, no need for wait on the pushservice operations
flush();

//push notifications
$pushService = new PushService();
$pushService -> init();
$pushService -> push($param1, $param2); 
```

?>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T05:32:59.873

造成这种情况的实际原因是，我的服务器提供商阻止了苹果 APNS 使用的端口 2195 和端口 2196。我相信一旦你允许它，这将被修复并且应该像之前一样工作。

# android - 带有 GoogleTileOverlay 的 Android MapView 不释放位图

> ID：12269574
> 
> 赞同：2
> 
> 时间：2012-09-04T18:47:09.433
> 
> 标签：android, bitmap, android-mapview, osmdroid

我在 Google 地图上绘制自定义图块时遇到问题。

使用来自的[GoogleTileOverlay](http://code.google.com/p/osmdroid/source/browse/trunk/osmdroid-google-overlay/src/org/osmdroid/views/overlay/GoogleTilesOverlay.java?r=921)`OSMDroid`，我正在绘制本地存储在设备 SD 卡上的自定义图块。

问题发生在我打开地图然后尝试返回其他活动后。事情开始变得奇怪了。XML 中定义的背景颜色没有显示和其他奇怪的事情。

我出于某种原因进行了广泛的搜索，但我所能想出的只是内存不足？

[根据 Eclipse MAT](http://pastebin.com/yPVcjMAg)，*在*我销毁包含`MapView`and`GoogleTileOverlay`

让我知道我是否可以提供任何其他信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T07:34:30.917

由于来自位图的内存泄漏，我正在处理 OOM 异常。似乎在清除地图活动中的切片缓存（以便在清除后不会创建新切片）之前从列表中删除叠加层`MapView`是可行的。无论地图活动被创建/恢复多少次，我最终都有一个实例。`Overlay``onPause``LRUMapTileCache`

我的`onPause`批次如下：

```
// .. get custom tiles off the screen first
mMapView.getOverlays().remove(mCustomTilesOverlay);         
// .. release all custom tiles' bitmaps
mCustomTilesOverlay.clearTileCache();
// .. unregister intent receiver (in order not to leak it)
mCustomTilesOverlay.detach();
// .. indicate not-ready state by clearing the reference
mCustomTilesOverlay = null; 
```

~~8 MB 仍然存在~~（见编辑），我使用`android:largeHeap="true"`应用程序属性来补偿。

**编辑**

原来那些 8 MB 来自其他来源。缓存被成功清除。

# c# - 使用 C# 读取 Json

> ID：12269579
> 
> 赞同：-4
> 
> 时间：2012-09-04T18:47:23.770
> 
> 标签：c#, json

任何人都知道如何在下拉列表中填充这个 JSON，基本上是国家 ID 和：

```
data: {
    "1000": {
      "country-id": 1000,
      "name1": {
        "name": "Afghanistan",
      },
    },
    "4000": {
      "country-id": 4000,
      "name1": {
        "name": "Albania",
      }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T18:56:18.937

你的 json 坏了，许多 json 解析器会抱怨它。

我将使用[Json.Net](http://json.codeplex.com/)进行解析。

```
 string json = @"{data: { ""1000"": { ""country-id"": 1000, ""name1"": { ""name"": ""Afghanistan"", }, }, ""4000"": { ""country-id"": 4000, ""name1"": { ""name"": ""Albania"", } }";

    var countries = ((JObject)JsonConvert.DeserializeObject(json))["data"]
        .Children()
        .Select(x => new
        {
            Id = (int)x.First()["country-id"],
            Name = (string)x.First()["name1"]["name"],
        })
        .ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T19:03:42.693

不确定您如何获取 JSON 数据，但就像其他人建议的那样，您最好使用[Json.NET](http://json.codeplex.com/)之类的库以下是一些直接取自文档的基本实现：

如果您正在序列化/反序列化，请尝试[此处的文档](http://james.newtonking.com/projects/json/help/index.html?topic=html/SerializingJSON.htm)

```
Product product = new Product();

product.Name = "Apple";
product.ExpiryDate = new DateTime(2008, 12, 28);
product.Price = 3.99M;
product.Sizes = new string[] { "Small", "Medium", "Large" };

string output = JsonConvert.SerializeObject(product);
//{
//  "Name": "Apple",
//  "ExpiryDate": "2008-12-28T00:00:00",
//  "Price": 3.99,
//  "Sizes": [
//    "Small",
//    "Medium",
//    "Large"
//  ]
//}

Product deserializedProduct = JsonConvert.DeserializeObject<Product>(output); 
```

如果你只是对直接查询数据感兴趣，试试[这个](http://james.newtonking.com/projects/json/help/?topic=html/LINQtoJSON.htm)

```
JObject o = JObject.Parse(@"{
  'CPU': 'Intel',
  'Drives': [
    'DVD read/writer',
    '500 gigabyte hard drive'
  ]
}");

string cpu = (string)o["CPU"];
// Intel

string firstDrive = (string)o["Drives"][0];
// DVD read/writer

IList<string> allDrives = o["Drives"].Select(t => (string)t).ToList();
// DVD read/writer
// 500 gigabyte hard drive 
```

我猜后者是你真正想要的。

# android - 空点短信

> ID：12269580
> 
> 赞同：2
> 
> 时间：2012-09-04T18:47:27.650
> 
> 标签：android, nullpointerexception

我正在编写一个应用程序，该应用程序允许用户使用预先写好的文字即时给某人发短信，说他们回家会迟到。

只是一个有趣的应用程序的未成年人，它可能对那些父母对孩子的位置和时间有强迫症的孩子有用。

```
 @Override
        public void onClick(View v1) {
            // TODO Auto-generated method stub
            SmsManager sms = SmsManager.getDefault();
            sms.sendTextMessage(constants.num, null, "hello world - From EMTxt", null, null);
        }
    }); 
```

堆栈跟踪：

```
09-05 14:36:25.821: E/AndroidRuntime(317): FATAL EXCEPTION: main
09-05 14:36:25.821: E/AndroidRuntime(317): java.lang.NullPointerException
09-05 14:36:25.821: E/AndroidRuntime(317):  at android.os.Parcel.readException(Parcel.java:1328)
09-05 14:36:25.821: E/AndroidRuntime(317):  at android.os.Parcel.readException(Parcel.java:1276)
09-05 14:36:25.821: E/AndroidRuntime(317):  at com.android.internal.telephony.ISms$Stub$Proxy.sendText(ISms.java:369)
09-05 14:36:25.821: E/AndroidRuntime(317):  at android.telephony.SmsManager.sendTextMessage(SmsManager.java:87)
09-05 14:36:25.821: E/AndroidRuntime(317):  at lionsimages.com.emtxt.MainActivity$1.onClick(MainActivity.java:38)
09-05 14:36:25.821: E/AndroidRuntime(317):  at android.view.View.performClick(View.java:2485)
09-05 14:36:25.821: E/AndroidRuntime(317):  at android.view.View$PerformClick.run(View.java:9080)
09-05 14:36:25.821: E/AndroidRuntime(317):  at android.os.Handler.handleCallback(Handler.java:587)
09-05 14:36:25.821: E/AndroidRuntime(317):  at android.os.Handler.dispatchMessage(Handler.java:92)
09-05 14:36:25.821: E/AndroidRuntime(317):  at android.os.Looper.loop(Looper.java:123)
09-05 14:36:25.821: E/AndroidRuntime(317):  at android.app.ActivityThread.main(ActivityThread.java:3683)
09-05 14:36:25.821: E/AndroidRuntime(317):  at java.lang.reflect.Method.invokeNative(Native Method)
09-05 14:36:25.821: E/AndroidRuntime(317):  at java.lang.reflect.Method.invoke(Method.java:507)
09-05 14:36:25.821: E/AndroidRuntime(317):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
09-05 14:36:25.821: E/AndroidRuntime(317):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
09-05 14:36:25.821: E/AndroidRuntime(317):  at dalvik.system.NativeStart.main(Native Method) 
```

sms.sendTextETC 行上显示了一个 NPE

我的猜测是常量.num。但是我知道号码本身的保存很有趣，并且只有在我按下按钮发送文本时才会停止工作。

有什么想法有什么问题以及如何解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-25T07:28:49.457

我是这样做的：

1.manifest里面的权限

```
 <uses-permission android:name="android.permission.SEND_SMS"/> 
```

2.点击发送按钮

```
@Override
public void onClick(View v) {
    SmsManager smsman=SmsManager.getDefault();
    smsman.sendTextMessage("+919037934301", null, "this is sms content", null, null);
} 
```

就您而言，我怀疑**constants.num**。确保
1.`constants`不为空
2.`constants.num`不为空且有效`String`

# jquery - jQuery css 宽度在 IE/Opera/FF 中不起作用，但在 Chrome 中起作用

> ID：12269583
> 
> 赞同：1
> 
> 时间：2012-09-04T18:47:29.877
> 
> 标签：jquery, css, wordpress

所以我目前正在研究一个 Wordpress 主题，但我在让博客正确设置样式时遇到了问题。

我正在使用一些基本的 jQuery 来获取包含内容的 div 的宽度，然后设置名为“.main”的包装器的宽度。

```
var blogWidth = $("#blogImages").width();
var blogTotal = blogWidth;
var totalCanvas = blogTotal;    
$('.main').css('width',totalCanvas); 
```

它在 Chrome 中检测到正确的宽度，但没有别的： http: [//leighmcd.com/blog/blog](http://leighmcd.com/blog/blog)

另一个问题是我需要图像位于内容的右侧，即使它们在同一个帖子中，所以我在图像周围放置了一个 div 并绝对定位它。我有一种感觉，这也可能会影响结构。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T18:49:21.937

使用[width](http://api.jquery.com/width/)设置匹配元素的宽度：

```
$('.main').width(totalCanvas); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T18:55:00.040

尝试将单位添加到您的`.css()`通话中：

```
$('.main').css('width',totalCanvas+'px'); 
```

# visual-sourcesafe - 在 Visual Source Safe 中保存时自动检入文件

> ID：12269585
> 
> 赞同：0
> 
> 时间：2012-09-04T18:47:35.190
> 
> 标签：visual-sourcesafe, checkin

更改本地（工作）副本后，是否可以自动将文件检入 Visual Source Safe？我们当前的过程涉及在运行 VSS Explorer 的 Windows 计算机上编辑我们的代码，并在签入 VSS 影子后将文件复制到开发 Linux 服务器。我们花费大量时间通过 VSS 手动重新检入文件，并且希望每次保存文件时都推送它。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T15:28:07.243

为什么不编写一个小应用程序来监视文件夹中的更新文件，当它们更新时，打开您的 VSS 连接并通过指定或硬编码的路径签入到 VSS？不过只是一个想法。我相信您可以使用诸如 FileSystemWatcher 之类的东西。[http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx)

# delphi - 如何清除嵌入式 Chromium 浏览器的缓存和 cookie？

> ID：12269587
> 
> 赞同：6
> 
> 时间：2012-09-04T18:48:02.587
> 
> 标签：delphi, caching, cookies, tchromium

我用 TChromium 创建了一个浏览器。TChromium 是动态创建的。Facebook 访问（登录） 在流程结束时，组件被销毁。再次创建组件时会出现问题 他继续上一个会话（登录）。我需要清理所有缓存和 cookie。（强制注销）

在代码下方，我通过以下方式创建组件：

```
var
   Chromium: TChromium;
begin
   try
     Chromium := TChromium.Create(nil);
     Chromium.SetParentComponent(Form1);
     Chromium.Align := alClient;
     chromium.Browser.MainFrame.LoadUrl('www.facebook.com'); 
```

我销毁它并像这样释放内存：

```
FreeAndNil(Chromium) 
```

我应该怎么办？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T22:26:39.617

**DCEF1**:

To delete cookies in DCEF1 wrapper there's the `DeleteCookies` function in `ICefCookieManager` manager interface. However, I've tried the following code to delete all cookies, but it always failed to me:

```
procedure TForm1.Button1Click(Sender: TObject);
var
  CookieManager: ICefCookieManager;
begin
  CookieManager := TCefCookieManagerRef.GetGlobalManager;
  if not CookieManager.DeleteCookies('', '') then
    ShowMessage('DeleteCookies failed!');
end; 
```

Fortunately, there is another option to delete cookies using this cookie manager. Visit all of them and in the visitor function assign True to the `deleteCookie` output parameter. Be careful with getting cookie manager, it's created the first time you navigate somewhere (the `GetGlobalManager` class function is unsafe, it's not properly handled for unexpected result), so be sure you'll use this code after navigation:

```
procedure TForm1.Button1Click(Sender: TObject);
var
  CookieManager: ICefCookieManager;
begin
  CookieManager := TCefCookieManagerRef.GetGlobalManager;
  CookieManager.VisitAllCookiesProc(
    function(const name, value, domain, path: ustring; secure, httponly,
      hasExpires: Boolean; const creation, lastAccess, expires: TDateTime;
      count, total: Integer; out deleteCookie: Boolean): Boolean
    begin
      deleteCookie := True;
      ShowMessage('A cookie from domain ' + domain + ' will be unmercifully ' +
        'deleted!');
    end
  );
end; 
```

**DCEF3**:

In DCEF3 wrapper you can use the following. Credit goes to [Eric Santos](https://stackoverflow.com/users/2665920/eric-santos):

```
type
  CefTask = class(TCefTaskOwn)
    procedure Execute; override;
  end;

procedure CefTask.Execute;
var
  CookieManager: ICefCookieManager;
begin
  CookieManager := TCefCookieManagerRef.Global;
  CookieManager.DeleteCookies('', '');
end;

procedure ClearCookies;
var
  Task: CefTask;
begin
  Task := CefTask.Create;
  CefPostTask(TID_IO, Task);
end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T06:35:59.887

TLama 您的帮助对我的项目具有决定性意义。我很感谢您分享您的经验。

用这段代码解决了我的问题：

```
procedure TForm1.Button1Click(Sender: TObject);
var
  CookieManager: ICefCookieManager;
begin
  CookieManager := TCefCookieManagerRef.GetGlobalManager;
  CookieManager.VisitAllCookiesProc(
    function(const name, value, domain, path: ustring; secure, httponly,
      hasExpires: Boolean; const creation, lastAccess, expires: TDateTime;
      count, total: Integer; out deleteCookie: Boolean): Boolean
    begin
      deleteCookie := True;
      ShowMessage('A cookie from domain ' + domain + ' will be unmercifully ' +
        'deleted!');
    end
  );
end; 
```

拥抱

# macos - 跨平台SVN问题，请解释

> ID：12269588
> 
> 赞同：0
> 
> 时间：2012-09-04T18:48:04.837
> 
> 标签：macos, svn, terminal, tortoisesvn

我是一名基于 Mac (10.8) 的 Web 开发人员，正在尝试与其他基于 Windows 的开发人员合作。他们正在使用 SVN，尽管他们中的大多数人不会将文件签出到本地存储库。他们大多通过资源管理器在本地服务器上编辑文件，然后使用 TortoiseSVN shell 增强来右键单击并“提交”他们刚刚编辑的内容。

我似乎无法做到这一点，因为我首选的 SVN 工具版本（以及 Dreamweaver CS6）需要使用 SVN、HTTP 等协议进行访问。尝试使用文件系统时出现错误。

所以，我正在尝试命令行，导航到我需要编辑的文件，打开它，编辑，保存。我可以`svn status`在目录上运行，我看到文件状态为“M”。如果我尝试`svn commit -m "updated" myflie.css`或类似，我会收到一个错误：

```
svn: Unable to open an ra_local session to URL
svn: Local URL 'file://webstage-01/svn/repository/fc-dev/assets/css' contains unsupported hostname 
```

我查看了 .svn 文件夹的“条目”文件，看到了这个：

```
10

dir
20788
file://webstage-01/svn/repository/fc-dev/assets/css
file://webstage-01/svn/repository

2012-06-26T16:08:10.220007Z
20747
JSmith 
```

所以看起来这就是它从中获取路径的地方，这不是有效的 MacOS 或 Unix 路径。

建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T13:53:22.607

听起来本地服务器已经是每个人都共享的签出工作目录。这是进行 Subversion 的完全错误和糟糕的方式。最后，您不知道是谁在进行更改，因为他们都使用同一个客户端。另外，不能保证工作客户端使用相同格式的工作目录。如果有人在他们的系统上安装了 1.6 TortoiseSVN，他们可能会损坏该工作副本。

正确的方法是让每个人都将该 Subversion 存储库中的内容的本地副本签出到他们的本地计算机（Windows 或 Mac），然后在那里进行更改并签入。你不会遇到有人搞砸的问题目录。你知道是谁在做出改变。如果两个人尝试同时进行相同的更改，您不会有什么问题。这是 Subversion 的工作方式。

Mac 有 Subversion 命令行客户端。（假设您使用的是 Mountain Lion - 最新版本）您需要安装[XCode](http://guide.macports.org/chunked/installing.xcode.html)（可从 Mac App Store 免费下载），然后在 XCode 中安装[命令行工具](https://stackoverflow.com/a/9329325/368630)。查看[在线 Subversion 手册](http://svnbook.com)并了解如何在 Subversion 中进行检出，创建您自己的工作目录，然后从中检入。

如果你想要一个 Mac OS X GUI Subversion 客户端，有很多选择。我强烈建议您查看 Pathfinder]( [http://cocoatech.com/pathfinder/](http://cocoatech.com/pathfinder/) )。它有一个内置的 Subversion GUI 客户端，但它也有许多 Finder 增强功能，使其成为出色的 Finder 替代品——尤其是对于高级用户。它是 40 美元，但我认为这对于内置终端客户端来说是值得的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T10:35:26.593

我不认为你能做到这一点。“本地服务器”上的 svn 文件夹是由特定于平台的工具（如 Windows 上的 TortoiseSVN）创建的。显然它将具有特定于 Windows 的路径等。您将需要单独结帐并进行提交。

此外，顺便说一句，将 EOL 属性设置为“本机”，这样您就不会遇到跨平台 EOL 问题。

# c# - 对异常执行操作并返回到最后访问的页面

> ID：12269589
> 
> 赞同：2
> 
> 时间：2012-09-04T18:48:06.870
> 
> 标签：c#, asp.net-mvc-3

我正在使用全局异常处理程序，在异常视图中，我让用户有机会单击按钮以通过电子邮件将错误报告发送给我们。

如果他们单击按钮，则会从错误视图发布操作 SendErrorReport。在此操作中，我格式化并发送一封电子邮件，其中包含从异常视图发布的异常数据。

如果不存在特定条件，我想将用户转移到异常之前最后访问的页面。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T18:57:21.037

像这样的东西：

```
if(!CertainCondition)
{
    return Redirect(Request.UrlReferrer.ToString());
} 
```

更多关于[Request.UrlReferrer](http://msdn.microsoft.com/en-us/library/system.web.httprequest.urlreferrer.aspx)。

# php - 从 PHP 安全下载图片

> ID：12269591
> 
> 赞同：1
> 
> 时间：2012-09-04T18:48:32.227
> 
> 标签：php, upload, download

我想允许我的用户通过提供图像的 URL 来上传文件。

[与imgur](http://imgur.com)非常相似，您输入[http://something.com/image.png](http://something.com/image.png)，脚本会下载文件，然后将其保存在服务器上并发布。

我尝试使用`file_get_contents()`and `getimagesize()`。但我认为会有问题：

1.  如何保护脚本免受 100 个用户向大图像提供 100 个 URL 的影响？
2.  我如何确定下载过程是否会花费或已经花费太长时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T19:52:35.550

这实际上很有趣。

看来您实际上可以跟踪和控制`cURL`转移的进度。请参阅关于和的[文档](http://php.net/manual/en/function.curl-setopt.php)`CURLOPT_NOPROGRESS``CURLOPT_PROGRESSFUNCTION``CURLOPT_WRITEFUNCTION`

我找到[了这个例子](https://gist.github.com/1030450)并将其更改为：

```
<?php

file_put_contents('progress.txt', '');

$target_file_name = 'targetfile.zip';
$target_file = fopen($target_file_name, 'w');

$ch = curl_init('http://localhost/so/testfile2.zip');
curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
curl_setopt($ch, CURLOPT_NOPROGRESS, FALSE);
curl_setopt($ch, CURLOPT_PROGRESSFUNCTION, 'progress_callback');
curl_setopt($ch, CURLOPT_WRITEFUNCTION, 'write_callback');
curl_exec($ch);
if ($target_file) {
    fclose($target_file);
}

$_download_size = 0;
function progress_callback($download_size, $downloaded_size, $upload_size, $uploaded_size) {
    global $_download_size;
    $_download_size = $download_size;
    static $previous_progress = 0;

    if ($download_size == 0) {
        $progress = 0;
    }
    else {
        $progress = round($downloaded_size * 100 / $download_size);
    }

    if ($progress > $previous_progress) {
        $previous_progress = $progress;
        $fp = fopen('progress.txt', 'a');
        fputs($fp, $progress .'% ('. $downloaded_size .'/'. $download_size .")\n");
        fclose($fp);
    }
}

function write_callback($ch, $data) {
    global $target_file_name;
    global $target_file;
    global $_download_size;

    if ($_download_size > 1000000) {
        return '';
    }
    return fwrite($target_file, $data);
} 
```

`write_callback`检查数据的大小是否大于指定的限制。如果是，它会返回一个空字符串来中止传输。我分别在 80K 和 33M 的 2 个文件上进行了测试，限制为 1M。在您的情况下，`progress_callback`超出第二行毫无意义，但我将所有内容都保留在那里以进行调试。

获取数据大小的另一种方法是发出`HEAD`请求，但我认为不需要服务器发送`Content-length`标头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T18:49:47.630

要回答问题一，您只需在代码中添加适当的限制。定义您希望在给定时间内接受多少请求，在数据库中跟踪您的请求，然后从那里开始。还要限制文件大小。

对于问题二，[如果您使用 cURL ，您可以设置适当的超时](https://stackoverflow.com/questions/2582057/setting-curls-timeout-in-php)。

# tcl - 在 TCL 中转义单引号和双引号

> ID：12269593
> 
> 赞同：1
> 
> 时间：2012-09-04T18:48:40.260
> 
> 标签：tcl

我正在使用以下脚本，但它抛出错误消息
tcl；

```
eval {
     add command "Audit Param"\
     setting "Error : Part's and Spec's desc contains \"OBS\" or \"REPLACE\"" "(Reference No)"\
     user all;
} 
```

它显示错误为：`Expected word got 'and'`。
我试过了`Part\'s`，但仍然无法正常工作。如果两者都有，如何同时转义单引号和双引号？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T19:16:46.327

## 单引号和 Tcl

在 Tcl 本身中，单引号字符 ( `'`) 根本没有特殊含义。它只是一个普通字符，如逗号 ( `,`) 或句点 ( `.`)。（嗯，除了逗号在表达式中具有特殊含义，而句点用于浮点值和 Tk 小部件名称。相比之下，单引号根本没有意义。）根据您所写的，任何特殊含义（因此任何需要引用) 仅限于`add`命令。

复杂的引用情况通常在 Tcl 中通过使用不同的引用策略来解决。特别是，将东西放在大括号中*会禁用所有替换*（反斜杠换行空格折叠除外）。这让我可以写出与您所写内容*等效的内容：*

```
add command "Audit Param" \
      setting {Error : Part's and Spec's desc contains "OBS" or "REPLACE"} \
      "(Reference No)" user all 
```

这里的任何投诉都来自该代码内部，而不是在代码*本身*中编写。（这`eval { ... }`并没有增加任何东西。除了使您的代码更难阅读之外，它也不会产生任何惩罚。）

## 真正的问题

在一个*非常*松散的猜测中，该问题字符串正在使用直接字符串替换而不是准备参数的 SQL 语句中使用；这可能会产生那种错误信息。发生故障后检查全局`errorInfo`变量的内容，以获取堆栈跟踪，以帮助确定问题所在；这可能会帮助您了解代码失败的地方。如果它是一段顽皮的 SQL，则需要修复代码，因为您有一些易受 SQL 注入问题影响的东西（这可能是也可能不是安全问题，具体取决于该命令的暴露情况）。如果是这种情况，将每个单引号加倍（更改`'`为`''`）应该可以在短期内解决问题。

# cordova - PhoneGap + ChildBrowser 中的 Admob（没有任何其他插件）？

> ID：12269602
> 
> 赞同：1
> 
> 时间：2012-09-04T18:49:23.053
> 
> 标签：cordova, admob, childbrowser

我想问一下，是否可以在没有具体操作系统插件的情况下使用 AdMob（或其他）服务？我只想在我的代码中添加一些 Javascript 并直接通过 ChildBrowser 插件打开添加链接，是否有可能并且有任何有用的教程吗？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T20:55:31.963

据我所知——不可能。

阅读我的问题的[扩展答案](https://stackoverflow.com/a/14842904/1469208)，简要讨论最流行的移动广告网络。从本文中可以看出，[MobFox](http://mobfox.com/)是唯一（我知道的）移动广告提供商，它支持通过 JavaScript 展示广告。

如果您想在您的 iOS 应用中展示 AdMob 广告，您必须直接在本地版本的 PhoneGap 上编译您的应用（而不是通过 PhoneGap Build），这样您就可以访问 HTML5 内容的外部容器。然后，您可以修改该容器的 Java 代码，以将 AdMob 添加到您的应用中。

有很多关于此的文章（例如[PhoneGap Wiki 上的](https://github.com/phonegap/phonegap/wiki/In-App-Advertisements)文章）。您还可以在 StackOverflow 中找到许多答案、在许多博客中发布帖子以及在 Internet 中的许多来源中找到信息。

# javascript - 如何优雅地按需添加 javascript/css？

> ID：12269603
> 
> 赞同：2
> 
> 时间：2012-09-04T18:49:23.083
> 
> 标签：javascript, jquery

在我的实际项目中，用户可以选择单击按钮以进入其网站的“编辑模式”。单击按钮后，我必须下载几个 JS 和 CSS 文件，我正在使用以下代码进行操作：

```
//Start edition mode
(function(){
    $.get('/helpers/edit/v/edit.php',function(data){
        $(data).appendTo('body');
        var css = '/helpers/edit/css/edit.css';
        $.get(css,function(data){
            $('<link/>')
                .attr({
                    'rel':'stylesheet',
                    'href':css
                }).appendTo('head');
            $("body").trigger("editReady");
        });
    });
})(); 
```

它工作正常，但现在我需要插入更多的 JS 和 CSS 文件，如果我只是继续嵌套 jquery get 请求，代码将变得丑陋且难以维护，我想避免这种情况并告诉我这可能不是最好的方法完成任务。

我还尝试在第一个 get 请求中使用 Yep Nope（我已经在项目的其他部分使用），但它似乎不起作用（我没有收到错误消息，但它不起作用）。

有没有人知道如何以一种不会变得如此丑陋并且主要是易于维护的方式来做到这一点（考虑到我必须在正确包含所有 JS/CSS 时触发一个事件）？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T18:58:19.160

您可以使用像 head.js [http://headjs.com/这样的脚本加载器](http://headjs.com/)

似乎 require.js 适合您的需求：[http ://requirejs.org/](http://requirejs.org/)

还提到：LabJS [http://labjs.com/](http://labjs.com/)和 YepNope [http://yepnopejs.com/](http://yepnopejs.com/)

[YepNope 和 LabJS 的替代品](https://stackoverflow.com/questions/7960166/alternatives-to-yepnope-and-labjs)

YepNope 似乎很简单，有功能 `injectJs()`和`injectCss`

```
yepnope.injectJs("jquery.js", ...
yepnope.injectCss("print.css", ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T19:05:40.960

我最近在从多个来源加载 JSON 时遇到了类似的问题。我修改了那个代码并想出了这个。它的要点是循环获取对各种 URL 的请求，然后在完成的请求数等于 data_urls 数组中的 URL 数时触发“editReady”事件`(i = data_urls.length)`。

我最初是用 CoffeeScript 写的，所以我可能在某个地方弄乱了括号或其他东西......

```
function() {
  var data_urls = ['/helpers/edit/v/edit.php', '/helpers/edit/css/edit.css'];
  var i = 0;
  var _i, _len;
  for (_i = 0, _len = data_urls.length; _i < _len; _i++) {
    $.get(data_urls[i], function(data) {
      if (data_urls[i].match(/\.php/).length > 0) {
        $(data).appendTo('body');
      } else if (data_urls[i].match(/\.css/).length > 0) {
      $('<link/>')
        .attr({
          'rel':'stylesheet',
          'href':css
        }).appendTo('head');
      }
      i += 1;
      if (i == data_urls.length) {
        $("body").trigger("editReady");
      }
    });
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T19:06:12.460

我想你可以创建一个css和js文件路径数组并在迭代它们时加载它，即

```
$.get('/helpers/edit/v/edit.php',function(data){
    $(data).appendTo('body');
    var css = ['mycss1.css','mycss2.css','mycss3.css'];
    $.each(css,function(index, elem){
       $('<link/>')
            .attr({
                'rel':'stylesheet',
                'href':elem
         }).appendTo('head');
    });

    var js = ['myjs1.js','myjs2.js','myjs3.js'];
    $.each(js,function(index, elem){
       $('<script></script>')
            .attr({
                'type':'text/javascript',
                'src':elem
         }).appendTo('head');
    });

    $("body").trigger("editReady");

}); 
```

希望这会有所帮助。

# javascript - 如何获取 ListView itemTemplate 中的按钮以执行不同的操作？

> ID：12269605
> 
> 赞同：4
> 
> 时间：2012-09-04T18:49:29.557
> 
> 标签：javascript, html, microsoft-metro, winjs

**上下文：**这是一个具体的基于其 HTML/JS 框架的 Windows 8 Metro 应用程序问题。

我想在 ListView 中的项目的模板中放置一个或两个最常见的辅助操作。想想音乐播放器。单击名称会立即播放曲目，但我还希望每行都有一个“添加到播放列表”按钮。

当我在模板中添加一个按钮时，即使我向该按钮添加了一个处理程序，ListView 的 onItemInvoked 函数总是会被调用，而我的按钮的处理程序永远不会被调用。如果我可以从 onItemInvoked CustomEvent 中识别出单击了哪个元素，那就很好了，但是 target 和 sourceElement 始终是模板的外部 div，而不是被单击的实际内容。

有人对我如何进行这项工作有一些建议吗？我已经看到了用于选择元素并在应用栏中显示附加选项的示例，但是对于像“添加到播放列表”这样常用的东西，这只会带来糟糕的用户体验。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T21:54:13.260

我在 msdn 开发论坛上发布了同样的问题，希望尽快得到答案。感谢那里的 jpsanders，他们向我指出了 win-interactive：

[http://social.msdn.microsoft.com/Forums/en-US/winappswithhtml5/thread/cd5e3b84-8405-4894-9f37-3608e448bae9](http://social.msdn.microsoft.com/Forums/en-US/winappswithhtml5/thread/cd5e3b84-8405-4894-9f37-3608e448bae9)

# c# - 多线程生产者/消费者

> ID：12269614
> 
> 赞同：2
> 
> 时间：2012-09-04T18:50:06.843
> 
> 标签：c#, producer-consumer

我有一个用 C# 编写的代理服务器。我还有一个 Java 小程序，它通过这个 C# 代理从视频服务器接收 MJPEG 数据。我的问题是，当视频服务器当前没有更多 MJPEG 数据可用时，代理卡在阻塞读取调用中，我无法终止它。

```
// write the forwarded output
// blocking on remoteServerResponseStream.Read
while (m_running && (read = remoteServerResponseStream.Read(buffer, 0, buffer.Length)) > 0)
{
    bytesRead += read;

    output.Write(buffer, 0, read);

    output.Flush();
} 
```

这应该由关闭流的 Java 小程序终止（`output`上面代码中的变量）。`remoteServerResponseStream.Read`但是，Java 小程序无法关闭此连接，因为代理在等待数据时从不确认关闭请求。

我已经在这个问题上停留了一周。我想我可能已经想到了一个解决方案，但我不确定它是否会起作用。我很想听听对此的任何反馈。

我的想法是`removeServerResponseStream.Read`在另一个线程上使用共享队列来传输数据。该线程将读取数据并将其放入队列中。然后，我的主线程会将队列中可用的任何数据转发到`output`. 这样，我可以不断检查是否`output.CanWrite`会变为假，在这种情况下，我可以中止读取线程（这是我所知道的中断阻塞流读取的唯一方法）。这是一个可行的解决方案吗？如果是这样，我应该不断地轮询队列以获取可用数据还是应该创建一个事件？我很想听听关于这个问题的任何想法！提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T19:00:57.257

在这些情况下，我只是从另一个线程结束流读取器。当您关闭阅读器时，它将打破循环。通过额外的同步队列只是不必要地做更多的样板。最终，您必须在某个地方停止阻塞阅读器。将值放入队列只会阻止您的消费者被阻止，但不会阻止您的读者。

这是一个套接字阻塞读取的示例。我将阻止读取 1 个我故意永远不会发送的字节。几秒钟后，我将处理套接字，套接字将退出其阻塞读取，应用程序将正常退出。我将记录每个线程正在做什么以及何时发生（每个日志行前面的数字是线程 ID，我将缩进单独的线程）。

在您使用阻塞阅读器的类中，您应该实现 Disposable 模式并在那里关闭/处置您的阅读器。

```
static void Main(string[] args)
{
    SocketTest();

    Console.WriteLine("Press any key to exit");
    Console.ReadKey();
}

public static void SocketTest()
{
    int port = 22345;

    var tcpListener = new TcpListener(IPAddress.Any, port);

    tcpListener.Start();

    // Listening thread
    new Thread(() =>
    {

        Console.WriteLine(Thread.CurrentThread.ManagedThreadId + " - Waiting for connection to port");

        var socket = tcpListener.AcceptSocket();

        Console.WriteLine(Thread.CurrentThread.ManagedThreadId + " - Connection accepted");

        var stream = new NetworkStream(socket);
        var reader = new BinaryReader(stream);

        try
        {
            Console.WriteLine(Thread.CurrentThread.ManagedThreadId + " - Starting blocking read");
            var bytes = reader.ReadBytes(1);
            Console.WriteLine(Thread.CurrentThread.ManagedThreadId + " - Done blocking read, read {0} bytes", bytes.Length);
        }
        catch (Exception ex)
        {
            Console.WriteLine("Error reading " + ex);
        }
    }).Start();

    // connecting thread
    new Thread(() =>
    {
        var socket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);

        Console.WriteLine("\t" + Thread.CurrentThread.ManagedThreadId + " - Connecting to local port");

        socket.Connect("127.0.0.1", port);

        Console.WriteLine("\t" + Thread.CurrentThread.ManagedThreadId + " - Connecting to local succeeded");

        Thread.Sleep(TimeSpan.FromSeconds(2));

        Console.WriteLine("\t" + Thread.CurrentThread.ManagedThreadId + " - Disposing of socket");

        socket.Dispose();

    }).Start();

    Thread.Sleep(TimeSpan.FromSeconds(5));
} 
```

当你运行它时，你会得到：

```
3 - Waiting for connection to port
        4 - Connecting to local port
        4 - Connecting to local succeeded
3 - Connection accepted
3 - Starting blocking read
        4 - Disposing of socket
3 - Done blocking read, read 0 bytes
Press any key to exit 
```

不过，您自己在这里回答了这个问题：

> 我的想法是让 removeServerResponseStream.Read 在另一个线程上

这正是你应该做的。当您知道您的应用程序已关闭时，请从活动线程关闭套接字。这个空闲是被阻塞的线程，你可以优雅地结束。

这里的模式是您通常为特定套接字启动一个线程，并维护一个活动线程，该线程是一种用于请求的“控制器”线程。

# javascript - 在 Internet Explorer 中禁用 Alt + *X* 的方法是什么？

> ID：12269615
> 
> 赞同：0
> 
> 时间：2012-09-04T18:50:06.947
> 
> 标签：javascript, internet-explorer

从本质上讲，在我们的系统中，我们的用户输入报告，他们会找到各种方式来意外丢失他们的工作，因此我们一直在锁定他们可以按下的所有可能使他们丢失数据的东西。F5, CRTL + R, CTRL + W 和 Backspace 都被禁用；IE 中的所有栏都被隐藏，并且关闭按钮上有一个确认对话框。

我没有任何运气禁用 ALT + F4、ALT + ←、ALT + →

我试过用javascript禁用它们。但是我的方法不起作用。

```
if (window.event.altKey) {
    if (window.event.keyCode == 115) {
        window.event.cancelBubble = true;
        window.event.returnValue = false;
        window.event.keyCode = 0;
        window.status = "Alt + F4 is disabled on all popups";
        return false;
    }
} 
```

我想我可能需要更激烈的方法。

[在这里](https://stackoverflow.com/questions/6798363/how-can-i-disable-altf4-event-in-ie-browser%20here)的这个答案中，他建议使用 shdocvw.dll 可能会实现这一点，但我不确定这会带来什么。

有没有办法禁用 Alt + *X*组合或者可以解决我可以利用它们的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T18:53:48.670

不，您不能禁用这些组合 - 并且出于良好的安全原因（否则任何网页都可能劫持您的计算机......）。

您最好的选择是（按功能降序排列）：

*   不断将工作保存在服务器上（想想 Google Docs）
*   使用客户端存储（[WebStorage](http://dev.w3.org/html5/webstorage/)等）
*   实现一个 onBeforeUnload 处理程序，在离开页面（或关闭浏览器）之前要求确认
*   强制您的用户在退出时使用保存页面状态的浏览器（包括表单等）（例如 Firefox 和 IIRC、Chrome）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T19:01:58.720

你不应该弄乱默认的浏览器行为。如果您担心用户意外关闭窗口，只需使用`onbeforeunload`事件：

```
window.onbeforeunload = function () {
    return 'You will lose all unsaved changes.';
};​ 
```

[http://jsfiddle.net/jbabey/rPLWd/](http://jsfiddle.net/jbabey/rPLWd/)

# mercurial - 如何在 Mercurial 中搜索特定更改？

> ID：12269616
> 
> 赞同：2
> 
> 时间：2012-09-04T18:50:09.503
> 
> 标签：mercurial

我在一个我不记得的分支上添加了一个函数来归档。我想将该功能移植到不同的分支。如何搜索 Mercurial 才能找到它？

我知道函数的名称和我放入的文件。

* * *

我正在使用 TortoiseHg，它的顶部有一个搜索栏。我不确定它在内部使用的是哪个 Mecurial 命令..也许`hg log`？

但到目前为止我有

```
 user('me') and file('glob:class/database.php') and ????('myfunctionname') 
```

不确定我可以使用[什么过滤器](http://www.selenic.com/mercurial/hg.1.html)来搜索差异内容。

另外，我真的不知道这些文件名模式是如何工作的，我似乎必须从基础搜索；我不能对文件名进行完全匹配，不包括目录？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T21:50:13.453

我相信[grep](http://www.selenic.com/mercurial/hg.1.html#grep)命令是您正在寻找的：

```
 hg grep 'myfunctionname' -r "user('me') and file('class/database.php')" 
```

`file`您可以通过指定完整路径来匹配 revset 查询中的特定文件。用于`**file.extension`查找`file.extension`存储库中的任何位置。有关更多信息，请参阅有关[文件模式](http://www.selenic.com/mercurial/hg.1.html#patterns)的 Mercurial 文档。但是，他们对于如何在存储库中的任何位置匹配具有特定名称的任何文件有点不清楚，因此您可能需要做一些实验。

# jquery-plugins - jQuery验证：输入全部通过验证后消失

> ID：12269619
> 
> 赞同：1
> 
> 时间：2012-09-04T18:50:21.040
> 
> 标签：jquery-plugins, validation

想不通这个...

在下面的表单中，一旦验证通过所有输入，所有输入就会消失，只留下提交按钮可见。

例如，如果我在完成之前单击此表单上的“提交”，所有未完成的字段都会被赋予“.incomplete”错误类以标记它们不正确。如果我然后逐一检查输入并完成它们，错误类就会消失。但是一旦最后剩下的输入完成并且错误类被删除，所有输入都会消失，只剩下“提交”。

我可以说它与 .incomplete CSS 类有关，只要用户单击“提交”而没有正确完成所有字段，就会应用该类。但是，我无法弄清楚是什么导致了这种行为。非常感谢任何帮助或想法！很抱歉他的代码片段太长，但我认为在这种情况下，信息太多总比不够好。

验证规则：

```
$(document).ready(function() {
       $("#form").validate({
            errorLabelContainer: ".textbox",
            keyup: false,
            onfocusout: false,
            onclick: false,
            errorElement: "input",
            errorClass: "incomplete",
            rules: {
                organization: {
                    defaultInvalid: true,
                    required: true,
                    minlength: 2
                    },
                firstname: {
                    defaultInvalid: true,
                    required: true,
                    minlength: 2
                    },
                lastname: {
                    defaultInvalid: true,
                    required: true,
                    minlength: 2
                    },
                email: {
                    defaultInvalid: true,
                    required: true,
                    email: true
                    },
                phone: {
                    defaultInvalid: true,
                    required: true,
                    minlength: 10,
                    },
            },
        });
   }); 
```

表单 HTML：

```
<div id="form">
    <div id="form_title">REQUEST INFO</div>
    <form id="form" name="form_container" action="#">
        <!-- fields -->
        <input id="organization" class="textbox" type="text" name="organization" minlength="2" value="Organization"/>
        <input id="firstname" class="textbox"  type="text" name="firstname" minlength="2" value="First Name"/>
        <input id="lastname" class="textbox"  type="text"  name="lastname" minlength="2" value="Last Name"/>
        <input id="email" class="textbox"  type="text" name="email" value="Email"/>
        <input id="phone" class="textbox"  type="text" name="phone" value="Phone"/>
        <!-- submit button -->
        <input id="button" name="submit" class="button" type="submit" value="submit"> 
    </form>
</div> 
```

我正在使用 jQuery 验证插件的 1.9 版。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T18:59:18.157

首先，您是否添加了自定义方法

```
jQuery.validator.addMethod("defaultInvalid", function(value, element) 
{
    return !(element.value == element.defaultValue);
}); 
```

然后更正您的验证JS，底部有多余的逗号

```
(document).ready(function() {
       $("#form").validate({
            errorLabelContainer: ".textbox",
            keyup: false,
            onfocusout: false,
            onclick: false,
            errorElement: "input",
            errorClass: "incomplete",
            rules: {
                organization: {
                    defaultInvalid: true,
                    required: true,
                    minlength: 2
                    },
                firstname: {
                    defaultInvalid: true,
                    required: true,
                    minlength: 2
                    },
                lastname: {
                    defaultInvalid: true,
                    required: true,
                    minlength: 2
                    },
                email: {
                    defaultInvalid: true,
                    required: true,
                    email: true
                    },
                phone: {
                    defaultInvalid: true,
                    required: true,
                    minlength: 10
                }
            }
        });
   }); 
```

另外我建议您尝试这种方式：

```
$('#Form').validate({           
            onchange: false,            
            errorLabelContainer: $('.error-container'),
            wrapper: "p",
                    rules: { ...//specify rules here }
}); 
```

# java - 我使用动作状态吗？基于单选按钮加载下拉值

> ID：12269640
> 
> 赞同：0
> 
> 时间：2012-09-04T18:52:17.670
> 
> 标签：java, spring, spring-mvc, spring-webflow

我使用动作状态吗？基于单选按钮加载下拉值

我正在尝试根据用户单击单选按钮来加载下拉列表的值，但我不知道这是否可以通过动作状态来完成。

这就是我的想法。

我的流程有：

```
<view-state id="SchoolVisitReport" view="SchoolVisitReport.jsp" model="visit">
            <transition on="submit" to="addVisit">
                <evaluate expression="flowActions.validateVisit(visit, messageContext)"/>
            </transition>
            <transition on="cancel" to="endState" bind="false"/>
            <transition on="loadSchools" to="loadSchools" bind="false"/>
</view-state>

<action-state id="loadSchools">
        <evaluate expression="flowActions.initializeSelectableStates()"  result="flowScope.selectableStates" />
</action-state> 
```

我的控制器有这样的东西

```
public Map<String, String> initializeSelectableStates(Visit visit) {
        LOGGER.debug("inside initializeSelectableStats");

        LinkedHashMap<String, String> selectableStates = new LinkedHashMap<String, String>();

        selectableStates.put("NY", "NY");
        selectableStates.put("Nj", "Nj");
        return selectableStates;
    } 
```

但这不起作用..有人可以帮帮我吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T18:33:55.877

执行以下 JSP 代码...它可以工作..

```
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<%@ taglib prefix="form" uri="http://www.springframework.org/tags/form"%>
<html>
<head>
<title>Spring 3.0 MVC - Web Flow Example</title>

<script type="text/javascript"
    src="<c:url value="/resources/dojo/dojo.js" />">

</script>
<script type="text/javascript"
    src="<c:url value="/resources/spring/Spring.js" />">

</script>
<script type="text/javascript"
    src="<c:url value="/resources/spring/Spring-Dojo.js" />">

</script>

<link type="text/css" rel="stylesheet"
    href="<c:url value="/resources/dijit/themes/tundra/tundra.css" />" />
</head>
<body>
    <h2>Customer Registration</h2>

    <form:form commandName="customer" id="customer">
        <input type="hidden" name="_flowExecutionKey"
            value="${flowExecutionKey}" />
        <table>
            <tr>
                <td><font color=red><form:errors path="name" /></font><b>Name:
                </b></td>
                <td><form:input path="name" id="name" /> <script
                        type="text/javascript">
                    Spring
                            .addDecoration(new Spring.ElementDecoration(
                                    {
                                        elementId : "name",
                                        widgetType : "dijit.form.ValidationTextBox",
                                        widgetAttrs : {
                                            promptMessage : "This is the name you would like entered into the system."
                                        }
                                    }));
                </script> <br />
                    <p></td>
            </tr>
            <tr>
                <td><font color=red><form:errors path="phoneNumber" /></font>

                    <b>Phone number: </b></td>
                <td><form:input path="phoneNumber" id="phoneNumber" /><br />
                    <script type="text/javascript">
                        Spring
                                .addDecoration(new Spring.ElementDecoration(
                                        {
                                            elementId : "phoneNumber",
                                            widgetType : "dijit.form.ValidationTextBox",
                                            widgetAttrs : {
                                                promptMessage : "This is the phone number for the above name"
                                            }
                                        }));
                    </script></td>
            </tr>
            <tr>
                <td></td>
            </tr>
            <tr>
                <td><b>Row:</b></td>
                <td><form:radiobutton value="B" path="row" id="rowBtnA" />Row: B<BR>
                    <form:radiobutton value="A" path="row" id="rowBtnB" />Row: A<BR>
                    <script type="text/javascript">
            Spring.addDecoration(new Spring.AjaxEventDecoration({
                elementId: "rowBtnA",
                event: "onchange",
                formId:"customer",
                params: {fragments:"body", _eventId: "proceed"}
            }));
        </script>

        <script type="text/javascript">
            Spring.addDecoration(new Spring.AjaxEventDecoration({
                elementId: "rowBtnB",
                event: "onchange",
                formId:"customer",
                params: {fragments:"body", _eventId: "proceed"}
            }));
        </script>

        </td>
            </tr>
            <tr>
            <td>Year of Birth:</td>
            <td>
            <form:select path="byear">
            <form:option value="2012" label="2012" />
            <form:option value="2011" label="2011" />
            <form:option value="2010" label="2010" />
            </form:select>

        <script type="text/javascript">
            Spring.addDecoration(new Spring.AjaxEventDecoration({
                elementId: "byear",
                event: "onchange",
                formId:"customer",
                params: {fragments:"body", _eventId: "proceed"}
            }));
        </script>
        </td></tr>

        </table>
        <input type="submit" name="_eventId_proceed" value="proceed"
            id="proceed" />
            <input type="submit" name="_eventId_cancel" value="Cancel" />
    </form:form>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T19:50:04.867

那这个呢？它将使用更新的信息重新加载您的页面

```
<view-state id="SchoolVisitReport" view="SchoolVisitReport.jsp" model="visit">
                <transition on="submit" to="addVisit">
                    <evaluate expression="flowActions.validateVisit(visit, messageContext)"/>
                </transition>
                <transition on="cancel" to="endState" bind="false"/>
                <transition on="loadSchools" to="SchoolVisitReport" validate="false" bind="false">
                     <evaluate expression="flowActions.initializeSelectableStates()"  result="flowScope.selectableStates" />
                </transition>
    </view-state> 
```

# kml - 为数百个点更改地标气球

> ID：12269641
> 
> 赞同：2
> 
> 时间：2012-09-04T18:52:18.940
> 
> 标签：kml, google-earth

我有一个 KML 文件，其中包含城市加油站位置的单独地标。（我在 GeoMedia 中创建了这个并导出到 KML）。

我想将每个地标的气球样式修改为类似于其中一种气球样式 - [http://earth.google.com/outreach/tutorial_balloon.html](http://earth.google.com/outreach/tutorial_balloon.html)

有什么方法可以将气球样式应用于文件中的每个地标？我必须逐点进行，还是可以将气球样式放在文件顶部并让其他地标引用该样式？

我对 KML 很陌生，所以任何见解都会受到赞赏。

谢谢

* * *

@Matt - 我已经使用了您的建议并尝试了各种迭代，但似乎无法做到正确。该文件已经创建了地标 - 我只想编辑包括添加徽标、删除方向等的样式。

新样式出现，但架构文本未出现在地标气球中。

我在下面粘贴了一些代码 - 任何想法将不胜感激。

```
<Schema name="" id="Schema20">
<SimpleField type="xsd:int" name="Building_ID"></SimpleField>
<SimpleField type="xsd:string" name="Building Name"></SimpleField>
<SimpleField type="xsd:string" name="Street Address"></SimpleField>
<SimpleField type="xsd:string" name="Office Type"></SimpleField>
<SimpleField type="xsd:double" name="GFA (m2)"></SimpleField>
<SimpleField type="xsd:string" name="GFA_(sqft)"></SimpleField>
<SimpleField type="xsd:int" name="Storeys"></SimpleField>
<SimpleField type="xsd:int" name="Year Built/Occupied">
</SimpleField></Schema>

<Style id="TestStyle"> 
<BalloonStyle>
<bgColor>ffffffbb</bgColor>
<text><![CDATA[<b><font color="#CC0000" size="+3">$[name]</font></b><br/><br/>
<font face="Courier">$[description]</font><br/><br/> $[geDirections]   ]]>
</text>
</BalloonStyle>
</Style>

<Folder>
<name>Office Buildings</name>

<Placemark>
<name>539</name>
<styleUrl>#TestStyle</styleUrl>
<ExtendedData>
<SchemaData schemaUrl="#Schema20">
<SimpleData name="Building_ID">111</SimpleData>
<SimpleData name="Building Name">Name</SimpleData>
<SimpleData name="Street Address">Address</SimpleData>
<SimpleData name="Office Type">Secondary Office</SimpleData>
<SimpleData name="GFA (m2)">100</SimpleData>
<SimpleData name="GFA_(sqft)">1000</SimpleData>
<SimpleData name="Storeys">5</SimpleData>               
<SimpleData name="Year Built/Occupied">2010</SimpleData>
</SchemaData>
</ExtendedData><Point>
<coordinates>-122.370533,37.823842,0</coordinates></Point>
</Placemark> 
```

.....还有1000个这样的

* * *

@马特-

我遇到的是，如果我使用气球样式，那么我在之前的文章中引用的 Schema 中的数据不会出现在气球中。如果我留空，那么 Schema 将出现在气球中。你知道我怎样才能让两者都出现吗？

谢谢，

```
 <BalloonStyle>      
      <text>
     <![CDATA[<img align="right" src="http://www.website.com/logo.jpg" width="175">]]>
     $[description]
     </text>
     <bgColor>ffffffbb</bgColor>
 </BalloonStyle> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T21:32:20.203

您可以`styleUrl`为您使用地标（您需要将其应用于您想要具有选定样式的所有地标）：

```
<styleUrl>#someIDforStyle</styleUrl> 
```

如果样式部分位于不同的文件中，则只需添加链接：

```
<styleUrl>styles\pathToFile\StyleFile.kml#someIDforStyle</styleUrl> 
```

以上两者都会将某个样式与该 ID 相关联，类似于：

```
<Style id='someIDforStyle'>
     <BalloonStyle>
          <text>
             <![CDATA[  .... 
                   your are going to want to add html here to make your balloons similar to that link 
                ...
             ]]>
          </text>
     </BalloonStyle>
</Style> 
```

您可以查看此 kml 链接以添加自定义数据：[https ://developers.google.com/kml/documentation/extendeddata](https://developers.google.com/kml/documentation/extendeddata)

# iphone - 来自 NSDictionary 的奇怪值

> ID：12269642
> 
> 赞同：-2
> 
> 时间：2012-09-04T18:52:20.267
> 
> 标签：iphone, objective-c

我有一个 NSDictionary，当我对其进行 [currentOrder debugDescription] 调用时，布局如下，然后我执行以下操作：

```
[currentOrder valueForKey: @"itemOrder"] 
```

它返回有趣的括号为：

```
(
    "4 X ESPRESSO"
) 
```

它应该只在哪里（不带括号）：

```
4 X EXPRESSO 
```

知道为什么吗？

当前订单的内容：

```
currentOrder: <__NSArrayM 0x68426c0>(
{
    extra1Select = 0;
    extra2Select = 0;
    extra3Select = 0;
    itemCost = 58;
    itemOrder = "4 X ESPRESSO";
    itemOrderDescription = "Cookie: YES, Sugar: YES";
    itemQuantity = 4;
    itemRestaurant = VidaECaffe;
    plistItem =     {
        cost = "11.5";
        description = "R11.50";
        extra1 =         {
            desc = Cookie;
            details =             (
                                {
                    cost = "3.00";
                    option1 = YES;
                },
                                {
                    cost = "0.00";
                    option2 = NO;
                }
            );
        };
        extra2 =         {
            desc = Sugar;
            details =             (
                                {
                    cost = "0.00";
                    option1 = YES;
                },
                                {
                    cost = "0.00";
                    option2 = NO;
                }
            );
        };
        itemRestaurant = VidaECaffe;
        level = 1;
        title = ESPRESSO;
    };
}
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T19:10:58.320

问题是它`currentOrder`不是字典，而是`NSArray`包含字典。您接下来要做的失败是您使用`valueForKey:`的是键值编码系列的一部分，而不是字典的指定访问方法（即`objectForKey:`），并且该数组将返回一个过滤后的数组作为结果......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T19:15:18.787

当您在调试器中打印出数组或字典的值时，调试器会包含额外的括号、大括号等，因此您可以看到您所询问的结构的布局。

如果调试器显示数组的内容，例如

```
(
    "Foobar"
) 
```

它告诉您该数组有一个元素，一个值为 的字符串`Foobar`。

换一种说法：阅读调试器在打印出值时所做的事情。这里和网络上有很多资源。例如：[使用 GDB 进行调试：命令、打印和打印对象简介](http://mobiledevelopertips.com/debugging/debugging-with-gdb-introduction-to-commands.html)

# tsql - 提取日期字符串的一部分并在 T-SQL 中转换为日期时间

> ID：12269646
> 
> 赞同：1
> 
> 时间：2012-09-04T18:52:47.320
> 
> 标签：tsql, datetime, sql-server-2008-r2, varchar

我在 64 位版本的 Windows Server 2008 R2 标准 (sp1) 上运行 SQL Server Standard 2008 R2

我已将日志文件作为平面文件源导入。`col2`表中调用的导入中的一列`big`保存如下值：`16/Mar/2007:11:30:17`as `varchar(50)`。

我想将该列 ( `col2`) 转换为`datetime`数据类型。

我尝试的一种方法是提取日期字符串的每个部分，然后重新组合并转换它们。

我遇到的问题是每一列都有不同的宽度，因为日志文件不能被整齐地分隔，使得使用`CHARINDEX`返回一个数字或有时为 NULL 之类的东西。

我一直在尝试使用 CLR 集成使用正则表达式进行设置，但无法使其工作（我无法在 Visual Studio 中创建 C# 项目，没有选项）并且无法安装 Master Data Services，因为 SQL Server 2008 R2 Standard 不支持它。

我最好的方法是什么？使用`CASE`,`SUBSTRING`和`CHARINDEX`?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T20:34:16.047

尝试这个

```
DECLARE @d varchar(50) = '16/Mar/2007:11:30:17'

SELECT CAST(STUFF(@d,CHARINDEX(':',@d),1,' ')  AS DATETIME) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T08:51:08.103

虽然我喜欢 EricZ 的想法，但是，这是我的解决方案

```
DECLARE @d varchar(50) = '16/Mar/2007:11:30:17'
SELECT CAST( LEFT(@d,PATINDEX('%:%',@d) - 1) + ' ' +  SUBSTRING(@d,PATINDEX('%:%',@d) + 1,LEN(@d)) AS DATETIME) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T19:30:40.573

```
select convert(datetime, 
       SUBSTRING('16/Mar/2007:11:30:17', 0, CHARINDEX(':', '16/Mar/2007:11:30:17')) + ' ' +
       SUBSTRING('16/Mar/2007:11:30:17', CHARINDEX(':', '16/Mar/2007:11:30:17') + 1, 8) , 1) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T06:07:01.403

试试这个>

```
select convert(datetime,STUFF(big,CHARINDEX(':',big),1,' '),101) from yourtable 
```

示例：在此处检查为数据时间字符串格式。如果相同，它将起作用

```
DECLARE @d varchar(50) = '16/Mar/2007:11:30:17'
select convert(datetime,STUFF(@d,CHARINDEX(':',@d),1,' '),101) 
```

# ruby-on-rails - 模型中未定义的 Any_instance

> ID：12269648
> 
> 赞同：2
> 
> 时间：2012-09-04T18:52:58.387
> 
> 标签：ruby-on-rails, rspec, stubbing

我正在编写一个 rspec 测试 - 出于某种原因，我被告知 any_instance 方法未定义。我很惊讶，因为我对我的一个控制器 rspec 文件有非常相似的期望——而且效果很好。任何想法为什么会发生这种情况？

```
require 'spec_helper'

describe Subscriber do

  it {should belong_to :user}

  describe "send_message should use mobile to send message" do
    subscriber = Subscriber.new(:number => "123")
    Mobile.any_instance.should_receive(:send_sms).with("123")
    subscriber.send_message("hello!")
  end
end 
```

**错误**

```
/subscriber_spec.rb:9:in `block (2 levels) in <top (required)>': 
undefined method `any_instance' for Mobile:Class (NoMethodError) 
```

我的 rspec 版本（取自我的 gemfile）

> gem "rspec-rails", ">= 2.11.0", :group => [:development, :test]

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-04T19:06:39.807

真的很清楚：您没有将测试包装在一个`it`块中。就这样。

# javascript - 指向其他页面的 jQuery Mobile 锚链接不起作用

> ID：12269650
> 
> 赞同：2
> 
> 时间：2012-09-04T18:53:01.593
> 
> 标签：javascript, jquery, jquery-mobile, hyperlink, anchor

我正在创建一个 jQuery Mobile Web 应用程序。

此链接正常工作：

```
<a href="/ThePage/25" data-transition="slidedown">Click Here 1</a><!--This is working--> 
```

但是，这些*具有锚点*的链接不起作用：

```
<a href="/ThePage/25#3" data-transition="slidedown">Click Here 2</a><!--This is not working-->
<a href="/ThePage/25/#3" data-transition="slidedown">Click Here 3</a><!--This is not working--> 
```

如何使那些`#`与 ajax 导航一起使用的链接？

**编辑：**包含这些链接的页面包含一些指向不同文章的链接。并`/ThePage/25`包含那篇文章的全文。我希望每个链接都转到里面的某个地方`/ThePage/25`。所以我用过`#`。（`#3`指页面中的第三篇文章）...您知道更好的方法吗？

**编辑2：**我只是想加载/显示一个页面，然后在其中跳转......

**编辑 3：**我在该页面内的跳转不是简单的跳转。这是一个自定义处理的`hashchange`事件跳跃。但是如果有任何其他方法，我可以更改该页面...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T18:55:07.983

将 rel="external" 添加到任何具有锚点 # 并且您不想通过 ajax 加载的链接。

新链接将是：

```
<a href="/ThePage/25#3" rel="external" data-transition="slidedown">Click Here 2</a><!--This is not working-->
<a href="/ThePage/25/#3" rel="external" data-transition="slidedown">Click Here 3</a> 
```

有关更多详细信息，请参阅[http://jquerymobile.com/demos/1.1.1/docs/pages/page-links.html](http://jquerymobile.com/demos/1.1.1/docs/pages/page-links.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T19:09:35.733

您可以尝试像这样从 JS 中使用它，我遇到了`#`标签问题：

```
<a class='homeSet'>Home</a> 
```

……

```
 $('body').on('click', '.homeSet', function(ev) {
    $.mobile.changePage('/home.html#myhome', {
        transition : "slide"
    });
    return false;
    }); 
```

# windows - 在 Windows 上运行 grunt 时，我收到默认 grunt.js 文件的“访问被拒绝”错误

> ID：12269658
> 
> 赞同：1
> 
> 时间：2012-09-04T18:53:59.627
> 
> 标签：windows, gruntjs

我正在 Windows 7 机器上安装 grunt.js。我已经在我的 .grunt 上设置了 Grunt `%PATH%`，但是当我尝试执行它时，我收到了这个错误：

```
C:\project>grunt
Access is denied. 
```

但是，如果我将 grunt 文件从`grunt.js`to重命名并使用该标志`gruntfile.js`重新运行 Grunt ，它可以工作：`--config`

```
C:\project>grunt --config gruntfile.js

...Lots of Grunt output...

5 specs, 0 failures in 0.041s.

Done, without errors. 
```

我`%PATH%`的设置如下：

`set PATH=.;%NODE_HOME%;%PATH%`

知道为什么我会看到此“访问被拒绝”错误吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T18:53:59.627

Grunt 的[常见问题解答](https://github.com/cowboy/grunt/blob/master/docs/faq.md#on-windows-why-does-my-js-editor-open-when-i-try-to-run-grunt-%E2%9A%91)给了我解决方案：

> 如果您与 grunt.js gruntfile 位于同一目录中，Windows 会在您键入 grunt 时尝试执行该文件。所以你需要输入 grunt.cmd 代替。

常见问题解答只是显示了与我看到的不同的输出；使用`grunt.cmd`修复它。

# .net - .Net AES 实施

> ID：12269660
> 
> 赞同：0
> 
> 时间：2012-09-04T18:54:04.050
> 
> 标签：.net, cryptography, aes

我正在使用 bcrypt 和 AES 为移动设备实现登录机制。用户必须使用密码登录，然后使用 bcrypt 对其进行哈希处理并与数据库中的哈希值进行比较。当然，登录事务将通过 SSL 进行，并且服务器将被配置为仅提供 SSL。那部分非常简单。

但是，我还想存储一个 cookie，这样用户就不必每次都登录。cookie 将在 24 小时后自动从设备中删除。我计划存储一个由日期时间戳和 bcrypt 哈希组成的 AES 加密字符串。AES 实现是我遇到困难的地方。我计划使用[Encryptamajig](https://github.com/jbubriski/Encryptamajig "加密机")，它是“.NET AES 加密算法功能的简单包装器”，但后来我看到[这个问题](https://github.com/jbubriski/Encryptamajig/issues/7)发布在上面，但尚未修复。（问题与使用相同的派生函数生成 IV 作为密钥有关）。

我的问题是，这是一个大问题，应该阻止我使用这个包装器吗？（我的密码学知识正在增加，但仍然相对较低；但是，如果我理解正确，这与使 WEP 如此容易破解的问题接近）

如果是，是否有使用 .Net 的[AES 类](http://msdn.microsoft.com/en-us/library/system.security.cryptography.aes.aspx)的最佳/更好的做法？似乎目前关于 SO 的大多数答案都较旧，并且根本不涉及 AES 类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T18:57:37.170

IMO cookie 应该是存储在数据库中的自动登录表中的随机令牌。然后，您可以在不更改用户密码的情况下使这些令牌无效。

在 .net 上使用 AES 时，我会使用其中一个内置类，[`Rijndael`](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rijndael.aspx)块大小为 128 或`Aes`. 如果我需要额外的速度，我只会使用其他实现（加密类的构建通常很慢）。

# jquery - MediaElement.js - 如何为音频设置 Flash 后备？

> ID：12269666
> 
> 赞同：2
> 
> 时间：2012-09-04T18:54:32.777
> 
> 标签：jquery, audio, internet-explorer-8, mediaelement.js

我的目标是使用 MediaElement.js 在 ie8 中播放音频。应使用 MediaElement.js Flash 后备。

我正在使用类似于下面显示的代码。它适用于 Chrome 和 ie9，但不适用于 ie8。音频控件应位于的位置会出现一个黑条，但看不到任何控件。

如果以下代码中的某些元素是正确的，我不是。例如，我不确定是否应该将对象选项卡放在音频标签内。

我怎样才能让闪存回退工作？

```
These three lines are inside the head tag:
<script src="path/to/jquery.js"></script>
<script src="path/to/mediaelement-and-player.min.js"></script>
<link rel="stylesheet" type="text/css" href="path/to/mediaelementplayer.css">

<audio id="player1" type="audio/mp3" controls="controls" src="absolute path/to/song.mp3">

    <source src="path/to/song.ogg"></source>

    <object width="400" height="30" type="application/x-shockwave-flash" data="absolute path/to/flashmediaelement.swf">
        <param name="movie" value="absolute path/to/flashmediaelement.swf" />
        <param name="flashvars" value="controls=true&file=absolute path/to/song.mp3" />
    </object>

</audio>

<script>
$(document).ready(function(){
    $('audio').mediaelementplayer();
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T16:12:46.877

我知道这是一个迟到的答案，但我想我还是会做出贡献，因为我刚刚遇到了类似的问题，其他人可能会觉得这个答案很有帮助。

您的代码在我看来有点臃肿，因此更简单的解决方案是：

```
<audio controls="control" preload="none">
    <source id="mp3_src" src="music.mp3" type="audio/mp3">      
    <source id="ogg_src" src="music.ogg" type="audio/ogg">
</audio> 
```

确保 mp3 文件列在 ogg 文件之前，否则当 Flash 后备要启动时，您只会得到一个下载文件框。-无论如何在 IE9 中。

# c# - 在 C# 中锁定静态方法

> ID：12269670
> 
> 赞同：0
> 
> 时间：2012-09-04T18:54:40.853
> 
> 标签：c#, java, .net, locking

我想在 C# 中锁定一个静态方法，这是 java 中同步的替代方法。

以下是方法

```
public synchronized static  void UpdateDialListFile(String filePath, int lineno,
        String lineToBeInserted) 
```

现在我在 C# 中实现这个功能，同步的替代方法将如何在 C# 中工作

上面的方法是从一个线程中调用的

```
 new DialList(oDialInfo.FileName,oDialInfo.AppId,oDialInfo.AppCode,
        pausetime,oDialInfo, PropVal).start(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T18:56:40.543

`[MethodImpl(MethodImplOptions.Synchronized)]`

如果要同步整个方法，可以使用它。

类似的问题：

[java的同步关键字的C#版本？](https://stackoverflow.com/questions/541194/c-sharp-version-of-javas-synchronized-keyword)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T19:08:42.067

您可以使用这样的[lock 语句](http://msdn.microsoft.com/en-us/library/c5kehkcz%28v=vs.80%29.aspx)来序列化对关键部分或资源的访问。保护对象的范围/含义完全取决于您：

```
public class Widget
{
  // scope of 'latch'/what it represents is up to you.
  private static readonly object latch = new object() ;

  public void DoSomething()
  {
    DoSomethingReentrant() ;

    lock ( latch )
    {
       // nobody else may enter this critical section
       // (or any other critical section guarded by 'latch'
       // until you exit the body of the 'lock' statement.
       SerializedAccessDependentUponLatch() ;
    }
    DoSomethingElseReentrant() ;
    return ;
  }
} 
```

CLR 中可用的其他同步原语列在[http://msdn.microsoft.com/en-us/library/ms228964(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/ms228964(v=vs.110).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T19:35:42.133

您还可以使用 Monitor.Enter 和 Monitor.Exit 来锁定临界区。

# database - 数据库实例小时数？

> ID：12269671
> 
> 赞同：1
> 
> 时间：2012-09-04T18:54:51.727
> 
> 标签：database, instance

我试图弄清楚数据库实例小时的含义。我用 PHP 编码

```
$connection = mysql_connect("url","username","password");
$select = mysql_select("dbname", $connection);
$array = mysql_query("Select * FROM table where field=something");
// More operations with the fetched data in $ array
mysql_close($connection); 
```

现在，我按数据库实例小时收费（每小时不同的费率取决于占用的内存大小）

可能的解释：

$connection 是一个实例。它跨越（时间跨度）mysql_connect 直到 mysql_close。正确的 ？

$Connection & $Select 和 $array 是实例。实例消耗是mysql引擎分别连接、选择和获取数据所花费的时间。Mysql_close 也是一个实例，它的时间跨度是数据库引擎关闭连接所用的时间对吗？

还是都错了？？用理由回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T18:59:09.277

您的数据库存在于一个实例上，并且该实例处于活动状态的每一个小时都是一个可计费的“实例小时”。

更具体地说：在您的数据库所在的云中某处有一台机器、一台机器的一部分或多台机器。对于该机器、这些机器中的每一个或该机器的您的一部分“活动”的每一小时，您必须为实例小时付费。

活着只是意味着机器已经打开并且能够连接到，不管你是否真的通过 PHP 连接到它。

# r - 如何在 R 中保存分层 pdf（通过 Sweave？）

> ID：12269673
> 
> 赞同：11
> 
> 时间：2012-09-04T18:55:00.197
> 
> 标签：r, pdf, latex, sweave

我已经搜索了 SO、谷歌、阅读`?pdf`，并得出了关于将绘图保存为 pdf 的可能性，这些图层可以在 pdf 查看器边缘打开和关闭。我正在谈论的一个例子是 USGS 四方地形图，它可以下载为具有多个图层的 pdf，例如[这个](http://ims.er.usgs.gov/gda_services/download?item_id=5629236&quad=Big%20Sur&state=CA&grid=7.5X7.5&series=TNM%20GeoPDF)（压缩的 pdf）。

pdf() 帮助文件中的以下句子听起来很不祥，但我还想确认我没有误解它：

```
 The R graphics model does not distinguish graphics objects at the level 
 of the driver interface. 
```

我曾经能够在 Illustrator 中保存分层的 pdf，但不再有这个程序可供我使用。也许有人可以从 R 中想到一种解决方法？我用来映射的数据很大，但这是一个玩具示例：

```
pdf("2objects.pdf")
plot(NULL, type = "n",xlim = c(0,1),ylim = c(0,1))
rect(0,.7,.7,0,border = "blue",lwd=2)
rect(.3,1,1,.3,border = "red",lty=2,lwd=2)
dev.off() 
```

它看起来像这样（它是一个png，但上面会给出一个pdf） ![在此处输入图像描述](../Images/43944e77193aebc543fe9e13d1451694.png)

我希望能够将红色和蓝色框作为具有可见性的图层，可以从 pdf 查看器中打开和关闭。

非常感谢！

编辑：[在 R-help 中找到线程](http://r.789695.n4.nabble.com/Creating-a-pdf-with-layers-td4637183.html)（回复：@mnel），它看起来是不可能的。我仍然会留下这个问题，以防有人想出了一个漂亮的 R-tastic 解决方法。

编辑（2012 年 9 月 5 日）：我尝试通过 Sweave 执行此操作，并使用[此处](http://tug.org/pipermail/pdftex/2009-September/008092.html)发布的解决方法取得了部分成功。此方法生成带有“图层”的单个 pdf，可以使用图像下方的超链接文本打开和关闭。它使用“动画”技巧来做到这一点。虽然它仍然不是我最终想要的结果，但它的优点是不依赖于特定的 pdf 查看器。我仍然会等着看是否有人发布了一种在 Sweave 文档中制作图层的方法，也就是 OCG，然后我可以将其自动化。

编辑（2012 年 9 月 13 日）：我使用上面提到的代码发布了我的进度作为答案。我能够让它在更复杂的现实世界情况下工作，而无需更改代码，覆盖美国境内的不同行政和统计边界。在这种情况下，我只是将不同的地图叠加层命名为`layer-0.pdf`、`layer-1.pdf`等，它可以正常工作。我仍然希望最终会出现更好的东西。

谢谢大家的评论

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T19:29:05.937

我可以通过`ggplot`.

```
library(ggplot2)
df <- data.frame(x = c(1,10), y = c(20,40), class = 1:2)
layered_plot <- ggplot(df, aes(xmin = x, xmax = x + 1, ymin = y, ymax = y + 2, fill = class)) +
geom_rect() + 
opts(legend.position = "none") 
# Now save this as pdf
ggsave(layered_plot, file="p1.pdf") 
```

![在此处输入图像描述](../Images/5e03700f2c5600d109cd43a6b373b6e7.png)

（这只是`png`用于说明的版本，但是当我`pdf`在 Illustrator 中打开时，我可以根据需要关闭各个图层）。

![在此处输入图像描述](../Images/756cd5740fc4711b6f14c6b82a532316.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T15:46:07.803

看起来 ( `tex`)`animation`答案是我现在能想到的最好的答案。以下`.Rnw`文件将创建一个 pdf，中间有一个图形，下面有 2 个文本超链接，它们分别切换红色和蓝色框的可见性。[我在这里](http://tug.org/pipermail/pdftex/2009-September/008092.html)找到了使这项工作的 Tex 代码。我还没有看过@Aaron 的`ocgtools`建议，但会到达那里。谢谢大家的建议！

```
\documentclass{article}
%----------------------------------------------------------------%\
\usepackage[OT1]{fontenc}
\usepackage{Sweave}
\usepackage{animate}
\usepackage{hyperref}
\usepackage[margin=0.4in]{geometry}
%----------------------------------------------------------------%

\makeatletter
% command to create a toggle link
\newcommand{\ShowHideLayer}[3]{%
  % #1: anim No. (zero-based),
  % #2: layer No. (zero-based),
  % #3: link text
  \leavevmode%
  \pdfstartlink user {
    /Subtype /Link
    /Border [\@pdfborder]%
    /A <<
      /S/JavaScript
      /JS (
        \if at anim@useocg%
          if(a#1.fr[#2].state==true){
            a#1.fr[#2].state=false;
          }else{
            a#1.fr[#2].state=true;
          }
        \else
          if (a#1.fr[#2].display==display.visible){
            a#1.fr[#2].display=display.hidden;
          }else{
            a#1.fr[#2].display=display.visible;
          }
          this.dirty=false;
        \fi
      )
    >>
  }#3%
  \pdfendlink%
}

% command to create a link to show/hide all layers
\newcommand{\ShowHideAll}[2]{%
  % #1: anim No. (zero-based),
  % #2: link text
  \leavevmode%
  \pdfstartlink user {
    /Subtype /Link
    /Border [\@pdfborder]%
    /A <<
      /S/JavaScript
      /JS (
        var countvisible=0;
        for(var i in a#1.fr){
          \if at anim@useocg
            if(a#1.fr[i].state==true){countvisible++;}
          \else
            if (a#1.fr[i].display==display.visible){countvisible++;}
          \fi
        }
        if(countvisible){
          for(var i in a#1.fr){
            \if at anim@useocg
              a#1.fr[i].state=false;
            \else
              a#1.fr[i].display=display.hidden;
              this.dirty=false;
            \fi
          }
        }
        else{
          for(var i in a#1.fr){
            \if at anim@useocg
              a#1.fr[i].state=true;
            \else
              a#1.fr[i].display=display.visible;
              this.dirty=false;
            \fi
          }
        }
      )
    >>
  }#2%
  \pdfendlink%
}
\makeatother

\begin{document}

% heres the R-making of the plots, saved to working directory,
% which should be the folder containing this .Rnw file
% 3 versions of the same plot, one for each layer
<<echo = FALSE, hide = TRUE>>=
pdf("layer-0.pdf")
plot(NULL, type = "n", xlim = c(0, 1), ylim = c(0, 1), xlab = "", ylab = "")
dev.off()

pdf("layer-1.pdf")
plot(NULL, type = "n", xlim = c(0, 1), ylim = c(0, 1), axes = FALSE, xlab = "", ylab = "")
rect(0, .7, .7, 0, border = "blue", lwd = 2)
dev.off()

pdf("layer-2.pdf")
plot(NULL, type = "n", xlim = c(0, 1), ylim = c(0, 1), axes = FALSE, xlab = "", ylab = "")
rect(.3, 1, 1, .3, border = "red", lty = 2, lwd = 2)
dev.off()
@

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{center}
  %animated layer-set No. 0
  %                                          v-- frame rate ignored
  \animategraphics[width=1\linewidth,step]{1}{layer-}{0}{2}

  \ShowHideLayer{0}{1}{toggle red box}\\
  \ShowHideLayer{0}{2}{toggle blue box}\\
\end{center}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\end{document} 
```

# ruby-on-rails - ActiveRecord 销毁方法 - 参数数量错误（0 代表 1）

> ID：12269675
> 
> 赞同：3
> 
> 时间：2012-09-04T18:55:11.680
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我有 3 张桌子和 3 个模型：

碳水化合物

```
 has_many :cars_domains, :dependent => :delete_all
  has_many :domains, :through => :cars_domains 
```

域名.rb

```
has_many :cars_domains
has_many :cars, :through => :cars_domains 
```

和cars_domain.rb

```
class CarsDomain < ActiveRecord::Base
  belongs_to :car
  belongs_to :domain

  attr_accessible :car_id, :domain_id
end

class CreateCarsDomains < ActiveRecord::Migration
  def change
    create_table :cars_domains, :id => false do |t|
      t.references :car, :domain
      t.timestamps
    end

    add_index :cars_domains, [:car_id, :domain_id]
  end
end 
```

一辆车可以在某些领域。当我创建汽车并绑定到域时，一切都很好。

但是当我尝试从 cars_domains 表中销毁时，出现错误：

```
CarsDomain.where(:car_id => 2, :domain_id => 1).destroy
ArgumentError: wrong number of arguments (0 for 1) 
```

或者

```
 CarsDomain.where(:car_id => 2, :domain_id => 1).destroy_all

  CarsDomain Load (0.5ms)  SELECT "cars_domains".* FROM "cars_domains" WHERE "cars_domains"."car_id" = 2 AND "cars_do
mains"."domain_id" = 1

   (0.2ms)  SAVEPOINT active_record_1
Could not log "sql.active_record" event. NoMethodError: undefined method `name' for nil:NilClass
   (0.3ms)  ROLLBACK TO SAVEPOINT active_record_1
ActiveRecord::StatementInvalid: PGError: ERROR:  zero-length delimited identifier at or near """"
LINE 1: DELETE FROM "cars_domains" WHERE "cars_domains"."" = $1
                                                        ^
: DELETE FROM "cars_domains" WHERE "cars_domains"."" = $1
        from /usr/local/lib/ruby/gems/1.9.1/gems/activerecord-3.1.3/lib/active_record/connection_adapters/postgresql_
adapter.rb:1062:in `prepare' 
```

怎么了？

升级版：

```
CarsDomain.destroy_all(:car_id => 2, :domain_id => 1) 
```

CarsDomain Load (0.9ms) SELECT "cars_domains".* FROM "cars_domains" WHERE "cars_domains"."car_id" = 2 AND "cars_do mains"."domain_id" = 1 (0.2ms) SAVEPOINT active_record_1 无法记录 "sql.active_record “ 事件。NoMethodError: nil:NilClass (0.2ms) ROLLBACK TO SAVEPOINT active_record_1 ActiveRecord::StatementInvalid: PGError: 错误: 零长度分隔标识符在“””第 1 行：从“cars_domains”中删除car_domains"."" = $1 ^ : 从 "cars_domains" 中删除 "cars_domains"."" = $1

更新 2

我认为 ID 中的问题 ---- create_table :cars_domains, :id => false。因为 Destroy 方法需要它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T19:03:12.753

因为你有更多的条目，它属于 CarsDomain。CarsDomain#destroy 需要一个 id，所以这就是您收到此消息的原因。有条件使用`destory_all`！

`CarsDomain.destroy_all(:car_id => 2, :domain_id => 1)`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-04T19:02:09.353

你正在处理一个集合，所以使用`destroy_all`.

[见文档](http://apidock.com/rails/ActiveRecord/Relation/destroy_all)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-04T19:11:55.890

在您的汽车模型（car.rb）中，您将依赖设置为`:delete_all`，当它应该是`:destroy`，意味着`has_many :cars_domains, :dependent => :destroy`

如果您的域也依赖于您，您还需要添加`:dependent => :destroy`到您的域模型中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-05T17:15:40.967

问题出在：create_table :cars_domains, :id => false do |t|

正确的变体是： create_table :cars_domains do |t|

还有 CarsDomain.where(:car_id => params[:car_id], :domain_id => params[:domain_id]).destroy_all

# highcharts - 从 rangeSelector 获取日期输入框的值

> ID：12269678
> 
> 赞同：3
> 
> 时间：2012-09-04T18:55:33.437
> 
> 标签：highcharts, highstock

是否可以从 rangeSelector 获取日期输入框的值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T19:46:05.557

```
var chart = new Highcharts.StockChart(chartingOptions);
...
var zoomStartEpochTime = chart.rangeSelector.leftBox.HCTime;
var zoomEndEpochTime = chart.rangeSelector.rightBox.HCTime; 
```

或者，您可以查询相同[的 xAxis 的极值](http://api.highcharts.com/highstock#Axis.getExtremes%28%29)

```
var zoomStartEpochTime = chart.xAxis[0].getExtremes().min;
var zoomEndEpochTime = chart.xAxis[0].getExtremes().max; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-04T19:30:16.840

是的，您可以获得这些值。如果您使用的是 JQuery：

```
var minDate = $('input.highcharts-range-selector:eq(0)').val();
var maxDate = $('input.highcharts-range-selector:eq(1)').val(); 
```

# ios - iOS将对象保持在后台执行任务的范围内

> ID：12269679
> 
> 赞同：2
> 
> 时间：2012-09-04T18:55:33.813
> 
> 标签：ios

如何将对象保持在范围内，该对象在后台执行任务，该对象是从另一个对象的方法实例化的？

请参阅以下示例。对象 A 的 display 方法实例化对象 B 并调用它的 display 方法。当 B 对象的 display 方法启动一个异步任务时，控制返回到 A::display 方法，该方法返回，并且 bObject 被释放。在后台线程中访问 bObject 的数据/方法时，会抛出异常。

维护对象 B 范围的最佳方法是什么？我可以将对象 B 声明为 A 的成员变量，但这会增加对象 A 整个生命周期的范围。

```
 @implementation A

   -(void) display
   {
     B* bObject = [[B alloc] init];
     [bObject display];
   }
@end

 @implementation B

   -(void) display
   {
      dispatch_async((dispatch_get_global_queue( DISPATCH_QUEUE_PRIORITY_LOW, 0),{
       self.data = 5;
       ---------
     });
@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T18:59:07.483

以前在 iOS 中你可以这样做，然后假设你创建的对象返回了一些委托回调，你可以释放它。现在，您必须将“bObject”作为您的类的成员变量，并在完成后将其设置为 nil，或者等待 A 被销毁，这将使 bObject 超出范围。我假设这是使用 ARC，并且一旦“显示”完成，您的局部变量就超出了范围并且由于 ARC 而被释放。

您可以将其添加到 A：

```
@property (nonatomic, strong)B *bObject; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T18:58:59.967

`B *bObject`您可以在 A 的界面中创建 iVar 。只要确保您没有在任何地方释放 bObject 即可。此外，您可能不想从 bObject 的块中引用 self。

```
@interface A : NSObject 
@property (strong, nonatomic) B *bObject;
@end

@implementation A
    - (void)display {
        self.bObject = [[B alloc] init];
        [self.bObject display];
    }
@end

@implementation A
    - (void)display {
        B *safeSelf = __block self;
        dispatch_async((dispatch_get_global_queue( DISPATCH_QUEUE_PRIORITY_LOW, 0),{
            safeSelf.data = 5;
            ----
        });
    }
@end 
```

# version-control - 如何读取linux内核，有什么好的读取内核的工具吗？

> ID：12269680
> 
> 赞同：1
> 
> 时间：2012-09-04T18:55:33.350
> 
> 标签：version-control, open-source, linux-kernel, google-code, lxr

linux内核确实值得花很多时间去读，但是它这么大，你不知道怎么去追踪你应该从哪里开始读，你以前读过什么？

通常人们尝试阅读linux内核时会在阅读代码时发表一些评论，有人同意吗？所以 git 在阅读 linux kernl 时可能不错，但也许有时你想阅读 lxr 等 Web 工具上的代码，但让你失望的是你不能对 lxr 发表评论。

google code 支持comment，但是不能导出这样的comment:(那么如果你想阅读linux内核源代码你会选择什么工具呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T19:04:44.660

你不能一下子理解整个内核，即使使用魔法工具也不行。有太多的方面，每个方面都有很多方面和很多细微差别。

我建议从一个特定的兴趣领域开始，并主要关注它。如果您以前从未看过操作系统，那么最里面的区域是：

*   内存管理
*   流程管理
*   线程调度
*   文件系统
*   初始化

就工具而言，任何好的交叉引用网站都可以。 [LXR](http://lxr.linux.no/+trees)很好，但是需要一段时间才能熟悉。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T21:50:13.143

在开始写代码之前，一些理论知识很重要。专业的linux内核架构书会有很大帮助。

Lxr 非常适合
使用 ctags 在线浏览代码 VI 编辑器，而 Taglist 插件最适合离线浏览内核源代码。

# javascript - 延迟加载图像 - 搜索引擎中的索引图像

> ID：12269682
> 
> 赞同：1
> 
> 时间：2012-09-04T18:55:42.033
> 
> 标签：javascript, html, dom, search, seo

我相信谷歌显示的*DOM*也被*Javascript*修改过。看我用的工具*Fetch as Google/Bing/Baidu*

**看看结果：**

> 没有我的 jquery-plugin 和**noscript**（即纯 HTML）：
> 
> ![http://img845.imageshack.us/img845/2632/webpagethumbnail1.jpg](../Images/6aefb3d0c6c0472d30ae7960d3794e0f.png)

* * *

> 使用 javascript 和**noscript**：
> 
> ![http://img138.imageshack.us/img138/3485/webpagethumbnail.jpg](../Images/4aefef3a3ec8837d53df5a4020c61753.png)
> 
> **注意：**展示图像和操作 DOM 的 javascript。

**LIB Javascript**

下载和测试用例：[https ://github.com/brcontainer/defer-images/](https://github.com/brcontainer/defer-images/)

**问题：**

*   用`<noscript>`图像来帮助索引好不好？

*   如果这是一个坏主意，请给我一个适合索引图像的 HTML 示例，我可以使用*LazyLoad*。

*   如果 javascript 显示图像并*Fetch as Google/Bing/Baidu*正常显示内容（如浏览器），那么*Google/Bing/Baidu*索引 javascript 操作的 DOM？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T14:53:36.647

搜索引擎将索引该图像`grey.gif`。它永远不会知道`example.jpg`。

[`data-*`属性](http://www.w3.org/TR/html5/global-attributes.html#embedding-custom-non-visible-data-with-the-data-attributes)在 HTML5 中有效（仅）。

PS：不要忘记`alt`属性。

# python - 按内键python对字典进行排序

> ID：12269684
> 
> 赞同：0
> 
> 时间：2012-09-04T18:55:53.763
> 
> 标签：python

我有一个 3 维字典

```
 d = ({k1:{k2:{k3:v}}}
       and many more such keys....) 
```

现在，我想按 k3 对这本字典进行排序？做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T18:58:48.717

```
 sorted_keys = sorted(d.keys(),key=lambda x:d[x]['key2']['key3']) 
```

将为您排序键......（因为字典根据定义是未排序的）

# jquery - sudoSlider 问题 - .setOption() 不适用于某些选项

> ID：12269686
> 
> 赞同：0
> 
> 时间：2012-09-04T18:55:56.290
> 
> 标签：jquery, jquery-plugins

我正在使用[名为 sudoSlider 的 j Query 插件](http://webbies.dk/SudoSlider/)，并且我正在尝试在滑块初始化后设置一些选项。

如果我像这样初始化 sudoSlider：

```
var sudoSlider = $("#slider").sudoSlider({speed:500}); 
```

然后尝试做

```
sudoSlider.setOption('prevNext', false); 
```

上一个/下一个按钮不会消失，就像我认为的那样。

我也在尝试做

```
sudoSlider.setOption('afterAniFunc', foo); 
```

其中 foo 已被定义为所需的函数，但这也不起作用。

我怎样才能让它工作？我无法更改相关滑块的初始化调用，因此我需要在事后更改这些选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T14:33:34.567

我创建了 SudoSlider，您遇到的问题是一个错误。

您可以通过以小写形式给出选项参数来修复它（所以 'afteranifunc' 而不是 'afterAniFunc'）。

[您还可以在 github： https](https://github.com/webbiesdk/SudoSlider) ://github.com/webbiesdk/SudoSlider或网站：[http](http://webbies.dk/SudoSlider/) ://webbies.dk/SudoSlider/ 上获取固定的 JavaScript（2.2.2 版）

# qt - 当文本太大而无法容纳时，Qt QML TextEdit组件没有滑动条

> ID：12269688
> 
> 赞同：2
> 
> 时间：2012-09-04T18:56:05.920
> 
> 标签：qt, qml

开发工具包：Qt Creator 2.4.1

目标：诺基亚 N9 和 Windows 7

如果我在 qml 文件中执行以下操作

```
import QtQuick 1.1
import com.nokia.meego 1.0

Page {
    id: myShowChangeLogPage

     TextEdit  {
        id: changeLogArea
        anchors.top: titleBackground.bottom
        width: parent.width
        height: 300
        text: "1\n1\n1\n1\n2\n1\n1\n1\n1\n1\n3\n1\n1\n1\n4\n1\n1\n1\n1\n5\n1\n1\n1\n6\n1\n1\n1\n7\n1\n1\n1\n8\n\n\n\n\n9"
        font.pixelSize: 20
        textFormat: TextEdit.AutoText
        readOnly: true
        wrapMode: TextEdit.WordWrap
    }
} 
```

TextEdit 区域的行为不像我预期的那样。

1.  字符串将打印在 TextEdit 区域的大小之外，也就是说，它会在屏幕底部边缘下方继续打印。

2.  右侧没有滚动条/滑块

如果字符串太大而无法容纳在边界内，我期望 TextEdit 元素应自动创建滚动条/滑块。

我被告知 TextEdit 应该这样做，并且不需要 Flicker 或 ScrollArea。

我已经尝试过其他类型的组件，例如 Text 和 TextEdit，并且也将 TextEdit 封装在一个矩形中，但没有任何运气。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T23:51:14.890

[我在有关TextEdit](http://doc-snapshot.qt-project.org/4.8/qml-textedit.html)元素的文档的开头阅读了此内容：

> 请注意，TextEdit 不实现滚动、跟随光标或其他特定于外观的行为。

还有一个完整的例子来说明如何实现跟随光标的滚动。

# xaml - 列表框背景颜色 (XAML/WinRT/Metro)

> ID：12269695
> 
> 赞同：14
> 
> 时间：2012-09-04T18:56:34.833
> 
> 标签：xaml, windows-8, microsoft-metro, windows-runtime

我正在尝试更改 WinRT 页面 (XAML) 上“列表框”的背景颜色。当我使用“背景”属性时，它会在控件没有焦点时更改我想要的背景。当它获得焦点时，它变为白色，我不知道如何覆盖它。

我的问题，**如何强制 ListBox 的背景始终为灰色，无论它是否被选中/是否有焦点？**

XAML #1：

```
 <ListBox x:Name="ListBoxMenu" Background="LightGray" Grid.Row="0" Grid.Column="0" Margin="0,0,0,0">
        <ListBoxItem>Menu Item 1</ListBoxItem>
        <ListBoxItem>Menu Item 2</ListBoxItem>
        <ListBoxItem>Menu Item 3</ListBoxItem>
    </ListBox> 
```

XAML #2（还设置了每个项目）：

```
 <ListBox x:Name="ListBoxMenu" Background="LightGray" Grid.Row="0" Grid.Column="0" Height="124" VerticalAlignment="Top">
        <ListBoxItem Background="LightGray">Menu Item 1</ListBoxItem>
        <ListBoxItem Background="LightGray">Menu Item 2</ListBoxItem>
        <ListBoxItem Background="LightGray">Menu Item 3</ListBoxItem>
    </ListBox> 
```

![没有焦点时具有灰色背景的列表框](../Images/4b6307fe4f7324044583a1f520bfd63e.png)

![ListBox，当它获得焦点时将背景重置为白色](../Images/abcc87b974796890c367a6df396445ff.png)

作为临时解决方案，我将 ListBox 设置为仅硬编码的高度，然后在该列上使用边框以使用 LightGray 填充其余空间。我真的很想总是在 ListBox 上设置背景颜色，这可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-14T05:10:39.220

您可以在 XAML 资源文件中放置一些颜色笔刷覆盖来覆盖默认的 ListBox 控件模板颜色。

```
<SolidColorBrush x:Key="ListBoxBackgroundThemeBrush" Color="Transparent" />
<SolidColorBrush x:Key="ListBoxFocusBackgroundThemeBrush" Color="Transparent" /> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-04T19:27:49.593

使用 Visual Studio Blend 2012 并编辑 ListBox ItemTemplate 或其模板，这将在 XAML 中创建一个硬拷贝，您可以在其中编辑它的属性。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-24T17:25:12.560

我遇到了同样的问题，我使用了 Visual Studio Blend 的帮助。希望这可以帮助。

向 ListBoxMenu 添加样式，如下所示：

`<ListBox x:Name="ListBoxMenu" Style="{StaticResource ListBoxStyle1} Background="LightGray" Grid.Row="0" Grid.Column="0" Height="124" VerticalAlignment="Top"> <ListBoxItem Background="LightGray">Menu Item 1</ListBoxItem> <ListBoxItem Background="LightGray">Menu Item 2</ListBoxItem> <ListBoxItem Background="LightGray">Menu Item 3</ListBoxItem> </ListBox>`

然后指定样式如下：

```
<Style x:Key="ListBoxStyle1" TargetType="ListBox">
        <Setter Property="Foreground" Value="{StaticResource ListBoxForegroundThemeBrush}"/>
        <Setter Property="Background" Value="{StaticResource ListBoxBackgroundThemeBrush}"/>
        <Setter Property="BorderBrush" Value="{StaticResource ListBoxBorderThemeBrush}"/>
        <Setter Property="BorderThickness" Value="{StaticResource ListBoxBorderThemeThickness}"/>
        <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Disabled"/>
        <Setter Property="ScrollViewer.VerticalScrollBarVisibility" Value="Auto"/>
        <Setter Property="ScrollViewer.HorizontalScrollMode" Value="Disabled"/>
        <Setter Property="ScrollViewer.IsHorizontalRailEnabled" Value="True"/>
        <Setter Property="ScrollViewer.VerticalScrollMode" Value="Enabled"/>
        <Setter Property="ScrollViewer.IsVerticalRailEnabled" Value="True"/>
        <Setter Property="ScrollViewer.ZoomMode" Value="Disabled"/>
        <Setter Property="ScrollViewer.IsDeferredScrollingEnabled" Value="False"/>
        <Setter Property="ScrollViewer.BringIntoViewOnFocusChange" Value="True"/>
        <Setter Property="IsTabStop" Value="False"/>
        <Setter Property="TabNavigation" Value="Once"/>
        <Setter Property="FontFamily" Value="{StaticResource ContentControlThemeFontFamily}"/>
        <Setter Property="FontSize" Value="{StaticResource ControlContentThemeFontSize}"/>
        <Setter Property="ItemsPanel">
            <Setter.Value>
                <ItemsPanelTemplate>
                    <VirtualizingStackPanel/>
                </ItemsPanelTemplate>
            </Setter.Value>
        </Setter>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="ListBox">
                    <Border x:Name="LayoutRoot" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{StaticResource AppBarBackgroundThemeBrush}">
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal"/>
                                <VisualState x:Name="Disabled">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="BorderBrush" Storyboard.TargetName="LayoutRoot">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource ListBoxDisabledForegroundThemeBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>
                            <VisualStateGroup x:Name="FocusStates">
                                <VisualState x:Name="Focused">
                                <Storyboard>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="ScrollViewer">
                                        <DiscreteObjectKeyFrame KeyTime="0" Value="Black"/>
                                    </ObjectAnimationUsingKeyFrames>
                                </Storyboard>
                            </VisualState>
                                <VisualState x:Name="Unfocused"/>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>
                        <ScrollViewer x:Name="ScrollViewer">
                        <ItemsPresenter/>
                    </ScrollViewer>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

当焦点设置到 ListBox 时，上面的示例会将您的 List box 容器的背景替换为黑色。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-20T19:50:56.550

`Items`如果您在自定义a或中的颜色时需要更多帮助`ListBox`，它们的工作原理相同，只需确保更新属性，我建议您查看 Vito DeMercurio 的博客文章[在 WinRT 中设置 GridViewItem 样式](http://labs.vectorform.com/2012/09/styling-a-gridviewitem-in-winrt/)`ListView``GridView``TargetType`

# c# - 使用 asp.net 的谷歌文档列表 api

> ID：12269698
> 
> 赞同：0
> 
> 时间：2012-09-04T18:57:02.277
> 
> 标签：c#, asp.net, google-drive-api

如何使用浏览器上的 google doc list api 查看私有云上的文档。我正在使用 .net 技术

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T08:12:47.893

您应该查看 Google Drive SDK 文档，其中包含一个完整的 ASP.NET MVC 示例，该示例与存储在 Google Drive 上的文件进行交互：

[https://developers.google.com/drive/examples/dotnet](https://developers.google.com/drive/examples/dotnet)

# data-structures - 数组树数据结构

> ID：12269700
> 
> 赞同：2
> 
> 时间：2012-09-04T18:57:04.590
> 
> 标签：data-structures, binary-tree

我正在查看大量的树数据结构，这确实令人困惑。就像我了解基本的二叉树（还有它的众多实现，如 BST 红黑树等）但我真正需要的是一些关于 N'ary 树的信息。我需要研究各种类型的 N'ary 树以及它们的性能比较。到目前为止，我看到的唯一 N' ary 树是 B+ 树。我需要知道哪个是最快的 N'Ary 树。即最优化的时间复杂度，空间复杂度不是问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-09T09:19:13.153

通常，将某事物制作为K *[-ary](http://en.wikipedia.org/wiki/K-ary_tree)树*![$k > 2$](../Images/07196bff64f9dab56712f3b0f4bc79fe.png)不会比*二叉树*( ![$k=2$](../Images/504404596d6226dfabeee101d186f09f.png)) 提供任何渐近优势。例如，搜索平衡的*二叉树*可以及时完成![$\mathcal O \left(log_2 \ n\right)$](../Images/93250089fa8a36bd7f805755f975a1c8.png)。搜索一个平衡的*k-ary树*，会给你![$\mathcal O \left(k\cdot log_k \ n\right)$](../Images/ff961d3e8eb7fcc1a5cb2c687013812b.png)。假设![$k$](../Images/cc8c0eef6bfbc5faf8bf63a3e48eba24.png)是一个常数，![$log_k n$](../Images/88ad681e2d493981217dd218160c8075.png)并且![$日志n$](../Images/fa14c2be17aea452d09cf9962c19119e.png)对于任何其他基数，都渐近等效（对于 large ，增长率*将*是相同的![$n$](../Images/93b595e0fccc2ae4c00e92063d22b6e9.png)）。即，![$\mathcal O \left(log_i \ n\right)$](../Images/fd85a59cea916a41fd428c538f84d206.png)等价![$\mathcal O \left(log_j \ n\right)$](../Images/4859742a7f08fbb64d36c393739920cc.png)于任何![$i$](../Images/deda931b4db43c2a61dea37ba84764ae.png)and ![$j$](../Images/f26871b0b49f3dde663da89ba3871788.png)。因此，![$\mathcal O \left(k\cdot log_k \ n\right) =\ $\mathcal O \left(log \ n\right)$](../Images/005be176b4a4e4a7b6478eee3a844806.png)。

然而，实际上，*k-ary 树*可能会导致更好的内存访问模式，因为每个节点都包含彼此相邻![$k$](../Images/cc8c0eef6bfbc5faf8bf63a3e48eba24.png)的节点，这意味着树的高度更短（维基百科给出![$h$](../Images/0fae804e5971b5d1d5ab1673bb0efd1b.png)了完整*k-ary 树*的高度 ,为![$h=\left\lceil\log_k (k - 1) + \log_k (n) - 1\right\rceil$](../Images/961b27177dad61ad6823d31c6e07cddb.png)，这对于任何常数都是渐近相同的![$k$](../Images/cc8c0eef6bfbc5faf8bf63a3e48eba24.png)），并且遍历也可能跳得更少，因为叶节点可以包含多个有序键。

# linux - 服务器收到多个 FIN 数据包

> ID：12269702
> 
> 赞同：0
> 
> 时间：2012-09-04T18:57:16.750
> 
> 标签：linux, sockets, networking, tcp

我在 linux 机器上运行端口转发代理。来自浏览器的所有连接都使用代理重新路由到不同的端口。

每当代理接收到 (recv()) 0 字节时，我使用关闭关闭与外部世界的连接（通过代理打开）。当该连接关闭时，我关闭与浏览器的连接。安排如下：

```
 Connection Out                     Local Connection 
```

外部世界 <-----> 转发代理（本地盒子）<-------> 客户端（本地盒子）

但是，在同一个套接字关闭之前，我在“本地连接”上收到了多个长度为 0 的数据包。当代理试图关闭与外部世界的连接时，就会发生这种情况。

我的理解是 TIME_WAIT 值是 2*MSL 并且结果相当高（数百秒）。但是，我在几分之一秒内看到了多个 0 字节数据包。难道我做错了什么？或者我的理解是错误的。

谢谢

# java - eclipse for Java NoClassDefFound 在主入口点出现错误 - 包、项目和类是相同的

> ID：12269707
> 
> 赞同：0
> 
> 时间：2012-09-04T18:57:30.233
> 
> 标签：java, noclassdeffounderror, mainclass

试图创建一个 Windows 可执行文件，但总是在`Exception in thread main java.lang.NoClassDefFoundError`. 我已经阅读了所有其他回复，但到目前为止我的问题仍然是一样的。我有一个名为 testproject 的类文件，它的主要过程是 public static void。我的类文件在名为 testproject 的文件顶部还有一个包指示符。我的类文件成功编译成一个名为 testproject.class 的文件。

下面的命令有效，但是当我运行时`testproject.jar`，出现上述错误：

```
 jar cvfm testproject.jar c:\temp\manifest.txt *.class 
```

manifest.txt 的内容：

```
 Main-Class: testproject.testproject 
```

我尝试了许多主类的组合

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T19:21:21.550

请添加您在java文件中编写的代码。否则无法跟踪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T19:31:27.783

似乎 jvm 无法找到 Main 类的类文件。可能的根本原因可能是

1.  文件没有在正确的位置生成，尝试提取 jar 文件并查看类是否在正确的包文件夹中
2.  清单文件或 jvm 命令行类路径或清单文件不包含类文件路径的条目
3.  尝试使用 IDE 生成 JAR 文件，这通常会有所帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T20:32:56.220

似乎您正在从包“testproject”执行命令“jar”： jar -cvfm testproject.jar c:\temp\manifest.txt *.class

尝试从父文件夹执行它： jar -cvfm testproject.jar c:\temp\manifest.txt **testproject/*** .class

类文件将被放入“testproject”包中。

顺便说一句，请确保您的清单文件末尾有一个新的空行。

# python - For 循环未正确迭代

> ID：12269712
> 
> 赞同：2
> 
> 时间：2012-09-04T18:57:41.930
> 
> 标签：python, loops, merge

我编写了一个程序，将几个文本文件合并在一起，然后我尝试使用 for 循环将日期添加到第一列，因为有几个不同的日期。但是，使用这些循环，程序似乎无法正确迭代。

支持的文本文件有一个不带日期的时间列表；但是，每个文本文件都与不同的日期相关联。我将所有文本文件合并到一个文本文件中以便于使用，但为了使其有用，我试图将日期添加到时间，它出现在文本文件的第一列中。

代码如下所示：

```
 import glob
    from datetime import *
    mon = [6, 7]
    dayrange1 = [24, 25, 26, 27, 28, 29, 30]
    dayrange2 = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]

    m = 0
    d1 = 0
    d2 = 0
    newline = []

    fout = open("C:\\Users\\jessica.macleod\\Desktop\\SurmontArray1.txt", "a")
    for filename in glob.glob("C:\\Users\\jessica.macleod\\Desktop\\Surmont Noise Files\\s1-424surmontnoise2012*.txt"):
        f = open(filename)
        f.next()
        f.next()
        d1 = 0
        d2 = 0
        for months in mon:

            if m == 0:

                for days in dayrange1:

                    for line in f:
                        line += str(date(2012, mon[m], dayrange1[d1])) + " "
                        fout.write(line)
                    d1 = d1 + 1
                m = m + 1

            if m == 1:

                for days in dayrange2:

                    for line in f:
                        line += str(date(2012, mon[m], dayrange2[d2])) + " "
                        fout.write(line)
                    d2 = d2 + 1

        f.close()
    fout.close() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T19:11:56.867

`dayrange1`不会在第二个循环中迭代，`for months in mon`因为您已设置`m`为`1`. 它被跳过，因为它受到条件的保护`if m == 0:`。这意味着只有 glob 中第一个匹配的文件名才会有迭代的结果`dayrange1`。您需要重置`m`到`0`其中一个循环内部。

此外，您`days`在`daterange1`. 在该循环的第一次迭代期间，您将遍历`f`. 这意味着在文件的第二次迭代`daterange1`中用完了。

此外，您不要`days`在循环内部使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T20:20:39.213

我认为您可以通过将日期循环与文件名循环相结合来最好地解决迭代问题。有两种方法可以做到这一点，具体取决于您希望程序的灵活性或确定性：

*   如果您只需要程序在您将硬编码到程序中的特定日期工作，您应该执行日期循环并直接打开与这些日期对应的文件（没有文件名的通配和循环）。

*   相反，如果您希望程序处理您拥有数据文件的所有日期，则应放弃日期循环以支持 glob 循环，并解析文件名以获取关联的日期。

这是第一种情况的一些未经测试的代码：

```
from datetime import date

months = [6, 7]
days = { 6 : [24, 25, 26, 27, 28, 29, 30],
         7 : [1, 2, 3, 4, 5, 6, 7, 8, 9, 10] }

output_filename = "SurmontArray1.txt"
filename_template = "Surmont Noise Files\\s1-424surmontnoise2012%2d%2d.txt"

with open(output_filename, "a") as f_out:
    for month in months:
        for day in days[month]:
            with open(filename_template% (month, day)) as f_in:
                date_str = str(date(2012, month, day)) + " "
                for line in f_in:
                    f_out.write(date_str + line) 
```

这是第二种情况的代码：

```
from datetime import date
import glob
import re

output_filename = "SurmontArray1.txt"

with open(output_filename, "a") as f_out:
    filenames = glob.glob("Surmont Noise Files\\s1-424surmontnoise2012*.txt")
    for filename in filenames:
        year, month, day = re.search(r'(\d\d\d\d)(\d\d)(\d\d)\.txt',
                                     filename).groups()
        with open(filename) as f_in:
            for line in f_in:
                date_str = str(date(year, month, day)) + " "
                for line in f_in:
                    f_out.write(date_str + line) 
```

# razor - 上传文件而不刷新mvc razor中的整个页面

> ID：12269714
> 
> 赞同：0
> 
> 时间：2012-09-04T18:57:46.090
> 
> 标签：razor

我正在研究 MVC 3 Razor。如何在不刷新整个页面的情况下上传文件。我下面提到的代码

```
@using (Html.BeginForm())
    {
        <input type='file' name='file' id='file' />
        <input type="Button" value="upload" />
    } 
```

我的问题是我无法在上述 Html.BeginForm() 中定义动作和控制器。所以当我点击上传按钮时，它会转到控制器的操作。如何将我上传的文件从视图传递到控制器。请帮助。如果有任何演示样本可用，让我根据我的场景分享。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T07:55:00.200

检查此代码，

```
@using (Html.BeginForm("FileUploadss", "Controller", FormMethod.Post, 
                                  new {enctype ="multipart/form-data"})) 
{ 
        <input type='file' name='file' id='file' />
        <input type="submit" value="upload" />
} 
```

转到您的控制器并使用此代码，

```
 public ActionResult FileUploadss(HttpPostedFileBase file)
    {
       if(file.ContentLength>0)
            {
            }
    } 
```

# c# - Cookie 在 ASP.NET 中是如何工作的？

> ID：12269715
> 
> 赞同：7
> 
> 时间：2012-09-04T18:57:52.333
> 
> 标签：c#, asp.net, cookies

我工作的网站由几个项目（用多种语言编写）组成。现在我们必须在查询字符串和会话变量中使用一些笨拙的代码来让人们在从一个项目到另一个项目时保持登录状态。由于 cookie 是特定于域的，我们正在尝试将其转换为它们，因为它们可以使用一种语言在一个项目中设置，但可以由使用不同语言的不同项目（在同一域上）访问。

但是，我在更改 cookie 的值并删除它们时遇到问题。或者更具体地说，我无法对饼干棒进行任何更改。

例如在我的注销代码中：

```
if (Request.Cookies["thisuserlogin"] != null)
{
    HttpCookie myCookie = new HttpCookie("thisuserlogin");
    myCookie.Value = String.Empty;
    myCookie.Expires = DateTime.Now.AddDays(-1d);
    Response.Cookies.Add(myCookie);
    Response.Cookies.Set(myCookie);
    litTest.Text = myCookie.Expires.ToString() + "<br />" + Request.Cookies["thisuserlogin"].Expires.ToString();
} 
```

我最后一行是昨天，下一行是 1/1/0001 12:00:00，即使它们应该是同一个 cookie。那么为什么即使设置了cookie，它的值也没有改变呢？有没有办法强制用户的计算机更新 cookie 的值，包括删除？

非常感谢。PS 您可以提供任何 URL 以提供易于理解的 cookie 入门，我们将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T19:14:29.323

[http://msdn.microsoft.com/en-us/library/ms178194(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ms178194(v=vs.100).aspx)

```
if (Request.Cookies["thisuserlogin"] != null)
{
    HttpCookie byeCookie = new HttpCookie("thisuserlogin");
    byeCookie.Expires = DateTime.Now.AddDays(-1);
    Response.Cookies.Add(byeCookie);

    // Update Client
    Response.Redirect(Request.RawUrl);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T19:06:23.750

您应该在客户端使用像[Fiddler](http://www.fiddler2.com/fiddler2/)这样的工具来捕获所有来回传输的数据。这将帮助您了解您的 cookie 应该设置为过去的日期（并且在下一个请求中也缺少）。

至于您的文本框输出，您将列出您创建的 cookie 过期时间和**请求**cookie 的过期时间，后者没有。如果您改为查看响应 cookie，您应该会看到正在设置的日期。此外，调用 to`Response.Cookies.Set`是不必要的。`Response.Cookies.Add`应该是你所需要的。

# apache - 我不明白的 mod_rewrite 标志

> ID：12269717
> 
> 赞同：0
> 
> 时间：2012-09-04T18:58:05.010
> 
> 标签：apache, .htaccess

我在互联网上搜索了一些我似乎不明白的标志。

你什么时候使用 [E] 标志？

例如。

```
RewriteRule \.jpg$ - [env=dontlog:1] 
```

那有什么作用……？

NS（无后续请求）如何工作？如果我的 php 文件中有很多包含，我是否需要将其放在 NS 中以使其不会停止工作？它有什么用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T19:01:39.967

当该规则匹配 ( `\.jpg%`) 时，环境变量`dontlog`的值设置为`1`。

后来，最有可能使用它的场景是 Apache 配置定义了一个[`CustomLog`](http://httpd.apache.org/docs/2.2/mod/mod_log_config.html#customlog)指令，该指令读取该环境变量，并且在设置时不会将一行写入日志文件。因此，对图像文件的请求`.jpg`不会写入 Apache 日志。

例如：

```
# Log any request that doesn't have a dontlog variable set...
CustomLog logs/access_log common env=!dontlog 
```

[mod_rewrite 文档中](http://httpd.apache.org/docs/2.2/rewrite/flags.html#flag_e)有一点关于环境变量的信息

直接来自上述文档：

> 如果请求的 URI 是图像文件，则以下示例将名为“image”的环境变量设置为值“1”。然后，该环境变量用于从访问日志中排除这些请求。

```
RewriteRule \.(png|gif|jpg) - [E=image:1]
CustomLog logs/access_log combined env=!image 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T19:02:23.783

要回答关于为什么重写不起作用的问题，这是因为您的第一条规则将请求从 index.php 重写为 target.php，因此第二条规则将永远不会触发，因为请求的文件不再是 index.php。

该评论已经为您提供了环境变量标志的答案。

# android - Android开发——让微调器看起来像微调器

> ID：12269718
> 
> 赞同：0
> 
> 时间：2012-09-04T18:58:06.097
> 
> 标签：android, user-interface

我正在我的活动课程中以编程方式创建一个微调器。“微调器”看起来像下拉菜单，而不是微调器。我想我希望它看起来更像一个选择器（即日期选择器/时间选择器/数字选择器），您可以在其中旋转所有文本选项。

如果有可用的文本选择器，我会使用选择器类型的小部件，但我似乎找不到这样的小部件 - 只有一个数字选择器。这是我在活动中使用的代码。

```
 ArrayAdapter <String>lv1List = new ArrayAdapter<String>(this.getApplicationContext(),android.R.layout.simple_spinner_item,  new String[]{"item 1","item 2","item 3"});
        Spinner sp = new Spinner(getApplicationContext());
        sp.setAdapter(lv1List);
        sp.setOnItemSelectedListener(this); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T19:24:59.347

看看[Android Wheel](http://code.google.com/p/android-wheel/ "安卓轮")。你可以有文字或几乎任何东西。完美运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T20:26:46.680

如果您想创建自己的微调器，则快速（且效率低下）示例。（与列表视图适配器一起使用）：

布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="fill_parent"
              android:layout_height="wrap_content"
        android:orientation="horizontal">

    <FrameLayout android:id="@+id/container"
              android:layout_width="0dp"
              android:layout_height="wrap_content"
              android:layout_weight="1"
              android:layout_gravity="center_vertical"
              />

    <LinearLayout android:layout_width="wrap_content"
                  android:layout_height="wrap_content"
                  android:layout_gravity="center_vertical"
                  android:orientation="vertical">
        <Button android:id="@+id/btn_up"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:text="up"/>
        <Button android:id="@+id/btn_down"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:text="down"/>
    </LinearLayout>

</LinearLayout> 
```

CustomSpinner 类：

```
public class CustomSpinner extends FrameLayout{
// ------------------------------ FIELDS ------------------------------

    private FrameLayout mContainer;
    private SpinnerAdapter mAdapter;
    private int index = 0;

// --------------------------- CONSTRUCTORS ---------------------------

    public CustomSpinner(Context context) {
        super(context);
        init(context);
    }

    public CustomSpinner(Context context, AttributeSet attrs) {
        super(context, attrs);
        init(context);
    }

    private void init(Context context){
        this.addView(LayoutInflater.from(context).inflate(R.layout.custom_spinner,this,false));

        findViewById(R.id.btn_up).setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View view) {
                index--;
                refresh();
            }
        });

        findViewById(R.id.btn_down).setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View view) {
                index++;
                refresh();
            }
        });

        mContainer = (FrameLayout) findViewById(R.id.container);
    }

// -------------------------- OTHER METHODS --------------------------

    public void setAdapter(SpinnerAdapter adapter) {
        this.mAdapter = adapter;
        refresh();
    }

    private void refresh() {
        //----needs recycling for better performance---
        //---now, we'll just clear up--
         mContainer.removeAllViews();

        //---do we need to refresh ? -----
        if(mAdapter == null || mAdapter.getCount() == 0){return;}

        //--clamp index--
        index = Math.max(0,index);
        index = Math.min(mAdapter.getCount() - 1, index);

        //--get view and show it-----
        View currentView = mAdapter.getView(index,null,mContainer);
         mContainer.addView(currentView);
    }
} 
```

用例：

布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent"
              android:orientation="vertical"
        >

 <com.example.CustomSpinner android:id="@+id/custom_spinner"
            android:layout_height="fill_parent"
            android:layout_width="fill_parent"
                               />
</LinearLayout> 
```

活动：

```
public class MyActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1,
                new String[]{"Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"});

        ((CustomSpinner)findViewById(R.id.custom_spinner)).setAdapter(adapter);

    }
} 
```

# python - 使用关键字与真实短语进行翻译

> ID：12269719
> 
> 赞同：0
> 
> 时间：2012-09-04T18:58:06.627
> 
> 标签：python, django, internationalization, translation, templating

对于具有大量固定字符串（标签、公告等）的网站，我将在项目中添加国际化，我想知道您在原始代码中使用关键字与真实短语的经验？哪个更好用？

检查这个例子 - 在 django 中：

实句：

```
<p>
    {% trans "Welcome to my website" %}
</p> 
```

关键词：

```
<p>
    {% trans "WELCOME_MESSAGE" %}
</p> 
```

当然使用真实的短语更容易，但我有一些不好的经历。考虑一个通用词，`{% trans "contacts" %}`用作页面的标题，而在其他地方使用在短语中，例如`{{selected_contacts_count}}{% trans "contacts" %}`，`contacts`页面标题的翻译可能与`contacts`短语中单词的翻译不同，所以这是一个冲突。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T20:27:44.153

我认为这主要是个人品味的问题。

使用真实的短语，您将遇到提到的冲突，对于您的示例，您可以使用

`{% blocktrans %}{{selected_contacts_count}} contacts{% endblocktrans %}`反而。

使用关键字，您必须为所有翻译创建一个唯一的关键字，这在您的项目增长时可能并不容易，因此事先设计某种命名约定可能是个好主意。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T19:04:56.597

Of course that keywords are better, not only because they are easier to read for a programmer, but also makes finding those strings in files faster, and you are not 'tied' to one language (e.g. English)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T22:11:13.747

关键词。

在某个地方，某个时间，某个地方，你需要一个翻译表。它可能是平面文件，也可能是数据库存储，但它可能看起来像这样：

```
field | language | message 
```

构建和维护基于关键字的系统会容易得多：

```
WELCOME_MESSAGE | EN | Welcome to our online h ome
WELCOME_MESSAGE | FR | bienvenue chez nous en ligne
WELCOME_MESSAGE | SW | kuwakaribisha nyumbani kwetu online 
```

如果您将数据插入到这些翻译中，您可能会遇到的一个问题是必须处理复数形式：

```
There is one item.  
There are four items.

You have one new message.
You have four new messages. 
```

因此，在您前进时请记住这一点。

# java - 在 C++ 中模拟 Java 枚举

> ID：12269720
> 
> 赞同：7
> 
> 时间：2012-09-04T18:58:15.610
> 
> 标签：java, c++, enums, c++11, migration

我一直在将我前段时间编写的一个应用程序从 Java 移植到 C++。我很快意识到的一件事是 Java 丰富的 Enum（在 Java 5 中引入）远远优于 C++ 中提供的那些。C++0x 和后来的 C++11 的“强类型枚举”（又名枚举类）仍然没有提供 Java 枚举所提供的丰富性，我在这里找不到任何东西来模拟这个工具。

我开始尝试将一些特性模拟为独立类，我希望得到一些帮助来实现这一点，如果合适的话可能使用模板（似乎应该有一种更通用的方式来实现它）。您将看到通过字符串名称查找特定 Enum 的能力相当冗长 - （这是 Java ENUM 的**valueOf(String str)**方法的模拟 - 它有效 - 但我确信它远非最佳. 我实现 Enum 实例的方式是在类中使用静态 const 实例 - 我在 Stack Overflow 的某个地方找到了这个 - 但我不记得确切的位置 - 抱歉。

仅供参考，该应用程序是一个 NMEA 字符串解析器，这里有一些更有趣的 Enum 类：

这是标题

```
#ifndef _NMEASentence_h_
#define _NMEASentence_h_

// SYSTEM INCLUDES
#include <stdint.h>
#include <string>

// APPLICATION INCLUDES
// DEFINES
// MACROS
// EXTERNAL FUNCTIONS
// EXTERNAL VARIABLES
// CONSTANTS
// STRUCTS
// TYPEDEFS
// FORWARD DECLARATIONS

 /**
 *  Name:  NMEASentence
 */
class NMEASentence
{
public:
    static const int MAX_LEN;
    static const char START;
    static const char CKSM_DELIM;
    static const char CR;
    static const char LF;

    NMEASentence(
        const std::string rPrefix,
        const std::string& rParams)
        : mPrefix(rPrefix)
        , mParams(rParams)
    {};

    // make the class abstract
    virtual ~NMEASentence() = 0;

protected:
    std::string mPrefix;
    std::string mParams;
};

#endif // _NMEASentence_h_ 
```

这是CPP

```
// SYSTEM INCLUDES
// APPLICATION INCLUDES
#include "vcdu/NMEASentence.h"

// EXTERNAL FUNCTIONS
// EXTERNAL VARIABLES
// CONSTANTS
// STATIC VARIABLE INITIALIZATIONS
const int NMEASentence::MAX_LEN = 82;
const char NMEASentence::START = '$';
const char NMEASentence::CKSM_DELIM = '*';
const char CR = '\r';
const char LF = '\n';    

// implementation of the pure virtual dtor allowed
// its a trick to allow class to be abstract
NMEASentence::~NMEASentence()
{}; 
```

这是通用 NMEASentence 类的子类

```
#ifndef _CDUMessage_h_
#define _CDUMessage_h_

// SYSTEM INCLUDES
//#include <...>

// APPLICATION INCLUDES
#include "vcdu/NMEASentence.h"
#include "vcdu/CDUEnumConstants.h"

// DEFINES
// MACROS
// EXTERNAL FUNCTIONS
// EXTERNAL VARIABLES
// CONSTANTS
// STRUCTS
// TYPEDEFS
// FORWARD DECLARATIONS

/**
 * CDUMessage
 */
class CDUMessage : public NMEASentence
{
public:
    /**
     * 5 classifications of message types, The type specifies the
     * number and type of each parameter
     */
    typedef enum CDUMessageSubType {
        Alive,
        Display,
        XYDisplay,
        Status,
        Keyboard,
        Configuration
    } CDUMessageSubType;

    /**
     * enumeration of the supported message types & their arg count
     */
    static class CDUMessageType {
    public:
        static const CDUMessageType CDUAlive;
        // the following 3 messages are associated with the title line
        static const CDUMessageType CDUDisplayDataStatusBlock;
        static const CDUMessageType CDUDisplayTitle;
        static const CDUMessageType CDUDisplayPageNumber;
        // these messages are associated with the active display area
        static const CDUMessageType CDUDisplayScratchPad;
        static const CDUMessageType CDUDisplayLS1Text;
        static const CDUMessageType CDUDisplayLS2Text;
        static const CDUMessageType CDUDisplayLS3Text;
        static const CDUMessageType CDUDisplayLS4Text;
        static const CDUMessageType CDUDisplayLS5Text;
        static const CDUMessageType CDUDisplayLS6Text;
        static const CDUMessageType CDUDisplayLS1SText;
        static const CDUMessageType CDUDisplayLS2SText;
        static const CDUMessageType CDUDisplayLS3SText;
        static const CDUMessageType CDUDisplayLS4SText;
        static const CDUMessageType CDUDisplayLS5SText;
        static const CDUMessageType CDUDisplayLS6SText;
        static const CDUMessageType CDUDisplayRS1Text;
        static const CDUMessageType CDUDisplayRS2Text;
        static const CDUMessageType CDUDisplayRS3Text;
        static const CDUMessageType CDUDisplayRS4Text;
        static const CDUMessageType CDUDisplayRS5Text;
        static const CDUMessageType CDUDisplayRS6Text;
        static const CDUMessageType CDUDisplayRS1SText;
        static const CDUMessageType CDUDisplayRS2SText;
        static const CDUMessageType CDUDisplayRS3SText;
        static const CDUMessageType CDUDisplayRS4SText;
        static const CDUMessageType CDUDisplayRS5SText;
        static const CDUMessageType CDUDisplayRS6SText;
        // this is a special message to clear the screen buffer
        static const CDUMessageType CDUDisplayCLS;
        static const CDUMessageType CDUDisplayPutString;
        static const CDUMessageType CDUStatus;
        static const CDUMessageType CDUKeyboard;
        static const CDUMessageType CDUSet;
        static const CDUMessageType CDUGet;

        inline std::string getPrefix() const {
            return mPrefix;
        }

        inline CDUMessageSubType getMesageSubType() const {
            return mSubType;
        }

        inline virtual int getTextRowIndex() const {
            return mTextRowIndex;
        }

        inline JustifyStyle getJustifyStyle() const {
            return mJustifyStyle;
        }

        static std::vector<CDUMessageType>& getValues() {
            static std::vector<CDUMessageType> gValues;
            if (gValues.empty()) {
                gValues.push_back(CDUAlive);
                gValues.push_back(CDUDisplayDataStatusBlock);
                gValues.push_back(CDUDisplayTitle);
                gValues.push_back(CDUDisplayPageNumber);
                gValues.push_back(CDUDisplayScratchPad);
                gValues.push_back(CDUDisplayLS1Text);
                gValues.push_back(CDUDisplayLS2Text);
                gValues.push_back(CDUDisplayLS3Text);
                gValues.push_back(CDUDisplayLS4Text);
                gValues.push_back(CDUDisplayLS5Text);
                gValues.push_back(CDUDisplayLS6Text);
                gValues.push_back(CDUDisplayLS1SText);
                gValues.push_back(CDUDisplayLS2SText);
                gValues.push_back(CDUDisplayLS3SText);
                gValues.push_back(CDUDisplayLS4SText);
                gValues.push_back(CDUDisplayLS5SText);
                gValues.push_back(CDUDisplayLS6SText);
                gValues.push_back(CDUDisplayRS1Text);
                gValues.push_back(CDUDisplayRS2Text);
                gValues.push_back(CDUDisplayRS3Text);
                gValues.push_back(CDUDisplayRS4Text);
                gValues.push_back(CDUDisplayRS5Text);
                gValues.push_back(CDUDisplayRS6Text);
                gValues.push_back(CDUDisplayRS1SText);
                gValues.push_back(CDUDisplayRS2SText);
                gValues.push_back(CDUDisplayRS3SText);
                gValues.push_back(CDUDisplayRS4SText);
                gValues.push_back(CDUDisplayRS5SText);
                gValues.push_back(CDUDisplayRS6SText);
                gValues.push_back(CDUDisplayCLS);
                gValues.push_back(CDUDisplayPutString);
                gValues.push_back(CDUStatus);
                gValues.push_back(CDUKeyboard);
                gValues.push_back(CDUSet);
                gValues.push_back(CDUGet);
            }
            return gValues;
        }
    private:
        CDUMessageType(const std::string& rPrefix,
            const CDUMessageSubType& rSubType,
            const JustifyStyle& rJustifyStyle,
            const int& rTextRowIndex)
            : mPrefix (rPrefix)
            , mSubType (rSubType)
            , mJustifyStyle(rJustifyStyle)
            , mTextRowIndex(rTextRowIndex)
        {}

        std::string mPrefix;
        CDUMessageSubType mSubType;
        JustifyStyle mJustifyStyle;
        int mTextRowIndex;
    };

    CDUMessageType getMessageType() const {
        return mMessageType;
    };

    virtual ~CDUMessage(){};
protected:
    /**
     * Alternative Simplified Constructor
     * @param aMessageType
     * @param aParams
     */
    CDUMessage(const CDUMessageType& rMessageType, const std::string& rParams)
        : NMEASentence (rMessageType.getPrefix(), rParams)
        , mMessageType (rMessageType)
    {};

    CDUMessageType mMessageType;
};

#endif // _CDUMessage_h_ 
```

以及对应的CPP

```
// SYSTEM INCLUDES
//#include <...>

// APPLICATION INCLUDES
#include "vcdu/CDUMessage.h"

// EXTERNAL FUNCTIONS
// EXTERNAL VARIABLES
// CONSTANTS
// STATIC VARIABLE INITIALIZATIONS
// this is the heartbeat message (not associated with any line => -1 for last paramter)
const CDUMessage::CDUMessageType CDUMessage::CDUMessageType::CDUAlive ("PCDUALIVE", CDUMessage::Alive, JustifyStyle::Left, -1);

// the following 3 messages are associated with the title line
const CDUMessage::CDUMessageType CDUMessage::CDUMessageType::CDUDisplayDataStatusBlock("PCDUDSB", CDUMessage::Display,  JustifyStyle::Left, 0);
const CDUMessage::CDUMessageType CDUMessage::CDUMessageType::CDUDisplayTitle("PCDUTIT", CDUMessage::Display, JustifyStyle::Center, 0);
const CDUMessage::CDUMessageType CDUMessage::CDUMessageType::CDUDisplayPageNumber("PCDUPGE", CDUMessage::Display, JustifyStyle::Right, 0);

// these messages are associated with the active display area
const CDUMessage::CDUMessageType CDUMessage::CDUMessageType::CDUDisplayScratchPad("PCDUSPD", CDUMessage::Display,  JustifyStyle::Left, 13);
const CDUMessage::CDUMessageType CDUMessage::CDUMessageType::CDUDisplayLS1Text("PCDUL1T", CDUMessage::Display,  JustifyStyle::Left, 2);
const CDUMessage::CDUMessageType CDUMessage::CDUMessageType::CDUDisplayLS2Text("PCDUL2T", CDUMessage::Display,  JustifyStyle::Left, 4);
const CDUMessage::CDUMessageType CDUMessage::CDUMessageType::CDUDisplayLS3Text("PCDUL3T", CDUMessage::Display,  JustifyStyle::Left, 6);
const CDUMessage::CDUMessageType CDUMessage::CDUMessageType::CDUDisplayLS4Text("PCDUL4T", CDUMessage::Display,  JustifyStyle::Left, 8);
const CDUMessage::CDUMessageType CDUMessage::CDUMessageType::CDUDisplayLS5Text("PCDUL5T", CDUMessage::Display,  JustifyStyle::Left, 10);
const CDUMessage::CDUMessageType CDUMessage::CDUMessageType::CDUDisplayLS6Text("PCDUL6T", CDUMessage::Display,  JustifyStyle::Left, 12);
const CDUMessage::CDUMessageType CDUMessage::CDUMessageType::CDUDisplayLS1SText("PCDUL1S", CDUMessage::Display,  JustifyStyle::Left, 1);
const CDUMessage::CDUMessageType CDUMessage::CDUMessageType::CDUDisplayLS2SText("PCDUL2S", CDUMessage::Display,  JustifyStyle::Left, 3);
const CDUMessage::CDUMessageType CDUMessage::CDUMessageType::CDUDisplayLS3SText("PCDUL3S", CDUMessage::Display,  JustifyStyle::Left, 5);
const CDUMessage::CDUMessageType CDUMessage::CDUMessageType::CDUDisplayLS4SText("PCDUL4S", CDUMessage::Display,  JustifyStyle::Left, 7);
const CDUMessage::CDUMessageType CDUMessage::CDUMessageType::CDUDisplayLS5SText("PCDUL5S", CDUMessage::Display,  JustifyStyle::Left, 9);
const CDUMessage::CDUMessageType CDUMessage::CDUMessageType::CDUDisplayLS6SText("PCDUL6S", CDUMessage::Display,  JustifyStyle::Left, 11);
const CDUMessage::CDUMessageType CDUMessage::CDUMessageType::CDUDisplayRS1Text("PCDUR1T", CDUMessage::Display, JustifyStyle::Right, 2);
const CDUMessage::CDUMessageType CDUMessage::CDUMessageType::CDUDisplayRS2Text("PCDUR2T", CDUMessage::Display, JustifyStyle::Right, 4);
const CDUMessage::CDUMessageType CDUMessage::CDUMessageType::CDUDisplayRS3Text("PCDUR3T", CDUMessage::Display, JustifyStyle::Right, 6);
const CDUMessage::CDUMessageType CDUMessage::CDUMessageType::CDUDisplayRS4Text("PCDUR4T", CDUMessage::Display, JustifyStyle::Right, 8);
const CDUMessage::CDUMessageType CDUMessage::CDUMessageType::CDUDisplayRS5Text("PCDUR5T", CDUMessage::Display, JustifyStyle::Right, 10);
const CDUMessage::CDUMessageType CDUMessage::CDUMessageType::CDUDisplayRS6Text("PCDUR6T", CDUMessage::Display, JustifyStyle::Right, 12);
const CDUMessage::CDUMessageType CDUMessage::CDUMessageType::CDUDisplayRS1SText("PCDUR1S", CDUMessage::Display, JustifyStyle::Right, 1);
const CDUMessage::CDUMessageType CDUMessage::CDUMessageType::CDUDisplayRS2SText("PCDUR2S", CDUMessage::Display, JustifyStyle::Right, 3);
const CDUMessage::CDUMessageType CDUMessage::CDUMessageType::CDUDisplayRS3SText("PCDUR3S", CDUMessage::Display, JustifyStyle::Right, 5);
const CDUMessage::CDUMessageType CDUMessage::CDUMessageType::CDUDisplayRS4SText("PCDUR4S", CDUMessage::Display, JustifyStyle::Right, 7);
const CDUMessage::CDUMessageType CDUMessage::CDUMessageType::CDUDisplayRS5SText("PCDUR5S", CDUMessage::Display, JustifyStyle::Right, 9);
const CDUMessage::CDUMessageType CDUMessage::CDUMessageType::CDUDisplayRS6SText("PCDUR6S", CDUMessage::Display, JustifyStyle::Right, 11);

// these messages are not associated with a paricular line# which is why we specify -1 for the last parameter
const CDUMessage::CDUMessageType CDUMessage::CDUMessageType::CDUDisplayCLS("PCDUCLS", CDUMessage::Display,  JustifyStyle::Left, -1);
const CDUMessage::CDUMessageType CDUMessage::CDUMessageType::CDUDisplayPutString("PCDUPUTS", CDUMessage::XYDisplay,  JustifyStyle::None, -1);
const CDUMessage::CDUMessageType CDUMessage::CDUMessageType::CDUStatus("PCDUSID", CDUMessage::Status,  JustifyStyle::Left, -1);
const CDUMessage::CDUMessageType CDUMessage::CDUMessageType::CDUKeyboard("PCDUKEY", CDUMessage::Keyboard,  JustifyStyle::Left, -1);
const CDUMessage::CDUMessageType CDUMessage::CDUMessageType::CDUSet("PCDUSETV", CDUMessage::Configuration,  JustifyStyle::Left, -1);
const CDUMessage::CDUMessageType CDUMessage::CDUMessageType::CDUGet("PCDUGETV", CDUMessage::Configuration, JustifyStyle::Left, -1); 
```

并且只是为了展示 Enums 在这里如何使用的一般模式，我们还有一些其他的 Enum C++ 类，我需要在整个应用程序中使用它们。它们看起来都非常相似，我不禁觉得必须有一种更简单、更简洁的方法来实现它。任何帮助或想法都会受到欢迎。

```
class JustifyStyle {
public:
    static const JustifyStyle Left, Center, Right, None;
    inline std::string getName() const {
        return mName;
    }
private:
    JustifyStyle(const std::string& rName) 
        : mName(rName)
    {}
    std::string mName;
};

class FontSize {
public:
    static const FontSize F1, F2, F3, F4, F5, F6;
    inline std::string getName() const {
        return mName;
    }
    static std::vector<FontSize>& getValues() {
        static std::vector<FontSize> gValues;
        if (gValues.empty()) {
            gValues.push_back(F1);
            gValues.push_back(F2);
            gValues.push_back(F3);
            gValues.push_back(F4);
            gValues.push_back(F5);
            gValues.push_back(F6);
        }
        return gValues;
    }
private:
    FontSize(const std::string& rName) 
        : mName(rName)
    {}
    std::string mName;
};

class FontStyle {
public:
    static const FontStyle S, B, I, U, N;
    inline std::string getName() const {
        return mName;
    }
    static std::vector<FontStyle>& getValues() {
        static std::vector<FontStyle> gValues;
        if (gValues.empty()) {
            gValues.push_back(S);
            gValues.push_back(B);
            gValues.push_back(I);
            gValues.push_back(U);
            gValues.push_back(N);
        }
        return gValues;
    }
    inline bool operator<(const FontStyle& rhs) const {
        return mName < rhs.mName;
    }
private:
    FontStyle(const std::string& rName) 
        : mName(rName)
    {}
    std::string mName;
};

class FontColor {
public:
    static const FontColor BLACK, CYAN, RED, YELLOW, GREEN, MAGENTA, AMBER, WHITE;
    inline int getValue() const {
        return mValue;
    }
    inline std::string getValueStr() const {
        return UtlStringUtils::integerToString(mValue);
    }
    static std::vector<FontColor>& getValues() {
        static std::vector<FontColor> gValues;
        if (gValues.empty()) {
            gValues.push_back(BLACK);
            gValues.push_back(CYAN);
            gValues.push_back(RED);
            gValues.push_back(YELLOW);
            gValues.push_back(GREEN);
            gValues.push_back(MAGENTA);
            gValues.push_back(AMBER);
            gValues.push_back(WHITE);
        }
        return gValues;
    }
private:
    // constructor
    FontColor(const int& rValue) 
        : mValue(rValue)
    {}
    int mValue;
};

class CDUFontChar {
public:
    // constructor
    CDUFontChar (
        const char cduChar = '\0',
        const FontSize& rSize = FontSize::F3,
        const std::set<FontStyle>& rStyles = std::set<FontStyle>(),
        const FontColor& rColor = FontColor::WHITE) 
        : mCDUChar (cduChar)
        , mSize (rSize)
        , mFontStyles(rStyles)
        , mColor(rColor)
    {}

    inline char getCDUChar() const {
        return mCDUChar;
    }

    inline FontSize getSize() const {
        return mSize;
    }

    inline std::set<FontStyle> getStyles() const {
        return mFontStyles;
    }

    inline FontColor getColor() const {
        return mColor;
    }
private:
    char mCDUChar;
    FontSize mSize;
    std::set<FontStyle> mFontStyles;
    FontColor mColor;
}; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T19:13:25.637

基本上，Java`enum`是一种语言特性，旨在跨越常量的良好实践与单例的不良实践或反模式之间的桥梁。C++`enum`变成了无聊的整数常量，而 Java 把它们变成了完全面向对象的单例，但希望开发人员能牢记它们的`const`根。所以是的，你是完全正确的——移植的方法是使用 C++ 全局常量。严格来说，Java 枚举不必是常量，例如它们可以有非最终字段，但我会（并认为“这是”）认为这是不好的做法，所以同样，C++ 枚举中的所有方法都应该是语义上的`const`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-15T16:09:03.743

自从我提出堆栈溢出问题以来，我有机会改进我一直用来模拟 Java 的方法，例如 C++ 中的枚举。下面显示的代码（在头文件和实现 cpp 文件中）以及显示如何在 switch 语句中使用枚举的代码片段是我最终在整个代码中使用的。微妙之处在于使用积分转换运算符（在本例中是通过使用如下使用的 Value 自定义运算符。

```
// integral operator cast for switch statements (cast to named enum)
inline operator const Value() const {
    return mValue;
} 
```

在头文件**CDUEnumConstants.h 中**：

```
#ifndef _cduEnumConstants_h_
#define _cduEnumConstants_h_

// SYSTEM INCLUDES
#include <set>
#include <map>
#include <vector>
#include <string>
#include <algorithm>
#include <iostream>

// APPLICATION INCLUDES
#include "util/UtlExceptions.h"
#include "util/UtlStringUtils.h"

// DEFINES
// MACROS
// EXTERNAL FUNCTIONS
// EXTERNAL VARIABLES
// CONSTANTS
// STRUCTS
// TYPEDEFS
class Annunciator {
public:
    enum Value {
        // these are all undefined in the discrete sense
        undefined=-1, power=-2, fail=-3,
        // these are discrete bits
        exec=(1<<6), dspy=(1<<7), msg=(1<<8), ofst=(1<<9)
    };
    static const Annunciator AnnunciatorUNDEFINED;
    static const Annunciator AnnunciatorPOWER;
    static const Annunciator AnnunciatorFAIL;
    static const Annunciator AnnunciatorEXEC;
    static const Annunciator AnnunciatorDSPY;
    static const Annunciator AnnunciatorMSG;
    static const Annunciator AnnunciatorOFST;
    // used to store in a set
    inline bool operator<(const Annunciator& rhs) const {
        return mValue < rhs.mValue;
    }
    // used for comparisons
    inline bool operator==(const Annunciator& rhs) const {
        return mValue == rhs.mValue;
    }
    inline bool supported() const {
        return mValue > 0;
    }
    // integral operator cast for switch statements (cast to named enum)
    inline operator const Value() const {
        return mValue;
    }

    inline std::string getStringVal() const {
        return mStringVal;
    }

    static const std::set<Annunciator>& getValues() {
        static std::set<Annunciator> gValues;
        if (gValues.empty()) {
            gValues.insert(AnnunciatorUNDEFINED);
            gValues.insert(AnnunciatorPOWER);
            gValues.insert(AnnunciatorFAIL);
            gValues.insert(AnnunciatorEXEC);
            gValues.insert(AnnunciatorDSPY);
            gValues.insert(AnnunciatorMSG);
            gValues.insert(AnnunciatorOFST);
        }
        return gValues;
    }
    static Annunciator valueOf(const std::string& rStringVal) {
        for (const auto& next : getValues()) {
            if (next.getStringVal() == rStringVal) {
                return next;
            }
        }
        throw new UtlIllegalArgumentException(
            "Illegal Argument: " + rStringVal);
    }
private:
    Annunciator(const Value& rValue, const std::string& rStringVal)
        : mValue(rValue)
        , mStringVal(rStringVal)
    {}
    Value mValue;
    std::string mStringVal;
};

// FORWARD DECLARATIONS

// Extendable in the future
class CDUVariable {
public:
    enum Value {
        baud, firmware, type, serial
    };
    static const CDUVariable Baud, Firmware, Type, Serial;
    // used to store in a set
    inline bool operator<(const CDUVariable& rhs) const {
        return mValue < rhs.mValue;
    }
    // used for comparisons
    inline bool operator==(const CDUVariable& rhs) const {
        return mValue == rhs.mValue;
    }
    // integral operator cast for switch statements (cast to named enum)
    inline operator const Value() const {
        return mValue;
    }
    inline std::string getStringVal() const {
        return mStringVal;
    }
    static const std::set<CDUVariable>& getValues() {
        static std::set<CDUVariable> gValues;
        if (gValues.empty()) {
            gValues.insert(Baud);
            gValues.insert(Firmware);
            gValues.insert(Type);
            gValues.insert(Serial);
        }
        return gValues;
    }
    static CDUVariable valueOf(const std::string& rStringVal) {
        for (const auto& next : getValues()) {
            if (next.getStringVal() == rStringVal) {
                return next;
            }
        }
        throw new UtlIllegalArgumentException(
            "Illegal Argument: " + rStringVal);
    }
private:
    CDUVariable(const Value& rValue, const std::string& rStringVal)
        : mValue(rValue)
        , mStringVal(rStringVal)
    {}
    Value mValue;
    std::string mStringVal;
};

#endif // _cduEnumConstants_h_ 
```

并在初始化枚举的初始值的实现**CDUEnumConstants.cpp文件中。**

```
const Annunciator Annunciator::AnnunciatorUNDEFINED(Annunciator::undefined, "UNDEFINED");
const Annunciator Annunciator::AnnunciatorPOWER(Annunciator::power, "POWER");
const Annunciator Annunciator::AnnunciatorFAIL(Annunciator::fail, "FAIL");
const Annunciator Annunciator::AnnunciatorEXEC(Annunciator::exec, "EXEC");
const Annunciator Annunciator::AnnunciatorDSPY(Annunciator::dspy, "DSPY");
const Annunciator Annunciator::AnnunciatorMSG(Annunciator::msg, "MSG");
const Annunciator Annunciator::AnnunciatorOFST(Annunciator::ofst, "OFST");

const CDUVariable CDUVariable::Baud(CDUVariable::baud, "0");
const CDUVariable CDUVariable::Firmware(CDUVariable::firmware, "1");
const CDUVariable CDUVariable::Type(CDUVariable::type, "2");
const CDUVariable CDUVariable::Serial(CDUVariable::serial, "3"); 
```

现在要在用户代码的 switch 语句中使用**CDUVariable**枚举（忽略其他方法细节），请使用以下内容。

```
std::unique_ptr<EngravityMessage>
VCDUManager::getConfigValue(
    const CDU_ID& rCduID,
    const std::unique_ptr<EngravityMessage>& rVarNameMessage)
{
    EngravityConfigMessage* pVariableName =
        static_cast<EngravityConfigMessage*>(rVarNameMessage.get());
    gpLogManager->add(FAC_PROCESS, PRI_NOTICE,
        "CDU_%d: getConfigValue\n", rCduID);
    CDUVariable variable = pVariableName->getCDUVariable();
    std::unique_ptr<EngravityMessage> variableValue;
    switch (variable) {
    case CDUVariable::baud:
        variableValue = std::unique_ptr<EngravityMessage>(
            new EngravityConfigMessage (
                EngravityMessageType::SetV, variable, "38400"));
        break;
    case CDUVariable::firmware:
        variableValue = std::unique_ptr<EngravityMessage>(
            new EngravityConfigMessage (
                EngravityMessageType::SetV, variable, "1.04"));
        break;
    case CDUVariable::type:
        variableValue = std::unique_ptr<EngravityMessage>(
            new EngravityConfigMessage (
                EngravityMessageType::SetV, variable, "737-NG"));
        break;
    case CDUVariable::serial:
        variableValue = std::unique_ptr<EngravityMessage>(
            new EngravityConfigMessage (
                EngravityMessageType::SetV, variable, "0074"));
        break;
    default:
        break;
    }
    return variableValue;
} 
```

我提供了 2 个 Enum 示例，原因有两个，首先我想展示如何从字符串中查找 Enum 值——它被优化为使用排序集，其次，这里的模式似乎暗示了模板编程——但我没有机会将它实现为模板 - 实际上我不确定它是否可以。

# c# - wcf webservice计时方法？

> ID：12269722
> 
> 赞同：1
> 
> 时间：2012-09-04T18:58:21.363
> 
> 标签：c#, asp.net, wcf, service, profile

我最近发现这篇文章： [http ://coderjournal.com/2010/10/timing-the-execution-time-of-your-mvc-actions/](http://coderjournal.com/2010/10/timing-the-execution-time-of-your-mvc-actions/)

它显示了一个不错的小属性，您可以将其添加到您的`Controller`类中，它会创建一个秒表并将`X-Runtime`标题添加到结果中。

我一直在尝试添加类似于我的 WCF Rest 服务的东西，但到目前为止还无法弄清楚。关于如何在我的网络服务上实现类似的东西有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T20:24:05.890

这是一个完美的[地方](http://en.wikipedia.org/wiki/Aspect-oriented_programming)。签出[后锋利](http://www.sharpcrafters.com/)。

然后，您可以创建一个类似的方面：

```
/// <summary>
/// Adds execution timing and automatic logging to the tagged method
/// </summary>
[Serializable]
public class MethodTimeAttribute : OnMethodBoundaryAspect
{
    private String MethodName { get; set; }
    private DateTime StartTime { get; set; }

    /// <summary>
    /// Method executed at build time. Initializes the aspect instance. After the execution
    /// of <see cref="CompileTimeInitialize"/>, the aspect is serialized as a managed 
    /// resource inside the transformed assembly, and deserialized at runtime.
    /// </summary>
    /// <param name="method">Method to which the current aspect instance 
    /// has been applied.</param>
    /// <param name="aspectInfo">Unused.</param>
    public override void CompileTimeInitialize(MethodBase method, AspectInfo aspectInfo)
    {
        MethodName = method.DeclaringType.FullName  "."  method.Name;
    }

    public override void OnEntry(MethodExecutionArgs args)
    {
        StartTime = DateTime.Now;
    }

    public override void OnExit(MethodExecutionArgs args)
    {
        Log.Debug(this, "Method {0} took {1} to execute", MethodName, DateTime.Now - StartTime);
    }
} 
```

你所要做的就是像这样标记你的方法：

```
[MethodTime]
private void RunFor(TimeSpan runTime){
    // do stuff 
} 
```

高级后期锐化功能需要许可证，但方法边界方面等简单功能是免费的。

虽然这不会测试您的 wcf 服务的任何网络边界，但它将测试您的服务实施时间。

如果您真的想要，您可以创建一些自定义行为并将其注入您的 WCF 链以测试时间，但在该阶段出现瓶颈的可能性非常小。更有可能的是您正在发送大量数据，因此速度很慢，或者您的实现速度很慢，所有这些都可以独立地在服务器端或客户端进行测试。

# c# - 检测简单的触摸手势

> ID：12269725
> 
> 赞同：21
> 
> 时间：2012-09-04T18:58:28.107
> 
> 标签：c#, vb.net, xaml, windows-8, windows-runtime

谁能解释如何在 WinRT 应用程序中检测简单的触摸手势？我尝试使用`GestureRecognizer`该类，但它没有用：

```
 public MainPage()
    {
        this.InitializeComponent();
        Windows.UI.Input.GestureRecognizer gr = new Windows.UI.Input.GestureRecognizer();
        gr.CrossSliding += gr_CrossSliding;
        gr.Dragging += gr_Dragging;
        gr.Holding += gr_Holding;
        gr.ManipulationCompleted += gr_ManipulationCompleted;
        gr.ManipulationInertiaStarting += gr_ManipulationInertiaStarting;
        gr.ManipulationStarted += gr_ManipulationStarted;
        gr.ManipulationUpdated += gr_ManipulationUpdated;
        gr.RightTapped += gr_RightTapped;
        gr.Tapped += gr_Tapped;
        gr.GestureSettings = Windows.UI.Input.GestureSettings.ManipulationRotate | Windows.UI.Input.GestureSettings.ManipulationTranslateX | Windows.UI.Input.GestureSettings.ManipulationTranslateY |
        Windows.UI.Input.GestureSettings.ManipulationScale | Windows.UI.Input.GestureSettings.ManipulationRotateInertia | Windows.UI.Input.GestureSettings.ManipulationScaleInertia |
        Windows.UI.Input.GestureSettings.ManipulationTranslateInertia | Windows.UI.Input.GestureSettings.Tap;

    }

    void gr_Tapped(Windows.UI.Input.GestureRecognizer sender, Windows.UI.Input.TappedEventArgs args)
    {
        Debug.WriteLine("gr_Tapped");
    }
    void gr_RightTapped(Windows.UI.Input.GestureRecognizer sender, Windows.UI.Input.RightTappedEventArgs args)
    {
        Debug.WriteLine("gr_RightTapped");
    }
    void gr_Holding(Windows.UI.Input.GestureRecognizer sender, Windows.UI.Input.HoldingEventArgs args)
    {
        Debug.WriteLine("gr_Holding");
    }
    void gr_Dragging(Windows.UI.Input.GestureRecognizer sender, Windows.UI.Input.DraggingEventArgs args)
    {
        Debug.WriteLine("gr_Dragging");
    }
    void gr_CrossSliding(Windows.UI.Input.GestureRecognizer sender, Windows.UI.Input.CrossSlidingEventArgs args)
    {
        Debug.WriteLine("gr_CrossSliding");
    }
    void gr_ManipulationUpdated(Windows.UI.Input.GestureRecognizer sender, Windows.UI.Input.ManipulationUpdatedEventArgs args)
    {
        Debug.WriteLine("gr_ManipulationUpdated");
    }
    void gr_ManipulationStarted(Windows.UI.Input.GestureRecognizer sender, Windows.UI.Input.ManipulationStartedEventArgs args)
    {
        Debug.WriteLine("gr_ManipulationStarted");
    }
    void gr_ManipulationCompleted(Windows.UI.Input.GestureRecognizer sender, Windows.UI.Input.ManipulationCompletedEventArgs args)
    {
        Debug.WriteLine("gr_ManipulationCompleted");
    }
    void gr_ManipulationInertiaStarting(Windows.UI.Input.GestureRecognizer sender, Windows.UI.Input.ManipulationInertiaStartingEventArgs args)
    {
        Debug.WriteLine("gr_ManipulationInertiaStarting");
    } 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-09-08T20:18:20.603

如果您会注意到 MainPage 类有自己的操作事件，您可以在不创建单独的`GestureRecognizer`. 您可以通过设置`this.ManipulationMode`来 启用它`ManipulationModes.All`。这将允许您查看 MainPages `Tapped`、`RightTapped`、`ManipulationStarting`、`ManipulationStarted`和Events`ManipulationDelta`上的响应。`ManipulationCompleted`

至于让 GestureRecongnizer 根据此[博客](http://through-the-interface.typepad.com/through_the_interface/winrt/)和此[MSDN 论坛发帖](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/0dad4881-da1c-4db9-be8d-a9324a233662)工作，您将需要处理 MainPage和类似`PointerMoved`的事件。`PointerReleased``PointerPressed`

```
Windows.UI.Input.GestureRecognizer gr = new Windows.UI.Input.GestureRecognizer();  

public MainPage()
{
    this.InitializeComponent();
    this.PointerPressed += MainPage_PointerPressed;
    this.PointerMoved += MainPage_PointerMoved;
    this.PointerReleased += MainPage_PointerReleased;
    gr.CrossSliding += gr_CrossSliding;    
    gr.Dragging += gr_Dragging;    
    gr.Holding += gr_Holding;    
    gr.ManipulationCompleted += gr_ManipulationCompleted;    
    gr.ManipulationInertiaStarting += gr_ManipulationInertiaStarting;    
    gr.ManipulationStarted += gr_ManipulationStarted;    
    gr.ManipulationUpdated += gr_ManipulationUpdated;    
    gr.RightTapped += gr_RightTapped;    
    gr.Tapped += gr_Tapped;    
    gr.GestureSettings = Windows.UI.Input.GestureSettings.ManipulationRotate | Windows.UI.Input.GestureSettings.ManipulationTranslateX | Windows.UI.Input.GestureSettings.ManipulationTranslateY |    
    Windows.UI.Input.GestureSettings.ManipulationScale | Windows.UI.Input.GestureSettings.ManipulationRotateInertia | Windows.UI.Input.GestureSettings.ManipulationScaleInertia |    
    Windows.UI.Input.GestureSettings.ManipulationTranslateInertia | Windows.UI.Input.GestureSettings.Tap; 
}

void MainPage_PointerReleased(object sender, PointerRoutedEventArgs e)
{
    var ps = e.GetIntermediatePoints(null);
    if (ps != null && ps.Count > 0)
    {
        gr.ProcessUpEvent(ps[0]);
        e.Handled = true;
        gr.CompleteGesture();
    }
}

void MainPage_PointerMoved(object sender, PointerRoutedEventArgs e)
{
    gr.ProcessMoveEvents(e.GetIntermediatePoints(null));
    e.Handled = true;
}

void MainPage_PointerPressed(object sender, PointerRoutedEventArgs e)
{
    var ps = e.GetIntermediatePoints(null);
    if (ps != null && ps.Count > 0)
    {
        gr.ProcessDownEvent(ps[0]);
        e.Handled = true;
    }
} 
```

* * *

根据[文档](http://msdn.microsoft.com/en-us/library/windows/apps/hh465299.aspx)，您需要通过将[CrossSlide](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.input.gesturerecognizer.crosssliding.aspx)事件添加到您的 GestureRecongnizer 并设置[CrossSlideThresholds](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.input.crossslidethresholds.aspx)和 Direction 来启用它。从最后一个链接：

> 必须在 GestureSettings 属性中设置 CrossSlide 才能支持 CrossSliding。CrossSliding 距离阈值默认禁用。使用 CrossSlideThresholds 设置这些值。

例子：

```
Windows.UI.Input.CrossSlideThresholds cst = new Windows.UI.Input.CrossSlideThresholds();
cst.SelectionStart = 2;
cst.SpeedBumpStart = 3;
cst.SpeedBumpEnd = 4;
cst.RearrangeStart = 5;
gr.CrossSlideHorizontally = true;
gr.CrossSlideThresholds = cst;
gr.CrossSliding += gr_CrossSliding; 
```

并确保将其添加到您的`GestureSettings`

```
gr.GestureSettings = Windows.UI.Input.GestureSettings.ManipulationRotate | Windows.UI.Input.GestureSettings.ManipulationTranslateX |
                     Windows.UI.Input.GestureSettings.ManipulationScale | Windows.UI.Input.GestureSettings.ManipulationRotateInertia |
                     Windows.UI.Input.GestureSettings.ManipulationScaleInertia | Windows.UI.Input.GestureSettings.ManipulationTranslateInertia |
                     Windows.UI.Input.GestureSettings.Tap | Windows.UI.Input.GestureSettings.CrossSlide; 
```

# sql - 知道数量的多个插入

> ID：12269730
> 
> 赞同：0
> 
> 时间：2012-09-04T18:59:02.510
> 
> 标签：sql, sql-server, sql-server-2008, identity-column

假设我有一张桌子，上面有这样的产品

```
product  |  number
----------------------
aaaa     |     2
bbbb     |     3
cccc     |     1
dddd     |     4 
```

它有点复杂，但想法是一样的。

我需要返回这样的东西

```
aaaa0001
aaaa0002
bbbb0003
bbbb0004
bbbb0005
cccc0006
dddd0007
dddd0008
dddd0009
dddd0010 
```

我的意思是，每个产品列中指定的次数，最后带有某种标识符。

我怎样才能做到这一点 ？

我想到了表变量，ID上有标识

```
DECLARE @Codigos TABLE (ID INT IDENTITY(1,1), Barra Varchar(50) NOT NULL) 
```

在插入之后，做

```
select rtrim(ltrim(barra)) + right('0000' + rtrim(ltrim(cast(id as varchar(10)))),4) from @Codigos 
```

但这意味着我必须在 product 变量中为每个产品插入次数，例如

```
@Codigos
id     |   Barra
----------------
1      |   aaaa
2      |   aaaa 
```

我面临着这方面的问题。我怎样才能做到这一点 ？用光标？这就是我的想法，但我想知道是否有更好的选择。

原始表中的最大值为 300 行。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T19:09:57.193

这应该这样做：

```
;WITH CTE AS
(
    SELECT product, Number, 1 RN
    FROM YourTable
    UNION ALL
    SELECT product, Number, RN + 1
    FROM CTE
    WHERE RN + 1 <= Number
)
SELECT product + RIGHT('000' + CAST(RN AS VARCHAR(3)),3) YourColumn
FROM CTE
ORDER BY product, Number
OPTION(MAXRECURSION 0) 
```

[这是一个 sqlfiddle](http://sqlfiddle.com/#!3/d7de9/1)供您尝试。

# java - IntelliJ IDEA 中的“模块依赖”和“库”有什么区别？

> ID：12269733
> 
> 赞同：38
> 
> 时间：2012-09-04T18:59:15.353
> 
> 标签：java, jar, module, intellij-idea, dependencies

当您想向项目添加库时，IntelliJ IDEA 中的“模块依赖项”和“库”有什么区别`.jar`？另外，当您将`.jar`库添加到 IntelliJ IDEA 中的“模块依赖项”时，“导出”复选框是什么？

在这些方式中，包含`.jar`库中的类和代码在创建新生成的文件时如何集成到您的最终项目（代码）中`.jar`？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-04T21:02:07.247

模块依赖项是模块文件引用的类、档案、库和资源。库是存储在档案或目录中的一组类文件。

导出检查意味着如果选中，那么这个库将被隐式添加到引用这个库的另一个模块中。

要创建*.jar*文件，您需要创建一个工件。Artifact 是建筑输出的占位符。有用于创建*.jar*、*.war*、*.ear*档案的预定义模板。您可以选择 jar 来构建 jar 工件。默认情况下，它定义为空，您需要定义工件的内容。您可以将已编译的输出拖放到其中，但不要使用库存档。因为在这种情况下，库将被打包在*.jar*文件中，并且您将需要创建一个单独的类加载器来在应用程序启动之前加载它们。相反，您将工件类型更改为*Other*并将*.jar*和依赖库拖到*输出根目录中*. 这样库档案将与创建的*.jar*一起复制。您还需要创建一个 MANIFEST.MF 并在那里为依赖库指定*Class-Path 。*所有文件都将存储在您为构建工件指定的目录中。您可以使用*Build Artifact*菜单构建它。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-04T22:00:20.393

如果您的项目包含多个模块，“模块依赖关系”定义了这些模块之间的依赖关系，但库是模块使用的编译类（通常是 jar 文件，可选地包含它们的源代码和 javadocs）。

每个模块都可以有自己的库和工件（例如结果 jar 文件），并且可以依赖其他模块而没有循环依赖。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-04T19:07:59.867

**Module Dependencies**选项卡可以包含**Libraries**，**Export**意味着模块中的库也可用于依赖于该模块的另一个模块。

可以使用[Artifacts](http://www.jetbrains.com/idea/webhelp/configuring-artifacts.html)创建具有所有依赖项的最终 jar 。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-04-25T13:34:42.353

[“在 IntelliJ IDEA 中，可以在三个级别定义库：全局（适用于许多项目）、项目（适用于项目内的所有模块）和模块（适用于一个模块）。”](https://www.jetbrains.com/help/idea/library.html)

*   全局库通过 Project Structure\Platform Settings\Global Libraries 设置
*   项目库是通过 Project Structure\Project Settings\Libraries 设置的
*   模块库通过 Project Structure\Project Settings\Modules\Dependencies 设置

# jasper-reports - 在条件样式中使用变量

> ID：12269736
> 
> 赞同：7
> 
> 时间：2012-09-04T18:59:27.717
> 
> 标签：jasper-reports, ireport

我有一个包含计算*变量的**文本字段的**标题*带。*文本字段*的**评估**时间设置为报告**，**与*变量***resetType**相同。现在我正在尝试使用*条件样式*设置此字段的背景颜色，但我不断收到一条错误消息，内容如下： **`$V{avg_perc}`**

 *********```
Invalid expression: !Double.isNaN($V{avg_perc}) && $V{avg_perc} >= 0.8 
```

我在*列页脚中使用相同的**条件样式*执行完全相同的操作，并且即使我将此字段的**评估时间也设置为****报告**，它也可以正常工作。

 *****删除后`!Double.isNaN($V{avg_perc})`我不再收到错误，但表达式仍然不起作用。当没有任何条件有效时，我的字段保持红色，这是基本颜色，无论哪个值`$V{avg_perc}`都有。不过，它仍然可以在*Column Footer*中使用。这是我的风格：

```
<style name="avg_color" mode="Opaque" backcolor="#FF0000" pdfFontName="Helvetica-Bold">
    <conditionalStyle>
        <conditionExpression><![CDATA[$V{avg_perc} >= 0.8]]></conditionExpression>
        <style backcolor="#008000"/>
    </conditionalStyle>
    <conditionalStyle>
        <conditionExpression><![CDATA[$V{avg_perc} >= 0.6 && $V{avg_perc} < 0.8]]></conditionExpression>
        <style backcolor="#FFCC00"/>
    </conditionalStyle>
</style> 
```

为此使用的字段和变量：

```
<field name="perc" class="java.lang.Double"/>
<variable name="avg_perc" class="java.lang.Double" calculation="Average">
    <variableExpression><![CDATA[$F{perc}]]></variableExpression>
</variable> 
```

知道如何让这个东西工作吗？我在 3.7.4 版中使用*JasperReports*和*iReport*。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-05T12:50:45.770

我终于找到了解决我的问题的方法。添加

```
<property name="net.sf.jasperreports.style.evaluation.time.enabled" value="true"/> 
```

在报告级别会导致在评估元素时执行*条件样式。*有关更多信息，请参阅Jaspersoft 社区中的[此答案](https://community.jaspersoft.com/questions/526599/solved-conditional-style-evaluation-time#node-571861)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-06T22:00:21.597

在您看来 ireport 设计师。

单击该字段并在属性面板中。：标记=选定样式

右键单击字段。编辑表达式：

```
($F{fila1}.equals("c") ? "<style forecolor='red'>"+ $F{fila1}+"</style>" : $F{fila1}) 
```

或 xml

```
<textFieldExpression><![CDATA[($F{fila1}.equals("c") ? "<style forecolor='red'>"+ $F{fila1}+"</style>" : $F{fila1})]]></textFieldExpression> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-21T13:23:03.270

根据您的要求修改此代码

```
<style name="alternateStyle" fontName="Arial">
    <conditionalStyle>
        <conditionExpression><![CDATA[new Boolean($V{AMOUNT}.intValue() == 0)]]></conditionExpression>
        <style mode="Opaque" backcolor="#FF0000" isBold="true"/>
    </conditionalStyle>
</style> 
```

并参考这个链接：[链接](https://stackoverflow.com/questions/21359707/set-background-color-in-textfield-from-condition-using-ireport/44677150#44677150)**************

# mysql - 按 * 排序其中 *

> ID：12269737
> 
> 赞同：4
> 
> 时间：2012-09-04T18:59:32.960
> 
> 标签：mysql

对不起，我的英语不是最好的。

是否可以在“order by”中做一个“where”。

例子 ：

```
ORDER BY 
SUM(points), 
SUM(points) WHERE type = 1, 
SUM(goal), 
SUM(goal) WHERE type = 1 
```

所以首先我们按点排序。

如果有人有相同数量的`SUM(points)`，那么我们按 排序`SUM(points) where type = 1`。

如果任何人有相同数量的`SUM(points)`和相同数量的`SUM(points) where type = 1`，那么我们排序后`SUM(goal)`。

如果任何人在所有 3 中都有相同的，那么它必须按`SUM(goal) where type = 1`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T19:00:58.107

```
SUM(CASE WHEN type=1 THEN points ELSE 0 END) 
```

等等

如果您首先想要“最佳”，您当然应该添加`DESC`所有订单条件；）

和[sqlFiddle](http://sqlfiddle.com/#!2/1957f/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T19:02:30.510

```
ORDER BY
  SUM(points),
  SUM(CASE WHEN type = 1 THEN points ELSE 0 END),
  SUM(goal),
  SUM(CASE WHEN type = 1 THEN goal ELSE 0 END) 
```

# html - IE8 div 在悬停时可见，但在嵌入式选择具有焦点时消失

> ID：12269752
> 
> 赞同：5
> 
> 时间：2012-09-04T19:01:02.387
> 
> 标签：html, css, internet-explorer-8

我有一个`<div>`标签，当用户将鼠标悬停在它上面时，它会显示一个包含在嵌套`<div>`标签中的隐藏表单。问题是，当用户`<select>`在表单中使用标签时，更改的焦点（？）会导致浏览器失去在包含`<div>`标签上的悬停。除了我们的好朋友 IE 之外，在每个浏览器中都不是问题，它将嵌套`<div>`标签恢复到隐藏状态。

这是 JsFiddle：http: [//jsfiddle.net/3qVv7/3/](http://jsfiddle.net/3qVv7/3/)

HTML：

```
<div id="button_box"><h2>Hover This</h2>
    <div id="form_box">
        <form action="#" method="post">
            <select id="select_option" onChange="Javascript:doSomething();">
                <option value="a">Value A</option>
                <option value="a">Value B</option>
                <option value="a">Value C</option>
                <option value="a">Value D</option>
                <option value="a">Value E</option>
            </select>
        </form>               
    </div>
</div> 
```

CSS：

```
#button_box {
     display:block; 
     width: 150px; 
     height: 75px; 
     position:relative; 
     background: #ddd;
}

#button_box h2 {
     text-align: center
}

#button_box #form_box {
     display: none; 
     position:relative; 
     top: 51px; 
     width: 150px; 
     background: #ccc
}

#button_box:hover #form_box {
     display:block
}

#form_box select { 
     background: #bbb 
}​ 
```

关于如何让选择嵌套在隐藏的 div 中以不终止悬停状态的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-15T15:47:36.510

您的定位是将表单框从按钮框中取出。使用`margin-top`,`padding-top`其他一些间距方法，而不是`positioning`and `top`。此外，固定高度`#button_box`也有问题。

本质上，确保您想要出现的内容仍然包含在具有悬停样式的元素中。您可以将悬停放在包含所有内容的包装 div 上，使用边距而不是固定高度和定位，以及只要所有内容都在视觉上包含在内的其他选项将有所帮助。

这是一支笔用作示例：

[http://codepen.io/anon/pen/cbwEq](http://codepen.io/anon/pen/cbwEq)

# c# - 如何跨多个相似按钮处理按钮“向上”事件。

> ID：12269754
> 
> 赞同：0
> 
> 时间：2012-09-04T19:01:07.660
> 
> 标签：c#, .net, wpf, winrt-xaml

我有多个按钮，它们使用带有命令参数的单个命令来作用于所有类型的交互（单击、按键、触摸）中的“向下”事件。事实证明这对我的应用程序来说还不够，我还必须知道按钮何时被释放。我如何为这些按钮“向上”事件做类似的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T19:08:23.437

查看 OnIsPressedChanged() 方法。您可能必须从 Button 派生一个类才能处理它。

此外，您可以处理 MouseLeftButtonUp 事件，但仅当单击鼠标按下按钮时才会触发。如果要捕获键盘，则必须处理 KeyUp 事件并确定是否由于该键（空格、某些情况下的 Enter、快捷键等）而单击了按钮

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T19:14:06.697

不幸的是，UP 事件没有特殊的命令。但是您可以使用[EventToCommand](http://adammills.wordpress.com/2011/02/14/eventtocommand-action-mvvm-glue/)行为

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T20:08:50.677

我发现需要听一系列事件：

PointerReleased、PointerCanceled、PointerCaptureLost 都应该在触摸环境中监听“up”事件。

# apache - htaccess 可以读取 Apache 中设置的服务器环境变量吗？

> ID：12269755
> 
> 赞同：16
> 
> 时间：2012-09-04T19:01:12.117
> 
> 标签：apache, .htaccess, webserver

当您在 Apache 设置中设置服务器环境变量时，可以使用内置函数从 PHP 读取该变量。

但是你能从 htaccess 文件中读取变量吗？

我试图在我的 htaccess 中完成的事情是：

```
<If var=="stuff">
do things here
</if>

<if var=="different stuff">
do different things here
</if> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-04T19:11:31.973

是的。

您可能想要使用 mod_setenvif 功能，因此需要打开该模块。

然后，您只需执行以下操作：

```
SetEnvIf Request_URI "\.gif$" image_type=gif 
```

如果请求`image_type`的`gif`文件名以`.gif`.

然后你可以像这样访问它（比如在 RewriteCond 中）：

```
RewriteCond %{ENV:image_type} gif
RewriteRule ^(.*) $.gif 
```

你可以在这里阅读完整的文档： [http ://httpd.apache.org/docs/2.2/env.html](http://httpd.apache.org/docs/2.2/env.html)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-08-02T11:17:01.683

由于我在设置类似的东西以识别我的家庭本地主机与我的工作设置不同时遇到了很多问题，这就是我最终要做的事情。

首先，该 `<IF ..>`指令无法识别 SetEnv。来自[http://httpd.apache.org/docs/current/env.html](http://httpd.apache.org/docs/current/env.html)：“SetEnv 指令在请求处理期间运行较晚，这意味着 SetEnvIf 和 RewriteCond 等指令将看不到使用它设置的变量。”

因此，如果可以，请尝试使用 SetEnvIf。我很懒，只是把它放在我的 httpd.conf 文件中。它检查它是否在 localhost 上运行 - 这显然是 - 然后设置变量：

```
SetEnvIf Server_Addr ^127\.0\.0\.1$ home_variable 
```

然后，在其他地方，在我的 htaccess 文件中，我有这个：

```
# IfVersion needs mod_version - you could do an ifmodule before all this i guess
# we use ifversion because If was introduced in apache 2.4
<IfVersion >= 2.4>
  # check if the home variable exists/isn't: empty, "0", "off", "false", or "no"
  <If "-T reqenv('home_variable')">
    ... do home-y stuff
  </If>

  <Else>
    ... do work-y stuff
  </Else>
</IfVersion>

# fallback
<IfVersion < 2.4>
  .. fallback?
</IfVersion> 
```

或者，您可以只为每个环境设置一个变量并为其指定一个特定值：

```
SetEnvIf Server_Addr ^127\.0\.0\.1$ check_location=home 
```

然后其余的将是相同的，除了第一个`<If ..>`语句：

```
<If "%{ENV:check_location} == 'home'">....</If> 
```

我已经在 2.4 的家庭环境和 2.2 的工作环境之间测试了这两个环境，两者都启用了 mod_version（因此不打扰 ifmod）。

（我也没有测试两个以上的环境，但 Apache 2.4 确实提供了一个`<ElseIf>`，所以这也是一个选项）。

多普迪做。

（有关 -T 运算符等的更多信息：[http](http://httpd.apache.org/docs/current/expr.html) ://httpd.apache.org/docs/current/expr.html ）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-12-02T00:57:35.513

Apache 2.4 引入了`<If>`, `<Else>`,`<ElseIf>`块以及新的表达式语法，用于在 .htaccess 文件等中进行更强大的编程控制。

这是未经测试但表面上有效：

```
<If "%{MY_VAR} == 'my result'">
    …
</If> 
```

来源：[https ://blogs.apache.org/httpd/entry/new_in_httpd_2_4](https://blogs.apache.org/httpd/entry/new_in_httpd_2_4)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-18T00:51:12.023

我在这里给出了描述和 .htaccess 和 PHP 示例：[Set an environment variable in .htaccess and retrieve it in PHP](https://stackoverflow.com/questions/17550223/set-an-environment-variable-in-htaccess-and-retrieve-it-in-php)

对于 .htaccess 中的一些示例，取自我修改 Perishable Press 5G Blacklist/Firewall [http://perishablepress.com/5g-blacklist-2013/](http://perishablepress.com/5g-blacklist-2013/)以使用环境变量报告：

```
SetEnv myServerName %{SERVER_NAME}

RewriteCond %{QUERY_STRING} (base64_encode|localhost|mosconfig|open_basedir) [NC,OR]
RewriteCond %{QUERY_STRING} (boot\.ini|echo.*kae|etc/passwd) [NC,OR]
RewriteCond %{QUERY_STRING} (GLOBALS|REQUEST)(=|\[|%) [NC]
RewriteRule .* - [E=badQueryString:%0--%1--%2,F,L]

SetEnvIfNoCase User-Agent ^$ noUserAgent
SetEnvIfNoCase User-Agent (binlar|casper|cmsworldmap|comodo|diavol|dotbot|feedfinder|flicky|ia_archiver|jakarta|kmccrew|nutch|planetwork|purebot|pycurl|skygrid|sucker|turnit|vikspider|zmeu) badUserAgent=$1

<limit GET POST PUT>
  Order Allow,Deny
  Allow from all
  Deny from env=badUserAgent
</limit> 
```

注意参数的使用。%0 给出完整的字符串，%1 给出第一个括号语句的匹配，%2 第二个。连字符是文字​​显示字符，在视觉上是分开的（不要认为有任何方法可以在其中放置空格）。

# javascript - 将javascript插入同一域的不同页面

> ID：12269759
> 
> 赞同：0
> 
> 时间：2012-09-04T19:01:31.260
> 
> 标签：javascript, jquery, html, css

您好我正在尝试从不同的页面将一些 javascript 插入到我服务器上的页面中。第一个页面将加载到 iframe 中。我想从托管 iFrame 的页面向该页面（在 iframe 中）插入一些 CSS 样式。有我可以用来执行此操作的 jQuery 脚本吗？

就像是。
page1->page2 iframe。样式的 page2 脚本-> iframe 中的 page1

```
 <body>
    <!--<div id="left_col"></div>-->
    <div id="middle_col">
        <!--header-->
        <div id="header">
            <p>iFrame Example</p>
        </div>      
                <div id="entry">
                    <p>Enter your URL</p>
                    <textarea id="mytextarea" rows="1" cols="50"></textarea>

                        <a title="Check Me Out!" id="btn-wrap">
                            <span class="title">Click to view site</span>

                            <div id="info">
                                <p>
                                    <strong>Don't forget</strong>
                                    <strong>the "http://"</strong>
                                </p>
                            </div>
                        </a>
                </div>
             <br/>
             <br/>
            <iframe id="myframe" src="http://johnverber.com/simple.html">
            </iframe>
    </div>
    <!--<div id="right_col"></div>--> 
```

```
<script>
    $(document).ready(function() {
        positionAd();
     });

    $(window).resize(function() {
        positionAd();
    });

    var positionAd = function() {
        var WINDOW_WIDTH = $(window).width();
        var WINDOW_HEIGHT = $(window).height();
        var BOX_WIDTH = $('#middle_col').width();
        var BOX_HEIGHT = $('#middle_col').height();

        $('#middle_col').css({"left": (WINDOW_WIDTH - BOX_WIDTH)/2, "top" : (WINDOW_HEIGHT - BOX_HEIGHT)/2});
        }

    $('#btn-wrap').click(function() {
                    var urlVal = $('#mytextarea').val();
                    if(urlVal.match("?_myTag")){
                        document.getElementById('myframe').src = urlVal;
                    }
                    else{
                        var addTag = urlVal.concat("?_myTag");
                        document.getElementById('myframe').src = addTag;
                    }
    });

    $('#myframe').contents().find("head").append("<link rel="stylesheet" type="text/css" href="addStyles.css" />");

</script>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T19:13:01.380

您可以使用 jQuery**[`.contents()`](http://api.jquery.com/contents/)**来访问`iframe`的内部 DOM。从那里开始很简单：

```
$("#iframe_id").contents().find("head").append("<script>..scripts..</script>");
//or
$("#iframe_id").contents().find("head").append("<style>..styles..</style>"); 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T03:05:42.303

好吧，这就是最终工作的结果：

```
$("#iframe_id").contents().find("head").html("<style>..styles..</style>"); 
```

# javascript - 一个基本的 Javascript For 循环

> ID：12269762
> 
> 赞同：0
> 
> 时间：2012-09-04T19:01:47.487
> 
> 标签：javascript, for-loop

@http [://jsfiddle.net/defencedog/rrKYW/](http://jsfiddle.net/defencedog/rrKYW/)

最近的一个观察，深深的侵占了我对js的认识。看下面的代码：

```
var x = "";

function postbody() {
    for (i = 0; i < 5; i++) {
        x = x + "<sup>" + i + "</sup><br/>";
        document.getElementById("posti").innerHTML = x;
    }

}​ 
```

上面的代码的输出类似于下面的输出，这对我来说是模糊的

```
var x = "";

function postbody() {
    for (i = 0; i < 5; i++) {
        x = x + "<sup>" + i + "</sup><br/>";

    }
  document.getElementById("posti").innerHTML = x;
}​ 
```

后一个代码必须给我一个（简明地说是x的最后一个值）输出而不是整个迭代输出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T19:04:11.323

两个片段都完成了同样的事情；第一个片段只是性能较差，因为它会在字符串构建时覆盖该值 5 次，而不是写入最终字符串一次。

unrelated：`i`是一个隐式全局。使用`var`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T19:05:24.640

当然可以。您在每次迭代中向 x 添加新代码，然后在元素中设置它。设置 innerHTML 会覆盖元素的全部内容。

在第一个循环中，每次迭代都会用稍大的 html 覆盖元素的 html，但最后一次迭代是用 x 的“完整”值覆盖它。

所以最终结果是一样的，但是第一个结果要慢很多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T19:05:28.323

这两个示例是相同的，因为第一个`innerHTML`在每次迭代中都被覆盖，而变量的值`x`与其他字符串连接。在最后一次迭代中，元素`innerHTML`将具有`x`' 总值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T19:04:55.813

both will cause a same result.

```
x = x + ... 
```

# jquery - 你可以在 WinJs 中使用多个 jquery 选择器吗？

> ID：12269763
> 
> 赞同：0
> 
> 时间：2012-09-04T19:01:49.730
> 
> 标签：jquery, windows-8, winjs

我正在编写一个 Windows 8 应用程序，我正在使用 jQuery。

我有以下代码行不起作用：

```
$('#myId1', '#myId2').hide(); 
```

但这工作得很好。

```
$('#myId1').hide();

$('#myId2').hide(); 
```

没什么大不了的，但第一行代码应该是一样的。有没有人经历过这个/知道解决方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T19:06:28.387

jquery 选择器类似于 css 选择器。
如果要选择所有带有`style1`联合元素的元素，`style2`则必须使用**逗号**：

```
style1, style2 
```

逗号将两个选择器联合起来。因此，对于隐藏元素`#myId1`，`#myId2`您将编写代码：

```
$('#myId1, #myId2').hide(); 
```

# qt - 在 QtWebKit 中显示阿拉伯字体

> ID：12269764
> 
> 赞同：6
> 
> 时间：2012-09-04T19:01:57.047
> 
> 标签：qt, fonts, arabic, qtwebkit, text-justify

我用 QtWebkit 编写了一个程序。我在这个应用程序中使用了阿拉伯字体。但如下所示的文字是不适用的。是否有解决方案来解决它？ [（来源：][[shiaupload.ir](http://www.shiaupload.ir/images/47343138299124526783.jpg)][）][![在 QtWebkit 中显示的文本不适用：](../Images/51d6674ac8b1bb96e1b45f39cc5a61ab.png)](https://i.stack.imgur.com/mUqI2.jpg)

![显示不适用的文字：](../Images/ea174ab17fc4478463ebd15f3c8cb20e.png)

[此处的示例代码](https://filesave.me/file/22481/arabicFontInWebkit-rar.html)

html代码：{

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
 <html>
 <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
 </head>

<style>
/*Twe Arabic font for test:*/
@font-face {
        font-family: '__me_quran';
        src: url(me_quran.ttf) format('truetype');
    }
@font-face {
        font-family: '__traditionalArabic';
        src: url(trado.ttf) format('truetype');
    }
 #para1
{
 font-family :/*__me_quran*/__traditionalArabic;
 text-align : justify;/*In this project i need justify alinement*/
 direction:rtl;
}

</style>
<script type="text/javascript" >
    var step=1;
    function plusZoom1(){
        document.getElementById("para1").style.zoom = parseFloat(step);
        step +=0.5;
    }

    function minusZoom1(){
        step -=0.5;
        document.getElementById("para1").style.zoom = parseFloat(step);
    }
</script>
<body>
<input type="button" value="+" onclick="plusZoom1();" />
<input type="button" value="-" onclick="minusZoom1();" />
<p id="para1">
       بِسْمِ اَللّٰهِ اَلرَّحْمٰنِ اَلرَّحِيمِ ( 1 )  اَلْحَمْدُ لِلّٰهِ رَبِّ اَلْعٰالَمِينَ ( 2 )  اَلرَّحْمٰنِ اَلرَّحِيمِ ( 3 )  مٰالِكِ يَوْمِ اَلدِّينِ ( 4 )  إِيّٰاكَ نَعْبُدُ وَ إِيّٰاكَ نَسْتَعِينُ ( 5 )  اِهْدِنَا اَلصِّرٰاطَ اَلْمُسْتَقِيمَ ( 6 )  صِرٰاطَ اَلَّذِينَ أَنْعَمْتَ عَلَيْهِمْ غَيْرِ اَلْمَغْضُوبِ عَلَيْهِمْ وَ لاَ اَلضّٰالِّينَ ( 7 ) 
</p>
</body>
</html> 
```

}

qt代码：{

```
#include <QtGui/QApplication>
#include <QWebView>

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);

    QWebView wv;
    wv.setUrl(QUrl::QUrl("qrc:/rc/a.html"));
    wv.show();

    return a.exec();
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T05:34:20.283

I faced similar problem long time back. Qt was not displaying some Arabic characters as they should appear. I had to change Qt's font drawing mechanism and use 'FreeType' font library for drawing fonts. You can use FreeType. More information here: [http://freetype.sourceforge.net/index2.html](http://freetype.sourceforge.net/index2.html)

Or you may use some other graphics engine to bypass Qt's drawing - which can display these fonts.

# html - 如何在 Dreamweaver 中的图像顶部的 html 页面上嵌入 youtube 视频？

> ID：12269768
> 
> 赞同：2
> 
> 时间：2012-09-04T19:02:03.847
> 
> 标签：html, css, video, youtube, dreamweaver

网页全是html。没有CSS。我不知道css。我使用本[教程](http://www.youtube.com/watch?v=W7XpOzJHRU4&list=FLSvViAYel69qti8gklYJJnw&index=1&feature=plpp_video)将我在 Photoshop 中设计的网站用 Dreamweaver 制作。

我只想简单地将 Youtube 视频嵌入页面上的特定位置。但是嵌入视频的唯一方法是将其中一张图像下推并将视频放在它旁边。我希望将视频嵌入页面布局的顶部，就好像它漂浮在它后面的图像前面一样。

如您所知，我不知道自己在做什么。

我希望视频出现在这个[网站](http://www.dollarshaveclub.com/)这样的页面上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T22:42:24.180

根据所提供网站的代码，视频本身在 div 中运行。如果您不想使用 css，只需直接在 div 的样式上定义属性，该 div 将成为视频的容器，如下所示：

```
<div style="background: url(http://www.dollarshaveclub.com/skin/frontend/dsc-test/dsc-theme/images/video_placeholder.png) no-repeat; padding: 18px; width: 600px; height: 300px;">
    <iframe width="537" height="301" src="http://www.youtube.com/embed/ZUG9qYTJMsI?rel=0&autohide=1&autoplay=0"  frameborder="0" allowfullscreen></iframe>
</div> 
```

在 jsfiddle 上测试它：[点击这里](http://jsfiddle.net/bgqyf/)

*顺便说一句：根据视频的尺寸更改背景图像文件位置的背景 URL、视频代码（从 youtube 收集）以及 div 的宽度和高度，以便进行自定义。*

祝你好运！

# javascript - 从锚目标中的元素中清除类

> ID：12269769
> 
> 赞同：0
> 
> 时间：2012-09-04T19:02:05.520
> 
> 标签：javascript, jquery, html

全部。我已经为此工作了一段时间，似乎无法提出解决方案。我正在为我们的 Intranet 编写一个新的常见问题解答，我正在使用 jquery scrollTo 插件和 localScroll 插件来完成它的感觉。我添加的一件事是，当用户单击问题的链接时，它会将用户向下滚动到答案并以红色突出显示字段集以指示他们问题的答案。

我的 JS 看起来像这样：

```
function styleRow(myId) {
  ID = myId.substring(1) var ID = document.getElementById(ID)
  ID.className += " highlight"
} 
```

我的 HTML 如下所示：

```
<li><a href="#1_1" onclick="styleRow('#1_1')">Question 1<a></li>
<li><a href="#1_2" onclick="styleRow('#1_2')">Question 2</a></li>
<li><a href="#1_3" onclick="styleRow('#1_3')">Question 3</a></li>

<fieldset class="pad18" id="1_1">
<legend class="SubTitleSmall" id="1_1">Answer 1</legend>
     <p class="MT12 ML24">Answer 1 Text</a></p>
</fieldset> 

     <fieldset class="pad18" id="1_2">
<legend class="SubTitleSmall" id="1_2">Answer 2</legend>
<p class="MT12 ML24">Answer 2 Text</p>
</fieldset> 

<fieldset class="pad18" id="1_3">
<legend class="SubTitleSmall" id="1_3">Answer 3</legend>
     <p class="MT12 ML24">Answer 3 Text</p>
</fieldset> 
```

目前，当用户单击书签链接时，行突出显示就好了。但是，如果他们返回顶部并单击另一个链接，则样式不会清除先前选择的问题。我知道目前没有为此包含任何代码，这就是我在这里的原因。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T19:06:23.667

如果你使用 jQuery，

```
function styleRow(myId){
    $(".highlight").removeClass("highlight");
    $(myId).addClass("highlight");
} 
```

但请注意`id`：

*   必须以字母开头：AZ 或 az
*   后面可以跟字母 (A-Za-z)、数字 (0-9)、连字符 ("-") 和下划线 ("_")

# cuda - 推力::remove_if的返回值类型

> ID：12269773
> 
> 赞同：3
> 
> 时间：2012-09-04T19:02:12.287
> 
> 标签：cuda, thrust

我有两个整数数组，`dmap` 并且`dflag` 在相同长度的设备上，我用推力设备指针包装了它们，`dmapt`并且 `dflagt`

dmap 数组中有一些元素的值为 -1。我想从 dflag 数组中删除这些 -1 和相应的值。

我正在使用 remove_if 函数来执行此操作，但我无法弄清楚这个调用的返回值是什么，或者我应该如何使用这个返回值来获取 .

（我想将这些简化的数组传递给`reduce_by_key`dflagt 将用作键的函数。）

我正在使用以下调用进行减少。请让我知道如何将返回的值存储在变量中并使用它来处理各个数组`dflag`和`dmap`

```
thrust::remove_if( 
    thrust::make_zip_iterator(thrust::make_tuple(dmapt, dflagt)), 
    thrust::make_zip_iterator(thrust::make_tuple(dmapt+numindices, dflagt+numindices)), 
    minus_one_equality_test() 
); 
```

上面使用的谓词函子定义为

```
struct minus_one_equality_test
{ 
    typedef typename thrust::tuple<int,int> Tuple; 
    __host__ __device__ 
    bool operator()(const Tuple& a ) 
    { 
        return  thrust::get<0>(a) ==  (-1); 
    } 
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T20:28:04.757

返回值是一个 zip_iterator，它标记了在 remove_if 调用期间仿函数返回 true 的元组序列的新结尾。要访问底层数组的新结束迭代器，您需要从 zip_iterator 检索元组迭代器；然后，该元组的内容是您用于构建 zip_iterator 的原始数组的新结束迭代器。文字比代码复杂得多：

```
#include <thrust/tuple.h>
#include <thrust/device_vector.h>
#include <thrust/device_ptr.h>
#include <thrust/remove.h>
#include <thrust/iterator/zip_iterator.h>
#include <thrust/copy.h>

#include <iostream>

struct minus_one_equality_test
{ 
    typedef thrust::tuple<int,int> Tuple; 
    __host__ __device__ 
    bool operator()(const Tuple& a ) 
    { 
        return  thrust::get<0>(a) ==  (-1); 
    }; 
}; 

int main(void)
{
    const int numindices = 10;

    int mapt[numindices] = { 1, 2, -1, 4, 5, -1, 7, 8, -1, 10 };
    int flagt[numindices] = { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 };

    thrust::device_vector<int> vmapt(10);
    thrust::device_vector<int> vflagt(10);

    thrust::copy(mapt, mapt+numindices, vmapt.begin());
    thrust::copy(flagt, flagt+numindices, vflagt.begin());

    thrust::device_ptr<int> dmapt = vmapt.data();
    thrust::device_ptr<int> dflagt = vflagt.data();

    typedef thrust::device_vector< int >::iterator  VIt;
    typedef thrust::tuple< VIt, VIt > TupleIt;
    typedef thrust::zip_iterator< TupleIt >  ZipIt;

    ZipIt Zend = thrust::remove_if(  
        thrust::make_zip_iterator(thrust::make_tuple(dmapt, dflagt)), 
        thrust::make_zip_iterator(thrust::make_tuple(dmapt+numindices, dflagt+numindices)), 
        minus_one_equality_test() 
    ); 

    TupleIt Tend = Zend.get_iterator_tuple();
    VIt vmapt_end = thrust::get<0>(Tend);

    for(VIt x = vmapt.begin(); x != vmapt_end; x++) {
        std::cout << *x << std::endl;
    }

    return 0;
} 
```

如果您编译并运行它，您应该会看到如下内容：

```
$ nvcc -arch=sm_12 remove_if.cu 
$ ./a.out
1
2
4
5
7
8
10 
```

在此示例中，我仅“检索”元组第一个元素的短内容，第二个元素以相同的方式访问，即。标记向量新端的迭代器是`thrust::get<1>(Tend)`.

# c# - 已修复：从外部程序集加载 NHibernate 映射会导致异常

> ID：12269775
> 
> 赞同：1
> 
> 时间：2012-09-04T19:02:16.787
> 
> 标签：c#, nhibernate, reflection, mapping, .net-assembly

当然，我已经搜索了现有的主题，并尝试了其中提出的解决方案，但没有成功。也许有人可以提供一些额外的提示。

这是场景：

我将使用一个 NHibernate 项目来处理来自多个程序集的实体。应处理的程序集包含一些实体以及编译为嵌入式资源的映射文件：

```
namespace projectName.namespace
{
    public class Entity
    {
        public virtual Guid Id { get; set; }
        public virtual string IsoCode { get; set; }
    }
}

<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2">
    <class name="projectName.namespace.Entity,projectName">
        <id name="Id" column="EntityId">
          <generator class="guid" />
        </id>
    </class>
</hibernate-mapping> 
```

在 NHibernate 项目中，程序集通过以下方式加载：

```
Assembly assembly = Assembly.Load(assemblySourcePath); 
```

最后，当将映射添加到配置 NHibernate 时会抛出 MappingException：

```
configuration.AddAssembly(assembly); 
```

我真的不知道如何解决这个问题。你们有人吗？

问候！

编辑 1 这是异常输出（翻译和总结）：

```
NHibernate.MappingException: Could not compile the mapping document (the one from above)
persistent class "classname, assemblyname" not found -> System.IO.FileNotFoundException: file or assembly "assemblyname" or one of its dependencies not found. 
```

编辑 2 我再次尝试使用 Fluent NHibernate。再次找到映射类，但没有找到实体：

```
persistent class dom.Project.BusinessEntities.Class, dom.Project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null not found 
```

问候

编辑 3 解决方案我终于成功了，伙计们。解决方案非常简单，表明 nhibernate 可以加载任何程序集，无论是否在域根目录下。安装应加载到全局程序集缓存的程序集，nhibernate 将停止它的抗议:-)

再次问候和感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T11:18:15.593

Nhibernate 只能从位于当前应用程序域根路径下的程序集中加载实体。尝试将程序集放在 bin/Debug 下方的临时文件夹中并指向它 - 应该可以解决问题

# mysql - 正确选择/加入“有登录用户喜欢”

> ID：12269782
> 
> 赞同：0
> 
> 时间：2012-09-04T19:03:04.063
> 
> 标签：mysql

我们有以下表格：

```
User (id, name)
Item (id, title, text)
Like (id, itemId, userId) 
```

Like 表存储了 Item 和 User 之间的 has-and-belongs-to-many 关系。

从项目中选择列表并查看“登录”用户是否“喜欢”该特定项目的最有效方法是什么？

```
SELECT * FROM Item ORDER BY published DESC LIMIT 10
(+ check if each Item has been liked by known user id, e.g. '123') 
```

**这最好通过子选择、连接或两个单独的查询来完成？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T19:10:00.973

联接比子选择更有效，数据库引擎针对联接表进行了很好的优化。

查询（我已经更改了表'like'的名称，因为它是SQL中的关键字）

```
SELECT COUNT(*)
FROM User u 
JOIN Likes l ON u.id = l.userID
JOIN Item i ON l.itemid = i.id
WHERE i.title = 'item' AND u.name = 'user' 
```

如果结果大于 0，则用户喜欢该项目。

编辑：如果您想显示 10 个最新项目，并查看用户是否喜欢它们，您可以使用以下查询：

```
SELECT i.id, i.title, IF(l.userID IS NULL, 0, 1) AS Liked
FROM item i 
LEFT JOIN Likes l ON i.id = l.itemID AND l.userID = ?
ORDER BY i.published DESC LIMIT 10 
```

使用 LEFT JOIN 很重要，否则您将无法获得用户不喜欢的行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T19:11:41.873

最直接的方法（如果我理解正确的问题）是

```
select * from Like where itemId = ? and userId = ?; 
```

假设您有要检查的 itemId 和会话中的 userId。最好在表 Like 和列 itemId、userId 上有一个复合索引，以便快速返回查询。

# php - 数据映射器与数据访问对象。不同之处。哪个更好？

> ID：12269787
> 
> 赞同：9
> 
> 时间：2012-09-04T19:03:28.933
> 
> 标签：php, database, design-patterns, domain-driven-design

> **可能重复：**
> [ORM/DAO/DataMapper/ActiveRecord/TableGateway 差异？](https://stackoverflow.com/questions/3198419/orm-dao-datamapper-activerecord-tablegateway-differences)

有人可以帮我理解数据映射器和数据访问对象模式之间的区别吗？我已经从 zandstra 的书中了解了数据映射器模式。但是当我搜索数据访问对象时，我发现它们非常相似，甚至是相同的模式。另外我想知道在编写自己的框架时应该使用哪一个（我正在尝试实现自己的 mvc php 框架，只是为了了解现代框架的工作原理）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-04T19:19:01.050

[数据映射器](http://martinfowler.com/eaaCatalog/dataMapper.html)直接保存（并恢复到）[域对象](http://c2.com/cgi/wiki?DomainObject)的数据，而[数据访问对象](http://www.oracle.com/technetwork/java/dataaccessobject-138824.html)将用作域对象和存储抽象之间交换信息的中介。

`<update>` *两种方法的主要区别在于数据映射器临时控制域对象，而数据访问对象要么间接接收数据（通过一些更高级别的抽象，如服务），要么由域控制（在某些实现中，甚至实例化）目的。*`</update>`

这两种模式都与[活动记录](http://martinfowler.com/eaaCatalog/activeRecord.html)（反）模式无关，后者将域逻辑和存储抽象结合在单个实例中，从而破坏了[SRP](http://en.wikipedia.org/wiki/Single_responsibility_principle)。

并且没有提到的模式与 ORM 相关联。一些 ORM 尝试使用上述模式来实现，但他们通常在这方面做得很糟糕。

大多数，您所说的“现代框架”使用活动记录模式并将其实例称为“模型”，Rails 延续了这种极端简化的概念。

# forms - 如果出现错误消息，上传表单输入会重置

> ID：12269788
> 
> 赞同：0
> 
> 时间：2012-09-04T19:03:32.897
> 
> 标签：forms, upload

如果发生服务器端错误，有没有办法使用输入上传值保留上传的文件？

现在发生的事情是，当表单提交时，它会抛出错误，并且我们试图处理的上传图像被清除，我每次都必须重新附加它。

有没有办法将其存储在表单数据中？

由于空间限制，试图不在我的服务器上存储临时文件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T19:06:57.140

我不相信您可以设置上传字段的值，出于安全原因，用户每次都必须选择文件。如果您能够通过脚本选择应选择的文件，则意味着您可能会强制用户提交敏感信息。

# entity-framework - 模型未从我的数据库中读取（实体框架）

> ID：12269793
> 
> 赞同：0
> 
> 时间：2012-09-04T19:04:03.257
> 
> 标签：entity-framework

我用数据库创建了简单的 MVC 应用程序。
首先我创建了一个数据库，初始化了数据库，然后我从数据库创建了一个模型并且应用程序工作了。
然后我决定用完全不同的值加载数据库（但表/字段的定义保持不变）。
重新加载后我的应用程序的数据库没有显示我的数据库中的任何数据。使用调试器我看到我的应用程序无法从表中获取任何数据。更糟糕的是 - 我注意到除了我的数据库 TestDB 之外，数据库浏览器正在显示 TestDB.mdf1 数据库，其定义与 testDB.mdf 相同，但表为空......

这是代码：

```
public ActionResult ShowQuestions() 
{ 
     TestDBEntities _db = new TestDBEntities(); // this is the database 
     ObjectSet<question> all_quest = _db.questions ;      // this is the table 
     foreach (var x in all_quest) 
     { 
               ..... // this part was never executed 
     } 

     return View(q_list); 
} 
```

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T19:10:16.227

1-检查 MVC 应用程序 (web.config) 中的连接字符串。这将告诉您正在使用哪个数据库。然后转到该数据库并检查表中是否有数据。如果是错误的数据库，只需修改连接字符串。

2-如果它是正确的数据库，但没有数据，只需添加数据。它可能已由您的 ORM 重新创建（谁知道？）。

3-您遇到的错误是什么？或者你有什么错误吗？

# mysql - 嵌套集的深度

> ID：12269806
> 
> 赞同：2
> 
> 时间：2012-09-04T19:05:09.577
> 
> 标签：mysql, tree, nested-sets, depth

我有一个大型 mysql 表，其父子关系存储在嵌套集模型（左右值）中。

它使查找给定项目的所有子项变得容易。

现在，我如何找到某个项目的深度。

行示例：

Parent_ID、Taxon_ID、Taxon_Name、lft、rgt

对于 somerow(taxon_id) 我想知道它离根节点有多远。

现在可能很重要的是要注意，在我构建数据的方式中，每个终端节点（一个没有自己的孩子的节点）lft = rgt. 我知道网上发布的许多示例都有 rgt = lft +1，但我们决定不这样做只是为了方便。

总结：嵌套集模型，需要找到给定节点的深度（到达根节点的节点数）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T20:44:12.227

我想到了。

本质上，您必须查询包含您正在寻找的节点的所有节点。例如，我正在查看一个具有 lft=rgt=7330 的节点，我想要它的深度。我只需要

```
Select count(*) 
 from table 
 where lft<7330 
 AND   rgt>7330 
```

您可能希望在使用之前将结果加 1，因为它确实告诉您之前的世代数而不是实际水平。但它有效且速度快！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T19:18:23.387

MySQL 不支持递归查询。我相信 PostgreSQL 提供有限的支持，但它会低效且混乱。然而，没有理由不能以递归方式（即，以编程方式）执行查询来获得所需的结果。

如果“这个节点有多深？” 是您经常需要回答的问题，您可以考虑调整表的架构，以便每个节点存储并保持其深度。然后你可以只读取那个值而不是用笨拙的递归来计算它。（如果您对表进行洗牌，深度值的维护可能会变得乏味，但假设您执行的写入操作比读取操作少得多，这是一种更有效的方法。）

# html - 样式表中的 css 不适用于我的 id 和 class 标签

> ID：12269814
> 
> 赞同：-2
> 
> 时间：2012-09-04T19:05:46.730
> 
> 标签：html, css

我正在尝试为我的网站创建一个全局样式表。

它一直运行良好，直到达到 1471 线。现在，一些 id 和 class 标签已设置样式并且可以正常工作，而其他标签则没有。

当我从工作表中取出一堆样式时，那些不起作用的样式就会开始起作用。

我不知道为什么会这样，也不知道如何解决。

我不希望为不同的功能（例如按钮和工具提示等）创建单独的样式表。

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T19:09:48.057

检查您在第 1471 行是否有任何语法错误。如果您需要准确的答案，请提供相关代码或链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T19:11:02.597

相当开放式的问题。我建议[验证您的 html](http://validator.w3.org/)和您的[css](http://jigsaw.w3.org/css-validator/)。听起来您可能在其中一个中有语法错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T19:13:18.273

首先，确保检查 CSS 中的语法错误。

假设你已经这样做了，当你试图在外部设置一些已经在更接近元素的级别设置样式的东西时，通常会发生这种事情。基本上，优先顺序是这样的：

1.  内联样式
2.  在 html 视图中阻止 css
3.  外部样式表

例如，假设你有这个：

```
<div id="test" class="testclass" style="position:absolute;"></div> 
```

然后在你的外部样式表中你有：

```
#test {
position:relative;
} 
```

内联样式将获得优先权，因为它在链条上更高。

特异性也是如此。规则越*具体*，其优先级越高。

例如，这个：

```
.testclass #test {
position:absolute;
} 
```

将优先于此：

```
.testclass {
position: relative;
} 
```

因为它更具体。所以请记住这些事情，并且显然也要记住，每个视图都必须指定要查找的样式表，看看这是否不能解决您的问题。

# tsql - 使用相应的非空源字段更新目标表中的任何列

> ID：12269817
> 
> 赞同：0
> 
> 时间：2012-09-04T19:06:11.103
> 
> 标签：tsql, sql-server-2005, merge

这可能是一个熟悉的问题，但我没有在搜索中找到答案。我确实有一个解决方案（如下所示），它在每个非键列上都涉及 COALESCE，我想知道是否有一个动态 TSQL 例程，或者可能是一种不涉及显式命名所有列的不同查询方式。

我有两个表，“targetTable”和“deltaTable”，它们具有相同的字段名称和类型。两者都有一个唯一的键“id”。

Deltatable 的数据已针对 targetTable 中的相应行进行了更改。值未更改的任何列都是空的。我想更新在 deltaTable 的相应行中具有非空值的 targetTable 中的列。DetlaTable.id 保证存在于 TargetTable.id 中，我永远不想将字段更新为 NULL。

我正在使用 SQL Server 2005（它没有合并语句，我不知道它会有所帮助）。

所以如果一个 targetTable 行看起来像

```
 id | name    |  dob        | next_appt
  5    Bill       1-1-2012   | 3-3-2015 
```

一个 deltaTable 行看起来像

```
 id | name     | dob        | next_appt
  5  | NULL     | NULL       | 4-4-2015 
```

我希望将 targetTable 更新为

```
 id | name    |  dob        | next_appt
  5    Bill       1-1-2012   | 4-4-2015 
```

我现在想要改进的是：

```
UPDATE target
SET target.colA = COALESCE(delta.colA, target.colA),
    target.colN = COALESCE(delta.colN, target.colN)
FROM  delta JOIN target on delta.id = target.id 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T20:36:59.310

我不确定这是一个好主意，但如果你真的想这样做，你可以这样做：

```
DECLARE @sql nvarchar(max)
SET @sql = N'UPDATE target SET
';
SELECT @sql = @sql + N'  target.'+QUOTENAME([name]) + ' = COALESCE(delta.' + QUOTENAME([name]) + ', target.' + QUOTENAME([name]) + '),
'
FROM sys.columns 
where object_id = object_id('target') AND [name] != 'id'
order by [column_id]

SET @sql = STUFF(@sql,LEN(@sql)-2,1,''); -- strip off the last commma
set @sql = @sql + 
'FROM delta 
JOIN target ON  delta.id = target.id'

EXECUTE sp_executesql @sql 
```

# android - Android - layout_weight 使图像在侧面可点击

> ID：12269828
> 
> 赞同：1
> 
> 时间：2012-09-04T19:06:54.650
> 
> 标签：android, android-layout

我有 3 张图片的布局。我为它们中的每一个分配了权重以控制它们分配的宽度。

问题是重量使图像的所有宽度都可点击，当我希望可点击区域仅是图像时，我该如何实现？

这是布局的相关部分：

```
 <ImageView
    android:id="@+id/1"
    android:layout_gravity="left|center_vertical"
    android:paddingBottom="5dp"
    android:layout_weight="1"
    android:layout_width="40dp"
    android:layout_height="40dp"/>
    <ImageView
    android:id="@+id/2" 
    android:layout_gravity="left|center_vertical"
    android:src="@drawable/2"
    android:paddingBottom="5dp"
    android:layout_weight="1"
    android:layout_width="40dp"
    android:layout_height="40dp"/>
    <ImageView
    android:id="@+id/3"
    android:gravity="center"
    android:layout_gravity="right"
    android:src="@drawable/3"
    android:layout_weight="9"
    android:layout_width="40dp"
    android:layout_height="40dp"/> 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T19:20:35.437

可能最简单的解决方案是将每个包装`ImageView`到一个容器中，例如一个简单的`FrameLayout`. 然后，您将权重设置在容器上而不是容器`ImageView`本身上。这样容器将缩放，但图像（以及可点击区域）不会。缺点是这会在视图层次结构中引入一个额外的层。

另一种方法是在运行时检查选择是否在图像的“可见”区域。这对你来说意味着更多的工作，但对系统来说可能更少，尽管差异可能充其量是微不足道的。

# android - 创建 GCMIntenetService 类时出错

> ID：12269830
> 
> 赞同：0
> 
> 时间：2012-09-04T19:06:56.083
> 
> 标签：android, eclipse-plugin

我按照这个主题[http://developer.android.com/guide/google/gcm/gs.html#libs](http://developer.android.com/guide/google/gcm/gs.html#libs) 创建 GCM 我做了所有步骤都很好但是当我继续创建类 GCMIntenetService 时我在类上遇到了更多错误错误“无法解析到类型”，“方法的返回类型丢失......”......请如果有人帮忙。

包 com.example.elarabygroup；

公共类 GCMIntenetService 扩展 GCMBaseIntentService {

```
private static final String LOG_TAG = "GetAClue::GCMIntentService";

public GCMIntentService() {
    super( GCM_SENDER_ID );
    // TODO Auto-generated constructor stub
    Log.i( LOG_TAG, "GCMIntentService constructor called" );
}

@Override
protected void onError( Context arg0, String errorId ) {
    // TODO Auto-generated method stub
    Log.i( LOG_TAG, "GCMIntentService onError called: " + errorId );
}

@Override
protected void onMessage( Context arg0, Intent intent ) {
    // TODO Auto-generated method stub
    Log.i( LOG_TAG, "GCMIntentService onMessage called" );
    Log.i( LOG_TAG, "Message is: " + intent.getStringExtra( "message" ) );
}

@Override
protected void onRegistered( Context arg0, String registrationId ) {
    // TODO Auto-generated method stub
    Log.i( LOG_TAG, "GCMIntentService onRegistered called" );
    Log.i( LOG_TAG, "Registration id is: " + registrationId );
}

@Override
protected void onUnregistered( Context arg0, String registrationId ) {
    // TODO Auto-generated method stub
    Log.i( LOG_TAG, "GCMIntentService onUnregistered called" );
    Log.i( LOG_TAG, "Registration id is: " + registrationId );
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T09:23:33.110

谢谢我已经解决了我的问题，因为我没有添加任何命名空间：

```
import com.google.android.gcm.GCMBaseIntentService;
import android.content.Context;
import android.content.Intent;
import android.util.Log; 
```

# iphone - Xcode4：如何为游戏创建菜单？

> ID：12269833
> 
> 赞同：0
> 
> 时间：2012-09-04T19:07:21.880
> 
> 标签：iphone, ios, ipad, xcode4

我有一个有 4 种游戏模式的游戏。问题是我想创建一个主菜单来选择一种模式，因为没有那个菜单，而是有一个 TabBar。我正在尝试将每种模式放在不同的 .xib 文件中，并为菜单创建另一个 .xib 文件。

菜单.m：

```
-(IBAction)PlayMode1:(id)sender{
ViewController *Mode1 = [[ViewController alloc] init];
[self presentModalViewController:Mode1 animated:YES];
[Mode1 release];
} 
```

有了这个我收到这个错误：由于未捕获的异常'NSInternalInconsistencyException'而终止应用程序，原因：'- [UIViewController _loadViewFromNibNamed:bundle:] 加载了“ViewController”笔尖，但未设置视图出口。

我检查了“视图”是否链接到 IB 上的“视图”，所以我不知道该怎么做......

我不是高级开发人员，感谢您的帮助！

![xib 层次结构](../Images/b5f3a239481bed6153e35108b605a4f8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T19:10:01.263

您应该尝试执行以下操作：

```
-(IBAction)PlayMode1:(id)sender{

    ViewController *Mode1 = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
    [self presentModalViewController:Mode1 animated:YES];
    [Mode1 release];
} 
```

好像你忘了把`initWithNibName`视图的分配放在里面。

此外，请确保您的 ViewController.xib 是视图控制器的正确名称，并检查它是否链接了正确的插座。

检查 View Identity > Class Identity 也已设置。如果没有，请输入您的控制器的名称，`ViewController`

* * *

**编辑**

删除 xib、“Window”和“ViewController”中的所有内容。

在左列拖动一个 UIView 并设置它的出口。

单击 File's Owner，然后在 Inspector、Identity inspector 部分（左起第三个）中输入视图的类“ViewController”。

# python - 是否有任何具有标准化输出的numpy自相关函数？

> ID：12269834
> 
> 赞同：9
> 
> 时间：2012-09-04T19:07:23.953
> 
> 标签：python, numpy, statistics, correlation, autocorrelation

我遵循了在另一篇文章中定义自相关函数的建议：

```
def autocorr(x):
    result = np.correlate(x, x, mode = 'full')
    maxcorr = np.argmax(result)
    #print 'maximum = ', result[maxcorr]
    result = result / result[maxcorr]     # <=== normalization

    return result[result.size/2:] 
```

但是最大值不是“1.0”。因此我引入了标记为“<=== normalization”的行

我使用“时间序列分析”（Box - Jenkins）第 2 章的数据集尝试了该功能。我希望得到如图所示的结果。2.7 在那本书中。但是我得到了以下信息：

![在此处输入图像描述](../Images/4a078e134906f676c642cd2172a57085.png)

有人对这种奇怪的、非预期的自相关行为有解释吗？

补充（2012-09-07）：

我进入了 Python - 编程并做了以下工作：

```
from ClimateUtilities import *
import phys

#
# the above imports are from R.T.Pierrehumbert's book "principles of planetary 
# climate" 
# and the homepage of that book at "cambridge University press" ... they mostly  
# define   the
# class "Curve()" used in the below section which is not necessary in order to solve 
# my 
# numpy-problem ... :)
#
import numpy as np;
import scipy.spatial.distance;

# functions to be defined ... :
#
#
def autocorr(x):
    result = np.correlate(x, x, mode = 'full')
    maxcorr = np.argmax(result)
    # print 'maximum = ', result[maxcorr]
    result = result / result[maxcorr]
    #   
    return result[result.size/2:]

##
#  second try ... "Box and Jenkins" chapter 2.1 Autocorrelation Properties
#                                               of stationary models
##
# from table 2.1 I get:

s1 = np.array([47,64,23,71,38,64,55,41,59,48,71,35,57,40,58,44,\
              80,55,37,74,51,57,50,60,45,57,50,45,25,59,50,71,56,74,50,58,45,\
              54,36,54,48,55,45,57,50,62,44,64,43,52,38,59,\
              55,41,53,49,34,35,54,45,68,38,50,\
              60,39,59,40,57,54,23],dtype=float);

# alternatively in order to test:
s2 = np.array([47,64,23,71,38,64,55,41,59,48,71])

##################################################################################3
# according to BJ, ch.2
###################################################################################3
print '*************************************************'
global s1short, meanshort, stdShort, s1dev, s1shX, s1shXk

s1short = s1
#s1short = s2   # for testing take s2

meanshort = s1short.mean()
stdShort = s1short.std()

s1dev = s1short - meanshort
#print 's1short = \n', s1short, '\nmeanshort = ', meanshort, '\ns1deviation = \n',\
#    s1dev, \
#      '\nstdShort = ', stdShort

s1sh_len = s1short.size
s1shX = np.arange(1,s1sh_len + 1)
#print 'Len = ', s1sh_len, '\nx-value = ', s1shX

##########################################################
# c0 to be computed ...
##########################################################

sumY = 0
kk = 1
for ii in s1shX:
    #print 'ii-1 = ',ii-1, 
    if ii > s1sh_len:
        break
    sumY += s1dev[ii-1]*s1dev[ii-1]
    #print 'sumY = ',sumY, 's1dev**2 = ', s1dev[ii-1]*s1dev[ii-1]

c0 = sumY / s1sh_len
print 'c0 = ', c0 
##########################################################
# now compute autocorrelation
##########################################################

auCorr = []
s1shXk = s1shX
lenS1 = s1sh_len
nn = 1  # factor by which lenS1 should be divided in order
        # to reduce computation length ... 1, 2, 3, 4
        # should not exceed 4

#print 's1shX = ',s1shX

for kk in s1shXk:
    sumY = 0
    for ii in s1shX:
        #print 'ii-1 = ',ii-1, ' kk = ', kk, 'kk+ii-1 = ', kk+ii-1
        if ii >= s1sh_len or ii + kk - 1>=s1sh_len/nn:
            break
        sumY += s1dev[ii-1]*s1dev[ii+kk-1]
        #print sumY, s1dev[ii-1], '*', s1dev[ii+kk-1]

    auCorrElement = sumY / s1sh_len
    auCorrElement = auCorrElement / c0
    #print 'sum = ', sumY, ' element = ', auCorrElement
    auCorr.append(auCorrElement)
    #print '', auCorr
    #
    #manipulate s1shX 
    #
    s1shX = s1shXk[:lenS1-kk]
    #print 's1shX = ',s1shX

#print 'AutoCorr = \n', auCorr
#########################################################
#
# first 15 of above Values are consistent with
# Box-Jenkins "Time Series Analysis", p.34 Table 2.2
#
#########################################################
s1sh_sdt = s1dev.std()  # Standardabweichung short 
#print '\ns1sh_std = ', s1sh_sdt
print '#########################################'

# "Curve()" is a class from RTP ClimateUtilities.py
c2 = Curve()
s1shXfloat = np.ndarray(shape=(1,lenS1),dtype=float)
s1shXfloat = s1shXk # to make floating point from integer
                    # might be not necessary

#print 'test plotting ... ', s1shXk, s1shXfloat
c2.addCurve(s1shXfloat)
c2.addCurve(auCorr, '', 'Autocorr')
c2.PlotTitle = 'Autokorrelation'

w2 = plot(c2)

##########################################################
#
# now try function "autocorr(arr)" and plot it
#
##########################################################

auCorr = autocorr(s1short)

c3 = Curve()
c3.addCurve( s1shXfloat )
c3.addCurve( auCorr, '', 'Autocorr' )
c3.PlotTitle = 'Autocorr with "autocorr"'

w3 = plot(c3)

#
# well that should it be!
# 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-13T06:07:20.867

因此，您最初尝试的问题是您没有从信号中减去平均值。以下代码应该可以工作：

```
timeseries = (your data here)
mean = np.mean(timeseries)
timeseries -= np.mean(timeseries)
autocorr_f = np.correlate(timeseries, timeseries, mode='full')
temp = autocorr_f[autocorr_f.size/2:]/autocorr_f[autocorr_f.size/2]
iact.append(sum(autocorr_f[autocorr_f.size/2:]/autocorr_f[autocorr_f.size/2])) 
```

在我的示例`temp`中是您感兴趣的变量；它是前向积分自相关函数。如果您想要您感兴趣的积分自相关时间`iact`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-30T19:35:07.690

I'm not sure what the issue is.

The autocorrelation of a vector `x` has to be 1 at lag 0 since that is just the squared L2 norm divided by itself, i.e., `dot(x, x) / dot(x, x) == 1`.

In general, for any lags `i, j in Z, where i != j` the unit-scaled autocorrelation is `dot(shift(x, i), shift(x, j)) / dot(x, x)` where `shift(y, n)` is a function that shifts the vector `y` by `n` time points and `Z` is the set of integers since we're talking about the implementation (in theory the lags can be in the set of real numbers).

I get 1.0 as the max with the following code (start on the command line as `$ ipython --pylab`), as expected:

```
In[1]: n = 1000
In[2]: x = randn(n)
In[3]: xc = correlate(x, x, mode='full')
In[4]: xc /= xc[xc.argmax()]
In[5]: xchalf = xc[xc.size / 2:]
In[6]: xchalf_max = xchalf.max()
In[7]: print xchalf_max
Out[1]: 1.0 
```

The only time when the lag 0 autocorrelation is not equal to 1 is when `x` is the zero signal (all zeros).

**The answer to your question is**: *no*, there is no NumPy function that automatically performs standardization for you.

Besides, even if it did you would still have to check it against your expected output, and if you're able to say "Yes this performed the standardization correctly", then I would assume that you know how to implement it yourself.

I'm going to suggest that it might be the case that you've implemented their algorithm incorrectly, although I can't be sure since I'm not familiar with it.

# ios - iOS 下载器应用程序和电子商务包？

> ID：12269836
> 
> 赞同：1
> 
> 时间：2012-09-04T19:07:27.960
> 
> 标签：ios, e-commerce

我不得不开设一家销售有声读物的电子商务商店，而我的首要目标之一是让它对移动设备更加友好。实际购买部分不是问题，但由于 iOS 不允许在浏览器内下载音频文件，我正在考虑为此目的提供一个应用程序。

是否有我可以使用的打包电子商务/下载器解决方案，这样我就可以使用电子商务解决方案构建商店，并对应用程序进行一些配置以将它们链接起来，而不是从头开始为我的商店设计应用程序？唯一真正的要求是人们能够登录他们的帐户，并播放/下载他们购买的任何文件。

如果没有，是否有任何开源核心下载器 iOS 应用程序可供我用作设计自己的下载器的基础？我已经尝试过我的 google-fu，但是任何涉及“iOS”和“下载”的查询只会导致一百万个“我如何下载我的应用程序？” 来自互联网的常见问题解答。

（我不太关心 Android，因为他们可以下载音频文件，但如果解决方案支持两者的应用程序就更好了。）

# jquery - Chrome和Firefox中不同的嵌套jQuery点击事件

> ID：12269839
> 
> 赞同：0
> 
> 时间：2012-09-04T19:07:36.983
> 
> 标签：jquery, firefox, google-chrome, click

使用此代码，Firefox 仅在按钮单击时发出警报。对于 Chrome，会显示两个警报。

我希望行为与 Chrome 中的行为相同，其中事件由`img`单击时触发（Firefox 会忽略该事件）。

**注意：**我的实际代码更长，功能更强大。我将其提炼成这组较小的代码，以隔离导致我在其他地方痛苦的根本行为。

```
<html>
    <head>
        <script src="http://app.essets.com/system/application/js/jquery/jquery.js" type="text/javascript"></script>
        <script type='text/javascript'>
            $(document).ready(function() {
                $('button').click(function(){
                alert('button clicked');
                });
                $('img').click(function(){
                alert('img clicked');
                });
            });
        </script>
    </head>
    <body>
        <button type='button'>
            <img id="1" class="moduleratingstar" src="http://app.essets.com/images/site/transactions.png">
            Some text
        </button>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T19:17:46.400

我认为您无法跨浏览器重现 Chrome 的行为 - 我什至不确定规范对此有何规定。

但是，您可以创建一个“假”按钮，即使用其他 HTML 元素，其样式看起来像一个按钮。这样，实现这种行为将是一件轻而易举的事。

[看看这个小提琴。](http://jsfiddle.net/andreortigao/weKVF/1/)

# django - Django objects.get __day 返回错误的日期

> ID：12269840
> 
> 赞同：1
> 
> 时间：2012-09-04T19:07:42.257
> 
> 标签：django, django-views, django-queryset

我对 django 很陌生，并且一直在解决我的大部分问题，直到这个问题。我认为 TimeZone 和 UTC 存在问题，但老实说，我不知道如何解决这个问题。

我正在建立一个博客，并试图查询特定日期以显示帖子。我的问题是我不断得到第二天的值。我什至注意到我看到这个月因为一天而关闭。这是我的详细信息和示例。

我的数据库中有 5 个帖子。当我搜索 9/4 时，我得到 9/3 的数据。9/3 数据返回 9/2 等。因此，当我在 9 月搜索所有帖子时，我也得到了 8/31。

任何帮助将不胜感激。还请解释我为什么会遇到这个问题。

博客标题 发布日期

```
Test BlogPost 5 Sept. 3, 2012, 5:26 p.m. 
Test BlogPost 4 Sept. 3, 2012, 5:22 p.m.
Test BlogPost 3 Sept. 2, 2012, 7:09 p.m.
Test BlogPost 2 Sept. 1, 2012, 5:29 p.m.
Test BlogPost   Sept. 1, 2012, 5:26 p.m.
Test BlogPost 0 Aug. 31, 2012, 8:18 p.m.
Test BlogPost 00    Aug. 29, 2012, 8:19 p.m. 
```

模型.py

```
from django.db import models
from django.template.defaultfilters import slugify
import datetime
class BlogPost(models.Model):
  blog_title = models.CharField(max_length=200)
  blog_slug = models.SlugField(unique_for_date='blog_pub_date', help_text='Automatically built from the title.', max_length=200)
  blog_content = models.TextField()
  blog_pub_date = models.DateTimeField('Date published')
  def __unicode__(self):
    return '%s' % self.blog_title
  class Meta:
    ordering = ["-blog_pub_date"] 
```

网址.py

```
url(r'^blog/(?P<year>\d{4})/$', 'dev_website.views.blog_view_post_year', name='blog_view_post_year'),
url(r'^blog/(?P<year>\d{4})/(?P<month>\d{1,2})/$', 'dev_website.views.blog_view_post_month', name='blog_view_post_month'),
url(r'^blog/(?P<year>\d{4})/(?P<month>\d{1,2})/(?P<day>\d{1,2})/$', 'dev_website.views.blog_view_post_day', name='blog_view_post_day'),
url(r'^blog/(?P<year>\d{4})/(?P<month>\d{1,2})/(?P<day>\d{1,2})/(?P<slug>[0-9A-Za-z-]+)/$', 'dev_website.views.blog_view_post_detail', name='blog_view_post_detail'), 
```

视图.py

```
def blog_index(request):
  latest_blogpost_list = BlogPost.objects.all().order_by('-blog_pub_date')[:7]
  return render(request, 'blog_index.html', {'latest_blogpost_list': latest_blogpost_list})
def blog_view_post_year(request, year):
  latest_blogpost_list = BlogPost.objects.filter(blog_pub_date__year=int(year)).order_by('-blog_pub_date')[:7]
  return render(request, 'blog_index.html', {'latest_blogpost_list': latest_blogpost_list})
def blog_view_post_month(request, year, month):
  latest_blogpost_list = BlogPost.objects.filter(blog_pub_date__month=int(month)).order_by('-blog_pub_date')[:7]
  return render(request, 'blog_index.html', {'latest_blogpost_list': latest_blogpost_list})
def blog_view_post_day(request, year, month, day):
  latest_blogpost_list = BlogPost.objects.filter(blog_pub_date__day=int(day)).order_by('-blog_pub_date')[:7]
  return render(request, 'blog_index.html', {'latest_blogpost_list': latest_blogpost_list})
def blog_view_post_detail(request, year, month, day, slug):
  #  blogpost_detail = BlogPost.objects.get(blog_pub_date__year=int(year), blog_pub_date__month=int(month), blog_pub_date__day=int(day), blog_slug=slug)
  #  blogpost_detail = BlogPost.objects.get(blog_pub_date__year=int(year), blog_pub_date__month=int(month), blog_slug=slug)
  blogpost_detail = BlogPost.objects.get(blog_pub_date__day=day)
  return render(request, 'blog_view_post.html', {'blogpost': blogpost_detail}) 
```

html代码

```
<h2>BLOG</h2>
{% if latest_blogpost_list %}
  {% for blogpost in latest_blogpost_list %}
    <h3><a href="blog/{{ blogpost.blog_pub_date|date:"Y/m/d" }}/{{ blogpost.blog_slug }}/">{{ blogpost.blog_title }}</a></h3>
    <p>[ {{ blogpost.blog_pub_date }} ]</p>
    <hr>
    <p>{{ blogpost.blog_content }}</p>
    <br />
  {% endfor %}
{% else %}
  <p>No Blog posts are available.</p>
{% endif %} 
```

# java - Android Jsoup错误意外停止应用程序

> ID：12269843
> 
> 赞同：0
> 
> 时间：2012-09-04T19:07:59.883
> 
> 标签：java, android, html-parsing, jsoup

我已经构建了一个 android 应用程序，我使用 Jsoup 来解析来自 html 站点的一些数据。它工作得很好......

现在我开始构建另一个应用程序，我使用了相同的代码，相同的 jsoup 库，这些项目之间的一切都是一样的，但唯一的区别是 java 版本，新版本是 1.7，我不记得的旧版本和 eclipse 版本新的是朱诺，过去的我也不记得了……

如果我运行新应用程序，我会意外停止应用程序...

如果我在没有 jsoup 代码的情况下运行应用程序，它运行良好..

我试图重新打开过去运行的旧应用程序，现在与新应用程序出现同样的问题。

任何人都知道发生了什么......我可以提供你想要的任何信息......谢谢很多......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T11:19:57.510

谢谢，但我修好了。我不得不检查偏好中的 jsoup ...再次感谢

# facebook-graph-api - 无法在 Facebook iOS SDK 3.0 中重现教程示例“Scrumptious”

> ID：12269845
> 
> 赞同：3
> 
> 时间：2012-09-04T19:08:14.533
> 
> 标签：facebook-graph-api, xcode4.3, facebook-ios-sdk

我遵循[Facebook SDK for iOS Tutorial](http://developers.facebook.com/docs/tutorials/ios-sdk-tutorial/)的说明并尝试重现我自己的项目，该项目类似于“Scrumptious”示例（SDK 中的示例项目）

奇怪的是，在 FB 登录对用户进行身份验证后，用户被锁定在 FB 部分，永远无法返回应用程序。代码与“Scrumptious”相同，但“Scrumptious”工作得很好。有什么建议吗？

（我确实更新了 Open Graph 命名空间，使用 heroku 作为托管服务，并在我的 facebook 应用程序中添加了一个 Tester 用户。示例项目中的 Readme.txt 说这对于发布 Open Graph Actions 至关重要。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T20:44:25.830

您是否在 info.plist 中正确注册了回调 url？请参阅此处说明中的最后一步：[https ://developers.facebook.com/docs/getting-started/getting-started-with-the-ios-sdk/#project](https://developers.facebook.com/docs/getting-started/getting-started-with-the-ios-sdk/#project)

# jquery-mobile - 在 Trigger.io 中的表单提交上重定向 jQuery Mobile 页面

> ID：12269848
> 
> 赞同：0
> 
> 时间：2012-09-04T19:08:52.527
> 
> 标签：jquery-mobile, trigger.io

我正在尝试构建一个简单的应用程序原型，但我似乎无法让 JQM 使用 或 更改为内部或外部`$.mobile.changePage($('#page2'))`页面`$.mobile.changePage('page2.html')`。

我已成功将表单提交绑定到按钮，但是单击（点击）时，它会更改同一页面。在第二次单击/点击后，它会重定向。

```
$("#fd-login button#login-fd-submit").on('click', function(e) {
  forge.logging.info('login-fd-submit clicked');
  $.mobile.changePage('page2.html');
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T20:06:21.030

对于“src”目录中的“本地”页面：

```
$("#fd-login button#login-fd-submit").on('click', function(e) {
    forge.logging.info('login-fd-submit clicked');

    forge.file.getLocal('page2.html', function(file) {
       $.mobile.changePage(file);
    }, function(err) { 
       forge.logging.log("error");
    });
}); 
```

如果您使用的是 jQuery 对象，那么它很可能**不是**trigger.io 并且需要查看更多代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T19:15:22.317

尝试使用：-

```
 $("#fd-login button#login-fd-submit").on('tap', function(e) {
    e.preventDefault();
    e.stopImmediatePropagation();
    forge.logging.info('login-fd-submit clicked');
    $.mobile.changePage('page2.html');
 }); 
```

更新：更改为使用点击事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T19:41:53.317

似乎这`$(element).on("click", function() {});`不起作用。`$(element).live("click", function() {});`完美运行。

# primefaces - 是否可以在 Primefaces 中创建垂直菜单栏？

> ID：12269849
> 
> 赞同：3
> 
> 时间：2012-09-04T19:09:16.547
> 
> 标签：primefaces

是否可以在 Primefaces 中创建垂直菜单栏？

我习惯了像 Ext-JS 这样的纯 AJax 框架，它使这变得简单，但到目前为止我还没有在 PF 中看到这样的组件。

谢谢，

乔

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-04T21:52:12.510

它被称为分层菜单。看：

[http://www.primefaces.org/showcase/ui/menu/tieredMenu.xhtml](http://www.primefaces.org/showcase/ui/menu/tieredMenu.xhtml)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-27T10:55:23.247

您需要在 primefaces 展示中搜索 TieredMenu。

# sql - Oracle 中的自定义分页

> ID：12269853
> 
> 赞同：0
> 
> 时间：2012-09-04T19:09:51.210
> 
> 标签：sql, oracle, pagination

谁能建议以下查询格式是否正确？

```
 SELECT * 
    FROM ( SELECT b.*
                , ROW_NUMBER() OVER (Order by b.TEST_NO) R
             FROM ( select r.* 
                      from ( select TEST_NO , TEST_NO1, TEST_NO2 
                               From test_table
                              where TEST_NO2  = '0000as23') r 
            where 1 = 1 
               and rownum < 10000  ) b
         )
 WHERE R BETWEEN 11 and 200; 
```

在这里，我尝试使用 Oracle 语法实现自定义分页。

# css - LESS css变量不起作用

> ID：12269856
> 
> 赞同：1
> 
> 时间：2012-09-04T19:09:57.807
> 
> 标签：css, less

我是 LESS 的新手，我在开发环境中使用 less.js。问题是，当我声明一个变量时，它不会像什么都没发生一样工作。

```
@bground: #c0c9c8;
body{
    background-color: @bground;
} 
```

如您所见，@bground 没有传递它的值。如果我输入直接值，它将出现，这证明 .less 设置正确。我正在使用最新版本的 Chrome 并在 Mac 上本地运行。除变量外，一切正常。如果工作中没有变量，我将无法使用 LESS 功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T19:34:34.063

如果您使用的是 apache，请在根文件夹中创建一个 .htaccess 文件，如果您已经有了，只需添加以下行：

```
AddType text/css .less 
```

这将告诉 apache 为 .less 文件发送正确的内容类型标头

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-22T06:58:16.213

请确保您在页面中加载了较少的 js 文件以容纳较少的文件。

利用

```
<script src="//cdn.jsdelivr.net/npm/less" ></script> 
```

为了那个原因。

此外，在加载您的 less 文件时，请使用以下语法

```
<link rel="stylesheet/less" type="text/css" href="dist/css/<your less file>.less" /> 
```

如前所述，确保您在标签上使用`rel`和属性。`type`

# java - izpack java 安装程序，带有 noShow 的快捷方式仍显示批处理窗口

> ID：12269866
> 
> 赞同：3
> 
> 时间：2012-09-04T19:10:42.380
> 
> 标签：java, batch-file, installation, izpack

您好我正在使用 izPack 创建一个 windows java 安装程序。我使用以下内容创建快捷方式：

```
<shortcut
    name = "ApplicationName"
    target = "$INSTALL_PATH\start.bat"
    commandLine = ""
    workingDirectory= "$INSTALL_PATH"
    description="Application Desc"
    iconFile="$INSTALL_PATH\app.ico"
    iconIndex="0"
    initialState="noShow"
    programGroup="yes"
    desktop="yes"
    applications="no"
    startMenu="no"
    startup="no"/> 
```

当我单击创建的快捷方式时，它会执行`start.bat`脚本，但窗口不会隐藏。因此，我打开了两个窗口...

我`start.bat`的基本上包含以下内容：

```
...
java -cp %CLASSPATH% com.package.Application >NUL 2>&1 
```

它适用于不打开窗口并使用`javaw`.

有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T14:21:58.053

我不确定我是否从您的描述中得到了正确的答案，但是您是否尝试过在 bat 本身中使用 javaw 而不是 java？如果是，该解决方案不是您想要的吗？这似乎也是对[相关问题](http://old.nabble.com/Shortcut-problems-with-IzPack-4.2-td21924325.html)的建议。

# caching - 如何从 CQ5 调度程序缓存中排除从特定模板创建的页面？

> ID：12269868
> 
> 赞同：3
> 
> 时间：2012-09-04T19:10:54.773
> 
> 标签：caching, dispatcher, aem, day-cq

我有一个特定的 Adob​​e CQ5 (5.5) 内容模板，作者将使用它来创建页面。我想从调度程序缓存中排除从此模板创建的任何页面。据我目前了解，我知道防止缓存的唯一方法是将**dispatcher.any**配置为*不*缓存特定的 URL。但在这种情况下，直到 Web 作者使用模板创建页面时，才知道 URL。我不想在每次创建页面时都返回并修改 dispatcher.any ——或者至少我想在没有其他方法的情况下自动执行此操作。我正在使用 IIS 作为调度程序。我不想缓存页面的原因是因为为这些页面呈现内容的底层 JSP 会生成动态内容，并且页面不使用查询字符串并且不会携带身份验证标头。这些页面将在不可预知的目录中创建，所以我不提前知道 URL 模式。

**我该如何配置，以便从某个模板创建的*任何页面都将自动从调度程序缓存中排除？***

似乎 CQ 应该有一些机制来尊重 HTTP 响应/缓存标头。如果 HTTP 响应标头指定不应缓存响应，那么调度程序似乎不应该缓存它——不管 dispatcher.any 怎么说。这是我一直在参考[的 CQ5 文档。](http://dev.day.com/docs/en/cq/current/deploying/dispatcher.html)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-12T09:37:18.443

我不知道 Dispatcher 的 IIS 版本，但如果您添加自定义 HTTP 标头“dispatcher: nocache”，则肯定使用 Apache 模块，它不会在 Dispatcher 中缓存页面。您需要更改代码以添加此代码，类似于：

```
 request.setHeader("Dispatcher", "nocache"); 
```

它也可以用作 html 中的元标记，但我没有尝试过。

这记录在这里：[http ://dev.day.com/content/kb/home/Dispatcher/faq-s/DispatcherNoCache.html](http://dev.day.com/content/kb/home/Dispatcher/faq-s/DispatcherNoCache.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T21:46:21.510

您可以在模板的头部使用缓存控制标签。在此处查看有关 PRAGMA 和 Cache-Control 元标记的信息：[HTTP Cache-Control](https://stackoverflow.com/questions/4360283/http-cache-control)。

# android - 为什么我无法从 EditText 获取数据

> ID：12269872
> 
> 赞同：2
> 
> 时间：2012-09-04T19:11:22.160
> 
> 标签：android

我无法从 EditText 获取数据`fr1`。我在 中输入一些文本`fr1`，按下按钮`btn`，没有任何反应。文本视图`result`为空。为什么是空的？我做错了什么？谢谢。

```
public class MainActivity extends Activity{
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        EditText fr1 = (EditText) findViewById(R.id.fraction1);
        final TextView result = (TextView) findViewById(R.id.result);
        Button btn = (Button) findViewById(R.id.getresult);

        final String s = fr1.getText().toString();

        btn.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                // TODO Auto-generated method stub
                result.setText(s);
            }
        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T19:12:46.333

改变这个

```
final String s = fr1.getText().toString();
btn.setOnClickListener(new OnClickListener() {
    public void onClick(View v) {
        // TODO Auto-generated method stub
        result.setText(s);
    }
}); 
```

到

```
btn.setOnClickListener(new OnClickListener() {
    public void onClick(View v) {
        final String s = fr1.getText().toString();
        result.setText(s);
    }
}); 
```

您需要更改的原因是您没有从按钮单击上的 EditText 获取文本，而是在单击按钮之前（在 onCreate() 中），其中 EditText 可能具有空字符串作为文本。因此，您无法打印您键入的内容。现在您可以通过从 onClick() 中的 EditText 获取文本来找到解决的问题

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T19:14:53.213

您需要在单击按钮时检索文本，而不是在扩展`EditText`. 在后一种情况下，键入的文本将不可用。

移动

```
String s = fr1.getText().toString(); 
```

进入按钮`OnClickListener`，你应该很高兴。

# asp.net - 具有可以保存服务器控件的文本属性的 Web 控件

> ID：12269875
> 
> 赞同：0
> 
> 时间：2012-09-04T19:11:34.540
> 
> 标签：asp.net, vb.net

我正在设计一个控件，我需要它从一个具有可以包含服务器控件的文本属性的类继承。

这是一个示例来说明我要解释的内容

```
<asp:myCustomControl id="myCustomControl1" runat="server" someProperty="something">
    <asp:hyperlink id="myCustomControl1Hyperlink" runat="server" navigateUrl="someUrl">
        Click here
    </asp:hyperlink>
</asp:myCustomControl>

Protected Overrides Sub Render( _
    ByVal writer As HtmlTextWriter)

    If Not String.IsNullOrEmpty(Text) Then
        writer.Write( _
            "some html" + _
            Text + _
            "some other html"
        )
    End If

End Sub 
```

这样做的目的是我可以决定如何在我的控件的`render`功能中呈现控件，同时显示我的`Text`控件中的属性。

我的第一次尝试是继承自，`literal`因为这可以让我`<a>`在里面写标签没有任何问题。但是，最近我不得不`<a>`按标签更改`<asp:hyperlink>`标签，它会引发`'{0}' does not allow child controls.`异常。

所以我尝试更改它，使其继承自`panel`，但这次，在我的渲染函数中，我不能使用该`Text`属性，Me.Text 也不能​​，因为它们都不存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T19:16:17.783

你继承自`Control`Class，你解决所有问题

# php - Crypt 函数没有返回正确的密码

> ID：12269877
> 
> 赞同：0
> 
> 时间：2012-09-04T19:11:42.563
> 
> 标签：php, encryption, blowfish

我有一个使用 crypt 和 blowfish 的简单登录系统。但是，对于我的生活，我无法弄清楚为什么该函数没有生成存储在我的数据库中的注册密码。crypt 函数有什么问题？

这是密码注册到数据库中的时间。

```
function unique_md5() {

  mt_srand(microtime(true)*100000 + memory_get_usage(true));

  return md5(uniqid(mt_rand(), true));

}

if ($password == $password_again) {

$md5 = substr(unique_md5(), 0, 15);

$string = '$2a$07$' . $md5;

$password = trim($password);

$protected_password = crypt($password, $string);

//rest of code involved putting that $protected_password into database 
```

登录页面代码

```
$password = 'password';

echo '$2a$07$4cf0aa3a82e8d78$$$$$$.M4dWdC3N7OF.hphzfyswwszM7RFJUfu';

//the echo below echos out the exact same thing as the echo above, but the if statement 
//recognizes it as not equal to

echo $registered_password = registered_password($mysqli, $username);

if ($password == crypt($password, $registered_password))

    {

    echo 'Working';

    } else {

    echo 'Not working';

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T19:18:09.760

您使用的`crypt`功能错误。您需要将加密密码与 的结果进行比较`crypt`，而不是纯文本密码。

你的比较应该是这样的：

```
if ($encrypted_password_from_database == crypt($user_provided_password, $encrypted_password_from_database)) {
    // match
} else {
    // no match
} 
```

# css - 垂直列表子菜单定位问题

> ID：12269878
> 
> 赞同：1
> 
> 时间：2012-09-04T19:11:43.173
> 
> 标签：css, list

我有一个垂直的图像列表，悬停时它会显示一个包含 3-5 个以上图像的子菜单，这些图像是指向其他页面的链接。一切都很好；但是，如果我滚动远离页面顶部的任何位置并将鼠标悬停在列表项上，那么子菜单列表项不会像我不这样做时那样直接平行于主列表滚动并最初将鼠标悬停在列表上，子菜单直接正确显示在列表中的父项旁边。这只是一个 CSS 列表。

*向下滚动后，*我有两张好视图和坏视图的图像。

有任何想法吗？谢谢！

*工作截图，页面未滚动*

![](../Images/702af502ce317e08aaea82ed980d3d27.png)

*屏幕截图无效，页面滚动*

![](../Images/23032c88ae70c8b4ad2787563c63af8f.png)

**HTML**

```
<div id="navcontainer">
<ul>
<li><img src="graphics/nav_main_data_files.jpg" alt="">
     <ul class="nested">
         <li><a href="datauploaddatafiles.aspx"><img src="graphics/nav_sub_upload_data_file.jpg" alt=""></a></li>
         <li><a href="datarequestsamples.aspx"><img src="graphics/nav_sub_request_samples.jpg" alt=""></a></li>
         <li><a href="dataapprovesamples.aspx"><img src="graphics/nav_sub_approve_samples_data.jpg" alt=""></a></li>
     </ul>
         <li><img src="graphics/nav_main_job_tracking.jpg" alt="">
     <ul class="nested">
         <li><a href="jobtrackingschedule.aspx"> <img src="graphics/nav_sub_schedule_job.jpg" alt=""></a></li>
         <li><a href="jobtrackingsviewstatus.aspx"><img src="graphics/nav_sub_view_job_status.jpg" alt=""></a></li>
         <li><a href="jobtrackingsreviewproductiontotals.aspx"><img src="graphics/nav_sub_review_prod_totals.jpg" alt=""></a></li>
    </ul>
</li>
</ul>
</div> 
```

**CSS**

```
 #navcontainer ul { list-style-type: none; }

.nested
 {
     display: none;
     list-style: none;
}
li:hover > .nested
 {
    display: inline-block;
    position: fixed;
    padding-left: .5em;

}​ 
```

检查[http://jsfiddle.net/JVKLw/3/](http://jsfiddle.net/JVKLw/3/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T19:57:44.400

使用相对和绝对定位而不是固定（这是问题所在）。

*例子*

**HTML**

```
<div id="navcontainer">
<ul>
     <li><img src="http://www.incrementp.co.jp/ml/en/common/image/menu01_on.gif" alt="">
      <ul class="nested">
           <li><a href="datauploaddatafiles.aspx"><img src="http://www.incrementp.co.jp/ml/en/common/image/menu01_on.gif" alt=""></a></li>
           <li><a href="datarequestsamples.aspx"><img src="http://www.incrementp.co.jp/ml/en/common/image/menu01_on.gif" alt=""></a></li>
           <li><a href="dataapprovesamples.aspx"><img src="http://www.incrementp.co.jp/ml/en/common/image/menu01_on.gif" alt=""></a></li>
      </ul>
      </li>
          <li><img src="http://www.incrementp.co.jp/ml/en/common/image/menu01_on.gif" alt="">
      <ul class="nested">
           <li><a href="jobtrackingschedule.aspx"> <img src="http://www.incrementp.co.jp/ml/en/common/image/menu01_on.gif" alt=""></a></li>
           <li><a href="jobtrackingsviewstatus.aspx"><img src="http://www.incrementp.co.jp/ml/en/common/image/menu01_on.gif" alt=""></a></li>
           <li><a href="jobtrackingsreviewproductiontotals.aspx"><img src="http://www.incrementp.co.jp/ml/en/common/image/menu01_on.gif" alt=""></a></li>
      </ul>
      </li>
          <li><img src="http://www.incrementp.co.jp/ml/en/common/image/menu01_on.gif" alt="">
      <ul class="nested">
           <li><a href="jobtrackingschedule.aspx"> <img src="http://www.incrementp.co.jp/ml/en/common/image/menu01_on.gif" alt=""></a></li>
           <li><a href="jobtrackingsviewstatus.aspx"><img src="http://www.incrementp.co.jp/ml/en/common/image/menu01_on.gif" alt=""></a></li>
           <li><a href="jobtrackingsreviewproductiontotals.aspx"><img src="http://www.incrementp.co.jp/ml/en/common/image/menu01_on.gif" alt=""></a></li>
      </ul>
      </li>
          <li><img src="http://www.incrementp.co.jp/ml/en/common/image/menu01_on.gif" alt="">
      <ul class="nested">
           <li><a href="jobtrackingschedule.aspx"> <img src="http://www.incrementp.co.jp/ml/en/common/image/menu01_on.gif" alt=""></a></li>
           <li><a href="jobtrackingsviewstatus.aspx"><img src="http://www.incrementp.co.jp/ml/en/common/image/menu01_on.gif" alt=""></a></li>
           <li><a href="jobtrackingsreviewproductiontotals.aspx"><img src="http://www.incrementp.co.jp/ml/en/common/image/menu01_on.gif" alt=""></a></li>
      </ul>
      </li>
          <li><img src="http://www.incrementp.co.jp/ml/en/common/image/menu01_on.gif" alt="">
      <ul class="nested">
           <li><a href="jobtrackingschedule.aspx"> <img src="http://www.incrementp.co.jp/ml/en/common/image/menu01_on.gif" alt=""></a></li>
           <li><a href="jobtrackingsviewstatus.aspx"><img src="http://www.incrementp.co.jp/ml/en/common/image/menu01_on.gif" alt=""></a></li>
           <li><a href="jobtrackingsreviewproductiontotals.aspx"><img src="http://www.incrementp.co.jp/ml/en/common/image/menu01_on.gif" alt=""></a></li>
      </ul>
      </li>
          <li><img src="http://www.incrementp.co.jp/ml/en/common/image/menu01_on.gif" alt="">
      <ul class="nested">
           <li><a href="jobtrackingschedule.aspx"> <img src="http://www.incrementp.co.jp/ml/en/common/image/menu01_on.gif" alt=""></a></li>
           <li><a href="jobtrackingsviewstatus.aspx"><img src="http://www.incrementp.co.jp/ml/en/common/image/menu01_on.gif" alt=""></a></li>
           <li><a href="jobtrackingsreviewproductiontotals.aspx"><img src="http://www.incrementp.co.jp/ml/en/common/image/menu01_on.gif" alt=""></a></li>
      </ul>
      </li>
          <li><img src="http://www.incrementp.co.jp/ml/en/common/image/menu01_on.gif" alt="">
      <ul class="nested">
           <li><a href="jobtrackingschedule.aspx"> <img src="http://www.incrementp.co.jp/ml/en/common/image/menu01_on.gif" alt=""></a></li>
           <li><a href="jobtrackingsviewstatus.aspx"><img src="http://www.incrementp.co.jp/ml/en/common/image/menu01_on.gif" alt=""></a></li>
           <li><a href="jobtrackingsreviewproductiontotals.aspx"><img src="http://www.incrementp.co.jp/ml/en/common/image/menu01_on.gif" alt=""></a></li>
      </ul>
      </li>
          <li><img src="http://www.incrementp.co.jp/ml/en/common/image/menu01_on.gif" alt="">
      <ul class="nested">
           <li><a href="jobtrackingschedule.aspx"> <img src="http://www.incrementp.co.jp/ml/en/common/image/menu01_on.gif" alt=""></a></li>
           <li><a href="jobtrackingsviewstatus.aspx"><img src="http://www.incrementp.co.jp/ml/en/common/image/menu01_on.gif" alt=""></a></li>
           <li><a href="jobtrackingsreviewproductiontotals.aspx"><img src="http://www.incrementp.co.jp/ml/en/common/image/menu01_on.gif" alt=""></a></li>
      </ul>
      </li>
          <li><img src="http://www.incrementp.co.jp/ml/en/common/image/menu01_on.gif" alt="">
      <ul class="nested">
           <li><a href="jobtrackingschedule.aspx"> <img src="http://www.incrementp.co.jp/ml/en/common/image/menu01_on.gif" alt=""></a></li>
           <li><a href="jobtrackingsviewstatus.aspx"><img src="http://www.incrementp.co.jp/ml/en/common/image/menu01_on.gif" alt=""></a></li>
           <li><a href="jobtrackingsreviewproductiontotals.aspx"><img src="http://www.incrementp.co.jp/ml/en/common/image/menu01_on.gif" alt=""></a></li>
      </ul>
      </li>
          <li><img src="http://www.incrementp.co.jp/ml/en/common/image/menu01_on.gif" alt="">
      <ul class="nested">
           <li><a href="jobtrackingschedule.aspx"> <img src="http://www.incrementp.co.jp/ml/en/common/image/menu01_on.gif" alt=""></a></li>
           <li><a href="jobtrackingsviewstatus.aspx"><img src="http://www.incrementp.co.jp/ml/en/common/image/menu01_on.gif" alt=""></a></li>
           <li><a href="jobtrackingsreviewproductiontotals.aspx"><img src="http://www.incrementp.co.jp/ml/en/common/image/menu01_on.gif" alt=""></a></li>
      </ul>
      </li>
          <li><img src="http://www.incrementp.co.jp/ml/en/common/image/menu01_on.gif" alt="">
      <ul class="nested">
           <li><a href="jobtrackingschedule.aspx"> <img src="http://www.incrementp.co.jp/ml/en/common/image/menu01_on.gif" alt=""></a></li>
           <li><a href="jobtrackingsviewstatus.aspx"><img src="http://www.incrementp.co.jp/ml/en/common/image/menu01_on.gif" alt=""></a></li>
           <li><a href="jobtrackingsreviewproductiontotals.aspx"><img src="http://www.incrementp.co.jp/ml/en/common/image/menu01_on.gif" alt=""></a></li>
      </ul>
      </li>
          <li><img src="http://www.incrementp.co.jp/ml/en/common/image/menu01_on.gif" alt="">
      <ul class="nested">
           <li><a href="jobtrackingschedule.aspx"> <img src="http://www.incrementp.co.jp/ml/en/common/image/menu01_on.gif" alt=""></a></li>
           <li><a href="jobtrackingsviewstatus.aspx"><img src="http://www.incrementp.co.jp/ml/en/common/image/menu01_on.gif" alt=""></a></li>
           <li><a href="jobtrackingsreviewproductiontotals.aspx"><img src="http://www.incrementp.co.jp/ml/en/common/image/menu01_on.gif" alt=""></a></li>
      </ul>
      </li>
          <li><img src="http://www.incrementp.co.jp/ml/en/common/image/menu01_on.gif" alt="">
      <ul class="nested">
           <li><a href="jobtrackingschedule.aspx"> <img src="http://www.incrementp.co.jp/ml/en/common/image/menu01_on.gif" alt=""></a></li>
           <li><a href="jobtrackingsviewstatus.aspx"><img src="http://www.incrementp.co.jp/ml/en/common/image/menu01_on.gif" alt=""></a></li>
           <li><a href="jobtrackingsreviewproductiontotals.aspx"><img src="http://www.incrementp.co.jp/ml/en/common/image/menu01_on.gif" alt=""></a></li>
      </ul>
      </li>
          <li><img src="http://www.incrementp.co.jp/ml/en/common/image/menu01_on.gif" alt="">
      <ul class="nested">
           <li><a href="jobtrackingschedule.aspx"> <img src="http://www.incrementp.co.jp/ml/en/common/image/menu01_on.gif" alt=""></a></li>
           <li><a href="jobtrackingsviewstatus.aspx"><img src="http://www.incrementp.co.jp/ml/en/common/image/menu01_on.gif" alt=""></a></li>
           <li><a href="jobtrackingsreviewproductiontotals.aspx"><img src="http://www.incrementp.co.jp/ml/en/common/image/menu01_on.gif" alt=""></a></li>
      </ul>
    </li>
</ul>
</div>​ 
```

**CSS**

```
 #navcontainer ul { list-style-type: none; }

.nested
 {
     display: none;
     list-style: none;
}
ul li{
    position: relative;
}
li:hover > .nested
 {
    display: block;
    position: absolute;
    left: 210px;
    top: 0;
}​ 
```

# mysql - 将默认字符集更改为 utf-8：mysql

> ID：12269883
> 
> 赞同：1
> 
> 时间：2012-09-04T19:12:06.680
> 
> 标签：mysql

我正在开发一个使用 MySQL 数据库的应用程序。数据库包含某些无法编码到客户端的字符，我发现这些值为空。例如，包含特殊字符的字符串在客户端表示为 null。

我发现 db 的默认字符集是`latin1`，我将其更改为`utf-8`，包括所有表和这些表的各个列。同样在我的文章中，`pdo_construct`我提到了字符集是 utf-8，

```
$db = new PDO('mysql:dbname=$dbname;host=$dbhost;charset=utf8',$dbname,$dbhost); 
```

我还将响应标头配置为使用 utf-8 字符集。但是字符仍然没有编码，如果出现特殊字符，我仍然会得到空字符串。

我尝试通过设置默认字符集来更改 my.ini 文件配置，它在 PDO 构造的连接文件中出现错误。

我迫切需要解决这个问题！有人可以帮忙吗？

# javascript - 使用 JSTree contextmenu 捕获新创建的节点

> ID：12269884
> 
> 赞同：4
> 
> 时间：2012-09-04T19:12:09.383
> 
> 标签：javascript, events, event-handling, contextmenu, jstree

我正在尝试使用 jstree 的 contextmenu 捕获新创建的节点的名称。我可以捕获要在下面添加新节点的父节点的名称（使用 obj.text()），但是，我真正需要的是新创建的节点的名称。

所以，不知何故，需要有一个“onChange”事件可以在 jstree contextmenu 中调用，一旦用户在新创建的节点上点击 enter 就会触发？

有任何想法吗？我附上了上下文菜单代码：

```
}).jstree({
        json_data: {
            data: RBSTreeModel,
            ajax: {
                type: "POST",
                data: function (n) {
                    return {
                        NodeID: n.attr("id").substring(4),
                        Level: n.attr("name").substring(7)
                    };
                },
                url: function (node) {
                    return "/Audit/GetRequirementsTreeStructure";
                },
                success: function (new_data) {
                    return new_data;
                }
            }
        },
        contextmenu: {
            items: function($node) {
                return {
                    createItem : {
                        "label" : "Create New Branch",
                        "action" : function(obj) { this.create(obj); alert(obj.text())},
                        "_class" : "class"
                    },
                    renameItem : {
                        "label" : "Rename Branch",
                        "action" : function(obj) { this.rename(obj);}
                    },
                    deleteItem : {
                        "label" : "Remove Branch",
                        "action" : function(obj) { this.remove(obj); }
                    }
                };
            }
        },
        plugins: ["themes", "json_data", "ui", "crrm", "contextmenu"]
    }); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T20:42:01.793

您可以绑定到“create.jstree”事件，该事件将在创建节点后触发。在该事件的回调中，您将可以访问新创建的节点，并且可以选择回滚/还原创建节点操作。缺少它的文档，但[演示页面](http://www.jstree.com/demo)上有一个示例。这是来自我的代码的另一个示例：

```
}).jstree({... You jstree setup code...})
        .bind("create.jstree", function(e, data) {
            // use your dev tools to examine the data object
            // It is packed with lots of useful info
            // data.rslt is your new node
            if (data.rslt.parent == -1) {
                alert("Can not create new root directory");
                // Rollback/delete the newly created node
                $.jstree.rollback(data.rlbk);
                return;
            }
            if (!FileNameIsValid(data.rslt.name)) {
                alert("Invalid file name");
                // Rollback/delete the newly created node
                $.jstree.rollback(data.rlbk);
                return;
            }
            .. Your code etc...
        }) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-20T16:21:47.367

根据李博金的回答，似乎最新版本的 jsTree 使用事件“create_node”而不是“create”：

```
}).jstree({...你的jstree设置代码...})
      .bind(" create_node .jstree", function(e, data) {
        ...
       });

```

# javascript - 获取页面上所有缩短的 url

> ID：12269885
> 
> 赞同：1
> 
> 时间：2012-09-04T19:12:18.227
> 
> 标签：javascript, jquery

我想获取页面的所有缩短 URL。

我已经获得了页面上的所有 url，它们可能是长的还是短的。

如果这是不可能的，我将如何定义一个短网址？

即，我必须检查哪些标准/规则？

使用 JavaScript。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T19:19:33.393

无法自动检测缩短的 URL。这是因为它们只是像其他任何链接一样的普通链接。

您能做的最好的事情是获取一个缩短服务列表并将链接与该列表进行匹配。

据我所知，这将是唯一的选择，因为：

1.  您不能简单地检查长度，因为这会产生误报
2.  您不能简单地检查重定向，因为这也会产生误报。

[这里](http://longurl.org/services)有一个相当大的缩短服务列表，可能对您有用。

# javascript - Javascript对象颜色动态变化？

> ID：12269887
> 
> 赞同：3
> 
> 时间：2012-09-04T19:12:24.230
> 
> 标签：javascript, jquery, css, collision-detection, euclidean-distance

这是当两个球碰撞时将球的颜色变为红色的代码。我快到了，但我似乎没有找到故障，因为一个球没有改变颜色。请帮帮我！

```
 //generate a random number within a range
    function randomXToY(minVal,maxVal,floatVal)
    {
      var randVal = minVal+(Math.random()*(maxVal-minVal));
      return typeof floatVal=='undefined'?Math.round(randVal):randVal.toFixed(floatVal);
    }

    // The Ball class
    Ball = (function() {

      // constructor
      function Ball(x,y,radius,color){
        this.center = {x:x, y:y};  
        this.radius = radius;               
        this.color = color;
        this.dx = 2;               
        this.dy = 2;        
        this.boundaryHeight = $('#ground').height();
        this.boundaryWidth = $('#ground').width();

        this.dom  = $('<p class="circle"></p>').appendTo('#ground');

        // the rectange div a circle
        this.dom.width(radius*2);
        this.dom.height(radius*2);
        this.dom.css({'border-radius':radius,background:color});

        this.placeAtCenter(x,y);         
      }

      // Place the ball at center x, y
      Ball.prototype.placeAtCenter = function(x,y){
        this.dom.css({top: Math.round(y- this.radius), left: Math.round(x - this.radius)});
        this.center.x = Math.round(x);        
        this.center.y = Math.round(y);             
      };

      Ball.prototype.setColor = function(color) {
        if(color) {
          this.dom.css('background',color);
        } else {
          this.dom.css('background',this.color);
        }           
      };

      // move and bounce the ball
      Ball.prototype.move = function(){
        var diameter = this.radius * 2;                                               
        var radius = this.radius;  
        if (this.center.x - radius < 0 || this.center.x + radius > this.boundaryWidth ) {
          this.dx = -this.dx;
        }
        if (this.center.y - radius < 0 || this.center.y  + radius > this.boundaryHeight ) {
          this.dy = -this.dy;
        }
        this.placeAtCenter(this.center.x + this.dx ,this.center.y +this.dy);

      };

      return Ball;
    })();

    var number_of_balls = 5;
    var  balls = [];   
      var x; 
    var y;
    $('document').ready(function(){
      for (i = 0; i < number_of_balls; i++) { 
        var boundaryHeight = $('#ground').height();
        var boundaryWidth = $('#ground').width();
         y = randomXToY(30,boundaryHeight - 50);
         x = randomXToY(30,boundaryWidth - 50);
        var radius = randomXToY(15,30);
        balls.push(new Ball(x,y,radius, '#'+Math.floor(Math.random()*16777215).toString(16))); 
      }
      loop(); 
      check();

    });

    check = function(){
      for (var i = 0; i < balls.length; i++){

      for(var j=0;j<balls.length;j++){
        if (i!=j) {
          if (Math.pow(balls[j].center.x - balls[i].center.x, 2) + Math.pow(balls[j].center.y - balls[i].center.y, 2) <= Math.pow(balls[i].radius + balls[j].radius, 2)) {
            console.log(true);
            balls[j].setColor('red');
            balls[i].setColor('red');
          } else {
            balls[j].setColor(balls[j].color);

          } 
        }

     }}

       setTimeout(check,8);  
    };

    loop = function(){
      for (var i = 0; i < balls.length; i++){
        balls[i].move();
      }

      setTimeout(loop, 8);    
    }; 
```

这是 jsbin：http: [//jsbin.com/imofat/790/edit](http://jsbin.com/imofat/790/edit)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T19:34:39.177

球都在碰撞；碰撞的公式是正确的，即：

```
(dx * dx) + (dy * dy) <= sum of the circles' radii 
```

问题在于，由于 JavaScript 的单线程特性以及重置颜色的`else`部分，有时屏幕不会更新以反映新颜色。`if`

例如，`ball[0]`与 碰撞时`ball[1]`，将`ball[0]`的颜色设置`red`为`if`，**即可**。但是，如果`ball[0]` ***在内***循环的`ball[2]`下***一次******迭代***（ JavaScript 的单线程特性），在这种情况下你永远看不到颜色。`j=2` *`ball[0]`*`red`**

 **所以，你有两个选择。**1）**当发生碰撞时，它要么**[`break`](http://jsbin.com/imofat/829/edit)**在*内部*循环之外（如果你不需要测试每隔一个碰撞）；**2）**标记哪些球已经碰撞，并且只重置循环中以前从未碰撞过的那些球的颜色，使用`Array`，例如：

```
var collisions = [];
for (var i = 0; i < balls.length; i++) {
  for (var j = 0; j < balls.length; j++) {
    if (i!=j) {
      if (Math.pow(balls[j].center.x - balls[i].center.x, 2) + Math.pow(balls[j].center.y - balls[i].center.y, 2) <= Math.pow(balls[i].radius + balls[j].radius, 2)) {
        collisions[i] = true;
        balls[i].setColor('red');
      } else {
        if (!collisions[i]) {
          balls[i].setColor(balls[i].color);
        }
      } 
    }
  }
} 
```

此外，第二个循环可以简化为从 开始`i + 1`而不是`0`. 这样，您不仅可以减少碰撞测试的次数，还可以删除`i != j`测试。

**[演示](http://jsbin.com/imofat/820/edit)**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T19:39:49.483

如果你想让红色在碰撞发生后保持不变，你需要设置小球的颜色：

```
Ball.prototype.setColor = function(color) {        
    if(color) {
      this.color = color;  // The ball's color is now this value. 
      this.dom.css('background',color);
    } else {
      this.dom.css('background',this.color); // so when this is called, the ball will be that color going forward.
    }           
}; 
```**

# xslt - xslt中的二维分组和求和

> ID：12269889
> 
> 赞同：1
> 
> 时间：2012-09-04T19:12:27.170
> 
> 标签：xslt, xslt-1.0, xslt-grouping

我的输入 xml 就像

```
<Reports>
  <Report>  
    <ReportHeader>
      <Name>ABC</Name>
      <ReportNo>123</ReportNo>
    </ReportHeader>
    <ReportLine>
      <ReportNo>123</ReportNo>
      <LineGroup>XYZ</LineGroup>
      <LineAmount>10</LineAmount>
    <ReportLine>
    <ReportLine>
      <ReportNo>123</ReportNo>
      <LineGroup>PQR</LineGroup>
      <LineAmount>20</LineAmount>
    <ReportLine>
    <ReportLine>
    <ReportNo>123</ReportNo>
      <LineGroup>XYZ</LineGroup>
      <LineAmount>30</LineAmount>
    <ReportLine>
  </Report>
  <Report>
    <ReportHeader>
      <Name>DEF</Name>
      <ReportNo>456</ReportNo>
    </ReportHeader>
    <ReportLine>
      <ReportNo>456</ReportNo>
      <LineGroup>IJK</LineGroup>
      <LineAmount>40</LineAmount>
    <ReportLine>
    <ReportLine>
      <ReportNo>456</ReportNo>
      <LineGroup>XYZ</LineGroup>
      <LineAmount>50</LineAmount>
    <ReportLine>
    <ReportLine>
      <ReportNo>456</ReportNo>
      <LineGroup>IJK</LineGroup>
      <LineAmount>60</LineAmount>
    <ReportLine>
  </Report>
</Reports> 
```

我的输出 xml 就像

```
<NewReport>
  <Header>
    <Name>ABC</Name>
    <HeaderNo>456</HeaderNo>
  </Header>
  <Line>
    <LineGroup>XYZ</LineGroup>
    <Amount>40</Amount>
  </Line>
  <Line>
    <LineGroup>PQR</LineGroup>
    <Amount>20</Amount>
  </Line>
</NewReport>
<NewReport>
  <Header>
    <Name>DEF</Name>
    <HeaderNo>456</HeaderNo>
  </Header>
  <Line>
    <LineGroup>IJK</LineGroup>
    <Amount>100</Amount>
  </Line>
  <Line>
    <LineGroup>XYZ</LineGroup>
    <Amount>50</Amount>
  </Line>
</NewReport> 
```

我使用的 XSL 是

```
<xsl:key name="KLinesByGroup" match="/Reports/Report/ReportLine" use="LineGroup"/>
<xsl:key name="KLinesByReportNo" match="/Reports/Report/ReportLine" use="ReportNo"/>
<xsl:template match="/">
  <xsl:for-each select="/ns2:Reports/ns2:Report">
     <xsl:variable name="HeaderReportNo"><xsl:value-of select="ReportHeader/ReportNo"/></xsl:variable>
     <Header>
       <Name><xsl:value-of select="ReportHeader/Name"/></Name>
       <HeaderNo><xsl:value-of select="ReportHeader/ReportNo"/></HeaderNo>
       <xsl:apply-templates select="key('KLinesByReportNo', $HeaderReportNo)[1]" mode="reportno-mode"/>
     </Header>
  </xsl:for-each>
</xsl:template>

<xsl:template match="ReportLine" mode="reportno-mode">
  <xsl:apply-templates select="key('KLinesByReportNo', ReportNo)[generate-id() = generate-id(key('KLinesByGroup', LineGroup)[1])]" mode="group-mode"/>
</xsl:template>

<xsl:template match="ReportLine" mode="group-mode">
  <Line>
    <xsl:value-of select="sum(key('KLinesByGroup', LineGroup)/LineAmount)"/>
  </Line>
</xsl:template> 
```

但输出不是我所期望的。我得到的输出是在组级别或行级别添加所有金额，但不是在行和组级别。任何人都可以帮忙。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T02:41:16.890

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:key name="kLine" match="ReportLine"
  use="concat(../ReportHeader/Name, '+',
              ../ReportHeader/ReportNo, '+',
              ReportNo, '+',
              LineGroup
              )"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match=
    "ReportLine
      [not(generate-id()
          =
           generate-id(key('kLine',
                           concat(../ReportHeader/Name, '+',
                                  ../ReportHeader/ReportNo, '+',
                                  ReportNo, '+',
                                   LineGroup
                                  )
                          )
                          [1])
           )
      ]"/>

  <xsl:template match="LineAmount">
   <Amount>
     <xsl:value-of select=
     "sum(key('kLine',
              concat(../../ReportHeader/Name, '+',
                     ../../ReportHeader/ReportNo, '+',
                     ../ReportNo, '+',
                     ../LineGroup
                     )
             )
              /LineAmount
         )"/>
   </Amount>
  </xsl:template>

  <xsl:template match="ReportLine/ReportNo"/>

  <xsl:template match="/*"><xsl:apply-templates/></xsl:template>
  <xsl:template match="Report">
   <NewReport><xsl:apply-templates/></NewReport>
  </xsl:template>

  <xsl:template match="ReportHeader">
   <Header><xsl:apply-templates/></Header>
  </xsl:template>

  <xsl:template match="ReportNo">
   <HeaderNo><xsl:apply-templates/></HeaderNo>
  </xsl:template>

  <xsl:template match="ReportLine">
   <Line><xsl:apply-templates/></Line>
  </xsl:template>
</xsl:stylesheet> 
```

**当应用于提供的 XML（从几个格式错误的标签中更正）文档时：**

```
<Reports>
  <Report>
    <ReportHeader>
      <Name>ABC</Name>
      <ReportNo>123</ReportNo>
    </ReportHeader>
    <ReportLine>
      <ReportNo>123</ReportNo>
      <LineGroup>XYZ</LineGroup>
      <LineAmount>10</LineAmount>
    </ReportLine>
    <ReportLine>
      <ReportNo>123</ReportNo>
      <LineGroup>PQR</LineGroup>
      <LineAmount>20</LineAmount>
    </ReportLine>
    <ReportLine>
    <ReportNo>123</ReportNo>
      <LineGroup>XYZ</LineGroup>
      <LineAmount>30</LineAmount>
    </ReportLine>
  </Report>
  <Report>
    <ReportHeader>
      <Name>DEF</Name>
      <ReportNo>456</ReportNo>
    </ReportHeader>
    <ReportLine>
      <ReportNo>456</ReportNo>
      <LineGroup>IJK</LineGroup>
      <LineAmount>40</LineAmount>
    </ReportLine>
    <ReportLine>
      <ReportNo>456</ReportNo>
      <LineGroup>XYZ</LineGroup>
      <LineAmount>50</LineAmount>
    </ReportLine>
    <ReportLine>
      <ReportNo>456</ReportNo>
      <LineGroup>IJK</LineGroup>
      <LineAmount>60</LineAmount>
    </ReportLine>
  </Report>
</Reports> 
```

**产生想要的正确结果**：

```
<NewReport>
   <Header>
      <Name>ABC</Name>
      <HeaderNo>123</HeaderNo>
   </Header>
   <Line>
      <LineGroup>XYZ</LineGroup>
      <Amount>40</Amount>
   </Line>
   <Line>
      <LineGroup>PQR</LineGroup>
      <Amount>20</Amount>
   </Line>
</NewReport>
<NewReport>
   <Header>
      <Name>DEF</Name>
      <HeaderNo>456</HeaderNo>
   </Header>
   <Line>
      <LineGroup>IJK</LineGroup>
      <Amount>100</Amount>
   </Line>
   <Line>
      <LineGroup>XYZ</LineGroup>
      <Amount>50</Amount>
   </Line>
</NewReport> 
```

**说明**：

正确使用带有复合键和**[身份规则的](http://www.dpawson.co.uk/xsl/sect2/identity.html)****[Muenchian 分组方法](http://www.jenitennison.com/xslt/grouping/muenchian.html)**。

# c# - C# 使用 SearchResultCollection 枚举大量 AD 用户

> ID：12269892
> 
> 赞同：2
> 
> 时间：2012-09-04T19:12:45.777
> 
> 标签：c#, active-directory

所以我要做的是我在一个特定的广告组中有超过 1500 个用户，当我把他们拉下来时，我会被限制在我得到的人身上。我在 MSDN (http://msdn.microsoft.com/en-us/library/ms180907%28v=vs.80%29.aspx) 上看到了这篇文章，但是它执行了一个`FindOne()`，这样做需要 10 分钟以上的时间来拉取应用程序下用户。`ResultsCollection`我可以在 30 秒内打开应用程序 。

什么时候去处理

```
string Last_Name = userResults.Properties["sn"][0].ToString(); 
```

它返回错误：

> *指数超出范围。必须为非负数且小于集合的大小。\r\n参数名称: index"}*

我认为这存在找不到结果的问题，但是`ResultsCollection`包含所有 1000 个条目。任何帮助表示赞赏。谢谢！

注意：这些用户的姓不是空的，问题`resultCollection`是只返回 1 个属性，那就是`adpath`

```
DirectoryEntry dEntryhighlevel = new DirectoryEntry("LDAP://OU=Clients,OU=x,DC=h,DC=nt");

DirectorySearcher dSeacher = new DirectorySearcher(dEntryhighlevel);
dSeacher.Filter = "(&(objectClass=user)(memberof=CN=Users,,OU=Clients,OU=x,DC=h,DC=nt))";

uint rangeStep = 1000;
uint rangeLow = 1;
uint rangeHigh = rangeLow + (rangeStep -1);
bool lastQuery = false;
bool quitLoop = false;

do
{
    string attributeWithRange;

    if (!lastQuery)
    {
        attributeWithRange = String.Format("member;range={0}-{1}", rangeLow, rangeHigh);
    }
    else
    {
        attributeWithRange = String.Format("member;range={0}-*", rangeLow);
    }

    dSeacher.PropertiesToLoad.Clear();
    dSeacher.PropertiesToLoad.Add(attributeWithRange);

    SearchResultCollection resultCollection = dSeacher.FindAll();

    foreach (SearchResult userResults in resultCollection)
    {
        string Last_Name = userResults.Properties["sn"][0].ToString();
        string First_Name = userResults.Properties["givenname"][0].ToString();
        string userName = userResults.Properties["samAccountName"][0].ToString();
        string Email_Address = userResults.Properties["mail"][0].ToString();
        OriginalList.Add(Last_Name + "|" + First_Name + "|" + userName + "|" + Email_Address);

        if (userResults.Properties.Contains(attributeWithRange))
        {
            foreach (object obj in userResults.Properties[attributeWithRange])
            {
                Console.WriteLine(obj.GetType());

                if (obj.GetType().Equals(typeof(System.String)))
                {
                }
                else if (obj.GetType().Equals(typeof(System.Int32)))
                {
                }

                Console.WriteLine(obj.ToString());
            }

            if (lastQuery)
            {
                quitLoop = true;
            }
        }
        else
        {
           lastQuery = true;
        }

        if (!lastQuery)
        {
            rangeLow = rangeHigh + 1;
            rangeHigh = rangeLow + (rangeStep - 1);
        }
   }
}
while (!quitLoop); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T19:36:32.117

看来，如果您添加一个 PropertiesToLoad，它将不再加载任何其他属性。因此，在我的情况下，您必须指定要加载的所有属性。

```
dSeacher.PropertiesToLoad.Clear();
                dSeacher.PropertiesToLoad.Add(attributeWithRange);
                dSeacher.PropertiesToLoad.Add("givenname");
                dSeacher.PropertiesToLoad.Add("sn");
                dSeacher.PropertiesToLoad.Add("samAccountName");
                dSeacher.PropertiesToLoad.Add("mail"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T19:19:02.467

我不会走这条路的。通过对组的基本搜索来读取成员资格比像这样进行大型子树搜索更容易（并且更不容易出错）。

正如您所观察到的，当您尝试读取大型组的成员属性时，每次读取只会获得 1500 个值。让所有成员离开组的方法是通过一种通常称为“远程检索”的功能。我在这里提供了相关信息的链接：[Always getting 1500 member of distribution list using PowerShell](https://stackoverflow.com/questions/11984305/always-getting-1500-member-of-distribution-list-using-powershell/12099712#12099712)

# ruby-on-rails-3.1 - linux mageia 2捆绑安装错误

> ID：12269894
> 
> 赞同：0
> 
> 时间：2012-09-04T19:13:03.540
> 
> 标签：ruby-on-rails-3.1

尽管使用了本论坛中所述的所有方法，但我收到以下错误。我正在运行 mageia 2 linux

```
Installing sqlite3 (1.3.6) with native extensions /usr/lib/ruby/site_ruby/1.8/rubygems/installer.rb:533:in `build_extensions': ERROR: Failed to build gem native extension. (Gem::Installer::ExtensionBuildError)

    /usr/bin/ruby extconf.rb 
    checking for sqlite3.h... yes
    checking for sqlite3_libversion_number() in -lsqlite3... no
    sqlite3 is missing. Try 'port install sqlite3 +universal'
    or 'yum install sqlite-devel' and check your shared library search path (the
    location where your sqlite3 shared library is located).
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T15:11:15.350

在 64 位 Mageia 系统上，您必须使用

```
urpmi lib64sqlite3-devel 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T21:26:45.133

该问题对您的环境的信息有限，例如 ruby​​ 版本和您的初始命令是什么。因此，这个答案可能不完整。

错误指出：

`checking for sqlite3_libversion_number() in -lsqlite3... no sqlite3 is missing.`

这就是没有安装 sqlite3 gem 的原因。make 找不到 sqlite3 头文件。我不熟悉 Mageia Linxux 发行版，但它似乎基于 Mandriva。我相信如果您按照错误消息中的说明运行并运行：

`yum install sqlite-devel`

sqlite-devel 将安装，您将能够执行原始`gem install sqlite3`或`bundle`命令。

# excel - 在 Excel 中查找差异

> ID：12269903
> 
> 赞同：0
> 
> 时间：2012-09-04T19:13:34.307
> 
> 标签：excel, conditional, formatting

我有一个电子表格，其中有一列员工姓名和另一列职称。

如果名称类别中的值相同，我试图在职称列中查找不同的值。例如，如果 J. Smith 被列出两次，但一次是 Technician III，另一次是 Technician 头衔，两个头衔都会突出显示（或其他一些标志来吸引我注意差异。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T23:41:11.323

最快和最简单的方法是添加第三列来“标记”不一致。

假设像'J Smith'这样的名字在A列，标题在B列，下面的公式可以放在单元格C2中并向下拖动。

```
=IF(COUNTIFS(A:A,A2,B:B,"<>"&B2)>0,"This name has multiple titles","") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T07:29:03.327

您也可以使用条件格式来解决这个问题。因为据我了解，您想让自己更容易删除*错误*的重复项。

使用“重复”预设突出显示*名称*列中的所有重复项，然后通过突出显示此列过滤您的数据，这样您就会遇到所有麻烦的行。

# ruby - 用两个相同的键名（数组）展平散列

> ID：12269910
> 
> 赞同：0
> 
> 时间：2012-09-04T19:14:10.690
> 
> 标签：ruby, arrays, hash

我喜欢这里显示的方法 - [https://stackoverflow.com/a/9648410/1646893](https://stackoverflow.com/a/9648410/1646893)，我想在我的情况下使用它。如果我们有这样的事情怎么办：

```
{"a"=>{"b"=>"111", "c"=>"9", "d"=>{"ff"=>{"uu"=>[{"q"=>"77", "r"=>{"w"=>"66"}, "j"=>{"@l"=>"44"}}, {"q"=>"78", "r"=>{"w"=>"67"}, "j"=>{"@l"=>"45"}}]}, "@e"=>"56"}, "@b1"=>"01", "@b2"=>"02", "@b3"=>"03"}} 
```

当我尝试使用我们的方法时：

```
{["a", "b"]=>"111", ["a", "c"]=>"9", ["a", "d", "ff", "uu"]=>[{"q"=>"77", "r"=>{"w"=>"66"}, "j"=>{"@l"=>"44"}}, {"q"=>"78", "r"=>{"w"=>"67"}, "j"=>{"@l"=>"45"}}], ["a", "d", "@e"]=>"56", ["a", "@b1"]=>"01", ["a", "@b2"]=>"02", ["a", "@b3"]=>"03"} 
```

结果是一个包含 2 个值的数组：

```
[{"q"=>"77", "r"=>{"w"=>"66"}, "j"=>{"@l"=>"44"}}, {"q"=>"78", "r"=>{"w"=>"66"}, "j"=>{"@l"=>"44"}}] 
```

这就是我想要得到的：

```
["a", "d", "ff", "uu", "q0", "w0", "j0", "@l0"]=>"44" 
```

等等

也许我应该在使用 flat_hash 方法之前更改键名？我应该怎么做才能得到没有数组和键名的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T21:05:18.660

这是我的答案，它产生了我认为比您要求的更好的输出。如果您绝对迫切需要您所要求的输出，请说出来，也许我会提供一个产生它的变体。

```
class Hash;  def each_with_key; each{ |k,v|            yield(v,k) }; end; end
class Array; def each_with_key; each.with_index{ |v,i| yield(v,i) }; end; end

def path_to_values(hash)
  {}.tap do |result|
    crawl = ->(o,chain=[]) do
      o.each_with_key do |v,k|
        path = chain + [k]
        (v.is_a?(Hash) || v.is_a?(Array)) ? crawl[v,path] : result[path] = v
      end
    end
    crawl[hash]
  end
end 
```

在行动中看到：

```
h = {
  "a" => {
    "b"=>"111", "c"=>"9",
    "d"=>{
      "ff"=>{
        "uu"=>[
          { "q"=>"77",
            "r"=>{"w"=>"66"},
            "j"=>{"@l"=>"44"}},
          { "q"=>"78",
            "r"=>{"w"=>"67"},
            "j"=>{"@l"=>"45"}}
        ]
      },
      "@e"=>"56"
    },
    "@b1"=>"01", "@b2"=>"02", "@b3"=>"03"
  }
}
require 'pp'
pp path_to_values(h)
#=> {["a", "b"]=>"111",
#=>  ["a", "c"]=>"9",
#=>  ["a", "d", "ff", "uu", 0, "q"]=>"77",
#=>  ["a", "d", "ff", "uu", 0, "r", "w"]=>"66",
#=>  ["a", "d", "ff", "uu", 0, "j", "@l"]=>"44",
#=>  ["a", "d", "ff", "uu", 1, "q"]=>"78",
#=>  ["a", "d", "ff", "uu", 1, "r", "w"]=>"67",
#=>  ["a", "d", "ff", "uu", 1, "j", "@l"]=>"45",
#=>  ["a", "d", "@e"]=>"56",
#=>  ["a", "@b1"]=>"01",
#=>  ["a", "@b2"]=>"02",
#=>  ["a", "@b3"]=>"03"} 
```

# php - 如何伪造 $_FILES 并愚弄 move_uploaded_file()？

> ID：12269913
> 
> 赞同：1
> 
> 时间：2012-09-04T19:14:29.570
> 
> 标签：php, upload

我正在扩展一个自定义平台，该平台对上传的文件进行 500 多行测试。由于未来的更新，我不想复制粘贴这些测试。

除了从内部调用页面但通过 cURL 上传图像之外，我还能做任何其他事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T15:41:14.430

我最终`$_POST`通过 cURL 将同一页面内的 vars 重新提交给自身。

# ios - 动画更新视图

> ID：12269914
> 
> 赞同：0
> 
> 时间：2012-09-04T19:14:34.777
> 
> 标签：ios, animation, uiviewcontroller

我有一个 UIViewController 代表问一个问题，比如你喜欢选项 A 还是选项 B（每个按钮都是一个图像）。然后当用户选择其中之一时，我将问题更改为您更喜欢选项 C 还是选项 D？现在视图保持不变，但图像和相关信息可以更改。因此我的问题是这样的：

就在问我做的问题之前：

```
[self updateView]; 
```

我想知道这是否可以通过例如翻转屏幕来制作动画。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T20:15:05.027

将其包装在动画中：

```
[UIView transitionWithView:self.view duration:1 options:UIViewAnimationOptionTransitionCurlUp animations:^{

    [self updateView];

}]; 
```

您可以使用的其他转换是：

*   `UIViewAnimationOptionTransitionCrossDissolve`
*   `UIViewAnimationOptionTransitionCurlDown`
*   `UIViewAnimationOptionTransitionCurlUp`
*   `UIViewAnimationOptionTransitionFlipFromBottom`
*   `UIViewAnimationOptionTransitionFlipFromLeft`
*   `UIViewAnimationOptionTransitionFlipFromRight`
*   `UIViewAnimationOptionTransitionFlipFromTop`

# ios - 通过 Whatsapp 或 Facebook 收件箱分享图片

> ID：12269918
> 
> 赞同：-1
> 
> 时间：2012-09-04T19:14:58.647
> 
> 标签：ios, facebook, share, whatsapp

我使用的是 Android，我看到可以从相机胶卷中选择一张照片并通过 whatsapp 分享。

iOS可以吗？我可以在我的 iOS 应用中实现这个功能吗？否则我可以在我的应用程序中选择一张照片并通过 Facebook 收件箱分享吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T19:30:46.370

查看[这个](http://www.edumobile.org/iphone/iphone-programming-tutorials/use-camera-and-photo-library-in-iphone/)小教程，了解如何从相机胶卷中挑选图像或从相机中拍照。然后您可以实现通过 Facebook、电子邮件、Twitter 等分享图片的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-20T15:53:04.907

Whatsapp 现在有一个集成

[https://www.whatsapp.com/faq/iphone/23559013](https://www.whatsapp.com/faq/iphone/23559013)

# sql-server - TSQL 查询中的尾随空格是怎么回事？

> ID：12269919
> 
> 赞同：4
> 
> 时间：2012-09-04T19:15:05.527
> 
> 标签：sql-server, tsql

例如，如果我有这些数据：

```
CREATE TABLE FooBar ( Name varchar(16) )

INSERT FooBar SELECT 'test@test.com' 
```

以下查询不会返回我期望的结果：

```
SELECT * FROM FooBar WHERE Name = 'test@test.com       '  -- Returns the row

SELECT * FROM FooBar WHERE Name LIKE 'test@test.com '  -- Nothing Returned

SELECT * FROM FooBar WHERE Name = ' test@test.com' -- Nothing Returned 
```

为什么`=`（我假设这意味着完全等于）最后有额外的空间返回数据，而 a`LIKE`没有？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T19:18:08.863

Seing the standard it depends on **padding** (The ANSI standard requires padding for the character strings used in comparisons so that their lengths match before comparing them)

> SQL Server follows the ANSI/ISO SQL-92 specification (Section 8.2, , General rules #3) on how to compare strings with spaces. The ANSI standard requires padding for the character strings used in comparisons so that their lengths match before comparing them. The padding directly affects the semantics of WHERE and HAVING clause predicates and other Transact-SQL string comparisons. For example, Transact-SQL considers the strings 'abc' and 'abc ' to be equivalent for most comparison operations.
> 
> The only exception to this rule is the LIKE predicate. When the right side of a LIKE predicate expression features a value with a trailing space, SQL Server does not pad the two values to the same length before the comparison occurs. Because the purpose of the LIKE predicate, by definition, is to facilitate pattern searches rather than simple string equality tests, this does not violate the section of the ANSI SQL-92 specification mentioned earlier.

See also [how SQL Server compares strings with trailing spaces](http://support.microsoft.com/kb/316626)

# jquery - jQuery：fadeOut 0 毫秒或接近零持续时间

> ID：12269928
> 
> 赞同：0
> 
> 时间：2012-09-04T19:15:56.400
> 
> 标签：jquery, fadein, fade, fadeout, duration

我很好奇我是否可以设置`fadeOut(10, function(){...});`- 十毫秒的持续时间。我检查了 jQuery 官方网站，但找不到答案该值可以是任何非负数还是适用一些限制（您输入 10(ms)，但实际上是 100ms）。另外，可以使用零吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T19:50:17.867

看看[$.fx.interval](http://api.jquery.com/jQuery.fx.interval/)。jQuery FX Core 使用这个值来确定每秒动画运行的帧数。它默认为 13 毫秒，但是可以更改 - 尽管这可能会影响性能，具体取决于浏览器和 JS 引擎的功能。

设置小于此值的持续时间将导致动画持续时间相当于直接使用 0 或 $.hide()。

看看这个[JSFiddle](http://jsfiddle.net/K7bAt/1/)并注意控制台如何显示 $.fadeOut() 的完成，以便它们出现在脚本中而不是值中，因为它们实际上都是 0，因为它们低于默认值 $.fx.interval价值。

# php - CURLOPT_RETURNTRANSFER 设置为 true 在托管服务器上不起作用

> ID：12269929
> 
> 赞同：20
> 
> 时间：2012-09-04T19:15:58.153
> 
> 标签：php, curl

我正在尝试处理结果`$data = curl_exec($ch);`而不是将其打印在屏幕上。为了实现这一点，我将选项设置`CURLOPT_RETURNTRANSFER`为`true`：

```
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE); 
```

在我的本地服务器上，这按预期工作，但是当我将相同的文件在线放在我的服务器上时，它不起作用。

当我设置`CURLOPT_RETURNTRANSFER`它`false`工作。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-04T20:58:02.103

如果设置`CURLOPT_RETURNTRANSFER`为`true`or`1`则返回值 from`curl_exec`将是成功操作的实际结果。换句话说，它不会`TRUE`成功返回。虽然它会`FALSE`在失败时返回。

如`curl-exec`PHP 手册页的返回值部分所述：http: [//php.net/manual/function.curl-exec.php](http://php.net/manual/function.curl-exec.php)

您应该启用重定向选项，但如果您的服务器在和/或有效，`CURLOPT_FOLLOWLOCATION`这将是一个问题，这也可能导致 curl 问题。`safe_mode``open_basedir`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-10-29T07:33:37.100

如果它在您的本地环境中运行良好，则您的远程服务器的 IP 可能被您设置为 cURL 使用的目标 URL 的服务器阻止。您需要*验证您的远程服务器是否被允许访问您为**CURLOPT_URL***设置的 URL 。

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2017-10-09T12:31:41.080

试试这一行：

```
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false); 
```

后：

```
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true); 
```

# python - Python - 从 HTTP / 浏览器中提取主要语言代码

> ID：12269933
> 
> 赞同：3
> 
> 时间：2012-09-04T19:16:22.167
> 
> 标签：python, django, http-accept-language

我需要一种方法来确定浏览器中设置的主要语言。我为 PHP 找到了一个非常好的解决方案，但不幸的是我使用的是 Django/Python。

我认为该信息在 HTTP 请求的 HTTP_ACCEPT_LANGUAGE 属性中。

对我有什么想法或现成的功能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T19:18:18.553

You are looking for the [`request.META` dictionary](https://docs.djangoproject.com/en/stable/ref/request-response/#django.http.HttpRequest.META):

```
print request.META['HTTP_ACCEPT_LANGUAGE'] 
```

The [WebOb project](http://webob.org/), a lightweight web framework, includes a handy [accept parser](https://docs.pylonsproject.org/projects/webob/en/latest/api/webob.html#module-webob.acceptparse) that you could reuse in this case:

```
from webob.acceptparse import Accept

language_accept = Accept(request.META['HTTP_ACCEPT_LANGUAGE'])
print language_accept.best_match(('en', 'de', 'fr'))
print 'en' in language_accept 
```

Note that installing the WebOb package won't interfere with Django's functionality, we are just re-using a class from the package here that happens to be very useful.

A short demo is always more illustrative:

```
>>> header = 'en-us,en;q=0.5'
>>> from webob.acceptparse import Accept
>>> lang = Accept(header)
>>> 'en' in lang
True
>>> 'fr' in lang
False
>>> lang.best_match(('en', 'de', 'fr'))
'en' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-17T18:15:13.357

这是我使用的一个功能，那是我的创作自我。

```
def language(self):
        if 'HTTP_ACCEPT_LANGUAGE' in self._request.META:
            lang = self._request.META['HTTP_ACCEPT_LANGUAGE']
            return str(lang[:2])
        else:
            return 'en' 
```

就叫吧。

# c# - 锁定会防止错误“该进程无法访问该文件，因为它正在被另一个进程使用”吗？

> ID：12269935
> 
> 赞同：9
> 
> 时间：2012-09-04T19:16:34.927
> 
> 标签：c#, asp.net, deadlock

这是我的日志写入功能：

```
public static void WriteLog(string source, string message)
{
    string logFilePath = @"C:\LogFile\log.txt";
    using (StreamWriter sw = new StreamWriter(logFilePath, true))
    {
        sw.Write(source + ": :" + message);
    }
} 
```

但是这段代码有时会导致我出现错误：

> 该进程无法访问该文件，因为它正被另一个进程使用

所以我修改了我的代码，这是我的新代码：

```
public static void WriteLog(string source, string message)
{
    object _lock = new object();
    lock (_lock)
    {
        string logFilePath = @"C:\LogFile\log.txt";
        using (StreamWriter sw = new StreamWriter(logFilePath, true))
        {
            sw.Write(source + ": :" + message);
        }
    }
} 
```

虽然使用此代码后我没有收到错误消息。但是我仍然只是想知道这是否是使用锁来防止由于死锁引起的此类错误的正确方法，以及我使用锁的方式是否正确。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-04T19:21:08.427

您在第二个示例中使用 lock 无论如何都不会正常工作，因为您创建了一个新的锁定对象并每次都锁定它。

你真正想要的文件是这样的：

```
public static void WriteLog(string source, string message)
    {
        string logFilePath = @"C:\LogFile\log.txt";

        using (FileStream file = new FileStream(logFilePath,FileMode.Append,FileAccess.Write,FileShare.None)) 
        {
            StreamWriter writer = new StreamWriter(file);

            writer.write(source + ": : " + message);

            file.Flush();
            file.Close();
        }
    } 
```

这应该在您写入时专门锁定文件，但一旦完成，就会正确关闭文件。

这并不能解决线程问题，因为两个线程仍然可能发生冲突。如果一个线程锁定文件，后续请求将失败。

要使用锁解决此问题，请将锁对象移动到所有线程都可以共享和锁定的静态对象，例如：

```
public static class Logger
{

    private static object locker = new object();

    public static void Log(string source, string message)
    {
        lock (locker) 
        {
            string logFilePath = @"C:\LogFile\log.txt";

            using (FileStream file = new FileStream(logFilePath,FileMode.Append,FileAccess.Write,FileShare.None)) 
            {
                StreamWriter writer = new StreamWriter(file);

                writer.write(source + ": : " + message);   
                writer.Flush();

                file.Close();
            }
        }
    }

} 
```

这将导致后续线程等待，直到锁变得可用，然后再按最初预期写入文件。

请注意 Oded 的评论，但仍然适用于此方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T19:22:55.450

使用[log4net](http://logging.apache.org/log4net/download_log4net.cgi)或[Enterprise Library 中的 Logging Application Block](http://msdn.microsoft.com/en-us/library/ff632023.aspx)。这肯定会对您有所帮助，因为他们已经缓冲了对文件的写入。

您可以在 Internet 上找到大量示例。

# html - 如何让文本在上方和下方的 div 周围流动？

> ID：12269937
> 
> 赞同：2
> 
> 时间：2012-09-04T19:16:39.807
> 
> 标签：html, css, styles

我想基本上有这个：

```
-----------------------------------------------------------------
|                                                               |
| Text Text Text Text Text Text Text Text Text Text Text Text   |
| Text Text Text Text Text Text Text Text Text Text Text Text   |
|---------------------| Text Text Text Text Text Text Text Text |
|                     | Text Text Text Text Text Text Text Text |
|     DIV             | Text Text Text Text Text Text Text Text |
|                     | Text Text Text Text Text Text Text Text |
|---------------------| Text Text Text Text Text Text Text Text |
| Text Text Text Text Text Text Text Text Text Text Text Text   |
| Text Text Text Text Text Text Text Text Text Text Text Text   |
----------------------------------------------------------------- 
```

将 div 向左浮动并让文本在其下方流动很容易，但我也需要文本从其上方的左侧流动。

这是我到目前为止所拥有的，我只是不知道从这里去哪里：http: [//jsfiddle.net/x7HFZ/2/](http://jsfiddle.net/x7HFZ/2/)

此外，文本将是动态的，我需要固定 div 的位置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T19:20:56.420

将 div 放在文本中间：

[http://jsfiddle.net/GolezTrol/x7HFZ/14/](http://jsfiddle.net/GolezTrol/x7HFZ/14/)

# razor - 从 umbraco 中的 razor 宏获取堆栈跟踪

> ID：12269939
> 
> 赞同：8
> 
> 时间：2012-09-04T19:16:46.163
> 
> 标签：razor, umbraco

我继承了一个基于 umbraco 的代码库。它使用剃刀脚本来呈现视图。

每当出现错误时，我都会在输出中得到类似的内容：

```
Error loading Razor Script Product.cshtml
String reference not set to an instance of a String. Parameter name: s 
```

如您所见，这在帮助识别错误方面毫无用处。

我不知道这是一个 umbraco 还是 razor 问题（我第一次使用）有没有办法可以打开正确的堆栈跟踪？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-04T19:24:29.307

放入`umbDebugShowTrace=true`您的查询字符串以查看完整的堆栈跟踪。确保在您的 appSettings`umbracoDebugMode`中设置为`true`并启用跟踪。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T14:53:50.380

[在 Visual Studio 中创建一个网站项目](http://our.umbraco.org/wiki/how-tos/getting-started-with-umbraco-what-is-next-after-you-install/setting-up-your-project-in-visual-studio)并在其中使用 Razor 脚本是一个非常好的主意。您可以`Debug > Attach to Process`设置断点、监视、单步执行代码等，就像任何其他程序一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-15T03:10:46.000

添加到 Sebastiaan 的帖子中，您在主 web.config 中为 Umbraco 安装设置`umbracoDebug`和`trace`to 。`true`这提供了有关错误的更完整信息。

# bash - Bash 脚本到 PowerShell

> ID：12269940
> 
> 赞同：1
> 
> 时间：2012-09-04T19:16:55.363
> 
> 标签：bash, powershell, curl

这在 Bash 中意味着什么？

```
 INFO=$(curl_with_log -F "sub=upload" \ -F "filecontent=@$FILE;filename=$DESTFILE" \ -F "login=$USER" -F "password=$PASSWORD" "$UPLOAD_URL") || return 
```

我试图在 powershell 中做同样的事情，我大部分都得到了它，我只需要知道这部分在做什么。

```
\ -F "filecontent=@$FILE;filename=$DESTFILE" \ 
```

我认为@$ 有一些奇怪的地方，但我不确定它实际上在做什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T19:40:46.187

没有什么奇怪的事情发生，`@`bash 根本不会解释。

```
themel@kallisti: ~ $ FILE=foo
themel@kallisti: ~ $ echo @$FILE
@foo 
```

这很可能由 curl 解释，其中`@somewhere`通常表示“[文件的内容`somehwere`](http://curl.haxx.se/docs/manpage.html#-F)”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T19:46:20.837

有关 Curl 选项的完整列表，请查看此站点：[http ://curl.haxx.se/docs/manpage.html](http://curl.haxx.se/docs/manpage.html)

在 -F 下你会发现：

> 您还可以通过设置 filename= 显式更改文件上传部分的名称字段，如下所示：
> 
> `curl -F "file=@localfile;filename=nameinpost" url.com`

# excel - URLDownloadToFile - 下载的文件中缺少数据

> ID：12269941
> 
> 赞同：2
> 
> 时间：2012-09-04T19:16:58.740
> 
> 标签：excel, vba

在 VBA 中使用`URLDownloadToFile`，我正在尝试下载文件。问题是正在下载一个空白文件。知道为什么数据丢失了吗？

```
Option Explicit 

Private Declare Function URLDownloadToFile Lib "urlmon" _ 
Alias "URLDownloadToFileA" (ByVal pCaller As Long, _ 
ByVal szURL As String, ByVal szFileName As String, _ 
ByVal dwReserved As Long, ByVal lpfnCB As Long) As Long 

Dim Ret As Long 

Sub Sample()

Dim strURL As String 
Dim strPath As String 

strURL = "https://abc.abcabc.com/cmif-ku/reports/2012/byOwningEntity/Excel/myfilename.xls" 

strPath = "C:\Temp\myfilename.xls" 

Ret = URLDownloadToFile(0, strURL, strPath, 0, 0) 

If Ret = 0 Then 
    MsgBox "File successfully downloaded" 
Else 
    MsgBox "Unable to download the file" 
End If

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-24T13:15:14.510

我有一个类似的问题。我使用以下代码，但收到“溢出”消息：

```
Sub downloadFile()
    Dim targetFile As String, targetUrl As String, returnVal As Integer
    target = "http://www.ishares.com/us/products/239454/ishares-20-year-treasury-bond-etf/1395165510757.ajax?fileType=xls&fileName=iShares-20-Year-Treasury-Bond-ETF"
    strSavePath = "C:\testdownload.txt"
    returnVal = URLDownloadToFile(0, target, strSavePath, 0, 0)
    If returnVal = 0 Then
        Debug.Print "Download ok!"
    Else
        Debug.Print "Error"
    End If
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-10T18:25:40.993

你有一个溢出，因为你使用一个整数来收集一个长值。urldownloadtofile 返回一个长值。如果您的下载成功，您将收到“0”。那么你的代码就可以工作了。

# node.js - 使用zombie.js 运行 jasmine-node 并出现超时错误

> ID：12269943
> 
> 赞同：3
> 
> 时间：2012-09-04T19:17:24.497
> 
> 标签：node.js, jasmine, zombie.js

这是我正在使用的代码

```
var sys, zombie,site;
zombie = require('zombie');
sys = require('sys');
site = "https://somesite.co.il"

describe("testing site: "+site, function() {

  it('responds 200 OK', function() {
    zombie.visit(site, function(err, browser) {
      expect(browser.statusCode).toEqual(200);

      //This method is a part of jasmine-node
      asyncSpecDone();
    });
  });

  it('title should be a specfiic title', function() {
    zombie.visit(site, function(err, browser) {
      expect(browser.text('title')).toEqual('טקסט בעברית');
      //console.log(browser.text('title'));

      asyncSpecDone();
    });
  });

  it("should fail logging with wrong password", function(err, browser){

    zombie.visit(site,{debug:true},function(err,browser){
        browser.
            fill("#email","us...@gmail.com").
            fill("#password", "aaa").
            pressButton(".loginbutton", function(){

                //console.log(browser.text("#errorarealogin"));
                expect(browser.text("#errorarealogin")).toContain("שגויים");

                //assert.equal(browser.text("title"),"טקסט בעברית")
                //asyncSpecDone();
                expect(browser.html("#errorarealogin")).toBeDefined();  
                });
        expect(browser.text("#errorarealogin")).toContain("שגויים");
        expect(browser.html("#errorarealogin")).toBeDefined();       
     asyncSpecDone();        
    //console.log("should fail logging with wrong password");
    //asyncSpecDone();
    })
  })

  it("should succeedin logging in",function(){
    zombie.visit(site,{debug:true},function(err,browser){
        browser.
            fill("#email","us...@gmail.com").
            fill("#password", "password").
            pressButton(".loginbutton", function(){

                //assert.equal(browser.text("title"),"טקסט בעברית")
                });
            expect(browser.success).toBeTruthy();
            asyncSpecDone();
        })
  })

  afterEach(function() {
    //So is this.
    asyncSpecWait();
  });
}); 
```

这是我从 jasmine-node 得到的结果（没有调试网络信息）：

```
testing site: https://somesites.co.il
  responds 200 OK
  title should be a specific title
  should fail logging with wrong password
  should succeedin logging in

Failures:

  1) should fail logging with wrong password
   Message:
     Expected '' to contain 'שגויים'.
   Stacktrace:
     Error: Expected '' to contain 'שגויים'.
    at new jasmine.ExpectationResult (D:\Users\Alonisser\AppData\Roaming\npm\node_modules\jasmine-node\lib\jasmine-node/
jasmine-2.0.0.rc1.js:102:32)
    at null.toContain (D:\Users\Alonisser\AppData\Roaming\npm\node_modules\jasmine-node\lib\jasmine-node/jasmine-2.0.0.r
c1.js:1171:29)
    at zombie.visit.debug (D:\Users\Alonisser\workspace\zombie\zombieSpec.js:47:49)
    at Browser.visit (D:\Users\Alonisser\node_modules\zombie\lib\zombie\browser.js:339:16)
    at Browser.wait (D:\Users\Alonisser\node_modules\zombie\lib\zombie\browser.js:192:16)
    at EventLoop.wait.done (D:\Users\Alonisser\node_modules\zombie\lib\zombie\eventloop.js:202:18)
    at process.startup.processNextTick.process._tickCallback (node.js:244:9)

  2) should fail logging with wrong password
   Message:
     timeout: timed out after 5000 msec waiting for spec to complete
   Stacktrace:
     undefined

Finished in 18.1 seconds 
```

我究竟做错了什么？我验证了 div id 是正确的，并且它确实包含特定的文本，但是即使我注释掉了整个期望的东西，它也会失败，我自己也想不出这个。谢谢您的帮助

**更新：**我确实知道这是一些异步问题，因为用 browser.log（如 console.log）乱扔代码，我可以看到它的内部`pressButton`是在它下面的代码之后处理的。但我不知道如何解决它，尝试`browser.wait()`在里面添加功能，`pressButton()`但这也无济于事。我也尝试像这样设置 waitFor 函数属性，`waitFor=15000`但这也无济于事。

也许我应该换成摩卡咖啡，也许这对我更好

**另一个更新**：mocha 没有帮助，因为这里或谷歌小组中缺乏帮助，我搬到了 casper.js（基于 phantomjs），它工作得更好（至少对我来说）。不怪我以外的任何人，但这里缺乏强大的社区对我不利。猜猜这个问题已经结束了。如果出现正确答案，我也会奖励正确的答案，只是为了纯粹的好奇

# android - 安卓数组列表 在活动之间传递

> ID：12269944
> 
> 赞同：1
> 
> 时间：2012-09-04T19:17:34.210
> 
> 标签：android, location, serializable, parcelable

我有简单的 Track 类，它存储有关路线的信息：

```
import java.io.Serializable;
import java.util.ArrayList;
import java.util.Date;

import android.location.Location;

public class Track implements Serializable {
    private static final long serialVersionUID = -5317697499269650204L;

    private Date date;
    private String name;
    private int time;
    private double distance, speed;
    private ArrayList<Location> route;

    public Track(String name, int time, double distance, ArrayList<Location> route) {
        this.date = new Date();
        this.name = name;
        this.time = time;
        this.distance = distance;
        this.speed = distance / (time / 3600.);
        this.route = route;
    }

    public String getDate() {
        return String.format("Date: %1$td-%1$tb-%1$tY%nTime: %1$tH:%1$tM:%1$tS", date);
    }

    public String getName() {
        return name;
    }

    public int getTime() {
        return time;
    }

    public double getDistance() {
        return distance;
    }

    public float getSpeed() {
        return (float) speed;
    }

    public ArrayList<Location> getRoute() {
        return route;
    }

    @Override
    public String toString() {
        return String.format("Name: %s%nDate: %2$td-%2$tb-%2$tY%nTime: %2$tH:%2$tM:%2$tS", name, date);
    }
} 
```

我将它从一项活动传递到另一项活动：

```
Intent showTrackIntent = new Intent(TabSavedActivity.this, ShowTrackActivity.class);
showTrackIntent.putExtra("track", adapter.getItem(position));
startActivity(showTrackIntent); 
```

其中（Track 对象是 ListView 上的元素）。在传递 Track 对象时出现错误：

`java.lang.RuntimeException: Parcelable encountered IOException writing serializable object (name = classes.Track)`

怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T21:36:10.360

我认为问题在于`Location`不可序列化。尝试序列化`Location`对象时遇到问题的人提出了很多关于 SE 的问题。但是，`Location`is `Parcelable`，所以也许你会更好地`Parcelable`为你的班级实施而不是使用`Serializable`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T17:14:16.073

当前代码是：

包类；

```
import java.util.ArrayList;
import java.util.Date;

import android.location.Location;
import android.os.Parcel;
import android.os.Parcelable;

public class Track implements Parcelable {
    private String name, date;
    private int time;
    private double distance, speed;
    private ArrayList<Location> route;

public Track(String name, int time, double distance, Date date, ArrayList<Location> route) {
    this.name = name;
    this.date = formatDate(date);
    this.time = time;
    this.distance = distance;
    this.route = route;

    this.speed = distance / (time / 3600.);
}

public void writeToParcel(Parcel dest, int flags) {
    dest.writeStringArray(new String[] { name, date });
    dest.writeInt(time);
    dest.writeDouble(distance);
    dest.writeSerializable(date);
    dest.writeTypedList(route);
}

private Track(Parcel in) {
    String[] strings = new String[2];
    in.readStringArray(strings);

    this.name = strings[0];
    this.date = strings[1];
    this.time = in.readInt();
    this.distance = in.readDouble();

    route = new ArrayList<Location>();
    in.readTypedList(route, Location.CREATOR);

    this.speed = distance / (time / 3600.);
}

public static final Parcelable.Creator<Track> CREATOR = new Parcelable.Creator<Track>() {

    public Track createFromParcel(Parcel in) {
        return new Track(in);
    }

    public Track[] newArray(int size) {
        return new Track[size];
    }
};

public String getName() {
    return name;
}

public String getDate() {
    return date;
}

public int getTime() {
    return time;
}

public double getDistance() {
    return distance;
}

public float getSpeed() {
    return (float) speed;
}

public ArrayList<Location> getRoute() {
    return route;
}

public String formatDate(Date date) {
    return String.format("Date: %1$td-%1$tb-%1$tY%nTime: %1$tH:%1$tM:%1$tS", date);
}

@Override
public String toString() {
    return String.format("Name: %s%nDate: %s", name, date);
}

public int describeContents() {
    return 0;
} 
```

}

我不知道为什么，但是当我通过活动传递我的 Track 时，我在路由列表中只得到一个元素，即使我在新意图开始之前检查了它并且有完整列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T14:00:38.217

序列化：

```
 ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream(savedTracksFile));
    oos.writeObject(serializedTracks);
    oos.close(); 
```

反序列化：

```
 ObjectInputStream ois = new ObjectInputStream(new FileInputStream(savedTracksFile));
    serializedTracks = (ArrayList<Track>) ois.readObject();
    ois.close(); 
```

在哪里`savedTracksFile`：

```
 File savedLocationsDirectory = new File(Environment.getExternalStorageDirectory().getPath().concat("/AppFolder"));
    if (!savedLocationsDirectory.exists()) savedLocationsDirectory.mkdirs();
    savedTracksFile = new File(savedLocationsDirectory, "savedTracks.gc"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T16:23:48.170

我认为这个解决方案现在已经准备好了。这是代码：

```
import java.util.ArrayList;
import java.util.Date;

import android.location.Location; 
import android.os.Parcel;
import android.os.Parcelable;

public class Track implements Parcelable {
private String name, date;
private int time;
private double distance, speed;
private ArrayList<Location> route;

public Track(String name, int time, double distance, Date date, ArrayList<Location> route) {
    this.name = name;
    this.date = formatDate(date);
    this.time = time;
    this.distance = distance;
    this.route = route;

    this.speed = distance / (time / 3600.);
}

public void writeToParcel(Parcel dest, int flags) {
    dest.writeStringArray(new String[] { name, date });
    dest.writeInt(time);
    dest.writeDouble(distance);
    dest.writeTypedList(route);
}

private Track(Parcel in) {
    String[] strings = new String[2];
    in.readStringArray(strings);
    this.name = strings[0];
    this.date = strings[1];

    this.time = in.readInt();
    this.distance = in.readDouble();

    route = new ArrayList<Location>();
    in.readTypedList(route, Location.CREATOR);

    this.speed = distance / (time / 3600.);
}

public static final Parcelable.Creator<Track> CREATOR = new Parcelable.Creator<Track>() {

    public Track createFromParcel(Parcel in) {
        return new Track(in);
    }

    public Track[] newArray(int size) {
        return new Track[size];
    }
};

public String getName() {
    return name;
}

public String getDate() {
    return date;
}

public int getTime() {
    return time;
}

public double getDistance() {
    return distance;
}

public float getSpeed() {
    return (float) speed;
}

public ArrayList<Location> getRoute() {
    return route;
}

public String formatDate(Date date) {
    return String.format("Date: %1$td-%1$tb-%1$tY%nTime: %1$tH:%1$tM:%1$tS", date);
}

@Override
public String toString() {
    return String.format("Name: %s%nDate: %s", name, date);
}

public int describeContents() {
    return 0;
}
} 
```

*大卫瓦瑟*你非常有帮助，谢谢！

# ssh - 使用 Expect 将文件添加到远程系统

> ID：12269945
> 
> 赞同：0
> 
> 时间：2012-09-04T19:17:34.183
> 
> 标签：ssh, tcl, expect, sudo, cat

我正在尝试编写我的第一个期望脚本，它将新语言推送到远程文件。

这是我到目前为止并没有真正起作用的东西：

```
#!/usr/bin/expect

set fid1 [open ./hosts.list r]
set hosts [read -nonewline $fid1]
close $fid1

set banner_cmd "cat > /tmp/new_sshd_banner << EOF

<New Language Goes Here>

EOF"
send "\n"

stty -echo
send_user "Enter password for remote sudo: "
expect_user -re "(.*)\n"
stty echo
set pass $expect_out(1,string)
send "\n"

foreach host [split $hosts "\n"] {
    eval spawn "/usr/bin/ssh $host"
    expect {
        -re "RSA key fingerprint" {send "yes\r"}
        timeout {puts "Host is known"}
    }

    expect "$host"
    send "sudo mv /etc/file /etc/file.orig"
    expect "assword"
    send $pass

    expect "$host"
    send "sudo $file_cmd"

    expect "$host"
    send "sudo mv /tmp/file /etc/file

} 
```

当它运行时，这就是我所看到的：

```
opensuse @ 15:10 ~/bin> ./fix_file.exp 

Enter password for remote sudo: 
spawn /usr/bin/ssh server

<New Language Goes Here>

Last login: Fri Aug 31 19:52:45 2012 from 10.152.81.105
[user@server ~]$ Host is known
sudo cat > /tmp/new_file << EOF 
> 
> 
> <New Language Goes Here> 
> 
> EOFsudo mv /etc/file /etc/filePASSWORD*missing "
    while executing
"send "sudo mv /tmp/file /etc/file

"
    ("foreach" body line 17)
    invoked from within
"foreach host [split $hosts "\n"] {
    eval spawn "/usr/bin/ssh $host"
    expect {
        -re "RSA key fingerprint" {send "yes\r"}
        timeout {puts "Host i..."
    (file "./fix_file.exp" line 45) 
```

不太明显的一件事是，它将从用户那里获得的密码附加到 mv 命令的输出中。

我在哪里做错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T20:40:47.803

正是错误所说的：

```
missing "
    while executing
"send "sudo mv /tmp/file /etc/file 
```

您在该行之后缺少关闭 "：

```
 send "sudo mv /tmp/file /etc/file 
```

# c# - 如何在 C# 中将维度数组 (100, 1) 转换为 2 个单独的数组？

> ID：12269949
> 
> 赞同：1
> 
> 时间：2012-09-04T19:17:52.070
> 
> 标签：c#, arrays

我有一个数组，如果它在视觉上由 100 行和 2 列组成，或者 (99,1)。我想做的是创建 2 个一维数组，使得 (0-99,0) 在 1 个数组中，而 (0-99,1) 在另一个数组中。我如何在 C# 中做到这一点？这是我的代码，几乎在那里但不完全。

```
 //Create Arrays A and B for the 2 columns of arrData

        string sourceFilePath = @"c:\data.txt";
        var arrData = File.ReadLines(sourceFilePath).Select(line => line.Split('\t')).ToArray(); 

        string[] arrA = new string[arrData.Length]; 
        string[] arrB = new string[arrData.Length]; 

        long lngCounter;

        for (lngCounter = 0; lngCounter <= arrData.Length; lngCounter++)
        {
            arrA[lngCounter] = arrData[lngCounter,0];
            arrB[lngCounter] = arrData[lngCounter,1];
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T19:52:44.323

轻松修复：

```
 for (lngCounter = 0; lngCounter < arrData.Length; lngCounter++)
            {
                arrA[lngCounter] = arrData[lngCounter][0];
                arrB[lngCounter] = arrData[lngCounter][1];
            } 
```

请记住，数组创建的输出不是矩形而是锯齿状数组。你假设矩形。

我还想补充一点，只要文本文件中的列少于 2 列，代码就会中断。所以要注意它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T19:48:30.020

在家工作？

这是将具有 [至少] 2 列的矩形数组拆分为 2 个 1-d 数组的一种方法：

```
private static void Split<T>( T[,] src , out T[] col1 , out T[] col2 )
{
  int  rows = src.GetLength(0) ;

  if ( src.GetLength(1) < 2 ) throw new ArgumentException("src") ;

  col1 = new T[ src.GetLength(0) ] ;
  col2 = new T[ src.GetLength(0) ] ;

  for( int i = 0 ; i < rows ; ++i )
  {
    col1[i] = src[i,0] ;
    col2[i] = src[i,1] ;
  }

  return ;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T19:59:23.370

少了几行，尽管与接受的答案几乎相同

```
 string[][] jaggedString = new string[3][];

    jaggedString[0] = new[] {"test", "test1"};
    jaggedString[1] = new[] {"free", "free1"};
    jaggedString[2] = new[] {"done", "done1"};

    var array1 = jaggedString.Select(c => c[0]).ToArray();
    var array2 = jaggedString.Select(c => c[1]).ToArray(); 
```

两行：

```
var array1 = arrData.Select(c => c[0]).ToArray();
var array2 = arrData.Select(c => c[1]).ToArray(); 
```

# c++ - Does vector::erase() change positions?

> ID：12269951
> 
> 赞同：2
> 
> 时间：2012-09-04T19:17:59.620
> 
> 标签：c++, vector, erase

Here is my question, I have a vector of double and I need eliminate some of them under a certain condition. Here is a code example:

```
 vector <double> appo;
 for(int i=0;i<appo.size();i++){
       for(int j=i+1;j<appo.size();j++){
         if( condition(appo[i],appo[j]) ){
           appo.erase(appo.begin()+j);
           j--;
         }
       }
    } 
```

Since after the erase() my size decrease by 1 and all the elements got left shifted by left, is correct to decrease j?

Ok I decide to don't use the removeif because it's a small program and I don't care right now about performance, but I got segmentation fault. Here is the code:

```
vector <double> *point;
for(int i=0;i<point->size();i+=3){
     for(int j=i+3;j<point->size();j+=3){
       if(distance((*point)[i],(*point)[i+1],(*point)[i+2],(*point)[j],(*point)[j+1],(*point)[j+2]) < treshold){
         point->erase(point->begin()+j,point->begin()+j*3);
         j-=3;
       }
     }
  } 
```

point is a vector of coordinates so something like (x1,y1,z1,x2,y2,z3,...,xn,yn,zn). Any idea?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T19:24:23.903

递减是正确的`j`，因为在擦除 index 处`j`的元素后，之前所在的元素`j+1`现在位于`j`，所以你想用相同的值再次重复循环`j`。减少它会产生这种效果，因为循环本身会增加它。

您还可以考虑使用迭代器而不是索引：

```
vector<double>::iterator j = appo.begin() + i + 1;
while (j != appo.end()) {
    if (condition(appo[i], *j)) {
        j = appo.erase(j);
    } else {
        ++j;
    }
} 
```

完成后，您也可以使用迭代器`i`。

正如“eq-”在评论中所说，有一个标准算法可以帮助你。就可用性而言，您是否更喜欢循环，但它通常更有效，因为重复调用“擦除”一次将每个元素洗牌，同时`remove_if`跟踪“读取位置”和“写入位置” "，所以它最多只复制每个元素一次。

```
appo.erase(
    appo.remove_if(
        appo.begin() + i + 1,
        appo.end(),
        ShouldRemove(appo[i])
    ),
    appo.end()
); 
```

在 C++03 中，您必须定义`ShouldRemove`类似于：

```
struct ShouldRemove {
    double lhs;
    ShouldRemove(double d) : lhs(d) {}
    bool operator()(double rhs) {
        return condition(lhs, rhs);
    }
}; 
```

在 C++11 中，您可以使用 lambda 代替 ShouldRemove：

```
appo.erase(
    appo.remove_if(
        appo.begin() + i + 1,
        appo.end(),
        [&](double d) { return condition(appo[i], d); }
    ),
    appo.end()
); 
```

您还可以使用`std::bind1st`或`boost::bind`（在 C++03 中）或`std::bind`（在 C++11 中）使用一些选项，但这些选项很难正确理解。

# java - 有什么方法可以恢复 Netbeans 7.2 书签导航旧样式？

> ID：12269957
> 
> 赞同：10
> 
> 时间：2012-09-04T19:18:20.640
> 
> 标签：java, php, netbeans, ide, bookmarks

Netbeans 7.2 改变了书签的工作方式。

之前`ctrl``shift``,`和`ctrl``shift``.`在同一个文件中上下移动焦点。

但现在出现一个窗口，显示所有文件中的书签。我更喜欢旧的方式。有什么办法可以恢复旧式？

![在此处输入图像描述](../Images/b5a2a2d824f479bba32f3740a230e6b3.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-04T22:56:31.843

打开菜单`Tools -> Options`，点击`KeyMap`，搜索`Bookmark`

`Bookmark History Popup Next`删除和上的快捷方式`Bookmark History Popup Previous`；将键盘组合设置为`Next Bookmark`和`Previous Bookmark`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T22:46:19.647

如果您仍然安装旧版本或愿意重新安装旧版本，我知道一种方法。您可以导出旧的键盘映射设置。在旧版本的 Netbeans 中：

1.  转到工具->选项，然后单击“键盘映射”选项卡。
2.  单击“管理配置文件...”按钮，突出显示“netbeans”配置文件。
3.  按导出并选择保存位置并保存键盘映射文件。

在 NetBeans 7.2 中：

1.  转到工具->选项，然后单击“键盘映射”选项卡。
2.  单击“管理配置文件...”按钮，然后导入并导航到上一个列表的第 3 步中保存的文件并打开它。
3.  将出现一个弹出窗口以命名新配置文件，将其命名为您想要的名称。
4.  选择新配置文件，然后搜索 cntrl+shift+。在“在快捷方式中搜索：”文本框中。您应该有 2 个“操作”映射到快捷方式，一个称为“下一个书签”，一个称为“书签历史弹出下一个”。通过按“...”按钮和“清除”禁用显示“Bookmark History Popup Next”的键盘映射。
5.  重复步骤 4，但使用 cntrl+shift+ 和“Bookmark History Popup Previous”。
6.  按下“确定”按钮，快捷方式的行为应该和以前一样:)

# java - Best Practices - SWT Table, TableViewer, EditingSupport

> ID：12269958
> 
> 赞同：15
> 
> 时间：2012-09-04T19:18:21.640
> 
> 标签：java, swt, tableviewer

I am adding a table to my main GUI. It does show up and has the data it is suppose to show. But I feel like I have a big mess of code and it is not structured correctly. I am looking for someone that uses SWT a lot to help me put the right pieces of code in the right places.

Class A - Main GUI with `TableViewer`

Class B - (`ArrayList`) Data for table / Class B1 - DataModel for `ArrayList` Structure

Class A - has method for creating `TableViewer`

```
 //////////////////////////////////////////////////////////////////////////
  //                         createTableViewer()                          //
  //////////////////////////////////////////////////////////////////////////
private TableViewer createTableViewer(Composite parent) {
    viewer = new TableViewer(parent, SWT.MULTI | SWT.H_SCROLL | SWT.V_SCROLL | SWT.FULL_SELECTION | SWT.BORDER);
    createColumns(parent, viewer);
    table = viewer.getTable();
    table.setHeaderVisible(true);
    table.setLinesVisible(true);

    // Layout the viewer
    GridData gridData = new GridData(SWT.FILL, SWT.FILL, true, true);
    viewer.setContentProvider(new ArrayContentProvider());
    *** Getting Array from Class B ***       
    viewer.setInput(AplotDataModel.getInstance().getArrayData());
    viewer.getControl().setLayoutData(gridData);
    return viewer;
} 
```

Class A also has `createColumns()` method and a `createTableViewerColumn()` method.

```
 //////////////////////////////////////////////////////////////////////////
 //                         createColumns()                              //
 //////////////////////////////////////////////////////////////////////////
private void createColumns(final Composite parent, final TableViewer viewer) {
    String[] titles = { "ItemId", "RevId", "PRL", "Dataset Name", "EC Markup" };
    int[] bounds = { 150, 150, 100, 150, 100 };

    TableViewerColumn col = createTableViewerColumn(titles[0], bounds[0], 0);
    col.setLabelProvider(new ColumnLabelProvider() {
        @Override
        public String getText(Object element) {
            AplotDatasetData item = (AplotDatasetData) element;
            return item.getDataset().toString();
        }
    });

    col = createTableViewerColumn(titles[1], bounds[1], 1);
    col.setLabelProvider(new ColumnLabelProvider() {
        @Override
        public String getText(Object element) {
            AplotDatasetData item = (AplotDatasetData) element;
            return item.getRev().toString();
        }
    });

    col = createTableViewerColumn(titles[2], bounds[2], 2);
    col.setLabelProvider(new ColumnLabelProvider() {
        @Override
        public String getText(Object element) {
            AplotDatasetData item = (AplotDatasetData) element;
            return item.getPRLValue();
        }
    });

    col = createTableViewerColumn(titles[3], bounds[3], 3);
    col.setLabelProvider(new ColumnLabelProvider() {
        @Override
        public String getText(Object element) {
            AplotDatasetData item = (AplotDatasetData) element;
            return item.getDatasetName();
        }
    });

    col = createTableViewerColumn(titles[4], bounds[4], 4);
    col.setLabelProvider(new ColumnLabelProvider() {
        @Override
        public String getText(Object element) {
            AplotDatasetData item = (AplotDatasetData) element;
            return item.getECMarkupValue();
        }
    });
}

 //////////////////////////////////////////////////////////////////////////
 //                       createTableViewerColumn()                      //
 //////////////////////////////////////////////////////////////////////////
private TableViewerColumn createTableViewerColumn(String title, int bound, final int colNumber) {
    final TableViewerColumn viewerColumn = new TableViewerColumn(viewer, SWT.NONE);
    final TableColumn column = viewerColumn.getColumn();
    column.setText(title);
    column.setWidth(bound);
    column.setResizable(true);
    column.setMoveable(true);
    return viewerColumn;
} 
```

**Question 1**: Is this the best practice to adding a table to my GUI class? Seems like a lot of code for the GUI class.

**Question 2**: Should the `createColumns()` method and the `createTableViewerColumn()` method be moved to Class B?

**Question 3**: My last column in the table is going to be a dropdown/combo box. So I am going to have to extend one class with `EditingSupport`. Should it be Class A or Class B?

Before I go any farther with this project I want to make sure I have it correctly structured.

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-05T10:20:02.010

回答这个问题就像回答你喜欢哪种冰淇淋口味:)

## 问答

> **问题 1：**这是向我的 GUI 类添加表的最佳做法吗？似乎有很多 GUI 类的代码。

如果代码小于它不是一个坏主意。但如果——

1.  代码很大（对我来说，如果它超过 100 行）。
2.  整个系统将有超过几千行代码。
3.  别人会维护它
4.  如果我需要即插即用的性质，例如今天`Table`就足够了，但将来我可能会使用`Grid`.
5.  如果我正在做一些自定义绘图（在 windows 绘画事件上做一些自定义绘画）或使用自定义控件，**那么**

我通常更喜欢对查看器/控件进行子类化。通过这种方式，我可以保持基本消息泵代码、GUI 控件和我的数据模型之间的分离。

> **问题2：** createColumns() 方法和createTableViewerColumn() 方法是否应该移到Class B 中？

不，你不应该。与您的情况一样，B 类是您的数据模型/供应商。JFace 编程模型支持 MVC 架构，如果可能的话，应该遵循它。建议的解决方案是有一个扩展 TableViewer 的新类。

> **问题 3：**我在表格中的最后一列将是一个下拉/组合框。所以我将不得不用 EditingSupport 扩展一个类。应该是A类还是B类？

我建议你去学习一个新课程并在扩展的 TableViewer 中使用它。一个好处是，如果您将数据写回某个数据库，那么您的查看器类仍然与数据库/持久层无关。

## 代码示例

下面是一个简单的示例应用程序。如您所见，我只需更改`OptionEditingSupport`类即可将组合编辑器更改为文本编辑器。而且，代码看起来干净简洁。

***主班***

```
package sample;

import org.eclipse.swt.SWT;
import org.eclipse.swt.layout.FillLayout;
import org.eclipse.swt.widgets.Display;
import org.eclipse.swt.widgets.Shell;

public class SampleApp 
{
    public SampleApp(Shell shell)
    {
        AppPersonViewer personViewer = new AppPersonViewer(shell, SWT.BORDER|SWT.V_SCROLL|SWT.FULL_SELECTION);
        DataModel model = new DataModel(20);
        personViewer.setInput(model);
    }

    public static void main(String[] args) {
        Display display = new Display ();
        Shell shell = new Shell(display);
        shell.setLayout(new FillLayout());
        new SampleApp(shell);
        shell.open ();

        while (!shell.isDisposed ()) {
            if (!display.readAndDispatch ()) display.sleep ();
        }

        display.dispose ();
    }
} 
```

* * *

***扩展表查看器***

```
package sample;

import org.eclipse.jface.viewers.ColumnLabelProvider;
import org.eclipse.jface.viewers.TableViewer;
import org.eclipse.jface.viewers.TableViewerColumn;
import org.eclipse.swt.SWT;
import org.eclipse.swt.layout.GridData;
import org.eclipse.swt.widgets.Composite;
import org.eclipse.swt.widgets.Table;

public class AppPersonViewer extends TableViewer
{
    public AppPersonViewer(Composite parent, int style) 
    {
        super(parent, style);
        Table table = getTable();
        GridData gridData = new GridData(SWT.FILL, SWT.FILL, true, true);
        table.setLayoutData(gridData);
        createColumns();
        table.setHeaderVisible(true);
        table.setLinesVisible(true);
        setContentProvider(new AppContentProvider());
    }

    private void createColumns()
    {
        String[] titles = { "First Name", "Second Name", "Age", "Country", "Likes SO" };
        int[] bounds = { 150, 150, 100, 150, 100 };

        TableViewerColumn column = createTableViewerColumn(titles[0], bounds[0], 0);
        column.setLabelProvider(new ColumnLabelProvider(){
            public String getText(Object element) {
                if(element instanceof Person)
                    return ((Person)element).getFirst();
                return super.getText(element);
            }
        });

        column = createTableViewerColumn(titles[1], bounds[1], 1);
        column.setLabelProvider(new ColumnLabelProvider(){
            public String getText(Object element) {
                if(element instanceof Person)
                    return ((Person)element).getSecond();
                return super.getText(element);
            }
        });

        column = createTableViewerColumn(titles[2], bounds[2], 2);
        column.setLabelProvider(new ColumnLabelProvider(){
            public String getText(Object element) {
                if(element instanceof Person)
                    return ""+((Person)element).getAge();
                return super.getText(element);
            }
        });

        column = createTableViewerColumn(titles[3], bounds[3], 3);
        column.setLabelProvider(new ColumnLabelProvider(){
            public String getText(Object element) {
                if(element instanceof Person)
                    return ((Person)element).getCountry();
                return super.getText(element);
            }
        });

        column = createTableViewerColumn(titles[4], bounds[4], 4);
        column.setLabelProvider(new ColumnLabelProvider(){
            public String getText(Object element) {
                if(element instanceof Person)
                    return ((Person)element).getLikes();
                return super.getText(element);
            }
        });

        column.setEditingSupport(new OptionEditingSupport(this));
    }

    private TableViewerColumn createTableViewerColumn(String header, int width, int idx) 
    {
        TableViewerColumn column = new TableViewerColumn(this, SWT.LEFT, idx);
        column.getColumn().setText(header);
        column.getColumn().setWidth(width);
        column.getColumn().setResizable(true);
        column.getColumn().setMoveable(true);

        return column;
    }
} 
```

* * *

***内容提供商***

```
package sample;

import org.eclipse.jface.viewers.IStructuredContentProvider;
import org.eclipse.jface.viewers.Viewer;

public class AppContentProvider implements IStructuredContentProvider
{
    /* (non-Javadoc)
     * @see org.eclipse.jface.viewers.IStructuredContentProvider#getElements(java.lang.Object)
     */
    public Object[] getElements(Object inputElement) {
        if(inputElement instanceof DataModel)
            return ((DataModel)inputElement).getData().toArray();
        return null;
    }

    /* (non-Javadoc)
     * @see org.eclipse.jface.viewers.IContentProvider#dispose()
     */
    public void dispose() {
    }

    /* (non-Javadoc)
     * @see org.eclipse.jface.viewers.IContentProvider#inputChanged(org.eclipse.jface.viewers.Viewer, java.lang.Object, java.lang.Object)
     */
    public void inputChanged(Viewer viewer, Object oldInput, Object newInput) {
    }
} 
```

* * *

***单元格编辑器支持***

```
package sample;

import org.eclipse.jface.viewers.CellEditor;
import org.eclipse.jface.viewers.ColumnViewer;
import org.eclipse.jface.viewers.ComboBoxCellEditor;
import org.eclipse.jface.viewers.EditingSupport;
import org.eclipse.jface.viewers.TableViewer;

public class OptionEditingSupport extends EditingSupport 
{
    private ComboBoxCellEditor cellEditor;

    public OptionEditingSupport(ColumnViewer viewer) {
        super(viewer);
        cellEditor = new ComboBoxCellEditor(((TableViewer)viewer).getTable(), new String[]{"Y", "N"});
    }
    protected CellEditor getCellEditor(Object element) {
        return cellEditor;
    }
    protected boolean canEdit(Object element) {
        return true;
    }
    protected Object getValue(Object element) {
        return 0;
    }
    protected void setValue(Object element, Object value) 
    {
        if((element instanceof Person) && (value instanceof Integer)) {
            Integer choice = (Integer)value;
            String option = (choice == 0? "Y":"N");
            ((Person)element).setLikes( option );
            getViewer().update(element, null);
        }
    }
} 
```

* * *

***数据模型***

```
package sample;

import java.util.ArrayList;
import java.util.List;

public class DataModel 
{
    private int samples;
    public DataModel(int samples) {
        this.samples = samples;
    }

    List<Person> getData()
    {
        List<Person> persons = new ArrayList<Person>();
        for(int i=0; i<samples; i++)
            persons.add(Person.createRandomPerson());
        return persons;
    }
} 
```

* * *

***个人实体***

```
package sample;

import java.util.Random;

public class Person 
{
    private static final String[]   FIRST = {"Favonius", "Tim", "Brad", "Scott", "Linda"};
    private static final String[]   SECOND = {"Cruise", "Temp", "Abbey", "Adam", "Albert", "Thomas"};
    private static final String[]   COUNTRY = {"India", "USA", "Russia", "UK", "France", "Germany"};
    private static final int[]      AGE = {22, 23, 24, 25, 26, 27, 28, 29, 30};

    private static Random random = new Random(System.currentTimeMillis());

    private String first;
    private String second;
    private String country;
    private String likes;

    private int age;

    public Person(String first, String second, String country, String likes, int age) 
    {
        super();
        this.first = first;
        this.second = second;
        this.country = country;
        this.likes = likes;
        this.age = age;
    }
    public String getFirst() {
        return first;
    }
    public String getSecond() {
        return second;
    }
    public String getCountry() {
        return country;
    }
    public String getLikes() {
        return likes;
    }
    public int getAge() {
        return age;
    }
    public void setLikes(String likes) {
        this.likes = likes;
    }
    public static Person createRandomPerson(){
        return new  Person(FIRST[random.nextInt(FIRST.length)], 
                SECOND[random.nextInt(SECOND.length)], COUNTRY[random.nextInt(COUNTRY.length)], 
                "Y", AGE[random.nextInt(AGE.length)]);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-16T05:24:48.080

> 使用 TableViewer 插入列名和表项的简单方法

**学生表查看器**

```
package rcp_demo.Views;

import org.eclipse.swt.widgets.Composite;
import org.eclipse.ui.part.ViewPart;
import org.eclipse.swt.SWT;
import org.eclipse.wb.swt.SWTResourceManager;
import org.eclipse.swt.widgets.Table;
import org.eclipse.jface.viewers.TableViewer;
import org.eclipse.swt.widgets.TableColumn;
import org.eclipse.jface.viewers.TableViewerColumn;
import org.eclipse.swt.widgets.Text;
import rcp_demo.TableView.Student;
import org.eclipse.swt.widgets.TableItem;
import java.util.ArrayList;
import java.util.List;

public class TaskView extends ViewPart {
    private Table table;
    private Text txt_search;
    private TableViewer tableViewer;
    public TaskView() {
        setTitleImage(SWTResourceManager.getImage("D:\\Icon\\Tasksview.png"));
    }

    @Override
    public void createPartControl(Composite parent) {
        parent.setLayout(null);
        //Search Text
        txt_search = new Text(parent, SWT.BORDER);
        txt_search.setBounds(21, 10, 238, 19);
        //TableViewer
        tableViewer = new TableViewer(parent, SWT.BORDER | SWT.FULL_SELECTION);
        table = tableViewer.getTable();
        table.setBounds(21, 47, 290, 213);
        table.setHeaderVisible(true);
        table.setLinesVisible(true);

                //Table(Student): TableViewerColumn Names

                String[] Col_names={"Stud_id","Stud_Name","Stud_Gender"};
                for(int i=0;i<Col_names.length;i++)
                {
                    TableViewerColumn tableViewerColumn = new TableViewerColumn(tableViewer, SWT.NONE);
                    TableColumn tblclmnNewColumn = tableViewerColumn.getColumn();
                    tblclmnNewColumn.setWidth(100);
                    tblclmnNewColumn.setText(Col_names[i]);

                }
                //Table(Student) Item List
                List<Student> std=new ArrayList<Student>();
                std.add(new Student("110","AAA","Male"));
                std.add(new Student("111","FFF","Female"));
                std.add(new Student("112","MMM","Male"));

                for(Student s:std)
                {
                    TableItem std_item=new TableItem(table, SWT.NONE);
                    std_item.setText(0,s.getStd_id());
                    std_item.setText(1,s.getStd_nm());
                    std_item.setText(2,s.getStd_gender());
//                  System.out.println(s);  
                }

    }
      public TableViewer getViewer() {
          return tableViewer;
  }
    @Override
    public void setFocus() {
        tableViewer.getControl().setFocus();

    }
} 
```

* * *

班级：学生

```
package rcp_demo.TableView;

public class Student {

    private String std_id;
    private String std_nm;
    private String std_gender;

    public Student() {
        // TODO Auto-generated constructor stub
    }
    public Student(String sid,String snm,String sgender) {
        std_id=sid;
        std_nm=snm;
        std_gender=sgender;
    }

    public String getStd_id() {
        return std_id;
    }
    public void setStd_id(String std_id) {
        this.std_id = std_id;
    }
    public String getStd_nm() {
        return std_nm;
    }
    public void setStd_nm(String std_nm) {
        this.std_nm = std_nm;
    }
    public String getStd_gender() {
        return std_gender;
    }
    public void setStd_gender(String std_gender) {
        this.std_gender = std_gender;
    }

} 
```

* * *

我得到了 SWT Table、TableViewer 的最佳实践

谢谢..

# windows - How to make icon and Class Wizard work for no-resource applications with resource-only dll?

> ID：12269959
> 
> 赞同：0
> 
> 时间：2012-09-04T19:18:21.827
> 
> 标签：windows, visual-studio, mfc, visual-c++

I am working on a MFC project with multiple GUI applications. The objective is to move all the resources from individual projects to a single resource dll.

After some change I have a single resource-only dll project and multiple GUI project. Each GUI project is using the following code to access the resource dll:

```
BOOL CFooApp::InitInstance()
{
    HINSTANCE hRes = NULL;
    hRes = LoadLibrary(_T("Resource.dll"));
    if(hRes) AfxSetResourceHandle(hRes);
    .... 
```

So far things work fine except there are two issues:

1.  The GUI exe files lose there icons in Windows explorer. Although there are some MFC boilerplate code that load the icon from IDR_MAINFRAME, that only affects the icon in the top of the application window.
2.  The Class Wizard won't work anymore. For example I can no longer click on a dialog button in the resource view to add a button handler?

How to solve these issues?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T10:07:06.053

Explorer 从嵌入在 exe 中的资源中获取它的图标。如果 exe 从 dll 中提取所有资源，则资源管理器将找不到任何东西。你不能只在exe中添加一个图标吗？

至于2，那我觉得你吃饱了。我之前在使用多个卫星语言资源 dll 时遇到过这个问题。修复它的唯一方法是在 exe 本身中保留一组（英文）资源，但由于我们特定的各种原因，这是不可能的。最后，我只是习惯了没有向导的编码。：/

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T16:27:49.910

现在我正在使用一种几乎解决问题的简单方法。我只是将中央 rc 文件（例如上面示例中的 Resource.rc）添加到每个 GUI 项目中。因此： 1) 可以使用 ClassWizard。2) 为每个 GUI 生成图标。3）虽然GUI工程引用的是英文版rc文件，但GUI exe仍然可以加载其他语言的Resource.dll。唯一的缺点是每个 GUI 现在都有相同的图标，大概是他们在 rc 文件中找到的第一个图标。

# trigger.io - How to handle exceptions with trigger.io

> ID：12269961
> 
> 赞同：0
> 
> 时间：2012-09-04T19:18:28.873
> 
> 标签：trigger.io, mobile-webkit, forge

I am using Trigger.io to with Catalyst for debugging. It appears that javascript exceptions thrown in the app do not bubble up to Trigger.io's Forge output messages.

I tried to alleviate this problem by using an on error handler like:

```
window.onerror = function(message, url, linenumber){
  forge.logging.debug("JavaScript error: " + message + " on line " + linenumber + " for " + url);
}; 
```

This will indeed capture exceptions and output messages. However the `url`, and `linenumber` are never reported in this case. Making this minimally helpful.

Hoping there is some documented solution this this that I may have overlooked or someone has a more reliable solution.

# Update

here is a sample out put message:

`[FORGE] 'JavaScript error: TypeError: \'undefined\' is not an object on line 0 for undefined:0`

Using Jquery.

# Update 2

Seems that this only happens for TypeErrors of undefined. Other errors seem to be reporting

```
[FORGE] 'JavaScript error: SyntaxError: Parse error on line 21222 for http://localhost.com:3000/assets/mobile_manifest.js:21222'
[FORGE] 'app starting !'
[FORGE] 'JavaScript error: TypeError: \'undefined\' is not an object on line 0 for undefined:0' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T19:56:14.800

你试过这样包装你的代码吗？

```
try {
  // Do something
} catch (err) {
  for (var e in err) {
    forge.logging.log(e + ":" + err[e]);
  }
} 
```

# javascript - Show new portion of an image based on scrolling

> ID：12269962
> 
> 赞同：5
> 
> 时间：2012-09-04T19:18:32.823
> 
> 标签：javascript, jquery, html

First time poster. I should start off by saying that I'm a graphic designer in the process of designing a website that I will have to code. I have minimal javascript/jquery experience. I'm having troubles trying to figure out how a new part of an image is revealed based on the location on a web page.

I'm designing a scuba diving site and I'm trying to replicate the depth locator used in the website below, on the left hand side. Instead of having just a number I'll have information pertaining to certification levels at each depth. Any suggestions on how to go about doing this with either text or an image that will change based on the location on the web page.

[http://lostworldsfairs.com/atlantis/](http://lostworldsfairs.com/atlantis/)

Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T19:36:15.027

```
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.pack.js"></script>
<script>

    var depths = [1500,4000,7000];
    var words = ['shallow','medium','deep','darkness'];

    $(document).ready(function() {

        $(window).scroll(function() {
        var depth = Math.floor($(window).scrollTop());

        for(i in depths){

            if(depth<depths[i]){
            $("#depth-o-meter").html(words[i]);
            break;
            }

        }

        });

    });

</script>

<div style = 'position:fixed' ><span id = 'depth-o-meter' >aaa </span></div>
<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br> 
```

这是带有一些测试数据和用于测试的 html 的脚本 :) 它可以工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T19:30:19.570

您可能需要利用不同的滚动位置值来确定您在页面上的位置。链接的问题对于在 jQuery 中获取这些值有一些很好的建议

[如何确定 jQuery 中窗口的高度和滚动位置？](https://stackoverflow.com/questions/303767/how-do-i-determine-height-and-scrolling-position-of-window-in-jquery)

您只需要一个 onscroll 处理程序来触发您的内容更改，如下所示：

```
$('body').scroll(function() {
    // determine current scroll position
    var scrollPosition = 0;
    // determine position as per linked question

    // change scroll image based on scroll position, assume this image has id of scrollImage
    var scrollImage = $("#scrollImage");
    if (scrollPosition < 100) {
        scrollImage.attr("src", "http://domain.com/path/to/image");
    } else if (scrollPosition < 200) {
        scrollImage.attr("src", "http://domain.com/path/to/another/image");
    } // etc.
}); 
```

# git - Getting local gerrit and repository working (including branches) based on a github project

> ID：12269963
> 
> 赞同：8
> 
> 时间：2012-09-04T19:18:35.283
> 
> 标签：git, github, gerrit

Our goal is to do internal development based on a project hosted on an external repo (github) using git and gerrit. We would pull from the external repo periodically to bring in new changes and branches, and use gerrit to manage the review process (and Jenkins to build it all).

Our initial process is to clone from the external repo to a local repo via git, then create an empty project in gerrit, and finally push the local clone to gerrit.

At that point, however, we see no branches in the gerrit repo! Right now we're working around that by manually adding the branched and refids, but that seems convoluted and fragile. I'd think the external branches would come in by default, without extra contortions. They are certainly in the clone made from the github repo.

Ideally, it'd be nice to be able to clone straight from github to gerrit and have it just work... it's not clear why the extra local repo is necessary simply to transfer things, or why branches aren't appearing in the gerrit clone when the local clone is pushed to it. Suggestions?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T00:24:53.723

我相信我已经为自己找到了答案。它归结为您如何创建存储库（并且是我对裸存储库的正式介绍）。

简而言之，您可以使用默认方式克隆一个 repo：

```
git clone https://github.com/foobar/myrepo.git 
```

这会产生一个带有工作目录*myrepo*的本地克隆，其中是*myrepo/.git*目录树。

或者你可以克隆它。[有几种方法可以做到这一点](https://stackoverflow.com/questions/3959924/whats-the-difference-between-git-clone-mirror-and-git-clone-bare)，但 --mirror 选项~~似乎会~~产生最完整的副本：

```
git clone --mirror https://github.com/foobar/myrepo.git 
```

这会生成*myrepo.git目录（就像在 gerrit 或 gitolite 中看到的那样），它与上面的**myrepo/.git*目录具有相同的结构，但没有工作目录位。

*注意：我要补充一点，我现在不确定镜像是否比带有分支远程参考的裸克隆更可取......我有[另一个线程正在](https://stackoverflow.com/questions/12398700/initializing-a-local-git-gerrit-repository-whats-the-optimal-way-to-do-this)询问这个问题。为了完整起见，这里有一种使用远程引用创建裸克隆的方法（关键是没有工作目录）：*

```
git init --bare ${LOCAL_REPO}
cd ${LOCAL_REPO}
git remote add origin ${REMOTE_URL}
git fetch origin --tags
git fetch origin 
```

我一次性测试了镜像想法，将 repo 直接克隆到*All-Projects.git*所在的本地 gerrit 安装文件夹中，重新启动 gerrit，它会看到 repo 及其所有分支。但是，这不是 gerrit 的理想方式。您应该改为从本地克隆（最好是裸机）推送。

因此，在 gerrit 中，通过 Web 管理界面创建一个新的空项目（我没有将初始的空提交放入其中 - 不确定这是否会导致问题），然后从您尝试的 repo 的本地镜像中创建复制，将其与分支和标签一起推送到新的空 gerrit 存储库：

```
git push <gerrit_repo> refs/heads/* refs/tags/* 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-04T21:21:50.960

当您执行 git push 时，它只会推送活动分支 (HEAD)。如果您希望推送所有分支和标签，请执行以下操作`git push origin refs/heads/* --tags`

在推送到 Gerrit 之前，技术上不需要拥有存储库的本地副本，但这可能是最简单的方法。

# mercurial - Handling the hotfix branch in Mercurial

> ID：12269967
> 
> 赞同：3
> 
> 时间：2012-09-04T19:18:40.057
> 
> 标签：mercurial, branch

Our current branching strategy is using three branches: `default`, `release`, `hotfix`.

`hotfix` is branched off release and then, following QA/testing, merged back into `release`, then into `default`.

When the next release is completed and another hotfix needs to be created, should we update the `hotfix` branch with the latest code or just `force` create a new `hotfix` branch from the latest release branch?

My instinct is to recreate the branch to be more explicit in when and why the branch was recreated. However, I'm not sure if there are any drawbacks to recreating the branch.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T21:11:24.740

您可以**为每个发布/修补程序分支赋予其自己的名称**，例如`v1.0.0`和`v1.0.0-hotfix`。在下一次发布时，您可以关闭旧的发布/修补程序分支。

您还可以**根据需要创建特定于修补程序的分支**。当您确定一个新的修补程序时，给它一个名称和/或标识符，为它创建一个分支（例如`hotfix-v1.0.0-001`）并制作修补程序。接受后，将其合并`release`并关闭。

或者，如果您想保留当前`release`/`hotfix`命名方案，**当您发布新产品时，将 default 合并到 release 然后 release 到 hotfix**。因为您一直在将它们合并为默认值，所以您不应该遇到任何合并冲突。如果你这样做了，你就知道永远站在默认一边。

# java - ExtendedMapView 导致崩溃 - android

> ID：12269969
> 
> 赞同：1
> 
> 时间：2012-09-04T19:18:50.443
> 
> 标签：java, android, google-maps, android-mapview

我正在使用一个名为 ExtendedMapView 的扩展 MapView 类，它将包含沿 MapView 以及 currentLocation。然而，该类导致校准时崩溃。

这是导致崩溃的 MapActivity 类的一部分：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.map);

    map=(ExtendedMapView)findViewById(R.id.map_view);} 
```

ExtendedMapView 类：

```
package com.sit.augmented_reality.map;

import android.content.Context;
import android.location.Location;

import com.google.android.maps.MapView;

public class ExtendedMapView extends MapView {

private Location currentLocation;

public ExtendedMapView(Context context, String apiKey) {
    super(context, apiKey);
     }

public void setCurrentLocation (Location location)
{
    currentLocation = location;
}

public Location getCurrentLocation ()
{
    return currentLocation;
}

} 
```

布局 XML (map.xml)：

```
<?xml version="1.0" encoding="utf-8"?>

<RelativeLayout 
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="vertical" 
  android:layout_width="fill_parent"
  android:layout_height="fill_parent">

<com.sit.augmented_reality.map.ExtendedMapView
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:clickable="true"
android:id="@+id/map_view" 
android:apiKey="0zGaDxZvhGnutaf58dLLydh5riLex42FsZ7UKcA" />

</RelativeLayout> 
```

# android - rawQuery 在 SQLite android 中不起作用

> ID：12269974
> 
> 赞同：1
> 
> 时间：2012-09-04T19:19:06.320
> 
> 标签：android, sqlite

我要做的就是设置一个等于我数据库中的条目之一的字符串。我正在访问的表有 1 列（除了 ID 列）。我已经为此苦苦挣扎了一段时间，因此即使有人提出了类似的问题，我也无法使这种情况发挥作用。我对 SQLite 中的其他一些命令感到满意，但仍然是初学者。这就是我所拥有的。我很确定一旦这种方法有效，我从花药类的调用就会正常工作。

请注意，StringCategory_Table 和 COLUMN_CATEGORIES 都定义为字符串。

我的数据库是使用以下方法创建的（它适用于除以下方法之外的所有其他方法）：

```
db.execSQL("CREATE TABLE " + StringCategory_Table + " (" + _ID + " INTEGER PRIMARY KEY AUTOINCREMENT, " + COLUMN_CATEGORIES + " TEXT NOT NULL);"); 
```

这是有问题的方法（使用 SQLite open helper 在数据库类中创建）：

```
public String getCategory(int catId){
Cursor mycursor = myDatabase.rawQuery("SELECT " + COLUMN_CATEGORIES  + " FROM "+ StringCategory_Table +" WHERE " + _ID + " = " + catId, null);

//i no longer use this line:String strCatName = mycursor.toString();

String strCatName = mycursor.getString(mycursor.getColumnIndex(COLUMN_CATEGORIES));

        return strCatName;
    } 
```

**这是我上面代码的logcat：**

```
09-04 20:05:47.764: E/AndroidRuntime(9232): FATAL EXCEPTION: main
09-04 20:05:47.764: E/AndroidRuntime(9232): java.lang.RuntimeException: Unable to instantiate activity  ComponentInfo{com.mypackage.namespace/com.mypackage.namespace.MyCurrentRestaurants}: java.lang.NullPointerException
09-04 20:05:47.764: E/AndroidRuntime(9232):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1880)
09-04 20:05:47.764: E/AndroidRuntime(9232):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
09-04 20:05:47.764: E/AndroidRuntime(9232):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
09-04 20:05:47.764: E/AndroidRuntime(9232):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
09-04 20:05:47.764: E/AndroidRuntime(9232):     at android.os.Handler.dispatchMessage(Handler.java:99)
09-04 20:05:47.764: E/AndroidRuntime(9232):     at android.os.Looper.loop(Looper.java:137)
09-04 20:05:47.764: E/AndroidRuntime(9232):     at android.app.ActivityThread.main(ActivityThread.java:4424)
09-04 20:05:47.764: E/AndroidRuntime(9232):     at java.lang.reflect.Method.invokeNative(Native Method)
09-04 20:05:47.764: E/AndroidRuntime(9232):     at java.lang.reflect.Method.invoke(Method.java:511)
09-04 20:05:47.764: E/AndroidRuntime(9232):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
09-04 20:05:47.764: E/AndroidRuntime(9232):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551) 
```

**而不是删除这个问题，我将解释问题是什么（因为挖掘评论会很烦人）：**

1.  我不能像以前那样将类字符串分配给 SQLite 条目。相反，我必须先打开数据库才能读取它： 因为我需要先打开数据库才能读取它，所以我需要创建 SQLite 数据库类的实例。
2.  由于我使用的是游标，因此我需要使用 moveToFirst 方法才能正常工作。

感谢今天帮助过我的所有人，如果这些结论不正确，请告诉我，因为我不想将误解传播给像我一样困惑的人。亚当

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T19:27:12.427

看起来您只是忘记将光标移动到第一个结果。试试这个：

```
public String getCategory(int catId){
    Cursor mycursor = myDatabase.rawQuery("SELECT " + COLUMN_CATEGORIES  + " FROM " + StringCategory_Table +" WHERE " + _ID + " = " + catId, null);

    // Check if the row exists, return it if it does
    if(mycursor.moveToFirst())
        return mycursor.getString(mycursor.getColumnIndex(COLUMN_CATEGORIES));

    // No rows match id
    return "";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T19:29:00.460

试试这个，

```
public String getCategory(int catId){
        Cursor mycursor = myDatabase.rawQuery("SELECT " + COLUMN_CATEGORIES  + " FROM "+ StringCategory_Table +" WHERE " + _ID + " = " + catId, null);
      if(mycursor.moveToFirst()){ //Edited based on suggestion from SAM
          String strCatName = mycursor.getString(mycursor.getColumnIndex(COLUMN_CATEGORIES));
                  return strCatName;
        } else {
        return null;
         }

        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T19:22:44.203

尝试使用链接[http://codinglookseasy.blogspot.in/2012/08/sqlite-database.html中的示例](http://codinglookseasy.blogspot.in/2012/08/sqlite-database.html)

而不是将光标对象转换为字符串尝试获取字段并将其存储在字符串中

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T19:23:07.120

看起来您的 select 语句可能是错误的。您应该传递列名字符串而不是看起来像整数的“COLUMN_CATEGORIES”。之后，您应该使用注释掉的方式来访问字符串。

# arrays - 无法在数组中显示目录内容

> ID：12269977
> 
> 赞同：3
> 
> 时间：2012-09-04T19:19:13.137
> 
> 标签：arrays, bash

我正在尝试 a) 计算我的 Mass Filer EMC 设备上有多少文件，b) 将它们加载到一个数组中 c) 显示我有多少文件的计数 d) 批量加载我的数据库中的每个文件 e) 显示我刚刚加载的文件的名称。

这是我的代码...

```
export OUT=/path/to/device
P_Array=$(cd ${OUT} ; find . -name "*TXT" | wc -l)
Plen=${#P_Array[@]}
echo "$Plen FILES TO PROCESS."                                       
if [ $Plen -eq 0 ]
then
        echo "`date '+%m/%d/%y %T:'` ZERO FILES."                  
fi

for name in ${P_Array[@]}
do
        ###Database Bulk Load Here###
        echo "`date '+%m/%d/%y %T:'` $name was loaded."
done 
```

问题 A：`Plen=${#P_Array[@]}`当它应该是 5 时显示计数 1（沙箱环境，现在）。问题 B：`$name`显示文件总数而不是单个文件名。

显然，这一切都是错误的。我确定我有一些东西被调换了，但我不确定它是什么。帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T19:28:32.390

由于您`wc -l`对结果进行了操作，因此`find`它将给出文件的数量。因此，P_Array 只包含一个数字。所以`Plen`只有1。

将它们更改为：

```
P_Array=$(cd ${OUT} ; find . -name "*TXT")
Plen=$(cd ${OUT} ; find . -name "*TXT" | wc -l) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T20:18:35.043

您需要创建`P_Array`一个实际的数组，而不仅仅是字符串中以空格分隔的单词列表：

```
P_Array=( $(cd ${OUT} ; find . -name "*TXT") )
Plen=${#P_Array[@]} 
```

如果任何文件的文件名中有空格，这将不起作用，因为这样的文件将作为数组中的部分文件名序列结束。在这种情况下，你将不得不做类似的事情

```
pushd "$OUT"         # Switch to the desired directory
P_array=( *TXT )
popd                 # Return to the previous directory, if you like.
Plen=${#P_Array[@]} 
```

（实际上，这可能比一`find`开始就使用更好。）

* * *

如果你使用数组，你已经放弃了 POSIX 合规性，所以这里是你的脚本的其余部分，用更多的 bash-isms 进行了简化：

```
date_fmt='%m/%d/%y %T'
if (( Plen = 0 ))
then
    # $(...) is still POSIX, but is also preferred over backticks
    # printf is also preferred, and you can transfer the formatting
    # from date to the printf.
    printf "%($date_fmt)T: ZERO FILES\n" $(date +%s)
fi

# Quote the array expansion, in case of space-containing filenames
for name in "${P_Array[@]}"
do
    ###Database Bulk Load Here###
    # (be sure to quote $name when doing the bulk load)
    printf "%($date_fmt)T: $name was loaded\n" $(date +%s)
done 
```

# sql - oleDbDataAdapter 更新字符串

> ID：12269983
> 
> 赞同：1
> 
> 时间：2012-09-04T19:19:53.377
> 
> 标签：sql, database, vb.net

我的目标是从数据库中取出表，修改并将其放回同一个地方。

我决定使用 oleDbDataAdapter.Fill/.Update 例程来防止逐个单元格的更新并加快进程。将表从 mdb.DataBase 读取到 DataTable 是成功的，并且修改成功，但是我更新数据库失败了。

我可以假设我遇到麻烦的两种方式：1\. adapter.UpdateCommand 错误 2\. 在调用 adapter.update(datatable) 之前遗漏了（一些）关键参数

固定点 1

*   我已将主键包含在选择查询中
*   我尝试使用 dbCommandBuilder.GetUpdateCommand()
*   我试图从 dbCommandBuilder 属性中复制更新字符串并将其用作 sting 参数失败。

在固定点 2

我已经实现了在循环中使用 UpdateCommand.Parameters 和直接填充目标数据库的选项，逐行逐个元素地填充。但我试图避免它并立即更新整个表。

你能解释一下我想念什么吗？

这是一个代码示例

```
 Dim connetionString As String
                    Dim oledbCnn As OleDbConnection
                    Dim oledbAdapter As OleDbDataAdapter
                    Dim sssql, susql As String

connetionString = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" & sMDBFile & ";"
sssql = "SELECT MAPINFO_ID, " & SFieldName & ", AB_P_PIND, AB_P_CITY, " _
  & "AB_P_DISTR, AB_P_SDISTR, AB_P_STR, AB_P_NUM, AB_P_BLD, AB_P_LIT, AB_P_XTRA, " _
  & "AB_P_XEPT, AB_UINF, AB_P_DONE FROM " & DBTableName
susql = "UPDATE " & DBTableName & " SET AB_P_PIND = @AB_P_PIND, AB_P_CITY = @AB_P_CITY, " _
  & "AB_P_DISTR = @AB_P_DISTR, AB_P_SDISTR = @AB_P_SDISTR, AB_P_STR = @AB_P_STR, " _
  & "AB_P_NUM = @AB_P_NUM, AB_P_BLD = @AB_P_BLD, AB_P_LIT = @AB_P_LIT, AB_P_XTRA = @AB_P_XTRA, " _
  & "AB_P_XEPT = @AB_P_XEPT, AB_UINF = @AB_UINF, AB_P_DONE = @AB_P_DONE WHERE MAPINFO_ID = @MAPINFO_ID"
'susql = "UPDATE TabVer1 SET Адрес = ?, AB_P_PIND = ?, AB_P_CITY = ?, AB_P_DISTR = ?, AB_P_SDISTR = ?, " _
'  & "AB_P_STR = ?, AB_P_NUM = ?, AB_P_BLD = ?, AB_P_LIT = ?, AB_P_XTRA = ?, AB_P_XEPT = ?, " _
'  & "AB_UINF = ?, AB_P_DONE = ? WHERE ((MAPINFO_ID = ?) AND ((? = 1 AND Адрес IS NULL) OR " _
'  & "(Адрес = ?)) AND ((? = 1 AND AB_P_PIND IS NULL) OR (AB_P_PIND = ?)) AND " _
'  & "((? = 1 AND AB_P_CITY IS NULL) OR (AB_P_CITY = ?)) AND ((? = 1 AND AB_P_DISTR IS NULL) " _
'  & "OR (AB_P_DISTR = ?)) AND ((? = 1 AND AB_P_SDISTR IS NULL) OR (AB_P_SDISTR = ?)) AND " _
'  & "((? = 1 AND AB_P_STR IS NULL) OR (AB_P_STR = ?)) AND ((? = 1 AND AB_P_NUM IS NULL) " _
'  & "OR (AB_P_NUM = ?)) AND ((? = 1 AND AB_P_BLD IS NULL) OR (AB_P_BLD = ?)) AND " _
'  & "((? = 1 AND AB_P_LIT IS NULL) OR (AB_P_LIT = ?)) AND ((? = 1 AND AB_P_XTRA IS NULL) OR " _
'  & "(AB_P_XTRA = ?)) AND ((? = 1 AND AB_P_XEPT IS NULL) OR (AB_P_XEPT = ?)) AND " _
'  & "((? = 1 AND AB_UINF IS NULL) OR (AB_UINF = ?)) AND ((? = 1 AND AB_P_DONE IS NULL) OR (AB_P_DONE = ?)))"
' second ver of sussql (under comments) is taken from dbCommandBuilder's properties                    

oledbCnn = New OleDbConnection(connetionString)
Try
   oledbCnn.Open()
   oledbAdapter = New OleDbDataAdapter
   dTable.PrimaryKey = New DataColumn() {dTable.Columns("MAPINFO_ID")}
      'Dim DbCommandBuilder As New OleDbCommandBuilder(oledbAdapter)
      ' here's some illustrations of different ways I've tried with update strings
   oledbAdapter.SelectCommand = New OleDbCommand(sssql, oledbCnn)
      'oledbAdapter.UpdateCommand = DbCommandBuilder.GetUpdateCommand()
   oledbAdapter.UpdateCommand = New OleDbCommand(susql, oledbCnn)

   oledbAdapter.Fill(dTable)

   ''' dTable modification

   dTable.AcceptChanges()
      ' DataTable updates 
   oledbAdapter.Update(dTable)
      ' Database does not
   oledbAdapter.Dispose()
   oledbCnn.Close()

Catch ex As Exception
   MsgBox("Can not open connection ! ")
End Try 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T19:27:42.743

您的代码存在问题：使用参数来避免 sql 注入，使用`Using...End Using`一次性对象的格式，包括连接、适配器对象等。

对于眼前的问题，请尝试在更新之前不要调用 AcceptChanges。AcceptChanges 是一个标志，用于标记哪些行是脏的。

```
oledbAdapter.Update(dTable)
dTable.AcceptChanges() 
```

# java - 如果刽子手错误，则无法显示丢失消息

> ID：12269984
> 
> 赞同：0
> 
> 时间：2012-09-04T19:20:00.353
> 
> 标签：java, image, if-statement

我使用 if 语句来更改我的hangman 应用程序的图像，到目前为止它可以工作，但是当我想在错误达到 6 时显示一条消息时，它会以某种方式打印`You Lose`在每个错误中。

```
if(wrong >= 1)
       icon = new ImageIcon("hangman1.jpg");
   if(wrong >= 2)
       icon = new ImageIcon("hangman2.jpg");
   if(wrong >= 3)
       icon = new ImageIcon("hangman3.jpg");
   if(wrong >= 4)
       icon = new ImageIcon("hangman4.jpg");
   if(wrong >= 5)
       icon = new ImageIcon("hangman5.jpg");
   if(wrong >= 6)
       icon = new ImageIcon("hangman6.jpg");
                 JOptionPane.showMessageDialog(null, "You Lose");
     label.setIcon(icon); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T19:21:25.973

在这种情况下，您的代码需要括号，否则只有第一行是条件的一部分。

此外，当错误 > 1 时，您的条件都会被执行。使用 == 和/或 else/if 构造。

```
if (wrong == 1) {
    ...
} 
else if (wrong == 2) {
    ...
}
...
else if(wrong >= 6) 
{
       icon = new ImageIcon("hangman6.jpg");
                 JOptionPane.showMessageDialog(null, "You Loose");
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-04T19:26:51.437

问题是您没有`{ }`在每个 if 语句中运行的代码周围使用大括号。如果没有大括号，则只运行每个 if 语句之后的行。

```
//icon is always hangman plus the number wrong
icon = new ImageIcon("hangman" + wrong + ".jpg");

// only show the message dialog after 6 wrong guesses
if(wrong >= 6){
  JOptionPane.showMessageDialog(null, "You Lose!");
}

label.setIcon(icon); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T19:33:31.963

您已经得到了问题的答案，缺少`{}`. 但请继续阅读`switch case`

尝试这个：

```
switch(wrong) {
case 1: icon = new ImageIcon("hangman1.jpg");
        break;
case 2: icon = new ImageIcon("hangman2.jpg");
        break;
//and so on...
case 6: icon = new ImageIcon("hangman6.jpg");
        JOptionPane.showMessageDialog(null, "You Loose");
        break;
} 
```

你不应该使用太多`else if`. 它会使代码的可读性降低。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T19:43:15.737

所以弄清楚了原因，因为我的标签不知道它已被新图像更新，这要归功于大括号的想法

```
if(wrong == 1){
       icon = new ImageIcon("hangman1.jpg");
       label.setIcon(icon);
                 }
                 else if(wrong == 2)
                 {
       icon = new ImageIcon("hangman2.jpg");
       label.setIcon(icon);
                 }
                 else if(wrong == 3)
                 {
       icon = new ImageIcon("hangman3.jpg");
       label.setIcon(icon);
                 }
                else if(wrong == 4){
       icon = new ImageIcon("hangman4.jpg");
       label.setIcon(icon);
                 }
                else if(wrong == 5){
       icon = new ImageIcon("hangman5.jpg");
       label.setIcon(icon);
                 }
                else if(wrong == 6){
       icon = new ImageIcon("hangman6.jpg");
       label.setIcon(icon);
                 JOptionPane.showMessageDialog(null, "You Lose");   
                 } 
```

# javascript - Javascript 扩展验证

> ID：12269985
> 
> 赞同：0
> 
> 时间：2012-09-04T19:20:10.950
> 
> 标签：javascript, jquery, validation, file-extension

所以，我要做的是在发送到服务器端（php）的其他验证之前使用 javascript/jquery 验证文件扩展名。

我知道这里有很多资源，但是，我正在尝试以自己的方式制作。

我达到了一个简单的想法，就像上面的代码：

```
// remove all elements to take only the file name
var fileName        = $('input[type=file]').val().split('\\').pop().toLowerCase();  
    validExtension  = ['.jpg', '.png', '.gif','.jpeg']; // list of valid extensions

$.each(validExtension, function (e, val) { // run thru all valid extensions
    if (fileName.indexOf(val) !== -1) { // if found a valid one, stop validation.
        invalidExt = false;
        return false;
    } else { // else, error true...
        invalidExt = true;
    }
});

if (invalidExt) {
    alert('error');
}else{
    alert('success');
} 
```

问题是，如果文件`.jpg`在名称中间有一个或任何其他有效扩展名，例如`desert.jpg.exe`，验证将通过。那么，我该如何解决呢？

也许找到一种方法来获取文件名的最后一个扩展名？

当然，任何提示，请成为我的客人。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T19:28:17.680

这是我的做法：

```
var validExtensions = {
    jpg: true,
    jpeg: true,
    png: true,
    gif: true
};

var filename = $('input[type=file]').val().toLowerCase();

if (!validExtensions[filename.substr(filename.lastIndexOf('.')+1)]) {
    alert('Invalid extension');
} 
```

*   将有效的扩展名放在对象中可以让您快速 (O(1)) 查找时间。
*   用于`lastIndexOf`获取文件名中的最后一个句点。这样，您总是在查看扩展名，而不管它之前是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T19:31:28.290

没有 jQuery ：

```
var filename = "photo.exe.jpg";

var validExtensions = ['jpg', 'png', 'gif', 'jpeg'];
var filenameLowerCase = filename.toLowerCase();
var isValid = false;

for(var i=0; i<validExtensions.length; i++)
    if(filenameLowerCase.indexOf(validExtensions[i], filenameLowerCase.length - validExtensions[i].length) !== -1)
        isValid = true; 
```

# syntax - Clojure/Lisp 宏可以用来实现这个 lambda 语法吗？

> ID：12269992
> 
> 赞同：2
> 
> 时间：2012-09-04T19:20:50.943
> 
> 标签：syntax, clojure, macros, lambda, nested-function

```
((#(%a %b') {a:1 b:2}) {a:3 b:4}) -> (1 4) 
```

在 JavaScript 中将与以下内容相同：

```
(function(x){ return function(y){ return [x.a,y.b]; }})({a:1,b:2})({a:3,b:4});
Output: [1,4] 
```

因此，换句话说，lambdas 的简短语法（不同于 Clojure 当前的实现）允许嵌套函数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T03:00:05.043

如果您只想使用没有任何宏的直接 Clojure 代码（即等效于 JavaScript 版本）来执行此操作，那么您只需要：

```
(((fn [x] (fn [y] (list (:a x) (:b y)))) {:a 1 :b 2}) {:a 3 :b 4}) 
=> (1 4) 
```

您也可以使用宏来执行此操作，前提是您选择了不同于`#()`实际宏标识符的其他形式，例如，您可以这样做：

```
(((my-lambda %a %b) {:a 1 :b 2}) {:a 3 :b 4}) 
=> (1 4) 
```

（ps我修复了原始问题中的地图关键字，`a:1`不起作用.....）

方法是：

*   创建一个名为`my-lambda`
*   让这个宏检查它传递的符号并将它们转换为针对自动生成的符号的关键字查找
*   使用自动生成的符号输出函数的代码，例如：`(fn [sym1] (fn [sym2](list (:a sym1) (:b sym2))))`

这种方法对嵌套函数非常有效。Clojure lambdas 要知道的重要一点是它 `(fn [...] ...)`可以嵌套，但不能嵌套`#(...)`（否则会导致函数参数的歧义）。

您不能`#()`直接覆盖语法，因为 Clojure 还不支持阅读器宏。我实际上认为这是一件好事 - 允许任意重新定义语法可能会导致一些人编写相当难以维护的代码而没有明显的好处（节省一些打字字符但降低可读性/代码理解在我看来*并不是*一个好处）。

我想认为我`#()`在 Clojure 代码中看到的任何地方我都知道它是一个常规匿名函数，而不必担心有人重新定义它来做一些奇怪的事情的可能性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T20:50:06.613

匿名阅读器宏`#( )`语法不允许嵌套匿名函数，因为不清楚给定参数`%2`对应于哪个函数。人们已经提出了解决邮件列表歧义的方法，并且一致认为该`(fn [arg] ...)`表格足够短且足够清晰，可以在大多数情况下使用；在某些情况下，嵌套`%2`解析可能不够清晰或简洁。

```
(function(x){ return function(y){ return [x.a,y.b]; }}) 
```

可以写成

```
(fn [x] (fn [y] [(.x a) (.y b)])) 
```

**添加您自己的允许嵌套函数的读取器宏会很困难，**因为 Clojure 故意不支持用户定义的读取器宏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-25T04:55:39.343

对于 Clojure 1.4，Clojure**确实**支持用户定义的阅读器宏，您可以使用它来定义自己的 lambda 语法。但是，它们不允许您劫持`#()`语法。[在此处](https://github.com/clojure/clojure/blob/master/changes.md#21-reader-literals)获取详细信息。

# excel - 对象所需的错误 vba

> ID：12269993
> 
> 赞同：0
> 
> 时间：2012-09-04T19:20:51.127
> 
> 标签：excel, vba

我有一个宏，它应该连接用户输入的各种字符串，以填充基于用户提供的属性的其他活动目录用户属性的其他单元格。

```
Option Explicit

Sub SubStringConcatenate()

'variables
Dim strFirstName As String
Dim strSurName As String
Dim strDomain As String
Dim strOU As String
Dim strChildOU As String

Dim intRowCount As Integer

Dim rngLastRow As Range

Set rngLastRow = Worksheets("NewADUserAttribs").Cells.End(xlUp)

'set first row to be processed
intRowCount = 2

'loop until all used rows have been processed
For Each rngLastRow In Sheets("NewADUserAttribs").UsedRange.Rows.Count

'define name variables
strFirstName = Cells(intRowCount, 1).Value
strSurName = Cells(intRowCount, 2).Value

'define initials cell location and concatenate
Cells(intRowCount, 3).Value = Left(strFirstName, 1) & Left(strSurName, 1)

' define fullname cell location and concatenate
Cells(intRowCount, 4).Value = strFirstName & " " & strSurName

'define SAM cell location and concatenate
Cells(intRowCount, 5).Value = Left(strFirstName, 2) & Left(strSurName, 4)

'define domain string variable and logon range and concatenate
Cells(intRowCount, 7).Value = strFirstName & "." & strSurName

'add 1 to row count to prepare for next row in table
intRowCount = intRowCount + 1

Next

End Sub 
```

当我调试时没有错误。但是当我尝试运行宏时，我得到了 object required 错误并且它没有说明它在代码中的位置。我认为它在 for each 语句中的某个地方。我正在使用 Excel 2010。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T19:32:10.483

```
For Each rngLastRow In Sheets("NewADUserAttribs").UsedRange.Rows.Count 
```

应该

```
For Each rngLastRow In Sheets("NewADUserAttribs").UsedRange.Rows 
```

但是你没有`rngLastRow`在循环中使用。您可以像这样使用它（例如）：

```
rngLastRow.Cells(3).Value = Left(strFirstName, 1) & Left(strSurName, 1) 
```

# java - java - 在 webapp 和后端 java 进程之间共享数据

> ID：12269998
> 
> 赞同：0
> 
> 时间：2012-09-04T19:21:12.203
> 
> 标签：java

我只是想听听一些关于我团队的 webapp 解决方案的不同意见。我有一个巨大的 xml（1 或 2G 大小），它被读入内存，这是一个临时解决方案。当前代码在应用程序启动时生成一个单独的线程，该线程每天醒来读取一次 xml 并为前端组织数据。线程读取 xml 并组织数据大约需要 10 分钟。所以我想稍微改变一下架构。我想在独立的 java 进程上运行单独的线程并负责读取 xml 而不是在 Web 应用程序中生成线程。

我遇到的解决方案是我应该如何让 webapp 获取在独立 java 进程中组织的修改数据（当我将对象序列化为文件时大约 100MB）。我是否仍然需要一个单独的线程来反序列化从独立 java 进程序列化的对象？

我很欣赏不同的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T19:29:00.867

这个巨大的 xml 是从哪里来的？

在不知道任何其他事实的情况下，我想知道为什么这个巨大的 XML 不是数据库，而您的后端也不是查询数据库的相对简单的程序。

# facebook - 如何将域直接重定向到 Facebook 页面

> ID：12269999
> 
> 赞同：0
> 
> 时间：2012-09-04T19:21:13.847
> 
> 标签：facebook, redirect

当我尝试将我的域[http://styleandstuff.pl](http://styleandstuff.pl)直接重定向到 Facebook 有趣页面时，但由于安全限制，它会将我重定向到“转到 Facebook 页面”。我知道这是可能的，因为有些域直接进入像[fapopedia.pl](http://fapopedia.pl)这样的 fb 页面。任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T22:37:22.533

在您的页面根目录中创建 .htaccess 文件，chmod 644 并在其中写入：

```
RewriteEngine On 
RewriteCond %{HTTP_HOST} ^mydomain.com
RewriteCond %{REQUEST_URI} !/(.+) [NC] 
RewriteRule (.*) http://redirecttodomain.com [R=301,L] 
RewriteCond %{HTTP_HOST} ^www.mydomain.com 
RewriteCond %{REQUEST_URI} !/(.+) [NC] 
RewriteRule (.*) http://redirecttodomain.com [R=301,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T21:10:58.467

您的网站正在尝试在 iFrame 中呈现 Facebook。查看您页面的源代码，Facebook 网站正在后台加载，但我测试过的浏览器（FF 和 Chrome）正在加载`noframes`内容。我不确定这是一个错误，还是 Facebook 的“功能”，以确保他们的网站没有被陷害。

您引用的工作示例使用 http 301 重定向到他们的 Facebook 页面。您可以在`.htaccess`文件中进行设置。