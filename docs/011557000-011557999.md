# StackOverflow 问答 11557000-11557999

# asp.net-mvc - 在 Asp.Net Mvc 中创建 Json？

> ID：11557000
> 
> 赞同：1
> 
> 时间：2012-07-19T08:40:15.933
> 
> 标签：asp.net-mvc, json

我想这样创建：

```
[
    ['date', 'T1', 'T2', 'T3'],
    ['2000', 1, 1, 0.5],
    ['2001', 2, 0.5, 1],
    ['2002', 4, 1, 0.5],
    ['2003', 8, 0.5, 1],
    ['2004', 7, 1, 0.5]
] 
```

从我的模型

```
public partial class AylikOkumaIstatistik
{
    public string sno { get; set; }
    public string date{ get; set; }
    public Nullable<decimal> TotalUsageValue { get; set; }
    public string UsageType { get; set; } // T1,T2,T3
} 
```

使用json可以做到这一点吗？如果可能的话，有没有关于这个主题的代码示例或教程。如何将数据从数据库转换为 json？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T08:45:10.450

如果可以使用 Mvc 4？您可以添加 WebApi 控制器来管理 json 请求。您只需在 WepApi 控制器方法中返回您的实体，它将自动转换为 json 对象，反之亦然。即使您在发布请求正文中有 json 对象，它也会起作用，它们也会映射到您的 .net 实体并作为传入参数进入控制器方法。如果您需要，我可以提供您需要的任何示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T08:50:01.267

> 使用json可以做到这一点吗？

当然，您可以将`object[]`类型用作视图模型（其中每个元素本身都是一个`object[]`）：

```
public ActionResult Index()
{
    object[] model = new[]
    {
        new object[] { "date", "T1", "T2", "T3" },
        new object[] { "2000", 1, 1, 0.5 },
        new object[] { "2001", 2, 0.5, 1 },
        new object[] { "2002", 4, 1, 0.5 },
        new object[] { "2003", 8, 0.5, 1 },
        new object[] { "2004", 7, 1, 0.5 },
    };
    return Json(model, JsonRequestBehavior.AllowGet);
} 
```

就将数据库中的数据转换为此视图模型而言，您必须举例说明数据在数据库中的表示方式。理想情况下，提供一个硬编码示例来说明您的模型的外观。但将您的域模型投影到`object[]`.

# javascript - 使用 setTimeout() 处理 jQuery“媒体查询”类型的情况有什么问题吗

> ID：11557002
> 
> 赞同：3
> 
> 时间：2012-07-19T08:40:30.540
> 
> 标签：javascript, jquery, html, css, media-queries

我正在开发一个响应式网站。可以这么说，我正在浏览一种处理 jQuery“媒体查询”更改的方法。

我对某些元素进行了一些计算，例如高度、宽度等，当媒体查询发生变化时，我需要重新计算这些，例如从 1160 像素到 980 像素。

我找到了一个感觉不错的解决方案，因为大多数浏览器（如果不是全部？）都应该支持它，但我只是不确定是否有任何性能或任何其他问题与`setTimeout()`运行频率一样高。

jsfiddle 的[实时示例](http://jsfiddle.net/9X4up/45/)

```
setInterval(function() {
    //code here
}, 100);​ 
```

也许还有其他更好的方法可以使用 paulirish 或任何其他工作人员已经制作的插件？请用你在这个问题上的经验给我建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T09:02:06.253

我正在使用此代码来处理 jquery“媒体查询”。我采用了一个元素，它获得了我的媒体查询（480、980、1160）的大小作为选择器，通常是一个包装器，或者在我的情况下是标题。

```
var myDivWidth = $('YOUR-SELECTOR').width();
$(window).resize(function () {

    if ($('YOUR-SELECTOR').width() != myDivWidth) {

        //If the media query has been triggered
                myDivWidth = $('YOUR-SELECTOR').width();

        //Your resize logic here                
         }
}); 
```

# php - 使用 PHP 的 Jquery 自动完成功能

> ID：11557003
> 
> 赞同：0
> 
> 时间：2012-07-19T08:40:31.803
> 
> 标签：php, jquery

我已经搞砸了太久，试图让它工作。任何人都可以看看你是否有任何指示。

```
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <link type="text/css" rel="stylesheet" href="autocomplete.css" />      
        <script src="jquery-1.7.2.min.js" type="text/javascript"></script>
        <script src="jquery-ui-1.8.21.custom.min.js" type="text/javascript"></script>
        <title></title>
    </head>
    <body>
        <style>
            .ui-autocomplete-loading { background: white url('images/ui-anim_basic_16x16.gif') right center no-repeat; }
        </style>
        <script>
            $(function() {                
                $( "#materials" ).autocomplete({
                    source: "autocomplete.php",
                    minLength: 2
                });
            });
        </script>
        <div class="demo">

            <div class="ui-widget">
                <label for="materials">Materials: </label>
                <input id="materials" />
            </div>
        </div><!-- End demo -->            
    </body>
</html> 
```

和 php 文件是

```
require_once "db_con.php"; // Database connection, I know this works.
$q = strtolower($_GET["q"]);
if (!$q)
    return;

$sql = "SELECT * FROM materials WHERE name LIKE '%$q%'"; 
$rsd = mysqli_query($dbc, $sql) or die(mysqli_error($dbc));
while ($rs = mysqli_fetch_array($rsd)) {
    $cname = $rs['name']; // I know this all returns correctly
    echo json_encode($cname); // First time I have ever used json, error might be here.
} 
```

我正在尝试拥有一个由 Jquery 提供支持的自动完成网页，该网页是使用 PHP 从 mysql 提供的数据。简单的。只是它不起作用...

有人知道我缺少什么吗？

问候

- - 编辑 - -

为了检查这是否有效，我完成了以下操作：

```
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <link type="text/css" rel="stylesheet" href="autocomplete.css" />      
        <script src="jquery-1.7.2.min.js" type="text/javascript"></script>
        <script src="jquery-ui-1.8.21.custom.min.js" type="text/javascript"></script>
        <title></title>
    </head>
    <body>
        <style>
            .ui-autocomplete-loading { background: white url('images/ui-anim_basic_16x16.gif') right center no-repeat; }
        </style>
        <script>
            $(function() {                
                $( "#materials" ).autocomplete({
                    source: <?php
include_once 'db_con.php';
$sql = "SELECT name FROM materials";
$rsd = mysqli_query($dbc, $sql) or die(mysqli_error($dbc));
echo '[';
while ($rs = mysqli_fetch_array($rsd)) {
    echo "'" . $rs['name'] . "', "; //add results to array
}
echo ']';
?>,
                        minLength: 2
                    });
                });
        </script>
        <div class="demo">

            <div class="ui-widget">
                <label for="materials">Materials: </label>
                <input id="materials" />
            </div>

        </div><!-- End demo -->        
    </body>
</html> 
```

效果很好。太好了，我想我会保留这段代码，而不是它应该如何工作，但是......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T08:46:24.470

在 PHP 部分，也许尝试这样的事情：

```
$res = array();  //create a new array
while ($rs = mysqli_fetch_array($rsd)) {
  $res[] = (string)$rs['name']; //add results to array, casted as string
}
header('Content-type: application/json'); //add JSON headers (might work w/o)
echo json_encode($res);  //output array as JSON 
```

...这样你应该把所有结果都放在一个数组中，比如 `['name1', 'name2', 'name3']`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T08:48:52.657

试试这个代码，它对我有用

```
$().ready(function() {
$("#materials").autocomplete("autocomplete.php", {
        width: 260,
        matchContains: true,
        autoFill:true,
        selectFirst: false
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T09:00:53.257

为了处理来自 php ajax 调用的 json 答案，我自定义了源函数并以这种方式自己处理结果：

```
$(function() {                
    $( "#materials" ).autocomplete({
        source: function(request, response){
            $.post("autocomplete.php", {
                term: request.term
            }, function(data){
                if (data.length == 0) {
                    data.push({
                        label: "No result found",
                    });
                }
                response($.map(data, function(item){
                    return {
                        label: item.name,
                        value: item.name
                    }
                }))
            }, "json");
        },
        minLength: 2,
        dataType : "json"});
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T09:13:08.290

你的PHP全错了：

```
while ($rs = mysqli_fetch_array($rsd)) {
    $cname = $rs['name']; // I know this all returns correctly
    echo json_encode($cname); // First time I have ever used json, error might be here.
} 
```

应该：

```
$cname = array();
while ($rs = mysqli_fetch_array($rsd)) {
    $cname[]['label'] = $rs['name']; // I know this all returns correctly
    break;
}
echo json_encode($cname); // First time I have ever used json, error might be here. 
```

`label`是 jqueryautocomplete 使用的数组行中的默认标签字段（我相信）。此外，返回必须是一个数组数组，每个数组行代表一个匹配项。

您可以通过添加一个值字段来使其更复杂，以使文本框实际上等于：

```
$cname = array();
while ($rs = mysqli_fetch_array($rsd)) {
    $cname[]['label'] = $rs['name']; // I know this all returns correctly
    $cname[]['value'] = $rs['id'];
    break;
}
echo json_encode($cname); // First time I have ever used json, error might be here. 
```

当然我不认为你真的想要`break;`我把它放进去，因为：

```
while ($rs = mysqli_fetch_array($rsd)) {
    $cname = $rs['name']; // I know this all returns correctly
    echo json_encode($cname); // First time I have ever used json, error might be here.
} 
```

对我来说，您实际上是从结果中返回单行。如果您不是并且实际上正在返回所有结果，那么请`break;`退出。

# google-apps-script - 使用自动填充锁定编辑 Google Doc 电子表格中的行或列

> ID：11557004
> 
> 赞同：0
> 
> 时间：2012-07-19T08:40:35.907
> 
> 标签：google-apps-script, google-sheets

如何使用 Google 电子表格中的脚本对列（行）或列（行）进行一次锁定编辑，以免受到列（行）上的自动填充操作的影响。请帮忙。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T15:04:15.820

不幸的是，谷歌还没有发布阻止单元格的方法，只能阻止整个页面，如下代码所示。

```
var sheet = SpreadsheetApp.getActiveSheet();
var permissions = sheet.getSheetProtection();
permissions.addUser('user@example.com');
permissions.setProtected(true);
sheet.setSheetProtection(permissions); 
```

我遵循了他们的路线图，并且有可能在接下来的两个月之间发布此功能。

# php - 将内容从 csv 导入 mysql 数据库

> ID：11557009
> 
> 赞同：2
> 
> 时间：2012-07-19T08:40:46.657
> 
> 标签：php

有一个名为：的mysql数据库`example`，它有一个名为：的表`products`，它有字段：`products_model`和`products_image`。模型字段是唯一的。

现在我有一个名为 .csv 的 csv 文件`data.csv`。其中有两列 products_model 和`products_image`.i 使用以下代码。但它不会将数据导入数据库。我的代码有什么问题？

```
 $fp = fopen("data.csv","r");
$length = 4096; //have to be optional length
$fildDelineate = ',' ;//or "|" declare what you need
$dbhost="localhost";
$dbname="zencartone";
$dbuser="root";
$dbpass="";
$link  = mysql_connect($dbhost,$dbuser,$dbpass);
if (!$link) {
    die('Could not connect: ' . mysql_error());
}
mysql_select_db($dbname);

$databasetable  = 'products';

$counter = 1;//to omission first row if it is table headers

while($line = fgetcsv($fp,$length,$fildDelineate)){
    foreach($line as $key=>$value){
        //for example insert in 3 column
        $importSQL = "insert into $databasetable  (products_model, products_image) values('$line[0]','$line[1]')";
        mysql_query($importSQL) or die(mysql_error());
    }
    $counter++;
}
fclose($fp); 
```

数据.csv：

有两列：

```
products_model  products_image
MG200MMS    dress/201247561673.jpg
MG400-32MB  dress/2012471141673.jpg
MSIMPRO dress/201247741673.jpg
DVD-RPMK    dress/2012471831673.jpg
DVD-BLDRNDC dress/2012474221673.jpg
DVD-MATR    dress/201112132056773.jpg 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T08:44:15.410

你的问题在循环中：

```
while(!fopen($fp)){
    if(!$line = fgetcsv($fp,$length,$fildDelineate,'')&& $counter){
        continue;
    }
    foreach($line as $key=>$value){ 
```

是不正确的。您的文件已经打开（在第一行代码中）。在循环中你需要阅读，而不是重新打开。你的循环应该是这样的：

```
while($line = fgetcsv($fp, 0, "\t")){
    foreach($line as $key=>$value){
        ...
    }
} 
```

**编辑：**由于您的文件似乎是 TSV（制表符分隔值），我更新了上面的代码以在读取数据时使用制表符作为分隔符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T08:45:46.043

编辑：

使用以下循环：

```
while($line = fgets($fp)) {
    $lineArray = explode("\t", $line); // Use tab as delimiter.
    $importSQL = "insert into $databasetable  (products_model, products_image) values ('".$lineArray[0]."','".$lineArray[1]."')";
    mysql_query($importSQL) or die(mysql_error());
    $counter++;
} 
```

 ~~SQL 错误：

```
$importSQL = "insert into $databasetable values('$line[0]','$line[1]')"; 
```

您需要指定列名：

```
$importSQL = "insert into $databasetable (col1, col2) values('$line[0]','$line[1]')"; 
```

编辑：`fgetcsv($fp,$length,$fildDelineate,'')`

附件参数设置为空字符串。如果 CSV 中的值周围没有任何附件，则可以摆脱它：

```
fgetcsv($fp,$length,$fildDelineate) 
```

否则，设置正确的附件（双引号或单引号）。~~

# twig - Twig - 使用引号作为连接过滤器的分隔符

> ID：11557010
> 
> 赞同：2
> 
> 时间：2012-07-19T08:40:49.100
> 
> 标签：twig, htmlspecialchars

我向模板传递了一个字符串数组，我想将其转换为 jaavascript 数组：

控制器文件（php）：

```
$myVar = array('a','b','c'); 
```

所需的html：

```
var myVar = ["a","b","c"]; 
```

我尝试以下代码（树枝）：

```
var myVar = ["{{ myVar | join('","') }}"]; 
```

但是树枝生成器将引号转换为 html 实体，结果如下：

```
var myVar = ["a&quot;,&quot;b&quot;,&quot;c"]; 
```

有什么想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T14:57:20.007

您需要应用[`raw`](http://twig.sensiolabs.org/doc/filters/raw.html)过滤器：

```
var myVar = ["{{ myVar | join('","') | raw }}"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-05T06:21:10.490

Maerlyn 的回答会起作用，但它的缺点是`myVar`数组中的值也将被原始输出，这取决于该变量的来源，可能会导致您的网站存在漏洞，例如 XSS。

我找到了两种方法来做到这一点，同时保持对数组值的转义。第一种是使用带有`if`语句的循环来检查它是否是最后一次迭代，以确定我们是否需要输出连接中使用的“胶水”：

```
var myVar = [{% for val in myVar %}"{{ val }}"{% if loop.last == false %},{% endif %}{% endfor %}] 
```

第二种方法是让 PHP 你的 PHP 处理所有事情，包括转义，然后在 Twig 中输出原始字符串：

```
$arr = array_map(
    function($value) {
        return '"' . htmlspecialchars($value, ENT_QUOTES, 'UTF-8') . '"';
    },
    $arr
);
$myVar = '[' . implode(',', $arr) . ']'; 
```

然后将`$myVar`变量传递给您的视图，然后您可以执行以下操作：

```
{{ myVar|raw }} 
```

# design-patterns - 通过字符串具有不同消息类型的消息代理

> ID：11557013
> 
> 赞同：1
> 
> 时间：2012-07-19T08:40:59.183
> 
> 标签：design-patterns, cross-platform, msmq

我正在寻找一种处理字符串类型（跨平台）的不同类型消息的好方法。

想象下一个场景：

我们有一个方法：`onMessageReceive(String message)`
参数值：'order.new:1' 或 'orderstatus.update:12' 等

现在我们可以通过分隔符 ':' 将消息拆分为 'action' 和 'parameter'

```
String action = 'order.new'
String parameter = '1' 
```

我们可以把它放在一个`if-else`声明中

```
if (message.equels("order.new") {
    // get the order

} else if (message.equels("orderstatus.update") {
    // get the new order status<br/>
} 
```

但我不喜欢这种方式。如果只有 2 个动作是“可以的”，但如果有 50 个动作呢？

还有哪些其他解决方案（跨平台）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T18:56:41.317

您可以使用单个方法定义通用消息处理程序接口

```
 interface MessageHandler {
     void handleMessage(String parameter);
  } 
```

然后，您可以拥有一个处理程序注册表，每种类型的消息都有一个处理程序。注册表可以有这样的接口：

```
 class HandlersRegistry {
      public MessageHandler getHandler(String handlerType);
      public void addHandler(String handlerType, MessageHandler handler);
  } 
```

Internally, handlers registry can store a map that would map a string (handler type) to an appropriate MessageHandler object. This way you avoid long if-else or switch statements and you can easily extend the code to handle new types of messages.

# c++ - 未解决的符号问题

> ID：11557020
> 
> 赞同：0
> 
> 时间：2012-07-19T08:41:30.570
> 
> 标签：c++

我有以下项目文件：

```
//connections.cpp

#include "stdafx.h"
#include "LibraryHeaders.h"
#include "FileManager.h"

#define WSAVersion 0x202
#define GSMsgID 0x100

extern HWND Main_hWnd;

bool InitConnections ()
{
    FileManager::ConnectFile *connectfile = FileManager::ReadConnectFile(connectfile);
    SockBase GSConnection(WSAVersion, TCP, connectfile->GS_IP, connectfile->GS_Port, Main_hWnd, GSMsgID);
    if (GSConnection.Connect() != true) {return false;}
    return true;
}

//FileManager.cpp
#include "stdafx.h"
#include "FileManager.h"
#include "LibraryHeaders.h"

using namespace FileManager;

ConnectFile* ReadConnectFile(ConnectFile *ConnectStruct)
{
    FileLibrary connectfile("DMOConnection.cfg");
    if (connectfile.OpenFile(HEAP, OPEN_EXISTING, FILE_ATTRIBUTE_ARCHIVE, PAGE_READWRITE) != true) {return false;}
    ConnectStruct->GS_IP = connectfile.parser->str_GetToken((char*)connectfile.FileBuff);
    if (ConnectStruct->GS_IP == (const char*) -1) {return false;}
    ConnectStruct->GS_Port = connectfile.parser->int_GetToken((char*)connectfile.FileBuff);
    if (ConnectStruct->GS_Port == -1) {return false;}
    return ConnectStruct;
}

//FileManager.h
namespace FileManager
{
    struct ConnectFile
    {
        const char* GS_IP;
        unsigned int GS_Port;
    };

    ConnectFile* ReadConnectFile(ConnectFile*);
} 
```

在尝试构建项目时，我收到了这个错误：

```
Connections.obj : error LNK2019: unresolved external symbol "struct FileManager::ConnectFile * __cdecl FileManager::ReadConnectFile(struct FileManager::ConnectFile *)" (?ReadConnectFile@FileManager@@YAPAUConnectFile@1@PAU21@@Z) referenced in function "bool __cdecl InitConnections(void)" (?InitConnections@@YA_NXZ) 
```

我不明白为什么，链接器应该查找并看到我在 FileManager.cpp 上定义了 FileManager::ReadConnectFile 但它没有，任何提示如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T08:42:18.027

您正在定义一个自由函数：

```
ConnectFile* ReadConnectFile(ConnectFile *ConnectStruct) 
```

非会员：

```
ConnectFile* FileManager::ReadConnectFile(ConnectFile *ConnectStruct) 
```

完全不同。

还：

```
using namespace FileManager; 
```

和

> 错误 LNK2019：未解析的外部符号“struct FileManager::ConnectFile [...]

建议您有 a`namespace FileManager`和 a `struct FileManager`... 使用相同名称的任何理由？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T09:01:05.617

我通过在命名空间中声明函数来修复它：

```
namespace FileManager
{
    struct ConnectFile
    {
        const char* GS_IP;
        unsigned int GS_Port;
    };
}

using namespace FileManager;
ConnectFile* ReadConnectFile(ConnectFile *ConnectStruct); 
```

IDE是VC11 Beta，感谢您的回答。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T12:03:13.640

编码

`using namespace FileManager;
ConnectFile* ReadConnectFile(ConnectFile *ConnectStruct)
{ ...some definition...}`

**不在**命名空间 FileManager 中定义 ReadConnectFile 函数，而是在全局命名空间中。

# vsx - 如何使非活动/隐藏的“工具窗口”的命令可以访问？

> ID：11557025
> 
> 赞同：0
> 
> 时间：2012-07-19T08:41:48.040
> 
> 标签：vsx, vspackage

我有一个 VSPackage，其中一些命令在 Initialize() 函数中注册，并且可以使用工具栏/菜单/快捷键全局访问。此 VSPackage 还有一个工具窗口（派生自 ToolWindowPane），类似于解决方案资源管理器，其命令在 OnCreate() 中注册。当工具窗口处于活动状态/处于焦点时，工具窗口命令也可以通过工具栏/菜单/快捷键正常工作。但是当它隐藏在另一个窗口（例如解决方案资源管理器）后面时，工具窗口命令将无法访问。

请让我知道如何使非活动工具窗口命令可访问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T09:36:11.283

我找到了解决方案：应该首先将命令处理程序添加到主包，然后添加到 ToolWindow，否则 ToolWindow 命令只有在获得焦点时才会起作用。

请参考VSSDK IDE 示例的[PersistedWindowPane.cs](http://code.msdn.microsoft.com/VSSDK-IDE-Sample-Tool-WPF-8823e6d1/sourcecode?fileId=115&pathId=1888183831)和[PackageToolWindow.cs中的函数 DefineCommandHandler()。](http://code.msdn.microsoft.com/VSSDK-IDE-Sample-Tool-WPF-8823e6d1/sourcecode?fileId=115&pathId=1252070465)

# objective-c - SMJobRemove 成功，但 plist 和 helper 工具没有被删除

> ID：11557026
> 
> 赞同：5
> 
> 时间：2012-07-19T08:41:49.417
> 
> 标签：objective-c, macos, cocoa, launchd

我正在尝试删除通过 安装的特权帮助工具`SMJobBless`，我得到一个正返回值并且没有错误，但是 /Library/PrivilegedTools 和 /Library/LaunchDaemons 的文件没有被删除。我必须自己删除这些文件吗？

从我阅读的文档中：

> 返回值 如果作业成功删除，则返回 true，否则返回 false。

我正在调用以下内容来删除该工作： `result = SMJobRemove(kSMDomainSystemLaunchd, (__bridge CFStringRef)label, _authRef, YES, &errorCF);`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T10:16:17.223

谢谢**jatoben**，该线程有我正在寻找的答案。

怀疑您必须自己删除文件或使用以下内容：（取自 Apple 开发论坛：）

> SMJobRemove 相当于“launchctl remove”。也就是说，它会从 launchd 中删除作业，但对磁盘完全没有影响。因此，该作业将在您下次启动时重新加载。要解决这个问题，您必须自己删除 plist 或通过 fork/exec'ing “launchctl unload -w”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-30T10:00:30.587

你见过[https://github.com/brenwell/SMJobBless-Demo/blob/master/Uninstall.sh](https://github.com/brenwell/SMJobBless-Demo/blob/master/Uninstall.sh)吗？这对我很有帮助。

# c# - 在调试 c# 时，当断点命中时防止显示 Visual Studio 窗口

> ID：11557037
> 
> 赞同：1
> 
> 时间：2012-07-19T08:42:24.220
> 
> 标签：c#, visual-studio-2010, debugging

当断点命中时，VS 窗口会自动显示并指向断点所在的行。对于我的情况，这没有帮助。是否可以阻止 VS studio 窗口在断点命中时显示？谢谢

编辑：他的问题是我正在从条形码扫描枪读取。阅读时，断点命中，因此切换到 VS 窗口，并且条形码的某些部分打印在源文件中:) 这就是为什么我不希望它切换到 VS 窗口

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T08:55:35.960

如果在 Visual Studio 中设置断点，则可以通过将“继续执行”指定为“命中时”将其更改为“跟踪点”。

如果断点存在于可执行文件中，则可以按照[如何禁用程序断点/断言中的说明禁用它？](https://stackoverflow.com/questions/115237/how-to-disable-a-programmatical-breakpoint-assert/115238#115238)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T08:44:56.497

您可以启动您的应用程序`Start Without Debugging`或使用`(Ctrl + F5)`它。

或者如果您想调试，但不是针对某个条件，您可以在何时命中断点时提供条件。

# javascript - Firefox 14 打破了 3D 的“卡片翻转”效果——有人知道为什么吗？

> ID：11557040
> 
> 赞同：5
> 
> 时间：2012-07-19T08:42:31.893
> 
> 标签：javascript, jquery, css, firefox

建了一个网站，其中很大一部分依赖于用 3D 效果翻转 DIV，昨天早上升级到 FF14，效果就坏了。它在 FF13、Chrome、IE9 等中运行良好。

我无法发布我正在处理的网站，但该网站以完全相同的方式被破坏 - 它在卡片的正面和背面之间跳转而不是旋转

[http://jigoshop.com/product-category/extensions/](http://jigoshop.com/product-category/extensions/)

有人有想法么？

* * *

**编辑：好的，可能应该包含更多信息**

我正在使用这个插件来处理翻转

[http://www.zachstronaut.com/projects/rotate3di/](http://www.zachstronaut.com/projects/rotate3di/)

当我说它与其他网站的技术相同时，我错了，因为这似乎是纯 CSS，而这个插件是用于 jQuery 的。这是我放在一起的演示的链接

[http://olliesilviotti.co.uk/the-laboratory/cards/demo/](http://olliesilviotti.co.uk/the-laboratory/cards/demo/)

* * *

**编辑：这是查询的使用方式：**

```
$('#boxes .box div.back').hide().css('left', 0);

            function mySideChange(front) {
                if (front) {
                    $(this).parent().find('div.front').show();
                    $(this).parent().find('div.back').hide();

                } else {
                    $(this).parent().find('div.front').hide();
                    $(this).parent().find('div.back').show();
                }
            }

            $('#boxes .box').live('mouseover', function() {
                if (!$(this).data('init')) {
                    $(this).data('init', true);
                    $(this).hoverIntent({
                        over: function () {
                            $(this).find('div').stop().rotate3Di('flip', 250, {direction: 'clockwise', sideChange: mySideChange});
                        },
                        timeout: 1,
                        out: function () {
                            $(this).find('div').stop().rotate3Di('unflip', 500, {sideChange: mySideChange});
                        }
                    });
                    $(this).trigger('mouseover');
                }
            }); 
```

标记如下所示：

```
<div id="boxes">
        <div class="box floated-box">
                <div class="front">Random Number</div>
                <div class="back">I am the back of the card</div>
        </div>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T09:54:56.397

这实际上是因为 Firefox 遵循最新标准。来自[https://developer.mozilla.org/en/Firefox_14_for_developers](https://developer.mozilla.org/en/Firefox_14_for_developers)

> 由于它已从标准草案中删除，因此对 skew() 函数的支持已从 transform 属性中删除。

（这会导致整个`-moz-transform`声明被删除。）

与其向 Bugzilla 报告错误，不如向插件的作者报告。

# null - 为什么我不能在 jDeveloper adf 中插入空值？

> ID：11557043
> 
> 赞同：0
> 
> 时间：2012-07-19T08:42:52.380
> 
> 标签：null, commit, jdeveloper, oracle-adf

在这种情况下，我将使用 jDev 和使用的应用程序模块将空/空值插入我的数据库。

这是 bean 中的代码：

```
public void insertM_LLOYDAGENT(ActionEvent actionEvent) {
    // Add event code here...
    UnderwritingAppModuleImpl am = (UnderwritingAppModuleImpl)ADFUtil.getApplicationModule("UnderwritingAppModuleDataControl");

    try{
        address = noteAddress.getValue().toString();
        city = noteCity.getValue().toString();
        contact = noteContact.getValue().toString();
        country = noteCountry.getValue().toString();
        name = noteName.getValue().toString();
        type = typeOfLloyd.getValue().toString();
        am.insertMLLOYDAGENT(address, city, contact, country, name, type);
    }
    catch(Exception ex){
        am.insertMLLOYDAGENT(address, city, contact, country, name, type);
    }
} 
```

以及 AppModuleImpl 中的代码：

```
 public void insertMLLOYDAGENT(String noteAddress, String noteCity, String noteContact, String noteCountry, String noteName, String noteType){
    try {
        System.out.println("tes ------- address = "+noteAddress+" city = "+noteCity+" contact = "+noteContact+" country = "+noteCountry+" name = "+noteName+" type = "+noteType);
        MLloydagentViewImpl vo=(MLloydagentViewImpl)getMLloydagentView1();
        MLloydagentViewRowImpl row=(MLloydagentViewRowImpl)vo.getCurrentRow();
        row.setLloydName(noteName);
        row.setLloydAddress(noteAddress);
        row.setLloydCity(noteCity);
        row.setLloydContact(noteContact);
        row.setLloydCountry(noteCountry);
        row.setTypeOfLloyd(noteType);
        row.getDBTransaction().commit();
        vo.executeQuery();
    } catch (JboException ex) {
        throw ex;
    }
} 
```

为什么新行没有提交？请帮我。谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T10:43:03.073

如果有当前行，您发布的代码不会插入新行，而是更新当前行。

```
 MLloydagentViewRowImpl row=(MLloydagentViewRowImpl)vo.getCurrentRow(); 
```

要插入新行，您应该使用类似的东西

```
MLloydagentViewRowImpl row=(MLloydagentViewRowImpl)vo.createRow();
row.setLloydName(noteName);
...
vo.insertRow(row);
... 
```

但是，您在这里与框架作斗争。首先，您不应在应用程序模块中提交事务，因为它会提交您自上次提交以来所做的所有更改。如果您在其他地方重用此代码，您可能会有其他此时不应提交的更改。接下来，您不应该在 bean 中使用应用程序模块，因为这只会更改模型层，并且需要手动（自己）刷新绑定层。假设您在页面上使用了 VO，则 pagedef 文件中应该存在此视图对象的迭代器。然后，您应该访问迭代器绑定并使用它来插入新行。这样，绑定层会自动获取新行的信息，并且模型层也会更新。在插入之后，您将操作绑定到提交操作并执行它。这将在所有图层中保留您的更改。你最终应该得到类似的东西

```
public void xyz(ActionEvent actionEvent)
{
    // Get the data from an ADF tree or table
    DCBindingContainer dcBindings =
        (DCBindingContainer) BindingContext.getCurrent().getCurrentBindingsEntry();
    // Get a attribute value of the current row of iterator
    DCIteratorBinding iterBind = (DCIteratorBinding) dcBindings.get("testIterator");
    RowSetIterator lIterator = iterBind.getRowSetIterator();
    MLloydagentViewRowImpl row = (MLloydagentViewRowImpl) lIterator.createRow();
    row.setLloydName(noteName);
    lIterator.insertRow(row);
    // now commit the action
    // get an Action or MethodAction
    OperationBinding method =
        BindingContext.getCurrent().getCurrentBindingsEntry().getOperationBinding("Commit");
    method.execute();
    List errors = method.getErrors();
    if (!errors.isEmpty())
    {
        // an error occured so do something liek adding a mesage for the user
        Exception e = (Exception) errors.get(0);
        FacesMessage msg = new FacesMessage(FacesMessage.SEVERITY_ERROR, e.getMessage(), "");
        FacesContext.getCurrentInstance().addMessage(null, msg);
    }
    // ok all is OK
} 
```

如果您还有其他问题，如果您提及您的 jdev 版本会有所帮助。

蒂莫

# java - 将 Javascript 框架与 Java Web 框架集成

> ID：11557045
> 
> 赞同：1
> 
> 时间：2012-07-19T08:43:00.677
> 
> 标签：java, javascript, web-frameworks, singlepage

我有一个我认为可能是一个奇怪的问题要问。

最近我在玩一些 java web 框架（带有 primefaces 的 jsf），我注意到它在处理表单数据或与 jsf 组件一起玩时非常好。我还使用 grails 做了一个项目，它再次对表单数据很有用。

但是当你想做一些需要一点偏差的事情时；然后我发现自己在做一些奇怪的事情（例如使用 primefaces 的具有大强度值的标签云和带有 grails 的单页 webapp 表单）。

这导致我的 grails 东西出现了一些非常混乱的 html+javascript 代码（我将其归咎于我对 javascript 的缺乏经验）。这样做是因为我使用表达式语言（在本例中为 grails）来填充一些 javascript。最糟糕的是，我的服务器页面内嵌了一堆自定义 javascript 代码（我可以稍微重构一下，但我认为一个页面内仍然会有很多 javascript 调用）。

所以现在到问题了:)

*   [主要问题] 是否有任何资源可以演示如何设计或至少使用服务器页面（gsp、xhtml 等）实现可维护的 javascript？

原因是我发现有一些简洁的 javascript 框架，但是如果考虑到服务器端框架的表达语言，将它们与服务器页面一起使用似乎有点不自然？除非做这种事情是正常的:)？

*   是否有适用于使用 java 的单页 webapps 的框架？

我目前的回答是 GWT、Vaadin（基于 GWT）和 JavaFX 可能符合条件。也许 ZK、Flex 和 (Grails/Roo + Flex/GWT) 也符合条件？

*   java web 框架对表示层仍然有用吗？

我目前的回答是，当您处理门户类型的 web 应用程序或 Web 1.0 应用程序时，它们可能是因为缺少更好的词。另一种情况是，当您使用大量基于角色的安全性并且您希望根据角色过滤掉事物时，它们可能会出现，但即使这样也有相反的论点。我对此的另一个回答是，使用 java 服务器来提供 Web 服务，然后依靠其他东西来做前端可能会更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T08:54:01.887

这可能是 OP，但对于单页应用程序，更容易通过 JSON(P)/XML/其他方式从服务器提供数据，然后使用 Backbone 之类的东西相应地处理和修改视图。这样，服务器就可以使用 REST/SOAP/websockets/whatever，浏览器应用程序就变成了一个成熟的应用程序。

我实际上并没有这样做，所以不要引用我的话，但我想它应该是有道理的。

# windows-phone-7 - Windows Phone：如何在 ScrollViewer（列表框）中禁用触摸滚动？

> ID：11557049
> 
> 赞同：4
> 
> 时间：2012-07-19T08:43:07.670
> 
> 标签：windows-phone-7, listbox, scroll, touch, scrollviewer

我有一个带有列表框的滚动查看器：我需要通过触摸禁用垂直滚动，我该怎么做？换句话说，用户不能通过触摸滚动（我有按钮，但这是另一回事）。

```
 <ScrollViewer  HorizontalScrollBarVisibility="Disabled" VerticalScrollBarVisibility="Disabled" x:Name="imagesScrollview" Width="480" Height="595" Margin="0,112,0,63">
        <ScrollViewer.RenderTransform>
            <CompositeTransform/>
        </ScrollViewer.RenderTransform>
        <ListBox Name="listavideo" Height="595" Width="480">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <Button Width="470" Height="146" Background="White" BorderBrush="#346699" Click="apri_video" Name="{Binding Mylink}" Margin="5,0,5,0" Padding="5">
                        <Button.Content>
                            <StackPanel Orientation="Horizontal" Width="470">
                                <Image Source="{Binding Thumbnail}" Width="160" HorizontalAlignment="Left" VerticalAlignment="Top" />
                                <StackPanel Orientation="vertical" Width="285" Margin="0,0,0,0" Height="146">
                                    <StackPanel Orientation="Horizontal" Width="275" Margin="0,0,10,0">
                                        <TextBlock Width="275" FontSize="18" Text="{Binding Title}" Foreground="#34638f" TextWrapping="Wrap" />
                                    </StackPanel>
                                    <StackPanel Orientation="Horizontal" Width="275" Margin="0,0,10,0">
                                        <TextBlock Width="275" FontSize="14" Text="{Binding Description}" Foreground="#51504e" TextWrapping="Wrap" />
                                    </StackPanel>
                                </StackPanel>
                            </StackPanel>
                        </Button.Content>
                    </Button>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>
    </ScrollViewer> 
```

谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-19T09:05:39.383

```
<ListBox ScrollViewer.VerticalScrollBarVisibility="Disabled" Name="listavideo" Height="595" Width="480" >
    <ListBox.ItemTemplate>
        ... 
```

# jasper-reports - 单个 JasperReport 中的两个 SQL 查询并填充数据

> ID：11557054
> 
> 赞同：0
> 
> 时间：2012-07-19T08:43:31.860
> 
> 标签：jasper-reports, reporting, ireport

我们在 Web 应用程序中使用报告。该报告是使用*JasperReports*生成的。

我面临的问题是：

我的 SQL 查询基于 where 子句获取数据：

```
SELECT * FROM table WHERE level='c' 
```

我可以轻松地在*iReport*中显示这些信息。

但是我需要触发另一个查询，其中`level='d'`需要将相同的信息附加到报告中`level='c'`。

我尝试将两个输出分组。但问题是如何在生成报告时触发两个不同的查询，因为我只能在*iReport*内的 QueryBuilder 中编写一个查询。

反正有没有达到同样的效果。

在本质上：

报告应如下所示：

```
Level=C
Name Age Phone number

Level=D
Name Age Phone number 
```

只有在完成 c 级后，才会出现 D 级。

任何人都可以请指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T10:43:48.137

我终于设法实现了相同的目标..使用 level_id 对数据进行分组..最初我试图以不同的方式进行分组，因此没有显示该值..

在 ireport Ultimate guide-3 文档中也很好地解释了这一点。

# c# - 初始化集合时，哈希集对内存有什么作用？

> ID：11557056
> 
> 赞同：9
> 
> 时间：2012-07-19T08:43:39.977
> 
> 标签：c#, performance, memory, collections, hashset

我偶然发现了以下问题。
我想要一个包含从 1 到 100.000.000 的所有数字的哈希集。我尝试了以下代码：

```
var mySet = new HashSet<int>();
for (var k = 1; k <= 100000000; k++)
     mySet.Add(k); 
```

该代码没有成功，因为我在 4900 万左右的某个地方出现了内存溢出。这也很慢，内存过度增长。

然后我尝试了这个。

```
var mySet = Enumerable.Range(1, 100000000).ToHashSet(); 
```

其中 ToHashSet() 是以下代码：

```
public static HashSet<T> ToHashSet<T>(this IEnumerable<T> source)
{
    return new HashSet<T>(source);
} 
```

我再次遇到内存溢出，但我能够使用之前的代码输入更多的数字。

起作用的事情如下：

```
var tempList = new List<int>();
for (var k = 1; k <= 100000000; k++)
     tempList.Add(k);

var numbers = tempList.ToHashSet(); 
```

在我的系统上大约需要 800 毫秒才能填充 Enumerable.Range() 只需要 4 个滴答声的 tempList！

我确实需要那个 HashSet，否则查找值需要很长时间（我需要它是 O(1)），如果我能以最快的方式做到这一点，那就太好了。

现在我的问题是：
**为什么前两种方法会导致内存溢出，而第三种方法不会？**

HashSet 在初始化时对内存有什么特殊作用吗？

我的系统有 16GB 内存，所以当我遇到溢出异常时我感到非常惊讶。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-19T08:54:07.677

与其他集合类型一样，HashSet 会在您添加元素时根据需要自动增加其容量。当添加大量元素时，这将导致大量的重新分配。

如果您使用带有 a 的构造函数对其进行初始化`IEnumerable<T>`，它将检查是否`IEnumerable<T>`实际上是 a `ICollection<T>`，如果是，则将 HashSet 的容量初始化为集合的大小。

这就是您在第三个示例中发生的情况 - 您正在添加 a `List<T>`which 也是 an `ICollection<T>`，因此您的 HashSet 的初始容量等于列表的大小，从而确保不需要重新分配。

`List<T>`如果您使用带有容量参数的构造函数，您将更加高效，因为这将避免在构建列表时重新分配：

```
var noElements = 100000000;
var tempList = new List<int>(noElements); 
for (var k = 1; k <= noElements; k++) 
     tempList.Add(k); 

var numbers = tempList.ToHashSet(); 
```

至于你的系统内存；检查这是 32 位还是 64 位进程。32 位进程最多有 2GB 可用内存（如果您使用了 /3GB 启动开关，则为 3GB）。

与其他集合类型（例如`List<T>`, `Dictionary<TKey,TValue>`）不同，`HashSet<T>`它没有使用`capacity`参数来设置初始容量的构造函数。如果要`HashSet<T>`使用大量元素初始化 a，最有效的方法可能是首先将元素添加到数组或`List<T>`具有适当的容量，然后将此数组或列表传递给`HashSet<T>`构造函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T09:06:50.490

我想`HashSet<T>`，像大多数.net 集合一样，使用数组加倍策略来实现增长。不幸的是，没有占用容量的构造函数重载。

但是，如果它检查`ICollection<T>`并用作`ICollection<T>.Count`初始容量，您可以实现该工具的基本`ICollection<T>`实现`GetEnumerator()`和`Count`. 这样，您可以直接填充 ，`HashSet<T>`而无需实现临时`List<T>`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-21T21:58:46.460

如果您将 1 亿个整数放入将消耗 1.5GB 的哈希集（我的机器）如果您创建一个 bool[100000000] 并在其中设置您必须为真的每个数字，则它只需要 100MB 并且查找速度也比哈希集快。这假设整数范围为 0-100000000

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T08:56:15.837

`HashSet`通过加倍增长，并且该分配导致它超出可用内存。

在**64 位**系统上，一个 HashSet 可以容纳超过**8900 万个项目**。

在**32 位**系统上，该限制约为**6170 万个项目**。

这就是为什么你得到内存溢出异常

了解更多信息

[http://blog.mischel.com/2008/04/09/hashset-limitations/](http://blog.mischel.com/2008/04/09/hashset-limitations/)

# java - Java 堆转储中的统计信息细分是什么

> ID：11557058
> 
> 赞同：4
> 
> 时间：2012-07-19T08:43:47.920
> 
> 标签：java, out-of-memory, heap-dump

鉴于此堆转储

```
size         no. of obj class
515313696       2380602 char[]
75476832        614571  * ConstMethodKlass
57412368        2392182 java.lang.String
44255544        614571  * MethodKlass
33836872        70371   * ConstantPoolKlass
28034704        70371   * InstanceKlassKlass
26834392        349363  java.lang.Object[]
25853848        256925  java.util.HashMap$Entry[]
24224240        496587  * SymbolKlass
19627024        117963  byte[]
18963232        61583   * ConstantPoolCacheKlass
18373920        120113  int[]
15239352        634973  java.util.HashMap$Entry
11789056        92102   ph.com.my.class.Person 
```

我的应用程序中只有 1 节课，`ph.com.my.class.Person`. 类定义如下：

```
public class Person {
 private String f_name;
 private String l_name;
} 
```

在堆转储中，是否`Person size (11789056)`包括 2 个字符串变量占用的内存？或者将`f_name`and`l_name`计入`String`班级，在这种情况下大小为 57412368？

**更新 - 添加了后续问题：**

所以让我们说每个实例：

1.  f_name 大小为 30
2.  l_name 大小为 20
3.  人的大小是75

如果有10个Person实例，就会有

1.  10 * (30+20) = 500
2.  10 * 75 = 750

500 将计入 String 或 char[] 吗？随后，750 人是否会被计算在内？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T09:02:03.693

每个计数和大小都是该对象的大小。如果您使用`-histo`而不是`-histo:live`this 将是所有对象，即使是未引用的对象。

注意：每个`String`都有一个`char[]`，而 JVM 使用其中不少。`String`大小是对象本身的大小，而不是它的大小`char[]`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T09:02:33.703

堆转储中对象的大小是在堆上分配为块以保存该实例的字节数。它从不包括可通过对象访问的整个图形的字节。一般来说，这很容易意味着对象的大小是整个堆。因此，在您的情况下，它考虑了两个**引用**，但不考虑 String 实例本身。另请注意，即使`String`大小也不能反映所表示字符串的大小——它存储在`char[]`. 这些`char[]`实例**在字符串之间共享，**所以故事并不那么简单。

# c# - 如何使用 WhereParameters 和 EntityDataSource 执行 Like 类型查询

> ID：11557064
> 
> 赞同：0
> 
> 时间：2012-07-19T08:44:06.917
> 
> 标签：c#, asp.net, entitydatasource

在代码隐藏中，我想为 entitydatasource 应用一个动态 where 子句，但我希望这个 where 是一样的而不是相等的。我有这个代码工作，它是相等的我想要一个等价代码，它以某种方式将它翻译成一个 Like 语句。

```
EntityDataSource1.WhereParameters.Add("Name", TypeCode.String, tbxSearch.Text); 
```

阅读 Jupaol 评论后的解决方案：

xml:

```
<WhereParameters>
   <asp:ControlParameter ControlID="tbxSearch" Name="Name" Type="String" />
</WhereParameters> 
```

代码背后：（加载事件）

```
if (string.IsNullOrEmpty(tbxSearch.Text))
{
   this.EntityDataSource1.Where = "1=1";  //fetch all data if empty
}
else
{
   this.EntityDataSource1.Where = "it.Name like '%' + @Name + '%'"; //filter
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T09:01:58.097

在该代码中，您只添加一个参数，您需要定义*类似*比较的位置在 where 子句中

您发布的代码可以翻译成：

```
 <asp:EntityDataSource runat="server" ID="eds"
        .....
        Where="it.fname like '%' + @Name + '%'"
        <WhereParameters>
            <asp:ControlParameter ControlID="tbxSearch" Name="Name" DefaultValue="" />
        </WhereParameters> 
```

在后面的代码中添加 where：

```
this.eds.Where = "it.fname like '%' + @Name + '%'"; 
```

**编辑1：**

出于某种原因，如果我像您一样放置参数声明（在代码中），则它不起作用，但是如果我将参数放置在标记中，如下所示：

```
 <WhereParameters>
            <asp:ControlParameter ControlID="tbxSearch" Name="Name" Type="String" DefaultValue="" />
        </WhereParameters> 
```

而在`Page_Load`

```
this.eds.Where = "it.fname like '%' + @Name + '%'"; 
```

有用

# altova - 文本文件 - 使用 altova mapforce 到列的行

> ID：11557069
> 
> 赞同：1
> 
> 时间：2012-07-19T08:44:14.893
> 
> 标签：altova

如何仅使用 Altova MapForce 将逗号分隔的文本文件转换为行分隔的文本文件。有没有办法可以在 MapForce concat 函数中输入“输入”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T18:55:13.030

当您将输入添加为文本文件时，右键单击输入组件并查看属性。默认情况下，有逗号用于分隔值。更改值。其他明智的另一种选择是拆分输入文本文件。 [[1] 这是链接](http://www.altova.com/mapforce/convert-text.html) [[2] 书](https://manual.altova.com/Mapforce/mapforceenterprise/flextutorial.htm)

对您来说非常重要的是，在 altova Mapforce 中没有什么可以吃的。

# php - 如何在 TCPDF 中使用 PHP 脚本？

> ID：11557072
> 
> 赞同：6
> 
> 时间：2012-07-19T08:44:26.217
> 
> 标签：php, html, tcpdf

我在数据库中有一个这样的表

```
 expedition_name | Phone | CP    |
__________________________________________
    Starsindo    | 09890 | John  |
    Iron Bird    | 09891 | Gina  |
    MSA Cargo    | 09890 | John  | 
```

现在，我将使用 HTML 函数使用 TCPDF 从该表创建 PDF。

但我仍然困惑如何像这样组合我的代码

```
 <?php

require_once('tcpdf/config/lang/eng.php');
require_once('tcpdf/tcpdf.php');

// create new PDF document
 include "koneksi.php";
   $sql = "SELECT * FROM tb_exp_local";
   $hasil = mysql_query($sql);
   $data = mysql_fetch_array($hasil);

   $pdf = new TCPDF(PDF_PAGE_ORIENTATION, PDF_UNIT, PDF_PAGE_FORMAT, true, 'UTF-8', false);

   // set font
   $pdf->SetFont('times', '', 11);

   // add a page
   $pdf->AddPage();

   $html = '<h2>List Of Expediton</h2>    //Title
<table border="1" cellspacing="3" cellpadding="4">
    <tr>
        <th>Expedition</th>                //head of column name
        <th align="center">Phoine</th>  //head of column name
        <th align="center">CP</th>       //head of column name
    </tr>
     while($data=mysql_fetch_array($hasil))
     { 
    <tr>
       <td>$data[nama_exp]</td>
    </tr>
     }   
</table>';

  $pdf->writeHTML($html, true, false, true, false, '');

   $pdf->Output('Local Expedition, 'I');

?> 
```

任何人都可以帮助我，如何解决它？数据可以用PDF写吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-19T08:49:55.873

您需要使用以下内容准备 html：

```
$html = '<h2>List Of Expediton</h2>    //Title
    <table border="1" cellspacing="3" cellpadding="4">
    <tr>
        <th>Expedition</th>                //head of column name
        <th align="center">Phoine</th>  //head of column name
        <th align="center">CP</th>       //head of column name
    </tr>';

while($data=mysql_fetch_array($hasil)) { 
    $html .= '<tr><td>'.$data['nama_exp'].'</td></tr>';
}   
$html .= '</table>'; 
```

# tmux - 如果我在 tmux 中将 Cb 的键绑定设置为 ca 如何将光标移动到行首？

> ID：11557076
> 
> 赞同：76
> 
> 时间：2012-07-19T08:44:31.490
> 
> 标签：tmux

我只是从 GNU screen 移动到 tmux，当我点击时在 screen 中`C-a`，然后`a`再次输入可以带我到行首，我想知道我是否坚持`C-a`在 tmux 中如何解决这个问题？

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2012-07-19T12:42:56.103

如您所知，`C-b`是 中的默认前缀`tmux`。用于向终端`C-b C-b`发送实际字符。`C-b`如果将前缀切换为`C-a`，则只需重新绑定一些键即可更新哪个键发送`send-prefix`命令。

对于您的`.tmux.conf`：

```
# You probably already put this in
set prefix C-a

unbind-key C-b
bind-key C-a send-prefix 
```

* * *

## 回答 #2

> 赞同：85
> 
> 时间：2013-07-09T09:53:09.257

也许这是我使用的版本的问题，但如果上面的代码不适合你，试试这个：

```
set -g prefix C-a
unbind-key C-b
bind-key C-a send-prefix 
```

# ios - iOS：如何检查流连接是否超时

> ID：11557077
> 
> 赞同：1
> 
> 时间：2012-07-19T08:44:34.600
> 
> 标签：ios, stream, timeout, connection

在我的应用程序中，我使用连接到服务器

```
- (void)connectToServerUsingCFStream:(NSString *) urlStr portNo: (uint) portNo 
```

这个函数被另一个方法调用

```
- (void)connectToServer:(NSString *)serverName onPort:(int)portNo 
{

    [self connectToServerUsingCFStream:serverName portNo:portNo];

    while (!((iStream.streamStatus == 2) || (oStream.streamStatus == 2))) {

        continue; 
    }

    NSLog(@"Streams connected");

    [self sendLoginRequest];
} 
```

现在我想知道是否可以轻松检查我的连接请求是否超时（可能具有一定的时间值？）。有没有办法在我的while循环中处理这个问题，或者我应该使用不同的东西？

在此先感谢，包茨

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T09:02:21.467

我不知道您是如何准确实现连接的，但在这里我有一些来自[XMPPFramework](https://github.com/robbiehanson/XMPPFramework/)的连接代码，如代码注释所示：

```
/**
 * XMPPReconnect handles automatically reconnecting to the xmpp server due to accidental disconnections.
 * That is, a disconnection that is not the result of calling disconnect on the xmpp stream.
 * 
 * Accidental disconnections may happen for a variety of reasons.
 * The most common are general connectivity issues such as disconnection from a WiFi access point.
 * 
 * However, there are several of issues that occasionaly occur.
 * There are some routers on the market that disconnect TCP streams after a period of inactivity.
 * In addition to this, there have been iPhone revisions where the OS networking stack would pull the same crap.
 * These issue have been largely overcome due to the keepalive implementation in XMPPStream.
 * 
 * Regardless of how the disconnect happens, the XMPPReconnect class can help to automatically re-establish
 * the xmpp stream so as to have minimum impact on the user (and hopefully they don't even notice).
 * 
 * Once a stream has been opened and authenticated, this class will detect any accidental disconnections.
 * If one occurs, an attempt will be made to automatically reconnect after a short delay.
 * This delay is configurable via the reconnectDelay property.
 * At the same time the class will begin monitoring the network for reachability changes.
 * When the reachability of the xmpp host has changed, a reconnect may be tried again.
 * In addition to all this, a timer may optionally be used to attempt a reconnect periodically.
 * The timer is started if the initial reconnect fails.
 * This reconnect timer is fully configurable (may be enabled/disabled, and it's timeout may be changed).
 * 
 * In all cases, prior to attempting a reconnect,
 * this class will invoke the shouldAttemptAutoReconnect delegate method.
 * The delegate may use this opportunity to optionally decline the auto reconnect attempt.
 * 
 * Auto reconnect may be disabled at any time via the autoReconnect property.
 * 
 * Note that auto reconnect will only occur for a stream that has been opened and authenticated.
 * So it will do nothing, for example, if there is no internet connectivity when your application
 * first launches, and the xmpp stream is unable to connect to the host.
 * In cases such as this it may be desireable to start monitoring the network for reachability changes.
 * This way when internet connectivity is restored, one can immediately connect the xmpp stream.
 * This is possible via the manualStart method,
 * which will trigger the class into action just as if an accidental disconnect occurred.
**/ 
```

我不知道这个[XMPPReconect 类](https://github.com/robbiehanson/XMPPFramework/blob/master/Extensions/Reconnect/XMPPReconnect.h)是否满足您的需求。

# linq - 在我的收藏中的项目内按属性区分

> ID：11557086
> 
> 赞同：0
> 
> 时间：2012-07-19T08:45:20.590
> 
> 标签：linq, ienumerable, distinct

我有一个`IEnumerable<MyObject>`包含 N个`MyObject`元素的集合。MyObject 是一个具有 Title、Description 和 ID（作为字符串）的类。

由于 ID 字段，我希望我的集合具有不同的 MyObject 列表。因此，如果 2 个 MyObject 具有相同的 ID，则应该删除一个（不管哪个，我需要唯一的 ID）。

我怎样才能用 LINQ 做到这一点？

试过：

```
myList = myList.GroupBy(o => o.ID); 
```

但似乎我需要演员？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T08:56:39.907

您可以实现自定义`IEqualityComparer<MyObject>`. 然后您可以使用[`Enumerable.Distinct`](http://msdn.microsoft.com/en-us/library/bb338049)过滤掉重复项。

```
class DistinctIdComparer : IEqualityComparer<MyObject> {
    public bool Equals(MyObject x, MyObject y) {
        return x.Id == y.Id;
    }

    public int GetHashCode(MyObject obj) {
        return obj.Id.GetHashCode();
    }
} 
```

现在很简单：

```
IEnumerable<MyObject> distinct = myObjects.Distinct(new DistinctIdComparer()); 
```

或者您可以使用[`Enumerable.GroupBy`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.groupby.aspx)更简单的方法：

```
distinct = myObjects.GroupBy(o => o.ID)
                    .Select(g => g.First()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T08:49:07.620

如果您只想要唯一的 ID，那么您可以尝试。

```
var uniqueIds = myObjects.Select(x=>x.ID).Distinct(); 
```

或者对于唯一 ID 对象

```
List<MyObject> objs = new List<MyObject> ();

myObjects.ForEach(x=>{
    if(objs.Find(y=>y.ID == x.ID)== null)
        objs.Add(x);
}); 
```

# android - 如何杀死Android中的进步

> ID：11557088
> 
> 赞同：1
> 
> 时间：2012-07-19T08:45:20.713
> 
> 标签：android, kill, progress

当我试图退出时，我运行下面的代码，但我无法终止进度，

所以如果我重新启动我的应用程序，另一个进展开始了。这是怎么回事？

我的退出代码：

```
Intent startMain = new Intent(Intent.ACTION_MAIN);
    startMain.addCategory(Intent.CATEGORY_HOME);
    startMain.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    startActivity(startMain);
    System.exit(0);
    finish(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T08:48:25.827

使用此代码结束您的应用程序

```
 finish();
        Intent intent = new Intent(Intent.ACTION_MAIN); 
        intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); 
        intent.addCategory(Intent.CATEGORY_HOME); 
        startActivity(intent); 
```

# uml - 从 MagicDraw 导出 DSL

> ID：11557090
> 
> 赞同：0
> 
> 时间：2012-07-19T08:45:26.777
> 
> 标签：uml, dsl, magic-draw

我在 MagicDraw 中制作了一个 UML 配置文件（带有原型）。我还为我的个人资料制作了一种特殊的图表类型以及一些新按钮。

![在此处输入图像描述](../Images/ca5202f360f073a6301768a77f521032.png)

但是当我在另一台 PC 上打开我的项目时，一切都消失了——我再也看不到我的图表或按钮了。

**如何导出/保存我的 DSL 设置？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T06:18:35.833

在他们的网站上，MagicDraw UML 声明在 java 1.7 中生成的模型可能在使用 java 1.6 时存在问题。

我认为这适用于最新版本的 MagicDraw UML。

也许您的第一台 PC 运行的是 1.7，另一台运行的是 1.6。

# openerp - 为什么工作流会两次调用该函数以及如何覆盖它？

> ID：11557096
> 
> 赞同：0
> 
> 时间：2012-07-19T08:45:56.603
> 
> 标签：openerp

我已经创建了一个工作流程并且它工作得很好。工作流活动调用的函数是这个

```
 def employee_confirm(self, cr, uid, ids, context=None):  
    print "Entering >>>employee_confirm"
    return self.write(cr, uid, ids, {'state':'confirm'}) 
```

我的问题是打印语句执行了两次。这意味着该函数正在执行两次。

这没关系

```
self.write(cr, uid, ids, {'state':'confirm'}) 
```

因为它是一个`write`.

对于任何其他语句，我们不能允许它两次用于同一记录。

为什么会发生这种情况以及如何覆盖它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T00:11:35.547

在构建新的 OpenERP 模块时，理解和调试工作流代码是最困难的任务之一。我发现[在 Eclipse 中跟踪代码](https://stackoverflow.com/a/9086069/4794)是查看发生了什么的唯一方法，但需要很长时间。

这是我为总结工作流转换而编写的 SQL 查询。我打印出工作流程图，然后将这些数据复制到图表上。据我所知，您只能从 GTK 客户端打印图表，[而不是 Web 客户端](https://stackoverflow.com/q/11270536/4794)。使用您想要的工作流程打开屏幕，然后从插件菜单中选择执行插件并双击打印工作流程。

```
 select  wkf.name, 
            f.name || '(' || f.id || ')' as src, 
            f.kind,
            f.action as from_action,
            f.split_mode, 
            f.flow_start,
            t.name || '(' || t.id || ')' as dest, 
            t.kind as dest_kind,
            t.action as dest_action,
            t.join_mode, 
            t.flow_stop, 
            tr.*
    from wkf_transition tr
    join wkf_activity f
    on tr.act_from = f.id
    join wkf_activity t
    on tr.act_to = t.id
    join wkf
    on f.wkf_id = wkf.id
    order by wkf.name, f.name, t.name 
```

# xml - 获取 XML 文件名的 XPATH 表达式

> ID：11557097
> 
> 赞同：3
> 
> 时间：2012-07-19T08:46:04.483
> 
> 标签：xml, xpath

是否可以获得使用 xpath 表达式处理的 xml 文件的名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T12:21:04.997

不在 XPath 1.0 中。

**在 XPath 2.0 中使用**：

```
document-uri(/) 
```

**to 的参数`document-uri()`必须是文档节点**。`/html`如果为参数指定了其他任何内容（如），则根据**[W3C F&O 规范](http://www.w3.org/TR/xquery-operators/#func-document-uri)**，结果是空序列。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T10:10:50.403

不，文件名不是文档的一部分。您还可以处理根本不源自文件的文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T10:45:41.973

在 xpath 2 中，您可以使用 document-uri

例如

```
 document-uri(/html) 
```

# python - 线标记密度

> ID：11557099
> 
> 赞同：3
> 
> 时间：2012-07-19T08:46:17.587
> 
> 标签：python, plot, matplotlib, marker

我用大量的点以对数比例绘制了几条线。我使用不同的线条样式/标记将它们绘制为黑色。我使用“markevery”属性来减少标记的数量。X 值以均匀的间隔变化。

我遇到的问题是标记分布不均匀 - 它们在 0 附近较少，而在每条线的右端附近较多。有没有办法在不挑剔 x 值的情况下解决这个问题，以便它们在对数尺度上“均匀”分布？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T11:30:52.313

您可以给出要绘制的点的索引。在`logscale`这些点上应该是非均匀分布的。你可以尝试`logspace`实现它。

```
import pylab as plt
import numpy as np

x=np.arange(1,1e5)

# Normal plot
#plt.plot(x,x,'o-')

# Log plot
idx=np.logspace(0,np.log10(len(x)),10).astype('int')-1
plt.plot(x[idx],x[idx],'o-')
plt.xscale('log')
plt.yscale('log')
plt.show() 
```

生成： ![在此处输入图像描述](../Images/3a4b2501a733eb84a74c94a2a1894051.png)

# php - XAMPP - 重新启动 apache 的快速方法？

> ID：11557101
> 
> 赞同：20
> 
> 时间：2012-07-19T08:46:27.593
> 
> 标签：php, apache, xampp

我在 Windows 7 上安装了 XAMPP。我每天需要多次停止和启动 Apache。

目前，我打开 Xampp 控制面板，单击“停止”（“Apache”旁边），等待它停止，然后单击“开始”。

![在此处输入图像描述](../Images/3084b8538dcb4745010ff08d8e741e95.png)

理想情况下，我希望能够更快地做到这一点——比如右键单击 Xampp 图标，然后选择“重新启动 Apache”。或者，更好的是，只是一个重启 Apache 的快捷键。

我知道 Xampp 有两个 bat 文件 - apache_stop.bat 和 apache_start.bat。我试过利用这些来获得我想要的东西。但是，当您运行 apache_start.bat 时，您会得到一个无法摆脱的 cmd 窗口。我找不到以这种方式静默启动 Apache 的方法。

所以，基本上我希望能够完全无声地快速重启 Apache（一键/快捷键）。

提前致谢。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-19T08:54:55.603

复制`apache_start.bat`并重命名为`apache_restart.bat`.

将行更改`apache\bin\httpd.exe`为`apache\bin\httpd.exe -k restart`

瞧，你的重启脚本就到这里了。你也可以给它一个快捷方式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-19T08:48:52.853

如果您的系统托盘中有 Apache 服务监视器，您可以打开它（我认为是右键单击？）然后单击“重新启动 Apache”。

如果它不在您的系统托盘中，您可以在`/bin`Apache 安装文件夹（称为`ApacheMonitor.exe`）中找到它。我建议在“启动”文件夹中创建一个快捷方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-06T17:45:14.560

对我来说，对于 3.2.2 版本，第一个答案不起作用。

`apache_start.bat`我已经将这两个文件和文件放在一起`apache_stop.bat`。

```
@echo off
cd /D %~dp0

echo Apache 2 is stopping...

apache\bin\pv -f -k httpd.exe -q
if not exist apache\logs\httpd.pid GOTO exit
del apache\logs\httpd.pid

echo Apache 2 is re-starting ...

apache\bin\httpd.exe

if errorlevel 255 goto finish
if errorlevel 1 goto error
goto finish

:error
echo.
echo Apache konnte nicht gestartet werden
echo Apache could not be started
pause

:finish 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-29T09:48:05.263

@adrianthedev 的版本不适用于（**XAMPP v3.2.4**）我，但帮助我找到了解决方案。它不那么复杂，因为我对脚本知之甚少，但它就在这里，它对我有用：

```
@echo off
C:/xampp/apache/bin/httpd -k stop
C:/xampp/apache/bin/httpd -k start 
```

注意：`apache\logs\httpd.pid`不需要删除，因为它已经由`httpd -k stop`命令完成。

# php - CodeIgniter 和模态形式（填充）

> ID：11557105
> 
> 赞同：0
> 
> 时间：2012-07-19T08:46:38.353
> 
> 标签：php, jquery, codeigniter

通常使用 PHP 和编辑，您单击一个链接，该链接转到一个单独的 PHP 页面，该页面具有您要编辑的条目的“ID”，您将获得 ID 并基于此填充您的表单。

如果我使用模态表单，我想知道如何做到这一点？如何获取 ID 获取与其关联的记录，然后填充模式表单。

有点像这样

```
//dropdown behavior for resp task and sub_task
$('#r_task_id').change(function() {
    var selected_task_id = $('#r_task_id').val();
    $.post("Assignment/populateSubTaskDropDown", { 'selected_task_id' : selected_task_id },//$_POST['selected_task_id']
             function(data){                
            $('#r_sub_task_id').empty();
            $.each(data, function(val, text) {
                $('#r_sub_task_id').append(
                    $('<option></option>').val(val).html(text)
                );
     });}, "json");

});//task 
```

PHP代码是：

```
$this->session->set_userdata('selected_sub_task_id', $this->input->post('selected_sub_task_id'));
    $json_resp_user = $this->assignmentModel->getResponsibleUsers($this->session->userdata('selected_sub_task_id'));

    $json = array();
    $json[0] = "-Select-";

    if( count($json_resp_user) >= 1 ){ //if there is more in the result than the -Select-
        foreach($json_resp_user as $detail){
            //$json[$detail->user_id] = $detail->first_name." ".$detail->middle_name." ".$detail->last_name;
            $json[$detail->user_id] = $detail->first_name." ".$detail->last_name;
        }
    }
    echo json_encode($json); 
```

但对于整个表单来说，不仅仅是一个下拉菜单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T09:10:28.917

当您打开模态窗口时，在公共 javascript 变量中设置记录的 id，并在提交模态表单时通过 url 传递 id 参数。

另一种方法是在模态窗口的表单内有一个隐藏变量，并在打开模态窗口时设置它。所以它会通过模态窗口上的更新表单被提交。

```
<script>
    id ='' //Set this when opening the modal window
    function appendId(myform)
    {
        myform.action = myform.action + "/" + id;
        return true;
    }
</script>
<div id='modalWindow'>
    <form onsubmit='return appendId(this)'>
        //other elements
    </form>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T06:22:36.423

我快速阅读了 jQuery 的 $.post() ，显然这就是我的意思 =p

脚本中的部分

> id ='' //打开模态窗口时设置此项

是我被困在如何阅读的地方。

[http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/ "jQuery $.post")

抱歉，如果我不清楚，但感谢您抽出时间和麻烦来回答我。

# azure - windows azure bizspark 会员资格是否可以超过 20 个托管服务的限制？

> ID：11557106
> 
> 赞同：1
> 
> 时间：2012-07-19T08:47:04.067
> 
> 标签：azure

我们正在 Windows azure 平台上推出 SAAS 应用程序。最初它将是每个租户一个托管服务。但我意识到，我的 Bizspark 会员资格中有 20 个托管服务的限制。根据我的研究，这必须离线请求到 Micrsoft。

我的问题是：1.如何以编程方式获取额外的托管服务？2\. 每项服务的费用是多少？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T10:37:28.780

您不能以编程方式“获取”附加托管服务。您的帐户将始终有限制。为了调整该限制，您必须联系[Windows Azure 支持](http://www.windowsazure.com/en-us/support/contact/)并为增加托管服务配额开一张票。您可能需要为此进行可信检查。在 Windows Azure 中没有“每次服务成本”之类的东西。有“每次使用成本”。您可能想要概述[Windows Azure 定价页面](http://www.windowsazure.com/en-us/pricing/calculator/)。

让我把这样的东西（用于定价）：

您将为以下任何一项支付相同金额的费用：

*   20 个云服务，每个都有 1 个生产角色，VM 大小很小

**或者**

*   1 个具有 20 个生产角色的云服务，具有小 VM 大小

但是，在单个云服务中，您只能有 25 个角色的限制，并且没有端口共享（即端口 80 将仅对单个角色可用）。

我建议您查看[Windows Azure Marketplace for Applications 实验室](http://msdn.microsoft.com/en-us/wazplatformtrainingcourse_introtowazmarketplace.aspx)，微软团队在该实验室中提供了一些关于如何构建多租户应用程序的指南。

您也可以查看[这个 SO question](https://stackoverflow.com/questions/11445799/windows-azure-multi-tenancy)和[那篇文章](http://msdn.microsoft.com/en-us/library/windowsazure/hh689716.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T13:30:05.827

还有另一种选择。如果您有企业协议，您应该这样做以获取价格，您可以根据需要创建尽可能多的订阅。对于每个订阅，您可以设置 20 个托管服务。

# database - 带有 SQL Server CE 的 Visual Basic 2010 应用程序，在 Windows XP 上无法访问数据库

> ID：11557109
> 
> 赞同：0
> 
> 时间：2012-07-19T08:47:16.547
> 
> 标签：database, visual-studio-2010, windows-7, windows-xp, sql-server-ce

我正在开发一个需要数据库来存储和检索数据的应用程序。我正在 Visual Basic 2010 Express Edition 上开发应用程序，并在 Windows 7 PC 上使用 SQL Server Compact Edition 数据库。该应用程序在我的 PC 上的 Windows 7 上完美运行。问题出现在我使用 Windows XP 的客户的系统上。

我让他安装 .NET Framework 4.0 和 SQL Server CE 并向他发送构建应用程序的副本。但是当他执行应用程序并到达正在使用数据库的表单时，他遇到错误说“不允许访问数据库文件。[文件名 = D:\prototype\app\master.sdf]”并单击继续加载表单，但未加载数据库中的数据，因为它没有连接。

如果我将应用程序文件夹复制到 Windows 7 上的 Program Files 目录，Windows 7 上也会出现同样的问题。但如果我以“以管理员身份运行”执行应用程序则不会发生

所以我需要你的帮助来弄清楚可能发生了什么以及为什么应用程序不能像在 Windows 7 上工作一样访问数据库（程序文件目录除外）。

提前致谢，

此致

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T19:18:44.007

“用户需要对数据库文件进行读写访问，因此您必须将其放在合适的位置，并相应地更改您的连接字符串。” [http://erikej.blogspot.dk/2011/02/using-sql-server-compact-40-with.html](http://erikej.blogspot.dk/2011/02/using-sql-server-compact-40-with.html)

由[EricEJ](https://stackoverflow.com/users/183934/erikej)

# wpf - HierarchicalDataTemplate 绑定

> ID：11557111
> 
> 赞同：0
> 
> 时间：2012-07-19T08:47:21.020
> 
> 标签：wpf, triggers, hierarchicaldatatemplate

我有一个分层树视图，其中每个项目都包含一个复杂的实体，其中包括：

边框 -- 复选框 -- TextBlock

每当复选框 IsEnabled 属性设置为“False”时，我想更改边框的不透明度

这就是我所拥有的：

```
 <HierarchicalDataTemplate DataType="{x:Type sd:LegendTreeViewItem}" ItemsSource="{Binding Path=SubSensors}">
                        <Border x:Name="treeViewItemBorder" Height="24" Margin="3 3 3 3" Width="350" Background="{Binding Path=Color}" CornerRadius="8 8 8 8">
                            <StackPanel Orientation="Horizontal">
                                <CheckBox  x:Name="treeViewItemCheckbox" Margin="5 5 5 5" Click="CheckBox_Click" IsChecked="{Binding IsChecked}" VerticalAlignment="Center" IsEnabled="{Binding Enabled}"  Style="{StaticResource OpacityOnDisabled}"/>
                                <TextBlock Height="Auto" FontFamily="Tahoma" FontWeight="Bold" Foreground="Black" HorizontalAlignment="Left" Text="{Binding Path=Name}" 
                                           VerticalAlignment="Center" ToolTip="{Binding Path=Name}"/>
                            </StackPanel>  </Border>
                    </HierarchicalDataTemplate>

    <TreeView x:Name="legendTypeTree" Grid.Row="1" Foreground="White" ItemsSource="{Binding  ElementName=uc, Path=TypeItemsSource}">
                            <TreeView.Resources>
                                <Style x:Key="OpacityOnDisabled" TargetType="{Binding RelativeSource={RelativeSource AncestorType=Border}}">
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding IsEnabled}" Value="False">
                                            <Setter Property="Border.Opacity" Value="0.3"/>
                                            <Setter Property="Border.Background" Value="White"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </TreeView.Resources>
                        </TreeView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T10:59:17.807

1.  移动 TreeView 资源中边框的 HierarchicalDataTemplate 和 Style。（样式首先是为了`StaticResource OpacityOnDisabled`正确解决）。

2.  您想更改边框的样式，因此在复选框上应用样式是没有意义的。从 CheckBox移动`Style="{StaticResource OpacityOnDisabled}"`到 Border 元素。设置正确的样式类型，并为 DataTrigger 将绑定更改为`Binding="{Binding ElementName=treeViewItemCheckbox, Path=IsChecked}"`

最后你应该有类似的东西，它应该做你想做的事： **结果：**

```
<TreeView
    x:Name="legendTypeTree"
    Grid.Row="1"
    Foreground="White"
    ItemsSource="{Binding  ElementName=uc, Path=TypeItemsSource}">
    <TreeView.Resources>
        <Style x:Key="OpacityOnDisabled" TargetType="{x:Type Border}">
            <Style.Triggers>
                <DataTrigger Binding="{Binding ElementName=treeViewItemCheckbox, Path=IsChecked}" Value="False">
                    <Setter Property="Border.Opacity" Value="0.3"/>
                    <Setter Property="Border.Background" Value="White"/>
                </DataTrigger>
            </Style.Triggers>
        </Style>
        <HierarchicalDataTemplate DataType="{x:Type sd:LegendTreeViewItem}" ItemsSource="{Binding Path=SubSensors}">
            <Border
                x:Name="treeViewItemBorder"
                Height="24"
                Margin="3 3 3 3"
                Width="350"
                Background="{Binding Path=Color}"
                CornerRadius="8 8 8 8"
                Style="{StaticResource OpacityOnDisabled}">
                <StackPanel Orientation="Horizontal">
                    <CheckBox
                        x:Name="treeViewItemCheckbox"
                        Margin="5 5 5 5"
                        Click="CheckBox_Click"
                        IsChecked="{Binding IsChecked}"
                        VerticalAlignment="Center"
                        IsEnabled="{Binding Enabled}" />
                    <TextBlock
                        Height="Auto"
                        FontFamily="Tahoma"
                        FontWeight="Bold"
                        Foreground="Black"
                        HorizontalAlignment="Left"
                        Text="{Binding Path=Name}"
                        VerticalAlignment="Center"
                        ToolTip="{Binding Path=Name}"/>
                </StackPanel>
            </Border>
        </HierarchicalDataTemplate>
    </TreeView.Resources>
</TreeView> 
```

# linux - cp -r 没有隐藏文件

> ID：11557114
> 
> 赞同：101
> 
> 时间：2012-07-19T08:47:40.933
> 
> 标签：linux, bash, cp

我有两个目录，一个是空的。

第一个目录有许多带有隐藏文件的子目录。当我`cp -r`从第一个目录到第二个目录时，隐藏文件也会被复制。有什么办法可以逃脱它们吗？

* * *

## 回答 #1

> 赞同：142
> 
> 时间：2012-07-19T08:54:52.520

您可以使用`rsync`代替`cp`：

```
rsync -av --exclude=".*" src dest 
```

这不包括隐藏的文件和目录。如果您只想排除隐藏目录，请在模式中添加斜杠：

```
rsync -av --exclude=".*/" src dest 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2012-07-19T08:51:50.503

你可以做

```
cp -r SRC_DIR/* DEST_DIR 
```

排除 SRC_DIR 级别中的所有 .files 和 .dirs，但它仍然会复制下一级子目录中的任何隐藏文件。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-19T09:10:47.540

**rsync**有“-C”选项

[http://rsync.samba.org/ftp/rsync/rsync.html](http://rsync.samba.org/ftp/rsync/rsync.html)

**例子：**

```
rsync -vazC  dir1 dir2 
```

# include - g++：交叉编译时包含问题

> ID：11557117
> 
> 赞同：1
> 
> 时间：2012-07-19T08:47:45.403
> 
> 标签：include, embedded, g++, mips, cross-compiling

我有一个有点奇怪的问题。我们有一个项目，我们为几种不同的架构编译，特别是这 2 个：SH4 和 MIPS。

一段时间以来，我们遇到了一个问题，其中一些代码可以在 SH4 中编译，但不能用于 MIPS，因为缺少包含。我已将问题缩小到此测试文件：

```
#include <sstream>
// deliberately not including the needed includes

int main()
{
  const char *toto = "Hello World";
  // using printf and strlen which require <stdio.h> and <string.h>
  printf("Toto has len %d\n", strlen(toto)); 
  return 0;
} 
```

* * *

### 使用此命令编译为 SH4

```
$ sh4-linux-g++ -O0 -g -Wall -Werror -Wno-write-strings \
                -fno-rtti -fno-exceptions test.cpp -o test
$ 
```

-> 完全没有问题。该文件实际上正常执行。

* * *

### 而使用 MIPS

```
$ mips-linux-gnu-g++ -O0 -g -Wall -Werror -Wno-write-strings \
                     -fno-rtti -fno-exceptions test.cpp -o test 
test.cpp: In function 'int main()':
test.cpp:6: error: 'strlen' was not declared in this scope
$ 
```

* * *

现在，我已经运行了几件事，特别是 g++ 的依赖生成。我看到的是这样的：

### SH4 

```
$ sh4-linux-g++ -O0 -g -Wall -Werror -Wno-write-strings \ 
                -fno-rtti -fno-exceptions test.cpp -M |grep "/string.h"

  /opt/STM/STLinux-2.3/devkit/sh4/target/usr/include/string.h \ 
```

-> string.h 自动包含在内。

### MIPS

```
mips-linux-gnu-g++ -O0 -g -Wall -Werror -Wno-write-strings \
 -fno-rtti -fno-exceptions test.cpp -M |grep "/string.h" 
```

-> 包含中缺少的 string.h

有关信息：

```
SH4 version  = 4.2.4 (2007)  
MIPS version = 4.3.2 (2008) 
```

这里发生了什么？在 SH4 上编译时，`<sstream>`include 似乎拖住了 strlen() 所需的所有内容，而在 MIPS 上却没有。我怀疑这是因为版本不同，但我不确定。

最后，我真正的问题是，当我在 SH4 上开发时，我想确定如果它*编译*，它将在所有目标上编译。有针对这个的解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T11:16:36.127

> 这里发生了什么？

你基本上是在问“为什么我的非标准代码用一个版本的编译器编译而不是另一个？” 当然是因为版本不同。

请参阅**运行时库 (libstdc++)**部分下的[GCC 4.3 更改：](http://gcc.gnu.org/gcc-4.3/changes.html)

 **> 标头依赖项已得到简化，减少了不必要的包含和预处理膨胀。

我们也在最近的版本中继续减少标头依赖项，以更严格并减少命名空间污染（例如[4.6](http://gcc.gnu.org/gcc-4.6/changes.html#cplusplus)避免不必要地包含`<cstddef>`，[4.7](http://gcc.gnu.org/gcc-4.7/changes.html)不再包含`<unistd.h>`不必要的），所以为了回答你的最后一个问题，我建议使用最新的 GCC您可以使用版本（即使只是检查代码而不是生产版本），因为它具有最严格、最干净的标头，并且会发现最多的问题。另一种选择是使用更严格的标准库实现，例如[libcomo](http://www.comeaucomputing.com/libcomo/)。**

# django - 在时区支持处于活动状态时，DateTimeField 收到了一个简单的日期时间

> ID：11557119
> 
> 赞同：13
> 
> 时间：2012-07-19T08:47:49.343
> 
> 标签：django

Django 给了我一些运行时警告（关于我没有编写的代码）。

我怎样才能让 Django 给我一个堆栈跟踪，所以我可以看到是什么导致了这些？

```
/usr/local/lib/python2.7/dist-packages/django/db/models/fields/__init__.py:808: 
RuntimeWarning: DateTimeField received a naive datetime (2012-07-19 09:36:16.161479) 
while time zone support is active.
  RuntimeWarning 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-09T18:44:57.427

来自文档：[https ://docs.djangoproject.com/en/stable/topics/i18n/timezones/#code](https://docs.djangoproject.com/en/stable/topics/i18n/timezones/#code)

在开发过程中，您可以将此类警告转换为异常并通过将以下内容添加到设置文件中来获取回溯：

```
import warnings
warnings.filterwarnings(
    'error', r"DateTimeField .* received a naive datetime",
    RuntimeWarning, r'django\.db\.models\.fields') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T09:09:51.323

您可以实现您的日志格式化程序，并使用`traceback.print_exception()`.

[请参阅FormatException](http://docs.python.org/library/logging.html#logging.Formatter.formatException)上的 Fomatter 文档

您也可以参考这个，[当我告诉它时，如何使用 Django 的记录器来记录回溯？](https://stackoverflow.com/questions/4839762/how-do-i-use-djangos-logger-to-log-a-traceback-when-i-tell-it-to)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-19T11:40:07.457

这意味着您在 django 中启用了时区支持；但是您向它传递了一个没有附加任何时区信息的日期时间对象。

如果你想要 django 的时区支持，那么使用的 datetime 对象应该是时区感知的。

[关于时区支持](https://docs.djangoproject.com/en/dev/topics/i18n/timezones/#naive-and-aware-datetime-objects)的文档提供了一种将您的日期时间对象转换为带有 timzeones 的方法。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-07-19T08:52:30.380

Django 的源码告诉你刚刚发生了什么：

```
def get_prep_value(self, value):
    value = self.to_python(value)
    if value is not None and settings.USE_TZ and timezone.is_naive(value):
        # For backwards compatibility, interpret naive datetimes in local
        # time. This won't work during DST change, but we can't do much
        # about it, so we let the exceptions percolate up the call stack.
        warnings.warn(u"DateTimeField received a naive datetime (%s)"
                      u" while time zone support is active." % value,
                      RuntimeWarning)
        default_timezone = timezone.get_default_timezone()
        value = timezone.make_aware(value, default_timezone)
    return value 
```

# c# - Microsoft Office Word 加载项粘贴功能 - C#

> ID：11557123
> 
> 赞同：0
> 
> 时间：2012-07-19T08:48:22.160
> 
> 标签：c#, ms-word, ms-office, add-on

我有一个简单的 word 插件，我用它来将一系列字符串粘贴到 Microsoft Word 文档的不同位置。

目前我正在使用这些代码行来获取有关位置的信息：

```
 int PageNumber = range.get_Information(WdInformation.wdActiveEndPageNumber);
 int ColumnNumber = range.get_Information(WdInformation.wdFirstCharacterColumnNumber);
 int LineNumber = range.get_Information(WdInformation.wdFirstCharacterLineNumber); 
```

我需要一种动态跟踪他们位置的方法。假设用户在某处粘贴了一个名称，然后我们的用户决定更改该粘贴名称之前的文档内容。

我是否需要解析整个文档才能找到我粘贴的字符串？

如果它是像“Hello”这样的常见字符串值怎么办？我可以动态隐藏或附加一些东西到我粘贴的字符串吗？就像指向文档中特定字符串的指针一样？

我感谢任何帮助或想法，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T12:22:35.700

根据上面的评论，听起来书签提供了您需要的东西。书签可以被隐藏——要做到这一点（IIRC），你需要给它们一个以下划线开头的名字。如果您想稍后迭代隐藏的书签，那么您需要设置

```
Bookmarks.ShowHidden = true 
```

预先。

# ruby-on-rails - 用户 first_name last_name 字段以创建 full_name 字段

> ID：11557125
> 
> 赞同：1
> 
> 时间：2012-07-19T08:48:38.817
> 
> 标签：ruby-on-rails, postgresql, heroku, migration

我在 Rails 的模型中拥有 `first_name`和字段。`last_name`我想在我的数据库中添加另一个字段，`full_name`并想知道无缝执行此操作的最佳方法是什么。请注意，我还有一个生产服务器正在运行，并且希望这样做，这样我不仅可以在迁移中添加一列，还可以使用现有数据填充新字段。

编辑：

这是我的控制器

```
def followers
    @title = "Followers"
    @user = User.find(params[:id])
    @users = @user.followers.paginate(page: params[:page])
    @followers = @user.followers.find(:all, :select => 'users.id, users.first_name, users.last_name', :conditions => ["users.first_name like ?","%" + params[:q] + "%"])

    respond_to do |format|
      format.html {render 'show_follow'}
      format.json {render :json => @followers}
    end
end 
```

我希望能够 1.`select: 'users.id, users.full_name`和 2.`:condition =>["users.full_name like ?", ...]`我能想到的唯一方法是修改模型。我也只想返回属性`id`和`full_name`json 对象。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-19T09:23:15.090

在模型中定义一个 full_name 方法可能会更好：

```
def full_name                                                                                                                                                                                     
  ([first_name, last_name] - ['']).compact.join(' ')                         
end 
```

您可以按全名搜索，例如：

```
def self.find_all_by_name_containing(text)
  self.where("LOWER(first_name || ' ' || last_name) LIKE ?", "%#{text.downcase}%")
end 
```

然后定义你自己的#to_json

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T09:26:07.633

如果您真的想继续在模型中添加`full_name`字段`User`，那么我建议您执行以下步骤。

1.生成一个rails迁移，将字段添加`full_name`到`users`表中。

```
rails g migration add_full_name_to_users full_name:string 
```

2.将以下`before_save`回调添加到您的`User`模型中。

```
Class User < ActiveRecord::Base
  ...

  before_save :set_full_name

  private
  def set_full_name
    self.full_name = "#{self.first_name} #{self.last_name}".strip
  end
end 
```

3.Commit，将代码推送到生产环境，在生产环境中运行迁移。

4.在 Rails 控制台中对所有用户运行`save`or方法。`save!`

```
$> User.find_each(:batch_size => 1000){ |user| user.save } 
```

我想，这应该负责更新您现有的用户，而且`before_save`电话将负责未来的添加/更新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T13:19:21.353

生成迁移

```
rails g migration add_full_name_to_users 
```

内部迁移：

```
def up
  add_column :users, :full_name, :string
  execute <<-SQL
    UPDATE users SET full_name = first_name||' '||last_name WHERE full_name IS NULL;
  SQL
end 
```

它将创建 full_name 列并使用默认数据填充它。您也可以在 ruby​​ 中执行类似的操作，但在 SQL 中会快得多。

# php - 使用变量的 PHP SQL UPDATE

> ID：11557130
> 
> 赞同：0
> 
> 时间：2012-07-19T08:48:51.990
> 
> 标签：php, mysql, variables

我目前有一个上传照片的脚本，目前它会上传多张图片，每次创建新的时候都会向 mySQL 数据库添加一个新行。但是我希望用户最多只能上传 1 张图片。

因此，我更改了注册脚本，将一行直接插入到数据库中，并为每个注册的新用户提供一个默认图像。

登录后的图像上传脚本当前使用以下行将数据放入数据库

```
$sql2= "INSERT INTO `profile_photo` (`profile_id`,`title`,`size`,`type`,`reference`)
            VALUES ('".$_SESSION['id']."','$title','$size','$type','$pic'); "; 
```

但是，这不是我希望它工作的方式；我相信解决方案是将其更改为 UPDATE 行。

当我更改行时，这会导致问题，我相信我还没有完全掌握在 mySQL 中更新行的概念。

请问你能建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T08:52:57.997

```
$sql2= 
"INSERT INTO `profile_photo` (`profile_id`,`title`,`size`,`type`,`reference`)
VALUES ('".$_SESSION['id']."','$title','$size','$type','$pic')
ON DUPLICATE KEY UPDATE title = VALUES(title), size = VALUES(size), type = VALUES(type), reference = VALUES(reference)"; 
```

如果该`profile_id`列获得索引将解决此问题`unique`。

**行为**如果尚未添加，
这会将`INSERT`所有数据放在新行中。`profile_id`如果是，它将`UPDATE`改为运行。

但是，您的代码几乎是在乞求 mysql 注入。在它破坏您的网站之前，请务必阅读此内容。

[鲍比桌](http://bobby-tables.com/)，供您考虑。

在此处阅读[DUPLICATE KEY](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T08:52:40.530

假设这`profile_id`是您的唯一密钥：

```
$sql2= "
INSERT INTO 
    `profile_photo` (`profile_id`,`title`,`size`,`type`,`reference`)
    VALUES ('".$_SESSION['id']."','$title','$size','$type','$pic')
    on duplicate key update set title='$title', size='$size', type='$type', reference='$reference'; "; 
```

您还可以使用替换为：

```
$sql2= "
Replace into 
    `profile_photo` (`profile_id`,`title`,`size`,`type`,`reference`)
    VALUES ('".$_SESSION['id']."','$title','$size','$type','$pic')"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T08:56:03.337

我认为这个问题遗漏了一些信息。

*   您可能需要查看[REPLACE INTO](http://dev.mysql.com/doc/refman/5.1/de/replace.html)语句
*   或者查看[MySQL UPDATE](http://dev.mysql.com/doc/refman/5.1/de/update.html)参考手册页

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T08:56:34.273

您需要执行 UPDATE sql 语句：

```
$sql3= "UPDATE `profile_photo` SET `title`='" . mysql_real_escale_string($title) .
       "', `size`='" . mysql_real_escape_string($size) . 
       "', `type`='" . mysql_real_escape_string($type) .
       "', `reference`='" . mysql_real_escape_string($pic) .
       "' WHERE `profile_id`=" . $_SESSION['id']; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-19T08:57:01.387

也许解决方案是[Replace](http://dev.mysql.com/doc/refman/5.5/en/replace.html)？

# asp.net-mvc - HttpClient 传入 Windows 凭据

> ID：11557131
> 
> 赞同：1
> 
> 时间：2012-07-19T08:48:55.840
> 
> 标签：asp.net-mvc, authentication, asp.net-web-api, httpclient

我已经使用 ASP.NET Web Api 构建了一个 ASP.NET MVC 4 网站，该网站将通过 IIS 中的 Windows 身份验证进行保护。在 Visual Studio 中一切正常；HttpClient 的调用正在工作，并且总是返回数据以及状态码 200。但是，当我发布到 IIS 时，这就是问题所在；当尝试调用 api 时，我总是得到一个 401 Unauthorized 与这些设置：

身份验证：仅 Windows 身份验证 授权：仅允许一个用户 - 我。

但是，当我将 Authorization 更改为 Allow All 时，它可以正常工作，但这不是我想要的行为。

我尝试直接从浏览器调用 API，仅将授权设置为我的帐户……它像一个好的小 Api 一样工作正常；除非我以其他用户身份登录，否则不会出现未经授权的错误。

所以我想这让我得出结论，网站与 API 的通信方式有问题。这是我的代码：

```
public ActionResult Index()
{
    HttpClientHandler handler = new HttpClientHandler();
    handler.UseDefaultCredentials = true;

    using (HttpClient client = new HttpClient(handler))
    {
        var clientResult = client.GetAsync(
        string.Format(@"{0}{1}",ConfigurationManager.AppSettings["WebApiBaseUri"].ToString(), "products")
        ).Result;
        clientResult.EnsureSuccessStatusCode();
        //if (clientResult.StatusCode != HttpStatusCode.OK)
        //{
        //    ViewBag.Error = clientResult.StatusCode;
        //    ViewBag.User = userName;
        //    ViewBag.Message = clientResult.Content.ReadAsStringAsync().Result;
        //    return View();
        //}

        var receivedData = clientResult.Content.ReadAsStringAsync().Result;
        List<ProductModel> data = JsonConvert.DeserializeObject<List<ProductModel>>(receivedData);
        return View(data);
    }
} 
```

这是API端的代码：

```
public IQueryable<Product> Get()
{
    _context = new InventoryContext();
    return _context.Products.AsQueryable();
} 
```

有人知道我在做什么错吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-23T15:12:16.053

问题是您假设运行 HttpClient 请求的 IIS 进程将通过向网站发出请求的用户的凭据发送。除非您设置 Kerberos 以传递凭据，否则这是不正确的。相反，默认凭据将发送 IIS 中的应用程序池设置为在其下运行的用户的凭据。在另一个问题中对此问题有更详细的答案，以及有关如何使用 Kerberos 的一些指导：[ASP.NET passing along Windows Authentication credentials](https://stackoverflow.com/questions/1600521/asp-net-passing-along-windows-authentication-credentials)。如果您将运行 IIS 进程的帐户添加到您的授权列表中，您应该会看到您的调用成功，尽管我猜这不是您希望它的工作方式。

# android - onTouchEvent，如果用户在控制之外放下手指，则检测 ACTION_MOVE

> ID：11557134
> 
> 赞同：2
> 
> 时间：2012-07-19T08:49:07.407
> 
> 标签：android, android-layout

我有自己的切换按钮：

```
@Override
public boolean onTouchEvent(MotionEvent event) {

    super.onTouchEvent(event);

if (event.getAction() == MotionEvent.ACTION_MOVE) {

        if (event.getY() >= getHeight()) {
            if(isChecked()) {
                this.setChecked(true);
                this.performClick();
            }
        } else if (event.getY() <= 0) {
            if(!isChecked()) {
                this.setChecked(false);
                this.performClick();
            }
        }
    }
    return true;
} 
```

我想检测用户是否将手指放在我的切换按钮上并进行更改。但如果用户在控件外部按下手指，我无法检测到 onTouchEvent。有哪些解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T09:02:15.113

您可以注册`OnTouchListener`您的视图：

```
mOnTouchListener = new OnTouchListener() {
        @Override
        public boolean onTouch(View view, MotionEvent motionEvent) {
            final int action = motionEvent.getAction();
            boolean ret = false;

            switch (action) {
            case MotionEvent.ACTION_DOWN:
                ret = ...;
                break;
            case MotionEvent.ACTION_MOVE:
                ret = ...;
                break;
            case MotionEvent.ACTION_UP:
                ret = ...;
                break;
            }

            return ret;
        }
    }; 
```

方法返回的`onTouch(View view, MotionEvent motionEvent)`内容定义了任何其他 OnTouchListener() 必须审核此事件或否。您可以看到[这个问题](https://stackoverflow.com/questions/5933426/android-cant-see-action-move-up-in-ontouchevent-of-a-relativelayout)。

**编辑**：
创建`two`OnTouchListener() 类并注册每个类以观察它的运动事件。（一个用于您的`button`，一个用于它的`parent`）。返回类`true`的`onTouch`方法来审核您的按钮运动事件，因此只有此类审核按钮的运动事件而不是父级听众。

# c# - 如何实现可用于不同类型对象的功能？

> ID：11557137
> 
> 赞同：1
> 
> 时间：2012-07-19T08:49:16.870
> 
> 标签：c#, oop, design-patterns

我必须在我的应用程序中实现“全局”搜索/过滤功能。每个包含信息列表的窗口，无论是 DataGrid 还是其他列表的实现，都必须有一个搜索框，如果用户在搜索框中输入文本，它会根据正在搜索的内容过滤该列表。我只想实现一次搜索逻辑。

在大多数情况下，这不一定太难。原因是大多数包含列表的窗口都基于相同的数据类型。这些都是 ViewModel，每个 ViewModel 都扩展 ViewModelBase，而 ViewModelBase 包含我将要搜索的数据。

一个基本的例子：

```
public class ZoneVm : ViewModelBase
{
    // Zone specific functionality
}

public class UserVm : ViewModelBase
{
    // User specific functionality
}

public class ViewModelBase : INotifyPropertyChanged
{
    public string Name { get; set; }
    public int Value { get; set; }

    // The handy thing about the common view model base is that 
    // I can contain the model binding in a single place

    // It will be easy to search List<ZoneVm> and List<UserVm> because
    // they are both effectively List<ViewModelBase>. 
} 
```

困难在于我必须搜索的异常对象。一些窗口包含一个*不*扩展 ViewModelBase 的对象列表，所以我不会有这个可预测的属性列表来搜索，例如

```
public class PanelData // doesn't implement ViewModelBase :-(
{
    public int SerialNumber { get; set; }
    public Customer Customer { get; set; }

    // other properties that I'll have to search/filter on
} 
```

这类任务是否有“最佳实践”方法？有解决这个问题的设计模式吗？我应该如何处理必须搜索/过滤 2（可能更多）不同类型的列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T08:53:17.600

我的建议是创建一个接口而不是基类，即`IViewModelBase`. 该界面可以为空。此外，创建您的基类，但它仅特定于某些对象（它也将是抽象的）。

```
public interface IViewModelBase : INotifyPropertyChanged
{
}

public abstract class Vm : IViewModelBase 
{
        public string Name { get; set; }
        public int Value { get; set; }
        public event PropertyChangedEventHandler PropertyChanged;
}

public class ZoneVm : Vm
{
    // Zone specific functionality
}

public class UserVm : Vm
{
    // User specific functionality
}

public class PanelData : IViewModelBase
{
    public int SerialNumber { get; set; }
    public Customer Customer { get; set; }
    public event PropertyChangedEventHandler PropertyChanged;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T09:01:45.883

我认为您不希望每个数据都有一个共同的可搜索成员吗？（这可以通过使用带有这个抽象成员的通用 IData-Interface 来处理，正如 Ofer 所说）

我会将它们放在可查询的集合中，并以抽象的方式实现搜索（请自行填写空白）：

```
class MySearchableDataListBase<T> : INotifyPropertyChanged
{
   List<T> _list = new List<T>();
   string _currentFilterString = "";

   abstract bool FilterItemPredicate(T item, string query);

   public abstract IEnumerable<T> FilteredItems
   {
      get {
         return _list.Where(i => FilterItemPredicate(i, _currentFilterString)).ToArray();
      }
   }

   public string FilterQuery
   {
      get { return _currentFilterString; }
      set {
         if (value != _currentFilterString)
         {
             _currentFilterString = value;
             OnPropertyChanged("FilterQuery");
             OnPropertyChanged("FilteredItems");
         }
      }
   }
} 
```

然后，您可以将其用作数据的集合，并为过滤/搜索提供命令和属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T09:09:56.960

你可能想看看 mixins：[re](http://remix.codeplex.com/) - [mix](http://www.codeproject.com/Articles/192716/re-mix-A-Mixin-Library-for-NET)

它允许您在对象中混合功能（有点像多继承）。
然后，您可以提供接口实现，并拥有一个继承 Window 的类，并具有 ViewModelBase 的方法/属性，可通过接口使用。

# javascript - 从不同的js文件访问变量

> ID：11557139
> 
> 赞同：1
> 
> 时间：2012-07-19T08:49:29.320
> 
> 标签：javascript

我有 3 个 html 文件和 3 个 js 文件

index.html,rank.html,score.html

global.js,rank.js,score.js

在 index.html 中，我使用 iframe 包含了 rank.html 和 score.html。

在 global.js 中，我声明了 Var rank；& global.js 包含在 rank.html & score.html 中。

我正在更新 rank.js 中的排名值，并且我想访问 score.js 中的更新值。在 score.js 我没有得到更新的值它给出了 UNDEFINED 值。

我不想在 score.html 中包含 rank.js，所以我创建了 global.js 并包含在 html 文件中。

这是我的代码，

索引.html

```
<html>
    <head>

    </head>
    <body>
<iframe src="../rank/rank.html" frameborder = "0" scrolling="no" width="50%" height = "100%"></iframe>
<iframe src="score.html" frameborder = "0" scrolling="no" width="50%" height = "100%"></iframe>

    </body>
</html> 
```

global.js

```
var rank; 
```

score.js

```
$(document).ready(
        function(){     

                    setInterval(dataupdate, 10000);

    });
function dataupdate() { 

alert(rank) 

}; 
```

rank.js

```
$(document).ready(
            function(){     

                        setInterval(dataupdate, 10000);

        });
    function dataupdate() { 

    rank = "first";

    }; 
```

我想更新 score.js 文件中的排名值如何访问该值...

谢谢.....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T08:54:41.450

如果 global.js 包含在 index.html 中，那么您需要使用 window.top.rank （或 window.parent.rank 如果 index.html 也可能存在于框架中）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T08:55:26.067

当您像您所做的那样声明一个全局变量时，它会被创建为`window`对象的属性，即`window.rank`. 您的主窗口和 2 个 iframe 具有单独的`window`对象，因此`window.rank`从主框架分配的对象与`window.rank`从其中一个 iframe 访问的对象不同。

要从 iframe 内部访问主窗口对象的 rank 属性，您可以使用`parent.rank`而不是`window.rank`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T08:52:39.267

您应该将变量保存在索引中，因为您只能从 iframe 访问父变量

```
index 

var a=5;

-----------

rank

parent.a=6 
```

现在分数可以读`parent.a`为 6

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T08:54:02.557

尝试

```
window.parent.rank 
```

或者

```
window.top.rank 
```

# osgi - 如何根据standalone.xml 文件中的配置在JBoss 7.x 中创建JGroups 通道？

> ID：11557142
> 
> 赞同：1
> 
> 时间：2012-07-19T08:50:03.137
> 
> 标签：osgi, jboss7.x, jgroups

我正在为 JBoss7.x 编写一个 OSGI 服务，我需要为一些与域相关的 RPC 创建一个新的 JChannel。我想使用standalone.xml 文件中的协议栈定义之一，如果可以的话，我想使用共享传输。

我不知道从哪里开始访问信息或如何注入它。

查看 JBoss AS 代码，我想我可能需要获取一个 JChannelFactory 实例。我将如何在 OSGI 中执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T08:07:44.930

不确定这是否是推荐的方法，但它确实有效。

首先，获取对 JBoss Modular Service Container 的引用。这可以在 OSGI 服务注册表中查找。使用 Spring DM/蓝图：

```
<osgi:reference id="serviceContainer" interface="org.jboss.msc.service.ServiceContainer" /> 
```

在您的代码中，使用服务容器按名称查找给定服务：

```
ServiceName sn = ServiceName.of("jboss", "jgroups", "stack", "udp");
ServiceController<?> serviceController = serviceContainer.getService(sn);

if (serviceController == null) {
    throw new RuntimeException("Failed to lookup service controller for jboss.jgroups.stack.udp");
}

Service<?> service = serviceController.getService();
Object obj = service.getValue();

ChannelFactory factory = (ChannelFactory) obj; 
```

如果您需要知道可用的服务名称，请调用`dumpServices()`以`ServiceContainer`获取日志文件中的列表。

如果使用 Maven，则在 pom 文件中添加对 JBoss MSC 的依赖项：

```
<dependency>
    <groupId>org.jboss.msc</groupId>
    <artifactId>jboss-msc</artifactId>
    <version>1.0.2.GA</version>
</dependency> 
```

加上您可能需要的任何其他依赖项，以便访问服务使用的代码。在上面的示例中，需要依赖 pom 文件中的 org.jboss.as/jboss-as-clustering-jgroups 和 org.jgroups/jgroups 库。

您还需要确保这些服务在standalone.xml 文件中定义为功能：

```
<capability name="org.jgroups"/>
<capability name="org.jboss.as.clustering.jgroups"/> 
```

# javascript - fopen 错误，空属性

> ID：11557150
> 
> 赞同：-1
> 
> 时间：2012-07-19T08:50:52.027
> 
> 标签：javascript

我正在尝试从 aspx 页面中的 javacript 写入文件，但出现错误。这是我的代码和错误。

```
 var fh = fopen("c:\temp\MyFile.txt", 3); // Open the file for writing

               if (fh != -1) // If the file has been successfully opened
               {

                   fwrite(fh, saveData); // Write the string to a file
                   fclose(fh); // Close the file 
               } 
```

属性“fopen”的值为 null 或未定义，而不是 Function 对象。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T08:59:42.670

fopen 不是 JavaScript 函数。

# html - 面包屑模板中的css最后一个孩子

> ID：11557153
> 
> 赞同：1
> 
> 时间：2012-07-19T08:51:00.237
> 
> 标签：html, css, breadcrumbs

我使用 CSS 做了一个面包屑模板。但问题是，我无法从最后一个孩子身上移除箭头（应该很简单，没有箭头）。

我也只需要最后一个孩子的普通活动 css。

这是我的演示 [http://jsfiddle.net/gDAq4/2/](http://jsfiddle.net/gDAq4/2/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T08:56:40.437

您可以仅在最后一个禁用伪元素`li`：

```
#vert_menu li:last-child a::after,
#vert_menu li:last-child a::before {
    content: none;
} 
```

**见：http:** [//jsfiddle.net/thirtydot/gDAq4/5/](http://jsfiddle.net/thirtydot/gDAq4/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T09:01:09.737

```
#vert_menu li:last-child a {  background:none; }
#vert_menu li:last-child a::after, #vert_menu li:last-child a::before {  border:none; } 
```

# vim - Vim Taglist 无法显示页面功能

> ID：11557160
> 
> 赞同：0
> 
> 时间：2012-07-19T08:51:25.607
> 
> 标签：vim, ctags, taglist

我想在我的 Vim 编辑器中使用 Ctag 和 TagList 插件，一切正常，除了 taglist 导航，它不能显示包含的所有页面功能，但页面自己定义。我按 ctrl+] 它也很好用。

例如

```
$var = get_input();recent();function recent(){return true} 
```

get_input 是在另一个文件中定义的。在这里我只能在 TagList 侧边栏中看到“最近”

如何让侧边栏显示我最近工作文件中的所有功能？感谢所有帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T14:14:19.433

我认为你不能。Taglist 只向您显示声明事物的位置，而不是您调用它们的位置。您可以在目录中搜索文件名或使用其他工具（如 cflow）查看从文件中调用了哪些函数。

您无法显示该信息，因为 ctags 不关心。Ctags 是一个映射函数、定义等**定义**的工具。Taglist 只是向您显示来自 ctags 创建的标签文件的信息。无论您在文件中实际调用什么函数，都与 ctags 无关，因此您无法使用 ctags 和 TagList 显示此信息。

# asp.net-mvc - 如何阻止实体框架 5 将属性映射到数据库？

> ID：11557161
> 
> 赞同：2
> 
> 时间：2012-07-19T08:51:26.240
> 
> 标签：asp.net-mvc, entity-framework

我有一个不应映射的名为*StatusList的属性。*在早期版本中，*NotMap*属性在那里，但现在我找不到它。它在 EF5 中的等价物是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T08:58:56.910

还有一个`NotMapped`属性，但是数据注释已经移到了

```
System.ComponentModel.DataAnnotations.Schema 
```

命名空间

[http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.schema%28v=vs.110%29.aspx](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.schema%28v=vs.110%29.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-21T17:31:52.553

您可以使用流利的 api 映射在您的数据库上下文中执行此操作：

```
protected override void OnModelCreating(DbModelBuilder modelBuilder) {
    modelBuilder.Entity<User>().Ignore(q => q.FullName);
} 
```

或者像 Raphael 所说的那样，将`NotMapped`属性添加到您的实体属性中：

```
public class User {
    public string FirstName { get; set; }
    public string LastName { get; set; }

    [NotMapped]
    public string FullName { 
        get {
            return string.Format("{0} {1}", FirstName, LastName);
        }
    } 
```

# asp.net - IIS 5.1 会话

> ID：11557163
> 
> 赞同：1
> 
> 时间：2012-07-19T08:51:35.450
> 
> 标签：asp.net, iis

我在 IIS 5.1 中托管我的网站。当我在输入登录凭据后使用 localhost/xwy/Login.aspx 访问该站点时，我能够移动到该站点的下一页 (main.aspx)。但是，当我使用 xyz.com/xwy/login.aspx （xyz.com 是机器名称）并输入登录凭据时，我被重定向回 l​​ogin.aspx.After，检查我在页面 main 中找到的 Trace.axd .aspx 会话变量未实例化，即在会话状态部分下不存在会话变量。![在此处输入图像描述](../Images/d9184eabb06d5e8211ce7f63a54a0e50.png)

我正在为网站使用 ASP.NET 4.0。如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T09:22:44.513

认证基于cookies，cookies基于**域名设置**

当您从更改为`localhost/xwy/Login.aspx` 域名**时**更改。`xyz.com/xwy/login.aspx`

 **两者不一样的原因是您可能已经`domain`在 web.config 上设置了参数。删除它以让 cookie 应用于任何域。

您在 web.config 上设置主机的位置是：

```
<authentication mode="Forms">
  <forms domain="local.com" />
</authentication>

<httpCookies domain="local.com" /> 
```**

# algorithm - 为什么在执行广度优先搜索时节点需要“访问”状态？

> ID：11557175
> 
> 赞同：2
> 
> 时间：2012-07-19T08:52:32.513
> 
> 标签：algorithm, graph, breadth-first-search

我编写了一个用于在图表中搜索的算法，并使用一个标志来指示是否访问了一个节点，这样我就不会陷入循环，以防我的图表中有一个圆圈。

我后来检查了一本算法书，它使用了 3 个状态而不是 2 个，第 3 个是“访问”状态。我想知道为什么它在那里，因为我可以在没有它的情况下执行搜索？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T13:39:10.787

“访问”状态没有多大意义——每个节点只有在你处理它的邻居并将它们排入队列时才会处于这种状态——而且你完全知道你当时正在访问哪个节点。

有意义（但仍然不需要）是“排队”状态，例如此动画中的灰色节点（来自维基百科）

![](../Images/2f69edcffcd819011d4403d7a0e01543.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T08:55:11.203

它不是严格需要的，但是一些使用 BFS 作为基本构建块的算法*使用*此信息，因此额外的状态。

我想从教育的角度来看这也是一个好处，因为插图可以更好地理解正在发生的事情。

# javascript - 正则表达式单词边界

> ID：11557176
> 
> 赞同：2
> 
> 时间：2012-07-19T08:52:37.650
> 
> 标签：javascript, regex

正则表达式单词边界。

根据[Regular_Expressions 指南](https://developer.mozilla.org/en/JavaScript/Guide/Regular_Expressions)，`\b`匹配单词边界，例如空格、换行符、标点符号或字符串结尾。

我正在尝试更改以下字符串。

```
"
    abc
" 
```

至

```
"abc" 
```

我确实尝试了以下方法，但它不起作用。有任何想法吗？

```
"  abc  ".replace(/\b/,""); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T09:18:04.123

单词边界的描述写得很糟糕（不幸的是，这种情况经常发生）。[您会在此处](http://www.regular-expressions.info/tutorial.html)找到更好的参考。

单词边界是一个零宽度断言：它不消耗任何字符，它只是断言一个条件为真。在这种情况下，它断言当前位置后跟一个单词字符但前面没有一个，或者前面有一个单词字符但后面没有一个。

如果您想匹配任何不是单词字符的内容，请使用`\W`（注意大写`W`）。但是您实际上只需要匹配空格，即`\s`：

```
"  abc  ".replace(/\s+/, ""); 
```

如果您尝试执行传统的修剪操作，则需要使用锚来确保仅匹配字符串开头或结尾的空格：

```
"  abc  ".replace(/^\s+|\s+$/, ""); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T08:56:06.273

`\b`只匹配没有空格的边界，在空格和第一个/最后一个字母之间选择位置。

用这个：

```
//fulltrim replaces all new lines with space and reduces doubled spaces
String.prototype.fulltrim=function(){return this.replace(/(?:(?:^|\n)\s+|\s+(?:$|\n))/g,'').replace(/\s+/g,' ');}

//just trim spaces from begging and ending of string
String.prototype.trim=function(){return this.replace(/^\s\s*/, '').replace(/\s\s*$/, '');}; 
```

用法

```
"    ssss   ".fulltrim();
"    
   ssss 
".fulltrim(); 
```

一些浏览器已经实现了`trim`方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T08:56:48.800

`\b`本身不匹配字符，它匹配**位置**。就像`^`和`$`。

```
"\n\t   \n  hello world \t  \n\n".replace(/^\s*/, "").replace(/\s*$/, "");
// return "hello world" 
```

# objective-c - 在iOS上，使用Intruments，我们是否必须重新编译程序并运行它并停止它，然后在Instrument中按Record才能看到使用的内存？

> ID：11557181
> 
> 赞同：0
> 
> 时间：2012-07-19T08:52:45.060
> 
> 标签：objective-c, ios

要检查 iOS 应用程序的内存使用情况，请说明代码是否为

```
int n = 1000000;

NSObject *bar = [[NSObject alloc] init];

foo = [[NSMutableArray alloc] initWithCapacity: n];
for (int i = 0; i < n; i++) {
    [foo addObject: bar];
} 
```

我们可以启动 Instruments 并单击工具栏上的 Library 并选择“Memory Monitor”。

但似乎如果我将代码更改为

```
n = 10; 
```

并停止Intruments的Record，重新启动Record，内存使用是一样的。必须停止Record，重新编译Xcode中的代码，运行，停止，然后回到Instruments，点击Record看看新的内存使用情况？是不是总是需要走这么多步骤，或者有没有更简单的方法，或者即使我们可以`NSLog`直接在里面打印内存使用量，`touchesBegan`所以每当我们触摸屏幕时，内存使用量就会被打印出来？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T20:35:21.090

Xcode (cmd-I) 中的 profile 命令应该进行构建，然后在 Instruments 中重新启动运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T13:18:35.190

是的，您必须使用 Xcode 将源代码重新编译为可执行代码，Instruments 无法做到这一点，但您必须换回 Xcode 才能进行更改，对吧？您也不能在 Instruments 中进行代码编辑。

我不确定你从哪里得到这一系列步骤。进行编辑后，您需要构建**cmd-B**，然后构建配置文件**cmd-I**。

所以这对我来说似乎是 2 次按键..？

# django - 如何使用geodjango返回与点距离最短的记录？

> ID：11557182
> 
> 赞同：6
> 
> 时间：2012-07-19T08:52:45.863
> 
> 标签：django, geodjango

我正在使用 geodjango 并在我的数据库中有一组点。要获取某个区域内的点查询集，我使用以下命令：

```
queryset = Spot.objects.filter(point__distance_lte=(origin, distance_m)) 
```

我的问题是我如何才能从我经过的点返回一个点（**距离最短**的点）？

**编辑**

我应该提到我正在传递坐标并想`Point`用它们创建一个对象。然后将该点作为原点传递并对其进行过滤。例如我试过：

```
from spots.models import *
from django.contrib.gis.geos import *

origin = Point(28.011030, -26.029430)
distance_m = 1000

queryset = Spot.objects.filter(point__distance_lte=(origin, distance_m))
for q in queryset:
    print q.distance 
```

这段代码给了我这个错误：

```
Traceback (most recent call last):
  File "<console>", line 2, in <module>
AttributeError: 'Spot' object has no attribute 'distance' 
```

有趣的是，如果我执行以下操作：

```
origin = Spot.objects.get(name='Montecasino').point
distance_m = 1000

for city in Spot.objects.distance(origin):
    print(city.name, city.distance)

(u'Design Quarter Parking', Distance(m=677.347841801))
(u'Montecasino', Distance(m=0.0))
(u'Fourways', Distance(m=1080.67723755)) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T14:03:15.187

最后，从[GeoDjango 距离过滤器的线索中收集了一个解决方案，其中距离值存储在模型查询](https://stackoverflow.com/questions/9547069/geodjango-distance-filter-with-distance-value-stored-within-model-query)中，这使我看到了这篇[文章](http://blog.adamfast.com/2011/11/radius-limited-searching-with-the-orm/)。从这些信息中，我能够收集到您**必须在距离查询中指定**测量**参数**。您将在下面的代码段中看到，我将**measure 导入为 D**。然后在查询中使用它。如果你不指定它，你会得到这个错误：

```
ValueError: Tuple required for `distance_lte` lookup type. 
```

只取我使用的距离最短的点`order_by('distance')[:1][0]`

```
from spots.models import *
from django.contrib.gis.geos import *
from django.contrib.gis.measure import D

distance_m = 20000
origin = Point(28.011030, -26.029430)

closest_spot = Spot.objects.filter(point__distance_lte=(origin, D(m=distance_m))).distance(origin).order_by('distance')[:1][0] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T09:28:44.273

```
queryset = Spot.objects.distance(origin).filter(distance__lte=distance_m)
point = queryset.order_by('distance')[:1][0] 
```

[https://docs.djangoproject.com/en/dev/ref/contrib/gis/geoquerysets/#distance](https://docs.djangoproject.com/en/dev/ref/contrib/gis/geoquerysets/#distance)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-03T20:47:39.693

我正在寻找一个关于如何使用 geodjango 对位置进行排序的示例，所以我的用例非常接近这个。尽管公认的解决方案有效，但对于大数据集（超过 140000 行），性能非常糟糕。

短篇小说：distance_lte 函数必须为表格的每一行计算到原点的距离，并且不能使用地理索引。似乎 dwithin 函数可以利用这些索引，并且在限制完成之前不需要实际计算每行到原点的距离，所以它更有效：

```
origin = Point(28.011030, -26.029430)
closest_spot = Spot.objects.filter(point__dwithin=(origin, 1)) \
    .distance(origin).order_by('distance')[:1][0] 
```

dwithin 函数处理以度为单位的地理数据（查询中的“1”）。

# xml - 如何从经典asp中的xml字符串中的元素中提取文本

> ID：11557183
> 
> 赞同：4
> 
> 时间：2012-07-19T08:52:51.860
> 
> 标签：xml, xpath, asp-classic, jscript, msxml6

我有以下xml：

```
<GetPurchaseContractResponse xmlns="http://payments.amazon.com/checkout/v2/2010-08-31/">
    <GetPurchaseContractResult>
        <PurchaseContract>
            <Id>amzn1.contract.1.1.1.d6779be6bf481167fe945</Id>
            <State>ACTIVE</State>
            <MerchantId>XXXXXXXXXX</MerchantId>
            <ExpirationTimeStamp>2012-07-19T10:55:28.134Z</ExpirationTimeStamp>
            <MarketplaceId>A1SDFERWERSDF</MarketplaceId>
        </PurchaseContract>
    </GetPurchaseContractResult>
    <ResponseMetadata>
        <RequestId>0db53477-d17a-11e1-ac3e-fd3e0de62222</RequestId>
    </ResponseMetadata>
</GetPurchaseContractResponse> 
```

我想提取 ExpirationTimeStamp 元素的内容。

这是我的代码的相关部分（是的，我们使用的是 jscript 而不是 vbscript）：

```
var xmlDoc = Server.CreateObject("Msxml2.DOMDocument.6.0");
xmlDoc.loadXML(xml);
var expNode = xmlDoc.getElementsByTagName("ExpirationTimeStamp");
if (expNode)
    Response.Write(expNode.text); 
```

我也尝试过 selectSingleNode 而不是 getElementsByTagName

我已经尝试将 GetPurchaseContractResponse/GetPurchaseContractResult/PurchaseContract/ExpirationTimeStamp 作为 xpath 字符串，其中没有、一个和两个前导斜杠

Response.Write(xmlDoc.xml) 输出整个文档，因此加载正常。

expNode 变量没有得到任何东西。

我对 xpath 的了解几乎为零，所以我确信那里的一些专家可以指出我所犯的简单错误。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-19T10:16:51.143

用这个：

```
var xmlDoc = Server.CreateObject("Msxml2.DOMDocument.3.0");   
xmlDoc.loadXML(xml);   
var expNode = xmlDoc.documentElement.selectSingleNode("GetPurchaseContractResult/PurchaseContract/ExpirationTimeStamp");   
if (expNode)   
    Response.Write(expNode.text); 
```

其他一些“专家”可能会注意到我在这里作弊。在这里使用 XPath 的主要问题是您的 xml 指定了默认命名空间。XPath 始终将“无名称空间”作为其默认名称空间，因此要针对此 XML 使用 XPath，您需要首先指定名称空间别名，然后使用它为 XPath 中的所有名称添加前缀。

相反，我使用的是默认使用 XSL 模式（不是 XPath）作为其选择语言的 MSXML 版本 3。XSL 模式忽略名称空间和别名，因此对于简单的场景，它更易于使用。

如果你想使用 MSXML6，你可以使用`.setProperty("SelectionLanguage", "XSL Pattern");`.

如果你想使用 MSXML6 和 XPath 你可以使用`.setProperty("SelectionNamespaces", xmlns:a='http://payments.amazon.com/checkout/v2/2010-08-31/'");`，那么你的 XPath 就变成了`a:GetPurchaseContractResult/a:PurchaseContract/a:ExpirationTimeStamp`。

# opengl - 如何使用 fltk 1.3 创建 opengl 3.x 或 4.x 上下文？

> ID：11557186
> 
> 赞同：1
> 
> 时间：2012-07-19T08:52:54.860
> 
> 标签：opengl, fltk

我正在考虑将我的一个软件从 opengl 2.1 移植到现代版本（3.x 或 4.x）。

GUI 是用 fltk 设计的，包括一个 FL_GL_Window，我在其中进行所有渲染。现在我的问题是我不明白如何为这个窗口指定 opengl 上下文。

如果我要使用 SDL 创建 OpenGL 上下文，我可以使用类似： SDL_GL_SetAttribute(SDL_GL_CONTEXT_MAJOR_VERSION, 3); SDL_GL_SetAttribute(SDL_GL_CONTEXT_MINOR_VERSION, 2);

fltk 有类似的东西吗？或者它只能处理 Opengl 2.1 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T22:03:30.543

我想你可以使用`WGL_ARB_create_context`or`wglCreateContext`创建一个 OpenGL 上下文，然后你可以使用 Fl_GL_Window 的[void context (void *, int destroy_flag=0)](http://www.fltk.org/doc-1.3/classFl__Gl__Window.html#a446db213805423decdd02e3e71b922c5) 方法来设置上下文。当然，你必须小心创造。幸运的是，FLTK 将能够为您提供有关 DC 的详细信息，以便您可以创建有效的 OpenGL 上下文。此外，您可以使用`void* context()`方法来获取 FLTK 使用的 OpenGL 上下文的点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T18:01:50.110

[FLTK 1.1](http://www.fltk.org/doc-1.1/Fl_Gl_Window.html#Fl_Gl_Window.Fl_Gl_Window)和FLTX [2.0](http://www.fltk.org/doc-2.0/html/classfltk_1_1GlWindow.html)的窗口创建函数都不允许创建*核心*OpenGL 上下文。您仍然可以创建 2.1 后版本的[兼容性上下文](http://www.opengl.org/wiki/Core_And_Compatibility_in_Contexts)（尽管不是在 MacOSX 上，它们只提供核心 OpenGL）。

# c# - 为什么 XmlDocument.validate 会错误地验证具有空名称空间的无效 xml 文档？

> ID：11557190
> 
> 赞同：1
> 
> 时间：2012-07-19T08:53:09.370
> 
> 标签：c#, xml, xsd

我正在尝试在保存之前验证我在代码中创建的 XML 文档。但是，即使我故意输入不正确的值，我的代码也总是毫无问题地通过验证。代码有什么问题？

```
private XmlDocument xmlDocChanges = new XmlDocument();
   public void Validate()
   {
        xmlDocChanges.Schemas.Add("http://www.w3.org/2001/XMLSchema", "xsd/Customization.xsd");
        ValidationEventHandler eventHandler = new ValidationEventHandler(ValidationCallBack);
        xmlDocChanges.Validate(eventHandler);
   }
   public void ValidationCallBack (object sender, ValidationEventArgs args)
   {
       if(args.Severity == XmlSeverityType.Error || args.Severity == XmlSeverityType.Warning)
       {
           throw new Exception(args.Exception.Message);
       }
   } 
```

编辑示例 XSD。

```
 <?xml version="1.0" encoding="utf-8"?>
<xs:schema
    attributeFormDefault="unqualified"
    elementFormDefault="qualified"
    xmlns:xs="http://www.w3.org/2001/XMLSchema">

  <xs:complexType name="FirstNode">
    <xs:annotation>
      <xs:documentation>First node</xs:documentation>
    </xs:annotation>
    <xs:attribute name="Identifier" type="xs:string" use="required" />
    <xs:attribute name="Bool" type="xs:boolean" use="optional" />
  </xs:complexType>
</xs:schema> 
```

XML

```
<Customizations FormatVersion="1" xsi:noNamespaceSchemaLocation="Customization.xsd">
  <Customization>
    <Application name="App">
      <FirstNode Identifier="one" Bool="NoValue"></FirstNode>
    </Application>
  </Customization>
</Customizations> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T08:23:41.390

我找到了解决方案。我必须在 add 方法中发送一个空的命名空间参数。

```
 public void Validate()
    {
        xmlDocChanges.Schemas.Add("", "xsd/Customization.xsd");
        ValidationEventHandler eventHandler = new ValidationEventHandler(ValidationCallBack);
        xmlDocChanges.Validate(eventHandler);
    }
    public void ValidationCallBack (object sender, ValidationEventArgs args)
    {
        if(args.Severity == XmlSeverityType.Error || args.Severity == XmlSeverityType.Warning)
        {
            throw new Exception(args.Message);
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T09:08:21.133

这是我使用模式验证 xml 的方法

```
public static Tuple<bool, string> ValidateXml(string xmlSchemaFile, string sourceXml) {

        var internalValidationErrors = new XmlSchemaValidationErrorCollection();
        ValidationEventHandler handler = (sender, args) => internalValidationErrors.Add(args);
        var settings = new XmlReaderSettings { ValidationType = ValidationType.Schema };

        try {
            // Set the validation settings. 
            settings = new XmlReaderSettings { ValidationType = ValidationType.Schema };
            settings.ValidationFlags |= XmlSchemaValidationFlags.ProcessInlineSchema;
            settings.ValidationFlags |= XmlSchemaValidationFlags.ProcessSchemaLocation;
            settings.ValidationFlags |= XmlSchemaValidationFlags.ReportValidationWarnings;
            settings.ValidationEventHandler += handler;

            using(var reader = XmlReader.Create(xmlSchemaFile)) {
                settings.Schemas.Add(null, reader);
            }

            if(settings.Schemas.Count == 0)
                return Tuple.Create(false, "Missing schema file.");

            // Create the XmlReader object for xml
            using(var reader = XmlReader.Create(sourceXml, settings)) {
                // Parse the file.  
                while(reader.Read()) {}
            }

            var validationErrors = internalValidationErrors;

            return Tuple.Create(validationErrors.Any(), validationErrors.ToString());
        }
        finally {
            settings.ValidationEventHandler -= handler;
        }
    }

public class XmlSchemaValidationErrorCollection : List<ValidationEventArgs>
{
    internal XmlSchemaValidationErrorCollection()
    { }

    public override string ToString()
    {
        var builder = new StringBuilder();

        foreach (var validationError in this)
        {
            builder.Append("-Validation Error-");
            builder.AppendFormat("Message: {0} \r\n", validationError.Message);
            builder.AppendFormat("Severity: {0} \r\n", Enum.GetName(typeof(XmlSeverityType), validationError.Severity));
            builder.AppendFormat("Exception: {0} \r\n", validationError.Exception.GetDeepMessage());
            builder.Append("\r\n");
        }

        return base.ToString();
    }
} 
```

# vim - 从源代码启动 gvim 构建时出错

> ID：11557191
> 
> 赞同：2
> 
> 时间：2012-07-19T08:53:12.623
> 
> 标签：vim

我已经从源代码构建了 vim 7.3。但是，如果我尝试启动 vim -g（或 gvim），我会收到错误 E25: GUI cannot be used: Not enabled at compile time'
这些是我对 Makefile 所做的更改：

```
CONF_OPT_PERL = --enable-perlinterp=dynamic
CONF_OPT_PYTHON = --enable-pythoninterp
CONF_OPT_PYTHON3 = --enable-python3interp
CONF_OPT_CSCOPE = --enable-cscope
CONF_OPT_ACL = --disable-acl
CONF_OPT_GPM = --disable-gpm
CONF_OPT_SYSMOUSE = --disable-sysmouse
CONF_OPT_FEAT = --with-features=normal
prefix = $(HOME) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T15:28:11.503

您需要安装相应的 GUI 库。然后，`./configure`应该能够检测到它们并发出积极的消息。

有很多关于编译 Vim 和为你的发行版安装依赖项的帖子；去寻找一个。

# c# - 在 Active Directory 的多个 OUS 中搜索用户

> ID：11557193
> 
> 赞同：0
> 
> 时间：2012-07-19T08:53:17.550
> 
> 标签：c#, active-directory

如何使用单个 LDAP 搜索过滤器在多个组织单位的 Active Directory 中搜索用户？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T22:10:12.377

为了使用单个 LDAP 过滤器搜索多个 OU，您应该将搜索的基础定位在包含您有兴趣搜索的所有 OU 的顶级 OU，并执行 Tree Scope 搜索。我相信这应该为你做。

如果您在单个 LDAP 搜索中查找多个单独的 OU，我认为这在单个 LDAP 搜索中是不可能的。您可以执行多个 LDAP 搜索，每个 OU 一个，然后整理结果，但我认为您不能在单个 LDAP 搜索中指定多个目标 DN。

# asp.net-mvc - 为什么 MVC 控制器的类名必须有尾随的“控制器”约定？

> ID：11557194
> 
> 赞同：21
> 
> 时间：2012-07-19T08:53:21.387
> 
> 标签：asp.net-mvc

我发现 MVC 无法识别控制器，除非它在类名后面附加了“控制器”，这很荒谬。[这个答案](https://stackoverflow.com/a/3019417/323051)提到`ControllerDescriptor`and`ControllerTypeCache`作为 MVC 中设置此约定的两个地方。

我的问题是为什么？这显然不是配置的约定，如`IsControllerType`检查`ControllerTypeCache`类：

*   是否公开
*   不抽象
*   实现`IController`
*   以。。结束`"Controller"`

有人知道这是什么原因吗？毕竟所有控制器都可能在一个实际的 MVC 项目中，在一个名为“Controllers”的文件夹中，然后简单地双击该文件将向我们显示该类继承了`Controller`.

对我来说似乎很愚蠢-但我想知道他们这样做是否有**实际**原因。

**编辑**

刚刚看到Phil Haack 昨天发表的[这篇博客文章](http://haacked.com/archive/2012/07/25/finding-bad-controllers.aspx)，他讨论了这个大会的决定——他和我的想法一样——可能有点毫无意义！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-19T09:27:19.220

## 定制控制器工厂

您始终可以提供一个自定义控制器工厂，以不同方式解析这些类。而且我同意控制器不需要附加*控制器*类型名称，因为毕竟它们就像任何其他类一样。无论如何，它们的 OOP 祖先类型将它们定义为控制器 ( `IController`, `Controller`...)

## 可能是 Visual Studio？

尽管它可能与 Visual Studio 有关。类似于*属性*类。也许 Visual Studio 不会为不以*Controller*结尾的类提供额外的上下文菜单项。当处于控制器操作中时，您可以轻松导航（或创建）到匹配的视图。

## 约定很好

所以[说专家](http://en.wikipedia.org/wiki/Convention_over_configuration)和我同意。.net 框架中还有其他类似的约定，但人们不会抱怨它们。

想想**collections**、**dictionaries**、**attributes**、**lists**和其他类型也使用类似的后缀而没有特别的原因。无论哪种方式它们都可以工作，但它们的用户（开发人员）更容易识别它们，他们本能地知道它们应该如何工作以及何时使用它们。

## 根据 Asp.net MVC 团队的类型冲突

想象一下，有一个`ProductController`可能处理`Product`应用程序模型实体实例。由于没有*控制器*命名约定，我们将有两种具有相同名称的类型，因此必须始终提供命名空间来区分两者。但是因为我们确实有这个约定，所以这不是必需的，也不会发生类型冲突。

```
public class ProductController : Controller
{
    public ActionResult Index()
    {
        // we'd have to distinguish this Product type here
        IEnumerable<Product> result = GetProducts();
        return View(result);
    }
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T09:16:59.707

需要前 2 个以便 mvc 可以实例化控制器，需要第 3 个以便 mvc 知道如何使用控制器（调用`Execute`方法），第 4 个我想只是为了更快地找到类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-26T05:41:49.247

是的，约定很好，但我认为这不是约定问题。这是从解决方案域中为正在使用的模式选择一个好的名称的问题。

例如，如果处理产品的 UX 涉及到一个列表，那么您可以简单地调用控制器 ProductList，它不必与 List 混淆。作为人类，我们每天都可以根据上下文轻松消除歧义，软件中的命名也不例外。现在控制器的作用是协调。以我们的 ProductList 为例。它将协调诸如 ProductList.sort(byField)、ProductList.delete(product) 之类的操作。

就利用约定优于配置的概念而言，可以在元级别上做到这一点。在 .Net 中，可以使用属性来识别控制器或模型。

有什么大不了的？在名称中说明模式会导致懒惰的命名，从而导致懒惰的建模。名称不仅仅是一个名称，它还选择了一个概念，您将使用该概念来对解决方案域进行建模，其含义决定了哪些代码代表该概念以及该代码耦合到哪些其他代码。您的名称越通用和/或模棱两可，您就越会邀请您的设计以更难维护的方式进行扩展和更改。

# ruby - 尝试使用匹配器 /\w/ 和 /\W/ 将句子拆分为单词和分隔符

> ID：11557195
> 
> 赞同：2
> 
> 时间：2012-07-19T08:53:25.527
> 
> 标签：ruby, regex

我想将一个句子分成单词和单词之间的部分（我称之为分隔符）。

```
sentence = "First-tea,-then-coffee!"
=> "First-tea,-then-coffee!"
words = sentence.split(/\W+/) # Splits by non-word characters
=> ["First", "tea", "then", "coffee"]
delimiters = sentence.split(/\w+/) # Splits by word characters
=> ["", "-", ",-", "-", "!"] 
```

拆分成单词效果很好，但我对分隔符有疑问。

**第一个空字符串在分隔符数组中来自哪里？**

感谢您的解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T08:58:24.650

在行`/^/`的开始和第一次`-`出现之间有`"First"`。

所以它在`"First"`获得一个空字符串`""`和`-`.

# android - 如何在 Android 中保存不可序列化的对象

> ID：11557197
> 
> 赞同：0
> 
> 时间：2012-07-19T08:53:27.533
> 
> 标签：android, serialization, android-view

如何保存未实现可序列化的类的对象？

例如：[查看](http://developer.android.com/reference/android/view/View.html)类对象

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T08:59:05.493

您可以扩展您的类并让您的类实现可序列化：

```
public class MyClassSerializable extends AClass implements Serializable
{
 //...
} 
```

***注意**：谢谢@MoshErsan，这对`View`课程不起作用，因为`Drawable`不是`Serializable`。您将不得不序列化您的视图参数，然后使用这些参数重新创建您的视图。*

# eclipse - 如何使 Eclipse 自动完成与 JAR 中的 JSF 复合组件一起工作？

> ID：11557201
> 
> 赞同：1
> 
> 时间：2012-07-19T08:53:41.340
> 
> 标签：eclipse, jsf-2, autocomplete, composite-component

## 背景/问题

我正在尝试创建一个可重用的 JSF 复合组件，该组件可以通过将组件打包到 jar 中来在许多应用程序之间共享（类似于[Deploy JSF 复合组件以供共享使用](https://stackoverflow.com/questions/8021627/deploy-jsf-composite-components-for-shared-use)和[JSF 2.0 复合组件到 jar 中](https://stackoverflow.com/questions/7284529/jsf-2-0-composite-component-into-jar)）。

当尝试在 Eclipse 中的 Web 项目的 facelets 页面中引用这些组件时，它不会自动完成（内容辅助）我的复合组件的标签或属性。

*在NetBeans*中使用相同的复合组件 jar可以工作（自动完成工作！）。

**快速总结**

*   Eclipse（实际上是 Rational Software Architect 8.0.4.1 - 基于 Eclipse Helios）

*   启用了动态 Web 模块和 JSF 构面的 Web 项目

*   构建路径上的复合组件 jar

*   在 facelets 页面中声明的复合组件命名空间（有趣的是它会自动完成我组件的命名空间字符串）

*   只有标准的 JSF 标签自动完成（h:、f:、ui: 等），以及 Primefaces (p:)

*   我的复合组件没有自动完成功能:(

*   如果我将组件移动到 Web 项目并从那里使用它，自动完成*确实有效*（但它不再可在其他项目中重用！）

## 细节

**复合组件jar结构**

我的复合组件jar在编译时有如下结构（我实际使用的是Maven，所以源码结构有点不同）。

```
composite-component.jar
|- META-INF/
|   |- beans.xml          (empty - just the beans tag)
|   |- faces-config.xml   (empty - just the faces-config tag/attributes)
|   \- resources
|       \- example
|           \- country.xhtml
\- com
     \- example
           |- Country.java
           |- CountryController.java  (the CDI managed bean) 
```

**复合组件定义**

country.xhtml 有以下内容

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:cc="http://java.sun.com/jsf/composite"
    xmlns:c="http://java.sun.com/jsp/jstl/core">

<!-- INTERFACE -->
<cc:interface>
    <cc:attribute name="value"
        shortDescription="A value expression for the selected value."
        required="true" />
</cc:interface>

<!-- IMPLEMENTATION -->
<cc:implementation>

    <p:autoComplete value="#{cc.attrs.value}"
        completeMethod="#{countryController.complete}" var="country"
        itemLabel="#{country.name}" itemValue="#{country.code}" dropdown="true"
        forceSelection="true">
    </p:autoComplete>

</cc:implementation>
</html> 
```

**托管豆**

我的 CDI 托管 bean 有以下内容

```
package example;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

import javax.enterprise.context.ApplicationScoped;
import javax.inject.Named;

@ApplicationScoped
@Named
public class CountryController {

    private static final List<Country> COUNTRIES = Arrays.asList(
        new Country("AUS", "Australia"), 
        new Country("FRA", "France"), 
        new Country("USA", "United States of America"));

    public List<Country> complete(String query) {
        List<Country> suggestions = new ArrayList<Country>();
        for (Country c : COUNTRIES) {
            if (c.getName().toLowerCase().contains(query.toLowerCase())) {
                suggestions.add(c);
            }
        }
        return suggestions;
    }
} 
```

**使用复合组件**

如果我在 NetBeans 中创建一个 JSF 项目并将我的复合组件（和 Primefaces）添加到构建路径，将正确的命名空间添加到我的 facelets 页面 ( `xmlns:x="http://java.sun.com/jsf/composite/example"`) 它就可以工作。

我的组件自动完成，它的属性，它甚至使用我的组件定义中的文档。

如果我将相同的复合组件 jar 添加到我的 Eclipse Web 项目的构建路径（启用 JSF 方面），我什么也得不到。它会自动完成标准 JSF 标记和 Primefaces，但不适用于我的组件。

我注意到 Primefaces 使用 taglib 文件——这是我的场景所需要的吗？我不想必须复制信息才能让自动完成功能正常工作。

**编辑：**

正如 tasel 所建议的，最好的解决方案（到目前为止）是安装[JBoss Tools](http://www.jboss.org/tools/download/stable)（特别是 RichFaces 插件）。这为打包在 jar 文件中的复合组件启用了自动完成功能（包括为您插入所有必需的属性，以及使用悬停文档自动完成所有其他属性）。

如果您使用 CDI，我还建议您安装 JBoss Tools CDI 插件，因为这可以让您自动完成 CDI 托管 bean 及其属性/方法。

Eclipse 更新站点 URL 是：

*赫利俄斯：*

```
http://download.jboss.org/jbosstools/updates/stable/helios/ 
```

*靛青：*

```
http://download.jboss.org/jbosstools/updates/stable/indigo/ 
```

[我确实在从更新站点 URL 安装时遇到了问题，最终从更新页面](http://www.jboss.org/tools/download/stable/3_2_Final)下载了 p2 存储库并将其安装在本地，但除此之外，我很高兴在 Eclipse 中使用自动完成功能！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T10:14:42.003

不幸的是，Eclipse 中对 JSF 的支持不如 NetBeans 中那么舒服。我更喜欢使用来自 jBoss 的 RichFaces Tools 插件（它可以在没有 RichFaces 和任何容器的情况下完美运行）。你可以试一试。

尽管我还没有尝试过，但当前的 Eclipse 版本“Juno”可以更好地支持 JSF。

# c - 无法在图中使用指针

> ID：11557206
> 
> 赞同：0
> 
> 时间：2012-07-19T08:54:10.873
> 
> 标签：c

我是图表新手，我正在尝试在图表中编写非常简单的程序。我编写了两个函数，其中一个创建了一个空图，其顶点数与用户输入的一样多。另一个，在两个顶点之间添加有向边。

* * *

前者成功执行，但后者没有。程序停止运行，但代码编译成功。

* * *

```
#include <stdio.h>
#include <stdlib.h>
#define MAX 1000

struct node
{
    int data;
    struct node *next;
};

struct node *arr[MAX];

void createEmptyGraph(int n)
{
    // n is the number of vertices
    int i;

    for(i=0;i<n;i++)
    {
       arr[i]=NULL;
    }

    printf("\nAn empty graph with %d vertices has been created",n);
    printf("\nNo edge is connected yet");
}

void addNode(int startVertex,int endVertex)
{
    // For directed edges
    struct node *n;
    n=(struct node *)malloc(sizeof(struct node));
    n->next=arr[startVertex];
    arr[startVertex]->next=n;

    printf("\nAn edge between directed from %d to %d has been   added",startVertex,endVertex);
}

int main(void)
{
    int num;

    printf("Enter the number of vertices in the graph: ");
    scanf("%d",&num);

    createEmptyGraph(num);
    addNode(0,1);

    return 0;
} 
```

* * *

我正在使用图形的邻接表表示。请指出错误。

* * *

还有一件事，在`createEmptyGraph()`方法中，为什么我不能做这样的事情

* * *

```
for(i=0;i<n;i++)
{
    arr[i]->data=d;
    arr[i]->next=NULL;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T08:58:53.880

*您声明一个指针*数组：

```
struct node *arr[MAX]; 
```

在您的`createEmptyGraph()`方法中，您需要首先分配数组中的每个结构 - 相反，您只需将*指针*设置为 null..

```
for(i=0;i<n;i++)
{
    arr[i]=NULL;
} 
```

以下内容不起作用，因为您尚未*分配*每个条目：

```
for(i=0;i<n;i++)
{
    arr[i]->data=d;
    arr[i]->next=NULL;
} 
```

先分配（`malloc()`）然后你可以像上面那样设置...

因此，由于您尚未分配，因此以下内容将不起作用：

```
n->next=arr[startVertex]; // this is okay, you've set it to NULL
arr[startVertex]->next=n; // ERROR: you are accessing a NULL pointer! 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T08:59:37.497

你不可以做这个

```
 for(i=0;i<n;i++) 
 {     
      arr[i]->data=d;     
      arr[i]->next=NULL; 
 } 
```

因为您的数组尚未初始化。此数组中的指针未初始化，取消引用它们不是一个好主意。要么将数组更改为结构数组而不是结构指针，要么将内存分配给数组中的指针。取消引用未初始化或 NULL 指针是自找麻烦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T09:00:18.440

```
CreateEmptyGraph()
for(i=0;i<n;i++)
{
    arr[i]->data=d;    // arr[i] is a pointer that must be initialized first.
    arr[i]->next=NULL; // arr[i] is a pointer that must be initialized first.
} 
```

由于数组*arr*是一个指针数组，因此您不能在不初始化*arr的情况下调用**CreateEmptyGraph* ，否则您可能会遇到访问冲突。

 ** * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T09:01:44.223

您的代码中发生了几件奇怪的事情。

*   你只有一个`struct node`，没有`struct edge`。由于`node`只有一个`next`指针，因此在此模型中每个节点只能有零个或一个出边。
*   `addNode`看起来它应该添加边缘，但名称另有说明。
*   `arr`代表你的图的节点，如果真的`addNode`应该添加一条边，那么它为什么要分配一个新节点？当它应该添加一个节点时，为什么不将它添加到数组中？

至于您的代码失败的原因：

> ```
> arr[startVertex]->next=n; 
> ```

这将失败，因为 的所有条目`arr`都已初始化`NULL`并且从未更改过。您不能用于`->`访问不存在对象的成员。*

# c++ - 在 Qt 中插入数据库

> ID：11557208
> 
> 赞同：1
> 
> 时间：2012-07-19T08:54:21.997
> 
> 标签：c++, qt, oracle11g

我正在尝试将数据插入数据库中的表中，但插入失败。这是我得到的错误：

> [Oracle] [ODBC] [Ora]ORA-01008：并非所有变量都绑定。

这是我的代码：

```
#include <QtCore/QCoreApplication>

#include <QtSql>
#include<QtDebug>

int main(int argc, char *argv[])
{
QCoreApplication a(argc, argv);

QSqlDatabase db= QSqlDatabase::addDatabase("QODBC");
db.setHostName("FCOESL200656336.qu.edu.qa");
db.setDatabaseName("EPQAS");
db.setUserName("SOUAD/testuser");
db.open();

if(db.open())
{
    qDebug() << "Opened!";

     QString sQuery =" insert into writers(W_Id,W_Name,Age,Gender,Nationality,Hand_Used)"
             "Values(:W_Id,:W_Name,:Age,:Gender,:Nationality,:Hand_Used)";

            QSqlQuery qry;

            qry.prepare(sQuery);

             qry.bindValue(":W_Id",3);
             qry.bindValue(":W_Name","fhsf");
             qry.bindValue(":Age",32);
             qry.bindValue(":Gender",'F');
             qry.bindValue(":Nationality","klfds");
             qry.bindValue(":Hand_Used",'R');

      if( !qry.exec(sQuery) )
          qDebug() << qry.lastError().text();
      else
        qDebug( "Inserted!" );
   }
else
{
    qDebug() <<"Connection failed" << db.lastError().text();
}

 db.close();
 return a.exec();

   } 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T09:13:46.023

您的 if 语句失败。

```
if( !qry.exec(sQuery) ) 
```

这样做，QSqlQuery 正在尝试执行 sQuery，但在 sQuery 中您没有绑定任何值。你应该做：

```
if( !qry.exec() ) 
```

因为此函数将执行您之前准备的查询，并带有绑定的值。整体应该是这样的：

```
if(db.open())
{
    qDebug() << "Opened!";

     QSqlQuery qry;

     qry.prepare("INSERT INTO writers(W_Id,W_Name,Age,Gender,Nationality,Hand_Used)"
                 "VALUES(:W_Id,:W_Name,:Age,:Gender,:Nationality,:Hand_Used)");

     qry.bindValue(":W_Id",3);
     qry.bindValue(":W_Name","fhsf");
     qry.bindValue(":Age",32);
     qry.bindValue(":Gender",'F');
     qry.bindValue(":Nationality","klfds");
     qry.bindValue(":Hand_Used",'R');

     if( !qry.exec() )
         qDebug() << qry.lastError().text();
     else
         qDebug( "Inserted!" );
} 
```

# ios - Capture/render Scrollview's offscreen content

> ID：11557212
> 
> 赞同：0
> 
> 时间：2012-07-19T08:54:28.970
> 
> 标签：ios, ipad, uiscrollview, render, cgcontext

i want to render the offscreen content of my scrollview to an image as well.

But the following code only renders the content on screen, even though it's supposed to render the whole scrollView content.

Can anyone provide help?

Thanks in advance!

```
UIImage *image = nil;

 UIGraphicsBeginImageContextWithOptions(scrollView.contentSize, false, 0.0);
 {
        CGPoint savedContentOffset = scrollView.contentOffset;
        CGRect savedFrame = scrollView.frame;

        scrollView.contentOffset = CGPointMake(0.0, 0.0);
        scrollView.frame = CGRectMake(0, 0.0, scrollView.contentSize.width, scrollView.contentSize.height);

        NSLog(@"%.2f",scrollView.contentSize.height);

        [scrollView.layer renderInContext:UIGraphicsGetCurrentContext()];
        image = UIGraphicsGetImageFromCurrentImageContext();

        scrollView.contentOffset = savedContentOffset;
        scrollView.frame = savedFrame;

}
UIGraphicsEndImageContext(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T19:38:48.293

Turns out that my autosizing wasn't set properly so that the lower parts of the scroll view didn't move …</p>

Following code works well:

code:

```
- (UIImage *)createPicture
{
[self setMasks:true];
UIImage *image = nil;

UIGraphicsBeginImageContextWithOptions(scrollView.contentSize, false, 0.0);
{
    CGPoint savedContentOffset = scrollView.contentOffset;
    CGRect savedFrame = scrollView.frame;

    scrollView.contentOffset = CGPointMake(0.0, 0.0);
    scrollView.frame = CGRectMake(0, 0.0, scrollView.contentSize.width, scrollView.contentSize.height);

    NSLog(@"%.2f",scrollView.contentSize.height);

    [scrollView.layer renderInContext:UIGraphicsGetCurrentContext()];
    image = UIGraphicsGetImageFromCurrentImageContext();

    scrollView.contentOffset = savedContentOffset;
    scrollView.frame = savedFrame;

}
UIGraphicsEndImageContext();

[self setMasks:false];

return image;
}

- (void)setMasks:(bool)photo
{
if (photo) {
    for (label in labels)
    {
        label.autoresizingMask = (UIViewAutoresizingFlexibleRightMargin | UIViewAutoresizingFlexibleBottomMargin);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T12:20:37.033

Well, you could try a different approach.

*   create the context as you do now (real tall) and have the currentOffset

*   align your scrollView at the top of the context, and render one screen full.

*   change the contentOffset.y to be the height of the scrollView

*   render the next screenful in the context offset by the scrollView height

So you are essentially rendering a page at a time.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-02T08:02:05.253

*   (IBAction)screenShot:(id)sender {

    scrollView.frame = CGRectMake(0, 0, 320, 700);

    UIGraphicsBeginImageContext(scrollView.frame.size);

    CGContextRef c = UIGraphicsGetCurrentContext(); CGContextTranslateCTM(c, 0, 60); [self.view.layer renderInContext:c]; UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();

    UIGraphicsEndImageContext();

    //Save in your photos album or Share the image through following code

    NSArray * itemsToShare = @[viewImage];

    UIActivityViewController *activity = [[UIActivityViewController alloc] initWithActivityItems:itemsToShare applicationActivities:nil];

    activity.excludedActivityTypes = @[];

    [self presentViewController:activity animated:YES completion:nil]; }

# version-control - 从 Clearcase 迁移到 Team Foundation Server

> ID：11557216
> 
> 赞同：2
> 
> 时间：2012-07-19T08:54:39.883
> 
> 标签：version-control, tfs, clearcase

我们正在考虑从 ClearCase 迁移到 Team Foundation Server。该项目在 Unix 平台上并且相当大 - 大约 1000 万行 C++ 代码。

我很好奇是否有人做过类似的迁移。

• ClearCase 到 Team Foundation Server 迁移的工具是否可用？

• Team Foundation Server 可以部署在 Unix 平台上吗？

• 这种迁移的先决条件是什么？

• Team Foundation Server 是否能够处理如此大的项目？

•迁移所有历史版本/分支是否有意义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T09:37:09.383

我认为没有任何官方工具（如“[关于 IBM Rational ClearCase 和 Microsoft Team Foundation Server](http://www-01.ibm.com/support/docview.wss?uid=swg21228699) ”中所述。

[TFS 系统要求](http://msdn.microsoft.com/en-us/library/ms253078%28v=vs.90%29.aspx)很明确：没有 Linux。
即使您可以在 Unix、Linux、Mac 上从“ [Team Explorer Everywhere ”中探索这些数据。](http://ericdboyd.com/2011/04/03/microsoft-embraces-os-x-linux-and-unix-developers/)

* * *

[Spence](https://stackoverflow.com/users/53771/spence) [评论](https://stackoverflow.com/questions/11557216/migration-from-clearcase-to-team-foundation-server/11557953#comment28327814_11557953)说 TFS 现在（2013 年初）支持 git（如我[在此处说明的](https://stackoverflow.com/a/15129629/6309)那样），这意味着您可以在 Windows 上拥有 TFS 服务器，在 Linux 上拥有 git repos。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T07:24:15.073

“迁移所有历史版本/分支是否有意义？” 一般没有。考虑到没有官方的迁移工具并且您的项目很大，这太麻烦了。您可以将几个主要的历史版本和最新版本迁移到 TFS。同时，让当前的 Clearcase 服务器再运行几个月，以防您的开发人员需要检查历史记录。

“Team Foundation Server 能处理这么大的项目吗？” 我个人认为 tfs 很强大。

# parsing - 如何提取匹配行之前存在 2 行的行？

> ID：11557224
> 
> 赞同：2
> 
> 时间：2012-07-19T08:55:06.740
> 
> 标签：parsing, text, sed, awk, grep

我有一个大的 unix 文本文件，我想获取匹配行上方存在 3 行的行。

我怎样才能做到这一点？

注意我不想在两者之间找到界限。因此，如果文本是

```
one
two
three
four 
```

我正在寻找字符串“三”，我想作为输出

```
one 
```

并不是

```
one
two
three 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T09:35:58.133

使用 awk
[http://www.gnu.org/software/gawk/manual/html_node/Array-Basics.html#Array-Basics](http://www.gnu.org/software/gawk/manual/html_node/Array-Basics.html#Array-Basics)

```
awk -v n=3 '{s[NR%n]=$0} /three/{print s[(NR-n+1)%n]}' foo.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T09:00:35.010

使用带有以下选项的 grep

```
 -A NUM, --after-context=NUM
          Print NUM lines of trailing context after matching lines.  Places a line containing -- between contiguous groups of matches.

   -B NUM, --before-context=NUM
          Print NUM lines of leading context before matching lines.  Places a line containing -- between contiguous groups of matches. 
```

因此，根据您的要求，使用以下命令：

```
grep -B 3 three <filename> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T09:04:35.613

这里有一个：首先 grep 你正在寻找的单词与上下文两行后面：

```
$ grep -B 2 
```

这使：

```
one
two
three
--
one
two
three
--
one
two
three
(...) 
```

然后使用 sed 每隔四行打印一次：

```
$ grep -B 2 three test.txt |sed -n '1~4'p 
```

（从这里获得 sed 部分：[http ://www.thegeekstuff.com/2009/09/unix-sed-tutorial-printing-file-lines-using-address-and-patterns/](http://www.thegeekstuff.com/2009/09/unix-sed-tutorial-printing-file-lines-using-address-and-patterns/)

# iphone - SBJSON 解析器不会更新它的内容

> ID：11557230
> 
> 赞同：1
> 
> 时间：2012-07-19T08:55:26.850
> 
> 标签：iphone, sbjson

我想我对标题不够清楚，所以在这里：

我正在构建一个具有 facebook 登录的应用程序，但我使用 Facebook API 中的 SBJSON 解析器来解析其他文档。现在我遇到的问题对我来说很奇怪。解析器没有得到我在它读取的 JSON 中所做的更新。

我使用这个内容：

```
{
    "categories": [
        {
            "id": 5,
            "catunique": "f874f7d2b48b099400e9f22ea512c234c4f89d81",
            "cattitle": "Nature",
            "catfold": "nature"
        },
        {
            "id": 3,
            "catunique": "edfbb81a83e37b045bfddec1c4fbbbef52b408e7",
            "cattitle": "Bikes",
            "catfold": "bikes"
        }
    ],
    "images": [
        {
            "id": 31,
            "catunique": 5,
            "imgtag": "Pig",
            "imgname": "pig759.png",
            "imgbname": "pig759@2x.png"
        },
        {
            "id": 32,
            "catunique": 5,
            "imgtag": "Frog Shadow",
            "imgname": "frogshadow503.jpg",
            "imgbname": "frogshadow503@2x.jpg"
        },
        {
            "id": 33,
            "catunique": 3,
            "imgtag": "Cat",
            "imgname": "cat518.jpg",
            "imgbname": "cat518@2x.jpg"
        }
    ]
} 
```

这可以解析，但是如果我在“图像”对象中添加另一个项目，我会重新运行应用程序并且响应没有得到它。

在我的 App Delegate 中，我有使用解析器的代码

```
SBJSON *json = [[SBJSON alloc] init];

NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:@"http://somedomain.com/images.json"]];
//[request setCachePolicy:NSURLRequestReloadIgnoringLocalCacheData];
//[[NSHTTPCookieStorage sharedHTTPCookieStorage] setCookieAcceptPolicy:NSHTTPCookieAcceptPolicyNever];

NSData *response = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];
//set data to string with encoding
NSString *json_string = [[NSString alloc] initWithData:response encoding:NSUTF8StringEncoding];
imagesJsonData = [json objectWithString:json_string error:nil]; 
```

谁能告诉我这是服务器问题、解析器问题还是我的编码问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T22:05:22.127

首先：您使用的是*非常古老*的 SBJson 版本。我建议您使用更新的版本。第二：您确定您的服务器实际上正在发送新的数据文件吗？尝试在 Safari / Firefox / Chrome 中查看它。如果有额外的数据，请检查 NSURLConnection 是否以某种方式缓存了您的请求。`?r=1234123`（也许在 URI 上附加一个随机数？）

# android - 缩小/放大时隐藏或显示叠加层

> ID：11557231
> 
> 赞同：1
> 
> 时间：2012-07-19T08:55:30.383
> 
> 标签：android, google-maps, overlay, zooming

缩放级别的地图视图是否有可能显示叠加层。例如，当缩放级别为 16 时显示选定的叠加层等等？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T11:24:00.053

是的。查看[地图上的 zoom_changed 事件](https://developers.google.com/maps/documentation/javascript/reference#Map)。添加一个事件侦听器，当它触发时检查缩放级别并对其进行操作。

[此地图](http://www.geocodezip.com/ParkerPalmSprings.html)隐藏了缩放级别 18 以下的标签。

# android - 触摸屏幕时尝试启动新活动

> ID：11557232
> 
> 赞同：1
> 
> 时间：2012-07-19T08:55:35.017
> 
> 标签：android, android-activity, bitmap, surfaceview, ontouchlistener

我正在尝试在触摸屏幕时开始一个新活动。背景是一个调整大小的位图。但未检测到触摸。这是我的代码：

公共类 DispCover 扩展 Activity 实现 OnTouchListener{

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);

    bg = new DispCoverG(this);
    setContentView(bg);
   } 

@Override
protected void onDestroy() {
    // TODO Auto-generated method stub
    super.onDestroy();

}
@Override
protected void onPause() {
    // TODO Auto-generated method stub
    super.onPause();
    bg.pause();
}
@Override
protected void onResume() {
    // TODO Auto-generated method stub
    super.onResume();
    bg.resume();
}

float dtp(float dp,Context context){
    Resources resources = context.getResources();
    DisplayMetrics metrics = resources.getDisplayMetrics();
    float px = dp * (metrics.densityDpi/160f);
    return px;
}

@Override
public boolean onTouch(View v, MotionEvent e) {
    int action = e.getAction();
    int xd = (int) e.getX();
    int yd = (int) e.getY();

    int x = (int) dtp(xd,this);
    int y = (int) dtp(yd,this);

    switch(action){
    case MotionEvent.ACTION_DOWN:
    startActivity(new Intent(//));
    break;
    }
    return true;
}

public class DispCoverG extends SurfaceView implements Runnable{

    public DispCoverG(Context context) {
        //code
    }

    public Bitmap getResizedBitmap(Bitmap bm, int newHeight, int newWidth)
    {
        //code
    }

    public void pause(){
        //code
    }

    public void resume(){
        //code
    }

    @Override
    public void run() {
        //code

        }
    }
} 
```

};

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T09:06:47.700

在下面写下代码`setContentView(bg);`

```
bg.setOnTouchListener(this); 
```

或者

```
bg.setOnTouchListener(new OnTouchListener() {
    public boolean onTouch(View v, MotionEvent event) {
        // TODO Auto-generated method stub
        int action = event.getAction();
        switch(action){
            case MotionEvent.ACTION_DOWN:
            startActivity(new Intent(YourActivity.this,NewActivity.class));
            break;
        }
        return true;
    }
}); 
```

`OnTouchListener`在 Activity 中实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T09:30:37.833

另一种方法是直接在您的视图中捕获 MotionEvents：

```
public class DispCoverG extends SurfaceView implements Runnable{
....
    @Override
    public boolean onTouchEvent(MotionEvent event){
       // to dispatch click / long click event,
       // you must pass the event to it's default callback View.onTouchEvent
       boolean defaultResult = super.onTouchEvent(event);

       ...
       switch (event.getAction()){
          case MotionEvent.ACTION_DOWN: 
               Intent intent = new Intent(DispCover.this, XActivity.class);
               startActivity(intent);
               break;
             }
       return defaultResult;
       //return true; //this should work if you need just ACTION_DOWN
    }
} 
```

# php - 带有子文件夹的 Joomla 2.5 画廊

> ID：11557234
> 
> 赞同：1
> 
> 时间：2012-07-19T08:55:38.720
> 
> 标签：php, joomla, gallery

文件夹结构：

```
|_image
|__image2
|__image3 
```

例如 sigplus(joomla module) 用法：

```
{gallery}image2{/gallery} 
```

显示 image2 文件夹中的所有图像。

但`{gallery}image{/gallery}` 不要显示任何内容（

# javascript - 在 JQM data-role='page' onload 上加载 javascripts

> ID：11557236
> 
> 赞同：0
> 
> 时间：2012-07-19T08:55:47.987
> 
> 标签：javascript, jquery, jquery-mobile

有什么方法可以在 JQM 'pages' 负载上运行 javascripts 吗？我有一个应该出现在我的 JQM 页面的单个页面中的图表，但是如果我将它加载到 document.ready 上，它只会显示我是否刷新了那个特定的 JQM“页面”。如果我在任何其他“页面”上刷新，我的图表将不会加载。是否有某种`onload("#myDiv")`功能可以解决此问题？我所做的唯一其他解决方案是制作一个用户可以单击以加载图形的按钮，但似乎没有必要，应该能够自动加载它。

```
$(document).ready(function()
{
    $('#wordcloud').bind('pageinit', function() {
    alert("works!");
    });
}) 
```

上面的代码是不是有点接近？我没有收到警报。

还在 div 的头部（内部和外部）中尝试了此代码`document(ready)`

```
$('#wordcloud').live('pagebeforeshow', function() {
    alert(2);
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T09:13:54.320

[正如文档](http://jquerymobile.com/test/docs/api/events.html)中所指出的，如果你想在 jQueryMobile 页面加载上做一些事情，你必须使用`$(document).bind('pageinit')`.

> 页面初始化
> 
> 在初始化发生后，在正在初始化的页面上触发。我们建议绑定到此事件而不是 DOM ready()，因为无论是直接加载页面还是将内容作为 Ajax 导航系统的一部分拉入另一个页面，这都会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T09:43:44.840

如果您想在每次用户导航到`graphpage`; 您应该在`pagebeforeshow`处理程序中为`graphpage`.

请参阅[JQM 事件](http://jquerymobile.com/test/docs/api/events.html)文档`Page change events`中的部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-13T12:58:36.313

使用它，每次在 Jquery mobile 中加载#page 时触发一个事件

```
$(document).on("pagebeforeshow","#dashboard",function(){

   alert("pagebeforeshow event fired - pagetwo is about to be shown");
}); 
```

# c - 如何使用“extern struct”在c编程中共享变量并用gcc编译？

> ID：11557237
> 
> 赞同：4
> 
> 时间：2012-07-19T08:55:48.893
> 
> 标签：c

*我希望在源文件main.c*和*second.c*之间访问一些共享变量，我的头文件是*all.h*定义了共享数据类型，

```
#ifndef ALL_H
#define ALL_H
struct foo {
    double v;
    int i;
};

struct bar {
    double x;
    double y;
};
#endif 
```

*main.c*在下面给出

```
/* TEST*/
#include "all.h"
#include "second.h"

int main(int argc, char* argv[])
{
    struct foo fo; // should be accessed in second.c
    fo.v= 1.1;
    fo.i = 12;

    struct bar ba; // should be accessed in second.c
    ba.x= 2.1;
    ba.y= 2.2;

    sec(); // function defined in second.c

    return 0;
} 
```

*second.h*在下面给出

```
#include <stdio.h>
#include "all.h"

int sec(); 
```

*second.c*在下面给出

```
#include "second.h"

extern struct foo fo;
extern struct bar ba;

int sec()
{
    printf("OK is %f\n", fo.v+ba.x);

    return 0;
} 
```

我以为我拥有所有声明并包含标题。但是当我编译

```
 gcc -o main main.c second.c 

or 

    gcc -c second.c
    gcc -c main.c
    gcc -o main main.o second.o 
```

它会给出一些错误，例如

```
second.o: In function `sec':
second.c:(.text+0x8): undefined reference to `fo'
second.c:(.text+0xe): undefined reference to `ba'
collect2: ld returned 1 exit status 
```

我认为某处的使用`extern`是错误的还是我使用`gcc`不正确？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T08:58:52.103

问题在于范围。您的变量 ( `fo`& `ba`) 具有局部范围，因为它们在 . 内声明。因此`main`，它们的可见性仅限于`main`函数内。请使它们成为全局变量，它应该可以工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-19T08:59:17.187

错误消息表明链接器无法找到`fo`和`ba`. 通过`extern`声明，您已经告诉编译器变量将存在于其他翻译单元中，但它们不存在。

您需要将`struct foo fo;`and移到函数`struct bar ba;`之外。`main()`现在，它们是函数局部变量。它们需要是全局变量才能工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-07T07:09:51.780

主.h：

```
typedef struct
{
    double v;
    int i;
} Foo; 
```

外部.h：

```
extern Foo fo; // "fo is a global variable stored somewhere else" 
```

主.c：

```
#include "main.h"
#include "extern.h"
//use fo.v here 
```

第二个.c：

```
#include "second.h"
#include "main.h"
#include "extern.h"
Foo fo; // "store the data of fo here"
//use fo.v here 
```

只需在您要使用的所有 .c 文件中包含`#include "main.h"`和。请注意，这仅在 second.c 中，没有其他地方。`#include "extern.h"``fo``Foo fo`

# objective-c - 将 int 传递给函数，返回 NSString

> ID：11557238
> 
> 赞同：0
> 
> 时间：2012-07-19T08:55:50.403
> 
> 标签：objective-c, objective-c-blocks

我对 Objective-c 很陌生，并试图更好地理解块。作为我自己的一项任务，我正在尝试以各种方法编写 fizz-buzz。

我目前正在使用块，但我遇到了一个我还没有解决的语法问题。

在下面的非工作函数中，我想传入一个 int 并返回一个 NSString 类型。

```
NSString (^whichMessage)(int) = ^(int num) {
    return @"Test";
}; 
```

但是我收到一条错误消息：

```
Incompatible block pointer types initializing 'NSString (^_strong)(int)' with an expression of type 'NSString *(^)(int)' 
```

谁能解释我的示例代码有什么问题，以及正确的形式是什么？

我在这里关注文档：http: [//developer.apple.com/library/ios/#documentation/cocoa/Conceptual/Blocks/Articles/bxGettingStarted.html#//apple_ref/doc/uid/TP40007502-CH7-SW1](http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/Blocks/Articles/bxGettingStarted.html#//apple_ref/doc/uid/TP40007502-CH7-SW1)

（为了清楚起见，这里是链接页面上的示例代码）

```
int multiplier = 7;
int (^myBlock)(int) = ^(int num) {
    return num * multiplier;
}; 
```

通过页面顶部的图形，我认为通过将块类型更改为 NSString 并将返回类型也更改为 NSString，它会起作用。但很可惜，事实并非如此。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-19T09:00:02.800

非常简单。您的块返回一个指向字符串的指针，而不是实际的字符串。我们总是使用指向对象的指针而不是实际的对象本身

```
 |
         v
NSString *(^whichMessage)(int) = ^(int num) {
    return @"Test";
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-19T09:00:33.620

你忘记了*：

```
NSString* (^whichMessage)(int) = ^(int num) {
    return @"Test";
}; 
```

Objective-C 只使用指针引用的基于堆的对象。您不能像在 C++ 中那样声明基于堆栈的 Objective-C 对象。

该规则的显着例外是块，它充当 Objective-C 对象并且可以基于堆栈。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T09:00:15.913

你忘了一颗星`*`：

```
NSString* (^whichMessage)(int) = ^(int num) {
    return @"Test";
}; 
```

# python - Python：对依赖项列表进行排序

> ID：11557241
> 
> 赞同：15
> 
> 时间：2012-07-19T08:56:01.497
> 
> 标签：python, sorting, topological-sort

我正在尝试确定我的问题是否可以使用内置的 sorted() 函数解决，或者我是否需要自己解决 - 使用 cmp 的老学校会相对容易。

我的数据集如下所示：

```
x = [
('企业', Set('车队', '地址'))
('device', Set('business','model','status','pack'))
('txn', Set('device','business','operator'))
……

```

排序规则应该基本上适用于 N & Y 的所有值，其中 Y > N，x[N][0] 不在 x[Y][1] 中

尽管我使用的是仍然可以使用 cmp 参数的 Python 2.6，但我正在尝试使这个 Python 3 安全。

那么，这可以使用一些 lambda 魔术和 key 参数来完成吗？

**-== 更新 ==-**

谢谢伊莱和温斯顿！我真的不认为使用 key 会起作用，或者如果可以的话，我怀疑这将是一个不理想的鞋拔解决方案。

因为我的问题是数据库表依赖项，所以我不得不对 Eli 的代码做一个小的补充，以从其依赖项列表中删除一个项目（在一个设计良好的数据库中，这不会发生，但谁生活在那个神奇的完美世界里？）

我的解决方案：

```
def topological_sort(source):
    """perform topo sort on elements.

    :arg source: list of ``(name, set(names of dependancies))`` pairs
    :returns: list of names, with dependancies listed first
    """
    pending = [(name, set(deps)) for name, deps in source]        
    emitted = []
    while pending:
        next_pending = []
        next_emitted = []
        for entry in pending:
            name, deps = entry
            deps.difference_update(set((name,)), emitted) # <-- pop self from dep, req Py2.6
            if deps:
                next_pending.append(entry)
            else:
                yield name
                emitted.append(name) # <-- not required, but preserves original order
                next_emitted.append(name)
        if not next_emitted:
            raise ValueError("cyclic dependancy detected: %s %r" % (name, (next_pending,)))
        pending = next_pending
        emitted = next_emitted 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-19T15:37:30.957

您想要的称为[拓扑排序](http://en.wikipedia.org/wiki/Topological_sorting)。虽然可以使用 builtin 来实现`sort()`，但比较笨拙，最好直接在 python 中实现拓扑排序。

为什么会很尴尬？如果您在 wiki 页面上研究这两种算法，它们都依赖于一组正在运行的“标记节点”，这是一个很难扭曲成表格的概念，`sort()`可以使用，因为`key=xxx`（甚至`cmp=xxx`）最适用于无状态比较函数，特别是因为timsort 不保证检查元素的顺序。我（非常）确定任何使用的解决方案*最终*都会`sort()`为每次调用 key/cmp 函数冗余计算一些信息，以便绕过无国籍问题。

以下是我一直在使用的 alg（对一些 javascript 库依赖项进行排序）：

**编辑：根据 Winston Ewert 的解决方案对其进行了极大的修改**

```
def topological_sort(source):
    """perform topo sort on elements.

    :arg source: list of ``(name, [list of dependancies])`` pairs
    :returns: list of names, with dependancies listed first
    """
    pending = [(name, set(deps)) for name, deps in source] # copy deps so we can modify set in-place       
    emitted = []        
    while pending:
        next_pending = []
        next_emitted = []
        for entry in pending:
            name, deps = entry
            deps.difference_update(emitted) # remove deps we emitted last pass
            if deps: # still has deps? recheck during next pass
                next_pending.append(entry) 
            else: # no more deps? time to emit
                yield name 
                emitted.append(name) # <-- not required, but helps preserve original ordering
                next_emitted.append(name) # remember what we emitted for difference_update() in next pass
        if not next_emitted: # all entries have unmet deps, one of two things is wrong...
            raise ValueError("cyclic or missing dependancy detected: %r" % (next_pending,))
        pending = next_pending
        emitted = next_emitted 
```

* * *

旁注：*可以*将一个`cmp()`函数插入到`key=xxx`中，如此 python 错误跟踪器[消息](http://bugs.python.org/issue1771#msg59937)中所述。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-19T16:00:27.203

我做了这样的拓扑排序：

```
def topological_sort(items):
    provided = set()
    while items:
         remaining_items = []
         emitted = False

         for item, dependencies in items:
             if dependencies.issubset(provided):
                   yield item
                   provided.add(item)
                   emitted = True
             else:
                   remaining_items.append( (item, dependencies) )

         if not emitted:
             raise TopologicalSortFailure()

         items = remaining_items 
```

我觉得它比 Eli 的版本简单一点，我不知道效率。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-19T09:08:38.753

看着糟糕的格式和这种奇怪的`Set`类型......（我将它们保存为元组并正确分隔列表项......）......并使用`networkx`库使事情变得方便......

```
x = [
    ('business', ('fleet','address')),
    ('device', ('business','model','status','pack')),
    ('txn', ('device','business','operator'))
]

import networkx as nx

g = nx.DiGraph()
for key, vals in x:
    for val in vals:
        g.add_edge(key, val)

print nx.topological_sort(g) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-26T15:56:26.213

这是 Winston 的建议，带有一个文档字符串和一个微小的调整，`dependencies.issubset(provided)`与`provided.issuperset(dependencies)`. 该更改允许您将`dependencies`每个输入对中`set`的

我的用例涉及`dict`其键是项目字符串，每个键的值是`list`该键所依赖的项目名称中的一个。一旦我确定`dict`是非空的，我可以将其传递`iteritems()`给修改后的算法。

再次感谢温斯顿。

```
def topological_sort(items):
    """
    'items' is an iterable of (item, dependencies) pairs, where 'dependencies'
    is an iterable of the same type as 'items'.

    If 'items' is a generator rather than a data structure, it should not be
    empty. Passing an empty generator for 'items' (zero yields before return)
    will cause topological_sort() to raise TopologicalSortFailure.

    An empty iterable (e.g. list, tuple, set, ...) produces no items but
    raises no exception.
    """
    provided = set()
    while items:
         remaining_items = []
         emitted = False

         for item, dependencies in items:
             if provided.issuperset(dependencies):
                   yield item
                   provided.add(item)
                   emitted = True
             else:
                   remaining_items.append( (item, dependencies) )

         if not emitted:
             raise TopologicalSortFailure()

         items = remaining_items 
```

# .net - WatiN.Core.IE.CreateNewIEAndGoToUri 出错

> ID：11557242
> 
> 赞同：1
> 
> 时间：2012-07-19T08:56:02.027
> 
> 标签：.net, com, watin

我正在使用 WatiN 进行 Web 测试。我收到以下错误：

```
Retrieving the COM class factory for component with CLSID {0002DF01-0000-0000-C000-000000000046} failed due to the following error: 800706bf The remote procedure call failed and did not execute. (Exception from HRESULT: 0x800706BF).   
at WatiN.Core.IE.CreateNewIEAndGoToUri(Uri uri, IDialogHandler logonDialogHandler, Boolean createInNewProcess)
at WatiN.Core.IE..ctor(String url) 
```

我的代码是：

```
IE ie = new IE(URL);
Login login = new Login(ie);
login.LoginOneHR(userID, password));
CommonSetup01();
CommonSetup02();

ie.ForceClose();
IE ie_C = new IE(URL); 
```

错误发生在最后一行。

如果您知道为什么或如何解决它，请帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T16:45:08.040

我遇到了同样的问题，2 秒 Thread.sleep 为我解决了这个问题。

# javascript - 支持触控的硬件加速画廊轮播

> ID：11557244
> 
> 赞同：0
> 
> 时间：2012-07-19T08:56:04.993
> 
> 标签：javascript, jquery, cross-browser, iscroll4

寻找具有跨浏览器支持到 IE7 并且可以支持触摸命令的滑动轮播。目前我正在使用几行简单的 jQuery，但这并没有增加触摸支持，也没有尽可能地增加硬件加速。

这引起了我的兴趣[http://cubiq.org/dropbox/iscroll4/examples/carousel/](http://cubiq.org/dropbox/iscroll4/examples/carousel/)

正是我所追求的。虽然触摸效果不需要在桌面浏览器上工作，但 next 和 prev 按钮可以并返回到 IE7。他们目前/可以做些什么来制作它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T18:31:47.943

我已经在多个站点上使用它并取得了巨大的成功。高度可定制并与触摸一起使用。

[弹性滑块](http://www.woothemes.com/flexslider/)

# android - 具有在线同步功能的离线 Android 应用程序

> ID：11557255
> 
> 赞同：8
> 
> 时间：2012-07-19T08:56:39.247
> 
> 标签：android, sqlite, offline

我正在开发一个 Android 应用程序，它将在启动和在线同步时具有离线数据。这意味着：用户单击一个项目，应用程序从离线（SQLite 数据库或文件）读取该项目的数据，并显示该活动与数据（文本、图片、电影等）。同时（如果在线）应用程序在后台进入 web 服务并下载数据，如果数据版本比移动设备上的版本更新，替换后台数据并告诉用户，更新的数据可用（如果用户仍然在同一个项目 - 相同的活动）。如果不是，应用程序会在用户下次单击同一项目时自动读取新数据。

手机上的 SQLite 是最好的方式还是文件？将 .APK 上传到 Google Play 时，我可以将带有离线数据的 SQLite 放入扩展文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T14:32:21.780

答案取决于您的应用程序使用的数据类型。如果您有大量数据文件（图片、电影、mp3），您可能希望将这两个文件都存储在手机上，并将日期和版本以及文件链接信息存储在 SQLite 数据库中，以便您知道何时需要更新.

扩展文件可能不是您想要的。它确实适用于不经常更改的数据的大型数据集，例如游戏中引用的巨大 3d 纹理或大型视频。

# c# - 将值插入sql数据库

> ID：11557260
> 
> 赞同：-2
> 
> 时间：2012-07-19T08:56:48.630
> 
> 标签：c#

我正在尝试执行此语句以将一些值插入数据库。

```
com = new SqlCeCommand("INSERT INTO [cars table]"
      + "([Car reg no],[MOT expiry date], Mileage,[Other information])"
      + "VALUES (" + m._INSERTCarRegNo + "," + m._INSERTExpiryDate + "," 
      + m._INSERTMileage + "," + m._INSERTotherInformation 
      + ")",this.returnConnection); 
```

以上是我的陈述，但我得到一个错误，错误是无法解析字符串。谁能帮我吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T08:59:48.487

您忘记了字符串值周围的引号。

```
com = new SqlCeCommand("INSERT INTO [cars table]"
  + "([Car reg no],[MOT expiry date], Mileage,[Other information])"
  + "VALUES ('" + m._INSERTCarRegNo + "','" + m._INSERTExpiryDate + "','" 
  + m._INSERTMileage + "','" + m._INSERTotherInformation 
  + "')",this.returnConnection); 
```

（数字值不需要单引号）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T09:03:05.857

始终使用`Parameters`以避免此类问题和 SQL 注入。

```
var sql=@"INSERT INTO [cars table] 
         ([Car reg no],[MOT expiry date], Mileage,[Other information])
          VALUES (@Carregno,@MOTexpirydate,@Mileage,@Otherinformation])";

com = new SqlCeCommand(sql,this.returnConnection);
com.Parameters.AddWithValue("@Carregno",m._INSERTCarRegNo);
.. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T09:05:05.330

这将是一个更清洁的解决方案（比构建您自己的 SQL 字符串）...

```
com = 
  new SqlCeCommand(
  "INSERT INTO [cars table] " + 
  "([Car reg no],[MOT expiry date], Mileage,[Other information] " + 
  "VALUES " + 
  "(@reg, @expiry, @mileage, @otherinfo)"
  , this.returnConnection);

com.Parameters.AddWithValue("@reg" , m._INSERTCarRegNo);
com.Parameters.AddWithValue("@expiry" , m._INSERTExpiryDate);
com.Parameters.AddWithValue("@mileage" , m._INSERTMileage);
com.Parameters.AddWithValue("@otherinfo" , m._INSERTotherInformation); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T11:30:20.203

您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以`key,created,activations,used,hotelid)values(b,1-29-13, 3,1,11)`在第 1 行附近使用正确的语法

# google-chrome - 文本字段在表格中时忽略最小宽度......任何解决方法？

> ID：11557261
> 
> 赞同：1
> 
> 时间：2012-07-19T08:56:49.500
> 
> 标签：google-chrome, css, safari, webkit

在 Windows 上的谷歌浏览器中，

```
<input type="text" style="min-width:10px;width:100%;"> 
```

正如你在这里看到的作品：

```
<div style="width:50px;background:red;">
    <input type="text" style="min-width:10px;width:100%;">
</div> 
```

这里不是！

```
<table style="background:red;">
    <tr><td><input type="text" style="min-width:10px;width:100%;"></td></tr>
</table> 
```

我正在寻找一个纯 css 解决方案（size="1" 解决了我的问题，顺便说一句）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T09:29:25.647

Chrome 和 Safari 根本不支持表格元素的 min-width 属性。但是，当应用于表格单元格时，它们会遵守最小宽度。

其他：

1.  Firefox：支持（在 5 中测试，不确定从哪个版本开始）
2.  Internet Explorer：支持（因为 IE8。IE7 及以下似乎不支持它） Chrome：不支持（据我所知的所有版本） Safari：不支持（据我所知的所有版本
3.  Opera：支持（在 11.5 中测试，不确定从哪个版本开始）

检查这个网站：[https ://developer.mozilla.org/en/CSS/min-width](https://developer.mozilla.org/en/CSS/min-width)

也许尝试一些％...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T09:01:27.450

添加

```
cellpadding="0" 

cellspacing="0" 
```

到你的桌子上

```
<table cellpadding="0" cellspacing="0" style="background:red;">
    <tr><td><input type="text" style="min-width:10px;width:100%;"></td></tr>
</table> 
```

# asp.net - 部署问题

> ID：11557264
> 
> 赞同：0
> 
> 时间：2012-07-19T08:57:05.110
> 
> 标签：asp.net, sharepoint, iis-7, sharepoint-2010, iis-7.5

Sharepoint 2010 服务器上的 IIS 7.0 中的部署问题。

我正在尝试在 IIS 7.0 上部署 Asp.net Web 应用程序。

如下 ：

[http://msdn.microsoft.com/en-us/library/dd483479.aspx](http://msdn.microsoft.com/en-us/library/dd483479.aspx) ![在此处输入图像描述](../Images/83f03d71ef313613218a3af0ae1c6b8e.png)

![创建包然后部署时](../Images/9a161921ed280b13d5a989d0d2311226.png) 错误 2：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T19:58:19.943

以前见过这个（让我猜猜 - 这是在 SP2007 上工作的？）。在任何情况下，您都需要删除您的脚本资源处理程序部分，因为它们已经定义（我不记得确切的细节，但这让我在过去有所了解）。我们在 .NET 2.0 中使用 ASP.NET Ajax Extensions，虽然 2007 年一切正常，但我们在 2010 年遇到了这个问题。

这是我们最终使用的配置文件的副本，因此您可以查看已删除的内容：

```
<customErrors mode="Off" defaultRedirect="GenericErrorPage.aspx"></customErrors>

<pages>

  <controls>

  </controls>

</pages>

<!--

      Set compilation debug="true" to insert debugging

      symbols into the compiled page. Because this

      affects performance, set this value to true only

      during development.

-->

<compilation debug="false">

  <assemblies>

    <add assembly="System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>

  </assemblies>

</compilation>

<httpHandlers>

  <remove verb="*" path="*.asmx"/>

  <add verb="*" path="*.asmx" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>

  <add verb="*" path="*_AppService.axd" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>

  <add verb="GET,HEAD" path="ScriptResource.axd" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" validate="false"/>

</httpHandlers>

<httpModules>

  <add name="ScriptModule" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>

</httpModules> 
```

```
 <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">

     <dependentAssembly>

         <assemblyIdentity name="System.Web.Extensions" publicKeyToken="31bf3856ad364e35"/>

             <bindingRedirect oldVersion="1.0.0.0-1.1.0.0" newVersion="3.5.0.0"/>

     </dependentAssembly>

     <dependentAssembly>

         <assemblyIdentity name="System.Web.Extensions.Design" publicKeyToken="31bf3856ad364e35"/>

         <bindingRedirect oldVersion="1.0.0.0-1.1.0.0" newVersion="3.5.0.0"/>

     </dependentAssembly>

 </assemblyBinding> 
```

```
<scripting>

  <webServices>

  </webServices>

  <!--

  <scriptResourceHandler enableCompression="true" enableCaching="true" />

  -->

</scripting> 
```

```
<validation validateIntegratedModeConfiguration="false"/>

<modules>

</modules>

<handlers>

  <remove name="WebServiceHandlerFactory-Integrated" />

</handlers> 
```

# javascript - jquery中的多选复选框

> ID：11557266
> 
> 赞同：3
> 
> 时间：2012-07-19T08:57:12.010
> 
> 标签：javascript, jquery, html, checkbox, checked

我想在 div 或文本框中显示复选框的多个值。

```
function countChecked() {
    var n = $("input:checked").val();
    $("div").text(n + (n === 1 ? " is" : " are") + " checked!");
}
countChecked();
$(":checkbox").click(countChecked); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T08:58:17.800

试试这个：

```
function countChecked() {
  var n = 0;
  $(":checkbox:checked").each(function(){
     n += parseInt(this.value, 10)
  })
  $("div").text(n + (n === 1 ? " is" : " are") + " checked!");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T10:38:29.967

```
function countChecked() {
    var n= "";
    $("input[type=checkbox]:checked").each(function(){
        n += $(this).val() + " ";
    });
    $("#change").text(n);
}
countChecked();
$(":checkbox").click(countChecked); 
```

# php - Kohana ORM插入NULL而不是空字符串

> ID：11557267
> 
> 赞同：2
> 
> 时间：2012-07-19T08:57:13.650
> 
> 标签：php, mysql, kohana, kohana-orm, kohana-3.2

在 Kohana 3.2 中，当您覆盖 ORM 的函数“值”时，然后执行以下操作：

```
public function values(array $values, array $expected = NULL) {           

  if($values['a_column'] == "") $values['a_column'] = NULL;

  return parent::values($values);
} 
```

NULL 值无论如何都会被转换成一个空字符串，这不是我想要的行为。有人知道解决方法吗？我在文档或网络上找不到任何东西...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T19:52:13.497

我发现了这个问题的答案。只需在模型中使用过滤器，如下所示：-

```
public function filters()
{
  return array(
    'initial_assessment_date' => array(
      array(function($value) {
        return (!$value) ? NULL : $value;
      })
    )
  );
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T09:03:54.503

这是因为后来的 ORM::values 使用了 array_key_exists。您需要使用[unset](http://php.net/manual/en/function.unset.php)删除该值。

# c++ - QVBoxLayout 间距

> ID：11557269
> 
> 赞同：0
> 
> 时间：2012-07-19T08:57:17.503
> 
> 标签：c++, qt

我正在使用 QVBoxLayout 对小部件进行分组。当我将小部件添加到布局时，小部件之间有一些间距。如何删除此间距？我尝试将边距设置为 0，并且还使用了 setSpacing(0) 但没有效果。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T19:18:48.170

更改间距和边距后，如果小部件已显示，则需要在小部件上调用 adjustSize() 或 update()。您还应该注意小部件中内置的一些最小尺寸。

如果您只是想让布局看起来正确，我会使用 Qt IDE 表单编辑器/设计模式，并拖放您想要的元素，并根据需要打开布局。您需要编辑的所有属性都在右下方可见。

# hibernate - 用户缺少权限或未找到与 JUnit 的对象

> ID：11557271
> 
> 赞同：2
> 
> 时间：2012-07-19T08:57:29.197
> 
> 标签：hibernate, junit

我在使用 JUnit 时遇到问题：

```
Hibernate: SELECT COUNT(0) FROM group
DEBUG - SqlExceptionHelper         - user lacks privilege or object not found: GROUP [n/a]
java.sql.SQLSyntaxErrorException: user lacks privilege or object not found: GROUP
at org.hsqldb.jdbc.Util.sqlException(Unknown Source)
at org.hsqldb.jdbc.Util.sqlException(Unknown Source)
at org.hsqldb.jdbc.JDBCStatement.fetchResult(Unknown Source)
at org.hsqldb.jdbc.JDBCStatement.executeQuery(Unknown Source)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.hibernate.engine.jdbc.internal.proxy.AbstractStatementProxyHandler.continueInvocation(AbstractStatementProxyHandler.java:122)
at org.hibernate.engine.jdbc.internal.proxy.AbstractProxyHandler.invoke(AbstractProxyHandler.java:81)
at $Proxy46.executeQuery(Unknown Source)
at org.springframework.jdbc.core.JdbcTemplate$1QueryStatementCallback.doInStatement(JdbcTemplate.java:441)
at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:396)
at org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:456)
at org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:464)
at org.springframework.jdbc.core.JdbcTemplate.queryForObject(JdbcTemplate.java:472)
at org.springframework.jdbc.core.JdbcTemplate.queryForObject(JdbcTemplate.java:477)
at org.springframework.jdbc.core.JdbcTemplate.queryForInt(JdbcTemplate.java:486)
at org.springframework.jdbc.core.simple.SimpleJdbcTemplate.queryForInt(SimpleJdbcTemplate.java:117)
at org.springframework.test.jdbc.SimpleJdbcTestUtils.countRowsInTable(SimpleJdbcTestUtils.java:56)
at org.springframework.test.context.junit4.AbstractTransactionalJUnit4SpringContextTests.countRowsInTable(AbstractTransactionalJUnit4SpringContextTests.java:115)
at fr.neosoft.neocommunity.dao.group.GroupTest.testSave(GroupTest.java:68)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:74)
at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:30)
at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:83)
at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:72)
at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: org.hsqldb.HsqlException: user lacks privilege or object not found: GROUP
at org.hsqldb.error.Error.error(Unknown Source)
at org.hsqldb.error.Error.error(Unknown Source)
at org.hsqldb.SchemaManager.getTable(Unknown Source)
at org.hsqldb.ParserDQL.readTableName(Unknown Source)
at org.hsqldb.ParserDQL.readTableOrSubquery(Unknown Source)
at org.hsqldb.ParserDQL.XreadTableReference(Unknown Source)
at org.hsqldb.ParserDQL.XreadFromClause(Unknown Source)
at org.hsqldb.ParserDQL.XreadTableExpression(Unknown Source)
at org.hsqldb.ParserDQL.XreadQuerySpecification(Unknown Source)
at org.hsqldb.ParserDQL.XreadSimpleTable(Unknown Source)
at org.hsqldb.ParserDQL.XreadQueryPrimary(Unknown Source)
at org.hsqldb.ParserDQL.XreadQueryTerm(Unknown Source)
at org.hsqldb.ParserDQL.XreadQueryExpressionBody(Unknown Source)
at org.hsqldb.ParserDQL.XreadQueryExpression(Unknown Source)
at org.hsqldb.ParserDQL.compileCursorSpecification(Unknown Source)
at org.hsqldb.ParserCommand.compilePart(Unknown Source)
at org.hsqldb.ParserCommand.compileStatements(Unknown Source)
at org.hsqldb.Session.executeDirectStatement(Unknown Source)
at org.hsqldb.Session.execute(Unknown Source)
... 50 more
WARN  - SqlExceptionHelper         - SQL Error: -5501, SQLState: 42501
ERROR - SqlExceptionHelper         - user lacks privilege or object not found: GROUP 
```

这仅适用于我的一个实体。其他的测试都可以，但这个不行。

我使用 Hibernate 4、JUnit 4、Spring 3 和 JPA 2。

如果您想查看我的实体或其他任何内容，我可以发布它。

感谢您的帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T08:59:32.427

GROUP 是 HSQLDB 中的保留字，如[文档](http://hsqldb.org/doc/guide/lists-app.html)中所述。不要使用保留字作为表的名称。

您可以使用[@Table](http://docs.oracle.com/javaee/6/api/javax/persistence/Table.html)注释控制表的名称：

```
@Entity
@Table(name="some_other_descriptive_name")
public class Group {
...
} 
```

# asp.net - 产品 API 上的 ASIN 列表？

> ID：11557272
> 
> 赞同：1
> 
> 时间：2012-07-19T08:57:48.857
> 
> 标签：asp.net, linq-to-sql, amazon-mws

早晨，

我正在尝试传递亚马逊 ASIN 列表，以便我可以使用 MWS API 处理它们。

```
 List<string> prodASINs = dc.aboProducts.Select(a => a.asin).ToList();
            var count = prodASINs.Count();
            //Loop through passing 10 at a time to AWS
            for (var i = 0; i < count; i++)
            {
                var prodASINToSend = prodASINs.Skip(i * 10).Take(10).ToList();
                //Send to AWS

                MarketplaceWebServiceProductsConfig config = new MarketplaceWebServiceProductsConfig();
                config.ServiceURL = productsURL;

                MarketplaceWebServiceProducts.MarketplaceWebServiceProductsClient service = new MarketplaceWebServiceProductsClient(appname, version, accesskeyID, secretkey, config);

                GetLowestOfferListingsForASINRequest request = new GetLowestOfferListingsForASINRequest();
                request.SellerId = merchantID;
                request.MarketplaceId = marketids[0];
                request.ItemCondition = condition;
                request.ASINList.ASIN = prodASINToSend; 
```

然而，这`request.ASINList.ASIN = prodASINToSend;`就是说“对象引用未设置为对象的实例”。但是它正在传递所需的`List<string>`prodASINToSend

有人可以为他们解释一下吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T14:15:29.337

该错误意味着您在尝试使用类对象之前忘记声明类的新实例。

在您的情况下，需要将 ASINList 声明为 ASINList 类的新实例。

# sqlite - sqlite - 像在 MySQL 中一样制作 TIMEDIFF

> ID：11557277
> 
> 赞同：0
> 
> 时间：2012-07-19T08:58:07.783
> 
> 标签：sqlite, timedelta

我想在 SQLite 中进行类似 MySQL 中的 TIMEDIFF 的函数调用。

我做的：

```
select strftime('%s','2012-01-01 12:00:00') - strftime('%s','2004-01-01 02:34:56') 
```

但这只是秒数。那么我如何制作一个 str ，比如小时、分钟和秒的差异`%Y-%m-%d %H:%M:%S`在哪里 `%H:%M:%S`，当它大于 24 小时时，将`%d`显示它是多少 dais 等等。`%Y``%m`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T09:57:19.890

您不能用 表示时差`%Y-%m-%d ...`，至少不能用日期格式表示。您将如何表达不到一天的差异？（`0000-00-00 ...`不是有效日期）。另外，一个月是多少？30天？31天？23423432 天？

我建议您在几秒钟内保持差异，并在展示时根据需要进行调整。

另一方面，如果你真的想按照你的要求做，这里有一个方法：

```
sqlite> select datetime(strftime('%s','2012-01-01 12:00:00') 
               - strftime('%s','2004-01-01 02:34:56') - 62167305600, 'unixepoch');
0007-12-31 09:25:04 
```

即使我觉得 OP 的反对票是不合理的，我也无法阻止自己解释为什么我上面提到的显然不是一个很好的选择在时差小于 1 天时返回“不正确”的结果：原因隐含在我上面写的内容中：没有这样的日期，`0000-00-00 ...`而是返回的日期时间为负数：`-001-12-31 ...`

这是一种获取方法`438:53:45`，但它非常复杂：

```
earlier date: d1
later date: d2

select 
    cast(
        (strftime('%s', d2) - strftime('%s', d1)) / 86400 * 24 
             + cast(strftime("%H", time(strftime('%s', d2) 
                    - strftime('%s', d1), 'unixepoch')) 
               as int) 
    as text) 
    || ":" 
    ||  substr(time(strftime('%s', d2) - strftime('%s', d1), 'unixepoch'), 4); 
```

例子：

```
d1 = '2004-01-01 02:34:56'
d2 = '2012-01-01 12:00:00'

sqlite> select cast((strftime('%s','2012-01-01 12:00:00') - strftime('%s','2004-01-01 02:34:56')) / 86400 *24 + cast(strftime("%H", time(strftime('%s','2012-01-01 12:00:00') - strftime('%s','2004-01-01 02:34:56'), 'unixepoch'))  as int) as text) 
    || ":" 
    ||  substr(time(strftime('%s','2012-01-01 12:00:00') - strftime('%s','2004-01-01 02:34:56'), 'unixepoch'), 4);
70137:25:04 
```

# java - 什么时候规范不是规范——全能的 RPC 博客 ping 规范难题

> ID：11557279
> 
> 赞同：4
> 
> 时间：2012-07-19T08:58:10.517
> 
> 标签：java, rpc, ping, specifications

我已经开始使用 Apache RPC 客户端库在 Java 中实现博客 ping 服务。但是，我有点困惑，我似乎无法找到一个明确的规范来说明博客 ping 响应应该是什么样子来检查它是否成功。

我看过这个，这似乎是一个（官方的？）pingback 规范。
[http://www.hixie.ch/specs/pingback/pingback-1.0](http://www.hixie.ch/specs/pingback/pingback-1.0)

但是，这提到将返回故障代码，例如

[http://xmlrpc-epi.sourceforge.net/specs/rfc.fault_codes.php](http://xmlrpc-epi.sourceforge.net/specs/rfc.fault_codes.php)

许多 RPC 服务器（例如 Google 博客搜索）似乎在其 XML 响应中返回了“flerror”和“消息”元素，这似乎更类似于以下内容：

[http://xmlrpc.scripting.com/weblogsCom.html](http://xmlrpc.scripting.com/weblogsCom.html)

这里发生了什么？我意识到 pingback 是一种网络入侵的东西，它成为了一种标准——但我对编码的内容感到困惑，或者确实信任响应。我可以相信下面的吗？它适用于所有博客 ping 服务器吗？

```
public  boolean ping( String urlToPing, String title, String url, String urlChanges, String urlRSS ) throws MalformedURLException, XmlRpcException
{
    XmlRpcClientConfigImpl config = new XmlRpcClientConfigImpl();
    config.setServerURL( new URL( urlToPing ) );

    XmlRpcClient client = new XmlRpcClient();
    client.setConfig( config );

    Object[] params = new Object[] { title, url, urlChanges, urlRSS };
    HashMap result = ( HashMap )client.execute( "weblogUpdates.extendedPing", params );

    try
    {
        errors.put( url, Boolean.parseBoolean( result.get( "flerror" ).toString() ) );
    }
    catch( Exception e )
    {
        log.error( "RPC Problem Parsing response to Boolean trying: " + result.get( "flerror" ) );
    }

    return Boolean.parseBoolean( result.get( "flerror").toString()) ;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T04:02:21.340

> 我可以相信下面的吗？它适用于所有博客 ping 服务器吗？

简短的回答是否定的。不同的服务器实现会存在错误或误解规范，因此您无法编写适用于所有博客 ping 服务器的代码。你能做的最好的就是在你接受的东西上保持自由，并尽可能地处理非标准/错误的服务器。

[pingback 规范](http://www.hixie.ch/specs/pingback/pingback-1.0)说，

> 如果 pingback 请求成功，则返回值必须是单个字符串，包含服务器认为有用的尽可能多的信息。该字符串预计仅用于调试目的。
> 
> 如果结果不成功，则服务器必须以 RPC 错误值响应。故障代码应该是上面列出的代码之一，或者如果服务器无法确定正确的故障代码，则通用故障代码为零。

因此，期望服务器遵守规范的客户端会执行类似的操作，

```
try {
     client.execute( "weblogUpdates.extendedPing", params );
} catch(XmlRpcException e) {
    //check the code of the rpc exception as shown below,
    //log the error, or perhaps rethrow it?
    return false;
} 
```

如果服务器遵循 pingback 规范，它应该返回以下故障代码之一，

```
0
A generic fault code. Servers MAY use this error code instead of any of the others if they do not have a way of determining the correct fault code.
0×0010 (16)
The source URI does not exist.
0×0011 (17)
The source URI does not contain a link to the target URI, and so cannot be used as a source.
0×0020 (32)
The specified target URI does not exist. This MUST only be used when the target definitely does not exist, rather than when the target may exist but is not recognised. See the next error.
0×0021 (33)
The specified target URI cannot be used as a target. It either doesn't exist, or it is not a pingback-enabled resource. For example, on a blog, typically only permalinks are pingback-enabled, and trying to pingback the home page, or a set of posts, will fail with this error.
0×0030 (48)
The pingback has already been registered.
0×0031 (49)
Access denied.
0×0032 (50) 
```

正如您所提到的，几个 pingback 服务器返回错误代码，因此您还必须使用以下代码进行检查，

```
try {
    Object rpcRVal = client.execute( "weblogUpdates.extendedPing", params );
    if(rpcRVal instanceof Map) {
        Object flError = ((Map) rpcRVal ).get("flerror");
        if(flError != null && flError instanceof Boolean) {
            return ((Boolean) flError).booleanValue());        
        }
    }
    return true;
} catch(XmlRpcException e) ... 
```

# windows - 文件名通配 Windows 与 Unix

> ID：11557280
> 
> 赞同：5
> 
> 时间：2012-07-19T08:58:16.393
> 
> 标签：windows, unix, batch-file, glob, filepattern

在仅使用通配符的 Windows 标准外壳中，这样的事情是否可行？

```
$ ls -1 003[5,8]0
00350
00380 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T09:07:05.827

不在标准 Windows 命令外壳 (cmd.exe) 中。它只理解 ? 和 * 通配符；没有正则表达式。

您是否可以选择安装 Cygwin、Windows Powershell 或其他增强型 shell？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T10:23:05.117

是的你可以。不是使用单个命令，而是使用 和 的`FOR`组合`IF`。试试这个让你开始......

```
setlocal enabledelayedexpansion
for %%a in (003?0) do (
  set fn=%%a
  set fnl=!fn:~3,1!
  if .!fnl!==.5 (
    echo !fn!
  )
  if .!fnl!==.8 (
    echo !fn!
  )
) 
```

# php - 如何通过 JSON php 传递数组

> ID：11557282
> 
> 赞同：0
> 
> 时间：2012-07-19T08:58:16.787
> 
> 标签：php, jquery, json

我想通过 JSON 传递数组，如下所示：

```
<?php

for(i=0;i<5;i++) {
  $arrayA[i] = "A" . i;
  $arrayB[i] = "B" . i;
}

echo json_encode($arrayA,$arrayB);

?> 
```

我知道这是不可能的，但是还有其他方法可以传递动态加载的数组并在那之后用 javascript 读取它们吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T09:00:44.117

只需将两个数组放在另一个数组中。

```
$returnArr = array($arrayA,$arrayB);
echo json_encode($returnArr); 
```

在 JS 端，只需使用您选择的库进行解码，然后像访问任何普通数组一样访问返回的数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T09:01:27.720

```
echo json_encode(array('arrayA' => $arrayA, 'arrayB' => $arrayA)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T09:02:19.183

只需为您的数组创建包装器：

```
for(i=0;i<5;i++) {
    $arrayA[i] = "A" . i;
    $arrayB[i] = "B" . i;
}
$arrayC = array($arrayA,$arrayB);
echo json_encode($arrayC); 
```

在 jQuery 方面：

```
$.getJSON('ajax/yourPhpFile.php', function(data) {
    $.each(data, function(key, val) {
        // each `val` is one of the arrays you passed from php
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T09:01:59.627

您可以使用 AJAX 加载将返回 PHP 生成的数组的脚本。如果你使用 jQuery，你可以使用 $.get() 或 $.getJSON() 来调用它。您可以在此处阅读 PHP JSON 手册[http://php.net/manual/en/book.json.php](http://php.net/manual/en/book.json.php)并在此处阅读 jQuery .getJson() 函数[http://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)

# javascript - 是否有像 Google Contact 那样处理表单的库

> ID：11557288
> 
> 赞同：0
> 
> 时间：2012-07-19T08:58:31.290
> 
> 标签：javascript, ruby-on-rails, ajax

在 Google 通讯录中，默认情况下，表单会显示带有一些

（只读）但是当您单击一个值时，它会将字段转换为一个，以便您可以编辑它，当您按 Enter 时，它会更新该值，删除并重新显示新值

.

因此，一键添加/修改信息非常容易。

我正在寻找一个能做到这一点的库，最好能处理整个过程 javascript+ajax+ror。或者只是 javascript+ajax，或者至少只是 javascript。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T09:01:41.920

我认为，像许多其他产品一样，它们使用 GWT。Google Web Toolkit，它实际上是用 Java 编写的，然后交叉编译成 Javascript。它允许他们用 Java 编写前端和后端的源代码，然后为跨浏览器创建优化的 javascript。

这样做的好处是它都是基于小部件的，并且它非常容易切换组件，而无需手动与 DOM 交互。

但是，如果您不想走这条路，您可以使用 ajax 调用在 javascript 中非常简单地完成。在模糊事件中，您对保存该字段的服务器进行 ajax 调用。成功后它切换回标签。当您单击标签/文本时，它会切换为文本编辑并使用与标签相同的内容。不需要为这种事情使用插件，因为它实际上非常基本，它看起来不错:)。

# c# - 如果 Web 应用程序有未决的长时间运行的请求，IIS 会回收应用程序池吗？

> ID：11557294
> 
> 赞同：1
> 
> 时间：2012-07-19T08:58:57.177
> 
> 标签：c#, iis, long-polling, application-pool

**介绍**

我正在使用面向 IIS 7.0+ 的 ASP.NET MVC 3、C# 开发 Web 应用程序。我们有许多长时间运行的异步请求（利用 AsyncController/Async 操作功能）。我也经常使用 HttpRuntime.Cache （并且以某种非标准方式在这里并不重要）。

**问题**

如果存在活动的长时间运行的请求，是否可以突然回收 IIS 应用程序池？如果可能，我想防止这种行为，因为我不想从缓存中丢失数据。

我真的需要使用一些持久性存储（即数据库）来克服可能出现的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T09:03:54.550

通常 IIS 不会回收由于处于不活动状态而有待处理请求的应用程序。但是，如果您达到内存或 CPU 阈值，IIS 可能会回收您的应用程序。但这是您可以在 IIS 管理控制台中配置的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T17:42:46.170

当触发回收时，有一个默认为 90 秒的“关闭时间限制”。这就是进程在强制关闭之前必须完成的时间。这可以通过 IIS 进行配置，除了删除不需要的回收触发器（内存、CPU、时间、计划、请求等）之外，您可能还希望将其增加到一个较大的值

# java - 属性中具有多个值的单个键

> ID：11557298
> 
> 赞同：4
> 
> 时间：2012-07-19T08:59:04.093
> 
> 标签：java

我有一个包含以下数据的属性文件：

```
acqurierSystemAlias=CTC0,CTC1,CTC2,CTC3,CTC4,FEXCO,AMEX,DINERS 
```

现在在主程序中：

```
String acqurierSA = "CTC1";
String[] acqurierSystemAlias = properties.getProperty("acqurierSystemAlias").split(",");

for(String xyz: acqurierSystemAlias){
    if(xyz.equalsIgnoreCase(acqurierSA)) {
        System.out.println("true");
    } else {
        System.out.println("false");
    }
} 
```

这让我回来了: `false`, `true`, `false`, `false`,`false`

我的要求只是在属性文件中返回，否则返回`true`，我只想要一个值。目前它正在向我返回循环中的值。`acqurierSA``false`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T09:10:01.690

您可以制作一个`list`表格`Array`，然后检查`contains()`

```
String[] acqurierSystemAlias = properties.getProperty("acqurierSystemAlias").split(",");

List<String> lList=Arrays.asList(acqurierSystemAlias);

boolean found=lList.contains(acqurierSA );
System.out.println(found); 
```

无需遍历数组。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-19T09:01:49.367

您可以使用专用变量来执行此操作：

```
boolean found = false;

for(String xyz: acqurierSystemAlias){
    if(xyz.equalsIgnoreCase(acqurierSA)){
        found = true;
        break;
    }
}
System.out.println(found); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T09:10:12.347

也许你不需要分割财产

```
System.out.println(("," + properties.getProperty("acqurierSystemAlias") + ",").contains("," +acqurierSA+ "," )); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T09:11:56.047

检查这个。

```
String acqurierSA = "CTC1";
String[] acqurierSystemAlias = properties.getProperty("acqurierSystemAlias").split(",");

List<String> strList = Arrays.asList(acqurierSystemAlias);
strList.contains(acqurierSA); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-02T12:41:27.627

```
public String processMountCheck() {
        logger.info("Logging an INFO-about Directory exists or not.");
        processPropFile();
        String[] urls = prop.getProperty("URL").split(",");
        List<String> list = Arrays.asList(urls);
        String[] folder = prop.getProperty("DIRECTORY").split(",");
        List<String> folders = Arrays.asList(folder);
        for (int i = 0; i < folders.size(); i++) {
            String k = folders.get(i);
            File file = new File(k);
            if (file.isDirectory()) {
                logger.info("Connected to a Directory!"+folders.get(i));
                if (file.list().length > 0) {
                    logger.info("Directory is not empty!");
                } else {
                    logger.info("Directory is empty!");
                }
            } else {
                logger.error("Invalid Directory!");
                // System.out.println("This is not a directory");
            }
        }
        return null;
    } 
```

# c# - 从 SQL Server 获取下一行

> ID：11557304
> 
> 赞同：3
> 
> 时间：2012-07-19T08:59:13.737
> 
> 标签：c#, sql, winforms

我在 SQL Server 中有一个表，`id, name, address`其中的列`id`是具有自动增量整数的主键。

我在 winforms 应用程序中有一个表单，其中有两个按钮：

```
1 previous
2 next 
```

我想要该功能，即当我单击上一个按钮时，我可以从表中获取所选行的上一行。同样，当我单击下一个按钮时，我可以获得所选行的下一行....

我的表格看起来像这样

![在此处输入图像描述](../Images/575ebdfa4f4586326620b9bab26b0828.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T09:01:42.150

您可以选择行 ID 大于/小于当前 ID 的前 1 行，因此如果您的 ID 为 123，您可以选择 ID 大于 123 的前 1 行（第一行）而不知道以下应该是124\. 同上一行。

因为它是PK，所以应该对行进行排序，所以你不需要添加排序命令。当然，在询问第一行的上一行或最后一行之后的下一行时，您应该小心。

```
declare @CurrentID int = 123;
select top 1 * from [MyTable] where [MyTable].[ID] > @CurrentID; 
```

当然，您最好使用缓存机制来实现它，以避免为每个按钮点击进行数据库查询，这样您就可以将一堆行查询到您的应用程序内存中，而不是通过索引查找上一个或下一个项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T09:05:52.870

你所需要的只是分页。参考第 4 点[http://beyondrelational.com/modules/2/blogs/70/posts/10802/multipurpose-rownumber-function.aspx](http://beyondrelational.com/modules/2/blogs/70/posts/10802/multipurpose-rownumber-function.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T09:10:47.803

下一步按钮

```
select * from table where id=id_val+1 
```

上一个按钮

```
select * from table where id=id_val-1 
```

单击任何按钮后，您应该将值存储在一个名为的变量中

```
id_val 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-19T09:14:01.337

我会将每一行映射到一个对象中，创建一个列表并遍历该列表，这样您就不会对数据库进行大量调用。当然，如果数据库中通常会发生很多变化，那么这种方法就不好了。

# c# - 计算旋转图像的 x 和 y

> ID：11557307
> 
> 赞同：0
> 
> 时间：2012-07-19T08:59:19.220
> 
> 标签：c#, rotation

当我们像这样旋转任何对象时，它`Image`也会根据`x``y`

旋转角度。![在此处输入图像描述](../Images/b50c12b470b82e3fa00093c8b6ed338f.png)

我只想知道我们如何计算外部矩形`x`和`y`（用红色指出

图像中的圆圈）同时旋转图像。我们有图像`width`，`height`并且

`rotation angle`?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T09:03:26.127

x - 你的 x 坐标

height - 图像的高度

角度 - 旋转角度

然后你需要**(x - height * sin(angle))**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T09:03:35.357

人们通常使用[旋转矩阵来做](http://en.wikipedia.org/wiki/Rotation_matrix)这样的事情。

> 在线性代数中，旋转矩阵是用于在欧几里得空间中进行旋转的矩阵

[这个](http://tutorial.math.lamar.edu/Classes/LinAlg/LinearTransExamples.aspx)网页包含一个关于旋转的部分，应该有助于解释这个概念。

# installation - 调度 写入注册表值后的元素

> ID：11557312
> 
> 赞同：1
> 
> 时间：2012-07-19T08:59:43.370
> 
> 标签：installation, wix, close-application

我希望我的安装程序关闭所有 IExplorer 实例，然后执行安装。要关闭 IE，我需要添加一个注册表项，这样所有选项卡都将在没有对话框的情况下关闭，然后我 `<util:CloseApplication... />`用来关闭 IE 实例。

`CloseApplication`和`Component`注册密钥的都运行良好。我的问题是如何安排它们，以便`CloseApplication`只有在添加注册表项后才会执行。

我唯一能把`<util:CloseApplication... />`没有错误的地方放在`<Product...>`. 组件执行的顺序由以下因素决定：

`<Feature..><ComponentRef../></Feature..>`

我不知道如何控制`<util:CloseApplication... />`元素的执行顺序并将其延迟到设置注册表项为止。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T09:30:16.027

该`<util:CloseApplication>`元素被翻译成许多自定义动作。其中之一是`WixCloseApplications`实际上安排延迟的 CA 来完成这项工作。默认安排在之前`InstallFiles`，您可以尝试在之后重新安排`WriteRegistryValues`：

```
<InstallExecuteSequence>
  ...
  <Custom Action="WixCloseApplications" After="WriteRegistryValues" />
  ...
</InstallExecuteSequence> 
```

我在实际安装中没有这样做，所以你最好玩一下并彻底测试以确保它在重新调度后按预期关闭应用程序。

**更新**：这是问题的技术方面。还有道德的:)

AFAIU，您要做的是在安装时更改 IE 设置。我不认为这是一个很好的用户体验。想象一下，您按照自己喜欢的方式设置浏览器，突然间它更改了其中一项设置。你永远不会知道是一些不相关的安装做到了，你会为此罪责怪微软。:)

因此，尝试重新考虑安装架构的这一部分。可能，您可能想要添加一个启动条件来检查该 IE 设置并通知用户。

# objective-c - 在将第二个字符串对象添加到数组中后，第一个对象发生了变化

> ID：11557313
> 
> 赞同：-1
> 
> 时间：2012-07-19T08:59:45.843
> 
> 标签：objective-c, nsarray

在将第二个字符串对象添加到数组中后，第一个对象发生了变化

```
[m_cObjImageNameArrayPtr addObject:m_cObjParsedStringPtr]; 
```

但在上面的语句中，我调用一种方法并一次添加`m_cObjParsedStringPtr`到数组中。添加第二个元素后，第一个元素和第二个元素包含相同的值，添加第三个元素后 - 第一个，第二个，第三个显示相同的值，但实际上它们是不同的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T09:16:00.260

我怀疑你的`m_cObjParsedStringPtr`指针每次都指向同一个对象......再放一些代码

# python - 在pygame中检查一个点是否与表面（像素完美）碰撞

> ID：11557314
> 
> 赞同：2
> 
> 时间：2012-07-19T08:59:46.670
> 
> 标签：python, collision-detection, pygame

我正在开发一个游戏（[导弹命令](http://en.wikipedia.org/wiki/Missile_command)克隆），我需要检查（建筑物）是否与（导弹）[`surface`](http://www.pygame.org/docs/ref/surface.html)相撞。`point`

![截图导弹指挥](../Images/085fa47bf27f8cf46f1e9c7a233c57e7.png)

如何检查导弹是否击中建筑物？

A[`Rect`](http://www.pygame.org/docs/ref/rect.html)有[`collidepoint`](http://www.pygame.org/docs/ref/rect.html#Rect.collidepoint)方法，但我希望它是像素完美的。

![场景](../Images/ae11232ab48536aada4ced0a45be185e.png)=> 使用 a `Rect`=> ![使用矩形](../Images/d9a7d20b9fcfe775532894e5889a59d0.png)=> 但它应该是完美的像素 =>![想要像素完美](../Images/84f0ce9e1f4a18567dafe63d764f17cb.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-19T09:00:36.387

您可以使用 a[`Mask`](http://www.pygame.org/docs/ref/mask.html)并使用它的[`get_at`](http://www.pygame.org/docs/ref/mask.html#Mask.get_at)方法。

> 如果 (x,y) 处的位已设置，则返回非零值。

通过调用创建蒙版非常简单[`pygame.mask.from_surface`](http://www.pygame.org/docs/ref/mask.html#pygame.mask.from_surface)

> 从给定的表面返回一个掩码。
> 使 Surface 的透明部分不设置，不透明部分设置。

* * *

因此，给定以下一些向量数学的辅助方法：

```
def sub(u, v):
  return [ u[i]-v[i] for i in range(len(u)) ] 
```

使用以下代码检查给定点是否在遮罩/曲面内：

```
# create mask from surface
mask = pygame.mask.from_surface(building.surface)

# translate the position of the missile,
# since the top left coordinate of the mask is always (0, 0)
rel_point = sub(missile.position, building.position)
try: 
    if mask.get_at(rel_point): 
        # point in mask
        do_something()
except IndexError: 
    pass 
```

# arrays - change_size_with_no_change_in_info

> ID：11557320
> 
> 赞同：0
> 
> 时间：2012-07-19T09:00:02.420
> 
> 标签：arrays, matlab

如何增加矩阵的大小。我有一个大小为 36 行和 3000 列的矩阵。我想将其转换为大小为 200 行和 3600 列的数组，而不影响原始矩阵中包含的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T09:04:12.110

在任何编程语言中，您都需要创建新数组并复制新数组中的先前元素。如果您使用的是 java，我更喜欢使用 Arraylist。

你总是可以在java中使用arrayList创建二维数组。像这样的东西

```
ArrayList<ArrayList<Type>> 
```

但在 C/C++ 中，您将需要执行整个复制操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T04:34:00.923

有一种方法可以使用零填充来做到这一点。

假设矩阵`A`具有`p`行和`q`列，并且您希望将其转换为`B`具有`m`行和`n`列（`m>p`和`n>q`）的矩阵。您可以使用

```
B = padarray(A,[m-p n-q],0,'post'); 
```

`B`将包含矩阵`A`，矩阵的其余部分将全为零。

例子：

```
a=randi(10,[2 2]);
a =

10    10
 2     9

b = padarray(a,[4-2 3-2],0,'post');
b =

10    10     0
 2     9     0
 0     0     0
 0     0     0 
```

# serial-port - 使用boost从串口读取超时

> ID：11557321
> 
> 赞同：0
> 
> 时间：2012-07-19T09:00:02.653
> 
> 标签：serial-port, boost-asio, access-violation

我想写入串行设备。每次写入后，我都会从设备中读取。如果设备没有响应，我希望读取操作超时。

我[在 SO 上](https://stackoverflow.com/questions/456042/how-do-i-perform-a-nonblocking-read-using-asio)找到了一个非常优雅的解决方案。但是，在我的应用程序中，port 和 io_service 是成员变量，但是当我尝试使用 io_service 成员来设置deadline_timer 时，我遇到了访问冲突。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T09:34:16.330

使用作为成员变量的 io_service 创建deadline_timer 应该没有问题。

如果deadline_timer和io_service是同一个类的成员，你必须确保deadline_timer是在io_service之后声明的，这样在构建deadline_timer的时候已经构建了io_service。

# ajax - 将 selectOneRadio 与 Ajax 一起使用

> ID：11557322
> 
> 赞同：0
> 
> 时间：2012-07-19T09:00:09.967
> 
> 标签：ajax, jsf, jsf-2, primefaces, radio-button

当我在加载 index.xhtml 页面后尝试此代码时，这是我的欢迎页面（并且页面 strana1.xhtml 最初包含为 p:outputPanel“sadrzaj”的内容）并单击按钮“Napred”（表示转发）一切正常很好，我得到了p：outputPanel id =“sadrzaj”的ajax更新（页面strana2.xhtml加载并替换index.xhtml页面内的页面strana1.xhtml，在p：outputPanel“sadrzaj”下）。但在此之后，radioButtons（它是页面 strana2.xhtml 的一部分）的任何更改都不会触发任何 ajax 请求，并且按钮“Nazad”（表示返回）也不起作用（单击后没有任何反应）。可能是什么问题？

**页面索引.xhtml：**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 
  Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://java.sun.com/jsf/facelets">
    <h:head>
        <title>Proba1</title>
    </h:head>
    <h:body>
        <h:form> 
            <h:panelGroup id="sadrzaj">
                <ui:include src="#{user.sadrzaj}"/>
            </h:panelGroup>

            <h:panelGrid id="dugmad" columns="2">
                <p:commandButton value="Nazad" disabled="#{user.iscrtajNazad}" 
                                 actionListener="#{user.nazad}" update="sadrzaj, dugmad"/>
                <p:commandButton value="Napred" disabled="#{user.iscrtajNapred}" 
                                 actionListener="#{user.napred}" update="sadrzaj, dugmad"/>
            </h:panelGrid>
        </h:form>
    </h:body>
</html> 
```

**页面 strana1.xhtml 最初包含在 index.xhtml 中：**

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 
  Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <title>IGNORED</title>
    </h:head>
    <h:body>
        <h3>Dobrodoslicu zelim svima!</h3>
        <p:outputLabel for="tekst1" value="Tekst1: "/>
        <p:inputText id="tekst1" value="#{user.tekst1}"/>

        <br/>

        <p:selectBooleanCheckbox id="personalizovana" value="#{user.personalizovana}"/>
        <p:outputLabel for="personalizovana" value="personalizovana"/>

        <br/>

        <h:outputText value="Broj strana: "/>
        <p:inputText value="#{user.brojStrana}"/>

        <br/>

        <p:outputLabel for="datum" value="Datum: "/>
        <p:calendar id="datum" mode="popup" showOn="button" pattern="dd/MM/yyyy" 
                    value="#{user.datum}"/>
    </h:body>
</html> 
```

**页面 strana2.xhtml：**

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 
  Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <title>IGNORED</title>
    </h:head>
    <h:body>      
        <p:selectOneRadio id="izborNacinaKreiranjaAnkete" 
                          value="#{user.izborNacinaKreiranjaAnkete}" >
            <f:selectItems value="#{user.ponudaNacinaKreiranjaAnkete}"/>
            <f:ajax event="change" listener="#{user.izborNacinaKreiranjaAnketeListener}" 
                                   render="sadrzajNacinaKreiranjaAnkete"/>
        </p:selectOneRadio>

        <br/>

        <p:outputPanel id="sadrzajNacinaKreiranjaAnkete">
            <h:outputText value="#{user.text}"/>
        </p:outputPanel>
    </h:body>
</html> 
```

**这是我的名为“用户”的 bean：**

```
 package beans;

    import java.io.Serializable;
    import javax.faces.bean.ManagedBean;
    import javax.faces.bean.SessionScoped;
    import javax.faces.event.ActionEvent;
    import javax.faces.event.AjaxBehaviorEvent;
    import javax.faces.model.SelectItem;

    @ManagedBean(name="user")
    @SessionScoped
    public class UserBean implements Serializable {
        private SelectItem[] ponudaNacinaKreiranjaAnkete = {
            new SelectItem("1", "postojeca pitanja"),
            new SelectItem("2", "kreiraj pitanje")
        };

        private String sadrzaj="strana1.xhtml";
        private String tekst1;
        private java.util.Date datum;
        private boolean bolje;
        private boolean personalizovana;
        private String brojStrana;
        private String izborNacinaKreiranjaAnkete = "2";
        private String sadrzajNacinaKreiranjaAnkete = "kreirajPitanje.xhtml";
        private boolean iscrtajNazad = true;
        private boolean iscrtajNapred = false;
        private String text = "Drugi text";
        private String homeSadrzaj = "homePrva.xhtml";

        public void napred(ActionEvent e) {
            setSadrzaj("strana2Proba.xhtml");
            setIscrtajNazad(false);
            setIscrtajNapred(true);
        }

        public void nazad(ActionEvent e) {
            setSadrzaj("strana1.xhtml");
            setIscrtajNazad(true);
            setIscrtajNapred(false);
        }

        /**
         * @return the sadrzaj
         */
        public String getSadrzaj() {
            return sadrzaj;
        }

        /**
         * @param sadrzaj the sadrzaj to set
         */
        public void setSadrzaj(String sadrzaj) {
            this.sadrzaj = sadrzaj;
        }

        /**
         * @return the tekst1
         */
        public String getTekst1() {
            return tekst1;
        }

        /**
         * @param tekst1 the tekst1 to set
         */
        public void setTekst1(String tekst1) {
            this.tekst1 = tekst1;
        }

        /**
         * @return the datum
         */
        public java.util.Date getDatum() {
            return datum;
        }

        /**
         * @param datum the datum to set
         */
        public void setDatum(java.util.Date datum) {
            this.datum = datum;
        }

        /**
         * @return the bolje
         */
        public boolean isBolje() {
            return bolje;
        }

        /**
         * @param bolje the bolje to set
         */
        public void setBolje(boolean bolje) {
            this.bolje = bolje;
        }

        /**
         * @return the iscrtajNazad
         */
        public boolean isIscrtajNazad() {
            return iscrtajNazad;
        }

        /**
         * @param iscrtajNazad the iscrtajNazad to set
         */
        public void setIscrtajNazad(boolean iscrtajNazad) {
            this.iscrtajNazad = iscrtajNazad;
        }

        /**
         * @return the iscrtajNapred
         */
        public boolean isIscrtajNapred() {
            return iscrtajNapred;
        }

        /**
         * @param iscrtajNapred the iscrtajNapred to set
         */
        public void setIscrtajNapred(boolean iscrtajNapred) {
            this.iscrtajNapred = iscrtajNapred;
        }

        /**
         * @return the personalizovana
         */
        public boolean isPersonalizovana() {
            return personalizovana;
        }

        /**
         * @param personalizovana the personalizovana to set
         */
        public void setPersonalizovana(boolean personalizovana) {
            this.personalizovana = personalizovana;
        }

        /**
         * @return the brojStrana
         */
        public String getBrojStrana() {
            return brojStrana;
        }

        /**
         * @param brojStrana the brojStrana to set
         */
        public void setBrojStrana(String brojStrana) {
            this.brojStrana = brojStrana;
        }

        /**
         * @return the izborNacinaKreiranjaAnkete
         */
        public String getIzborNacinaKreiranjaAnkete() {
            return izborNacinaKreiranjaAnkete;
        }

        /**
         * @param izborNacinaKreiranjaAnkete the izborNacinaKreiranjaAnkete to set
         */
        public void setIzborNacinaKreiranjaAnkete(String izborNacinaKreiranjaAnkete) {
            this.izborNacinaKreiranjaAnkete = izborNacinaKreiranjaAnkete;
        }

        /**
         * @return the ponudaNacinaKreiranjaAnkete
         */
        public SelectItem[] getPonudaNacinaKreiranjaAnkete() {
            return ponudaNacinaKreiranjaAnkete;
        }

        /**
         * @param ponudaNacinaKreiranjaAnkete the ponudaNacinaKreiranjaAnkete to set
         */
        public void setPonudaNacinaKreiranjaAnkete(SelectItem[] ponudaNacinaKreiranjaAnkete) {
            this.ponudaNacinaKreiranjaAnkete = ponudaNacinaKreiranjaAnkete;
        }

        public void izborNacinaKreiranjaAnketeListener(AjaxBehaviorEvent e) {
            if(izborNacinaKreiranjaAnkete.equals("1"))
                text = "Prvi tekst";
            else if(izborNacinaKreiranjaAnkete.equals("2"))
                text = "Drugi tekst";
        }

        /**
         * @return the sadrzajNacinaKreiranjaAnkete
         */
        public String getSadrzajNacinaKreiranjaAnkete() {
            return sadrzajNacinaKreiranjaAnkete;
        }

        /**
         * @param sadrzajNacinaKreiranjaAnkete the sadrzajNacinaKreiranjaAnkete to set
         */
        public void setSadrzajNacinaKreiranjaAnkete(String sadrzajNacinaKreiranjaAnkete) {
            this.sadrzajNacinaKreiranjaAnkete = sadrzajNacinaKreiranjaAnkete;
        }

        public void prvi(ActionEvent e) {
            setHomeSadrzaj("homePrva.xhtml");
        }

        public void drugi(ActionEvent e) {
            setHomeSadrzaj("index.xhtml");
        }

        /**
         * @return the text
         */
        public String getText() {
            return text;
        }

        /**
         * @param text the text to set
         */
        public void setText(String text) {
            this.text = text;
        }

        /**
         * @return the homeSadrzaj
         */
        public String getHomeSadrzaj() {
            return homeSadrzaj;
        }

        /**
         * @param homeSadrzaj the homeSadrzaj to set
         */
        public void setHomeSadrzaj(String homeSadrzaj) {
            this.homeSadrzaj = homeSadrzaj;
        }

        public void izmeni(ActionEvent e) {
            sadrzaj = "homePrva.xhtml";
        }

        public void izmeni2(ActionEvent e) {
            text = "Prvi tekst";
        }
    } 
```

此外，我尝试从 p:selectOneRadio 中删除 f:ajax，然后该按钮“Nazad”正常工作，我可以更改 outputPanel“sadrzaj”，只需单击按钮“Napred”（表示前进）和“Nazad”（表示返回）。我还尝试将页面 strana2.xhtml 作为我的欢迎页面，如下所示：

**页面 strana2.xhtml 更改为欢迎页面：**

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 
  Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <title>IGNORED</title>
    </h:head>
    <h:body>
        <h:form>

        <p:selectOneRadio id="izborNacinaKreiranjaAnkete" 
                          value="#{user.izborNacinaKreiranjaAnkete}" >
            <f:selectItems value="#{user.ponudaNacinaKreiranjaAnkete}"/>
            <f:ajax event="change" listener="#{user.izborNacinaKreiranjaAnketeListener}" 
                                   render="sadrzajNacinaKreiranjaAnkete"/>
        </p:selectOneRadio>

         <br/>

        <p:outputPanel id="sadrzajNacinaKreiranjaAnkete">
            <h:outputText value="#{user.text}"/>
        </p:outputPanel>

        </h:form>
    </h:body>
</html> 
```

结果很好，一切正常，但在 index.xhtml 页面内（当然我随后删除了这些 h:form 标签）它不起作用。

请问有人知道为什么会这样吗？

**这是我的问题的一部分，只是为了更清楚：**

我正在使用 netBeans7.1.2、Tomcat7.0.22 和 Primefaces 3.3.1，有时我会在服务器控制台中收到错误消息，但我没有看到这些消息对我的项目有任何影响，其实我想说即使我的项目有效，有时我也会收到这些错误，有时即使我的项目无效，我也没有收到任何消息。这些消息是：

**第一条消息：**

```
SEVERE: IOException while loading persisted sessions: java.io.InvalidClassException: beans.UserBean; local class incompatible: stream classdesc serialVersionUID = -5783497785664294581, local class serialVersionUID = -8328898459300814685
java.io.InvalidClassException: beans.UserBean; local class incompatible: stream classdesc serialVersionUID = -5783497785664294581, local class serialVersionUID = -8328898459300814685
    at java.io.ObjectStreamClass.initNonProxy(ObjectStreamClass.java:604)
    at java.io.ObjectInputStream.readNonProxyDesc(ObjectInputStream.java:1601)
    at java.io.ObjectInputStream.readClassDesc(ObjectInputStream.java:1514)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1750)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1347)
    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:369)
    at org.apache.catalina.session.StandardSession.readObject(StandardSession.java:1613)
    at org.apache.catalina.session.StandardSession.readObjectData(StandardSession.java:1073)
    at org.apache.catalina.session.StandardManager.doLoad(StandardManager.java:284)
    at org.apache.catalina.session.StandardManager.load(StandardManager.java:204)
    at org.apache.catalina.session.StandardManager.startInternal(StandardManager.java:470)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:148)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5241)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:148)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:812)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:787)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:607)
    at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:633)
    at org.apache.catalina.startup.HostConfig.deployDescriptors(HostConfig.java:558)
    at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:468)
    at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1329)
    at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:311)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
    at org.apache.catalina.util.LifecycleBase.setStateInternal(LifecycleBase.java:389)
    at org.apache.catalina.util.LifecycleBase.setState(LifecycleBase.java:334)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1041)
    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:774)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:148)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1033)
    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:291)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:148)
    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:148)
    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:727)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:148)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:621)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:450) 
```

**另一个是：**

```
NotifyUtil::java.net.SocketException: Software caused connection abort: recv failed
    at java.net.SocketInputStream.socketRead0(Native Method)
    at java.net.SocketInputStream.read(SocketInputStream.java:150)
    at java.net.SocketInputStream.read(SocketInputStream.java:121)
    at java.io.BufferedInputStream.fill(BufferedInputStream.java:235)
    at java.io.BufferedInputStream.read1(BufferedInputStream.java:275)
    at java.io.BufferedInputStream.read(BufferedInputStream.java:334)
    at java.io.FilterInputStream.read(FilterInputStream.java:133)
    at sun.net.www.protocol.http.HttpURLConnection$HttpInputStream.read(HttpURLConnection.java:3035)
    at sun.nio.cs.StreamDecoder.readBytes(StreamDecoder.java:283)
    at sun.nio.cs.StreamDecoder.implRead(StreamDecoder.java:325)
    at sun.nio.cs.StreamDecoder.read(StreamDecoder.java:177)
    at java.io.InputStreamReader.read(InputStreamReader.java:184)
    at java.io.BufferedReader.fill(BufferedReader.java:154)
    at java.io.BufferedReader.readLine(BufferedReader.java:317)
    at java.io.BufferedReader.readLine(BufferedReader.java:382)
    at org.netbeans.modules.web.monitor.server.NotifyUtil$RecordSender.run(NotifyUtil.java:299) 
```

**如果单击任何按钮或单选按钮，我会在 Firebug 控制台中收到此消息：**

```
<?xml version='1.0' encoding='UTF-8'?>
<partial-response><error><error-name>class java.lang.ClassCastException</error-name><error-message><![CDATA[javax.faces.component.StateHolderSaver cannot be cast to [Ljava.lang.Object;]]></error-message></error></partial-response> 
```

# javascript - 如何通过 JavaScript 打开 Chosen？

> ID：11557332
> 
> 赞同：15
> 
> 时间：2012-07-19T09:00:37.653
> 
> 标签：javascript, jquery, html, user-interface, jquery-chosen

我需要通过 JavaScript 打开[Chosen 下拉菜单](https://github.com/harvesthq/chosen)，这样用户就不必单击选择来显示它，这怎么做？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-19T09:10:05.000

您可以通过执行以下操作通过 JS打开*选定的选择框：*

```
$('#<id-of-your-select>_chzn').trigger('mousedown'); 
```

你的元素`<id-of-your-select>`的id在哪里。`<select>`

例如：如果您的`<select>`元素是 like `<select id="foo" ...>`，那么上面的代码将变为：

```
$('#foo_chzn').trigger('mousedown'); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-04-07T14:31:01.670

这很奇怪，但我发现答案是使用超时

它首先需要以某种方式超时，也许是因为我的元素被克隆了希望对其他人有用

```
setTimeout(function(){ firstElement.trigger("chosen:open"); }, 100); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-09-12T07:14:44.253

您可以将以下两行添加到您的代码中，它将使您选择的始终保持打开状态。它对我有用。

`list_start`是您的选择元素 ID。

```
("#list_start").trigger('chosen:open');
$('.chosen-drop').css('left', 0); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-03-18T08:52:03.343

在更新后的[Chosen jquery 插件](https://github.com/harvesthq/chosen)中，以下与 stopPropagation 一起工作正常。

```
$("#selectbox").trigger("chosen:open");			
event.stopPropagation();
```

```
$(document).ready(function() {
  $("#selectbox").chosen({});
  $("button").click(function() {
    $("#selectbox").trigger("chosen:open");
    event.stopPropagation();
  });
});
```

```
#selectbox {
  width: 140px
}
```

```
<link href="http://harvesthq.github.io/chosen/chosen.css" rel="stylesheet" />
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="http://harvesthq.github.io/chosen/chosen.jquery.js"></script>

<select id="selectbox">
  <option val="option1">Option 1</option>
  <option val="option2">Option 2</option>
  <option val="option3">Option 3</option>
  <option val="option4">Option 4</option>
  <option val="option5">Option 5</option>
  <option val="option6">Option 6</option>
</select>

<button>Trigger Chosen</button>
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-12-04T16:16:15.757

@tzvi 的答案在您尝试触发选择的情况下很有价值，以便在选择后保持打开状态（即：一次进行多项选择）。请允许我稍微扩展一下（顺便说一下，已针对所选的 1.0 进行了更新）：

```
$('#selectbox').change(function() {
  $('#selectbox_chosen .chosen-drop').css('left', '0');
});

$('html').click(function() {
  $('#selectbox_chosen .chosen-drop').css('left', '');
});

$('#selectbox_chosen .chosen-drop').click(function(e) {
  e.stopPropagation();
}); 
```

本质上，它通过覆盖通常由“活动”类放置的一些 css 来强制选择的下拉列表保持打开状态。然后我们有几个点击事件，如果您点击下拉菜单之外的任何地方，这些点击事件将撤消此操作。非常适合我。

编辑：顺便说一句，如果你真的想通过 JS 触发下拉，请使用 Chosen 1.0 的 API：

```
$('#selectbox').trigger('chosen:open') 
```

在原始问题的上下文中，这将允许您在进行选择后打开框或重新打开框。但是，它不会在做出选择后使框保持打开状态（不会关闭片刻）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-31T13:57:25.843

这解决了问题，

只需确保 chzn-select 是您选择的 ID。

用户单击选项后，chzn-drop 将保持打开状态：

```
 $('#chzn-select').change(function(event)
        {
            $('.chzn-drop').css('left', 0);
        }); 
```

# c# - 索引超出范围错误

> ID：11557335
> 
> 赞同：0
> 
> 时间：2012-07-19T09:00:43.927
> 
> 标签：c#

几天来我一直在寻找为什么我收到此错误消息的原因！我需要帮助来解决这个问题或改进代码。很难理解为什么会发生此错误并找到原因，它只是有时而不是一直发生！但我的猜测是它与列表和列表中的项目数有关。它位于发生错误事件的代码的第二部分。我还尝试将要删除的对象添加到特殊的“删除列表”中，但是为什么这不起作用？帮助表示赞赏！谢谢！

```
public void CollisionControlMissileHitAsteroid(ContentManager content)
{
    for (int i = 0; i < missilesList.Count(); i++)
    {
        // Stora asteroider
        for (int j = 0; j < asteroidsBigList.Count(); j++)
        {
            if (missilesList.ElementAt(i).Bounds().Intersects(asteroidsBigList.ElementAt(j).Bounds())) // Fel här ??
            {

                for(int x = 0; x < 2; x++)
                AddNewSmallAsteroidToList(new AsteroidSmall(content, asteroidsBigList.ElementAt(j).Position));
                missilesList.RemoveAt(i);
                i--;

                asteroidsBigList.RemoveAt(j);
                j--;
            }
        }

        if (missilesList.Count() > 0 && asteroidsSmallList.Count > 0)
        {

            for (int k = 0; k < asteroidsSmallList.Count(); k++) 
            {
                if (missilesList.ElementAt(i).Bounds().Intersects(asteroidsSmallList.ElementAt(k).Bounds())) // THIS IS WHERE THE ERROR EVENT HAPPENS!
                {
                    missilesList.RemoveAt(i);
                    i--;
                    asteroidsSmallList.RemoveAt(k); 
                    k--;
                }
            }
        }
    } 
} 
```

编辑：

这是我应该休息的地方吗？问，因为它仍然会发生！我可以玩五分钟，直到它发生！

```
if (missilesList.Count() > 0 && asteroidsSmallList.Count() > 0)
{

    for (int k = 0; k < asteroidsSmallList.Count(); k++) 
    {
        if (missilesList.ElementAt(i).Bounds().Intersects(asteroidsSmallList.ElementAt(k).Bounds())) 
        {
            missilesList.RemoveAt(i); 
            i--;
            asteroidsSmallList.RemoveAt(k);
            k--;
            break; // ???????
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T09:08:55.263

您认为这与列表的边界有关，这是对的。我从来没有想出一个令人满意的方法来删除循环中的列表项或数组元素，就像你说的那样，建立一个索引列表并在循环之外删除它们。话虽如此，您是否尝试过向后浏览列表，例如-

```
for (int k = asteroidsSmallList.Count() - 1; k >= 0; k--) 
{
    ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T09:05:03.923

假设您从一枚导弹和两颗小行星开始。导弹 (i=0) 击中了第一颗小行星 (j=0) - 但你继续使用 i=-1 和 j=0。您应该跳出内部循环并继续在那里进行外部循环的下一次迭代。毕竟，你已经“完成”了导弹——它不能击中任何其他小行星，无论大小。

`Count`（是的，根据 xanatos 的评论，使用属性而不是方法会更惯用`Count()`。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T09:10:59.240

我认为问题很明显，因为您的代码在 for 循环中运行。在第一个 for 循环中，您得到了`i=0`. 阅读我的评论

```
for (int i = 0; i < missilesList.Count(); i++)
    {
        // Stora asteroider
        for (int j = 0; j < asteroidsBigList.Count(); j++)
        {
            if (missilesList.ElementAt(i).Bounds().Intersects(asteroidsBigList.ElementAt(j).Bounds())) // Fel här ??
            {

                for(int x = 0; x < 2; x++)
                    AddNewSmallAsteroidToList(new AsteroidSmall(content, asteroidsBigList.ElementAt(j).Position));
                missilesList.RemoveAt(i);
                // In the first iteration of the outer for loop i=0, so what if the line below is executed
                // you will get negative index Hope this help
                i--;

                asteroidsBigList.RemoveAt(j);
                j--;
            }
        } 
```

# exchange-server - 为新消息和重播消息交换在线签名

> ID：11557336
> 
> 赞同：0
> 
> 时间：2012-07-19T09:00:46.003
> 
> 标签：exchange-server

我尝试在 Exchange Online 中创建签名。此签名有两个触发器：

1.  为新电子邮件添加签名：

    ```
    <html xmlns="http://www.w3.org/1999/xhtml">
      <head>
        <style type="text/css">
          h1 {font-size: 14pt; font-family: "Segoe UI", Arial,sans-serif; color:#F79646;margin-bottom:0;font-weight:normal;}  
          h2 {font-size: 11pt; font-family: "Segoe UI", Arial,sans-serif;margin-bottom:1em;margin-top:0;font-weight:normal;}  
          .email {font-size: 10pt; font-family: "Segoe UI", Arial, sans-serif; color:blue;text-decoration:underline;}  
          p {font-size: 10pt; font-family: "Segoe UI", Arial, sans-serif;}  
          .nazwafirmy {font-size:12pt; font-family: 'Segoe UI', Arial, sans-serif; color:#F79646;}  
          a {text-decoration:underline; color:blue;}  
          .danefirmy {color:#A6A6A6;}  
          .danefirmy b {color:gray; font-weight:normal;}  
          .infoprawne {font-size:8pt; color:#A6A6A6;}  
        </style>  
      </head>
      <body>
        <p>Pozdrawiam,</p>
        <h1>%%displayname%%</h1>
        <h2>%%title%%</h2>
        <p class="email">%%email%%</p>
        <p>%%mobilenumber%%</p>
        <br />
        <p class="nazwafirmy">Company</p>
        <p>ul.<br />tel. / fax:<br /></p>
        <p><a href="http://www.link.pl/">www.link.pl</a></p>
        <br />
        <p class="danefirmy"><b>NIP: </b><br />
          <b>Some information</b><br /><br />
        </p>
        <p class="infoprawne">Some information<br />
          <br />
        </p>
      </body>
    </html> 
    ```

2.  第二个触发器 - 在重播消息后添加：

    ```
    <html xmlns="http://www.w3.org/1999/xhtml"  >
      <head>
        <style type="text/css">
        p {font-size: 10pt; font-family: "Segoe UI", Arial, sans-serif;}
        </style>
      </head>
      <body>
        <p>Pozdrawiam,</p>
        <p>%%displayname%%</p>
        <p>Supremo Sp. z o.o.</p>
      </body>
    </html> 
    ```

我尝试使用 Exchange 中的规则添加此签名（例如）：
[http ://help.outlook.com/en-us/140/Ff852816.aspx#FallbackAction](http://help.outlook.com/en-us/140/Ff852816.aspx#FallbackAction)

或者

[http://www.axon-it.com/2012/02/22/office-365-email-footers/](http://www.axon-it.com/2012/02/22/office-365-email-footers/)

和

[http://www.axon-it.com/2012/01/23/office-365-email-disclaimer/](http://www.axon-it.com/2012/01/23/office-365-email-disclaimer/)

乃至

[http://community.office365.com/en-us/forums/158/p/48901/171956.aspx#171956](http://community.office365.com/en-us/forums/158/p/48901/171956.aspx#171956)

但没有任何结果。

我想做这样的事情：

1.  创建新电子邮件
2.  发送新电子邮件 - FIRST 触发器（添加签名）已激活
3.  我收到第一封电子邮件的答复
4.  当我发送重播电子邮件时，第二个触发器已激活（仅添加重播签名）

我怎么能这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T09:42:14.137

我创建了另外两个规则： 1\. 发送新电子邮件时激活 - 主题开始时除外：RE、FWD、ODP。2.当主题邮件为RE、FED、ODP时激活。

现在，一切正常:)

# php - 为什么我的 simple-html-dom 允许例如 'ä' 用于 wikipedia 但不允许用于 wikisource？

> ID：11557344
> 
> 赞同：0
> 
> 时间：2012-07-19T09:01:16.623
> 
> 标签：php, parsing, character-encoding, wikipedia, simple-html-dom

我的问题是以下脚本适用于某些 IRI 而其他人则不适用，我的问题是为什么它会以这种方式运行以及如何解决它。我认为字符集有问题，但这只是一个猜测，因为在维基百科中它可以工作。

```
<?php
include('C:\xampp\htdocs\php\simple_html_dom.php');
$html = file_get_html('http://de.wikisource.org/wiki/Am_B%C3%A4chle');
//Titel
foreach($html->find('span#ws-title') as $f)
echo $f->plaintext;

//1   http://de.wikisource.org/wiki/7._August_1929           OK
//2   http://de.wikisource.org/wiki/%E2%80%99s_ist_Krieg!    -
//3   http://de.wikisource.org/wiki/Am_B%C3%A4chle           -
//4   http://de.wikipedia.org/wiki/Guillaume-Aff%C3%A4re     OK
//5   http://de.wikisource.org/wiki/Solidit%C3%A4t           -
?> 
```

5 个 IRI 就是示例。最后 3 个 IRI 包含 %C3%A4，它是一个“ä”，但只有来自 wikipedia 的那个有效。2\. IRI 包含 %E2%80%99 它是一个“'” - 不起作用。

但是来自 wikisource 的第一个 IRI 有效。对于来自 wikisource 的每个 IRI 都是相同的，它不包含任何 ä、ö、...

当它不起作用时，我会收到以下警告：

> **警告：** file_get_contents(http://de.wikisource.org/wiki/Solidit%C3%A4t)：打开流失败：HTTP 请求失败！HTTP/1.0 403 Forbidden in C:\xampp\htdocs\php\simple_html_dom.php 第 70 行
> 
> **致命错误：**在第 5 行的 C:\xampp\htdocs\php\frage.php 中的非对象上调用成员函数 find()

在 simple_html_dom.php 中包含第 70 行的函数如下所示：

```
//65    function file_get_html($url, $use_include_path = false, $context=null, $offset = -1, $maxLen=-1, $lowercase = true, $forceTagsClosed=true, $target_charset = DEFAULT_TARGET_CHARSET, $stripRN=true, $defaultBRText=DEFAULT_BR_TEXT)
//66    {
//67    // We DO force the tags to be terminated.
//68    $dom = new simple_html_dom(null, $lowercase, $forceTagsClosed, $target_charset, $defaultBRText);
//69    // For sourceforge users: uncomment the next line and comment the retreive_url_contents line 2 lines down if it is not already done.
//70    $contents = file_get_contents($url, $use_include_path, $context, $offset);
//71    // Paperg - use our own mechanism for getting the contents as we want to control the timeout.
//72    //    $contents = retrieve_url_contents($url);
//73    if (empty($contents))
//74    {
//75        return false;
//76    }
//77    // The second parameter can force the selectors to all be lowercase.
//78    $dom->load($contents, $lowercase, $stripRN);
//79    return $dom;
//80    } 
```

有没有办法让脚本适用于 Wikipedia 或 Wikisource 中的每个 IRI？（我知道并不总是有`span#ws-title`，那不是我的问题。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T09:24:16.070

真棒问题！:)

他们似乎按用户代理过滤，尝试类似

```
<?php
ini_set("user_agent", "Descriptive user agent string");
file_get_contents("http://de.wikisource.org/wiki/".urlencode("Am_Bächle"));
?> 
```

您可能可以跳过 urlencode 部分，因为我只是用它来测试编码是否正确。

请注意，wikisource 显然不喜欢自动解析网页上的内容。尽管如此，*可能*有一个 API 可用于 wikibot 等，**询问他们**或搜索社区页面。无论如何，API 将更容易处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T10:00:59.983

该问题与字符或编码无关。[由于Wikimedia User-Agent policy](http://meta.wikimedia.org/wiki/User-Agent_policy) ，您得到 403 ，其中说：

> 脚本应使用包含联系信息的用户代理字符串，否则它们可能会被 IP 阻止，恕不另行通知。

这就是您应该做的：将 User-Agent 标头设置为可识别您的应用程序的内容，并可用于在出现问题时与您联系。

话虽如此，直接访问页面可能是获得所需日期的最糟糕方法。您应该改用[API](https://www.mediawiki.org/wiki/API)，或者，如果您想访问大量页面，[数据库转储](http://en.wikipedia.org/wiki/Wikipedia%3aDatabase_download)。

# android - 如何将 ImageView 周围的 TextView 与固定的文本行对齐

> ID：11557349
> 
> 赞同：2
> 
> 时间：2012-07-19T09:01:29.137
> 
> 标签：android, android-layout, textview

你能告诉我如何像这样对齐`textView`吗`imageview`

```
 _____
|     |
|_____| Some Dummy text,Some Dummy text,
Some Dummy text,Some Dummy text,S...more 
```

我只想将我的 TextView 限制为 2 行，最后我将调用一个 TextView 或 Button 以获取更多将在弹出窗口中打开的文本。

有没有可能创造出这样的东西。？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T09:32:35.210

```
 <HorizontalScrollView xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="fill_parent"
  android:layout_height="wrap_content">
 <LinearLayout
   xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent">

 <LinearLayout
     xmlns:android="http://schemas.android.com/apk/res/android"
     android:layout_width="fill_parent"
     android:layout_height="fill_parent"
     android:orientation="vertical" >

     <ImageButton
         android:id="@+id/imageButton1"
         android:layout_width="wrap_content"
         android:layout_height="100dp"
         android:src="@drawable/pic7"
         android:text="image1" />

      <TextView
         android:id="@+id/text"
         android:layout_width="fill_parent"
         android:layout_height="wrap_content"
         android:gravity="center"
         android:text="Textview1" />

 </LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T09:02:59.507

这绝对是可能的。您需要使用 RelativeLayout，您可以在其中放置每个视图并根据需要对齐它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-20T13:12:21.953

这对我有用，请看一下： http: [//gmariotti.blogspot.co.uk/2014/03/snippet-align-textview-around-image.html](http://gmariotti.blogspot.co.uk/2014/03/snippet-align-textview-around-image.html)

# android - Android：如何以编程方式创建自定义通知并编辑其布局添加视图？

> ID：11557353
> 
> 赞同：3
> 
> 时间：2012-07-19T09:01:40.777
> 
> 标签：android, android-layout, android-view, android-notifications

我想知道如何创建自定义通知并编辑布局以编程方式添加视图以允许用户自定义通知。

我不能做的是：

如果我像这样创建自定义 LinearLayout：

```
LinearLayout ll = new LinearLayout(c);
ImageView iv = new ImageView(c);
iv.setImageResource(R.drawable.bt_close);
ll.addView(iv); 
```

如何使用此布局创建通知并在单击 ImageView 时添加要执行的操作？

制作自定义通知的代码只有这个？

```
Notification notification = (statusIcon, appName, System.currentTimeMillis());
notification.contentView = new RemoteViews(this.getPackageName(),R.layout.notification); 
```

非常感谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-30T08:28:52.887

通知区域的使用`RemoteViews`就像 Android App Widgets。

它们不像您的应用程序中的 UI 部分。您可以参考它们，您可以创建它们，但它们驻留在其他应用程序中。（通知的 UI 在系统应用中，应用小部件在 Home Launcher 应用中。）

由于它们并未真正显示在您的应用中，因此您无法直接访问它们。例如，您不能设置`onClickListener`。

这就是为什么我们有`RemoteViews`.

使用它们，您可以通过提供布局文件和一些内置函数来更改文本、图像等来定义如何创建它们。并且您`PendingIntent`可以在单击按钮时触发它们。而已。

最后，您实际上可以动态更改通知中的 UI，但不是您通常在应用程序中执行的方式。

您可以查看此答案以了解如何创建一个。 [https://stackoverflow.com/a/21283668/1016462](https://stackoverflow.com/a/21283668/1016462)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-19T14:08:49.673

使用通知样式，您只需使用新样式重新创建新通知即可更改它。它需要小眨眼（如刷新）。但有效。

第一步将您的对象设为公共静态。

例子 ：

```
public static NotificationCompat.Builder mBuilder;
public static RemoteViews contentBigCustom;
public static RemoteViews contentSmallNotExpand;
public static RemoteViews contentBigCustomFROMCODE; 
```

**下一步 - 制作这一行：**

notification.contentView = contentBigCustom;

**看起来像：**

```
 // in top 
 public static RemoteViews contentAny; 
```

也许您正在使用 onStartCommand 来初始化对象...

```
 if (IWANTNOTIFYSTYLE == 0) {
contentBigCustom = RemoteViews(this.getPackageName(),R.layout.notificationBig);
}
else {
contentBigCustomFROMCODE = RemoteViews(this.getPackageName(),R.layout.notificationBig);
}

contentSmallNotExpand = RemoteViews(this.getPackageName(),R.layout.notificationSmall); 
```

contentBigCustomFROMCODE = RemoteViews(this.getPackageName(),R.layout.notificationBig);

```
 mBuilder = new NotificationCompat.Builder(this);
        mBuilder.setDefaults(Notification.DEFAULT_ALL);
        mBuilder.setVisibility(NotificationCompat.VISIBILITY_PUBLIC);
        mBuilder.setSmallIcon(R.drawable.play);
        mBuilder.setContentText("This text is not in function but its needed to create notify");
        mBuilder.setLargeIcon(icon);
        mBuilder.setPriority(Notification.PRIORITY_MAX);
        mBuilder.setContent(contentSmallNotExpand);
        mBuilder.setCustomBigContentView(contentBigCustom);

   After notify exe line : 
```

mNotificationManager.notify(0, mBuilder.build());

```
put : 

stopSelf() 
```

太杀服务了。当您想更改样式时，请重新启动服务并为样式 1 2 .. n 放置操作 ID。它看起来像刷新，因为我们重新创建了新的通知栏。这只是目前 100% 的方法！如果有人认为不同，请发给我应用示例的链接。

您可以使 Activity 对象也 public static 。

现在很容易控制任何组合：

服务 - 活动 服务 - 广播接收器 广播接收器 - 活动

但！：

Service1.contentNotify.setImageViewResource(R.id.NOTYFY_BTN, R.drawable.stop);

...

***setImageViewResource 不能将此行用于通知或任何其他样式更改方法。***

唯一的方法是创建服务，放入 startCommand CREATE_NOTIFY() 从意图操作名称中查找您要加载的 notify.xml。通知构建并添加关闭服务后，然后从广播调用：

```
 Intent serviceIntent = new Intent("WITHSTOP");

  serviceIntent.putExtra("WITHSTOP", "1");
  // must be MyApp extend Application reason : from broadcaster you cant access getContext and startService etc.              
  MyApp.getInstance().startService(serviceIntent); 
```

好像 ：

```
public class MyApp extends Application {
    private static MyApp instance;

    public static MyApp getInstance() {
        return instance;
    }

    public static Context getContext(){
        return instance;
        // or return instance.getApplicationContext();
    }

    @Override
    public void onCreate() {
        instance = this;
        super.onCreate();
    }
} 
```

...

# php - 用空格填充字符串的其余部分

> ID：11557365
> 
> 赞同：6
> 
> 时间：2012-07-19T09:02:06.227
> 
> 标签：php

谢谢您的支持。我有一个字符串，例如，32 个字符。首先，我想确定字符串最多有 32 个字符，如果字符只有 9 个，我想添加空格。

例子：

ABCDEFGHI ---> 9 个字符

我要这个：

ABCDEFGHI_ ***_* __ *_* __ *_* __ *_*** ---> 9 个字符 + 23 个空格自动添加。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-19T09:03:57.343

您正在寻找的功能是`str_pad`.

[http://php.net/manual/de/function.str-pad.php](http://php.net/manual/de/function.str-pad.php)

```
$str = 'ABCDEFGHI';
$longstr = str_pad($str, 32); 
```

默认填充字符串已经是空格。

由于您的最大长度应为 32，并且当字符串长度超过 32 个字符时不会采取任何操作，您可能希望使用then`str_pad`将其缩短：`substr`

[http://de.php.net/manual/de/function.substr.php](http://de.php.net/manual/de/function.substr.php)

```
$result = substr($longstr, 0, 32); 
```

如果您的字符串正好是 32 个字符长，这也不会采取任何行动，因此您现在总是以 32 个字符的字符串结束`$result`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T09:03:59.060

使用[str_pad](http://php.net/str_pad)：

```
str_pad('ABCDEFGHI', 32); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T09:04:24.980

使用`str_pad`功能：

```
$result = str_pad($input, 32, " "); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-19T09:04:46.593

你需要`str_pad`

```
$padded = str_pad($in,32,' '); 
```

[你可以有左或右填充，大量的选项，在这里](http://www.php.net/str_pad)查看它们

如果输入超过 32 个字符，则不采取任何措施，但这是一个易于实施的检查：

```
if (strlen($padded) > 32)
{
    throw new Exception($padded.' is too long');//or some other action
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-19T09:06:22.427

我不是 PHP 开发人员，但我认为[这](http://php.net/manual/en/function.str-pad.php)就是您想要的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-19T09:12:41.650

```
for($i=0;$i<(32-strlen($your_string));$i++)
{ 
    $new_string.=$your_string.' '
} 
```

希望对你有帮助

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-03-18T13:25:12.333

如果您想在函数内部进行更多自定义，您可以使用它

```
function fill($input, $length, $filler = ' ')
{
    $len = strlen($input);
    $diff = $length - $len;

    if($diff > 0)
    {
        for ($i = 0; $i < $diff; $i++)
        {
            $input = $input . $filler;
        }
    }
    return substr($input, 0, $length);
} 
```

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2012-07-19T09:04:11.097

```
$str = "ABCDEFGHI";
for ($i = 0; $i < 23; $i++) {
    $str .= "&nbsp;";
} 
```

这就是你想要的？

当看到其他评论时，那将是最好的解决方案。

# javascript - 使用 JavaScript 删除基于 div id 的表格行

> ID：11557366
> 
> 赞同：1
> 
> 时间：2012-07-19T09:02:11.037
> 
> 标签：javascript

真的需要你的帮助。

我有一个可以动态添加和删除行的表。但问题是我想根据 div id 删除表的行。我的意思是，在表格的每一行的一列上，我都有自动递增的 div id。然后，我想删除基于 div id 的行。那可能吗？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T09:06:07.460

你可以用 jQuery 很容易地做到这一点。

[http://jsfiddle.net/KWPWr/1/](http://jsfiddle.net/KWPWr/1/)

```
$('#d2').closest('tr').remove(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T09:06:16.233

如果您的表格如下所示：

```
<table>
    <tbody>
        <tr>
            <td>
                <div id="01"></div>
            </td>
        </tr>
        <tr>
            <td>
                <div id="02"></div>
            </td>
        </tr>
    </tbody>
</table> 
```

您可以使用`document.getElementById(DIVID).parentNode.parentNode`来访问`<tr>`元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T09:05:45.610

是的。

```
$('#row-id').closest('tr').fadeOut(200, function() { $(this).remove(); }); 
```

上面将首先选择 div，然后找到它存在的表行，将其淡出并删除。

# html - CSS的特定编辑器设置？

> ID：11557367
> 
> 赞同：0
> 
> 时间：2012-07-19T09:02:14.583
> 
> 标签：html, css, editor, styles, dreamweaver

您好，我在使用编辑器时遇到问题。我正在使用dreamweaver cs6，并想使用一个字段集。

问题是我试图从这里实现我的原始代码：

[原始代码](http://jsfiddle.net/Q3XY4/)

我认为它在我的编辑器中曾经是相同的风格。但它与示例中的不同。结果我会得到这个：

![cs6问题](../Images/5c5e51442aa6b3d5ecc8e29e762b18da.png)

正如您在左侧看到的那样，那里似乎有自动添加的选项卡，因此输入字段不会与暗框齐平。

如果有人能告诉我如何解决这个问题，我真的很感激。多谢。

**更新：**

上面的图片是我将在 Dreamweaver 中看到的。

当我使用该代码在我的网络服务器上发布它时：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Unbenanntes Dokument</title>
<style type="text/css">
#left {
    height: 400px;
    width: 500px;
    float: left;
    border: solid 2px #f23;
}
#left #frame {
    background-color:#444444;
    height: 337px;
    width: 440px;
    margin-top: 36px;
}
#left #frame form fieldset {
    height: 337px;
    width: 440px;
    color: #FFF;
    font-family: Arial, Helvetica, sans-serif;
    text-decoration: none;
    display: block;
    border: none;
}
#left #frame form fieldset h1 {
    margin-top: 15px;
    font-size: 16px;
    font-weight: bold;
    margin-left: 10px;
}
#left #frame form fieldset h2 {
    font-size: 13px;
    font-weight:lighter;
    margin-left: 10px;
    margin-top: 3px;
}
#left #frame form fieldset ul {
    list-style-type: none;
    margin-top: 30px;
}
#left #frame form fieldset ul .fl label {
    font-size: 12px;
    color: #ECECEC;
    font-weight: bolder;
    width: 80px;
    margin-bottom: 2px;
}
#left #frame form fieldset ul .fr label {
    font-size: 12px;
    color: #ECECEC;
    font-weight: bolder;
    width: 80px;
    margin-bottom: 2px;
}
#left #frame form fieldset ul input {
    color: #444444;
    font-size: 10px;
    width: 180px;
    height: 18px;
    padding-left: 5px;
    outline:none;
}
#left #frame form fieldset ul .fl {
    width: 180px;
    float: left;
    margin-bottom: 15px;
    background-color: #f23;
    margin-left: 0px;

}
 #left #frame form fieldset ul .fr {
    width: 180px;
    float: right;
    margin-bottom: 15px;
    background-color: #0F6;
    margin-right: 0px;
}
</style>
</head>

<body>

<div id="left">
                    <div id="frame">
                            <form action="" method="post">
                            <fieldset>
                                <h1>Text 1</h1>
                                <h2>text 2</h2>
                                <ul>
                                    <li class="fl">
                                    <label for="label1">Label 1</label>
                                    <input type="text" id="label1" name="label1" tabindex="10" autocomplete="off">
                                    </li>

                                    <li class="fr">
                                    <label for="label2">Label 2</label>
                                    <input type="text" id="label2" name="label2" tabindex="20" autocomplete="off">
                                    </li>

                                    <li class="fl">
                                    <label for="label3">Label 3</label>
                                    <input type="text" id="label3" name="label3" tabindex="30" autocomplete="off">
                                    </li>

                                    <li class="fr">
                                    <label for="label4">Label 4</label>
                                    <input type="text" id="label4" name="label4" tabindex="40" autocomplete="off">
                                    </li>

                                    <li class="fl">
                                    <label for="label5">Label 5</label>
                                    <input type="text" id="label5" name="label5" tabindex="50" autocomplete="off">
                                    </li>

                                    <li class="fr">
                                    <label for="label6">Label 6</label>
                                    <input type="text" id="label6" name="label6" tabindex="60" autocomplete="off">
                                    </li>
                                </ul>
                            </fieldset>
                            </form>
                    </div>
</div>
</body>
</html> 
```

结果我会得到：

![在此处输入图像描述](../Images/6de5fcc4ce2432f2bd8dec592ef3618f.png)

并在 jsfiddle 上输入相同的代码将导致：

[这](http://jsfiddle.net/Q3XY4/16/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T09:31:53.180

这可能是一个自动填充/边距问题，尝试将所有值作为您做的第一件事，然后您可以根据需要设置值

```
* {
    margin:0;
    padding:0;
} 
```

# c++ - OpenCV - 无法使用 SurfFeatureDetector 类

> ID：11557380
> 
> 赞同：0
> 
> 时间：2012-07-19T09:02:51.057
> 
> 标签：c++, opencv

我正在尝试编译一个使用 SURF 进行图像匹配的示例 openCV 项目。

代码如下：

```
#include <stdio.h>
#include <iostream>
#include <cv.h>
#include <cxcore.h>
#include <highgui.h>
//#include "opencv2/core/core.hpp"
//#include "opencv2/features2d/features2d.hpp"
//#include "opencv2/highgui/highgui.hpp"

using namespace cv;

void readme();

/** @function main */
int main()
{
/*
if( argc != 3 )
{ readme(); return -1; }

Mat img_1 = imread( argv[1], CV_LOAD_IMAGE_GRAYSCALE );
Mat img_2 = imread( argv[2], CV_LOAD_IMAGE_GRAYSCALE );
*/

Mat img_1 = imread("D:\\A.jpg", CV_LOAD_IMAGE_GRAYSCALE);
Mat img_2 = imread("D:\\backImg.jpg", CV_LOAD_IMAGE_GRAYSCALE);

if( !img_1.data || !img_2.data )
{ std::cout<< " --(!) Error reading images " << std::endl; return -1; }

//-- Step 1: Detect the keypoints using SURF Detector
int minHessian = 400;

SurfFeatureDetector detector;

std::vector<KeyPoint> keypoints_1, keypoints_2;

detector.detect( img_1, keypoints_1 );
detector.detect( img_2, keypoints_2 );

//-- Step 2: Calculate descriptors (feature vectors)
SurfDescriptorExtractor extractor;

Mat descriptors_1, descriptors_2;

extractor.compute( img_1, keypoints_1, descriptors_1 );
extractor.compute( img_2, keypoints_2, descriptors_2 );

//-- Step 3: Matching descriptor vectors using FLANN matcher
FlannBasedMatcher matcher;
std::vector< DMatch > matches;
matcher.match( descriptors_1, descriptors_2, matches );

double max_dist = 0; double min_dist = 100;

//-- Quick calculation of max and min distances between keypoints
for( int i = 0; i < descriptors_1.rows; i++ )
{ double dist = matches[i].distance;
if( dist < min_dist ) min_dist = dist;
if( dist > max_dist ) max_dist = dist;
}

printf("-- Max dist : %f \n", max_dist );
printf("-- Min dist : %f \n", min_dist );

//-- Draw only "good" matches (i.e. whose distance is less than 2*min_dist )
//-- PS.- radiusMatch can also be used here.
std::vector< DMatch > good_matches;

for( int i = 0; i < descriptors_1.rows; i++ )
{ if( matches[i].distance < 2*min_dist )
{ good_matches.push_back( matches[i]); }
}

//-- Draw only "good" matches
Mat img_matches;
drawMatches( img_1, keypoints_1, img_2, keypoints_2,
    good_matches, img_matches, Scalar::all(-1), Scalar::all(-1),
    vector<char>(), DrawMatchesFlags::NOT_DRAW_SINGLE_POINTS );

//-- Show detected matches
imshow( "Good Matches", img_matches );

for( int i = 0; i < good_matches.size(); i++ )
{ printf( "-- Good Match [%d] Keypoint 1: %d  -- Keypoint 2: %d  \n", i,         good_matches[i].queryIdx, good_matches[i].trainIdx ); }

waitKey(0);

return 0;
}

/** @function readme */
void readme()
{ std::cout << " Usage: ./SURF_FlannMatcher <img1> <img2>" << std::endl; } 
```

当我尝试编译时，我收到一个`SurfFeatureDetector`未声明标识符的错误。当我右键单击它并转到定义时，它会打开它。我应该包括其他东西吗？它位于 cv.h 文件中的 features2d.hpp 中。你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T10:49:02.153

只需在头文件中添加非自由模块，如果您使用的是 opencv 2.4.2，它将解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T09:23:25.873

您的编译器和编辑器被系统上安装的两个 OpenCV 版本弄糊涂了。

首先，确保所有设置（**包括**Visual Studio 中的路径、Visual Studio链接器设置中的**lib路径和****bin**路径 - 可能是一个环境变量）指向相同的版本。

接下来，确保包含所有需要的标题。在 OpenCV 2.4 及更高版本中，SURF 和 SIFT 已移至`nonfree`模块，因此您还必须安装它。不要忘记某些功能可能会移至`legacy`.

而且，如果您卸载一个版本的 OpenCV，编辑器（不具备编译器的所有解析功能）将不再混乱。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-15T07:19:03.123

有同样的问题只是包括

```
#include <opencv2/nonfree/nonfree.hpp> 
```

并解决了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-18T12:09:10.653

我有同样的问题，我做了以下步骤

*   删除程序文件中不同版本的opencv。
*   检查环境变量（opencv版本只有一个正确的路径）
*   在我的项目调试文件夹中，我添加了“cvextern.dll”和“cvextern_gpu.dll”（添加 features2d.dll 还不够）

# javascript - 为什么这个 javascript 电话字段表单验证器不起作用？

> ID：11557381
> 
> 赞同：0
> 
> 时间：2012-07-19T09:02:51.650
> 
> 标签：javascript, html

此电话号码验证器不起作用：/。为什么？

理想情况下，如果可选电话字段不为空，它应该继续验证表单。

电话字段是可选的，不是必需的。

验证表单：

*   电话字段是可选的。这意味着它不是必需的。
*   它应该忽略比较除数字之外的所有内容。
*   如果位数为 != 10 个数字，则应显示错误。
*   如果计数等于 10 位，它应该传递给 name.php（参见 HTML）

* * *

Javascript代码：

```
function validateForm() {
var x=document.forms["form"]["name"].value;
if (x==null || x=="")
  {
  alert("Name is required.");
  return false;
  }

var y=document.forms["form"]["email"].value;
var atpos=y.indexOf("@");
var dotpos=y.lastIndexOf(".");
if (atpos<1 || dotpos<atpos+2 || dotpos+2>=y.length)
  {
    alert("Valid email required.");
    return false;
  }

var formValue = document.forms["form"]["number"].value;
var regExpressionValue = /[^\d.]/g;
if (formValue !== null)
{
  if (regExpressionValue.test(formValue) !== true)
  {
    alert("Optional phone number invalid. Example: [1234567890].");
    return false;
  }
}

return true;

} 
```

* * *

HTML：

```
<form class="form" id="form" name="form" method="post" action="name.php" onsubmit="return validateForm()" />
<input type="text" name="name" id="name" />
<input type="text" name="email" id="email" />
<input type="tel" name="number" id="number" />
<button type="submit" value="Send" />Sign Up</button>
<div class="spacer"></div>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T09:19:15.453

你的正则表达式是错误的。试试这个

```
if (/^\d{10}$/.test(formValue) === false) {
    alert("Optional phone number invalid. Example: [1234567890].");
    return false;
} 
```

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-07-19T09:06:09.150

您对电话号码进行了错误的正则表达式和字符串存在检查。看一下这个：

```
function validateForm() {
   var x=document.forms["form"]["name"].value;
   if (x==null || x=="")
   {
     alert("Name is required.");
     return false;
   }

  var y=document.forms["form"]["email"].value;
  var atpos=y.indexOf("@");
  var dotpos=y.lastIndexOf(".");
  if (atpos<1 || dotpos<atpos+2 || dotpos+2>=y.length)
   {
     alert("Valid email required.");
     return false;
   }
  var formValue = document.forms["form"]["number"].value;
  if (formValue)
  {
  var regExpressionValue = /^(\d-?){10}$/g;
    if (regExpressionValue.test(formValue) !== true)
    {
      alert("Optional phone number invalid. Example: [1234567890].");
      return false;
   }
 }

return true;
} 
```

# objective-c - OpenGL ES 2.0 纹理映射，但显示为黑色

> ID：11557382
> 
> 赞同：3
> 
> 时间：2012-07-19T09:02:52.773
> 
> 标签：objective-c, ios, opengl-es-2.0

我试图让我的纹理显示在基本的 OpenGL 视图（UIView 的子类）中，但无论我使用哪种纹理，它都会显示为黑色。我的观点的代码如下：

```
@implementation SymGLView

typedef struct {
    float Position[3];
    float Color[4];
    float TexCoord[2];
} Vertex;

const Vertex Vertices[] = {
    {{1, -1, 0}, {1, 0, 0, 1}, {0, 0}},
    {{1, 1, 0}, {0, 1, 0, 1}, {0, 1}},
    {{-1, 1, 0}, {0, 0, 1, 1}, {1, 1}},
    {{-1, -1, 0}, {0, 0, 0, 1}, {1, 0}}
};

const GLubyte Indices[] = {
    0, 1, 2,
    2, 3, 0
};

+ (Class)layerClass {
    return [CAEAGLLayer class];
}

- (void)setupLayer {
    _eaglLayer = (CAEAGLLayer*) self.layer;
    _eaglLayer.opaque = YES;
}

- (void)setupContext {   
    EAGLRenderingAPI api = kEAGLRenderingAPIOpenGLES2;
    _context = [[EAGLContext alloc] initWithAPI:api];
    if (!_context) {
        NSLog(@"Failed to initialize OpenGLES 2.0 context");
        exit(1);
    }

    if (![EAGLContext setCurrentContext:_context]) {
        NSLog(@"Failed to set current OpenGL context");
        exit(1);
    }
}

- (void)setupRenderBuffer {
    glGenRenderbuffers(1, &_colorRenderBuffer);
    glBindRenderbuffer(GL_RENDERBUFFER, _colorRenderBuffer);        
    [_context renderbufferStorage:GL_RENDERBUFFER fromDrawable:_eaglLayer];    
}

- (void)setupDepthBuffer {
    glGenRenderbuffers(1, &_depthRenderBuffer);
    glBindRenderbuffer(GL_RENDERBUFFER, _depthRenderBuffer);
    glRenderbufferStorage(GL_RENDERBUFFER, GL_DEPTH_COMPONENT16, self.frame.size.width, self.frame.size.height);    
}

- (void)setupFrameBuffer {    
    GLuint framebuffer;
    glGenFramebuffers(1, &framebuffer);
    glBindFramebuffer(GL_FRAMEBUFFER, framebuffer);   
    glFramebufferRenderbuffer(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_RENDERBUFFER, _colorRenderBuffer);
    glFramebufferRenderbuffer(GL_FRAMEBUFFER, GL_DEPTH_ATTACHMENT, GL_RENDERBUFFER, _depthRenderBuffer);
}

- (GLuint)compileShader:(NSString*)shaderName withType:(GLenum)shaderType {

    NSString* shaderPath = [[NSBundle mainBundle] pathForResource:shaderName ofType:@"glsl"];
    NSError* error;
    NSString* shaderString = [NSString stringWithContentsOfFile:shaderPath encoding:NSUTF8StringEncoding error:&error];
    if (!shaderString) {
        NSLog(@"Error loading shader: %@", error.localizedDescription);
        exit(1);
    }

    GLuint shaderHandle = glCreateShader(shaderType);    

    const char * shaderStringUTF8 = [shaderString UTF8String];    
    int shaderStringLength = [shaderString length];
    glShaderSource(shaderHandle, 1, &shaderStringUTF8, &shaderStringLength);

    glCompileShader(shaderHandle);

    GLint compileSuccess;
    glGetShaderiv(shaderHandle, GL_COMPILE_STATUS, &compileSuccess);
    if (compileSuccess == GL_FALSE) {
        GLchar messages[256];
        glGetShaderInfoLog(shaderHandle, sizeof(messages), 0, &messages[0]);
        NSString *messageString = [NSString stringWithUTF8String:messages];
        NSLog(@"%@", messageString);
        exit(1);
    }

    return shaderHandle;

}

- (void)compileShaders {

    GLuint vertexShader = [self compileShader:@"SimpleVertex" withType:GL_VERTEX_SHADER];
    GLuint fragmentShader = [self compileShader:@"SimpleFragment" withType:GL_FRAGMENT_SHADER];

    GLuint programHandle = glCreateProgram();
    glAttachShader(programHandle, vertexShader);
    glAttachShader(programHandle, fragmentShader);
    glLinkProgram(programHandle);

    GLint linkSuccess;
    glGetProgramiv(programHandle, GL_LINK_STATUS, &linkSuccess);
    if (linkSuccess == GL_FALSE) {
        GLchar messages[256];
        glGetProgramInfoLog(programHandle, sizeof(messages), 0, &messages[0]);
        NSString *messageString = [NSString stringWithUTF8String:messages];
        NSLog(@"%@", messageString);
        exit(1);
    }

    glUseProgram(programHandle);

    _positionSlot = glGetAttribLocation(programHandle, "Position");
    _colorSlot = glGetAttribLocation(programHandle, "SourceColor");
    glEnableVertexAttribArray(_positionSlot);
    glEnableVertexAttribArray(_colorSlot);

    _modelViewUniform = glGetUniformLocation(programHandle, "Modelview");

    _texCoordSlot = glGetAttribLocation(programHandle, "TexCoordIn");
    glEnableVertexAttribArray(_texCoordSlot);
    _textureUniform = glGetUniformLocation(programHandle, "Texture");
}

- (void)setupVBOs {

    GLuint vertexBuffer;
    glGenBuffers(1, &vertexBuffer);
    glBindBuffer(GL_ARRAY_BUFFER, vertexBuffer);
    glBufferData(GL_ARRAY_BUFFER, sizeof(Vertices), Vertices, GL_STATIC_DRAW);

    GLuint indexBuffer;
    glGenBuffers(1, &indexBuffer);
    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, indexBuffer);
    glBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(Indices), Indices, GL_STATIC_DRAW);

}

- (void)render {
    glClearColor(0, 104.0/255.0, 55.0/255.0, 1.0);
    glClear(GL_COLOR_BUFFER_BIT);

    glViewport(0, 0, self.frame.size.width, self.frame.size.height);

    glVertexAttribPointer(_positionSlot, 3, GL_FLOAT, GL_FALSE, 
                          sizeof(Vertex), 0);
    glVertexAttribPointer(_colorSlot, 4, GL_FLOAT, GL_FALSE, 
                          sizeof(Vertex), (GLvoid*) (sizeof(float) * 3));

    glVertexAttribPointer(_texCoordSlot, 2, GL_FLOAT, GL_FALSE, 
                          sizeof(Vertex), (GLvoid*) (sizeof(float) * 7));    

    glActiveTexture(GL_TEXTURE0); 
    glBindTexture(GL_TEXTURE_2D, _floorTexture);
    glUniform1i(_textureUniform, 0);    

    glDrawElements(GL_TRIANGLES, sizeof(Indices)/sizeof(Indices[0]), 
                   GL_UNSIGNED_BYTE, 0);    

    [_context presentRenderbuffer:GL_RENDERBUFFER];
}

- (GLuint)setupTexture:(NSString *)fileName {    

    CGImageRef spriteImage = [UIImage imageNamed:fileName].CGImage;
    if (!spriteImage) {
        NSLog(@"Failed to load image %@", fileName);
        exit(1);
    }

    size_t width = CGImageGetWidth(spriteImage);
    size_t height = CGImageGetHeight(spriteImage);

    GLubyte * spriteData = (GLubyte *) calloc(width*height*4, sizeof(GLubyte));

    CGContextRef spriteContext = CGBitmapContextCreate(spriteData, width, height, 8, width*4, 
                                                       CGImageGetColorSpace(spriteImage), kCGImageAlphaPremultipliedLast);    

    CGContextDrawImage(spriteContext, CGRectMake(0, 0, width, height), spriteImage);

    CGContextRelease(spriteContext);

    GLuint texName;
    glGenTextures(1, &texName);
    glBindTexture(GL_TEXTURE_2D, texName);

    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST); 

    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGB, width, height, 0, GL_RGB, GL_UNSIGNED_BYTE, spriteData);

    free(spriteData);   

    return texName;    
}

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];

    if (self) {        
        [self setupLayer];        
        [self setupContext];    
        [self setupDepthBuffer];
        [self setupRenderBuffer];        
        [self setupFrameBuffer];     
        [self compileShaders];
        [self setupVBOs];
        [self render];        
    }
    _floorTexture = [self setupTexture:@"tile_floor.png"];
    return self;
}

@end 
```

顶点着色器：

```
attribute vec4 Position;

attribute vec2 TexCoordIn;
varying vec2 TexCoordOut;

void main(void) { 
    gl_Position = Position;
    TexCoordOut = TexCoordIn;
} 
```

片段着色器：

```
varying lowp vec2 TexCoordOut;
uniform sampler2D Texture;

void main(void) { 
    gl_FragColor = texture2D(Texture, TexCoordOut);
} 
```

我可以通过更改 gl_FragColor 的值来创建渐变，但我尝试了几种不同的纹理并且不知所措。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T07:26:58.413

这可能取决于您的纹理不是 2 的幂（即 512X512）

一些 OpenGL 驱动程序对此做出了奇怪的反应，而另一些则只是将纹理重新缩放到最接近的 2 次幂大小。

从 OpenGL 黄金书，您可以找到以下内容：

你可以在 OpenGL Gold Book OpenGL ES 2.0 中找到一个很好的解释：

> 在 OpenGL ES 2.0 中，纹理可以具有非二次方 (npot) 维度。换言之，宽度和高度不需要是2的幂。但是，如果纹理尺寸不是 2 的幂，OpenGL ES 2.0 确实对可以使用的环绕模式有限制。也就是说，对于 npot 纹理，包裹模式只能是 GL_CLAMP_TO_EDGE，而缩小过滤器只能是 GL_NEAREST 或 GL_LINEAR（换句话说，不是 mip-mapped）。扩展 GL_OES_texture_npot 放宽了这些限制并允许 GL_REPEAT 和 GL_MIRRORED_REPEAT 的包装模式，还允许使用完整的缩小过滤器集对 npot 纹理进行 mipmap。

我希望这有帮助。

干杯

# node.js - Nodejs + 连接资产管理器 + uglifyJs

> ID：11557387
> 
> 赞同：2
> 
> 时间：2012-07-19T09:03:19.093
> 
> 标签：node.js, assets, uglifyjs

我正在使用 nodejs(v0.8.2) 和 connect-assetmanager 中间件来使用 uglifyJs(v1.3.2) 捆绑和缩小我的 js 文件。我的配置就像`

```
var assets = 
    {
    'loginJs':{
        'debug': false,
        'route': /\/js\/login.js/
        , 'path': './public/scripts/'
        , 'dataType': 'javascript'
        , 'files': [
            'configs.js',
            'WMTX.Web.Library.js',
            'sso.js',
            'index.js'
        ]
        ,'postManipulate': {
                 '^': [
                assetHandler.uglifyJsOptimize
            ]
        } 
    },
    assetManager = require('connect-assetmanager'),
    assetsManagerMiddleware = assetManager(assets);
    app.configure(function(){
    app.use("/", assetsManagerMiddleware, express.static(o.paths.root));
}); 
```

`

但是当我启动应用程序时，出现了错误：

> 在新的 JS_Parse_Error (E:\work\siteexV2\IDE\node_modules\connect-assetmanager-handlers\node_modules\uglify-js\lib\parse-js.js:263:22) 在 js_error (E:\work\siteexV2\IDE \node_modules\connect-assetmanager-handlers\node_modules\uglify-js\lib\parse-js.js:271:15) 在 parse_error (E:\work\siteexV2\IDE\node_modules\connect-assetmanager-handlers\node_modules\uglify -js\lib\parse-js.js:367:17) 在 Object.next_token [作为输入] (E:\work\siteexV2\IDE\node_modules\connect-assetmanager-handlers\node_modules\uglify-js\lib\parse -js.js:613:17) 在下一个 (E:\work\siteexV2\IDE\node_modules\connect-assetmanager-handlers\node_modules\uglify-js\lib\parse-js.js:718:37) 在 Object.在 Array.uglifyJsOptimize [as 0] (E:\work\siteexV2\IDE\node_modules\connect-assetmanager-handlers\node_modules\uglify-js\lib\parse-js.js:704:19)\work\siteexV2\IDE\node_modules\connect-assetmanager-handlers\lib\handlers.js:57:26) 在修改 (E:\work\siteexV2\IDE\node_modules\connect-assetmanager\lib\assetmanager.js:275 :42) 位于 Function.module.exports.generateCache.settings.forEach.userAgentMatches 的 module.exports.manipulate (E:\work\siteexV2\IDE\node_modules\connect-assetmanager\lib\assetmanager.js:281:7)。 forEach.content (E:\work\siteexV2\IDE\node_modules\connect-assetmanager\lib\assetmanager.js:231:11)forEach.content (E:\work\siteexV2\IDE\node_modules\connect-assetmanager\lib\assetmanager.js:231:11)forEach.content (E:\work\siteexV2\IDE\node_modules\connect-assetmanager\lib\assetmanager.js:231:11)

我尝试在命令行中使用 uglifyJs 缩小这些 js，所有文件都可以成功缩小。请任何知道出了什么问题的人给我一些帮助，这让我发疯！非常感谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-19T12:48:30.217

我不熟悉 connect-assetmanager，但您的代码中有一些语法错误。

据我了解您正在尝试做什么，您忘记用分号结束您的“资产”声明。调用 require() 后，您似乎在做同样的事情。这是更正后的代码：

```
var assets = 
   {
   'loginJs':{
       'debug': false,
       'route': /\/js\/login.js/,
       'path': './public/scripts/',
       'dataType': 'javascript',
       'files': [
           'configs.js',
           'WMTX.Web.Library.js',
           'sso.js',
           'index.js'
       ],
       'postManipulate': {
           '^': [assetHandler.uglifyJsOptimize]
       }
   }; // <- note the semicolon

assetManager = require('connect-assetmanager'); // <- and here
assetsManagerMiddleware = assetManager(assets);

app.configure(function() {
    app.use("/", assetsManagerMiddleware, express.static(o.paths.root));
}); 
```

# c# - 压缩非常短的 txt 文件（仅包含字符串）C#

> ID：11557398
> 
> 赞同：-1
> 
> 时间：2012-07-19T09:04:02.680
> 
> 标签：c#, string, file, compression

我想压缩一个 1.7Kb 的 txt 文件，其中只有数字字符串。数据只是读取不同电压下的电流（100 个条目） 想要压缩并将其写入只有 512 位内存的智能卡中。任何人都可以帮助使用 C# 中可用的压缩技术。我已经尝试过 gzip n Lzman 常见的技术，例如差异机制，但我只能达到 1kb。请在 C# 中提供一些解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T09:11:32.587

`GZipStream`给你一个比你预期更大的文件的原因是它`GZipStream`产生了整个存档文件，而不仅仅是输入的压缩等价物。改为使用`DeflateStream`，您将使用完全相同的算法压缩到大小的一小部分。

**编辑#2**：但是，这将为您节省不超过 144 位的数据，而且对您来说还不够好。压缩文件对于一个小文件来说太大了，因为 Huffman 表的大小是恒定的，而微软的有缺陷的实现。DotNetZip 具有相同的格式，但问题不同。或者您也可以使用`SharpZipLib`它支持另一种有趣的算法（格式）（bzip2）；用于`SetLevel(9)`强制库可以为您提供的最大压缩级别。

Mark Adler在[这个答案](https://stackoverflow.com/questions/11435200/why-does-my-c-sharp-gzip-produce-a-larger-file-than-fiddler-or-php/11435898#11435898)中很好地解释了为什么 Microsoft 压缩对您如此糟糕，以及为什么 DotNetZip 或 SharpZipLib 即使使用相同的格式（基本算法）也能做得更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T09:21:26.840

一种解决方案可能是将数据存储为二进制 => 100 个条目，4 个字节/条目 => 400 个字节。然后，也许，你可以压缩结果。

```
List<float> myNumbers = ...
MemoryStream ms = new MemoryStream();
using(BinaryWriter bw = new BinaryWriter(stream))
{
    foreach(var n in myNumbers)
    bw.Write(n);
}
ms.Seek(0, SeekOrigin.Begin);

// Read the first 20 bytes from the stream.
byteArray = new byte[ms.Length];
count = memStream.Read(byteArray, 0, ms.Length);
File.WriteAllBytes(path, byteArray); 
```

并阅读：

```
byte[] content = File.ReadAllBytes(path);
var ms = new MemoryStream(content);
List<float> result = new List<float>()

using(BinaryReader br = new BinaryReader(ms))
{
    result.Add(br.ReadSingle());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T16:14:42.587

100 个条目的 512 位意味着每个条目大约 5 位。你要无损地处理这样的事情（我假设你需要）的唯一方法是，如果数据在样本之间具有一些显着的可预测性，因此预测和实际之间的差异足够小，可以平均编码在 5 位。否则就没有希望了。

我确信您可以将其压缩到远小于 1.7KB。如果它真的只有数字（尽管我想知道你有什么令人难以置信的测量设备，每个样本需要 17 位数字），那么你应该能够将它降低到大约 700 个字节。

如果你用它们的实际准确性来表示你的样本，那么你应该能够把数字降低很多。每个样本可能有五位数？然后你可以接近 200 个字节。虽然距离 64 字节（512 位）还有很长的路要走。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-19T10:11:31.807

您可以使用[7ZipSharp](http://sevenzipsharp.codeplex.com/)库。这非常有效:)

# iphone - 在 xcode 中重命名后，AppName 不会改变

> ID：11557402
> 
> 赞同：2
> 
> 时间：2012-07-19T09:04:06.737
> 
> 标签：iphone, xcode

我有两个 90% 相同的应用程序。所以我使用了相同的代码并在 xcode 中重命名了它。之后我将它安装在我的设备中。所以它给出了以前的应用程序名称而不是新名称。所以请告诉我。如果您需要更多详细信息，请告诉我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T09:07:33.347

如果您指的是跳板（iPhone“桌面”）中应用程序图标内的标签，则需要打开 YourApp-Info.plist（通常位于 Supporting Files 中）并更改**Bundle display name**的值（或 CFBundleDisplayName）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-19T09:05:39.213

转到您的 Xcode 项目，选择所需的目标，单击“构建设置”并查找“产品名称”，现在输入新的所需名称。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T09:08:37.513

要在 iOS 主屏幕上更改应用程序的名称，您需要更改`CFBundleDisplayName`应用程序的 Info.plist 文件中的密钥。

[https://developer.apple.com/library/ios/#documentation/General/Reference/InfoPlistKeyReference/Articles/CoreFoundationKeys.html#//apple_ref/doc/uid/TP40009249-110725-TPXREF135](https://developer.apple.com/library/ios/#documentation/General/Reference/InfoPlistKeyReference/Articles/CoreFoundationKeys.html#//apple_ref/doc/uid/TP40009249-110725-TPXREF135)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-19T09:20:19.773

正如大家所说，the`bundle display name`是您设备上显示的名称。

您可能也想更改`bundle identifier`它，但它是为了与您的配置文件相对应并发布在应用商店的另一个标识符上。

您可能想要重命名您的 Xcode 项目，我昨天发现了一种轻松完成此操作的方法：单击您的项目名称（在左侧面板上），转到右侧面板（如果没有，请打开它）并更改“项目名称”文本字段。它会要求您自动重命名许多文件。

最后，您是否考虑过创建一个新目标，而不是创建一个新项目？如果差异只是图像和 nib 文件，您可以通过这种方式轻松复制应用程序。

# c# - 为什么 RoleEnvironment.IsEmulated 通常不用于从计算模拟器告诉 Azure 云？

> ID：11557403
> 
> 赞同：0
> 
> 时间：2012-07-19T09:04:10.333
> 
> 标签：c#, .net, azure, azure-compute-emulator

Azure 运行时特性[`RoleEnvironment.IsEmulated`](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.serviceruntime.roleenvironment.isemulated.aspx)属性旨在判断代码是在 Azure Compute Emulator 中还是在真正的 Azure 云中运行。

然而，通常的方法似乎是获取`RoleEnvironment.DeploymentId`并检查它是否看起来像 GUID 表示。建议使用这种方法来回答[这个](https://stackoverflow.com/q/6160947/57428)和[这个](https://stackoverflow.com/q/2915340/57428)问题。

为什么`RoleEnvironment.IsEmulated`不使用？它只是在运行时的更高版本中引入还是有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T10:27:35.180

这个属性是在后期引入的（我可以说它很新），然后提出了引用的问题。该属性已在 SDK 1.5（2011 年 9 月）中引入，[在第二个引用问题的最新答案之一中也提到了](https://stackoverflow.com/a/7644186/57428)该属性。

# c# - 如何找到 ASP.Net 网站中的死锁

> ID：11557408
> 
> 赞同：4
> 
> 时间：2012-07-19T09:04:20.397
> 
> 标签：c#, asp.net, iis-7.5, c#-2.0, asp.net-2.0

我正在使用 .Net 2.0，我的网站似乎在某个时期达到了死锁状态。它停止工作，直到我回收应用程序池或更改 web.config 文件中的某些内容。我认为死锁导致了这个问题。

我想知道是否有任何工具可以调试/检查站点以查找可能导致死锁的代码。

现在我不得不将回收间隔设置为 10 分钟，这真的很糟糕，但这是解决问题的唯一方法，而且网站上有很多代码，我需要找到问题所在。如果我使用 DOS 攻击工具，我能否找到导致此问题的页面/代码块？如果可以，最好的测试工具是什么？

干杯!

**编辑** 我试图检查事件日志并发现以下警告。我不知道它是否是问题将继续挖掘。异常信息：异常类型：HttpException 异常消息：请求超时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T09:06:43.477

*   检查事件日志
*   打开运行[状况监控](https://docs.microsoft.com/en-us/previous-versions/bb398933(v=vs.140))

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T15:33:14.730

如果您使用“失败的请求跟踪”，它会产生一个很好的输出，然后会告诉您导致错误的原因，直至模块级别。然后，这将为您提供崩溃的第一步。

阅读 iis.net 上的这篇文章 →[在 IIS 7 中使用跟踪对失败的请求进行故障排除](https://docs.microsoft.com/en-us/iis/troubleshoot/using-failed-request-tracing/troubleshooting-failed-requests-using-tracing-in-iis)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T09:09:59.800

我会将 Visual Studio 附加到 IIS 并在发生死锁时中断调试器。然后，您可以检查正在运行的线程的调用堆栈。

Code Project 有[一篇关于如何进行 IIS 远程调试的好文章](https://www.codeproject.com/Articles/38132/Remote-IIS-Debugging-Debug-your-ASP-NET-Applicatio)。

当然，您可以使用本地 IIS 和本地 Visual Studio .NET 很好地设置测试机器，并且无需远程调试即可完成此操作。

# php - 如何在不通过ajax提交表单的情况下获取php变量

> ID：11557411
> 
> 赞同：-2
> 
> 时间：2012-07-19T09:04:23.317
> 
> 标签：php, ajax

我是 AJAX 新手

我想做类似的事情

```
$query="select name from login_master where name=txtName.value();";
//txtName is a name of textbox. 
```

但是没有提交表格。我可以用 ajax 做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T09:08:36.867

在 AJAX 中，您将调用包含此查询的任何 PHP 页面。您的 php 页面将执行查询并以您的 Javascript 可以理解的形式（可能是 HTML 或 JSON）回显结果。

在您的 ajax 调用的成功处理程序中，您可以处理返回的数据。

同样在服务器端要小心，因为用户输入的任何内容都可能存在潜在危险。将准备好的语句与 mysqli 或 PDO 一起使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T09:11:37.367

像这样的东西应该工作：

```
<script type="text/javascript">
$(document).ready(function() {
   $('#submit-btn').click(function() {
     $.ajax({
       type:'POST',  //POST or GET depending if you want to use _GET or _POST in php
       url:'your-page.php', //Effectively the form action, where it goes to.
       data:$('#txtName').val(),  //The data to send to the page (Also look up form serialise)
       success:function(e) {
            // On success this fill fire, depends on the return you will use in your page.
       }
     });
     return false;
   });
});
</script>

<form>
  <input type="text" id="txtName" />
  <input type="submit" id="submit-btn" value="Send" />
</form> 
```

然后在您`your-page.php`或您将调用它的任何内容中，您将获取`$_POST['txtName']`并查询您的数据库。

# python - 如何将 suds 调用从 php 转换为 python

> ID：11557413
> 
> 赞同：0
> 
> 时间：2012-07-19T09:04:29.447
> 
> 标签：python, arrays, struct, wsdl, suds

我在 php 中有一个示例代码：

```
$conditions = Array(
    "status_id" => "1"    
);
$params = Array(
    "method" => "call",
    "params" => Array($session, "order.list.filter", 
            Array($conditions, "order_id", 10) 
        ) 
```

而且我找不到如何将它翻译成python。

我有代码：

```
imp = Import('http://schemas.xmlsoap.org/soap/encoding/')
imp.filter.add('http://decorations.pl/webapi/soap/')
doctor = ImportDoctor(imp) 
url = 'http://decorations.pl/webapi/soap/?wsdl'
print url
client = Client(url, doctor=doctor)
print client 
```

这给了我：

```
Suds ( https://fedorahosted.org/suds/ )  version: 0.4 GA  build: R699-20100913
Service ( Webapi_Soap_ApiService ) tns="http://decorations.pl/webapi/soap/"
  Prefixes (1)
   ns0 = "http://schemas.xmlsoap.org/soap/encoding/"
  Ports (1):
   (Webapi_Soap_ApiPort)
     Methods (11):
        aquireApplicationLock(xs:string session, xs:string message, xs:boolean stealLock, )
        call(xs:string session, xs:string function, xs:anyType arguments, )
        checkApplicationLock(xs:string session, )
        checkObjectListModificationTime(xs:string session, xs:int objectType, ns0:Array list, )
        checkObjectLock(xs:string session, xs:int objectType, xs:int id, )
        checkObjectModificationTime(xs:string session, xs:int objectType, xs:int id, )
        getApplicationLock(xs:string session, )
        login(xs:string login, xs:string password, )
        logout(xs:string session, )
        releaseApplicationLock(xs:string session, xs:boolean stealLock, )
        updateApplicationLock(xs:string session, xs:boolean stealLock, )
     Types (48):
        ns0:Array
        ns0:ENTITIES
        ns0:ENTITY
        ns0:ID
        ns0:IDREF
        ns0:IDREFS
        ns0:NCName
        ns0:NMTOKEN
        ns0:NMTOKENS
        ns0:NOTATION
        ns0:Name
        ns0:QName
        ns0:Struct
        ns0:anyURI
        ns0:arrayCoordinate
        ns0:base64
        ns0:base64Binary
        ns0:boolean
        ns0:byte
        ns0:date
        ns0:dateTime
        ns0:decimal
        ns0:double
        ns0:duration
        ns0:float
        ns0:gDay
        ns0:gMonth
        ns0:gMonthDay
        ns0:gYear
        ns0:gYearMonth
        ns0:hexBinary
        ns0:int
        ns0:integer
        ns0:language
        ns0:long
        ns0:negativeInteger
        ns0:nonNegativeInteger
        ns0:nonPositiveInteger
        ns0:normalizedString
        ns0:positiveInteger
        ns0:short
        ns0:string
        ns0:time
        ns0:token
        ns0:unsignedByte
        ns0:unsignedInt
        ns0:unsignedLong
        ns0:unsignedShort 
```

而且我不知道如何建立工作调用......我有调用'order.list.filter'的功能：

```
# after login...
conditions = ""
params = client.factory.create('ns0:Array')
params.Array = [ conditions , "order_id", 10]
lista = client.service.call(sesId, 'order.list.filter', parametry)
print lista 
```

给我：

```
[1, 9, 10, 11, 12, 13, 14, 15, 16, 17] 
```

但我无法建立像 php 那样给我结果的条件。我尝试使用 'ns0:Struct' 找到一些示例，但我无法编写代码，但它并没有以：

```
File ".\test.py", line 143, in <module>
  lista = client.service.call(sesId, 'order.list.filter', parametry)
File "build\bdist.win32\egg\suds\client.py", line 542, in __call__
File "build\bdist.win32\egg\suds\client.py", line 602, in invoke
File "build\bdist.win32\egg\suds\client.py", line 649, in send
File "build\bdist.win32\egg\suds\client.py", line 702, in failed
File "build\bdist.win32\egg\suds\bindings\binding.py", line 265, in get_fault
suds.WebFault: Server raised fault: 'Unknown error' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T09:28:41.700

我将在这里冒险并假设该`$conditions`变量的 python 等效项是：

`conditions = {'status_id': 1}`

因为我不知道其他变量是什么，所以我真的不知道如何构造`$params`.

# python - 如何将参数传递给信号

> ID：11557416
> 
> 赞同：4
> 
> 时间：2012-07-19T09:04:42.457
> 
> 标签：python, django

视图.py：

```
user = User.objects.create_user(username=username, email=email)          
user.password=password1
#user.set_password(password1)
user.save() 
```

模型.py：

```
def create_user_profile(sender, instance, created, **kwargs):
    if created:
        #here i want user password unencrypted where I pass that parameter to this
      signal

        post_save.connect(create_user_profile, sender=User) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T09:14:00.027

> 发送信号
> 
> 在 Django 中有两种发送发送信号的方法。

```
Signal.send(sender, **kwargs)

Signal.send_robust(sender, **kwargs) 
```

[https://docs.djangoproject.com/en/dev/topics/signals/#sending-signals](https://docs.djangoproject.com/en/dev/topics/signals/#sending-signals)

在你的情况下，你可以做这样的事情

```
# not the real word code.
Signal.send(User, raw_password="xxx")

# raw password stays in **kwargs

def create_user_profile(sender, instance, created, **kwargs):

if created:
      //here i want user password unencrypted where I pass that parameter to this
      raw_pass = kwargs.get('raw_password') 
```

# c# - Dictionary.Add 与 Dictionary[key]=value 的区别

> ID：11557418
> 
> 赞同：96
> 
> 时间：2012-07-19T09:04:47.300
> 
> 标签：c#, .net

`Dictionary.Add`方法和索引器有什么区别`Dictionary[key] = value`？

* * *

## 回答 #1

> 赞同：160
> 
> 时间：2012-07-19T09:05:41.410

**添加**-> 如果字典中已存在项，则将项添加到字典中，将引发异常。

索引器或`Dictionary[Key]`=> **添加或更新**。如果字典中不存在该键，则将添加一个新项。如果键存在，则值将使用新值更新。

* * *

`dictionary.add`将向字典中添加一个新项目，`dictionary[key]=value`将根据键为字典中的现有条目设置一个值。如果键不存在，那么它*（索引器）*将在字典中添加项目。

```
Dictionary<string, string> dict = new Dictionary<string, string>();
dict.Add("Test", "Value1");
dict["OtherKey"] = "Value2"; //Adds a new element in dictionary 
Console.Write(dict["OtherKey"]);
dict["OtherKey"] = "New Value"; // Modify the value of existing element to new value
Console.Write(dict["OtherKey"]); 
```

在上面的示例中，首先`dict["OtherKey"] = "Value2";`将在字典中添加一个新值，因为它不存在，然后将其修改为新值。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-07-19T09:08:15.373

`Dictionary.Add`如果密钥已经存在，则抛出异常。`[]`当用于设置项目时不会（如果您尝试访问它以进行读取，它会这样做）。

```
x.Add(key, value); // will throw if key already exists or key is null
x[key] = value; // will throw only if key is null
var y = x[key]; // will throw if key doesn't exists or key is null 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-07-19T09:09:43.390

的文档说明了[`Add`](http://msdn.microsoft.com/en-us/library/k7z0zy8k.aspx)这一点，我觉得：

> 您还可以使用该[`Item`](http://msdn.microsoft.com/en-us/library/9tee9ht2.aspx)属性通过设置 ; 中不存在的键的值来添加新元素`Dictionary(Of TKey, TValue)`。例如，`myCollection[myKey] = myValue`（在 Visual Basic 中，`myCollection(myKey) = myValue`）。但是，如果指定的键已存在于 中`Dictionary(Of TKey, TValue)`，则设置 Item 属性会覆盖旧值。相反，`Add`如果具有指定键的值已存在，则该方法将引发异常。

（请注意，该`Item`属性对应于索引器。）

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-07-19T09:08:31.687

当字典中不存在该键时，行为是相同的：在这两种情况下都将添加该项目。

当密钥已经存在时，行为会有所不同。 `dictionary[key] = value`将更新映射到键的值，同时`dictionary.Add(key, value)`会抛出 ArgumentException。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-19T09:06:49.443

`dictionary.add`将项目添加到字典中，同时`dictionary[key]=value`将值分配给已经存在的键。

# android - 相对布局内的Android列表视图

> ID：11557419
> 
> 赞同：1
> 
> 时间：2012-07-19T09:04:48.120
> 
> 标签：android

有人在布局内实现了 ExpandableListView 吗？我正在尝试这样做，但我的身高有问题。我想将其设为“wrap_content”，以便在展开时看到完全展开的视图。但不幸的是，使用“wrap_content”参数我无法达到这个结果。有人可以帮忙吗？

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="fill_parent" >

<ScrollView
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

<RelativeLayout 
    android:layout_width="wrap_content"
    android:layout_height="fill_parent" >

<TextView
    android:id="@+id/user"
    android:layout_width="match_parent"
    android:layout_height="100dp"
    android:layout_alignParentTop="true"
    android:layout_below="@+id/rl"
    android:layout_toRightOf="@+id/user"
    android:paddingLeft="3dp"
    android:text="Top User"
    android:textColor="#000000"
    android:textSize="22dp" />

<ExpandableListView
    android:id="@+id/elvMain"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_below="@+id/user"
    android:layout_above="@+id/about" >
</ExpandableListView>

<TextView
    android:id="@+id/about"
    android:layout_width="match_parent"
    android:layout_height="100dp"
    android:layout_alignParentBottom="true"
    android:text="Bottom About"
    android:textColor="#6f6f6f"
    android:textSize="24dp"
    android:textStyle="bold" />
</RelativeLayout>
</ScrollView>
    </RelativeLayout> 
```

ExpandableListView 中的分组行：

```
<?xml version="1.0" encoding="utf-8"?>

  <TextView android:id="@+id/groupname"
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:textStyle="bold"
  android:textSize="20dp"
  android:paddingLeft="40dp"
  android:layout_width="match_parent"
  android:layout_height="wrap_content"
  android:minHeight="?android:attr/listPreferredItemHeight"
  android:textAppearance="?android:attr/textAppearanceLarge"
  android:background="@drawable/expanded_upper_selector"
  android:gravity="center_vertical"/> 
```

子行：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:background="@drawable/ingredients_selector">

<TextView android:id="@+id/ingredients_second_layer_text"
     android:textStyle="bold"
     android:textSize="20dp"
     android:paddingLeft="50dp"
     android:paddingRight="50dp"
     android:textColor="@color/dark_orange"
     android:layout_width="match_parent"
     android:layout_height="wrap_content"
     android:minHeight="?android:attr/listPreferredItemHeight"
     android:textAppearance="?android:attr/textAppearanceLarge"
     android:gravity="center_vertical"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T10:03:44.403

查看此链接 - [http://about-android.blogspot.in/2010/04/steps-to-implement-expandablelistview.html](http://about-android.blogspot.in/2010/04/steps-to-implement-expandablelistview.html)

这里只添加了一个自定义文本。以类似的方式，您可以添加第二个。试试这个，如果有任何疑问，您可以随时询问。希望这会对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T09:52:37.297

尝试您的 XML 编辑了一些：

**Your_XYZ_Main_XML::**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >
    <ScrollView
        android:id="@+id/scrollView1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:background="#000000" >

        <LinearLayout
            android:orientation="vertical"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:background="#00ff00" >

            <TextView
                android:id="@+id/user"
                android:layout_width="match_parent"
                android:layout_height="100dp"
                android:paddingLeft="3dp"
                android:text="Top User"
                android:textColor="#111111"
                android:background="#eeeeee"
                android:textSize="22dp" />
            <ExpandableListView
                android:id="@+id/elvMain"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1" >
            </ExpandableListView>
            <TextView
                android:id="@+id/about"
                android:layout_width="match_parent"
                android:layout_height="100dp"
                android:text="Bottom About"
                android:textColor="#6f6f6f"
                android:textSize="24dp"
                android:textStyle="bold" />

        </LinearLayout>
    </ScrollView>
</RelativeLayout> 
```

**Group_Row_XML ::**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

        <TextView
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/groupname"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:background="#159357"  //  YOUR_BACKGROUND
            android:gravity="center_vertical"
            android:minHeight="?android:attr/listPreferredItemHeight"
            android:paddingLeft="40dp"
            android:text="Parent text"
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:textSize="20dp"
            android:textStyle="bold" />

    </RelativeLayout> 
```

**Child_Row_XML ::**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

<TextView android:id="@+id/ingredients_second_layer_text"
     android:textStyle="bold"
     android:textSize="20dp"
     android:paddingLeft="50dp"
     android:paddingRight="50dp"
     android:textColor="#ff2211"  //  YOUR_COLOR
     android:text="Child Text"
     android:layout_width="match_parent"
     android:layout_height="wrap_content"
     android:minHeight="?android:attr/listPreferredItemHeight"
     android:textAppearance="?android:attr/textAppearanceLarge"
     android:gravity="center_vertical"/>

</RelativeLayout> 
```

# uml - 如何对齐 PlantUML 类图中的块？

> ID：11557426
> 
> 赞同：39
> 
> 时间：2012-07-19T09:05:12.310
> 
> 标签：uml, plantuml

我正在使用 PlantUML 制作简单的类图，该工具非常棒，但是除了将它们放入包中或使用 Alice -left-* Bob 之类的关系之外，我找不到任何方法来使类相互对齐。我需要的是这样的：

```
@startuml  
class Bob  
class Alice  
class Dan  
**Dan aligned Alice: horizontally**  
'or using a grid?  
**Bob at grid (2, 3)**  
@enduml 
```

有办法吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2018-12-11T13:23:31.650

使用`-[hidden]`关系可以完成这项工作：

```
@startuml  
class Bob  
class Alice  
class Dan  
class Foo
class Bar
class Foobar

Bob -[hidden] Alice
Bar -[hidden] Foobar
@enduml 
```

[![http://www.plantuml.com/plantuml/png/Iyv9B2vMSCfFKb3WIWQp7NCoarFXF9V4F3ZRBJyVod9AB4A89G4vN20JTACpCbDIKlDY8MPm0LKXYK5K0W00](../Images/0b0faa43b67d842fe3a73b6ed134a756.png)](https://i.stack.imgur.com/FOgPx.png)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2019-04-21T02:10:11.803

更新 2019 年 8 月 8 日

从 Rotsiser 的评论中，通过将改变行的长度与 together 关键字相结合，它可以对齐元素

```
@startuml
class A
A ..> B
C ---> B
D ...> B
together {
    class E
    class F
    class G
}
E ----> B
@enduml 
```

[![在此处输入图像描述](../Images/779e061e49cb2fe325b85ea701b924af.png)](https://i.stack.imgur.com/gR498.png)

* * *

过时的

您可以通过更改行字符的数量来对齐元素，例如“-”、“.”等。

```
@startuml
class A
A ..> B
C ---> B
D ...> B
E ----> B
F ----> B
G ----> B
@enduml 
```

[![在此处输入图像描述](../Images/3817060643e84fd6aeae10ca55638cad.png)](https://www.plantuml.com/plantuml/png/SoWkIImgAStDuKhEIImkLd3aSbJGqxDJSE9oLj3LrGKnN802O15Ne0X4o0tESeUp75BpKe3c0000)

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-07-19T19:58:37.037

不，没有办法做到这一点，抱歉 :( PlantUML 背后的想法是你不应该太在意布局渲染。

实际上，PlantUML 的早期版本使用对齐类，但这是一个问题：当有许多不相关的类时，图表往往非常大而且非常薄。所以添加了一个补丁来在一个正方形中组织课程。

你想在你的图中有多少个类？当然，可以禁用例如 3 到 5 个班级的组织补丁。您可以[在论坛](http://sourceforge.net/apps/phpbb/plantuml/viewforum.php?f=1)上发布建议，看看其他用户对此有何看法。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2019-11-04T15:47:57.863

这是一个解决方案。

文档： [“也可以通过在箭头内添加左、右、上或下关键字来更改箭头方向：”](http://plantuml.com/class-diagram)

```
@startuml
foo -left-> dummyLeft 
foo -right-> dummyRight 
foo -up-> dummyUp 
foo -down-> dummyDown
@enduml 
```

[![在此处输入图像描述](../Images/f8bf8298d9764254dbec5244095debd9.png)](https://i.stack.imgur.com/ZYYWE.png)

对于你的问题：

```
@startuml
class Bob
class Alice
class Dan
Alice -left[hidden]-> Bob
Alice -right[hidden]-> Dan 
@enduml 
```

[![在此处输入图像描述](../Images/eec9b62c2090df5fcfb79eb610b3d3a8.png)](https://i.stack.imgur.com/RnV7K.png)

它也可能有用：

```
@startuml
class Bob
class Alice
class Dan
Bob -right-|> Alice
Alice -right-> Dan
interface Friend
Dan -up..> Friend
interface Person
Friend -left-> Person
interface Object
Person -down-> Object
interface Native
Object -right-> Native
@enduml 
```

[![在此处输入图像描述](../Images/2ca5037d14f0664341677251d10bd4c1.png)](https://i.stack.imgur.com/UL41o.png)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2018-12-22T05:54:34.733

更简洁的方法是将它们放在一个隐藏的包中，这更符合逻辑。

```
@startuml

skinparam shadowing false
skinparam package<<Layout>> {
  borderColor Transparent
  backgroundColor Transparent
  fontColor Transparent
  stereotypeFontColor Transparent
}

package x <<Layout>>{ 
    class A
    class B
} 
A .. D
B .. C
C .. D

A1 .. D1
B1 .. C1
C1 .. D1

@end 
```

[![在此处输入图像描述](../Images/cafe97a79bdd9fbc8966fa9a98546767.png)](https://i.stack.imgur.com/SdsWk.png)

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2019-07-31T09:33:43.640

你不需要 a `hidden package`，使用`together`关键字：

```
together {
class A
class B
} 
```

# android - Android：检测应用程序何时完成安装

> ID：11557435
> 
> 赞同：1
> 
> 时间：2012-07-19T09:05:46.997
> 
> 标签：android, installation

我想检测android中的应用程序何时完成安装而不使用广播接收器。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T09:07:26.887

您也许可以改为读取日志，但这需要“坏”权限，从 API 16 (jelly bean) 开始不再支持该权限。

# android - Android 和 tabactivity

> ID：11557440
> 
> 赞同：1
> 
> 时间：2012-07-19T09:06:11.487
> 
> 标签：android, tabs

我有以下示例：

当我单击 Tab2 时，活动不适合在 android 屏幕的开头和直到 Tabs 行之间。为什么？我该怎么做才能尝试适应屏幕？

```
Main.java

public class Tabs_androidActivity extends ActivityGroup {
    public TabHost mTabHost;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    TabHost tabHost=(TabHost)findViewById(R.id.tabHost);
    tabHost.setup(this.getLocalActivityManager());

    TabSpec spec1=tabHost.newTabSpec("Tab 1");
    spec1.setContent(R.id.tab1);
    spec1.setIndicator("Tab 1");

    TabSpec spec2=tabHost.newTabSpec("Tab 2");
    spec2.setIndicator("Tab 2");
    spec2.setContent(new Intent(this, Tab2.class));

    TabSpec spec3=tabHost.newTabSpec("Tab 3");
    spec3.setIndicator("Tab 3");
    spec3.setContent(R.id.tab3);

    tabHost.addTab(spec1);
    tabHost.addTab(spec2);
    tabHost.addTab(spec3);

    tabHost.setCurrentTab(0);

    } 
```

}

```
Tab2.java
public class Tab2 extends  Activity {

    /** Called when the activity is first created. */ 

    TextView call;
@Override 

 public void onCreate(Bundle savedInstanceState) { 

    super.onCreate(savedInstanceState); 

    setContentView(R.layout.logs);
  ///....

}
} 
```

和 main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/tabHost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical"
         >

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true" />

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_alignParentTop="true" >

            <LinearLayout
                android:id="@+id/tab1"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical" >

            </LinearLayout>

            <LinearLayout
                android:id="@+id/tab2"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical" >

            </LinearLayout>

            <LinearLayout
                android:id="@+id/tab3"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical" >

            </LinearLayout>

        </FrameLayout>
    </RelativeLayout>

</TabHost> 
```

日志.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/RelativeLayout01"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <TextView
        android:id="@+id/call"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true" >
    </TextView>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T09:19:48.747

主.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical"
         >

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" 
            android:layout_marginTop="60dp"/>
       <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:padding="5dp"/>
    </RelativeLayout>

</TabHost> 
```

您的标签活动：

```
public class TabActivity extends android.app.TabActivity{
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.tab_layout);
//  Resources res=getResources();
    TabHost tabHost=getTabHost();
    TabHost.TabSpec spec;
    Intent intent;

    intent=new Intent().setClass(this, Tab1Activity.class);
    spec=tabHost.newTabSpec("tab1").setIndicator(yourimageID).setContent(intent);
    tabHost.addTab(spec);

    intent=new Intent().setClass(this, Tab2Activity.class);
    spec=tabHost.newTabSpec("tab2").setIndicator(yourimageID).setContent(intent);
    tabHost.addTab(spec);

    intent=new Intent().setClass(this, Tab3Activity.class);
    spec=tabHost.newTabSpec("tab3").setIndicator(yourimageID).setContent(intent);
    tabHost.addTab(spec);

    tabHost.setCurrentTab(0);
    }
} 
```

# iphone - iOS：在 Apple 商店中更改 App 的最低 SDK 版本

> ID：11557441
> 
> 赞同：2
> 
> 时间：2012-07-19T09:06:14.517
> 
> 标签：iphone, ios5, sdk, app-store, ios5.1

我在 App Store 中发布了一个目标平台为 5.1 的应用程序。该应用程序也是使用 SDK 5.1 开发的。我的客户打电话给我说这是废话，因为越狱手机还无法下载该应用程序 - 因为目前没有 5.1 的越狱版本。

我需要做什么？我来自 Android - 因此我想真正确定在应用应用更新时我在做什么，以确保它也适用于 5.0 用户。

我还使用了一个库项目——它也使用了 SDK 5.1，如下面的屏幕截图所示。

![我的应用 SDK](../Images/bb447d7088560abab8e1f39b96a98219.png)

如果有一些说明如何减少应用程序所需的版本，以及在我执行此操作时我的代码是否出现兼容性问题/问题，我会非常高兴。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T09:11:40.533

如镜像所显示，您应该更改部署目标，在目标的摘要选项卡中：

![设置部署目标](../Images/d051012f39c3d8c60b910063190de2f5.png)

并打电话给你的客户，告诉他 5.1 已经越狱了；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T09:13:24.257

发布应用程序版本 1.1，将**目标操作系统部署为 5.0**或您想要包含的任何其他版本......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-06T07:27:22.887

刚刚在研究另一个问题时发现了这个，所以我确信这已经被处理了，但这是我的 0.02 美元，八年后......

您向 App Store 提供了一个工作应用程序。App Store 上的所有应用程序都保证可以在*未*越狱的兼容 iPhone 上运行。

如果您的用户正在使用他的 iPhone 做未经批准的事情，那么这并不是您真正关心的问题。有很多大牌应用程序与您的问题相同：人们无法使用最新版本，因为尚未越狱。他们不得不等到这样的越狱结束。这就是您使用越狱所承担的风险。

这里的不同之处在于，如果 FaceBook 或 WhatsApp 或任何大牌应用程序将其目标 SDK 更改为尚未越狱的 iOS 版本，用户就无法通过电话向扎克伯格投诉或威胁。你，作为一个独立的开发者，接到了电话。

这是一个平衡的行为。您想使用 iOS 版本的最新、最强大的功能，但现有用户可能没有最新、最强大的操作系统。因此，您必须决定什么更重要：新功能或支持现有用户。

# javascript - Extjs hasone 关联

> ID：11557444
> 
> 赞同：3
> 
> 时间：2012-07-19T09:06:22.147
> 
> 标签：javascript, model-view-controller, extjs, model, associations

我有 Person 模型，它包含 id、first_name、last_name 等和**merital_id**字段。我也有 Merital 模型只包含 2 个字段：id 和 title。服务器响应 JSON 如下：

```
{
    success: true,
    items: [
        {
            "id":"17",
            "last_name":"Smith",
            "first_name":"John",
            ...
            "marital_id":1,
            "marital": {
                "id":1,
                "title":"Female"
            }
        },
        ...
    ]
} 
```

那么如何将我的模型与关联联系起来呢？我仍然可以在我的 column.renderer 中使用 record.raw.merital.title，但我不能在 {last_name} {first_name} ({merital.title}) 等模板中使用此类字段。我需要使用什么关联之王，我尝试了 belongsTo，但是当我尝试使用 record.getMarital() 时出现错误“记录中没有这样的方法”。

我使用 extjs 4

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-19T17:21:53.597

您应该使用 ExtJS 模型和关联，尤其是 HasOne 关联。

文档：

[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.association.HasOne](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.association.HasOne)

例子：

[http://jsfiddle.net/el_chief/yrTVn/2/](http://jsfiddle.net/el_chief/yrTVn/2/)

```
Ext.define('Person', {
    extend: 'Ext.data.Model',
    fields: [
        'id',
        'first_name',
        'last_name'
        ],

    hasOne: [
        {
        name: 'marital',
        model: 'Marital',
        associationKey: 'marital' // <- this is the same as what is in the JSON response
        }
    ],

    proxy: {
        type: 'ajax',
        url: 'whatever',
        reader: {
            type: 'json',
            root: 'items' // <- same as in the JSON response
        }
    }
}); 
```

# java-native-interface - 具有多个参数的 JNI 方法？

> ID：11557454
> 
> 赞同：0
> 
> 时间：2012-07-19T09:06:49.113
> 
> 标签：java-native-interface, jniwrapper, jnienv

我是 JNI 的新手，我想将三个整数传递给下面的函数

```
void pauseEffectJNI(unsigned int nSoundId)
    {
        // void pauseEffect(int)

        JniMethodInfo methodInfo;

        if (! getStaticMethodInfo(methodInfo, "pauseEffect", "(I)V"))
        {
            return ;
        }

        methodInfo.env->CallStaticVoidMethod(methodInfo.classID, methodInfo.methodID, (int)nSoundId);
        methodInfo.env->DeleteLocalRef(methodInfo.classID);
    } 
```

如果我错了请纠正我

如果 (!getStaticMethodInfo(methodInfo, "pauseEffect", "(I)V"))

(I;I;I)V 或只是 (III)V

如果我的函数是 void pauseEffectJNI(unsigned int nSoundId, unsigned int number1, unsigned int number2) ??

基本上我想知道如果我想通过多个 Integer 怎么办

感谢您的帮助...这是我制作的功能...如果我错了请纠正我

```
 void pauseEffectJNI(unsigned int nSoundId , unsigned int number)
        {
            // void pauseEffect(int)

            JniMethodInfo methodInfo;

            if (! getStaticMethodInfo(methodInfo, "pauseEffect", "(III)V"))
            {
                return ;
            }

            methodInfo.env->CallStaticVoidMethod(methodInfo.classID, methodInfo.methodID, (int)nSoundId,(int) number);
            methodInfo.env->DeleteLocalRef(methodInfo.classID);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T12:33:56.070

不要试图手动找出 JNI 方法签名，因为“javap -s”会以 100% 的可靠性告诉您正确的答案。使用工具。

# hudson - 工件、指纹识别和电子邮件通知与相互依赖的工作有何关联？

> ID：11557457
> 
> 赞同：0
> 
> 时间：2012-07-19T09:06:50.993
> 
> 标签：hudson, jenkins, hudson-plugins, jenkins-plugins

我有两个相互依赖的工作，所以我的目的是在工作 B 完成后向工作 A 的提交者发送电子邮件通知。为了发送通知，我得到了回复，比如我需要在相关作业之间进行指纹识别。

所以我的问题是指纹，我是否需要存档工件，我有指纹那个工件，或者我可以指纹检查两个作业之间的依赖关系所需的任何文件？

我如何根据工作 B（成功/失败）向承诺工作 A 的人发送电子邮件通知？

请有人详细解释一下，因为我是詹金斯的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T09:22:46.920

是的，您需要存档工件并对其进行指纹识别，以便在您的作业之间创建依赖链。这样，带有指纹项目“some.file”的 Job A build #256 将链接到 Job B build #1623，并且具有与 item “some.file”相同的指纹 id。

为了在作业 B 失败时发送电子邮件通知，您需要设置[提升的构建](http://wiki.jenkins-ci.org/display/JENKINS/Promoted+Builds+Plugin)。升级构建允许您在下游项目成功、中断、失败等时定义操作。例如，通过发送电子邮件。

# javascript - Node.js：crypto.pbkdf2 密码为十六进制

> ID：11557467
> 
> 赞同：5
> 
> 时间：2012-07-19T09:07:41.610
> 
> 标签：javascript, node.js, encoding, cryptography

我目前使用以下设置来注册新用户：

```
// creates a new user
app.post('/users', function(req, res) {
    // create new user
    var user = new User();
    // assign post
    user.username = req.body.username;
    user.email = req.body.email;

    crypto.randomBytes(32, function(err, buf) {
        if (err) throw err;
        user.salt = buf.toString('hex');
        crypto.pbkdf2(req.body.password, user.salt, 25000, 512, function(err, encodedPassword) {
            if (err) throw err;
            user.password = (encodedPassword.toString('hex')); // this line
            user.save(function(err, user) {
                if (!err) return res.send(err, 500);
                return res.json(user);
            });
        }.bind(this));
    });
}); 
```

仔细看看这条线：

```
user.password = (encodedPassword.toString('hex')); 
```

这应该将密码字符串（看起来像二进制）编码为十六进制字符串。由于某种原因，这不起作用。

为什么不？

**旁白**：盐和密码存储推荐什么编码（十六进制、二进制、base64）？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-28T05:08:42.367

看来，如果它已经是一个字符串，则 toString('hex') 将不起作用。

我所做的是类似的`Buffer(encodedPassword, 'binary').toString('hex')`。

# dynamics-ax-2009 - 表 = 表与表。数据（表）

> ID：11557470
> 
> 赞同：7
> 
> 时间：2012-07-19T09:08:01.627
> 
> 标签：dynamics-ax-2009, x++, axapta

下面这两种说法有什么区别？

```
newTable = orginalTable 
```

或者

```
newTable.data(originalTable) 
```

我怀疑 .data() 方法有性能优势，因为它在标准 AX 中更常用。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-19T13:01:54.097

试试这个：

```
newTable = originalTable;
info(strfmt('%1 %2', newTable.recId, originalTable.recId);

newTable.data(originalTable);
newTable.insert();
info(strfmt('%1 %2', newTable.recId, originalTable.recId); 
```

您会看到第一条语句只是创建了另一个指向现有记录的指针。第二个创建现有记录的新副本。

# node.js - 如何使用 node.js / mongodb 在 HTML 中显示任意的无模式数据

> ID：11557471
> 
> 赞同：3
> 
> 时间：2012-07-19T09:08:02.750
> 
> 标签：node.js, mongodb, express, pug, mongoskin

我正在使用 mongodb 将应用程序错误日志存储为 json 文档。我希望能够将错误日志格式化为 HTML，而不是将纯 json 返回到浏览器。日志是无模式的——它们可以随时更改，所以尝试这样做是没有用的（在 Jade 中）：

```
 - var items = jsonResults

    - each item in items
        h3 Server alias: #{item.ServerAlias}
        p UUID: #{item.UUID}
        p Stack trace: #{item.StackTrace}
            h3 Session: #{item.Session}
            p URL token: #{item.Session.UrlToken}
            p Session messages: #{item.Session.SessionMessages} 
```

因为我不知道 JSON 结构中实际会出现什么。不过，我想要的肯定是可能的？我正在阅读的所有内容都表明该架构不是由数据库强制执行的，但是您的视图代码无论如何都会概述您的架构 - 但是我们有数百个可能的字段可以随时删除或添加，因此管理视图这种方式是相当难以管理的。

我错过了什么？我是否对技术做出了错误的假设？走错路了？

* * *

编辑了以下评论的额外信息：

json 文档看起来像这样

```
{
   "ServerAlias":"GBIZ-WEB",
   "Session":{
      "urltoken":"CFID=10989&CFTOKEN=f07fe950-53926E3B-F33A-093D-3FCEFB&jsessionid=84303d29a229d1",
      "captcha":{

      },
      "sessionmessages":{

      },
      "sessionid":"84197a667053f63433672873j377e7d379101"
   },
   "UUID":"53934LBB-DB8F-79T6-C03937JD84HB864A338",
   "Template":"\/home\/vagrant\/dev\/websites\/g-bis\/code\/webroot\/page\/home\/home.cfm, line 3",
   "Error":{
      "GeneratedContent":"",
      "Mailto":"",
      "RootCause":{
         "Message":"Unknown tag: cfincflude.",
         "tagName":"cfincflude",
         "TagContext":[
            {
               "RAW_TRACE":"\tat cfhome2ecfm1296628853.runPage(\/home\/vagrant\/dev\/websites\/nig-bis\/code\/webroot\/page\/home\/home.cfm:3)",
               "ID":"CFINCLUDE",
               "TEMPLATE":"\/home\/vagrant\/dev\/websites\/nig-bis\/code\/webroot\/page\/home\/home.cfm",
               "LINE":3,
               "TYPE":"CFML",
               "COLUMN":0
            },
            {
               "RAW_TRACE":"\tat cfdisplay2ecfm1093821753.runPage(\/home\/vagrant\/dev\/websites\/nig-bis\/code\/webroot\/page\/display.cfm:6)",
               "ID":"CFINCLUDE",
               "TEMPLATE":"\/home\/vagrant\/dev\/websites\/nig-bis\/code\/webroot\/page\/display.cfm",
               "LINE":6,
               "TYPE":"CFML",
               "COLUMN":0
            }
         ]
       }
   } 
```

...等，但可能会根据生成日志的单个项目配置为触发而改变。

我最终想要的是一个格式化的 HTML 页面，其中包含下面列出的每个父级和子级的标题，并直接遍历数据结构。上面的 Jade 示例实际上是我们需要输出的内容，但没有在视图中对其进行硬编码。

Mike 在评论中对问题的分析是，从一堆没有太多共同点的集合中创建一个类似表格的结构，这一点非常成功。数据是相关的，但仅在单个文档中 - 因此将模式硬编码到任何内容中几乎是不可能的，因为它需要您首先知道数据结构的样子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T00:17:40.960

基本思想是@Gates VP 所描述的。我使用[underscore.js](http://underscorejs.org)遍历数组/对象。

```
function formatLog(obj){
  var log = "";
  _.each(obj, function(val, key){ 
    if(typeof(val) === "object" || typeof(val) === "array"){
      // if we have a new list
      log += "<ul>";
      log += formatLog(val);
      log += "</ul>";
    }
    else{
      // if we are at an endpoint
      log += "<li>";
      log += (key + ": " + val);
      log += "</li>";
    }
  });
  return log;
} 
```

如果你调用`formatLog()`你给它的示例数据返回

*   服务器别名：GBIZ-WEB

*   urltoken：CFID=10989&CFTOKEN=f07fe950-53926E3B-F33A-093D-3FCEFB&jsessionid=84303d29a229d1

*   sessionid: 84197a667053f63433672873j377e7d379101

*   UUID：53934LBB-DB8F-79T6-C03937JD84HB864A338
*   模板：/home/vagrant/dev/websites/g-bis/code/webroot/page/home/home.cfm，第 3 行

*   生成内容：
*   邮寄：

*   消息：未知标签：cfincflude。
*   标记名称：cfincflude

*   RAW_TRACE：在 cfhome2ecfm1296628853.runPage(/home/vagrant/dev/websites/nig-bis/code/webroot/page/home/home.cfm:3)
*   编号：CFINCLUDE
*   模板：/home/vagrant/dev/websites/nig-bis/code/webroot/page/home/home.cfm
*   线路：3
*   类型：CFML
*   栏目：0

*   RAW_TRACE：在 cfdisplay2ecfm1093821753.runPage(/home/vagrant/dev/websites/nig-bis/code/webroot/page/display.cfm:6)
*   编号：CFINCLUDE
*   模板：/home/vagrant/dev/websites/nig-bis/code/webroot/page/display.cfm
*   线路：6
*   类型：CFML
*   栏目：0

然后如何格式化它取决于您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T17:38:23.790

这基本上是一个递归`for`循环。

要使用 Jade 执行此操作，您将需要使用 mixins，以便您可以通过调用具有更深缩进级别的 mixin 来打印嵌套对象。

请注意，这整个事情有点难看，因为您无法保证字段的顺序，并且您可能必须实现一些逻辑来区分数组上的循环与 JSON 对象上的循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T13:07:15.433

你可以试试 util.inspect。在您的模板中：

```
pre
  = util.inspect(jsonResults) 
```

# blogger - 为 Blogger 添加订阅和下载功能

> ID：11557473
> 
> 赞同：1
> 
> 时间：2012-07-19T09:08:07.837
> 
> 标签：blogger, blogspot

我有我的博客[www.webspeaks.in](http://www.webspeaks.in)在博客上（不幸的是我认为）。我提供文件供我的读者下载。我希望**只有**订阅我博客的**访问者才能下载文件。**是否有任何小部件或工具可用于此功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T09:40:10.033

我认为 Blogger 不支持这一点，但作为一种解决方法，您可以尝试：

> 使用具有安全性的谷歌驱动器在线上传文档作为“只有具有链接的人”，并在需要访问者订阅的博客部分中显示链接。他们可能仍会将链接通过电子邮件发送给他们的朋友，但对您来说可能就足够了。

# java - 正则表达式匹配rubular，而不是java

> ID：11557476
> 
> 赞同：3
> 
> 时间：2012-07-19T09:08:13.013
> 
> 标签：java, regex

我在使用 java.util.regex 的模式匹配器让一些正则表达式工作时遇到问题。我有以下表达式：

```
(?=^.{1,6}$)(?=^\d{1,5}(,\d{1,3})?$) 
```

我针对以下字符串测试匹配项：

```
12345  (match OK)
123456 (no match)
123,12 (match OK) 
```

当我在以下站点上对其进行测试时，它似乎运行良好：

[http://rubular.com](http://rubular.com)，好的

[http://www.regextester.com/](http://www.regextester.com/)，好的

[http://myregextester.com/index.php](http://myregextester.com/index.php)，好的

但是我似乎无法让它与我的 java 程序中的任何内容相匹配。此外，在线 java 正则表达式测试器给出相同的结果（不匹配）：

[http://www.regexplanet.com/advanced/java/index.html](http://www.regexplanet.com/advanced/java/index.html) 没有匹配项？？？

我不知道为什么我不能让它在 java 中工作，但似乎在很多其他正则表达式引擎中工作？

**编辑：**这是非工作代码。原谅错字，我不能从我的代码 PC 复制/粘贴到 stackoverflow。

```
String inputStr = "12345";
String pattern = "(?=^.{1,6}$)(?=^\\d{1,5}(,\\d{1,3})?$)";
Pattern regexp = Pattern.compile(pattern);
System.out.println("Matches? "+regexp.matcher(inputStr).matches());
System.out.println(inputStr.matches(pattern)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T09:19:04.813

首先，您需要转义`\`模式中的 s 。然后，如果您使用`matches()`，Java 会尝试匹配整个字符串，因此它将返回 false ，除非您删除第二个前瞻或`.*`在末尾添加 a 。

这会在 Java 中产生正确的输出：

```
 String regex = "(?=^.{1,6}$)^\\d{1,5}(,\\d{1,3})?$";
    System.out.println("12345".matches(regex)); 
    System.out.println("123456".matches(regex)); 
    System.out.println("123,12".matches(regex)); 
```

这个表达式也是如此：

```
 String regex = "(?=^.{1,6}$)(?=^\\d{1,5}(,\\d{1,3})?$).*"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T09:37:38.787

它工作正常。您可能正在使用该`matches()`方法，该方法期望正则表达式匹配*并使用*整个字符串。您的正则表达式不会消耗任何东西，因为它只是几个前瞻。在 RegexPlanet 网站上，查看该`find()`列，您将看到您期望的结果。在您的 Java 代码中，您必须创建一个 Matcher 对象，以便您可以使用它的`find()`方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T09:26:38.060

工具之间的区别在于，在一种情况下它会尝试在另一种情况下找到匹配项，它会尝试匹配整个字符串。如果您在 java 中使用 string.matches(regex)，这将为您的所有输入返回 false，因为您没有将整个字符串与您的前瞻表达式匹配。要么`.*`按照 Keppil 的建议附加 a，要么使用 Matcher 类：

```
Pattern p = Pattern.compile(regex);
Matcher matcher = p.matcher(text);
if(matcher.find()) {
    System.out.println("Match found");
} 
```

# build - Jenkins - 如何限制对工作区的访问？

> ID：11557478
> 
> 赞同：2
> 
> 时间：2012-07-19T09:08:15.260
> 
> 标签：build, continuous-integration, hudson, jenkins

使用我的默认安装，任何匿名用户都可以访问工作区。我只需要限制对经过身份验证的用户的访问。这该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T09:14:59.973

在 jenkins 中，转到管理 Jenkins -> 配置系统。在访问控制 -> 授权字段中，您可以启用**基于矩阵的安全性**，它允许您控制哪些用户可以访问作业工作区。

# c# - WPF GridViewColumn DisplayMemberBinding 绑定到一个对象 => 空字符串。为什么/

> ID：11557481
> 
> 赞同：0
> 
> 时间：2012-07-19T09:08:22.557
> 
> 标签：c#, wpf, gridview, user-interface

我有一个`GridView`绑定到作为对象的类的属性的列。绑定到字符串和整数的其他列显示良好。但是这个特定的列总是空的。

如何解决这个问题（除了创建 DataTemplate 和转换器）？

为什么 WPF 不直接调用`.ToString()`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T11:31:27.757

如果您的源属性不是字符串类型，您可以使用`StringFormat`markupExtension 仅通过 xaml 将其转换为字符串格式。如果您不知道 StringFormat 以供参考，请参阅此链接 - [xaml 中的字符串格式](http://msdn.microsoft.com/en-us/library/system.windows.data.bindingbase.stringformat.aspx "字符串格式")

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-30T12:12:37.467

我以前遇到过，列名“/”如果你使用（例如日期/时间） GridView 的列是空的。问题可能不是字符串格式。当您更改列名时，该问题将得到解决。请试试。

# android - 在android的滚动问题上需要帮助

> ID：11557484
> 
> 赞同：0
> 
> 时间：2012-07-19T09:08:35.277
> 
> 标签：android, listview

我正在滚动列表视图。我想加载列表视图滚动的数据，我这样做：

```
 public void onScroll(AbsListView view, int firstVisibleItem,
            int visibleItemCount, int totalItemCount) {
        if (loading) {
            if (totalItemCount > previousTotal) {
                loading = false;
                previousTotal = totalItemCount;
            }
        } else {
            if ((totalItemCount - visibleItemCount) <= (firstVisibleItem + threshold)) {
                new loadMoreListView().execute();

                int currentPosition = lv.getFirstVisiblePosition();
                View v = lv.getChildAt(0);
                int distFromTop = (v == null) ? 0 : v.getTop();
                lv.setSelectionFromTop(currentPosition, distFromTop);
            }
        }
    } 
```

loadMoreListView 是使用 AsynTask 加载数据的类。我的问题是当我到达第 10 个位置时，listview 开始按预期加载数据，但它冻结了整个 listview。在加载数据之前，我无法与 listview 交互。是否有任何解决方案可以同时加载数据并与列表视图交互。请不要推荐 Endless Adapter 或 Prime。我已经用那个试过了。非常感谢任何帮助。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T09:40:52.100

```
public class LListviewsActivity extends Activity {
 ListView myList;
 Button getChoice;
 String[] listContent = {
        "January",
        "February",
         "March",
        "April",
        "May",
        "June",
        "July",
        "August",
        "September",
         "October",
        "November",
        "December"
};

/** Called when the activity is first created. */
 @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    myList = (ListView)findViewById(R.id.list);
     getChoice = (Button)findViewById(R.id.getchoice);
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
           android.R.layout.simple_list_item_multiple_choice,listContent);
    myList.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);
    myList.setAdapter(adapter);
    getChoice.setOnClickListener(new Button.OnClickListener(){
        public void onClick(View v) {
           // TODO Auto-generated method stub
                       String selected = "";
              int cntChoice = myList.getCount();
              SparseBooleanArray sparseBooleanArray =              
     myList.getCheckedItemPositions();
           for(int i = 0; i < cntChoice; i++){
               if(sparseBooleanArray.get(i)) {
                   selected +=                      myList.getItemAtPosition(i).toString() + "\n";
               }
           } Toast.makeText(LListviewsActivity.this, selected          ,Toast.LENGTH_LONG).show();
         }
      });
  }
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-19T08:45:14.300

试试这个，它工作

```
list_event.setOnScrollListener(new AbsListView.OnScrollListener() {

        @Override
        public void onScroll(AbsListView view, int firstVisibleItem,
                int visibleItemCount, int totalItemCount) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onScrollStateChanged(AbsListView view, int scrollState) {
            if (scrollState != 0)
                eventAdapter.isScrollingEvent = true;
            else {
                eventAdapter.isScrollingEvent = false;
                eventAdapter.notifyDataSetChanged();
            }
        }
    }); 
```

写 boolean isScrollingEvent=true
并且您的适配器类似于 eventAdapter

检查这个链接它是非常有用的 [列表视图滚动不平滑](https://stackoverflow.com/questions/20054465/list-view-scroll-not-smooth/22558955#22558955)

# scala - 如何获取不可变库子类的对象（最佳实践）？

> ID：11557488
> 
> 赞同：2
> 
> 时间：2012-07-19T09:08:40.100
> 
> 标签：scala, immutability

假设，我们有一个带有类的不可变库`ImmutableFoo`：

```
scala> class ImmutableFoo(x: Int) {
         def add(y: Int): ImmutableFoo = new ImmutableFoo(x + y)
       }
defined class ImmutableFoo 
```

当然，这个类的一个对象不会通过添加`y`to 来改变它的状态`x`，而是创建一个新的类对象。到目前为止，一切都很好。

现在我们要创建一个不可变的子类。第一次尝试：

```
scala> class subImmutableFoo(x: Int) extends ImmutableFoo(x)
defined class subImmutableFoo 
```

但是当我们添加一个数字时，我们没有得到子类的对象：

```
scala> (new subImmutableFoo(5)).add(6)
res0: ImmutableFoo = ImmutableFoo@1ee69d3 
```

解决此问题的最佳实践方法是什么？

一种解决方案可能是覆盖子类中的方法并创建子类的对象。在这种情况下，这个解决方案很简单，但是当方法更大时，可能会导致大量的双重代码（基类 + 子类）。当我们创建多个子类并覆盖该方法时，甚至更多的代码是重复的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T10:36:07.903

把它当作一个`MyType`问题，你可以这样做：

```
class ImmutableFoo[T <: ImmutableFoo[T] : Manifest](x: Int) {
  def add(y: Int): T = implicitly[Manifest[T]].erasure.getDeclaredConstructor(classOf[Int]).newInstance((x+y).asInstanceOf[Object]).asInstanceOf[T]
}

class SubImmutableFoo(x: Int) extends ImmutableFoo[SubImmutableFoo](x) 

new SubImmutableFoo(2).add(4) 
```

您可以为操作定义一个`Addable`类型类`add`。这种情况下的代码太多了，但这种模式更通用。

```
trait Addable[T] { 
  def plus(a:T, i:Int):T

  class Infix(x:T) {
    def add(i:Int):T = plus(x, i)
  }
}

class ImmutableFoo(val x:Int)  
class SubImmutableFoo(override val x:Int) extends ImmutableFoo(x)

implicit object AddableFoo extends Addable[ImmutableFoo]{
  override def plus(a:ImmutableFoo, i:Int) = new ImmutableFoo(a.x+i)
}

implicit object AddableSub extends Addable[SubImmutableFoo]{
  override def plus(a:SubImmutableFoo, i:Int) = new SubImmutableFoo(a.x+i)
}

implicit def infix[T: Addable](x:T) = {
  val addable = implicitly[Addable[T]]
  new addable.Infix(x) 
}

new ImmutableFoo(3) add 4  // ImmutableFoo
new SubImmutableFoo(2) add 1 // SubImmutableFoo 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T11:07:38.623

在“MyType”模式的变体中，您可以执行以下不使用清单或反射的操作：

```
trait Immu[+Repr <: Immu[Repr]] {
   def x: Int
   def add(y: Int): Repr = newInstance(x + y)
   protected def newInstance(x: Int): Repr
}

class Foo(val x: Int) extends Immu[Foo] {
   def show: String = "Immu(" + x + ")"
   protected def newInstance(x: Int) = new Foo(x)
}

class Bar(x0: Int) extends Foo(x0) with Immu[Bar] {
   def mul(y: Int): Bar = newInstance(x * y)
   override protected def newInstance(x: Int) = new Bar(x)
}

new Foo(3).add(4).show
new Bar(3).add(4).mul(2).show 
```

当然，反过来它假定您不改变所需的构造函数参数的数量。

# oop - 将接口对象传递给构造函数或方法

> ID：11557489
> 
> 赞同：2
> 
> 时间：2012-07-19T09:08:44.117
> 
> 标签：oop, testing, mocking

我正在编写一个测试，我必须将一个模拟传递给一个特定的方法。我想知道，通过构造函数或直接将其传递给相关方法有什么好处。或者这并不重要。

例如

**通过构造函数传递接口/模拟**

```
class User()
{
  IClock clock;

  User(IClock clock) {this.clock = clock;}

  User GetUser(){ ..}
  UpdateUser(User user) {
     ... 
     this.clock.Now();
     ...
  }
} 
```

对比

**将接口/模拟传递给方法**

```
class User()
{
  User GetUser(){ ..}
  UpdateUser(IClock clock, User user) {
     ... 
     clock.Now();
     ...
  }
} 
```

谢谢！

**编辑**

在这种情况下，IClock 将包装 DateTime。我这样做是为了可测试性。如此有效，我将有一个覆盖，它将在其内部构造 IClock。

例如。对于方法案例：

```
UpdateUser(User user) {
  UpdateUser(new Clock(), user);
} 
```

Clock 将封装 DateTime。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T10:27:25.873

在这种情况下，IClock 是一个隐藏的单例 - 它从底层操作系统生成当前日期时间。如果您想编写可靠的验收测试，您将需要在这些测试中剔除日期时间提供程序。

因此，您需要将这种依赖关系一直暴露到模块边界，然后将公共日期时间源注入您的模块（甚至可能是整个系统）。在编写验收测试时，您有时会存根此“IClock”日期时间源。

这将允许您回答以下问题：

*   我的系统在闰日工作吗？
*   我的系统在午夜工作吗？
*   我的系统在除夕夜工作吗？

在构造函数签名或方法签名中具有 IClock 依赖项将向用户清楚地记录您的方法或对象是日期时间相关的。在尝试理解对象的行为时，对日期时间的依赖通常至关重要，因此应予以重视。通常避免任何隐藏这种依赖关系的东西（例如在重载的方法定义中提供默认的日期时间源），因为这会阻止您编写像我上面描述的那样的验收测试。

在将依赖项传递给构造函数或方法之间进行选择通常取决于方法对系统其余部分的责任。这些方法形成了对象将用于与运行系统中的对等方通信的公共协议，而构造函数参数是此特定实现执行其角色所需的依赖项。

问自己以下问题：

*   这种方法的责任是否必然需要了解日期时间？
*   还是与此特定对象中方法的特定实现有关，这意味着它需要日期时间？
*   方法的调用者负责操作该对象的日期时间视图是否合理，或者这是模块配置的责任？
*   如果我将此对象与同一接口的另一个实现交换，那么该实现不需要此方法的日期时间是否合理？
*   您的对象中有多少方法需要日期时间？他们需要相同的日期时间视图吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T09:19:09.707

这取决于谁知道`IClock`：它在`User`构造的地方可用还是在`UpdateUser`被调用的地方可用？

如果将它传递给构造函数，则可以传递`User`对象并且任何人都可以调用`UpdateUser`，但如果将其传递给`UpdateUser`，则使用该方法的任何人都必须持有`IClock`引用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T09:28:46.260

将依赖项（即`IClock`）传递给构造函数，即*构造函数注入*通常意味着这是给定类的整个对象*所需的依赖项。*将依赖传递给类的方法，即*方法注入*，只使这个特定的方法依赖于它。还有其他两种可能性：向属性注入依赖项（*属性注入*，即类对象的*可选依赖*项）和很少使用的环境上下文。

所以这更多的是你团队中代码风格的品味、设计和一致性问题。

在您的示例`IClock`中，对象不需要依赖`User`，因此方法注入更合适。

# ffmpeg - FFMpeg 图像捕获 - 连续帧

> ID：11557490
> 
> 赞同：1
> 
> 时间：2012-07-19T09:08:44.250
> 
> 标签：ffmpeg

我想从特定时间戳开始从 mpeg 视频文件中捕获连续帧。这意味着假设我有一个总时长为 2 分钟的视频。我需要捕获从时间 00:01:00 开始连续的所有帧。我还想将捕获的帧数限制为 20。如何使 ffmpeg 可执行以执行此操作

谢谢费萨尔

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T21:49:18.037

As covered in [the docs](http://ffmpeg.org/ffmpeg.html):

```
ffmpeg -ss 60 -i input.mpg -frames:v 20 frame_%d.png 
```

Will start reading from the input at sixty seconds, and will write 20 video frames to `frame_1.png`, `frame_2.png`, `frame_3.png`, etc.

The note in the docs about the accuracy of `-ss` when used to modify the input file versus the output file if a slower but more accurate timing is necessary.

# android - 增加分配给应用程序的内存

> ID：11557495
> 
> 赞同：8
> 
> 时间：2012-07-19T09:09:11.650
> 
> 标签：android, memory, bitmap

我尝试显示相机拍摄的图像并在应用程序中显示它们。当我拍摄低分辨率图像（例如 100kB 大小）时，我在切换到位图显示时没有问题，当我以高分辨率（1.5MB）拍摄它们时，应用程序会崩溃，但除外

```
 Error java.lang.OutOfMemoryError. 
```

它恰好在我的智能手机上（Samsung Galaxy SII、SIII Galaxy）在所有货架上。目前，我通过降低照片的质量和尺寸来手动解决，但随着分辨率不断提高的相机的发展，这个问题可能会更频繁地出现。是否没有永久的解决方案来增加分配给我的 Android 应用程序的内存，而无需手动干预设备和代码？

图像以位图格式存储

```
 //image creation
Uri domuri1

ContentValues cv = new ContentValues();
cv.remove("101");
domuri1 = getContentResolver().insert(Media.EXTERNAL_CONTENT _URI, cv);
File domthumb1 = new File(domuri1.toString(), fileName1);

//increment photo apparate
Intent intent = new Intent("android.media.action.IMAGE_CAPTURE");
intent.putExtra(MediaStore.EXTRA_OUTPUT, domuri1);
startActivityForResult(intent, 100);

//images save
ContentResolver cr = getContentResolver();
bitmap1 = MediaStore.Images.Media.getBitmap(cr, domuri1 );
imageView.setImageBitmap(bitmap1); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-19T09:18:21.487

普通应用程序的默认内存值为 16MB，您可以 在标签`android:largeHeap="true"`内的清单文件中使用（这可能会将内存增加到 64MB） 。`applicattion`您可以通过 [ActivityManager.getMemoryClass()](http://developer.android.com/reference/android/app/ActivityManager.html#getMemoryClass%28%29)和[ActivityManager.getLargeMemoryClass()](http://developer.android.com/reference/android/app/ActivityManager.html#getLargeMemoryClass%28%29)获取分配给您的内存值。

即使您要求`largeHeap`android 也只会在您的应用程序需要时分配更多内存。

# php - php array_diff 没有给出结果

> ID：11557496
> 
> 赞同：0
> 
> 时间：2012-07-19T09:09:16.423
> 
> 标签：php, mysql, array-difference

有人可以看看，让我知道我做错了什么......我想要实现的是，在我拥有的数据库中：

```
AGENT_REF = 1
AGENT_REF = 2
AGENT_REF = 3
AGENT_REF = 4
AGENT_REF = 5 
```

在上传的解析信息的文件中

```
$blmarArray = array($agentref);

AGENT_REF = 1
AGENT_REF = 2
AGENT_REF = 3
AGENT_REF = 5 
```

我想要发生的是从上传的文件中没有的数据库中提取 AGENT_REF，在这种情况下，AGENT_REF = 4，所以我可以从 mysql 中删除它。

```
$sql_archeck = mysql_query("SELECT `AGENT_REF` FROM `eprentals`");
$archeck = mysql_fetch_array($sql_archeck);
$sqlarArray = array($archeck);
$combyArrayDiff = array_diff($blmarArray, $sqlarArray);
print_r ($combyArrayDiff); 
```

我得到的只是数据库中的最后一个或第一个 AGENT REF，而不是数据库中不存在的那些。（在数据库中有 11 个，但上传的文件只有 8 个，所以我想删除（显示）数据库中已从上传的文件中删除的文件）

希望您能给我一些指导，了解我在哪里错了，我感谢您的时间并感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T09:14:54.717

来自php手册：

> Returns an array containing all the entries from array1 that are not present in any of the other arrays.

so insted of `array_diff($blmarArray, $sqlarArray)` you should use `array_diff($sqlarArray, $blmarArray)`

= the big array as first parameter, and the samller array as 2nd parameter

* * *

you also need to fetch all rows from the database, not just the first

```
$query = "SELECT `AGENT_REF` FROM `eprentals`";
$resource = mysql_query($query);
$sqlarArray = array();
while($row = mysql_fetch_array($sql_archeck))
{
    $sqlarArray[] = $row['AGENT_REF'];
}
$combyArrayDiff = array_diff($sqlarArray, $blmarArray);

/* debug result */
echo "<p><b>SQL list:</b> " . implode(', ', $sqlarArray) . "</p>";
echo "<p><b>Uploaded list:</b> " . implode(', ', $blmarArray) . "</p>";
echo "<p><b>Diff list:</b> " . implode(', ', $combyArrayDiff ) . "</p>"; 
```

# php - Yii 和 Magento 在同一台服务器上的单点登录

> ID：11557498
> 
> 赞同：0
> 
> 时间：2012-07-19T09:09:18.550
> 
> 标签：php, magento, single-sign-on

我有两个使用**yii**和**Magento**开发的独立 php 站点，我们使用一些 API 保持用户数据同步，以维护这两个站点的相同用户名和密码。

我们将如何开发功能，用户可以登录到任何一个应用程序并自动加载到另一个应用程序中，例如如果我们登录到 gmail，它会显示登录到 google+ 和其他谷歌服务。

我读过**Single Sign On**，但知道它是如何工作的。请指导我们如何在同一台服务器上构建单点登录。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T09:11:58.383

```
$array['data'][] = $otherObject; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T09:23:21.693

```
array_push( $array['data'], new StdClass() ); 
```

...不覆盖任何内容，而是附加到数组的末尾，类似于使用：

```
$array['data'][] = new StdClass(); 
```

如果某些内容被覆盖，则其他地方一定有错误。

顺便说一句：有一个 PHP 类[`SplObjectStorage`](http://php.net/class.splobjectstorage.php)用于存储对象，可用于：

```
$array['data'] = new SplObjectStorage();
$array['data']->attach( new StdClass() ); 
```

# c# - 如何使用 Monotouch Dialog 显示 UIPickerView？

> ID：11557499
> 
> 赞同：2
> 
> 时间：2012-07-19T09:09:20.283
> 
> 标签：c#, ios, xamarin.ios, monotouch.dialog

我有一个要求，用户需要选择一个类别，然后是一个子类别。通常我会使用两个 UIPickerViews 来执行选择。您将如何使用 Monotouch Dialog 来做到这一点？我在任何地方都找不到执行此操作的任何示例或内置元素。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T13:37:28.340

您可以创建自己的自定义元素，然后呈现 UIPicker。您可以在 MonoTouch.Dialog 的源代码中了解如何构建您自己的自定义元素。

这是一个示例：

[https://github.com/migueldeicaza/MonoTouch.Dialog/blob/master/MonoTouch.Dialog/Elements.cs#L1132](https://github.com/migueldeicaza/MonoTouch.Dialog/blob/master/MonoTouch.Dialog/Elements.cs#L1132)

# iphone - Corebluetooth 中央管理器回调 didDiscoverPeripheral 两次

> ID：11557500
> 
> 赞同：10
> 
> 时间：2012-07-19T09:09:21.583
> 
> 标签：iphone, objective-c, callback, core-bluetooth, bluetooth-lowenergy

我像这样扫描我的外围设备：

```
NSDictionary *scanOptions = [NSDictionary dictionaryWithObject:[NSNumber numberWithBool:NO] 
                                                            forKey:CBCentralManagerScanOptionAllowDuplicatesKey];
        // Scan for peripherals with given UUID
        [cm scanForPeripheralsWithServices:[NSArray arrayWithObject:HeliController.serviceUUID] options:scanOptions] 
```

没问题，我找到了外围设备并能够连接到它。正如你所看到的，我给它`CBCentralManagerScanOptionAllowDuplicatesKey`不允许`bool NO`超过一个外围设备，但有时`didDiscoverPeripheral`回调会触发两次。

```
- (void) centralManager:(CBCentralManager *)central 
  didDiscoverPeripheral:(CBPeripheral *)peripheral 
  advertisementData:(NSDictionary *)advertisementData 
               RSSI:(NSNumber *)RSSI 
{        
if(!discovered){
    discovered = YES;
    NSLog(@"Discovered");

    [cm stopScan];

    [scanButton setTitle:@"Connect" forState:UIControlStateNormal];
}
else if(discovered){
    discovered = YES
    NSLog(@"Already discovered");
}
} 
```

有时我得到

```
Discovered
Already discovered 
```

作为我的控制台中的输出，并且大多数时候只`Discovered`显示消息。

在我的外围委托中，我首先发现服务，然后调用`[peripheral discoverCharacteristics`并且总是发生回调：

```
- (void) peripheral:(CBPeripheral *)peripheral didDiscoverCharacteristicsForService:(CBService *)service error:(NSError *)error{

NSLog(@"Did discover characteristic for service %@", [service.peripheral UUID]);

for(CBCharacteristic *c in [service characteristics]){
    // We never get here when peripheral is discovered twice
    if([[c UUID] isEqual:myCharacteristicUUID]){

        NSLog(@"Found characteristic");

        self.throttleCharacteristic = c;

    }
} 
```

当`didDiscoverPeripheral`出现两次时，`service`变成`nil`在这个方法中，即使`peripheral`不是（UUID，名称仍然正确）。

重新启动手机或重置网络设置可以暂时解决问题。

我真的需要解决这个问题！谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-30T23:44:10.580

设备在做广告时可能会返回额外的数据。这些可能以不同的数据包到达，在不同的时间到达。在这种情况下，第一次看到设备时首先调用 didDiscoverPeripheral，然后当附加信息可用时再次调用。

CBCentralManagerScanOptionAllowDuplicatesKey 不同。它告诉 CoreBluetooth 在设备再次发布广告时您是否要接收重复的结果。它不会阻止对同一发现序列的 didDiscoverPeripheral 多次调用；它可以防止它重复发现序列。

资料来源： http: [//lists.apple.com/archives/bluetooth-dev/2012/Apr/msg00047.html](http://lists.apple.com/archives/bluetooth-dev/2012/Apr/msg00047.html)（蓝牙开发上的苹果代表）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-20T22:26:25.223

我不认为这个参数做你认为它做的事情。通过查看它在健康温度计等 Apple 示例中的使用方式，我的理解是，打开此标志可以发现具有相同 UUID 的多个不同外围设备。例如，如果您想编写一个应用程序来查看同一个房间中的四个不同温度计并找到所有温度计，您将需要该参数，以便在找到第一个后扫描不会停止。

在他们的代码中，Apple 避免了这样的重复：

```
NSMutableArray *peripherals = [self mutableArrayValueForKey:@"thermometers"];
if( ![self.thermometers containsObject:peripheral] )
    [peripherals addObject:peripheral]; 
```

如果该设备已存在于阵列中，则不会再次添加该设备。

如果文档在这一点上更清楚，那就太好了。我承认我是根据参数在上下文中的使用方式来猜测的。

# jquery - SyntaxError: 调用 webservice 时标签和请求状态无效 0

> ID：11557501
> 
> 赞同：0
> 
> 时间：2012-07-19T09:09:26.623
> 
> 标签：jquery, ajax, web-services

我想使用 ajax jquery 访问 php web 服务这是我的代码：-

```
$.ajax({
        type: "POST",
    url:'http://localhost:8080/onestatus/webservice/login?email=kk@kk.com&password=123456',
         cache: false,
          dataType: "json",
          success: onSuccess
        });

function onSuccess(data) {
       // var data = data.d;
        var result = $.parseJSON(data);
        var arrayObject = new Array();
        for (var i = 0; i < result.user.length; i++) {
           // $('#resultLog').append('<li>' + result.user[i].user_id + '</li>');
         }
    } 
```

当我使用 dataType: "json" 然后我得到 request.status=0 注意到得到响应

当使用 dataType: "jsonp" 在 firbug 中出现错误

**SyntaxError: invalid label [Break On This Error]
{"user":[{"response":"success","user_id":"28","session_id":123456}]}**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T09:36:34.303

两种情况：

1.  URL`http://localhost:8080/onestatus/webservice/login`放置在与请求域不同的域中（注意：端口也必须匹配）：您将无法请求 JSON，它受[SOP限制](http://en.wikipedia.org/wiki/Same_origin_policy)
2.  您可以从不同的域请求[JSONP](http://en.wikipedia.org/wiki/JSONP)，但收到的响应不是 JSONP

那么你可以做什么：当 web 服务在你的控制之下时，将响应更改为正确的 JSONP。否则你什么也做不了。

# paypal - 是否有任何 Zen Cart 定期付款（使用 Paypal 网关）模块可用？

> ID：11557502
> 
> 赞同：2
> 
> 时间：2012-07-19T09:09:29.293
> 
> 标签：paypal, zen-cart

我是 zen-cart 的新手。我是 PHP 开发人员，但第一次做 zen-cart。让我们进入正题。我有一个 zen-cart 项目，它处于开发模式。该项目是针对酒厂的。我的客户希望将其付款流程作为每月的定期付款。因此，当任何酒厂注册并通过 PayPal 支付金额时，每个月都会从其 PayPal 账户中扣除一定金额。

是否有任何模块可用于定期付款？

是否有人在 PHP 中为 PayPal 循环系统编写硬代码？

先谢谢了。

维沙尔甘塔拉

# asp.net - 当用户在我的网站（asp.net、C#）中注册时，我想收到一封包含用户详细信息的电子邮件

> ID：11557509
> 
> 赞同：0
> 
> 时间：2012-07-19T09:09:54.720
> 
> 标签：asp.net, email

我已经建立了一个带有简单注册/登录表单的网站。我想要的是当用户在我的网站上注册时，一封包含该用户详细信息的电子邮件将发送到我的电子邮件地址。

下面是生成“注册”表单的一些文本框的代码：

```
 <asp:TextBox ID="Username" runat="server" CssClass="textEntry"></asp:TextBox>
    <asp:TextBox ID="Address" runat="server" CssClass="textEntry"></asp:TextBox>
    <asp:TextBox ID="Email" runat="server" CssClass="textEntry"></asp:TextBox> 
```

我希望将这些文本框的内容发送给我。

我设法使用 System.Net.Mail.SmtpClient 类从我的站点发送电子邮件，但我对它的语法感到困惑，因为我想要地址：

```
 MailAddress to = new MailAddress("user@domain.com") 
```

始终保持不变（我的），但电子邮件的内容会根据每个用户在文本框中键入的内容而改变。

我是开发新手，我正在尝试解决这个特定问题很长一段时间，所以任何指导都会对我有很大帮助。如果我不够具体，如果您需要有关我的问题的更多信息，请告诉我.

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T09:28:27.133

尝试使用以下代码：

```
var client = new System.Net.Mail.SmtpClient();
    // Create instance of message
    System.Net.Mail.MailMessage message = new System.Net.Mail.MailMessage();

    // Add receiver
    message.To.Add("emailaddress");//Here put email address to whom you want to sent the email

    // Set sender
    message.From = new System.Net.Mail.MailAddress("user@domain.com");

    // Set subject
    message.Subject = "Test";

    // Set body of message
    string body = string.Empty;
    body = "Username: " + Username.Text + "<br />Address: " + Address.Text + "<br />Email: " + Email.Text;
    message.Body = body;

    // Send the message
    client.Send(message); 
```

# html - 使用 Nokogiri 修复无效 HTML（删除无效标签）

> ID：11557510
> 
> 赞同：1
> 
> 时间：2012-07-19T09:09:55.150
> 
> 标签：html, ruby, html-parsing, nokogiri

我正在尝试使用[tidy-ext gem](https://github.com/carld/tidy)整理一些检索到的 HTML 。但是，当 HTML 完全损坏时它会失败，所以我首先尝试使用 Nokogiri 修复 HTML：

```
repaired_html = Nokogiri::HTML.parse(a.raw_html).to_html 
```

它似乎做得很好，但最近我遇到了一个示例，其中人们将 FBML 标记插入 HTML 文档，例如`<fb:like>`Nokogiri 以某种方式保留了该标记，尽管它是无效的。Tidy 然后说`Error: <fb:like> is not recognized!`这是可以理解的。

我想知道是否还有其他选项，例如*严格*或强制 Nokogiri 仅包含有效的 HTML 标记并忽略其他所有内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T09:22:00.660

您可以使用 Nokogiri 的 XML 解析器来解析 HTML，默认情况下它是严格的，但只提供一点帮助，因为它仍然会进行修复，因此 HTML/XML 稍微正确。通过调整您可以传递给解析器的标志，您可以使 Nokogiri 更加严格，因此它将拒绝返回无效文档。Nokogiri 不是消毒剂或所需标签的白名单。查看[Loofah](https://github.com/flavorjones/loofah)和[Sanitize](http://wonko.com/post/sanitize)以了解该功能。

如果您的 HTML 内容位于名为 的变量中`html`，并且您执行以下操作：

```
doc = Nokogiri::XML.parse(html) 
```

然后检查`doc.errors`是否有错误。Nokogiri 将尝试修复它们，但任何产生错误的东西都会被标记在那里。

例如：

```
Nokogiri::XML('<fb:like></fb:like>').errors
=> [#<Nokogiri::XML::SyntaxError: Namespace prefix fb on like is not defined>] 
```

Nokogiri 将尝试修复 HTML：

```
Nokogiri::XML('<fb:like></fb:like>').to_xml
=> "<?xml version=\"1.0\"?>\n<like/>\n" 
```

但它只会将其纠正到删除标记上的未知名称空间的程度。

如果要剥离这些节点：

```
doc = Nokogiri::XML('<fb:like></fb:like>')
doc.search('like').each{ |n| n.remove }
doc.to_xml => "<?xml version=\"1.0\"?>\n" 
```

# node.js - Mocha、CoffeeScript、ZombieJS、Timout？

> ID：11557512
> 
> 赞同：1
> 
> 时间：2012-07-19T09:09:55.847
> 
> 标签：node.js, timeout, coffeescript, mocha.js, zombie.js

我遇到了一个奇怪的问题，我无法弄清楚它为什么会这样做。

我使用 express-coffeescript 作为框架，mocha 用于测试，以及 should、chai 和zombiejs 用于浏览器测试。

```
 request = require 'request'
 Browser = require 'zombie'
 assert  = require 'assert'
 chai    = require 'chai'  
 should  = require 'should'
 expect  = chai.expect
 chai.should

 browser = new Browser()

 describe 'GET /login', ->

    it 'should login a user successfully', (done) ->
        browser.on "error", -> 
             console.log "Error"

        browser.visit "http://localhost/test-laravel/public/login",  (browser),  ->

             browser.fill "username", "TheHydroImpulse"
             browser.fill "password", "SomePassword123"
             browser.pressButton "login", ->
                  console.log browser.location.pathname
                  should.equal "randomTextHere", "/test-laravel/public/dashboard" 
```

这段代码工作得很好，运行时测试当然会失败

```
mocha test --compilers coffee:coffee-script -R spec 
```

关于这个或问题的奇怪之处在于当我通过测试时。

```
should.equal "/test-laravel/public/dashboard", "/test-laravel/public/dashboard" 
```

测试应该通过，但由于超时 2000 毫秒，它会挂起几秒钟而不是失败。我试着四处搜索，但似乎没有任何记录这个问题，或者这可能是我自己的错。几个小时前我才开始学习咖啡脚本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T15:06:09.420

行后：

```
should.equal "/test-laravel/public/dashboard", "/test-laravel/public/dashboard" 
```

调用方法：

```
done() 
```

这样做会向 mocha 发出测试已完成的信号。这必须发生，因为在 Node.js 平台上编写的大多数代码都具有异步特性。

# c# - 为什么无法将任何字体保存为图像？（但要在我的 Windows 窗体上显示它）

> ID：11557513
> 
> 赞同：4
> 
> 时间：2012-07-19T09:09:55.867
> 
> 标签：c#, .net, image, fonts, barcode

我有点困惑，因为我可以在我的 windows 窗体上显示每个字符串和每种字体，但作为图像并不总是可能的。也许我的代码有问题。但让我告诉你我在尝试什么。

起初我有这个：

```
 Label l = new Label();

    l.Text = "Ì CSharp Î";

    this.Font = new Font("Code 128", 80);

    l.Size = new System.Drawing.Size(300, 200);

    this.Controls.Add(l);
    this.Size = new Size(300, 200); 
```

![windows窗体中的字符串+代码128字体](../Images/9026cd191fb68dd3cdea96c79c4d1885.png)

这很好。现在我想尝试使用与图像相同的字体保存相同的字符串。我找到了这段代码，我认为这就是如何做到这一点

```
 private static Image DrawText(string text, Font font, Color textColor, Color backColor)
        {
            //first, create a dummy bitmap just to get a graphics object
            Image img = new Bitmap(1, 1);
            Graphics drawing = Graphics.FromImage(img);

            //measure the string to see how big the image needs to be
            SizeF textSize = drawing.MeasureString(text, font);

            //free up the dummy image and old graphics object
            img.Dispose();
            drawing.Dispose();

            //create a new image of the right size
            img = new Bitmap((int)textSize.Width, (int)textSize.Height);

            drawing = Graphics.FromImage(img);

            //paint the background
            drawing.Clear(backColor);

            //create a brush for the text
            Brush textBrush = new SolidBrush(textColor);

            drawing.DrawString(text, font, textBrush, 0, 0);
            drawing.Save();
            textBrush.Dispose();
            drawing.Dispose();

            return img;
        }

        var i = DrawText("Ì CSharp Î", new Font("Code 128", 40), Color.Black, Color.White); 
```

如果我保存图像，我会得到：

![在此处输入图像描述](../Images/6e2e18866bbe60cd26017b5a30b4130f.png)

我不明白。我使用与我在 Windows 窗体上使用的相同的字符串和相同的字体。为什么呢？以及如何避免这个问题？

PS：我使用的字体是[在这里](http://www.jtbarton.com/Barcodes/Code128.aspx)下载的，但我也用其他字体对其进行了测试，但它并不总是有效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T11:47:09.623

好吧，这很奇怪，但您使用的代码与 Label 用于绘制文本的代码不同。Label 控件默认使用 TextRenderer.DrawText()，这是一个调用 GDI 函数 (DrawTextEx) 的函数。您的 Graphic.DrawString() 调用调用 GDI+ 函数，该函数使用完全不同的文本呈现引擎。它有一些布局问题，这就是为什么 TextRenderer 被添加到 .NET 2.0

我不知道这两个函数映射字体的方式不同。但谁知道呢，这并不完全是标准字体。请改用 TextRenderer。Label 的 DrawToBitmap() 方法是一种备用解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T10:37:32.250

您下载的字体似乎不起作用。尝试构建您安装的字体的同一作者的[不同版本的字体。](http://www.fonts4free.net/code-128-font.html)首先从 c:\windows\fonts 中删除旧字体“Code 128”，然后将新字体拖放到同一文件夹中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T10:40:54.637

[http://msdn.microsoft.com/en-us/library/164w6x6z.aspx](http://msdn.microsoft.com/en-us/library/164w6x6z.aspx)

指出

> 如果 familyName 参数指定的字体未安装在运行应用程序的机器上或不受支持，则将替换为 Microsoft Sans Serif

我认为你需要让自己满意，你得到的字体`new Font("Code 128", 40)`是你指定的字体。您是否在同一系统上运行此代码？字体是否与程序一起安装或存储在本地？字体在这两种情况下都可用吗？

我会尝试这个来测试：

```
Label l = new Label();
l.Text = "Ì CSharp Î";
this.Font = new Font("Code 128", 80);
l.Size = new System.Drawing.Size(300, 200);
this.Controls.Add(l);
this.Size = new Size(300, 200);
var i = DrawText(l.Text, this.Font, Color.Black, Color.White); 
```

如果结果仍然不同，嗯嗯......然后需要考虑更多！

# asp.net - .NET Web 部署项目给出错误“定位的程序集的清单定义与程序集引用不匹配”

> ID：11557519
> 
> 赞同：0
> 
> 时间：2012-07-19T09:10:10.917
> 
> 标签：asp.net, c#-2.0, tridion, web-deployment

我正在使用 .net 2.0，Visual Studio 2008，在我的解决方案中，我有两个项目（网站项目和参考项目），我分别构建它们，它们重新构建成功，但是当我尝试使用 Web 部署项目构建解决方案时它给出了以下错误，这个问题的原因可能是什么？

> 错误 2 无法加载文件或程序集 'Tridion.Extensions.Web.UI, Version=1.0.0.19738, Culture=neutral, PublicKeyToken=7c1e07388cce59cc' 或其依赖项之一。找到的程序集的清单定义与程序集引用不匹配。（HRESULT 异常：0x80131040）/Careers/Controls/Application/ucBreadcrumbs.ascx 2 1 Careers_deploy

请推荐！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T10:40:15.140

彼得是对的——fuslogvw 对这类问题非常有用。

除此之外，我建议该错误消息中的一个重要短语是“ `or one of its dependencies`”。我建议`Tridion.Extensions.Web.UI`使用允许您在清单中查看其依赖项的工具打开程序集。ILDASM 非常适合这一点。借助您在此处找到的知识，您可以确保其他必要的组件可用。（在正常工作的系统上，GAC 中存在必要的程序集，而在它不工作的系统上却没有，这种情况并不少见。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T10:17:32.320

您可能在这些工作系统上有策略文件，以确保它加载正确的版本。

无论如何，故障排除的最佳选择是运行 Fusion Log Viewer。记录故障并查看报告。大多数时候，这足以告诉你到底出了什么问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T11:53:03.213

尝试清洁您的解决方案，看看是否有效。

如果它不尝试删除应遵循如下路径的临时 ASP.NET 文件夹：

C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\Temporary ASP.NET

# vb.net - HTML 敏捷包不会从网站返回 div id

> ID：11557522
> 
> 赞同：0
> 
> 时间：2012-07-19T09:10:18.867
> 
> 标签：vb.net, html-agility-pack

我以谷歌为例进行测试，我知道页面上有带有id的div

如果我使用 xpath "//div" 它会在我的集合中返回 14 个没有 id 文本的 div

如果我使用 xpath "//div/@id" 它返回 0 div

我在这里做错了什么？感谢代码如下

```
Dim l As List(Of String) = New List(Of String)
Dim w As HtmlWeb = New HtmlWeb()
Dim h As HtmlDocument = web.Load("http://www.google.com/")

Dim ht As HtmlNodeCollection = h.DocumentNode.SelectNodes("//div/@id")

For Each x As HtmlNode In ht

    l.Add(x.Id)

Next 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T09:18:27.827

您的 XPath 表达式选择`id` *属性*集合而不是`div` *元素*集合。将其更改为：`//div[@id]`

# javascript - 链接一系列具有中间延迟的 javascript 事件

> ID：11557524
> 
> 赞同：0
> 
> 时间：2012-07-19T09:10:27.410
> 
> 标签：javascript, jquery, events, delay

我正在尝试按顺序运行事件，某些事件之间存在延迟。

例如，我`click`在一个按钮上，我的第一个事件以 this 开始`click`，持续时间为 3000 毫秒，我放了一个 3100 的延迟，然后第二个事件开始。

我想在第二个事件结束后开始第三个事件，然后在第三个事件结束后开始第四个事件。

使用它并不难`setTimeOut`，但它在智能手机上效果不佳，因为它需要我们太多的连接。

我想要的是这样的：

```
delay(3100, function(){
blabla
});.delay().delay(). 
```

等等等等

由于我的英语不好，我确定我不清楚 - 无论如何谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T09:26:02.457

我认为最好使用[setTimeout()](https://developer.mozilla.org/en/DOM/window.setTimeout)。它的工作原理与您上面的示例非常相似，尽管您不能将它们链接在一起，但您可以通过在 setTimeout() 中调用 setTimeout() 等来将它们嵌套到您的喜好......如果您需要执行的函数始终是同样，您可以使用命名函数而不是闭包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T09:22:08.243

像这样

```
$("button").click(function() {
      $("first").slideUp(300).delay(800).fadeIn(400);
      $("div.second").slideUp(300).fadeIn(400);
    }); 
```

另请查看此链接[http://api.jquery.com/delay/](http://api.jquery.com/delay/)

# javascript - 将查询字符串反序列化为 JSON 对象

> ID：11557526
> 
> 赞同：19
> 
> 时间：2012-07-19T09:10:30.940
> 
> 标签：javascript, jquery, underscore.js

试图找到如何制作`{foo:"bar"}`，`?...&foo=bar&...`但谷歌搜索并得到`jQuery.params`了相反的结果。请有任何建议（内置 javascript 函数、*jQuery*、*Underscore.js* - 一切顺利）？或者，我是否需要自己实现它（不是一个大麻烦，只是尽量不要重新发明轮子）？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-08-25T12:58:28.880

实际上，@talsibony 的上述回答并未考虑查询字符串数组（例如`test=1&test=2&test=3&check=wow&such=doge`）。这是我的实现：

```
function queryStringToJSON(qs) {
    qs = qs || location.search.slice(1);

    var pairs = qs.split('&');
    var result = {};
    pairs.forEach(function(p) {
        var pair = p.split('=');
        var key = pair[0];
        var value = decodeURIComponent(pair[1] || '');

        if( result[key] ) {
            if( Object.prototype.toString.call( result[key] ) === '[object Array]' ) {
                result[key].push( value );
            } else {
                result[key] = [ result[key], value ];
            }
        } else {
            result[key] = value;
        }
    });

    return JSON.parse(JSON.stringify(result));
}; 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-02-03T08:03:11.837

我在这里发布我的功能以防万一其他人看起来并且想要直接获得它，而不需要 jquery native JS。因为我一直在寻找同样的东西，在查看其他答案后终于做了这个功能：

```
function queryStringToJSON(queryString) {
  if(queryString.indexOf('?') > -1){
    queryString = queryString.split('?')[1];
  }
  var pairs = queryString.split('&');
  var result = {};
  pairs.forEach(function(pair) {
    pair = pair.split('=');
    result[pair[0]] = decodeURIComponent(pair[1] || '');
  });
  return result;
}

console.log(queryStringToJSON(window.location.href)); 
console.log(queryStringToJSON('test=1&check=wow'));//Object {test: "1", check: "wow"} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-07-19T09:20:26.330

你有 Ben Alman`jQuery BBQ`和一个`jQuery.deparam`在里面。它被描述为`The opposite of jQuery.param, pretty much.`

[http://benalman.com/code/projects/jquery-bbq/examples/deparam/](http://benalman.com/code/projects/jquery-bbq/examples/deparam/)

第一个例子正是你所需要的。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2020-05-22T06:03:28.857

在现代浏览器中，您还可以使用[Object.fromEntries](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/fromEntries)，这使得这更加容易。

```
function queryStringToObject(queryString) {
  const pairs = queryString.substring(1).split('&');
  // → ["foo=bar", "baz=buzz"]

  var array = pairs.map((el) => {
    const parts = el.split('=');
    return parts;
  });
  // → [["foo", "bar"], ["baz", "buzz"]]

  return Object.fromEntries(array);
  // → { "foo": "bar", "baz": "buzz" }
}

console.log(queryStringToObject('?foo=bar&baz=buzz'));
```

* * *

URLSearchParams[接口](https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams)可以与浏览器的 URL 搜索参数交互。[URLSearchParams](https://caniuse.com/?search=URLSearchParams())的浏览器支持相当不错。

对于您的情况，它将是：

```
console.log(
  Object.fromEntries(new URLSearchParams('foo=bar&baz=buzz'))
);
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-12-23T19:12:38.397

对于简单而扁​​平的查询字符串，这样的事情就可以了

```
const queryStringToObject = (queryString) => {
  let obj = {}
  if(queryString) {
    queryString.slice(1).split('&').map((item) => {
      const [ k, v ] = item.split('=')
      v ? obj[k] = v : null
    })
  }
  return obj
} 
```

```
> queryStringToObject('?foo=bar&baz=buzz')
{ foo: 'bar', baz: 'buzz' } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-09-01T14:17:44.523

构造`URLSearchParams()`函数创建并返回一个新的[URLSearchParams](https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams)对象。

```
var url = new URL('https://example.com?foo=1&bar=2'); 
var params = new URLSearchParams(url.search); 
```

[https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams/URLSearchParams](https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams/URLSearchParams)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-11-06T14:55:38.757

我知道这个线程有点旧 - 但这对我有用 - 希望它也能帮助其他人..

```
var _searchModel = yourquerystring.split("&");
for (var x = 0; x < _searchModel.length; x++) {
  //break each set into key and value pair
  var _kv = _searchModel[x].split("=");

  //console.log(_kv);

  var _fieldID = _kv[0];
  var _fieldVal = _kv[1];
}
```

# java - 在java中将图像添加到TIF文件？

> ID：11557527
> 
> 赞同：0
> 
> 时间：2012-07-19T09:10:33.120
> 
> 标签：java, file, jai

我将从一个位置获取一张图像，从另一个位置获取 TIF 文件。
我想将该图像添加到指定位置的 TIF 文件中。我试过了，但它是压倒一切的。那你能帮帮我吗？

拉克斯曼杂烩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T06:39:55.900

您可以从 tiff 文件中读取图像。创建所有 tif 图像的集合并将其传递给 TIFFEncodeParam 类：

设置额外图像。

阅读需要传递给方法的确切结构的 javadoc。

你会因为将文件读入内存而受到惩罚，但我没有看到任何其他方式。

# javascript - 如何将参数传递给 jQuery 小部件？

> ID：11557529
> 
> 赞同：0
> 
> 时间：2012-07-19T09:10:36.830
> 
> 标签：javascript, jquery-ui, client-side, jquery-widgets

这是一个菜鸟问题。

假设我`jQuery`在单击按钮时打开了一个对话框。该对话框被实现为一个`jQuery`小部件：

```
（函数（$）{

  $.widget("myApp.myDialog", {

     _create: fnction() {...} // 创建一个对话框

     _init: fnction() {...} // 打开一个对话框    
  })

}(jQuery));

```

我在按钮单击时打开此对话框，如下所示：

```
$('#myButton').bind('click', function() { $(this).myDialog(); });

```

到目前为止，一切都很好。我希望这是有道理的。

现在我想在对话框打开时*禁用*该按钮，并在对话框关闭时*启用*它。如何将按钮传递给对话框小部件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T12:16:49.797

由于您要创建一个，因此`dialog`您可能希望将`$.ui.dialog`其作为第二个参数传入，`$.widget`因此您可以继承对话框的功能。

当您创建一个实例时，`myDialog`您可以启用/禁用那里的按钮。

```
(function($) {
    $.widget('myApp.myDialog', $.ui.dialog, {

    });

    $('.dialog').myDialog({
        open: function() {
            $('#myButton').prop('disabled', true);
        },
        close: function() {
            $('#myButton').prop('disabled', false);
        }            
    });
}(jQuery)); 
```

**示例**- [http://jsfiddle.net/tj_vantoll/v4sYX/](http://jsfiddle.net/tj_vantoll/v4sYX/)

# java - 如何在多用户环境中处理表单编辑？

> ID：11557537
> 
> 赞同：2
> 
> 时间：2012-07-19T09:11:21.810
> 
> 标签：java, spring, multi-user

我的应用程序是具有服务器和客户端的多用户应用程序。在这种形式中，多个用户可以同时访问，他们可以执行另存为草稿或提交操作。

问题是我想控制多用户同时编辑表单。

例如：用户 X 正在编辑文本字段、复选框的值并执行另存为草稿。同时用户 Y 编辑相同的值并提交表单。有什么方法可以控制同时进行表单编辑。任何指针？

我在应用程序中使用 java 、 spring 3 、 hibernate JPA 。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T09:20:04.920

您正在寻找[乐观并发控制](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#transactions-optimistic)。使用 JPA/Hibernate，它可以像在实体中[添加`@Version`注释字段一样简单。](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#d0e5844)

# c# - 在 MVVM 中，为什么人们要创建 ViewModel 文件夹？

> ID：11557539
> 
> 赞同：1
> 
> 时间：2012-07-19T09:11:34.157
> 
> 标签：c#, .net, mvvm

...而不是使用 xxx.xaml.cs 生成的文件？

开发人员正在 Views 文件夹中的 xaml 中创建一个视图。Visual Studio 在 xaml 文件下生成 xaml.cs 文件。但开发人员更喜欢创建一个新文件夹 ViewModel 并为每个 xxx xaml 文件创建一个 xxxViewModel.cs 文件。为什么不把这些 ViewModel 的所有内容都移到 xxx.xaml.cs 文件中呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T09:13:22.193

因为 xaml.cs 它与 xaml（视图）紧密耦合，这违背了模式设计。

请查看此链接，它很好地解释了该模式：[http ://reedcopsey.com/2010/01/06/better-user-and-developer-experiences-from-windows-forms-to-wpf-with- mvvm-part-7-mvvm/](http://reedcopsey.com/2010/01/06/better-user-and-developer-experiences-from-windows-forms-to-wpf-with-mvvm-part-7-mvvm/)：

> 视图模型
> 
> *   ViewModel 对 View 一无所知
> *   ViewModel 直接与 Model 交互，以便将其公开以进行数据绑定
> *   ViewModel 管理特定于应用程序的信息

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-26T15:07:17.237

有些人甚至喜欢将 ViewModel 直接嵌套在`xaml`文件下面，比如 ![在此处输入图像描述](../Images/2cfcf545bdb14c083bbf5d67e5f09568.png)

这可以通过使用此自定义 Visual Studio 扩展来完成：[NestIn](http://visualstudiogallery.msdn.microsoft.com/9d6ef0ce-2bef-4a82-9a84-7718caa5bb45/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-25T22:11:03.040

这种拆分在表示逻辑（用户界面的行为方式）和渲染（用户界面的外观）之间提供了清晰[的关注点分离。](http://en.wikipedia.org/wiki/Separation_of_concerns)它将所有逻辑放在一个可以进行[单元测试](http://en.wikipedia.org/wiki/Unit_testing)的层中，并将所有标记放在一个图形设计师可以工作而不必担心太容易破坏事物的层中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T09:16:22.067

他们正在创建文件夹，因为关键的 MVVM 示例（由 Josh Smith 和 Laurent Bugnion 编写）展示了这种方法。

> 为什么不把这些 ViewModel 的所有内容都移到 xxx.xaml.cs 文件中呢？

因为它是错误的。xxx.xaml.cs 是“代码隐藏”，它是 UI 的一部分。MVVM 的思想是将 UI 与视图模型分离。UI 不应该知道它显示的逻辑的任何细节。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-19T09:16:34.367

因为使用单元测试更容易测试类。那时没有任何东西与视图绑定。

# c++ - 平截头体和透视矩阵

> ID：11557540
> 
> 赞同：1
> 
> 时间：2012-07-19T09:11:36.747
> 
> 标签：c++, math, 3d, linear-algebra

我有一些转换矩阵的代码，并添加了一些处理 Frustum 和 Perspective 的函数。

问题是，当我调用透视图时，一切看起来好像我有一个非常大的视野（在屏幕中间还可以，而在边缘非常拉伸）。当我增加近值时，这种效果会更糟。

```
 void Frustum(T left, T right, T bottom, T top, T zNear, T zFar)
    {
        m[0][0]=2.0f*zNear/(right-left);
        m[1][0]=0.0f;
        m[2][0]=(right+left)/(right-left);
        m[3][0]=0.0f;
        m[0][1]=0.0f;
        m[1][1]=2.0f*zNear/(top-bottom);
        m[2][1]=(top+bottom)/(top-bottom);
        m[3][1]=0.0f;
        m[0][2]=0.0f;
        m[1][2]=0.0f;
        m[2][2]=-(zFar+zNear)/(zFar-zNear);
        m[3][2]=-2.0f*zFar*zNear/(zFar-zNear);
        m[0][3]=0.0f;
        m[1][3]=0.0f;
        m[2][3]=-1.0f;
        m[3][3]=0.0f;
    }

    void Perspective(T fovy,T aspectRatio,T zNear,T zFar)
    {
        T xmin,xmax,ymin,ymax;
        ymax= zNear* tan(fovy*Math<T>::PI/360.0);
        ymin= -ymax;
        xmin= ymin*aspectRatio;
        xmax= ymax*aspectRatio;
        Frustum(xmin,xmax,ymin,ymax,zNear,zFar);
    } 
```

T 是一个浮点数或双精度类，因为该类是模板化的（对于测试，我只使用了浮点数）。

我使用的测试值是`fovy="60" znear="1.0" zfar="1000.0"`，当我将它们更改为`fovy="60" znear="10.0" zfar="1000.0"`它时会变得更糟。

请注意，矩阵是 DirectX 样式，但我在 OpenGL 中使用它们，因此我更改了着色器中的乘法顺序。

你们看到我的代码有什么问题吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T08:44:33.720

问题是当我开始使用转置的矩阵（DirectX 风格）时，我想我还必须转置平截头体数学，这不是一个好主意。

这就是 Frustum 函数的样子：

```
 void Frustum(T left, T right, T bottom, T top, T zNear, T zFar)
    {
        T zDelta = (zFar-zNear);
        T dir = (right-left);
        T height = (top-bottom);
        T zNear2 = 2*zNear;

        m[0][0]=2.0f*zNear/dir;
        m[0][1]=0.0f;
        m[0][2]=(right+left)/dir;
        m[0][3]=0.0f;
        m[1][0]=0.0f;
        m[1][1]=zNear2/height;
        m[1][2]=(top+bottom)/height;
        m[1][3]=0.0f;
        m[2][0]=0.0f;
        m[2][1]=0.0f;
        m[2][2]=-(zFar+zNear)/zDelta;
        m[2][3]=-zNear2*zFar/zDelta;
        m[3][0]=0.0f;
        m[3][1]=0.0f;
        m[3][2]=-1.0f;
        m[3][3]=0.0f;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T09:20:31.460

计算

```
z_delta=(zfar-znear);//used two times!
direction=(right-left);//used two times!
height=(top-bottom);//used two times!
znear_2=2.0f*znear; //used 3 times! 
```

只有一次！然后在任何你想要的地方使用它

而且，除法非常昂贵，您可以预先计算除法并将其存储在数组中，您只需要在执行中从数组中获取预先计算的元素。

例如：如果顶部和底部范围很小，那么您可以在一个小数组中表示计算（实际上它是一个除法器和一个除法器的映射）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T18:21:52.563

我认为问题在于`Perspective()`：计算时`ymax`，你不应该乘以`zNear`。从数学上讲，您投影到单位距离的平面上，而*不是*`zNear`平面上；那个价值在那里没有生意。

尝试只是设置`ymax= tan(fovy*Math<T>::PI/360.0)`。仍然不能保证它是正确的，但这应该更加理智......

# c# - 投射后代表平等

> ID：11557549
> 
> 赞同：1
> 
> 时间：2012-07-19T09:12:23.810
> 
> 标签：c#, .net, delegates

我正在尝试将 a`WaitCallBack`转换为`Action<object>`

我这样做是：

```
WaitCallBack w1 = Foo;

Action<object> a1 = new Action<object>(w1);
Action<object> a2 = Foo; 
```

但是，当我尝试比较`a1`with 时`a2`，它会返回`false`。

有没有派出代表，这样平等就成真了？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T09:23:58.053

代表按方法+目标进行比较；问题是你在比较不同的东西！

如果我们将此行扩展到编译器所看到的内容，也许会更清楚：

```
Action<object> a1 = new Action<object>(w1); 
```

实际上是：

```
Action<object> a1 = new Action<object>(w1.Invoke); 
```

`Invoke`（对委托使用隐式操作）

你可以看到目标是`w1`，方法是`Invoke`。我们可以确认这一点：

```
Console.WriteLine(a1.Method.Name); // Invoke
Console.WriteLine(ReferenceEquals(a1.Target, w1)); // true 
```

与其他比较：

```
Action<object> a2 = Foo; 
```

在这里，目标是`null`（如果是静态的）或`this`（如果是非静态的），方法是`Foo`. 代表**不一样**。它报告是正确的`false`。

你可以手动检查这个*链式*操作，但是有点乏味，特别是如果你需要考虑每个组合/深度；但一个简单的例子：

```
Delegate del = a1.Target as Delegate;
if(del != null)
{
    if(del.Method == a2.Method && del.Target == a2.Target)
    {
        Console.WriteLine("pass");
    }
} 
```

# cobol - 从文件中读取后无法在循环中添加小数

> ID：11557550
> 
> 赞同：0
> 
> 时间：2012-07-19T09:12:29.610
> 
> 标签：cobol

从文件中读取后，我无法添加两个十进制数字，在文件内部，数字被定义为 1234.10 等等，我在程序中循环添加这些数字，但是在使用第三个变量添加时获取 SOC7文件中的详细信息，我已将所有数值变量定义为 9(4)v99 并尝试使用 s9(4)v99 comp-3，但仍未添加。

该程序仅在文件内的小数被定义为 123410 而不是文件内的 1234.10 时才有效。

这就是我编码的方式，

```
READ-PARA1\.                                               
READ FILEX                                            
  AT END                                              
     MOVE 'Y' TO WS-EOF-IND.                          
READ FILEY                                            
  AT END                                              
     MOVE 'Y' TO WS-EOF-IND.                          
DISPLAY SPACE                                         
DISPLAY OCODE1,'    'ACODE1,'    'POLNO1,' 'EDATE1,   
          ' 'PHOLD1,' 'LOCATION1,' ',LICNO1,' 'VMAKE1,
' 'VMODEL,' 'YEAR,' 'PREM'  '.                        
ADD 1 TO R1\.                                          
MOVE PREM TO PRESUM1\.                                 
ADD PRESUM1 TO PRESUM. 
```

在工作存储部分，包括其上方的文件描述符，

```
 05 PREM PIC S9(4)V99 COMP-3\.                
  05 FILLER PIC X(34).                        
  WORKING-STORAGE SECTION.                        
  77  R1 PIC 9(2) VALUE 0\.                        
  77  PRESUM PIC S9(4)V99 COMP-3 VALUE 0\.         
  77  PRESUM1 PIC S9(4)V99 COMP-3 VALUE 0\.        
  77  PRESUM2 PIC S9(4)V99 COMP-3 VALUE 0\. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T15:07:24.923

图 9(4)V99 中的 V 是假定的小数；没有小数点。它只接受像 123410 这样的数字。它不会接受 1234.10

对于 1234.10，您需要将其定义为

```
 03 f1      pic 9(4)
   03 filler  pic x.
   03 f2      pic v99. 
```

并且在程序中

```
 compute PRESUM = f1 + f2. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T16:56:12.290

Bruce Martin 给出的答案将起作用，但您也可以尝试将“数字”定义为`PIC X`输入文件中的内容，然后用于`NUMVAL`将其转换为数值。就像是：

```
01  FILEX-REC.
    02 ....
    02 PREM    PIC X(7).
    02 ...

01.
    02 PRESUM1     PIC S9(4)V99 PACKED-DECIMAL.

    COMPUTE PRESUM1 = FUNCTION NUMVAL(PREM) END-COMPUTE 
```

该`NUMVAL`函数采用字符串 (PIC X) 并将其转换为数字数据项。这会将数字的字符表示形式转换`PREM`为压缩十进制（COMP-3）`PRESUM1`。

顺便说一句……每个新的 COBOL 程序员都会遇到这个小问题，通常需要一段时间才能解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T03:16:01.177

像 1234.56 这样的数字应该定义为：-

```
 05  PREM                   PIC 9999.99. 
```

您需要告诉编译器期望一个嵌入了实际小数点的字符格式的数字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T11:15:04.930

S0C7 是数据异常错误。如果打包字段中的数据不是打包格式，或者分区字段中的数据不是分区格式，则会出现此错误。值得庆幸的是，S0C7 不是很有害（就像在 COBOL 中很少见的 S0C1 和 S0C4，感谢上帝），因此将它们排除在外并不难。

我假设您正在从文件中读取 PRESUM 和 PRESUM1 的值？文件中有什么？

有趣的是，COMP-3 或分区字段通常不会抱怨无效数据，直到您尝试使用它，例如添加到它或将它添加到其他东西。

在不知道构成 COMP-3 压缩字段的字节（不是值，而是 BYTES）的情况下，无法诊断此 S0C7。

如果您或其他任何人需要有关分区或打包数据的更多信息，我可以提供大量信息……我在 COBOL 中编程的时间比我愿意承认的要长得多。

# gwt - GWT celltable 如何创建选择单元/组合框列

> ID：11557553
> 
> 赞同：0
> 
> 时间：2012-07-19T09:12:44.453
> 
> 标签：gwt, combobox, celltable

正如您在标题中看到的那样，我正在搜索代码以在我的单元格表中添加一个简单的选择单元格/组合框列，项目不来自任何数据库。我还没有在任何地方找到它。有人可以回答代码以添加它以及如何实现这些项目吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T10:17:40.540

```
public class Main implements EntryPoint
{

    private class Model
    {
        String value;

        public Model(
            String value)
        {
            super();
            this.value = value;
        }

    }

    @Override
    public void onModuleLoad()
    {
        RootPanel.get().add(createTable());
    }

    private Widget createTable()
    {
        CellTable<Model> table = new CellTable<Model>();
        table.addColumn(new Column<Model, String>(new SelectionCell(
            getAcceptableValues()))
        {

            @Override
            public String getValue(
                Model object)
            {
                return object.value;
            }
        });

        table.setRowData(Arrays.asList(new Model("value1"),
            new Model("value2"), new Model("another value")));
        return table;
    }

    private List<String> getAcceptableValues()
    {
        return Arrays.asList("value1", "value2");
    }
} 
```

# c# - 回发网址不能现场工作，但在测试中

> ID：11557554
> 
> 赞同：1
> 
> 时间：2012-07-19T09:12:46.813
> 
> 标签：c#, asp.net, postbackurl

我有一个显示网格视图的搜索页面。gridview 中的项目是创建 url 字符串返回同一页面的超链接 - index.aspx

我有 index.asp 检查查询字符串的存在并处理得很好。

我遇到的问题是当用户想要输入一个新的搜索，这是一个表单提交。但是，回发仍然包含先前的 url 查询字符串 - 所以我的部分代码处理请求而不是搜索。

环顾四周，我发现了 PostBackURL：

```
 <asp:Button ID="btn_Search" runat="server" Text="Search" Cssclass="form_btn" OnClick="btn_Search_Click" PostBackUrl="index.aspx" />&nbsp; 
```

在测试中，这成功了。表单提交到index.aspx 不是说index.aspx?Var1=1&Var2=2

但是，当我发布到实时站点时，这不起作用。我仍然会收到 url 字符串的回复。

asp 为按钮和 javascript 代码输出的代码是相同的。

我对asp相当陌生，但我很困惑在VS2010中运行调试和在网络服务器上实时运行时行为不同。

--

好的，进一步调查。我正在运行 Cassini，但是.. 我的表单上有两个按钮 - 一个是搜索，另一个是清除。

两个按钮生成相同类型的 html：

```
<input type="submit" name="ctl00$MainContent$btn_Search" value="Search" onclick="javascript:WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions(&quot;ctl00$MainContent$btn_Search&quot;, &quot;&quot;, false, &quot;&quot;, &quot;Index.aspx&quot;, false, false))" id="MainContent_btn_Search" class="form_btn" />

<input type="submit" name="ctl00$MainContent$btn_Clear" value="Clear" onclick="javascript:WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions(&quot;ctl00$MainContent$btn_Clear&quot;, &quot;&quot;, false, &quot;&quot;, &quot;Index.aspx&quot;, false, false))" id="MainContent_btn_Clear" class="form_btn" /> 
```

上面的唯一区别是它们将在服务器上调用的名称、值和函数 - btn_clear 或 btn_Search。

清除按钮与实时站点上的 postbackurl 一起使用；搜索按钮没有。

此外，一旦提供了一个页面，是否不能由该页面来确定它接下来在哪里发布数据？所以如果页面说我要去这里，那就是它去的地方。我的清除按钮显示没有 url 查询字符串的 goto index.aspx，它可以工作。

这让我感到困惑 - 如果清除按钮在实时站点上不起作用，我会认为这要么与卡西尼有关，要么正在开发中，它是一台 pc 与 live 有 pc 和服务器。另外，如果是浏览器发出下一步去哪里的命令，这怎么可能是 cassini/IIS 问题？

如果我想进一步了解这一点，我可能需要使用wireshark 或类似工具来查看当我按下搜索或清除时实际离开浏览器窗口的内容。

* * *

好的测试项目完成。我已验证此代码在调试中可以按我的意愿工作。直到星期一我才能测试到 IIS 的实时部署。

page1.aspx 文件：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="page1.aspx.cs" Inherits="page1" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title></title>
</head>
<body>
<form id="form1" runat="server">
<asp:GridView ID="gridview1" runat="server" AutoGenerateColumns="False">
    <Columns>
    <asp:HyperLinkField DataNavigateUrlFields="intVal" 
            DataNavigateUrlFormatString="page1.aspx?Var={0}" DataTextField="intVal" 
            HeaderText="URL String" />
    </Columns>
</asp:GridView>
<br />
<br />
Search &nbsp;<asp:TextBox runat="server" ID="searchtext"></asp:TextBox><br />

<asp:Button ID="btn_Search" runat="server" Text="Search" OnClick="btn_Search_Click" PostBackUrl="page1.aspx" />&nbsp;
<asp:Button ID="btn_Clear" runat="server" Text="Clear" OnClick="btn_Clear_Click" PostBackUrl="page1.aspx" /><br />
Result:<br /><br />
<asp:Label runat="server" ID="result">Initial Load</asp:Label>

</form>
</body>
</html> 
```

页 1aspx.cs 文件：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

public partial class page1 : System.Web.UI.Page
{

public class MyItem 
{
    public int intVal {get; set;}
    public string stringVal {get; set;}
}

List<MyItem> ListMyItem = new List<MyItem>();

protected void Page_Load(object sender, EventArgs e)
{
    BuildList();

    result.Text = "Page Load: " + Request.Url;
}

protected void BuildList()
{
    MyItem MI = new MyItem();
    MI.intVal = 1;
    MI.stringVal = "111";

    ListMyItem.Add(MI);

    MI = new MyItem();
    MI.intVal = 2;
    MI.stringVal = "222";

    ListMyItem.Add(MI);

    gridview1.DataSource = ListMyItem;
    gridview1.DataBind();

}

protected void btn_Clear_Click(object sender, EventArgs e)
{
    result.Text = "Clear, URL: " + Request.Url + " Search= " + searchtext.Text;
}
protected void btn_Search_Click(object sender, EventArgs e)
{
    result.Text = "Search, URL: " + Request.Url + " Search= " + searchtext.Text;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T09:21:49.767

`OnClick="btn_Search_Click"`如果您不需要在后面的代码中执行任何操作，则将其删除，或者`PostBackUrl="index.aspx"`如果您不想被重定向，则删除

你当然也可以使用`OnClick="btn_Search_Click"`然后在后面的代码中重定向到 index.aspx

# ruby-on-rails-3 - delay_job：如何强制处理失败的作业

> ID：11557555
> 
> 赞同：3
> 
> 时间：2012-07-19T09:12:50.953
> 
> 标签：ruby-on-rails-3, delayed-job

我正在维护一个 Rails 应用程序，我在该应用程序上运行延迟作业 gem 来发送电子邮件。

我刚刚注意到由于应用程序中的错误，我所有延迟的工作在过去几天都失败了。现在该错误已修复，我想尽快处理这些作业，但它们已经有太多失败的尝试，并且工作人员从数据库中拉出它们的延迟很大。

我尝试通过更新delayed_jobs 表并将尝试次数设置为较小的数字并将run_at 属性设置为当前时间，但仍然没有帮助。

你能告诉我如何强迫工人执行它们吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-19T09:40:55.797

可以手动启动，试试

```
Delayed::Job.all.each { |j| j.invoke_job } 
```

或者

```
Delayed::Job.all.each { |j| j.payload_object.perform } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-19T10:07:01.093

好的，所以我终于明白了！

诀窍实际上是将 run_at 属性更新为当前时间，但应用程序的当前时间 - 比数据库晚 3 小时。

当我将其设置为 now() - 间隔“3 小时”时，所有作业都已处理。

编辑：

@rodzyn，我已经尝试过您的建议，但仍然无法正常工作：

```
[20] pry(main)> Delayed::Job.all.size
  Delayed::Backend::ActiveRecord::Job Load (0.6ms)  SELECT "delayed_jobs".* FROM "delayed_jobs" 
=> 1
[21] pry(main)> Delayed::Job.first.invoke_job
  Delayed::Backend::ActiveRecord::Job Load (0.5ms)  SELECT "delayed_jobs".* FROM "delayed_jobs" LIMIT 1
  Order Load (0.4ms)  SELECT "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT 1  [["id", "328"]]
  User Load (0.5ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
=> nil
[22] pry(main)> Delayed::Job.all.size
  Delayed::Backend::ActiveRecord::Job Load (0.6ms)  SELECT "delayed_jobs".* FROM "delayed_jobs" 
=> 1
[23] pry(main)> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-11-12T17:30:40.247

现有的答案都没有完全正确，所以我在这里添加。

神奇的是让延迟的作业相信这些作业确实没有失败，所以通过 rails db 控制台：

```
-> rails db
development# update delayed_jobs set run_at = now() - interval '3 hours', attempts = 0, failed_at = null;
UPDATE 30
development# \q

-> rake jobs:workoff  # a good one to use, because it will return immediately if no jobs are found 
```

“failed_at”或尝试字段都可以阻止作业运行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-19T09:45:38.333

> 现在该错误已修复，我想尽快处理这些作业，但它们已经有太多失败的尝试，并且工作人员从数据库中拉出它们的延迟很大。

这意味着，由于作业没有从表中删除，因此还有更多尝试等待延迟作业。延迟作业的默认行为是在找到可用作业时从队列中读取 5 个作业。没有太多代码更改的一种方法是在延迟配置中进行设置，该设置将从队列中获取更多作业并执行。您可以通过设置来配置它`Delayed::Worker.read_ahead`。

```
# config/initializers/delayed_job_config.rb
Delayed::Worker.destroy_failed_jobs = false
Delayed::Worker.read_ahead = 10 
```

`Delayed::Worker.destroy_failed_jobs`避免在最大尝试后删除作业，这也是一个可配置的项目。

延迟作业每 5 秒检查一次数据库中的可用作业，它会在 5 + N ** 4 秒后尝试特定作业。所以，假设一个特定的工作已经失败了 24 次，那么轮到它在 331781 秒后到达，也就是说，如果我没记错的话，大约在 3 天之后。

# java - DBCP 中的不可序列化异常

> ID：11557571
> 
> 赞同：0
> 
> 时间：2012-07-19T09:13:39.803
> 
> 标签：java, jsf-2, connection-pooling, tomcat7

当我使 DAO 可序列化时，我有 DAO 我得到异常：

```
 Cannot serialize session attribute com.sun.faces.renderkit.ServerSideStateHelper.LogicalViewMap for session C354B1B6053088CBB8E8A933E5F8EAE0
    java.io.NotSerializableException: org.apache.tomcat.dbcp.dbcp.PoolingDataSource$PoolGuardConnectionWrapper 
```

我的道：

```
public boolean getConnection() {
        try {
            InitialContext context = new InitialContext();
            DataSource dataSource = (DataSource) context.lookup("java:/comp/env/jdbc/Orcl");
            connection = dataSource.getConnection();
            return true;
        } catch (SQLException ex) {
            Logger.getLogger(KPIDAO.class.getName()).log(Level.SEVERE, null, ex);
            return false;
        } catch (NamingException ex) {
            Logger.getLogger(KPIDAO.class.getName()).log(Level.SEVERE, null, ex);
            return false;
        }
    } 
```

在控制器 (@ViewScoped) 中：

```
KPIDAO kpiDAO = new KPIDAO(); 
```

上下文.xml

```
<Resource 
        name="jdbc/Orcl" 
        auth="Container"
        type="javax.sql.DataSource" 
        username="username" 
        password="password"
        driverClassName="oracle.jdbc.OracleDriver" 
        url="jdbc:oracle:thin:@192.168.1.10:1521:XE"
        maxActive="8" 
   /> 
```

什么是正确的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T08:04:48.707

例如

```
@ViewScoped
public class ViewBean implements Serializable{
  private transient KPIDAO kpiDAO = //get singleton instance from factory
  //also dont keep connection object as instance variable, fetch it from pool in methods and perform db operations.

  private void readObject(java.io.ObjectInputStream stream)
        throws java.io.IOException, ClassNotFoundException
    {
        stream.defaultReadObject();

        // assign reference manually.
        this.kpiDAO  =  //get from factory;
    }

private void writeObject(java.io.ObjectOutputStream stream)
        throws java.io.IOException
    {

        stream.defaultWriteObject();
    }
} 
```

> 注意：如果您将连接对象从实例变量移动到本地方法变量，您也不需要上面的代码。

**更新：**

从您的代码片段和异常

```
connection = dataSource.getConnection(); 
```

它似乎是一个实例变量。

IE

```
public class Dao {
 private Connection connection; //instance variable
} 
```

将其更改为

```
public class Dao {

 public List<Bean> getResult(){
  //local method variable
  Connection connection = //get from pool
  //perform db operation with connection object
 } 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T09:44:37.397

您不应该在会话中存储对 PoolingDataSource 的引用，因为 PoolingDataSource 不可序列化。我建议您将它存储在其他地方，例如在应用程序上下文中。

# c# - 如何理解 C# 类型？

> ID：11557574
> 
> 赞同：-1
> 
> 时间：2012-07-19T09:13:44.990
> 
> 标签：c#, xml, code-generation

我在 python 中编写了一个代码，它读取包含用户定义类型和用户类定义的 XML 数据模型，然后转换为 C# 类。

例如用户创建这个 XML 文件：

```
<app:list name="myList" itemType="strering">
    <app:restriction combination="any">
            <app:minSize>1</app:minSize>
     </app:restriction>
</app:list> 
```

我的应用程序会将其转换为以下 C# 代码：

```
private  System.Collections.Generic.List<strering> _myList;
public System.Collections.Generic.List<strering> myList {
get{ return _myList; }
set{
    if (_myList == value)
        return;
    if ((value.Count>=1) || false){
        _myList=value;
    }
    else {
        throw new Exception("Inserted value for myList is not valid!");
    }

    RaisePropertyChanged ("myList"); // for binding to mvvm model
    }
} 
```

如果在 XML 文件中定义了**strering**，那么我的应用程序可以在符号表中找到它并将其传递到另一个级别，但我的问题是如何理解用户输入的列表类型是否为 .Net 内置类型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T09:19:13.170

如果是代码生成，则对 XML 使用第二遍，以了解在第一遍中是否已读取复杂类型。这通常是代码生成器的工作方式。

只看价值，真的没有明确的方法来决定尝试。我的意思是“stering”可以是字符串或枚举。因此，您必须添加一些逻辑来决定应该生成什么。

# c++ - 使用提升范围实现 LINQ 选择

> ID：11557575
> 
> 赞同：0
> 
> 时间：2012-07-19T09:13:48.820
> 
> 标签：c++, visual-studio-2012

我正在尝试在 boost::range 周围实现一个 LINQ 包装器。

但是，我对选择“编译器中发生内部错误”的位置感到震惊。

```
template<typename R>
class linq_range
{
    R range;
public:

    linq_range(R range)
        : range(std::move(range))
    {
    }

    template<typename F>
    auto select(const F& f) const -> linq_range<decltype(std::declval<R>() | boost::adaptors::transformed(f))>
    {
        return linq_range<decltype(std::declval<R>() | boost::adaptors::transformed(f))>(this->range | boost::adaptors::transformed(f));
    }
};

template<typename R>
auto from(R& r) -> linq_range<boost::iterator_range<decltype(std::begin(r))>>
{
    return from(std::begin(r), std::end(r));
}

template<typename I>
linq_range<boost::iterator_range<I>> from(I b, I e)
{
    return linq_range<boost::iterator_range<I>>(boost::iterator_range<I>(b, e));
} 
```

任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T09:24:51.593

我通过定义解决了它：

```
BOOST_RESULT_OF_USE_DECLTYPE 
```

# c - 打印图表时无限循环

> ID：11557576
> 
> 赞同：0
> 
> 时间：2012-07-19T09:13:51.503
> 
> 标签：c

我正在尝试在图中打印所有顶点及其边缘。我已经为图表使用了邻接表表示。我的代码是

```
#define MAX 1000

struct node
{
    int data;
    struct node *next;
};

struct node *arr[MAX];

void printGraph(int n)
{
    // n is the number of vertex

    int i;
    for(i=0;i<n;i++)
    {
        printf("The vertex %d is connected to");

        if(arr[i]->next==NULL)
            printf("no edges");
        else
        {
            struct node *tmp;
            for(tmp=arr[i];tmp!=NULL;tmp=tmp->next)
                printf("%d",tmp->data);
        }
        printf("\n");
    }
} 
```

每当我调用该`printGraph`方法时，我的程序都会进入无限循环。错误可能在哪里？

* * *

`I am adding my other methods. Please check them to see if I am properly creating a graph`

* * *

```
void createEmptyGraph(int n)
{

// n is the number of vertices
int i;

for(i=0;i<n;i++)
{
    struct node *n;
    n=(struct node *)malloc(sizeof(struct node));

    n->data=i;
    n->next=NULL;

    arr[i]=n;
}

printf("\nAn empty graph with %d vertices has been sreated",n);
printf("\nNo edge is connected yet");
}

void addNode(int startVertex,int endVertex)
{

// For directed edges
struct node *n;
n=(struct node *)malloc(sizeof(struct node));
n->next=arr[startVertex];
arr[startVertex]->next=n;

printf("\nAn edge between directed from %d to %d has been added",startVertex,endVertex);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T09:17:27.920

可能`tmp!=NULL`永远不会发生……？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T09:21:49.227

如果 arr[i] 它在一个循环内，这可能会永远`for(tmp=arr[i];tmp!=NULL;tmp=tmp->next)`循环：保持一个已访问向量以检查和中断循环，例如：

```
node *visited[MAX];
int nVis = 0;
bool cycle = false;
for(tmp=arr[i];tmp!=NULL && !cycle;tmp=tmp->next) {
  for (int j = 0; j < nVis; ++j)
   if (visited[j] == tmp) {
     cycle = true;
     break;
   }
 visited[nVis++] = tmp;
 ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T09:23:28.163

```
n->next=arr[startVertex];
arr[startVertex]->next=n; 
```

此代码使 tmp!=NULL 永远不会发生

也许是这样的：

```
n->next=arr[startVertex]->next;
arr[startVertex]->next=n; 
```

# javascript - 检查javascript中的文本框是否为空白

> ID：11557577
> 
> 赞同：3
> 
> 时间：2012-07-19T09:13:52.247
> 
> 标签：javascript, jquery, validation, textbox

我的网页中有一个电子邮件文本框。当用户提交页面时，我正在使用 javascript 进行一些客户端验证。我可以获取文本框的值并进行比较以了解它是否有任何数据。但是如果用户只输入空格，我将如何绕过它。

我正在使用下面提到的代码。

```
// Check the format of email only if it has some data.
// otherwise no checking is needed.
if ($('#txtEmail').val() != "")
{
     // do something
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-19T09:15:30.427

使用`$.trim()`函数从字符串的开头和结尾删除所有空格

```
if ($.trim($('#txtEmail').val()) != "")
{
     // do something
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-19T09:16:24.280

javascript

```
if((document.getElementById('bereich').value).length==0) 
```

或jQuery

```
if ($('#txtEmail').val()).length==0) 
```

或者

```
 if ($.trim($('#txtEmail').val()).length==0) 
```

# python - 如何从 MySQL 列在 Sphinx 中创建索引？

> ID：11557587
> 
> 赞同：0
> 
> 时间：2012-07-19T09:14:14.570
> 
> 标签：python, sphinx, thinking-sphinx

在 Ruby 插件 Thinking Sphinx 中，我可以从 db 列创建 sphinx 索引。在没有 Thinking Sphinx、索引器功能或 Python 的情况下，我怎么能做到这一点？

编辑：有问题的列将是文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T09:27:16.137

如果您使用 Thinking Sphinx 查看生成的索引器配置（[默认为`/config/ENVIRONMENT.sphinx.conf`](http://freelancing-god.github.com/ts/en/advanced_config.html)），您可以使用 Python 编写此配置，

使用[Django 的](http://justcramer.com/2008/02/24/in-depth-django-sphinx-tutorial/)[文档](http://sphinxsearch.com/docs/2.0.4/conf-reference.html)或教程。

在这里，我找到了 Sphinx Technologies 提供的一些 python API：[http ://code.google.com/p/sphinxsearch/source/browse/trunk/api/sphinxapi.py](http://code.google.com/p/sphinxsearch/source/browse/trunk/api/sphinxapi.py)

# ruby-on-rails - 修改Webrat中的html属性？

> ID：11557592
> 
> 赞同：0
> 
> 时间：2012-07-19T09:14:43.587
> 
> 标签：ruby-on-rails, ruby, webrat

我可以使用 Webrat 修改页面中的 html 吗？

具体来说，我想在提交表单之前更改表单输入中的名称属性。

# eclipse - 调用默认jsp页面时出现404错误，可以调用index.html

> ID：11557593
> 
> 赞同：0
> 
> 时间：2012-07-19T09:14:43.787
> 
> 标签：eclipse, jsp, tomcat

**环境**- Eclipse IDE，通过在 Eclipse 中创建它的实例来运行 tomcat 服务器。

**整体设置**- 我在 Tomcat 服务器中部署了 2 个 Web 应用程序（A 和 B），其中 A 调用 B 并且事情发生了。这在大多数情况下都可以正常工作。

### 原始问题场景

1.  假设我让我的机器无人看管几个小时然后回来重新启动服务器（其中部署了 2 个应用程序）。
2.  打开浏览器，我可以调用app A，但无法与app B建立连接。

在进一步挖掘中，我尝试从应用程序 B 加载一个带有 url 的 jsp 页面 -

```
http://localhost:8080/testrunner/login
```

但不能那样做![HTTP 状态 404](../Images/84185be3523eeea14d9b9063f25dcc32.png)。但是我可以从这个 url 调用 index.html -

```
http://localhost:8080/testrunner/
```

***当前解决方案***- 解决此问题的方法是简单地重新部署应用程序 B 并且我很高兴，即我是应用程序 A 调用应用程序 B。

***问题***-

1.  但我的问题是为什么我应该得到这个错误以及如何在不重新部署应用程序 B 的情况下克服这个问题。
2.  另外，当我执行当前解决方案时，登录页面会在 eclipse 的浏览器中加载，但在 FF 浏览器中没有加载。不确定这里缺少什么。

任何帮助/线索将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T11:46:18.410

从提供的细节我可以说

您已将应用程序部署为`testrunner`. 因此，来自给定部署描述符的`http://localhost:8080/testrunner/`调用。`index.html``welcome-file-list`

```
404 or Not Found error message is a HTTP standard response code indicating that the
client was able to communicate with the server, but the server could not find what was
requested. 
```

当您这样做时`http://localhost:8080/testrunner/login`，服务器找不到任何名为`\login`. 因此，请检查您的应用程序中是否有“”映射，`/login`称为“testrunner”

# javascript - 在循环中动态添加到列表

> ID：11557599
> 
> 赞同：0
> 
> 时间：2012-07-19T09:15:04.130
> 
> 标签：javascript, jquery

在这个小提琴中，按钮被动态地附加到一个循环中。如何更新代码以便每个按钮在循环中只添加一次而不是多次？我认为这是因为克隆方法？

[http://jsfiddle.net/8JXTT/9/](http://jsfiddle.net/8JXTT/9/)

小提琴代码：

```
<div data-role="page" id="firstpage">

        <div data-role="header">
                <h1>First Page</h1>
        </div>

<div data-role="content" id="links">
        <a href="#secondpage" data-role="button">Link button</a>
</div>

        <div data-role="footer">
                <h4>Page Footer</h4>
        </div>

</div>

<div data-role="page" id="secondpage">

        <div data-role="header">
                <a href='#' class='ui-btn-left' data-icon='arrow-l' onclick="history.back(); return false">Back</a><h1>Bar</h1><a href="#firstpage">home</a>
        </div>

        <div data-role="content">
                <p>I'm first in the source order so I'm shown as the page. (this is secondpage)</p>
                <p><a href="#thirdpage">Go to third page</a></p>
        </div>

        <div data-role="footer">
                <h4>Page Footer</h4>
        </div>
</div>
​
$(document).ready(function() {

    for (var i = 0; i < 4; i++) {
    var linkButton = $('#links a').clone(true);
    linkButton.find('span.ui-btn-text').text('Link Button2');
    $('#links').append(linkButton);
}

});​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T09:16:54.660

```
$(document).ready(function() {
    for (var i = 0; i < 4; i++) {
      var linkButton = $('#links a:first').clone(true); // clone first one only
      linkButton.find('span.ui-btn-text').text('Link Button2');
      $('#links').append(linkButton);
    }
});​ 
```

## **[演示](http://jsfiddle.net/8JXTT/14/)**

**或者**

```
$(document).ready(function() {
    var linkButton = $('#links a').clone(true); // keep reference outside of loop
    for (var i = 0; i < 4; i++) {
      linkButton.find('span.ui-btn-text').text('Link Button2');
      $('#links').append(linkButton.clone(true));
    }
}); 
```

## **[演示](http://jsfiddle.net/8JXTT/13/)**

在您的代码`clone()`方法中，复制所有`a`标签中存在的所有标签`#links`。

# java - 在 Struts 的每个方法中自定义要序列化为 json 的内容

> ID：11557600
> 
> 赞同：1
> 
> 时间：2012-07-19T09:15:04.537
> 
> 标签：java, json, serialization, struts2

我有一个 Struts 2 应用程序，我正在使用 JSON 将信息发送到基于 Ajax 的客户端。现在负载模型发生了一些变化，变得非常复杂，应用程序太慢了。所以我需要减少在每种情况下序列化的字段。所以我有这样的事情：

使用某些方法检索对象列表的一些操作：

```
public class FooAction{
    private List<FooObject> fooObjects;

    public List<FooObject> list1(){ ... };

    public List<FooObject> list2(){ ... };

} 
```

例如模型中的这个对象。

```
public class FooObject{
    private String foo1;
    private String foo2;
    private String foo3;
    private String foo4;
} 
```

在该模型中，假设我在来自 Ajax 的任何调用中都不需要第 4 个属性，因此我添加了 JSON 注释以避免它被序列化。

```
public class FooObject{
    private String foo1;
    private String foo2;
    private String foo3;
    private String foo4;

    @JSON(serialize=false)
    public String getFoo4(){...}
} 
```

问题是这样的。

*   在`list1()`我只需要`foo1`and的方法`foo2`中，所以我想避免`foo3`只在这个方法中序列化
*   在`list2()`我只需要`foo1`and的方法`foo3`中，所以我想避免`foo2`只在这个方法中序列化

所以问题是它是否是一种简单的方法来自定义每个方法中应该序列化哪些属性。如果我可以自定义它，例如在 struts 的 xml 中，那就太好了：

```
<action name="list1" class="fooObject" method="list1">
    <result type="json"/>
</action>

<action name="list2" class="fooObject" method="list2">
    <result type="json"/>
</action> 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T11:18:59.527

您可以查看文档的[自定义序列化和反序列化](http://struts.apache.org/2.2.3/docs/json-plugin.html)部分`struts2`。我认为这会对你有所帮助。

# jquery - 无法为动态生成的 Ckeditor 分配 Id

> ID：11557601
> 
> 赞同：0
> 
> 时间：2012-07-19T09:15:04.827
> 
> 标签：jquery, iframe, ckeditor

我在一个页面中动态生成了许多 ckeditor 实例，并且在 ckeditor 的 instanceReady 函数中，我获取了每个 ckeditor 的实例，并从那里获得了我分配 id 的 iFrame 引用。现在，当我说 iFrameDocument.getElementById(assignedIframeId) 时分配了一个 id 后，我无法找到 iFrame。这是我的代码：

```
<html>
<body>
    <!-- This is the template. The div tag with class="contents" will be replaced with CKEditor -->
    <script type="text/html" id="PS_ItemViewModel-template">
        <div id="mgrComments" class="document comment-region">
            <div class="contents" data-bind="html : mgrComments"></div>
        </div>
    </script>
            <!-- looping the template based on the number of items -->
            <div class="ps-item-container" data-bind="foreach : psItems">
       <div data-bind="template : {'name' : 'PS_ItemViewModel-template'}, event 
:   {psItemSetupEditor : _setupEditor, psItemRefreshEditor : _refreshEditor}"></div>                                                    
             </div>
</body>
</html>

// In the javascript file ...
    self._setupEditor = function(data, event){
    var domNode = event.currentTarget;
    self.editor = self._injectEditorInstance($(domNode).find('div#mgrComments   div.contents'), self.mgrComments, self.headerNode, self.criterionNodes);
}

self._injectEditorInstance = function(commentNode, initialText, headerNode, criterionNodes) {
    $('div#editor-toolbar').show();

    commentNode.ckeditor(function(){
        console.log("Inside commentNode.ckeditor ...");
        var editor = this;

        this.setData(initialText, function(){
            //Handles direct changes to editor contents
            editor.on('setData', function() {
                self.editorChangeHandler(editor);
            });

            //Handles paste
            editor.on('paste', function() {
                console.log("In paste event ...");
                self.editorChangeHandler(editor);
            });
        });
    }, {customConfig : '/simple_eval/js/ckeditor/SimpleEvalEditorConfig.js'});

    return commentNode.ckeditorGet();   
};

$(document).ready(function() {  

CKEDITOR.on("instanceReady", function(e) {
    console.log("In instanceReady ...................................");
    var assignedId  =   e.editor.name + "jspell";
    $("#cke_contents_" + e.editor.name+" iframe").attr("id", assignedId);
    var iframeDoc   =   null;
    $('#'+assignedId).each( 
                function(){ iframeDoc=this.contentWindow.document;}
                );
            console.log(" innerDoc Element = "+iframeDoc.getElementById(assignedId));
    fieldsToCheck[fieldsToCheck.length] = [iframeDoc, assignedId];
    jspellInit();
   });

});

var fieldsToCheck = new Array();
function getSpellCheckArray() { 
console.log("In getSpellCheckArray ...................................");
   return fieldsToCheck;
} 
```

在上面的代码中，当我说 console.log(" innerDoc Element = "+iframeDoc.getElementById(assignedId)); 它打印出 null，这意味着在 iframe 文档中找不到该元素。有人可以建议我如何将 id 分配给 ckeditor 的 iframe，以便可以使用 iframe 分配的 id 来检索它。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T10:04:33.167

您可以为每个实例的 HTML 分配一个 ID，`<body>`并使用它来获取内容块。

因为您正在创建多个实例，所以我假设您正在使用`CKEDITOR.replaceAll()`.

您可以在创建实例时为每个内容正文分配一个 ID。我通过在`<body>`ID 中添加“body”来创建`<textarea>`ID。

```
CKEDITOR.replaceAll( function(textarea, config) {    
  // Assume all textareas to be edited will have class "ckeditor"
  if (!(textarea.className=="testing")) {
    return false;
  }

  config.bodyId = textarea.id + 'body';
}); 
```

* * *

然后在“instanceReady”函数中，获取实例名称（与 textarea ID 相同）并为其添加“body”，这将为您提供包含要进行拼写检查的文本的内容区域的 ID。

您可以使用`e.editor.document`.

```
var fieldsToCheck;

CKEDITOR.on("instanceReady", function(e) {
  console.log(e.editor.name);
  console.log(e.editor.document);

  var assignedId = e.editor.name + "body";
  fieldsToCheck[fieldsToCheck.length] = [e.editor.document, assignedId];
}); 
```

* * *

如果需要在`fieldsToCheck`触发拼写检查时设置数组，可以循环遍历实例数组。

```
$("#test_button").click(function(){
  var fieldsToCheck;

  $.each(CKEDITOR.instances, function () {
    console.log(this.name);
    console.log(this.document);

    var assignedId = this.name + "body";
    fieldsToCheck[fieldsToCheck.length] = [this.document, assignedId];
  });
}); 
```

* * *

**7月26日更新**

我拿了你的文件准备部分并做了一些更改。我注释掉了我替换的项目，并将新版本放在注释掉的部分下方。正在为 iframe 分配 ID。我不知道为实例分配了哪些名称，但只要它们是唯一的，ID 就将是唯一的。

这可能不是很明显，但 CkEditor`on.instanceReady`方法会为每个创建的实例单独调用，因此您可能希望将`jspellInit()`函数调用移到函数之外，并在所有实例都添加到数组后`instanceReady`让它与数组一起工作。`fieldsToCheck`

我还添加了一些`console.log()`包含实际 CkEditor 对象的语句。如果需要更改某些内容，您可以查看可用的属性和方法。

请务必阅读最后的**说明**。

```
$(document).ready(function() {  
    var fieldsToCheck=new Array();
    var editorCount = 0;

    CKEDITOR.on("instanceReady", function(e) {
        console.log("In instanceReady ...................................");
        console.log(e);
        console.log(e.editor);

        var assignedId  =   e.editor.name + "jspell";

    //    $("#cke_contents_" + e.editor.name+" iframe").attr("id", assignedId);
        $("#cke_contents_" + e.editor.name+" iframe").context.activeElement.id = assignedId;

    //    var iframeDoc   =   null;    
        var iframeDoc = $('#'+assignedId)[0].contentDocument;

    //    $('#'+assignedId).each( 
    //        function(){ iframeDoc=this.contentWindow.document;}
    //    );

    //    This won't work, iframeDoc is inside the iFrame with id=assignedId
    //    console.log(" innerDoc Element = "+iframeDoc.getElementById(assignedId));
        console.log(iframeDoc);

        var editorBody = e.editor.document.getBody();
        editorBody.setAttribute("id", "TESTsetBODYid"+editorCount);
        console.log(editorBody);
        editorCount += 1;

        fieldsToCheck[fieldsToCheck.length] = [iframeDoc, assignedId];
        console.log(fieldsToCheck);
        jspellInit();
    });
}); 
```

* * *

**笔记**

我没有使用过 jSpell，所以我不确定您真正需要将什么放入`fieldsToCheck`数组中，但现在包含在 iframe 中找到`iframeDoc`的完整 HTML 代码 ( )。`<head> and <body>`该`assignedId`变量包含 iframe 的 ID。

在我看来，要进行拼写检查，您需要元素的内容，所以我在创建数组之前`<body>`包含了一个方法示例。我还提供了一个如何设置正文 ID 的示例。`getBody()``fieldsToCheck`

# r - 如何在 R 中对数据进行加权

> ID：11557602
> 
> 赞同：0
> 
> 时间：2012-07-19T09:15:04.530
> 
> 标签：r

> **可能重复：**
> [加权皮尔逊相关性？](https://stackoverflow.com/questions/9460664/weighted-pearsons-correlation)

我已将 SPSS 文件中的数据导入 R。现在我需要对加权数据运行相关性。数据文件名为wave1。

如果我写`cor(wave1)`它，它将所有变量甚至权重变量关联起来，并且不对数据进行加权。

首先，是否可以对数据进行加权，然后在不包括权重的情况下进行分析。例如相关性、线性模型。

如果不是，我如何在 R 中运行与加权数据的相关性？

# java - 签署证书的解决方案

> ID：11557604
> 
> 赞同：0
> 
> 时间：2012-07-19T09:15:12.400
> 
> 标签：java, security, ssl, certificate, jsse

对于具有多个应用服务器和多个客户端的系统，我想介绍相互身份验证以及 TLS 提供的其他安全保护。

服务器和客户端可能位于不同的网络上，也可能位于同一网络上。

每个实体（客户端或服务器）都有自己的存储其私钥/公钥对的密钥库和包装公钥的 X.509 证书。但是，此时，证书是自签名的。因此，它不会被其他通信实体验证。经过一番研究，我研究了一些解决方案：

1.  创建将签署证书的私有 CA。如果我理解得很好，CA 的证书必须存在于每个实体的信任库中，以便其他实体的证书可以使用 CA 的证书进行验证。
2.  创建私有 CA 作为第一个解决方案。但是，私有 CA 的证书是由商业 CA（例如 Verisign）签署的。我不知道它为以前的解决方案增加了什么。
3.  由商业 CA 签署每个实体的证书。但这种解决方案似乎很昂贵。
4.  仅使用自签名证书。每个实体的证书都是由它自签名的，并且必须添加到它想要与之通信的每个实体的信任库中。

这是我第一次接触安全。在您认为有效的解决方案中，您推荐哪一种？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T09:50:12.203

我已经为您的选项编号以便于阅读。

您的选项 4 具有与第一个选项相当的安全性和管理细节。即，您的选择范围缩小到自己与第三方 CA 服务。虽然您可以从 CA 机构购买自己的 CA 证书，但它会花费很多，emm。但是“很多”是多少是由CA销售人员根据具体情况确定的。

就管理复杂性而言，我将它们按以下顺序排列（首先是最简单的）：3、1、2、4

在选项 1、2、4 中，您必须管理您的证书，这需要了解 PKI 及其安全程序（除了纯技术之外，您还需要确保私钥受到保护）以及用于证书生成和管理的软件（openssl 等）对于大多数活动来说还不够，很可能您需要编写自己的代码来生成证书）。

拥有一个 OCSP 服务器也是一个好主意，在选项 1、2、4 的情况下您必须自己运行它。

# css - 使用 css 中的浮点数创建 3 x 3 矩阵

> ID：11557605
> 
> 赞同：1
> 
> 时间：2012-07-19T09:15:12.163
> 
> 标签：css

> **可能重复：**
> [如何在 css 中使用浮动创建表格布局](https://stackoverflow.com/questions/11526261/how-to-create-a-table-layout-with-float-in-css)

我想使用 css 的 float 属性创建 3 x 3 矩阵。列必须具有相等的高度和宽度，并且可以跨浏览器压缩。我希望列的高度必须是一行中最大列的高度

**CSS**

```
 div.outer
 {
   width:700px;
   float:left;
   position:relative;
   overflow:hidden;
  }

div.inner
{
   width:700px;
  float:left;
  position:relative;

}

div.content
{  width:700px;
   float:left;
   position:relative;

}
span.std
{
  width:500px;
  float:left;
  position:relative;
}
span.std span.std-content
{
   float:left;
   width:250px;
   position:relative;

 } 
```

**代码**

```
<div class="inner">
    <div class="content">
    <span class="std">
    <span class="std-content">
       Column 1 Column 1Column 1Column 1Column 1Column 1Column 1Column 1Column 1Column 1Column 1Column 1Column 1Column 1Column 1Column 1</p>

    </span>
    <span class="std-content">
          Column 2

    </span>
    </span>

    </div>
</div>

</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T09:23:33.130

这将适用于所有浏览器。

**演示：http:** [//jsfiddle.net/ThinkingStiff/K9bjX/](http://jsfiddle.net/ThinkingStiff/K9bjX/)

### 输出

![网格](../Images/5eff9c480259b40f59bae11da31fb7b9.png)

### HTML

```
<div id="grid">
    <div class="cell"></div>
    <div class="cell"></div>
    <div class="cell"></div>
    <div class="cell"></div>
    <div class="cell"></div>
    <div class="cell"></div>
    <div class="cell"></div>
    <div class="cell"></div>
    <div class="cell"></div>
<div>​ 
```

### CSS

```
#grid {
    width: 300px;
    height: 300px;        
}

.cell {
    outline: 1px solid red;
    float: left;
    height: 100px;
    width: 100px;    
} 
```

# javascript - DOMPDF 字体更改

> ID：11557607
> 
> 赞同：0
> 
> 时间：2012-07-19T09:15:23.417
> 
> 标签：javascript, pdf-generation, dompdf

使用 DOM PDF 创建一些报告，但是我唯一遇到的问题是设置无衬线字体。

我已经尝试了几乎所有在 CSS 中设置字体的方法，但它总是以衬线字体呈现。

我不是要渲染自定义字体，只是像 helvetica 或 arial 这样简单的字体。

有没有其他人遇到过这个问题或知道为什么它可能默认为衬线？

注意：应用程序在 CodeIgnitor 上运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T10:04:42.817

您可以在 dompdf_custom_config.inc.php 文件中更改为您想要的任何字体，或者您可以指定字体详细信息，您将如何在 html 和 css 文件中指定它将起作用。因为 Dompdf 允许 css 属性

# ruby-on-rails - 如何让第一个用户成为 Devise gem 中的管理员？

> ID：11557609
> 
> 赞同：2
> 
> 时间：2012-07-19T09:15:30.817
> 
> 标签：ruby-on-rails, devise

我想让第一个用户成为管理员。

所以我有字符串属性管理员，我需要在过滤或覆盖设计注册控制器之前做一些。就像是：

```
if User.first?
  User.admin = "admin"
  User.save
end 
```

这是设计regitration动作

```
 def new
  resource = build_resource({})
  respond_with resource
end 
```

这样做的更好方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T09:35:13.567

假设您的代码不经常运行（仅在第一次在生产环境中运行您的应用程序时），我会简单地编写一个 Rake 任务为您执行一次，而不是使您的应用程序代码混乱。

把这个放在你的`Rakefile`

```
task :promote_admin => :environment do
  User.first.update_attribute('admin', 'admin')
end 
```

通过这种方式，您可以保持代码干净，同时在安装过程中仍然可以通过一种非常简单的方式来提升第一个用户。

如果您想提升第一个用户，您只需`rake promote_admin`从控制台运行，第一个用户将被提升为管理员。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T09:36:12.500

更好的方法是将`admin`字段设置为`boolean`. 并将以下内容添加`before_filter`到您的模型中。

```
class User < ActiveRecord::Base
  before_save :set_admin

  private
  def set_admin
    self.admin = User.count == 0
  end
end 
```

为了使其完美运行，您可以在迁移文件中包含以下内容

```
create_table(:users) do |t|
  t.boolean :admin, null: false, default: false
  ...
end 
```

这将使第一个用户成为管理员。此外，当您删除所有用户然后新用户注册时，这个新用户将是管理员。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-19T12:12:32.290

它对我不起作用，我不得不像这样更改它：

```
class User < ActiveRecord::Base

  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable

  after_create :set_admin

  private
  def set_admin
   if  User.count == 1
     User.first.update_attribute(:admin, true)
   else
     return true
   end
  end
end 
```

# mysql - Play 2.0 未找到 MySQL 驱动程序

> ID：11557611
> 
> 赞同：2
> 
> 时间：2012-07-19T09:15:42.127
> 
> 标签：mysql, playframework-2.0, scalaquery

我正在尝试将 ScalaQuery 与 play 2 一起使用，但我不断收到““没有合适的驱动程序...”错误。数据库连接与 Anorm/Nina 一起工作正常。这是我的 ScalaQuery 代码：

```
object Client extends Table[(Int, String)]("Client") {
val database = Database.forURL("jdbc:mysql://localhost/play2test", driver = "com.mysql.jdbc.Driver" , user="root", password="root")

  def id = column[Int]("id", O NotNull, O AutoInc)

  def name = column[String]("name", O NotNull)

  def * = id ~ name
  def findAll = database.withSession {
    implicit db: Session =>
      (for (t <- this) yield t.id ~ t.name).list
  }
} 
```

我添加了 sbt 依赖项：

```
"mysql" % "mysql-connector-java" % "5.1.21" 
```

我在 application.conf 上有这个

```
db.default.driver=com.mysql.jdbc.Driver
db.default.url="mysql://root:root@127.0.0.1/play2test"
db.default.user=root
db.default.password=root 
```

（我尝试将 forDataSource 方法与 play 的 DB.getDataSource() 一起使用，但没有得到更好的结果）

一件尴尬的事情是我无法导入 com.mysql._，所以显然驱动程序甚至没有被下载（尽管 sbt 说它已经下载了）。我什至尝试下载 jar 并将其手动添加到我的项目下的 /lib 文件夹中，但导入仍然无法正常工作。

我被困住了，我需要一点帮助。:(

编辑：我删除了“jdbc:mysql://localhost/play2test”并重写了它（在另一个线程上找到了那个提示），现在我遇到了一个新问题：

```
[MySQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '."id","t1"."name" FROM "Client" "t1"' at line 1] 
```

为什么 ScalaQuery 对 MySQL 使用双引号以及如何更改它？

Edit2：问题解决了，我对 ScalaQuery 的 SQL 驱动程序的导入错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T10:29:21.170

I copy/pasted an O2 based code and forgot to change the SQLDriver import:

```
import org.scalaquery.ql.extended.MySQLDriver.Implicit._ 
```

# openerp - 是否有任何关于框架重要表的 openerp 文档

> ID：11557613
> 
> 赞同：3
> 
> 时间：2012-07-19T09:16:03.577
> 
> 标签：openerp

是否有任何可用的文档描述 openobject 框架的重要表（不是插件）和框架内从文件到文件的控制流，最好是 6.1？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T11:58:05.403

他们没有这样的文件来突出 OpenEPR 的重要表格，但如果你想检查我会建议查看以下文件：

文件`server/openerp/addons/base/base.sql`是为 OpenERP 准备 BASE 的最重要的文件。

对于 OpenERP 服务 检查以下文件

*   服务器/openerp/service/http_server.py
*   服务器/openerp/service/netrpc_server.py
*   服务器/openerp/service/security.py
*   server/openerp/service/web_services.py [托管 Fice Web 服务在这里]
*   服务器/openerp/service/websrv_lib.py

称为 ORM 的核心开放对象框架位于：

*   服务器/openerp/osv/expression.py
*   服务器/openerp/osv/fields.py
*   服务器/openerp/osv/orm.py
*   服务器/openerp/osv/osv.py
*   服务器/openerp/osv/query.py

新的**WSGI**服务在这里管理： - server/openerp/wsgi/core.py - server/openerp/wsgi/proxied.py

数据库、模块和注册表和负载管理器：

*   服务器/openerp/modules/db.py
*   服务器/openerp/modules/graph.py
*   服务器/openerp/modules/loading.py
*   服务器/openerp/modules/migration.py
*   服务器/openerp/modules/module.py
*   服务器/openerp/modules/registry.py

所有内部资源，此表用于 ERP 的内部使用，例如视图、操作、服务器操作：

*   服务器/openerp/addons/base/ir/ir_actions.py
*   服务器/openerp/addons/base/ir/ir_attachment.py
*   服务器/openerp/addons/base/ir/ir_config_parameter.py
*   服务器/openerp/addons/base/ir/ir_cron.py
*   服务器/openerp/addons/base/ir/ir_default.py
*   服务器/openerp/addons/base/ir/ir_exports.py
*   服务器/openerp/addons/base/ir/ir_filters.py
*   服务器/openerp/addons/base/ir/ir_mail_server.py
*   服务器/openerp/addons/base/ir/ir_model.py
*   服务器/openerp/addons/base/ir/ir_model_constraint.py
*   服务器/openerp/addons/base/ir/ir_model_relation.py
*   服务器/openerp/addons/base/ir/ir_needaction.py
*   服务器/openerp/addons/base/ir/ir_rule.py
*   服务器/openerp/addons/base/ir/ir_sequence.py
*   服务器/openerp/addons/base/ir/ir_translation.py
*   服务器/openerp/addons/base/ir/ir_ui_menu.py
*   服务器/openerp/addons/base/ir/ir_ui_view.py
*   服务器/openerp/addons/base/ir/ir_values.py

工作流服务位于此文件下：

*   服务器/openerp/工作流/common.py
*   服务器/openerp/工作流/instance.py
*   服务器/openerp/工作流/wkf_expr.py
*   服务器/openerp/工作流/wkf_service.py
*   服务器/openerp/工作流/workitem.py

好吧，这是要检查的大量文件，但我想在此之后您不需要任何其他帮助，您将了解所有 OpenERP。

谢谢

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T23:43:12.310

The closest thing I have found is the [developer book](http://doc.openerp.com/v6.1/developer/index.html), particularly the [architecture chapter](http://doc.openerp.com/v6.1/developer/02_architecture.html) and the [list of ORM methods](http://doc.openerp.com/v6.1/developer/03_modules_2.html#orm-methods), although it doesn't give much internal detail. Most of that documentation tells you how to build a module on top of the framework without explaining how the framework actually runs.

I have learned most of what I know about the internal workings by [tracing through the code in Eclipse](https://stackoverflow.com/a/9086069/4794). Either pause the application before making a request, set a breakpoint early in the [dispatch chain](http://bazaar.launchpad.net/~openerp/openobject-server/6.1/view/head:/openerp/service/web_services.py#L575), or put a breakpoint in a specific model method that you want to follow. The workflow code was particularly difficult for me to understand.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-03T16:02:32.373

不。

此外，在回答的那一刻，官方文档是 6.1、7 和 8 版本的部分文档的混合。

# android - 无法停止媒体播放器？

> ID：11557624
> 
> 赞同：1
> 
> 时间：2012-07-19T09:16:47.183
> 
> 标签：android

当用户进入此活动时，会播放一首歌曲。当他离开这个活动时，一切正常，但是当用户再次进入这个活动时，会播放一首新歌而不会停止旧歌。当用户再次访问此活动时，我如何停止第一首歌曲？

公共类 MediaPlay1 扩展 Activity {

```
private SeekBar seekvolume, seekcontrol;
private TextView txtcrnt, txtremain, txtcrntbig,txttitle;
private ImageButton btnpre, btnnext, btnplay, btnrepeat;
private AudioManager audioManager;
private MediaPlayer mediaPlayer;
private String kg1;
private String MixName1;
private Button btnback, btnplayer;
String MixReplace;
private boolean isDownloading = true;
Handler handler = new Handler();
private boolean isRepeat=false;
private int i = 0;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.media3);

    mediaPlayer = new MediaPlayer();
    initViews();

    if(kg1 != null && MixName1 != null)
    {
    Intent i1 = getIntent();
    kg1 = i1.getStringExtra("Kggg1");
    MixName1 = i1.getStringExtra("mixname1");
    MixReplace=MixName1.replace(".mp3", "  ");
    }else{

    }

}
private void initViews() {

    audioManager = (AudioManager) getSystemService(Context.AUDIO_SERVICE);
    txtcrnt = (TextView) findViewById(R.id.txtcurnt);
    txtremain = (TextView) findViewById(R.id.txtremain);
    txtcrntbig = (TextView) findViewById(R.id.txtcrntbig);
    txttitle=(TextView) findViewById(R.id.title);
    btnpre = (ImageButton) findViewById(R.id.btnpre);
    btnnext = (ImageButton) findViewById(R.id.btnnext);
    btnplay = (ImageButton) findViewById(R.id.btnplay);
    btnrepeat=(ImageButton) findViewById(R.id.btnrepeat);
    btnback = (Button) findViewById(R.id.btnlout);
    btnplayer = (Button) findViewById(R.id.btnedit);
    btnback.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            ((MyMixes)getParent()).goBack();
        }
    });

    btnplayer.setClickable(true);
    btnplayer.setEnabled(false);
    btnplayer.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

        }
    });

    if(btnrepeat.isPressed())
    {
        mediaPlayer.setLooping(true);
    }
    txttitle.setText(MixReplace);

    seekcontrol=(SeekBar) findViewById(R.id.seekbarcontrol);

    seekcontrol.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {

        public void onStopTrackingTouch(SeekBar seekBar) {
        }

        public void onStartTrackingTouch(SeekBar seekBar) {

        }

        public void onProgressChanged(SeekBar seekBar, int progress,
                boolean fromUser) {
            if(fromUser){
                mediaPlayer.seekTo(progress);
                seekcontrol.setProgress(progress);
            }

        }
    });

    btnplay.setOnClickListener(new OnClickListener() {

        public void onClick(View paramView) {
                    btnClick();

        }
    });

    new Thread(new Runnable() {

        @Override
        public void run() {
            try {
                Thread.sleep(3000);
                btnplay.setClickable(false);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
    });
    btnplay.setClickable(true);

    btnnext.setOnClickListener(new OnClickListener() {

        public void onClick(View paramView) {

        }
    });

    btnpre.setOnClickListener(new OnClickListener() {

        public void onClick(View paramView) {

        }
    });

    seekvolume = (SeekBar) findViewById(R.id.seekbarvolume);

    new Thread()
    {
        public void run() 
        {
            while (isDownloading)
            {
                if (Data.filenames != null&& Data.filenames.size() >= (getIntent().getExtras().getInt("index") + 1) && Data.filenames.get(getIntent().getExtras().getInt("index")) != null) 
                {
                    try 
                    {

                        String path = Data.filenames.get(getIntent().getExtras().getInt("index"));
                        mediaPlayer.setDataSource(path);
                        mediaPlayer.prepare();
                        mediaPlayer.start();
                        startPlayProgressUpdater();
                        mediaPlayer.setOnCompletionListener(new OnCompletionListener() 
                        {
                            @Override
                            public void onCompletion(MediaPlayer mp) 
                            {
                                mediaPlayer.seekTo(0);
                            }
                        });
                        mediaPlayer.setOnErrorListener(new OnErrorListener() {

                            @Override
                            public boolean onError(MediaPlayer mp, int what, int extra) {
                                return false;
                            }
                        });
                    } catch (IllegalArgumentException e) {
                        e.printStackTrace();
                    } catch (IllegalStateException e) {
                        e.printStackTrace();
                    } catch (IOException e) {
                        e.printStackTrace();
                    } catch (Exception e) {
                        e.printStackTrace();
                    } finally {
                        isDownloading = false;
                    }

                    if (mediaPlayer != null)
                        seekcontrol.setMax(mediaPlayer.getDuration());

                    int maxvolume = audioManager
                            .getStreamMaxVolume(AudioManager.STREAM_MUSIC);
                    int curntvolume = audioManager
                            .getStreamVolume(AudioManager.STREAM_MUSIC);

                    seekvolume.setMax(maxvolume);
                    seekvolume.setProgress(curntvolume);

                    seekvolume
                            .setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {

                                public void onStopTrackingTouch(
                                        SeekBar paramSeekBar) {
                                }

                                public void onStartTrackingTouch(
                                        SeekBar paramSeekBar) {
                                }

                                public void onProgressChanged(
                                        SeekBar paramSeekBar, int progress,
                                        boolean paramBoolean) {
                                    audioManager.setStreamVolume(
                                            AudioManager.STREAM_MUSIC,
                                            progress, 0);
                                }
                            });
                    seekcontrol.setMax(mediaPlayer.getDuration());

                    seekcontrol.setOnTouchListener(new OnTouchListener() {
                        public boolean onTouch(View v,
                                MotionEvent paramMotionEvent) {
                            seekChange(v);
                            return false;
                        }
                    });
                }
            }
        };
    }.start();
}

protected void btnClick() {
    i++;
    i = i % 2;
    startSong(i);
}

private void startSong(int i) {
    if (i == 0) {
        System.out.println("11111" + i);
        btnplay.setImageResource(R.drawable.pause);
        try {
            System.out.println("start try chech------");
            mediaPlayer.start();
            startPlayProgressUpdater();
        } catch (Exception e) {
            mediaPlayer.pause();
        }
    }
    if (i == 1) {
        btnplay.setImageResource(R.drawable.play);
        mediaPlayer.pause();
        System.out.println("00000" + i);
    }
}

private Handler my_handler = new Handler() {
    public void handleMessage(Message msg) {
        seekcontrol.setProgress(msg.arg1);
        super.handleMessage(msg);
    }
};

public void startPlayProgressUpdater()
  {
   Message objmessage =  my_handler.obtainMessage();

    boolean isPlaying = mediaPlayer.isPlaying();

    if (isPlaying) {

         objmessage.obj = mediaPlayer.getCurrentPosition();
        Runnable notification = new Runnable() {
            public void run() {
                startPlayProgressUpdater();

                int curtimeplay = mediaPlayer.getCurrentPosition();
                int curntseconds = (int) (curtimeplay / 1000) % 60;
                int curntminutes = (int) ((curtimeplay / (1000 * 60)) % 60);
                txtcrnt.setText(curntminutes + ":" + curntseconds);
                txtcrntbig.setText(curntminutes + ":" + curntseconds);

                int duratplay = mediaPlayer.getDuration();
                int totaldurationseconds = (int) (duratplay / 1000) % 60;
                int totaldurationminutes = (int) ((duratplay / (1000 * 60)) % 60);
                int remianingtime = duratplay - curtimeplay;
                int remianingtimeseconds = (int) (remianingtime / 1000) % 60;
                int remianingtimeminutes = (int) ((remianingtime / (1000 * 60)) % 60);
                txtremain.setText(remianingtimeminutes + ":"    + remianingtimeseconds);
            }
        };
        handler.postDelayed(notification, 1000);
    }
    else 
    {

        mediaPlayer.pause();

        btnplay.setImageResource(R.drawable.play);

    }

    objmessage.arg1 = mediaPlayer.getCurrentPosition();
    my_handler.sendMessage(objmessage);
}

protected void seekChange(View v) {
        if (mediaPlayer.isPlaying()) {
            SeekBar sb = (SeekBar) v;
            mediaPlayer.seekTo(sb.getProgress());
        }
    }
@Override
public void onBackPressed() {
    ((MyMixes)getParent()).goBack();
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T09:19:49.803

您正在调用`mediaPlayer.start()`以启动 mediaPlayer。你在哪里打电话`mediaPlayer.stop()`阻止它？根据需要在按钮单击或某处，或在活动的方法中调用`onStop()`停止`onPause()`。

# android - Tabhost + 片段

> ID：11557630
> 
> 赞同：0
> 
> 时间：2012-07-19T09:17:00.193
> 
> 标签：android

我已经看到包含面板的应用程序带有不会将用户引导到其他活动的选项卡。我想，这就是 TabHost + Fragment 元素被使用的地方。

您能否就实现此功能提供您的假设/警告/链接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T09:27:21.800

使用时可以利用 ViewPager。

首先在你的布局中包含 ViewPager（你可以使用旧版本的兼容性包中的那个）：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <android.support.v4.view.ViewPager
        android:id="@+id/pager"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1" />

</RelativeLayout> 
```

要将多个 Fragment 加载到 ViewPager 中，您必须实现 FragmentPagerAdapter：

```
public class MyPagerAdapter extends FragmentPagerAdapter {
    private Fragment fragment1;
    private Fragment fragment2;

    public ChartPagerAdapter(FragmentManager fm, Context context) {
        super(fm);
        fragment1 = new MyFragment();
        fragment2 = new MyFragment();
    }

    @Override
    public Fragment getItem(int position) {
        switch (position) {
            case 0:
                return fragment1;
            case 1:
                return fragment2;

        }
    }

    @Override
    public int getCount() {
        return 2;
    }

    @Override
    public String getPageTitle(int position) {
        switch (position) {
            case 0:
                return "Title 1";
            case 1:
                return "Title 2";
        }
    }
} 
```

然后将此适配器设置为 ViewPager：

```
 setContentView(R.layout.my_layout);

    MyPagerAdapter adapter = new MyPagerAdapter(getSupportFragmentManager(), MyActivity.this);

    ViewPager pager = (ViewPager)findViewById(R.id.pager);
    pager.setAdapter(adapter); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T09:28:29.223

使用的好处`TabHost`是你可以把它放在任何地方。它可以作为一个`View`本身来实现。

这是我发现的两个两个很好的链接：

[带有片段的 Android 选项卡](http://android.codeandmagic.org/2011/07/android-tabs-with-fragments/)

[博客文章](http://thepseudocoder.wordpress.com/2011/10/04/android-tabs-the-fragment-way/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T09:37:37.967

您可以扩展`TabActivity`，如下所示：

```
public class NavigationBarActivity extends TabActivity (
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        setTabs();
    }

    private void setTabs(){
        TabHost tabHost = getTabHost(); // The activity TabHost    
        TabHost.TabSpec spec;           // Reusable TabSpec for each tab    
        Intent intent;                  // Reusable Intent for each tab

        LayoutInflater inflater = getLayoutInflater();

        // tab 1------------------------------
        View tabView = inflater.inflate(R.layout.tab1, null, false);
        ImageView tabImage = (ImageView)tabView.findViewById(R.id.tabImage);
         TextView tabText = (TextView)tabView.findViewById(R.id.tabText);

        // set icon
        tabImage.setImageResource(R.drawable.tab1);

        // set tab text
        tabText.setText(R.string.tab1);

        // Create an Intent to launch an Activity for the tab (to be reused)    
        intent = new Intent().setClass(this, Activity1.class);    
        // Initialize a TabSpec for each tab and add it to the TabHost
        spec = tabHost.newTabSpec("ta1");
        spec.setIndicator(tabView);
        spec.setContent(intent);
        tabHost.addTab(spec);

        // tab 2 -----------------------------------------
        tabView = inflater.inflate(R.layout.tab2, null, false);
        tabImage = (ImageView)tabView.findViewById(R.id.tabImage);
        tabText = (TextView)tabView.findViewById(R.id.tabText);

        // set icon
        tabImage.setImageResource(R.drawable.tab2); 

        // set tab text
        tabText.setText(R.string.tab2);

        intent = new Intent().setClass(this, ChatListActivity.class);    
        spec = tabHost.newTabSpec("tab2");
        spec.setIndicator(tabView);                  
        spec.setContent(intent);    
        tabHost.addTab(spec);

        tabHost.setOnTabChangedListener(this);
    }

    @Override
    public void onTabChanged(String tabId) {
        if(getTabHost().getCurrentTab() == 0) {
            // WE are on tab1 ...
        }       
    }
} 
```

# deployment - 生产部署中未在 sinatra 中编译 scss 和咖啡脚本

> ID：11557632
> 
> 赞同：0
> 
> 时间：2012-07-19T09:17:10.177
> 
> 标签：deployment, coffeescript, sinatra, sass

我是 Sinatra 的新手，所以也许这很愚蠢。

我只是做了一个简单的网站，所以我认为现在是尝试 sinatra 的时候了。根据 Sinatra 文档，我还包括在我的 sinatra 应用程序中包含以下`coffeescript`代码：`scss`

```
 #Needed for Coffeescript and SCSS
  get '/js/:script.js' do |script|
    coffee :"coffee/#{script}"
  end

  get '/css/:stylesheet.css' do |stylesheet|
    scss :"scss/#{stylesheet}"
  end 
```

它在开发中工作得很好，但是在我将它部署到我的登台环境（nginx +乘客）之后。`application.js`对and all的请求`application.css`返回 404。看起来他们没有被`coffee`and编译`scss`

我应该怎么办？

# sql - 存储过程在特定连接池上超时

> ID：11557635
> 
> 赞同：0
> 
> 时间：2012-07-19T09:17:29.507
> 
> 标签：sql, stored-procedures, timeout

我有一个存储过程，当从我们的网站（通过网站连接池）调用时偶尔会超时。一旦超时，它就会一直被锁定在超时状态，直到从 Management Studio 会话中使用 drop/create 或 sp_recompile 重新编译该过程。

在超时时，使用 Management Studio 对相同过程使用相同参数不会超时。

通过 Management Studio 执行“ALTER PROCEDURE”并（相当彻底地）更改过程的内部执行并没有清除超时 - 在运行完整的 sp_recompile 之前它不会清除。

存储过程以`OPTION (RECOMPILE)`

该过程调用了两个函数，它们在产品的其余部分中普遍使用。使用这些功能（以类似方式）的其他程序都可以工作，即使在相关程序超时的期间也是如此。

如果有人可以就可能导致此超时的原因提供任何进一步的建议，将不胜感激。

存储过程如下：

```
ALTER PROCEDURE [dbo].[sp_g_VentureDealsCountSizeByYear] (
  @DateFrom         AS DATETIME = NULL
  ,@DateTo          AS DATETIME = NULL
  ,@ProductRegion   AS INT = NULL
  ,@PortFirmID      AS INT = NULL
  ,@InvFirmID       AS INT = NULL
  ,@SpecFndID       AS INT = NULL
) AS BEGIN
-- Returns the stats used for Market Overview
DECLARE @IDs    AS IDLIST
INSERT INTO @IDs
    SELECT IDs
    FROM dbo.fn_VentureDealIDs(@DateFrom,@DateTo,@ProductRegion,@PortFirmID,@InvFirmID,@SpecFndID)

CREATE TABLE #DealSizes (VentureID INT, DealYear INT, DealQuarter INT, DealSize_USD DECIMAL(18,2))
INSERT INTO #DealSizes
    SELECT vDSQ.VentureID, vDSQ.DealYear, vDSQ.DealQuarter, vDSQ.DealSize_USD
    FROM dbo.fn_VentureDealsSizeAndQuarter(@IDs) vDSQ

SELECT 
    yrs.Years Heading
    ,COUNT(vDSQ.VentureID)          AS Num_Deals
    ,SUM(vDSQ.DealSize_USD) AS DealSize_USD  
FROM tblYears yrs
    LEFT OUTER JOIN #DealSizes vDSQ ON vDSQ.DealYear = yrs.Years
WHERE (
        ((@DateFrom IS NULL) AND (yrs.Years >= (SELECT MIN(DealYear) FROM #DealSizes))) -- If no minimum year has been passed through, take all years from the first year found to the present.
            OR
        ((@DateFrom IS NOT NULL) AND (yrs.Years >= DATEPART(YEAR,@DateFrom)))   -- If a minimum year has been passed through, take all years from that specified to the present.
    ) AND (
        ((@DateTo IS NULL) AND (yrs.Years <= (SELECT MAX(DealYear) FROM #DealSizes))) -- If no maximum year has been passed through, take all years up to the last year found.
            OR 
        ((@DateTo IS NOT NULL) AND (yrs.Years <= DATEPART(YEAR,@DateTo)))   -- If a maximum year has been passed through, take all years up to that year.
    )
GROUP BY yrs.Years
ORDER BY Heading DESC
OPTION (RECOMPILE)
END 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T09:54:49.330

如果您想在每次执行 SP 时重新编译它，您应该[使用 recompile](http://msdn.microsoft.com/en-us/library/ms189762.aspx)声明它；您的语法仅重新编译最后一次选择：

```
ALTER PROCEDURE [dbo].[sp_g_VentureDealsCountSizeByYear] (
  @DateFrom         AS DATETIME = NULL
  ,@DateTo          AS DATETIME = NULL
  ,@ProductRegion   AS INT = NULL
  ,@PortFirmID      AS INT = NULL
  ,@InvFirmID       AS INT = NULL
  ,@SpecFndID       AS INT = NULL
) WITH RECOMPILE 
```

我不知道您的程序的哪一部分会导致问题。您可以尝试注释掉选择部分以查看从表函数创建临时表是否会产生性能问题；如果没有，那么查询本身就是一个问题。您可以按如下方式重写过滤器：

```
WHERE (@DateFrom IS NULL OR yrs.Years >= DATEPART(YEAR,@DateFrom))
  AND (@DateTo   IS NULL OR yrs.Years <= DATEPART(YEAR,@DateTo)) 
```

或者，也许更好，声明 startYear 和 endYear 变量，相应地设置它们并更改如下：

```
declare @startYear int
set @startYear = isnull (year(@DateFrom), (SELECT MIN(DealYear) FROM #DealSizes))
declare @endYear int
set @endYear = isnull (year(@DateTo), (SELECT MAX(DealYear) FROM #DealSizes))
...
where yrs.Year between @startYear and @endYear 
```

如果 WITH RECOMPILE 不能解决问题，并且删除最后一个查询也没有帮助，那么您需要检查用于收集数据的表函数。

# joomla2.5 - 将下拉列表添加到 joomla 注册

> ID：11557636
> 
> 赞同：0
> 
> 时间：2012-07-19T09:17:34.110
> 
> 标签：joomla2.5

我想在 joomla 2.5 注册中添加一个下拉列表。我相信我可以使用 sql 表单字段类型，但我希望该 sql 返回特定城市的所有学校（在注册表中）。所以问题是 sql 查询将如何接受一个参数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T10:51:57.290

您必须在模型==> 字段中创建一种字段类型。

例如：创建一个 php 文件作为schools.php，然后包含以下代码。

==>学校.php（文件名）

```
defined('JPATH_BASE') or die;

class JFormFieldSchools extends JFormField
{   
protected $type = 'Schools';

protected function getInput()
{
    // Initialize variables.
    $html = array();
    $attr = '';

    // Initialize some field attributes.
    $attr .= $this->element['class'] ? ' class="'.(string) $this->element['class'].'"' : '';
    $attr .= ((string) $this->element['disabled'] == 'true') ? ' disabled="disabled"' : '';
    $attr .= $this->element['size'] ? ' size="'.(int) $this->element['size'].'"' : '';

    // Initialize JavaScript field attributes.
    $attr .= $this->element['onchange'] ? ' onchange="'.(string) $this->element['onchange'].'"' : '';

    // Get some field values from the form.
    $contactId  = (int) $this->form->getValue('id');
    $categoryId = (int) $this->form->getValue('catid');

    // Build the query for the ordering list.
    $query = 'SELECT ordering AS value, name AS text' .
            ' FROM #__contact_details' .
            ' WHERE catid = ' . (int) $categoryId .
            ' ORDER BY ordering';

    // Create a read-only list (no name) with a hidden input to store the value.
    if ((string) $this->element['readonly'] == 'true') {
        $html[] = JHtml::_('list.ordering', '', $query, trim($attr), $this->value, $contactId ? 0 : 1);
        $html[] = '<input type="hidden" name="'.$this->name.'" value="'.$this->value.'"/>';
    }
    // Create a regular list.
    else {
        $html[] = JHtml::_('list.ordering', $this->name, $query, trim($attr), $this->value, $contactId ? 0 : 1);
    }

    return implode($html);
}
} 
```

然后，您必须根据需要更改 mysql 查询。

如果必须在默认的 joomla 注册页面上进行更改，则具有以下路径（.../com_users/models/forms/registration.xml）。

```
 <field name="xxxxx" type="Schools"
description="COM_USERS_REGISTER_NAME_DESC"
filter="string"
label="COM_USERS_REGISTER_NAME_LABEL"
message="COM_USERS_REGISTER_NAME_MESSAGE"
required="true"
size="30" /> 
```

# svn - svnant 不支持 svn 1.7 版。该怎么办？

> ID：11557637
> 
> 赞同：11
> 
> 时间：2012-07-19T09:17:36.640
> 
> 标签：svn, ant, svnant

我正在使用 tortoise svn，最近我更新到 1.7 版本。尽管如此，在我们的构建系统（ant 脚本）中，我们使用 svnant lib（要获取当前的修订号，我们将其用作版本号）。所以不能再建项目因为svnant不支持1.7版本的svn。我怎么解决这个问题？

先感谢您！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-19T10:01:22.917

您可以使用 svn 的命令行版本。

1.  [下载](https://subversion.apache.org/packages.html)并安装在您的机器上
2.  将它包含在您的路径中（以便您可以从命令行执行 svn）
3.  将 svnsettings 更改为

    ```
    <svnSetting
        svnkit="false"
        javahl="false"
        id="svn.settings"/> 
    ```

`svnant`然后将使用命令行版本来做所有的 svn 事情。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-28T10:34:46.173

最新版本的 svnkit（纯 Java 库）与 Subversion 1.7 兼容。 [http://svnkit.com/download.php](http://svnkit.com/download.php)

您可以下载独立版本并将库从文件夹 lib 复制到您的类路径。您至少需要最后 5 个罐子。

```
<path id="path.svnant">
    <pathelement location="svnant/svnant.jar" />
    <pathelement location="svnant/svnClientAdapter.jar" />
    <pathelement location="svnant/ganymed.jar" />

    <pathelement location="svnant/svnkit-1.7.8.jar" />
    <pathelement location="svnant/svnkit-javahl16-1.7.8.jar" />
    <pathelement location="svnant/sqljet-1.1.6.jar" />
    <pathelement location="svnant/antlr-runtime-3.4.jar" />
    <pathelement location="svnant/sequence-library-1.0.2.jar" />
</path> 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-01T09:20:07.883

svnant 现在已在源代码中更新以支持 SVN 1.7，但您需要自己构建它。

在命令提示符下：

1.  将 svnant 检出到本地目录（用户名 guest，空密码）：

    > svn co [http://subclipse.tigris.org/svn/subclipse/trunk/svnant/](http://subclipse.tigris.org/svn/subclipse/trunk/svnant/) svnant --username=guest

2.  CD 进入根 svnant 目录
3.  建造：

    > ant makeDistrib

4.  将构建的文件从 build\distrib\lib 复制到您的 ANT lib 文件夹（可能是 C:\Program Files\Ant\lib 或 C:\Program Files (x86)\Ant\lib）

svnkit="false" 等内联属性现在已弃用，因此您需要更新以使用 svnSetting，如[上述答案](https://stackoverflow.com/a/11558376/1303568)中所述。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-25T21:11:33.913

svnant 的替代品是[svntask](https://github.com/opticyclic/svntask)

我最近刚刚从[GoogleCode](http://code.google.com/p/svntask/)分叉它并更新它以使用 svn 1.7。

它包含的命令没有 svnant 那么多，但包含获取版本号等基础知识。

# c# - C# 向 COM 公开字节数组

> ID：11557641
> 
> 赞同：1
> 
> 时间：2012-07-19T09:17:51.563
> 
> 标签：c#, com, interop

我正在尝试在 C# 中创建一个 COM dll，它有一个代表图像的 byte[] 属性。这个想法是一位同事正在编写一个 C++ 应用程序，该应用程序将使用我的 dll 与相机接口。

我的 dll 成功地允许他的程序连接到相机，返回各种值，但创建的 SAFEARRAY 似乎不可读（他得到了一个长度数字，但无法读取其实际数据）。

1.  在尝试以如下所示的方式将图像作为字节数组传递出去时，我是否在做一些愚蠢的事情？

2.  我是否需要明确告诉 Visual Studio 使用特定的封送处理类型，而不是让它自己选择？

3.  我是否也应该公开指向字节数组的指针，还是 SAFEARRAY 结构会处理这个问题。

我只使用 C# 几个月，这是我第一次编写 COM dll，如果我遗漏了一些明显的东西，请多多包涵。我一直在假设问题 1 不是问题的前提下工作，因为单独的 C# 测试应用程序可以成功地重建图像。

**类（摘录）：**

```
[ComVisible(true)]
[ClassInterface(ClassInterfaceType.None)]
public class ResultInfo : IResult
{
    public byte[] ImageBytes
    {
        get
        {
            MemoryStream ms = new MemoryStream();
            this.Image.Save(ms, System.Drawing.Imaging.ImageFormat.Jpeg);
            byte[] returnBytes = ms.ToArray();
            ms.Close();
            return returnBytes;
        }
    }
} 
```

**接口（摘录）：**

```
[ComVisible(true)]
[InterfaceType(ComInterfaceType.InterfaceIsIDispatch)]
public interface IResult
{
    [DispId(5)]
    byte[] ImageBytes { get; }
} 
```

**编辑：**这是 C++ 方面的输出：

> 当我尝试使用 HRESULT hr = SafeArrayAccessData (image, &data) 访问 SAFEARRAY 时；返回的 hr 是 E_UNEXPECTED - SafeArrayAccessData 的文档说这是“无法锁定安全数组”

# android - 如何获得一个Layout动画？

> ID：11557644
> 
> 赞同：0
> 
> 时间：2012-07-19T09:17:58.357
> 
> 标签：android, android-animation

我正在尝试在类似于 windows 7 的 android 活动之间切换一些动画。单击某些东西会将我们带到带有 windows 7 屏幕飞行动画的新屏幕。我尝试了自定义动画，但我认为我什至无法实现它。有谁知道有关此的一些链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T10:23:44.060

在切换到新活动之前显示逐帧动画。 [这](https://stackoverflow.com/questions/4319835/animation-before-activity-change)将有助于实现你所需要的。

# php - 如何更新mysql数据库中的数千行

> ID：11557645
> 
> 赞同：4
> 
> 时间：2012-07-19T09:17:59.553
> 
> 标签：php, mysql, sql, database, performance

我试图更新我的数据库中的 100.000 行，下面的代码应该这样做，但我总是得到一个错误：

> 错误：命令不同步；你现在不能运行这个命令

因为这是一个更新，所以我不需要结果，只想摆脱它们。使用 $count 变量是为了让我的数据库获得大量更新而不是一次大更新。（由于数据库的某些限制，一项重大更新无法正常工作）。

我尝试了很多不同的东西，比如 mysqli_free_result 等等......没有任何效果。

```
 global $mysqliObject;

    $count = 0;    
    $statement = "";

    foreach ($songsArray as $song) {

        $id = $song->getId();
        $treepath = $song->getTreepath();

        $statement = $statement."UPDATE songs SET treepath='".$treepath."' WHERE id=".$id."; ";
        $count++;

        if ($count > 10000){

            $result = mysqli_multi_query($mysqliObject, $statement);

            if(!$result) {
                 die('<br/><br/>Error1: ' . mysqli_error($mysqliObject));    
            }

            $count = 0;

            $statement = ""; 
        }

    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T12:20:13.890

正如 DaveRandom 和 StevenVI 所建议的那样，使用准备好的查询*将*减少 mysqld 进程中的 CPU 负载。但是在这种情况下，我怀疑使用准备好的查询会对您的运行时产生重大影响。您面临的挑战是您尝试更新`songs`表中的 100K 行，这将涉及物理磁盘子系统上的大量物理 I/O。正是这些物理延迟（比如每个 PIO 约 10 毫秒）将主导运行时。诸如每行中包含的内容、您在表上使用多少索引（尤其是那些涉及树路径的索引）等因素都将混合到这种组合中。

准备一个简单语句的实际 CPU 成本，例如

> `UPDATE songs SET treepath="some treepath" WHERE id=12345;`

将在整个物理 I/O 延迟中丢失，其相对大小在很大程度上取决于您存储数据的物理子系统的性质：单个 SATA 磁盘；固态硬盘；一些具有大缓存和 SSD 支持的 NAS ...

您需要在这里重新考虑您的整体策略，特别是如果您同时使用`songs`表格作为通过 Web 前端进行交互式请求的资源。更新 100K 行将需要一些时间——如果您按存储顺序更新 100K 中的 100K，则时间会更少，因为这将更符合 MYD 组织，并且写入缓存会更好；如果您在 1M 行中以随机顺序更新 100K 行，那么 PIO 的数量将会更多。

当你这样做时，你的 D/B 的整体性能会严重下降。

*   您是想尽量减少对数据库并行使用的影响，还是只是尝试将其作为专用批处理操作与其他离线服务一起执行？

*   你的目标是最小化总运行时间还是在一些整体影响约束下保持合理的短，或者甚至只是在不死的情况下完成。

我建议您有两种明智的方法：（i）将其作为适当的批处理活动，将 D/B 离线到其他服务。在这种情况下，您可能希望对表进行锁定，并使用 ALTER TABLE ... DISABLE/ENABLE KEYS 将更新括起来。(ii) 以小得多的更新集和每组之间的延迟以允许 D/B 刷新到磁盘的方式进行涓流更新。

无论如何，我会降低批量大小。multi_query 从本质上优化了调用进程外 mysqld 所涉及的 RPC 开销。一批 10 人说减少了 90%。在此之后您的收益会递减——尤其是说更新将是物理 I/O 密集型的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T09:41:06.487

使用准备好的语句尝试此代码：

```
// Create a prepared statement
$query = "
  UPDATE `songs`
  SET `treepath` = ?
  WHERE `id` = ?
";
$stmt = $GLOBALS['mysqliObject']->prepare($query); // Global variables = bad

// Loop over the array
foreach ($songsArray as $key => $song) {

  // Get data about this song
  $id = $song->getId();
  $treepath = $song->getTreepath();

  // Bind data to the statement
  $stmt->bind_param('si', $treepath, $id);

  // Execute the statement
  $stmt->execute();

  // Check for errors
  if ($stmt->errno) {
    echo '<br/><br/>Error: Key ' . $key . ': ' . $stmt->error;
    break;
  } else if ($stmt->affected_rows < 1) {
    echo '<br/><br/>Warning: No rows affected by object at key ' . $key;
  }

  // Reset the statment
  $stmt->reset();

}

// We're done, close the statement
$stmt->close(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T09:41:16.110

我会做这样的事情：

```
 $link = mysqli_connect('host');
  if ( $stmt = mysqli_prepare($link, "UPDATE songs SET treepath=? WHERE id=?") ) {

    foreach ($songsArray as $song) {

        $id = $song->getId();
        $treepath = $song->getTreepath();

        mysqli_stmt_bind_param($stmt, 's', $treepath); // Assuming it's a string...
        mysqli_stmt_bind_param($stmt, 'i', $id);
        mysqli_stmt_execute($stmt);
    }
    mysqli_stmt_close($stmt);
  }
  mysqli_close($link); 
```

或者当然你是普通的mysql_query，但包含在事务中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-19T14:48:08.087

我找到了另一种方法...

由于这不是生产服务器 - 更新 100k 行的最快方法是删除所有行并使用新的计算值从头开始插入 100k。删除所有内容并插入所有内容而不是更新似乎有点奇怪，但它的速度要快得多。

之前：小时 现在：秒！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-04-10T16:14:07.930

我建议在执行多个更新之前锁定表并禁用键。这将避免数据库引擎停止（至少在我更新 300,000 行的情况下）。

```
LOCK TABLES `TBL_RAW_DATA` WRITE;
/*!40000 ALTER TABLE `TBL_RAW_DATA` DISABLE KEYS */;

UPDATE TBL_RAW_DATA SET CREATION_DATE = ADDTIME(CREATION_DATE,'01:00:00') WHERE ID_DATA >= 1359711;

/*!40000 ALTER TABLE `TBL_RAW_DATA` ENABLE KEYS */;
UNLOCK TABLES; 
```

# msbuild - 不要从 TFS 2012 构建定义中的某些程序集运行单元测试

> ID：11557648
> 
> 赞同：12
> 
> 时间：2012-07-19T09:18:10.693
> 
> 标签：msbuild, nunit, build-automation

在 TFS 2012 中，我们有几个构建定义 - CI、部署和 nightly。

我们的 CI 构建运行我们解决方案中的所有 (n) 个单元测试，但是，我们需要让它忽略某些测试。

这是因为我们有一些长时间运行的集成测试，而且这些测试只需要每晚运行一次。

我尝试过的事情：

*   使用`TestCategoryAttribute`（来自 MSTest）并设置测试用例过滤器属性尝试排除“集成”。
*   使用`CategoryAttribute`（来自 NUnit）并设置测试用例过滤器属性尝试排除“集成”。
*   以上的组合。

需要忽略的测试都在名称中带有单词 IntegrationTests 或 Integration.Tests 的单独程序集中。

谢谢，
基龙

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-20T04:03:47.117

我一直在单元测试中使用 MSTest TestCategory 属性和 TFS 2012 中构建过程定义的测试类别过滤器设置的组合。

[根据此处](http://msdn.microsoft.com/en-us/library/ms253138.aspx) 找到的 Microsoft MSDN 文章，您可以通过将***测试类别过滤器*****设置为来****指定要使用的类别**

 *```
TestCategory=CategoryName 
```

根据您的原始帖子，您需要使用以下过滤器：

```
TestCategory!=Integration 
```

并使用此属性装饰您的测试：

```
[TestCategory("Integration")] 
```

对您希望在构建期间忽略的所有单元测试执行此操作。测试列表在 Visual Studio 中已被弃用，将所有内容转换为类别需要一段时间，但最终它是值得的。

希望有帮助！*

# javascript - Android上的Html5画布动画慢

> ID：11557651
> 
> 赞同：2
> 
> 时间：2012-07-19T09:18:24.300
> 
> 标签：javascript, android, ios, html, canvas

我正在为**Android**和**iOS**开发街机游戏。
我在运行 Android 2.2.1 的 Galaxy S SL 上遇到**动画性能问题**
： 观看示例：http:
[//jsfiddle.net/qgWdA/show/](http://jsfiddle.net/qgWdA/show/)
编辑代码：http:
[//jsfiddle.net/qgWdA/](http://jsfiddle.net/qgWdA/)

在运行 Android 4.0.3 的 Galaxy S2 上，动画速度更快，但不如运行 iOS 5.1.1 的 iphone 4S 好。

有什么办法可以优化吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T09:27:04.933

Canvas 在 ICS 中确实很慢，并且有望在未来的 Android 版本中得到更好的优化。

# android - 在带有 eclispe 的 androids manifest 中使用 TODO 注释

> ID：11557654
> 
> 赞同：2
> 
> 时间：2012-07-19T09:18:37.997
> 
> 标签：android, eclipse

如何在 androids 清单中设置 TODO 注释，由 eclipse-IDE 使用并出现在任务列表中？

在 *.java 文件中，您可以使用 ...

```
// TODO some infotext 
```

我试过了 ...

```
< !-- TODO some infotext -->
< !-- // TODO some infotext --> 
```

两者都不适合我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T03:12:09.287

你的权利，XML 与 HTML 相同：

< ! -- 这是一条评论 -->

只是不要把它放在 <.../> 的中间，否则你会得到一个“解析器异常”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-11T08:31:21.913

```
 <!-- TODO change this--> 
```

这是一个单行注释，< 和 !-- 之间没有空格

前缀 TODO 将此评论添加到`todo`列表中

**编辑**
使用快捷键**Ctrl +`/`**在任何文件中添加注释。它将区分 XML 和 .java 文件，然后相应地添加注释。

# wordpress - Wordpress 页码和 .htaccess ModRewrite 规则

> ID：11557655
> 
> 赞同：0
> 
> 时间：2012-07-19T09:18:40.317
> 
> 标签：wordpress, apache, mod-rewrite, redirect

我们在网站管理员工具中弹出了很多错误。我们的主页分页页面显示时没有页面前缀，即 17/ 而不是 page/17/

谁能帮我写一个规则来重定向这些页面，这样错误就不会不断弹出？

我们需要转身……</p>

[http://wwwexample.com/17/](http://wwwexample.com/17/)

进入……</p>

[http://wwwexample.com/page/17/](http://wwwexample.com/page/17/)

我们只需要它来为主页工作，因为分页在网站的其余部分工作正常，即

www.example.com/category/snails/17/ （这工作正常）

我对 mod rewrite 不感兴趣，并想开始更多地了解它。

谢谢，

詹姆士

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T09:23:12.050

在文档根目录中的 htaccess 文件中的 wordpress 规则之前添加这些规则：

```
RewriteRule ^([0-9]+)/$ /page/$1/ [R=301,L] 
```

# php - 是否可以仅限制 AJAX 的路由？

> ID：11557658
> 
> 赞同：53
> 
> 时间：2012-07-19T09:19:02.597
> 
> 标签：php, ajax, symfony

是否可以仅针对 XHR 请求限制 Symfony 2 路由？我想声明只能通过 AJAX 访问的路由。

我不想在每个特定于 AJAX 的操作中添加一些额外的行，如下所示：

```
if ($request->isXmlHttpRequest()) {
    // do something
} else {
    // do something else
} 
```

我想定义：

*   AJAX 请求的一条规则
*   对同一 URL 的 GET/POST 请求的一条规则

为了解决上述情况。

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2014-02-09T16:44:44.350

我知道这个问题有点老，但同时**在 Symfony 2.4中引入了一种****新的方法**来实现这一点。

 **[匹配表达式](https://symfony.com/doc/current/routing.html#matching-expressions)

对于 ajax 限制，它看起来像这样：

```
contact:
    path:     /contact
    defaults: { _controller: AcmeDemoBundle:Main:contact }
    condition: "request.isXmlHttpRequest()" 
```

也可以在注释中：

```
/**
 * ContactAction
 *
 * @Route("/contact", name="contact", condition="request.isXmlHttpRequest()")
 */ 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-26T06:30:10.690

我的建议是定义您自己的路由器服务而不是[default](https://github.com/symfony/symfony/blob/master/src/Symfony/Bundle/FrameworkBundle/Routing/Router.php)，它将从 扩展`Symfony\Bundle\FrameworkBundle\Routing\Router`，并重新定义方法[resolveParameters()](https://github.com/symfony/symfony/blob/master/src/Symfony/Bundle/FrameworkBundle/Routing/Router.php#L84)并实现您自己的逻辑来处理其他要求。

然后，您可以在路由中执行以下操作：

```
your_route:
    pattern:  /somepattern
    defaults: { somedefaults }
    requirements:
        _request_type:  some_requirement 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-19T09:45:31.837

我不确定您是否可以阻止请求发生，但是您可以通过检查当前请求来检查控制器中的 XHR 请求

代码如下所示：

```
if ($request->isXmlHttpRequest()) {
    // ...
} 
```

这不是 100% 可靠的，其中包括浏览器不一致和代理干扰的可能性。然而，它是检查异步请求的主要方法，并且被许多人推荐。如果你是cr

**网址参数**

另一种方法是在您的 URL 中添加一个参数以将请求标识为异步。这是通过添加`?ajax=1`到您的 URL 来实现的。然后，检查参数：

```
$AjaxRequest = $request->getParameter('ajax');
If($AjaxRequest == 1) {
    //...
} 
```

当然，此时您也可以创建一个特定的 Route，例如`/ajax/index/`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-27T22:31:11.657

你不能。这不取决于您使用的是哪个框架，AJAX 请求基本上只是对服务器的请求。没有 100% 可靠的解决方案，只有“黑客”。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-25T14:15:29.313

Symfony 路由配置中不存在您要查找的内容。

Request::isXmlHttpRequest 甚至不是 100% 可靠的，它会检查 JavaScript 库放置的 HTTP 标头：

> 如果您的 JavaScript 库设置了 X-Requested-With HTTP 标头，它就可以工作。众所周知，它可以与 Prototype、Mootools、jQuery 一起使用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-23T07:22:56.987

您可以使用[要求](http://symfony.com/doc/current/book/routing.html)来达到描述的结果。
所以，假设你正在定义 yml 格式的路由，你必须做这样的事情

```
my_route:
  pattern:  /path/to/route
  defaults: { _controller: CompanyBundle:Controller:Action, _format: html }
  requirements:
      _format:  xmlhttp /* not sure about the correct format because
                           i've never checked about */ 
```

当然，您可以使用`_method: POST`或`_method: GET`**

# mysql - Msql Crosstab 月行作为列？

> ID：11557664
> 
> 赞同：1
> 
> 时间：2012-07-19T09:19:13.123
> 
> 标签：mysql

早上好，我没有成功尝试使用 mysql/php 创建报告，我希望将行作为类似于 Access Crosstab 或 Excel Pivot 的列。我有销售人员和月度销售额，我想在页面上显示月份作为列标题。

我下面的查询输出数据，但每个销售人员每个月都有一行，读起来不太好，

```
 Jan | Feb | Mar | April 
```

销售
1 销售
2 销售3 销售
4

```
Select
  tblcontacts.ContactFullName,
  Count(tblcases.CaseID) As cases,
  MonthName(tblcases.CaseDate) As Monthly
From
  tblcases Inner Join
  tblcontacts On tblcases.ContactAssignedTo =
  tblcontacts.ContactID
Group By
  tblcontacts.ContactFullName,
  MonthName(tblcases.CaseDate)  
  with rollup 
```

蚂蚁的建议或指针表示赞赏，我已经研究过，但大部分都在我的脑海中！

亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T09:29:35.853

您可以做的只是按每个联系人分组，并使用条件聚合根据每个月计算行数：

```
SELECT
    a.ContactFullName,
    SUM(MONTH(b.CaseDate) = 1) AS Jan,
    SUM(MONTH(b.CaseDate) = 2) AS Feb,
    SUM(MONTH(b.CaseDate) = 3) AS Mar,
    SUM(MONTH(b.CaseDate) = 4) AS Apr,
    SUM(MONTH(b.CaseDate) = 5) AS May,
    SUM(MONTH(b.CaseDate) = 6) AS Jun,
    SUM(MONTH(b.CaseDate) = 7) AS Jul,
    SUM(MONTH(b.CaseDate) = 8) AS Aug,
    SUM(MONTH(b.CaseDate) = 9) AS Sep,
    SUM(MONTH(b.CaseDate) = 10) AS Oct,
    SUM(MONTH(b.CaseDate) = 11) AS Nov,
    SUM(MONTH(b.CaseDate) = 12) AS Dec
FROM
    tblcontacts a
INNER JOIN
    tblcases b ON a.ContactID = b.ContactAssignedTo
GROUP BY
    a.ContactFullName 
```

**编辑：**根据您对此答案的评论：要获得每个月的价格总和，您可以执行以下操作：

```
SELECT
    a.ContactFullName,
    SUM(IF(MONTH(b.CaseDate) = 1, b.price, 0)) AS Jan,
    SUM(IF(MONTH(b.CaseDate) = 2, b.price, 0)) AS Feb,
    SUM(IF(MONTH(b.CaseDate) = 3, b.price, 0)) AS Mar,
    SUM(IF(MONTH(b.CaseDate) = 4, b.price, 0)) AS Apr,
    SUM(IF(MONTH(b.CaseDate) = 5, b.price, 0)) AS May,
    SUM(IF(MONTH(b.CaseDate) = 6, b.price, 0)) AS Jun,
    SUM(IF(MONTH(b.CaseDate) = 7, b.price, 0)) AS Jul,
    SUM(IF(MONTH(b.CaseDate) = 8, b.price, 0)) AS Aug,
    SUM(IF(MONTH(b.CaseDate) = 9, b.price, 0)) AS Sep,
    SUM(IF(MONTH(b.CaseDate) = 10, b.price, 0)) AS Oct,
    SUM(IF(MONTH(b.CaseDate) = 11, b.price, 0)) AS Nov,
    SUM(IF(MONTH(b.CaseDate) = 12, b.price, 0)) AS Dec
FROM
    tblcontacts a
INNER JOIN
    tblcases b ON a.ContactID = b.ContactAssignedTo
GROUP BY
    a.ContactFullName 
```

基本上，对于每一行，如果 casedate 在特定月份，则将`price`列的值传递给`SUM`聚合，否则，只需传递它`0`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T09:24:48.880

```
Select 
    tblcontacts.ContactFullName, 
    sum(case when MonthName(tblcases.CaseDate)='January' then 1 else 0 end) as January,
    sum(case when MonthName(tblcases.CaseDate)='February' then 1 else 0 end) as February,
    .
    .
    sum(case when MonthName(tblcases.CaseDate)='December' then 1 else 0 end) as December,
From 
  tblcases Inner Join 
  tblcontacts On tblcases.ContactAssignedTo = 
  tblcontacts.ContactID 
  Group By 
  tblcontacts.ContactFullName 
```

# playframework - Play Framework 2.0 模板引擎定义可写变量

> ID：11557666
> 
> 赞同：3
> 
> 时间：2012-07-19T09:19:18.883
> 
> 标签：playframework, playframework-2.0

我正在使用基于 scala 的播放框架模板引擎。控制器是用 Java 编写的。

有没有办法定义内联可写变量？

我刚刚在文档中找到了这个：

```
@defining(user.getFirstName() + " " + user.getLastName()) {
    <div>Hello @fullName</div>
} 
```

但这只会创建一个只读变量。

编辑：我在我的 html 页面中使用了一个循环：

```
@for(variable <- variables) { 
```

这种循环不会给我一个索引变量。我需要这个索引来为第一个循环和所有其他循环提供不同的输出。希望这很清楚吗？

所以我只是想我可以在循环外创建一个索引变量并在每个循环上增加它。

有人有想法吗？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T10:53:17.653

尝试：

```
@for(for(i <- 0 to list.size-1) {
   @list(i)
} 
```

或者简单地说：

```
@for(i <- list.indices) {
    @list(i)
} 
```

（[来自谷歌小组的提示](https://groups.google.com/forum/?fromgroups#!topic/play-framework/od_gSVGtJdI)）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-19T10:43:52.433

我认为 zipWithIndex 是你需要的：

```
@variables.zipWithIndex.map { case (variable,index) => <h1>@variable</h1>} 
```

# c# - 当前日期公式中特定日期的最后日期

> ID：11557668
> 
> 赞同：1
> 
> 时间：2012-07-19T09:19:22.983
> 
> 标签：c#, algorithm, datetime

我有一个要求，我想根据今天的日期计算给定日期的最后一个日期。例如我有一个方法

```
DateTime GetDate(DateTime now, DayOfWeek dayOfWeek)
{
  //Logic goes here
} 
```

**例如**

1.  如果我在 dayofWeek 中过了星期五，而今天是星期一，那么它应该返回我上星期五的日期。
2.  如果我过了星期五，今天是星期五，那么应该返回同一日期。

**条件：**

1.  我只想使用公式来计算日期。
2.  不希望任何东西被假设或硬编码。
3.  我不想使用 if...else。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T09:24:32.490

您可以通过将一周中的当前日期与目标日期进行比较来计算要减去多少天，以防万一为负：

```
static DateTime GetDate(DateTime now, DayOfWeek dayOfWeek)
{
    // Number of days to subtract, e.g. 1 for "today is Friday, we want Thursday"
    // The ((...) + 7) % 7 part is to handle wrap-around for negative values.
    int daysDifference = ((now.DayOfWeek - dayOfWeek) + 7) % 7;
    return now.AddDays(-daysDifference);
} 
```

或者使用[Noda Time](http://noda-time.googlecode.com)（我的日期/时间 API，它允许更清晰地表示“只是一个日期”等）：

```
static LocalDate GetDate(LocalDate today, IsoDayOfWeek dayOfWeek)
{
    return today.IsoDayOfWeek == dayOfWeek ? today : today.Previous(dayOfWeek);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T09:27:03.343

行，

```
DateTime GetDate(DateTime now, DayOfWeek dayOfWeek)
{
    var day = new TimeSpan(1, 0, 0, 0);
    var result = now;

    while(result.DayOfWeek != dayOfWeek)
    {        
        result = result.Substract(day)
    }

    return result;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T09:31:11.167

```
private static DateTime GetDate(DateTime todayDate, DayOfWeek dayofweek)
{
    while (todayDate.DayOfWeek != dayofweek)
    {
        todayDate = todayDate.AddDays(-1);
    }
    return todayDate;
} 
```

# c# - C# - MOQ：如何在此编码中添加最小起订量？

> ID：11557669
> 
> 赞同：0
> 
> 时间：2012-07-19T09:19:22.977
> 
> 标签：c#

我是一个完全的菜鸟和新的起订量。我有一个非常简单的问题要问。

鉴于下面的代码，我想使用 moq 来测试返回结果是否符合预期。

```
 public class FrameworkServices : IFrameworkServices
   {    
    public ILoggingService getLogger()
    {
        return LoggingFactory.getInstance().Create(LoggingEnum.Log4Net);
    } 
```

其中 ILogginService 是一个接口， LoogingFactory 是一个类。

请与我分享如何起订量。非常感谢所有友好的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T09:28:17.497

您不需要 moq 来检查方法是否按预期返回，只需调用该方法并断言您需要什么，这是一个普通的标准单元测试。在您展示的示例中，您可以模拟例如`IFrameworkService`并让 getLogger 返回一个存根记录器。

# swing - 从动作监听器添加一个不确定的 JProgressBar

> ID：11557677
> 
> 赞同：0
> 
> 时间：2012-07-19T09:20:07.637
> 
> 标签：swing, user-interface, progress-bar, jprogressbar

我希望用户按下“运行”按钮后立即弹出一个不确定的进度条，然后在应用程序要完成的工作完成时关闭。我使用 NetBeans 开发 GUI。我应该怎么做？gui 类扩展了 JFrame。这是运行按钮的动作监听器：

```
public class GUI extends JFrame{
    // other methods and constructos....
private JProgressBar pb = new JProgressBar();
private void runButtonActionPerformed(java.awt.event.ActionEvent evt) {                                          

   pb.setIndeterminate(true);

   //other functions start...
   runButton.setEnabled(false);
    setCursor(Cursor.getPredefinedCursor(Cursor.WAIT_CURSOR));
   //....blah blah
}
} 
```

如何将进度条添加到我的 JFrame，然后在我的工作完成后将其删除？我不想使用 Swing Worker。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T09:28:29.127

您不想使用，`SwingWorker`但必须使用（或类似机制）。您不能显示一段`JProgressBar`时间让事件调度线程 (EDT) 占用您的计算。

您必须将计算移至单独的位置`Thread`以释放 EDT。然后 EDT 将能够在计算过程中显示 a `JProgressBar`，并在计算完成后将其删除。

有关这方面的更多信息，请参阅[“Swing 中的并发”](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)教程。可以在[此处](https://stackoverflow.com/questions/8916721/java-swing-update-label/8917565#8917565)`SwingWorker`找到 a和 a的示例。`JProgressBar`

# wpf - ScatterViewItem 内容的操作事件

> ID：11557678
> 
> 赞同：0
> 
> 时间：2012-07-19T09:20:09.663
> 
> 标签：wpf, 3d, pixelsense, scatterview

我在`ScatterViewItem`. 我需要旋转 3D 内部而不旋转`ScatterViewItem`. 目前，我正在尝试将操作事件放在视口上，但它们不会触发。所有的运动手势都被 捕获，`ScatterViewItem`我想把它们发送到里面的视口。任何帮助都会很有价值。

谢谢，
巴拉特马图尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T18:15:01.537

`ScatterViewItem`仅当视觉树中没有他的孩子没有将路由事件标记为已处理时，才会控制触摸事件。

由于您没有提供任何代码示例，我只能建议可选解决方案：
- 尝试通过从 scatterview 中取出 viewport3D 来隔离问题 - 确保它没有 scatterview - 确保 viewport 元素属性“IsManipulationEnabled”设置为true
- 在您的触摸方法中确保将“e.Handled”设置为“true”
- 检查是否设置了视口命中区域。

希望这可以帮助。

# qt - QT 多语言应用

> ID：11557681
> 
> 赞同：0
> 
> 时间：2012-07-19T09:20:17.650
> 
> 标签：qt, qt4

我是 Qt 框架的新手，现在我想创建一个支持多语言显示的应用程序。我知道有一种方法可以做到：Qt Linguist。我搜索并归档了一些关于 lupdate、lrelease 的信息......
但我只有 Qt Creator IDE，我该如何运行或编译 lupdate、lrelease ？？？
如何创建 *.ts 文件？

请给我一些代码示例或指南。（我经常使用 Qt Designer 来创建 GUI）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T09:26:21.317

据我所知，QtCreator 中没有使用 QtLinguist 的选项 - 您必须手动操作。[在这里](http://doc.qt.nokia.com/4.7-snapshot/linguist-manager.html)，您可以获得有关如何执行此操作的出色文档。我也从那里学到了。

# .net - 为什么 String 类不实现 IEnumerable 在便携式图书馆？

> ID：11557690
> 
> 赞同：11
> 
> 时间：2012-07-19T09:20:49.443
> 
> 标签：.net, portable-class-library

我创建了一个面向 .NET Framework 4 和 Silverlight 5 的 PCL 项目（我使用 Visual Studio 2010 的扩展，而不是 Visual Studio 2012 的可移植项目模板，如果这很重要的话）。我正在尝试使用`System.Linq.Enumerable.Reverse<TSource>()`扩展方法反转字符串，但它不起作用，因为编译器认为它`System.String`没有实现`IEnumerable<char>`.

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-19T12:12:51.500

可移植类库必须将自身限制在它承诺支持的所有目标平台上可用的类和方法。这里最大的麻烦制造者是 WinRT，CLR 具有将 WinRT 类型映射到托管类型的语言投影。[此答案](https://stackoverflow.com/a/11522718/17034)中记录了投影不支持的 System.String 方法。GetEnumerator() 就是其中之一。

# networking - UDP 打孔：一个对称 NAT 和另一个非对称 NAT

> ID：11557691
> 
> 赞同：4
> 
> 时间：2012-07-19T09:20:53.887
> 
> 标签：networking, tcp, udp, udpclient, hole-punching

我正在尝试使用打孔实现 P2P。这是流程：

1.  两个 Peers(P1,P2) 都会向服务器 (S) 发送 1 个数据包。
2.  服务器（S）回复两个告诉其他人 IP:PORT
3.  P1 和 P2 接收到知道其他人的外部/公共 ip:port 的 UDP 数据包。
4.  P1,P2 开始向其他对等点发送数据包公共 IP:PORT。
5.  一旦对等方收到其他对等方的数据包，我假设该孔已打孔并将此套接字提供给我的应用程序。

我在不同的路由器上进行了测试，结果如下：

*   当 P1 和 P2 都在非对称 NAT（全/受限锥）上时，我不会遇到任何问题。
*   当 P1=非对称且 P2=对称时：
*   -----router-1 (Symmetric-NAT) + router-2 (non-Symmtric) = 成功
*   ---- **router-3 (Symmetric-NAT) + router-2 (non-Symmtric) = **失败****

直到第四步都很好。但在第 5 步中，没有一个对等方收到其他对等方的数据包。我期待至少*** *'非对称 NAT 后面的对等方'****会收到其他的数据包。**

有人知道发生了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-08T05:58:06.443

[这里](http://www.goto.info.waseda.ac.jp/~wei/file/wei-apan-v10.pdf)有一张纸

基本上他们使用两台服务器 S1 和 S2。

通过查看出站端口，他们通常能够预测当 P1 向 P2 发送数据包时将使用哪个出站端口，反之亦然。

显然许多路由器只是使用递增/递减或一些跳过大小

无法保证预测正确的端口。他们最终将一堆数据包发送到不同的端口，希望一个能够通过。

我对如何处理它有不同的想法，我需要找到一个对称 NAT 来测试它:)

# api - 谷歌天气 api 链接需要人工认证

> ID：11557693
> 
> 赞同：3
> 
> 时间：2012-07-19T09:21:17.943
> 
> 标签：api, weather

[我使用谷歌天气](http://www.google.com/ig/api?weather=lincoln)API开发了一个天气应用程序，但从今天开始它停止工作。

当我尝试通过浏览器使用位置访问天气 API 时，它要求进行人工身份验证。

我的应用程序在这种情况下如何工作？有没有办法绕过身份验证过程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T16:46:32.683

这是非常奇怪的行为......我想知道它是否与当我尝试在 Chrome 中加载 API url 时传递的标头有关，不支持的 API ......或者如果我在 Firefox 中执行相同的 URL，工作得很好。

还值得注意的是，我尝试通过将以下两行放在单独的 Web 服务器的 apache 配置中并通过 www.domain.com/weather/api?weather=Chicago 引用 API 来设置 Google 天气服务的 Apache 代理，它仍然工作......所以这是我现在的解决方法：

ProxyPassReverse /weather/ [http://www.google.com/ig/](http://www.google.com/ig/)

ProxyPass /weather/ [http://www.google.com/ig/](http://www.google.com/ig/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T08:36:54.480

尝试更改域，例如：[http](http://www.google.ca/ig/api?weather=Sondrio) ://www.google.ca/ig/api?weather=Sondrio 。它有效（现在：D）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T19:04:34.720

好像从现在开始就不用了

即使使用 .CA，它也会随机返回 Unsupported API。

遗憾

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-26T19:05:56.623

是的，有趣的是，如果请求缺少浏览器（使用 Chrome 和 Firefox 测试）包含在对非官方天气 URL 的请求中的 cookie，Google 似乎会发回随机的“不支持的 API”响应。

我通过复制在启用 Firebug 的“Net”选项卡的 Firefox 中运行请求时发现的整个“Cookie：”标头来修复我的应用程序。

不确定浏览器从 .google.com 上的哪个位置获取 cookie，我推测是使用像 gmail 这样的个性化服务。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-08T07:58:14.093

如果您正在寻找可以立即使用的*天气 API*，我有一个建议……</p>

试试 Metwit [Weather API](http://metwit.com/developers/)，它是新的，但听起来很酷……<br> 这个 API 使用起来非常简单，因为它使用了当今可用的标准，例如 JSON 和 REST。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-02T10:17:26.937

你可以使用这个新的 api 这与谷歌天气 api 具有相同的 xml 结构

[http://en.previmeteo.com/professionals/google-weather-api.php](http://en.previmeteo.com/professionals/google-weather-api.php)

# regex - 找不到正确的正则表达式

> ID：11557696
> 
> 赞同：0
> 
> 时间：2012-07-19T09:21:27.557
> 
> 标签：regex

示例文本：

```
'Times New Roman'; font-size:9pt; letter-spacing:0.05pt">test </span>
<span style="font-family:'Times New Roman'; font-size:9pt; letter-spacing:0.05pt">test </span>
<span style="font-family:'Times New Roman'; font-size:9pt; letter-spacing:0.05pt">test </span>
<span style="font-family:'Times New Roman'; font-size:9pt; letter-spacing:0.05pt">test </span>
<span style="font-family:'Times New Roman'; font-size:9pt; letter-spacing:0.05pt">6\. </span>
<span style="font-family:'Times New Roman'; font-size:9pt; letter-spacing:0.05pt">Oktober </span>
<span style="font-family:'Times New Roman'; font-size:9pt; letter-spacing:0.05pt">1997</span>
<span style="font-family:'Times New Roman'; font-size:6pt; letter-spacing:0.05pt; vertical-align:super">2</span>
<span style="font-family:'Times New Roman'; font-size:9pt; letter-spacing:0.05pt">),</sp 
```

我的正则表达式应该匹配：

```
<span style="font-family:'Times New Roman'; font-size:6pt; letter-spacing:0.05pt; vertical-align:super">2</span>
<span style="font-family:'Times New Roman'; font-size:9pt; letter-spacing:0.05pt">) 
```

我的正则表达式现在是：

```
<span.*?>\d+?</span><span.*?>\) 
```

结果：

```
<span style="font-family:'Times New Roman'; font-size:9pt; letter-spacing:0.05pt">test </span><span style="font-family:'Times New Roman'; font-size:9pt; letter-spacing:0.05pt">test </span><span style="font-family:'Times New Roman'; font-size:9pt; letter-spacing:0.05pt">test </span><span style="font-family:'Times New Roman'; font-size:9pt; letter-spacing:0.05pt">6\. </span><span style="font-family:'Times New Roman'; font-size:9pt; letter-spacing:0.05pt">Oktober </span><span style="font-family:'Times New Roman'; font-size:9pt; letter-spacing:0.05pt">1997</span>***<span style="font-family:'Times New Roman'; font-size:6pt; letter-spacing:0.05pt; vertical-align:super">2</span><span style="font-family:'Times New Roman'; font-size:9pt; letter-spacing:0.05pt">) 
```

现在已经尝试了很多，但我无法让它工作

感谢帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T09:30:35.553

这很难准确阅读，但请尝试：

`<span[^>]*>\d+?</span>.*<span[^>]*>`

通过搜索不是括号的字符，可以更清楚您得到什么。我也有幸在 .* 周围添加了一些无关紧要的令人困惑的空白区域。

# c# - 用属性装饰类以避免重复

> ID：11557701
> 
> 赞同：1
> 
> 时间：2012-07-19T09:22:01.267
> 
> 标签：c#, design-patterns

我正在尝试找出解决以下问题的最佳方法..

我需要将`AvailabilityOption/LimitedAvailabilityOption`类型传递给 - 以及发生时的服务，然后取回`BookingOption` 类型。

我有会生成可用性类型的例程，但我不确定我是否需要有效地遍历我的每个`Option`对象，从而有效地复制它们继承自`BookingOption`并`AvailabilityOption`依次继承的版本。或者我可以对可用性类的简单选项进行某种“装饰”，然后当我再次将它们传回时将它们重新转换为预订选项。我知道有一种装饰模式，但是在阅读了一些关于此的内容后，它似乎更多的是关于在运行时进行装饰。我很可能会误解。我怀疑我没有很好地解释这一点，但这里有一些代码..

**编辑**：*实际上，该选项是预订中许多可能选项的基础 - 例如短途旅行或其他一些额外的选项，其中有很多。可用性扩展了它以确定任何选项的空间，但它只是扩展选项本身，包括价格和可能已经在该选项上预订的数量。是否`BookingOption`可以从根据价格和可用性从选项中有效选择的例程中返回。我只是想在预订点退还最低限度，这实际上是需要选项的日期以及它是哪个选项。在这一点上的可用性是没有实际意义的..*

```
public abstract class Option{
    public int OptionID { get; set; }
    public OptionType OptionType { get; set; }
    public string EqtCode { get; set; }
    public string CentreCode { get; set; }
    public virtual string Description { get; set; }     
}

public abstract BookingOption : Option{
    public DateTime WeekStartDate{get;set;}
}

public abstract class AvailabilityOption : BookingOption {
    public decimal Price{get;set;}

    public override string Description{
        get{return string.format("{0} @ {1}", base.Description, Price.ToString());
        set{ base.Description = value;}
    }
}

public abstract class LimitedAvailabilityOption : AvailabilityOption{
    public int MinNumber { get; set; }
    public int MaxNumber { get; set; }
    public int TotalBooked { get; set; }
    public int TotalRemaining { get; set; }
    public override string Description
    {
        get
        {
            return string.Format("{0} ({1} @ {2})",
                base.Description, TotalRemaining.ToString(), Price.ToString());
        }
        set { base.Description = value;}
    }
}

public class Option1 : Option{
    public Option1(){}
}

public class Option2 : Option{
    public Option2(){}
}

public List<BookingOption> BookWithAvail(List<AvailabiliyOption> options){
//pick options based on avail and pass back the booking versions so write away...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T11:05:39.983

看起来答案取决于您计划如何使用精华的*可用性*和*有限可用性*品质。如果这些*可用性*-质量仅适用于`LimitedAvailabilityOption`和`AvailabilityOption`类-那么似乎不需要实现`Availability`或`LimitedAvailability`在单独的类中，因为这些类中的每一个都将仅用于区分一种其他本质（`LimitedAvailabilityOption`和`AvailabilityOption`分别）。*使用装饰模式并为可用性*和*有限可用性*实现类是有意义的*仅当您计划将它们中的每一个分配给与继承关系无关的多个本质时（包括通过中间类继承）。而且，如果您计划通过具有*可用性属性的共同祖先将**可用性*质量分布到多个不应该具有任何继承连接的类中，那么唯一的选择是将这些*可用性*质量提取到单独的类中。*

# html - 编码 URL 中的双大于符号 (>>) 生成 403 禁止错误

> ID：11557703
> 
> 赞同：2
> 
> 时间：2012-07-19T09:22:04.563
> 
> 标签：html, url, encoding, url-encoding

我们有一个服务器，它运行一个 restful GET API，它从两个不同的来源接收数据。今天我注意到当 URL 包含双大于号 (>>) 时，来自一个来源的数据会生成 403 错误。启动我的浏览器并使用 ?text=test%3E%3E 访问 api 生成了 403，但是当我尝试通过第二个来源提交相同的文本时事情变得混乱 - 它工作正常，没有 403。

不幸的是，我无权访问源 2 背后的代码，因此我无法检查它们如何对 URL 进行编码，并且我的日志仅包含解码后的 URL。

除了 %3E%3E 之外，还有其他 URL 编码 >> 的方法吗？知道为什么第二个来源可以通过 ok 提交吗？最后，为什么我们的 Apache 服务器有问题 >> 而不是 << ？

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-06-14T15:10:35.880

您确定它不是需要编码的“右指向双角引号” [http://www.fileformat.info/info/unicode/char/bb/index.htm 。](http://www.fileformat.info/info/unicode/char/bb/index.htm)它是单个字符，您将使用`&raquo;`它来对其进行编码

# c# - Wp7 推送通知以启动我的应用程序

> ID：11557707
> 
> 赞同：0
> 
> 时间：2012-07-19T09:22:25.547
> 
> 标签：c#, windows-phone-7, push-notification, mpns

据我所知，Ios 和 Android gcm 能够在推送通知事件到达时打开应用程序。对于 wp7，我只找到有关如何更新磁贴或显示消息的示例。但我需要全屏显示位图。当我发送推送通知时，有没有办法打开我的应用程序？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T20:14:13.060

There is **no way you can launch anything** via a push notification on Windows Phone. Raw, toast and tile are the only acceptable types, none of which is able to invoke code execution outside the pre-defined boundaries (e.g. launch the app when the toast is tapped).

Since you are displaying an image, your best bet would be focusing on the [tile updating mechanism](http://msdn.microsoft.com/en-us/library/hh202970%28v=vs.92%29.aspx). Remember, however, that there are no guarantees that the user will see the tile (unless pinned), or keep it on the home screen permanently.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T09:49:04.260

如果您使用通知机制发送 Toast 通知，然后点击 Toast 将启动应用程序，然后您可以指定要在应用程序中导航到的页面。

请查看以下内容以获取更多信息：

[http://msdn.microsoft.com/en-us/library/hh202967(v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/hh202967(v=vs.92).aspx)

# java - Selenium：Java VM 在 IE 6/7 中运行 Webdriver 测试时不断崩溃

> ID：11557708
> 
> 赞同：1
> 
> 时间：2012-07-19T09:22:27.170
> 
> 标签：java, selenium, webdriver

我正在按照 JUnit 格式和运行时在 Java 中运行一系列 selenium 测试套件。

当我在具有 IE 8/9 和 Firefox 14 的机器上运行测试时，测试成功运行，但是当在具有 IE6/7 的机器上运行时，Java VM 在测试期间随机崩溃，我不知道为什么。

经过一番谷歌搜索后，这个问题似乎已经遇到过，建议的修复通常是升级到 selenium 2.24.1 并将 IEDriverServer.exe 添加到类路径中。

这两个我都做过，没有任何区别。

测试设置：使用 JUnit 命令通过 ANT 脚本调用测试。我必须支持一些旧的 selenium RC 测试，这些测试已转换为 Webdriver 支持的测试。

JUnitreport 中的错误：分叉的 Java VM 异常退出。请注意，报告中的时间并不反映直到 VM 退出的时间。

junit.framework.AssertionFailedError：分叉的 Java VM 异常退出。请注意，报告中的时间并不反映直到 VM 退出的时间。在 org.eclipse.ant.internal.launching.remote.InternalAntRunner.run(InternalAntRunner.java:423) 在 org.eclipse.ant.internal.launching.remote.InternalAntRunner.run(InternalAntRunner.java:423) 在 org.eclipse.ant.internal.launching.remote.EclipseDefaultExecutor.executeTargets(EclipseDefaultExecutor.java:32) .ant.internal.launching.remote.InternalAntRunner.main(InternalAntRunner.java:137)

如果您需要更多信息，请告诉我。

问候深红色

# c++ - 将数据压缩为一系列小块 C++/C 的标准化库？

> ID：11557710
> 
> 赞同：1
> 
> 时间：2012-07-19T09:22:32.050
> 
> 标签：c++, c, compression

我需要通过使用 C++/C 将短字符串附加到日志文件来压缩数据以进行日志记录。我首先厌倦了 gzip(zlib)，但这为每个短字符串创建了一个符号表，实际上使数据更长而不是压缩。我相信我正在寻找的是静态霍夫曼表。无论如何，我想知道是否有一个通用的算法。我更喜欢任何人都可以阅读的格式。我认为答案是否定的，但这是要问的地方。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T16:20:47.453

您应该查看[zlib](http://zlib.net/)发行版中的[示例/gzlog.[ch] 源文件。](https://github.com/madler/zlib/blob/master/examples/gzlog.h)该代码正是为此目的而编写的。它将短字符串附加到不断增长的压缩 gzip 文件中。

# php - RPC/文字过程不存在

> ID：11557715
> 
> 赞同：3
> 
> 时间：2012-07-19T09:22:43.667
> 
> 标签：php, soap, wsdl, rpc, procedure

我目前正在尝试提供基于 SOAP RPC/Literal 的 Web 服务。
这是我的 WSDL 文件：

```
<?xml version="1.0" encoding="iso-8859-1"?>
<!--WSDL genere permettant de decrire le service web.-->
<!--Partie 1 : Definitions-->
<definitions xmlns="http://schemas.xmlsoap.org/wsdl/" name="WSDL" targetNamespace="http://soap.mycompany.org/wsdl/" xmlns:typens="http://soap.mycompany.org/wsdl/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/">
  <!--partie 2 : Types-->
  <types>
    <xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified" targetNamespace="http://soap.mycompany.org/wsdl/">
      <xsd:complexType name="calculatorAuthInput">
        <xsd:annotation>
          <xsd:documentation>^CSoapHandler-calculatorAuth^</xsd:documentation>
        </xsd:annotation>
        <xsd:sequence>
          <xsd:element name="operation" type="xsd:string">
            <xsd:annotation>
              <xsd:documentation>^CSoapHandler-calculatorAuth-operation^</xsd:documentation>
            </xsd:annotation>
          </xsd:element>
          <xsd:element name="entier1" type="xsd:integer">
            <xsd:annotation>
              <xsd:documentation>^CSoapHandler-calculatorAuth-entier1^</xsd:documentation>
            </xsd:annotation>
          </xsd:element>
          <xsd:element name="entier2" type="xsd:integer">
            <xsd:annotation>
              <xsd:documentation>^CSoapHandler-calculatorAuth-entier2^</xsd:documentation>
            </xsd:annotation>
          </xsd:element>
        </xsd:sequence>
      </xsd:complexType>
      <xsd:complexType name="calculatorAuthOutput">
        <xsd:sequence>
          <xsd:element name="result" type="xsd:integer">
            <xsd:annotation>
              <xsd:documentation>^CSoapHandler-calculatorAuth-result^</xsd:documentation>
            </xsd:annotation>
          </xsd:element>
        </xsd:sequence>
      </xsd:complexType>
    </xsd:schema>
  </types>
  <!--partie 3 : Message-->
  <message name="calculatorAuthRequest">
    <part name="parameters" type="typens:calculatorAuthInput"/>
  </message>
  <message name="calculatorAuthResponse">
    <part name="parameters" type="typens:calculatorAuthOutput"/>
  </message>
  <!--partie 4 : Port Type-->
  <portType name="MyPort">
    <!--partie 5 : Operation-->
    <operation name="calculatorAuth">
      <input message="typens:calculatorAuthRequest"/>
      <output message="typens:calculatorAuthResponse"/>
    </operation>
  </portType>
  <!--partie 6 : Binding-->
  <binding name="MyBinding" type="typens:MyPort">
    <soap:binding xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" style="rpc" transport="http://schemas.xmlsoap.org/soap/http"/>
    <operation name="calculatorAuth">
      <soap:operation xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" soapAction=""/>
      <input name="calculatorAuthRequest">
        <soap:body xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" use="literal"/>
      </input>
      <output name="calculatorAuthResponse">
        <soap:body xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" use="literal"/>
      </output>
    </operation>
  </binding>
  <!--Partie 7 : Service-->
  <service name="MyService">
    <documentation>Documentation du WebService</documentation>
    <!--partie 8 : Port-->
    <port name="MyPort" binding="typens:MyBinding">
      <soap:address xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" location="http://localhost/mywebsite/?login=1&amp;username=myusername&amp;password=mypassword&amp;m=webservices&amp;a=soap_server&amp;class=CSoapHandler&amp;suppressHeaders=1"/>
    </port>
  </service>
</definitions> 
```

我在想一切都是正确的，但似乎不是因为我在启动我的 SOAP 客户端时遇到了这个错误（我对 soapUI 有同样的错误）：

```
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
   <SOAP-ENV:Body>
      <SOAP-ENV:Fault>
         <faultcode>SOAP-ENV:Server</faultcode>
         <faultstring>Procedure 'calculatorAuth' not present</faultstring>
      </SOAP-ENV:Fault>
   </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

这是我的 SOAP 客户端示例代码：

```
<?php   
  // Désactivation du cache WSDL
  ini_set("soap.wsdl_cache_enabled", "0");  

  $client = new SoapClient("http://localhost/mywebsite/index.php?login=myusername:mypassword=webservices&a=soap_server&class=CSoapHandler&wsdl&wsdl_mode=CWSDLRPCLiteral", array("trace" => true));
  try { 
    echo "<pre>";
    $res = $client->calculatorAuth(array("operation" => "add", "entier1" => 888, "entier2" => 987654321)); 
    print_r($res);
  }
  catch (SoapFault $e) { 
    echo $e;  
  } 
?> 
```

我不明白为什么找不到我的程序。我徒劳地花了几个小时来搜索我的 WSDL 中的问题在哪里。
我还没有真正尝试过这些技术，也许有人可以给我一个外部观点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T01:30:16.333

您的声明中没有`<xsd:complexType name="calculatorAuth">`任何`<types>`内容？看来您正在尝试调用不存在的方法。

# android - 缓慢插入android数据库

> ID：11557717
> 
> 赞同：0
> 
> 时间：2012-07-19T09:22:44.993
> 
> 标签：android, sqlite, insert

我必须在 android 数据库中插入以下字段：

**此代码在我的活动中**

```
for(int k=0; k<pdvs.size(); k++)
      {
       Map<String, String> testMap1 = new HashMap<String, String>();
       testMap1.put("pos_id", pdvs.get(k).pos_id);
       testMap1.put("visit_date", pdvs.get(k).nextvisitDate);
       testMap1.put("roadmap_id", String.valueOf(roadmap_id));
       testMap1.put("sys_visit_status_id", "1");
       testMap1.put("gps_latitude", "5");
       testMap1.put("gps_longitude", "5");

      db.insertData("pos_visit", testMap1); 
```

}

大约有 16 行要插入……没有那么多。我仍然尝试使用`ContentValues`这样的： **这是来自 SQLiteOpenHelper 类的代码**

```
public long insertData(String tableName, Map<String, String> map) {
            long id;
        ContentValues columnValues = new ContentValues();

            db.beginTransaction();
            try{

        for (Map.Entry<String, String> entry : map.entrySet()) {
            String columnName = entry.getKey();
            String value = entry.getValue();
            columnValues.put(columnName, value);

        }
        id = db.insert(tableName, null, columnValues);

            db.setTransactionSuccessful();
            }finally{
                db.endTransaction();
            }
            return id;
    } 
```

但是引入 16 行仍然需要大约 10-12 秒。无论如何，在那之后我发现`InsertHelper`已知要快得多，我这样做了：

```
 public long insertData(String tableName, Map<String, String> map) {
            long id = 0;
            int i = 0;
            int [] columnIndex = new int[map.size()];
            String [] value = new String[map.size()];

        InsertHelper ih = new InsertHelper(db, tableName);

            for (Map.Entry<String, String> entry : map.entrySet()) {

            String columnName = entry.getKey();
                    columnIndex[i] = ih.getColumnIndex(columnName);
            value[i] = entry.getValue();
                    i++;
        }

            try{
            ih.prepareForInsert();
        for (int k=0; k<columnIndex.length; k++) {

             ih.bind(columnIndex[k], value[k]);
        }
                 id = ih.execute();
            }finally{
            ih.close();
            }

            return id;
    } 
```

但是结果是第二种方法和第一种一样慢！！！任何人都可以给我一个关于如何提高插入数据库速度的想法？我在这些方法中做错了什么？

谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T09:35:31.087

您应该将外部循环包装在事务中，并在您的 insertData 方法中摆脱它。

现在，您为您的 pdvs 集的每个元素调用完整的打开事务、插入、设置成功链。如果必须始终将 pdvs 作为一个整体持久化，那么您应该只对整个操作使用 1 个事务。它会让你的代码明显更快。

```
// begin transaction here
for(int k=0; k<pdvs.size(); k++)
                    {
                        Map<String, String> testMap1 = new HashMap<String, String>();
                    testMap1.put("pos_id", pdvs.get(k).pos_id);
                    testMap1.put("visit_date", pdvs.get(k).nextvisitDate);
                    testMap1.put("roadmap_id", String.valueOf(roadmap_id));
                    testMap1.put("sys_visit_status_id", "1");
                    testMap1.put("gps_latitude", "5");
                    testMap1.put("gps_longitude", "5");

                    db.insertData("pos_visit", testMap1);

                    }
//set success here 
```

在您的 insertData 中，只需使用 insert 而无需事务

# ruby - Rails：嵌套资源的索引视图问题

> ID：11557719
> 
> 赞同：0
> 
> 时间：2012-07-19T09:23:01.880
> 
> 标签：ruby, ruby-on-rails-3, nested-attributes

我有 2 个模型的嵌套资源 - 产品和 product_images。我正在使用 Carrierwave 上传图像。我的产品模型如下所示：

```
class Product < ActiveRecord::Base

has_many :product_images, :dependent => :destroy
accepts_nested_attributes_for :product_images, :allow_destroy => :true
end 
```

我的 product_images 模型如下所示：

```
class ProductImage < ActiveRecord::Base
mount_uploader :image, ImageUploader
belongs_to :product
end 
```

我的 products_controller 看起来像这样：

```
class ProductsController < ApplicationController

def index
@products = Product.all
end

def show
@product = Product.find(params[:id])
@images = @product.product_images
end

def new
@product = Product.new
@product.product_images.build
end
... 
```

在我的显示视图中，这一切都很好，拇指版本也是如此。但是我无法让索引视图正常工作。我正在尝试在 Product_images 表中显示第一张图片，但它不会成功。

这是我的索引视图：

```
<table>

<% @products.each do |product| %>
<tr class="<%= cycle('list_line_odd', 'list_line_even') %>">

<td class="list_description">
<dl>
<dt><%= product.title %></dt>
</dl>
</td>
<td>
<%= image_tag(product.product_image.first ) %>
</td>
</td>
...
</table> 
```

我的路线最初看起来像这样：

```
resources :products 
```

然后我尝试了这个：资源：产品做资源：产品图像结束

如何使图像可以在我的索引视图中访问？有人可以帮我解决这个问题吗？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T09:34:32.180

你的`image_tag`线路错了。它应该是

```
image_tag product.product_images.first.image_url 
```

它就[在 Capybara 的自述文件中的示例中](https://github.com/jnicklas/carrierwave#uploading-files-from-a-remote-location)：)

# java - android如何设计这个布局

> ID：11557720
> 
> 赞同：1
> 
> 时间：2012-07-19T09:23:07.350
> 
> 标签：java, android, android-layout

我有一个示例布局，我正在尝试使用 xml 在 android 中创建。我能够创建类似的布局，但我觉得我的方法可能是错误的。

在这些情况下，我一直在做的是嵌套相对布局以充当“行”。下图展示了我会做什么。

![布局](../Images/8fd3d7d46731418e39870aa0383d5cd6.png)

你们将如何创建类似的布局？我觉得嵌套相对布局似乎有点过头了，但如果我不这样做，我不确定如何让所有东西都居中。

当我没有嵌套我使用的布局时

```
android:layout_toRightOf="..."
android:layout_below="@+id/t1" 
```

在 t5、t6 和 t7（来自图像）。结果看起来不正确。t1、t2、t3 和 t4 不再水平居中。

有没有办法告诉相对布局，这点之后的所有内容都应该出现在新行上？或者是相对布局是这样的错误方式吗？我认为表格布局不能正常工作，因为每一行不一定需要具有相同数量的视图并且它们需要居中。

任何建议表示赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T09:29:32.280

您可以将两个水平嵌套`LinearLayouts`在一个垂直的`LinearLayout`. 可能不如 a 高效`RelativeLayout`，但更容易获得您想要的居中行为。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >
<TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/hello" />
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:gravity="center_horizontal"
    android:orientation="horizontal" >
    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="A" />
    <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="B" />
    <Button
        android:id="@+id/button3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="C" />
    <Button
        android:id="@+id/button4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="D" />
</LinearLayout>
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:gravity="center_horizontal"
    android:orientation="horizontal" >
    <Button
        android:id="@+id/button5"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="E" />
    <Button
        android:id="@+id/button6"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="F" />
    <Button
        android:id="@+id/button7"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="G" />
</LinearLayout>
</LinearLayout> 
```

这是相同布局的另一个版本，使用`RelativeLayout`. 我从上面的嵌套开始`LinearLayouts`，选择“ **Refactor > Android > Change Layout...** ”，选择`RelativeLayout`，然后调整生成的布局，直到我把事情集中起来。

我使用了一些技巧来让它正确。我首先将中间按钮居中放在父级上，然后向左和向右扩展。在顶行，中间有偶数个按钮和空间，我使用居中的 0 宽度`TextView`来锚定按钮。我想这有点老套，但它完成了工作。:-)

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/RelativeLayout1"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:gravity="center_horizontal"
android:orientation="vertical" >
<TextView
    android:id="@+id/TextView1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:text="@string/hello" />
<TextView
    android:id="@+id/Dummy"
    android:layout_width="0dp"
    android:layout_height="48dp"
    android:layout_centerInParent="true"
    android:layout_below="@+id/TextView1" />
<Button
    android:id="@+id/button2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignTop="@+id/Dummy"
    android:layout_toLeftOf="@+id/Dummy"
    android:text="B" />
<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/button2"
    android:layout_alignTop="@+id/Dummy"
    android:layout_toLeftOf="@+id/button2"
    android:text="A" />
<Button
    android:id="@+id/button3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/button2"
    android:layout_alignTop="@+id/Dummy"
    android:layout_toRightOf="@+id/Dummy"
    android:text="C" />
<Button
    android:id="@+id/button4"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/button2"
    android:layout_alignTop="@+id/Dummy"
    android:layout_toRightOf="@+id/button3"
    android:text="D" />
<Button
    android:id="@+id/button6"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerInParent="true"
    android:layout_below="@+id/Dummy"
    android:text="F" />
<Button
    android:id="@+id/button5"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignTop="@+id/button6"
    android:layout_alignBaseline="@+id/button6"
    android:layout_toLeftOf="@+id/button6"
    android:text="E" />
<Button
    android:id="@+id/button7"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/button6"
    android:layout_alignTop="@+id/button6"
    android:layout_toRightOf="@+id/button6"
    android:text="G" />
</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-05T16:21:03.543

您也可以使用**weight**进行尝试。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:weightSum="10" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:layout_weight="2.5"
        android:gravity="center"
        android:text="hello" />

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/button1"
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:text="A" />

        <Button
            android:id="@+id/button2"
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:text="B" />

        <Button
            android:id="@+id/button3"
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:text="C" />

        <Button
            android:id="@+id/button4"
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:text="D" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/button5"
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:text="E" />

        <Button
            android:id="@+id/button6"
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:text="F" />

        <Button
            android:id="@+id/button7"
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:text="G" />
    </LinearLayout>

</LinearLayout> 
```

![在此处输入图像描述](../Images/232a4ea99eedd6d1c7667eb5a4f09b99.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T09:41:57.997

看一下这个：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    >

    <LinearLayout 
        android:id="@+id/l1"
        android:layout_width="fill_parent"
        android:layout_height="50dp"></LinearLayout>
    <View 
        android:layout_width="fill_parent"
        android:layout_height="2dp"
        android:background="@android:color/white"
        android:layout_below="@+id/l1"
        android:id="@+id/v1"/>

    <LinearLayout 
        android:id="@+id/l2"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:layout_below="@+id/v1"
        android:layout_marginTop="10dp"
        android:layout_marginBottom="10dp">
    <Button 
        android:id="@+id/pos"
        android:layout_width="0dp"
        android:layout_weight="1"
        android:layout_height="wrap_content"
        android:background="@drawable/ic_launcher"
        />
     <Button 
        android:id="@+id/neu"
         android:layout_width="0dp"
        android:layout_weight="1"
        android:layout_height="wrap_content"
        android:background="@drawable/ic_launcher"/>
      <Button 
        android:id="@+id/neg"
         android:layout_width="0dp"
        android:layout_weight="1"
        android:layout_height="wrap_content"
        android:background="@drawable/ic_launcher"/>
      <Button 
        android:id="@+id/neg"
         android:layout_width="0dp"
        android:layout_weight="1"
        android:layout_height="wrap_content"
        android:background="@drawable/ic_launcher"/>
    </LinearLayout>

    <View 
        android:layout_width="fill_parent"
        android:layout_height="2dp"
        android:background="@android:color/white"
        android:layout_below="@+id/l2"
        android:id="@+id/v2"
        />
    <LinearLayout 
        android:id="@+id/l3"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:layout_below="@+id/v2"
        android:layout_marginTop="10dp"
        android:layout_marginBottom="10dp">
    <Button 
        android:id="@+id/pos"
        android:layout_width="0dp"
        android:layout_weight="1"
        android:layout_height="wrap_content"
        android:background="@drawable/ic_launcher"
        />
     <Button 
        android:id="@+id/neu"
         android:layout_width="0dp"
        android:layout_weight="1"
        android:layout_height="wrap_content"
        android:background="@drawable/ic_launcher"/>
      <Button 
        android:id="@+id/neg"
         android:layout_width="0dp"
        android:layout_weight="1"
        android:layout_height="wrap_content"
        android:background="@drawable/ic_launcher"/>

    </LinearLayout>
    <View 
        android:layout_width="fill_parent"
        android:layout_height="2dp"
        android:background="@android:color/white"
        android:layout_below="@+id/l3"
        android:id="@+id/v3"
        />
</RelativeLayout> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-04T15:44:35.837

您也可以尝试使用线性布局。在第一个线性布局中，将 weightsum 设置为 4，将布局权重设置为 1 以使其均分，并将每个视图的重力设置为中心。在发送线性布局中做同样的事情。

# java - 乘法场景中前/后增量运算符的行为

> ID：11557724
> 
> 赞同：4
> 
> 时间：2012-07-19T09:23:23.983
> 
> 标签：java

> **可能重复：**
> [java中的x++和++x有区别吗？](https://stackoverflow.com/questions/1094872/is-there-a-difference-between-x-and-x-in-java)

谁能解释一下这些陈述的后院发生了什么？

```
int x=5;
 System.out.println((x++)*x); //Gives output as 30

int x=5;
 System.out.println((++x)*x); //Gives output as 36. 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-19T09:26:36.910

```
int x=5;
 System.out.println((x++)*x); //Gives output as 30 
```

您首先将 x (x = 5) 作为操作数。然后它增加到 6，这是第二个操作数。

```
int x=5;
 System.out.println((++x)*x); //Gives output as 36. 
```

您首先将 x 加一 (x = 6)，然后乘以 x => 6 * 6 = 36

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-19T09:26:32.250

```
p++ means use then increment with a copy (copy is extremely local)

++p means increment and use without a copy

p++: use 5 and use incremented thing later in that line

++p: increment and use immediately 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-19T09:27:58.800

乘法是从左到右关联的，因此首先计算左操作数，然后计算右操作数。

后增量运算符将评估变量的当前值，并在其后立即递增。

预增量运算符将增加变量，然后计算增加的​​值。

```
 (x++) * x (x = 5)
--> 5 * x (increment deferred, x = 5)
--> 5 * x (increment x, x = 6)
--> 5 * 6
--> 30 
```

* * *

```
 (++x) * x (x = 5)
--> 6 * x (x is incremented before evaluated into expression, x = 6)
--> 6 * 6
--> 36 
```

我在这里提到了关联性，因为它会影响最终结果。如果乘法的结合性是从右到左而不是从左到右，则后增量和前增量表达式的结果将分别为 25 和 30。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-19T09:35:29.553

假设你明白：

*   `++x`返回`x+1`和递增`x`，而
*   `x++`返回`x`和递增`x`，

结果的原因由[Java 语言规范 #15.17定义](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.17)

> 乘法运算符具有相同的优先级并且在语法上是左结合的（它们从左到右分组）。

所以在第一种情况下，`x++`首先评估它，它返回 5（它是后缀运算符）并在`x`之后加 1。然后`x++`（5）的结果乘以`x`（现在是6）==> 30

在第二种情况下，`++x`首先计算 1`x`并返回 6（它是前缀运算符）。然后`++x`（6）的结果乘以`x`（现在是6）==> 36

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-19T09:30:12.353

后自增运算符在计算表达式后进行自增。

在您的第一个示例中，实际发生的是：-

```
(x++)  * x ; // (now incremented, 6 )
// x (5) * x+1 (6) 
```

在您的第二个示例中，增量首先发生

```
(++x)  * x; // incremented straight away.
// x+1 (6) * x (now 6) 
```

# c++ - C ++如何区分容器模板和本机类型

> ID：11557729
> 
> 赞同：6
> 
> 时间：2012-07-19T09:23:28.617
> 
> 标签：c++, templates

我有以下问题：

```
template<class T>
void set(std::string path, const T data)
{
   stringstream ss;
   ss << data << std::endl;
   write(path, ss.str();
}

template<class T>
void set(std::string path, const T data)
{
    std::stringstream ss;
    for(typename T::const_iterator it = data.begin(); it < data.end(); ++it)
    {
       ss << *it;
       if(it < data.end() -1 )
          ss << ", ";
    }
    ss << std::endl;
    write(path, ss.str());
} 
```

我收到以下错误：

```
error: ‘template<class T> void myclass::set(std::string, T)’ cannot be overloaded
error: with ‘template<class T> void myclass::set(std::string, T)’ 
```

有没有办法区分容器类型和模板中的其他类型？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-19T09:42:57.787

使用一个特征：

```
#include <type_traits>

template <typename T>
typename std::enable_if<is_container<T>::value>::type
set (std::string const & path, T const & container)
{
    // for (auto const & x : container) // ...
}

template <typename T>
typename std::enable_if<!is_container<T>::value>::type
set (std::string const & path, T const & data)
{
    std::ostringstream oss;
    oss << data;
    write(path, oss.str());
} 
```

[您可以在漂亮的打印机代码](https://stackoverflow.com/questions/4850473/pretty-print-c-stl-containers)中找到合适的特征。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-19T09:41:02.337

在 C++03 中，您可以使用一点 SFINAE 来为不同类型选择性地启用不同版本的函数：

```
#include <boost/type_traits.hpp>
#include <sstream>
#include <iostream>
#include <vector>

using namespace std;

template<class T>
void set(typename boost::enable_if<boost::is_pod<T>, std::string>::type path, const T data)
{
   std::cout << "POD" << std::endl;
   stringstream ss;
   ss << data << std::endl;
}

template<class T>
void set(typename boost::disable_if<boost::is_pod<T>, std::string>::type path, const T data)
{
    std::cout << "Non-POD" << std::endl;
    std::stringstream ss;
    for(typename T::const_iterator it = data.begin(); it < data.end(); ++it)
    {
       ss << *it;
       if(it < data.end() -1 )
          ss << ", ";
    }
    ss << std::endl;
}

int main() {
  int i;
  float f;
  std::vector<int> v;
  set("", v);
  set("", i);
  set("", f);
} 
```

为了方便起见，我在这里使用了 boost，但如果不能选择 boost 或使用 C++11，你可以自己动手。

`is_pod`并不是你真正想要的，你可能想要一个`is_container`特征，但这[并不是那么微不足道，你需要制作自己的特征，](https://stackoverflow.com/questions/9242209/is-container-trait-fails-on-stdset-sfinae-issue)并对`is_pod`如何使用特征选择性地启用功能作为简单答案做出很好的近似。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T10:27:10.263

您可以在此处尝试替换失败不是错误 (SFINAE) 技术。

首先，您需要一个函数来确定一个类型是否具有迭代器成员......

```
template <typename T>
struct Has_Iterator
{
    template <typename>
    static char test(...);

    template <typename U>
    static int test(typename U::const_iterator*);

    static const bool result = sizeof test<T>(0) != sizeof(char);
}; 
```

在上面的代码中，C++ 标准需要`test(typename U::const_iterator*)`优先使用模糊的“...”参数匹配，只要`U` *它*实际上是一个具有`const_iterator`成员类型的结构/类。否则，您将遇到“替换失败” - 这不是停止编译的致命错误（因此是 SFINAE），并且找到匹配函数的尝试满足`test(...)`. 由于两个函数的返回类型不同，`sizeof`操作员可以测试哪个已匹配，`result`适当地设置布尔值。

然后，您可以将打印内容的请求转发到支持它们的模板专业化......

```
template <typename T>
void print(const T& data)
{
    printer<Has_Iterator<T>::result, T>()(data);
}

// general case handles types having iterators...
template <bool Has_It, typename T>
struct printer
{
    void operator()(const T& data)
    {
        for (typename T::const_iterator i = data.begin(); i != data.end(); ++i)
            std::cout << *i << ' ';
        std::cout << '\n';
    }
};

// specialisation for types lacking iterators...
template <typename T>
struct printer<false, T>
{
    void operator()(const T& data)
    {
        std::cout << data << '\n';
    }
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T10:07:09.970

正如我的前辈所写，您必须使用某种特征。您可能应该为此使用 Boost，但如果您不想这样做，您可以使用类似这样的东西（[http://ideone.com/7mAiB](http://ideone.com/7mAiB)）：

```
template <typename T>
struct has_const_iterator {
    typedef char yes[1];
    typedef char no[2];

    template <typename C> static yes& test(typename C::const_iterator*);
    template <typename> static no& test(...);

    static const bool value = sizeof(test<T>(0)) == sizeof(yes);
};

template <bool> class bool2class {};

template <class T>
void set_inner(const std::string &path, T & var, bool2class<false> *) {
        // T is probably not STL container
}

template <class T>
void set_inner(const std::string &path, T & var, bool2class<true> *) {
        // T is STL container
}

template <class T>
void set(const std::string &path, T &var) {
        set_inner(path, var, (bool2class<has_const_iterator<T>::value>*)0);
} 
```

区分容器和简单数组并不是一件容易的事，所以我在这里使用了检查类型是否有`const_iterator`。可能您还应该检查它是否具有`begin()`，`end()`以及您将在以后的代码中使用的其他内容。

# post - XMLHttpRequest responseXML 在 Firefox 10 上为空

> ID：11557732
> 
> 赞同：2
> 
> 时间：2012-07-19T09:23:44.093
> 
> 标签：post, firefox-addon, xmlhttprequest

我在firefox插件中有XMLHttpRequest，如下所示：

```
httpRequest = new XMLHttpRequest();
httpRequest.open("POST", baseUrl + "check.php?uid=" + username, true);
httpRequest.responseType = "document";
httpRequest.setRequestHeader("Content-type", "application/x-www-form-urlencoded");      
httpRequest.setRequestHeader("Content-length", dataString.length);
httpRequest.setRequestHeader("Connection", "close");
httpRequest.onload = infoReceived;
httpRequest.send(dataString); 
```

我在最新版本的 Firefox (14.0.1) 上工作得很好。

但是，在 Firefox ESR 10 上，httpRequest.responseXML在处理程序过程 (infoReceived)中为**空**

请问有什么提示吗？

我检查了 MDN 文档，但没有关于 ESR 10 版本不兼容的说明。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T11:07:36.233

好的，我想通了。

之前（内部处理函数）：

```
var response = httpRequest.responseXML; 
```

之后（内部处理函数）：

```
var parser = new DOMParser();
var response = parser.parseFromString(httpRequest.responseText, "text/html"); 
```

之前（主要功能）：

```
httpRequest.responseType = "document"; 
```

之后（主要功能）：

```
//httpRequest.responseType = "document"; 
```

[我还在MDN 文档](https://developer.mozilla.org/en/xmlhttprequest)中找到了正确的信息：

![在此处输入图像描述](../Images/c23d8ff9980b2f1526f92664f7a2d560.png)

# java - Jsp 文件不在 web.xml 中启动

> ID：11557733
> 
> 赞同：0
> 
> 时间：2012-07-19T09:23:54.873
> 
> 标签：java, rest, jax-rs, web.xml

我正在尝试在我的应用程序中将 jsp 文件作为欢迎文件运行。

这是我的 web.xml 文件：

```
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">

    <welcome-file-list>
        <welcome-file>index.jsp</welcome-file>
    </welcome-file-list>

    <servlet>
        <servlet-name>RESTServiceFrontEnd</servlet-name>
        <servlet-class>
                com.sun.jersey.spi.container.servlet.ServletContainer
            </servlet-class>
        <init-param>
          <param-name>javax.ws.rs.Application</param-name>
          <param-value>
                    enceladus.server.rest.FrontEnd
                </param-value>
        </init-param>
        <init-param>
          <param-name>com.sun.jersey.spi.container.ContainerRequestFilters</param-name>
          <param-value>
                    com.sun.jersey.api.container.filter.LoggingFilter
                </param-value>
        </init-param>
        <init-param>
          <param-name>com.sun.jersey.spi.container.ContainerResponseFilters</param-name>
          <param-value>
                    com.sun.jersey.api.container.filter.LoggingFilter
                </param-value>
        </init-param>
        <init-param>
          <param-name>com.sun.jersey.api.json.POJOMappingFeature</param-name>
          <param-value>true</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
     </servlet>

      <servlet-mapping>
        <servlet-name>RESTServiceFrontEnd</servlet-name>
        <url-pattern>/*</url-pattern>
      </servlet-mapping>

    </web-app> 
```

和我的jsp文件：

```
 <%@page import="enceladus.server.objects.Management"%>
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
</head>
<body>
    <%
        Management m = Management.getInstance();
    System.out.println("asdasfdfsgsdgdafgdfg");
    %>
</body>
</html> 
```

当我删除除欢迎文件之外的所有内容时，它工作得很好。我还有一条来自我的服务器的消息：

> > 19-lug-2012 11.08.22 com.sun.jersey.api.container.filter.LoggingFilter$Adapter 完成信息：1 * 服务器出站响应 1 < 404 1 <

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T09:28:13.603

更改`<url-pattern>`RESTService。

```
 <servlet-mapping>
        <servlet-name>RESTServiceFrontEnd</servlet-name>
        <url-pattern>/rest/*</url-pattern>
  </servlet-mapping> 
```

PS：在请求 REST 服务时，您的 URL 应该是`http://localhost/contextFolder/rest/method`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T09:29:14.310

请按照`welcome-file-list`以下定义`servlet mapping``web-app_2_3.dtd`

```
 <servlet-mapping>
   <servlet-name>RESTServiceFrontEnd</servlet-name>
  <url-pattern>/*  </url-pattern>
</servlet-mapping>
<welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
</welcome-file-list> 
```

# php - 使用 PHP 向数据库表中添加可变数量的字段

> ID：11557737
> 
> 赞同：4
> 
> 时间：2012-07-19T09:24:03.767
> 
> 标签：php, forms

我似乎无法想出一种将可变数量的字段添加到数据库表的正确方法。假设我正在构建一个 Web 应用程序，访问者可以在其中注册和管理他们的联系人。他们可以通过表单添加个人联系人，该表单具有以下文本输入字段：

*   联系人姓名
*   电话号码
*   电子邮件地址
*   公司
*   地址
*   主页

在此表单中，只需要“联系人姓名”字段，因此完全可以在不知道联系人电话号码的情况下添加联系人的电子邮件地址。如何在 PHP 中正确实现这一点？

他们以前做过的方式涉及遍历 $_POST 数组并检查每个特定字段是否已提交。如果已提交字段，则其字段名称将添加到 SQL 语句中。然后我们对值做同样的事情。

我的直觉告诉我，这种工作方式是非常错误的，但我想不出任何其他方式来做到这一点......

```
function generateSQLStatement($_POST) {

    // Add field names to SQL statement
    foreach ($_POST as $field => $value) {
        if (!empty($value)) {
            $sql .= $field . ', ';
        }
    }

    // Remove last comma and space
    $sql = substr($sql, 0, -2);

    // Add values to SQL statement
    $sql .= ') VALUES (';
    foreach ($_POST as $field => $value) {
        if (!empty($value)) {
            $sql .= $value . ', ';
        }
    }

    // Remove last comma and space
    $sql = substr($sql, 0, -2);

    $sql .= ')';

    return $sql;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T09:34:40.067

请注意，下面的代码中`SANITIZE_ME`是方法的占位符，例如[`mysqli::real_escape_string`](http://php.net/manual/en/mysqli.real-escape-string.php), 或任何适合您情况的方法。您将需要酌情调整此答案。

```
function generateSQLStatement($_POST) {

    $fieldNames = "";
    $values = "";

    foreach ($_POST as $field => $value) {
        if (!empty($value)) {
            if (!empty($fieldNames)) {
                $fieldNames .= ',';
                $values .= ',';
            }
            $fieldNames .= SANITIZE_ME($field);
            $values .= "'" . SANITIZE_ME($value) . "'";

        }
    }

    return "($fieldNames) VALUES ($values)";
} 
```

这种方法仅使用一个循环，因此速度更快。但是您可能希望根据预定义的可接受字段数组验证您的字段名称，以防有人编辑发布到您的脚本的表单并输入无效的字段名称。

**编辑**

可以使用更通用的方法来创建一个实用函数，您可以在整个应用程序中轻松地与其他表一起重用它：

*这很多可以放在一些通用的包含文件中：*

```
// An array whose keys are valid table names and
// whose values are arrays of valid field names
// within the table named in the key
$acceptableFields = array(
    'contacts' => array(
        // valid fields in the 'contacts' table
        'name', 'address' //...
    )
    // ... other mappings, if desired
);

function isValidField($table, $field) {
    if (!isset($acceptableFields[$table]))
        return false;

    return in_array($field, $acceptableFields[$table]); 
    // Note that in_array is case-sensitive, so you may want 
    // to just manually loop through $acceptableFields[$table]
    // and compare strings yourself.
}

function insertData($table, array $fieldValuesMap, mysqli $mysqli) {
    // First, some self-explanatory validation:
    if ($table === null)
        throw new InvalidArgumentException('$table cannot be null');

    if (!is_string($table))
        throw new InvalidArgumentException('$table must be a String');

    if (empty($table))
        throw new InvalidArgumentException('$table cannot be an empty String');

    if (!isset($acceptableFields[$table]))
        throw new InvalidArgumentException("\"$table\" is an invalid table name");

    $fieldNames = "";
    $values = "";

    foreach ($fieldValuesMap as $field => $value) {
        // check the field name is valid for the given table
        // and that the value is not empty.  You may want to
        // add a logging mechanism for invalid field names to
        // help track bugs or even malicious use
        if (isValidField($table, $field) && !empty($value)) {
            // check to see whether there are any items in 
            // the lists already
            if (!empty($fieldNames)) {
                // yes, so add commas:
                $fieldNames .= ',';
                $values .= ',';
            }

            // no need to escape the field name as we have already
            // checked that it is valid
            $fieldNames .= $field;
            // but we do need to escape the value
            $values .= "'" . $mysqli->real_escape_string($value) . "'";

        }
    }

    // check whether we've actually got anything to insert:
    if (empty($fieldNames))
        return NULL;

    return $mysqli->query("INSERT INTO $table ($fieldNames) VALUES ($values)");
} 
```

*在页面上添加联系人的示例用法：*

```
require_once "above.file"; // whatever it's called

if ($_POST) {

    $mysqli = new MySQLi(/*...*/);
    if (mysqli_connect_errno()) {
        // handle connection error
    } else {
        // set your charset
        $mysqli->set_charset("utf8"); // or whatever you use

        $result = insertData('contacts', $_POST, $mysqli);

        if ($result === NULL) {
            // There was nothing to insert
        } elseif ($result === FALSE) {
            // An error occurred, handle it here
        } else {
            // Success!  Use $mysqli->insert_id to get your new 
            // record's ID (if appropriate).
        }
    }

}
//
//============================================== 
```

做一些额外的工作，你最终会得到一些灵活且可重用的东西。不过，就个人而言，我更喜欢更面向对象（活动记录）的方法。

# performance - 在 Web 服务器上组合音频文件的最快方法是什么？

> ID：11557739
> 
> 赞同：0
> 
> 时间：2012-07-19T09:24:12.380
> 
> 标签：performance, audio, command-line, concatenation, sox

免责声明：请原谅我对音频/声音处理的无知，我的背景是网络和移动开发，这是我的一个客户的定制要求！

我需要连接 4 个音频文件，并在所有 4 个音频文件后面播放背景音轨。可以以任何格式创建源音频文件，或对其进行任何处理，以提高处理时间，但输出质量仍然很重要。为清楚起见，输入文件可以如下命名（.wav 只是一个示例格式）：

*   背景.wav
*   段-a.wav
*   段-b.wav
*   段-c.wav
*   段-d.wav

并且需要像这样构造：

```
[------------------------------background.wav------------------------------]
[--segment-a.wav--][--segment-b.wav--][--segment-c.wav--][--segment-d.wav--] 
```

我已经设法使用[SoX](http://sox.sourceforge.net/)工具使用 MP3 文件实现上述连接部分，但是在一台速度相当快的计算机上，我每分钟处理大约一个小时的连接音频，这对我的要求来说还不够快，并且我还没有应用背景声音或任何“不错的东西”，例如修剪/褪色。

我的问题是：

*   SoX 是此类操作的最佳/唯一工具吗？
*   有什么方法可以在不牺牲（太多）质量的情况下加快流程？
*   更改输入文件格式会提高性能吗？如果是这样，哪种格式最好？

非常感谢这个优秀社区的任何建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T20:29:14.387

1.  Sox 可能不是*最好*的工具，但我怀疑如果没有手工编码，你会发现更好的东西。
2.  我冒昧地猜测您在那段时间处理这么多音频方面做得很好。您可能会做得更好，但您必须进行实验。没错，提高速度的主要方法可能是更改文件格式。
3.  MP3 和 OGG*可能*会给您类似的性能，因此首先确定 MP3 与未压缩音频（如 wav 或 aiff）的比较。如果 MP3/OGG​​ 更好，请尝试不同的压缩比和采样率，看看哪个更快。对于 wav 文件，您可以尝试降低采样率（您也可以使用 MP3/OGG​​ 执行此操作）。如果这是语音，您可能可以低至 8kHz，这应该会大大加快速度。对于音乐，我会说 32kHz，但这取决于要求。此外，尝试单声道而不是立体声，这也应该加快速度。

# wpf - WPF：带有 Alpha 的 LinearGradientBrush 在弹出控件中不起作用？

> ID：11557740
> 
> 赞同：0
> 
> 时间：2012-07-19T09:24:14.050
> 
> 标签：wpf, menu, popup, lineargradientbrush

我想创建一个自定义 WPF 下拉菜单，所以我创建了一个包含 ToggleButton 和一个 Popup 控件的用户控件。当我单击按钮时会出现弹出窗口。现在我想在弹出的菜单项上添加鼠标悬停效果：但 LinearGradientBrush 不适用于 alpha 通道：

```
<UserControl.Resources>
    ...
    <Style x:Key="SubMenuItemStyle" TargetType="{x:Type MenuItem}">

        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="MenuItem">
                    <Grid Width="{TemplateBinding Width}" Height="{TemplateBinding Height}" ClipToBounds="True">
                        <Rectangle x:Name="rectangle" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" 
                               Stroke="{TemplateBinding BorderBrush}" StrokeThickness="{TemplateBinding BorderThickness}"
                               Fill="{TemplateBinding Background}" />
                        <StackPanel>
                            <TextBlock x:Name="text" Text="{TemplateBinding Header}" Foreground="{TemplateBinding Foreground}" />
                        </StackPanel>
                    </Grid>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter Property="Stroke" TargetName="rectangle" Value="#30000000"/>
                            <Setter Property="Fill" TargetName="rectangle">
                                <Setter.Value>
                                    <LinearGradientBrush EndPoint="0,0" StartPoint="1,1">
                                        <GradientStop Color="#10000000" Offset="0"/>
                                        <GradientStop Color="#10FFFFFF" Offset="1"/>
                                        <!-- Not works... -->
                                    </LinearGradientBrush>
                                </Setter.Value>
                            </Setter>
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter Property="Foreground" TargetName="text" Value="#FF9A9A9A"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</UserControl.Resources>

<Grid>
    <Controls:ToggleImageButton Style="{DynamicResource ArrowMenuStyle}" x:Name="imageButton" Height="21" />
    <Popup x:Name="popup" PlacementTarget="{Binding ElementName=imageButton}" Placement="Bottom" StaysOpen="False" IsOpen="{Binding ElementName=imageButton, Path=IsChecked}">
        <ItemsControl ItemsSource="{Binding MenuCommands}">
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <MenuItem Header="{Binding Name}" Command="{Binding Command}" Background="{Binding ElementName=popupMenuControl, Path=MenuBackground}" Foreground="{Binding ElementName=popupMenuControl, Path=MenuForeground}"  Click="MenuItem_Click" Style="{StaticResource SubMenuItemStyle}" />
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl>
    </Popup>
</Grid> 
```

当我将 GradientBrush 设置为此时，一切正常：

```
 <LinearGradientBrush EndPoint="0,0" StartPoint="1,1">
              <GradientStop Color="Green" Offset="0"/>
              <GradientStop Color="Yellow" Offset="1"/>
    </LinearGradientBrush> 
```

但似乎 Alpha 通道打破了整个事情，我看到的是一个黑色矩形。...任何的想法？

如果我将 MenuItems 放在 Menu 容器中，Menu 会覆盖我的样式...

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T10:29:55.317

你设置`AllowsTransparency`了`true`吗？

# javascript - 激活 AJAX 查询时禁用窗口调整大小

> ID：11557742
> 
> 赞同：1
> 
> 时间：2012-07-19T09:24:16.930
> 
> 标签：javascript, jquery, html, ajax

我有一个 jQuery 脚本，它是一个搜索脚本，但还包含在调整窗口大小时将元素大小调整为*（屏幕高度 - 40px）*的功能。但是，**我想在搜索*（AJAX 查询）*处于活动状态时禁用调整大小功能。有谁知道我该怎么做？**

我目前的代码是：

```
$(document).ready(function(){
    $(window).resize(function(){
        if($(window).height()<1200){
            $("#a").height($(window).height()-40);
        }
    });
    $("form").submit(function(a){
        a.preventDefault();
        if($("#i").val().length>0){
            $.ajax({
                type:"get",
                url:"search.php?q="+q,
                dataType:"html",
                success:function(a){
                    ...
                }
            })
        }
    })
}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T09:28:12.953

使用 .on() 和 .off()

```
$(document).ready(function(){
    function started(){
        if($(window).height()<1200){
            $("#a").height($(window).height()-40);
        }
    $(window).on("resize.name_space",started);

    $("form").submit(function(a){
        a.preventDefault();
        if($("#i").val().length>0){
           $(window).off("resize.name_space");
            $.ajax({
                type:"get",
                url:"search.php?q="+q,
                dataType:"html",
                success:function(a){
                $(window).on("resize.name_space",started);    ...
                }
            })
        }
    })
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T09:27:28.153

试试这个，它会在 ajax 运行时添加一个签入，并将停止重新调整大小

```
$(document).ready(function(){

//Create the variable
var check = false;

$(window).resize(function(){

    //Is the ajax currently running? This if statement runs if the answer is no
    if (check == false && $(window).height()<1200 ) {
        $("#a").height($(window).height()-40);
    }

});
$("form").submit(function(a){
    a.preventDefault();

    //Set the variable to true, this stops the resizing above ^^
    check = true;
    if($("#i").val().length>0){
        $.ajax({
            type:"get",
            url:"search.php?q="+q,
            dataType:"html",
            success:function(a){
                ...
            },
            complete: function() {
                //Set back to off once the ajax has finished
                check = false;
            }
        })
    }
}) 
```

})

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T09:27:59.113

```
var loading;
...
    if($(window).height()<1200 && !loading){
...
        loading = true;
        $.ajax({
            ...
            complete: function(){
                loading = false;
            }.
        })
    }
}) 
```

# c# - 方法调用的多线程（从 SQL Server 检索数据）比过程版本慢

> ID：11557751
> 
> 赞同：0
> 
> 时间：2012-07-19T09:24:52.003
> 
> 标签：c#, asp.net-mvc, .net-4.0

```
// procedural 
foreach (var foo in bar)
{                                 
    foo.someProperty = getData(ref foo);     
}

// threaded
foreach (var foo in bar)
{                                         
    ThreadStart work = delegate
    {
        getData(ref foo);
    };

   new Thread(work).Start();    
}

getData(ref foo){

    // Either  a LINQ query 

    // Or Exec Command to Stored procedure in SQL Server

    // Either taking approx 2 seconds to return results

    foo.someProperty = resultsFromDBOrLinqStatement;
} 
```

如果 bar 有 20 个项目，那么简单地使用程序 foreach 循环大约需要 10 秒 - 一个接一个地执行一个请求，每次调用数据库。

如果对于相同的数据，使用每个循环的线程，请求需要更长的时间？！看起来即使线程都很好，对数据库的请求 - 来自每个线程 - 正在阻止事情。

如果我将 getData() 方法修改为；

```
getData(ref foo){

    thread.sleep(4000);
} 
```

然后，正如预期的那样，整个请求在 4 秒内完成 - 所有线程几乎同时启动，并在 4 秒后同时退出。

我是否缺少与每个线程中的 DB 调用相关的东西，从而减慢了整个过程的速度？- 一些 web.config 设置用于与 DB 等的并发连接？

PS。我尝试过并行foreach和Tasks，但它总是回到线程与数据库调用减慢速度，就好像数据库服务器正在排队所有调用一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T10:48:48.720

*只有满足以下所有*条件，对 SQL 服务器（或任何其他数据库服务器）的并行请求才会更快：

1.  服务器为每个传入请求提供一个空闲处理器内核（实际上每个请求使用一个线程）
2.  每个传入的请求都涉及不同的文件（数据库、表......取决于实际的服务器）
3.  每批文件（每个请求一个）位于自己的硬盘上
4.  服务器有足够的可用物理内存来同时处理所有请求和所有涉及的数据
5.  服务器进程不会耗尽内存（不太可能，但如果您请求大量数据，则在 32 位系统上......）

（如果您的服务器有 SSD，第 2 点和第 3 点无关紧要 - 在 SSD 上，并行和顺序读取多个文件的累积时间大致相同）

在任何其他情况下，您只有一种方法可以使您的程序更快（除了获得更快的服务器，这并不总是可能的）：通过减少服务器的工作来使每个请求本身更快（使用存储过程，将结果缓存在临时表中，减少大连接...）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T10:01:34.507

当线程创建的成本（时间、资源）小于过程执行时间的汇总时，多线程会产生效果。

# javascript - XSS 漏洞

> ID：11557755
> 
> 赞同：0
> 
> 时间：2012-07-19T09:25:18.727
> 
> 标签：javascript, jquery, jquery-mobile, xss

我正在使用 jquery mobile 开发移动应用程序。我想消除我的应用程序中的所有 xss 攻击。当我测试我的应用程序时，发生跨站点反射错误。实际上，错误发生在我的查询中。是否有任何 JavaScript 代码可以消除所有 Xss 错误？或者给我一个想法来消除客户端和服务器端的这些错误？

提前致谢！

* * *

谢谢你的及时回复。

询问：

SELECT%20Id%2C%20Name%2C%20lsc_ *Course* _r.Name%2C%20lsc_ *StartDate* _c%2C%20lsc_ *Venue* _r.Name%20FROM%20lsc_ *event* _c%20WHERE%20lsc_ *StartDate* _c%20%3E%3D%20TODAY% 20ORDER%20BY%20lsc_StartDate_c *72aaaalert* (1)606c8b0c254

&_=1342613913758 HTTP/1.1

我在查询结束时收到了这个 / 72aaaalert(1)606c8b0c254 / 错误。如何删除它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T09:27:08.443

> 是否有任何 JavaScript 代码可以消除所有 Xss 错误？

不，没有办法神奇地修复所有 XSS 问题。

您必须在使用数据之前对其进行编码。如果您接受文本输入，则必须在将其插入数据库之前将其转换为 SQL，然后在将其插入 HTML 之前将其转换为 HTML 等等。（否则文本可能包含在 SQL / HTML / 等中具有特殊含义的字符）。

# php - 清理数据库的冗余数据

> ID：11557757
> 
> 赞同：2
> 
> 时间：2012-07-19T09:25:22.283
> 
> 标签：php, mysql

```
locid   country city
39409   US  Aaronsburg
128426  US  Aaronsburg
340356  US  Aaronsburg
429373  US  Aaronsburg
422717  US  Abbeville
431344  US  Abbeville
433062  US  Abbeville
341726  US  Abbeville
421248  US  Abbeville
40779   US  Abbeville
326718  US  Abbeville
317654  US  Abbeville
16707   US  Abbeville
25771   US  Abbeville
120301  US  Abbeville
132115  US  Abbeville
121770  US  Abbeville
130397  US  Abbeville
5585    US  Abbeville
10227   US  Abbeville
190173  US  Abbeville
491120  US  Abbeville
311174  US  Abbeville
306532  US  Abbeville
164271  US  Abbot
465218  US  Abbot
58452   US  Abbotsford
359399  US  Abbotsford
309116  US  Abbotsford
8169    US  Abbotsford 
```

有人可以给我一个 sql 查询来帮助我清理这个表吗？清理 locid（索引）后应该重置，顺便说一句，这是一个使用此查询的县城***`SELECT locid, country, city FROM location WHERE country = 'US' ORDER BY city ASC`***。当我通过 phpmyadmin 的导入多次导入一个 sql 文本时，就会出现这个冗余数据，这就是结果，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T09:28:45.727

在表位置添加唯一索引，这样就不会插入重复的记录

```
ALTER IGNORE TABLE location ADD UNIQUE KEY ix1(country, city); 
```

这将自动从表中删除重复记录，并且对于将来的插入查询，您需要使用`INSERT IGNORE`子句以避免出现重复错误。

但正如`@AD7six`评论中所建议的，它可能不适用于 MySQL 版本`5.1.41,5.5.1-m2, 6.0`：请参阅[此处的错误](http://bugs.mysql.com/bug.php?id=40344)

或使用`DELETE`查询删除重复项的替代安全方法：

```
DELETE a
FROM location a
     LEFT JOIN (
                SELECT locid
                FROM location
                GROUP BY country, city
               )b
               ON a.locid = b.locid
WHERE b.locid IS NULL; 
```

要重新设置`auto_increment`column的值`locid`，您只需删除`primary key`on`locid`并重新创建它：

```
ALTER TABLE location DROP column locid;
ALTER TABLE location 
      ADD COLUMN locid INT unsigned NOT NULL AUTO_INCREMENT PRIMARY KEY FIRST; 
```

或重新设置`locid`使用`UPDATE`查询值的替代方法：

```
SET var_locid = 0;

UPDATE location
SET locid = (@var_locid := @var_locid + 1)
ORDER BY locid ASC; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-19T09:54:58.480

您可以通过几个（每个简单的）步骤来完成此操作。

### 备份您的原始表格

如果您还没有 - 备份您的原始表格数据。

### 创建临时表

创建一个新表，您将用它来替换原始表。这是一个例子：

```
CREATE TABLE temporary (
  locid INTEGER(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  country VARCHAR(255) DEFAULT '',
  city VARCHAR(255) DEFAULT '',
  PRIMARY KEY  (locid),
  UNIQUE KEY  (country, city)
); 
```

架构应该与您现有的表几乎相同，值得注意的区别是：

*   自动递增主键
*   独特的国家+城市索引

### 导入旧数据

```
INSERT IGNORE INTO temporary (country, city) SELECT country, city FROM original_table_name; 
```

这将使用独特的国家+城市组合填充您的临时表。每行将被分配一个自动增量值 - 即它将从 1 开始。

### 检查结果

查看您的数据并确保它看起来像您想要的那样：

```
SELECT * FROM temporary; 
```

如果有任何问题 - 删除表`temporary`调整您正在运行的 sql 并重新开始。

### 用新表替换原来的表

一旦您对您在`temporary`表格中看到的内容感到满意：

```
DROP TABLE original_table_name; -- Or rename it to something else
RENAME TABLE temporary TO original_table_name; 
```

您现在有一个表，其中包含唯一数据和从 1 开始的顺序 ID。

### 其他选项

您也可以将唯一索引应用于国家+城市，删除主键字段，然后将其重新添加为自动增量。请注意，**[mysql 在创建索引时可能会忽略忽略标志](http://bugs.mysql.com/bug.php?id=40344)**，尽管有一种[解决方法](https://stackoverflow.com/a/12029761/761202)。

我个人会这样做，但如果您对 sql 没有信心 - 一次只做一件事情，并且在此过程中不破坏您的源数据，可以使更新您的架构成为一项不那么令人担忧的任务。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T09:38:20.683

删除这些记录

```
select T2.* from ( 
     select country city,max(locid)locid
     from <table>
     group by country city)T1
     join
     select * from <table> T2
     where T2.locid<>T1.locid 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T09:34:09.730

使用新的 auto_increment 字段创建一个新表，然后使用 GROUP BY 将它们选择到新表中

未经测试，但应如下所示：

```
INSERT INTO new_table(country, city) 
SELECT country, city FROM old_table 
GROUP BY country,city 
```

编辑：您可以删除 old_table 并在之后重命名 new_table。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-19T09:34:33.963

1.  选择唯一记录并插入到相同架构的另一个临时表中。
2.  从他的桌子上删除所有东西
3.  从临时表中选择并重新插入。
4.  删除临时表

# ruby-on-rails - 带有git远程的Gem文件在heroku push上失败

> ID：11557759
> 
> 赞同：55
> 
> 时间：2012-07-19T09:25:35.187
> 
> 标签：ruby-on-rails, ruby, git, heroku, bundler

我的 gemfile 中有以下行：

```
gem 'client_side_validations', :git => "git@github.com:Dakuan/client_side_validations.git", :branch => "master", ref: '2245b4174ffd4b400d999cb5a2b6dccc0289eb67' 
```

它指向的仓库是公开的，我可以在本地运行 bundle install / update 就好了。当我尝试推送到 Heroku 时，出现以下错误：

> ```
>  Fetching git@github.com:Dakuan/client_side_validations.git
>    Host key verification failed.
>    fatal: The remote end hung up unexpectedly
>    Git error: command `git clone 'git@github.com:Dakuan/client_side_validations.git' "/tmp/build_1xa9f06n4k1cu/vendor/bundle/ruby/1.9.1/cache/bundler/git/client_side_validations-56a04875baabb67b5f8c192c6c6743df476fd90f" --bare --no-hardlinks` in directory /tmp/build_1xa9f06n4k1cu has failed. 
> ```
> 
> ！！无法通过 Bundler 安装 gem。！！Heroku 推送被拒绝，无法编译 Ruby/rails 应用程序

有人对这里发生的事情有任何想法吗？

* * *

## 回答 #1

> 赞同：152
> 
> 时间：2012-07-19T10:25:07.060

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-24T18:35:33.717

第二个答案很晚，因为我遇到了 Heroku 构建日志的一些令人困惑的输出，这让我有一段时间感到困惑。

如果您的 Gemfile 中有多个 Github 托管的 gem，其中一个无法访问（在我的情况下，我不小心指向了我的私人仓库），构建日志会引发类似`Username not found`或*所有*Github 托管的 gem 的错误 -`Repository not found`甚至那些可用的。

# objective-c - 如何更改颜色 UINavigation 栏的分隔线

> ID：11557760
> 
> 赞同：1
> 
> 时间：2012-07-19T09:25:40.207
> 
> 标签：objective-c, ios, uinavigationcontroller, uinavigationbar

我在 UINavigation 栏中得到一个分隔线，我该如何删除它？

![在此处输入图像描述](../Images/c80ca57532c5d4a5b19083575e9d8e7e.png)

任何帮助将不胜感激。谢谢。更新 - 附加全屏截图。![在此处输入图像描述](../Images/ac5fa8497c85ff89ff720fcb3239fc45.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T10:57:20.690

如果您的目标是 iOS 5 和更新版本，您可以像这样为 UINavigationBar 设置任意背景图像

```
 [navBar setBackgroundImage:[UIImage imageNamed:@"navBarBg"] forBarMetrics:UIBarMetricsDefault]; 
```

如果您需要支持 iOS 4，请尝试继承 UINavigationBar 并覆盖`drawRect:`方法。

# jquery - 即使请求成功，也会调用 jQuery ajax 错误函数

> ID：11557762
> 
> 赞同：6
> 
> 时间：2012-07-19T09:25:51.533
> 
> 标签：jquery, ajax

我正在处理我希望在不刷新页面的情况下发送的 wordpress 网站联系表。我设法让它工作，它发送邮件，但后来我想如果它不成功怎么办，并添加了错误功能。现在，它每次都调用错误函数，即使它设法发送邮件。这是它的代码：

```
 $("#Submit").click(function () {
    var dataString = $('#knamecontactform').serialize();
    //alert (dataString);return false;
    $.ajax({
        type: "POST",
        url: "http://example.com/form.php",
        data: dataString,
        dataType: "text",
        error: function () {
            $('#messagenotsent').fadeIn(400);
        },
        success: function () {
            $('#knamecontactform')[0].reset();
            $('#messagesent').fadeIn(400);
        }

    });
    return false;

}); 
```

和 submitform.php：

```
<?php
$to = "mail@gmail.com";
$subject = "Message";
$message = 
$_POST['Nimi'] . "\n" .
$_POST['Puhelin'] . "\n" .
$_POST['Sposti'] . "\n" .
$_POST['Tiedot'];
$from = $_POST['Nimi'];
$headers = "From:" . $from;
mail($to,$subject,$message,$headers);
echo 'Mail sent.';
?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T17:31:54.487

除了上面提到的评论者（您的原始问题是跨域 AJAX）之外，您可能需要考虑使用更新的（在 1.5 版中引入）jQuery 延迟处理 AJAX 事件的方式，因为错误：和成功：函数将在jQuery 的未来版本。除了更具前瞻性之外，我还认为它为您的代码提供了一些可读性。

使用 .done 代替成功，使用 .fail 代替错误。请参阅下面的示例。

```
$.ajax({
  //all your regular ajax setup stuff except no success: or error:
 })
 .done( function (data, status) {
     //do whatever you want with the return data upon successful return
 })
 .fail( function (data, status) {
     //do whatever you want with the return data upon error
 }); 
```

有关更多信息，请查看[有关延迟对象的 jQuery 文档](http://api.jquery.com/category/deferred-object/)。

# android - ListView item ListSelector drawable 闪烁

> ID：11557763
> 
> 赞同：2
> 
> 时间：2012-07-19T09:25:58.570
> 
> 标签：android, listview, drawable, shape

我的 listSelection 有一个自定义可绘制对象。当我选择一个项目时，它会被选中。但是当我滚动浏览其他项目（向上/向下滚动）时，背景会闪烁，有时它也会消失。

我包括我的 xml 布局：

列表显示：

```
<ListView
            android:id="@id/listView"
            android:layout_width="100dp"
            android:layout_height="fill_parent"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:listSelector="@drawable/list_selector"
            android:clickable="true"
            android:divider="@drawable/separetor_drawable"
            android:fastScrollEnabled="true"
            android:paddingLeft="15dp"
            android:paddingRight="15dp"
            android:scrollbars="none" >
        </ListView> 
```

可绘制布局：list_selector.xml

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle" >

    <corners android:radius="6dp" />

    <solid android:color="@color/grey" />

    <size android:width="50dp" />

</shape> 
```

此外，我什至指定形状宽度，形状自动填充_parent，高度也适用。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T09:29:51.450

//尝试在您的列表视图属性中

```
 android:cacheColorHint = "#00000000" 
```

或者

```
android:cacheColorHint="@android:color/transparent" 
```

在java代码中，你应该使用

```
listView.setCacheColorHint(Color.TRANSPARENT); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T20:48:02.910

不知道您是否得到了答案，但我们曾经遇到过类似的问题。我们通过在列表项的布局文件中为外部元素设置背景来修复它：

列表项.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:background="@drawable/listselector"
...>
....
</RelativeLayout> 
```

然后是drawable .. listselector.xml

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item android:state_pressed="true" android:drawable="@color/blue" />
<item android:state_selected="true" android:state_pressed="false" android:drawable="@color/yellow" />
<item android:state_selected="false" android:state_pressed="false" android:drawable="@color/black" />
</selector> 
```

背景 xml 文件设置按下、选择和正常状态的值，如果您愿意，可以将颜色更改为其他可绘制对象。似乎解决了我们遇到的奇怪的背景闪烁问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T09:57:08.343

在你的列表视图中试试这个：

```
android:listSelector="@android:color/transparent"
android:cacheColorHint="#00000000"
android:focusable="false"
android:focusableInTouchMode="false" 
```

# java - 将一些代码放在 try catch 块中以什么方式可以阻止 JVM 进行优化？

> ID：11557766
> 
> 赞同：5
> 
> 时间：2012-07-19T09:26:15.767
> 
> 标签：java, try-catch, effective-java

来自Effective Java 中的*异常章节：*

> 将代码放在 try-catch 块中会抑制现代 JVM 实现可能执行的某些优化

**为什么**以及**如何**使用 try-catch 块阻止 JVM 进行优化？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T09:32:27.673

JVM 可能不会将 try/catch 块内的操作与 try/catch 块外的操作组合或重新排序。每一层的复杂性都使优化变得更加困难。如果这是一个相对罕见的情况，它可能不会由 JVM 处理，如果有疑问，它会选择正确性而不是最佳代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T11:49:45.107

“为什么”的原因之一是*假定*异常和异常处理是异常的；即很少执行的代码。因此，JIT 编译器花在优化异常处理程序上的时间对整体性能几乎没有好处。

JIT 编译器的优化器必须平衡优化的性能优势和优化成本。后者包括：

*   检查复杂的先决条件以查看是否可以进行优化的成本，
*   进行实际优化的成本，以及
*   执行和维护一个复杂软件的成本（对 Oracle 而言），该软件执行优化（在正常条件/假设下）不会有效。

* * *

也可能存在抑制异常处理程序优化的技术原因。例如，优化器可能不容易（甚至不可能）弄清楚控制流“来自”哪里。因此，无法执行基于知道的优化（例如，在寄存器中缓存内容、提升公共子表达式……）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-19T10:00:02.787

检查以下链接：

[Java 异常有多慢？](https://stackoverflow.com/questions/299068/how-slow-are-java-exceptions)

我猜异常是 Java 对象，需要创建这些对象。创建对象是一项昂贵的操作。因此，仅将异常用于处理错误而不是控制流程。

# c# - 在线 CRM REST 服务 - 遇到问题

> ID：11557768
> 
> 赞同：3
> 
> 时间：2012-07-19T09:26:20.550
> 
> 标签：c#, rest, dynamics-crm-online

这是一项简单的任务，但我浪费了一天多的时间。这就是为什么来找你。请帮助我摆脱这个问题。

我的要求很简单，我有一个 ASP.NET 项目。我在在线 CRM 中有一个实体

实体名称：“员工”，字段为“姓名、年龄、性别”

我无法在我的 asp.net 项目中添加 CRM Dll。所以我必须使用 REST 服务。

1.  我添加了服务参考[https://myoffice.crm5.dynamics.com/xrmservices/2011/organization.svc?wsdl](https://myoffice.crm5.dynamics.com/xrmservices/2011/organization.svc?wsdl)

2.  这是我正在使用的代码

    `OrganizationServiceClient orgClient = new OrganizationServiceClient();` `orgClient.ClientCredentials.Windows.ClientCredential = new System.Net.NetworkCredential("admin@something.com", "mypassword");`

    `Entity myContact = new Entity();` `myContact.LogicalName = "Employee"; //Is it right? i must provide it here right.`

    `ConsoleApplication1.ServiceReference2.AttributeCollection myAttColl = new ConsoleApplication1.ServiceReference2.AttributeCollection();`

`myAttColl.Add(new KeyValuePair<string, object>("Name","Emp1"));` `myAttColl.Add(new KeyValuePair<string, object>("Age", "26"));` `myAttColl.Add(new KeyValuePair<string, object>("Gender", "Male"));`

```
myContact.Attributes = myAttColl;

try
{
    orgClient.Create(myContact);
}
catch (Exception ex)
{
} 
```

我在运行 orgClient.Create(myContact) 时收到“验证消息安全性时发生错误”错误。

不管我到目前为止做了什么。这是我的要求，一个非常简单的使用 REST 服务将我的自定义实体添加到在线 CRM 的条目。我将在一个名为[http://xyz.com](http://xyz.com)的单独域中运行我的 web 应用程序。从这里，我需要将条目添加到 Online CRM 中。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T23:29:00.380

REST 服务不向外部应用程序公开，它仅用于内部应用程序。您可能能够在内部部署中解决此问题，但在 CRM Online 中，没有我知道的解决方法。如果您添加 CRM 程序集并在 C# 中执行此操作，您的情况会好得多。此外，使用 REST 服务，您只能执行 CRUD 操作，并且无法执行分配或更改状态等操作。在我看来，SOAP 服务更胜一筹，但仍然无法从外部 Web 应用程序调用它。

请参阅此链接上的以下注释 -[使用 JavaScript 进行数据访问](http://msdn.microsoft.com/en-us/library/hh771584.aspx)

> **笔记**
> 
> 外部应用程序无法使用这些 Web 服务，因为身份验证由 Microsoft Dynamics CRM 提供。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T09:36:56.950

这可能看起来很奇怪，但原因是服务器上的时钟和客户端上的时钟肯定不同步。

您所要做的就是检查：

1.  客户端时钟与服务器时钟同步。
2.  客户端和服务器都在日间节省设置上进行协调

问候，

凯文

资料来源：[这里](http://blogs.microsoft.co.il/blogs/rdt/archive/2011/04/04/accessing-dynamics-crm-2011-organization-service-it-s-all-about-timing.aspx)和[这里](http://community.dynamics.com/product/crm/crmtechnical/b/pabloperalta/archive/2012/05/14/quot-an-error-occurred-when-verifying-security-for-the-message-quot-when-executing-savechanges.aspx)

# html - Chrome中的慢速聚焦输入字段

> ID：11557771
> 
> 赞同：0
> 
> 时间：2012-07-19T09:26:33.870
> 
> 标签：html, css, google-chrome

我有一个带有 2 个列的大数据表，其中存储输入字段 ( `type="text"`)，没有事件，但只有 HTML 和 CSS 焦点和悬停属性，所以这里是 HTML：

```
 <tr <?=($pKey%2!=0)?'style="background-color:#eee;"':''?>>
               <td>
 Some data: 
               </td>
               <td>
 Some data: 
               </td>               
               <td width="200">
                  <input type="hidden" name="cyber_id[]" value="<?=$pVal?>"/>

                  <input name="bank_commission[]" type="text" class="bank_commission" value=""/>
               </td>
               <td>
                  <input name="bank_reward[]" type="text" class="bank_reward" value=""/>          
               </td>               
            </tr> 
```

每个字段的 CSS：

```
input {
    border: 1px solid #888;
    font: normal 14px Tahoma;
    -moz-border-radius: 4px;
    -webkit-border-radius: 4px;
    border-radius: 4px;
    /*behavior: url(/style/PIE.php);*/
    padding: 3px;
    color: #555;
    outline: 0 none;
}

input:hover {
    border: 1px solid #0075BB;
    font: normal 14px Tahoma;
    -moz-border-radius: 4px;
    -webkit-border-radius: 4px;
    border-radius: 4px;
    /*behavior: url(/style/PIE.php);*/
    padding: 3px;
    outline: 0 none;
}
input:focus {
    border: 1px solid #0075BB;
} 
```

确切的问题是，当我单击该字段时，光标会在 2-4 秒后显示，这对用户不利。`bank_commission`两者都没有 CSS `bank_reward`，所以这不是重点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T10:00:57.230

太多的表单元素和表格中的元素肯定会占用浏览器......你为什么不尝试以块的形式显示数据......比如说以 100 行的块并添加延迟加载以加载下一个块数据...而且如果您将表格布局转换为 div 布局，那么它也会使页面更轻。

# xslt - XSLT v1.0 - 转换

> ID：11557777
> 
> 赞同：2
> 
> 时间：2012-07-19T09:26:58.113
> 
> 标签：xslt, xslt-1.0

我是使用 XSLT 的新手。我的要求最好通过代码来表达。我正在寻找关于是否有可能通过 XLST 实现我的要求的建议。我不是要求人们为我编写代码——尽管代码建议也会受到赞赏。我正在寻找指针，例如“我需要链接多个转换”。我正在使用 XSLT v1.0。

我有输入 XML；

```
<Input>
  <BarId>123</BarId>
  <BarName>myname</BarName>
  <FooName>dummy</FooName>
</Input> 
```

...并且需要创建输出；

```
<Out>
  <Foos>
    <Foo>
      <Id>100</Id>
      <Name>dummy</Name>
    </Foo>
  </Foos>
  <Bars>
    <Bar>
      <Id>123</Id>
      <Name>myname</Name>
      <FooId>100</FooId>
    </Bar>
  </Bars>
</Out> 
```

关键：

创建 Foo 元素是我需要帮助的部分。

Foo 元素最先于 Bar 元素。

我并不太担心生成 Foo Id（即在上面的示例 100 中） - 我在这里有几个选项 - 但我猜在 Bar 上填充 FooId 的方法将取决于整体方法？

（ps.为模糊的标题道歉 - 生病根据分辨率相应更新）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T10:29:48.000

我假设您想为输入中`Foo`的每个不同输出一个具有唯一 ID 的元素`FooName`。为此，您可以使用[Muenchian 方法](http://www.jenitennison.com/xslt/grouping/muenchian.html)：

首先，您将构建一个[`xsl:key`](http://www.w3.org/TR/xslt/#key)使用它，您可以通过其内容快速检索`FooName`元素。

```
<xsl:key name="FooNames" match="FooName" use="."/> 
```

使用此键，您可以只处理每个 FooName 的第一个实例，从而获得一个不同的列表。在这里，您可以使用该`generate-id()`功能来比较节点的身份。

```
<xsl:apply-templates select="//FooName
                             [generate-id() = 
                              generate-id(key('FooNames', .)[1])]"/> 
```

对于生成标识符，如果您不关心生成的标识符可能因运行而异，您可以再次使用该`generate-id()`函数。

把它们放在一起：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>
  <xsl:key name="FooNames" match="FooName" use="."/>

  <xsl:template match="/">
    <Out>
      <Foos>
        <xsl:apply-templates select="//FooName[generate-id() = 
                                     generate-id(key('FooNames', .)[1])]"/>
      </Foos>
      <Bars>
        <xsl:apply-templates select="//Input"/>
      </Bars>
    </Out>
  </xsl:template>

  <xsl:template match="FooName">
    <Foo>
      <Id><xsl:value-of select="generate-id()"/></Id>
      <Name><xsl:value-of select="."/></Name>
    </Foo>
  </xsl:template>

  <xsl:template match="Input">
    <Bar>
      <Id><xsl:value-of select="BarId"/></Id>
      <Name><xsl:value-of select="BarName"/></Name>
      <FooId>
        <xsl:value-of select="generate-id(key('FooNames', FooName)[1])"/>
      </FooId>
    </Bar>
  </xsl:template>
</xsl:stylesheet> 
```

使用以下示例输入：

```
<Inputs>
  <Input>
    <BarId>123</BarId>
    <BarName>myname</BarName>
    <FooName>dummy</FooName>
  </Input>
  <Input>
    <BarId>124</BarId>
    <BarName>anothername</BarName>
    <FooName>dummy</FooName>
  </Input>
  <Input>
    <BarId>125</BarId>
    <BarName>yetanothername</BarName>
    <FooName>dummy-two</FooName>
  </Input>
</Inputs> 
```

它将产生输出：

```
<Out>
  <Foos>
    <Foo>
      <Id>id213296</Id>
      <Name>dummy</Name>
    </Foo>
    <Foo>
      <Id>id214097</Id>
      <Name>dummy-two</Name>
    </Foo>
  </Foos>
  <Bars>
    <Bar>
      <Id>123</Id>
      <Name>myname</Name>
      <FooId>id213296</FooId>
    </Bar>
    <Bar>
      <Id>124</Id>
      <Name>anothername</Name>
      <FooId>id213296</FooId>
    </Bar>
    <Bar>
      <Id>125</Id>
      <Name>yetanothername</Name>
      <FooId>id214097</FooId>
    </Bar>
  </Bars>
</Out> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T11:50:57.793

**它可以像这样简单，假设 a`BarName`在其对应的 之前`FooName`：**

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/*">
     <Out>
      <Foos>
       <xsl:apply-templates select="FooName"/>
      </Foos>
      <Bars>
       <xsl:apply-templates select="BarName"/>
      </Bars>
     </Out>
 </xsl:template>

 <xsl:template match="FooName">
  <Foo>
    <Id><xsl:call-template name="makeFooId"/></Id>
    <Name><xsl:value-of select="."/></Name>
  </Foo>
 </xsl:template>
 <xsl:template match="BarName">
   <Bar>
    <Id><xsl:value-of select="preceding-sibling::BarId[1]"/></Id>
    <Name><xsl:value-of select="."/></Name>
    <FooId>
      <xsl:call-template name="makeFooId">
        <xsl:with-param name="pFoo" select="following-sibling::FooName[1]"/>
      </xsl:call-template>
    </FooId>
  </Bar>
 </xsl:template>

 <xsl:template name="makeFooId">
  <xsl:param name="pFoo" select="."/>

  <!-- Replace the following line with your id - generating code -->
  <xsl:text>100</xsl:text>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<Input>
    <BarId>123</BarId>
    <BarName>myname</BarName>
    <FooName>dummy</FooName>
</Input> 
```

**产生了想要的正确结果**：

```
<Out>
   <Foos>
      <Foo>
         <Id>100</Id>
         <Name>dummy</Name>
      </Foo>
   </Foos>
   <Bars>
      <Bar>
         <Id>123</Id>
         <Name>myname</Name>
         <FooId>100</FooId>
      </Bar>
   </Bars>
</Out> 
```

# php - HTML + FOREACH - 呈现数据

> ID：11557788
> 
> 赞同：0
> 
> 时间：2012-07-19T09:27:35.493
> 
> 标签：php, html, css

我有例如：

```
<?php $array = array(aaa,bbb,ccc,ddd,eee,fff,ggg,hhh,iii,jjj,kkk,lll,mmm,nnn, 111,222,333); ?> 
```

如果我使用foreach：

```
foreach($array as $a){
  echo $a . '<br />';
} 
```

这给我看数据：

```
aaa
bbb
ccc
ddd
eee
fff
...
111
222
333 
```

但我想设置高度的最大位置 - 如果例如数据太长，那么这应该在新列中：

```
aaa eee ... 111
bbb fff ... 222
ccc ... ... 333 
```

最好的方法是什么？我可以使用 DIV 或 TABLE。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T09:55:28.670

您需要在 php 中添加一个计数器，它`div`为每三个元素创建一个新元素并将所有元素浮动`div`到左侧。

PHP：

```
$array = array("aaa","bbb","ccc","ddd","eee","fff","ggg","hhh","iii","jjj","kkk","lll","mmm","nnn", "111","222","333");

$index = 0;
foreach($array as $a){
  $index = $index + 1;
  if ($index % 3 === 1){
      echo '<div class="column">';
  }
  echo $a . '<br />';
  if ($index % 3 === 0){
      echo '</div>';
  }
}
if ($index % 3 !== 0){
      echo '</div>';
} 
```

在您的 CSS 中，您将需要：

```
.column{
  float:left;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T09:31:52.243

在 PHP 中，您可以使用[wordwrap()](http://php.net/manual/en/function.wordwrap.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T09:32:00.400

如果我正确理解您的问题，您可以使用 DIVS 并以像素为单位设置高度和宽度。测试什么有效。如果您对高度和宽度不满意，您还可以使用 javascript 来计算字符数。

最后但同样重要的是，您可以在 PHP 中添加一个计数器，然后为新列添加中断或 div。或者你可以自动换行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T09:34:35.667

这是 javascript - [http://jsfiddle.net/ZAWKq/](http://jsfiddle.net/ZAWKq/)中的示例。

使用 div 并为其设置固定宽度，就像我在上面的示例中所做的那样。在 php 中它将是 -

```
<div>
<?php 
foreach($array as $a){
   echo ' '.$a;
}
?>
</div> 
```

剩下的留给 CSS。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-19T09:47:32.730

```
$i=0;
$max=3; //Maximum column 
echo "<table><tr>";
foreach($array as $a){

if($i%$max==0)
{
    echo '</tr><tr>';
}
echo '<td>'.$a.'</td>';
$i++;
}
echo "</tr></table>"; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-19T10:02:43.963

```
$array = array("aaa","bbb","ccc","ddd","eee","fff","ggg","hhh","iii","jjj","kkk","lll","mmm","nnn", "111","222","333");

$i=0;
    $maxRow=3; //Fixed row
    $col=(count($array)/$maxRow)+1;
    echo "<table><tr>";

    foreach($array as $a){

        if($i%$col==0)
        {
            echo '</tr><tr>';
        }
        echo '<td>'.$a.'</td>';
      $i++;
    }
    echo "</tr></table>"; 
```

# javascript - 什么是最好的高性能 Javascript 集合（集合 )?

> ID：11557789
> 
> 赞同：-2
> 
> 时间：2012-07-19T09:27:35.903
> 
> 标签：javascript, collections, knockout.js

最重要的起点是没有“添加”选项。我无法识别“拼接”功能！随着拼接的注意，我接受了答案。

我打算在我的下一个项目中使用 knockout.js。但我需要相当于 c# Collection 的javascript。

-添加 -删除 -包含

对于这个要求，我有两个标准。

*   生产就绪
*   很好的表现

这个的Javascript版本

```
 public class UserResponse
    {
        public Question Question { get; set; }
        public Answer SelectedAnswer { get; set; }
    }
    public class Answer
    {
        public string Name { get; set; }
    }
    public class Question
    {
        public int Id { get; set; }
        public string Name { get; set; }
        public List<Answer> Answers{ get; set; }
    }
    // User dont need to response every question
    public class User
    {
        public int Id { get; set; }
        public string Name { get; set; }
        public List<UserResponse> Responses{ get; set; }
        public void AddResponse(UserResponse response)
        {
            // Find if another answer for response.Question and remove it
            var res=Responses.Where(p => p.Question == response.Question).FirstOrDefault();
            if (res != null)
                Responses.Remove(res);
            // Add new response
            Responses.Add(response);
        }
    } 
```

骨干：1 - 淘汰赛：0

[http://documentcloud.github.com/backbone/#Collection-add](http://documentcloud.github.com/backbone/#Collection-add)

[http://documentcloud.github.com/backbone/#Collection-remove](http://documentcloud.github.com/backbone/#Collection-remove)

[http://documentcloud.github.com/backbone/#Collection-get](http://documentcloud.github.com/backbone/#Collection-get)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T09:52:35.197

使用敲除的可观察数组，或在 ko.utils 命名空间中找到的“扩展”。这通常足以满足我的需要！

[http://knockoutjs.com/documentation/observableArrays.html](http://knockoutjs.com/documentation/observableArrays.html)

我会说骨干：1 淘汰赛：1（或 2 删除 + removeAll，或 3 反向、排序、移位等）

# python - Tastypie，过滤多对多关系

> ID：11557790
> 
> 赞同：6
> 
> 时间：2012-07-19T09:27:37.933
> 
> 标签：python, django, tastypie

我有两个模型通过多对多关系由另一个模型链接。

这是模型本身

```
class Posts(models.Model):
    id = models.CharField(max_length=108, primary_key=True)
    tags = models.ManyToManyField('Tags', through='PostTags')

class Tags(models.Model):
    id = models.CharField(max_length=108, primary_key=True)
    posts = models.ManyToManyField('Posts', through='PostTags')

class PostTags(models.Model):
    id = models.CharField(max_length=108, primary_key=True)
    deleted = models.IntegerField()
    post_id = models.ForeignKey('Posts', db_column='post_field')
    tag_id = models.ForeignKey('Tags', db_column='tag_field') 
```

和美味的资源

```
class PostsResource(ModelResource):
    tags = fields.ToManyField('django_app.api.TagsResource', 'tags', null=True)
    class Meta:
        queryset = Posts.objects.filter(deleted=0)
        resource_name = 'posts'

class TagsResource(ModelResource):
    posts = fields.ToManyField('django_app.api.PostsResource', 'posts', null=True)
    class Meta:
        queryset = Tags.objects.filter(deleted=0)
        resource_name = 'tags' 
```

posttags 表中有一个deleted 标志，是否只能在PostTags 中的deleted 标志为0 时返回链接结果？

我已经在tastepie 中尝试过[这个](http://django-tastypie.readthedocs.org/en/latest/fields.html?highlight=ToMany#tomanyfield)过滤器属性，但它似乎只关心链接表中的标志（即标签或帖子），而不是执行链接的实际表。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-23T10:04:27.323

您可以使用显示表名和字段名的 lambda 捆绑属性过滤字段。

```
tags = fields.ToManyField('django_app.api.TagsResource', attribute=lambda bundle: bundle.obj.tags.filter(tags__deleted=0))
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-17T23:07:41.073

哇...我一直在寻找这个！“属性”正是我想要的。出于绝望，我几乎开始对我的模型进行黑客攻击以进行过滤。

[从 ToManyField 的资源字段文档中：](http://django-tastypie.readthedocs.org/en/latest/fields.html)

> 通过连接表提供对相关数据的访问。
> 
> 这个子类需要 Django 的 ORM 层才能正常工作。
> 
> 这个字段在处理属性时也有特殊的行为，因为它可以接受一个可调用的。例如，如果您需要过滤反向关系，您可以执行以下操作：

```
subjects = fields.ToManyField(SubjectResource, attribute=lambda bundle: Subject.objects.filter(notes=bundle.obj, name__startswith='Personal')) 
```

# visual-studio-2010 - VS2010 在解决方案中查找对项目的所有引用

> ID：11557791
> 
> 赞同：21
> 
> 时间：2012-07-19T09:27:45.183
> 
> 标签：visual-studio-2010

有没有一种简单的方法可以在 VS2010 的解决方案中找到对项目的所有引用？事实上，我有一个包含 43 个项目的解决方案，我想确保没有项目引用 Project#N。

谢谢

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-04-03T14:07:06.820

简单但乏味的方法：右键单击解决方案，选择**Project Dependencies ，在****Projects**下拉列表中选择第一个项目，然后使用向下箭头滚动项目。对于**项目**框中的每个项目，看看您感兴趣的项目是否已在列表中选中 - 这很可能会成为您的列表。

或者您可以为此使用 Resharper：

*   右键单击模块并选择[Find Code Dependent on Module](http://www.jetbrains.com/resharper/help/Finding_Code_Dependent_on_Modules.html)以查找所有真正使用该模块的项目（这**不会**显示存在但未使用的引用）。
*   右键单击模块并选择[Project Hierarchy](http://www.jetbrains.com/resharper/help/Code_Analysis__Project_Hierarchy.html)，然后单击“引用项目”以查看所有项目引用

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2017-02-09T10:21:18.690

内置的 Project Dependencies 命令只能以另一种方式工作，即它找到给定项目的依赖项，而不是依赖于给定项目的项目——当然，除非你想在下拉列表中依次选择 200 个项目中的每一个，然后对于每个项目，向下滚动下面的大量列表以查看是否包含感兴趣的项目。

相反，在没有 Resharper 的情况下，您可以使用 Find in Files ( `CTRL` `SHIFT` `F`) 列出解决方案中引用感兴趣项目的项目：

[![在此处输入图像描述](../Images/dbdbec6f255241e78377300213e10f45.png)](https://i.stack.imgur.com/2UUyk.png)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-01-11T21:14:32.843

如果您很懒惰并且没有 Resharper，您也可以卸载项目，尝试再次构建解决方案并查看哪些项目无法构建。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-12T14:03:05.850

其中一些非 Resharper 答案很好，但仅适用于某些项目类型，而不适用于其他项目类型。

我没有 Resharper 并且 DO 有混合项目类型（NetStandard、.NET Core、.NET Framework、UWP），这是一种对我有用的简单方法：

首先，*卸载*感兴趣的项目（在我的示例中，`TWW.Common.DataModel`）。

转到您的*错误列表*，选择`Entire Solution`，启用警告显示，然后在搜索字段中输入“引用的组件”*。它将过滤列表以显示现在缺少此参考的所有项目：

[![错误列表](../Images/1da88ddc25a8d6033635ee5ee7f3304f.png)](https://i.stack.imgur.com/qNats.png)

* 或 Visual Studio 用于此类警告的任何文本。

# objective-c - RestKit 框架的 Xcode 存档错误

> ID：11557793
> 
> 赞同：4
> 
> 时间：2012-07-19T09:27:54.123
> 
> 标签：objective-c, xcode, restkit

我刚刚开始使用 Objective C 和 RestKit。

我创建了一个应用程序并添加了 RestKit 项目。我使用 RestKit 从我的网络服务器加载地图 JSON 数据。

该应用程序在模拟器和我的 iPhone 设备上运行良好。现在我想创建一个 TestFlight 测试版。我已经设置了分发证书并将其添加到我的手机和代码签名设置中。

现在我想生成 IPA。我使用 Project 菜单项下的 Archive 选项。当我单击此按钮时，会出现以下错误：

> ```
> Ld: in /Users/japak/Library/Developer/Xcode/DerivedData/AlquinApp-ahkxhlzmjpdjjbczzkyriizvchid/Build/Intermediates/ArchiveIntermediates/AlquinApp/BuildProductsPath/Release-iphoneos/libRestKit.a(RKJSONParserJSONKit.o),
> mach-o string pool extends beyond end of file for architecture armv7
> clang: error: linker command failed with exit code 1 (use -v to see invocation) 
> ```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2017-01-27T17:41:32.157

我在 Swift 3/Xcode 8.2 项目中遇到了一些来自 Cocoapods 的动态框架的问题。对构建文件夹（产品->（保留选项键）->清理构建文件夹）的深度清理为我解决了这个问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-04-30T18:42:54.560

我的解决方案是取消选中“Schemes => Edit Schemes => Builds => Build Options”下的“Parallelize Builds”选项。（我在 Xcode 6.3 下看到了这个，我确信这个选项在旧版本中也存在）

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-19T13:10:27.053

我认为问题是因为您使用的东西不应该用于分发并且它目前受 NDA 保护？

# android - 我正在尝试从中间进行活动动画（放大和缩小）？

> ID：11557794
> 
> 赞同：1
> 
> 时间：2012-07-19T09:27:54.160
> 
> 标签：android, animation, android-activity

我正在寻找活动之间的放大和缩小活动动画。

我对 xml 样式没有正确的想法，我们可以用 .

你们有这样做的任何想法或任何示例代码链接，请分享。

像 [Feedly]- Android 应用中使用的活动动画

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T09:33:43.047

从 android API 演示中，将 res/anim 文件夹复制到您的应用程序中。＆ 利用：

```
startActivity(intent);
overridePendingTransition(R.anim.fade_out,R.anim.fade_in); 
```

# asp.net-mvc - mvc3中的相同控制器但不同的视图

> ID：11557795
> 
> 赞同：1
> 
> 时间：2012-07-19T09:27:55.360
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我已经在 asp.net mvc3/c#/Razor 中创建了一个应用程序，现在我想为同一个应用程序实现新模板，我想使用相同的控制器逻辑，但视图会有所不同我将如何做到这一点？. 例如：如果有人从阿联酋访问我的网站，我想使用模板**A**，但如果其他人在其他任何地方查看我的网站，我想向他展示我的模板**B。**有没有办法在asp.net mvc 3中拥有相同的控制器但不同的视图

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T09:34:40.340

有一个[NuGet 包](http://www.hanselman.com/blog/NuGetPackageOfTheWeek10NewMobileViewEnginesForASPNETMVC3SpeccompatibleWithASPNETMVC4.aspx)适合您。在 ASP.NET MVC 4 中它是内置的。这个包测试用户代理以便提供移动版本的视图。它为此实现了一个自定义视图引擎。可以扩展它，以便使用 Request.UserHostAddress (IP) 代替使用用户代理，以便分派到正确的文件夹。就用户 IP 和国家/地区之间的映射而言，您必须自己实现或使用现有的公共 API。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T10:07:23.373

您可以创建自定义视图引擎并覆盖调整路径的方法。

```
public class LocationAwareViewEngine: RazorViewEngine
{
   protected override IView CreateView(ControllerContext controllerContext, string viewPath, string masterPath)
   {
      // adjust the viewPath and masterPath
      return base.CreateView(controllerContext, viewPath, masterPath);
   }

   protected override IView CreatePartialView(ControllerContext controllerContext, string partialPath)
   {
        // adjust the partialPath
        return base.CreatePartialView(controllerContext, partialPath);
   }

   protected override bool FileExists(ControllerContext controllerContext, string virtualPath)
   {
      // adjust the virtualPath
      return base.FileExists(controllerContext, virtualPath);
   }
} 
```

**全球.asax.cs**

```
ViewEngines.Engines.Add(new LocationAwareViewEngine()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T09:36:35.377

我相信很简单。使用 _viewstart 页面和布局页面。在 _viewstart 页面中，编写条件逻辑以检查请求是否来自阿联酋并切换要使用的布局页面。

```
 If "this is uae request" then
Layout = "layout1.vbhtml"
else
Layout = "layout2.vbhtml"
End if 
```

# sql - 如何从行对象的oracle表中获取对象

> ID：11557798
> 
> 赞同：0
> 
> 时间：2012-07-19T09:27:58.367
> 
> 标签：sql, oracle, object, types

在处理包含行对象的 oracle 表时，我希望每一行都是一个对象，我可以在其上调用函数或将其传递给任何上下文中的函数。

例如，如果我声明以下内容：

```
create type scd_type as object
(
  valid_from date,
  valid_to date,
  member function get_new_valid_to return date
);

create type scd_type_table as table of scd_type;

create table scd_table of scd_type;

create procedure scd_proc (in_table in scd_type_table)
as
begin
  ... do stuff ...
end;
/ 
```

现在我尝试用表调用我的 proc

```
begin
  scd_proc (scd_table);
end;
/ 
```

我得到一个错误。即使将行读入嵌套表也不是直截了当的。我希望它像这样工作：

```
declare
  temp_table scd_type_table;
begin
  select * bulk collect into temp_table from scd_table;

  ... do stuff ...
end;
/ 
```

但相反，我必须为每一行调用构造函数。

最后，即使它在更新语句中工作，我也无法在合并语句中调用函数。例子：

```
update scd_table st
set st.valid_to = st.get_new_valid_to(); <--- Works.

merge into scd_table st
using (select sysdate as dateCol from dual) M
on (st.valid_from = M.dateCol)
when matched then update set st.valid_to = st.get_new_valid_to(); <--- Does not work. 
```

所以我想这里有三个子问题：

1) 将行对象表传递到需要相同类型的嵌套表的过程中的最简单方法是什么？

2）将行对象表转换为相同类型的嵌套表的最简单方法是什么？

3) 为什么我不能在合并语句中调用对象上的函数（但在更新语句中）？

这一切都归结为“如何从行对象表中提取对象？”的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T05:03:42.320

我不禁认为您需要重新阅读[有关 PL/SQL types 的文档](http://docs.oracle.com/cd/E14072_01/appdev.112/e11822/adobjplsql.htm)。

您与批量收集代码很接近。小改动如下：

```
declare
  plsql_table scd_type_table;
begin
  select VALUE(t) bulk collect into plsql_table from scd_table t;
  -- do stuff
end;
/ 
```

我承认，我不知道为什么会`merge`失败，但会成功`update`。

# virtual - toJSON 中默认包含的 Mongoose 虚拟字段：schemaOptions.toJSON.virtuals = true; 默认情况下仍然不包含虚拟字段

> ID：11557804
> 
> 赞同：34
> 
> 时间：2012-07-19T09:28:21.610
> 
> 标签：virtual, mongoose

我在另一个答案中看到，为了包含虚拟字段，您必须像[https://groups.google.com/forum/?fromgroups#!topic/mongoose-orm/HjrPAP_WXYs](https://groups.google.com/forum/?fromgroups#!topic/mongoose-orm/HjrPAP_WXYs)

```
var schemaOptions = {
  toJSON: {
    virtuals: true
  }
}; 
```

我已经完成了；

现在在架构中：

```
 new Schema({...}, schemaOptions); 
```

但仍然如此，数据不包括虚拟..：s

但像这样有效：

```
var docsCallback = function(err, docs){
    var i = docs.length;
    var nDocs = [];
    while(i--){
        nDocs[i] = docs[i].toObject({virtuals: true});
    }
    done(nDocs);
} 
```

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-07-19T09:37:42.803

刚试过：

```
 var schemaOptions = {
    toObject: {
      virtuals: true
    }
  }; 
```

并工作！;)

现在默认情况下我使用：

```
 var schemaOptions = {
    toObject: {
      virtuals: true
    }
    ,toJSON: {
      virtuals: true
    }
  }; 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-08T06:39:11.203

你也可以这样做：

```
docs.set('toJSON', { virtuals: true }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-15T12:44:40.617

对我来说，它仅在添加`getters: true`到模式选项后才起作用，如[猫鼬文档](https://mongoosejs.com/docs/guide.html#toObject)中所述，即

```
var schemaOptions = {
  toObject: {
    getters: true
  },
  toJSON: {
    getters: true
  }
}; 
```

# wpf - DatagridTemplate 列内容仅在选择行并单击单元格时可见

> ID：11557816
> 
> 赞同：0
> 
> 时间：2012-07-19T09:29:00.957
> 
> 标签：wpf, datagrid, wpfdatagrid

嗨，我有一个`Datagrid`绑定到自定义 AutoCAD 图层对象的 ObservableCollection。其中 3 列是 DataGridTextColumns 并且可以正常工作。但是，我也有一个`DataGridTemplateColumn`包含一个 StackPanel，其中包含一个标签和一个`Rectangle`. 我正在使用标签来显示图层的 ACI 或 RGB 值，具体取决于它的设置方式并在矩形中显示颜色。该矩形有一个鼠标按下事件，该事件会启动一个颜色选择器对话框，因此用户可以为图层选择一种新颜色。此功能有效。不起作用的是单元格的内容（标签和矩形）仅显示在选定的行中并且单元格单击，而它们需要始终可见。

我尝试在 DataTemplate 中使用 Grid 并使用 Grid 的 FocusManager.Focused 元素来提供 Rectangle 焦点，但这并没有改变行为。

```
<t:DataGrid x:Name="layersGrid" ItemsSource="{Binding Layers}" 
    SelectedItem="{Binding SelectedLayer, Mode=TwoWay}" SelectionMode="Single">
       <t:DataGridTemplateColumn Visibility="Visible">
          <t:DataGridTemplateColumn.CellEditingTemplate>
               <DataTemplate>
                  <Grid FocusManager.FocusedElement="{Binding ElementName=swatch}">
                      <StackPanel Orientation="Horizontal">
                          <Label Content="{Binding Colour.ColourProperty}"/>
                           <Rectangle Name="swatch" Fill="{Binding Colour, Converter={StaticResource colourConverter}}"
                               MouseLeftButtonDown="swatch_MouseLeftButtonDown"/>
                        </StackPanel>
                   </Grid>
                </DataTemplate>
          </t:DataGridTemplateColumn.CellEditingTemplate>
     </t:DataGridTemplateColumn>
  </t:DataGrid.Columns>
</t:DataGrid> 
```

此外，一旦您在模型视图中更改了图层的颜色，矩形不会更新，直到选择另一行，然后再次选择更改的行。

```
private void swatch_MouseLeftButtonDown(object sender, MouseButtonEventArgs e)
    {
        Colour col = LaunchColourPickerCode();
        ((LayersModel)this.Resources[MODEL]).SelectedLayer.Colour = col;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T10:00:21.630

他们不显示的问题已通过使用`CellTemplate`而不是`CellEditingTemplate`

我在此页面上改编了 surfen 的答案以解决选择问题

[如何在 WPF DataGrid 中执行单击复选框选择？](https://stackoverflow.com/questions/3833536/how-to-perform-single-click-checkbox-selection-in-wpf-datagrid/4827377#4827377)

用这个替换他的方法：

private static void GridColumnFastEdit(DataGridCell cell, RoutedEventArgs e) { if (cell == null || cell.IsEditing || cell.IsReadOnly) return;

```
 DataGrid dataGrid = FindVisualParent<DataGrid>(cell);
        if (dataGrid == null)
            return;

        if (!cell.IsFocused)
        {
            cell.Focus();
        }

        DataGridRow row = FindVisualParent<DataGridRow>(cell);
        if (row != null && !row.IsSelected)
        {
            row.IsSelected = true;
        }

    } 
```

并在样本上添加一个事件以获取它所在的单元格

私人无效样本_PreviewMouseLeftButtonDown（对象发送者，MouseButtonEventArgs e）{

```
 DataGridCell cell = null;

        while (cell == null)
        {
            cell = sender as DataGridCell;
            if (((FrameworkElement)sender).Parent != null)
                sender = ((FrameworkElement)sender).Parent;
            else
                sender = ((FrameworkElement)sender).TemplatedParent;
        }

        GridColumnFastEdit(cell, e);
    } 
```

还要感谢 kmatyaszek

# android - Android 应用程序如何实现零活动

> ID：11557817
> 
> 赞同：4
> 
> 时间：2012-07-19T09:29:00.470
> 
> 标签：android, android-activity

我在一本书中研究过“在Android中，一个应用程序可以有零个或多个活动。通常应用程序有一个或多个活动......”。

那么应用程序可以有“零”活动的情况是什么？有没有这样的应用程序的例子？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T09:30:44.660

例如，如果您只`Service`在应用程序中定义 a，则不需要任何`Activity`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T09:30:15.663

当你使用一些`service`. 只需使用Android 提供`example`的`SoftKeyBoard`服务演示。

如果您想查看，只需打开 Eclipse File > New > Other > Android_Sample_Project > select version(2.2 o other) > SoftKeyboard >...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-19T09:37:01.447

Activity 只是Android 应用程序的*构建块***之一。**

 *例如，您**的“联系人”应用程序**实际上是*两个*应用程序 - 一个带有**数据库（内容提供者）**，另一个带有**UI（活动）**

您可以通过进入您的 android 手机/模拟器**来检查上述是否属实**`Settings->Applications>Installed`

在这里查看前几个视频以获得清晰的图片： http: [//marakana.com/s/android_bootcamp_series_2012_video_tutorial,1017/index.html](http://marakana.com/s/android_bootcamp_series_2012_video_tutorial,1017/index.html)*

# c# - 如何实例化给定类名和基本命名空间的对象

> ID：11557819
> 
> 赞同：0
> 
> 时间：2012-07-19T09:29:02.590
> 
> 标签：c#, reflection, instantiation

我在运行时反序列化 DTO 对象。我已经使用下面的代码来实例化给定**命名空间**和**类型名称的对象**

```
public class SimpleDtoSpawner : DtoSpawner{
    private readonly Assembly assembly;
    private readonly string nameSpace;

    public SimpleDtoSpawner(){
        assembly = Assembly.GetAssembly(typeof (GenericDTO));

        //NOTE: the type 'GenericDTO' is located in the Api namespace
        nameSpace = typeof (GenericDTO).Namespace ; 

    }

    public GenericDTO New(string type){
        return Activator.CreateInstance(
            assembly.FullName, 
            string.Format("{0}.{1}", nameSpace, type)
            ).Unwrap() as GenericDTO;
    }
} 
```

**当所有命令和事件**都在***Api***命名空间中时，此实现对我有用。
但是在我将它们分成两个命名空间之后：***Api.Command***和***Api.Event***，我需要在没有确切命名空间引用的情况下实例化它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T09:34:16.817

你*可以*这样做：

```
public class SimpleDtoSpawner : DtoSpawner{
    private readonly Dictionary<string, Type> types;

    public SimpleDtoSpawner() {
        Assembly assembly = Assembly.GetAssembly(typeof (GenericDTO));
        string baseNamespace = typeof (GenericDTO).Namespace ; 
        types = assembly.GetTypes()
                        .Where(t => t.Namespace.StartsWith(baseNamespace))
                        .ToDictionary(t => t.Name);
    }

    public GenericDTO New(string type) {
        return (GenericDTO) Activator.CreateInstance(types[name]).Unwrap();
    }
} 
```

如果您在同一个“基本名称空间”下有多个具有相同简单名称的类型，那么在创建字典时就会发生爆炸。您可能还想更改过滤器以检查该类型是否也可分配给`GenericDTO`。

# ios - 在 UITextView 中检测地址

> ID：11557821
> 
> 赞同：2
> 
> 时间：2012-07-19T09:29:07.493
> 
> 标签：ios, uitextview

我有一个`UITextView`with `dataDetectorTypes`set to `UIDataDetectorTypeAll`（应该包括`UIDataDetectorTypeAddress`），但无论我如何在文本视图中写一个地址，它都不会被检测为链接。

地址是否应该以某种特殊格式编写才能正常工作？电话号码、网址、电子邮件和日历活动完美运行。

# asp.net - asp.net requiredfieldvalidator 客户端验证多个组

> ID：11557822
> 
> 赞同：1
> 
> 时间：2012-07-19T09:29:10.467
> 
> 标签：asp.net

我有一个带有 3 个用于更改密码的 asp 文本框的表单 - 旧密码、新密码和确认密码以及表单上的提交按钮。首先检查旧密码以设置新密码。场景是如果管理员要更改密码，它不会检查任何旧密码，而对于用户，它将检查旧密码，如果正确则设置新密码。我为旧密码和新密码字段设置了两个 requiredfiledvalidator 控件，并使用了 comparevalidator 控件来检查确认密码。

我为旧密码必填字段验证器分配了 groupA，为新密码和确认密码分配了 groupB。该方案适用于管理员登录，我隐藏旧密码，因为它不是必需的，而对于用户登录，我使其可见。

所以这里的问题是，对于用户登录提交事件，我想同时验证 groupA 和 groupB。任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T09:44:14.603

对所有控件保持相同`groupname`。当用户角色为时设置`Enabled=false`为RequiredFieldValidator `Admin`。

# linux - 如何将 ffmpeg 的输出通过管道传输到三个不同的进程？

> ID：11557829
> 
> 赞同：1
> 
> 时间：2012-07-19T09:29:32.813
> 
> 标签：linux, ubuntu, ffmpeg

如何将 ffmpeg 的输出通过管道传输而不将其保存到三个不同进程的文件中？

假设我有：

```
ffmpeg -i input.mpg output.yuv 
```

我想更改它以避免将 YUV 保存到物理磁盘。我想将它传递给三个不同的 shell 命令。

怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T10:07:03.700

`ffmpeg`通过指定为输出文件将的输出设置为标准`-`输出，然后使用`tee`和处理替换：

```
ffmpeg ... - | tee >(command1) >(command2) >(command3) 
```

请务必使用`-f`as指定格式，因为`ffmpeg`它无法根据输出文件名猜测它。

# tridion - 新 UI 的更新预览在 Chrome 和 IE 中不起作用（但在 Firefox 中起作用）

> ID：11557832
> 
> 赞同：1
> 
> 时间：2012-07-19T09:29:45.173
> 
> 标签：tridion, tridion-2011

我已经为 Java 网站配置了新的 UI，一切正常，但前提是我使用 Firefox 作为浏览器。使用 Chrome 或 Internet Explorer 时，更新预览功能无法正常工作。

当我创建一个新页面时，它直接创建页面（不是临时文件）并且不显示页面但保持为“正在加载”。

你有没有遇到过这样的事情？有什么线索可以解决这个问题吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T07:08:52.553

您可以通过在根文件夹中创建 se_blank.html 文件（可以是空页面）来[防止临时站点上出现 404 错误。](http://sdllivecontent.sdl.com/LiveContent/content/en-US/UIU4SDLT2011SP1/task_2F3D125DF7274CC9BE33BBBDC284D314)

[另请参阅有关会话预览配置](http://sdllivecontent.sdl.com/LiveContent/content/en-US/UIU4SDLT2011SP1/task_8E80718DD9834A418F8D818F30F518F6)的更多信息。具体来说，如果您的站点有一个子目录，则可能会应用一个[web.xml 设置。](http://sdllivecontent.sdl.com/LiveContent/content/en-US/UIU4SDLT2011SP1/task_30B39307D70A4380AE5AB159BC3F374E)如果它位于根目录，则使用`/*`它，否则将其设置为包含您的登台网站的路径。

```
<filter-mapping>
    <filter-name>Binary Content Filter</filter-name>
    <url-pattern>/*</url-pattern> 
</filter-mapping> 
```

# c# - 以编程方式连接链接服务器 C#

> ID：11557834
> 
> 赞同：3
> 
> 时间：2012-07-19T09:29:50.947
> 
> 标签：c#, asp.net, sql, linked-server

> **可能重复：**
> [SQL - 使用命名实例连接到链接服务器](https://stackoverflow.com/questions/794095/sql-connect-to-linked-server-with-named-instance)

我想使用链接服务器连接到远程服务器数据库。我希望这个连接由 C# 程序完成。如何在 C# 中连接这些链接服务器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T09:33:31.777

链接服务器是 SQL Server 实例上的一个对象，因此如果您连接到该实例，则可以查询链接服务器，就好像您正在查询某个实例数据库上的任何其他对象一样。

这是一个例子：

```
SELECT * 
FROM OPENQUERY ( <linked_server>, 'select code, name, from your_table') 
```

不确定这是否是您正在寻找的答案，也许如果您提供更多关于您的场景的详细信息，e 可以帮助您更多

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-19T09:36:13.770

除了在其中提供链接服务器名称之外，您可以像其他 Sql 查询一样在 sql 中执行此操作，因此连接字符串仍然是我们在没有链接服务器的情况下使用的常用方式 这是一个不错的站点，它提供了各种类型的连接[字符串](http://www.connectionstrings.com/sql-server-2008)

```
SELECT * FROM linkedServerName.TheDatabaseName.dbo.TheTableName 
```

# java - Float 和 BigDecimal 精度差异

> ID：11557839
> 
> 赞同：5
> 
> 时间：2012-07-19T09:30:03.950
> 
> 标签：java, floating-point, bigdecimal

```
public static void main(String[] args) {
    // TODO Auto-generated method stub
    BigDecimal foo,foo1;
    foo=BigDecimal.valueOf(3.1);
    foo1=BigDecimal.valueOf(3.1f);

    System.out.println(foo);
    System.out.println(foo1);

} 
```

结果：
3.1
3.0999999046325684

为什么它们的结果不同？我正在使用JDK1.7.0_03

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T09:32:49.063

`3.1`定义一个`double`while`3.1f`定义一个`float`. 您看到的是`float`表示该值的问题（浮点使用“仅”32 位和双 64 位）。

如果你想定义一个`3.1`完全使用`BigDecimal`使用`String`构造函数：

```
BigDecimal foo = new BigDecimal("3.1");
System.out.println(foo); 
```

输出：

```
3.1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T09:34:19.810

`float`并且`double`是具有不同精度的不同类型。

BigDecimal.valueOf(double) 可以纠正表示错误，`double`但不能纠正`float`

`float`恕我直言，除非您有充分的*理由*这样做，否则不要使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T13:17:28.203

问题是对于浮点数和双精度数，您分别使用 32 位和 64 位来表示数字的整数和小数部分。当您尝试表示一个小数值时，问题就出现了，而该小数值实际上并没有精确的二进制位十进制表示。

以 0.1 为例，没有办法以 2 为底准确表示这一点，就像无法以 10 为底准确表示 1/3 一样。

所以java使用了一些技巧，所以当你说：

```
float f = 3.1;
System.out.println(f); 
```

它打印出正确的数字。但是，当您开始使用这些值进行算术运算时，最终会出现舍入错误。

BigDecimal 是准确的，因为它使用不同的表示。它在内部存储一个 BigInteger（它使用一个 int[] 来表示巨大的数字）。然后它使用一个精度值来告诉它有多少整数位在小数点之后。

例如，值 3.1 将在 BigDecimal 中表示为 31,precision=1 因此，BigDecimal 不会遭受与浮点数和双精度数相同的舍入问题。

但是，当您使用浮点/双精度值来初始化 BigDecimal 时，相同的舍入错误会导致它进入 BigDecimal 实例。这就是为什么建议使用 String 来构造值的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-06T17:46:34.837

由于我想分享的菜鸟错误，我遇到了类似的问题：

```
BigDecimal bd = new BigDecimal(float); 
```

这提供了我不想要的额外精度，并将其设置为 String 修复了它......

但是，我正在这样做：

```
BigDecimal bd = new BigDecimal(float);
bd.setScale(2, RoundingMode.HALF_UP); 
```

菜鸟错误。我应该这样做的。

```
bd = bd.setScale(2, RoundingMode.HALF_UP); 
```

# magento - 如果将任何产品添加到购物车，则限制用户再次购物

> ID：11557841
> 
> 赞同：1
> 
> 时间：2012-07-19T09:30:07.077
> 
> 标签：magento, checkout, magento-1.5

一旦用户将产品添加到购物车，我想限制该特定用户在特定会话期间进一步购物。如果用户结帐并再次访问本网站，他应该可以再次购物，但必须考虑上述规则。

Magento 中是否提供此功能？任何人都可以为此提供解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T12:18:45.397

这当然是可能的！为事件配置一个观察者，`controller_action_predispatch`从会话中获取报价对象 - 如果它包含项目，在您的观察者方法中设置重定向并将它们重定向到购物车。示例（*未测试*）：

```
public function restrictToCheckout(Varien_Event_Observer $observer)
{
    $items = Mage::getSingleton('checkout/session')->getQuote()->getItemsCount();

    if ($items) {
        $observer->getControllerAction()->getResponse()
            ->setRedirect(Mage::getUrl('checkout/cart'));

        Mage::throwException('You have items in your cart and must checkout'));
    }
} 
```

可能有细微差别，但这是它的核心。

# java - Playframework 2 作为 SOAP 服务器

> ID：11557842
> 
> 赞同：7
> 
> 时间：2012-07-19T09:30:09.350
> 
> 标签：java, scala, soap, playframework-2.0

我非常喜欢 Play 2.0（尤其是 Scala API）。但它完全没有 SOAP。从 Play 2.0 提供 SOAP WS（基于 wsdl）是否有一些令人兴奋的方法？

比如说，我希望它可以从某个 URL（例如 /soap）访问，而将其他页面保留为 HTML。请帮忙，我不知道（我是java新手，无数的框架和库的缩写让我感到困惑）。

*PS为了防止可能的非生产性处理：我是一个java新手，但不是新手程序员，所以我知道SOAP、HTTP和其他东西是如何在协议级别工作的。*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-11-08T16:05:16.523

我遇到了同样的问题——Apache CXF 和 Axis2 依赖于 Play Framework 没有的 Servlet API。

我为连接到 Play 控制器 API 的 Apache CXF 创建了一个自定义传输插件。有一个关于在一个空项目中设置它的教程：[http ://www.imind.eu/web/2013/11/07/developing-soap-services-using-play-framework-2-2-x/](http://www.imind.eu/web/2013/11/07/developing-soap-services-using-play-framework-2-2-x/)

该插件的源代码（和一个示例 Play 应用程序）在这里：[https ://github.com/imindeu/play-cxf](https://github.com/imindeu/play-cxf)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-19T18:43:27.937

如果您尝试为将成为 Play 服务一部分的现有业务逻辑创建 Web 服务 API，那么您可能应该考虑使用可以为您执行 SOAP 魔术的现有 Java 库（例如[Axis2](http://axis.apache.org/axis2/java/core/)）。Scala 可以毫无问题地使用现有的 Java 库。

但是，如果可以选择，大多数人会强烈建议您查看 REST 服务而不是 SOAP 服务。看看[Play Mini](https://github.com/typesafehub/play2-mini)看看这是怎么做到的。

**更新：**

啊，这可能对你有帮助：[https ://github.com/mandubian/scala-xmlsoap-ersatz](https://github.com/mandubian/scala-xmlsoap-ersatz)

# ios - 使用数据 ios 初始化 NSXMLparser

> ID：11557851
> 
> 赞同：0
> 
> 时间：2012-07-19T09:30:46.110
> 
> 标签：ios, web-services, initialization, nsxmlparser, null

大家好，当我尝试使用从 Web 服务响应中获得的数据初始化我的 NSXMLparser 时，我什么也没得到（零值）这是我使用的代码：

头文件.h

```
NSData*abccc;
NSMutableData*conWebMutableData;
NSXMLParser*xmlParser;

@interface ResponseWebServices_View : UIViewController<NSStreamDelegate,   NSXMLParserDelegate>

@property(nonatomic,strong)NSMutableString*soapResults;
@property(nonatomic,strong)NSXMLParser*xmlParser;
@property(nonatomic, strong)NSData*abcc;

@end 
```

文件.m

```
-(void)connection:(NSURLConnection*)connection didReceiveResponse:(NSURLResponse*)response{
[conWebMutableData setLength:0];

}

-(void)connection:(NSURLConnection*)connection didReceiveData:(NSData*)data{
[conWebMutableData appendData:data];

}
-(void)connection:(NSURLConnection*)connection didFailWithError:(NSError*)error{
NSLog(@"ERROR with con");

}
-(void)connectionDidFinishLoading:(NSURLConnection*)connection{

NSString*theXML = [[NSString alloc]initWithBytes: [conWebMutableData mutableBytes]   length:[conWebMutableData length]encoding:NSUTF8StringEncoding];
NSLog(theXML);
abccc= [theXML dataUsingEncoding:NSUTF8StringEncoding];
//xmlParser = [[NSXMLParser alloc]initWithData:conWebMutableData]; (0x00000000)xmlParser value i get
//xmlParser = [[NSXMLParser alloc]initWithData:abccc]; (0x00000000)xmlParser value 
[xmlParser setDelegate:self ];
[xmlParser setShouldResolveExternalEntities: YES];
[xmlParser parse];

} 
```

![一条链接](../Images/17b9e601f7910bad326037014f67ac8b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T11:49:10.833

试试这个来分配 xml 解析器

```
-(void)connectionDidFinishLoading:(NSURLConnection*)connection{

NSString *xmlResponseString = [[[NSString alloc] initWithData:conWebMutableData encoding:NSUTF8StringEncoding] autorelease];
NSLog(@"xmlResponseString--->%@",xmlResponseString);

if([conWebMutableData length]>0)
{
xmlParser = [[NSXMLParser alloc]initWithData:conWebMutableData]; 
[xmlParser setDelegate:self ];
[xmlParser setShouldResolveExternalEntities: YES];
[xmlParser parse];
}
else
{
Nslog("either server not send response or conWebMutableData   is empty  ");
} 
```

}

# php - 如何允许跨域文件上传？

> ID：11557852
> 
> 赞同：1
> 
> 时间：2012-07-19T09:30:51.750
> 
> 标签：php, javascript, ajax, cross-domain

由于以下教程，我有一个 html5 上传器：http: [//www.profilepicture.co.uk/ajax-file-upload-xmlhttprequest-level-2/](http://www.profilepicture.co.uk/ajax-file-upload-xmlhttprequest-level-2/) 效果很好.. 但是我想将文件上传到不同的域...我认为只要域，或者更具体地说，我上传的域上的文件也具有以下标头，这将是可能的：

```
header("Access-Control-Allow-Origin: *") 
```

因此允许跨域共享...但是上传不起作用，还有什么我遗漏的，还是您可以跨域通信但无法上传文件的情况？亲切的问候任何响应者...

Ĵ

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T11:23:49.417

我认为跨域上传的最佳选择是使用 ftp 上传（当然你需要知道 ftp 访问凭证，例如 ftp 主机、用户名和密码。

如果您使用 php 作为服务器端语言，您可以尝试这段小代码。

我在同一个 Web 服务器中的多个域上使用它。

```
$conn_id = ftp_connect($server) or die("<span style='color:#FF0000'>Can't connect to ".$server."</span>");
$login_result = ftp_login($conn_id, $username, $password) or die();
$upload = ftp_put($conn_id, $server_path, $file, FTP_BINARY);
if (!$upload) {
    echo "Error sending image to ".$server;
} 
```

希望这可以帮到你。

# algorithm - 最佳排序算法

> ID：11557853
> 
> 赞同：0
> 
> 时间：2012-07-19T09:31:01.110
> 
> 标签：algorithm, data-structures, duplicates, duplicate-removal

从超过 1000 万个单词的列表中挑选出唯一单词的最佳算法是什么？在执行时间方面，我们需要最好的技术。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T10:01:31.390

我记得有两种简单的方法：

1.  将所有项目添加到折叠重复项的数据结构中（通常是哈希，但您也可以尝试平衡树或特里树）。
2.  对列表进行排序，然后遍历它，复制出所有不等于前一个元素的元素。

粗略地说，根据通常的软糖，哈希表和特里树给你预期`O(n)`，平衡树和排序给你预期`O(n log n)`。解决方案不一定比针对您的特定数据`O(n)`的解决方案更快。`O(n log n)`

(1) 中的所有选项都可能具有为数据结构中的节点分配大量小内存的缺点，除非您使用专用分配器，否则这可能会很慢。因此，根据我的经验，在开始任何需要您编写重要代码的事情之前，对您真正关心的数据大小进行测试是值得的。

根据您使用的语言，其中一些方法可能比其他方法更容易测试。例如，在 Python 中，如果您有一个字符串列表，那么哈希表方法就是`set(my_strings)`. 在 C 中，没有标准的哈希表，因此您要么编写一个哈希表，要么正在寻找一个库。

当然，易于编写对执行时间没有直接影响，因此，如果（如您所言）您的程序员时间无关紧要，重要的是执行速度，那么花几周时间熟悉最好的可用文献应该没有问题关于排序和哈希表。你会比我更能回答这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T09:36:51.630

只需将它们添加到哈希中。恒定时间插入。我不相信你能比订购 n 做得更好。红黑树在小型数据集上可能更快（遍历树比计算散列更快），但您的数据集很大。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T09:41:15.003

剧透：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

struct somehash {
        struct somehash *next;
        unsigned hash;
        char *mem;
        };

#define THE_SIZE (10*1000*1000)
struct somehash *table[THE_SIZE] = { NULL,};

struct somehash **some_find(char *str, unsigned len);
static unsigned some_hash(char *str, unsigned len);

int main (void)
{
char buffer[100];
struct somehash **pp;
size_t len;

while (fgets(buffer, sizeof buffer, stdin)) {
        len = strlen(buffer);
        pp = some_find(buffer, len);
        if (*pp) { /* found */
                fprintf(stderr, "Duplicate:%s", buffer);
                }
        else    {       /* not found: create one */
                fprintf(stdout, "%s", buffer);
                *pp = malloc(sizeof **pp);
                (*pp)->next = NULL;
                (*pp)->hash = some_hash(buffer,len);
                (*pp)->mem = malloc(1+len);
                memcpy((*pp)->mem , buffer,  1+len);
                }
        }
return 0;
}struct somehash **some_find(char *str, unsigned len)
{
unsigned hash;
unsigned short slot;
struct somehash **hnd;

hash = some_hash(str,len);
slot = hash % THE_SIZE;
for (hnd = &table[slot]; *hnd ; hnd = &(*hnd)->next ) {
        if ( (*hnd)->hash != hash) continue;
        if ( strcmp((*hnd)->mem , str) ) continue;
        break;
        }
return hnd;
}

static unsigned some_hash(char *str, unsigned len)
{
unsigned val;
unsigned idx;

if (!len) len = strlen(str);

val = 0;
for(idx=0; idx < len; idx++ )   {
        val ^= (val >> 2) ^ (val << 5) ^ (val << 13) ^ str[idx] ^ 0x80001801;
        }
return val;
} 
```

# dependency-injection - Ninject Extensions Factory 中的 NamedLikeFactoryMethod 不符合文档要求

> ID：11557856
> 
> 赞同：0
> 
> 时间：2012-07-19T09:31:19.017
> 
> 标签：dependency-injection, ninject, ninject-extensions

我的简单示例有一个小问题。

我有简单的工厂界面：

```
public interface ICameraFactory
{
  ICameraController GetNikonCamera();
  ICameraController GetCanonCamera();
} 
```

我将它绑定为工厂：

```
IKernel kernel = new StandardKernel();
kernel.Bind<ICameraFactory>().ToFactory(); 
```

当我尝试转换时：

```
kernel.Bind<ICameraController>().To<NikonCameraController>()
.Named("NikonCamera"); 
```

到：

```
kernel.Bind<ICameraController>().To<NikonCameraController>()
.NamedLikeFactoryMethod<ICameraFactory>(f => f.GetNikonCamera()); 
```

它不编译。

例如，这段代码被编译（但它很糟糕）：

```
kernel.Bind<ICameraController>()
.ToMethod<ICameraController>(c=>new NikonCameraController())
.NamedLikeFactoryMethod<ICameraController, ICameraFactory>(f => f.GetNikonCamera()); 
```

我究竟做错了什么？ `Ninject 3.0.1.10` `Ninject.Extension.Factory 3.0.1.0`

编译错误：[https ://dl.dropbox.com/u/21806986/Screenshots/shot_19072012_133454.png](https://dl.dropbox.com/u/21806986/Screenshots/shot_19072012_133454.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T12:13:05.613

您可以使用：

```
this.kernel.Bind<ICameraController>()
           .To<NikonCameraController>()
           .NamedLikeFactoryMethod((ICameraFactory f) => f.GetNikonCamera()); 
```

# sed - 打印有效的单词，它们之间有 _

> ID：11557857
> 
> 赞同：0
> 
> 时间：2012-07-19T09:31:19.557
> 
> 标签：sed, awk, grep, word, concatenation

我已经完成了研究，但无法找到解决问题的方法。我正在尝试提取字符串中的所有有效单词（以字母开头）并将它们与下划线（“_”）连接起来。我正在寻找 awk、sed 或 grep 等的解决方案。

就像是：

```
echo "The string under consideration" | (awk/grep/sed) (pattern match) 
```

**示例 1**

输入：

```
1.2.3::L2 Traffic-house seen during ABCD from 2.2.4/5.2.3a to 1.2.3.X11 
```

期望的输出：

```
L2_Traffic_house_seen_during_ABCD_from 
```

**示例 2**

输入：

```
XYZ-2-VRECYY_FAIL: Verify failed - Client 0x880016, Reason: Object exi 
```

期望的输出：

```
XYZ_VRECYY_FAIL_Verify_failed_Client_Reason_Object_exi 
```

**示例 3**

输入：

```
ABCMGR-2-SERVICE_CRASHED: Service "abcmgr" (PID 7582) during UPGRADE 
```

期望的输出：

```
ABCMGR_SERVICE_CRASHED_Service_abcmgr_PID_during_UPGRADE 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T10:13:46.030

这可能对您有用（GNU sed）：

```
sed 's/[[:punct:]]/ /g;s/\<[[:alpha:]]/\n&/g;s/[^\n]*\n//;s/ [^\n]*//g;y/\n/_/' file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T11:22:13.927

一种使用`awk`, 内容的方法`script.awk`：

```
BEGIN {
    FS="[^[:alnum:]_]"
}

{
    for (i=1; i<=NF; i++) {
        if ($i !~ /^[0-9]/ && $i != "") {
            if (i < NF) {
                printf "%s_", $i
            }
            else {
                print $i
            }
        }
    }
} 
```

像这样运行：

```
awk -f script.awk file.txt 
```

或者，这是一个班轮：

```
awk -F "[^[:alnum:]_]" '{ for (i=1; i<=NF; i++) { if ($i !~ /^[0-9]/ && $i != "") { if (i < NF) printf "%s_", $i; else print $i; } } }' file.txt 
```

结果：

```
L2_Traffic_house_seen_during_ABCD_from_to_X11
XYZ_VRECYY_FAIL_Verify_failed_Client_Reason_Object_exi
ABCMGR_SERVICE_CRASHED_Service_abcmgr_PID_during_UPGRADE 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T10:25:44.493

单线`perl`。它搜索任何字母字符，后跟包含在单词边界中的任意数量的单词字符。使用该`/g`标志为每一行尝试多个匹配项。

内容`infile`：

```
1.2.3::L2 Traffic-house seen during ABCD from 2.2.4/5.2.3a to 1.2.3.X11
XYZ-2-VRECYY_FAIL: Verify failed - Client 0x880016, Reason: Object exi
ABCMGR-2-SERVICE_CRASHED: Service "abcmgr" (PID 7582) during UPGRADE 
```

`Perl`命令：

```
perl -ne 'printf qq|%s\n|, join qq|_|, (m/\b([[:alpha:]]\w*)\b/g)' infile 
```

输出：

```
L2_Traffic_house_seen_during_ABCD_from_to_X11
XYZ_VRECYY_FAIL_Verify_failed_Client_Reason_Object_exi
ABCMGR_SERVICE_CRASHED_Service_abcmgr_PID_during_UPGRADE 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T10:07:56.960

这个解决方案需要一些调整，我认为需要 gawk 将正则表达式作为“记录分隔符” [http://www.gnu.org/software/gawk/manual/html_node/Records.html#Records](http://www.gnu.org/software/gawk/manual/html_node/Records.html#Records)
gawk -v ORS='_' -v RS='[-: \"()]' '/^[a-zA-Z]/' file.dat

# linux - 用于删除以下行的 Sed 模式

> ID：11557858
> 
> 赞同：0
> 
> 时间：2012-07-19T09:31:20.900
> 
> 标签：linux, sed

我想删除以下流

```
 warning: the use of `mktemp' is dangerous, better use `mkstemp' 
```

我尝试使用以下 sed 表达式：

```
sed \
-e '/mktemp\' is dangerous/D' 
```

和

```
 sed \
    -e "/mktemp\' is dangerous/D" 
```

但没有任何效果。从流中删除该行的正确表达式是什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T09:38:44.943

尝试

```
sed -e "/mktemp' is dangerous/D" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T09:38:19.250

做这个：

```
$ cat /tmp/in.txt 
foo
bar
warning: the use of `mktemp' is dangerous, better use `mkstemp'
baz
$ sed -e "/mktemp'/d" < /tmp/in.txt
foo
bar
baz 
```

# sql - sql命令行错误

> ID：11557859
> 
> 赞同：0
> 
> 时间：2012-07-19T09:31:23.180
> 
> 标签：sql, database, command-line

每次我使用命令行向我的表中插入新数据时，它都会成功插入（我通过键入检查我的插入`select * from table_name;`）但是当我关闭命令行并再次打开它并编写 sql 语句时（`select * from table_name;`）它说那里没有选择行。我的意思是插入的行没有保存在数据库中。

请问有人可以帮我知道问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T09:34:28.550

使用[提交](http://en.wikipedia.org/wiki/Commit_%28data_management%29)；应用您的 SQL 语句

# vb6 - 如何在日期选择器控件中仅显示月份

> ID：11557860
> 
> 赞同：-1
> 
> 时间：2012-07-19T09:31:24.287
> 
> 标签：vb6, datepicker

我想在 datecontrol 中只显示月份，比如

```
datecontrol1 = January, February ... december 
```

我不想显示`day, year and time`。

这该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T16:03:56.810

如果是在 中`DTPicker`找到的控件`Microsoft Windows Common Controls-2`，则可以将 设置`Format`为`3 - dtpCustom`并将 设置`CustomFormat`为`MMMM`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T06:44:54.660

如果您正在谈论，`DTPicker`那么您可以选择它的属性并将“CustomFormat”设置为“MMMM”，如下所示`Format`：`3 - dtpCustom`

![在此处输入图像描述](../Images/7cbcdf116637dd5d563bceee7c1e36ca.png)

# iphone - 如何配置标签栏上的更多菜单

> ID：11557861
> 
> 赞同：0
> 
> 时间：2012-07-19T09:31:34.417
> 
> 标签：iphone, objective-c, ios, tabs, uitabbarcontroller

我已经以编程方式创建了一个选项卡栏，并将 7 个视图控制器作为选项卡添加到其中，因为我添加了 7 个，所以我在更多菜单中有一个更多按钮（我知道如果选项卡 r 超过 5 个，它就会出现），有一个右侧导航栏上的编辑按钮，单击该编辑按钮导航到“ ![配置](../Images/8dd938b1e59145733a031afbac493bb0.png)”屏幕，我的问题是这个屏幕有什么用，在这里可以做什么？我们可以重新定位标签吗？如果是这样，我们该怎么办？我已经搜索了很长时间但没有得到任何解决方案,,,thanx提前

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T09:36:03.447

是的，您可以重新定位标签。只需将您想要的图标向下拖动到 UITabBar，它将替换您放置的图标。

# python - 使用 postgresql 和 python 更改数据库中的时间值

> ID：11557862
> 
> 赞同：-1
> 
> 时间：2012-07-19T09:31:38.000
> 
> 标签：python, postgresql

我有一个由程序 (python) 创建的数据库。我必须更改包含时间值的列。该列在创建数据库时为空，我的程序要求用户提供一个用于 2 列的日期。第一个指定开始时间，第二个指定结束时间。结束时间比开始时间多 30 天。

这是我的问题：如何在我的代码中添加 30 天的开始时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T09:42:30.393

在 Python 中有`datetime.timedelta`，例如：

```
from datetime import datetime, timedelta

now = datetime.now()
nowand30 = now + timedelta(days=30) 
```

在 SQL 中，您可以执行以下操作：

```
DATE(some_date_val + 30 days) 
```

或者：

```
some_date_val + interval '30 days' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T09:41:21.977

我没有尝试过，但文档说：

```
date '2001-09-28' + integer '7' 
```

[http://www.postgresql.org/docs/current/interactive/functions-datetime.html](http://www.postgresql.org/docs/current/interactive/functions-datetime.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T09:44:10.423

只需将 30 添加到日期：

```
update the_table
   set start_time = start_time + 30; 
```

或者如果你更明确地想要它：

```
update the_table
   set start_time = start_time + interval '30' day; 
```

同样的方式你可以添加不同的单位：

```
update the_table
   set start_time = start_time + interval '30' minute; 
```

（假设 start_time 是一个时间戳列）

# python - 快速从句子中提取术语

> ID：11557863
> 
> 赞同：2
> 
> 时间：2012-07-19T09:31:46.977
> 
> 标签：python, mongodb, nlp, text-mining

我在文本挖掘工作，我的工作重点是生物医学实体（基因、蛋白质、药物和疾病）。我想和你分享一些问题。

现在，我的目标是在生物医学文本（来自 Medline）中找到生物医学实体，并通过术语词典，我可以使用其唯一标识符识别找到的每个实体。

为了存储文本、字典和结果，我使用了 MongoDB（一个非 SQL 数据库）。每个摘要都被分成句子，每个句子都存储在一个新记录中（带有标记列表、块和词性标签）。为了查找实体，我获取所有句子，并为每个句子为字典中的每个术语创建一个正则表达式（在 Python 中）：

```
for term in dicitonary:
     matches = re.finditer(r'(' + term + ')', sentence)
     for m in matches:
          ini = m.start()
          end = m.end()
          result.append(ini, end, dictionary.get_identification[term]) 
```

但这真的很慢，我有几个 150,000 个摘要的子集（>1,000,000 个句子）。

对我来说，提取更多术语不完全在我的字典中的实体是非常有趣的软匹配，但它可以增加我的运行时间。

我认为我的问题是为每个句子做很多正则表达式（我有 300,000 个条目的字典），因为我必须在句子中找到术语。如果没有机器学习算法，你怎么能解决这个问题？和机器学习算法？现在，我可以灵活地更改我的编程语言、数据库......

非常感谢！！！

问候，

亚历克斯。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T09:38:09.590

与其构建一个 RE `term`，不如构建一个可以捕获所有这些的单独的、分离的：

```
pattern = re.compile("(%s)" % "|".join(re.escape(term) for term in dictionary)) 
```

然后使用`pattern.finditer`.

至于“如何使用机器学习”，恕我直言，这个问题太笼统了。从谷歌搜索“生物医学命名实体识别”开始——有大量关于该问题的文献和各种工具。

# c++ - 新套接字上的 C++ CreateIoCompletionPort

> ID：11557869
> 
> 赞同：1
> 
> 时间：2012-07-19T09:32:09.410
> 
> 标签：c++, iocp

编辑：我猜问题是我必须将容器中的 OVERLAPPED 或 WSAOVERLAPPED 与我的完成端口相关联。那是对的吗？

当有人连接到我的服务器时，我可以获得 IO 完成。然后我在新套接字上使用 CreateIoCompletionPort，并使用原来的完成端口。但是当他们向我发送数据时，它并没有被触发。虽然，如果其他人连接，它仍然会被触发。我的问题是，为什么会发生这种情况？我还确保 CreateIoCompletionPort 返回与原始句柄相同的句柄。是什么赋予了？

编辑：

```
DWORD WINAPI worker_thread(LPVOID lpParam) {
 client_information_class *cicc = NULL;

 HANDLE        CompletionPort = (HANDLE)lpParam;
 ULONG_PTR     Key;
 DWORD          BytesTransfered;
 OVERLAPPED     *lpOverlapped = NULL;
 DWORD          error = NULL;
 while(1) {
      error = GetQueuedCompletionStatus(CompletionPort, &BytesTransfered, (PULONG_PTR)&Key, &lpOverlapped, 0);
      cicc = CONTAINING_RECORD ( lpOverlapped, client_information_class, ol );

      if ( error == TRUE ) {
           cout << endl << "IO TRIGGERED" << endl;
           switch ( cicc->operation ) {
                /*#define OP_ACCEPT        0
                  #define OP_READ          1
                  #define OP_WRITE         2*/
                case 0:{
                     if ( check_auth_progress ( cicc->client_socket , cicc->client_buff , BytesTransfered ) ) {
                          cout << "Client " << cicc->client_socket << " connected." << endl; 

                          client_information_class *k = NULL; 
                          SOCKADDR_STORAGE *LocalSockaddr=NULL, *RemoteSockaddr=NULL; 
                          int               LocalSockaddrLen,RemoteSockaddrLen; 

                          k = (client_information_class *)Key;
                          k->lpfnGetAcceptExSockaddrs( 
                               cicc->client_buff, 
                               cicc->client_len - ((sizeof(SOCKADDR_STORAGE) + 16) * 2), 
                               sizeof(SOCKADDR_STORAGE) + 16, 
                               sizeof(SOCKADDR_STORAGE) + 16, 
                               (SOCKADDR **)&cicc->LocalSockaddr, 
                               &cicc->LocalSockaddrLen, 
                               (SOCKADDR **)&cicc->RemoteSockaddr, 
                               &cicc->RemoteSockaddrLen 
                          );

                          client_information_class *cicc2 = NULL;
                          cicc2 = ( client_information_class *)HeapAlloc(GetProcessHeap(), HEAP_ZERO_MEMORY, sizeof(client_information_class) + (sizeof(BYTE) * 4096));
                          if (cicc2 == NULL) {
                               fprintf(stderr, "Out of memory!\n");
                          }

                          cicc2->client_socket = cicc->client_socket;
                          cicc2->client_socketaddr_in = cicc->client_socketaddr_in;
                          cicc2->LocalSockaddr = cicc->LocalSockaddr;
                          cicc2->LocalSockaddrLen = cicc->LocalSockaddrLen;
                          cicc2->RemoteSockaddr = cicc->RemoteSockaddr;
                          cicc2->RemoteSockaddrLen = cicc->RemoteSockaddrLen;

                          HANDLE hrc = CreateIoCompletionPort( (HANDLE)cicc2->client_socket, CompletionPort, (ULONG_PTR)cic,  0 ); 
                          if (hrc == NULL) { 
                               fprintf(stderr, "CompletionThread: CreateIoCompletionPort failed: %d\n", GetLastError()); 
                               return 0; 
                          } else {
                               fprintf(stderr, "CompletionThread: CreateIoCompletionPort: %d\n", hrc);
                          }

                          cic->deleteNode ( cicc->client_socket , cic );
                          cic->addNode ( cicc2 );

                     } else {
                          cout << endl << "Something Happened ... " << endl;
                     }
                }break;

                case 1:{
                     if ( ParsePacket ( cicc->client_socket , data ) ) {
                          cout << "Client " << cicc->client_socket << " connected." << endl;
                     } else {
                          cout << endl << "Something Happened ... " << endl;
                     }
                }break;

                default:{
                     cout << endl << "Didnt catch that operation ... " << cicc->operation << endl;
                }break;
           }

      } else if ( error == FALSE && &lpOverlapped == NULL )  {
           // no packet was dequed...
           fprintf(stderr, "[error == FALSE && &lpOverlapped == NULL] CompletionThread: GetQueuedCompletionStatus failed: %d [0x%x]\n", GetLastError(), &lpOverlapped->Internal);
      } else if ( error == FALSE && &lpOverlapped != NULL ) {
           if((DWORD)&lpOverlapped->Internal == 0x0) {     // a timeout...
           } else {
           fprintf(stderr, "[error == FALSE && &lpOverlapped != NULL] CompletionThread: GetQueuedCompletionStatus failed: %d [0x%x]\n", GetLastError(), &lpOverlapped->Internal);
           }
      }
 }

ExitThread(0);
return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T11:30:09.870

我不想再这样做了，但我是对的，你必须使用 WSARECV 将套接字置于新模式（很像 acceptex）：我不知道这一点，在 MSDN 上也不是很清楚，还有一个来源本来想学IOCP的，不讲了。希望这可以帮助某人：/

```
WSABUF  wbuf; 
DWORD   bytes, flags;
wbuf.buf = cicc2->client_buff; 
wbuf.len = cicc2->client_len;
flags = 0;
int rr = WSARecv ( cicc2->client_socket , &wbuf , 1 , &bytes , &flags , &cicc2->ol , NULL );
    if (rr == FALSE) {
        if (WSAGetLastError() != WSA_IO_PENDING) {
            printf("PostRecv: WSARecv* failed: %d\n", WSAGetLastError());
            closesocket(cicc2->client_socket);
            cic->deleteNode ( cicc2->client_socket , cic );
        }
        fprintf(stderr, "PostRecv: WSARecv* failed: %d\n", GetLastError());
    } 
```

# javascript - 删除节点后如何控制连接？

> ID：11557870
> 
> 赞同：0
> 
> 时间：2012-07-19T09:32:16.603
> 
> 标签：javascript, raphael, graphiti-js

这是撤消/重做的示例：[Undo_Redo_Delete](http://draw2d.org/graphiti/jsdoc/#!/example/buildin_commandstack)

我做了以下步骤：

1.  拖放开始和结束节点。
2.  通过端口连接它们。
3.  删除结束节点。
4.  现在再次拖动结束节点。
5.  这次我再次尝试连接开始和结束节点，但它显示

类型错误：this.parent.getCanvas() 为空

在 port.js 的 this.parent.getCanvas().connectionLine.setGlow(false) 处。

如果有人知道如何解决这个问题，请帮助我。在此先感谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T16:34:22.110

已在 0.9.38 版本中修复

如果您需要快速修复，可以使用下面的代码替换 onDragEnd 方法。

```
/**
 * @inheritdoc
 **/
onDragEnd:function()
{
  this.parent.getCanvas().setSnapToGrid(this.originalSnapToGrid );
  this.parent.getCanvas().setSnapToGeometry( this.originalSnapToGeometry );

  // Don't call the parent implementation. This will create an CommandMove object
  // and store them o the CommandStack for the undo operation. This makes no sense for a
  // port.
  // graphiti.shape.basic.Rectangle.prototype.onDragEnd.call(this); DON'T call the super implementation!!!

  this.setAlpha(1.0);

  // 1.) Restore the old Position of the node
  //
  this.setPosition(this.ox,this.oy);

  // 2.) Remove the bounding line from the canvas
  //
  this.parent.getCanvas().hideConnectionLine();
  this.isInDragDrop =false;

  // Reset the drag&drop flyover information 
  //
  this.currentTarget = null; // <<== this is the missing line to fix the bug
}, 
```

# java - maven 编译器插件 2.0.2

> ID：11557874
> 
> 赞同：4
> 
> 时间：2012-07-19T09:32:31.437
> 
> 标签：java, maven

你能告诉我是否必须在我的 POM 中指定 maven-compiler-plugin 详细信息：

```
<plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <configuration>
            <source>1.5</source>
            <target>1.5</target>
            </configuration> 
```

如果是，为什么会这样，我了解它的作用，但不确定为什么需要它？没有其他方法可以在maven中调用javac吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-19T09:38:16.597

*您能否告诉我是否必须指定 maven-compiler-plugin 详细信息？*

不，但它会使用 Java 1.3 或石器时代的东西来编译。

*如果是，为什么会这样，我了解它的作用，但不确定为什么需要它？*

答案是不'。但这就是原因。您肯定不想在新代码上使用 Java 1.3 进行编译。您想要 Java 5 中的所有新特性。不是吗？:) 所以，你必须在你已经混乱的 POM 中添加这些额外的行。

*没有其他方法可以在maven中调用javac吗？*

没有。但是`mvn compile`，即使您没有此块，也可以使用任何其他命令。但是，如果您的源代码具有 Java 5 中的任何高级内容，但在以前的版本中没有，编译将失败。

* * *

**编辑 1**

当我有 JDK 5 时，它如何编译为 1.3？

好吧，有一个选项可以在 Java 编译器中设置。在此处查看 Java 编译器选项：http: [//docs.oracle.com/javase/1.5.0/docs/tooldocs/windows/javac.html](http://docs.oracle.com/javase/1.5.0/docs/tooldocs/windows/javac.html)

它说您可以将`source`et al 设置为旧版本。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-19T09:37:26.650

[maven-compiler-plugin](http://maven.apache.org/plugins/maven-compiler-plugin/)部分是可选的。如果您没有在 pom.xml 中包含该部分，则应用默认值。

> 默认编译器是 javac，用于编译 Java 源代码。另请注意，目前默认源设置为 1.5，默认目标设置为 1.5，与运行 Maven 的 JDK 无关。

我个人的偏好是有一个明确的配置，原因如下。

1.  我不认为依赖外部默认值是一个好主意，因为当插件版本改变时这些*可能会*改变。
2.  我不太可能希望为 Java 1.5 编译一个*新项目*

# android - Android主要活动标题图像删除

> ID：11557881
> 
> 赞同：0
> 
> 时间：2012-07-19T09:33:11.143
> 
> 标签：android, image, manifest, title

我在删除此标题栏/图像时遇到问题：

![图片](../Images/db119577a3f5d631f13384dd43f642af.png)

我已经尝试在清单文件中更改主题

```
(android:theme="@android:style/Theme.NoActionBar.Fullscreen"), 
```

我试过了

```
this.requestWindowFeature(Window.FEATURE_NO_TITLE); 
```

同样，但在这两种情况下，我的应用程序在我运行后立即“停止工作”。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T09:38:30.027

在你的变化中，`manifest`像这样代替`NoActionBar`变化`NoTitleBar`

```
<application        
    android:theme="@android:style/Theme.NoTitleBar.Fullscreen" > 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T09:40:22.430

您应该在设置内容之前进行第二次尝试像这样为我工作

```
super.onCreate(savedInstanceState);
this.requestWindowFeature(Window.FEATURE_NO_TITLE);
setContentView(R.layout.login); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T09:42:27.757

```
super.onCreate(savedInstanceState);

        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                WindowManager.LayoutParams.FLAG_FULLSCREEN);

        setContentView(R.layout.home); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T09:41:15.470

试试这个

```
requestWindowFeature(Window.FEATURE_NO_TITLE);
this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,WindowManager.LayoutParams.FLAG_FULLSCREEN); 
```

之后添加`super.oncreate`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-19T09:56:44.137

你有两种方法可以做到这一点。根据我对您问题的评论。

第一种方法是在您的`manifest`文件中-

```
@android:style/Theme.NoTitleBar.Fullscreen 
```

第二种方式是——

```
super.onCreate(savedInstanceState);
requestWindowFeature(Window.FEATURE_NO_TITLE);
getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
setContentView(R.layout.yourLayout); 
```

如果您在应用程序中使用多个活动。您必须以第一种方式为每项活动赋予风格。而且，如果您选择第二种方式，则必须将其赋予`requestWindowFeature`每个`Activity`'s inside 和 before`setContentView()`

希望这些对您有所帮助并使您可以理解。

# .net - 遍历数据表中特定列的行

> ID：11557883
> 
> 赞同：0
> 
> 时间：2012-07-19T09:33:16.320
> 
> 标签：.net, system.data.datatable

我想遍历我的数据表中某一列的行并添加这些行的内容来计算总和。但是，我只想要一些行的总和，而不仅仅是所有行。我正在使用下面的代码向我显示该特定列中最后一行的值但是现在我想遍历更多行并计算总计（对于这一特定列）我该怎么做？

```
 For Each mytablerow As DataRow In myTable.Rows()
     RadTextBox8.Text = mytablerow.Item("PercentageInMix")
 Next 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T07:45:55.157

我得到了我所需要的只是一行代码

```
 RadTextBox8.Text = myTable.Compute("SUM(PercentageInMix)", " [Include] =1      AND    ProductCode = '" & txtProductCode.Text & "'   ").ToString
        BindingContext(myTable).EndCurrentEdit() 
```

# android - 处理不完整的下载文件

> ID：11557893
> 
> 赞同：1
> 
> 时间：2012-07-19T09:34:13.570
> 
> 标签：android, download, epub

我收集了 ePub 文件，可以根据用户的要求在其中添加新文件。

现在，如果用户想要下载一个新的 ePub 文件并因此点击，比如说`get latest book`，书籍开始下载到设备 sdcard。

现在在下载完成之前，如果用户

*   按下返回按钮
*   他与互联网断开连接
*   他终止了申请

然后下载的文件仍然不完整。

当用户下次打开应用程序时，它会尝试打开那个不完整的文件，从而导致应用程序可能崩溃。

对此有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T09:40:14.100

在尝试打开文件之前，您需要检查文件是否已完全下载。

您可以在共享首选项中将下载状态存储为完成/未完成，下载完成后应更新该状态。在尝试加载文件之前检查此首选项。

# asp.net-mvc - 如何从 MVC3 中的 ChildAction 中找到区域中当前 Action 的 url？

> ID：11557899
> 
> 赞同：0
> 
> 时间：2012-07-19T09:34:24.083
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-routing

我正在尝试从 asp.net mvc 中的子操作的上下文中锻炼当前路由的 url。

为此，我正在使用：

```
Url.RouteUrl(ControllerContext.ParentActionViewContext.RouteData.Values) 
```

这很好，期望它不考虑区域。如何扩展以考虑当前区域路由？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T10:39:56.863

好的，这就是我最后所做的。本质上，我检查当前操作是否有一个区域，然后将其添加到我传递给`RouteUrl`调用的字典中。

```
var context = ControllerContext.ParentActionViewContext;

var routeValueDict = new RouteValueDictionary();

foreach (var value in context.RouteData.Values)
{
    routeValueDict.Add(value.Key, value.Value);
}

var area = context.RouteData.DataTokens["area"];
if (area != null)
{
    routeValueDict.Add("area", area);
}

var url = Url.RouteUrl(routeValueDict);
return url; 
```

# php - 尝试使用 oAuth 连接到 viagogo API

> ID：11557905
> 
> 赞同：0
> 
> 时间：2012-07-19T09:34:34.257
> 
> 标签：php, oauth

我一直在尝试访问 viagogo API，但出现 500 错误，我在这里使用代码示例：

www.dropbox.com/s/8fqfkkmdcvjtzxt/apipublicaccess.php

令人惊讶的是，这段代码在这里工作正常：http: [//mynameisroman.com/apipublicaccess.php](http://mynameisroman.com/apipublicaccess.php)

但不在这里：

[http://www.smapin.com/apipublicaccess.php](http://www.smapin.com/apipublicaccess.php)

有任何想法吗 ？

多谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T09:41:49.427

您确实意识到您需要更改以下代码行以包含有效的消费者密钥和消费者秘密。

```
$VIAGOGO["CONSUMERKEY"]="3o*******0jUQ";
$VIAGOGO["CONSUMERSECRET"]="Cv3*************dx0J"; 
```

# objective-c - 仪器和内存泄漏

> ID：11557907
> 
> 赞同：0
> 
> 时间：2012-07-19T09:34:35.823
> 
> 标签：objective-c, ios

我在我的 Object 的 init 中这样做：

```
-(id)initWithBookPath:(NSString*)path {
if (self = [super init]){

self.path = [self.fileSystemPath stringByAppendingPathComponent:@"file.html"];
...

}
return self;
} 
```

路径声明为：`@property(nonatomic, retain) NSString *path;`

当我启动仪器时，它显示这条线有泄漏，这是真正的内存泄漏吗？

感谢您的回答

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T09:47:53.280

感谢您的回答，仪器向我显示了泄漏，因为我没有这样做：`self.path =nil;`在`dealoc`方法中。谢谢你的回答。

# javascript - CKEDITOR Enter KeyPressed 时发送内容

> ID：11557911
> 
> 赞同：0
> 
> 时间：2012-07-19T09:34:44.887
> 
> 标签：javascript, jquery, ckeditor, jquery-events

我想在网络基础上创建聊天。我将 CKEDITOR 用于 B、I、U、字体类型、字体大小，就像 Yahoo Messenger 或其他 IM

我已经成功抓住了`enter`钥匙，但是当我打电话时出现了这个错误：

```
my_ckeditor_inctance_obj.setData(''); 
```

我之所以这样称呼它是因为当按下`enter`文本时会像其他聊天程序（FB、YM 等）一样消失

我用的是铬。Chrome 的控制台说：

> Uncaught TypeError: Cannot call method 'equals' of null ckeditor.js:36
> // 详细错误
> d.range.getCommonAncestor ckeditor.js:36
> (anonymous function) ckeditor.js:133
> s ckeditor.js:54
> j.enterkey.enterBlock ckeditor.js:53
> （匿名函数）

但是，我也使用了按钮发送。当我点击发送时，它工作得很好。

这是我的源代码：

```
$(document).ready(function(){
// Init CKEDITOR
CKEDITOR.replace('editor1',{
    toolbar:[['Bold','Italic','Underline'],['Font','FontSize'],['TextColor','BGColor']]
});

// Handle for keypress. In this case is When ENTER key is press
CKEDITOR.instances['editor1'].on('contentDom', function() {
    this.document.on('keydown', function(e){
        if(e.data.getKey() == 13){ // Do this code when ENTER is pressed
                var temp=getContent();
                console.log(temp);
        }
    });
});
});

function getContent(){
// Get the editor instance that you want to interact with.
var oEditor = CKEDITOR.instances.editor1;

// Get editor contents
// http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.editor.html#getData
var temp=oEditor.getData();

//set to blank again
oEditor.setData(''); // This code make error --> Uncaught TypeError: Cannot call method 'equals' of null ckeditor.js:36 BUT when click 'send' button this error didn't show.(send button use this function)
return temp;
} 
```

如何解决这个问题？

更新：
我在这里找到了解决方案[输入键来保存 textarea 值](https://stackoverflow.com/questions/10602647/enter-key-for-save-textarea-values)

特别感谢[AlfonsoML](https://stackoverflow.com/users/250294/alfonsoml)

# mongodb - 元素“Id”与类的任何字段或属性不匹配

> ID：11557912
> 
> 赞同：34
> 
> 时间：2012-07-19T09:34:48.720
> 
> 标签：mongodb, mongodb-.net-driver

我从MongoDB中的集合得到结果，结构如下

```
[DataContract]
public class Father
{
    [BsonId]
    [DataMember]
    public MongoDB.Bson.ObjectId _id { get; set; }

    [DataMember]
    public string Id { get; set; }

    [DataMember]
    public List<Child> childs { get; set; }
}

[DataContract]
public class Child
{
    [DataMember]
    public string Id { get; set; }

    [DataMember]
    public int Name { get; set; }
} 
```

当我尝试这个时：

```
List<Father> f = result.ToList(); 
```

它调用 `Element 'Id' does not match any field or property of the class Model.Child`

我认为它只是把'Id'当作别的东西。

我该如何处理？谢谢

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2019-03-15T15:21:46.030

`[BsonIgnoreExtraElements]`您可以通过在类声明之上添加来解决此问题。`ObjectId`由 MongoDB 内部维护，除非您想从对象中获取其他信息，例如时间戳，否则可能不需要。希望这可以帮助。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2019-10-21T18:44:52.303

```
var conventionPack = new ConventionPack { new IgnoreExtraElementsConvention(true) };
        ConventionRegistry.Register("IgnoreExtraElements", conventionPack, type => true); 
```

这非常有效！[BsonIgnoreExtraElements] 也工作得很好，但是，如果你想添加任何其他的 ConventionRegistry，比如 CamelCaseElementNameConvention，那么它会覆盖属性一并且会发生相同的异常。不确定是否也可以使用其他属性来实现。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-11-26T19:21:44.693

我正在使用动态列表 (List) 来构建过滤器并收到类似的错误。我将这些行添加到我的数据类中以解决问题。

```
[BsonId]
public ObjectId Id { get; set; } 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-01-11T11:59:09.377

我遇到了同样的问题。同样的错误发生在`var data = query.ToList();`

```
 var collection = db.GetCollection<Product>("Products");

        var query =
            from e in collection.AsQueryable<Product>()
            where e.name == "kalem"
            select e;

        var data = query.ToList(); 
```

我的插入是这样的：

```
 var collection = db.GetCollection<Product>("Products");

    collection.InsertBatch(products); 
```

我解决了如下。

```
 ObjectId id = new ObjectId();
        var collection = db.GetCollection<Product>("Products");

        collection.InsertBatch(products);
        id = pr.Id; 
```

我添加`id`到产品类如下产品类

```
class Product
{
    public ObjectId Id { get; set; }
    public string name { get; set; }
    public string category { get; set; }
    public double price { get; set; }
    public DateTime enterTime { get; set; }
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-07-18T06:34:26.177

这适用于我的情况：添加属性

```
 [DataMember]
    [BsonElement("songName")] 
```

到元素上：

```
[BsonIgnoreExtraElements]
public class Music
{

    [BsonId]
    [DataMember]
    public MongoDB.Bson.ObjectId _id { get; set; }
    [DataMember]
    public string Id { get; set; }

    [DataMember]
    [BsonElement("songName")]
    public string SongName { get; set; }

    [DataMember]
    [BsonElement("artistName")]
    public string ArtistName { get; set; }} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-08-09T13:52:12.870

您所要做的就是删除 ObjecId 属性上的 [DataMember] 并将 Id 绑定到 ObjectId _id。

> 所以你的班级应该是这样的：

```
[DataContract]
public class Father
{
    [BsonId]
    public MongoDB.Bson.ObjectId _id { get; set; }

    [DataMember]
    public string Id { 
          get { return _id.ToString(); }
          set { _id = ObjectId.Parse(value); }
    }

    [DataMember]
    public List<Child> childs { get; set; }
} 
```

ps：在您的情况下，必须手动生成子ID，如果您希望它是一个objectId（mongo），您最终将使用相同的技巧，要反序列化对象，您应该使用newtonsoft.json 引用并喜欢这个

```
Father = JsonConvert.DeserializeObject<Father>(response.Content); 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2013-03-18T22:40:33.933

您的 Child 类可能应该指定它继承父亲

公共类孩子：父亲{ ... }

您的父亲类可能应该添加已知类型属性（对于 WCF ）。

```
[DataContract]
[KnownType(typeof(Child))]
public class Father 
```

如果这是您保存/获取的 MongoCollection("fathers")，那么您可能需要为每个预期的子类型注册一个类映射。

```
if (!BsonClassMap.IsClassMapRegistered(typeof(Child)))
{
    BsonClassMap.RegisterClassMap<Child>(
        cm => { cm.AutoMap(); });
} 
```

正如@alexjamesbrown 所提到的，您不需要将 poco 对象上的 id 字段命名为“_id”。继承的想法是继承。因此，使用父亲的“id”字段（无论其名称如何）就足够了。目前尚不清楚为什么您的父亲类同时具有 Id 和 _id 属性。其中之一可能是不必要的。

# facebook - 如何在 cakephp facebook 插件中设置喜欢、评论、发送的图像、描述和标题？

> ID：11557914
> 
> 赞同：0
> 
> 时间：2012-07-19T09:34:49.887
> 
> 标签：facebook, cakephp, facebook-like, facebook-comments

我正在使用 webtechnick cakephp facebook 插件。我想为发送和评论设置图像描述和标题。有一页有很多喜欢和发送。当前站点获得相同的标题（html 中的标题标签中的内容）。我想为每个喜欢和发送设置不同的标题和描述。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T10:15:38.093

> 我想为每个喜欢和发送设置不同的标题和描述。

然后让它们指向*不同的*URL，并在每个包含适当 OG 元标记的 URL 下设置一个 HTML 页面。

# jquery - jQuery-mobile >> 通过表单提交加载页面

> ID：11557916
> 
> 赞同：0
> 
> 时间：2012-07-19T09:34:56.690
> 
> 标签：jquery, jquery-mobile

这应该是一个简单的任务。我想提交一个表单并将结果显示在“#responsediv”div 中，但无论我尝试什么，它所做的只是重新加载整个页面。

我是 jquery-mobile 的新手；有人可以帮忙吗？提前致谢！:-)

```
<div data-role="page" id="page1" data-theme="a">
  <div data-role="content" id="content1" name="content1">
    <form id="form1" >
      <div id="text1" data-role="fieldcontain">
        <label for="text1">Text1:</label>
        <input id="text1" name="text1" type="text" />
      </div>
      <div id="text2" data-role="fieldcontain">
        <label for="text2">Text2:</label>
        <input id="text2" name="text2" type="text" />
      </div>
      <div id="submitDiv" data-role="fieldcontain">
        <button name="submitbtn" type="submit" id="submitbtn" />submit</button>
      </div>
    </form>
    <div id="responsediv"></div>
    </div>
  </div>
</div>

 <script>
    $('#form1').submit(function() {
        $.mobile.loadPage("response.php",{
           type: "post",
           data: $("#form1").serialize(),
           pageContainer: $("#responsediv")
          });
    });
  </script> 
```

* * *

仍然无法正常工作，但这是我的最新尝试：

```
$('#form1').on("submit", function(e){
              e.preventDefault();
              $.mobile.loadPage("result.php",{
                    type: "post",
                    data: $("#form1").serialize(),
                    pageContainer: $("#responsediv")
                  });
        return false;
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T09:37:35.267

尝试`preventDefault`在您的`submit`处理程序中添加一个。

编辑：调用两者`perventDefault`，`stopPropogation`似乎可以按您的预期工作。

```
 $('#form1').submit(function(e) {
     e.preventDefault();
     e.stopPropagation();
     $.mobile.loadPage("/echo/html",{
       type: "post",
       data: $("#form1").serialize(),
       pageContainer: $("#responsediv")
     });
 }); 
```

请参阅此示例[jsfiddle](http://jsfiddle.net/nirmaljpatel/rcZ6G/)。

请注意，JQueryMobile`loadPage`将接收到的响应插入到由`pageContainer`包装在`div`with中指定的目标中`data-role=page`

--- 编辑 2 --- 我认为[JQueryMobile 的这个例子](http://jquerymobile.com/demos/1.1.1/docs/forms/forms-sample-selfsubmit.php)是你想要实现的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T09:38:41.150

使用 jquerymobile 时应该使用`.on()`绑定提交事件，而不是使用`.submit()`速记。查看 jquerymobile 事件文档。

```
$('#form1').on('submit',function(e) {
                e.preventDefault();
                $.mobile.loadPage("response.php",{
                    type: "post",
                    data: $("#form1").serialize(),
                    pageContainer: $("#responsediv")
                  });       
        }); 
```

# actionscript-3 - 如何防止我的单人 Flash 游戏作弊引擎？

> ID：11557923
> 
> 赞同：1
> 
> 时间：2012-07-19T09:35:30.910
> 
> 标签：actionscript-3, flash, anti-cheat

我在 facebook 上有一些小型 Flash 游戏。如何防止作弊引擎作弊？我的 swf 文件通过 php 将分数发送到我的数据库。我只是不希望人们通过使用作弊引擎来破解我的 Flash 游戏中的高分。避免这些问题的最佳方法是什么？

提前致谢..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T10:13:11.913

我使用的2种方法如下

SpeedHack 看门狗

[http://www.bjoernacker.de/flash/detecting-the-cheat-engines-speedhack-in-as3/](http://www.bjoernacker.de/flash/detecting-the-cheat-engines-speedhack-in-as3/)

使用这个类来判断用户是否在使用 CheatEngine 来降低帧率

另一种方法是创建一个 vault 类来在代理中存储变量，这个 vault 会将变量存储在不同的命名空间中（作弊引擎无法更改的命名空间）；

[http://troyworks.com/blog/2007/08/05/introspection-in-as3-use-of-namespace/](http://troyworks.com/blog/2007/08/05/introspection-in-as3-use-of-namespace/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-19T10:48:02.200

是的你可以：

这是一个非常好的和简单的方法。

[http://www.riawolf.com/?p=20](http://www.riawolf.com/?p=20)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T09:39:43.793

简短的回答；你不能。

长答案；这是很多工作。一种选择是制作游戏的服务器端端口，确保一切都是确定性的，然后发送所有玩家操作并在服务器端端口上验证它们（并丢弃任何失败的验证）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T18:04:19.733

这取决于游戏，因为其中一些您可以在服务器上验证，检查用户步骤，但您也可以记录游戏并将其与分数一起保存，而不是重播高分以检查游戏是否有效。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-31T12:59:54.130

我只是在分数中添加一些随机数（比如说 100 ），然后当我在某处显示它时减去它。在此之后，我混淆了 SWF 文件。所以我会有类似的东西：myScores = 100;。如果他有 15 个分数，那么记忆中就会有 115 个数字，他会寻找 15，而不是 115。然后我从 115 中减去 100，得到要显示的真实分数。保护您的 swf 免受反编译很重要（有很多软件会混淆它）。发送到 PHP 时，我还运行自己的加密/解密函数；）

# c# - 工作线程尝试在主线程上调用某些内容时出现死锁

> ID：11557925
> 
> 赞同：5
> 
> 时间：2012-07-19T09:35:38.637
> 
> 标签：c#, multithreading, deadlock

我正在使用一个外部组件，它定期从工作线程中拍摄事件。在我的事件处理程序中，我使用 Dispatcher 在主线程上调用某些方法。这很好用...

```
private void HandleXYZ(object sender, EventArgs e)
{
    ...
    if(OnTrigger != null)
        dispatcher.Invoke(OnTrigger, new TimeSpan(0, 0, 1), e);
} 
```

但是，当程序关闭和外部组件 Dispose()s 时，程序 *有时会*挂起（并且只能在任务管理器中看到并杀死）。

当我查看正在发生的事情时，看起来“组件”正在等待事件在主线程上返回（它停留在 Dispose() 方法中），而工作线程等待调度程序调用上述调用主线程（它挂在 dispatcher.Invoke-line 中）。

现在我通过向 Invoke 添加超时来解决关闭问题，这似乎有效但感觉不对。有没有更清洁的方法来做这样的事情？我可以强制主线程在关闭之前花一些时间处理其他线程的作业吗？

我试图在关闭之前“断开”事件，但这无济于事，因为调度程序（可能）已经在等待，当程序开始关闭时......

PS：外部组件在这里意味着我无权访问源代码...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T10:14:24.723

是的，这是死锁的常见来源。它挂起是因为调度程序退出了调度程序循环，它将不再响应 Invoke 请求。一个快速的解决方法是改用 BeginInvoke，它不会等待调用目标完成执行。另一个快速方法是将工作线程的 IsBackground 属性设置为 True，以便 CLR 将其杀死。

这些是快速修复，它们可能很适合您。当然在你的开发机器上，但如果你有一种唠叨的感觉，它可能仍然会出错，那么你是对的，没有观察到死锁或线程竞争并*不能*证明它们不存在。有两种“好”的方法可以完全安全地做到这一点：

*   *在确定*工作线程终止并且不能再引发事件 之前，不要让主线程退出。[这个答案](https://stackoverflow.com/questions/1731384/how-to-stop-backgroundworker-on-forms-closing-event/1732361#1732361)显示了模式。

*   使用 Environment.Exit() 强制终止程序。这是*非常*粗糙但*非常*有效的，只有当你有一个 UI 线程只是第二公民的重线程程序时，你才能达到这样的大锤。奇怪的是，这听起来像是一种合适的方法，但新的 C++ 语言标准已将其提升为受支持的终止程序的方式。您可以在[此答案](https://stackoverflow.com/questions/9758495/what-is-the-difference-between-stdquick-exit-and-stdabort-and-why-was-stdq/9759272#9759272)中阅读更多相关信息。请注意它是如何允许注册清理功能的，您必须对 AppDomain.ProcessExit 事件执行类似的操作。在执行此操作之前，请关注第一个项目符号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T10:00:21.497

至于事件订阅，当您知道不再需要某个特定对象时，清理它们确实是一个好主意。否则，您将面临造成内存泄漏的风险。您可能还想查看[弱事件模式](http://msdn.microsoft.com/en-us/library/aa970850.aspx)(MSDN)。

关于死锁本身，不知道你的代码，我们只能猜测。

我不认为`HandleXYZ()`是罪魁祸首，我宁愿检查你的`IDisposable()`实施。查看[MSDN 文档](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx)并将其与您的实现进行比较。

我想在您的实现中的某个地方进行了一些方法调用，这些方法调用取决于 的时间`GarbageCollector`，这是不确定的：有时它可能会在您的情况下起作用，有时可能不会。

# android - 向 MediaController 按钮添加其他方法

> ID：11557926
> 
> 赞同：0
> 
> 时间：2012-07-19T09:35:41.607
> 
> 标签：android

我有一个播放视频的 VideoView，我打电话

`videoPlayer.setMediaController(new MediaController(this));`

显示媒体控制器按钮（播放、暂停、前进、后退）。问题是当我单击播放或暂停按钮时如何添加其他方法`MediaController`？

这是我的课：

```
public class VideoPlayer extends Activity implements OnCompletionListener {
    private String filename;

    private VideoView videoPlayer;
    private MediaPlayer mediaplayer;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                WindowManager.LayoutParams.FLAG_FULLSCREEN);

        setContentView(R.layout.video_player);

        System.gc();
        Intent i = getIntent();
        Bundle extras = i.getExtras();
        filename = extras.getString("video_url");

        System.out.println(filename);

        videoPlayer = (VideoView) findViewById(R.id.videoPlayer);
        videoPlayer.setOnCompletionListener(this);
        videoPlayer.setKeepScreenOn(true);
        videoPlayer.setVideoPath(filename);
        videoPlayer.setMediaController(new MediaController(this));
        videoPlayer.requestFocus();
        videoPlayer.start();

        mediaplayer = new MediaPlayer();
        mediaplayer = MediaPlayer.create(
                this,
                Uri.parse("android.resource://" + getPackageName() + "/"
                        + R.raw.alo));
        mediaplayer.start();

    }

    /** This callback will be invoked when the file is finished playing */
    @Override
    public void onCompletion(MediaPlayer mp) {
        // Statements to be executed when the video finishes.
        this.finish();
    }

    /** Use screen touches to toggle the video between playing and paused. */
    @Override
    public boolean onTouchEvent(MotionEvent ev) {
        if (ev.getAction() == MotionEvent.ACTION_DOWN) {
            if (videoPlayer.isPlaying()) {
                videoPlayer.pause();
                mediaplayer.pause();
            } else {
                videoPlayer.start();
                mediaplayer.start();
            }
            return true;
        } else {
            return false;
        }
    }

    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        if (keyCode == KeyEvent.KEYCODE_BACK) {
            finish();
            return true;
        }
        return super.onKeyDown(keyCode, event);
    }   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T09:49:29.957

我不确定您要达到的目标。您可以使用 MediaController 扩展一个类并实现自己的一些方法。基本的面向对象原则。

```
private class MyMediaController extends MediaController {

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        // Your logic here
        return super.onTouchEvent(event);
    }
} 
```

# facebook - 如何获取应用程序在 Facebook 页面上写入的长期访问令牌？

> ID：11557927
> 
> 赞同：1
> 
> 时间：2012-07-19T09:35:45.667
> 
> 标签：facebook, publish, facebook-wall

挖了几天让我的 PHP 应用程序写在 facebook 粉丝页面上，几乎疯了。

1.  已为我的应用程序 manage_page 授予特定 Facebook 页面的权限。

2.  参观过

    ```
    h..s//www.facebook.com/dialog/oauth?client_id=APP_ID&redirect_uri=SOME_FALLBACK_URL_TO_GET_ACCESS_TOKEN_FROM_URL&response_type=token&scope=manage_pages,publish_stream 
    ```

3.  从上一步的结果复制访问令牌

4.  参观过

    ```
    h..s//graph.facebook.com/me/accounts?access_token=COPIED_ACCESS_TOKEN 
    ```

5.  得到如下结果：

    ```
    "data": [
        {
             "name": "PAGE_TITLE",
             "access_token":     "SHORT_LIVING_ACCESS_TOKEN",
             "category": "Local/travel",
             "id": "PAGE_ID_THAT_APP_IS_TO_WRITE_ON_WALL",
             "perms": [
                        "ADMINISTER",
                        "EDIT_PROFILE",
                        "CREATE_CONTENT",
                        "MODERATE_CONTENT",
                        "CREATE_ADS",
                        "BASIC_ADMIN"
                      ]
       }, 
    ```

6.  复制了`SHORT_LIVING_ACCESS_TOKEN`

7.  参观过

    ```
    h..s://graph.facebook.com/oauth/access_token?client_id={APP_ID}&client_secret={APP_SECRET}&grant_type=fb_exchange_token&fb_exchange_token={SHORT_LIVING_ACCESS_TOKEN_FROM_STEP_5} 
    ```

8.  收到错误并卡在这里：

    ```
    {"error_code":1,"error_msg":"An unknown error occurred"} 
    ```

ps 我在必要时`{APP_ID}`正确替换了 。`{APP_SECRET}`

请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T10:13:25.003

你做错了，我想。您正在获得一个短暂的*页面*访问令牌并尝试延长它。

您应该做的是获取一个短期*用户*访问令牌，延长**它**，*然后使用**长期*用户访问令牌获取页面访问令牌。

*该*过程应该为您提供一个没有默认到期的页面访问令牌。

# jquery - 如何查看我使用 JQuery AJAX 发送的 SOAP 请求数据

> ID：11557935
> 
> 赞同：0
> 
> 时间：2012-07-19T09:36:12.240
> 
> 标签：jquery, soap

我正在使用 Jquery 创建肥皂请求。以下是肥皂请求所需的信封。

```
POST /netforumaiatest2/xweb/secure/netforumxml.asmx HTTP/1.1
Host: amstest.aia.org
Content-Type: text/xml; charset=utf-8
Content-Length: length
SOAPAction: "http://www.avectra.com/2005/Authenticate"

<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <Authenticate xmlns="http://www.avectra.com/2005/">
      <userName>string</userName>
      <password>string</password>
    </Authenticate>
  </soap:Body>
</soap:Envelope> 
```

我用jquery写了代码

```
var soapMessage='<?xml version="1.0" encoding="utf-8"?><soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"><soap:Body><Authenticate xmlns="http://www.avectra.com/2005/"><userName>user</userName><password>pass</password></Authenticate></soap:Body></soap:Envelope>';

    $.ajax({
    url: productServiceUrl,
    type: "POST",
    dataType: "xml",
    data: soapMessage,
    complete: endSaveProduct,
    contentType: "text/xml; charset=\"utf-8\""
           }); 
```

但在 endSaveProduct 中，我得到了`status = error`. 我怎样才能看到我发送的数据`$.ajax call`。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T09:39:46.160

您可以使用`beforeSend`选项和控制台记录数据： `beforeSend: function(data) {console.log(data);}`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T09:40:37.017

我会建议你以另一种方式做到这一点。对 PHP 文件（或 aspx）进行 ajax 调用并在那里进行 SOAP 调用。与 javascript 相比，您可以在这些语言中使用 soap 做更多的事情。

如果您决定使用 PHP，我不久前发现了这个可爱的类覆盖：

```
class SoapClientDebug extends SoapClient {
    public function __doRequest($request, $location, $action, $version) {
        print_r($request);
        return parent::__doRequest($request, $location, $action, $version);
    }
} 
```

只需更改：

```
$client = new SoapClient('foo.wsdl'); 
```

和

```
$client = new SoapClientDebug('foo.wsdl'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T09:40:15.543

使用[Fiddler](http://www.fiddler2.com/Fiddler2/version.asp)检查您的请求和响应。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T05:50:23.497

在这里，我需要什么。我想打印在此处完成的 HTTPRequest 响应。

```
function endSaveProduct(xmlHttpRequest, status)
            {
              $(xmlHttpRequest.responseXML)
                {
                    alert(xmlHttpRequest.responseText); 
```

通过在soap请求标头中添加操作来解决错误

```
$.ajax({
                       url: productServiceUrl,
                       type: "POST",
                       beforeSend: function (xhr){
                       xhr.setRequestHeader("SOAPAction", "URL/Authenticate");
                       //alert("in before send");
                       },
                       dataType: "xml",
                       data: soapMessage,
                       complete: endSaveProduct,
                       contentType: "text/xml; charset=\"utf-8\""
                       }).done(function () {alert("calling Authenticate");})
                .fail( function() {alert("fail");}); 
```

# netbeans - 如何使用 Netbeans 设置 JBoss 服务器？

> ID：11557940
> 
> 赞同：16
> 
> 时间：2012-07-19T09:36:33.053
> 
> 标签：netbeans, jboss

我正在尝试使用 NetBeans 向导设置 jBoss 7 服务器，但它显示“提供有效的 jBoss 应用程序服务器 6、5 或 4 位置”。我也下载了版本 6 来试一试，效果很好。在 netbeans IDE 7.1.2 上添加 jBoss 7 的正确方法是什么？

任何帮助，将不胜感激...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-21T11:43:01.143

Netbeans 7.1.x 尚不提供对 JBoss AS 7 的官方支持。

*   Netbeans 错误报告：[错误 200132 - 添加对 JBoss AS 7 的支持](http://netbeans.org/bugzilla/show_bug.cgi?id=200132)

*   [Netbeans 支持](http://netbeans.org/community/releases/71/relnotes.html#supported_technologies)的技术列表（JBoss 6.1 是最后一个支持的版本）

但是根据[这个](http://javadude.wordpress.com/2012/08/24/netbeans-and-jboss-7/)链接，有一个非官方的插件，可以管理服务器，但不能在 JBoss AS 7 上部署应用程序。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-14T03:02:55.123

在构建时部署，并在清理时取消部署：

*   企业应用项目 (EAR)
*   Web 应用程序项目 (WAR)

将此 ant 脚本复制到项目中的“build.xml”文件中，***并将***属性 jboss.dir 更改为您的路径：

```
<project>

    ...

    <property name="jboss.dir" 
         value="D:/Share/Sync/Dev/tools/j/jboss-as-7.1.1.Final/standalone/deployments"/>

    <target depends="-post-clean" name="post-clean"/>
    <target depends="-jboss-env" name="-post-clean">
        <echo>Undeploying: ${jboss.projectFile}</echo>
        <delete file="${jboss.dir}/${jboss.projectFile}"/>
        <delete file="${jboss.dir}/${jboss.projectFile}.${jboss.projectState}"/>
    </target>

    <target depends="-post-dist" name="post-dist"/>
    <target depends="-jboss-env" name="-post-dist">
        <echo>Deploying: ${jboss.projectFile}</echo>
        <copy file="${dist.dir}/${jboss.projectFile}" todir="${jboss.dir}"/>
        <delete file="${jboss.dir}/${jboss.projectFile}.failed" /> 
    </target>

    <target name="-jboss-env" >
        <condition property="jboss.projectFile" value="${war.name}">
            <isset property="war.name"/>
        </condition>
        <condition property="jboss.projectFile" value="${jar.name}">
            <isset property="jar.name"/>
        </condition>
        <available property="jboss.projectState" 
                   file="${jboss.dir}/${jboss.projectFile}.undeployed" 
                   value="undeployed"/>
        <available property="jboss.projectState" 
                   file="${jboss.dir}/${jboss.projectFile}.failed" 
                   value="failed"/>
        <available property="jboss.projectState" 
                   file="${jboss.dir}/${jboss.projectFile}.deployed" 
                   value="deployed"/>
    </target>

</project> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-29T19:07:56.190

回复很晚，但有些更新，JBoss 7.1.1 为我与 Netbeans 7.4 一起工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-09T08:53:34.747

我对 Netbeans 8 - JBoss 7.2 也有类似的症状

对我来说，有人从独立中删除了 - 或不存在 - 'lib' 文件夹。当我从其他地方放回它时，它工作得很好。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-02-21T13:42:23.483

我使用 netbeans 8.0 并在 ubuntu 16 上安装了 jboss 6.4。要做到这一点：

1.  下载 JBoss [https://access.redhat.com/documentation/en-us/jboss_enterprise_application_platform/6.3/html/getting_started_guide/sect-download_and_install_jboss_eap_using_the_zip](https://access.redhat.com/documentation/en-us/jboss_enterprise_application_platform/6.3/html/getting_started_guide/sect-download_and_install_jboss_eap_using_the_zip)

2.  将其解压缩到您选择的文件夹中

3.  在工具 > 服务器下转到您的 netbeans
4.  点击“添加服务器”
5.  在选择服务器窗口中选择 JBoss
6.  在服务器位置，指定解压的 jBoss 文件夹
7.  点击下一步然后点击完成

您可能必须创建一个 RedHat 帐户。我希望这个对你有用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-20T19:43:47.863

据此：http: [//developinjava.com/articles/using-jboss-as-7-with-netbeans/](http://developinjava.com/articles/using-jboss-as-7-with-netbeans/)

netbeans 的开发版已经支持 jboss 7。

虽然没有测试过。因为我的问题是我的 jboos 安装在不同的机器上，看起来它需要在本地才能得到支持。:(

# android - 在 Android 布局中的对话气泡中显示 1-3 个字符的长文本

> ID：11557943
> 
> 赞同：0
> 
> 时间：2012-07-19T09:36:40.373
> 
> 标签：android, android-layout

我有一个小的语音气泡图像。我想在该语音气泡图像中放置一个 1~3 个字符长的文本字符串。目前，我正在使用`FrameLayout`, 并使用重力、填充和边距。我也玩过一个`RelativeLayout`. 有一个更好的方法吗？我读了一些关于基线的东西，但那只是将文本与语音气泡图像的左上角对齐。对值进行硬编码，或者至少在资源文件中设置硬值，是实现此目的的唯一方法吗？还是有一些更动态/正确的方式来做到这一点？我感谢任何和所有的帮助。提前致谢。

# android - Android中的文件写入权限错误

> ID：11557945
> 
> 赞同：3
> 
> 时间：2012-07-19T09:36:49.557
> 
> 标签：android, file-io, android-sdcard

我正在向 SDCard 写入一个文件并将其设置`<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />`为在 3.x 之前运行良好，但在 4.0 上它给出了以下错误。

```
java.io.IOException: open failed: EACCES (Permission denied)
at java.io.File.createNewFile(File.java:940)
at com.gt.mLearning.app.VideoViewActivity.copyFile(VideoViewActivity.java:204)
at com.gt.mLearning.app.VideoViewActivity.access$3(VideoViewActivity.java:193)
at com.gt.mLearning.app.VideoViewActivity$Loader.doInBackground(VideoViewActivity.java:61)
at com.gt.mLearning.app.VideoViewActivity$Loader.doInBackground(VideoViewActivity.java:1)
at android.os.AsyncTask$2.call(AsyncTask.java:264)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
at java.util.concurrent.FutureTask.run(FutureTask.java:137)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
at java.lang.Thread.run(Thread.java:856)
Caused by: libcore.io.ErrnoException: open failed: EACCES (Permission denied)
at libcore.io.Posix.open(Native Method)
at libcore.io.BlockGuardOs.open(BlockGuardOs.java:110)
at java.io.File.createNewFile(File.java:933) 
```

有什么帮助或建议吗？

罗希特

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T16:51:09.397

只是猜测，但您的手机是否仍连接到计算机？如果您的 sd 卡仍被锁定为 USB 设备，则可能会发生此错误。希望这有帮助，托拜厄斯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T23:22:11.503

后来我发现问题是特定于设备的。我从 Android 市场安装了文件管理器应用程序，它显示没有写入权限。这意味着该制造商的 Android 操作系统实现不提供导致问题的写入权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T10:08:26.947

可能您已经对外部存储目录进行了硬编码，并且它可以在特定设备上运行。

```
Environment.getExternalStorageDirectory(); 
```

发布您的代码将比日志提供更多帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-14T02:16:59.560

您也可以检查一下您是否刚刚更新了您的 Android 操作系统。一些重大变化导致 SD 卡问题。对我来说，我使用三星固件更新应用程序 Odin 将 SHV-E160K 中的 Android O/S 从 2.3.5 更新到 4.1.2。我遇到了问题。我的详细错误信息如下：

```
02-14 11:00:43.057  22288-22288/? W/System.err﹕ java.io.IOException: open failed: EACCES (Permission denied)
02-14 11:00:43.057  22288-22288/? W/System.err﹕ at java.io.File.createNewFile(File.java:940)
02-14 11:00:43.057  22288-22288/? W/System.err﹕ at com.sec.android.util.IAPDeviceInfoEditor.activity.EditorActivity.createDeviceInfo(EditorActivity.java:222)
02-14 11:00:43.057  22288-22288/? W/System.err﹕ at com.sec.android.util.IAPDeviceInfoEditor.activity.EditorActivity.onClick(EditorActivity.java:121)
02-14 11:00:43.057  22288-22288/? W/System.err﹕ at java.lang.reflect.Method.invokeNative(Native Method)
02-14 11:00:43.057  22288-22288/? W/System.err﹕ at java.lang.reflect.Method.invoke(Method.java:511)
02-14 11:00:43.057  22288-22288/? W/System.err﹕ at android.view.View$1.onClick(View.java:3685)
02-14 11:00:43.057  22288-22288/? W/System.err﹕ at android.view.View.performClick(View.java:4192)
02-14 11:00:43.067  22288-22288/? W/System.err﹕ at android.view.View$PerformClick.run(View.java:17248)
02-14 11:00:43.067  22288-22288/? W/System.err﹕ at android.os.Handler.handleCallback(Handler.java:615)
02-14 11:00:43.067      172-485/? V/AudioHardwareMSM8660﹕ open driver
02-14 11:00:43.067  22288-22288/? W/System.err﹕ at android.os.Handler.dispatchMessage(Handler.java:92)
02-14 11:00:43.067  22288-22288/? W/System.err﹕ at android.os.Looper.loop(Looper.java:137)
02-14 11:00:43.067  22288-22288/? W/System.err﹕ at android.app.ActivityThread.main(ActivityThread.java:4950)
02-14 11:00:43.067  22288-22288/? W/System.err﹕ at java.lang.reflect.Method.invokeNative(Native Method)
02-14 11:00:43.067  22288-22288/? W/System.err﹕ at java.lang.reflect.Method.invoke(Method.java:511)
02-14 11:00:43.067  22288-22288/? W/System.err﹕ at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:997)
02-14 11:00:43.067  22288-22288/? W/System.err﹕ at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:764)
02-14 11:00:43.067  22288-22288/? W/System.err﹕ at dalvik.system.NativeStart.main(Native Method)
02-14 11:00:43.067  22288-22288/? W/System.err﹕ Caused by: libcore.io.ErrnoException: open failed: EACCES (Permission denied)
02-14 11:00:43.067  22288-22288/? W/System.err﹕ at libcore.io.Posix.open(Native Method)
02-14 11:00:43.067  22288-22288/? W/System.err﹕ at libcore.io.BlockGuardOs.open(BlockGuardOs.java:110)
02-14 11:00:43.067  22288-22288/? W/System.err﹕ at java.io.File.createNewFile(File.java:933)
02-14 11:00:43.067  22288-22288/? W/System.err﹕ ... 16 more 
```

原因是 4.1.2 无法识别 2.3.5 中的文件系统。我解决了这个格式化 sdcard 存储。格式并不意味着删除您的个人信息，例如地址、备忘录或历史记录。格式化后，它就像魔术一样工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-03T02:46:22.067

这可能会对您有所帮助。

在 sdcard 上写入文件时，我遇到了同样的问题。我已经设置了写入文件所需的所有权限，但我使用了如下文件对象：

**错误**：文件 myFile = new File(Environment.getExternalStorageDirectory().getAbsoluteFile()+fileName);

**正确**： File myFile = new File(Environment.getExternalStorageDirectory().getAbsoluteFile(), fileName);

这意味着路径是错误的。

# php - linux apache/PHP 读写权限

> ID：11557948
> 
> 赞同：1
> 
> 时间：2012-07-19T09:36:55.487
> 
> 标签：php, apache, permissions

我有一个适用于我们办公室的 PHP 脚本/应用程序，我成功地将它部署到另一个办公室。现在在第三个办公室，某个 glob() 函数返回一个空字符串。

所有办公室都使用debian stable，所以软件包的版本应该是一样的。我能想到的最好的是，该特定目录的权限不足。

我已经这样做了：

*   将 '/share' 添加到虚拟主机内的 open_basedir 指令中，不带尾随 '/' 以使其递归 -> 验证可使用 phpinfo()
*   在 '/share' 上设置权限：'setfacl -Rm d:u:www-data:rwx,u:www-data:rwx /share' 然后我重新安装了 '/share' 并重新启动了 apache 以确保新的权限正在使用中。-> 验证正在使用“getfacl /share”：确认 www-data 对 /share 及其下的所有目录具有读/写权限
*   我已验证“安全模式”已关闭
*   我已将 www-data 添加到拥有 '/share': 'chown -R username/groupname /share' 的 POSIX 组中，这由 'ls -l' 验证。该目录上的 POSIX 权限是 'drwxrws---+'

我在看什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T16:49:31.430

找到了，当然它是如此明显，以至于我可以打自己的头。包含“/share”的文件夹具有严格的权限，这可能会禁止用户“www-data”进入“/share”。谢谢你和我一起思考......

# jquery - 使用下拉 jqgrid 过滤时获取子项

> ID：11557950
> 
> 赞同：2
> 
> 时间：2012-07-19T09:37:01.167
> 
> 标签：jquery, jqgrid

我的下拉列表中有以下数据结构：

```
External
    Test
    Test2
Internal
    Internal2
    Internal3 
```

当我从过滤器下拉列表中选择父项时，我试图在网格中同时获取父项和子项。

例如：选择外部时，我想在JQGrid中获得外部，测试和Test2。

这有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T14:52:43.107

我不知道 jqgrid 初始化设置，但你可以像做脏黑客一样

```
$('parent selector').click(function () {$(this).children().click(); return true;}); 
```

或使用 jqgrid api 加载数据。

# javascript - 如何使手风琴部分既是选择器又是超链接？

> ID：11557955
> 
> 赞同：-1
> 
> 时间：2012-07-19T09:37:32.470
> 
> 标签：javascript, jquery, html, accordion

我想让手风琴标题既可以用作选择器，也可以用作超链接。这怎么可能？例如，是否可以将标题的一部分用作部分打开器，而将另一部分用作超链接？

仅插入我的链接不起作用：

```
<div id="accordion">
    <h3><a href="/myhtml1.html">First header</a></h3>
    <div>First content</div>
    <h3><a href="/myhtml2.html">Second header</a></h3>
    <div>Second content</div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T09:44:14.783

如果您使用 html 5，现在可以将整个部分包装在锚标记中，因此您理论上可以执行类似的操作

```
<div id="accordion">
    <a href="#">
       <h3>First header</h3>
       <a href="/myhtml1.html">Header link</a>
    </a>
    <div>First content</div>
    <a href="#">
       <h3>Second header</h3>
       <a href="/myhtml2.html">Header link</a>
    </a>
    <div>Second content</div>
   </div> 
```

然后你只需要用浮动等设置你的h3和标题链接标签......希望有帮助。

你也可以创建一个 jsFiddle，如果你愿意，我可以让它工作

# c - 使用链表的优先队列

> ID：11557956
> 
> 赞同：0
> 
> 时间：2012-07-19T09:37:34.533
> 
> 标签：c, linked-list, priority-queue

我一直在尝试在链表的帮助下实现优先级队列。但是，当我使用我在下面的程序中使用的 add() 函数时，我无法将数据添加到列表中。一些帮助会很棒！

该程序要求我将各种数据分类到单独的队列中......同一队列中的所有元素具有相同的优先级。

即：数据：A，优先级：1 数据：B，优先级：2 数据：C，优先级：1

那么它应该按如下方式存储数据：

Q1 : A,C Q2 : B

我的程序如下。我想我弄乱了我作为参数发送给函数添加的指针......

```
`#include<stdio.h>
 #include<conio.h>
 struct node{
   char data[3];
   struct node *next;
   };
   void del(struct node *);
   void add(struct node *,struct node **);
   void display(struct node *);
   int main()
   {
       int i;
       struct node *list[5];
       struct node *q;
       int pr,n;
       for(i=0;i<5;i++)
       list[i]=NULL;
       printf("enter the no.of elements");
       scanf("%d",&n);
       for(i=0;i<n;i++)
       {
                       q=(struct node*)malloc(sizeof(struct node));
                       printf("Enter data");
                       scanf("%s",&(q->data));
                       printf("\npriority :");
                       scanf("%d",&pr);
                       pr--;
                       add(q,&list[pr]);
       }
       for(i=0;i<5;i++)
       {
                       display(list[i]);
       }
       for(i=0;i<5;i++)
                       del(list[i]);
                       getch();
       return 0;
       }
       void add(struct node *q,struct node **n)
       {
            if(*n==NULL)
            {
                       *n=q;
                       return;
            }
            while((*n)->next!=NULL)
            *n=(*n)->next;
            (*n)->next=q;
            q->next=NULL;
            return;
       }
       void del(struct node *q)
       {
            if(q==NULL)
            {
                       printf("Queue empty");
                       return;
            }
            while(q->next->next!=NULL)
            q=q->next;
            q->next=NULL;
       }
       void display(struct node *q)
       {
            while(q!=NULL)
            {
                          printf("%s\t",q->data);
                          q=q->next;
            }
            printf("\n");
            return;
       }` 
```

提前致谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T10:11:59.120

函数“add”中的循环呢？

```
while((*n)->next!=NULL) *n=(*n)->next; 
```

你不是这个意思吗？

```
while((*n)->next!=NULL) n=&(*n)->next; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T10:57:56.537

我看到的几个问题：

1.  在 main 中，q->next 应该在 "q=(struct node*)malloc(sizeof(struct node))" 之后设置为 null，否则它可以是任何东西；
2.  在 del 中，您实际上没有删除任何内容（“malloc”分配的所有资源都应由“free”释放）；
3.  同样在 del 中，“q->next”可能为空，因此“q->next->next”可能会使程序崩溃

# html - 使用多部分表单的缺点

> ID：11557964
> 
> 赞同：9
> 
> 时间：2012-07-19T09:37:41.387
> 
> 标签：html, forms, multipartform-data

`enctype="multipart/form-data"`我想知道当没有文件输入字段时添加到表单是否有任何缺点。

我在模板中声明表单，我只需要在某些页面上使用 multipart。我应该总是添加它还是只在需要时添加它？

要求会更大吗？还是有任何其他后果（Firebug / DevTools 中的可读性降低除外）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T09:40:20.700

> 要求会更大吗？

轻微地。

> 还是有任何其他后果（Firebug / DevTools 中的可读性降低除外）？

不。

# regex - 为什么这个正则表达式不匹配指定的第一个字符？

> ID：11557968
> 
> 赞同：1
> 
> 时间：2012-07-19T09:37:54.533
> 
> 标签：regex

我有...

```
"Data Source=MYSERVER.dghdev.ds;Initial Catalog=CarPath;Persist Security Info=True;User ID=sa;Password=Password1" 
```

我写了正则表达式......

```
(?=Data Source).*; 
```

但它将所有内容匹配到“sa”。这真的很烦人，我只是不明白为什么会发生这种情况。.* 表示任意数量的字符，然后是 ';' 应该停在第一个。它不会停在第四个。为什么是这样？我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T09:40:18.460

`*`量词是贪心的，它会匹配尽可能多的字符，直到匹配不到下一个token，不得不回溯。在这种情况下，`.*`将匹配所有内容，直到`;`字符串中的最后一个。

如果你想停在第一个`;`，你需要量词的惰性版本：`*?`。换句话说，您的正则表达式应该是`(?=Data Source).*?;`. 惰性量词将尝试匹配尽可能少的字符，只要可以匹配下一个标记。

***根据语言的支持，***量词的行为，如`*`,`+`,`{n,m}`通常可以通过,,`?`之后。`*?``+?``{n,m}?`

# javascript - 在父窗口上刷新子窗口

> ID：11557972
> 
> 赞同：2
> 
> 时间：2012-07-19T09:38:13.363
> 
> 标签：javascript, jquery

如果父窗口重新加载，我如何刷新子页面？

假设**A.html**有一个打开**B.html**的链接。**如果A.html重新加载，** **B.html**将自动刷新。

 **任何 javascript/jQuery 方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T10:18:13.987

如果您像这样打开它，您可以控制孩子：（在**A.html**中）

```
baby = window.open('B.html'); 
```

然后将像这样刷新孩子：

```
baby.history.go(0); 
```

如果您刷新 A，`unload`将调用 pages 事件。因此，要在刷新（或离开或关闭）A 时刷新 B，您可以执行以下操作：（在**A.html**中）

```
<body onunload="baby.history.go(0);"> 
```

但是，刷新后所有 javascript 变量都将丢失！它将失去与页面 B 的连接！所以它只会工作一次。

我认为一个解决方案是在**A.html**中创建一个刷新按钮/链接，它将动态刷新页面 (A) 上的数据，以保持与子窗口 (B) 的连接。**

# html - 无法删除文档底部的空白

> ID：11557974
> 
> 赞同：0
> 
> 时间：2012-07-19T09:38:18.147
> 
> 标签：html, css, footer, space

每次渲染页面时，我似乎都会生成这个空间块。我不知道它是如何出现在那里的。下面是我在 chrome 中检查时的图像，它发生在其他浏览器中。这是一个问题，因为它在我的页脚下方，所以我只有空格，似乎没有 css 可以解决它，只能直接删除很好的空格，但我的代码中不存在空格。

![我的代码](../Images/c953b09c941aa5f6b86e207e629b6a26.png)

```
 <body>
      <div id="wrapper">
        <div id="header">
        <img style="display:block; " src="assets/img/trinity.png" alt="trinityimage" />
              <ul style="width:100%;
                height:100px;
                background:url(assets/img/backg.png) repeat-x;
                list-style:none;
                margin:0;
                padding:0;
                text-align:center;" id="menu">
                <li class="selected"><a href="#" class="home"><span></span></a></li>
                <li><a href="#" class="aboutus"><span></span></a></li>
                <li><a href="#" class="team"><span></span></a></li>
                <li><a href="#" class="club"><span></span></a></li>
                <li><a href="#" class="spare"><span></span></a></li>
            </ul>

        </div>
        <div id="content">
        <div id="space"></div>
        <img style="padding:7px;" src="assets/img/newsite.png" align="left" alt="newsite"/>
        <p>Welcome to the Club homepage</p>!
        <div id="rightcolumn">
        <h3>Recent News!</h3>
           <ul style="font-size:9px; line-height:100%;">
           <li><p>Lorem ipsum dolor</p></li>
           <li><p>Lorem ipsum dolor</p></li>
           <li><p>Lorem ipsum dolor</p></li>
           <li><p>Lorem ipsum dolor</p></li>
           </ul>
        </div>
        <div id="footer">
        </div>
    </div>
</body>
</html>​ 
```

'space' div 对它没有影响，这只是一点空间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T09:47:52.413

我以前见过这个幻影空间几次，它与添加的隐藏字符有关（通常来自复制和粘贴）。如果您删除关闭`</div></body></html>`然后手动重新键入它们可能会解决问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T09:48:00.140

. 之后有一个奇怪的不可见字符（十六进制`e2 80`：）`</html>`。

删除它，空间将消失。

# google-chrome - Chrome 扩展程序在文件打开时启动

> ID：11557976
> 
> 赞同：0
> 
> 时间：2012-07-19T09:38:19.170
> 
> 标签：google-chrome, google-chrome-extension, google-nativeclient

我即将开始一个 Chrome 打包的应用程序项目，其中将包含一个 NaCl 组件来解析 CHM 文件。但在我开始之前，我只想检查是否可以让应用程序在打开 CHM 时自动启动（当用户单击 chm 文件的链接时，或者可能将 chm 文件拖到 Chrome 窗口中时） ）。

[我在这里](http://code.google.com/chrome/extensions/manifest.html#nacl_modules)遇到了一些谷歌文档，其中描述了将 NaCl 模块与扩展清单中的 MIME 类型相关联，但是 A：我不确定这是否与我的问题和 B：我已经尝试按照它描述的那样做，但是似乎什么都没有改变。

如果有人能指出我正确的方向，我将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T12:27:00.263

我能够使用[chrome.webRequest](http://developer.chrome.com/extensions/webRequest.html "chrome.webRequest")来过滤带有`.chm`扩展名的 URL，但当然，这仅在用户单击 CHM 文件的直接链接时才有效，而且我不知道如何访问沙盒之外的本地文件（毫无疑问，有充分的理由）。

从那以后，我决定将该项目作为[Drive 应用程序](https://developers.google.com/drive/get-started "云端硬盘应用")，其中 C++ 部分隐藏在 ASP.net 服务器上的 DLL 中，这对我来说更有意义。

# sql - 当一个表有空值时连接两个表

> ID：11557978
> 
> 赞同：1
> 
> 时间：2012-07-19T09:38:22.817
> 
> 标签：sql, oracle, join, null

![在此处输入图像描述](../Images/70c0f7196d882e8ab817eccfeadb6be7.png)

我想从工作表中列出员工及其工作（使用 job_id 键），但有些员工的工作 ID 为 null，当我使用 join null 值时不会显示。我希望没有工作 ID 的员工将 null 作为他们的工作名称。我该怎么做？

这是我尝试过的

```
select EMP_ID,MANAGER_EMP_ID,FNAME||' '||LNAME as EMP_FULL_NAME,
HIRE_DATE as EMP_JOINING,salary as EMP_SALARY,function as
EMP_DESIGNATION from employee e join job j on e.job_id=j.job_id 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T09:40:24.797

只需更改`join`为`left join`...

# jquery - 在jquery中执行foreach

> ID：11557979
> 
> 赞同：1
> 
> 时间：2012-07-19T09:38:24.813
> 
> 标签：jquery, jsp, foreach, arraylist, internet-explorer-9

我的 jQuery 代码有问题。

我有两个 jsp 类。

在第一个中，我定义了一个`ArrayList`并用数字填充它，在第二个调用中是我的 jQuery 代码。

我尝试在`jQuery`脚本中输入一个 Arraylist，但它不起作用。

```
$(document).ready(function()
{
$(".trigger").click(function()
{
    var myJSList = ${myAttrList};
    $.each(myJSList, function(item, index)
    {
    $("#panel"+alert(item)).toggle("fast");
    $(this).toggleClass("active");
    return false;

});
}); 
```

`#panel`应该从最后得到一个数字`Arraylist`。

我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T12:09:55.097

您可以在您的 jsp 文件中创建一个 JavaScript 数组，其中包含来自您的 java ArrayList 的所有元素：

```
<script type="text/javascript">

var myJSList =new Array();
   <% for(int i=0; i < myAttrList.size(); i++){ %>
myJSList [<% out.print(i); %>] = "<% out.print(myAttrList.get(i).toString()); %>";
   <% }//end for 
   %>
  //use myJSList on client side (with jquery) ...

</script> 
```

这里`myAttrList`是 java 类型`ArrayList<Integer>`的，`myJSList`是一个 javascript`array`填充的`*myAttrList*`；

# php - Joomla 模块参数动态字段

> ID：11557980
> 
> 赞同：0
> 
> 时间：2012-07-19T09:38:25.783
> 
> 标签：php, xml, joomla, joomla2.5

有没有办法在 Joomla 模块参数中获取当前模板的路径？

我有以下内容：

```
<field name="myimage" type="imagelist" default="" label="Select an image" directory="templates/[TEMPLATENAME]/images/" > 
```

在哪里 [TEMPLATENAME] 我想显示当前模板的名称以使路径在 Joomla 中动态化。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T12:41:56.957

不，我不相信有。并非没有破解 Joomla。

# java - SSL 库中使用密码失败

> ID：11557983
> 
> 赞同：-1
> 
> 时间：2012-07-19T09:38:29.307
> 
> 标签：java, android, sockets, encryption, ssl

我已经与我的服务器创建了一个 ssl 套接字连接。服务器向我发送 RC4 密钥，我使用该密钥创建密码并将其绑定到现有套接字的输入和输出流。尝试从输入流中读取时出现以下错误：

javax.net.ssl.SSLProtocolException：读取错误：ssl=0x32fbf8：SSL 库失败，通常是协议错误

是否有可能解密无法正常工作或 RC4 密钥密码不正确。这种错误的原因是什么。我在 android 2.3.3 上的应用程序中执行此操作。

还有一个查询，android 2.3.3 是否支持 sslv23(openssl) 。如果是这样，如何实例化相同的？（在 Windows 客户端中，我使用 rc4 键设置会话上下文，它工作得很好）

我是 java 和 android 新手，来自 VC++ 背景。请专家和程序员就我的疑问赐教。我的代码如下：

```
sslContext = SSLContext.getInstance("TLS");
/*   some code to initialize ssl context  */
SSLSocketFactory sslSocketfactory =  sslContext.getSocketFactory();
sock = (SSLSocket) sslSocketfactory.createSocket(host,port1);
sock.setSoTimeout(12000);

is = new DataInputStream(new BufferedInputStream(sock.getInputStream(),
                                 16384));
os = sock.getOutputStream();
/*  some more code using above mentioned is and os to recieve rc4 key and 
    write it into a byte array   */

SecretKey key2 = new SecretKeySpec(reverserRc4InBytes, 0, reverserRc4InBytes.length, "RC4");
Cipher cipherOS = Cipher.getInstance("RC4");
cipherOS.init(Cipher.ENCRYPT_MODE, key2);

Cipher cipherIS = Cipher.getInstance("RC4");
cipherIS.init(Cipher.DECRYPT_MODE, key2);
cos = new CipherOutputStream(os,cipherOS);
cis = new CipherInputStream(is,cipherIS); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T17:48:59.717

据我了解，您首先建立 SSL/TLS 连接以某种方式交换 RC4 密钥，然后使用它来加密和解密结果，而不是让 SSL/TLS 堆栈为您完成所有工作。（这显然是不必要的复杂，而且不清楚这有多安全，因为 SSL/TLS 为您提供的不仅仅是加密，尤其是完整性。）

> 该服务器是用 C 语言实现的，并使用现有的 SSL 堆栈 .. sslv23 来具体说明。

SSLv23 并不是真正的“堆栈”（“堆栈”是指实现：JSSE、OpenSSL、.Net 的安全 API，...）。SSLv23 通常是指 SSLv3，其中[初始客户端 Hello 消息以 SSLv2 格式包装](https://www.rfc-editor.org/rfc/rfc4346#appendix-E)。对于同时支持 SSLv3 和 SSLv3/TLSv1.x 的客户端，此包装发生在客户端。服务器支持的版本应该是固定的，特别是，如果您的服务器支持 SSLv3 及更高版本，则不需要使用该技巧。（请注意，JSSE 支持 v2 包装的 Client Hello 格式，但实际上并不支持 SSLv2。我想这也是 Android 的情况。）

> javax.net.ssl.SSLProtocolException：读取错误：ssl=0x32fbf8：SSL 库失败，通常是协议错误

这表明您的服务器和客户端之间发生了不兼容的事情。这可能有几个原因：

*   您的服务器仅支持 SSLv2（不是 3）。假设您的服务器至少支持 SSLv3（例如，您可以使用 Wireshark 检查握手是否完成。）

*   服务器上的 SSL/TLS 实现存在更普遍的问题。（您可以尝试使用其他工具连接到它，例如`openssl s_client`，至少看看是否可以建立连接。）

*   您的密钥交换协议期望 SSL/TLS 连接在此处结束，而之后将手动处理连接留在普通 TCP 套接字上。您可能必须在使用 SSL/TLS 的部分中仅使用您的`Socket`as an `SSLSocket`，然后再恢复为纯`Socket`文本。()

    您可以尝试为您的服务器建立一个普通套接字，将其升级为`SSLSocket`使用[`createSocket (Socket s, String host, int port, boolean autoClose)`](http://developer.android.com/reference/javax/net/ssl/SSLSocketFactory.html#createSocket%28java.net.Socket,%20java.lang.String,%20int,%20boolean%29)with`autoClose=false`并从普通套接字获取 I/O 以进行手动加密。

    我认为这应该会导致其他问题`SSLSocket`，尤其是当服务器关闭 SSL/TLS 连接的一侧时。这只是一个猜测，这种方法可能有效。

无论如何，我认为您看到的问题与您`Cipher`从 的 I/O 流中手动使用没有任何关系`SSLSocket`，因为异常发生在底层，就您读取的数据而言，它应该被隐藏/写有担心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T00:50:07.373

我认为你没有正确理解你的任务。*要么*你应该使用 SSL *，要么*你需要实现这个本土密码。

否则你应该找一份更理智的工作;-)

# html - 来自网络上另一台服务器的 SQL SERVER 连接

> ID：11557984
> 
> 赞同：1
> 
> 时间：2012-07-19T09:38:34.970
> 
> 标签：html, sql, sql-server, asp-classic, odbc

我无法连接到另一台服务器上的数据库。我已经设置了在测试中完美运行的 DSN。但是，当使用以下代码运行 asp 脚本时：

```
<%
Dim rsGetInvoiceContact
Dim rsGetInvoiceContact_numRows

Set rsGetInvoiceContact = Server.CreateObject("ADODB.Recordset")
rsGetInvoiceContact.ActiveConnection = MM_conn_to_EFACs_STRING_ap
rsGetInvoiceContact.Source = "SELECT *   from "& ActinicPersons &" p  WHERE p.[Contact ID] = " + Replace(rsGetInvoiceContact__vInvoiceID, "'", "''") + "" 
rsGetInvoiceContact.CursorType = 0
rsGetInvoiceContact.CursorLocation = 2
rsGetInvoiceContact.LockType = 1
rsGetInvoiceContact.Open()

rsGetInvoiceContact_numRows = 0
%> 
```

使用以下连接字符串：

```
Dim MM_conn_to_EFACs_STRING_ap
MM_conn_to_EFACs_STRING_ap = "dsn=DSNefacsdb2;uid=IUSR_RFS01;pwd=Splendid01;" 
```

运行脚本后显示错误：

```
[Microsoft][ODBC SQL Server Driver][SQL Server]OLE DB provider 'MSDASQL' reported an error. The provider did not give any information about the error.

/Sales/order_entry.asp, line 55 
```

当对本地数据库运行脚本时，它可以按我的意愿工作，我已经为用户 IUSR_RFS01 调整了其他数据库的所有权限，但仍然没有乐趣！:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T12:15:31.623

iusr 不是您想要的，而是连接到 SQL 服务器的用户帐户。

实际检查服务器上的防火墙是否打开？您可能必须在防火墙上允许/配置某些端口才能工作。

或者检查 SQL 服务器是否允许对其进行远程连接。

# api - Why use an API key and secret?

> ID：11557985
> 
> 赞同：106
> 
> 时间：2012-07-19T09:38:37.530
> 
> 标签：api, security, authentication, api-key, secret-key

I came across many APIs that give the user both an API **key** and a **secret**. But my question is: what is the difference between both?

In my eyes, one key can be enough. Say I have a key and only I and the server know it. I create a HMAC hash with this key and do an API call. On the server, we create the HMAC hash again and compare it with the sent hash. If it's the same, the call is authenticated.

So why use two keys?

**Edit:** or is that API key used to lookup the API secret?

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-07-19T13:30:37.637

**You need two separate keys, one that tells them who you are, and the other one that proves you are who you say you are**.

The "key" is your user ID, and the "secret" is your password. They just use the "key" and "secret" terms because that's how they've implemented it.

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2012-07-19T09:47:46.337

Secret key cryptography relies on using the same key to encode and then later decode a message. Thus, only those who know the "secret" can read the message.

RSA security is based on 2 matching keys. There is a public key for each user, and everybody can (should) know it. There is also a private key that only the user should know. A message encrypted by the public key can only be decrypted by the private key, and visa versa.

Thus, if I want to send you a message that only you can read, I get (from the network) your public key, encrypt the message with that key and you are the only person who can decrypt it.

Or, if I want to prove to you that I sent a message, I can encrypt the message with my private key, tell you (in open text or in another message) how it was encrypted. Then you could decrypt the message with my public key, and if it becomes readable, you know it came from me.

This form of encryption is fairly computer intensive, so what sometimes done is, to encrypt a one-time "secret key" with RSA technology is used, then encrypt the rest of the message with the secret key, then encrypt my signature in the second fashion. You then reverse this process, so if the message and the signature are readable, you and only you can read it and you are ensured that I sent the message.

OR

you can visit this link for more detailed explanation.

[How do API Keys and Secret Keys work?](https://stackoverflow.com/questions/2674445/how-do-api-keys-and-secret-keys-work)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-12-30T23:27:04.117

Simple answer, if I understood it correctly...

If you use your API key for encryption, how will the service know who is contacting them? How will they decrypt that message?

You use API key to state who you are, this is what you are sending in plain text. The SECRET key you **do not send** to anyone. You simply use it for encryption. Then you send the encrypted message. You do not send the key that was used for encryption, that would defeat the purpose.

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2020-05-07T18:05:06.637

One thing that I did not see mentioned here, although it is an extension of Marcus Adams's answer, is that you should not be using a single piece of information to both identify and authenticate a user if there is a possibility of [timing attacks](https://en.wikipedia.org/wiki/Timing_attack), which can use the differences in response times to guess how far a string comparison got.

If you are using a system which uses a "key" to look up the user or credential, that piece of information could be incrementally guessed over time by sending thousands of requests and examining the time that it takes for your database to find (or not find) a record. This is especially true if the "key" is stored in plaintext instead of a one-way hash of the key. You would want to store users's keys in a plaintext or symmetrically-encrypted for if you need to be able to display the key to the user again.

By having a second piece of information, or "secret", you can first look up the user or credential using the "key", which could be vulnerable to a timing attack, then use a timing-safe compare function to check the value of the "secret".

Here is Python's implementation of that function:

[https://github.com/python/cpython/blob/cd8295ff758891f21084a6a5ad3403d35dda38f7/Modules/_operator.c#L727](https://github.com/python/cpython/blob/cd8295ff758891f21084a6a5ad3403d35dda38f7/Modules/_operator.c#L727)

And it is exposed in the `hmac` lib (and probably others):

[https://docs.python.org/3/library/hmac.html#hmac.compare_digest](https://docs.python.org/3/library/hmac.html#hmac.compare_digest)

* * *

One thing to note here is that I don't think that this kind of attack will work on values that are hashed or encrypted before lookup, because the values that are being compared change randomly each time a character in the input string changes. I found a good explanation of this [here](https://security.stackexchange.com/a/224272/52971).

Solutions for storing API keys would then be:

1.  Use a separate key and secret, use the key to look up the record, and use a timing-safe compare to check the secret. This allows you to show the user the key and secret to a user again.
2.  Use a separate key and secret, use symmetrical, deterministic encryption on the secret, and do a normal comparison of encrypted secrets. This allows you to show the user the key and secret again, and could save you from having to implement a timing-safe comparison.
3.  Use a separate key and secret, display the secret, hash and store it, then do a normal comparison of the hashed secret. This removes the necessity to use two-way encryption, and has the added benefit of keeping your secret secure if the system is compromised. It has the downside that you cannot show the secret to the user again.
4.  Use a **single key**, show it to the user once, hash it, then do a normal lookup of the hashed or encrypted key. This uses a single key, but it is not able to be shown to the user again. Has the benefit of keeping keys secure if the system is compromised.
5.  Use a **single key**, show it to the user once, encrypt it, and do a normal lookup of the encrypted secret. Can be shown to the user again, but at the cost of having keys vulnerable if they system is compromised.

Of these, I think that 3 is the best balance of security and convenience. I have seen this implemented on many websites when getting keys issued.

Also, I invite any actual security experts to critique this answer. I just wanted to get this out there as another discussion point.

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-05-10T20:21:04.980

There are answers explaining what the secret and (public) key is. It's a public-private key pair that they give confusing names to. But nobody says why the APIs require both, and many APIs only give you one secret! I've also never seen any API's docs explain why they have two keys, so the best I can do is speculate...

It's best to put only your public key in your request and sign the request locally with your private key; sending anything more shouldn't be needed. But some get away with just having the secret in the request. Ok, any good API will use some transport security like TLS (usually over HTTPS). But you're still exposing your private key to the server that way, increasing the risk of them somehow mishandling it (see: GitHub and Twitter's password logging bug recently discovered). And HTTPS is theoretically just as secure, but there are always implementation flaws out there.

But many – actually most it seems – APIs have you send both keys in requests since that's easier than making people do their own signatures; can't have pure cURL examples otherwise! In that case, it's pointless to have them separate. I guess the separate keys are just for in case they change the API later to take advantage of them. Or some have a client library that might do it the more secure way.

# javascript - 如何删除draw2d中的连接？

> ID：11557987
> 
> 赞同：0
> 
> 时间：2012-07-19T09:38:40.670
> 
> 标签：javascript, draw2d-js

我想知道如何删除 draw2d 中的连接。我尝试了 disconnect() 方法，但似乎不起作用。这是我的代码

```
menu.appendMenuItem(new draw2d.MenuItem("Disconnect", null, function() {
        //draw2d.Connection.workflow.removeFigure(draw2d.Connection.prototype);
        var cmd =  new draw2d.CommandDelete(oThis);
        oThis.workflow.getCommandStack().excute(cmd);
    })); 
```

这里 o这是“draw2d.Connection”类型。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T09:56:00.220

你有没有打开过萤火虫错误控制台？

请在您每天创建大量消息之前检查此内容

将“执行”替换为“执行”，一切正常。

...对此感到抱歉....但是我已经阅读了您的其他帖子，我认为您没有尝试通过打开示例、jsdoc 或错误控制台来首先解决您的问题。

# jquery - 防止父页面在按钮单击时加载到 jquery 对话框中

> ID：11557988
> 
> 赞同：1
> 
> 时间：2012-07-19T09:38:43.237
> 
> 标签：jquery

我有一个 jquery 对话框，它通过 ajax 加载一个 php 文件（shopping_cart_temp.php）。php 文件有 3 个 ajax 按钮，删除、加 1 或减 1。所有 3 个按钮的 href 都是 #。问题是，当我单击 3 个 ajax 按钮中的任何一个时，父页面会加载到 jquery 对话框中，而不是完成 ajax 按钮操作。经过一番研究，我发现这可能是因为 event.preventDefault 或 onclick=return false; 不存在或不工作。我可以看到这个问题或类似的问题已经被问了很多次，但是我尝试的每个解决方案都对我不起作用。你能帮我解决这个问题吗？

```
 $info_box_contents[$cur_row][] = array('align' => 'center',
                                         'params' => 'class="productListing-data" valign="middle"',
                                         'text' => tep_draw_checkbox_field('cart_delete[]', $products[$i]['id']) .
                                         '<a class="cart-remove" style="visibility:hidden;" href="#" rel="' . $products[$i]['id'] . '">'
                                         . tep_image(DIR_WS_ICONS . 'cancel.png', TABLE_HEADING_REMOVE) . '</a>' .
                                         '<span style="display:none;" id="pn-' . $products[$i]['id'] . '">' .
                                         '<a href="' . tep_href_link(FILENAME_PRODUCT_INFO, 'products_id=' . $products[$i]['id']) . '">' . $products[$i]['name'] . '</a></span>')  ; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T13:10:31.420

是您`window.location`的按钮导致问题。

当您设置`window.location =`它加载父页面的 URL 时（因为动态内容不是子页面）。

要运行这些功能，我相信您需要查看 jQuery .load - [http://api.jquery.com/load/](http://api.jquery.com/load/)

# java - 登录和注销检查

> ID：11557989
> 
> 赞同：0
> 
> 时间：2012-07-19T09:38:44.580
> 
> 标签：java, mysql, hibernate

我是 java 初学者，在 mysql 数据库中记录登录和登录时间戳时有疑问。在这里我需要检查几个条件。1) 用户使用他的用户名和密码登录。那时，他的登录时间没有记录。2) 当用户点击账户中的登录按钮时，用户登录时间将被发送到数据库。

现在我遇到的问题是，1）我可以多次输入signIn时间，虽然没有记录signOut时间。2）当注销时，特定的注销时间记录在我登录的第一个时间戳。

任何人都可以建议我进行检查，以便每次登录都应该注销。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T11:12:25.577

我相信你应该做以下检查：

在“登录”( *SI1* ) 期间，检查该用户是否存在先前的“登录”( *SI0* ) 事件而没有相应的“退出”(SO0)。

如果您检测到没有相应*SO0*的此类 SI0 - 将此“登录”事件分配为*SI1*的“退出”时间，否则 - 照常营业。

这样，您始终会关闭用户之前的注册。

# eclipse - 在 web.xml 中存储外部 Web 服务

> ID：11557991
> 
> 赞同：0
> 
> 时间：2012-07-19T09:38:46.970
> 
> 标签：eclipse, web-services, jsp

如果我想在 web.xml 文件中存储外部 Web 服务 url，我必须如何进行？，以这种方式？：

```
<service-ref>
<service-ref-name>PublicApiService</service-ref-name>
 <service-interface>
</service-interface>
<wsdl-file>
    http://nxxxx/example/Services/PublicApiService.wsdl
</wsdl-file> 
```

如果 Web 服务是外部的，我应该在服务接口上放置什么？我用日食

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-31T17:54:25.287

您必须生成服务的客户端存根。您可以使用[ws-import](http://docs.oracle.com/javase/6/docs/technotes/tools/share/wsimport.html)生成客户端存根：

```
wsimport -p your.package.name -s gen -d bin http://nxxxx/example/Services/PublicApiService.wsdl 
```

这将生成所需的 Java 源文件。在您的项目根目录中执行它。

之后，您必须更改 web.xml 文件：

```
<service-ref>
    <service-ref-name>PublicApiService</service-ref-name>
    <service-interface>
        your.package.name.PublicApiService
    </service-interface>
    <wsdl-file>
        http://nxxxx/example/Services/PublicApiService.wsdl
    </wsdl-file>
</service-ref> 
```

# javascript - Jquery 提交与 javascript 提交

> ID：11557994
> 
> 赞同：10
> 
> 时间：2012-07-19T09:39:03.523
> 
> 标签：javascript, jquery, forms, html, submit

单击普通按钮时，我试图调用表单验证。这似乎适用于 jQuery，但不适用于普通的 javascript。**谁能解释 jquery 的 .submit() 和 javascript 的 .submit() 方法之间的区别？或者我做错了什么？**

```
<html>
<head>
<title>Form Submit</title>
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>

<script type="text/javascript">
function validateForm(form) {
  if (form.username.value=='') {
    alert('Username missing');
    return false;
  }
  return true;
}
</script>

</head>

<body>

<form action="index.php" name="loginform" method="post" onsubmit="return validateForm(this);">
  <input name="username" placeholder="username" required="required" type="text" />
  <input name="send1" type="button" value="Login1" onclick="$(document.forms.loginform).submit();" />
  <input name="send2" type="button" value="Login2" onclick="document.forms.loginform.submit();" />
  <input name="send3" type="submit" value="Login3" />
  <a href="" onclick="event.preventDefault(); $(document.forms.loginform).submit();"> Login4 </a>
  <a href="" onclick="event.preventDefault(); document.forms.loginform.submit();"> Login5 </a>
</form>

</body>
</html> 
```

![提交结果](../Images/c70d8babdb0f92105e50bed504daaab8.png)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-19T09:42:00.793

DOM`submit()`方法不会触发提交事件。jQuery 的。