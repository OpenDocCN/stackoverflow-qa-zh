# StackOverflow 问答 11973000-11973999

# c++ - pugixml：找出 xpath 是否匹配特定节点/属性

> ID：11973003
> 
> 赞同：1
> 
> 时间：2012-08-15T16:14:48.603
> 
> 标签：c++, xpath, pugixml

给定一个`xpath_query`和一个`xml_attribute`or `xml_node`，我想知道该属性或节点是否会被查询匹配。

我可以将查询评估为 an`xpath_node_set`然后检查节点是否在内部，如下所示：

```
bool match(const pugi::xpath_query& query, const pugi::xml_node& node)
{
    for (const auto& child : query.evaluate_node_set(node.parent()))
    {
        if (child.node() == node)
            return true;
    }
    return false;
} 
```

不过，这似乎有点贵。有没有更便宜的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T03:24:51.073

**使用**：

```
 count(expressionSelectingTheNode | theQuery) = count(theQuery) 
```

您需要用正确的表达式替换上面的“expressionSelectingTheNode”和“theQuery”。

`true()`当且仅当表达式选择的单个节点是表达式选择`expressionSelectingTheNode`的节点之一时才会返回`theQuery`。

**示例**：

如果我们有这个 XML 文档：

```
<nums>
  <num>01</num>
  <num>02</num>
  <num>03</num>
  <num>04</num>
  <num>05</num>
  <num>06</num>
  <num>07</num>
  <num>08</num>
  <num>09</num>
  <num>10</num>
</nums> 
```

**节点为**（由 选择`/*/num[. = 6]`）：

```
 <num>06</num> 
```

**并且表达式是**（选择`num`值既是 2 的倍数又是 3 的倍数的所有元素）：

```
/*/num[. mod 2 = 0 and . mod 3 = 0] 
```

**然后我们评估这个表达式**：

```
 count(/*/num[. = 6] | /*/num[. mod 2 = 0 and . mod 3 = 0])
  =
   count(//*/num[. mod 2 = 0 and . mod 3 = 0]) 
```

**结果是`true()`。**

如果我们评估这个表达式（想看看是否`<num>05</num>`也被选中）：

```
 count(/*/num[. = 5] | /*/num[. mod 2 = 0 and . mod 3 = 0])
  =
   count(//*/num[. mod 2 = 0 and . mod 3 = 0]) 
```

结果是现在`false()`。

# sql - SQL 不应该返回任何东西，但确实

> ID：11973009
> 
> 赞同：2
> 
> 时间：2012-08-15T16:15:19.057
> 
> 标签：sql

我遇到了以下 SQL 语句：

```
 SELECT A.NAME
    FROM   THE_TABLE A
    WHERE  A.NAME LIKE '%JOHN%DOE%'
    AND    ((A.NUM_FIELD/1) - (A.NUM_FIELD/2)*2 <> 0) 
```

最后一个条件`"((A.NUM_FIELD/1) - (A.NUM_FIELD/2)*2 <> 0)"`让我感到困惑。根据操作顺序的实现，它应该总是导致`0`or `A.NUM_FIELD / 2`。

SQL 如何仍然从这个视图返回记录？如果它总是导致原始值的一半，为什么要有它？（这是一个交付的 SQL 包）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-15T16:20:39.207

可能是整数除法，所以奇数`NUM_FIELD`会少一。

[MSDN](http://msdn.microsoft.com/en-us/library/ms175009.aspx)说：

> 如果整数被除数除以整数除数，则结果是一个整数，结果的任何小数部分都被截断。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T16:23:32.683

如果 NUM_FIELD 是一个整数，并且是一个奇数，那么

```
(A.NUM_FIELD/1) - (A.NUM_FIELD/2)*2 
```

等于一

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T17:00:58.433

这是什么 SQL 实现？

如前所述，

```
(x/1) - (x/2)*2 
```

相当于

```
X - (2*(x/2)) 
```

其中，如果正在执行整数除法，则根据值是偶数还是奇数产生 0 或 1：

```
x x/2 2*(x/2) x-(2*(x/2))
- --- ------- -----------
0   0       0           0
1   0       0           1
2   1       2           0
3   1       2           1
4   2       4           0
... 
```

如果是这样，这似乎是一种检查奇/偶值的奇怪方式，特别是因为我知道的大多数 SQL 实现都支持*模*运算符或函数，要么`x % y`要么`mod(x,y)`。

看似无关的除以 1 让我认为有问题的列可能是浮点数。也许编写查询代码的人正试图检查浮点列的低位中的抖动或模糊性？

如果您修改查询以返回计算的所有中间值：

```
SELECT A.NAME                    as Name      ,
       A.NUM_FIELD               as X         ,
       A.NUM_FIELD / 1           as X_over_1  ,
       A.NUM_FIELD / 2           as X_over_2  ,
       ( X.NUM_FIELD / 2 )
       * 2                       as 2x_over_2 ,
         ( A.NUM_FIELD / 1 )
       - ( A.NUM_FIELD / 2 ) * 2 as Delta ,
       case when ( ( A.NUM_FIELD / 1 ) - ( A.NUM_FIELD / 2 ) * 2 ) <> 0
       then 'return'
       else 'discard'
       end as Row_Status
FROM   THE_TABLE A
WHERE  A.NAME LIKE '%JOHN%DOE%' 
```

然后执行它，你得到什么结果？

# java - Java - 相同 TCP IP 的不同套接字

> ID：11973011
> 
> 赞同：0
> 
> 时间：2012-08-15T16:15:27.877
> 
> 标签：java, thread-safety, socket.io

我想通过使用套接字为读写方法创建不同的线程。我想知道我应该使用不同的套接字还是相同的套接字来共享两个线程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T16:18:09.710

如果您正在读取和写入同一个设备/对象，我会使用同一个线程。这样，当您还没有写入内容时，它就不会尝试读取某些内容。如果您不小心，执行多个线程可能会导致大量错误，例如空值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T17:02:19.607

**1.**创建**一个套接字对象**。

**2.**使用任意数量的线程来访问该对象，但**请注意进行写入和读取操作** `Thread-Safe`。

**3.**尝试使用`ServerChannel`and `ServerSocketChannel`from`java.util.nio`包，它是**Asynchronous**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T16:39:49.720

您可以使用同一个套接字进行读取和写入。当然，两个端点之一必须打开一个服务器套接字。然后你可以让 1 个线程阻塞等待输入数据，而另一个线程可以在需要时输出数据

# android - 以编程方式添加多个片段

> ID：11973016
> 
> 赞同：1
> 
> 时间：2012-08-15T16:15:46.497
> 
> 标签：android, android-fragments

关于项目的简短信息：

*   minSDK = 8
*   导入 android.support.v4

部分类代码：

```
public class DetailsActivity extends FragmentActivity implements ToplineTrigger {

static Context mContext;

private static FragmentManager fm;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.details);
    if (mContext == null)
        mContext = Pleazzme.getAppContext();

    DetailsTitleFragment title = new DetailsTitleFragment();
    DocumentDescriptionWeb description = new DocumentDescriptionWeb();
    getSupportFragmentManager()
            .beginTransaction()
            .add(R.id.detailstitlefragment_wrap, title, "DetailsTitle")
            .add(R.id.documentdescriptionweb_wrap, description, "WebDescription")
            .commit();

    ((Topline) fm.findFragmentByTag("Topline")).setDetailsMode();
}; 
```

xml视图：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/details_contentwrapper"
android:layout_width="wrap_content"
android:layout_height="match_parent"
android:orientation="vertical" >

<fragment
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    class="com.mtechnologia.pleazzme.Topline"
    android:tag="Topline" />

<FrameLayout
    android:id="@+id/detailstitlefragment_wrap"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >
</FrameLayout>

<FrameLayout
    android:id="@+id/documentdescriptionweb_wrap"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >
</FrameLayout>
</LinearLayout> 
```

类声明：

```
public class DetailsTitleFragment extends ListFragment{...}

public class DocumentDescriptionWeb extends Fragment {

WebView mWebView = null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    return inflater.inflate(R.layout.simplewebview, container);
}

@Override
public void onViewCreated(View view, Bundle savedInstanceState) {
    super.onViewCreated(view, savedInstanceState);
    mWebView = (WebView) view.findViewById(R.id.simplewebview);
    mWebView.getSettings().setJavaScriptEnabled(false);
    mWebView.getSettings().setSupportZoom(false);

    String data = "asdasdasd";
    mWebView.loadData(data, "text/html", "utf-8");
}

} 
```

代码运行后我得到错误：

```
08-15 19:11:08.003: E/AndroidRuntime(24708): FATAL EXCEPTION: main
08-15 19:11:08.003: E/AndroidRuntime(24708): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.mtechnologia.pleazzme/com.mtechnologia.pleazzme.DetailsActivity}: java.lang.IllegalStateException: The specified child already has a parent. You must call removeView() on the child's parent first.
08-15 19:11:08.003: E/AndroidRuntime(24708):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1967)
08-15 19:11:08.003: E/AndroidRuntime(24708):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1992)
08-15 19:11:08.003: E/AndroidRuntime(24708):    at android.app.ActivityThread.access$600(ActivityThread.java:127)
08-15 19:11:08.003: E/AndroidRuntime(24708):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1158)
08-15 19:11:08.003: E/AndroidRuntime(24708):    at android.os.Handler.dispatchMessage(Handler.java:99)
08-15 19:11:08.003: E/AndroidRuntime(24708):    at android.os.Looper.loop(Looper.java:137)
08-15 19:11:08.003: E/AndroidRuntime(24708):    at android.app.ActivityThread.main(ActivityThread.java:4511)
08-15 19:11:08.003: E/AndroidRuntime(24708):    at java.lang.reflect.Method.invokeNative(Native Method)
08-15 19:11:08.003: E/AndroidRuntime(24708):    at java.lang.reflect.Method.invoke(Method.java:511)
08-15 19:11:08.003: E/AndroidRuntime(24708):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
08-15 19:11:08.003: E/AndroidRuntime(24708):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
08-15 19:11:08.003: E/AndroidRuntime(24708):    at dalvik.system.NativeStart.main(Native Method)
08-15 19:11:08.003: E/AndroidRuntime(24708): Caused by: java.lang.IllegalStateException: The specified child already has a parent. You must call removeView() on the child's parent first.
08-15 19:11:08.003: E/AndroidRuntime(24708):    at android.view.ViewGroup.addViewInner(ViewGroup.java:3342)
08-15 19:11:08.003: E/AndroidRuntime(24708):    at android.view.ViewGroup.addView(ViewGroup.java:3213)
08-15 19:11:08.003: E/AndroidRuntime(24708):    at android.view.ViewGroup.addView(ViewGroup.java:3170)
08-15 19:11:08.003: E/AndroidRuntime(24708):    at android.view.ViewGroup.addView(ViewGroup.java:3150)
08-15 19:11:08.003: E/AndroidRuntime(24708):    at android.support.v4.app.NoSaveStateFrameLayout.wrap(NoSaveStateFrameLayout.java:40)
08-15 19:11:08.003: E/AndroidRuntime(24708):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:875)
08-15 19:11:08.003: E/AndroidRuntime(24708):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1083)
08-15 19:11:08.003: E/AndroidRuntime(24708):    at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:635)
08-15 19:11:08.003: E/AndroidRuntime(24708):    at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1431)
08-15 19:11:08.003: E/AndroidRuntime(24708):    at android.support.v4.app.FragmentActivity.onStart(FragmentActivity.java:523)
08-15 19:11:08.003: E/AndroidRuntime(24708):    at android.app.Instrumentation.callActivityOnStart(Instrumentation.java:1136)
08-15 19:11:08.003: E/AndroidRuntime(24708):    at android.app.Activity.performStart(Activity.java:4480)
08-15 19:11:08.003: E/AndroidRuntime(24708):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1940)
08-15 19:11:08.003: E/AndroidRuntime(24708):    ... 11 more 
```

有人可以告诉我，我做错了什么吗？
我知道，我可以在 XML 中声明这两个片段，但我需要以编程方式添加这些片段，以便在需要时替换它们。在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-15T16:25:44.697

你需要改变

```
inflater.inflate(R.layout.simplewebview, container); 
```

到

```
inflater.inflate(R.layout.simplewebview, container, false); 
```

将该属性设置为`false`将确保视图与从视图传入的父容器分离。`View`从中返回的不能`onCreateView()`附加到父级，因为系统本身很快就会将其添加到容器中。

# netstat - netstat 命令显示 SYN_RECV

> ID：11973022
> 
> 赞同：1
> 
> 时间：2012-08-15T16:15:55.380
> 
> 标签：netstat

我正在使用 tcpsockets。突然间，我的连接进入了 SYN_RECV 状态。这是 netstat 的输出。有什么线索吗？

```
tcp        0      0 n2cbaq112:11021       n3bvap112:57150 SYN_RECV
tcp        0      0 n2cbaq112:11021       n3bvap112:46137 SYN_RECV 
```

# postgresql - PostgreSQL 事务 ID 倒退

> ID：11973023
> 
> 赞同：0
> 
> 时间：2012-08-15T16:15:57.167
> 
> 标签：postgresql, transactions

在 PostgreSQL 9.0 中，我有一个记录最后处理的事务的表。出于某种原因，它倒退了（及时）！这是表格数据：

```
seq_id | tx_id
   628 | 10112
   629 | 10118
   630 | 10124
   631 | 10130
   632 | 10136
   654 | 10160
   655 | 10166  <---
   656 |  4070  <---
   657 |  4071
   658 |  4084
   659 |  4090
   660 |  4096 
```

这怎么可能发生？重新启动数据库会导致这种行为吗？

感谢您的任何提示。

问候，

D.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T14:39:50.887

这是一个无效的问题。请忽略。

事实证明，问题出在从备份中恢复表并在新创建的数据库中继续使用（无效的）以前的数据:-(

感谢所有已经回复的人。

结案。

**经验教训**：TXID 不会倒退，如果您使用主/从设置，它们确实会同步到从属实例。TXID 翻转也得到了正确处理。希望这将有助于其他可能认为 TXID 可以倒退的人！

# python - 使用未知数量的参数调用python函数

> ID：11973028
> 
> 赞同：8
> 
> 时间：2012-08-15T16:16:34.977
> 
> 标签：python, arguments

我正在编写一个小脚本，我在其中调用 itertools.product，如下所示：

```
for p in  product(list1,list2,list3):
            self.createFile(p) 
```

有没有办法让我在事先不知道要包含多少个列表的情况下调用这个函数？

谢谢

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-15T16:17:30.067

您可以使用 star 或 splat 运算符（它有几个名称）： `for p in product(*lists)`where`lists`是要传递的元组或列表。

```
def func(a,b):
    print (a,b)

args=(1,2)
func(*args) 
```

在定义一个函数以允许它接受可变数量的参数时，您可以做类似的事情：

```
def func2(*args): #unpacking
   print(args)  #args is a tuple

func2(1,2)  #prints (1, 2) 
```

当然，您可以将 splat 运算符与可变数量的参数结合使用：

```
args = (1,2,3)
func2(*args) #prints (1, 2, 3) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-15T16:17:57.517

使用 splat operator( `*`) 传递和收集未知数量的参数位置参数。

```
def func(*args):
   pass

lis = [1,2,3,4,5]
func(*lis) 
```

# c# - 模型绑定正在绑定我的 json 数组，但不是值

> ID：11973029
> 
> 赞同：4
> 
> 时间：2012-08-15T16:16:37.143
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3, model-binding

我正在使用 ASP.NET MVC 3，并且正在尝试将简单的 json 数组绑定到`List<JsonPositions>`. `JsonPositions`是一个自定义对象，与数组中的 json 对象具有相同的属性。

这是我的数组在客户端上的样子：

```
var widgetPositions = [
    { col: 5, row: 1, id: 2 },
    { col: 4, row: 5: id: 40 }
];

$.ajax({
    url: 'the url',
    data: { positions: widgetPositions },
    success: function () {
        alert('Save successful.');
    },
    error: function () {
        alert('An error occurred while trying to update the widget positions.');
    }
}); 
```

在 Chrome 中检查请求时，此代码似乎工作正常。

[![](../Images/9cf0525ab861b105f34f1348c0ea159c.png)](https://i.imgur.com/0wDWe.jpg)

在控制器中，我们有以下操作方法：

```
public void UpdatePositions(List<JsonPosition> positions)
{
    // debugging here
} 
```

当我检查`widgetPositions`列表时，它确实有两个项目，就像 json 数组一样，但是对象的属性与客户端上对象的值不匹配。这是对象的`JsonPosition`样子：

```
public class JsonPosition
{
    public int id { get; set; }
    public int col { get; set; }
    public int row { get; set; }
} 
```

[![](../Images/8ce02f8903663b29a32f650ebe6e2c75.png)](https://i.imgur.com/waHx7.jpg)

谢谢你的尽心帮助 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T16:23:51.917

我认为您可能需要添加内容类型：

```
$.ajax({
    url: 'the url',
    data: JSON.stringify({ positions: widgetPositions }),
    contentType: 'application/json',
    success: function () {
        alert('Save successful.');
    },
    error: function () {
        alert('An error occurred while trying to update the widget positions.');
    }
}); 
```

此外，您没有指定请求类型，因此默认情况下它会执行 GET，您的意思是执行 POST 吗？那会让它

```
$.ajax({
    url: 'the url',
    type: 'POST',
    data: JSON.stringify({ positions: widgetPositions }),
    contentType: 'application/json',
    success: function () {
        alert('Save successful.');
    },
    error: function () {
        alert('An error occurred while trying to update the widget positions.');
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T16:51:14.477

您可以将它们作为 JSON 对象发送：

```
var widgetPositions = [
    { col: 5, row: 1, id: 2 },
    { col: 4, row: 5: id: 40 }
];

$.ajax({
    url: 'the url',
    data: JSON.stringify({ positions: widgetPositions }),
    contentType: 'application/json',
    success: function () {
        alert('Save successful.');
    },
    error: function () {
        alert('An error occurred while trying to update the widget positions.');
    }
}); 
```

需要注意的事情是你的代码中没有，这将使它工作：

*   `contentType: 'application/json',`- 设置正确的请求内容类型标头
*   `data: JSON.stringify({ positions: widgetPositions })`- 发送 JSON 请求

现在你会很高兴在这里得到你需要的一切：

```
public void UpdatePositions(List<JsonPosition> positions)
{
    // debugging here
} 
```

备注：该`JSON.stringify`方法在所有现代浏览器中都原生定义（即使在 IE8 中，即使这远非现代浏览器）。但是如果您需要支持一些史前浏览器，您可以在页面中包含[json2.js](http://www.json.org/js.html)脚本，该脚本将检查浏览器是否原生支持此方法，如果不提供实现。

# castle-windsor - MassTransit 2.6.1 请求/响应模式 - 响应超时

> ID：11973031
> 
> 赞同：4
> 
> 时间：2012-08-15T16:17:02.337
> 
> 标签：castle-windsor, log4net, msmq, masstransit

我正在将 MassTransit 视为要在 Web 项目中使用的 ServiceBus 实现。

我正在使用[请求/响应](http://docs.masstransit-project.com/en/latest/overview/request.html)模式，并且看到消费者接收消息和响应与请求发布者处理响应之间存在很长的延迟；有时，似乎响应永远不会通过（让它运行了 10 分钟，响应仍然没有通过）。我看到句柄委托被调用并响应的唯一时间是在 30 秒超时时间之后并抛出超时异常；在这种情况下，处理程序委托上设置的断点被命中。

设置是标准事务 - 我有一个正在发布请求的 Web 应用程序，一个正在使用请求和发送响应的控制台应用程序，以便 Web 应用程序处理回调中的响应。

我正在使用 Castle Windsor，并且容器在 Web 项目中使用 WebActivator 进行了初始化：

```
[assembly: WebActivator.PreApplicationStartMethod(typeof(BootStrapper), "PreStart")]
[assembly: WebActivator.PostApplicationStartMethod(typeof(BootStrapper), "PostStart")]
[assembly: WebActivator.ApplicationShutdownMethodAttribute(typeof(BootStrapper), "Stop")]

namespace Web.App_Start
{
    public static class BootStrapper
    {
        internal static IWindsorContainer Container { get; private set; }

        public static void PreStart()
        {
            Container = new WindsorContainer().Install(FromAssembly.This());
        }

        public static void PostStart()
        {
            FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
            RouteConfig.RegisterRoutes(RouteTable.Routes);
            BundleConfig.RegisterBundles(BundleTable.Bundles);

            ApiConfig.Configure(Container);
            MvcConfig.Configure(Container);
        }

        public static void Stop()
        {
            if (Container != null)
                Container.Dispose();
        }
    }
} 
```

**在 Web 应用程序项目**（一个 ASP.NET Web API 项目）中，MassTransit 的 WindsorInstaller 看起来像

```
public class MassTransitInstaller : IWindsorInstaller
{
    public void Install(IWindsorContainer container, IConfigurationStore store)
    {
        container.Register(AllTypes.FromThisAssembly().BasedOn<IConsumer>());

        var bus = ServiceBusFactory.New(configurator =>
        {
            configurator.UseMsmq();
            configurator.VerifyMsmqConfiguration();            
            configurator.UseMulticastSubscriptionClient();

            configurator.ReceiveFrom("msmq://localhost/web");

            configurator.EnableMessageTracing();
            configurator.Subscribe(x => x.LoadFrom(container));
        });

        container.Register(Component.For<IServiceBus>().Instance(bus));
    }
} 
```

**在控制台应用程序项目**中，WindsorInstaller 看起来像

```
public class MassTransitInstaller : IWindsorInstaller
{
    public void Install(IWindsorContainer container, IConfigurationStore store)
    {
        container.Register(AllTypes.FromAssemblyContaining<BasicRequestCommandHandler>().BasedOn<IConsumer>());

        var bus = ServiceBusFactory.New(configurator =>
        {
            configurator.UseMsmq();
            configurator.VerifyMsmqConfiguration();
            configurator.UseMulticastSubscriptionClient();

            configurator.ReceiveFrom("msmq://localhost/console");

            configurator.Subscribe(x => x.LoadFrom(container));
        });

        container.Register(Component.For<IServiceBus>().Instance(bus));
    }
} 
```

我有一个`ApiController`使用以下 GET 操作方法

```
public class ExampleController : ApiController
{
    private readonly IServiceBus _bus;

    public HelloController(IServiceBus bus)
    {
        _bus = bus;
    }

    // GET api/hello?text={some text}
    public Task<IBasicResponseCommand> Get(string text)
    {
        var command = new BasicRequestCommand {Text = text};

        var tcs = new TaskCompletionSource<IBasicResponseCommand>();

        _bus.PublishRequest(command, c =>
        {
            c.Handle<IBasicResponseCommand>(r =>
            {
                tcs.SetResult(r);
            });
        });

        return tcs.Task;
    }
} 
```

BasicRequestCommand 和 BasicResponseCommand 看起来像这样

```
public interface IBasicRequestCommand
{
    Guid CorrelationId { get; set; }
    string Text { get; set; }
}

public class BasicRequestCommand :
    CorrelatedBy<Guid>, IBasicRequestCommand
{
    public Guid CorrelationId { get; set; }
    public string Text { get; set; }

    public BasicRequestCommand()
    {
        CorrelationId = Guid.NewGuid();
    }
}

public interface IBasicResponseCommand
{
    Guid CorrelationId { get; set; }
    string Text { get; set; }
}

public class BasicResponseCommand :
    CorrelatedBy<Guid>, IBasicResponseCommand
{
    public Guid CorrelationId { get; set; }
    public string Text { get; set; }
} 
```

以及响应控制台应用程序中的 BasicRequestCommand 的处理程序：

```
public class BasicRequestCommandHandler : Consumes<IBasicRequestCommand>.Context
{
    public void Consume(IConsumeContext<IBasicRequestCommand> context)
    {
        Console.Out.WriteLine("received message text " + context.Message.Text);

        context.Respond(new BasicResponseCommand { Text = "Hello " + context.Message.Text, CorrelationId = context.Message.CorrelationId });
    }
} 
```

我预计所有这些都在本地运行，请求/响应最多大约几秒钟。我在配置中遗漏了什么吗？

此外，我想将 MassTransit 连接到 log4net。我正在使用 Windsor 的 log4net 日志记录工具，并且在 web.config 中有一个 log4net 部分。这对于`ILogger`Windsor 提供的实现（以及 NHibernate 日志记录）都可以正常工作，但是[从文档中不清楚如何配置 MassTransit 以将其用于日志记录](http://docs.masstransit-project.com/en/latest/overview/logging.html)。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T17:15:51.143

正如 Andrei Volkov 和 Chris Patterson在 MassTransit google group 上[讨论](https://groups.google.com/forum/?fromgroups=#!searchin/masstransit-discuss/SynchronizationContext/masstransit-discuss/oC1FOe6KsAU/YUrKZKiscD8J)​​的那样，这个问题似乎源于将 MassTransit[切换](https://github.com/phatboyg/MassTransit/commit/0000e38f775507b10e9fef9bbc3862532ec8cb2c)到 using `SynchronizationContext`，由于某种原因无法按预期工作。

目前，一种解决方法似乎是转换到异步 MassTransit 请求，或者返回到不使用违规的 v2.1.1 `SynchronizationContext`。

*（如果没有其他人先这样做，将在此处发布有关此问题的更新以供后代使用。）*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-14T21:30:23.983

ASP.NET 中请求/响应的响应超时问题已在 2.6.2 版本中修复。 [https://groups.google.com/d/topic/masstransit-discuss/oC1FOe6KsAU/discussion](https://groups.google.com/d/topic/masstransit-discuss/oC1FOe6KsAU/discussion)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T16:29:05.020

当您使用 MultiCastSubscriptionClient 时，您必须`SetNetwork(NETWORK_KEY)`在每台机器上调用（对 NETWORK_KEY 使用相同的值）。此外，所有参与的机器都需要在同一个子网上 - 请参阅[http://masstransit.readthedocs.org/en/latest/overview/subscriptions.html#msmq-multicast上的文档](http://masstransit.readthedocs.org/en/latest/overview/subscriptions.html#msmq-multicast)

对于连接 log4net，这取决于您使用的版本，但在最新版本中，您包含 MassTransit.Log4NetIntegration 程序集，然后调用`cfg.UseLog4Net();`您的服务总线配置。

如果您仍然卡住，您可以在[https://groups.google.com/forum/?fromgroups#!forum/masstransit-discuss询问 MT 邮件列表](https://groups.google.com/forum/?fromgroups#!forum/masstransit-discuss)

# xml - hibernate xml 一对多 JOIN 三张表

> ID：11973033
> 
> 赞同：0
> 
> 时间：2012-08-15T16:17:02.580
> 
> 标签：xml, hibernate, one-to-many

我是冬眠新手；继承的代码库使用使用 .hbm.xml 文件的旧版本（无注释）

我有一个表（比如表 A），它与几个表（表 B 和 C）具有一对多的休眠关系，“懒惰”属性设置为 false；当我在做 hiberateTemplate.load(Table a) 时，它会从所有三个表中获取数据。我的情况是我需要针对其中一个子表（表 B）进行连接，并在表 B 中查找特定字段值并从所有 A、B、C 中获取记录，仅针对表 B 中的匹配字段值（表 B特定领域）。

表A（事件）

```
 <set name="eventKeyIdentifiers" table="EventKeyIdentifier"
            inverse="true" lazy="false" fetch="select">
        <key>
            <column name="eventId" not-null="true" />
        </key>
        <one-to-many class="event.EventKeyIdentifiers" />
    </set>    

    <set name="eventStatuses" table="EventStatus"
            inverse="true" lazy="false" fetch="select" order-by="effectiveDate DESC">
        <key>
            <column name="eventId" not-null="true" />
        </key>
        <one-to-many class="event.EventStatuses" />
    </set> 
```

表 B（事件状态）

```
 <many-to-one name="event" class="event.Event" update="false" insert="false" fetch="select">
        <column name="eventId" length="36" not-null="true" />
    </many-to-one>

    <property name="statusCode" type="string">
        <column name="statusCode" length="100" not-null="true" />
    </property> 
```

表 A（事件）需要为特定的“状态代码”（表 B）加载

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T15:38:44.130

DetchedCriteria 有帮助！

```
 DetachedCriteria criteria = DetachedCriteria.forClass(Event.class)
                                    .addOrder(Order.desc("eventProcessedDate"))
                                    .createAlias("eventStatuses", "evtStats")
                                    .add(Restrictions.naturalId()
                                        .set("evtStats.statusCode", status)); 
```

# iphone - 在 Provisioning Portal 中找不到具有 BundleID 的应用

> ID：11973038
> 
> 赞同：0
> 
> 时间：2012-08-15T16:17:18.373
> 
> 标签：iphone, objective-c, ios, app-store-connect, ios-provisioning

我在itunesconnect上有一个带有BundleID的应用程序“TestApp”：ABCD12234.com.mycompany.testapp。在我的供应门户中，没有具有 AppID：ABCD12234.com.mycompany.testapp 的应用程序，但我有一个具有 AppID：EFGH5678.com.mycompany.testapp 的应用程序因此具有相同的捆绑标识符但不同的捆绑种子 ID。

我现在想在 itunesconnect 上向 TestApp 推送更新。我怎样才能做到这一点？或者我什至可以这样做吗？

谢谢！

# django - Django中图像的动态文件路径

> ID：11973041
> 
> 赞同：1
> 
> 时间：2012-08-15T16:17:30.043
> 
> 标签：django, django-media

我正在尝试在 django 中生成动态文件路径。我想做一个这样的文件系统

```
hierarchy: 
```

> ```
>  --user_12
>   --channel_14
>    --program 2
>     --image1.jpg
>     --image2.jpg
>    --program 1
>     --image1.jpg
>     --image2.jpg
>  --user_14
>   --channel_13
>    --program 1
>     --image1.jpg
>     --image2.jpg 
> ```

当用户要上传图片时，它会将图片上传到相应的程序文件夹。如果程序文件夹没有创建，它会自动创建一个文件夹并存储图片。

我的图像路径将如下所示： media/images/john/johnchannel/birthday/img1.jpg （其中 john=user,johnchannel=channel,birthday=program,images 是应存储所有图像文件的预创建文件夹）我我在 Django 中很新。需要紧急帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T16:25:43.930

你在寻找这样的东西吗？

**杂项**

```
def get_upload_path(instance, filename):
    """ creates unique-Path & filename for upload """
    ext = filename.split('.')[-1]
    filename = "%s%s.%s" % ('img', instance.pk, ext)

    return os.path.join(
        'images', instance.user.username, instance.channel, instance.something, filename
        #images/     john/                johnchannel/       birthday/          img1.jpg
    ) 
```

**模型.py**

```
from misc import get_upload_path

class MyThing(models.Model):
    user = models.ForeignKey(User)
    channel = models.CharField(max_length=100) # johnchannel
    something = models.CharField(max_length=100) # birthday
    img = models.ImageField(upload_to=get_upload_path) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T16:26:07.660

在 Django 模型中使用 ImageField 时，您可以在`upload_to`关键字参数中指定可调用对象：[请参阅此处的 FileField 文档](https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.FileField)

因此，创建一个您将指向的函数`upload_to`，它可以根据需要生成所有子目录。

# joomla - 在 joomla 2.5 内容中加载页面标题

> ID：11973046
> 
> 赞同：0
> 
> 时间：2012-08-15T16:17:53.703
> 
> 标签：joomla, content-management-system, joomla2.5

我正在寻找一种在 Joomla 2.5 内容中加载页面标题以用于 SEO 的方法。我知道在 joomla 中你可以使用一个函数来加载一个模块，例如`{loadposition box1}`.

有没有办法拥有一个功能或者有人知道一个扩展，所以你可以做类似的事情`{loadpagetitle}`。

这将节省我的工作时间。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T16:48:59.327

首先，安装[Direct PHP](http://extensions.joomla.org/extensions/core-enhancements/coding-a-scripts-integration/custom-code-in-content/4470)插件并启用它。

然后将以下代码复制并粘贴到您的文章中：

```
<?php 
   $mydoc = JFactory::getDocument();
   $mytitle = $mydoc->getTitle();
   echo $mytitle; 
?> 
```

确保你使用`php`标签。

希望这可以帮助。问候。

# http - 在 nginx 中添加和使用标头 (HTTP)

> ID：11973047
> 
> 赞同：65
> 
> 时间：2012-08-15T16:17:55.153
> 
> 标签：http, nginx

我正在使用两个系统（都是 Nginx 负载均衡器，一个充当备份）。

我想添加和使用一些 HTTP 自定义标头。

以下是我的代码；

```
upstream upstream0 {
    #list of upstream servers
    server backend:80;
    server backup_load_balancer:777 backup;
    #healthcheck
}

server {
    listen 80;
    #Add custom header about the port and protocol  (http or https)
    server_name _;

    location / {
        # is included since links are not allowed in the post
        proxy_pass "http://upstream0;"
    }
} 
```

备份系统

```
server {
    listen 777;
    server_name _;
    #doing some other extra stuff
    #use port and protocol to direct
} 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：143
> 
> 时间：2012-08-15T17:10:46.883

要添加标头，只需将以下代码添加到要添加标头的位置块：

```
location some-location {
  add_header X-my-header my-header-content;      
} 
```

显然，将 x-my-header 和 my-header-content 替换为您要添加的内容。这就是它的全部。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-12-01T00:01:45.883

您可以使用上游标头（以 $http_ 开头）和其他自定义标头。例如：

```
add_header X-Upstream-01 $http_x_upstream_01;
add_header X-Hdr-01  txt01; 
```

接下来，转到控制台并使用用户的标头发出请求：

```
curl -H "X-Upstream-01: HEADER1" -I http://localhost:11443/ 
```

响应包含由服务器设置的 X-Hdr-01 和由客户端设置的 X-Upstream-01：

```
HTTP/1.1 200 OK
Server: nginx/1.8.0
Date: Mon, 30 Nov 2015 23:54:30 GMT
Content-Type: text/html;charset=UTF-8
Connection: keep-alive
X-Hdr-01: txt01
X-Upstream-01: HEADER1 
```

# c - numa：下一次接触政策

> ID：11973049
> 
> 赞同：1
> 
> 时间：2012-08-15T16:17:59.607
> 
> 标签：c, linux, memory, numa, mprotect

谁能解释如何在 NUMA 系统上使用“mprotect”来实施“next-touch”策略？假设我有一个整数数组 A，我使用“mprotect”保护它。接下来，每当任何线程尝试访问它时，我只会获得有关尝试访问的单个地址的信息（[c-sigsegv-handler-mprotect](https://stackoverflow.com/questions/2705792/c-sigsegv-handler-mprotect)）。接下来我该怎么做？如果有人可以根据“下一次接触”政策解释所需的所有步骤（从头开始），那就太好了，谢谢！

# javascript - 在 Windows 8 中将用户重定向到桌面浏览器

> ID：11973051
> 
> 赞同：5
> 
> 时间：2012-08-15T16:18:08.927
> 
> 标签：javascript, html, silverlight, windows-8

如果用户使用 windows 8 RT 浏览器访问我的网页，是否有办法强制或提示用户使用 windows 8 桌面浏览器？我希望能够使用像 Silverlight 这样的插件。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-15T16:54:19.040

是的，您可以提示用户切换到桌面版。微软将此添加为需要它的站点的后备。（但不适用于 JavaScript）

[http://blogs.msdn.com/b/ie/archive/2012/01/31/web-sites-and-a-plug-in-free-web.aspx](http://blogs.msdn.com/b/ie/archive/2012/01/31/web-sites-and-a-plug-in-free-web.aspx)

> 拥有需要插件的站点的开发人员可以使用 HTTP 标头或元标记向 Metro 风格的 Internet Explorer 发出信号以提示用户。
> 
> **HTTP 标头**
> 
> `X-UA-Compatible: requiresActiveX=true`
> 
> **元标记**
> 
> `<meta http-equiv="X-UA-Compatible" content="requiresActiveX=true" />`
> 
> Metro 风格的 IE10 会检测到这些标志，并为消费者提供在桌面上切换到 IE10 的一键式选项：

但是，Microsoft 强烈鼓励我们转向 HTM5 无插件世界。是否会发生这种情况还有待观察，但如果他们将来越来越难使用插件，我也不会感到惊讶。它们是大量安全漏洞的根源。

所以从长远来看，最好开始在代码中消除插件的使用。考虑到大量的 Android、IOS 和其他平板电脑和手机，这是有道理的。跨平台 Web 开发从未像现在这样重要，我打赌这将继续成为趋势。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-15T16:41:07.507

如果您将网站设计为仅限于在一个浏览器中使用，那么人们可能会完全避免使用它。我知道我会，除非它是我必须使用的网站。即银行网站，或工作的东西。

也许你应该做一个跨浏览器友好的网站，并为更多的增强功能创建一个APP？

# xcode - 情节提要中的 initWithNibName 方法

> ID：11973054
> 
> 赞同：11
> 
> 时间：2012-08-15T16:18:17.147
> 
> 标签：xcode, facebook, storyboard

我正在按照 Facebook 的教程发布到用户的墙上： http: [//developers.facebook.com/docs/howtos/publish-to-feed-ios-sdk/](http://developers.facebook.com/docs/howtos/publish-to-feed-ios-sdk/) 虽然它是在考虑 .xib 项目的情况下制作的，但我到目前为止，我的故事板项目已经能够很好地完成所有事情。但是，我已经到了需要将一些代码放入 initWithNibName:bundle: 方法的地步，但我不能这样做，因为我正在使用情节提要。而且，由于很难确定何时调用该方法，因此我不能只编写一个名为 initWithNibName:bundle: 的方法并从其他方法调用它。如果有人对如何解决我的问题有任何想法，请说出来。谢谢。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-08-16T15:19:45.510

我自己也遇到了这个问题。情节提要似乎不使用`initWithNibName:bundle:`，但要么`initWithCoder:(NSCoder *)aDecoder`要么`initWithStyle:(UITableViewStyle)style`。

这两种方法的默认实现如下所示：

```
- (id)initWithCoder:(NSCoder *)aDecoder
{
    self = [super initWithCoder:aDecoder];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
} 
```

我自己还没有使用 initWithStyle 版本，但我想它是为 UITableViewController 调用的。如果有疑问，您可以简单地将这两种方法添加到文件中，以及打印方法名称（或任何其他唯一字符串）的 NSLog() 调用。然后您可以在模拟器中运行它以查看调用了哪个，并删除了另一个。

我强烈建议`initWithNibName:bundle:`不要使用任何其他`init`方法给自己打电话。最好将代码移动到正确的方法。

# ruby-on-rails-3 - 什么是可靠的为什么要为 rails 中的关联项目创建自定义 id

> ID：11973055
> 
> 赞同：0
> 
> 时间：2012-08-15T16:18:25.433
> 
> 标签：ruby-on-rails-3, activerecord, business-logic

我有这样的嵌套资源

> `resources :projects do resources :tasks end`

这些任务有一个名为 number 的字段。每当我创建一个任务时，我都想在父项目中给它一个连续的编号。

这是我的模型课

```
 class Task < ActiveRecord :: Base
 belongs_to :project

    validate_presence_of :title
    before_create :generate_number

    private
    def generate_number
        if project.tasks.nil? || project.tasks.count < 1
            self.number = 1
        else
            self.number = list.topics.count+1
        end
    end
end 
```

我不确定某些事情：此逻辑是否属于我的任务模型或项目模型或单独的类/模块？什么是最好的过滤前。（before_create、before_validation、验证）？因为有很多方法可以创建任务。单独使用列表，在列表中，然后将其附加到列表中......哪个过滤器将在我的测试中起作用，这样我就可以设置一些假货，例如工厂女孩......因为现在 FactoryGirl 并不总是执行生成号码...

这是我的工厂

```
FactoryGirl.define do 
factory :project do
    name "Hello world"
end
trait :with_tasks do
    ignore do
        number_of_tasks 3
    end
    after :create do |project,evaluator|
        @project.Factory.create_list :taks, evaluator.number_of_tasks, :project => project
    end
end 
```

结尾

什么是最好的。根据在我的规范和生产中工作的项目生成顺序自定义任务编号的可靠方法？任何最佳实践提示将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T16:25:07.313

我会在`Task`模型中保留 before_create 回调，它会调用该`generate_number`函数。这应该适用于 Factory girl，如果您使用 Factory.create，它会添加数字，但在使用 Factory.build 时不会。

# php - PHP Mailer 错误：邮件地址无效

> ID：11973056
> 
> 赞同：0
> 
> 时间：2012-08-15T16:18:31.323
> 
> 标签：php, smtp, phpmailer, zend-server

我想通过 PHP Mailer 使用 Gmail SMTP 服务器发送电子邮件。

我在我的机器上运行 Zend Server Community Edition。

以下是我的代码（经过编辑以隐藏某些机密信息）。

```
 require_once('phpmailer/class.phpmailer.php');

        $mail             = new PHPMailer();

        $body             = "test msg";

        $mail->IsSMTP();
        $mail->SMTPDebug  = 2;                    

        $mail->SMTPAuth   = true;                  
        $mail->SMTPSecure = "tls";                 
        $mail->Host       = "smtp.gmail.com";      
        $mail->Port       = "587";                    
        $mail->Username   = "<valid-id>";  
        $mail->Password   = "<valid-password>";            

        $mail->SetFrom('a@b.c', 'Name');

        $mail->AddReplyTo("a@b.c","Name");

        $mail->Subject    = "subject";

        $mail->MsgHTML($body);

        $address = "d@e.f";
        $mail->AddAddress($address, "halo:);

        if(!$mail->Send())
        {
          echo "Mailer Error: " . $mail->ErrorInfo;
        }
        else
        {
          echo "Message sent!";
        } 
```

尽管彻底遵循了 PHP Mailer wiki page 中的示例，但我还是无法相应地发送电子邮件。

这是该函数生成的错误消息：

> SMTP -> ERROR: Failed to connect to server: 连接尝试失败，因为连接方在一段时间后没有正确响应，或者连接失败，因为连接的主机没有响应。(10060) 以下发件人地址失败：a@bc 邮件程序错误：以下发件人地址失败：a@bc

请就此事给我建议。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T16:42:21.160

你有没有尝试过：

```
$mail->SMTPAuth   = true;                  
$mail->SMTPSecure = "ssl";                 
$mail->Host       = "smtp.gmail.com";      
$mail->Port       = "465"; 
```

我在您的代码中更改了我的电子邮件、我的 smtp 用户、我的设置**^^^**、密码和行：

```
$mail->AddAddress($address, "Mihai"); // you forgot a quote 
```

使用`PHPMailer5.2.1`和结果：

```
SMTP -> FROM SERVER:220 mx.google.com ESMTP gq2sm2073759bkc.13 
SMTP -> FROM SERVER: 250-mx.google.com at your service, [***.***.***.***] 250-SIZE 35882577 250-8BITMIME 250-AUTH LOGIN PLAIN XOAUTH 250 ENHANCEDSTATUSCODES 
SMTP -> FROM SERVER:250 2.1.0 OK gq2sm2073759bkc.13 
SMTP -> FROM SERVER:250 2.1.5 OK gq2sm2073759bkc.13 
SMTP -> FROM SERVER:354 Go ahead gq2sm2073759bkc.13 
SMTP -> FROM SERVER:250 2.0.0 OK 1345113839 gq2sm2073759bkc.13 
Message sent! 
```

收到的邮件：

```
X-Mailer: PHPMailer 5.2.1 (http://code.google.com/a/apache-extras.org/p/phpmailer/) 
```

# android - 我需要设置会话或用户首选项吗？

> ID：11973058
> 
> 赞同：0
> 
> 时间：2012-08-15T16:18:45.933
> 
> 标签：android, session, user-preferences

我正在开发一个应用程序，该应用程序具有 PHP 类以连接到 Web 服务器以进行登录和其他数据库事务，并且 SQLite 作为本地数据库来存储用户凭据。

我不确定 SQLite 是否维护用户会话，但它会保持登录状态，直到用户单击注销按钮。

我将如何实现会话（或其他东西），以便用户可以根据整个州的用户 ID 进行其他数据库事务？

[有人说在 PHP](https://stackoverflow.com/questions/5191121/how-to-create-sessions-using-php)中建立会话，有人说[使用首选项](https://stackoverflow.com/questions/3150513/keep-user-state-in-android)。

对我来说最好的解决方案是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T16:46:40.033

也许我不应该这样问，但是，你的网络服务是 RESTful 的吗？

如果是，我阅读了很多关于不在服务器上保留用户会话的讨论，而是在每次请求时对用户进行身份验证（使用他的凭据或更安全的授权系统）。

否则，是的，您可以在用户进行身份验证时在服务器端创建 PHP 会话。您将会话存储在包含 fk_user_id 字段的特定表中，并在身份验证过程结束后将 session_id 发送回客户端应用程序（在您的情况下为 Android 应用程序）。然后 session_id 被存储（例如在用户首选项中），并与每个请求一起发送，以便检索谁在询问数据，这要归功于 session 表及其 fk_user_id 字段。

# jquery - “第一个 id=foo 元素”的 jQuery 选择器是怎么来的？

> ID：11973060
> 
> 赞同：1
> 
> 时间：2012-08-15T16:18:56.993
> 
> 标签：jquery, html, jquery-selectors

在快速回顾 jQuery 选择器时，我[在 w3schools 中看到了这个页面](http://www.w3schools.com/jquery/jquery_selectors.asp)。

在“*更多示例*”表的第二行中，它显示：

```
$("p#intro:first")  | Selects the first <p> element with id="intro" 
```

它说：*id="intro" 的第一个元素*。**但是 AFAIK 在有效**的HTML 文档中只能**有一个**具有特定 id 的元素。

 **问题是：*是否*允许在有效的 HTML 文档中有两个（或更多）具有相同 id 的元素，或者这是教程中的错误？甚至在 jQuery 中？！

有什么我想念的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T16:20:15.770

> 是否允许在有效的 HTML 文档中有两个（或更多）具有相同 id 的元素，

不

> 或者这是教程中的错误？

有点。

由于您只允许使用一个具有给定 id 的元素，因此显式请求第一个元素是多余的……在好的文档中。

当您有多个具有相同 id 的元素（在无效文档中）时，可能有一些浏览器会以这样的方式错误恢复，以便为您提供多个结果（特别是如果 jQuery 将事物传递给`querySelectorAll`而不是`getElementById`），这可能过滤掉后续的……但这不是您应该在自己的文档中做的事情。如果您正在编写 JS 以在已知的浏览器子集中运行第三方代码，并且您知道错误会以这种方式恢复，那么这可能是合理的。**

# objective-c - 模态视图控制器中的后退按钮

> ID：11973061
> 
> 赞同：0
> 
> 时间：2012-08-15T16:19:01.937
> 
> 标签：objective-c, ios, cocoa-touch, modalviewcontroller

> **可能重复：**
> [iPhone：制作箭头形状的 UIBarButtonItem](https://stackoverflow.com/questions/2330157/iphone-making-uibarbuttonitem-that-is-arrow-shaped)
> [在 UIToolbar 上创建左箭头按钮（如 UINavigationBar 的“后退”样式）](https://stackoverflow.com/questions/227078/creating-a-left-arrow-button-like-uinavigationbars-back-style-on-a-uitoolba)

我有一个带有导航栏的模态视图控制器。而且，我想在模态视图控制器上创建一个后退按钮。现在，我知道以下方法：-

```
[self.delegate dismissModalViewControllerAnimated:YES]; 
```

现在，我从 leftBarButtonItem 调用它。

但是，我的问题正是如此。这是一个leftBarButtonItem，看起来像一个常规的leftBarButtonItem。同时，我想要的是一个看起来像 backBarButtonItem 的按钮，左侧有尖/箭头状。

编辑：**我有理由特别想使用模态视图控制器和后退按钮。请不要告诉我不要使用两者中的任何一个。谢谢。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T16:21:54.147

您将不得不使用自定义图像来伪造它，但实际上这会破坏默认行为，因为箭头表示导航，但模态视图控制器通常位于当前视图控制器的上下文中并且不会向前或向后移动。您当前的解决方案可能是最好的。

# delphi - 如何在 Delphi 中实现 Firebird Blob 图像

> ID：11973063
> 
> 赞同：1
> 
> 时间：2012-08-15T16:19:03.927
> 
> 标签：delphi, blob, firebird

我四处寻找，但找不到适合我的东西。我找到[了这个](http://codeprogrammer.blogspot.com/2007/11/how-to-use-blob-type-in-delphi.html)，但它不符合我的需要。

我有一个带有 .jpg 过滤器的浏览按钮，但我不知道如何将图像保存到 blob 字段，然后显示到 TImage 上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T08:00:21.663

以下代码显示了如何将图片保存到 blob 字段中。qEditClass6Question 是查询 qEditClass6 的字段“问题”。一旦图片被加载到 blob 字段中，当前的元组就可以发布到数据库中。

```
Procedure TEditClassSix.LoadPic;
var
 j: TJPEGImage;

begin
 j:= TJPEGImage.Create;
 j.Assign (qEditClass6Question);
 image1.picture.assign (j);
end; 
```

# jquery - 如何在javascript中延迟对服务器的ajax调用？

> ID：11973066
> 
> 赞同：1
> 
> 时间：2012-08-15T16:19:27.927
> 
> 标签：jquery

对于以下代码：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
<script>
$(document).ready(function() {
    var delay = (function() {
        var timer = 0;
        return function(callback, ms) {
            clearTimeout(timer);
            timer = setTimeout(callback, ms);
        };
    })();

    $("div#main").on("keyup", "input[name=code]", function() {
        delay($.getJSON("/some-url/", function(data) {
            console.log("here");
        }), 2000);
    });

});
</script>

<div id="main">
  <input name="code" />
</div> 
```

有谁知道我为什么会收到 javascript 错误

```
Uncaught SyntaxError: Unexpected identifier 
```

我正在尝试延迟将 keyup 数据发送到服务器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T16:29:50.807

您刚刚忘记传递`delay`函数定义。只需稍微调整您的事件处理程序（其他一切都保持不变）：

```
$("div#main").on("keyup", "input[name=code]", function() {
    delay(function() { // <-----
        $.getJSON("/some_url/", function(data) {
            console.log("here");
        });
    }, 2000);
}); 
```

**示例：http:** [//jsfiddle.net/f7F7c/](http://jsfiddle.net/f7F7c/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T16:25:56.050

对我来说看起来像自动完成？试试这个...

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
<script>
$(document).ready(function() {
    var timer = 0;

    function runAjax() {
        $.getJSON("/some-url/", function(data) {
            console.log("here");
        });
    }

    $("div#main").on("keyup", "input[name=code]", function() {
        clearTimeout(timer);
        timer = setTimeout(runAjax, 2000);
    });

});
</script>

<div id="main">
  <input name="code" />
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T16:27:23.293

这对你有帮助吗：http: [//jsfiddle.net/ZYXp4/8/](http://jsfiddle.net/ZYXp4/8/)

这只是在每次触发 keyup 操作时在键入时增加了延迟。试试 jsfiddle 看看它的实际效果。您可以在延迟发生后进行 ajax 调用，没有问题^^

```
<input id="in" type="text"/>
<div id="out"></div>

var typingTimer;
var doneTypingInterval = 1000;

//on keyup, start the countdown
$('#in').keyup(function(){
    clearTimeout(typingTimer);
    if ($('#in').val) {
        typingTimer = setTimeout(function(){
            //do stuff here e.g ajax call etc....
             var v = $("#in").val();
             $("#out").html(v);
        }, doneTypingInterval);
    }
}); 
```

# image - 在 Matlab 中通过 imwrite 将图像写入文件夹

> ID：11973070
> 
> 赞同：4
> 
> 时间：2012-08-15T16:19:48.597
> 
> 标签：image, matlab, file-io

我尝试将图像写入文件夹，但 imwrite 没有用于指定文件夹名称的输入。有没有其他功能。或将图像存储到文件夹的方式。如果我这样做了，也许我对 imwrite 有误，我对此感到抱歉。

当我使用像“folder1/folder2/img.jpg”这样的文件名参数时，它不会相应地创建文件夹，它只是创建一个名为“folder1/folder2/img.jpg”的文件

我也尝试提前使用 mkdir，但它也会在控制台上显示“Permission Denied”。

顺便说一句，我正在使用 Linux。可能是关于权限问题？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-15T16:24:23.880

该`filename`参数不仅仅意味着*名称*- 您可以给它一个绝对或相对路径，作为字符串的一部分。

```
imwrite(img,'my/folder/images/file','jpg') 
```

例如。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T16:24:45.273

该文件夹将仅在文件名中指定，如下所示

```
imwrite(img, 'folder1/filename.tif','tif'); 
```

或者如果你想使用绝对路径。

```
imwrite(img, 'C:/Users/UserName/folder1/filename.tif','tif'); 
```

查看[绝对和相对路径](http://en.wikipedia.org/wiki/Path_%28computing%29)的维基百科。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-06T06:41:00.567

如果要将图像写入目标文件夹，请在 MATLAB 中使用以下代码。

```
destinationFolder = 'C:\Users\Deepa\Desktop\imagefolder';
if ~exist(destinationFolder, 'dir')
  mkdir(destinationFolder);
end
baseFileName = sprintf('%d.png', i); % e.g. "1.png"
fullFileName = fullfile(destinationFolder, baseFileName); 
imwrite(img, fullFileName); % img respresents input image.

 I hope this answer might help someone. 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-02-22T19:23:27.223

***这将打开新图形以选择路径和格式。***

[文件名，分机，user_canceled] = imputfile

![在此处输入图像描述](../Images/3450aedbefdfc103d8470a88f6f18940.png)

# javascript - JavaScript 变量赋值的行为令人惊讶

> ID：11973073
> 
> 赞同：1
> 
> 时间：2012-08-15T16:20:07.677
> 
> 标签：javascript, arrays, variable-assignment

这个问题实际上是另一个[问题](https://stackoverflow.com/questions/11964128/javascript-error-has-no-method-push)的结果，为此我做了一些实验，结果让我更加困惑。我期待答案来解释内部实际发生的事情。

我试过的是，

我将此作为**基本假设，因为我在**[这里](https://stackoverflow.com/questions/8246406/javascript-array-declaration-new-array-new-array3-a-b-c-create)得到了一些明确的解释 ，

```
var a = [];
a['a1'] = [];
a['a2'] = [];

console.log(a); // []
console.log(a['a1']); // []
console.log(a['a2']); // [] 
```

**测试 1**

这让我很困惑，因为它打印`b[0]`为`a`并且可以访问`length`属性，我认为`var b`可以被视为字符数组，因此我尝试分配另一个值，但最终没有成功。从**基本假设**来看，如果这个可以被视为一个 char 数组（更一般地作为一个数组），那么分配应该是成功的。它打破了基本假设。

```
var b = 'abcd';
b['b1'] = [];

console.log(b); // abcd
console.log(b.length); // 4
console.log(b['b1']); // undefined 
```

**测试 2**

但如果我这样创作，任务就会发生，

```
var bb = ['a', 'b', 'c', 'd'];
bb[4] = [];

console.log(bb); // ["a", "b", "c", "d", []]
console.log(bb.length); // 4
console.log(bb[0]); // a
console.log(bb[4]); // [] 
```

由此，我认为，`b[4] = [];`可能会成功，但是

```
var b = 'abcd';
b[4] = [];

console.log(b); // abcd
console.log(b.length); // 4
console.log(b[4]); // undefined 
```

**我的问题是，为什么这些分配的行为不同，而变量共享一些共同的功能？**

这是[演示](http://jsfiddle.net/thujeevan/dLauh/)

谁能给我一个关于内部实际发生的事情的明确解释？

**额外测试**

然后，如果我尝试使用数字赋值，它的行为与这两者完全不同。

```
var c = 1234;
c[4] = [];

console.log(c); //1234
console.log(c.length); // undefined
console.log(c[0]); //undefined
console.log(c[4]); //undefined 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T16:25:17.763

**测试1：** `b`内部是一个字符串，而不是数组，所以你不能在一个`b`位置分配东西。

**测试 2：**它当然可以工作，因为 now`bb`是一个数组。

> 我的问题是，为什么这些分配的行为不同，而变量共享一些共同的功能？

因为他们的类型不同。

**测试 3：** `c`是一个数字，而不是一个数组。

也许你有一些 C 背景，其中字符串是由 null char ( `\0`) 终止的 char 数组。在 JavaScript 中，字符串是内置的 int 类型，它们的行为与数组不同。正如乔纳森所说，`[]`操作员只是为了方便访问一个特定的字符。这里有一些链接，看看：

*   [JavaScript 字符串](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String)
*   [JavaScript 数组](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array)
*   [JavaScript 编号](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Number)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T16:32:48.207

当您使用 访问除对象以外的任何对象时，会为您提供一个使用正确原型（如或）`[]`实例化的临时对象。您可以像使用任何其他对象一样读取和写入此对象的属性 -例如尝试。但是，由于该对象在您完成索引后并没有在任何地方被引用，因此在您下次尝试读取刚刚设置的相同属性时，您实际上是在访问新临时对象上的属性，其中，自然是空的。`String``Number``alert(3["constructor"])`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T16:25:37.383

**推理**

您的“基本假设”有效，因为`a`它是一个数组。“测试 2”是您编写的唯一使用数组的其他测试用例，这就是为什么这是唯一有效的其他测试用例。

您似乎假设提供方括号表示法并拥有一个`length`方法表明一个对象是一个数组。这不是真的。要测试一个对象是否为数组，可以使用 JavaScript 的`instanceof`方法，如下：

```
var a = [];
var b = 'abcd';
var bb = ['a', 'b', 'c', 'd'];
var c = 1234;

a  instanceof Array // => true
b  instanceof Array // => false
bb instanceof Array // => true
c  instanceof Array // => false 
```

请注意，`instanceof Array`返回的情况`true`与您预期的一样，因为您正在尝试执行数组操作。

* * *

**为什么“测试 1”失败**

对于“测试 1”，字符串的方括号表示法执行字符串类的`charAt`功能。鉴于`b = 'abcd'`，**执行`b[0]`与执行相同`b.charAt(0)`**。它是只读的，只返回该索引处的字符，即“a”。

有关更多详细信息，请参阅[字符串的 Mozilla 开发人员网络文档。](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String#Character_access)

* * *

**为什么“额外测试”失败**

对于您的“额外测试”，整数不提供方括号表示法或长度方法，因此所有这些调用都失败了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T16:27:15.147

我想我不明白你的问题是什么。Javascript 以不同的方式处理字符串、数组和整数。你不应该期望他们以同样的方式行事。在 javascript 中也没有关联数组这样的东西，你的第一个例子可以工作。`a['a1']`符号类型实际上只是访问对象属性的一种替代方式，在字符串的上下文中没有任何意义。

# sencha-touch-2 - 我怎样才能使 NestedList 工具栏不可见

> ID：11973077
> 
> 赞同：-1
> 
> 时间：2012-08-15T16:20:24.557
> 
> 标签：sencha-touch-2

我怎样才能使 NestedList 工具栏和 config => 不可见`useToolbar: true`。 ![](../Images/4562317c60ab2b8e3f66878b4b55b506.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T00:56:06.343

它没有测试，但试试这个。

```
nesteslist.getDockedItems()[0].setHidden(true); 
```

# android - 为什么带有片段示例的 ActionBarSherlock 选项卡使用 tabhost？

> ID：11973078
> 
> 赞同：1
> 
> 时间：2012-08-15T16:20:27.127
> 
> 标签：android, android-tabhost, android-actionbar, actionbarsherlock

我是 ABS（ActionBarSherlock）的新手，有时 ABS 对我来说似乎很复杂。在我看来，ABS 的全部（或大部分）要点是让较旧的机器人（<11）能够运行操作栏。

我需要在操作栏选项卡中使用片段，所以我尝试从片段演示中的“FragmentTabs.java”学习，但令人惊讶的是，我发现这个示例不使用 ABS 操作栏并使用 tabhost。

我的问题是：

> 1.  为什么实现了tabhost而不是ABS actionbar，而ABS的重点是Actionbar的使用？它与片段的用法不兼容吗？
>     
>     
> 2.  因为在此示例中片段被定义为静态，所以我如何获得对非静态 tabhost 和 setCurrentTab() 的引用？findViewById() 不起作用，因为片段被定义为静态
>     
>     
> 
> 3.如何根据代码逻辑在标签之间切换？下面的代码永远不会起作用。getParent()也不起作用。

```
 TabHost tabHost =  (TabHost) findViewById(android.R.id.tabhost);
          tabHost.setCurrentTab(2); 
```

以下是从 Sherlock 片段演示中提取的代码：

```
public class FragmentTabs extends SherlockFragmentActivity {
TabHost mTabHost;
TabManager mTabManager;

@Override
protected void onCreate(Bundle savedInstanceState) {
    setTheme(SampleList.THEME); // Used for theme switching in samples
    super.onCreate(savedInstanceState);

    setContentView(R.layout.fragment_tabs);
    mTabHost = (TabHost) findViewById(android.R.id.tabhost);
    mTabHost.setup();

    mTabManager = new TabManager(this, mTabHost, R.id.realtabcontent);

    mTabManager.addTab(
            mTabHost.newTabSpec("simple").setIndicator("Simple"),
            FragmentStackSupport.CountingFragment.class, null);
    mTabManager.addTab(
            mTabHost.newTabSpec("contacts").setIndicator("Contacts"),
            LoaderCursorSupport.CursorLoaderListFragment.class, null);
    mTabManager.addTab(
            mTabHost.newTabSpec("custom").setIndicator("Custom"),
            LoaderCustomSupport.AppListFragment.class, null);
    mTabManager.addTab(
            mTabHost.newTabSpec("throttle").setIndicator("Throttle"),
            LoaderThrottleSupport.ThrottledLoaderListFragment.class, null);

    if (savedInstanceState != null) {
        mTabHost.setCurrentTabByTag(savedInstanceState.getString("tab"));
    }
}

@Override
protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    outState.putString("tab", mTabHost.getCurrentTabTag());
}

/**
 * This is a helper class that implements a generic mechanism for
 * associating fragments with the tabs in a tab host. It relies on a trick.
 * Normally a tab host has a simple API for supplying a View or Intent that
 * each tab will show. This is not sufficient for switching between
 * fragments. So instead we make the content part of the tab host 0dp high
 * (it is not shown) and the TabManager supplies its own dummy view to show
 * as the tab content. It listens to changes in tabs, and takes care of
 * switch to the correct fragment shown in a separate content area whenever
 * the selected tab changes.
 */
public static class TabManager implements TabHost.OnTabChangeListener {
    private final FragmentActivity mActivity;
    private final TabHost mTabHost;
    private final int mContainerId;
    private final HashMap<String, TabInfo> mTabs = new HashMap<String, TabInfo>();
    TabInfo mLastTab;

    static final class TabInfo {
        private final String tag;
        private final Class<?> clss;
        private final Bundle args;
        private Fragment fragment;

        TabInfo(String _tag, Class<?> _class, Bundle _args) {
            tag = _tag;
            clss = _class;
            args = _args;
        }
    }

    static class DummyTabFactory implements TabHost.TabContentFactory {
        private final Context mContext;

        public DummyTabFactory(Context context) {
            mContext = context;
        }

        @Override
        public View createTabContent(String tag) {
            View v = new View(mContext);
            v.setMinimumWidth(0);
            v.setMinimumHeight(0);
            return v;
        }
    }

    public TabManager(FragmentActivity activity, TabHost tabHost,
            int containerId) {
        mActivity = activity;
        mTabHost = tabHost;
        mContainerId = containerId;
        mTabHost.setOnTabChangedListener(this);
    }

    public void addTab(TabHost.TabSpec tabSpec, Class<?> clss, Bundle args) {
        tabSpec.setContent(new DummyTabFactory(mActivity));
        String tag = tabSpec.getTag();

        TabInfo info = new TabInfo(tag, clss, args);

        // Check to see if we already have a fragment for this tab, probably
        // from a previously saved state. If so, deactivate it, because our
        // initial state is that a tab isn't shown.
        info.fragment = mActivity.getSupportFragmentManager()
                .findFragmentByTag(tag);
        if (info.fragment != null && !info.fragment.isDetached()) {
            FragmentTransaction ft = mActivity.getSupportFragmentManager()
                    .beginTransaction();
            ft.detach(info.fragment);
            ft.commit();
        }

        mTabs.put(tag, info);
        mTabHost.addTab(tabSpec);
    }

    @Override
    public void onTabChanged(String tabId) {
        TabInfo newTab = mTabs.get(tabId);
        if (mLastTab != newTab) {
            FragmentTransaction ft = mActivity.getSupportFragmentManager()
                    .beginTransaction();
            if (mLastTab != null) {
                if (mLastTab.fragment != null) {
                    ft.detach(mLastTab.fragment);
                }
            }
            if (newTab != null) {
                if (newTab.fragment == null) {
                    newTab.fragment = Fragment.instantiate(mActivity,
                            newTab.clss.getName(), newTab.args);
                    ft.add(mContainerId, newTab.fragment, newTab.tag);
                } else {
                    ft.attach(newTab.fragment);
                }
            }

            mLastTab = newTab;
            ft.commit();
            mActivity.getSupportFragmentManager()
                    .executePendingTransactions();
        }
    }
}
}

public class FragmentStackSupport extends SherlockFragmentActivity {
int mStackLevel = 1;

@Override
protected void onCreate(Bundle savedInstanceState) {
    setTheme(SampleList.THEME); //Used for theme switching in samples
    super.onCreate(savedInstanceState);
    setContentView(R.layout.fragment_stack);

    // Watch for button clicks.
    Button button = (Button)findViewById(R.id.new_fragment);
    button.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            addFragmentToStack();
        }
    });

    if (savedInstanceState == null) {
        // Do first time initialization -- add initial fragment.
        Fragment newFragment = CountingFragment.newInstance(mStackLevel);
        FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
        ft.add(R.id.simple_fragment, newFragment).commit();
    } else {
        mStackLevel = savedInstanceState.getInt("level");
    }
}

@Override
public void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    outState.putInt("level", mStackLevel);
}

void addFragmentToStack() {
    mStackLevel++;

    // Instantiate a new fragment.
    Fragment newFragment = CountingFragment.newInstance(mStackLevel);

    // Add the fragment to the activity, pushing this transaction
    // on to the back stack.
    FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
    ft.replace(R.id.simple_fragment, newFragment);
    ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN);
    ft.addToBackStack(null);
    ft.commit();
}

public static class CountingFragment extends SherlockFragment {
    int mNum;

    /**
     * Create a new instance of CountingFragment, providing "num"
     * as an argument.
     */
    static CountingFragment newInstance(int num) {
        CountingFragment f = new CountingFragment();

        // Supply num input as an argument.
        Bundle args = new Bundle();
        args.putInt("num", num);
        f.setArguments(args);

        return f;
    }

    /**
     * When creating, retrieve this instance's number from its arguments.
     */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        mNum = getArguments() != null ? getArguments().getInt("num") : 1;
    }

    /**
     * The Fragment's UI is just a simple text view showing its
     * instance number.
     */
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View v = inflater.inflate(R.layout.hello_world, container, false);
        View tv = v.findViewById(R.id.text);
        ((TextView)tv).setText("Fragment #" + mNum);
        tv.setBackgroundDrawable(getResources().getDrawable(android.R.drawable.gallery_thumb));
        return v;
    }
}

} 
```

# objective-c - 更改图像层

> ID：11973079
> 
> 赞同：0
> 
> 时间：2012-08-15T16:20:33.483
> 
> 标签：objective-c, ios, uiimageview

有没有办法改变`UIImageView`绘制对象的“层”？每当我将图像视图添加到视图控制器时，它默认会在所有其他视图之上绘制最近添加的视图。因此，如果我决定添加一个“背景”图像，它现在是一个“前景”图像并阻止其他所有内容。

IB 选项或`UIImageView`类参考中没有任何内容，我无法在 SO 上找到任何内容。这一直是一个问题，奇怪的是我之前没有看到任何关于它的东西......我认为这可能只是我的语义来自德尔福背景。

无论如何，有人知道这个问题/ ICANHAZTEHCODEZ 来解决它吗？或者这就像`UIScrollView`问题一样，开发环境支持不佳。![没有工作](../Images/3f5f19ab0ed94b7a556e92e2e9c7125d.png)

当我尝试使用编辑器排列子视图时会发生这种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T16:24:43.020

您可以使用

```
[self.view bringSubviewToFront:yourImageView]; 
```

和

```
[self.view sendSubviewToBack:yourImageView]; 
```

何时`self.view`必须是您的 imageView 的超级视图

在 IB 中，选择 a`UIControl`并从顶部菜单栏中选择 Editor->arrage->send to front or back

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T16:25:32.993

当您使用`UIView`'`addSubview:`方法时，它会将其添加到视图堆栈的顶部，从而产生您所看到的内容。

您可以使用许多其他`UIView`方法来确定子视图的顺序。例如：

```
- (void)insertSubview:(UIView *)view aboveSubview:(UIView *)siblingSubview;

- (void)insertSubview:(UIView *)view atIndex:(NSInteger)index;

- (void)sendSubviewToBack:(UIView *)view;

- (void)bringSubviewToFront:(UIView *)view; 
```

# javascript - 清理加载 Ajax 内容时添加的 CSS

> ID：11973080
> 
> 赞同：0
> 
> 时间：2012-08-15T16:20:36.347
> 
> 标签：javascript, html

我正在使用 Ajax 将 HTML 文档附加到当前页面中，并在按下关闭按钮时删除那些添加的 div。问题是，当我关闭时，从文档中删除了 div，但`<link rel="stylesheet" href="style.css">`没有删除 CSS，并且随着我加载和卸载 Ajax 内容，这个数字不断增加。如何使用该页面的标题内容（css，js）完全删除加载的文档？

编辑：我不知道为什么人们不想回答，但他们只是投反对票。这是我用来添加的代码（附加 html 文档）

```
$(function(){
              $("a[rel='tab']").click(function(e){
                pageurl = $(this).attr('href');
                $.get(pageurl, function(html) {
                          $(html).hide().appendTo('body').fadeIn(500);
                      }, 'html');

                //to change the browser URL to the given link location
                if(pageurl!=window.location){
                  window.history.pushState({path:pageurl},'',pageurl);
                }
                //stop refreshing to the page given in
                return false;
              });
            }); 
```

以及删除 div 的代码

```
function close(){

        $("#mainContent").fadeOut(500, function() { $(this).remove(); });
        window.history.back();
} ; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T22:08:31.103

我看不到您尝试添加/删除的文档，但我猜它看起来像这样：

```
<link rel="stylesheet" href="style.css">
<div id="main-content">
  <p>Blah blah blah</p>
</div> 
```

因此，当您添加该内容时，整个内容都会被插入。删除它时，您只是删除了`div#main-content`. 要删除所有内容，我想到了两个想法：

*   最好将文档包装在另一个文件中，`<div>`然后将其删除
*   或者，您可以选择`<link>`与“div#main-content”同级的元素，但这可能会更加不可预测。

如果您添加的文档看起来不像，那么请在 OP 中解释它的外观以及*元素*`<link>`的来源。

如果您在另一个页面中执行 HTML 预览之类的操作，请考虑创建一个 iframe。使用 AJAX 创建一个临时 URL 作为源。优点是可以避免在有效合并两个 DOM 时发生的冲突。

# ruby-on-rails-3 - 使用 Fabrication [fabrication_gem] 制造循环依赖项

> ID：11973082
> 
> 赞同：1
> 
> 时间：2012-08-15T16:20:43.203
> 
> 标签：ruby-on-rails-3, fabrication-gem

好的，我没有创建此代码，但我确实需要找到一种测试它的好方法。我们一直在使用 factory_girl 和 minitest，但是有很多问题。我希望能够转移到 Rspec 和 Fabrication gems 来设置一些新的测试，但是我遇到了循环依赖的问题。我们有如下内容：

```
class Owner < ActiveRecord::Base
  :validates has_inner?

  def has_inner?
    # Make sure we have an inner object
  end
end

class Inner < ActiveRecord::Base
  :belongs_to :owner
end 
```

我有每个制造商，比如：

```
Fabricator(:owner) do
  inner
end

Fabricator(:inner) do
end 
```

有人对我如何解决这个问题有任何想法吗？可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T15:07:30.033

我没有看到从`Owner`to定义的任何关系`Inner`。是`has_many`吗？更多细节会很棒。

# android - 加速度计起始位置

> ID：11973084
> 
> 赞同：0
> 
> 时间：2012-08-15T16:20:57.210
> 
> 标签：android, accelerometer

从加速度计（在 X 和 Y 轴上）获得值后，我将这些值分配给 xSpeed 和 ySpeed 变量，然后根据这些值移动球。问题是我希望在活动开始时 xSpeed 和 ySpeed 为 0（在手机移动之前球不会移动），无论加速度计的值是多少。我想做这种校准。

对于 Y 轴，我试过这个，但不适用于手机的所有起始位置。

```
ball.setYSpeed(ySpeed-startAccelY); 
```

其中 startAccelY 是 Y 轴上加速度计的起始值，ySpeed 将被分配新值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T16:25:37.690

我建议您取原始起始值并从当前读数中减去它。

例如，您的代码中有一个变量：

```
float initialPosition = 1.4; // 1.4 is just an example, you'd set it to the reading of the accelerometer 
```

然后，当您将当前加速度计读数应用于您的球时，您可以减去 initialPosition 值以使球移动。这样一开始，球就会出现停顿。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T16:27:24.200

我假设您使用的是 TYPE_ACCELEROMETER 传感器？尝试改用 TYPE_LINEAR_ACCELERATION 传感器。它会自动从传感器读数中减去重力，因此如果您不移动手机，acln 将保持在 0（ish）。

[编辑] Api 9 +。

# imagemagick - 在 ImageMagick 中复制 Photoshop 的“颜色”混合模式

> ID：11973086
> 
> 赞同：4
> 
> 时间：2012-08-15T16:21:04.683
> 
> 标签：imagemagick

我需要在 ImageMagick 中创建一个模仿 Adob​​e Photoshop 的“颜色”混合模式的命令，以便为图像着色。为了做到这一点，我试图合成原始图像和另一个由全彩色层组成的图像，不透明度为 35%。这应该与原始图像融合并创建彩色结果图像。

这是预期的结果： ![预期结果](../Images/c9950f210d4959fabd15f1fdacbf36b5.png)

Adobe 网站上正在定义“颜色”混合模式，如下所示：“使用基色的亮度以及混合色的色调和饱和度创建结果颜色。这会保留图像中的灰度级，并且是可用于为单色图像着色和为彩色图像着色。”

ImageMagick 中定义了一个 compose 方法，它似乎做同样的事情（Luminize），但结果远非预期的那样。

似乎在 Imagemagick 中提供最接近结果的是默认的混合 compose 方法，使用如下：

```
convert image.jpg color_layer.png -compose blend -composite result.jpg 
```

我还尝试使用 -fx 运算符创建一个包含第一张图像的亮度和第二张图像的色相和饱和度的图像，但结果仍然远不及我所需要的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T14:31:04.070

基于 Castles 有价值的答案，我试图找到在 PHP 中执行此操作的最佳解决方案。他引用的实现有两个主要缺陷：一个是它没有考虑不透明度（如果有的话），第二个是非常缓慢且耗费资源。在 PHP 中处理 500x500 像素的图像大约需要 15 秒，其中 Apache 将保持处理器高达 95%。

我发现最快和最少的资源消耗实际上是在 HTML5 中使用画布处理图像。结果令人惊叹，图像正在现场处理。

我将在最后的代码块下方发布，一个用于 PHP，一个用于 HTML。如果你需要使用这个服务器端，你可以在 Node.js 和 NodeCanvas 中复制粘贴 HTML 代码：[https ://github.com/LearnBoost/node-canvas](https://github.com/LearnBoost/node-canvas)

**PHP（不透明）：**

```
<?php

function Lum($colour) {
    return ($colour['r'] * 0.3) + ($colour['g'] * 0.59) + ($colour['b'] * 0.11);
}

function ClipColour($colour) {
    $result     = $colour;
    $luminance  = Lum($colour);

    $cMin = min($colour['r'], $colour['g'], $colour['b']);
    $cMax = max($colour['r'], $colour['g'], $colour['b']);

    if ($cMin < 0.0) {
        $result['r'] = $luminance + ((($colour['r'] - $luminance) * $luminance) / ($luminance - $cMin));
        $result['g'] = $luminance + ((($colour['g'] - $luminance) * $luminance) / ($luminance - $cMin));
        $result['b'] = $luminance + ((($colour['b'] - $luminance) * $luminance) / ($luminance - $cMin));
    } 

    if ($cMax > 255) {
        $result['r'] = $luminance + ((($colour['r'] - $luminance) * (255 - $luminance)) / ($cMax - $luminance));
        $result['g'] = $luminance + ((($colour['g'] - $luminance) * (255 - $luminance)) / ($cMax - $luminance));
        $result['b'] = $luminance + ((($colour['b'] - $luminance) * (255 - $luminance)) / ($cMax - $luminance));
    }

    return $result;
}

function SetLum($colour, $luminance) {

    $result = array();

    $diff =   $luminance - Lum($colour);

    $result['r'] = $colour['r'] + $diff;
    $result['g'] = $colour['g'] + $diff;
    $result['b'] = $colour['b'] + $diff;

    return ClipColour($result);

} 

function normalizeColor( $color ) {
    $color['r'] = $color['r'] / 255;
    $color['g'] = $color['g'] / 255;
    $color['b'] = $color['b'] / 255;

    return $color;
}

function denormalizeColor( $color ) {
    $color['r'] = round($color['r'] * 255);
    $color['g'] = round($color['g'] * 255);
    $color['b'] = round($color['b'] * 255);

    return $color;
}

$overlay_color = array('r'=>180,'g'=>22,'b'=>1, 'a' => 0.35);

$img = new Imagick();

if( !isset($_GET['case']) ) {
    $_GET['case'] = '';
}

//unmodified version
$original   = new Imagick('girl.jpg');

//photoshop image to compare
$ps = new Imagick('original.jpg');

$img->addImage($original);
$it = $original->getPixelIterator();

foreach( $it as $row => $pixels ) {
    foreach ( $pixels as $column => $pixel ) {
        $rgbIni = $pixel->getColor();

        $rgb = SetLum($overlay_color, Lum($rgbIni));
         $overlay_color     = normalizeColor($overlay_color);
            $rgb        = normalizeColor($rgb);

            $rgbIni         = normalizeColor($rgbIni);

        $rgb['r'] = ((1 - $overlay_color['a']) * $rgbIni['r']) + ($overlay_color['a'] * $rgb['r']);
        $rgb['g'] = ((1 - $overlay_color['a']) * $rgbIni['g']) + ($overlay_color['a'] * $rgb['g']);
        $rgb['b'] = ((1 - $overlay_color['a']) * $rgbIni['b']) + ($overlay_color['a'] * $rgb['b']);

        $test           = denormalizeColor($test);
        $rgb            = denormalizeColor($rgb);
        $overlay_color  = denormalizeColor($overlay_color);

        $pixel->setColor('rgb('.round($rgb['r']).','. round($rgb['g']).','.round($rgb['b']).')');

    }

    $it->syncIterator();
}

//add modified version
$img->addImage($original);
$img->addImage($ps);

$img->resetIterator();
$combined = $img->appendImages(true); //stack images

header('content-type: image/jpeg');

$combined->setImageFormat("jpeg");

echo $combined;

?> 
```

**HTML：**

```
<!DOCTYPE html>
    <html lang="en">
    <head>
    <meta charset="UTF-8" />
    <script>
        var RGBA = function(r, g, b, a) {
            this.R = r || 0;
            this.G = g || 0;
            this.B = b || 0;
            this.A = a || 0.5;
        }

        function SetLum(initialColor, pixelColor) {

            var initalColorLuminance = initialColor.R * 0.3 + initialColor.G * 0.59 + initialColor.B * 0.11;
            var pixelColorLuminance = pixelColor.R * 0.3 + pixelColor.G * 0.59 + pixelColor.B * 0.11;

            var diff = pixelColorLuminance - initalColorLuminance;

            var response = new Array;
               response[0] = initialColor.R + diff;
               response[1] = initialColor.G + diff;
               response[2] = initialColor.B + diff;

            //console.log(response[0]);

            return ClipColour(response);

        }

        function alphaComposite(mv, ov, a) {
            return (mv * a) + (ov * (1 - a));
        }

        function ClipColour(color) { //function to prevent underexposure or overexposure on some pixels

            var result     = color;
            var luminance  = color[0] * 0.3 + color[1] * 0.59 + color[1] * 0.11;

            var cMin = Math.min(color[0], color[1], color[2]);
            var cMax = Math.max(color[0], color[1], color[2]);

            if (cMin < 0.0) {
                color[0] = luminance + (((color[0] - luminance) * luminance) / (luminance - cMin));
                color[1] = luminance + (((color[1] - luminance) * luminance) / (luminance - cMin));
                color[2] = luminance + (((color[2] - luminance) * luminance) / (luminance - cMin));
            } 

            if (cMax > 255) {
                color[0] = luminance + (((color[0] - luminance) * (255 - luminance)) / (cMax - luminance));
                color[1] = luminance + (((color[1] - luminance) * (255 - luminance)) / (cMax - luminance));
                color[2] = luminance + (((color[2] - luminance) * (255 - luminance)) / (cMax - luminance));
            }

            return color;
        }

        function processImage(image, targetColour) {
            var canvas = document.createElement('canvas');
                c = canvas.getContext('2d');

            canvas.width = image.width;
            canvas.height = image.height;

            // Draw the building on the original canvas
            c.drawImage(image, 0, 0, canvas.width, canvas.height);

            // There's a (much) faster way to cycle through all the pixels using typed arrays, 
            // but I'm playing it safe so that the example works in all browsers.
            var imageData = c.getImageData(0, 0, canvas.width, canvas.height),
                imageDataPixels = imageData.data;

            for (var i = 0, len = imageDataPixels.length; i < len; i += 4) {
                var pixelColor = new RGBA(imageDataPixels[i], imageDataPixels[i+1], imageDataPixels[i+2], 1);
                var test = SetLum(targetColour, pixelColor);

                var r    = Math.round(test[0]);
                var g    = Math.round(test[1]);
                var b    = Math.round(test[2]);

                imageDataPixels[i] = alphaComposite(r, imageDataPixels[i], targetColour.A);
                imageDataPixels[i + 1] = alphaComposite(g, imageDataPixels[i + 1], targetColour.A);
                imageDataPixels[i + 2] = alphaComposite(b, imageDataPixels[i + 2], targetColour.A);
            }

            c.putImageData(imageData, 0, 0);

            return canvas;
        }

        document.addEventListener('DOMContentLoaded', function() {
            var image = new Image(),
                processImageFile = null;

            image.src = "girl.jpg";

            image.addEventListener('load', function() {
                var canvas = document.getElementById('canvas'),
                    c = canvas.getContext('2d'),
                    imageRGBA = new RGBA(180, 22, 1, 0.35);

                canvas.width = image.width;
                canvas.height = image.height;

                c.drawImage(image, 0, 0);

                processImageFile = processImage(image, imageRGBA);
                c.drawImage(processImageFile, 0, 0);
            });
        });
    </script>
</head>
<body>

    <img src="girl.jpg" />
    <br />

    <canvas id="canvas"></canvas>

    <br />
    <img src="original.jpg" />
</body> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T05:01:19.640

我也一直在尝试这样做，我想出的最好的方法是使用覆盖过滤器。这是我在 php 中的代码：

```
$overlay_color = array('r'=>180,'g'=>22,'b'=>1);

function overlay ($top, $bottom) {
    return $bottom < 128 ? ( 2 * $bottom * $top ) / 255 : 255 - ( 2 * ( 255 - $bottom ) * ( 255 - $top ) / 255 );
}

$original = new Imagick('img/girl.jpg');

$img = new Imagick();

//unmodified version
$img->addImage($original);

$it = $original->getPixelIterator();

foreach( $it as $row => $pixels )
{
    foreach ( $pixels as $column => $pixel )
    {
            $rgba = $pixel->getColor();
            $pixel->setColor('rgb('.overlay($overlay_color['r'], $rgba['r']).','.overlay($overlay_color['g'], $rgba['g']).','.overlay($overlay_color['b'], $rgba['b']).')');
    }

    $it->syncIterator();
}

//add modified version
$img->addImage($original);

$img->resetIterator();
$combined = $img->appendImages(true); //stack images

header('content-type: image/jpeg');

$combined->setImageFormat("jpeg");

echo $combined; 
```

我似乎找不到 Photoshop“颜色”模式的公式。如果我能发现这将是相当直截了当的。

更新：我发现这个网站很好地解释了实际的 Photoshop 公式：[http](http://www.beneaththewaves.net/Photography/Secrets_of_Photoshops_Colour_Blend_Mode_Revealed_Sort_Of.html) ://www.beneaththewaves.net/Photography/Secrets_of_Photoshops_Colour_Blend_Mode_Revealed_Sort_Of.html我已经设法让它在 PHP 中工作。这是功能：

```
function Lum($colour) {

return ($colour['r'] * 0.3) + ($colour['g'] * 0.59) + ($colour['b'] * 0.11);

}

function ClipColour($colour) {

    $result = $colour;

    $luminance = Lum($colour);

    $cMin = min($colour['r'], $colour['g'], $colour['b']);

    $cMax = max($colour['r'], $colour['g'], $colour['b']);

    if ($cMin < 0.0) {

        $result['r'] = $luminance + ((($colour['r'] - $luminance) * $luminance) / ($luminance - $cMin));

        $result['g'] = $luminance + ((($colour['g'] - $luminance) * $luminance) / ($luminance - $cMin));

        $result['b'] = $luminance + ((($colour['b'] - $luminance) * $luminance) / ($luminance - $cMin));

    } 

    if ($cMax > 255) {

        $result['r'] = $luminance + ((($colour['r'] - $luminance) * (255 - $luminance)) / ($cMax - $luminance));

        $result['g'] = $luminance + ((($colour['g'] - $luminance) * (255 - $luminance)) / ($cMax - $luminance));

        $result['b'] = $luminance + ((($colour['b'] - $luminance) * (255 - $luminance)) / ($cMax - $luminance));

    }

    return $result;
}

function SetLum($colour, $luminance) {

    $result = array();

    $diff =   $luminance - Lum($colour);

    $result['r'] = $colour['r'] + $diff;

    $result['g'] = $colour['g'] + $diff;

    $result['b'] = $colour['b'] + $diff;

    return ClipColour($result);

} 
```

这是更新的像素转换代码：

```
$rgb = $pixel->getColor();
$rgb = SetLum($overlay_color,Lum($rgb));
$pixel->setColor('rgb('.round($rgb['r']).','. round($rgb['g']).','.round($rgb['b']).')'); 
```

# php - CodeIgniter Self-Join 与 SQL 不匹配

> ID：11973087
> 
> 赞同：1
> 
> 时间：2012-08-15T16:21:06.157
> 
> 标签：php, sql, codeigniter

好吧，这里必须遗漏一些东西。

我的 SQL 工作正常：

```
SELECT t1.id, t1.material, t2.id, t2.material, t3.id, t3.material, t4.id, t4.material
FROM ml_levels t1 

LEFT JOIN ml_levels t2 
ON t1.parentID = t2.id

LEFT JOIN ml_levels t3
ON t2.parentID = t3.id

LEFT JOIN ml_levels t4
ON t3.parentID = t4.id

WHERE t1.id = 286 
```

这返回

```
id   |  material  | id  |  material         |  id  |  material            | id |  material
-------------------------------------------------------------------------------------------
286  |  4Layer    | 209 |  Protective Film  |  60  |  Specialty Products  | 1  |  Protect 
```

但是，我的 ActiveRecord 只返回 t4.id 和 t4.material：

```
 $this->db->select('t1.id, t1.material, t2.id, t2.material, t3.id, t3.material, t4.id, t4.material');
    $this->db->from('ml_levels AS t1')->where('t1.id',286);
    $this->db->join('ml_levels AS t2','t1.parentID = t2.id','left');
    $this->db->join('ml_levels AS t3','t2.parentID = t3.id','left');
    $this->db->join('ml_levels AS t4','t3.parentID = t4.id','left');

    return $this->db->get()->row(); 
```

这返回：

```
id   |  material  |
-------------------
1    |  Protect   | 
```

$this->db->last_query() 返回：

```
SELECT `t1`.`id`, `t1`.`material`, `t2`.`id`, `t2`.`material`, `t3`.`id`, `t3`.`material`, `t4`.`id`, `t4`.`material` 
FROM (`ml_levels` AS t1) 
LEFT JOIN `ml_levels` AS t2 ON `t1`.`parentID` = `t2`.`id` 
LEFT JOIN `ml_levels` AS t3 ON `t2`.`parentID` = `t3`.`id` 
LEFT JOIN `ml_levels` AS t4 ON `t3`.`parentID` = `t4`.`id` 
WHERE `t1`.`id` = 286 
```

如果我在数据库上运行这个 SQL，它会准确地返回原始查询返回的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T21:40:53.047

Codeigniter 仅返回没有表标签的字段名称，因此您只找到两个字段，因为只有`id`和`material`。换线：

```
 $this->db->select('t1.id, t1.material, t2.id, t2.material, t3.id, t3.material, t4.id, t4.material'); 
```

和：

```
 $this->db->select('t1.id AS t1id, t1.material AS t1material, t2.id AS t2id, t2.material AS t2material, t3.id AS t3id, t3.material AS t3material, t4.id AS t4id, t4.material AS t4material'); 
```

# android - 如何正确学习Android测试？

> ID：11973090
> 
> 赞同：30
> 
> 时间：2012-08-15T16:21:18.927
> 
> 标签：android, android-testing

有哪些学习安卓测试的好方法？我对学习 Android 测试很感兴趣，我实际上并不做 TDD，而是一起编写测试和代码。

我阅读了[http://developer.android.com/tools/testing/index.html](http://developer.android.com/tools/testing/index.html) 上的所有信息和“Android 应用程序测试指南”一书并理解了基本概念，但几乎没有我可以提供的信息或示例寻找。

这本书和示例非常基础，展示了如何使用 2 个 EditText 框测试一个非常简单的活动，

我需要测试更复杂的东西，例如 IntentService、AsyncTask、ResultReceiver 等。我有兴趣以 TDD 或几乎 TDD 的方式构建我的应用程序。

有什么方法可以让我学习这些东西（书籍、博客、示例……）或者 Android 测试非常罕见？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-10-23T04:51:26.630

*问题有点老了，从被问到的时候几乎没有什么改变。*

忘记旧的 Robotium、RoboElectric 等。这些都只是临时解决方案。Android Studio 现在带有第一方测试解决方案。JUnit Tests 不再需要在设备上运行，而是在开发主机（也就是你的 Mac/PC 机器）JVM 上运行。因此，无论你发现什么（新书、博客文章、谷歌公告），都要多阅读并进行实验。

将**JUnit**与**Mockito**、**Espresso**和**UiAutomator 一起**使用。[Android 开发者页面](http://developer.android.com/training/testing.html)上将会有越来越多关于这些工具的解释。快乐的测试；）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T19:20:34.943

您可以为单元测试编写[JUnit 测试](http://developer.android.com/tools/testing/testing_android.html)。如果你想测试 UI，我建议使用像[Robotium](https://code.google.com/p/robotium/)这样的框架，他们的网站上有很多示例，它使自动化 UI 测试变得非常容易。

我不确定更高级的技术，但是像 Robotium 这样的工具加上一些好的单元测试会给你一个好的开始。

# c# - 查找未关闭的 FileStream

> ID：11973103
> 
> 赞同：2
> 
> 时间：2012-08-15T16:22:29.007
> 
> 标签：c#, visual-studio-2010, code-analysis

我想知道 Visual Studio（或插件）中是否存在可用于定位未关闭的 FileStream 变量的工具。

**背景** 我被指派为现有应用程序编写代码。当我将它与现有代码一起使用时，我正在处理的代码运行良好。我有

> IO异常
> 
> 该进程无法访问文件“[Filepath]”，因为它正被另一个进程使用。

我不知道是代码导致了这就是为什么我要问这样的工具是否存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T18:09:05.930

Visual Studio Ultimate 或 Professinal 中的代码分析包含一个规则，用于检测`FileStream`在超出范围 ( [http://msdn.microsoft.com/en-us/library/ms182289\. aspx](http://msdn.microsoft.com/en-us/library/ms182289.aspx)）以及确保具有一次性字段的类型也是一次性的规则（[http://msdn.microsoft.com/en-us/library/ms182172.aspx](http://msdn.microsoft.com/en-us/library/ms182172.aspx)）

两者都不会真正检测另一个进程是否正在使用文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T17:04:03.813

我刚开始使用 JetBrains ReSharper。老实说，我已经爱上了这个工具，因为它立即让我能够识别我的代码的一些问题并同样轻松地修复它们。

试一试，免费 30 天： http: [//www.jetbrains.com/resharper/](http://www.jetbrains.com/resharper/)看看它是否有助于清理您继承的一些问题。

# macos - 无法输入 Silverlight 5 输入字段 (Chrome) MacOS

> ID：11973104
> 
> 赞同：11
> 
> 时间：2012-08-15T16:22:29.720
> 
> 标签：macos, google-chrome, silverlight-5.0

使用 Silverlight 5，我无法在输入字段中输入任何内容。在 MacOS 中使用 Chrome。

我必须安装插件还是浏览器的特定配置？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-27T00:08:56.277

可悲的是，这是 osX 上 Chrome 中 Silverlight 5 中文本框的行为。它们在 Safari、Firefox 等中运行良好……但不是 Chrome。

osX 上的 Chrome 正式不支持 Silverlight。Silverlight 4 工作正常，但 5 没有。

抱歉，这不是您希望的答案。

你也可以看看这个帖子： [Silverlight 5 issue on mac](https://stackoverflow.com/questions/9530750/silverlight-5-issue-on-mac)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-04T19:34:27.600

遇到了同样的问题并找到了解决方法：在其他程序中键入文本，将其复制并粘贴到 Silverlight 中。对我来说，在 Lync Web App 中输入用户名和密码很有帮助，这就足够了。

我知道这个答案对于原始问题来说很晚，但它可能会帮助像我一样点击这个帖子的其他人:-)

祝你今天过得愉快！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-28T16:36:17.843

如果您在 Mac 版 Chrome 上开发 SL5。有一个解决方法，但需要一些工作。创建一个捕获击键的 javascirpt 函数，禁用该击键的默认浏览器行为并将键事件传递给 silverlight。如果文本字段处于焦点位置，则将 keyevent 附加到文本字段。

编程并不难，但您需要记住，并非所有键事件都是您要显示的字符。此外，您需要做一些簿记以便将键入的键放置在文本字段的正确位置：因为光标可以移动。

# mysql - sql中的SQL连接和子查询

> ID：11973105
> 
> 赞同：1
> 
> 时间：2012-08-15T16:22:31.593
> 
> 标签：mysql, sql

我有一个表`employee`，其中包含列*id*（主键）、*employee_name* 和另一个表`employee_works`，其中包含列 *employee_id*（引用employee.id 的外键）、*start_date*（日期时间）、*finish_date*（日期时间）。

以下是员工表的一些数据：

```
 **id**   **employee_name**
 1      employee A
 2      employee B
 3      employee C
 4      employee D
 5      employee E
 6      employee F
 7      employee G 
```

employee_works 表：

```
1  2010-01-01 00:00:00   NULL
2  2010-01-01 00:00:00   2010-01-10 10:00:00"
2  2010-01-13 00:00:00   2010-01-15 10:00:00"
2  2010-01-31 00:00:00   NULL
4  2010-02-18 00:00:00   2011-01-31 00:00:00"
6  2010-02-18 00:00:00   NULL 
```

NULL 值表示员工仍在工作。我需要一个查询来显示员工中的人员列表，如果他们与我们一起工作，谁仍在我们公司工作，谁离开了，如果可能的话，他们与我们一起工作了多长时间。例子：

```
id     employee_name       status
1      Employee A       Still with us
3      Employee C       Never worked
4      Employee D       Left 
```

我的尝试：

```
SELECT emp.id,emp.name,
CASE
WHEN occ.finish_date is NULL and occ.start_date is NOT NULL THEN 'Still working'
WHEN occ.finish_date is NULL and occ.start_date is NULL THEN 'Never Worked'
WHEN occ.finish_date is NOT  NULL and occ.start_date is NOT NULL THEN 'Left'
END
AS status

FROM employee AS emp
LEFT JOIN employee_works AS occ ON emp.id=occ.employee_id 
GROUP BY emp.id, occ.finish_date 
```

我还想获得员工在另一列中工作的总天数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T16:31:27.357

问题是您有一个分组依据，但没有状态定义的聚合。Mysql 不会给你一个语法错误。相反，它会给你一个随机状态：

尝试这样的事情：

```
select id, name,
       (CASE WHEN statusint = 3
             THEN 'Still working'
             WHEN statusint = 1 or statusint is null
             THEN 'Never Worked'
             WHEN statusint = 2
             THEN 'Left'
        END) AS status,
       days_worked
from (SELECT emp.id, emp.name,
             max(CASE WHEN occ.departure_date is NULL and occ.start_date is NOT NULL
                      THEN 3
                      WHEN occ.departure_date is NULL and occ.start_date is NULL
                      THEN 1
                      WHEN occ.departure_date is NOT NULL and occ.start_date is NOT NULL
                      THEN 2
                 END) AS statusint,
             sum(datediff(coalesce(departure_date, curdate()), occ.start_date
                ) as days_worked
      FROM employee emp LEFT JOIN
           employee_works occ
           ON emp.id=occ.employee_id
      GROUP BY emp.id, emp.name
     ) eg 
```

mysql的这个“特性”被称为隐藏列。编写 mysql 的人（以及许多使用它的人）认为这是一个很棒的功能。许多使用其他数据库的人只是摸不着头脑，想知道为什么任何数据库都会表现得如此奇怪。

顺便说一句，您应该检查是否为多次受雇的人分配了新 ID。如果是这样，您的查询可能需要更高级的名称匹配方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T16:34:20.053

尽量简化你的条件。

```
SELECT  a.*, 
        CASE
            WHEN b.employeeID IS NULL THEN 'NEVER WORKED'
            WHEN b.finish_date IS NULL THEN 'STILL WORKING'
            WHEN DATE(b.finish_date) < CURDATE() THEN 'LEFT'
        END as `Status`
FROM    employee a
            LEFT JOIN employee_works b
                on a.id = b.employeeID 
```

# sql-server - 使用相同数据库结构的多个网站

> ID：11973106
> 
> 赞同：1
> 
> 时间：2012-08-15T16:22:40.597
> 
> 标签：sql-server, asp.net-mvc, design-patterns

我有三个网站，它们使用抽象数据库结构，其中包含以下表格：项目、地点、类别等......以及 GetItemsByCategory、GetRelatedItems 等存储过程......实际上我对这 3 个不同的网站使用完全相同的数据库结构。

从代码的角度来看，我对所有网站都使用相同的代码（除了特定于 foreach 的 HTML），并且所有通用代码都在所有网站使用的少数项目中，所以每次我检测到错误（在所有网站中） ）我只是在一个地方（所有人使用的公共部分）修复它，然后所有网站都会自动得到修复。

实际上我使用的是 Asp.net MVC3 和 Sql 服务器。

每次我想扩展一些功能时，我需要一个新表、存储过程或与数据库相关的东西，我必须在每个数据库中进行修改。

*   你知道我可以使用什么方法来获得相同的灵活性并且只对所有网站进行一次数据库修改吗？

*   您认为我使用的是一种好方法还是我应该使用您认为不同的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T16:45:41.270

如果数据库位于单个服务器上，您可以从 Management Studio 生成该过程的脚本，并确保使用“检查对象存在”选项（工具 > 选项 > SQL Server 对象资源管理器 > 脚本）。这将产生类似这样的结果（最重要的是，它产生您的存储过程代码作为您可以使用动态 SQL 执行的东西）：

```
USE DBName;
GO

SET ANSI_NULLS ON;
GO

SET QUOTED_IDENTIFIER ON;
GO

IF NOT EXISTS (...)
BEGIN
    EXEC dbo.sp_executesql @statement = N'CREATE PROCEDURE dbo.whatever ...
    '
END
GO 
```

现在您有了这个脚本，您可以修改它以跨多个数据库工作 - 您只需滑动 @statement = 部分并重新使用它。首先，您需要将希望它工作的数据库填充到 @table 变量中（或者如果需要，您可以将其放入永久表中）。然后你可以建立一个命令在每个数据库中执行，例如

```
DECLARE @dbs TABLE (name SYSNAME);

INSERT @dbs(name) SELECT N'db1';
INSERT @dbs(name) SELECT N'db2';
INSERT @dbs(name) SELECT N'db3';

-- now here is where we re-use the create / alter procedure command from above:

DECLARE @statement NVARCHAR(MAX) = N'CREATE PROCEDURE dbo.whatever ...
    ';

-- now let's build some dynamic SQL and run it!

DECLARE @sql NVARCHAR(MAX);
SET @sql = N'';

SELECT @sql = @sql + '
  EXEC ' + QUOTENAME(name) + '.dbo.sp_executesql N''' + @statement + ''';'
  FROM @dbs;

EXEC sys.sp_executesql @sql; 
```

或者，您可以创建我的`sp_msforeachdb`或`sp_ineachdb`替换的自定义版本：

*   [制作更可靠、更灵活的 sp_MSforeachdb](https://www.mssqltips.com/sqlservertip/2201/making-a-more-reliable-and-flexible-spmsforeachdb/?utm_source=AaronBertrand)
*   [在 SQL Server 中的每个数据库的上下文中执行命令](https://www.mssqltips.com/sqlservertip/5694/execute-a-command-in-the-context-of-each-database-in-sql-server--part-2/?utm_source=AaronBertrand)

我曾经为此使用一个名为[SQLFarms Combine](http://searchsqlserver.techtarget.com/feature/SQL-Farm-Combine-20)的工具，但该工具似乎不再存在，或者它可能已被另一家公司吞并/重新命名。Red Gate 此后制作了具有类似功能的[SQL Multi Script 。](https://www.red-gate.com/products/dba/sql-multi-script/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T00:00:06.150

如果您在所有表中添加了一个名为 websiteId 的列，那么您可能只有一个数据库。将唯一的 websiteId 存储在每个站点的 web.config 中，然后将其与每个数据请求一起传递。显然，每个站点的数据都与其 websiteId 一起存储，因此可以按网站查询数据。

这意味着在您的数据库中进行一些重构以及对您的数据库的任何调用，但是一旦完成，您就只有一个数据库需要维护。

当然这是假设您的数据库在同一台服务器上...

# wpf - 更新绑定对象时，ContentPresenter 的绑定未更新

> ID：11973107
> 
> 赞同：0
> 
> 时间：2012-08-15T16:22:40.513
> 
> 标签：wpf, user-controls

我有一个主视图和两个子视图。单击 SubViewA 上的按钮时，我想从 SubViewA 切换到 SubViewB。masterview 包含一个绑定到 View 的 contentpresenter，并在加载时初始化为 SubViewB。单击 SubViewA 上的按钮时，将调用 SubViewB 构造函数，但从未加载控件。我错过了什么？我也尝试过设置内容模板：

```
<ContentPresenter x:Name="contentPresenter" Content="{Binding View, PresentationTraceSources.TraceLevel=High}" /> 
```

这也不起作用。

主窗口：

```
<Window x:Class="WpfApplication2.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525"
    xmlns:local="clr-namespace:WpfApplication2">

<Grid>

    <TextBlock Text="MasterViewPage" />

    <ContentControl x:Name="content" Content="{Binding View}">
        <ContentControl.Resources>
            <DataTemplate DataType="{x:Type local:SubViewModelA}">
                <local:SubViewA></local:SubViewA>
            </DataTemplate>
            <DataTemplate DataType="{x:Type local:SubViewModelB}">
                <local:SubViewB></local:SubViewB>
            </DataTemplate>
        </ContentControl.Resources>
    </ContentControl>

</Grid>
</Window>

public partial class MainWindow
{
    public MainWindow()
    {
        Loaded += MainWindow_Loaded;
        InitializeComponent();
    }

    private void MainWindow_Loaded(object sender, System.Windows.RoutedEventArgs e)
    {
        DataContext = new MainViewModel();
    }      
} 
```

子视图A：

```
<UserControl x:Class="WpfApplication2.SubViewA"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         mc:Ignorable="d" 
         d:DesignHeight="300" d:DesignWidth="300">

<Grid Margin="0,40,0,0">
    <TextBlock Text="Subview A" />

    <Button Height="50" Width="120" Content="Open View B" Command="{Binding OpenViewCommand}" />
</Grid>
</UserControl>

public partial class SubViewA
{
    public SubViewA()
    {
        Loaded += SubViewA_Loaded;
        InitializeComponent();
    }

    private void SubViewA_Loaded(object sender, System.Windows.RoutedEventArgs e)
    {
        DataContext = new SubViewModelA();
    }
} 
```

视图模型：

```
public class MainViewModel : NotifyPropertyChanged
{
    private object _view;

    public object View
    {
        get { return _view; }
        set
        {
            _view = value;
            RaisePropertyChanged(() => View);
        }
    }

    public MainViewModel()
    {
        View = new SubViewA();
    }
}

public class SubViewModelA : MainViewModel
{
    public ICommand OpenViewCommand
    {
        get { return new DelegatingCommand(OpenView); }
    }

    private void OpenView()
    {
        View = new SubViewB();
    }
}

public class SubViewModelB : MainViewModel
{
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T16:29:21.177

View-models 不应该包含对视图的引用，而是有一个属性`ViewMode`可以是一个`enum`并触发它，[这里是一个例子](https://stackoverflow.com/questions/6546436/mvvm-how-to-switch-between-views-using-datatemplate-triggers/6546591#6546591)（你也可以设置`ContentTemplate`而不是`Content`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T11:50:53.550

好的，对我有用的解决方案是：

MainView.xaml：

```
 <ContentControl x:Name="content">
        <ContentControl.Style>
            <Style TargetType="{x:Type ContentControl}">
                <Style.Triggers>
                    <DataTrigger Binding="{Binding View, PresentationTraceSources.TraceLevel=High}" Value="SubViewA">
                            <Setter Property="ContentTemplate">
                            <Setter.Value>
                                    <DataTemplate>
                                        <local:SubViewA />
                                    </DataTemplate>
                            </Setter.Value>
                        </Setter>
                    </DataTrigger>
                    <DataTrigger Binding="{Binding View, PresentationTraceSources.TraceLevel=High}" Value="SubViewB">
                            <Setter Property="ContentTemplate">
                            <Setter.Value>
                                    <DataTemplate>
                                        <local:SubViewB />
                                    </DataTemplate>
                                </Setter.Value>
                        </Setter>
                    </DataTrigger>
                </Style.Triggers>
            </Style>
        </ContentControl.Style>
    </ContentControl> 
```

在 SubViewA.xaml 中：

```
<Button Height="50" Width="120" Content="Open View B" Command="{Binding Path=DataContext.OpenViewCommand, RelativeSource={RelativeSource AncestorType={x:Type Window}}, PresentationTraceSources.TraceLevel=High}" /> 
```

原因是视图没有设置在 MainViewModel 上，而是设置在子视图上（继承自 MainViewModel）。当删除继承以实际设置 MainViewModel 上的视图时，一切正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T08:16:39.780

我同意直接在模型中设置视图是不好的。但无论如何，我尝试了您的解决方案（两者）并且 SubViewB 仍未加载。构造函数被调用，但从不调用`SubViewB_Loaded`。因此，结果是 SubViewB 永远不会显示。

`datacontextchanged`永远不会在`contentcontrol`. 所以，我仍然缺少一些东西。

主要观点：

```
<Window x:Class="WpfApplication2.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525"
    xmlns:local="clr-namespace:WpfApplication2">

<Grid>

    <TextBlock Text="MasterViewPage" />

    <ContentControl x:Name="content">
        <ContentControl.Style>
            <Style TargetType="{x:Type ContentControl}">
                <Style.Triggers>
                    <DataTrigger Binding="{Binding View}" Value="SubViewA">
                        <Setter Property="Content">
                            <Setter.Value>
                                <local:SubViewA />
                            </Setter.Value>
                        </Setter>
                    </DataTrigger>
                    <DataTrigger Binding="{Binding View}" Value="SubViewB">
                        <Setter Property="Content">
                            <Setter.Value>
                                <local:SubViewB />
                            </Setter.Value>
                        </Setter>
                    </DataTrigger>
                </Style.Triggers>
            </Style>
        </ContentControl.Style>
    </ContentControl>
</Grid>
</Window> 
```

在视图模型中：

```
public class MainViewModel : NotifyPropertyChanged
{
    private string _view;

    public string View
    {
        get { return _view; }
        set
        {
            _view = value;
            RaisePropertyChanged(() => View);
        }
    }

    public MainViewModel()
    {
        View = "SubViewA";
    }
}

public class SubViewModelA : MainViewModel
{
    public ICommand OpenViewCommand { get { return new DelegatingCommand(OpenView); } }

    private void OpenView()
    {
        View = "SubViewB";
    }
}

public class SubViewModelB : MainViewModel
{
} 
```

# c# - 我可以使用 SafeHandle 代替 IntPtr 吗？

> ID：11973109
> 
> 赞同：20
> 
> 时间：2012-08-15T16:22:51.467
> 
> 标签：c#, pinvoke, marshalling, handle

我已经在互联网上进行了广泛搜索，但没有找到很好的解释。

我的问题很简单。

我有一个 DLL，它有一个名为 Initialize 的函数，其中一个参数是一个指针，它将接收一个用于后续调用的句柄。另一个参数是一个字符串，为了完整起见，我将列出它。我使用的签名是（以简单的形式）：

```
[DllImport(MyDll)]
static extern bool Initialize([In] string name, out IntPtr handle); 
```

DLL 本身的签名写成：`Initialize(LPTSTR name, HANDLE handle)`带有注释“HANDLE：指向将接收句柄的位置的指针”。

随后的调用形式为

```
[DllImport(MyDll)]
static extern bool DoSomething(IntPtr handle, uint randomParameter); 
```

我一直在阅读`SafeHandle`，我想知道是否可以用它来代替我的 IntPtr 句柄。如果可以，我该怎么做？扩展抽象的 SafeHandle 类不是问题，但我可以直接用我的 IntPtr 替换 SafeHandle（并使用默认编组）还是需要做一些额外的事情？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-15T16:26:51.650

`SafeHandle`您可以在此处找到有关和之间区别的更完整答案`IntPtr`： [IntPtr、SafeHandle 和 HandleRef - 解释](https://stackoverflow.com/questions/526661/intptr-safehandle-and-handleref-explained)

但是，总而言之，`IntPtr`应该在参数实际上是*机器大小指针*的情况下使用-`SafeHandle`应该在参数实际上是 Win32 句柄的情况下使用。这些类型通常不可互换；的大小`IntPtr`会因不同的架构而异（x86 上为 32 位，x64 和 amd64 上为 64 位）。注意：在封面下我相信也`SafeHandle`使用了`IntPtr`）。

此外，与 不同的是，当一个类型被垃圾回收时`IntPtr`，`SafeHandle`实际上执行资源的处置。这可确保在您的程序运行时不会泄露系统资源（尽管您应该尽可能早地使用实例）`Dispose()`。`SafeHandle`请注意，这`SafeHandle`实际上是抽象的，因为有许多不同类型的句柄需要不同的方法来正确处理和处理。

在您的特定情况下，您需要查看您正在调用的 DLL 的文档。如果它是一个 Win32 DLL，那么它可能已经有一个 SafeHandle 类型。如果它是第三方 DLL，那么您可以推出自己的 SafeHandle 实现 - 假设除了`Initialize()`有某个版本`Release()`（或等效版本）之外。

有关 IntPtr 与 SafeHandle 的一些其他有趣的花絮可以在以下位置找到：

[使用 SafeHandle 封装原生资源](http://msdn.microsoft.com/en-us/library/ms182294(v=vs.80).aspx)

[SafeHandle 类参考](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.safehandle.aspx)

[SafeHandles 和关键终结](http://msdn.microsoft.com/en-us/library/fh21e17c.aspx)

# javascript - Array.indexOf 还是介于两者之间？

> ID：11973111
> 
> 赞同：0
> 
> 时间：2012-08-15T16:23:00.123
> 
> 标签：javascript, jquery

我目前正在设计一个允许用户定义一些逻辑的 GUI。我不希望它变得太复杂，所以我将它限制在一组括号内。因此，我们的想法是检查在左括号和右括号之间是否没有任何其他左括号。

例如。`IF ( a + b OR **(** b+ c)`会警告错误。

所以我决定了以下路线：

*   找到第一个开括号
*   找到第一个右括号
*   使用这些索引搜索并找到任何开括号
*   如果找到任何开括号，则显示错误
*   继续循环任何其他逻辑

这是代码。我认为它非常可怕，我相信一定有更好的方法来做到这一点。某种 IndexOf 可能。

```
<select rel="OpenBracket" id="open1">
    <option value=""></option>
    <option value="(">(</option>
</select>
Some True/Fale here
<select rel="CloseBracket" id="close1">
    <option value=""></option>
    <option value=")">)</option>
</select>
AND
<br />
<select rel="OpenBracket" id="open2">
    <option value=""></option>
    <option value="(">(</option>
</select>
Some True/Fale here
<select rel="CloseBracket" id="close2">
    <option value=""></option>
    <option value=")">)</option>
</select>
<button onclick="javascript:TestingRules();">Check</button> 
```

* * *

```
function GetOpenBrackets() {
    var openBracketArray = [];
    jQuery('[rel="OpenBracket"]').each(function() {
        if (jQuery(this).val() == "(") {
            openBracketArray.push(jQuery(this).attr('id'));
        } else {
            openBracketArray.push(jQuery(this).val());
        }

    });
    return openBracketArray;
}

function GetCloseBrackets() {
    var closeBracketArray = [];
    jQuery('[rel="CloseBracket"]').each(function() {
        if (jQuery(this).val() == "(") {
            closeBracketArray.push(jQuery(this).attr('id'));
        } else {
            closeBracketArray.push(jQuery(this).val());
        }
    });
    return closeBracketArray;
}
function TestingRules() {
    var openBrackets = GetOpenBrackets();
    var closeBrackets = GetCloseBrackets();
    var closeBracketIndex;
    var openBracketIndex;
    for (openBracketIndex in openBrackets) {
        if (openBrackets[openBracketIndex] !== "") {

            var foundCloseBracketIndex = -1;
            for (closeBracketIndex in closeBrackets) {
                if (openBracketIndex <= closeBracketIndex) {
                    if (closeBrackets[closeBracketIndex] !== "") {
                        foundCloseBracketIndex = closeBracketIndex;
                        break;
                    }
                }
            }
            if (foundCloseBracketIndex > -1) {
            var openBracketCheck;
                for (openBracketCheck in openBrackets) {

                    if (openBracketIndex < openBracketCheck && closeBracketIndex >= openBracketCheck) {
                        if (openBrackets[openBracketCheck] !== "") {
                            alert('error');
                        }
                    }

                }
            }
        }

    }

    // for testing:
    //  console.log(OpenBracketArray.length);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T16:26:47.067

为什么不只保留一个计数器，或者计算paren堆栈深度？如果您 inc 用于打开括号，dec 用于关闭，并且计数器高于 1，则您有错误。（如果我正确理解了您的要求。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T16:27:27.530

我**相信**你可以简单地尝试实施

一个概念`stack(top=0)`和

`push(top=top+1)`每当你看到`(`和

> [（可选）如果 top>X ，其中 X 是允许的深度，错误输出无效表达式长度]

`pop(top=top-1)`每当你看到`)`。

当表达式完成并且您还剩下任何东西时，`stack(top>0)`您可以推断出表达式不平衡。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T16:27:43.287

与其尝试查找一对括号，为什么不直接搜索连续的两个开括号呢？当您找到第一个左括号时，可能会出现以下两种情况之一：或者后面的内容用右括号括起来（因此用户没有嵌套它们），或者您找到另一个左括号。如果您发现另一个开括号，则用户正在尝试嵌套语句。这使您不必返回并再次搜索相同的空间。

# spring - 使用 Spring 和 JSP 休眠 OneToOne

> ID：11973116
> 
> 赞同：2
> 
> 时间：2012-08-15T16:23:21.057
> 
> 标签：spring, hibernate, jsp

我有一个问题要问：

我必须通过 user.id -> user_login.user_id 将表 user 和 user_login 加入 OneToOne。

问题是当我执行 .updateObject(user) 时，我执行了 2 个查询：

> 休眠：插入用户（创建，修改，电子邮件，名字，姓氏）值（？，？，？，？，？）休眠：插入用户登录（创建，修改，密码，user_id）值（？，？，？， ?) [2012-08-15 12:15:04,192] [错误] [http-bio-8080-exec-1] SqlExceptionHelper [144]: 列 'user_id' 不能为空

并且看起来两个对象之间没有引用。如果进入实体用户，方法 setUserLogin 我添加行 userLogin.setUser(this); 它的工作，但老实说，我不觉得这种方式优雅。我在实体配置中是否遗漏了什么可能不会自动执行的操作？

谢谢

这是我的实体

```
@Entity
@NamedQueries({ @NamedQuery(name = "user.list", query = "select u from User u") })
public class User implements java.io.Serializable {

    @Column(name = "first_name", nullable = true)
    private String firstName;   

    @OneToOne(mappedBy = "user", cascade = CascadeType.ALL, fetch = FetchType.LAZY)
    @JoinColumn(name="user_id", nullable=false)
    private UserLogin userLogin;

    public String getFirstName() {
        return firstName;
    }

    public void setFirstName(String firstName) {
        this.firstName = firstName;
    }

    public UserLogin getUserLogin() {
        return userLogin;
    }

    public void setUserLogin(UserLogin userLogin) {
        this.userLogin = userLogin;
        //userLogin.setUser(this); THIS IS THE LINE THAT FIXES IT, BUT I DONT FIND THIS WAY ELEGANT
    }

}

@Entity
@Table(name="user_login")
public class UserLogin implements java.io.Serializable {

    @Column(name = "password", nullable = false)
    private String password;

    @OneToOne(optional = false, fetch = FetchType.LAZY) 
  private User user;

    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
    }

    public User getUser() {
        return user;
    }

    public void setUser(User user) {
        this.user = user;
    }   

} 
```

JSP 文件：

```
<%@ taglib uri="http://www.springframework.org/tags/form" prefix="form"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/functions" prefix="fn"%>
<html>
<head>
<title>Registration Page</title>
</head>
<body>
    <form:form action="/test" commandName="user">
        <tr>
            <td>User Name :</td>
            <td><form:input path="firstName" /></td>
        </tr>
        <tr>
            <td>Password :</td>
            <td><form:input path="userLogin.password" /></td>
        </tr>
        <tr>
            <td colspan="2"><input type="submit" value="Register"></td>
        </tr>
        </table>
    </form:form>
</body>
</html> 
```

弹簧控制器：

```
@Controller(value = "/")
public class Test { 

  @Autowired
    UserServiceImpl userServiceImpl;

  @RequestMapping(method = RequestMethod.GET, value = "/test")
  public void test(ModelMap model) {

    model.addAttribute("user", new User());

  }

  @RequestMapping(method = RequestMethod.POST, value = "/test")
  public void test(User user) {

    userServiceImpl.update(user);    

  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T18:37:21.273

像往常一样，双向关系确实有拥有的一面。关系的拥有方是被 mappedBy 引用的属性。在您的情况下，实体中的属性`user`是`UserLogin`拥有方。

当关系被持久化到数据库时，只咨询拥有方。这意味着，您必须为`user`属性设置值才能持续存在。为了使内存中的实体图也保持一致，应该设置关系的双方。

在 JPA 2.0 规范中，这是用以下词语来说明的：

> 托管实体之间的双向关系将基于关系拥有方持有的引用进行持久化。开发人员有责任保持拥有方的内存引用和相反方的内存引用在更改时彼此保持一致。

# python - Python findall 转换为数组

> ID：11973118
> 
> 赞同：0
> 
> 时间：2012-08-15T16:23:27.097
> 
> 标签：python

我需要使用 FINDALL 来抓取所有特定的网页并将它们传递到一个数组中，但是只有不带引号的链接这是我到目前为止所拥有的，如果不是一个数组，我可以将一个变量传递给我可以使用的循环中的每个单独的链接他们一个接一个或一次全部

```
#!/usr/bin/env python
import re,urllib,urllib2

Url = "http://www.ihiphopmusic.com/music"
print Url
print 'test .............'
req = urllib2.Request(Url)
print "1"
response = urllib2.urlopen(req)
print "2"
#reads the webpage
the_webpage = response.read()
#grabs the title
the_list = re.findall(r'number-link" href="(.*?)#comments">0</a>',the_webpage)
print "3"
the_list = the_list.split(',')
arrlist = array('c',the_list)
print arrlist 
```

结果

```
http://www.ihiphopmusic.com/music
test .............
1
2
3
Traceback (most recent call last):
  File "grub.py", line 17, in <module>
    the_list = the_list.split(',')
AttributeError: 'list' object has no attribute 'split' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T16:26:41.160

`re.findall`返回非重叠匹配的列表。您正在尝试拆分*列表*，这就是为什么您会收到 AttributeError （`list`对象没有`split`方法）。我不确定您要通过此来完成什么。您想拆分单个匹配项并将其存储在可迭代对象中吗？如果是这样，您可以执行以下操作：

```
import itertools
results = itertools.chain(*[x.split(',') for x in the_list]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T16:32:06.693

据我所知（如果我错了，请纠正我），你已经在那里了 :) 正如@mgilson 指出的那样，它已经是一个列表：

```
#grabs the title
the_list = re.findall(r'number-link" href="(.*?)#comments">0</a>',the_webpage)
print "3"
print type(the_list)
print the_list 
```

所以你可以迭代它来做你想做的事：

```
for item in the_list:
    print item 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T16:37:41.347

'split' 是字符串对象的属性，而不是列表对象。AttributeError 源于尝试在列表上使用 split 。如果你打印 the_list，你会看到它已经是一个列表。如果要拆分列表并将每个 URL 显示在单独的行上，可以使用`print '\n'.join(the_list)`.

# java - 人脸识别中的主成分分析-python/java

> ID：11973120
> 
> 赞同：1
> 
> 时间：2012-08-15T16:23:31.703
> 
> 标签：java, python, computer-vision, face-recognition, pca

我想通过使用主成分分析算法来执行面部识别。我想自己在 python 或 java 中实现该算法，但是我不确定从哪里开始。希望有一些代码示例/教程/参考可以帮助我入门。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T16:40:45.683

您可以从阅读有关 EigenFaces 方法（基于 PCA 的人脸识别）的原始论文开始：

“用于识别的特征脸”：[http ://www.cs.ucsb.edu/~mturk/Papers/jcn.pdf](http://www.cs.ucsb.edu/~mturk/Papers/jcn.pdf)

另外，如果你想找到一些代码示例，OpenCV 是在最新版本中实现的，它也是基于 EigenFaces 的人脸识别器：

[http://opencv.itseez.com/modules/contrib/doc/facerec/facerec_api.html?highlight=face%20recognition#createeigenfacerecognizer](http://opencv.itseez.com/modules/contrib/doc/facerec/facerec_api.html?highlight=face%20recognition#createeigenfacerecognizer)

请注意，这是 OpenCV 的 python 绑定，也是 OpenCV 的 Java 版本，称为 JavaCV。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T16:37:19.473

如果您想编写自己的 PCA 代码，我建议您查看 Wikipedia 文章作为起点。

如果您正在寻找 PCA 代码，请尝试使用[Numpy](http://docs.scipy.org/doc/numpy/reference/generated/numpy.linalg.eigh.html)上的代码。

对于一般的 PCA 建议：通常，将 2D 图像数组转换为 1-D 字节数组（通过堆叠）。如果您对 n 个训练图像中的每一个都执行此操作，并假设每个训练图像在展平时都是 p 像素，那么您就有了 PCA 的 nxp 训练集！（注意：PCA 有许多技巧，例如对数据取零意义等......）

此外，有大量文献表明[非负矩阵分解更适合面部识别](http://www.cvc.uab.es/~jordi/FinalCCIA2002.pdf)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T00:51:24.587

这是一个使用 python 的简单教程：[http ://www.janeriksolem.net/2009/01/pca-for-images-using-python.html](http://www.janeriksolem.net/2009/01/pca-for-images-using-python.html)

# android - 检查设备上安装的应用程序列表并找到我的应用程序的包名称？

> ID：11973131
> 
> 赞同：0
> 
> 时间：2012-08-15T16:24:32.443
> 
> 标签：android

我试图通过提供应用程序名称来查找我的应用程序的包名称。以下方法在 Droid3 上花费了很长时间。我该如何优化这个或者我错过了什么？

```
 String                     sPackageName        = null;

   PackageManager           pm                  = m_Context.getPackageManager();

 //get a list of installed apps.
  List<ApplicationInfo>     packages            = pm.getInstalledApplications(PackageManager.GET_META_DATA);

  ApplicationInfo   ap  = new ApplicationInfo();
  ap.loadLabel(pm);

   for (ApplicationInfo packageInfo : packages) {

        String          sApp                = packageInfo.loadLabel( pm ).toString();

        //Log.d(TAG, "Installed AppName = " + appName + "  ,package :" + packageInfo.packageName );
        //Log.d(TAG,   "Launch Activity :" + pm.getLaunchIntentForPackage(packageInfo.packageName)); 

        if( sApp.compareTo( sAppName ) == 0 ){

            sPackageName    = packageInfo.packageName;
            break;
        }

   }// the getLaunchIntentForPackage  

   return sPackageName; 
```

谢谢， DK

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T16:49:12.957

您无需调用`loadLabel()`来查找包名称，只需`packageName`直接从`ApplicationInfo`or中获取`ResolveInfo`并进行比较即可。

使用`loadLabel()`or`loadIcon()`非常耗时。

# c# - 为什么线程不起作用？

> ID：11973132
> 
> 赞同：0
> 
> 时间：2012-08-15T16:24:37.123
> 
> 标签：c#, .net, multithreading, .net-4.0, parallel-processing

这是我的代码：

```
using System;

using System.Collections;
using System.Collections.Generic;
using System.Collections.Concurrent;
using System.Linq;

using System.Threading;
using System.Threading.Tasks;

using System.IO;
using System.IO.MemoryMappedFiles;

namespace CopyFile
{
class Program
{
    static void Main()
    {
        long length = 0;
        byte[] buffer;
        string source_path, dest_path;
        source_path = Console.ReadLine();
        dest_path = Console.ReadLine();
        FileInfo fi = new FileInfo(source_path);
        length = (int)fi.Length;
        // Create disk file
        using (FileStream fs = File.Create(dest_path))
        {
            fs.Close();
        }
        // Create unnamed MMF
        var mmf1 = MemoryMappedFile.CreateFromFile(source_path, FileMode.OpenOrCreate, null, length);
        // Create reader to MMF
        var reader = mmf1.CreateViewAccessor(0, length, MemoryMappedFileAccess.Read);
        // Create unnamed MMF
        var mmf2 = MemoryMappedFile.CreateFromFile(dest_path, FileMode.Create, null, length);
        // Create writer to MMF
        var writer = mmf2.CreateViewAccessor(0, length, MemoryMappedFileAccess.Write);

        int read_block = int.Parse(Math.Min(length, 512 * 1024).ToString());//4k
        int end_read_block = int.Parse(length.ToString()) % read_block;

        int[] offset_array = new int[int.Parse((length - read_block).ToString()) / read_block];
        for (int offset = 0,i=0; i < int.Parse((length - read_block).ToString()) / read_block; i++,offset += read_block)
        {
            offset_array[i] = offset;
        }

        /*
        Parallel.ForEach<int>(offset_array, offset =>
        {
            // Read from MMF
            buffer = new byte[read_block];
            reader.ReadArray<byte>(offset, buffer, 0, read_block);
            // Write to MMF
            writer.WriteArray<byte>(offset, buffer, 0, read_block);
        });
         */
        foreach (int offset in offset_array)
        {
            // Read from MMF
            buffer = new byte[read_block];
            reader.ReadArray<byte>(offset, buffer, 0, read_block);
            // Write to MMF
            writer.WriteArray<byte>(offset, buffer, 0, read_block);
        }

        buffer = new byte[end_read_block];
        reader.ReadArray<byte>(length - end_read_block, buffer, 0, end_read_block);
        // Write to MMF
        writer.WriteArray<byte>(length - end_read_block, buffer, 0, end_read_block);

    }
}
} 
```

我尝试复制一个文件并将其粘贴到它正在工作的另一个位置

但是当我尝试使用 Parallel.foreach 或 Parallel.for 复制一个文件时，复制的文件与源文件不同

（我评论了 Parallel.foreach 部分）

我不明白为什么

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T16:33:31.273

在您的代码中；

```
Parallel.ForEach<int>(offset_array, offset =>
{
    // Read from MMF
    buffer = new byte[read_block];
    reader.ReadArray<byte>(offset, buffer, 0, read_block);
    // Write to MMF
    writer.WriteArray<byte>(offset, buffer, 0, read_block);
}); 
```

`buffer`是一个共享变量，所以所有线程都会共享它。例如，线程 1 将分配缓冲区，从文件中读取，线程 2 将重新分配缓冲区并读取文件，线程 1 将写入线程 2 缓冲区的内容。

为了让它更好地工作，让缓冲区成为循环中的局部变量，a'la;

```
Parallel.ForEach<int>(offset_array, offset =>
{
    // Read from MMF
    byte[] buffer = new byte[read_block];
    reader.ReadArray<byte>(offset, buffer, 0, read_block);
    // Write to MMF
    writer.WriteArray<byte>(offset, buffer, 0, read_block);
}); 
```

这将允许所有线程拥有自己的本地缓冲区。

虽然查看[文档](http://msdn.microsoft.com/en-us/library/dd267585)会让事情看起来很黯淡，但任何实例方法（ReadArray/WriteArray）都不能保证是线程安全的。换句话说，即使你解决了缓冲区问题，也不能保证一切都会奏效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T16:42:31.637

您复制文件的方法不好。除了 Joachim Isaksson 描述的问题之外，问题是您同时从多个线程访问文件流。这意味着可能会发生一个线程 T1 读取数据，然后调度程序将控制权传递给线程 T2，线程 T2 读取数据然后将其写入目标。当控制权返回到 T1 并写入读取数据时，您将得到一个损坏的文件。没有理由使用并发来复制文件，因为 CPU 不是此操作的瓶颈。你不会得到更快的结果，你只会浪费 CPU 周期。

# javascript - 无法在 jsTree 中通过 HTTP 加载 XML 文件

> ID：11973133
> 
> 赞同：4
> 
> 时间：2012-08-15T16:24:37.940
> 
> 标签：javascript, jquery, jstree

我又在问这个问题。我有这段代码可以加载基于 XML 文件的 jsTree：

```
$("#div").jstree({
    "xml_data" : {
        "ajax" : {
            "url": "http://192.168.101.1/xml/jstree.xml"
        },
        "xsl" : "nest"
    },
    "plugins" : ["themes", "xml_data", "ui","types"] 
```

当文件与我的脚本在同一台服务器上时，它可以工作。我的树加载。

```
"url": "jstree.xml" 
```

但是当我这样做时：

```
"url": "http://192.168.101.1/xml/jstree.xml" 
```

我一直在页面上无限加载。它是同一个 XML 文件，当我输入浏览器时，我绝对可以手动访问该 XML。

有人见过 jsTree 的这个问题吗？有解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T21:50:19.110

很确定这是一个跨域限制。您无法获得 XML 跨域。因此，解决方法是例如服务器端代理解决方案

```
<?php readfile($_GET['url']) ?> 
```

[更多细节在这里](https://stackoverflow.com/questions/1550839/need-help-with-getting-cross-domain-xml-with-javascript)

或者使用[yahoo 管道](http://pipes.yahoo.com/pipes/)将远程 xml 数据转换为 jsonp。查看 jstree 文档，您似乎可以传递一个 jquery ajax 对象，希望该对象可以是设置为执行 jsonp 的对象。或者手动获取一个 jsonp 响应，并将其作为 json 对象传递给 jstree。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T19:13:22.933

我通过创建服务器端脚本并在我的 jquery 中调用脚本文件来解决此问题。它运作良好。

# objective-c - 一种使用 AVFoundation 将视频上传到 php 服务器的方法？

> ID：11973134
> 
> 赞同：0
> 
> 时间：2012-08-15T16:24:40.513
> 
> 标签：objective-c, ios5

我想知道使用 AVfoundation 将视频以 h264 格式上传到服务器的最佳方法是什么。我将使用 NSURL 和某种形式的 httprequest 每隔 30 秒发布一次数据。我想知道如果有任何已建立的图书馆来缓解我的生活，最好的上传方式是什么？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T16:49:42.247

您可以将 NSURLConnection 与 NSMutableURLRequest 一起使用。分配一个 NSInputStream 使用

```
- (void)setHTTPBodyStream:(NSInputStream *)inputStream 
```

方法。

检查文档： [https](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableURLRequest_Class/Reference/Reference.html) ://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableURLRequest_Class/Reference/Reference.html https://developer.apple.com/library/mac/ #documentation/Cocoa/Reference/Foundation/Classes/nsurlconnection_Class/Reference/Reference.html [https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSInputStream_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSInputStream_Class/Reference/Reference.html)

# java - JTextComponent 键盘映射

> ID：11973135
> 
> 赞同：5
> 
> 时间：2012-08-15T16:24:41.450
> 
> 标签：java, swing, keymapping, jtextcomponent

我需要创建一个派生自`JTextComponent`（`JTextPane`实际上是从）的类，其中至少一个**默认**键映射已更改。也就是说，在我的特殊 JTextPane 中，我希望 ">" 击键来执行一个操作，而不是将该字符添加到文本窗格，因为默认情况下所有可打印的键入字符都会被处理。

为了阻止正常行为，有以下 API：

*   `JTextComponent.getKeymap()`
*   `Keymap.addActionForKeyStroke()`
*   `JTextComponent.setKeymap()`

但是，我发现尽管这些方法不是静态的，但它们确实会影响`JTextComponent`我的应用程序中所有 s 使用的键映射。没有可以克隆 Keymap 的简单机制，这可能会解决问题，或者我错过了什么。

我所追求的是一种为我的`JTextPane`类而不是为所有`JTextComponent`派生类更改键映射的方法。

还是我应该去别处寻找？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T18:25:15.340

恕我直言，这有点难以理解，但答案就在这里： [Tim Prinzing 的 Using the Swing Text Package](http://www.comp.nus.edu.sg/~cs3283/ftp/Java/swingConnect/text/text/text.html#keymaps)

这篇文章的作者 Tim Prinzing，根据源代码，我相信他也是 JTextComponent 的作者，提供了一个我将评论的示例：

```
 JTextField field = new JTextField();
// get the keymap which will be the static default "look and feel" keymap
      Keymap laf = field.getKeymap();
// create a new keymap whose parent is the look and feel keymap
      Keymap myMap = JTextComponent.addKeymap(null, laf);
// at this point, add keystrokes you want to map to myMap
      myMap.addActionForKeyStroke(getKeyStroke(VK_PERIOD, SHIFT_DOWN_MASK), myAction); 
// make this the keymap for this component only.  Will "include" the default keymap
      field.setKeymap(myMap); 
```

我的错误是将我的击键添加到 getKeymap 返回的键映射中，而不是让它给孩子。恕我直言，名称 addKeymap() 令人困惑。它可能应该是 createKeymap()。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-15T20:35:44.040

我会选择一个特定的[文档](http://docs.oracle.com/javase/6/docs/api/javax/swing/text/Document.html)，特别是如果您希望您的映射仅对实例有效而不是全局有效。

以下是捕获键并执行适当操作的示例：

```
JFrame f = new JFrame();

StyledDocument d = new DefaultStyledDocument() {
   @Override
   public void insertString(int offs, String str, AttributeSet a) throws BadLocationException {
      if (">".equals(str)) {
         // Do some action
         System.out.println("Run action corresponding to '" + str + "'");
      } else {
         super.insertString(offs, str, a);
      }
   }
};

JTextPane t = new JTextPane(d);
f.add(t); 
```

# maven-plugin - 在 mvn 发布期间找不到插件错误：执行

> ID：11973138
> 
> 赞同：1
> 
> 时间：2012-08-15T16:24:50.427
> 
> 标签：maven-plugin, maven-release-plugin, cobertura, build-error

我正在尝试在我的项目上执行 mvn release:perform 并在下面粘贴错误。

我在项目的任何地方都没有提到 org.codehaus.mojo:cobertura-maven-plugin 的任何依赖项，它也不在 maven settings.xml 文件中，但它仍然从某个地方爬升。顺便提一下，我可以使用 mvn clean compile install 成功构建项目，并且 mvn release:prepare 命令成功运行。

有人可以帮忙，让我知道如何摆脱这个错误。

```
ERROR
=====
[INFO] [ERROR] BUILD ERROR
[INFO] [INFO] ------------------------------------------------------------------------
[INFO] [INFO] The plugin 'org.codehaus.mojo:cobertura-maven-plugin' does not exist or no valid version could be found
[INFO] [INFO] ------------------------------------------------------------------------
[INFO] [INFO] For more information, run Maven with the -e switch
[INFO] [INFO] ------------------------------------------------------------------------
[INFO] [INFO] Total time: 13 seconds
[INFO] [INFO] Finished at: Wed Aug 15 17:03:36 BST 2012
[INFO] [INFO] Final Memory: 28M/51M
[INFO] [INFO] ------------------------------------------------------------------------
[INFO] ------------------------------------------------------------------------
[ERROR] BUILD ERROR
[INFO] ------------------------------------------------------------------------
[INFO] Maven execution failed, exit code: '1'

[INFO] ------------------------------------------------------------------------
[INFO] Trace
org.apache.maven.lifecycle.LifecycleExecutionException: Maven execution failed, exit code: '1' at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:719) at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeStandaloneGoal(DefaultLifecycleExecutor.java:569) at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoal(DefaultLifecycleExecutor.java:539) at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalAndHandleFailures(DefaultLifecycleExecutor.java:387) at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeTaskSegments(DefaultLifecycleExecutor.java:284) at org.apache.maven.lifecycle.DefaultLifecycleExecutor.execute(DefaultLifecycleExecutor.java:180)  at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:328)
     at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:138)
     at org.apache.maven.cli.MavenCli.main(MavenCli.java:362)
        at org.apache.maven.cli.compat.CompatibleMain.main(CompatibleMain.java:60)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.codehaus.classworlds.Launcher.launchEnhanced(Launcher.java:315)
        at org.codehaus.classworlds.Launcher.launch(Launcher.java:255)
        at org.codehaus.classworlds.Launcher.mainWithExitCode(Launcher.java:430)
        at org.codehaus.classworlds.Launcher.main(Launcher.java:375)
Caused by: org.apache.maven.plugin.MojoExecutionException: Maven execution failed, exit code: '1' at org.apache.maven.plugins.release.PerformReleaseMojo.execute(PerformReleaseMojo.java:133)
        at org.apache.maven.plugin.DefaultPluginManager.executeMojo(DefaultPluginManager.java:490)
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:694)  ... 17 more
Caused by: org.apache.maven.shared.release.ReleaseExecutionException: Maven execution failed, exit code: '1' at org.apache.maven.shared.release.phase.AbstractRunGoalsPhase.execute(AbstractRunGoalsPhase.java:89) at org.apache.maven.shared.release.phase.RunPerformGoalsPhase.execute(RunPerformGoalsPhase.java:67) at org.apache.maven.shared.release.DefaultReleaseManager.perform(DefaultReleaseManager.java:334)  at org.apache.maven.shared.release.DefaultReleaseManager.perform(DefaultReleaseManager.java:282)  at org.apache.maven.shared.release.DefaultReleaseManager.perform(DefaultReleaseManager.java:262)  at org.apache.maven.plugins.release.PerformReleaseMojo.execute(PerformReleaseMojo.java:129)
        ... 19 more
Caused by: org.apache.maven.shared.release.exec.MavenExecutorException: Maven execution failed, exit code: '1' at org.apache.maven.shared.release.exec.InvokerMavenExecutor.executeGoals(InvokerMavenExecutor.java:375) at org.apache.maven.shared.release.exec.InvokerMavenExecutor.executeGoals(InvokerMavenExecutor.java:393) at org.apache.maven.shared.release.phase.AbstractRunGoalsPhase.execute(AbstractRunGoalsPhase.java:81)  ... 24 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T22:03:20.233

你的 pom.xml 说什么？它应该包含以下内容：

```
<project>
  ...
  <build>
    ...
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-release-plugin</artifactId>
        <version>2.3.2</version>
        <configuration>
          <tagBase>https://svn.apache.org/repos/asf/maven/components/releases</tagBase>
        </configuration>
      </plugin>
    </plugins>
    ...
  </build>
  ...
</project> 
```

# eclipse - 无法在 Eclipse Juno 中打开窗口

> ID：11973139
> 
> 赞同：1
> 
> 时间：2012-08-15T16:25:02.387
> 
> 标签：eclipse, eclipse-juno

我刚刚从 Eclipse Indigo 更新到 Eclipse Juno。

当我尝试使用`Preferences`或之类的选项打开几乎所有窗口时`Switch workspace`，它什么也不做。我发现我唯一可以打开的是`Eclipse Marketplace...`and `Install new software...`。

编辑：我刚刚发现我可以`Preferences`通过`Install new software...`then访问`Available Software Sites`。

# c# - 为什么会这样编译？

> ID：11973142
> 
> 赞同：28
> 
> 时间：2012-08-15T16:25:08.860
> 
> 标签：c#, constants

我为之前在我的代码中多次明确声明的值创建了一个“const”：

```
private static readonly int QUARTER_HOUR_COUNT = 96; 
```

当我对 QUARTER_HOUR_COUNT 进行 96 的搜索和替换时，我无意中也替换了声明，所以它变成了：

```
private static readonly int QUARTER_HOUR_COUNT = QUARTER_HOUR_COUNT; 
```

...但它已编译。我认为这将不允许这样做。为什么它被编译器接受为有效声明？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-15T16:27:34.657

> 我认为这将不允许这样做。为什么它被编译器接受为有效声明？

大概是因为语言规范允许它。您认为语言规范中是否有特定规则禁止它？

如果您的问题真的是“为什么语言规范不禁止这样做” - 我怀疑这是因为可能很难确保您*只*禁止您真正想要禁止的事情，而实际上禁止所有这些事情。

您可能会争辩说，对于直接赋值给自身的*简单*情况，最好在语言规范中有一个特殊情况，但它会在语言中引入复杂性，而收益*相对较小。*

请注意，即使您没有收到*错误消息*，我也希望您收到警告 - 如下所示：

> Test.cs(3,33)：警告 CS1717：对同一变量进行赋值；你的意思是分配别的东西吗？

另请注意，如果您将其设为 a`const`而不仅仅是静态只读变量，那么您*确实*会收到编译时错误：

> Test.cs(3,23): 错误 CS0110: 'Program.QUARTER_HOUR_COUNT' 常量值的评估涉及循环定义

另请注意，根据 .NET 命名约定，应该调用`QuarterHourCount`它，而不是使用 SHOUTY_NAME。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-15T17:01:55.427

代码生成的IL代码是这样的：

```
 IL_0007:  ldsfld     int32 Example.Quat::QUARTER_HOUR_COUNT//Load the value of a static field on the stack
 IL_000c:  stsfld     int32 Example.Quat::QUARTER_HOUR_COUNT// Store the value from the stack in the static field 
```

由于 QUARTER_HOUR_COUNT 的默认值为 0，因此将 0 分配给 QUARTER_HOUR_COUNT

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-15T16:27:33.930

因为变量被初始化为0，然后设置为自身。

我的猜测是它会在设置为自身之前执行一个 new Int() ，这会将其初始化为零。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-15T16:29:33.647

因为编译器会将这一行分解：

```
private static readonly int QUARTER_HOUR_COUNT = QUARTER_HOUR_COUNT; 
```

基本上相当于IL：

```
private static readonly int QUARTER_HOUR_COUNT;
QUARTER_HOUR_COUNT = QUARTER_HOUR_COUNT; 
```

然后显然这也会被更多地分解，但以上应该足以说明我的观点。

所以从技术上讲，它在使用时会以默认值零存在。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-15T16:58:01.430

由于其他人具有隐含的值类型，例如`int`具有默认值，因此在没有显式初始化的情况下声明变量意味着它仍然具有值。

您可以找到任何类型的默认值，如下所示：

```
int i = default(int); 
```

或更一般地说：

```
T t = default(T); 
```

请注意，对于引用类型，默认`null`值为 ，只有值类型才有默认值。

# java - OpenSessionInView 与 PersistentContext（扩展）

> ID：11973145
> 
> 赞同：5
> 
> 时间：2012-08-15T16:25:26.643
> 
> 标签：java, jpa, lazy-loading

我正在研究架构 Hibernate/JPA/Spring/Zk，这些天我把问题加倍，因为我必须学习很多框架。

我有一个问题让我困惑了好几天。

我听说“模式” OpenSessionInView 可以保持休眠事务以进行延迟加载。许多人还说图案不是很干净。

另一方面，据说 PersistentContext 扩展不是线程安全的，因此不适合保持 entityManager 的活动。

那么，这些问题的真正解决方案是什么？我认为这些问题是由 ajax 的引入引起的，它允许更多的可能性，特别是在必要时使用延迟加载来加载一些重的集合。

目前，我在扩展模式下尝试了@PersistenceContext。它正在工作......我必须为我的 JUnit 测试设置它，它在我的 Web 应用程序中也可以使用延迟加载而无需更多配置。

框架（Spring，JPA 2.0）的发展是否意味着现在使用 PersistentContext 更容易、更“干净”？

如果不是这种情况，我们是否应该使用 Spring 中的 OpenSessionInViewFilter 并在事务模式下替换 PersistentContext？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T16:50:05.397

我听到你了。自 2008 年以来，我已经在多个应用程序中实现了这两种模式。现在，我完全放弃了任何有状态模式。当您向客户端引入状态时，您会提出可伸缩性和状态管理问题：您是否在客户端中合并，是否在用户会话中保存，当您通过向导并且对象在保存之前必须是瞬态的时会发生什么？您将如何同步客户端和服务器端状态？当 db 发生变化时会发生什么——客户端是否中断？

看看现有技术的趋势，包括 Spring MVC：模式是构建两个项目：1）restful webservices 2）用户界面。状态通过不可变的域模型共享。当然，您最终可能会维护一组 dto，但它们是可预测的、便宜的并且可以无限扩展。

我的推荐？如果您想重用服务器端验证，请避免通过网络发送代理对象并在客户端处理 dto 或与客户端共享域模型。惰性集合可以通过 Ajax 的细粒度 api 调用加载。这样，您就可以完全控制客户端。

这就是社交网络在过去五年中的扩展方式。

# ios - 按下按钮后如何发送后台电子邮件？

> ID：11973154
> 
> 赞同：0
> 
> 时间：2012-08-15T16:25:42.650
> 
> 标签：ios, xcode, webserver, storyboard

我正在构建一个内部应用程序。我希望能够按下一个按钮，并让应用程序在用户不知情的情况下自动将预定义的电子邮件发送到指定的电子邮件地址。我可以访问网络服务器，但我不太确定这样做的最佳方法是什么。

我在 xcode 中使用故事板，这是 ipad 的单视图应用程序。

非常感谢任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T16:30:18.107

如果您想使用他们在 mail.app 中设置的用户邮件帐户 - 如果没有 MFMailComposeViewController，您将无法做到这一点。

解决方案是：

*   使用一些框架或推出您自己的邮件解决方案，您或用户用他们各自的邮件记录数据填写，然后发送邮件。

*或者*

*   编写一个小的 PHP/Ruby/Java/... 脚本来发送您可以通过 Web 请求（即 REST）触发的邮件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T16:30:19.120

[SKPSMTPMessage](http://code.google.com/p/skpsmtpmessage/)非常适合发送电子邮件而无需 UI。

（确保`CFNetwork.framework`在项目中添加对 的引用。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T16:39:25.467

您可以创建一个可以执行此操作的 PHP 脚本（下面的代码）。使用库，例如`ASIHTTPRequest`​​将用户的电子邮件地址发布到脚本，然后脚本将自动发送消息。

```
<?php

    $to = $_POST["email"]; //this is the user's address; you can replace $_POST["email"] with "user@example.com" to try it out
    $subject = "Subject";
    $body = "Message";
    $headers = "From: Name <noreply@example.com>\r\n" . "X-Mailer: php";

    if (mail($to, $subject, $body, $headers)) {

        //sent

    }

?> 
```

# asp.net-mvc - 在 IIS 7 中将 MVC 2 应用程序添加到 Nancy 站点

> ID：11973158
> 
> 赞同：6
> 
> 时间：2012-08-15T16:25:47.893
> 
> 标签：asp.net-mvc, iis, asp.net-mvc-2, iis-7, nancy

在 IIS 7 中，我使用 Nancy 项目创建了一个网站。然后，我使用 alias 向站点添加了一个 MVC 2 应用程序`api`。我能够完美地访问 Nancy 项目中定义的路线。但是，当我访问 时`/api`，出现以下错误：

```
Could not load type 'Nancy.Hosting.Aspnet.NancyHttpRequestHandler'.

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.Web.HttpException: Could not load type 'Nancy.Hosting.Aspnet.NancyHttpRequestHandler'.

Source Error: 

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.

Stack Trace: 

[HttpException (0x80004005): Could not load type 'Nancy.Hosting.Aspnet.NancyHttpRequestHandler'.]
   System.Web.Compilation.BuildManager.GetType(String typeName, Boolean throwOnError, Boolean ignoreCase) +11588073
   System.Web.Configuration.HandlerFactoryCache.GetTypeWithAssert(String type) +47
   System.Web.Configuration.HandlerFactoryCache.GetHandlerType(String type) +18
   System.Web.Configuration.HandlerFactoryCache..ctor(String type) +27
   System.Web.HttpApplication.GetFactory(String type) +95
   System.Web.MaterializeHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +352
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +375 
```

似乎 MVC 2 应用程序正在尝试使用 NancyHttpRequestHandler 来处理请求。我这样说是因为 Nancy 应用程序中未定义的路由会显示 404 页面。

我尝试了几件事：

1.  对于`Web.config`MVC 2 应用程序，我在`<system.web/>`块中添加了以下内容：

    ```
    <httpHandlers>
      <add verb="*" path="*.mvc" validate="false" type="System.Web.Mvc.MvcHttpHandler, System.Web.Mvc, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    </httpHandlers> 
    ```

2.  对于`Web.config`Nancy 应用程序，我在`<system.web/>`块中添加了以下内容：

    ```
    <httpHandlers>
      <add verb="*" type="Nancy.Hosting.Aspnet.NancyHttpRequestHandler" path="*" />
      <remove verb="*" path="api/*" />
    </httpHandlers> 
    ```

3.  我还尝试在两个应用程序中玩弄`<system.webServer/>`和块中的设置。`<system.serviceModel/>`

当 MVC 2 应用程序嵌入到 IIS 7 的 Nancy 站点中时，如何让其正常运行？任何指导将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T01:35:29.647

您的想法是正确的——您需要阻止将 NancyFx 特定配置部分继承到子 MVC 站点。

在您的根 (NancyFx) 站点中，`<location/>`使用您的正常配置创建一个标签。您的 NancyFx web.config 结构将如下所示。（如果您决定将您的 MVC2 站点升级到 MVC3，我添加了注释以尽量避免您遇到麻烦。）

```
<configuration>
  <configSections/>
  <!-- FYI... configSections cannot be moved into the location tag. If you plan
       to upgrade to MVC3 and use the Razor view engine, those configSection 
       declarations need to live here. If you upgrade to MVC3 and use the Razor 
       view engine, you will need to remove the Razor configSections from the 
       views/web.config files any child MVC3 project. -->
  <system.web /> <!-- site-wide system.web settings -->
  <system.webServer /> <!-- site-wide system.webServer settings -->

  <!-- Put the NancyFx specific configuration here -->
  <location path="." inheritInChildApplications="false"> 
  <!-- The inheritInChildApplications attribute is the magic sauce! :) -->
    <connectionStrings /> 
    <!-- If the connectionStrings are shared by the child site, 
         you could move them out to the main configuration. But they 
         cannot exist in both sections of this file. -->
    <appSettings />
    <system.web>
      <httpHandlers>
        <add verb="*" type="Nancy.Hosting.Aspnet.NancyHttpRequestHandler" path="*" />
      </httpHandlers>
    </system.web>
    <system.webServer>
      <handlers>
        <add name="Nancy" verb="*" type="Nancy.Hosting.Aspnet.NancyHttpRequestHandler" path="*" />
      </handlers>
    </system.webServer>
  </location>
</configuration> 
```

# php - 服务帐户的 Google Analytics API oauth 异常“invalid_grant”。两台服务器上的相同代码。只有一个作品

> ID：11973162
> 
> 赞同：9
> 
> 时间：2012-08-15T16:25:59.687
> 
> 标签：php, api, exception, oauth, google-analytics-api

我正在通过**Service Account**查询 Analytics API 。

我已经在开发服务器上编写了代码，它可以正常工作。在生产服务器上运行相同的代码时，它会抛出：

> Google_AuthException：刷新 OAuth2 令牌时出错，消息：'{“error”：“invalid_grant”}'

我已经尝试创建另一个服务帐户，并且行为是相同的。

oAuth IETF 草案 ( [https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-31](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-31) ) 说明了这个错误：

```
 invalid_grant
           The provided authorization grant (e.g. authorization
           code, resource owner credentials) or refresh token is
           invalid, expired, revoked, does not match the redirection
           URI used in the authorization request, or was issued to
           another client. 
```

这是我写的代码：

```
$GA_CLIENT_ID = 'XX.apps.googleusercontent.com';
$GA_APP_EMAIL = 'XX@developer.gserviceaccount.com';
$GA_APP_NAME = 'XX';
$GA_KEY_FILE = 'XX';

// create client object and set app name
$client = new Google_Client();
$client->setApplicationName($GA_APP_NAME); // name of your app

// set assertion credentials
$client->setAssertionCredentials(
        new Google_AssertionCredentials(
            $GA_APP_EMAIL, // email you added to GA
            array('https://www.googleapis.com/auth/analytics.readonly'),
            file_get_contents($GA_KEY_FILE)  // keyfile you downloaded
            ));

// other settings
$client->setClientId($GA_CLIENT_ID);           // from API console
$client->setAccessType('offline_access');  // this may be unnecessary?

// create service and get data
$service = new Google_AnalyticsService($client);
$result = $service->data_ga->get($ids, $startDate, $endDate, $metrics, $optParams);
return $result; 
```

我还尝试了使用 authenticatedRequest() 而不是 Google_AnalyticsService建议的解决方案（ [https://groups.google.com/forum/?fromgroups#!topic/gs-discussion/3y_2XVE2q7U%5B1-25%5D ）：](https://groups.google.com/forum/?fromgroups#!topic/gs-discussion/3y_2XVE2q7U%5B1-25%5D)

```
$req = new Google_HttpRequest($apiUrl);
$resp = $client::getIo()->authenticatedRequest($req);
$result = json_decode($resp->getResponseBody(), true); 
```

这种替代方案也适用于开发服务器，但不适用于生产服务器。

我对此一无所知。有没有人看到这个/修复它？

谢谢！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-16T00:30:10.647

显然问题是系统时间关闭。通过 NTP 同步工作：

~~`sudo ntpdate npt.ubuntu.com`~~

`sudo ntpdate pool.ntp.org`

### 编辑

正如@RafaSashi 下面建议的那样，`pool.ntp.org`服务器更可靠。使用它代替`ntp.ubuntu.com` *（这是我尝试的第一个工作，因此是最初的选择）*。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-03T17:49:47.187

如果您使用错误的“ServiceAccountId”，也可能导致无效授权。它应该是与 google apis 访问页面中服务帐户客户端 ID 中的客户端 ID 关联的电子邮件。您还必须将此用户添加到您计划访问的谷歌分析帐户。

这让我大吃一惊，因为我认为他们所指的电子邮件地址是我的 google 帐户的电子邮件地址，因为我使用相同的 google 帐户来获取 api 访问权限，就像我为 google 分析所做的那样。我知道 Vir 已经想通了，只是想我会添加这个以防其他人遇到同样的问题，并且像我一样，他们的计算机似乎与 NTP 同步。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-05-15T12:38:49.447

除了 Valer 的回答：

首先，如果尚未安装 NTP，则需要安装它。对于 Debian 或 Ubuntu，这将是这个命令：

```
sudo apt-get install ntp 
```

对于 Redhat 或 CentOS，你需要使用这个：

```
yum install ntp 
```

如果通过同步`npt.ubuntu.com`不起作用，请尝试：

```
sudo ntpdate pool.ntp.org 
```

**资源**

*   [http://www.howtogeek.com/tips/how-to-sync-your-linux-server-time-with-network-time-servers-ntp/](http://www.howtogeek.com/tips/how-to-sync-your-linux-server-time-with-network-time-servers-ntp/)

*   [https://www.digitalocean.com/community/tutorials/how-to-set-up-time-synchronization-on-ubuntu-12-04](https://www.digitalocean.com/community/tutorials/how-to-set-up-time-synchronization-on-ubuntu-12-04)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-09-27T06:47:00.370

在对 Refresh Token 和 Access Token 发出 POST 请求之前，您必须注意**[invalid_grant](https://www.rfc-editor.org/rfc/rfc6749#section-5.2)**错误的两个主要原因。

1.  请求头必须包含“content-type: application/x-www-form-urlencoded”
2.  您的请求负载应该是 url 编码的表单数据，不要作为 json 对象发送。

[RFC 6749 OAuth 2.0将](https://www.rfc-editor.org/rfc/rfc6749#section-5.2)**invalid_grant**定义为： *提供的授权授权（例如，授权代码、资源所有者凭据）或刷新令牌无效、已过期、已撤销、与授权请求中使用的重定向 URI 不匹配，或已发布给另一个客户端.*

我找到了另一篇好文章，[在这里](https://blog.timekit.io/google-oauth-invalid-grant-nightmare-and-how-to-fix-it-9f4efaf1da35)你会发现这个错误的许多其他原因。

[https://blog.timekit.io/google-oauth-invalid-grant-nightmare-and-how-to-fix-it-9f4efaf1da35](https://blog.timekit.io/google-oauth-invalid-grant-nightmare-and-how-to-fix-it-9f4efaf1da35)

[Google Playground](https://developers.google.com/oauthplayground)是帮助您发送请求的最佳工具。 [https://developers.google.com/oauthplayground](https://developers.google.com/oauthplayground)

# android - WordPress 自定义链接电话号码

> ID：11973164
> 
> 赞同：-1
> 
> 时间：2012-08-15T16:26:07.690
> 
> 标签：android, iphone, wordpress, hyperlink

> **可能重复：**
> [如何使用 WordPress 自定义链接创建可点击的电话链接？](https://stackoverflow.com/questions/11951302/how-to-create-clickable-telephone-link-with-wordpress-custom-links)

我正在使用 WordPress 自定义链接菜单，我需要为电话号码创建可点击的链接。我只需要能够创建可点击的链接电话号码，用智能手机激活 onclick。Wordpress 显然去掉了拨打号码所需的“电话：”。在我的手机上单击该链接时，它会将我带到：http：206.522.1677 /。我需要能够访问：http: tel:206.522.1677/。如果您有智能手机，请访问：http:finecolorgems.com/template1/ 并单击：此处测试电话号码。你会看到我的问题。

非常感谢任何建议或帮助！谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T16:35:13.467

不要在电话标签中使用 http://。尝试使用：

```
<a href="tel:+440000000000">00000 000000</a> 
```

就像这里演示的那样：[链接](http://www.simonbingham.me.uk/index.cfm/main/post/uuid/making-a-telephone-number-clickable-on-android-14)

另外，请尝试将数字以纯文本形式输入。iPhone 和 Android 应自动将其作为电话号码提取。（适用于我在 Android 4.0.4 上）

# c# - 不可序列化对象的类似会话的存储选项？

> ID：11973166
> 
> 赞同：2
> 
> 时间：2012-08-15T16:26:26.377
> 
> 标签：c#, session, asynchronous, storage, waithandle

## 背景（如果需要，请跳过此部分）

**如果您愿意，请随意跳过这部分，这只是那些想要更好地理解问题的人的一些背景知识**

在我的站点上的一个操作开始时，我启动了几个异步操作。该操作在操作完成之前返回。这就是我要的。但是，`View`通过此操作加载的 会调用不同控制器中的其他几个操作。其中一些操作依赖于第一页的异步调用的结果，因此我需要能够等待异步调用从另一个控制器完成。我考虑过仅`Session`用于存储 WaitHandles，但由于 WaitHandles 不可序列化，我显然不能这样做。

* * *

## 精简版：

我需要能够`WaitHandle`从一个控制器的某处存储一个异步对象，以便可以在不同的控制器中可靠地检索它。这些`WaitHandles`也需要特定于用户，但我可以处理那部分。只是不要列出一个会使这样做变得不可能的选项。

# reporting-services - Reporting Services 无人参与帐户登录失败

> ID：11973167
> 
> 赞同：2
> 
> 时间：2012-08-15T16:26:27.413
> 
> 标签：reporting-services

我有一个新的 2008 Reporting Services 服务器和报告。报告的数据源设置为使用 Windows 集成安全性。当我尝试运行它时，我得到

报表服务器遇到配置错误。无人参与的执行帐户登录失败。(rsServerConfigurationError)

使用 RS Config Manager 中的执行帐户中指定的帐户，我可以登录服务器和 SQL Mgmt Studio，尽管我对我报告的数据库没有任何权限。知道为什么我会收到此错误吗？它试图登录什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T22:23:11.053

听起来报表服务器正在尝试使用无人参与执行帐户连接到报表数据源中指定的数据库。

如果指定的帐户没有从该数据库读取数据的权限，那么您可以更改数据源连接，例如选择“不需要凭据”，然后将数据源的用户名和密码添加到连接字符串。然而，这并不理想，因为任何有权编辑数据源的人都可以看到用户名和密码。

理想情况下，您需要对授予无人值守执行帐户的源数据库具有权限，或者更改您的数据源以使用不同的连接方法，例如使用存储凭据并指定对源数据库具有权限的帐户（如果您实际上没有需要通过设置无人值守执行帐户启用的功能，然后您可以完全删除它）。

更多信息： http: [//msdn.microsoft.com/en-us/library/ms156302 (v=sql.100).aspx](http://msdn.microsoft.com/en-us/library/ms156302(v=sql.100).aspx)

# java - 如何使用 JPA 在 DB 中保存相似数据的映射

> ID：11973168
> 
> 赞同：0
> 
> 时间：2012-08-15T16:26:28.970
> 
> 标签：java, jpa, rdbms

我不知道如何设计这个 rdbms 问题：

假设我有一个客户，他正在购买。通过购买，他留下了他的数据。我有第二个包含真实客户数据的数据集。收集数据后，我想通过算法找到收集到的客户数据到真实客户的映射。

目前还不清楚如何保存这个映射/算法创建的这些链接。

提议：

```
@Entity
public class Purchase{
    @OneToOne
    private Customerdata customerData;
}

@Entity
public class CustomerData{
    private String firstName;
    private String Lastname;
    private String city;
}

@Entity
public class RealCustomer{

    @OneToMany(cascade=CascadeType.ALL, mappedBy ="RealCustomer")
    private List<CustomerData> customerData = new ArrayList<CustomerData>();
    private String firstName;
    private String Lastname;
    private String city;
} 
```

现在我可以保存我假设的从 RealCustomer 数据到 customerData 列表中的客户数据的映射。

我想这不是最好的主意？

期待你的好建议。我可以利用真实客户数据和获取者客户数据的相似性吗？

请注意，我想保留不一致的数据，例如即使城市相似（'Washington DC' 和'Washington'。我不想丢失这些信息，我可以稍后再次运行匹配算法。

注意：我很好，如果你给我一个粗略的想法。不需要 Java/JPA 代码。

非常感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T16:43:32.250

您可以执行以下操作

```
@Entity
public class Purchase{
@OneToOne
private Customer customer;
}

@Entity
public class Customer{
private String firstName;
private String Lastname;
private String city;
//Below association will only come in picture if customer has real customer data       available when you are collecting the data this way you can clearly identify and separate collected vs real customers
@OneToOne
Customer realCustomer;
} 
```

# delphi - 如何处理在 Delphi 中挂起的第三方函数或线程？

> ID：11973170
> 
> 赞同：2
> 
> 时间：2012-08-15T16:26:32.683
> 
> 标签：delphi, delphi-7

我在我的 Delphi 7 Service 应用程序、Indy、Synapse、Zeolibs 等中使用了很多组件。

我的应用程序总体上是稳定的，我使用 Eurekalog 6 来捕获异常，但在极少数情况下，一些线程会挂起，因为它调用的第 3 方函数挂起，例如 Indy 在尝试发送电子邮件时卡住了。

在很多情况下，挂起的应用程序是我客户的地方，我无法访问他们的计算机，因此我无法进行实时调试。我的应用程序需要高可用性，因此即使它每年挂起一次，我的用户也无法接受。

我现在正在寻找最好的方法来处理这种调试不可行但我仍然需要应用程序自行恢复的情况。如果线程调用的函数挂起，线程是否可以终止？或者，我也可以在发生这种情况时重新启动整个服务。看门狗怎么样？实现它的最佳方法是什么？谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-15T18:40:47.743

我认为你是相当失败主义者。查找并修复错误。这可能很棘手，但这是正确的解决方案。

杀死你不理解行为的线程永远不是解决方案。如果你开始杀死线程，你可能会让事情变得更糟。这可能导致其他运行时错误、死锁等。一旦你开始杀死线程，你就失去了控制。

现在，杀死进程（而不是特定线程）并依靠看门狗服务重新启动进程是安全的。但这是一个非常可怕的解决方案。

您当然应该使用 madExcept、EurekaLog 等工具来调试意外异常。我看到你已经在使用 EurekaLog - 这很好。

死锁（听起来你有死锁）可能更难追上。调试死锁的一种好方法是让您的客户端生成故障转储（例如，来自 Process Explorer）。然后在 WinDbg 中使用 map2dbg 对其进行调试以生成符号堆栈跟踪。这将告诉您哪些线程正在阻塞并揭示死锁。然后修复错误。

有关此死锁调试技术的更多详细信息，请参见此处：[http ://capnbry.net/blog/?p=18](http://capnbry.net/blog/?p=18)

我不熟悉 EurekaLog，因为我使用了 madExcept，但我希望 EurekaLog 具有允许为挂起进程生成线程堆栈跟踪的工具。如果是这样，那么这很可能是您的最佳方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T19:02:23.857

你的问题太模糊了。如果您不知道要归咎于您正在使用的各种组件中的哪一个，那么您修复它的希望为零。最有可能的是您做错了什么，或者您不了解这些组件的工作原理。我非常怀疑这纯粹是组件本身的错误，但是，嘿，无论哪种方式，都取决于您找出问题所在，并解决问题。

您创建的死锁或正在发生的深层进程损坏问题可能会阻止 MadExcept 向您提供任何信息，但值得一试。

要找出哪个是冻结的，如果有的话，那么 madexcept 评论是最好的建议。它将超时（在可配置的秒数之后）并为您引发人为异常，从而中断您挂起的过程。这适用于用户代码，以及线程在 Win32 或内核函数中被阻塞的地方。例如，您可能已将 Indy 设置为无限超时，因为这是 Indy 10 中这些天的默认设置，并且您遇到的是与超时相关的冻结，您希望完成但从未完成的网络活动将完成，导致您的程序“挂起”。这里的解决方法是改变你的超时。

但是，在您弄清楚问题出在哪里之前，我怀疑您是否能够解决它。所以，为此，Marcus 是对的，你应该调查 madExcept。没有它我活不下去。

其次，你真的应该在你的程序中添加跟踪逻辑，这样你就知道它的去向以及在它出现问题之前它在做什么。如果你真的需要帮助，你可以试试 Raize 的 CodeSite。就我个人而言，我发现`OutputDebugString`结合免费的 Microsoft`DebugView`实用程序（以前来自 SysInternals）工具足以在客户端计算机上调试此类问题。

任何具有后台线程但没有跟踪日志记录的程序都是设计不佳的程序。哎呀，任何可能失败或有问题的重要单线程应用程序都需要跟踪日志记录。

即使 MadExcept 或其他异常工具没有帮助，日志记录总是会有所帮助。尽管 CodeSite 也很受欢迎，但 Trace-Logging 通常是一个自己动手的解决方案。

# c - 插座打不开？

> ID：11973171
> 
> 赞同：0
> 
> 时间：2012-08-15T16:26:35.677
> 
> 标签：c, sockets

我正在研究一个函数，它将（当它完成时）返回一个 html 页面的输出。我刚刚从 StackOverFlow 那里得到了帮助，了解了它是如何`recv`工作的，现在我正在完成这个功能。我现在遇到的问题是套接字似乎没有正确打开。该`recv`函数只返回-1（我相信这表示套接字错误）

这是代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <winsock2.h>
#include <windows.h>
#define BUFFERSIZE 4096

char *readsite(const char *url, const char *ip, const int port)
{
    char *req, *ret, *tmp, tmpbuff[256];
    int c, i, q;
    SOCKET sock = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);
    struct sockaddr_in sa = { 0 };
    sa.sin_port = htons(port);
    sa.sin_addr.s_addr = inet_addr(ip);

    for(i = 0; url[i] != 0x00; i++);
    req = malloc((i + 18) * sizeof(char));
    if(!req) return NULL;
    req[0] = 'G';
    req[1] = 'E';
    req[2] = 'T';
    req[3] = ' ';
    for(c = 4, q = 0; q <= i; c++, q++) req[c] = url[q];
    req[c - 1] = ' ';
    req[c + 0] = 'H';
    req[c + 1] = 'T';
    req[c + 2] = 'T';
    req[c + 3] = 'P';
    req[c + 4] = '/';
    req[c + 5] = '1';
    req[c + 6] = '.';
    req[c + 7] = '0';
    req[c + 8] = '\r';
    req[c + 9] = '\n';
    req[c + 10] = '\r';
    req[c + 11] = '\n';
    req[c + 12] = '\0';
    connect(sock, (struct sockaddr*)&sa, sizeof(sa));
    for(i = 0; req[i] != 0x00; i++);
    send(sock, req, i, 0);
    printf("%s %s", req, ip);
    free(req);
    ret = malloc(BUFFERSIZE);
    if(!ret) return NULL;
    c = 0;             // recv value
    i = BUFFERSIZE;    // buffer size
    q = 0;             // loaded bytes
    while((c = recv(sock, tmpbuff, sizeof(tmpbuff), 0)) > 0)
    {
        if((q + c + 1) > i)
        {
                i += BUFFERSIZE;
                if(!(tmp = realloc(ret, i))) return NULL;
                ret = tmp;
        }
    }
 }

int main(void)
{
        readsite("http://www.google.com/", "74.125.226.226", 80);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T16:51:21.660

使用 errno 中的错误代码找出问题所在；perror() 是一个很好的函数，在检查错误代码后调用它！= 0。这是在你的代码中这样做的建议方法：

```
while(1)
{
    if ((c = recv(sock, tmpbuff, sizeof(tmpbuff), 0)) < 0) {
        perror("Receive error");
    }
    else if (c == 0) { 
        break;
    }
    if((q + c + 1) > i)
    {
            i += BUFFERSIZE;
            if(!(tmp = realloc(ret, i))) return NULL;
            ret = tmp;
    }
} 
```

# cuda - “计算能力”是什么意思wrt CUDA？

> ID：11973174
> 
> 赞同：23
> 
> 时间：2012-08-15T16:26:43.510
> 
> 标签：cuda, definition

我是 CUDA 编程的新手，对它了解不多。您能告诉我“CUDA 计算能力”是什么意思吗？当我在我的大学服务器上使用以下代码时，它向我显示了以下结果。

```
for (device = 0; device < deviceCount; ++device) 
{ 
    cudaDeviceProp deviceProp; 
    cudaGetDeviceProperties(&deviceProp, device); 
    printf("\nDevice %d has compute capability %d.%d.\n", device, deviceProp.major, deviceProp.minor);      
} 
```

**结果：**

```
Device 0 has compute capability 4199672.0.
Device 1 has compute capability 4199672.0.
Device 2 has compute capability 4199672.0.
.
. 
```

cudaGetDeviceProperties 返回两个主要和次要字段。你能告诉我这是什么`4199672.0.`意思吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-15T18:19:31.203

计算能力是设备的“功能集”（硬件和软件功能）。您可能听说过 NVIDIA GPU 架构名称“Tesla”、“Fermi”或“Kepler”。这些架构中的每一个都具有以前版本可能没有的功能。

在硬盘驱动器上的 CUDA 工具包安装文件夹中，查找文件`CUDA_C_Programming_Guide.pdf`（或 google），然后找到附录`F.1`。它描述了不同计算能力之间的特征差异。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-12-09T18:46:04.073

正如@dialer 所提到的，计算能力是您的 CUDA 设备的一组与计算相关的功能。随着 NVidia 的 CUDA API 的发展，“计算能力”的数量也在增加。在撰写本文时，NVidia 最新的 GPU 是 Compute Capability 3.5。您可以通过查看Wikipedia 上的[此表](https://en.wikipedia.org/wiki/CUDA#Version_features_and_specifications)来获取有关差异含义的一些详细信息。

正如@aland 建议的那样，您的调用可能失败了，而您得到的是[使用未初始化变量](https://stackoverflow.com/questions/1597405/what-happens-to-a-declared-uninitialized-variable-in-c-does-it-have-a-value)的结果。你应该`cudaGetDeviceProps()`用某种错误检查来包装你的电话；看

[使用 CUDA 运行时 API 检查错误的规范方法是什么？](https://stackoverflow.com/q/14038589/1593077)

讨论执行此操作的选项。

# javascript - 记录每个方法？

> ID：11973181
> 
> 赞同：5
> 
> 时间：2012-08-15T16:27:16.870
> 
> 标签：javascript, node.js, coffeescript

不必为 TRACE 创建自定义记录器，例如遵循调用了哪些方法以及实例化了哪些类，是否有一种简单的方法可以让类下的所有方法都自己记录？这是针对 node.js 应用程序的。

```
class MyClass

  constructor: () ->
    console.log 'MyClass:constructor'

  doThat: () ->
    console.log 'MyClass:doThat'

exports.MyClass = MyClass

myClass = new MyClass()
myClass.doThat() 
```

如果按照我的方式，您会看到**4**条日志消息而不是 2 条（因此必须编写更少的代码来跟踪正在发生的事情）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T17:46:23.570

我最近需要实现这样的东西来跟踪一些复杂的面向对象递归的东西。基本上，我想让一种方法“可追溯”而不会造成太多污染；所以也许解决方案也可以在这里应用。

首先，添加一个使其他函数可追溯的函数：

```
Function::trace = do ->
  makeTracing = (ctorName, fnName, fn) ->
    (args...) ->
      console.log "#{ctorName}:#{fnName}"
      fn.apply @, args
  (arg) ->
    for own name, fn of arg 
      @prototype[name] = makeTracing @name, name, fn 
```

然后，要使用它，只需`@trace`在要跟踪的每个方法之前添加一个：

```
class MyClass
  @trace methodA: ->
    @methodB 42

  @trace methodB: ->
    console.log "method b called with #{n}" 
```

或者只添加一次@trace，然后将所有可跟踪的方法再缩进一层：

```
class MyClass
  @trace 
    methodA: ->
      @methodB 42

    methodB: (n) ->
      console.log "method b called with #{n}" 
```

如您所见`trace`，这有点滥用 CoffeeScript 的语法。`method: -> 'foo'`a 内部`class MyClass`被解释为方法定义。但是`@trace method: -> 'foo'`被解释为调用`trace`函数`MyClass`（它是一个`Function`实例，我们已经向其中添加了`trace`函数）传递一个带有一个`method`键的文字对象。在 JavaScript 中，它类似于`this.trace({method: function() {return 'foo';}})`.

该`trace`函数将只获取该对象并迭代它的键（方法名称）和值（方法），并将函数添加到`MyClass`记录其调用的原型中，然后调用原始方法。

无论如何，输出`(new MyClass).methodA()`将是：

```
MyClass:methodA
MyClass:methodB
method b called with 42 
```

但是，此解决方案不适用于构造函数，因为它们不仅仅是普通方法。

你可以很喜欢这个。您还可以记录传递给每个方法的参数、返回值，如果您愿意，甚至可以为嵌套调用添加缩进（如果您需要调试复杂的问题 =D，生成的跟踪会非常有用）。

* * *

更新：作为一个更有趣的例子，这里有一个典型的复合图案例子的迷你版，几何图形和图形组：http: [//jsfiddle.net/2YuE7/](http://jsfiddle.net/2YuE7/)具有更有趣的跟踪功能。所有的数字都理解这个`move`方法。如果我们有这个复合图形并调用`move`它：

```
f = new Composite [
  new Rectangle 5, 10, 3, 4
  new Composite [
    new Circle 0, 0, 2
    new Circle 0, 0, 4
    new Circle 0, 0, 6
  ]
]

f.move 2, 3 
```

跟踪输出为：

```
(Composite[Rectangle[5,10,3,4],Composite[Circle[0,0,2],Circle[0,0,4],Circle[0,0,6]]]).move(2, 3)
| (Rectangle[5,10,3,4]).move(2, 3)
| -> Rectangle[7,13,3,4]
| (Composite[Circle[0,0,2],Circle[0,0,4],Circle[0,0,6]]).move(2, 3)
| | (Circle[0,0,2]).move(2, 3)
| | -> Circle[2,3,2]
| | (Circle[0,0,4]).move(2, 3)
| | -> Circle[2,3,4]
| | (Circle[0,0,6]).move(2, 3)
| | -> Circle[2,3,6]
| -> Composite[Circle[2,3,2],Circle[2,3,4],Circle[2,3,6]]
-> Composite[Rectangle[7,13,3,4],Composite[Circle[2,3,2],Circle[2,3,4],Circle[2,3,6]]] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-12T16:31:54.143

如果您想使用普通的旧 javascript 执行此操作，我创建了一个服务，您可以向该服务传递一个对象，该对象将返回一个对象，该对象具有记录每个方法的相同 API。[请参阅http://jsfiddle.net/mcgraphix/pagkoLjb](http://jsfiddle.net/mcgraphix/pagkoLjb)上应用的 polyfill 的完整示例

基本思想是：

```
var api = {
   notAMethod: "blah",
   foo: function() {
    console.log("in foo", arguments);
   },

   bar: function(arg) {
    this.foo(arg);
    return this.notAMethod;
   }
}; 

//wrap the api with a logging version
//to watch property changes and keep them in sync, you need the polyfill for Object.watch
//     from https://gist.github.com/eligrey/384583

var createLogger = function(api) {
     var loggingApi = {};

            for (var prop in api) {
                if (typeof api[prop] !== 'function') {
                   loggingApi[prop] = api[prop]; 
                   loggingApi.watch(prop, function(prop, oldVal, newVal){
                       api[prop] = newVal
                       return newVal;
                   });

                } else {

                    loggingApi[prop] = function() {
                        console.log(prop + "() called with args: ", arguments);
                        var returnVal = api[prop].apply(api, arguments);
                         console.log(prop + "() returned: " + returnVal);
                        return returnVal;
                    }
                }
            }
      return loggingApi;
 };
 api.foo('Shhhh... don\'t log me') //no logging
 createLogger(api).foo(); //with logging 
```

# javascript - 如果 textarea 值是数字，请使用 Javascript 检查

> ID：11973197
> 
> 赞同：-5
> 
> 时间：2012-08-15T16:28:14.010
> 
> 标签：javascript, html, forms, textarea

我的网页中有一个名为“contact_form”的表单，其中有一个文本区域，我想在其中只输入数字。如何使用 Javascript 在提交时检查它？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T16:42:25.583

# python - 如何从python正确测试C API，C API将返回码作为错误返回

> ID：11973198
> 
> 赞同：5
> 
> 时间：2012-08-15T16:28:15.740
> 
> 标签：python, testing, automated-tests, ctypes, pytest

## 我的设置

我正在使用 Python 中的 pytest 和 ctypes 测试 C 库中的函数。C 库中的每个函数调用嵌入式 linux PCI 板上的一个函数，然后 C 库函数返回一个整数，该整数映射到一组返回码。如果函数成功，则返回 0，否则返回其他错误代码。

## 问题

我正在寻找有关测试此设置的最佳方法的一些见解，基本上我正在尝试找出测试此库的最佳实践。抛出异常和断言测试用例的最佳方式。我目前使用的测试环境使用的是pytest，切换起来会很痛苦。

由于嵌入式 linux 板具有状态，因此需要为测试设置很多状态以测试所有不同的条件。因此，理想情况下，如果出现错误，python 将捕获测试中发生的所有错误。

## 我当前的设置

目前我有包装 C 库代码的 python 函数。测试将调用 python 代码，如果函数不返回 0，则包装 python 函数将引发异常。因为我使用 ctypes 来调用 DLL 上的函数，所以无论如何，所有 C 函数都由 python 包装，以使它们更易于调用，因此传递参数更容易。

### 优点

*   如果测试或任何中间测试的设置出现问题，则会引发异常。当测试用例设置失败时，这使得调试失败的测试用例变得更加容易。

### 缺点

*   断言函数成功（返回 0）是没有用的，因为在函数返回之前会抛出错误。
*   如果您正在测试在某些条件下调用函数会导致错误，则必须包装测试用例混乱的 try-except 块

    ```
    try:
       return_code = call_to_c_api()
       assert return_code == 0, "Message about test case"
    except MyCustomException:
       assert MyCustomException.message="Return code of python wrapped api" 
    ```

## 另外的选择

不要用 python 库包装 C 库，如果其中一个设置函数不起作用，则不要通过测试断言失败。

### 优点

*   当您期望发生故障时，很容易断言来自 C API 的返回值不是 O

### 缺点

*   为了使测试易于调试，对 C API 的每次调用都需要 Python 测试中的代码以确保它通过。即使它只是一个测试设置的调用。这意味着每次测试的代码行数几乎翻了一番。（或者您无法在设置中捕获错误，并且仅在测试失败时断言。这意味着当测试用例的设置失败时进行痛苦的调试）

如果有人可以对测试它的最佳方法提供任何见解，将不胜感激！可能还有其他我尚未考虑的测试方法！

干杯!

# azure-acs - 以编程方式从 Azure ACS 获取用户身份

> ID：11973201
> 
> 赞同：0
> 
> 时间：2012-08-15T16:28:21.687
> 
> 标签：azure-acs

这个问题有点菜鸟，但我在互联网上找不到信息（也许我搜索错误？）

我们配置了 Azure ACS，并将其用作我们网站的身份验证服务。但是现在我们需要构建一个应用程序，通过已知的用户名和密码，它将接收来自 ACS 的用户声明。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T19:27:09.900

是的，这是可能的。

需要注意的一件事 - 使用 ACS，您可以选择各种不同的令牌提供程序来允许（又名 STS-es）。它们中的每一个都默认为您提供一组不同的声明，因此您可能需要丰富这些声明。

这是一段代码，您可以尝试查看代码中已经从 ACS 返回的声明：

```
// NOTE: This code makes the assumption that you have .NET 4.5 on the machine.  It relies on 
// the new System.Security.Claims.ClaimsPrincipal and System.Security.Claims.ClaimsIdentity
// classes.

// Cast the Thread.CurrentPrincipal and Identity
System.Security.Claims.ClaimsPrincipal icp = Thread.CurrentPrincipal as System.Security.Claims.ClaimsPrincipal;
System.Security.Claims.ClaimsIdentity claimsIdentity = icp.Identity as System.Security.Claims.ClaimsIdentity;

// Access claims
foreach (System.Security.Claims.Claim claim in claimsIdentity.Claims)
{
    Response.Write("Type : " + claim.Type + "- Value: " + claim.Value + "<br/>");
} 
```

亚当霍夫曼 Windows Azure 博客 - [http://stratospher.es](http://stratospher.es) Twitter - [http://twitter.com/stratospher_es](http://twitter.com/stratospher_es)

# internet-explorer - Twitter Bootstrap 2.0 Carousel 和 IE 过渡问题

> ID：11973202
> 
> 赞同：2
> 
> 时间：2012-08-15T16:28:26.957
> 
> 标签：internet-explorer, twitter-bootstrap, carousel, transitions

我知道这对于某些幻灯片转换在 IE 中不起作用的人来说一直是个问题。 [我在 SO](https://stackoverflow.com/questions/9490351/twitter-bootstrap-carousel-ie-issues)和网络上多次看到的解决方案是将类添加`slide`到 myCarousel div。所以，我访问了 Bootstrap 网站并将标准轮播的代码复制并粘贴到我的网页中，并且......在 IE 中没有过渡。我什至在 IE 中访问了[Twitter Bootstrap 的 Carousel 页面](http://twitter.github.com/bootstrap/javascript.html#carousel)，你猜怎么着？IE9及以下在他们自己的页面上没有过渡，他们甚至添加了类`slide`到 myCarousel div。Bootstrap 2.0 的其他人是否会遇到这种情况（我在我的页面上使用最新的 JQuery 副本，1.8.0，如果这有所不同的话。另外，我正在使用自定义版本的 Bootstrap，其中包含转换和轮播捆绑到bootstrap.js 文件）。这是我复制和粘贴的代码，针对我自己的图像进行了修改：

```
<div id="myCarousel" class="carousel slide">
        <div class="carousel-inner">
          <div class="item active">
            <img src="img/CRC615_LivingRoom_cropped.jpg" alt="A living room with wrap around balcony and view of Gulf of Mexico at Caribe Resort">
            <div class="carousel-caption">
              <h4>First Thumbnail label</h4>
              <p>Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit.</p>
            </div>
          </div>
          <div class="item">
            <img src="img/OutcastCharterDocks-rentals-charters-cruises.jpg" alt="Outcast Marina in Orange Beach offers vacationers parasailing and jetski rentals">
            <div class="carousel-caption">
              <h4>Second Thumbnail label</h4>
              <p>Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit.</p>
            </div>
          </div>
          <div class="item">
            <img src="img/CobaltRestaurantOrangeBeach.jpg" alt="">
            <div class="carousel-caption">
              <h4>Third Thumbnail label</h4>
              <p>Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit.</p>
            </div>
          </div>
        </div>
        <a class="left carousel-control" href="#myCarousel" data-slide="prev">&lsaquo;</a>
        <a class="right carousel-control" href="#myCarousel" data-slide="next">&rsaquo;</a>
      </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T21:58:24.633

现在已修复，请获取最新版本的引导程序或我所做的，因为我已经使用旧版本完成了检查，请点击此处 [http://tutewall.com/bootstrap-carousel-transition-fixed/](http://tutewall.com/bootstrap-carousel-transition-fixed/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T17:15:34.960

Twitter Bootstrap 的 Carousel 插件使用 CSS3 过渡。 [IE9 不支持 CSS3 过渡](http://caniuse.com/#feat=css-transitions)。

如果您想在 IE 中进行转换，您需要找到一个 shim 或一些代码修改（如评论中所建议的那样）以添加支持。

# c# - Windows 8 应用程序列表视图是否支持子项？

> ID：11973211
> 
> 赞同：0
> 
> 时间：2012-08-15T16:29:31.120
> 
> 标签：c#, windows-8, microsoft-metro

我有一个动态创建的，每个项目`listview`包含 4 个。`stackpanels`在每个`stackpanel`我都有`textblocks`我需要访问的数据。但是，`yourListView.SelectedItems[row_Index].SubItems[col_index].Text`不工作。没有`SubItems`选择。我将如何实现我的目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T16:52:54.147

我认为您误解了 WPF 列表视图，是的 Stackpanels 没有属性 subItems 您需要这样调用它：

`yourListView.SelectedItems[row_Index].Children[col_index].Text`

# c# - 互操作的自动化错误

> ID：11973212
> 
> 赞同：0
> 
> 时间：2012-08-15T16:29:31.410
> 
> 标签：c#, .net, com-interop

我最近不得不重建为从 VB6 调用而创建的 C# 互操作。我已使用 regasm 注册它（使用代码库开关）并将 tlb 添加为对 VB6 项目的引用，但是当我尝试调用它时，我收到以下自动化错误：-2146232832 (0x80131600)

如果我以完全相同的方式注册现有的互操作 dll 并添加到我的项目中，它就可以正常工作。我能想到的唯一区别是该项目已经从 VS8 升级到 VS9（虽然是相同的 .net 版本），而我现在正在一台 64 位机器上编译（我知道这方面存在问题）。我已将项目设置为编译为 x86，但仍然出现自动化错误。

有任何想法吗？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T19:08:25.617

您的 C# 代码正在引发异常并且没有被捕获。特别是 ApplicationException。这是框架代码从不抛出的异常，它必须位于您的 C# 源代码中。

如果找不到问题，则需要调试代码。使用 Project + Properties，Debug 选项卡执行此操作。选择“启动外部程序”并将其指向 c:\program files\microsoft visual studio\vb98\vb6.exe。然后 Debug + Exceptions，勾选 CLR exceptions 的 Throw 复选框。

您现在可以按 F5 并开始运行 VB6 IDE。加载您的 VB6 项目并重现问题。调试器在引发异常的 C# 代码行处停止。

# html - Youtube HTML5 iframe embed 在 IE 播放时有大纲

> ID：11973214
> 
> 赞同：0
> 
> 时间：2012-08-15T16:29:38.680
> 
> 标签：html, css, internet-explorer, youtube, embed

我的页面中嵌入了一个 Youtube HTML iframe，代码如下：

```
<iframe src="http://www.youtube.com/embed/gI2eO_mNM88?rel=0&amp;autohide=1&amp;color=white&amp;showinfo=0&amp;theme=dark&amp;wmode=transparent&amp;hd=1" width="470" height="264" frameborder="0" allowfullscreen webkitAllowFullScreen></iframe> 
```

如果我按下播放键，我会在 IE9+8 中得到一个 1px 的虚线轮廓。我的 CSS 中有这个：

```
embed,
object {
  outline: 0;
  overflow: hidden
} 
```

但这似乎没有帮助。它在 Chrome 或 FF（均为最新版本）中没有大纲。我还尝试将 iframe 放在与 iframe 尺寸相同的 div 中，并给出该 div 溢出：隐藏，但也没有运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T08:13:27.950

我为这种情况创建了一个小提琴：http: [//jsfiddle.net/keaukraine/UmTZy/](http://jsfiddle.net/keaukraine/UmTZy/)

如您所见，轮廓出现在`iframe`元素内部。您不能影响内部元素的样式，`iframe`因为它超出了您的网页范围。

一个相当丑陋的解决方案是放置`iframe`它隐藏 1px 轮廓的方式。我把它放在稍微小一点的 div 里面并定位它，所以它隐藏了这个轮廓。如果这个解决方案适合你，你可以在这个小提琴中看到它：http: [//jsfiddle.net/raQEH/](http://jsfiddle.net/raQEH/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T16:58:36.290

给你的 iframe 一个 id="iframe" 并试试这个：

```
#iframe:active, #iframe:focus {
   border: none;
   outline: none;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T16:58:46.973

`border:0;`如果大纲不起作用，请尝试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T22:03:24.657

我刚刚在 youtube 开发论坛上发布了这个问题。希望他们可以从他们的网站解决这个问题

[https://groups.google.com/forum/?fromgroups#!topic/youtube-api-gdata/gqt_G5d8HYM%5B1-25%5D](https://groups.google.com/forum/?fromgroups#!topic/youtube-api-gdata/gqt_G5d8HYM%5B1-25%5D)

# regex - 匹配除包含 '_iq_' 之外的所有内容

> ID：11973215
> 
> 赞同：2
> 
> 时间：2012-08-15T16:29:40.417
> 
> 标签：regex, string, perl

**编辑：**对不起！我应该在之前提到这一点。在您的回答中，请不要假设下面列出的项目是我正在搜索的目录中的唯一内容。这些是我想要匹配的东西，除了指定的两个。谢谢。

这应该很容易，但我尝试的一切都没有成功。我有以下需要匹配的项目：

```
bodipr2__ds_di_uat
bodipr2__ds_dw_uat
bodipr2__ds_iq_uat
bodipr2__ds_iq_uat_back
bodipr2__ds_itsys_uat
bodipr2__ds_ppp_uat
bodipr2__ds_psd_uat
bodipr2__ds_usage_uat
bodits2__ds_pef_tst
bodits2__ds_ppp_tst
bodits2__ds_pri_tst 
```

除了我想省略两个包含`_iq_`. 所以我写了一个这样的表达式：

```
bodi.*?__ds[^_iq_] 
```

但这忽略了所有这些。如果我试试这个：

```
bodi.*?__ds_[^iq] 
```

那省略了`_itsys_`一个。我猜它匹配不包含“i”或“q”的所有内容。我希望它省略该位置不包含`'_iq_'`的内容。

我很尴尬，我什至不得不问这个，但如果有人能指出我正确的方向，我会非常感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T16:36:05.060

试试这个：`bod[a-z\d]+__ds_(?!iq_)\w+`
我已经从[http://regexr.com?31rho测试过](http://regexr.com?31rho)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T17:03:11.500

并且只是为了解释**为什么您尝试**的( `[^iq]`)**不起作用**，这是因为`[^iq]`意思是“匹配任何一个字符，除非字符是“i”或“q”。`[^_iq_]`除了它也匹配“_”之外，意思相同。

所以，在你的情况下，

*   `bodi.*?__ds[^_iq_]`会匹配其中的 100%，因为每个单独的 sring 在“ds”之后都包含“_”，这将匹配`[^_iq_]`

*   `bodi.*?__ds_[^iq]`将仅匹配在“ds”之后包含字母“i”或“q”的行，这将是 - 正如您现在可以猜到的 -**两个** `_iq_`AND`_itsys_`行。

匹配“不包含 iq”的正确方法是`(?!iq)`Godspeed 或 FailedDev 的答案中显示的否定前瞻。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T16:34:53.530

如果有匹配项，您可以跳过*并*处理其余部分：

```
#!/usr/bin/env perl

use strict;
use warnings;

while (<DATA>) {
    next if /^bodipr2__ds_iq_/;  # Skip if bodipr2__ds_iq_ is matched

    # Process data
    print;
}

__DATA__
bodipr2__ds_di_uat
bodipr2__ds_dw_uat
bodipr2__ds_iq_uat
bodipr2__ds_iq_uat_back
bodipr2__ds_itsys_uat
bodipr2__ds_ppp_uat
bodipr2__ds_psd_uat
bodipr2__ds_usage_uat
bodits2__ds_pef_tst
bodits2__ds_ppp_tst
bodits2__ds_pri_tst 
```

使用[`grep`](http://perldoc.perl.org/functions/grep.html)：

```
#!/usr/bin/env perl

use strict;
use warnings;

my @strings = qw(
  bodipr2__ds_di_uat
  bodipr2__ds_dw_uat
  bodipr2__ds_iq_uat
  bodipr2__ds_iq_uat_back
  bodipr2__ds_itsys_uat
  bodipr2__ds_ppp_uat
  bodipr2__ds_psd_uat
  bodipr2__ds_usage_uat
  bodits2__ds_pef_tst
  bodits2__ds_ppp_tst
  bodits2__ds_pri_tst
);
@strings = grep /^bodipr2__ds_iq_/ ? 0 : 1, @strings; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T16:33:37.560

您可以使用`not`反转：

```
if (not /^bodi.*_iq_.*/) {
  print;
} 
```

或者：

```
if ($line !~ /^bodi.*_iq_.*/) {
   print;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-15T16:36:45.123

这个怎么样：

```
 use strict;
    use warnings;

    for (<DATA>)
    {
        chomp;
        if (! m/bodi.*_iq_/)
        {
            print $_ . "\n";
        }
    }

__DATA__
bodipr2__ds_di_uat
bodipr2__ds_dw_uat
bodipr2__ds_iq_uat
bodipr2__ds_iq_uat_back
bodipr2__ds_itsys_uat
bodipr2__ds_ppp_uat
bodipr2__ds_psd_uat
bodipr2__ds_usage_uat
bodits2__ds_pef_tst
bodits2__ds_ppp_tst
bodits2__ds_pri_tst 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-15T16:42:06.370

这段代码：

```
while ($subject =~ m/^(?:(?!_iq_).)*$/g) {
    print $&, "\n";
} 
```

将打印除这两个字符串之外的所有内容。您可以通过在`(?!_iq_)`.

示例测试：

![在此处输入图像描述](../Images/b54c82f69ca19fed0f37033007412809.png)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-15T16:44:02.013

我看到了您的编辑，不确定是否会排除您想要包含的内容，但我尝试了这个，它对我有用。

```
#!/usr/bin/perl

use strict;
use warnings;

my @words = qw(bodipr2__ds_di_uat
bodipr2__ds_dw_uat
bodipr2__ds_iq_uat
bodipr2__ds_iq_uat_back
bodipr2__ds_itsys_uat
bodipr2__ds_ppp_uat
bodipr2__ds_psd_uat
bodipr2__ds_usage_uat
bodits2__ds_pef_tst
bodits2__ds_ppp_tst
bodits2__ds_pri_tst);

print "Original data\n\n";

foreach my $print (@words)
{
    print "$print\n";
}

print "\nNew data\n\n";

foreach my $word (@words)
{
    next if $word =~ /bodi[a-z]+\d__[a-z]+_iq_[a-z]+/;
    print "$word\n";
} 
```

# asp.net-mvc-3 - 使用部分在除主页之外的所有页面上显示导航？

> ID：11973224
> 
> 赞同：0
> 
> 时间：2012-08-15T16:30:31.103
> 
> 标签：asp.net-mvc-3

如何在除主页外的所有页面上显示顶级导航？我正在定义`Layout.cshtml`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T17:22:01.933

我会使用 javascript 来隐藏它。当页面呈现时，其所有 html 将与任何继承的 html 合并，因此您应该能够将导航包装在 a 中`<div id="nav">`并使用简单的 jQuery 函数将其隐藏：

```
$('#nav').hide; 
```

# ruby-on-rails - 导轨。如何存储一天中的时间（用于计划）？

> ID：11973225
> 
> 赞同：40
> 
> 时间：2012-08-15T16:30:32.387
> 
> 标签：ruby-on-rails, ruby

我正在编写一个跟踪学校课程的应用程序。

我需要存储时间表。例如：周一至周五**上午 8 点至上午 11 点**。

我正在考虑使用一个简单的字符串列，但稍后我需要进行时间计算。

例如，我需要存储 8am 的表示，例如 start_at:8am end_at:11am

那么**我应该如何存储时间**呢？我应该使用什么数据类型？我应该存储开始时间和秒数或分钟数，然后从那里计算吗？还是有更简单的方法？

我使用 MySQL 进行生产，使用 SQLite 进行开发。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-12T00:06:17.650

我最近制作了一个必须解决这个问题的应用程序。我决定在一个简单的营业时间模型中存储 open_at 和 closed_at 从午夜开始的几秒钟内。ActiveSupport 包括这个方便的帮助程序，用于查找自午夜以来的时间（以秒为单位）：

```
Time.now.seconds_since_midnight 
```

这样我可以做一个简单的查询来确定场地是否开放：

```
BusinessHour.where("open_at > ? and close_at < ?", Time.now.seconds_since_midnight, Time.now.seconds_since_midnight) 
```

任何使这更好的提示将不胜感激=)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-11-26T23:05:53.407

如果您使用的是 Postgresql，则可以使用`time`仅是一天中的时间而没有日期的列类型。然后可以查询

```
Event.where("start_time > '10:00:00' and end_time < '12:00:00'") 
```

也许 MySQL 有类似的东西

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-09-10T04:21:04.030

查看 Rails 4 的 gem ['tod'](https://github.com/JackC/tod)或 Rails 3 的 Time_of_Day。它们都解决了在使用 Active Record 模型时将时间存储在数据库中的问题。

SQL 有时间数据类型，但 Ruby 没有。Active Record 通过使用 Ruby 的 Time 类在规范日期 2000-01-01 上表示时间属性来解决这种差异。所有时间属性都被任意分配相同的日期。虽然可以毫无问题地相互比较属性（日期相同），但当您尝试将它们与其他 Time 实例进行比较时会出现错误。只需对“10:05”之类的字符串使用 Time.parse 即可将今天的日期添加到输出中。

Lailson Bandeira 为这个问题创建了一个已创建的解决方案，即 Rails 3 的 Time_of_Day gem。不幸的是，该 gem 不再维护。请改用 Jack Christensen 的“tod”宝石。它就像一个魅力。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-01-05T11:24:51.753

[这颗红宝石](https://github.com/tlemens/time_of_day_attr)将一天中的时间转换为自午夜以来的秒数。秒值存储在数据库中，可用于计算和验证。

定义时间属性：

```
class BusinessHour < ActiveRecord::Base
  time_of_day_attr :opening, :closing
end 
```

将设置字符串时的时间转换为自午夜以来的秒数：

```
business_hour = BusinessHour.new(opening: '9:00', closing: '17:00')
business_hour.opening
 => 32400
business_hour.closing
 => 61200 
```

要转换回一天中的时间：

```
TimeOfDayAttr.l(business_hour.opening)
 => '9:00'
TimeOfDayAttr.l(business_hour.closing)
 => '17:00' 
```

您也可以在整点省略分钟：

```
TimeOfDayAttr.l(business_hour.opening, omit_minutes_at_full_hour: true)
 => '9' 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-15T17:18:23.197

我将使用两个整数列将开始时间和持续时间存储在数据库中。

通过检索这两个值，您可以将开始时间转换为（假设您已经知道这一天：

```
# assuming date is the date of the day, datetime will hold the start time
datetime = date.change({:hour => your_stored_hour_value , :min => 0 , :sec => 0 })

# calculating the end time
end_time = datetime + your_stored_duration.seconds 
```

否则，看看[Chronic](https://github.com/mojombo/chronic)。宝石使处理时间更容易一些。请注意，该`change`方法是 rails 的一部分，在纯 Ruby 中不可用。

`DateTime`可以在[此处](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/date/rdoc/DateTime.html#method-c-new)找到有关纯 Ruby的文档。

此外，无论您做什么，都不要开始以 12 小时格式存储日期/时间，您可以`I18n`在 Rails 中使用来转换时间：

```
I18n.l Time.now, :format => "%I.%m %p",  :locale => :"en"
I18n.l Time.now + 12.hours, :format => "%I.%m %p",  :locale => :"en" 
```

您还可以从此表示法中获得，您可以将持续时间存储为小时，如果需要，您可以通过以下方式轻松转换它们：

```
your_stored_value.hours 
```

如果存储为整数，即。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-02-04T06:10:59.853

### 建议：

不要为此担心特定的数据类型。一个简单的解决方案是：

1.  在数据库中，为**start_time添加一个***整数*类型列，为**end_time**添加另一个列。每个都将存储自午夜以来的分钟数。 例如：上午 8:30 将存储为 510 (8*60+30)

*****   在表单中，创建一个*选择*字段（下拉菜单），以时间格式显示所有可用时间：
    例如：上午 10 点、上午 10:30 等。
    但是保存在数据库中的实际字段值是它们的整数等价物：
    例如：600、630 等等（按照上面的示例）**** 

 ***** * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-15T17:05:39.543

从 SQLite 3[网站](http://www.sqlite.org/datatype3.html)，

“SQLite 没有专门用于存储日期和/或时间的存储类。相反，SQLite 的内置日期和时间函数能够将日期和时间存储为 TEXT、REAL 或 INTEGER 值：

TEXT 作为 ISO8601 字符串（“YYYY-MM-DD HH:MM:SS.SSS”）。REAL 作为儒略日数字，根据预测的公历，自公元前 4714 年 11 月 24 日格林威治中午以来的天数。INTEGER 作为 Unix 时间，自 1970-01-01 00:00:00 UTC 以来的秒数。应用程序可以选择以任何这些格式存储日期和时间，并使用内置的日期和时间函数在格式之间自由转换。”

[然后，您可以使用此处](http://www.sqlite.org/lang_datefunc.html)列出的日期和时间函数来操作这些值。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-15T16:49:26.820

我假设您正在为此使用某种数据库。如果您使用的是 MySQL 或 Postgresql，则可以使用`datetime`列类型，Ruby/Rails`Time`在读取/写入数据库时​​会自动将其转换为对象。我不确定 sqlite 是否有类似的东西，但我想它可能有。****

# c# - ASP.NET 用户控件 Repeater.ItemDataBound 事件未被触发

> ID：11973226
> 
> 赞同：0
> 
> 时间：2012-08-15T16:30:33.553
> 
> 标签：c#, asp.net, user-controls, repeater

在 aspx 中注册的事件

```
<asp:Repeater ID="StepRepeater" OnItemDataBound="StepRepeater_ItemDataBound1" runat="server"> 
```

尝试使用 AutoEventWireUp true & false

这是后面代码中的方法：

```
 public void LoadSteps(Request request)
    {
        Repeater StepRepeater = new Repeater();

        StepRepeater.DataSource = request.Steps;
        StepRepeater.DataBind();
    }
    protected void StepRepeater_ItemDataBound(object sender, RepeaterItemEventArgs e)
    {
} 
```

单步执行时，它直接通过“StepRepeater.DataBind();” 没有命中 ItemDataBound 事件。

请让我知道是否有任何其他信息会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T16:33:43.423

您的`OnItemDataBound`值与您的方法名称不匹配。

```
OnItemDataBound="StepRepeater_ItemDataBound1"

protected void StepRepeater_ItemDataBound 
```

`1`从末尾删除`OnItemDataBound`或更改您的方法名称。

* * *

同样正如[@Adil](https://stackoverflow.com/a/11973242/370103)所说，删除该`new Repeater()`行：

```
Repeater StepRepeater = new Repeater(); 
```

* * *

**更新：**阅读您对另一个关于添加`new Repeater()`行以防止空引用错误的答案的评论后：

添加`new Repeater()`将创建一个新的`Repeater`控件实例，因此**不会**引用`Repeater`您的 ASPX 标记文件。

如果您收到空引用异常，您应该检查指令中的`Inherits`属性`@Page`（通常是 ASPX 文件的最顶行）是否与文件中的 匹配，并且您的`class`属性是否与文件名匹配。`.aspx.cs``CodeFile``.aspx.cs`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T16:31:59.647

您有`binded`事件 ItemDataBound ，`StepRepeater in html`但您正在分配*新创建的转发器对象*的数据源和`no event is attached to this repeater object`.

删除此声明

```
 Repeater StepRepeater = new Repeater(); 
```

你的代码将是

```
public void LoadSteps(Request request)
{
    StepRepeater.DataSource = request.Steps;
    StepRepeater.DataBind();
} 
```

更改`OnItemDataBound`html中的事件名称以匹配后面的代码

```
<asp:Repeater ID="StepRepeater" OnItemDataBound="StepRepeater_ItemDataBound" runat="server"> 
```

# c++ - 异步停止 Windows 服务

> ID：11973228
> 
> 赞同：3
> 
> 时间：2012-08-15T16:30:35.483
> 
> 标签：c++, windows, winapi, service

我正在尝试控制应用程序中的服务。通过 StartService ( [MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686321%28v=vs.85%29.aspx) ) 启动服务工作正常，服务需要大约 10 秒才能启动，但在调用 StartService 后，它会立即将控制权交还给主应用程序。

但是，当通过 ControlService ( [MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682110%28v=vs.85%29.aspx) ) 停止服务时 - AFAIK 没有 StopService - 它会完全阻塞主应用程序，直到服务停止，这大约需要 10 秒。

```
Start: StartServiceW( handle, 0, NULL)
Stop: ControlService( handle, SERVICE_CONTROL_STOP, status ) 
```

有没有办法非阻塞/异步停止 Windows 服务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T20:49:56.713

该服务正在其控制处理程序例程中进行清理。这对于只需要几分之一秒即可退出的服务来说是可以的，但是需要十秒的服务肯定应该设置状态为 STOP_PENDING 然后异步清理。

如果这是您自己的服务，您应该纠正该问题。我首先要确保所有的清理工作都是必要的；例如，在停止之前不需要释放内存（除非服务与其他服务共享进程）。如果清理速度确实不够快，请启动一个单独的线程（或向您的主线程发出信号）以执行服务关闭并将服务状态设置为 STOP_PENDING。

如果这是其他人的服务，唯一的解决方案是从单独的线程或子进程中发出停止请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T16:38:18.757

我可能会考虑在新线程中停止服务。这将消除主线程的阻塞。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T19:02:14.900

SCM 以串行方式处理控制请求。如果任何服务正忙于处理控制请求，`ControlService()`将被阻塞，直到 SCM 可以处理新请求。这在[文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682108.aspx)中有很多说明：

> SCM 以串行方式处理服务控制通知——它将等待一个服务完成对服务控制通知的处理，然后再发送下一个服务控制通知。因此，如果任何服务正忙于处理控制代码，对 ControlService 的调用将阻塞 30 秒。如果超时到期时繁忙的服务仍未从其处理函数返回，则 ControlService 将失败并显示 ERROR_SERVICE_REQUEST_TIMEOUT。

# mysql - MySql 将其他表中的计数作为连接并添加到每一行结果中

> ID：11973229
> 
> 赞同：0
> 
> 时间：2012-08-15T16:30:42.350
> 
> 标签：mysql, join, count

有一个小的 MySql 问题，我希望有人可以看看。

当前的 Sql：

```
SELECT IFNULL(ua.total, 0) applications, 
       users_applications.job_id as job_id, 
       users.* 
FROM users_applications 
        LEFT OUTER JOIN users 
             on (users_applications.user_id = users.id) 
        LEFT OUTER JOIN ( 
                           SELECT COUNT(*) total, job_id, id 
                           FROM users_applications
                           GROUP BY job_id ) AS ua 
                  ON (users_applications.id = ua.id) 
```

这很棒，它返回的内容如下：

```
applications  |  job_id  |  user_id  |
-------------------------------
3     |   1001    |   1001  |
0     |   1001    |   1002  |
0     |   1001    |   1003  |
1     |   1003    |   1004  |
1     |   1003    |   1005  |
0     |   1004    |   1006  | 
```

尽管它正在计算该工作的申请数量，但它只针对第一行执行此操作，但我希望它出现在每一行中，而不是像目前那样在后续行中显示为 0。

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T17:03:00.997

试试这个。

```
SELECT  c.totalCount,
        a.job_id,
        a.user_id
FROM    users_applications a
            LEFT JOIN users b
                ON a.user_ID = b.ID
            LEFT JOIN
                (
                    SELECT job_ID, count(*) totalCount
                    FROM user_applications
                    GROUP BY job_ID
                ) c on a.job_ID = c.jobID 
```

# asp.net - 如何在 sqltransaction 中读取未提交的事务？

> ID：11973230
> 
> 赞同：1
> 
> 时间：2012-08-15T16:30:54.627
> 
> 标签：asp.net, .net, sql, .net-2.0

在我的 .net framework 2.0 c# 代码中使用 SQLTransaction 时遇到问题

这是我的代码：

```
public bool register()
    {
        SqlConnection conn = DB.getInstance().getConnection();
        conn.Open();
        SqlTransaction sqlTransaction = conn.BeginTransaction();
        SqlCommand cmd = new SqlCommand();
        cmd.Connection = conn;
        cmd.Transaction = sqlTransaction;          

        try
        {
            cmd = insertMembers(cmd);
            cmd.ExecuteNonQuery();

            SqlDataReader read = null;
            cmd.CommandText = "SELECT * FROM members WHERE username='" + username + "'";
            read = cmd.ExecuteReader();
            while (read.HasRows)
            {
                id0 = (int)read["id0"];
            }

            cmd = insertMembersBalance(cmd);
            cmd.ExecuteNonQuery();

            cmd = insertMembersEPoint(cmd);
            cmd.ExecuteNonQuery();

            cmd = insertMembersVerify(cmd);
            cmd.ExecuteNonQuery();

            reset();

            sqlTransaction.Commit();
        }
        catch(Exception e)
        {                
            sqlTransaction.Rollback();
            Console.WriteLine(e.ToString());
            return false;
        }
        finally
        {
            conn.Close();
        }

        return true;
    } 
```

我无法从成员表中获取 id 用于将另一条记录插入到另一个表中。

还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T19:08:37.767

```
 if (read.HasRows)  // needs to be if not while or it will just loop
        {
             read.Read();
             id0 = (int)read["id0"];
        }
        read.Close();      // need to close the reader before you can use the cmd

        if you want to loop through all rows then 

        while (read.Read())
        {
             id0 = (int)read["id0"];
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T17:29:59.480

你必须先`dr.Read()`打电话 `SqlDataReader dr = cmd.........`

# java - CustomerClassLoader：NoClassDefFoundError

> ID：11973231
> 
> 赞同：0
> 
> 时间：2012-08-15T16:31:01.087
> 
> 标签：java, class, classloader

我一直在使用 CustomerClassLoader，因为我试图将 .class 文件加载到其中`JUnitCore.runClasses(...);`，但出现以下错误

```
Exception in thread "AWT-EventQueue-0" java.lang.NoClassDefFoundError: SimpleTest (wrong name: JUnit/SimpleTest)
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClass(ClassLoader.java:791)
at java.lang.ClassLoader.defineClass(ClassLoader.java:634)
at Java.CustomClassLoader.access$000(CustomClassLoader.java:16)
at Java.CustomClassLoader$1.run(CustomClassLoader.java:45)
at java.security.AccessController.doPrivileged(Native Method)
at Java.CustomClassLoader.findClass(CustomClassLoader.java:33)
at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
..... 
```

我不知道它出了什么问题，因为我传递了正确的类名和类的路径。这是我正在使用的代码

自定义类加载器

```
import java.io.FileInputStream;
import java.security.AccessControlContext;
import java.security.AccessController;
import java.security.PrivilegedExceptionAction;

public class CustomClassLoader extends ClassLoader {

String repoLocation = "C:/TempBINfolder/bin/JUnit/";

public CustomClassLoader() { }

public CustomClassLoader(ClassLoader parent) {
super(parent);
}

@Override
protected Class<?> findClass(final String name)
throws ClassNotFoundException {

AccessControlContext acc = AccessController.getContext();

try {
return (Class)AccessController.doPrivileged(
 new PrivilegedExceptionAction() {
  public Object run() throws ClassNotFoundException {

   FileInputStream fi = null;
   try {

    String path = name.replace('.', '/');
    fi = new FileInputStream(repoLocation + path
      + ".class");
    byte[] classBytes = new byte[fi.available()];
    fi.read(classBytes);
    return defineClass(name, classBytes, 0,
      classBytes.length);
   }catch(Exception e )
   {
    throw new ClassNotFoundException(name);
   }
  }
 }, acc);
} catch (java.security.PrivilegedActionException pae) {
return super.findClass(name);
}
}
} 
```

这就是我所说的

```
ClassLoader cls= new CustomClassLoader(ClassLoader.getSystemClassLoader());
Class stringClass = null;
    try {
        stringClass = cls.loadClass("SimpleTest");
    } catch (ClassNotFoundException ex) {
        Logger.getLogger(CompilerForm.class.getName()).log(Level.SEVERE, null, ex);
    }
    try {
        stringClass.newInstance();
    } catch (InstantiationException ex) {
        Logger.getLogger(CompilerForm.class.getName()).log(Level.SEVERE, null, ex);
    } catch (IllegalAccessException ex) {
        Logger.getLogger(CompilerForm.class.getName()).log(Level.SEVERE, null, ex);
    }

    JUnitCore.runClasses(stringClass); 
```

有谁知道我为什么会收到这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T18:04:35.390

改变

`stringClass = cls.loadClass("SimpleTest");`
到
`stringClass = cls.loadClass("JUnit.SimpleTest");`

（即添加类文件的全限定包名）

和

`String repoLocation = "C:/TempBINfolder/bin/JUnit/";`
到
`String repoLocation = "C:/TempBINfolder/bin/";`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T16:42:27.587

您必须将您的 SimpleTest 类声明为在 JUnit 包中，但您尝试加载的只是 SimpleTest（无包）。尝试一下：

1.  删除包声明
2.  从位置删除 Junit：`String repoLocation = "C:/TempBINfolder/bin/";`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T17:06:55.277

类名应该是完全限定的`junit.samples.SimpleTest`

```
 stringClass = cls.loadClass("SimpleTest"); 
```

应该

```
 stringClass = cls.loadClass("junit.sample.SimpleTest"); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-15T16:40:34.920

有时这会发生在我身上，通常可以通过清理和构建来解决。如果这不起作用，我通常会重新启动我的 IDE。

# configuration - .NET 中的自定义配置 - 使用元素而不是属性

> ID：11973233
> 
> 赞同：2
> 
> 时间：2012-08-15T16:31:08.320
> 
> 标签：configuration, app-config

在我见过的所有自定义配置示例中，似乎没有人使用元素来存储数据，例如

```
<data name="1">
<server>aServer</server>
<ip>anipaddress</ip>
</data> 
```

这真的可能吗？

我知道我可以使用这样的属性：

```
<data name="1" server="aServer" ip="anipaddress"/> 
```

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T22:18:36.880

[ConfigurationElement.DeserializeElement](http://msdn.microsoft.com/en-us/library/system.configuration.configurationelement.deserializeelement.aspx)的默认实现不支持`XmlNodeType.Text`or类型的节点，`XmlNodeType.CDATA`并抛出`ConfigurationErrorsException`带有以下错误消息的 a：`The configuration section cannot contain a CDATA or text element.`

因此，要使用元素文本内容存储信息，请覆盖该`ConfigurationElement.DeserializeElement`方法。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-15T16:47:35.573

是的，你可以这么做。

```
<configuration>  
    <configSections>
        <sectionGroup name="pageAppearanceGroup">
            <section 
            name="pageAppearance" 
            type="Samples.AspNet.PageAppearanceSection" 
            allowLocation="true" 
            allowDefinition="Everywhere"/>
       </sectionGroup>
     </configSections>

  <pageAppearanceGroup>
    <pageAppearance remoteOnly="true">
      <font name="TimesNewRoman" size="18"/>
      <color background="000000" foreground="FFFFFF"/>
    </pageAppearance>
  </pageAppearanceGroup>
</configuration> 
```

然后访问变量

```
Samples.AspNet.PageAppearanceSection config = (Samples.AspNet.PageAppearanceSection)System.Configuration.ConfigurationManager.GetSection(
        "pageAppearanceGroup/pageAppearance");

    Response.Write("<h2>Settings in the PageAppearance Section:</h2>");
    Response.Write(string.Format("RemoteOnly: {0}<br>", 
        config.RemoteOnly));
etc.... 
```

检查此链接 [http://msdn.microsoft.com/en-us/library/2tw134k3.aspx](http://msdn.microsoft.com/en-us/library/2tw134k3.aspx)

# clojure - 如何编写测试来处理预期的异常？

> ID：11973234
> 
> 赞同：20
> 
> 时间：2012-08-15T16:31:18.980
> 
> 标签：clojure, leiningen

如何测试抛出预期异常的函数？这是引发异常的函数：

```
(defn seq-of-maps?
  "Tests for a sequence of maps, and throws a custom exception if not."
  [s-o-m]
  (if-not (seq? s-o-m)
    (throw (IllegalArgumentException. "s-o-m is not a sequence"))
    (if-not (map? (first s-o-m))
      (throw (IllegalArgumentException. "s-o-m is not a sequence of maps."))
      true))) 
```

我想设计一个如下所示的测试，在该测试中抛出并捕获异常，然后进行比较。以下不起作用：

```
(deftest test-seq-of-maps
  (let [map1  {:key1 "val1"}
        empv  []
        s-o-m (list {:key1 "val1"}{:key2 "val2"})
        excp1 (try 
                (seq-of-maps? map1)
                (catch Exception e (.getMessage e)))]
    (is (seq-of-maps? s-o-m))
    (is (not (= excp1 "s-o-m is not a sequence"))))) 
```

我收到这些错误：

```
Testing util.test.core

FAIL in (test-seq-of-maps) (core.clj:27)
expected: (not (= excp1 "s-o-m is not a sequence"))
  actual: (not (not true))

Ran 2 tests containing 6 assertions.
1 failures, 0 errors. 
```

显然，我遗漏了一些关于编写测试的东西。我很难弄清楚。我的项目是用 lein new 建立的，我正在用 lein test 运行测试。

谢谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-15T17:54:29.717

测试中的最后一个断言不正确；应该是`(is (= excp1 "s-o-m is not a sequence"))`因为 map1 不是地图序列。

除此之外，使用[`(is (thrown? ..))`或`(is (thrown-with-msg? ...))`](http://clojure.github.io/clojure/clojure.test-api.html#clojure.test/is)检查抛出的异常可能更清楚。

**例子：**

```
(t/is (thrown? java.lang.ClassCastException (s/valid? ::sut/int-value "x")))) 
```

请注意，您只需将类名写为符号。如果`java.lang.Exception`您不关心确切的`Exception`.

# android - 安卓 AWS 开发工具包

> ID：11973238
> 
> 赞同：0
> 
> 时间：2012-08-15T16:31:33.910
> 
> 标签：android, amazon-web-services, amazon-simpledb

我正在尝试通过 Android 访问 Amazon Web Service :Simpledb，我下载了 androidawsSDk-1.3.3 并在我的项目的“libs”文件夹中添加了[必要的 Jar并配置了 BuildPath。](https://forums.aws.amazon.com/thread.jspa?threadID=101501)但我最终得到**Eclipse 冻结或 DX 警告：忽略匿名内部类的内部类属性（org.apache.commons.logging.LogFactory $1）。**我确实尝试再次清理和构建项目。这个问题的任何解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T10:40:30.963

我做了这些，

*   `Right click Eclipse->Properties ->Target` **和**

*   添加以下内容`-vmargs -Xms512m -Xmx512m -XX:PermSize=128m -XX:MaxPermSize=128m`，

*   清理并构建它。

它现在工作正常。

# postgresql - 如何引用传递给 psql 的命名参数？

> ID：11973239
> 
> 赞同：7
> 
> 时间：2012-08-15T16:31:42.450
> 
> 标签：postgresql, keyword, identifier, psql

[psql](http://www.postgresql.org/docs/9.1/static/app-psql.html)有一个用于传递命名参数的结构：

```
psql -v name='value' 
```

然后可以在脚本中引用它：

```
SELECT :name; 
```

这将给出结果

```
 ?column?
----------
 value
(1 row) 
```

在开发过程中，我需要相当频繁地删除和重新创建数据库的副本，因此我正在尝试自动化该过程。所以我需要运行一个查询，强制断开所有用户，然后删除数据库。但是这个操作的数据库会有所不同，所以数据库名称需要是一个参数。

问题是断开用户连接的查询需要一个字符串 ( `WHERE pg_stat_activity.datname = 'dbname'`)，而丢弃的查询需要一个不带引号的令牌 ( `DROP DATABASE IF EXISTS dbname`)。（对不起。不知道该怎么称呼这种令牌。）

我可以在 DROP 查询中使用不带引号的命名参数，但是在断开连接查询中引用命名参数会导致参数不被扩展。即，我会得到 string`':name'`而不是 string `'value'`。

有没有办法将未引用的值转换为字符串或将字符串转换为 DROP 查询的未引用标记？我可以通过将断开连接和 DROP 查询放在单独的脚本中并将带引号的参数传递给断开连接和不带引号的 DROP 来解决它，但我更希望它们在同一个脚本中，因为它们实际上是两个步骤在一个过程中。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-30T02:00:00.313

采用：

```
... WHERE pg_stat_activity.datname = **:'name'**
```

注意冒号在单引号之前的位置。
[手册](https://www.postgresql.org/docs/current/app-psql.html#APP-PSQL-META-COMMANDS)：

> 如果参数中出现不带引号的冒号 ( `:`) 后跟 psql 变量名，则将其替换为变量的值，如下面的[SQL 插值](https://www.postgresql.org/docs/current/app-psql.html#APP-PSQL-INTERPOLATION)中所述。那里的表格 ***`:'variable_name'`***和***`:"variable_name"`***描述也有效。

[和：](https://www.postgresql.org/docs/current/app-psql.html#APP-PSQL-INTERPOLATION)

> 要将变量的值引用为 SQL 文字，请在单引号中写一个冒号，后跟变量名。

# mysql - 在联合查询中按日期排序

> ID：11973240
> 
> 赞同：0
> 
> 时间：2012-08-15T16:31:53.813
> 
> 标签：mysql, sql

```
SELECT * 
FROM 
(
    SELECT case_id,diagnosis_title,updated 
    FROM tbl_case 
    order by updated desc 
) as table1

UNION

select * 
FROM 
(
    select image_id,image_title,updated 
    from tbl_image 
    order by updated desc 
) as table2 
```

如何以混合顺序显示记录。当前`tbl_Case`记录显示在第一部分，`tbl_image`记录显示在第二部分。

我想混合输出。 `ORDER BY`应该适用于两个表。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T16:36:04.433

你有什么理由做那些外部选择*？它们毫无意义，因为它们只是重新选择您已经选择的所有内容。

使用 mysql 联合，这是您对整个结果集进行排序的方式：

```
(SELECT case_id, diagnosis_title, ... FROM ...)
UNION
(SELECT image_id, image_title, ... FROM ...)
ORDER BY ... 
```

使用上面的括号，order by 会将两个结果集中的所有记录一起排序，而不是单独对每个单独的查询结果进行排序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T16:39:29.287

尝试简单地查询。

```
 SELECT case_id,diagnosis_title,updated
    FROM tbl_case 
    UNION
    select image_id,image_title,updated
    from tbl_image 
    ORDER BY updated desc 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T16:57:52.933

你可以这样做，（我只是猜测数据类型）

```
CREATE TEMPORARY TABLE TempTable
    (id int, title varchar(100), updated tinyint(1));

INSERT TempTable
SELECT case_id, diagnosis_title, updated  FROM tbl_case ORDER BY updated DESC;
INSERT TempTable
SELECT image_id, image_title, updated FROM tbl_image ORDER BY updated DESC;

SELECT * FROM TempTable; 
```

显然，这使用临时表而不是联合来实现我认为您所要求的。

# sql - SQL 查询数据范围限制

> ID：11973245
> 
> 赞同：0
> 
> 时间：2012-08-15T16:32:11.313
> 
> 标签：sql, oracle

我有这个where SQL Query。我想知道我是否可以限制该用户只能选择 2 天的日期范围。这意味着他们不能选择 1 个月或 1 周或超过 2 天的查询数据范围差异。

```
WHERE
    To_Date(to_char(B.time_stamp, 'DD-MON-YYYY')) >= To_Date('?DATE1::?','MM/DD/YYYY') 
and To_Date(to_char(B.rest_date, 'DD-MON-YYYY')) <= To_Date('?DATE2::?','MM/DD/YYYY') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T16:39:55.163

如果我理解您的问题，您只是在问如何限制这两个日期，以使它们彼此相隔 2 天。日期数学在 Oracle 中非常简单（这是我对您正在使用的数据库的猜测）：

```
WHERE ABS(Date1 - Date2) <= 2 
```

您根本不需要使用 to_char 或其他任何东西来转换它，因为它在内部存储为实际日期。您可以使用相同类型的逻辑来确保它少于 16 小时：

```
WHERE ABS(Date1 - Date2) <= 16/24 
```

只要您记得适当调整单位。

请注意，在这种情况下，2 天意味着 48 小时。如果你的意思是它必须是 2 天，那么它会略有不同。

# collision-detection - 有效确定 3D 框的交集

> ID：11973250
> 
> 赞同：2
> 
> 时间：2012-08-15T16:32:36.867
> 
> 标签：collision-detection, physics, simulation, intersection

我正在尝试开发一种算法来确定两个框（但我认为它适用于任何凸多面体）是否相交。我将使用它进行碰撞检测。

每个多面体的状态都表示为其质心的平移向量和一个方向矩阵（3x3 正交表示对象空间坐标）。

我的一般想法是取两个多面体的每个面，找出它的平面方程（通过应用多面体方向和平移分量），然后遍历另一个多面体的每个顶点，并确定它们是否都是在平面的同一侧，如果它们是，我确定这两个对象不相交。

至于碰撞检测部分，我会检测它们是否相交，如果它们相交，我会在它们接触的那一刻进行二分搜索，并在那个时刻通过找到最接近的另一个对象的顶点来尝试找到碰撞的顶点我之前找到的用来确定接触点的飞机。

我的问题是，这个算法是否正确，如果是，是不是矫枉过正？我可以以某种方式节省一些支票，或加快流程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T12:59:34.350

我认为您的算法是正确的，并且与您将获得的一样有效。为了清楚起见，您需要检查*两个*多面体的每个面，如果您发现另一个多面体的每个顶点都位于无限平面的“外部”的*任何*情况，则没有相交。

对于性能：

1 个预先计算封闭球体，以便您可以进行初始“粗略”检查

2 预先计算所有向外的法线向量并通过旋转变换进行 - 应该比做一堆叉积便宜，

我认为找到相交的“点”可以使用相同的算法并假设相交和非相交状态之间的线性插值并寻求一个顶点恰好在一个平面上的解决方案。

# php - 如何阅读 facebook signed_request 以获取 user_id

> ID：11973251
> 
> 赞同：5
> 
> 时间：2012-08-15T16:32:36.210
> 
> 标签：php, facebook, facebook-authentication, facebook-canvas, facebook-app-requests

根据[Facebook - Authentication within a Canvas Page Document](https://developers.facebook.com/docs/authentication/canvas/)，他们说我们将得到一个`signed_request`由 JSON 对象组成的。现在他们说`signed_request`可以通过`$_POST['signed_request']`我同意它对我有用。

现在根据他们的说法，如果用户登录，我将得到一个 JSON 对象值，如下所示：-

```
{
  "expires":UNIXTIME_WHEN_ACCESS_TOKEN_EXPIRES,
  "algorithm":"HMAC-SHA256",
  "issued_at":UNIXTIME_WHEN_REQUEST_WAS_ISSUED,
  "oauth_token":"USER_ACCESS_TOKEN",
  "user_id":"USER_ID",
  "user":{
    "country":"ISO_COUNTRY_CODE",
    "locale":"ISO_LOCALE_CODE",
    ...
  }
} 
```

现在我想从中取出，`user_id`所以我正在使用这段代码，但它不起作用：-

```
if(isset($_POST['signed_request']))
{
    echo 'YES';
    $json = $_POST['signed_request'];
    $obj = json_decode($json);
    print $obj->{'user_id'};    
} 
```

它只是打印`YES`. 为什么会这样？

我在某处读到，如果没有应用程序身份验证，我将无法提取，`user_id`但根据 facebook，这是第一步，验证应用程序将是第四步。我是新手，如果有人可以帮助我，那将有很大帮助。谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-09-21T23:44:27.460

如果您不想使用 FB SDK，您可以使用这段代码来获取 user_id 和其他变量（来自[https://developers.facebook.com/docs/facebook-login/using-login-with -游戏/](https://developers.facebook.com/docs/facebook-login/using-login-with-games/)）

```
function parse_signed_request($signed_request) {
  list($encoded_sig, $payload) = explode('.', $signed_request, 2); 

  // decode the data
  $sig = base64_url_decode($encoded_sig);
  $data = json_decode(base64_url_decode($payload), true);

  // confirm the signature
  $expected_sig = hash_hmac('sha256', $payload, $secret, $raw = true);
  if ($sig !== $expected_sig) {
    error_log('Bad Signed JSON signature!');
    return null;
  }

  return $data;
}

function base64_url_decode($input) {
  return base64_decode(strtr($input, '-_', '+/'));
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-09-18T14:50:09.880

我知道的旧帖子，但想添加对 Art Geigel 答案的回复（我不能直接评论它）。

您的代码片段缺少该行，

```
 $secret = "appsecret"; // Use your app secret here 
```

和完整的片段，

```
function parse_signed_request($signed_request) {
   list($encoded_sig, $payload) = explode('.', $signed_request, 2); 

   $secret = "appsecret"; // Use your app secret here

   // decode the data
   $sig = base64_url_decode($encoded_sig);
   $data = json_decode(base64_url_decode($payload), true);

   // confirm the signature
   $expected_sig = hash_hmac('sha256', $payload, $secret, $raw = true);
   if ($sig !== $expected_sig) {
      error_log('Bad Signed JSON signature!');
      return null;
   }

   return $data;
}

function base64_url_decode($input) {
   return base64_decode(strtr($input, '-_', '+/'));
} 
```

**回答原来的问题**

要从 signed_request 中获取数据，请包含上述函数并...

```
$data = parse_signed_request($_POST['signed_request']);

echo '<pre>';
print_r($data); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-15T17:27:44.713

我认为它失败了，`json_decode($json)`因为`$json`它不是有效的 json 字符串，正如您在评论中提到的`print_r($_POST['signed_request']);`.

根据[Facebook - Authentication within a Canvas Page Document](https://developers.facebook.com/docs/authentication/canvas/ "Facebook - Canvas 页面文档中的身份验证")，`signed_request`参数被编码，**解析**字符串将`signed_request`产生一个 JSON 对象。

如果您使用的是 PHP SDK，正如 Abhishek 在评论中所说，`$facebook->getSignedRequest();`将为您提供解码的 json。

[在此处](https://developers.facebook.com/docs/authentication/signed_request/)查看有关签名请求的更多详细信息

# javascript - 在javascript中隐藏和显示

> ID：11973264
> 
> 赞同：0
> 
> 时间：2012-08-15T16:33:30.100
> 
> 标签：javascript, jquery, asp.net, gridview, code-behind

我有一个我想隐藏的对象。这是我网站上数据网格中的一行。网格中的数据是动态的。当我单击我在下拉列表中选择的“计算机”时，我希望该行隐藏/不可见。我想我必须使用 getElementById()。

这是我要隐藏的 id

```
<span id="dg_form_ctl05_lbl_show_tag" style="display:inline-block;background-color:Transparent;border-color:Navy;border-width:3px;border-style:Double;font-family:Arial;font-size:12px;width:130px;">Subject*</span> 
```

这是下拉列表 ID。`dg_form_ctl02_DropDownList1`

这是我到目前为止的代码，但它似乎不正确，因为当我运行它时它没有隐藏行。

```
function hideMe() {
var g = document.getElementById("dg_form_ctl05_lbl_show_tag");
var e = document.getElementById("dg_form_ctl02_DropDownList1");
if(e == "Computer") 
g.style.display = 'none';
} 
```

我想我需要在这上面使用代码隐藏，这也是我到目前为止的 c# 代码。

```
 if (!ClientScript.IsStartupScriptRegistered("hwa"))
        {
            ClientScript.RegisterStartupScript(this.GetType(), "hwa", "hideMe();", true);
        } 
```

有人能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T16:35:52.020

您应该使用该`value`属性来获取 select 元素的值，目前您正在将 a`string`与 an进行比较`object`，试试这个：

```
var e = document.getElementById("dg_form_ctl02_DropDownList1").value; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T16:37:00.707

```
function hideMe() {
    var g = document.getElementById("dg_form_ctl05_lbl_show_tag");
    var e = document.getElementById("dg_form_ctl02_DropDownList1").value;
    if(e == "Computer") 
    g.style.display = 'none';
} 
```

# python - 如何在休眠（S4）（或断开连接）后重新连接 MS SQL？

> ID：11973269
> 
> 赞同：6
> 
> 时间：2012-08-15T16:33:57.833
> 
> 标签：python, sqlalchemy, database-connection

我正在使用 python + microsoft 的[pwrtest 实用程序运行一些休眠测试](http://msdn.microsoft.com/en-us/library/windows/hardware/ff550682%28v=vs.85%29.aspx)

另外我正在使用**sqlalchemy** (orm) 来处理数据库 (ms sql server 2008 r2)。

我已连接到远程 sql 服务器，一切正常，但是在计算机进入休眠模式 (S4) 后，sql 服务器断开连接（我将其视为管理工作室的“活动监视器”）。

当我的电脑恢复休眠并继续执行脚本时，我收到错误“ **DBAPIError: (Error) ('08S01', '[08S01] [Microsoft][ODBC SQL Server Driver]Communication link failure (0) (SQLExecDirectW)' )** "

我试过使用`pool_recycle`

```
engine = create_engine(settings.sql_engine, echo=True, pool_recycle=1) 
```

但是，据我了解`sqlalchemy`并没有意识到连接不再存在。

我也尝试过使用`engine.dispose()`，根据[文档](http://docs.sqlalchemy.org/en/rel_0_7/core/connections.html#sqlalchemy.engine.base.Engine.dispose)，它应该删除当前池：

> 处置此 Engine 使用的连接池。
> 
> 在旧的连接池被释放后，会立即创建一个新的连接池。这个新池与所有 SQLAlchemy 连接池一样，在第一次请求之前不会与数据库建立任何实际连接。

但这也没有用

如何重新连接到数据库？

谢谢！

编码：

```
#module db.py:
from sqlalchemy.ext.declarative import declarative_base , declared_attr
from sqlalchemy import *
from sqlalchemy.orm import sessionmaker, relationship, backref
from sqlalchemy.orm.exc import *

Base = declarative_base()

class Drive(Base):
    __tablename__ = "drives"

    id = Column(Integer, primary_key=True)
    isPhysical = Column(Boolean)
    devicePath = Column(String(100))
    name = Column(String(10))
    encrypted = Column(Boolean, default=False)
    size = Column(BigInteger)

    def __init__(self):
        pass        

sql_engine = 'mssql+pyodbc://Tester:Password@sql-server/Automation'
engine = create_engine(sql_engine, echo=True)
Session = sessionmaker(bind=engine)
Base.metadata.create_all(engine) 
```

实际调用：

```
#hibernation.py

from db import *
import subprocess

command = r"pwrtest /sleep /s:4 /h:n /c:1"

out = subprocess.check_output(command)
# hibernation occurs

session = Session()

session.query(Drive).all() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T19:54:18.880

你可以试试这个“悲观断开处理”：

[http://docs.sqlalchemy.org/en/rel_0_7/core/pooling.html#disconnect-handling-pessimistic](http://docs.sqlalchemy.org/en/rel_0_7/core/pooling.html#disconnect-handling-pessimistic)

# node.js - node.js 将大浮点数保存到 mongo 中以进行搜索

> ID：11973275
> 
> 赞同：0
> 
> 时间：2012-08-15T16:34:26.133
> 
> 标签：node.js, mongodb

我一直在努力解决我对实际编程的有限知识，需要一些帮助......

从 node.js 中并保存到 MongoDB 中（使用本[机驱动程序](https://github.com/mongodb/node-mongodb-native/)），我需要索引和搜索一些长数字。

一个例子：

```
87 / 53 
```

在 64 位 Windows 计算器上，这是：

```
1.6415094339622641509433962264151 
```

我在 node.js 中运行它：

```
var answer = 87 / 53;
console.log(answer); 
```

我得到：

```
1.6415094339622642 
```

我的理解是因为 node.js 只运行 32 位，我们没有得到所需的精度。

因此，我插入了[node-bigint](https://github.com/substack/node-bigint)库，该库包装了 libgmp 以使用字符串进行大数数学运算......

现在它是：

```
var bigint = require('bigint');
var top = bigint('8700000000000000000000000000000000000');
var bottom = bigint(53);
var answer = top.div(bottom);
console.log(answer.toString()); 
```

我用零填充以删除浮点（更容易 - 我只需要比较数字，即大于小于）...

此代码产生：

```
'164150943396226415094339622641509433' 
```

太好了 - 我比 windows 计算器更准确:)

问题是，这个数字目前是一个字符串 - 我将字符串保存到 Mongo 并执行如下查询：

```
{thenumber:{'$gt':'164150943396226415094339622641509433'}} 
```

即我正在将字符串与字符串进行比较。这可以正常工作，因为我已经将它们全部填充了。

问题是 - 这是存储和搜索值的最佳方式（即字符串）还是将它们转换为 64 位 Long 的索引和搜索速度更快......

如果答案是“使用 Longs 他们更快”，我一生都无法（经过大量谷歌搜索）弄清楚如何将上面的字符串转换为原生[Mongo Long](http://mongodb.github.com/node-mongodb-native/api-bson-generated/long.html)数据类型（具有低位和高位） - 请帮助一个超出他深度的程序员:)

跟进：

为驱动程序阅读[Long DataType](http://mongodb.github.com/node-mongodb-native/api-bson-generated/long.html#long-fromstring)手册，它具有此方法：

```
Long.fromBits(lowBits, highBits) 
```

如此有针对性的问题 - 我如何将表示 64 位整数的字符串转换为这些低位和高位以便 Long 保存......另外 - 这比字符串搜索更快吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T17:07:17.280

用于[`Long.fromString`](http://mongodb.github.com/node-mongodb-native/api-bson-generated/long.html#long-fromstring)将字符串转换为 MongoDB Long：

```
var Long = require('mongodb').Long;
var long = Long.fromString(str, 10); 
```

**第二次编辑**- 实际上，这*是*包含有符号 64 位整数的字符串的正确答案。问题是您的字符串`'164150943396226415094339622641509433'`太大而无法存储为 64 位有符号整数。您可以使用的最大值是 (2^63 - 1) 或 9223372036854775807。

# asp.net - ASP.NET 页面中的 HTML 标签和控件？

> ID：11973276
> 
> 赞同：0
> 
> 时间：2012-08-15T16:34:27.900
> 
> 标签：asp.net, html, client

只是一个我一直想知道的一般问题。我在 ASP.NET 中编写了很多页面，因此我的所有控件都有标签 begin`<asp:`和 include `runat="server"`，这意味着它们是服务器端控件。我想知道的是，当不需要服务器端时，使用客户端控件而不是服务器端控件是否有任何优势。

例如，而不是：

```
<asp:Label ID="lbl" runat="server" Text="This is a label" CssClass="labelclass" /> 
```

以任何方式（例如性能方面）改为使用：

```
<label class="labelclass">This is a label</label> 
```

?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T16:37:04.497

仅当无意修改或访问服务器端的标签值时。使用直接 HTML 会稍微快一些，因为在这种情况下 ASP.NET 不必花时间解析服务器控件来生成任何东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T16:38:32.890

如果它们不需要是服务器端控件，请使用客户端控件。这将使渲染更快，因为要转换的代码更少。

如果我要在我的代码隐藏文件中以某种方式引用控件，我通常只使用服务器端控件。

在站点注释中，值得一提的是，ASP.NET `Label`Web 控件呈现为一个`<span>`元素，而不是使用`<label>`unless[`AssociatedControlId`属性](https://stackoverflow.com/questions/1953511/is-their-any-asp-net-server-control-which-could-render-label-tag)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T16:40:11.407

如果我们使用客户端控件而不是服务器控件，那么肯定会有性能提升，因为服务器控件由 asp 服务器解析并为其生成 html，因此这是一种开销。

它不是关于性能多少，而是肯定存在性能差异。

仅当必须在服务器端进行修改时才应使用服务器控件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T16:59:50.773

除了服务器必须呈现服务器端控件之外，它们还需要关联`ViewState`，以便在客户端和服务器之间来回 ping。这会导致您的页面请求更大、负载更重以及加载时间更长。

# php - 如何编码电子邮件标题中的空格？

> ID：11973277
> 
> 赞同：1
> 
> 时间：2012-08-15T13:57:41.720
> 
> 标签：php, email, character-encoding

我想使用 PHP 中的邮件功能发送电子邮件。标题的“FROM”部分应包含一个带空格的名称

```
 name with space <mail@server.tld> 
```

不幸的是，一些邮件客户端无法处理这些空间。这就是为什么例如 Thunderbird 在名称中添加引号的原因。

```
 "name with space" <mail@server.tld> 
```

这很好用，直到您添加 ÄÖÜ 这样的特殊字符，因为它们需要被编码。以下行不通：

```
 "name with ÄÖÜ and space" <mail@server.tld> 
```

这就是我尝试该功能的原因`mb_encode_mimeheader`

```
echo mb_encode_mimeheader("name with"." ÄÖÜ"." and space", "ISO-8859-1", "Q");
# result:
# name with =?ISO-8859-1?Q?=C3=84=C3=96=C3=9C=20and=20space?= 
```

这仍然不起作用，因为在特殊字符第一次出现之前，空格仍然在字符串中。正确的结果应该是：

```
=?ISO-8859-1?Q?name=20with=20=C3=84=C3=96=C3=9C=20and=20space?= 
```

PHP中是否有可以处理此问题的函数？还是**应该混合使用引号和“mb_encode_mimeheader”？**还是有不同的方法来处理邮件头中的空格？老实说，我不明白 RFC822 中提到的不同空格的含义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T05:25:24.987

你不需要引号。RFC2047 编码（即`mb_encode`）也处理空格。

（虽然为了记录，只是普通的空格是完全没有问题的；它们不是一些客户使用引用的原因，无论如何这通常是完全多余的。所以空格的结果实际上一点也不错误。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T04:15:44.843

正如[IETF 所说](https://www.rfc-editor.org/rfc/rfc5335)，电子邮件的标题中只允许使用 ASCII 字符。因此，我猜您应该对您的电子邮件标头进行 ASCII 编码。

但是，根据我在来自 Internet 工程任务组的新规范中看到的趋势，我们很快就会看到您可能不需要对标头进行编码/解码。

# asp.net-mvc-3 - 为什么在 ActionExecuting() 中检查用户代理时页面没有在生产中重定向？

> ID：11973279
> 
> 赞同：0
> 
> 时间：2012-08-15T16:34:34.953
> 
> 标签：asp.net-mvc-3, c#-4.0, asp.net-4.0

在我的 MVC3 应用程序中，我在控制器基类的`OnActionExecuting()`方法中添加了以下内容：

```
 int pageNumber = 0;
            // deny crawl for bots on pages 
            if (filterContext.ActionParameters.ContainsKey("pageNumber"))
            {
                pageNumber = Convert.ToInt16(filterContext.ActionParameters["pageNumber"]);

                if ((Request.UserAgent.Contains("msnbot") |
                    Request.UserAgent.Contains("googlebot")) && pageNumber > 2)
                {
                    Response.StatusCode = 410;
                    Response.Status = "410 Gone";

                    filterContext.Result = new RedirectResult(Url.Action("NoCrawlerMessage", "Home"));
                }
            } 
```

在调试期间，当我将浏览器的用户代理更改为包含“googlebot”或“msnbot”时，页面重定向就好了。

但是，当我将其投入生产并重试时，根本没有任何变化 - 请求的页面加载，它不应该加载。

这里有什么问题？

# vim - 在 Vim 中打开文件时只折叠注释

> ID：11973281
> 
> 赞同：6
> 
> 时间：2012-08-15T16:34:43.810
> 
> 标签：vim, comments, folding

当我在 Vim 中查看带有详细注释的长代码文件时，我希望能够加载注释折叠但其他所有内容都展开的文件。我目前的折叠配置`.vimrc`是：

```
set foldmethod=syntax
set nofoldenable 
```

这样，当我想开始折叠时，我就可以开始执行`z`命令了。但是有没有办法只折叠（块）评论？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T18:18:24.700

您可以执行一个全局命令来关闭所有块注释折叠：

```
:g/^\/\*/foldc 
```

这将在任何以（通用块注释指示器）`:help foldclose`开头的行上执行。`/*`注意`/`和`*`在这种情况下需要转义。`/`如果您使用不同的分隔符（例如`:g#^/\*#foldc`） ，则无需转义。如果您希望这自动发生，您可以将其添加到自动命令中。例如：

```
set fdm=syntax fen
augroup closeCommentFolds
   au!
   au FileType javascript %foldo | g/^\/\*/foldc
   au FileType ruby %foldo | g/^=begin/foldc
augroup end 
```

请注意，在这些示例中`^`，正则表达式中的字符指定`/*`and`=begin`匹配位于行首。如果要匹配行的开头和匹配项之间是否有空格，请使用`^\s*`而不是`^`. 将`%foldo`打开所有折叠以便`foldenable`设置，但它不会折叠所有内容（在这种情况下只是注释）。

# sql-server - SQL Server Adventureworks SalesOrderDetail 表主键

> ID：11973282
> 
> 赞同：0
> 
> 时间：2012-08-15T16:34:46.870
> 
> 标签：sql-server, database

我想问一下使用该字段`SalesOrderId`作为主键一部分的实际原因。我认为这应该只是表的外键`SalesOrderHeader`。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T16:53:35.750

好的，关于索引有多种类型。有一个聚集索引确定数据在磁盘上的物理顺序，没有它，该表在技术上称为堆。访问大量数据是低效的。数据是随机的。任何非聚集索引（以及有关数据分布的统计信息）都将引用聚集索引来访问数据。建立索引时，查询优化器将使用左侧的索引列来查找数据。因此，当我在 col1 上加入、搜索或其他任何内容时，如果存在索引 col1、col2、col3，则将使用该索引。如果我在 col1,col2 上过滤，将使用相同的索引。对此几乎没有或没有惩罚。如果我的查询引用 col1、col2、col3 ONLY（包括 where 和返回的列等）仅通过读取索引即可确定要返回的信息，不需要访问其自身的表。这被称为覆盖指数。所以这非常快。一般来说，表应该很窄，索引应该很宽。要了解更多我推荐[http://www.insidesqlserver.com/thebooks.html](http://www.insidesqlserver.com/thebooks.html) Kalen Delany：她亲自了解 SQL 开发团队，并且写得非常清楚。从 SQL7 到 SQL2012，基本原则仍然适用——尽管添加了空间索引、空间数据类型、BI 和许多其他好东西。

# objective-c - 即使没有@synthesize，我也可以在实现中使用声明的属性。这是设计使然吗？

> ID：11973283
> 
> 赞同：0
> 
> 时间：2012-08-15T16:34:49.430
> 
> 标签：objective-c, xcode, cocoa-touch

在 Hello World 教程中，我尝试注释掉“@synthesize userName = _userName;” 在 HelloWorldViewController.m 文件中。根据[https://developer.apple.com/library/mac/#documentation/cocoa/conceptual/objectivec/Chapters/ocProperties.html#//apple_ref/doc/uid/TP30001163-CH17-SW1](https://developer.apple.com/library/mac/#documentation/cocoa/conceptual/objectivec/Chapters/ocProperties.html#//apple_ref/doc/uid/TP30001163-CH17-SW1)，“......你使用@synthesize 指令告诉编译器，如果您不在@implementation 块中提供属性，它应该为属性合成setter 和/或getter 方法。”

对我来说奇怪的是，即使使用 '@synthesize userName = _userName;' 注释掉之后，HelloWorldViewController.m 文件中出现的语句，例如 [self.userName length] 和 self.userName = [[self textField] text]，不会被 Xcode 认为是错误或警告（我是在 V4.4.1 上）。这怎么可能？

据我了解，如果声明的属性缺少@synthesize，则甚至没有定义该属性。更重要的是没有@synthesize 意味着没有实现属性的getter 或setter 方法。为什么 Hello World 应用程序仍然可以完美编译和运行？

部分代码在这里：

```
#import "HelloWorldViewController.h"
@implementation HelloWorldViewController
//@synthesize userName = _userName;
@synthesize label;
@synthesize textField;

...

- (IBAction)changeGreeting:(id)sender {

[self setUserName:[[self textField] text]];

if([self.userName length]==0){
    [self setUserName: @"World"];
}
NSString *greeting=[[NSString alloc] initWithFormat:@"Hello, %@!", self.userName];
self.label.text=greeting;

- (IBAction)changeGreeting:(id)sender {

self.userName = [[self textField] text];

if([self.userName length]==0){
    [self setUserName: @"World"];
}
NSString *greeting=[[NSString alloc] initWithFormat:@"Hello, %@!", self.userName];
self.label.text=greeting;

}

@end 
```

Xcode 对上面的代码没有给出警告或错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T16:40:31.723

从 Xcode 4.4 开始，属性是自动合成的。如果您声明了一个可读写的属性并且您没有为该属性实现 getter 和 setter 方法，Xcode 将`@synthesize property = _property`自动为您插入。对于只读属性，您不能实现 getter 方法来获取此行为。

如果您实现 setter 和/或 getter 方法，Xcode 将不会自动合成属性，也不会为您创建 iVar。在这种情况下，您仍然可以添加`@synthesize`自己。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T16:40:33.230

在 Xcode 4.4 中，默认情况下会合成属性。因此，通过省略自己的综合，编译器会为您完成！

[请参阅 Apple 文档](https://developer.apple.com/library/ios/#documentation/DeveloperTools/Conceptual/WhatsNewXcode/00-Introduction/Introduction.html)- 特别是“编译器默认为未实现的 @properties 自动调用 @synthesize。”

# security - Twitter 如何加密用户 ID？

> ID：11973287
> 
> 赞同：1
> 
> 时间：2012-08-15T16:35:00.883
> 
> 标签：security, encryption, hash

谁能告诉我 Twitter 如何生成它包含在会员状态页面的个人资料 URL 中的唯一键？

例如[https://twitter.com/Ug​​lyPrick/status/235767315856240640](https://twitter.com/UglyPrick/status/235767315856240640)

ID 的数字部分是唯一的，并且似乎以某种方式进行了哈希处理，因为简单地更改数字不会给您另一个用户的页面。

他们可能会使用什么技术来最终得到这样一个整洁的数值？

我想在我的项目中使用类似的东西在查询字符串中传递数据库 ID。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T16:37:25.010

可能只有 Twitter 团队中的某个人可以权威地回答，但它可以是任何加密合理的散列函数，散列到“足够”位以避免任何真正的散列冲突可能性（参见[生日问题](http://en.wikipedia.org/wiki/Birthday_problem)）。

您以十六进制显示的特定数字是

0345 9D1F E742 3000

看起来后面是一个 64 位的哈希函数。Google 的 City Hash 是一个相当强大、相当快的 64 位散列，还有许多其他的可能性。

# php - 网站上的 IceCast 统计数据

> ID：11973292
> 
> 赞同：-3
> 
> 时间：2012-08-15T16:35:23.357
> 
> 标签：php, html, wordpress, icecast

我遇到了这个 php 脚本来从我的流媒体服务器中提取 IceCast 统计信息（听众、当前歌曲）。

它在这里发布

> [使用 PHP 显示 Icecast2 统计信息](https://stackoverflow.com/questions/3489773/use-php-to-show-icecast2-statistics)

```
<?php

/*
 * SCRIPT CONFIGURATIONS
*/
$SERVER = 'http://myserver.com:8000'; //URL TO YOUR ICECAST SERVER
$STATS_FILE = '/status.xsl'; //PATH TO STATUS.XSL PAGE YOU CAN SEE IN YOUR BROWSER (LEAVE BLANK UNLESS DIFFERENT)

///////////////////// END OF CONFIGURATION --- DO NOT EDIT BELOW THIS LINE \\\\\\\\\\\\\\\\\\\\\\\\\\\\\\

//create a new curl resource
$ch = curl_init();

//set url
curl_setopt($ch,CURLOPT_URL,$SERVER.$STATS_FILE);

//return as a string
curl_setopt($ch,CURLOPT_RETURNTRANSFER,1);

//$output = our stauts.xsl file
$output = curl_exec($ch);

//close curl resource to free up system resources
curl_close($ch);

//build array to store our radio stats for later use
$radio_info = array();
$radio_info['server'] = $SERVER;
$radio_info['title'] = '';
$radio_info['description'] = '';
$radio_info['content_type'] = '';
$radio_info['mount_start'] = '';
$radio_info['bit_rate'] = '';
$radio_info['listeners'] = '';
$radio_info['most_listeners'] = '';
$radio_info['genre'] = '';
$radio_info['url'] = '';
$radio_info['now_playing'] = array();
   $radio_info['now_playing']['artist'] = '';
   $radio_info['now_playing']['track'] = '';

//loop through $ouput and sort into our different arrays
$temp_array = array();

$search_for = "<td\s[^>]*class=\"streamdata\">(.*)<\/td>";
$search_td = array('<td class="streamdata">','</td>');

if(preg_match_all("/$search_for/siU",$output,$matches)) {
   foreach($matches[0] as $match) {
      $to_push = str_replace($search_td,'',$match);
      $to_push = trim($to_push);
      array_push($temp_array,$to_push);
   }
}

//sort our temp array into our ral array
$radio_info['title'] = $temp_array[0];
$radio_info['description'] = $temp_array[1];
$radio_info['content_type'] = $temp_array[2];
$radio_info['mount_start'] = $temp_array[3];
$radio_info['bit_rate'] = $temp_array[4];
$radio_info['listeners'] = $temp_array[5];
$radio_info['most_listeners'] = $temp_array[6];
$radio_info['genre'] = $temp_array[7];
$radio_info['url'] = $temp_array[8];

$x = explode(" - ",$temp_array[9]);
$radio_info['now_playing']['artist'] = $x[0];
$radio_info['now_playing']['track'] = $x[1];

?> 
```

有人知道在哪里插入脚本吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T16:48:37.857

您需要的一切都将在`$radio_info`. 您可以轻松地将其输出到任何您想要的位置：

```
echo htmlspecialchars($radio_info['now_playing']['artist'] . ' - ' . $radio_info['now_playing']['track']); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-26T04:30:05.877

我们下载 xml 中的统计信息，然后处理每天购买导入到 sql 的统计信息

```
// download icecast stats
$username = '';
$password = '';
$url = 'localhost:8000/stats';
$file = 'h:\\stream\\stats\\' . date('Ymd_His') . '.xml'; 
```

`c:\\stream\\curl.exe --user $username:$password $url -o $file`;

```
//Process to sql by looping through the stats folder and get filenames...

foreach(glob($path . "*.xml") as $filename) {
   $content = file_get_contents($filename);
   $filename = substr($filename, strlen($path), -4);
    process($db, $filename, $content);
  }
   function process($db, $filename, $content) {
    $xml = new SimpleXMLElement($content);
    if(!preg_match('/^(\d{4})(\d{2})(\d{2})_(\d{2})(\d{2})(\d{2})$/', $filename, 
    $date)) throw new Exception('Filename does not look like a date.');

foreach($xml->source as $source) {
    $date_sql = $db->real_escape_string(sprintf("%04d-%02d-%02d %02d:%02d:%02d", 
    $date[1], $date[2], $date[3], $date[4], $date[5], $date[6]));
    $stream_sql = $db->real_escape_string($source->genre);
    $title_sql = $db->real_escape_string($source->title);
    $listeners_sql = (int)$source->listeners;

    $sql = "REPLACE INTO song_stats SET date_and_time = '$date_sql', stream = 
   '$stream_sql', title = '$title_sql', listeners = $listeners_sql";

    $db->query($sql);
   }

 } 
```

# asp.net - 强制用户下载而不是在浏览器中打开 xlsx 文件

> ID：11973293
> 
> 赞同：0
> 
> 时间：2012-08-15T16:35:26.030
> 
> 标签：asp.net, html, download

我们有一些用户在我的网站上打开一个 excel 文件需要很长时间。如果他们只是简单地另存为然后打开它很快。他们在其他网站上也有同样的问题，所以这是他们这边的问题。但是有没有办法强制浏览器只提供保存而不提供打开？

如此处所述： [有没有办法强制用户从 href 链接下载文件，而不是在浏览器窗口中打开它？](https://stackoverflow.com/questions/3841578/is-there-a-way-to-force-the-user-to-download-a-file-from-a-href-link-rather-than) 在这里： 使用 我目前正在使用[的 PHP 强制下载文件：](https://stackoverflow.com/questions/1465573/forcing-to-download-a-file-using-php)

```
 Response.ContentType = "application/ms-excel";
 Response.AddHeader("content-disposition", "attachment; filename=Report.xlsx");
 Response.AddHeader("Content-Length", new System.IO.FileInfo(fileName).Length.ToString()); 
```

但这仍然提供开放选项。

有没有办法强制执行此操作，还是仅取决于用户浏览器设置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T16:39:26.293

只需发送不同的 Content-Type (application/octet-stream)：

```
Response.ContentType = "application/octet-stream"; 
```

这样浏览器就无法识别格式，只是建议保存文件。

- - 编辑 - -

今天，我知道了另一个标题字段，它可能解决了您的问题：

“X-Content-Type-Options: nosniff”

描述：“唯一定义的值，‘nosniff’，防止 Internet Explorer MIME 嗅探远离声明的内容类型的响应。这也适用于谷歌浏览器，下载扩展时。[31]”

（[http://en.wikipedia.org/wiki/List_of_HTTP_header_fields](http://en.wikipedia.org/wiki/List_of_HTTP_header_fields)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T09:28:20.820

虽然这个问题很老，但我要回答......

对于 IE8/9 和 Chrome，这对我有用：

```
Response.AddHeader("X-Download-Options", "noopen"); 
```

# python - 用应用函数的结果替换正则表达式匹配

> ID：11973294
> 
> 赞同：3
> 
> 时间：2012-08-15T16:35:25.480
> 
> 标签：python, ruby, regex, python-2.7

我以前在 ruby​​ 中做过类似的事情：

```
text.gsub!( SOME REGEX ) do |s|
    s.SOME_STRING_STUFF
end 
```

我知道python中没有像rubys“做”的东西，但我不知道如何做这样的事情！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T20:27:47.580

只需将函数作为替换传递给[`re.sub`](http://docs.python.org/library/re.html#re.sub)：

```
print(re.sub(r't[^t].', lambda m: m.group(0)[::-1], 'testtext')) # settxett 
```

# ios - 当我添加新的 Localizable.strings 文件时添加了一个 xib 文件

> ID：11973296
> 
> 赞同：0
> 
> 时间：2012-08-15T16:35:29.303
> 
> 标签：ios, xcode

当我尝试将新`Localizable.strings`文件添加到我的项目（对于法语、德语和其他语言）时，我注意到为每个文件添加了一个 xib`Localizable.strings`文件。意味着`Localizable.strings (French)`，我得到了`ViewController.xib (French)`。我怎样才能摆脱它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T04:48:16.350

从 xcode 的右侧面板中选择第一个选项卡。有一个本地化选项，看看它是否有法语条目。

[http://cdn5.raywenderlich.com/wp-content/uploads/2011/03/infopane.jpg](http://cdn5.raywenderlich.com/wp-content/uploads/2011/03/infopane.jpg)检查您的 xib 文件

# c# - Ajax 调用 WCF 返回错误

> ID：11973302
> 
> 赞同：0
> 
> 时间：2012-08-15T16:35:41.207
> 
> 标签：c#, jquery, asp.net, ajax, wcf

我收到错误：

> *异常消息是“传入消息具有意外消息格式“原始”。该操作的预期消息格式为“Xml”、“Json”。这可能是因为尚未在绑定上配置 WebContentTypeMapper。有关详细信息，请参阅 WebContentTypeMapper 的文档。有关更多详细信息，请参阅服务器日志。*

我正在像这样对 WCF 服务进行 ajax 调用：

```
function WCFJSON() {
var now = new Date();

var getFromDate = dateToWcf(new Date(now - (60000 * 1440)));

var userid = "1";
m_Type = "POST";
m_Url = "https://dev-04.boldgroup.int/ManitouDashboard/DashboardProxyService.svc/GetStats"
m_Data = "{'fromdate':'" + getFromDate + "'getvaluelist':'[1,2,3]'}";
m_DataType = "json";
m_ProcessData = true;             
CallService();
}

function dateToWcf(input) {
var d = new Date(input);
if (isNaN(d)) {
    throw new Error("input not date");
}
var date = '\\\/Date(' + d.getTime() + '-0000)\\\/';
return date;
}

function CallService() {
$.ajax({
    type: m_Type,           //GET or POST or PUT or DELETE verb                  
    url: m_Url,                 //Location of the service   
    data: m_Data,
    dataType: m_DataType,   //Expected data format from server                  
    processdata: m_ProcessData, //True or False
    crossdomain: true,    
    contentType: "application/json",             
    success: function (msg) {   //On Successfull service call                      
        ServiceSucceeded(msg);
    },
    error: function (jqXHR, textStatus, errorThrown) {
        ServiceFailed("jqXHT: " + jqXHR.result + "Text Status: " + textStatus + " Error Thrown: " + errorThrown );
    } // When Service call fails              
});
} 
```

我的服务合同声明如下：

```
[ServiceContract]
public interface IDashboardWCFService
{
    [OperationContract]
    [WebInvoke(UriTemplate = "GetStats", ResponseFormat = WebMessageFormat.Json, BodyStyle = WebMessageBodyStyle.Wrapped)]
    Dictionary<int,List<StatValue>> GetStats(DateTime getFromDate, List<int> getValueList);

    [OperationContract]
    [WebGet(UriTemplate = "GetStatTypes", ResponseFormat = WebMessageFormat.Json)]
    List<StatType> GetStatTypes();
} 
```

我在通话中做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T16:54:19.130

1.  您的`m_Data`. 两个项目之间没有逗号 (m_Data = "{'fromdate':'" + getFromDate + " **,** 'getvaluelist':'[1,2,3]'}";)
2.  匹配参数名称 ( `fromdate`-> `getFromDate`, `getvaluelist`-> `getValueList`)
3.  使用 ISO 8601 日期时间格式 (2012-08-15T00:00:00+02:00) （我总是使用[XDate](http://arshaw.com/xdate/)作为日期/时间，它踢屁股）
4.  删除多余的刻度以防万一，并使用`JSON.stringify`.

> ```
> m_Data = JSON.stringify({
>   getFromDate: "'" + getFromDate + "'",
>   getValueList: [1,2,3]
> }); 
> ```

# node.js - MongoDB/Mongoose 在特定日期查询？

> ID：11973304
> 
> 赞同：170
> 
> 时间：2012-08-15T16:35:48.993
> 
> 标签：node.js, mongodb, express, mongoose, odm

是否可以查询特定日期？

我在 mongo Cookbook 中发现，我们可以为一个范围[查询日期范围](http://cookbook.mongodb.org/patterns/date_range/)，如下所示 ：

```
db.posts.find({"created_on": {"$gte": start, "$lt": end}}) 
```

但是有可能在特定日期吗？这不起作用：

```
db.posts.find({"created_on": new Date(2012, 7, 14) }) 
```

* * *

## 回答 #1

> 赞同：260
> 
> 时间：2012-08-15T16:40:06.023

如果您保存在数据库中的日期没有时间（只是年、月、日），那应该可以工作。

您保存的日期可能是`new Date()`，其中包括时间组件。要查询这些时间，您需要创建一个包含一天中所有时刻的日期范围。

```
db.posts.find({ //query today up to tonight
    created_on: {
        $gte: new Date(2012, 7, 14), 
        $lt: new Date(2012, 7, 15)
    }
}) 
```

* * *

## 回答 #2

> 赞同：166
> 
> 时间：2014-12-24T18:40:09.383

## ...5 年后，我强烈建议改用[date-](https://date-fns.org/) fns

```
import endOfDayfrom 'date-fns/endOfDay'
import startOfDay from 'date-fns/startOfDay'

MyModel.find({
  createdAt: {
    $gte: startOfDay(new Date()),
    $lte: endOfDay(new Date())
  }
}) 
```

## 对于我们这些使用[Moment.js的人](http://momentjs.com/)

```
const moment = require('moment')

const today = moment().startOf('day')

MyModel.find({
  createdAt: {
    $gte: today.toDate(),
    $lte: moment(today).endOf('day').toDate()
  }
}) 
```

**重要提示：[所有时刻都是可变的](http://momentjs.com/docs/#/parsing/moment-clone/)！**

`tomorrow = today.add(1, 'days')`不起作用，因为它也会发生变异`today`。调用`moment(today)`通过隐式克隆解决了这个问题 `today`。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2014-01-03T19:26:08.550

是的，Date 对象会完成日期和时间，因此仅将其与日期值进行比较是行不通的。

您可以简单地使用[**$where**](http://docs.mongodb.org/manual/reference/operator/query/where/#op._S_where)运算符来使用 Javascript 布尔表达式表达更复杂的条件 :)

```
db.posts.find({ '$where': 'this.created_on.toJSON().slice(0, 10) == "2012-07-14"' }) 
```

`created_on`是日期时间字段并且`2012-07-14`是指定的日期。

日期应完全采用**YYYY-MM-DD**格式。

**注意：**谨慎使用`$where`，它会影响性能。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-08-15T16:48:49.190

你有没有尝试过：

```
db.posts.find({"created_on": {"$gte": new Date(2012, 7, 14), "$lt": new Date(2012, 7, 15)}}) 
```

您将遇到的问题是日期在 Mongo 中存储为时间戳。因此，要匹配日期，您要求它匹配时间戳。在您的情况下，我认为您正在尝试匹配一天（即从特定日期的 00:00 到 23:59）。如果您的日期没有时间存储，那么您应该没问题。否则，如果 gte 不起作用，请尝试将您的日期指定为同一天的时间范围（即 start=00:00，end=23:59）。

[类似的问题](https://stackoverflow.com/questions/8136652/query-mongodb-on-month-day-year-of-a-datetime)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-01-14T21:57:00.837

您可以对 API 方法使用以下方法来获取特定日期的结果：

```
# [HTTP GET]
getMeals: (req, res) ->
  options = {}
  # eg. api/v1/meals?date=Tue+Jan+13+2015+00%3A00%3A00+GMT%2B0100+(CET)
  if req.query.date?
    date = new Date req.query.date
    date.setHours 0, 0, 0, 0
    endDate = new Date date
    endDate.setHours 23, 59, 59, 59
    options.date =
      $lt: endDate
      $gte: date

  Meal.find options, (err, meals) ->
      if err or not meals
        handleError err, meals, res
      else
        res.json createJSON meals, null, 'meals' 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2021-04-21T17:19:32.253

我用这种方法做的，效果很好

```
 public async getDatabaseorderbyDate(req: Request, res: Response) {
    const { dateQuery }: any = req.query
    const date = new Date(dateQuery)
    console.log(date)
    const today = date.toLocaleDateString(`fr-CA`).split('/').join('-')
    console.log(today)
    const creationDate = {
      "creationDate": {
        '$gte': `${today}T00:00:00.000Z`,
        '$lt': `${today}T23:59:59.999Z`
      }
    };

`
`` 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-05-23T08:50:21.880

我们在数据库中遇到了与重复数据有关的问题，日期字段有多个值，而我们本来应该有 1 个值。我想我会添加解决问题的方式以供参考。

我们有一个名为“数据”的集合，其中包含一个数字“值”字段和一个日期“日期”字段。我们有一个我们认为是幂等的过程，但最终在第二次运行时每天添加 2 x 值：

```
{ "_id" : "1", "type":"x", "value":1.23, date : ISODate("2013-05-21T08:00:00Z")}
{ "_id" : "2", "type":"x", "value":1.23, date : ISODate("2013-05-21T17:00:00Z")} 
```

我们只需要 2 条记录中的 1 条，因此不得不使用 javascript 来清理数据库。我们最初的方法是遍历结果并删除时间在早上 6 点到 11 点之间的任何字段（所有重复项都在早上），但在实施过程中进行了更改。这是用于修复它的脚本：

```
var data = db.data.find({"type" : "x"})
var found = [];
while (data.hasNext()){
    var datum = data.next();
    var rdate = datum.date;
    // instead of the next set of conditions, we could have just used rdate.getHour() and checked if it was in the morning, but this approach was slightly better...
    if (typeof found[rdate.getDate()+"-"+rdate.getMonth() + "-" + rdate.getFullYear()] !== "undefined") {
       if (datum.value != found[rdate.getDate()+"-"+rdate.getMonth() + "-" + rdate.getFullYear()]) {
           print("DISCREPENCY!!!: " + datum._id + " for date " + datum.date);
       }
       else {
           print("Removing " + datum._id);
           db.data.remove({ "_id": datum._id});
       }
    }
    else {
       found[rdate.getDate()+"-"+rdate.getMonth() + "-" + rdate.getFullYear()] = datum.value;
    }
} 
```

然后运行它`mongo thedatabase fixer_script.js`

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-10-02T06:09:28.780

我遇到的问题是在后端过滤日期，当在节点服务器中将日期设置为 0 小时、0 分钟、0 秒、0 毫秒时，它在 ISO 时间中执行，因此客户端的当前日期可能为 0 小时、0 分钟、0 秒、0 毫秒由于 ISO 时间到本地时区的转换，结果可能会在之后或之前给出一天

我通过将本地时间从客户端发送到服务器来解决这些问题

```
 // If client is from Asia/Kathmandu timezone it will zero time in that zone.
// Note ISODate time with zero time is not equal to above mention
const timeFromClient = new Date(new Date().setHours(0,0,0,0)).getTime() 
```

并利用这段时间使用此查询过滤文档

```
const getDateQuery = (filterBy, time) => {
    const today = new Date(time);
    const tomorrow = new Date(today.getDate() + 1);

    switch(filterBy) {
        case 'past':
            return {
                $exists: true,
                $lt: today,
            };
        case 'present': 
            return {
                $exists: true,
                $gte: today,
                $lt: tomorrow
            };
        case 'future':
            return {
                $exists: true,
                $gte: tomorrow
            };
        default: 
            return {
                $exists: true
            };
    };
};
const users = await UserModel.find({
    expiryDate: getDateQuery('past', timeFromClient)
}) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-04-01T15:28:27.243

似乎没有一个答案对我有用。尽管有人提到了一点提示，但我设法使它与下面的代码一起工作。

```
let endDate = startingDate
endDate = endDate + 'T23:59:59';

Model.find({dateCreated: {$gte: startingDate, $lte: endDate}}) 
```

`startingDate`将是您要查询的具体日期。

我更喜欢这个解决方案以避免安装，只是在邮递员`moment`中传递`startingDate`类似的东西。`"2021-04-01"`

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-04-06T11:51:19.460

下面给出了一个非常简单的解决方案

```
const start = new Date(2020-04-01);
start.setHours(0, 0, 0, 0);
const end = new Date(2021-04-01);
end.setHours(23, 59, 59, 999);
queryFilter.created_at={
    $gte:start,
    $lte:end
}
YourModel.find(queryFilter) 
```

因此，上面的代码只是查找从给定开始日期到给定结束日期的记录。

# python - Matplotlib 轴格式

> ID：11973308
> 
> 赞同：0
> 
> 时间：2012-08-15T16:36:05.247
> 
> 标签：python, plot, matplotlib

我想将当前日期和时间添加到实时图的 x 轴上。我已经尝试了几乎所有从自定义刻度到自定义轴的东西，但我似乎无法添加它。我该怎么做？

```
import sys
import pylab
from pylab import *
from PyQt4 import QtGui,QtCore
from matplotlib.figure import Figure
from matplotlib.backends.backend_qt4agg \
import FigureCanvasQTAgg as FigureCanvas
import MySQLdb as mdb

class CPUMonitor(FigureCanvas):
    def __init__(self):
        self.date = []
        conn = mdb.connect("serv","user","pass","db")
        self.cur = conn.cursor()
        self.before = self.prepare_cpu_usage()
        self.fig = Figure()
        self.ax = self.fig.add_subplot(111)
        FigureCanvas.__init__(self, self.fig)
        self.ax.set_title("Pong | CPU Utilization")
        self.ax.set_xlabel("Datetime")
        self.ax.set_ylabel("CPU %")
        self.ax.set_autoscale_on(False)
        self.user =[]
        self.l_user, = self.ax.plot([],self.user, label='Total %')
        self.ax.legend()
        self.fig.canvas.draw()
        self.cnt = 0
        self.timerEvent(None)
        self.timer1 = QtCore.QTimer()
        self.timer1.timeout.connect(self.get_database_data)
        self.timer1.start(5)
        self.timer = self.startTimer(5000)

    def get_database_data(self):
        self.cur.execute("SELECT cpu,date FROM status WHERE date = (SELECT MAX(date) FROM status);")
        self.data_db = self.cur.fetchone()
        return self.data_db
    def prepare_cpu_usage(self):
        t = self.get_database_data()
        return [t[0],t[1]]
    def get_cpu_usage(self): 
        now = self.prepare_cpu_usage()
        self.before = now
        print self.before
        return self.before
    def datetime(self):
        self.dates = self.get_cpu_usage()
        self.dates = self.dates[1]
        self.date.append(self.dates)
        return str(self.dates)
    def timerEvent(self, evt):
        result = self.get_cpu_usage()
        self.user.append(result[0])
        self.l_user.set_data(range(len(self.user)), self.user)
        self.fig.canvas.draw()
        CurrentXAxis=pylab.arange(len(self.user)-1000,len(self.user),1)
        self.ax.axis([CurrentXAxis.min(),CurrentXAxis.max(),0,100])

        self.cnt += 1
app = QtGui.QApplication(sys.argv)
widget = CPUMonitor()
widget.setWindowTitle("Pong: CPU Usage")
widget.show()
sys.exit(app.exec_()) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T20:58:58.227

您可以先查看一个简单的示例，以了解如何使日期标记起作用： http: [//matplotlib.sourceforge.net/examples/pylab_examples/finance_demo.html](http://matplotlib.sourceforge.net/examples/pylab_examples/finance_demo.html)

首先，您需要导入日期绘图类，例如：

```
from matplotlib.dates import DateFormatter, WeekdayLocator, MONDAY 
```

该文档位于[http://matplotlib.sourceforge.net/api/dates_api.html](http://matplotlib.sourceforge.net/api/dates_api.html)

然后在图形的定义中，设置定位器（用于刻度线）和格式化器（用于刻度标签）。下面的代码在每个星期一设置刻度线：

```
 self.ax.xaxis.set_major_locator(WeekdayLocator(MONDAY))
    self.ax.xaxis.set_major_formatter(DateFormatter('%b %d'))
    self.ax.xaxis_date() 
```

您现在应该使用`datetime.datetime`X 轴值和范围而不是整数。我希望 MySQLdb 返回`datetime.datetime`对象，否则您将不得不转换时间戳。

如果您尝试绘制空图表，日期格式化程序会报错。不要忘记设置合理的初始限制。

这是您的代码示例，其中我剥离了数据库代码（以及更多代码）并将其替换为生成的值：

```
import sys
from pylab import *
from PyQt4 import QtGui
from matplotlib.figure import Figure
from matplotlib.backends.backend_qt4agg import FigureCanvasQTAgg as FigureCanvas
from matplotlib.dates import DateFormatter, WeekdayLocator, MONDAY
import datetime
import random

class CPUMonitor(FigureCanvas):
    def __init__(self):
        # Dummy variable to simulate time.
        self.delay = 0

        self.fig = Figure()
        self.ax = self.fig.add_subplot(111)
        FigureCanvas.__init__(self, self.fig)
        self.ax.set_title("Pong | CPU Utilization")
        self.ax.set_xlabel("Datetime")
        self.ax.set_ylabel("CPU %")
        self.ax.xaxis.set_major_locator(WeekdayLocator(MONDAY))
        self.ax.xaxis.set_major_formatter(DateFormatter('%b %d'))
        self.ax.xaxis_date()

        # Set resonable initial limits.
        td = datetime.timedelta(1)
        self.ax.set_xlim(datetime.datetime.now(), datetime.datetime.now() + td)

        self.dates = []
        self.user =[]
        self.l_user, = self.ax.plot([],self.user, label='Total %')
        self.ax.legend()

        self.timer = self.startTimer(5000)

    def get_database_data(self):
        self.delay += 1
        td = datetime.timedelta(0, self.delay * 5)
        return [random.random(), datetime.datetime.now() + td]

    def prepare_cpu_usage(self):
        t = self.get_database_data()
        return [t[0],t[1]]

    def get_cpu_usage(self):
        return self.prepare_cpu_usage()

    def timerEvent(self, evt):
        result = self.get_cpu_usage()
        self.user.append(result[0])
        self.dates.append(result[1])
        self.l_user.set_data(self.dates, self.user)
        if len(self.dates) >= 2:
            self.ax.set_xlim(self.dates[0], self.dates[-1])
        self.draw()

app = QtGui.QApplication(sys.argv)
widget = CPUMonitor()
widget.setWindowTitle("Pong: CPU Usage")
widget.show()
sys.exit(app.exec_()) 
```

# sql - 我可以在 SQL Server Express 中进行开发，以便以后在完整的 SQL Server 中进行部署吗？

> ID：11973316
> 
> 赞同：3
> 
> 时间：2012-08-15T16:37:08.363
> 
> 标签：sql, sql-server, vb.net, sql-server-2012-express

对 SQL Server 来说非常新。我需要开发一个 SQL Server 数据库来运行我正在开发的 iPhone 应用程序。它最终将与我们的 IT 人员管理的成熟 SQL Server 数据库一起运行，但我希望有一个本地数据库进行测试。

两个问题：

1.  我假设我可以为此目的使用 SQL Server Express 2012，因为它是这样宣传的；但是将似乎最简单的形式LocalDB与VB2010结合使用会更好/更容易吗？它将在我的办公室 PC 上运行，该 PC 的端口为我的应用程序的 TCP 通信打开（工作正常）。如果通信发生在 VB 应用程序中，LocalDB 会为此工作吗？或者我需要获得 SQL Server Express 版本吗？

2.  如果原型数据库是在 SQL Server Express 中开发的，那么当应用程序“上线”时，它是否可以迁移到我们成熟的 SQL Server？（我现在不确定我们成熟的 SQL Server 是什么版本，但我计划使用 SQL Server Express 2012。）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-15T16:40:44.243

是的，Express 版本**是**成熟的 SQL Server 版本 - 没有代码差异，只有一些营销驱动的限制（数据库大小等）。

您绝对可以在 SQL Server Express 上开发您的系统，然后只需将您的数据库从 Express 中分离出来，然后将其重新附加到标准版或企业版服务器。没有大惊小怪，没有迁移，没有转换 - 没有 - 它只是工作。时期。

而且我什至可能会争辩说，安装（您的 Express）版本的**服务器**是比 LocalDB 更好的选择。这样，您*已经在*使用基于服务器的方法，就像您稍后在生产中一样，并且您不会陷入 LocalDB（或其他方法）提供的任何“方便”陷阱，这些陷阱使开发人员的生活更轻松 - 但推广到生产可能是一个挑战。当您从一开始就将 SQL Server Express 用作基于服务器的安装时 - 您从第一天起就拥有“真正的交易”。

# .htaccess - 隐藏文件扩展名不起作用 htaccess

> ID：11973320
> 
> 赞同：2
> 
> 时间：2012-08-15T16:37:31.797
> 
> 标签：.htaccess

我正在使用 mod_rewrite 隐藏**文件**扩展名，此代码运行良好，但是当我在 url 末尾添加斜杠时，它显示错误 500 内部服务器错误

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.*)$ $1.php 
```

请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T18:13:54.847

> 但是当我在 url 末尾添加斜杠时，它会显示错误 500 内部服务器错误

这是因为斜杠在 中被组合在一起，`(.*)`然后被 引用`$1`，因此请求如下：

```
http://your.host.com/my_file/ 
```

正在重写为：

```
http://your.host.com/my_file/.php 
```

原因是条件`%{REQUEST_FILENAME}\.php`存在，因为尾部斜杠被忽略。你只需要在你`RewriteRule`的正则表达式中包含与尾部斜杠的匹配：

```
RewriteRule ^(.*?)/?$ $1.php 
```

# sql - SQL 视图未加入

> ID：11973321
> 
> 赞同：0
> 
> 时间：2012-08-15T16:37:36.837
> 
> 标签：sql, sql-server

我有两个表，其中包含 ZipCodes，每个表中它们都是相同的。列数据类型相同且大小也相同。有谁知道为什么我的观点没有正确更新？对于第二个表，它总是显示 NULL。谢谢

```
USE [DB]
GO

SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
ALTER VIEW [dbo].[myview]
AS
SELECT     dbo.Table1.Division, dbo.Table1.RegionName AS Region, dbo.Table1.AccountDir AS RegionManager, dbo.Table2.key, 
                      dbo.Table2.ZipCode, dbo.Table3.ZipCity, dbo.Table3.ZipCounty, dbo.Table3.ZipState
FROM         dbo.Table2 LEFT OUTER JOIN
                      dbo.Table1 ON dbo.Table2.key = dbo.Table1.key LEFT OUTER JOIN
                      dbo.Table3 ON dbo.Table2.ZipCode = dbo.Table3.ZipCode 
```

邮政编码就像这个 05412。普通的 5 位数拉链。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T16:54:32.783

我必须查看您的数据才能给出可靠的答案，但我怀疑 table2 中没有符合条件的记录：

```
dbo.Table2.key = dbo.Table1.key 
```

由于您在此条件下进行左连接，因此将为 Table1 中的每条记录返回空值，这些记录在 table2 中没有匹配的记录。

查看这篇文章，以更好地了解不同类型的连接是如何工作的：

[http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T16:55:03.760

我将建议一些事情，如果`ZipCode`字段上的数据类型是 a`varchar`那么您可能会遇到空格问题，因此您可以尝试修剪该值以删除任何空格。如果有空格，则无法匹配记录：

```
SELECT dbo.Table1.Division, 
    dbo.Table1.RegionName AS Region, 
    dbo.Table1.AccountDir AS RegionManager, 
    dbo.Table2.key, 
    dbo.Table2.ZipCode, 
    dbo.Table3.ZipCity, 
    dbo.Table3.ZipCounty, 
    dbo.Table3.ZipState
FROM  dbo.Table2 
LEFT OUTER JOIN dbo.Table1 
    ON dbo.Table2.key = dbo.Table1.key 
LEFT OUTER JOIN dbo.Table3 
    ON LTRIM(RTRIM(dbo.Table2.ZipCode)) = LTRIM(RTRIM(dbo.Table3.ZipCode)) 
```

但是您需要确保您的数据存在于所有表中。否则你将得不到任何结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T19:40:14.337

这是使用批量加载命令上传 csv 的格式问题...我将其导入访问数据库，然后将其导入我的 sql 数据库，没有任何问题。0dd

# jquery - 添加 DIV 下拉菜单

> ID：11973325
> 
> 赞同：0
> 
> 时间：2012-08-15T16:37:52.093
> 
> 标签：jquery, html, drop-down-menu

我正在尝试将 div 作为下拉菜单添加到文本菜单中。在将鼠标悬停在文本链接上时，我希望 div 出现在文本下方，并在用户滚下文本、滚下 div 时消失（显然，或者单击 div 中的链接）。这是我到目前为止的代码：

我根本无法显示 div！

这是一个 jfiddle：http: [//jsfiddle.net/VtXvB/](http://jsfiddle.net/VtXvB/)

* * *

查看我的代码的本地副本没有正确找到 jquery 库（因为我使用的版本与 http:// 或 https:// 不明确）

我解决了这个问题，并在我的脚本标签中添加了一个“类型”属性，一切都很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T16:47:48.577

这是因为您在锚标记上使用悬停事件，在这种情况下，当您移动到 ​​div 时会发生 unhover 事件，这就是该 div 隐藏的原因。因此，请使用以下 JS 代码代替：

```
$(document).ready(function(){
  $("#menu li").hover(
    function () {
      $(this).find("a").addClass('active').next('.submenu').addClass('active').slideDown('fast');
    }, 
    function () {
      $(this).find("a").removeClass('active').next('.submenu').removeClass('active').slideUp('fast');
    }
  );
}); 
```

# .net - WCF 服务从 Java 客户端接受 POST 时出现问题

> ID：11973326
> 
> 赞同：0
> 
> 时间：2012-08-15T16:37:51.783
> 
> 标签：.net, wcf, web-services

我有一个在 IIS 7.5 上运行的 WCF (.NET 4.0) 服务。我需要接受来自我无法控制的 Java 客户端的请求。根据客户端的人的说法，他们将内容放入肥皂信封中，签名并通过 HTTPS 将其作为文本发布。听起来很简单，但此错误显示在跟踪日志中：

由于 EndpointDispatcher 的 ContractFilter 不匹配，接收方无法处理带有 Action 'xxxxxxx' 的消息。这可能是因为合约不匹配（发送方和接收方之间的操作不匹配）或发送方和接收方之间的绑定/安全不匹配。检查发送方和接收方是否具有相同的合同和相同的绑定（包括安全要求，例如消息、传输、无）。

相关配置：

```
<basicHttpBinding>
<binding name="XXhttpBinding">
  <security mode="Transport">
  </security>
</binding>
</basicHttpBinding>

<service name="XXXWcfLib.XXMessageService" behaviorConfiguration="XXBehavior">
<endpoint address="ProcessMessage" binding="basicHttpBinding"    bindingConfiguration="XXhttpBinding" contract="XXXWcfLib.IXXMessageService"   name="ProcessMessage">
      <identity>
        <dns value="localhost" />
      </identity>
    </endpoint>
    <host>
      <baseAddresses>
        <add baseAddress="https://sub.domain.com/XXService/XXXService.svc" />
      </baseAddresses>
    </host>
 </service> 
```

服务合约接口：

```
<OperationContract()>
Function ProcessMessage(ByVal Message As String) As String 
```

编辑：

java客户端帖子的标题：

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
  <s:Header>
    <SOAP-SEC:Signature SOAP:mustUnderstand="1" xmlns:SOAP-   SEC="http://schemas.xmlsoap.org/soap/security/2000-12"  xmlns:SOAP="http://schemas.xmlsoap.org/soap/envelope/">
    <Signature xmlns="http://www.w3.org/2000/09/xmldsig#">
      <SignedInfo>
        <CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#">       </CanonicalizationMethod>
        <SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1">   </SignatureMethod>
        <Reference URI="#Body">
        <Transforms>
           <Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"></Transform>
        </Transforms>
        <DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"></DigestMethod>
        <DigestValue>----------------------</DigestValue>
      </Reference>
    </SignedInfo>
  <SignatureValue>---------------------</SignatureValue>
  <KeyInfo>
    <X509Data>
      <X509Certificate></X509Certificate>
      <X509IssuerSerial>
        <X509IssuerName>-------------------</X509IssuerName>
        <X509SerialNumber>################</X509SerialNumber>
      </X509IssuerSerial>
    </X509Data>
  </KeyInfo>
</Signature>
</SOAP-SEC:Signature>
<To s:mustUnderstand="1"    xmlns="http://schemas.microsoft.com/ws/2005/05/addressing/none">https://sub.domain.com/xxse rvice/xxservice.svc/ProcessMessage</To>
<Action s:mustUnderstand="1"  xmlns="http://schemas.microsoft.com/ws/2005/05/addressing/none">appaction</Action>
</s:Header> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T22:02:42.020

我最终将我的界面更改为：

```
 <OperationContract()>
    Function ProcessMessage(ByVal Message As Stream) As String 
```

然后我在我的实现中手动处理了消息的验证。

# objective-c - NSArray enumerateUsingBlock: can I access object at other index inside block?

> ID：11973329
> 
> 赞同：0
> 
> 时间：2012-08-15T16:37:59.490
> 
> 标签：objective-c, nsmutablearray, nsarray, objective-c-blocks, enumeration

can I do this?

```
[array enumerateUsingBlock:^(id obj, NSUInteger idx, BOOL *stop){
    if (idx > 1)
    {
        NSUInteger previous1 = [array objectAtIndex: idx - 1].value;
        NSUInteger previous2 = [array objectAtIndex: idx - 2].value;
        obj.value = previous1 + previous2;
    }
}]; 
```

is it safe to do this? I am not adding/removing objects in array(or mutable array) inside enumeration block, I am just getting/changing value of object in other idx.

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T16:52:06.807

That is OK, except that you have to cast your objects to the right type before you can use the dot syntax to get to the value property.

# iphone - XCode 4.4.1：无法部署到设备或模拟器：不支持的架构

> ID：11973334
> 
> 赞同：1
> 
> 时间：2012-08-15T16:38:32.250
> 
> 标签：iphone, xcode, arm, xcode4.4

我在部署到 XCode 4.4 中的任何设备时遇到了一些问题。我只在 armv7 设备上进行了测试，但我只想部署到 armv7。应用程序编译没有问题。

* * *

![选择具有受支持架构的目标以便在此设备上运行](../Images/e4514392cea291fe177da6c8421dd5cf.png)

*设备错误*

* * *

![所选目标不支持构建所选软件的体系结构。 切换到支持该架构的目的地以运行所选软件。](../Images/296d05da4887ddbdb0a5d7e719769873.png)

*模拟器错误*

* * *

我检查了构建设置中的架构和有效架构**仅包含 armv7**。

我在一个项目和一个子项目的 XCode 工作区中工作。子项目创建一个静态库，作为对主项目的目标依赖。

其他问题表明**部署目标可能是错误的，但我也检查了这**一点，所有项目和目标都设置为 iOS4.0。（所有设备都是iOS5.0+）

请问有人有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T09:25:42.703

虽然我无法找到发生这种情况的确切原因。我通过删除项目数据来修复它。

*   关闭 XCode
*   打开终端
*   `cd`到您的 .xcodeproj 目录
*   递归删除与当前用户名关联的所有项目数据文件
    *   `find . -name "YOUR_OSX_USERNAME_HERE*" | xargs rm -rf`
*   重新打开 XCode
*   只是为了运气，做一个干净的构建

## 编辑

再次出现此错误，仅通过上述步骤无法解决。还有另外两个因素：

*   确保**Info.plist 不是 Target Membership 的一部分**

*   清除`DerivedData`

    *   退出 Xcode 和 iPhone 模拟器
    *   拔下您的设备
    *   去`~/Library/Developer/Xcode/DerivedData/`
    *   删除该文件夹下的所有数据
    *   再次启动 Xcode 并运行您的项目

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T17:40:41.663

我发现 Xcode 似乎真的很喜欢 '$(ARCHS_STANDARD_32_BIT)' for 'Architectures'。如果它没有设置为尝试它，使用 armv7 的“有效架构”。

只是好奇——如果只为较新的手机构建，为什么不使用 4.3 的部署目标？您将能够使用早期版本中没有的一些新块技术。

# ruby-on-rails - 从 github 或单独的服务器而不是 RubyGems 下载所有 gem 和依赖项？

> ID：11973337
> 
> 赞同：0
> 
> 时间：2012-08-15T16:38:37.743
> 
> 标签：ruby-on-rails, github, rubygems, gem, bundler

我的公司网络不允许我们访问除 github 之外的几乎任何站点，所以我想知道如何安装 gems。

选项 1：指向所有 gem 的 github 源，但我们是否也必须指定来自 github 的依赖项？

选项 2：我们有一个可以访问 RubyGems 的代理服务器，我在想如果我们可以在那里下载所有的 gem 和依赖项，那么我们就可以将 gem 提供给那台机器。我是否需要在该服务器上托管文件以从我的 gemfile 中指向它们？

这些选项中的任何一个都可能吗？

编辑：我认为这个问题解决了我的问题：[How to build a ruby​​gems mirror server?](https://stackoverflow.com/questions/8411045/how-to-build-a-rubygems-mirror-server)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T17:24:03.693

您可以从“gems.github.com”获取您的宝石。他们在此处发布了可以从中获取的 gem 列表：http: [//gems.github.com/list.html](http://gems.github.com/list.html)据我了解，该列表不再更新，因此您最终会遇到问题。

我想您可以尝试运行本地镜像。快速谷歌后发现：[https ://github.com/rubygems/rubygems-mirror](https://github.com/rubygems/rubygems-mirror)

也就是说，我和mpapis在一起。如果您在一家希望您编写 Ruby 代码的公司工作并且他们不允许使用 ruby​​gems.org，那么我会问自己一些严肃的问题，即我是否想在那里工作。

# google-drive-api - 缩略图 url 在新文件上可用之前的延迟多长时间？

> ID：11973338
> 
> 赞同：1
> 
> 时间：2012-08-15T16:38:39.380
> 
> 标签：google-drive-api

我正在插入一个新文件，并使用返回的 File 对象来存储缩略图。间歇性地，getThumbnail() 为 .pdf 文件返回 null。

我猜想解释是缩略图是异步生成的，并且有时在 insert() 调用返回不完整的 File 对象之前处理不完整。

有什么办法可以使这种行为更具确定性吗？或者，有人知道缩略图的后续处理是否构成将由 get changes 调用返回的“更改”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T01:20:47.733

AFAIK 是的，缩略图是异步计算的。延迟可能因服务器负载、文件类型和文件大小而异，但在我的测试中，PDF 的拇指在文件创建后不久就可用。

可能此时您能做的最好的事情是尝试后续请求并继续尝试，直到您获得缩略图，但不要忘记使用[指数退避来](http://en.wikipedia.org/wiki/Exponential_backoff)避免服务器过载并在某些情况下杀死您的配额。

我不认为当缩略图准备好时，在这种情况下这算作更改提要的更改。

# java - 关于编码时要保留的性能优化技术

> ID：11973340
> 
> 赞同：0
> 
> 时间：2012-08-15T16:38:59.753
> 
> 标签：java

当我正在研究通过使用 System.currentTimeinMillis() 来测量 Java 中经过的执行时间时，如果代码如下所示，但我的查询是我们在编码时除了测量时间之外还应该记住的其他性能技术，我的查询更多地集中在性能优化技术上。

```
 public class MeasureTimeExampleJava {

    public static void main(String args[]) {

        //measuring elapsed time using System.nanoTime
        long startTime = System.nanoTime();
        for(int i=0; i< 1000000; i++){
            Object obj = new Object();
        }
        long elapsedTime = System.nanoTime() - startTime;

        System.out.println("Total execution time to create 1000K objects in Java in millis: "
                + elapsedTime/1000000);

        //measuring elapsed time using Spring StopWatch
        StopWatch watch = new StopWatch();
        watch.start();
        for(int i=0; i< 1000000; i++){
            Object obj = new Object();
        }
        watch.stop();
        System.out.println("Total execution time to create 1000K objects in Java using StopWatch in millis: "
                + watch.getTotalTimeMillis());
    }   

}

Output:
Total execution time to create 1000K objects in Java in millis: 18
Total execution time to create 1000K objects in Java using StopWatch in millis: 15 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T16:41:04.650

以下是我在尝试优化代码时采取的步骤：

*   使用架构/设计的最佳实践
*   编写易于维护的代码
*   使用分析器测量结果
*   只优化分析器认为需要注意的部分代码
*   只花时间优化会影响程序实际用户的东西

我的分析器将向我展示各种感兴趣的领域

*   CPU 热点
*   内存使用过多（可能表现为大量 GC 和/或大量交换）
*   过多的 IO（磁盘、网络）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T22:38:03.610

您正在测试两种不同的测量经过时间的方法。您的测试存在缺陷，因为您在同一个 JVM 执行中运行这两个测试。这冒着第一次测试预热缓存并影响第二次测试的风险。正确的方法是在自己的 JVM 执行中运行每个测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T16:40:56.697

我想说你应该关心很多其他的事情，所有这些都应该可以通过像 Visual VM 这样的工具来访问：

1.  中央处理器
2.  所有代的堆
3.  正在运行的线程及其状态
4.  正在创建和处理的对象
5.  垃圾收集周期
6.  网络流量
7.  资源分配和清理

像这样的微测试很少有帮助。JVM 使用运行时统计信息来优化性能，因此“老化”可能是一个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T16:49:10.547

优化的第一条规则是不要。除非您非常准确地知道自己在做什么，否则您将优化错误的东西，错过正确的东西，使性能变差，并破坏可靠性和可读性。

专注于编写结构良好、文档齐全、紧凑的代码。如果以后需要优化，完成起来会容易得多。

（请注意，用`new Object()`Java 测量性能是一项愚蠢的差事。垃圾收集器是房间里 800 磅的大猩猩，所以你所有的测量都是无用的。）

# vb.net - Visual Basic 中的泛型类型限制

> ID：11973347
> 
> 赞同：5
> 
> 时间：2012-08-15T16:39:24.247
> 
> 标签：vb.net, generics

在 C# 中，您可以限制泛型类型：

```
public class Test<T> where T : SomeBaseClass 
```

你能在 Visual Basic 中做同样的事情吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-15T16:41:50.443

是的。你这样做：

```
Public Class Test(Of T As SomeBaseClass) 
```

有关详细信息，请参阅[通用类型](http://msdn.microsoft.com/en-us/library/w256ka79.aspx)文档中的约束。

# objective-c - 加速 UIPickerView 滚动的动画

> ID：11973350
> 
> 赞同：0
> 
> 时间：2012-08-15T16:39:28.397
> 
> 标签：objective-c, ios, cocoa, uipickerview

目前，在选择组件或滑动 UIPickerView 时，默认为等待选择的动画时间较长，值附近具有“重力”效果。有没有一种简单的方法来加速这个动画？我查看了委托协议以及 UIPickerView 的方法和属性。我是否必须对动画方法进行子类化和重载？任何帮助都会很有用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T17:28:05.280

没有办法做到这一点。如果您希望有一种方法可以做到这一点，请[提交一个错误](https://bugreport.apple.com)请求。

此外，正如 Fabian 所建议的那样，依赖实现细节和特定的间隔视图层次结构是一种非常好的方法，可以在您的应用程序中引入大量脆弱性，并打开您的应用程序在未来发生故障的可能性，如果 UIKit 改变任何东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T16:48:49.317

我不知道使用公共 API 实现这一点的方法，但在其视图层次结构中的某处`UIPickerView`使用 a`UIPickerTableView`作为子视图。那是一个子类，`UITableView`它的子类`UIScrollView`具有`decelerationRate`属性。

不过，您不应该使用私有 API。如果你真的需要这个并且它不是 App Store 应用程序，这可能没问题，但你应该小心并防御性地编码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-22T17:28:00.557

我没有 50 个代表，所以不能对此发表评论（这是真正应该去的地方）。这个问题不应该被否决，因为这个问题是合法的。有效的答案是“不，如果没有私有 API 黑客，你将无法做到这一点”），但问题仍然有效。

# javascript - 从移动网站转到完整网站？

> ID：11973352
> 
> 赞同：0
> 
> 时间：2012-08-15T16:39:31.157
> 
> 标签：javascript, html

我用 HTML 和 Javascript 制作了一个网站。当有人使用 iPhone 或 iPod Touch 访问完整站点时，它会重定向他们。问题是我的移动设备上有一个链接可以返回到完整的站点，但该链接不起作用，因为它只是将它们重定向回移动站点。任何帮助，将不胜感激。

要重定向的javascript：

```
 <script language=javascript>
        <!--
        if ((navigator.userAgent.match(/iPhone/i)) ||       (navigator.userAgent.match(/iPod/i))) {
            location.replace("Mobile version");
            }
            -->
    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T16:41:26.087

当用户选择访问完整站点时添加 cookie。然后在您重定向到移动检查以确保该 cookie 不存在。

要设置 cookie：

```
var expire = new Date();
expire.setTime(expire.getTime()+(1*24*60*60*1000));
document.cookie = "nomobile=true; expires="+expire+"; path=/"; 
```

要读取 cookie：

```
function getCookie(c_name) {
    var i,x,y,ARRcookies=document.cookie.split(";");
    for (i=0;i<ARRcookies.length;i++) {
        x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("="));
        y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1);
        x=x.replace(/^\s+|\s+$/g,"");
        if (x==c_name) {
            return unescape(y);
        }
    }
}
if (!getCookie("nomobile")) {
    //USE THIS AREA TO CHECK THE USER AGENT AND REDIRECT AS YOU CURRENTLY ARE
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T16:41:08.363

一个简单的解决方法是检查推荐人是否是您自己的网站。它来自您自己的网站，然后不要重定向到移动版本。

# mysql - MySql查询如果字段等于不同表中的字段更新不同的字段

> ID：11973360
> 
> 赞同：0
> 
> 时间：2012-08-15T16:39:58.790
> 
> 标签：mysql, insert, case

我有两张桌子。我想在 table1 中等于`MODEL`table2 时在 table2 中更新。`ITEM``ITEM`

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T16:43:27.320

如果我理解正确，您只想根据大概的外键执行`UPDATE`on ？`table2`

如果这是正确的，这应该工作：

```
UPDATE
    table2
    JOIN table1
        ON table1.ITEM = table2.ITEM
SET
    MODEL = 'new value'; 
```

语句中的表声明与`UPDATE`语句中指定的相同`SELECT`- 因此您可以使用`JOIN`适合您的表/数据的任何类型。
的文档[`UPDATE`](http://dev.mysql.com/doc/refman/5.0/en/update.html)，[`SELECT`](http://dev.mysql.com/doc/refman/5.0/en/select.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T16:45:04.633

在 MySQL 中，你可以这样做

```
UPDATE table1 t1 
           INNER JOIN table2 t2 
                ON t1.id = t2.id
SET t1.col1 = t2.col1, 
    t1.col2 = t2.col2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T16:43:16.137

如果您可以添加实际的查询尝试或其他内容，那可能会有所帮助。您可以尝试以下方法：

```
UPDATE table2 JOIN table1 ON table2.ITEM = table1.ITEM SET MODEL = ? 
```

# c#-4.0 - 在多个方法调用中传递大字符串或字节数组是否很好

> ID：11973361
> 
> 赞同：1
> 
> 时间：2012-08-15T16:39:59.597
> 
> 标签：c#-4.0, methods, parameters, bytearray

如果我没记错的话，即使我们将大字符串或字节数组作为参数传递给方法，它也只会将指针传递给数据堆而不是完整数据。所以它不应该降低任何性能，也不应该不必要地堆积内存。只是想确认我对上述说法的理解是否正确？
我知道最好将字符串或字节数组作为私有变量保留在类中，并在所需的每个方法中访问它，从而从方法调用中消除一个额外的参数。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T16:42:19.003

> 如果我没记错的话，即使我们将大字符串或字节数组作为参数传递给方法，它也只会将指针传递给数据堆而不是完整数据。

是的，当您传递*任何*引用类型参数时，只会按值传递引用。请注意，这与“按引用传递”不同，后者适用于引用类型和值类型的参数。

有关更多信息，请参阅我关于[引用类型和值类型](http://pobox.com/~skeet/csharp/references.html)以及[参数传递](http://pobox.com/~skeet/csharp/parameters.html)的文章。

> 我知道最好将字符串或字节数组作为私有变量保留在类中，并在所需的每个方法中访问它，从而从方法调用中消除一个额外的参数。

这完全取决于上下文。它在逻辑上是类状态的一部分吗？

# python - 为 Maya 2013 设置 Eclipse

> ID：11973363
> 
> 赞同：0
> 
> 时间：2012-08-15T16:40:08.833
> 
> 标签：python, eclipse, maya

我按照以下说明进行操作：

[http://www.luma-pictures.com/tools/pymel/docs/1.0/eclipse.html](http://www.luma-pictures.com/tools/pymel/docs/1.0/eclipse.html)

还阅读了 Maya 的文档：

[http://download.autodesk.com/global/docs/maya2013/en_us/files/Python_Python_from_an_external_interpreter.htm#](http://download.autodesk.com/global/docs/maya2013/en_us/files/Python_Python_from_an_external_interpreter.htm#)

现在我可以成功导入和初始化 Maya Standalone 和 Cmds 模块。

但是，当我尝试编写类似“cmds.polyCube()”的代码时，首先我没有任何自动完成功能，其次 Eclipse 返回一个错误，指出 cmds 模块没有任何名为 polyCube() 的变量等。 ...这是我用来在 Eclipse 中导入和初始化 Maya 的确切过程：

```
import maya.standalone
maya.standalone.initialize()

import maya
from maya import cmds

cmds.polyCube(n='cuby_01')
cmds.select('cuby_01') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T05:43:25.877

你也可以看看这个教程：

[http://www.creativecrash.com/tutorials/using-eclipse-as-a-maya-ide](http://www.creativecrash.com/tutorials/using-eclipse-as-a-maya-ide) （最相关的部分位于链接页面的“第 2 页”选项卡上）。基本上，您需要将 Eclipse 的“预定义”指向 /devkit/other/pymel/extras/completion/pypredef

![pypredef](../Images/a93e534b5adb1cd9618e39870ac68ff3.png)

只要（a）您使用的是 2.6 解释器并且（b）您的 eclipse PYTHONPATH 中有 maya python 目录，您的示例应该可以正常工作：

![在此处输入图像描述](../Images/3771c8ef97685b28aaf08358ea0186bb.png) 通常最容易将 eclipse 配置为使用 /bin/mayapy.exe 作为 maya 的解释器。您可能会发现它更易于使用

```
import maya.standalone
maya.standalone.initialize()
import maya.cmds as cmds
pc = cmds.polyCube() 
```

cmds 模块导入为空，除非您已经初始化了 maya.standalone - 您的示例显示了这一点，但也许您在没有standalone.initialize() 的早期运行中遇到了该错误？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T19:48:40.520

您确定您从 pymel eclipse 文档中执行了此步骤：

> 再次单击“新建文件夹”按钮，然后添加您之前删除的站点包目录。我们这样做是为了确保在真正的 Maya 包之前找到存根 Maya 包。完成后，主站点包目录应位于您刚刚添加的 extras/completion/py 文件夹下方的某个位置。

这是将存根添加到自定义解释器的重要部分。最后，您应该设置了一个 mayapy 解释器，并添加了这个站点包位置。此外，请确保在创建新的 pydev 项目时，进入其特定属性并将 python 解释器设置为您设置的 mayapy。否则，您仍然可能使用默认的 python interp。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T03:39:25.583

我这里写了一点解释，这里如何添加mayapay解释器： [Eclipse environment for Maya's python modules](https://stackoverflow.com/questions/4841190/eclipse-environment-for-mayas-python-modules/13576949#13576949)

我很确定这是你的问题。

看看，如果您有任何问题，请不要犹豫再次在这里提问:)

# ruby-on-rails - 定义？对于可自动加载的类

> ID：11973369
> 
> 赞同：1
> 
> 时间：2012-08-15T16:40:37.770
> 
> 标签：ruby-on-rails, ruby

在 Rails 应用程序中，我想检查是否定义了常量，并在必要时自动加载它。`defined?`在自动加载发生之前，运算符返回 false 。

```
defined? Foo # => false :(
Foo # => Foo
defined? Foo # => true 
```

我目前的解决方法是这样的：

```
begin
  Foo # try to autoload
  true
rescue NameError
  false
end 
```

**有没有更好的方法来检查是否定义了常量，但如果需要也自动加载它？**

* * *

请求的理由：

用于 Rails 的 Konacha JS 测试框架应该自动获取一个固定 Ruby 文件（如果存在）。加载应该使用 Rails 的自动加载机制进行，因此它受益于自动重新加载（使用`config.cache_classes = false`）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T17:27:08.947

听起来您正在尝试创建一个`could_be_defined?`尝试自动加载然后返回`true`或`false`如您所指示的方法。

在您尝试使用某个类之前，无法确定它是否存在。这是高度动态语言的优点之一。不利的一面是不确定性。

您的强制加载和测试方法是确定的唯一方法。有些模块可能没有通过声明，`autoload`但实际上是根据需要动态生成的。试图预测可能存在或不存在的东西充其量是不可靠的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-22T08:47:55.577

我有一个类似的问题，我正在加载基于约定的推断常量。我遇到的问题是这些类定义中的任何错误都被吞没了。

我想出了这个：

```
def const_presence(const_name)
  const_name.constantize
rescue NameError => e
  raise e unless e.message =~ /uninitialized constant #{const_name}/
end 
```

如果未定义常量，则返回 nil，如果已定义则返回常量，但关键是允许引发加载常量时遇到的任何错误。

# iphone - UIScrollView 的设置框架位于 Nav/Tab 栏之间

> ID：11973374
> 
> 赞同：0
> 
> 时间：2012-08-15T16:40:48.597
> 
> 标签：iphone, objective-c, ios, uiscrollview

正如标题所解释的，我正在我的视图控制器的 loadView 中以编程方式创建一个 UIScrollView，然后我将其设置为 self.view。

```
_pagingScrollView = [[UIScrollView alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
self.view = _pagingScrollView; 
```

如果我在 loadView 的末尾检查 _pagingScrollView.frame，它等于

{{0,0}，{320,480}}。

但是，如果我在我的`scrollViewDidScroll`委托中检查相同的属性，它会切换到

{{0,0},{320,367}}

我如何分配/初始化我的滚动视图，以便它的高度从一开始就考虑标签/导航栏，并给我 367？我知道我可以简单地对 367 进行硬编码，但我想知道这里发生了什么以及为什么它以一个值开始然后发生变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T16:51:25.177

为什么不创建`UIScrollView`具有已知界限的

```
_pagingScrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0,0,320,387]; 
```

`UIScreen`或从边界中减去 TabBar 或 NavBar 的高度

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T16:50:58.677

我相信您看到的问题是由您使用 [UIScreen mainscreen] 引起的，它指的是整个窗口（320,480）并且不关心其中的导航/选项卡视图。

您可能希望使用 applicationFrame 方法，而不是使用它。

请参阅此相关帖子-[如何获取实际的 [UIScreen mainScreen] 帧大小？](https://stackoverflow.com/questions/5150794/how-to-get-the-actual-uiscreen-mainscreen-frame-size)

此外，如果设置了 vc 的 superView/superViewController，则可以使用它们来获取更多相关的大小信息，因为 MainScreen 仍将仅引用*整个*窗口，而不考虑子视图控制器，例如 nav/tabs。

# objective-c - 可变形的神奇唱片

> ID：11973379
> 
> 赞同：0
> 
> 时间：2012-08-15T16:41:02.187
> 
> 标签：objective-c, core-data, magicalrecord, transformable

我可以将可变形与 Magical Record 一起使用吗？
因为当我使用可变形时我的应用程序崩溃所以我很困惑哪个可以将变形与魔法记录一起使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T16:09:06.623

是的，您可以使用具有神奇记录的可变形对象。我已经在几个项目中这样做了。请发布有关您的崩溃的更多信息，以便我们尝试为您提供帮助。

# java - 如何在java中将包含逗号的数字字符串解析为整数？

> ID：11973383
> 
> 赞同：40
> 
> 时间：2012-08-15T16:41:10.283
> 
> 标签：java, exception, number-formatting

`NumberFormatException`当我尝试解析 265,858 时，我得到了`Integer.parseInt()`.

有没有办法把它解析成整数？

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-08-15T16:44:13.463

这个逗号是小数分隔符还是这两个数字？在第一种情况下，您必须向[`Locale`](http://docs.oracle.com/javase/8/docs/api/java/util/Locale.html)使用[`NumberFormat`](http://docs.oracle.com/javase/8/docs/api/java/text/NumberFormat.html)逗号作为小数分隔符的类提供：

```
NumberFormat.getNumberInstance(Locale.FRANCE).parse("265,858") 
```

这导致`265.858`. 但是使用美国语言环境你会得到`265858`：

```
NumberFormat.getNumberInstance(java.util.Locale.US).parse("265,858") 
```

那是因为在法国，他们将逗号视为小数分隔符，而在美国则将逗号视为分组（千位）分隔符。

如果这些是两个数字 -`String.split()`它们并独立解析两个单独的字符串。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-08-15T16:43:36.493

您可以在将其`,`解析为 int 之前将其删除：

```
int i = Integer.parseInt(myNumberString.replaceAll(",", "")); 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-08-15T16:51:50.293

如果它是一个数字并且您想删除分隔符，`NumberFormat`将返回一个数字给您。只需确保在使用该`getNumberInstance`方法时使用正确的语言环境。

例如，某些语言环境将逗号和小数点交换为您可能习惯的。

然后只需使用该`intValue`方法返回一个整数。但是，您必须将整个内容包装在 try/catch 块中，以解决 Parse Exceptions。

```
try {
    NumberFormat ukFormat = NumberFormat.getNumberInstance(Locale.UK);
    ukFormat.parse("265,858").intValue();
} catch(ParseException e) {
    //Handle exception
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-15T16:42:55.947

一种选择是去掉逗号：

```
"265,858".replaceAll(",",""); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-08-15T16:44:00.700

假设这是一个数字，首先点击我的是......

```
String number = "265,858";
number.replaceAll(",","");
Integer num = Integer.parseInt(number); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-08-15T16:46:39.027

或者您可以使用`NumberFormat.parse`，仅将其设置为整数。

[http://docs.oracle.com/javase/1.4.2/docs/api/java/text/NumberFormat.html#parse(java.lang.String](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/NumberFormat.html#parse(java.lang.String) )

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-15T16:43:20.440

尝试这个：

```
String x = "265,858 ";
    x = x.split(",")[0];
    System.out.println(Integer.parseInt(x)); 
```

编辑：如果你希望它四舍五入到最接近的整数：

```
 String x = "265,858 ";
    x = x.replaceAll(",",".");
    System.out.println(Math.round(Double.parseDouble(x))); 
```

# .htaccess - 计算 .htaccess 文件中重定向的点击次数

> ID：11973384
> 
> 赞同：1
> 
> 时间：2012-08-15T16:41:19.393
> 
> 标签：.htaccess, redirect, count, http-status-code-301

我已经对此进行了一些研究，但我找不到任何结论性的东西。如何计算 .htaccess 文件中重定向的点击量？

我已经在各种 Wordpress 插件中看到了这一点，但我似乎找不到任何关于硬编码解决方案的信息。

任何帮助表示赞赏。谢谢！

# sml - 我们如何评估 SML 上的 Char 函数？

> ID：11973385
> 
> 赞同：1
> 
> 时间：2012-08-15T16:41:22.907
> 
> 标签：sml

我们如何评估 SML 中的 Char 函数，例如：

`succ #"A";` 应该给我B吧？

但它给了我错误“未绑定的值标识符：成功”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T16:45:51.083

您必须加载`Char`库才能使用其功能。将其加载到全局范围内：

```
open Char;
succ #"A"; 
```

或者调用带有库名的函数：

```
Char.succ #"A"; 
```

# jquery - Jquery加载重叠其他页面元素

> ID：11973386
> 
> 赞同：0
> 
> 时间：2012-08-15T16:41:23.420
> 
> 标签：jquery, load, overlapping

在 html 页面中，我有一个 div 元素，该元素将在页面加载时从另一个文件中填充。

考虑以下代码片段：

```
<script type="text/javascript">
 $(document).ready( function()
 {
   $( "#index_articles" ).load( "./index-data.txt" );
 });

 <div id="index_articles"></div>

 <b> DUMMY LINES: only for mark the end of loaded data </b> 
```

当页面准备好时，文件`index-data.txt`被加载到`index_articles`div 中。当然，从文件加载数据会导致 div`index_articles`增加它的高度尺寸。

我期望的是`index_articles`div 下面的页面元素将重新定位在修改后的 div 的末尾，而我所拥有的是 div`index_articles`与其他元素重叠。

我在这段代码中缺少什么？

我在 Fedora 17 上使用 jquery 1.8 和 firefox 14.0.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T15:04:24.440

正如 Lix 和 Peter 所建议的，错误出现在 css 中，但在参数 height 中发现：

```
 height: 70px; 
```

删除 height 参数后， index_articles 中的文本不再与其他组件重叠。

```
#index_articles {
  display: block;
  width: 70%;
  height: 70px;
  margin-left: 120px;
  border-radius: 10px;
  -moz-border-radius: 10px;
  -webkit-border-radius: 10px;
  font-size: small;
  text-indent:1em;
   color: green; 
  opacity: 0.8;
} 
```

现在的问题是：为什么如果我设置了 height 参数，似乎这会阻止对 dom 页面中其他组件的引用？

# c# - 使用 asp.net C# gridview 根据条件更改行背景颜色

> ID：11973391
> 
> 赞同：-2
> 
> 时间：2012-08-15T16:41:34.560
> 
> 标签：c#, asp.net, datagridview

我试图弄清楚当 Time 列的值大于 30 时如何更改行背景颜色。下面是我的代码：

```
<asp:GridView ID="gvMyDetails" runat="server" AutoGenerateColumns="False" AllowSorting="true" CellPadding="0"
    Width="730px" BackColor="White" BorderColor="#999999" BorderStyle="Solid" BorderWidth="1px"
    Font-Bold="True" ForeColor="Black" OnSelectedIndexChanged="gvMyDetails_SelectedIndexChanged"
    Style="text-align: center">
    <Columns>
        <!-- Other asp:TemplateFields... -->
        <asp:TemplateField HeaderText="Time" HeaderStyle-BackColor="#4b6c9e">
            <ItemTemplate>
                &nbsp; &nbsp;
                <asp:Label ID="lblTime" runat="server" Text='<%# Bind("Time") %>'></asp:Label>
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
    <FooterStyle BackColor="#CCCCCC" />
    <PagerStyle BackColor="#999999" ForeColor="Black" HorizontalAlign="Center" />
    <SelectedRowStyle BackColor="#000099" Font-Bold="True" ForeColor="White" />
    <HeaderStyle BackColor="Black" Font-Bold="True" ForeColor="White" />
    <AlternatingRowStyle BackColor="#CCCCCC" />
</asp:GridView> 
```

```
SqlDataReader myReader4 = null;
SqlCommand myCommand4 = new SqlCommand("SELECT Account_Number, Std_Note_Code, Std_Note_Description, CONVERT(varchar(12), Std_Note_Date_Entered, 101) as datedate, Std_Note_Time_Entered, Time FROM qa_bor, qa_users where (qa_bor.Std_Note_Creator_Name = qa_users.username_bor and qa_users.username_bor = '" + ddlrep.Text + "') and (qa_bor.Std_Note_Date_Entered >= '" + datefrom + "' and qa_bor.Std_Note_Date_Entered <= '" + dateto + "') ORDER BY Std_Note_Date_Entered ASC", myConnection);
myReader4 = myCommand4.ExecuteReader();
if (myReader4.HasRows)
{
    gvMyDetails.DataSource = myReader4;                                
    gvMyDetails.DataBind();
    myReader4.Close();               
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T17:11:09.737

下面的例子：

```
protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e) 
{ 
    e.Row.Attributes.Add("style", "cursor:help;"); 
    if (e.Row.RowType == DataControlRowType.DataRow && e.Row.RowState == DataControlRowState.Alternate) 
    {  
        if (e.Row.RowType == DataControlRowType.DataRow) 
        {                 
            e.Row.Attributes.Add("onmouseover", "this.style.backgroundColor='orange'"); 
            e.Row.Attributes.Add("onmouseout", "this.style.backgroundColor='#E56E94'"); 
            e.Row.BackColor = Color.FromName("#E56E94");                 
        }            
    } 
    else 
    { 
        if (e.Row.RowType == DataControlRowType.DataRow) 
        { 
            e.Row.Attributes.Add("onmouseover", "this.style.backgroundColor='orange'"); 
            e.Row.Attributes.Add("onmouseout", "this.style.backgroundColor='gray'"); 
            e.Row.BackColor = Color.FromName("gray");                 
        } 
```

# php - 将多个表单元素更新到不同列的 PHP 表单

> ID：11973392
> 
> 赞同：1
> 
> 时间：2012-08-15T16:41:37.947
> 
> 标签：php, mysql, forms, posting

我正在尝试构建一个简单的表单来更新我的 mySql 数据库。如果页面上只有 1 个表单元素（输入），我可以成功，但我不知道如何每个 pgae 有多个表单元素（输入）。

当我添加多个输入时，数据库不会添加任何内容。

我知道我的代码很接近，但我不知道在哪里以及如何处理它。

PS - 我还是新手，正在学习......

这是我所拥有的

```
<?php

$host = 'hostName';
$user = 'userName';
$password = 'password';

$link = mysql_connect($host, $user, $password);

$selected = mysql_select_db('dbName', $link);

if(!isset($_POST['text-input']))
{

echo '<html>
        <body>
                <form action="post.php" method="post">
                        <input type="text" name="text-input" id="text-input" value="Update MyDataColumn" style="width:300px;" />
                        <input type="submit" value="Submit" />
                </form>
        </body>
</html>'; }

else {
$form_input =  $_POST['text-input'] ;

mysql_query('INSERT INTO `tableName` (columnName) VALUES ("' . $form_input . '");');

echo '
<html>
        <body>
                <script type="text/javascript">
                        alert(\'Database now contains: <?php echo $form_input ?>. Redirecting...\');
                        window.location  = \'http://url.com\';
                </script>

        </body>
</html>';
}
?> 
```

我想弄清楚如何发布到同一个数据库/表中的众多列。

好的，从下面的答案中，我将代码修改为如下所示：

```
<?php

                $host = 'dbHost';
                $user = 'dbUser';
                $password = 'dbPassword';

                $link = mysql_connect($host, $user, $password);

                $selected = mysql_select_db('dbName', $link);

                if(!isset($_POST['text-input']))
                {

                echo '
                    <form action="index.php" method="post">
                        <input type="text" name="text-input" id="text-input" value="Update itemName" style="width:300px;" />
                        <input type="text" name="text-input2" id="text-input2" value="Update itemDescription" style="width:300px;" />
                        <input type="text" name="text-input3" id="text-input3" value="Update productID" style="width:300px;" /> 
                        <input type="text" name="text-input4" id="text-input4" value="Update itemPrice" style="width:300px;" />    
                        <input type="submit" value="Submit" />
                    </form>'
                    ; }

                else {
                $form_input =  $_POST['text-input'] ;
                $form_input2 =  $_POST['text-input2'] ;
                $form_input3 =  $_POST['text-input3'] ;
                $form_input4 =  $_POST['text-input4'] ;

               mysql_query('INSERT INTO `items` (itemName, itemDescription, productID, itemPrice)
               VALUES ("' . $form_input . '", "' . $form_input2 . '", "' . $form_input3 . '", "' . $form_input4 . '");

                echo '
                <html>
                        <body>
                                <script type="text/javascript">
                                        alert(\'Database has been updated. Redirecting to previous url.\');
                                        window.location  = \'http://url.com\';
                                </script>

                        </body>
                </html>';
                }
                ?> 
```

这段代码会发生什么我得到一个语法错误，意外的'>'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T16:45:32.810

您只需修改查询以设置多个列。

HTML：

```
<form action="post.php" method="post">
    <input type="text" name="text-input" id="text-input" value="Update MyDataColumn" style="width:300px;" />
    <input type="text" name="text-input2" id="text-input2" value="Update MyDataColumn2" style="width:300px;" />
    <input type="text" name="text-input3" id="text-input3" value="Update MyDataColumn3" style="width:300px;" />    
    <input type="submit" value="Submit" />
</form> 
```

PHP：

```
$form_input =  $_POST['text-input'] ;
$form_input2 =  $_POST['text-input2'] ;
$form_input3 =  $_POST['text-input3'] ;

mysql_query('INSERT INTO `tableName` (columnName, columnName2, columnName3) VALUES ("' . $form_input . '","' . $form_input2 . '","' . $form_input3 . '");'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T16:53:07.800

在您的 HTML 输出中，您需要添加另一个像这样的字段（已经在您的代码中）：

```
<input type="text" name="text-input" id="text-input"
value="Update MyDataColumn" style="width:300px;" /> 
```

但是，它必须有不同的“名称”（！）；

```
<input type="text" name="text-input2" id="text-input2"
value="Another Input" style="width:300px;" /> 
```

现在我们从 $_POST 数组中获取新变量（“text-input2”），如下所示：

```
$form_input =  $_POST['text-input']; // Your code...
$form_input2 = $_POST['text-input2']; // for the new input field 
```

我们需要将 SQL 命令更改为：

```
mysql_query('INSERT INTO `tableName` (columnName) VALUES ("' . $form_input . '");
mysql_query('INSERT INTO `tableName` (columnName) VALUES ("' . $form_input2 . '"); 
```

上面的 SQL 命令会将两个表单输入作为单独的行添加到表中，它们没有相互连接。要将它们放在同一行中，您需要先更改表格并添加另一列。用于此的 SQL 命令是：

```
ALTER TABLE tableName ADD columnName2 VARCHAR(255); 
```

这将向表中添加另一个名为“columName2”的列。我们最终可以将这两个值添加为表格的一行：

```
mysql_query('INSERT INTO `tableName` (columnName, columName2)
VALUES ("' . $form_input . '", "' . $form_input2 . '"); 
```

而已 ;-）

# java - 在Java中将类重构为接口时如何支持向后兼容的序列化？

> ID：11973394
> 
> 赞同：4
> 
> 时间：2012-08-15T16:41:47.520
> 
> 标签：java, serialization, backwards-compatibility

不幸的是，问题标题中的情况已经发生在几年前。

我有一个`Id`接口，它扩展`Serializable`并包含名称和 ID 号的 getter。有一个`IdImpl`实现接口的匹配类。然而，在过去的某个时候，`Id` *是*班级。还有一个可序列化的容器对象，其成员字段类型为`Id`。这些容器对象已经被序列化到数据库好几年了，所以有容器对象的版本包含这两种类型的`Id`s。当试图反序列化旧对象时，我们得到一个`InvalidClassException`. 如何反序列化包含旧`Id`具体类实例的旧容器对象？

`Id`全面披露：多年来对界面进行了一些其他更改，但我认为它们看起来像[兼容的更改](http://docs.oracle.com/javase/7/docs/platform/serialization/spec/version.html#6678)（为 "String idType"添加了一个字段`IdImpl`和一个 getter ；generified ）。这些变化之一是否也会导致问题？`Id``Comparable`

这些类看起来像这样：

```
// current Id interface
public interface Id extends Serializable, Comparable<Id> {
    String getName();
    int getIdNumber();
}

// current Id implementation
public class IdImpl implements Id {
    private static final long serialVersionUID = 10329865109284L;
    private String name;
    private int idNumber;
    IdImpl(String name, int idNumber) { this.name = name; this.idNumber = idNumber; }
    @Override public String getName() { return name; }
    @Override public int getIdNumber() { return idNumber; }
    @Override public int compareTo(Id id) { /* some code here */ }
}

// the container object
public ContainerForm implements Serializable {
    private static final long serialVersionUID = -3294779665912049275L;
    private String someField;
    private Id user;
    private String someOtherField;
    // getters and setters
}

// this is what the _old_ Id concrete class looked like
// (from source control history; not in current project)
public class Id implements Serializable, Comparable {
    // never had a serialVersionUID
    private String name;
    private int idNumber;
    Id(String name, int idNumber) { this.name = name; this.idNumber = idNumber; }
    public String getName() { return name; }
    public int getIdNumber() { return idNumber; }
    public int compareTo(Object id) { /* some code here */ }
} 
```

我们在尝试反序列化容器对象时遇到的异常是：

```
java.io.InvalidClassException: mypkg.people.Id; local class incompatible: stream classdesc serialVersionUID = -6494896316839337071, local class serialVersionUID = -869017349143998644
    at java.io.ObjectStreamClass.initNonProxy(ObjectStreamClass.java:562)
    at java.io.ObjectInputStream.readNonProxyDesc(ObjectInputStream.java:1583)
    at java.io.ObjectInputStream.readClassDesc(ObjectInputStream.java:1496)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1732)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1329)
    at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1947)
    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1871)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1753)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1329)
    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:351)
    at mypkg.forms.FormFactory.getForm(FormFactory.java:3115)
    ... 34 more 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T16:57:26.500

作为一般规则，*不*使用 serialVersionUID 并将类转换为接口是一个非常难以支持的转换。

在这种特定情况下，我*相信*您可以通过以下方式支持旧`Id`实现：

*   创建一个类（调用它`OldId`），它具有旧的 serialVersionUID 和旧的实现`Id`（它应该实现`Id`）。
*   创建 ObjectInputStream 的自定义子类并覆盖该`readClassDescriptor()`方法。调用父 readClassDescriptor 和
    *   如果返回的 ObjectStreamClass 具有`Id`类名和旧的 serialVersionUID，则返回新`OldId`类的 ObjectStreamClass
    *   否则返回给定的描述符

# php - 通过 PHP 和 SOAP 对 Sharepoint/Office356 进行身份验证（声明）

> ID：11973397
> 
> 赞同：2
> 
> 时间：2012-08-15T16:41:53.150
> 
> 标签：php, sharepoint, authentication, soap, office365

我正在尝试使用需要身份验证的 PHP5 标准 SOAP 库向 Sharepoint 列表（通过'http://url.co.uk/_vti_bin/Lists.asmx?WSDL）发出 SOAP 请求。我使用 NTLM 身份验证使其工作正常（这很痛苦，但最终奏效了），但现在项目的职责是通过 CLAIMS 进行身份验证，以便它适用于 Sharepoint 安装或 office365 实例。

我从一开始就意识到标准的 SOAP 身份验证不起作用……但我还是尝试了！不出所料，我收到了一条错误回复“列出错误代码：HTTPList 错误字符串：禁止”。

是否可以通过基于纯 PHP/SOAP 的解决方案通过 CLAIMS 进行身份验证，如果可以，实现此目的的最佳方法是什么？我已经阅读了有关使用 Apache 技巧等进行身份验证的不同解决方案的关于共享点的声明身份验证的不同文章。我正在从事的项目要求这是一个纯 PHP 解决方案。

值得指出的是，我不是 MS 开发人员，并且对 CLAIMS 身份验证的了解有限（这可能无济于事！）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-10T09:32:00.780

这里有一些更多信息（特定于 PHP 的）可能也有帮助。我自己还没有尝试过，所以不能说它是否真的有效：

[http://macfoo.wordpress.com/2012/06/23/how-to-log-into-office365-or-sharepoint-online-using-php/](http://macfoo.wordpress.com/2012/06/23/how-to-log-into-office365-or-sharepoint-online-using-php/)

[http://allthatjs.com/2012/03/28/remote-authentication-in-sharepoint-online/](http://allthatjs.com/2012/03/28/remote-authentication-in-sharepoint-online/)

[http://davidsit.wordpress.com/2010/02/23/reading-a-sharepoint-list-with-php/](http://davidsit.wordpress.com/2010/02/23/reading-a-sharepoint-list-with-php/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-23T18:26:27.270

[phpSPO - PHP](https://github.com/vgrem/phpSPO)库的 SharePoint 客户端允许您使用 SharePoint Online 的基于 REST/OData 的 API 对 SharePoint 列表数据执行 CRUD 操作。

当前版本支持使用基于声明的身份验证的 SharePoint Online。

## 例子

如何在 SharePoint Online (SPO) 中执行身份验证：

```
try {
    $client = new SPOClient($url);
    $client->signIn($username,$password);
    echo 'You have been authenticated successfully\n';
}
catch (Exception $e) {
    echo 'Authentication failed: ',  $e->getMessage(), "\n";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T13:42:32.957

我还没有看到任何关于 PHP 的示例——这些示例解释了该过程并在 C# 中给出了一个应该可以用 PHP 重写的实现。

[http://www.wictorwilen.se/Post/How-to-do-active-authentication-to-Office-365-and-SharePoint-Online.aspx](http://www.wictorwilen.se/Post/How-to-do-active-authentication-to-Office-365-and-SharePoint-Online.aspx)

[http://code.msdn.microsoft.com/Remote-Authentication-in-b7b6f43c](http://code.msdn.microsoft.com/Remote-Authentication-in-b7b6f43c)

[http://blogs.msdn.com/b/cjohnson/archive/2011/05/14/part-2-headless-authentication-with-sharepoint-online-and-the-client-side-object-model.aspx](http://blogs.msdn.com/b/cjohnson/archive/2011/05/14/part-2-headless-authentication-with-sharepoint-online-and-the-client-side-object-model.aspx)

# pdf-generation - 使用 iTextSharp 填写 pdf 时出现 BadPasswordException

> ID：11973400
> 
> 赞同：7
> 
> 时间：2012-08-15T16:42:01.593
> 
> 标签：pdf-generation, itextsharp, password-protection

我有一个包含一些表单字段的第三方 PDF 文件，我需要以编程方式填写。PDF 文件是安全的。详细的安全设置：`SecurityMethod: Password Security, Document Open Password: No, ... Form Field Fill-in or Signing: Allowed...` 当我尝试手动打开并填写文档时，一切正常，并且没有要求我输入任何密码。但是使用代码，它会因异常而失败。这是代码（我正在使用 iTextSharp 库）：

```
var str = new MemoryStream();
var reader = new PdfReader(_path);
var stamper = new PdfStamper(reader, str); 
```

创建 PdfStamper 对象失败并出现异常：`BadPasswordException. PdfReader not opened with owner password.`

任何想法，为什么它会因代码而失败，而不是手动失败？提前致谢。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-16T16:10:44.833

您是否尝试过添加

```
PdfReader.unethicalreading = true; 
```

在`reader`初始化之前？

# html - 清除大型下拉菜单中新样式列表的列表样式

> ID：11973403
> 
> 赞同：0
> 
> 时间：2012-08-15T16:42:09.297
> 
> 标签：html, css, list, drop-down-menu

如果您可以将鼠标悬停在此处菜单中的“更多”按钮上：http: [//jsfiddle.net/H8FVE/7/](http://jsfiddle.net/H8FVE/7/) 您将看到有一个包含单词*Random text here*的列表。我试图设置该列表的样式，但不知何故，下拉菜单的样式阻止了我这样做。我用于列表的样式是：

```
#trendcontainer  {
    margin-top: 0px;
    padding-bottom: 1px;
}

#trend { width: 188px; }

#trend ul
{
    margin-left: 0;
    padding-left: 0;
    list-style-type: none;
    font-family: Arial, Helvetica, sans-serif;
}

#trend film
{
    display: block;
    padding: 3px;
    width: 188px;
    background-color: #B40404;
    border-bottom: 1px solid #eee;
        text-align: center;
    letter-spacing: 0.4px;
    color: #FAFAFA;
} 
```

这是 HTML 的一部分：

```
<div id="second-menu" class="clearfix">
    <ul id="secondary-menu" class="nav sf-js-enabled">
        <li class="manimation"><a href="" style="width:400px;border-bottom:9px solid #43cf61">Animation</a></li>
    </ul>

<ul id="mega">
    <li class="dif mmore" style="background:none;"><a href="#" style="font-style:italic;border-bottom:9px solid #4b5571">More...</a>
      <div>
    <moretopbar>
    <ul>
        <li class="mgames"><a href="" style="border-bottom:9px solid #e34328">Games</a></li>
        <li class="mliterature"><a href="" style="border-bottom:9px solid #2c8f83">Literature</a></li>
        <li class="marts"><a href="" style="border-bottom:9px solid #cc226a">Arts</a></li>
        <li class="mcontact" style="background:none;"><a href="" style="border-bottom:9px solid #9395aa">Contact</a></li>
    </ul>
    </moretopbar>

<morecontainer>
<moreleftbar>

                <trendcontainer>
                    <trend>
                        <ul>
                            <li><film>Random text here</film></li>
                            <li><film>Random text here</film></li>
                            <li><film>Random text here</film></li>
                            <li><film>Random text here</film></li>
                        </ul>
                    </trend>
                </trendcontainer>

</moreleftbar>

</morecontainer>

      </div>
    </li>
  </ul>
</div> <!-- end #second-menu --> 
```

虽然，我建议忽略小提琴以直观地展示该问题：http: [//jsfiddle.net/H8FVE/7/](http://jsfiddle.net/H8FVE/7/)

你能弄清楚如何修复样式吗？如果您选择回答，请详细说明，因为我的编码知识有限 - 最好使用更新的小提琴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T23:31:13.050

我刚刚更新了它。http://jsfiddle.net/H8FVE/11/

我在 css 代码中添加了一个名为 .random 的类，并将 class="random" 添加到您要修改的 ul 元素中。在 css 中我添加了以下代码，尽管您可以更改它来满足您的目的。（如果您只想设置 ul 的样式，请将其更改为 .random { }

```
.random li {
    font-weight:bold;
} 
```

# asp.net - 通过 Web 应用程序进行文档管理的最佳方法？

> ID：11973413
> 
> 赞同：1
> 
> 时间：2012-08-15T16:42:33.327
> 
> 标签：asp.net, file, web-applications, webserver

我正在为某人开发一个 asp .net web 应用程序。

此应用程序将提供一定数量的文档管理功能（生成 pdf、上传/下载文档等）。我正在使用 Telerik 控件进行上传等，所以到目前为止还不错，但是，假设我使用的是我无法访问的文件系统的网络主机（这不是大多数网络托管服务吗？），客户端永远不能在他们的硬盘上找到这些文件可以吗？除非我实现某种自动文件传输协议或电子邮件服务？典型的基于 Web 的应用程序如何处理这个问题？

我通常倾向于使用 Windows 窗体方法来处理这种解决方案，并通过代码管理文件系统，以便例如可以在一个特定目录中找到某种类型的所有文档，但明确要求它是 web-基于明显的访问原因。

如果用户想要这种不受限制的访问，他们是否需要自己托管？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T17:04:59.430

网络主机通常具有在其服务器上存储文件的能力。您必须记住，这些文档将计入主机上的空间和带宽限制。您必须确保您的应用程序有权将文件写入服务器，这可以与主机协调。

或者，您可以将文件路径存储到客户端系统上的网络共享，这样当通过 Web 应用程序打开任何文件时，它将打开存储在客户端服务器上的文件。

# html - 单击时显示元素

> ID：11973417
> 
> 赞同：-3
> 
> 时间：2012-08-15T16:42:42.297
> 
> 标签：html

我已经玩了很长时间了，但它似乎不起作用。

我希望在我的网站上添加一个隐藏的优惠券代码功能并拥有它，以便代码实际上是隐藏的，直到单击“点击显示”按钮并且用户的浏览器打开一个新窗口。

我有一个[测试页面](http://www.xclo.co.uk/testing.html)，正是我在说什么。

我的麻烦是，一切正常，但实际凭证显示位。

任何想法，或如何做到这一点的任何链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T16:47:12.653

您的页面看起来像是在尝试使用 jQuery 代码，但您尚未将 jQuery 添加到文档中，因此收到类似`Uncaught ReferenceError: $ is not defined`.

请参阅[jQuery：](http://docs.jquery.com/How_jQuery_Works#jQuery%3a_The_Basics)有关如何设置页面以正确指向 jQuery 的基础知识。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T16:53:42.063

正如 Jonathan Newmuis 指出的那样，您的代码中缺少 jQuery 库。这是问题一，问题二是我也没有看到fancybox插件被调用。

所以你有这个位

```
<script type="text/javascript">
    $(document).ready(function () {

            $(".popUpCode75554").fancybox({
                'overlayOpacity': 0.7,
                'enableEscapeButton': false,
                'hideOnOverlayClick': false,
                'hideOnContentClick': false,
                'showCloseButton': true,
                'frameWidth': 520,
                'frameHeight': 400,
                'overlayColor': '#000000',
                'callbackOnClose': function () {
                    $('.voucher-code-revealed-75554').show();
                    $('.voucher-buttons-75554').hide();
                }

            });

            $(".cashbackWarning").fancybox({
                'overlayOpacity': 0.7,
                'enableEscapeButton': false,
                'hideOnOverlayClick': true,
                'hideOnContentClick': false,
                'showCloseButton': true,
                'frameWidth': 500,
                'frameHeight': 250,
                'overlayColor': '#000000'

            });

    });

try {
var pageTracker = _gat._getTracker("UA-11279427-1");
pageTracker._setDomainName("none");
pageTracker._setAllowLinker(true);
pageTracker._trackPageview();
} catch(err) {}
                </script> 
```

在上面添加以下内容。

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.8.0.min.js"></script>
<script type="text/javascript" src="http://yandex.st/jquery/fancybox/1.3.4/jquery.fancybox.min.js"></script> 
```

不确定该特定精美盒子版本与您尝试使用的版本相比有多旧/新，但我认为它可能是其中较新的版本。反正。添加这两行可能会解决您的问题，除非您当前拥有的代码存在某种缺陷，而目前似乎并非如此。

另一方面，如果您使用 firefox，我可能会建议您为自己安装一个名为 firebug 的插件，它将帮助您调试基于 javascript 的错误以及其他内容。

# bash - 在 ubuntu 中运行脚本文件

> ID：11973427
> 
> 赞同：3
> 
> 时间：2012-08-15T16:43:31.933
> 
> 标签：bash, ubuntu

我正在尝试运行名为 freecs.sh 的开源聊天服务器 freecs(http://freecs.sourceforge.net/) 的脚本文件。当我使用 ./freecs.sh 运行文件时，我得到以下信息： bash: ./freecs.sh: /bin/sh^M:`bad interpreter: No such file or directory` 即使文件存在于同一目录中。当我尝试使用 bash freecs.sh 运行它时，我得到了这个：freecs.sh: line 12: $'\r': command not found

```
freecs.sh: line 16: $'\r': command not found
freecs.sh: line 19: $'\r': command not found
freecs.sh: line 22: $'\r': command not found
freecs.sh: line 30: $'\r': command not found
freecs.sh: line 33: $'\r': command not found
freecs.sh: line 36: $'\r': command not found
freecs.sh: line 40: $'\r': command not found
freecs.sh: line 43: $'\r': command not found
freecs.sh: line 49: $'\r': command not found
freecs.sh: line 50: like: command not found
freecs.sh: line 51: syntax error near unexpected token `$'{\r''
'reecs.sh: line 51: `echo_failure() { 
```

我已经尝试过 chmod +x freecs.sh 然后运行脚本但没有帮助。该文件如下所示：

```
#!/bin/sh
#
# FreeCS startup script
# for RedHat
#
# chkconfig: 345 90 20
# description: FreeCS startup script
# processname: java
# pidfile: /var/run/freecs.pid
# Source function library.
#./etc/rc.d/init.d/functions

# set this to the directory where your JVM is installed
#export JAVA_HOME=/usr/java/j2sdk1.4.1_02
export JAVA_HOME=/user/local/java/jdk1.6.0_33

# this sets the locales for java
export LANG="de_DE@euro:de_DE:de"

# setting environment for freecs
export PATH=$PATH:$JAVA_HOME/bin

# fill in the directory where you installed freecs
#export FREECS_HOME=/usr/local/freecs
export FREECS_HOME=/home/Applications/freecs-1.3.20111225
FREECS_BIN=java
FREECS_STARTUP_LOG=/var/log/freecs/freecs_startup.log
FREECS_PID=/var/run/freecs.pid
FREECS_USER=root

JARS=$CLASSPATH:$FREECS_HOME/lib/freecs.jar
JARS=$JARS:$FREECS_HOME/lib/xmlrpc-1.2-b1.jar

JARS=$JARS:$FREECS_HOME/lib/xmlrpc/commons-codec-1.4.jar
JARS=$JARS:$FREECS_HOME/lib/xmlrpc/commons-httpclient-3.1.jar

JARS=$JARS:$FREECS_HOME/lib/xmlrpc/xmlrpc-common-3.1.3.jar
JARS=$JARS:$FREECS_HOME/lib/xmlrpc/xmlrpc-client-3.1.3.jar
JARS=$JARS:$FREECS_HOME/lib/xmlrpc/xmlrpc-server-3.1.3.jar

JARS=$JARS:$FREECS_HOME/lib/xmlrpc/commons-logging-1.1.jar
JARS=$JARS:$FREECS_HOME/lib/xmlrpc/ws-commons-util-1.0.2.jar

# if sql-authentication is used, you will have to insert
# the path to your jdbc-driver here
# JARS=$JARS:$FREECS_HOME/lib/ext/mysql.jar
export CLASSPATH=$JARS
RETVAL=0

like functions  from /etc/rc.d/init.d/functions
echo_failure() {
  [ "$BOOTUP" = "color" ] && $MOVE_TO_COL
  echo -n "["
  [ "$BOOTUP" = "color" ] && $SETCOLOR_FAILURE
  if [ -z "$1" ]; then
     echo -n "FAILED"
  else
     echo -n "$1"
  fi
  [ "$BOOTUP" = "color" ] && $SETCOLOR_NORMAL
  echo -n "]"
  echo -ne "\r"
  return 1
}

startfreecs() {
        gotbase=
        user=
        case $1 in
            '')    echo '$0: Usage: startfreecs [--user] {program}'
                   return 1;;
            --user)
                   shift
                   daemon_user=$1
                   shift
                   ;;
        esac

        # Save basename.
        [ -z $gotbase ] && base=`basename $1`

        # make sure it doesn't core dump anywhere;
        # while this could mask
        # problems with the daemon,
        # it also closes some security problems
        ulimit -c 0

        # Echo daemon
        [ "$BOOTUP" = "verbose" ] && echo -n " $base"

        # Set the maximum filedescriptors a little bit higher
        # on heavy usage, this may go up a little bit (every network 
        # connection is one filedescriptor)
        ulimit -n 8192

        # And start it up.
        if [ -z "$daemon_user" ]; then
           $* >$FREECS_STARTUP_LOG &
           hpid=$!
        else
           touch $FREECS_STARTUP_LOG
           su $daemon_user -c "$*" 2>/dev/null >$FREECS_STARTUP_LOG &
           hpid=$!
        fi
        /bin/ps h $hpid >/dev/null 2>&1 \
           && success "$base startup" || failure "$base startup"
        echo $hpid >$FREECS_PID

}

# See how we were called.
case "$1" in
  start)
        # check if freecs is already running - if not, start it
        echo -n "Starting FreeCS:"
        DATE=`date +%Y%m%d_%H%M_%S`
        cp /var/log/freecs/*.log /var/log/freecs/*.$DATE
        if [ ! -f /var/lock/subsys/freecs ]; then
            startfreecs --user $FREECS_USER $JAVA_HOME/bin/$FREECS_BIN -server -Xms128m -Xmx768m \
                 -cp $JARS freecs.Server -b=$FREECS_HOME

            RETVAL=$?
            [ $RETVAL -eq 0 ] && touch /var/lock/subsys/freecs
        else
            if [ -f $FREECS_PID ]; then
                echo_failure "ALREADY RUNNING"
            else
                echo_failure "DEAD"
            fi
        fi
        echo
        ;;
  stop)
        echo -n "Shutting down FreeCS:"
        if [ -f $FREECS_PID ] ; then
            pid=`head -1 $FREECS_PID`
            kill -SIGTERM $pid && echo_success
        else
            echo_failure "NOT RUNNING"
        fi
        rm -f $FREECS_PID
        rm -f /var/lock/subsys/freecs

        echo
        ;;
  status)
        pid=`pidof -o $$ -o $PPID -o %PPID -x $FREECS_BIN`
        if [ "$pid" != "" ] ; then
            echo "FreeCS is running ($pid)"
        else
            echo "FreeCS is stopped"
        fi
        RETVAL=$?
        ;;
  restart)
        $0 stop
        sleep 20
        $0 start
        ;;
  *)
        echo "Usage: $0 {start|stop|status|restart}"
        exit 1
esac

exit $RETVAL 
```

谁能告诉我为什么 freecs.sh 找不到该文件？和 bash freecs.sh 为什么我得到一个错误？我的 java 主目录设置正确。

纳克斯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T16:46:14.233

那是因为您的文件具有 dos 样式的换行符。

跑

```
dos2unix freecs.sh 
```

然后像往常一样运行它。

如果`dos2unix`未安装，您可以尝试代替它：

```
sed -i 's/\r//g' freecs.sh 
```

附言。为防止将来出现此类错误，您始终可以使用 . 检查此类符号`sed -n l filename`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T16:46:15.103

你需要修复你的代码：

```
dos2unix ./freecs.sh 
```

# javascript - 如何用 jQuery 替换 HTML 标签的一部分？

> ID：11973428
> 
> 赞同：0
> 
> 时间：2012-08-15T16:43:33.587
> 
> 标签：javascript, jquery

> **可能重复：**
> [使用 jQuery 更改 HTML 标记？](https://stackoverflow.com/questions/918792/use-jquery-to-change-an-html-tag)

我已经搜索了一段时间，但没有找到与我想要做的完全匹配的答案。我希望能够在不实际替换所有内容的情况下替换部分 html 标记。例如我的 HTML...

```
<a href="">Test</a> 
```

我希望最终结果是这样的......

```
<test href="">Test</a> 
```

我试过这个......但它只是取代了一切......

```
$("a").replaceWith("&lt;test"); 
```

这似乎也不起作用......

```
$("a").find().html("<a").replaceWith("&lt;test"); 
```

**编辑：**

我认为我的第一部分不是很清楚。我的最终目标是只替换标签的一部分……例如……

找到**`<a`**并替换为**`<test`**

...........

我觉得我正朝着正确的道路前进，但我不确定从这里去哪里。任何帮助深表感谢。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T16:50:16.007

上帝只知道你为什么要将你的元素更改为甚至不接近有效 HTML 的东西，但这里是如何做到的：

```
(function($) {
    $.fn.changeElementType = function(newType) {
        var attrs = {};
        $.each(this[0].attributes, function(idx, attr) {
            attrs[attr.nodeName] = attr.nodeValue;
        });
        this.replaceWith(function() {
            return $("<" + newType + "/>", attrs).append($(this).contents());
        });
    };
})(jQuery);

$("a").changeElementType('test'); 
```

[**小提琴**](http://jsfiddle.net/Ed3Ck/)

（[从 Andrew Whitakers 那里偷来的答案](https://stackoverflow.com/questions/8584098/how-to-change-an-element-type-using-jquery)）

​</p>

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T16:59:30.793

这是使用[.unwrap()](http://api.jquery.com/unwrap/)和[.wrap()的方法](http://api.jquery.com/wrap/)

```
$('a') // select the element
.contents()  //  traverse to contents
.unwrap()  // unwrap - remove parent tag - which happens to be the a
.wrap('<test href="">')  //  wrap contents with test tag 
```

[http://jsfiddle.net/wirey00/mVWfp/](http://jsfiddle.net/wirey00/mVWfp/)

# javascript - Rails 3 if语句与jQuery？

> ID：11973430
> 
> 赞同：0
> 
> 时间：2012-08-15T16:43:36.083
> 
> 标签：javascript, jquery, ruby-on-rails, ruby-on-rails-3, stripe-payments

我有一个使用此 railscast 设置的多步 Rails 3 表单：[http](http://railscasts.com/episodes/217-multistep-forms) ://railscasts.com/episodes/217-multistep-forms ，我使用另一个 railscast 为我的应用程序实施 Stripe 支付：[http:// railscasts.com/episodes/288-billing-with-stripe](http://railscasts.com/episodes/288-billing-with-stripe)

在我的应用程序中，如果向用户收取的金额为 0，则通过 jQuery 隐藏付款表单。

```
$(document).ready(function() {
  var xyz = $("span#total").text();

  if (xyz == 0){
    $("div#stripefields").hide();
  };    
}); 
```

我想要做的是告诉我的 Rails 应用程序，如果向用户收取的金额为 0，则不需要 Stripe 支付字段来成功提交表单。因此，我需要在控制器中修改此语句以反映这一点：

```
elsif @video.last_step?
   @video.save if @video.all_valid? && @video.save_with_payment(@total) 
```

@total 是向用户收取的金额，“save_with_payment”代表 Stripe 费用。这样做的最佳方法是什么？我可以以某种方式在此语句中添加另一个“if”吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T16:49:30.877

编辑：对不起，我打错了一点。

您需要在付款前检查总收费是否大于0，或者如果总金额为0，则允许保存视频。

```
@video.save if @video.all_valid? && ((@total > 0 && @video.save_with_payment(@total)) || @total == 0) 
```

此外，在您的 jQuery 代码中，您将整数与字符串进行比较。您可能想要：

```
$(document).ready(function() {
  var xyz = parseFloat($("span#total").text());

  if (xyz === 0.0){
    $("div#stripefields").hide();
  }
}); 
```

只是为了避免潜在的不一致。比较`==`将尝试强制类型，因此您可能会得到一些奇怪的结果。因此，通过使用 parseFloat 将总价格（整数或浮点数）转换为浮点值并与浮点数（0.0）进行比较，我们可以使结果非常清楚。

# video-streaming - 单一实时资源，多个客户端连接

> ID：11973432
> 
> 赞同：1
> 
> 时间：2012-08-15T16:43:38.037
> 
> 标签：video-streaming, messaging, shared-memory, live-streaming

我正在做一个个人项目，以继续我自己的教育。

我想找出流媒体服务器通常使用什么模型来在有限资源上实现最大性能，同时连接到单个共享资源但将其发送到多个资源。

例如：假设我们有一个具有固定带宽 (1 mb/s) 的网络摄像头。这个网络摄像头的观众数量不定。如果摄像头可以产生使其上游能力饱和的高质量视频，我们将被限制为 1 个连接。但是我们想要满足所有这些连接请求。所以我们在两者之间放置了一个流媒体服务器。

他们通常使用什么方法来多流这个单个会话？我一直在研究共享内存、消息队列。

我已经使用二进制发布-订阅消息队列成功编写了一个简单的多连接服务器，但我正在寻找其他解决方案来解决这个问题。不是因为它不起作用，而是因为我想知道其他人是如何做到的。

我的问题是，流媒体服务器（FFServer、Red5、WMS、FMS 等）用于连接到单个实时资源并将其联合到多个客户端的典型编程方法是什么。

这与语言无关，我对概念比对实现更感兴趣。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T08:12:12.020

Adobe Flash 使用一种 P2P 技术。您可以在使用 CNN 网站的直播时观看。观看一段时间后，您可以看到上游和下游相同。您的任务管理器中还有一个名为“omnixyz-something”的新进程。此过程管理您的流向其他观众的 P2P 转发。你可以在这里看到一些关于这个概念的漂亮图形：http: [//labs.adobe.com/technologies/cirrus/](http://labs.adobe.com/technologies/cirrus/) 虽然我有点怀疑当前 Adob​​e 的 RTMFP 是否像第二个图形显示的那样灵活。该图很好，但从技术上讲，我认为单个查看器在“播种者”网络中连接的节点数量是有限的。因此，您只将您的信息流转发给 1,2,3 人，而不是如图所示的“无限”。

# javascript - 单元测试中的 Javascript setSelectionRange 未按预期运行

> ID：11973433
> 
> 赞同：1
> 
> 时间：2012-08-15T16:43:42.230
> 
> 标签：javascript, jquery, qunit

我正在使用 qunit 框架与我在 Chrome 中使用 jquery（即 var $textarea = $('')）以编程方式创建的 HTML 进行单元测试交互。这是我用来更新文本区域中的选择的代码。

```
 TextAreaView.prototype.setSelectionOffsets = function(cursor) {
    var input = this.$textarea.get(0);
    if (!input.setSelectionRange) {
        return;
    }
    if (cursor.start <= input.value.length && cursor.end <= input.value.length) {
        input.focus();
        input.setSelectionRange(cursor.start, cursor.end, "forward");
    }
} 
```

我已经验证我正在使用 0 < cursor.start == cursor.end < input.value.length 调用此方法。

当我使用调试器单步执行时，一切似乎都正常 - 但是在它到达“input.setSelectionRange”行后，对输入元素的检查显示 selectionEnd 和 selectionStart 属性 = 0， selectionDirection =“none”

我对这里发生的事情感到非常困惑。我已经阅读了[Mozilla](https://developer.mozilla.org/en-US/docs/DOM/HTMLTextAreaElement)关于 textarea 元素的文档，并且我相信我对 setSelectionRange 的调用是有效的。这是否与我以编程方式创建了 textarea 并且它实际上没有显示的事实有关？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T16:43:42.230

在我输入问题时找到了答案，所以我想我会分享给任何可能偶然发现这个问题的人。答案很明显，我在最后一句话中基本上想到了：我正在使用 $('') 创建一个 textarea DOM 元素并存储该对象，但我从未将该对象插入到文档中。在我将元素附加到正文后， setSelectionRange 会按预期更新选择。在我的情况下，在我的单元测试结果页面上显示实际的 textarea 并不是很理想，但这很容易通过调用 $textarea.hide() 来解决。

# php - php声明应用程序根

> ID：11973435
> 
> 赞同：1
> 
> 时间：2012-08-15T16:43:59.613
> 
> 标签：php

我有一个小问题：我开始一个项目作为一个更大的 web 项目中的子目录。因此，Web 文件路径类似于 /../myProject。但事情有了进展，我意识到这应该是它自己的项目。但是，我希望能够将它保存在它（作为子目录）的位置，也使它成为一个子域，其中`myProject`成为根。（也有可能我的项目将被镜像到一个图书馆站点，它曾经位于一个子目录中）。

我遇到的所有这些问题是，在某些情况下，我有`html_partial files`，（例如页眉或页脚）。但是这些部分的相对路径会根据您在文件树中的位置而有所不同。我最初通过总是回到根来解决这个问题。

但是现在，您会看到，根据我的项目所在的位置，根会有所不同。我想做的是将 myProject 声明为“应用程序根”，然后能够使用基于此`application`根的相对路径，而不是`web root'. This way, all of the relative paths within 'myProject' will work no matter where`位于 web 路径中的 myProject 。

PHP 有没有办法声明类似`Application Root`if 的东西，你能给我解释一下或指导我看它的文档吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T16:58:52.927

您可以简单地在应用程序根目录中有一个 PHP 文件，该文件将其所在的目录定义为应用程序根目录。该文件可以像这样简单：

```
<?php
define('APPLICATION_ROOT', __DIR__);
?> 
```

然后，您可以根据需要包含此文件，并将所有文件路径从`APPLICATION_ROOT`. 请注意，`APPLICATION_ROOT`不会有此处定义的尾部斜杠（除非您的文件恰好位于机器根目录中，这不太可能）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T16:59:01.633

我通常在前端控制器中做一些事情：

```
define('APPLICATION_PATH', realpath(__DIR__)); 
```

然后您可以执行以下操作：

```
set_include_path(APPLICATION_PATH . '/include'); 
```

或者：

```
$fp = fopen(APPLICATION_PATH . '/path/to/some/file', 'r'); 
```

如果您的应用不使用前端控制器，您可以在 vhost 配置或 .htaccess 中定义环境变量：

```
SetEnv APPLICATION_PATH /full/path/to/my/app 
```

然后使用：

```
getenv('APPLICATION_PATH') 
```

# playframework - 精简表格中的表格增加行高

> ID：11973440
> 
> 赞同：2
> 
> 时间：2012-08-15T16:44:09.270
> 
> 标签：playframework, twitter-bootstrap

我注意到在精简表的 tabledata-element 中使用表单后，rowheight 正在增加。

请参阅以下包含表格（用于删除按钮）和不带表格的表格的屏幕截图：http: [//cl.ly/image/43272x452b2i](http://cl.ly/image/43272x452b2i)。

我怎样才能摆脱使用表单时添加的额外空间？我想保持精简表的行高。

仅包含表格的表格数据的表格如下所示：

```
<table class="table table-striped table-bordered table-condensed">
        <thead>
            <tr>
                <th></th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>
                    @form(routes.Clubs.deleteClub(club.clubID.get), 'onsubmit -> "return confirm('Bent u zeker dat u dit club wilt verwijderen?')") {
                        @if(!permissions.contains(Clubs.CLUB_DELETE) || club.isUsed){
                            <a disabled="disabled" type="submit" class="btn"><i class="icon-remove"></i></a>
                        }else{
                            <a type="submit" class="btn"><i class="icon-remove"></i></a>
                        }
                    }
                </td>   
            </tr>
        }

    </tbody>
    </table> 
```

我正在使用 Twitter Bootstrap v2.0.1。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T14:16:59.477

解决了，在我的css中添加了以下块：

```
table form{
    margin-bottom: 0px;
} 
```

# javascript - 取消设置 javascript 数组

> ID：11973443
> 
> 赞同：0
> 
> 时间：2012-08-15T16:44:13.540
> 
> 标签：javascript, unset, splice

我已经尝试了几个小时，我认为这真的很简单；

使用 javascript 我基本上想遍历一个数组，获取索引的当前值，然后从数组中取消设置这个值。我发现 splice() 应该可以解决这个问题，但是我似乎无法清空数组，数组上总是剩下一个值

```
var filtered = array("up", "down", "left");
 function resetTags(){
       var length = filtered.length;

       for(i=0; i <= length; i++){
            filtered.splice(i,1);
        }
    } 
```

**编辑：：**

我将尝试更详细地解释：

我基本上是在尝试跟踪从单击项目时获得的选定类值的列表： var filters = array();

```
 jQuery("li a").click(function () {
     tag = jQuery(this).text();
     addFiltered(tag);
});

 function addFiltered(param){
      var inArray =  jQuery.inArray(param,filtered);
      if(inArray > -1){
        //param is in array, so we want to remove it from the filtered array 
            filtered.splice(index, 1);
        });

        }else{
         //param isn't in array, so we want to add it to the array 
            filtered.splice(0, 0, param);
        });
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T16:47:15.123

如果要清空数组，直接设置为空数组即可：

```
filtered = []; 
```

如果您想在清空数组之前使用这些值，只需在此之前迭代而不删除值并在完成后将其清除。

通过弄乱复杂的解决方案，您可以获得什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T17:05:27.260

> 我基本上想遍历一个数组，获取索引的当前值，然后从数组中取消设置这个值。

```
for(i=0; i <= length; i++){
            filtered.splice(i,1);
        } 
```

我认为您没有明确定义（或者可能不知道）您要尝试做什么。

您是否正在尝试编写`pop(n)`这样的方法：

```
var a = [1,2,3,4]
var result = pop(3, a)
result == [ 1, 2, 4] 
```

或者你只是想遍历一个数组并每次都取出第一个元素？如果是这样，你做错了。这只是一个[shift()](http://www.w3schools.com/jsref/jsref_shift.asp)

```
 var filtered = ["up", "down", "left"]
 for(i = 0 ; i<= filtered.length; i++)
    {
       alert(filtered);
       filtered.shift();
       alert(filtered);          
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T16:47:19.923

嗯，你在增加。你试过递减吗？

```
var filtered = new Array("up", "down", "left");

function resetTags(){
   var length = filtered.length;

   for(i = length; i >= 0; i--){
        filtered.splice(i,1);
   }
} 
```

这应该确保最终元素被拼接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T16:47:48.610

数组定义不正确。这就是代码没有执行的原因

```
 var filtered = ["up", "down", "left"];
     function resetTags(){
           var length = filtered.length;

           for(i=0; i <= length; i++){
                filtered.splice(i,1);
            }
        } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-15T16:49:32.527

要一个一个地删除项目：

> var a = [1,2,3,4,5];
> 
> 而 (a.length > 0 ) { a.splice(0,1); }

[http://jsfiddle.net/89hkH/](http://jsfiddle.net/89hkH/)

# java - SQL 新手 - 查询的组织和优化

> ID：11973445
> 
> 赞同：1
> 
> 时间：2012-08-15T16:44:20.190
> 
> 标签：java, sql, jdbc, query-optimization, database-connection

对于我正在处理的胖客户端项目，我必须远程连接到数据库（IBM i 系列）并执行一些与 SQL 相关的任务：

1.  `Download/Update a set of local/offline 'control' data`- 此数据可能在未注意到的运行之间发生了变化。
2.  `On command, download data from multiple (15-20) tables and store separately into a single Java object.` 表的名称是已知的，但是模式名称在运行之间会发生变化，并且可以在运行之间发生变化（据我所知，`PreparedStatements`不允许动态插入模式）。我曾考虑使用 joins/unions/etc 将所有这些查询作为一个来执行，但该项目要求我在表数据之间进行内存分离（而不是一个大的连接块）。
3.  `Perform between 2 and 100+ repetitions of (2)`

最后一个因素是，这需要在可能的最旧计算机上使用 Java 1.5 在高延迟（可能是拨号）网络连接上运行。

目前我运行 15-20 动态构造`PreparedStatements`，但我知道这是相当低效的（我测量，以避免过早优化ala Knuth）。

**执行这些任务最有效和容错的方法是什么？**
我的想法：

*   关于`(1)`，除了对照新表检查整个表之外，我真的不知道，此时我觉得我不妨下载新的（可能且可能未更改的）表并替换旧表，但这需要更多时间。
*   For `(2)`：理想情况下，我能够构建类似于一组`SELECT`语句的东西，一次发送它们，并让数据库`ResultSet`为每个内部查询返回一个。但是，据我了解，既不`Statement`也不`PreparedStatement`支持返回多个`ResultSet`对象。
*   最后，我能想到的最好方法`(3)`是批量`(2)`操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T17:15:50.720

移动需求并没有什么特别之处，但是在与大多数数据库通信时使用的最重要的事情是在 Java 应用程序中拥有一个连接池并正确使用它。

这也适用于这里。IBM i DB2/400 数据库非常快，jt400 项目中可用的数据库驱动程序（类型 4，无本机代码）非常好，因此您只需生成 SQL 即可在短时间内拉取相当多的数据在飞行中。

请注意，如果您只有一个模式，您可以在连接中告诉您需要哪个模式，然后可以在 SQL 语句中使用非限定表名。非常仔细地阅读 InfoCenter 中的 JDBC 属性 - 正确阅读有点棘手。如果您需要多个模式，“naming=system”允许库列表 - 即用于查找表的模式列表，如果正确完成，这将非常有用。IBM i 人员可以在这里为您提供帮助。

也就是说，如果连接是限制因素，那么您可能非常有理由直接在 IBM i 上运行“从表中创建对象”Java 代码。您现在应该已经准备好能够测量到数据库的流量 - 使用网络监控工具、使用 p6spy 或简单地通过代理（甚至可能是一个节流的代理）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T17:08:56.987

理想情况下，您应该让数据库组为您提供一组存储过程来优化对数据库的访问。

由于您没有访问权限，您可能想询问他们是否在行级别的数据库中有时间戳数据，以查看记录何时被修改，这样您就可以只选择自某个时间点以来发生更改的数据。

@ThorbjørnRavnAndersen 的建议是将数据库代码移到 IBM 主机上，并通过 RMI 或 JMS 从客户端连接到它。因此，服务器代码将是一个 RMI 或 JMS 服务器，它代表您访问数据库并返回 java 对象，而不是通过网络传递 SQL 结果集。

我会将您的要求传递给数据库团队，看看他们是否不能为您做点什么。我敢肯定，他们不希望所有这些远程客户端每次都关闭所有数据，因此这对他们有好处，对你也有好处。

# python - 如何正确地将 Python“列表列表”映射到 SQL 表（使用 SQLite3 构建）？

> ID：11973446
> 
> 赞同：0
> 
> 时间：2012-08-15T16:44:25.053
> 
> 标签：python, sqlite

我有来自包含仪器读数的 XML 解析器的数据。数据样本复制如下：

```
cimReading = [['2012-08-15 10:05:13.101485', ['0x46'], ['0x32'], ['1.234'], ['5.678'], ['9.123'],
 ['4.567'], ['0x98'], ['0x97']], 
['2012-08-15 10:05:13.101979', ['0x47'], ['0x33'], ['8.901'], ['2.345'], ['6.789'], 
['0.123'], ['0x96'], ['0x95']]] 
```

我正在尝试遍历列表项并将它们放在一个表中，`cim76_dmt`该表以前在 Python 中用`sqlite3`. 这是我用来尝试执行此操作的代码：

```
for devList in cimReading:
    print devList
    cim76TabPopulate.execute('INSERT INTO cim76_dmt VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)', 
            devList)
BenchDB.commit()
cim76TabPopulate.close() 
```

这是我在执行时收到的错误消息：

```
['2012-08-15 10:40:21.110140', ['0x46'], ['0x32'], ['1.234'], ['5.678'], ['9.123'], ['4.567'], ['0x98'], ['0x97']]
EXCEPTION...
(<class 'sqlite3.InterfaceError'>, InterfaceError('Error binding parameter 1 - probably unsupported type.',), <traceback object at 0x1007a7518>) 
```

所以，我在将列表项映射到 SQL 表字段时遇到问题。我认为应该有一种方法可以做到这一点，但另一种可能性可能是调整 XML 解析，以便为每条记录生成一个包含多个字符串的单个列表。我欢迎对此提出任何建议或意见。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T17:00:43.037

您的问题是第一个参数之后的所有参数都是列表，而不是字符串或整数。抱怨的错误信息是抱怨`unsupported type`数据元素`['0x46']`。

您需要更多地处理您的数据；你想解压`['0x46']`到`'0x46'`. 这需要对示例数据中单长度列表中的其他数据元素进行。

# android - 在按钮按下时传递数据

> ID：11973447
> 
> 赞同：0
> 
> 时间：2012-08-15T16:44:37.790
> 
> 标签：android, android-listview, android-button, android-dialog

我有一个文件管理器。它以`ListView`. 这些`ListView`s 中的每一个都有一个自定义页脚 - 一个在 xml 文件中定义的按钮。按下按钮允许用户从“下载”目录中选择一个文件并将其复制到按下按钮的文件夹中。这是通过`AlertDialog`. 因此，通过单击对话框中的选项，我得到了应该复制的文件的路径。

现在，如何获取按下按钮的位置？我可以在创建按钮时以某种方式在我的按钮中打包某种数据，以便稍后按下它时我可以识别它的初始位置吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T17:01:09.607

有很多方法可以实现这一目标。您可以按照 JaLoveAst1k 的建议为每个按钮创建一个单独的 OnClickListener。您还可以将一些信息添加到按钮的标签 (setTag()) 并在 onClick() 函数中取回它。另一种方法是有一个`Hashtable<Button, String>`相对于按钮存储字符串信息的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T16:50:53.060

是的，像这样：

```
protected class CustomListener implements View.OnClickListener {
    private String text;

    public CustomListener(String text) {
        this.text = text;
    }

            ...
} 
```

并将此侦听器设置为按钮，在构造函数中提供数据。

# html - 将多行编辑框值转换为 HTML 以在 xpages 中的电子邮件中发送

> ID：11973451
> 
> 赞同：2
> 
> 时间：2012-08-15T16:44:47.240
> 
> 标签：html, xpages

我发现了一些很棒的 javascript 代码（xpHTMLMail 文件），它们能够创建一个 HTML 电子邮件，用户可以根据他们对销售人员撰写评论的 xpage 文档即时创建该电子邮件。但是，那里有一些多行编辑框，其中包含回车符、空格等。这些在添加到 HTML 时不会出现。我可以做些什么来保持创建的电子邮件的格式？提前致谢。

这是处理我的这部分问题的代码（inputClosing 是一个多行编辑框）：

```
mail.addHTML("<br /><br /><b>Closing</b><br />"+getComponent('inputClosing').getValue()) 
```

如果 inputClosing 有...

“亲爱的乔，

做得好。保持！

谢谢，比尔”

它以...的形式进入电子邮件

亲爱的乔，伟大的工作。保持！谢谢，比尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T20:15:32.983

我写了那个库，所以谢谢！

由于您正在创建 HTML 邮件，因此您需要将多行编辑框的值中的换行符替换为`<br />`标签。由于您在 XPage 中处理 Java，因此换行符使用`\r\n`序列存储在值中。

您可以使用**replaceAll()**或 (SSJS) **@ReplaceSubstring()**函数替换它们。

您的代码可能如下所示：

```
var content:string = getComponent("inputClosing").getValue();   
mail.addHTML("<b>Closing</b><br />" + content.replaceAll("\r\n", "<br />") ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T20:49:42.953

马克的建议肯定有效，但将文本字段包装起来可能更容易，`<pre></pre>`然后它将它们视为文本而不是 html，无论其中包含哪种格式字符。

# c# - 通过 .NET COM 互操作调用方法时出错

> ID：11973452
> 
> 赞同：3
> 
> 时间：2012-08-15T16:44:53.373
> 
> 标签：c#, com-interop

我正在尝试使用[IOfficeAntiVirus COM 接口](http://msdn.microsoft.com/en-us/library/office/ff830310.aspx)调用使用 Microsoft 安全要点病毒扫描程序的扫描。

我正在做早期绑定，因为文档说 IOfficeAntiVirus 接口继承自 IUknown 并且不支持 IDispatch。

```
[Guid("56FFCC30-D398-11d0-B2AE-00A0C908FA49"), InterfaceType(ComInterfaceType.InterfaceIsIUnknown)
]
public interface IOfficeAntiVirus
{
    void Scan(IntPtr info);
}

[ComImport, Guid("2781761E-28E1-4109-99FE-B9D127C57AFE")]
class SecurityEssentialsAntiVirus
{
} 
```

scan 方法的参数是来自[此示例](http://www.enhanceie.com/ie/IOfficeAntiVirusInCSharp.asp)的类型。该示例与我想要的相反，因为它使用 .NET 类而不是调用 scan 方法来实现 IOfficeAntiVirus 接口。据我所知，示例中的编组和类型似乎[与文档相匹配。](http://msdn.microsoft.com/en-us/library/office/ff830314.aspx)

```
[StructLayout(LayoutKind.Sequential, CharSet = CharSet.Unicode)]
public struct MSOAVINFO
{
public int cbsize;

[MarshalAs(UnmanagedType.U4)]
public uint uFlags;
public IntPtr hwnd;

[MarshalAs(UnmanagedType.LPWStr)]
public string pwzFullPath;

[MarshalAs(UnmanagedType.LPWStr)]
public string pwzHostname;

[MarshalAs(UnmanagedType.LPWStr)]
public string pwzOrigURL;
} 
```

这是我试图用来调用扫描方法的代码：

```
var antivirus = (IOfficeAntiVirus)new SecurityEssentialsAntiVirus();
var file = new MSOAVINFO();
file.pwzFullPath = @"test.txt";
IntPtr lParam = Marshal.AllocHGlobal(Marshal.SizeOf(file));
Marshal.StructureToPtr(file, lParam, false);
antivirus.Scan(lParam); 
```

它在调用 scan 方法时失败。我得到一个例外，上面写着：

> “试图读取或写入受保护的内存。这通常表明其他内存已损坏。”

我从 64 位系统上的 32 位命令行应用程序运行它。我已经尝试在 32 位和 64 位中运行命令行程序，但没有成功。

我确信 IOfficeAntiVirus guid 是正确的，因为我是从文档中获得的。当我尝试将对象强制转换到接口时，尝试使用不是 COM 接口的随机 GUID 也会导致错误。

我确信 SecurityEssentialsAntiVirus guid 实现了 IOfficeAntiVirus，因为当我尝试将不同类型的 COM 对象投射到该接口时出现错误。

我认为问题可能是没有正确声明接口上的 Scan 方法（在接口上声明随机方法会产生相同的错误）。我没有根据安全要素程序集的文档工作，因此它可能无法以我想象的方式（或根本没有）实现接口。有谁知道如何检查？

我可以在它的目录中看到一个 MpOAv.dll 文件，它与 IOfficeAntiVirus 文档中的头文件同名，我知道这没什么好做的。我无法在 ole-com 对象查看器中打开该 dll 以查看里面的内容。我收到一条消息说：

> IMoniker::BindToObject 在从 ( "C:\Program Files\Microsoft Security Client\MpOAv.dll" ) 创建的文件名字对象上失败。文件扩展名错误
> 
> MK_E_INVALIDEXTENSION ($800401E6)

也可能是我没有将结构正确传递给 Scan 方法。我已经尝试了大约一百种变体，包括使用 AllocCoTaskMem() 和通过引用传递结构。

我真的没有太多的互操作经验（今天学习了一堆试图解决这个问题！）所以我真的很感激朝着正确的方向前进。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T16:52:42.627

我注意到的一件事是您没有设置 cbsize。file.cbsize=元帅.SizeOf(文件);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-05T10:11:09.837

我也在同样的问题上花了几天时间，但没有任何结果。在我的情况下，我能够做到的最大运行检查没有任何错误，但即使对于恶意软件，它也会返回 OK 状态

因此，我继续研究，发现[Mozilla](http://mxr.mozilla.org/mozilla1.9.2/source/toolkit/components/downloads/src/nsDownloadScanner.cpp)使用[IAttachmentExecute](https://msdn.microsoft.com/en-us/library/bb776297.aspx)防病毒 API 进行检查。和 Save 方法，它做同样的工作，如扫描 IOfficeAntiVirus

> IAttachmentExecute::Save 可能会在保存文件之前运行病毒扫描程序或其他信任服务来验证文件。请注意，这些服务可以删除或更改文件。

并在codeples [http://antivirusscanner.codeplex.com/上实现它](http://antivirusscanner.codeplex.com/)

# jquery - 2个表之间的jquery同步表宽度

> ID：11973453
> 
> 赞同：0
> 
> 时间：2012-08-15T16:44:54.653
> 
> 标签：jquery, html

大家好，我有 2 个表...无论如何在 jQuery 中动态地使表 @ 与表 1 的宽度相同？如果我可以将`td`表 2 中的宽度设置为表 1 的宽度...它们将完美排列...谢谢

```
<table id="t1" align="center" class="data_table" style="border-bottom-style: none;  margin-bottom: 0px;">      
    <tr>        
        <th>        
        </th>    
    </tr> 
</table>  
<table id="t2" align="center" class="data_table" style="border-top-style: none; margin-top: 0px;">       
    <tr>         
        <th colspan="9 title="Source of Repair (SOR) Remarks">SOR Remarks</th>
    </tr>
    <tr>         
        <td width="845px" colspan="9">            
            <textarea name="mcRemark" rows="7" cols="100" scrolling="auto">${mcRemark}   </textarea>        
        </td>    
    </tr> 
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T16:48:25.623

尝试：

```
 $('#t2').width($('#t1').width()); 
```

或者

```
 $('#t2 td').width($('#t1').width()); 
```

我不知道您在寻找哪种替代方案。祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-18T17:57:02.447

也许您也应该考虑开始使用 colgroup ，您可以在其中定义所有列都应继承的任何自定义样式。因此，如果您对两个表都坚持这些设置，那么这应该会很有效。

# breeze - 结果验证规则

> ID：11973458
> 
> 赞同：1
> 
> 时间：2012-08-15T16:45:04.870
> 
> 标签：breeze, upshot

有一个 URL 或一些如何为 upshot.js 的元数据部分创建自定义规则的示例

例如，元素不存在于 localDatabase 可观察数组中的规则。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T18:56:41.400

关于Upshot 情况和替代方案的StackOverflow有一个[很好的讨论。](https://stackoverflow.com/questions/12238855/current-status-of-upshot-js)原因在于 Upshot 已被放弃，幸运的是，有一些不错的库可供选择，包括 BreezeJS、Ember 和 JayData

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T21:05:14.050

Scott 和微软团队表示，他们（现在）不会继续进行 upshot.js 的开发。

我要停止研究这个图书馆了。

发送

# web-config - 带身份验证的 aspnet 静态文件访问

> ID：11973459
> 
> 赞同：2
> 
> 时间：2012-08-15T16:45:06.020
> 
> 标签：web-config, static-files

在我的应用程序文件夹中，我有虚拟应用程序 QA。有一个文件夹“帮助”，其中包含 html 和其他静态文件。QA 正在使用表单身份验证。

帮助文件夹中的所有文件无需身份验证即可访问（例如，www.mypage.com/QA/help/test.html）。我需要更改它，以便如果用户访问帮助文件夹中的文件（html 文件或任何其他静态文件），那么用户将重定向到登录页面。我在谷歌上搜索，我发现的唯一一件事是这是静态文件处理和映射到 asp 的东西。我正在使用 IIS 6。

我试图添加这样的行

```
< add name="StaticHandler" type="System.Web.StaticFileHandler" path="*.html" verb="*" validate="true" /> 
```

到我的 web.config （在 QA 文件夹中），但它没有帮助。实际上，我不明白这一行，而且我是 web.config 文件管理的新手。我还尝试将帮助文件夹中的所有静态文件放入 QA 中，但它也无济于事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T17:21:25.370

确保您已将配置文件添加到包含您希望像这样保护匿名用户的静态文件的目录中（这意味着您将在要保护的目录中有第二个 web.config 文件）。这将拒绝任何匿名用户（这就是所做的）。

```
<configuration>
    <appSettings/>
    <connectionStrings/>
    <system.web>
      <authorization>
        <deny users="?"/>
      </authorization>
    </system.web>
</configuration> 
```

IIS 在 ASP.net 管道之外为您的静态文件提供服务。除了添加已添加的声明外，您还`System.Web.StaticFileHandler`需要在 IIS 中映射扩展。为了确保您的 .htm 或 .html 文件通过 ASP.net 并因此经过身份验证。

在您的根 web .config 文件中添加

```
<system.web>
   <httpHandlers>
      <add path="*.html" verb="*" type="System.Web.StaticFileHandler" />
   </httpHandlers> 
```

然后你需要在 IIS 中执行一些操作。这些说明适用于 IIS 6.0

1.  打开 IIS 管理器
2.  右键单击您的网站并选择属性
3.  单击主目录 -> 配置（显示应用程序扩展等）。您将需要来自已被 asp.net 使用的映射扩展的路径。最好的方法是在列表中找到一个已经映射的 asp.net 扩展，如 .aspx 或 .ascx，单击编辑并复制可执行文件路径。该路径应以 aspnet_isapi.dll 结尾。
4.  点击添加
5.  粘贴上一个可执行路径和扩展名（在您的情况下为 .html）。
6.  对您希望由 ASP.net 运行时处理的任何其他文件类型重复此过程。

# path - 检查turbogears公共文件是否存在

> ID：11973460
> 
> 赞同：0
> 
> 时间：2012-08-15T16:45:09.420
> 
> 标签：path, turbogears

我是 turbogears 的新手，并且有一个我正在创建的应用程序，其中包含 public/media/ballots 下的多个目录。我需要查看目录是否存在。

```
path = "public/media/ballots/" + x['directoryName']
#return path
if os.path.exists(path):
                listing = os.listdir(path)
                i=0
                for infile in listing:
                   #find path for ballot1, ballot2, etc from files in directory
                   i +=1
                   Ballot = "Ballot" +str(i) 
                   x['Ballot']= infile
                return x
else:
    return "false" 
```

我尝试了多种定义路径的方法：“/media/ballots/”、“./media/ballots/”、“media/ballots”。但是 os.path.exists(path) 总是返回 false。我不确定 TG 是如何访问公共文件的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-22T17:56:34.953

**tg.config['paths']['static_files']**将为您提供公共目录的绝对路径。然后，您可以使用*os.path.join*将其链接到相对于公共文件的文件路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T13:02:41.147

我必须制作 path="projectname/public/media/ballots/"

# php - 聊天应用程序的潜在问题

> ID：11973461
> 
> 赞同：2
> 
> 时间：2012-08-15T16:45:23.453
> 
> 标签：php, javascript, ajax, rdbms

我正在创建一个网站，用户可以在该网站上进行面对面聊天和群聊，例如在 facebook 上进行聊天，在我真正深入研究并开始编码之前，我想问几个问题。

我考虑过使用 javascript、ajax 和 php 创建聊天应用程序，并且对话将使用 mysql 保存（PDO 与连接到数据库的准备好的语句）。这些对做这样的应用程序有好处吗，还是有一些语言更适合这个？

其次，我担心如果很多用户同时登录，会使网站变慢。当一个站点上有很多用户时，mySQL 真的是一个很好的 RDBMS，并且是否有一些像 PDO 这样的方法，但它们旨在更快地进行查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T16:57:25.410

您建议的 AJAX、PHP、MySQL 和 PDO 解决方案非常好（正如 Michael Rice 已经说过的）。但是如果你想要一个即时更新的真实聊天，缺点是你需要不断地从服务器轮询（通过 ajax）。也许你可以看看 WebSockets（[链接到 js api 规范](http://dev.w3.org/html5/websockets/)，[链接到协议规范](https://www.rfc-editor.org/rfc/rfc6455)）。这将允许您在用户在聊天中说些什么时立即更新。那么您甚至不需要在服务器端存储对话！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T16:49:56.617

你是把马放在车前。如果您构建产品，您可以随时调整后者的性能。在编写任何代码之前不要担心优化。

我可以告诉你，在你使用这些确切的技术之前，很多人已经来了。

MySQL 是一个很棒的数据库。它速度快（正确使用时），符合 ACID（与 INNODB 引擎一起使用时）。PHP 是一门伟大的、简单的语言。Javascript 是事实上的网络语言。

PDO 非常快，准备好的语句将有助于最大限度地减少 SQL 注入。

我认为你走在正确的道路上。

# java - 使用 JSF1.x 时，EL 可以从 Set<> 中读回以查找值吗？

> ID：11973469
> 
> 赞同：0
> 
> 时间：2012-08-15T16:46:05.467
> 
> 标签：java, jsf, el, jsf-1.2

我有以下xhtml：

```
<s:fragment
    rendered="#{selectCat.categoryTypes.contains('unclickable')}">
    <h:outputText value="DONT CLICK #{selectCat.webName}" />
</s:fragment> 

<s:fragment rendered="#{selectCat.categoryTypes eq null}">
    <a href="/category/#{_category.fullName}"> #{selectCat.webName}</a>
</s:fragment> 
```

我正在尝试阅读该类型是否不可点击..

后端 bean 读取：

```
@ManyToMany(fetch = FetchType.LAZY, targetEntity = C_Type.class)
@JoinTable(name = "Category_Type", joinColumns = @JoinColumn(name = "CategoryId"), inverseJoinColumns = @JoinColumn(name = "TypeId"))
@XmlTransient
public Set<C_Type> getCategoryTypes() {
    for (C_Type cc : categoryTypes) {
        System.out.println("=============="+cc.getC_type()+"==============");
    }

    return categoryTypes;
} 
```

我做错了什么，或者我需要做什么才能将链接显示为不可点击？在前端？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T17:17:18.800

该语句直接不适`EL`用于`JSF 1.x`

```
#{selectCat.categoryTypes.contains('unclickable')} 
```

现在为解决方案尝试`taglib`使用以下指针的自定义函数...

在中注册 taglib`web.xml`

```
<context-param>
    <param-name>facelets.LIBRARIES</param-name>
    <param-value>
        PATH_TO_CUSTOM_TAGLIB;/WEB-INF/tomahawk.taglib.xml;
    </param-value>
</context-param> 
```

在 taglib 中定义方法为：

```
<facelet-taglib>
<namespace>
 http://www.client.com/product
</namespace>
...
<function>
    <function-name>contains</function-name>
    <function-class>com.XXX.XXX.XXX.JavaClass</function-class>
    <function-signature>java.lang.Boolean contains(java.util.Set, java.lang.String)</function-signature> 
</function>
 ...
</facelet-taglib> 
```

将java方法定义`com.XXX.XXX.XXX.JavaClass`为

```
public static Boolean contains(Set setOfObjects, String value){
    //... Assuming you are checking where value, a string, is available in Set or not    
} 
```

在 XHTML 中声明命名空间

```
xmlns:g="http://www.client.com/product" 
```

最后在 xhtml 中调用它

```
<s:fragment
    rendered="#{g:contains(selectCat.categoryTypes,'unclickable')}"> 
```

希望能帮助到你！！！

# java - Perl/Java 字节编码差异

> ID：11973471
> 
> 赞同：1
> 
> 时间：2012-08-15T16:46:07.337
> 
> 标签：java, perl, encoding, utf-8, character-encoding

所以现在，我的 Java 代码正在创建与我们的 Perl 代码不同的 SHA-256 哈希，但只有在 UTF8 字符起作用时。我做了一些调试，发现名称 Jörg 的 byte[] 表示在语言中如下所示：

Java 74、-61、-74、114、103

Perl 74、195、182、114、103

可能导致哈希的差异？看起来 Java 使用有符号字节，而 Perl 使用无符号字节。如果需要/要求提供更多信息！

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-15T17:37:49.150

所以问题原来是在Java中，当我反转字符串时，它正在反转字符（如预期的那样）。在 Perl 中， reverse 实际上作用于字节。这意味着 Jörg 在反转时在语言中看起来像这样：

爪哇 103 114 -61 -74 74

Perl 103 114 195 182 74

希望这可以帮助其他人！

# javascript - 在 JSP 之间共享动态客户端和服务器端内容

> ID：11973476
> 
> 赞同：0
> 
> 时间：2012-08-15T16:46:29.170
> 
> 标签：javascript, html, css, jsp

我已经对 JSP 的功能进行了大量搜索，但无法找到我的问题的简明答案。

我目前正在编写一个 Web 应用程序，它使用单个 jsp（带有导入的 CSS）来构建具有多种功能的站点。具体来说，应用程序能够从/向外部服务器读取和写入数据，以及更新用户内容和信息。

为了美观和清晰起见，最有意义的做法是为每项任务指定站点的不同区域，一次一个。我不想尝试使用页面划分和条件语句来控制它们的可见性和执行，而是想从本质上“切割”这个动态内容背后的逻辑，并将其分布在多个 JSP 中，以便更有条理地编辑、测试和修改由 Web 开发人员和程序员共同编写代码，而无需协作。

假设所涉及的所有 JSP 都具有适当的导入，我需要采取任何基本措施来允许在这些 JSP 之间无缝共享内容吗？例如，如果用户向服务器写入数据并将其数据存储为某个实体，（从带有来自一个 jsp 的工具的页面）如果我只是将该代码复制到另一个 jsp 并让用户使用，那么用于查询数据库的函数将工作导航到该页面以访问该持久数据？

感谢您的反馈意见！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T20:22:37.133

学习设计模式[Model-view-controller](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)。帮助您解决许多项目问题会很棒。而且您的架构将更具可维护性和可扩展性。您可以[在此处](https://stackoverflow.com/questions/3541077/design-patterns-web-based-applications/3542297#3542297)和[此处](http://engineerbabu.in/2012/07/03/jsps-and-servlets-tutorial-15-understanding-the-mvc-pattern/)查看有关使用 JSP 实现此模式的更多信息。

# java - PDF 中的可滚动图像

> ID：11973479
> 
> 赞同：1
> 
> 时间：2012-08-15T16:46:33.820
> 
> 标签：java, pdf, velocity

寻找实现这一目标的提示/工具（使用 PDF/Velocity 模板/Java）：

我有一张尺寸很大（4000 x 2000）的图像，并且该图像显然无法在 PDF 中查看。我可以修改图像的大小以适应 PDF。

但我想做的是查看PDF中图像的实际大小。我希望能够从左到右滚动图像。

如何在不破坏 PDF 的设置容器大小的情况下保持图像的真实大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T06:41:46.000

这不是一个基本的 PDF 功能，但它可能可以使用 PDF 中的一些嵌入脚本来实现，假设用户有一个能够运行脚本的 PDF 查看器。

现在，不应将 PDF 用作可以滚动的动态文档。打印后如何在纸上工作？如果您想要可滚动的文档，那么您应该坚持使用 HTML。我强烈建议您不要尝试这样做。

但是，如果您仍然想走这条路，那么这里有一些建议：

1.  正如我所说，您可以使用嵌入式 JavaScript 来完成，但这取决于您生成 PDF 的方式：FOP、iText、另一个 PDF 编写器库，或者只是简单`println`的连接，因为很少有库支持嵌入 JavaScript。
2.  您可以只使图像适合页面，但保持其原始分辨率，以便最终获得用户可以放大和滚动的高分辨率页面。这样您就可以将滚动留给 PDF 查看器本身，您只需要让用户知道图像具有更高的分辨率并且应该被放大。坦率地说，4000px 并没有那么大，甚至不足以跟上当今的标准打印机 DPI。

# oracle - VARCHAR2 通过作为参数传递给函数变为数字

> ID：11973487
> 
> 赞同：1
> 
> 时间：2012-08-15T16:46:51.130
> 
> 标签：oracle, plsql

我正在做学校作业，我的代码有错误。我创建了一个 PLSQL 包：

```
create or replace 
PACKAGE GestionProjets AS

  TYPE Signaletique IS TABLE OF EMPLOYES%ROWTYPE INDEX BY BINARY_INTEGER; 
  TYPE TableNomDep IS TABLE OF VARCHAR2(40);

  PROCEDURE AjouterProjets(ProjetRecord IN PROJETS%ROWTYPE);
  PROCEDURE SupprimerProjet(DelNumPro IN PROJETS.numpro%TYPE);
  --PROCEDURE ModifierProjet(newRecord IN PROJETS%ROWTYPE, oldRecord IN PROJETS%ROWTYPE);
  FUNCTION ListerEmployes(dep1 IN DEPARTEMENTS.Nomdep%TYPE, dep2 IN DEPARTEMENTS.Nomdep%TYPE) RETURN Signaletique;

END GestionProjets; 
```

那是我有错误的函数的主体：

```
 FUNCTION ListerEmployes(dep1 IN DEPARTEMENTS.Nomdep%TYPE, dep2 IN DEPARTEMENTS.Nomdep%TYPE) RETURN Signaletique AS

    nomDeps TableNomDep;
    SigTable Signaletique;
    EXWrongDep1 EXCEPTION;
    EXWrongDep2 EXCEPTION;

  BEGIN

    SELECT Nomdep 
    BULK COLLECT INTO nomDeps
    FROM DEPARTEMENTS;

    -- test if dep 1 est un parametre valide
    IF NOT nomDeps.exists(dep1) THEN
      RAISE EXWrongDep1;
    END IF;

    -- test if dep 2 est un parametre valide
    IF NOT nomDeps.exists(dep2) THEN
      RAISE EXWrongDep2;
    END IF;

    EXCEPTION
      WHEN EXWrongDep1 THEN
        RAISE_APPLICATION_ERROR(-20008, 'MAUVAIS PARAMETRE: ' || dep1 || ' N EXISTE PAS!');
      WHEN EXWrongDep2 THEN
        RAISE_APPLICATION_ERROR(-20008, 'MAUVAIS PARAMETRE: ' || dep2 || ' N EXISTE PAS!');
            WHEN OTHERS THEN
                RAISE_APPLICATION_ERROR (-20007, 'ERREUR INCONNU: ' ||  SQLCODE || ' - ' || SQLERRM);

  END ListerEmployes; 
```

当我尝试执行该函数时，我收到以下错误消息：

```
DECLARE
  tabel gestionprojets.Signaletique;
BEGIN
  tabel := gestionprojets.listeremployes('sdsd','sdsd');
END;

ORA-20007: ERREUR INCONNU: -6502 - ORA-06502: PL/SQL: numeric or value error: character to number conversion error
ORA-06512: at "EDGE.GESTIONPROJETS", line 108
ORA-06512: at line 4 
```

我不明白为什么会收到此错误消息。Nomdep 列的类型是 VARCHAR2(40)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T17:04:00.927

我怀疑问题是表类型是由 BINARY_INTEGER 索引的。当`.EXISTS`调用被执行时，它们要么作为表的索引传递，要么`dep1`作为`dep2`表的索引传递，因此 PL/SQL 尝试将 VARCHAR2(40) 参数转换为 BINARY_INTEGER。由于这些输入参数都是非数字字符串 ('sdsd')，因此转换失败。

`DEPARTEMENTS`如果不是每次`ListerEmployes`调用都将整个表读入内存，而是将其重写为，则此代码可能会运行得更快

```
FUNCTION ListerEmployes(dep1 IN DEPARTEMENTS.Nomdep%TYPE, dep2 IN DEPARTEMENTS.Nomdep%TYPE) RETURN Signaletique
AS
  strNomdep  DEPARTEMENTS.Nomdp%TYPE;
BEGIN
  -- test if dep 1 est un parametre valide

  BEGIN
    SELECT NOMDEP
      INTO strNomdep
      FROM DEPARTEMENTS
      WHERE NOMDEP = dep1;
  EXCEPTION
    WHEN NO_DATA_FOUND THEN
      RAISE_APPLICATION_ERROR(-20008, 'MAUVAIS PARAMETRE: ' || dep1 || ' N EXISTE PAS!'); 
  END;

  -- test if dep 2 est un parametre valide

  BEGIN
    SELECT NOMDEP
      INTO strNomdep
      FROM DEPARTEMENTS
      WHERE NOMDEP = dep2;
  EXCEPTION
    WHEN NO_DATA_FOUND THEN
      RAISE_APPLICATION_ERROR(-20008, 'MAUVAIS PARAMETRE: ' || dep2 || ' N EXISTE PAS!'); 
  END;
  EXCEPTION 
    WHEN OTHERS THEN 
      RAISE_APPLICATION_ERROR (-20007, 'ERREUR INCONNU: ' ||  SQLCODE || ' - ' || SQLERRM);    
END ListerEmployes; 
```

分享和享受。

# java - AppEngine - Blobstore API：如何解决“API 调用 file.Create() 响应时间过长并被取消”。漏洞？

> ID：11973489
> 
> 赞同：0
> 
> 时间：2012-08-15T16:46:57.330
> 
> 标签：java, google-app-engine, blobstore

我目前正在使用 Google AppEngine Blobstore API 来存储和访问基于 Java GAE 的网站上的文件。

我的网站（也用作移动应用程序的后端）已经上线了几个星期，一切正常，但从今天开始，每次调用 Blobstore .create() 或 .open( ) API。

```
com.google.apphosting.api.ApiProxy$ApiDeadlineExceededException: The API call file.Create() took too long to respond and was cancelled.
at java.lang.Thread.getStackTrace(Thread.java:1495)
at com.google.apphosting.runtime.ApiProxyImpl.doSyncCall(ApiProxyImpl.java:237)
at com.google.apphosting.runtime.ApiProxyImpl.access$000(ApiProxyImpl.java:68)
at com.google.apphosting.runtime.ApiProxyImpl$1.run(ApiProxyImpl.java:182)
at com.google.apphosting.runtime.ApiProxyImpl$1.run(ApiProxyImpl.java:180)
at java.security.AccessController.doPrivileged(Native Method)
at com.google.apphosting.runtime.ApiProxyImpl.makeSyncCall(ApiProxyImpl.java:180)
at com.google.apphosting.runtime.ApiProxyImpl.makeSyncCall(ApiProxyImpl.java:68)
at com.google.appengine.tools.appstats.Recorder.makeSyncCall(Recorder.java:329)
at com.google.apphosting.api.ApiProxy.makeSyncCall(ApiProxy.java:101)
at com.google.apphosting.api.ApiProxy.makeSyncCall(ApiProxy.java:50)
at com.google.appengine.api.files.FileServiceImpl.makeSyncCall(FileServiceImpl.java:586)
at com.google.appengine.api.files.FileServiceImpl.create(FileServiceImpl.java:498)
at com.google.appengine.api.files.FileServiceImpl.createNewBlobFile(FileServiceImpl.java:103) 
```

我有一个与此类似的问题[，](https://stackoverflow.com/questions/9387257/appengine-java-the-api-call-file-create-took-too-long-to-respond-and-was-canc)只是它现在*总是在*发生。

我在 Appengine 网站上看到了一些错误报告，其中大多数已关闭或已停用很长时间。

还有其他人遇到这个问题吗？我知道这个 API 应该是实验性的，所以我也想知道我是否应该改用 Google Cloud Storage API（这也是实验性的）。

感谢您的输入

# servicestack - 将 ServiceStack 与 ServiceReferenceClient 一起使用

> ID：11973494
> 
> 赞同：1
> 
> 时间：2012-08-15T16:47:18.753
> 
> 标签：servicestack

我正在尝试使用服务引用客户端（在 VS 2010 中使用添加服务引用后生成）从控制台应用程序调用 ServiceStack 服务。

我查看了[github](https://github.com/ServiceStack/ServiceStack.Extras/blob/master/doc/UsageExamples/UsingServiceReferenceClient.cs)上的示例，但无法创建类似的客户端代码。

我的目标是提供一组具有简单 API 的服务，该 API 可以由 .NET 客户端尽可能简单地调用。理想情况下，客户端不应该需要任何 ServiceStack 知识来调用服务。

我的问题是：

*   如果服务不需要任何参数，我应该如何创建请求？
*   如何解决 proxy.Properties？

这是[要点](https://gist.github.com/3361477)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T17:33:10.993

得到它的工作，更新[要点](https://gist.github.com/3361477)删除属性，版本，请求

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T17:50:40.087

您可以使用 SOAP/WSDL `Add Service Reference`，但您应该注意[SOAP 的限制](https://github.com/ServiceStack/ServiceStack/wiki/SOAP-support)。

尽管[当前对客户端库的建议](https://github.com/ServiceStack/ServiceStack/wiki/Clients-overview)是使用您首选的 ServiceStack 内置通用服务客户端。

# java - JavaScript 和 Java 中的日期格式

> ID：11973499
> 
> 赞同：0
> 
> 时间：2012-08-15T16:47:35.157
> 
> 标签：java, javascript

我在 Java 中有这些时间格式，用于格式化日期：

```
dd-mm-yyyy
dd-mm-rr
dd-mon-yyyy
dd-mon-rr
dd/mon/yyyy 
```

当我将这些时间格式与 JQuery 时间选择器一起使用时，我得到以下输出：

```
24-08-rr
24-08-20122012 
```

你能告诉我如何为 Java 和 JavaScript 使用一种时间格式吗？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T17:03:03.747

您可以使用最新版本的 jQuery UI datepicker，它具有以下有用的功能

*   [http://docs.jquery.com/UI/Datepicker/formatDate](http://docs.jquery.com/UI/Datepicker/formatDate)
*   [http://docs.jquery.com/UI/Datepicker/parseDate](http://docs.jquery.com/UI/Datepicker/parseDate)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T16:56:29.010

例如，您可以使用下一个：
-在客户端

```
$("#input-field-id").datepicker().mask("99/99/9999"); 
```

- 在服务器端

```
org.joda.time.format.DateTimeFormatter DATE_TIME_FORMATTER =
      DateTimeFormat.forPattern("MM/dd/yyyy");  
DATE_TIME_FORMATTER.parseDateTime(dateThatYouGatFromClientPart); 
```

# java - Java 中的 String[] 和 String... 有什么区别？

> ID：11973505
> 
> 赞同：33
> 
> 时间：2012-08-15T16:47:55.727
> 
> 标签：java, main, arrays

`main()`我应该如何在 Java 中声明方法？

像这样：

```
public static void main(String[] args)
{
    System.out.println("foo");
} 
```

或者像这样：

```
public static void main(String... args)
{
    System.out.println("bar");
} 
```

`String[]`如果有的话，实际上有什么区别`String...`？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-08-15T16:49:35.457

> **我应该如何在 Java 中声明 main() 方法？**

`String[]`并且`String...`在内部是相同的，即字符串数组。不同之处在于，当您使用可变参数 ( `String...`) 时，您可以调用如下方法：

```
public void myMethod( String... foo ) {
    // do something
    // foo is an array (String[]) internally
    System.out.println( foo[0] );
}

myMethod( "a", "b", "c" );

// OR
myMethod( new String[]{ "a", "b", "c" } );

// OR without passing any args
myMethod(); 
```

当您将参数声明为 String 数组时，您**必须**这样调用：

```
public void myMethod( String[] foo ) {
    // do something
    System.out.println( foo[0] );
}

// compilation error!!!
myMethod( "a", "b", "c" );

// compilation error too!!!
myMethod();

// now, just this works
myMethod( new String[]{ "a", "b", "c" } ); 
```

> **`String[]`和...之间实际上有什么区别`String`？如果有的话？**

约定是`String[]`用作主要方法参数，但 using`String...`也可以，因为当您使用可变参数时，您可以以与调用带有数组作为参数的方法相同的方式调用方法，并且参数本身将是方法内的数组身体。

一件重要的事情是，当您使用可变参数时，它必须是方法的最后一个参数，并且您只能有一个可变参数参数。

您可以在此处阅读有关可变参数的更多信息：http: [//docs.oracle.com/javase/1.5.0/docs/guide/language/varargs.html](http://docs.oracle.com/javase/1.5.0/docs/guide/language/varargs.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-15T16:49:46.943

`String...`转换为`String[]`. 主要区别在于您可以通过 2 种方式调用 vararg 方法：

```
method(a, b, c);
method(new String[] {a, b, c}); 
```

而您需要调用一个接受这样的数组的方法：

```
method(new String[] {a, b, c}); 
```

对于`main`方法，它没有任何区别。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-15T16:49:55.463

`String[] args`接受一个数组参数。

`String... args`将任意数量的字符串作为其参数，并从中创建一个数组。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-02-13T11:37:00.797

让我们通过示例了解差异及其超级简单

```
mymethod(String... str)
   vs
mymethod(String []str) 
```

方法 getid 采用 int 类型数组。

因此，如果我们调用 getId 方法，我们需要传递数组。
要传递数组，我们可以创建匿名数组，或者只是先创建一个数组并像我在下面的示例中那样传递。

```
class test
{
    public void getid(int []i)
    {
      for(int value:i)
     {
      System.out.println(value);
     }
    }

    public static void main(String []arg)
    {
     int []data = {1,2,3,4,5}
     new test().getid(data);
    }
} 
```

现在下面我们使用三点 -> mymethod(int... i)

现在该方法仍然需要数组，但不同的是现在我们可以将直接值传递给该方法，并且“...”自动将其转换为数组
外观示例以下

```
class test
{
    public void getid(int ...i)
    {
    for(int value:i)
    {
    System.out.println(value);
    }
    }
    public static void main(String []arg)
    {
    new test().getid(1,2,3,4);
    }

} 
```

使用“...”而不是“[]”的优势
1）它节省内存：-
在示例中使用 mymethod(int [])
当我们在主方法“Data[]”中创建一个数组时，它们会创建新对象并获得内存中有空间
以及当我们创建方法并在那里定义参数时，例如：-
getid(int []) -> 这将在内存中创建另一个对象，因此我们在内存中有 2 个彼此相同的对象

2)使用“...”时您可以不传递任何内容
在示例二中，您可以在调用“getid”方法时不传递任何内容，它们将正常工作而不会出现任何错误，这对于例如使程序更稳定非常有帮助

```
.
.
.
    public static void main(String []arg)
    {
    new test().getid();
    }
.
.
. 
```

But if we call "getid" method and didn't pass any argument while using "[ ] " then it will show the error at compile time

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-07T12:47:36.230

`String[]`是一个字符串数组。因此是一个包含许多`String`数据类型变量的容器。例如：

```
String[] strArray = new String[2];
str[0] = "Hello";
str[1] = "World";

String str = "Hello World"; 
```

希望这可以清除您的疑问:)

# asp.net - asp.net ajax 删除动态控件不更新页面

> ID：11973508
> 
> 赞同：1
> 
> 时间：2012-08-15T16:48:19.447
> 
> 标签：asp.net, ajax, dynamic-controls

我有一个页面，用户可以在其中向表单添加多个电子邮件地址。单击添加并通过 ajax 添加另一个动态文本框单击保存将保存文本框中的值，但如果有一个空白文本框，那么我想在保存时将其删除。

我有代码来删除它，并看到控件不再在占位符中，但页面似乎没有更新以显示这一点。

```
Private Sub Page_Load(sender As Object, e As EventArgs) Handles Me.Load
    If(Not Page.IsPostBack)
        AddEmailAddressBoxesLoad()
    Else
         Dim button As Control = GetPostBackControl(Me.Page)

        If (button IsNot Nothing) Then
            If (button.ID = "btnAdd") Then
                AddEmailAddressBoxes()              
            ElseIf (button.ID.Contains("btnSave"))
                AddEmailAddressBoxesSave()
                RemoveTextBox()
            End If
        End If

    End If
End Sub

Public Function RemoveTextBox() As List(Of String)
    Dim emptyTextBoxList = New List(Of TextBox
                                    )
    For Each control As Control In phMultiEmailAddressBoxes.Controls
        If(TypeOf(control) Is TextBox)
            Dim textBox = CType(control, TextBox)
            If(String.IsNullOrEmpty(textBox.Text))                  
                emptyTextBoxList.Add(textBox)
            End If
        End If
    Next

    For Each textBox As TextBox In emptyTextBoxList
        phMultiEmailAddressBoxes.Controls.Remove(textBox)
    Next
End Sub 
```

添加文本框方法

```
Private Sub AddEmailAddressBoxes()
    Dim count As Integer

    If (ViewState("EmailAddressboxCount") IsNot Nothing)
        count = CType(ViewState("EmailAddressboxCount"), Integer)
    End If

    count = count + 1

    ViewState("EmailAddressboxCount") = count

    For i As Integer = 1 To count
        AddTextBox(i)
    Next
End Sub

Private Sub AddEmailAddressBoxesLoad()
    Dim count As Integer = 1

    If(TrustSettings.HREmailAddressList.Any())
        count = TrustSettings.HREmailAddressList.Count()
    End If

    ViewState("EmailAddressboxCount") = count

    For i As Integer = 1 To count
        AddTextBox(i)
    Next
End Sub

Private Sub AddTextBox(i As Integer)
    Dim divStart = new Literal()
    divStart.Text = "<div>"
    phMultiEmailAddressBoxes.Controls.Add(divStart)

    Dim textBox = New TextBox()
    textBox.ID = "txtEmailBox" + i.ToString()
    textBox.MaxLength = 200
    textBox.CssClass = "email"
    If(TrustSettings.HREmailAddressList.Any() And TrustSettings.HREmailAddressList.Count() >= i)
        textBox.Text = TrustSettings.HREmailAddressList(i-1)
    End If

    phMultiEmailAddressBoxes.Controls.Add(textBox)

    Dim divEnd = new Literal()
    divEnd.Text = "</div>"
    phMultiEmailAddressBoxes.Controls.Add(divEnd)
End Sub 
```

更新面板标记

```
<asp:UpdatePanel runat="server" ID="UpdatePanel1">
    <ContentTemplate>
       <asp:PlaceHolder ID="phMultiEmailAddressBoxes" runat="server"></asp:PlaceHolder>
    </ContentTemplate>
    <Triggers>
        <asp:AsyncPostBackTrigger ControlID="btnAdd" />
        <asp:AsyncPostBackTrigger ControlID="btnSave" />
    </Triggers>
</asp:UpdatePanel>

<asp:Button runat="server" ID="btnAdd" Text="Add new email address" CssClass="but_small_png" UseSubmitBehavior="False" />
<asp:Button runat="server" ID="btnSave" Text="Save" CssClass="but_small_png" UseSubmitBehavior="False" /> 
```

**编辑：@Yuriy Rozhovetskiy 的代码移植到 VB**

```
 protected sub Page_Load(ByVal sender As Object, ByVal e As EventArgs) Handles Me.Load

        if (IsPostBack)
            for each value As String in DynamicTextBoxes
                Dim tb = new TextBox() with { .ID = value, .CssClass = "email" }
                phMultiEmailAddressBoxes.Controls.Add(tb)
            Next
        End If
    End Sub

private Property  DynamicTextBoxes() As List(Of string)
    Get
        Dim list = ViewState("DynamicTextBoxes")
            if (list Is Nothing)

                list = New List(Of string)()
                ViewState("DynamicTextBoxes") = list
            End If
            return list
    End Get
    Set

    End Set
End Property

protected Sub Page_Init(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Init
    AddHandler btnSave.Click, AddressOf btnSave_Click
    AddHandler btnAdd.Click, AddressOf btnAdd_Click
End Sub

Sub btnSave_Click(ByVal sender As Object, ByVal e As EventArgs) Handles btnSave.Click
    For Each value As string In DynamicTextBoxes

        Dim tb = CType(phMultiEmailAddressBoxes.FindControl(value), TextBox)
        if (tb IsNot Nothing And string.IsNullOrEmpty(tb.Text))

            phMultiEmailAddressBoxes.Controls.Remove(tb)
            DynamicTextBoxes.Remove(value)
        End If
    Next
    End Sub

Sub btnAdd_Click(ByVal sender As Object, ByVal e As EventArgs)  Handles btnAdd.Click

    Dim value = "tbEmailAddress" + DynamicTextBoxes.Count.ToString()
    Dim tb = new TextBox() with { .ID = value, .CssClass = "email" }
    phMultiEmailAddressBoxes.Controls.Add(tb)
    DynamicTextBoxes.Add(id)
End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T09:26:16.607

不确定您的代码有什么问题，但下面的代码对我来说效果很好：

```
<asp:UpdatePanel runat="server">
     <ContentTemplate>
          <asp:TextBox runat="server" ID="tbDefaultEmailAddress" />
          <asp:Panel runat="server" ID="phMultiEmailAddressBoxes">
          </asp:Panel>
     </ContentTemplate>
     <Triggers>
          <asp:AsyncPostBackTrigger ControlID="btnSave" />
          <asp:AsyncPostBackTrigger ControlID="btnAdd" />
     </Triggers>
</asp:UpdatePanel>
<asp:Button runat="server" ID="btnAdd" Text="Add new email address" />
<asp:Button runat="server" ID="btnSave" Text="Save" />

private List<string> DynamicTextBoxes
{
    get
    {
        var list = ViewState["DynamicTextBoxes"] as List<string>;
        if (list == null)
        {
            list = new List<string>();
            ViewState["DynamicTextBoxes"] = list;
        }
        return list;
    }
}

protected void Page_Init(object sender, EventArgs e)
{
    btnAdd.Click += new EventHandler(btnAdd_Click);
    btnSave.Click += new EventHandler(btnSave_Click);
}

void btnSave_Click(object sender, EventArgs e)
{
    foreach (var id in DynamicTextBoxes.ToArray())
    {
        var tb = phMultiEmailAddressBoxes.FindControl(id) as TextBox;
        if (tb != null && string.IsNullOrEmpty(tb.Text))
        {
            phMultiEmailAddressBoxes.Controls.Remove(tb);
            DynamicTextBoxes.Remove(id);
        }
    }
}

void btnAdd_Click(object sender, EventArgs e)
{
    var id = "tbEmailAddress" + DynamicTextBoxes.Count.ToString();
    var tb = new TextBox() { ID = id, CssClass = "email" };
    phMultiEmailAddressBoxes.Controls.Add(tb);
    DynamicTextBoxes.Add(id);
}

protected void Page_Load(object sender, EventArgs e)
{
    if (IsPostBack)
    {
        foreach (var id in DynamicTextBoxes)
        {
            var tb = new TextBox() { ID = id, CssClass = "email" };
            phMultiEmailAddressBoxes.Controls.Add(tb);
        }
    }
} 
```

特别是对于被迫使用 VB.NET 的战友 :)

```
Private ReadOnly Property DynamicTextBoxes As List(Of String)
    Get
        Dim list As List(Of String) = TryCast(ViewState("DynamicTextBoxes"), List(Of String))
        If list Is Nothing Then
            list = New List(Of String)
            ViewState("DynamicTextBoxes") = list
        End If
        Return list
    End Get
End Property

Protected Sub Page_Load(ByVal sender As Object, ByVal evetArgs As EventArgs) Handles Me.Load
    If IsPostBack Then
        For Each id As String In DynamicTextBoxes
            AddNewTextBox(id)
        Next
    End If
End Sub

Protected Sub AddButton_Click(ByVal sender As Object, ByVal eventAtgs As EventArgs) Handles btnAdd.Click
    Dim id = "tbEmailAddress" & DynamicTextBoxes.Count.ToString()
    AddNewTextBox(id)
    DynamicTextBoxes.Add(id)
End Sub

Private Sub AddNewTextBox(ByVal id As String)
    Dim tb As TextBox = New TextBox
    tb.ID = id
    tb.CssClass = "email"
    phMultiEmailAddressBoxes.Controls.Add(tb)
End Sub

Protected Sub SaveButton_Click(ByVal sender As Object, ByVal evebtArgs As EventArgs) Handles btnSave.Click
    For Each id As String In DynamicTextBoxes.ToArray()
        Dim tb As TextBox = TryCast(phMultiEmailAddressBoxes.FindControl(id), TextBox)
        If Not tb Is Nothing AndAlso String.IsNullOrEmpty(tb.Text) Then
            phMultiEmailAddressBoxes.Controls.Remove(tb)
            DynamicTextBoxes.Remove(id)
        End If
    Next
End Sub 
```

一个澄清为什么我使用字符串列表而不是添加文本框的数量：使用这种方法，您可以添加三个动态文本框，填充第一个和第三个但跳过第二个，所有内容都将按需要工作。

# qt - 是否可以将来自 class1 的任何实例的信号连接到 class 2 的插槽？

> ID：11973512
> 
> 赞同：1
> 
> 时间：2012-08-15T16:48:33.413
> 
> 标签：qt, signals, connect

例如，我们有`class Item`哪个有信号`void reportError(QString)`。
此外，我们还有`ItemController`带有 slot的课程`void showError(QString)`。

是否可以将来自任何实例的信号连接`class Item`到 的插槽`ItemController`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T17:07:27.540

是的。您必须`connect()`为每个实例调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T19:27:55.073

正如@scai 所提到的，您可以，但您必须为每个实例调用 connect 。如果你的一个类是另一个类的属性，你可以在构造函数中很容易地做到这一点，或者在它们被实例化的函数或类中，然后立即进行连接。

# arrays - 算法找到最常出现的长度为 3 的字符串序列

> ID：11973513
> 
> 赞同：4
> 
> 时间：2012-08-15T16:48:34.720
> 
> 标签：arrays, algorithm, data-structures

“给定多个名称数组，找到最常出现的长度为 3 的名称序列（长度为 3 的序列），如果存在的话”

例如：给定 3 个名称数组：

```
Ana John Maria
Paul
Sharon Ana John Maria Tiffany Ted 
```

输出将是`Ana John Maria`因为这个序列在第一个和第三个数组中遇到了两次。

我似乎无法为此找到正确的解决方案。

谁能指出我正确的方向？也许这是一个众所周知的算法。谁能给我一个链接？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T16:55:08.130

将数组合并成类似于 trie 的树，其中每个节点不是单个字母，而是一个全名。这应该允许您更轻松地查找和计算子序列。事实上，我强烈怀疑您可以查找此任务的标准算法。

更新：查看使用后缀树的算法：[http ://en.wikipedia.org/wiki/Suffix_tree](http://en.wikipedia.org/wiki/Suffix_tree)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T18:17:51.863

一种简单的方法是获取 3 的序列并将它们放入`HashTable`. 一旦你遇到一个 3 的序列，你就会增加相应的出现计数器。最后只返回最频繁的出现/序列。这是通过扫描`HashTable`具有最大出现值的条目来找到的。Java 中的示例：

```
public class Sequence {  
     public List<String> sequenceOfThree(List<List<String>> names){
          Map<List<String>, Integer> map = new HashMap<List<String>, Integer>();  
          for(List<String> nameList:names){  
              int startIdx = 0;
              int endIdx = 3;
              while(endIdx <= nameList.size()){  
                   List<String> subsequence = nameList.subList(startIdx, endIdx);  
                   //add to map  
                   Integer count = map.get(subsequence);  
                   if(count == null){  
                         count = 0;  
                   }  
                   map.put(subsequence, count + 1);  
                   startIdx++;  
                   endIdx++;  
              }  
          }  
          Integer max = Integer.MIN_VALUE;  
          List<String> result = Collections.emptyList();  
          for(Entry<List<String>, Integer> entries:map.entrySet()){  
              if(entries.getValue() > max){  
                  max = entries.getValue();  
                  result = entries.getKey();  
          }
      }  
      return result;  
  }  
  /**  
   * @param args  
  */  
   public static void main(String[] args) {  
         List<List<String>> names = new ArrayList<List<String>>();  
         names.add(Arrays.asList(new String[]{"Ana", "John", "Maria"}));  
         names.add(Arrays.asList(new String[]{"Paul"}));  
         names.add(Arrays.asList(new String[]  
{"Sharon", "Ana", "John", "Maria", "Tiffany" ,"Ted"}));  
        System.out.println(new Sequence().sequenceOfThree(names));  
   }  
} 
```

# ios - 为什么使用 Sharekit 将图像发布到 Facebook 如此缓慢？

> ID：11973515
> 
> 赞同：1
> 
> 时间：2012-08-15T16:48:46.337
> 
> 标签：ios, facebook, performance, sharekit

我有一个通用 iOS 应用程序，它使用 ShareKit 来共享图像和一行文本：

```
SHKItem *item = [SHKItem image:imageToShare title: shareTitle];
if (destination == K_FACEBOOK) {
  [SHKFacebook shareItem: item];
} 
```

图片是不超过 512 x 512 的 UIImage，文本行小于 200 个字符，因此总有效负载约为 50k。当我分享到电子邮件或推特时，它几乎是即时的，但当我分享到 Facebook 时，最终可能需要 20-30 秒。

在我的 Facebook 共享器配置中，我禁用了 Facebook 应用程序和 Safari，因此所有内容都由 ShareKit 本身呈现。

上传到 Facebook 的过程中是否存在可能导致此延迟的不同之处？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T16:10:02.647

我不熟悉 Sharekit，但 Facebook 上传图片可能需要更长时间的一个原因是 Facebook 本身。他们可能会限制可以发送到其服务器的数据量，类似于 Apple 所做的。尝试使用非常小的图像测试应用程序，看看它是否加快了速度。然后你知道它不在你的尽头。

# jquery - 覆盖锚的href

> ID：11973516
> 
> 赞同：-1
> 
> 时间：2012-08-15T16:48:46.930
> 
> 标签：jquery

> **可能重复：**
> [如何使用 jQuery 更改超链接的 href](https://stackoverflow.com/questions/179713/how-to-change-the-href-for-a-hyperlink-using-jquery)

我有一个锚标签，其 href="" 就像这样 `<a class="SwitchAccountLink" href=""></a>`。我想使用 jQuery 覆盖它并提供不同的 href。是否可以覆盖锚标记的内联href？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T16:50:11.450

您可以使用 jquery`attr()`获取和设置元素属性的值，更多关于[**attr()**](http://api.jquery.com/attr/)因为您的锚标记具有类，我们将使用它来唯一地标识所有具有类的锚`SwitchAccountLink`

```
$('.SwitchAccountLink').attr('href', 'Yourhref'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T16:51:23.857

您可以使用[jQuery 的`.attr()`](http://api.jquery.com/attr/)函数来修改元素的特定属性。

```
$("a.SwitchAccountLink").attr('href',NEW_URL); 
```

此代码将**所有锚标记`SwitchAccountLink`**替换为**带有**`NEW_URL`.

如果您只想更改特定链接，则可能必须提供更独特的`id`属性或将所有链接分组的附加类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T16:50:00.353

```
$('.SwitchAccountLink').attr('href', 'http://www.google.com'); 
```

[http://api.jquery.com/attr/](http://api.jquery.com/attr/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-15T16:50:09.403

你可以改变它`$(".SwitchAccountLink").attr('href','myNewHref');`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-15T16:50:13.137

当然，试试：

```
$('.SwitchAccountLink').attr('href','someurl'); 
```

# c# - 如何对动态创建的控件进行数据绑定？

> ID：11973517
> 
> 赞同：1
> 
> 时间：2012-08-15T16:48:46.357
> 
> 标签：c#, winforms, data-binding, dynamic

过去，我创建了如下数据绑定：

```
textBoxPlatypusName.DataBindings.Add(new Binding("Text", PlatypusInfo, "PlatypusName")); 
```

...但是对于动态创建的控件，这是不可能的（编译器在编译时无法识别“textBoxPlatypusName”）。

试试这个：

```
TextBox tb = (TextBox)this.Controls.Find("textBoxPlatypusName", true).First();
(TextBox)tb.DataBindings.Add(new Binding("Text", PlatypusInfo, "PlatypusName")); 
```

...给我，“*无法将类型 'void' 转换为 'System.Windows.Forms.TextBox'* ”和“*只有赋值、调用、递增、递减和新对象表达式可以用作语句*”

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T16:56:52.550

删除类型转换。它不是必需的，因为`tb`它已经被强类型化为`TextBox`. 无论如何，这里的铸造是错误的。

```
TextBox tb = (TextBox)this.Controls.Find("textBoxPlatypusName", true).First();
tb.DataBindings.Add(new Binding("Text", PlatypusInfo, "PlatypusName")); 
```

例如，如果`tb`输入为`object`or `Control`，并且您需要将其转换为`TextBox`，则需要第二组括号

```
((TextBox)control).SomePropertyOfTextBox = x; 
```

否则，强制转换将应用于整个表达式。在您的情况下，C# 想要将强制转换应用于`Add`方法的结果，该结果是`void`并且不能被强制转换。

# javascript - 如何在 Chrome 的文本区域中“替换”选定的文本范围？

> ID：11973525
> 
> 赞同：5
> 
> 时间：2012-08-15T16:49:25.397
> 
> 标签：javascript, google-chrome, contenteditable

我正在尝试使用Javascript替换Chrome中任意选定TEXTAREA节点中的选定文本（！不是内容可编辑的div！）我在很多地方看到重复替换选定文本的代码片段基本上是这样的：

```
var sel = window.getSelection();
var range = sel.getRangeAt(0);
range.insertNode( document.createTextNode("test ")); 
```

但是，这不适用于 TEXTAREA 或 INPUT TYPE=TEXT 等输入字段。文本插入到 TEXTAREA 之前，而不是在其中。

有一种替代方法可以使用 textarea.selectionStart 和 textarea.selectionEnd 修改文本区域内的选择文本。但是，这些需要弄清楚哪个 textarea 元素实际上是活动/选择的。Chrome/Webkit document.activeElement 好像坏了，坏了好久。我想不出任何解决方法来找到“当前选定的文本区域”。看到这里的错误...

[http://code.google.com/p/chromium/issues/detail?id=14436](http://code.google.com/p/chromium/issues/detail?id=14436)

你可以在这里看到我试图解决的问题的微演示。

[http://dj1.willowmail.com/~jeske/_drop/insertIssue/1.html](http://dj1.willowmail.com/~jeske/_drop/insertIssue/1.html)

[http://ajaxandxml.blogspot.com/2007/11/emulating-activeelement-property-with.html](http://ajaxandxml.blogspot.com/2007/11/emulating-activeelement-property-with.html)

对此有什么想法吗？

给定一个网页，在任意 TEXTAREA 节点中选择了任意位文本，但事先不知道焦点在哪个文本区域，我如何找到活动的文本区域并用其他文本替换选定的文本？

（（仅供参考：我在 Chrome 扩展程序中使用此代码。页面内 javascript 内容脚本正在扩展页面 javascript，所以我不知道页面结构是什么提前。它需要适用于任何网页。 ))

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T00:01:06.900

我认为您可能遇到的问题是在代码运行之前单击按钮会导致活动元素发生变化。如果您改为使用该`mousedown`事件并阻止默认按钮操作，则它在 Chrome 中可以正常工作：

[http://jsfiddle.net/b3Fk5/2/](http://jsfiddle.net/b3Fk5/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T21:11:00.967

从 2012 年 8 月 23 日起，[Chrome 似乎无法正确支持 activeElement](http://code.google.com/p/chromium/issues/detail?id=14436)，因为它通常在不应该设置为“body”时设置为“body”。

也可能存在一些挑战，因为在我的 chrome 扩展中，右键单击以获取上下文菜单可能会改变 activeElement。

解决方案是提供一个`focus`处理程序来在 Chrome 中创建更可靠的 activeElement，然后使用与 TEXTAREA 的直接交互来处理选择替换。

```
var dActiveElement = null;

function _dom_trackActiveElement(evt) {
    if (evt && evt.target) {
      dActiveElement = evt.target;
      console.log("focus on: " + dActiveElement.nodeName + 
                  " id: " + dActiveElement.id);
    } else {
      console.log("focus else..");
    }
}

if (document.addEventListener) {
   document.addEventListener("focus",_dom_trackActiveElement,true);
}

function insertTextAtCursor(text) {
    console.log("insertTextAtCursor : " + text);    

    if (dActiveElement.nodeName.toUpperCase() == "TEXTAREA") {
       console.log("selection in textarea!  id: " + dActiveElement.id);

       var ta = dActiveElement;
       var saveSelectionStart = ta.selectionStart;

       var newvalue = ta.value.slice(0,ta.selectionStart) + 
                         text + ta.value.slice(ta.selectionEnd,ta.length);
       console.log("output : " + newvalue  + ", len : " + newvalue.length);
       var newSelectionEnd = ta.selectionStart + text.length;

       ta.value = newvalue;
       ta.selectionStart = ta.selectionEnd = (newSelectionEnd);       
    }
 } 
```

# php - 在php中创建通过引用传递的变量的实际副本

> ID：11973532
> 
> 赞同：1
> 
> 时间：2012-08-15T16:49:36.297
> 
> 标签：php

实际上，我有一个函数，其中某个变量通过引用作为参数传递。我想在我的函数中创建这个变量的实际副本，而不是引用。我怎样才能在php中完成这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T17:31:15.963

PHP 中的引用不能用作指针；实际上 PHP 中的变量是 zval 结构，它们包含引用计数的信息，变量是引用等等。这对您来说是透明的，当您使用引用时，重要的是您正在修改原始对象，并且可能使用更少的内存。

因此，如果您想使用变量的新副本，以防止修改，您可以执行以下操作：

```
$new_copy = $copy; 
```

或者如果 $copy 是一个对象：

```
$new_copy = clone $copy; 
```

# xslt - 如何根据会话参数设置 xsl 下拉列表的默认值？

> ID：11973547
> 
> 赞同：0
> 
> 时间：2012-08-15T16:50:25.927
> 
> 标签：xslt, weblogic, netweaver

我有一个 XSL 下拉列表，需要将其默认为基于先前选择的值的值。基本上我有一个工作中心被选中并成为会话参数。当我从原始页面打开另一个页面时，我需要它显示带有默认会话参数的下拉列表，这将是许多列表中的项目之一。我是 xsl 和 xslt 的新手。代码如下：

```
<select id="wcfound"  name="wcfound" style="height:40;width:126;"  tabindex="40" >
    <option value="ND">SelectWorkCenter</option>
        <xsl:for-each select="Row">
    <option>
        <xsl:value-of select="work_center"/> - <xsl:value-of select="description"/>
    </option>
        </xsl:for-each>
</select> 
```

它通过 servlet 进行处理和显示：

```
<SERVLET NAME="Illuminator">
<PARAM NAME="QueryTemplate"VALUE="APEX/Queries/EX/workCenterSelectionQuery"/>
<PARAM NAME="StyleSheet" VALUE="/XMII/CM/APEX/xsl/page/qualitywcfound.xsl"/>
<PARAM NAME="Param.1" VALUE="{plantId}"/>
<PARAM NAME="Content-Type" VALUE="text/xml"/>
</SERVLET> 
```

# php - 如何切片数组然后洗牌

> ID：11973548
> 
> 赞同：1
> 
> 时间：2012-08-15T16:50:32.827
> 
> 标签：php

我有一个函数可以从字符串中创建一个单词数组，计算每个单词出现的频率，然后选择前 21 个单词。

我遇到的麻烦是我需要洗牌这 21 个单词。如果我尝试 shuffle() 我的 foreach 循环将输出出现次数而不是单词本身。

有人可以告诉我如何做到这一点吗？这是我现有的功能：

```
$rawstring = implode(" ", $testimonials);

$rawstring = filterBadWords($rawstring);

// get the word=>count array
$words = array_count_values(str_word_count($rawstring, 1));

// sort on the value (word count) in descending order
arsort($words);

// get the top frequent words
$top10words = array_slice($words, 0, 21);
shuffle($top10words);

foreach($top10words as $word => $value) {
    $class = getClass($value);
    echo "<a href=\"#\" id=\"" . $word . "\" class=\"" . $class . "\">" . $word . "</a>";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T16:55:18.073

你可以使用

```
function shuffle_assoc( $array ) { 
    $keys = array_keys( $array ); 
    shuffle( $keys ); 
    return array_merge( array_flip( $keys ) , $array ); 
} 
```

例如：

```
$top10words = array_slice($words, 0, 21);
$top10words = shuffle_assoc($top10words);

foreach($top10words as $word => $value) {
    $class = getClass($value);
    echo "<a href=\"#\" id=\"" . $word . "\" class=\"" . $class . "\">" . $word . "</a>";
} 
```

# c# - 获取程序集版本信息

> ID：11973549
> 
> 赞同：1
> 
> 时间：2012-08-15T16:50:37.240
> 
> 标签：c#

我们有一个包含大约 30 个项目的大型解决方案。我们还有一些通用代码实用程序，作为该实用程序类的一部分，我们包含了一个`GetAssemblyVersionInfo`返回该程序集版本信息的方法。但是，我们想要获取项目的程序集的程序集**版本信息，而***不是实用程序 DLL*。有没有一种实用函数可以根据执行返回另一个程序集的版本信息而不是传递文件名？

编辑：

对于那些好奇的人，我使用以下方法解决了它：

```
System.Reflection.Assembly.GetCallingAssembly().GetName().Version 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T16:57:23.227

如果您有程序集名称，则可以将其动态加载到当前 AppDomain 以检索版本信息。

```
Assembly.LoadFrom(string.Format("{0}.dll", "assemblyshortname")).GetName().Version 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T16:55:45.087

我认为你应该使用`GetEntryAssembly()`而不是`GetCallingAssembly()`.

# http - 将请求重定向到不同的监听器 nginx

> ID：11973550
> 
> 赞同：1
> 
> 时间：2012-08-15T16:50:39.173
> 
> 标签：http, https, nginx, reverse-proxy

我有两个监听器 80 和 777。端口 80 充当反向代理。并且端口 777 做了一些额外的事情，并希望重定向到端口 80。如何重定向到 nginx 中的不同端口？我正在尝试重写，但后来发现它仅用于更改路径

```
 ###
   server{
            listen  80;
            server_name     _;
            location / {
                    proxy_pass "http://upstream0;#" is included since links are not allowed in the post
            }

    }

    server{
            listen  777;
            server_name     _;
            #doing some other extra stuf
            //Want to redirect to port 80 under some condition
    } 
```

可能吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T18:51:32.000

就 nginx 而言，将某些东西传递给另一个 nginx 侦听器/服务器并传递一些东西 apache/mongrel/thin/... 或任何其他 http 服务器没有真正的区别，换句话说，如果你想将东西传递给另一个侦听器你会使用 proxy_pass

所以你想要做的是

```
 location / {
   if (some condition) {
     proxy_pass http://$host:80
   }
 } 
```

见[http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_pass](http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_pass)

# matlab - matlab上的视频阅读操作执行同步

> ID：11973552
> 
> 赞同：0
> 
> 时间：2012-08-15T16:50:47.427
> 
> 标签：matlab, video-processing, execution

我有这两行

```
vid = 'videos/FL000071466.webm';
readerobj = VideoReader(vid);
vidFrames = read(readerobj); 
```

这些行有时效果很好，但大多数时候在控制台上会出现这个问题。

```
Error using VideoReader/read (line 86)
The frame range requested is beyond the end of the file.

Error in extraction (line 11)
vidFrames = read(readerobj); 
```

但如果我删除';' 和代码末尾的字符`readerobj = VideoReader(vid);`开始在控制台代码上正常输出。

我猜原因是该 `vidFrames = read(readerobj);`行之前开始工作，`readerobj = VideoReader(vid);`因此它会导致在 readerobj 上进行所有配置之前读取图像。

你觉得我怎么能解决这个问题？我需要在它们之间放置执行暂停代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T16:23:49.883

这是关于我目前使用的版本。我需要使用 > 7.4 的版本才能使 matlab 与 videoreader 对象完全兼容。

# c++ - c++ stl迭代器

> ID：11973554
> 
> 赞同：1
> 
> 时间：2012-08-15T16:50:56.467
> 
> 标签：c++, stl, set

尝试对整数集的三维向量使用迭代器时遇到很多错误。请参阅以下代码（这只是选择部分，因为整个事情太长了；我认为这应该足以看出有什么问题，但如果不是，请告诉我）：

```
vector<vector<vector<set<int> > > > particles_celllist;
vector<vector<vector<set<int> > > >::iterator cell_iter;
map<int,map<int,Particle> > particle_grid;

for (cell_iter=particles_celllist[wx][wy][wz].begin();cell_iter!=particles_celllist[wx][wy][wz].end();cell_iter++)
{
    double distance_to_cell=sqrt(pow(particles[*cell_iter].position().y()-(wy)*ygridlength,2)+
        pow(particles[*cell_iter].position().z()-(wz)*zgridlength,2));
    if (distance_to_cell<input_data.diam_large())
    {
        particle_grid[box_counter][*cell_iter]=particles[*cell_iter];
    }
} 
```

注意：wx、wy、wz 和 box_counter 是整数，ygridlength 和 zgridlength 是双精度数，而 Particle::position::y（或 ::z）和 input_data::diam_large 返回双精度数。

我收到很多错误：

> “cell_iter=particles_celllist[wx][wy][wz].begin()”中的运算符“=”不匹配
> 
> “cell_iter!=particles_celllist[wx][wy][wz].end()”中的运算符“!=”不匹配
> 
> 每当我使用 [*cell_iter] 调用某些东西时，运算符“[]”都不匹配

我觉得错误以某种方式源于迭代器本身，但我无法弄清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T16:54:29.643

你想要`set<int>::iterator cell_iter;`。只需再次仔细查看`begin()`您正在调用的函数。

在 C++11 中你当然会说

```
auto cell_iter = particles_celllist[wx][wy][wz].begin() 
```

并且从未注意到这很难:-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T16:54:59.173

`particles_celllist[wx][wy][wz]`是类型的`set<int>`，所以`particles_celllist[wx][wy][wz].begin()`是类型的`set<int>::iterator`

# css - 基于百分比的布局差距

> ID：11973556
> 
> 赞同：2
> 
> 时间：2012-08-15T16:51:01.910
> 
> 标签：css, responsive-design

我在使用基于百分比的布局时遇到问题。这是我的代码[http://jsfiddle.net/uHkXH/](http://jsfiddle.net/uHkXH/)

如果您在 Mac 上使用 Safari 或 Opera，或在 Windows 上使用 IE7，或 iPhone iPad，您会在右侧看到一个空白。但是四个框的宽度、内边距和外边距总共应该是 100%。我不明白为什么还有差距。

有谁可以解释这个问题并帮助我解决它？真的非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T17:14:16.820

某些浏览器试图舍入子像素（十进制）宽度是一个问题。百分比会自动转换为像素。

如果您将jsfiddle中元素的计算宽度加起来，它们不会加到容器元素的宽度上。

这是更多信息 [http://css-tricks.com/percentage-bugs-in-webkit/](http://css-tricks.com/percentage-bugs-in-webkit/)

和

[如何解决 IE CSS 百分比舍入问题？](https://stackoverflow.com/questions/1084469/how-do-i-get-around-the-ie-css-percentage-rounding-problem)

和

> > 你好，
> 
> 我没有关于浏览器做什么的确切细节，但我过去已经注意到以下内容。
> 
> 处理宽度像素时：
> 
> Firefox 会将 125.5 像素四舍五入为 126 像素，而 125.4 像素将向下舍入为 125 像素。
> 
> Opera 会将 126.9px 视为 126px （但会将 126.999 视为 127px !!）
> 
> IE 会忽略所有小数点并将 126.9999px 视为 126px。
> 
> 在处理百分比时。
> 
> Opera 似乎完全没有注意到百分比的小数部分。例如，33.9% 仅等于 33%。因此，对于 33.333% 的 33.333% 的三个浮点数，Opera 将在右边缘显示 10px 的间隙。
> 
> Mozilla 似乎保留了所用百分比的小数部分的总和，并且在整个宽度上最多只有 1 个像素。
> 
> IE rounds each portion up or down individually and therefore for three floats will possibly be 3 pixels too big thus causing a float drop.
> 
> To stop the floats dropping in ie you can apply a negative right margin to the last float that will soak up the extra space. (margin-right:-3px).
> 
> For opera there is no cure but perhaps to make the last element fit the space required or to make the elements bigger than needed and apply a larger right negative margin.
> 
> This is the reason that most people simply use 33% because then they know it will fit all browsers even if there is a slight gap which depending on the situation may not be noticable. (e.g. the background color of the element behind may hide it.)

# javascript - 使用嵌套回调的值作为父函数的返回

> ID：11973566
> 
> 赞同：0
> 
> 时间：2012-08-15T16:51:39.580
> 
> 标签：javascript, image

所以，我有这个：

```
function isOnline(sURL) {

    var bOnline,
        oImage = document.body.appendChild( document.createElement("img") );

    oImage.onload = function() {

        bOnline = true;

    };

    oImage.onerror = function() {

        bOnline = false;

    };

    oImage.src = sURL;

    return bOnline;

} 
```

...而且我之前遇到过这个问题，但我在这里有点迷路。如何在正确的时间获得`bOnline`传递给的值`isOnline`？正如预期的那样，它`undefined`（最初）返回。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T16:58:30.767

始终建议在以下情况下使用回调函数

```
var online = false;

isOnline("htp://....", function(){
   online = true;
}, function(){
   online = false;
});

function isOnline(sURL, onLoad, onError) {

    var oImage = document.body.appendChild( document.createElement("img") );

    oImage.onload = onLoad;

    oImage.onerror = onError;

    oImage.src = sURL;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T16:58:58.737

我强烈建议您使用回调来继续您的逻辑：

```
 function isOnline(sURL, callbacks){
     var bOnline,
         oImage = document.body.appendChild( document.createElement("img") );
     oImage.onerror = callbacks.error;
     oImage.onload = callbacks.success;
     oImage.src = sURL;
 } 
```

而不是这样的电话：

```
if(isOnline('some-src')) {
    // good stuff
} else {
   // bad stuff
} 
```

您应该使用以下功能：

```
isOnline('some-src',{
    success : function(){
        // yey! image is online
    },
    error : function(){
       // eerror loading image. boo :((
    }
}); 
```

如果您仍想在不使用回调的情况下在某个时间点进行测试，则可以返回实际的图像对象并在其上固定一个`ready`或`error`标志：

```
function isOnline(sURL) {
    var bOnline,
        oImage = document.body.appendChild( document.createElement("img") );
    oImage.ready = oImage.error = false;
    oImage.onload = function(){
        oImage.ready = true;
    }
    oImage.error= function(){
        oImage.error = true;
    }
    oImage.src = sURL;
    return oImage;
}

var img = isOnline('some-src');
// .. after some computing
if(img.ready) {
    // yey image  has loaded
} else if(img.error) {
   // damn error :(
} else {
   // still not loaded :-?
} 
```

# postgresql - 从 Postgres 数据文件恢复数据

> ID：11973567
> 
> 赞同：1
> 
> 时间：2012-08-15T16:51:48.957
> 
> 标签：postgresql

得到了 Postgres 损坏的系统（原因是 RAID），没有任何备份。

尝试使用 Postgres 将数据放入另一台计算机（并进行备份）。

但是总是当我设置数据目录并运行 postgres 时，我收到了消息

```
GET FATAL:  database files are incompatible with server
2012-08-15 19:58:38 GET DETAIL:  The database cluster was initialized with BLCKSZ 16777216, but the server was compiled with BLCKSZ 8192.
2012-08-15 19:58:38 GET HINT:  It looks like you need to recompile or initdb. 
```

这是非常奇怪的数字 16777216（2 到 24 次方 - 到大）。

但是我无法在编译时重置默认值 8192（使用 --with-blocksize= 无效；BLCKSZ - 我在头文件中找不到它）

）。

有什么方法可以提取数据？

**这是环境和情况：**

硬盘：RAID 1，阵列中有 3 个 SAS 磁盘

操作系统：ubuntu 10.04.04 amd64

Postgres：9.1（通过 apt-get（我们将存储库链接更改为更高版本的 Ubuntu））

系统坏了 - 一段时间后

> AAC：主机适配器 BLINK LED 0x56
> AACO：适配器内核恐慌 56

（文件系统或硬件错误）

不知何故，我们得到了数据目录。pg_conroldata 显示：

pg_control 版本号：903
目录版本号：201105231
数据库系统标识符：5714530593695276911
数据库集群状态：关闭
pg_control 最后修改时间：2012 年 8 月 15 日星期二 11:50:50
最新检查点位置：1B595668/2000020
先前检查点位置：0/0
最新检查点REDO 位置：1B595668/2000020
最新检查点的 TimeLineID：1
最新检查点的 NextXID：0/4057946
最新检查点的 NextOID：40960
最新检查点的 NextMultiXactId：1
最新检查点的 NextMultiOffset：0
最新检查点的最旧XID：670
最新检查点最旧XID 的数据库：1344846103
最新检查点最旧ActiveXID：0
最新检查点时间：2012 年 8 月 15 日星期二 11:50:50
最小恢复结束位置：0/0
备份开始位置：0/0
当前 wal_level 设置：最小
当前 max_connections 设置：100
当前 max_prepared_xacts 设置：0
当前 max_locks_per_xact 设置：64
最大数据对齐：8
数据库块大小：16777216
每个大关系段的块：131072
WAL 块大小：8192
每个 WAL 段的字节数：16777216
标识符的最大长度：64
索引中的最大列数：2387576020
TOAST 块的最大大小：0
日期/时间类型存储：浮点数
Float4 参数传递：通过引用
Float8 参数传递：通过引用

首先，我努力在 Ubuntu 服务器（硬盘 - 简单串行 2、Ubuntu 10.04 i386、Postgres 9.1）中升级 DB，并在上面遇到相同的异常（使用 BLCKSZ）。

这就是为什么我在虚拟机中部署了带有英文 Postgres 9.1 的 Ubuntu 10.04 amd64（因为在上一步的错误日志中得到了“ **？ ”而不是俄罗斯符号）得到了同样的异常（使用 BLCKSZ）。**

Ather 已删除 apt-get postgres 版本并按照文档[http://www.postgresql.org/docs/9.1/static/installation.html](http://www.postgresql.org/docs/9.1/static/installation.html)中的描述对其进行编译。玩`configure --with-blocksize=BLOCKSIZE`没有效果 - 得到同样的错误

## 对不起，为了帖子。

pg_contol 被一些操作破坏了。

Sow，集群通过 pg_resetxlog 成功恢复，并带有初始数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T20:33:28.470

有关配置内核资源的详细信息，请参见[此处](http://www.postgresql.org/docs/9.1/static/kernel-resources.html)。也许这个新操作系统的默认/当前设置不允许 postmaster 启动。

[以下](http://www.postgresql.org/docs/9.1/static/runtime-config-preset.html)是有关 BLCKSZ 参数的含义和上下文的详细信息。运行 64 位版本的 PostgreSQL 失败的系统是 32 位版本吗？如果可能，尝试获取有关故障系统的 PostgreSQL 的版本信息可以阐明问题。让我们知道使用的版本、构建和操作系统。是自定义构建吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T00:24:07.833

16Mb 的块大小真的很奇怪，因为这两个值看起来也完全是假的：

> ```
> Maximum columns in an index:       2387576020
> Maximum size of a TOAST chunk:     0 
> ```

...在花时间编译具有非标准块大小的 postgres 之前，您可能想质疑这些数据的完整性。

如果查看关系对应的文件大小，它们是 16Mb 还是 8Kb 的倍数？如果数据库有一些千兆字节的表，那么磁盘上的截断大小（postgres 将数据拆分为多个文件的大小）似乎是多少？这应该等于`data block size`* `Blocks per segment of large relation`。在默认安装中，它是 1Gb。

# java - 正则表达式 1 到 8 个字符的条件不起作用

> ID：11973574
> 
> 赞同：0
> 
> 时间：2012-08-15T16:52:07.833
> 
> 标签：java, regex

我正在尝试匹配字符串，

1.  应至少包含一个非空格字符

2.  字符串长度应为 1 到 8 个字符，

我想知道为什么当我想限制为 1 到 8 个字符时下面的代码不起作用。

```
.*\S.{1,8} 
```

应该匹配，

```
abcdefge

 abcdefg   - first character is space, Any number of spaces can be there, but atleaset one non space character should be there

       a 
```

不应该匹配，

```
 - All spaces
 abcdefghijklm - Exeeds more then 8 characters 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T16:58:43.440

非正则表达式非常简单明了：

```
s.length() <= 8 && s.trim().length() > 0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T17:05:36.630

对您的第一个标准使用前瞻，并为第二个标准使用量化的“任何”字符与开始和结束锚点相结合：

```
/^(?=.*\S).{1,8}$/ 
```

（这未经测试，所以我为错误道歉）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T17:05:05.423

**1.**我认为有更好的选择来做到这一点。

**2.**首先检查字符串的**长度是否在 1 到 8 之间，**

**3.**如果是，则使用`!Characters.isWhitespace()`方法检查其是否**为非空格字符。**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-15T17:20:39.297

采用：

```
str.matches("(?=.*[^ ]).{1,8}") 
```

# php - 我可以仅通过数据中的字母和数字查询列吗？例如 preg_replace

> ID：11973575
> 
> 赞同：1
> 
> 时间：2012-08-15T16:52:12.777
> 
> 标签：php, mysql, sql, regex, preg-replace

我发现以下代码从 php var 中删除了除字母和数字之外的所有内容，完美！

```
$string = "remove ever^&amp;thing but *&amp;^*&amp;%Â£ letters &amp; numbers*&amp;^*";
$cleansedstring = preg_replace('#\W#', '', $string);
echo $cleansedstring; 
```

但我想使用相同的规则查询 mysql 中的列。目的是从等式中删除所有与号、撇号、连字符等。

现在我使用一些难看的 REPLACE 语句！

```
AND Replace(Replace(Replace(Replace(Replace(MYColumn, '&', ''), '-', ''), ' ', ''), '(', ''), ')', '') = 
```

我想要一个仅查看数字和字母的防弹查询！

:)

编辑：我想我应该进一步解释我的问题，也许你们中的一个人可以提出其他建议......

我通过提取长公司名称并清理它们以获得对 seo 友好的 URL，在我的网站上生成链接。所以说我们有“比尔和本的花盆/花园服务”，我最终到他们页面的 URL 看起来像 /bill-bens-flower-pot-garden-service.htm

该 URL 是一个重写的 URL，因此实际页面类似于 company.php?name=bill-bens-flower-pot-garden-service

我需要获取“名称”并查询数据库以返回他们的公司详细信息。但是得到：

比尔本斯花盆花园服务

返回以下详细信息：

比尔和本的花盆/花园服务

似乎并不总是防弹的。

感觉我的代码在我到处进行的替换中有点混乱。我的理论是去掉所有非字母和数字数据并以这种方式比较字符串：

WHERE Company = 'billbensflowerpotgardenservice' - 但我似乎无法在字段名称本身上这样做？

有什么建议么！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T17:02:36.047

从 mysql 5.1 开始，您可以使用正则表达式。这是文档页面：http: [//dev.mysql.com/doc/refman/5.1/en/regexp.html](http://dev.mysql.com/doc/refman/5.1/en/regexp.html)

# jsf-2 - 访问 EL 中的 java.util.Calendar 字段

> ID：11973579
> 
> 赞同：1
> 
> 时间：2012-08-15T16:52:31.100
> 
> 标签：jsf-2, calendar, el

我们必须在 Facelets 页面上显示年份字段。

```
<h:outputText value="#{dateTOloginDate.get(Calendar.YEAR)}"/> 
```

这总是返回 1 而不是年份值。我怎样才能实现它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T21:59:45.710

是[`Calendar.YEAR`](http://docs.oracle.com/javase/6/docs/api/java/util/Calendar.html#YEAR)一个常量字段值。默认情况下，常量字段值在 EL 范围内根本不可用。但是，正如您自己遇到的那样，硬编码的常量值确实有效。

有几种方法可以以更干净的方式实现这一目标：

1.  改为使用[`<f:convertDateTime>`](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/f/convertDateTime.html)。您只需要[`java.util.Date`](http://docs.oracle.com/javase/6/docs/api/java/util/Date.html)通过[`Calendar#getTime()`](http://docs.oracle.com/javase/6/docs/api/java/util/Calendar.html#getTime%28%29).

    ```
    <h:outputText value="#{dateTOloginDate.time}">
        <f:convertDateTime pattern="yyyy" />
    </h:outputText> 
    ```

2.  使用[OmniFaces](http://omnifaces.org) [`<o:importConstants>`](http://showcase.omnifaces.org/taghandlers/importConstants)。它允许您将给定类型的常量字段值导入 EL 范围。这样您就可以准确地使用预期的语法。

    ```
    <o:importConstants type="java.util.Calendar" />
    ...
    <h:outputText value="#{dateTOloginDate.get(Calendar.YEAR)}" /> 
    ```

    只是，这是 IMO 的一个极端用例。我个人更喜欢这种`<f:convertDateTime>`方式。如果您只是使用`java.util.Date`而不是笨拙的`java.util.Calendar`. 我看不出拥有`java.util.Calendar`as 模型值类型有什么好处。

# c# - C# lambda 正文到字符串

> ID：11973583
> 
> 赞同：1
> 
> 时间：2012-08-15T16:52:48.823
> 
> 标签：c#, reflection, lambda

我有以下 lambda 表达式

```
 var expr = a => (a.Name == "Alex" && a.DateCreated < DateTime.Now.AddHours(2)) 
```

我想在字符串中获取具有运行时值的表达式主体，如果我调用 expr.Body.ToString() 我得到以下字符串作为回报。

```
 {((a.Name == "Alex") AndAlso (a.DateCreated < DateTime.Now.AddHours(2)))} 
```

所以只是为了澄清我希望得到 DateTime.Now.AddHours(2) 的值。在过去的几个晚上，我一直在疯狂地搜索网络，但没有任何结果。这可能是因为我不知道要搜索什么。希望你们能帮忙:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T16:55:14.710

您需要将 DateTime 调用移出 lambda：

```
DateTime endDate = DateTime.Now.AddHours(2);
Expression<Func<YourClass, bool>> expr = a => (a.Name == "Alex" && a.DateCreated < endDate); 
```

即使这样，您也会在表达式中显示闭包，而不是值。

要将特定日期作为打印值，您需要一个常量，即：

```
Expression<Func<YourClass, bool>> expr = a => (a.Name == "Alex" && a.DateCreated < DateTime.Parse("10/2/2012")); 
```

这将显示`DateTime.Parse`调用，但至少仍然显示值（因为它是表达式中的常量。）

构建表达式时，`DateTime`属性和方法 ( `Now`and `AddHours`) 成为表达式本身的一部分。这也发生在闭变量上。该表达式必须包含构建完整 lambda 所需的所有语句，包括`DateTime.Now.AddHours(2)`.

这是设计使然 -`DateTime.Now.AddHours()`如果您将其转换为实体框架查询，则需要在服务器上解决，例如，因为[AddHours 是 Canonical Functions 之一](http://msdn.microsoft.com/en-us/library/bb738563.aspx)。如果将其替换为常数，则其行为将不符合预期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T17:35:01.383

下面的代码有效，但我不确定你是否*真的*想使用它。

```
Expression<Func<A,bool>> expr = a => (a.Name == "Alex" && a.DateCreated < DateTime.Now.AddHours(2));

var expr1 = expr.Body as BinaryExpression;
var expr2 = expr1.Right as BinaryExpression; //a.DateCreated < DateTime.Now.AddHours(2)
var expr3 = expr2.Right as MethodCallExpression; //DateTime.Now.AddHours(2)

var obj = expr3.Object as MemberExpression; //DateTime.Now
var pi = obj.Member as PropertyInfo;
var dt = pi.GetValue(null); //Call DateTime.Now

var arg = expr3.Arguments[0] as ConstantExpression;
var result = expr3.Method.Invoke(dt, new object[] { arg.Value }); //Call AddHours 
```

-

```
public class A
{
    public string Name { set; get; }
    public DateTime DateCreated { set; get; }
} 
```

# xcode - Xcode malloc 错误调试

> ID：11973584
> 
> 赞同：0
> 
> 时间：2012-08-15T16:52:51.380
> 
> 标签：xcode, debugging, malloc

我有大量代码，它会引发以下错误/异常。

```
malloc: *** error for object 0xce52964: incorrect checksum for freed object - object was probably modified after being freed.
*** set a breakpoint in malloc_error_break to debug 
```

如果我在启用所有内存管理工具（例如 NSZombies 等）的情况下运行它，那么它运行得非常好。

我添加了一个`Symbolic Exception Breakpoint`type `malloc_error_break`，它停在一个随机行上（`NSLog(@"part6");`我用它来帮助调试我的代码，通过 将它分成几个部分`NSLog`）。

我也试过输入调试器，这就是我得到的：

```
po 0xce52964
(int) $3 = 216344932 [no Objective-C description available] 
```

有谁知道我如何尝试进一步调试这个？我不确定我的代码中是什么导致了这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T16:56:25.563

启用 malloc 堆栈日志记录（可以在 Xcode 中完成 - 僵尸下方的几个复选框）。

然后运行/测试您的程序 - 重现问题。现在使用`malloc_history`util 获取有关 malloc 在消息中标记的分配的更多信息。

# c# - 回发后文本框失去价值

> ID：11973586
> 
> 赞同：1
> 
> 时间：2012-08-15T16:52:59.153
> 
> 标签：c#, asp.net

我的页面是一个注册页面，用户在其中输入电子邮件地址和密码。这是我的点击事件：

```
protected void btnRegister_Click(object sender, EventArgs e)
{
    MembershipCreateStatus createStatus = MembershipCreateStatus.ProviderError;

    MembershipUser user = Membership.CreateUser(txtUsername.Text,
        txtPassword.Text, txtEmail.Text, null, null, true, out createStatus);

    if (createStatus != MembershipCreateStatus.Success)
    {
        cvUser.IsValid = false;
        cvUser.ErrorMessage = "Invalid";
    }
    else
        Response.Redirect("Home");
} 
```

这是我的页面：

```
<asp:ValidationSummary ID="vs" runat="server" />

<asp:TextBox ID="txtUsername" runat="server" />
<asp:TextBox ID="txtEmail" runat="server" />
<asp:TextBox ID="txtPassword" runat="server" TextMode="Password" />

<asp:Button ID="btnRegister" runat="server" OnClick="btnRegister_Click" />
<asp:CustomValidator ID="cvUser" runat="server" ControlToValidate="txtEmail" /> 
```

`cvUser`是我正在使用的页面上的自定义验证器，因此错误消息将显示在我的`ValidationSummary`.

所以当用户创建失败时就会出现问题。我设置`cvUser.IsValid`为 false 以便显示错误，然后重新加载页面。只有当页面重新加载时，我的文本框中的所有数据都消失了。

有没有办法维护这些数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T17:01:42.940

回发后，有必要手动重新填充表单项，或者确保它们的值不会被覆盖。后者可以通过在 Page_Load 方法中放置任何表单填充代码来完成，但包装在 if (!IsPostBack) {} 块中。

```
if (!IsPostBack)
{
  //populate form items
}
else //this is a post back
{
  //do nothing
} 
```

# php - PHP ereg_replace 允许空格

> ID：11973593
> 
> 赞同：4
> 
> 时间：2012-08-15T16:53:36.170
> 
> 标签：php, preg-replace

使用 preg_replace 我只想允许字母数字和空格，但 `ereg_replace("[^A-Za-z0-9\w\]` 删除所有空格。

我能做些什么来修复它？

提前致谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-15T16:58:05.547

你忘了一个空格

```
[^A-Za-z0-9\w\ ]
______________^ 
```

例如：

```
$returnValue = preg_replace('@[^A-Za-z0-9\w\ ]@', '', 'I forgot a %space!!!');
// I forgot a space 
```

# java - 为什么 SocialAuth 说“facebook 不是提供者或有效的 OpenId URL”？

> ID：11973594
> 
> 赞同：1
> 
> 时间：2012-08-15T16:53:38.400
> 
> 标签：java, coldfusion, railo, socialauth

通过[Railo CFML Engine](http://getrailo.org)使用[SocialAuth: v2.3](http://code.google.com/p/socialauth/)，我收到以下异常：

```
Railo 3.3.4.003 Error (org.brickred.socialauth.exception.SocialAuthException)
Message     facebook is not a provider or valid OpenId URL
Cause   org.brickred.socialauth.exception.SocialAuthException
Stacktrace  The Error Occurred in
/Users/rountrjf/Sites/ccpd-dev/controllers/socialauth.cfc: line 31

    29: manager.setSocialAuthConfig(config);
    30: successUrl = "http://dev.ccpd.uc.edu/socialauth/success";
    31: providerUrl = manager.getAuthenticationUrl("facebook", successUrl); 
```

**这是我的 CFC 代码片段：**

```
public string function login() {
    id = params.key;
    configFile = expandPath("/SocialAuth/oauth_config.properties");
    inputFile = createObject("java","java.io.File").init(configFile);
    inputStream = createObject("java", "java.io.FileInputStream").init(inputFile);

    SocialAuthConfig = createObject("java","org.brickred.socialauth.SocialAuthConfig").init();
    config = SocialAuthConfig.getDefault();
    config.load(configFile);

    SocialAuthManager = createObject("java","org.brickred.socialauth.SocialAuthManager").init();
    manager = SocialAuthManager;
    manager.setSocialAuthConfig(config);
    successUrl = "http://dev.ccpd.uc.edu/socialauth/success";
    providerUrl = manager.getAuthenticationUrl("facebook", successUrl); 
```

为什么会抛出这个错误？“configFile”有一个“facebook”属性，它的配置如[“入门”指南的第 3 步](http://code.google.com/p/socialauth/wiki/GettingStarted#Step_3._Implementation)所示。

**我正在使用的配置文件**

```
#google
www.google.com.consumer_key = opensource.brickred.com
www.google.com.consumer_secret = YC06FqhmCLWvtBg/O4W/aJfj
#you can set custom permission by using custom_permissions with provider prefix.
#www.google.com.custom_permissions = http://www.google.com/m8/feeds/,http://picasaweb.google.com/data/

#yahoo 
api.login.yahoo.com.consumer_key = dj0yJmk9VTdaSUVTU3RrWlRzJmQ9WVdrOWNtSjZNMFpITm1VbWNHbzlNQS0tJnM9Y29uc3VtZXJzZWNyZXQmeD1iMA--
api.login.yahoo.com.consumer_secret = 1db3d0b897dac60e151aa9e2499fcb2a6b474546

#twitter
twitter.com.consumer_key = E3hm7J9IQbWLijpiQG7W8Q
twitter.com.consumer_secret = SGKNuXyybt0iDdgsuzVbFHOaemV7V6pr0wKwbaT2MH0

#facebook
graph.facebook.com.consumer_key =       152190004803645
graph.facebook.com.consumer_secret = 64c94bd02180b0ade85889b44b2ba7c4
#you can set custom permission by using custom_permissions with provider prefix.
#graph.facebook.com.custom_permission = publish_stream,email,user_birthday,user_location,offline_access

#hotmail
consent.live.com.consumer_key = 000000004403D60E
consent.live.com.consumer_secret = cYqlii67pTvgPD4pdB7NUVC7L4MIHCcs

#AOL
api.screenname.aol.com.consumer_key = ab1QxoYXlT-x-ARL
api.screenname.aol.com.consumer_secret = 000

#LinkedIn
api.linkedin.com.consumer_key = 9-mmqg28fpMocVuAg87exH-RXKs70yms52GSFIqkZN25S3m96kdPGBbuSxdSBIyL
api.linkedin.com.consumer_secret = e6NBqhDYE1fX17RwYGW5vMp25Cvh7Sbw9t-zMYTIW_T5LytY5OwJ12snh_YftgE4

#MySpace
api.myspace.com.consumer_key = 29db395f5ee8426bb90b1db65c91c956
api.myspace.com.consumer_secret = 0fdccc829c474e42867e16b68cda37a4c4b7b08eda574fe6a959943e3e9be709

#FourSquare
foursquare.com.consumer_key = JQKEM1PHWFW4YF2YPEQBRRESXE3SBGNCYJWWDTZKF3IZNJ3V
foursquare.com.consumer_secret = 4IILLDFDVPP2LC554S4KXKETQNTDKPDSEVCKVHA2QEHKYBEQ

#Yammer
www.yammer.com.consumer_key=5zyIkp12TrkulSRbSegQ
www.yammer.com.consumer_secret=zUcCB9kqWhI1IiTAJbl9QdG2AWcUJMDWp3Qyv5VJJw

#Mendeley
api.mendeley.com.consumer_key=f31077a7576d5e02537e232eb649403c04fce1dd0
api.mendeley.com.consumer_secret=1810bc92d4625f673e4ff35cb248aab3

#Salesforce
login.salesforce.com.consumer_key = 3MVG9Y6d_Btp4xp4yFMR0tPSndkAVu4OBejuYcL2iGFC68tA49PknWKX20XdPl5s1iwWldyuAbSINWHbB2Jcu
login.salesforce.com.consumer_secret = 1993703471433041656 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T23:12:24.687

我建议使用 Constants.FACEBOOK 这实际上是“facebook”，但如果它不是它有一个应该起作用的值。

出现错误的一个可能原因是您没有使用正确的输入文件。

确保配置`config`加载正确，尝试调用`config.getProviderConfig(Constants.FACEBOOK)`看看是否返回`null`

最后你可以试试这个。这就是我使用和工作的。

```
SocialAuthConfig config = new SocialAuthConfig();
SocialAuthManager socialAuthManager = new SocialAuthManager();

config.load(inputStream);
socialAuthManager.setSocialAuthConfig(config); 
```

我真的不知道 Railo CFML Engine 以及它的作用，所以我无能为力。也许`.getDefault()`从`config = SocialAuthConfig.getDefault();`?

# javascript - 将 getUserMedia 流式传输到 Icecast 服务器？

> ID：11973597
> 
> 赞同：5
> 
> 时间：2012-08-15T16:53:43.937
> 
> 标签：javascript, video-streaming, html5-video, icecast, webrtc

有没有办法将 webrtc 的 getUserMedia（视频和音频）创建的本地 blob 流式传输到 Icecast 服务器，从而可以使用 HTML5 进行直播？

特别是在以下示例中（来自 Justin Uberti 的 2012 Google I/O 视频），我可以捕获音频/视频并在本地视频元素中播放：

```
<script type="text/javascript">
var onGotStream = function(stream) {
  var url = webkitURL.createObjectURL(stream);
  video.src = url; //
}
navigator.webkitGetUserMedia({video: true, audio: true}, onGotStream, null);
<script>

<video = id='video' autoplay='autoplay'/> 
```

但是，我不想将视频 src 设置为本地 blob，而是将流发送到 Icecast 服务器，然后使用指向 Icecast 服务器的视频元素播放该实时流。

这可能吗？我该怎么办？

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-06-19T08:37:23.240

看看这个

[https://github.com/webcast/webcaster](https://github.com/webcast/webcaster)

它捕获 getUserMedia PCM，在浏览器中使用 JavaScript 将其编码为 MP3 格式，通过 Websockets 将编码的 MP3 数据发送到 Liquidsoap [http://liquidsoap.fm/](http://liquidsoap.fm/)，然后 Liquidsoap 可以将该流广播到 Icecast 服务器。

# c++ - 在 Linux/Windows 上使用 c++ 的 GUI 应用程序

> ID：11973599
> 
> 赞同：3
> 
> 时间：2012-08-15T16:54:16.257
> 
> 标签：c++, user-interface

我需要在 Linux 或 Windows 上使用 C++ 开发一个 GUI 应用程序。我的问题是，哪种语言与 C++ 一起最适合在 Linux 或 Windows 上制作 GUI 应用程序？

语言使用从 Linux 到 Windows 的变化很大吗？请推荐一种支持 C++ GUI 开发的语言，我可以在大约一个月内学习并很快开始该项目。我知道 qt 支持这样的设施。但这是唯一可用的框架吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T16:59:43.783

我认为您在这里混合了术语。

GUI 开发可以使用多个库在 C++ 中完成，包括 QT 和 wxWidgets。

[http://qt.nokia.com/](http://qt.nokia.com/)

[http://www.wxwidgets.org/](http://www.wxwidgets.org/)

Windows 上的 GUI 可以使用其他几个库创建，包括 Win32 API、MFC、WinForms (.NET)、Windows Presentation Foundation (WPF.、.NET)。等等

# sql - 使用 pgAdmin 导入文本文件

> ID：11973609
> 
> 赞同：3
> 
> 时间：2012-08-15T16:54:52.127
> 
> 标签：sql, postgresql, pgadmin

我刚刚下载了 pgAdmin 1.14.3 以导入、查询和管理大型文本文件。这些文本文件要么是引号分隔的引号，要么是制表符分隔的（它们以引号逗号引号的形式出现，我编辑了许多以与其他软件一起使用）。虽然 1.16 版允许导入功能，但它尚未发布，我想知道如何使用 pgAdmin 将数据导入新创建的表中。

文本文件的范围从 12MB 到 2GB，所以我正在寻找一个不涉及逐行导入的综合解决方案。我用 phppgadmin 试过这个，但是遇到了嵌入在 php.ini 文件（单独的帖子）中的文件大小限制，我正在尝试这个作为一种可能的解决方法。我对 SQL 有点陌生，所以不太确定所有可能触手可及的命令。任何帮助表示赞赏 - 谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-15T19:07:47.170

您可以发出`COPY`声明，如下所示：

```
COPY table_name (column_name)
FROM 'd:\test.sql';

Query returned successfully: 6 rows affected, 31 ms execution time. 
```

请参阅此处的文档： [http ://www.postgresql.org/docs/9.1/static/sql-copy.html](http://www.postgresql.org/docs/9.1/static/sql-copy.html)

请注意，我没有在 PgAdmin 中对大文件进行测试，但是使用 psql 我从未见过文件对于`COPY`.

# perl - 如何在 perl 中存储本身不是引用的引用

> ID：11973612
> 
> 赞同：1
> 
> 时间：2012-08-15T16:54:59.680
> 
> 标签：perl

我有一个递归函数，它使用[ref](http://perldoc.perl.org/functions/ref.html)递归地遍历数据结构。如果 ref 返回一个空字符串，则调用回调。我的问题是我需要在我的数据结构中存储一个 hash-ref，它会被我的函数视为标量。

本质上，我需要做这样的事情；

```
 my %hash = fillHash();
    $hash{'abc'}{'def'} = \%hash; 
```

我想知道是否有某种方法可以存储 \%hash 以使其被视为标量而不是引用。可能喜欢/

```
 $hash{'abc'}{'def'} = scalar \%hash; 
```

我只是在寻找一种将链接添加到我的数据结构的父节点的方法，但仍然能够递归地遍历它。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T17:15:23.527

您可以使用我所做的来区分值和结构，我称它们为“间接数组”（在我的例子中）。

在您的情况下，它看起来像这样：

```
 $hash{'abc'}{'def'} = scalar \\%hash; 
```

`ref( $hash{'abc'}{'def'} )`是`'REF'`，以防你想知道。然后你可以决定你需要取消引用它两次：

```
$hash_ref = ${ $hash{'abc'}{'def'} }; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T17:15:16.940

我认为@MarkCanlas 在他的建议中给出了正确的解决方案，可以考虑采用不同的方式来构建数据。除此之外，您可以进行双重参考。

```
my $scalar_ref = \%hash;
$other_hash{abc}{def} = \$scalar_ref; 
```

现在，当你检查那个`ref`时，你会回来`"REF"`并且可以做一些不同的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T17:16:51.763

首先，您应该意识到所有引用在定义上都是标量。

您想要的是可以在任何地方都可以作为参考的东西，但在您的步行功能中。任何一种魔法参考都无法真正实现这一点。步行功能是必须添加逻辑的地方。你可以让它跟踪它已经看到的东西：

```
my %h = (
    foo => "bar",
    inner => {
        foo => 42
    }
);

$h{inner}{parent} = \%h;

sub walk
{
    my ($h, $cb, $path, $seen) = @_;
    $path //= "";
    $seen //= {};
    $seen->{$h}=1;
    while(my ($k, $v) = each %$h) {
        if(ref($v)) {
            walk($v, $cb, "$path/$k", $seen) if !$seen->{$v};
        } else {
            $cb->($k, $v, "$path/$k");
        }
    }
}

walk(\%h, sub {
  my ($key, $value, $path) = @_;
  print "walker found $key ($path) => $value\n";
}); 
```

或者你可以让它识别某些`parent`特殊的键，然后跳过它们。

# android - JNI“优化”值得吗？

> ID：11973621
> 
> 赞同：1
> 
> 时间：2012-08-15T16:55:41.623
> 
> 标签：android, c++, optimization, java-native-interface

我正在编写一个使用 JNI 的文本/VoIP 程序的 C++/Native 端。目前，Java 代码可能会定期调用 C++ 端的三个函数。调用函数的频率将取决于用户发送/接收文本消息的频率以及他们的朋友在改变他们的存在/状态方面的活跃程度。这三个函数中的每一个都遵循下面的伪代码，我不确定在函数中“全球化”任何东西是否明智（甚至可能）。

```
JNIEnv *env;
if (jvm_->GetEnv((void**) &env, JNI_VERSION_1_6) < 0)
{
[print error and return]
}

jclass stringclass = env->FindClass("java/lang/String"); // Same for all 3
jstring passinfo = env->NewStringUTF([str-info-to-pass]); // Different for all 3
jclass cls = env->FindClass([directory to calling Java function class]); // Same for all 3
[check if cls found, print error if not found and return]

jmethodID methID = env->GetStatisMethodID([arguments for the function]); // Different for all 3
[check if methID found, print error if not found and return]

jobjectArray args = env->NewObjectArray([arguments to build argument structure being passed to function]);
[call Java function, passing right arguments] 
```

我在想我应该/应该能够将 jclass stringclass、jclass cls 和 JNIEnv *env 从函数中移出，并使它们成为在 JNI_OnLoad 函数调用期间设置的全局变量。这可能/可取吗？这些值是否会与 OnLoad 函数与这些函数有所不同？我是否应该将它们实例化为全局变量并在函数调用中每次都设置它们？而且，做这些真的会显着提高性能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T17:54:50.310

可能，是的。明智的，这取决于。为自己定义什么是“显着数量”。您期望 JNI 调用的节奏是什么？我认为您可以从每秒 10 次以上的调用开始看到缓存的一些可衡量的影响。这是一个案例吗？无论如何，以我个人的经验，出色的缓存可以清理代码，使其更短且更具可读性。所以无论如何我都会给出一些建议。

的缓存结果`FindClass`，是的。通常任何可重用和“静态”的东西，你通过符号名称查找的内容 - 这引入了符号查找的惩罚，这与简单地使用已经缓存的指针相反。[Liang JNI 的书](http://java.sun.com/docs/books/jni/html/fldmeth.html#26855)还谈到了字段和方法 ID，所以你可以`GetStaticMethodID`申请。`jmethodID`在可以直接缓存结果的意义上更简单`Get(Static)MethodID`：它对任何进一步的调用都有效。与`FindClass`返回本地引用不同，因此对于有效的缓存（并使其`jmethodID`真正持久化），您必须`NewGlobalRef`从中创建 - 并在适当时将其删除。[JNI_OnLoad 教程](http://java.sun.com/docs/books/jni/html/other.html#30439)中有一个很好的综合示例. 另一方面，缓存 JNIEnv 没有意义，每次 JNI 调用都会再次获取它。如果您碰巧从另一个线程调用 JNI 方法，而不是您从中缓存的线程，则缓存的 JNIEnv 也将无效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-29T13:07:23.070

你不应该担心性能。目前，我开发了一个使用本地编解码器的 voip 客户端。这意味着每个 rtp 数据包都会调用 JNI（每 20 毫秒两次，因为编码和解码都是如此），每次调用也会传递 JNIEnv。这个变量只是一个指针。在这些情况下，在低端设备上，JNI 调用所消耗的 CPU 使用率低于 1%，所以如果你只需要发短信，你完全不用担心。

# objective-c - 将值分配给 BOOL 时遇到问题

> ID：11973624
> 
> 赞同：1
> 
> 时间：2012-08-15T16:55:48.413
> 
> 标签：objective-c

看起来很简单，但我不知道为什么它不起作用。

在我的 .h 文件中，我声明：`BOOL keyboardIsUp;`

然后在我的 .m 文件中：

```
-(void)keyboardWillShow {

    NSLog(@"before:");
    NSLog(keyboardIsUp? @"Yes" : @"No");

    NSLog(@"keyboardWillShow");
    keyboardIsUp = YES;

    NSLog(@"after:");
    NSLog(keyboardIsUp? @"Yes" : @"No");

    ...
}

-(void)keyboardWillHide {

    NSLog(@"before:");
    NSLog(keyboardIsUp? @"Yes" : @"No");

    NSLog(@"keyboardWillHide");
    keyboardIsUp = NO;

    NSLog(@"after:");
    NSLog(keyboardIsUp? @"Yes" : @"No");

    ...
}

-(BOOL)keyboardStatus{
    NSLog(@"keyboardStatus");

    NSLog(keyboardIsUp? @"Yes" : @"No");

    return keyboardIsUp;
} 
```

这些方法肯定被正确调用（我可以从 NSLog 消息中看到这一点），并且`NSLog`在前 2 个方法中使用我的消息，我可以看到 BOOL 设置正确（在函数范围内）。

但是当我打电话时`keyboardStatus`，它总是记录“NO”

有任何想法吗？我已经搜索了我的其余代码，我绝对不会改变`keyboardIsUp`其他任何地方的价值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T17:12:17.080

您确定您正在与对象的正确实例交谈吗？

即添加到每个方法的开头：

```
NSLog(@"[%@(%p) %@]", self, self, NSStringFromSelector(_cmd)); 
```

如果十六进制数在`keyboardWillHide/Show`和之间变化`keyboardStatus`，那么您正在与不同的实例交谈。如果没有，则正在发生其他事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T17:12:26.293

也许您没有在同一个对象上调用它们？

# mercurial - Mercurial 存储库名称未出现

> ID：11973625
> 
> 赞同：0
> 
> 时间：2012-08-15T16:55:55.380
> 
> 标签：mercurial

我创建了一个本地存储库并将其克隆到远程 mercurial server 。当我通过我的 mercurial 服务器的 Web 界面检查它时，我得到的是 "__NAME__" 而不是我的 mercurial 存储库名称。

我知道我只需要修改一个文件。但是我很困惑要修改哪个文件。

![在此处输入图像描述](../Images/8f81fb078dd9f5dda8d843ce08fc8caf.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T01:25:19.557

“远程 mercurial 服务器”一定有问题。从外观上看，您正在运行“hgweb”，并且可能是比底层 Mercurial 安装更旧的脚本版本？尝试确保该服务器上使用的 hgweb.cgi（或 hgweb.wsgi）是最新的并且对应于该服务器上的 Mercurial 安装。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T11:02:07.520

显示正确描述所需的只是`hgrc`存储库`.hg`文件夹中的一个文件。该文件应包含以下内容：

```
[web]
description=Repository description 
```

`web`部分的帮助`hgrc`在[这里](http://www.selenic.com/mercurial/hgrc.5.html#web)。

不过，我同意 Ry4an，这对我来说似乎是服务器上的安装问题，因为按照您的描述克隆存储库应该显示正确的名称，并以“未知”作为描述。

# java - 如何动态地将新控件（按钮、文本视图）添加到片段

> ID：11973626
> 
> 赞同：0
> 
> 时间：2012-08-15T16:55:56.730
> 
> 标签：java, android, controls

这是我的片段类：

```
public class FirstFragment extends Fragment {           
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
                            Bundle savedInstanceState) {        
        EditText newText = new EditText(getActivity());

        newText.setText("This is a fragment");
        newText.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, 
                                LayoutParams.WRAP_CONTENT));
        return inflater.inflate(R.layout.fragment_first, container, false); 
     }
} 
```

我正在尝试添加`newText`到正在创建的片段中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T19:47:33.510

只需存储从`inflater.inflate`调用返回的视图，然后添加您想要的任何内容。

最后，返回存储的视图。

# ios - inputAccessoryView 可以用于实际输入吗

> ID：11973634
> 
> 赞同：2
> 
> 时间：2012-08-15T16:56:39.707
> 
> 标签：ios, uitextfield

今天早上，我正在查看我在某处（并在应用程序中使用）发现的一些旧代码，这些代码会破解 a`UIAlertView`以便从用户那里获取一串输入。就目的而言，这有点矫枉过正，而且看起来很愚蠢，但我从未见过更简单的方法。然后我想出了以下方法，这**似乎**可行（iPad 5.1.1 和模拟器）。

我的问题有点开放，但从本质上讲，是否存在将其作为策略中断的条件：创建一个带有附件视图的屏幕外文本字段，在附件视图中放置一个代理文本字段，并转发各种属性设置给代理？

PMKeyboardTextField.h：

```
#import <UIKit/UIKit.h>

@interface PMKeyboardTextField : UITextField
- (id)initWithPrompt:(NSString *)prompt;
@end 
```

PMKeyboardTextField.m：

```
#import "PMKeyboardTextField.h"

@interface PMKeyboardTextField ()
@property (nonatomic, strong) UITextField *inputField;
@end

@implementation PMKeyboardTextField
@synthesize inputField = _inputField;

- (id)initWithPrompt:(NSString *)prompt {
    self = [super initWithFrame:CGRectMake(-1, -1, 1, 1)];
    if (self) {
        UIView *accessory =  [[UIView alloc] initWithFrame:CGRectMake(0, 0, 300, 72)];
        [accessory setBackgroundColor:[UIColor colorWithRed:0.8 green:0.8 blue:0.8 alpha:0.8]];

        UILabel *getLabel = [[UILabel alloc] initWithFrame:CGRectMake(8, 8, 284, 21)];
        [getLabel setBackgroundColor:[UIColor clearColor]];
        getLabel.text = prompt;
        [accessory addSubview:getLabel];

        self.inputField = [[UITextField alloc] initWithFrame:CGRectMake(18, 37, 264, 31)];
        [accessory addSubview:self.inputField];

        self.inputAccessoryView = accessory;
        [[NSNotificationCenter defaultCenter] addObserver:self
                                                 selector:@selector(keyboardDidShow)
                                                     name:UIKeyboardDidShowNotification
                                                   object:nil];
    }
    return self;
}

- (void)keyboardDidShow {
    [self.inputField becomeFirstResponder];
}

- (id<UITextFieldDelegate>)delegate {
    return self.inputField.delegate;
}

- (void)setDelegate:(id<UITextFieldDelegate>)delegate {
    self.inputField.delegate = delegate;
}

- (void)dealloc {
    [[NSNotificationCenter defaultCenter] removeObserver:self];
}
@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T17:21:42.697

如果您的目标是 iOS 5.0 或更高版本，则无需破解警报视图即可添加文本字段。您只需将警报视图设置为`alertViewStyle`为`UIAlertViewStylePlainTextInput`警报视图提供一个纯文本输入字段，然后您可以通过发送`textFieldAtIndex:`到警报视图来访问该字段。

除此之外，您的解决方法似乎还可以。我想您必须将屏幕外文本字段添加到警报视图的窗口，而不是普通的应用程序窗口。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T11:44:18.463

尽管我很喜欢这个想法，因为它能够避免警报视图的过度混乱或重新定位屏幕视图的需要，但另一个论坛向我指出了致命的缺陷：有些人使用外部键盘！

# ios - 从 UITableView 选定索引更新 detailDescriptionLabel 数据

> ID：11973637
> 
> 赞同：0
> 
> 时间：2012-08-15T16:56:58.800
> 
> 标签：ios, uitableview, xib

我有一个用于 iPad 的拆分视图控制器，左侧有一个向下钻取表。我可以毫无问题地使用向下钻取填充表格，但我似乎无法让我在左侧的 UITableView 中单击的项目显示在右侧的 detailDescriptionLabel 中。

我的 ProductViewController.m 中有以下代码

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
[tableView deselectRowAtIndexPath:indexPath animated:YES];

NSLog(@"Row clicked: %i", indexPath.row);

if (_delegate != nil) {
    Product *product = (Product *) [_products objectAtIndex:indexPath.row];
    [_delegate productSelectionChanged:product];
}

DetailedVC *detailView = [[DetailedVC alloc] initWithNibName:@"DetailedVC" bundle:[NSBundle mainBundle]];
NSLog(@"User clicked on: %@", [NSString stringWithFormat:@"%d",indexPath.row]);
detailView.detailDescriptionLabel.text = [NSString stringWithFormat:@"%d",indexPath.row];
[self.navigationController pushViewController:detailView animated:YES];
} 
```

这里发生的事情是我将DetailedVC 推到我的表格视图所在的左侧，我真正想要做的是在右侧的详细视图中看到单击的行已更新。我可以在“日志”窗口中看到我点击了某个索引，所以我知道我正在捕获点击事件并获得一个值。

在我的DetailedVC.m 中，我有以下代码来更新这个标签。

```
- (void)viewDidLoad
{
[super viewDidLoad];
[self configureView];
}

- (void) configureView {

if (self.detailItem) {

    self.detailDescriptionLabel.text = [self.detailItem description];

    NSLog(@"Item: %@", [self.detailItem description]);
}
} 
```

如果我编辑 viewDidLoad 我会得到 [self.detailItem 描述] 的 (null)

```
- (void)viewDidLoad
{
[super viewDidLoad];
NSLog(@"Detail description label: %@", [self.detailItem description]);
} 
```

产品视图控制器.h

```
@interface ProductViewController : UIViewController <UITableViewDataSource, UITableViewDelegate> {

NSMutableArray *_products;
UITableView *_productsTableView;
id<ProductSelectionDelegate> _delegate;
}

@property (nonatomic, strong) IBOutlet UITableView *productsTableView;
@property (nonatomic, retain) NSMutableArray *products;
@property (nonatomic, assign) id<ProductSelectionDelegate> delegate;

@end 
```

AppDelegate.h

```
@class ProductViewController;
@class DetailedVC;

@interface TabAndSplitAppAppDelegate : NSObject <UIApplicationDelegate, UITabBarControllerDelegate> {
UIWindow *window;
UITabBarController *tabBarController;
ProductViewController *_productViewController;
DetailedVC *_detailedViewController;
}

@property (nonatomic, retain) IBOutlet UIWindow *window;
@property (nonatomic, retain) IBOutlet UITabBarController *tabBarController;
@property (nonatomic, retain) IBOutlet ProductViewController *productViewController;
@property (nonatomic, retain) IBOutlet DetailedVC *detailedViewController;

@end 
```

AppDelegate.m

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {    

NSMutableArray *products = [NSMutableArray array];
[products addObject:[[Product alloc] initWithName:@"Product 1 Name" desc:@"Product 1 Description"]];
_detailedViewController.product = [products objectAtIndex:0];

// Override point for customization after app launch.
//create split view controller
RootVC *rvc=[[RootVC alloc] init];
rvc.title=@"Root VC";
DetailedVC *dvc=[[DetailedVC alloc] init];
dvc.title=@"Detailed VC";
_productViewController.delegate = _detailedViewController;

MySplitViewController *msc = [[MySplitViewController alloc] initwithLeftVC:rvc rightVC:dvc];
msc.title=@"First";
//create a temporary VC to show in second tab
SecondViewController *vc2 = [[SecondViewController alloc] init];
vc2.title=@"Second";

//make an array containing these two view controllers
NSArray *viewControllers = [NSArray arrayWithObjects:msc,vc2,nil];
[tabBarController setViewControllers:viewControllers];
tabBarController.view.backgroundColor=[UIColor blackColor];

for(UITabBarItem*t in tabBarController.tabBar.items)
{
    t.image=[UIImage imageNamed:@"icon.png"];
    t.badgeValue=[NSString stringWithFormat:@"%d",([tabBarController.tabBar.items indexOfObject:t]+1)];
}

//the views are retained their new owners, so we can release
[rvc release];
[dvc release];
[msc release];
[vc2 release];

// Add the tab bar controller's current view as a subview of the window
[self.window addSubview:tabBarController.view];
[self.window makeKeyAndVisible];

return YES;
} 
```

MySplitViewController.h

```
#import <UIKit/UIKit.h>

@interface MySplitViewController : UIViewController
{
UINavigationController *leftController;
UINavigationController *rightController;
}

@property (nonatomic, retain) UINavigationController *leftController;
@property (nonatomic, retain) UINavigationController *rightController;

- (void)layoutViews:(UIInterfaceOrientation)orientation initialVerticalOffset:(float)offset;

- (MySplitViewController*) initwithLeftVC:(UIViewController*)leftvc rightVC:(UIViewController*)rightvc;
@end 
```

MySplitViewController.m

```
- (MySplitViewController*) initwithLeftVC:(UIViewController*)leftvc rightVC:(UIViewController*)rightvc
{
if(self=[super init])
{
    UINavigationController *lnc=[[UINavigationController alloc] initWithRootViewController:leftvc];
    lnc.navigationBarHidden=NO;
    self.leftController=lnc;
    [lnc release];

    UINavigationController *rnc=[[UINavigationController alloc] initWithRootViewController:rightvc];
    rnc.navigationBarHidden=NO;
    self.rightController=rnc;
    [rnc release];
}
return self;
} 
```

产品.h

```
#import <Foundation/Foundation.h>

@interface Product : NSObject {

NSString *_productID;
NSString *_productDescription;
}

@property (nonatomic, copy) NSString *productID;
@property (nonatomic, copy) NSString *productDescription;

- (Product *)initWithName:(NSString *)productID desc:(NSString *)productDescription;

@end 
```

产品.m

```
#import "Product.h"

@implementation Product

@synthesize productID = _productID;
@synthesize productDescription = _productDescription;

- (Product *)initWithName:(NSString *)productID desc:(NSString *)productDescription {

if ((self = [super init])) {

    self.productID = productID;
    self.productDescription = productDescription;
}

return self;
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T17:22:07.880

好的，请在 ProductViewController 中试试这个：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
  [tableView deselectRowAtIndexPath:indexPath animated:YES];

  NSLog(@"Row clicked: %i", indexPath.row);

  Product *product = (Product *) [_products objectAtIndex:indexPath.row];
  NSLog(@"Product: %@", product);

  TabAndSplitAppAppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];
  NSLog(@"appDelegate: %@", appDelegate);
  UITabBarController *tbc = appDelegate.tabBarController;
  NSLog(@"tbc: %@", tbc);
  MySplitViewController *msvc = tbc.selectedViewController;
  NSLog(@"msvc: %@", msvc);
  UINavigationController *rnc = msvc.rightController;
  NSLog(@"rnc: %@", rnc);
  DetailedVC *dvc = rnc.topViewController;
  NSLog(@"dvc: %@", dvc);

  dvc.detailDescriptionLabel.text = @"We found our DetailedVC";

  [dvc productSelectionChanged:product];
} 
```

此代码不是您应该如何正确构建程序的示例。这只是为了帮助我（和你）理解你的视图控制器层次结构。

在选择产品时通知代表的最初想法是正确的，它只是在您的情况下不起作用，因为对象没有正确连接。不过，您应该尝试这样做。在您发布的代码中，我看不到 the`ProductViewController`和 the`DetailedVC`都直接可见的位置，因此您可以说

```
productViewControllerInstance.delegate = detailedVCinstance; 
```

最接近的是在 AppDelegate 中，您拥有可能最终将创建的`RootVC`实例和. 也许您可以将 ' 赋予'以便它可以在创建时将其设置为 ' 代表。祝你好运！`rvc``ProductViewController``dvc``dvc``rvc``ProductViewController`

# python - 正则表达式：解析具有非数字字边界的 n 位数字

> ID：11973638
> 
> 赞同：0
> 
> 时间：2012-08-15T16:57:01.470
> 
> 标签：python, regex

我希望这条消息能让你心情愉快。我正在尝试查找有关 \b 表达式的快速教程（如果有更好的术语，请致歉）。我现在正在编写一个脚本来解析一些 xml 文件，但是遇到了一些减速带。我将展示一个我的 xml 示例：

```
<....></...><...></...><OrderId>123456</OrderId><...></...>
<CustomerId>44444444</CustomerId><...></...><...></...> 
```

<...> 是不重要且不相关的 xml 代码。主要关注 CustomerID 和 OrderId。

我的问题在于解析一个字符串，类似于上面的语句。我有一个完美的 regexParse 定义。然而它并不直观。我只需要匹配包含 44444444 的字符串部分。

我当前的设置是：

```
searchPattern = '>\d{8}</CustomerId' 
```

伟大的！它有效，但我想以正确的方式去做。我的想法是 1）找到 8 个数字 2）如果某个单词边界是非数字之后匹配 CustomerId 返回它。

主意：

```
searchPattern = '\bd{16}\b' 
```

我在测试中遇到的问题是在数字前后某处对 CustomerId 的搜索。我想知道你们中的任何人是否可以帮助我解决我的问题，或者指出我正确的道路（用指南或类似的东西的话）。任何帮助表示赞赏。

如果这在错误的区域道歉，我想在 Python 讨论中发布这个，因为我不确定 Python 正则表达式是否支持这个功能。

再次感谢大家，

达克玛斯塔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T18:58:53.980

您应该使用原始字符串文字：

```
searchPattern = r'\b\d{16}\b' 
```

普通（非原始）字符串文字中的转义序列`\b`表示退格字符，因此这就是 re 模块将接收的内容（无法识别的转义序列，例如按原样`\d`传递，即反斜杠后跟“d”）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T17:03:09.700

```
txt = """
<....></...><...></...><OrderId>123456</OrderId><...></...>
<CustomerId>44444444</CustomerId><...></...><...></...>
"""

import re
pattern = "<(\w+)>(\d+)<"
print re.findall(pattern,txt)
#output  [('OrderId', '123456'), ('CustomerId', '44444444')] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T17:06:49.917

您可能会考虑在您的正则表达式中使用回溯运算符，以方便人们阅读：

```
import re
a = re.compile("(?<=OrderId>)\\d{6}")
a.findall("<....></...><...></...><OrderId>123456</OrderId><...></...><CustomerId>44444444</CustomerId><...></...><...></...>")
['123456']
b = re.compile("(?<=CustomerId>)\\d{8}")
b.findall("<....></...><...></...><OrderId>123456</OrderId><...></...><CustomerId>44444444</CustomerId><...></...><...></...>")
['44444444'] 
```

# jsf - Primefaces 日程安排事件未显示

> ID：11973639
> 
> 赞同：0
> 
> 时间：2012-08-15T16:57:02.213
> 
> 标签：jsf, primefaces, spring-webflow

项目使用 Spring Webflow 和 JSF (PrimeFaces)。我有一个时间表组件。我在展示中使用示例代码。计划组件显示在页面上，但不显示事件。前端代码：

```
 <p:schedule value="${scheduleController.eventModel}" widgetVar="myschedule" > 
       <!-- listeners -->
    </p:schedule>

    <h:outputText value="DEBUG: ${scheduleController.eventModel.getEventCount()}" /> 
```

后端代码与示例代码完全相同。我可以获得在 eventModel 中显示正确事件编号的调试消息。但是这些事件没有显示在日程表中。有人知道这里发生了什么吗？非常感谢。

# vb.net - 如何从另一个项目中的 Web 表单启动一个项目中的控制台应用程序？

> ID：11973641
> 
> 赞同：0
> 
> 时间：2012-08-15T16:57:13.537
> 
> 标签：vb.net, webforms, console-application

我有一个使用 .NET 4.0 在 VS 2010 中创建的网站。解决方案中有多个项目。在其中一个项目中，我有一个表单，用户可以选择运行该解决方案的另一个项目中的控制台应用程序。（称为更新.exe）

我试过只使用

**process.start（文件路径+“update.exe”）**

但它似乎没有运行。

它找到该文件，然后立即完成。我尝试将**Console.readKey()**添加到控制台应用程序中，以便在调用后保持打开状态，但无济于事。

最重要的是，我知道控制台应用程序没有运行，因为我在控制台的代码中设置了日志，而且它似乎从来没有启动过。

我应该以不同的方式调用控制台应用程序吗？（注意：我在 VB.net 中写作）

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T17:40:22.397

这里纯粹是推测性的……但我的猜测是，当页面完成处理时，进程就会终止。尝试让页面等待进程关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T17:41:08.553

我对类似要求的“解决方法”是这样的：

使用 ASP 页在服务器上创建 CMD 或 BAT 文件。创建/编写一个“监视” CMD/BAT 文件的服务 - 当它找到一个时，它会运行它。可以编写该服务以作为用户启动进程。

# ios - 从日期中删除时间

> ID：11973647
> 
> 赞同：2
> 
> 时间：2012-08-15T16:57:26.977
> 
> 标签：ios, nsdate

我的`NSDate`实例有问题。

对于我收到的日期`2012-08-16 00:00:00 +0000`。
但我需要从`00:00:00 +0000`.

有没有办法做到这一点？

```
NSDateFormatter *formatter = [[[NSDateFormatter alloc] init]autorelease];
[formatter setDateFormat:@"yyyy-MM-dd"];
[formatter setTimeZone:[NSTimeZone timeZoneWithName:@"GMT"]];
NSDate *eventDate = [formatter dateFromString:currentDate]; // current Tile

NSLog(@"date %@",eventDate); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T17:09:31.990

利用

```
NSLog(@"date %@",[formatter stringFromDate:eventDate]); 
```

A`NSDate`只是一个时间点。它不知道它的值应该如何格式化，这就是`NSDateFormatter`它的用途。

`NSLog(@"date %@",eventDate);`打印日期的默认字符串表示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T17:17:19.177

日期格式化程序将字符串转换为日期，将日期转换为字符串。NSDate 代表一个时间点，无论您如何创建它。在您的代码中，您似乎认为 NSDate 会“记住”它来自的格式化程序没有指定一天中的时间；它不会。当您调用`dateFromString:`它时，它只会选择 00:00:00（午夜）作为时间。

如果您需要使用日历日期而不考虑时间，您可以：

1.  使用 NSDate 对象并忽略时间分量。您需要注意时区，因为一个时区的 8 月 15 日午夜可能是另一个时区的 8 月 14 日晚上 11 点。

2.  使用不同的数据结构来存储年、月和日。NSDateComponents 是一个不错的选择，或者您可以创建自己的。

# android - 可绘制的图像缩放

> ID：11973648
> 
> 赞同：3
> 
> 时间：2012-08-15T16:57:30.150
> 
> 标签：android, android-layout

如果目录中存在资产，是否`drawable-xhdpi`也需要在`drawable-hdpi/mdpi/ldpi`目录中存在其等价物才能支持这些设备？或者，Android 会缩小`xhdpi`资产规模吗？如果 Android 确实缩小了资产规模，那么使用较低 dpi 文件夹有什么好处吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T17:05:05.847

使用较低文件夹的一个好处是您可以控制图像的缩小方式。高分辨率图像在缩小后可能不一定看起来像您想要的方式，这取决于使用的过滤算法和图像的内容。如果高精度图像有太多小细节，在小分辨率下它可能看起来很奇怪或有颗粒感。

通过将您自己的图像放在 ldpi 文件夹中，您可以对图像的外观进行艺术控制。您可能希望在较小的图像中使用具有较少高频内容的较简单的图像，以便更清晰，更容易看到和理解。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T17:05:17.390

除了我对您的问题的评论之外，我还有一些原因可以说明您可能希望在所有文件夹中包含可绘制对象：

*   如果您在 xhdpi 中有一个非常高分辨率的可绘制对象，并且其中有很多“活动”，那么当按比例缩小时，它可能看起来很糟糕并且聚集在一起。因此，您可以创建该图标的更小、相似版本（在这些密度文件夹中类似地命名），当您缩小尺寸时，包含更少的“集群”。

*   不同大小的布局可能需要不同大小的图标，并且缩放可能不会像*您*个人想要的那样发生，因此制作您自己的缩放绘图将（大部分）防止这种情况。

*   如果您不将可绘制对象放入所有密度文件夹中，Lint 会对您大喊大叫。

如果我想到更多原因，我会添加它们。

# c# - 将动作与任务一起使用 - 不确定它是如何工作的

> ID：11973650
> 
> 赞同：1
> 
> 时间：2012-08-15T16:57:32.973
> 
> 标签：c#, delegates, action, task

我需要为我的应用程序创建一个单独的线程来记录一些事情，并且建议我使用 Task.

我似乎没有这个权利，因为我不完全理解任务（我猜）。

这是我所拥有的：

```
public static void LogException(string message, Exception ex)
{
  Action action= delegate() { logException(message, ex); };
  new Task(action);
}

public static void logException(string message, Exception ex)
{
  var stackTrace = new StackTrace();
  var origin = stackTrace.GetFrame(1).GetMethod().Name;
  var originclass = stackTrace.GetFrame(1).GetMethod().ReflectedType.Name;
  var neworigin = string.Format("{0}.{1}", originclass, origin);

  message += Environment.NewLine + Environment.NewLine + GetFullExceptionMessage(ex);

  if (string.IsNullOrEmpty(message)) message = "No message given";

  //var exceptions = GetAllErrMessages(ex);
  //message = exceptions.Aggregate(message, (current, exception) => current + Environment.NewLine + exception);

  EventLogging.LogEvent(neworigin, message, EventLogEntryType.Error, 9999);

  EmailMessage(neworigin, message, EventLogEntryType.Error);
} 
```

我究竟做错了什么？我没有收到任何错误，但话又说回来，我没有收到任何日志。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T16:59:25.923

`new Task(action);`创建一个新任务，但它不做任何会导致它实际执行的事情。

在这种情况下，您可能只使用：

```
Task.Factory.StartNew( () => { /* code goes here */ }); 
```

值得一提的是，如果您的代码特别短，那么创建/调度任务的开销可能比实际直接运行它要慢（这当然取决于该代码是什么）。还要确保在多线程环境中记录事件时，您的错误记录能够正常工作。如果没有，您可以决定不打扰，或者添加显式锁定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T17:01:05.350

替换`new Task(action);`为`Task.Factory.StartNew(action);`在单独的线程上开始执行。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-08-09T23:35:07.223

像这样重写你的动作定义：

```
Action action = new Action(delegate {
    logException(message, ex);
}); 
```

然后创建一个以操作为参数的新任务：

```
Task myTask = new Task(action); 
```

现在你可以开始任务了：

```
myTask.Start() 
```

您也可以通过调用它的`Invoke`方法直接执行该操作：

```
action.Invoke() 
```

# gnuplot - gnuplot 麻烦 - 获得双重情节

> ID：11973651
> 
> 赞同：1
> 
> 时间：2012-08-15T16:57:35.073
> 
> 标签：gnuplot

我有一个我写的脚本，它根据命令行参数从数据文件中选择一个块。到目前为止，它工作得很好。现在我为前 26 个块绘制的图表中有两组数据。数据文件应该有大约 190 个数据块。我已经思考和探索了一个小时，但我仍然不知道为什么会发生这种情况。这是 gnuplot 脚本。

```
gnuplot << EOF
reset
set terminal png small size 1280,480
set output "graph_$1.png"
set yrange [-0.5:5.5]
set autoscale x
set lmargin 17
set label "SPILL" at -1,.5 right
set label "ON" at -1,1 right
set label "OFF" at -1,0 right
set label "DATA" at -1,2.5 right
set label "CLOCK" at -1,4.5 right
set xtics in scale .1 4 format ""
set grid
unset ytics
set key at -1,3.75 right
plot 'plotting' using 0:1 every :::$1::$1 title 'Results' with lines lt 1 lw 2,     \
 ''            using 0:2 every :::$1::$1 notitle  with lines lt 1 lw 2,         \
 ''            using 0:3 every :::$1::$1 title 'Expected' with lines lt 3 lw 3, \
 ''            using 0:4 every :::$1::$1 notitle with lines lt 3 lw 3,          \
 ''            using 0:5 every :::$1::$1 notitle with lines lt -1 lw 3
EOF 
```

因此，当我将 1 美元设为 0 到 26 之间的任何值时，它会在一张图上显示多个图。如果它是从 27 到 99 的任何值，我知道我只会得到一个只有我想要的数据的图。我什至无法找出第一个图上的第二组数据来自哪里。筛选我的数据文件中的文本以匹配它会非常乏味。任何有关如何修复此双重图形的帮助或建议将不胜感激。谢谢你。

# iphone - UITableViewCell 上的 UILongPressGestureRecognizer 在 iOS 5 和 4.3 中不起作用

> ID：11973653
> 
> 赞同：1
> 
> 时间：2012-08-15T16:57:39.167
> 
> 标签：iphone, ios5, uitableview, ios4, long-press

我有一个表格视图，我在表格视图单元格上使用 UILongPressGestureRecognizer 在单元格上显示上下文菜单，以允许用户执行一些额外的功能。在 iOS 5.1 中一切正常，但是当我在 iOS 5 和 4.3 中测试时，该事件没有被触发。

有谁知道如何解决这个问题，请帮助我，在此先感谢。

下面是我的代码：

在 tableViewCell.h 中：添加 UIGestureRecognizerDelegate

在 tableViewCell.m

```
UILongPressGestureRecognizer *longPressRecognizer = [[UILongPressGestureRecognizer alloc] 
                                                     initWithTarget:self action:@selector(handleLongPress:)];
longPressRecognizer.minimumPressDuration = 1.5;
longPressRecognizer.numberOfTouchesRequired = 1;
longPressRecognizer.numberOfTapsRequired = 0;
longPressRecognizer.delegate = self;

[self addGestureRecognizer:longPressRecognizer];
[longPressRecognizer release]; 
```

// 处理事件的方法

```
- (void)handleLongPress:(UILongPressGestureRecognizer *)gestureRecognizer
{    
    if (gestureRecognizer.state == UIGestureRecognizerStateBegan) 
    {
        // Do something.
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T07:51:57.190

在这个问题上花了 1.5 天后，我发现 tableView 以某种方式收到长按事件，但 tableViewCell 在 iOS 5/4.3 上没有。所以我通过将 UILongPressGuestureRecognizer 添加到 tableView 然后在长按事件处理程序中然后调用 tableViewCell 来显示上下文菜单来解决这个问题，它可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T05:23:04.893

我也遇到了这个问题。我发现只有当'delegate'属性为'NULL'时，长按手势识别器才能正常工作。因此，请尝试删除此行。

```
longPressRecognizer.delegate = self; 
```

# ios - iOS：如何处理美国居民的特定资源（en_US）？

> ID：11973658
> 
> 赞同：0
> 
> 时间：2012-08-15T16:58:00.357
> 
> 标签：ios, localization, internationalization

我正在开发一个 iOS 应用程序，该应用程序必须为美国居民使用不同的名称和一些不同的图像（不同的品牌名称）。

我定义了一个 en-US.lproj 代表，但从未使用过。当我模拟美国居民时，我有：[[NSLocale currentLocale] locale localeIdentifier] => 'en_US'，但使用了 en.lproj。我试图更改（在 Xcode 中）“本地化本地开发区域”，但它没有改变任何东西。

我对法语本地化没有任何问题。

我可以用代码来做，但不能用应用程序名称或 Default.png。

如何使 en-US.lproj 工作？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T13:59:16.833

我用这个答案解决了我的部分问题：

[iPhone 应用本地化 - 英文问题？](https://stackoverflow.com/questions/3308519/iphone-app-localization-english-problems/3311899#3311899)

但由于“iPhone 本地化（或者是本地化？）没有注意到用户设置的区域”，我对 BundleDisplayName 或 Default.png 无能为力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-11T12:53:17.647

**更新**：您还应该知道，如果您更改语言/地区设置，您可能需要重新启动手机才能让应用程序在正确的地区设置下工作！！！

我通过将基本语言设置为英语来修复它，并在 main.mi 中调用：

```
int main(int argc, char * argv[]) {
    @autoreleasepool {
        [[NSUserDefaults standardUserDefaults] setObject:[NSArray arrayWithObjects:[[NSLocale currentLocale] localeIdentifier], nil] forKey:@"AppleLanguages"];
        return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));
    }
} 
```

# visual-studio-2010 - Visual Studio 2010 从 localhost 更改为完整的计算机名称/域

> ID：11973661
> 
> 赞同：-1
> 
> 时间：2012-08-15T16:58:05.567
> 
> 标签：visual-studio-2010, localhost

我正在使用 Visual Studio 2010，我想将调试环境从本地主机更改为我的完整计算机名称/域。有没有人有一些关于如何做到这一点的分步说明？（我还想将其设置为所有新项目的默认设置以及如何在现有项目中更改它）。我是使用 Visual Studio 和一般编程的新手。

我在论坛中找到了这篇文章[Visual Studio 2010 - Change localhost to custom domain](https://stackoverflow.com/questions/5810528/visual-studio-2010-change-localhost-to-custom-domain)，但我不清楚如何进行更改。我转到项目属性 Web 选项卡并尝试设置本地 IIS Web 服务器，但出现以下错误：

“ASP.NET 4.0 尚未在 Web 服务器上注册。您需要为 ASP.NET 4.0 手动配置 Web 服务器，以便您的站点正确运行。”

我不确定这是否是正确的做法。我只需要我的调试 url 地址来自：

“ [http://localhost:53674/Projectname.aspx](http://localhost:53674/Projectname.aspx) ”

至：

“ [http://computername.pag-domain.webname.org/Projectname.aspx](http://computername.pag-domain.webname.org/Projectname.aspx) ”

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T15:38:06.550

为了修复 iis Web 服务器，我不太确定做了什么……我们的 IT 部门正在解决这个问题。为了在 Visual Studio 中设置本地 IIS 网络服务器，我执行了以下操作：在 Web 项目属性中，在 Web 选项卡下，我选择“使用本地 IIS Web 服务器，在项目 URL 中，我放置了完整的计算机域并告诉它创建一个虚拟目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T18:56:51.310

知道了。我们的 IT 前来救援 - 他修复了 ASP.NET 无法正确访问 4.0 的一些问题。然后我正确设置了“使用本地 IIS Web 服务器”，它就像一个魅力。

# javascript - 为什么body onload = javascript函数连续执行？

> ID：11973662
> 
> 赞同：1
> 
> 时间：2012-08-15T16:58:06.140
> 
> 标签：javascript, ajax, onload

很抱歉这个新手问题，刚开始学习AJAX。

我想了解以下究竟是什么导致 divMessage 内容在“myName”文本更改时不断变化。

1）似乎Javascript函数进程一直在“监听”，这是正常的Javscript行为，还是有任何触发器重复调用“进程”？2）我们分配给“body onload”的任何功能是否会重复执行？这种重复执行的频率是多少？3）如果我们想要单次执行函数流程，该怎么做？

4）我很困惑，因为我认为身体只会加载一次。但是否因为在“body onload”之后调用了函数“process”，而函数 process 又通过更改 divMessage 来修改“body”，本质上让它再次通过“body onload”，然后再次“process”， ETC.. ？

非常感谢您的帮助！

```
<head>
  <script type="text/javascript" src="quickstart.js"></script>
</head>
<body onload='process()'>
  Server wants to know your name:
  <input type="text" id="myName" />
  <div id="divMessage" />
</body> 
```

这里是 quickstart.js 处理部分

```
function process()
{
  // proceed only if the xmlHttp object isn't busy
  if (xmlHttp.readyState == 4 || xmlHttp.readyState == 0)
  {
    // retrieve the name typed by the user on the form
    name = encodeURIComponent(
    document.getElementById("myName").value);
    // execute the quickstart.php page from the server
    xmlHttp.open("GET", "quickstart.php?name=" + name, true);
    // define the method to handle server responses
    xmlHttp.onreadystatechange = handleServerResponse;
    // make the server request
    xmlHttp.send(null);
  }
}

  // callback function executed when a message is received from the server
  function handleServerResponse()
  {
    // move forward only if the transaction has completed
    if (xmlHttp.readyState == 4)
    {
      // status of 200 indicates the transaction completed successfully
      if (xmlHttp.status == 200)
      {
        xmlResponse = xmlHttp.responseXML;
        xmlDocumentElement = xmlResponse.documentElement;
        helloMessage = xmlDocumentElement.firstChild.data;

        // display the data received from the server
        document.getElementById("divMessage").innerHTML =
                  '<i>' + helloMessage+ '</i>';
      }
    }
  } 
```

和 quickstart.php

```
<?php
header('Content-Type: text/xml');
echo '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>';
echo '<response>';
$name = $_GET['name'];

// generate output depending on the user name received from client
$userNames = array('YODA', 'AUDRA', 'BOGDAN', 'CRISTIAN');
if (in_array(strtoupper($name), $userNames))
  echo 'Hello, master ' . htmlentities($name) . '!';
else if (trim($name) == '')
  echo 'Stranger, please tell me your name!';
else
  echo htmlentities($name) . ', I don't know you!';

echo '</response>';
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T15:09:23.957

通过关闭并尝试再次运行它找到了答案。事实证明，我注释掉了额外的代码，但被缓存了，每 1 秒从 handleServerResponse() 调用“进程”：

```
// display the data received from the server
    document.getElementById("divMessage").innerHTML =
              '<i>' + helloMessage+ '</i>';
    setTimeout('process()', 1000); 
```

对于那个很抱歉。教训是在测试每个代码更改之前清除浏览器缓存:) 所以我想检查这个函数是否从任何其他地方调用的建议是正确的。无论如何，我读了很多书，并在试图弄清楚这一点时学到了很多东西。非常感谢@pst！

# javascript - 有没有人有一个使用骨干模型发布带有 ajax 的表单的好例子？

> ID：11973664
> 
> 赞同：-1
> 
> 时间：2012-08-15T16:58:23.913
> 
> 标签：javascript, backbone.js

我正在尝试找到一个使用 ajax 和骨干网发布表单的工作示例，有人有一个很好的例子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T17:24:26.890

当您的 Backbone.Model 已定义属性`url`或`urlRoot`调用其[save()](http://backbonejs.org/#Model-save)方法导致向该 url 处的服务器发送 AJAX 请求时。如果模型是新的（Backbone.Model.isNew()），则使用 HTTP **POST**方法，否则使用方法**PUT**。

因此，您只需要使用表单的值初始化模型属性并保存模型。

# r - 存储双循环“扰动”过程的结果

> ID：11973668
> 
> 赞同：0
> 
> 时间：2012-08-15T16:08:20.100
> 
> 标签：r

这是我的问题的一个例子：

```
 #data#
    g<-c(1,1,1,2,2,2)
    A<-runif(6,min=1,max=5)
    B<-runif(6,min=100,max=1000)
    C<-runif(6,min=30,max=31)
    D<-runif(6,min=67,max=98765)
    var<-cbind(A,B,C,D)
    label<-colnames(var)

    store<-data.frame(matrix(ncol=2))
    colnames(store)=c("usedVar","prediction")

    library(MASS)#get lda

    for (i in c(1:4))
    {
    for (k in c(1:4))
    {
    if(i==k)break()#using the same variable will not work in lda

    dis<-lda(g~var[,i]+var[,k],CV=TRUE,fold=6)#linear discriminant function
    ct<-table(g,dis$class)
    pre<-sum(diag(prop.table(ct)))# Prediction of cv-reclassification

    #store the results
    a<-i+4*(k-1)
    store[a,1]<-paste(label[i],label[k])
    store[a,2]<-round(pre,4)
    }
    }
    store 
```

我有两个 for 循环被 if-break-case 所“扰乱”（扰乱的意思是，我不需要这些情况的信息）。通过使用 a<-i+4*(k-1) 将结果存储到我的“结果”data.frame，中断案例也将作为 NA 包含在内。有没有办法在没有 NA 案例的情况下存储我的循环结果以获得连续数据集？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T18:22:01.233

你主要需要改变你的计数器变量，`a`. 而是随着循环的进行增加一个计数器。我还更改了 if 语句以封装内部循环的整个内容，并预先分配`store`到适当的维度（我认为）：

```
store<-data.frame(matrix(ncol=2,nrow=c(i*k-min(i,k))))
colnames(store)=c("usedVar","prediction")

library(MASS)#get lda
row.i <- 0 # start counter
for (i in c(1:4)) {
  for (k in c(1:4)) {
    if(i != k) {
      row.i <- row.i + 1 # only increment if condition met
      dis<-lda(g~var[,i]+var[,k],CV=TRUE,fold=6)#linear discriminant function
      ct<-table(g,dis$class)
      pre<-sum(diag(prop.table(ct)))# Prediction of cv-reclassification

      #store the results
      store[row.i,1]<-paste(label[i],label[k])
      store[row.i,2]<-round(pre,4)
    }
  }
}
store 
```

# mysql - 如何检查计数语句是否返回特定值

> ID：11973671
> 
> 赞同：0
> 
> 时间：2012-08-15T16:58:50.633
> 
> 标签：mysql, sql

这可能很容易，我有一段时间没有使用 sql 并且遇到了这个问题。基本上，作为较大语句的一部分，如果内部 select 语句的计数等于 3，我只想从 select 语句中返回一行。我该怎么做？

例如...

```
select rev.name, s.title 
from reviewer rev, song s, rating r 
where (r.rID = rev.rID) and (r.mID = s.sID) and ...[rest goes here]; 
```

'其余'是我只想在评论者两次`rev`评论歌曲时返回`s`，并且第一次 r.value 较大（我们将第一次表示为最旧的`r.date_of_rating`.

这显然是一个计数和比较，但我不知道如何以正确的 SQL 语法进行布局。任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T17:04:51.697

我不确定您的示例是否提供了足够的信息。

但听起来你需要一个“HAVING”子句。

例如

```
SELECT rev.name, s.title, count(r.mId)
FROM reviewer rev, song s, rating r 
WHERE (r.rID = rev.rID) AND (r.mID = s.sID) 
GROUP BY rev.name, s.title
HAVING count(r.mId) = 3 
```

# javascript - 延迟后是否播放音频标签？

> ID：11973673
> 
> 赞同：10
> 
> 时间：2012-08-15T16:58:53.837
> 
> 标签：javascript, jquery, html, html5-audio

我正在使用`<audio>`HTML5 中的标签播放 MP3。

```
<audio controls="controls" autoplay="autoplay">
  <source src="song.mp3" type="audio/mp3" />
</audio> 
```

这很好用，但我想知道如何在歌曲开始自动播放之前延迟？我知道没有`delay`属性，但我认为它可以通过 javascript 来完成？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-15T17:17:22.043

试试这个，真的很简单，但你应该将 JS 移到标记之外......

```
<audio controls="controls" onloadeddata="var audioPlayer = this; setTimeout(function() { audioPlayer.play(); }, 8000)">
    <source src="Kalimba.mp3" type="audio/mp3" />
</audio> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-15T17:02:33.613

仅 Javascript 方法：

```
var sound = document.createElement('audio')
sound.id = 'audio'
sound.controls = 'controls'
sound.src = 'http://a.tumblr.com/tumblr_leltkjNwWL1qf32t9o1.mp3'
sound.type = 'audio/mp3'
document.body.appendChild(sound)

function playAudio() {
  document.getElementById('audio').play();
}

setTimeout("playAudio()", 3000);
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-15T17:05:24.217

试试这个：

HTML：

```
<div id='audio'>This will be replaced with an audio tag</div>​ 
```

jQuery：​</p>

```
$(document).ready(​function (){
    $("#audio").stop("true").delay('2000').queue(function() { 
      $(this).html('<audio controls="controls" autoplay="autoplay"><source src="song.mp3" type="audio/mp3" /></audio>');
    });
});​ 
```

所有这些将是：

```
<html>
    <head>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
    </head>
    <body>
        <div id='audio'>This will be replaced with an audio tag</div>
        <script type='text/javascript'>
            $(document).ready(function (){
                $("#audio").stop("true").delay('2000').queue(function() { 
                    $(this).html('<audio controls="controls" autoplay="autoplay"><source src="song.mp3" type="audio/mp3" /></audio>');
                });
            });
        </script>
    </body>
</html> 
```

您可以使用`.delay()`jQuery 来延迟进程。时间以毫秒为单位，因此 2000 = 2 秒。

# ruby-on-rails - 在这种情况下应该如何处理 rails ajax 响应？

> ID：11973674
> 
> 赞同：0
> 
> 时间：2012-08-15T16:58:53.533
> 
> 标签：ruby-on-rails, ajax, ruby-on-rails-3

我是 rails 新手，我很清楚如何用 jquery 做 ajax，但不明白 rails 是如何做到的。

了解 rails ajax 工作原理的简单示例：

案例 - 向结果 div 插入 ajax 响应：

看法：

```
<div id="result">1result,2result, </div>

<%= form_tag('/mycontroller',{:class =>"myform",:remote => true}) do %>
    <input name="myinput" type="text">
    <button type="submit" class="btn"> add </button>
<% end %> 
```

控制器：

```
def create
      render :json => "3result";
end 
```

响应成功后，我应该添加什么以在 div 中插入 3result？我应该添加哪些代码来处理错误情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T18:04:00.090

我会这样修改我的控制器代码：

```
def create
  ...
  respond_to do |format|
    if (success_condition)
      format.js
    else
      format.js { render :js => "alert('Unsuccessful!');" }
    end
  end
end 
```

我将创建一个名为 create.js.erb 的视图，其中包含：

```
$("#result").html("3result") // or whatever you want it to do... 
```

（注意：Javascript 假定您已安装 JQuery。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T17:25:08.643

你可以把这段代码放在你的控制器上

渲染：更新做|页面|
page << "$('#result').append('3result')"
结束

并确保您安装了“jquery-rails”gem。

您可以使用该区域来检查错误并呈现不同的东西。

# double - 比较 float 和 double 并打印它们

> ID：11973677
> 
> 赞同：0
> 
> 时间：2012-08-15T16:59:04.893
> 
> 标签：double

我有一个快速的问题。所以，假设我有一个非常大的数字，最多 15 位数字，我会接受输入并将其分配给两个变量，一个浮点数和一个双精度数，如果我要比较两个数字，你会如何比较它们？我认为 double 的精度高达 15 位？float 有 8 个？那么，我是简单地比较它们，而浮点数只包含 8 个数字并填充其余的数字，还是让浮点数打印出所有 15 个数字然后进行比较？另外，如果我被要求打印出浮点数，标准的做法是打印最多 8 位数字吗？这是它的最大精度

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T17:06:28.840

大多数语言都会进行某种形式的类型提升，以让您比较不相同但相当相似的类型。有关详细信息，您必须指出您所指的语言。

当然，比较浮点数的真正问题在于，由于舍入误差，结果可能出乎意料。大多数数学等式不适用于浮点算术，因此应该产生相同值的两个操作序列实际上可能会产生稍微不同的值（如果不小心，甚至会产生非常不同的值）。

编辑：至于打印，“标准方式”取决于您的需要。如果出于某种原因，您正在使用浮点数进行货币计算，那么您可能只想打印 2 个十进制数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T17:12:53.063

在这里用数字来思考可能是个问题。浮点数的范围可以从负无穷到正无穷。例如，在 C# 中，范围为 ±1.5 × 10^−45 到 ±3.4 × 10^38，精度为 7 位。

此外，IEEE 754 定义了浮点数和双精度数。这是一个可能有帮助的链接[http://en.wikipedia.org/wiki/IEEE_floating_point](http://en.wikipedia.org/wiki/IEEE_floating_point)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-15T17:12:57.407

你的问题是正确的。不过，您要考虑您的方法。

无论是 32 位还是 64 位，浮点表示并不意味着比较数字是否相等。例如，`2.0/7.0 == 60.0/210.0`在 CPU 看来，断言可能正确，也可能不正确。从概念上讲，浮点本质上是不精确的。

如果您想比较数字是否相等，请使用整数。再次考虑最后一段的比率。这个断言`2*210 == 7*60`总是正确的——注意这些是与以前相同的四个数字的整数版本，只使用乘法而不是除法。有人怀疑你真正要找的是这样的东西。

# javascript - Element.value 和 Element.getAttribute("value") 的区别

> ID：11973678
> 
> 赞同：12
> 
> 时间：2012-08-15T16:59:05.570
> 
> 标签：javascript, html, dom

我只是想知道两者之间有什么区别。我注意到这两种方法有时会给出不同的结果。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-15T17:01:54.177

不同之处在于它`element.value`是实时的，如果用户更改了文本框输入，它将反映这一点，并向您显示新值。

While`getAttribute('value')`仍将显示原始`value="whateverWasHere"`值。

[**jsFiddle 演示**](http://jsfiddle.net/J9Mat/)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-15T17:05:19.303

`.value`不映射到任何属性。

`.defaultValue`映射到`"value"`属性。因此，当您说`elem.getAttribute("value")`这与`elem.defaultValue`.

此外，`.defaultValue`反映`.value`输入未触及的时间（[脏值标志为 false](https://stackoverflow.com/a/11779426/995876)）。用户交互更改输入值后，此映射停止。当输入未被改变时，您可以更改`.defaultValue`（因此`.setAttribute("value")`）并看到它也发生了变化`.value`。并不是说这实际上有用，但有趣的琐事。

# c++ - 尝试在 QLabel 上绘画失败（无法在没有对象的情况下调用成员函数 'virtual void QLabel::paintEvent(QPaintEvent*)'）

> ID：11973691
> 
> 赞同：1
> 
> 时间：2012-08-15T17:00:02.140
> 
> 标签：c++, qt, paint

我看过很多关于如何使用paintevent的例子，但我就是无法让它工作。

我的 .ui 文件中有一个名为“图像”的标签，我正在尝试在其中进行绘制。我失败得很惨。在我见过的大多数例子中，他们使用

```
QLabel::paintEvent(e) 
```

但我不能使用它，我得到：

```
error: cannot call member function 'virtual void QLabel::paintEvent(QPaintEvent*)' without object 
```

而且，当我使用

```
ui->image->paintEvent(e); 
```

我明白了

```
/usr/include/qt4/QtGui/qlabel.h:141: error: 'virtual void QLabel::paintEvent(QPaintEvent*)' is protected 
```

我似乎遗漏了一些东西......这是我尝试实现的代码的一部分：

```
void crop_my_image::paintEvent(QPaintEvent *e)
{
    ui->image->paintEvent(e);
    QPainter painter(ui->image);
    painter.setPen(QPen(QBrush(QColor(0,0,0,180)),1,Qt::DashLine));
    painter.setBrush(QBrush(QColor(255,255,255,120)));
    painter.drawRect(selectionRect);
} 
```

`crop_my_image`是QDialog类型的！

PS：如果不是`ui->image->paintEvent(e);`我使用`QDialog::paintEvent(e);`我可以成功绘制我的对话框，那么我应该走在正确的道路上！

提前感谢您的任何答案！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T17:14:15.620

您必须对标签执行与使用 QDialog 所做的完全相同的操作，即创建将从 QLabel 继承并实现paintEvent 函数的类。例子：

```
//MyLabel.h
class MyLabel : public QLabel
{
    Q_OBJECT
    public:
        MyLabel(QWidget *parent = 0);
    private:
        void paintEvent(QPaintEvent *);
};

//MyLabel.cpp

MyLabel::MyLabel(QWidget *parent)
    : QLabel(parent)
{
    /*...*/

}

void MyLabel::paintEvent(QPaintEvent *)
{
    /* paint somehting on your label*/
} 
```

而且你将能够做到：

```
void crop_my_image::paintEvent(QPaintEvent *e)
{
    myLabelObject->paintEvent(e);
    QPainter painter(ui->image);
    painter.setPen(QPen(QBrush(QColor(0,0,0,180)),1,Qt::DashLine));
    painter.setBrush(QBrush(QColor(255,255,255,120)));
    painter.drawRect(selectionRect);
} 
```

但首先，为什么要调用此方法？

# mysql - MySQL在同一张表中存储不同的嵌套集

> ID：11973693
> 
> 赞同：0
> 
> 时间：2012-08-15T17:00:07.467
> 
> 标签：mysql, data-structures, dataset, nested-sets, r-tree

我有一个存储嵌套集的表。它存储由collectionid区分的不同嵌套集（是的，我在这里混合了术语，真的应该是nestedsetid）。它看起来有点像这样：

```
id | orgid | leftedge | rightedge | level | collectionid
1  | 123   |  1       |  6        |  1    |   1
2  | 111   |  2       |  3        |  2    |   1
3  |  23   |  4       |  5        |  2    |   1
4  |  67   |  1       |  2        |  1    |   2
5  | 123   |  3       |  4        |  1    |   2
6  | 600   |  1       |  6        |  1    |   3
7  |  11   |  2       |  5        |  2    |   3
8  | 111   |  3       |  4        |  3    |   3 
```

最初我想利用 R-Tree 索引，但我为此看到的代码：`LineString(Point(-1, leftedge), Point(1, rightedge))`不会很有效，因为它没有考虑到 collectionid 并且这个**id** :1 和**id** :6 最终会成为相同。

有没有办法可以在我当前的设置中使用 R-Tree 索引...当然你可以在同一个表中有不同的嵌套集？我的主要目标是能够使用[MBRWithin 和 MBRContains](http://dev.mysql.com/doc/refman/5.1/en/functions-for-testing-spatial-relations-between-geometric-objects.html)函数。使用 MySQL 5.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T07:20:31.650

对于一维数据（这些是 1d 间隔，对吗？），存在比 r-tree 更好的索引结构。这些是为 2-10 维的动态数据设计的（在更高的维度上，性能不太好，因为拆分策略和距离函数不再工作得很好）

实际上，对于您的用例，经典 SQL 应该可以很好地工作。并且数据库可以有效地利用其索引。拥有良好的索引结构是一回事，但您希望数据库尽可能地利用其拥有的索引。

因此，我只是索引`leftEdge`和`rightEdge`和`<, <=, >, >=`函数。他们很快！对于collectionid 列，位图索引应该是好的。

# java - 如何将目录添加到 Clojure 的类路径？

> ID：11973694
> 
> 赞同：11
> 
> 时间：2012-08-15T17:00:16.350
> 
> 标签：java, clojure

我已经将带有 Maven 的库安装到 ~/.m2/repository/ 目录中。我想将该路径添加到默认的 Clojure 类路径。我找不到如何做到这一点的文档。

有什么提示吗？

干杯!

```
clj
Clojure 1.4.0
user=> (require '[clojure.java.jmx :as jmx])
FileNotFoundException Could not locate clojure/java/jmx__init.class or clojure/java/jmx.clj on classpath:   clojure.lang.RT.load (RT.java:432) 
```

默认的类路径是：

```
user=> (println (seq (.getURLs (java.lang.ClassLoader/getSystemClassLoader))))
(#<URL file:/Users/myuser/cljmx/> #<URL file:/usr/local/Cellar/clojure/1.4.0/clojure-1.4.0.jar> #<URL file:/Users/myuser/cljmx/>)
nil 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-15T18:09:10.920

Leiningen 通过保持与项目关联的类路径设置确实使这个过程不那么痛苦，更重要**的是导致了可重复的构建过程**。您可以在多年后回到该项目并仍然获得repl。在这些情况下使用 leiningen 的一般概述：

*   lein 新项目名称
*   使用您选择的名称将您需要的库添加到您的 project.clj 文件中
*   运行 lein deps 打印出用于将 jar 添加到本地 repo 的命令
*   添加罐子
*   再次运行 lein deps（如果使用 leiningen2，可以跳过此步骤）
*   运行 lein repl
*   请享用

这是假设您正在使用的库还不是 maven 存储库中包的一部分或不可用，很多都是。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-15T17:13:38.563

不痛苦，流行的方法是不要直接混淆 maven 和类路径以及 JRE 并使用 leiningen：[https ://github.com/technomancy/leiningen/](https://github.com/technomancy/leiningen/)

否则，您可以修改其中的任何内容`clj`并以 java 喜欢的任何方式添加/设置类路径。例如，请参阅[在 java 类路径中设置多个 jar](https://stackoverflow.com/questions/219585/setting-multiple-jars-in-java-classpath)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-08-17T15:12:08.997

应该注意的是，您还可以选择在运行时使用库 pomegranate [https://github.com/cemerick/pomegranate添加类路径](https://github.com/cemerick/pomegranate)

这让你喜欢：

```
 (require '[cemerick.pomegranate :as pom])
 (pom/add-classpath "/home/user/~.m2/....") 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-08-15T17:13:59.157

我假设这`clj`是一个启动 Clojure REPL 的脚本。查看此脚本并找到与此类似的行：

```
java -cp /path/to/clojure.jar clojure.main 
```

在这里，您开始`clojure.main`在类路径上使用“clojure.jar”的类。要添加更多 jar，只需将它们添加到`-cp`选项值的末尾即可。例如在 Linux 上：

```
java -cp /path/to/clojure.jar:/path/to/mylib.jar clojure.main 
```

（在 Windows 上使用`;`而不是）`:`

然而，很快你就会厌倦这种方式，并会寻找项目管理工具。所以现在就开始使用它是有意义的。看看[**Leiningen**](http://leiningen.org/) - 它基于 Maven 为您管理依赖项（因此添加新 jar 将非常容易）并具有 REPL。

# iphone - iPhone - Objective C - 添加 NIAttributedLabel 模块时出现 Nimbus 编译错误

> ID：11973696
> 
> 赞同：-1
> 
> 时间：2012-08-15T17:00:33.350
> 
> 标签：iphone, objective-c, nimbus

我正在切换到 Nimbus 以在我的项目中替换 Three20。
当我将 AttributedLabel 模块添加到项目中时，我看到 24 个编译错误。
这是其中之一：
您知道如何解决吗？
**（当我从我的项目中删除 AttributedLabel 时，我可以编译该项目。）**

```
Ld /Users/return/Library/Developer/Xcode/DerivedData/MyApp-bmmfgcavsjqopdfantffsvnydpqj/Build/Products/Debug-iphonesimulator/MyApp.app/MyApp normal i386
    cd /Users/return/Projects/Experiments/MyApp
    setenv MACOSX_DEPLOYMENT_TARGET 10.6
    setenv PATH "/Xcode4.3.2/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Xcode4.3.2/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
    /Xcode4.3.2/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch i386 -isysroot /Xcode4.3.2/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk -L/Users/return/Library/Developer/Xcode/DerivedData/MyApp-bmmfgcavsjqopdfantffsvnydpqj/Build/Products/Debug-iphonesimulator -F/Users/return/Library/Developer/Xcode/DerivedData/MyApp-bmmfgcavsjqopdfantffsvnydpqj/Build/Products/Debug-iphonesimulator -filelist /Users/return/Library/Developer/Xcode/DerivedData/MyApp-bmmfgcavsjqopdfantffsvnydpqj/Build/Intermediates/MyApp.build/Debug-iphonesimulator/MyApp.build/Objects-normal/i386/MyApp.LinkFileList -mmacosx-version-min=10.6 -Xlinker -objc_abi_version -Xlinker 2 -fobjc-arc -Xlinker -no_implicit_dylibs -D__IPHONE_OS_VERSION_MIN_REQUIRED=40000 -framework UIKit -framework Foundation -framework CoreGraphics -framework CoreData -o /Users/return/Library/Developer/Xcode/DerivedData/MyApp-bmmfgcavsjqopdfantffsvnydpqj/Build/Products/Debug-iphonesimulator/MyApp.app/MyApp

Undefined symbols for architecture i386:
  "_CTFramesetterCreateWithAttributedString", referenced from:
      -[NIAttributedLabel sizeThatFits:] in NIAttributedLabel.o
      -[NIAttributedLabel drawTextInRect:] in NIAttributedLabel.o
  "_CTFramesetterSuggestFrameSizeWithConstraints", referenced from:
      -[NIAttributedLabel sizeThatFits:] in NIAttributedLabel.o
  "_CTLineGetTypographicBounds", referenced from:
      -[NIAttributedLabel getLineBounds:point:] in NIAttributedLabel.o
  "_CTFrameGetLines", referenced from:
      -[NIAttributedLabel linkAtPoint:] in NIAttributedLabel.o
      -[NIAttributedLabel isPoint:nearLink:] in NIAttributedLabel.o
      -[NIAttributedLabel _rectsForLink:] in NIAttributedLabel.o
      -[NIAttributedLabel drawTextInRect:] in NIAttributedLabel.o
  "_CTFrameGetLineOrigins", referenced from:
      -[NIAttributedLabel linkAtPoint:] in NIAttributedLabel.o
      -[NIAttributedLabel isPoint:nearLink:] in NIAttributedLabel.o
      -[NIAttributedLabel _rectsForLink:] in NIAttributedLabel.o
      -[NIAttributedLabel drawTextInRect:] in NIAttributedLabel.o
  "_CTLineGetStringIndexForPosition", referenced from:
      -[NIAttributedLabel linkAtPoint:] in NIAttributedLabel.o
  "_CTLineGetGlyphRuns", referenced from:
      -[NIAttributedLabel _rectForRange:inLine:lineOrigin:] in NIAttributedLabel.o
  "_CTRunGetStringRange", referenced from:
      -[NIAttributedLabel _rectForRange:inLine:lineOrigin:] in NIAttributedLabel.o
  "_CTRunGetTypographicBounds", referenced from:
      -[NIAttributedLabel _rectForRange:inLine:lineOrigin:] in NIAttributedLabel.o
  "_CTLineGetOffsetForStringIndex", referenced from:
      -[NIAttributedLabel _rectForRange:inLine:lineOrigin:] in NIAttributedLabel.o
  "_CTFramesetterCreateFrame", referenced from:
      -[NIAttributedLabel drawTextInRect:] in NIAttributedLabel.o
  "_CTLineGetStringRange", referenced from:
      -[NIAttributedLabel drawTextInRect:] in NIAttributedLabel.o
  "_CTFrameDraw", referenced from:
      -[NIAttributedLabel drawTextInRect:] in NIAttributedLabel.o
  "_CTParagraphStyleCreate", referenced from:
      -[NSMutableAttributedString(NimbusAttributedLabel) setTextAlignment:lineBreakMode:range:] in NSMutableAttributedString+NimbusAttributedLabel.o
  "_CTFontCreateWithName", referenced from:
      -[NSMutableAttributedString(NimbusAttributedLabel) setFont:range:] in NSMutableAttributedString+NimbusAttributedLabel.o
  "_kCTFontAttributeName", referenced from:
      -[NSMutableAttributedString(NimbusAttributedLabel) setFont:range:] in NSMutableAttributedString+NimbusAttributedLabel.o
  "_kCTForegroundColorAttributeName", referenced from:
      -[NSMutableAttributedString(NimbusAttributedLabel) setTextColor:range:] in NSMutableAttributedString+NimbusAttributedLabel.o
  "_kCTKernAttributeName", referenced from:
      -[NSMutableAttributedString(NimbusAttributedLabel) setKern:range:] in NSMutableAttributedString+NimbusAttributedLabel.o
  "_kCTParagraphStyleAttributeName", referenced from:
      -[NSMutableAttributedString(NimbusAttributedLabel) setTextAlignment:lineBreakMode:range:] in NSMutableAttributedString+NimbusAttributedLabel.o
  "_kCTStrokeColorAttributeName", referenced from:
      -[NSMutableAttributedString(NimbusAttributedLabel) setStrokeColor:range:] in NSMutableAttributedString+NimbusAttributedLabel.o
  "_kCTStrokeWidthAttributeName", referenced from:
      -[NSMutableAttributedString(NimbusAttributedLabel) setStrokeWidth:range:] in NSMutableAttributedString+NimbusAttributedLabel.o
  "_kCTUnderlineColorAttributeName", referenced from:
      -[NSMutableAttributedString(NimbusAttributedLabel) setUnderlineStyle:modifier:range:] in NSMutableAttributedString+NimbusAttributedLabel.o
  "_kCTUnderlineStyleAttributeName", referenced from:
      -[NSMutableAttributedString(NimbusAttributedLabel) setUnderlineStyle:modifier:range:] in NSMutableAttributedString+NimbusAttributedLabel.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T07:01:42.973

在演示“CustomTextAttributedLabelViewController.m”中：

```
// This controller requires the following frameworks:
//
// Foundation.framework
// UIKit.framework
**// CoreText.framework**
// QuartzCore.framework 
```

# php - 如何访问不在根目录且包含内容的页面

> ID：11973697
> 
> 赞同：3
> 
> 时间：2012-08-15T17:00:33.583
> 
> 标签：php, apache

我正在开发一个使用 PHP 和 JavaScript 的 Web 应用程序，如果某些页面包含其他文件（即“包含一次”），那么在访问一些不在根目录上的页面时会遇到一些麻烦。

```
[file system]/www/project/test/test.php 
```

项目文件夹具有`index.php`. 这是我的代码示例：

```
include_once('../config/config.php');
include_once('../database/database.php');
echo 'Test.php';

$config = new Config();
$dbhandle = new Database();

[...] 
```

我在这里做错了什么？

来自 Apache 的错误日志告诉我没有文件 config.php 和 database.php。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T17:02:49.090

使用 $_SERVER['DOCUMENT_ROOT'] 将路径重新定位到服务器的根路径，如下所示：

```
 $root_path =  $_SERVER['DOCUMENT_ROOT'] ; //Returns the root path of your server

 //Then call your inlude_once with the absolute path
 include_once($root_path . '/project/config/config.php') 
```

所以现在你所有的路径都是绝对的而不是相对的。希望有帮助。

PS：您还可以使用 php 框架来获得舒适，该框架将在更大的项目中更轻松地路由您的依赖项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T17:03:01.317

获取文档根目录使用

```
$_SERVER['DOCUMENT_ROOT']; 
```

因此

```
include_once($_SERVER['DOCUMENT_ROOT'] . '/project/config/config.php'); 
```

应该为你工作。

# ruby-on-rails - 如何在 Ruby on Rails 3.2.7 的索引页面上显示来自 Acts as Taggable On 的标签云？

> ID：11973700
> 
> 赞同：1
> 
> 时间：2012-08-15T17:00:44.353
> 
> 标签：ruby-on-rails, acts-as-taggable-on

我对 Ruby on Rails 很陌生，所以我可能缺少一个简单的解决方案。

tldr 版本 - 如何在该模型的索引页面上显示分配给特定模型的所有实例的不同（即不重复）标签的标签云上的 Acts As Taggable On 标签云？

更长的版本 - 我有一个名为 Video 的模型，在该模型中，我成功地使用[Acts as Taggable On](https://github.com/mbleigh/acts-as-taggable-on/)和[这个精彩的教程](http://www.alexmuraro.me/posts/acts-as-taggable-on-a-short-tutorial)实现了一个标记功能。

我现在想做的是，在视频的索引页面 (index.html.erb) 上，显示用户分配给单个视频的所有单个标签的摘要。例如，假设我有三个视频，每个视频标记如下：

```
Video 1: great, banana, book
Video 2: small, great, apple
Video 3: rubbish, small, banana 
```

我希望索引页面显示以下标签列表：

```
great, banana, book, small, apple, rubbish. 
```

我的模型（省略）的代码如下：

```
class Video < ActiveRecord::Base

attr_accessible :tag_list # Lots of other fields in here as well, but not relevant

acts_as_taggable_on :tags

end 
```

我的视频助手中的代码如下：

```
module VideosHelper

  include ActsAsTaggableOn::TagsHelper

end 
```

最后，根据 gem 的文档，我在控制器中添加了以下代码：

```
class VideosController < ApplicationController
  def tag_cloud
    @tags = Video.tag_counts_on(:tags)
  end
end 
```

那么，我应该在视图的索引页面中添加什么代码？根据文档，我再次尝试了以下操作：

```
<% tag_cloud(@tags, %w(css1 css2 css3 css4)) do |tag, css_class| %>
  <%= link_to tag.name, { :action => :tag, :id => tag.name }, :class => css_class %>
<% end %> 
```

但是当我转到视频索引页面时，这会返回以下错误：

```
undefined method `empty?' for nil:NilClass 
```

正如我所说，我显然遗漏了一些简单的东西，但我对 Rails（和 Ruby）完全陌生，所以我仍在寻找自己的脚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T11:27:29.603

好的，经过一番破解，我*想*我已经找到了解决方案，以防其他想知道如何做到这一点的人偶然发现这个问题。

但是，请注意，我是 RoR 的初学者，所以这可能不是最好的解决方案 - 如果我做错了什么，或者您有更好的解决方案，请随时告诉我！

在您的视图中添加此代码以按顺序显示特定模型的标签列表：

```
@tags = ActsAsTaggableOn::Tag.all(:order=>'name')

<% if @tags.count > 0 %>
  <ul>
    <% @tags.each do |tag| %>
      <li><%= link_to tag.name, tagged_url(:tag => tag.name) %></li>
    <% end %>
  </ul>
<% else %>
  <p>There are no tags on the system.</p>
<% end %> 
```

这导致了一个非常基本的显示，由于我缺乏经验，我建议谨慎使用这种方法 - 我确信它不是最好的，甚至不是“最安全”的方法，所以要小心！

# email - 提供电子邮件帐户信息的最佳实践

> ID：11973701
> 
> 赞同：1
> 
> 时间：2012-08-15T17:00:47.380
> 
> 标签：email, default-value

我在一家构建嵌入式系统的公司工作，我们目前正在为住宅消费者开发一个系统，直到最近我们的主要关注点一直是工业和商业应用。

该产品的一项功能是设备可以直接发送电子邮件。问题是 SMTP 库只是一个客户端（它应该是），因此需要配置连接到邮件服务器。

目前关于我们是否应该提供开箱即用的邮件服务器配置信息的争论正在进行中。目前，这场辩论使我们的团队在开发人员和管理层之间产生了很大的分歧。

开发人员认为“普通”用户提供服务器的 FQDN 或 IP、端口、用户、密码和“发件人”地址会过于繁琐。因此，最好只需要用户的电子邮件地址来完成配置。

鉴于管理层担心资源利用（当然，每个人都希望我们的系统有数百万或至少数千名用户！）以及“恶意”用户窃取我们提供的信息并将其用于非法目的；虽然开发人员认为这不太可能，但正如管理层所指出的那样，只需要一个垃圾邮件发送者就可以获取帐户信息，然后我们将被迫为所有人关闭它。

当前的折衷方案是为每个设备提供一个唯一的电子邮件帐户，以便将电子邮件从我们的产品中继到用户的电子邮件帐户。显然，这会造成管理上的噩梦，特别是因为我们目前使用的是第三方电子邮件托管解决方案，并且无法自动创建这些电子邮件。管理层不喜欢这样一个事实，即我们将其他一切设计为自动化，然后通过手动创建每个电子邮件帐户，然后手动配置每个设备以使用该帐户来抛出一个很大的减速带。

当然，开发人员建议将电子邮件服务引入内部，但这会产生我们无法承受的其他问题。

这导致我向社区提出我的问题，你有没有处理过这个问题？您决定采用什么解决方案？为什么那是最适合您的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T17:26:56.977

由于管理层担心“恶意”用户会免费使用您公司的电子邮件服务（除了这种想法并不是那么荒谬），因此您不必强迫人们通过配置的麻烦或不给你们带来负担的唯一机会手动创建帐户是为每个客户提供一个唯一的 ID。此 ID 将允许您关闭恶意用户的服务。

一种方法是将每个客户端配置为在每封电子邮件的标题中嵌入一个唯一 ID。看到[这个问题](https://stackoverflow.com/questions/1509213/embed-indentifier-within-an-email?rq=1)。然后，在服务器端，您必须实施黑名单并对照它检查每封电子邮件的标题。

就是这样，如果不进一步了解您的技术堆栈，就不可能提供更详细的答案。

# php - 如何将 PHP 变量名传递给 Javascript 函数

> ID：11973710
> 
> 赞同：1
> 
> 时间：2012-08-15T17:01:27.017
> 
> 标签：php, javascript, html, function, variables

我有两个页面，一个叫做upload-file.php，这个页面将图像上传到数据库和我的文件夹中。

我的 PHP 页面看起来像这样。

```
 if (move_uploaded_file($_FILES['uploadfile']['tmp_name'], $file))  
    { 

        $insert=mysql_query("insert into match_item_image set item_id='".$_SESSION["session_temp"]."', image='".$name."',   adid='$adid'") or die(mysql_error());
$cc=mysql_insert_id();
        echo "success".$cc; 
```

我的另一个页面包含一个 javascript 函数，它在上传时显示我的图像。我遇到的问题是在将图像上传到我的文件夹时需要更改图像名称。我能够更改图像名称，但是当我上传图像时它显示为空白，因为当用户上传文件时，JavaScript 函数正在寻找图像的原始名称。

这是功能的一部分：

```
$(function()

{

    var btnUpload=$('#upload');
    var status=$('#status');
    new AjaxUpload(btnUpload, {
    action: 'upload-file.php',
    name: 'uploadfile',
    onSubmit: function(file, ext)
    {
     if (! (ext && /^(jpg|png|jpeg|gif)$/.test(ext))){ 
     // extension is not allowed 
    status.text('Only JPG, PNG or GIF files are allowed');
    return false;
    }status.text('Uploading...');
    },

    onComplete: function(file, response)
    {
        //On completion clear the status
        status.text('');
        //Add uploaded file to list
        var bb=response.substr(0,7)
        var idd=response.replace('success',' ');
        var idb =idd.replace(/^\s*|\s*$/g,'');
        if(bb==="success")
        {

            $('<span id='+idd+'></span>').appendTo('#files').html('<img src="upload/+file+" alt="" width="290" height="330" class="image1" /><br><a href="javascript:void(0)"    onClick="deleteFile('+idd+');"  class="image1"   > <span   style="font-weight:bold;   font-size:14px; color:red;" >   Delete     </span></a>').addClass('success');
        }
        else 
        {
            $('<span></span>').appendTo('#files').text(response).addClass('error');
        } 
```

请让我知道是否有人可以提供帮助。

我是 JavaScript 新手。

你好，

我忘了添加上传图片的表单看起来像这样

```
<div id="upload" ><span>Upload Image<span></div><span id="status"></span>
<table><tr><td id="files"></td></tr></table> 
```

我只需要知道如何让我的代码显示我保存在我的文件夹中的图像名称，并且在我上传它之后，而不是用户上传的原始图像名称，因为可能有其他用户上传了具有相同名称的图像他们混在一起了。

感谢大家的帮助。我已经为此工作了数周，但我似乎无法弄清楚。我只是不想放弃这段代码，因为它正是我所需要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T17:04:25.300

您可以像这样将 PHP 直接写入您的 javascript 中：

```
<script>
alert('<?php echo $myVar; ?>');
</script> 
```

或者，您可以创建 AJAX 调用来获取由 PHP 脚本处理的数据库变量。

根据您的代码推荐：

让您的 onSuccess 函数为您提供 PHP 页面中的文件名。您可以使用 JSON 执行此操作。请询问您是否需要帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T17:20:51.843

而不是这个PHP代码：

```
 echo "success".$cc; 
```

您可以将结果输出为 JSON 字符串，可以通过 JavaScript 轻松访问：

```
 header("Content-Type: application/json");
    echo "{
      \"status\" : \"success\",
      \"filename\" : "$file",
      \"id\" : $cc
    }"; 
```

而不是这个 JavaScript 部分

```
 //Add uploaded file to list
    var bb=response.substr(0,7)
    var idd=response.replace('success',' ');
    var idb =idd.replace(/^\s*|\s*$/g,''); 
```

然后，您将能够访问结果的参数，就像响应对象的属性一样：

```
 var bb = response.status;
    var idd = response.id;
    var filename = response.filename; 
```

有关详细信息，请参阅[http://de.wikipedia.org/wiki/JSON](http://de.wikipedia.org/wiki/JSON)。您还可以使用 php 函数进行 JSON 输出：[http ://www.php.net/manual/de/function.json-encode.php](http://www.php.net/manual/de/function.json-encode.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T17:04:57.323

```
echo '<script type="text/javascript">var myJSVar = '.$myPHPVar.';</script>'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T17:06:42.607

您需要让 PHP 脚本输出新名称，然后在 JavaScript 中使用它。您将如何继续提取响应取决于您的 AJAX 代码，我不熟悉您在示例中使用的内容。

# c++ - C++ 视频游戏编程 IDE

> ID：11973711
> 
> 赞同：4
> 
> 时间：2012-08-15T17:01:31.290
> 
> 标签：c++, ide, self-updating

我正在寻找一个 C++ IDE，我可以在其中积极玩游戏并实时测试更新，而不是测试它、重做代码、编译它并再次运行它。我正在运行 Windows 7 x86 专业版。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T17:22:48.720

~~这不是一个真正的答案，因此可能不应该得到支持，但有信息。~~

~~我不知道任何可以对代码进行运行时更新的 C++ IDE，但这绝对不是不可能的。有很多 C++ 汇编器已经是 JIT 代码，实时更新只是我所知道的还没有 IDE 采取的下一步。
[asmjit](http://code.google.com/p/asmjit/)可以 JIT C++
Visual Studio 可以 JIT C++/CLI（这不是 C++）（RMartinho 更正了 VIsual Studio 将 C++/CLI 编译为 IL，然后 JITs IL。技术上不同。）cling
[使用](http://root.cern.ch/drupal/content/cling)clang fruntend 和[LLVM](http://llvm.org/)后端，它有一个JIT代码生成系统。~~

R.Martinho 还提醒我，Microsoft Visual Studio 已经有了这个功能。 [http://msdn.microsoft.com/en-us/library/esaeyddf(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/esaeyddf(v=vs.100).aspx) 如果您“停止”代码，您可以进行更改，它将应用这些更改并恢复执行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T17:17:50.140

[http://runtimecompiledcplusplus.blogspot.co.uk/](http://runtimecompiledcplusplus.blogspot.co.uk/)上有一个有趣的项目正在解决这个问题，看起来它可能对你有用；我自己没有使用过它，但如果仍然有点生硬，它看起来很活跃。它使用 Visual Studio 2010 编译器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T17:19:28.193

不编译就无法运行 C++ 代码。语言之间的细微句法差异不应该成为问题，因此您不应该将自己局限于一种语言。

我建议你给[Unity](http://unity3d.com/)一个机会；有一个相当强大的免费版本可用。您可以使用 C#（类似于 C++ 的语言）、UnityScript（类似于 JavaScript）或 Boo（类似于 Python）编写脚本，并且可以立即测试结果，而无需编译。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-15T17:32:16.630

在 Visual Studio 中编辑并继续呢？为了使用它，您必须暂停执行（通过断点或暂停按钮），重新编译并恢复。请注意，您可以在程序运行时编辑代码。我知道您无法实时测试游戏，但您不必重新加载资源等。它的 IDE 集成使其使用起来非常简单直接。

但是，如果您希望更改实时可见，请考虑使用脚本语言，例如 Lua。他们的目的之一是您想要实现的目标。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-02-13T09:49:58.927

我在[Runtime Compiled C++ 的替代 wiki 页面](https://github.com/RuntimeCompiledCPlusPlus/RuntimeCompiledCPlusPlus/wiki/Alternatives)上列出了 C++ 代码的运行时编译选项。

根据您可能对[Recode](http://www.indefiant.com/)或[Alcanterea](https://github.com/i-saint/Alcantarea)感兴趣的声音。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-02-13T09:53:47.137

组织您的 C++ 游戏以使用插件，并添加一项功能以在游戏期间加载新的（二进制版本）插件。

然后，你可以玩你的游戏，重新编译一个插件，重新加载它（所以在运行时调用你的[动态链接器](https://en.wikipedia.org/wiki/Dynamic_linker)），然后继续玩。

它不是万无一失的，但它通常可以工作。

^(当然，您不能卸载在（或某些线程的）[调用堆栈](https://en.wikipedia.org/wiki/Call_stack)上有一些活动调用框架的插件。我建议避免卸载旧插件...)

# r - S4 对象组合不当行为？

> ID：11973719
> 
> 赞同：3
> 
> 时间：2012-08-15T17:02:02.910
> 
> 标签：r, object, s4

我有以下问题（代码如下）：我有两个 S4 类，让我们用`A`和指定它们`B`。该类`B`有一个 A 型对象列表，名为`a.list`. 该类`A`有一个名为 的方法`test()`。然后，我创建一个类型为 的对象`A`，称为`a`，和一个类型为 的对象`B`，`b`然后我将`a`对象插入到 的列表中`b@a.list`。

当我提取`a`对象并在其中使用该`test`方法时，会发生以下错误：

```
Error en function (classes, fdef, mtable)  : 
  unable to find an inherited method for function "test", for signature "list" 
```

但是我直接在`a`对象中使用方法，一切正常。

知道我做错了什么吗？

提前致谢

现在，代码：

```
> setClass("A", representation(a="character", b="numeric"))
> a <- new("A", a="Adolfo", b = 10)
> a
An object of class "A"
Slot "a":
[1] "Adolfo"

Slot "b":
[1] 10

> print(a)
An object of class "A"
Slot "a":
[1] "Adolfo"

Slot "b":
[1] 10

> setClass("B", representation(c="character", d="numeric", a.list="list"))
> b <- new("B", c="chido", d=30, a.list=list())
> b
An object of class "B"
Slot "c":
[1] "chido"

Slot "d":
[1] 30

Slot "a.list":
list()

> b@a.list["objeto a"] <- a
> b
An object of class "B"
Slot "c":
[1] "chido"

Slot "d":
[1] 30

Slot "a.list":
$`objeto a`
An object of class "A"
Slot "a":
[1] "Adolfo"

Slot "b":
[1] 10

> setGeneric(name="test", 
+            def = function(object,...) {standardGeneric("test")}
+            )
[1] "test"

> setMethod("test", "A",
+           definition=function(object,...) {
+ cat("Doing something to an A object....\n")
+ }
+ )
[1] "test"
> b@a.list[1]
$`objeto a`
An object of class "A"
Slot "a":
[1] "Adolfo"

Slot "b":
[1] 10

> test(b@a.list[1])
Error en function (classes, fdef, mtable)  : 
  unable to find an inherited method for function "test", for signature "list"
> test(a)
Doing something to a....
> 
```

再次感谢...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T17:12:12.470

您必须使用双方括号提取列表的单个元素：

```
 test(b@a.list[[1]]) 
```

如果您使用单方括号，则索引列表的子集，它仍然只是一个列表，而不是 class `A`：

```
> class(b@a.list[1])
[1] "list"

> class(b@a.list[[1]])
[1] "A"
attr(,"package")
[1] ".GlobalEnv" 
```

# mongodb - 如何使用多个键有效地执行“不同”？

> ID：11973725
> 
> 赞同：51
> 
> 时间：2012-08-15T17:02:49.953
> 
> 标签：mongodb

例如，有一个这样的集合：

> {市场：'SH'，代码：'000001'，日期：'2012-01-01'，价格：1000}
> {市场：'SZ'，代码：'000001'，日期：'2012-01-01'，价格：1000}
> {市场：'SH'，代码：'000001'，日期：'2012-01-02'，价格：1000}
> {市场：'SZ'，代码：'000001'，日期：'2012-01 -02'，价格：1000}
> {市场：'SH'，代码：'000002'，日期：'2012-01-03'，价格：1000}
> ...

该集合包含数以千万计的文档。

我想用两个键调用 distinct：

```
collection.distinct('market', 'code'); 
```

并得到结果：

> [{市场：'SH'，代码：'000001'}，{市场：'SZ'，代码：'000001'}，{市场：'SH'，代码：'000002'}]

由于本机 distinct 命令只接受一个键，因此我尝试使用 map-reduce 来实现它。但是 map-reduce 对原生 distinct 来说太慢了。在我的一键 distinct 测试中，map-reduce 花费的时间大约是原生 distinct 的十倍。
有没有一种有效的方法来实现多键不同？

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2012-08-16T16:44:31.710

如果您愿意等待即将发布的 MongoDB 2.2 版本，您可以使用聚合框架有效地运行此查询：

```
collection = db.tb;
result = collection.aggregate( 
            [
                {"$group": { "_id": { market: "$market", code: "$code" } } }
            ]
        );
printjson(result); 
```

在我的测试机器上的一百万条记录集合上，这在 4 秒内运行，而 map/reduce 版本花了一分钟多。

# facebook - 身份验证后重定向到 Facebook 页面选项卡

> ID：11973734
> 
> 赞同：0
> 
> 时间：2012-08-15T17:03:27.187
> 
> 标签：facebook, facebook-php-sdk, facebook-apps, facebook-page, facebook-canvas

我有一个 facebook 页面，在其中添加了我的应用程序的选项卡。我使用以下代码检查用户是否已通过身份验证：-

```
<?php
     $app_id = "MY APP ID";

     $canvas_page = "MY CANVAS PAGE";

     $auth_url = "https://www.facebook.com/dialog/oauth?client_id=" 
            . $app_id . "&redirect_uri=" . urlencode($canvas_page);

     $signed_request = $_REQUEST["signed_request"];

     list($encoded_sig, $payload) = explode('.', $signed_request, 2); 

     $data = json_decode(base64_decode(strtr($payload, '-_', '+/')), true);

     if (empty($data["user_id"])) {
            echo("<script> top.location.href='" . $auth_url . "'</script>");
     } else {
            echo("<script> location.href='index.php'</script>");
     } 
?> 
```

现在`CANVAS PAGE`必须相同`CANVAS PAGE`，我在应用程序中进行了更改，登录后页面重定向到`https://apps.facebook.com/myappname/`，但我希望它重定向到我的*Facebook 页面选项卡*；对于这个 - [https://www.facebook.com/myfbpage/app_82136128736123](https://www.facebook.com/myfbpage/app_82136128736123)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T17:20:26.113

你是对的。redirect_uri 必须是应用程序“拥有”的 URL。这意味着它列在应用程序设置中。

您的画布页面必须使用 JavaScript 重定向（就像您正在使用的那样）。唯一的区别是您需要记住您的应用程序是在 iframe 中运行的。您必须更改**top**而不是文档的 location 属性。Top 引用页面上最顶部的框架，这是应用程序执行正确重定向的唯一方法。

```
echo "<script language=javascript>";
echo "top.location.href ='".$page_url."';";
echo "</script>";
exit(); 
```

这很丑，许多人拒绝相信这是正确的方法，但我还没有找到替代方法。

# windows-phone-7 - Wp7 相机按钮事件

> ID：11973740
> 
> 赞同：1
> 
> 时间：2012-08-15T17:04:09.183
> 
> 标签：windows-phone-7, camera

在 Windows Phone 7 应用程序中，是否可以在代码中捕获硬件相机按钮按下事件？现在，当我按下相机按钮时，什么也没有发生，我不知道如何连接到该事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T17:23:14.613

是的你可以。检查此[链接](http://msdn.microsoft.com/en-us/library/hh202963%28v=vs.92%29.aspx)。这是事件的一个示例：

```
// The event is fired when the shutter button receives a half press.
CameraButtons.ShutterKeyHalfPressed += OnButtonHalfPress;

// The event is fired when the shutter button receives a full press.
CameraButtons.ShutterKeyPressed += OnButtonFullPress;

// The event is fired when the shutter button is released.
CameraButtons.ShutterKeyReleased += OnButtonRelease;

// Provide auto-focus with a half button press using the hardware shutter button.
private void OnButtonHalfPress(object sender, EventArgs e)
{
        if (cam != null)
        {
            // Focus when a capture is not in progress.
            try
            {
                this.Dispatcher.BeginInvoke(delegate()
                {
                    txtDebug.Text = "Half Button Press: Auto Focus";
                });

                cam.Focus();
            }
            catch (Exception focusError)
            {
                // Cannot focus when a capture is in progress.
                this.Dispatcher.BeginInvoke(delegate()
                {
                    txtDebug.Text = focusError.Message;
                });
            }
        }
    } 
```

# python - 从使用 python pandas 制作的数据透视表中过滤和选择

> ID：11973741
> 
> 赞同：7
> 
> 时间：2012-08-15T17:04:17.280
> 
> 标签：python, indexing, pivot, pivot-table, pandas

我正在努力处理 Python`pandas`包中的分层索引。具体来说，我不明白如何在数据透视后**过滤**和**比较**行中的数据。

这是文档中的示例表：

```
import pandas as pd
import numpy as np

In [1027]: df = pd.DataFrame({'A' : ['one', 'one', 'two', 'three'] * 6,
                              'B' : ['A', 'B', 'C'] * 8,
                              'C' : ['foo', 'foo', 'foo', 'bar', 'bar', 'bar'] * 4,
                              'D' : np.random.randn(24),
                              'E' : np.random.randn(24)})

In [1029]: pd.pivot_table(df, values='D', rows=['A', 'B'], cols=['C'])
Out[1029]: 
    C             bar       foo
    A     B                    
    one   A -1.154627 -0.243234
          B -1.320253 -0.633158
          C  1.188862  0.377300
    three A -1.327977       NaN
          B       NaN -0.079051
          C -0.832506       NaN
    two   A       NaN -0.128534
          B  0.835120       NaN
          C       NaN  0.838040 
```

我想分析如下：

1）根据列属性过滤此表，例如选择带有负数的行`foo`：

```
 C             bar       foo
    A     B                    
    one   A -1.154627 -0.243234
          B -1.320253 -0.633158
    three B       NaN -0.079051
    two   A       NaN -0.128534 
```

`B`2）比较不同系列组之间的剩余系列值`A`？我不确定如何访问此信息：`{'one':['A','B'], 'two':['A'], 'three':['B']}`并确定哪些系列`B`值对于每个键是唯一的，或者在多个键组中看到，等等

有没有办法直接在数据透视表结构中执行此操作，还是我需要将其转换回`pandas` `dataframe`?

**更新：** 我认为这段代码是朝着正确方向迈出的一步。它至少让我可以访问此表中的各个值，但我仍在对系列值进行硬编码：

```
table = pivot_table(df, values='D', rows=['A', 'B'], cols=['C'])
table.ix['one', 'A'] 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-15T19:47:23.257

数据透视表返回一个 DataFrame，因此您可以通过执行以下操作进行简单过滤：

```
In [15]: pivoted = pivot_table(df, values='D', rows=['A', 'B'], cols=['C'])

In [16]: pivoted[pivoted.foo < 0]
Out[16]: 
C             bar       foo
A     B                    
one   A -0.412628 -1.062175
three B       NaN -0.562207
two   A       NaN -0.007245 
```

你可以使用类似的东西

```
pivoted.ix['one'] 
```

选择所有 A 系列组

或者

```
pivoted.ix['one', 'A'] 
```

选择不同的 A 和 B 系列组

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-02-06T14:42:46.063

只是在上一个答案中添加信息。当您尝试`pivoted.ix['one']`在**python3**中使用时，您会收到以下消息：

> /usr/lib/python3.7/site-packages/ipykernel_launcher.py:7：弃用警告：.ix 已弃用。请使用 .loc 进行基于标签的索引或使用 .iloc 进行位置索引
> 
> 请参阅此处的文档：http: [//pandas.pydata.org/pandas-docs/stable/indexing.html#ix-indexer-is-deprecated](http://pandas.pydata.org/pandas-docs/stable/indexing.html#ix-indexer-is-deprecated) import sys

因此，在此版本的 python 中，请改用以下代码：

> pivoted.loc['one']

# html - 添加评论时CSS中断

> ID：11973746
> 
> 赞同：2
> 
> 时间：2012-08-15T17:04:28.780
> 
> 标签：html, css

我正在尝试向我的 HTML 样式添加注释，但我发现当我添加注释时，样式停止工作。

下面的工作很好。图标和文本显示为灰色。

```
<html lang="en">
    <head>
        <title>test</title>
        <link href="/gtd/media/css/font-awesome.css" rel="stylesheet">
    </head>
    <body>
        <style>

            .action-star {
                color: gray;
            }
        </style>
        <div class="container-fluid">
            <span class="action-star"><i class="icon-star icon-large"></i> Test Icon</span>
        </div><!--/container-->
    </body>
</html> 
```

但是以下不起作用。图标和文本显示为黑色。

```
<html lang="en">
    <head>
        <title>test</title>
        <link href="/gtd/media/css/font-awesome.css" rel="stylesheet">
    </head>
    <body>
        <style>
            <!-- Comment -->
            .action-star {
                color: gray;
            }
        </style>
        <div class="container-fluid">
            <span class="action-star"><i class="icon-star icon-large"></i> Test Icon</span>
        </div><!--/container-->
    </body>
</html> 
```

我唯一添加的是以下行：

```
<!-- Comment --> 
```

我一定遗漏了一些明显的东西。. .

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T17:05:29.993

要在 CSS 中添加注释，请使用`/* Comment */`，而不是 HTML`<!-- Comment -->`语法。这就是破坏你的 CSS 的原因。

作为一个提示，如果你在一个支持语法高亮的编辑器中工作，通常他们会给注释一个特定的颜色。我见过的最常见的评论颜色是灰色、深蓝色或深绿色。当然，这仍然会因编辑器而异，但颜色的变化是一个很好的指标，表明您正在使用正确的注释语法。

看看你的`<!--/container-->`评论在你的代码示例中是如何变成灰色的，但`<!-- Comment -->`没有。如您所知，这并没有发生，因为您没有使用正确的语法。

干杯!

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T17:05:56.220

css 注释是做出来的`/* like this */`，不是`<!-- like this -->`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-15T17:06:58.777

一旦你在`<style>`块内，你必须使用 CSS 语法。对于评论，这意味着使用`/* Comment */`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-15T17:05:56.047

这是 HTML 注释的样式，使用特定的 CSS`/* comment */`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-15T17:10:06.660

在 CSS 中，注释以 /* 开头，以 */ 结尾。注释可以跨越多行，但不能嵌套：

```
/* This is a single-line comment */

/* This is a comment that
   spans multiple lines */ 
```

根据 CSS2 规范，出现在标记之间的注释不会对样式的呈现产生任何影响。然而，在实践中，我们发现在某些情况下，某些旧版浏览器中的注释会导致错误。

`//`不允许 C++ 中使用的注释语法。SGML 注释也不是采用 形式的`<!-- … -->`，除非在一种情况下：它们可能出现在内部样式表中——使用标记放置在 HTML 源代码中的样式表——以便对 HTML4 之前的用户代理隐藏 CSS 语句。但是，这种注释的使用现在是多余的，可以忽略

# c# - 在 Visual Studio 2010 项目模板中创建自定义属性？

> ID：11973750
> 
> 赞同：0
> 
> 时间：2012-08-15T17:04:57.167
> 
> 标签：c#, visual-studio-2010

我正在尝试在 XML 级别的项目模板中创建一个自定义命名属性来存储一个布尔值，我可以使用它来跟踪我在项目模板文件中执行的某些导入的成功。

我希望能够为项目模板文件声明一个属性，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" InitialTargets="TestImports" DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <Attributes>
    <Attribute Name="ImportedProp" Value="False" />
  </Attributes>
  <Import Condition="Exists('..\SomeProj.props')" ImportedProp="true" Project="..\SomeProj.props" />
  <Target Name="TestImports">
  <Error Text="Unable to find Common Properties." Condition="'$(ImportedProp)' == true" />
  </Target> 
```

遗憾的是，上述声明属性的方法无效。Visual Studio 根本不喜欢它。它编译得很好，但是当您使用模板在 Visual Studio 中创建新项目时会出错。

因此，我想创建一个属性名称“ImportedProp”（例如正确导入），并且如果导入成功，则能够在导入调用期间将其设置为 true。

如果在所有导入调用之后属性“ImportedProp”仍然为假，我可以出错。

问题是，据我所知，没有办法仅在 vstemplate 或 csproj 模板的 XML 中声明您自己的属性。有谁知道如何为我可以使用的 Visual Studio 2010 模板创建自定义属性，就像我建议的那样？

在 vstemplate 或 csproj 模板 XML 中声明属性只会产生错误，Visual Studio 说它无法识别 vstemplate 或 csproj XML 文件中的 Attributes 标记。

我通常不会为应该如此简单的事情打扰某人，但要么我是盲人，要么在 Google 中输入了错误的关键字，但我找不到任何解决方案或如何做到这一点的示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T22:18:56.860

事实证明，还有另一种方法可以检查这些导入。您不能创建自定义属性，但可以在项目属性 (.props) 或项目文件中创建一个值，就像这样。

```
<PropertyGroup>
<SettableVal> *Value* </SettableVal>
</PropertyGroup> 
```

然后你可以随心所欲地使用它。在整个项目文件或模板中控制您的导入、引用包含或其他内容。

# javascript - jQuery - 带有一些数字的表格计算的奇怪舍入错误

> ID：11973763
> 
> 赞同：0
> 
> 时间：2012-08-15T17:05:30.510
> 
> 标签：javascript, jquery

我有一个简单的表格，允许用户输入 2 个数字，然后一个脚本计算年度平均值并获取选择菜单中具有相同选项的所有行的总数。

我已经设置了一个示例 JSFiddle：

[http://jsfiddle.net/fmdataweb/73Jzc/1/](http://jsfiddle.net/fmdataweb/73Jzc/1/)

这显示了它是如何工作的。我刚刚注意到，有时我会收到一个奇怪的舍入错误（我希望它舍入到小数点后一位）。例如，如果您选择“中等”，然后输入 5 和 4，平均为 0.4，然后单击按钮创建新行并再次选择“中等”，然后输入 3 和 40，平均为 2.3，您会注意到中等的总数是“2.6999999999999997”，而它应该是 2.7。

如果您输入其他数字，到目前为止在我的测试中都很好，但由于某种原因，这些组合不会对总数进行四舍五入，我不知道为什么。感谢是否有人能指出我脚本中的错误。这是执行平均值和总计的脚本：

```
$('#nextYear')
    .on('change', 'select', calc)
    .on('keyup', 'input', calc);

function calc(){

    $('#nextYear tr:has(.risk)').each(function(i,v){

        var $cel = $(v.cells);

        var $risk = $cel.eq(1).find('option:selected').val();
        var $numb = $cel.eq(2).find('input').val();
        var $weeks = $cel.eq(3).find('input').val();
        var $avg = ($numb * $weeks) / 52;
        var $avgRounded = Math.round( $avg * 10 ) / 10;

        $cel.eq(4).find('input').val($avgRounded);

    });   

    var tot = {};

    $('#nextYear tr:has(.risk) option:selected')
                .map(function(i){
                    var el = $(this).val();
                    var qty = parseFloat($('#nextYear tr:has(.risk)').eq(i).find('td:last').prev().find('input').val());

                    if (!tot.hasOwnProperty(el)) {
                        tot[el] = 0;            
                    }
                    tot[el] += qty
                    return tot;
                }).get();

     // console.log(tot);
      $('#textfield6').val(tot.moderate);
     $('#textfield7').val( tot.high );

  } 
```

​</p>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T17:10:57.760

尝试`$avg.toFixed(1);`代替`Math.round( $avg * 10 ) / 10;`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T17:16:17.897

你的问题在这里：

```
$('#textfield6').val(tot.moderate);
$('#textfield7').val( tot.high ); 
```

你必须像你一样把它们四舍五入

```
var $avgRounded = Math.round( $avg * 10 ) / 10; 
```

或使用[`.toFixed(1)`](http://www.w3schools.com/jsref/jsref_tofixed.asp)

**编辑：**

然后，代码是：

```
$('#textfield6').val(tot.moderate.toFixed(1));
$('#textfield7').val(tot.high.toFixed(1)); 
```

你可以在这里看到它：http: [//jsfiddle.net/73Jzc/2/](http://jsfiddle.net/73Jzc/2/)

# java - 我可以在 Apache Commons Config 中同时使用数组和非数组吗？

> ID：11973773
> 
> 赞同：6
> 
> 时间：2012-08-15T17:05:58.043
> 
> 标签：java, configuration, apache-commons-config

使用以下属性文件：

```
foo=hello, world!
bar=first,second 
```

我想将第一项作为字符串检索，将第二项检索为数组。我原以为`getString`vs`getStringArray`会处理这个问题，但事实并非如此 -`getString("foo")`只是在逗号之前获取所有内容，即“你好”。

如果我使用 禁用定界符解析`setDelimiterParsingDisabled`， foo 很好，但这也会改变`getStringArray("bar")`返回单元素数组的行为！

我找不到如何明确地告诉它我希望它如何解释单个配置项，无论是作为字符串还是作为数组。我不想将配置项放入具有不同分隔符规则的单独配置文件中，并且我更喜欢使用逗号作为 getStringArray 案例的分隔符。

详细地说，这个片段打印`hello - 2`或者`hello, world! - 1`- 我希望它打印`hello, world! - 2`！

```
AbstractFileConfiguration config = new PropertiesConfiguration();
config.setFileName("C:\\temp\\temp.properties");
//config.setDelimiterParsingDisabled(true);
config.load();
System.out.println(config.getString("foo") + " - " + config.getStringArray("bar").length); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T19:27:55.333

正如您所发现的，Commons Config 缺少类似`getPlainString()`方法的东西。以下是一些解决方法的建议。

我认为使用不同的列表分隔符是最容易实现的。如果您需要更复杂的东西，请考虑其他两个：

## 通过 setListDelimiter() 使用不同的列表分隔符

只要您不需要将相同的值解释为字符串和数组，就可以工作。

属性文件：

```
foo=hello, world!
bar=first;second 
```

代码：

```
AbstractFileConfiguration config = new PropertiesConfiguration();
config.setFileName("C:\\temp\\temp.properties");
config.setListDelimiter(';');
config.load();
System.out.println(config.getString("foo") + " - " + config.getStringArray("bar").length); 
```

## 禁用分隔符解析并进行自己的拆分

[使用String.split()](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String%29)轻松完成。一个简单的静态方法就可以了：

```
public static String[] gerStringArray(Configuration config, String key) 
```

或者创建一个子类`PropertiesConfiguration`并覆盖`getStringArray()`and`getList()`方法。

## 使用两种不同的配置

一种用于设置数据，您知道数据将具有什么格式。在这里您可以激活分隔符解析。

一个用于文本数据，您可能有任意数据。在这里，您应该停用分隔符解析。

这具有分离设置和文本数据的额外优势。

*   不混合设置和文本数据可以使两种配置保持清洁。特别是如果两者都有很多。
*   通常设置数据会根据部署环境（实时/测试）而变化，而文本数据会根据区域设置（en_GB/de_DE）而变化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-06T15:40:23.497

在属性文件中，您可以执行以下操作：

```
urls=localhost
urls=127.0.0.1 
```

在 Java 中，您可以获得列表：

```
String[] urls = Configure.settings().getStringArray("urls");
for(String url : urls)
    System.out.println(url); 
```

# powershell - Powershell：从 Receive-Job 获取输出

> ID：11973775
> 
> 赞同：25
> 
> 时间：2012-08-15T17:06:00.807
> 
> 标签：powershell, jobs

我有一组正在运行的作业。当他们完成后，我使用接收作业并将输出写入屏幕。我想获取该输出并将其记录到文件中。我不想在作业运行时输出产生的输出，因为一次运行多个作业时会穿插日志记录。找工作 | Receive-Job 以井井有条的方式打印输出。

我已经尝试了以下所有方法，并且没有将输出写入文件或存储在变量中，它只是进入屏幕：

```
#Wait for last job to complete
While (Get-Job -State "Running") {    
    Log "Running..." -v $info
    Start-Sleep 10        
}    
Log ("Jobs Completed. Output:") -v $info

# Getting the information back from the jobs
foreach($job in Get-Job){
    Receive-Job -Job $job | Out-File c:\Test.log -Append
    $output = Receive-Job -Job $job        
    Log ("OUTPUT: "+$output)
    Receive-Job -Job $job -OutVariable $foo
    Log ("FOO: "+$foo)
} 
```

编辑：在看到基思的评论后，我已将 foreach 中额外的 Receive-Job 调用删除到以下内容：

```
# Getting the information back from the jobs
foreach($job in Get-Job){
    Receive-Job -Job $job -OutVariable temp
    Write-Host ("Temp: "+$temp)
    $temp | Out-File -FilePath c:\Test.log -Append 
} 
```

我还验证了我没有在脚本中的其他任何地方使用 Receive-Job。写入主机 $temp 和输出文件仍然不产生任何输出。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-01-28T19:41:22.883

如果作业使用 Write-Host 生成输出，则 Receive-Job 返回 $null，但结果会写入主机。但是，如果作业使用 Write-Output 代替 Write-Host 生成输出，则 Receive-Job 返回作业输出的字符串数组 [string[]]。

为了演示，在 PowerShell 提示符下输入这个无害的代码：

```
$job = Start-Job -ScriptBlock {
    [int] $counter = 0
    while ($counter -lt 10) {
        Write-Output "Counter = $counter."
        Start-Sleep -Seconds 5
        $counter++
    }
} 
```

等待大约 20-30 秒，让作业产生一些输出，然后输入以下代码：

```
$result = Receive-Job -Job $job
$result.Count
$result
$result | Get-Member 
```

$result 对象包含作业生成的字符串。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-16T16:41:59.290

注意：经过一些实验，我发现使用 write-output 或直接输出变量也不是一个好的解决方案。如果您有一个函数使用这些方法中的任何一个并且还返回一个值，则输出将与返回值连接！

我发现记录作业输出的最佳方法是将 write-host 与 Start-Transcript 和 Stop-Transcript cmdlet 结合使用。有一些缺点，例如 ISE 不支持 Transcript cmdlet。此外，我还没有找到一种在不发送到主机的情况下输出到脚本的方法（我想要一个具有较少冗长用户体验的健壮日志），但它似乎是目前可用的最佳解决方案。这是我能够在不散布输出的情况下记录并发作业的唯一方法，而不必为每个作业纠正多个临时日志文件然后将它们组合起来。

以下是我之前出于文档原因留下的答案：

> 这里的问题是没有从 Receive-Job 获得输出。我期望看到的作业的输出正在由 write-host 写入作业。当调用接收作业时，我在屏幕上看到了我的所有输出，但在其他地方没有可用管道。似乎当我调用接收作业时，所有这些写入主机 cmdlet 都会执行，但我没有什么可以获取并通过管道传输到输出文件。以下脚本演示了这一点。您会注意到“Sleepy Time”同时出现在日志文件和主机中，而“Slept”仅出现在主机中。因此，与其尝试将 Receive-Job 传送到 write-host，我需要修改我的 Log 函数以不使用 write-host 或拆分输出，如下所示。

```
cls
rm c:\jobs.log
$foo = @(1,2,3)
$jobs = @()

foreach($num in $foo){
    $s = { get-process -name "explorer"
           Start-Sleep $args[0]
           $x = ("Sleepy Time: "+$args[0])
           write-host $x
           $x
           write-host ("Slept: "+$args[0])
         }

    $id = [System.Guid]::NewGuid()
    $jobs += $id   
    Start-Job -Name $id -ScriptBlock $s -args $num
}

While (Get-Job -State "Running") {
    cls
    Get-Job
    Start-Sleep 1 
}
cls
Get-Job
write-host "Jobs completed, getting output"

foreach($job in $jobs){
    Receive-Job -Name $job | out-file c:/jobs.log -append    
}

Remove-Job *
notepad c:\jobs.log 
```

下面是一个示例，它将运行并发作业，然后按照 mbourgon 的请求顺序记录它们。您会注意到时间戳表明工作是散布的，但日志是按作业顺序显示的。

```
#This is an example of logging concurrent jobs sequentially
#It must be run from the powershell prompt as ISE does not support transcripts

cls
$logPath = "c:\jobs.log"
rm $logPath

Start-Transcript -Path $logPath -Append

#Define some stuff
$foo = @(0,1,2)
$bar = @(@(1,"AAA"),@(2,"BBB"),@(3,"CCC"))

$func = {
    function DoWork1 {
        Log "This is DoWork1"
        return 0
    }

    function DoWork2 {
        Log "This is DoWork2"
        return 0
    }

    function Log {
        Param([parameter(ValueFromPipeline=$true)]$InputObject)
        $nl = [Environment]::NewLine.Chars(0)
        $time = Get-Date -Format {HH:mm:ss} 
        Write-Host ($time+">"+$InputObject+$nl)
    }
}

#Start here
foreach($num in $foo){
    $s = { $num = $args[0]
           $bar = $args[1]           
           $logPath = $args[2]
           Log ("Num: "+$num) 

           for($i=0; $i -lt 5; $i++){
                $out = ([string]::$i+$bar[$num][1])
                Log $out
                start-sleep 1
           }
           Start-Sleep $num

           $x = DoWork1
           Log ("The value of x is: "+$x)           

           $y = DoWork2               
           Log ("The value of y is: "+$y)               
         }
    Start-Job -InitializationScript $func -ScriptBlock $s -args $num, $bar, $logPath
}

While (Get-Job -State "Running") {
    cls
    Get-Job
    Start-Sleep 1 
}
cls
Get-Job
write-host "Jobs completed, getting output"    

Get-Job | Receive-Job

Remove-Job *
Stop-Transcript
notepad $logPath 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-02-16T05:30:43.313

我发现了如何使用 Receive-Job CMDlet 将 Write-Host 结果接收到变量的解决方案，它适用于 Powershell 5.1：

```
$var = Receive-Job $job 6>&1 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-02-12T01:57:42.547

我知道这是旧的。我不经常使用工作，所以当我偶然发现这个线程时，我显然遇到了同样的问题。无论如何，我得出了一个不同的解决方案，所以我想我会把它扔在那里。

同样在 PowerShell 5.1 中，我只是引用了 Job Object(s) 上的属性在我的情况下，这看起来像：

```
$Jobs.ChildJobs.Output | Out-File <LogFile> -Append 
```

看起来所有的流都是以这种方式记录的。简单的回显到输出，推测是成功流。 `Write-Host`命令转到信息流。

```
Output        : {}
Error         : {}
Progress      : {}
Verbose       : {}
Debug         : {}
Warning       : {}
Information   : {} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-15T17:17:40.263

当您收到作业的结果时，这些结果将被删除，这样进一步的调用`Receive-Job`将无法检索（假设作业已完成）。如果您不想`Receive-Job`删除结果，请使用`-Keep`开关。现在这并不能解释为什么您的第一次调用`Receive-Job`没有向日志文件输出任何内容......除非您没有显示的脚本的一部分`Receive-Job`在此之前正在执行。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-12-20T01:40:55.720

您可以通过管道将您的 Get-Process 传输到 Format-Table，这样您就可以看到所有输出。

```
 Get-Process -Name "explorer" | format-Table -hidetableheaders -AutoSize 
```

你可以在脚本的末尾使用这样的东西......

```
 Get-job | Receive-Job 2>&1 >> c:\path\to\your\log\file.log 
```

"2>&1 >>" 从 Get-Job | 获取所有输出 接收工作

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-11-09T14:18:14.830

一个简单的解决问题的方法。写详细的“blabla”-详细

* * *

```
$s = New-PSSession -ComputerName "Computer"
$j = Invoke-Command -Session $s  -ScriptBlock { Write-Verbose "Message" -Verbose } -AsJob
Wait-Job $j

$Child = $j.ChildJobs[0]
$Child.Verbose | out-file d:/job.log -append 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-06-19T21:52:08.587

What I have done is to not call Receive-Job at all. But create a wrapper scriptblock that starts and stops a transcripts. Then in that wrapper script block I call the jobs script block like

&$ScriptBlock < Parameters >

So the transcript will capture all the output to a file.

# excel - 条件插值 Excel

> ID：11973776
> 
> 赞同：2
> 
> 时间：2012-08-15T17:06:02.133
> 
> 标签：excel

我有以下非常庞大的 excel 设置，但这是一个简化的设置：

```
Site1 X-Given   Y-Given Site2   X-New-Given Y-Interpolated
A     10        400     A       25      550
A     20        500     A       25      550
A     30        600     A       26      560
A     40        700     B       27      570
A     50        800     B       30      600
B     10        400     B       15      450
B     20        500     B       25      550
B     30        600     B       30      600 
```

我想要完成的是让每个 Y-Interpolated 仅根据其特定站点进行插值，并且没有任何交叉。因此，站点 A 只会与站点 A 进行插值，并且与站点 B 相同……依此类推。

我正在使用具有以下语法的 interpolate excel 插件： =interpolate(x_array,y_array,x_given)

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T07:20:24.343

您可以尝试使用此工作表功能替代方案...使用数据`A1:E9`，输入`F2`并填写：

```
=FORECAST(E2,IF(MMULT(ROW(B$2:B$9)-LOOKUP(0,(B$2:B$9>=E2)/(A$2:A$9=D2),ROW(B$2:B$9))-0.5,1)^2<1,C$2:C$9),B$2:B$9) 
```

*更新*：这是使用 CTRL+SHIFT+ENTER 输入的稍短的替代方案

```
=PERCENTILE(IF(A$2:A$9=D2,C$2:C$9),PERCENTRANK(IF(A$2:A$9=D2,B$2:B$9),E2,20)) 
```

这假设变量之间存在正相关关系，并在两个边界处返回值。

**背景**

如果要为此使用工作表函数，显而易见的方法是找到与 X 相邻的两个点：(X1,Y1) 和 (X2,Y2)。然后使用以下公式计算 Y：

```
Y = Y1 + (X - X1) * (Y2 - Y1) / (X2 - X1) 
```

问题在于，这导致了一个冗长的公式，涉及六个 INDEX/MATCH 组合和另外六个用于将数据限制到指定站点的条件。这导致人们寻找其他选择......

**1** . 第一个公式看起来很复杂，但它所做的只是根据同一站点的两个相邻点应用直线拟合。评估上面第三行的公式 - 通过突出显示公式的每个部分并按 F9 - 给出：

```
=FORECAST(26,{FALSE;500;600;FALSE;...},{10;20;30;40;...}) 
```

FORECAST 忽略非数字数据，因此结果与仅使用 {500,600} 和 {20,30} 作为第二个和第三个参数相同。您可以在公式的其他部分使用 F9 来进一步分解它 - 我会为您留下详细信息。（MMULT(...,1) 部分只是将参数更改为数组，因此您可以在没有数组条目的情况下输入公式。）

**2** . 第二个公式更容易理解。首先请注意，在 Excel 中，百分位数是通过线性插值计算的，IF 部分只是将数字数据限制在指定的位置。假设数据在增加，我们可以在 PERCENTILE 公式中找到与 x 范围中的查找值匹配的 k 值，并返回具有该 k 值的 y 范围值。对于有问题的示例：

```
26  =PERCENTILE({10,20,30,40,50},0.4)
560 =PERCENTILE({400,500,600,700,800},0.4) 
```

要计算 0.4 的值，可以使用与 PERCENTILE 成反比的 PERCENTRANK：

```
0.4 =PERCENTRANK({10,20,30,40,50},26)
0.4 =PERCENTRANK({400,500,600,700,800},560) 
```

上面的公式结合了这两个函数，最后一个参数设置为 20 以实现全精度（Excel 在内部将值存储为大约 15-17 位精度）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T01:01:04.930

因为您使用的工具是基于 .xll 的 excel 插件，所以您（或我们）无法修改代码或创建`interpolate`允许添加条件的自定义版本。

相反，您必须将数据分开过滤，然后在过滤后的数据集上运行自定义函数。

# php - Facebook 评论格式

> ID：11973779
> 
> 赞同：0
> 
> 时间：2012-08-15T17:06:19.083
> 
> 标签：php, css, facebook

我将 Facebook 评论代码添加到 Wordpress 评论中

```
<?php if ( comments_open() ) : ?>
<li class="reviews_tab"><a href="#tab-reviews"><div id="fb-root">
<script src="http://connect.facebook.net/en_US/all.js#xfbml=1"></script>
<?php echo '<fb:comments-count href=http://bikeroger.com';
echo $_SERVER["REQUEST_URI"];
echo '></fb:comments-count> Awesome Love'; ?>
</a></li>
<br>
<?php endif; ?> 
```

结果是我想要的，但样式不是。

这是[网站](http://bikeroger.com/shop/bike-roger-bike-box-rental-service/)和屏幕截图：

![在此处输入图像描述](../Images/703497a24fad3f3a44fb0ec10c4471cb.png)

从图片中可以看出。“1656 Awesome Words”的文本小于“Description”和“Additional Information”

如何使字体大小相同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T17:20:47.970

```
<?php if ( comments_open() ) : ?>
<li class="reviews_tab"><a href="#tab-reviews"><div id="fb-root">
<script src="http://connect.facebook.net/en_US/all.js#xfbml=1"></script>
<?php echo '<fb:comments-count href=http://bikeroger.com';
echo $_SERVER["REQUEST_URI"];
echo '></fb:comments-count> Awesome Love'; ?>
</a></li>
<br>
<?php endif; ?> 
```

在您的原始代码之上...

下面稍作改动

```
<?php if ( comments_open() ) : ?>
<li class="reviews_tab"><a href="#tab-reviews"><div id="fb-root">
<script src="http://connect.facebook.net/en_US/all.js#xfbml=1"></script>
<?php echo '<fb:comments-count href=http://bikeroger.com';
echo $_SERVER["REQUEST_URI"];
echo '></fb:comments-count> Awesome Love'; ?>
</div></a></li>
<br>
<?php endif; ?> 
```

在你的`li`和标签中，你打开一个div标签“fb-root”，但在关闭and标签`a`之前你没有关闭它。因此，如果标签损坏，这可能会或可能不会直接成为问题的一部分，但未关闭的标签损坏有时会导致不利的不良影响。`a``li`

另外，我要大胆猜测一下，假设您的页面上有多个 ID 为 fb-root 的 div，这也可能导致冲突。不过总而言之。它在 fb-root div 中，facebook 样式正在覆盖您的样式，因为 FB 在页面加载后加载其样式。所以你的评论标签继承了它的样式而不是你的初始样式。Facebook 通过您为其包含的 javascript，基本上是在将 fb-root div 加载到 DOM 后重写其所有元素的 css/style 属性。

# eclipse - 如何从 svn 存储库中签出 maven 项目

> ID：11973783
> 
> 赞同：25
> 
> 时间：2012-08-15T17:06:27.390
> 
> 标签：eclipse, svn, maven, m2e

我是 Maven 和 Eclipse 的新手，我需要从 SVN 存储库中签出现有的 Maven 项目。我已经安装了 M2E 插件和 subversion 插件，它们似乎工作正常。这是安装细节--> ![在此处输入图像描述](../Images/6945331748c1f25725eef98cc11ca449.png)

当我在项目资源管理器中右键单击并选择 Import -> SVN -> Project from SVN，然后选择存储库位置并单击完成，提示我有 4 种可能性![在此处输入图像描述](../Images/8ad9ce0cc3a62910870da1a31af7b311.png)

从这一点开始检查 Maven 项目的程序是什么，或者我在正确的轨道上吗？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-08-15T17:16:17.800

tl;博士：看看**[这个](http://www.youtube.com/watch?v=vVhNYDiqdtM)**视频。1:04 到 1:50 之间的部分应该回答您的问题（要跳到有趣的部分，请单击 youtube 播放器并按`4`）。

您已经安装了 m2e 的 SVN 连接器。因此应该可以`Import Existing Maven Project`从 SVN 存储库中获取。

从上面快照中列出的选项中，您应该能够在选择第一个或第四个选项后继续，即：

![在此处输入图像描述](../Images/2c157b1f78a87f4073489840191e76c0.png)

（根据下面 Mauno V 的建议）将此导入的项目转换为 Maven 项目右键单击它并执行以下操作`Configure -> Convert to a Maven Project`：

![在此处输入图像描述](../Images/519ec19059ff3e0b91a3c8a98a31fd88.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-12T08:18:13.457

如果您有 Pom 项目作为根分支，则在项目签出完成后，您可以将项目导入为“现有 Maven 项目”并将项目设置为根项目，然后完成！

您应该能够在 eclipse project explore 中看到您的模块定义为项目，并且 eclipse 将被识别为模块项目。

右键单击 Pom 项目、Maven -> 更新项目或 Alt+f5 以刷新并查看项目内容。

# java - Java 收集和内存优化

> ID：11973785
> 
> 赞同：3
> 
> 时间：2012-08-15T17:06:32.327
> 
> 标签：java, memory-leaks, out-of-memory, heap-memory

我为自定义表编写了一个自定义索引，该表使用 500MB 的堆来存储 500k 个字符串。只有 10% 的字符串是唯一的；其余的都是重复的。每个字符串的长度为 4。

我如何优化我的代码？我应该使用另一个集合吗？我试图实现一个自定义字符串池来节省内存：

```
public class StringPool {

    private static WeakHashMap<String, String> map = new WeakHashMap<>();

    public static String getString(String str) { 
        if (map.containsKey(str)) {
            return map.get(str);
        } else {
            map.put(str, str);
            return map.get(str);
        }
    }
}

private void buildIndex() {
        if (monitorModel.getMessageIndex() == null) {
            // the index, every columns create an index
            ArrayList<HashMap<String, TreeSet<Integer>>> messageIndex = new ArrayList<>(filterableColumn.length);
            for (int i = filterableColumn.length; i >= 0; i--) {
                // key -> string,   value -> treeset, the row wich contains the key
                HashMap<String, TreeSet<Integer>> hash = new HashMap<>();
                messageIndex.add(hash);
            }
            // create index for every column
            for (int i = monitorModel.getParser().getMyMessages().getMessages().size() - 1; i >= 0; --i) {
                TreeSet<Integer> tempList;

                for (int j = 0; j < filterableColumn.length; j++) {
                    String value  = StringPool.getString(getValueAt(i, j).toString());
                    if (!messageIndex.get(j).containsKey(value)) {
                        tempList = new TreeSet<>();
                        messageIndex.get(j).put(value, tempList);
                    } else {
                        tempList = messageIndex.get(j).get(value);
                    }

                    tempList.add(i);
                }
            }
            monitorModel.setMessageIndex(messageIndex);
        }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T17:21:13.120

无需提出自定义池。只需使用[`String.intern()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#intern%28%29).

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-15T18:13:20.427

您可能想在分析器中检查您的内存堆。我的猜测是内存消耗主要不是在字符串存储中，而是在许多`TreeSet<Integer>`情况下。如果是这样，您可以通过使用原始数组（`int[]`、 `short[]`或`byte[]`，具体取决于您存储的整数值的实际大小）进行大幅优化。或者您可以查看原始集合类型，例如[FastUtil](http://fastutil.di.unimi.it/)或[Trove](http://trove.starlight-systems.com/)提供的集合类型。

如果您确实发现字符串存储存在问题，我会假设您希望将应用程序扩展到超过 500k 字符串，或者特别严格的内存限制要求您对短字符串进行重复数据删除。

正如 Dev 所说，`String.intern()`将为您删除重复的字符串。然而，有一个警告——在 Oracle 和 OpenJDK 虚拟机中，`String.intern()`会将这些字符串存储在 VM 永久代中，这样它们将来就不会被垃圾收集。如果：

1.  您存储的字符串在 VM 的整个生命周期中都不会改变（例如，如果您在启动时读取静态列表并在应用程序的整个生命周期中使用它）。
2.  您需要存储的字符串可以舒适地适合 VM 永久代（为类加载和 PermGen 的其他使用者提供足够的空间）。更新：见下文。

如果其中任何一个条件为假，则构建自定义池可能是正确的。但我的建议是你考虑一个简单`HashMap`的代替`WeakHashMap`你目前使用的。您可能不希望这些值在缓存中时被垃圾收集，并`WeakHashMap`添加另一个级别的间接（以及关联的对象指针），从而进一步增加内存消耗。

更新：有人告诉我 JDK 7 将实习字符串 ( `String.intern()`) 存储在主堆中，而不是像早期的 JDK 那样存储在 perm-gen 中。`String.intern()`如果您使用的是 JDK 7，那么风险会更小。

# c++ - 修剪递归搜索路径

> ID：11973796
> 
> 赞同：0
> 
> 时间：2012-08-15T17:07:40.713
> 
> 标签：c++, visual-studio-2008, recursion, trie, pruning

知识有限，用C++写了2个月

在此函数`string code`中递归递减字符，直到`""`找到基本情况。我想在找到基本案例之前修剪一些路径，并且对于某些`string code`基本案例的路径将找不到。对于修剪，我想将路径中的属性与参数进行比较`int time`。这将搜索由“nodeT”组成的 trie

```
struct charT {
char letter;
nodeT *next;
};

struct nodeT {
bool isOperation;
bool isCode; 
int time;
Vector<charT> alpha;
};

nodeT *root

usage:
string code = "12345";
int time = convertToEpoch(20120815); //my epoch function
containsCode(code, time)

bool containsCode(string code, int time)
{
    if(root == NULL) return false;
    else return containsCodeHelper(root, code, time);
}

bool containsCodeHelper(nodeT *w, string code, int time)
{
    if(code == "") //base case: all char found
        return w->isCode; 
    else {
        if (w->isOperation && w->time != time) return false; //case 2: time check OK <- at a midpoint in the path
        for(int i = 0; i < w->alpha.size(); i++) { //Loop through the leaf
            if (w->alpha[i].letter == code[0]) //case 3: leaf exists
                return containsCodeHelper(w->alpha[i].next, code.substr(1), time);
        }
    }
    return false; //if no path
} 
```

此函数在添加时间检查修剪之前运行良好，它现在循环，如果超出时间但随后从 char 位置 0`returns false`的候选重新开始。`string code`

问题：1）是否嵌套`return false`将递归踢回下一个调用 for 循环，2）是否应该将时间修剪放在具有逻辑`return false`或`return`“路径”的 for 循环中，3）这从根本上来说是一团糟，我需要学习 C++ 概念<-如果是，请解释。

此外，发布的功能是实际功能的简化版本 - 有一个时间修饰符和一个我遗漏的“跳过”路径。在过去的问题中，我发现这些“插件”会分散问题的注意力。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T20:48:08.460

经过一些改造后，它现在可以正常工作了——可能一直都是这样；我将 read 属性`return w->isCode`改为`return true`，这似乎是最大的问题 - 我将调试 trie 构造函数，看看它是否在每条路径的末尾设置了属性。

```
boolcontainsCodeHelper(nodeT *w, string code, int time) 
{
    if(code == "") //base case: all char found
        return true;
    else {
        if ( w->isOperation && (!((w->begin-wag) <= time && time <= (w->end+wag) ) && time != 9999 ) ) 
            return false; //case 2: time
        else {
            for(int i = 0; i < w->alpha.size(); i++) { //Loop through all of the children of the current node
                if (w->alpha[i].letter == word[0])
                    return containsCodeHelper(w->alpha[i].next, word.substr(1), time, wag);
                else if (word[0] == 'ž') //step over '0' all subnodes
                    if (containsCodeHelper(w->alpha[i].next, word.substr(1), time, wag)) 
                        return true;
            }
        }
    }
    return false; //if char is missing - meaning the exact code is not there - terminates garbage subnode paths
} 
```

`return false;`我看不出最后留下和留下它有什么区别。也仍然困惑为什么特殊情况需要`if( bool fn()) return true;`，而不仅仅是我在另一个[堆栈溢出线程](https://stackoverflow.com/questions/11873156/write-trie-parsing-recursive-function-with-node-step-over)`return ( bool fn());`的帮助下通过反复试验找到了解决方案

# objective-c - 提高快速枚举性能

> ID：11973797
> 
> 赞同：0
> 
> 时间：2012-08-15T17:07:42.153
> 
> 标签：objective-c, ios, sqlite, nsarray, fast-enumeration

我有一个超过 280.000 多个单词的巨大单词列表，这些单词从 sqlite 数据库加载到 NSArray。然后我进行快速枚举以检查用户输入的某个字符串值是否与数组中的某个单词匹配。由于阵列太大，iphone 4 大约需要 1-2 秒才能通过该阵列。

我怎样才能提高性能？也许我应该制作几个较小的数组？字母表中的每个字母一个，这样可以减少要处理的数据。

这就是我的数据库类的外观

```
static WordDatabase *_database;

+(WordDatabase *) database
{

    if (_database == nil) {

        _database = [[WordDatabase alloc] init];

    }

    return _database;
}

- (id) init
{
    if ((self = [super init])) {
        NSString *sqLiteDb = [[NSBundle mainBundle] pathForResource:@"dictionary" ofType:@"sqlite"];

        if (sqlite3_open([sqLiteDb UTF8String], &_database) != SQLITE_OK) {
            NSLog(@"Failed to open database!");
        }
    }
    return self;

}

- (NSArray *)dictionaryWords {

    NSMutableArray *retval = [[[NSMutableArray alloc] init] autorelease];
    NSString *query = @"SELECT word FROM words";
    sqlite3_stmt *statement;

    if (sqlite3_prepare_v2(_database, [query UTF8String], -1, &statement, nil) == SQLITE_OK) {
        while (sqlite3_step(statement) == SQLITE_ROW) {

            char *wordChars = (char *) sqlite3_column_text(statement, 0);

            NSString *name = [[NSString alloc] initWithUTF8String:wordChars];

            name = [name uppercaseString];

            [retval addObject:name];

        }
        sqlite3_finalize(statement);
    }

    return retval;

} 
```

然后在我的主视图中我像这样初始化它

```
dictionary = [[NSArray alloc] initWithArray:[WordDatabase database].dictionaryWords]; 
```

最后我使用这种方法遍历数组

```
- (void) checkWord
{    
    NSString *userWord = formedWord.wordLabel.string;
    NSLog(@"checking dictionary for %@", userWord);

    for (NSString *word in dictionary) {
        if ([userWord isEqualToString: word]) {   
        NSLog(@"match found");    
        }     
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T17:10:17.783

很多不同的方式。

*   将所有单词粘贴在字典或集合中，测试存在很快

*   按照您的建议将其分解；创建某种树型结构。

*   使用数据库进行搜索。如果构造正确，它们通常非常擅长这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T17:14:00.987

如果空间不是问题，请存储每个单词的哈希值并将其用于基本查找。一旦通过哈希过滤，然后比较每个单词。这将减少代价高昂的字符串比较次数。更容易索引/排序并执行快速查找。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T17:15:11.590

我第二个字典。目标 c 的 NSDictionary。

例如：

// 打印出 NSDictionary myDict 中的所有键值对

```
 for(id key in myDict)
    NSLog(@"key=%@ value=%@", key, [myDict objectForKey:key]); 
```

# c++ - 将错误代码枚举与 std::error_code 进行比较

> ID：11973798
> 
> 赞同：10
> 
> 时间：2012-08-15T17:07:44.237
> 
> 标签：c++, c++11

我正在使用 C++11`system_error`错误代码库为我正在制作的库创建自定义错误类。我以前用过这个`boost::error_code`，但我不能让它和它一起工作`std::error_code`。我正在使用 GCC 4.6。

基本上，我已经列出了所有样板代码来创建错误类、error_category 和 STD 命名空间中的转换例程，以将我的自定义枚举转换为`std::error_code`对象：

```
namespace mylib
{
    namespace errc {

        enum my_error
        {
            failed = 0
        };

        inline const char* error_message(int c)
        {
            static const char* err_msg[] = 
            {
                "Failed",
            };

            assert(c < sizeof(err_msg) / sizeof(err_msg[0]));
            return err_msg[c];
        }

        class my_error_category : public std::error_category
        {
            public:

            my_error_category()
            { }

            std::string message(int c) const
            { 
                return error_message(c); 
            }

            const char* name() const { return "My Error Category"; }

            const static error_category& get()
            {
                const static my_error_category category_const;
                return category_const;
            }
        };

    } // end namespace errc
} // end namespace mylib

namespace std {

inline error_code make_error_code(mylib::errc::my_error e)
{
    return error_code(static_cast<int>(e), mylib::errc::my_error_category::get());
}

template<>
struct is_error_code_enum<mylib::errc::my_error>
    : std::true_type
{ }; 
```

问题是，我的错误代码枚举和对象之间的隐式转换`std::error_code`似乎不起作用，所以我不能例如尝试比较`std::error_code`带有枚举文字的实例：

```
int main()
{
    std::error_code ec1 = std::make_error_code(mylib::errc::failed); // works
    std::error_code ec2 = mylib::errc::failed; // doesn't compile
    bool result = (ec2 == mylib::errc::failed); // doesn't compile
} 
```

表达式`ec2 == mylib::errc::failed`不会编译 - 我不得不说`ec2 == std::make_error_code(mylib::errc::failed)`。

编译器发出的错误是：

```
In file included from test6.cc:3:0:
/usr/include/c++/4.6/system_error: In constructor ‘std::error_code::error_code(_ErrorCodeEnum, typename std::enable_if<std::is_error_code_enum<_ErrorCodeEnum>::value>::type*) [with _ErrorCodeEnum = mylib::errc::my_error, typename std::enable_if<std::is_error_code_enum<_ErrorCodeEnum>::value>::type = void]’:
test6.cc:70:37:   instantiated from here
/usr/include/c++/4.6/system_error:127:9: error: cannot convert ‘mylib::errc::my_error’ to ‘std::errc’ for argument ‘1’ to ‘std::error_code std::make_error_code(std::errc)’ 
```

这是一个**[Ideone 链接](http://ideone.com/LsK9y)。**

那么，为什么这不起作用？我是否需要额外的样板代码来使`mylib::errc::my_error`枚举能够隐式转换为`std::error_code`？我以为专业化可以解决`std::make_error_code`这个问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-15T19:09:09.313

您必须将`error_code make_error_code(mylib::errc::my_error e)`函数从`std`错误命名空间 ( `mylib::errc`) 中移出。请查看[http://ideone.com/eSfee](http://ideone.com/eSfee)。

# matlab - Trapz 给出奇怪的结果

> ID：11973800
> 
> 赞同：3
> 
> 时间：2012-08-15T17:07:49.130
> 
> 标签：matlab

Matlab 的 trapz 函数的结果很奇怪。我有两个变量，zptest 和 omega，它们都是正的，3000x2x1 数组。

当我绘制 zptest 与 omega (plot(zptest(:,1,1),omega(:,1,1)) 时，曲线显然是正的，并且在积分时应该给出正的结果。然而，情况并非如此，因为如下图：

> > 陷阱（zptest（:,1,1），欧米茄（:,1,1））

答案=

-0.049999940237341

只是为了证明 omega 和 zptest 都是正面的：

> > 查找（欧米茄（:,1,1）<0）

答案=

空矩阵：0×1

> > 查找(zptest(:,1,1) < 0)

答案=

空矩阵：0×1

我知道我没有为我实际所做的事情提供任何上下文，但这似乎是一个与上下文无关的问题。有谁知道发生了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-15T18:30:08.297

尝试按升序重新排序 x（以及相应的 y 值）：

```
x_order = x(end:-1:1); %fliplr
y_order = y(end:-1:1); %fliplr
trapz(x_order, y_order) 
```

通过`trapz(x,y)`diff(x,1,1) 应用 x 的微分，即`[x(2:n,:) - x(1:n-1,:)].`如果您的 x 下降，这将给出负 dx。不管是正面的还是负面的。但是，在`plot`曲线中会出现正定（您实际上看不到点的顺序，只是平面上两个向量的对）。

**示例**（比较以下）：

```
x = [-1 -0.5 0]; y = 0.5-x; 
figure; plot(x,y); hold on; plot(-x, y,'r')
trapz(x, y)
trapz(-x, y)
figure; plot(x, y); hold on; plot(fliplr(-x), fliplr(y),'r')
trapz(fliplr(-x), fliplr(y)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T19:35:37.840

像这样想。如果限制反转，始终为正的函数的积分仍将为负。因此我们知道

```
int(x^2,-1,1) = 2/3 
```

但

```
int(x^2,1,-1) = -2/3 
```

显然 x.^2 始终是一个正数，但这里的积分限制不是增加，而是减少。

如果对 trapz 的调用中的 x_i 不是按递增顺序排列的，那么您将得到否定的结果。这是由trapz 反映的。Trapz 会看到呈现给它的点的顺序。

```
x = -1:.1:1;
trapz(x,x.^2)
ans =
         0.67

xrev = fliplr(x);
trapz(xrev,xrev.^2)
ans =
        -0.67 
```

而且，正如 gevang 所指出的，该图仅显示该函数是正的，而不是点的顺序。

# vmware - VMware vFabric tc Server Developer 所需的端口 8080

> ID：11973802
> 
> 赞同：8
> 
> 时间：2012-08-15T17:07:52.037
> 
> 标签：vmware, sts-springsourcetoolsuite, tcserver

我正在使用 VMware vFabric tc Server Developer Edition v2.6 附带的 STS（SpringSource Tool Suite）。问题是，每次我启动它时，它都会显示以下错误：

> VMware vFabric tc Server Developer Edition v2.6 所需的端口 8080 已在使用中。服务器可能已经在另一个进程中运行，或者系统进程可能正在使用该端口。要启动此服务器，您需要停止其他进程或更改端口号。

我没有使用我所知道的那个端口的任何东西。直到今天它一直运行良好。

我也尝试更改端口号，但它不接受更改。例如，如果我将其更改为 8081，然后重新启动 STS，它将覆盖端口并将其设置回 8080。

任何人都可以提供一些想法来解决这个问题吗？

仅供参考，我在 VirtualBox 中运行 STS。

谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-15T07:36:38.807

*这适用于最新的 STS 版本 - 3.0.0*

当您打开 STS 时，在 Package Explorer 视图（左侧）中，您应该会看到一个名为**Servers**的项目文件夹。

1.  打开**服务器 > VMware vFabric tc Server Developer Edition v2.7-config > catalina.properties**
2.  在文件底部，您将看到定义的 2 个属性：
    *   生物.http.port
    *   生物.https.port
3.  更改`bio.http.port`为 8080 以外的其他端口（例如 8081）
4.  更改`bio.https.port`为 8443 以外的其他端口（例如 8444）
5.  点击“保存”。

现在，当您右键单击部署到内置 tc 服务器并启动它时，它应该在新端口上运行。祝你好运！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-15T03:15:20.250

在“服务器”视图中，双击要更改端口的服务器。这将打开概览页面。展开端口选项卡并输入所需的端口设置。STS 使用此配置页面的原因是它允许您在不更改服务器安装目录中的配置的情况下配置工作区服务器。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-18T09:56:12.270

或者，您可能想使用 oneliner 直接杀死仍绑定到该端口的僵尸进程：

```
sudo kill -9 `lsof -ti:8080` 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-04T07:52:40.487

结合 Gareth 的建议，这就是我的工作：

*   在 Servers 视图中，右键单击您的服务器，然后单击 Monitoring -> Properties
*   停止监听端口 8080 的监视器。
*   保存更改并启动服务器。

# sorting - MPI 排序实现

> ID：11973807
> 
> 赞同：1
> 
> 时间：2012-08-15T17:08:08.653
> 
> 标签：sorting, mpi

我需要对一个非常大的文件进行排序，数百 Gb。幸运的是，我可以访问 Linux MPI 集群。有人知道一个好的但最重要的工作排序程序，它可以使用 MPI 在分布式环境中运行。实际上，我想计算该文件中的唯一行，所以如果有人知道一个可以做得更好的程序。否则我以后可以自己弄清楚如何做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T18:34:57.760

因为没有提供任何答案，但我只想分享我的结果。

我从[ordinal.com](http://www.ordinal.com)`nsort`下载了程序（2004 年[sortbenchmark.org](http://sortbenchmark.org)年度排序算法竞赛的获胜者）。尽管不是以集群方式排序，但它的排序速度非常快。我不记得它是什么了，但我使用. 我说的是比默认的 linux 排序快几十倍（可能大约 50 倍）。`nsort`

还有两点需要注意。

*   它仅限于非商业分发中的文本文件排序。
*   它具有与 linux 排序实用程序完全相同的界面。

# objective-c - iOS 应用程序中的 sinf() 和 cosf()

> ID：11973808
> 
> 赞同：4
> 
> 时间：2012-08-15T17:08:09.983
> 
> 标签：objective-c, ios, math, ios-simulator, trigonometry

> **可能重复：**
> [为什么 sin() 在这里没有返回正确的值？](https://stackoverflow.com/questions/8663965/why-doesnt-sin-return-the-correct-value-here)

我正在构建一个应用程序，它将在 上执行正弦 ( `sinf()`) 和余弦 ( `cost()`) 等数学运算`floats`。现在，当我尝试计算 90（即 1）的正弦值时，我得到的结果是 0.89……这是非常错误的。结果如此偏离是否有原因？有没有办法改进它？我尝试过使用`double`而不是`float`得到相同的答案......它是否可能只是像我在模拟器中运行它时一样，并且可以在真正的 iPhone 上正常工作？最后，是否会使用类似`GCMathParser`或 `DDMathParser`提高结果准确性的数学解析器？

谢谢， ：]

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-15T17:10:32.177

和函数使用弧度`sinf`。`cosf`您必须先转换：

```
float result = sinf(yourDegree / 180 * M_PI); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-15T17:13:48.953

问题是，它取的是 90 弧度的正弦，而不是度数。尝试 sin(M_PI_2) 90°

这些函数使用弧度，而不是度数。

要将度数转换为弧度，请使用度数 * π / 180，因此您可以执行类似 sin( 90 * M_PI / 180 ) 之类的操作，将其减少为 π / 2 或 M_PI_2

[为什么 sin() 不返回正确的值？](https://stackoverflow.com/questions/8663965/why-doesnt-sin-return-the-correct-value-here)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-15T17:10:22.987

与往常一样：[这些函数以弧度工作](http://en.cppreference.com/w/c/numeric/math/sin)，而不是度数。

尝试计算 的正弦`π/2`，即 90° 的弧度。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-15T17:16:37.320

Objective-c 中的三角函数以弧度为单位。你以度数给出论点。90 弧度的 sin 是 0.89。

看：

[http://www.wolframalpha.com/input/?i=sin%2890+rad%29](http://www.wolframalpha.com/input/?i=sin%2890+rad%29)

要转换为度数，只需将度数除以 180，然后乘以 pi（3.14159 作为近似值就足够了）

转换后，答案如预期的那样为 1。

[http://www.wolframalpha.com/input/?i=sin%2890](http://www.wolframalpha.com/input/?i=sin%2890) *pi%2F180+rad%29

# android - 即使清单更改，PhoneGap 方向更改也会崩溃

> ID：11973810
> 
> 赞同：0
> 
> 时间：2012-08-15T17:08:19.580
> 
> 标签：android, cordova

我看过很多参考资料或类似的问题，但他们都教我这样做：将“android:configChanges="orientation|keyboardHidden|keyboard|screenSize|locale" 添加到

但它已经完成并且在方向改变时，应用程序崩溃了。我试图遵循每一个提示，但它不起作用。

这是我的清单文件：

```
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
        package="com.guia.peixe"
        android:versionCode="1"
        android:versionName="1.0" >

        <uses-sdk
            android:minSdkVersion="8"
            android:targetSdkVersion="15" />
        <supports-screens 
        android:largeScreens="true" 
        android:normalScreens="true" 
        android:smallScreens="true" 
        android:resizeable="true" 
        android:anyDensity="true" />
    <uses-permission android:name="android.permission.VIBRATE" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS" />
    <uses-permission android:name="android.permission.READ_PHONE_STATE" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.RECEIVE_SMS" />
    <uses-permission android:name="android.permission.RECORD_AUDIO" />
    <uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" />
    <uses-permission android:name="android.permission.READ_CONTACTS" />
    <uses-permission android:name="android.permission.WRITE_CONTACTS" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
    <uses-permission android:name="android.permission.GET_ACCOUNTS" />
    <uses-permission android:name="android.permission.BROADCAST_STICKY" />
        <application
            android:icon="@drawable/ic_launcher"
            android:label="@string/app_name"
            android:theme="@style/AppTheme" >
            <activity
                android:name=".MainActivity"
                android:label="@string/title_activity_main" 
                android:configChanges="orientation|keyboardHidden|keyboard|screenSize|locale">
                <intent-filter>
                    <action android:name="android.intent.action.MAIN" />
                    <category android:name="android.intent.category.LAUNCHER" />
                </intent-filter>
            </activity>
        </application>

    </manifest> 
```

这是代码的最终版本，完成后出现错误：

说明资源路径位置类型错误：错误：不允许使用字符串类型（在“configChanges”处，值为“orientation|keyboardHidden|keyboard|screenSize|locale”）。AndroidManifest.xml /G‌​uia do Peixe line 34 Android AAPT问题

但是 Cordova 文档上的示例指出了这一点，我对字符串所做的任何更改都没有纠正错误。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T18:32:04.023

那是因为您的 XML 无效。它应该是：

```
<activity
    android:name=".MainActivity"
    android:label="@string/title_activity_main"
    android:configChanges="orientation|keyboardHidden|keyboard|screenSize|locale"> 
```

请注意，您的 > 位置错误。

# jquery - Jquery Layerslider - 水平滚动问题

> ID：11973812
> 
> 赞同：2
> 
> 时间：2012-08-15T17:08:23.123
> 
> 标签：jquery

我正在使用 LayerSlider - 内置在 JQuery 中的视差效果滑块，这是一个可爱的产品，但我没有太多运气来获得我需要的效果。

CSS 导致出现水平滚动条，以便屏幕可以向右滚动，这看起来不太好。

滑块中的元素需要正确定位并使用 container_16 类来正确适配。

你可以在这里看到它的作用......

[http://www.paramics-online.com/index4.php](http://www.paramics-online.com/index4.php)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T17:26:53.153

设置“溢出：隐藏；” 在 id="splashd" ~~class "container_16"~~的 div 上似乎可以解决问题。

具体将其添加到css中：

```
#splashd {
    overflow: hidden;
} 
```

希望有帮助。

# http - 请求中未接受的 Content-Type 的 HTTP 状态代码

> ID：11973813
> 
> 赞同：48
> 
> 时间：2012-08-15T17:08:24.063
> 
> 标签：http, rest, mime-types, http-status-codes, http-request

对于某些资源，我的 RESTful 服务器仅接受`PUT`和`POST`请求以 JSON 对象作为内容主体的请求，因此需要使用`Content-Type`of`application/json`而不是`application/x-www-form-urlencoded`或`multipart/form-data`其他任何内容。

格式错误的 JSON（或缺少 JSON）返回`400`带有错误消息的错误消息，该错误消息直接取自 JSON 解析器引发的异常，用于调试目的。

哪个 HTTP 错误代码意味着客户端发送了一个不可接受的请求`Content-Type`，即使服务器可以在技术上解析请求内容？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-08-15T17:17:19.193

它可以`415 Unsupported Media Type`根据这个列表：[http](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.16) ://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.16 。

# jsp - 使用 struts2 和 InputStream 从 blob 到图像

> ID：11973820
> 
> 赞同：0
> 
> 时间：2012-08-15T17:08:45.130
> 
> 标签：jsp, struts2, inputstream

我想知道为什么我对此一无所知。我有一个从 SQL Server 2008 返回字节数组的函数，但我什么也没得到，为什么？.getWhiteLabelingLogo() 是一个函数，它返回一个带有我想在 jsp 页面上显示的图像的 byte[]。我访问这个

```
import java.io.BufferedInputStream;
import java.io.ByteArrayInputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.rmi.RemoteException;
import java.util.Map;

import javax.servlet.http.HttpServletResponse;

import org.apache.axis.MessageContext;
import org.apache.struts2.ServletActionContext;
import org.datacontract.schemas._2004._07.CCIS_Web_Services_PublicApi.PapiAccountInfo;
import org.datacontract.schemas._2004._07.CCIS_Web_Services_PublicApi.PapiUserInfo;

import Services.Web.CCIS.BasicHttpBinding_PublicApiServiceStub;
import Services.Web.CCIS.PublicApiService_PortType;

import com.opensymphony.xwork2.ActionContext;
import com.opensymphony.xwork2.ActionSupport;

public class ShowImageAction extends ActionSupport{
  Map session;
 private byte[] itemImage; 
 private InputStream str = null;
public String execute() throws RemoteException { 
    System.out.println("Estoy aquí");
        HttpServletResponse response = ServletActionContext.getResponse(); 

   session = ActionContext.getContext().getSession();
   PublicApiService_PortType puerto=(PublicApiService_PortType) session.get("puerto");
   ((BasicHttpBinding_PublicApiServiceStub)puerto).setMaintainSession(true);

   MessageContext ctx=(MessageContext) session.get("contexto");
   PapiUserInfo[] users;

    users = puerto.getUsers();
    Long accountID=users[0].getID();
    PapiAccountInfo info=puerto.getAccountInfo(accountID);
            itemImage=info.getWhiteLabelingLogo();
            str=new ByteArrayInputStream(itemImage);
        return SUCCESS;

}

  public void setItemImage(byte[] itemImage) { 
      this.itemImage = itemImage; 
   }

   public InputStream getStr() {
    return str;
   }

   public void setStr(InputStream str) {
    this.str = str;
   }

   public byte[] getItemImage() {
    return itemImage;
   } 

  } 
```

在 index.jsp 我有这个：

```
<img src="<s:url value="ShowImageAction" />" border="0" width="100" height="100"> 
```

在 struts.xml 我有这个：

```
 <action name="ShowImageAction">
  <result name="success" type="stream">
    <param name="inputName">str</param>
    <param name="contentType">image/jpeg</param>

 </result>
</action> 
```

我做的不好是因为我什么都没有。非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T17:20:37.160

好吧，对于初学者来说，你根本没有动作方法。您*确实*有一个名为 的方法`execute`，但它是静态的并返回 void。操作方法是非静态的，并返回一个字符串，该字符串映射到 struts.xml 中的结果。

此外，在响应中设置内容类型后，您永远不会发送任何数据。

此操作还有其他问题，例如在操作上使用可变静态字段，这不是线程安全的。

这里有一些步骤：

*   将方法更改`execute`为非静态并返回一个字符串
*   `return SUCCESS;`在方法末尾添加一行
*   更新 struts.xml 映射以引用结果“success”（SUCCESS 是一个实际值为“success”的常量）
*   使三个成员字段非静态
*   在 struts.xml 中而不是在代码中设置内容类型（参见下面的示例）
*   删除 response.reset() 和 .setContentType() 调用

例子：

```
<action name="ShowImageAction" class="package.for.ShowImageAction">
  <result name="success" type="stream">
    <param name="contentType">image/jpeg</param>
    <param name="inputName">str</param>
  </result>
</action> 
```

然后，如果它仍然不适合您，请适当地修改您的问题。

# entity-framework - EntityObject 5.x 和自我跟踪实体 5.x

> ID：11973825
> 
> 赞同：1
> 
> 时间：2012-08-15T17:09:33.133
> 
> 标签：entity-framework

有谁知道最新版本 EF 的自我跟踪实体模板背后的 if/when/where 吗？我们的团队希望能够继续利用 EF 团队记录的性能改进，但我们无法找到任何对我们所依赖的自我跟踪实体的新 T4 模板的引用之上。

我们已经尝试启动旧模板，但框架发生了太多变化。

MSDN上有一个关于它的线程，但它已经有一段时间没有更新了。（http://social.msdn.microsoft.com/Forums/en-US/adodotnetentityframework/thread/4993d0bf-94e8-4d14-aff1-3458b4ad467f/#889cc5f1-e267-448a-ae82-e3d705b7dfa5）

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T11:20:26.143

您可以从[这里](http://visualstudiogallery.msdn.microsoft.com/a3ac10a5-9365-4096-bb58-d9a1ba71db8f?SRC=VSIDE)下载，它们现在可用。

# android - 在 Android 4 上从 Internet 下载 XML 文件时出现异常（但它适用于 Android 2.3）

> ID：11973831
> 
> 赞同：0
> 
> 时间：2012-08-15T17:09:53.670
> 
> 标签：android, http-post, httpclient, android-xml, android-internet

我在 Android 中从 Internet 下载 XML 文件时遇到问题。我写了一些代码，它适用于 Android 2.3 模拟器。但是，它不适用于 Android 4.03 模拟器，也不适用于真正的 Android 4 设备。这是我的代码：

```
public String getXmlFromUrl(String url) {
    String xml = null;

    try {
        // defaultHttpClient
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        xml = EntityUtils.toString(httpEntity);

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    // return XML
    return xml;
} 
```

我在线出错：

```
HttpResponse httpResponse = httpClient.execute(httpPost); 
```

这是来自 LogCat 的日志：

```
08-15 16:59:32.436: E/AndroidRuntime(623): FATAL EXCEPTION: main
08-15 16:59:32.436: E/AndroidRuntime(623): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.testy/com.example.testy.MainActivity}: android.os.NetworkOnMainThreadException
08-15 16:59:32.436: E/AndroidRuntime(623):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
08-15 16:59:32.436: E/AndroidRuntime(623):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
08-15 16:59:32.436: E/AndroidRuntime(623):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
08-15 16:59:32.436: E/AndroidRuntime(623):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
08-15 16:59:32.436: E/AndroidRuntime(623):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-15 16:59:32.436: E/AndroidRuntime(623):  at android.os.Looper.loop(Looper.java:137)
08-15 16:59:32.436: E/AndroidRuntime(623):  at android.app.ActivityThread.main(ActivityThread.java:4424)
08-15 16:59:32.436: E/AndroidRuntime(623):  at java.lang.reflect.Method.invokeNative(Native Method)
08-15 16:59:32.436: E/AndroidRuntime(623):  at java.lang.reflect.Method.invoke(Method.java:511)
08-15 16:59:32.436: E/AndroidRuntime(623):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
08-15 16:59:32.436: E/AndroidRuntime(623):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
08-15 16:59:32.436: E/AndroidRuntime(623):  at dalvik.system.NativeStart.main(Native Method)
08-15 16:59:32.436: E/AndroidRuntime(623): Caused by: android.os.NetworkOnMainThreadException
08-15 16:59:32.436: E/AndroidRuntime(623):  at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1099)
08-15 16:59:32.436: E/AndroidRuntime(623):  at java.net.InetAddress.lookupHostByName(InetAddress.java:391)
08-15 16:59:32.436: E/AndroidRuntime(623):  at java.net.InetAddress.getAllByNameImpl(InetAddress.java:242)
08-15 16:59:32.436: E/AndroidRuntime(623):  at java.net.InetAddress.getAllByName(InetAddress.java:220)
08-15 16:59:32.436: E/AndroidRuntime(623):  at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:137)
08-15 16:59:32.436: E/AndroidRuntime(623):  at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
08-15 16:59:32.436: E/AndroidRuntime(623):  at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
08-15 16:59:32.436: E/AndroidRuntime(623):  at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
08-15 16:59:32.436: E/AndroidRuntime(623):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
08-15 16:59:32.436: E/AndroidRuntime(623):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
08-15 16:59:32.436: E/AndroidRuntime(623):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
08-15 16:59:32.436: E/AndroidRuntime(623):  at com.example.testy.XMLParser.getXmlFromUrl(XMLParser.java:54)
08-15 16:59:32.436: E/AndroidRuntime(623):  at com.example.testy.MainActivity.onCreate(MainActivity.java:34)
08-15 16:59:32.436: E/AndroidRuntime(623):  at android.app.Activity.performCreate(Activity.java:4465)
08-15 16:59:32.436: E/AndroidRuntime(623):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
08-15 16:59:32.436: E/AndroidRuntime(623):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
08-15 16:59:32.436: E/AndroidRuntime(623):  ... 11 more 
```

我能用它做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T17:26:50.047

您正在主线程上使用网络功能。您需要使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)来完成此操作。从 Honeycomb 开始[Strictmode](http://android-developers.blogspot.in/2010/12/new-gingerbread-api-strictmode.html)检查默认启用。所以网络操作会引发异常。Gingerbread 中未启用严格模式。因此，它适用于姜饼，但不适用于 ICS

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T18:07:35.217

您正在主线程上执行（可能很慢）网络操作。如果您的目标 SDK 是 11 (Honeycomb) 或更高版本，这将`NetworkOnMainThreadException`在 Honeycomb 或更高版本上抛出异常，因为此行为可能会阻塞 UI 并导致应用程序无响应。即使在预 Honeycomb 设备[上，也不鼓励这种行为](http://developer.android.com/guide/practices/responsiveness.html)。

您可以使用 an`AsyncTask`来解决这个问题，将数据加载到其`doInBackground(..)`.

# java - 如何在 CQ5 中对最近 2 个月内修改的内容进行全文搜索？

> ID：11973832
> 
> 赞同：3
> 
> 时间：2012-08-15T17:09:53.440
> 
> 标签：java, search, jcr, aem

[我正在尝试使用内置的查询构建器 api](http://dev.day.com/docs/en/cq/current/dam/customizing_and_extendingcq5dam/query_builder.html)对 CQ 中的内容进行全文搜索。这工作正常，但现在我想将搜索结果限制为过去 2 个月内修改过的结果。我看过使用[相对日期时间谓词](http://dev.day.com/docs/en/cq/5-4/javadoc/com/day/cq/search/eval/RelativeDateRangePredicateEvaluator.html)。我正在使用的属性是：

```
 QueryBuilder builder = sling.getService(QueryBuilder.class);
   String fulltextSearchTerm = request.getParameter("q");

   Map<String, String> map = new HashMap<String, String>();
   map.put("relativedaterange", "@jcr:content/cq:lastModified");
   map.put("relativedaterange.lowerBound", "-2M");
   map.put("fulltext", fulltextSearchTerm);
   map.put("path", "/content/test/");
   map.put("type", "cq:Page");
   map.put("orderby", "@jcr:content/cq:lastModified");
   map.put("orderby.sort", "desc");

   Query query = builder.createQuery(PredicateGroup.create(map), resourceResolver.adaptTo(Session.class)); 
```

这给了我搜索结果，但不限于最近 2 个月内修改过的结果。我是正确使用这些属性还是需要设置其他值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T11:25:53.530

`relativedaterange`关键是`relativedaterange.property`. 这显示在父类[DateRangePredicateEvaluator](http://dev.day.com/docs/en/cq/5-4/javadoc/com/day/cq/search/eval/DateRangePredicateEvaluator.html)的 java 文档中。并且通过使用查询构建器调试器，它表明您不需要`@`在乞求值时使用符号。

所以最终它最终成为：

```
 map.put("1_relativedaterange.property", "jcr:content/cq:lastModified");
  map.put("1_relativedaterange.lowerBound", "-2M"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-28T11:00:46.307

为了快速测试您的查询，您可以访问 [http://xxxx:4502/libs/cq/search/content/querydebug.html](http://x.x.x.x:4502/libs/cq/search/content/querydebug.html) 并输入您需要添加到谓词组的参数。将这些添加到谓词组，您应该得到结果。

```
path=/content/geometrixx
type=cq:Page
1_relativedaterange.property=jcr:content/cq:lastModified
1_relativedaterange.lowerBound=-2M 
```

这里“ `relativedaterange`”是这个谓词评估器的名称

这里 2M 表示 2 个月，其他可用选项如*1s 2m 3h 4d 5w 6M 7y（一秒、两分钟、三小时、四天、五周、6 个月、7 年）。*，请参阅[http://dev.day.com/docs/en/cq/5-4/javadoc/com/day/cq/search/eval/RelativeDateRangePredicateEvaluator.html](http://dev.day.com/docs/en/cq/5-4/javadoc/com/day/cq/search/eval/RelativeDateRangePredicateEvaluator.html)了解更多详情。

# java - 在 Java EE 中创建 Web 爬虫

> ID：11973834
> 
> 赞同：3
> 
> 时间：2012-08-15T17:10:09.057
> 
> 标签：java, jakarta-ee, web, web-crawler, jsoup

我正在使用 Java EE 技术创建一个网络爬虫。我创建了一个爬虫服务，其中包含 WebCrawler 在术语`CrawlerElement`对象中的结果，其中包含我感兴趣的信息。

目前我正在使用`JSOUP`图书馆来做到这一点。但它不可靠我正在尝试连接 3 次，并且超时仍然是 10 秒它是不可靠的。

不可靠是指即使可以公开访问，爬虫程序也无法访问。我知道这可能是由于`robots.txt`排斥，但在这方面也是允许的，但它仍然是不现实的。

因此，我决定使用`URLConnection`具有`openConnection`然后`connect`执行此操作的方法的对象。

我还有一个困扰着我的要求，那就是：我必须以毫秒为单位获取 CrawlerElement 的响应时间，这意味着从页面 A 加载页面 B 需要多少秒？我检查了 URLConnection 的方法，没有办法做到这一点。

在那个话题上有什么想法吗？谁能帮我？

我在考虑编写一个代码之前和之后在gettingContent代码之前以毫秒为单位的当前时间和以毫秒为单位的当前时间减去并将该毫秒保存在数据库中，但我认为它是否准确？

提前致谢。

编辑：当前实现

当前的实现，它给了我 statusCode、contentType 等。

```
import java.io.IOException;
import java.net.URL;
import java.net.URLConnection;

public class GetContent {
public static void main(String args[]) throws IOException {
    URL url = new URL("http://www.javacoffeebreak.com/faq/faq0079.html");
    long startTime = System.currentTimeMillis();
    URLConnection uc = url.openConnection();
    uc.setRequestProperty("Authorization", "Basic bG9hbnNkZXY6bG9AbnNkM3Y=");
    uc.setRequestProperty("User-Agent", "");
    uc.connect();
    long endTime = System.currentTimeMillis();
    System.out.println(endTime - startTime);
    String contentType = uc.getContentType();
    System.out.println(contentType);
    String statusCode = uc.getHeaderField(0);
    System.out.println(statusCode);     
   }
} 
```

怎么说可以这样做，或者我应该使用重型 API，如 Apache HttpClient 或 Apache Nutch ..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T17:24:49.700

最好使用经过验证的框架，而不是重新发明轮子。试试 Apache Nutch（我推荐 1.x 分支，2.x 似乎太原始了）。实现自己的爬虫并支持并行、robots.txt / "noindex" 元标记、重定向、可靠性会很痛苦......有很多问题需要解决。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T17:31:55.217

好的，这意味着您已经完成了工作并在该 API/库中遇到了问题。我知道构建一个东西然后浪费所有代码并转移到另一个东西是很可怕的，但是如果您有可能的话，因为`JSoup`它只是一个解析器库并且将来可能会给您带来更多问题，因此我建议您使用这些[更稳定的API](http://java-source.net/open-source/crawlers/java-web-crawler)。您也可以为此目的使用[crawler4j](http://code.google.com/p/crawler4j/)。
这是[一些开源爬虫 API 的列表](http://en.wikipedia.org/wiki/Web_crawler#Open-source_crawlers)，通过进行一些研发，您可以找到一个很好的解决方案:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T17:14:34.337

试试 Apache HttpClient 库。我用它取得了很好的效果。对于 HTTP 特定的通信来说，这似乎要好一些。

# iphone - 通过 NavigationController 堆栈更改打开的 ViewController 的属性

> ID：11973836
> 
> 赞同：1
> 
> 时间：2012-08-15T17:10:12.177
> 
> 标签：iphone, ios, ios5, poptoviewcontroller

想知道如何设置已经在 NavigationController 堆栈上的视图控制器的属性

我的情况：

我想设置这样的图片上传流程

（导航堆栈）RootViewController -> TakePictureViewController -> EditPictureViewController -> UploadPictureViewController

当用户确认从 UploadPictureViewController 上传，而不是开始上传时，我想在 RootViewController 上设置一个包含上传查询的 NSDictionary 属性，然后将导航堆栈弹出回 RootViewController 并让它处理启动和状态报告询问。

这是我在uploadpictureviewcontroller中的代码，目前，代码确实弹出到正确的视图控制器，但uploadPackage属性仍然为零，我也尝试过`-setUploadPackage`

```
RootViewController *rvc = (RootViewController *)[self.navigationController.viewControllers objectAtIndex:0];

rvc.uploadPackage = uploadPackage;

[self.navigationController popToViewController:rvc animated:YES]; 
```

感谢所有帮助，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T17:21:36.567

尝试使用`[self.navigationController popToRootViewControllerAnimated:YES]`. 那应该这样做。

**编辑：**

如果您只有一个 RootViewController 实例，那么您可以将其设置为单例，因此您可以从任何其他控制器访问它（就像 appDelegate 一样）。为此，您需要将以下内容添加到您的`RootViewController.m`under `synthesize...;`：

```
static RootViewController *rootViewController;

+(id)sharedRootController {
    return rootViewController;
} 
```

在您的`init`方法中`RootViewController`添加以下行：

```
rootViewController = self; 
```

现在回到你的身边，`UploadPictureViewController`你可以像这样设置uploadPackage：

```
RootViewController *rvc = [RootViewController sharedRootController];
rvc.uploadPackage = uploadPackage; 
```

请注意，如果有多个 RootViewController 实例，则不应使用单例方法。

希望这可以帮助！

# php - 如何导入 php HttpResponse 对象

> ID：11973839
> 
> 赞同：0
> 
> 时间：2012-08-15T17:10:17.570
> 
> 标签：php

我是 OO php 的新手。我想使用 HttpResponse 对象，特别是 getLastModified() 函数。我试过

```
<?php print_r(HttpResponse::getLastModified); ?> 
```

它不知道这个对象。我该如何导入它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T17:15:26.340

您不必像通常在 Java 中那样在 PHP 中导入类。您只需：

*   安装并启用扩展
*   `include`/`require`包含该类的 PHP 文件

HttpResponse 类包含在`pecl_http`扩展中，可以在[http://pecl.php.net/上找到](http://pecl.php.net/)

# java - 获取位图图像的路径并将其转换为 Base64

> ID：11973841
> 
> 赞同：0
> 
> 时间：2012-08-15T17:10:29.597
> 
> 标签：java, android

我正在尝试采用如下图像的路径：“content://media/external/images/media/3”

并将其转换为 base64 字符串。

这是我现在拥有的代码：

```
public String ConvertandSetImagetoBase64(String imagePath) { 
    String base64 = null;
    byte[] input = null;

    try{
        FileInputStream fd = new FileInputStream(imagePath);
        Bitmap bmt = BitmapFactory.decodeFileDescriptor(fd.getFD());

        try{                
            ByteArrayOutputStream stream = new ByteArrayOutputStream();
            Bitmap tmp = ProfileActivity.scaleDownBitmap(bmt, 10, this);
            tmp.compress(Bitmap.CompressFormat.JPEG, 10, stream);
            input = stream.toByteArray();
            base64 = Base64.encodeToString(input, Base64.DEFAULT);
            //LocalProfileActivity.input = input;
        }catch(Exception e){
            Log.e(LOG_TAG,"[ONACTIVITYRESULT] Could not bind input to the bytearray: " + e.getMessage());
        }
    }
    catch (Exception e){
        Log.e("LocalProfile", "ConvertandSetImagetoBase64: Could not load selected profile image");
    }
    return base64;
} 
```

content://media/external/images/media/3 是我传递给该方法的内容。谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T17:27:12.043

由于您将位置指定为 URI，因此您可以尝试以下操作：

```
URL url = new URL(imagePath);
Bitmap bmt = BitmapFactory.decodeStream(url.openStream()); 
```

# ios - 为什么每次都会重置部分数据？

> ID：11973846
> 
> 赞同：0
> 
> 时间：2012-08-15T17:10:51.817
> 
> 标签：ios, xcode

我对 iOS 开发很陌生（正如您将在下面的代码中看到的那样）。我喜欢通过操纵现有代码做一些不同的事情来帮助自己学习新语言。不过，我对这个有点空白。在表格视图中每个部分的末尾，它使用的数据会重置并重新开始，而不是继续。谁能告诉我这里的问题出在哪里？

```
#import "RootViewController.h"
#import "DataController.h"
#import "DetailViewController.h"
#import "Play.h"

@implementation RootViewController

@synthesize dataController;
@synthesize play;

#pragma mark -
#pragma mark View lifecycle

- (void)viewDidLoad {
[super viewDidLoad];
self.title = NSLocalizedString(@"Plays", @"Master view navigation title");
}

#pragma mark -
#pragma mark Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
// Only one section.
return 3;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {

/*
 The number of rows varies by section.
 */
NSInteger rows = 0;
switch (section) {
    case 0:
        rows = 3;
        break;
    case 1:
        rows = 1;
        break;
    case 2:
        rows = 2;
        break;
    default:
        break;
}
return rows;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath
*)indexPath {

static NSString *CellIdentifier = @"PlayCell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

// Get the object to display and set the value in the cell.
Play *playAtIndex = [dataController objectInListAtIndex:indexPath.row];
cell.textLabel.text = playAtIndex.title;
return cell;
}

// Section header titles

#pragma mark -
#pragma mark Section header titles

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:
(NSInteger)section {

NSString *secttitle = nil;
switch (section) {
    case 0:
        secttitle = NSLocalizedString(@"Comedy", @"Comedy section title");
        break;
    case 1:
        secttitle = NSLocalizedString(@"Action", @"Action section title");
        break;
    case 2:
        secttitle = NSLocalizedString(@"Drama", @"Drama section title");
        break;
    default:
        break;
}
return secttitle;
}

// End of section header titles

#pragma mark -
#pragma mark Table view selection

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {

/*
 When a row is selected, the segue creates the detail view controller as the destination.
 Set the detail view controller's detail item to the item associated with the selected 
row.
 */
if ([[segue identifier] isEqualToString:@"ShowSelectedPlay"]) {

    NSIndexPath *selectedRowIndex = [self.tableView indexPathForSelectedRow];
    DetailViewController *detailViewController = [segue destinationViewController];
    detailViewController.play = [dataController objectInListAtIndex:selectedRowIndex.row];
}
}

@end 
```

感谢您到目前为止的回复。Detail 视图工作正常，从您目前的反馈来看，似乎是因为没有评估此代码，但我似乎无法确定将其合并到主视图中的哪个位置。

```
NSString *cellText = nil;

switch (indexPath.section) {
    case 0:
        cellText = play.date;
        break;
    case 1:
        cellText = play.genre;
        break;
    case 2:
        cellText = [play.characters objectAtIndex:indexPath.row];
        break;
    default:
        break;
}

cell.textLabel.text = cellText;
return cell; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T17:17:13.387

因为您只使用 indexPath.row 来获取单元格内容。您的数据模型还应该考虑 indexPath.section：

```
Play *playAtIndex = [dataController objectInListAtIndex:indexPath.row]; 
cell.textLabel.text = playAtIndex.title; 
```

即你有一个一维数据模型......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T17:17:32.343

这一行：

```
Play *playAtIndex = [dataController objectInListAtIndex:indexPath.row]; 
```

仅考虑当前 indexPath 的行，该行也在每个部分的开头重置为零。您需要使用数组数组或以其他方式考虑前面部分中的行以获得正确的索引。

# jquery - 使用 jquery 插件提交表单

> ID：11973849
> 
> 赞同：2
> 
> 时间：2012-08-15T17:11:09.710
> 
> 标签：jquery, twitter-bootstrap

我正在尝试使用 jquery 提交表单。我正在使用引导模式窗口。这是一个[js 小提琴](http://jsfiddle.net/DHZNv/111/)。我错过了什么吗？多谢

更新：我正在尝试使用 ajax 提交表单。我也尝试过，但不是运气。

```
$('#comment_form').on('submit', function(){

  $.post("/yourReceivingPage", $(this).serialize(), function(){

  // Hide the modal
    $("#my-modal").modal('hide');

  });

  // Stop the normal form submission
  return false;
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T17:30:47.997

您引用了错误的元素，我有一个适合您的工作示例，请检查并告诉我它是否适合您：

```
$(document).ready(function() {
    $('#comment-form-submit').click(function() {
        $('#comment_form').submit();
        alert('Handler for .submit() called.');
        return false;
    });
});​ 
```

[jsFiddle 工作演示](http://jsfiddle.net/rostovtsev/7SUTp/)

对于 AJAX 解决方案，您需要参考熟悉且已经讨论过的问题：

[jquery 序列化和 $.post](https://stackoverflow.com/questions/920294/jquery-serialize-and-post)

编辑：关于如何提取可点击链接的 ID 的问题，此代码将为您完成：

```
 $(document).ready(function() {
   $(".comments.no").mouseover(function() {
     myDivsId = this.id;  // as you mouse over on the link it will be stored in Global Var and then transferred anywhere you wish.
   });
     $('#comment-form-submit').click(function() {
       $('#comment_form').submit();
       alert('Handler for .submit() called + div\'s ID = ' + myDivsId);
       return false;
   }); 
```

});​</p>

[jsFiddle 现场演示](http://jsfiddle.net/rostovtsev/qGE2C/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T17:13:21.940

您正在寻找只是[提交（）。](http://api.jquery.com/submit/)您在示例中所做的是创建一个将在提交表单时运行的函数。此外，您没有为单击提交表单设置处理程序。

```
// This creates submit handler for the form
$('#comment_form').submit(function() {
    alert('Handler for .submit() called.');
    return false;
});​

// This creates the on click handler for the submit button
$('#comment-form-submit').on('click', function() {
    // This actually submits the form
    $('#comment_form').submit();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T17:14:24.337

您需要为评论表单提交按钮添加一个点击事件。

```
$(document).on('click','#comment-form-submit', function() {
    $('#comment_form').submit(function() {
       alert('Handler for .submit() called.');
       return false;
    });​
}); 
```

# android - 如何处理android服务中的保持连接

> ID：11973850
> 
> 赞同：6
> 
> 时间：2012-08-15T17:11:15.910
> 
> 标签：android, android-intent, xmpp, smack, asmack

我正在将 asmack 用于 android IM 应用程序，我在其中使用具有 AIDL 接口的远程服务。

在`onStartCommand`我的服务方法中，我编写如下代码。我创建连接，然后使用它登录。当任何人在我的应用程序`onCreate`的主要活动方法中运行我的应用程序时，运行我的服务`getApplicationContext.StartService(serviceIntent)`。它工作正常，但几分钟（有时 10 分钟，有时超过 10 分钟）后`messageListener`，我附加在服务内部停止接收消息。但我知道连接存在，因为在我`xmppConnection`用来发送消息的同时，它正在向用户 B 发送消息，但它没有收听来自用户 B 的消息。我不知道为什么我的听众停止收听消息。

```
public int onStartCommand(final Intent intent, final int flags, final int startId) {
    ConnectionConfiguration config = new ConnectionConfiguration(URL, MyPort, Host);
    xmppConnection = new XMPPConnection(config);
    xmppConnection.connect();
    xmppConnection.login("someid@sample.com", "testpass");
    xmppConnection.addPacketListener(myMessageListener, new PacketTypeFilter(Message.class));
    return START_STICKY;
}
private PacketListener myMessageListener = new PacketListener() {
    public void processPacket(Packet packet) {
        Message msg = (Message) packet;
    }
} 
```

请指导。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T13:28:41.803

您的连接是否在您不注意的情况下因错误而关闭？您应该为每个回调添加一个连接侦听器和一个日志以调试连接状态。

在 Android 上，可能会有一个“僵尸”套接字：您仍然可以对其进行写入，但接收者将永远不会收到消息，当然您将无法从中读取新消息。它可能在网络状态更改后发生。

为了检测我使用[XMPP Ping](http://xmpp.org/extensions/xep-0199.html)，从客户端从警报启动（每 15 分钟不精确重复）。我禁用了空白保持活动。这会破坏客户端和服务器（NAT 或代理）之间可能存在的大多数超时机制。另外，如果您没有收到任何对 ping 的答复（例如，在 20 秒内），您可以假设连接处于错误状态并手动重新连接。

# javascript - 遍历文档中的 CouchDB 字段 (validate_doc_update)

> ID：11973853
> 
> 赞同：1
> 
> 时间：2012-08-15T17:11:26.307
> 
> 标签：javascript, validation, couchdb

我正在尝试遍历 CouchDB 文档中的字段并检查该字段的旧版本和新版本是否相同（作为我的 validate_doc_update 的一部分）。但是，我想做相当于“文档中的 foreach 字段，检查以确保它们相同”，而不必说类似

```
oldrev.document.field1 == newrev.document.field1, oldrev.document.field2 == newrev.document.field2, 
```

呸呸呸。有没有办法用 CouchDB 字段做到这一点，还是我必须指定每个字段的名称？最好不要全部输入，如果我们更改了字段名称，就不必重新输入并进行调整。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T19:26:27.960

The values passed as `newDoc`, and `oldDoc` parameters to [`validate_doc_update` function](http://wiki.apache.org/couchdb/Document_Update_Validation) are Javascript objects: you compare two documents as you compare any JS objects. There no "CouchDB field".

You can write custom code, or you can use a JS library like [Underscore.js](http://underscorejs.org/). You can [include it as a CommonJS module](http://wiki.apache.org/couchdb/CommonJS_Modules). The only problem is the `_rev` field. My approach is to keep CouchDB metadata separate from document data, by putting the data in a `data` field. For example:

```
{ "_id": "ID", "_rev": "REV", "foo": "bar", "baz": [1, 2] } 
```

becomes

```
{ "_id": "ID", "_rev": "REV", "data": { "foo": "bar", "baz": [1, 2] } } 
```

Then the comparison can be done with

```
function(newDoc, oldDoc) {
  var _ = require("underscore");
  if (!_.isEqual(newDoc.data, oldDoc.data)) {
    // something changed...
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T17:59:54.940

一个 JS[`for in`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/for...in)循环就足够了：

```
for (var key in newrev) {
    if (newrev.hasOwnProperty(key) {
        if (oldrev[key] === newrev[key]) {
            // they are the same
        }
    }
} 
```

在这里您需要注意一件事，那就是在修订之间删除/添加字段可能更难验证。

我很确定[`Object.keys`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/keys)SpiderMonkey 可以使用它，因此您可能需要使用它来比较新旧键的数量。

# r - R中矩阵的局部最大值

> ID：11973854
> 
> 赞同：1
> 
> 时间：2012-08-15T17:11:30.630
> 
> 标签：r, matlab, max

我想知道是否有任何函数可以为平面上的矩阵提供局部最大值？

我找到了一个解决方案

[给定 R 中的二维数字“高度图”矩阵，如何找到所有局部最大值？](https://stackoverflow.com/questions/11059104/given-a-2d-numeric-height-map-matrix-in-r-how-can-i-find-all-local-maxima)

但这条线似乎有一些错误

> localmax <- focus(r, fun = f, pad=TRUE, padValue=NA)
> 
> 焦点错误（r，fun = f，pad = TRUE，padValue = NA）：缺少参数“w”

不知道如何联系提供解决方案的人，所以我只是在这里发布

问候后

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T17:55:21.887

就个人而言，我会将您的矩阵转储到 imageJ 中来执行此操作。
作为另一种选择，您可以移植这个 Matlab 代码[http://www.mathworks.com/matlabcentral/fileexchange/37388-fast-2d-peak-finder](http://www.mathworks.com/matlabcentral/fileexchange/37388-fast-2d-peak-finder)。该模块进行了一些平滑处理以提高在图像中找到“真实”峰值的机会。恕我直言，局部最大值只有在数学意义上的表面光滑时才有意义，即处处可微。

# tfs - 更改特定解决方案的 TFS 构建放置位置

> ID：11973855
> 
> 赞同：0
> 
> 时间：2012-08-15T17:11:39.990
> 
> 标签：tfs, msbuild

我在一个版本中有两个解决方案。我们当前的构建解决方案如下所示：

`<SolutionToBuild Include="$(BuildProjectFolderPath)/../../Main/Services/Solution1.sln"> <Targets></Targets> <Properties></Properties> </SolutionToBuild>`

`<SolutionToBuild Include="$(BuildProjectFolderPath)/../../Main/Web/Solution2.sln"> <Targets></Targets> <Properties></Properties> </SolutionToBuild>`

这样，输出将被放置在 \$(DropLocation)\$(BuildNumber)\Releases 文件夹下。我的目标是将每个解决方案的输出文件放在不同的放置文件夹中。例子。Solution1.sln 放置位置是\$(DropLocation)\$(BuildNumber)\Releases\Services。

如何指定构建属性以实现此结果的解决方案？我尝试使用以下属性但没有成功，因为几个输出文件未复制到指定的输出放置位置：

`<SolutionToBuild Include="$(BuildProjectFolderPath)/../../Main/Services/Solution1.sln"> <Targets></Targets> <Properties>OutDir=$(DropLocation)\$(BuildNumber)\Services\</Properties> </SolutionToBuild>`

编辑：我们目前正在使用 TFS2010，但这些是我们使用升级模板的旧 TFS2008 构建

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T23:17:05.513

我们使用 OutDir 属性。也许您的某些文件没有标记为“复制本地”？

```
<SolutionToBuild Include="$(BuildProjectFolderPath)\myFooSolution.sln"> 
<Properties>OutDir=$(OutDir)\FooFolder\</Properties> 
</SolutionToBuild> 
```

# c - 将源代码合并到一个文件中进行优化

> ID：11973858
> 
> 赞同：9
> 
> 时间：2012-08-15T17:12:00.207
> 
> 标签：c, optimization

我的目标是减少我的 C 项目的可执行文件的大小，并且我尝试了所有编译器/链接器选项，这在一定程度上有所帮助。我的代码由许多单独的文件组成。我的问题是将所有源代码合并到一个文件中是否有助于实现我想要的优化？我在某处读到，如果编译器在单个文件中找到所有代码而不是单独的多个文件，它会更好地优化。真的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T17:34:14.470

这取决于编译器。例如，英特尔 C++ Composer XE 可以自动优化多个文件（使用`icc -fast *.c *.cpp`or构建时`icl /fast *.c *.cpp`，分别用于 linux/windows）。

当您使用 Microsoft Visual Studio 或衍生产品（如用于微控制器的 Atmel Studio）时，每个单独的源文件都会单独编译（即，为项目中的每个and文件发出一个`cl`、`icl`或命令）。这意味着没有优化。`gcc``c``cpp`

对于微控制器项目，我有时必须将所有内容放在一个文件中，以使其甚至适合控制器上有限的闪存。如果您的编译器/IDE 像 Visual Studio 那样做，您可以使用一个技巧：选择所有源文件并让它们不参与构建过程（但将它们留在项目中），然后创建一个文件（我总是使用`whole_program.c`, 和`#include`其中的每个源（即非头文件）文件（请注意，`c`许多高级程序员不赞成包含文件，但有时，您必须以肮脏的方式进行操作，而对于微控制器，这实际上经常发生）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T17:25:15.710

当编译器在同一个可编译 (*.c) 文件中找到*所需*的代码时，它确实可以更好地优化。如果您的程序超过 1000 行左右，您可能会后悔将所有代码放在一个文件中，因为这样做会使您的程序难以维护，但如果少于 500 行，您可能会尝试使用一个文件，并且看看它是否没有帮助。

关键的考虑因素是一个可编译文件中的代码调用或以其他方式使用另一个文件中定义的对象（包括函数）的频率。如果跨越此边界的控制转移很少，那么擦除边界将不会显着提高性能。因此，在为性能编码时，关键是将紧密相关的代码放在同一个文件中。

我非常喜欢你的问题。在我看来，这是一个正确的问题；而且，虽然完整的答案不够简单，无法在 Stackexchange 中完全处理，但您对答案的追求会教给您很多东西。尽管您可能还没有意识到，但您的问题确实*与链接有关，*这是每个高级程序员最终都必须学习的主题。您的问题涉及符号表、内联、返回值的就地构造以及其他几个微妙的因素。

无论如何，如果您的程序少于 500 行左右，那么尝试单文件方法不会有什么损失。如果超过 1000 行，则不建议使用单个文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T17:33:58.527

我的经验是，使用 gnu/gcc 优化是在单个文件中加上包括创建单个对象。使用 clang/llvm 非常简单，我建议不要优化 clang 步骤，使用 clang 从 C 获取字节码，使用 llvm-link 将所有字节码模块链接到一个字节码模块，然后你可以优化整个项目，所有源文件一起优化，有限责任公司在朝着目标前进时增加了更多优化。您最好的结果是使用三重命令行选项告诉 clang 您的最终目标是什么。为了让 gnu 路径做同样的事情，要么使用包含将一个大文件编译为一个对象，要么如果除了链接器所做的一些事情之外还有一个机器代码级别的优化器，那么这就是它必须发生的地方。也许 gnu 有一个暴露的 ir 文件格式，

[http://github.com/dwelch67](http://github.com/dwelch67) 我的一些项目，虽然非常简单的程序，为相同的源文件构建了 llvm 和 gnu，你可以看到 llvm 构建的位置我从未优化的字节码和优化的字节码制作二进制文件（ llvm 的优化器在小的 while 循环方面存在问题，有时会生成非工作代码，一个非常快速的检查是你或他们是尝试非优化的 llvm 二进制文件和 gnu 二进制文件，看看它们是否都表现相同（你）或者如果只有优化的 llvm 不起作用（他们））。

# r - 从关联对象中检索定义 S4 引用类的实际源表达式

> ID：11973860
> 
> 赞同：4
> 
> 时间：2012-08-15T17:12:00.630
> 
> 标签：r, oop, expression, s4, reference-class

## 简而言之（实际问题）

如何访问定义 S4 引用类的**实际源代码/表达式**`?setRefClass`（请参阅）或返回的**对象**（因此**在**获取它之后，**而不是**通过调查实际源文件）？`getClass("MyClass")``getRefClass("MyClass")`

 ****## 我做的功课

由于一切都是 R 中的对象，我可以检索源代码/表达式

**1）通过简单地调查相应对象的常规功能：**

```
foo <- function(x) print(x)

> foo
function(x) print(x) 
```

**2）通过获取特定方法的方法对象的形式方法`selectMethod`：**

```
setGeneric(name="myMethod", signature=c("x"),
    def=function(x) standardGeneric("myMethod")       
)
setMethod(
    f="myMethod", 
    signature=signature(x="numeric"), 
    definition=function(x) print(x)
)
def <- selectMethod(f="myMethod", signature=c(x="numeric"))

# Get actual source code/expression
> attributes(def)$srcref
function(x) print(x) 
```

**但是 S4 参考类的情况似乎有所不同：**

```
setRefClass(Class="MyClass", fields=list(x.1="character"))

def <- getRefClass("MyClass")

# Inspect object >> no expression
> def
Generator object for class "MyClass":

Class fields:

Name:        x.1
Class: character

 Class Methods:  
    "callSuper", "copy", "export", "field", "getClass", "getRefClass", "import", 
"initFields", "show", "trace", "untrace"

 Reference Superclasses:  
    "envRefClass"

def.temp <- attributes(attributes(def)$.xData$def)

# Inspect attributes >> no expression
> attributes(def.temp)
$names
 [1] "fieldClasses"    "fieldPrototypes" "refMethods"      "refSuperClasses"
 [5] "slots"           "contains"        "virtual"         "prototype"      
 [9] "validity"        "access"          "className"       "package"        
[13] "subclasses"      "versionKey"      "sealed"          "class"          

# Alternatively:
> names(attributes(getClass("MyClass")))
 [1] "fieldClasses"    "fieldPrototypes" "refMethods"      "refSuperClasses"
 [5] "slots"           "contains"        "virtual"         "prototype"      
 [9] "validity"        "access"          "className"       "package"        
[13] "subclasses"      "versionKey"      "sealed"          "class" 
```

我似乎找不到存储准确定义类的实际源代码/表达式的属性。

**只是为了确保：这个表达式是我想要访问的**

```
setRefClass(Class="MyClass", fields=list(x.1="character")) 
```

* * *

## 背景/动机

我经常使用 S4 引用类 ( )，因此像**[类继承](http://en.wikipedia.org/wiki/Inheritance_%28object-oriented_programming%29)**`?setRefClass`这样的OOP 方面在我的日常工作中扮演着重要角色。我还遵循“**每个文件一个定义**”的范例，以使事情井井有条，因此各种类定义存储在**单独的文件**中，其中文件名对应于各个类的名称。

 ****与生活中的一切一样，这种方法有一些优点，但也有一些固有的缺点：

**看点一**

无论长短，您最终都会得到一个与各个源文件的字母文件顺序不再匹配的继承结构。因此，简单地一个接一个地获取一个文件将导致在某个特定点出现错误，其中一些所需的超类尚未被获取。

```
dir.create("classes", showWarnings=FALSE)
write("setRefClass(Class=\"A\", contains=\"B\", fields=list(x.3=\"logical\"))", 
    file="classes/class_A.R")
write("setRefClass(Class=\"B\", contains=\"C\", fields=list(x.2=\"numeric\"))", 
    file="classes/class_B.R")
write("setRefClass(Class=\"C\", fields=list(x.1=\"character\"))", 
    file="classes/class_C.R") 
```

`class_A.R`是 folder 中的第一个文件`classes`，但为了获取它，我们首先需要获取源`class_B.R`（因为该文件定义了 class `B`），这反过来又需要 class `C`，因此需要先获取`class_C.R`.

因此，正确的排序规则是：

```
c("class_C.R", "class_B.R", "class_A.R") 
```

**方面2**

对于某些任务，您确实想要/需要“**每个文件多个定义**”范例：在并行化时快速轻松地将必要的对象/函数/类分配给工作进程，在实际构建包时组织代码等。

```
path <- "classes/classes.R"
file.create(path)
write("setRefClass(Class=\"C\", fields=list(x.1=\"character\"))", 
    file=path, append=TRUE)
write("setRefClass(Class=\"B\", contains=\"C\", fields=list(x.2=\"numeric\"))", 
    file=path, append=TRUE)
write("setRefClass(Class=\"A\", contains=\"B\", fields=list(x.3=\"logical\"))", 
    file=path, append=TRUE) 
```

**广告方面 1**

我不喜欢保留某种手动整理参考来指定正确的采购顺序的想法，因为我认为这是计算机可以轻松为我完成的工作（找出正确的整理）。您在这里唯一需要做的就是找出每个类的超类（某种依赖关系），然后检索正确的排序规则就是小菜一碟。

**编辑**

如果有人感兴趣：我确实为此提出了一种工作方法。如果您想查看一些代码，请给我留言。它基于解析（不评估）相应的类 def 源文件，以调查`contains`列出超类的参数的值。然后对这些超类的源文件递归地重复整个过程，直到最终得到正确的排序规则。也不是那么费时间。

这是大纲：

```
x <- list.files("classes", full.names=TRUE)    
code <- base::parse(file=x[1])

> code 
expression(setRefClass(Class="A", contains="B", fields=list(x.3="logical")))

superclasses <- eval(code[[1]][["contains"]])
> superclasses
[1] "B"

# Next: investigate source file for class 'B' 
```

**广告方面 2**

我也不喜欢手动复制和粘贴，所以我实现了一个例程，允许我将存储在单个文件中或从各个对象中提取的源代码合并到单个“合并”文件（通过`deparse(<source_code_expression>)`和`write(..., append=TRUE)`）。至于类，正确的排序规则在这里也很重要，否则当您尝试获取合并文件时会再次出现错误。

对于这两个方面，能够选择如何获取类/函数/方法的实际源代码/表达式会很好：

1.  或者基于调查存储在相应源文件中的代码 ( `parse(file=*)`)
2.  或基于直接从相应对象访问所需信息。

第二个选项将是上述实际问题的链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T18:38:40.927

该命令的“源”代码未存储，因此您不会通过检查对象看到它。

`setRefClass`通过在控制台输入并点击 来查看源代码`[ENTER]`。请注意，您所做的只是将参数传递给函数......没有定义新的表达式。因此，当您`getRefClass`获得班级所知道的所有信息时。

您可以通过创建一个 parseRefClassArgs 函数来重新构建它，该函数重新构建 setRefClass 的参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T21:11:11.273

# 类定义

由于我们无法评估文件（因为我们不知道排序顺序），`source`或者探索定义的类不在桌面上。在这里，我们将每个文件中的文本解析为一个字符向量，保留以“setRefClass”开头的解析行。解析器去除空白并进行其他转换以使文本格式更统一，尽管以下将依赖于一致的类定义（例如，使用命名参数）。

```
fls <- dir()
names(fls) <- fls
p0 <- lapply(fls, function(fl) as.character(parse(text=readLines(fl))))
p1 <- lapply(p0, grep, pattern="^setRefClass", value=TRUE) 
```

让我们瞄准一个包含正在定义的类、包含的类和类定义所在的文件名的 data.frame

```
df <- data.frame(Class=NA_character_, contains=NA_character_,
                 File=rep(fls, sapply(p1, length)),
                 stringsAsFactors=FALSE) 
```

然后使用模式匹配/替换填充它

```
p2 <- unlist(p1, use.names=FALSE)
pat <- '.*Class = "([[:alnum:]]+)".*'
df[,"Class"] <- sub(pat, "\\1", p2)

pat <- '.*contains = "([[:alnum:]]+)".*'
idx <- grep(pat, p2)
df[idx,"contains"] <- sub(pat, "\\1", p2[idx]) 
```

以（为了好玩，我在 class_A.R 文件中添加了一个同样从 B 派生的 A1 类）

```
> df
  Class contains      File
1     A        B class_A.R
2    A1        B class_A.R
3     B        C class_B.R
4     C     <NA> class_C.R 
```

收获 Class / contains 数据帧的另一种策略是拦截对 setRefClass 的调用

```
gClass <- character()
gcontains <- character()
setRefClass <- function(Class, fields, contains=NA_character_, ...)
{
    gClass <<- c(gClass, Class)
    gcontains <<- c(gcontains, contains)
} 
```

`gClass`并且`gcontains`将包含在获取相关文件后用于构建依赖关系图的相关数据（假设可以在没有类定义可用的情况下获取文件）。

```
for (fl in dir()) source(fl) 
```

# 依赖项

我们想要的是依赖关系图，用于具有依赖关系的类。所以我们将使用来自[Bioconductor的](http://bioconductor.org)[graph](http://bioconductor.org/packages/2.10/bioc/html/graph.html)和[RBGL](http://bioconductor.org/packages/2.10/bioc/html/RBGL.html)包来构建一个合适的图

```
## From --> To == contains --> Class
m <- as.matrix(df[!is.na(df$contains), c("contains", "Class")])
gr <- ftM2graphNEL(m, edgemode="directed") 
```

然后要求从我们的每个基本包 ( `df[is.na(df$contains), "Class"]`) 开始进行广度优先搜索，并使用结果顺序来检索适当的排序规则

```
o <- bfs(gr, "C")                       # order: breadth-first search
unique(df[match(o, df$Class), "File"]) 
```

所以

```
classDefFilesCollateOrder <- function(fls)
{
    names(fls) <- fls
    p0 <- lapply(fls, function(fl) as.character(parse(text=readLines(fl))))
    p1 <- lapply(p0, grep, pattern="^setRefClass", value=TRUE)

    df <- data.frame(Class=NA_character_, contains=NA_character_,
                     File=rep(fls, sapply(p1, length)),
                     stringsAsFactors=FALSE)

    p2 <- unlist(p1, use.names=FALSE)
    pat <- '.*Class = "([[:alnum:]]+)".*'
    df[,"Class"] <- sub(pat, "\\1", p2)

    pat <- '.*contains = "([[:alnum:]]+)".*'
    idx <- grep(pat, p2)
    df[idx, "contains"] <- sub(pat, "\\1", p2[idx])

    ## From --> To == contains --> Class
    m <- as.matrix(df[!is.na(df$contains), c("contains", "Class")])
    gr <- ftM2graphNEL(m, edgemode="directed")

    ## single class only
    base <- df$Class[is.na(df$contains)]
    if (length(base) != 1)
        stop("don't yet know how to deal with more than 1 base class")
    o <- bfs(gr, base)

    unique(df[match(o, df$Class), "File"])
} 
```********

# .net - 自动完成文本框：仅获取用户输入

> ID：11973861
> 
> 赞同：0
> 
> 时间：2012-08-15T17:12:08.807
> 
> 标签：.net, winforms, autocomplete, textbox

我在自动完成模式下使用`AutoCompleteCustomSource`for a 。这按预期工作；但是，当出现自动完成建议时，我仍然需要访问用户输入的文本。也就是说，当出现建议时， 的属性将返回该建议。`TextBox``Append``Text``TextBox`

有没有办法只检索用户键入的字符串？

更新：我的限制之一是我必须使用`Append`自动完成模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T18:18:01.063

您是否尝试将属性设置为仅建议，这样文本框的文本属性将始终是用户输入的字符串，直到用户选择建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T19:07:47.533

作为示例，您需要执行以下操作，这是从我刚刚在 Designer.cs 文件中测试的 Windows 项目中粘贴的

赢得表格示例

```
this.txtStudGrade.AutoCompleteMode = System.Windows.Forms.AutoCompleteMode.Suggest;
this.txtStudGrade.AutoCompleteSource = System.Windows.Forms.AutoCompleteSource.ListItems; 
```

在设计器中设置 DropDownList AutoCompleteSource.ListItems；在设计器中设置 DropDownList AutoCompleteMode = AutoCompleteMode.Suggest;

WebForm 您可以使用 JQuery 来查看下面的链接以获取工作示例

[使用 JQuery 自动完成](http://nareshkamuni.blogspot.com/2012/06/sample-example-of-jquery-autocomplete.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T16:38:10.790

似乎没有一种简单的机制来仅检索用户输入的数据，在尝试解决此问题后，我可以理解原因。什么构成用户输入的数据并不总是很清楚，*微软*似乎决定不解决这个问题。

`TextChanged`我决定通过注册事件来手动跟踪用户数据。由于每次击键都会触发此事件，通过跟踪 的先前值`Text`，我可以确定是否发生了*追加自动完成*或粘贴操作。

下面的代码片段来自我的自定义类的`TextChanged`事件处理程序；包含用户输入的数据（类型）。`TextBox``UserText``string`

```
if (string.IsNullOrEmpty(UserText) || 
    UserText.Length > Text.Length || 
    UserText.Length + 1 == Text.Length)
{
  UpdateUserText(Text);
} 
```

`UpdateUserText(string)`首先确定是否发生了更改，如果是，则将新值分配给`UserText`并发出事件。在粘贴操作的情况下，可以使用[此处](https://stackoverflow.com/a/10122762/1244630)发布的解决方案；但是，我选择执行以下操作：

```
MouseClick += UpdateUserText;
KeyUp += UpdateUserText;

//--------------------------------------------------------

private void UpdateUserText(object sender, EventArgs args)
{
  if (SelectionLength == 0)
  {
    UpdateUserText(Text);
  }
} 
```

这样，如果 中的文本`TextBox`不再突出显示，那么我认为它已成为用户输入的文本。这负责粘贴操作（通过键盘或鼠标）并满足用户按下箭头键以尝试接受自动完成建议的情况。

我决定忽略的边缘情况之一是当用户输入了整个单词但最后一个字符时，在这种情况下，我将无法区分自动完成建议和用户输入。

我还考虑使用 a`StringBuilder`手动跟踪用户输入的数据，但我认为这比跟踪已经构建`string`的`Text`.

如果有人有建议，我总是愿意接受更好的实施:)

# visual-studio-2010 - 无法访问 TFS 2008 (TF31003)，但 Team Foundation Web System 工作正常

> ID：11973862
> 
> 赞同：0
> 
> 时间：2012-08-15T17:12:11.543
> 
> 标签：visual-studio-2010

我查看了现有的 Stack Overflow 问题，但没有找到任何符合我情况的问题。

我正在运行 TFS 2008，但无法在 Visual Studio 2010 中使用 Team Explorer 进行连接（错误消息 TF31003：您没有输入必要的凭据，或者您的用户帐户无权连接到位于*servername*的 TFS 服务器）。

我正在通过域帐户进行身份验证，并确认其他 TFS 用户也无法使用其凭据访问服务器。我在同一台服务器上设置了 Team Foundation Web System，并且相同的用户可以毫无问题地登录。这告诉我服务器已启动并且可以访问数据，只是不能通过 Visual Studio。我还检查了防火墙状态——完全禁用所有防火墙（我的机器和服务器）没有效果。

关于为什么 Visual Studio 不会对用户进行身份验证，我有什么明显的遗漏吗？（是的，我已经尝试重新启动我的开发机器和 TFS 服务器。）

# android - 从 SDCard 自动播放图像

> ID：11973868
> 
> 赞同：1
> 
> 时间：2012-08-15T17:12:28.743
> 
> 标签：android, image, sd-card, autoplay

抱歉，伙计们提出了所有模糊的问题。这就是我想做的。我希望我的应用程序随机播放 SdCard 中的图像，并且在应用程序启动后我不希望用户输入。我已经阅读了很多 sdcard 帖子，但这不是同一个问题。如果可能的话，请让我知道我该怎么做。一旦应用程序启动，我不希望任何用户输入它只是从 sdcard 播放图像。感谢您的帮助。顺便说一句，我正在尝试使用 android 来实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T17:16:21.420

将图像路径放入 sdcard 并将其传递给图库。您可以点击此链接了解更多信息[http://raivoratsep.com/114/android-gallery-tutorial-working-example/](http://raivoratsep.com/114/android-gallery-tutorial-working-example/)

假设你得到的路径名是

```
String pathName = "/sdcard/images/abc.jpg"; 
```

您可以将图像设置为图像视图

```
Drawable d = Drawable.createFromPath(pathName); 
```

希望这可以帮助你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T19:41:32.607

要显示 sdcard 中图像的幻灯片，请查看 [http://codinglookseasy.blogspot.in/2012/08/image-slide-show.html](http://codinglookseasy.blogspot.in/2012/08/image-slide-show.html)。希望这对您有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T07:49:43.580

尝试使用与 layout 文件夹中相同的 xml 文件创建另一个 layout-land 文件夹。当移动设备处于横向模式时，这将用作布局。并防止崩溃尝试使用

```
System.gc(); 
```

在 ondestroy() 中添加新图像并没有发现任何困难。他们为我工作得很好。

# xcode4 - 添加以下标志：-objc-all_load

> ID：11973870
> 
> 赞同：0
> 
> 时间：2012-08-15T17:12:43.860
> 
> 标签：xcode4

按照此链接添加标志（Objc-all_load）:: [http://experitest.com/studio/help2/WebHelp/index.htm#page=Connect_iOS_(iPhone,iPad)_-_for_NON-jailbroken_device.htm](http://experitest.com/studio/help2/WebHelp/index.htm#page=Connect_iOS_(iPhone,iPad)_-_for_NON-jailbroken_device.htm)

但它没有正确显示如何在 Xcode 中添加它——Xcode>构建设置>其他链接器标志>Objc-all_load。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T18:41:48.837

导航并找到“其他链接器标志”，然后**双击**它。到达那里后，您只需按下弹出窗口中的“+”按钮即可添加您的标志（Objc-all_load）。

![在此处输入图像描述](../Images/e73c487c72b1b5000ec57a8ecf763165.png)

# ms-access - 如何在 Access 2003 中实现版本控制？

> ID：11973871
> 
> 赞同：-1
> 
> 时间：2012-08-15T17:12:49.797
> 
> 标签：ms-access

我有一个需要修复的 Access 2003 数据库，之前的开发人员没有使用任何形式的版本控制，而且他的代码注释很弱或不存在。使用 Access 2003 实施版本控制的好方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T19:04:12.653

Access 与任何实现 Microsoft 源代码控制接口 (MSSCCI) 的提供程序完全兼容。因此，您可以使用 VSS，甚至据我所知 Team Foundation Server。

请注意，将 SCC 与 Access 一起使用确实可以解析到对象级别。因此，签入/签出单个查询、单个表单、单个表单等不仅是可能的，而且还允许多个开发人员参与该项目。

Access 2003 现在已经相当老了（10 年）。Access 的更高版本包括源代码控制选项，无需任何加载项或下载。旧版本的 Access 确实需要下载 + 安装 SCC 支持。

然而，自 90 年代以来，SCC 已内置到产品中，因此与 Access 一起使用已超过 15 年以上的长期功能。请注意，即使在 Access 2003 中，如此屏幕截图所示 - Access UI 确实具有内置支持，您可以出售查看哪些对象已签出：

![在此处输入图像描述](../Images/c76cd4a55ec3f9bf3dbedee69e6c6527.png)

（注意上面的复选框）这是另一个视图 - 复选框再次显示我从项目中签出的项目，“锁定”显示我尚未采取的其他对象。

![在此处输入图像描述](../Images/1fe16a858e0a38cf067a47f667c1b880.png)

我有 2003 年的 SCC 链接在这里：

[http://support.microsoft.com/kb/837136/en-us](http://support.microsoft.com/kb/837136/en-us)

# css - 子弹和浮动的冲突：IE7中的左侧

> ID：11973874
> 
> 赞同：3
> 
> 时间：2012-08-15T17:12:55.993
> 
> 标签：css, css-float

此问题出现在 Internet Explorer 中，我无法解决：

```
#test ul li {
list-style-type: disc;
float: left;
margin-left: 10px;
font-size: 16px;
} 
```

上面的代码在 Firefox 和 Chrome 中运行良好，但在 IE7 中它不显示项目符号。

我尝试停用该属性`float: left`并显示项目符号，但列表是垂直的。我的列表必须与项目符号水平对齐。

我尝试添加以下属性：

*   `list-style-position: inside`外面什么都没有。

*   using`display: inline`使子弹消失。

```
#test ul {
list-style-type: disc
} 
```

*   没事了

我试过用不同的值改变边距，用不同的值添加填充，什么都没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T17:38:08.113

尝试：

```
 ul{
    list-style:disc outside none;
    padding:0px;
    padding-left:12px;
    margin-left:8px;
    } 
```

[演示](http://jsfiddle.net/vkRdc/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T17:35:33.683

使用图像创建项目符号并将其设置为背景。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-05T05:03:26.063

可能有点晚了，但是当边距和填充调整失败时，在里面包含一个带有 display:list-item 的 span 标签似乎可以解决问题。请参阅[https://stackoverflow.com/a/18337398/1776573](https://stackoverflow.com/a/18337398/1776573)。当边距和填充调整力解决问题时，它对我有用..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T17:26:16.163

您可以使`li`s 内联和to`list-style`的，然后使用伪元素模拟项目符号：`ul``none``:before`

```
ul {
list-style: none;
margin: 0;
}
li {
display: inline;
}
li::before {
content: "o ";
} 
```

当然，您可以使用代表项目符号的 unicode 字符来代替“o”。

# wordpress - 错误 $.supersized({

> ID：11973876
> 
> 赞同：0
> 
> 时间：2012-08-15T17:12:57.137
> 
> 标签：wordpress, jquery-plugins, supersized

我为主页重新设计构建了这个标题模板。MAMP 在本地运行良好，但是当我将头文件加载到客户端的文件夹时出现问题。我在 firebug 中继续收到此错误：TypeError: $.supersized is not a function

我查看了每个网站，有关该主题的每个帖子，但似乎没有任何效果。这是代码：

```
<?php wp_enqueue_style( 'style', get_bloginfo('template_url').'/style.css');
wp_enqueue_style( 'supersized_style', get_bloginfo('template_url').'/supersized/css/supersized.css');
wp_enqueue_script( 'supersized_js',get_bloginfo('template_url').'/supersized/js/jquery.min.js', array('jquery'));
wp_enqueue_script( 'supersized_js', get_bloginfo('template_url').'/supersized/js/supersized.3.2.7.min.js', array('jquery'));
wp_enqueue_script( 'supersized_js', get_bloginfo('template_url').'/supersized/js/supersized.shutter.min.js', array('jquery'));?>

<?php wp_head(); ?>

    <script type="text/javascript">  

        jQuery(document).ready(function($) {
             $.supersized({

                //Functionality
                slideshow               :   1,      //Slideshow on/off
                autoplay                :   1,      //Slideshow starts playing automatically
                start_slide             :   1,      //Start slide (0 is random)
                slide_interval          :   5000,   //Length between transitions
                transition              :   1,      //0-None, 1-Fade, 2-Slide Top, 3-Slide Right, 4-Slide Bottom, 5-Slide Left, 6-Carousel Right, 7-Carousel Left
                transition_speed        :   500,    //Speed of transition
                new_window              :   0,      //Image links open in new window/tab
                pause_hover             :   0,      //Pause slideshow on hover
                keyboard_nav            :   1,      //Keyboard navigation on/off
                performance             :   2,      //0-Normal, 1-Hybrid speed/quality, 2-Optimizes image quality, 3-Optimizes transition speed // (Only works for Firefox/IE, not Webkit)
                image_protect           :   1,      //Disables image dragging and right click with Javascript
                image_path              :   'supersize/img/', //Default image path

                //Size & Position
                min_width               :   0,      //Min width allowed (in pixels)
                min_height              :   0,      //Min height allowed (in pixels)
                vertical_center         :   0,      //Vertically center background
                horizontal_center       :   1,      //Horizontally center background
                fit_portrait            :   0,      //Portrait     images will not exceed browser height
                fit_landscape           :   0,      //Landscape images will not exceed browser width

                //Components
                navigation              :   1,      //Slideshow controls on/off
                thumbnail_navigation    :   0,      //Thumbnail navigation
                slide_counter           :   1,      //Display slide numbers
                slide_captions          :   1,      //Slide caption (Pull from "title" in slides array)
                slides                  :   [           //Slideshow Images
{image : 'wp-content/themes/photo_philanthropy/supersized/slides/calvert.jpg', 
title : '<div id="tab"><h6 class="cap-tab">WHAT WE DO</h6><br/></div><div id="image-cap"><div id="main-title" ><h6 class="main-title" style="font-size:22px;line-height:135%;">PhotoPhilanthropy brings together photographers and non-profit organizations to create images that change the world.</h6></div></div><div id="photo-cap"><p class="photo-cap">WORLD VISION&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;PHOTO BY MARY F. CALVERT</p><p class="photo-cap" style="line-height:200%;">According to Human Rights Watch, local civilians continue to suffer from widespread instances of rape by Congolese forces.</p></div>', 
 url : 'photophilanthropy.org/www/blogmedia/wp-        content/themes/photophil/supersized/slides/'},  

{image : 'wp-content/themes/photo_philanthropy/supersized/slides/wakatobi.jpg', 
title : '<div id="tab"><h6 class="cap-tab">GRANTS FOR CHANGE</h6><br/></div><div id="image-cap"><div id="main-title"><h6 class="main-title" style="font-size:36px;">EMPOWERING NON-PROFITS</h6><br/><h6 class="subheading">Showcasing collaborations between photographers and nonprofits on the frontlines of social change.</h6></div></div><div id="photo-cap"><p class="photo-cap">WORLD WILDLIFE FUND&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;PHOTO BY JAMES MORGAN</p><p class="photo-cap" style="line-height:200%;">Enal plays with his pet shark, Wakatobi, Indonesia.</p></div>',
url : 'photophilanthropy.org/www/blogmedia/wp-        content/themes/photophil/supersized/slides/'},  

{image : 'wp-content/themes/photo_philanthropy/supersized/slides/valdisteno.jpg', 
title : '<div id="tab"><h6 class="cap-tab">EXHIBITIONS FOR CHANGE</h6><br/></div><div id="image-cap"><div id="main-title"><h6 class="main-title" style="font-size:36px;">AGENTS FOR CHANGE</h6><br/><h6 class="subheading">Recognizing the photgraphers who focus their lens on today’s most critical issues.</h6></div></div></div><div id="photo-cap"><p class="photo-cap">THE UMBRELLA FOUNDATION&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;PHOTO BY NICOLETTA VALDISTENO</p><p class="photo-cap" style="line-height:200%;">A young girl in the Kathmandu Valley moves bricks after they have dried and are now ready to be cooked.</p></div>',
url : 'photophilanthropy.org/www/blogmedia/wp-content/themes/photophil/supersized/slides/'}, 

{image : 'wp-content/themes/photo_philanthropy/supersized/slides/samburu.jpg', 
title : '<div id="tab"><h6 class="cap-tab">THE UNITED NATIONS</h6><br/></div><div id="image-cap"><div id="main-title" style="padding-top:5px;"><h6 class="main-title" style="font-size:44px;">BEHIND THIS FACE IS A STORY</h6><br/></div></div><div id="photo-cap"><p class="photo-cap"> BLUE PLANET NETWORK and THE SAMBURU PROJECT&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;PHOTO BY RUDI DUNDAS</p><p class="photo-cap"style="line-height:200%;">The Face of Water is the story of the women of Samburu who have spent lifetimes struggling to provide water for their families.</p></div>',
url : 'photophilanthropy.org/www/blogmedia/wp-content/themes/photophil/supersized/slides/'} ]

            }); 
        });

    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T00:08:08.970

看起来您的超大脚本由于某种原因没有被浏览器加载。检查 web 服务器和 firebug 的日志以确保 supersized.3.2.7.min.js 被加载。如果有一堆 404 - Web 服务器日志将阐明原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T17:19:37.987

我不得不使用：

```
jQuery(function($){

$.supersized({...
...
});

}); 
```

希望有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T06:40:11.823

我认为它与另一个自定义 javascript 文件发生冲突。重新检查所有 jQuery 脚本，无论其他 .js 是使用`jQuery(document).ready`函数启动还是简单地使用 .js 启动`jQuery(function($))`。

“ *TypeError: $.supersized is not a function* ”是firebug由于jQuery冲突而抛出的常见错误。

# math - 使用旋转矩阵的身体轴到地球轴？[openGL]

> ID：11973888
> 
> 赞同：2
> 
> 时间：2012-08-15T17:14:11.510
> 
> 标签：math, rotation, linear-algebra, gyroscope, euler-angles

我目前正在从事一个项目，该项目应该将从陀螺仪收集的数据表示为一个简单的 3d 图形，但我写的内容并不完全奏效——我只是整合了轴，然后旋转了对象。

一直在寻找解决方案，发现了一个叫做旋转矩阵的东西，但我不太明白它是如何工作的——猜想我需要取起始角度 [0,0,0] 并将它们转换成这样的矩阵，然后取陀螺数据 [yaw ,pitch,roll] 并将它们转换为相似的矩阵，将它们相乘并根据这个新矩阵计算新的角度？每次我使用以前的矩阵作为“基础”获得新的陀螺数据包时重复这个？

我做对了吗？我需要的是如何旋转已经旋转的对象，在某个地方有关于这个主题的任何资源吗？一直在寻找“3d 旋转矩阵”，但不是我一直在寻找的...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T18:06:17.483

旋转矩阵的教程以及您需要的集成在

[方向余弦矩阵 IMU：理论](https://drive.google.com/open?id=0B9rLLz1XQKmaZTlQdV81QjNoZTA)

手稿。

长话短说，你不能“简单地整合轴然后旋转对象”，不幸的是它比这更复杂。:( 不过别担心，手稿会一步一步告诉你该怎么做。

欧拉角（又名滚动、俯仰和偏航）是邪恶的，它们会破坏应用程序的稳定性，例如

*   [android方向传感器的奇怪行为](https://stackoverflow.com/q/5577334/341970)，

*   [减少 wiimote 俯仰/滚动变化](https://stackoverflow.com/q/5010978/341970)。

它们[也不适用于插值](https://stackoverflow.com/questions/5580283/interpolating-between-rotation-matrices/5580491#5580491)。只需使用旋转矩阵，您就会很高兴。

# maven - 复制依赖传递和不传递

> ID：11973889
> 
> 赞同：2
> 
> 时间：2012-08-15T17:14:14.193
> 
> 标签：maven, maven-dependency-plugin

在 pom.xml（jar 包装）中，我想利用 maven 依赖插件下载两种依赖项。我想下载一种带及物的，一种不带。到目前为止，我的插件部分包含以下元素：

```
<plugin>
  <artifactId>maven-dependency-plugin</artifactId>
  <version>2.5</version>
  <executions>
    <execution>
  <id>Copy dependencies transitive</id>
  <phase>initialize</phase>
  <goals>
    <goal>copy-dependencies</goal>
  </goals>
      <configuration>
        <excludeTransitive>false</excludeTransitive>
    <outputDirectory>lib</outputDirectory>
        <includeArtifactIds>artifact_1</includeArtifactIds>
  </configuration>
</execution>

    <execution>
      <id>Copy dependencies not transitive</id>
  <phase>initialize</phase>
  <goals>
    <goal>copy-dependencies</goal>
  </goals>
  <configuration>
        <outputDirectory>samples</outputDirectory>
        <excludeTransitive>true</excludeTransitive>
        <includeArtifactIds>artifact_2,artifact_3</includeArtifactIds>
  </configuration>
</execution>
  </executions>
</plugin> 
```

做完之后

```
mvn initialize 
```

artifact_1 位于 lib 中，artifact_2 和 3 位于 samples 中。但是，artifacts_1 的传递依赖项找不到。这是正确的方法吗？我以某种方式希望这个解决方案已经可以工作，但它似乎没有......欢迎更正......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T17:41:21.207

刚刚发现发生了什么......
includeArtifactIds 也会影响传递依赖项。因此，如果 artifact_4 和 artifact_5 是 artifact_1 的传递依赖项，它们就不会被复制，因为我没有包含它们。我认为这有点出乎意料，但好吧......这就是它的实施方式（但没有记录）。现在我刚刚从 includeArtifacts 更改为 excludeArtifacts 并且它可以工作。

# android - Android - 无法打开 keycharmap 文件

> ID：11973895
> 
> 赞同：1
> 
> 时间：2012-08-15T17:14:39.130
> 
> 标签：android, android-layout, android-c2dm, android-logcat

我的应用程序中有 C2DM 功能，有时在收到推送通知后，该活动从未出现。当我检查 logcat 时，我发现：

```
08-15 12:55:29.213: W/KeyCharacterMap(10661): Can't open keycharmap file
08-15 12:55:29.213: W/KeyCharacterMap(10661): Error loading keycharmap file '/data/usr/keychars/mapphone-switch.kcm.bin'. hw.keyboards.131072.devname='mapphone-switch'
08-15 12:55:29.213: W/KeyCharacterMap(10661): Can't open keycharmap file
08-15 12:55:29.213: W/KeyCharacterMap(10661): Error loading keycharmap file '/system/usr/keychars/mapphone-switch.kcm.bin'. hw.keyboards.131072.devname='mapphone-switch'
08-15 12:55:29.213: W/KeyCharacterMap(10661): Can't open keycharmap file
08-15 12:55:29.213: W/KeyCharacterMap(10661): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
08-15 12:55:31.494: W/KeyCharacterMap(10661): Can't open keycharmap file
08-15 12:55:31.494: W/KeyCharacterMap(10661): Error loading keycharmap file '/data/usr/keychars/omap-keypad.kcm.bin'. hw.keyboards.0.devname='omap-keypad'
08-15 12:57:58.432: W/KeyCharacterMap(10661): Can't open keycharmap file
08-15 12:57:58.432: W/KeyCharacterMap(10661): Error loading keycharmap file '/data/usr/keychars/atmxt-i2c.kcm.bin'. hw.keyboards.65537.devname='atmxt-i2c'
08-15 12:57:58.432: W/KeyCharacterMap(10661): Can't open keycharmap file
08-15 12:57:58.432: W/KeyCharacterMap(10661): Error loading keycharmap file '/system/usr/keychars/atmxt-i2c.kcm.bin'. hw.keyboards.65537.devname='atmxt-i2c'
08-15 12:57:58.432: W/KeyCharacterMap(10661): Can't open keycharmap file
08-15 12:57:58.432: W/KeyCharacterMap(10661): Using default keymap: /system/usr/keychars/qwerty.kcm.bin 
```

所以呃....这是什么意思？我用谷歌搜索，找到了这个答案：[Android can't open keycharmap file](https://stackoverflow.com/questions/8584733/android-cant-open-keycharmap-file)

但是，该问题的唯一答案中包含损坏的 URL。

有谁知道：1 这个错误是什么意思，2 如何修复它，3 如果它干扰了我的推送通知活动？

提前谢谢各位！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-09T17:19:20.537

在 Android 项目首选项中更改为 Google API 为我解决了这个问题。

# javascript - 如何将密钥与 JQuery $.each 循环中的字符串进行比较？

> ID：11973898
> 
> 赞同：0
> 
> 时间：2012-08-15T17:14:59.710
> 
> 标签：javascript, jquery, asp.net-mvc

我试图从自定义数据属性 JQuery 不显眼的适配器中获取错误消息，但我似乎无法将错误消息提取到变量中。我的验证消息返回为：

> 警告：没有为图像定义消息

代码如下：

```
$(document).ready(function () {
var errorMessage;
$.validator.unobtrusive.adapters.add(
    'filesize', ['maxsize'], function (options) {
        options.rules['filesize'] = options.params;

        if (options.message) {
            options.message['filesize'] = options.message;             

            $.each(options, function (key, val) {
                console.log("Key: " + key + " | Value: " + val);
                if (key === "message") {
                    errorMessage = val;
                }
            });

        }
    });

$.validator.addMethod('filesize', function (value, element, params) {
    if (element.files.length < 1) {
        // No files selected
        return true;
    }

    if (!element.files || !element.files[0].size) {
        // This browser doesn't support the HTML5 API
        return true;
    }

    return element.files[0].size < params.maxsize;
}, errorMessage); // This is where the variable errorMessage is used
}); 
```

此外，当我使用 options.messages（复数）的正确 JQuery 语法并省略整个 $.each 块时，我的 Firefox 在我打开 Firebug 时崩溃？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T17:20:32.920

您通常会在您在视图模型上编写的自定义验证属性中指定错误消息：

```
public class MyViewModel
{
    [Required]
    [MaxFileSize(8388608, ErrorMessage = "Maximum allowed file size is {0} bytes")]
    public HttpPostedFileBase File { get; set; }
} 
```

然后有一个自定义验证属性：

```
public class MaxFileSizeAttribute : ValidationAttribute, IClientValidatable
{
    private readonly int _maxFileSize;
    public MaxFileSizeAttribute(int maxFileSize)
    {
        _maxFileSize = maxFileSize;
    }

    public override bool IsValid(object value)
    {
        var file = value as HttpPostedFileBase;
        if (file == null)
        {
            return false;
        }
        return file.ContentLength <= _maxFileSize;
    }

    public override string FormatErrorMessage(string name)
    {
        return base.FormatErrorMessage(_maxFileSize.ToString());
    }

    public IEnumerable<ModelClientValidationRule> GetClientValidationRules(ModelMetadata metadata, ControllerContext context)
    {
        var rule = new ModelClientValidationRule
        {
            ErrorMessage = FormatErrorMessage(_maxFileSize.ToString()),
            ValidationType = "filesize"
        };
        rule.ValidationParameters["maxsize"] = _maxFileSize;
        yield return rule;
    }
} 
```

和不显眼的适配器：

```
jQuery.validator.unobtrusive.adapters.add(
    'filesize', [ 'maxsize' ], function (options) {
        options.rules['filesize'] = options.params;
        if (options.message) {
            options.messages['filesize'] = options.message;
        }
    }
);

jQuery.validator.addMethod('filesize', function (value, element, params) {
    if (element.files.length < 1) {
        // No files selected
        return true;
    }

    if (!element.files || !element.files[0].size) {
        // This browser doesn't support the HTML5 API
        return true;
    }

    return element.files[0].size < params.maxsize;
}, ''); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T17:26:08.297

要将键与字符串进行比较 $.each 你可以简单地做

```
var myObj = {'message1' : 1, 'message2' : 2};
$.each(​myObj, function(key){
     if(key == 'message1'){
         alert('they match!');                     
     }                                
});​ 
```

# django - Django：编辑相关模型 - 使用自定义表单的反向方式

> ID：11973905
> 
> 赞同：0
> 
> 时间：2012-08-15T17:15:20.967
> 
> 标签：django, forms

在完成教程和几个小示例之后，我刚刚开始了我的第一个 django 应用程序。我有以下模型（非常简化）：

```
class Candidate(models.Model):
    name = models.CharField(max_length=100)

class Vacancy(models.Model):
    title = models.CharField(max_length=100)
    description = models.CharField(max_length=200)
    candidates = models.ManyToManyField(Candidate, blank=True, null=True) 
```

我创建了一个表格，可以在其中添加新的空缺职位，候选人显示为多选框：

```
class CandidateForm(ModelForm):
    class Meta:
        model = Candidate

class VacancyForm(ModelForm):
    class Meta:
        model = Vacancy 
```

但是，我应该如何在候选人表格上添加一个选择框，以便我还可以查看候选人正在申请哪些职位空缺？

我找到了内联表单，但无法通过阅读文档来了解如何使用它们。

提前非常感谢。

BR，伊格纳西奥。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T17:49:47.790

手动添加一个[ModelChoiceField](https://docs.djangoproject.com/en/dev/ref/forms/fields/#modelchoicefield)应该会让你走到一半：

```
from django import forms

class CandidateForm(ModelForm):
    vacancies = forms.ModelChoiceField(queryset=Vacancy.objects.order_by("title"))
    class Meta:
        model = Candidate 
```

然后在您看来，您会执行以下操作：

```
if request.POST:
    form = CandidateForm(request.POST)
    if form.is_valid():
        candidate = form.save()
        for v in form.cleaned_data["vacancies"]:
            v.candidates.add(candidate) 
```

# vba - 在 MS Word 中更新特定类型的字段

> ID：11973909
> 
> 赞同：0
> 
> 时间：2012-08-15T17:15:39.643
> 
> 标签：vba, ms-word

我发现此参考将更新 Word 文档中的所有字段。[http://www.gmayor.com/installing_macro.htm](http://www.gmayor.com/installing_macro.htm)

```
Sub UpdateAll()
    Dim oStory As Range
    For Each oStory In ActiveDocument.StoryRanges
        oStory.Fields.Update
        If oStory.StoryType <> wdMainTextStory Then
            While Not (oStory.NextStoryRange Is Nothing)
                Set oStory = oStory.NextStoryRange
                oStory.Fields.Update
            Wend
        End If
    Next oStory
    Set oStory = Nothing
End Sub 
```

我想将其修改为仅`DocProperty`使用此宏更新类型的字段。

例如：我想更新所有`DocProperty`类型，同时跳过所有`Ref`类型或所有其他类型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T10:22:30.630

您可以`Type`在更新之前检查 fields 属性，但您必须遍历它们。

有很多方法可以做到这一点，但我把循环放在一个 sub 中，所以你可以改变你的两个*更新行*

```
oStory.Fields.Update 
```

到

```
Call UpdateRangeFieldsOfType(oStory, wdFieldDocProperty) 
```

这是子：

```
Sub UpdateRangeFieldsOfType(poRange As Range, peType As WdFieldType)
    Dim oField As Field

    For Each oField In poRange.Fields
        If oField.Type = peType Then
            oField.Update
        End If
    Next
    Set oField = Nothing
End Sub 
```

# javascript - 纯 Javascript 算法来调整文本大小

> ID：11973912
> 
> 赞同：1
> 
> 时间：2012-08-15T17:15:58.100
> 
> 标签：javascript, algorithm, typography

我有一个固定大小的 html div 和一个用于输入文本的附加 HTML 输入框。然后此文本将显示在 div 中。

我希望文本始终居中，并且始终是字符串中字符数可能的最大尺寸。

我想出了一个工作原型，但效果不太好。文本的大小并不总是正确的。

```
function bindText(readElement, writeElement, extra){   
    //the text from the input form triggered by onkeyup event
    var textStr = document.getElementById(readElement).value;

    //the div to write the text to 
    var element = document.getElementById(writeElement);

    //the major part of the function that I have just brute forced to try and work out
    if(textStr.length > 0){                        

        //check the length of the string
        if(textStr.length > 8 && textStr.length < 12){
             //set a the font size accordingly
             element.style.fontSize = 150;
        }

        //same again    
        if(textStr.length >= 12 && textStr.length < 16){
            element.style.fontSize = 120;
        }

        if(textStr.length >= 16 && textStr.length < 20){
            element.style.fontSize = 100;
        }

        if(textStr.length >= 20 && textStr.length < 25){
            element.style.fontSize = 80;
        }

        if(textStr.length >= 25 && textStr.length < 32){
            element.style.fontSize = 55;
        }

        if(textStr.length >= 32 && textStr.length < 40){
            element.style.fontSize = 50;
        }

        if(textStr.length >= 40 && textStr.length < 50){
            element.style.fontSize = 45;
        }

        if(textStr.length >= 76){
            element = textStr.splice(0, 75);
        }
       }
   } 
```

有没有更优雅的解决方案来获得更一致的结果。？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T19:52:13.120

正如我在您对字体大小和文本长度之间依赖关系的近似所看到的那样： ![在此处输入图像描述](../Images/f70096cd669508d4b62bc146cd5d2214.png)

我对此进行了插值： ![在此处输入图像描述](../Images/432ec703ab3daa673e6a3aeecd33d9bc.png)

您可以使用参数查看结果：

![在此处输入图像描述](../Images/6eae80facc319bffb638ec3fbb9002d8.png)

![在此处输入图像描述](../Images/7d3eba1decdad4f8e6bb351724ce1084.png)

`if`现在，您可以用`else if`一个公式替换所有的字体大小`h`计算公式，`min(h, max_font_size)`并`max(min_font_size, h)`设置字体最小和最大大小。

```
function bindText(readElement, writeElement, extra){   
    var textStr = document.getElementById(readElement).value;
    var element = document.getElementById(writeElement);
    var x, h;

    x = textStr.length;
    h = Math.exp(-0.1 * x + 6) + 38;
    h = Math.min(h, 120);
    h = Math.max(h, 45);

    element = textStr.splice(0, 75);// as you wish and it is not my business why %)
    element.style.fontSize = h;

    return (0);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T17:26:09.407

您实际上可以构建一个试错算法来修改`font-size`您的文本，直到它的大小合适。
我现在没有时间写它，所以这是我想到的类似伪代码的东西：

```
test_element = clone(element);
test_element.innerText = text;
test_element.style.left = '-9999px'; // so that it would be hidden from the user
for(var i = maxFontSize; i > minFontSize; i--)
    {
        test_element.style.fontSize = i + 'px';
        if(test_element.width <= element.width && test_element.height <= element.height)
            break;
    }
 // and the fontSize is stored in the `i` var 
```

**更新**
尚未对其进行测试，但这是我正在考虑的算法：

```
function getFontSize(text, width){
    var minFontSize = 1,
        maxFontSize = 200,
        testElement = document.createElement('span'),
        fontSize = null;

    testElement.style.position = 'absolute';
    testElement.style.left = '-999999px';
    testElement.style.top = '-999999px';
    document.body.appendChild(testElement);

    testElement.innerText = text;

    for(var i = minFontSize; i <= maxFontSize; i++)
        {
            testElement.style.fontSize = i + 'px';
            if(testElement.offsetWidth > width)
                {
                    fontSize = Math.max(minFontSize, i-1);
                    break;
                }
        }

    if(fontSize == null)
        fontSize = i;

    document.removeChild(testElement);

    return fontSize + 'px';
}

function bindText(readElement, writeElement){
    //the text from the input form triggered by onkeyup event
    var textStr = document.getElementById(readElement).value;

    //the div to write the text to 
    var element = document.getElementById(writeElement);

    //the major part of the function that I have just brute forced to try and work out
    if(textStr.length > 0){
        element.style.fontSize = getFontSize(textStr, element.outerOffset);
        // aditional, you can set the text-align property to center
        // element.style.textAlign = 'center';
    }
} 
```

# mysql - 如何对特定列上的两个选择的结果进行分组和相交，然后从两者返回所有匹配的行？

> ID：11973915
> 
> 赞同：0
> 
> 时间：2012-08-15T17:16:14.303
> 
> 标签：mysql, stored-procedures, intersection

我有一个 mysql 表，其中包含来自许多不同来源的结果，基本上是列：

```
id     (PRIMARY KEY)
source (INT)
value  (VARCHAR)
score  (FLOAT) 
```

例子

```
id source value score
-- ------ ----- -----
1    1     dog   0.2
2    1     cat   2.5
3    1     pig   4.0
4    2     dog   2.3
5    2     dog   1.5
6    2     cat   1.4
7    2     hen   0.7 
```

我需要对*sources*执行 set 操作，例如`1 ∩ 2 ∩ 3`or `(1 + 2 + 3) ∩ (4 + 5 + 6)`（其中 + 表示联合），但使用该*值*作为键，并返回完整的行。我正在将表达式转换为选择语句（每个嵌套的子表达式都成为一个选择）。这些是网络上的请求，因此性能是一个问题，但另一方面，我将在初始请求后缓存结果。

让我们看看如何根据值查询两个源的交集中的行，`1 ∩ 2`以示例为例。我可以*用*

```
SELECT value
FROM table
WHERE source=1 OR source=2
GROUP BY value HAVING COUNT (DISTINCT source) = 2 
```

而且，我什至可以用

```
SELECT table.id, table.value, table.source
FROM (
    SELECT value
    FROM table
    WHERE source=1 OR source=2
    GROUP BY value HAVING COUNT (DISTINCT source) = 2) AS intersection
JOIN table ON intersection.value = table.value
WHERE table.source=1 or table.source=2 
```

屈服

```
id source value score
-- ------ ----- -----
1    1     dog   0.2
2    1     cat   2.5
4    2     dog   2.3
5    2     dog   1.5
6    2     cat   1.4 
```

但是，对于我需要处理的嵌套表达式，它不是一个易于使用的解决方案，因为它会返回到原始表并再次基于源进行限制。考虑寻找两个选择结果的交集，其中每个选择语句生成数据表的一个子集。我不能再加入全桌了。我必须加入两个选择的联合的交集，但这似乎根本无法扩展。

我认为的另一种方法是在 id 上使用 GROUP_CONCAT，然后将 id 列表拆分回行（在[存储过程](http://www.marcogoncalves.com/2011/03/mysql-split-column-string-into-rows/)或 python 中）。该存储过程让我想到，也许我应该为整个查询编写自己的过程。

那么，是否有另一种方法可以使用 vanilla sql 进行这些查询？如果没有，我会尝试编写一个存储过程（以前从未做过，应该很有趣）。存储过程是最好的方法吗？关于使用第一个解决方案（临时表和连接）、第二个解决方案（group_concat 和 split）或完全使用第三个解决方案的任何建议？我对存储过程知之甚少，不知道我能得到多细的粒度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T17:48:24.140

基于此语句“具体来说，如何根据值查询两个源的交集中的行？”，您似乎想要指定一个或多个源并返回所有具有匹配值的行。

```
select *
from t
where t.source in (select 1 as source union all select 2 as source) and
      t.value in (select value
                  from (select 1 as source union all select 2 as source) sources join
                       t
                       on t.source = sources.source
                  group by value
                  having count(distinct t.source) = 2
                 ) 
```

在此版本中，您必须两次输入源列表（一次在子查询中，一次在外部查询中）并硬编码数字“2”。在其他数据库中，这很容易使用“with”子句将列表定义为可以在整个查询中重复使用的别名，但 mysql 不支持这一点。

如果将源列表放在名为 s 的表中，则可以使用：

```
select *
from t
where t.source in (select source from s) and
      t.value in (select value
                  from s join
                       t
                       on t.source = s.source cross join
                       (select count(*) as cnt from s) const
                  group by value
                  having count(distinct t.source) = max(const.cnt)
                 ) 
```

# visual-studio-2012 - VS2012 SQL CLR 和 LINQ 的问题

> ID：11973916
> 
> 赞同：0
> 
> 时间：2012-08-15T17:16:16.520
> 
> 标签：visual-studio-2012, sqlclr

我们开始使用 VS2012 作为我们的解决方案。其中一个项目是 SQL CLR。当我尝试编译它时，我收到以下错误：

> CS0234：命名空间“System”中不存在类型或命名空间名称“Linq”（您是否缺少程序集引用？）

但是，相同的代码在 VS2010 中编译得很好。该项目具有对 System.dll 的引用。会发生什么？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T16:28:02.530

请参阅：

*   [CLR 集成中的 LINQ](http://social.msdn.microsoft.com/Forums/en-US/linqtosql/thread/8fed8fc5-aee5-43a6-abb8-806382b34195)
*   [VS2012数据库项目中SQL CLR项的问题](http://social.msdn.microsoft.com/Forums/en/vstsdb/thread/e794e949-ed31-4c66-80b3-bd635f63675a)

您需要添加对**System.Core.dll**的引用（对 MS-SQL 2008 使用 .NET 3.5）：

```
// ...    
using System.Linq;

    public partial class StoredProcedures
    {
        [SqlProcedure]
        public static void MyProcedure()
        {
            // ...
            List<string> list = new List<string>();
            var result = list.Where(x => x == "string");
            // ...
        }
    } 
```

# android - 如果我有日期时间格式，是否可以只显示时间？

> ID：11973921
> 
> 赞同：0
> 
> 时间：2012-08-15T17:16:27.260
> 
> 标签：android, eclipse, date

我有一个应用程序可以从数据库中检索以日期时间格式格式化的字符串，并且我只想在某些情况下显示时间，我将如何做到这一点？

这是我迄今为止尝试过的，但我得到了一个不可解析的错误

```
public static final String DATE_TIME_FORMAT = "yyyy-MM-dd kk:mm:ss";
private static final String TIME_FORMAT = "kk:mm";

// ...

SimpleDateFormat TimeFormat = new SimpleDateFormat(TIME_FORMAT);
Date startTimer = null;
Date endTimer = null;

try
{
    String dateString = cursor.getString(6); 
    startTimer = TimeFormat.parse(dateString); 

    //Code for End Time
    String endDateString = cursor.getString(7); 
    endTimer = TimeFormat.parse(endDateString);

    totalBillable += endTimer.getTime() - startTimer.getTime();             
}
catch (ParseException e)
{
    Log.e("ReminderEditActivity", e.getMessage(), e);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T17:20:18.067

构造一个代表你想要的格式，并在你只需要时间时使用它：

```
DateFormat df = new SimpleDateFormat("HH:mm:ss");
String onlyTime = df.format(new Date()); 
```

演示：http: [//ideone.com/AziDU](http://ideone.com/AziDU)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T18:25:08.193

我猜你得到的`Unparsable error`是因为你正在解析一个具有不同格式的字符串日期。尝试这个：

```
String dateString = cursor.getString(6); 
startTimer = TimeFormat.parse(dateString.substring(11, 16)); 

String endDateString = cursor.getString(7); 
endTimer = TimeFormat.parse(endDateString.substring(11, 16)); 
```

希望通过这种`substring()`方法，您将获得`kk:mm`日期格式。

# ruby-on-rails - 在 Rspec 测试中努力伪造网络数据

> ID：11973922
> 
> 赞同：1
> 
> 时间：2012-08-15T17:16:36.770
> 
> 标签：ruby-on-rails, rspec

我正在测试一个进行网页抓取的模块。

我有这种方法可以获取页面的 robots.txt 文件。

```
def download_robots_file(page)
  Net::HTTP.get(URI("#{page}robots.txt"))
rescue StandardError => ex
  log_info('robot_file', ex)
end 
```

我有这个测试。第一个规范确保该方法可以安全地失败，第二个测试涵盖了当实际有一个页面要下载时会发生什么。我所做的是从 m cnn.com 下载 robots.txt 文件并将其存储在本地。我复制了文件并切掉了最后一位（“robots.txt”），以便我的方法正常工作。有点奇怪，我承认。我愿意以更好的方式做事。

```
describe '#download_robots_file(page)' do
  it "returns if there's no page" do
    @dummy.stub(:log_info).and_return("No Robots.txt file exists.")
    page = ''
    @dummy.download_robots_file(page).should == "No Robots.txt file exists." 
  end

  it "returns the robots file if it exists" do
    page = './spec/data/cnn_' #gotta be better way!
    robots_file = File.open('./spec/data/cnn_robots.txt', "r")
    expected_page = robots_file.read
    @dummy.stub(:log_info)
    @dummy.download_robots_file(page).should == expected_page
  end
end 
```

我的问题是：

1.  这是测试 download_robots_file 方法是否正常工作的好策略吗？
2.  如果没有，有什么更好的方法来做到这一点？
3.  有没有比在第一次测试中使用“.and_return”代码更好的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T21:19:14.790

我使用`FakeWeb`gem 来存根调用`Net::HTTP`- 也适用于模拟带有预期响应主体的 HTTP 请求。

[https://github.com/chrisk/fakeweb/](https://github.com/chrisk/fakeweb/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T02:57:17.343

另一种选择是使用 webmock。

[https://github.com/bblimke/webmock/](https://github.com/bblimke/webmock/)

一旦您查看 webmock 或 fakeweb，您的所有 3 个问题都会得到解答

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T20:56:01.413

在我看来，您不应该测试是否`Net::HTTP`正常工作，而应该只测试它是否使用正确的参数调用。

```
URI::HTTP.expects(:URI).with("page")
Net::HTTP.expects(:get)
@dummy.download_robots_file(page) 
```

# jquery - 延迟 + slideDown 在 IE 中不起作用

> ID：11973924
> 
> 赞同：0
> 
> 时间：2012-08-15T17:16:42.323
> 
> 标签：jquery, internet-explorer, delay

我有个问题。我正在使用延迟+向下滑动方法来显示一些文本。这是一个html代码：

```
<div class="delay">
    <p> sth here </p>
</div> 
```

和jQuery：

```
$(document).ready(function(){
    function delay() {
        $('.delay').slideDown(500);
    }
    setTimeout(delay, 1500);
}); 
```

它在 Chrome、Safari 和 Firefox 中运行良好。不幸的是，它不在 IE 中。你知道为什么它在 IE 中不起作用吗？我能做些什么吗？也许添加或替换一些东西？

先感谢您。

# php - 从数据库中检索数据的最有效算法

> ID：11973927
> 
> 赞同：4
> 
> 时间：2012-08-15T17:16:56.583
> 
> 标签：php, python, mysql, nosql, cassandra

因此，当我准备迁移到不支持此功能的 Cassandra，而是支持许多选择语句时，我正在从查询中删除联接。我对我的 mysql 表（我目前正在使用的）中的 50 行数据进行了基准测试，结果产生了 101 个查询（全部选择），完成所有这些查询大约需要 0.035 秒。然后我将其更改为一些数组操作（目前在 PHP 中），并将其减少到 3 个查询，其中包含一堆 O(n) for 循环。

我假设我的系统是在 PHP、Python、MySQL 还是 Cassandra (NoSQL) 上使用几个 O(n) for 循环而不是更多查询来处理数据要快得多，我已经减少了从0.035s 到 0.004s 使用这种新方法，如下所示。

有什么替代方法可以缩短这个时间吗？还是我走在正确的轨道上？在任何情况下运行所有​​查询都更快（除了当它变成 O(n^2) 时）？谢谢：

```
// Now go through and get all of the user information (This is slower in mysql, but maybe faster in cassandra)
        /*foreach ($results as $key => $row)
        {
            // Create query
            $query = DB::select('id', 'username', 'profile_picture')->from('users')->where('id', '=', $row['uid']);

            // Execute it
            $results2 = $query->execute(null, false);

            // Join it
            $data[$key] = array_merge($row, $results2[0]);
        }*/

        // Get all the user information (faster in mysql since less queries)
        $uids = array();
        $ids = array();
        foreach ($results as $key => $row)
        {
            if (!in_array($row['uid'], $uids))
                $uids[] = $row['uid'];
            if (!in_array($type, array('userProfile')))
                $ids[] = $row['comment_id'];
        }

        // Create query
        $query = DB::select('id', 'username', 'profile_picture')->from('users')->where('id', '=', $uids);

        // Execute it
        $results2 = $query->execute(null, false);

        $user_data = array();

        foreach ($results2 as $key => $row)
        {
            $user_data[$row['id']] = array('uid' => $row['id'], 'username' => $row['username'], 'profile_picture' => $row['profile_picture']);
        }

        foreach ($results as $key => $row)
        {
            $data[$key] = array_merge($row, $user_data[$row['uid']]);
        }
        // End faster user info section 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T13:16:08.873

使用 Cassandra，您可以使用 multi get 在一个查询中请求所有键，这比一堆单个查询要快得多。我有时会在查询中要求数千个键，而响应时间实际上是即时的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T14:38:37.847

有越来越多的工具，如 playOrm（也有一个原始的临时工具即将推出）支持连接，但仅支持表的分区（不是整个表），并在幕后使用 nosql 模式进行索引。查看宽行模式，看看它是否对您有用。IT 有时可以帮助加快速度。

# iphone - 将 NSOrderedSet 循环移动到另一个索引

> ID：11973934
> 
> 赞同：0
> 
> 时间：2012-08-15T17:17:21.110
> 
> 标签：iphone, objective-c, cocoa-touch, objective-c-category, circular-list

我正在开发一个应用程序，该应用程序适用于以循环路线分布的项目。入口点是随机的。

所以当整个事情开始时，我需要将所有位置的集合转移到一个随机索引。

**示例**（带有任意数据）：

```
0:Hungry -> 1:Eating -> 2:Full -> 3:Vomiting* 
```

如果我将它转移到索引`2`，我会得到以下新集合。

```
2:Full -> 3:Vomiting -> 0:Hungry -> 1:Eating 
```

那么如何在Objective C中实现这一点呢？

[`*`抱歉，但我需要另一个元素，因为三个元素似乎没有理解重点......]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T17:17:21.110

我设法通过以下类别解决了问题`NSOrderedSet`：

```
NSOrderedSet *newSet = [initialSet orderedSetByShiftingToIndex:2]; 
```

这是我的类别`NSOrderedSet`：

```
@implementation NSOrderedSet(Shifting)

-(NSOrderedSet *)orderedSetByShiftingToIndex:(int)newIndex{

    if(newIndex == 0 || newIndex > self.count -1){
        return self;
    }

    NSMutableOrderedSet *result = [self mutableCopy];
    NSIndexSet *moveToEnd = [NSIndexSet indexSetWithIndexesInRange:NSMakeRange(0, newIndex -1)];

    int endIndex = result.count-1;

    [result moveObjectsAtIndexes:moveToEnd toIndex:endIndex];

    return result;
}

@end 
```

# linux - linux bc 十六进制表示

> ID：11973937
> 
> 赞同：1
> 
> 时间：2012-08-15T17:17:24.167
> 
> 标签：linux, bc

我想以 6 十六进制值格式返回以下十六进制...

```
[admin@X~]$ echo "obase=16; 16777215" | bc
FFFFFF
[admin@X~]$ echo "obase=16; 0" | bc
0
[admin@X~]$ 
```

我希望 0 表示为 000000 ...

有什么帮助吗？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T21:51:46.677

那么官方回答...

`printf`很容易用前导零进行十六进制，你不需要任何花哨的多精度数学，`bc`所以为什么不呢

```
printf '%06X\n' 0
printf '%06X\n' 16777215 
```

# objective-c - @selector - 如何引用类方法？

> ID：11973938
> 
> 赞同：2
> 
> 时间：2012-08-15T17:17:23.653
> 
> 标签：objective-c, cocoa

我正在以编程方式添加一个菜单项：

`refreshItem = [[NSMenuItem alloc] initWithTitle:@"Refresh" action:@selector(refreshMenu) keyEquivalent:@""];`

如果 refreshMenu 方法是实例方法，则可以正常调用，但我想将其转换为类方法： `+(void)refreshMenu {}`

那我怎么参考呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T17:21:13.023

您仍然会使用`@selector(refreshMenu)`，但您会将 的 设置为`-target`（即）而不是实例（）。`NSMenuItem``Class``[self class]``self`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T17:21:56.050

请注意，类本身就是对象：它们是元类的实例。

```
[menuItem setTarget:[MyClass class]]; 
```

# ruby - 在 Ruby IO 中处理 SystemCallErrors 的正确方法是什么？

> ID：11973945
> 
> 赞同：1
> 
> 时间：2012-08-15T17:17:49.843
> 
> 标签：ruby, error-handling, io

在 Ruby 中，我可以简单地写入`contents`文件`path`：

```
IO.write path, contents, :mode => 'w+' 
```

但是，文档没有指定可能引发什么样的异常。在 C 中，如果程序遇到`EAGAIN`or `EINTR`，它通常会尝试再次写入文件。我们是否应该在 Ruby 中做同样的事情（通过捕获`Errno::EINTR`and `Errno::EAGAIN`）？我有点期待像 Ruby 这样的语言会有更高层次的抽象。在这里使用的正确模式是什么？

（同样，我们是否必须担心 Ruby 中的短计数？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T19:24:45.187

经过更多的挖掘，我发现（如预期的那样）Ruby`EAGAIN` 可以自动处理短计数。相应的代码[在 io.c 中](https://github.com/ruby/ruby/blob/trunk/io.c#L1156)。

# c# - 在 Designer 中加载非托管 DLL 以加载包装控件

> ID：11973947
> 
> 赞同：1
> 
> 时间：2012-08-15T17:18:01.730
> 
> 标签：c#, dll, unmanaged, windows-forms-designer

有没有办法在 Visual Studio 的设计时加载非托管 dll？

我知道我总是可以将 DLL 放在“System32”文件夹中或将 Dll 路径添加到“PATH”变量中以直接加载它。但我不想那样做。我想从应用程序的 ExecutablePath 加载它。DLL 实际上拥有一个控件。

任何人都可以帮我解决这种情况吗？

* * *

谢谢，WritZ

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T19:02:17.213

> 我想从应用程序的 ExecutablePath 加载它

那行不通，还没有。除了 Windows 从不看那里，当您从源代码管理签入或清理项目时，设计器肯定会失败。

此代码在 Visual Studio 的上下文中运行，因此 Windows DLL 搜索规则基于其安装位置。目前尚不清楚这是失败的 pinvoke 代码，还是您的程序集对 DLL 有隐式依赖。你可以做一些关于 pinvoke 的事情，你可以通过测试 DesignMode 属性来阻止代码运行。处理隐式依赖的唯一方法是帮助 Windows 找到 DLL。搜索路径上的目录。唯一的出路是将代码拆分为仅在设计模式下真正重要的部分，以便 DesignMode 再次变得有用。

# android - Android：文本视图在平板电脑上变椭圆，而在手机上是多行的

> ID：11973948
> 
> 赞同：0
> 
> 时间：2012-08-15T17:18:04.943
> 
> 标签：android, listview, textview, tablet, word-wrap

如果文本比 LinearLayout 允许的空间长，我希望文本多行，如下图的顶部所示。这就是我在手机 (HTC Desire HD) 上运行应用程序时发生的情况，但是当我在平板电脑 (Toshiba Thrive) 上运行它时，它会变成椭圆形，如图底部所示：

![我想要什么在上面，下面会发生什么](../Images/d51fb299ae65a28f7f2934d05880f718.png)

我有一个由行组成的 ListView。每行定义如下：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:weightSum="4"
    android:gravity="center_vertical"
    >

    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_weight="1"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:orientation="vertical">

        <TextView
            android:textStyle="bold"
            android:id="@+id/codeLabel"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content">
        </TextView>
        <TextView
            android:id="@+id/code"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content">
        </TextView>
    </LinearLayout>

    <TextView
        android:id="@+id/description"
        android:layout_weight="3"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        />   

 </LinearLayout> 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-20T20:57:35.323

我曾单独尝试过，但失败了，但在一起

```
android:scrollHorizontally="false"
android:inputType="textMultiLine" 
```

成功了......虽然我收到警告说“inputType”不应​​该与TextView一起使用。

# jquery - 为 Fancybox 添加缩放功能

> ID：11973950
> 
> 赞同：1
> 
> 时间：2012-08-15T17:18:15.820
> 
> 标签：jquery, fancybox

[我希望在这里http://www.dynamicdrive.com/dynamicindex4/powerzoomer.htm](http://www.dynamicdrive.com/dynamicindex4/powerzoomer.htm)将缩放功能添加到类似于演示 1 的 fancybox

fancybox 中可用的按钮助手是不够的，因为放大按钮只能达到图像的最大尺寸。

尽管我已经对其进行了硬编码，但`fancybox-manual-b`如果我让它工作，我将动态地这样做。

首先，我尝试为出现在 fancybox 中的每个图像添加一个 id 并将其添加到其中，`jQuery(‘#Pic_1, #Pic_2, #Pic_3, #Pic_4’).addpowerzoom`但我认为这不起作用，因为鼠标悬停动作已经被 fancybox 占据，因此发生冲突。

理想情况下，这就是我想要实现的方式，但还没有让它工作

所以现在我试图将图像参考传递到 iframe

单击“Zoom in Fancybox”时，会打开一个新的空白选项卡，并且在父级中打开了 fancybox，但没有图像，只有 Hello Holly。

只是为了使事情复杂化，我需要使用 jquery 1.4.4 版来完成这项工作，因为它在 WordPress 中使用。

请建议我做错了什么

父 html

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
    <title>fancyBox - Fancy jQuery Lightbox Alternative | Demonstration</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

   <!-- Add jQuery library -->

   <script type='text/javascript' src='../js/jquery/jquery.js'></script>
    <!-- Add mousewheel plugin (this is optional) -->
    <script type="text/javascript" src="../lib/jquery.mousewheel-3.0.6.pack.js"></script>

    <!-- Add fancyBox main JS and CSS files -->
    <script type="text/javascript" src="../source/jquery.fancybox.js?v=2.0.6"></script>
    <link rel="stylesheet" type="text/css" href="../source/jquery.fancybox.css?v=2.0.6" media="screen" />

    <!-- Add Button helper (this is optional) -->
    <link rel="stylesheet" type="text/css" href="../source/helpers/jquery.fancybox-buttons.css?v=1.0.2" />
    <script type="text/javascript" src="../source/helpers/jquery.fancybox-buttons.js?v=1.0.2"></script>

    <!-- Add Thumbnail helper (this is optional) -->
    <link rel="stylesheet" type="text/css" href="../source/helpers/jquery.fancybox-thumbs.css?v=1.0.2" />
    <script type="text/javascript" src="../source/helpers/jquery.fancybox-thumbs.js?v=1.0.2"></script>

    <!-- Add Media helper (this is optional) -->
    <script type="text/javascript" src="../source/helpers/jquery.fancybox-media.js?v=1.0.0"></script>

    <script type="text/javascript" src="../js/ddpowerzoomer.js"></script>
    <script type="text/javascript">

    jQuery(document).ready(function($) {
      $('a').each(function(){

         var Href = $(this).attr('href');
         if ((Href.match(/jpg/i)) || (Href.match(/jpeg/i)))
           {
           $(this).attr('class', "fancybox");

           }
          else
          {
          alert ("jessica");
            $(this).attr('target', 'blank');
          }

        });
      $('a > img').each(function(){

        if($(this).parent('td'))
          {

            if($(this).parents().attr('target') == 'blank')
              {
              alert("Hello Holly " + $(this).attr('target'));
              $(this).removeAttr('target');

              }
            $(this).parent().attr('class', "fancybox-buttons");
            $(this).parent().attr('data-fancybox-group', "gallery" );

          }

    });

        $('.fancybox').fancybox();

         /*
          *  Button helper. Disable animations, hide close button, change title type and content
          */

         $('.fancybox-buttons').fancybox({
            openEffect  : 'none',
            closeEffect : 'none',

            prevEffect : 'none',
            nextEffect : 'none',

            closeBtn  : false,

            helpers : {
               title : {
                  type : 'inside'
               },
               buttons  : {}
            },

            afterLoad : function() {
               this.title = 'Image ' + (this.index + 1) + ' of ' + this.group.length + (this.title ? ' - ' + this.title : '');
            }
         });
            $("#fancybox-manual-b").click(function() {
                $.fancybox.open({
                    href : 'hollyframe.html?1_b.jpg',
                    type : 'iframe',
                    padding : 5
                });
            });

});

  </script>
  </head>
  <body>
        <div>
          <table>
            <tr>
              <td><a id="pic_1" href="1_b.jpg" title="Lorem ipsum dolor sit amet"><img src="1_s.jpg" alt="" /></a>
              </td>
              <td><a id="pic_2" href="2_b.jpg" title="Etiam quis mi eu elit temp"><img src="2_s.jpg" alt="" /></a>
              </td>
            </tr>
            <tr>
              <td><a id="pic_3" href="3_b.jpg" title="Cras neque mi, semper leon"><img src="3_s.jpg" alt="" /></a></td>

              <td><a id="pic_4" href="4_b.jpg" title="Sed vel sapien vel sem uno"><img src="4_s.jpg" alt="" /></a></td>

            </tr>
          </table>
        </div>
        <div>
              <h3>Etiam quis mi eu elit</h3>
              <p>
                  Lorem ipsum dolor sit amet,  <a href="http://localhost/dweb/2692.htm">www.fancyapps.com/fancybox/</a> consectetur adipiscing elit. Etiam <a id="pic_5" href="5_b.jpg" title="Lorem ipsum dolor sit amet, consectetur adipiscing elit">Graphic A</a> quis mi eu elit tempor facilisis id et neque.
              </p>
              <p>
              <a href="jessica-alba-102.JPEG" title="Jessica Alba">Graphic A</a>
              </p>
              <p>
              <a id="fancybox-manual-b" href="javascript:;">Zoom in Fancybox</a>
              </p>
    </div>

  </body>
</html> 
```

hollyframe.html

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
  <meta http-equiv="content-type" content="text/html; charset=windows-1250">
  <meta name="generator" content="PSPad editor, www.pspad.com">
  <title></title>
    <script type="text/javascript">
    var myPic;
   function GetPic(){
     var url= window.location.href;
     var  bits =url.split("?");
     myPic = bits[1];

    }
   jQuery(document.createElement("img")).attr({src: myPic, id: 'Pic'});

    jQuery('#Pic').addpowerzoom({       defaultpower: 2,
        powerrange: [2,5],
        largeimage: null,
        magnifiersize: [100,100] //<--no comma following last option!
    });

    </script>
    </head>
  <body>
       <p>Hello Holly</p>
  </body>
</html> 
```

**在 JFK 建议之后更新代码**

我整天都在玩这个并且正在努力让它工作

```
<script type="text/javascript">

jQuery(document).ready(function($) {
  $('#Pzoom').fancybox(
          beforeShow: function(){
               $('#fancybox-img').wrap(
        $('<a />')
       .attr('href', this.href) // this.href gets the "href" of the current image
       .addClass('power-zoom')
       .attr('rel', "position: 'inside'")

     $(this.href).addpowerzoom({
        defaultpower: 2,
        powerrange: [2,5],
        largeimage: null,
        magnifiersize: [100,100] //<--no comma following last option!

            }); 
  ); // wrap
    };
  );          
});  // ready

  </script> 
```

# java - 在 Java 中使用 glDrawArrays 时出现致命错误

> ID：11973952
> 
> 赞同：0
> 
> 时间：2012-08-15T17:18:16.053
> 
> 标签：java, opengl, jogl

当我使用 glDrawArrays 时，我在显示一个盒子的顶点时遇到问题，一个一个渲染顶点可以正常工作，请帮忙。

```
public class Box {
public void draw (GL2 gl, float x, float y, float z, float side) 
{
    FloatBuffer points;
    float[] pointsData = { 
            -side, side, -side, //A0
            side, side, -side, //A1
            side, side, side, //A2
            -side, side, side, //A3
            -side, -side, -side, //B0
            side, -side, -side, //B1
            side, -side, side, //B2
            -side, -side, side, //B3
        };

    //FloatBuffer colors;
    //float[] colorsData;

    int pointsDataLength = pointsData.length;

    points = FloatBuffer.allocate(pointsDataLength);
    points.put( pointsData, 0, pointsDataLength );
    points.rewind();

    gl.glTranslatef(x, y, z);
    /*
    gl.glBegin( GL.GL_POINTS ); 
    for( int i=0; i < pointsDataLength/3; i++ ) 
    {
        gl.glVertex3fv( pointsData, i*3 );
    }      
    gl.glEnd();
    */
    gl.glVertexPointer( 3, GL.GL_FLOAT, 0, points );
    //gl.glColor3f( 1f, 0f, 0f ); 
    gl.glDrawArrays( GL.GL_POINTS, 0, pointsDataLength/3 );
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T17:20:21.700

必须在渲染之前添加它

```
gl.glEnableClientState( GL2.GL_VERTEX_ARRAY ); 
```

# php - 打印php中通过引用传递的数组的长度

> ID：11973954
> 
> 赞同：0
> 
> 时间：2012-08-15T17:18:31.247
> 
> 标签：php

如何打印在 php.ini 中通过引用传递的数组的长度。我将得到的变量是一个参考变量。那么我该如何实现呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T17:20:41.747

与打印按值传递的数组长度相同的方式：

```
function print_count(&$array){
    echo count($array);
} 
```

> PHP 中的引用是一种通过不同名称访问相同变量内容的方法。它们不像 C 指针；例如，您不能使用它们执行指针运算，它们不是实际的内存地址，等等。相反，它们是符号表别名。注意在PHP中，变量名和变量内容是不同的，所以同样的内容可以有不同的名字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T17:21:08.973

据我所知，它的工作原理是一样的：

```
$arr = array('hi');
$arr2 = &$arr;

var_dump(count($arr2)); 
```

# python - Networkx，未打印自循环中的边缘标签。

> ID：11973955
> 
> 赞同：2
> 
> 时间：2012-08-15T17:18:31.763
> 
> 标签：python, networkx

我正在创建一个多图来支持自循环。在标记边缘时，不知何故，自环标签没有打印。在下面的代码中，节点“aa”上缺少自循环标签

```
import networkx as nx
from networkx.utils import is_list_of_ints, flatten
import matplotlib.pyplot as plt

G=nx.MultiGraph()

G.add_edge('aa','bb',weight=0.6)
G.add_edge('aa','cc',weight=0.2)
G.add_edge('cc','dd',weight=0.1)
G.add_edge('aa','aa',weight=0.3)

plt.figure(figsize=(10,10), facecolor="w", frameon=False)
pos = nx.graphviz_layout(G, prog="fdp") #calculate position (x,y) coordinates

nx.draw_networkx_nodes(G,pos,node_size=1200,node_shape='o',node_color='0.75')
nx.draw_networkx_edges(G,pos, width=2,edge_color='b')

nx.draw_networkx_labels(G,pos,fontsize=2, labelloc='c')
nx.draw_networkx_edge_labels(G,pos, {('aa', 'aa'):'lllllabel', ('aa', 'bb'):'aaaaaabbbbbb'}, label_pos=0.3, ax=None, rotate=False)

plt.show() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T21:22:27.140

[Graphviz](http://www.graphviz.org/)可以绘制带有自环的图形。NetworkX[与 pygraphviz 集成](http://networkx.lanl.gov/reference/drawing.html#module-networkx.drawing.nx_agraph)，因此您可以使用它。

# c++ - 为什么子类在 C++ 中看不到父类的 typedef 结构？

> ID：11973956
> 
> 赞同：0
> 
> 时间：2012-08-15T17:18:44.087
> 
> 标签：c++, templates, inheritance, name-lookup

我最近在父类中遇到了一些 C++ 代码`typedef`。`struct`但是，它似乎在子类中不可用，即使它没有被标记`private`（它是`protected`）。我在下面创建了一个最小的工作示例（如下）来演示此失败。我已经公开了所有内容，但仍然失败。给出的错误是（使用`g++`）：

```
B.h:8: error: expected ',' or '...' before '&' token
B.h.8: error: ISO C++ forbids declartion of 'Datum' with no type 
```

### 啊（编译）

```
template<typename S, typename T> class A {
public:
    typedef struct {
        S x;
        T y;
    } Datum;
}; 
```

### Bh（不编译）

```
#include "A.h"
template<typename Q> class B : public A<Q, Q> {
public:
    void output(const Datum& dat);
}; 
```

### Bh（编译）

```
#include "A.h"
template<typename Q> class B : public A<Q, Q> {
public:
    typedef struct {
        Q x;
        Q y;
    } Datum;
    void output(const Datum& dat);
}; 
```

为什么第一个版本`B.h`无法编译？第二个是安全的选择吗？有没有更好（更简洁或惯用）的方法来处理这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T17:22:32.573

你需要说`typename A<Q,Q>::Datum`里面`B`。由于基础是一个模板，它的名称是依赖名称，在第一阶段不可见，您需要`typename`指定名称命名一个类型（而不是值或模板）。

你也应该失去`typedef`. C++ 与 C 的工作方式不同，你应该说：

```
struct Datum { S x; T y }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T17:22:48.877

这

```
typedef struct {
    S x;
    T y;
} 
```

格式不正确。`typedef`需要一个类型和一个“别名”来命名该类型。你可能需要的是

```
template<typename S, typename T> 
class A {
 public:
    struct Datum { S x; T y; };
}; 
```

没有 typedef，这里根本不需要。然后，您需要`Datum`正确限定名称，如`typename A<Q,Q>::Datum`：

```
#include "A.h"
template<typename Q> 
class B : public A<Q, Q> {
 public:
    void output(const typename A<Q,Q>::Datum& dat);
}; 
```

# ruby-on-rails - 在rails中创建一个可编辑的下拉列表

> ID：11973961
> 
> 赞同：0
> 
> 时间：2012-08-15T17:19:10.793
> 
> 标签：ruby-on-rails, ruby

目前我正在使用这个显示一个列表：

```
<p><%= f.select :depGroupname, options_for_select(@dep_group_name) %></p> 
```

我需要这样一种方式，即用户必须能够将一个项目添加到下拉列表中，例如 id drop 包含“1”、“2”和“3”，然后他可以在“4”中输入下拉或可以选择下拉菜单中的三个之一，然后单击提交。

目前我使用下拉列表中选择的值作为

`param[:form][:depGroupname]`在控制器中。如何实现此功能？，我是否需要更改访问控制器中添加的内容的方式？

我已经看过[这个](https://stackoverflow.com/questions/5122105/combo-box-in-rails-3)链接，但我无法从这些建议中找出解决方案。

请帮忙

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T17:53:49.720

检查这个答案，我会亲自把它带到 javascript 土地上，而不是玩 Rails 助手。

[下拉菜单可以编辑吗？](https://stackoverflow.com/questions/4831592/can-a-dropdown-menu-be-editable)

# jpa - 投票系统的 Jpa 数据库关系

> ID：11973962
> 
> 赞同：0
> 
> 时间：2012-08-15T17:19:21.917
> 
> 标签：jpa, playframework, relationship, voting-system

关于投票系统有很多问题，所以我会直奔主题。

我的问题是关于人际关系

```
import play.db.jpa.GenericModel;

public class VotesModel extends GenericModel {
    @ManyToOne
    public StatusModel status;
    @ManyToOne
    public UserModel user;
    public Date time;
} 
```

适用通常的投票规则，

1.  一个状态可以有很多票
2.  一个用户可以对许多状态进行投票。
3.  但是一个用户只能对一个状态投票一次。

我已经轻松地应用了前两条规则`@ManyToOne`，我如何应用第三条也是最重要的规则？

环境：

游戏`1.2.5`框架

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T17:27:57.483

`status`用和制作复合键`user`

# magento - getCollection() 在前端返回 1 个值，在后端返回倍数

> ID：11973965
> 
> 赞同：3
> 
> 时间：2012-08-15T17:19:35.320
> 
> 标签：magento

我的模型上有这个代码：

```
$categorias = Mage::getModel('catalog/product')->getCollection()
        ->addAttributeToSelect('*')
        ->addAttributeToFilter('status', 1)
        ->addAttributeToFilter('visibility', 4)
        ->groupByAttribute('name'); 
```

在我的后端页面上，这将返回按名称分组的所有产品值，但如果我在前端调用它，则只返回 1 个值。这是怎么回事？如果我删除 groupByAttribute 行工作很好，但不要分组。我需要组。Ty 求助各位

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T05:46:39.230

删除你的 groupByAttribute();

```
$categorias = Mage::getModel('catalog/product')->getCollection()
        ->addAttributeToSelect('*')
        ->addAttributeToFilter('status', 1)
        ->addAttributeToFilter('visibility', 4)
               //removed ->groupByAttribute('name')
        ;
$categorias->getSelect()->group('name');  //added 
```

尝试：

```
 $collection->getSelect()->group($fieldname); 
```

如果您想按多个字段进行分组，则：

```
 $categorias->getSelect()->group(array($fieldname1, $fieldname2,...)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T21:18:40.720

前端是否启用了所有类别？可能它们不是，因此只会出现在后端结果中。

逾越节

# redis - Rails 自定义环境 Resque.enqueue 不会创建作业

> ID：11973967
> 
> 赞同：0
> 
> 时间：2012-08-15T17:19:42.340
> 
> 标签：redis, resque

我正在使用`Resque`几个异步作业。我已经设置了一个自定义环境`integration`，它是我的`production`环境的克隆。但是，我的`Resque`工作不会添加到`Redis`我的`integration`环境中。

例如，如果我运行以下命令：

```
$ RAILS_ENV=production rails console
> Resque.enqueue(MyLovelyJob, 1) 
```

我会看到这个工作出现在 resque-web 中。

但是，如果我运行以下命令：

```
$ RAILS_ENV=integration rails console
> Resque.enqueue(MyLovelyJob, 1) 
```

该作业不会出现在 resque-web 中。

显然我错过了某种配置，我正在努力弄清楚它是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T17:42:38.240

这是我为解决问题所做的：

我创建`config/initializers/resque.rb`了以下内容：

```
rails_root = ENV['RAILS_ROOT'] || File.dirname(__FILE__) + '/../..'
rails_env = ENV['RAILS_ENV'] || 'development'

resque_config = YAML.load_file(rails_root + '/config/resque.yml')
Resque.redis = resque_config[rails_env] 
```

我还创建`config/resque.yml`了以下内容（显然这些内容应该设置为合适的）：

```
development: localhost:6379
test: localhost:6379
integration: localhost:6379
staging: localhost:6379
production: localhost:6379 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T17:28:49.523

首先是几个期望。

你有一个`config/resque_config.rb`或类似的：

```
require 'rubygems'

require 'resque' # include resque so we can configure it
require 'resque/server'
require 'resque_scheduler'
require 'resque_scheduler/server'
require 'yaml'

Resque.redis.namespace = "resque:api"

rails_root = ENV['APP_ROOT'] || (File.dirname(__FILE__) + '/..')
# require File.expand_path(File.join(rails_root,"lib","extensions","resque","worker.rb"))

rails_env = RAILS_ENV if defined? RAILS_ENV
rails_env ||= ( ENV['RAILS_ENV'] || 'development' )

resque_config = YAML.load_file(File.join(rails_root, 'config/resque.yml'))
Resque.redis = resque_config[rails_env]

# IN THIS ORDER
Resque::Scheduler.dynamic = true
Resque.schedule = YAML.load_file(File.join(rails_root, 'config/resque_schedule.yml')) # load the schedule 
```

和一个`config/resque.yml`或类似的：

```
development: localhost:6379
test: localhost:6379
integration: localhost:6379
staging: localhost:6379
production: localhost:6379 
```

`integration`要么打开/与不同的服务器通信，要么使用不同的端口。然后你让它运行它自己的 Redis 服务器，这样 2 就不会重叠。我想您不希望生产和集成将事物排队到同一个地方？

# autohotkey - 如何在 Autohotkey 中重新映射 CTRL-x CTRL-c？

> ID：11973968
> 
> 赞同：4
> 
> 时间：2012-08-15T17:19:46.740
> 
> 标签：autohotkey

最近搬到 Emacs（并成为一个狂热的粉丝）后，我想使用 Autohotkey 使`Ctrl`++成为一个通用的“关闭”命令。`X` `Ctrl``C`

这是我的`.ahk`文件中的内容：

```
; Universal Close
:*:^x^c::
    WinClose, A
    Return 
```

这似乎不起作用。我究竟做错了什么？

* * *

为了澄清我的击键，这里是顺序：

1.  按住`CTRL`键
2.  按下并释放`X`键
3.  按下并释放`C`键
4.  释放`Ctrl`钥匙

在按下或释放`C`键（我不介意哪个键）时，活动窗口将关闭。

* * *

成功案例：我已经实现了[Honest Abe](https://stackoverflow.com/users/1217270/honest-abe)的答案，添加了一个小调整以避免实际使用 Emacs 本身时的烦恼。这是最终结果（谢谢，哈！）：

```
; Universal Close
$^x::
    IfWinActive, ahk_class Emacs
        Sendinput, ^x
    Else {
        keywait, c, d, t0.6
        If ErrorLevel
            Sendinput, ^x
        Else 
            WinClose, A
        }
    Return 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T18:09:54.003

这是一个在+之后等待 0.6 秒`C`才能按下的示例：`Control``X`

```
$^x::
keywait, c, d, t0.6
If ErrorLevel
    Sendinput, ^x
Else 
    WinClose, A
Return 
```

如果`C`在 0.6 秒内未按下`Control`+ `X`，则发送。
`$`在热键发送自身时在最开始使用（以避免无限循环）。

手动参考：
[$](http://www.autohotkey.com/docs/Hotkeys.htm)
[keywait](http://l.autohotkey.net/docs/commands/KeyWait.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T13:42:10.463

虽然这不是您问题的直接答案，但如果您还没有的话，您可能想看看 XKeymacs，[http://www.cam.hi-ho.ne.jp/oishi/indexen.html](http://www.cam.hi-ho.ne.jp/oishi/indexen.html)

它在所有/大多数 Windows 应用程序中为您提供了很多 Emacs 功能。与 Emacs 一样，它是高度可配置的，因此您可以在全局或应用程序级别启用/禁用 Emacs 绑定。

它可能不是每个人的正确解决方案，但我不能没有它。

# asp.net - 如何将 ListView 与 ajax 工具包中的手风琴面板一起使用？

> ID：11973971
> 
> 赞同：0
> 
> 时间：2012-08-15T17:20:10.653
> 
> 标签：asp.net, ajaxcontroltoolkit

这个有点难解释。但基本上，我正在尝试使用带有数据源的 ListView 来嵌套手风琴。问题是，它不允许列表视图进入手风琴模板。这是布局：

```
>>Section (accordion pane)
   >>List of Documents to be reviewed
      >>List of Reviewing parties 
```

该部分是手风琴控件内的手风琴窗格。这里面是另一个手风琴控件，它是从当前正在审查的文档列表中构建的。换句话说，每个文档都是另一个窗格。每个文档窗格的内容只是审阅者（姓名）的无序列表。

所以我需要能够基本上基于对象内部的列表来构建布局。我以为我可以做这样的事情：

```
<ajaxToolkit:Accordion runat="server" ID="accordionMain" HeaderCssClass="panelHeader" ContentCssClass="panelContent" CssClass="accordionPanel" FadeTransitions="True">
        <Panes>
            <ajaxToolkit:AccordionPane runat="server" ID="pane3" HeaderCssClass="panelHeader">
                <Header>
                    <asp:Image ID="Image3" runat="server" ImageUrl="../icon_expand.gif"/>
                    Awaiting Reviewers 
                    <asp:Label runat="server" ID="lblAwaitingReviewers" Text="(4)"></asp:Label>
                </Header>
                <Content>
                    <ajaxToolkit:Accordion runat="server">
                        <Panes>
                            <asp:ListView runat="server">
                                <ItemTemplate>
                                    <ajaxToolkit:AccordionPane runat="server">
                                        <Header>
                                            <asp:Label runat="server" ID="lblReviewItem"/>
                                        </Header>
                                        <Content>
                                            <asp:ListView runat="server" ID="lvReviewers" ItemPlaceholderID="phReviewers">
                                                <LayoutTemplate>
                                                    <ul>
                                                        <asp:PlaceHolder runat="server" ID="phReviewers"/>
                                                    </ul>
                                                </LayoutTemplate>
                                                <ItemTemplate>
                                                    <li>
                                                        <asp:LinkButton runat="server" ID="lnkMocReviewItem">
                                                            <asp:HiddenField runat="server" ID="hfMocReviewItemId"/>
                                                            <asp:Label runat="server" ID="lblReviewItemAssignee"/>
                                                        </asp:LinkButton>
                                                    </li>
                                                </ItemTemplate>
                                            </asp:ListView>
                                        </Content>
                                    </ajaxToolkit:AccordionPane>
                                </ItemTemplate>
                            </asp:ListView>
                        </Panes>
                    </ajaxToolkit:Accordion>
                </Content>
            </ajaxToolkit:AccordionPane>
        </Panes>
    </ajaxToolkit:Accordion> 
```

但是手风琴在列表视图中表现不佳。我尝试使用列表视图作为模板来根据需要添加窗格，但是手风琴控件除了窗格部分内的窗格之外不允许任何内容。

有没有解决的办法？

这是我想要的效果的照片： ![在此处输入图像描述](../Images/5d26c8ca13c81890346a511ac1d7133c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T17:23:56.973

原来手风琴控件有一个完整的数据源和一个内容模板。如果你将它绑定到某个东西，那么它将为每个项目创建窗格。然后我在内容模板中放置了一个列表视图，一切都很好。

# c++ - Std::vector 和构造函数

> ID：11973977
> 
> 赞同：0
> 
> 时间：2012-08-15T17:20:31.573
> 
> 标签：c++, project

我有一些这样的代码：

```
class A{

public: 
A();

private:
vector<vector<int> > mat;
int a;

} 
```

默认构造函数应该是什么样子？像这样？

```
A::A(): mat(10(10)),a(0){}; 
```

但是对我来说还有一个问题..我不知道“行”的数量。（`vector<vector<int> >`应该有 n 个元素，`vector<int>`应该有 4 个元素）而且我在访问`vector<vector<int> >`. 那你能告诉我怎么做吗？谢谢。：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T17:22:47.750

使用[此参考页面上 (2) 下的构造函数：](http://en.cppreference.com/w/cpp/container/vector/vector)

```
A::A() : mat(10, std::vector<int>(10)), a(0) { } 
```

当然，您也可以传递变量。例如：

```
A::A(size_t n_rows, size_t n_cols) : mat(n_rows, std::vector<int>(n_cols)), a(0) {} 
```

要访问元素，请使用两个连续调用`operator[]`：

```
std::cout << mat[1][1];  // will print 0, as vector's elements are default initialized 
```

第一个调用返回对 的引用`vector<int>`，第二个调用返回对 的引用`int`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T17:27:21.277

您可以添加一个获取行数的构造函数：

```
A(unsigned int rows): mat(rows, std::vector<int>(4)), a(0) {}; 
```

为了访问元素，您可以添加一些访问运算符或方法。例如

```
class A{

public: 
 public:
 A(unsigned int rows): mat(rows, std::vector<int>(4)), a(0) {};
 const int& operator()(unsigned int row, unsigned int col) const {
   return mat[row][col];
 }
 private:
vector<vector<int> > mat;
int a;

}; 
```

然后

```
A a;
int i = a(3,4); 
```

您可能希望向访问运算符添加一些范围检查。

# jquery - WORDPRESS - 如何实现在单击选项卡时动态加载内容的 jquery 选项卡

> ID：11973984
> 
> 赞同：0
> 
> 时间：2012-08-15T17:20:43.820
> 
> 标签：jquery, tabs

我正在尝试在 wordpress 中创建一个选项卡，当单击选项卡时动态加载内容。但是，我无法调用我为列出特定类别的帖子而创建的 content.php 文件。

我知道我必须把它放在文件中才能加载所有的 wordpress 东西 `require('./wp-blog-header.php');`

这是标签块。加载“index.php”很好，因为它位于“home”目录下。加载“content.php”是位于“themes/default”目录下的问题。

感谢您的帮助。

```
<div id="tabs">
<ul>
        <li><a href="index.php">Preloaded</a></li>
        <li><a href="ajax/content1.html">Tab 1</a></li>
        <li><a href="ajax/content2.html">Tab 2</a></li>
        <li><a href="content.php">Tab 3 (slow)</a></li>
        <li><a href="ajax/content4-broken.php">Tab 4 (broken)</a></li>
    </ul>

</div>` 
```

# javascript - Windows 更新后 ActiveX ListControl 事件不再起作用

> ID：11973987
> 
> 赞同：1
> 
> 时间：2012-08-15T17:21:00.953
> 
> 标签：javascript, windows-7, internet-explorer-9, activex, windows-update

我的网页上有一个 ActiveX ListControl，其双击事件在最近的 Windows 更新后不再起作用。此更新仅影响 Windows 7 上的 Internet Explorer（其他使用 Vista 的用户很好，其他使用 7 的用户看到相同的行为）。我有一个双击事件连接到我的控件，如下所示：

```
<script for="ListControl" event="DblClick" language="JavaScript">
    // interpret double-clicks as an "edit" request:
    Edit();
</script> 
```

我也试过这个无济于事：

```
function ListControl::DblClick()
{
    Edit();
} 
```

该站点没有被弹出窗口阻止程序阻止，我已将其添加到我的受信任站点列表中。

我怀疑最近的安全更新之一是罪魁祸首。有没有其他人经历过这种情况或找到解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T18:42:42.317

当然这是 Microsoft 更新的问题（好像他们会承认一样！）我有一个公司范围的 VB 应用程序，我在其中遇到了同样的问题；ActiveX 控件中的双击不会触发引用的过程。这发生在今天早上所有设置为自动更新的机器上。在执行系统还原到更新之前的点后，双击按预期执行。

我将尝试[这里提供的一些解决方案](http://answers.microsoft.com/en-us/windows/forum/windows_7-windows_update/security-update-for-mscomctlocx-kb2597986-ms12-060/6dadedda-7bfa-4569-91d8-a31ebcf6a08a)

简单的解决方案是进行系统还原，但这会使您在没有更新的安全版本的情况下容易受到攻击。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T18:59:12.733

感谢 user1601402 提供的链接，我发现这个命令解决了这个问题：

```
regsvr32 c:\windows\syswow64\mscomctl.ocx 
```

在我看来，这是一个临时的解决方法。如果出现更好的解决方案，我会将其标记为已接受。

# java - Android：如何将 CMYK 颜色空间文件转换为 RGB？

> ID：11973991
> 
> 赞同：1
> 
> 时间：2012-08-15T17:21:19.577
> 
> 标签：java, android, rgb, cmyk

> **可能重复：**
> [RGB 到 CMYK 和反向算法](https://stackoverflow.com/questions/4858131/rgb-to-cmyk-and-back-algorithm)

据我所知，Android 不支持具有 CMYK 颜色空间的文件。但我的应用程序必须显示这些文件。那么，如何将 CMYK 颜色空间文件转换为 RGB？

# android - Android 发布模式下的 MvxException

> ID：11973993
> 
> 赞同：3
> 
> 时间：2012-08-15T17:21:26.877
> 
> 标签：android, xamarin.android, mvvmcross

我有我自己无法解决的问题。我无法在发布模式下运行我的 android api，它在加载 System.Web.Service.dll 库时停止，然后我得到了 MvxException，继续后我得到了第二个 MvxExcetpion（我从调试模式猜测它即将关闭应用程序）。

我正在使用 MvvmCross - 我在 WindowsPhone7 中的应用程序运行良好，但在 Mono for Android 中我遇到了问题。

这是我的输出日志：

```
- 08-15 17:06:13.242 I/monodroid-gc( 1873): environment supports jni NewWeakGlobalRef
- 08-15 17:06:13.292 W/monodroid-gc( 1873): GREF GC Threshold: 1800
- Loaded assembly: SmartWash.UI.dll
- Loaded assembly: SmartWash.Core.dll
- Loaded assembly: Cirrious.MvvmCross.Android.dll
- Loaded assembly: Newtonsoft.Json.MonoDroid.dll
- Loaded assembly: Cirrious.MvvmCross.Binding.Android.dll
- Loaded assembly: Mono.Android.dll [External]
- Loaded assembly: System.Core.dll [External]
- Loaded assembly: System.dll [External]
- Loaded assembly: MonoDroidConstructors [External]
- Loaded assembly: System.Xml.dll [External]
- Loaded assembly: System.Web.Services.dll [External]
- Unhandled Exception:

- Cirrious.MvvmCross.Exceptions.MvxException: 
- 08-15 17:06:31.972 I/MonoDroid( 1873): UNHANDLED EXCEPTION: Cirrious.MvvmCross.Exceptions.MvxException: No Service Factory Constructor included in Assembly!
- 08-15 17:06:31.972 I/MonoDroid( 1873): at Cirrious.MvvmCross.Platform.MvxServiceProviderSetup.Initialize (System.Type,Cirrious.MvvmCross.Interfaces.IoC.IMvxIoCProvider) <IL 0x0002b, 0x001a8>
- 08-15 17:06:31.972 I/MonoDroid( 1873): at Cirrious.MvvmCross.Platform.MvxServiceProviderSetup.Initialize (Cirrious.MvvmCross.Interfaces.IoC.IMvxIoCProvider) <IL 0x00008, 0x0007b>
- 08-15 17:06:31.972 I/MonoDroid( 1873): at Cirrious.MvvmCross.IoC.MvxOpenNetCfServiceProviderSetup.Initialize () <IL 0x00007, 0x0008b>
- 08-15 17:06:31.972 I/MonoDroid( 1873): at Cirrious.MvvmCross.Platform.MvxBaseSetup.InitializeIoC () <IL 0x00000, 0x00043>
- 08-15 17:06:31.972 I/MonoDroid( 1873): at Cirrious.MvvmCross.Platform.MvxBaseSetup.InitializePrimary () <IL 0x00041, 0x001d7>
- 08-15 17:06:31.972 I/MonoDroid( 1873): at Cirrious.MvvmCross.Android.Views.MvxBaseSplashScreenActivity.OnCreate (Android.OS.Bundle) <IL 0x00036, 0x0018b>
- 08-15 17:06:31.972 I/MonoDroid( 1873): at SmartWash.UI.SplashScreenActivity.OnCreate (Android.OS.Bundle) <IL 0x00002, 0x0004f>
- 08-15 17:06:31.972 I/MonoDroid( 1873): at Android.App.Activity.n_OnCreate_Landroid_os_Bundle_ (intptr,intptr,intptr) [0x00010] in /Users/builder/data/lanes/monodroid-mac-monodroid-4.2.3-branch/410a5aba/source/monodroid/src/Mono.Android/platforms/android-8/src/generated/Android.App.Activity.cs:1490
- 08-15 17:06:31.972 I/MonoDroid( 1873): at (wrapper dynamic-method) object.891313b6-5c12-4624-844c-14d43e535064 (intptr,intptr,intptr) <IL 0x00012, 0x00033>
- Unhandled Exception:

- Cirrious.MvvmCross.Exceptions.MvxException: 
```

几天来我一直在寻找解决方案，现在我太累了，无法自己解决。任何建议都非常受欢迎！

更新：在链接“仅 SDK”中添加 LinkerIncludePlease.cs 类后，我在找不到 NullReference 时遇到了另一个问题。

这是我的输出：

```
- 08-16 10:08:27.922 I/mono    ( 2334):   at Cirrious.MvvmCross.Android.ExtensionMethods.MvxAndroidActivityExtensionMethods.OnViewCreate<TViewModel> (Cirrious.MvvmCross.Android.Interfaces.IMvxAndroidView`1<TViewModel>) <IL 0x00043, 0x00243>
- 08-16 10:08:27.922 I/mono    ( 2334):   at Cirrious.MvvmCross.Android.Views.MvxTabActivityView`1.OnCreate (Android.OS.Bundle) <IL 0x00008, 0x00093>
- 08-16 10:08:27.922 I/mono    ( 2334):   at Cirrious.MvvmCross.Binding.Android.Views.MvxBindingTabActivityView`1.OnCreate (Android.OS.Bundle) <IL 0x00008, 0x00077>
In mgmain JNI_OnLoad
- 08-16 10:08:27.922 I/mono    ( 2334):   at Sm08-16 10:08:27.922 I/mono    ( 2334):   at SmartWash.UI.Views.BaseTabbedView`1.OnCreate (Android.OS.Bundle) <IL 0x0000a, 0x00083>
- 08-16 10:08:27.932 I/mono    ( 2334):   at Android.App.Activity.n_OnCreate_Landroid_os_Bundle_ (intptr,intptr,intptr) <IL 0x00012, 0x000ef>
- 08-16 10:08:27.942 I/mono    ( 2334):   at (wrapper dynamic-method) object.dc29b95c-fdca-49d9-bdbc-e51d024c54c9 (intptr,intptr,intptr) <IL 0x00012, 0x00033>
08-16 10:08:27.942 I/mono    ( 2334):   at (wrapper native-to-managed) object.dc29b95c-fdca-49d9-bdbc-e51d024c54c9 (intptr,intptr,intptr) <IL 0x0001f, 0xffffffff>
- Unhandled Exception:

- System.NullReferenceException: 

- 08-16 10:08:59.102 I/MonoDroid( 2334): UNHANDLED EXCEPTION: System.NullReferenceException: Object reference not set to an instance of an object
- 08-16 10:08:59.102 I/MonoDroid( 2334): at (wrapper delegate-invoke) <Module>.invoke_intptr__this___intptr_intptr_intptr_JValue[] (intptr,intptr,intptr,Android.Runtime.JValue[]) <IL 0x0005d, 0x0011f>
- 08-16 10:08:59.102 I/MonoDroid( 2334): at Android.Runtime.JNIEnv.CallObjectMethod (intptr,intptr,Android.Runtime.JValue[]) <IL 0x00012, 0x000a7> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T23:34:04.653

这只是发布模式的事实，加上这是一个缺失的类这一事实向我表明这可能是一个 monodroid 链接问题 - monodroid 链接器剥离了太多类。

解决此问题的最简单方法是将 monodroid 链接设置更改为“仅限 SDK”。

解决它的更高级方法是在主项目中包含对反射加载类的引用。一些 mvx 示例包括此机制的示例 - 查找名为 LinkerPleaseInclude.cs （或类似）的文件

# c - 使用 libcurl 在 C 中的 JSON 请求

> ID：11973994
> 
> 赞同：12
> 
> 时间：2012-08-15T17:21:26.737
> 
> 标签：c, json, libcurl

我正在使用 C 中的 libcurl 定义一个带有 JSON 请求正文的 PUT 请求。

这就是我的做法：

```
 sprintf(jsonObj, "\"name\" : \"%s\", \"age\" : \"%s\"", name, age);

    struct curl_slist *headers = NULL;
    curl_slist_append(headers, "Accept: application/json");
    curl_slist_append(headers, "Content-Type: application/json");
    curl_slist_append(headers, "charset: utf-8");

    curl_easy_setopt(curl, CURLOPT_URL, url);

    curl_easy_setopt(curl, CURLOPT_CUSTOMREQUEST, "PUT");
    curl_easy_setopt(curl, CURLOPT_HTTPHEADER, headers); 
    curl_easy_setopt(curl, CURLOPT_POSTFIELDS, jsonObj);
    curl_easy_setopt(curl, CURLOPT_WRITEFUNCTION, WriteMemoryCallback);
    curl_easy_setopt(curl, CURLOPT_WRITEDATA, (void *)&chunk);
    curl_easy_setopt(curl, CURLOPT_USERAGENT, "libcrp/0.1");

    res = curl_easy_perform(curl); 
```

请求正文是这样到达的：

```
 { '"name" : "Pedro", "age" : "22"' } 
```

在`{ '`开始和`' }`结束时。

- - 更多信息 - - -

如果我声明此代码

```
 char* jsonObj = "{ \"name\" : \"Pedro\" , \"age\" : \"22\" }"; 

    struct curl_slist *headers = NULL;
    curl_slist_append(headers, "Accept: application/json");
    curl_slist_append(headers, "Content-Type: application/json");
    curl_slist_append(headers, "charset: utf-8");

    curl_easy_setopt(curl, CURLOPT_URL, url);

    curl_easy_setopt(curl, CURLOPT_CUSTOMREQUEST, "PUT");
    curl_easy_setopt(curl, CURLOPT_HTTPHEADER, headers); 
    curl_easy_setopt(curl, CURLOPT_POSTFIELDS, jsonObj);
    curl_easy_setopt(curl, CURLOPT_WRITEFUNCTION, WriteMemoryCallback);
    curl_easy_setopt(curl, CURLOPT_WRITEDATA, (void *)&chunk);
    curl_easy_setopt(curl, CURLOPT_USERAGENT, "libcrp/0.1");

    res = curl_easy_perform(curl); 
```

服务器将其作为请求正文接收：

```
{ '{ "name" : "Pedro" , "age" : "22" }': '' } 
```

我的问题是：

libCurl 是否自动预格式化/编码 Json 请求？

顺便说一句，libCurl 是否有某种方式对 JSON 对象进行编码？

非常感谢！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-17T16:14:32.393

问题可能出在标题上。当您配置 curl_slist 标头时，我认为您应该将 curl_slist_append 的输出分配回标头：

```
struct curl_slist *headers = NULL;
headers = curl_slist_append(headers, "Accept: application/json");
headers = curl_slist_append(headers, "Content-Type: application/json");
headers = curl_slist_append(headers, "charset: utf-8"); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2017-01-18T08:24:16.170

首先，让我们注意几点。首先，Daniel Stenberg 是正确的（鉴于他编写了代码，我希望他是正确的）：libcurl 不会将任何数据附加到您的代码中。我可以使用这个示例程序来演示这一点，它与您的示例类似，但有一些额外的设置/拆卸代码。这是*所有*代码：这里没有其他内容：

```
#include <curl/curl.h>

int main (int argc, char *argv[]) {
    CURL *curl;
    CURLcode res;

    curl_global_init(CURL_GLOBAL_ALL);
    curl = curl_easy_init();
    if (curl == NULL) {
        return 128;
    }

    char* jsonObj = "{ \"name\" : \"Pedro\" , \"age\" : \"22\" }";

    struct curl_slist *headers = NULL;
    curl_slist_append(headers, "Accept: application/json");
    curl_slist_append(headers, "Content-Type: application/json");
    curl_slist_append(headers, "charset: utf-8");

    curl_easy_setopt(curl, CURLOPT_URL, "http://http2bin.org/put");

    curl_easy_setopt(curl, CURLOPT_CUSTOMREQUEST, "PUT");
    curl_easy_setopt(curl, CURLOPT_HTTPHEADER, headers);
    curl_easy_setopt(curl, CURLOPT_POSTFIELDS, jsonObj);
    curl_easy_setopt(curl, CURLOPT_USERAGENT, "libcrp/0.1");

    res = curl_easy_perform(curl);

    curl_easy_cleanup(curl);
    curl_global_cleanup();
    return res;
} 
```

使用 Wireshark 捕获请求的数据包表明这会发出以下 HTTP 请求：

```
PUT /put HTTP/1.1
Host: http2bin.org
User-Agent: libcrp/0.1
Accept: */*
Content-Length: 35
Content-Type: application/x-www-form-urlencoded

{ "name" : "Pedro" , "age" : "22" } 
```

如您所见，这正是您要求发送的 JSON 数据。这里没有额外的数据，没有括号。

这意味着额外的大括号是由您的服务器或一些中间中间件添加的。我的猜测是您的服务器正在添加它，因为它通过将整个主体视为字符串来强行尝试将任何不是主体的`application/json`主体*变成一个主体。*

您的服务器不认为这是 JSON 正文的原因被此处的另一个答案封装：您没有正确设置标头。`curl_slist_append` *返回*一个新`struct curl_slist *`的，您需要将其分配回您的`headers`变量。这意味着您需要更改以下四行：

```
struct curl_slist *headers = NULL;
curl_slist_append(headers, "Accept: application/json");
curl_slist_append(headers, "Content-Type: application/json");
curl_slist_append(headers, "charset: utf-8"); 
```

对这四个：

```
struct curl_slist *headers = NULL;
headers = curl_slist_append(headers, "Accept: application/json");
headers = curl_slist_append(headers, "Content-Type: application/json");
headers = curl_slist_append(headers, "charset: utf-8"); 
```

这应该让您的服务器相信您正在发送 JSON 数据。

将来，我建议您熟悉 Wireshark 来解决此类问题。查看您发送的实际请求非常有帮助。如果做不到这一点，如果您不想这样做，您可以使用`CURLOPT_DEBUGFUNCTION`获取 curl 发送的数据来验证它。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-05-02T08:28:24.417

我遇到了类似的问题。

我发现 curl 命令的 -libcurl 选项。它帮助很大！只需将其添加到工作 curl 命令的末尾即可。

最后它帮助我创建了这个代码：

```
 CURLcode ret;
  CURL *hnd;
  struct curl_slist *slist1;
  std::string jsonstr = "{\"username\":\"bob\",\"password\":\"12345\"}";

  slist1 = NULL;
  slist1 = curl_slist_append(slist1, "Content-Type: application/json");

  hnd = curl_easy_init();
  curl_easy_setopt(hnd, CURLOPT_URL, "http://u/r/l");
  curl_easy_setopt(hnd, CURLOPT_NOPROGRESS, 1L);
  curl_easy_setopt(hnd, CURLOPT_POSTFIELDS, jsonstr.c_str());
  curl_easy_setopt(hnd, CURLOPT_USERAGENT, "curl/7.38.0");
  curl_easy_setopt(hnd, CURLOPT_HTTPHEADER, slist1);
  curl_easy_setopt(hnd, CURLOPT_MAXREDIRS, 50L);
  curl_easy_setopt(hnd, CURLOPT_CUSTOMREQUEST, "POST");
  curl_easy_setopt(hnd, CURLOPT_TCP_KEEPALIVE, 1L);

  ret = curl_easy_perform(hnd);

  curl_easy_cleanup(hnd);
  hnd = NULL;
  curl_slist_free_all(slist1);
  slist1 = NULL; 
```

Express 将此 JSON 接收为：

```
{ username: 'bob', password: '12345' } 
```

我希望这有帮助！

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-15T17:40:48.133

libcurl 将*准确*发送您要求它发送的字节。它根本不了解 JSON。

有关更好和更多详细信息，请参阅@Lukasa 的出色且更详尽的答案。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-07-07T12:28:10.307

了解系统行为是否正确的一个关键部分是查看程序实际通过网络发送的内容。因此，另一种检查字节流的方法，而不是将其指向您的服务器（和/或运行 Wireshark），是在测试机器上的单独窗口中运行一个[netcat实例：](http://netcat.sourceforge.net/)

```
nc -l 8080 
```

并将代码（CURLOPT_URL）指向“ [http://localhost:8080](http://localhost:8080) ”。

您需要`Control-D`在`nc`窗口中点击以终止连接，以便 curl 完成，但您也可以预先键入测试返回文本，如果您期望某种回复来测试，这可能很有用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-09-11T10:40:40.840

使用 json 解析器将数据发布到 node-red 时遇到了同样的问题。
我的解决方案是将字符串视为 HTML

```
#include <curl/curl.h>

int main (int argc, char *argv[]) {
    CURL *curl;
    CURLcode res;

    curl_global_init(CURL_GLOBAL_ALL);
    curl = curl_easy_init();
    if (curl == NULL) {
        return 128;
    }
    struct curl_slist *headers = NULL;
    curl_slist_append(headers, "Content-Type: application/json");
    curl_easy_setopt(curl, CURLOPT_URL, #yourURL);
    curl_easy_setopt(curl, CURLOPT_CUSTOMREQUEST, "POST");
    curl_easy_setopt(curl, CURLOPT_HTTPHEADER, headers);
    curl_easy_setopt(curl, CURLOPT_POSTFIELDS, "age=42&sex=male");

    res = curl_easy_perform(curl);

    curl_easy_cleanup(curl);
    curl_global_cleanup();
    return res;
} 
```

希望有人会发现它有帮助。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2016-10-26T08:57:20.190

我使用 json-c 对 json 进行编码和解码，效果很好。文档也很容易理解。 [https://linuxprograms.wordpress.com/2010/05/20/json-c-libjson-tutorial/](https://linuxprograms.wordpress.com/2010/05/20/json-c-libjson-tutorial/)

# android - 圆形进度条

> ID：11973997
> 
> 赞同：5
> 
> 时间：2012-08-15T17:21:37.093
> 
> 标签：android

我正在开发一个需要像这样的“圆形进度条”的应用程序（它不需要改变颜色或中间为空，对我来说一个简单的事情就足够了，但如果你想告诉我如何改变颜色，我很乐意学习 :) )

![在此处输入图像描述](../Images/c60e93faa7581e229a9709f067d2ab93.png)

我想用它来显示我的应用程序中的电池百分比

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-07T13:32:44.973

我希望像[这个库](https://github.com/ylyc/circular_progress_bar/blob/master/README.md)这样的东西会有所帮助

布局中的定义很简单：

```
<com.lylc.widget.circularprogressbar.example.CircularProgressBar
    android:id="@+id/circularprogressbar1"
    style="@style/Widget.ProgressBar.Holo.CircularProgressBar"
    android:layout_width="120dip"
    android:layout_height="120dip"
    android:layout_marginTop="10dip"
    circular:subtitle="subtitle"
    circular:title="Title" /> 
```

并且用法也不复杂：

```
CircularProgressBar c3 = (CircularProgressBar) findViewById(R.id.circularprogressbar3);
c3.setTitle("June");
c3.setSubTitle("2013");
c3.setProgress(42); 
```

它还支持动画进度，以防您需要它。所有学分归原作者所有。我刚找到它。希望它有所帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T17:29:00.017

我不知道我是否理解你，但我认为它可以帮助你： [如何改变圆形进度条的颜色？](https://stackoverflow.com/questions/5337613/how-to-custom-circular-progress-bar-color)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-04T05:45:57.430

您可以使用以下库

[https://github.com/chillerlabs/android-circular-progress-bar](https://github.com/chillerlabs/android-circular-progress-bar)

这正是支持带有圆形进度条的复杂渐变

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-30T12:42:08.843

使用此方法并将其设置为图像视图，它会在图像视图上绘制位图。你可以使用这段代码来显示一个进度对话框。

```
private void circularImageBar(ImageView iv2, int i) {

    Bitmap b = Bitmap.createBitmap(300, 300,Bitmap.Config.ARGB_8888);
    Canvas canvas = new Canvas(b); 
    Paint paint = new Paint();

        paint.setColor(Color.parseColor("#c4c4c4"));
        paint.setStrokeWidth(10);
        paint.setStyle(Paint.Style.STROKE);
        canvas.drawCircle(150, 150, 140, paint);

        paint.setColor(Color.parseColor("#FFDB4C"));
        paint.setStrokeWidth(10);   
        paint.setStyle(Paint.Style.FILL);
        final RectF oval = new RectF();
        paint.setStyle(Paint.Style.STROKE);
        oval.set(10,10,290,290);

        canvas.drawArc(oval, 270, ((i*360)/100), false, paint);
        paint.setStrokeWidth(0);    
        paint.setTextAlign(Align.CENTER);
        paint.setColor(Color.parseColor("#8E8E93")); 
        paint.setTextSize(140);

        canvas.drawText(""+i, 150, 150+(paint.getTextSize()/3), paint); 

        iv2.setImageBitmap(b);
} 
```

# websocket - 可以使用 websockets 制作 mmo 吗？

> ID：11973998
> 
> 赞同：0
> 
> 时间：2012-08-15T17:21:36.813
> 
> 标签：websocket, webgl

正如标题所暗示的，

是否有可能使用 websockets 进行连接和 webgl 进行图形制作像 runescape 这样的 3D MMORPG？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T17:24:25.613

来自[Quake II GWT Port](http://code.google.com/p/quake2-gwt-port/)网页（粗体字）：

> Quake II GWT 端口将 Quake II 的**3d**游戏体验带到浏览器中。
> 
> 在端口中，我们使用**WebGL**、Canvas API、HTML 5 元素、本地存储 API 和**WebSockets**来展示纯 Web 应用程序在 Safari 和 Chrome 等现代浏览器中的可能性。
> 
> [...]
> 
> 为了使 Jake 2 代码与 GWT 一起工作，我们有
> 
> *   创建了一个新**的基于 WebGL 的渲染器**
> *   将多人游戏的网络层**从 UDP 移植到 WebSocket API**

我对 MMO 了解不多，但显然有人已经用 HTML5 实现了令人印象深刻的游戏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T18:41:21.630

当涉及到来自浏览器的通信时，WebSockets 无疑是最佳选择。

我自己在 WebSockets 方面做了很多工作，并开发了几种不同类型的通信密集型应用程序，以及我开发了一个实时通信框架 - 你是否应该为 Web 和 HTML5 构建所以 WebSockets 选项。

一个好的开始，或者快速尝试 WebSockets 的方法是通过[http://live.xsockets.net](http://live.xsockets.net)，这是一个提供 JavaScript API 和托管 WeSocket 服务器的服务。

亲切的问候

马格努斯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-20T10:55:18.130

您是否考虑过 Lightstreamer？它利用 HTTP 和 WebSockets，使用 TCP，但试图通过一些智能算法来克服它的一些限制，以保持低延迟并优化带宽。它可以为每个客户端自动选择最佳的可用数据传输方式——默认情况下，它会使用 WebSocket，但如果需要，它可以使用 HTTP 流式传输，甚至可以使用长轮询。这使得一个非常健壮的通信协议可以交付给任何已知的客户端。此外，它具有高度可扩展性，因此它可以用于任何复杂的多人游戏（例如，包括 MMORPG）。

查看最近的这篇文章（[通过 Web 优化多人 3D 游戏同步](http://blog.lightstreamer.com/2013/10/optimizing-multiplayer-3d-game.html)）。您可以浏览一个非常简单的多人 3D 世界的在线演示，其中集成了 Lightstreamer 以实现实时同步。该演示允许您调整场景的每个参数并模拟任何类型的数据传输，同时检查实际带宽消耗。如果您愿意，您可以亲自动手，因为完整的源代码可在 GitHub 上免费获得。

希望有帮助。如果您需要帮助，请告诉我！

[全面披露：我为 Lightstreamer 工作]

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-04T20:28:18.547

我知道这是 6 岁，但有人必须提到[BrowserQuest](http://browserquest.mozilla.org/)

我有一些 HTML5 游戏开发 (Phaser) 的经验，但我完全没有 MMO 的经验，虽然我也对有一天开始开发类似于 BQ 的东西非常感兴趣。

**更新：我做了一个** 我制作了第一个基于 Deno 的 websocket*微型*在线 RPG：[小土地](https://github.com/tiny-devs/tiny-dungeon-online/)