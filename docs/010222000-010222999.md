# StackOverflow 问答 10222000-10222999

# mysql - MySQL 字符编码

> ID：10222000
> 
> 赞同：2
> 
> 时间：2012-04-19T05:11:16.830
> 
> 标签：mysql, utf-8, character-encoding

我有一个最初使用 latin1 编码和 latin1_swedish_ci 排序规则创建的大型数据库。

我做了很多更改，现在我使用的是 Doctrine2，它使用`SET NAMES UTF8`之前的查询。我之前使用的是 Yii 框架，它也设置为使用 UTF-8。基本上我一开始就忽略了所有这些，但据我了解，我一直在将 UTF-8 数据写入数据库，尽管它应该都是 latin1。

我想将我的数据库转换为 utf-8，但不知道如何安全地做到这一点并确保我不会丢失数据。

**两个问题：**

1.  有没有办法确保我正确地做到了这一点？我有 2 GB 的数据，所以我不能只扫描它来测试，但是我可以寻找某些字符来确定数据库是否已经使用 UTF-8？

2.  转换一切的正确方法是什么？我见过有人说我必须 mysqldump 并重新导入（带有某些标志， http: [//blog.makezine.com/2007/05/08/mysql-database-migration-latin/](http://blog.makezine.com/2007/05/08/mysql-database-migration-latin/)和[http://docs .moodle.org/22/en/Converting_your_MySQL_database_to_UTF8](http://docs.moodle.org/22/en/Converting_your_MySQL_database_to_UTF8)）。其他人说你可以`ALTER TABLE...`按专栏（http://www.bothernomore.com/2008/12/16/character-encoding-hell/）。而且我已经看到了一些命令，例如我认为`SET utf8`的一部分`ALTER TABLE`，但我不知道这是否有效。

**编辑：**

我已经转储了数据并发现了几个重音字符。这是否表明数据本身是 UTF-8？如果是这样，我认为此处的说明适用，因为我可以“转换”为 blob 并安全返回[http://codex.wordpress.org/Converting_Database_Character_Sets](http://codex.wordpress.org/Converting_Database_Character_Sets)

**再次编辑：**

在完成我在上一个链接中阅读的内容之后，我发现比较数据后，我丢失了第一个非 ascii(?) 之后的所有字符。所以我用单引号设置了标题，新的数据库有那个字符和它后面的所有字符。例如，这是我正在运行的代码：

```
ALTER TABLE articles CHANGE title title VARBINARY(255) NOT NULL;
ALTER TABLE articles CHANGE title title VARCHAR(255) CHARACTER SET utf8 NOT NULL; 
```

不知何故，这导致我丢失了数据。

但是如果我转储，将每个表的字符集从 latin1 更改为 utf8，它就可以工作。我宁愿只修改东西而不是转储和重新创建，但如果没有人基于此提出任何其他建议或想法，我会求助于它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T05:16:34.997

要检查事情，您可以执行以下操作：

```
SELECT t1.*
FROM table_1 t1 
JOIN table_1 t2 on t1.guid = t2.guid AND
t1.field_1 <> t2.field_1 COLLATE UTF-8 
```

基本上，在运行中，更改列的排序规则，看看是否会出现任何问题。

您绝对不需要重新导入所有内容`ALTER TABLE`，假设一切都可以转换为新的编码应该没问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T03:45:12.587

我让它与转储一起工作并重新导入。我主要遵循本指南：http: [//en.gentoo-wiki.com/wiki/Convert_latin1_to_UTF-8_in_MySQL](http://en.gentoo-wiki.com/wiki/Convert_latin1_to_UTF-8_in_MySQL)

如果其他人处于我的情况（您将 UTF-8 数据存储在您总是通过调用访问的 latin1 数据库中`SET NAMES utf8`，那么您可以尝试以下方法（我对上述来源的修改）。

```
mysqldump -h example.org --user=foo -p -c --insert-ignore --skip-set-charset -r dump.sql dbname 
```

仔细检查它是否是 UTF-8（我的是）

```
file dump.sql 
```

在转储上进行转换

```
perl -pi -w -e 's/CHARSET=latin1/CHARSET=utf8/g;' dump.sql 
```

创建一个新数据库（我没有删除旧的以防万一）

```
mysql --user=foo -p --execute="CREATE DATABASE dbnameutf8 CHARACTER SET utf8 COLLATE utf8_general_ci;" 
```

进口

```
mysql --user=foo -p --default-character-set=utf8 dbnameutf8 < dump.sql 
```

希望可以帮助别人。请记住，这些`ALTER TABLE...`东西可能不起作用（在我的情况下它没有）。

# android - 如何使用相同的画廊将不同大小的数组添加到android中的一个活动中

> ID：10222001
> 
> 赞同：0
> 
> 时间：2012-04-19T05:11:16.613
> 
> 标签：android, android-emulator

嗨，我需要将两个不同的图像数组传递到图库中。1 个数组包含 13 个图像，2 个数组包含 16 个图像。当单击 1 个按钮时，我需要将 1 个数组相关图像传递到画廊中的一个活动中，当单击 2 个按钮时，我需要将 2 个数组相关图像传递到画廊中的一个活动中。当我单击 1 个按钮时，我尝试了某种方式，我显示了 1 个与数组相关的图像，并且所有 13 个图像都被滚动，但我的问题是当我单击 2 个按钮时，我显示了 2 个与数组相关的图像，如果我当时只滚动了 13 个图像滚动，14 图像向前不滚动，仅显示 13 图像。我在此代码中做错了请任何建议我....

GalleryActivity .class:

```
public class GalleryActivity extends Activity implements
        AdapterView.OnItemSelectedListener, ViewSwitcher.ViewFactory{
    private TextSwitcher mSwitcher;
    Gallery g;
    static int nextbtn = 0;
    static int prebtn = 0;
    ImageAdapter iadapter;
    int galpos;
    int countk1=0;
    public int ht;
    public int wt;

    public static int motiongal = 3000;
    LinearLayout l1;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.main);

        DisplayMetrics displaymetrics = new DisplayMetrics();
        getWindowManager().getDefaultDisplay().getMetrics(displaymetrics);
        ht = displaymetrics.heightPixels;
        wt = displaymetrics.widthPixels;
        l1=(LinearLayout)findViewById(R.id.linear);
        mSwitcher = (TextSwitcher) findViewById(R.id.switcher);
        mSwitcher.setFactory(this);
        mSwitcher.setInAnimation(AnimationUtils.loadAnimation(this,
            android.R.anim.fade_in));
        mSwitcher.setOutAnimation(AnimationUtils.loadAnimation(this,
            android.R.anim.fade_out));
        mSwitcher.startLayoutAnimation();
        try
        {
            g = (Gallery) findViewById(R.id.gallery);
            g.setAdapter(new ImageAdapter(this));
            g.setHorizontalScrollBarEnabled(false);
            Bundle bundle = getIntent().getExtras();
            galpos = bundle.getInt("GALPOS");

            g.setSelection(galpos);
            g.setAnimationDuration(motiongal);

            countk1 = getIntent().getIntExtra("k", 0); 
        } catch(Exception e){
        }
        g.setOnItemSelectedListener(this);
        ImageButton nextButton = (ImageButton) findViewById(R.id.nextimage);
        nextButton.setOnClickListener(nextButtonOnClick);

        ImageButton preButton = (ImageButton) findViewById(R.id.preimage);
        preButton.setOnClickListener(preButtonOnClick);
    }

    public void onItemSelected(AdapterView<?> parent, View v, int position, long id) {
        mSwitcher.setText(mTextNames[position]);
        nextbtn = position;
    }

    public OnClickListener nextButtonOnClick = new OnClickListener(){
        public void onClick(View v) {
            if(nextbtn < (mTextNames.length-1))
            {
                try
                {
                    mSwitcher.setText(mTextNames[nextbtn+1]);
                    mSwitcher.startLayoutAnimation();
                    mSwitcher.getDrawingTime();
                    g.setSelection(nextbtn+1);
                    Thread.sleep(300);
                    g.scheduleLayoutAnimation();
                    g.startLayoutAnimation();
                    Thread.sleep(300);
                    g.setAnimationDuration(motiongal);
                }
                catch(Exception e)
                {}
            }else
            {
                try
                {
                    mSwitcher.setText(mTextNames[0]);
                    mSwitcher.startLayoutAnimation();
                    mSwitcher.getDrawingTime();
                    g.setSelection(0);
                    Thread.sleep(300);
                    g.scheduleLayoutAnimation();
                    g.startLayoutAnimation();
                    Thread.sleep(300);
                    g.setAnimationDuration(motiongal);
                }
                catch(Exception e)
                {}
            }
        }
    };

    public OnClickListener preButtonOnClick = new OnClickListener(){
        public void onClick(View v) {
            if(nextbtn > 0)
            {
                try
                {
                    mSwitcher.startLayoutAnimation();
                    mSwitcher.getDrawingTime();
                    g.setSelection(nextbtn-1);
                    Thread.sleep(300);
                    g.scheduleLayoutAnimation();
                    g.startLayoutAnimation();
                    Thread.sleep(300);
                    g.setAnimationDuration(motiongal);
                }
                catch(Exception e)
                {}
            }else
            {
                try
                {
                    mSwitcher.setText(mTextNames[mTextNames.length-1]);
                    mSwitcher.startLayoutAnimation();
                    mSwitcher.getDrawingTime();
                    g.setSelection(mTextNames.length-1);
                    Thread.sleep(300);
                    g.scheduleLayoutAnimation();
                    g.startLayoutAnimation();
                    Thread.sleep(300);
                    g.setAnimationDuration(motiongal);
                }
                catch(Exception e)
                {}
            }
        }
    };

    public void onNothingSelected(AdapterView<?> parent) {
    }

    public View makeView() {
        TextView i = new TextView(this);
        i.setTextSize(18);
        i.setGravity(1);
        return i;
    }

    public class ImageAdapter extends BaseAdapter {
        public ImageAdapter(Context c) {
            mContext = c;
        }

        public int getView() {
            // TODO Auto-generated method stub
            return 0;
        }

        public int getCount() {
            return mPhotos1.size();
        }

        public Object getItem(int position) {
            return position;
        }

        public long getItemId(int position) {
            return position;
        }

        public View getView(int position, View convertView, ViewGroup parent) {
            ImageView i = new ImageView(mContext);
            if(countk1==1)
            {
                i.setImageResource(mPhotos.get(position));
            }
            if(countk1==2)
            {
                i.setImageResource(mPhotos1.get(position));
            }

            i.setScaleType(ImageView.ScaleType.FIT_XY);
            if(wt >= 480){
                if(wt == 480 && ht > 320) {
                    i.setLayoutParams(new Gallery.LayoutParams(
                    LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));
                } else {
                    i.setLayoutParams(new Gallery.LayoutParams(
                    LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
                }
            }else{
                i.setLayoutParams(new Gallery.LayoutParams(
                LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
            }
            return i;
        }

        private Context mContext;
    }

    private boolean isScrollingLeft(MotionEvent e1, MotionEvent e2){
          return e2.getX() > e1.getX();
        }

    public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY){
        int kEvent;
        if(isScrollingLeft(e1, e2)){ //Check if scrolling left
            kEvent = KeyEvent.KEYCODE_DPAD_LEFT;
        }
        else{ //Otherwise scrolling right
            kEvent = KeyEvent.KEYCODE_DPAD_RIGHT;
        }
        onKeyDown(kEvent, null);
        return true;
    }

    private Integer[] mImageIds = {
        R.drawable.bokstavslottet01,
        R.drawable.bokstavslottet02,
        R.drawable.bokstavslottet03,
        R.drawable.bokstavslottet04,
        R.drawable.bokstavslottet05,
        R.drawable.bokstavslottet06,
        R.drawable.bokstavslottet07,
        R.drawable.bokstavslottet08,
        R.drawable.bokstavslottet09,
        R.drawable.bokstavslottet10,
        R.drawable.bokstavslottet11,
        R.drawable.bokstavslottet12,
        R.drawable.bokstavslottet13
    };
    private Integer[] mImageIdsf = {
        R.drawable.f1,
        R.drawable.f2,
        R.drawable.f3,
        R.drawable.f4,
        R.drawable.f5,
        R.drawable.f6,
        R.drawable.f7,
        R.drawable.f8,
        R.drawable.f9,
        R.drawable.f10,
        R.drawable.f11,
        R.drawable.f12,
        R.drawable.f13,
        R.drawable.f14,
        R.drawable.f15,
        R.drawable.f16,
    };
    private static String[] mTextNames = {
        "BOOKSTOVEN1", "BOOKSTOVEN2", "BOOKSTOVEN3", "BOOKSTOVEN4", "BOOKSTOVEN5", "BOOKSTOVEN6", "BOOKSTOVEN7", "BOOKSTOVEN8", "BOOKSTOVEN9", "BOOKSTOVEN10", "BOOKSTOVEN11", "BOOKSTOVEN12", "BOOKSTOVEN13"};

    private ArrayList<Integer> mPhotos = new ArrayList<Integer>(Arrays.asList(mImageIds));
    private ArrayList<Integer> mPhotos1 = new ArrayList<Integer>(Arrays.asList(mImageIdsf));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T09:06:44.477

```
 public int getCount() {
    return mPhotos1.size();
} 
```

在此函数中，如果显示第二个，则必须计算第二个列表的计数；如果显示第一个，则必须计算第一个列表

# c++ - 错误：“列表”不是模板类型

> ID：10222002
> 
> 赞同：1
> 
> 时间：2012-04-19T05:11:22.703
> 
> 标签：c++, g++

我是 C++ 的初学者，所以如果我下面的错误被证明是愚蠢的，请原谅我。尽管如此，我仍然坚持我的代码，并希望得到任何帮助。

尝试通过 g++ 编译时出现以下错误：

```
In file included from A.cpp:2:
List.h:20: error: ‘List’ is not a template type
A.cpp: In member function ‘void A::NowyObiekt(int)’:
A.cpp:6: error: ‘list_a’ was not declared in this scope
make: *** [A.o] Error 1 
```

我的代码分为以下*小*文件：

*   啊： http: [//pastebin.com/QQ04xx2j](http://pastebin.com/QQ04xx2j)（标题）
*   A.cpp：下面

    ```
    #include "A.h"
    #include "List.h"

    void A::NewObject(int i)
    {
            list_a.Add(i);
    }

    int A::Compare(int a, int b)
    {
            if ( a>b ) return 1;
            if ( a<b ) return -1;
            else return 0;
    } 
    ```

*   List.h：下面（标题）

    ```
    #ifndef LIST_H
    #define LIST_H
    template<typename T>
    class Node
    {
        Node()
        {
            nxt = pre = 0;
        }
        Node(const T& el, Node *n = 0, Node *p = 0 )
        {
            dana = el; nxt = n; pre = p;
        }
        T dana;
        Node *nxt, *pre;
    };

    template<typename T>
    class List
    {
    public:
        List()
        {
            head = tail = 0;
        }
        void Add(const T&);
    protected:
        Node<T> *head,*tail;
    };

    #endif 
    ```

*   List.cpp：[http ://pastebin.com/a3HQ9yZ4](http://pastebin.com/a3HQ9yZ4)

*   prog.cpp：下面（主要）

    ```
    #include "List.h"
    #include "A.h"

    int main()
    {
        int i = 5;
        class List list_a;
        class A obj;

        obj.Add(i);
    } 
    ```

*   并且生成文件是： http: [//pastebin.com/GTR5jW54](http://pastebin.com/GTR5jW54)

如前所述，我仍然是初学者，所以请理解。我会感谢任何帮助和明确的解释。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T05:18:05.377

您的代码有几个问题：第一个是您没有在任何`list_a`地方声明任何命名的变量。这个错误应该很明显。另一种是您使用`List`该类而不给它模板参数。

最后一点关于您的问题：由于您的文件确实非常小，您可以将它们放在问题中而不是链接到它们。

**编辑：**关于`List` 模板问题。

您已经`Node`在 中正确使用`List`，即将节点声明为`Node<T>`. 当您使用时，`List`您只需要做同样的事情。例如，要声明一个整数列表：

```
List<int> my_int_list; 
```

`List`此外，由于您只使用类中的公共函数，`A`因此不需要`friend`声明。如果您*确实*需要使用受保护或私有成员（IMO 是不良设计的标志），您还需要将该朋友声明模板化：

```
friend class List<sometype>; 
```

最后，您的代码无论如何都不会编译...原因是当您使用模板类时，必须完全定义整个类（即完成其函数实现）。您可以通过将函数放在头文件中来解决此问题。在定义函数时，您还需要那里的模板参数：

```
template<typename T>
void List<T>::Add(const T& el)
{
    Node<T>* head = new Node<T>(el);
    if ( Compare(el,i) > i )
        std::cout << "Ok" << std::endl;
} 
```

请注意，我在几个地方添加了模板参数。

# c# - 如何使用 C# 在命令提示符下更改目录位置？

> ID：10222004
> 
> 赞同：7
> 
> 时间：2012-04-19T05:11:32.087
> 
> 标签：c#, c#-4.0, process, directory

我已经通过以下代码使用 C# 成功打开了命令提示符窗口。

```
 Process p = new Process();
    p.StartInfo.FileName = "cmd.exe";
    p.StartInfo.WorkingDirectory = @"d:\pdf2xml";
    p.StartInfo.WindowStyle = ProcessWindowStyle.Normal;
    p.StartInfo.UseShellExecute = false;
    p.StartInfo.RedirectStandardOutput = true;
    p.StartInfo.RedirectStandardInput = true;

    p.Start();

    p.StandardInput.WriteLine(@"pdftoxml.win32.1.2.7 -annotation "+filename);

    p.StandardInput.WriteLine(@"cd D:\python-source\ds-xmlStudio-1.0-py27");

    p.StandardInput.WriteLine(@"main.py -i example-8.xml -o outp.xml");

    p.WaitForExit(); 
```

但是，我也通过了命令来更改目录。

问题：

1.  如何更改目录位置？
2.  打开后总是会显示Cmd提示...

请指导我摆脱这些问题...

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-19T05:14:55.603

要更改启动目录，您可以通过将 p.StartInfo.WorkingDirectory 设置为您感兴趣的目录来更改它。您的目录没有更改的原因是因为参数`/c d:\test`. 而是尝试`/c cd d:\test`

```
 Process p = new Process();
 p.StartInfo.FileName = "cmd.exe";
 p.StartInfo.WorkingDirectory = @"C:\";
 p.StartInfo.UseShellExecute = false;
 ...
 p.Start(); 
```

您可以通过将 p.StartInfo.WindowStyle 设置为 Hidden 来隐藏命令提示符以避免显示该窗口。

```
 p.StartInfo.WindowStyle = ProcessWindowStyle.Hidden; 
```

[http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.windowstyle.aspx](http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.windowstyle.aspx)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-19T05:29:28.833

您可以使用 p.StandardInput.WriteLine 将命令发送到 cmd 窗口。为此，只需将 p.StartInfo.RedirectStandardOutput 设置为 ture。像下面

```
 Process p = new Process();
        p.StartInfo.FileName = "cmd.exe";
        //p.StartInfo.Arguments = @"/c D:\\pdf2xml";
        p.StartInfo.UseShellExecute = false;
        p.StartInfo.RedirectStandardOutput = true;
        p.StartInfo.RedirectStandardInput = true;
        p.Start();

        p.StandardInput.WriteLine(@"cd D:\pdf2xml");
        p.StandardInput.WriteLine("d:"); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-19T05:14:15.940

`System.IO.Directory.SetCurrentDirectory`改为使用

你也可以检查[这个](http://social.msdn.microsoft.com/Forums/en/netfxbcl/thread/f07f7744-0ea5-40b3-a787-ea1c10ec55f3)

[和这篇文章](https://stackoverflow.com/questions/9513578/net-cmd-proces-start-cant-change-directory)

```
processStartInfo .WorkingDirectory = @"c:\"; 
```

# web-services - 聚合来自 流在骡子里

> ID：10222006
> 
> 赞同：0
> 
> 时间：2012-04-19T05:11:38.483
> 
> 标签：web-services, soap, mule, flow, orchestration

**故事到此为止**

我有一个 SOAP 服务，它将其响应（比如 Response_A）发送到 <all> 流。在流内部，有三个 SOAP 服务（例如 B、C 和 D）从 Response_A 获取输入。我从 Response_A 获取字段并使用 XSLT，我可以为 B、C 和 D 制定请求。

快速提问：我在 <all> 中使用 <async> 块来并行处理消息。在其中使用 <all> 和 <processor-chain> 标记时，处理不是并行的。任何想法为什么？

**路线图**

我将读取所有三个 B、C 和 D 的响应并将它们组合成一个响应（可能再次使用 XSLT）并将其发送给 E。

**路障**

退出 <all> 流程后，我得到了一个 MuleMessageCollection。如何阅读它，并将消息组合成一条消息？

**我的尝试**

我尝试根据关联 ID 聚合消息，但我注意到仅当来自 A 的消息被 <all> 标记拆分并发送到 B、C 和 D 时才会出现关联 ID。关联 ID 在作为来自这些服务的响应的 SOAP 信封，即使我将*enableMuleSoapHeaders*设置为 true。我无法修改服务。那么，如何使相关 id 出现在 SOAP 响应中（如果我想合并消息，则绝对需要相关 id）

我猜我还需要组大小来聚合消息。

我什至尝试使用消息属性转换器添加相关 ID，但它没有那样工作。我被 MessageCollection 卡住了，不知道如何阅读它，即使里面可能有带有相关 id 的消息。

所以，归结为一个问题。合并来自 MessageCollection 的消息的方法是什么？

我想在 xml 中执行此操作，而不用 Java 编写自定义转换器。可能吗？我的方法应该是什么？

**注意**：来自 B、C 和 D 的响应消息具有不同的 DOM 结构。我要创建的合并消息与 A、B、C 和 D 的所有响应和请求具有不同的 DO。

如果有帮助，我会尝试处理此处描述的类似情况：[http](http://ricston.com/blog/?p=640) ://ricston.com/blog/?p=640唯一的区别是，我使用的是流和 all 标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T15:50:14.950

> 在其中使用和标签时，处理不是并行的。任何想法为什么？

这是因为*all*和*处理器链*本质上是同步的：它们不并行任何东西。

现在对于聚合远程异步响应的问题，如果远程服务没有反映 Mule 标头（绝大多数非 Mule 驱动的服务就是这种情况），您需要确定是否可以使用响应负载中的值，该值将从远程服务反射回来（可以是 SOAP 标头或 SOAP 主体内的字段，如 ID）。如果是这种情况，您可以使用*expression-message-info-mapping配置**collection-aggregator*，指定不会使用 Mule 标头而是使用另一个源来完成关联。

 *否则，您宁愿保留*all*块并一个接一个地拨打电话...*

# android - 如何在android中修改我的自定义属性文件

> ID：10222010
> 
> 赞同：2
> 
> 时间：2012-04-19T05:12:00.433
> 
> 标签：android, file, properties, apk

我正在使用属性文件来获取我从我的 android 调用的各种 web 服务的 url。我想提供一个配置选项，以便可以修改 Web 服务的 IP 地址。如何进行 ？

我在 src 文件夹中有一个资源文件夹，其中包含以下值 update=http://10.52.165.226:50000/android/rest/get/updateSfc ShopOrder=http://10.52.165.226:50000/android/rest/getShopOrder/ bySite?site=

我正在使用资源包在android中使用这个值。？

我正在考虑读取文件并替换所有出现的 IP 地址。如何 rad 属性文件并在 android 中编辑它

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-19T06:45:51.940

这是您在项目中使用 .properties 文件的完整解决方案。

1 在您的 android 项目的 assets 文件夹中创建一个名为 app.properties 的文件

2编辑文件并写入您要使用的属性，例如

```
test=success 
```

并保存文件

3 在您的活动类中编写此方法

```
 private Properties loadPropties() throws IOException {
  String[] fileList = { "app.properties" };
  Properties prop = new Properties();
  for (int i = fileList.length - 1; i >= 0; i--) {
     String file = fileList[i];
     try {
        InputStream fileStream = getAssets().open(file);
        prop.load(fileStream);
        fileStream.close();
     } catch (FileNotFoundException e) {
        Log.d(TAG, "Ignoring missing property file " + file);
     }
  }
  return prop;
  } 
```

4 在 OnCreate 方法中写一些这样的东西

```
 Properties prop = null; 
     try {
        prop = loadPropties();
     } catch (IOException e) {
        Log.e(TAG, "Exception", e);
     }
     Toast.makeText(getApplicationContext(), "Result " + prop.getProperty("test"),
                    Toast.LENGTH_LONG).show(); 
```

5 添加必要的导入

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T05:42:24.747

阅读Android 中的[数据存储](http://developer.android.com/guide/topics/data/data-storage.html)，更具体地说是[Shared Preferences](http://developer.android.com/guide/topics/data/data-storage.html#pref)。有关保存用户首选项的更完整用法，请阅读[PreferenceActivity](http://developer.android.com/reference/android/preference/PreferenceActivity.html)。

可以在[此处找到有关使用共享首选项的教程](http://mobile.tutsplus.com/tutorials/android/android-application-preferences/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-19T05:29:33.517

不能修改构成 Apk 一部分的资源、资产和其他文件/文件夹。您可以使用[数据库](http://developer.android.com/guide/topics/data/data-storage.html)，具体取决于您将使用的行数

# javascript - Jquery：需要检查组合框中的值列表

> ID：10222017
> 
> 赞同：0
> 
> 时间：2012-04-19T05:12:50.817
> 
> 标签：javascript, jquery, html

我完全不知道怎么做。这是我的问题。

我有 n 个自定义组合框（从服务器端动态创建）。现在我想存储每个组合框的值，并且需要由客户端进行验证。如果任何一个组合框 val() == 0（我的意思是没有选择选项），那么我需要显示一条错误消息。如果选择了所有组合框值，那么我需要在弹出窗口中显示一个 div。如果我单击保存按钮，则必须执行所有这些操作。

由于这些组合框是动态呈现的，我不能使用它的 ID。我的想法是给一个名为 combo 的类名并需要验证。这是我的代码，

### HTML（动态生成）

```
 <select class="combo">
     <option selected="selected" value="0"></option>
     <option value="1">Employee First Name (HR)</option>
     <option value="2">Employee last Name (HR)</option>
     <option value="3">Employee number (HR)</option>
      <option value="4">NINO (HR)</option>
 </select> 
```

### jQuery

```
 $(document).ready(function(){

$('#save').click(function(){

    var myLength = $('.combo option:selected').length;

    alert(myLength);
    if(myLength > 0){
        alert('popups here');
        count=count+1;
        alert(count);
         var maskHeight = $(document).height();
         var maskWidth = $(window).width();
         $('#mask').css({'width':maskWidth,'height':maskHeight});
         $('#mask').fadeTo("fast",0.8); 
         var winH = $(window).height();
         var winW = $(window).width();
         $('.popups').css('top',winH/2-$('.popups').height()/2);
         $('.popups').css('left',winW/2-$('.popups').width()/2);
         $('.popups').show(); 
         } 
         else 
         {
         alert('No popups');
         }
         return false;
});

 }); 
```

这个想法行不通。请建议如何进行...非常感谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T05:29:33.027

尝试

### HTML

```
<select class="combo" multiple="multiple">
 <option selected="selected" value="0" >--SELECT ONE--</option>
 <option value="1">Employee First Name (HR)</option>
 <option value="2">Employee last Name (HR)</option>
 <option value="3">Employee number (HR)</option>
 <option value="4">NINO (HR)</option> 
```

​</p>

### jQuery

```
var foo = {};

$('#submit').live('click', function() {
    $('select.combo').each(function(i) {
        var selected = $(this).val();
        foo[i] = selected;
    });

    //this will remove first value ( blank having value=0)
    var finalOutput = jQuery.grep(foo[0], function(value) {
        //this will unselect the blank value
        $('.combo option:eq(0)').prop('selected', false);
        return value != "0";
    });

    if ($.isEmptyObject(finalOutput)) {
        alert('please select atlest one')
    }
    else {
        alert('Output:' + finalOutput)
    }
})​​ 
```

[`Working DEMO`](http://jsfiddle.net/xkeshav/SmKU6/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T05:32:04.043

这种方法怎么样：

```
$('#save').click(function(){
   var comboLength = $('.combo').length;
   var selectedLength = $('.combo option:selected[value!=0]').length;

   if (comboLength == selectedLength) { /* code for valid case*/}
   else { /*code for invalid case*/; return false;}
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T06:34:05.263

```
var trace = false;
$('#save').on('click', function() {
    $('select.combo').each(function() {
        if(this.value == 0){
            trace = true;
            return;
        }           
    });
    if(trace) {
        // all combo not selected
        alert('Please select all combo');
        trace = false;
    } else {
        // all selected
        alert('Thanks..');
    }
}); 
```

# ruby - Ruby URL 验证

> ID：10222018
> 
> 赞同：0
> 
> 时间：2012-04-19T05:12:54.613
> 
> 标签：ruby, net-http

我编写了这个脚本来基本上解析 URL 的文本文件并返回 http 响应代码，但是我无法让它工作。我能够导入和解析文件，但无法获取返回码。提前致谢！

```
 require 'net/http'

    #Open URL from file
    File.open("sample_input_file", "r") do |infile|
       while (URI = infile.gets)
    end
    end

    #Get HTTP response code
    http = Net::HTTP.new 
    response = http.request_head(URI)

    #Print result
    if 
        response.code != "200"
        puts URI + "Error"
else 
    puts "Ok"
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T05:19:58.793

.gets 返回一个字符串，您需要通过调用例如 URI.parse 来实际创建一个 uri

* * *

[http://www.ruby-doc.org/stdlib-1.9.3/libdoc/uri/rdoc/](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/uri/rdoc/)

# eclipse - 将 Eclipse 连接到 UNIX 机器上托管的 Weblogic 服务器

> ID：10222022
> 
> 赞同：1
> 
> 时间：2012-04-19T05:13:25.813
> 
> 标签：eclipse, unix, weblogic

我在 UNIX 机器上安装了 weblogic，我的源代码在 SVN 中。

我正在尝试在 Eclipse 中使用源代码，并想知道如何集成/连接托管在 UNIX 机器上的 weblogic 服务器，以便我可以在 Windows 机器上开发/修改我的应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T01:54:11.307

尝试使用远程调试。StackOverflow 上有一个关于它的问题：[Weblogic remote debugging using eclipse](https://stackoverflow.com/questions/3882203/weblogic-remote-debugging-using-eclipse)。

这是来自 Oracle 的更多详细信息：

> 在 startWebLogic.cmd 脚本中，指定 JAVA OPTIONS：
> 
> 设置 JAVA_OPTIONS=-Xdebug -Xnoagent -Xrunjdwp:transport=dt_socket,address=4000,server=y,suspend=n
> 
> -XDebug 参数启用调试。-Xnoagent 参数禁用默认的 sun.tools.debug 调试代理。-Xrunjdwp 参数加载 JDWP 的 JPDA 参考实现。在端口 4000 上启用调试。JDWP 协议是用于使用远程调试器进行调试的协议。

来源：[WebLogic Server 上的远程调试](http://www.oracle.com/technetwork/developer-tools/jdev/remotedebugwls-086628.html)

以及如何在 Eclipse 中设置配置：

> 接下来，为 Eclipse 项目配置一个调试配置。在调试选项列表中选择调试选项。显示调试框架。在 Debug 框架中选择 Remote Java Application 节点。右键单击节点并选择新建。在 Debug 配置框架中指定 Debug 配置的名称。选择要调试的项目。选择之前在 Eclipse IDE 中创建的 EclipseWebLogic 项目。选择连接类型的默认值。在 Connection Properties 中，将 localhost 指定为 Host，并将 Port 指定为在 WebLogic 服务器的 startWebLogic 批处理脚本中指定的端口，[4000]。单击应用按钮。添加了远程 Java 应用程序调试配置。

资料来源：[配置 Eclipse 以远程调试 WebLogic Java 应用程序](http://eclipse.sys-con.com/node/169364)

# css - 是否有 CSS 选择器来定位元素（具有给定类/id）下的第 2/3 个子项或后代（给定类/id）？

> ID：10222023
> 
> 赞同：0
> 
> 时间：2012-04-19T05:13:27.840
> 
> 标签：css, xpath, selenium, css-selectors

我有一些类似的东西

```
<div class="menu" style="background-color: transparent;">
 <div class="button">
  <div class="divider" style="background-color: transparent;"></div>
  <a id="apple" class="unselect select" href="/apple">
   <span class="apple1">Apple</span>
  </a>
 </div>
 <div class="button">
  <div class="divider"></div>
  <a id="orange" class="unselect" href="/orange">
   <span class="orange1">Orange</span>
  </a>
 </div>
 .... 
```

这给了我第一个分隔符

```
css=div.menu div.button div.divider 
```

我正在尝试访问第二个分隔线。我也需要访问按钮。我尝试阅读**第 n 个孩子**的东西，发现它与 IE 不兼容。

是否有 CSS 选择器来定位元素（具有给定类/id）下的第 2/3 个子项或后代（给定类/id）？

我现在正在使用 xPaths

```
//div[@class='menu']/descendant::div[contains(@class,'divider')][2] 
```

它有效，但我想将其迁移到 CSS。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T05:25:51.587

[相邻兄弟选择器](http://www.w3.org/TR/CSS2/selector.html#adjacent-selectors) `+`能够做到这一点并且与 IE7+兼容

Fiddle 用 4 个按钮演示了它的使用：http: **[//jsfiddle.net/AgNwu/](http://jsfiddle.net/AgNwu/)**
（如果您已经在任何地方都依赖 id/class，则不需要“div”。如果您将某些东西称为“按钮”，则希望它是一个链接，一个 input[type="submit|image|button|reset"] 或按钮元素 ;) )

**CSS**

```
.menu > .button {
    border: 1px solid darkblue;
    padding: 10px;
    margin: 5px 0;
}

.menu > .button + .button .divider {
    background: Tan;
}
.menu > .button + .button .divider:after{
    content: " (2nd or more)";
}

.menu > .button + .button + .button .divider {
    background: yellow;
}
.menu > .button + .button + .button .divider:after{
    content: " (3rd or more)";
} 
```

编辑：*相邻*兄弟，我认为这是兄弟与一般兄弟如果您的节点/元素之间有其他类型的节点，
您可以替换`+`为（一般兄弟）。这相当于在 IE7+ 中仍然可以使用`~``.button``:nth-of-type`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T05:16:21.590

你可以这样写：

```
div.menu div.button + div.button div.divider{
 color:red;
} 
```

# c++ - typedef 模板类错误

> ID：10222025
> 
> 赞同：1
> 
> 时间：2012-04-19T05:13:37.650
> 
> 标签：c++, compiler-errors, typedef

我有以下课程

```
template < int rows, int columns >
class Matrix
{
    //stuff
}; 
```

我正在执行以下操作：

```
typedef Matrix<4,4> Matrix3D; 
```

但是，当我在另一个类中声明以下内容时出现错误：

```
class Transform3D
{
public:
    Matrix3D matrix;
        //some other stuff
}; 
```

我看到的错误是：

```
error C2146: syntax error : missing ';' before identifier 'matrix'
error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
error C4430: missing type specifier - int assumed. Note: C++ does not support default-int 
```

所有这些都在第 7 行，即：

```
 Matrix3D matrix; 
```

这是在 VS 2010 中。可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T05:31:50.140

我只用一个文件创建了项目，它确实编译了

```
template < int rows, int columns >
class Matrix
{
   //stuff
};

typedef Matrix<4,4> Matrix3D; 

class Transform3D
{
public:
     Matrix3D matrix;
     //some other stuff
};

void main()
{
} 
```

因此，我认为问题与预编译头文件的使用有关。您能详细介绍一下您的文件是如何组织的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T05:53:40.790

根据您的解释，我假设以下设置：

**标准数据文件**

```
// ..
typedef Matrix<4,4> Matrix3D; 
// .. 
```

**矩阵.h**

```
template < int rows, int columns > class Matrix { /*...*/ }; 
```

**变换.h**

```
class Transform3d { Matrix3D matrix; /*...*/ }; 
```

**变换.cpp**

```
#include "stdafx.h" 
```

如果是这种情况，Transform3D 类似乎不是 Matrix 模板的定义，（我希望 stdafx.h 中的 typedef 会生成编译错误，但我对 Visual Studio 中的预编译头文件不是很熟悉）。

您应该在文件 Transform.h 中#include 文件 Matrix.h 并从 Transform.h 中的 stdafx.h 移动 typedef。或者...您应该在 stdafx.h 中包含 Matrix.h，但只有当您的头文件足够稳定（以确保您仍然利用预编译的头文件）时，我才会这样做。

我的首选方式：

**标准数据文件**

```
// ..
// typedef Matrix<4,4> Matrix3D; -- removed from here
// .. 
```

**矩阵.h**

```
template < int rows, int columns > class Matrix { /*...*/ }; 
```

**变换.h**

```
#include "Matrix.h"

typedef Matrix<4,4> Matrix3D; 

class Transform3d { Matrix3D matrix; /*...*/ }; 
```

# visual-studio-2010 - WiX - 尝试使用 util:PermissionEx 设置服务的权限并收到错误 1

> ID：10222026
> 
> 赞同：17
> 
> 时间：2012-04-19T05:13:45.130
> 
> 标签：visual-studio-2010, wix, wix3.6, wix-extension

问题[WiX - 安装 Windows 服务并授予权限](https://stackoverflow.com/q/2381219/466321)正是我想要做的。首先，我添加了`UtilExtension`这样的命名空间：

```
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi"
     xmlns:util="http://schemas.microsoft.com/wix/UtilExtension"> 
```

然后我在元素中添加了以下`ServiceInstall`内容：

```
<util:PermissionEx
              User="Authenticated Users"
              GenericAll="yes"
              ServiceChangeConfig="yes"
              ServiceEnumerateDependents="yes"
              ChangePermission="yes"
              ServiceInterrogate="yes"
              ServicePauseContinue="yes"
              ServiceQueryConfig="yes"
              ServiceQueryStatus="yes"
              ServiceStart="yes"
              ServiceStop="yes" /> 
```

最后，编译器向我提供了以下错误消息：

> 错误 1 ​​ServiceInstall 元素包含未处理的扩展元素“util:PermissionEx”。请确保已提供“ [http://schemas.microsoft.com/wix/UtilExtension ”命名空间中元素的扩展名。](http://schemas.microsoft.com/wix/UtilExtension)

我还需要做些什么来确保提供了元素的扩展名吗？我该如何解决？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-20T03:41:17.740

您需要将 WiX Util 扩展 dll 的引用添加到您的项目中。

1.  在您的项目下，右键单击*引用*
2.  选择添加*参考*
3.  选择*WixUtilExtension.dll*并选择*添加*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-09T02:59:13.470

如果您仍然看到曲线：

![在此处输入图像描述](../Images/b4901ef369aa0bc33b5ae3c7db513397.png)

添加 xmlns:util:

```
xmlns:util="http://schemas.microsoft.com/wix/UtilExtension"> 
```

# actionscript-3 - 为服务器本地文件配置 flex 沙箱

> ID：10222033
> 
> 赞同：0
> 
> 时间：2012-04-19T05:14:24.347
> 
> 标签：actionscript-3, flex4

我开发了一个从文件系统加载图像的 flex 应用程序。您只需指定图像的路径，然后应用程序从本地 web 服务中获取一些数据，然后 flex 加载图像并以特定方式将它们显示给用户。

我通过将 FlashBuilder 中的应用程序作为 WebApplication 运行来测试它......到目前为止完全没有问题。但是，当从网页加载 swf 时，在部署环境（即：JBoss 作为 Web 应用程序服务器）上，它不会加载任何内容......

我的猜测是，由于现在 swf 在 Web 服务器上下文中，它无法从本地文件系统加载文件（IE：/Users/username/files/myFile.jpg）......这是正确的吗？如果是......那么我应该怎么做才能正确加载文件？还是我应该先在服务器上上传文件，然后将文件路径设置为指向我的 Web 服务器资源的 URL？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T21:40:56.203

Flex 无需 httpservice 中间件即可与用户文件系统交互。意思是，我使用您的 flex 应用程序访问您的网页，我可以从我的文件系统加载图像以在应用程序中查看。但是，如果您希望用户从托管 swf 的服务器查看图像，那么您将需要对 php、jsp、perl 脚本等进行 httpservice 调用，以从您的服务器获取数据。

# asp.net - 仅在 sql 数据库 (asp.net) 中比较时间

> ID：10222040
> 
> 赞同：0
> 
> 时间：2012-04-19T05:15:11.977
> 
> 标签：asp.net, sql

我想比较时间并显示大于指定时间的记录。例如，在我的数据库中，我有一个字段“TimeDate”，我将日期和时间存储在一起。现在我想显示的记录只比这次“19/04/2012 2:34:27 PM”要大。无论如何我可以做到这一点。

我从这段代码开始。

```
Select * from Table where TimeDate > '19/04/2012 2:34:27 PM'. 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-04-19T07:55:43.803

首先数据类型是sql中的datetime，

您的示例代码是正确的。

对于您当前的查询，我确信 sql 足够智能。

# c# - 使用 Internet Explorer 打开保存在数据库中的图像

> ID：10222046
> 
> 赞同：0
> 
> 时间：2012-04-19T05:15:51.203
> 
> 标签：c#

如何使用 Internet Explorer（不是 WinForm/WPF 中的 WebBrowser 控件）直接打开保存在数据库中的图像，而无需先将其保存到文件中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T05:19:45.867

我认为这是不可能的，除非您创建一个网页或类似的东西来显示临时文件中的图像

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T06:31:57.117

搜索Process.Start 看网站... [MSDN](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.start%28v=vs.71%29.aspx)

这为您提供了在 IE 中打开文件的确切示例，您可能需要将图像保存到磁盘上的临时文件中

# ant - 如何启动 jboss ；如何排除 appxml ；如何使用 ant build.xml 制作 .har 文件

> ID：10222052
> 
> 赞同：0
> 
> 时间：2012-04-19T05:16:03.910
> 
> 标签：ant, build, jboss, hudson

1.  如何在 Windows 7 32 位中从命令提示符启动和停止 Jboss

当我尝试从命令提示符运行 run.bat 文件时，出现以下错误

```
D:\jboss-6.1.0.Final\bin>run.bat
Calling D:\jboss-6.1.0.Final\bin\run.conf.bat
Could not locate "D:\jboss-6.1.0.Final\bin\bin\run.jar".
Please check that you are in the bin directory when running this script.
Press any key to continue . . . 
```

1.  如何从 apache ant build.xml 文件启动和停止 jboss

2.  如何使用 apache ant build.xml 在 java 中为 Hibernate 项目制作 .har 文件

3.  我不想在使用 ant 生成的文件中包含 appxml

    **appxml="..\PartyEJB\ejbModule\META-INF\ejb-jar.xml"**

    ```
    <ear destfile="${EAR}/PartyEAR.ear" appxml="..\PartyEJB\ejbModule\META-INF\ejb-jar.xml">
        <fileset dir="${class}" includes="PartyEJB.jar"/>

        <zipfileset dir="${lib.dir}" prefix="lib">
            <include name="PartyEJBClient.jar"/>
        </zipfileset>

    </ear> 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T06:03:15.030

Verify that in your build.xml you are referring to the bin location directly, where as Ant trying to add bin to the path you have mentioned. Please remove /bin in build.xml from where you are invoking.

If it's a Web-Project or Java EE project, Dynamic Web project which doesn't have EJB's wouldn't require appxml.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T05:20:11.760

将 JBOSS_HOME 环境变量设置为 D:\jboss-6.1.0.Final 然后运行 ​​run.bat

# mysql - 使用 vb 2008 在按钮中设置数字

> ID：10222054
> 
> 赞同：0
> 
> 时间：2012-04-19T05:16:09.457
> 
> 标签：mysql, vb.net

我的记录数据库有问题。为什么单击 btnOut 时。系统将保存状态 = 1 请任何人帮助我。在按钮中设置数字。这是代码，请检查是否有错误。感谢。

我正在使用 vb 2008 和数据库 mysql

表格 1

```
Private Sub btnIn_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnIn.Click
    Const btnIn As Integer = 1
    Form1.Show()
End Sub'

Private Sub btnOut_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnOut.Click
    Const btnO As Integer = 0
    Form1.Show()
End Sub 
```

表格 2

```
Private Sub btnD_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnD.Click
    Dim command As MySqlCommand
    command = New MySqlCommand
    Const btnO As Integer = 0
    Const btnI As Integer = 1

    command.CommandText = "SEARCH INTO visitor WHERE nokp VALUES ('" & TextBox1.Text & "')"

    If TextBox1.Text = "Masukkan No.I/C Anda" Or TextBox1.Text = "" Then
        MessageBox.Show("Sila Masukkan No Kad Pengenalan Anda", "Mesej", MessageBoxButtons.OK, MessageBoxIcon.Exclamation)

    Else
        If btnO = 0 Then
            command.Connection = conn
            tkhupd = Now.ToString("yyyy-MM-dd HH:mm:tt")
            command.CommandText = "INSERT INTO visitor(nok,tkhupd,status)VALUES ('" & TextBox1.Text & "','" & tkhupd & "','" & 1 & "' )"
            MessageBox.Show("ok")
            command.ExecuteNonQuery()
            TextBox1.ResetText()

        Else
            If btnO = 0 Then
                command.Connection = conn
                tkhupd = Now.ToString("yyyy-MM-dd HH:mm:tt")
                command.CommandText = "INSERT INTO visitor(nok,tkhupd,status)VALUES ('" & TextBox1.Text & "','" & tkhupd & "','" & 1 & "' )"
                MessageBox.Show("ok Out")
                command.ExecuteNonQuery()
                TextBox1.ResetText()
            End If
        End If
    End If
    Exit Sub

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T13:58:10.213

我不想这么说，但那段代码有很多错误。甚至不要让我开始研究 sql 注入漏洞（现在，您只是要求被黑客入侵）。不，我会更基本的。从您的示例中查看这两行：

```
Const btnO As Integer = 0
'...
If btnO = 0 Then
  '...
Else 
  '...
End If 
```

btnO 是一个**常数**。它不能改变。它*总是*0。因此，你的 If/Then 检查只是装傻：它总是正确的。你放在 Else 块中的任何东西都是毫无价值的：代码*永远无法*运行。

# jquery - div覆盖在textarea上以捕捉鼠标点击

> ID：10222063
> 
> 赞同：0
> 
> 时间：2012-04-19T05:16:44.317
> 
> 标签：jquery

我在 div 中有一个 textarea。我希望能够点击覆盖。但是会发生什么是 textarea 捕获点击以及 div。

```
<div id="d" name="d"><textarea id="ta" name="ta">my text</textarea></div>

<script type="text/javascript">
$('#d').click(function(){alert("clicked on div");)};
$('#ta').click(function(){alert("clicked on textarea");)};
</script> 
```

我只想触发 div 警报，而不是 textarea。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T05:24:39.150

首先排列末尾括号的顺序以防止javascript错误：

```
$('#d').click(function(){alert("clicked on div");});
$('#ta').click(function(){alert("clicked on textarea");}); 
```

然后我收到两个警报，请参阅[此示例](http://jsfiddle.net/adqck/)。

=== 更新 ===

事件从上层 dom 元素冒泡到最低层（如果您不阻止冒泡）。所以你可以在 之后停止冒泡事件`textarea`，但你不能阻止它进入`div`而不是`textarea`. 您必须更改 html 元素 (`div`和`textarea`) 的顺序，然后`return false;`在单击处理程序的末尾添加 a`div`或添加`event.stopPropagation();`. 另请参阅我[更新的示例](http://jsfiddle.net/adqck/2/)或我的[下一个示例](http://jsfiddle.net/adqck/3/)。

# ios - 如何将应用程序委托引用分配给 viewDidLoad 中的视图控制器属性？

> ID：10222066
> 
> 赞同：1
> 
> 时间：2012-04-19T05:17:00.993
> 
> 标签：ios, xcode

在 MyViewController.h 中声明：

```
AppDelegate *appDelegate;
@property (nonatomic, strong) AppDelegate *appDelegate; 
```

在 MyViewController.m 的 viewDidLoad 中：

```
self.appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
localAppDelegate= (AppDelegate *)[[UIApplication sharedApplication] delegate]; 
```

由于某种原因 appDelegate 保持为空，但 localAppDelegate 已正确分配。

为什么 self.appDelegate 没有被正确分配？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T15:33:04.397

好吧，Erik 根据您的评论 localAppDelegate 应该始终可以访问，但请务必将 AppDelegate 标头导入您要在其中使用 appDelegate 的类..如果您需要存储变量，如用户设置、公共变量..等。我更喜欢`NSUserDefaults`在这种情况下使用它的简单和推荐使用.. 这是一个简单的例子来保存和获取字符串`NSUserDefaults`

1.  设置 ：

    `NSString *str = @"Malek";
    [[NSUserDefaults standardUserDefaults] setValue:str forKey:@"myName"]; [[NSUserDefaults standardUserDefaults] synchronize];`

2.得到：

```
NSString *myName = [[NSUserDefaults standardUserDefaults] valueForKey:@"myName"]; 
```

# opencv - SimpleCv findkeypointmatch

> ID：10222067
> 
> 赞同：0
> 
> 时间：2012-04-19T05:17:09.347
> 
> 标签：opencv, simplecv

有人可以解释为什么以下在 simplecv 中不起作用？

[https://gist.github.com/2220293](https://gist.github.com/2220293)

显然， image.findKeypointMatch 属性不存在？它确实不是 simplecv 文档。如果没有这个，我怎么能完成这些事情？

谢谢亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T07:29:25.927

您是否安装了最新版本的 SimpleCV？如果没有，我建议您从存储库中获取最新版本。这个库非常年轻，快速浏览代码后发现了很多错误。因此，使用最新版本希望减少错误数量并不是一个坏主意。

在 SimpleCV/ImageClass.py 中，您将找到 findKeypointMatch() 方法。你可以做的一件事是调查为什么你不能调用这个函数。如果您在此处复制您收到的错误消息以及您尝试运行的代码，那么这里可能有人可以帮助您。

另一种方法是根据需要浏览代码并查看它的作用，然后将代码复制到脚本中。我不会推荐这个。

请让我知道情况如何。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T14:29:36.223

要验证您始终可以运行：

```
import SimpleCV
print SimpleCV.__version__ 
```

1.2之后增加了关键点检测。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T09:00:12.383

我是编写上述代码的人。

keypointmatch 函数包含在 simple 的最新 github 存储库中。从那里安装它。您还需要 OpenCV 2.3 来运行它。

注意：这只是 SimpleCV 的一个示例。这绝不是完美的，这是显而易见的。

# iphone - 如何让 Video.js 在 iOS 设备上运行？

> ID：10222072
> 
> 赞同：0
> 
> 时间：2012-04-19T05:17:58.117
> 
> 标签：iphone, ipad, html, video

我正在使用[Video.js 框架](http://www.videojs.com/)在我的 HTML5 页面上显示视频。视频在所有桌面浏览器（每个浏览器的最新版本）上都能正确显示，但在我的 iPhone 或 iPad 上却没有（它什么都不显示）。

我怎样才能让它也适用于它们，尤其是 iPad？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T02:27:02.673

使用“基线”设置对 mp4 文件进行编码非常重要。我正在使用 Adob​​e 的媒体编码器来生成我生成的 mp4 文件。即使我为 Apple TV、iPad、iPod 选择了预设……默认配置文件是“主要”。这在我的 iPhone 上不起作用。当我重新编码时，我将配置文件设置为“基线”，将级别设置为 3.0，瞧，它在我的 iPhone 上播放。

# php - PHP没有加载任何mysql代码

> ID：10222076
> 
> 赞同：0
> 
> 时间：2012-04-19T05:18:13.473
> 
> 标签：php, mysql, apache, centos

我最近从一个专用移动到下一个。我对我的 apache、mysql 和 php 安装使用相同的存储库。但是，当尝试加载已知良好的文件时，php 无法处理该请求。

这是非常基本的 mysql 查询，只需加载一个空白页面。

同样，当尝试使用正确的信息安装 WordPress 时，网络服务器无法连接到预期的远程安装数据库。

php-mysql 和 -mysqli 已安装。

使用 CentOS 6.2、Apache 2.2.15、PHP 5.3.10 和 Zend 2.3.0。

编辑1：

我想补充一点，如果我从终端调用文件，使用“php file.php” - 它按预期执行。只是当 apache 参与其中时，才会出现问题。否则，这是 /var/log/httpd Pastie.org/3814963 中的错误。请注意，它没有被告知使用 root。也没有被告知使用 localhost。paste.org/3814965

Edit2： php 未设置为安全模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T06:36:28.523

我从您查看代码、错误消息和 mysql_connect 的文档中猜测您的服务器启用了安全模式。

[http://php.net/manual/en/function.mysql-connect.php](http://php.net/manual/en/function.mysql-connect.php)

相关部分：

> 服务器
> 
> MySQL 服务器。它还可以包含端口号。例如“hostname:port”或本地套接字的路径，例如本地主机的“:/path/to/socket”。如果 PHP 指令 mysql.default_host 未定义（默认），则默认值为 'localhost:3306'。**在 SQL 安全模式下，此参数将被忽略并始终使用值 'localhost:3306'。**
> 
> 用户名
> 
> 用户名。默认值由 mysql.default_user 定义。**在 SQL 安全模式下，忽略此参数并使用拥有服务器进程的用户名。** 密码
> 
> 密码
> 
> 密码。默认值由 mysql.default_password 定义。**在 SQL 安全模式下，忽略此参数并使用空密码。**

编辑您的 PHP.INI 文件并将 safe_mode 设置为关闭。

# python - Python：__cmp__ 和 __str__？

> ID：10222077
> 
> 赞同：4
> 
> 时间：2012-04-19T05:18:16.127
> 
> 标签：python, methods

如果你不为方法`__cmp__`和定义你自己的会发生什么`__str__`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T05:22:39.543

> 如果没有定义 __cmp__()、__eq__() 或 __ne__() 操作，则通过对象标识（“地址”）比较类实例。

有关更多详细信息：请参阅[Python 中的 object.__cmp__(self, other)](http://docs.python.org/reference/datamodel.html#object.__cmp__)。并且您可以获得更多参考[Python 中的特殊（魔术）方法](https://stackoverflow.com/questions/1090620/special-magic-methods-in-python)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-19T05:24:34.783

如果没有`__str__`定义，您将获得带有内存地址的默认地址，例如`<__main__.A object at 0x165aa90>`.

如果未定义任何操作，则通过对象标识（即内存地址（[文档](http://docs.python.org/reference/datamodel.html#object.__cmp__)`__cmp__()`））比较类实例。

例子：

```
>>> class A(object):
...   pass
... 
>>> a = A()
>>> b = A()
>>> str(a)
'<__main__.A object at 0x7fcb1df8acd0>'
>>> hex(id(a))
'0x7fcb1df8acd0'
>>> a < b
False
>>> a > b
True
>>> id(a), id(b)
(140510357925072, 140510357925008) 
```

# php - 从代码 Igniter 中的 URL 中删除 index.php

> ID：10222080
> 
> 赞同：1
> 
> 时间：2012-04-19T05:18:31.213
> 
> 标签：php, .htaccess, codeigniter

我已阅读有关此的帖子，但没有回答我的问题我已经设置了我在代码点火器和 SO 问题的论坛上找到的所有内容

目前我有以下设置：.htaccess 文件

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /

    #'system' can be replaced if you have renamed your system folder.
    RewriteCond %{REQUEST_URI} ^system.*
    RewriteRule ^(.*)$ index.php/$1 [L]

    #Checks to see if the user is attempting to access a valid file,
    #such as an image or css document, if this isn't true it sends the
    #request to index.php
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d

    #This last condition enables access to the images and css folders, and the robots.txt file
    RewriteCond $1 !^(index\.php|(.*)\.swf|images|robots\.txt|css|docs|cache)
    RewriteRule ^(.*)$ index.php/$1 [L]
    </IfModule>

<IfModule !mod_rewrite.c>
    # If we don't have mod_rewrite installed, all 404's
    # can be sent to index.php, and everything works as normal.
    ErrorDocument 404 /application/errors/404.php
</IfModule> 
```

我也设置了`$config['index_page'] = '';`

但这不起作用，如果我输入 *http://localhost:8088/crud_demo/index.php/login* 它不会改变 URL，但如果我输入 *http://localhost:8088/crud_demo/login*它显示未找到错误

我的路线配置

```
$route['register'] = "register";
$route['manage'] = "manage";
$route['default_controller'] = "login";
$route['404_override'] = ''; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-14T09:34:13.123

在我的虚拟主机文件中将 AllowOverride None 更改为 AllowOverride All 在`/etc/apache2/sites-available/000-default.conf`ubuntu

`/etc/apache2/sites-available/default.conf`在 windows中的我的虚拟主机文件中将 AllowOverride None 更改为 AllowOverride All

```
<VirtualHost *:80>
    ServerAdmin webmaster@localhost

    DocumentRoot /var/www
    <Directory />
            Options FollowSymLinks
            AllowOverride All    <---- replace None with All
    </Directory>
    <Directory /var/www >
            Options Indexes FollowSymLinks MultiViews
            AllowOverride All   <---  replace None with All
            Order allow,deny
            allow from all
    </Directory>
.... 
```

然后将此代码放入codeigniter根文件夹中的.htaccess文件中

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L] 
```

它肯定会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T05:27:10.933

`RewriteRule ^crud_demo/(.*)$ crud_demo/index.php/$1`

[http://martinmelin.se/rewrite-rule-tester/](http://martinmelin.se/rewrite-rule-tester/)测试 URL 重写。

我认为 CodeIgniter 有它自己的路由 URL 方式，就像其他 PHP 框架一样。看看这里：[http ://codeigniter.com/user_guide/general/routing.html](http://codeigniter.com/user_guide/general/routing.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T05:27:45.050

如果 crud_demo 是根目录的子文件夹，那么您应该更改

`RewriteBase /`

到

`RewriteBase /crud_demo`

# javascript - 有没有什么工具可以在 NodeJS 中组合前端 JS 文件？

> ID：10222081
> 
> 赞同：8
> 
> 时间：2012-04-19T05:18:35.690
> 
> 标签：javascript, node.js, filemerge

我有前端 JS 文件：

-js
  -a.js
  -b.js
  -c.js

我请求`http://example.com/js/all.js`，我会得到一个包含所有内容的文件`a.js`，`b.js`和`c.js`。

NodeJS中是否有任何库提供这样的功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T12:02:37.740

你应该看看铁砧：[https ://github.com/arobson/anvil.js](https://github.com/arobson/anvil.js)

它提供了一个高度可配置的过程来准备许多前端文件，尽管我似乎找不到可以直接从您的节点应用程序使用的 API。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T08:37:12.097

您可以使用简单的 linux cat 将所有脚本连接成一个。

```
cat ./a.js ./b.js ./c.js > all.js 
```

您也可以从 node.js 执行此命令。

将脚本与 node.js (on air) 连接到 all.js 不是最好的方法，因为这会增加服务器负载。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-19T08:45:15.017

`common.js`如果节点不够，[require.js](http://requirejs.org/docs/node.html)应该提供您正在寻找的功能。

# arrays - 索引超出了数组 vb2008 的范围

> ID：10222082
> 
> 赞同：1
> 
> 时间：2012-04-19T05:18:42.863
> 
> 标签：arrays, visual-studio-2008

我正在研究一个旧应用程序，每次我尝试发送一条信息时，它都会出现“索引超出数组范围” - 以下是它来自的行

```
If Curl(APIAddress & "/api.php", String.Format("&action=addticketreply&username={0}&password={1}&ticketid={2}&adminusername={0}&message={3}", APIUsername, ConvertStringToMD5(APIPassword), TicketID, txtMessage.EditValue())) = True Then 
```

我只是想知道是否有人可以帮助指出到底是什么问题，以便我可以调查并可能了解更多信息以供将来参考

谢谢

# grails - Grails 预测分组和计数

> ID：10222083
> 
> 赞同：2
> 
> 时间：2012-04-19T05:18:45.877
> 
> 标签：grails, group-by, projection

以下是我的两节课

```
class Users {
    String emailAddress
    String password
    //    String filename
    String firstName
    String lastName
    Date dateCreated
    Date lastUpdated
} 
```

和

```
class SharedDocuments {
    Users author
    Users receiver
    Documents file
    static constraints = {

    }
} 
```

我想运行一个类似于这个的查询，本质上我想获取所有用户的列表以及他们创作的文档数量

```
SELECT author_id, COUNT(SharedDocuments.id )FROM SharedDocuments 
  INNER JOIN users ON author_id = users.id
  GROUP BY author_id 
```

这是我到目前为止所拥有的

```
def sharedDocumentsInstanceList = SharedDocuments.createCriteria().list(params){
    createAlias("author","a")
    eq("receiver.id",session.uid)  
    projections{
        groupProperty "author"
        count "id",'mycount'

    }
     order('mycount','desc')
    maxResults(params.max)
} 
```

如果我摆脱`count`或`countDistinct`获得不同作者的列表，我有这 90% 的工作，但我想要的是作者以及文档数量。因此，当我将 count 或 countDistinct 子句添加到此标准时，我只会得到 long 数组！像 [2,3,4] 我想要的是 [[author1,2],[author2,3] ...] 我怎样才能实现这个我已经看过[Grails：在许多表上的投影？](https://stackoverflow.com/questions/5771627/grails-projection-on-many-tables), [Grails 标准预测 - 获取行数](https://stackoverflow.com/questions/2327743/grails-criteria-projections-get-rows-count), [Grails groupProperty 和 order。这个怎么运作？](https://stackoverflow.com/questions/5220450/grails-groupproperty-and-order-how-it-works)，但似乎没有一个答案能解决我的问题！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-18T17:23:29.977

分页投影有一个错误，它只返回投影块中的最后一个字段。当前的 grails 2.1.5 已修复此错误。这是报告的错误[http://jira.grails.org/browse/GRAILS-9644](http://jira.grails.org/browse/GRAILS-9644)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T08:06:11.597

如果您想要查询中描述的结果，那么您需要作者的 ID 或任何其他特定属性（如电子邮件）。

```
 def sharedDocumentsInstanceList = SharedDocuments.createCriteria().list(params){
    eq("receiver.id",session.uid)  
    projections{
        groupProperty "author"
        count "id",'mycount'

    }
     order('mycount','desc')
    maxResults(params.max)
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T05:28:14.113

你不能只使用 countBy* - 比如

```
 SharedDocuments.countByAuthorAndReceiver(user, receiver) 
```

# asp.net - 在gridview的每一行中显示一个月中的每一天

> ID：10222085
> 
> 赞同：-1
> 
> 时间：2012-04-19T05:18:52.490
> 
> 标签：asp.net, asp.net-mvc

如何在网格视图中显示每月的每一天？这些天将基于当月，所以我认为它是自动生成的，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T06:15:20.143

执行下面的 sql 查询并将其绑定到后面代码中的 gridview

```
Declare @Days Table (DateField datetime)

Declare @CurrentDate datetime
Declare @EndDate datetime

Set @CurrentDate = '01-Nov-2007'
Set @EndDate = '30-Nov-2007'

While @CurrentDate <= @EndDate
  Begin
     Insert Into @Days Values(@CurrentDate)
     Set @CurrentDate = DateAdd(d,1,@CurrentDate)
  End 

Select convert(char(2),DateField,103) From @Days 
```

--------- 如果您需要 c# 中的解决方案，那么 ---------

```
 using System.Linq;
  public IEnumerable<DateTime> DateRange(DateTime fromDate, DateTime toDate)
    {
        return Enumerable.Range(0, toDate.Subtract(fromDate).Days + 1)
                         .Select(d => fromDate.AddDays(d));
    }
        IEnumerable<DateTime> dates;
        dates = DateRange(DateTime.Now, DateTime.Now.AddDays(10)); 
```

日期成员将包含给定范围之间的所有日期，您可以将其添加到数据表并将其绑定到 Gridview。

# asp.net - 如何触发 SPGridView RowDataBound 事件？

> ID：10222086
> 
> 赞同：0
> 
> 时间：2012-04-19T05:19:04.267
> 
> 标签：asp.net, sharepoint, event-handling

在网络用户控制中，`asp.net`我正在使用一个`spgridview`.
我想开火`spgridview_rowdataevent`。我该怎么做？
请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T05:40:23.493

将此添加到您的 GridView

```
OnRowDataBound="GridViewRowEventHandler" 
```

然后在你的代码后面做你想做的事

```
void GridViewRowEventHandler(object sender, GridViewRowEventArgs e) 
```

# python - Python 2.7 中的子类

> ID：10222089
> 
> 赞同：1
> 
> 时间：2012-04-19T05:19:32.067
> 
> 标签：python, subclass

我正在尝试做一些我认为在面向对象编程中非常普通的事情，但找不到任何关于 Python 2.7 的文档我想创建一个超类的子类，当我完成时，超类绑定到超类超类.subclass 绑定到子类，而 subclass 绑定到任何内容。这是我能想到的最佳解决方案：

```
class superclass:
  pass
class subclass(superclass):
  pass
superclass.subclass = subclass
del subclass 
```

有时我希望子类在它自己的文件中，有时则不是。有没有更优雅的解决方案，我不必手动执行最后两行？虽然

```
class superclass:
  class subclass:
    pass 
```

几乎做正确的事，子类实际上并没有从超类继承。如果我尝试这样做：

```
class superclass:
  class subclass(superclass):
    pass 
```

我收到一条错误消息，指出超类未绑定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T06:11:12.697

这是一个简单的类装饰器来进行引用：

```
def refer(cls):
    cls.__bases__[0].subclass = cls
    return cls 
```

以下是你如何使用它：

```
>>> class Superclass:
        pass

>>> @refer
    class Subclass(SuperClass):
        pass 
```

如果您不希望模块命名空间中的名称，您仍然需要删除*Subclass 。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T05:37:21.357

我同意其他所有人的观点，这是一件愚蠢的事情，我认为您不应该这样做，但是为了知识：

```
class Superclass(object):
    pass

Superclass.Subclass = type('Subclass', (Superclass,), {
    'foo': lambda self: self,
}) 
```

其中字典参数包含任何方法。我不认为有一个很好的方法可以用`class`语法来做到这一点，但这实际上只是调用的语法糖`type`。

您不必将方法定义为`lambda`s; `def`只要它们有参数，它们就可以是普通函数`self`。但是，如果您这样做，您可能会想要隐藏它们的定义....

# ios - 关闭 UITextView 中的选择/粘贴菜单？

> ID：10222091
> 
> 赞同：0
> 
> 时间：2012-04-19T05:19:41.480
> 
> 标签：ios, uitextview

我想以编程方式关闭`UITextView`. 我知道如何[防止它出现](https://stackoverflow.com/questions/1426731/how-disable-copy-cut-select-select-all-in-uitextview)，但我也希望能够关闭一个打开的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T05:27:20.103

每当您想关闭它时，只需删除`UITextView`的响应者。例如，您想在用户触摸弹出菜单之外时关闭它（顺便说一句，默认情况下已经发生了！）。为此，您可以执行以下操作：

```
- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event{
   [yourTextView resignFirstResponder];
} 
```

# php - Mac 上的 Zend 框架：-bash: ./zf.sh: /bin/sh: 错误的解释器：不允许操作

> ID：10222102
> 
> 赞同：0
> 
> 时间：2012-04-19T05:20:29.447
> 
> 标签：php, macos, bash, zend-framework, sh

我正在尝试在我的 Mac（Max OS X 10.7.3）上设置 Zend Framework。虽然我过去做过，但我遇到了以前从未遇到过的 Zend Tool 问题。特别是，当我尝试运行 Zend Tool (zf.sh) 时，我总是会收到以下错误：

```
-bash: ./zf.sh: /bin/sh: bad interpreter: Operation not permitted 
```

问题似乎不在于 Shell 本身，因为二进制文件就在它应该在的地方。我尝试修改脚本以使用 Bash，但结果是一样的。我`./zf.sh`从脚本所在的同一目录（目前是我的下载文件夹）运行时遇到此错误。但是，如果我使用`sh zf.sh`or `bash zf.sh`，一切正常。我已经尝试了所有我发现与此问题模糊相关的可能方法，包括：

*   禁用隔离
*   验证行尾不包含 Cr
*   chmod +x 文件

这些都没有影响，我不确定是什么导致了这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T04:19:42.973

该问题似乎是由我的平台不支持的字符（很可能是行尾）引起的。有趣的是，在 BBEdit 中打开文件，清理文本，然后用正确的行尾字符保存它不起作用。但是，将文件的内容复制并粘贴到 BBEdit 中的新文件中，然后保存就可以了。

# c# - 继承和“奇怪重复的模板模式”

> ID：10222104
> 
> 赞同：4
> 
> 时间：2012-04-19T05:20:54.657
> 
> 标签：c#, generics, inheritance, polymorphism

在 MVC 项目中，我有以下类：

```
public abstract class Browse<T> where T : Browse<T>

public abstract class SqlBrowse<T> : Browse<T> where T : Browse<T>

public class SqlBrowseBoys : SqlBrowse<SqlBrowseBoys>
public class SqlBrowseGirls : SqlBrowse<SqlBrowseGirls> 
```

和以下视图模型

```
public class BrowseViewModel
{
    public [INTERFACE] People { get; set; }
} 
```

但我需要在标记为 [INTERFACE] 的位置有一个接口/类，它可以同时使用 SqlBrowseBoys 和 SqlBrowseGirls，因此我可以在多个地方使用 BrowseViewModel。

如果有人能告诉我我的大脑现在是如何打结的，我会很高兴的。我怀疑这将需要对课程进行一些更改，这很好，但我目前不知道那会是什么。

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T05:38:55.383

已经`SqlBrowse<T>`实现了一个非泛型`SqlBrowse`接口（或抽象类），然后编写

```
public SqlBrowse People { get; set; } 
```

很难说出您的课程将带来哪些变化，因为我们没有它们的定义。

# jquery - 如何在不与 jquery 冲突的情况下使用 color1 为悬停时的 div 和使用 color2 的 onclick 着色？

> ID：10222105
> 
> 赞同：0
> 
> 时间：2012-04-19T05:20:54.900
> 
> 标签：jquery, click, hover

我有一组 div。当我悬停时它们需要是橄榄色的，并且在单击时它们需要保持红色（当单击红色 div 时它们需要变回白色）。当它们被点击时，我需要让 div 被“选中”（引入一个名为 selected 的新类）。

问题是一切正常，但是当我在点击后将鼠标悬停在 div 上时，悬停似乎仍然有效。这是我的代码

```
$(document).ready(function () {

    $("div.onemovie").not("select").hover(
  function () {
          $(this).css("background-color", "Olive");

  },
  function () {
          $(this).css("background-color", "White");
      }

  );
}); 
```

点击代码：

```
 $(document).ready(function () {
  $("div.onemovie").toggle(
  function () {
      $(this).toggleClass("select");
      $(this).css("background-color", "Red");
  },

  function () {
      $(this).toggleClass("select");
      $(this).css("background-color", "White");
  }
  ); 
```

});

这是我的情况的 JS Fiddle 链接：http: [//jsfiddle.net/mNsfL/](http://jsfiddle.net/mNsfL/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T05:32:28.573

这个版本做你想要的吗？

[http://jsfiddle.net/X7HbY/7/](http://jsfiddle.net/X7HbY/7/)

我认为您可以通过使用 CSS 实现悬停效果更简单地完成您想要的事情。

此外，您不必将背景颜色设置回白色。当规则不再适用时，`div`将恢复到以前的设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T05:24:36.690

我能看到的最好的方法是绑定每个事件并使其在 mouseover 事件期间，如果`div`单击，则 mouseout 事件将被解除绑定。

这将使鼠标悬停代码不执行，从而`div`保留颜色更改。

如果您使用的是 jQuery 1.7+，您应该使用[`on()`](http://api.jquery.com/on)来绑定事件并[`off()`](http://api.jquery.com/off)取消绑定它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T05:27:09.817

```
$("div.onemovie").bind('click', function(){
    $(this).css("background-color", "White");
})
.bind('mouseover', function() {
    $(this).css("background-color", "Red");
}) 
```

可以监听每个事件并分别处理它们。

# ruby-on-rails - 在 Ubuntu 11.04 上安装 Ruby On Rails

> ID：10222106
> 
> 赞同：0
> 
> 时间：2012-04-19T05:21:06.453
> 
> 标签：ruby-on-rails, ruby, installation, ubuntu-11.04

我只是该领域的`Ruby`新手。我尝试在此[博客](http://blog.sudobits.com/2011/06/27/install-ruby-on-rails-in-ubuntu-10-1011-04/)的帮助下在我的系统上进行安装`ubuntu 11.04`。当我逐步完成安装过程时，我使用了此命令`bash < <(curl -s https://rvm.io/install/rvm)`，之后我使用了 rvm | head -1 它显示了这个

```
No command 'rvm' found, but there are 19 similar ones
rvm: command not found 
```

所以有人能告诉我哪里是错误的部分吗？我对 Ruby 了解不多。任何帮助和建议都将是非常可观的。任何用于安装 Ruby 的良好且易于理解的链接`Ubuntu 11.04`都会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T05:28:17.273

尝试`curl -L get.rvm.io | bash -s stable`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T05:55:25.577

您只需按照此操作并安装所有内容

[http://ryanbigg.com/2010/12/ubuntu-ruby-rvm-rails-and-you/](http://ryanbigg.com/2010/12/ubuntu-ruby-rvm-rails-and-you/)

和冷静..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T05:36:04.650

尝试使用安装 rvm

```
curl -L http://get.rvm.io | bash 
```

然后运行此命令，阅读并按照说明进行操作：`rvm requirements`

# linux - 用户空间中的实时线程优先级

> ID：10222107
> 
> 赞同：1
> 
> 时间：2012-04-19T05:21:09.497
> 
> 标签：linux, real-time, terminology, xenomai

来自：[http ://www.xenomai.org/documentation/xenomai-2.3/pdf/Life-with-Adeos-rev-B.pdf](http://www.xenomai.org/documentation/xenomai-2.3/pdf/Life-with-Adeos-rev-B.pdf)

> 上述行为与 RTAI/LXRT 发生的情况相反，例如，通过继承 RTAI 调度程序定义的最低优先级，迁移到 Linux 空间的线程实际上在同一移动中失去了实时优先级。

这个设计决定背后一定有一些原因。我希望了解它可以提供什么样的优势 - 我的意思是当实时线程转移到用户空间时，它会获得低优先级（因此可以被内核空间中运行的高优先级实时线程抢占）。这个设计决策背后是否有一些假设？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T05:36:17.760

两个假设：

1.  线程不会在内核空间中花费太多时间。

2.  内核空间中的线程倾向于持有需要尽快释放的资源。

# objective-c - 在父菜单中获取 NSMenuItem (sender) 的索引

> ID：10222108
> 
> 赞同：1
> 
> 时间：2012-04-19T05:21:17.200
> 
> 标签：objective-c, cocoa, nsmenuitem, nsmenu, sender

我有一个`NSMenu`（*应用程序停靠菜单*）和其中的几个具有相同操作的项目。

如何在其容器菜单中找出发件人项（触发操作的项）的索引？（我对 不感兴趣`title`，因为那可能是重复的）

这就是我尝试过的，但它不断返回`0`（零）。

```
- (void)myAction:(id)sender
{
    NSMenuItem* mi = (NSMenuItem*)sender;

    int index = [[[mi parentItem] submenu] indexOfItem:mi];

    NSLog(@"Clicked item with index : %d",index);
} 
```

有任何想法吗？（有没有更好的方法来实现同样的目标？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T08:16:12.250

您可以使用菜单项`representedObject`来存储对应用程序中某个对象的引用。在您的情况下，您可能会使用菜单项引用的文档：

```
[aMenuItem setRepresentedObject:yourDocument]; 
```

然后，您可以像这样访问操作中的对象：

```
- (void)myAction:(id)sender
{
    NSMenuItem* mi = (NSMenuItem*)sender;
    YourDocument* doc = (YourDocument*)[sender representedObject];
    //do something with doc
} 
```

# extjs - 如何执行复选框检查事件？

> ID：10222114
> 
> 赞同：0
> 
> 时间：2012-04-19T05:22:02.510
> 
> 标签：extjs

我想要在复选框中执行检查事件的帮助。这是我的代码：

**视图.js：**

```
Ext.define('AM.view.shop.Bill',  
{  
    extend: 'Ext.form.Panel',  
    alias : 'widget.bil',  
    title: 'Complete Check Out',  
    defaultType:'textfield',  
    initComponent: function() {  

    this.items= [ 
    // Mailing Address  
    {   xtype: 'fieldset',  
        title: 'Mailing Address',  
        defaultType: 'textfield',  
        layout: 'anchor',  
        width:520,  
        defaults: {  
        anchor: '100%'  
    },  

    items: [{  
        fieldLabel: 'Street Address',  
        name: 'mailingStreet',
        billingFieldName: 'billingStreet',
        allowBlank: false  
    },  

    {   xtype: 'container',
        layout: 'hbox',
        items: [{
            xtype: 'textfield',
            fieldLabel: 'City',
            name: 'mailingCity',
            id:'mailingCity',
            billingFieldName: 'billingCity',
            flex: 1,
            allowBlank: false
        }]
    }]
},

// Billing Address
{
    xtype: 'fieldset',
    title: 'Billing Address',
    layout: 'anchor',
width:520,
    defaults: {
        anchor: '100%'
    },
    items: [{
        xtype: 'checkbox',
        name: 'billingSameAsMailing',
        boxLabel: 'Same as Mailing Address?',
        hideLabel: true,
        checked: true,
        style: 'margin-bottom:10px',
        id:'billingSameAsMailing',
    }, 

    {   xtype: 'textfield',
        fieldLabel: 'Street Address',
        name: 'billingStreet',
        //style: 'opacity:.3',
        disabled: true,
        allowBlank: false
     },

     {  xtype: 'container',
        layout: 'hbox',
        items: [{
            xtype: 'textfield',
            fieldLabel: 'City',
            name: 'billingCity',
            id:'billingCity',
            style: (!Ext.isIE6) ? 'opacity:.3' : '',
            flex: 1,
            disabled: true,
            allowBlank: false
            }]
        }]
    }]

    this.callParent(arguments);
    }
}); 
```

**控制器.js：**

```
Ext.define('AM.controller.Shops', {
    extend: 'Ext.app.Controller',
    init: function() {
        this.control({
            'bil textfield[name=mailingCity]' : {
                change: function(textField) {   
                    var formpanel = Ext.ComponentQuery.query('bil')[0];
                    var copyToBilling = formpanel.down('[name=billingSameAsMailing]').getValue();

                     if (copyToBilling) {    
                         var city=formpanel.down('[name=mailingCity]').getValue();
                         formpanel.down('[name=billingCity]').setValue(city); 
                     }      
                 }      
             },

             'bil checkbox[name=billingSameAsMailing]': {
                 check: function(item, checked) {
                     alert(item);
                 }  
              }                     
          });  
     }  
}); 
```

我使用相同的文本框方法来获取特定复选框以在
该复选框上执行事件。在文本框中它工作正常，但在复选框的情况下它没有响应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T11:14:02.447

您只需尝试以下代码。它适用于我。

```
item.checked = true; 
```

# javascript - 无法在 IE8 中禁用 F5 键

> ID：10222116
> 
> 赞同：2
> 
> 时间：2012-04-19T05:22:32.770
> 
> 标签：javascript

我想在我的 Web 应用程序中禁用 F5 键。我正在使用以下代码：

```
<html>
<head>
<script type="text/javascript">
window.onkeydown=function(e) {
               if (e.keyCode === 116 ) {
                       alert("This action is not allowed");
                       e.keyCode = 0;
                       e.returnValue = false;                  
                       return false;
                   }

               }
</script>
</head>
<body>
<p> F5 Test IE8</p>
</body>
</html> 
```

上面的代码在 Chrome 中运行良好，但在 IE8 中无法运行。在按 F5 时，页面会在 IE8 上刷新。我曾尝试使用 e.preventDefault()，但没有任何效果。有什么帮助吗？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T06:07:01.783

尝试下一个代码：

```
<html>
<head>
<script type="text/javascript">
  document.onkeydown=function(e) {
    e=e||window.event;
    if (e.keyCode === 116 ) {
      e.keyCode = 0;
      alert("This action is not allowed");
      if(e.preventDefault)e.preventDefault();
      else e.returnValue = false;
      return false;
    }
  }
</script>
</head>
<body>
<p> F5 Test IE8</p>
</body>
</html> 
```

*   您必须使用`document`对象而不是`window`对象。在 IE8`window`对象中不支持`onkeydown`.
*   您必须使用`e=e||window.event;`代码行，因为在 IE8 中，当注册为`element.on...`没有参数的事件被接收到事件处理函数中时（`e`从您的示例中是`undefined`）；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T06:37:19.737

在 IE8、firefox 和 chrome 中测试：

```
document.onkeydown=function(e) {
    var event = window.event || e;
    if (event.keyCode == 116) {
        event.keyCode = 0;
        alert("This action is not allowed");
        return false;
    }
} 
```

另请参阅[此示例](http://jsfiddle.net/BwLdX/3/show/)。

# java - lwuit 超出 TCP 客户端套接字的资源限制

> ID：10222117
> 
> 赞同：0
> 
> 时间：2012-04-19T05:22:36.567
> 
> 标签：java, java-me, lwuit, midp

我使用 lwit 和浏览器大约 20 页，然后我得到了执行：

java.io.IOException：超出 TCP 客户端套接字的资源限制 - com.sun.midp.io.j2me.socket.Protocol.open0()，bci=0 - com.sun.midp.io.j2me.socket.Protocol。连接（），bci = 142 - com.sun.midp.io.j2me.socket.Protocol.open（），bci = 133 - com.sun.midp.io.j2me.socket.Protocol.openPrim（），bci = 4 - com.sun.midp.io.j2me.http.Protocol.createConnection()，bci=13 - com.sun.midp.io.j2me.http.Protocol.connect()，bci=43 - com.sun。 midp.io.j2me.http.Protocol.streamConnect(), bci=109 - com.sun.midp.io.j2me.http.Protocol.startRequest(), bci=9 - com.sun.midp.io.j2me。 http.Protocol.sendRequest(), bci=35 - com.sun.midp.io.j2me.http.Protocol.sendRequest(), bci=3 - com.sun.midp.io.j2me.http.Protocol.getHeaderField( ), bci=5 - com.sun.lwuit.browser.HttpRequestHandler.resourceRequested(HttpRequestHandler.java:138) - com.sun.lwuit.html.HTMLComponent$2。运行（HTMLComponent.java:817）HttpRequestHandler->IOException：超出 TCP 客户端套接字的资源限制 连接到流时出错

任何人都可以告诉我如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T05:37:44.247

您可能应该`close`在使用它们之后使用 TCP 套接字。否则，它们会一直处于打开状态，并且如果操作系统一次只允许打开 20 个连接，则会出现此异常。

# ruby - Rails 的人体高度下拉列表

> ID：10222118
> 
> 赞同：3
> 
> 时间：2012-04-19T05:22:38.470
> 
> 标签：ruby, plugins, ruby-on-rails-3.1, gem

我需要一个人类身高的下拉列表，例如 5'2、5'3、5'4 等。最好是 4'0 到 8'0。有宝石或插件吗？我似乎找不到一个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T10:27:46.813

大概你无论如何都会以英寸为单位存储它，所以你可以生成你`@heights`的传递给 options_from_collection_for_select 像：

```
(56..112).to_a.map { |inch| { id: inch.to_s, name: (inch/12).floor.to_s+'\''+(inch%12).to_s } } 
```

也许将英寸到字符串的转换分解为辅助方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T07:09:59.613

不确定这是否是最好的方法，但你可以尝试这样的事情

```
@heights = (4..7).to_a.collect{|o| 0.upto(11).to_a.collect{|k| ["#{o.to_s+'\'' + k.to_s}",o.to_s + k.to_s]}}.inject([]){|s,v| s | v} 
```

或更好，

```
@heights = (4..7).to_a.collect{|o| 0.upto(11).to_a.collect{|k| ["#{o.to_s+'\'' + k.to_s}",o.to_s + k.to_s]}}.flatten(1) 
```

这将给出一个类似的结构，

```
[["4'0", "40"], ["4'1", "41"], ["4'2", "42"], ["4'3", "43"], ["4'4", "44"]] # and so on.. 
```

现在，要为选择选项准备此结构，您可以使用：

```
@heights.map { |name, id| OpenStruct.new(:value => id, :name => name) } 
```

这将为每个高度元素提供一个名称和值对，可用于为选择标签制作选项

您可能需要包含 OpenStruct，因此请使用

```
require 'ostruct' 
```

把它放在选择标签中：

```
<%= select_tag "Height", options_from_collection_for_select(@heights,'value','name'), html_options = { :onChange=> "height_changed();"} %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-11T15:06:34.417

这是人类身高的好宝石 [https://github.com/AlexanderZaytsev/height](https://github.com/AlexanderZaytsev/height)

写一个助手

```
def height
(121..244).to_a.collect{|k| ["#{Height.new(k).to_s(:default, :metric)}","#{Height.new(k).to_s(:default, :imperial)}","#{Height.new(k).feet}"]}
end 
```

输出

```
[["1m 21cm", "4 ft 0 in", "4"], ["1m 22cm", "4 ft 0 in", "4"], ["1m 23cm", "4 ft 0 in", "4"], ["1m 24cm", "4 ft 1 in", "4.08"] 
```

使用模板中的方法

```
<%= f.input :how_tall_are_you, label: "How tall are you ? (in feet  and Cm)", collection: height.map { |cm, inc, value| ["#{cm} - #{inc}", "#{value}"] }  ,prompt: "-Please select one-",input_html: { class: 'form-control input-lg', required: true} %> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-20T19:45:29.250

科林的回答让我成功了：

```
<%=
  n.select :height, 
  options_for_select((36..96).to_a.map { |inch| 
    { 
      id: inch.to_s, 
      name: (inch/12).floor.to_s+'\''+(inch%12).to_s+'"' 
    }
  }),
  {},
  id: 'height' 
%> 
```

在视图中，下拉菜单显示如下：

[![高度下拉](../Images/8546c77caf4edb6194e9fea60b88d750.png)](https://i.stack.imgur.com/eNvYJ.png)

HTML 呈现如下：

```
<select id="height" name="height_select">
<option value="{:id=>&quot;36&quot;, :name=>&quot;3'0\&quot;&quot;}">{:id=&gt;"36", :name=&gt;"3'0\""}</option>
<option value="{:id=>&quot;37&quot;, :name=>&quot;3'1\&quot;&quot;}">{:id=&gt;"37", :name=&gt;"3'1\""}</option>
<option value="{:id=>&quot;38&quot;, :name=>&quot;3'2\&quot;&quot;}">{:id=&gt;"38", :name=&gt;"3'2\""}</option>
.... 
```

为了让它只显示高度，我添加了一个集合并指定要显示的内容（名称）。我还指定了一个默认值（user_height）。

```
<%= 
  n.select :height, 
  options_for_select(
    (36..96).to_a.map { |inch| 
      { 
        id: inch.to_s, 
        name: (inch/12).floor.to_s+'\''+(inch%12).to_s+'"' 
      } 
    }.collect{ |p| 
      [p[:name], 
      p[:id].to_i]
    },
    user_height),
    {},
    id: 'height' 
%> 
```

[![身高下拉leo](../Images/adf98bd47ab2deaf4330cf2c04d4e764.png)](https://i.stack.imgur.com/62hzJ.png)

HTML 渲染：

```
<select id="height" name="height_select">
<option value="36">3'0"</option>
<option value="37">3'1"</option>
<option value="38">3'2"</option>
...
<option selected="selected" value="69">5'9"</option>
...
</select> 
```

我不确定这是否是最有效的解决方案，但它有效！

这是[一些相关文档](http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html)。

# java - 使用java从mp4中提取图像

> ID：10222120
> 
> 赞同：2
> 
> 时间：2012-04-19T05:23:05.987
> 
> 标签：java, mp4

我想用java编写代码来提取mp4文件中的图像。请指导我如何去做。我完全一无所知。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T05:38:12.980

Java SE 具有 Java 媒体框架 (JMF)，但它仅支持少数视频[格式](http://www.oracle.com/technetwork/java/javase/formats-138492.html)，不包括 MPEG-4。

当然，您有一些第三方选择来实现您的目标。其中之一是[Jffmpeg](http://jffmpeg.sourceforge.net/)。它是 JMF 的扩展，包含对 MPEG-4 的支持。

Xuggler 是另一个具有 GPL/LGPL 许可证的不错选择。它适用于 Windows、Mac OS X 和 Linux。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T05:36:35.903

[Xuggler](http://www.xuggle.com/xuggler/documentation)是一个开源的第三方库，您可以使用它来执行此操作。通读 API。和示例代码。

# python - 谷歌应用引擎中的内存缓存

> ID：10222121
> 
> 赞同：3
> 
> 时间：2012-04-19T05:23:13.367
> 
> 标签：python, google-app-engine

我有一个用 python 和谷歌应用引擎开发的应用程序，但是当我尝试自定义这个应用程序时，它在之前的代码中给了我编译时错误，该代码在现场运行良好。代码是：

```
if version in ['beta', 'alpha'] :
            type=version
            version = memcache.get(type)
            if not version:
                v = RouterVersions.get_by_key_name(type)
                if not v : 
                    logging.error('No version found in RouterModel for %s', type)
                    self.error(404)
                    return;

                version = v.version
                memcache.add(v.type, version) 
```

当我使用 memcache.add 或获取属性时，它会给出编译时错误“来自导入获取的未定义变量”。我不知道为什么会这样。我是 python 和谷歌应用引擎的新手。我的应用程序是在 python 2.5 中创建的，我现在使用的是 2.7。这是问题还是其他？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-20T05:00:37.630

您是否命名了一个文件 memcache.py？如果是这样，请删除它以及 memcache.pyc。

# mysql - Nagios NDOUtils 安装 - 无法加载 mysql.so 错误

> ID：10222123
> 
> 赞同：0
> 
> 时间：2012-04-19T05:23:34.147
> 
> 标签：mysql, linux, installation, nagios

嗨，我对 Linux 和 mysql 非常陌生......当我为 nagios 安装 ndoutils 时，我必须从 Db 文件夹执行这个命令---

```
./installdb -u root -p root -h localhost -d nagios 
```

在执行这个命令时我得到这个错误 -

> install_driver(mysql) 失败：无法为模块 DBD::mysql: libmysqlclient.so.16 加载“/usr/lib/perl5/auto/DBD/mysql/mysql.so”：无法打开共享对象文件：没有这样的文件或 /usr/lib/perl5/DynaLoader.pm 第 200 行的目录。在 (eval 7) 第 3 行编译在 (eval 7) 第 3 行的 require 中失败。可能所需的共享库或 dll 未安装在预期的位置。 /installdb 第 41 行

我应该怎么做才能消除这个错误？帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T01:45:49.307

看起来您需要为 perl 安装 DRD::mysql 。

[http://metacpan.org/pod/DBD::mysql](http://metacpan.org/pod/DBD::mysql)

# objective-c - 拆分键盘移动检测

> ID：10222124
> 
> 赞同：0
> 
> 时间：2012-04-19T05:23:37.533
> 
> 标签：objective-c, ios5, uikeyboard

我一直在玩 iPad 上的拆分键盘框架。

好吧，它似乎`UIKeyboardWillChangeFrame`是在显示或隐藏拆分键盘时触发的。

在停靠模式下，`UIKeyboardWillShow`会`UIKeyboardWillHide`触发通知。

在 NSNotification 对象中，我们能够检索键盘的框架，这对于停靠模式和拆分模式都是正确的。

**现在，当我们在屏幕上移动拆分键盘**时，真正的乐趣就开始了。每次我们在屏幕上移动键盘时，通知对象中的 endframe 都会出现（0,0,0,0）。`convertFrame`在我使用坐标将框架转换为`(0,-124,0,0)`. 这适用于向上或向下方向的键盘移动。

在所有其他情况下，endframe 似乎在框架上提供了正确的坐标。

这段代码给了我精确的点数。

`CGRect startFrame = [[[notif userInfo] objectForKey:UIKeyboardFrameBeginUserInfoKey] CGRectValue];`

`CGRect endFrame = [[[notif userInfo] objectForKey:UIKeyboardFrameEndUserInfoKey] CGRectValue];`

当用户在屏幕上移动拆分键盘时，此结束帧为 (0,0,0,0)。

现在根据当前视图获取准确坐标：

```
CGRect convertedStartFrame = [self.view.window convertRect:startFrame toView:self.view];

CGRect convertedEndFrame = [self.view.window convertRect:endFrame toView:self.view];

This convertedEndFrame = (0,-124,0,0) when endFrame = (0,0,0,0). 
```

还有一件事，我不是通过代码移动键盘。

我不太确定，这是 Apple 的一个已知错误，还是我遗漏了一些东西。

希望有人可以向我指出一些事情。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T09:24:11.347

我考虑了一下并写了[简单的要点示例](https://gist.github.com/bimawa/5963666)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T17:31:39.430

我不确定您是否仍然遇到此问题，但您缺少通知。当用户开始移动键盘时，`UIKeyboardWillChangeFrame`发送a。但是，此时通知无法为您提供结束帧，因为用户尚未停止移动键盘。当用户停止移动键盘时，`UIKeyboardDidChangeFrameNotification`会发出另一个通知： （至少在 5.1 上）。您应该能够在该通知中获得正确的结束帧。

# wcf - 从 WCF 跟踪日志中忽略某些 WCF 服务

> ID：10222127
> 
> 赞同：6
> 
> 时间：2012-04-19T05:24:31.573
> 
> 标签：wcf, wcf-client

我正在构建的应用程序公开了几个 WCF 服务（A、B）。在内部，它使用在我们的内部网络（X，Y）上运行的其他几个 WCF 服务。

使用 WCF 消息记录，我希望**只**记录我们的服务 A、B 和调用它们的外部客户端之间的流量。

WCF 不应记录我的服务 (A,B) 和后端服务 (X,Y) 之间的任何数据。

通过 system.serviceModel/diagnostics/messageLogging/filters 过滤部分成功：

```
 <filters>
      <add nodeQuota="10" xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
        /s:Envelope/s:Header/*[contains(text(),"MyServiceA")]
      </add>
      <add nodeQuota="10" xmlns:s="http://schemas.xmlsoap.org/soap/envelope/" xmlns:a="http://schemas.microsoft.com/ws/2005/05/addressing/none">
        /s:Envelope/s:Header/a:Action[contains(text(),"MyServiceA")]
      </add>
    </filters> 
```

然而，这无法捕获来自我们服务的响应，因为 SOAP*响应*不包含要过滤的文本。

WCF MessageLogTraceRecord*确实*包含 SOAP 操作，但我似乎无法构造一个过滤器来访问它：

```
<MessageLogTraceRecord>
  <Addressing xmlns="http://schemas.microsoft.com/2004/06/ServiceModel/Management/MessageTrace>
     <Action>http://opia.api.translink.com.au/ApiLocationService/2012/04/IApiLocationService/ResolveInputServiceFaultFault</Action>
  </Addressing>
  <s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
      <s:Body>
        ... 
```

启用 WCF 消息日志记录和端到端跟踪，所有选项都设置为 true。启用 ActivityTracing 和警告级别日志记录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T00:49:17.653

试试这个

```
<filters>
      <add nodeQuota="10" xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
        /s:Envelope/s:Header/*[contains(text(),"MyServiceA")]
      </add>
      <add nodeQuota="10" xmlns:s="http://schemas.xmlsoap.org/soap/envelope/" xmlns:a="http://schemas.microsoft.com/ws/2005/05/addressing/none">
        /s:Envelope/s:Header/a:Action[contains(text(),"http://opia.api.translink.com.au/ApiLocationService/2012/04/IApiLocationService/ResolveInputServiceFaultFault")]
      </add>
    </filters> 
```

将操作过滤器中的文本“MyServiceA”替换为 MessageLogTraceRecord > 操作中的 URL

# syntax - 为 prolog/haskell 编程考试而学习

> ID：10222132
> 
> 赞同：1
> 
> 时间：2012-04-19T05:24:54.267
> 
> 标签：syntax, prolog

我开始为即将到来的考试学习，但我被困在一个琐碎的序言练习题上，这不是一个好兆头哈哈。

这应该很容易，但由于某种原因，我现在无法弄清楚。

任务是简单地计算序言中 Int 列表中奇数的数量。我在haskell中很容易做到，但我的序言很糟糕。有人可以告诉我一个简单的方法来做到这一点，并简要解释你做了什么？

到目前为止，我有：

```
odd(X):- 1 is X mod 2.

countOdds([],0).
countOdds(X|Xs],Y):-
????? 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T06:45:50.387

你对奇数/1的定义很好。

空列表的事实也很好。

在递归子句中，您需要区分奇数和偶数。如果数字是奇数，则应增加计数器：

```
countOdds([X|Xs],Y1) :- odd(X), countOdds(Xs,Y), Y1 is Y+1. 
```

如果数字不是奇数（=偶数），则不应增加计数器。

```
countOdds([X|Xs],Y) :- \+ odd(X), countOdds(Xs,Y). 
```

其中`\+`表示否定为失败。

或者，您可以使用 ! 在第一个递归子句中并删除第二个中的条件：

```
countOdds([X|Xs],Y1) :- odd(X), !, countOdds(Xs,Y), Y1 is Y+1.

countOdds([X|Xs],Y) :- countOdds(Xs,Y). 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-19T07:12:47.087

在 Prolog 中，您使用递归来检查递归数据结构的元素，就像列表一样。模式匹配允许选择正确的规则来应用。完成任务的简单方法：

您有一个列表 = [X|Xs]，对于每个元素 X，如果是奇数 (X)，则返回 countOdds(Xs)+1，否则返回 countOdds(Xs)。

```
countOdds([], 0).
countOdds([X|Xs], C) :-
  odd(X),
  !, % this cut is required, as rightly evidenced by Alexander Serebrenik
  countOdds(Xs, Cs),
  C is Cs + 1.
countOdds([_|Xs], Cs) :-
  countOdds(Xs, Cs). 
```

注意`if`, 是用不同的规则和`same`模式处理的：当 Prolog 找到一个非奇数元素时，它会回溯到最后一条规则。

ISO Prolog 有语法糖`If Then Else`，你可以用它写

```
countOdds([], 0).
countOdds([X|Xs], C) :-
  countOdds(Xs, Cs),
  (  odd(X)
  -> C is Cs + 1
  ;  C is Cs
  ). 
```

在第一个版本中，递归调用在 test`odd(X)`之后，以避免在回溯时重复对 list'tail 的无用访问。

**edit** Without the cut, we get multiple execution path, and so possibly incorrect results under 'all solution' predicates (findall, setof, etc...)

This last version put in evidence that the procedure isn't `tail recursive`. To get a tail recursive procedure add an `accumulator`:

```
countOdds(L, C) :- countOdds(L, 0, C).

countOdds([], A, A).
countOdds([X|Xs], A, Cs) :-
  (  odd(X)
  -> A1 is A + 1
  ;  A1 is A
  ),
  countOdds(Xs, A1, Cs). 
```

# ios - 如何检查子视图是否为按钮

> ID：10222141
> 
> 赞同：7
> 
> 时间：2012-04-19T05:26:02.877
> 
> 标签：ios, objective-c, xcode, subview

我正在开发一个应用程序。在那里我得到了 UITableViewCell 的所有子视图。

这个的代码是：

```
 (void)listSubviewsOfView:(UIView *)view {

    // Get the subviews of the view
         NSArray *subviews = [view subviews];

    // Return if there are no subviews
    if ([subviews count] == 0) return;

    for (UIView *subview in subviews) {

        NSLog(@"%@", subview);

        // List the subviews of subview
        [self listSubviewsOfView:subview];
    }
} 
```

但我的问题是如何从该子视图列表中找出按钮。请告诉我如何解决这个问题。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-19T05:29:13.467

您可以像这样遍历所有子视图。

```
for (id subview in subviews) {
   if ([subview isKindOfClass:[UIButton class]]) {
      //do your code
   }
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2017-08-31T08:10:49.883

**迅速**

```
for subview in view.subviews {
    if subview is UIButton {
        // this is a button
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-19T14:16:49.917

检查子视图是否是带有`is AnyClass`或`isKind(of aClass: AnyClass)`isMember(of aClass: AnyClass) API 的按钮。

使用是-

```
for subview in self.view.subviews{
      if subview is UIButton{
            //do whatever you want
      }
} 
```

使用 isMember(of:)-

```
for subview in self.view.subviews{
     if subview.isMember(of: UIButton.self){
          //do whatever you want
     }
} 
```

使用 isKind(of:)-

```
for subview in self.view.subviews{
    if subview.isKind(of: UIButton.self){
        //do whatever you want
    }
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-05-14T22:58:14.270

扩展马丁答案的“做你的代码”部分。获得子视图后，我想测试它是否是正确的按钮，然后将其删除。我无法使用 subview.titleLabel 直接检查按钮的 titleLabel，因此我将子视图分配给 UIButton，然后检查按钮的 titleLabel。

```
- (void)removeCheckboxes {

    for ( id subview in self.parentView.subviews ) {
        if ( [subview isKindOfClass:[UIButton class]] ) {
            UIButton *checkboxButton = subview;
            if ( [checkboxButton.titleLabel.text isEqualToString:@"checkBoxR1C1"] )    [subview removeFromSuperview];
        }
    }

} 
```

# jquery - 使用 jQuery 将事件处理程序从一组元素复制到另一组元素

> ID：10222143
> 
> 赞同：5
> 
> 时间：2012-04-19T05:26:15.067
> 
> 标签：jquery

我有以下

```
 var $header = $('.inner th');
 var $fixedHeader = $(".header1 th");

    $header.each(function (index) {
          // i need to copy all events from $header[index] to $fixedHeader[index]
    }); 
```

如何将事件处理程序（onClick、onDblClick..etc）从第一组中的元素复制到第二组中的相邻元素？我是 jquery 的新手并且很难过。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T15:16:57.407

我知道这已经回答过几次了，但这里有一个基于之前解决方案的全包解决方案。

```
function copyEvents(source, destination) {
    var events;

    //copying from one to one or more
    source = $(source).first();
    destination = $(destination);

    //get all the events from the source
    events = $(source).data('events');
    if (!events) return;

    //make copies of all events for each destination
    destination.each(function() {
        var t = $(this);
        $.each(events, function(index, event) {
            $.each(event, function(i, v) {
                t.bind(v.type, v.handler);
            });
        });
    });
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T05:41:14.787

像这样的事情可能会有所帮助：

```
var header = $('.inner th');
var fixedHeader = $(".header1 th");

header.each(function (index) {

    var events = $(header).data("events"); //Gives you all events of an element

    $.each(events, function(i, event) { //Loop through all the events

     $.each(event, function(j, h) { //Loop through all the handlers attached for a event

      fixedHeader.bind(i, h.handler); //Bind the handler with the event 

     });

    });

}); 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-19T05:51:00.020

您需要使用 jquery 的[.data('events')](http://api.jquery.com/jQuery.data/)方法。

我提供了一个有效的 jsFiddle 来了解从哪里开始。

[http://jsfiddle.net/hx8gf/2/](http://jsfiddle.net/hx8gf/2/)

我知道 Alphamale 打败了我，但我仍然会发布它以防它有帮助。

*反正几乎一模一样……*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T05:51:30.387

jquery中的clone(true)函数不能复制事件处理，只能复制元素。如果要复制，就要添加事件绑定。你可以看看 JQUERY 的事件绑定。在回调函数中调用绑定函数。这可能会有所帮助。

# wordpress - wordpress get_posts 以 -1 numberposts 失败

> ID：10222144
> 
> 赞同：1
> 
> 时间：2012-04-19T05:26:17.500
> 
> 标签：wordpress

我有大约 60,000 条附件帖子的记录。PHP 在安全模式下运行，所以我不能使用 set_time_limit。

代码：

```
$args = array( 'post_type' => 'attachment', 'numberposts' => -1);
$attachments = get_posts( $args ); 
```

上面的代码给了我一个空白页，而我一直保持错误。直到 numberposts 为 4000 它工作得很好，但不是更多。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T05:48:07.890

发生这种情况的原因有两个。

*   PHP 脚本内存不足。检查 php.ini 文件中的 *memory_limit*。看看能不能增加。
*   脚本超时。在这种情况下，您必须更改 php.ini 文件中的 *max_execution_time*
*   **编辑**：也尝试添加检查 max_input_time 设置

如果由于某种原因您无法更改 php.ini 文件，请尝试批量检索帖子。

# javascript - 从 DOM 中删除元素并将它们添加回原来的位置

> ID：10222155
> 
> 赞同：6
> 
> 时间：2012-04-19T05:27:35.910
> 
> 标签：javascript, jquery

我有一个模态窗口。我想要发生的是在模式打开时从页面中删除某些元素，并在模式关闭后将它们添加回它们所在的位置。我不想显示：无，因为那只会隐藏它们，我需要将它们从页面中实际删除。所以我有一些 jQuery 来删除并在一个计时器之后重新添加它们，只是为了测试......

**更新：通过对代码的这些添加，它现在抓取之前的元素，然后将其添加回同一元素之后。问题是，如果该元素也被删除了怎么办？然后它不会重新添加！另外，javascript事件处理程序不会丢失吗？我正在开发一个插件，因此它应该尽可能少地干扰网站，但 3d 元素在 Safari 中存在无法解决的错误。**

**关于如何在不过多干扰人们网站的情况下暂时删除 3d 元素的任何想法？**

```
$3delements = $('*').filter(function(){return $(this).css('-webkit-transform-style') == 'preserve-3d'});
$3delementsposition = $3delements.prev()

//On modal open
$3delements.remove();

//On modal close
$3delementsposition.after($3delements); 
```

问题是这需要我在 DOM 中指定一个特定位置让它们返回。我希望元素返回它们所在的位置。如何确保元素不会将 .remove 上的信息更改/移动/丢失到 .append。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-19T08:02:37.030

1.  使用`.detach()`and`.append()`删除和重新附加元素，它将维护您的所有事件和数据。

2.  如果您以与删除元素相反的顺序添加元素，它们应该全部返回原位

* * *

未经测试的代码

* * *

```
var elems3d = $(...);
var elemsRemoved = [];

// removing
elems3d.each(function(i,o) {
   var elem = $(o);
   elemsRemoved.push({
       loc: elem.prev(),
       obj: elem.detach()
   });
});

// adding back
while (elemsRemoved.length) {
   var elem = elemsRemoved.pop();
   elem.loc.after(elem.obj);
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-19T06:03:00.003

不要删除元素，而是将它们替换为占位符元素（使用`replaceWith`），然后在需要时将占位符替换为原始内容。类似于以下内容：

```
$3delements = $('*').filter(function(){return $(this).css('-webkit-transform-style') == 'preserve-3d'});
var originals = [];
$3delements.each(function() {
  // Clone original, keeping event handlers and any children elements
  originals.push($(this).clone(true)); 
  // Create placeholder for original content
  $(this).replaceWith('<div id="original_' + originals.length + '"></div>');
});

///
/// Do something asynchronous 
///

// Replace placeholders with original content
for (var i in originals) {
 $('#original_' + (i + 1)).replaceWith(originals[i]);
} 
```

有关更多信息，请参阅jQuery 文档[`clone`](http://api.jquery.com/clone/)和[`replaceWith`](http://api.jquery.com/replaceWith/)。

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2012-04-19T06:12:18.537

我创造了小提琴。让我知道这是否满足您的要求。

[http://jsfiddle.net/mNsfL/12/](http://jsfiddle.net/mNsfL/12/)

# java - 最终变量

> ID：10222163
> 
> 赞同：0
> 
> 时间：2012-04-19T05:28:23.117
> 
> 标签：java, final, pmd

> **可能重复：**
> [为什么在 Java 中将局部变量和方法参数标记为“final”？](https://stackoverflow.com/questions/316352/why-would-one-mark-local-variables-and-method-parameters-as-final-in-java)

我在我的代码中使用了 PMD，它总是告诉我将方法局部变量设为 final。有人能告诉我，除了使代码更具可读性之外，这对总体性能有何影响。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T05:33:43.493

对性能没有影响，它是否更具可读性还有待商榷。默认情况下，Java 应该将变量设置为 final。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T06:24:48.660

最大的价值`final`在于它可以防止编程错误。关于性能，我认为编译器可以在大多数情况下找出最后一次写入变量并进行必要的优化。

# java - JUnit 4 @Test 注释将测试名称报告为“未知”

> ID：10222164
> 
> 赞同：4
> 
> 时间：2012-04-19T05:28:30.037
> 
> 标签：java, ant, junit, junit4

使用 JUnit 4，我的用任务调用 junit 的 ant 构建脚本总是将测试类名称报告为“未知”。有没有一种不涉及从 TestCase 派生的方法来解决这个问题？

我用 @Test 注释声明我的测试方法，例如：

SomeTest.java：

```
public class SomeTest {
    @Test
    public void doSomething() { .. }
} 
```

并将它们收集到一个 TestSuite 中：

AllTests.java：

```
@RunWith(Suite.class)
@Suite.SuiteClasses( {
    SomeTest.class
})
public class AllTests {
} 
```

然后我通过 NetBeans 调用 ant 任务，它对打印 JUnit 运行的结果提供了很好的集成支持。除了测试名称总是“未知”之外，一切似乎都找到了，例如：

```
6 tests passed, 2 tests failed, 2 tests caused an error (8.4s)
com.mystuff.AllTests FAILED
    Unknown passed (0.0s)
    Unknown passed (0.0s)
    Unknown passed (0.0s)
    Unknown passed (0.0s)
    Unknown passed (0.0s)
    Unknown passed (0.0s)
    Unknown FAILED (0.0s)
    Unknown caused an ERROR: at org.hibernate.somethingorother.java:1234 (0.0s)
    ..etc.. 
```

测试运行正常，我通常可以从记录的堆栈跟踪中找出故障点，但是报告为“未知”的所有内容都令人讨厌和迟钝。

在阅读了一些 SO 帖子后，我发现有两种设置测试的方法，从 TestCase 派生的旧 JUnit 3 方法，以及使用 @Test 注释的新 Junit 4 方法。

[当我的测试在 Eclipse 中扩展 TestCase(Junit) 时，无法使用 @Test 注释执行测试](https://stackoverflow.com/questions/1661623/not-able-to-execute-tests-with-test-annotation-when-my-test-extends-testcaseju)

[JUnit 混淆：使用“扩展 TestCase”或“@Test”？](https://stackoverflow.com/questions/2635839/junit-confusion-use-extend-testcase-or-test)

这篇文章提到“在JUnit 4中，测试类不再扩展通用框架类。所以不再有继承方法getName” [如何在运行时获取JUnit 4中的测试用例名称？](https://stackoverflow.com/questions/1069456/how-to-obtain-test-case-name-in-junit-4-at-runtime)

我尝试从 TestCase 扩展我的测试用例，这确实使名称被正确报告，但是这个单一的更改搞砸了它的一些生命周期，并且测试以奇怪的方式失败了。我的理解是，当 JUnit 运行器看到您的测试类派生自 TestCase 时，它​​会将其作为 JUnit 3 测试用例运行，因此会忽略我的所有 @Before、@After 等注释。我看不出回到 JUnit 3 测试机制有什么意义。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-19T05:39:30.297

好吧，这很尴尬，但值得一提。我想我只是回答了我自己的问题。

答案似乎是任务属性之一，`enableTestListenerEvents`在这里描述：http: [//ant.apache.org/manual/Tasks/junit.html](http://ant.apache.org/manual/Tasks/junit.html)

我忽略了它，因为文档说“因为 Ant 1.8.2 - Ant 1.7.0 到 1.8.1 的行为就好像这个属性默认为真。” 我正在运行 1.8.2，但我误读了它，它实际上是说在 1.8.2 中默认情况下它是关闭的。

所以解决方法是在 build.xml 中更改我的任务：

```
<junit haltonfailure="true" printsummary="on" fork="yes" dir="."> 
```

到

```
<junit haltonfailure="true" printsummary="on" fork="yes" dir="."
    enableTestListenerEvents="true"> 
```

随着测试的进行，NetBeans 现在会在“测试结果”窗格中打印最新信息，包括测试名称。整个反馈体验要丰富得多。告诉你的朋友 ：）

# android - 如何取消选中android中的单选按钮

> ID：10222166
> 
> 赞同：3
> 
> 时间：2012-04-19T05:29:00.820
> 
> 标签：android, radio-button

我正在开发一个基于测验的应用程序。当用户打开此应用程序时，将有 1 个任务和 4 个选择（单选按钮）单选按钮将被取消选中，但当用户回答 1 个任务并且当他进行下一个任务单选按钮时，将出现问题。我想取消选中/重置每个任务的单选按钮。我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T05:42:20.127

我假设您正在使用自定义列表或其他东西来制作您想要的视图，在此 c 中，如果用户通过选择 RadioButton 给出了答案，则您需要保存每个问题答案的位置，然后将其保存在 Some Like 中`ArrayList`。例如下一个尚未给出答案的问题，您可以为下一个问题设置 -1 标志。

下面是我使用的代码示例。

```
 if (childData == -1) {
            mchildHolder.mRadioPass.setChecked(false);
            mchildHolder.mRadioCorrect.setChecked(false);
            mchildHolder.mRadioFail.setChecked(false);
            mchildHolder.mRadioNa.setChecked(false);

        } else if (childData == 0) {
            mchildHolder.mRadioPass.setChecked(true);
            mchildHolder.mRadioCorrect.setChecked(false);
            mchildHolder.mRadioFail.setChecked(false);
            mchildHolder.mRadioNa.setChecked(false);
        } else if (childData == 1) {
            mchildHolder.mRadioPass.setChecked(false);
            mchildHolder.mRadioCorrect.setChecked(true);
            mchildHolder.mRadioFail.setChecked(false);
            mchildHolder.mRadioNa.setChecked(false);
        } else if (childData == 2) {
            mchildHolder.mRadioPass.setChecked(false);
            mchildHolder.mRadioCorrect.setChecked(false);
            mchildHolder.mRadioFail.setChecked(true);
            mchildHolder.mRadioNa.setChecked(false);
        } else if (childData == 3) {
            mchildHolder.mRadioOn.setChecked(false);
            mchildHolder.mRadioOff.setChecked(false);
            mchildHolder.mRadioFail.setChecked(false);
            mchildHolder.mRadioNa.setChecked(true);
        } 
```

上面的代码是可以实现你想要的东西的例子。如果您有疑问，请告诉我。

# iphone - iPhone：ios 5 json 教程

> ID：10222167
> 
> 赞同：4
> 
> 时间：2012-04-19T05:29:06.623
> 
> 标签：iphone, json, ios5

我是第一次在我的应用程序中实现 json。

在我的应用程序中，我必须**将参数**从我的应用程序传递到 web 服务，据此我可以从 web 服务获得响应，但我无法找到任何可以在**ios5中从我的应用程序传递参数的教程**

那么网上有没有任何教程可以从中获得对我有用的教程。

我试图用谷歌找到，但我没有成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T05:37:35.963

按照以下步骤将 json 集成到我们的项目中。

1）将以下文件复制粘贴到您的项目中。

2) 创建新的组名作为包含以下文件的帮助。

3) 将新文件创建到 Support Files 中，名称为 constant.h

```
#define WEB_SERVICE_URL @"Your server url" //@"http://demo.google.com/webservice/"

#define USERNAME @"Your user id"//static username to send everytime
#define PASSWORD @"Your Password"//static password to send everytime 
```

4）更改上面的变量链接，您的网络服务存在于哪里，这意味着您的网络服务的网址“WEB_SERVICE_URL”</p>

5) 打开“Rest.h”文件并创建一个方法。

```
-(void)Get_StoreDetails:(SEL)seletor andHandler:(NSObject*)handler andCountryId:(NSString *)CountryCode; 
```

6) 打开“Rest.m”文件以及将哪个参数传递给服务器该方法的代码。

```
-(void)Get_StoreDetails:(SEL)seletor andHandler:(NSObject *)handler andCountryId:(NSString *)country_id{
    NSDictionary *req = [NSDictionary dictionaryWithObjectsAndKeys:@"content/get_stores",@"request",
                         [NSDictionary dictionaryWithObjectsAndKeys:USERNAME,@"username",
                          PASSWORD,@"password",
                          country_id,@"country_id",
                          nil],@"para",nil];
    [[[JSONParser alloc] initWithRequest:req sel:seletor andHandler:handler] autorelease];

} 
```

7) 现在 Rest 应用程序已准备好发送请求，然后这个方法调用到我们的视图控制器。

以下代码放入 .h 文件中的“viewWillAppear”方法中

```
#import <UIKit/UIKit.h>

@interface JsonDemoAppViewController : UIViewController{
    UIAlertView *alertCtr;
}

@property(nonatomic,retain)NSMutableArray *arrForStores;
- (void)getData:(id)object;
@end 
```

以下代码放入 .m 文件中的“viewWillAppear”方法并导入“Rest.h”。

```
- (void)viewWillAppear:(BOOL)animated {
    self.arrForStores=nil;
    //============================Json Initialization===================================================
    REST *rest = [[REST alloc] init];
    [UIApplication sharedApplication].networkActivityIndicatorVisible = YES;
    [rest Get_StoreDetails:@selector(getData:) andHandler:self andCountryId:@"12"];

    alertCtr = [[[UIAlertView alloc] initWithTitle:@"\nPlease Wait..." message:nil delegate:self cancelButtonTitle:nil otherButtonTitles: nil] autorelease];
    [alertCtr show];

    UIActivityIndicatorView *indicator = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];

    // Adjust the indicator so it is up a few pixels from the bottom of the alert
    indicator.center = CGPointMake(alertCtr.bounds.size.width / 2, alertCtr.bounds.size.height - 50);
    [indicator startAnimating];
    [alertCtr addSubview:indicator];
    [indicator release];
    //===================================================================================================

} 
```

然后回复进入服务器，时间对象存储到我们创建调用的方法的时间变量中。

```
- (void)getData:(id)object{
    NSLog(@"%@",object);
    if ([object isKindOfClass:[NSDictionary class]]) {
        NSLog(@"Controll comes here..");
        //IF your response type is NSDictionary then this code to run
    }

    if ([object isKindOfClass:[NSArray class]])
    {
        self.arrForStores=[NSArray arrayWithArray:(NSArray*)object];
        //IF your response type is NSArray then this code to run
    }

    [[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:NO];
    [alertCtr dismissWithClickedButtonIndex:0 animated:YES];

} 
```

[从这里下载源代码](http://sourceforge.net/projects/nimitparekh/files/JSON%20parsing%20Demo/JsonDemoApp.zip/download)

# javascript - Dropbox 的着陆页下载流程如何运作得如此出色？

> ID：10222170
> 
> 赞同：2
> 
> 时间：2012-04-19T05:29:27.297
> 
> 标签：javascript, redirect, download, installation

在 Dropbox 的主页 (http://www.dropbox.com) 上，当用户单击下载按钮时，它会启动 1) 用户浏览器的正确安装程序*和*2) 将它们重定向到相应的安装说明页面*，而不会*被标记主要浏览器作为弹出窗口。

我尝试使用以下代码用 Javascript 实现他们的方法：

```
<a href="http://downloadlink.exe"     onClick="window.open('http://InstallInstructionsURL.com');"> 
```

但是各种浏览器会阻止它并将其标记为弹出窗口。而且它只捕获了问题的一部分（而不是将用户重定向到适当的浏览器和安装说明页面的部分）。

Dropbox 的主页效果很好。但我很难弄清楚他们做了什么，以及如何自己做。

作为仍在为桌面/浏览器开发下载应用程序的软件开发人员，我非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T15:31:51.073

其实神奇的不在按钮上，只是普通的[链接](https://www.dropbox.com/downloading?src=index)，但是有那个链接的页面真的有一个开始下载的小技巧：

```
<div id="page-content">
  <script type="text/javascript">
    Event.observe(window, 'load', function() {
     if (!Prototype.Browser.IE) {
        window.location = '\x2fdownload\x3fplat\x3dwin';
     }
    });
</script> 
```

在这里，加载事件侦听器被注册为更改的函数`window.location`。这是 javascript 重定向的常用方法（[更多详细信息](http://davidwalsh.name/javascript-window-location)），但就响应内容而言`application/octet-stream`，当前页面没有发生任何事情，并且显示标准保存窗口。

# javascript - 检测网站是否通过像 Opera Mini 这样的代理服务器提供服务？

> ID：10222172
> 
> 赞同：2
> 
> 时间：2012-04-19T05:29:31.987
> 
> 标签：javascript, mobile, proxy, amazon-ec2, opera

许多功能手机使用[Opera Mini](http://www.opera.com/mobile/help/faq/)来[提供](https://stackoverflow.com/a/10249255/770127)网页服务。同样 Kindle Fire 使用[Amazon Silk](http://en.wikipedia.org/wiki/Amazon_Silk)。JavaScript 中有没有一种方法可以在没有 UA 检测的情况下检测正在使用的代理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T08:27:51.087

在 Opera Mini 的情况下：不。JavaScript 实际上将由“代理服务器”执行，而不是由真正的客户端执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T17:53:53.180

我的假设是这种基于云的浏览器不能支持事件的子集。为了检测此类浏览器，我使用了一个 javascript 测试来检查对事件的支持`scroll`。

```
var cloudBrowser = ('onscroll' in window?false:true); 
```

我能够在我的安卓（三星 Galaxy Note 2）和诺基亚 C2-03 浏览器上的 Opera mini 上成功地找到它。（因为我没有设备，所以我无法为 Amazon Silk 检查这个）。

如果您知道我可以下载和扩展测试的任何其他适用于 Android 的云浏览器，请告诉我。

# python - 在 Flask 中获取信息并发布表单

> ID：10222176
> 
> 赞同：2
> 
> 时间：2012-04-19T05:29:55.710
> 
> 标签：python, google-app-engine, flask, wtforms

我正在尝试创建一个列出有关实体的所有信息的页面，然后允许用户添加有关实体的注释。我在 Google App Engine 上使用 Flask（使用由 Kamal Gill 编写的样板文件）。

我的问题分为两部分：a）如何查询有关实体的信息，然后使用表单发布信息？b）如何将实体信息传递给表单，以便编辑实体？

这是我所拥有的：

```
#model.py
class Providers(db.Model):
    """Provider Information DB"""
    pAgency = db.StringProperty()
    pSite = db.StringProperty()
    programName = db.StringProperty()
    pNotes = db.TextProperty()

#forms.py
class ProviderForm(wtf.Form):
    providerName = wtf.TextField()
    providerNote = wtf.TextAreaField('Add notes', validators=[validators.Required()]) 
```

在views.py中

```
def list_addresses(agency):
  addrs = []
  addresses = db.Query(Providers).filter('pAgency =', agency).order('pAddress')
  for addr in addresses:
     addrs.append((addr.pAddress, addr.programName))
  return addrs

def add_notes(agency):
  form = ProviderForm()
  if form.validate_on_submit():
     notes = ProviderNotes(
             pNotes = form.providerNote.data)
     try:
       notes.put()
       return 'Worked'
     except:
       return redirect(url_for('list_provs'))
  return render_template('provider_notes.html', form=form, addrs=list_addresses(agency)) 
```

网址规则：

```
# Add notes
app.add_url_rule('/providers/<agency>', 'add_notes', view_func=views.add_notes, methods=['GET', 'POST']) 
```

我现在拥有的 HTML 是这样的：

```
<ul>
 <h1 id="">Provider Information</h1>
     {% for address in addrs %}
     <p>{{address}}</p>
        {% for prog in programs %}
          {% if prog != '' %}
           <li>{{prog}}</li>
          {% endif %}
        {% endfor %}
     <p>&nbsp;</p>
     {% endfor %}
</ul>
<form method="post" action="{{ url_for('list_addresses') }}">
{% for field in form %}
        <p>{{ field.label }}</p>
        <p>{{ field }}</p>
{% endfor %}
    <p>
        <button type="submit">Save notes</button>
    <a href="{{ url_for('list_provs') }}">Cancel</a>
    </p>
</form> 
```

这会导致回溯错误：

```
Traceback (most recent call last):
File ".../src/packages/flaskext/gae_mini_profiler/profiler.py", line 303, in __call__
  result = self.app(environ, start_response)
File ".../src/packages/flask.zip/flask/app.py", line 1506, in wsgi_app
File ".../src/packages/flask.zip/flask/app.py", line 1504, in wsgi_app
File ".../src/packages/flask.zip/flask/app.py", line 1264, in full_dispatch_request
File ".../src/packages/flask.zip/flask/app.py", line 1262, in full_dispatch_request
File ".../src/packages/flask.zip/flask/app.py", line 1248, in dispatch_request
File ".../src/application/views.py", line 55, in add_notes
  return render_template('provider_notes.html', form=form, addrs=list_addresses(agency))
File ".../src/packages/flask.zip/flask/templating.py", line 123, in render_template
File ".../src/packages/flask.zip/flask/templating.py", line 107, in _render
File ".../src/packages/jinja2.zip/jinja2/environment.py", line 891, in render
File ".../src/application/templates/provider_notes.html", line 1, in top-level template code
  <form method="post" action="{{ url_for('add_notes') }}">
  BuildError: ('add_notes', {}, None) 
```

仅当为 add_notes() 提供参数时才会发生此错误。

我是 python 的初学者，所以我可能错过了一些非常明显的东西。我知道该错误源于尝试在 GET 上下文中创建表单，但我不确定如何解决该问题。而且我不知道如何开始解决我的两个大问题。

谢谢，如果我应该进一步澄清一些事情，请告诉我！

**编辑：**我一直在看[这个关于 routing](https://stackoverflow.com/questions/8735603/url-structure-and-form-posts-with-flask)的问题，但并没有真正理解它是否适​​用于我需要做的事情。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-19T17:03:13.253

您必须在构建 url 时将代理参数传递给 add_notes 视图：

```
<form method="post" action="{{ url_for('add_notes',agency='something') }}"> 
```

# python - 在 Lion 上安装 MySQLdb 时遇到困难 - 导入找不到模块

> ID：10222185
> 
> 赞同：1
> 
> 时间：2012-04-19T05:30:50.847
> 
> 标签：python, mysql, mysql-python

我很难让 MySQLdb 工作：

*   OSX 10.7.3
*   Python 2.7.1（64 位）
*   MySQL 5.1.62-osx10.6-x86_64
    *   Ver 14.14 Distrib 5.1.62，适用于使用 readline 5.1 的 apple-darwin10.3.0 (i386)（这有冲突吗？我在安装 64 之前有一个 32 位版本）
*   MySQL数据库 1.2.3
*   安装工具

我需要 MySQL 5.1 以符合我正在使用的网站。

当我在 python 中“导入 mysqldb”时，我得到“没有名为 mysqldb 的模块”。

谢谢你的协助！让我知道我应该尝试什么。

* * *

python路径包括

```
'/Library/Python/2.7/site-packages/MySQL_python-1.2.3-py2.7-macosx-10.7-intel.egg' 
```

并且 sudo python setup.py install 有

```
running install
running bdist_egg
running egg_info
writing MySQL_python.egg-info/PKG-INFO
writing top-level names to MySQL_python.egg-info/top_level.txt
writing dependency_links to MySQL_python.egg-info/dependency_links.txt
reading manifest file 'MySQL_python.egg-info/SOURCES.txt'
reading manifest template 'MANIFEST.in'
warning: no files found matching 'MANIFEST'
warning: no files found matching 'ChangeLog'
warning: no files found matching 'GPL'
writing manifest file 'MySQL_python.egg-info/SOURCES.txt'
installing library code to build/bdist.macosx-10.7-intel/egg
running install_lib
running build_py
copying MySQLdb/release.py -> build/lib.macosx-10.7-intel-2.7/MySQLdb
running build_ext
creating build/bdist.macosx-10.7-intel/egg
copying build/lib.macosx-10.7-intel-2.7/_mysql.so -> build/bdist.macosx-10.7-intel/egg
copying build/lib.macosx-10.7-intel-2.7/_mysql_exceptions.py -> build/bdist.macosx-10.7-intel/egg
creating build/bdist.macosx-10.7-intel/egg/MySQLdb
copying build/lib.macosx-10.7-intel-2.7/MySQLdb/__init__.py -> build/bdist.macosx-10.7-intel/egg/MySQLdb
copying build/lib.macosx-10.7-intel-2.7/MySQLdb/connections.py -> build/bdist.macosx-10.7-intel/egg/MySQLdb
creating build/bdist.macosx-10.7-intel/egg/MySQLdb/constants
copying build/lib.macosx-10.7-intel-2.7/MySQLdb/constants/__init__.py -> build/bdist.macosx-10.7-intel/egg/MySQLdb/constants
copying build/lib.macosx-10.7-intel-2.7/MySQLdb/constants/CLIENT.py -> build/bdist.macosx-10.7-intel/egg/MySQLdb/constants
copying build/lib.macosx-10.7-intel-2.7/MySQLdb/constants/CR.py -> build/bdist.macosx-10.7-intel/egg/MySQLdb/constants
copying build/lib.macosx-10.7-intel-2.7/MySQLdb/constants/ER.py -> build/bdist.macosx-10.7-intel/egg/MySQLdb/constants
copying build/lib.macosx-10.7-intel-2.7/MySQLdb/constants/FIELD_TYPE.py -> build/bdist.macosx-10.7-intel/egg/MySQLdb/constants
copying build/lib.macosx-10.7-intel-2.7/MySQLdb/constants/FLAG.py -> build/bdist.macosx-10.7-intel/egg/MySQLdb/constants
copying build/lib.macosx-10.7-intel-2.7/MySQLdb/constants/REFRESH.py -> build/bdist.macosx-10.7-intel/egg/MySQLdb/constants
copying build/lib.macosx-10.7-intel-2.7/MySQLdb/converters.py -> build/bdist.macosx-10.7-intel/egg/MySQLdb
copying build/lib.macosx-10.7-intel-2.7/MySQLdb/cursors.py -> build/bdist.macosx-10.7-intel/egg/MySQLdb
copying build/lib.macosx-10.7-intel-2.7/MySQLdb/release.py -> build/bdist.macosx-10.7-intel/egg/MySQLdb
copying build/lib.macosx-10.7-intel-2.7/MySQLdb/times.py -> build/bdist.macosx-10.7-intel/egg/MySQLdb
byte-compiling build/bdist.macosx-10.7-intel/egg/_mysql_exceptions.py to _mysql_exceptions.pyc
byte-compiling build/bdist.macosx-10.7-intel/egg/MySQLdb/__init__.py to __init__.pyc
byte-compiling build/bdist.macosx-10.7-intel/egg/MySQLdb/connections.py to connections.pyc
byte-compiling build/bdist.macosx-10.7-intel/egg/MySQLdb/constants/__init__.py to __init__.pyc
byte-compiling build/bdist.macosx-10.7-intel/egg/MySQLdb/constants/CLIENT.py to CLIENT.pyc
byte-compiling build/bdist.macosx-10.7-intel/egg/MySQLdb/constants/CR.py to CR.pyc
byte-compiling build/bdist.macosx-10.7-intel/egg/MySQLdb/constants/ER.py to ER.pyc
byte-compiling build/bdist.macosx-10.7-intel/egg/MySQLdb/constants/FIELD_TYPE.py to FIELD_TYPE.pyc
byte-compiling build/bdist.macosx-10.7-intel/egg/MySQLdb/constants/FLAG.py to FLAG.pyc
byte-compiling build/bdist.macosx-10.7-intel/egg/MySQLdb/constants/REFRESH.py to REFRESH.pyc
byte-compiling build/bdist.macosx-10.7-intel/egg/MySQLdb/converters.py to converters.pyc
byte-compiling build/bdist.macosx-10.7-intel/egg/MySQLdb/cursors.py to cursors.pyc
byte-compiling build/bdist.macosx-10.7-intel/egg/MySQLdb/release.py to release.pyc
byte-compiling build/bdist.macosx-10.7-intel/egg/MySQLdb/times.py to times.pyc
creating stub loader for _mysql.so
byte-compiling build/bdist.macosx-10.7-intel/egg/_mysql.py to _mysql.pyc
creating build/bdist.macosx-10.7-intel/egg/EGG-INFO
copying MySQL_python.egg-info/PKG-INFO -> build/bdist.macosx-10.7-intel/egg/EGG-INFO
copying MySQL_python.egg-info/SOURCES.txt -> build/bdist.macosx-10.7-intel/egg/EGG-INFO
copying MySQL_python.egg-info/dependency_links.txt -> build/bdist.macosx-10.7-intel/egg/EGG-INFO
copying MySQL_python.egg-info/top_level.txt -> build/bdist.macosx-10.7-intel/egg/EGG-INFO
writing build/bdist.macosx-10.7-intel/egg/EGG-INFO/native_libs.txt
zip_safe flag not set; analyzing archive contents...
creating 'dist/MySQL_python-1.2.3-py2.7-macosx-10.7-intel.egg' and adding 'build/bdist.macosx-10.7-intel/egg' to it
removing 'build/bdist.macosx-10.7-intel/egg' (and everything under it)
Processing MySQL_python-1.2.3-py2.7-macosx-10.7-intel.egg
Removing /Library/Python/2.7/site-packages/MySQL_python-1.2.3-py2.7-macosx-10.7-intel.egg
Copying MySQL_python-1.2.3-py2.7-macosx-10.7-intel.egg to /Library/Python/2.7/site-packages
MySQL-python 1.2.3 is already the active version in easy-install.pth

Installed /Library/Python/2.7/site-packages/MySQL_python-1.2.3-py2.7-macosx-10.7-intel.egg
Processing dependencies for MySQL-python==1.2.3
Finished processing dependencies for MySQL-python==1.2.3 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T05:31:59.473

试试`import MySQLdb`；导入是区分大小写的，并且这个模块的大小写很简单。

# zend-framework - 通过从远程 android 设备提交用户凭据来进行 zend 用户身份验证

> ID：10222188
> 
> 赞同：0
> 
> 时间：2012-04-19T05:31:34.997
> 
> 标签：zend-framework, zend-auth

我们为安卓设备开发了一个网站，在线杂志商店，还有一个安卓应用程序可以将网站加载为网页视图。每个设备都有一个用户名、密码和一个设备 ID，它们在加载 Web 视图期间作为帖子发送。

我的要求是：

*   仅当从 android 设备提供（发布）的登录凭据有效时，该站点才应加载。

我应该在哪里检查证书的有效性？我的意思是我应该写一个插件还是检查是否必须在引导程序中完成。我不需要任何基于组的访问控制，所有用户都具有相同的权限。

请展示一些带有必要代码的示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T06:34:36.900

我的建议是使用 Action Helper 来检查您的 $POST 变量并根据需要重定向/阻止用户。

[编写自己的动作助手](http://framework.zend.com/manual/en/zend.controller.actionhelpers.html#zend.controller.actionhelper.writingyourown)并不难，一旦你尝试过，你将无法停止！[Matthew Weier O'Phinney 写了一篇很棒的博文](http://mwop.net/blog/246-Using-Action-Helpers-To-Implement-Re-Usable-Widgets.html)，对您也很有用。

# php - 拉斐尔的标记点

> ID：10222189
> 
> 赞同：0
> 
> 时间：2012-04-19T05:31:42.397
> 
> 标签：php, jquery, raphael

所以目前我已经设置了一条有效地创建图表的路径。我现在需要做的就是在路径上的点上创建悬停效果以显示点的值。我该怎么做呢？

****编辑****

我想知道如何将标记添加到连续路径上的点？目前我正在循环 PHP 并连接一个具有更多坐标的变量，如下所示：

```
$line .= ' l '.$x.' '.$y; 
```

接着

```
echo 'var line = paper.path("M 0 100 '.$line.'")'; 
```

看到我使用“l”值作为路径的相对添加，我将如何为每个点添加标记？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T18:10:10.780

如果你只是想在一个点（圆圈）上方显示一些信息，你只需要在圆圈的悬停事件中创建一个文本元素并显示它。像[这样](http://jsfiddle.net/MpQW9/2/)的东西。

**编辑**

如果您的 x/y 值与前一点相关，则应累积从 0 开始的值。

我不知道究竟是如何用 PHP 编写的，但是是这样的：

```
var $absoluteX = 0;
var $absoluteY = 0;
for(...) { 
  $line .= ' l '.$x.' '.$y; 
  echo 'var line = paper.path("M 0 100 '.$line.'")'; 

  $absoluteX += $x; // add the relative change to the previous x value
  $absoluteY += $y;
  echo 'var circle = paper.circle($absoluteX, $absoluteY, 5)'; 
} 
```

# c++ - 是否有一个开源框架来绘制 PNG 的补充？应该使用 Xcode

> ID：10222195
> 
> 赞同：0
> 
> 时间：2012-04-19T05:32:12.110
> 
> 标签：c++, ios, c, xcode, image-processing

这是要求：

1.  输入是一个PNG A和一个PNG B，输出应该是PNG A减去PNG B（在PNG A上挖一个带有PNG B形状的洞）。我认为这应该是一个平局补充行动，我需要一些库或框架来做到这一点。

2.  该框架应与 Xcode 一起使用，也可以用于各种植物形式（MAC/iOS/Win...等）。所以我认为应该用C/C++来实现。

3.  任何示例或代码都应该是我的问题的主要优点......我真的不知道该怎么做:(

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T06:25:29.953

你可以试试这段代码：

```
UIImage *imgA = [UIImage imageNamed:@"pngA.png"];
UIImage *imgB = [UIImage imageNamed:@"pngB.png"];

UIGraphicsBeginImageContextWithOptions(imgA.size, NO, imgA.scale);
[imgA drawAtPoint:CGPointZero];
[imgB drawAtPoint:CGPointZero blendMode:kCGBlendModeDestinationOut alpha:1.0f];
UIImage *resultImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T10:10:22.787

您可以使用掩码来执行此操作。[http://iosdevelopertips.com/cocoa/how-to-mask-an-image.html](http://iosdevelopertips.com/cocoa/how-to-mask-an-image.html)

试试下面的代码：

```
- (UIImage*) maskImage:(UIImage *)image withMask:(UIImage *)maskImage {
    CGImageRef maskRef = maskImage.CGImage; 

    CGImageRef mask = CGImageMaskCreate(CGImageGetWidth(maskRef),
    CGImageGetHeight(maskRef),
    CGImageGetBitsPerComponent(maskRef),
    CGImageGetBitsPerPixel(maskRef),
    CGImageGetBytesPerRow(maskRef),
    CGImageGetDataProvider(maskRef), NULL, false);

    CGImageRef masked = CGImageCreateWithMask([image CGImage], mask);
    return [UIImage imageWithCGImage:masked];
} 
```

# apache-pig - 分析猪查询

> ID：10222197
> 
> 赞同：1
> 
> 时间：2012-04-19T05:32:21.330
> 
> 标签：apache-pig

我正在尝试分析一个猪查询，但到目前为止还没有任何有用的东西。

我正在尝试测量 CPU、磁盘 I/O、RAM 使用情况。

有人可以指导我吗？

**到目前为止尝试的事情**

Starfish - 适用于 Hadoop 作业但不适用于 Pig - 不支持 pig 查询

Hprof - 适用于 Hadoop 作业，但不适用于 Pig 查询。- 仅为 Hadoop 作业生成配置文件

Hadoop 和 pig 作业都在同一个集群中执行。

谢谢阅读 ！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T08:08:20.487

您可以使用 JXInsight/Opus（免费）获取一些延迟数据，并在执行查询之前标记或标记集群，然后在作业完成后拍摄快照。

[http://www.jinspired.com/site/jxinsight-opus-1-0](http://www.jinspired.com/site/jxinsight-opus-1-0)

我们将推出适用于各种大数据平台（包括 Cassandra、Hadoop、Pig 等）的 JXInsight/Opus for X 版本。

如果您需要更多功率和更多仪表（cpu、io、...），您可以随时查看 JXInsight/OpenCore 产品。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T03:18:45.563

您可以在 pig 生成的 MR 作业上使用 hprof 或其他分析工具。见[https://cwiki.apache.org/confluence/display/PIG/HowToProfile](https://cwiki.apache.org/confluence/display/PIG/HowToProfile)

# internet-explorer-8 - KnockoutJS 模板在 IE8 中不起作用，出现绑定错误

> ID：10222200
> 
> 赞同：1
> 
> 时间：2012-04-19T05:33:03.840
> 
> 标签：internet-explorer-8, knockout.js

我有以下 KnockoutJS 2.0 代码，在所有现代浏览器中都可以正常工作，但在 IE8 上失败。

这是简化的代码：

```
<table>
   <tr>
       <td data-bind="template: { foreach: fooItems, name: 'foo-template' }></td>
       <td data-bind="template: { foreach: barItems, name: 'foo-template' }></td>
   </tr>
</table>

<script id="foo-template" type="text/html">
   <div data-bind="click: SomeMethod">
       foobar
   </div>
</script>

<script type="text/javascript">

   var viewModel = {
       fooItems: ko.observableArray(),
       barItems: ko.observableArray(),
   }
   ko.applyBindings(viewModel);

</script> 
```

这在 IE9、Chrome、Firefox 上运行良好。

但是，在 IE8 上，我收到以下错误：

> “无法解析绑定。SomeMethod 未定义。”

在 IE8 中调试它，我看到以下信息：

![在此处输入图像描述](../Images/99d8d1016bc5676a938fef0bf2273f16.png)

它即将抛出异常，并且在 foo 模板的渲染过程中到来。

**注意 $data 是未定义的。**这就是 SomeMethod 无法解决的原因；它应该存在于 $data.SomeMethod 上，但 $data 未定义。

为什么这在 IE8 上失败了？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-07T20:50:59.623

我遇到了完全相同的问题，并且很失望地看到您在不知道如何解决问题的情况下解决了您的问题。

所以，对于未来的访客，我是这样解决这个问题的：

我已经用硬编码数组初始化了 foreach 中使用的数组，以尾随昏迷结尾。

在您的示例中，这看起来像这样：

```
viewModel.fooItems([
    {SomeMethod: function () {}},
    {SomeMethod: function () {}},   // <- here is the evil coma
]); 
```

仔细观察，ie8 将此数组评估为 3 项数组，其最后一项未定义。因此未定义的 $data。

当然，有相同的症状并不意味着你的问题是一样的，但如果它可以帮助任何人......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T10:58:26.877

我用IE8在jsfiddle中试过你的例子，没问题

[http://jsfiddle.net/mFLDv/](http://jsfiddle.net/mFLDv/)

# javascript - 使用 jquery 为生成的 Html 添加类名

> ID：10222204
> 
> 赞同：0
> 
> 时间：2012-04-19T05:33:40.407
> 
> 标签：javascript, jquery

下面是html部分

```
<li class="main_menu catagory_li" id="cat4">
    <p class="ahead"><span class="heading">Item 4</span>
    <span class="fright remove">close</span></p>
</li> 
```

当我点击`close`我复制`LI`使用下面的代码，

```
$('.remove').live('click',function(){
    var closed_elem_id = $(this).parent().parent().attr('id');

        s = $(this).parent().parent().clone().wrap('<div>').parent().html();
        $('li#'+closed_elem_id).remove();
        console.log(s);

}); 
```

此删除`LI`特定位置并获取副本并将其存储在`variable s`.

我的要求是在克隆副本中添加名为 no-display 的类，例如`<span class="fright remove no-display">close</span>`. 我尝试了很多方法，但都失败了。

请就此提出建议

注意：更新了我的问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T05:48:45.297

一点优化：http: [//jsfiddle.net/hKUd6/](http://jsfiddle.net/hKUd6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T05:46:56.743

这整件事非常草率。您不需要使用尽可能多的代码来完成您正在尝试的简单任务。

尝试这样的事情：

```
$("li").on("click", ".remove", function(){
    var $this = $(this),
        liCont = $this.closest("p"),
        parentLi = $this.closest("li");
    liCont
        .clone()
        .wrap(
            $("<div>").addClass("no-display")
        )
        .appendTo("body");
    parentLi.remove();
}); 
```

我们在这里所做的是捕获任何`.remove`元素上的点击事件。我们选择 parent `p`（我们稍后将其克隆以用 a 包装`div`）以及 parent `li`。我们克隆`p`元素（包括它的内容），用一个元素（我们使用 DOM 脚本创建并添加类）包装它`div`，并将完成的产品附加到主体（如果需要，您可以更改它）。然后我们删除原来的`li`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T05:47:17.740

尝试使用此代码，它应该可以工作：

```
$('.remove').live('click',function(){
    var closed_elem = $(this).closest("li"); //get the li to be closed/removed
    var clonedElem = closed_elem.clone().find("span.remove").addClass("no-display"); //clone the original li and add the no-display class to the span having remove class
    closed_elem.remove(); //remove the original li
    console.log(clonedElem);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T05:46:41.017

像这样的东西：

```
$('.remove').live('click',function(){
    var pLi = $(this).closest('li');
    s = $('<div>').append(pLi.clone().addClass('no-display')).html();
    pLi.remove();
    console.log(s);
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-19T05:56:46.090

请检查下面的代码行。

首先，您需要使用 jquery 获取当前类名：

```
$('li #cat4').find('span').each(function(){
  var classname = $(this).attr('class');
  $(this).addClass(classname+' no-display');
}); 
```

这不是您任务的完整代码，而只是一个代码，您可以通过它获取当前类，然后向其中添加更多所需的字符串并设置新类。

谢谢。

# java - android抱歉应用程序已意外停止

> ID：10222206
> 
> 赞同：0
> 
> 时间：2012-04-19T05:33:44.963
> 
> 标签：java, android, android-intent, android-emulator

以下代码可以正常工作，没有任何错误，但是当我尝试通过意图获取 url 时，我收到应用程序意外停止的错误。谁能帮帮我。

```
public class MjpegSample extends Activity {
    public void onCreate(Bundle icicle) {
        super.onCreate(icicle);
        String URL = "http://121.6.98.160:8081/videostream.cgi?"
                   + "user=admin&pwd=admin&resolution=8"; 
    }
} 
```

当我替换上面的代码时，下面的代码会出错：

```
public class MjpegSample extends Activity {
    public void onCreate(Bundle icicle) {
        super.onCreate(icicle);
        String URL;
        Bundle extras = getIntent().getExtras();
        URL = extras.getString("flink");
    }
} 
```

为了通过意图获得“flink”，我使用以下内容

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    b1 = (Button) findViewById(R.id.viewcam);
    t=(EditText)findViewById(R.id.username);
    p=(EditText)findViewById(R.id.password);
    i=(EditText)findViewById(R.id.ip);
    po=(EditText)findViewById(R.id.port);
    b1.setOnClickListener(new OnClickListener()
    {
        public void onClick(View v)
        {
            String tt=t.getText().toString();
            String pp=p.getText().toString();
            String ii=i.getText().toString();
            String por=po.getText().toString();
            String link="http://"+ii+":"+por
                       +"/videostream.cgi?user="+tt
                       +"&pwd="+pp+"resolution=8";
            Intent myIntent = new Intent(v.getContext(), MjpegSample.class);
            myIntent.putExtra("flink",link);
            startActivityForResult(myIntent, 0);                

        }
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T05:39:54.633

尝试替换`v.getContext()`为`NameOfCurrentActivity.this`，同时检查其他活动：

```
if (extras != null)
{
    // do your thing
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T05:40:54.210

您应该直接从意图中获取 url，而不是从附加内容中获取：

```
getIntent().getString("flink") 
```

# sql - 如何将日期重新更新为不同的格式？

> ID：10222211
> 
> 赞同：-1
> 
> 时间：2012-04-19T05:34:41.007
> 
> 标签：sql, sql-server, date, format

我有一列存储日期值。但是，有些日期是如何以错误的格式填充的。该列的日期格式为`DD/MM/YYYY`，但日期填充为`MM/DD/YYYY`。如何将值从 更改`MM/DD/YYYY`为`DD/MM/YYYY`？例如，此时，它正在显示`03/05/2012`并且被读取为`3rd May 2012`它确实应该被填充为`05/03/2012`( `5th March 2012`)。

以上已解决，但我有一个类似的问题：如何将“2012-12-01 12:33:00.0”翻转为“2012-01-12 12:33:00.0”？我试过“select convert(varchar(50), convert(datetime, log_date, 103), 121)”，同时使用了 101 和 103，但仍然无法翻转它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T05:48:07.007

我不知道日期是如何进入您的专栏的。但是 convert 函数在这里可能会有所帮助：

```
SELECT convert(datetime, '03/05/2012',103) 
```

您可以查看这篇 msdn 文章了解不同的日期和时间样式：http: [//msdn.microsoft.com/de-de/library/ms187928.aspx](http://msdn.microsoft.com/de-de/library/ms187928.aspx)

希望这可以帮助。

顺便说一句：如果问题只是它如何存储在表格本身中，你应该看看你的文化设置。在这里您可以找到不同 sys 语言的日期格式：

```
select * from sys.syslanguages 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T05:53:32.203

您可以使用该[`convert`函数](http://msdn.microsoft.com/en-us/library/ms187928.aspx)在字符串和日期时间值之间进行转换。

```
Convert a DD/MM/YYYY string to a datetime: convert(datetime, value, 103)
Convert a datetime to a DD/MM/YYYY string: convert(varchar(10), value, 103)
Convert a MM/DD/YYYY string to a datetime: convert(datetime, value, 101)
Convert a datetime to a MM/DD/YYYY string: convert(varchar(10), value,  101) 
```

您需要哪一个取决于您是否将日期存储为表中的 varchar 或 datetime。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T05:55:05.827

日期存储为时间点，而不是特殊样式。如何返回给您可能取决于您的数据库的语言/文化设置。

我认为您可以使用 SELECT [CONVERT](http://msdn.microsoft.com/en-us/library/ms187928.aspx) (...) 来获得您想要的任何格式。以下是一些示例：[http ://www.sql-server-helper.com/tips/date-formats.aspx](http://www.sql-server-helper.com/tips/date-formats.aspx)

# css - ExtJS 4 将 CSS 属性添加到操作列

> ID：10222212
> 
> 赞同：0
> 
> 时间：2012-04-19T05:34:45.047
> 
> 标签：css, extjs

我使用活动列生成动态图标，如下所示：

```
{xtype:'actioncolumn',
            width:25,
            align: 'center',
            items: [{
                icon: g_settings.iconUrl + 'view-icon.png' ,
                tdCls : 'someClass',
                handler: function() 
                {
                    alert('HI');
                }] 
```

现在在 ExtJS 论坛中添加我想要的属性（在本例中为光标：指针）是为了添加

```
.someClass
{
    cursor:pointer;
} 
```

但我不确定这应该写在哪里。

谢谢

勒隆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T05:41:43.780

将其放入您的页面中包含的 CSS 文件中（您有一个 CSS 文件，对吗？）。

例如像这样：

```
<link rel="stylesheet" type="text/css" href="styles.css" /> 
```

然后将您想要的样式定义放入`styles.css`文件中。这里的所有都是它的。

# javascript - 使用 node.js 实现一个简单的代理服务器

> ID：10222216
> 
> 赞同：2
> 
> 时间：2012-04-19T05:35:22.830
> 
> 标签：javascript, http, node.js, https, proxy-server

我正在尝试为实验目的创建一个简单的 node.js 代理服务器，我想出了这个简单的脚本：

```
var url = require("url");
var http = require("http");
var https = require("https");

http.createServer(function (request, response) {
    var path = url.parse(request.url).path;

    if (!path.indexOf("/resource/")) {
        var protocol;
        path = path.slice(10);
        var location = url.parse(path);

        switch (location.protocol) {
        case "http:":
            protocol = http;
            break;
        case "https:":
            protocol = https;
            break;
        default:
            response.writeHead(400);
            response.end();
            return;
        }

        var options = {
            host: location.host,
            hostname: location.hostname,
            port: +location.port,
            method: request.method,
            path: location.path,
            headers: request.headers,
            auth: location.auth
        };

        var clientRequest = protocol.request(options, function (clientResponse) {
            response.writeHead(clientResponse.statusCode, clientResponse.headers);
            clientResponse.on("data", response.write);
            clientResponse.on("end", function () {
                response.addTrailers(clientResponse.trailers);
                response.end();
            });
        });

        request.on("data", clientRequest.write);
        request.on("end", clientRequest.end);
    } else {
        response.writeHead(404);
        response.end();
    }
}).listen(8484); 
```

我不知道哪里出错了，但是当我尝试加载任何页面时，它会给我以下错误：

```
http.js:645
    this._implicitHeader();
         ^
TypeError: Object #<IncomingMessage> has no method '_implicitHeader'
    at IncomingMessage.<anonymous> (http.js:645:10)
    at IncomingMessage.emit (events.js:64:17)
    at HTTPParser.onMessageComplete (http.js:137:23)
    at Socket.ondata (http.js:1410:22)
    at TCP.onread (net.js:374:27) 
```

我想知道问题可能是什么。在 node.js 中调试比在 Rhino 中要困难得多。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T07:08:09.503

正如我在评论中提到的，您的主要问题是您的`.write`和`.end`调用没有正确绑定到上下文，因此它们只会翻转并抛出错误。

修复后，请求会给出 404，因为该`headers`属性将拉入`host`原始请求的标头，`localhost:8484`. 按照您的示例，它将被发送到 jquery.com 的服务器，并且它将 404。您需要`host`在代理之前删除标头。

在调用之前添加这个`protocol.request`。

```
delete options.headers.host; 
```

# java - 从java检测mysql表锁

> ID：10222223
> 
> 赞同：1
> 
> 时间：2012-04-19T05:35:54.327
> 
> 标签：java, mysql, jakarta-ee

我有一个基于 Java EE 和 MYSQL 的 Web 应用程序。

我现在面临的问题是，有一个事件被在线触发，它正在更新大量行的表条目。

环境中还安排了一个批处理作业，比如每 6 分钟一次，它也在更新同一个表条目，如上所述。

所以情况是，当在线事件在批处理运行的时间范围内被触发时，表被锁定。

因此，请专家提供您的想法，如何防止锁定发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T05:49:03.267

看起来像一个设计问题，看看使用临时表。

# javascript - setInverval 找不到函数？

> ID：10222234
> 
> 赞同：0
> 
> 时间：2012-04-19T05:37:18.440
> 
> 标签：javascript, jquery, ajax, joomla, mootools

我简化了这个脚本，所以它不是那么笨重，但它的要点是我每秒钟都会收到一个引用错误，因为我没有函数 getList()。我试图在它的上方和下方移动 setInverval() ，但它几乎什么也没做。它告诉我一个匿名函数正在调用 getList 并且它没有被定义。

如果它有所作为，我必须添加 jquery 冲突，以便它不会干扰 mootools 并且我正在运行 joomla 1.5

```
jQuery(document).ready(function($) {
function getList(){
i=0;
$.getJSON(
    "./test.php",
    function(data) 
    {   
        while(data.streams[i]){
            channel[i] = data.streams[i];
            stats[i] = data.status[i];
            title[i] = data.title[i];
            viewers[i] = data.viewers[i];
            i++;
        }
    }
  );
}
setInterval("getList()", 1000);
}); 
```

我尝试通过控制台调试它，但我在控制台调试方面还是新手，所以它并没有让我走得太远。这个程序单独工作，没有 joomla 和 jquery 没有冲突的东西，它在 HTML 文件中很好，所以我不确定什么可能是错误的：/

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T05:39:16.817

当使用`setInterval()`（通过传递字符串）的 eval 样式版本时，函数必须是全局的。无论如何，这都是一件坏事，所以请改为：

```
setInterval(getList, 1000); 
```

所以你永远不会再传递一个字符串，如果你需要参数，这样做：

```
setInterval(function() {
    getList(whatever, ...);
    // you can have more code here and even access local variables
}, 1000); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T05:37:40.733

```
setInterval(getList, 1000); 
```

[setInterval](https://developer.mozilla.org/en/DOM/window.setInterval)（以及[setTimeout](https://developer.mozilla.org/en/DOM/window.setTimeout)）需要对函数的引用。[将函数作为字符串传递与使用相同的风险`eval`](https://developer.mozilla.org/en/DOM/window.setTimeout#Passing_string_literals)

> 将字符串而不是函数传递给 setTimeout() 会遇到与使用 eval 相同的危险。字符串文字在全局上下文中进行评估，因此当字符串被评估为代码时，调用 setTimeout() 的上下文中的局部符号将不可用。

# android - AlertDialog 自定义标题有黑色边框

> ID：10222241
> 
> 赞同：5
> 
> 时间：2012-04-19T05:37:38.923
> 
> 标签：android, android-layout, dialog, android-alertdialog

我有一个`AlertDialog`我使用自定义对话框视图的。自定义标题视图的想法似乎很简单，但是自定义标题周围有一个我似乎无法摆脱的黑色边框。顶部、左侧和右侧有一个单像素边框，而底部有大约 5 个像素的边框。

在 Java 中创建对话框：

```
View titleView = inflater.inflate(R.layout.part_list_item, parent, false);
((TextView) titleView.findViewById(R.id.partName)).setText(titleText);
AlertDialog productDialog = new AlertDialog.Builder(getContext())
    .setCustomTitle(titleView)
    .setAdapter(adapter, doNothingClickListener)
    .create(); 
```

自定义标题视图布局，`part_list_item.xml`：

```
<?xml version="1.0" encoding="utf-8"?>
<TextView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="#ff0000"
    android:id="@+id/partName"
    android:layout_marginLeft="6dip"
    android:textAppearance="?android:attr/textAppearanceLargeInverse"
    /> 
```

我所看到的：

![截图坏了](../Images/23e8d0b1955751e35dd1f2e2b16a7252.png)

我想看到的：

![屏幕截图已修复](../Images/1c1a8e0877f8a65e597d7446e3ba00d4.png)

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T10:23:05.217

尝试这个：

```
LayoutInflater inflater = (LayoutInflater)yourClass.this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
View titleView = inflater.inflate(R.layout.custom_dialog, null);

((TextView) titleView.findViewById(R.id.partName)).setText("Your Title");
alert1.setCustomTitle(titleView); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T05:53:41.733

这是当您在警报上有标题时由 android 创建的结果。从我可以看到的屏幕截图中，警报的“正文”也是一个自定义视图，而不是警报消息属性。

因此，获得所需结果的最简单方法是在警报的自定义视图中添加标题布局。

例子：

```
View titleView = inflater.inflate(R.layout.part_list_item, parent, false);

View bodyView = ....
bodyView.addview(titleView);
((TextView) itleView.findViewById(R.id.partName)).setText(titleText); 

AlertDialog productDialog = new AlertDialog.Builder(getContext());
productDialog.setView(bodyView);
...

productDialog.create(); 
```

在`bodyView.addview(titleView);`警报正文上添加标题布局的位置。

并将`productDialog.setView(bodyView);` 自定义视图设置为警报的正文。

# php - php 5.3 导致 flush() 失败？

> ID：10222253
> 
> 赞同：0
> 
> 时间：2012-04-19T05:38:55.257
> 
> 标签：php, php-5.3, flush

我与 godaddy 有两个 Linux 托管计划。一个（较旧的运行）php 5.2.14，较新的运行 php 5.3.6。我在 Vista 上使用 Firefox 11.0 和 IE 9。

下面的 PHP 在 php 5.2.17 下运行正常（数字每半秒出现一次），直到脚本完成。使用 PHP 5.3.6 的主机将无法工作。它会加载一段时间，然后在脚本完成后立即刷新整个输出。没有中间输出。

php.ini 有 output_buffering = Off 和 zlib.output_compression = Off。有谁知道我如何在 PHP 5.3 下完成这项工作？

谢谢，埃米特斯

```
<?php
$i = 0;
while ($i<=10)
{
    echo “i=$i “;
    flush();
    echo(str_repeat(‘ ‘,1024));
    usleep(500000);
    $i++;
}
?> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-19T05:40:47.740

[https://bugs.php.net/bug.php?id=49816](https://bugs.php.net/bug.php?id=49816)

这似乎是一个已知的错误。

# ruby-on-rails - 显示上传按钮 1 by 1，回形针

> ID：10222254
> 
> 赞同：0
> 
> 时间：2012-04-19T05:38:58.987
> 
> 标签：ruby-on-rails, paperclip

现在，我使用回形针上传多张图片，但是，在视图中，它看起来不太好，它确实有 5 个上传按钮（我设置它允许上传 5 次）。在这种情况下，我想尝试一下，最初它只显示 1 个上传按钮，如果按钮有文件，它将继续显示第二个按钮，直到第五个按钮。

另一个问题是，当我编辑和删除我所有的图片时，它不显示上传按钮 edy。我想这必须提供一个逻辑解决方案来解决这个问题。我想到我需要使用计数器和布尔条件来设置它是否显示。但是，在视图中，我不知道该怎么做。任何人都可以给出一些提示让我继续吗？

```
 <div class="field">
    <%= f.fields_for :assets do |asset_fields| %>
        <p>

        <% if asset_fields.object.new_record? %>
                <%= asset_fields.file_field :asset %>
        <% end %>
        </p>
    <% end %>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T16:57:44.453

对新操作和编辑操作使用不同的视图，或对上传字段使用不同的部分。

# linq - Entity Framework 4 - 加入 2 个表然后对它们进行分页的语法是什么？

> ID：10222255
> 
> 赞同：26
> 
> 时间：2012-04-19T05:39:07.383
> 
> 标签：linq, join, linq-to-entities, pagination

我有以下 linq-to-entities 查询，其中包含 2 个要添加分页的连接表：

```
IQueryable<ProductInventory> data = from inventory in objContext.ProductInventory
    join variant in objContext.Variants
        on inventory.VariantId equals variant.id
     where inventory.ProductId == productId
     where inventory.StoreId == storeId
     orderby variant.SortOrder
     select inventory; 
```

我意识到我需要使用 .Join() 扩展方法，然后调用 .OrderBy().Skip().Take() 来执行此操作，我只是被 Join() 的语法绊倒了，似乎无法查找任何示例（在线或书籍中）。

**注意：**我加入表格的原因是进行排序。如果有比连接更好的基于相关表中的值进行排序的方法，请将其包含在您的答案中。

**2 可能的解决方案**

我想这只是一个可读性问题，但这两者都可以工作并且在语义上是相同的。

# 1

```
IQueryable<ProductInventory> data = objContext.ProductInventory
                .Where(y => y.ProductId == productId)
                .Where(y => y.StoreId == storeId)
                .Join(objContext.Variants,
                    pi => pi.VariantId,
                    v => v.id,
                    (pi, v) => new { Inventory = pi, Variant = v })
                .OrderBy(y => y.Variant.SortOrder)
                .Skip(skip)
                .Take(take)
                .Select(x => x.Inventory); 
```

# 2

```
var query = from inventory in objContext.ProductInventory
    where inventory.ProductId == productId
    where inventory.StoreId == storeId
    join variant in objContext.Variants
        on inventory.VariantId equals variant.id
    orderby variant.SortOrder
    select inventory;

var paged = query.Skip(skip).Take(take); 
```

感谢 Khumesh 和 Pravin 在这方面提供的帮助。感谢其他人的贡献。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-19T06:20:40.990

在映射中定义连接，然后使用它。通过使用该方法，您真的不会得到任何东西`Join`- 相反，使用该`Include`方法。它好多了。

```
var data = objContext.ProductInventory.Include("Variant")
               .Where(i => i.ProductId == productId && i.StoreId == storeId)
               .OrderBy(j => j.Variant.SortOrder)
               .Skip(x)
               .Take(y); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-19T06:02:32.780

将以下行添加到您的查询中

```
var pagedQuery = data.Skip(PageIndex * PageSize).Take(PageSize); 
```

数据变量是 IQueryable，所以你可以在它上面加上 add skip & take 方法。如果您在 Product 和 Variant 之间有关系，您实际上并不需要明确加入，您可以像这样引用变体

```
IQueryable<ProductInventory> data = 
             from inventory in objContext.ProductInventory
             where inventory.ProductId == productId && inventory.StoreId == storeId
             orderby inventory.variant.SortOrder
             select new()
             {
                 property1 = inventory.Variant.VariantId,
                 //rest of the properties go here
             }
pagedQuery = data.Skip(PageIndex * PageSize).Take(PageSize); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-03T15:42:04.543

我的答案基于标记为 true 的答案，但在这里我添加了上面代码的新最佳实践

```
 var data= (from c in db.Categorie.AsQueryable().Join(db.CategoryMap,
                    cat=> cat.CategoryId, catmap => catmap.ChildCategoryId, 
    cat, catmap) => new { Category = cat, CategoryMap = catmap })
select (c => c.Category) 
```

这是使用 Linq to 实体的最佳实践，因为当您将 AsQueryable() 添加到代码中时；系统会将通用 System.Collections.Generic.IEnumerable 转换为通用 System.Linq.IQueryable，这对于 .Net 引擎在运行时构建此查询更有利

谢谢Khumesh Kumawat先生

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T05:56:27.913

您只需使用 your`Skip(itemsInPage * pageNo).Take(itemsInPage)`来进行分页。

# ios - TableView 的每个单元格上的分段控件

> ID：10222256
> 
> 赞同：0
> 
> 时间：2012-04-19T05:39:10.360
> 
> 标签：ios, uitableview, uisegmentedcontrol

我正在尝试在我的应用程序的 tableView 的每个单元格上设置一个分段控件，这可能会更改数组的值。

在我的示例中，我想设置一个具有值“A”、“A”、“A”、“A”的数组，所有这些都应该通过在分段控件上的选择来更改...

我希望我很清楚......非常感谢！

（我想发布一张图片，但我是新用户，顺便说一句，我不允许这样做）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T06:37:55.697

我只是把基本的想法放在这里：

*   创建一个具有分段控件的 UITableViewCell 子类
*   在单元格上添加数据模型，以便了解 SegmentedControl 的当前值
*   创建单元格时，为单元格的 UISegmentedControl 添加逻辑，如下所示：

> ```
> [segmentedControl addTarget:cell action:@selector(changeValue:) forControlEvents:UIControlEventValueChanged]; 
> ```

*   将该方法添加`changeValue:`到您的单元格中。
*   通知您的数据源该单元格的值已更改。（在这种情况下，您可以使用单例来保存您的数据源）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T11:38:23.187

我实际上已经在每一行上制作了一个带有 SegmentedControl 的**UITableView**，并带有操作：

```
(IBAction)select:(id)sender {

NSIndexPath *indexPath =
[self.tableView indexPathForCell:(uneCell *)[[sender superview] superview]];
NSUInteger row = indexPath.row;

[uneArray replaceObjectAtIndex:row withObject:[NSNumber numberWithInteger:((UISegmentedControl*) sender).selectedSegmentIndex]];

[self refresh];

} 
```

其中 uneCell 是**UITableViewCell**的类， uneArray 是一个数组，其中包含每个单元格的 SegmentedControl 的索引值。

# php - 客户端验证错误不会阻止提交和 ajax 请求

> ID：10222258
> 
> 赞同：3
> 
> 时间：2012-04-19T05:39:28.723
> 
> 标签：php, ajax, jquery, yii

我使用 Yii 客户端验证来验证一些输入，当用户输入出现错误时，Yii 客户端验证不会阻止提交，也不会阻止 ajax 请求。我使用网格小部件“carvw-grid”，当用户单击提交按钮时，它会发出 ajax 请求以使用结果更新“carvw-grid”内容。当出现客户端验证错误时，我想阻止提交和 ajax 请求。

这是我的脚本代码：

```
Yii::app()->clientScript->registerScript('search', "
$('.search-button').click(function(){
$('.myloading').show();
$('.myshow').hide();
$('.myresult').slideUp().delay(3000).queue(function() {
    $(this).show();
    $('.myloading').hide();
    $('.myloading').addClass('myshow');
    });
    });

$('.search-form form').submit(function(){
    $.fn.yiiGridView.update('carvw-grid', {
        data: $(this).serialize()
    });
    return false;
});
"); 
```

这是我的表格

```
<?php $form=$this->beginWidget('CActiveForm', array(
    'id'=>'carvw-form',
    'action'=>Yii::app()->createUrl($this->route),
    'method'=>'get',
    'enableAjaxValidation'=>false,
    'enableClientValidation'=>true,
    'focus'=>array($model,'OWNER_ID'),
    'clientOptions' => array('validateOnSubmit'=>true, 'validateOnType'=>true),

)); ?> 
```

这是我的提交按钮

```
<div class="row buttons">
    <?php echo CHtml::submitButton('search',array('class'=>'search-button')); ?>
</div> 
```

这是我的网格

```
<?php 
    $this->widget('zii.widgets.grid.CGridView', array(
    'id'=>'carvw-grid',
    'dataProvider'=>$model->search(),

    'columns'=>array('CAR_COMPANY_NAME','MODEL_YEAR',
        'CAR_COLOR_NAME',
        'USING_TYPE_NAME',array(
            'class'=>'CButtonColumn',
        ),
    ),
));

 ?> 
```

如何防止客户端验证错误的提交和 ajax 请求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T15:56:19.157

也许您需要使用 afterValidate 函数而不是绑定提交事件。在 CActiveForm.clientOptions 数组中添加以下元素：

```
'afterValidate' => 'js:afterValidate', 
```

在您的 javascript 文件中：

```
function afterValidate(form, data, hasError) {
    if (!hasError) {    
        $.fn.yiiGridView.update('carvw-grid', {
            data: $(this).serialize()
        });
    }
    return false;
} 
```

# rest - 数据包含 / 的 REST 样式 URL

> ID：10222263
> 
> 赞同：0
> 
> 时间：2012-04-19T05:39:57.487
> 
> 标签：rest, url-rewriting

标识符有时可能包含 / 字符，创建如下 URL：

[http://example.com/data/activity/EU-2010/22856/0/profile/1](http://example.com/data/activity/EU-2010/22856/0/profile/1)

其中 EU-2010/22856/0 是活动标识符

因此在 / 上拆分路径会导致解析错误

% 对标识符进行编码会产生一个可以解析的 URL

[http://example.com/data/activity/EU-2010%2F22856%2F0/profile/1](http://example.com/data/activity/EU-2010%2F22856%2F0/profile/1)

但这会导致 Apache 抛出 404 not found 错误——我猜是因为它现在不是有效路径。

我可以对标识符进行 base64 编码和解码，但这会混淆 URL

推荐的方法是什么？

# extjs - EXTJS Grid dataIndex 自定义和我的误区

> ID：10222265
> 
> 赞同：0
> 
> 时间：2012-04-19T05:40:14.790
> 
> 标签：extjs

我想将一些自定义数据放入列字段中......我的数据位于本地商店。

```
code of my grid:

columns: [
{text: "name", flex: 1, dataIndex: 'name'},
{text: "type", flex: 1, dataIndex: 'type'},
{text: "value", flex: 1, dataIndex: 'function', renderer: this.rendeValueColumn},
{text: "parameter", flex: 1, dataIndex: 'parameter'},
{text: "rule", flex: 1, dataIndex: 'rule'}
],

i want to change 'rule' .

i'm try to : var a = 'test'; {text: "rule", flex: 1, dataIndex: a} etc...

but that way arent help me. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T06:33:10.613

dataIndex 不期望数据。它期望数据字段的名称。

你真正想要的是

```
columns: [
  {text: "name", flex: 1, dataIndex: 'name'},
  {text: "type", flex: 1, dataIndex: 'type'},
  {text: "value", flex: 1, dataIndex: 'function', renderer: this.rendeValueColumn},
  {text: "parameter", flex: 1, dataIndex: 'parameter'},
  {text: "rule", flex: 1, dataIndex: 'name', renderer: function(){
    return 'test';
  }}
], 
```

您可以使用渲染器功能放入您想要的任何数据。

# c# - C#.NET 中带有部分 URL 的 Http Post

> ID：10222271
> 
> 赞同：2
> 
> 时间：2012-04-19T05:41:02.213
> 
> 标签：c#, httpwebrequest

我有一个 Web 应用程序（我无法控制），我需要以编程方式发送 HTTP 帖子。目前我正在使用 HttpWebRequest 之类的

```
HttpWebRequest request = (HttpWebRequest)WebRequest.Create("https://someserver.com/blah/blah.aspx"); 
```

但是，应用程序在发布到数据时返回“未知服务器错误（不是 IIS 错误，自定义应用程序错误页面）”。使用 Fiddler 比较我的 Post 与 IE 帖子，我可以看到唯一的区别在于请求的 POST 行：

在 Internet Explorer 中提琴手（RAW 视图）显示流量

POST /blah/blah.aspx HTTP/1.1

在我的 C# 程序提琴手（RAW 视图）中，将流量记录为

[发布https://someserver.com/blah/blah.aspx](https://someserver.com/blah/blah.aspx) HTTP /1.1

这只是两个请求的区别。

从我到目前为止的研究来看，似乎没有办法让 HttpWebRequest.Create 发布相对 URL。注意：我看到很多关于“如何使用相对 URL”的帖子，但这些建议不起作用，因为实际帖子是仍然使用绝对 URL 完成（当您嗅探 HTTP 流量时）

用相对 URL 完成这篇文章的最简单方法是什么？

（流量不通过代理）

更新：目前我正在使用 IE 自动化来进行预定的性能测试，而不是上面的方法。我可能会考虑另一种脚本语言，因为我确实想在没有任何浏览器的情况下进行测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T05:48:22.073

不，您不能在 URL 中没有服务器的情况下进行 POST。

您的程序失败的一个可能原因是它没有使用正确的代理，因此无法解析服务器名称。

注意：Fiddler 在您正在谈论的视图中分别显示路径和主机。

将您的程序配置为使用 Fiddler 作为代理 (127.0.0.1:8888) 并将您发出的请求与浏览器的请求进行比较。不要忘记将 Fiddler 切换为“显示所有进程”。

这是关于为不同类型的环境（包括 C# 代码）配置 Fiddler 的文章：[Fiddler：配置客户端](http://www.fiddlertool.com/Fiddler/help/hookup.asp)

```
objRequest = (HttpWebRequest)WebRequest.Create(url);
objRequest.Proxy= new WebProxy("127.0.0.1", 8888); 
```

# javascript - 使用 Greasyspoon 将脚本插入网站的头部

> ID：10222276
> 
> 赞同：1
> 
> 时间：2012-04-19T05:41:42.720
> 
> 标签：javascript, html, html-head, greasyspoon

[我有一个 javascript，我想使用Greasyspoon](http://greasyspoon.sourceforge.net/)将其注入网站标题部分。此 javascript 将负责网站的移动显示。
有可能这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T07:40:41.160

这肯定是可能的。我在特定网站中插入了一个简单的 alert() 函数。我想这证明你可以用油腻的勺子来做。

# c# - Visual C#，进程不断增长，直到我使用循环绘制图形时遇到与 UserControl 相关的内存错误

> ID：10222278
> 
> 赞同：1
> 
> 时间：2012-04-19T05:41:48.910
> 
> 标签：c#, loops, graphics, resources

使用 Visual C# 2008 Exp Edition，我注意到加载我的项目后，该进程消耗了大约 70,000K 的内存。几个小时后，它会增加到大约 500,000K。

此时 a`UserControl`包含 a `PictureBox`（在 a 内`Panel`）显示 Visual C# Express 中的内存错误。图片框包含一个位图和矩形网格，用`System.Drawing.Graphics`.

这是代码：

这个段在初始化时只发生一次`UserControl`。

```
Bitmap myBitmap = new Bitmap(a, b);
Graphics g = null;
g = Graphics.FromImage(myBitmap);
g.FillRectangle(Brushes.SteelBlue, 0, 0, c, d);

//Paint Rows & Columns
for (int x = 0; x <= e - 1; x++)
{
    for (int y = 0; y <= f - 1; y++)
    {
        g.DrawRectangle(Pens.LightBlue, g, h, i);
    }
}
//Release Resources
g.Dispose();
//Add bitmap with grid to BG
ScorePictureBox.Image = myBitmap; 
```

这段代码相当频繁：

```
for (int EventIndex = 0; EventIndex <= MidiNoteDownArray.Length - 1; EventIndex++)
{
    //Paint notes to grid

    e.Graphics.FillRectangle(Brushes.LightBlue, j, k, l, m);
    e.Graphics.DrawRectangle(Pens.Purple, o, p, q, r);
}
e.Dispose(); 
```

我没有正确释放资源吗？我怎样才能正确地做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T05:48:13.297

你没有发布你的位图。根据您的代码运行频率，垃圾收集器可能无法跟上。

```
using (Bitmap myBitmap = new Bitmap(a, b))
using (Graphics g = Graphics.FromImage(myBitmap)) {
    for (int x = 0; x <= e - 1; x++) {
        for (int y = 0; y <= f - 1; y++) {
            g.DrawRectangle(Pens.LightBlue, g, h, i);
        }
    }

    ScorePictureBox.Image = myBitmap;
} 
```

您还需要检查代码中使用 GDI 的其他部分是否有未发布的资源。

# linux - 当前操作系统上的手册页的来源

> ID：10222282
> 
> 赞同：-1
> 
> 时间：2012-04-19T05:42:31.043
> 
> 标签：linux, unix

我正在尝试获取我将使用的系统上的联机帮助页的来源。我的问题是我不知道它们是什么路径（取决于 Unix/Linux 风格）

我知道如何通过执行 man -k 列出所有手册页。但我无法获得来源！

任何帮助都会得到帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T05:59:46.380

可以在 /etc/man.config 中查找 MANPATH 行

# java - 在 Android 中加密和解密 zip 文件？

> ID：10222284
> 
> 赞同：2
> 
> 时间：2012-04-19T05:42:54.450
> 
> 标签：java, android, zip, encryption

我正在使用此代码：[http](http://examples.javacodegeeks.com/core-java/crypto/encrypt-decrypt-file-stream-with-des) ://examples.javacodegeeks.com/core-java/crypto/encrypt-decrypt-file-stream-with-des用于加密我在 android 应用程序中使用的 zip 文件。它与zip 文件，当我使用 java 代码尝试它时，但是当我在 Android 应用程序中尝试相同的方法时 - 它解密文件但我得到的文件已损坏并且无法打开它。

日志：

```
 04-19 10:58:25.711: W/System.err(6752): net.lingala.zip4j.exception.ZipException: zip headers not found. probably not a zip file
         04-19 10:58:25.721: W/System.err(6752):    at net.lingala.zip4j.core.HeaderReader.readEndOfCentralDirectoryRecord(HeaderReader.java:122) 
```

当我尝试在 Windows 上使用 winzip 打开同一个文件时，它会显示：

```
 Does not appear to be a valid archive file. 
```

更新：：

```
public class EncryptDecryptFileStreamWithDES {

private static Cipher ecipher;
private static Cipher dcipher;

// 8-byte initialization vector
private static byte[] iv = {
    (byte)0xB2, (byte)0x12, (byte)0xD5, (byte)0xB2,
    (byte)0x44, (byte)0x21, (byte)0xC3, (byte)0xC3
};

public static void call() {

    try {

        SecretKey key = KeyGenerator.getInstance("DES").generateKey();

        AlgorithmParameterSpec paramSpec = new IvParameterSpec(iv);

        ecipher = Cipher.getInstance("DES/CBC/PKCS5Padding");
        dcipher = Cipher.getInstance("DES/CBC/PKCS5Padding");

        ecipher.init(Cipher.ENCRYPT_MODE, key, paramSpec);
        dcipher.init(Cipher.DECRYPT_MODE, key, paramSpec);

    //    encrypt(new FileInputStream("C:\\Users\\Admin\\Desktop\\zipped\\4.zip"), new FileOutputStream("C:\\Users\\Admin\\Desktop\\zipped\\4.dat"));
      //  decrypt(new FileInputStream("C:\\Users\\Admin\\Desktop\\zipped\\4.dat"), new FileOutputStream("C:\\Users\\Admin\\Desktop\\zipped\\4new.zip"));

    //}
    //catch (FileNotFoundException e) {
        //System.out.println("File Not Found:" + e.getMessage());
        //return;
    }
    catch (InvalidAlgorithmParameterException e) {
        System.out.println("Invalid Alogorithm Parameter:" + e.getMessage());
        return;
    }
    catch (NoSuchAlgorithmException e) {
        System.out.println("No Such Algorithm:" + e.getMessage());
        return;
    }
    catch (NoSuchPaddingException e) {
        System.out.println("No Such Padding:" + e.getMessage());
        return;
    }
    catch (InvalidKeyException e) {
        System.out.println("Invalid Key:" + e.getMessage());
        return;
    }

}

public static void encrypt(InputStream is, OutputStream os) {

    try {

        call();

        byte[] buf = new byte[1024];

        // bytes at this stream are first encoded
        os = new CipherOutputStream(os, ecipher);

        // read in the clear text and write to out to encrypt
        int numRead = 0;
        while ((numRead = is.read(buf)) >= 0) {
            os.write(buf, 0, numRead);
        }

        // close all streams
        os.close();

    }
    catch (IOException e) {
        System.out.println("I/O Error:" + e.getMessage());
    }

}

public static void decrypt(InputStream is, OutputStream os) {

    try {

        call();

        byte[] buf = new byte[1024];

        // bytes read from stream will be decrypted
        CipherInputStream cis = new CipherInputStream(is, dcipher);

        // read in the decrypted bytes and write the clear text to out
        int numRead = 0;
        while ((numRead = cis.read(buf)) > 0) {
            os.write(buf, 0, numRead);
        }

        // close all streams
        cis.close();
        is.close();
        os.close();

    }
    catch (IOException e) {
        System.out.println("I/O Error:" + e.getMessage());
    }

}

} 
```

这是我正在使用的类：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T07:34:19.740

问题是您使用不同的密钥来加密和解密文件：

1）您`encrypt(..)`从外部的某个地方调用`EncryptDecryptFileStreamWithDES`，它又调用您的`call()`方法，该方法初始化新键：

```
SecretKey key = KeyGenerator.getInstance("DES").generateKey(); 
```

2）然后你打电话`decrypt(..)`，它`call()`再次调用你的方法，你得到新的`SecretKey`。

您使用的示例中没有这样的问题，这些方法调用的顺序相反。要扩展此示例，您需要在调用`encrypt(..)`和之间保存密钥`decrypt(..)`，然后`SecretKeySpec`使用存储的密钥进行初始化：

```
byte[] keyBytes = KeyGenerator.getInstance("AES").getEncoded();

...

SecretKeySpec skeySpec = new SecretKeySpec(keyBytes, "AES");
Cipher cipher = Cipher.getInstance("AES");
cipher.init(Cipher.DECRYPT_MODE, skeySpec); 
```

[这](http://www.java2s.com/Tutorial/Java/0490__Security/UsingCipherInputStream.htm)是一个更真实的例子。

PS 如前所述，使用`DES`算法不是最好的主意，`AES`而是使用。

# c++ - G ++“没有命名类型”

> ID：10222295
> 
> 赞同：1
> 
> 时间：2012-04-19T05:44:17.050
> 
> 标签：c++, global

```
struct MyStruct {
  int x;
};

MyStruct theVar;

theVar.x = 10;

int main() {
  return 0;
} 
```

为什么编译器给我错误：

> 错误：“theVar”没有命名类型

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T05:45:27.347

您只能`main`在全局范围之外创建变量并对其进行初始化。您不能像这样在全局范围内分配变量。

你有两个选择：

**在创建时初始化它：**

```
MyStruct theVar = {10}; 
```

或者

**分配它`main`：**

```
theVar.x = 10; 
```

请注意，第一种方法更好，因为它只有一个步骤**Initialization**，第二种方法有两个步骤**Initialization**和**Assignment**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T05:45:47.987

你不能在函数之外做这样的赋值。将其移入 main 中，或使其成为初始化：

```
MyStruct theVar = {10}; 
```

# javascript - 使用dojo触发鼠标悬停事件？

> ID：10222296
> 
> 赞同：1
> 
> 时间：2012-04-19T05:44:29.527
> 
> 标签：javascript, dojo

在 jquery 中，您可以使用 $(element).mouseover() 触发鼠标悬停事件。

在dojo中使用connect功能后，我不太确定如何触发事件。当我使用单击连接时，我可以使用 element.click() 来触发单击，但对于鼠标悬停等其他事件，调用 element.mouseover() 不起作用。那么如何使用 Dojo 触发鼠标悬停等事件呢？（我知道有像fireEvent这样的普通js方法，但它很乱而且不能跨浏览器证明）

这是一些代码

```
var myButton = dojo.byId("myButton"),
    myDiv = dojo.byId("myDiv");

dojo.connect(myButton, "mouseover", function(evt){
    dojo.style(myDiv, "backgroundColor", "blue");
});

dojo.connect(myButton, "click", function(evt){
    dojo.style(myDiv, "backgroundColor", "yellow");
});

myButton.click();//works

myButton.mouseover();//doesn't work​ 
```

jsFiddle 上的代码：http: [//jsfiddle.net/mHKDt/28/](http://jsfiddle.net/mHKDt/28/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T13:23:56.620

对于 dojo 1.7 示例，应该这样做。您不需要 body 标记上的样式表或 claro 类。它们是我的便签本模板的一部分，我使用了 try 的东西。

```
<html>
    <head>
            <link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/dojo/1.7.1/dijit/themes/claro/claro.css" media="screen">
            <!-- load dojo and provide config via data attribute -->
            <script src="http://ajax.googleapis.com/ajax/libs/dojo/1.7.1/dojo/dojo.js"
                    data-dojo-config="async: true"></script>
    </head>
    <script type="text/javascript">
    <!--
    require(["dojo/mouse",
             "dojo/dom",
             "dojo/on",
             "dojo/domReady!"],function(mouse,dom,on){
                    var node = dom.byId("myImg")
                    on(node,mouse.enter,function(){
                        console.info("In " + node.title);
                    });

                    on(node,mouse.leave,function(){
                        console.info("Out " + node.title);
                    });
    });         
    //-->
    </script>

    <body class="claro">
        <img id="myImg" title="yay google" src="http://www.google.com/ig/images/jfk/google_color.png"/>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T09:52:08.147

如果你不介意使用纯 javascript，让我们看看这篇文章[Simulate Mouse Over in Vimperator plugin](https://stackoverflow.com/questions/911586/javascript-simulate-mouse-over-in-code)

我发现这与 dojo 配合得很好。

[这是我更新的你的 jsFiddle。](http://jsfiddle.net/oamiamgod/mHKDt/30/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T17:42:09.250

尝试发布订阅。

```
<script type="text/javascript">
<!--
require(["dojo",
        "dojo/topic",
         "dojo/mouse",
         "dojo/dom",
         "dojo/on",
         "dojo/domReady!"],function(dojo,topic,mouse,dom,on){
        var node = dojo.byId("myImg");
        topic.subscribe("mouseover",function(msg){
            console.info("Called");
            dojo.style("myDiv", "backgroundColor", msg);
        });

        on(node,mouse.enter,function(){
            topic.publish("mouseover","green");
        });

        on(node,mouse.leave,function(){
            topic.publish("mouseover","blue");
        });
        topic.publish("mouseover","black");
});         
//-->
</script> 
```

# django - 使 django-tinyMCE 从右到左

> ID：10222299
> 
> 赞同：1
> 
> 时间：2012-04-19T05:44:39.350
> 
> 标签：django, tinymce

我有一个`textarea`：

```
<textarea id="id_description" >...</textarea> 
```

当我使用tinymce时，`textarea`我有一个跨度（id= `id_description_parent`），一个表（id= `id_description_tbl`）和一个iframe（id='id_description_ifr'），我尝试了很多事情来使它成为RTL：

```
$(document).ready(function()
{
   $('#id_description_parent').addClass('text-align','right');
   $('#id_description_tbl').addClass('text-align','right');
   $('#id_description_ifr').addClass('text-align','right');
}); 
```

它没有用，我尝试了这个：

```
tinyMCE.init({
        directionality : "rtl"
}); 
```

它没有用。

```
tinyMCE.init({
        theme : "advanced",
        plugins : "directionality",
        theme_advanced_buttons3_add : "ltr,rtl"
}); 
```

它也没有用。

还有其他建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T08:03:07.223

```
tinyMCE.init({
        mode: 'textareas',
        directionality : "rtl"
}); 
```

应该是正确的。您能否向我们展示您在页面上生成的完整 html 代码？

# javascript - jQuery 插件 html 和选项实践

> ID：10222300
> 
> 赞同：0
> 
> 时间：2012-04-19T05:44:45.680
> 
> 标签：javascript, jquery, html, css, plugins

我正在创建一个 jQuery 插件，我对如何构建事物有一些疑问：

1.插件应该写多少HTML，通过jQuery创建多少？

编写所有 HTML 以便在查看代码时可以看到整个标记结构是否很好？

或者最好只编写最少量的 HTML，以便用户可以很容易地添加/修改内容并通过 jQuery 创建所有其余的、庞大的 HTML？

有推荐的做法吗？专业插件中的事情是如何完成的？

为什么事情要以某种方式来做，背后的原因是什么？

2.如何平衡插件选项和CSS？

插件应该提供会影响插件呈现的选项（会修改样式表的选项）还是让用户直接修改样式表以进行呈现修改并且插件中只有与功能相关的选项是更好的做法？

关于在插件中提供哪些选项以不越过 CSS 有哪些指南？

关于我的经验，我在不同的地方和插件中看到了所有这些，这就是为什么我要征求有经验的用户的意见，以及什么是好的做法以及为什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T06:06:13.613

**1.插件应该写多少HTML，通过jQuery创建多少？**

根据渐进增强的范式，不应该有在没有启用 JS 的情况下无用的标记。换句话说——如果你的插件需要一些特殊的标记和额外的标签，它应该自己创建它们。

原因是语义。当没有启用 JS 时，附加插件标记对用户（和机器人）毫无用处，因此它根本不应该存在。

还要记住，开发一个好的 JS 插件意味着当插件失败或 JS 被禁用时，内容仍然可用。此外，您必须额外注意确保您的插件是可访问的。更多关于渐进增强主题的内容还包括更高级的问题，例如，可以在[The Filament Group](http://filamentgroup.com/lab/announcing_our_book_designing_with_progressive_enhancement/)的一本书中找到。

**2.如何平衡插件选项和CSS？**

执行以下操作：

*   内容：HTML
*   逻辑：JS
*   介绍：CSS

尽管它现在发生了一些变化（想想 CSS3 动画），插件的选项可能会影响它的*工作*方式，而不是它的*外观*。这意味着您的用户应该能够配置时间、延迟、速度、元素数量或您的插件通过 JS 执行的任何操作。但将表现方面留在 CSS 样式表中。使用 JS 更改元素的类而不是内联样式，并让您的用户编写他们想要的任何 CSS。显然，不要忘记提供一些默认样式:)

[我总是建议阅读A List Apart](http://www.alistapart.com/articles/understandingprogressiveenhancement/)中有关该主题的更多信息。这是一篇相当理论性的文章，但绝对是任何前端开发人员的必读文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T07:13:13.900

Tutsplus 有一个带有有用视频的 jQuery 课程。 [http://tutsplus.com/lesson/head-first-into-plugin-development/](http://tutsplus.com/lesson/head-first-into-plugin-development/)

这是解释如何制作插件的视频之一。有很多方法可以创建插件，但这是一个很好的方法。

# php - 如何将变量设置为对象的命名操作？

> ID：10222307
> 
> 赞同：0
> 
> 时间：2012-04-19T05:46:13.640
> 
> 标签：php, javascript, oop, object

这是一个愚蠢的问题，但我想知道，如何命名 OOP 功能，该功能包括为对象提供值并且不会丢失对象，例如在 javascript 中它与 String 对象一起使用，但如果我想创建我可以设置一个值的对象，我该怎么做？：

```
// i set beer to budweiser
beer = new String('budweiser');

// beer is still String object and i changed its value ..
beer = 'Pabst'; 
```

但是在 PHP 中，当我执行以下操作时：

```
//robert is a new guy instance, and he is cool
$robert = new Guy('cool');

//but you discover he is stealing ur money
$robert = 'asshole';

//now if i want to use a Guy method, i cant
$robert->throwRocks(); 
```

所以我想知道，这个 OOP 功能是如何命名的，以及我如何在 PHP 和 JS 中使用它？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T06:02:58.843

Im not sure I understand your question (nor the humour), but you can make a class and assign variables to that class through the `construct` & `__set` then retrieve them through a method or property:

Here is some pseudo code:

```
<?php 
Class guy{
    private $vars = array();

    //Assigns name from the passed param
    function __construct($name){
        $this->name = $name;
    }

    public function __set($index, $value){$this->vars[$index] = $value;}
    public function __get($index){return $this->vars[$index];}

    public function getName(){
    return $this->name;
    }
}

$guy = new guy('Bob');

echo $guy->getName(); //Bob

$guy->name = "Steve";

echo $guy->getName(); //Steve

$guy->somerandVar = 'Bill'; //(Can only set because of the __set setter)

echo $guy->somerandVar; //Bill //Can only get because of the __get getter
?> 
```

# iphone - 将地图视图缩放到放置图钉的区域

> ID：10222308
> 
> 赞同：1
> 
> 时间：2012-04-19T05:46:35.463
> 
> 标签：iphone, ios, mkmapview, zooming

如果我在地图视图中有 3 个图钉，当地图加载时，我将如何缩放到这些图钉。也就是说，当地图加载时，我需要一个缩放视图，但该视图应该容纳地图中放置的所有图钉。当地图只有一个针脚时，它的工作原理。但我无法处理多个引脚的缩放。需要帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T06:05:31.883

The below method will do that,

```
- (void)zoomToFitMapAnnotations:(MKMapView *)mapView { 
    if ([mapView.annotations count] == 0) return; 

    CLLocationCoordinate2D topLeftCoord; 
    topLeftCoord.latitude = -90; 
    topLeftCoord.longitude = 180; 

    CLLocationCoordinate2D bottomRightCoord; 
    bottomRightCoord.latitude = 90; 
    bottomRightCoord.longitude = -180; 

    for(MapAnnotation *annotation in mapView.annotations) { 
        topLeftCoord.longitude = fmin(topLeftCoord.longitude, annotation.coordinate.longitude); 
        topLeftCoord.latitude = fmax(topLeftCoord.latitude, annotation.coordinate.latitude); 
        bottomRightCoord.longitude = fmax(bottomRightCoord.longitude, annotation.coordinate.longitude); 
        bottomRightCoord.latitude = fmin(bottomRightCoord.latitude, annotation.coordinate.latitude); 
    } 

    MKCoordinateRegion region; 
    region.center.latitude = topLeftCoord.latitude - (topLeftCoord.latitude - bottomRightCoord.latitude) * 0.5; 
    region.center.longitude = topLeftCoord.longitude + (bottomRightCoord.longitude - topLeftCoord.longitude) * 0.5;      
    region.span.latitudeDelta = fabs(topLeftCoord.latitude - bottomRightCoord.latitude) * 1.1; 

    // Add a little extra space on the sides 
    region.span.longitudeDelta = fabs(bottomRightCoord.longitude - topLeftCoord.longitude) * 1.1; 

    // Add a little extra space on the sides 
    region = [mapView regionThatFits:region]; 
    [mapView setRegion:region animated:YES]; 
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-19T06:13:05.237

我在一个应用程序中编写了以下代码，它类似于@ElanthiaiyanS Answer

```
-(void)zoomToFitMapAnnotations:(MKMapView*)mapView insideArray:(NSArray*)anAnnotationArray
{   
    // NSLog(@"%s", __FUNCTION__);
    if([mapView.annotations count] == 0) return;

    CLLocationCoordinate2D topLeftCoord;
    topLeftCoord.latitude = -90;
    topLeftCoord.longitude = 180;

CLLocationCoordinate2D bottomRightCoord;
bottomRightCoord.latitude = 90;
bottomRightCoord.longitude = -180;

for(MKPointAnnotation* annotation in anAnnotationArray)
{
    topLeftCoord.longitude = fmin(topLeftCoord.longitude, annotation.coordinate.longitude);
    topLeftCoord.latitude = fmax(topLeftCoord.latitude, annotation.coordinate.latitude);

    bottomRightCoord.longitude = fmax(bottomRightCoord.longitude, annotation.coordinate.longitude);
    bottomRightCoord.latitude = fmin(bottomRightCoord.latitude, annotation.coordinate.latitude);
}

MKCoordinateRegion region;
region.center.latitude = topLeftCoord.latitude - (topLeftCoord.latitude - bottomRightCoord.latitude) * 0.5;
region.center.longitude = topLeftCoord.longitude + (bottomRightCoord.longitude - topLeftCoord.longitude) * 0.5;
region.span.latitudeDelta = fabs(topLeftCoord.latitude - bottomRightCoord.latitude) * 1.1; // Add a little extra space on the sides
region.span.longitudeDelta = fabs(bottomRightCoord.longitude - topLeftCoord.longitude) * 1.1; // Add a little extra space on the sides

region = [mapView regionThatFits:region];
[mapView setRegion:region animated:YES]; 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T05:51:08.433

您可以计算所有引脚的中心

```
- (CLLocationCoordinate2D)centerPointFromAnnotationArray:(NSArray *)array
{
    CLLocationCoordinate2D coorMax = CLLocationCoordinate2DMake(0, 0);
    CLLocationCoordinate2D coorMin = CLLocationCoordinate2DMake(999, 999);

    for ( int i = 0 ; i < [array count] ; ++i )
    {
        LMPoint *a = [array objectAtIndex:i];

        if (  ( a.coordinate.latitude != 0.0f ) || ( a.coordinate.longitude != 0.0f ) )
        {
            if ( a.coordinate.latitude > coorMax.latitude )
            {
                coorMax.latitude = a.coordinate.latitude;
            }
            if ( a.coordinate.longitude > coorMax.longitude )
            {
                coorMax.longitude = a.coordinate.longitude;
            }
            if ( a.coordinate.latitude < coorMin.latitude )
            {
                coorMin.latitude = a.coordinate.latitude;
            }
            if ( a.coordinate.longitude < coorMin.longitude )
            {
                coorMin.longitude = a.coordinate.longitude;
            }
        }
    }

    CLLocationCoordinate2D coorCenter = CLLocationCoordinate2DMake((coorMax.latitude+coorMin.latitude)/2, (coorMax.longitude+coorMin.longitude)/2);

    return coorCenter;
} 
```

然后以适当的缩放级别缩放该点

# android - android.support.v4.widget.SearchViewCompat 例子？

> ID：10222311
> 
> 赞同：13
> 
> 时间：2012-04-19T05:46:45.760
> 
> 标签：android, searchview, android-search

我正在尝试在 API 8 应用程序中使用`SearchViewCompat`with 。`ActionBarSherlock`

```
public boolean onCreateOptionsMenu(Menu menu) {
    MenuItem item = menu.add("Search")
        .setIcon(isLight ? R.drawable.ic_search_inverse : R.drawable.ic_search)
        .setActionView(R.layout.collapsible_edittext);
    item.setShowAsAction(
        MenuItem.SHOW_AS_ACTION_ALWAYS | 
        MenuItem.SHOW_AS_ACTION_COLLAPSE_ACTION_VIEW);

    // To use SearchViewCompat, I need to add it to the Menu item as well:
    View searchView = SearchViewCompat.newSearchView(this);
    // ...
    SearchViewCompat.setOnQueryTextListener(...);
    // ...
    item.setActionView(searchView); 
```

请注意，顶部和底部代码都需要调用`setActionView()`. 这是否意味着无法进行搜索？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T13:19:59.690

如果您使用的是 ActionBarSherlock 库 4.2 版，您可以将 API 11 SearchView 小部件替换为 ActionBarSherlock SearchView 小部件，以使其向后兼容：

**搜索.xml**

```
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@+id/menu_search"
        android:icon="@drawable/ic_action_search"
        android:title="@string/description_search"
        android:orderInCategory="0"
        android:actionViewClass="com.actionbarsherlock.widget.SearchView"
        android:showAsAction="ifRoom|collapseActionView" /> 
</menu> 
```

**活动课**

```
//IMPORTANT!!!
import com.actionbarsherlock.widget.SearchView; 
```

...

```
@Override 
public boolean onCreateOptionsMenu(Menu menu) {
    super.onCreateOptionsMenu(menu);
    getSupportMenuInflater().inflate(R.menu.search, menu);
    setupSearchMenuItem(menu);
    return true;
}

private void setupSearchMenuItem(Menu menu) {
    MenuItem searchItem = menu.findItem(R.id.menu_search);
    if (searchItem != null) {
        SearchView searchView = (SearchView) searchItem.getActionView();
        if (searchView != null) {
            SearchManager searchManager = 
                 (SearchManager) getSystemService(SEARCH_SERVICE);
            searchView.setSearchableInfo(
                searchManager.getSearchableInfo(getComponentName()));
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-23T17:52:45.990

在您的活动中的某个时刻：

```
public class HomeActivity extends SherlockFragmentActivity implements 
    SearchView.OnQueryTextListener {

// ...    
SearchView searchView = (com.actionbarsherlock.widget.SearchView) 
    actionBarCustom.findViewById(R.id.search);
SearchManager sm = (SearchManager)getSystemService(SEARCH_SERVICE);
searchView.setSearchableInfo(sm.getSearchableInfo(getComponentName()));
searchView.setSubmitButtonEnabled(true);
searchView.setOnQueryTextListener(this); 
```

然后过滤您的列表适配器：

```
@Override
public boolean onQueryTextSubmit(String query) {
    return true;
}

@Override
public boolean onQueryTextChange(String newText) {
    mAdapter.getFilter().filter(newText.trim());
    return false;
} 
```

这样，您的列表适配器必须实现可过滤。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-10T05:33:55.710

实际问题是什么？由于该小部件不存在，因此将为HC 之前的设备`SearchViewCompat`返回。这意味着您必须提供您自己的模仿 HC SearchView 的自定义操作视图。`null``SearchView`

您还可以`SearchView`从 Android 源中反向移植组件并使用它。

否则，您可以只使用 Android 现有的搜索界面，在这种情况下，对于 HC+ 设备，您使用操作视图执行搜索，但在 Froyo 和 Gingerbread 设备上，用户单击搜索图标，搜索栏会从顶部显示动画。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-26T10:04:33.523

最好使用 MenuItemCompat，我认为这对您有帮助

```
 getMenuInflater().inflate(R.menu.main, menu);
    MenuItem searchItem = menu.findItem(R.id.search);
    SearchManager searchManager =(SearchManager)getSystemService(Context.SEARCH_SERVICE);
    SearchView searchView = (SearchView)MenuItemCompat.getActionView(searchItem);
    SearchableInfo info =  searchManager.getSearchableInfo(getComponentName());
    searchView.setSearchableInfo(info); 
```

# ms-access - 未指定的错误：打开 OleDbConnection

> ID：10222314
> 
> 赞同：0
> 
> 时间：2012-04-19T05:47:15.023
> 
> 标签：ms-access, office-2010, oledbconnection

*   使用 Office 2010 在 Windows XP 上出现未指定错误。
*   问题在某些机器上不是全部都可以重现。

代码

```
 Dim dbConn As New OleDbConnection("Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\test\data.mdb")
   try
   {
   dbConn.Open() 
   } 
```

例外

```
Exception:   at System.Data.OleDb.OleDbConnectionInternal..ctor(OleDbConnectionString   constr, OleDbConnection connection)
   at System.Data.OleDb.OleDbConnectionFactory.CreateConnection(DbConnectionOptions    options, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningObject)
   at    System.Data.ProviderBase.DbConnectionFactory.CreateNonPooledConnection(DbConnection    owningConnection, DbConnectionPoolGroup poolGroup)
   at System.Data.ProviderBase.DbConnectionFactory.GetConnection(DbConnection owningConnection)
   at System.Data.ProviderBase.DbConnectionClosed.OpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory)
   at System.Data.OleDb.OleDbConnection.Open() 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-04-19T07:18:24.430

尝试这个

```
Dim dbConn As  OLEDBConnection
Set dbConn = New Connection
dbConn.Open "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\test\data.mdb;" 
```

您需要声明 dcConn，然后在单独的语句中设置它。

# ruby-on-rails - 用 Rails.root 替换 RAILS_ROOT

> ID：10222317
> 
> 赞同：11
> 
> 时间：2012-04-19T05:47:35.860
> 
> 标签：ruby-on-rails

我想用 Rails.root 替换已弃用的 RAILS_ROOT 作为让应用程序准备好升级到 Rails 3 的过程的一部分。该应用程序当前运行版本为 2.3.14，最初是在 1.2 中创建的

我的 boot.rb 文件的开头是以下行：

RAILS_ROOT = "#{File.dirname( **FILE** )}/.." 除非定义？(RAILS_ROOT)

我不能在这里只替换 Rails.root，因为 Rails 是未定义的。

设置 Rails.root 的推荐方法是什么？

我认为我的问题不够清楚。

*   我知道 Rails.root 已经存在于 Rails 2 中。
*   我可以很高兴地在我的代码中使用 Rails.root。
*   但我不知道如何在启动时设置 Rails.root。我目前似乎被设置在 boot.rb 的顶部，如下所示：

    RAILS_ROOT = "#{File.dirname( **FILE** )}/.." 除非定义？(RAILS_ROOT)

*   我不能只更改该行以使用 Rails.root，因为我会收到错误：

    ../config/boot.rb:3: 未初始化的常量 Rails (NameError)

谢谢乔治

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-19T12:44:02.790

你可以这样使用

```
 Rails.root.join('lib/ca-bundle.crt') 
```

试试看

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T12:39:31.280

它看起来`Rails.root`确实存在于 Rails 2.3 中： http: [//apidock.com/rails/v2.3.2/Rails/root/class](http://apidock.com/rails/v2.3.2/Rails/root/class)

而在 2.3 中，它只是返回`RAILS_ROOT`，所以除非我弄错了，否则你可以`Rails.root`在你的代码中使用而无需其他修改。当您进行升级时，您`boot.rb`的模块将被替换，`Rails`因此您的代码应该继续正常工作。

此外，如果您还没有使用它，我和我的同事发现这个插件在不久前从 2.3 升级到 3.0 时**非常有用：** [https ://github.com/rails/rails_upgrade](https://github.com/rails/rails_upgrade)

# linux - 在 gcc 版本 4.1.2 中出现错误“无法识别的选项 -Xa”

> ID：10222318
> 
> 赞同：0
> 
> 时间：2012-04-19T05:47:37.127
> 
> 标签：linux, gcc, compiler-construction

在 Linux gcc 4.1.2 版中，我收到错误消息`"cc: unrecognized option '-Xa'"`。关于这个编译器选项的任何想法`'-Xa'`。但是它在 solaris gcc 3.4.3 版本中编译。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-21T14:27:05.773

`-Xa` is a Sun C compiler option. From **Man Page cc.1**:

```
     -X[c|a|t|s]
          Specifies the degree of conformance to the ISO C stan-
          dard[...]

          a    This is the default compiler mode. ISO C plus K&R
               C compatibility extensions, with semantic changes
               required by ISO C. Where K&R C and ISO C specify
               different semantics for the same construct, the
               compiler uses the ISO C interpretation. If the -Xa
               option is used in conjunction with the -xtransi-
               tion option, the compiler issues warnings about
               the different semantics. The predefined macro
               __STDC__ has a value of 0 with the -Xa option.

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T06:05:35.017

但是，输出是“cc ...”。你确定你使用的是 gcc。不是其他编译器（例如 SUN cc）？

您可以在 Solaris、HPUX、AIX 等上安装 gcc，但通常不能在其他环境（包括 linux）中安装专有的 cc 编译器。

# jquery - 使用j查询和html5随机解析xml显示数据后

> ID：10222327
> 
> 赞同：0
> 
> 时间：2012-04-19T05:48:16.343
> 
> 标签：jquery, xml, html

您好，我是 HTML5 和 j 查询的新手。我必须从我成功完成的 XML 中解析数据。现在解析数据后，我想使用 j 查询随机显示它。请建议我该怎么做。

代码片段是

```
 // code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp=new XMLHttpRequest();
    }else {
        // code for IE6, IE5
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.open("GET","xml/multiquestions1.xml",false);
    xmlhttp.send();
    xmlDoc=xmlhttp.responseXML;     

    var x=xmlDoc.getElementsByTagName("question");
    $(document).ready(function (){
        for(var j=0;j<x.length;j++)
        {
            if(j==0)
            {
                $("#navigationlist").append('<li><a href="#" id="selected_link"  class="navg" onClick="display_nav('+j+',this);">'+(j+1)+'</a></li>');   
                display_nav(j,$("#selected_link"))
            }
            else
                $("#navigationlist").append('<li><a href="#" class="navg" onClick="display_nav('+j+',this);">'+(j+1)+'</a></li>');   
        }               
    });

function display()
    {
        // for fetch question
        Description=(x[i].getElementsByTagName("questionTxt")[0].childNodes[0].nodeValue);
        Answer =(x[j].getElementsByTagName("image")[0].childNodes[0].nodeValue);

        document.getElementById('options').style.backgroundImage = 'url('+Answer+')';

        // Assign the value
        document.getElementById("question").innerHTML= Description; 

    }   

function display_nav(j,obj)
    {
       i=j;
       $("#feedback").html(""); 
        $(".navg").each(function(){

           $(this).removeAttr("id");                         
        });

        $(obj).attr("id","selected_link");
        Description=(x[j].getElementsByTagName("questionTxt")[0].childNodes[0].nodeValue);
        Answer =(x[j].getElementsByTagName("image")[0].childNodes[0].nodeValue);
        answermin=(x[j].getElementsByTagName("answermin")[0].childNodes[0].nodeValue);
        answermax=(x[j].getElementsByTagName("answermax")[0].childNodes[0].nodeValue);

        $("#bob").attr("min",answermin);
        $("#bob").attr("max",answermax);
        $("#bob").attr("value",0);
        $("#out").html(0);
        $("#out").css({left:0});

        // Assign the value
        document.getElementById("question").innerHTML= Description;
        //document.getElementById("options").style.backgroundImage = url(Answer);
        document.getElementById('options').style.backgroundImage = 'url('+Answer+')';       
    }   

and xml is

<?xml version="1.0" encoding="utf-8"?>
<FlashCards>
  <question id="1">
    <questionTxt type="text"><![CDATA[Hello!]]></questionTxt>
<image visible="true"><![CDATA[img/smiley1.png]]></image>
    </question>  
 <question id="2">
    <questionTxt type="text"><![CDATA[Hi]]></questionTxt>
<image visible="true"><![CDATA[img/smiley2.png]]></image>

</question> 
</FlashCards> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T07:04:03.210

jQuery 自带解析函数`jQuery.parseXML()`-> [parseXML](http://api.jquery.com/jQuery.parseXML/)

然后，您可以更轻松地在已解析的 xml 之上进行搜索。

```
var xml = $.parseXML(xmlString),
    // find and count all questions
    questionCount = xml.find('question').length();
// find a random question out of the pool
xml.find('question#'+ Math.floor(Math.random() * (questionCount + 1))): 
```

我没有测试它，但我希望你明白这一点。

# javascript - 光标图像在 IE 中不起作用

> ID：10222328
> 
> 赞同：0
> 
> 时间：2012-04-19T05:48:20.113
> 
> 标签：javascript, html

我有一个带有以下 CSS 的 div。

```
.mydiv
{
    cursor: url("/image/cursor-hand.png"), move;
} 
```

在 chrome、Firefox 和 safari 中运行良好，但在 IE 中不起作用。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T05:51:16.150

IE不支持普通图形，你需要一个[光标文件](http://en.wikipedia.org/wiki/.cur) `.cur`。

也可以看看：

*   quirksmode.org：[兼容性列表：光标](http://quirksmode.org/css/cursor.html#t013)
*   [MDN：为光标属性使用 URL 值](https://developer.mozilla.org/en/CSS/Using_URL_values_for_the_cursor_property)

# jquery - jQuery倒计时和重定向

> ID：10222333
> 
> 赞同：4
> 
> 时间：2012-04-19T05:48:54.493
> 
> 标签：jquery

有人知道如何进行此设置吗？

[如何进行 jQuery 倒计时](https://stackoverflow.com/questions/2064186/how-can-i-make-a-jquery-countdown)

我阅读了帖子，并自己尝试了代码。

但无论我如何改变我的位置。它终于还是去redirect.php，我想把时间从10秒改成130秒。

我也改变了值。但是一点效果都没有。

任何想法？

谢谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-19T06:00:55.890

```
 var count = 130;
  var countdown = setInterval(function(){
    $("p.countdown").html(count + " seconds remaining!");
    if (count == 0) {
      clearInterval(countdown);
      window.open('http://google.com', "_self");

    }
    count--;
  }, 1000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T06:02:00.520

Check out below lines of code:

```
<p>Counting down to 30 January <span id="year">2010</span>.</p>
<div id="ClsCountdown"></div>

<script type="text/javascript">
$(function () {
    var newDay= new Date();
    newDay= new Date(newDay.getFullYear() + 1, 1 - 1, 30);
    $('#ClsCountdown').countdown({until: newDay});
    $('#year').text(newDay.getFullYear());
});

</script> 
```

You can also refer below link:

[http://chandreshmaheshwari.wordpress.com/2011/06/20/jquery-countdown-code/](http://chandreshmaheshwari.wordpress.com/2011/06/20/jquery-countdown-code/)

**UPDATED:** [jquery redirect on click or after 10 seconds](https://stackoverflow.com/questions/3234017/jquery-redirect-on-click-or-after-10-seconds)

This will make helpful for you.

Thanks.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T12:56:14.007

使用支持自定义倒计时值的 jQuery 倒计时插件（例如[jCounter）并使用其后备设置进行重定向。](http://devingredients.com/jcounter/)

例如，大多数插件都有一个后备设置，您可以让它运行

```
function() {  window.open('http://website.com', '_self'); } 
```

通常用作：

```
$('.countdownClass').jCounter({
//settings here and the fallback:
fallback: function { window.open('http://website.com', '_self'); }
}); 
```

# spring - spring security - 如何配置 ExpressionBasedPreInvocationAdvice 以使用自定义表达式处理程序？

> ID：10222337
> 
> 赞同：1
> 
> 时间：2012-04-19T05:49:21.107
> 
> 标签：spring, security, spring-security, spring-3

> **可能重复：**
> [如何创建自定义方法以在 Spring 安全表达式语言注释中使用](https://stackoverflow.com/questions/6632982/how-to-create-custom-methods-for-use-in-spring-security-expression-language-anno)

我希望在内部使用自定义方法，`@PreAuthorize`例如：

```
@PreAuthorize("canPlayGolf(something,something)") 
```

为此，我创建了一个副本`MethodSecurityExpressionRoot`（不能对其进行子类化，因为它在**Spring Security 3.0.6**中具有包访问权限）并在那里添加我的自定义函数。我需要在 中使用这个自定义表达式根`MethodSecurityExpressionHandler`，但由于它是硬编码`MethodSecurityExpressionRoot`的，我将它子类化以使用我的自定义表达式根（我必须创建一个副本，`MethodSecurityEvaluationContext`因为我必须在我的覆盖中使用它`createEvaluationContext`并且它再次具有包访问权限） .

最后，我不知道如何将我的自定义表达式处理程序连接到 中`ExpressionBasedPreInvocationAdvice`，以便我可以使用我的自定义表达式`@PreAuthorize`

# mysql - 用mysql统计第一名的分数

> ID：10222338
> 
> 赞同：2
> 
> 时间：2012-04-19T05:49:22.557
> 
> 标签：mysql, sql

好的，所以我有以下数据库：

```
CREATE TABLE IF NOT EXISTS `highscores` (
  `lid` int(11) NOT NULL,
  `username` varchar(15) NOT NULL,
  `score` int(16) NOT NULL,
  PRIMARY KEY  (`lid`,`username`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1; 
```

盖子是级别ID。

假设我在表中有以下值：

```
lid, username,score

1,sam,15 
1,joe,12
1,sue,6
1,josh,9
2,sam,8
2,joe,16 
2,sue,4
3,sam,65 
4,josh,87 
4,sue,43
5,sam,12
5,sue,28
5,joe,29
and so on. 
```

我将如何创建一个查询（或者如果需要一组查询）来获得以下信息

```
sam has 3 high scores
joe has 2 high scores
josh has 1 high score 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T06:12:37.953

我还没有测试过，但试试下面的查询

```
select 
    concat(h.username ," has ", count(h.username)," high scores ")
from
    highscores h inner join
    (select lid, max(score) as maxscore
     from highscores group by lid) t on h.lid = t.lid and h.score = t.maxscore
group by h.username 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T06:13:50.877

根据您的描述，此查询将产生您需要的内容

```
SELECT username,COUNT(*) as num_highscores FROM (
SELECT lid,username
FROM highscores h1
WHERE score=(
    SELECT MAX(score) 
    FROM highscores h2 
    WHERE h2.lid=h1.lid
)
) AS high_scores
GROUP BY username
ORDER BY num_highscores DESC 
```

尽管我从您的样本数据中得到的结果不同：

*   山姆 2
*   乔 2
*   乔希 1

# asp.net-mvc - 在 asp.net mvc 中使用异步写入日志

> ID：10222340
> 
> 赞同：1
> 
> 时间：2012-04-19T05:49:26.647
> 
> 标签：asp.net-mvc, asynchronous

我想 在asp.net mvc中**异步**写入日志，代码是这样的：

```
public ActionResult Index()
        {
            byte[] buffer = Encoding.UTF8.GetBytes(string.Format("log:{0}{1}", DateTime.Now.ToString("yyyy-MM-dd HH:mm:ss:ffff"), Environment.NewLine));
            FileStream fs = new FileStream(@"c:\log.txt", FileMode.Append, FileAccess.Write, FileShare.Write, 1024, true);
            fs.BeginWrite(buffer, 0, buffer.Length, ar =>
              {
                  fs.EndWrite(ar);
                  fs.Close();
              }, null);
         } 
```

但是结果出乎我的意料，**一些日志没有被记录**，谁能告诉我代码有什么问题

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-19T06:01:48.463

You need to ensure that only one thread is writing to the file. If you have 2 concurrent users calling the Index action at the same time chances are they will try to write to the log file at the same time and the second will fail. In a multithreaded applications such as ASP.NET always make sure that you are properly synchronizing access to shared resources.

Also in your code you are not guarding against errors. What if an exception is thrown? You never close this stream and the second attempt to access it will throw an exception.

So one possibility to simplify this code is to use the TPL:

```
private static object _synRoot = new object();

public ActionResult Index()
{
    Task.Factory.StartNew(() =>
    {
        lock (_synRoot)
        {
            var data = string.Format("log:{0}{1}", DateTime.Now.ToString("yyyy-MM-dd HH:mm:ss:ffff"), Environment.NewLine)
            System.IO.File.AppendAllText("log.txt", data);
        }
    });
    return View();
} 
```

and to avoid such noise and pollution in your controllers you could use action filters:

```
public class LogAttribute : ActionFilterAttribute
{
    private static object _synRoot = new object();

    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        Task.Factory.StartNew(() =>
        {
            lock (_synRoot)
            {
                var data = string.Format("log:{0}{1}", DateTime.Now.ToString("yyyy-MM-dd HH:mm:ss:ffff"), Environment.NewLine)
                System.IO.File.AppendAllText(@"log.txt", data);
            }
        });
    }
} 
```

and then:

```
[Log]
public ActionResult Index()
{
    return View();
} 
```

But instead of reinventing wheels I would recommend you using the [tracing capabilities](http://msdn.microsoft.com/en-us/library/system.diagnostics.trace.aspx) built into the .NET framework.

# c# - 如何在 log4net 中以编程方式添加 remotingappender

> ID：10222341
> 
> 赞同：2
> 
> 时间：2012-04-19T05:49:41.627
> 
> 标签：c#, log4net

当我有以下 xml 配置来为 remotingappender 配置 log4net 时，一切正常。

```
<log4net>
  <appender name="RemotingAppender" type="log4net.Appender.RemotingAppender" >
    <sink value="tcp://localhost:8085/LoggingSink" />
    <lossy value="false" />
    <bufferSize value="1" />
    <onlyFixPartialEventData value="true" />
  </appender>
  <root>
    <level value="ALL" />
    <appender-ref ref="RemotingAppender" />
  </root>
</log4net> 
```

我想在代码中做同样的事情。我搜索了一下，找到了一个类似下面的例子。但我无法让它工作。

```
 ILog log = log4net.LogManager.GetLogger("logName");
        Repository.Hierarchy.Logger l = (Repository.Hierarchy.Logger)log.Logger;

        // set level
        l.Level = l.Hierarchy.LevelMap["ALL"];
        // create appander
        Appender.RemotingAppender remotingAppender = new Appender.RemotingAppender();
        remotingAppender.Name = "custom";
        remotingAppender.Sink = "tcp://localhost:8085/LoggingSink";
        remotingAppender.Lossy = false;
        remotingAppender.BufferSize = 1;
        //remotingAppender.Fix = log4net.Core.FixFlags.All;
        // create pattern
        log4net.Layout.PatternLayout layout = new log4net.Layout.PatternLayout();
        layout.ConversionPattern = "%d [%thread] %-5p %c [%a] - %m [%line] [%M]%n";
        layout.ActivateOptions();

        remotingAppender.Layout = layout;
        remotingAppender.ActivateOptions();

        // add appender
        l.AddAppender(remotingAppender);
        // perform logging (doesnt work)
        log.Warn("my warning");
        log.Error("my error"); 
```

我的代码中缺少什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T06:13:46.363

尝试`log4net.Config.BasicConfigurator.Configure(...)`超载之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-17T09:57:13.377

我终于让它工作了。我首先加载几乎是空的xml配置。然后我把具有相同模式字符串的模式布局作为远程监听器。我修改后的xml文件如下：

```
<log4net>
  <root>
    <level value="ALL" />
  </root>
</log4net> 
```

我在我的应用程序（program.c）的开头加载了这个配置

```
log4net.Config.XmlConfigurator.Configure(file) 
```

# google-app-engine - 运行 Google App Engine 测试项目时出现 ImportError

> ID：10222342
> 
> 赞同：5
> 
> 时间：2012-04-19T05:49:45.253
> 
> 标签：google-app-engine, python-2.7

我是 Google App Engine 的新手，所以我只是按照程序测试了一个只打印“hello world”的应用程序。

（按照 Google App Engine 文档）

项目文件夹名称为“GoogleApp”

这是我的 Python 文件：

文件名：sayHello.py

```
#!/usr/bin/env python

def main():
    print "hello"
    pass

if __name__ == '__main__':
    main() 
```

这是yaml文件

文件名：app.yaml

```
application: GoogleApp
version: 1
runtime: python27
api_version: 1
threadsafe: true

handlers:
- url: /.*
  script: sayHello.py 
```

当我刚刚在 Google App Engine Launcher 中运行项目时，这是我得到的日志错误

```
2012-04-19 10:52:23 Running command: "['C:\\Python27\\pythonw.exe', 'C:\\Program Files\\Google\\google_appengine\\dev_appserver.py', '--admin_console_server=', '--port=8080', 'D:\\Code\\Projects\\IRCmathBot\\GoogleApp']"
Traceback (most recent call last):
  File "C:\Program Files\Google\google_appengine\dev_appserver.py", line 125, in <module>
    run_file(__file__, globals())
  File "C:\Program Files\Google\google_appengine\dev_appserver.py", line 121, in run_file
    execfile(script_path, globals_)
  File "C:\Program Files\Google\google_appengine\google\appengine\tools\dev_appserver_main.py", line 157, in <module>
    from google.appengine.tools import appcfg
  File "C:\Program Files\Google\google_appengine\google\appengine\tools\appcfg.py", line 41, in <module>
    import mimetypes
  File "C:\Python27\lib\mimetypes.py", line 29, in <module>
    import urllib
  File "C:\Python27\lib\urllib.py", line 26, in <module>
    import socket
  File "C:\Python27\lib\socket.py", line 47, in <module>
    import _socket
ImportError: Module use of python25.dll conflicts with this version of Python.
2012-04-19 10:52:25 (Process exited with code 1) 
```

实际上，我使用 Python 2.7。上面的日志说 python25.dll 与 python 的版本冲突。

我不知道它到底是什么意思，但我可以解释

1.  它应该只支持 python 2.5 或
2.  我应该使用 python 2.5 代码。

因为第二个是不可能的，而且谷歌支持 2.7，我不知道这个错误是什么。

尝试弄清楚自己，但无法成功。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T00:18:43.773

我有一个非常相似的问题（在运行教程代码时），并通过检查我的 PythonPath 系统环境变量来解决它。

对我来说，OpenCV 编辑了 PythonPath 变量以指向它自己的目录结构，而不是基础 Python 安装本身。

您可以通过打开“高级系统属性”窗口并单击“环境变量”按钮来编辑环境变量。“系统变量”下的“PythonPath”变量。至少，它应该包含您的 python 可执行文件的路径，例如“C:\Python27\”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T22:57:41.813

你试过命令行吗？忘记启动器。我有同样的问题！我多次重新安装 Python，更改了版本。这很有趣。使用 2.5 版本的启动器可以启动服务器，但应用程序不起作用，但我可以通过启动器在线上传。使用 Python 版本。2.7，启动器显示您正在处理的相同问题。我也无法在本地启动服务器。但是命令行运行良好，无论是在本地启动服务器还是在线上传。所以我会坚持使用 2.7 版。希望对你有帮助，告诉我..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T08:28:22.257

经过 3 小时的努力，我解决了这个问题。重新安装无法解决我的问题，弄乱用户/系统环境变量也不起作用。按照这个步骤工作：

打开 Google Drive Perference，关闭 win 启动后自动运行关闭 Google Drive 或干脆卸载 google drive（Google Drive 似乎使用 Python 2.5 _socket 库

卸载python和GAE重启安装python27和GAE最重要的是指定一个新路径，不要再使用默认的c:\python27（我改成c:\mypython27了。和GAE一样，使用新路径。

然后它再次工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-19T06:58:21.587

您启用了线程安全，因此您应该使用 WSGI 处理程序。这可能是问题所在。我会用以下代码替换您的代码：

文件：helloworld.py

```
import webapp2

class MainPage(webapp2.RequestHandler):
    def get(self):
        self.response.headers['Content-Type'] = 'text/plain'
        self.response.out.write('Hello, WebApp World!')

app = webapp2.WSGIApplication([('/', MainPage)]) 
```

文件：app.yaml

```
application: GoogleApp
version: 1
runtime: python27
api_version: 1
threadsafe: true

handlers:
- url: /.*
  script: helloworld.app 
```

如果在 Google AppEngine 上使用 Python2.7，请参阅此官方[文档](https://developers.google.com/appengine/docs/python/python27/using27)来创建您的第一个“Hello World”应用程序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-01T09:16:42.773

我猜您已将 GAE 路径添加到环境变量 PATH 中？只需将其删除。

我和你有完全相同的问题，在我看来，Python 2.7 会尝试在 GAE 路径下使用不正确的 _socket.pyd 库，从 PATH 中删除 GAE 路径将解决这个问题。

它不需要额外的编码，只需要你的 win 操作系统的一个小配置。由于我的操作系统语言是中文，以下图标/链接的名称是我自己从中文翻译过来的，我不能保证是正确的:(

1.  右键单击“计算机”图标，选择“属性”，您将看到系统面板显示一些基本系统信息；
2.  单击“高级系统设置”链接，您将看到包含多个选项卡的系统属性面板；
3.  选择“高级”选项卡，底部应该有一个名为“环境变量”的按钮，单击它，您可以看到一个显示系统所有环境变量的对话框；
4.  查找并编辑名为“PATH”或“Path”的变量（不区分大小写）：如果其值包含指向您的 GAE 的路径，则删除 GAE 路径。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-02-22T02:11:02.260

你在环境变量中有一个 PYTHONPATH 变量吗？删除它并重新启动 Google App Engine Launcher，它会工作！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-20T00:46:47.100

您的 Python 2.7 安装出现了严重问题——其中一部分引用了 Python 2.5 库。你应该卸载你机器上所有版本的 Python，然后重新安装你需要的版本。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-10-28T23:18:49.223

某些程序可能会修改`PYTHONPATH`环境变量。如果您检查它的值（系统 -> 环境变量）并确保将其设置为正确的 python 2.7 路径（默认 C:\Python27），那么这应该可以解决问题。就我而言，某些东西已将其设置为我的 google appengine 路径。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-11-20T08:16:51.373

```
ImportError: Module use of python25.dll conflicts with this version of Python. 
```

问题是`python25.dll`与您的 Python 2.7 安装冲突。这`python25.dll`来自非常过时的适用于 Windows 的 Google App Engine Launcher，位于`C:\Program Files\Google\google_appengine\launcher`

这不是您的 Python 2.7 安装的问题 - 这是 Launcher 的问题，它会将自己的 Python 路径注入应用程序环境。`google_appengine/dev_appserver.py`为了测试这一点，在第一次导入之后的顶部添加以下行：

```
from pprint import pprint
pprint(sys.path) 
```

然后重新运行您的应用程序以获取新日志并亲自查看：

```
...
'C:\\OpenCV2.3\\opencv\\build\\python\\2.7',
'C:\\Google\\google_appengine\\launcher',
'C:\\Windows\\system32\\python27.zip',
'C:\\Python27\\DLLs',
... 
```

我从 Python .msi SDK 1.8.8 中获得了启动器，当然谷歌仍然提供了几个版本的 SDK 以及损坏的 GUI 工具。要解决此问题，请在第一次导入后添加以下内容`dev_appserver.py`：

```
# --- Repair sys.path after broken GAE Windows Launcher
# see http://stackoverflow.com/questions/10222342/
ROOT = os.path.abspath(os.path.dirname(__file__))
LAUNCHPATH = os.path.join(ROOT, 'launcher')
if LAUNCHPATH in sys.path:
  sys.stderr.write('[BUG] GAE Windows Launcher detected. Fixing..\n')
  sys.path.remove(LAUNCHPATH)
# /-- 
```

不幸的是，当新版本的 GAE 出现时，您需要重复该过程。AppEngine 跟踪器上有一个[问题 #8568](https://code.google.com/p/googleappengine/issues/detail?id=8568)，您可以加注星标并发表评论以使其在某一天得到修复。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-04-24T11:03:32.217

我将 PYTHON_PATH 设置为

> “C:\Program Files\Google\google_appengine;C:\Program Files\Google\google_appengine\lib\antlr3; **C:\Program Files\Google\google_appengine\lib\django_0_96** ;C:\Program Files\Google\google_appengine\lib \fancy_urllib;C:\Program Files\Google\google_appengine\lib\graphy;C:\Program Files\Google\google_appengine\lib\ipaddr;C:\Program Files\Google\google_appengine\lib\simplejson;C:\Program Files \Google\google_appengine\lib\webob;C:\Program Files\Google\google_appengine\lib\yaml\lib"

但后来我意识到 django 0.96 需要 python 2.5，所以使用 django 1.4，它工作正常。

> “C:\Program Files\Google\google_appengine;C:\Program Files\Google\google_appengine\lib\antlr3; **C:\Program Files\Google\google_appengine\lib\django-1.4** ;C:\Program Files\Google\google_appengine \lib\fancy_urllib;C:\Program Files\Google\google_appengine\lib\graphy;C:\Program Files\Google\google_appengine\lib\ipaddr;C:\Program Files\Google\google_appengine\lib\simplejson;C:\ Program Files\Google\google_appengine\lib\webob;C:\Program Files\Google\google_appengine\lib\yaml\lib"

如果您遇到与上述相同的问题，只需检查 PATH、PYTHON_PATH 以查看库和 python 之间的版本是否不匹配。希望这有帮助。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-02-04T18:03:26.283

对我来说，我确实将系统变量 PYTHONPATH 设置为“.”。删除变量就完成了！

# xml - 在页面上找到的 RSS 提要被认为是无效的，但会显示在嵌入的片段中

> ID：10222355
> 
> 赞同：0
> 
> 时间：2012-04-19T05:51:19.110
> 
> 标签：xml, rss

我想获取[带有嵌入式段的网站](http://www.idug-db2.com/)的 RSS 提要，但不能。在使用脾气数据后，我发现 XML 导致了一个提要，但没有验证。我测试了返回以下内容[的提要的有效性：](http://www.rssboard.org/rss-validator/ "RSS 顾问委员会")

> 看起来这是一个网页，而不是提要。我寻找与此页面相关的提要，但找不到。请输入您的供稿地址以进行验证。

查看[此 XML 的源代码](http://www.brighttalk.com//service/channel/xml/feed/7637)（经过修改，截断如下），它似乎不是 HTML 页面：

```
<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xmlns:bt="http://example.com/2009/atom_extensions">
  <title>IDUG DB2 Tech Channel</title>
  <id>tag:example.com,2012:channel:7637</id>
  <bt:description>Desciption</bt:description>
  <subtitle>Joint DB2 Tech Talk series sponsored by IDUG with IBM</subtitle>
  <updated>2012-04-18T16:53:39Z</updated>
  <link href="http://www.example.org" rel="alternate" type="text/html"/>
  <link href="http://www.example.com/channel/7637/feed" rel="self" type="application/atom+xml"/>
  <entry>
    <id>tag:example.com,2012:communication:47115</id>
    <title>DB2 Tech Talk: Oracle Database and PL/SQL Compatibility Features of DB2 10</title>
    <updated>2012-05-31T16:30:00Z</updated>
    <summary>blah blah</summary>
    <author>
      <name>Serge Rielau</name>
    </author>
    <bt:communication id="47115"/>
    <bt:channel id="7637"/>
    <bt:status>upcoming</bt:status>
    <bt:format>audio</bt:format>
    <bt:duration>5400</bt:duration>
    <bt:start>1338481800</bt:start>
    <bt:entryTime>1338481500</bt:entryTime>
    <bt:closeTime>1338487500</bt:closeTime>
    <bt:rating>0</bt:rating>
    <link href="http://www.example.org?commid=47115" rel="alternate" type="text/html"/>
    <link href="http://www.example.com/communication/47115/tn1_1.png" rel="enclosure" type="image/png" title="thumbnail"/>
    <link href="http://www.example.com/communication/47115/slide1_001.png" rel="related" type="image/png" title="preview"/>
    <link href="http://www.example.com/communication/47115/calendar/ics" rel="related" type="text/calendar" title="calendar"/>
    <category scheme="keyword" term="DB2"/>
    <category scheme="keyword" term="Oracle"/>
    <category scheme="keyword" term="Database"/>
    <category scheme="keyword" term="PL/SQL"/>
    <category scheme="keyword" term="compatibility"/>
    <category scheme="keyword" term="SQL"/>
  </entry>
  ...
</feed> 
```

为什么这不是有效的 RSS 提要？[http://www.idug-db2.com/](http://www.idug-db2.com/)上的页面是否有我可以使用的 RSS 提要？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T01:13:14.000

RSS 是一种 XML，它具有自己定义的一组元素，必须出现这些元素才能使其有效。

> [RSS 是 XML 的一种方言](http://cyber.law.harvard.edu/rss/rss.html "RSS 2.0 规范")。所有 RSS 文件都必须符合万维网联盟 (W3C) 网站上发布的 XML 1.0 规范。

就像有翼精灵和矿工矮人是类人生物一样，但它们的构造不同。你在这里也有同样的事情。它是一个有效的 XML 提要，站点能够根据需要在嵌入部分中摄取和消化。

但它不是一个有效的 RSS 提要，因为它没有所需的元素以及添加不属于 RSS 规范的其他元素。

如果您有一个可以根据需要解释 XML 提要源的解析器，或者您可以编写自己的类/方法，那么您正在查看的那个就可以了。正如示例站点所做的那样。

只是不适用于那些期望 RSS 采用规范定义的格式的读者或解析器。

# visual-c++ - 是否可以读取使用 microsoft visual c++ 编译的程序的源代码？

> ID：10222356
> 
> 赞同：0
> 
> 时间：2012-04-19T05:51:25.403
> 
> 标签：visual-c++, compiler-construction, decompiling, decompiler

我知道有用于反编译 C# 程序的工具。使用 microsoft visual c++ 是否会使代码容易受到逆向工程的影响？

隐藏源代码的最佳工具和最佳编程语言是什么？或者有吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T05:54:20.333

不，Microsoft C++ 编译为机器代码。

虽然极其智能的反汇编程序可能能够从机器代码生成 C++ 代码，但无法确保生成的代码与原始源代码匹配。

# ios - [iOS][objC] 无法将 NSDictionary 中的值转换为 NSString

> ID：10222360
> 
> 赞同：0
> 
> 时间：2012-04-19T05:51:38.403
> 
> 标签：ios, nsstring, nsdictionary

我打算将 iOS SDK 中的 NSDictionary* 对象转换为 NSString*。

假设我的 NSDictionary 对象具有以下键值对： {"aps":{"badge":9, "alert":"hello"}} （注意值本身是一个 NSDictionary 对象），我希望它转换成键值对为 {"aps":"badge:9, alert:hello"} 的哈希映射（注意值只是一个字符串）。

我可以使用以下代码打印 NsDictionary 中的值：

```
NSDictionary *userInfo; //it is passed as an argument and contains the string I mentioned above
for (id key in userInfo)
{
     NSString* value = [userInfo valueForKey:key]; 
     funct( [value UTF9String]; // my function 
} 
```

但我无法在像 UTT8String 这样的值对象上调用任何 NSString 方法。它给了我错误“由于未捕获的异常 NSInvalidArgumentException 导致应用程序终止：原因 [_NSCFDictionary UTF8String]：无法识别的选择器已发送到实例

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T06:17:25.347

您将不得不递归处理字典结构，这是一个您应该能够适应的示例：

```
-(void)processParsedObject:(id)object{
   [self processParsedObject:object depth:0 parent:nil];
}

-(void)processParsedObject:(id)object depth:(int)depth parent:(id)parent{

   if([object isKindOfClass:[NSDictionary class]]){

      for(NSString * key in [object allKeys]){
         id child = [object objectForKey:key];
         [self processParsedObject:child depth:depth+1 parent:object];
      }                         

   }else if([object isKindOfClass:[NSArray class]]){

      for(id child in object){
         [self processParsedObject:child depth:depth+1 parent:object];
      }   

   }
   else{
      //This object is not a container you might be interested in it's value
      NSLog(@"Node: %@  depth: %d",[object description],depth);
   }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T09:15:36.117

您需要将该循环应用于每个孩子，而不是主字典。您说自己在字典中有字典：

```
for(id key in userInfo)
{
    NSDictionary *subDict = [userInfo valueForKey:key];
    for(id subKey in subDict)
    {
        NSString* value = [subDict valueForKey:subKey]; 
    }
} 
```

此循环假定您在第一级拥有整个字典，否则您将需要使用 danielbeard 的递归方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T07:05:23.240

我找到了最简单的出路。在 NSDictionary 对象上调用 description 方法给了我我真正需要的东西。愚蠢地在第一次去时错过了它。

# asp.net-mvc-3 - HTML 5 离线功能是否适用于浏览器？

> ID：10222361
> 
> 赞同：0
> 
> 时间：2012-04-19T05:51:39.313
> 
> 标签：asp.net-mvc-3, html, offline-caching

我已经在这几天了，我变得越来越沮丧。我在 Chrome、FF 上得到不一致的离线功能结果，我刚刚开始使用 Safari。

我正在使用 Asp .Net MVC 3 开发沙盒应用程序。下面是我的应用程序的结构：

*   控制器/汽车控制器
*   视图/汽车/编辑
*   视图/汽车/编辑离线
*   浏览量/汽车/索引

在 3 个视图中，Index 是唯一定义了 manifest 属性的视图。索引是最初请求的视图。以下是我的清单的内容：

```
CACHE MANIFEST

FALLBACK:
Car/Edit Car/EditOffline

#Version 1 
```

在 Index 的第一个请求时，浏览器会在 Application Cache 中创建 3 个条目。他们是：

*   本地主机/沙盒/汽车，类型 = 主
*   localhost/Sandbox/Car/EditOffline，类型 = 后备
*   本地主机/沙盒/离线。，类型=清单

我一直在模拟所有 3 个浏览器的脱机行为的方式是显式停止 IIS。之后，已请求索引。我关闭了 IIS 并向 Edit 操作发出请求。结果是 EditOffline 得到了服务。现在，当我再次查看 Index 视图时，我收到 404 错误，但为什么呢？我以为浏览器会提供该页面的缓存版本？当我重新请求编辑视图时（仍处于离线状态），我也收到 404 错误，但为什么呢？浏览器之前提供了 EditOffline 视图，那么为什么我现在得到 404 呢？在 FF 中，我已经让它按预期工作了几次，但我没有进行任何代码更改。我明确删除了离线缓存，重新启动服务器，重新请求索引视图，它神奇地工作了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T07:45:06.420

看起来您的初始请求是针对`http://localhost/Sandbox/Car`，然后是您获得 404 的 URL 吗？清单通过 URL 工作，但它对默认页面或任何其他服务器配置一无所知。就应用程序缓存而言，`http://localhost/Sandbox/Car`不同的页面也是如此。`http://localhost/Sandbox/Car/Index`除了您在其中包含对清单文件的引用之外，所涉及的视图在很大程度上与缓存无关。

# jquery - jquery isotope - 居中和角戳

> ID：10222363
> 
> 赞同：1
> 
> 时间：2012-04-19T05:51:44.290
> 
> 标签：jquery, jquery-isotope

我正在使用居中布局的同位素插件。没有问题。容器宽度根据活动列数增加或减少。但是当我在布局中添加角戳时，它不会调整容器宽度。我该如何解决？

[居中且无角戳](http://jsfiddle.net/salt/QNkVF/)

[居中和角戳](http://jsfiddle.net/salt/Cc2JC/)

# css - primefaces中工具提示文本的工具提示背景颜色更改和字体样式

> ID：10222366
> 
> 赞同：2
> 
> 时间：2012-04-19T05:52:15.970
> 
> 标签：css, jsf, primefaces

我正在尝试查看prime-faces中的一些功能......我想知道prime-faces的工具提示中是否有任何字体样式和背景颜色更改功能......

请告诉我。

这是示例代码：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core"      
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui">

    <h:head>
        <title>Tool Tip Customization</title>
    </h:head>
    <h:body>

    <h:panelGrid columns="3" cellpadding="5">  

    <h:outputText value="Focus/Blur: " />  
    <p:inputText id="focus" title="This tooltip is displayed when input gets the focus"/>  
    <p:tooltip for="focus" showEvent="focus" hideEvent="blur" />  

    <h:outputText value="Fade: " />  
    <h:outputLink id="fade" value="#">  
        <h:outputText value="Fade Effect" />  
    </h:outputLink>  
    <p:tooltip for="fade" value="Fade effect is used by default" showEffect="fade" hideEffect="fade" />  

    <h:outputText value="Slide: " />  
    <h:outputLink id="slide" value="#">  
        <h:outputText value="Slide Effect" />  
    </h:outputLink>  
    <p:tooltip for="slide" value="This tooltip uses slide effect for the animation" showEffect="slide" hideEffect="slide" />  

    <h:outputText value="Clip/Explode: " />  
    <h:outputLink id="grow" value="#">  
        <h:outputText value="Clip/Explode Effects" />  
    </h:outputLink>  
    <p:tooltip for="grow" value="This tooltip uses clip/explode effects for the animation" showEffect="clip" hideEffect="explode" />  

    <h:outputText value="Content:  " />  
    <h:outputLink id="lnk" value="#">  
        <h:outputText value="PrimeFaces Users" />  
    </h:outputLink>  
    <p:tooltip for="lnk">  
        <p:graphicImage value="C:\raman\AMAP\POC\primefaces\JSF2.0HelloWorld\WebContent\images\Users.gif" />  
    </p:tooltip>  

</h:panelGrid>  
</h:body>
</html> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-04-17T11:45:03.890

如果要全局设置所有工具提示的样式，可以使用 class `ui-tooltip`。例如像这样：

```
.ui-tooltip {
    border: 1px solid #ccc;
    box-shadow: 0 0 10px 0 #ddd;
    -moz-box-shadow: 0 0 10px 0 #ddd;
    -webkit-box-shadow: 0 0 10px 0 #ddd;
    color: #666;
    background: #f8f8f8;
} 
```

正如 PrimeFaces 用户指南中所写：工具提示仅`.ui-tooltip`作为一个样式类，并使用全局蒙皮选择器进行样式设置，请参阅主蒙皮部分了解更多信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T06:01:39.763

Primefaces[工具提示组件](http://www.primefaces.org/docs/vdl/3.2/p/tooltip.html)具有`style`和`styleClass`属性：

更改字体颜色的快速示例：

```
<p:tooltip for="slide" value="Text" 
           style="color : red; background-color : yellow"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-02T05:15:12.130

尝试用以下类覆盖

```
.ui-tooltip .ui-tooltip-text {
    background-color: red;
    color: #fff;
} 
```

# group-by - 我们可以使用休眠按星期几分组吗？

> ID：10222370
> 
> 赞同：1
> 
> 时间：2012-04-19T05:52:41.550
> 
> 标签：group-by, hql, dayofweek

我希望查询结果按星期几分组......就像星期一、星期二、星期三......等7组一样，每组一组

表中的列是时间戳字段，例如 12-Mar-2011 ..... 所以我不在乎表中存在哪些日期我只需要获取 7 个分组，以及是否存在不存在的计数列像星期四一样，它应该返回 0，星期三的计数应该是所有星期三的总计数，同样适用于一周中的每一天。

如何使用 HQL/标准实现此查询？

我可以在 Hibernate（HQL/Criteria）中使用这样的内置子句吗？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T21:31:13.050

试试这个：

```
select dayofweek(dateField), count(*)
from PersistentClass
group by 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T11:32:29.720

你试过'order by'子句吗？

像这样：

```
FROM tableName as table
ORDER BY table.dayOfWeek ASC 
```

您以什么形式存储数据？

# c# - 使用 System.Net.Mail 发送带有附件的电子邮件抛出异常：无法访问已关闭的文件

> ID：10222373
> 
> 赞同：9
> 
> 时间：2012-04-19T05:53:08.883
> 
> 标签：c#, c#-2.0, smtpclient

我正在使用 System.Net.Mail 通过我的应用程序发送电子邮件。我正在尝试使用以下代码发送带有附件的电子邮件。

```
 Collection<string> MailAttachments = new Collection<string>();
    MailAttachments.Add("C:\\Sample.JPG");
    mailMessage = new MailMessage();
    foreach (string filePath in emailNotificationData.MailAttachments)
    {
      FileStream fileStream = File.OpenWrite(filePath);
      using (fileStream)
       {
        Attachment attachment = new Attachment(fileStream, filePath);
        mailMessage.Attachments.Add(attachment);
       }
    }
     SmtpClient smtpClient = new SmtpClient();
     smtpClient.Host = SmtpHost;
     smtpClient.Send(mailMessage); 
```

当我发送带有附件的电子邮件时，它会引发如下异常。

```
Cannot access a closed file.
at System.IO.__Error.FileNotOpen()
at System.IO.FileStream.Read(Byte[] array, Int32 offset, Int32 count)
at System.Net.Mime.MimePart.Send(BaseWriter writer)
at System.Net.Mime.MimeMultiPart.Send(BaseWriter writer)
at System.Net.Mail.Message.Send(BaseWriter writer, Boolean sendEnvelope)
at System.Net.Mail.MailMessage.Send(BaseWriter writer, Boolean sendEnvelope)
at System.Net.Mail.SmtpClient.Send(MailMessage message) 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-19T06:02:32.157

语句的结尾大括号`using`关闭文件流：

```
using (fileStream)
{
    Attachment attachment = new Attachment(fileStream, filePath);
    mailMessage.Attachments.Add(attachment);
}  // <-- file stream is closed here 
```

但是，流是在 时读取的`stmpClient.Send(mailMessage)`，它不再打开。

最简单的解决方案是只提供文件名而不是流：

```
Collection<string> MailAttachments = new Collection<string>();
MailAttachments.Add("C:\\Sample.JPG");

mailMessage = new MailMessage();
foreach (string filePath in emailNotificationData.MailAttachments)
{
    Attachment attachment = new Attachment(filePath);
    mailMessage.Attachments.Add(attachment);
}
SmtpClient smtpClient = new SmtpClient();
smtpClient.Host = SmtpHost;
smtpClient.Send(mailMessage); 
```

使用此解决方案，.NET 库将不得不担心打开、读取和关闭文件。

# android - 在列表视图中显示本地 XML 数据（项目和子项目）

> ID：10222374
> 
> 赞同：0
> 
> 时间：2012-04-19T05:53:23.920
> 
> 标签：android, xml, listview

我需要在本地 xml 文件的列表视图中显示内容，其中包含项目和子项目，任何人都可以举一个如何做的例子吗？我找到了从 URL 获取 xml 文件但想在本地执行的示例。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T06:01:03.200

试试吧。它会帮助你。

私人无效 xmlPullParser() { XmlPullParser xpp = getResources().getXml(R.xml.words); 尝试 { while (xpp.getEventType()!=XmlPullParser.END_DOCUMENT) { if (xpp.getEventType()==XmlPullParser.START_TAG) { if (xpp.getName().equals("word")) items.add(xpp .getAttributeValue(0));

```
 }
            xpp.next();
        }
    } catch (XmlPullParserException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

在 res 上制作文件夹

-

# database - 对定义表使用外键还是在代码中使用常量？

> ID：10222378
> 
> 赞同：3
> 
> 时间：2012-04-19T05:53:32.623
> 
> 标签：database, design-patterns, database-design, foreign-keys, constants

我想了解人们对最佳做法的看法。

使用外键定义表或在代码中使用常量是更好的做法吗？

场景是，有一个名为'car'的表'car'有一个名为'size'的列'size'只有2个可能的值。'BIG' 和 'SMALL' 不太可能出现新的尺寸值。例如，不需要“MEDIUM”。因此不需要管理大小。

前进的两种方法是：1）创建一个名为“car_types”的表，并将 BIG 和 SMALL 作为两行。然后有一个“汽车”表的外键。

2) 在一个类中有一个 const CAR_SIZE_BIG = 'BIG' const CAR_SIZE_SMALL = 'SMALL'。然后，'car' 表中的 'size' 列的类型为 VARCHAR(10)。它存储“大”或“小”

我了解选项 2 未标准化。但是，哪个是首选或更好的方法？

谢谢。开放供您反馈。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T05:56:33.043

选项 1，将所有数据定义保留在数据库层中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T05:58:13.113

选项 1 更好，因为选项 2 的问题是这是完全合法的，给汽车的尺寸是“edster”

```
INSERT INTO  car
 (Car_size, color)
Values
 ('edster', 'red') 
```

使用选项 1 你不能这样做（没有先插入 car_size 表）

此插入将无法执行任何操作

```
INSERT INTO car
 (Car_size_id, color)
SELECT 
    car_size_id , 'red'
FROM
    car_size 
WHERE 
    car_size.name = 'edster' 
```

并假设您的 car_size 表仅包含两条记录，这将因约束错误而失败

```
INSERT INTO Car
 (Car_size_id, color)
Values  
 (3,'red') 
```

使用 FK 还有其他优点（例如，易于将标签 BIG 更改为 GRANDE、仅从数据库中明确定义的一组可能值等），但在这种情况下它们可能无关紧要。

# drools-planner - 在drools-planner中获取最终最佳解决方案的破坏约束列表

> ID：10222382
> 
> 赞同：2
> 
> 时间：2012-04-19T05:53:50.680
> 
> 标签：drools-planner

我正在使用drools-planner-5.4.0.CR1，我想获得最终最佳解决方案的破坏约束列表

并查看了 5.4.0.CR1 的示例

我已经像示例中那样实现了，但它返回**空 list**，换句话说 getScoreDetailList().size() 等于**0**，但 solution.getScore() 等于**-54**。

有什么建议吗？

```
public class SomeClass {
...
private volatile Solver solver;
private ScoreDirector scoreDirector;
...
public void someMethod() {
    SolverFactory solverFactory = new XmlSolverFactory(SOLVER_CONFIG);
    solver = solverFactory.buildSolver();
    scoreDirector = solver.getScoreDirectorFactory().buildScoreDirector();
    ...
    this.scoreDirector.setWorkingSolution(solution);
    this.solver.setPlanningProblem(this.scoreDirector.getWorkingSolution());
    this.solver.solve();

    SomeSolution solution = (SomeSolution) solver.getBestSolution();
    this.scoreDirector.setWorkingSolution(solution);
    System.out.println( "Score: " + solution.getScore());
    System.out.println( "getScoreDetailList size:" + getScoreDetailList().size());
}

public List<ScoreDetail> getScoreDetailList() {
    if (!(scoreDirector instanceof DroolsScoreDirector)) {
        return null;
    }
    Map<String, ScoreDetail> scoreDetailMap = new HashMap<String, ScoreDetail>();
    WorkingMemory workingMemory = ((DroolsScoreDirector) scoreDirector).getWorkingMemory();
    if (workingMemory == null) {
        return Collections.emptyList();
    }
    Iterator<ConstraintOccurrence> it = (Iterator<ConstraintOccurrence>) workingMemory.iterateObjects(
            new ClassObjectFilter(ConstraintOccurrence.class));
    while (it.hasNext()) {
        ConstraintOccurrence constraintOccurrence = it.next();
        ScoreDetail scoreDetail = scoreDetailMap.get(constraintOccurrence.getRuleId());
        if (scoreDetail == null) {
            scoreDetail = new ScoreDetail(constraintOccurrence.getRuleId(), constraintOccurrence.getConstraintType());
            scoreDetailMap.put(constraintOccurrence.getRuleId(), scoreDetail);
        }
        scoreDetail.addConstraintOccurrence(constraintOccurrence);
    }
    List<ScoreDetail> scoreDetailList = new ArrayList<ScoreDetail>(scoreDetailMap.values());
    Collections.sort(scoreDetailList);
    return scoreDetailList;
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T09:25:28.743

后

```
this.scoreDirector.setWorkingSolution(solution); 
```

你忘了打电话

```
this.scoreDirector.calculateScore(); 
```

我将介绍有关在 5.4.0.Final 中使用 Solver.getScoreDirectorFactory() 的文档。

# android - 从 android 活动向 adb 发送命令

> ID：10222384
> 
> 赞同：1
> 
> 时间：2012-04-19T05:53:59.423
> 
> 标签：android, adb, monkey

我发现我们可以使用以下命令从工作站启动猴子：

```
adb shell monkey -p <package name> -v 500 
```

但是当我尝试从模拟器的终端运行猴子时，像这样：

```
monkey -p <package name> -v 500 
```

由于权限不足，它被android杀死了。

我需要从设备上启动猴子，（没有与 PC 的任何连接），我的问题是，我如何将命令从 android 活动发送到 adbd，这样我就可以直接从设备运行猴子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T06:01:54.513

猴子是用 Java 实现的，你可以将它集成到你的应用程序中。或者，如果您有根设备，请使用`su -c monkey`以根用户身份运行。shell 用户实际上比普通应用程序用户拥有更多的权限，这就是你获得的权限不足的原因。

# iphone - 带有按钮的 UIscrollview 中的动画

> ID：10222386
> 
> 赞同：2
> 
> 时间：2012-04-19T05:54:08.650
> 
> 标签：iphone, ios, xcode

我已经尝试过 iCarousel，并将其添加到我的项目中。我能够放置图像。现在我正在尝试实现一种方法，当单击按钮时，轮播将旋转。我试过这段代码：

```
- (IBAction) spinButton:(id)sender
{

    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:0.75];
    [UIView setAnimationDelegate:self];
    [UIView setAnimationTransition:UIViewAnimationTransitionFlipFromRight forView:carousel
                             cache:YES];
    [spinButton removeFromSuperview];
    [UIView commitAnimations];

} 
```

但似乎只有轮播视图才有动画效果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T07:10:05.773

以下两种更改 aries 的方法可能是您正在解决的问题，

```
-(void)TappedButton:(UIButton *)sender{

    UIView *view=[carousel itemViewAtIndex:sender.tag];
    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:0.75];
    [UIView setAnimationDelegate:self];
    [UIView setAnimationTransition:UIViewAnimationTransitionFlipFromRight forView:view cache:YES];
    //    [spinButton removeFromSuperview];
    [UIView commitAnimations];
    NSLog(@"%d",sender.tag);
}             
- (UIView *)carousel:(iCarousel *)carousel viewForItemAtIndex:(NSUInteger)index reusingView:(UIView *)view
{
    UILabel *label = nil;

    //create new view if no view is available for recycling
    if (view == nil)
    {
        view = [[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"page.png"]] autorelease];
//      label = [[[UILabel alloc] initWithFrame:view.bounds] autorelease];
//      label.backgroundColor = [UIColor clearColor];
//      label.textAlignment = UITextAlignmentCenter;
//      label.font = [label.font fontWithSize:50];
//        
//        [view addSubview:label];

        UIButton *buttonForDisplay = [[[UIButton alloc] initWithFrame: view.bounds] autorelease];
        buttonForDisplay.backgroundColor=[UIColor clearColor];

        [buttonForDisplay setTitle:[NSString stringWithFormat:@"%d",index] forState:UIControlStateNormal];
        buttonForDisplay.titleLabel.font = [label.font fontWithSize:50];
        [buttonForDisplay addTarget:self action:@selector(TappedButton:) forControlEvents:UIControlEventTouchUpInside];
        [buttonForDisplay bringSubviewToFront:view];
        buttonForDisplay.tag = index;

///        view.tag=index;
        [view addSubview:buttonForDisplay];

    }
    else
    {
        label = [[view subviews] lastObject];
    }

    //set label
//  label.text = [[items objectAtIndex:index] stringValue];

    return view;
} 
```

**编辑** 此方法通过您可以捕获轮播视图的参考。

```
- (UIView *)itemViewAtIndex:(NSInteger)index 
```

**用动画编辑**

```
UIViewController *nextViewController = [[UIViewController alloc] autorelease];
nextViewController.view.backgroundColor = [UIColor redColor];  
CATransition *animation = [CATransition animation];
animation.duration = 3.5;
animation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut]; 
animation.type = kCATransitionPush;
animation.subtype = kCATransitionFromTop;  
[self.navigationController pushViewController:nextViewController animated:NO];
[self.navigationController.view.layer addAnimation:animation forKey:nil]; 
```

# c# - 删除 WPF 中的硬编码文件夹路径

> ID：10222399
> 
> 赞同：1
> 
> 时间：2012-04-19T05:55:31.103
> 
> 标签：c#, wpf, c#-4.0

在我的项目中，我指的是一个文件夹：

```
string path=Path.Combine(@"E:\Per\kamlendra.sharma\Windows\main\software\my.software\my.software.Server\Resources", string.Format("LocalizationDictionary.{0}.xaml", SelectedNewLanguage.culture)); 
```

但我不想硬编码这个地址：

`@"E:\Per\kamlendra.sharma\Windows\main\software\my.software\my.software.Server\Resources"`

任何人都可以提出更好的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T06:04:27.443

您可以将应用程序数据存储在[app.config](http://www.tanguay.info/web/index.php?pg=howtos&id=20)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T06:10:09.607

可以获得当前执行程序集的UNC路径。然后，您可以使用它作为访问特定子文件夹的基础 - 这是假设您要查找的文件夹是程序集所在的子文件夹...

```
System.Reflection.Assembly.GetExecutingAssembly().Location //This actually returns the assembly file name, so you would need to use FileInfo to get the folder location. 
```

更好的方法可能是 System.Appdomain，它使您可以访问实际 WPF 应用程序的位置，而不是程序集。

```
System.AppDomain.CurrentDomain.BaseDirectory 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T06:15:19.267

这是配置和使用应用程序数据文件的方法。

*   [WPF 应用程序资源、内容和数据文件](http://msdn.microsoft.com/en-us/library/aa970494.aspx)

# ruby-on-rails - Rails：使用可以查看所有用户的设计添加管理员角色

> ID：10222400
> 
> 赞同：3
> 
> 时间：2012-04-19T05:55:32.803
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

我需要使用 devise 为我的应用程序创建一个管理员角色。我已经使用 devise 创建了基本身份验证。我的应用程序中有一个设计用户模型，但现在我需要一个可以显示编辑和销毁所有用户的管理员。我尝试按照教程进行操作，但没有一个有帮助。我正在使用 rails 3.0.10 和 ruby​​ 1.9.2-p290。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T06:36:22.467

您只需通过创建 migratioin 首先定义 role.rb

```
 rails g model role  name:string 
```

然后在 role.rb

```
 class Role
         has_one:user
      end 
```

在用户模型中

```
 class user
         belongs_to :role
      end 
```

将两个角色插入数据库

```
 1.admin
   2.user 
```

然后通过这个检查

```
 if user.role.name == "admin"  
        # can do all your logic
    else
         your logic
    end 
```

确保将 role_id:integer 插入用户模型

尝试一下.......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T09:35:47.727

我有和你类似的要求，也不希望任何用户能够注册。所有这些都将由管理员负责。她我所做的。

我添加了另一个名为 Admin 的设计模型

```
rails generate devise MODEL 
```

为用户模型禁用“可注册”，这样用户就不能自己注册

用户.rb

```
class User < ActiveRecord::Base
  # Include default devise modules. Others available are:
  # :token_authenticatable, :encryptable, :confirmable, :lockable, :registerable,    :timeoutable and :omniauthable
  devise :database_authenticatable, :recoverable, :rememberable, :trackable, :validatable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :password, :password_confirmation, :remember_me, :first_name,  :last_name, :role, :admin
  # attr_accessible :title, :body
end 
```

使用此处的示例为用户启用 CRUD：[https ://gist.github.com/1056194](https://gist.github.com/1056194)

最后像这样保护用户控制器

users_controller.rb

```
# Add this
before_filter :authenticate_admin! 
```

希望这可以帮助。

# python - django 的 url 正则表达式如何工作

> ID：10222402
> 
> 赞同：2
> 
> 时间：2012-04-19T05:56:16.517
> 
> 标签：python, regex, django

在以下网址中：

```
(r'^videos/view/(?P<video_id>[^/]+)/$' 
```

*   是什么`r'`意思/做什么？
*   是什么`?P`意思/做什么？
*   正则表达式如何`<video_id>`逃脱？

换句话说，上述内容与以下内容有何不同：

```
'^/videos/view/[^/]+/$' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T05:59:20.033

`r''`标记原始字符串，这样您就不必双转义反斜杠。在这种情况下，没有必要，因为没有，但是很多人总是为正则表达式这样做。

`(?P<video_id>[^/]+)`是对捕获 group 的“命名”的正则表达式的 Python 扩展`video_id`。在 Django 中，这意味着匹配作为关键字参数发送到视图`video_id`；如果你这样做了`view/([^/]+)/$`，它将作为第一个位置参数发送。但是，在您的示例中，根本没有括号，这意味着视图不会得到任何参数！

# java - java.net如何处理503响应码

> ID：10222407
> 
> 赞同：2
> 
> 时间：2012-04-19T05:56:48.930
> 
> 标签：java, networking

以下是在 java 网络中处理 503 响应代码的适当方法吗？这段代码 - 特别是对 disconnect 和 null 的调用是做什么的？

```
URL url = new URL(some url);
HttpURLConnection h =(HttpURLConnection)url.openConnection();
int x = h.getResponseCode();
while(x==503)
{
    h.disconnect();
    h = null;
    h =(HttpURLConnection)url.openConnection();
    x = h.getResponseCode();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T06:04:32.543

disconnect() 关闭底层 TCP 套接字。

在重新分配之前立即将局部变量设置为 null 不会完成任何事情。

在该循环中应该有一个睡眠，每次失败都会增加一个间隔，并且重试次数是有限的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T06:04:51.673

无论你想让它做什么都是合适的方式。为了使某些事情发生故障，最好重复直到成功，而不是*只*处理 503 场景。

最简单的例子：循环直到 200（成功）代码返回。

（最好将其抽象为方法和类，并尽可能使用 OOP 和单元测试。）

# java - 从 JavaScript 调用 Java 中的同步 Web 服务

> ID：10222408
> 
> 赞同：0
> 
> 时间：2012-04-19T05:57:15.367
> 
> 标签：java, javascript, html, web-services

我需要调用一个用 Java 构建的 Web 服务，以便通过 Java 脚本从 HTML 页面调用。

我尝试了以下 URL 提供的代码示例：http: [//www.codeproject.com/Articles/14610/Calling-Web-Services-from-HTML-Pages-using-JavaScr#](http://www.codeproject.com/Articles/14610/Calling-Web-Services-from-HTML-Pages-using-JavaScr#)

```
 <html>
  <head>
   <title>Hello World</title>
    <script language="JavaScript">
     var iCallID;
     function InitializeService(){
      service.useService(http://localhost:1394/MyWebService.asmx?wsdl, 
    "HelloWorldService");
      service.HelloWorldService.callService("HelloWorld");
     }
     function ShowResult(){
      alert(event.result.value);//Output: Undefined
     }
    </script>
   </head>
  <body onload="InitializeService()" id="service" 
    style="behavior:url(webservice.htc)" onresult="ShowResult()"> </body>
 </html> 
```

Web 服务正在运行，并已通过 Weblogic 内置测试客户端进行了测试。

请建议一些用于使用字符串参数调用 web 服务的 JS 代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T06:03:00.910

[Ajax](https://developer.mozilla.org/en/AJAX). Be careful though, it only allows requests on the same domain (browsers limitation). If you want cross-domain support, either use [JSONP](http://en.wikipedia.org/wiki/JSONP) (if the webservice allows it), or use a server as a proxy, so that:

```
Javascript -> Server on same domain -> WebService 
```

# iis - Setup.exe 正在回滚（为安装 Shield12 中的 Asp.net 应用程序构建）

> ID：10222409
> 
> 赞同：0
> 
> 时间：2012-04-19T05:57:17.370
> 
> 标签：iis, installation, virtual-directory, installshield-2010, installshield-2012

我在 Install Shield 12 for Web Project of .Net Framework 中构建 Setup.exe 文件。当我要运行这个 setup.exe 文件时，我在执行虚拟目录时遇到回滚错误，并且设置尚未完成。由于虚拟目录，我该如何解决此回滚错误？此问题与安装屏蔽的哪个应用程序有关？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T14:11:52.923

您需要找出导致回滚发生的实际错误。为此，您需要安装程序为您创建一个日志。

您可以通过像这样运行 exe 来执行此操作：

```
setup /V"/L*v c:\everything.log" 
```

然后，查看日志文件并找出它决定回滚的位置（搜索“回滚”，然后在上面查看应该会让你关闭。）

# iphone - 如何在 ios 5 设备上运行注销应用程序

> ID：10222410
> 
> 赞同：0
> 
> 时间：2012-04-19T05:57:21.357
> 
> 标签：iphone

我正在 Xcode 4.3 中开发一个应用程序。我需要在设备上运行这个应用程序。我的应用程序支持哪些版本的设备运行。我没有注册我的应用程序。所以请告诉我如何做这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T06:05:53.113

我相信您要问的是如何判断您正在开发的应用程序的最低支持操作系统是什么。

转到您的项目设置并查看“部署目标”。

它应该如下所示：

![部署目标设置](../Images/4b555dafef03d6818b7006ea7cfded98.png)

如果这不是您正在寻找的答案（现在我在标题中看到“取消注册”一词），您应该编辑您的问题并重新表述以使其更清楚。

# javascript - 在 node.js 中使用带有 express 的部分

> ID：10222411
> 
> 赞同：3
> 
> 时间：2012-04-19T05:57:37.320
> 
> 标签：javascript, node.js, express, pug, partials

我正在尝试使用 node.js 渲染部分。这是我的代码。

应用程序.js：

```
 var express = require('express')
  , routes = require('./routes');

var app = module.exports = express.createServer();

// Configuration

app.configure(function(){
  app.set('views', __dirname + '/views');
  app.set('view engine', 'jade');
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(app.router);
  app.use(express.static(__dirname + '/public'));
});

app.configure('development', function(){
  app.use(express.errorHandler({ dumpExceptions: true, showStack: true }));
});

app.configure('production', function(){
  app.use(express.errorHandler());
});

// Routes

app.get('/', routes.index);

var products = require('./products.js');

app.get('/products', function(req, res) {
    res.render('products/index', {locals: {
               products: products.all
               }
               });
});

app.listen(3000); 
```

当我去 localhost:3000/products 它应该呈现 index.jade ，它位于产品文件夹中，它位于视图文件夹中。上面我使用设置视图目录`app.set('views', __dirname + '/views');`

index.jade:

```
h1 Products:
#products!= partial('partials/product', {collection: products}) 
```

这应该使部分等效于 (partials/product.jade) 因为玉是我的视图引擎。

我收到一条错误消息，说“部分未定义”

任何帮助都会很棒。谢谢

更新：

这解决了我的部分错误谢谢。我重新安装了 2.5.9。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-19T07:05:27.883

检查您安装的 Express JS 版本——您可能拥有 3.0 alpha：

```
$ npm ls
...
└─┬ express@3.0.0alpha1
... 
```

如果您有兴趣尝试 alpha，请务必查看有关[从 2.x 迁移到 3.x](https://github.com/visionmedia/express/wiki/Migrating-from-2.x-to-3.x)的文档。在其中，您会注意到`res.partial()`and `partial()`（在模板中）已被删除 - 如“查看系统更改：”中所述

> 通过删除 Express 3.x 模板引擎中的“布局”和部分的概念，将对文件 I/O 进行更大的控制。这意味着与模板引擎的集成更加容易，并且大大简化了视图系统的内部结构。

[您可以在链接文章Use Jade blocks, not layouts](http://www.devthought.com/code/use-jade-blocks-not-layouts/)中看到意图示例。

如果您不感兴趣，请确保您已安装 2.x。

```
$ npm install express@2.x 
```

或通过`package.json`：

```
{
    ...
    "dependencies": {
        ...
        "express": "2.x"
    }
} 
```

# objective-c - Iphone 应用程序中的洪水填充算法

> ID：10222414
> 
> 赞同：0
> 
> 时间：2012-04-19T05:57:48.133
> 
> 标签：objective-c, ios, flood-fill

我想在我的 iphone 应用程序中实现洪水填充算法。我一直在搜索很长一段时间，我已经看到了所有堆栈溢出的答案，但没有任何帮助。

请任何人发布一些使用洪水填充的示例应用程序代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T06:03:13.263

As usual, Wikipedia has [a great article about the flood fill algorithm.](http://en.wikipedia.org/wiki/Flood_fill) You just need to implement the algorithm and the pixel test in objective-c.

# sql - 从查询中获取结果

> ID：10222415
> 
> 赞同：1
> 
> 时间：2012-04-19T05:58:05.007
> 
> 标签：sql, oracle, oracle11g

```
CREATE TABLE TEMP25
(
  STATUS  VARCHAR2(200 BYTE)
);

Insert into TEMP25
   (STATUS)
 Values
   ('PENDING');
Insert into TEMP25
   (STATUS)
 Values
   ('ERROR');
Insert into TEMP25
   (STATUS)
 Values
  ('ERROR');
Insert into TEMP25
   (STATUS)
 Values
   ('ERROR');
Insert into TEMP25
   (STATUS)
 Values
   ('NOT_REQUIRED');
Insert into TEMP25
   (STATUS)
 Values
   ('NOT_REQUIRED'); 
Insert into TEMP25
   (STATUS)
 Values
   ('PENDING');
Insert into TEMP25
   (STATUS)
 Values
   ('PENDING');
Insert into TEMP25
  (STATUS)
 Values
   ('ERROR');
Insert into TEMP25
   (STATUS)
Values
  ('NOT_REQUIRED');
Insert into TEMP25
  (STATUS)
 Values
  ('ERROR');
Insert into TEMP25
   (STATUS)
 Values
  ('INVALID');
Insert into TEMP25
   (STATUS) 
 Values
   ('INVALID');
Insert into TEMP25
  (STATUS)
 Values
  ('PENDING'); 
```

我想写一个查询，以便我得到像

```
TOTAL_RECORDS  TOTAL_PENDING TOTAL_NOT_REQUIRED   TOTAL_PENDING
-----------------------------------------------------------------
   14               4             3                   5 
----------------------------------------------------------------- 
```

我希望在一个查询中按顺序记录记录，我已经尝试使用`with table`它的子句...是否有任何其他解决方案...并且不想要无效记录

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T06:04:11.500

You can use `SUM/CASE` or (`SUM/DECODE` if you prefer)

```
Select
   COUNT(*) TOTAL_RECORDS  ,
   SUM(case when status = 'PENDING' then 1 else 0 END) TOTAL_PENDING, 
   SUM(case when status = 'NOT_REQUIRED' then 1 else 0 END) TOTAL_NOT_REQUIRED, 
   SUM(case when status = 'ERROR' then 1 else 0 END) TOTAL_ERROR

FROM temp25 
```

[See it working here](http://sqlfiddle.com/#!4/b3feb/4)

You can also use pivot but getting the count(*) is a little ugly

```
WITH 
COUNTS AS(
select * 
from (
   select status
   from TEMP25 t
)
pivot 
(
   count(status)
   for status in ('PENDING' AS TOTAL_PENDING,
                  'NOT_REQUIRED' AS TOTAL_NOT_REQUIRED,
                  'ERROR' AS TOTAL_ERROR)
))

SELECT COUNT(*) total_records, 
       total_pending, 
       total_not_required, 
       total_error 
FROM   temp25, 
       counts 
GROUP  BY total_pending, 
          total_not_required, 
          total_error 
```

[Pivot version](http://sqlfiddle.com/#!4/b3feb/18)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-19T06:02:30.113

You can easily make use of case when statement and get this result ...have look to it also...

```
Select    COUNT(*) TOTAL_RECORDS  ,    
SUM(case when status = 'ERROR' then 1 else 0 END) TOTAL_ERROR   
SUM(case when status = 'NOT_REQUIRED' then 1 else 0 END) TOTAL_NOT_REQUIRED,     
SUM(case when status = 'PENDING' then 1 else 0 END) TOTAL_PENDING,  
FROM temp25 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T06:21:18.917

在 Oracle 中，您可以

```
SELECT
  (SELECT COUNT(*) FROM TEMP25) total,
  (SELECT COUNT(*) FROM TEMP25 WHERE STATUS='PENDING') pending,
[...]
FROM dual ; 
```

所有数据库都有一个空表，你可以从这种东西中使用。

# iphone - 查看我的应用程序的文件夹中有哪些文件

> ID：10222421
> 
> 赞同：0
> 
> 时间：2012-04-19T05:58:27.733
> 
> 标签：iphone, ios

我是 ios 开发的新手，想知道我是否可以使用 NSFileManager 浏览我自己的应用程序。

我的应用程序中有一个文件夹，想看看里面有什么文件，不想使用硬编码的文件名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T06:01:48.810

听起来您需要了解`NSFileManager`'s[`contentsOfDirectoryAtPath: error:`](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSFileManager_Class/Reference/Reference.html#//apple_ref/occ/instm/NSFileManager/contentsOfDirectoryAtPath%3aerror%3a)方法（为您链接的文档）。

要在您自己的应用程序包中查看，请传递 " 的路径[`[[NSBundle mainBundle] resourcePath]"`](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSBundle_Class/Reference/Reference.html#//apple_ref/occ/instm/NSBundle/resourcePath)。这将为您提供应用程序包中“资源”文件夹的路径。如果您查看链接文档，您会看到 NSBundle 提供了一些其他潜在的方法获取应用程序包中有趣位置的路径。

# r - 嵌套的 tryCatch 没有捕捉到错误？

> ID：10222422
> 
> 赞同：3
> 
> 时间：2012-04-19T05:58:36.443
> 
> 标签：r, try-catch, raise

我有一个功能：

```
buggy <- function(...) {
    tryCatch({
        itWorked <- FALSE
        stop("I don't like green eggs and ham!")
        itWorked <- TRUE
    }, finally = {
        if ( itWorked )
            return("I do, Sam I am")
        else
            return("I do not like them, Sam I am!")
    })
} 
```

基本上，`buggy`尝试进行一些可能成功也可能不成功的计算（由 . 确定`itWorked`。该`finally`子句只是确保即使计算不起作用，也会返回一些东西（在这种情况下，`"I do not like them, Sam I am!"`）。

它按预期工作：

```
> buggy()
Error in tryCatchList(expr, classes, parentenv, handlers) : 
  I don't like green eggs and ham!
[1] "I do not like them, Sam I am!" 
```

现在我想听听以下错误`buggy()`：

```
tryCatch( buggy(), 
          error=function(e) message('too bad! there was an error') ) 
```

然而，错误`buggy`未能在周围引发错误`tryCatch`：

```
> tryCatch( buggy(), 
+           error=function(e) message('too bad! there was an error') )
[1] "I do not like them, Sam I am!" 
```

我希望这会说：

```
'too bad! there was an error'
[1] "I do not like them, Sam I am!" 
```

谁能告诉我为什么这不起作用？我是否需要从内部“提出”错误`buggy`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T06:24:14.913

外部`tryCatch()`没有给你存储在其`error`参数中的消息，原因与以下调用没有*完全相同的原因：*

```
tryCatch("I do not like them, Sam I am!",
    error=function(e) message('too bad! there was an error') )
# [1] "I do not like them, Sam I am!" 
```

只有在返回错误`error`时才会调用两行参数中的消息。`buggy()`但是相反（感谢`tryCatch()`它内部的工作），`buggy()`只返回一个字符向量，并且`tryCatch()`没有什么可以“捕获”：

```
value <- buggy()
value
# [1] "I do not like them, Sam I am!"

# And, to belabor the point:
identical(buggy(), "I do not like them, Sam I am!")  
# [1] TRUE 
```

# c++ - 读取“.txt”文件以外的文件内容

> ID：10222423
> 
> 赞同：3
> 
> 时间：2012-04-19T05:58:41.097
> 
> 标签：c++, c, file-handling

如何在 c/c++ 中读取不是简单文本文件的文件内容？例如，我想读取 .jpg/.png/.bmp 等图像文件并查看某个索引处的值，以检查它是什么颜色？或者如果我有一个 .exe/.rar/.zip 并且想知道不同索引中存储的值是什么？我知道c风格的阅读文件，这是

```
FILE *fp;

fp = fopen("example.txt","r"); /* open for reading */

char c;

c = getc(fp) ; 
```

我想知道我是否将“example.txt”替换为“image.png”左右，它会起作用吗？我会得到正确的数据吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-19T06:03:07.043

When you open a non-text file, you'll want to specify binary (untranslated) mode:

```
FILE *fp = fopen("example.png", "rb"); 
```

In a typical case, you do most of your reading from binary files by defining structs that mirror the structures in the file, and then using `fread` to read from the file into the structure (but this has to be done carefully, to ensure that things like padding in the struct don't differ between the representation in-memory and on-disk).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T06:01:14.470

您需要以二进制模式打开文件。这允许您以“原始”模式读取字节，其中它们与文件中的内容保持不变。

但是，确定特定像素的颜色等需要您完全理解文件中字节的含义以及它们是如何为正在读取的文件排列的。这第二个要求要困难得多。您需要对该文件类型的格式进行一些研究才能做到这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T06:23:31.993

`binary mode`是的，你可以在c中打开任何文件。如果您有兴趣，那么您还可以阅读任何此类非文本文件的第一个字节。

在大多数情况下，所有不同的文件格式都有一些固定的标题，因此您可以根据它来识别该文件的类型。

打开任何 matroska(.mkv) 文件并读取第一个 4 字节，您将永远拥有这个

```
0x1A   0x45   0xDF   0xA3 
```

您还可以 `hexdump`在 linux 的二进制表示实用程序中查看任何文件

===================== **编辑：**

```
such as .jpg/.png/.bmp and see the value at certain index,to 
check what colour it is? 
```

在这里您需要了解该文件的格式，并在此基础上您可以知道哪个地方的数据表明了什么信息..!!!

# android - 在我的 android 手机中更改方向时出错。

> ID：10222424
> 
> 赞同：0
> 
> 时间：2012-04-19T05:58:55.717
> 
> 标签：android, runtime-error

我添加了一个选项来为我的 android 手机应用不同的主题。在应用时我正在启动一个异步任务。如果我在应用它时更改方向，我会收到下面给出的错误。

```
01-01 00:19:25.140: ERROR/AndroidRuntime(3553): FATAL EXCEPTION: main
01-01 00:19:25.140: ERROR/AndroidRuntime(3553): java.lang.RuntimeException: Unable to resume activity {com.android.settings/com.android.settings.ThemeSettingsActivity}: java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=1, result=-1, data=null} to activity {com.android.settings/com.android.settings.ThemeSettingsActivity}: java.lang.NullPointerException
01-01 00:19:25.140: ERROR/AndroidRuntime(3553):     at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2471)
01-01 00:19:25.140: ERROR/AndroidRuntime(3553):     at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2499)
01-01 00:19:25.140: ERROR/AndroidRuntime(3553):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1994)
01-01 00:19:25.140: ERROR/AndroidRuntime(3553):     at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:3375)
01-01 00:19:25.140: ERROR/AndroidRuntime(3553):     at android.app.ActivityThread.access$700(ActivityThread.java:125)
01-01 00:19:25.140: ERROR/AndroidRuntime(3553):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1153)
01-01 00:19:25.140: ERROR/AndroidRuntime(3553):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-01 00:19:25.140: ERROR/AndroidRuntime(3553):     at android.os.Looper.loop(Looper.java:137)
01-01 00:19:25.140: ERROR/AndroidRuntime(3553):     at android.app.ActivityThread.main(ActivityThread.java:4368)
01-01 00:19:25.140: ERROR/AndroidRuntime(3553):     at java.lang.reflect.Method.invokeNative(Native Method)
01-01 00:19:25.140: ERROR/AndroidRuntime(3553):     at java.lang.reflect.Method.invoke(Method.java:511)
01-01 00:19:25.140: ERROR/AndroidRuntime(3553):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
01-01 00:19:25.140: ERROR/AndroidRuntime(3553):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
01-01 00:19:25.140: ERROR/AndroidRuntime(3553):     at dalvik.system.NativeStart.main(Native Method)
01-01 00:19:25.140: ERROR/AndroidRuntime(3553): Caused by: java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=1, result=-1, data=null} to activity {com.android.settings/com.android.settings.ThemeSettingsActivity}: java.lang.NullPointerException
01-01 00:19:25.140: ERROR/AndroidRuntime(3553):     at android.app.ActivityThread.deliverResults(ActivityThread.java:3004)
01-01 00:19:25.140: ERROR/AndroidRuntime(3553):     at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2458)
01-01 00:19:25.140: ERROR/AndroidRuntime(3553):     ... 13 more
01-01 00:19:25.140: ERROR/AndroidRuntime(3553): Caused by: java.lang.NullPointerException
01-01 00:19:25.140: ERROR/AndroidRuntime(3553):     at com.android.settings.ThemeSettingsActivity.onActivityResult(ThemeSettingsActivity.java:308)
01-01 00:19:25.140: ERROR/AndroidRuntime(3553):     at android.app.Activity.dispatchActivityResult(Activity.java:4649)
01-01 00:19:25.140: ERROR/AndroidRuntime(3553):     at android.app.ActivityThread.deliverResults(ActivityThread.java:3000)
01-01 00:19:25.140: ERROR/AndroidRuntime(3553):     ... 14 more 
```

我找不到原因，请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T06:07:41.170

查看您的代码会有所帮助，尤其是`onActivityResult`包含第 308 行的 ThemeSettingsActivity.java 方法。

但是，AsyncTask 的设计存在一个弱点，这可能是造成这种情况的原因。当您改变方向时，您的活动将被销毁并重新创建。但是，AsyncTask（特别是如果它是 Activity 的内部类）仍在与被破坏的 Activity 交互。Android 文档建议保存任务状态并在销毁活动时销毁任务，然后在重新创建活动时从保存的状态构造新任务。请参阅Google Groups 上的[此讨论主题](https://groups.google.com/forum/?fromgroups#!starred/android-developers/vwRrlc84gy0)，其中讨论了以允许任务继续的方式解决问题的几个想法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T15:03:28.217

正如 Ted 所说，您可能会被糟糕的 AsyncTask 使用所困扰。我写了一篇关于 AsyncTask 陷阱的博客文章。您可能会发现它与您的情况有关。

[http://www.shanekirk.com/2012/04/asynctask-missteps/](http://www.shanekirk.com/2012/04/asynctask-missteps/)

-谢恩

# cakephp - Cakephp 表单单选按钮标签类

> ID：10222427
> 
> 赞同：2
> 
> 时间：2012-04-19T05:59:13.157
> 
> 标签：cakephp, radio-button, label, cakephp-2.0

我想使用表单助手来使用单选按钮。单选按钮具有 Radio 元素和 Label。默认情况下，我有显示：标签元素的块。我想为一个类分配单选按钮的标签，以便我可以为其分配一个内联块。

```
$attributes  = array('legend' => false, 'label' => array('class' => 'radioBtn'));
echo $this->Form->radio('gender', $options, $attributes); 
```

我如何为选项的标签分配一个类

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T06:48:20.863

通过查看 Form->radio() 方法代码，似乎与属于标签的属性无关。

但是要修改这些标签的显示，您可以使用环绕`div`

```
echo '<div class="inline_labels">';
echo $this->Form->radio('gender', $options, $attributes);
echo '</div>'; 
```

并像这样使用 CSS：

```
.inline_labels label
{
    display: inline-block;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T07:38:40.560

如何使用`FormHelper::label(string $fieldName, string $text, array $options)` 您可以在选项数组中定义标签类，所以（例如）：

```
echo $options = array( /* relevant stuff goes here */ );
echo $attributes = array( /* relevant stuff goes here */ );
echo $this->Form->radio('gender', $options, $attributes);
echo $this->Form->label('gender', 'Text of your label', array('label'=>'radioBtn')) 
```

[FormHelper 上的](http://book.cakephp.org/2.0/en/core-libraries/helpers/form.html#form-element-specific-methods)源CakePHP Cookbook

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-06T12:57:57.797

为我工作：

```
//  Add your own label with CSS class
$opts = array('1' => "<label class='myCSS'>My first option</label>", "2" => "<label class='myCSS'>My second option</label>");

//  Put label param to false
echo $this->Form->input('my-input', array('type' => 'radio', 'label' => false, 'options' => $opts, 'legend' => false)); 
```

享受

# android - 两行文本视图旁边的 1 行文本视图

> ID：10222431
> 
> 赞同：0
> 
> 时间：2012-04-19T05:59:46.353
> 
> 标签：android

我想知道这是否可以在android中实现。

![在此处输入图像描述](../Images/ca687761317e3dc4a27a5d9a7280a696.png)

所以基本上有两种文本视图，一种是名称/另一种是“打开”。名称可以多于一行，“open”应相邻放置。一种方法是动态地将名称文本视图分成两部分并在其旁边放置“打开”。但我没有找到好的解决方案。有什么直接的方法来实现它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T06:04:40.260

You may set the following to your TextView:

```
android:drawableRight="@drawable/your_image" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T15:51:44.423

只是一个想法 。可以通过使用设置文本来完成`textView.setText(Html.fromHtml(styledText));`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T06:08:45.593

您可以`ListView`在 [布局](http://goo.gl/UjBWh)中为您的`Adapter`. 创建一个`Boolean`以显示披萨店何时打开以及何时显示`Drawable`.

像这样的东西：

```
if (isOpen){
yourTextView.setCompoundDrawablesWithIntrinsicBounds(0,0,0, drawable);
} 
```

当然，这需要你制作一个“**开放**”的图像，但在我看来，这将是最简单的方法。

# iphone - 本地认证玩家在游戏中心排行榜中的历史最佳排名

> ID：10222435
> 
> 赞同：4
> 
> 时间：2012-04-19T06:00:15.937
> 
> 标签：iphone, ios, ipad, game-center, leaderboard

我想在游戏中心排行榜的所有时间最好的部分中获得我的本地玩家得分的排名。我只找到了检索本地玩家上传分数的代码。如何在排行榜中获得排名。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T06:23:24.880

尝试使用

```
GKScore* score = [leaderBoard localPlayerScore];
NSInteger rank = score.rank; 
```

您应该通过以下方式获得最高分：

```
[leaderBoard loadScoresWithCompletionHandler:^(NSArray* topScores, NSError* error){
     if (!error) {
        // topScores
     }
}]; 
```

# .htaccess - 我的 .htaccess 文件中的 RewriteRule

> ID：10222440
> 
> 赞同：0
> 
> 时间：2012-04-19T06:00:48.400
> 
> 标签：.htaccess, mod-rewrite, redirect

我对查询字符串有疑问。我想改变这个...

[http://www.audiomasterclass.com/arc.cfm?a=giant-killing-%245-mic-preamp-its-secrets-reveal](http://www.audiomasterclass.com/arc.cfm?a=giant-killing-%245-mic-preamp-its-secrets-reveale)

对此...

www.audiomasterclass.com/?a=588

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T06:22:12.867

基于此 url，它无法完成。您需要将名称反转为 ID 的逻辑。

您可以做的是确保在原始 url 中包含 ID。例如：

[http://www.audiomasterclass.com/arc.cfm?a=giant-killing-%245-mic-preamp-its-secrets-reveale](http://www.audiomasterclass.com/arc.cfm?a=giant-killing-%245-mic-preamp-its-secrets-reveale) 可以改成：[http ://www.audiomasterclass.com/588/giant -killing-%245-mic-preamp-its-secrets-reveal](http://www.audiomasterclass.com/588/giant-killing-%245-mic-preamp-its-secrets-reveale)

然后使用重写规则： RewriteRule ^/([0-9]+) /arc.cfm?a=$1 [L]

您所做的是将 id 添加到每个链接，以便您的系统将基于 ID，但 google/users 会看到不错的 URL。

您需要稍微更改重写规则（根据您的需要和服务器配置），但它将解释基础知识。

# c# - PagedList 未正确呈现

> ID：10222444
> 
> 赞同：0
> 
> 时间：2012-04-19T06:01:04.840
> 
> 标签：c#, asp.net-mvc, razor, pagedlist

我通过. `PagedList`_ 然后我以这种方式使用它：`PagedList.Mvc``NuGet`

```
@using PagedList;
@using PagedList.Mvc;

@model IPagedList<Employee>

@{
    ViewBag.Title = "ListEmployees";
}

<h3>All Employees (@ViewBag.TotalEmployees)</h3>

@if(Model.Count > 0)
{
    foreach(var item in Model)
    {
        Html.RenderPartial("Employee.Card", item);
    }

    @Html.PagedListPager((IPagedList)Model, page => Url.Action("List", new { page = page }), PagedListRenderOptions.Minimal)
}
else
{
    @: no records were found. Sorry
} 
```

使用控制器内部的代码：

```
public class EmployeeController : Controller
{
    private IRepository<Employee> repository; 
    private Int32 PageSize = 10;

    public EmployeeController(IRepository<Employee> repository)
    {
        this.repository = repository;
    }

    public ActionResult List(Int32? page)
    {
        var set = repository.Get();
        ViewBag.TotalEmployees = set.Count();

        return View(set.ToPagedList(page ?? 1, PageSize));
    }
} 
```

结果是没有样式的无序列表是正常的吗？然后我如何将自定义样式应用于寻呼机？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T12:12:22.230

PagedList nuget 包的创建者在这里。

老实说，我不确定发生了什么——这让我觉得很奇怪。根据您给出的描述，我最好的猜测`Url.Action("List", new {page = page})`是返回 null 或空值，这会导致`href`属性不呈现。您可以通过在视图的其他位置添加以下代码并确保它返回一个真实的 URL 来测试这一点：

`<p>@Url.Action("List", new {page = 1})</p>`

如果该段落标记为空，则问题很可能出在您的路由中。

# linux - 什么是 xsession 错误？

> ID：10222449
> 
> 赞同：14
> 
> 时间：2012-04-19T06:01:37.610
> 
> 标签：linux, ubuntu, xubuntu

所以我正在研究为什么一个程序要摆脱我的背景，程序的作者说要发布 .xsession-errors 并且很多人都这样做了。然后我的下一个问题是：什么是.xsession-errors？谷歌搜索显示了许多结果，但没有解释它是什么。

到目前为止我所知道的：

*   这是某种错误日志。我也无法弄清楚它的相关性（ubuntu 本身？程序？）
*   我有一个，似乎所有的 Ubuntu 系统都有它，尽管我无法验证。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-06-10T08:01:42.853

Linux 图形界面（例如 GNOME）提供了一种通过单击图标而不是在命令行上手动运行它们来运行应用程序的方法。但是，这样做会丢失命令行的输出——尤其是错误输出 (STDERR)。

为了解决这个问题，一些显示管理器（例如 GDM）将错误输出通过管道传输到 ~/.xsession-errors，然后可以将其用于调试目的。请注意，由于以这种方式启动的所有应用程序都转储到同一个日志，因此它会变得非常大并且难以找到特定消息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-19T06:12:48.443

这是您的 X windows 系统（Ubuntu GUI 建立在其之上）生成的错误日志。

基本上它是 X11 的一个相当低级的错误日志。

# python - BeautifulSoup + xlwt : 将 HTML 表格的内容放入 Excel

> ID：10222456
> 
> 赞同：1
> 
> 时间：2012-04-19T06:02:12.690
> 
> 标签：python, html, excel, beautifulsoup, html-table

我正在尝试（使用一个小的 python 脚本）将来自在线网页的 HTML 表格的内容放入 Excel 工作表中。

一切都运行良好，除了“Excel的东西”。

```
#!/usr/bin/python
# --*-- coding:UTF-8 --*--

import xlwt
from urllib2 import urlopen
import sys
import re
from bs4 import BeautifulSoup as soup
import urllib

def BULATS_IA(name_excel):
    """ Function for fetching the BULATS AGENTS GLOBAL LIST"""

 ws = wb.add_sheet("BULATS_IA") # I add a sheet in my excel file

    Countries_List = ['United Kingdom','Albania','Andorra']
    Longueur = len(Countries_List)
    number = 1 

    print("Starting to fetch ...")

    for Countries in Countries_List:
        x = 0
        y = 0

        print("Fectching country %s on %s" % (number, Longueur))
        number = number + 1
        htmlSource = urllib.urlopen("http://www.cambridgeesol.org/institutions/results.php?region=%s&type=&BULATS=on" % (Countries)).read()
        s = soup(htmlSource)
        **tableauGood = s.findAll('table')
        try:
            rows = tableauGood[3].findAll('tr')
            for tr in rows:
                cols = tr.findAll('td')
                y = 0
                x = x + 1
                for td in cols:
                    hum =  td.text

                    ws.write(x,y,td.text)
                    y = y + 1
                    wb.save("%s.xls" % name_excel)**

        except (IndexError):
            pass

    print("Finished for IA")

name_doc_out = raw_input("What do you want for name for the Excel output document ? >>> ")
wb = xlwt.Workbook(encoding='utf-8')
print("Starting with BULATS Agents, then with BULATS IA")
#BULATS_AGENTS(name_doc_out)
BULATS_IA(name_doc_out) 
```

- 所以 Excel 表中会发生任何事情，但是当我打印 var 的内容时......我看到了我应该看到的！

一小时以来我一直在尝试修复它，但我仍然不明白发生了什么。如果你们中的一些人可以帮我一把，那应该非常好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T06:38:08.350

我已经尝试了您的应用程序。而且我非常确定 td.text 的输出与 excel 文件相同。那么你的问题是什么？如果内容不是您想要的，您应该检查 BeautifulSoap 的使用情况。此外，您可能需要执行以下操作：

```
 for td in cols:
                hum =  td.text.replace("&nbsp;", " ")
                print hum
                ws.write(x,y,hum) 
```

# json - How to convert a dynamically added property(using metaClass) to JSON

> ID：10222461
> 
> 赞同：3
> 
> 时间：2012-04-19T06:02:45.720
> 
> 标签：json, grails, groovy

I am trying to add a dynamic property to each instance of a class and then convert a list of such objects to json. Refer to the example below

```
class Author{
    String name
    static hasMany=[books:Book]
}

class Book{
    String title
    static belongsTo=[author:Author]
}

my controller

class AuthorController{
    def listAuthors={
        def authorsList=Author.list()
        def details=['address':'xyz', phone:'123']
        authorList.each{
            it.metaClass.getDetails={->details}
        }

        render authorsList as JSON
    }
} 
```

now i want this dynamically added "details" property to also get rendered as JSON. please help

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T08:04:48.140

如果不是创建一个设置器，而是添加一个属性，它是否有效：

```
it.metaClass.details = details 
```

如果没有，您的最佳路径可能是从您的`authorsList`（将详细信息键/值对添加到每个地图）创建一个地图列表，然后将其序列化...

# iphone - 在 UINavigationBar 中居中 UILabel

> ID：10222469
> 
> 赞同：1
> 
> 时间：2012-04-19T06:03:14.053
> 
> 标签：iphone, objective-c, ios, ipad, uinavigationbar

我有一个 UINavigationBar 并设置了 leftBarButtonItem 和 rightBarButtonItem。左边栏设置为：

```
UIButton *backButton = [UIButton buttonWithType:UIButtonTypeCustom];
        [backButton setImage:[UIImage imageNamed:@"back.png"] forState:UIControlStateNormal];
        UIBarButtonItem *myButton = [[[UIBarButtonItem alloc] initWithCustomView:backButton] autorelease];
        self.navigationItem.leftBarButtonItem = myButton; 
```

并且 rightbarbutton 设置为：

```
UIButton *doneBtn = [UIButton buttonWithType:UIButtonTypeCustom];
 UIImage *doneButtonImage = nil;
        doneButtonImage = [UIImage imageNamed:@"done.png"];
        [doneBtn setImage:doneButtonImage forState:UIControlStateNormal];
  doneBarButtonItem = [[UIBarButtonItem alloc] initWithCustomView:doneBtn];
    self.navigationItem.rightBarButtonItem = doneBarButtonItem; 
```

背面的宽度是 23px，done 是 72px，所以它们不相等。现在的问题是我有一个标签，我想一直在中心。如果标签中的文本太长而干扰右栏按钮，我想剪辑文本。这是我的设置方式：

```
titleLabel = [[UILabel alloc] initWithFrame:CGRectZero];
    titleLabel.text = self.pageTitle; // Can't change
    titleLabel.adjustsFontSizeToFitWidth = YES;
    titleLabel.clipsToBounds = YES;
    titleLabel.numberOfLines = 1;
    titleLabel.font = [UIFont fontWithName:@"PTSans-Narrow" size:30.0]; 
    titleLabel.textColor = [UIColor colorWithWhite:0.6 alpha:1.0];
    titleLabel.backgroundColor = [UIColor yellowColor];
    titleLabel.autoresizingMask = UIViewAutoresizingFlexibleHeight;
    titleLabel.textAlignment = UITextAlignmentCenter;
    [titleLabel sizeToFit];
    titleLabel.frameHeight = self.navigationController.navigationBar.frameHeight;

 self.navigationItem.titleView = titleLabel; 
```

但是，这不会使标题居中。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T06:52:55.877

我建议先计算 self.pageTitle 的宽度，然后相应地设置 titleLabel 的位置。我更喜欢这个：-

```
titleLabel = [[UILabel alloc] init];
titleLabel.text = self.pageTitle; // Can't change

**CGSize maximumTitleLabelSize = CGSizeMake(200,40);//Set maximum width that an self.pageTitle can have.
CGSize expectedLabelSize = [titleLabel.text titleLabel.font 
                                            constrainedToSize:maximumTitleLabelSize
                                                lineBreakMode:UILineBreakModeWordWrap];
//adjust the label the the new width.
CGRect newFrame = titleLabel.frame;
newFrame.size.width = expectedLabelSize.width;
titleLabel.size.width = newFrame.size.width;**    
if(titleLabel.size.width==100)
{
titleLabel.frame = cgRectMake(85,5,titleLabel.size.width,30);
}
else if(titleLabel.size.width==200)
{
titleLabel.frame = cgRectMake(36,5,titleLabel.size.width,30);
}

titleLabel.adjustsFontSizeToFitWidth = YES;
titleLabel.clipsToBounds = YES;
titleLabel.numberOfLines = 1;
titleLabel.font = [UIFont fontWithName:@"PTSans-Narrow" size:30.0]; 
titleLabel.textColor = [UIColor colorWithWhite:0.6 alpha:1.0];
titleLabel.backgroundColor = [UIColor yellowColor];
titleLabel.autoresizingMask = UIViewAutoresizingFlexibleHeight;
titleLabel.textAlignment = UITextAlignmentCenter;
[titleLabel sizeToFit];
titleLabel.frameHeight = self.navigationController.navigationBar.frameHeight;

self.navigationItem.titleView = titleLabel; 
```

试试这个。它会帮助你。谢谢:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-06T04:50:47.400

这是最简单的解决方案，`sizeToFit`在将其添加到之前使用该方法`titleView`：

```
UILabel *titleLabel = [[UILabel alloc] init];
titleLabel.text = @"My Title";
titleLabel.font = [UIFont boldSystemFontOfSize:17.0f];
titleLabel.textColor = [UIColor whiteColor];
[titleLabel sizeToFit];

self.navigationItem.titleView = titleLabel; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T06:50:14.507

不要使用 NavigationItem 添加左右栏按钮，而是使用 addsubview 方法为导航栏添加自定义按钮。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T06:51:59.133

使用工具栏将多个按钮添加到您的导航栏。

```
 // create a toolbar to have two buttons in the right
UIToolbar* tools = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 0, 133, 44.01)];

// create the array to hold the buttons, which then gets added to the toolbar
NSMutableArray* buttons = [[NSMutableArray alloc] initWithCapacity:3];

// create a standard "add" button
UIBarButtonItem* bi = [[UIBarButtonItem alloc]`enter code here`
initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target:self action:NULL];
bi.style = UIBarButtonItemStyleBordered;
[buttons addObject:bi];
[bi release];

// create a spacer
bi = [[UIBarButtonItem alloc]
initWithBarButtonSystemItem:UIBarButtonSystemItemFixedSpace target:nil action:nil];
[buttons addObject:bi];
[bi release];

// create a standard "refresh" button
bi = [[UIBarButtonItem alloc]
initWithBarButtonSystemItem:UIBarButtonSystemItemRefresh target:self action:@selector(refresh:)];
bi.style = UIBarButtonItemStyleBordered;
[buttons addObject:bi];
[bi release];

// stick the buttons in the toolbar
[tools setItems:buttons animated:NO];

[buttons release];

// and put the toolbar in the nav bar
self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] initWithCustomView:tools];
[tools release]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-21T14:27:28.947

您只需使用此代码即可正常工作尝试一下

```
UILabel *titleLabel = [[UILabel alloc]initWithFrame:CGRectMake(0, 5, 190, 30)];
titleLabel.textColor = [UIColor whiteColor];
titleLabel.textAlignment = UITextAlignmentCenter;
titleLabel.text =@"My Wish List"; 
titleLabel.backgroundColor = [UIColor clearColor];
titleLabel.font = [UIFont fontWithName:@"Copperplate" size:16.0];
titleLabel.minimumFontSize = 10;
titleLabel.autoresizingMask=UIViewAutoresizingFlexibleWidth;
self.navigationItem.titleView = titleLabel;
[titleLabel release]; 
```

我也在我的项目中使用此代码....... :-)

# c#-4.0 - .NET 4 中是否有 mongodb C# 驱动程序支持 System.Dynamic.DynamicObject？

> ID：10222472
> 
> 赞同：17
> 
> 时间：2012-04-19T06:03:16.083
> 
> 标签：c#-4.0, mongodb, mongodb-.net-driver, dynamicobject

我正在开发一个使用 .NET Razor 和 mongodb 的项目。我想做这样的事情：

```
@{
    var feeds = DP.Database.GetCollection("feeds").FindAll();
}
<ul>
    @foreach (dynamic feed in feeds)
    {
        <li>@feed.message - @feed.from.name</li>
    }
</ul> 
```

但是，当前的 mongodb C# 驱动程序 FindAll() 返回不支持动态对象的 BsonDocument 集合。有人知道.NET 4 动态支持的 mongodb C# 驱动程序吗？

非常感谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-25T07:25:30.293

我为 MongoDB 驱动程序创建了一个直接扩展，它使用 Json.NET 重新序列化 BSON 文档并将其反序列化为动态的。通过包含以下类，您可以像这样简单地将 MongoDB 查询转换为动态

```
dynamic obj = collection.FindOneByIdAs<BsonDocument>(someObjectId).ToDynamic(); 
```

扩展类：

```
public static class MongoDynamic
{
    private static System.Text.RegularExpressions.Regex objectIdReplace = new System.Text.RegularExpressions.Regex(@"ObjectId\((.[a-f0-9]{24}.)\)", System.Text.RegularExpressions.RegexOptions.Compiled);
    /// <summary>
    /// deserializes this bson doc to a .net dynamic object
    /// </summary>
    /// <param name="bson">bson doc to convert to dynamic</param>
    public static dynamic ToDynamic(this BsonDocument bson)
    {
        var json = objectIdReplace.Replace(bson.ToJson(), (s) => s.Groups[1].Value);
        return Newtonsoft.Json.JsonConvert.DeserializeObject<dynamic>(json);
    }
} 
```

请务必参考 Newtonsoft.Json.dll ( [http://james.newtonking.com/projects/json-net.aspx](http://james.newtonking.com/projects/json-net.aspx) )

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-04-19T14:29:02.960

目前，MongoDB 驱动程序中不支持动态。这是因为它基于 .NET 3.5。但是，由于 .NET 4.0 程序集可以引用 .NET 3.5 程序集，因此您可以在 .NET 4.0 中编写 IBsonSerializationProvider 和 IBsonSerializer 来支持动态。

我们 10gen 正在考虑在未来这样做。如果你想看看，我已经在[https://github.com/craiggwilson/mongo-csharp-driver/tree/dynamic](https://github.com/craiggwilson/mongo-csharp-driver/tree/dynamic)获得了一些支持。肯定有错误，但它表明这是可能的。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-04-23T12:18:32.730

我有一个使用自定义 IBsonSerializer 和 Newtonsoft.Json 的干净解决方案。

在 BsonClassMap 上设置您的自定义序列化程序

```
map.MapProperty(member => member.Data)
   .SetElementName("Data")
   .SetSerializer(new DynamicSerializer()); 
```

或在物业上

```
[BsonSerializer(typeof(DynamicSerializer))]
public dynamic Data { get; set; } 
```

并且只包括以下课程

```
public class DynamicSerializer : IBsonSerializer
{
  #region Implementation of IBsonSerializer

  public object Deserialize(BsonReader bsonReader, Type nominalType, IBsonSerializationOptions options)
  {
    return Deserialize(bsonReader, nominalType, null, options);
  }

  public object Deserialize(BsonReader bsonReader, Type nominalType, Type actualType,
    IBsonSerializationOptions options)
  {
    if (bsonReader.GetCurrentBsonType() != BsonType.Document) throw new Exception("Not document");
    var bsonDocument = BsonSerializer.Deserialize(bsonReader, typeof(BsonDocument), options) as BsonDocument;
    return JsonConvert.DeserializeObject<dynamic>(bsonDocument.ToJson());
  }

  public IBsonSerializationOptions GetDefaultSerializationOptions()
  {
    return new DocumentSerializationOptions();
  }

  public void Serialize(BsonWriter bsonWriter, Type nominalType, object value, IBsonSerializationOptions options)
  {
    var json = (value == null) ? "{}": JsonConvert.SerializeObject(value);
    BsonDocument document = BsonDocument.Parse(json);
    BsonSerializer.Serialize(bsonWriter, typeof(BsonDocument), document,options); 
  }

  #endregion
} 
```

InfoSlips - GlobalKinetic

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-22T15:48:35.267

只是以马克西米利安的回答为基础。这将从任何查询返回动态列表。

```
 /// <summary>
    /// deserializes this BsonDocument cursor result to a list of .net dynamic objects
    /// </summary>
    /// <param name="cursor">cursor result to convert to dynamic</param>
    /// <returns></returns>
    public static List<dynamic> ToDynamicList(this MongoCursor<BsonDocument> cursor)
    {
        var dynamicList = new List<dynamic>();
        var list = cursor.ToList();
        for (int i = 0, l = list.Count; i < l; i++)
            dynamicList.Add(list[i].ToDynamic());

        return dynamicList;
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-31T00:46:15.227

尽管这是一个古老的话题，但它在今天仍然与发布帖子时一样重要，而且我还没有看到任何为双向支持提供简单解决方案的解决方案，我已经修改了@Maximilian Scherer 代码，以便它可以您转换为动态对象，这很容易让您再次保存您的文档。

```
public static class MongoDynamic
{
    /// <summary>
    /// deserializes this bson doc to a .net dynamic object
    /// </summary>
    /// <param name="bson">bson doc to convert to dynamic</param>
    public static dynamic ToDynamic(this BsonDocument bson)
    {
        var json = bson.ToJson(new MongoDB.Bson.IO.JsonWriterSettings { OutputMode = JsonOutputMode.Strict });
        dynamic e =  Newtonsoft.Json.JsonConvert.DeserializeObject<ExpandoObject>(json);
        BsonValue id;
        if (bson.TryGetValue("_id", out id))
        {
            // Lets set _id again so that its possible to save document.
            e._id = new ObjectId(id.ToString());
        }
        return e;
    }
} 
```

使用示例：

```
// Get BsonDocument from db here
BsonDocument doc = ...

// Convert to dynamic.
var d = doc.ToDynamic();

// Lets add a none existant property.
d.Name = "test";

// Assuming you already have your collection set up
collection.Save(new BsonDocument(d)); 
```

# javascript - 转义 XML 文档中的特殊字符

> ID：10222476
> 
> 赞同：0
> 
> 时间：2012-04-19T06:03:44.313
> 
> 标签：javascript, xml, for-loop, iteration, markup

我在网页上有一组按钮标签，我想获得一个特定的按钮标签，其 innerText 为“保存”。（它没有 id。）所以我有这个代码

```
var tags = document.getElementsByTagName("button");
for (var i = 0; i < tags.length; i++) {
    if (tags[i].innerText === 'Save') {
        tags[i].click();
        break;
    }
} 
```

当我在 chrome 控制台中尝试时，效果很好。但我不能将它包含在我的果冻文件中（这是一个将被处理成 html 的 xml 标记；类似于 jsp。）

问题在于 for 循环中的“<”运算符导致此问题

SAXParserException：“元素的内容必须由格式良好的字符数据或标记组成。”

而且我学会了不要将 for..in 循环与数组一起使用。我能做些什么？请建议我一些解决方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T06:07:16.340

你正在解决错误的问题。您的问题是“`<`在 XML 中包含一个字符会破坏 XML”。您需要找出如何正确地包含这样一个字符，而不是避免在您的数据中出现一个字符。没有必要避免标准的 for 循环。

要么用 CDATA 标记（阻止 XML 特殊字符（CDATA 序列的结尾除外）变得特殊）包装该部分，要么在 XML 中表示`<`with `&lt;`。

```
<![CDATA[
for (var i = 0; i < j; i++) {
    etc(i);
}
]]> 
```

或者

```
for (var i = 0; i &lt; j; i++) {
    etc(i);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T06:08:17.943

您可以使用新`Array.forEach`方法进行迭代，但它仅适用于 JavaScript 1.6：

```
var tags = Array.prototype.slice.call(document.getElementsByTagName("button"));
tags.forEach(function (tag) {
  // ...
}); 
```

但真正的解决方案是将您的代码放入`<![CDATA[]]>`：

```
<code>
<![CDATA[
var tags = document.getElementsByTagName("button");
for (var i = 0; i < tags.length; i++) {
  // ...
}
]]>
</code> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T06:08:08.487

```
var limit = tags.length;

//loop until 0 (which is false)
while(limit) {
    if (tags[tags.length-limit].innerText === 'Save') {
        tags[tags.length-limit].click();
        break;
    }
    limit--;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T06:07:11.573

放在里面`<[CDATA[ ... ]]>`

编辑：错误的语法...

# java - 在java中从Mysql DB下载视频文件

> ID：10222478
> 
> 赞同：0
> 
> 时间：2012-04-19T06:04:07.733
> 
> 标签：java, mysql, video

我正在尝试下载在 Mysql 中存储为 blob 的视频文件。该文件可以正常下载，但我猜它已损坏。下载的格式有ogg、webm n mp3。问题是当我尝试使用 ffmpeg 转换任何视频时，它显示“处理期间发现无效数据”。

我正在使用以下代码

```
 Blob image = null;
    Connection con = null;
    ResultSet rs = null;
     try{
     Class.forName("com.mysql.jdbc.Driver");
     con = MySqlConnect.getDBConnection();
     String sql = "select videos, filename from sun.videostore where  id ='"+fileID+"'";
     Statement stmt = con.createStatement();
     rs = stmt.executeQuery(sql);
     while (rs.next()) {
    String filename = rs.getString("filename");
    Blob video = rs.getBlob("videos");
    File file1 = new File("C:\\DowloadFile\\" + filename); 
    FileOutputStream foStream = new FileOutputStream(file1);
    if( video != null){ 
        int length = (int) video.length();
        InputStream is2 = video.getBinaryStream();
        int b = 0;
        while(b!=-1){
         b=is2.read();
         foStream.write(b);
        }

    }

    }           
  }catch(Exception e){
     System.out.println("Ecxeption in getting data from DB = "+e);
  }' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T05:49:59.637

不，我检查了我上传的文件，它没有损坏....我尝试了一种不同的方式将视频上传到数据库中。

```
File video = new File(filename);                                   
fis = new FileInputStream(video); 
ps.setBinaryStream(2, fis, (int) video.length());//preparedStatement 
```

如果我以上述方式上传文件，我会在下载时获得正确的文件。

# ssis - SSIS error "cannot detach from one or more processes"

> ID：10222479
> 
> 赞同：1
> 
> 时间：2012-04-19T06:04:09.767
> 
> 标签：ssis

i have a package which runs for about 6 hours. I looked at it every once in a while, it was going well. In the morning i saw that every task was green and it said "Execution completed", but when i clicked on it to stop the process, i got this message - "cannot detach from one or more processes. Would you like to terminate them instead?" So i chose yes. The question is is it safe to continue with my work? Did the termination affect my DB somehow? Again, all the tasks where already completed. Will appreciate a quick response as i don't know whether to proceed or execute the package again.. thank you! I'm using SQL Server 2005 and visual studio 2005

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T15:26:15.330

我也遇到了同样的问题，我已将缓冲区大小从 10000 增加到 100000 以解决该问题。请试试这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T13:11:33.870

这看起来像是设计师的问题，而不是包装本身的问题，所以我想说你可以删除

快速提问，你在这么大的包裹上使用检查点吗？如果没有，我建议你使用它。如果你不知道它是什么，它基本上是一个允许你的包从故障点运行的功能。因此，如果您在 5:30 打包失败，您可以从最后一个检查点重新运行它，只需一个小时即可，而不是再次运行所有内容

# image - 使用coldfusion 8将图像添加到excel文档中的行

> ID：10222486
> 
> 赞同：3
> 
> 时间：2012-04-19T06:04:36.120
> 
> 标签：image, excel, coldfusion, export-to-excel

使用 Coldfusion 8 是否有人能够将图像嵌入到 excel 电子表格 (xlsx) 中或通过 img src 链接它们？

一些背景信息：cf 服务器将获取一个带有产品行的 excel 文档。基于产品 id 和样式等，我能够找到或创建一个图像，该图像作为第一列添加到现有的 excel 文档中。

我知道 Coldfusion 9 有一个名为 SpreadsheetAddImage 的功能，不幸的是我在 cf 8 上没有机会升级。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T02:57:07.250

我不确定您当前使用什么来操作 xlsx 文件。但是，CF9 中的电子表格功能利用了[POI](http://poi.apache.org/download.html)，显然也可以从 CF8 中使用。它只需要更多的低级代码。

**先决条件：**

虽然 POI 与 CF8 捆绑在一起，但它是一个旧版本。您需要更新版本来操作 .xlsx 文件。您可以使用[javaLoader](https://github.com/markmandel/JavaLoader) - 或 - 替换`{cf_root}\lib`文件夹中的现有 jar。*请注意，我不知道更换罐子是否有任何负面影响。*

**添加图像：**

Excel 并不真正支持`<img>`标签，只支持超链接。但是，您可以像 SpreadsheetAddImage 那样在工作簿中嵌入图像。正如 POI 的[Busy Developers Guide](http://poi.apache.org/spreadsheet/quick-guide.html#Images)中所述，基本流程是：

1.  使用 WorkBookFactory 加载 xlsx 文件
2.  获取每个图像的二进制文件并将其添加到工作簿
3.  将每个图像锚定到所需的单元格
4.  将修改后的工作簿保存回磁盘

**例子：**

* * *

```
<cfscript>
    // .. 

    // load the xlsx file with the javaLoader
    factory = loader.create("org.apache.poi.ss.usermodel.WorkbookFactory");
    input = loader.create("java.io.FileInputStream").init( "c:/path/to/someFile.xlsx" );
    workbook = factory.create( input );
    input.close();

    // get the desired sheet and load helper objects (once)
    sheet     = workbook.getSheet("Your Sheet Name");
    patriarch = sheet.createDrawingPatriarch();
    helper    = workbook.getCreationHelper();

    // add the image to the workbook
    imageBytes  = fileReadBinary( "c:/path/to/someImage.jpg" );
    imageIndex  = workbook.addPicture( imageBytes, workbook.PICTURE_TYPE_JPEG );

    // anchor the picture to the first cell ie A1
    anchor     = helper.createClientAnchor();
    anchor.setRow1( javacast("int", 0) ); // row of first cell (zero based)
    anchor.setCol1( javacast("int", 0) ); // column of first cell (zero based)
    picture = patriarch.createPicture( anchor, imageIndex );
    picture.resize(); // only supported for jpg and png

    // save it back to disk
    outstream = loader.create("java.io.FileOutputStream").init( "c:/path/to/outFile.xlsx"" );
    workbook.write( outstream );
    outstream.flush();
    outstream.close(); 
</cfscript> 
```

* * *

**新列** 具有讽刺意味的是，插入新列比添加图像更棘手。最后我检查了一下，POI 仍然缺少用于插入新列的内置函数。因此，在将图像插入第一列之前，您需要将所有现有单元格向右移动。棘手的部分是维护单元格格式、合并单元格等。

# android - Android 上的 USB 音频类设备

> ID：10222489
> 
> 赞同：1
> 
> 时间：2012-04-19T06:04:41.950
> 
> 标签：android, usb

我正在尝试在主机模式下将 USB 音频类设备与我的 Galaxy Nexus 一起使用。我想同时使用芯片组的音频和 GPIO/I2C 功能。我的理解是Android内核将*不*支持通过USB的音频（无需root手机）。

但是，根据[这篇文章](http://android.serverbox.ch/?p=549)，如果我可以通过其 VID 和 PID 获取任意 USB 设备，我似乎可以为任意 USB 设备编写软驱动程序。也许我什至可以使用同步端点从我的应用程序中播放一些音频。~~这可能吗？~~太糟糕了，目前不支持同步端点。

当我连接我的设备并使用`dmesg`时，我看到了`device vXXXX pXXXX is not supported`。这说明什么？

如果我的 USB 设备有时无法枚举（见下文）怎么办？这可能是硬件问题吗？

```
<6>[  262.061309] usb 2-1: new full speed USB device number 5 using musb-hdrc
<3>[  262.123870] hub 2-0:1.0: unable to enumerate USB device on port 1
<6>[  262.483215] usb 2-1: new full speed USB device number 6 using musb-hdrc
<3>[  262.631652] usb 2-1: device descriptor read/all, error -19
<3>[  262.694183] hub 2-0:1.0: unable to enumerate USB device on port 1
<6>[  263.053558] usb 2-1: new full speed USB device number 8 using musb-hdrc
<3>[  268.608215] usb 2-1: device not accepting address 8, error -110
<3>[  268.670715] hub 2-0:1.0: unable to enumerate USB device on port 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T07:54:42.837

根据[http://www.usb.org/developers/devclass_docs/audio10.pdf](http://www.usb.org/developers/devclass_docs/audio10.pdf)（第 4.6 节），USB 音频类设备使用同步端点来传输实际的音频数据。

根据[http://developer.android.com/reference/android/hardware/usb/UsbEndpoint.html](http://developer.android.com/reference/android/hardware/usb/UsbEndpoint.html)，Android 的 USB 主机 API 目前不支持同步端点。

# javascript - Javascript's Callback Function

> ID：10222492
> 
> 赞同：1
> 
> 时间：2012-04-19T06:05:20.953
> 
> 标签：javascript

I am using Lazy Load Jquery plugin here on my test page: [http://bloghutsbeta.blogspot.com/2012/03/testing-2_04.html](http://bloghutsbeta.blogspot.com/2012/03/testing-2_04.html) And this is the minified script for lazyload: Code:

```
<script src="http://files.cryoffalcon.com/javascript/jquery.lazyload.min.js" type="text/javascript" charset="utf-8"></script> 
```

this one is to trigger lazy load: Code:

```
<script type="text/javascript" charset="utf-8">
      $(function() {
          $("img").lazyload({
     effect : "fadeIn"
 });
      });
  </script> 
```

In the above script I have added fadeIn effect to it, I don't know if I have done it right according to script writting I am not good in scripts ^^ So, I would like have an advise if it's well written or there is some comma mistake.

But that is not my important question, all of the above lazy load plugin is used with QuickSand Jquery plugin that I am using for sorting. QuickSand Jquery Plugin requires callback function if it's tooltip or Lazy Load, So can someone kindly tell me how to make lazy load work together with quicksand jquery. Here is the quicksand's script:

Code:

```
&lt;script type=&quot;text/javascript&quot;&gt;
(function(cash) {
 $.fn.sorted = function(customOptions) {
  var options = {
   reversed: false,
   by: function(a) {
    return a.text();
   }
  };
  $.extend(options, customOptions);

  $data = $(this);
  arr = $data.get();
  arr.sort(function(a, b) {

      var valA = options.by($(a));
      var valB = options.by($(b));
   if (options.reversed) {
    return (valA &lt; valB) ? 1 : (valA &gt; valB) ? -1 : 0;    
   } else {  
    return (valA &lt; valB) ? -1 : (valA &gt; valB) ? 1 : 0; 
   }
  });
  return $(arr);
 };

})(jQuery);

$(function() {

  var read_button = function(class_names) {
    var r = {
      selected: false,
      type: 0
    };
    for (var i=0; i &lt; class_names.length; i++) {
      if (class_names[i].indexOf('selected-') == 0) {
        r.selected = true;
      }
      if (class_names[i].indexOf('segment-') == 0) {
        r.segment = class_names[i].split('-')[1];
      }
    };
    return r;
  };

  var determine_sort = function($buttons) {
    var $selected = $buttons.parent().filter('[class*=&quot;selected-&quot;]');
    return $selected.find('a').attr('data-value');
  };

  var determine_kind = function($buttons) {
    var $selected = $buttons.parent().filter('[class*=&quot;selected-&quot;]');
    return $selected.find('a').attr('data-value');
  };

  var $preferences = {
    duration: 800,
    easing: 'easeInOutQuad',
    adjustHeight: 'dynamic'
  };

  var $list = $('#data');
  var $data = $list.clone();

  var $controls = $('ul#gamecategories ul');

  $controls.each(function(i) {

    var $control = $(this);
    var $buttons = $control.find('a');

    $buttons.bind('click', function(e) {

      var $button = $(this);
      var $button_container = $button.parent();
      var button_properties = read_button($button_container.attr('class').split(' '));      
      var selected = button_properties.selected;
      var button_segment = button_properties.segment;

      if (!selected) {

        $buttons.parent().removeClass('selected-0').removeClass('selected-1').removeClass('selected-2');
        $button_container.addClass('selected-' + button_segment);

        var sorting_type = determine_sort($controls.eq(1).find('a'));
        var sorting_kind = determine_kind($controls.eq(0).find('a'));

        if (sorting_kind == 'all') {
          var $filtered_data = $data.find('li');
        } else {
          var $filtered_data = $data.find('li.' + sorting_kind);
        }

        if (sorting_type == 'size') {
          var $sorted_data = $filtered_data.sorted({
            by: function(v) {
              return parseFloat($(v).find('span').text());
            }
          });
        } else {
          var $sorted_data = $filtered_data.sorted({
            by: function(v) {
              return $(v).find('strong').text().toLowerCase();
            }
          });
        }

        $list.quicksand($sorted_data, $preferences, function () { $(this).tooltip (); } );

      }

      e.preventDefault();
    });

  }); 

var high_performance = true;  
  var $performance_container = $('#performance-toggle');
  var $original_html = $performance_container.html();

  $performance_container.find('a').live('click', function(e) {
    if (high_performance) {
      $preferences.useScaling = false;
      $performance_container.html('CSS3 scaling turned off. Try the demo again. &lt;a href=&quot;#toggle&quot;&gt;Reverse&lt;/a&gt;.');
      high_performance = false;
    } else {
      $preferences.useScaling = true;
      $performance_container.html($original_html);
      high_performance = true;
    }
    e.preventDefault();
  });
});
&lt;/script&gt; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T07:23:05.910

你可以使用这个：

```
$list.quicksand($sorted_data, $preferences, function(){
    $(this).tooltip ();
    $("img").lazyload({
        effect : "fadeIn"
    });
}); 
```

# python - onetomany relation field in Openerp

> ID：10222493
> 
> 赞同：0
> 
> 时间：2012-04-19T06:05:26.613
> 
> 标签：python, xml, openerp

I try to create a related field on OpenERP 6.0.1 . is it possible to define two different onetomany relationfor the same field name? What all changes i must do in the(.py file and XML Files).

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T09:02:12.073

不，你不能这样做：

*   字段名称是 Python 字典中的键，在您编写的内容中，第二个`invoice_line`将覆盖第一个

*   这无论如何都会弄乱 OpenERP 的 ORM，因为它不处理与不同表的关系。

因此，您需要两个不同的列，一个相对于`account.invoice.line`，另一个与`account.service.line`. 如果您确实需要合并视图，则可以添加一个函数字段，该字段将返回前两个字段找到的发票和服务行的联合。但我不确定表格是否能够处理这个问题。

# java - Java中高效的非重复密码生成器

> ID：10222498
> 
> 赞同：0
> 
> 时间：2012-04-19T06:05:52.427
> 
> 标签：java, random, passwords, generator, non-repetitive

我已经多次访问这个网站并找到了我的问题的答案，但现在是我发布自己的问题的时候了！因此，我的软件中特定类的目标是生成固定长度的随机密码，由“低”ASCII 字符组成。主要问题是我不想两次生成相同的密码，但始终保证唯一性。最初，我使用[HashMap](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)来对迄今为止生成的每个密码进行哈希处理，并在每次创建新密码时用作检查，然后再返回。但是，Java HashMap 对象的大小有限，最终 Map 会变得过于饱和而无法维持可接受的检索时间。以下是我对这个问题的最新破解：

```
package gen;

import java.util.Set;

import java.util.Random;

import java.util.HashSet;

public class Generator {

Random r;
int length;
Set<String> seen;

public Generator(int l){
    seen = new HashSet<String>();
    length = l;
    r = new Random();
    r.setSeed(System.currentTimeMillis());
}

public String generate(){   
    String retval = "";
    int i = 0;
    while(i<length){
        int rand = r.nextInt(93)+33;
        if(rand!=96){
            retval+= (char)rand;
            i++;
        }
    }
    return retval;
}

public String generateNoRepeat(){
    String retval;
    int i;
    do{
        retval ="";
        i = 0;
        while(i<length){
            int rand = r.nextInt(93)+33;
            if(rand!=96){
                retval+= (char)rand;
                i++;
            }
        }
    }while(!seen.add(retval));
    return retval;
}
} 
```

编辑：非常感谢 Set 建议。它现在也让我的代码更干净了！

我可能决定只使用愚蠢的生成器方法来填充[BlockingQueue](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/BlockingQueue.html)并将其多线程化至死......

进一步说明：这并不意味着生成安全密码。它必须简单地保证它最终会生成所有可能的密码，并且对于给定的长度和字符集只生成一次。

笔记：

我听取了每个人的见解并得出结论，顺序生成可能的密码并将它们存储到磁盘可能是我最好的选择。要么，要么简单地允许重复密码，并通过多个生成器线程来补充效率低下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T06:28:22.137

为什么不只加密序列号？

让 n 成为序列中的第一个数字（不要从零开始）。令 e 为某种加密算法（例如 RSA）。

那么你的密码是 e(n), e(n+1), e(n+2), ...

但我非常同意 Greg Hewgill 和 Ted Hopp 的观点，避免重复的麻烦多于其价值。

# asp.net-mvc-3 - 在同一视图中单击 ActionLink 来调用页面

> ID：10222500
> 
> 赞同：1
> 
> 时间：2012-04-19T06:06:03.290
> 
> 标签：asp.net-mvc-3, html.actionlink

我正在 MVC3 中开发一个应用程序。我在左侧有几个链接，单击链接时，页面应该显示在右侧我已经制作了一个表格。在第一列中，链接显示如下：

```
<ul>
@foreach (var item in Model)
{
    <li>@Html.ActionLink(item.HobbyName, "Hobbies")</li>
} 
```

在第二列中，我需要在单击链接时显示有关链接的信息，但我不明白我这样做的原因。就像我在控制器中编写的内容以获取本列中的这些视图一样。请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T06:14:04.460

使用 Ajax.ActionLink 而不是 Html.Actionlink 并将 Ajax Options 中的更新目标 id 设置为要更新的 div。例子

```
<ul>
@foreach(var item in Model)
{
<li>
@Ajax.ActionLink(item.HobbyName, "Hobbies",
             new AjaxOptions { UpdateTargetId = "divHobyList" })
</li>
}
</ul>

<div id="divHobyList">
here will load hobbies
</div> 
```

# jsf-2 - 如何避免页面在按钮或链接点击时过期。当我为表单上的任何按钮单击或链接返回 null 时页面过期

> ID：10222506
> 
> 赞同：0
> 
> 时间：2012-04-19T06:06:42.143
> 
> 标签：jsf-2

我正在使用过滤器检查用户是否登录，然后不缓存上一页。这个代码是这样的，

```
public void doFilter(ServletRequest request, ServletResponse response, FilterChain filterChain)
        throws IOException, ServletException {
    ....
    if (isRegisteredUser.equalsIgnoreCase(("1"))) {

        sessionID = UUID.randomUUID().toString();

        session.setMaxInactiveInterval(1800); 

        Cookie userCookie = new Cookie("userCookie", "loginUser");
        userCookie.setPath("/");
        httpServletResponse.addCookie(userCookie);

        Cookie sessionCookie = new Cookie("WITSessionCookie", sessionID);
        sessionCookie.setMaxAge(60*30);  
        sessionCookie.setPath("/");    
        httpServletResponse.addCookie(sessionCookie);

        if (!httpServletRequest.getRequestURI().startsWith(httpServletRequest.getContextPath() + ResourceHandler.RESOURCE_IDENTIFIER)) { // Skip JSF resources (CSS/JS/Images/etc)
            httpServletResponse.setHeader("Cache-Control", "no-cache, no-store, must-revalidate"); // HTTP 1.1.
            httpServletResponse.setHeader("Pragma", "no-cache"); // HTTP 1.0.
            httpServletResponse.setDateHeader("Expires", 0); // Proxies.
        }

        filterChain.doFilter(httpServletRequest, httpServletResponse);

    }
    ...

} //end of doFilter() 
```

但问题是，如果用户在任何页面上单击任何按钮或链接，并且该操作返回 null，然后单击浏览器后退按钮，则显示页面已过期。**我怎样才能防止这种情况？**很好，该页面没有缓存，但是**为什么当我单击任何按钮或任何链接并为该操作返回 null 时它会使我的页面过期？**
谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T11:54:24.697

当最终用户尝试重新发送未缓存在浏览器中的 POST 请求时，这是正常且指定的行为。您需要实现 post-redirect-get 模式。在 action 方法中发送重定向到目标页面。或者，更好的是，将其改为 ajax 提交。顺便说一句，无论您是否通过返回返回相同的视图`null`。

# mongodb - Zend Framework 2 的注解命名空间未加载 DoctrineMongoODMModule

> ID：10222507
> 
> 赞同：3
> 
> 时间：2012-04-19T06:06:53.737
> 
> 标签：mongodb, doctrine-orm, zend-framework2

我已经为 zf2 加载了 Doctrine MongoODM 模块。我在控制器中安装了文档管理器，在我尝试持久化文档之前一切都很顺利。它失败并出现此错误：

“[语义错误] 从未导入类 SdsCore\Document\User 中的注释“@Document”。”

DocParser.php 的这一行似乎失败了 `if ('\\' !== $name[0] && !$this->classExists($name)) {`

它失败是因为`$name = 'Document'`, 并且导入的注解类是`'Doctrine\ODM\MongoDB\Mapping\Annotations\Doctrine'`

这是我的文档类：

```
namespace SdsCore\Document;

/** @Document */
class User
{

/** 
 * @Id(strategy="UUID") 
 */
private $id;

/** 
 * @Field(type="string") 
 */
private $name;

/** 
 * @Field(type="string") 
 */
private $firstname;

public function get($property) 
{
    $method = 'get'.ucfirst($property);
    if (method_exists($this, $method))
    {
        return $this->$method();
    } else {
        $propertyName = $property;
        return $this->$propertyName;
    }           
}

public function set($property, $value) 
{
    $method = 'set'.ucfirst($property);
    if (method_exists($this, $method))
    {
        $this->$method($value);
    } else {
        $propertyName = $property;                
        $this->$propertyName = $value;
    }
} 
```

}

这是我的动作控制器：

```
public function indexAction()
{
    $dm = $this->documentManager;

    $user = new User();
    $user->set('name', 'testname');
    $user->set('firstname', 'testfirstname');
    $dm->persist($user);
    $dm->flush;

    return new ViewModel();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T10:31:55.603

我还没有工作`DoctrineMongoODMModule`，但我会在下周完成。无论如何，您仍在使用加载注释的“旧方式”。大多数学说项目现在都在使用[`Doctrine\Common\Annotations\AnnotationReader`](https://github.com/doctrine/common/blob/master/lib/Doctrine/Common/Annotations/AnnotationReader.php)，而你`@AnnotationName`告诉我你正在使用[`Doctrine\Common\Annotations\SimpeAnnotationReader`](https://github.com/doctrine/common/blob/master/lib/Doctrine/Common/Annotations/SimpleAnnotationReader.php). 您可以在[Doctrine\Common 文档中阅读更多相关信息](http://docs.doctrine-project.org/projects/doctrine-common/en/latest/reference/annotations.html)

因此，以下是修复文档的方法：

```
<?php
namespace SdsCore\Document;

use Doctrine\ODM\MongoDB\Mapping\Annotations as ODM;

/** @ODM\Document */
class User
{

    /** 
     * @ODM\Id(strategy="UUID") 
     */
    private $id;

    /** 
     * @ODM\Field(type="string") 
     */
    private $name;

    /** 
     * @ODM\Field(type="string") 
     */
    private $firstname;

    /* etc */
} 
```

# javascript - MongoDB findAndModify() 将查询添加到更新子句

> ID：10222509
> 
> 赞同：3
> 
> 时间：2012-04-19T06:07:08.370
> 
> 标签：javascript, node.js, mongodb

我正在 Node 中创建一个包含一些 CRUD 组件的应用程序。在我的一个数据对象上，我有一个`save()`方法，如果该对象具有在集合中找到的 id，则更新记录，如果没有，则更新新文档。此外，如果进行 upsert，我想取回 Mongo 生成的文档的 _id。

似乎[findAndModify](http://www.mongodb.org/display/DOCS/findAndModify+Command)会这样做，而且确实，它确实从数据库中返回了一个 _id 值。在我的查询子句中，我按 _id 过滤。如果我的数据对象没有 id，Mongo 会正确执行 upsert，但是，无论它返回什么 _id 值，除了我在`update`子句中设置的键之外，它还会根据文档设置 _id我在`query`子句中使用了什么值。为了清楚起见，一些代码：

```
User.prototype.save = function(callback) {
    var that = this;

    var args = {
        'query'     : { _id: this.getId() }, //getId() returns empty string if not set
        'update'    : { $set : {
            firstName   : this.firstName,
            lastName    : this.lastName,
            email       : this.email
          //_id        : this.getId()
          // which is blank, is magically getting added due to query clause
        }},
        'new'       : true,
        'upsert'    : true,
        'fields'    : {'_id' : true}
    };

    this.db.collection(dbName).findAndModify(args, function(err, doc){
        if(!that.getId()) {
            that.setId(doc._id);
        }

        if (typeof(callback) === "function"){
            callback.call(that);
        }
    }); 
} 
```

我只是在寻找更新的语义，它也恰好在 upsert 上返回 Mongo 生成的 _id。我不希望`query`额外附加子句的值，就好像它们在`update`地图中一样。有什么方法可以实现我的目标吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T15:28:17.683

您可以生成 _id 客户端，使用 new`new require('mongodb').ObjectID()` 然后您可以执行常规 upsert（无需查找和修改），因为您已经有了 _id。

但是，如果您使用 findAndModify，请记住节点驱动程序在位置上接受此函数的参数，而不是作为对象（如在常规 mongo shell 中）。使用节点驱动程序进行查找和修改的正确格式如下所示：

`collection.findAndModify(criteria, sort, update[, options, callback])`

（选项和回调是可选参数）。完整文档在这里： [https ://github.com/mongodb/node-mongodb-native/blob/master/docs/insert.md](https://github.com/mongodb/node-mongodb-native/blob/master/docs/insert.md)

# javascript - 具有布局适合和网格的 Extjs 3.3.1 FieldSet 在窗口调整大小时不会调整网格大小

> ID：10222512
> 
> 赞同：5
> 
> 时间：2012-04-19T06:07:16.637
> 
> 标签：javascript, extjs, extjs3

```
var colModel = new Ext.grid.ColumnModel({
      columns: [ columns here...]
})

var grid = new Ext.Ext.grid.GridPanel({
   store: store,
   loadMask: true,
   autoExpandColumn: 'itemDescription',
   stripeRows: true,
   colModel: colModel
})

var form = new Ext.FormPanel({
   labelWidth: 150,
   bodyStyle: 'padding:2px 5px;',
   autoScroll: true,
   items:[
     new Ext.form.FieldSet({
       layout: 'fit',
       collapsible: true,
       height:300,
       items: [
            grid 
       ]
     }
   ]
}) 
```

调整窗口大小后，网格不会改变其宽度......有什么想法吗？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T08:11:10.457

您`Grid`将根据`FieldSet`到期调整大小`layout: 'fit'`。由于`FormPanel`没有布局集，它会自动使用`layout: 'form'`. 将`FieldSet`充当*法线* `Form Field`，因此需要配置为自行调整大小。这可以使用 的`anchor`属性来完成`FormLayout`：

```
var form = new Ext.FormPanel({
    labelWidth: 150,
    bodyStyle: 'padding:2px 5px;',
    autoScroll: true,
    items:[
        new Ext.form.FieldSet({
            layout: 'fit',
            anchor: '-0',
            collapsible: true,
            height:300,
            items: [
                grid 
            ]
        }
    ]
}); 
```

这将告诉`FieldSet`始终保持距`FormPanel`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-01T07:32:41.953

试试这个.....

```
var colModel = new Ext.grid.ColumnModel({
  columns: [ columns here...]
})

var grid = new Ext.Ext.grid.GridPanel({
store: store,
loadMask: true, 
autoExpandColumn: 'itemDescription',
stripeRows: true,
colModel: colModel
})

var form = new Ext.FormPanel({
labelWidth: 150,
bodyStyle: 'padding:2px 5px;',
autoScroll: true,
items : {
   xtype : 'fieldset',
   title : 'Give proper Title',
   defaults: {
      anchor: '100%'
   },
   layout: 'anchor',
   collapsible: true,
   items: grid
}
}); 
```

# javascript - 在页面初始加载后加载 jQuery 库

> ID：10222513
> 
> 赞同：0
> 
> 时间：2012-04-19T06:07:35.537
> 
> 标签：javascript, jquery

我有一个案例，我需要检查页面上是否存在 jQuery，如果不存在，我需要加载它。我创建了一个脚本标签并引用了外部 jQuery 库。在继续脚本的其余部分之前，如何等待库加载到页面上？

更新：

以下是祗园建议后的样子：

```
if (typeof jQuery === 'undefined') {
    var j = document.createElement('SCRIPT');
    j.type = 'text/javascript';
    j.src = '//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js';
    document.getElementsByTagName('head')[0].appendChild(j);
    j.onload = function () {
        var section = document.createElement('DIV');
        section.setAttribute('style', 'height:300px; width:250px; position: fixed; right: 0px; top: 100px;z-index: 9999; border-style:solid;border-width:1px;');
        section.innerHTML = '<p>steps</p><textarea name="steps"></textarea><p>expected results</p><textarea name="results"></textarea><p><input type="button" name="submit" value="add test case" /></p>';

        document.getElementsByTagName('body')[0].appendChild(section);
    };  
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T06:13:50.060

```
<script type="text/javascript">
    if(typeof jQuery === 'undefined')
        document.write('<sc'+'ript type="text/javascript" src="jquery.js"></scrip'++'t>');
    window.onload = function(){
        // jquery should be present here
    });
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T06:13:28.593

您可以检查是否像这样加载了jquery

```
window.onload = function(){
    if(typeof jQuery == "undefined"){
           // jquery is not available 
    }
} 
```

如果没有加载 jquery，我建议使用像 requirejs [http://requirejs.org/这样的 javascript 加载器](http://requirejs.org/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T06:12:15.693

您可以将其设置为`window.onload`

```
window.onload = function () { alert("It's loaded!") } 
```

[当页面完全加载时执行 Javascript](https://stackoverflow.com/questions/1033398/execute-javascript-when-page-has-fully-loaded)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T06:16:37.587

包含 jQuery 文件，仅在需要时，您需要先检查它

```
function afterLoad(){
  if(typeof(jQuery)!=='undefined')
    return;

  var element1 = document.createElement(“script”);
  element1.src = “pointToYourjQueryFile.js”;
  element1.type=”text/javascript”;
  document.getElementsByTagName(“head”)[0].appendChild(element1);
} 
```

以这种方式在窗口加载时调用此函数...

```
<body onload="afterLoad()"?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-19T06:18:03.040

```
window.onload = function(){
    var script,head;
    if(!jQuery){
        script = document.createElement('script');
        document.getElementsByTagName('head')[0].appendChild(script);
        script.onload = function(){
           alert('jQuery loaded');
        }
        script.src = 'path_to_jquery';
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-19T06:19:28.570

Modernizr 使用这条线：

```
<script>window.jQuery || document.write('<script src="./js/libs/jquery-1.6.2.min.js"><\/script>')</script> 
```

但是 document.write 被认为是不安全的。因此，我会将其与已发布的内容联系起来：

```
if(!window.jQuery)
{
    var element1 = document.createElement(“script”);
    element1.src = “somefile.js”;
    element1.type=”text/javascript”;
    document.getElementsByTagName(“head”)[0].appendChild(element1);
} 
```

另一方面，谷歌使用：

```
(function() {
    if(window.jQuery) return;

    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'some.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
})(); 
```

它将脚本附加到网站上已经存在的第一个标签。如果您的站点上至少有一个 <script>，请使用这个。据我所知，它被认为是最好的解决方案。

# python - 为什么不是真 == 真：

> ID：10222516
> 
> 赞同：5
> 
> 时间：2012-04-19T06:07:43.393
> 
> 标签：python

风格指南的最后一点[http://www.python.org/dev/peps/pep-0008](http://www.python.org/dev/peps/pep-0008)

读...

不要使用 == 将布尔值与 True 或 False 进行比较。

为什么？

编辑只是为了弄清楚我在问什么（这表明问题本身），当你写的时候

```
if something:
    print "something is true" 
```

您正在对布尔值进行隐式转换，这可能会或可能不会起作用，具体取决于 true 的含义。恕我直言，不鼓励这种形式的编程，因为它可能导致副作用。

```
numberOfApples = -1
if numberOfApples:
    print "you have apples" # is not what is intended.

if numberOfApples == True:
    print "you have apples" # is also not what is intended.

iHaveApples = numberOfApples > 0
if iHaveApples is True:    # Edit:  corrected this.. the "is" is better than the ==
  print  "you have apples" # is correct. 
```

隐式转换掩盖了逻辑错误。那么为什么风格指南鼓励这样做呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-19T06:11:24.577

这意味着你应该写

```
if greeting: 
```

代替：

```
if greeting == True: 
```

同样，您也不应该这样写：

```
if (greeting == True) == True: 
```

额外的测试是多余的，不会为代码添加任何价值，因此应该删除它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T06:31:30.267

恕我直言，风格指南的重点是以一种有意义的方式标准化一些常见的结构，因此您最终不会得到最终做同样事情的完全不同的陈述。此外，不寻常的形式可能表明程序员有某种理由以不同的方式做事，也许他试图实现与语句看起来不同的东西。

如果要测试语句的真假，只需使用语句本身或在其前面加上`not`. 如果您必须确保该语句的计算结果为`True`or `False`（不仅仅是一个真/假值），您可以使用`statement is True`- 尽管样式指南不鼓励它 - 或者检查它的类型（使用`isinstance`）。但这通常是糟糕的设计，除非你有充分的理由这样做，否则你应该避免这样做。

`statement == True`由于许多原因，使用是危险的：1) 仅使用`True`，使用其他“真实”值（如`[1]`）失败；2) 如果语句返回的值重新定义，可能会产生意想不到的结果`__eq__`；3) 如果参数的顺序发生变化等，可能会产生不同的结果。请注意，如果值实现`__nonzero__`or ，仅使用语句也可能返回不同的真/假值`__len__`，但对于常规使用，这通常不是问题。

一些例子表明如果你偏离了风格，事情会变得多么糟糕：

```
if True: print True # True
if 1: print True    # True
if [1]: print True  # True

True is True # True
1 is True    # False
[1] is True  # False

True == True # True
1 == True    # True
[1] == True  # False 
```

*编辑：*更多：

```
if 1: print True # True
if 2: print True # True

1 == True # True
2 == True # False

1 is True # False
2 is True # False 
```

**更新：**正如@Marcin 指出的那样，您可以使用`bool`将值强制为`True`/ `False`，保证只有这些值会出现。该函数的结果与值的默认真/假一致（因此`__nonzero__`被`__len__`考虑在内）。一些例子：

```
if bool(1): print True # True
bool(1) == True        # True
bool(1) is True        # True

if bool(2): print True # True
bool(2) == True        # True
bool(2) is True        # True

1 or 2              # 1
1 and 2             # 2
bool(1) or bool(2)  # True
bool(1) and bool(2) # True

bool(1) == bool(2)  # True
bool(1) is bool(2)  # True 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T06:11:32.960

因为它是多余的。

```
if hasChildren: 
```

是相同的

```
if hasChildren == True: 
```

但更简洁，更容易阅读。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T06:26:45.370

排序：

```
# A, Good:
if numberOfApples > 0:
    print "you have apples"

# B, Also good:
iHaveApples = numberOfApples > 0
if iHaveApples:
  print  "you have apples"

# C, Bad:
iHaveApples = numberOfApples > 0
if iHaveApples == True:
  print  "you have apples" 
```

为什么你会选择 C ​​而不是 A 或 B？

更新：

我认为您在某些极端情况下大汗淋漓，但如果这些极端情况在您的项目中很重要，请使用适当的比较。一般来说，我们确实对 的类型有所了解`iHaveApples`，例如，我们知道它是使用 比较的结果`>`。我认为在代码中使用该信息是合理且良好的做法。如果您要问，“如果我认为它是一个 bool 并且结果是一个 int 或其他东西怎么办？” 我会说你的代码中有一个错误，你应该找到它，修复它，并编写一个测试，以防你再次犯同样的错误。不要依赖 python 在运行时发现你的错误。

我会断言，并留给你来证明你是否愿意，它的`if iHaveApples:`行为完全相同，但运行得更快，因为`if iHaveApples is True:`你确定这`iHaveApples`是一个布尔值。最后，我将举例说明何时`is`会导致不良行为，至少在我看来。

```
>>> import numpy
>>> totalApples = numpy.sum([1, 2, 3]) == 6
>>> totalApples
True
>>> totalApples is True
False 
```

如果你愿意，我会让你弄清楚为什么这不起作用（提示，检查`type(totalApples)`）。

# css - 为什么在指定背景图像属性时在 CSS 中需要 url()？

> ID：10222518
> 
> 赞同：2
> 
> 时间：2012-04-19T06:08:07.553
> 
> 标签：css

对该决定的一些见解将不胜感激。我很难找到在 CSS 设计中指定这一点的原因。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T06:16:08.927

首先，[*所有*的URL/URI](http://www.w3.org/TR/CSS2/syndata.html#value-def-uri)资源都用`url()`. 其次，您想如何区分标准值（如`none`or`inherit`和 images `none`/ ） `inherit`？

例如，您可以创建一个名为 的图像`none`，正确发送其 MIME 类型，然后使用

```
background-image: none; 
```

现在应该用什么？存储的文件？还是所谓的价值`none`？另一个例子是游标文件。你可以命名你的光标文件`pointer`：

```
cursor: pointer; 
```

为了避免这种歧义，您可以使用`url()`来表示 URI/URL。然后绝对清楚要使用什么，您可以根据需要命名图形/资源：

```
background-image: url(none);
cursor: url(pointer); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T06:10:29.683

我怀疑他们已经预见到除了基于 URL 的图像之外，还需要其他背景图像。`linear-gradient`例如。

此外，由于图像文件不必具有文件扩展名，因此很难将图像文件与`background`速记方法中的其他属性区分开来

# perl - perl 重定向 linux

> ID：10222521
> 
> 赞同：0
> 
> 时间：2012-04-19T06:08:14.777
> 
> 标签：perl

```
sub cdevice{
    $p=$_[0];
    $s=$_[1];
    $q=$_[2];
    try {
        $device_create_cmd ="create type:NSR Device;media type:adv_file;name:$p;device access information:$p";
        system("echo $device_create_cmd > command.txt  ");
    } catch Error with {
        print "Error  " ;
        exit();     
    };
}
cdevice("/device1","raddh054","/device1"); 
```

这个 pl 文件在 Windows 上运行良好，但在 Linux 上却不行，因为 Linux 中的 echo 不接受文本之间的空格！我该如何解决它

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T06:29:12.760

只需打开文件并自己写入即可。为什么要涉及外壳？

```
use strictures;
use autodie qw(:all);

⋮

sub cdevice {
    my ($p, $s, $q) = @_;
    try {
        open my $h, '>', 'command.txt';
        print {$h} "create type:NSR Device;media type:adv_file;name:$p;device access information:$p\n"
    } … 
```

# ios - Objective C 中的 RSA 实现

> ID：10222524
> 
> 赞同：39
> 
> 时间：2012-04-19T06:08:21.323
> 
> 标签：ios, objective-c, iphone, encryption, rsa

我正在使用 Objective-C 开发一个简单的应用程序，它使用`RSA Algorithm`. 我想在服务器/客户端通信上使用它。我在 iOS/iPhone 中的 RSA 算法实现方面需要帮助。

*   我有加密和解密的知识。
*   我想要一个开源库或代码添加到我的项目中。
*   不过我得走了`CommonCryptor.h`。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-19T07:13:52.480

我已经尝试过 NSString 的 RSA 加密和解密。这是代码：

将 Security.Framework 添加到您的项目包中。

**ViewController.h**代码如下：

```
#import <UIKit/UIKit.h>
#import <Security/Security.h>

@interface ViewController : UIViewController
{
SecKeyRef publicKey;
SecKeyRef privateKey;
    NSData *publicTag;
    NSData *privateTag;
}
- (void)encryptWithPublicKey:(uint8_t *)plainBuffer cipherBuffer:(uint8_t *)cipherBuffer;
- (void)decryptWithPrivateKey:(uint8_t *)cipherBuffer plainBuffer:(uint8_t *)plainBuffer;
- (SecKeyRef)getPublicKeyRef;
- (SecKeyRef)getPrivateKeyRef;
- (void)testAsymmetricEncryptionAndDecryption;
- (void)generateKeyPair:(NSUInteger)keySize;
@end 
```

**ViewController.m**文件代码如下：

```
#import "ViewController.h"

const size_t BUFFER_SIZE = 64;
const size_t CIPHER_BUFFER_SIZE = 1024;
const uint32_t PADDING = kSecPaddingNone;
static const UInt8 publicKeyIdentifier[] = "com.apple.sample.publickey";
static const UInt8 privateKeyIdentifier[] = "com.apple.sample.privatekey";

@implementation ViewController

-(SecKeyRef)getPublicKeyRef { 

    OSStatus sanityCheck = noErr; 
    SecKeyRef publicKeyReference = NULL;

    if (publicKeyReference == NULL) { 
        [self generateKeyPair:512];
                NSMutableDictionary *queryPublicKey = [[NSMutableDictionary alloc] init];

        // Set the public key query dictionary.
        [queryPublicKey setObject:(__bridge id)kSecClassKey forKey:(__bridge id)kSecClass];
        [queryPublicKey setObject:publicTag forKey:(__bridge id)kSecAttrApplicationTag];
        [queryPublicKey setObject:(__bridge id)kSecAttrKeyTypeRSA forKey:(__bridge id)kSecAttrKeyType];
        [queryPublicKey setObject:[NSNumber numberWithBool:YES] forKey:(__bridge id)kSecReturnRef];

        // Get the key.
        sanityCheck = SecItemCopyMatching((__bridge CFDictionaryRef)queryPublicKey, (CFTypeRef *)&publicKeyReference);

        if (sanityCheck != noErr)
        {
            publicKeyReference = NULL;
        }

//        [queryPublicKey release];

    } else { publicKeyReference = publicKey; }

    return publicKeyReference; }

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Release any cached data, images, etc that aren't in use.
}

- (void)testAsymmetricEncryptionAndDecryption {

    uint8_t *plainBuffer;
    uint8_t *cipherBuffer;
    uint8_t *decryptedBuffer;

    const char inputString[] = "This is a test demo for RSA Implementation in Objective C";
    int len = strlen(inputString);
    // TODO: this is a hack since i know inputString length will be less than BUFFER_SIZE
    if (len > BUFFER_SIZE) len = BUFFER_SIZE-1;

    plainBuffer = (uint8_t *)calloc(BUFFER_SIZE, sizeof(uint8_t));
    cipherBuffer = (uint8_t *)calloc(CIPHER_BUFFER_SIZE, sizeof(uint8_t));
    decryptedBuffer = (uint8_t *)calloc(BUFFER_SIZE, sizeof(uint8_t));

    strncpy( (char *)plainBuffer, inputString, len);

    NSLog(@"init() plainBuffer: %s", plainBuffer);
    //NSLog(@"init(): sizeof(plainBuffer): %d", sizeof(plainBuffer));
    [self encryptWithPublicKey:(UInt8 *)plainBuffer cipherBuffer:cipherBuffer];
    NSLog(@"encrypted data: %s", cipherBuffer);
    //NSLog(@"init(): sizeof(cipherBuffer): %d", sizeof(cipherBuffer));
    [self decryptWithPrivateKey:cipherBuffer plainBuffer:decryptedBuffer];
    NSLog(@"decrypted data: %s", decryptedBuffer);
    //NSLog(@"init(): sizeof(decryptedBuffer): %d", sizeof(decryptedBuffer));
    NSLog(@"====== /second test =======================================");

    free(plainBuffer);
    free(cipherBuffer);
    free(decryptedBuffer);
}

/* Borrowed from:
 * https://developer.apple.com/library/mac/#documentation/security/conceptual/CertKeyTrustProgGuide/iPhone_Tasks/iPhone_Tasks.html
 */
- (void)encryptWithPublicKey:(uint8_t *)plainBuffer cipherBuffer:(uint8_t *)cipherBuffer
{

    NSLog(@"== encryptWithPublicKey()");

    OSStatus status = noErr;

    NSLog(@"** original plain text 0: %s", plainBuffer);

    size_t plainBufferSize = strlen((char *)plainBuffer);
    size_t cipherBufferSize = CIPHER_BUFFER_SIZE;

    NSLog(@"SecKeyGetBlockSize() public = %lu", SecKeyGetBlockSize([self getPublicKeyRef]));
    //  Error handling
    // Encrypt using the public.
    status = SecKeyEncrypt([self getPublicKeyRef],
                           PADDING,
                           plainBuffer,
                           plainBufferSize,
                           &cipherBuffer[0],
                           &cipherBufferSize
                           );
    NSLog(@"encryption result code: %ld (size: %lu)", status, cipherBufferSize);
    NSLog(@"encrypted text: %s", cipherBuffer);
}

- (void)decryptWithPrivateKey:(uint8_t *)cipherBuffer plainBuffer:(uint8_t *)plainBuffer
{
    OSStatus status = noErr;

    size_t cipherBufferSize = strlen((char *)cipherBuffer);

    NSLog(@"decryptWithPrivateKey: length of buffer: %lu", BUFFER_SIZE);
    NSLog(@"decryptWithPrivateKey: length of input: %lu", cipherBufferSize);

    // DECRYPTION
    size_t plainBufferSize = BUFFER_SIZE;

    //  Error handling
    status = SecKeyDecrypt([self getPrivateKeyRef],
                           PADDING,
                           &cipherBuffer[0],
                           cipherBufferSize,
                           &plainBuffer[0],
                           &plainBufferSize
                           );
    NSLog(@"decryption result code: %ld (size: %lu)", status, plainBufferSize);
    NSLog(@"FINAL decrypted text: %s", plainBuffer);

}

- (SecKeyRef)getPrivateKeyRef {
    OSStatus resultCode = noErr;
    SecKeyRef privateKeyReference = NULL;
//    NSData *privateTag = [NSData dataWithBytes:@"ABCD" length:strlen((const char *)@"ABCD")];
//    if(privateKey == NULL) {
        [self generateKeyPair:512];
        NSMutableDictionary * queryPrivateKey = [[NSMutableDictionary alloc] init];

        // Set the private key query dictionary.
        [queryPrivateKey setObject:(__bridge id)kSecClassKey forKey:(__bridge id)kSecClass];
        [queryPrivateKey setObject:privateTag forKey:(__bridge id)kSecAttrApplicationTag];
        [queryPrivateKey setObject:(__bridge id)kSecAttrKeyTypeRSA forKey:(__bridge id)kSecAttrKeyType];
        [queryPrivateKey setObject:[NSNumber numberWithBool:YES] forKey:(__bridge id)kSecReturnRef];

        // Get the key.
        resultCode = SecItemCopyMatching((__bridge CFDictionaryRef)queryPrivateKey, (CFTypeRef *)&privateKeyReference);
        NSLog(@"getPrivateKey: result code: %ld", resultCode);

        if(resultCode != noErr)
        {
            privateKeyReference = NULL;
        }

//        [queryPrivateKey release];
//    } else {
//        privateKeyReference = privateKey;
//    }

    return privateKeyReference;
}

#pragma mark - View lifecycle

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
    privateTag = [[NSData alloc] initWithBytes:privateKeyIdentifier length:sizeof(privateKeyIdentifier)];
    publicTag = [[NSData alloc] initWithBytes:publicKeyIdentifier length:sizeof(publicKeyIdentifier)];
    [self testAsymmetricEncryptionAndDecryption];

}

- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
}

- (void)viewWillDisappear:(BOOL)animated
{
    [super viewWillDisappear:animated];
}

- (void)viewDidDisappear:(BOOL)animated
{
    [super viewDidDisappear:animated];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
    } else {
        return YES;
    }
}

- (void)generateKeyPair:(NSUInteger)keySize {
    OSStatus sanityCheck = noErr;
    publicKey = NULL;
    privateKey = NULL;

//  LOGGING_FACILITY1( keySize == 512 || keySize == 1024 || keySize == 2048, @"%d is an invalid and unsupported key size.", keySize );

    // First delete current keys.
//  [self deleteAsymmetricKeys];

    // Container dictionaries.
    NSMutableDictionary * privateKeyAttr = [[NSMutableDictionary alloc] init];
    NSMutableDictionary * publicKeyAttr = [[NSMutableDictionary alloc] init];
    NSMutableDictionary * keyPairAttr = [[NSMutableDictionary alloc] init];

    // Set top level dictionary for the keypair.
    [keyPairAttr setObject:(__bridge id)kSecAttrKeyTypeRSA forKey:(__bridge id)kSecAttrKeyType];
    [keyPairAttr setObject:[NSNumber numberWithUnsignedInteger:keySize] forKey:(__bridge id)kSecAttrKeySizeInBits];

    // Set the private key dictionary.
    [privateKeyAttr setObject:[NSNumber numberWithBool:YES] forKey:(__bridge id)kSecAttrIsPermanent];
    [privateKeyAttr setObject:privateTag forKey:(__bridge id)kSecAttrApplicationTag];
    // See SecKey.h to set other flag values.

    // Set the public key dictionary.
    [publicKeyAttr setObject:[NSNumber numberWithBool:YES] forKey:(__bridge id)kSecAttrIsPermanent];
    [publicKeyAttr setObject:publicTag forKey:(__bridge id)kSecAttrApplicationTag];
    // See SecKey.h to set other flag values.

    // Set attributes to top level dictionary.
    [keyPairAttr setObject:privateKeyAttr forKey:(__bridge id)kSecPrivateKeyAttrs];
    [keyPairAttr setObject:publicKeyAttr forKey:(__bridge id)kSecPublicKeyAttrs];

    // SecKeyGeneratePair returns the SecKeyRefs just for educational purposes.
    sanityCheck = SecKeyGeneratePair((__bridge CFDictionaryRef)keyPairAttr, &publicKey, &privateKey);
//  LOGGING_FACILITY( sanityCheck == noErr && publicKey != NULL && privateKey != NULL, @"Something really bad went wrong with generating the key pair." );
    if(sanityCheck == noErr  && publicKey != NULL && privateKey != NULL)
    {
        NSLog(@"Successful");
    }
//  [privateKeyAttr release];
//  [publicKeyAttr release];
//  [keyPairAttr release];
}

@end 
```

这是我最初发布答案的地方：[Iphone - 如何使用公钥加密 NSData 并使用私钥解密？](https://stackoverflow.com/questions/10072124/iphone-how-to-encrypt-nsdata-with-private-key-and-decrypt-with-public-key/10072378#10072378)

如果您需要更多帮助，请告诉我。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-10-07T09:55:49.520

这很酷！但是我认为它不应该是 UIViewController 的子类，而是 NSObject，我更改了它并且它对我有用，这里是：

注意：所有工作都感谢@Parth Bath

RSAManager.h

```
@interface RSAManager : NSObject
{
   SecKeyRef publicKey;
   SecKeyRef privateKey;
   NSData *publicTag;
   NSData *privateTag;
}

- (void)encryptWithPublicKey:(uint8_t *)plainBuffer cipherBuffer:(uint8_t *)cipherBuffer;
- (void)decryptWithPrivateKey:(uint8_t *)cipherBuffer plainBuffer:(uint8_t *)plainBuffer;
- (SecKeyRef)getPublicKeyRef;
- (SecKeyRef)getPrivateKeyRef;
- (void)testAsymmetricEncryptionAndDecryption;
- (void)generateKeyPair:(NSUInteger)keySize;

@end 
```

RSAManager.m

```
#import "RSAManager.h"

const size_t BUFFER_SIZE = 64;
const size_t CIPHER_BUFFER_SIZE = 1024;
const uint32_t PADDING = kSecPaddingNone;
static const UInt8 publicKeyIdentifier[] = "com.apple.sample.publickey";
static const UInt8 privateKeyIdentifier[] = "com.apple.sample.privatekey";

@implementation RSAManager

- (id)init
{
   self = [super init];

   if(self) {

      privateTag = [[NSData alloc] initWithBytes:privateKeyIdentifier length:sizeof(privateKeyIdentifier)];
      publicTag = [[NSData alloc] initWithBytes:publicKeyIdentifier length:sizeof(publicKeyIdentifier)];
      [self testAsymmetricEncryptionAndDecryption];
   }

   return self;
}

-(SecKeyRef)getPublicKeyRef {

   OSStatus sanityCheck = noErr;
   SecKeyRef publicKeyReference = NULL;

   if (publicKeyReference == NULL) {
      [self generateKeyPair:512];
      NSMutableDictionary *queryPublicKey = [[NSMutableDictionary alloc] init];

      // Set the public key query dictionary.
      [queryPublicKey setObject:(__bridge id)kSecClassKey forKey:(__bridge id)kSecClass];
      [queryPublicKey setObject:publicTag forKey:(__bridge id)kSecAttrApplicationTag];
      [queryPublicKey setObject:(__bridge id)kSecAttrKeyTypeRSA forKey:(__bridge id)kSecAttrKeyType];
      [queryPublicKey setObject:[NSNumber numberWithBool:YES] forKey:(__bridge id)kSecReturnRef];

      // Get the key.
      sanityCheck = SecItemCopyMatching((__bridge CFDictionaryRef)queryPublicKey, (CFTypeRef *)&publicKeyReference);

      if (sanityCheck != noErr)
      {
         publicKeyReference = NULL;
      }

      //        [queryPublicKey release];

   } else { publicKeyReference = publicKey; }

   return publicKeyReference;
}

- (void)testAsymmetricEncryptionAndDecryption {

   uint8_t *plainBuffer;
   uint8_t *cipherBuffer;
   uint8_t *decryptedBuffer;

   const char inputString[] = "This is a test demo for RSA Implementation in Objective C";
   int len = strlen(inputString);
   // TODO: this is a hack since i know inputString length will be less than BUFFER_SIZE
   if (len > BUFFER_SIZE) len = BUFFER_SIZE-1;

   plainBuffer = (uint8_t *)calloc(BUFFER_SIZE, sizeof(uint8_t));
   cipherBuffer = (uint8_t *)calloc(CIPHER_BUFFER_SIZE, sizeof(uint8_t));
   decryptedBuffer = (uint8_t *)calloc(BUFFER_SIZE, sizeof(uint8_t));

   strncpy( (char *)plainBuffer, inputString, len);

   NSLog(@"init() plainBuffer: %s", plainBuffer);
   //NSLog(@"init(): sizeof(plainBuffer): %d", sizeof(plainBuffer));
   [self encryptWithPublicKey:(UInt8 *)plainBuffer cipherBuffer:cipherBuffer];
   NSLog(@"encrypted data: %s", cipherBuffer);
   //NSLog(@"init(): sizeof(cipherBuffer): %d", sizeof(cipherBuffer));
   [self decryptWithPrivateKey:cipherBuffer plainBuffer:decryptedBuffer];
   NSLog(@"decrypted data: %s", decryptedBuffer);
   //NSLog(@"init(): sizeof(decryptedBuffer): %d", sizeof(decryptedBuffer));
   NSLog(@"====== /second test =======================================");

   free(plainBuffer);
   free(cipherBuffer);
   free(decryptedBuffer);
}

/* Borrowed from:
 * https://developer.apple.com/library/mac/#documentation/security/conceptual/CertKeyTrustProgGuide/iPhone_Tasks/iPhone_Tasks.html
 */
- (void)encryptWithPublicKey:(uint8_t *)plainBuffer cipherBuffer:(uint8_t *)cipherBuffer
{

   NSLog(@"== encryptWithPublicKey()");

   OSStatus status = noErr;

   NSLog(@"** original plain text 0: %s", plainBuffer);

   size_t plainBufferSize = strlen((char *)plainBuffer);
   size_t cipherBufferSize = CIPHER_BUFFER_SIZE;

   NSLog(@"SecKeyGetBlockSize() public = %lu", SecKeyGetBlockSize([self getPublicKeyRef]));
   //  Error handling
   // Encrypt using the public.
   status = SecKeyEncrypt([self getPublicKeyRef],
                          PADDING,
                          plainBuffer,
                          plainBufferSize,
                          &cipherBuffer[0],
                          &cipherBufferSize
                          );
   NSLog(@"encryption result code: %ld (size: %lu)", status, cipherBufferSize);
   NSLog(@"encrypted text: %s", cipherBuffer);
}

- (void)decryptWithPrivateKey:(uint8_t *)cipherBuffer plainBuffer:(uint8_t *)plainBuffer
{
   OSStatus status = noErr;

   size_t cipherBufferSize = strlen((char *)cipherBuffer);

   NSLog(@"decryptWithPrivateKey: length of buffer: %lu", BUFFER_SIZE);
   NSLog(@"decryptWithPrivateKey: length of input: %lu", cipherBufferSize);

   // DECRYPTION
   size_t plainBufferSize = BUFFER_SIZE;

   //  Error handling
   status = SecKeyDecrypt([self getPrivateKeyRef],
                          PADDING,
                          &cipherBuffer[0],
                          cipherBufferSize,
                          &plainBuffer[0],
                          &plainBufferSize
                          );
   NSLog(@"decryption result code: %ld (size: %lu)", status, plainBufferSize);
   NSLog(@"FINAL decrypted text: %s", plainBuffer);

}

- (SecKeyRef)getPrivateKeyRef {
   OSStatus resultCode = noErr;
   SecKeyRef privateKeyReference = NULL;
   //    NSData *privateTag = [NSData dataWithBytes:@"ABCD" length:strlen((const char *)@"ABCD")];
   //    if(privateKey == NULL) {
   [self generateKeyPair:512];
   NSMutableDictionary * queryPrivateKey = [[NSMutableDictionary alloc] init];

   // Set the private key query dictionary.
   [queryPrivateKey setObject:(__bridge id)kSecClassKey forKey:(__bridge id)kSecClass];
   [queryPrivateKey setObject:privateTag forKey:(__bridge id)kSecAttrApplicationTag];
   [queryPrivateKey setObject:(__bridge id)kSecAttrKeyTypeRSA forKey:(__bridge id)kSecAttrKeyType];
   [queryPrivateKey setObject:[NSNumber numberWithBool:YES] forKey:(__bridge id)kSecReturnRef];

   // Get the key.
   resultCode = SecItemCopyMatching((__bridge CFDictionaryRef)queryPrivateKey, (CFTypeRef *)&privateKeyReference);
   NSLog(@"getPrivateKey: result code: %ld", resultCode);

   if(resultCode != noErr)
   {
      privateKeyReference = NULL;
   }

   //        [queryPrivateKey release];
   //    } else {
   //        privateKeyReference = privateKey;
   //    }

   return privateKeyReference;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
   // Return YES for supported orientations
   if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
      return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
   } else {
      return YES;
   }
}

- (void)generateKeyPair:(NSUInteger)keySize {
   OSStatus sanityCheck = noErr;
   publicKey = NULL;
   privateKey = NULL;

   //  LOGGING_FACILITY1( keySize == 512 || keySize == 1024 || keySize == 2048, @"%d is an invalid and unsupported key size.", keySize );

   // First delete current keys.
   //  [self deleteAsymmetricKeys];

   // Container dictionaries.
   NSMutableDictionary * privateKeyAttr = [[NSMutableDictionary alloc] init];
   NSMutableDictionary * publicKeyAttr = [[NSMutableDictionary alloc] init];
   NSMutableDictionary * keyPairAttr = [[NSMutableDictionary alloc] init];

   // Set top level dictionary for the keypair.
   [keyPairAttr setObject:(__bridge id)kSecAttrKeyTypeRSA forKey:(__bridge id)kSecAttrKeyType];
   [keyPairAttr setObject:[NSNumber numberWithUnsignedInteger:keySize] forKey:(__bridge id)kSecAttrKeySizeInBits];

   // Set the private key dictionary.
   [privateKeyAttr setObject:[NSNumber numberWithBool:YES] forKey:(__bridge id)kSecAttrIsPermanent];
   [privateKeyAttr setObject:privateTag forKey:(__bridge id)kSecAttrApplicationTag];
   // See SecKey.h to set other flag values.

   // Set the public key dictionary.
   [publicKeyAttr setObject:[NSNumber numberWithBool:YES] forKey:(__bridge id)kSecAttrIsPermanent];
   [publicKeyAttr setObject:publicTag forKey:(__bridge id)kSecAttrApplicationTag];
   // See SecKey.h to set other flag values.

   // Set attributes to top level dictionary.
   [keyPairAttr setObject:privateKeyAttr forKey:(__bridge id)kSecPrivateKeyAttrs];
   [keyPairAttr setObject:publicKeyAttr forKey:(__bridge id)kSecPublicKeyAttrs];

   // SecKeyGeneratePair returns the SecKeyRefs just for educational purposes.
   sanityCheck = SecKeyGeneratePair((__bridge CFDictionaryRef)keyPairAttr, &publicKey, &privateKey);
   //  LOGGING_FACILITY( sanityCheck == noErr && publicKey != NULL && privateKey != NULL, @"Something really bad went wrong with generating the key pair." );
   if(sanityCheck == noErr  && publicKey != NULL && privateKey != NULL)
   {
      NSLog(@"Successful");
   }
   //  [privateKeyAttr release];
   //  [publicKeyAttr release];
   //  [keyPairAttr release];
}

@end 
```

# r - 用因子替换范围内的数字

> ID：10222525
> 
> 赞同：6
> 
> 时间：2012-04-19T06:08:22.853
> 
> 标签：r, data-processing, r-factor

给定一个数据框列，它是一系列整数（年龄），我想将整数范围转换为序数变量。

我当前的代码不起作用，我该怎么做？

```
df <- read.table("http://dl.dropbox.com/u/822467/df.csv", header = TRUE, sep = ",")

df[(df >= 0)  & (df <= 14)] <- "Age1"
df[(df >= 15) & (df <= 44)] <- "Age2"
df[(df >= 45) & (df <= 64)] <- "Age3"
df[(df > 64)] <- "Age4"

table(df) 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-19T06:16:23.127

使用`cut`一步完成：

```
dfc <- cut(df$x, breaks=c(0, 15, 45, 56, Inf))
str(dfc)
 Factor w/ 4 levels "(0,15]","(15,45]",..: 3 4 3 2 2 4 2 2 4 4 ... 
```

一旦您对`breaks`正确指定 感到满意，您还可以使用`labels`参数重新标记级别：

```
dfc <- cut(df$x, breaks=c(0, 15, 45, 56, Inf), labels=paste("Age", 1:4, sep=""))
str(dfc)
 Factor w/ 4 levels "Age1","Age2",..: 3 4 3 2 2 4 2 2 4 4 ... 
```

# c++ - 为什么这个 tbb 程序无法编译？

> ID：10222528
> 
> 赞同：0
> 
> 时间：2012-04-19T06:09:20.663
> 
> 标签：c++, multithreading, thread-safety, queue, tbb

我在 centos 目录 /home/is_admin/tbb40_233oss/ 中安装线程构建块（http://threadingbuildingblocks.org/ver.php?fid=174）

这是我的代码：

```
#include "tbb/concurrent_queue.h" 
#include <iostream> 
using namespace std; 
using namespace tbb; 
int main() { 
    concurrent_queue<int> queue; 
    for( int i=0; i<10; ++i ) 
        queue.push(i); 
    for( concurrent_queue<int>::const_iterator i(queue.begin()); 
i!=queue.end(); ++i ) 
        cout << *i << " "; 
    cout << endl; 
    return 0; 
} 
```

我使用以下命令编译代码：

```
g++ test_concurrent_queue.cpp -I/home/is_admin/tbb40_233od/linux_intel64_gcc_cc4.1.2_libc2.5_kernel2.6.18_release -ltbb -o tcq 
```

但它给出了这个错误：

```
class tbb::strict_ppl::concurrent_queue<int, tbb::cache_aligned_allocator<int> > has no member named begin

class tbb::strict_ppl::concurrent_queue<int, tbb::cache_aligned_allocator<int> > has no member named end 
```

我不知道为什么？任何有tbb经验的人可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T06:11:27.153

编辑：

您使用的文档已过时，不再适用于`concurrent_queue`. 我的其余答案仍然有效。

* * *

因为`concurrent_queue`没有`begin`或`end`方法： [http ://threadingbuildingblocks.org/files/documentation/a00134.html](http://threadingbuildingblocks.org/files/documentation/a00134.html)

有一个`unsafe_begin`和一个`unsafe_end`方法，以这种方式命名，因为只有当您的队列没有被多个线程使用时才应该使用它们（也就是说，它们在多线程环境中使用是*不安全的）。*

遍历队列的一般方法是弹出元素直到它为空：

```
int i;
while(queue.try_pop(i)) // as long as you can pop, pop.
    cout << i << " "; 
```

# android - 我们可以同时在多个用户的 Facebook 墙上发帖吗

> ID：10222533
> 
> 赞同：0
> 
> 时间：2012-04-19T06:09:47.687
> 
> 标签：android, facebook, facebook-graph-api, facebook-social-plugins

嗨，我在这个应用程序中使用 facebook sdk 开发一个 android 应用程序我想同时在多个 facebook 朋友墙上发布一些消息我的意思是用户只需选择他的 facebook 朋友并输入他想要发布的消息并点击发送按钮。这可能吗去做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T06:22:48.153

这确实是可能的。

为了做到这一点，您必须要求用户授予您的应用“ [publish_stream](http://developers.facebook.com/docs/authentication/permissions/) ”权限。一旦你有了，你可以代表他发帖。

要实际发布帖子，请使用[Facebook 对象](http://developers.facebook.com/docs/reference/androidsdk/request/)或[AsyncFacebookRunner 对象的](http://developers.facebook.com/docs/reference/androidsdk/ayncrequest/)*请求*方法（后者更可取）。

您还可以使用[批量请求](http://developers.facebook.com/docs/reference/api/batch/)在一个请求中发布所有帖子，我从未在 android 应用程序中尝试过，但由于它基于 http 请求（如整个 api），它应该是可能的，例如，您可以查看这个线程：[Android facebook 图形批处理 api](https://stackoverflow.com/questions/6379092/android-facebook-graph-batch-api)。

唯一的问题是您需要自己为朋友选择创建 UI，因为 sdk 中没有处理此类功能的对话框。

# django - Django mod_wsgi 内存错误

> ID：10222538
> 
> 赞同：7
> 
> 时间：2012-04-19T06:10:42.303
> 
> 标签：django, apache2, python-imaging-library, mod-wsgi, out-of-memory

我的 Django 项目中的 MemoryError 有一个奇怪的问题。

*   Ubuntu 11
*   阿帕奇2
*   Nginx
*   mod_wsgi
*   python2.7

我有一个使用 PIL 调整图像大小的模板标签，并且在我的开发机器上运行良好，但在生产中它会导致 500 错误与大图像（~800px）。模板标签似乎可以正常工作，但前提是原始图像已经非常小。模板标签是[http://djangosnippets.org/snippets/1944/的修改版](http://djangosnippets.org/snippets/1944/)

刚刚尝试为 python2.7 重新编译 mod_wsgi - 同样的错误。

有没有办法分配更多的内存，或者还有其他我不理解的东西？

任何帮助将非常感激！

通过电子邮件发送给我的 Traceback 是：

```
 Traceback (most recent call last):

     File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py", line 111, in get_response
       response = callback(request, *callback_args, **callback_kwargs)

     File "/var/www/rizzyhome.com/www/django/rizzyhome/products/views.py", line 31, in designs
       context_instance=RequestContext(request)

     File "/usr/local/lib/python2.7/dist-packages/django/shortcuts/__init__.py", line 20, in render_to_response
       return HttpResponse(loader.render_to_string(*args, **kwargs), **httpresponse_kwargs)

     File "/usr/local/lib/python2.7/dist-packages/django/template/loader.py", line 188, in render_to_string
       return t.render(context_instance)

     File "/usr/local/lib/python2.7/dist-packages/django/template/base.py", line 123, in render
       return self._render(context)

     File "/usr/local/lib/python2.7/dist-packages/django/template/base.py", line 117, in _render
       return self.nodelist.render(context)

     File "/usr/local/lib/python2.7/dist-packages/django/template/base.py", line 744, in render
       bits.append(self.render_node(node, context))

     File "/usr/local/lib/python2.7/dist-packages/django/template/base.py", line 757, in render_node
       return node.render(context)

     File "/usr/local/lib/python2.7/dist-packages/django/template/loader_tags.py", line 127, in render
       return compiled_parent._render(context)

     File "/usr/local/lib/python2.7/dist-packages/django/template/base.py", line 117, in _render
       return self.nodelist.render(context)

     File "/usr/local/lib/python2.7/dist-packages/django/template/base.py", line 744, in render
       bits.append(self.render_node(node, context))

     File "/usr/local/lib/python2.7/dist-packages/django/template/base.py", line 757, in render_node
       return node.render(context)

     File "/usr/local/lib/python2.7/dist-packages/django/template/loader_tags.py", line 127, in render
       return compiled_parent._render(context)

     File "/usr/local/lib/python2.7/dist-packages/django/template/base.py", line 117, in _render
       return self.nodelist.render(context)

     File "/usr/local/lib/python2.7/dist-packages/django/template/base.py", line 744, in render
       bits.append(self.render_node(node, context))

     File "/usr/local/lib/python2.7/dist-packages/django/template/base.py", line 757, in render_node
       return node.render(context)

     File "/usr/local/lib/python2.7/dist-packages/django/template/loader_tags.py", line 64, in render
       result = block.nodelist.render(context)

     File "/usr/local/lib/python2.7/dist-packages/django/template/base.py", line 744, in render
       bits.append(self.render_node(node, context))

     File "/usr/local/lib/python2.7/dist-packages/django/template/base.py", line 757, in render_node
       return node.render(context)

     File "/usr/local/lib/python2.7/dist-packages/django/template/loader_tags.py", line 64, in render
       result = block.nodelist.render(context)

     File "/usr/local/lib/python2.7/dist-packages/django/template/base.py", line 744, in render
       bits.append(self.render_node(node, context))

     File "/usr/local/lib/python2.7/dist-packages/django/template/base.py", line 757, in render_node
       return node.render(context)

     File "/usr/local/lib/python2.7/dist-packages/django/template/defaulttags.py", line 227, in render
       nodelist.append(node.render(context))

     File "/usr/local/lib/python2.7/dist-packages/django/template/base.py", line 885, in render
       return func(*func_args)

     File "/var/www/rizzyhome.com/www/django/rizzyhome/products/templatetags/yair.py", line 108, in thumbnail
       import Image, ImageOps

     File "/usr/lib/python2.7/dist-packages/PIL/Image.py", line 45, in <module>
       __import__("FixTk")

     File "/usr/lib/python2.7/lib-tk/FixTk.py", line 15, in <module>
       import ctypes

     File "/usr/lib/python2.7/ctypes/__init__.py", line 549, in <module>
       CFUNCTYPE(c_int)(lambda: None)

    MemoryError 
```

编辑：添加代码

```
import os, errno

from django import template
from django.conf import settings

register = template.Library()

def _mkdir_p(path):
    try:
        os.makedirs(path)
    except OSError as exc: # Python >2.5
        if exc.errno == errno.EEXIST:
            pass
        else: raise

@register.simple_tag
def thumbnail(image_url, width, height, THIS_ROOT=settings.MEDIA_ROOT, THIS_URL=settings.MEDIA_URL, img_w=None, img_h=None, method="crop"):
    """
    Given the url to an image, resizes the image using the given width and 
    height on the first time it is requested, and returns the url to the new 
    resized image. If width or height are zero then the original ratio is 
    maintained.
    """

    if not img_w:
        img_w = width

    if not img_h:
        img_w = height

    image_url = unicode(image_url)

    # determine new paths
    resized_image_reduced = os.path.join('_resized_', image_url.replace(THIS_ROOT, ''))

    file_name, file_ext = os.path.basename(resized_image_reduced).split(os.extsep)
    resized_image_absolute_path = os.path.join(
        THIS_ROOT,
        os.path.dirname(resized_image_reduced),
        u'%s__%05d-%05d_%s%s%s' % (file_name, width, height, method, os.extsep, file_ext)
    )
    resized_image_relative_url = os.path.join(
        THIS_URL,
        os.path.dirname(resized_image_reduced),
        u'%s__%05d-%05d_%s%s%s' % (file_name, width, height, method, os.extsep, file_ext)
    )

    # make sure target directory exists
    _mkdir_p(os.path.realpath(os.path.dirname(resized_image_absolute_path)))

    # abort if thumbnail exists, original image doesn't exist, invalid width or 
    # height are given, or PIL not installed, or thumbnail is newer than source image
    if os.path.exists(resized_image_absolute_path):
        if os.path.exists(image_url):
            if os.path.getmtime(resized_image_absolute_path) > os.path.getmtime(image_url):
                return resized_image_relative_url
        else:
            return resized_image_relative_url
    if not image_url:
        return ""

    try:
        width = int(width)
        height = int(height)
    except ValueError:
        return resized_image_relative_url

    if not os.path.exists(image_url) or (width == 0 and height == 0):
        return image_url

    try:
        from PIL import Image, ImageOps
    except ImportError:
        return resized_image_relative_url

    # open image, determine ratio if required and resize/crop/save
    image = Image.open(image_url)
    if width == 0:
        width = image.size[0] * height / image.size[1]
    elif height == 0:
        height = image.size[1] * width / image.size[0]
    if image.mode not in ("L", "RGB"):
        image = image.convert("RGB")

    try:
        if method == 'scale':

            image.thumbnail((width, height), Image.ANTIALIAS)

            new_w, new_h = image.size

            x1 = (img_w-new_w) /2
            y1 = (img_h-new_h)

            new_image = Image.new(image.mode, (img_w, img_h), (255,255,255))
            new_image.paste(image, (x1,y1))

            new_image.save(
                resized_image_absolute_path,
                "JPEG",
                quality=100
            )

        elif method == 'crop':
            image = ImageOps.fit(image, (width, height), Image.ANTIALIAS)
            image.save(
                resized_image_absolute_path,
                "JPEG",
                quality=100
            )

    except Exception, e:
        raise
        return resized_image_relative_url

    return resized_image_relative_url 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T19:35:19.630

非常感谢您的评论和提供帮助。

显然`__init__.py`CTYPE 模块中有一个奇怪的错误。- 或者其他什么，我刚读过它:)

至少对我来说，解决方法是注释掉`__init__.py`文件中的最后一行。似乎最后一行是专门针对 Windows 64 位的，并且弄乱了我的 Ubuntu。

[http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=598727#38](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=598727#38)

# javascript - 如何改变div的宽度？

> ID：10222548
> 
> 赞同：1
> 
> 时间：2012-04-19T06:11:35.683
> 
> 标签：javascript, html, greasemonkey

好的，我正在制作一个greasemonkey 脚本，我正在尝试将facebook 中的右栏缩小到1px，这样我就可以在中间拉伸相关内容，但是我尝试的一切都不起作用！我试过这个，但我没有工作：

```
document.getElementById('rightCol').style.width = '1px'; 
```

这是告诉侧边栏为 244px 的 CSS

```
#rightCol{margin-top:-10000px;float:right;padding-right:0;width:244px;word-wrap:break-word} 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T06:34:28.053

您可以尝试隐藏整列：

```
document.getElementById('rightCol').style.display = "none" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T06:29:55.367

这将起作用。

```
window.addEventListener ("load", function() {
    document.getElementById('rightCol').style.display = 'none';
}, false); 
```

为我工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T06:26:02.490

你为什么不试试jquery。好吧，我在您的代码中没有发现任何错误。但是试试这个。

```
$('#rightCol').attr('style','width: 10px;'); 
```

或者您可以在该特定列上应用类并通过类选择器选择它，例如：

`$('.rightColClass').attr('style','width: 10px;');`// 它将对包含此类的所有元素应用宽度。

# nhibernate - NHibernate vs petapoco 加载机制

> ID：10222550
> 
> 赞同：2
> 
> 时间：2012-04-19T06:11:41.783
> 
> 标签：nhibernate, petapoco

我很难理解 NHibernate 的 petapoco 加载机制。实际上我做了一个测试来比较两者在查询中的行为。

我的班级如下：

`UserTest.cs`具有以下属性：

```
private string name;
private int id;
private int customerId;

public int ID
{
    get { return id; }
    set { id = value; }
}

public string Name
{
    get { return name; }
    set { name = value; }
}

public int? CustomerID
{
    get { return customerId; }
    set
    {
        if (value != customerId)
        {
            customerId = value;
            if (this.ID > 0)
            {
                DoSomeOtherWork();
            }
        }
    }
} 
```

当我`User.Load`在 NHibernate 中执行 a 时，我观察到它`DoSomeOtherWork`从未被调用，而在 PetaPoco 中，当我从加载中执行查询时，`User`例如`Connection.db.Fetch<UserTest>(...)`or `Connection.db.Query<UserTest>(...)`，我可以看到它`DoSomeOtherWork`被调用。

为什么呢？

有没有办法`DoSomeOherWork`在使用 PetaPoco 时避免调用，使其具有与 NHibernate 相同的行为？我`t want to use`没有 PetaPoco.Ignore `as I need to get and set the`CustomerID`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T14:28:37.843

PetaPoco 它是一个微型 ORM（比 Nhibernate 轻得多），并在您获取记录时实现您的 POCO 对象。没有比这更神奇的了，所以答案是：

## 不，你不能避免调用属性的设置器。

# javascript - 表单提交时带有链接的 HTML 弹出窗口

> ID：10222552
> 
> 赞同：1
> 
> 时间：2012-04-19T06:11:47.433
> 
> 标签：javascript, jquery

当提交特定表单时，我试图向客户显示一个精美的 html 弹出窗口/框架（不是 windows 样式）。不知道这样做的最佳方法是什么！

我用下面的代码尝试了一些东西，但这有两个问题。首先，作为弹出窗口出现的框看起来像我不想要的 windows 弹出框（浏览器类型）。我只想要一个简单的方框，我可以在其中添加颜色、图像等。另一个问题是我在这段代码中的链接不起作用。例如。我希望其中一个链接在关闭消息框后将我带到网站上的另一个页面，而另一个链接可以简单地用于关闭该框......或者可能只是 2 个链接，可以将我带到 2 个不同的页面！

```
<form action="do.something" method="post" onsubmit="return action_submitted();">

<script type="text/javascript">

    function action_submitted() {
        HTML = '';
        HTML += '<html><head><title>New Action</title></head>';
        HTML += '<body bgcolor="#f5f5f5" style="margin:0px;">';
        HTML += 'Congrats, your action was successful! <br/>';
        HTML += '<a href="close">Close Message</a><br/>';
        HTML += '<a href="/gothere.do">There</a><br/>';
        HTML += '<script>onload=function(){setTimeout("self.close()",5000);}<'+'/script>';
        HTML += '</body></html>';
        var w = 500;
        var h = 200;
        var l = (screen.availWidth - w) / 2;
        var t = (screen.availHeight - h) / 2;
        actionwin = open('javascript:opener.HTML','actionwin','left='+l+',top='+t+',width='+w+',height='+h+',status=0');

        if (actionwin && !actionwin.closed) actionwin.focus();
                    return true;
                }

</script> 
```

请帮忙 ：）

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T06:42:28.370

尝试使用 jquery 模态对话框：

```
 var modal = "<div id='modal_pop'>" +
            "<div><center ><img id='imgLogo' src='../../Images/abc.PNG' alt='Value Interface'/></center></div>" +
            "<p>This is a fancy modal pop up.</p>" +
            "</div>"; 
```

并调用模态对话框

```
$(modal).dialog({
            modal: true,
            width: 400,
            height: opts.windowHeight,
            closeOnEscape: false,
            draggable: false,
            resizable: false,
            zIndex: 99999,
            bgiframe: true,
            title: Sample!',
            buttons: {
                "OK": function () {
                // your action on OK clikc  
                $(this).dialog('close');
                                      },
                "Cancel": function () {
                    $(this).dialog('close');
                }
            }
        }); 
```

[本网站](http://jqueryui.com/demos/dialog/)上的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T07:36:05.167

我建议您需要在正文底部的 HTML 中创建弹出 div。默认情况下通过 CSS 隐藏弹出窗口，当您想要打开它时，然后通过 javascript 使其可见并传递您想要显示的内容（如果您有动态内容）。

**HTML**

```
<div id="popupWrapper">
    <div id="popup">
        content goes here
    </div>
</div> 
```

**CSS**

```
#popupWrapper { display: none;} 
```

**jQuery**

```
$('#button').live('click', function() {
    $('#popup').text('content goes here');
    $('#popupWrapper').fadeIn();
}); 
```

因为在您的情况下，每次单击按钮时都会创建弹出窗口。这不是一个好方法。

也不要使用任何其他插件，因为使用第三方插件来处理这种简单的东西并不好。它使您的项目更加复杂和缓慢。因为他们为具有多种选择的多种情况而设计，如果您不需要，则意味着值得使用该插件。

# android - 将数据返回给活动、intent.putExtra 或 contentprovider？

> ID：10222553
> 
> 赞同：1
> 
> 时间：2012-04-19T06:11:50.213
> 
> 标签：android

我有一个活动和一个意图服务，我的意图服务从 Web 获取一些数据并需要将其传递回活动。我目前在服务中使用 ResultReceiver 将数据传递回活动。

> **是否适合大型数据集？**
> 
> **Intents 对通过 putExtra 传递的数据有任何限制吗？**
> 
> **我应该如何更新主要活动的 UI（ListView）？**（不会挂在大数据集上吗？
> 
> **我应该改用 contentProvider 吗？**如果是，我将如何在 UI 线程中查询大型数据集（不会导致 ANR）？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T06:22:35.623

*   不，不适合通过 Intent 发送大数据
*   据我记得，一旦我尝试发送超过 1MB 的字节数据，它就无法做到这一点。所以我相信，它确实有数据限制
*   由于您使用的是*ResultReceiver*，因此最好使用它的 **onReceiveResult**来获取结果通知并在您的 UI 中进行任何必要的更新
*   如果您的应用程序不向其他应用程序提供其数据，那么我想它太大惊小怪了

# javascript - 如何使用 RequireJS 构建多个模块，使用一个带有覆盖的物理配置文件

> ID：10222558
> 
> 赞同：4
> 
> 时间：2012-04-19T06:12:05.873
> 
> 标签：javascript, build, requirejs

我已经为此奋斗了一段时间（甚至使用了一些基于 Ant 的解决方法），甚至发布了一个没有答案的问题：[较旧的类似/相关问题](https://stackoverflow.com/questions/8982133/optimize-build-modules-under-parallel-directories-using-the-same-config-file-in)。

Require.js 允许使用相同的配置文件/配置文件构建多个模块。例如：

```
({
    appDir: 'some/path',
    baseUrl: 'some/base/path',
    dir: 'some/other/path',
    optimize: 'none',
    paths: {
        ...
    },

    modules: [
    {
        name: 'someModule',
    },
    {
        name: 'someOtherModule'
    }]
}) 
```

哪个工作得很好。此外，Require.js 提供了一个选项来覆盖特定模块的构建的任何选项：[Require/js 示例构建配置](https://github.com/jrburke/r.js/blob/master/build/example.build.js#L225)，如下所示：

```
({
    appDir: 'some/path',
    baseUrl: 'some/base/path',
    dir: 'some/other/path',
    optimize: 'none',
    paths: {
        ...
    },

    modules: [
    {
        name: 'someModule',
    },
    {
        name: 'someModule',
        override : {
            optimize: 'uglify'
        }
    }]
}) 
```

或者我是这么理解的。目的是在同一个应用程序上使用相同的构建配置文件，但它既非缩小又缩小。**这行不通。**

**编辑** 我得到的错误是（清理，因为它是更大的 Ant 构建的一部分）：

```
Error: ENOENT, no such file or directory 'some/other/path/someModule.js-temp' 
```

非常感谢任何帮助和建议（关于这两个问题）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T04:47:39.187

模块列表：config 不允许名称值重复。我怀疑这是问题的根源。它是一个数组，只是为了允许对可能在其他构建层中排除的构建层进行适当的排序——使用对象哈希是行不通的，因为对象上的键迭代不能保证顺序。

如果您想要构建具有非缩小和缩小格式的图层，我建议通过节点脚本驱动构建，然后手动要求 uglify 并在构建后复制构建文件并缩小该副本。

以下是驱动构建的节点脚本示例： [https ://github.com/jrburke/r.js/blob/master/build/tests/tools/override/override.js](https://github.com/jrburke/r.js/blob/master/build/tests/tools/override/override.js)

那个正在替换使用的 uglify 版本，但您可以使用它并在传递给 requirejs.optimize() 的回调函数中执行文件复制/手动缩小。

# c++ - 我的复制构造函数有什么问题？

> ID：10222562
> 
> 赞同：0
> 
> 时间：2012-04-19T06:12:15.710
> 
> 标签：c++, constructor

我正在为类实现图形结构。简而言之，在尝试编译测试程序时，我对复制构造函数的调用会导致问题：

```
Graph.h：在复制构造函数 `Graph::Graph(Graph&) [with Object = int, Weight = int]' 中：
gtest.cpp:16：从这里实例化
Graph.h:129：错误：`->' 的基本操作数具有非指针类型`Graph'
gtest.cpp:16：从这里实例化
Graph.h:131：错误：`->' 的基本操作数具有非指针类型`Graph'

```

有问题的行在这里：

```
template<typename Object,typename Weight>  //copy constructor 
Graph<Object,Weight>::Graph(Graph<Object,Weight>& G){

  for(int i=0; i<(G.edge).size(); ++i)   //129
    edge[i] = G.edge[i]; 
  for(int j=0; j<(G.vertex).size(); ++j) //131
    vertex[j] = G.vertex[j]; 

  counter = G.counter;  
} 
```

...但这对我来说没有意义，因为我使用的是“。”，而不是“->”。如果我不（或至少我认为我不）处理指针，它为什么还要提到箭头？

作为参考，我到目前为止的图形实现如下（它不完整；请忽略缺失的部分和/ *DONE？* /评论）：

**编辑：在此之前，我将添加调用复制构造函数的 gtest.cpp 文件。所有其他部分工作正常：

```
#include "Graph.h"

int main(){

Graph<int, int> g;

    g.insertVertex(8);
    g.insertVertex(256);
    g.insertVertex(32);
    g.insertVertex(7);
    g.insertEdge((g.vertices())[0], (g.vertices())[1], 457);
    g.insertEdge((g.vertices())[2], (g.vertices())[1], 457);
    g.insertEdge((g.vertices())[1], (g.vertices())[3], 457);

    Graph<int, int> g2 = g;

    g.print();
    }

#ifndef GRAPH_H
#define GRAPH_H

#include <list>
#include <vector>
#include <limits.h>
#include <algorithm>
#include <cmath>
#include <iostream> 

using namespace std;

template<typename Object,typename Weight>
class Graph{
  public:

  class Vertex;

  class Edge{
public:
    Edge(Vertex* v,Vertex* w,Weight setweight){
      start = v;
      end = w;
      v->edge.push_back(this);
      w->inedge.push_back(this);
      weight = setweight;
      explored = false;
    }
    Edge(){
      explored = false;
    }

        Weight weight;
        Vertex* start;
        Vertex* end;
        bool explored;
      };

      class Vertex{
    public:
        Vertex(Object setelement){
          level = 0;
          connectedcomponent = 0;
          element = setelement;
          back = NULL;
          explored = false;
        }
        Vertex(){
          level = 0;
          connectedcomponent = 0;
          back = NULL;
          explored = false;
        }
        Object element;
        vector<Edge*> edge;
        vector<Edge*> inedge;
        double value;
        unsigned int starttime, finishtime;
        unsigned int level;
        unsigned int connectedcomponent;
        float rank;
        Vertex* back;
      int color;
        bool explored;
      };    

      /////////////////////////////////////////////////////////////////////////
  private:

      vector<Edge*> edge;

      vector<Vertex*> vertex;

      unsigned int counter;

  public:
      /////////////////////////////////////////////////////////////////////////
      Graph();

      Graph(Graph& G);

      ~Graph();

      void reset();
      void resetBack();
      void resetValues();
      void resetLevels();
      void resetExplored();
      void resetConnectedComponents();

      vector<Vertex*> incidentVertices(Vertex* v);
      vector<Edge*> incidentEdges(Vertex* v);
      vector<Edge*> outgoingEdges(Vertex* v);
      vector<Vertex*> adjacentVertices(Vertex* v);
      unsigned int indegree(Vertex* v);
      unsigned int outdegree(Vertex* v);
      unsigned int degree(Vertex* v);
      Vertex* startVertex(Edge* e);
      Vertex* endVertex(Edge* e);
      // is there an edge from v to w ?
      bool isAdjacent(Vertex* v,Vertex* w);

      Vertex* insertVertex(Object o);
      void insertEdge(Vertex* v,Vertex* w,Weight t);
      void insertUndirectedEdge(Vertex* v,Vertex* w,Weight t);
      void removeVertex(Vertex* v);
      void removeEdge(Edge* e);

      unsigned int numVertices();
      unsigned int numEdges();
      vector<Vertex*> vertices();
      vector<Edge*> edges();

      void print();
      /////////////////////////////////////////////////////////////////////////

};

/*DONE?*/template<typename Object,typename Weight>
Graph<Object,Weight>::Graph() :edge(0), vertex(0), counter(0) {}

/*DONE?*/template<typename Object,typename Weight>  //copy constructor 
Graph<Object,Weight>::Graph(Graph<Object,Weight>& G){

  for(int i=0; i<(G.edge).size(); ++i)
//    edge[i] = G.edge[i]; 
  for(int j=0; j<(G.vertex).size(); ++j)
  //  vertex[j] = G.vertex[j]; 

  counter = G.counter;  
}

/*DONE?*/template<typename Object,typename Weight> //destrutor 
Graph<Object,Weight>::~Graph(){}  

/*DONE*/template<typename Object,typename Weight> 
void Graph<Object,Weight>::reset(){
  counter = 0;
  resetBack();
  resetValues();
  resetLevels();
  resetExplored();
  resetConnectedComponents();
}

/*DONE*/template<typename Object,typename Weight>
void Graph<Object,Weight>::resetBack(){
  for(unsigned int i=0;i<vertex.size();i++)
      vertex[i]->back = NULL;
}

/*DONE*/template<typename Object,typename Weight>
void Graph<Object,Weight>::resetValues(){
  for(unsigned int i=0;i<vertex.size();i++)
      vertex[i]->value = INT_MAX;
}

/*DONE*/template<typename Object,typename Weight>
void Graph<Object,Weight>::resetLevels(){
  for(unsigned int i=0;i<vertex.size();i++)
      vertex[i]->level = 0;
}

/*DONE*/template<typename Object,typename Weight>
void Graph<Object,Weight>::resetExplored(){
  for(unsigned int i=0;i<vertex.size();i++)
      vertex[i]->explored = false;
}

/*DONE*/template<typename Object,typename Weight>
void Graph<Object,Weight>::resetConnectedComponents(){
  for(unsigned int i=0;i<vertex.size();i++)
      vertex[i]->connectedcomponent = 0;
}

/*DONE?*/template<typename Object,typename Weight>  //concatenate incoming and outgoing edge lists and return vector of total inc. edges 
vector<typename Graph<Object,Weight>::Edge*> Graph<Object,Weight>::incidentEdges(Vertex* v){
    (v->edge).insert((v->edge).end(), (v->inedge).begin(), (v->inedge).end()); 
    return v->edge; 
}

/*DONE?*/template<typename Object,typename Weight> //return vector of outgoing edges
vector<typename Graph<Object,Weight>::Edge*> Graph<Object,Weight>::outgoingEdges(Vertex* v){
    return v->edge; 
}

/*DONE?*/template<typename Object,typename Weight>
vector<typename Graph<Object,Weight>::Vertex*> Graph<Object,Weight>::incidentVertices(Vertex* v){
  vector<Vertex*> result;
  for(int i=0; i<(v->incidentEdges()).size(); ++i){
    if((v->incidentEdges())[i].endVertex() == v) result.push_back((v->incidentEdges())[i].startVertex());
      else result.push_back((v->incidentEdges())[i].endVertex()); //edges incident on vertex could be either direction    
  } 
  return result;
}

/*DONE?*/template<typename Object,typename Weight>
vector<typename Graph<Object,Weight>::Vertex*> Graph<Object,Weight>::adjacentVertices(Vertex* v){
  vector<Vertex*> result;
  for(int i=0; i<(v->incidentEdges()).size(); ++i){
    if((v->incidentEdges())[i].startVertex() == v) result.push_back((v->incidentEdges())[i].endVertex()); } 
  return result;
}

/*DONE?*/template<typename Object,typename Weight>
unsigned int Graph<Object,Weight>::outdegree(Vertex* v){
  return (v->adjacentVertices()).size();    
}

/*DONE?*/template<typename Object,typename Weight>
unsigned int Graph<Object,Weight>::indegree(Vertex* v){
  return ((v->incidentEdges()).size()) - ((v->adjacentVertices()).size()); //I <3 parentheses 
}

/*DONE?*/template<typename Object,typename Weight>
unsigned int Graph<Object,Weight>::degree(Vertex* v){
  return (v->incidentEdges()).size();    
}

/*DONE?*/template<typename Object,typename Weight>
typename Graph<Object,Weight>::Vertex* Graph<Object,Weight>::startVertex(Edge* e){
    return e->start;    
}

/*DONE?*/template<typename Object,typename Weight>
typename Graph<Object,Weight>::Vertex* Graph<Object,Weight>::endVertex(Edge* e){
    return e->end;    
}

// is there an edge from v to w ?
/*DONE?*/template<typename Object,typename Weight>
bool Graph<Object,Weight>::isAdjacent(Vertex* v,Vertex* w){
  if(degree(v) <= degree(w)){ /*look in smaller incidence collection...but must fulfill directional requirements*/ 
    for(int i=0; i<(v->adjacentVertices()).size(); ++i) /*if directed edge is v to w, just check for adjacent vertex w*/ 
      if((v->adjacentVertices())[i] == w) return true; 
        else return false; }

  else{ /* if deg(w) < deg(v), look in w's incidence (not adjacency!) collection instead*/ 
    for(int i=0; i<(w->incidentEdges()).size(); ++i){ 
      if((w->incidentEdges())[i]->endVertex() == w) return true; /*badass-n. a person who keeps track of parentheses
                                  *like these and programs entirely in PuTTY
                                  *synonym: person too stubborn to take 5 minutes 
                                  *and learn Visual Studio*/  
        else return false; } 
  } 
}

/*DONE?*/template<typename Object,typename Weight>
typename Graph<Object,Weight>::Vertex* Graph<Object,Weight>::insertVertex(Object o){
  Vertex* v = new Vertex(o); 
  vertex.push_back(v); /*construct vertex and add it to Graph's vertex vector member*/ 
}

/*DONE?*/template<typename Object,typename Weight>
void Graph<Object,Weight>::insertEdge(Vertex* v,Vertex* w,Weight t){
  Edge* e = new Edge(v, w, t); 
  edge.push_back(e);  
}

/*DONE?*/template<typename Object,typename Weight>
void Graph<Object,Weight>::removeEdge(Edge* e){
  edge.erase(std::find(edge.begin(), edge.end(), e)); /*remove it from overall Graph's edge vector*/  
  ((edge.end()).incidentEdges()).erase(std::find(((edge.end()).incidentEdges()).begin(), ((edge.end()).incidentEdges()).end(), e)); 
    /*...also from end vertex's incidence list...in the least confusing code possible, of course...*/
  ((edge.begin()).incidentEdges()).erase(std::find(((edge.begin()).incidentEdges()).begin(), ((edge.begin()).incidentEdges()).end(), e));
      /*...and, finally, from begin vertex's incidence list*/ 
}

template<typename Object,typename Weight>
void Graph<Object,Weight>::insertUndirectedEdge(Vertex* v,Vertex* w,Weight t){
  Edge* dir1 = new Edge(v,w,t); 
  edge.push_back(dir1); //Hmm...should I push back one or both? This thing messes up the counts!
  Edge* dir2 = newEdge(w,v,t);
  edge.push_back(dir2);  
}

/*DONE?*/template<typename Object,typename Weight>
void Graph<Object,Weight>::removeVertex(Vertex* v){
  vertex.erase(std::find(vertex.begin(), vertex.end(), v)); /*remove it from overall Graph's vertex vector*/ 
  for(int i=0; i<(v->incidentEdges()).size(); ++i){
    if((v->incidentEdges())[i].start == v)
      (v->incidentEdges())[i].start = NULL; 
    else if((v->incidentEdges())[i].end == v)
      (v->incidentEdges())[i].end = NULL; }  
}

/*DONE?*/template<typename Object,typename Weight>
unsigned int Graph<Object,Weight>::numVertices(){
  return vertex.size(); 
}

/*DONE?*/template<typename Object,typename Weight>
unsigned int Graph<Object,Weight>::numEdges(){
  return edge.size(); 
}

/*DONE?*/template<typename Object,typename Weight>
vector<typename Graph<Object,Weight>::Vertex* > Graph<Object,Weight>::vertices(){
  return vertex; 
}

/*DONE?*/template<typename Object,typename Weight>
vector<typename Graph<Object,Weight>::Edge* > Graph<Object,Weight>::edges(){
  return edge; 
}

template<typename Object,typename Weight>
void Graph<Object,Weight>::print(){
  cout << "vertices:" << endl;
  for(unsigned int i=0;i<vertex.size();i++)
      cout << vertex[i]->element << endl;
      cout << "edges:" << endl;
  for(unsigned int i=0;i<edge.size();i++)
      cout << "(" << edge[i]->start->element << "," << edge[i]->end->element << ")" << endl;
}

#endif 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T15:03:19.783

哇。哇。

事实证明，我的目录中有两个同名的“Graph.h”文件。当然，一个是旧的并且有'->'错误。我摆脱了它（我什至不知道它是如何到达那里的），现在一切正常。

谢谢大家的帮助，大家！

PS——有没有人认为通过简单地将“无向边”成员添加到整个数据结构来适应“insertUndirectedEdge”功能会是有利的？实现框架基本上没有那个就给了我们，导师说我们需要使用两条边（uv和vu）在两个顶点u和v之间做一个无向的。也许我遗漏了一些东西，但这似乎就像它会比它的价值更麻烦，特别是考虑到它会使复杂化的计数（顶点上的事件边的数量等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T07:31:09.293

请再次检查问题出现的位置。就像是，

```
template <typename T, typename K>
struct A
{
  T i;
  A(){};
  A(A&);
};

template <typename T, typename K>
A<T,K>::A(A<T,K>& that)
{
  i=that.i;
}

int main()
{
  A<int,int> _a;
  A<int,int> _b(_a);
  return 0;
} 
```

是标准的，并且可以编译。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T10:48:17.140

错误可能在于 gtest.cpp 第 16 行，该行在 Graph.h :129 和 :131 中调用。看看那里。

也许 size() 函数有问题？

# ios - 更改为横向时制作可滚动视图

> ID：10222564
> 
> 赞同：2
> 
> 时间：2012-04-19T06:12:21.050
> 
> 标签：ios, xcode, cocoa-touch, ios5

更改为横向模式时如何使视图可滚动？例如，我有一个纵向模式的应用程序，涉及很多信息。我已经预设了所有的支柱和弹簧，但我仍然需要在底部留出一些空间，所以我正在考虑启用滚动功能，但我该如何实现呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T06:22:58.127

当内容大小大于滚动框时，启用滚动。尝试以下操作：

```
myScroll.contentSize=CGSizeMake(100.0f,200.0f);
myScroll.frame=CGRect(0.0f,0.0f,100.0f,100.0f); 
```

这将使您垂直滚动，因为内容大小的高度大于框架的高度。虽然这会让你水平滚动：

```
myScroll.contentSize=CGSizeMake(100.0f,200.0f);
myScroll.frame=CGRect(0.0f,0.0f,200.0f,200.0f); 
```

不管怎样，当你的屏幕旋转时，你应该按照我解释的来处理你的逻辑。

# c# - 带有 Xpath 的 Xdocument

> ID：10222565
> 
> 赞同：1
> 
> 时间：2012-04-19T06:12:22.177
> 
> 标签：c#, xpath, linq-to-xml

使用`XDocument`with`xpath`解析 XML 哪个性能更好？

例如在 xml 中搜索标签并获取值

```
tags = xmlDoc.Descendants(xmlTag); 
```

或者

```
xml.SelectSingleNode("//root/node") 
```

那么哪一个会更快呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-19T06:17:16.293

XPath 不*解析*XML……它是在任何其他支持它的 XML API 之上使用的*查询语言。*（例如，您可以在`XmlDocument`或上使用 XPath `XDocument`。）

要找出哪个查询会更快*有用*，您应该尝试对您的*实际*数据样本进行*实际的 XPath 和 LINQ to XML 查询。*我希望 XPath 在某些情况下更快，而 LINQ to XML 在其他情况下更快。

 *但是，如果查询执行速度实际上是您代码中的瓶颈，我会感到惊讶 - 您有证据证明它是吗？你应该首先问自己哪个是*最易读*的。实现该代码，然后看看它是否*足够快*。*

# c++ - dllspec(dllimport) 和 dllspec(dllexport) 是什么意思

> ID：10222566
> 
> 赞同：3
> 
> 时间：2012-04-19T06:12:24.873
> 
> 标签：c++, dll, dllimport, dllexport

谷歌搜索后，我知道 Dllimport 使该功能可用于其他模块，

是否必须使用 extern "c" 标识符声明函数？

此外，Dllexport 表示，Dll 本身在编译时使用该函数。所以默认情况下所有

DLL 中存在的函数是 dllexport？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-19T06:24:09.907

`__declspec(dllexport)`导出符号。它使它可以从 DLL 外部使用。

`__declspec(dllimport)`导入一个符号。它实际上说“此符号未在此应用程序中定义，它需要从 DLL 文件中导入”。

您不必使用`extern "C"`. 如果您不使用`extern "C"`，则该符号将导出为 C++ 符号，并且您只能从 C++（以及支持调用 C++ DLL 的语言）调用它。如果使用`extern "C"`，则该符号将导出为 C 符号，您将能够从支持校准 C DLL 的语言中调用它。

如果你想在 C# 中使用你的 DLL，你需要使用`extern "C"`.

这是一个很好的教程，向您展示如何在 C# 中使用 C++ DLL：[如何编组 C++ 类](http://www.codeproject.com/Articles/18032/How-to-Marshal-a-C-Class)。我在工作中的许多项目中都使用了解决方案 A。

此外，这里有一个关于如何在另一个 C++ 应用程序中使用 C++ DLL 的简短教程：[如何在 C++ 中创建和使用 DLL](http://programmingexamples.wikidot.com/blog:1)。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-19T06:24:24.963

否 - dllexport 意味着您从 DLL（或从可执行文件）导出它，以便其他模块（DLL 或可执行文件）可以使用该函数。

dllimport 用于声明在 DLL 中实现的函数（或者，同样，可执行文件）。

因此，在典型情况下，您将拥有以下内容：

```
#ifdef BUILDDLL
#define DLL declspec(dllexport)
#else
#define DLL declspec(dllimport)
#endif 
```

然后每个公共函数的 DLL 将被标记为`DLL`：

```
DLL int dosomething(int); 
```

然后，当您构建 DLL 时，您将定义`BUILDDLL`, 以将所有这些函数标记为 dllexport。否则，您将在需要使用该函数的客户端代码中包含相同的标头。它不会定义`BUILDDLL`，因此它们都将被标记为 dllimport ，因此在链接时间方面，它将创建指向该 DLL 的链接，而不是尝试从标准库之类的某个地方满足这些功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T14:22:46.517

It also means that entries (in the form of static import and export tables) are created (by the linker) in the exe, dll..files, which document the dependencies between a provider and a consumer.

# iphone - 在汽车中使用 iPhone 加速度计

> ID：10222568
> 
> 赞同：14
> 
> 时间：2012-04-19T06:12:32.600
> 
> 标签：iphone, accelerometer

我想使用 iPhone 的加速度计来检测驾驶时的动作。我对加速度计实际测量的内容有点困惑，尤其是在驾驶弯道时。

![驾驶曲线的汽车](../Images/4744d3fbc7347088bbfe2ba96d2aad3d.png)

正如您在图片中看到的，汽车行驶在弯道上会产生两个力。一种是向心力，一种是速度。想象一下 iPhone 放在仪表板上，+y 轴指向前面，+x 轴指向右侧，+z 轴指向顶部。

我现在的问题是当汽车行驶这条曲线时将测量什么加速度。它会在 -x 轴上测量 g 力还是在 +y 轴上出现 g 力？

感谢您的帮助！

**更新！**

对于那些感兴趣的人，正如其中一个答案所暗示的那样，它同时衡量了两者。加速度计受离心力和速度的影响，产生的加速度矢量是这两者的组合。

![在此处输入图像描述](../Images/689bd34ee5c5beb236d93733cf39d967.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T06:34:11.137

我认为它会衡量两者。但不要忘记传感器也会测量重力。因此，当您的汽车不移动时，您仍会获得加速度计读数。关于智能手机传感器的精彩演讲[http://www.youtube.com/watch?v=C7JQ7Rpwn2k&feature=results_main&playnext=1&list=PL29AD66D8C4372129](http://www.youtube.com/watch?v=C7JQ7Rpwn2k&feature=results_main&playnext=1&list=PL29AD66D8C4372129)（它在 android 上，但在 iphone 中使用相同类型的传感器）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T08:53:15.570

加速度计测量施加在其上的合力的加速度（顺便说一下，速度不是力）。在这种情况下，力是`F = g + w + c`重力、离心力（对转向向心力的反作用，指向转弯中心的点）和汽车加速力（改变瞬时速度绝对值的力，沿速度向量的点）的矢量和。提供`Z`加速度计的轴始终沿重力矢量（实际汽车很少见）的值指向`g`，加速度可以分别在和`w`坐标中访问。`c``Z``X``Y`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T08:09:37.087

除非您处于自由落体状态，否则**始终会测量 g 力（重力）。**如果我正确理解您的设置，g 力将出现在 z 轴上，该轴在地球参考系中是垂直的。我不知道它是 +z 还是 -z，这部分是约定俗成的，所以你必须自己检查它。

* * *

**更新：**如果汽车也在上/下坡，那么你必须考虑到**旋转**。换句话说，有两个参照系：iPhone 的参照系和地球的参照系。如果您想处理这种情况，请提出一个新问题。

# ruby-on-rails - Rails Authentication - 自定义设计视图的查询

> ID：10222571
> 
> 赞同：0
> 
> 时间：2012-04-19T06:12:40.390
> 
> 标签：ruby-on-rails, authentication, devise, customization

我是 Devise 的粉丝，并且在我的许多 Ruby on Rails 应用程序中都使用了 Devise。

我通常按​​照下面的 RailCast 来安装和自定义 Devise 。

[http://railscasts.com/episodes/209-introducing-devise](http://railscasts.com/episodes/209-introducing-devise)

[http://railscasts.com/episodes/210-customizing-devise](http://railscasts.com/episodes/210-customizing-devise)

视频告诉我们，如果我们想自定义视图，我们需要运行以下命令 -

```
rails generate devise:views 
```

这会在 apps/views/devise 文件夹中创建与身份验证相关的视图。我们可以自定义外观。

我的问题是 - 我们如何允许登录多个视图？例如 - 我希望允许用户能够通过单击导航栏上的登录按钮从根页面本身登录，该按钮导致一个模式框（覆盖/弹出），允许用户输入他的登录凭据，而不是必须访问 Devise 生成的预定义页面。

你可以看看下面的链接来看看我现在正在做的项目。

[http://squilio.heroku.com/](http://squilio.heroku.com/)。

尝试单击登录按钮。我想在这里有我的登录表格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T07:48:42.463

我从这篇文章中找到了一个优雅的解决方案..

[https://github.com/plataformatec/devise/wiki/How-To:-Display-a-custom-sign_in-form-anywhere-in-your-app](https://github.com/plataformatec/devise/wiki/How-To:-Display-a-custom-sign_in-form-anywhere-in-your-app)

它展示了我们如何通过使用 form_for 并发布到 user_session_path 来实现这一点

```
<%= form_for("user", :url => user_session_path) do |f| %>
  <%= f.text_field :email %>
  <%= f.password_field :password %>
  <%= f.check_box :remember_me %>
  <%= f.label :remember_me %>
  <%= f.submit 'Sign in' %>
  <%= link_to "Forgot your password?", new_password_path('user') %>
<% end %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T06:24:26.997

您看到的 railscast 剧集太旧（2010 年 4 月 12 日），最新的 Devise 版本是 2.0。所以我认为某些功能已被弃用。

对于您的问题：如果您想拥有 2 个不同的页面（例如 1 个是 ajax 的对话框/弹出窗口，另一个是常规 erb 页面），您必须实施 2 个不同的操作，或者至少您必须实施 2 个不同的策略他们。例如

```
# will render app/views/.../regular_login.html.erb
def regular_login
end 

# render a dialog box only.
def dialog_login
  render :layout => false
end 
```

# android - windows-7：无法在设备上运行 android 应用程序

> ID：10222575
> 
> 赞同：0
> 
> 时间：2012-04-19T06:12:49.333
> 
> 标签：android

我正在尝试从其他计算机导入 android 应用程序。一段时间后，他们终于在模拟器上运行但不在设备上。可能原因是我安装的驱动程序，因为 adb devices 没有识别设备所以我手动安装了这个，当我检查设备管理器时仍然没有安装蓝牙外围设备！

起初它给了我这个错误：`the app stopped running unexpectedly !`

现在错误是：

```
Re-installation failed due to different application signatures.
You must perform a full uninstall of the application. WARNING: This will remove the application data!
Please execute 'adb uninstall com.newboston.aida.android2' in a shell.
Launch canceled! 
```

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T13:27:38.263

我只是输入 adb uninstall 然后在命令提示符下输入包的名称，它就可以工作了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T06:15:00.457

从安卓设备或模拟器卸载应用程序，并尝试重新运行/安装应用程序。因为**debug.keystrore**对于每个设备都是不同的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T06:23:00.150

尝试创建一个新的虚拟设备。当您首先安装驱动程序时，它可能会起作用。届时，您的手机可能会被识别。而且我认为win7不是问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T06:33:53.513

如果可能的话，您可以更改当前工作项目的包名称。并尝试构建它。它可能会得到其他路径并且会运行。这是我知道的一种补丁，但请尝试一下....

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-21T06:01:10.920

在将应用程序从一个系统移动到另一个系统时，我遇到了同样的问题……有时问题出在库路径和 api 级别。

因此，您可以在其他系统的应用程序构建路径中检查 api 级别是否相同。

希望这会帮助你。

# javascript - 如何让javascript等待执行外部应用程序结束？

> ID：10222576
> 
> 赞同：1
> 
> 时间：2012-04-19T06:12:55.207
> 
> 标签：javascript, wait, external-process

科尔斯，你好。我的 javascript 运行一个外部 .bat 文件：

```
var objShell = new ActiveXObject("Shell.Application");
        objShell.ShellExecute("start.bat", "Main.bat c:\pr  ext.dat ", "C:\\PR\\", "open", "1"); 
```

Start.bat 文件工作五分钟。之后我的脚本继续执行其他命令。我的问题是«如何询问（让他知道）javascript 等待执行 Start.bat 文件结束？»

naxt 代码在我的情况下不太适合：

```
var date = new Date();
var curDate = null;

do { curDate = new Date(); } 
while(curDate-date < millis); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T08:05:56.903

如果您确定 Main.bat 需要执行的时间，可以使用：

```
WScript.Sleep(50000); 
```

WSH 语言参考： http: [//msdn.microsoft.com/en-us/library/98591fh7 (v=vs.84).aspx](http://msdn.microsoft.com/en-us/library/98591fh7%28v=vs.84%29.aspx)

休眠方式： http: [//msdn.microsoft.com/en-us/library/6t81adfd (v=vs.84).aspx](http://msdn.microsoft.com/en-us/library/6t81adfd%28v=vs.84%29.aspx)

# function - OCaml中的递归函数引用？

> ID：10222584
> 
> 赞同：4
> 
> 时间：2012-04-19T06:13:45.053
> 
> 标签：function, reference, ocaml, sml

今天我们学习了 SML 中的“打结”，你有这样的东西

```
val tempFunc = ref (fn k:int => true);
fun even x = if x = 0 then true else !tempFunc(x-1);
fun odd x = if x = 0 then false else even(x-1);
tempFunc := odd; 
```

我正在使用非常相似的 ocaml，但我只是在做同样的事情时遇到了麻烦。我发现最接近的是

```
let tempFunc {contents =x}=x;; 
```

但我真的不明白，我怎么能把 tempFunc 绑定到另一个函数。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-19T06:27:18.453

您的代码在 OCaml 中的直接翻译是：

```
let tempFunc = ref (fun k -> true)
let even x = if x = 0 then true else !tempFunc (x-1)
let odd x = if x = 0 then false else even (x-1)
let () = tempFunc := odd 
```

执行此操作的惯用方法（在 SML 中也是如此）是使用递归函数：

```
let rec even x = if x = 0 then true  else odd  (x-1)
and     odd  x = if x = 0 then false else even (x-1) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-19T06:28:36.677

等效的 OCaml 代码是

```
let tempFunc = ref (fun (k: int) -> true);;

let even x = if x = 0 then true else !tempFunc (x-1);;

let odd x = if x = 0 then false else even (x-1);;

tempFunc := odd;; 
```

正如您所说，它实际上与 SML 代码相同。

（编辑添加：实际上，Thomas 的代码更漂亮一点！）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T07:56:01.650

还有另一种方法可以在不使用引用的情况下获得相同的东西：

```
let rec even_helper f x = if x = 0 then true else f even_helper (x-1);;
let rec odd_helper f x = if x = 0 then false else f odd_helper (x-1);;
let even = even_helper odd_helper;;
let odd = odd_helper even_helper;; 
```

Note that this code involves unguarded recursive types: the type of a helper is `('a -> int -> bool) -> int -> bool as 'a`, meaning that the first argument to a helper is a function whose first argument is a helper. Such types are accepted by Ocaml, but only if you pass the `-rectypes` option to the compiler.

Using more functions you can do away with the `rec` altogether. This is not a direct answer to your question, but rather a side-track showing how that pattern would look in a purely functional way.

# google-chrome - WebGL 在 Windows 8 Developer Preview 中的 Chrome 下不起作用

> ID：10222589
> 
> 赞同：3
> 
> 时间：2012-04-19T06:13:52.607
> 
> 标签：google-chrome, windows-8, webgl

嗨，我想知道是否有其他人在 Chrome 下的 Windows 8 中运行 WebGL 时遇到问题。

我正在使用 Windows 8 Developer Preview x64 和 Chrome 18。我的视频卡是 Nvidia 250 GTS。如果我尝试运行任何 WebGL 页面，但运行 javaScript 或 NativeClient 都无法加载，认为我的视频卡不支持它。

我有自己的使用 GL2 和 GL3 API 功能的本机 OpenGL 应用程序...... GL 本身不是问题，除非我不明白 Chrome 如何使用 GLES2 功能。是否有任何已知的错误？什么都找不到。

**编辑：**我刚刚安装了“Windows 8 **Consumer** Preview x64”，而 WebGL 仍然无法工作......是否有操作系统的黑名单，有点像一些英特尔显卡被列入黑名单？我的系统使用 Arch Linux 双重启动，并且 WebGL 在那里可以正常工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T15:56:40.310

作为 Windows 8 上的解决方法，只需添加`--disable-gpu-sandbox`（我已经在 18 和 19 版本上检查过）。检查打开 chrome://gpu/

有关更多信息，请参阅[铬问题](http://code.google.com/p/chromium/issues/detail?id=112205)

# javascript - 弹出登录表单上的模型验证

> ID：10222592
> 
> 赞同：-1
> 
> 时间：2012-04-19T06:14:06.177
> 
> 标签：javascript, ruby, ruby-on-rails-3, jquery

我被困在这里需要帮助 Ruby on rails 我有一个用于登录的弹出窗口，当我使用 jquery 单击链接“登录”时它即将出现现在我想验证用户从数据库输入的用户名和密码登录弹出窗口是部分页面标志in.html.erb 任何解决方案。请

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T06:30:18.817

取决于您使用的验证框架。

关键是在服务器响应后保持对话框不关闭。

（不推荐）如果您没有使用任何 javascript 验证框架，则必须将“表单”设置为“远程表单”，然后提交，如果验证失败则显示错误消息。

（我的经验）如果您使用的是javascript验证框架，例如RSV（真正简单的验证），只需定义验证规则，然后实现2个ajax方法：1用于验证表单，另一个是用于处理的回调函数来自远程的响应并将其显示在对话框中。

无论如何，处理对话框的错误消息并不比处理常规页面的错误消息容易和直接。无论如何，我希望你明白我的想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T06:42:32.043

这是我的登录部分，我已经渲染并验证了它。

```
 <div class="clost_holder"> <%= link_to image_tag("/assets/close-new.png"), "javascript:;", :onclick => "close_popup()" %>

</div>

<%= form_for(@user, :as => @user, :url => session_path(@user), :html => {:id => 'sign_in_form', :onsubmit => "return false;"}) do |f| %>
    <div class="login_input_holder mtop20 flt">
      <label>Email</label>

      <p><%= link_to 'dont have an account ?', :controller => 'devise/registrations', :action => 'new' %></p>
      <%= f.email_field :email %>
    </div>
    <div class="login_input_holder mtop10 flt">
      <label>Password</label>
      <%= f.password_field :password %>
    </div>
    <div class="fogot_password "><%= link_to 'forgot password ?', :controller => 'devise/passwords', :action => 'new' %></div>
    <div class="login_btn frt"><input type="submit" value="signin" id='sign_in_btn'></div>

<% end %> 
```

然后验证它。但是您还需要添加 jquery.validate 和 jquery.form 文件。

```
 <script type="text/javascript">

     $("#sign_in_btn").click(function() {

      if (!jQuery("#sign_in_form").valid()) {

          return false;

      }
    else {

        var container = $("#home1_content");

        $("#sign_in_form").submit(function() {

            $(this).unbind('submit').ajaxSubmit({

                success: function(data) {

                    container.html(data);

                     window.location.reload();

                }
            })

        });

    }
});

$(document).ready(function() {
    $("#sign_in_form").validate({
        rules:{
            "user[email]":
            {
                required: true ,
                email: true
            },

            "user[password]":
            {
                required: true
            },
            messages: {
                "user[email]": "This field is required",
                "user[password]": "This field is required"
            }
        }
    });
});

     </script> 
```

# c# - C# Wii Mote 手势识别

> ID：10222594
> 
> 赞同：1
> 
> 时间：2012-04-19T06:14:17.317
> 
> 标签：c#, .net, programming-languages, wiimote, wii

是否有任何可用于 Wii Mote (Wii Remote) 的 C# 手势识别库？

**更新** 找到一个手势识别库。需要测试并查看准确性。 [http://sourceforge.net/projects/wiimotion/](http://sourceforge.net/projects/wiimotion/)

**另一个更新** 发现另一个库 [http://gesturelib.codeplex.com/](http://gesturelib.codeplex.com/)

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T06:20:06.807

你应该看看 Johnny Lee 的网站：

[http://johnnylee.net/projects/wii/](http://johnnylee.net/projects/wii/)

他做了一个非常有名的演示：[Head Tracking for Desktop VR Displays using the WiiRemote](http://www.youtube.com/watch?v=Jd3-eiid-Uw)

[http://channel9.msdn.com/coding4fun/articles/Managed-Library-for-Nintendos-Wiimote](http://channel9.msdn.com/coding4fun/articles/Managed-Library-for-Nintendos-Wiimote)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T06:20:16.050

或者你可以阅读这个[Managed-Library-for-Nintendos-Wiimote](http://channel9.msdn.com/coding4fun/articles/Managed-Library-for-Nintendos-Wiimote)那里你会看到例子

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T06:19:11.040

[这里](http://wiimotelib.codeplex.com/)有一个用于 .NET 的 Wii-Mote 托管库

当前没有文档，因此您可能必须找到一些示例源代码并从中学习。

# wordpress - 当有人在 Wordpress MULTISITE 中注册时，如何编辑管理员收到的通知电子邮件

> ID：10222596
> 
> 赞同：0
> 
> 时间：2012-04-19T06:14:40.943
> 
> 标签：wordpress, email, notifications, mu

我正在开发一个 wordpress MU 网站。我正在使用域映射插件。现在我想修改当有人在网站上注册时管理员收到的通知电子邮件的内容。我在互联网上搜索并在 pluggable.php 中找到了函数在 wp 安装的 wp-includes 文件夹中。但如果我覆盖该功能，邮件内容仍然相同。这是代码：

```
if ( !function_exists('wp_new_user_notification') ) {
function wp_new_user_notification( $user_id, $plaintext_pass = '' ) {
    $user = new WP_User($user_id);

    $user_login = stripslashes($user->user_login);
    $user_email = stripslashes($user->user_email);

    $message  = sprintf(__('New user registration on your blog %s:'), get_option('blogname')) . "\r\n\r\n";
    $message .= sprintf(__('Username: %s'), $user_login) . "\r\n\r\n";
    $message .= sprintf(__('E-mail: %s'), $user_email) . "\r\n";
    $message .= "Testing message" . "\r\n";

    @wp_mail(get_option('admin_email'), sprintf(__('[%s] New User Registration'), get_option('blogname')), $message);

    if ( empty($plaintext_pass) )
        return;

    $message  = __('Hi there,') . "\r\n\r\n";
    $message .= sprintf(__("Welcome to %s! Here's how to log in:"), get_option('blogname')) . "\r\n\r\n";
    $message .= wp_login_url() . "\r\n";
    $message .= sprintf(__('Username: %s'), $user_login) . "\r\n";
    $message .= sprintf(__('Password: %s'), $plaintext_pass) . "\r\n\r\n";
    $message .= sprintf(__('If you have any problems, please contact me at %s.'), get_option('admin_email')) . "\r\n\r\n";
    $message .= __('Adios!');

    wp_mail($user_email, sprintf(__('[%s] Your username and password'), get_option('blogname')), $message);

} 
```

}

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T07:05:46.807

我假设您正试图在您的主题中覆盖此功能`functions.php`。您必须在插件中执行此操作，因为插件将在`pluggable.php`.

[https://wordpress.stackexchange.com/questions/15304/how-to-change-the-default-registration-email-plugin-and-or-non-plugin](https://wordpress.stackexchange.com/questions/15304/how-to-change-the-default-registration-email-plugin-and-or-non-plugin)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T07:02:32.557

尝试钩入 wp_mail 钩子。

在您的钩子函数中，您可以检查内容并尝试更改它。

# java - Java EE 安全性中的主体对象是否为每个请求创建？

> ID：10222598
> 
> 赞同：0
> 
> 时间：2012-04-19T06:14:54.430
> 
> 标签：java, jakarta-ee

当用户尝试访问网络服务器上的受限资源时，系统会提示他/她，例如登录表单。如果他/她通过身份验证，此信息是否保存在会话的 Principal 对象中？我不知道这是否正确，因为您要求获取主体对象的请求对象。或者是在每次用户提出请求时完成检索。有人可以帮我理解这个过程吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T06:35:12.533

据我所知，[servlet 规范](http://download.oracle.com/otn-pub/jcp/servlet-3.0-fr-eval-oth-JSpec/servlet-3_0-final-spec.pdf)没有提及/强制创建、存储或检索 Principal 对象的机制。

换句话说，如何管理 Principal 对象的决定将留给容器提供者

# html - 两个 div 并排，但如果屏幕太小，则强制右 div 保持在左 div 上方

> ID：10222603
> 
> 赞同：0
> 
> 时间：2012-04-19T06:15:35.947
> 
> 标签：html, css, positioning

问题标题几乎概括了它。我想知道是否可以并排放置两个 div，例如：

分区 #1 | 分区 #2

但是如果屏幕太小（例如在移动设备上），我希望发生这种情况：

分区 #2

分区 #1

也就是说，DIV #1 向下滑动而不是 DIV #2

干杯，本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T06:20:55.690

您可以使用 CSS 媒体查询来检查定位中的屏幕尺寸。

例如，普通的 CSS 只会让两个元素都向左浮动，而您的 320px 样式会将它们设为非浮动。

您可以使用 min-width 和 max-width 指令来检查这个

```
<link rel='stylesheet' media='screen and (min-width: 401px) and (max-width: 900px)' href='css/medium.css' /> 
```

更多细节在这里 - [http://css-tricks.com/css-media-queries/](http://css-tricks.com/css-media-queries/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T06:23:44.133

您可能使用浮动让 div 彼此相邻。当屏幕太小时，使用@media-queries 更改此行为。在您的 CSS 文件中：

```
@media only screen and (max-width: 480px) {
    /* when window size is below 480px */
    div {
        float: none;
    }
} 
```

这只是一个示例，如果窗口大小小于 480 像素，它将为您网站上的所有 div 设置 float:none；调整它以实现你想要的:)

# asp.net - srReader.GetValue(1) 使用 vb.net

> ID：10222604
> 
> 赞同：0
> 
> 时间：2012-04-19T06:15:40.283
> 
> 标签：asp.net, .net, vb.net, vb6, vbscript

我对 Vb.net 很陌生。

我们在项目上线时使用 fortify 软件。在那个过程中，我遇到了一些跨站点脚本：持久数据流问题。

任何人都可以知道如何解决以下问题：

```
CType(srReader.GetValue(1), String)

CType(srReader.GetValue(2), String) 
```

当我将上述值加载到某些标签中时，它显示错误；如上所述的错误名称。

伙计们，任何人都知道如何以不同的方式获得这个价值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T07:36:23.610

你能提供更多关于你在哪里使用这种类型转换的上下文吗？我不知道什么是 fortify 软件，但如果它是一个安全分析工具，并且您收到“跨站点脚本”错误，那么问题很可能是您正在以本机状态返回此字符串以呈现为 HTML . 为避免跨站点脚本风险，您应该对这个值进行 html 编码。也就是说，除非已知它是安全的并且打算呈现为 HTMl，在这种情况下，您只需忽略或抑制此错误。

# opencl - 如何确定主机的CPU？

> ID：10222605
> 
> 赞同：0
> 
> 时间：2012-04-19T06:15:45.650
> 
> 标签：opencl

我们有跨设备分配主要任务的多设备系统。每个子任务包括：

1.  入队写缓冲区
2.  入队内核
3.  排队读取缓冲区

所有队列都是异步的，命令队列是有序的。我们分配一个回调到`cl_event`队列*读取缓冲区*，我们确定主要任务是否完成。如果不是，我们再安排一个子任务到队列中。

不幸的是，我们发现让主机的 CPU 保持忙碌并不允许它处理来自其他设备 (GPU) 的回调，并且大多数时候它们不参与工作。这个想法是从我们用来完成主要任务的设备列表中排除主机的 cpu。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T10:59:17.257

您应该研究设备裂变。如果您的平台支持此功能，您将能够创建具有任意 cpu 内核组合的 opencl 设备。[在这里查看详细信息。](http://www.khronos.org/registry/cl/extensions/ext/cl_ext_device_fission.txt)此扩展将允许您为主机应用程序保存一些内核。

我喜欢它允许您创建共享不同级别高速缓存的子设备的方式。您可能对 CL_DEVICE_PARTITION_BY_NAMES_EXT 感兴趣（在页面上搜索“CL_DEVICE_PARTITION_BY NAMES_EXT”）。

# iphone - 如何在iphone中保存带有标签的图像？

> ID：10222611
> 
> 赞同：2
> 
> 时间：2012-04-19T06:16:19.100
> 
> 标签：iphone, objective-c, xcode, image, ipad

我正在开发一个应用程序，用户可以在图像上写一个标签（文本），并且必须将它与标签一起保存在 iphone 本地存储中。

（即）用户可以在图像上提供的位置添加任何文本，并且必须将其保存为带有他在 iphone 本地存储中编写的标签的图像

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T06:18:59.303

您可以将 UILabel 作为子视图添加到 UIImageView 包含 UIImage 然后

```
UIGraphicsBeginImageContextWithOptions(UIImageView.bounds.size, UIImageView.opaque, 0.0);
[UIImageView.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

你得到你想要的 UIImage

或者

自己画就好

```
UIGraphicsBeginImageContext(imageSize);   

......
CGContextDrawImage(.....);
CGContextShowTextAtPoint(.....);
......

UIGraphicsEndImageContext(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T06:20:34.593

我认为您需要将您的 UIImageView 和您的 UILabel 添加为特定 UIView 的子视图（假设我们将此视图称为`customView`），然后使用

[如何以编程方式截取 iPhone 的屏幕截图？](https://stackoverflow.com/questions/3610604/how-to-take-a-screenshot-of-the-iphone-programmatically)

**从修改后的链接中回答以使您更容易理解，如下所示：**

**重要：**添加`QuartzCore Framework`和添加`#import<QuartzCore/QuartzCore.h>`

> ```
> CGSize screenSize = [[UIScreen mainScreen] applicationFrame].size;
> CGColorSpaceRef colorSpaceRef = CGColorSpaceCreateDeviceRGB(); 
> CGContextRef ctx = CGBitmapContextCreate(nil, screenSize.width, screenSize.height, 8, 4*(int)screenSize.width, colorSpaceRef,
> kCGImageAlphaPremultipliedLast);
> CGContextTranslateCTM(ctx, 0.0, screenSize.height);
> CGContextScaleCTM(ctx, 1.0, -1.0);
> 
> [(CALayer*)customView.layer renderInContext:ctx];
> 
> CGImageRef cgImage = CGBitmapContextCreateImage(ctx);
> UIImage *image = [UIImage imageWithCGImage:cgImage];
> CGImageRelease(cgImage);
> CGContextRelease(ctx);  
> [UIImageJPEGRepresentation(image, 1.0) writeToFile:filePath atomically:NO]; 
> ```
> 
> 这里的**filePath**是您的应用程序的 Documents 目录文件路径。

**您可以使用以下方法获取 NSDocuments 目录文件路径：**

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,
 NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *filePath = [documentsDirectory stringByAppendingPathComponent:@"savedImage.png"]; 
```

现在在您希望捕获视图的任何按钮或其他控件上执行此代码。

如果您需要更多帮助，请告诉我。

希望这对您有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T06:20:42.103

您需要捕获整个屏幕的屏幕截图才能在一张图像中同时包含两者。

[此处](http://developer.apple.com/library/ios/#qa/qa1703/_index.html)提供 Apple 文档中的更多信息

# highcharts - 在 highcharts 中计算最小 y 轴值

> ID：10222613
> 
> 赞同：1
> 
> 时间：2012-04-19T06:16:29.653
> 
> 标签：highcharts

如果我创建的柱形图的值 > 0 但彼此之间的值比它们更接近 0，那么生成的图表将具有看起来几乎相同的列。看到这个[jsFiddle](http://jsfiddle.net/quHRk/1/ "jsFiddle")。

但是，如果我将图表类型更改为一条线，则生成的图表会更好，因为 min yAxis 值被计算为非零值，因此图表上的值分布更加明显。

我可以手动设置一个最小 yAxis 值，但我需要它来处理任何数据集，因此需要计算它。我怎样才能为柱形图实现同样的效果？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T06:48:19.013

我发现 Highcharts 在哪里计算折线图的最小值（至少对于线性轴）。它在 getTickPositions() 函数中。特别是这些代码行：

```
// pad the values to get clear of the chart's edges
if (!categories && !usePercentage && !isLinked && defined(min) && defined(max)) {
    length = (max - min) || 1;
    if (!defined(options.min) && !defined(userMin) && minPadding && (dataMin < 0 || !ignoreMinPadding)) {
        min -= length * minPadding;
    }
    if (!defined(options.max) && !defined(userMax)  && maxPadding && (dataMax > 0 || !ignoreMaxPadding)) {
        max += length * maxPadding;
    }
} 
```

所以它计算最小值为

```
length = ([max data value] - [min data value]) || 1
min = [min data value] - length * minPadding 
```

yAxis 上 minPadding 的默认值为 0.05，因此

```
394.5 = 395 - ((405 - 395) * 0.05) 
```

创建刻度位置时对 394.5 进行四舍五入，因此最终结果为 390。

到目前为止我想出的是[这个](http://jsfiddle.net/chrish/aARTH/1/)。（yAxis 上的 minPadding 默认值似乎没有暴露，所以我已经对其进行了硬编码）

```
var data = [400,405,395];

Array.max = function( array ){
    return Math.max.apply( Math, array );
};
Array.min = function( array ){
    return Math.min.apply( Math, array );
};

var min = Array.min(data);
var max = Array.max(data);

var chart = new Highcharts.Chart({
    chart: {
        renderTo: 'container',
        defaultSeriesType: 'column'
    },
    yAxis: {
        min: min - ((max-min) * 0.05)
    },
    series: [{
        data: data
    }]
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T06:26:28.857

尝试设置 yAxis 值，例如：

```
var chart = new Highcharts.Chart({

    chart: {
        renderTo: 'container',
        defaultSeriesType: 'column'
    },

    yAxis: {
       min: 390,
       startOnTick: false
    },

    series: [{
        data: [400,405,395]
    }]
}); 
```

您还可以在 javascript 中将其设置为某种动态值（例如，AVG(400, 405, 395) - 10%），这应该可以提供足够的规模。

更新的 JSFiddle 在[这里](http://jsfiddle.net/quHRk/2/)。​</p>

# c++ - 从不同的变量模板类型构建变量的模板类型

> ID：10222618
> 
> 赞同：3
> 
> 时间：2012-04-19T06:17:35.183
> 
> 标签：c++, templates, design-patterns

如果我有一个类型是模板类的变量，并且我想构建另一个模板类的另一个变量，但使用相同的模板参数，我该怎么办？

虽然下面的例子不起作用，但它希望能给出我想要完成的想法。如果没有非常具体的方法来做到这一点，有没有办法有某种查找表设计模式来做到这一点？我最终可能会使用大约六种不同的模板类型。

```
template<typename T>
class A{
public:
    typedef T Type;
};

template<typename T>
class B{};

int main(void){
    A<int> var1;

    B<var1::Type> var2;
} 
```

如果这是一个重复的问题，我深表歉意，但我之前没有看到这样的问题。

**编辑**

我想要一种在不使用第三方库的情况下与 Visual Studio 2010 和 gcc 一起工作的方法。因此，并非所有 C++ 11 功能都可能受支持。

此外，不使用`typedef A<int>`或不知道`A<int>`此代码只是一个测试用例场景，用于显示我想要的基本功能。我想要一种从类型为模板的变量中获取模板类型的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T06:18:51.813

在 C++11 中，您可以使用`decltype`：

```
B<decltype(var1)::Type> var2; 
```

它应该可以工作。[请参阅此处](http://en.cppreference.com/w/cpp/language/decltype)和[此处](http://en.wikipedia.org/wiki/Decltype)的decltype 。

如果你想在 C++03 中做类似的事情，你可以尝试在模板函数中应用你的功能：

```
template <typename T>
void doSomething(const T& var1) {

  B<typename T::Type> var2;
  // do whatever you wanted to do with var2 here.
  // problem is, you cannot return it.
  std::cout << "Doing something!\n";

}

int main(void){
    A<int> var1;
    doSomething(var1);
} 
```

**编辑：**感谢@MSalters 指出您`auto`在 VS2010 中有关键字，因此可以定义此函数：

```
template <typename T>
B<typename T::Type> makeB(const T&) {
  return B<typename T::Type>();
} 
```

然后像这样使用它：

```
int main(void){
    A<int> var1;
    auto var2 = makeB(var1);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T07:25:35.527

即使使用 VC++ 2010 的预标准化 decltype，我认为您也可以执行以下操作：

```
template<typename T>
struct A {
    typedef T Type;
    Type foo();
};

template<typename T>
struct B {};

int main() {
    A<int> var1;
    B<decltype(var1.foo())> var2;
} 
```

这取决于能够形成一些使用您想要的类型的表达式。

# objective-c - 使用 CGAffineTransform 的奇怪结果

> ID：10222620
> 
> 赞同：1
> 
> 时间：2012-04-19T06:17:52.143
> 
> 标签：objective-c, ios, cocoa-touch, uiviewanimation, cgaffinetransform

我正在尝试使用几个`CGAffineTransforms`和`CGAffineTransformConcats`. 我试图实现的总体目标是让我的图像在向上移动 50 像素的同时旋转 45 度，然后在向下移动时再旋转 45 度。

```
 CGAffineTransform translateUp = CGAffineTransformMakeTranslation(0, -50);
    CGAffineTransform firstSpin = CGAffineTransformMakeRotation(M_PI_4);
    CGAffineTransform translateDown = CGAffineTransformMakeTranslation(0, 50);
    CGAffineTransform secondSpin = CGAffineTransformMakeRotation(M_PI_4);
    CGAffineTransform transform1 =  CGAffineTransformConcat(translateUp, firstSpin);
    CGAffineTransform transform2 =  CGAffineTransformConcat(translateDown, secondSpin);
    CGAffineTransform transformFull =  CGAffineTransformConcat(transform1, transform2);    
    [UIView beginAnimations:@"MoveAndRotate" context:nil];
    [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut]; 
    [UIView setAnimationDuration:0.5];
    mainCharacterImage.transform = transformFull;
    [UIView commitAnimations]; 
```

现在请注意，我对所有与 CG 相关的东西都很陌生，但我不明白为什么这不起作用。

但是我不认为这是一个奇怪的部分，我的问题主要是，谁能向我解释为什么上面的代码导致我的图像不仅向上移动和旋转，而且移动右边大约 100 像素？

任何建议都非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T14:13:20.127

因为`transformFull`是 ((translateUp*firstSpin)*(translateDown*secondSpin)) 的矩阵相乘的结果。您的动画直接从起点到计算此矩阵乘法的结果，这恰好是：

```
0, 1, 0
-1, 0, 0
50 - 25 * sqrt(2), 25 * sqrt(2), 1 
```

这个变换矩阵恰好将项目向右移动了大约 100 个像素。

变换矩阵没有历史。它无法判断是哪些步骤使其达到该值并通过这些步骤。相反，你必须有意识地移动到每一步。尝试分两个阶段制作此动画。移动`mainCharacterImage`到`transform1`。然后移动到一个新的变换，它只是一个 π/2 的旋转。

# django - 通过 node.js 向 Django Web API 发送 HTTP POST 是否有效？

> ID：10222622
> 
> 赞同：2
> 
> 时间：2012-04-19T06:18:05.417
> 
> 标签：django, json, api, node.js

我在 Django 中构建了一个 JSON API。我想从外部服务向 Django 发送实时更新以更新模型。

我真的在寻找有关使用当前/即将到来/活动的框架和工具设计系统的最佳方法的见解。我的想法是使用下面描述的 node.js/Django/Foreman：

1.  现有的 Django JSON API
2.  一个 node.js 应用程序，通过 Foreman 运行，订阅了一些外部频道。
3.  该通道向节点发送 JSON 消息
4.  Node 使用消息并将`HTTP POST`JSON 生成到我的 Django API 中的 URL。
5.  Django API 使用 JSON 消息在 Django 应用程序中更新模型。

*现在*，似乎我应该能够从这个等式中消除 node.js，并拥有一个“离家更近一点”的服务，家是 Django 应用程序，而不必跨越 HTTP。

**问题是**：我现在有一个有效的解决方案吗，有没有更好的做事方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T18:10:16.260

您需要如何订阅其他服务？如果其他服务直接调用您的 URL 之一，只需让 Django 在那里听。

如果其他服务需要您的一方充当服务器（非网络服务器，例如在某个非网络端口上连接到您），您将需要让服务器在那里运行，但同样我不会使用 Node，而是编写一个简单的 Python 服务器（可能使用 asynccore 模块），您可以通过 foreman+manage.py 启动它并且可以直接访问模型，例如不需要将数据编组到 json 中以将其发送到 Django。

如果您通过简单的 tcp 连接连接到其他服务，我仍然会采用上述非节点方法。

PS：不要太在意效率——在开发过度设计的解决方案之前，让您的系统尽可能简单。

# solr - 在solr中查询多值字段

> ID：10222624
> 
> 赞同：3
> 
> 时间：2012-04-19T06:18:20.480
> 
> 标签：solr, full-text-search

我有这样的文件：
`<doc>
<arr name="StartDate">
<date>2012-08-18T17:00:00Z</date>
<date>2012-06-28T17:00:00Z</date>
<date>2013-02-28T17:00:00Z</date>
<date>2012-04-16T17:00:00Z</date>
<date>2012-08-06T17:00:00Z</date>
<date>2012-05-18T17:00:00Z</date>
<date>2012-07-04T17:00:00Z</date>
</arr>
<arr name="EndDate">
<date>2012-09-29T17:00:00Z</date>
<date>2012-06-29T17:00:00Z</date>
<date>2013-04-16T17:00:00Z</date>
<date>2012-05-07T17:00:00Z</date>
<date>2012-08-15T17:00:00Z</date>
<date>2012-06-22T17:00:00Z</date>
<date>2012-08-01T17:00:00Z</date>
</arr>
</doc>`

我有日期范围，想找到一对涵盖该范围的 StartDate 和 EndDate。例如，如果输入范围 (x, y) 为 2012-08-18 < x 和 2012-09-29 > y，则第一对 startDate 和 EndDate (2012-08-18 TO 2012-09-29) 返回 true。

我写了一个这样的查询：
**StartDate:[1995-12-31T23:59:59.999Z TO 2012-08-18T00:00:00.000Z] AND EndDate:[2012-09-29T00:00:00.000Z TO 2099-01 -01T00:00:00.000Z]**
但问题是 SOLR 在上面的 14 个项目集中搜索所有匹配日期，而我只想逐个比较它们（1 与 1，2 与 2 ......）。

请帮助告诉我该怎么做。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T08:15:08.857

我有一个类似的模型，但据我所知，在 Solr 中没有任何方法可以做到这一点。

Solr 有一个“平面”索引，这意味着如果您的基本实体如下所示：

```
dates: [
  (start1, end1),
  (start2, end2),
  (start3, end3)
] 
```

它将被展平为：

```
start_date: [ start1, start2, start3 ]
end_date: [ end1, end2, end3 ] 
```

`start`而且由于每个和对之间没有联系`end`，因此无法对它们进行范围查询。为此，要直接在 Solr 中工作，您可能必须实现一个自定义 Solr 字段类型来维护此连接。

另一种解决方案是拥有一个单独的[Solr 核心](http://wiki.apache.org/solr/CoreAdmin)`id`，其中包含您的主要实体的日期字段和日期字段。这样做的缺点是您不能将日期搜索与对主要实体的其他字段的过滤结合起来。

# iphone - UIPageView UIWebView 预取

> ID：10222628
> 
> 赞同：1
> 
> 时间：2012-04-19T06:18:54.693
> 
> 标签：iphone, ios, uiwebview, uipageviewcontroller

我正在使用 UIPageViewController 制作应用程序。现在我在每个页面中只有一个 UIWebView。现在我`[_webView loadRequest:requestObj];`在 viewWillAppear 里面运行。它工作正常，但是当手势识别器处理翻页事件时发送 http 请求时，页面显示时会有延迟。

我试着在里面写一些代码

```
- (UIViewController *)pageViewController:(UIPageViewController *)pageViewController viewControllerBeforeViewController:(UIViewController *)viewController 
```

但我无法让它工作。

有什么好方法可以在翻转之前为下一页预取 UIWebView 以使页面在翻转时立即显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T19:18:26.240

创建两个 Web 视图，一个显示在您的视图中，一个显示在屏幕外。每当您需要从一个页面移动到另一个页面时，开始将您的新内容加载到屏幕外，`viewWillAppear:`并将屏幕外 web 视图添加到您的视图层次结构中。最后，在上一个视图控制器`viewDidDisappear:`调用`removeFromSuperview`您之前的 Web 视图时。现在，原来的就是您的屏幕外 Web 视图。

请记住，这些 Web 视图应该在所有视图（和视图控制器）之间共享，因此它们应该位于共享位置。

# objective-c - 我可以访问 Core Data 中用于外部二进制存储的文件吗？

> ID：10222632
> 
> 赞同：11
> 
> 时间：2012-04-19T06:19:00.267
> 
> 标签：objective-c, ios, core-data

我正在开发一个媒体数据库应用程序。我有一个带有数据存储的自定义模型，并考虑将其重写为 Core Data。我特别感兴趣的一个用例是电影存储。我将电影文件存储在数据库中，但媒体框架只能从文件（而不是数据）中读取电影。

Core Data 提供了一个方便的功能，称为“外部二进制存储”，其中实体数据不存储在 DB 中，而是存储在外部文件中。这对 Core Data API 用户是透明的。我的问题是，我可以获取外部文件的路径，以便我可以使用 Core Data 存储电影，然后轻松地从其 Core Data 外部文件中加载它吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-21T16:45:53.463

是的，您可以访问存储在外部存储中的文件。这需要一些黑客攻击，并且***可能***与 Apple 的 App Store 不完全符合，但你可以很容易地做到这**一点**。

假设我们有一个 NSManagedObject 子类“Media”，其“data”属性在 Core Data Editor 中设置为“Allows External Storage”：

```
//  Media.h
//  Examples
//
//  Created by Garrett Shearer on 11/21/12.
//  Copyright (c) 2012 Garrett Shearer. All rights reserved.
//

#import <Foundation/Foundation.h>
#import <CoreData/CoreData.h>

@interface CRMMedia : NSManagedObject

@property (nonatomic, retain) NSString * name;
@property (nonatomic, retain) NSData * data;

@end 
```

还有一个方便的花花公子 NSString 类别：

```
//  NSString+Parse.m
//  Examples
//
//  Created by Garrett Shearer on 11/21/12.
//  Copyright (c) 2012 Garrett Shearer. All rights reserved.
//

#import "NSString+Parse.h"

@implementation NSString (Parse)

- (NSString*)returnBetweenString:(NSString *)inString1
                       andString:(NSString *)inString2
{
    NSRange substringRange = [self rangeBetweenString:inString1
                                            andString:inString2];
    logger(@"substringRange: (%d, %d)",substringRange.location,substringRange.length);
    logger(@"string (self): %@",self);
    return [self substringWithRange:substringRange];
}

/*
 Return the range of a substring, searching between a starting and ending delimeters
 Original Source: <http://cocoa.karelia.com/Foundation_Categories/NSString/Return_the_range_of.m>
 (See copyright notice at <http://cocoa.karelia.com>)
 */

/*" Find a string between the two given strings with the default options; the delimeter strings are not included in the result.
 "*/

- (NSRange) rangeBetweenString:(NSString *)inString1 andString:(NSString *)inString2
{
    return [self rangeBetweenString:inString1 andString:inString2 options:0];
}

/*" Find a string between the two given strings with the given options inMask; the delimeter strings are not included in the result.  The inMask parameter is the same as is passed to [NSString rangeOfString:options:range:].
 "*/

- (NSRange) rangeBetweenString:(NSString *)inString1 andString:(NSString *)inString2
                       options:(unsigned)inMask
{
    return [self rangeBetweenString:inString1 andString:inString2
                            options:inMask
                              range:NSMakeRange(0,[self length])];
}

/*" Find a string between the two given strings with the given options inMask and the given substring range inSearchRange; the delimeter strings are not included in the result.  The inMask parameter is the same as is passed to [NSString rangeOfString:options:range:].
 "*/

- (NSRange) rangeBetweenString:(NSString *)inString1 andString:(NSString *)inString2
                       options:(unsigned)inMask range:(NSRange)inSearchRange
{
    NSRange result;
    unsigned int foundLocation = inSearchRange.location;    // if no start string, start here
    NSRange stringEnd = NSMakeRange(NSMaxRange(inSearchRange),0); // if no end string, end here
    NSRange endSearchRange;
    if (nil != inString1)
    {
        // Find the range of the list start
        NSRange stringStart = [self rangeOfString:inString1 options:inMask range:inSearchRange];
        if (NSNotFound == stringStart.location)
        {
            return stringStart; // not found
        }
        foundLocation = NSMaxRange(stringStart);
    }
    endSearchRange = NSMakeRange( foundLocation, NSMaxRange(inSearchRange) - foundLocation );
    if (nil != inString2)
    {
        stringEnd = [self rangeOfString:inString2 options:inMask range:endSearchRange];
        if (NSNotFound == stringEnd.location)
        {
            return stringEnd;   // not found
        }
    }
    result = NSMakeRange( foundLocation, stringEnd.location - foundLocation );
    return result;
}

@end 
```

现在是时候来点魔法了……我们将创建一个 Category 方法来解析来自 [data description] 字符串的文件名。在 Media 子类的实例上操作时，“数据”实际上是“外部存储引用”，而不是 NSData 对象。实际数据的文件名存储在描述字符串中。

```
//  Media+ExternalData.m
//  Examples
//
//  Created by Garrett Shearer on 11/21/12.
//  Copyright (c) 2012 Garrett Shearer. All rights reserved.
//

#import "Media+ExternalData.h"
#import "NSString+Parse.h"

@implementation Media (ExternalData)

- (NSString*)filePathString
{
    // Parse out the filename
    NSString *description = [self.data description];
    NSString *filename = [description returnBetweenString:@"path = " andString:@" ;"];
    // Determine the name of the store
    NSPersistentStoreCoordinator *psc = self.managedObjectContext.persistentStoreCoordinator;
    NSPersistentStore *ps = [psc.persistentStores objectAtIndex:0];
    NSURL *storeURL = [psc URLForPersistentStore:ps];
    NSString *storeNameWithExt = [storeURL lastPathComponent];
    NSString *storeName = [storeNameWithExt stringByDeletingPathExtension];
    // Generate path to the 'external data' directory
    NSString *documentsPath = [[[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory
                                                                       inDomains:NSUserDomainMask] lastObject] path];
    NSString *pathComponentToExternalStorage = [NSString stringWithFormat:@".%@_SUPPORT/_EXTERNAL_DATA",storeName];
    NSString *pathToExternalStorage = [documentsPath stringByAppendingPathComponent:pathComponentToExternalStorage];
    // Generate path to the media file
    NSString *pathToMedia = [pathToExternalStorage stringByAppendingPathComponent:filename];
    logger(@"pathToMedia: %@",pathToMedia);
    return pathToMedia;
}

- (NSURL*)filePathUrl
{
    NSURL *urlToMedia = [NSURL fileURLWithPath:[self filePathString]];
    return urlToMedia;
}

@end 
```

现在你有了文件的 NSString 路径和 NSURL 路径。**喜悦！！！**

需要注意的是，我在使用这种方法加载电影时遇到了问题……但我也想出了一个解决方法。MPMoviePlayer 似乎不会访问此目录中的文件，因此解决方案是将文件临时复制到文档目录并播放。然后在我卸载视图时删除临时副本：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    [self copyTmpFile];
}

- (void)viewDidUnload
{
    logger(@"viewDidUnload");
    [_moviePlayer stop];
    [_moviePlayer.view removeFromSuperview];
    [self cleanupTmpFile];
    [super viewDidUnload];
}

- (NSString*)tmpFilePath
{
    NSString *documentsPath = [[[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory
                                                                       inDomains:NSUserDomainMask] lastObject] path];
    NSString *tmpFilePath = [documentsPath stringByAppendingPathComponent:@"temp_video.m4v"];
    return tmpFilePath;
}

- (void)copyTmpFile
{
    NSString *tmpFilePath = [self tmpFilePath];
    NSFileManager *mgr = [NSFileManager defaultManager];
    NSError *err = nil;
    if([mgr fileExistsAtPath:tmpFilePath])
    {
        [mgr removeItemAtPath:tmpFilePath error:nil];
    }

    [mgr copyItemAtPath:_media.filePathString toPath:tmpFilePath error:&err];
    if(err)
    {
        logger(@"error: %@",err.description);
    }
}

- (void)cleanupTmpFile
{
    NSString *tmpFilePath = [self tmpFilePath];
    NSFileManager *mgr = [NSFileManager defaultManager];
    if([mgr fileExistsAtPath:tmpFilePath])
    {
        [mgr removeItemAtPath:tmpFilePath error:nil];
    }
} 
```

祝你好运！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T13:03:38.447

如果您想直接访问数据（即，不通过CoreData），您最好给每个文件一个UUID 作为名称，并将该名称存储在数据库中，然后自己存储实际文件。

如果你使用 UIManagedDocument，你有几个选择。使用上述技术，您可以将文件存储在数据库旁边，因为 UIManagedDocument 实际上是一个文件包。

或者，您可以从 UIManagedDocument 子类化并覆盖处理读取/写入“额外”文件的方法。这将使您能够访问文件本身。你可以挂在那里做任何你想做的事情，包括获取 CoreData 自动创建的文件的实际 URL。

```
- (id)additionalContentForURL:(NSURL *)absoluteURL error:(NSError **)error
- (BOOL)readAdditionalContentFromURL:(NSURL *)absoluteURL error:(NSError **)error
- (BOOL)writeAdditionalContent:(id)content toURL:(NSURL *)absoluteURL originalContentsURL:(NSURL *)absoluteOriginalContentsURL error:(NSError **)error 
```

# ruby-on-rails - Rails 3 验证不起作用

> ID：10222635
> 
> 赞同：1
> 
> 时间：2012-04-19T06:19:17.080
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我已将我的应用程序从 Rails 2.3.5 迁移到 Rails 3。

我在模型中存在验证，例如

```
validates :name, :presence => {:message => "Please enter the name"} 
```

我收到错误。错误指向我添加验证的行。错误日志如下

```
activemodel (3.2.2) lib/active_model/validations/with.rb:85:in `block in validates_with'
activemodel (3.2.2) lib/active_model/validations/with.rb:83:in `each'
activemodel (3.2.2) lib/active_model/validations/with.rb:83:in `validates_with'
activemodel (3.2.2) lib/active_model/validations/validates.rb:99:in `block in validates'
activemodel (3.2.2) lib/active_model/validations/validates.rb:90:in `each'
activemodel (3.2.2) lib/active_model/validations/validates.rb:90:in `validates'
app/models/business.rb:19:in `<class:Business>'
app/models/business.rb:1:in `<top (required)>' 
```

请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T06:32:43.570

尝试这个：

```
validates_presence_of :name, :message => "Please enter the name" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T06:23:03.840

尝试这个：

```
validates :name, :presence => true, :message => "Please enter the name" 
```

# javascript - 修改 webkitdragdrop.js 使用类而不是 ID

> ID：10222638
> 
> 赞同：5
> 
> 时间：2012-04-19T06:19:31.017
> 
> 标签：javascript, ipad, drag-and-drop

我找到了一个看起来很适合我需要的脚本，但它使用 ID 而不是类来创建 ipad 友好的拖放元素。

我真的需要它来使用类，因为可拖动元素可能有数千个。

[编辑] 我不太擅长 javascript，并且很难理解如何更改脚本以使用类而不是 ID。

我也联系了剧本作者，但没有得到他的回复。

我提供这个赏金，因为我没有对我的原始查询做出任何回应。

请有人可以更改下面的脚本以使其使用类吗？[/编辑]

下面是完整的脚本，[这里是脚本页面](http://www.gotproject.com/blog/post2.html)（API 对我使用类和 id 没有帮助）。

```
// webkitdragdrop.js v1.0, Mon May 15 2010
//
// Copyright (c) 2010 Tommaso Buvoli (http://www.tommasobuvoli.com)
// No Extra Libraries are required, simply download this file, add it to your pages!
//
// To See this library in action, grab an ipad and head over to http://www.gotproject.com
// webkitdragdrop is freely distributable under the terms of an MIT-style license.

//Description
// Because this library was designed to run without requiring any other libraries, several basic helper functions were implemented
// 6 helper functons in this webkit_tools class have been taked directly from Prototype 1.6.1 (http://prototypejs.org/) (c) 2005-2009 Sam Stephenson

var webkit_tools = 
{
    //$ function - simply a more robust getElementById

    $:function(e)
    {
        if(typeof(e) == 'string')
        {
            return document.getElementById(e);
        }
        return e;
    },

    //extend function - copies the values of b into a (Shallow copy)

    extend:function(a,b)
    {
        for (var key in b)
        {
            a[key] = b[key];    
        }   
        return a;
    },

    //empty function - used as defaut for events

    empty:function()
    {

    },

    //remove null values from an array

    compact:function(a)
    {
        var b = []
        var l = a.length;
        for(var i = 0; i < l; i ++)
        {
            if(a[i] !== null)
            {
                b.push(a[i]);
            }
        }
        return b;
    },

    //DESCRIPTION
    //  This function was taken from the internet (http://robertnyman.com/2006/04/24/get-the-rendered-style-of-an-element/) and returns 
    //  the computed style of an element independantly from the browser
    //INPUT
    //  oELM (DOM ELEMENT) element whose style should be extracted
    //  strCssRule element

    getCalculatedStyle:function(oElm, strCssRule)
    {
        var strValue = "";
        if(document.defaultView && document.defaultView.getComputedStyle){
            strValue = document.defaultView.getComputedStyle(oElm, "").getPropertyValue(strCssRule);
        }
        else if(oElm.currentStyle){
            strCssRule = strCssRule.replace(/\-(\w)/g, function (strMatch, p1){
                return p1.toUpperCase();
            });
            strValue = oElm.currentStyle[strCssRule];
        }
        return strValue;
    },

    //bindAsEventListener function - used to bind events

    bindAsEventListener:function(f,object) 
    {
        var __method = f;
        return function(event) {
            __method.call(object, event || window.event);
        };
    },

    //cumulative offset - courtesy of Prototype (http://www.prototypejs.org)

    cumulativeOffset:function(element) 
    {
        var valueT = 0, valueL = 0;
        do {
          valueT += element.offsetTop  || 0;
          valueL += element.offsetLeft || 0;
          if (element.offsetParent == document.body)
            if (element.style.position == 'absolute') break;

          element = element.offsetParent;
        } while (element);

        return {left : valueL, top : valueT};
    },

    //getDimensions - courtesy of Prototype (http://www.prototypejs.org)

    getDimensions: function(element) 
    {
        var display = element.style.display;
        if (display != 'none' && display != null) // Safari bug
          return {width: element.offsetWidth, height: element.offsetHeight};

        var els = element.style;
        var originalVisibility = els.visibility;
        var originalPosition = els.position;
        var originalDisplay = els.display;
        els.visibility = 'hidden';
        if (originalPosition != 'fixed') // Switching fixed to absolute causes issues in Safari
          els.position = 'absolute';
        els.display = 'block';
        var originalWidth = element.clientWidth;
        var originalHeight = element.clientHeight;
        els.display = originalDisplay;
        els.position = originalPosition;
        els.visibility = originalVisibility;
        return {width: originalWidth, height: originalHeight};
    },

    //hasClassName - courtesy of Prototype (http://www.prototypejs.org)

    hasClassName: function(element, className) 
    {
        var elementClassName = element.className;
        return (elementClassName.length > 0 && (elementClassName == className ||
        new RegExp("(^|\\s)" + className + "(\\s|$)").test(elementClassName)));
    },

    //addClassName - courtesy of Prototype (http://www.prototypejs.org)

    addClassName: function(element, className) 
    {
        if (!this.hasClassName(element, className))
            element.className += (element.className ? ' ' : '') + className;
        return element;
    },

    //removeClassName - courtesy of Prototype (http://www.prototypejs.org)

    removeClassName: function(element, className) 
    {
        element.className = this.strip(element.className.replace(new RegExp("(^|\\s+)" + className + "(\\s+|$)"), ' '));
        return element;
    },

    //strip - courtesy of Prototype (http://www.prototypejs.org)

    strip:function(s)
    {
        return s.replace(/^\s+/, '').replace(/\s+$/, '');
    }

}

//Description
// Droppable fire events when a draggable is dropped on them

var webkit_droppables = function()
{
    this.initialize = function()
    {
        this.droppables = [];
        this.droppableRegions = [];
    }

    this.add = function(root, instance_props)
    {
        root = webkit_tools.$(root);
        var default_props = {accept : [], hoverClass : null, onDrop : webkit_tools.empty, onOver : webkit_tools.empty, onOut : webkit_tools.empty};
        default_props = webkit_tools.extend(default_props, instance_props || {});
        this.droppables.push({r : root, p : default_props});        
    }

    this.remove = function(root)
    {
        root = webkit_tools.$(root);
        var d = this.droppables;
        var i = d.length;
        while(i--)
        {
            if(d[i].r == root)
            {
                d[i] = null;
                this.droppables = webkit_tools.compact(d);
                return true;
            }
        }
        return false;
    }

    //calculate position and size of all droppables

    this.prepare = function()
    {
        var d = this.droppables;
        var i = d.length;
        var dR = [];
        var r = null;

        while(i--)
        {
            r = d[i].r;         
            if(r.style.display != 'none')
            {
                dR.push({i : i, size : webkit_tools.getDimensions(r), offset : webkit_tools.cumulativeOffset(r)})           
            }
        }

        this.droppableRegions = dR;
    }

    this.finalize = function(x,y,r,e)
    {
        var indices = this.isOver(x,y);
        var index = this.maxZIndex(indices);
        var over = this.process(index,r);
        if(over)
        {
            this.drop(index, r,e);
        }
        this.process(-1,r);
        return over;    
    }

    this.check = function(x,y,r)
    {
        var indices = this.isOver(x,y);
        var index = this.maxZIndex(indices);
        return this.process(index,r);       
    }

    this.isOver = function(x, y)
    {
        var dR = this.droppableRegions;
        var i = dR.length;
        var active = [];
        var r = 0;
        var maxX = 0;
        var minX = 0;
        var maxY = 0;
        var minY = 0;

        while(i--)
        {
            r = dR[i];

            minY = r.offset.top;
            maxY = minY + r.size.height;

            if((y > minY) && (y < maxY))
            {
                minX = r.offset.left;
                maxX = minX + r.size.width;

                if((x > minX) && (x < maxX))
                {
                    active.push(r.i);
                }           
            }       
        }

        return active;  
    }

    this.maxZIndex = function(indices)
    {
        var d = this.droppables;
        var l = indices.length;
        var index = -1;

        var maxZ = -100000000;
        var curZ = 0;

        while(l--)
        {
            curZ = parseInt(d[indices[l]].r.style.zIndex || 0);
            if(curZ > maxZ)
            {
                maxZ = curZ;
                index = indices[l];     
            }   
        }

        return index;   
    }

    this.process = function(index, draggableRoot)
    {
        //only perform update if a change has occured
        if(this.lastIndex != index)
        {
            //remove previous
            if(this.lastIndex != null)
            {
                var d = this.droppables[this.lastIndex]
                var p = d.p;
                var r = d.r;

                if(p.hoverClass)
                {
                    webkit_tools.removeClassName(r,p.hoverClass);
                }
                p.onOut();
                this.lastIndex = null;
                this.lastOutput = false;
            }

            //add new
            if(index != -1)
            {
                var d = this.droppables[index]
                var p = d.p;
                var r = d.r;

                if(this.hasClassNames(draggableRoot, p.accept))
                {
                    if(p.hoverClass)
                    {
                        webkit_tools.addClassName(r,p.hoverClass);
                    }
                    p.onOver();             
                    this.lastIndex = index;
                    this.lastOutput = true; 
                }
            }   
        }
        return this.lastOutput;
    }

    this.drop = function(index, r, e)
    {
        if(index != -1)
        {
            this.droppables[index].p.onDrop(r,e);
        }
    }

    this.hasClassNames = function(r, names)
    {
        var l = names.length;
        if(l == 0){return true}
        while(l--)
        {
            if(webkit_tools.hasClassName(r,names[l]))
            {
                return true;
            }
        }
        return false;
    }

    this.initialize();
}

webkit_drop = new webkit_droppables();

//Description
//webkit draggable - allows users to drag elements with their hands

var webkit_draggable = function(r, ip)
{
    this.initialize = function(root, instance_props)
    {
        this.root = webkit_tools.$(root);
        var default_props = {scroll : false, revert : false, handle : this.root, zIndex : 1000, onStart : webkit_tools.empty, onEnd : webkit_tools.empty};      

        this.p = webkit_tools.extend(default_props, instance_props || {});
        default_props.handle = webkit_tools.$(default_props.handle);
        this.prepare();
        this.bindEvents();
    }

    this.prepare = function()
    {
        var rs = this.root.style;

        //set position
        if(webkit_tools.getCalculatedStyle(this.root,'position') != 'absolute')
        {
            rs.position = 'relative';
        }

        //set top, right, bottom, left
        rs.top = rs.top || '0px';
        rs.left = rs.left || '0px';
        rs.right = "";
        rs.bottom = "";     

        //set zindex;
        rs.zIndex = rs.zIndex || '0';
    }

    this.bindEvents = function()
    {
        var handle = this.p.handle;

        this.ts = webkit_tools.bindAsEventListener(this.touchStart, this);
        this.tm = webkit_tools.bindAsEventListener(this.touchMove, this);
        this.te = webkit_tools.bindAsEventListener(this.touchEnd, this);        

        handle.addEventListener("touchstart", this.ts, false);
        handle.addEventListener("touchmove", this.tm, false);
        handle.addEventListener("touchend", this.te, false);
    }   

    this.destroy = function()
    {
        var handle = this.p.handle;

        handle.removeEventListener("touchstart", this.ts);
        handle.removeEventListener("touchmove", this.tm);
        handle.removeEventListener("touchend", this.te);    
    }

    this.set = function(key, value)
    {
        this.p[key] = value;
    }

    this.touchStart = function(event)
    {
        //prepare needed variables
        var p = this.p;
        var r = this.root;
        var rs = r.style;
        var t = event.targetTouches[0];     

        //get position of touch
        touchX = t.pageX;
        touchY = t.pageY;

        //set base values for position of root
        rs.top = this.root.style.top || '0px';
        rs.left = this.root.style.left || '0px';
        rs.bottom = null;
        rs.right = null;

        var rootP = webkit_tools.cumulativeOffset(r);
        var cp = this.getPosition();

        //save event properties
        p.rx = cp.x;
        p.ry = cp.y;        
        p.tx = touchX;
        p.ty = touchY;
        p.z = parseInt(this.root.style.zIndex);

        //boost zIndex
        rs.zIndex = p.zIndex;
        webkit_drop.prepare();
        p.onStart();
    }

    this.touchMove = function(event)
    {
        event.preventDefault();
        event.stopPropagation();

        //prepare needed variables
        var p = this.p;
        var r = this.root;
        var rs = r.style;
        var t = event.targetTouches[0];
        if(t == null){return}

        var curX = t.pageX;
        var curY = t.pageY;

        var delX = curX - p.tx;
        var delY = curY - p.ty;

        rs.left = p.rx + delX + 'px';
        rs.top  = p.ry + delY + 'px';

        //scroll window
        if(p.scroll)
        {
            s = this.getScroll(curX, curY);
            if((s[0] != 0) || (s[1] != 0))
            {
                window.scrollTo(window.scrollX + s[0], window.scrollY + s[1]);
            }
        }

        //check droppables
        webkit_drop.check(curX, curY, r);

        //save position for touchEnd
        this.lastCurX = curX;
        this.lastCurY = curY;
    }

    this.touchEnd = function(event)
    {
        var r = this.root;
        var p = this.p;
        var dropped = webkit_drop.finalize(this.lastCurX, this.lastCurY, r, event);

        if(((p.revert) && (!dropped)) || (p.revert === 'always'))
        {
            //revert root
            var rs = r.style;
            rs.top = (p.ry + 'px');
            rs.left = (p.rx + 'px');
        }

        r.style.zIndex = this.p.z;
        this.p.onEnd();
    }

    this.getPosition = function()
    {
        var rs = this.root.style;
        return {x : parseInt(rs.left || 0), y : parseInt(rs.top  || 0)}
    }

    this.getScroll = function(pX, pY)
    {
        //read window variables
        var sX = window.scrollX;
        var sY = window.scrollY;

        var wX = window.innerWidth;
        var wY = window.innerHeight;

        //set contants      
        var scroll_amount = 10; //how many pixels to scroll
        var scroll_sensitivity = 100; //how many pixels from border to start scrolling from.

        var delX = 0;
        var delY = 0;       

        //process vertical y scroll
        if(pY - sY < scroll_sensitivity)
        {
            delY = -scroll_amount;
        }
        else
        if((sY + wY) - pY < scroll_sensitivity)
        {
            delY = scroll_amount;
        }

        //process horizontal x scroll
        if(pX - sX < scroll_sensitivity)
        {
            delX = -scroll_amount;
        }
        else
        if((sX + wX) - pX < scroll_sensitivity)
        {
            delX = scroll_amount;
        }

        return [delX, delY]
    }

    //contructor
    this.initialize(r, ip);
}

//Description
//webkit_click class. manages click events for draggables

var webkit_click = function(r, ip)
{
    this.initialize = function(root, instance_props)
    {
        var default_props = {onClick : webkit_tools.empty};

        this.root = webkit_tools.$(root);
        this.p = webkit_tools.extend(default_props, instance_props || {});
        this.bindEvents();
    }

    this.bindEvents = function()
    {
        var root = this.root;

        //bind events to local scope
        this.ts = webkit_tools.bindAsEventListener(this.touchStart,this);
        this.tm = webkit_tools.bindAsEventListener(this.touchMove,this);
        this.te = webkit_tools.bindAsEventListener(this.touchEnd,this);

        //add Listeners
        root.addEventListener("touchstart", this.ts, false);
        root.addEventListener("touchmove", this.tm, false);
        root.addEventListener("touchend", this.te, false);

        this.bound = true;  
    }   

    this.touchStart = function()
    {
        this.moved = false;
        if(this.bound == false)
        {
            this.root.addEventListener("touchmove", this.tm, false);
            this.bound = true;
        }
    }

    this.touchMove = function()
    {
        this.moved = true;
        this.root.removeEventListener("touchmove", this.tm);
        this.bound = false;
    }

    this.touchEnd = function()
    {
        if(this.moved == false)
        {
            this.p.onClick();
        }
    }

    this.setEvent = function(f)
    {
        if(typeof(f) == 'function')
        {
            this.p.onClick = f;
        }
    }

    this.unbind = function()
    {
        var root = this.root;
        root.removeEventListener("touchstart", this.ts);
        root.removeEventListener("touchmove", this.tm);
        root.removeEventListener("touchend", this.te);
    }

    //call constructor
    this.initialize(r, ip);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T03:18:23.090

如果您的类名是唯一的，则解决方案相当简单。您可以更改`$`函数以通过类名而不是通过 id 获取：

```
var webkit_tools = 
{
    //$ function - simply a more robust getElementById

    $:function(e)
    {
        if(typeof(e) == 'string')
        {
            return document.getElementsByClassName(e)[0];
            // return document.getElementById(e);
        }
        return e;
    },
    ... snipped ... 
```

我已经在我的 iPhone 上验证了上述解决方案的工作（拖放），但同样，如果类名不是唯一的，一些添加的工作将根据脚本的当前实现进行排序。

~~~编辑~~~

在重新阅读您的请求时，您声明实际上不会有唯一的类名，因此需要某种“批量”拖放功能。我已经修改/扩展了框架以支持这一点。您可以在此处找到修改版本的源代码：

[https://gist.github.com/2474416](https://gist.github.com/2474416)

我不得不稍微更改 API。dropabble API 未更改，因此传递类名将简单地添加/删除与传递的类名匹配的整个元素列表。可点击/可拖动的 API 并不是那么容易。为了避免严重的重写，我更新了可拖动/可点击的初始化方法以获取元素引用而不是 id 或类名。

相应地，我添加了一个`bulk_draggable(clazzname, options)`and`bulk_clickable(clazzname, options)`函数，它基本上迭代匹配的元素并调用相应的初始化程序。这些函数返回一个可拖动/可点击的数组（每个匹配元素一个）。

如果“新”API 不清楚，请告诉我。我很快就完成了这项工作，并轻松地测试了快乐的道路，但无法投入大量时间重写整个脚本。

# java - 在 NetBeans GUI 构建器设计的面板上绘图？

> ID：10222640
> 
> 赞同：0
> 
> 时间：2012-04-19T06:19:44.637
> 
> 标签：java, netbeans

我将使用 Netbeans GUI-builder 制作的 GUI 转移到 Eclipse。我想知道 GUI-builder 放入代码中的这条看起来很吓人的消息是否仍然相关：

```
 * This method is called from within the constructor to initialize the form.
 * WARNING: Do NOT modify this code. The content of this method is always
 * regenerated by the Form Editor.
 */
@SuppressWarnings("unchecked")
// <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
private void initComponents() { 
```

我相信“表单编辑器”不能“重新生成”内容，因为代码不再在 NetBeans 中，但我不完全确定“表单编辑器”不是随代码一起带来的东西（比如进口？）。

感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T08:44:15.150

该消息不再相关，因为您现在在新的 ide Eclipse 中，不再是 Netbeans，编辑器折叠...在 netbeans 中用于帮助 ide 检测代码中折叠的区域。但是请注意，由于您可以篡改注释和代码折叠 xml，因此避免篡改 netbeans 生成的代码（除非您确定自己在做什么）以避免 GUI 中出现不可预测的行为非常重要。该文件现在被视为 eclipse 中的常规 java 文件。

希望这有帮助，祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T06:35:09.783

该评论不再相关，因为您不再将该文件与表单编辑器插件一起使用；现在它就像您拥有的任何其他 Java 文件一样。

表单编辑器不随代码一起提供，而是根据您创建的 GUI 为您生成 Java 代码。

该插件可能会生成一个实例初始化块，如下所示：

```
{
    initComponents();
} 
```

它使用实例初始化块，因为这意味着无论调用哪个构造函数，都会执行它，从而保证`initComponents()`会发生这种情况。该评论的另一部分是指插件专门`initComponents()`根据外部数据（可能是 XML 文件）生成方法。如果您手动修改该方法，它将在下次编译时被删除并重新生成。

# python - Django 消息框架 - 消息特定用户

> ID：10222641
> 
> 赞同：2
> 
> 时间：2012-04-19T06:19:46.370
> 
> 标签：python, django

在 Django 1.3 及之前的版本中，您可以使用以下方式向特定用户发送消息：

```
user.message_set.create(message='some message text') 
```

从 Django 1.4 开始，此功能已被删除，以支持消息传递框架。消息传递框架使用以下语法：

```
info(request, 'some message text') 
```

我想知道是否可以像旧方法允许的那样为特定用户排队消息，而不仅仅是为 request.user 中的用户排队？因此，从一个角度来看，我希望能够执行以下操作：

```
susy = User.objects.get(username='susy')

# send a message to susy even though request.user is john
info(susy, 'some message text') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T07:12:10.427

消息的默认存储引擎现在是用户 cookie，这意味着您不能为除当前用户之外的任何人存储消息。要解决这个问题，您可以尝试使用会话后端，获取所需用户的会话并直接在那里写一条消息——只需检查后端本身如何在其源代码中实现它并使用相同的方法。

显然，如果您的会话也是基于 cookie 的，这将不起作用。

如果解决方案需要可靠且不依赖于应用程序配置，您将需要创建自定义的基于 db 的解决方案来处理消息。例如，您可以为`messages`框架实现自己的基于数据库的存储引擎。

# javascript - 使用 Python 从文件中读取 JavaScript 变量

> ID：10222642
> 
> 赞同：3
> 
> 时间：2012-04-19T06:19:48.857
> 
> 标签：javascript, python

我在服务器端使用一些 Python 脚本将 JavaScript 文件编译为一个文件，并将有关这些文件的信息添加到数据库中。为了添加有关脚本的信息，我现在为每个 js 文件提供了 yaml 文件，其中包含一些信息，如下所示：

```
title: Script title
alias: script_alias 
```

如果我可以直接从 JavaScript 中读取这些变量，我想扔掉对我来说看起来多余的 yaml，这些变量可以放在文件的开头，如下所示：

```
var title = "Script title";
var alias = "script_alias"; 
```

是否可以使用 Python 轻松读取这些变量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T06:33:05.980

假设您只想要这两行，并且它们位于文件的顶部...

```
import re

js = open("yourfile.js", "r").readlines()[:2]

matcher_rex = re.compile(r'^var\s+(?P<varname>\w+)\s+=\s+"(?P<varvalue>[\w\s]+)";?$')
for line in js:
    matches = matcher_rex.match(line)
    if matches:
        name, value = matches.groups()
        print name, value 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T06:32:06.433

您是否尝试过以 JSON 格式存储变量？然后，javascript和python都可以轻松解析数据并获取变量。

# android - 无法构建 libmupdf.so

> ID：10222649
> 
> 赞同：1
> 
> 时间：2012-04-19T06:20:15.073
> 
> 标签：android, cygwin, mupdf, pdf-viewer

几周以来，我一直在尝试使用 Mupdf 运气，但无法构建 .so 文件。我现在只是在 cygwin 上尝试“Make”，我之前没有尝试过，浪费了我的时间。

为了构建 Mupdf 的 so 文件，我正在做的是，在导入所有需要的主要文件后，在 cygwin 终端上编写一个简单的命令，cmd 是：make -f Makefile。

现在我的所有文件都在一个一个地构建和链接，除了两个文件。我得到的错误是：

LINK build/debug/mupdf build/debug/x11_main.o：在函数`winopen': /cygdrive/d/Users/MOBDEV3/workspace1/Latest_Mupdf/jni/apps/x11_main.c:127: undefined reference to`_XOpenDisplay'/cygdrive/d/Users/MOBDEV3/workspace1/Latest_Mupdf/jni/apps/x11_main.c:131：未定义引用`_XInternAtom' /cygdrive/d/Users/MOBDEV3/workspace1/Latest_Mupdf/jni/apps/x11_main.c:132: undefined reference to`_XInternAtom'/cygdrive/d /Users/MOBDEV3/workspace1/Latest_Mupdf/jni/apps/x11_main.c:133：未定义引用`_XInternAtom' /cygdrive/d/Users/MOBDEV3/workspace1/Latest_Mupdf/jni/apps/x11_main.c:134: undefined reference to`_XInternAtom' /cygdrive/d/Users/MOBDEV3/workspace1/Latest_Mupdf/jni/apps/x11_main.c:135：未定义引用`_XInternAtom' build/debug/x11_main.o:/cygdrive/d/Users/MOBDEV3/workspace1/Latest_Mupdf/jni/apps/x11_main.c:136: more undefined references to`_XInternAtom' 遵循 build/debug/x11_main.o：在函数`winopen': /cygdrive/d/Users/MOBDEV3/workspace1/Latest_Mupdf/jni/apps/x11_main.c:142: undefined reference to`_XCreateFontCursor'/cygdrive/d/Users/MOBDEV3/workspace1/Latest_Mupdf/jni/apps/x11_main.c:143：未定义引用`_XCreateFontCursor' /cygdrive/d/Users/MOBDEV3/workspace1/Latest_Mupdf/jni/apps/x11_main.c:144: undefined reference to`_XCreateFontCursor'/cygdrive/d/Users/ MOBDEV3/workspace1/Latest_Mupdf/jni/apps/x11_main.c:154：未定义的参考`_XAllocColor' /cygdrive/d/Users/MOBDEV3/workspace1/Latest_Mupdf/jni/apps/x11_main.c:155: undefined reference to`_XAllocColor'/cygdrive/d/Users/MOBDEV3/workspace1/Latest_Mupdf/jni/apps/x11_main.c:157：未定义引用`_XCreateWindow' /cygdrive/d/Users/MOBDEV3/workspace1/Latest_Mupdf/jni/apps/x11_main.c:167: undefined reference to`_XSetWindowColormap'/cygdrive/d/Users/MOBDEV3/workspace1/Latest_Mupdf/jni/apps/x11_main.c :168: 未定义引用`_XSelectInput' /cygdrive/d/Users/MOBDEV3/workspace1/Latest_Mupdf/jni/apps/x11_main.c:174: undefined reference to`_XCreateGC' /cygdrive/d/Users/MOBDEV3/workspace1/Latest_Mupdf/jni/apps/x11_main.c:176: 未定义引用`_XDefineCursor' /cygdrive/d/Users/MOBDEV3/workspace1/Latest_Mupdf/jni/apps/x11_main.c:178: undefined reference to`_XAllocWMHints' /cygdrive/d/Users/MOBDEV3/workspace1/Latest_Mupdf/jni /apps/x11_main.c:182：未定义引用`_XCreateBitmapFromData' /cygdrive/d/Users/MOBDEV3/workspace1/Latest_Mupdf/jni/apps/x11_main.c:186: undefined reference to`_XCreateBitmapFromData' /cygdrive/d/Users/MOBDEV3/workspace1/Latest_Mupdf/jni/apps/x11_main.c:194：未定义引用`_XSetWMHints' /cygdrive/d/Users/MOBDEV3/workspace1/Latest_Mupdf/jni/apps/x11_main.c:196: undefined reference to`_XFree' /cygdrive/d/Users/MOBDEV3 /workspace1/Latest_Mupdf/jni/apps/x11_main.c:199：未定义的引用`_XAllocClassHint' /cygdrive/d/Users/MOBDEV3/workspace1/Latest_Mupdf/jni/apps/x11_main.c:204: undefined reference to`_XSetClassHint'/cygdrive/d/Users/MOBDEV3/workspace1/Latest_Mupdf/jni/apps/x11_main.c:205：未定义引用`_XFree' /cygdrive/d/Users/MOBDEV3/workspace1/Latest_Mupdf/jni/apps/x11_main.c:208: undefined reference to`_XSetWMProtocols' build/debug/x11_main.o：在函数`wincursor': /cygdrive/d/Users/MOBDEV3/workspace1/Latest_Mupdf/jni/apps/x11_main.c:227: undefined reference to`_XDefineCursor'/cygdrive/d/Users/MOBDEV3 /workspace1/Latest_Mupdf/jni/apps/x11_main.c:229：未定义引用`_XDefineCursor' /cygdrive/d/Users/MOBDEV3/workspace1/Latest_Mupdf/jni/apps/x11_main.c:231: undefined reference to`_XDefineCursor' /cygdrive/d/Users/MOBDEV3/workspace1/Latest_Mupdf/jni/apps/x11_main.c:232：未定义引用`_XFlush' build/debug/x11_main.o: In function`wintitle'：/ cygdrive/d/Users/MOBDEV3/workspace1/Latest_Mupdf/jni/apps/x11_main.c:237：未定义对`_XStoreName' /cygdrive/d/Users/MOBDEV3/workspace1/Latest_Mupdf/jni/apps/x11_main.c:239: undefined reference to`_Xutf8SetWMProperties' build/debug/x11_main.o的引用：在函数`winresize': /cygdrive/d/Users/MOBDEV3/workspace1/Latest_Mupdf/jni/apps/x11_main.c:260: undefined reference to`_XConfigureWindow'/cygdrive/d/Users/MOBDEV3/workspace1/ Latest_Mupdf/jni/apps/x11_main.c:272：未定义的引用`_XMapWindow' /cygdrive/d/Users/MOBDEV3/workspace1/Latest_Mupdf/jni/apps/x11_main.c:273: undefined reference to`_XFlush'/cygdrive/d/Users/MOBDEV3/workspace1/Latest_Mupdf/jni/apps/x11_main.c:277：未定义对`_XNextEvent' /cygdrive/d/Users/MOBDEV3/workspace1/Latest_Mupdf/jni/apps/x11_main.c:287: undefined reference to`_XSetForeground'/cygdrive /d/Users/MOBDEV3/workspace1/Latest_Mupdf/jni/apps/x11_main.c的引用:288: 未定义对`_XFillRectangle' /cygdrive/d/Users/MOBDEV3/workspace1/Latest_Mupdf/jni/apps/x11_main.c:289: undefined reference to`_XFlush' build/debug/x11_main.o 的引用：在函数`winfullscreen': /cygdrive/d/Users/MOBDEV3/workspace1/Latest_Mupdf/jni/apps/x11_main.c:314: undefined reference to`_XSendEvent' build/debug/x11_main.o 中：在函数`fillrect': /cygdrive/d/Users/MOBDEV3/workspace1/Latest_Mupdf/jni/apps/x11_main.c:322: undefined reference to`_XFillRectangle' build/debug/x11_main.o 中：在函数`winblitsearch': /cygdrive/d/Users/MOBDEV3/workspace1/Latest_Mupdf/jni/apps/x11_main.c:331: undefined reference to`_XSetForeground' build/debug/x11_main 中。 o：在函数`winblit': /cygdrive/d/Users/MOBDEV3/workspace1/Latest_Mupdf/jni/apps/x11_main.c:348: undefined reference to`_XSetForeground'/cygdrive/d/Users/MOBDEV3/workspace1/Latest_Mupdf/jni/apps/x11_main.c:354：未定义对`_XSetForeground' build/debug/x11_main.o: In function`windrawstringxor的引用'：/cygdrive/d/Users/MOBDEV3/workspace1/Latest_Mupdf/jni/ apps/x11_main.c:432：未定义的引用`_XGetGCValues' /cygdrive/d/Users/MOBDEV3/workspace1/Latest_Mupdf/jni/apps/x11_main.c:435: undefined reference to`_XChangeGC'/cygdrive/d/Users/MOBDEV3/workspace1/Latest_Mupdf/jni/apps/x11_main.c:437：未定义引用`_XSetForeground' /cygdrive/d/Users/MOBDEV3/workspace1/Latest_Mupdf/jni/apps/x11_main.c:439: undefined reference to`_XDrawString'/cygdrive/d/Users/MOBDEV3/workspace1/Latest_Mupdf/jni/apps/x11_main.c :440: 未定义引用_XGetGCValues'/cygdrive/d/Users/MOBDEV3/workspace1/Latest_Mupdf/jni/apps/ `_XFlush' /cygdrive/d/Users/MOBDEV3/workspace1/Latest_Mupdf/jni/apps/x11_main.c:442: undefined reference to`x11_main.c:444: 未定义引用`_XChangeGC' build/debug/x11_main.o: In function`windrawstring':/cygdrive/d/Users/MOBDEV3/workspace1/Latest_Mupdf/ jni/apps/x11_main.c:449：未定义对`_XSetForeground' /cygdrive/d/Users/MOBDEV3/workspace1/Latest_Mupdf/jni/apps/x11_main.c:450: undefined reference to`_XDrawString' build/debug/x11_main.o 的引用：在函数`windocopy': /cygdrive/d/Users/MOBDEV3/workspace1/Latest_Mupdf/jni/apps/x11_main.c:478: undefined reference to`_XSetSelectionOwner' build/debug/x11_main.o 中：在函数`onselreq': /cygdrive/d/Users/MOBDEV3/workspace1/Latest_Mupdf/jni/apps/x11_main.c:506: undefined reference to`_XChangeProperty'/cygdrive/d/Users/MOBDEV3/workspace1/ Latest_Mupdf/jni/apps/x11_main.c:513：未定义的引用`_XChangeProperty' /cygdrive/d/Users/MOBDEV3/workspace1/Latest_Mupdf/jni/apps/x11_main.c:520: undefined reference to`_XChangeProperty'/cygdrive/d/Users/MOBDEV3/workspace1/Latest_Mupdf/jni/apps/x11_main.c:530：未定义对`_XSendEvent' build/debug/x11_main.o: In function`main'的引用：/cygdrive/d/Users/MOBDEV3/workspace1/Latest_Mupdf/jni/apps/x11_main。 c:683: 未定义引用`_XNextEvent' /cygdrive/d/Users/MOBDEV3/workspace1/Latest_Mupdf/jni/apps/x11_main.c:704: undefined reference to`_XLookupString' /cygdrive/d/Users/MOBDEV3/workspace1/Latest_Mupdf/jni/apps/x11_main.c:681: 未定义引用`_XPending' /cygdrive/d/Users/MOBDEV3/workspace1/Latest_Mupdf/jni/apps/x11_main.c:800: undefined reference to`_XPending' /cygdrive/d/Users/MOBDEV3/workspace1/Latest_Mupdf/ jni/apps/x11_main.c:842: 未定义引用`_XDestroyWindow' /cygdrive/d/Users/MOBDEV3/workspace1/Latest_Mupdf/jni/apps/x11_main.c:844: undefined reference to`_XFreePixmap' /cygdrive/d/Users/MOBDEV3/workspace1/Latest_Mupdf/jni/apps/x11_main.c:846: 未定义引用`_XFreeCursor' /cygdrive/d/Users/MOBDEV3/workspace1/Latest_Mupdf/jni/apps/x11_main.c:847: undefined reference to`_XFreeCursor' /cygdrive/d/Users/ MOBDEV3/workspace1/Latest_Mupdf/jni/apps/x11_main.c:848：未定义的参考`_XFreeCursor' /cygdrive/d/Users/MOBDEV3/workspace1/Latest_Mupdf/jni/apps/x11_main.c:850: undefined reference to`_XFreeGC'/cygdrive/d/Users/MOBDEV3/workspace1/Latest_Mupdf/jni/apps/x11_main.c:852：未定义对`_XCloseDisplay' build/debug/x11_image.o: In function`createximage的引用'：/cygdrive/d/Users/MOBDEV3/workspace1/Latest_Mupdf/jni/apps/x11_image。 c:108: 未定义引用`_XShmQueryExtension' /cygdrive/d/Users/MOBDEV3/workspace1/Latest_Mupdf/jni/apps/x11_image.c:113: undefined reference to`_XShmCreateImage' /cygdrive/d/Users/MOBDEV3/workspace1/Latest_Mupdf/jni/apps/x11_image.c:139: 未定义引用`_XShmAttach' /cygdrive/d/Users/MOBDEV3/workspace1/Latest_Mupdf/jni/apps/x11_image.c:148: undefined reference to`_XSync' /cygdrive/d/Users/MOBDEV3/workspace1/Latest_Mupdf/ jni/apps/x11_image.c:157：未定义对`_XCreateImage' build/debug/x11_image.o: In function`make_colormap 的引用：/cygdrive/d/Users/MOBDEV3/workspace1/Latest_Mupdf/jni/apps/x11_image.c:194：未定义对`_XCreateColormap' /cygdrive/d/Users/MOBDEV3/workspace1/Latest_Mupdf/jni/apps/x11_image.c:198: undefined reference to`_XStoreColors 的构建/调试/x11_image 的引用。 o：在函数`next_pool_image': /cygdrive/d/Users/MOBDEV3/workspace1/Latest_Mupdf/jni/apps/x11_image.c:307: undefined reference to`_XSync'/cygdrive/d/Users/MOBDEV3/workspace1/Latest_Mupdf/jni/apps/x11_image.c:309：未定义的引用`_XFlush' build/debug/x11_image.o: In function`ximage_error_handler'：/cygdrive/d/Users/MOBDEV3/workspace1/Latest_Mupdf/jni/apps/x11_image.c:322：未定义引用`_XGetErrorText' /cygdrive/d/Users/MOBDEV3/workspace1/Latest_Mupdf/jni/apps/x11_image.c:328: undefined reference to`_XSetErrorHandler'/cygdrive/d/Users/MOBDEV3/workspace1/Latest_Mupdf/jni/apps/x11_image。 c:329: 对`_XSetErrorHandler' build/debug/x11_image.o: In function`ximage_init' 的未定义引用：/cygdrive/d/Users/MOBDEV3/workspace1/Latest_Mupdf/jni/apps/x11_image.c:351: 对`_XVisualIDFromVisual' /cygdrive/d/Users/MOBDEV3/workspace1/Latest_Mupdf/jni/apps/x11_image.c:352: undefined reference to`_XGetVisualInfo'/cygdrive/d/Users/MOBDEV3/workspace1/Latest_Mupdf 的未定义引用/jni/apps/x11_image.c:355：未定义引用`_XFree' /cygdrive/d/Users/MOBDEV3/workspace1/Latest_Mupdf/jni/apps/x11_image.c:359: undefined reference to`_XFree' /cygdrive/d/Users/MOBDEV3/workspace1/Latest_Mupdf/jni/apps/x11_image.c:362：未定义引用`_XListPixmapFormats' /cygdrive/d/Users/MOBDEV3/workspace1/Latest_Mupdf/jni/apps/x11_image.c:369: undefined reference to`_XFree' /cygdrive/d/Users /MOBDEV3/workspace1/Latest_Mupdf/jni/apps/x11_image.c:382：未定义的引用`_XQueryExtension' /cygdrive/d/Users/MOBDEV3/workspace1/Latest_Mupdf/jni/apps/x11_image.c:383: undefined reference to`_XShmQueryExtension'/cygdrive/d/Users/MOBDEV3/workspace1/Latest_Mupdf/jni/apps/x11_image.c:387：未定义对`_XSetErrorHandler' build/debug/x11_image.o: In function`ximage_blit'的引用：/cygdrive/d/Users/MOBDEV3/workspace1/Latest_Mupdf/jni/apps/x11_image。 c:452: 未定义对`_XShmPutImage' /cygdrive/d/Users/MOBDEV3/workspace1/Latest_Mupdf/jni/apps/x11_image.c:458: undefined reference to`_XPutImage'collect2 的引用: ld 返回 1 退出状态 Makefile:146: 目标 `build/debug/mupdf' 的配方失败 make: *** [build/debug/mupdf] 错误 1

如我所见，问题出在“X11 Lib”中，但无法做到。任何帮助表示赞赏...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T17:06:50.150

尝试带有参数的 make 命令 例如，

使 NOX11=是

# android - 安卓架构

> ID：10222651
> 
> 赞同：0
> 
> 时间：2012-04-19T06:20:21.457
> 
> 标签：android

现在我正在做一个android项目（Api level 8），我安装了JD-Eclipse（反编译器）来了解程序执行的流程。反编译的'android.jar'包含完整的抽象类和接口，那么实际的类在哪里包含要执行的主体？该jar文件的名称是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T06:31:12.653

你可能找不到你要找的东西。这`android.jar`是一个 API，因为它不能直接执行，所以甚至不能保证它包含这样的代码。

如果您想开始创建应用程序，只需转到[开发人员页面](http://developer.android.com/guide/basics/what-is-android.html)并开始阅读有关如何设置开发环境、如何针对 API 进行编程、如何测试您的应用程序以及最后如何部署它的文档在实际设备上。

例如，活动的生命周期可以[在文档](http://developer.android.com/guide/topics/fundamentals/activities.html)中找到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T06:30:43.387

Android.jar 包含 Android API（类、接口等）。如果您想查看其余部分，请从[Android Git 存储库](http://source.android.com/source/downloading.html)或通过 SDK 管理器下载源代码。

# asp.net - 在 .net 中获取 IIS DirectoryEntry 时访问被拒绝

> ID：10222652
> 
> 赞同：2
> 
> 时间：2012-04-19T06:20:22.603
> 
> 标签：asp.net, iis, active-directory

当我尝试创建 IIS 的新 DirectEntry 时，我总是拒绝访问，这是代码：

```
DirectoryEntry entry=new DirectoryEntry("IIS://localhost/W3SVC/1/ROOT");
foreach(DirectoryEnetry de in entry.Children){
 Console.WriteLine(de.Name);
} 
```

当前登录系统的用户已经是系统的超级管理员。

所以他应该拥有所有的权限。

如何解决？

顺便说一句，我在 asp.net web 应用程序和窗口窗体应用程序中测试了代码，它们都抛出了相同的“访问被拒绝”异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-05-03T06:15:36.703

您需要将 LDAP 服务器的凭据提供到您的`DirectoryEntry()`对象中。或者，您需要确保您的应用程序池指的是域帐户，而不是 NETWORKSERVICES 或其他应用程序池帐户，因为它们无权访问 AD。

IE

```
DirectoryEntry rootDSE = new DirectoryEntry("LDAP://yourldapserver");
rootDSE.Username = "user";
rootDSE.Password = "password"; 
```

# c# - 如何使用 Moq 来满足单元测试的 MEF 导入依赖项？

> ID：10222654
> 
> 赞同：4
> 
> 时间：2012-04-19T06:20:31.837
> 
> 标签：c#, .net, unit-testing, moq, mef

这是我的界面

```
public interface IWork
{
    string GetIdentifierForItem(Information information);
} 
```

和我的班级

```
public class A : IWork
{
[ImportMany]
public IEnumerable<Lazy<IWindowType, IWindowTypeInfo>> WindowTypes { get; set; }

public string GetIdentifierForItem(Information information)
{
    string identifier = null;
    string name = information.TargetName;

    // Iterating through the Windowtypes 
    // searching the 'Name' and then return its ID  
    foreach (var windowType in WindowTypes)
    {
        if (name == windowType.Metadata.Name)
        {
            identifier = windowType.Metadata.UniqueID;
            break;
        }
    }
    return identifier;
}
} 
```

**问题**：我想对方法进行单元测试`GetIdentifierForItem`

这是我试图解决的问题 -

(1) 创建一个模拟 Lazy 并设置它需要返回的属性值

`var windowMock = new Mock<Lazy<IWindowType, IWindowTypeInfo>>(); windowMock.Setup(foo => foo.Metadata.Name).Returns("Data"); windowMock.Setup(foo => foo.Metadata.UniqueID).Returns("someString");`

(2)创建一个窗口类型列表和上面的mocked对象，然后将其设置为创建的A对象

```
var WindowTypesList = new List<IWindowType, IWindowTypeInfo>>();
WindowTypesList.Add(windowMock.Object);
A a = new A();
a.WindowTypes = WindowTypesList; 
```

(3) 创建信息模拟

```
var InfoMock = new Mock<Information>();
InfoMock.Setup(foo => foo.TargetName).Returns("Data"); 
```

将以上所有内容放在一起作为单元测试

```
[TestMethod]
public void GetIDTest()
{
    var windowMock = new Mock<Lazy<IWindowType, IWindowTypeInfo>>();
    windowMock.Setup(foo => foo.Metadata.Name).Returns("Data");
    windowMock.Setup(foo => foo.Metadata.UniqueID).Returns("someString");

    var WindowTypesList = new List<Lazy<IWindowType, IWindowTypeInfo>>();
    WindowTypesList.Add(windowMock.Object);

    A a = new A();
    a.WindowTypes = WindowTypesList;
    var InfoMock = new Mock<Information>();
    InfoMock.Setup(foo => foo.TargetName).Returns("Data");

    string expected = "someString"; // TODO: Initialize to an appropriate value
    string actual;
    actual = a.GetIdentifierForItem(InfoMock.Object);
    Assert.AreEqual(expected, actual);

} 
```

此单元测试无法执行并引发异常“TargetInvocationException”并查看详细信息，看起来我正在做一些我不应该做的事情。

但我不确定如何以其他方式做到这一点。我已经阅读了 Moq 快速入门指南中的一些链接。我知道我错过了一些东西。您能通过指导如何进行单元测试来帮助我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T07:17:54.883

在设置模拟之后，可以这样做

1) 创建一个包含导入的 CompositionContainer。

2）将模拟添加到容器中。

```
container.ComposeExportedValue(mock.Object); 
```

3）创建测试类的实例

4) 为导入编写模拟

```
container.ComposeParts(instance); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T11:42:49.983

你不需要模拟`Lazy<T,TMetadta>`. 它足够灵活，可以处理您的测试。相反，模拟`IWindowTypeInfo`

```
[TestMethod]
public void GetIDTest()
{
    var windowTypeInfoMock = new Mock<IWindowTypeInfo>();
    windowTypeInfoMock.Setup(foo => foo.Name).Returns("Data");
    windowTypeInfoMock.Setup(foo => foo.UniqueID).Returns("someString");
    var lazyWindow =
         new Lazy<IWindowType, IWindowTypeInfo>(windowTypeInfoMock.Object);

    var WindowTypesList = new List<Lazy<IWindowType, IWindowTypeInfo>>();
    WindowTypesList.Add(lazyWindow);

    var a = new A();
    a.WindowTypes = WindowTypesList;
    var InfoMock = new Mock<Information>();
    InfoMock.Setup(foo => foo.TargetName).Returns("Data");

    string expected = "someString";
    string actual;
    actual = a.GetIdentifierForItem(InfoMock.Object);
    Assert.AreEqual(expected, actual);
} 
```

你的测试通过了我的机器，只做了小的修改，你不需要为这个测试使用组合容器。

# php - PHP创建的水印看起来很奇怪

> ID：10222664
> 
> 赞同：0
> 
> 时间：2012-04-19T06:22:10.057
> 
> 标签：php, watermark

我有向图像（JPG）添加水印（PNG，透明）的脚本。可以很好地处理 - 以某种方式水印会改变颜色并使其不透明。这是我用于添加水印的代码：

```
$im = imagecreatefromjpeg('../../pics/'.$ran.'_large.jpg');
$stamp = imagecreatefrompng('a.png');

$marge_right = 10;
$marge_bottom = 10;
$sx = imagesx($stamp);
$sy = imagesy($stamp);

imagecopymerge($im, $stamp, imagesx($im) - $sx - $marge_right, imagesy($im) - $sy - $marge_bottom, 0, 0, imagesx($stamp), imagesy($stamp), 70);

// Save the image to file and free memory
imagejpeg($im, '../../pics/'.$ran.'_large.jpg');
imagedestroy($im); 
```

[PHP生成后带有水印的图像（错误的方式）](http://i39.tinypic.com/20iuwk7.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T06:27:52.247

您的输出图像格式是 jpeg。Jpeg 不支持透明度。将输出格式更改为 png。

还建议您使用图像魔术。Gd 非常原始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T06:27:27.977

在从 PNG 创建带有 alpha 映射的 PNG 图像时，不要忘记这些功能：

```
imagealphablending($stamp,false);
imagesavealpha($stamp,true); 
```

看看有没有区别？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T07:18:59.340

谢谢你们的帮助 -[我在这个网站上找到了答案](http://www.benholmen.com/blog/2008/12/adding-png-watermarks-to-jpegs-with-php/)

```
$im = imagecreatefromjpeg('../../pics/'.$ran.'_large.jpg');
$stamp = imagecreatefrompng('a.png');

imagealphablending($im, true);

$marge_right = 10;
$marge_bottom = 10;

$sx = imagesx($stamp);
$sy = imagesy($stamp);

$offset = 10;

imagecopy($im, $stamp, imagesx($im) - imagesx($stamp) - $offset, imagesy($im) - imagesy($stamp) - $offset, 0, 0, imagesx($stamp), imagesy($stamp));
// Save the image to file and free memory
imagejpeg($im, '../../pics/'.$ran.'_large.jpg');
imagedestroy($im); 
```

# wix - WiX v3.6 PermissionEx - 需要 Sddl 属性？

> ID：10222676
> 
> 赞同：1
> 
> 时间：2012-04-19T06:23:26.770
> 
> 标签：wix, wix3.6

真的吗？

我正在尝试做这样的事情-

```
<PermissionEx
              User="Authenticated Users"
              GenericAll="yes"
              ServiceChangeConfig="yes"
              ServiceEnumerateDependents="yes"
              ChangePermission="yes"
              ServiceInterrogate="yes"
              ServicePauseContinue="yes"
              ServiceQueryConfig="yes"
              ServiceQueryStatus="yes"
              ServiceStart="yes"
              ServiceStop="yes" /> 
```

它给了我

> 缺少必需的属性“Sddl”。

不熟悉Sddl。如何创建 Sddl 字符串以匹配上述权限？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T18:10:20.243

PermissionEx 是 MSI 5.0 的 MsiLockPermissionsEx 功能的标记，它需要一个 SDDL 字符串。WixUtilExtension 中还有一个 PermissionEx 标签，它允许在所有版本的 MSI 上使用类似的功能。您将前者与后者的属性一起使用。如果您想要 PermissionEx 的 WixUtilExtension 变体，请使用 WixUtilExtension 命名空间：

```
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi" xmlns:util="http://schemas.microsoft.com/wix/UtilExtension">
...
<util:PermissionEx ... /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T11:45:22.827

使用 API [ConvertSecurityDescriptorToStringSecurityDescriptor](http://msdn.microsoft.com/en-us/library/windows/desktop/aa376397.aspx)或按照 MSDN 文章[Security Descriptor String Format](http://msdn.microsoft.com/en-us/library/windows/desktop/aa379570.aspx)中描述的格式在脑海中解决。或者在网上寻找您需要的示例。

# mongodb - mongodb文档分组

> ID：10222677
> 
> 赞同：0
> 
> 时间：2012-04-19T06:23:31.057
> 
> 标签：mongodb

我有我的测试集合，如下所示..

```
> db.test.find()
{ "_id" : "111-21212121", "Mawb" : "111-1111111", "Hawb" : "111111", "Hawb_date" : "date1" }
{ "_id" : "111-21212122", "Mawb" : "111-1111111", "Hawb" : "222222", "Hawb_date" : "date1" }
{ "_id" : "111-21212123", "Mawb" : "222-2222222", "Hawb" : "333333", "Hawb_date" : "date1" }
{ "_id" : "111-21212124", "Mawb" : "222-2222222", "Hawb" : "444444", "Hawb_date" : "date1" }
{ "_id" : "111-21212125", "Mawb" : "333-3333333", "Hawb" : "555555", "Hawb_date" : "date1" }
{ "_id" : "111-21212126", "Mawb" : "333-3333333", "Hawb" : "666666", "Hawb_date" : "date1" } 
```

我想通过“Mawb”键对它进行分组（映射/组合）......这样我就可以输出分组文档，例如，

```
[
{ "_id" : "111-21212121", "Mawb" : "111-1111111", "Hawb" : "111111", "Hawb_date" : "date1" }
{ "_id" : "111-21212122", "Mawb" : "111-1111111", "Hawb" : "222222", "Hawb_date" : "date1" }],
[{ "_id" : "111-21212123", "Mawb" : "222-2222222", "Hawb" : "333333", "Hawb_date" : "date1" }
{ "_id" : "111-21212124", "Mawb" : "222-2222222", "Hawb" : "444444", "Hawb_date" : "date1" }],
[{ "_id" : "111-21212125", "Mawb" : "333-3333333", "Hawb" : "555555", "Hawb_date" : "date1" }
{ "_id" : "111-21212126", "Mawb" : "333-3333333", "Hawb" : "666666", "Hawb_date" : "date1" }] 
```

我尝试过减少地图，但无法通过。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T09:22:12.750

如果您使用的是 MongoDB 2.1 或更高版本（2.1.x 是导致即将发布的 2.2.0 稳定版本的开发系列），您可以使用聚合框架在服务器端完成所有这些工作。

[http://www.mongodb.org/display/DOCS/Aggregation+Framework](http://www.mongodb.org/display/DOCS/Aggregation+Framework)

# php - 在查询字符串中传递 &

> ID：10222685
> 
> 赞同：3
> 
> 时间：2012-04-19T06:24:10.237
> 
> 标签：php

我想在查询字符串中传递 '&' 运算符。我尝试使用 urlencode 和 urldecode 但它不起作用。我正在这样做：

```
$abc="A & B";
$abc2=urlencode($abc); 
```

然后我像这样传递值

```
<a href="hello.php?say=<?php echo $abc2 ?>"><?php echo $abc;?></a> 
```

并在下一页上获得价值

```
$abc=$_GET['say'];
$abcd=urldecode($abc');
echo $abcd; 
```

但输出不是`A & B`

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T06:31:15.217

试试这个：

```
$url = '?' . http_build_query(array(
  'say' => 'A & B'
));

// Then just:
echo $_GET['say']; 
```

现场示例：[http ://codepad.viper-7.com/ibH79a?say=A+%26+B](http://codepad.viper-7.com/ibH79a?say=A+%26+B)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T06:31:43.200

基本上它应该可以工作我在我的网络服务器上尝试了以下内容：

```
$a = 'A & B';
echo urlencode($a);
echo '<br />';
echo urldecode(urlencode($a)); 
```

输出

```
A+%26+B
A & B 
```

我猜你有另一个逻辑或语法错误导致你的 & 没有被正确解码，在你的代码中有一个撇号在你的 urldecode() 语法中。

这是您所有的代码还是您使用的是“类似”的代码？你的原始代码会很有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T06:41:25.930

您似乎在以下代码的第 2 行的 $abc 旁边添加了一个单引号：

```
$abc = $_GET['say'];
$abcd = urldecode($abc);
echo $abcd; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-19T06:53:31.250

& 是一个特殊的 HTML 字符，您需要将其转换为`&amp;`.

试试这个：

```
$abc = "A & B";
<a href="hello.php?say=<?php echo htmlentities($abc); ?>"><?php echo $abc; ?></a> 
```

# c# - HttpContext.Current 始终等于 null

> ID：10222687
> 
> 赞同：0
> 
> 时间：2012-04-19T06:24:12.400
> 
> 标签：c#, sharepoint-2010, eventreceiver

请帮我解决我的问题。我的问题是 HTTPContext.Current 总是等于 null。在此先感谢..请参阅下面的代码

```
HttpContext _context = null;
public EventReceiver()
{
    _context = HttpContext.Current;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T06:30:37.230

由于您收到事件，因此事件已经发生。现在，上下文已经消失了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T06:33:00.870

HttpContext.Current 将不可用于您的自定义类 EventReceiver 除非您从拥有它的类（如 WebPage）传递它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T09:13:53.487

您不应依赖事件接收器中的上下文。相反，您应该从事件的属性中获取所有对象，这些对象作为参数传递给接收者的方法。
[看到这个问题](https://stackoverflow.com/questions/1601352/how-to-obtain-the-httpcontext-in-event-handler)

# c# - C#重新分配类后内存会发生什么

> ID：10222690
> 
> 赞同：1
> 
> 时间：2012-04-19T06:24:26.377
> 
> 标签：c#, garbage-collection

举个例子后问这个问题更容易......

```
MyClass a = new MyClass();

a.initializeData();
a = new MyClass(); 
```

在为新的 MyClass 分配空间后，我之前的分配会发生什么？垃圾收集器是否会自动收集它，因为我知道 C# 中没有删除

我只是想确保我不会有任何内存泄漏。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T06:25:48.627

孤立类的内存将在稍后从垃圾收集器中释放。

见[这篇文章](http://msdn.microsoft.com/en-us/magazine/bb985010.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T07:13:30.623

首先，它被称为“创建一个对象”，而不是“重新分配一个类”。

垃圾收集的整个想法是，您不关心没有引用的对象会发生什么：您编写的代码好像有无限的内存（在合理范围内）。垃圾收集器的目的不是为你释放内存，[而是模拟有无限量的内存](http://blogs.msdn.com/b/oldnewthing/archive/2010/08/09/10047586.aspx)。

碰巧的是，为了做到这一点，垃圾收集器可能会回收以前分配的内存，而您不时在这些内存上持有任何引用；它还可能重新组织使用的内存以防止碎片，并更新所有引用以指向新的内存位置。所有这些都是您不应该关心的实现细节。

当然，了解 GC 的工作原理是非常有趣的。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T06:26:26.697

垃圾收集器正在跟踪引用，因为没有对稍后将被收集的第一个实例的引用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T06:27:56.420

假设您的程序运行了足够长的时间，并且在将来某个时间点有足够的内存压力或发生显式垃圾收集，那么`MyClass`将收集 的第一个实例（或者将被放入终结器队列，如果它具有终结器）。

您不必担心*何时*会发生这种情况。最早*可能*发生在`initializeData`执行过程中，在该方法停止通过`this`（无论是隐式还是显式）访问任何实例成员之后。

* * *

显式垃圾收集：在基准测试或演示特定 GC 行为的代码之外，您永远不需要执行此操作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-19T06:32:28.770

是的，垃圾收集器负责删除未使用的对象。

无法保证何时会发生这种情况，但由于它是一个短暂的对象，它通常会在下一次垃圾回收时发生。

如果需要控制何时清理对象（即在类中使用非托管资源），则实现`IDisposable`接口，并调用`Dispose`方法告诉对象清理资源。

# html - 较大 div 中的 2 个 div 必须等于相同的高度......但是如何？

> ID：10222695
> 
> 赞同：1
> 
> 时间：2012-04-19T06:25:11.773
> 
> 标签：html, css

所以这是一张图片：

![在此处输入图像描述](../Images/e428c71cc7ef3a8a4e0753b209194539.png)

问题是我在一个容器 div 中有 2 个 div。容器 div 的高度随着 nessiscary 的增加而扩展，2 个内部 div 也是如此。右边的 div 有一个左边框......但如果它是空的，它不会填满整个高度......我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T06:35:21.063

您正在谈论的问题被称为“人造列”，并且在过去几年中得到了很好的报道和描述:) [http://www.alistapart.com/articles/fauxcolumns/](http://www.alistapart.com/articles/fauxcolumns/)

有几种解决方案：

*   在包含的 div 上使用背景来模仿边框
*   使用 CSS3 技术（display:table 和 display:table-cell，但这些并不真正适用于这个或 CSS3 flexbox，它是高度实验性的，可能无法在大多数浏览器中工作）
*   使用JS将列高设置为元素的最大高度

最后一个解决方案非常好，所以如果你使用 jQuery，那么它可以这样实现：

```
var max=0;
$('#container').children().each(function(){
    if($(this).height()>max) max = $(this).height();
});
$('#container').children().each(function(){
    $(this).height(max);
}); 
```

该脚本遍历容器的所有子元素并找到最高元素。然后它再次迭代并为它们中的每一个设置最大高度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T08:10:34.537

**HTML**

```
<div class="wrapper">
    <div class="child_1">First Div content goes here</div>
    <div class="child_2">Second Div content goes here</div>
</div> 
```

**CSS**

```
.wrapper {
        width: 960px;
        overflow: hidden;
        margin: 0px auto;
    }

    .child_1, .child_2 {
        padding-bottom: 9999em;
        margin-bottom: -9999em;
        width: 50%;
        float: left;
    }

    .child_1 {
        background: #f00;
    }

    .child_2 {
        background: #0f0;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T06:33:04.443

尝试在左侧 div 中添加一个右边框。在容器 div 中添加一个具有明确类的 div。然后在 css 中添加： .clear{clear:both;}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T06:42:01.780

这就是你要找的...

[http://matthewjamestaylor.com/blog/equal-height-columns-cross-browser-css-no-hacks](http://matthewjamestaylor.com/blog/equal-height-columns-cross-browser-css-no-hacks)

* * *

另外，我假设您正在使用`float`，所以我强烈建议您阅读以下内容：

[http://coding.smashingmagazine.com/2007/05/01/css-float-theory-things-you-should-know/](http://coding.smashingmagazine.com/2007/05/01/css-float-theory-things-you-should-know/)

...记得清除你的花车！

# javascript - 如何向谷歌应用引擎发出许多对 blob 的 ajax 请求

> ID：10222696
> 
> 赞同：0
> 
> 时间：2012-04-19T06:25:16.860
> 
> 标签：javascript, google-app-engine, jquery

我想向谷歌应用引擎提出很多请求以获取 blob。这个基本的 for 循环方法创建了正确数量的元素，但它们都指向最后请求的 blob。

```
for (key=0; key < keyList.length; key++){
    var keyUrl = '/serve_blob/audio/'+keyList[key];
    $.ajax({ url : keyUrl, type : 'GET', dataType : 'text',
        success : function(data, xhr, status) {
            renderTemp("#audioTable", "audioTemplate", {'audioSrc':keyUrl});
        }
    });
} 
```

我可以通过从 ajax 完成回调中调用它来获得第二个正常工作的请求。有没有更好的方法让它适用于许多请求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T14:26:07.103

你不是在迭代“关键”吗？你没有使用它...

```
var keyUrl = '/serve_blob/audio/'+keyList[key]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T00:49:04.540

这就是闭包的本质。当闭包中的代码（例如，成功函数中的代码）执行时， 的值`keyUrl`是它设置为最后的值 - 在定义闭包时不会捕获该值。

为避免这种情况，请将 ajax 调用放在单独的函数中，并`keyUrl`作为参数，并从循环内部调用它。

# android - 从 Eclipse 运行时 Mapview 不显示地图。如何签署应用程序？

> ID：10222701
> 
> 赞同：0
> 
> 时间：2012-04-19T06:25:43.090
> 
> 标签：android, eclipse, android-mapview, apk

如果我将项目导出到 APK 并使用我的密钥对应用程序进行签名，则 MapView 可以在我的手机上运行。但当我通过选择在 Eclipse 中运行时在手机上运行应用程序时不会。

我认为这是因为它没有用我的密钥签名。我查看了项目设置，但找不到任何选项来签署应用程序以运行它。

我不能一直导出它只是为了调试/运行应用程序。我有哪些选择？如果我从 Eclipse 的“运行”菜单运行 MapView 是否无法正常工作？

可能的解决方案可能是

*   有没有办法自动签署应用程序以进行运行/调试？
*   是否有任何选项可以让 MapView 在不签署
    运行/调试的情况下正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T06:28:16.430

是的，这有点烦人。当您从 Eclipse 运行应用程序时，它由 debug.keystore 签名。我建议注释掉您的 api 密钥，然后将 api 密钥放入 debug.keystore，然后当您想用完 eclipse 时将其切换回来。有关 debug.keystore 的更多信息，请参见下面的链接。

[http://developer.android.com/guide/publishing/app-signing.html](http://developer.android.com/guide/publishing/app-signing.html)

# iphone - 如何在tableview（iphone）的标签触摸上显示键盘

> ID：10222704
> 
> 赞同：3
> 
> 时间：2012-04-19T06:25:46.177
> 
> 标签：iphone, ios, cocoa-touch, label

我现在在一个应用程序上工作，我需要在 tableview 单元格上添加一些标签，当用户点击该标签时，键盘将显示我们如何做到这一点，有人可以告诉我。我搜索了但他们使用通知的每个地方我都不想要那个。

谢谢

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:                       

 (NSIndexPath*)indexPath {
 static NSString *CellIdentifier = @"Cell";
 UITableViewCell *cell = [tableView
 dequeueReusableCellWithIdentifier:CellIdentifier];
  if (cell == nil) {
    cell = [[[UITableViewCell alloc]
             initWithStyle:UITableViewCellStyleValue1
             reuseIdentifier:CellIdentifier]
            autorelease];
  }
 cell.textLabel.text=[Players objectAtIndex:indexPath.row];

 playername=[[UITextField alloc]initWithFrame:CGRectMake(10, 5, 100, 30)];  
 playername.placeholder=@"Player";
 playername.delegate=self;
 playername.keyboardType=UIKeyboardTypeDefault;
 playername.returnKeyType=UIReturnKeyDone;
 [cell.contentView addSubview:playername];

 cell.accessoryType=UITableViewCellAccessoryDisclosureIndicator;
 return cell;

 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T06:37:15.330

在您的应用程序中不使用 UITextField 或 UITextView 很奇怪

但如果你想要这个，你可以创建一个不可见的 UITextField 或 UITextView 来显示键盘

```
UITextField *tf = [[UITextField alloc] initWithFrame:CGRectMake(0, 0, 0, 0)];
[self.view addSubview:tf];
[tf becomeFirstResponder]; 
```

因此您可以使用 UITextFieldDelegate 处理输入

# c# - 使用 c# 将静态地图保存到 Metro App 中的图像中

> ID：10222710
> 
> 赞同：1
> 
> 时间：2012-04-19T06:26:55.003
> 
> 标签：c#, image, bing-maps, microsoft-metro

我正在使用 c# 和 XAML 开发 Metro App。

在我的应用程序中，我需要将静态地图保存为来自位置（经度、纬度）的图像：http: [//dev.virtualearth.net/REST/v1/Imagery/Map/Road/47.619048,-122.35384/15 ?mapSize=500,500&key=BINGKEY](http://dev.virtualearth.net/REST/v1/Imagery/Map/Road/47.619048,-122.35384/15?mapSize=500,500&key=BINGKEY)

我尝试了许多方法来通过将 HTTPRequest 发送到该 URL 来从中创建图像，但都是徒劳的。

例如：

```
HttpWebRequest httpWebRequest = (HttpWebRequest)result.AsyncState;
            WebResponse response = httpWebRequest.EndGetResponse(result);

            // Retrieve the reponse data.
            Stream responseStream = response.GetResponseStream();

            StreamReader reader = new StreamReader(responseStream, Encoding.UTF8);
            string xml = reader.ReadToEnd();

            System.Text.Encoding enc = System.Text.Encoding.UTF8;
            Clsses.Common.Instance.imageBytes = enc.GetBytes(xml);

            Stream stream = new MemoryStream(Clsses.Common.Instance.imageBytes);

            InMemoryRandomAccessStream randomAccessStream = new InMemoryRandomAccessStream();
            DataWriter writer = new DataWriter(randomAccessStream.GetOutputStreamAt(0));

            writer.WriteBytes(Clsses.Common.Instance.imageBytes);
            var result1 = await writer.StoreAsync();

            WriteableBitmap wb = new WriteableBitmapresult1 1);
            MemoryStream ms = new MemoryStream();
            using (IRandomAccessStream writeStream = await sampleFile1.OpenAsync(FileAccessMode.ReadWrite))
            {
                BitmapEncoder encoder = await BitmapEncoder.CreateAsync(new Guid(), writeStream);
                encoder.SetPixelData(BitmapPixelFormat.Rgba8, BitmapAlphaMode.Premultiplied, (uint)wb.PixelWidth, (uint)wb.PixelHeight, 96, 96, Clsses.Common.Instance.imageBytes);
                await encoder.FlushAsync();
            } 
```

请帮我将其另存为图像对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T10:10:13.410

```
public async Task<StorageFile> GetBingMapImage(string ImageUrl)
{
    StorageFile storageFile = null;
    HttpClient httpClient = new HttpClient();
    HttpRequestMessage request = new HttpRequestMessage(HttpMethod.Get, ImageUrl);
    HttpResponseMessage httpResponseMessage = await httpClient.SendAsync(request, HttpCompletionOption.ResponseHeadersRead);
    if (httpResponseMessage.StatusCode == System.Net.HttpStatusCode.OK)
    {
        var fileSavePicker = new FileSavePicker();
        fileSavePicker.FileTypeChoices.Add("png", new List<string> { ".png" });
        fileSavePicker.SuggestedFileName = "map.png";
        fileSavePicker.SuggestedStartLocation = PickerLocationId.PicturesLibrary;
        storageFile = await fileSavePicker.PickSaveFileAsync();

        if (storageFile != null)
        {
            IRandomAccessStream randomAccessStream = await storageFile.OpenAsync(FileAccessMode.ReadWrite);
            DataWriter dataWriter = new DataWriter(randomAccessStream.GetOutputStreamAt(0uL));
            var bytes = await httpResponseMessage.Content.ReadAsByteArrayAsync();
            dataWriter.WriteBytes(bytes);
            await dataWriter.StoreAsync();
            await dataWriter.FlushAsync();
            await randomAccessStream.FlushAsync();
            dataWriter.Dispose();
            randomAccessStream.Dispose();
        }
    }
    return storageFile;
} 
```

# android - 带有整数参数的 Android SQLite 查询

> ID：10222714
> 
> 赞同：3
> 
> 时间：2012-04-19T06:27:37.067
> 
> 标签：android, sqlite

[SQLiteDatabase.query](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#query%28java.lang.String,%20java.lang.String%5B%5D,%20java.lang.String,%20java.lang.String%5B%5D,%20java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String%29)的文档说`selectionArgs`将绑定为字符串。

使用整数参数执行查询的推荐方法是什么？

是不是这个：

```
int value = 10;
Cursor cursor = database.query(
    "TABLE_X", 
    new String[] { "COLUMN_A", "COLUMN_B" },
    "COLUMN_C = " + value,
    null,
    null,
    null,
    null); 
```

或者是这样的：

```
int value = 10;
Cursor cursor = database.query(
    "TABLE_X", 
    new String[] { "COLUMN_A", "COLUMN_B" },
    "COLUMN_C = ?",
    new String[] { Integer.toString(value) },
    null,
    null,
    null); 
```

或者是其他东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T06:32:36.073

第二个选项`?`是使用**查询**方法的建议方式。

> **selectionArgs**：您可以在选择中包含 ?s，它将被 selectionArgs 中的值替换，以便它们出现在选择中。这些值将绑定为字符串。

# jquery - ajax 上的 Facebook 点赞和分享按钮

> ID：10222720
> 
> 赞同：6
> 
> 时间：2012-04-19T06:28:00.280
> 
> 标签：jquery, ajax, facebook, django-templates

背景： - 我正在使用 ajax 来获取一个名为“foo_posts”的实体。在这篇文章中，我使用了 Facebook 分享和点赞按钮

```
{% for post in foo_posts %}
    <div class="foo">
        {{ post }}
        <div class="fb-like" data-send="true" data-width="450" data-href="http://foo/foo/detail/{{ foo.id }}/" data-show-faces="true"></div>
</div> 
```

{% endfor %} 现在这些帖子正在使用 Ajax 填充。

问题： - Facebook 的点赞和分享被初始化

```
$(function(d, s, id) {
              var js, fjs = d.getElementsByTagName(s)[0];
              if (d.getElementById(id)) return;
              js = d.createElement(s); js.id = id;
              js.src = "//connect.facebook.net/en_GB/all.js#xfbml=1&appId=245185848840630";
              fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk')); 
```

这是行不通的。如何调用此函数，以便正确填充喜欢和分享？是否应该在 ajax 成功函数中调用。（现在在页面本身上调用它）

PS :- 我在成功功能中尝试过。我想我做错了。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-19T06:47:44.047

默认情况下，XFBML 标签仅在 Facebook JS-SDK 初始化时解析。

[`FB.XFBML.parse()`](http://developers.facebook.com/docs/reference/javascript/FB.XFBML.parse/)渲染页面后，将社交插件添加到 DOM 后，您应该调用方法。

您可以为所有文档调用它，或者通过指定元素来搜索 XFBML 元素：

```
FB.XFBML.parse();
// OR
FB.XFBML.parse(DOM_ELEMENT_WHERE_AJAX_CONTENT_IS_PLACED); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-31T14:52:42.350

如果您正在使用多个 facebook 分享按钮并且您还有多个社交媒体分享按钮，那么您可以完全跳过以包含所有相关的 js，这只会降低您的页面速度，而不是分享按钮及其 js，只使用链接来分享您的邮政，

最好的事情是**使用这种方法，当您使用 ajax 获取 html 时，您无需执行任何操作**。

facebook分享链接的例子：

```
https://www.facebook.com/sharer.php?u=[your-url] 
```

您可以按如下方式使用它：

```
<a href="https://www.facebook.com/sharer.php?u=[your-url]">Share on facebook</a> 
```

您也可以使用 css 将此链接设置为 facebook 按钮外观，或者您可以使用 facebook 或 svg 的图像作为 facebook。

# c# - 需要有关优化此代码的建议

> ID：10222727
> 
> 赞同：0
> 
> 时间：2012-04-19T06:28:33.120
> 
> 标签：c#, .net, optimization

目前，当我读取 15Mb 文件时，我的应用程序会占用大量内存。请注意，在主代码的末尾，我将插入数据库中的数据与文件中的原始数组进行比较。欢迎任何建议。

主要代码：

```
TestEntities entities = new TestEntities();

        using (FileStream fileStream = new FileStream(fileName + ".exe", FileMode.Open, FileAccess.Read))
        {

            byte[] bytes = new byte[fileStream.Length];

            int numBytesToRead = (int) fileStream.Length;
            int numBytesRead = 0;

            while (numBytesToRead > 0)
            {
                int n = fileStream.Read(bytes, numBytesRead, numBytesToRead);

                if (n == 0)
                    break;

                numBytesRead += n;
                numBytesToRead -= n;
            }

            var query = bytes.Select((x, i) => new {Index = i, Value = x})
                .GroupBy(x => x.Index/100)
                .Select(x => x.Select(v => v.Value).ToList())
                .ToList();

            foreach (List<byte> list in query)
            {
                Binary binary = new Binary();
                binary.Name = fileName + ".exe";
                binary.Value = list.ToArray();
                entities.AddToBinaries(binary);
            }

            entities.SaveChanges();

            List<Binary> fileString = entities.Binaries.Where(b => b.Name == fileName + ".exe").ToList();

            Byte[] final = ExtractArray(fileString);
            if (Compare(bytes, final))
            {
                 /// Some notification that was ok
            }

        } 
```

比较方法：

```
public bool Compare(Byte[] array1,Byte[] array2)
    {
        bool isEqual = false;
        if (array1.Count() == array2.Count())
        {

            for (int i = 0; i < array1.Count(); i++)
            {
                isEqual = array1[i] == array2[i];
                if (!isEqual)
                {
                    break;

                }
            }
        }

        return isEqual;
    } 
```

ExtractArray 方法：

```
public Byte[] ExtractArray(List<Binary> binaries )
    {
        List<Byte> finalArray = new List<Byte>();

        foreach (Binary binary in binaries)
        {
            foreach (byte b in binary.Value)
            {
                finalArray.Add(b);
            }

        }

        return finalArray.ToArray();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T06:41:04.310

对于初学者，我强烈建议您投资分析器。这是确定您的代码为何需要如此长时间才能运行或使用大量内存的正确方法。那里有许多分析器，如果您拥有 Premium 或 Ultimate ，包括[Visual Studio 2010 中内置的一个。](http://msdn.microsoft.com/en-us/library/z9z62c29.aspx)

其他人见谷歌或这些帖子：

[有哪些好的 .NET 分析器？](https://stackoverflow.com/questions/3927/what-are-some-good-net-profilers)

和

[最好的 .NET 内存和性能分析器？](https://stackoverflow.com/questions/49912/best-net-memory-and-performance-profiler)

其次，您可能不应该假设您的应用程序不应该*占用*大量内存。C# 应用程序（实际上，所有 .NET 应用程序）都会被垃圾回收。如果我有一台有足够 RAM 的计算机，那么在没有内存压力的情况下，没有理由运行 GC，如果没有，应用程序很容易用完内存。对于 64 位环境尤其如此，其中进程不受 32 位地址空间的内存限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T07:09:39.707

1）你知道静态方法[File.ReadAllBytes](http://msdn.microsoft.com/en-us/library/system.io.file.readallbytes.aspx)吗？可以为您节省前 15 行代码。

2）我讨厌 Linq... 不可读，很难理解到底发生了什么。

```
 var query = bytes.Select((x, i) => new {Index = i, Value = x})
            .GroupBy(x => x.Index/100)
            .Select(x => x.Select(v => v.Value).ToList())
            .ToList(); 
```

因此，对于文件的每个字节，您都创建了一个包含字节本身及其索引的对象。哇。如果你的文件是 15mb，那就是 15 728 640 个对象。假设这个对象占用 64 个字节，即 960mb 的内存空间。

顺便说一句，你想做什么？

**编辑**

```
var bytes = File.ReadAllBytes(filename);

var chunkCount = (int)Math.Ceilling(bytes.Length / 100.0);

var chunks = new List<ArraySegment<byte>>(chunkCount);

for(int i = 0; i < chunkCount; i++) {
  chunks.Add(new ArraySegment(
      bytes,
      i * 100,
      Math.Min(100, bytes.Length - i * 100)
  ));
} 
```

这应该快几倍。

尽管如此，为了获得更好的性能，您可能会在读取文件时在数据库中插入块，而不会将所有这些字节保留在内存中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T06:41:54.367

首先是comapre的两个变体：

```
bool arraysAreEqual = Enumerable.SequenceEqual(array1, array2); 
```

或者这个

```
 public bool Compare(Byte[] array1, Byte[] array2)
    {
        if (array1.Length != array2.Length)
            return false;

        for (int i = 0; i < array1.Length; i++)
        {
            if (array1[i] != array2[i])
                return false;
        }
        return true;            
    } 
```

关于提取试试这个：

```
foreach (Binary binary in binaries)
{
     finalArray.AddRange(binary.Value);
} 
```

# android - 如何创建转轮控件？

> ID：10222730
> 
> 赞同：20
> 
> 时间：2012-04-19T06:28:48.693
> 
> 标签：android, animation, rotation, android-animation, image-rotation

我正在尝试在 android 中实现**转轮**，就像下面显示的图像一样。我从这个[链接](http://mindtherobot.com/blog/wp-content/uploads/2010/07/dialview.zip)中看到了教程。但我想实现如下图所示。轮子由单独的图像组成。有人对这个实现有任何想法吗？任何帮助，将不胜感激。

![在此处输入图像描述](../Images/c9f2f6de6fc298aac9309163ac2d062a.png)

提前致谢。

阿卡什

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T12:30:03.717

应用在 imageView 上的 OnTouchListener 上，通过它我得到了三个事件，即：

1.  **MotionEvent.ACTION_DOWN** ,
2.  **MotionEvent.ACTION_MOVE** &
3.  **运动事件.ACTION_UP**。

在 MotionEvent.ACTION_DOWN 上获得用户触摸的角度，在 MotionEvent.ACTION_UP 上获得用户释放的角度。

得到两个角度的差异后，旋转该角度的图像。

旋转图像后，通过角度检查象限并保持 int 变量，该变量根据象限递增并满足条件设置新图像（所需的图像）。

根据int变量的值维护点击事件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-05T12:30:41.453

要从头开始执行此操作，您需要一种将触摸坐标转换为极坐标（以获得旋转角度）的方法。这可以像这样轻松完成：

```
private float cartesianToPolar(float x, float y) {
  return (float) -Math.toDegrees(Math.atan2(x - 0.5f, y - 0.5f));
} 
```

要旋转图像视图或用于显示旋钮的元素，可以使用如下矩阵：

```
Matrix matrix=new Matrix();
ivRotor.setScaleType(ScaleType.MATRIX);   
matrix.postRotate((float) deg, m_nWidth/2, m_nHeight/2);//getWidth()/2, getHeight()/2);
ivRotor.setImageMatrix(matrix); 
```

其中 deg 是角度，ivRobor 是旋钮图像视图。

完整的 Android 工作示例可在 Google 代码中找到：[https ://code.google.com/p/android-rotaryknob-view/](https://code.google.com/p/android-rotaryknob-view/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-30T04:45:27.013

这是完整的代码：

```
import android.animation.ObjectAnimator;
import android.app.Activity;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Color;
import android.graphics.drawable.ColorDrawable;
import android.os.Bundle;
import android.graphics.Matrix;
import android.view.View;
import android.view.animation.Animation;
import android.view.animation.LinearInterpolator;
import android.view.animation.RotateAnimation;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.Toast;

import java.util.Random;

public class MainActivity extends Activity{
//  Button rotate;
ImageView i;
ImageView ii;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    i= (ImageView) findViewById(R.id.i);
    i.setImageResource(R.drawable.gg);
    ii= (ImageView) findViewById(R.id.ii);
    ii.setImageResource(R.drawable.gg);

    // i.setBackgroundColor(Color.rgb(255, 255, 255));
}

public void ii(View v)
{

    RotateAnimation rotate =
            //new RotateAnimation(0f,generateRandomNumber(),55f,55f);
            new RotateAnimation(0, generateRandomNumber(), 
Animation.RELATIVE_TO_SELF, 0.5f, Animation.RELATIVE_TO_SELF, 0.5f);

    rotate.setDuration(1500);
    rotate.setInterpolator(new LinearInterpolator());
    i.startAnimation(rotate);
    i.setRotation(generateRandomNumber());
    RotateAnimation rotate1 =
            //new RotateAnimation(0f,generateRandomNumber(),55f,55f);
            new RotateAnimation(0, 999999999, Animation.RELATIVE_TO_SELF, 
 0.5f, Animation.RELATIVE_TO_SELF, 0.5f);
    rotate1.setDuration(99999);

    rotate1.setInterpolator(new LinearInterpolator());
    // i= (ImageView) findViewById(R.id.i);
    //     i.setImageResource(R.drawable.g);

    ii.startAnimation(rotate1);

/*i= (ImageView) findViewById(R.id.i);
    i.setImageResource(R.drawable.g);
    ObjectAnimator animator = ObjectAnimator.ofFloat(i,"rotationY", 360f);
    animator.setDuration(1000);
    animator.start();
 */

   /* Matrix matrix = new Matrix();
   i.setScaleType(ImageView.ScaleType.CENTER_INSIDE);   //required
    matrix.postRotate(generateRandomNumber());
  i.setImageMatrix(matrix);
 */

   /* Matrix matrix = new Matrix();
    Bitmap bMap = BitmapFactory.decodeResource(getResources(), 
 R.drawable.g);
   matrix.postRotate(generateRandomNumber());

    Bitmap bMapRotate = Bitmap.createBitmap(bMap, 0, 
 0,bMap.getWidth(),bMap.getHeight(), matrix, true);
    i.setImageBitmap(bMapRotate);*/
}

public float generateRandomNumber() {

    Random rand = new Random();
    int randomNum = rand.nextInt((10000000 - 125000) + 1);

    return (float)randomNum;
}

int backpressed=0;
@Override
public void onBackPressed() {
    backpressed++;
    if(backpressed>1)
    {
        super.onBackPressed();
        finish();
    }
    else
    {
        Toast.makeText(this, "Press back again to exit", 
  Toast.LENGTH_LONG).show();
        new Thread(new Runnable() {
            @Override
            public void run() {
                try{
                    Thread.sleep(2000);}
                catch (Exception e)
                {
                    e.printStackTrace();
                }
                backpressed=0;
            }
        });
    }
}
} 
```

这是 XML：

```
tools:context=".MainActivity">
<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text=".............."
    android:textColor="#00ff10"
    android:textStyle="bold"
    android:textSize="25dp"
    android:layout_gravity="center"/>
<ImageView
    android:layout_width="200dp"
    android:layout_height="80dp"
    android:layout_gravity="center"
    android:src="@drawable/a"

    />
<ImageView
    android:layout_width="300dp"
    android:layout_height="300dp"
    android:layout_gravity="center"
    android:id="@+id/i"

    />
<DigitalClock
    android:layout_width="100dp"
    android:layout_height="50dp"
    android:layout_gravity="center"/>
<Button
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Play"
    android:backgroundTint="#ff0044"
    android:id="@+id/rotate"
    android:layout_gravity="center"
    android:onClick="ii"/>
<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="powered by ashwani"
    android:textColor="#00ff10"
    android:textStyle="bold"
    android:layout_gravity="center"/>
<ImageView
    android:layout_width="50dp"
    android:layout_height="50dp"
    android:layout_gravity="center"
    android:id="@+id/ii"

    /> 
```

# xml - 两个简单的 [可能] 编码问题

> ID：10222734
> 
> 赞同：0
> 
> 时间：2012-04-19T06:29:18.973
> 
> 标签：xml, eclipse

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<EditText
    android:id="@+id/etNum"
    android:layout_width="wrap_content"
    android:layout_height="102dp"
    android:hint="@string/Please enter a department number." 
    android:inputType="number"
    />

    <EditText
    android:id="@+id/etName"
    android:layout_width="wrap_content"
    android:layout_height="102dp"
    android:hint="@string/Or enter a department name." 
    android:inputType="string"
    />

    <requestFocus />

</LinearLayout> 
```

** Q#1。在最后一行，我在这一行找到了多个注释： - 错误：解析 XML 时出错：标签不匹配 - 此文本字段未指定 inputType 或提示。不知道该怎么办？**

```
package walmart.namespace;

import android.R;
import android.R.string;
import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;

public class WalmartActivity extends Activity {
/** Called when the activity is first created. */

int department;
String name;
Button search;
TextView display;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main); 
```

**q#2：对于 R.Layout.main，我有“main 无法解析或不是字段”。我知道我不应该在导入中使用 import android.R，但它至少摆脱了 R 的问题。关于如何解决这个问题的任何想法？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T06:46:56.753

对于第一个问题，该行看起来应该放在您想要关注的任何 EditText 区域内；将它移到 inputType 行之一之后，看看是否有帮助。

其次，我不确定代码片段是否已被截断，因此这可能不是问题，但看起来您缺少用于关闭 onCreate 的花括号。

# sql-server - SQL 查询的 LINQ 版本

> ID：10222741
> 
> 赞同：0
> 
> 时间：2012-04-19T06:30:03.183
> 
> 标签：sql-server, linq, entity-framework, linq-to-sql, tagging

我有以下表格：

```
Monster:  
Name     Description              EatsPeople 
Vampire  Pale, afraid of light    True 
Ghost    See-through, annoying    False 
Wraith   Green-ish, ugly, dumb    True 

TagLookup: 
Name    ID 
Ghost   1 
Ghost   2 
Wraith  1 

Tags: 
ID    Text                      Value 
1     Green                     green-skin 
2     Screams like a banshee    banshee-call 
```

要查询具有绿色皮肤标签的怪物，我使用以下 SQL 查询：

```
SELECT m.Name, m.Description, m.EatsPeople 
  FROM dbo.Monster AS m 
  INNER JOIN dbo.TagLookup AS tl 
    ON m.Name = tl.Name 
  INNER JOIN dbo.Tags AS t 
    ON t.ID = tl.ID 
    AND t.Value = 'green-skin'; 
```

正如您所期望的那样，这工作得很好而且很花哨，但是我在使用这个查询的 LINQ 版本时遇到了问题。我试过 LinqPad 没有运气 + 搜索 Bing + Stackoverflow 运气不太好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T06:35:01.753

这将导致相同的结果`join`：

```
var result=(
    from m in db.Moster
    join tl in db.TagLookup
        on tl.Name equals tl.Name
    from t in db.Tags.Where(x=>x.ID==tl.ID && x.Value = "green-skin")
    select new
    {
        m.Name, 
        m.Description, 
        m.EatsPeople 
    }); 
```

或者你也可以这样做。这将导致相同的结果：

```
var result=(
    from m in db.Moster
    join tl in db.TagLookup
        on tl.Name equals tl.Name
    join t in db.Tags
        on tl.ID equals t.ID
    where
        t.Value = "green-skin"
    select new
    {
        m.Name, 
        m.Description, 
        m.EatsPeople 
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T06:35:35.090

试试这个：

```
 var a = from m in Monsters
            join tl in TagLookup  
                on m.Name equals tl.Name  
            join t in Tags
                on t.ID = tl.ID  
            where t.Value = 'green-skin';
            select new 
            {
                 m.Name, 
                 m.Description, 
                 m.EatsPeople  
            }; 
```

# python - 一对多 GQL 查询并将结果放入字典

> ID：10222742
> 
> 赞同：0
> 
> 时间：2012-04-19T06:30:12.167
> 
> 标签：python, google-app-engine, one-to-many, gql

我有一个名为`Main`.

```
class Main(db.Model):
  name = db.StringProperty()
  phone = db.StringProperty() 
```

还有另一个通过一对多关系`Photo`引用的数据库。`Main`

```
class Photo(db.Model):
  main = db.ReferenceProperty(Main,collection_name='photos')
  photo1 = db.StringProperty()
  photo2 = db.StringProperty() 
```

我想知道是否有人知道如何根据以下查询`Main`（示例如下）制作字典：

```
class Name(webapp.RequestHandler):
  def get(self):
    names = db.GqlQuery('SELECT * FROM Main WHERE name=:1 LIMIT 1','Alan')
    values = {'names':names}
    self.response.out.write(template.render('base.html', values)) 
```

所以上面查询的目标是找到名字'Alan'。我不知道该怎么做的查询的目标应该是检索`photo1`and `photo2`(when name='Alan') in the`class Photo`并将其放入字典中。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T07:26:21.883

使用您提供的信息来确定您想要实现的目标有点困难。也许你可以进一步澄清。但是现在，这就是你的意思吗？

```
class Name(webapp.RequestHandler):
  def get(self):
    names = db.GqlQuery('SELECT * FROM Main WHERE name=:1 LIMIT 1','Alan')
    photo_array = [] #initialize an array to store the photos dicts
    for name in names:
      for photos in name.photos: #go over all the Photo entities that reference 'Alan'
        #retrieve and put in a dictionary, and append to the photo_array
        photo_array.append({"photo1":photos.photo1, "photo2": photos.photo2})
    values = {'names':names, 'photos': photo_array}
    self.response.out.write(template.render('base.html', values)) 
```

# javascript - jQuery 插件如何维护全局状态？

> ID：10222743
> 
> 赞同：3
> 
> 时间：2012-04-19T06:30:12.917
> 
> 标签：javascript, jquery, jquery-plugins

我最近编写了我的第一个简单的 jQuery 插件。我很自豪。

[http://jsfiddle.net/johnhoffman/wSeLY/1/](http://jsfiddle.net/johnhoffman/wSeLY/1/)

```
(function($) {
    $.fn.makeRed = function() {
        return this.each(function() {
            $(this).css("color", "#f00");
        });
    }
})(jQuery); 
```

我想知道为什么它会起作用。我将 jQuery 对象传递给这个立即运行的封闭函数。

随后，是不是 |$| 对象是该匿名函数中的局部变量？它如何改变全局单例 jQuery 对象？

换句话说，我不只是向`$.fn.myFunctionName`对象 |$|添加一个函数吗？封闭函数的本地？它如何更改全局 jQuery 对象并使我的函数 ( `makeRed`) 可用于整个脚本的全局范围内的选择器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T06:43:15.480

Javascript 中的对象是通过引用传递的，因此函数中的任何更新都在 jQuery 对象上维护。您只是通过名称来指代它`$`。

我强烈建议您阅读：[Javascript：](http://www.amazon.co.uk/JavaScript-Good-Parts-Douglas-Crockford/dp/0596517742)它解释了这一切。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T06:45:04.820

> 不是|$| 对象是该匿名函数中的局部变量？

是的，`$`是函数中的局部变量但是，这是一个很大的但是，它是对`jQuery`全局可访问的对象的引用。事情看起来像这样：

```
window.jQuery (global) ----->-----> { ... }
                                    ^
                                    |
$ (local) ------------------>-------+ 
```

因此，您有两个变量指向同一个对象，并且在调用匿名函数后该对象仍然存在。

# javascript - 如何让 XSLT Javascript 扩展函数返回节点集？

> ID：10222750
> 
> 赞同：2
> 
> 时间：2012-04-19T06:30:40.580
> 
> 标签：javascript, xslt, xslt-1.0, exslt, node-set

有没有一种简单的方法可以让用 javascript 编写的 XSLT 1.0 中的扩展函数返回一个节点集？
我可以为此创建一个新的 java 类，但我宁愿在脚本本身中添加一些代码。
当这可以用所有或大多数 XSLT 处理器支持的另一种脚本语言（VB 脚本？Groovy？C#？）来完成时，当然也可以。

我有以下简单的脚本：

```
<msxsl:script language="JScript" implements-prefix="custom">
    function xml (input) {
        var x = input.split(";");
        return x.toString();
    }
</msxsl:script> 
```

它返回一个字符串，因此在 Xpath 表达式中调用该函数没有问题。
我想要的是一个节点集的结果。但是当我将脚本更改为

```
<msxsl:script language="JScript" implements-prefix="custom">
    function xml (input) {
        var x = input.split(";");
        return x;
    }
</msxsl:script> 
```

然后调用该函数会出错，因为数组不会自动转换为节点集。

我查看了[arrays-with-java-xslt-extensions](https://stackoverflow.com/questions/4920633/arrays-with-java-xslt-extensions)，但这更多的是为此创建一个新类，我现在希望避免。

那么应该将哪些语句添加到脚本中以便将数组转换为节点集，从而允许在 Xpath 表达式中使用函数调用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T10:06:12.990

[这是一个](http://home.arcor.de/martin.honnen/xslt/test2012041901.xml)应该与 MSXML 6 一起使用的示例，只要在允许 XSLT 中的脚本实现扩展功能的模式下运行。样式表代码如下：

```
<xsl:stylesheet
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  version="1.0"
  xmlns:ms="urn:schemas-microsoft-com:xslt"
  xmlns:my="http://example.com/my"
  exclude-result-prefixes="ms my">

  <xsl:output method="html" version="5.0"/>

  <ms:script language="JScript" implements-prefix="my">
  <![CDATA[
  function tokenize (input) {
    var doc = new ActiveXObject('Msxml2.DOMDocument.6.0');
    var fragment = doc.createDocumentFragment();
    var tokens = input.split(';');
    for (var i = 0, l = tokens.length; i < l; i++)
    {
      var item = doc.createElement('item');
      item.text = tokens[i];
      fragment.appendChild(item);
    }
    return fragment.selectNodes('item');
  }
  ]]>
  </ms:script>

  <xsl:template match="/">
    <html>
      <head>
        <title>Example</title>
      </head>
      <body>
        <h1>Example</h1>
        <ul>
          <xsl:apply-templates select="my:tokenize('Kibology;for;all')"/>
        </ul>
      </body>
    </html>
   </xsl:template>

   <xsl:template match="item">
     <li>
       <xsl:value-of select="."/>
     </li>
   </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T08:27:01.050

如果要返回节点，则必须使用 DOM 接口自己创建节点。我怀疑（从记忆中）如果你从你的 javascript 函数返回一个 DOM NodeList 它将被调用 XPath 代码视为一个 XPath 节点集 - 尽管你必须仔细检查规范以获取有关如何重复节点和文档顺序的详细信息被处理。

任何关于 XSLT java 或 javascript 扩展的问题都需要说明你在谈论什么产品，因为这里没有标准。

# database - 如何通过 MVC 3 和 EF 代码优先进行批量插入

> ID：10222752
> 
> 赞同：0
> 
> 时间：2012-04-19T06:30:51.457
> 
> 标签：database, asp.net-mvc-3, entity-framework-4, sql-server-express

我正在尝试建立一个员工考勤表。
这是我的`AttendanceModel`

```
public class AttendanceModel 
{
    //Primary Key and auto-generated field for this model
    public int AttendanceID { get; set; }

    public DateTime AttendanceDate { get; set; }

    //Present/Absent status
    public bool Status { get; set;}

    //Primary key of Employee Model
    public int EmployeeID { get; set; }

    //Reference to Employee Model
    public Employee Employee { get; set; }

} 
```

现在我想让这个模型制作一个`View`包含`employeeId(Hidden field)`、员工姓名和出勤复选框。
**我的问题是（第 3 天编辑）**

1.  我是否必须为此视图使用不同的 ViewModel
2.  如何将信息从`view`实体插入并最终插入数据库，因为它需要在数据库中插入多行（即批处理）
3.  我也没有得到如何从视图中检索信息以进行处理

任何建议都是可观的。:)
提前致谢！！！
**编辑（我尝试过的） ** 1\. 我创建了另一个类，其中包含除对模型类的引用之外的`AttendanceViewModel`所有字段。然后在我渲染它。在控制器中，参数是并从中填充出勤模型。这是代码。 `AttendanceModel``Employee``view``IEnumerable<AttendanceViewModel>`

```
public ActionResult Index()
    {            
        var EmployeeAttendance = from s in new EmployeeDBContext().Employees
                                select new AttendanceViewModel
                                {
                                    EmployeeID = s.EmployeeID
                                };
        return View(EmployeeAttendance.ToList());
    } 
```

保存记录的控制器动作是

```
 [HttpPost]
    public ActionResult SaveAttendance(IEnumerable<AttendanceViewModel> attendancess)    // argument of SaveAttendance is always `null`
    {

            if (ModelState.IsValid)
            {
                var _context = new EmployeeDBContext();

                foreach (var a in attendancess)
                {
                    var newAttendance = new AttendanceModel
                    {
                        EmployeeID = a.EmployeeID,
                        AttendanceStatus = a.Status
                    };

                    _context.Attendance.Add(newAttendance);

                }
                _context.SaveChanges();
            }
           //Rest of code 
```

但它不起作用的论点总是`null`:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T06:36:46.883

如果您想从视图向控制器发送附加信息，您必须将值设置为隐藏的输入字段，例如employeeId。或者，您可以通过添加到 Session 对象将附加属性存储在侧内存中。

`List<int> CheckedEmpIds`您必须在 ViewModel中使用属性。并在视图中将employeeId 的值设置为复选框值。

```
<input type="checkbox" name="CheckedEmpIds" value="@Model.Employee.Id" /> 
```

当您提交表单时，您可以获得已检查的员工 ID。

# iphone - MPMoviePlayerController 在 ios5 设备中不起作用

> ID：10222756
> 
> 赞同：0
> 
> 时间：2012-04-19T06:31:14.260
> 
> 标签：iphone, objective-c, ios

MPMoviePlayerController 在 ios4.3 设备中完美运行。相同的代码在 ios5.0 设备中不工作。它只显示黑屏。这是代码。提前谢谢..

```
MPMoviePlayerController *player=[[MPMoviePlayerController alloc] initWithContentURL: mediaUrl ];

player.controlStyle = MPMovieControlStyleFullscreen;

[player.view setFrame: self.view.bounds];  

self.player_=player;

[player release],player = nil;

[self.view addSubview:player_.view];

[player_ prepareToPlay];

[player_ play]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T10:22:12.787

试试这个，这将在 ios 5 中工作 昨天只有我尝试它工作得很好。

```
 -(IBAction)playVideo:(id)sender
{
   NSURL *url = [NSURL URLWithString:@"http://www.ebookfrenzy.com/ios_book/movie/movie.mov"];

   MPMoviePlayerController *moviePlayer = [[MPMoviePlayerController alloc] initWithContentURL:url];
  // NSURL *url=[NSURL URLWithString:@""];
  // MPMoviePlayerController *moviePlayer=[[MPMoviePlayerController alloc]initWithContentURL:url];
  [[NSNotificationCenter defaultCenter]addObserver:self selector:@selector(moviePlayBackDidFinish:) name:MPMoviePlayerPlaybackDidFinishNotification object:moviePlayer];
  moviePlayer.controlStyle=MPMovieControlStyleDefault;
  moviePlayer.shouldAutoplay=YES;
  [self.view addSubview:moviePlayer.view];
  [moviePlayer setFullscreen:YES animated:YES];

}
-(void)moviePlayBackDidFinish:(NSNotification *)notification
 {
  MPMoviePlayerController *moviePlayer=[notification object];
  [[NSNotificationCenter defaultCenter]removeObserver:self name:MPMoviePlayerPlaybackDidFinishNotification object:moviePlayer];
  if([moviePlayer respondsToSelector:@selector(setFullscreen:animated:)])
    {
        [moviePlayer.view removeFromSuperview];
    }
  [moviePlayer release];
 } 
```

# qtp - QTP 在重新排序期间识别 webtable。但是，当在对象存储库中定义了类似的属性时，无法识别表

> ID：10222761
> 
> 赞同：1
> 
> 时间：2012-04-19T06:31:36.863
> 
> 标签：qtp

嗨，我正在使用下面的代码来测试我的网页。

```
ExecuteFile "H:\Asma\wp_CommonFunctions.vbs"

Set Brw_Composer = CreateObjectDescription("name:=Composer - Test Accounts")
Set Page_Composer = CreateObjectDescription("title:=Composer.*,url:=http://sharepoint.btfin.com.*")
Set tbl_Composer_HostBrand = CreateObjectDescription("html tag:=TABLE,Value:=36,text:=Host Brand.*,Enable Smart Identification:=True,rows:=16")
Set tbl_Composer_Environments = CreateObjectDescription("html tag:=TABLE,Value:=32")

BT_SVP_Path= "http://sharepoint.btfin.com/it/simt/home/environments%20tech/Composer/Test%
SystemUtil.Run BT_SVP_Path

' Get the value of CAN  under 
cellValue=Browser("Composer - Test Accounts").Page("Composer - Test Accounts").WebTable("Host Brand").GetCellData(12,4)

'Open SVP ACC2 Ingress link
'Set obj = Browser(Brw_Composer).Page(Page_Composer).Webtable(tbl_Composer_Environments)
If  (Browser(Brw_Composer).Page(Page_Composer).Webtable(tbl_Composer_Environments)).Exist Then
    msgbox" success"
else 
    msgbox "failure"
End If
'****************************************************************** 
Function CreateObjectDescription(StrProperties)
    Dim objDescription 
    Dim ObjArr 
    Dim PropCount
    Dim ObjProperty
    Set objDescription=Description.Create 
    ObjArr=split(StrProperties,",") 
    For PropCount=0 to ubound(ObjArr) 
        ObjProperty=split(ObjArr(PropCount),":=")
        objDescription(ObjProperty(0)).value=ObjProperty(1) 
    Next 
    Set CreateObjectDescription=objDescription
End Function 
```

如果在运行时指定了 Webtables 的属性，则不会在运行时识别它们。如果我将它们的属性添加到对象存储库中，则代码可以正常工作。请帮忙。我正在使用 IE 6 来测试我的 webapp。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T07:26:44.343

对象存储库 (OR) 描述和描述性编程 (DP) 之间的主要区别在于 OR 在默认情况下是非正则表达式，而 DP 是正则表达式。

这可能是导致行为差异的原因，如果是这种情况，只需添加

```
objDescription(ObjProperty(0)).RegularExpression = False 
```

另一个区别可能与 OR 有时使用的隐藏属性有关。为了查看这是否是原因，请转到`Tools -> Options -> Web -> Advanced`并取消选中*Run using source index*（如果您使用的是 QTP11，还*可以使用自动 XPath 标识符学习和运行*）。现在看看 OR 的识别是否仍然有效。

如果 OR 和 DP 之间的行为仍然不同，则您的标识属性可能有所不同。

# iphone - 如何将文本添加到 UILabel 背景图像

> ID：10222762
> 
> 赞同：0
> 
> 时间：2012-04-19T06:31:43.070
> 
> 标签：iphone

我正在开发一个应用程序。其中我将图像添加为 UIlabel 的背景。之后我为 UILabel 提供文本。但它不显示文本。所以请告诉我如何显示带有背景图像的标签文本. 下面的一个是将图像设置为背景的代码。

```
 UIImage *ansimage=[UIImage imageNamed:@"AnswerBox_standard.png"];
  UILabel *a1=[UILabel alloc]init];
  a1.frame=CGRectMake(10, 160, ansimage.size.width, ansimage.size.height);
   a1.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"AnswerBox_standard.png"]]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T06:44:14.713

在标签视图后面放置另一个图像视图，希望能解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T08:30:52.337

您可以添加这样一个上面有文本的图像，您想在该标签上显示该图像。或者您可以先添加imageview，然后在其上添加标签，但请确保将标签的背景颜色设置为[UIColor clearcolor]。

# c# - 位图在面板中未正确对齐

> ID：10222774
> 
> 赞同：1
> 
> 时间：2012-04-19T06:32:45.497
> 
> 标签：c#, winforms

我在 Google 上搜索了很长时间，似乎找不到解决问题的方法。

问题在于将位图绘制到面板上。由于某种奇怪的原因，整个位图似乎向面板的左上角偏移。这在构建地图时会让人感到困惑。作为一个额外的说明，位图被绘制在一个比它本身更大的面板上。（例如 bitmap.dimensions == 64x64 和 panel.dimensions == 512x512）。

```
 private void redrawCityPanel()
    {
        Image cityImage = this.cityBitmap;

        Graphics panel_CityGraphics = this.panel_City.CreateGraphics();
        panel_CityGraphics.Clear(this.panel_City.BackColor);
        panel_CityGraphics.InterpolationMode = InterpolationMode.NearestNeighbor;
        panel_CityGraphics.DrawImage(cityImage, panel_City.DisplayRectangle);
    } 
```

很抱歉造成混乱。我会发布图片，但我没有获得足够的积分。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T21:45:15.483

我需要做的就是设置像素偏移模式。

```
private void redrawCityPanel()
{
    Image cityImage = this.cityBitmap;

    Graphics panel_CityGraphics = this.panel_City.CreateGraphics();
    panel_CityGraphics.Clear(this.panel_City.BackColor);
    panel_CityGraphics.InterpolationMode = InterpolationMode.NearestNeighbor;

    panel_CityGraphics.PixelOffsetMode = PixelOffsetMode.Half; //Added

    panel_CityGraphics.DrawImage(cityImage, panel_City.DisplayRectangle);
} 
```

# javascript - 禁用谷歌地图以供选择

> ID：10222775
> 
> 赞同：0
> 
> 时间：2012-04-19T06:32:48.710
> 
> 标签：javascript, asp.net, google-maps, google-maps-api-3

我在 asp.net 应用程序中使用谷歌地图 v3。它工作正常。虽然我想要的是当用户选择特定并按下页面上的操作按钮时，我希望禁用地图以供选择。

我尝试禁用地图所在的封闭div，但它不起作用。

这是我的谷歌地图代码

例如：

```
<div id="map_canvas" clientidmode="Static" runat="server" 
style="height: 500px; width:   802px;
z-index: 0;">
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T21:26:52.267

如果像上面的 lu1s 评论那样使用 setOptions 还不够，我建议创建一个覆盖 div 来覆盖地图窗格的范围，这与 jquery 的模态对话框插件等工作方式大致相同。当您不希望地图处于活动状态时，只需显示叠加层。它将捕获任何用户交互而不是地图本身。

# sql - 提高非聚集索引查找的性能

> ID：10222781
> 
> 赞同：19
> 
> 时间：2012-04-19T06:33:18.503
> 
> 标签：sql, sql-server

我有一个查询，其中索引查找（非聚集）需要更多时间，大约占总执行时间的 93%。

查询的执行计划，index seek的估计行数是1，实际行数是209。这是否是问题所在？

如何提高非聚集索引查找的性能。一个通用的答案会有所帮助。

执行计划： ![在此处输入图像描述](../Images/651c80d44ee134a6e68b75c43a6a287d.png)

以下是查询，

```
SELECT TOP 11 DVPR1.IncidentID, DVPR2.IncidentID, Rel.ID, PER1.[LastName], PER1.[FirstName]
FROM 
  DV_PHPersonalRecord DVPR1 
INNER JOIN Relationship Rel 
  ON  Rel.source_Id = DVPR1.RowId 
  AND Rel.typeCode = 'RPLC'
INNER JOIN DV_PHPersonalRecord DVPR2 
  ON  DVPR2.RowId = Rel.target_Id
INNER JOIN [T_Attribute] (nolock) 
  ON  [T_Attribute].[ActRelationship_ID] = Rel.[ID] 
  AND [T_Attribute].[name] = 'MergeFlag' 
  AND ( [T_Attribute].[valueString_Code] = 'pending')
INNER JOIN [Person] PER1 (nolock) 
  ON  DVPR1.[PersonDR]=PER1.[RowID]
INNER JOIN [Person] PER2 (nolock) 
  ON  DVPR2.[PersonDR]=PER2.[RowID]
WHERE 
    DVPR1.TypeDR = 718990 
  AND
    (PER1.[Code_ID] IS NULL OR ( PER1.[Code_ID] = '6516' 
                             AND PER1.[OptionsCode_ID] = '6522')
    )
  AND 
    ( PER2.[Code_ID] IS NULL OR ( PER2.[Code_ID] = '6516' 
                              AND PER2.[OptionsCode_ID] = '6522')
    )
ORDER BY PER1.[LastName] ASC,
        PER1.[FirstName] ASC 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-19T07:23:53.017

当我看到预期行和实际行之间存在这种差异时，我会首先查看更新所有相关表的统计信息。

查询优化器应该自动执行此操作，但是……有时它会带来好处。

这通常需要 DBA 类型的权限。

查看有关更新统计信息的 Microsoft 页面。

[http://msdn.microsoft.com/en-us/library/ms187348.aspx](http://msdn.microsoft.com/en-us/library/ms187348.aspx)

# c# - ZedGraph 用图表线平滑移动 Y2Axis

> ID：10222782
> 
> 赞同：2
> 
> 时间：2012-04-19T06:33:26.107
> 
> 标签：c#, customization, zedgraph

在我的问题[“ZedGraph custom graph”](https://stackoverflow.com/questions/10172001/zedgraph-custom-graph)之后，我每秒钟插入一次数据都有图表，现在我还有其他问题：

1.  如何使用图表线平滑地向下移动 Y2Axis（DateTime 类型）并在图表中始终显示仅持续 30 分钟？

2.  如何格式化 Y2Axis 标签“HH:mm”以获得 10:05、10:10、10:15、...、10:30？

感谢帮助！

**UPD1**：谢谢kmp！我试试你的代码 - 它很好，但有问题：当我开始时我看到这个： ![在此处输入图像描述](../Images/3547cdfb5dba7b2e0d758afbb8fbf83a.png) 几分钟后我看到这张图片： ![在此处输入图像描述](../Images/fb0f05a053db8c83aa90cbd8da19fa9d.png)

我有一个图表区域的“压缩”，但我希望静态显示总是持续 30 分钟并慢慢向下移动旧数据，而不是缩放或“打包”图表与轴。我希望你能理解我。

**UPD2**：还有另一个问题 - Y2Axis 的标签没有固定值。例如现在： ![在此处输入图像描述](../Images/add8077bfc5d2c61b7b6fb4937e21b9e.png)

几秒钟后： ![在此处输入图像描述](../Images/854514e9a2111d33388d89396ab746cb.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T10:07:13.637

从最简单的开始 - 格式化标签可以这样完成：

```
myPane.Y2Axis.Scale.Format = "HH:mm"; 
```

你可以做到这一点的一种方法（感觉有点不稳定，但我会让你决定）是一旦超过你的阈值（在这种情况下超过 30 分钟），就简单地从曲线中删除这些点。这样，当图表重绘时，轴将相应更新。

我觉得采用 scale min 值可能是比这更好的方法，但是如果您无法像这样添加点时简单地维护一个队列，然后在它们超出您的阈值时将它们删除：

```
private Queue<DateTime> axisTimes;

private static readonly Random rnd = new Random();

private void button1_Click(object sender, EventArgs e)
{
    GraphPane myPane = zg1.GraphPane;

    myPane.XAxis.IsVisible = false;

    myPane.X2Axis.IsVisible = true;
    myPane.X2Axis.MajorGrid.IsVisible = true;
    myPane.X2Axis.Scale.Min = 0;
    myPane.X2Axis.Scale.Max = 600;

    myPane.YAxis.IsVisible = false;

    myPane.Y2Axis.IsVisible = true;
    myPane.Y2Axis.Scale.MajorUnit = DateUnit.Minute;
    myPane.Y2Axis.Scale.MinorUnit = DateUnit.Second;
    myPane.Y2Axis.Scale.Format = "HH:mm";
    myPane.Y2Axis.Type = AxisType.DateAsOrdinal;

    LineItem myCurve = myPane.AddCurve("Alpha",
                                  new PointPairList(),
                                  Color.Red,
                                  SymbolType.None);

    myCurve.Symbol.Fill = new Fill(Color.White);
    myCurve.IsX2Axis = true;
    myCurve.IsY2Axis = true;

    myPane.Chart.Fill = new Fill(Color.White, Color.LightGray, 45.0f);
    zg1.IsShowPointValues = true;

    axisTimes = new Queue<DateTime>();

    var t = new System.Windows.Forms.Timer();
    t.Interval = 1000;
    t.Tick += ShowData;

    Thread.Sleep(100);

    t.Start();
}

private void ShowData(object sender, EventArgs e)
{
    var t = (System.Windows.Forms.Timer) sender;
    t.Enabled = false;

    int x = rnd.Next(500, 600);
    var y = new XDate(DateTime.Now);

    var myCurve = zg1.GraphPane.CurveList[0];

    if (axisTimes.Any())
    {             
        // Remove any points that go beyond our time threshold
        while ((((DateTime)y) - axisTimes.Peek()).TotalMinutes > 30)
        {
            myCurve.RemovePoint(0);
            axisTimes.Dequeue();

            if (!axisTimes.Any())
            {
                break;
            }
        }
    }

    // Add the new point and store the datetime that it was added in
    // our own queue
    axisTimes.Enqueue(y);
    myCurve.AddPoint(x, y);

    zg1.AxisChange();
    zg1.Invalidate();

    t.Enabled = true;
} 
```

# c# - 通过直接传递获取属性名称和类型

> ID：10222783
> 
> 赞同：1
> 
> 时间：2012-04-19T06:33:39.920
> 
> 标签：c#, c#-4.0, properties

[我在这里](https://stackoverflow.com/questions/10205427/get-the-instance-name-of-the-object-no-the-object-type-name-in-c-sharp-4-0)和[这里](https://stackoverflow.com/questions/10205026/pass-property-to-the-method-in-c-sharp)问过类似的问题

这是一个示例类型：

```
 public class Product {

    public string Name { get; set; }
    public string Title { get; set; }
    public string Category { get; set; }
    public bool IsAllowed { get; set; }

} 
```

我有一个需要属性来生成一些 HTML 代码的通用类：

```
public class Generator<T> {

    public T MainType { get; set; }
    public List<string> SelectedProperties { get; set; }

    public string Generate() {

        Dictionary<string, PropertyInfo> props;
        props = typeof(T)
                .GetProperties()
                .ToDictionary<PropertyInfo, string>(prop => prop.Name);

        Type propType = null;
        string propName = "";
        foreach(string item in SelectedProperties) {
            if(props.Keys.Contains(item)) {
                propType = props[item].PropertyType;
                propName = item;

                // Generate Html by propName & propType
            }
        } 
```

我使用这种类型如下：

```
Product pr = new Product();
Generator<Product> GT = new Generator<Product>();
GT.MainType = pr;
GT.SelectedProperties = new List<string> { "Title", "IsAllowed" };

GT.Generate(); 
```

所以我认为这个过程应该更简单，但我不知道如何实现它，我认为将属性传递给生成器更简单，类似于以下伪代码：

```
GT.SelectedProperties.Add(pr.Title);
GT.SelectedProperties.Add(pr.IsAllowed); 
```

我不知道这是否可能，我只需要两件事 1-PropertyName like: `IsAllowed`2- property type like : `bool`。也许不需要通过`MainType`我用它来获取属性类型，所以如果我可以像上面那样处理就不再需要它了。

你对实施这样的事情有什么建议？

有没有更好的方法来做到这一点？

**更新**

如前所述`ArsenMkrt`，我发现可以使用`MemberExpression`但无法获取属性类型，我在调试中看到属性类型见图：

![在此处输入图像描述](../Images/99d0809e0972b9550f17657ade0088db.png)

那么如何获取属性类型呢？

我在[这里](https://stackoverflow.com/questions/10224119/get-property-type-by-memberexpression)找到了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T06:39:38.363

您可以使用[表达式树](http://neutrongenious.wordpress.com/2009/05/28/how-to-get-property-name-using-expression-tree/)，而不是您的代码看起来像这样

```
GT.SelectedProperties.Add(p=>p.Title);
GT.SelectedProperties.Add(p=>p.IsAllowed); 
```

您将需要为 SelectedProperties 创建从 List 派生的自定义集合类并创建像这样的 add 方法

```
 //where T is the type of your class
   public string Add<TProp>(Expression<Func<T, TProp>> expression)
   {
        var body = expression.Body as MemberExpression;
        if (body == null) 
            throw new ArgumentException("'expression' should be a member expression");
        //Call List Add method with property name
        Add(body.Member.Name);
   } 
```

希望这可以帮助

# sql - PHPMyAdmin 无法执行查询，没有响应

> ID：10222785
> 
> 赞同：0
> 
> 时间：2012-04-19T06:33:53.747
> 
> 标签：sql, database, phpmyadmin

在我的表中，我有大约 300,000 条记录。有时我在 PHPMyAdmin 中进行查询，它什么也没做。没有错误或没有显示表格记录。我不确定是我的表太大还是配置问题。我尝试在 PHPMyAdmin 中使用“搜索”，但它仍然没有响应。

我试图运行这个查询，但它没有做任何事情：

```
UPDATE `openhourz`.`ohz_business` 
SET `catConvert` = 1 AND `main_category_id` = '18' 
    AND `sub_category_id` = '248' 
WHERE `ohz_business`.`categories` ='Japanese, Noodles'; 
```

帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T07:17:34.103

一定是这样的：

```
update mytable set mycolumn1='data 1',mycolumn2='data 2' where name='john' 
```

所以 2 列之间的分隔符`,`不是`and`.

希望这对您的问题有用。

# iphone - fmdb 在运行 UPDATE-query 时锁定应用程序

> ID：10222787
> 
> 赞同：0
> 
> 时间：2012-04-19T06:34:05.837
> 
> 标签：iphone, ios, sqlite, mobile, fmdb

我在使用 fmdb 执行 UPDATE 查询时遇到问题。它锁定应用程序而没有任何错误。

它停在这一行：

```
[db executeUpdate:@"UPDATE categories SET number_places = 21 WHERE id = 44"]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T17:38:45.073

你的其他线程在做什么？如果您在多个线程中使用 fmdb，您应该检查 FMDatabaseQueue，并使用它来代替直接使用 FMDatabase。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T19:56:31.240

我遇到了类似的情况，无法弄清楚为什么我的应用程序被锁定了。

进一步调查得出的结论是，我在之前的方法调用中打开了 FMDatabase 连接。

一旦我关闭连接并使用新连接执行新查询，一切正常。

# python - 行缓冲串行输入

> ID：10222788
> 
> 赞同：7
> 
> 时间：2012-04-19T06:34:09.567
> 
> 标签：python, io, serial-port

我有一个串行设备，我正在尝试从中读取输入。我给它发送了一个字符串“ID\r”，它返回“ID XX\r”（其中\r 是ASCII 回车，十六进制0x0d）。

由于不再支持 serial.readline 上的 eol 选项，因此我使用 TextIOWrapper 从串行端口读取并一次返回一行。

我的问题是，它不是在看到回车后立即返回我的字符串，而是等到我打开串口时设置的超时时间的两倍。我希望它在读取整行后立即返回字符串，因为我可能有数百个这样的命令要发送到设备，而且我不想每次都等待超时。如果我将超时设置为 0，那么我根本不会得到任何输出（可能是因为我的脚本在设备有机会输出任何内容之前停止等待），如果我将超时设置为无，脚本将永远阻塞。

这是一个简单的测试脚本：

```
import serial
import io
import time

ser = serial.Serial("/dev/ttyUSB0", baudrate=9600,
                    bytesize=8, parity='N', stopbits=1,
                    xonxoff=0, rtscts=1, timeout=5)

sio = io.TextIOWrapper(io.BufferedRWPair(ser, ser),
                       newline=None)

sio.write(unicode("ID\r"))
sio.flush()

print "reading..."

x = sio.readline()

print len(x)
print x 
```

该脚本从它说“正在读取”到打印从串行端口读取的“ID XX”字符串总是需要 10 秒。

我确定设备正在输出回车，因为我使用 strace 来观看读取：

```
select(4, [3], [], [], {5, 0})          = 1 (in [3], left {4, 991704})
read(3, "I", 8192)                      = 1
select(4, [3], [], [], {5, 0})          = 1 (in [3], left {4, 999267})
read(3, "D", 8191)                      = 1
select(4, [3], [], [], {5, 0})          = 1 (in [3], left {4, 999420})
read(3, " ", 8190)                      = 1
select(4, [3], [], [], {5, 0})          = 1 (in [3], left {4, 999321})
read(3, "X", 8189)                      = 1
select(4, [3], [], [], {5, 0})          = 1 (in [3], left {4, 999355})
read(3, "X", 8188)                      = 1
select(4, [3], [], [], {5, 0})          = 1 (in [3], left {4, 999171})
read(3, "\r", 8187)                     = 1
select(4, [3], [], [], {5, 0})          = 0 (Timeout)
select(4, [3], [], [], {5, 0})          = 0 (Timeout) 
```

您可以看到导致 10 秒延迟的 2 个 select() 超时，但您也可以清楚地看到正在读取的回车。我尝试将换行参数设置为“无”和“”（应该自动允许 \r、\n 和 \r\n）和“\r”，但每次的结果都相同。

我还尝试将 BufferedRWPair() 调用中的 buffer_size 设置为“1”，以防止它缓冲输入，但这并没有什么区别。

知道我做错了什么吗？

如果我不能让这个工作，我的下一步将是使用 serial.read() 一次读取一个字符并做我自己的行缓冲，但我想尝试用 textiowrapper 以“正确”的方式来做第一的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-25T10:39:24.443

今天浪费了几个小时。事实证明，`io.BufferedReader`读取直到它填满了它的缓冲区，然后将缓冲区传递给`io.TextIOWrapper`. 默认缓冲区大小为 8192，因此根据您的设备，这可能需要一段时间。

正确的示例代码应该是：

```
# buffer size is 1 byte, so directly passed to TextIOWrapper
sio = io.TextIOWrapper(io.BufferedRWPair(ser, ser, 1), encoding='ascii')
print sio.readline()[:-1] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-01-12T02:20:22.140

警告：我在 Mac 上使用 Python 3.4，因此您的使用范围可能会有所不同，尽管我相信将 TextIOWrapper 向后移植到 Python 2.7，Python 2.7（和其他操作系统）中的情况与我在下面描述的情况基本相同。

主要问题是 io.TextIOWrapper 本身使用缓冲机制，由未记录的 _CHUNK_SIZE 属性控制。这很不愉快。所以你有两个选择：

1.  尝试使用超时。这是pyserial 文档页面上[readline文档中所暗示的内容。](http://pyserial.sourceforge.net/shortintro.html#readline)但是，如果您使用较大的值（如您所做的那样），当没有足够的数据来填充 TextIOWrapper 的缓冲区时，您的代码将阻塞，直到达到超时。这就是您本质上所经历的（我没有追究为什么您必须等待超时值的两倍，但我认为这可以通过查看 TextIOWrapper 的实现来解决，最终与您的问题无关）。
2.  第二种选择是将 _CHUNK_SIZE 更改为 1。在您的情况下，只需添加该行

    ```
    sio._CHUNK_SIZE = 1 
    ```

    初始化 sio 后立即添加到您的代码中。这可能会产生令人不快的效果，即 TextIOWrapper 本身的缓冲将被关闭（这用于输入的增量解码）。如果性能不是问题，这是最简单的解决方案。如果性能是一个问题，您可以设置一个较低的超时值，而不是影响 _CHUNK_SIZE。但是，在这种情况下，请准备从 readline() 获取一个空字符串（如果设备向您发送一个空行，它将作为 '\n' 出现，因此可以将它与您将获得的空字符串区分开来读取用完分配的时间）。

您的代码还有另一个问题：当 sio 将被删除时，ser 的 close 方法将被调用两次，这将导致您的程序即将完成时出现异常（至少如果我尝试您的代码时会发生这种情况在我的电脑上）。您应该（似乎）创建 serial.Serial 的实例并将它们传递给 BufferedRWPair。

我还创建了一个基于 TextIOWrapper 的包装器类，如果有兴趣，我也可以发布它，只是我不想用一些额外的代码乱扔响应，严格来说，这是不需要的。

PS：与此同时，我在 Ubuntu 上试验了代码。在我的 Mac 上，我认为不需要将 io.BufferedRWPair 的缓冲区大小设置为 1，但在 Ubuntu 上，除了将 _CHUNK_SIZE 设置为 1 之外，我还必须这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T07:08:41.743

如果没有实际看到它，这将很难调试。但是看看你是否可以使用我的 tty 模块。

[http://code.google.com/p/pycopia/source/browse/trunk/aid/pycopia/tty.py](http://code.google.com/p/pycopia/source/browse/trunk/aid/pycopia/tty.py)

尝试其中的 SerialPort 对象。我已经成功地使用它与串行仪器进行交互，其中“那个其他串行模块”有很多类似于你描述的问题。这也可以告诉您 FIFO 中是否有数据。

现在让我看看情况如何。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T14:37:19.867

感谢 Keith 的代码，但我想让这段代码有点可移植，所以我想坚持使用默认的“串行”包。

另外，由于我还在学习 Python，所以我想尝试学习如何以预期的方式使用 TextIOWrapper。

我放弃了尝试使 serial.readline() 工作，所以现在我将只使用一个简单的“readLine”函数一次读取一个字符并查找回车终止符。虽然如果我遇到更多的连续古怪，我可能会重新使用你的代码。

谢谢！

```
def readLine(ser):
    str = ""
    while 1:
        ch = ser.read()
        if(ch == '\r' or ch == ''):  
            break
        str += ch

    #"print "str = " + str

    return str 
```

# c# - 自定义 Linq 查询

> ID：10222791
> 
> 赞同：1
> 
> 时间：2012-04-19T06:34:23.480
> 
> 标签：c#, linq

我的收藏看起来像这样

![在此处输入图像描述](../Images/28e9ecc8a6841f03a24b82f01666419a.png)

我需要获取所有那些 Pick's SeqNo 大于其交付状态的订单号。业务规则是这些操作基于它们的 SeqNo 发生，并且在取货之前不应交付任何订单号。

在给定的示例中，我应该得到 2 号订单，因为它在取货之前交付。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T06:41:02.140

听起来你需要这样的东西 - 我已经分离出查询部分以使其更易于阅读：

```
var pickups = orders.Where(order => order.Status == Status.Pick);
var deliveries = orders.Where(order => order.Status == order.Deliver);
var query = from pickup in pickups
            join delivery in deliveries on pickup.OrderId equals delivery.OrderId
            where pickup.SeqNo > delivery.SeqNo
            select pickup.OrderId; 
```

# php - 如何从 Kohana 2.x 中的连接表中获取列

> ID：10222794
> 
> 赞同：1
> 
> 时间：2012-04-19T06:34:36.413
> 
> 标签：php, kohana, kohana-orm

我正在为我的项目使用 kohana 2.x，我有以下查询

```
 $result = ORM::factory('table1')
                        ->join('table2','table1.id','table2.id')
                        ->find_all(); 
```

使用上面的查询我可以从 table1 中获取数据，但我也需要从 table2 中获取数据。当我这样给出时

```
$result->table2_column_name; 
```

它显示错误，我如何从 table2 中获取数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T06:47:59.653

您的声明既不是 ORM 也不是 Active Record。如果您有一个`Table1_Model`扩展`ORM`类的类，那么您可以使用`ORM::factory('table1');`Table2 也需要几乎相同的东西。并且对于每个类都应该声明关系。^([ORM 入门](http://docs.kohanaphp.com/libraries/orm/starting))

结果模型将是，

```
class Table1_Model extends ORM {
    protected $has_one = array('table2');
}

class Table2_Model extends ORM {
    protected $has_one = array('table1');
} 
```

现在可以这样查询了，

```
$result = ORM::factory('table1', 1);
echo $result->table1_column_name;
echo $result->table2->table2_column_name; 
```

# javascript - 如何在 HTML 中单击时隐藏或显示 div

> ID：10222797
> 
> 赞同：0
> 
> 时间：2012-04-19T06:34:41.017
> 
> 标签：javascript, html

我有四个 HTML`div`我想显示并在单击时隐藏它们 如何执行此操作

```
 <div id="targetid" class="image_one"><img src="image/imageone.png"/></div>
            <div id ="targetidone "class="image_two"><img src="image/imagetwo.png"/></div>
            <div id="targetidtwo" class="image_one_one"><img src="image/pagetwo_graph_two_11.png"/></div>
            <div id ="targetidfour"class="image_two_two"><img src="image/pagetwo_graph_two_22.png"/></div> 
```

以下是`div`单击上面的图像后应该隐藏和显示的那两个

```
 <div class="option_image"><img src="image/option_1.png"/></div>

          <div class="option_image_one"><img src="image/option_1.png"/></div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T06:42:57.373

如果您不使用任何 3rd 方 javascript（例如：jQuery），请使用它：

```
document.getElementById('target-id').style.display = 'none'; // hide it
document.getElementById('target-id').style.display = 'block'; // show it (for block element, eg: div)
document.getElementById('target-id').style.display = 'inline'; // show it (for inline element, eg: span) 
```

示例（1）：

```
<div id="target-id">hello workd</div> <!-- attribute: id -->
<a href="#" onclick="document.getElementById('target-id').style.display = 'none'; return false;">hide it</a> 
<a href="#" onclick="document.getElementById('target-id').style.display = 'block'; return false;">show it</a> 
```

示例（2）：

```
<div id="targetid" class="image_one" onclick="document.getElementById('targetid').style.display = 'none';"><img src="image/imageone.png"/></div> <!-- adding onclick to hide this element when you click it -->

<div class="option_image" onclick="document.getElementById('targetid').style.display = 'block';"><img src="image/option_1.png"/></div> <!-- adding onclick to show element #targetid when you click this --> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T06:41:05.553

```
$("buttonid").click(function () {
$("divid").toggle();
}); 
```

Buttonid - 您将单击的按钮的 ID Divid - 您需要显示/隐藏的 div 的 ID

注意：包含 jquery 脚本

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-23T18:45:22.407

正如 muhhamad alvin 所发布的，您可能想要反转显示的方式。所以，调整他的解决方案给了我这个结果：

它是如何运作的？

- 单击问题以显示答案，单击答案以隐藏答案（始终显示问题）。因此，只需将问题和答案替换为您自己的 div。

```
 <a href="#" onclick="document.getElementById('target-id').style.display = 'block'; return false;">Question</a>
<div id="target-id" style="display: none;"><a href="#" onclick="document.getElementById('target-id').style.display = 'none'; return false;">Answer</a> </div> <!-- attribute: id -->
```

编辑：需要注意的是，对于每个问题/答案对，您将需要一个不同的“目标 ID”。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-19T06:57:04.550

你可以试试这个：

$(".image_one").toggle();

上面的代码按类的名称获取元素。如果您在那里没有课程，您可以像这样通过 id 获取：

$("#image_one").toggle();

希望这有用

# objective-c - Segue 触发但屏幕不转换

> ID：10222798
> 
> 赞同：0
> 
> 时间：2012-04-19T06:34:48.343
> 
> 标签：objective-c, xcode, uistoryboard

使用故事板，我有一个视图控制器，它可以连接到另一个视图控制器。

我有两个 segues，一个来自按钮，一个来自视图控制器。

我想根据某些条件以编程方式触发视图控制器 segue，所以在我调用的第一个屏幕的 viewDidLoad 方法中

```
[self performSegueWithIdentifier:@"SkipName" sender:self]; 
```

使用调试器，我可以看到 prepareForSegue 被调用，但视图没有继续。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T14:39:07.147

把它放在 viewDidAppear 中就可以了，谢谢@danielbeard！

此外，要使用推送 segue，视图需要属于导航控制器。你不会得到任何错误，它只是不起作用。

# iphone - 如何解决 iTunes Connect 中的“元数据被拒绝”？

> ID：10222805
> 
> 赞同：0
> 
> 时间：2012-04-19T06:35:21.050
> 
> 标签：iphone, ios, app-store-connect

根据 Apple 审查指南，我的 iOS 应用程序处于“元数据被拒绝”状态

> 3.2：带有占位符文本的应用程序将被拒绝并按照以下步骤操作：
> 
> *   单击元数据部分中的编辑
> *   修改所需的元数据值
> *   点击屏幕底部的“保存”
> *   单击保存后，您将在右上角看到“提交新元数据”按钮。点击“提交新元数据”

我继续执行第 3 步，当我单击“保存”时，活动正在旋转但未保存，并且会话失败，所以我无法更新描述。

我想，我要做的是“拒绝应用程序并重新上传应用程序，重新上传时我会更新描述”

这样对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T07:09:32.547

在 iTunes 连接中有时确实会发生会话失败 - 有时数据仍然保存，如果没有，只需再试一次（必要时再试一次），它会在某个时候工作......

保存数据后，您只需按下随后出现的“提交新元数据”按钮即可。上周我只发生了两次，所以它确实有效 - 并且不要重新上传二进制文件，它真的需要整整 7 天以上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T07:12:35.843

谢谢TheEye，你说的是对的，我没有等待7天以上，而是做了以下事情：

---> 拒绝二进制文件 ---> 然后单击“准备上传二进制文件” ---> 然后我编辑了元数据 ---> 然后再次将二进制文件重新上传到 iTunes 连接。

由于新上传的二进制文件也需要一周时间才能“准备好出售”。

# regex - jmeter中的正则表达式问题

> ID：10222809
> 
> 赞同：0
> 
> 时间：2012-04-19T06:35:27.677
> 
> 标签：regex, jmeter

我在 jmeter 的正则表达式中标记了一个特殊的东西：

我的目标是使用正则表达式捕获以下文本的子字符串（以粗体标记）。为此，我尝试了以下方法：

1.  我从“查看结果树”框中选择了“文本”，然后单击“正则表达式”复选框，然后使用正则表达式 `viewstate\|/(.+?)=` 这工作正常。
2.  但是当我从下拉列表中使用“RegExp Tester”时，相同的正则表达式不起作用。

VIEWSTATE **| / wEPDwUJMjUyODUxNTQzEGRkFgJmD2QWAgIED2QWBAIJDw8WAh4EVGV4dAWKATxiPldlbGNvbWUmbmJzcDs8L2I + WFlaIEVGRzgxNzEgQUJDPGI + Jm5ic3A7QXMmbmJzcDs8L2I + UmFkaW9sb2dpc3Q8YnIgLz48Yj5EYXRlOiAmbmJzcDs8L2I + MTktQXByLTIwMTI8Yj4mbmJzcDtMb2NhdGlvbjombmJzcDs8L2I + TU1QaGFybWFjeTEkZGdyTU0PZ2Q** =

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T06:39:47.507

只是在黑暗中拍摄：尝试`viewstate\|\/(.+?)=`看看是否有效。

我猜测背后的理由：`/`可能会被误解为正则表达式分隔符，从而缩短您的正则表达式。

另一个想法（如果输入字符串中`.`有不匹配的换行符会有所帮助）：

```
viewstate\|\/([^=]+) 
```

# python - Python NumPy - FFT 和逆 FFT？

> ID：10222812
> 
> 赞同：6
> 
> 时间：2012-04-19T06:36:05.463
> 
> 标签：python, audio, numpy, fft, audio-processing

我一直在使用 FFT，目前正在尝试使用 FFT 从文件中获取声音波形（最终修改它），然后将修改后的波形输出回文件。我得到了声波的 FFT，然后在上面使用了逆 FFT 函数，但输出文件听起来根本不对。我没有对波形进行任何过滤——我只是在测试获取频率数据，然后将其放回文件中——听起来应该是一样的，但听起来却大不相同。

从那以后，我一直在研究这个项目，但还没有得到想要的结果。输出的声音文件很嘈杂（更大声，以及原始文件中不存在的额外噪音），并且来自一个通道的声音泄漏到另一个通道（之前是静音的）。输入声音文件是一个立体声、2 声道文件，声音仅来自一个声道。这是我的代码：

```
import scipy
import wave
import struct
import numpy
import pylab

from scipy.io import wavfile

rate, data = wavfile.read('./TriLeftChannel.wav')

filtereddata = numpy.fft.rfft(data, axis=0)
print(data)

filteredwrite = numpy.fft.irfft(filtereddata, axis=0)
print(filteredwrite)

wavfile.write('TestFiltered.wav', rate, filteredwrite) 
```

我不太明白为什么这不起作用。

我已经压缩了问题 .py 文件和音频文件，如果这可以帮助解决[这里](https://www.dropbox.com/s/jmokoyxb1667lvs/NumpyFFTTest.zip)的问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T06:39:45.540

1.  您似乎没有在此处应用任何过滤器
2.  您可能希望采用`ifft`（`fft`后过滤），而不是输入波形。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-19T06:49:55.490

不应该更像这样吗？

```
filtereddata = numpy.fft.fft(data)
# do fft stuff to filtereddata
filteredwrite = numpy.fft.ifft(filtereddata)
wavfile.write('TestFiltered.wav', rate, filteredwrite) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-25T01:37:35.320

```
>>> import numpy as np
>>> a = np.vstack([np.ones(11), np.arange(11)])

# We have two channels along axis 0, the signals are along axis 1
>>> a
array([[  1.,   1.,   1.,   1.,   1.,   1.,   1.,   1.,   1.,   1.,   1.],
       [  0.,   1.,   2.,   3.,   4.,   5.,   6.,   7.,   8.,   9.,  10.]])
>>> np.fft.irfft(np.fft.rfft(a, axis=1), axis=1)
array([[  1.1       ,   1.1       ,   1.1       ,   1.1       ,
          1.1       ,   1.1       ,   1.1       ,   1.1       ,
          1.1       ,   1.1       ],
       [  0.55      ,   1.01836542,   2.51904294,   3.57565618,
          4.86463721,   6.05      ,   7.23536279,   8.52434382,
          9.58095706,  11.08163458]])
# irfft returns an even number along axis=1, even though a was (2, 11)

# When a is even along axis 1, we get a back after the irfft.
>>> a = np.vstack([np.ones(10), np.arange(10)])
>>> np.fft.irfft(np.fft.rfft(a, axis=1), axis=1)
array([[  1.00000000e+00,   1.00000000e+00,   1.00000000e+00,
          1.00000000e+00,   1.00000000e+00,   1.00000000e+00,
          1.00000000e+00,   1.00000000e+00,   1.00000000e+00,
          1.00000000e+00],
       [  7.10542736e-16,   1.00000000e+00,   2.00000000e+00,
          3.00000000e+00,   4.00000000e+00,   5.00000000e+00,
          6.00000000e+00,   7.00000000e+00,   8.00000000e+00,
          9.00000000e+00]])

# It seems like you signals are along axis 0, here is an example where the signals are on axis 0
>>> a = np.vstack([np.ones(10), np.arange(10)]).T
>>> a
array([[ 1.,  0.],
       [ 1.,  1.],
       [ 1.,  2.],
       [ 1.,  3.],
       [ 1.,  4.],
       [ 1.,  5.],
       [ 1.,  6.],
       [ 1.,  7.],
       [ 1.,  8.],
       [ 1.,  9.]])
>>> np.fft.irfft(np.fft.rfft(a, axis=0), axis=0)
array([[  1.00000000e+00,   7.10542736e-16],
       [  1.00000000e+00,   1.00000000e+00],
       [  1.00000000e+00,   2.00000000e+00],
       [  1.00000000e+00,   3.00000000e+00],
       [  1.00000000e+00,   4.00000000e+00],
       [  1.00000000e+00,   5.00000000e+00],
       [  1.00000000e+00,   6.00000000e+00],
       [  1.00000000e+00,   7.00000000e+00],
       [  1.00000000e+00,   8.00000000e+00],
       [  1.00000000e+00,   9.00000000e+00]]) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-19T22:50:59.007

两个问题。

您正在 FFTing 2 通道数据。您应该只 FFT 1 通道的单声道数据，以使 FFT 结果具有一般意义。如果要处理 2 个声道的立体声数据，则应分别对每个声道进行 IFFT(FFT())。

您正在使用真正的 fft，它会丢弃信息，从而使 fft 不可逆。

如果要反转，则需要使用产生复数结果的 FFT，然后将这个复数频域矢量 IFFT 回时域。如果您修改频域矢量，如果您想要一个严格的实数结果（减去数值噪声），请确保它保持共轭对称。

# ruby - 可以在 BASH 脚本中使用 Lua 或 Ruby 的源代码吗？

> ID：10222815
> 
> 赞同：0
> 
> 时间：2012-04-19T06:36:31.127
> 
> 标签：ruby, bash, lua

如果我有一个 BASH 脚本，如下所示：

```
#!/bin/bash
cp file1.txt file2.txt 
```

我可以在 BASH 脚本中添加来自其他语言的源代码，例如 Lua 或 Ruby，存储在同一个文件中吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T06:39:42.780

您可以将源代码嵌入“here document”（在联机帮助页中搜索该字符串），并在 bash 脚本运行时，在 /tmp 或您希望执行它们的任何位置创建脚本；或者，如果脚本引擎接受来自标准输入的输入，您可以将“此处文档”通过管道传输到脚本引擎。

我不太了解 Ruby 或 Lua，但这里有一些通过 Bash 的 Python：

```
jcomeau@intrepid:/tmp$ cat <<EOF | python -
print "this is a test"
print "so is this"
import sys, os
print sys.path, os.getcwd()
EOF 
```

# javascript - 我在输入文件类型中看不到浏览按钮

> ID：10222819
> 
> 赞同：0
> 
> 时间：2012-04-19T06:37:03.530
> 
> 标签：javascript, html, css

我通过javascript创建了一个输入文件类型。

输入类型文件按我的预期生成，除了我看不到浏览按钮。

我搜索了输入文件类型 css 样式，但我看到的只是如何自定义

浏览器按钮。下面是我的屏幕的样子。

![在此处输入图像描述](../Images/a31762010b292d3e1238edd7531212b5.png)

通常，文件类型应该显示为第二个，但是当我得到第一个时

在 javascript 中生成文件类型。下面是我的代码。

```
<%@ page language="java" contentType="text/html; charset=UTF-8"
pageEncoding="UTF-8"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Insert title here</title>
<style>
.uploadForm{
type:file; position:relative;
}

#addBtn{
width:100px; height:20px;
}
</style>
<script>
function addMoreFiles(){
var fileForm = document.createElement('input');
var addButton = document.createElement('button');   
addButton.setAttribute('onclick', "addMoreFiles()");
addButton.setAttribute('id', "addBtn");
fileForm.className = 'uploadForm';
document.getElementById('uploadDiv').appendChild(fileForm);
document.getElementById('uploadDiv').appendChild(addButton);
}
</script>
</head>
<body onload="addMoreFiles()">
<form name="frmname" method="post" enctype="multipart/form-data" action="./ViewPage.jsp">
file<br>
<div id="uploadDiv"></div>
<br>
<input type="file" name="uploadFile"><br>
<input type="submit" value="upload"><br>
</form>
</body>
</html> 
```

谁能告诉我我做错了什么？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T06:49:27.820

```
var fileForm = document.createElement('input');
fileForm.type = 'file'; // only <input type="file"> has browse button 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T07:07:56.557

看 Seho Lee 先生

我在名为 addmorefiles() 的函数中所做的更改如下：

```
function addMoreFiles(){
var fileForm = document.createElement('input');
var addButton = document.createElement('button');   
fileForm.setAttribute('type', "file"); //by this we are setting type of button...which u missed to put
addButton.setAttribute('onclick', "addMoreFiles()");
addButton.setAttribute('id', "addBtn");
fileForm.className = 'uploadForm';
document.getElementById('uploadDiv').appendChild(fileForm);
document.getElementById('uploadDiv').appendChild(addButton); 
```

我想你忘了为给定的浏览按钮“fileform”设置属性“type”

我已经实现了它并且它有效......

您也可以尝试用我的答案替换您的功能......你会得到你想要的

试试看....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T06:57:44.313

我能够在 Safari、Firefox 和 Chrome 上正确查看它。 [http://jsfiddle.net/MWtzh/](http://jsfiddle.net/MWtzh/)

您是否正在尝试使用任何特定的浏览器？一些较旧的 IE 版本包括 IE8 旧版本不支持 HTML5。看看这里：[Internet Explorer 8 是否支持 HTML 5？](https://stackoverflow.com/questions/289225/does-internet-explorer-8-support-html-5)

# iphone - Objective-C：如何从 Long Int 值中生成浮点数？

> ID：10222822
> 
> 赞同：0
> 
> 时间：2012-04-19T06:37:18.537
> 
> 标签：iphone, objective-c

我将地图点的纬度和经度值保存为我的数据库中的整数。

所以我的值是这样的：3454534353。但是使用时，我需要使用浮点数作为34.54534353。

我怎样才能进行这种转换？

这是我创建地图点的方法：

```
MapLocation *location = [[MapLocation alloc] init];  
location.title = [NSString stringWithString:[locations objectForKey:@"title"]];  
location.subtitle = [NSString stringWithString:[locations objectForKey:@"subtitle"]];  
CLLocationCoordinate2D coordinate;   
coordinate.latitude = // need a float like xx.xxxxx  
coordinate.longitude = // need a float like xx.xxxxx;  
location.coordinate = coordinate;  
[annotations addObject:location];  
[mapView addAnnotations:annotations]; 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T06:54:14.653

移动评论以回答

```
float f = (float)intvalue / 10000000.0f; 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T06:50:43.663

您必须将整数（实际上用作定点数）除以表示为 true 的 10 的适当幂`float`：

```
float long_float = longitude / 10000000.0f; 
```

# c - Pthread C 同步

> ID：10222826
> 
> 赞同：-9
> 
> 时间：2012-04-19T06:37:35.510
> 
> 标签：c, linux, multithreading, pthreads

我从线程开始，我在解决这个问题时遇到了一些问题：

这个程序产生一个有序的数字序列，第二个任务读取它们并将它们打印在屏幕上。我如何修复它以按要求工作？

预期输出：

```
Consumed item: 1
Consumed item: 2
Consumed item: 3
Consumed item: 4
Consumed item: 5
Consumed item: 6 
```

实际输出：

```
Consumed item: 1
Consumed item: 4
Consumed item: 7
Consumed item: 10
Consumed item: 11
Consumed item: 14 
```

该程序：

```
#include <stdio.h>
#include <pthread.h>
#include <time.h>

#define          NBUFFERS       2

int item, in=0, out=0;
int buffer[NBUFFERS];
int stop =0; 

void *ProducerTask(void *data) //This is the producer task
{
     int nextp = 0;
     struct timespec mytime;
     mytime.tv_sec = 0;
     mytime.tv_nsec = 200000000;

     while (!stop) {
          nanosleep(&mytime, NULL);
          nextp++;
          buffer[in] = nextp;   /* produce a new item */
          in = (in + 1) % NBUFFERS;
     }
     pthread_exit(0);
}

void *ConsumerTask(void *data)
{
     int nextc;
     struct timespec mytime;
     mytime.tv_sec = 0;
     mytime.tv_nsec = 500000000;

     while (!stop) {
          nanosleep(&mytime, NULL);
          nextc = buffer[out];  /* consume a item */
          out = (out + 1) % NBUFFERS;
          printf("Consumed item: %d\n", nextc);
     }
     pthread_exit(0);
}

void *MonitorTask (void *data) //This is the monitor task
{
     getchar();
     stop = 1;
     pthread_exit(0);
}

void main(void)
{
     pthread_t task1;
     pthread_t task2;
     pthread_t task3;

     pthread_create (&task1, NULL, ProducerTask, NULL);
     pthread_create (&task2, NULL, ConsumerTask, NULL);
     pthread_create (&task3, NULL, MonitorTask, NULL);

     pthread_join(task1,NULL);
     pthread_join(task2,NULL);
     pthread_join(task3,NULL);

     printf("Main program exiting.\n");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T06:41:57.233

```
int buffer[NBUFFERS];
int stop =0; 
```

是全局的，可以从多个线程访问，它们没有任何**[同步](http://en.wikipedia.org/wiki/Synchronization_%28computer_science%29#Thread_or_process_synchronization)**。如果不是*问题**，*
接下来 的**[竞争条件](http://en.wikipedia.org/wiki/Race_condition)**就是问题。

 **加粗的内联链接应该至少让您在做错的事情上领先一步。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T06:46:34.883

共享资源至少需要锁定和传递数据通常通过条件变量通过线程通信来解决，请参见此[示例](http://www.justsoftwaresolutions.co.uk/threading/implementing-a-thread-safe-queue-using-condition-variables.html)（C++，但它表明了我的观点）。

编辑：在这种情况下，奇怪的输出是由于您使用了一个小缓冲区以及比生产者慢的消费者。**

# java - Java：使用某种轮询机制从线程中获取一个值并根据该值终止线程......？

> ID：10222830
> 
> 赞同：0
> 
> 时间：2012-04-19T06:37:43.280
> 
> 标签：java

我如何从另一个线程轮询价值。例如：我在 ThreadA 中有一个方法，它调用另一个 Thread(ThreadB) 的方法。我需要使用一些轮询机制，以便每 5 秒我应该能够检查该方法的返回类型（字符串）的值，并且基于该值（比如成功/失败）我应该能够杀死 ThreadB。怎么做..请帮忙。

这可以通过观察者模式来完成，但现在变化很小——我每 5 秒轮询一次 threadB 的值。但 ThreadB 的值仅在 10 分钟后才会改变。在这里，我的问题是每 5 秒我如何获得 ThreadB 的值，而无需每次都调用它。ThreadB 只能调用一次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T07:26:32.803

这是一个例子：

```
public class Blofeld extends Thread {

    private volatile boolean isBombDefused;
    private volatile int count = 10;

    public void run() {
        System.out.println("Blofeld starts countdown");
        while (!isBombDefused) {
            System.out.println(count + " seconds and counting...");
            try {
                sleep(1000);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
            count--;
            if (count <= 0) {
                System.out.println("This is the price of failure...");
                throw new RuntimeException("BOOOOM!");
            }
        }
        System.out.println("Mr. Bond! Mr. Bond! We can do a deal!");
    }

    public int getCount() {
        return count;
    }

    public void cutRedWire() {
        System.out.println("SNIP!");
        isBombDefused = true;
    }
}

public class Bond {    
    public static void main(String[] args) throws InterruptedException {
        Blofeld blofeld = new Blofeld();
        blofeld.start();
        while (blofeld.getCount() > 007) {
            Thread.sleep(1000);
            System.out.println("Bond works frantically");
        }
        blofeld.cutRedWire();
    }
} 
```

编辑：在 artbrisol 发表评论后，这两个字段都变得易变，以便始终读取主值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T06:47:21.193

除非您想使用低级线程，否则您可以：

*   将线程 b 的方法 (mB) 嵌入到可运行对象中并将其提交给 an[`ExecutorService`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html)并存储`Future`提交返回的 f
*   抓住`InterruptedException`mB 并在被抓住时退出
*   将线程 a 的方法嵌入到可运行对象中并将其提交给[`ScheduledExecutorService`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ScheduledExecutorService.html)每 5 秒运行一次的
*   如果您的条件为真，请致电`f.cancel(true)`或`shutdownNow`第一执行人

Ps：那是如果你真的想每 5 秒轮询一次，如果你更喜欢更实时的东西，Andreas 的评论更有意义。

# blackberry - Blackberry 中的 AutoCompleteField 文本过滤

> ID：10222831
> 
> 赞同：0
> 
> 时间：2012-04-19T06:37:50.243
> 
> 标签：blackberry, autocomplete, filtering

我`AutoCompleteField`在黑莓中使用过并使用`BasicFilteredList`. 它在黑莓 SDK 5.0 及更高版本中运行良好。但是，搜索是根据输入的单词进行的。如果我有如下文本字符串。

> T 115 Centro Galleria 购物中心，Cnr Old Collier 和 Walters Road Morley WA 1522

它仅在我输入 152 时过滤字符串，但如果我使用 522 则无法过滤。我希望它应该根据我的要求进行过滤，因为它们存在于上述搜索字符串中。请帮我解决这个问题。下面是用于创建的代码示例`AutoCompleteField`

```
import net.rim.device.api.collection.util.BasicFilteredList;
import net.rim.device.api.collection.util.BasicFilteredListResult;
import net.rim.device.api.ui.UiApplication;
import net.rim.device.api.ui.component.AutoCompleteField;
import net.rim.device.api.ui.component.LabelField;
import net.rim.device.api.ui.component.ListField;
import net.rim.device.api.ui.container.MainScreen;
import net.rim.device.api.ui.text.TextFilter;
import net.rim.device.api.util.CharacterUtilities;

public class AutoCompleteFieldApp extends UiApplication {
    public static void main(String[] args) {
        AutoCompleteFieldApp app = new AutoCompleteFieldApp();
        app.enterEventDispatcher();
    }

    AutoCompleteFieldApp() {
        pushScreen(new HomeScreen());
    }
}

class HomeScreen extends MainScreen {
    LabelField selectedText;

    public HomeScreen() {
        setTitle("Autocomplete Text Field Demo");

         selectedText = new LabelField();

        BasicFilteredList filterList = new BasicFilteredList();
        String[] address = { "T 115 Centro Galleria Shopping Centre, Cnr Old Collier and Walters Road Morley WA 1522", 
                "1423 SEAVIEW POINT POINT COOK VIC 2674",
                "Lot 1498 Yarraman Road Wyndham Vale VIC 3795", 
                "Lot 3506 Witchmount Close Hillside VIC 4055",
                "6 Paas Place Williamstown VIC 4233", 
                "Lot 99 14 James Close Sunbury VIC 4502", 
                "1 Charlotte Street Clayton South VIC 4779" };

        filterList.addDataSet(1, address, "address", BasicFilteredList.COMPARISON_IGNORE_CASE);
        AutoCompleteField autoCompleteField = new AutoCompleteField(filterList){
            public void onSelect(Object selection, int SELECT_TRACKWHEEL_CLICK) {
                 ListField _list = getListField();
                 if (_list.getSelectedIndex() > -1) {
                     if(selectedText!=null){
                         BasicFilteredListResult result = (BasicFilteredListResult) selection;
                         selectedText.setText(result._object.toString());
                     }
                 }
             }
        };
        add(autoCompleteField);

        AutoCompleteField autoCompleteField2 = new AutoCompleteField(filterList){
            public void onSelect(Object selection, int SELECT_TRACKWHEEL_CLICK) {
                 ListField _list = getListField();
                 if (_list.getSelectedIndex() > -1) {
                     if(selectedText!=null){
                         BasicFilteredListResult result = (BasicFilteredListResult) selection;
                         selectedText.setText(result._object.toString()); 
                     }
                 }
             }
        };

        TextFilter filter = new TextFilter() {          
            public char convert(char c, int status) {
                if (!validate(c))
                    return 0;
                return c;
            }
            public boolean validate(char c) {
                return CharacterUtilities.isDigit(c);
            }
        };

        autoCompleteField2.getEditField().setFilter(filter);
        add(autoCompleteField2);
        add(selectedText);
    }
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T11:44:16.860

我没有尝试过，但我假设这应该可行。首先覆盖`getMatchedKeywords`你的`BasicFilteredList`. 您应该返回将触发匹配的关键字。所以对于你的情况**"1522"**你应该返回**{"1522", "522", "22", "2"}**。来自的对象`BasicFilteredListResult`应该是您的**"1522"**。正如您所看到的，如果您在可搜索的句子中有几个单词，那么生成所有这些子字符串会更加痛苦。但这是我认为的 API 的限制。

可能还有另一种解决方案。

# c++ - 为什么使用 ptrace 读取内存数据总是返回 -1？

> ID：10222832
> 
> 赞同：1
> 
> 时间：2012-04-19T06:37:52.937
> 
> 标签：c++, linux, macos, memory, process

以下是一个小示例跟踪程序的代码：

```
int main (int argc, const char * argv[])
{
    cout<<getpid()<<endl;
    int* array = new int[100];
    memset(array, 0, 100*sizeof(int));

    for(int i=0;i<10;++i){
        array[i]=i;
        printf("array address[%d]:%x\n",i,array+i);
    }

    int index;
    while(cin>>index){
        if(index<0||index>100)continue;
        array[index] = array[index]*10;
    }

    return 0;
} 
```

将程序另存为 dummy.c。编译并运行它：./dummy

在输出中，我得到数组 [1] 的地址：0x100046，其值为 1。

然后，使用以下代码附加到虚拟对象：

```
unsigned long addr = 0x100046
if(ptrace(PT_ATTACH, child,NULL, NULL)==-1)
    printf("Attach Failed!");
wait(NULL);
long data = ptrace(PT_READ_D, child, (void*)addr, 0);  // after reading data always is -1, it should be 1 according dummy application 
```

# php - 获取 PHP 数组的所有排列？

> ID：10222835
> 
> 赞同：36
> 
> 时间：2012-04-19T06:37:55.807
> 
> 标签：php, permutation, combinatorics

给定一个 PHP 字符串数组，例如：

```
['peter', 'paul', 'mary'] 
```

如何生成该数组元素的所有可能排列？IE：

```
peter-paul-mary
peter-mary-paul
paul-peter-mary
paul-mary-peter
mary-peter-paul
mary-paul-peter 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-19T07:02:17.873

```
function pc_permute($items, $perms = array()) {
    if (empty($items)) { 
        echo join(' ', $perms) . "<br />";
    } else {
        for ($i = count($items) - 1; $i >= 0; --$i) {
             $newitems = $items;
             $newperms = $perms;
             list($foo) = array_splice($newitems, $i, 1);
             array_unshift($newperms, $foo);
             pc_permute($newitems, $newperms);
         }
    }
}

$arr = array('peter', 'paul', 'mary');

pc_permute($arr); 
```

或者

```
function pc_next_permutation($p, $size) {
    // slide down the array looking for where we're smaller than the next guy
    for ($i = $size - 1; $p[$i] >= $p[$i+1]; --$i) { }

    // if this doesn't occur, we've finished our permutations
    // the array is reversed: (1, 2, 3, 4) => (4, 3, 2, 1)
    if ($i == -1) { return false; }

    // slide down the array looking for a bigger number than what we found before
    for ($j = $size; $p[$j] <= $p[$i]; --$j) { }

    // swap them
    $tmp = $p[$i]; $p[$i] = $p[$j]; $p[$j] = $tmp;

    // now reverse the elements in between by swapping the ends
    for (++$i, $j = $size; $i < $j; ++$i, --$j) {
         $tmp = $p[$i]; $p[$i] = $p[$j]; $p[$j] = $tmp;
    }

    return $p;
}

$set = split(' ', 'she sells seashells'); // like array('she', 'sells', 'seashells')
$size = count($set) - 1;
$perm = range(0, $size);
$j = 0;

do { 
     foreach ($perm as $i) { $perms[$j][] = $set[$i]; }
} while ($perm = pc_next_permutation($perm, $size) and ++$j);

foreach ($perms as $p) {
    print join(' ', $p) . "\n";
} 
```

[http://docstore.mik.ua/orelly/webprog/pcook/ch04_26.htm](http://docstore.mik.ua/orelly/webprog/pcook/ch04_26.htm)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-07-01T19:34:01.210

这可以满足您的需要，即无需分配任何额外的内存。它将结果排列存储在 $results 数组中。我非常有信心这是解决任务的快速方法。

```
<?php
function computePermutations($array) {
    $result = [];

    $recurse = function($array, $start_i = 0) use (&$result, &$recurse) {
        if ($start_i === count($array)-1) {
            array_push($result, $array);
        }

        for ($i = $start_i; $i < count($array); $i++) {
            //Swap array value at $i and $start_i
            $t = $array[$i]; $array[$i] = $array[$start_i]; $array[$start_i] = $t;

            //Recurse
            $recurse($array, $start_i + 1);

            //Restore old order
            $t = $array[$i]; $array[$i] = $array[$start_i]; $array[$start_i] = $t;
        }
    };

    $recurse($array);

    return $result;
}

$results = computePermutations(array('foo', 'bar', 'baz'));
print_r($results); 
```

这适用于 PHP>5.4。我使用匿名函数进行递归，以保持主函数的界面干净。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-10-05T16:01:37.260

我需要类似的东西，并在寻找时发现了这篇文章。登陆写下面的工作。

它有 8 个项目，运行速度相当快（比我在网上找到的示例快一点），但超出此范围，运行时间会迅速增加。如果您只需要输出结果，它可以更快，并且内存使用量大大减少。

```
print_r(AllPermutations(array('peter', 'paul', 'mary')));

function AllPermutations($InArray, $InProcessedArray = array())
{
    $ReturnArray = array();
    foreach($InArray as $Key=>$value)
    {
        $CopyArray = $InProcessedArray;
        $CopyArray[$Key] = $value;
        $TempArray = array_diff_key($InArray, $CopyArray);
        if (count($TempArray) == 0)
        {
            $ReturnArray[] = $CopyArray;
        }
        else
        {
            $ReturnArray = array_merge($ReturnArray, AllPermutations($TempArray, $CopyArray));
        }
    }
    return $ReturnArray;
} 
```

请注意，排列数是数组中项目数的阶乘。3个项目有6个排列，4个有24个，5个有1​​20个，6个有720个，等等。

编辑

回来看看这个并做了一些修改。

下面是这个功能的改进版本，它使用更少的存储空间并且速度更快（比我见过的其他解决方案更快）。

它将返回数组作为参数，通过引用传递它。这减少了数据在运行时的重复量。

```
function AllPermutations($InArray, &$ReturnArray = array(), $InProcessedArray = array())
{
    if (count($InArray) == 1)
    {
        $ReturnArray[] = array_merge($InProcessedArray, $InArray);
    }
    else
    {
        foreach($InArray as $Key=>$value)
        {
            $CopyArray = $InArray;
            unset($CopyArray[$Key]);
            AllPermutations2($CopyArray, $ReturnArray, array_merge($InProcessedArray, array($Key=>$value)));
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-12-21T07:25:21.167

具有递归且没有人为的额外参数的简单版本：

```
function permuteArray(array $input) {
    $input = array_values($input);

    // permutation of 1 value is the same value
    if (count($input) === 1) {
        return array($input);
    }

    // to permute multiple values, pick a value to put in the front and 
    // permute the rest; repeat this with all values of the original array
    $result = [];
    for ($i = 0; $i < count($input); $i++) {
        $copy  = $input;
        $value = array_splice($copy, $i, 1);
        foreach (permuteArray($copy) as $permutation) {
            array_unshift($permutation, $value[0]);
            $result[] = $permutation;
        }
    }

    return $result;
} 
```

这个算法很好而且很有启发性，你将如何在纸上做它，但在其他方面非常低效，因为它会多次计算相同的排列。并不是说随着计算的空间和数量呈指数增长，计算较大数组的排列是非常不切实际的。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-04-21T11:23:56.920

我对杰克的回答做了一些扩展

```
function pc_permute($items, $perms = [],&$ret = []) {
   if (empty($items)) {
       $ret[] = $perms;
   } else {
       for ($i = count($items) - 1; $i >= 0; --$i) {
           $newitems = $items;
           $newperms = $perms;
           list($foo) = array_splice($newitems, $i, 1);
           array_unshift($newperms, $foo);
           $this->pc_permute($newitems, $newperms,$ret);
       }
   }
   return $ret;
} 
```

这实际上将返回一个包含所有可能排列的数组。

```
$options = ['startx','starty','startz','endx','endy','endz'];
$x = $this->pc_permute($options);
var_dump($x);

  [0]=>
 array(6) {
    [0]=>
    string(6) "startx"
    [1]=>
    string(6) "starty"
    [2]=>
    string(6) "startz"
    [3]=>
    string(4) "endx"
    [4]=>
    string(4) "endy"
    [5]=>
    string(4) "endz"
  }
  [1]=>
  array(6) {
    [0]=>
    string(6) "starty"
    [1]=>
    string(6) "startx"
    [2]=>
    string(6) "startz"
    [3]=>
    string(4) "endx"
    [4]=>
    string(4) "endy"
    [5]=>
    string(4) "endz"
  }
  [2]=>
  array(6) {
    [0]=>
    string(6) "startx"
    [1]=>
    string(6) "startz"
    [2]=>
    string(6) "starty"
    [3]=>
    string(4) "endx"
    [4]=>
    string(4) "endy"
    [5]=>
    string(4) "endz"
  }
  [3]=>
  array(6) {
    [0]=>
    string(6) "startz"
    [1]=>
    string(6) "startx"
    [2]=>
    string(6) "starty"
    [3]=>
    string(4) "endx"
    [4]=>
    string(4) "endy"
    [5]=>
    string(4) "endz"
  }
  [4]=>
  array(6) {
    [0]=>
    string(6) "starty"
    [1]=>
    string(6) "startz"
    [2]=>
    string(6) "startx"
    [3]=>
    string(4) "endx"
    [4]=>
    string(4) "endy"
    [5]=>
    string(4) "endz"
  }
  [5]=>
  array(6) {
    [0]=>
    string(6) "startz"
    [1]=>
    string(6) "starty"
    [2]=>
    string(6) "startx"
    [3]=>
    string(4) "endx"
    [4]=>
    string(4) "endy"
    [5]=>
    string(4) "endz"
  }
  [6]=> ................ a lot more 
```

我发现取回数组而不是字符串更有用。然后取决于使用应用程序如何处理结果（加入它们或其他）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-08-24T14:28:17.700

这是基于这篇文章的另一个变体：[https ://docstore.mik.ua/orelly/webprog/pcook/ch04_26.htm](https://docstore.mik.ua/orelly/webprog/pcook/ch04_26.htm)

```
public static function get_array_orders( $arr ) {
    $arr    = array_values( $arr ); // Make sure array begins from 0.
    $size   = count( $arr ) - 1;
    $order  = range( 0, $size );
    $i      = 0;
    $orders = [];
    do {
        foreach ( $order as $key ) {
            $orders[ $i ][] = $arr[ $key ];
        }

        $i ++;
    } while ( $order = self::get_next_array_order( $order, $size ) );

    return $orders;
}

protected static function get_next_array_order( $order, $size ) {
    // slide down the array looking for where we're smaller than the next guy
    $i = $size - 1;
    while ( isset( $order[ $i ] ) && $order[ $i ] >= $order[ $i + 1 ] ) {
        $i --;
    }

    // if this doesn't occur, we've finished our permutations, the array is reversed: (1, 2, 3, 4) => (4, 3, 2, 1)
    if ( $i == - 1 ) {
        return false;
    }

    // slide down the array looking for a bigger number than what we found before
    $j = $size;

    while( $order[ $j ] <= $order[ $i ] ){
        $j--;
    }

    // swap them
    $tmp         = $order[ $i ];
    $order[ $i ] = $order[ $j ];
    $order[ $j ] = $tmp;

    // now reverse the elements in between by swapping the ends
    for ( ++ $i, $j = $size; $i < $j; ++ $i, -- $j ) {
        $tmp     = $order[ $i ];
        $order[ $i ] = $order[ $j ];
        $order[ $j ] = $tmp;
    }

    return $order;
} 
```

例子：

```
$langs  = ['en', 'fr', 'ru'];
$orders = self::get_array_orders( $langs );
print_r($orders); 
```

输出：

```
Array (

 [0] => Array
    (
        [0] => en
        [1] => fr
        [2] => ru
    )

 [1] => Array
    (
        [0] => en
        [1] => ru
        [2] => fr
    )

 [2] => Array
    (
        [0] => fr
        [1] => en
        [2] => ru
    )

 [3] => Array
    (
        [0] => fr
        [1] => ru
        [2] => en
    )

 [4] => Array
    (
        [0] => ru
        [1] => en
        [2] => fr
    )

 [5] => Array
    (
        [0] => ru
        [1] => fr
        [2] => en
    )
) 
```

# mysql - 删除Mysql数据库表中的数据

> ID：10222839
> 
> 赞同：0
> 
> 时间：2012-04-19T06:38:44.597
> 
> 标签：mysql, stored-procedures, cascading-deletes

1.  如何在不删除其他表数据的情况下从表中删除数据？

2.  MySql 数据库表中的外键可能是 Null 值吗？

我想删除一个部门而不删除其他表数据，例如（班次、远程登录 ID、技能）。这是我的数据库 ERD。我将如何做到这一点？

![在此处输入图像描述](../Images/30cf1259b61e18dfddb4e27ab768d6f3.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T06:46:05.550

当您定义外键时，您可以在 SET NULL 和 CASCADE 之间进行选择。

CASCADE 删除所有包含对已删除行的引用的记录。

SET NULL 将引用已删除记录的外键列设置为空。为此，您需要确保该列允许为空，否则它将不起作用。

[http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)

# hadoop - Elastic Mapreduce Map 输出丢失

> ID：10222843
> 
> 赞同：11
> 
> 时间：2012-04-19T06:39:26.557
> 
> 标签：hadoop, amazon-web-services, jetty, elastic-map-reduce, amazon-emr

我在 Amazon Elastic MapReduce 上运行大量（超过 100 个节点）的 mapreduce 作业。

在 reduce 阶段，已经完成的 map 任务不断失败

```
Map output lost, rescheduling: getMapOutput(attempt_201204182047_0053_m_001053_0,299) failed :
java.io.IOException: Error Reading IndexFile
    at org.apache.hadoop.mapred.IndexCache.readIndexFileToCache(IndexCache.java:113)
    at org.apache.hadoop.mapred.IndexCache.getIndexInformation(IndexCache.java:66)
    at org.apache.hadoop.mapred.TaskTracker$MapOutputServlet.doGet(TaskTracker.java:3810)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:707)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1221)
    at org.apache.hadoop.http.HttpServer$QuotingInputFilter.doFilter(HttpServer.java:835)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1212)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:399)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:766)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:450)
    at org.mortbay.jetty.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:230)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:928)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:549)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:212)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:410)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582)
Caused by: java.io.EOFException
    at java.io.DataInputStream.readFully(DataInputStream.java:180)
    at java.io.DataInputStream.readLong(DataInputStream.java:399)
    at org.apache.hadoop.mapred.SpillRecord.<init>(SpillRecord.java:74)
    at org.apache.hadoop.mapred.SpillRecord.<init>(SpillRecord.java:54)
    at org.apache.hadoop.mapred.IndexCache.readIndexFileToCache(IndexCache.java:109)
    ... 23 more 
```

发生这种情况的映射器的比例足够少，我不介意，除非它发生时，reducers 都会暂停并等待 1 个映射任务重新运行，因此整个作业每次都会暂停 1-5 分钟.

我认为这与此错误有关-> [https://issues.apache.org/jira/browse/MAPREDUCE-2980](https://issues.apache.org/jira/browse/MAPREDUCE-2980) 有谁知道如何在不发生这种情况的情况下运行 EMR 作业？

编辑：如果有帮助，这里有更多信息。输入格式为`SequenceFileInputFormat`。输出格式是`SequenceFileOutputFormat`. 键值对是用户定义的（值很大并且实现`Configurable`）。没有`Combiner`，只有`Mapper`和`Reducer`。我正在对输入和输出使用块压缩（并且中间 kv 对也正在进行记录压缩。这是 EMR 的默认设置）。`SnappyCodec`我相信编解码器是默认的。最后，它实际上是一系列按顺序运行的作业，每个作业都使用前一个作业的输出作为下一个作业的输入。前几个工作很小并且运行良好。只有当工作开始变得非常大时，才会发生这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-08-01T20:53:22.577

自从提出这个问题以来，已经有了一些发展。这个问题在 jira [MAPREDUCE-2389](https://issues.apache.org/jira/browse/MAPREDUCE-2389)中有更详细的讨论。

此 jira 以及此处或此处链接的任何其他 jira 的一个关键部分是该问题与 jetty 版本相关联。当时不可能去更新的码头版本。

到目前为止，所引用的版本早已被弃用，因此每个人都应该完全解决这种情况。

# sql - 打破一个 WHILE 然后回到存储过程中的最后一个位置 - SQL Server

> ID：10222849
> 
> 赞同：0
> 
> 时间：2012-04-19T06:40:22.357
> 
> 标签：sql, sql-server, sql-server-2008, tsql, sql-server-2005

例如我有
// 这只是一个虚拟示例代码。

```
WHILE
  BEGIN

     Statement 1
     GOTO RESET
     Statement 2
     GOTO RESET
     Statement 3
     GOTO RESET
  END

RESET:
SET @Var = 1 
// At this point, I need to come back my last position in the WHILE LOOP 
```

我的问题是
1\. 有可能吗？
2\. 如果是，我该怎么做？
非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T06:45:49.840

您可以使用`GOTO`语法。你定义`Label`然后你`GOTO`那个标签。像这样：

```
DECLARE @test INT=1

SomeName:
    print 'test'

IF @test=1
BEGIN
    SET @test=2
    GOTO SomeName
END 
```

这将`PRINT 'test'`两次

参考[这里](http://msdn.microsoft.com/en-us/library/ms180188.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T06:43:00.577

SQL 支持`GOTO`/ `LABEL`: [http://msdn.microsoft.com/en-us/library/ms180188.aspx](http://msdn.microsoft.com/en-us/library/ms180188.aspx)

不完全确定为什么在存储过程中需要如此精细的流控制。也许尝试将存储的过程分成不同的过程？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T11:53:05.203

您可以为此使用`TRY...CATCH`块。

```
DECLARE @i int

SET @i = 1

WHILE @i <= 5
BEGIN
    BEGIN TRY
        IF @i = 3 RAISERROR('Three is an incorrect value', 11, 1)

        PRINT 'Ok'
    END TRY
    BEGIN CATCH
        PRINT 'Error'
    END CATCH

    SET @i = @i + 1
END 
```

# ruby-on-rails - 在 show scaffold 上将长 URL 转换为来自 Ruby on Rails 数据库的 Bit.ly URL

> ID：10222853
> 
> 赞同：2
> 
> 时间：2012-04-19T06:40:46.713
> 
> 标签：ruby-on-rails, gem, url-shortener, bit.ly

我对 RoR 真的很陌生，但我一直认为学习语言的最佳方法是先跳入头脑。我正在努力在 RoR 中创建一个生成报告的 webapp。到目前为止我的进展：

> 轨道新项目
> 
> 光盘项目
> 
> rails 生成脚手架数据库 League_Name:string Logo_URL:string Event_URL:string Website:string Facebook:string Twitter:string Youtube:string Funding:string Owner:string Phone:string Email:string Other:string Attendence:string Events_per_Year:string Locations:string Rules :string How_to_Enter:string Notable_Streamers:string Event_Titles:string Background:text game1_title:string game1_genre:string game1_website:string game1_years_played:string game1_prize_pool:string game1_prize_awarded:string game1_live:string game1_transmitted:string game1_method:string game1_advance_entry:string game1_invitational:string game1_contestants_open:string game1_contestants_finals:string game1_bracket_open:string game1_bracket_finals:string game1_rules:text game2_title:string game2_genre:string game2_website:string game2_years_played:string game2_prize_pool:string game2_prize_awarded:string game2_live:string game2_transmitted:string game2_method:string game2_advance_entry:string game2_invitational:string game2_contestants_open:string game2_contestants_finals:string game2_bracket_open:string game2_bracket_finals:string game2_rules:text game3_title:string game3_genre:string game3_website:string game3_years_ward3 :string game3_live:string game3_transmitted:string game3_method:string game3_advance_entry:string game3_invitational:string game3_contestants_open:string game3_contestants_finals:string game3_bracket_open:string game3_bracket_finals:string game3_rules:text game4_title:string game4_genre:string game4_website:string game4_years_played:string game_awarded_pool: game4_live:string game4_transmitted:string game4_method:字符串 game4_advance_entry：字符串 game4_invitational：字符串 game4_contestants_open：字符串 game4_contestants_finals：字符串 game4_bracket_open：字符串 game4_bracket_finals：字符串 game4_rules：文本
> 
> 耙分贝：迁移

我已经在展示架上进行了一些 CSS 重新格式化，这部分进展顺利。从长远来看，我想输入我的所有数据，当我点击显示时，它会返回如下内容：

[https://docs.google.com/spreadsheet/ccc?key=0AsOtsP63Kb2mdFpKZFZ6OV9PQmVWUU9Qc1FzV2UtVGc](https://docs.google.com/spreadsheet/ccc?key=0AsOtsP63Kb2mdFpKZFZ6OV9PQmVWUU9Qc1FzV2UtVGc)

这一切都很好；但是，有时 facebook twitter 等网站的 URL 比我的格式允许的 <td> 更长，并且文本只是拖尾。我进行了一些搜索，发现一些网站说可以使用 bitly 服务创建更短的 URL。这些网站对于初学者来说非常模糊。

[http://coryschires.com/how-to-shorten-urls-with-bit-ly-in-ruby-on-rails/](http://coryschires.com/how-to-shorten-urls-with-bit-ly-in-ruby-on-rails/)

似乎在我想要的正确轨道上，但我不知道如何制作

```
<tr>
<td class="td1">Website:</td>
<td><%= @database.Website %></td>
</tr>
<tr>
<td class="td1">Facebook:</td>
<td><%= @database.Facebook %></td>
</tr>
<tr>
<td class="td1">Twitter:</td>
<td><%= @database.Twitter %></td>
</tr>
<tr>
<td class="td1">Youtube:</td>
<td><%= @database.Youtube %></td>
</tr> 
```

生成 URL 的 bit.ly 版本。而且我不明白如何将他的例子应用到我的工作中。

# android - 带有 UI 线程的 Android RMI

> ID：10222861
> 
> 赞同：0
> 
> 时间：2012-04-19T06:41:14.383
> 
> 标签：android

我正在尝试从其他 apk 远程调用方法。除了调用方法必须在 UI 上执行一些操作并且必须从 UI 线程运行之外，一切正常。使用 Method.invoke() 调用的方法在单独的线程中运行，并且无法访问 UI。AsyncTask 是解决此问题的正确方法吗？或者也许存在更好的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T06:50:09.683

有专门针对这种情况的[处理程序](http://developer.android.com/reference/android/os/Handler.html)和[runOnUIThread()](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29)方法..您可以使用它们..

你可以像这样使用处理程序..

```
new Handler().post(new Runnable(){

public void run(){
//UI operation...

}

}); 
```

如果你在一个 Activity 中......那么......

```
runOnUIThread(new Runnable(){

public void run(){
//UI operation...

}

}); 
```

# iphone - 在 iPhone 中以编程方式绘制视图：iPad 版本的操作

> ID：10222865
> 
> 赞同：0
> 
> 时间：2012-04-19T06:41:28.283
> 
> 标签：iphone, ios, ipad

我在我的代码中为 iPhone 应用程序绘制了一个`UIView`(ie )。`UIButton`

现在我想开发一个iPad版本，但是由于iPhone和iPad的屏幕尺寸不同，所以`UIView`应该有不同的尺寸。我该怎么做才能以编程方式处理视图？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T06:51:03.673

对于通用 iOS 应用程序，询问您正在服务的设备并相应地绘制您的视图

所以在你的视图控制器中使用::

```
-(void)viewWillAppear:(BOOL)animated {
    if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {

         //draw accordingly to your layout for iPad

    }
   else { //iphone layout
   }

} 
```

# c - 循环展开以将两个矩阵相乘 NxN？

> ID：10222867
> 
> 赞同：0
> 
> 时间：2012-04-19T06:41:44.290
> 
> 标签：c, optimization, loops, for-loop, compiler-optimization

我试图找出一个很好的循环展开来将两个矩阵相乘。

例如，如果我们想对 NxN 矩阵求和：

```
void SumMatrix(int *M, int n, int *result) 
{ 
  int  i,j; 

  *result = 0; 
  for (i=0; i<n; i++) 
    for (j=0; j<n; j++) 
      *result += M[j][i]; 
} 
```

我们可以完成这个 ：

```
void SumMatrix(int *M, int n, int *result) 
{ 
    int  i; 
    int  size = n*n; 
    int  last = size%8; 
    int  acc1 = 0; 
    int  acc2 = 0; 
    int  *pEnd = M+size-last; 

    for (; M<pEnd; M+=8) 
    { 
      acc1 += (*M + *(M+1)) + (*(M+2) + *(M+3));
      acc2 += (*(M+4) + *(M+5)) + (*(M+6) + *(M+7));
    } 

    /* adding the last entries */ 
    while (last--)  
        acc1 += *(M++); 

    *result = acc1+acc2;        
} 
```

但我试图找到一种（好的）方法来乘以 2 个矩阵，但目前没有找到。

**备注**: 这 不是 家庭 作业 , 我 今天 有 考试 , 刚刚 想到 这个 问题 , 我 觉得 这 可能 是 一个 很好 的 考试 题 , 不是 吗 ?

我会很感激任何帮助

问候

罗恩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T07:40:09.457

大多数编译器都会为您展开（您可能需要打开一个标志，或将其设置为优化级别 - 我相信`-funroll-loops`它适用于 gcc）。

此外，对于您的问题，它是 2D 矩阵这一事实并不重要，因为您正在将所有数字相加。如果您仅限于单个进程/线程，则按顺序将数字相加将是最快的，因为这具有最佳的缓存性能。您可能会从 SSE 或向量指令中获得一些好处；同样，今天的编译器可以为您解决如此简单的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T17:08:30.720

看看 ATLAS 项目有多复杂，它提供了 BLAS 库的优化版本（主要基于矩阵乘法）。它不仅应该考虑线程级并行性，还应该考虑内存层次结构（不仅是展开，还应该考虑缓存平铺和寄存器平铺、软件流水线等）。它通常由手写或由“自动调谐器”优化，如 ATLAS。如果您想解开线程级并行性，您最好使用“平铺算法”并在线程之间传播生成的平铺计算。

# java - 如何根据先前的下拉菜单更改下拉名称

> ID：10222868
> 
> 赞同：-1
> 
> 时间：2012-04-19T06:41:48.830
> 
> 标签：java

如何根据 JAVA 中的先前下拉列表更改下拉列表名称。我是java新手，所以..不是很熟悉。所以问这个问题。

这个论坛有很多问题在讨论“如何根据之前的选择改变一个下拉菜单的内容”。这个问题不一样。

例如说，

在第一个按钮中，假设您已询问您拥有哪种产品。

如果用户选择了一个只有英文开发的游戏。

第二个下拉列表应命名为位置/国家。

如果用户选择了具有多语言支持的操作系统。那么下一个按钮应该只命名为 Country。

怎么可能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T06:54:02.890

您可以查看此脚本并在浏览器中运行它，它与您可以应用到下拉菜单的想法相同

```
<head><style type="text/css">  
#style1 {background-color:yellow}  
#style2 {background-color:pink}  
#style1 p{width:300px;height:50px;border:2px solid  
#000;position:absolute;top:60px;left:100px} 
#style2 p{width:100px;border:5px solid #000;position:absolute;top:150px;left:300px} 
</style>  
<script>  
<!--  
function newid(){  
document.getElementsByTagName('body')[0].id="style2"}  
// -->  
</script></head><body id="style1">  
If I have &lt;body id="style1"&gt;<br />  
<a href="#" onclick="javascript:newid()">how</a> can I select the body tag and change the  

id to, for example, style2? <br />
<p>ioend</p>
</body> 
```

# windows-phone-7 - 在 Windows Phone 7 应用程序的进度之间停止的确定进度条？

> ID：10222873
> 
> 赞同：0
> 
> 时间：2012-04-19T06:42:12.713
> 
> 标签：windows-phone-7

我发现进度条的一个特殊行为，进度条动画在进度之间停止。

细节：-

1）我将进度条保留在名为 loading 的堆栈面板中

2）我正在使用性能进度条，它是 2 月发布的一部分

3）就在我的服务调用之后，我正在启用堆栈面板（其中包含进度条）

4）从服务调用中获取数据后，我将禁用堆栈面板（包含进度条）

但问题是进度条卡在进度之间。

即使我也使用正常的进度条，也会出现同样的问题。

我是不是做错了什么，你能纠正我吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T06:55:40.633

我曾经在这种情况下使用coding4fun [progressOverlay 控件](http://coding4fun.codeplex.com/wikipage?title=ProgressOverlay&referringTitle=Documentation)。更容易并且适合（我猜）您的要求。

检查上面的链接，您将找到有关其工作原理的示例，如果您有任何问题，请告诉我们。

问候，

# c# - 正则表达式验证器

> ID：10222875
> 
> 赞同：0
> 
> 时间：2012-04-19T06:42:21.373
> 
> 标签：c#, asp.net, regex, visual-studio

我有电话号码的文本框。我需要验证它。我的要求是

1.  只取 10 位以上的数字
2.  使用 (,),-, 之类的符号

任何人都可以为此提供帮助吗？我试过了

```
^[\d{10,14} +\s +\( +\)-]+$ 
```

但不工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T06:54:04.637

你可以看看[下面的文章](http://www.zorched.net/2009/05/08/password-strength-validation-with-regular-expressions/)，它将帮助你建立这样的表达。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T16:50:49.730

你还没有说你的正则表达式有什么问题（为什么它没有按预期工作），但我猜问题是它的匹配程度远远超过它应该匹配的程度。即它将匹配您集合中所有字符中的一个或多个（而不是仅在 10 到 14 个之间）。

我认为你的错误是你在你的[角色集中](http://www.regular-expressions.info/charclass.html)放了太多东西。您`+`在其中有 3 次符号，看起来您也尝试使用集合内的量词，这是不允许的。字符集相当于单字符[交替](http://www.regular-expressions.info/alternation.html)。所以，`[abc]`是等价的`a|b|c`。

我假设您希望输入介于 10 到 14 个数字之间，同时仍然允许以下字符的任何数字（零个或多个）：

```
+()-, 
```

正如其他一些人所建议的那样，您可以将所需的字符放在一个集合中，然后像这样指定量词：`^[0-9()-,+]{10,14}$`. 这几乎可以让你到达那里。唯一的问题是它允许 10 到 14 个这些字符中的任何一个，所以它会成功匹配这个：

```
,,,,,++()--- 
```

显然你不想要哪个（是吗？）

因此，为了更好地解决这个问题，您需要更具体地了解允许的内容以及允许在主题中的什么位置。因为我不确切知道你想要匹配什么，所以我不能带你走得更远。

希望我在这里提供的信息足以让您入门，如果您还有更多问题......好吧，这就是我们在这里的目的，所以请走开。

为了帮助您学习，以下是一些您可能会觉得有用的资源（这是可用资源的一小部分，所以请继续搜索自己）：

**测试工具**

*   [红宝石](http://www.rubular.com/)（红宝石）
*   [GSkinner 正则表达式测试器](http://gskinner.com/RegExr/)
*   [正则表达式英雄](http://regexhero.net/tester/)（dotnet）

**有用的信息**

*   [正则表达式.Info](http://www.regular-expressions.info/)
*   [Codeproject 30 分钟教程](http://www.codeproject.com/Articles/9099/The-30-Minute-Regex-Tutorial)

# ios - task_info 应用商店安全吗？

> ID：10222879
> 
> 赞同：0
> 
> 时间：2012-04-19T06:42:34.917
> 
> 标签：ios, memory, memory-management

基本上，我想知道我的应用在 iPhone 上运行时的实时内存使用情况，以防止它崩溃。我搜索并发现一些线程在谈论它，但它们都使用 task_info 功能，这在 Apple Document 中不可用。所以我的问题是：这个功能应用商店安全吗？如果没有，我有什么安全的方法来获取我的应用程序的实时内存使用情况吗？

提前致谢。

# java - 如何在 Java 代码中使用资源包文件？

> ID：10222884
> 
> 赞同：1
> 
> 时间：2012-04-19T06:43:01.513
> 
> 标签：java, resourcebundle

我在 JSTL `<fmt>`taglib 可以使用的资源包文件中获得了本地化消息。现在我还想在我的 Java 代码中使用这些消息。如何做呢？

我需要的是`getMessage()`一个键和`getParameterizedMessage()`一个带参数的键。

* * *

**更新**以下似乎有效：

```
ResourceBundle messages = ResourceBundle.getBundle("messages");
String str = messages.getString("PF1");
System.out.println(str);

Object[] messageArguments = {
    "test"
};

MessageFormat formatter = new MessageFormat("");
formatter.applyPattern(messages.getString("IT4"));
String output = formatter.format(messageArguments);
System.out.println(output); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T06:50:42.913

加载您的消息`java.util.Properties`并拥有一个辅助类，如果给定一个键，它将返回属性中的值。

如果您正在查看 I18 支持，可以在[此处找到基本入门](http://docs.oracle.com/javase/tutorial/i18n/intro/index.html)

# java - 在 log4J 中使用时缓冲区如何在 Async Appender 中有所帮助

> ID：10222889
> 
> 赞同：1
> 
> 时间：2012-04-19T06:43:39.500
> 
> 标签：java, log4j

我在我的应用程序中使用 asyncappender，它下面有四个 rollingfileappenders。我无法获得其中使用的缓冲区的详细信息。我需要澄清：

1.  缓冲区如何工作？
2.  记录其中的事件后如何刷新缓冲区？
3.  我们可以使用配置文件（.xml 文件）执行此刷新，还是需要在我们的 java 类中编写代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T10:21:03.023

1.  有一个放置日志事件的队列。有一个调度线程，它从队列中获取事件并将其发布到底层附加程序。

2, 3\. 它会在某个时候被线程自动刷新。

您无法手动控制刷新，我认为这是设计使然，因为它是实现细节。

我想异步追加器对文件追加器没有任何意义，因为它们通常工作得足够快。我认为它的主要目的是围绕可能存在临时网络故障的数据库或 smtp 附加程序。

# sql-server - 查询反斜杠

> ID：10222895
> 
> 赞同：0
> 
> 时间：2012-04-19T06:44:05.947
> 
> 标签：sql-server, sql-server-2000

我正在尝试查询包含反斜杠 (/) 字符串的表。例如字符串是： test test/test test4 test5 当我使用 wild char 时，我在结果集中没有得到“test/test”。我在网上搜索在查询中包含反斜杠，但找不到解决方案。有人对这个问题有任何想法吗？

编辑：这是一个简单的查询，如：

```
SELECT * FROM aTable; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-05-27T11:16:12.700

我相信你应该避开反斜杠。当我使用 PHP 的 echo 语句时，我需要这样做。

您可以通过在要转义的反斜杠之前键入反斜杠来转义反斜杠，例如：\\

您可能还想在表名“aTable”中添加反引号，或者在那里；它有可能不起作用。

# c - 如何在 GCC 4.4.1 中打印 64 位整数？

> ID：10222899
> 
> 赞同：13
> 
> 时间：2012-04-19T06:44:12.010
> 
> 标签：c, gcc, codeblocks

我在 GCC 4.4.1 中使用[Code::Blocks](http://www.codeblocks.org/)，我似乎无法从我的 C 代码中打印 64 位有符号整数。

这段代码：

```
long long longint;

longint = 0x1BCDEFABCDEFCDEF; /* 2003520930423229935 */
printf("Sizeof: %d-bit\n", sizeof(longint) * 8);     /* Correct */
printf("%llx\n", longint);                           /* Incorrect */
printf("%x%x\n", *(((int*)(&longint))+1), longint);  /* Correct */
printf("%lld\n", longint);                           /* Incorrect */ 
```

产生输出：

```
Sizeof: 64-bit
cdefcdef
1bcdefabcdefcdef
-839922193 
```

64 位算术似乎可以正常工作：

```
longint -= 0x1000000000000000;
printf("%x%x\n", *(((int*)(&longint))+1), longint); 
```

给出：

```
bcdefabcdefcdef 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-19T06:54:36.353

看看能不能`%I64d`帮到你。`%lld`很好，`long long int`但有时在 Windows IDE 上情况会变得非常不同

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-19T06:56:51.163

要（在 C99 及更高版本中）可移植地打印 64 位整数，您应该`#include <inttypes.h>`使用 C99 宏`PRIx64`和`PRId64`. 那将使您的代码；

```
printf("Sizeof: %d-bit\n", sizeof(longint) * 8);
printf("%" PRIx64 "\n", longint);
printf("%" PRId64 "\n", longint); 
```

编辑：有关更多示例，请参阅[此问题](https://stackoverflow.com/questions/6850737/why-can-one-printf-in-c-not-print-two-64-bit-values-at-the-same-time)。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-19T06:59:22.730

这取决于操作系统。如果您在几乎任何使用 GLIBC 的 GCC 上执行此操作，则 %llx 可以工作。

但是，如果您使用的是 mingw 编译器，那么这将使用 Microsoft 库，您需要查看它们的[文档](http://msdn.microsoft.com/en-us/library/tcxf1dw6.aspx)。

这会将您的程序更改为：

```
longint = 0x1BCDEFABCDEFCDEFLL; /* 2003520930423229935 */
printf("Sizeof: %d-bit\n", sizeof(longint) * 8);     /* Correct */
printf("%I64x\n", longint);                           /* Incorrect */
printf("%x%x\n", *(((int*)(&longint))+1), longint);  /* Correct */
printf("%I64d\n", longint); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-03-12T13:49:10.097

longint = 0x1BCDEFABCDEFCDEF; /* 2003520930423229935 */ 你可以打印为-

printf("%llx", longint);

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-19T06:57:24.937

终于明白了：

```
longint = 0x1BCDEFABCDEFCDEF; /* 2003520930423229935 */
printf("%I64d\n", longint);
printf("%I64x\n", longint); 
```

印刷：

```
2003520930423229935
1bcdefabcdefcdef 
```

谢谢@npclaudiu！

# java - hibernate-search 和 hibernate-core 的比较

> ID：10222901
> 
> 赞同：-1
> 
> 时间：2012-04-19T06:44:14.143
> 
> 标签：java, hibernate, lucene, hibernate-search

我有一些对象，我有两种存储它们的方法：使用带有索引的休眠搜索（lucene），或者作为休眠实体（postgres 记录）。

我本身不需要全文搜索，只需按属性值（完全匹配）和范围进行搜索。

这两个用例是否有任何性能比较？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T06:49:27.320

这个问题就像比较苹果和梨。如果您需要持久存储以及查询和检索实体的能力，您需要使用休眠核心。

Hibernate Search 主要是对 Hibernate Core 产品（全文）搜索的扩展。是的，也可以将实体值存储在索引中并通过投影检索它们。但是，在这种情况下，您不再处理实体，而是处理对象数组。您错过了 Hibernate 提供的生命周期保证。

我的猜测是您想要 Hibernate Core (ORM) 和 Criteria 查询。

# java - 根据从另一个数据表中选择记录的复选框填充数据表

> ID：10222903
> 
> 赞同：0
> 
> 时间：2012-04-19T06:44:22.527
> 
> 标签：java, jsf, checkbox, datatable, primefaces

我想用最后检查的数据库的角色填充角色数据表。我该如何实施？

```
public class Database implements Serializable {
    private List<Role> roles;
    private String name;
    private boolean selected;
    ...
}

public class Role implements Serializable {
    private String name;
    ...
} 
```

**data.xhtml**看起来像这样

```
...
<p:dataTable id="databases" var="database" value="#{dataBean.databases}" >  
    <p:column>  
        <p:selectBooleanCheckbox value="#{database.selected}">  
            <p:ajax update="roles, databases" immediate="true" />  
        </p:selectBooleanCheckbox>  
    </p:column>  
    <p:column headerText="Databases">  
        <h:outputText value="#{database.name}" />  
    </p:column>  
</p:dataTable>  

<p:dataTable id="roles" var="role" value="#{dataBean.roles}" >                
    <p:column headerText="Roles">
        <h:outputText value="#{role.name}" />
    </p:column>
</p:dataTable> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T07:50:18.993

**数据.xhtml**

```
<p:dataTable id="databases" var="database" value="#{dataBean.databases}" > 

<p:selectBooleanCheckbox value="#{database.selected}">  
    <f:ajax execute="@this" listener="#{dataBean.updateRoles}" />
    <f:attribute name="selRec" value="#{database}" />
</p:selectBooleanCheckbox> 
```

**数据豆**

```
...

public void updateRoles(AjaxBehaviorEvent event) {  
    //database is theobject in the current row 
    Database database = (Database) event.getComponent().getAttributes().get("selRec");       
}   
... 
```

# jquery - Jquery Mobile 小部件是基于 jQuery UI 的吗？

> ID：10222904
> 
> 赞同：0
> 
> 时间：2012-04-19T06:44:27.240
> 
> 标签：jquery, jquery-ui, jquery-mobile

如果是，是否有任何特定的限制要满足移动设备？

如果没有，为什么？那么为 jQuery Mobile 创建 CUSTOM 小部件的文档在哪里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T13:50:12.830

它不是文档的一部分，但这是编写自定义 jQuery 插件的起点：[https ://gist.github.com/1071960](https://gist.github.com/1071960)

# asp.net - 表单上传查询

> ID：10222905
> 
> 赞同：0
> 
> 时间：2012-04-19T06:44:44.837
> 
> 标签：asp.net, html, file-upload

我是新手，需要通过表单上传上传 ~2GB 文件。

我不确定 2GB 文件是否会在“操作 URL” - (http://localhost:49980/videoupload.aspx) 页面上作为一个整体接收，还是会以部分/块的形式接收？

提前感谢您的澄清！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T07:42:36.157

首先[增加最大上传大小](http://weblogs.asp.net/jgalloway/archive/2008/01/08/large-file-uploads-in-asp-net.aspx)

machine.config 中设置了 4MB 默认值，但您可以在 web.config 中覆盖它。例如，要将上传限制扩大到 20MB，您可以这样做：

然后以字节块上传您的文件。[ASP.Net：编写文件块..HTTP 使用简历](https://stackoverflow.com/questions/2069880/asp-net-writing-chunks-of-file-http-file-upload-with-resume)上传文件和[使用 HttpModule 在 ASP.NET 中上传大文件](http://dotnetslackers.com/Community/blogs/haissam/archive/2008/09/12/upload-large-files-in-asp-net-using-httpmodule.aspx)。

你可以这样做：[推荐最佳 ASP.NET 文件上传工具](https://stackoverflow.com/questions/9366172/recommendations-for-best-asp-net-file-upload-tool)

供参考：
[将大文件上传到 ASP.NET MVC](https://stackoverflow.com/questions/1046230/streaming-large-file-uploads-to-asp-net-mvc)
[使用 Flash 和 ASP.NET 使用进度条上传多个](http://www.codeproject.com/Articles/15742/Multiple-File-Upload-With-Progress-Bar-Using-Flash)
[文件 在 .NET 中上传大文件](https://stackoverflow.com/questions/285120/upload-large-files-in-net)

# python - /admin/ 处的 Python ValueError 太多值无法解包

> ID：10222906
> 
> 赞同：1
> 
> 时间：2012-04-19T06:44:55.327
> 
> 标签：python, django

在我单击管理员登录页面上的登录按钮后，大家好。我收到此错误：

```
ValueError at /admin/
too many values to unpack
Request Method: POST
Request URL:    http://localhost:8000/admin/
Django Version: 1.3.1
Exception Type: ValueError
Exception Value:    
too many values to unpack
Exception Location: /home/justin/Workspace/training/django/env/local/lib/python2.7/site-packages/django/contrib/auth/models.py in check_password, line 42
Python Executable:  /home/justin/Workspace/training/django/env/bin/python
Python Version: 2.7.2
Python Path:    
['/home/justin/Workspace/training/django/test_project',
 '/home/justin/Workspace/training/django/env/local/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg',
 '/home/justin/Workspace/training/django/env/local/lib/python2.7/site-packages/pip-1.1-py2.7.egg',
 '/home/justin/Workspace/training/django/env/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg',
 '/home/justin/Workspace/training/django/env/lib/python2.7/site-packages/pip-1.1-py2.7.egg',
 '/home/justin/Workspace/training/django/env/lib/python2.7',
 '/home/justin/Workspace/training/django/env/lib/python2.7/plat-linux2',
 '/home/justin/Workspace/training/django/env/lib/python2.7/lib-tk',
 '/home/justin/Workspace/training/django/env/lib/python2.7/lib-old',
 '/home/justin/Workspace/training/django/env/lib/python2.7/lib-dynload',
 '/usr/lib/python2.7',
 '/usr/lib/python2.7/plat-linux2',
 '/usr/lib/python2.7/lib-tk',
 '/home/justin/Workspace/training/django/env/local/lib/python2.7/site-packages',
 '/home/justin/Workspace/training/django/env/local/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg-info',
 '/home/justin/Workspace/training/django/env/lib/python2.7/site-packages',
 '/home/justin/Workspace/training/django/env/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg-info']
Server time:    Thu, 19 Apr 2012 01:36:33 -0500 
```

谁能帮我这个？我不知道错误在哪里。

谢谢，贾斯汀

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-19T07:08:19.083

可能您存储的密码错误，您是否更改了设置文件中的密钥？或者使用 Django 1.4 修改密码但在 Django 1.3 上运行？看到这篇文章[ValueError: Too many values to unpack Django](https://stackoverflow.com/questions/8954270/valueerror-too-many-values-to-unpack-django)

# regex - 正则表达式将日期与空格匹配

> ID：10222917
> 
> 赞同：2
> 
> 时间：2012-04-19T06:46:13.383
> 
> 标签：regex

我目前有以下正则表达式来匹配日期：

```
([012]?\d)[\/.-]([0123]?\d)[\/.-]([012]\d{3})\b 
```

例如，这将匹配`12/24/2011`。我将如何制作正则表达式，使其也与项目之间的空格匹配，`12 24 2011`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T06:47:48.353

在字符类中添加空格字符：

```
[\/. -]
    ^ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T07:26:02.850

您的问题已经得到解答，但我发现您的正则表达式存在其他一些问题。

1.  为什么只在末尾有边界这个词？您也应该在开始时使用它。

2.  您的正则表达式也将匹配“1.3/2012”之类的内容。您可以通过使用反向引用轻松改进这一点。

3.  您需要所有这些捕获组吗？

所以我的建议是这样

```
\b([012]?\d)([\/. -])([0123]?\d)\2([012]\d{3})\b
            ^^^^^^^^^           ^^
         store the first       match
         occurence in          group 2
         group 2 
```

[在 Regexr 上](http://regexr.com?30mo2)查看

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T06:52:36.793

用这个：

```
([012]?\d)[ \/.-]([0123]?\d)[ \/.-]([012]\d{3})\b 
```

我认为您必须先添加空格。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T06:49:55.847

```
([012]?\d)([\/.-]|\s)([0123]?\d)([\/.-]|\s)([012]\d{3})\b 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-19T07:11:16.877

```
([012]?\d)[\/.-\s]([0123]?\d)[\/.-\s]([012]\d{3})\b 
```

# background-image - 带有哈希的同一页面上的多个全屏背景 - CSS 或 Jquery

> ID：10222918
> 
> 赞同：0
> 
> 时间：2012-04-19T06:46:27.843
> 
> 标签：background-image, fullscreen

我制作了一个网站，它有一个带有左右箭头的 jquery 滑块，可以移动到下一张幻灯片（网页）。所有内容都包含在一个网页中并使用哈希。 [http://www.ilandeistudio.com](http://www.ilandeistudio.com)

它需要为每个页面（散列）设置不同的全屏背景，所以我使用了一种 CSS 技术，将全屏背景放在我在这里找到的 DIV 中（CSS 技术 1） [http://css-tricks.com/perfect-full-页面背景图像/](http://css-tricks.com/perfect-full-page-background-image/)

这可行，但图像的高度超出了屏幕的底部，因此添加了垂直滚动条，您无法看到整个背景图像。我不介意稍微扭曲背景（它们都是 w1024px x h682px）我只希望整个图像在可视区域中。

我无法让它与 CSS 一起使用，如果有人有建议，请告诉我，否则也许有人可以推荐一个 jquery 解决方案；但我不知道如何使大多数这些 jquery 示例在多个哈希的 DIV 中工作。

这是我现在使用的 CSS：

```
 img.bg {
        /* Set rules to fill background */
        min-height: 100%;
        min-width: 1024px;

        /* Set up proportionate scaling */
        width: 100%;
        height: auto;

        /* Set up positioning */
        position: absolute;
        top: 0;
        left: 0;
    }

    @media screen and (max-width: 1024px){
        img.bg {
            left: 50%;
            margin-left: -512px; }
    } 
```

以下是其中两张幻灯片的示例

```
 <div id="home" class="slide">
                <img src="images/bg_home1.jpg" class="bg">
          <div class="outer-wrapper">
                  <div class="inner-wrapper">
                        <div class="header">
                            <a href="#home" class="special-anchor"></a>

                            <div class="nav">
                                <a href="#" class="prev-button special-anchor" title="Previous">Previous</a>
                                <span class="rightnav"><a href="#" class="next-button special-anchor" title="Next">Next</a></span>
                            </div>
                        </div>
                        <div class="content">
                                test content
                        </div>
                        <!--Content ends-->
                    </div>
                </div>
          </div>

          <div id="about" class="slide">
                <img src="images/bg_about1.jpg" class="bg">
                <div class="outer-wrapper">
                  <div class="inner-wrapper">
                        <!--Header starts-->
                        <div class="header">
                            <a href="#about" class="special-anchor"></a>
                            <!--Navigation starts-->
                            <div class="nav">
                                <a href="#" class="prev-button special-anchor" title="Previous">Previous</a>
                                <span class="rightnav"><a href="#" class="next-button special-anchor" title="Next">Next</a></span>
                            </div>
                            <!--Navigation ends-->
                        </div>
                        <!--Content starts-->
                        <div class="content">
                        test content 02
                        </div>
                        <!--Content ends-->
                    </div>
                </div>
          </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T02:00:37.660

代码本身看起来是正确的。您没有包括但我会确保的一件事是您**列出的标题和导航绝对定位**在页面上，而不是向左浮动并使用边距来定位内容。这将为页面的 100% 添加空间。

所以图像本身正在扩展到页面的高度，并且在此之上添加了标题和导航的高度。如果您似乎在滚动这些对象的高度，这很可能就是问题所在。

# java - Java swing GUI 组件在从单独线程通知的 Observer update() 后未显示

> ID：10222920
> 
> 赞同：2
> 
> 时间：2012-04-19T06:46:34.677
> 
> 标签：java, multithreading, swing

我的应用程序基本上使用 apache 的 httpclient 连接到服务器并为用户做一些事情。

我是一个java初学者（虽然不是一个开发初学者），所以很多java特定的方法可能已经被冷静地忽略了。

**描述**

*   该应用程序使用带有弹出菜单的 TrayIcon 作为唯一的用户界面，并通过托盘消息或弹出 [确认] 对话框做出反应。
*   它使用线程是因为 httpclient 在等待响应时有效地阻塞了主线程
*   使用客户端-服务器来确保仅单个实例和对第二个实例尝试的反应
*   采用观察者/可观察模式来响应 httpclient 和单实例看门狗服务器的消息
*   主要行为由一个**Controller**类控制，它是唯一的Observer；与 httpclient 相关的所有内容都在一个单独的**WebClient**类中，该类实现了 Runnable 并扩展了 Observable；然后是**AttServer** ，它又是 Runnable 和 Observable 并控制服务器侦听器周围的一切（实际上并没有太多）。

这是我在 Java 中的第一个应用程序，可能有很多晦涩难懂的地方..:(

**问题**

期望的行为是，每当用户尝试运行此应用程序的第二个实例时，它都会尝试在端口 X 上绑定一个套接字侦听器，并在失败时向该端口发送一条字符串消息。“主”应用程序接受消息并响应显示确认对话框，要求用户输入一些信息。

在我添加客户端服务器之前，一切都运行良好；第二个实例成功触发了观察者的update()方法，观察者正确分辨出发生了什么并触发相应的方法；然后在出现第一个新的 GUI 组件（确认对话框）时，什么都没有发生：

*   该应用程序不执行任何操作
*   System.out 中没有抛出错误或异常
*   托盘图标继续正常工作（右键单击显示菜单等）

..只是对话框之后的所有指令都没有执行，对话框也没有出现。

**怪异#1**

当用户使用托盘图标菜单触发其他显示对话框的命令时，GUI 会以某种方式咳出并以正确的顺序显示两个（或更多）对话框（首先显示卡住的隐藏对话框，然后显示第二个新的一）一切似乎都是正确的状态，并且所有命令都正确执行（尽管其中一些命令“稍后”执行）。

**怪异 #2**

我猜这是由于摆动与线程不兼容造成的；但是，当 update() 方法从 httpclient（也是一个单独的线程）启动时，GUI 工作得很好。Observer 获得通知方式的唯一区别是**WebClient**在某些用户操作之后调用 notifyObservers()（尽管在单独的线程中并且在（最坏的情况下）30 秒超时之后，并且**AttServer**在 catch() 块中调用 notifyObservers() ，因为当指定的端口已经绑定时会抛出 IOException。

**奇怪#3**

这个问题至少可以说是不规则的。它通常发生在开发环境（netbeans）中，虽然有时它不会——起初我的印象是通过调用另一个（虚拟）JDialog来解决它，在实际有问题的对话框之前故意隐藏它—— ——似乎秋千需要一点“推门”；尽管在将项目构建成 jar 或 exe（通过 launch4j）后，问题又回来了。然后我尝试对所有的摆动对话框使用单个 JFrame 组件，它以某种方式提供了帮助 --- 有时当输出 jar 运行时它会正常工作，第二天它再次隐藏对话框。

我完全迷失了，在地球上寻找解决方案，真的什么也没找到。我希望其他人可能会遇到一些类似的问题，并且作为一个更有经验的 Javaman 找到了解决方案。我还在主 JFrame 实例上尝试了一些 doLayout()、validate()、revalidate()、repaint()、update() 调用，但没有成功。

有希望 :) 感谢您的阅读，更感谢您的任何想法。

**代码示例**

这是来自**AttServer**的 run() 函数——不工作的 update()s 的来源 ..（它有点硬编码，因为主要功能在那里，我在其他地方卡住了..）

```
public void run() {

    this.addObserver( Controller.getInstance() );

    setChanged();

    // this.command == INIT set and new thread with AttServer called in the beginning of the main()
    if( null != this.command ) {

        switch( this.command ) {
            case INIT:
                try {
                    init();
                } catch( IOException ex ) {
                    notifyObservers( new ErrorEvent( 100 , "Could not bind the specified port." ) );
                }
            break;
            default:
        } //switch

    // no command, looks like an incoming connection
    } else {

        try {
            DataInputStream in = new DataInputStream( socket.getInputStream() );

            String inputLine;

            while( ( inputLine = in.readLine() ) != null ) {

                if( inputLine.trim().equals( EventType.CLOCKIN.toString() ) ) {

                    notifyObservers( EventType.CLOCKIN );

                    return;
                }
            }
        } catch( IOException ex ) {
            //todo
        }
    }
} 
```

..这是栅栏的另一面，update() 方法：

```
public void update( Observable obj, Object arg) {
    // received a remote request *******************************************
    if( obj instanceof AttServer
        && arg instanceof EventType ) {

        EventType command = (EventType) arg;

        Attendance.debugMsg( "Received " + command.toString() + " request from AttServer" );

        if( false == isOnClock ) {
            doClock( true , true );
        }
    } // .......... 
```

.. 这是从 update() 调用的 doClock() 方法的本质——实际上什么都没有，即使在调用之后立即显示对话框，或者当它在 update() 方法中正确显示时，它不起作用。

```
(overloaded with default data)
public static void doClock( Boolean clockIn , Boolean confirm , String message , String title ) {

    Event lastEvent = Log.getLastClock();

    if( confirm ) {
        if( JOptionPane.NO_OPTION == JOptionPane.showConfirmDialog( mainFrame , message , title , JOptionPane.YES_NO_OPTION ) ) {
            return;
        }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T07:00:35.403

如果不通读整个文档（！！！），我猜您没有通过[Event Dispatch Thread (EDT)](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)更新 GUI 。
GUI 应该仅**由*单个线程*EDT**更新。
您可以在应用程序中拥有后台线程，但必须将 GUI 的更新传递给 EDT**才能**完成。
不要在你自己的线程中触摸任何 Swing 控件，即除 EDT 之外。
否则你会遇到很多问题。
不通过 EDT 显然是错误的

# .net - 非泛型声明中不允许使用约束

> ID：10222922
> 
> 赞同：4
> 
> 时间：2012-04-19T06:46:36.073
> 
> 标签：.net, generics, methods

```
 private Result Execute(
     out T returnValue, 
     string storedProcedureName, 
     Hashtable parameters, 
     ExecuteType executeType) 
   where T : class 
```

以下错误是什么意思，我该如何解决？

在哪里出错：非泛型声明中不允许使用约束

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-19T06:53:07.400

```
private Result Execute<T>(
                           out T returnValue, 
                           string storedProcedureName, 
                           Hashtable parameters, 
                           ExecuteType executeType
                         ) where T : class 
```

注意`<T>`后面的必填项`Execute`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-05T09:32:48.623

是的，它也适用于扩展方法。

```
class Class1<T> where T:class
{
    public void MethodA()
    {
        Console.WriteLine("Method A");
    }
}

static class ExtenstionTest
{
    public static void MethodA<T>(this Class1<T> A1, int a) where T : class
    {
        Console.WriteLine("Extension Method A" + a);
    }
} 
```

# java - Java 中的高效 JSON 搜索

> ID：10222926
> 
> 赞同：1
> 
> 时间：2012-04-19T06:46:53.743
> 
> 标签：java, json

再会！在 Java 中，有没有办法通过键有效地搜索大型 JSON。

我的示例 JSON：

```
{
    "my_data": [
        {
            "id": "12",
            "message": "z1",
            "text": "hai"
        },
        {
            "id": "13",
            "message": "z2",
            "text": "get"
        },
        {
            "id": "14",
            "message": "z3",
            "text": "up"
        }
    ]
} 
```

'my_data' JsonArray 非常冗长。由于它非常大，因此在其中搜索特定单词需要更多时间：

```
my_data.get(index).getString("text").contains(SEARCH_STRING) 
```

是否有任何预定义的库或标准技术可以有效地搜索？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T06:50:49.880

由于它是纯文本数据，您可以使用[Lucene](http://lucene.apache.org/core/)等标准文本搜索工具对其进行处理，并据此找到您的条目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T06:59:22.340

快速 json 解析器是[Jackson Java JSON-processor](http://jackson.codehaus.org/) ，但它必须按顺序读取整个 String 才能找到您的值。因此，如果您需要更快的东西，您可能必须以 JSON 以外的另一种格式保存数据，您将需要某种索引。（但这取决于你想做什么以及它必须有多快......）

# python - PyQt - 从 QThread 关闭 QMessageBox

> ID：10222928
> 
> 赞同：0
> 
> 时间：2012-04-19T06:46:58.837
> 
> 标签：python, pyqt, midi

我正在做一个项目，我试图让 QMesssageBox 以“已接受”条件退出以响应传入的 MIDI 数据。MIDI 输入库 (pygame.midi) 需要轮询输入以查看是否有任何数据到达，因此我启动了一个 QThread 来处理这个问题，并在数据到达缓冲区时让它发出一个“dataReceived”信号。然后我将此信号附加到 QMessageBox 的 accept() 插槽：

```
def midiLearn(self, mainWindowInstance, widget):

    class midiLearnWait(QtCore.QThread):

        dataReceived = QtCore.pyqtSignal()

        def __init__(self, midiInputDevice, parent=None):
            super(midiLearnWait, self).__init__(parent)
            self.midiInputDevice = midiInputDevice

        def run(self):
            if self.midiInputDevice.poll():
                self.dataReceived.emit()

    if self.midiInputDevice:
        midiLearnMessage = QtGui.QMessageBox(1, 'MIDI Learn', 'Please move a controller.',
                                                         QtGui.QMessageBox.Cancel)
        midiInputThread = midiLearnWait(self.midiInputDevice)
        #just trigger accept for testing
        midiInputThread.dataReceived.connect(lambda: midiLearnMessage.accept())            
        midiInputThread.start()            
        ret = midiLearnMessage.exec_()
        if ret == QtGui.QMessageBox.Cancel:
            return
    else:
        QtGui.QMessageBox.warning(mainWindowInstance, 'MIDI Error', 'No MIDI input selected.') 
```

不幸的是，这似乎不起作用——当 MIDI 数据被发送到程序时，消息框永远不会被接受。在这一点上，我不完全确定问题是否与我配置 MIDI 库的方式有关，或者与我如何完成此 GUI 代码有关。如果有人能指出我尝试设置代码的 GUI 方面的任何错误，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T16:57:55.960

`midiInputDevice.poll()`不应该是阻塞调用，因此您的线程在启动时运行一次并立即退出......并且可能轮询调用将返回false，这就是框留在那里的原因。

您要么必须使用`midiInputDevice.read()`（应该阻塞），要么循环轮询设备，直到有一些数据。

# iphone - Cocoa：获取上一个视图的标题

> ID：10222931
> 
> 赞同：0
> 
> 时间：2012-04-19T06:47:12.013
> 
> 标签：iphone, cocoa-touch, uinavigationcontroller

我正在构建一个基于导航的应用程序（导航控制器中嵌入的视图很少）。我想知道是否可以从前一个视图（视图 A）的视图 B 内部获取 title 属性，然后将其 NSLog 输出！

谢谢

卢卡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T06:49:19.307

是的你可以。

查看 UINavigationController 的[`viewControllers`](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UINavigationController_Class/Reference/Reference.html#//apple_ref/occ/instp/UINavigationController/viewControllers)属性。

这将返回用户当前正在查看的视图控制器的数组。因此，查看最后一个视图控制器（或“n-2，其中 n 是数组中项目的数量”，[根据我为您链接的 Apple 文档](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UINavigationController_Class/Reference/Reference.html#//apple_ref/occ/instp/UINavigationController/viewControllers)），您可以从该视图控制器的导航栏中获取您的标题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T06:50:20.230

```
NSMutableArray *activeControllerArray = [self.navigationController.viewControllers mutableCopy];

ControllerA myController;
For(int i = 0, i <[activeControllerArray  count], i++) {
    if([[activeViewController objectAtIndex:i] isKindOfClass:[ControllerA class]) {
        myController = [activeViewController objectAtIndex:i];
        NSLog(@"%@",myController.title);
     }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T07:04:23.220

ViewControllerA *viewA = (ViewControllerA *)[self.navigationController.viewControllers objectAtIndex:self.navigationController.viewControllers.count-2];

NSLog(@"%@",viewA.title);

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T07:05:06.530

A 类 .m 文件

```
{
   NSString *titleA = @"Khalid"; 
   ClassB *bObj = [[ClassB alloc] init];
   bObj.title = titleA;
   [self.navigationController pushViewController:bObj animated:YES];
} 
```

# linux - grep 唯一事件

> ID：10222937
> 
> 赞同：0
> 
> 时间：2012-04-19T06:48:10.323
> 
> 标签：linux, unix, awk

我有一个日志文件 ( `file.log`)，其中包含多个 id，即`82244956`在一个文件中。 `file.log`已使用以下命令创建：

```
gzip -cd /opt/log.gz | grep "JBOSS1-1" >> ~/file.log 
```

例子 ：

```
2012-04-10 09:01:18,196 LOG  (7ysdhsdjfhsdhjkwe:IN) JBOSS1-1 (RP-yedgdh5567) [PayPalWeb] Fetch data with id: 82244956  
2012-04-10 09:02:18,196 LOG  (24343sdjjkidgyuwe:IN) JBOSS1-1 (RP-yedgdh5567) [PayPalWeb] Fetch data with id: 82244956  
2012-04-10 09:03:18,196 LOG  (6744443jfhsdgyuwe:IN) JBOSS1-1 (RP-yedgdh5567) [PayPalWeb] Fetch data with id: 82244957  
2012-04-10 09:04:18,196 LOG  (7ysdhsd5677dgyuwe:IN) JBOSS1-1 (RP-yedgdh5567) [PayPalWeb] Fetch data with id: 82244957 
```

同样，我们有 10000 行具有不同的 id（但每个 id 重复 2-3 次。此示例中的示例顶部和底部 2 行分别以 id 82244956 和 82244957 重复）。我们需要基于 UNIQUE id 的结果集（匹配 id 中的任何行），即：

```
2012-04-10 09:01:18,196 LOG  (7ysdhsdjfhsdhjkwe:IN) JBOSS1-1 (RP-yedgdh5567) [PayPalWeb] Fetch data with id: 82244956  
2012-04-10 09:03:18,196 LOG  (6744443jfhsdgyuwe:IN) JBOSS1-1 (RP-yedgdh5567) [PayPalWeb] Fetch data with id: 82244957 
```

我试图在 Linux 上 awk 程序，但没有成功：

```
awk ' { arr[$1]=$0 } END { for ( key in arr ) { print arr[key] } } ' file.log >> final-report.log 
```

或者更好的方法是`file.log`仅使用不同的 id 创建。

请告知我该如何修改它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T06:57:02.927

`$1`是第一个字段，日期。用术语来说，是`id`最后一个字段。所以：`$NF``awk`

```
awk '{arr[$NF] = $0} END { for (key in arr) { print arr[key] } }' file.log >> final-report.log 
```

这将使用给定键保留最后一条记录。要保留第一条记录，您必须在脚本的主要处理部分进行条件赋值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T07:40:17.873

```
awk '!_[$NF]++' file.log >> final-report.log 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T09:53:48.240

您可以通过运行以下脚本来获得结果。要保留第一个记录，您应该在脚本的主要处理部分进行条件判断。

```
awk -F"\t" '{delete arr;split($0,arr,"id:"); id_num=arr[2];
             if(!(id_num in dic)){line[id_num]=$0;dic[id_num];}}
            END{for(i in line)print line[i] }' file.log  > result.log 
```

# android - 如何在父布局上获得新闻事件？

> ID：10222938
> 
> 赞同：1
> 
> 时间：2012-04-19T06:48:13.713
> 
> 标签：android

我正在使用 Android 2.2.3。我在 FrameLayout 中有一个 Button，以便该按钮覆盖整个 FrameLayout。

当我按下按钮时，只有按钮的选择器会收到按下事件。由于按钮位于框架的顶部，因此框架的选择器不会收到此事件。即：属性“android:state_pressed="true" 发生在按钮而不是框架上。

我需要新闻事件而不是点击事件。

我想在按下按钮时将框架的选择器设置为 android:state_pressed="true" 。

我试过使用

```
mMuteBtn.setOnTouchListener(new View.OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            if (event.getAction() == MotionEvent.ACTION_DOWN) {
                mFrameMute.setPressed(true);
            }
            if (event.getAction() == MotionEvent.ACTION_UP) {
                mFrameMute.setPressed(false);
            }
            return false;   
        }
    }); 
```

但***它阻止了***我还需要进行其他一些工作的 onClick() 事件。

**我的 main.xml 文件是：**

```
 <FrameLayout
    android:id="@+id/frame_mute1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_weight="1"
    android:background="@drawable/selector_background" >

    <Button
        android:id="@+id/mute_btn1"

        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="1"

        android:background="@android:color/transparent"
        android:drawableTop="@drawable/selector_button"

        android:text="mute"
        android:textColor="@android:color/black"
        android:textSize="12sp" />

</FrameLayout> 
```

**选择器背景：**

```
<item android:drawable="@drawable/bg2" android:state_pressed="true"/>
<item android:drawable="@drawable/bg3" android:state_selected="true"/>

<!-- default -->
<item android:drawable="@drawable/bg1"/> 
```

**选择器按钮：**

```
<item android:drawable="@drawable/image2" android:state_pressed="true"/>
<item android:drawable="@drawable/image3" android:state_selected="true"/>

<!-- default -->
<item android:drawable="@drawable/image1"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T07:41:15.013

也许您可以从返回方法开始`true`，`onTouch`以便继续接收触摸事件。

您是否尝试将 FrameLayout 设置为可点击和/或可聚焦？也许它有帮助：

```
mFrameMute.setClickable(true);
mFrameMute.setFocusable(true); 
```

如果你不能让它工作，那么一个丑陋但不是那么糟糕的方法就是以`FrameLayout`编程方式改变背景。

# magento - 任何页面都可能出现错误，包括管理页面

> ID：10222939
> 
> 赞同：0
> 
> 时间：2012-04-19T06:48:16.720
> 
> 标签：magento

当打开一个页面时，可能会得到一个错误信息，它甚至是现在。

其他人有这个问题或对如何解决这个问题或从哪里开始寻找有任何想法？

```
/**
 * Retrieve application root absolute path
 *
 * @param string $type
 * @return string
 */
public static function getBaseDir($type = \'base\')
{
    return self::getConfig()->getOptions()->getDir($type);  // Line 296
} 
```

```
Notice: Trying to get property of non-object in /var/www/html/magento/lib/Varien/Autoload.php on line 81 
Notice: Trying to get property of non-object in /var/www/html/magento/lib/Varien/Autoload.php on line 84 
Notice: Trying to get property of non-object in /var/www/html/magento/lib/Varien/Autoload.php on line 81 
Notice: Trying to get property of non-object in /var/www/html/magento/lib/Varien/Autoload.php on line 84 
Notice: Trying to get property of non-object in /var/www/html/magento/lib/Varien/Autoload.php on line 81 
Notice: Trying to get property of non-object in /var/www/html/magento/lib/Varien/Autoload.php on line 84 
Notice: Trying to get property of non-object in /var/www/html/magento/lib/Varien/Autoload.php on line 81 
Notice: Trying to get property of non-object in /var/www/html/magento/lib/Varien/Autoload.php on line 84 
Notice: Trying to get property of non-object in /var/www/html/magento/lib/Varien/Autoload.php on line 81 
Notice: Trying to get property of non-object in /var/www/html/magento/lib/Varien/Autoload.php on line 84 
Notice: Trying to get property of non-object in /var/www/html/magento/lib/Varien/Autoload.php on line 81 
Notice: Trying to get property of non-object in /var/www/html/magento/lib/Varien/Autoload.php on line 84 
Notice: Trying to get property of non-object in /var/www/html/magento/lib/Varien/Autoload.php on line 81 
Notice: Trying to get property of non-object in /var/www/html/magento/lib/Varien/Autoload.php on line 84 
Notice: Trying to get property of non-object in /var/www/html/magento/lib/Varien/Autoload.php on line 81 
Notice: Trying to get property of non-object in /var/www/html/magento/lib/Varien/Autoload.php on line 84 
Notice: Trying to get property of non-object in /var/www/html/magento/lib/Varien/Autoload.php on line 81 
Notice: Trying to get property of non-object in /var/www/html/magento/lib/Varien/Autoload.php on line 84 
Notice: Trying to get property of non-object in /var/www/html/magento/lib/Varien/Object.php on line 99 
Notice: Trying to get property of non-object in /var/www/html/magento/lib/Varien/Object.php on line 115 
Notice: Trying to get property of non-object in /var/www/html/magento/lib/Varien/Object.php on line 115 
Warning: array_keys() expects parameter 1 to be array, null given in /var/www/html/magento/lib/Varien/Object.php on line 115 
Warning: array_intersect(): Argument #1 is not an array in /var/www/html/magento/lib/Varien/Object.php on line 115 
Notice: Trying to get property of non-object in /var/www/html/magento/app/code/core/Mage/Core/Model/Config/Options.php on line 146 
Notice: Trying to get property of non-object in /var/www/html/magento/app/code/core/Mage/Core/Model/Config/Options.php on line 65 
Notice: Trying to get property of non-object in /var/www/html/magento/app/code/core/Mage/Core/Model/Config/Options.php on line 66 
Notice: Trying to get property of non-object in /var/www/html/magento/app/code/core/Mage/Core/Model/Config/Options.php on line 67 
Notice: Trying to get property of non-object in /var/www/html/magento/app/code/core/Mage/Core/Model/Config/Options.php on line 68 
Notice: Trying to get property of non-object in /var/www/html/magento/app/code/core/Mage/Core/Model/Config/Options.php on line 69 
Notice: Trying to get property of non-object in /var/www/html/magento/app/code/core/Mage/Core/Model/Config/Options.php on line 70 
Notice: Trying to get property of non-object in /var/www/html/magento/lib/Varien/Autoload.php on line 81 
Notice: Trying to get property of non-object in /var/www/html/magento/lib/Varien/Autoload.php on line 84 
Notice: Trying to get property of non-object in /var/www/html/magento/app/code/core/Mage/Core/Model/App.php on line 1315 
Notice: Trying to get property of non-object in /var/www/html/magento/app/code/core/Mage/Core/Model/App.php on line 813 
Notice: Trying to get property of non-object in /var/www/html/magento/lib/Varien/Autoload.php on line 81 
Notice: Trying to get property of non-object in /var/www/html/magento/lib/Varien/Autoload.php on line 84 
Notice: Trying to get property of non-object in /var/www/html/magento/lib/Varien/Autoload.php on line 81 
Notice: Trying to get property of non-object in /var/www/html/magento/lib/Varien/Autoload.php on line 84 
Notice: Trying to get property of non-object in /var/www/html/magento/app/code/core/Mage/Core/Model/Config.php on line 224 
Fatal error: Call to a member function getDir() on a non-object in /var/www/html/magento/app/Mage.php on line 296 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T19:48:39.573

我早些时候在我的博客上发布了一个完整的演练，但是在努力寻找这个之后，我想我也会在这里发布解决方案。

问题是影响版本高达 5.3.3 ( [https://bugs.php.net/bug.php?id=50027](https://bugs.php.net/bug.php?id=50027) ) 的 PHP 错误。该错误与垃圾收集问题有关，该问题与能够访问配置选项对象上的属性有关。这就是为什么有些人在增加内存限制后会看到差异的原因 - 它会影响垃圾收集发生的时间。

结果是在 app/code/core/Mage/Core/Model/Config/Options.php 中的 _construct() 中，即使 $this 是一个有效对象，任何读取 $this 任何属性的尝试都会报告错误$this 是一个非对象。

因此，唯一可靠的修复是将 PHP 升级到高于 5.3.3 的版本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T20:49:27.220

我有完全一样的问题！你有能力解决它吗？

在 php.ini 中增加内存工作了一段时间，但错误又回来了。

在这里查看更多信息： http: [//www.magentocommerce.com/boards/viewthread/43941/P15/](http://www.magentocommerce.com/boards/viewthread/43941/P15/)

问候

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T10:00:30.500

尝试查看 php.ini 文件中的内存设置。这应该是 512M 或更高。默认情况下，它可能是 128M。

还要查看 cron 在服务器上运行的频率。

还要查看与 DB 的最大用户连接数。

对于 Magento，您可能希望在 php.ini 文件中包含 L max_connections = 500 之类的内容。

我过去也遇到过同样的问题，看起来将 cron 作业的频率重置回 Magento 默认值已经为我们修复了。

代码当然没有错。它本质上是 php.ini 配置或服务器配置。

# facebook - 使用 Facebook API 的“无摩擦支付”？

> ID：10222941
> 
> 赞同：2
> 
> 时间：2012-04-19T06:48:20.637
> 
> 标签：facebook, facebook-credits

对于我们正在为 facebook 开发的游戏，我们希望使用 facebook 称为“无**摩擦支付**”的功能，该功能在 facebook 的开发者博客中有所描述：http: [//developers.facebook.com/blog/post/458/](http://developers.facebook.com/blog/post/458/)

它允许用户在您的应用程序中购买项目而无需确认，如果该项目价值高达 30 facebook 积分并且用户在他的帐户中获得了此积分可用。

博客中的代码示例不起作用，文档链接和申请此新功能的链接已失效。我找不到有关此功能的更多文档，但我们知道它存在，就像我们在其他游戏中看到的一样。

所以我的问题是，我们如何实现这个功能？我们是否需要在某个地方申请才能使用此功能，如果是，我们在哪里可以做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T15:55:15.480

我记得您需要 Facebook 才能为您的应用程序/游戏启用此功能。你必须给他们发电子邮件并特别要求。然后自动进行无摩擦支付。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T07:12:39.363

**参考：** Facebook Credits API 文档

也许你可以使用 facebook`pay dialog`

至于你在哪里申请的问题，[这里](https://developers.facebook.com/docs/credits/build/)有一个关于如何`register a company`信息和付款方式的教程。

看看[这个](https://developers.facebook.com/docs/reference/dialogs/pay/#usage_notes)的用法`pay dialog`

[这](https://developers.facebook.com/docs/reference/dialogs/pay/#js_example)是一个`javascript example`相同的

希望这可以帮助

# php - 类显示不正确

> ID：10222943
> 
> 赞同：0
> 
> 时间：2012-04-19T06:48:22.750
> 
> 标签：php

这是我用来在表格中显示一行的代码：

```
$msg.='<tr class="'.$outclass.'" onClick="popticket('.$ticket['TicketID'].');" onmouseover="this.className='.$overclass.';" onmouseout="this.className='.$outclass.';" '.$reg1.' '.$reg2.' >

      <td width="10%" align="center" class="style28" style="padding: 5px;">'.$ticket['TicketID'].'</td>
      <td width="25%" align="left" class="style28">'.substr($ticket['customer_bus_name'], 0, 34).'</td>
      <td width="12%" align="center" class="style28">'.$newpr.'</td>
      <td width="15%" align="center" class="style28">'.$status.'</td>
      <td class="style28">'.strip_tags($ticket['desc']).'</td>
      <td width="60px" align="center" class="style28"><span style="display:none;">'.$ticket['updated'].'</span>'.$new_up.'</td>
       <td width="45px" align="center" class="style28"><span style="display:none;">'.$ticket['scheduled'].'</span>'.$new_im.'</td>
      </tr>'; 
```

这里每个 PHP 变量都有自己的值。`onmouseover`问题是and中给出的类`mouseout`不起作用。

我想得到这一行（这是正确的输出）：

```
 <tr class="ticketrowsoutread" onmouseout="this.className='ticketrowsoutread';" onmouseover="this.className='ticketrowsover ticketrowsover2';" onclick="popticket('232');">
      <td width="10%" align="center" class="style28" style="padding: 5px;">232</td>
      <td width="25%" align="left" class="style28">net works</td>
      <td width="12%" align="center" class="style28">Medium</td>
      <td width="15%" align="center" class="style28">in progress</td>
      <td class="style28">adsfasdf</td>
      <td width="60px" align="center" class="style28"><span style="display:none;">1334709567</span>1 day</td>
      <td width="45px" align="center" class="style28"><span style="display:none;">-</span></td>
    </tr> 
```

当我运行我的代码时，它会显示`onmouseout="this.className=ticketrowsoutread;"`而不是`onmouseout="this.className='ticketrowsoutread';"`.

如何获得所需的输出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T06:51:35.907

添加反斜杠以转义引用

```
onmouseover="this.className=\''.$overclass.'\';" 
```

# javascript - 如何在 for 循环中连接 set 变量以用作输入中的名称以获取值？

> ID：10222944
> 
> 赞同：1
> 
> 时间：2012-04-19T06:48:48.203
> 
> 标签：javascript, jquery

如何在 for 循环中连接 set 变量以用作输入中的名称以获取值？

```
<script>
var k=0;
var counter = 50;

    for(k=0; k<=counter; k++){
        var choices = $('input[name=choices'+ k]).val();
        var choices = choices.replace(/\ /g, '%');
        var choices_ = choices_ +";"+ choices;
    }
   alert(choices);
</script> 
```

有多个输入字段，即choices1、choices2 等。如何使用 for 循环获取这些字段的值？如何连接名称选择和变量 k？你能帮我解决这个问题吗？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T06:53:14.567

你声明`choices`了三遍，这是无效的，会导致很多错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T06:59:23.830

您[`each`](http://api.jquery.com/each/ "每个")在 jQuery 中使用，它与 for 循环相同。

例如说你有这个 HTML：

```
​&lt;input type ="text" name="field1" value="Alpha" />
<input type ="text" name="field2" value="Bravo" />
<input type ="text" name="field3" value="Charlie" />​ 
```

这是js文件：

```
var k = 1;
$('input').each(function(e) {
    alert('choices' + k + '=' + $(this).val());
    k++;
});​ 
```

[演示在这里](http://jsfiddle.net/v5qG8/)。希望能帮助到你。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-19T07:02:24.047

您总是可以使用专门的属性选择器进行迭代，并且`.each()`：

```
var choices = $('input[name^="choices"]'),  // name starts with "choices"
    choices_val = []                        // an array!
    ;

choices.each(function () {
    choices_val.push($(this).val().replace(/\ /g, '%'));
});

alert(choices_val.join(';')); 
```

它为您节省了必须挑选和破坏特定属性值（ , 等）以及必须通过选择器选择它的开销（和头痛）`choices1`（`choices2`因为**我**认为选择 via`$(this)`比 更快`$('input[name="choices1"]')`）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-19T07:33:36.027

```
$('input[name=choices'+ k +']').val(); 
```

您只是忘记添加另一个 + 符号和单引号。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-19T06:56:29.493

我认为您错过了 2 个引号和一个 +。

$('input[name=choices' + k + ']').val();

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-19T07:01:43.147

添加引号

```
 var choices = $('input[name=choices'+ k + ']').val(); 
```

使用 CSS 选择器

```
$(".className").each(function(){
       $(this).myFunction();
})

jQuery.fn.myFunction = function()

        var choices = $(this).val();
        var choices = choices.replace(/\ /g, '%');
        var choices_ = choices_ +";"+ choices;
} 
```

# iphone - 如何找出用于构建 *.ipa 文件的配置文件？

> ID：10222946
> 
> 赞同：76
> 
> 时间：2012-04-19T06:49:06.760
> 
> 标签：iphone, ios, provisioning-profile

是否有可能以及如何仅从现有的 *.ipa 文件中获取有关配置文件的信息？

* * *

## 回答 #1

> 赞同：134
> 
> 时间：2012-04-19T07:10:36.853

我可以给你一个方向，不确定它是否真的有帮助：

1.  `*.ipa`将文件的扩展名更改为`*.zip`.
2.  取消归档此 zip 文件。
3.  该文件夹包含一个`*.app`文件。通过右键单击它来打开它的包内容。
4.  在里面，你会找到一个`embedded.mobileprovision`文件。

**编辑-由于Xcode** 6 不显示配置文件，我将扩展答案以仍然查看详细信息：

5.  将扩展名更改`embedded.mobileprovision`为`embedded.txt` **或**使用任何选择的文本编辑器打开它。
6.  在里面，您会发现一些二进制数据和一个包含配置文件详细信息的哈希，例如`Entitlements`、`CreationDate`、`ExpirationDate`、`Name`等，这足以最终引导您访问用于创建`.ipa`.

希望它会有所帮助！

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2014-07-28T23:12:03.113

使用[游牧民族](http://nomad-cli.com)。

```
$ ipa info /path/to/app.ipa

+-----------------------------+----------------------------------------------------------+
| ApplicationIdentifierPrefix | DJ73OPSO53                                               |
| CreationDate                | 2014-03-26T02:53:00+00:00                                |
| Entitlements                | application-identifier: DJ73OPSO53.com.nomad.shenzhen    |
|                             | aps-environment: production                              |
|                             | get-task-allow: false                                    |
|                             | keychain-access-groups: ["DJ73OPSO53.*"]                 |
| CreationDate                | 2017-03-26T02:53:00+00:00                                |
| Name                        | Shenzhen                                                 |
| TeamIdentifier              | S6ZYP4L6TY                                               |
| TimeToLive                  | 172                                                      |
| UUID                        | P7602NR3-4D34-441N-B6C9-R79395PN1OO3                     |
| Version                     | 1                                                        |
+-----------------------------+----------------------------------------------------------+ 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2015-01-12T23:11:54.590

类似于以下内容的内容会转储配置文件的 xml 版本：

```
unzip -p <ipafile>.ipa Payload/<myapp>.app/embedded.mobileprovision | security cms -D 
```

`<ipafile>`并相应地替换`<myapp>`。如果您不知道`<myapp>`应该是什么，请尝试：

```
unzip -l <ipafile>.ipa | grep mobileprovision 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-12-15T13:18:08.117

以下是从 IPA 文件中获取配置文件详细信息的步骤：

1.  将扩展名更改`IPA`为`ZIP`。这将提示*是否保留 .ipa 或 use.zip*的警报。`Use .zip`选择_

[![截图 1](../Images/56e580dc4151b93bfa43f816ed5d4ca6.png)](https://i.stack.imgur.com/187MK.png)

[![截图 1.5](../Images/94e8b16e7a49b0fe584eb0106018ccaf.png)](https://i.stack.imgur.com/h7L68.png)

2.  这将转换`IPA`为`ZIP`文件

[![截图 2](../Images/87c1167162005b76c2627292e5316b2d.png)](https://i.stack.imgur.com/2qhw2.png)

3.  *双击*解压ZIP文件**

 *[![截图 3](../Images/dd1f1f4fcf7080b644f637c6ab2aa418.png)](https://i.stack.imgur.com/o1VfG.png)

4.  这将创建一个包含以下内容的文件夹：*Payload、SwiftSupport 和 Symbols*

[![截图 4](../Images/839a16c5d9b91e858cb8cd2c7bc783c7.png)](https://i.stack.imgur.com/ny64h.png)

5.  转到*有效负载*->*应用程序文件*

[![截图 5](../Images/12a042fd2680a94291e614a89d4660c9.png)](https://i.stack.imgur.com/okvCi.png)

6.  右键单击并为 App 文件“显示包内容”

[![截图 6](../Images/ad049f47c9b200e4c84292fa452ab96c.png)](https://i.stack.imgur.com/EYPLS.png)

7.  这将显示您的应用文件的详细内容，例如*代码签名、本地化文件、框架、配置文件等*

[![截图 7](../Images/cbd2c0c47ec018926ab44c18be836e27.png)](https://i.stack.imgur.com/jMAiv.png)

8.  **您可以在embedded.mobileprovision**中查看配置文件详细信息。此文件*只能以 txt 文件格式读取*。所以在文件中*添加扩展名 .txt*

[![截图 8](../Images/6989bd571fea06b6d1a8b037a89ea6cc.png)](https://i.stack.imgur.com/T0frV.png)

9.  *现在使用textEdit*打开这个文件。现在彻底浏览此文件**，您可以看到 IPA 的配置文件**。

[![截图 9](../Images/a0edf06cf86b0952bd18a0277783b805.png)](https://i.stack.imgur.com/DbD25.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-19T06:58:34.127

转到您的 Xcode 管理器并单击档案。您可以看到您制作的档案列表。单击它会向您显示创建日期、标识符等详细信息。您可以通过匹配您获得的此标识符找到您为此创建的配置文件。*

# android - Android：在外部为 ARMv7 构建 kexec - 错误包括在“*”令牌之前出现“预期的 '='、','、';'、'asm' 或 '__attribute__'

> ID：10222949
> 
> 赞同：0
> 
> 时间：2012-04-19T06:49:18.697
> 
> 标签：android, c, android-ndk, kernel, arm

我正在使用 Android NDK 将 kexec 构建为外部内核模块。我知道我的所有环境变量都设置正确。

该模块基于来自 android 论坛的代码，该论坛基于 linux 通常会构建到内核中的 kexec.c。最终目标是通过在第一个内核之后加载第二个内核来绕过锁定的引导加载程序。

我遇到了多个错误，很可能都与 .h 文件中的内容有关。我的 C 技能真的很生疏，但这里有几个错误：

```
make -C /media/disk/android/kernel/omap3 M=/media/disk/android/kexec modules
make[1]: Entering directory `/media/disk/android/kernel/omap3'
  CC [M]  /media/disk/android/kexec/kexec.o
/media/disk/android/kexec/kexec.c:52: error: expected '=', ',', ';', 'asm' or '__attribute__' before '*' token
/media/disk/android/kexec/kexec.c:55: error: 'VMCOREINFO_BYTES' undeclared here (not in a function)
/media/disk/android/kexec/kexec.c:56: error: 'VMCOREINFO_NOTE_SIZE' undeclared here (not in a function)
/media/disk/android/kexec/kexec.c:115: warning: 'struct kimage' declared inside parameter list
/media/disk/android/kexec/kexec.c:115: warning: its scope is only this definition or declaration, 
    which is probably not what you want
/media/disk/android/kexec/kexec.c:118: warning: 'struct kimage' declared inside parameter list
/media/disk/android/kexec/kexec.c:122: warning: 'struct kimage' declared inside parameter list
/media/disk/android/kexec/kexec.c: In function 'do_kimage_alloc':
/media/disk/android/kexec/kexec.c:131: error: dereferencing pointer to incomplete type 
```

无论如何，有问题的片段在下面，还有以下链接到 kexec.c 和 kexec.h 的粘贴完整源代码。

*   完整的错误日志： http: [//pastebin.com/bf5XTEmS](http://pastebin.com/bf5XTEmS)
*   kexec.c [http://pastebin.com/zqbbSfLk](http://pastebin.com/zqbbSfLk)
*   kexec.h [http://pastebin.com/M1Mpp6YX](http://pastebin.com/M1Mpp6YX)

谢谢！

```
MODULE_LICENSE("GPL");

/* Syscall table */
void **sys_call_table;

/* original and new reboot syscall */
asmlinkage long (*original_reboot)(int magic1, int magic2, unsigned int cmd, void __user *arg);
extern asmlinkage long reboot(int magic1, int magic2, unsigned int cmd, void __user *arg);

/* Per cpu memory for storing cpu states in case of system crash. */
note_buf_t *crash_notes;

/* vmcoreinfo stuff */
unsigned char vmcoreinfo_data[VMCOREINFO_BYTES];
u32 vmcoreinfo_note[VMCOREINFO_NOTE_SIZE/4];
size_t vmcoreinfo_size;
size_t vmcoreinfo_max_size = sizeof(vmcoreinfo_data);

/* Location of the reserved area for the crash kernel */
struct resource crashk_res = {
    .name  = "Crash kernel",
    .start = 0,
    .end   = 0,
    .flags = IORESOURCE_BUSY | IORESOURCE_MEM
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T12:37:31.803

尝试定义`CONFIG_KEXEC`. 如果没有此定义，`kexec.h`则不包括所有相关定义，这反过来又会导致您收到至少一些错误消息。

为此，您可以添加`-DCONFIG_KEXEC`或`CFLAGS`任何适当的环境变量，或者只需编辑`Makefile`.

# iphone - 如何从 iPhone 中的 twitter 集成中取消并返回应用程序？

> ID：10222955
> 
> 赞同：0
> 
> 时间：2012-04-19T06:49:43.890
> 
> 标签：iphone, twitter

我正在将 Twitter 集成到我的 iPhone 应用程序中。我在 Twitter 登录页面上遇到问题。当我单击“取消并返回应用程序”链接时。活动指示器视图会显示很长时间并且无处可去，Twitter 登录页面也不会被关闭。

![推特登录页面](../Images/bbcc88415f7c9abbdba0d79612e681f0.png)

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T13:31:49.750

我从 Twitter 开发者网站获得了解决方案，转到 MyApplication -> Settings 并在 Settings 中有一个字段 Website.I 用我自己的网站 url 填写了该字段。它解决了我的问题。

# python - Python - 从对象列表中调用一个对象

> ID：10222957
> 
> 赞同：2
> 
> 时间：2012-04-19T06:49:46.120
> 
> 标签：python, function, object, dictionary

我有一个类，我希望能够创建该类的多个对象并将它们放在一个数组中。我是这样做的：

```
 rooms = []
    rooms.append(Object1())
    ...
    rooms.append(Object4()) 
```

然后我有一个函数字典，我想将对象传递给函数。但是，我遇到了一些问题。例如，我有一个字典：

```
 dict = {'look': CallLook(rooms[i])} 
```

但是，我可以将它传递给函数；在函数中，如果我尝试调用对象方法，它会给我带来问题

```
 def CallLook(current_room)
       current_room.examine() 
```

我确信必须有更好的方法来做我想做的事情，但我是 Python 新手，我还没有看到一个关于如何做到这一点的干净示例。任何人都有实现要传递给函数的对象列表的好方法吗？所有对象都包含检查方法，但它们是不同类的对象。（对不起，我之前没有这么说）

具体错误状态：TypeError: 'NoneType' object is not callable

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T08:07:07.417

> 任何人都有实现要传递给函数的对象列表的好方法吗？所有对象都包含检查方法，但它们是不同类的对象。（对不起，我之前没有这么说）

这是 Python 的普通鸭子类型。

```
class Room:
    def __init__(self, name):
        self.name = name
    def examine(self):
        return "This %s looks clean!" % self.name

class Furniture:
    def __init__(self, name):
        self.name = name
    def examine(self):
        return "This %s looks comfortable..." % self.name

def examination(l):
    for item in l:
        print item.examine()

list_of_objects = [ Room("Living Room"), Furniture("Couch"), 
                    Room("Restrooms"), Furniture("Bed") ]
examination(list_of_objects) 
```

印刷：

```
This Living Room looks clean!
This Couch looks comfortable...
This Restrooms looks clean!
This Bed looks comfortable... 
```

* * *

至于您的具体问题：可能您忘记从 ? 返回一个值`examine()`？（请发布完整的错误消息（包括完整的回溯）。）

> 然后我有一个函数字典，我想将对象传递给函数。但是，我遇到了一些问题。例如，我有一个字典：

```
my_dict = {'look': CallLook(rooms[i])} # this is no dict of functions 
```

`dict`您创建的可能评估为`{'look': None}`（假设您`examine()`没有返回值。）这可以解释您观察到的错误。如果你想要一个函数的字典，你需要放入一个可调用的，而不是实际的函数调用，例如：

```
my_dict = {'look': CallLook} # this is a dict of functions 
```

如果你想绑定`'look'`到一个特定的`room`你可以重新定义`CallLook`：

```
def CallLook(current_room)
   return current_room.examine # return the bound examine
my_dict = {'look': CallLook(room[i])} # this is also a dict of functions 
```

* * *

`dict()`您的代码的另一个问题是您通过命名本地字典来隐藏内置方法`dict`。你不应该这样做。这会产生令人讨厌的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T06:56:46.343

假设您没有基本问题（例如语法错误，因为您粘贴的代码不是有效的 Python），此示例将向您展示如何做您想做的事情：

```
>>> class Foo():
...    def hello(self):
...        return 'hello'
...
>>> r = [Foo(),Foo(),Foo()]
>>> def call_method(obj):
...    return obj.hello()
...
>>> call_method(r[1])
'hello' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T06:55:15.517

假设您有一个类`Room`，创建实例列表的常用方法是使用这样的列表推导

```
rooms = [Room() for i in range(num_rooms)] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T07:23:52.833

我认为有些事情你可能没有得到：

```
dict = {'look': CallLook(rooms[i])} 
```

这将创建一个`dict`只有一个条目的 a：一个 key`'look'`和一个 value，该 value 是`CallLook(rooms[i])`在该语句点进行评估的结果。然后它还使用该名称`dict`来存储此对象，因此您不能再将`dict`其用作该上下文中的构造函数。

现在，你得到的错误告诉我们`rooms[i] is None`在程序中的那个时候。

您不需要`CallLook`（这也被非标准命名） - 您可以只使用表达式`rooms[i].examine()`，或者如果您想稍后评估调用`rooms[i].examine`。

你可能根本不需要字典。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-19T07:49:25.960

我不确定您的要求，但您可以使用 dict 来存储一个类的多个对象。可能这会有所帮助，

```
>>> class c1():
...     print "hi"
...     
hi
>>> c = c1()
>>> c
<__main__.c1 instance at 0x032165F8>

>>> d ={}
>>> for i in range (10):
...     d[i] = c1()
...     
>>> d[0]
<__main__.c1 instance at 0x032166E8>
>>> d[1]
<__main__.c1 instance at 0x032164B8>
>>> 
```

它将创建一个 c1 类的对象并将其存储在 dict 中。显然，在这种情况下，您可以使用 list 而不是 dict。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-19T07:51:41.793

这不是必须的，但在某些情况下，使用[hasattr()](http://docs.python.org/library/functions.html#hasattr)很好...... [getattr()](http://docs.python.org/library/functions.html#getattr)是另一种从对象中获取属性的方法......

所以：

```
rooms = [Obj1(),Obj2(),Obj3()]

if hasattr(rooms[i], 'examine'):#First check if our object has selected function or attribute...
    getattr(rooms[i], 'examine') #that will just evaluate the function do not call it, and equals to Obj1().examine
    getattr(rooms[i], 'examine')() # By adding () to the end of getattr function, we evalute and then call the function... 
```

您还可以将参数传递给`examine`函数，例如：

```
getattr(rooms[i], 'examine')(param1, param2) 
```

# c# - 我应该什么时候初始化对象

> ID：10222958
> 
> 赞同：-1
> 
> 时间：2012-04-19T06:49:46.653
> 
> 标签：c#, oop

我试图弄清楚之间有什么区别：

```
public partial class TestWindow : Window
{
    object obj = new object();
    public TestWindow()
    {
        InitializeComponent();
    }
    private void Window_Loaded(object sender, RoutedEventArgs e)
    {

    }
} 
```

和：

```
public partial class TestWindow : Window
{
    object obj;
    public TestWindow()
    {
        InitializeComponent();
        obj = new object();
    }
    private void Window_Loaded(object sender, RoutedEventArgs e)
    {

    }
} 
```

和：

```
public partial class TestWindow : Window
{
    object obj;
    public TestWindow()
    {
        InitializeComponent();

    }
    private void Window_Loaded(object sender, RoutedEventArgs e)
    {
        obj = new object();
    }
} 
```

看起来它们的行为都相同，我想知道它们之间是否有任何重要区别，或者选择其中一个只是“最佳实践”。提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T06:56:58.573

您的问题的答案是**您应该在使用变量之前对其进行初始化**。

字段初始化程序在构造函数之前运行，构造函数在任何其他方法之前运行，例如您的 Window_Loaded。这很重要，因为如果您在初始化之前尝试使用您的对象，您将获得 NullReferenceException。如果您在调用 Window_Loaded 之前不使用您的对象，那么它没有区别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T06:53:58.523

声明中的初始化字段与在构造函数的第一行中初始化字段相同，因此

```
public partial class TestWindow : Window
{
    object obj = new object();
    public TestWindow()
    {
        InitializeComponent();
    }
    private void Window_Loaded(object sender, RoutedEventArgs e)
    {

    }
} 
```

这个是一样的

```
public partial class TestWindow : Window
{
    object obj;
    public TestWindow()
    {
        obj = new object();
        InitializeComponent();
    }
    private void Window_Loaded(object sender, RoutedEventArgs e)
    {

    }
} 
```

并且当您在 Window_Load 中初始化时，只有在触发事件时才会初始化对象...这可能发生或不可能发生:) 在 WinForm 或 WPF 的情况下，仅在加载所有 ui 元素后才会调用 Window_Load

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T06:54:19.240

*唯一**可能*的区别是您的程序架构所暗示的区别。在哪里初始化是执行流程的问题，所以*你*应该决定在哪里初始化你的`obj`成员。考虑到这`obj`是你的类的全局变量，你可以就地初始化它：

```
public class TestWindow
{
  object obj = new object();
  public TestWindow()
  {
     ...
  }
} 
```

..或者如果这是一个大对象并且*可能不会*在表单的执行流程中使用，您可能只想在用户的明确请求时初始化它*，*例如`ButtonClick`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T07:01:29.870

```
public partial class TestWindow : Window
{
    object obj = new object();
    public TestWindow()
    {
        InitializeComponent();
    }
    private void Window_Loaded(object sender, RoutedEventArgs e)
    {

    }
} 
```

这里对象在构造函数被调用之前被初始化。

```
public partial class TestWindow : Window
{
    object obj;
    public TestWindow()
    {
        InitializeComponent();
        obj = new object();
    }
    private void Window_Loaded(object sender, RoutedEventArgs e)
    {

    }
} 
```

对象在构造函数中初始化。

```
public partial class TestWindow : Window
{
    object obj;
    public TestWindow()
    {
        InitializeComponent();

    }
    private void Window_Loaded(object sender, RoutedEventArgs e)
    {
        obj = new object();
    }
} 
```

调用 window_Loaded 时初始化对象。

就个人而言，我从未在调用构造函数之前初始化对象。如果您将代码重构为 IOC 版本，这可能会导致一些问题。此外，如果您在方法中初始化对象，请注意，如果在此之前的任何方法尝试使用此对象，则可能会失败。另一方面，它只取决于你想做什么。从某种意义上说，所有用法都是正确的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-19T07:02:18.963

范围有一个主要区别。

就像在第一种情况下，它可以在您在类中定义的每个方法中访问。简而言之，它是全局的。

在第二种和第三种情况下，它在函数中声明，因此只能由该函数访问。

现在另一个区别是在第一种和第二种情况下，对象将在您创建对象时声明，但在第三种情况下，它将在实际加载时声明。

像

```
TestWindow objTestWindow = new TestWindow(); // will not create object
TestWindow.Show(); // will create an object 
```

# image - 如何在 cms Magento 中缩放图像

> ID：10222959
> 
> 赞同：4
> 
> 时间：2012-04-19T06:49:47.627
> 
> 标签：image, magento, content-management-system, resize

当管理员将图像添加到 Magento 中的 cms 页面，然后调整图像大小时：然后前端的图像保留其原始大小，但已缩放。

保存页面时是否有任何解决方案可以将图像保存为较小的尺寸？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T00:07:34.617

任何默认的magento都不会发生这种情况。但是，您可以组合一个模块来观察您的 cms 页面保存的数据。以这个事件为例：

```
cms_page_prepare_save 
```

带参数：

```
array(’page’ ⇒ $model, ‘request’ ⇒ $this→getRequest()) 
```

您可以仅从 3 个文件开始创建模块：

/app/etc/Electricjesus_Cms.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<config>
    <modules>
        <Electricjesus_Cms>
            <active>true</active>
            <codePool>local</codePool>
        </Electricjesus_Cms>
    </modules>
</config> 
```

/app/code/local/Electricjesus/Cms/etc/config.xml：

```
<?xml version="1.0"?>
<config>
    <modules>
        <Electricjesus_Cms>
            <version>0.1.0</version>
        </Electricjesus_Cms>
    </modules>
    <global>
        <models>
            <cms>
                <class>Electricjesus_Cms_Model</class>
            </cms>
        </models>
        <events>
            <cms_page_prepare_save>
                <observers>
                    <prepareSave>
                        <class>cms/observer</class>
                        <method>prepareSave</method>
                    </prepareSave>
                </observers>
            </cms_page_prepare_save>
        </events>        
    </global>
</config> 
```

/app/code/local/Electricjesus/Cms/Model/Observer.php：

```
<?php
class Electricjesus_Cms_Model_Observer {
    function prepareSave ( $observer ) {
       $request = $observer->getRequest();
       $params = $request->getParams();
       // scan the request and params for stuff related with the images.. 
       // find out scaling and pass into a good resizer like TimThumb or
       // Zend_Filter_ImageSize etc.
    }
} 
```

虽然上述答案并不完整，但这是一个很好的起点。每当我有更多时间时，我都会尝试开发一个完整的解决方案。

**替代方法：**

由于我在上面提到了[TimThumb](http://www.binarymoon.co.uk/2010/08/timthumb/)，您还可以在您的 magento 根目录中部署它，并开始通过 HTML 编辑器而不是通常的 WYSIWYG 编辑器添加您的图像。如果在您的网站根目录上安装 thumb.php，您可以像这样使用它：

```
<img src="/thumb.php?src=images/image.jpg&w=100&h=50" alt="Hey" /> 
```

祝你好运！

# iphone - iOS NSNotification 是否等同于事件？

> ID：10222967
> 
> 赞同：0
> 
> 时间：2012-04-19T06:50:38.860
> 
> 标签：iphone, objective-c, ios

iOS 是否`NSNotification`等同`Events`于其他系统？与发送消息相反，它真的不阻塞发送者进程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T06:57:48.090

NSNotification 对象封装信息，以便它可以通过 NSNotificationCenter 对象广播给其他对象。

查看以下链接。

[什么是 NSNotification？](https://stackoverflow.com/questions/1900352/what-is-nsnotification)

[iphone sdk 中的 NSNotification](https://stackoverflow.com/questions/3456246/nsnotification-in-iphone-sdk)

# android - 查找用户位置

> ID：10222968
> 
> 赞同：4
> 
> 时间：2012-04-19T06:50:39.170
> 
> 标签：android

我正在开发一个安卓应用程序。我需要在他/她登录到应用程序后立即找到用户的位置。我不想显示地图，应该在用户不知情的情况下识别位置。是否可以使用 Google 地图 API 执行此操作？还是有其他方法可以做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T06:53:50.620

最好的方法是`PASSIVE`像这样使用位置提供程序：

```
LocationManager lm = (LocationManager)yourActivityContext.getSystemService(Context.LOCATION_SERVICE);
Location lastKnown = lm.getLastKnownLocation(LocationManager.PASSIVE_PROVIDER); 
```

这将返回操作系统接收到的最后一个已知位置，因此这可能是陈旧的，但您可以通过查询位置对象来检查该位置何时被检索，以及由哪个提供者检索。

总之，用户不会知道您已经获得了位置**，除非您的应用程序需要正确的位置权限。**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T06:54:35.877

试试这个，

```
 protected LocationManager locationManager;  
        Context context;
        public String gps_loc;

        locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER);
        locationManager.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
        locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 10, new MyLocationListener());
private class MyLocationListener implements LocationListener {

        public void onLocationChanged(Location location) {
            gps_loc = String.format("%1$s" +"-"+"%2$s",location.getLongitude(), location.getLatitude());
            Toast.makeText(Clockin.this, gps_loc, Toast.LENGTH_SHORT).show();
        }
        public void onStatusChanged(String s, int i, Bundle b) {
            Toast.makeText(class.this, "Provider status changed", Toast.LENGTH_SHORT).show();
        }
        public void onProviderDisabled(String s) {
            Toast.makeText(class.this,"Provider disabled by the user. GPS turned off",Toast.LENGTH_SHORT).show();
            final AlertDialog alertDialog = new AlertDialog.Builder(class.this).create();
             alertDialog.setTitle("Activate GPS...");
             alertDialog.setButton("ok", new DialogInterface.OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {
                    startActivityForResult(new Intent(android.provider.Settings.ACTION_LOCATION_SOURCE_SETTINGS), 0);                   
                }
            });
             alertDialog.show();
             }      
        public void onProviderEnabled(String s) {
            Toast.makeText(class.this,"Provider enabled by the user. GPS turned on",    Toast.LENGTH_SHORT).show();
        }
    } 
```

# python - python httplib的各种超时

> ID：10222972
> 
> 赞同：1
> 
> 时间：2012-04-19T06:50:54.193
> 
> 标签：python, settimeout, httplib

我正在实现一个从各种服务器获取网页的小服务。我需要能够配置不同类型的超时。我已经尝试过使用`settimeout`套接字的方法，但这并不完全符合我的意愿。这是问题所在。

1.  我需要为初始 DNS 查找指定超时。我知道这是在我`HTTPConnection`开始实例化时完成的。

2.  我的代码是以这样一种方式编写的，我首先`.read`是一大块数据（大约 10 MB），如果整个有效负载都适合这个，我会继续处理代码的其他部分。如果它不适合这个，我直接将有效负载流式传输到文件而不是内存中。发生这种情况时，我会无限制`.read()`地获取数据，如果远程端每秒向我发送一个字节的数据，则连接只会等待每秒接收一个字节。我希望能够与“你花了太长时间”断开连接。基于线程的解决方案将是最后的手段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T07:06:28.730

`httplib`是直截了当地寻找你想要的东西。

我建议查看[http://pycurl.sourceforge.net/](http://pycurl.sourceforge.net/)和[http://curl.haxx.se/libcurl/c/curl_easy_setopt.html#CURLOPTTIMEOUT](http://curl.haxx.se/libcurl/c/curl_easy_setopt.html#CURLOPTTIMEOUT)选项。

[http://curl.haxx.se/libcurl/c/curl_easy_setopt.html#CURLOPT_NOSIGNAL](http://curl.haxx.se/libcurl/c/curl_easy_setopt.html#CURLOPT_NOSIGNAL)选项听起来也很有趣：

> 考虑构建带有 c-ares 支持的 libcurl 以启用异步 DNS 查找，这可以在没有信号的情况下为名称解析提供很好的超时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T12:05:59.107

您是否尝试过[请求](http://docs.python-requests.org/en/latest/index.html)？

您可以方便地设置超时[http://docs.python-requests.org/en/latest/user/quickstart/#timeouts](http://docs.python-requests.org/en/latest/user/quickstart/#timeouts)

```
>>> requests.get('http://github.com', timeout=0.001) 
```

编辑：我错过了问题的第 2 部分。为此，您可以使用：

```
import sys
import signal
import requests

class TimeoutException(Exception): 
    pass 

def get_timeout(url, dns_timeout=10, load_timeout=60):
    def timeout_handler(signum, frame):
        raise TimeoutException()

    signal.signal(signal.SIGALRM, timeout_handler) 
    signal.alarm(load_timeout)  # triger alarm in seconds

    try: 
        response = requests.get(url, timeout=dns_timeout)
    except TimeoutException:
        return "you're taking too long"
    return response 
```

并在您的代码中使用该`get_timeout`功能。

如果您需要超时可用于其他功能，您可以创建一个装饰器。以上代码来自[http://pguides.net/python-tutorial/python-timeout-a-function/](http://pguides.net/python-tutorial/python-timeout-a-function/)。

# php - 需要解决查询问题

> ID：10222974
> 
> 赞同：0
> 
> 时间：2012-04-19T06:51:01.527
> 
> 标签：php, mysql

```
SELECT fname, sname, email 
FROM student WHERE contact_flag='Yes' AND sno!='$lastid' 
```

如何以不选择链接到 $lastid 的数据并因此检索其他数据的方式重写此查询？已经为此苦苦挣扎了一段时间，我无法弄清楚。请帮帮我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T06:58:36.933

试试这个，完全未经测试

```
SELECT fname, sname, email 
FROM student WHERE contact_flag='Yes' AND sno NOT IN (SELECT sno FROM student WHERE sno='$lastid') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T07:04:48.357

您在单引号内使用 php 变量。试试“$lastid”。希望这会有所帮助。

# android - 知道是否使用了资源图像

> ID：10222976
> 
> 赞同：0
> 
> 时间：2012-04-19T06:51:08.257
> 
> 标签：android

是否有任何快速方法可以知道图像是否在 Java 类或 XML 布局中被引用或使用？例如，如果在某个布局中使用了 image.9.png。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T07:00:58.133

在 Eclipse 中，您可以像下面的步骤一样进行搜索。

首先单击您要在其中搜索的当前项目。现在在将打开搜索对话框窗口的窗口中按 Ctrl+H。现在你想检查`bg.png`你的项目中使用的，搜索如下

```
 @drawable/bg 
```

这将搜索使用此图像的所有布局和 xml 文件。

现在对于在 java 文件中搜索，您需要使用您在 xml 文件中提供的 id 进行搜索。

```
 R.id.yourimageId 
```

现在，在您的情况下，您可以通过 Eclipse 中的 Ctrl+h 对话框搜索您的 @drawable/image。

**编辑**在 ADT 更新版本中，像 ADT 16 我们有 lint 工具，它会对未使用的 Resource 发出所有警告。

```
 Issue: Looks for unused resources 
```

您会在 lint check 中找到此警告。有关 Lint 的更多信息，请参阅此链接[Lint Checker SO](https://stackoverflow.com/questions/8656598/when-i-update-my-adt-plugin-for-android-i-get-run-android-lint-what-are-adavant)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T07:00:48.627

没有办法通过代码来做到这一点。但是，在 Eclipse 中，如果您删除图像（确保先制作副本）并构建项目，您将知道丢失它的地方:)

# java - 如何将 Web 服务连接到 Android 应用程序

> ID：10222977
> 
> 赞同：0
> 
> 时间：2012-04-19T06:51:14.067
> 
> 标签：java, android, rest

我是 Web 服务的新手，我想制作一个 RESTful Web 服务，并将其连接到 Android 应用程序。我想要有关如何执行此操作的步骤或教程。

我开始使用此链接创建我的服务[此链接提供了创建 Web 服务的步骤，但我不明白为什么它使用现有数据库中的实体类（客户、折扣代码）。这些课程是做什么用的？](http://netbeans.org/kb/docs/websvc/rest.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T19:49:44.797

您可以尝试使用它自动连接和解析您的网络服务 [http://www.wsdl2code.com](http://www.wsdl2code.com)

```
SampleService srv1 = new SampleService();
     req = new Request();                     
     req.companyId = "1";
     req.userName = "userName";                                     
     req.password = "pas";
     Response response =    srv1.ServiceSample(req); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T08:36:32.053

由于您是该区域的新手，因此请务必查看以前对类似问题的回答。[但是，您可以在此处](http://www.codeproject.com/Articles/112381/Step-by-Step-Method-to-Access-Webservice-from-Andr "从 Android 访问 Web 服务的分步方法")找到从 android 访问 Web 服务的教程，并在[此处](https://stackoverflow.com/questions/6827881/how-to-use-webservices-in-android "如何在android中使用webservices")的 stackoverflow 上回答了与您类似的问题。

# php - 创建新的GD图像流并输出图像

> ID：10222979
> 
> 赞同：0
> 
> 时间：2012-04-19T06:51:45.877
> 
> 标签：php, image, gd

```
<?php
header ('Content-Type: image/png');
$im = @imagecreatetruecolor(120, 20)
      or die('Cannot Initialize new GD image stream');
$text_color = imagecolorallocate($im, 233, 14, 91);
imagestring($im, 1, 5, 5,  'A Simple Text String', $text_color);
imagepng($im);
imagedestroy($im);
?> 
```

输出是![在此处输入图像描述](../Images/53981815233c4e5f56c131df5e845a89.png)

现在我想知道如何将此图像存储在服务器上

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T06:59:49.627

imagepng() 有第二个参数，即文件名。

看

[http://www.php.net/manual/en/function.imagepng.php](http://www.php.net/manual/en/function.imagepng.php)

> bool imagepng ( 资源 $image [, string $filename [, int $quality [, int $filters ]]] )
> 
> 文件名
> 
> 保存文件的路径。如果不设置或为NULL，将直接输出原始图像流。
> 
> 笔记：
> 
> 如果未使用质量和过滤器参数，则 NULL 无效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T08:55:29.117

显示图像并将文件保存在我的测试服务器上。

*您需要对要保存到的目录具有写权限。*

```
...
imagepng($im);
imagepng($im, 'filename.png');
imagedestroy($im); 
```

# c# - 如何使用报表查看器在 asp.net 中创建报表

> ID：10222980
> 
> 赞同：5
> 
> 时间：2012-04-19T06:51:49.493
> 
> 标签：c#, asp.net, reportviewer

我正在使用 Visual Studio 2010。在那之前我曾使用过 Crystal Reporting，但现在我想使用 Report Viewer 生成报告。由于我是这个主题的新手，请指导我。谢谢 ！！！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-19T06:55:19.837

给你的基础教程

[添加和配置 ReportViewer 控件](http://msdn.microsoft.com/en-us/library/ms252104.aspx)

[使用 Visual Studio 2010 创建 ASP.NET 报告 - 第 1 部分](http://weblogs.asp.net/rajbk/archive/2010/05/09/creating-an-asp-net-report-using-visual-studio-2010-part-1.aspx)

[使用 Visual Studio 2010 创建 ASP.NET 报告 - 第 2 部分](http://weblogs.asp.net/rajbk/archive/2010/05/09/creating-a-asp-net-interactive-report-using-visual-studio-2010-part-3.aspx)

[使用 Visual Studio 2010 创建 ASP.NET 报告 - 第 3 部分](http://weblogs.asp.net/rajbk/archive/2010/05/09/creating-a-asp-net-interactive-report-using-visual-studio-2010-part-3.aspx)

[如何使用报表查看器控件访问 Reporting Services 服务器](http://www.visualwebgui.com/Developers/KB/tabid/654/article/how_to_use_the_report_viewer_control_to_access_a_reporting_services_server/Default.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-04T07:44:46.780

我的代码用于为业务类对象创建报告...

使用 Business Class Objects & ReportViewer (ASP.NET/ C#) 创建报表 1.创建学生类

```
 public class StudentClass
  {
      public int No { get; set; }
      public string Name { get; set; }
      public string Degree { get; set; }
   } 
```

2.使用GetStudents()函数创建学生资料库

```
public class StudentRepository : StudentClass
    {
        public List<StudentClass> studentList = new List<StudentClass>();

        public List<StudentClass> GetStudents()
        {            
            StudentClass student1 = new StudentClass();
            student1.No = 1;
            student1.Name = "Bhuvana";
            student1.Degree = "M.Tech";
            studentList.Add(student1);
            StudentClass student2 = new StudentClass();
            student2.No = 2;
            student2.Name = "Annie";
            student2.Degree = "B.Tech";
            studentList.Add(student2);
            StudentClass student3 = new StudentClass();
            student3.No = 3;
            student3.Name = "Muthu Abi";
            student3.Degree = "B.Tech";
            studentList.Add(student3);
            return studentList;
        }
    } 
```

3.使用报表向导创建“StudentReport.rdlc”并选择DataSource

4.In Index.aspx 从工具箱中添加脚本管理器和报表查看器（拖放）

```
<div>
    <asp:ScriptManager ID="ScriptManager1" runat="server">
    </asp:ScriptManager>  
    <rsweb:ReportViewer ID="ReportViewer1" runat="server">
    </rsweb:ReportViewer>       
</div> 
```

5.修改代码隐藏文件中的Page_Load()方法

```
public partial class Index : System.Web.UI.Page
{
    StudentRepository sr = new StudentRepository();
    List<StudentClass> sc = new List<StudentClass>();
    protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            ReportViewer1.ProcessingMode = ProcessingMode.Local;
            ReportViewer1.LocalReport.ReportPath = Server.MapPath("~/Report/Student.rdlc");
            sc = sr.GetStudents();
            IEnumerable<StudentClass> ie;
            ie = sc.AsQueryable();
            ReportDataSource datasource = new ReportDataSource("DataSet1", ie);
            ReportViewer1.LocalReport.DataSources.Clear();
            ReportViewer1.LocalReport.DataSources.Add(datasource);
        }

    }
} 
```

6.构建并运行

# spring - 使用 Spring JdbcTemplate.query 时是否有简单的方法来接收 Map 而不是 List？

> ID：10222981
> 
> 赞同：0
> 
> 时间：2012-04-19T06:51:50.757
> 
> 标签：spring, jdbctemplate, spring-jdbc

`getSimpleJdbcTemplate().query(sql, getMapper());`返回列表，但我需要一个映射，其中键将存储对象字段之一的数据。例如，我有一个名为“货币”的对象，其中包含字段：id、代码、名称等。上面的代码将返回 List 对象，但我想通过 id 从 Map 获取货币。现在，我编写了以下代码：

```
@Override
public Map<Integer, Currency> listCurrencies() {
    String sql = "select cur_id, cur_code, cur_name ... from currencies";

    List<Currency> currencies = getSimpleJdbcTemplate().query(sql, getMapper());
    Map<Integer, Currency> map = new HashMap<Integer, Currency>(currencies.size());

    for (Currency currency : currencies) {
        map.put(currency.getId(), currency);
    }

    return map;
} 
```

有没有办法做同样的事情，但不创建 List 对象并在其中循环？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T06:56:31.337

您必须`ResultSetExtractor`从`ResultSet`. 因此，在您的情况下，您可以编写一个自定义 ResultSetExtractor ，它将返回 Map 对象。

# node.js - Node.js 重定向到另一个 node.js 文件

> ID：10222986
> 
> 赞同：1
> 
> 时间：2012-04-19T06:52:15.590
> 
> 标签：node.js, express

我想从一个 nodejs 文件重定向到另一个 nodejs 文件。我使用 res.redirect(URL)，但执行时显示“无法获取 /nodepage”

目前我正在使用

```
// Handler for GET /
app.get('/nodepostgres', function(req, res){
    res.redirect('/nodepost.js?a=1');
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T09:47:39.453

我认为您的问题中有些事情没有正确解释或无法正确理解。

我不确定“从一个 nodejs 文件重定向到另一个 nodejs 文件”是什么意思。您似乎认为节点脚本文件对应于 URL（或页面）。那是错误的。节点脚本对应于一个应用程序，该应用程序可能（或可能不）通过多个 URL 公开多个页面，并且可以从其他脚本文件导入应用程序逻辑（您将为站点或应用程序运行单个根脚本文件）。它与您可能知道的（香草，无框架）PHP 完全不同。

通过不同的 url 暴露不同的页面称为路由，所有关于路由的 Express 文档都可以[在这里找到](http://expressjs.com/guide.html#routing)。

我的理解是，您尝试为每个脚本创建一个函数/页面/网址：nodepost.js 文件是一个页面。代码组织是一件好事，但让我们先关注 node + express 是如何工作的。

据我了解，您的应用程序有一些公开的网址，比如说：

*   “/“ 主页
*   “/nodepostgre”（也许接受一个 'a' arg ？）
*   "/nodepost" 接受 arg : a

注意：我们忘记了 file = page 的 id，我们不希望扩展名出现在 URL 上，所以`nodepost.js`变成`nodepost`

您可以做的是设置 3 个 url expositions：

```
app.get('/', function(req, res) { res.render('home'); }); // render the home page
app.get('/nodepost', function(req, res) { // expose the nodepost function
  var a = req.params.a;
  doSomethingWith(a);
  // res.render, res.send ? whatever you want...
]);
app.get('/nodepostgres', function(req, res){ // use of res.redirect(url[, status])
  res.redirect('/nodepost');
}); 
```

那是你要的吗 ？

然后，这是一种更优雅的处理参数（“a”）的方法。

```
app.get('/notepost/:a', function(req, res) { // called via /nodepost/here_goes_a_valu ; no "?"
  var a = req.params.a; 
```

});

为什么更好？

1.  尊重[REST](https://en.wikipedia.org/wiki/Representational_state_transfer)（可能不是描述休息的最佳链接，但是......）
2.  允许您在没有参数的情况下公开“/nodepost”
3.  当然还有一百万其他的东西

# php - php foreach 进入无限循环，数组存储在会话中

> ID：10222987
> 
> 赞同：0
> 
> 时间：2012-04-19T06:52:16.277
> 
> 标签：php, multidimensional-array, foreach, infinite-loop, array-splice

一切正常，但是当购物车中有多个物品时..并且任何物品的数量（列表中的最后一项除外）发生更改，下面的代码进入无限循环，我通过将 print_r 语句放入验证了它它。

进入无限循环的部分代码：

```
if (isset($_POST['item_to_adjust']) && $_POST['item_to_adjust'] != "") {
    // execute some code
    $item_to_adjust = $_POST['item_to_adjust'];
    $quantity = $_POST['quantity'];
    $quantity = preg_replace('#[^0-9]#i', '', $quantity); // filter everything but numbers
    if ($quantity >= 100) { $quantity = 99; }
    if ($quantity < 1) { $quantity = 1; }
    if ($quantity == "") { $quantity = 1; }
    $i = 0;
    foreach ($_SESSION["cart_array"] as $each_item) { 
              print_r($each_item);
              $i++;
              while (list($key, $value) = each($each_item)) {
                  if ($key == "item_id" && $value == $item_to_adjust) {
                      // That item is in cart already so let's adjust its quantity using array_splice()
                      array_splice($_SESSION["cart_array"], $i-1, 1, array(array("item_id" => $item_to_adjust, "quantity" => $quantity)));
                  } // close if condition
              } // close while loop
    } // close foreach loop
} 
```

附言

这是添加第一项时数组的初始化方式。

```
$_SESSION["cart_array"] = array(0 => array("item_id" => $pid, "quantity" => 1)); 
```

如果需要任何其他细节，请告诉我..

更新：假设购物车中有三件商品。我改变了第三个项目的数量。这行得通。但是，如果我更改第二个项目的数量，脚本会达到最大执行时间，第二个和第三个项目会在购物车中无限重复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T07:10:51.433

```
foreach ($_SESSION["cart_array"] as $item_key => $each_item) {
    if ($item_to_adjust == $each_item["item_id"]) {
        $_SESSION["cart_array"][$item_key]["quantity"] = $quantity;
    }
} 
```

这仍然在修改循环内的数组（不酷），但它不会弄乱索引。

# iphone - 使用链接将 ~ipad 资源指向 @2x 资源

> ID：10222988
> 
> 赞同：0
> 
> 时间：2012-04-19T06:52:22.803
> 
> 标签：iphone, ios

我一直在寻找解决复制数百个`@2x`文件只是为了重命名它们的问题`~ipad`。我尝试了许多想法，这些想法主要涉及在代码中进行。我将发布我自己的问题的答案，我发现效果很好：使用符号链接指向`~ipad`文件`@2x`。

我只是想在这里记录它，因为我在搜索中没有看到这个解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T07:02:17.837

诀窍是创建一个指向该`@2x`文件的链接并命名该链接`~ipad`。

这不是 Finder 中的“别名”命令。

您将手动使用终端并输入如下内容：

```
ln -s image@2x.png image~ipad.png 
```

现在，当您运行代码时，智能抓取设备适当文件的任何 UIImage 方法都将`@2x`在 iPad 上运行时使用这些文件。链接在磁盘上大约有 16 个字节，因此可以节省大量存储空间。

我还编写了一个小 bash 脚本来自动遍历一个目录并为它找到`~ipad`的每个`@2x`文件创建链接：

```
#! /bin/sh

# Script to batch create symlinks that point ~ipad files to @2X files

# To run:
# Copy to the directory where the files are located
# Enter the following at the terminal prompt:
# bash create_ipad_image_links.txt

# For every @2x file we find in this directory we create a symlink

for file in *@2x.png
do
  echo "link: ${file//@2x/~ipad} to: $file" 
  ln -s $file ${file//@2x/~ipad}
done 
```

上面代码中的使用说明。如果可以以任何方式改进，请发表评论。我确信有更好的（更流畅的？）方法来解决这个问题。

# php - 删除逗号分隔列表中带引号的字符串内的逗号

> ID：10222989
> 
> 赞同：1
> 
> 时间：2012-04-19T06:52:23.300
> 
> 标签：php, string, double-quotes

我有一个字符串

```
$str = '1,2,3,4,5,"6,000",7,8,9'; 
```

我怎样才能清理它：

```
'1,2,3,4,5,6000,7,8,9' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T06:57:08.730

[http://php.net/str-getcsv](http://php.net/str-getcsv)

```
$items = str_getcsv($str);
$items = array_map (
  function ($item) { str_replace(',', '', $item); },
  $items;
); 
```

现在，如果您愿意，可以再次将它们合并在一起

```
$str = implode(',', $items); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T07:18:03.627

尝试这样的事情（对于 PHP < 5.3）：

```
$dst = array();
$str = '1,2,3,4,5,"6,000",7,8,9';

$state = false;
$buffer = '';
for ($i = 0, $lim = strlen($str); $i < $lim; $i += 1) {
  $char = $str[$i];

  switch ($char) {
    case ',':
      if (!$state) {
        $dst[] = $buffer;
        $buffer = '';
      }
      break;

    case '"':
      $state = !$state;
      break;

    default:
      $buffer .= $char;
  }
}

$dst[] = $buffer;

print_r($dst); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T07:48:31.610

用这个：

```
$str = '1,2,3,4,5,"6,000",7,8,9';
$pattern='/"(\d+),(\d+)"/';
$replacement='${1}$2';

echo preg_replace($pattern, $replacement, $str ); 
```

谢谢：-）

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-19T07:00:10.447

```
<?php
$str = '1,2,3,4,5,"6,000",7,8,9';
echo $str;
echo str_replace('"','',$str);
?> 
```

# java - 安卓离线存储管理

> ID：10222995
> 
> 赞同：3
> 
> 时间：2012-04-19T06:52:53.677
> 
> 标签：java, android, offline, offline-caching

```
Theme : Newspaper updates in android application. 
```

如何从服务器获取或检索数据并在 android 应用程序上发布更新。如何管理离线存储意味着当没有互联网连接时如何在 android 应用程序上更新数据，至少它如何考虑在 android 应用程序上显示更新。如果有人知道这个问题，请回答它。

我实际上正在使用`php`或`json`作为中间文件从服务器获取数据并将更新发送到 android 应用程序，但它似乎更复杂，如果我没有获得访问服务器端文件的权限，我该如何管理更新？是否需要有访问服务器文件的权限？

有关主题的更多信息：如果我想将更新与网站同步，
我该如何处理或实施它？我不是在这里问任何类型的编码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T07:02:17.923

1.  如何从服务器获取或检索数据并在 android 应用程序上发布更新

    > 使用[HTTPClient](http://android-developers.blogspot.com/2011/09/androids-http-clients.html)。

2.  如何管理离线存储意味着当没有互联网连接时如何在 android 应用程序上更新数据

    > 我想你不明白离线存储是什么意思。如果没有互联网连接，就是这样。您无法更新您的内容。如果您有互联网连接，离线存储很有用，但并非每次都如此。您在有互联网连接时下载的内容可以保存到[SQLLite](http://www.vogella.com/articles/AndroidSQLite/article.html)以在您没有互联网连接时加载。

3.  我实际上使用 php 或 json 作为中间文件，用于从服务器获取数据并将更新发送到 android 应用程序，但它似乎更复杂，如果我无法获得访问服务器端文件的权限，我该如何管理更新？是否需要有访问服务器文件的权限？

    > 创建 WebService 作为接口。不要让其他系统能够直接访问您的文件。或者只是创建一个基本上返回 Json 或 XML 数据的 PHP 文件。其他选项：创建一个 RSS。

4.  有关主题的更多信息：如果我想将更新与网站同步，我该如何处理或实施它？我不是在这里问任何类型的编码。

    > 创建一个事件以使用 HTTPClient 开始同步。如果有新的更新，将其保存到 SQLLite（用于离线存储）并显示内容。该事件可以在您的应用程序启动或单击刷新按钮期间以及如果 Internet 存在时触发。

**更新**：

有一个名为[couchbase mobile](https://github.com/couchbase/mobile)的新框架。您可以从沙发服务器同步本地移动数据库。您可以在本地（离线模式）插入/更新数据，然后只要您有互联网连接，数据也可以同步到沙发服务器。这意味着不再需要创建 HTTPClient。

对于数据库，请尝试[cloudant](http://cloudant.com)。