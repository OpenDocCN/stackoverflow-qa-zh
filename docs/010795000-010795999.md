# StackOverflow 问答 10795000-10795999

# c# - 设置 Border.Child 抛出 ArgumentException

> ID：10795001
> 
> 赞同：2
> 
> 时间：2012-05-29T07:44:56.670
> 
> 标签：c#, silverlight, windows-phone-7, windows-phone-7.1

我在我的 WP7 应用程序中使用 Glyphs 控件（我还不知道它是 Glyphs 是否重要）。通过将 Glyphs 设置为 Border 元素的子元素来使用 Glyphs。有时 - 目前尚不清楚确切的时间 - Border.Child 属性的设置器抛出 ArgumentException。该消息没有说什么特别的，也没有 InnerException。调用堆栈如下：

```
at MS.Internal.XcpImports.CheckHResult(UInt32 hr)
at MS.Internal.XcpImports.SetValue(IManagedPeerBase obj, DependencyProperty property, DependencyObject doh)
at System.Windows.DependencyObject.SetValue(DependencyProperty property, DependencyObject doh)
at System.Windows.Controls.Border.set_Child(UIElement value) 
```

有什么方法可以调试或诊断潜在的问题？

# php - iPhone中的推送通知问题

> ID：10795002
> 
> 赞同：0
> 
> 时间：2012-05-29T07:44:57.520
> 
> 标签：php, iphone, ios, xcode, push-notification

好的..所以我在 RayWenderlich.com 上遵循了关于在应用程序中设置推送通知的教程。它在第一周左右工作得很好。通知已发送，直到今天通知停止工作，一切都很酷。我通过创建新的 SSL 证书、新的配置文件等重复了网站上提到的步骤，但它仍然不起作用。我的 iPhone 中的设置和所有设置都设置为在应用程序中接收通知。

我尝试从其他服务（如 FB、Twitter 等）向自己发送通知，它们都在工作。任何人都可以接受可能无法正常工作的事情。

哦，顺便说一句，我的 PHP 代码没有显示错误。实际上，它表示消息已成功传递。

我的时间不多了，我们将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T08:00:19.300

设备令牌可能会更改。更新设备令牌并重试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T08:20:33.340

确保您使用的是正确的模式，即您已在开发模式下启用推送通知，并使用相同的配置文件安装应用程序并将开发的 .pem 文件保留在服务器上。如果您从开发更改为发布，您需要从服务器更改 .pem 文件，并在发送实时版本的推送通知时删除沙箱。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T09:22:42.540

请记住，Apple 不保证消息将 100% 传递。

下一次，不要太担心。

# jquery - 添加闪烁然后消失的jQuery div

> ID：10795010
> 
> 赞同：1
> 
> 时间：2012-05-29T07:45:31.287
> 
> 标签：jquery, html

将用户输入的内容添加到新的 div 中，如下所示：

HTML：

```
<div id="mform">
<form> 
    <textarea rows="3" cols="48" id="message">Leave a message here</textarea> 
    <input class="post" type="submit" value="Post">
</form> 
</div>      

<div id="mboard">

</div> 
```

使用支持的 jQuery：

```
$(document).ready(function () { 
$(".post").click(function () {
    posted = $("#message").val();
    jQuery("<div/>", {
        id: "msg",
        css: {opacity:1.0}, 
        text: posted,
        }).prependTo("#mboard");
        console.log("here");
});

}) 
```

似乎一切正常，内容在新 div 中闪烁一秒钟，然后消失。我的 console.log 也会发生同样的事情。

我已经指定了不透明度，因此一旦它起作用，我可以将其设置为 0，然后添加一个 .animate 以在内容发布后淡化内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T07:47:48.207

原因是您的输入按钮是提交按钮，将表单提交回自身也是如此，这意味着页面被重新加载。

将您的 js 更改为：

```
$(".post").click(function (e) {
    posted = $("#message").val();
    jQuery("<div/>", {
        id: "msg",
        css: {opacity:1.0}, 
        text: posted,
        }).prependTo("#mboard");
        console.log("here");
    e.preventDefault();
}); 
```

请注意向单击处理程序添加了一个参数（表示事件），以及停止表单提交`e`的调用。`e.preventDefault()`

现场示例：http: [//jsfiddle.net/RmSZz/](http://jsfiddle.net/RmSZz/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T07:49:42.357

这是因为您执行了**提交**请求，然后重新加载了整个页面。如果要取消提交请求，请添加`return false;`

# java - 如何在 HQL 中使用 order by？

> ID：10795013
> 
> 赞同：23
> 
> 时间：2012-05-29T07:45:56.297
> 
> 标签：java, hql

我想像这样执行我的 HQL 查询：

```
Query queryPayment=sixSession.createQuery("from Payment where vcode=:p_Vcode or (Installment_Vcode=:installmentVcode and payment_date>:pdate) order byvcode."+order +"desc")
        .setParameter("p_Vcode", p_Vcode)
        .setParameter("installmentVcode", installmentVcode)
        .setParameter("pdate", pdate); 
```

但它不承认`+order+`
我需要 order by 子句。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-05-29T07:50:54.297

看来您必须在 HSQL 查询中添加“order by”，但要使用空格：

```
"from Payment where vcode=:p_Vcode or (Installment_Vcode=:installmentVcode and
payment_date>:pdate) order by vcode desc" 
```

# bash - $PWD 与 pwd 关于可移植性

> ID：10795014
> 
> 赞同：20
> 
> 时间：2012-05-29T07:46:03.137
> 
> 标签：bash

我正在编写一个解析当前工作目录路径的 shell 脚本（打印当前目录上方的所有基本名称）。

到目前为止，我一直在使用环境变量`PWD`来解析路径，但我想知道是否

*   我可以指望`PWD`始终如一
*   在每个平台上给出相同的结果

`pwd`使用shell-builtin会更好吗？我需要这个脚本在尽可能多的平台上运行，所以我只是想知道......

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-29T07:58:46.207

[POSIX](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap08.html#tag_08)需要`$PWD`按以下方式设置：

> ```
> PWD 
> ```
> 
> 该变量应代表当前工作目录的绝对路径名。它不应包含任何点或点-点的组件。该值由 cd 实用程序和 sh 实用程序在初始化期间设置。

所以你可以依赖这个设置——但请注意“......绝对路径......”，而不是*绝对*路径。

`bash`（至少是最新版本）会记住您在设置`$PWD`（和`pwd`内置）时遵循的符号链接。`command pwd`（即外部命令）不会。所以你会在那里得到不同的结果，这可能对你很重要，也可能不重要。`pwd -P`如果您想要没有符号链接的路径，请使用。

请注意，[`pwd`](http://pubs.opengroup.org/onlinepubs/9699919799/utilities/pwd.html)文档指出：

> 如果应用程序设置或取消设置 PWD 的值，则未指定 pwd 的行为。

所以，不要那样做:)

简而言之，这里没有赢家。环境变量将存在于 POSIX shell 中，外部命令也可能存在，也可能是内置命令。选择最适合您需要的那个，重要的是您是否关心符号链接。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-29T07:58:37.803

该论坛文章[“$PWD vs `pwd`”](http://www.unix.com/302591000-post8.html)在这方面比较了 AIX 4.2.1、AIX 6、Sparc Solaris 10 和 Redhat 5 企业版：

*   $PWD 和内置密码没有区别，

*   内置 pwd -P 和 /usr/bin/pwd 之间没有区别。

前者显示带有符号链接名称的工作目录，而后者显示实际路径。

唯一的差异是外部命令在大多数系统中位于 /usr/bin 中，而在 Redhat 中位于 /bin 中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-29T07:56:07.117

如果您知道 bash 可用并且使用它执行脚本，那么它`PWD`是安全的。

如果在某些系统上只有普通的 sh 可用，请使用`pwd`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-06-22T12:17:18.557

另一点需要注意的是 [命令替换在尾随换行符上通常是不安全的](https://stackoverflow.com/questions/15184358/how-to-avoid-bash-command-substitution-to-remove-the-newline-character)。

这显然是相当做作的，但如果您真的关心安全处理输入，您应该使用`"$PWD"`. 参见，例如：

```
$ my_dir=$'/tmp/trailing_newline\n'
$ mkdir -p "$my_dir"
$ cd "$my_dir"
$ pwd
/tmp/trailing_newline

$ printf "%q\n" "$(pwd)" "$PWD"
/tmp/trailing_newline
$'/tmp/trailing_newline\n'
$ cd "$(pwd)"
sh: cd: /tmp/trailing_newline: No such file or directory
$ cd "$PWD" 
```

可以解决命令替换，但这绝不是漂亮的。您可以附加一个尾随字符，然后使用参数扩展将其剥离：

```
$ pwd_guarded="$(pwd; printf '#')"
$ pwd_fixed="${pwd_guarded%$'\n'#}"
$ printf "%q\n" "$pwd_fixed"
$'/tmp/trailing_newline\n'
$ cd "$pwd_fixed" 
```

这特别难看，因为您还必须删除 `pwd`添加的换行符，这通常会被命令替换删除。如果您不求助于非 POSIX 结构，这将变得一团糟 `$''`，所以基本上，只要`"$PWD"`您关心这些事情，就可以使用。当然，不支持目录名称中的尾随换行符是完全合理的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-29T07:54:35.747

如果是我，我会使用它，`pwd`因为它是 bash 和 sh 的内置工具。这并不意味着它们在所有方面都相同，但是如果您在没有选项的情况下调用它，那应该没关系。

# javascript - JavaScript 代码的 web.config 等价物是什么？

> ID：10795018
> 
> 赞同：4
> 
> 时间：2012-05-29T07:46:16.157
> 
> 标签：javascript, configuration, web-config

.NET `web.config`for JavaScript 代码的等价物是什么？

我开始掌握`web.config`文件中配置详细信息的使用，但我不知道页面中 JavaScript 的配置选项是什么（甚至不知道）。

我的用户案例是如何获得一个值 the `JavaScript`，在这种情况下是一个目标 URL，可以根据环境*DEV / TEST / LIVE*进行更改，而无需更改`JavaScript`代码

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T07:49:44.283

您可以在母版页中描述一个全局 JS 变量并使用它。

[**编辑**]
在你`web.config`有

```
<appSettings>
    <add key="appEnvironment" value="DEV"/>
</appSettings> 
```

在您的母版页中，您将有类似的内容（我建议在控制器中完成此操作，但为方便起见）

```
<script type="text/javascript">
    var envType = "@ConfigurationManager.AppSettings=["appEnvironment"]";
</script> 
```

那么你需要做的就是改变`web.config`. 我假设您正在使用 MVC

# jquery - 克隆 silverlight 嵌入对象会导致空白元素

> ID：10795020
> 
> 赞同：0
> 
> 时间：2012-05-29T07:46:17.553
> 
> 标签：jquery, silverlight, cloning

我有一个包含一些 silverlight 嵌入对象的页面。一个玩家可见，其他所有玩家都隐藏（显示：无）。当我单击缩略图时，代码会克隆相应的隐藏对象并用这个克隆对象替换可见播放器。

这在 Firefox、Chrome 和 IE9 中运行良好，但在 IE8 中无法正常运行。可见的玩家被替换，但这会导致一个大的白色空银光玩家。如果您右键单击此白色元素，它会显示一个 silverlight 上下文菜单，但没有其他内容。控制台或其他线索中没有错误。

有此问题的网站位于：[http](http://www.vioranje.nl)
://www.vioranje.nl 在 IE8 中打开它，然后单击标题栏“web afleveringen”下方的播放按钮，看看会发生什么。

这是克隆 Silverlight 播放器的 jQuery 代码（附加到缩略图的单击事件处理程序）：

```
var embedType = (element.data().embedtype) ? element.data().embedtype : 'object';
var $embed = $element.find('.large .embed '+embedType);
var $newplayer = $(this).find('.embed');
var newplayerHTML = $newplayer.html();
var $newplayerInstance = $(newplayerHTML);
$embed.replaceWith($newplayerInstance);
$newplayerInstance.show(); 
```

我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T14:32:46.487

我已经尝试调试您的案例，它看起来像 IE8 处理标签并重新编写如下：

```
<OBJECT data="data:application/x-oleobject;base64,QfXq3+HzJEysrJnDBxUISgAJAACuLQAAuh8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=" width=442 type=application/x-silverlight-2 height=307 checkedByCssHelper="true"></OBJECT> 
```

这显然会丢失您传递给 Silverlight 视频播放器对象的参数。

这是可以帮助您解决所有浏览器问题的技巧，尝试使用 a 而不是使用 a 来隐藏您的嵌入标签，通过使用标签 .. 您的 Silverlight 代码在隐藏时不会被执行，因为它会视为文本而不是 HTML 代码。

因此，在您的**HTML 模板代码**“tpl_rtlxlvideo”中：

代替：

```
<div class="embed" style="display: none;">{YOUR OBJECT TAG}</div> 
```

和：

```
<textarea class="embed" style="display: none;">{YOUR OBJECT TAG}</textarea> 
```

对于**Javascript 方面**：

代替：

```
var newplayerHTML = $newplayer.html(); 
```

和：

```
var newplayerHTML = $newplayer.val(); 
```

希望对你有帮助:)

# google-app-engine - symbian 和其他移动操作系统上的应用引擎通道 API？

> ID：10795021
> 
> 赞同：0
> 
> 时间：2012-05-29T07:46:17.847
> 
> 标签：google-app-engine, channel-api

频道 api 是否适用于 symbian？什么浏览器？有什么办法让它工作吗？
而且，出于好奇，如果它不起作用，为什么？它使用什么元素或技术阻止它在旧手机上工作（不是在谈论 Android 和 iOS）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T07:59:32.300

频道使用长拉（彗星），这应该被很多浏览器支持。我不知道 Symbian 的状态如何，因为它非常分散，但在“普通”设备上它应该可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T22:29:21.163

我们不会针对 Symbian 测试 Channel API，因此不能保证它会起作用。

如果不是这样，则更有可能是因为 Symbian 处理跨帧通信的方式有些怪异，而不是缺乏对长轮询的支持，但链条中有很多部分可能会中断。如果它不起作用，则不太可能有任何方法可以破解它。

# java - eclipse中的条件简化

> ID：10795022
> 
> 赞同：1
> 
> 时间：2012-05-29T07:46:18.907
> 
> 标签：java, eclipse, conditional, ternary-operator

我继承了充满三元条件的代码。我们的编码标准（在编写代码后引入）不允许这种风格。

我正在寻找一种方法来避免手动重写所有这些语句。是否有设置/插件/某事。其他在 Eclipse 中做这份工作？

谢谢你。

PS。尽管我明确地在寻找基于 Eclipse 的解决方案，但我并不完全反对为此提供一个不错的 ruby​​ 脚本；）

编辑：Joachim Sauer 的“按 Ctrl+1”方法适用于示例案例，但不适用于典型的 Eclipse 生成的 hashCode

```
int prime = 31;         
int result = 1;
result{Ctrl+1} = prime * result + ((id == null) ? 0 : id.hashCode()); 
```

在标记的位置按 Ctrl+1 仅显示以下选项： `Rename in file, rename in workspace, Extract local, Copy to criteria Editor, Extract to local variable`

如果它可以通用，那就太好了。更好的是不涉及访问每个事件的解决方案。

我在 OpenSUSE 11 上使用 eclipse 3.7，以防万一。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T07:51:50.280

假设这个示例代码：

```
 boolean someCondition = true;
    int a = someCondition ? 1 : 2; 
```

将光标放在 之后，`a`然后按`Ctrl`- `1`。然后选择“用'if-else'替换条件”。

这导致以下代码：

```
 int a;
    if (someCondition)
        a = 1;
    else
        a = 2; 
```

使用 Refactor > Inline ( `Ctrl`- `Shift`- `I`) 以减少不必要的变量声明。

# memory - OpenCL 常量内存缓存

> ID：10795031
> 
> 赞同：1
> 
> 时间：2012-05-29T07:47:11.763
> 
> 标签：memory, opencl

如果我执行一个使用一小块常量内存的内核，然后在内核运行时写入该常量内存，内核是否会立即看到更改，或者在内核启动时“缓存”常量内存的内容 - 或OpenCL 驱动程序是否会无条件地延迟持续内存更新，直到内核完成运行？

如果出现第一个或第三个选项，那么如何同时使用不同的常量内存数据执行同一个内核？我是否需要创建多个内核/常量缓冲区对象并使用它？注意我无法预先计算任何东西，因为内核启动是可以在任何时间和速率发生的外部信号的结果。我也可以即时创建内核对象，但这似乎是一个丑陋的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T08:20:44.567

OpenCL 中的一个基本概念是，“入队”到同一命令队列中的命令按顺序执行。这包括`WriteBuffer`和类似的命令。这意味着如果你这样做

```
EnqueueNDKernalRange()
EnqueueWriteBuffer()
EnqueueNDKernalRange() 
```

然后无论它们是阻塞还是非阻塞，写入只会影响第二组内核。

如果您通过映射指针进行更新，那么应该在任何内核运行之前取消映射。访问当前映射的缓冲区的运行内核是未定义的（规范 1.1 - 第 5.4.2.1 节）。

由于`EnqueueMapBuffer`和`EnqueUnmapMemObject`也被放置在命令队​​列中，只要您取消映射，更新的顺序仍然得到保证。

这是否回答了您的问题，或者您是否正在以另一种方式更新您的缓冲区？

> 如何同时使用不同的常量内存数据执行相同的内核？我是否需要创建多个内核/常量缓冲区对象并使用它？

是的，多个缓冲区对象。

# sencha-touch-2 - 在 Sencha touch 2 中单击按钮上的移动图像

> ID：10795048
> 
> 赞同：2
> 
> 时间：2012-05-29T07:48:24.213
> 
> 标签：sencha-touch-2

我想在按钮单击时移动图像。就像我点击按钮时一样，图像应该从左向右移动。我正在寻找图像的 x 和 y，但未能实现目标。我也尝试过使用sliderfiled，但是通过sencha touch css更改sliderfiled的默认图像很糟糕。有谁能够帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T09:20:27.613

您可以使用[Ext.Anim](http://docs.sencha.com/touch/2-0/#!/api/Ext.Anim)使图像移动。像这样定义你的动画

```
anim = Ext.create('Ext.Anim',{
  autoClear: false,
  from:{'left':'0px'}, // You can use CSS3 transforms for better performance
  to: {'left':'100px'},
  delay: 1000,
  duration: 1000
}); 
```

然后你可以在任何组件上[运行](http://docs.sencha.com/touch/2-0/#!/api/Ext.Anim-method-run)这个动画。例如，如果您在控制器中引用了您的图像。

```
anim.run(this.getImage().element); 
```

希望这可以帮助

# meteor - 在流星项目中包含非核心包

> ID：10795061
> 
> 赞同：0
> 
> 时间：2012-05-29T07:49:30.590
> 
> 标签：meteor

我可以将包添加到流星的自定义结帐中，如[如何构建 Meteor 智能包中所述](https://stackoverflow.com/questions/10114526/how-to-build-a-meteor-package)

但这在与他人一起开发时并不真正起作用。

我想知道是否有办法在项目中做到这一点？A-la 旧 Rails`vendor/plugins`吗？如果没有，也许它可能是开发人员可能想要实现的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T20:51:56.733

如果您需要其他人使用您的包，但您不想在 Meteor 中使用您的包，那么您可以分叉 Meteor 存储库并使用您的分叉而不是 Meteor 本身。这样，其他人就可以克隆你的 repo 而不是 Meteor ......

# sql - Oracle 11.2.0.1.0 - 64 位，客户端在选择大量“列”时挂起

> ID：10795065
> 
> 赞同：0
> 
> 时间：2012-05-29T07:49:37.937
> 
> 标签：sql, oracle, centos

我在 CentOS 6.2 64 位上安装了 oracle 11.2.0.1.0 - 64 位，并且在本地一切正常，但是当我尝试远程连接时，抛出安装在我的机器（Windows 7）中的 sqlplus 发生了一些没有任何意义的事情除非我定义了一些列，否则我能够选择任何不超过 50 列的表。

`select * from v$session;`（sqlplus 挂起）

`select username from v$session;`（sqlplus 工作）

我也不能对超过 50 列的表（如 v$session）执行 desc 命令。

`desc v$session`（sqlplus 挂起）

`desc all_users`（sqlplus 工作）

任何想法？

问候

# java - 通过网络发送文件的最佳方式

> ID：10795066
> 
> 赞同：1
> 
> 时间：2012-05-29T07:49:38.667
> 
> 标签：java, php, rest, download, network-protocols

我想通过`REST`接口将文件发送到浏览器。

你能建议最有效的方法吗，记住以下几点？

1.  流量不多。
2.  我正在从中获取文件，`HBase`这意味着当我从 HBase 中获取它时，我将它放入`Byte Array`.
3.  这些文件不在服务器的任何文件夹中。文件只能从`HBase`表中获取。

前端是`PHP`，我不知道`PHP`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T14:11:58.990

在`REST`api 中，您只需将 to 传递`byte array`给`Response`它，它就会自行处理。

使用以下代码 -

```
@Produces("image/jpg")
public Response getImage() {
    <Fetch it from where ever you have it>
    Response.ok(<byteArrayOfTheFile>).build();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T07:55:45.043

**我正在提供 WebService 的案例研究，我通过它发送文件：**

对文件内容进行编码并将其发送到他们将对其进行解码并读取内容的目的地总是好的。

作为附件发送总是对世界开放，因为它没有加密。如果网络流量高，失败的可能性就高。

# c++ - 如何在递归代码中使用 __func__ 或 __FUNCTION__ 常量？

> ID：10795069
> 
> 赞同：1
> 
> 时间：2012-05-29T07:49:46.083
> 
> 标签：c++, function, recursion

例如考虑这个单阶乘：

```
int factorial(int number) {
  int temp;
  if(number <= 1) return 1;
  temp = number * __FUNCTION__(number - 1);
  return temp;
} 
```

它给：

```
error: '__FUNCTION__' cannot be used as a function 
```

这个想法是使用这个常量而不是函数名，所以如果我更改函数的名称，则不需要查看其余代码来更新函数调用自身的名称。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T07:53:00.177

你不能因为`__FUNCTION__`可能被实现保留，它扩展为函数名（以字符串格式）。

除了更改名称之外，您可能还想使用宏而不是常量：

```
#define MY_FUNCTION factorial

int MY_FUNCTION(int number) {
  int temp;
  if(number <= 1) return 1;
  temp = number * MY_FUNCTION(number - 1);
  return temp;
} 
```

**就个人而言，我不明白这一点。**诚然，您只需在一处更改函数名称，但这值得吗？

# sql - 需要帮助以获取访问表单以将值插入查询

> ID：10795071
> 
> 赞同：1
> 
> 时间：2012-05-29T07:49:50.593
> 
> 标签：sql, forms, ms-access

再会，

我需要一些有关 MS Access 和查询的帮助。我的 SQL 查询从表中获取条目并将其复制到同一个表中，并将**月份**字段更改为不同的值。例如，它将获取一月的所有工资单条目，复制它们并将月份更改为二月。

SQL 如下所示：

```
INSERT INTO example_table (month, field, field, field)
SELECT "FEB", field, field, field
FROM example_table
WHERE month = "JAN" 
```

它选择 JAN 的所有条目，然后将其复制并粘贴到同一个表中，并将月份更改为 FEB。

我的问题是，如何在 MS Access 中运行此查询以从表单中获取“FEB 和“JAN”字段值（来自上面的示例）？

也许我尝试这样做的方式不是最好的方法，如果有其他方法可以获得相同的结果，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T08:05:09.663

我不确定你到底在追求什么，但如果`YourForm`有一个名为`txtFirstMonth`“JAN”的文本框和另一个名为`txtSecondMonth`“FEB”的文本框，这应该给你相当于你的示例查询。

```
INSERT INTO example_table ([month], field, field, field)
SELECT
    Forms!YourForm!txtSecondMonth AS [month],
    field,
    field, 
    field
FROM example_table
WHERE [month] = Forms!YourForm!txtFirstMonth; 
```

# python - 将任务添加到谷歌应用引擎中的非默认队列

> ID：10795075
> 
> 赞同：4
> 
> 时间：2012-05-29T07:50:10.810
> 
> 标签：python, google-app-engine, task-queue

我正在尝试使用以下方法将任务添加到非默认队列“slowQueue”：

```
taskqueue.Queue('slowQueue').add(url='/worker/slow', params={'name': name}) 
```

我收到错误“TypeError: add() got an unexpected keyword argument 'url'”

如何将任务添加到谷歌应用引擎中的非默认队列？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T07:54:27.170

您假设在调用 Queue.add() 时添加任务

```
q = taskqueue.Queue('slowQueue') 
task = taskqueue.Task(url='/worker/slow', params={'name': name})
q.add(task) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-29T11:17:54.337

或者（对 Shay 的回答），如果您更喜欢较短但较少面向对象的样式：

```
taskqueue.add(queue_name='slowQueue', url='/worker/slow', params={'name': name}) 
```

# android - Android中具有透明背景的对话框

> ID：10795078
> 
> 赞同：286
> 
> 时间：2012-05-29T07:50:25.120
> 
> 标签：android, android-dialog

如何从 Android 的对话框中删除黑色背景。图片显示了问题。

![在此处输入图像描述](../Images/593b7fbe9b9207894f840923ee787cd5.png)

```
final Dialog dialog = new Dialog(Screen1.this);
dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
dialog.setContentView(R.layout.themechanger); 
```

* * *

## 回答 #1

> 赞同：778
> 
> 时间：2012-05-29T08:01:49.480

添加此代码

```
 dialog.getWindow().setBackgroundDrawable(new ColorDrawable(android.graphics.Color.TRANSPARENT)); 
```

或者这个：

```
dialog.getWindow().setBackgroundDrawableResource(android.R.color.transparent); 
```

* * *

## 回答 #2

> 赞同：100
> 
> 时间：2013-09-19T04:38:04.073

```
<style name="NewDialog">
    <item name="android:windowFrame">@null</item>
    <item name="android:windowBackground">@android:color/transparent</item>
    <item name="android:windowIsFloating">true</item>
    <item name="android:windowContentOverlay">@null</item>
    <item name="android:windowTitleStyle">@null</item>
    <item name="android:windowAnimationStyle">@android:style/Animation.Dialog</item>
    <item name="android:windowSoftInputMode">stateUnspecified|adjustPan</item>
    <item name="android:backgroundDimEnabled">false</item>
    <item name="android:background">@android:color/transparent</item>
</style> 
```

在java中使用

```
Dialog dialog = new Dialog(this, R.style.NewDialog); 
```

希望对你有帮助！

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2012-12-08T09:41:00.837

我遇到了更简单的问题，我想出的解决方案是应用透明的背景主题。用你的风格写下这些行

```
 <item name="android:windowBackground">@drawable/blue_searchbuttonpopupbackground</item>
</style>
<style name="Theme.Transparent" parent="android:Theme">
    <item name="android:windowIsTranslucent">true</item>
    <item name="android:windowBackground">@android:color/transparent</item>
    <item name="android:windowContentOverlay">@null</item>
    <item name="android:windowNoTitle">true</item>
    <item name="android:windowIsFloating">true</item>
    <item name="android:backgroundDimEnabled">false</item>
</style> 
```

然后添加

```
android:theme="@style/Theme.Transparent" 
```

在您的主清单文件中，在对话活动的块内。

加上您的对话活动 XML 集中

```
 android:background= "#00000000" 
```

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2013-05-13T07:08:00.193

不知何故，撒迦利亚的解决方案对我不起作用，所以我使用下面的主题来解决这个问题......

```
<style name="DialogCustomTheme" parent="android:Theme.Holo.Dialog.NoActionBar">
    <item name="android:windowBackground">@android:color/transparent</item>
    <item name="android:colorBackgroundCacheHint">@null</item>
</style> 
```

可以将此主题设置为对话框，如下所示

```
final Dialog dialog = new Dialog(this, R.style.DialogCustomTheme); 
```

享受！！

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2019-01-13T06:32:05.047

如果你想破坏对话框的深色背景，使用这个

```
dialog.getWindow().setDimAmount(0); 
```

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2012-05-29T08:01:52.003

您可以使用：

```
setBackgroundDrawable(null); 
```

方法。以下是文档：

```
 /**
    * Set the background to a given Drawable, or remove the background. If the
    * background has padding, this View's padding is set to the background's
    * padding. However, when a background is removed, this View's padding isn't
    * touched. If setting the padding is desired, please use
    * {@link #setPadding(int, int, int, int)}.
    *
    * @param d The Drawable to use as the background, or null to remove the
    *        background
    */ 
```

* * *

## 回答 #7

> 赞同：12
> 
> 时间：2013-10-04T07:18:13.733

对话框弹出填充默认黑色背景颜色或主题颜色，因此您需要将`TRANSPARENT`背景设置为对话框。试试下面的代码： -

```
final Dialog dialog = new Dialog(this);
dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
dialog.getWindow().setBackgroundDrawable(new ColorDrawable(android.graphics.Color.TRANSPARENT));
dialog.setContentView(R.layout.splash);
dialog.show(); 
```

* * *

## 回答 #8

> 赞同：10
> 
> 时间：2015-03-25T04:28:29.970

我在所有现有答案中发现的一个问题是没有保留边距。这是因为它们都用纯色覆盖了`android:windowBackground`负责边距的属性。但是，我在 Android SDK 中进行了一些挖掘，发现默认的窗口背景可绘制，并对其进行了一些修改以允许透明对话框。

首先，将 /platforms/android-22/data/res/drawable/dialog_background_material.xml 复制到您的项目中。或者，只需将这些行复制到一个新文件中：

```
<inset xmlns:android="http://schemas.android.com/apk/res/android"
    android:inset="16dp">
    <shape android:shape="rectangle">
        <corners android:radius="2dp" />
        <solid android:color="?attr/colorBackground" />
    </shape>
</inset> 
```

注意`android:color`设置为`?attr/colorBackground`。这是您看到的默认纯灰色/白色。要让自定义样式中定义的颜色`android:background`透明并显示透明度，我们所要做的就是更改`?attr/colorBackground`为`@android:color/transparent`. 现在它看起来像这样：

```
<inset xmlns:android="http://schemas.android.com/apk/res/android"
    android:inset="16dp">
    <shape android:shape="rectangle">
        <corners android:radius="2dp" />
        <solid android:color="@android:color/transparent" />
    </shape>
</inset> 
```

之后，转到您的主题并添加以下内容：

```
<style name="MyTransparentDialog" parent="@android:style/Theme.Material.Dialog">
    <item name="android:windowBackground">@drawable/newly_created_background_name</item>
    <item name="android:background">@color/some_transparent_color</item>
</style> 
```

确保替换`newly_created_background_name`为您刚刚创建的可绘制文件的实际名称，并替换`some_transparent_color`为所需的透明背景。

之后，我们需要做的就是设置主题。创建时使用它`AlertDialog.Builder`：

```
 AlertDialog.Builder builder = new AlertDialog.Builder(this, R.style.MyTransparentDialog); 
```

然后像往常一样构建、创建和显示对话框！

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2018-07-28T05:19:28.547

**注意：**不要使用生成器来改变背景。

```
Dialog dialog = new Dialog.Builder(MainActivity.this)
                                .setView(view)
                                .create();
dialog.show();dialog.getWindow().setBackgroundDrawableResource(android.R.color.transparent); 
```

改成

```
Dialog dialog = new Dialog(getActivity());
dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
dialog.setContentView(view);
dialog.getWindow().setBackgroundDrawableResource(android.R.color.transparent);
dialog.show(); 
```

使用 Dialog.builder 时，它没有提供`getWindow()`选项。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2013-07-02T13:53:56.917

在你的代码中试试这个：

```
getWindow().setBackgroundDrawableResource(android.R.color.transparent); 
```

它肯定会工作......在我的情况下......！我的朋友

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2012-05-29T08:08:13.653

与 zGnep 相同的解决方案，但使用 xml：

```
android:background="@null" 
```

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2016-03-30T14:18:55.473

这就是我为使用 AlertDialog 实现半透明所做的。

创建了自定义样式：

```
<style name="TranslucentDialog" parent="@android:style/Theme.DeviceDefault.Dialog.Alert">
    <item name="android:colorBackground">#32FFFFFF</item>
</style> 
```

然后使用以下命令创建对话框：

```
AlertDialog.Builder builder = new AlertDialog.Builder(getActivity(), R.style.TranslucentDialog);
AlertDialog dialog = builder.create(); 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2014-09-22T11:56:35.330

使用此代码，它适用于我：

```
 Dialog dialog = new Dialog(getActivity(),android.R.style.Theme_Translucent_NoTitleBar);
    dialog.show(); 
```

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2021-09-28T16:54:36.437

您可以使用（可选）

```
dialog.window?.setBackgroundDrawableResource(android.R.color.transparent) 
```

我**建议**创建一个**扩展函数**。就像是 `extensions.kt`

```
import android.app.Dialog

fun Dialog.setTransparentBackground() {
    window?.setBackgroundDrawableResource(android.R.color.transparent)
} 
```

并**在任何对话框**中使用它

```
dialog.setTransparentBackground() 
```

有一些有趣的编程...

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2014-09-12T08:36:02.873

在我的情况下，解决方案是这样的：

```
dialog_AssignTag.getWindow().setBackgroundDrawable(new ColorDrawable(android.graphics.Color.TRANSPARENT)); 
```

此外，在自定义对话框的 XML 中：

```
android:alpha="0.8" 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2018-04-10T20:40:28.430

如果您扩展了`DialogFrament`课程，您可以使用以下方式设置主题：

```
setStyle(DialogFragment.STYLE_NORMAL, R.style.customDialogTheme); 
```

然后在您的 styles.xml 文件中制作自定义主题（请参阅@LongLv 的参数答案）

`<item name="android:windowCloseOnTouchOutside">true</item>`如果您希望在用户触摸对话框外部时关闭对话框，请不要忘记添加。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2019-01-02T09:00:13.520

在 style 中设置这些样式代码

```
<style name="Theme.Transparent" parent="android:Theme">
    <item name="android:windowIsTranslucent">true</item>
    <item name="android:windowBackground">@android:color/transparent</item>
    <item name="android:windowContentOverlay">@null</item>
    <item name="android:windowNoTitle">true</item>
    <item name="android:windowIsFloating">true</item>
    <item name="android:backgroundDimEnabled">false</item>
</style> 
```

只需将 false 更改为 true 即可

```
<item name="android:backgroundDimEnabled">true</item> 
```

它会使你的背景变暗。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2012-05-29T08:15:10.337

```
Window window = d.getWindow();
window.setFlags(WindowManager.LayoutParams.FLAG_BLUR_BEHIND,WindowManager.LayoutParams.FLAG_BLUR_BEHIND); 
```

这是我的方法，你可以试试！

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2018-11-05T08:28:43.907

对于使用带有自定义类的自定义对话框的任何人，您需要更改类中的透明度，在 onCreate() 中添加以下行：

```
getWindow().setBackgroundDrawableResource(android.R.color.transparent); 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2020-01-27T21:12:54.610

dialog.getWindow().setBackgroundDrawable(new ColorDrawable(ContextCompat.getColor(ctx, android.R.color.transparent)));

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2020-03-13T01:00:22.137

确保`R.layout.themechanger`没有背景颜色，因为默认情况下对话框具有默认背景颜色。

您还需要添加`dialog.getWindow().setBackgroundDrawable(newColorDrawable(Color.TRANSPARENT));`

最后

```
<style name="TransparentDialog">
    <item name="android:windowIsFloating">true</item>
    <item name="android:windowNoTitle">true</item>
    <item name="android:windowBackground">@android:color/transparent</item>
    <item name="android:windowContentOverlay">@null</item>
    <item name="android:windowTitleStyle">@null</item>
</style> 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2021-10-19T08:49:44.580

如果您使用**Kotlin**，此代码可以帮助您：

```
Objects.requireNonNull(dialog.window)
                ?.setBackgroundDrawable(ColorDrawable(Color.TRANSPARENT)) 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2022-02-11T09:27:47.770

就我而言，没有任何方法可以应用透明背景。

只有我在我的对话框 onStart() 中使用过：

```
dialog?.window?.setBackgroundDrawable(ColorDrawable(Color.TRANSPARENT)) 
```

但它没有任何效果。我检查了styles.xml，没有与我的问题相关联。

最后，当我检查我的对话框是如何创建的时，我发现导航组件在我请求对话框片段时正在创建对话框。

在 navgraph.xml 的 XML 中，我将对话框片段定义为片段，因此，它被创建为片段而不是对话框。将该片段更改为对话框使一切都到位。

顺便说一句：您不能在导航编辑器的 GUI 中从片段修改为对话框。您应该手动更改代码。

这可能是对对话框的某些影响未反映在运行时的原因之一。

* * *

## 回答 #24

> 赞同：-1
> 
> 时间：2020-11-23T14:50:04.990

Kotlin 创建具有透明背景的对话框的方法：

```
 Dialog(activity!!, R.style.LoadingIndicatorDialogStyle)
            .apply {
                // requestWindowFeature(Window.FEATURE_NO_TITLE)
                setCancelable(true)
                setContentView(R.layout.define_your_custom_view_id_here)

                //access your custom view buttons/editText like below.z
                val createBt = findViewById<TextView>(R.id.clipboard_create_project)
                val cancelBt = findViewById<TextView>(R.id.clipboard_cancel_project)
                val clipboard_et = findViewById<TextView>(R.id.clipboard_et)
                val manualOption =
                    findViewById<TextView>(R.id.clipboard_manual_add_project_option)

                //if you want to perform any operation on the button do like this

                createBt.setOnClickListener {
                    //handle your button click here
                    val enteredData = clipboard_et.text.toString()
                    if (enteredData.isEmpty()) {
                        Utils.toast("Enter project details")
                    } else {
                        navigateToAddProject(enteredData, true)
                        dismiss()
                    }
                }

                cancelBt.setOnClickListener {
                    dismiss()
                }
                manualOption.setOnClickListener {
                    navigateToAddProject("", false)
                    dismiss()
                }
                show()
            } 
```

在 style.xml 中创建 LoadingIndicatorDialogStyle，如下所示：

```
<style name="LoadingIndicatorDialogStyle" parent="Theme.AppCompat.Light.Dialog.Alert">
    <item name="android:windowIsTranslucent">true</item>
    <item name="android:windowBackground">@android:color/transparent</item>
    <item name="android:windowContentOverlay">@null</item>
    <item name="android:windowNoTitle">true</item>
    <item name="android:statusBarColor">@color/black_transperant</item>
    <item name="android:layout_gravity">center</item>
    <item name="android:background">@android:color/transparent</item>
    <!--<item name="android:windowAnimationStyle">@style/MaterialDialogSheetAnimation</item>-->
</style> 
```

# c# - 如何在xml中读取节点内的属性数据

> ID：10795082
> 
> 赞同：1
> 
> 时间：2012-05-29T07:50:48.437
> 
> 标签：c#, .net, xml

我正在创建一个 Web 应用程序，我将用户答案与我的 xml 答案匹配我已经完成了所有代码并且我的代码工作正常，然后在我更改了我的 xml 格式之后，所以现在我无法读取我的 xml 文件节点的属性。下面是我的 xml 文件。

```
<?xml version="1.0" encoding="utf-8" ?>
<Exam>
  <Question number="1" Text="What is IL Code">
    <Answer Text="Half compiled, Partially compiled code"> </Answer>
  </Question>
  <Question number="2" Text="What is JIT">
    <Answer Text="IL code to machine language"> </Answer>
  </Question>
  <Question number="3" Text="What is CLR">
    <Answer Text="Heart of the engine , GC , compilation , CAS(Code access security) , CV ( Code verification)"> </Answer>
  </Question>
</Exam> 
```

下面是我的剪切代码。

```
XmlDocument docQuestionList = new XmlDocument();// Set up the XmlDocument //
            docQuestionList.Load(@"E:\ferozProject\WindowsFormsApplication1\WindowsFormsApplication1\QuestionFile.xml"); //Load the data from the file into the XmlDocument //
            XmlNodeList QuestionList = docQuestionList.SelectNodes("Exam/Question");
            foreach (XmlNode nodexm in QuestionList)
            {
                if (**nodexm.InnerText.Trim()** == label2.Text)
                {
                    string[] arrUserAnswer = textBox1.Text.Trim().ToLower().Split(' ');
                    string[] arrXMLAnswer = nodexm.NextSibling.InnerText.Trim().ToLower().Split(' ');
                    List<string> lststr1 = new List<string>();
                    foreach (string nextStr in arrXMLAnswer)
                    {
                        if (Array.IndexOf(arrUserAnswer, nextStr) != -1)
                        {
                            lststr1.Add(nextStr);
                        }
                    }
                    if (lststr1.Count > 0)
                    {
                        label4.Visible = true;
                        label4.Text = "Your Answer is "+ ((100 * lststr1.Count) / arrXMLAnswer.Length).ToString() + "%" + "Correct";
                    }
                    else
                    {
                        label4.Text = "Your Answer is Wrong";
                    }
                }
            }

XmlNodeList QuestionList = docQuestionList.SelectNodes("Exam/Question"); 
```

上面的行你可以看到我已经阅读了问题节点，但是在问题节点内部有像 Text 这样的属性，我的问题存在你可以在我的 xml 文件中看到。

```
if (nodexm.InnerText.Trim() == label2.Text) 
```

在上面的行中，我将屏幕显示问题与我的 xml 文件问题匹配，但我做不到。label2 用于显示问题

请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T08:17:56.500

试试这个（使用 System.Linq；使用 System.Xml；使用 System.Xml.Linq；）

```
 XDocument map = XDocument.Parse("<Exam> " +
   "<Question number= \"1\" Text=\"What is IL Code\">" +
    " <Answer Text=\"Half compiled, Partially compiled code\"> </Answer>" +
   "</Question>" +
   "<Question number=\"2\" Text=\"What is JIT\">" +
   "  <Answer Text=\"IL code to machine language\"> </Answer>" +
        "</Question>" +
   "<Question number=\"3\" Text=\"What is CLR\">" +
   "  <Answer Text=\"Heart of the engine , GC , compilation , CAS(Code access security) , CV ( Code verification)\"> </Answer>" +
   "</Question>" +
 "</Exam>");
        var atts = map.Descendants("Question").Attributes().Where(a => a.Name == "Text").ToList();
        var QuestionList = map.Descendants("Question").ToList();
        foreach (XElement nodexm in QuestionList)
        {
            if((string)nodexm.Attributes("Text").FirstOrDefault()== label2.Text)
            {
                string[] arrUserAnswer = textBox1.Text.Trim().ToLower().Split(' ');
                string[] arrXMLAnswer = nodexm.Elements("Answer").SelectMany(o => ((string)o.Attribute("Text")).Split(',')).ToArray();
                List<string> lststr1 = new List<string>();
                foreach (string nextStr in arrXMLAnswer)
                {
                    if (Array.IndexOf(arrUserAnswer, nextStr) != -1)
                    {
                        lststr1.Add(nextStr);
                    }
                }
                if (lststr1.Count > 0)
                {
                    label4.Visible = true;
                    label4.Text = "Your Answer is "+ ((100 * lststr1.Count) / arrXMLAnswer.Length).ToString() + "%" + "Correct";
                }
                else
                {
                    label4.Text = "Your Answer is Wrong";
                }
            }
        } 
```

# iphone - UIWebView 加载 XML 的最佳方式

> ID：10795090
> 
> 赞同：0
> 
> 时间：2012-05-29T07:51:17.990
> 
> 标签：iphone, objective-c, xcode, uiwebview

我想在 UIWebView 上显示 Xml 文件，我正在做的是：

```
 [m_WebView loadData:[NSData dataWithContentsOfURL:theURL] MIMEType:nil textEncodingName:nil baseURL:nil]; 
```

但这不能正确显示它，我无法控制它的颜色成分，任何建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T07:55:28.050

您需要使用自己的样式表来启用对组件的控制，否则 Web 视图会将 xml 加载为其默认格式。

使用 UIWebView 查看以下关于 css 的教程 - [http://mentormate.com/blog/iphone-uiwebview-class-local-css-javascript-resources/](http://mentormate.com/blog/iphone-uiwebview-class-local-css-javascript-resources/)， [http://iphoneincubator.com/blog/windows-views/uiwebview-重访](http://iphoneincubator.com/blog/windows-views/uiwebview-revisited)

# javascript - 在控制器类中实现后退按钮

> ID：10795092
> 
> 赞同：1
> 
> 时间：2012-05-29T07:51:21.657
> 
> 标签：javascript, spring, spring-mvc

我有一个后退按钮，我想在控制器中实现它的功能，我不想使用 window.history.back 功能。

当用户单击后退按钮时，我如何将控制权转移到控制器。我不想使用表单提交。

将要完成的步骤是：

1.  用户单击后退按钮，（使用`onClick`事件调用 javascript 函数）
2.  javascript 函数将控制权传递给控制器​​，换句话说，javascript 调用了一个`@RequestMapping`方法。
3.  控制器使用 (return `redirect:some page.jsp`) 进行重定向。

我怎样才能实现这样的场景。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T08:43:08.457

你可以做类似下面提到的行。但在我看来，这不是干净的方法。但作为一种选择，它不能被忽视。看看这行代码。

```
<input type="button" value="Go Back" onclick="javascript:window.location.href='<%=request.getContextPath()%>/services'"/> 
```

您只需将代码中的**/services**部分替换为您想要返回的 url 映射。

另一种干净的方法可能是从控制器传递此返回 URL，然后在此处使用您的 jsp 中的值。

希望这对您有所帮助。

干杯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T09:13:10.620

控制器

```
@RequestMapping("/get-back-url")
public String getBackUrl(@RequestParam String pageId) {
    return "redirect:" + getBackUrlFromPageId(pageId); // or something else
} 
```

看法：

```
<a href="/get-back-url?pageId=currentPageId">Go back</a> 
```

# c# - 多次调用网络服务

> ID：10795094
> 
> 赞同：1
> 
> 时间：2012-05-29T07:51:36.270
> 
> 标签：c#, asp.net, web-services

在一个数据库中，我有 30k 个用户，每个用户都有一个指定的电话号码。对于每个电话号码，我将调用一个 Web 服务，该服务会为用户提取一些信息。很多用户没有在webservice中呈现，所以我只会收到null，但我不知道哪些用户，并且可以不时呈现新用户。网络服务会实时更新，所以新的结果会时不时出现。如果响应不为空，并且收到的文件与上次收到的文件不同，我会从收到的 XML 文件创建一个 PDF 文档。

Web 服务调用由计划任务启动，该任务启动具有以下伪代码的 .aspx 站点：

```
Foreach phonenumber {
HttpWebRequest webRequest = (HttpWebRequest)WebRequest.Create("webservice/phonenumber");

using (StreamReader reader = new StreamReader(webResponse.GetResponseStream()))
    {
        makePdf();
    }
} 
```

当然，问题是请求需要很长时间。对于 30k 用户来说，大约需要 7 个小时。我曾尝试查看异步 Web 服务调用，但无法正常工作。有人可以指出我正确的方向 - 如果可能的话 - 或者告诉我应该如何去做？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T08:08:10.033

首先，您应该检查时间是在 Web 服务中还是在 PDF 创建中。如果它在网络服务中，请检查您是否缺少索引等。为了改进网络服务，您可以同时获取多个电话号码。如果您的问题出在 PDF 创建中，请找到一种方法来改进 pdf 的创建。目前尚不清楚您使用什么工具来创建 pdf。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T08:56:35.953

为什么您的服务不能只实现一个接受时间戳参数并返回自该时间戳以来更改的用户列表（或数组）的方法。这样，您应该只能为这些用户发送请求。

# python - 在 Flask 应用程序中，我应该将清理代码放在哪里？

> ID：10795095
> 
> 赞同：8
> 
> 时间：2012-05-29T07:51:41.517
> 
> 标签：python, flask

我是使用 Python 进行 Web 开发的新手，我选择了 Flask 来启动我的 Web 应用程序。在应用程序关闭之前，我有一些资源可以释放，但我找不到将我的清理代码放在哪里。Flask 提供了一些装饰器，例如`before_request`和`teardown_request`在请求处理之前和之后注册回调。是否有类似于在应用程序停止之前注册要调用的回调的东西？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T11:22:47.133

该`atexit`模块允许您注册程序终止回调。但是，如果应用程序被信号终止，则不会调用其回调。如果您需要处理这些情况，您可以使用`signal`模块注册相同的回调（例如，您可能想要处理 SIGTERM 信号）。

我可能误解了你到底想清理什么，但是文件句柄或数据库连接等资源将在解释器关闭时关闭，所以你不必担心这些。

# wcf-data-services - 如何在不发送客户端请求的情况下从服务器获取响应？

> ID：10795100
> 
> 赞同：2
> 
> 时间：2012-05-29T07:51:57.787
> 
> 标签：wcf-data-services

我想为自动化网站创建聊天，因此客户端不会向服务器发送任何请求以进行响应，而是服务器在收到来自其他客户端的消息时向客户端发送响应。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T07:53:03.730

通常服务器不能呼叫客户端。然而，这种效果可以通过一些技巧来模拟。您需要寻找像 SignalR 这样的长轮询类型解决方案：

[http://signalr.net/](http://signalr.net/)

聊天示例（从服务器到客户端的消息广播）： [http ://www.hanselman.com/blog/AsynchronousScalableWebApplicationsWithRealtimePersistentLongrunningConnectionsWithSignalR.aspx](http://www.hanselman.com/blog/AsynchronousScalableWebApplicationsWithRealtimePersistentLongrunningConnectionsWithSignalR.aspx)

# php - 在 Codeigniter 中上传带有 url 地址的图像

> ID：10795106
> 
> 赞同：1
> 
> 时间：2012-05-29T07:52:22.357
> 
> 标签：php, codeigniter

CodeIgniter 上传库只支持从 PC 上传图片文件。

我正在尝试制作一个代码，用户可以使用图像 url 地址上传图像。

[http://example.com/photo/jake2910.jpg](http://example.com/photo/jake2910.jpg)

我只需将此图像地址发送到服务器并上传照片。

有没有办法做到这一点？（相信我，我已经尝试了几天不同的代码。）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-29T08:15:33.963

CI的上传库根本不需要。您可以使用以下代码简单地下载文件：

```
$url = 'http://example.com/photo/jake2910.jpg';
/* Extract the filename */
$filename = substr($url, strrpos($url, '/') + 1);
/* Save file wherever you want */
file_put_contents('upload/'.$filename, file_get_contents($url)); 
```

但要非常小心您要保存的文件。请记住，即使是图像也可能塞满易受攻击的代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T08:04:01.783

试试这个

```
copy('http://example.com/photo/jake2910.jpg', '/mylocation/jake2910.jpg'); 
```

有关更多详细信息，您可以查看此类似帖子

[通过 HTTP 从远程服务器复制图像](https://stackoverflow.com/questions/909374/copy-image-from-remote-server-over-http)

# jsp - 解析jsp和JSON数组

> ID：10795108
> 
> 赞同：0
> 
> 时间：2012-05-29T07:52:41.070
> 
> 标签：jsp, arrays

我有一个 servlet，它创建一个对象列表并将其发送到一个 jsp 文件。该文件应显示使用 JSONArray 的整个对象列表（它将由 android 应用程序读取，因此我必须使用 JSONArrays）。几天前，我开始阅读有关如何解析 JSONArray 中要读取的文本的指南，但我完全失败了。这是我需要做的一个例子。

```
 <%@ page language="java" contentType="application/json; charset=ISO-8859-1" pageEncoding="ISO-8859-1"%>{
<%List<Object> list = (List<Objects>) request.getAttribute("object");
for (int i = 0; i <= list.size(); i++)
%>{
        "Title" : "<%= object.getTitle()%>",
        "Content" : "<%= object.getContent()%>"
},
<%
}
%> 
```

问题是：如何获得完整的对象列表，并使用 JSONArray 格式显示它们？我怎么写“如果这是最后一个元素，不显示”}，“但只显示“}”？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T07:55:29.880

帮自己一个忙，并且

*   不要使用 JSP 来做到这一点。在 servlet 中生成 JSON 数组
*   使用 JSON 库将您的 Java 对象转换为 JSON 数组。有很多这些库是免费的。见[http://json.org](http://json.org)

现在，回答您的 Java 编程问题：

```
if (i == list.size() - 1) {
    out.print("}");
}
else {
    out.print("},");
} 
```

# java - 我如何以编程方式在 Android 中放大 mp3 声音

> ID：10795119
> 
> 赞同：2
> 
> 时间：2012-05-29T07:53:10.703
> 
> 标签：java, android, audio, mp3

我在我的 android aap 中使用了一些 mp3 文件。它的音量非常低。如何以编程方式将其声音放大 3 倍。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T08:05:34.327

如果您想以编程方式增强 mp3 声音，那么它将花费大量 cpu 使用，（这对于低端设备来说是一个严重的问题）而且您有一些预加载的 mp3 可以播放，所以我的建议是预先增加这些 mp3 的音量（使用一些声音编辑软件，如[audacity](http://audacity.sourceforge.net/)），然后在您的应用程序中使用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T00:06:46.827

如果您使用 SoundPool，播放函数包含一个音量参数。这有帮助吗？正如@orchidrudra 建议的那样，您应该增强文件本身的声音，因为这只会让您变得更安静。

# java - 获取 SAX 解析器属性

> ID：10795121
> 
> 赞同：0
> 
> 时间：2012-05-29T07:53:20.783
> 
> 标签：java, android, xml

```
<Details><propname key="workorderid">799</propname> 
```

如何使用 SAXParing 从 workorderid 获得 799？当我使用此代码时，我得到“workorderid”但不是 workorderid 的值

```
if(localName.equals("propname")){
String workid = attributes.getValue("key"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T07:59:43.267

在具有正确值`propname`的属性中。您需要获取值 propname。`Key``workorderid`

```
 //Provide you tagname which is propname

 NodeList nl = ele.getElementsByTagName(tagName);
        if(nl != null && nl.getLength() > 0) {
            Element el = (Element)nl.item(0);
            textVal = el.getFirstChild().getNodeValue();
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T08:06:03.640

```
if(localName.equals("propname")){ 
```

//在此处设置一个标志并在 endElement() 中获取与您的 localname(propname) 关联的值 String workid = attributes.getValue("key");

我正在为您提供代码，尝试以您的方式理解和定制。

```
public class ExampleHandler extends DefaultHandler {

    private String item;
    private boolean inItem = false;

    private StringBuilder content;

    public ExampleHandler() {
        items = new Items();
        content = new StringBuilder();
    }

    public void startElement(String uri, String localName, String qName, 
            Attributes atts) throws SAXException {
        content = new StringBuilder();
        if(localName.equalsIgnoreCase("propname")) {
            inItem = true;
        } else attributes.getValue("key");

    }

    public void endElement(String uri, String localName, String qName) 
            throws SAXException {
        if(localName.equalsIgnoreCase("propname")) {
            if(inItem) {
                item = (content.toString());
              }
    }

    public void characters(char[] ch, int start, int length) 
            throws SAXException {
        content.append(ch, start, length);
    }

    public void endDocument() throws SAXException {
        // you can do something here for example send
        // the Channel object somewhere or whatever.
    }

} 
```

可能有什么地方出错了，我很着急。如果帮助欣赏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T08:06:10.930

以下将保存节点的值。

```
public void characters(char[] ch, int start, int length) throws SAXException {
        tempVal = new String(ch,start,length);
    } 
```

在事件处理程序方法中，您需要像这样获取它：

```
if(qName.equals("propname")) {
   System.out.println(" node value " + tempVal); // node value
   String attr = attributes.getValue("key") ; // will return attribute value for the propname node.
} 
```

# forms - 动态加载它们时面板重叠 sencha

> ID：10795123
> 
> 赞同：0
> 
> 时间：2012-05-29T07:53:37.217
> 
> 标签：forms, extjs, panel

我在工具栏上有几个选项卡，每个选项卡都有单独的处理程序，我已经调用了每个处理程序的单独功能。代码如下

```
Ext.define('myco.view.User', {
    extend: 'Ext.Container',
    config: {
        scrollable: true,
        items: [{
                xtype: 'panel',
                id: 'User'
            },

            {
            docked: 'top',
            xtype: 'toolbar',
            items: [{
                text: 'My Profile',
                handler: function() {
                    var panel = Ext.getCmp('User'),
                        tpl = new Ext.XTemplate([
                        '<div class="demo-weather">',
                            '<tpl for=".">',
                                '<div class="day">',
                                    '<div class="date">{username}</div>',
                                    '<tpl for="weatherIconUrl">',
                                        '<img src="{value}">',
                                    '</tpl>',
                                    '<span class="temp">{tempMaxF}&deg;<span class="temp_low">{tempMinF}&deg;</span></span>',
                                '</div>',
                            '</tpl>',
                        '</div>'
                    ]);

                    panel.getParent().setMasked({
                        xtype: 'loadmask',
                        message: 'Loading...'
                    });

                    Ext.Ajax.request({
                        url: 'http://localhost:8000/api/myapp/user/',
                        method:'GET',
                        callbackKey: 'callback',
                        defaultHeaders : 'application/json',
                        params: {
                            //key: '23f6a0ab24185952101705',
                            //q: '94301', // Palo Alto
                            format: 'json',
                            //num_of_days: 5
                        },
                        success : function(response, opt) {
                                    dataarray = Ext.decode(response.responseText);
                                    weather=dataarray.objects;
                                    panel.updateHtml(tpl.applyTemplate(weather))
                                    panel.getParent().unmask();
                                    },
                        failure : function(response, opt) {
                                     Ext.Msg.alert('Failed', response.responseText);
                                     panel.getParent().unmask();
                                    }       

                    });
                }
            },
            {
                 text:'login',
                 handler: function() {
                     var main = new Ext.Panel({  
                                   title: 'My first panel', //panel's title  
                                   fullscreen: true,
                                   //the element where the panel is going to be inserted 
                                   //html: 'Nothing important just dummy text' //panel's content  
                                   items:[
                        {
                            xtype: 'fieldset',
                            title: 'Login',
                            items: [
                                {
                                    xtype: 'textfield',
                                    label: 'Username',
                                    name:   'username',
                                    id  :  'username'
                                },
                                {
                                    xtype: 'passwordfield',
                                    label: 'Password',
                                    name:  'password',
                                    id   :  'password'
                                }
                            ]
                        },
                        {
                            xtype: 'button',
                            text: 'Send',
                            ui: 'confirm',

                            handler: function() {}

                        }
                    ]
                                   });  
                 panel.add(main);
                 alert('test');
                 }
            }
            ]
        }]
    }
}); 
```

现在，当我单击选项卡时，前一个面板将不会被清除，并且数据将在那里重叠.....就像当我单击我的个人资料配置文件在那里列出时，之后当我单击登录个人资料 + 登录时，两者都将被加载一个重叠其他 ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T08:53:13.007

您应该为此使用[Ext.tab.Panel](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.tab.Panel)，将您的个人资料和登录面板定义为父 TabPanel 的项目，切换将由 ExtJS 处理。您可以使用面板的*激活*事件添加自定义逻辑以在您的选项卡被激活时执行。

# jquery - 奇怪的jQuery问题

> ID：10795128
> 
> 赞同：3
> 
> 时间：2012-05-29T07:53:48.137
> 
> 标签：jquery

我已将此脚本插入到包含 50 个小图像（从 16x16px 到 50x50px）的网页中：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){
$('img').css('opacity', '0.0').load(function(){
    $(this).animate({'opacity': '1.0'});
});         
});
</script> 
```

问题是并非所有图像都已加载，并且有些图像没有出现。

为什么 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T07:56:58.630

当您将其不透明度设置为 0 时，某些图像可能已经加载，因此它们的`onload`处理程序已经运行并且您没有机会再次使它们可见。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T08:05:37.553

有可能从缓存中加载了一些图像。如果图像是从缓存加载的，那么`load`事件将在`dom ready`事件之前触发。一种方法是

```
$('img').css('opacity', '0.0').one('load',function(){
    $(this).animate({'opacity': '1.0'});
}).each(function() {
   if(this.complete) $(this).load();
}); 
```

这将遍历图像并检查它们是否已从缓存中加载，如果是，则会为这些图像触发加载事件。

而且我使用[$.one](http://api.jquery.com/one/)只运行一次事件处理程序，因为我们不需要它多次执行。

**更新：**

`if(this.complete)`将检查图像是否已经加载（在缓存的情况下），如果是，它将`load`立即为那些触发事件。

而那些不是从缓存中加载的，浏览器会`load`在加载后为它们触发事件。

因此，上面的代码将涵盖所有图像，无论是否缓存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T08:01:40.727

`opacity`在 CSS 样式中设置默认值，而不是通过 javascript。之后，使用`animate`.

```
<style>
     img { opacity:0 }
</style>

<script type="text/javascript">
$(document).ready(function(){
    $('img').load(function(){
        $(this).animate({'opacity': '1.0'});
    });         
});
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T07:59:08.897

使用预加载图像 javascript 代码...

```
<script type="text/javascript">
if (document.images) {
    img1 = new Image();
    img1.src = "image.jpg";
    img2 = new Image();
    img2.src = "image2.jpg";
}
</script> 
```

现在所有图像都预加载到客户端机器中并且始终可见....

或者

灵活阵列

```
function preload(images) {
    if (document.images) {
        var i = 0;
        var imageArray = new Array();
        imageArray = images.split(',');
        var imageObj = new Image();
        for(i=0; i<=imageArray.length-1; i++) {
            //document.write('<img src="' + imageArray[i] + '" />');// Write to page (uncomment to check images)
            imageObj.src=images[i];
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-29T08:02:44.030

您可以更好地设置 css 中图像的不透明度，例如

```
img {
opacity:0
} 
```

然后使用您的代码

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){
$('img').load(function(){
    $(this).animate({'opacity': '1.0'});
});         
});
</script> 
```

# c# - C# - 每台计算机上的 ListView 列文本大小不一样

> ID：10795134
> 
> 赞同：0
> 
> 时间：2012-05-29T07:54:14.753
> 
> 标签：c#, listview, text, size

我正在制作一个带有列表视图的 C# 程序，在我的 PC 和上网本中，列大小是完美的，但是当我在朋友的计算机上运行该程序时，列的大小似乎更小，文本被剪切，例如，如果我的列在我的 PC 中显示“Hello Stackoverflow”，在我朋友的 PC 中显示“Hello Stac...”。列的大小是在代码中设置的，他没有调整大小……这怎么可能？我们正在使用相同的屏幕分辨率（1080p），即使他将分辨率更改为更大的分辨率（800x600），列文本仍然被剪掉，只是窗口通常更大......可能是默认字体窗户使所有这些问题？谢谢你们！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-05-02T02:13:40.207

`ListView`不会覆盖该`ScaleControl`方法，因此它不会随着 DPI 更改而正确缩放。您可以改为在表单中执行此操作。此方法不需要您知道 DPI 设置。[从MSDN 论坛](https://social.msdn.microsoft.com/Forums/en-US/0577059f-8c82-4054-bb5d-aa743622a7f8/bug-listview-columns-do-not-scale-with-dpi-or-font-changes?forum=winforms)复制的代码。

```
private void ScaleListViewColumns(ListView listview, SizeF factor)
{
    foreach (ColumnHeader column in listview.Columns)
    {
        column.Width = (int)Math.Round(column.Width * factor.Width);
    }
}

protected override void ScaleControl(SizeF factor, BoundsSpecified specified)
{
    base.ScaleControl(factor, specified);
    ScaleListViewColumns(listView1, factor);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-29T07:59:16.453

这可能与 DPI 设置有关。您的朋友可能启用了“大字体”。设置固定列宽，您需要考虑 DPI 设置。100 像素始终是 100 像素，但是更改 DPI 设置会使 8pt 字体在您朋友的机器上比在您的机器上更大。

您可以轻松计算：

```
int columnWidth = Desired Width / 96.0 * DPI; 
```

是`Desired Width`您希望列宽的像素数，并且`DPI`是当前机器的水平 DPI。

# python - wxpython 在处理不间断事件时似乎已经死了

> ID：10795135
> 
> 赞同：0
> 
> 时间：2012-05-29T07:54:15.533
> 
> 标签：python, thread-safety, wxpython, web-crawler

我正在编写一个网络爬虫，使用 wxpython 来显示实时结果。假设`crawl`窗口上只有一个命名按钮。当我单击按钮时，会出现一个新对话框，新对话框上的 TextCtrl 将显示当前正在抓取的 url。

代码可以简化如下（只是带有`WebCrawler`线程`OnDisplayClick`功能的 UI）：

```
# -*- coding: utf-8 -*- 

import wx
class Main ( wx.Frame ):

    def __init__( self, parent ):
        wx.Frame.__init__ ( self, parent, id = wx.ID_ANY, title = wx.EmptyString, pos = wx.DefaultPosition, size = wx.Size( 500,300 ), style = wx.DEFAULT_FRAME_STYLE|wx.TAB_TRAVERSAL )

        self.SetSizeHintsSz( wx.DefaultSize, wx.DefaultSize )

        bSizer3 = wx.BoxSizer( wx.VERTICAL )

        self.Crawl = wx.Button( self, wx.ID_ANY, u"Crawl", wx.DefaultPosition, wx.DefaultSize, 0 )
        self.Crawl.SetDefault() 
        bSizer3.Add( self.Crawl, 0, wx.ALL, 5 )

        self.SetSizer( bSizer3 )
        self.Layout()

        self.Centre( wx.BOTH )

        # Connect Events
        self.Crawl.Bind( wx.EVT_BUTTON, self.OnDisplayClick )

    def __del__( self ):
        pass

    # Virtual event handlers, overide them in your derived class
    def OnDisplayClick( self, event ):

            #Show the display window
        newDisplay = Display(self)
            newDisplay.show()

            ############################################################
            ##          start a multi-threading webcrawler            ##
            ############################################################

            web_crawler = WebCrawler(newDisplay.current_url)
            web_crawler.startCrawl()

class Display ( wx.Frame ):

    def __init__( self, parent ):
        wx.Frame.__init__ ( self, parent, id = wx.ID_ANY, title = wx.EmptyString, pos = wx.DefaultPosition, size = wx.Size( 500,300 ), style = wx.DEFAULT_FRAME_STYLE|wx.TAB_TRAVERSAL )

        self.SetSizeHintsSz( wx.DefaultSize, wx.DefaultSize )

        bSizer4 = wx.BoxSizer( wx.VERTICAL )

        self.cur_url = wx.StaticText( self, wx.ID_ANY, u"Current_URL: ", wx.DefaultPosition, wx.DefaultSize, 0 )
        self.cur_url.Wrap( -1 )
        bSizer4.Add( self.cur_url, 0, wx.ALL, 5 )

        self.current_url = wx.TextCtrl( self, wx.ID_ANY, wx.EmptyString, wx.DefaultPosition, wx.DefaultSize, 0 )
        bSizer4.Add( self.current_url, 0, wx.ALL, 5 )

        self.SetSizer( bSizer4 )
        self.Layout()

        self.Centre( wx.BOTH )

    def __del__( self ):
        pass 
```

用户界面：

![爬行](../Images/d2f1d7c2c769c17f72adc7a12f2e8241.png) ![展示](../Images/52e5311aba5a8b0e454dd50e83638f33.png)

WebCrawler 是一个多线程爬虫，我将 TextCtrl( `current_url`) 传递给 WebCrawler 让它在显示窗口上显示当前爬取的 url，但是当我点击爬取按钮时，界面似乎死了，我猜是因为多线程 WebCrawler 正在运行，UI 线程无法获得显示新窗口的机会。我尝试使用threading.Thread编写另外两个线程，一个用于显示新窗口，一个用于WebCrawler，但我失败了，该应用程序经常立即退出，尽管它可以显示窗口并处理爬行线程几秒钟，有时它告诉我类似：

```
(python2.7:5231): Pango-CRITICAL **: pango_layout_get_iter: assertion `PANGO_IS_LAYOUT (layout)' failed

(python2.7:5404): GLib-GObject-CRITICAL **: g_object_ref: assertion `object->ref_count > 0' failed 
```

这两个主题如下：

```
class UpdateThread(threading.Thread):

    """ WebCrawler thread """

    def __init__(self, webCrawl):
        threading.Thread.__init__(self)
        self.webCrawl = webCrawl

    def run(self):
        self.webCrawl.start()

class CrawlShowThread(threading.Thread):

    """ Display thread """
    def __init__(self, crawl_display):
        threading.Thread.__init__(self)
        self.crawl_display = crawl_display

    def run(self):
        self.crawl_display.Show() 
```

然后在 OnCrawlClick() 函数中都 start()。但就像我上面所说的那样，该方法不起作用。

谁能告诉我处理这些事情的正确方法是什么？任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T08:03:01.100

不允许您从非主线程访问 GUI。请参阅有关[此的文档 wiki](http://wiki.wxpython.org/Non-Blocking%20Gui#Communicating_with_the_main_thread)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T13:48:35.517

问题是你正在运行一个很长的任务并且它阻塞了 GUI 的主事件循环，所以它基本上被冻结了。您需要将爬虫放入单独的线程中，并使用 wxPython 的线程安全方法来更新 GUI。请参阅[wiki](http://wiki.wxpython.org/LongRunningTasks)或本[教程](http://www.blog.pythonlibrary.org/2010/05/22/wxpython-and-threads/)

# r - R：在数据帧上使用 for 循环

> ID：10795136
> 
> 赞同：-1
> 
> 时间：2012-05-29T07:54:16.213
> 
> 标签：r, loops

我有一个数据框，`deflator`.

我想获得一个新的数据框`inflation`，可以通过以下方式计算：

```
 deflator[i] - deflator[i-4]
----------------------------- * 100
        deflator [i - 4] 
```

数据框`deflator`有 71 个数字：

```
> deflator
 [1] 0.9628929 0.9596746 0.9747274 0.9832532 0.9851884
 [6] 0.9797770 0.9913502 1.0100561 1.0176906 1.0092516
[11] 1.0185932 1.0241043 1.0197975 1.0174097 1.0297328
[16] 1.0297071 1.0313232 1.0244618 1.0347808 1.0480411
[21] 1.0322142 1.0351968 1.0403264 1.0447121 1.0504402
[26] 1.0487097 1.0664664 1.0935239 1.0965951 1.1141851
[31] 1.1033155 1.1234482 1.1333870 1.1188136 1.1336276
[36] 1.1096461 1.1226584 1.1287245 1.1529588 1.1582911
[41] 1.1691221 1.1782178 1.1946234 1.1963453 1.1939922
[46] 1.2118189 1.2227960 1.2140535 1.2228828 1.2314258
[51] 1.2570788 1.2572214 1.2607763 1.2744415 1.2982076
[56] 1.3318808 1.3394186 1.3525902 1.3352815 1.3492751
[61] 1.3593859 1.3368135 1.3642940 1.3538567 1.3658135
[66] 1.3710932 1.3888638 1.4262185 1.4309707 1.4328823
[71] 1.4497201 
```

这对我来说是一个非常棘手的问题。我尝试使用 for 循环来做到这一点：

```
> d <- data.frame(deflator)
> for (i in 1:71) {d <-rbind(d,c(delfaotr ))} 
```

我想我可能做错了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T08:14:30.657

为什么要使用数据框？这是一个简单的向量运算。

```
inflation = 100 * (deflator[1:67] -  deflator[-(1:4)])/deflator[-(1:4)] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T10:04:57.580

我同意@Fhnuzoag 您的示例建议对数字向量而不是数据框进行计算。这是利用函数`lag`中的参数进行计算的另一种方法`diff`（索引与您的问题中的索引匹配）：

```
lagBy <- 4 # The number of indexes by which to lag

laggedDiff <- diff(deflator, lag = lagBy) # The numerator above

theDenom <- deflator[seq_len(length(deflator) - lagBy)] # The denominator above

inflation <- laggedDiff/theDenom 
```

前几个结果是：

```
head(inflation)
# [1] 0.02315470 0.02094710 0.01705379 0.02725941 0.03299085 0.03008297 
```

# hibernate - 休眠中的列别名？

> ID：10795151
> 
> 赞同：0
> 
> 时间：2012-05-29T07:55:43.950
> 
> 标签：hibernate, hibernate-mapping

我有以下表模式的表：

![在此处输入图像描述](../Images/cd81dc48307f77c9a11b5f57f215759f.png)
我创建了一个在查询执行时返回值列表的方法。

```
 protected List findAllWithGroupClause(Class clazz) {

    List objects = null;
    try {
        startOperation();
        String SQL_QUERY = "SELECT COUNT(serviceName) AS RunningInstances ,serviceName,SUM(numberofthread) as workerThread "
                + "FROM servicemanagerdetails WHERE servicemanagerstatus=:status GROUP BY serviceName";
        Query query = session.createQuery(SQL_QUERY);
        query.setString("status", "Running");
        objects = query.list();
        tx.commit();
    } catch (HibernateException e) {
        handleException(e);
    } finally {
        HibernateFactory.close(session);
    }
    return objects;
} 
```

对于声明的 ServiceManagerDetails.hbm.xml 文件：

```
 <?xml version="1.0" encoding="UTF-8"?>
    <!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN" "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping>
  <class name="com.arosys.hibernatedatamanager.ServiceManagerDetails" table="servicemanagerdetails">
    <id column="servicedetailsid" name="servicedetailsID" type="integer">
      <generator class="increment"/>
    </id>
    <property column="serviceID" name="servicemanagerID" type="string"/>
    <property column="servicemode" name="servicemode" type="string"/>
    <property column="servicetype" name="servicetype" type="string"/>
    <property column="servicemanagerstatus" name="servicemanagerstatus" type="string"/>
    <property column="controlqueue" name="controlQueue" type="string"/>
    <property column="controlexchange" name="contolExchange" type="string"/>
    <property column="controlroutingkey" name="controlRoutingkey" type="string"/>
  </class>
</hibernate-mapping> 
```

我已经为此创建了列别名，它需要编写 setter 和 getter 方法以及定义映射？请解释如何从列表中检索值。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T09:59:36.363

您有一个用于选择聚合函数 COUNT、SUM 等的 select 语句。在这种情况下，hibernate`Query.list()`返回一个对象数组列表。

如果你想得到第四行的 SUM，你可以

```
Object obj4[] = objects.get(3);
long sum4 = ((Number)obj4[2]).longValue(); 
```

和你做的第三行的 serviceName

```
Object obj3[] = objects.get(2);
String name2 = (String)obj4[2]; 
```

（这两个示例都用于解释；您的代码看起来会更加多变）。

你不需要编写 getter 和 setter，你甚至不能这样做。您不能在选择字符串之外使用列别名。

# jquery - Jquery克隆选择器并修改选项ID

> ID：10795153
> 
> 赞同：2
> 
> 时间：2012-05-29T07:55:55.377
> 
> 标签：jquery, clone

```
<select id="one">
    <option id="one_val_a" value="one">one</option>
    <option id="two_val_a" value="two">two</option>
    <option id="three_val_a" value="three">three</option>
</select>

<span id="pin"></span> 
```

我如何克隆`#one`，使其 id `#two`，并将其选项 id 设置为`#one_val_b`,`#two_val_b`等。

```
$('#one').clone(true, true).attr('id', 'two').appendTo('#pin'); 
```

这至少会更改克隆的 ID，但现在如何更改其选项 ID？

jsfiddle：http: [//jsfiddle.net/C2zCZ/2/](http://jsfiddle.net/C2zCZ/2/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T08:06:08.200

这是另一种方式，使用正则表达式替换`option`id 属性，因此原始选项有多少并不重要`select`：

```
$('#one').clone(true, true)
    .attr('id', 'two').appendTo('#pin')
    .find("option").each(function() {
        $(this).attr("id", $(this).attr("id").replace(/\_a$/, "_b"));
    }); 
```

[**示例小提琴**](http://jsfiddle.net/RoryMcCrossan/C2zCZ/8/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T08:29:10.713

```
$('#one')
    .clone(true, true)   // perform the clone
    .attr('id', 'two')  // change the id
    .appendTo('#pin')    // append to #pin
    .children()          // get all options
    .attr("id", function(i, value) {  // processing on ids
        // replacing last charecter with its next charecter
        return value.replace(/[a-z]$/, function(char, index) {
            return String.fromCharCode(char.charCodeAt(0) + 1);
        });
    }); 
```

**[工作样本](http://jsfiddle.net/rmEge/2/)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T08:00:50.830

另一个单行：

```
$('#one').clone(true, true).attr('id', 'two').each(function() {
    $(this).children().attr("id", function(i, value) {
        switch (i) {
            case 0: return "one_val_b";
            case 1: return "two_val_b";
            case 2: return "three_val_b";
        }
    });
}).appendTo('#pin'); 
```

**演示：http:** [//jsfiddle.net/C2zCZ/5/](http://jsfiddle.net/C2zCZ/5/)

* * *

另一种更灵活的单线：

```
$('#one').clone(true, true).attr('id', 'two').appendTo('#pin')
    .children().attr("id", function(i, value) {

    var last = value.lastIndexOf("_") + 1;
    var char = value.substring(last).charCodeAt(0);
    return value.substring(0, last) + String.fromCharCode(char + 1);
}); 
```

**演示：http:** [//jsfiddle.net/C2zCZ/10/](http://jsfiddle.net/C2zCZ/10/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-29T07:59:01.520

```
counter = 1;
$('#one').clone(true, true).attr('id', 'two').appendTo('#pin').find('option').each(function(){
    $(this).attr('id', 'option_id_' + counter++);
}); 
```

这是您的 jsFiddle 更新和工作：http: [//jsfiddle.net/C2zCZ/4/](http://jsfiddle.net/C2zCZ/4/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-29T08:28:58.480

这是一个班轮，

```
$('#one').clone(true).attr('id', 'two').children('option').attr('id',function(){
    return this.id.replace(/\a$/, 'b');
}).end().appendTo('#pin'); 
```

[小提琴](http://jsfiddle.net/qrReh/)

**附言**

1.  第二个参数`clone()`是复制第一个参数中的值（默认情况下），因此不需要传递第二个参数。

2.  我使用了，`end()`因为我认为我们不应该在插入 dom 之后访问。（我的方法应该更快，但我没有做过测试）

# c# - 找到基于两个输入的唯一输出？

> ID：10795158
> 
> 赞同：2
> 
> 时间：2012-05-29T07:56:19.903
> 
> 标签：c#, algorithm, math, unique

我需要找到一种方法，这样用户必须输入 2 个数字（int），并且对于每个不同的值，都会返回一个输出（最好是 int！）。假设用户输入`6, 8`它会`k`在用户输入任何其他内容或任何其他输入时`6,7`返回`9,8`，`m, n`除了`6, 8`（即使只有一个输入被更改）会产生完全不同的输出。但问题是，它应该是唯一的，`m, n`所以我不能使用类似的东西，`m*n`因为`6 X 4 = 24`而且，`12 X 2 = 24`所以输出不是唯一的，所以我需要找到一种方法，对于每个不同的输入，都有一个完全不同的输出不重复任何其他值。

**编辑：**响应尼古拉斯：输入范围可以是任何东西，但会小于 1000（但当然大于 1！）

**编辑 2**：作为对 Rawling 的回应，我可以使用 long (Int64) 但最好不要使用 float 或 doulbe，因为此输出将用于 for 循环，而 float 和 double 对于 for 循环来说很糟糕，你可以[在这里查看](http://brianreiter.org/2010/12/30/is-f-math-really-faster-than-c/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-29T08:01:32.143

由于您的两个数字小于 1000，因此您可以`k = (1000 * x1) + x2`得到一个唯一的答案。最大值将是`999999`，它在 32 位的范围内`int`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-29T08:00:47.513

你总是可以`long`从两个整数中返回一个 : `a`，`b`返回`2^|INT_SIZE|*a + b`

[**从鸽巢原理**](http://en.wikipedia.org/wiki/Pigeonhole_principle)很容易看出，给定两个 int，一个不能为每个不同的输入返回唯一的 int。解释：如果你有 2 个数字，每个数字都包含`n`位，那么`2^n`每个数字都有可能，因此有`(2^n)^2`可能的对，所以根据鸽洞原理 - 你至少需要`lg_2((2^n)^2) = 2n` 位来表示它们，

**编辑**：您的编辑提到您的数字范围是`[1,1000]`- 因此可以应用相同的想法：`1000*a + b`将为每对生成一个唯一的 int 。
请注意，出于同样的原因，结果整数的范围必须是`[1,1000000]`- 否则会发生冲突。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-31T16:48:43.967

因为我没有 50 个帖子要评论，所以我必须说，有一些函数叫做[Pairing Functions](https://en.wikipedia.org/wiki/Pairing_function)。

配对函数，例如 Cantor 的配对函数（如上一个链接所示）和[Szudzik 的配对函数](http://szudzik.com/ElegantPairing.pdf)，它允许输入是无限的，并且仍然能够提供唯一且确定性的输出。

这是关于stackoverflow的另一个类似问题。（太好了，我需要 10 个声望才能发布两个以上的链接..）

（http://）stackoverflow.com/questions/919612/mapping-two-integers-to-one-in-a-unique-and-deterministic-way

编辑：我迟到了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T08:34:49.093

典型的数学解决方案是使用素幂。由于每个数字都可以唯一地分解为其主要因素，因此返回`2^n * 3^m`将为每个 n 和 m 提供不同的结果。

这可以扩展到`2^n * 3^m * 5^a * 7^b *11^c`等等；你只需要检查你没有用完 32 位整数。如果存在溢出的风险，您可以在除以大于输入范围的素数后取余数，您仍然具有唯一性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-29T08:10:07.050

如果您没有硬性上限，则可以执行以下操作：

```
int Unique (int x, int y)
{
    int n = x + y;
    int t = (n%2==0) ? ((n/2) * (n+1)) : (n * ((n+1)/2));
    return t + x;
} 
```

从数学上讲，这将为每对没有上限的（非负）整数返回一个唯一的非负整数。

从编程上讲，它会遇到溢出问题，这可以通过使用`long`代替`int`输入变量以外的所有内容来克服。

# javascript - “数组不是函数”错误

> ID：10795159
> 
> 赞同：1
> 
> 时间：2012-05-29T07:56:24.367
> 
> 标签：javascript, arrays, photoshop

我正在尝试创建一个在 Photoshop 中执行以下操作的 JS 脚本：

```
var textarray = array("Hello World", "Good morrow", "top of the morning"); 
```

对于数组中的每个单词

1.  打开新文档
2.  将单词写到图层上
3.  运行 Photoshop 动作
4.  保存并关闭

这是我到目前为止的代码..

```
var textarray = [ "Hello World", "Good morrow", "top of the morning" ];

for (x=0; x < textarray.length(); x++) {

#target photoshop
app.bringToFront();

var strtRulerUnits = app.preferences.rulerUnits;
var strtTypeUnits = app.preferences.typeUnits;
app.preferences.rulerUnits = Units.INCHES;
app.preferences.typeUnits = TypeUnits.POINTS;

var docRef = app.documents.add(7, 5, 72);

// suppress all dialogs
app.displayDialogs = DialogModes.NO;

var textColor = new SolidColor;
textColor.rgb.red = 255;
textColor.rgb.green = 0;
textColor.rgb.blue = 0;

var newTextLayer = docRef.artLayers.add();
newTextLayer.kind = LayerKind.TEXT;
newTextLayer.textItem.contents = textarray[x];
newTextLayer.textItem.position = Array(0.75, 0.75);
newTextLayer.textItem.size = 36;
newTextLayer.textItem.color = textColor;

app.preferences.rulerUnits = strtRulerUnits;
app.preferences.typeUnits = strtTypeUnits;
docRef = null;
textColor = null;
newTextLayer = null;

// DO ACTION HERE 
//CLOSE AND SAVE
} 
```

这是由于某种原因无法正常工作的数组部分.. 错误 24：textarray.length 不是函数

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T07:58:27.523

要回答最初的问题，`array( ... )`不是您如何在 JavaScript 中创建数组。

```
var textarray = [ "Hello World", "Good morrow", "top of the morning" ]; 
```

至于下一个问题（实际上应该是一个单独的问题），`length`不是函数而是属性。

```
for (x=0; x < textarray.length; x++) { 
    ... 
```

# c - 单线串口通讯，回显错误

> ID：10795161
> 
> 赞同：0
> 
> 时间：2012-05-29T07:56:29.567
> 
> 标签：c, ubuntu, serial-port, termios

我有一个单线串行通信接口，问题是我发送 01010101，我收到的回声是 01010101 的 10 次中有 8 次，但我收到 01110101 的 10 次中有 2 次。

代码示例：

```
void checkVersion(int fd) {
    tcflush(fd, TCIFLUSH);
    unsigned char checkVersion[] = {0x55, 0x02, 0x00, 0x02};
    int n = write(fd, &checkVersion, 4); //Send data
    if (n < 0) cout << "BM: WRITE FAILED" << endl;

    char read_bytes[10] = {0};
    char c;
    int aantalBytes = 0;
    bool foundU = false;
    int res;
    while (aantalBytes < 7) {
        res = read(fd, &c, 200);
        if (res != 0) {
            cout << "Byte received: " << bitset < 8 > (c) << endl;
            if (c == 'U')foundU = true;
            if (foundU)
                read_bytes[aantalBytes++] = c;
        }
        if (aantalBytes > 2 && !foundU) break;
    }
    if (!foundU) checkVersionSucceeded = false;
    if (read_bytes[aantalBytes - 3] == 0x02 && read_bytes[aantalBytes - 2] == 0x04 && read_bytes[aantalBytes - 1] == 0x06)
       cout << "BM Version 4" << endl;
} 
```

我如何配置我的端口：

```
int configure_port(int fd) // configure the port
{
    struct termios port_settings; // structure to store the port settings in

    cfsetispeed(&port_settings, B9600); // set baud rates
    cfsetospeed(&port_settings, B9600);

    port_settings.c_cflag &= ~PARENB; // set no parity, stop bits, data bits
    port_settings.c_cflag &= ~CSTOPB;
    port_settings.c_cflag &= ~CSIZE;
    port_settings.c_cflag |= CS8;

    tcsetattr(fd, TCSANOW, &port_settings); // apply the settings to the port
    return (fd);
} 
```

问题是什么？回声怎么可能混合了 10 次中的 2 次？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T09:41:03.107

也许您应该在配置连接时尝试使用 bzero() 函数。

```
bzero(&port_settings, sizeof (port_settings)); 
```

这会清除新端口设置的结构，这可能有助于阻止您通过串行端口收到的不规则答案。

# ios - 使用 UIImagePickerController 录制时如何使麦克风静音？

> ID：10795162
> 
> 赞同：4
> 
> 时间：2012-05-29T07:56:34.240
> 
> 标签：ios, xcode, uiimagepickercontroller, video-recording

我正在使用 UIImagePickerController 在我的一个应用程序中录制视频。我已成功录制视频。但现在我想在录制视频时将麦克风静音（没有音频的视频）。我已经搜索了很多，但没有一个关于它的线索。请帮我解决这个问题。有没有可能。如果可能的话，比如何。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T08:02:43.640

如果您希望您的应用程序出现在应用商店中，那么没有苹果批准的方法可以让整个 iPhone 静音。有某些库，但它们没有被批准。

[Apple 关于音频会话的文档](http://developer.apple.com/library/ios/#DOCUMENTATION/Audio/Conceptual/AudioSessionProgrammingGuide/Basics/Basics.html)

根据文档，您只能要求用户将手机静音，并且您可以响应某些音频更改，例如其他声音、电话、电子邮件声音，但您不能以编程方式静音。

另请参阅有关[iPhone 编程的文档](http://www8.cs.umu.se/education/examina/Rapporter/BenjaminEriksson%28kand%29.pdf)请参阅第 3.3 部分的音频。（可以在 iOS 中访问和执行的事件）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T08:41:49.227

您可以使用 AVFoundation 框架来录制没有声音的视频，请查看：

[AVFoundation 编程指南](http://developer.apple.com/library/ios/#DOCUMENTATION/AudioVideo/Conceptual/AVFoundationPG/Articles/00_Introduction.html#//apple_ref/doc/uid/TP40010188)

# javascript - 分钟变化时准确运行函数？

> ID：10795164
> 
> 赞同：22
> 
> 时间：2012-05-29T07:56:38.580
> 
> 标签：javascript, node.js

当分钟变化时，我怎样才能准确地运行一个函数？如果我在分钟变化时立即触发它，则使用 setInterval 可能会起作用。但我担心 setInterval 可能会在长时间运行的过程中被事件循环中断，并且不会与时钟保持同步。

分钟变化时如何准确运行函数？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-05-29T10:17:21.953

首先，您应该使用[`setInterval`](https://developer.mozilla.org/en/DOM/window.setInterval)重复计时器，因为它（试图）保证定期执行，即任何潜在的延迟都不会像重复`setTimeout`调用那样叠加。这将每分钟执行一次你的函数：

```
var ONE_MINUTE = 60 * 1000;

function showTime() {
  console.log(new Date());
}

setInterval(showTime, ONE_MINUTE); 
```

现在，我们需要做的是在正确的时间开始：

```
function repeatEvery(func, interval) {
    // Check current time and calculate the delay until next interval
    var now = new Date(),
        delay = interval - now % interval;

    function start() {
        // Execute function now...
        func();
        // ... and every interval
        setInterval(func, interval);
    }

    // Delay execution until it's an even interval
    setTimeout(start, delay);
}

repeatEvery(showTime, ONE_MINUTE); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T08:13:07.880

这可能是一个想法。最大偏差应为 1 秒。如果您希望它更精确，请降低`setTimeout`^(**1**)的毫秒数。

```
setTimeout(checkMinutes,1000);

function checkMinutes(){
  var now = new Date().getMinutes();
  if (now > checkMinutes.prevTime){
    // do something
    console.log('nextminute arrived');
  }
  checkMinutes.prevTime = now;
  setTimeout(checkChange,1000);
} 
```

^(**1**)但是，另请参阅[这个问题](https://stackoverflow.com/questions/6032429/chrome-timeouts-interval-suspended-in-background-tabs)，关于 javascript 中超时的准确性

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T08:38:14.290

我为您提出了一个可能的解决方案：

```
/* Usage:
 *
 * coolerInterval( func, interval, triggerOnceEvery);
 *
 *   - func : the function to trigger
 *   - interval : interval that will adjust itself overtime checking the clock time
 *   - triggerOnceEvery : trigger your function once after X adjustments (default to 1)
 */
var coolerInterval = function(func, interval, triggerOnceEvery) {

    var startTime = new Date().getTime(),
        nextTick = startTime,
        count = 0;

    triggerOnceEvery = triggerOnceEvery || 1;

    var internalInterval = function() {

        nextTick += interval;
        count++;

        if(count == triggerOnceEvery) {

            func();
            count = 0;
        }

        setTimeout(internalInterval, nextTick - new Date().getTime());
    };

    internalInterval();

}; 
```

以下是每分钟打印一次时间戳的示例用法，但时间漂移每秒钟调整一次

```
coolerInterval(function() {

    console.log( new Date().getTime() );

}, 1000, 60); 
```

它并不完美，但应该足够可靠。考虑到用户可以在浏览器上切换选项卡，或者您的代码可能在页面上运行一些其他阻塞任务，因此浏览器解决方案永远不会完美，由您（和您的要求）决定它是否足够可靠或不。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-29T08:13:24.230

您可以尝试尽可能准确，每 X 毫秒设置一次超时，并检查该分钟是否已经过去以及自上次调用该函数以来已经过去了多少时间，但仅此而已。

你不能 100% 确定你的函数会在 1 分钟后准确触发，因为那时可能有东西阻塞了事件循环。

如果它很重要，我建议为此使用 cronjob 或单独的 Node.js 进程（这样您就可以确保事件循环没有被阻塞）。

资源：

[http://www.sitepoint.com/creating-accurate-timers-in-javascript/](http://www.sitepoint.com/creating-accurate-timers-in-javascript/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-04-04T02:59:36.830

在浏览器和 node.js 中测试

*   休眠到分钟更改前 2 秒，然后等待更改
*   您可以删除日志记录，因为它会在日志中变得非常混乱，否则

```
 function onMinute(cb,init) {

            if (typeof cb === 'function') {

                var start_time=new Date(),timeslice = start_time.toString(),timeslices = timeslice.split(":"),start_minute=timeslices[1],last_minute=start_minute;
                var seconds = 60 - Number(timeslices[2].substr(0,2));
                var timer_id;
                var spin = function (){
                                    console.log("awake:ready..set..");
                                    var spin_id = setInterval (function () {

                                        var time=new Date(),timeslice = time.toString(),timeslices = timeslice.split(":"),minute=timeslices[1];
                                        if (last_minute!==minute) {
                                            console.log("go!");
                                            clearInterval(spin_id);
                                            last_minute=minute;
                                            cb(timeslice.split(" ")[4],Number(minute),time,timeslice);   
                                            console.log("snoozing..");
                                            setTimeout(spin,58000);
                                        }

                                    },100);

                                };

                setTimeout(spin,(seconds-2)*1000);

                if (init) {
                    cb(timeslice.split(" ")[4],Number(start_minute),start_time,timeslice,seconds);   
                }
            }

        }

        onMinute(function (timestr,minute,time,timetext,seconds) {
            if (seconds!==undefined) {
                console.log("started waiting for minute changes at",timestr,seconds,"seconds till first epoch");
            } else {
                console.log("it's",timestr,"and all is well");
            }
        },true);
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-29T08:07:38.350

我的第一个想法是使用[Date 对象](http://www.w3schools.com/jsref/jsref_obj_date.asp)来获取当前时间。这将允许您通过一些简单的数学来设置每分钟的设置间隔。然后，由于您担心它会每 5-10 分钟或您认为合适的任何时间，您可以使用新的日期对象重新检查时间并相应地重新调整设置的时间间隔。

这只是我的第一个想法，虽然早上我可以放一些代码（这里就像凌晨 2 点）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-02-23T19:25:27.740

@Linus 提出的解决方案`setInterval`通常是正确的，但只要两分钟之间正好有 60 秒，它就会起作用。这个看似明显的假设在存在[闰秒](https://en.wikipedia.org/wiki/Leap_second)的情况下会失效，或者可能更频繁地，如果代码在暂停数秒的笔记本电脑上运行。

如果您需要处理这种情况，最好`setTimeout`每次手动调用调整间隔。像下面这样的东西应该可以完成这项工作：

```
function repeatEvery( func, interval ) {
    function repeater() {
        repeatEvery( func, interval);
        func();
    }
    var now = new Date();
    var delay = interval - now % interval;

    setTimeout(repeater, delay);
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-12-17T12:21:09.137

这是一个相当简单的解决方案......每次调用超时的时间间隔都会调整，因此它不会漂移，如果它提前触发，有一点 50 毫秒的安全性。

```
function onTheMinute(callback) {
    const remaining = 60000 - (Date.now() % 60000);
    setTimeout(() => {
        callback.call(null);
        onTheMinute(callback);
    }, remaining + (remaining < 50 ? 60000 : 0));
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-02-08T20:05:24.977

这是基于@Linus 的帖子和@Brad 的评论的另一个解决方案。唯一的区别是它不能通过递归调用父函数来工作，而只是`setInterval()`和的组合`setTimeout()`：

```
function callEveryInterval(callback, callInterval){
    // Initiate the callback function to be called every
    // *callInterval* milliseconds.
    setInterval(interval => {
        // We don't know when exactly the program is going to starts 
        // running, initialize the setInterval() function and, from 
        // thereon, keep calling the callback function. So there's almost
        // surely going to be an offset between the host's system 
        // clock's minute change and the setInterval()'s ticks.
        // The *delay* variable defines the necessary delay for the
        // actual callback via setTimeout().
        let delay = interval - new Date()%interval
        setTimeout(() => callback(), delay)
    }, callInterval, callInterval)
} 
```

小而有趣的事实：回调函数仅在 next 之后的一分钟更改时开始执行。

# .net - 在应用程序 web.config 中设置时，IIS 7.5 不压缩 JSON

> ID：10795165
> 
> 赞同：5
> 
> 时间：2012-05-29T07:56:39.437
> 
> 标签：.net, asp.net-mvc-3, iis-7.5, windows-server-2008-r2

我一直致力于从我们的 MVC3 站点之一启用 JSON 压缩。从我读过的各种文章中，似乎我应该能够`application/json; charset=utf-8`在应用程序 web.config 文件中设置 MIME 类型。但这样做不会启用压缩。但是当添加到 applicationhost.config 文件时，它可以工作。我在这里错过了什么吗？

我的应用程序 web.config 添加了以下内容：

```
<httpCompression directory="%SystemDrive%\inetpub\temp\IIS Temporary Compressed Files">
    <scheme name="gzip" dll="%Windir%\system32\inetsrv\gzip.dll" />
    <dynamicTypes>
        <add mimeType="application/javascript; charset=utf-8" enabled="true" />
        <add mimeType="application/x-javascript" enabled="true" />
        <add mimeType="application/json" enabled="true" />
        <add mimeType="application/json; charset=utf-8" enabled="true" />
    </dynamicTypes>
    <staticTypes>
        <add mimeType="application/javascript; charset=utf-8" enabled="true" />
        <add mimeType="application/x-javascript" enabled="true" />
        <add mimeType="application/json" enabled="true" />
        <add mimeType="application/json; charset=utf-8" enabled="true" />
    </staticTypes>
</httpCompression>
<urlCompression doStaticCompression="true" doDynamicCompression="true" /> 
```

服务器正在运行带有 IIS7.5 的 Windows Server 2008 R2。我还为相关站点安装并启用了动态压缩。

任何帮助将不胜感激，因为我不希望为整个服务器启用 JSON 压缩。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-29T08:37:09.547

`HttpCompression`部分被定义`AppHostOnly`在`ApplicationHost.config`其中阻止您在 web.config 中设置其属性。

压缩模块仅从“ApplicationHost.config”读取服务器级别的属性，因此即使您解锁该部分（使用`appcmd`或`overrideModeDefault="Allow"`），较低级别的设置也将被忽略。

# java - Java游戏计时动作

> ID：10795166
> 
> 赞同：1
> 
> 时间：2012-05-29T07:56:42.017
> 
> 标签：java, timer, move

我试图让球从窗户顶部掉下来。我将球对象存储在 ArrayList 中，目前，我正在这样做。

```
for (int i = 0; i < balls.size(); i++) {
    Ball b = (Ball) balls.get(i);
    if (b.isVisible()) {
        b.move();
    } 
```

move 函数只是改变了球的 y 坐标，所以它会从屏幕上掉下来。

此刻，一切都在完全相同的时间被绘制，并在完全相同的时间落下。

例如[http://puu.sh/xsGF](http://puu.sh/xsGF)

我怎样才能让它以随机的间隔掉落？

我的 move() 函数如下。

```
 public void move() {

    if (y > 480) {
        this.setVisible(false);
        System.out.println("GONE");
    }
    y += 1;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T08:20:43.193

您可以在游戏循环期间随机添加球。

```
//add new balls randomly here:
if(<randomtest>) {
    balls.add(new Ball());
}
for (int i = 0; i < balls.size(); i++) { 
  Ball b = (Ball) balls.get(i); 
  if (b.isVisible()) { 
      b.move(); 
  }
  else {
    //also might be good idea to tidy any invisible balls here
    //if you do this make sure you reverse the for loop
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T08:18:49.527

你可以做两件事：

1.  添加计时器。当计时器响起时（例如每 10 毫秒），选择一个随机球，然后让那个球下降 1 像素。（*请注意，由于随机因素，您会得到在不同时间以不同速度下落的球*）

2.  初始化球时使用随机速度值。将 y 坐标增加该速度值，因此球将以不同的速度从屏幕上落下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T08:22:48.377

如果您想要恒定速度，最简单的方法是将它们放置在视口顶部的随机位置。

因为我猜你已经在屏幕外画了它们，所以只需在那里添加一个随机位移就可以了。例如：

```
ball.y = -radius + random.nextInt(100); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T08:23:38.230

好的，看到你的移动功能，这在物理上并不正确。你应该有一个加速度。这使球更真实地落下（当然有空气阻力等，但我认为现在这已经足够了）。为了让它们随机掉落，您可以随机添加它们（使它们在随机时间实例中存在/可见）等等。

```
class Ball {
  private double acc = 9.81; // or some other constant, depending on the framerate
  private double velocity = 0;
  private double startFallTime = Math.random()*100; // set from outside, not here!

  public void move() {
    // check if ball is already here
    if (startFallTime-- > 0) return;
    if (y > 480) {
      this.setVisible(false);
      System.out.println("GONE");
    }
    velocity += acc; 
    y += velocity;
  }
} 
```

编辑：当然加速的东西是可选的，这取决于你想要什么。如果你想要线性运动，那么你的方法很好，如果球有加速度，它看起来会更好。;) 另外，我建议在随机实例中添加球，而不是使用我使用的这个 startFallTime，因为这在物理上并不正确。不过要看你的需求，所以你必须自己找出正确的方法。

# entity-framework - 有没有办法避免同一个数据库表的 2 个存储库对象？

> ID：10795168
> 
> 赞同：0
> 
> 时间：2012-05-29T07:56:47.197
> 
> 标签：entity-framework, entity-framework-4, repository

我目前在一个使用 EF 作为 ORM 的团队工作。

我们有一个包含许多 EDMX 文件的通用项目。这样做的原因是保持 EDMX 文件小且易于管理，同时还允许它们专注于数据库上的一组概念表。

例如

*   订单.edmx
*   用户.edmx
*   交易.edmx

这些都指向**同一个数据库上的一组不同的表。**

我现在需要**将用户表添加到 Trade.edmx**文件中。由于**user 表已经在 user.edmx**文件中，这会在不同的命名空间下创建两次相同的 User 类型，这意味着我需要 2 个 UserRepository 对象。

*   Common.data.trade.User
*   Common.data.users.User

有没有办法避免同一个表有 2 个存储库对象？

任何建议将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T08:18:33.317

如果您使用 POCO 生成器，您可以更新 Trades.edmx 的模板以不生成新`User`类及其上下文模板以使用`Users`命名空间中的 User 类。EF 仅通过类名（省略命名空间）将 POCO 类与设计器中的实体匹配，因此它可以工作。

缺点是您在两个映射文件中有用户实体，您必须在两个文件中更新它，否则您的应用程序会在运行时抛出异常。

这个问题的原因是你的架构——一开始你想要分离的模型，但知道你想要组合来自不同模型的实体。这些是相互矛盾的要求。要么使用单独的模型，其中 Trade 只知道用户 ID 而没有任何导航属性（例如，如果它是在另一个数据库中定义的），或者将所有实体移动到单个 EDMX 以支持您的新要求。

# java - 为了安全起见，在 java 中对密码进行哈希处理有多少价值？

> ID：10795170
> 
> 赞同：6
> 
> 时间：2012-05-29T07:56:52.470
> 
> 标签：java, passwords, hash

我正在用**Java**
开发一个 Web 应用程序，我想 通过使用**散列**密码 来确保身份验证过程的安全。

*在散列*
**步骤 1 中：**我们获取用户提供的密码并为其添加**盐**。
**第2步：**使用`MessageDigest`哈希值并将哈希值存储在数据库中

在登录过程中对用户进行身份验证时，我们重复上述两个**相同**的步骤，但我们不
存储散列值，而是将其与数据库中存在的值进行比较。

现在*原谅我的无知*，但我想说的是，如果黑客通过任何其他
方式访问数据库，那么它可以提供安全性，因为黑客无法从哈希
值中轻松获取密码的真实文本。

**但是**`Bruteforce attack, Rainbow attack, dictionary attack`，当我们使用**相同**的步骤对用户进行登录身份验证 时，它如何提供针对其他形式的攻击的安全性？

我不认为现在密码的散列值那么多。
**给我一些建议......**如果我错了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T08:04:00.193

蛮力就是蛮力。除了在 N 次连续失败的试验后拒绝尝试身份验证（或施加延迟）之外，您无能为力。当然，如果黑客拥有散列密码，他将能够暴力破解密码，但安全散列函数的重点是让它变得非常长。

彩虹/字典攻击通过盐渍解决。如果用户选择“密码”作为他的密码，彩虹/字典攻击将立即找到密码。但是由于您使用随机值对密码进行加盐，因此散列值将类似于`d7("58gd0}78sq5sQIazuAKpassword`，它不会出现在彩虹表/字典中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T08:04:54.227

你的担心是对的。散列密码*不*提供任何安全层，因为现在有许多可用的工具（例如[这里](http://www.md5decrypt.org/)、[这里](http://www.md5decrypter.com/)和[这里](http://www.hash-cracker.com/)）来获取基于反向散列和散列目录的纯文本。我建议使用具有盐属性的[JBcrypt](http://www.mindrot.org/projects/jBCrypt/)，您不必将其存储在数据库中，并且由于任何人都不知道您的盐，即使您也不知道，那么取消散列并获取纯文本非常困难。

有关 BCrypt 的更多信息，请参见[Wikipedia](http://en.wikipedia.org/wiki/Bcrypt)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T08:08:45.043

**盐渍和散列**

这是使密码无法被人类读取并且难以取回用户可能在其他网站（例如信用卡网站）使用的原始密码的过程。

**通过登录进行身份验证**

现在您的用例是黑客使用普通登录表单通过蛮力登录，这不是**应该做**的加盐和散列密码，因为这是您的应用程序逻辑来防止使用错误的凭据进行多次登录。

**结论**

它是您的应用程序负责防止暴力登录，但不是通过**加盐和散列**密码。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-29T08:04:14.390

您可以通过强制执行强密码规则来保存应用程序免受蛮力攻击、彩虹攻击、字典攻击，例如密码应包含字母数字和特殊字符的组合，例如 myPassWord$10

# c# - 使用 SuppressKeyPress 事件阻止 KeyUp 事件

> ID：10795174
> 
> 赞同：0
> 
> 时间：2012-05-29T07:57:20.310
> 
> 标签：c#

在 KeyDown 事件中，我曾经`SuppressKeyPress`避免调用`KeyPress`和`KeyUp`事件。但是，尽管`KeyPress`事件已停止，但`KeyUp`事件仍会触发。为什么是这样？

```
private void textBox1_KeyDown(object sender, KeyEventArgs e)
{
    if (e.KeyCode == Keys.H)
    {
        listBox1.Items.Add("key down" + e.KeyCode);
        // e.SuppressKeyPress = true;
    }
}

private void textBox1_KeyPress(object sender, KeyPressEventArgs e)
{
    if (e.KeyChar == 'h')
    {
        listBox1.Items.Add("key press" + e.KeyChar);
    }
}

private void textBox1_KeyUp(object sender, KeyEventArgs e)
{
    if(e.KeyCode==Keys.H)
    {
        listBox1.Items.Add("key up" + e.KeyCode);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T11:20:58.820

看看 SuppressHeyPress 在 Control 类中是如何处理的：

```
protected virtual bool ProcessKeyEventArgs(ref Message m)
{
    // ...
    if (e.SuppressKeyPress)
    {
        this.RemovePendingMessages(0x102, 0x102);
        this.RemovePendingMessages(0x106, 0x106);
        this.RemovePendingMessages(0x286, 0x286);
    }
    return e.Handled;
} 
```

很明显，您不能做这样的事情来抑制 WM_KEYUP 消息（当您处理 KeyDown 事件时，KeyPress 消息已经发送到您的控件，但 KeyUp 消息在用户释放键之前不会触发）。

您可以使用以下代码对此进行测试：

```
[DllImport("user32.dll", CharSet = CharSet.Auto)]
public static extern bool PeekMessage([In, Out] ref MSG msg, HandleRef hwnd, int msgMin, int msgMax, int remove);

[Serializable, StructLayout(LayoutKind.Sequential)]
public struct MSG
{
    public IntPtr hwnd;
    public int message;
    public IntPtr wParam;
    public IntPtr lParam;
    public int time;
    public int pt_x;
    public int pt_y;
}

private void RemovePendingMessages(Control c, int msgMin, int msgMax)
{
    if (!this.IsDisposed)
    {
        MSG msg = new MSG();
        IntPtr handle = c.Handle;
        while (PeekMessage(ref msg, new HandleRef(c, handle), msgMin, msgMax, 1))
        {
        }
    }
}

private void SuppressKeyPress(Control c)
{
    this.RemovePendingMessages(c, 0x102, 0x102);
    this.RemovePendingMessages(c, 0x106, 0x106);
    this.RemovePendingMessages(c, 0x286, 0x286);
}

private void SuppressKeyUp(Control c)
{
    this.RemovePendingMessages(c, 0x101, 0x101);
    this.RemovePendingMessages(c, 0x105, 0x105);
}

private void textBox2_KeyDown(object sender, KeyEventArgs e)
{
    if (e.KeyCode == Keys.H)
    {
        SuppressKeyPress(sender);       // will work
        SuppressKeyUp(sender);          // won't work
    }
} 
```

一个解决方案是使用布尔标志 suppressKeyUp，在 KeyDown 将其设置为 true 并检查它并在 KeyUp 中将其重置，但您必须彻底检查它并查看当用户行为不端时会发生什么（例如按下两个键）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T08:59:21.023

是的，试着放

```
e.Handled = true; 
```

之后`e.Suppress... = true;`。

# azure - 如何从客户端访问 Azure blob 服务？

> ID：10795177
> 
> 赞同：2
> 
> 时间：2012-05-29T07:57:25.573
> 
> 标签：azure, azure-storage, azure-blob-storage

阅读文档，我得到的印象是 blob 服务就像任何其他 Web 服务一样。如何使用任何客户端语言（例如 javascript、python 或 Actionscript）访问 Azure 中 blob 数据的块或页面上传服务？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T08:48:19.283

它只是一个 REST API。阅读文档并实现一个客户端（或获取一个已经存在的客户端）。我写了一篇关于它们的博客文章：http: [//blog.smarx.com/posts/windows-azure-storage-libraries-in-many-languages](http://blog.smarx.com/posts/windows-azure-storage-libraries-in-many-languages)。它当时不在列表中，但现在 Windows Azure Node.js SDK ( `npm install azure`) 中涵盖了 JavaScript。

# jdo - Datanucleus，PMF线程是否保存？Tomcat中的问题

> ID：10795179
> 
> 赞同：0
> 
> 时间：2012-05-29T07:57:36.940
> 
> 标签：jdo, datanucleus

你知道datanucleus中的PMF是否是线程安全的吗？我有以下问题：

我有一个 PMF，它创建了几个 PersistenceManager，一个用于方法调用。PMF 在线程和方法之间共享。
在单线程中运行应用程序时一切正常，但是当应用程序部署在 Tomcat 上时，压力测试表明，在某些情况下，持久性管理器会同时调用 getObjectById。
这不是锁定问题，因为非事务性读取已打开。多线程标志也设置为真。
当我每次创建新的 PMF 时，问题就消失了。但是这种解决方案很昂贵。关于更好的解决方案的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T18:33:54.983

正如 JDO 规范所说的那样，PMF 是线程安全的。PM 不是线程安全的，所有 DataNucleus 文档都建议每个请求使用一个 PM。由于您（假设您）每个请求有 1 个 PM，因此没有锁定的前景，因为 PM 与另一个 PM 不共享任何内容。

如果你说你有阻塞，你可以很容易地提供一个线程转储，显示两个 PM 如何相互锁定，然后演示什么阻塞了什么以及为什么阻塞。可能性... L2 缓存、存储管理器（数据存储）。显然，使用最新版本对所有这些都是有意义的

# rest - 使用原生 C++ 生成 OCX / DLL 文件以调用 REST API

> ID：10795182
> 
> 赞同：0
> 
> 时间：2012-05-29T07:57:53.363
> 
> 标签：rest, visual-c++, navision

我有一个原始版本的 Microsoft Navision，我需要从中调用第 3 方 REST API 来获取/放置/发布请求。有没有办法使用本机 C++ 代码来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T08:09:30.023

您可以编写一个 IP 帧并通过 TCP 套接字将其发送到端口 80。当然，可能有一些库可以为您做到这一点。

[查看以前的 StackOverflow 问题](https://stackoverflow.com/questions/8069741/c-xml-tcp-ip-libraries-for-windows-and-linux)

[示例库](http://www.komodia.com/tcpip-library-v5-1/)

# entity-framework - TPC mappint 生成基类表

> ID：10795183
> 
> 赞同：1
> 
> 时间：2012-05-29T07:57:56.867
> 
> 标签：entity-framework, ef-code-first

我想通过code-first实现TPC映射，看了这篇文章： [Inheritance with EF Code First: Part 3 – Table per Concrete Type (TPC)](http://weblogs.asp.net/manavi/archive/2011/01/03/inheritance-mapping-strategies-with-entity-framework-code-first-ctp5-part-3-table-per-concrete-type-tpc-and-choosing-strategy-guidelines.aspx)

我已经编写了如下代码。

```
namespace TPCTest
{
    class Program
    {
        static void Main(string[] args)
        {
            using (TestContext context = new TestContext())
            {
                Manager m = new Manager();
                m.AnnualSalary = 100000;
                m.Name = "Allen";
                m.Sex = true;
                m.Id = 1;

                Worker w = new Worker();
                w.Id = 2;
                w.Name = "John";
                w.Sex = true;
                w.MonthlyPay = 5000;

                context.empSet.Add(m);
                context.empSet.Add(w);
                context.SaveChanges();
            }
        }
    }

    abstract class Employee
    {
        public int Id { get; set; }
        public string Name { get; set; }
        public bool Sex { get; set; }
    }

    class Manager : Employee
    {
        public decimal AnnualSalary { get; set; }
        public string Department { get; set; }
    }

    class Worker : Employee
    {
        public decimal MonthlyPay { get; set; }
    }

    class TestContext : DbContext
    {
        public DbSet<Employee> empSet { get; set; }

        protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {
            modelBuilder.Entity<Manager>().Map(m =>
                {
                    m.MapInheritedProperties();
                    m.ToTable("Manager");
                });

            modelBuilder.Entity<Worker>().Map(m =>
                {
                    m.MapInheritedProperties();
                    m.ToTable("Worker");
                });

            modelBuilder.Entity<Employee>().Property(e => e.Id).HasDatabaseGeneratedOption(System.ComponentModel.DataAnnotations.DatabaseGeneratedOption.None);
        }
    }
} 
```

但是运行代码后，我发现数据库中也存在Employee表，任何人都可以帮忙吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-04T16:24:09.277

**使用 EF 5.0 或更高版本！**

自该版本以来，该问题似乎已得到解决。使用 EF 4.3.1，我可以重现该行为。所以只是更新。

# compact-framework - .NET CF WebService ObjectDisposedException

> ID：10795185
> 
> 赞同：2
> 
> 时间：2012-05-29T07:58:02.687
> 
> 标签：compact-framework, windows-mobile-6, windows-mobile-6.5, .net-cf-3.5, smart-device

我正在尝试解决我的一个智能设备项目（Windows Mobile 6.5 设备上的 .NET CF 3.5）的问题。

该代码尝试不断地进行 web 服务调用以获取一些数据并在表单中使用它。在使用过程中，对于特定情况是抛出 ObjectDisposedException 并且应用程序崩溃。堆栈跟踪是

```
System.ObjectDisposedException was unhandled
 Message="ObjectDisposedException"
 ObjectName=""
 StackTrace:
      at System.Threading.Timer.throwIfDisposed()
      at System.Threading.Timer.Change(UInt32 dueTime, UInt32 period)
      at System.Threading.Timer.Change(Int32 dueTime, Int32 period)
      at System.Net.HttpWebRequest.startReadWriteTimer()
      at System.Net.HttpWebRequest.ConnectionClient.Read(Byte[] data, Int32 offset, Int32 length)
      at System.Net.HttpReadStream.NetworkRead(Byte[] data, Int32 offset, Int32 length)
      at System.Net.ChunkedReadStream.fillBuffer()
      at System.Net.ChunkedReadStream.getLine()
      at System.Net.ChunkedReadStream.doRead(Byte[] data, Int32 offset, Int32 length)
      at System.Net.HttpReadStream.ReadToDrain(Byte[] buffer, Int32 offset, Int32 length)
      at System.Net.HttpReadStream.doClose()
      at System.Net.HttpReadStream.Finalize() 
```

我已经阅读了很多博客和论坛，包括这个，建议的解决方案似乎是在得到响应之前关闭请求流和请求。

```
requestStream = webRequest.GetRequestStream();
requestStream.Close(); // WE NEED THIS LINE in order to avoid the ObjectDisposedException. 
```

但这对我的情况没有帮助。如果 requestStream 在将数据写入流之前关闭，则它不会做任何事情。如果我在收到响应后关闭，则会抛出 InvalidOperationException。

以下是我的代码：

参考.cs

```
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Web.Services.WebServiceBindingAttribute(Name="ProductResolveServiceSOAP11Binding", Namespace="urn:ProductResolveService")]
[System.Xml.Serialization.XmlIncludeAttribute(typeof(Exception))]
public partial class ProductResolveService : System.Web.Services.Protocols.SoapHttpClientProtocol {

    /// <remarks/>
    public ProductResolveService() {
        this.Url = "http://172.26.37.115:8080/axis/services/ProductResolveService";
    }

    /// <remarks/>
    [System.Web.Services.Protocols.SoapDocumentMethodAttribute("urn:getResolvedEpcs", RequestNamespace="http://services.axis.oatsystems.com", ResponseNamespace="http://services.axis.oatsystems.com", Use=System.Web.Services.Description.SoapBindingUse.Literal, ParameterStyle=System.Web.Services.Protocols.SoapParameterStyle.Wrapped)]
    [return: System.Xml.Serialization.XmlElementAttribute("return", IsNullable=true)]
    public ResolvedProductList getResolvedEpcs([System.Xml.Serialization.XmlElementAttribute(IsNullable=true)] EpcToResolve message) {
        object[] results = this.Invoke("getResolvedEpcs", new object[] {
                    message});
        return ((ResolvedProductList)(results[0]));
    }

    /// <remarks/>
    public System.IAsyncResult BegingetResolvedEpcs(EpcToResolve message, System.AsyncCallback callback, object asyncState) {
        return this.BeginInvoke("getResolvedEpcs", new object[] {
                    message}, callback, asyncState);
    }

    /// <remarks/>
    public ResolvedProductList EndgetResolvedEpcs(System.IAsyncResult asyncResult) {
        object[] results = this.EndInvoke(asyncResult);
        return ((ResolvedProductList)(results[0]));
    }
} 
```

Form1.cs

```
using System;
using System.Collections.Generic;
using System.Net;
using System.Threading;
using System.Web.Services.Protocols;
using System.Windows.Forms;
using NFEHandlingProject.StatusService;
using System.IO;
using MVProductResolveService;

namespace NFEHandlingProject
{
    public partial class Form1 : Form
    {
        private Thread resolveThread;
        int counter = 0;

        public Form1()
        {
            InitializeComponent();
        }

        private void btnStart_Click(object sender, EventArgs e)
        {
            if (resolveThread == null)
            {
                this.BeginInvoke((Action)delegate { lstbxStatusMsgs.Items.Add("Resolve Product: Creating Thread"); lstbxStatusMsgs.SelectedIndex = lstbxStatusMsgs.Items.Count - 1; });

                resolveThread = new Thread(new ThreadStart(GetEpcProductMapping));
                resolveThread.IsBackground = true;
                resolveThread.Priority = ThreadPriority.BelowNormal;

                resolveThread.Start();
            }
        }

        object syncRoot2 = new object();
        bool resolving = false;

        private void GetEpcProductMapping()
        {
            lock (syncRoot2)
            {
                if (resolving)
                {
                    return;
                }

                resolving = true;
            }

            while (resolving)
            {
                using (ProductResolveService2 productResolveService = new ProductResolveService2())
                {
                    EpcToResolve epcToResolve = null;

                    try
                    {
                        this.BeginInvoke((Action)delegate { lstbxStatusMsgs.Items.Add("Resolve Product: Resolving..."); lstbxStatusMsgs.SelectedIndex = lstbxStatusMsgs.Items.Count - 1; });

                        productResolveService.Url = "http://172.26.37.115:8080/axis/services/ProductResolveService?wsdl";

                        productResolveService.Timeout = 60000;

                        // The input object that is sent to xpress
                        epcToResolve = new EpcToResolve();

                        string epcBase = "3410402AEA0000000000";
                        int baseDec = Convert.ToInt32("1000", 16);

                        // Creating the input of epc's baed on the ResolveBatchSize and number epcs's that needs to be resolved at xpress
                        string[] epcs = new string[1];
                        for (int i = 0; i < 1; i++)
                        {
                            int epcDec = baseDec + i;
                            epcs[i] = epcBase + epcDec.ToString("X");
                        }

                        // setting the epc list which is the input that is sent to xpress
                        epcToResolve.epcList = epcs;

                        //pass the flag to check if say whether the productInformation or just the product_id is resolved
                        epcToResolve.returnOnlyProductId = false;

                        //return productResolveService.getResolvedEpcs(epcToResolve);
                        productResolveService.getResolvedEpcs(epcToResolve);
                        this.BeginInvoke((Action)delegate { lstbxStatusMsgs.Items.Add("Resolved"); lstbxStatusMsgs.SelectedIndex = lstbxStatusMsgs.Items.Count - 1; });
                    }
                    catch (SoapHeaderException)
                    {
                        // do nothing
                    }
                    catch (SoapException se)
                    {
                        this.BeginInvoke((Action)delegate { lstbxStatusMsgs.Items.Add("Problem resolving products at xpress"); lstbxStatusMsgs.SelectedIndex = lstbxStatusMsgs.Items.Count - 1; });
                    }
                    catch (WebException we)
                    {
                        // get the reason for the exception
                        WebExceptionStatus status = we.Status;
                        String description = we.Message;

                        WebResponse response = we.Response;
                        if (response != null)
                        {
                            Stream respStream = response.GetResponseStream();

                            if (respStream != null)
                            {
                                respStream.Close();
                                respStream.Dispose();
                                respStream = null;
                            }
                            // close the response
                            response.Close();
                            response = null;
                        }
                        // Case when there is no connectivity. Just display an error message to the user to indicate that there is no connectivity.
                        this.BeginInvoke((Action)delegate { lstbxStatusMsgs.Items.Add("Resolve Product: There is no connectivity to xpress"); lstbxStatusMsgs.SelectedIndex = lstbxStatusMsgs.Items.Count - 1; });
                    }
                    catch (ThreadAbortException)
                    {
                        // Do nothing. Do not log
                    }
                    catch (System.Exception e)
                    {
                        this.BeginInvoke((Action)delegate { lstbxStatusMsgs.Items.Add("An exception occured when fetching data from xpress"); lstbxStatusMsgs.SelectedIndex = lstbxStatusMsgs.Items.Count - 1; });
                    }

                    try
                    {
                        Thread.Sleep(200);
                    }
                    catch
                    {
                    }
                }
            }

            resolving = false;
        }

        private void btnStop_Click(object sender, EventArgs e)
        {
            if (resolveThread != null && resolving)
            {
                resolveThread.Abort();
                resolveThread.Join();
                resolveThread = null;
                resolving = false;

                this.BeginInvoke((Action)delegate { lstbxStatusMsgs.Items.Add("Resolve Product: Stopped Thread"); lstbxStatusMsgs.SelectedIndex = lstbxStatusMsgs.Items.Count - 1; });
            }
        }
    }
} 
```

单击表单中的“开始”按钮时，会创建线程并继续调用 Web 服务，当调用停止时，线程会停止。重复启动和停止会导致 ObjectDisposedException （这就是我重现此异常的方式）。

任何有关这方面的帮助将不胜感激，因为我这几天一直在尝试解决这个问题。

谢谢森希尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-01-25T07:10:35.573

这是一个相当古老的帖子。但是，我想在这里为任何仍在寻找答案的机构记录我的答案。

两种选择：

1.  转移到更容易和更清洁的 WCF 客户端。
2.  使用以下解决方案。

    ```
    public class ExtendedDataImport : DataImport.DataImport
    {
        private WebRequest webRequest;
        private WebResponse webResponse;

        /// <summary>
        /// This method overrides the generated method and sets parameters so that HTTP 1.0
        /// is used (without chunking). If left with default parameters it
        /// sometimes fails.
        /// </summary>
        protected override WebRequest GetWebRequest(Uri uri)
        {
            webRequest = base.GetWebRequest(uri);
            ((HttpWebRequest)webRequest).KeepAlive = false;
            ((HttpWebRequest)webRequest).ProtocolVersion = HttpVersion.Version10;
            return webRequest;
        }

        protected override WebResponse GetWebResponse(WebRequest request)
        {
            webResponse = base.GetWebResponse(request);
            return webResponse;
        }

        public void Close()
        {
            if (webResponse != null)
            {
                Stream responseStream = webResponse.GetResponseStream();
                responseStream.Close();
                responseStream.Dispose();
                responseStream = null;
                webResponse.Close();
                webResponse = null;
            }

            if (webRequest != null)
            {
                // Aborting the WebRequest, cleans up the webrequest and
                // stops the timer which causes the ObjectDisposedException
                try
                {
                    webRequest.Abort();
                    webRequest = null;
                }
                catch (ObjectDisposedException ex)
                {
                    // Ignoring the object disposed exception as mentioned in the follwoing link
                    //http://social.msdn.microsoft.com/Forums/en/netfxcompact/thread/8f21514c-9b7c-40d3-96c9-794c0dc167fe
                }
            }
        }

        protected override void Dispose(bool disposing)
        {
            Close();
            base.Dispose(disposing);
        }
    } 
    ```

# c++ - 具有 ptr-ref 类型的模板特化和特化规则

> ID：10795187
> 
> 赞同：2
> 
> 时间：2012-05-29T07:58:13.327
> 
> 标签：c++, templates, template-specialization

使用 MSVC 2010，我得到以下行为：

```
template <class T> class Boogy
{
public:
    void Fn( T in )
    {
    }

    void Fn2( const T& in)
    {
    }
};

template <> void Boogy<int>::Fn( int in ) //builds ok
{
}

template <> void Boogy<int*>::Fn( int* in ) //builds ok
{
}

template <> void Boogy<int>::Fn2( const int& in ) //builds ok
{
}

template <> void Boogy<int*>::Fn2( const int*& in ) //DOES NOT BUILD
{
}

typedef int* intStar;
template <> void Boogy<intStar>::Fn2( const intStar& in ) //builds ok
{
} 
```

显然，我想出了一个“黑客”来解决我的问题，但为什么黑客是必要的？我们应该这样做吗？我所在的代码库有几十个实例，其中模板类有一些成员函数的一些特化——而不是整个类。一位同事坚持认为这是不允许的。

TIA。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T08:03:34.887

应该是`int * const &`。你有`T = int *`，所以`const T = T const = int * const`。

请记住，这`U const &`意味着“对常量的引用`U`”，而不是“~~对常量的引用`U`~~”——后者没有意义，因为 C++ 中的引用变量*始终*是常量，即不能重新定位。在您的情况下，`U`它是指向 int 的指针，而不是指向 const-int 的指针，它们是两种不同的类型。

当然，您也可以为 : 添加单独的专业化`int const *`：

```
template <> void Boogy<int const *>::Fn2(int const * const & in) { /* ... */ } 
```

# silverlight - 我可以创建 silverlight 页面并使用 sharepoint 数据并在 sharepoint 之外运行 silverlight 应用程序吗？

> ID：10795189
> 
> 赞同：0
> 
> 时间：2012-05-29T07:58:20.210
> 
> 标签：silverlight, sharepoint

我需要创建 silverlight 应用程序并连接到 sharepoint 数据以在 silverlight 页面中使用并用完 sharepoint。为此，请给我如何连接连接和示例代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T10:11:53.220

尝试搜索[“在 SharePoint 中创建 Silverlight Web 部件”](http://bit.ly/KohOhG) - 第一页充满了示例和演练。

# c# - 以图像为属性的自定义控件

> ID：10795191
> 
> 赞同：2
> 
> 时间：2012-05-29T07:58:30.120
> 
> 标签：c#, image, properties, custom-controls

我正在研究`CustomControl`应该有一个`Property`which 是一个`Image`.

```
public Image BackgroundPicture{ set; get }; 
```

但是，当`Image`设置`(none)`为时，Visual Studio 设计器会抛出错误：

> “System.String”类型的对象无法转换为“System.Drawing.Image”类型。

有没有什么有效的方法来防止这个问题？

# php - 使用 PHP 查询从网站源解析表数据。函数出错

> ID：10795192
> 
> 赞同：0
> 
> 时间：2012-05-29T07:58:30.460
> 
> 标签：php, dom, html-table

**将帖子更改为来自 DOM 的 PHP 查询！**

我正在尝试从网站中提取一些信息以将其放入表格中，然后用 PHP 打印出来。

我正在使用 DOM 解析器，因为它看起来正是我所需要的。

```
<?php

 include 'phpQuery.php';

 $file = "http://evolve.sg-community.de/index.php?page=plugins";
 phpQuery::newDocumentFileHTML($file);

 $rowData = array();  

 pq("table tr td")->each(function($i) { 
 $rowData[] = pq($i)->html();
 });
 echo "<pre>";
 print_r($rowData);
 echo "</pre>";

 ?> 
```

我不断得到：

> 解析错误：语法错误，意外的 T_FUNCTION，在第 12 行的内容中需要 ')'

```
 pq("table tr td")->each(function($i) { 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T08:48:55.200

是的，phpQuery 确实是一个更好的网络抓取工具。DOMDocument-parser 不适用于无效的 HTML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T08:37:41.467

[使用phpQuery](http://code.google.com/p/phpquery/)以更好的方式做到这一点：

```
$file = "http://evolve.sg-community.de/index.php?page=plugins";
phpQuery::newDocumentFileHTML($file);

$rowData = array();  
pq("#theTable tr td")->each(function($node) {
   $rowData[] = $node->nodeValue;
});
echo "<pre>";
print_r($rowData);
echo "</pre>"; 
```

另一种方法是：

```
foreach(pq("table:first-child tr td") as $td) {
   echo "<br>".$td->nodeValue;
   // examples
   // $td->tagName;  
   // $td->childNodes; 
} 
```

似乎 phpquery 返回 DOM 元素。

# javascript - 如何在jsp中创建优化gridview

> ID：10795193
> 
> 赞同：1
> 
> 时间：2012-05-29T07:58:32.173
> 
> 标签：javascript, html, jsp, jsp-tags

我正在创建一个网格。

这个网格的问题是计数逻辑。行逻辑很好，但我得到了额外的列。

我的网格`n*3`所在的行取决于列表大小。如果总计数不是 3 的倍数，则会创建空白列。

我正在使用的循环是：

```
<c:forEach var="showExistingProjectMap" items="${showExistingProjectList}" begin="0" end="${shareSpaseListSize}" step="3"> 
```

请提出解决方案。

# c# - C# 和 DataGridView：过滤不起作用

> ID：10795199
> 
> 赞同：1
> 
> 时间：2012-05-29T07:58:56.050
> 
> 标签：c#, datagridview, filter, .net

我的`DataGridView`过滤和过滤存在严重问题。我知道有很多关于这个的话题，我阅读了其中的大部分，但没有找到任何解决我问题的方法

我有一个带有对象 DataSource (BindingSource) 的 DataGridView。我有一个文本框来输入要过滤的搜索表达式。问题是：什么都没有发生。

*   BindingSource 已设置（currentSignals 作为 DataGridView 的 DataSource 属性）
*   列名称/属性名称是“名称”，所以这就是我想用作过滤源

来自目标源文件：

```
public string Name
{
    get { return _name; }
    set { _name = value; }
} 
```

搜索表达式是这样的

```
var searchString = (sender as TextBox).Text;
var filterExpression = "Name LIKE '%" + searchString + "%'";
_currentSignals.Filter = filterExpression; 
```

所以这无一例外，但实际上我的 DGV 没有任何反应。什么都没有。我究竟做错了什么？我错过了一个道具（允许过滤吗？）或类似的东西？这可能与 BindingSource 元素（用户定义的类）缺少接口有关吗？

# maven - Sonar 和 Jacoco：如何？（与 Cobertura 的兼容性）

> ID：10795204
> 
> 赞同：0
> 
> 时间：2012-05-29T07:59:22.943
> 
> 标签：maven, selenium, jenkins, sonarqube, jacoco

我知道有很多关于 Sonar 和 Jacoco 没有正确生成报告的问题，但没有一个能帮助我解决我的问题：

**这是交易：**

我有一个项目使用 Cobertura 来计算代码覆盖率，但我无法更改。Sonar 必须将 Cobertura 用于服务器端。但另一方面，我有这个客户端（我们正在谈论在 java 中使用 smartGWT 的 web 应用程序），它使用 Selenium RC 进行了测试（因为这是测试 smartGWT 的唯一方法）。

Cobertura 无法计算 Selenium 测试的覆盖率，因为这些测试是在已部署的应用程序上完成的。Jacoco 可以计算出来，因为它是作为 java 代理启动的。所以在我的电脑上一切正常。jacoco.exec 生成成功。但似乎 Sonar 无法找到如何读取该文件，或者可能只是 cobertura 和 jacoco 有冲突......

这是 Jenkins 生成的错误：

```
[INFO] Surefire report directory: D:\JENKINS-SONAR\jobs\agepro PROTO\workspace\target\surefire-reports
java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at sun.instrument.InstrumentationImpl.loadClassAndStartAgent(InstrumentationImpl.java:323)
    at sun.instrument.InstrumentationImpl.loadClassAndCallPremain(InstrumentationImpl.java:338)
Caused by: java.io.FileNotFoundException: D:\JENKINS-SONAR\jobs\agepro (Accès refusé)
    at java.io.FileOutputStream.openAppend(Native Method)
    at java.io.FileOutputStream.<init>(FileOutputStream.java:177)
    at org.jacoco.agent.rt_9w37ty.controller.LocalController.startup(LocalController.java:46)
    at org.jacoco.agent.rt_9w37ty.JacocoAgent.init(JacocoAgent.java:83)
    at org.jacoco.agent.rt_9w37ty.JacocoAgent.premain(JacocoAgent.java:165)
    ... 6 more
FATAL ERROR in native method: processing of -javaagent failed
Exception in thread "main" 
```

这是我对surefire插件的配置：

```
<plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-surefire-plugin</artifactId>
                <configuration>
                    <argLine>-javaagent:${sonar.jacoco.jar}=destfile=${sonar.jacoco.reportPath}</argLine>
                    <excludes>
                        <exclude>**/Selenium*.java</exclude>
                    </excludes>
                </configuration>
                <executions>
                    <execution>
                        <id>surefire-integration-test</id>
                        <phase>integration-test</phase>
                        <goals>
                            <goal>test</goal>
                        </goals>
                        <configuration>
                            <!-- <argLine>-javaagent:${sonar.jacoco.jar}=destfile=${sonar.jacoco.reportPath}</argLine> -->
                            <excludes>
                                <exclude>none</exclude>
                            </excludes>
                            <includes>
                                <include>**/Selenium*.java</include>
                            </includes>
                            <goal>selenium-test</goal>
                        </configuration>
                    </execution>
                </executions>
            </plugin> 
```

你看到我可能犯的任何错误吗？或者也许我必须为 jacoco jar 或其他东西设置另一条路径？还是要谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T08:06:03.323

这个名字`reportPath`有点误导。

该设置`sonar.jacoco.reportPath`需要指向文件而不是目录。

您似乎已将其设置为`D:\JENKINS-SONAR\jobs\agepro`：：但我认为您的意思是`D:\JENKINS-SONAR\jobs\agepro\jacoco.exec`

经过进一步检查，我注意到问题可能是您的工作目录“agepro PROTO”中有一个空格。

这破坏了 java 代理配置的语法。你能摆脱空间吗（我不知道是否`destfile='${sonar.jacoco.reportPath}'`可行）

# python - 一个可以找到所有评论的正则表达式，python

> ID：10795212
> 
> 赞同：0
> 
> 时间：2012-05-29T07:59:47.357
> 
> 标签：python, regex, comments

我正在用 python 编写一个编译器（用于练习语言），我想通过空格或注释将我的文本拆分为标记。我试过`/\*.*?\*/|/{2}.*?\n|\s`：fisr 正则表达式模式应该以`/** text */`or的形式进行精细注释`/* text */`，可能是多行。第二个正则表达式应该以`// text`换行符结尾的形式对注释进行细化。最后一个找到空白。

我的问题：

我[在这里](http://www.regular-expressions.info/examplesprogrammer.html)检查了我的正则表达式，看起来很棒，但是当我打电话时

```
temp = file.read()

temp = temp.split('/\*.*?\*/|\/{2}.*?\n|\s',flags=DOTALL)

print temp 
```

它返回一个只有一个元素的列表，这是我正在解析的整个文本。

关于我哪里出错的任何想法？谢谢！

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T08:26:02.087

问题不在于正则表达式，而在于`split`. 您正在调用[`split`an 的方法`str`](http://docs.python.org/library/string.html#string.split)，该方法不会被正则表达式拆分。它通过子字符串拆分字符串。而是使用[`re.split`](http://docs.python.org/library/re.html#re.split)

```
>>> code = open('file').read()
>>> code
'/* comment */\ntext1\n// comment\n\ntest2\n\ntext3 // comment\n\ntext4 /* comment */\n'
>>> import re
>>> re.split
<function split at 0x10d9c6320>
>>> re.split('/\*.*?\*/|\/{2}.*?\n|\s', code)
['', '', 'text1', '', '', 'test2', '', 'text3', '', '', 'text4', '', '', ''] 
```

[有关 python re 模块的更多信息](http://docs.python.org/library/re.html)。

# cakephp - 如何在 cakephp 2.1.3 或 cakephp 2.0 中使用 DebugKit 工具栏

> ID：10795213
> 
> 赞同：2
> 
> 时间：2012-05-29T07:59:47.873
> 
> 标签：cakephp, cakephp-2.0, cakephp-2.1

我曾尝试使用 cakephp Debugkit 工具栏`cakephp 2.1.3`...但它不能正常工作..

我已经在它上面实现了调试套件，`cakephp 1.3`它工作正常..

我下载了调试工具包`cakephp 2.1.3`。我重新检查了那个..

我如何实施它？

```
app/plugin/DebugKit   ///this is my path for debugkit 
```

我检查了我的调试模式是 2..

```
Configure::write('debug', 2); 
```

我如何在 Appcontroller 中加载我的调试工具包..'

```
public $components = array('DebugKit.Toolbar'); 
```

它显示错误

```
Parse error: syntax error, unexpected T_FUNCTION in /var/www/guest1/cakephp-2.1.3/app/Plugin/debug_kit/Controller/Component/ToolbarComponent.php on line 165 
```

我从不同的来源下载调试工具包，但结果相同。

谢谢 ！

它在这个函数和行中显示错误

```
public function implementedEvents() {
    $before = function ($name) {
        return function () use ($name) {
            DebugTimer::start($name, __d('debug_kit', $name));
        };
    };
    $after = function ($name) {
        return function () use ($name) {
            DebugTimer::stop($name);
        };
    }; 
```

我最后在 bootstrap.php 中加载了文件

```
CakePlugin::loadAll(); 
```

错误：-

```
 Error: DebugKit.ToolbarComponent could not be found.

Error: Create the class ToolbarComponent below in file: /var/www/guest1/cakephp-2.1.3/app/Plugin/DebugKit/Controller/Component/ToolbarComponent.php 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T08:18:12.083

[您已经下载了使用闭包](http://php.net/manual/en/functions.anonymous.php)的 DebugKit 插件的最新版本。如您所见，您至少需要 PHP 5.3 才能使其工作。

只需下载与您的 PHP 版本兼容的早期版本的 DebugKit。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T08:50:45.883

我有同样的问题。我猜如果您使用的是 Cakphp 2.0 或更高版本，则不能使用低于 2 的 Debugkit 版本，因为它具有不同的插件名称约定。文件具有不同的树结构。

因此，您所要做的就是使用较低版本并重命名文件或更新 PHP 或使用较低版本的 Cakephp。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-12T16:03:13.257

我有同样的问题。DebugKit 在我的本地服务器上工作，但在网上因同样的错误而崩溃。问题是我没有数据库连接。在我成功连接到数据库后，debugkit 工作正常。

# c# - 将 XML 日期/时间转换为 Oracle 日期/时间格式

> ID：10795214
> 
> 赞同：1
> 
> 时间：2012-05-29T07:59:48.477
> 
> 标签：c#, xml, oracle

我在 xml 文档中有一个日期/时间值，如下所示：

> 2012-02-29T00:00:00+01:00

我必须以这种格式将该日期转换为 oracle 日期

> dd.MM.yyyy hh24:mi:ss

我试过这样：

```
string cre_date = "convert(to_date,'" + dr_art_apa["CreationDateTime"] + 
"', 'dd.MM.yyyy hh24:mi:ss')"; 
```

但没什么，所以帮助别人！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T10:16:15.167

也许你可以这样尝试：

```
com1.CommandText = "TRB01.set_idoc('DOC','1','" + sender + "','" + reciver + "'," +
                    "to_timestamp_tz('"+ cre_date + "','yyyy-mm-dd\"T\"hh24:mi:ss:TZH:TZM'),'" + 
                     bod_ID + "')"; 
com1.ExecuteNonQuery(); 
```

虽然更好的解决方案应该是`DateTime`在 c# 代码中使用 a 并将其添加为 OracleParameter

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T08:08:28.120

var dt = DateTime.Parse("2012-02-29T00:00:00+01:00").ToString("dd.MM.yyyy HH:mm:ss");

# php - Zend：自动加载 Doctrine_Table 和 Doctrine_Record

> ID：10795215
> 
> 赞同：0
> 
> 时间：2012-05-29T07:59:50.630
> 
> 标签：php, zend-framework, orm, doctrine, autoload

我一直在使用自动加载的 Doctrine_Record 类一段时间；但经过一番阅读，我决定我想同时实现 Doctrine_Records 和自定义表类。

所以我把这个添加到我的引导程序中

```
 $manager->setAttribute(
        Doctrine::ATTR_AUTOLOAD_TABLE_CLASSES,
        true
    ); 
```

这使得自定义表类工作得很好......但它打破了自动加载记录！

如何使两者都自动加载？

IE new User.php 获取我的 User Doctrine_Record 类和 Doctrine_Core::getTable('User') 获取我的自定义 UserTable 类。

这是我尝试实现自定义表之前它的外观（工作）：

```
public function _initDoctrine() {
        require_once 'Doctrine.php';
        /*
         * Autoload Doctrine Library and connect
         * use appconfig.ini doctrine.dsn
         */
        $this   ->getApplication()
                ->getAutoloader()
                ->pushAutoloader(array(
                                'Doctrine',
                                'autoload'),
                                'Doctrine');
        $manager = Doctrine_Manager::getInstance();
        $manager->setAttribute(
            Doctrine::ATTR_AUTO_ACCESSOR_OVERRIDE, 
            true
        );

        $manager->setAttribute(
            Doctrine::ATTR_MODEL_LOADING,
            Doctrine::MODEL_LOADING_CONSERVATIVE
        );
            // try these custom tables out!
        // $manager->setAttribute( Doctrine::ATTR_AUTOLOAD_TABLE_CLASSES, true );

        $config = $this->getOption('doctrine');
        $conn = Doctrine_Manager::connection($config['dsn'], 'doctrine');
        return $conn;
        // can call flush on the connection to save any unsaved records
    } 
```

谢谢

* * *

**编辑：**

让我澄清一下。

不仅仅是自定义类。我已经使用了扩展 Doctrine_Record 的自定义类。

```
class Model_User extends Doctrine_Record {}

$foo = new Model_User; 
```

我的大部分应用程序目前都在解决这个问题，并且在这方面不会改变。

但是，我也想**使用**自定义[表](http://readthedocs.org/docs/doctrine/en/latest/en/manual/component-overview.html#custom-table-classes)

```
class UserTable extends Doctrine_Table {}

$bar = Doctrine_Core::getTable('User'); 
```

但是，一旦我启用此（自定义表类）功能，就可以使用 Table 后缀调用 Doctrine_Table 类。我之前扩展并直接调用的任何 Doctrine_Record 类都停止工作！我想两者都用！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T09:19:49.830

我不太了解您关于自定义类的问题，但无论如何，这是我在 ZF 中使用 mysql 和 UTF-8 的 Doctrine 1.2.4 引导程序。它不需要 require() 并完美地加载我的所有模型。

```
protected function _initDoctrine()
{
    $this->getApplication()->getAutoloader()
                           ->pushAutoloader(array('Doctrine', 'autoload'));
    spl_autoload_register(array('Doctrine', 'modelsAutoload'));

    $manager = Doctrine_Manager::getInstance();
    $manager->setAttribute(Doctrine::ATTR_AUTO_ACCESSOR_OVERRIDE, true);
    $manager->setAttribute  (
                                Doctrine::ATTR_MODEL_LOADING,
                                Doctrine::MODEL_LOADING_CONSERVATIVE
                            );
    $manager->setAttribute(Doctrine::ATTR_AUTOLOAD_TABLE_CLASSES, true);

    $dsn = $this->getOption('dsn');
    $conn = Doctrine_Manager::connection($dsn, 'doctrine');
    $conn->setAttribute(Doctrine::ATTR_USE_NATIVE_ENUM, true);
    $conn->setCollate('utf8_unicode_ci');
    $conn->setCharset('utf8');
    $conn->setAttribute(Doctrine_Core::ATTR_AUTO_FREE_QUERY_OBJECTS, true );

    Doctrine::loadModels(APPLICATION_PATH . '/models');
    return $manager;
} 
```

教义模型存储在“应用程序/模型”中

然后在我的 application/configs/application.ini ：

```
autoloadernamespaces[] = "Doctrine"
dsn = "mysql://your_login:your_pass@server_ip/database" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T01:30:32.803

我发现了问题！

您必须确保**每个**x.php Doctrine_Record 类都有一个关联的 xTable.php Doctrine_Table 类，否则记录加载将中断！

# java - 如何在 ActiveMQ 中获取所有排队的消息？

> ID：10795220
> 
> 赞同：5
> 
> 时间：2012-05-29T08:00:28.587
> 
> 标签：java, activemq

我想构建一个简单的消费者程序（在 java 中）来获取存储在 ActiveMQ 主题中的所有消息。我有一个在队列中发送 TextMessage 的生产者。

但我不知道如何开始编写我的消费者来检索旧消息并等待新消息。

如果有例子，谢谢！

这是我的制片人：http: [//pastebin.com/uRy9D8mY](http://pastebin.com/uRy9D8mY)

这是我的消费者： http: [//pastebin.com/bZh4r66e](http://pastebin.com/bZh4r66e)

当我在消费者之前运行生产者，然后运行消费者时，我什么也没有。当我运行我的消费者和生产者时，我在队列中添加了 72 条消息，但我的消费者只收到了 24 条消息......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T08:11:55.850

我建议阅读本教程（就像 Apache ActiveMQ 一样）[SUN Jms 教程](http://java.sun.com/j2ee/1.4/docs/tutorial/doc/JMS.html#wp84181)

编写 JMS/ActiveMQ 程序的方法有很多，可以使用 Spring 等各种框架，也可以使用纯 java。

本质上，编写一个像这样的监听器类：

```
public class MyListener implements MessageListener{
   public void onMessage(Message message){
      // Read and handle message here.
   }
} 
```

由于您已经在生成消息，我假设您已建立并运行连接。

```
session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
consumer = session.createConsumer("MyQueue");
listener = new MyListener ();
consumer.setMessageListener(listener);
connection.start(); 
// At this point, messages should arrive from the queue to your listener. 
```

然后有一些错误处理代码没有包含在这个例子中，但是你应该能够在教程和 JMS 文档的帮助下弄清楚。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-09-13T12:44:59.967

使用下面给出的代码，您可以读取队列中排队的所有消息。

*   在这段代码中，while 循环是一个无休止的循环，它将迭代队列中的所有消息。
*   一旦队列中没有消息，它将等待 5 秒，然后自动停止连接并中断循环。

如果您需要一个无休止的消费者，它将在新添加到队列时读取所有消息，然后删除 else 部分，这样程序就不会终止。

```
 ConnectionFactory factory =  new ActiveMQConnectionFactory("tcp://localhost:61616");
    Connection con = factory.createConnection();
    Session session =   con.createSession(false, Session.AUTO_ACKNOWLEDGE);
    Queue queue = session.createQueue("tmp_queue2");
    MessageConsumer consumer = session.createConsumer(queue);
    con.start();     
    while (true) {     
        Message msg = consumer.receive(5000); 
        if (msg instanceof TextMessage) {
            TextMessage tm = (TextMessage) msg;
            System.out.println(tm.getText());       
        }
        else{
            System.out.println("Queue Empty"); 
            con.stop();
            break;
        }
    } 
```

希望这个消费者计划能帮助那些刚接触 ActiveMQ 的人。

# c# - 如何使用 .NET SqlDependency 处理连接丢失

> ID：10795221
> 
> 赞同：3
> 
> 时间：2012-05-29T08:00:35.997
> 
> 标签：c#, .net, sqldependency

我需要注册 SqlDependency 以查看远程 SQL Server (2005) 上的新数据。连接丢失是可能的，因为连接跨越城市和国家。我应该如何处理连接丢失？在正常模式下，我可以在 .Open() 上使用异常，但使用 SqlDependency 连接仍然打开。

谢谢你的提示。

```
SqlCommand command = new SqlCommand("SELECT id FROM dbo.batches WHERE terminalId = @terminalId", msConnection);

command.Parameters.AddWithValue("@terminalId", SqlDbType.Int);
command.Parameters["@terminalId"].Value = terminalId;

SqlDependency dependency = new SqlDependency(command);
dependency.OnChange += new OnChangeEventHandler(NewBatchHandler);
SqlDependency.Start(connectionString);
command.ExecuteNonQuery(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T08:13:22.780

您可以使用重载的构造函数来减少超时，至少减少此问题的频率。这是 MS 知道的一个问题，不幸的是，我知道没有解决方法。

微软党的路线是他们知道这是一个问题并且不会解决它。过去，当这成为生产数据库的真正问题时，我基于轮询推出了自己的解决方案。

[http://connect.microsoft.com/SQLServer/feedback/details/543921/sqldependency-incorrect-behaviour-after-sql-server-restarts](http://connect.microsoft.com/SQLServer/feedback/details/543921/sqldependency-incorrect-behaviour-after-sql-server-restarts)

# objective-c - 将 TouchEvent 获取到我的滚动视图 iOS SDK 的子视图

> ID：10795223
> 
> 赞同：0
> 
> 时间：2012-05-29T08:00:39.347
> 
> 标签：objective-c, xcode, uiscrollview, uitapgesturerecognizer

> **可能重复：**
> [在 UIScrollView 内拖动 UIView](https://stackoverflow.com/questions/1481826/dragging-an-uiview-inside-uiscrollview)

我的应用程序有一个滚动视图，其中包含进度条和图像视图等。

现在我只想将**TapGestureRecognizer**添加到我的滚动视图中的图像视图中。

我可以将**TapGestureRecognizer**添加到我的总滚动视图中，但不能添加我在滚动视图中的图像

**注意：**只想将 TapGestureRecognizer 添加到我的滚动视图子视图的图像视图中，而不是整个滚动视图。

这是我的代码：

```
UITapGestureRecognizer *singleTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(singleTapGestureCaptured:)];
[myScrollView addGestureRecognizer:singleTap]; 
```

# java - 强制杰克逊使用注释添加额外的包装

> ID：10795232
> 
> 赞同：22
> 
> 时间：2012-05-29T08:01:42.193
> 
> 标签：java, jackson

我有以下课程：

```
public class Message {
    private String text;

    public String getText() {
        return text;
    }

    public void setText(String text) {
        this.text = text;
    }    
} 
```

默认情况下，使用 Jackson 将实例转换为 JSON 时，我得到：

```
{"text":"Text"} 
```

我想得到：

```
{"message":{"text":"Text"}} 
```

**我可以使用任何 JAXB / Jackson 注释来实现我的目标吗？**

作为一种解决方法，我可以用另一个类包装我的类：

```
public class MessageWrapper {
    private Message message;

    public Message getMessage() {
        return message;
    }

    public void setMessage(Message message) {
        this.message = message;
    }
} 
```

或更通用的解决方案：

```
public class JsonObjectWrapper<T> {
    /**
     * Using a real map to allow wrapping multiple objects
     */
    private Map<String, T> wrappedObjects = new HashMap<String, T>();

    public JsonObjectWrapper() {
    }

    public JsonObjectWrapper(String name, T wrappedObject) {
        this.wrappedObjects.put(name, wrappedObject);
    }

    @JsonAnyGetter
    public Map<String, T> any() {
        return wrappedObjects;
    }

    @JsonAnySetter
    public void set(String name, T value) {
        wrappedObjects.put(name, value);
    }
} 
```

可以这样使用：

```
Message message = new Message();
message.setText("Text");
JsonObjectWrapper<Message> wrapper = new JsonObjectWrapper<Message>("message", message); 
```

**我可以使用任何 JAXB / Jackson 注释来实现我的目标吗？**

谢谢。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2019-03-03T09:04:19.113

使用 Jackson 2.x 可以使用以下内容来启用包装器，而无需在 ObjectMapper 中添加其他属性

```
import com.fasterxml.jackson.annotation.JsonTypeInfo;
import com.fasterxml.jackson.annotation.JsonTypeName;

@JsonTypeInfo(include = JsonTypeInfo.As.WRAPPER_OBJECT, use = JsonTypeInfo.Id.NAME)
@JsonTypeName(value = "student")
public class Student {
  private String name;
  private String id;
} 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-05-30T01:54:28.340

关于解决方法：您并不绝对需要那些 getter/setter，所以可以：

```
public class MessageWrapper {
  public Message message;
} 
```

或者添加便利构造函数：

```
public class MessageWrapper {
  public Message message;
  @JsonCreator
  public MessageWrapper(@JsonProperty("message") Message m) { 
       message = m; 
  }
} 
```

还有一种方法可以添加包装；在 1.9 中，您可以使用`SerializationConfig.Feature.WRAP_ROOT_ELEMENT`和`DeserializationConfig.Feature.UNWRAP_ROOT_ELEMENT`。如果要更改包装器名称（默认情况下它只是不合格的类名），可以使用`@JsonRootName`注解

Jackson 2.0 通过`ObjectReader`和`ObjectWriter`以及 JAX-RS 注释添加了更多动态选项。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-01-22T16:42:48.860

得知您必须为使用标记对象包装类的简单目标而编写自定义序列化，这令人难过。在尝试编写自定义序列化程序后，我得出结论，最简单的解决方案是通用包装器。这可能是您上面示例的更简单的实现：

```
public final class JsonObjectWrapper {
    private JsonObjectWrapper() {}

    public static <E> Map<String, E> withLabel(String label, E wrappedObject) {
        HashMap<String, E> map = new HashMap<String, E>();
        map.put(label, wrappedObject);
        return map;
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-01-06T13:59:54.750

如果您不介意 json 大写`m`in `message`，那么最简单的方法是使用[`@JsonTypeInfo`](https://fasterxml.github.io/jackson-annotations/javadoc/2.4/com/fasterxml/jackson/annotation/JsonTypeInfo.html).

你会添加：

```
@JsonTypeInfo(include=As.WRAPPER_OBJECT, use=Id.NAME)
public class Message {
  // ...
} 
```

要得到`{"Message":{"text":"Text"}}`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-02-03T15:36:02.150

如果使用弹簧，则在`application.properties`文件中添加以下内容：-

> spring.jackson.serialization.WRAP_ROOT_VALUE=true

然后`@JsonRootName`在您希望序列化的任何类上使用注释。例如

```
@JsonRootName("user")
public class User {
    private String name;
    private Integer age;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-08-17T20:52:06.703

一种更简单/更好的方法：

```
@JsonRootName(value = "message")
public class Message { ...} 
```

然后使用
`new ObjectMapper().configure(SerializationFeature.WRAP_ROOT_VALUE, true).writeValueAs...`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-06-21T12:29:59.160

我创建了一个包含 @JsonWrapped 注释的小型杰克逊模块，可以解决问题。代码见这里：[https ://github.com/mwerlitz/jackson-wrapped](https://github.com/mwerlitz/jackson-wrapped)

您的课程将如下所示：

```
public class Message {
    @JsonWrapped("message")
    private String text;
} 
```

# java - HttpServletRequest.getSession(false)：什么时候返回null？

> ID：10795240
> 
> 赞同：5
> 
> 时间：2012-05-29T08:02:08.073
> 
> 标签：java, jakarta-ee

我想知道调用[HttpServletRequest.getSession(false)时何时期望“null”](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getSession%28boolean%29)

另外：有没有关于 HttpSession 的好教程？我想获得以下详细信息：何时使无效（）？后果是什么？我是否需要检查返回的 HttpSession 是否有效？... <== 请在评论中回答。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T08:08:32.130

您实际上不应该期望空值。正如文档所说，如果请求没有活动会话（通常，您会在请求的过滤器链中检查它），则会创建一个会话。如果您从中获得空值，我敢打赌底层操作系统存在问题：会想到没有足够的内存来生成会话。

# file - 使用 UTF-8 格式的 xp_cmdshell 写入文件

> ID：10795251
> 
> 赞同：2
> 
> 时间：2012-05-29T08:02:58.943
> 
> 标签：file, sql-server-2005, utf-8, xp-cmdshell

我正在使用 xp_cmdshell 创建文件，如下所示：

```
SELECT @command = 'echo ' + @fileContent + ' > e:\out\' + @fileName + '.csv'
exec master.dbo.xp_cmdshell 'mkdir "e:\out\"'
exec master..xp_cmdshell @command 
```

问题是文件内容不是 UTF-8 格式，所以一些特殊字符是错误的。

我可以以 UTF-8 编码创建文件吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T14:13:01.930

我最终通过将输出写入 temp.txt 文件并添加下一个 PowerShell 命令将其转换为 UTF-8 成功地做到了这一点：

```
-- Change encoding to UTF-8 with PowerShell 
SET @command = 'powershell -Command "Get-Content '+@Path+'\temp.txt -Encoding Unicode | Set-Content -Encoding UTF8 '+@path+'\'+@filename+'"';
EXEC xp_cmdshell @command; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T11:06:34.883

您可以使用[SQLCMD](http://msdn.microsoft.com/en-us/library/ms162773%28v=sql.90%29.aspx)代替旧技术作为 DOS 输出重定向

```
sqlcmd -S ServerName -d DataBaseName -E -o "CSV File Path & Location" -Q "Your Query" -W -w 4000 -s ";" -f 65001 
```

开关**-f 65001**表示使用 UTF8 作为输出文件

```
SELECT @command = 'sqlcmd -S ServerName -d DataBaseName -E -o "'+ @fileName +'" -Q "Your  Query" -W -w 4000 -s ";" -f 65001'
exec master.dbo.xp_cmdshell 'mkdir "e:\out\"'
exec master..xp_cmdshell @command 
```

ps 我无法对其进行测试，因此请查看 SQLCMD 文档

希望有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-11T01:31:09.590

我选择了 Jan Lenders 的方式，但在读取时间时没有使用该编码类型设置。

```
SET @COMMAND = 'powershell -Command "Get-Content '+ @PATH + @V_FILE_NAME + ' | Set-Content -Encoding UTF8 '+ @PATH + @V_FILE_NAME +'2"'; 
```

这是有效的。

谢谢你^^

# c# - Alternative for NameValueCollection to be used in serialization

> ID：10795255
> 
> 赞同：1
> 
> 时间：2012-05-29T08:03:15.033
> 
> 标签：c#, serialization, dictionary, datacontractserializer, namevaluecollection

I have a situation where in I cant use a Dictionary for name value collection of strings. My name value pair contains duplicate keys, because I need to support a legacy system. So please don't ask me to stop supporting duplicate keys. I tried to use NameValueCollection but this cannot be used with DataContractSerializer as it throws exception. [Refer to the question for the error details.](https://stackoverflow.com/questions/939118/wcf-serialization-problem-using-namevaluecollection)

Can anybody suggest alternative for this NameValueCollection type so that I can store key value pairs (only strings)?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T08:06:43.057

You *could* translate the name-value pairs into a `List<Tuple<string, string>>`, which according to [this question](https://stackoverflow.com/questions/2732840/sending-a-tuple-object-over-wcf) is serializable.

Of course, you lose protection against duplicates, so you should only use this to get it across the wire.

# javascript - 我可以使用 html5 缓存清单来存储第三方 js 吗？

> ID：10795268
> 
> 赞同：4
> 
> 时间：2012-05-29T08:04:26.403
> 
> 标签：javascript, html, browser-cache, cache-manifest

我想在我的 html5 缓存清单中使用第三方 js。
我不知道我能不能做，如果可能，那怎么做？
我可以在清单文件中指定完整的第三方 js url 吗？
我已经看到了在清单中为图像指定 http url 的示例，那么为什么我们不能对 js 和 css 做同样的事情呢？
如果我们不能实现它，还有其他选择吗？我知道我们可以将第三方 js 存储在本地存储中。
例子表示赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T08:14:01.430

根据[html5doctors](http://html5doctor.com/go-offline-with-application-cache/)，您可以在缓存清单中设置外部 url。这是一个例子：

```
CACHE MANIFEST

# This is the cache part where you specify files to cache
CACHE
/some/file.js
/some/other/file.css

http://some.external.url/file.js 
```

如果您想了解更多信息（缓存、回退等），我建议您阅读 html5doctors 的链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-20T00:55:15.850

对于其他遇到问题的人，我在尝试从 https 加载脚本时遇到了问题。将它们转换为 http 就可以了。

# actionscript-3 - as3 cs5 Odd Error #1009 in drag and drop game

> ID：10795270
> 
> 赞同：-1
> 
> 时间：2012-05-29T08:04:42.877
> 
> 标签：actionscript-3, drag-and-drop, flash-cs5

I'm making a drag-and-drop game. On the MouseEvent.MOUSE_UP I have an if-statement like so:

```
function fnUp(event:MouseEvent):void
    {
        clicked.stopDrag();
        if (clicked.dropTarget.parent.parent.name == clicked.currentLabel)
        {
            var dropped:Card = clicked.dropTarget.parent.parent as Card;
            dropped.gotoAndStop(dropped.name);
            dropped.bg.gotoAndStop("done");
            removeChild(clicked);

        }
        else
        {
            clicked.x = clicked.sx;
            clicked.y = clicked.sy;
            clicked.bg.gotoAndStop("off");
        }
        clicked = null;
    } 
```

"clicked" is an earlier declared var of type Card(); and it's set in the MouseEvent.MOUSE_DOWN like so:

```
 function fnDown(event:MouseEvent):void
    {
        clicked = event.currentTarget as Card;
        clicked.bg.gotoAndStop("on");
        clicked.startDrag();
        addChild(clicked);
    } 
```

I thought that if I build my if-statement like this there wouldn't be an error if the card was dropped anywhere but on one of the three possible target cards. But I still get:

> TypeError: Error #1009: Cannot access a property or method of a null object reference.

**tldr; I get an error if I drop my card outside one of the 3 possible targets.**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T15:50:01.543

On which line you getting an error? You need to check if all of the following objects existing:

```
if (clicked.dropTarget &&
clicked.dropTarget.parent &&
clicked.dropTarget.parent.parent )
{
    then do something...
} 
```

# pdf - Fancybox 无法使用 PDF 正确调整大小

> ID：10795271
> 
> 赞同：0
> 
> 时间：2012-05-29T08:04:53.797
> 
> 标签：pdf, resize, fancybox, embed, fluid-layout

到目前为止，我一直在浏览 Fancybox API 和论坛，但没有运气。

基本上，当窗口调整大小时，fancybox 中的嵌入 PDF 会调整大小，但 fancybox 容器不会，并且会从浏览器的右侧流出。

这是它第一次打开的时间：http: [//lizbmorrison.net/fancybox1.png](http://lizbmorrison.net/fancybox1.png)

当窗口大小调整时：http: [//lizbmorrison.net/fancybox2.png](http://lizbmorrison.net/fancybox2.png)

HTML：

```
<li class="pdf"><a class="fancypdf" href="#mydoc">View PDF</a></li>
<div id="mydoc" style="display:none;">
    <embed class="embed" src="<?php echo wp_get_attachment_url( $PDF->ID ); ?>"></embed>
</div> 
```

JS：

```
$(document).ready(function() {
var width = $(window).width() * 0.9;
var height = $(window).height() * 0.9;
$('.embed').css('width', width).css('height', height);
$('a.fancypdf').fancybox({
    'type': 'inline',
    'margin': 0,
    'centerOnScroll': false,
    'hideOnContentClick': false,
    'autoDimensions': true,
    'autoScale': true,
    'transitionIn': 'fade',
    'transitionOut': 'fade',
});
});
$(window).resize(function () {
var width = $(window).width() * 0.9;
var height = $(window).height() * 0.9;
$('.embed').css('width', width).css('height', height);
}); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T11:06:53.853

这是我已经解决的问题，但仍然不完美。

HTML：

```
<li class="pdf"><a class="fancypdf" style="padding-top: 20px;"  href="<?php echo wp_get_attachment_url( $PDF->ID ); ?>">View PDF</a></li> 
```

JS：

```
$('.fancypdf').fancybox({
    'type': 'iframe',
    'centerOnScroll': true,
    'width': 800,
    'height': 600,
    'margin': 20,
    'autoScale': false,
    'autoDimensions': false
}); 
```

# javascript - 为什么不能在 Windows 上安装“node.js / Crawler”？

> ID：10795273
> 
> 赞同：0
> 
> 时间：2012-05-29T08:04:54.300
> 
> 标签：javascript, windows, node.js

我有 Windows XP（32 位）和 Windows 7（64 位），但[node.js](http://www.nodejs.org)（爬虫）不能安装在任何一个 Windows 上。

```
$ npm install crawler 
```

它是谚语`O/S not supported`或类似的东西。我目前只能在Linux上使用它，但是如何让它在Window机器上运行呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T08:09:15.327

你试过windows安装程序吗？ [http://nodejs.org/dist/v0.6.18/node-v0.6.18.msi](http://nodejs.org/dist/v0.6.18/node-v0.6.18.msi)

下一个版本出来时的完整下载链接：[http ://www.nodejs.org/#download](http://www.nodejs.org/#download)

# javascript - 在javascript中显示json数据不起作用

> ID：10795283
> 
> 赞同：-1
> 
> 时间：2012-05-29T08:05:39.040
> 
> 标签：javascript, json

我创建了一个 var 并将 JSON 数据（逗号分隔值）传递给它，但是当我想显示 json 数据时 - 它只返回 null。这是代码：

```
<script type="text/javascript">
var data1 = [
    {order:"145",country:"Dubai",employee:"permanent",customer:"self"}
];  

document.write(data1);
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T08:23:07.770

你可以这样做：

```
var data1 = [{order:"145",country:"Dubai",employee:"permanent",customer:"self"} ];  

data1.forEach(function(data){
    document.write(data.order);
    document.write(data.country);
    document.write(data.employee);
    document.write(data.customer);
}); 
```

或者你可以这样做

```
var data1 = [
    {order:"145",country:"Dubai",employee:"permanent",customer:"self"}
];  

$.each(data1[0], function(key, value){
    document.write(key + " " + value); 
}); 
```

无论哪种方式，在列表中只存储一个对象会使这个答案有点多余，除非我向您展示如何遍历多个对象。

```
var data1 = [
    {order:"145",country:"Dubai",employee:"permanent",customer:"self"},
    {order:"212",country:"Abu-Dhabi",employee:"permanent",customer:"Tom"}
];  

data1.forEach(function(data){
    $.each(data, function(key, value){
        document.write(key+" "+value);
    });
}); 
```

我在这里也使用了 jQuery 的组合，这可能不是最佳的，但至少它表明有多种方法可以完成您所需要的。

此外，数组上的 forEach() 方法是 MDN 开发的方法，因此它可能不兼容跨浏览器，请注意！

如果你想要纯 JS，这是一种方法

```
var data1 = [
    {order:"145",country:"Dubai",employee:"permanent",customer:"self"},
    {order:"212",country:"Abu-Dhabi",employee:"permanent",customer:"Tom"}
];  

for(json in data1){
    for(objs in data1[json]){
        document.write(objs + " : " + data1[json][objs]);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-31T21:37:57.540

对于 JSON 的简单快速打印，可以执行以下操作，对象也几乎相同；

```
 var json = {
        "title" : "something",
        "status" : true,
        "socialMedia": [{
            "facebook": 'http://facebook.com/something'
        }, {
            "twitter": 'http://twitter.com/something'
        }, {
            "flickr": 'http://flickr.com/something'
        }, {
            "youtube": 'http://youtube.com/something'
        }]
    }; 
```

现在要在屏幕上打印，一个简单的 for in 循环就足够了，但请注意，它不会打印数组，而是会打印 [object Object]。为了简单起见，我不会深入在屏幕上打印数组键和值。

希望这对某人有用。干杯!

```
for(var i in json) {
    document.writeln('<strong>' + i + '</strong>' +json[i] + '<br>');
    console.log(i +  ' ' + json[i])
} 
```

# android - 当我拍照时，我在 dcim 中有另一个副本，为什么？

> ID：10795286
> 
> 赞同：0
> 
> 时间：2012-05-29T08:05:53.597
> 
> 标签：android

我正在开发一个使用安卓相机拍照的程序。但是当我捕获图片时，我将在 /sdcard/dcim 和我的输出目录中都有 2 个结果图片。这种情况发生在我的 htc 愿望和 sumsung p1000 中，但在我的 huwei 设备中，图片只会保存在我的输出目录中，/sdcard/dcim 中没有副本。为什么以及如何解决它？

这是我调用相机的代码

```
 Intent intent = new Intent("android.media.action.IMAGE_CAPTURE");
    intent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(new File(strFilePath)));
    startActivityForResult(intent, CAMERA_RESULT_CODE_PIC_TAKEN); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T08:13:42.473

我有同样的问题，无法解决。该行为并非在所有设备和/或所有 Android 版本上都发生，但我试图找出是否存在第二个副本并删除该副本。我使用以下代码查找最后拍摄的照片。

```
String[] projection = new String[]{MediaStore.Images.ImageColumns._ID,MediaStore.Images.ImageColumns.DATA,MediaStore.Images.ImageColumns.BUCKET_DISPLAY_NAME,MediaStore.Images.ImageColumns.DATE_TAKEN,MediaStore.Images.ImageColumns.MIME_TYPE};     
        final Cursor cursor = managedQuery(MediaStore.Images.Media.EXTERNAL_CONTENT_URI,projection, null, null, MediaStore.Images.ImageColumns.DATE_TAKEN + " DESC"); 
        if(cursor != null){
            cursor.moveToFirst();
            // you will find the last taken picture here
            cursor.close();
        } 
```

但由于对这个解决方案不满意，最后我决定编写一个自定义相机应用程序以避免奇怪的行为。

# c# - 使用 Visual Studio 2010 创建 XML 架构并从中自动生成可序列化的类

> ID：10795287
> 
> 赞同：7
> 
> 时间：2012-05-29T08:05:54.063
> 
> 标签：c#, xml, visual-studio-2010, xsd

我正在尝试使用 Visual Studio 2010 创建要序列化/反序列化的 XML 模式，但是拥有一个 xml 文件和另一个 xml 模式文件看起来真的很复杂，我不知道应该怎么做。我记得在 Visual Studio 2005 中，只需创建 xml 文件并使用 xml 设计器打开它，然后绘制架构，然后从架构中生成可序列化的代码，这要简单得多。任何有助于使用 Visual Studio 2010 Professional 执行相同操作的提示/链接。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-25T16:47:20.500

让我试着回答这个问题：

1.  打开你的 VS 项目。
2.  在您的项目上打开 XML。
3.  在 VS 上，转到菜单选项卡并单击创建架构
4.  保存架构文件并添加到您的项目中。

然后您可以为序列化/反序列化过程创建自己的类或使用 xsd.exe

我用了最后一个。就我而言，我可以在 \Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Bin\xsd.exe 中找到该工具。

然后您可以打开 CMD 或 Visual Studio 命令窗口并编写如下内容： xsd.exe [THE XSD FILE] /c /l:c# /o:[DIRECTORY WHERE WHERE YOU WANT TO SAVE THE .CS]

我希望这对您有用或回答您的问题。我几乎在 VS 2008 和 2010 中使用了相同的方法。

**以下是相关主题以防万一：**

XSD 工具：[https ://docs.microsoft.com/en-us/dotnet/standard/serialization/xml-schema-definition-tool-xsd-exe](https://docs.microsoft.com/en-us/dotnet/standard/serialization/xml-schema-definition-tool-xsd-exe)

[没有 xsd.exe 的 XML 序列化和架构](https://stackoverflow.com/questions/336988/xml-serialization-and-schema-without-xsd-exe)

[从 XSD 生成类](https://stackoverflow.com/questions/260001/generate-classes-from-xsd)

如果您没有 Microsoft SDK，您可以从以下网址获取： [https ://docs.microsoft.com/en-us/dotnet/core/sdk](https://docs.microsoft.com/en-us/dotnet/core/sdk)

# nginx - PHP 用尽了 4GB 但不是 2GB 的限制？

> ID：10795295
> 
> 赞同：3
> 
> 时间：2012-05-29T08:06:24.810
> 
> 标签：nginx, php

我是一家大公司的开发人员，该公司有一些遗留代码，在导出函数上需要大量内存。为了解决这个问题， ini_set('memory_limit', '4G'); 用来。

问题是脚本因内存耗尽而崩溃。如果我将限制设置为 2G，则脚本将运行到最后。它甚至没有达到 1GB 的峰值内存使用量。

由于代码是版本化的并与公司的其他人共享，我无法更改限制，并且在我的本地安装中更改它很麻烦。

我的问题是：什么可以使脚本在 4GB 限制但不是 2GB 时崩溃？

PS：我的设置是一台运行 Debian 的虚拟机，带有 nginx 和 php-fpm。vm 有 4GB RAM（尽管改变它似乎没有任何区别）。

* * *

[**更新**]

创建了一个具有 64 位操作系统的新虚拟机，如果我将 vm 内存设置为 2GB，它就可以工作。（如果我使用 4GB 则不会）。由于我对 2GB 没问题，我将关闭此问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T08:15:06.327

这是一个自然的限制：2 甚至 4 Gbs 的地址空间用于文件映射，这也需要一些内存页面。

最终的解决方案是使用 64 位 PHP 解释器（即，如果可能，切换到 64 位系统）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T08:11:52.183

也许您使用的是 32 位系统？

好吧，如果您的虚拟机只有 4GB，那么您可能应该给它更多的内存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T08:16:05.237

在 32 位系统上，4GB 是内存空间的限制。我猜当 PHP 尝试获取 4GB 内存时可能会出现一些内存冲突。

# c# - UpdatePanel 内部有用户控件时的条件模式问题

> ID：10795296
> 
> 赞同：1
> 
> 时间：2012-05-29T08:06:40.753
> 
> 标签：c#, asp.net, .net, asp.net-4.0

这是我的标记：

```
<asp:UpdatePanel runat="server" ID="updEml" UpdateMode="Conditional">
        <ContentTemplate>
            <asp:LinkButton runat="server" Text="+ Add Email" ID="lnkAddEmail" OnClick="lnkAddEmail_Click" />
            <div id="Emlpopup" style="width: 470px; display: none; height: 200px;">
                <uc:AddEditEmailAddress runat="server" ID="ucAdEdEml" />
            </div>
        </ContentTemplate>
        <Triggers>
            <asp:AsyncPostBackTrigger ControlID="lnkAddEmail" EventName="Click" />
            <asp:AsyncPostBackTrigger ControlID="btnAdEdEmail" EventName="Click" />
        </Triggers>
    </asp:UpdatePanel> 
```

如您所见，我的 UpdateMode 设置为 Conditional。我希望在单击 lnkAddEmail 或 btnAdEdEmail 时刷新它。但问题是 btnAdEdEmail 在我的 UserControl 中，所以我遇到了异常

> “在 UpdatePanel 'updEml' 中找不到触发器的 ID 为 'btnAdEdEmail' 的控件。”

. 我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T08:16:51.903

默认情况下，UpdatePanel 的 ChildrenAsTriggers 属性设置为 true。这意味着其中任何触发回发的控件都将导致刷新，因此您无需指定任何触发器。

# ruby - 重新设计这个并行伪代码更干

> ID：10795301
> 
> 赞同：0
> 
> 时间：2012-05-29T08:06:58.167
> 
> 标签：ruby, parallel-processing

我想到了一个看起来并不复杂的设计问题，但我自己找不到解决它的方法。我想尽可能地遵循[DRY](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)原则。

我有两个功能。一个是算法的基本版本，另一个是并行编程的改进。它们是两个，我的目标是只编写其中一个并带有附加参数，例如“并行”。这里是伪代码。

```
fun1 ()
    loop for par1 times
        do_work()

fun2 ()
    loop for par1 times
        run new thread
            do_work() 
```

目前我已经编码

```
if parallel == 0
    fun1 ()
else
    fun2 () 
```

我想要的是类似的东西

```
fun ()
    loop for par1 times
        run new thread if parallel > 0 #Ruby's syntax-like
            do_work() 
```

我想知道 Ruby 是否可以帮助我解决这个问题。我是 Ruby 的新手，所以我不确定它的函数式编程是否会有所作为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T08:10:28.860

像这样：

```
def fun(parallel=false)
  if parallel
    # called as fun(true)
  else
    # called as fun
  end
end 
```

`parallel=false`如果没有传递参数，则设置默认参数值。

或者您可以使用选项哈希更明确地传递参数

```
def fun(options={})
  parallel = option[:parallel] || false
  if parallel
    # called as fun(parallel: true)
  else
    # called as fun
  end
end 
```

另一种方法是始终`do_work()`在线程中运行并根据`parallel`参数等待线程完成。

```
def fun(parallel=false)
  workers = []
  par1.times do
    worker = Thread.new { do_work() }
    worker.join if parallel
    workers << worker
  end
  workers.each(&:join)
end 
```

# android - 无法在 android 中启动和创建 AVD

> ID：10795302
> 
> 赞同：0
> 
> 时间：2012-05-29T08:06:58.540
> 
> 标签：android, avd

## **我正在尝试在 andriod 中运行一个简单的 helloworld，但是在午餐 AVD 时它会抛出一个错误提示。**

* * *

> 无法在设备 'emulator-5556 上安装 nischal.apk！(null) 无法在设备“emulator-5556”上安装 nischal.apk：EOF com.android.ddmlib.InstallException：EOF 启动已取消！

**我也尝试创建一个新的 AVD，但它仍然抛出一个错误说**

> 无法创建文件“C:\Windows\system32\config\systemprofile.android\avd\nischalAVD.avd\sdcard.img”：没有这样的文件或目录无法创建 SD 卡。在 AVD 文件夹中创建 sdcard 失败。

***所以请任何人都可以帮我找出问题所在。*** ***谢谢您的帮助..***

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T08:16:40.230

以管理员身份尝试一下，也许您没有权限在 C: 上写入。

# asp.net-mvc - 数据集给出一个空图表

> ID：10795307
> 
> 赞同：0
> 
> 时间：2012-05-29T08:07:22.097
> 
> 标签：asp.net-mvc

我必须根据项目列表制作图表。为此，我使用 dataview 图表和 ASP。网。

问题是我的图表是空的，但我有数据。

数据：

```
xmlns:xsd="http://www.w3.org/2001/XMLSchema">
- <Expense>
  <Type>Achat pièce</Type> 
  <Total>173.50</Total> 
  </Expense>
  </Root> 
```

用于构建字符的代码：

```
DataSet dataSet = new DataSet();
DataTable dataTable = new DataTable("Table");
dataTable.Columns.Add("Total", typeof(string));
dataTable.Columns.Add("Type", typeof(string));
dataSet.Tables.Add(dataTable);

//GetData & fill dataTable
            var listOfExpense = Helper.JsonHelper.FromJson<ExpensePie>(resp.Content);
            foreach (var expense in listOfExpense.ListOfExpense)
            {
                dataTable.Rows.Add(expense.Total, expense.Type);
            }

//Fill data view with dataset
var dataView = new DataView(dataSet.Tables["Table"]);

//Build the chart
var myChart = new Chart(width: 600, height: 400, theme: ChartTheme.Blue)
   .AddSeries("Default", chartType: "bar",
   xValue:dataView, xField:"Type",
   yValues: dataView, yFields: "Total")
   .GetBytes("png");
return File(myChart, "image/png"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T08:14:34.790

您解析 XML 的方式一定有问题。您似乎正在使用一些自定义 FromJson 方法和一些 XmlDocument 来填充您的数据集，但我猜您的数据集不包含任何值，因为以下工作非常好：

```
public ActionResult Index()
{
    DataSet dataSet = new DataSet();
    DataTable dataTable = new DataTable("Table");
    dataTable.Columns.Add("Total", typeof(double));
    dataTable.Columns.Add("Type", typeof(string));
    dataSet.Tables.Add(dataTable);

    dataTable.Rows.Add(173.5, "Achat pièce");
    dataTable.Rows.Add(145.7, "Something else");

    //Fill data view with dataset
    var dataView = new DataView(dataSet.Tables["Table"]);

    //Build the chart
    var myChart = new Chart(width: 600, height: 400, theme: ChartTheme.Blue)
        .AddSeries("Default", chartType: "bar",
        xValue: dataView, xField: "Type",
        yValues: dataView, yFields: "Total")
        .GetBytes("png");
    return File(myChart, "image/png");
} 
```

结果：

![在此处输入图像描述](../Images/2158f7213e6d30e1de0e88d0b4f6daae.png)

# c# - Windows Phone 模板和按钮

> ID：10795309
> 
> 赞同：1
> 
> 时间：2012-05-29T08:07:41.143
> 
> 标签：c#, templates, button, windows-phone

我对自定义控件及其模板有疑问。

我有一个扩展 Button 的控件，它的模板是通过 Expression Blend 4 创建的，它在 App.xaml 的资源中可用。

这是模板：

```
<ControlTemplate x:Key="ImageButtonControlTemplate1" TargetType="maquette_v0__1_Controles_persos:ImageButton">
        <Grid Margin="0" Width="150">
            <VisualStateManager.VisualStateGroups>
                <VisualStateGroup x:Name="CommonStates">
                    <VisualState x:Name="Disabled"/>
                    <VisualState x:Name="Normal">
                        <Storyboard>
                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)" Storyboard.TargetName="image">
                                <DiscreteObjectKeyFrame KeyTime="0">
                                    <DiscreteObjectKeyFrame.Value>
                                        <Visibility>Collapsed</Visibility>
                                    </DiscreteObjectKeyFrame.Value>
                                </DiscreteObjectKeyFrame>
                            </ObjectAnimationUsingKeyFrames>
                        </Storyboard>
                    </VisualState>
                    <VisualState x:Name="MouseOver"/>
                    <VisualState x:Name="Pressed">
                        <Storyboard>
                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)" Storyboard.TargetName="image1">
                                <DiscreteObjectKeyFrame KeyTime="0">
                                    <DiscreteObjectKeyFrame.Value>
                                        <Visibility>Collapsed</Visibility>
                                    </DiscreteObjectKeyFrame.Value>
                                </DiscreteObjectKeyFrame>
                            </ObjectAnimationUsingKeyFrames>
                        </Storyboard>
                    </VisualState>
                </VisualStateGroup>
            </VisualStateManager.VisualStateGroups>
            <Image x:Name="image1" Source="{TemplateBinding Image}" Height="150"/>
            <Image x:Name="image" Source="{TemplateBinding PressedImage}" Height="150"/>
        </Grid>
    </ControlTemplate> 
```

在一个页面中，我想动态添加一个自定义控件。为此，我的文件 Xaml“menu_commune”中有一个网格，我想在这个网格中显示我的控件。

这是代码 C#：

```
ImageButton b = new ImageButton();
b.SetValue(Grid.RowProperty, 0);
b.SetValue(Grid.ColumnProperty, 2);
// bool t = Application.Current.Resources["ImageButtonControlTemplate1"] == null;
ControlTemplate ctemp = (ControlTemplate)    Application.Current.Resources["ImageButtonControlTemplate1"];
b.Template = ctemp;
BitmapImage bi_noPress = new BitmapImage(new Uri("/Images/menu_agenda.png"));
BitmapImage bi_Press = new BitmapImage(new Uri("/Images/menu_agenda_selected.png"));
b.Image = bi_noPress;
b.PressedImage = bi_Press;
menu_commune.Children.Add(b); 
```

问题是什么都没有显示。但是，Xaml 中的声明运行良好。

```
<UC:ImageButton Grid.Row="2" Grid.Column="2" Image="../Images/menu_office-de-tourisme.png" PressedImage="../Images/menu_office-de-tourisme_selected.png" Height="150" Template="{StaticResource ImageButtonControlTemplate1}" Click="tourisme_Click"  /> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T07:02:43.013

```
<UC:ImageButton Grid.Row="2" Grid.Column="2" Image="../Images/menu_office-de-tourisme.png" PressedImage="../Images/menu_office-de-tourisme_selected.png" Height="150" Template="{StaticResource ImageButtonControlTemplate1}" Click="tourisme_Click"  /> 
```

在这里您使用`Grid.Row="2" Grid.Column="2"`, 并且在代码中您需要使用相同的值。代替

```
b.SetValue(Grid.RowProperty, 0);
b.SetValue(Grid.ColumnProperty, 2); 
```

为了这

```
b.SetValue(Grid.RowProperty, 2);
b.SetValue(Grid.ColumnProperty, 2); 
```

希望它的帮助。

# winforms - 带有 DateTimeScaleConfigurator 的 Nevron BarChart 奇怪的系列绘图？

> ID：10795315
> 
> 赞同：2
> 
> 时间：2012-05-29T08:08:05.480
> 
> 标签：winforms, charts, nevron

我在应用程序中使用 Nevron Charting Control ver.11.1.17.12。我在用`DateTimeScaleConfigurator`. 以下是以下问题：

1.  如果系列计数增加，系列栏会相互重叠。
2.  系列脱离轴心线。
3.  X Axis Scale 会自动添加上一年`December`和下一年`Jan`的比例，这会导致图表在 Surface Chart 的情况下有空白区域。

*//绘制条形图系列的代码片段*

```
NBarSeries bar = new NBarSeries();
bar.UniqueId = new Guid(outputVariable.UniqueId);
bar.Name = outputVariable.LegendText;
chart.Series.Add(bar);
bar.HasBottomEdge = false;
bar.MultiBarMode = chart.Series.Count == 1 ? MultiBarMode.Series : MultiBarMode.Clustered;                   
// bar.InflateMargins = true;
bar.UseZValues = false;

indexOfSeries = chart.Series.IndexOf(bar);
ConfigureChartSeries(bar, indexOfSeries, outputVariable);
SetSeriesAxisInformation(bar, outputVariable.Unit);
bar.UseXValues = true;
foreach (DataRow row in seriesDataTable.Rows)
{
   bar.XValues.Add(Convert.ToDateTime(row["TimeStamp"]).ToOADate());
} 
```

*添加曲面图系列的代码片段*

```
chart.Enable3D = true;
 chart.BoundsMode = BoundsMode.Stretch;
 (chart as NCartesianChart).Fit3DAxisContent = true;               
 chart.Projection.SetPredefinedProjection(PredefinedProjection.OrthogonalTop);
 chart.LightModel.EnableLighting = false;                   
 chart.Wall(ChartWallType.Back).Visible = false;
 chart.Wall(ChartWallType.Left).Visible = false;
 chart.Wall(ChartWallType.Floor).Visible = false;
 // setup Y axis
 chart.Axis(StandardAxis.PrimaryY).Visible = false;                
 // setup Z axis
 NAxis axisZ = chart.Axis(StandardAxis.Depth);
 axisZ.Anchor = new NDockAxisAnchor(AxisDockZone.TopLeft);
 NLinearScaleConfigurator scaleZ = new NLinearScaleConfigurator();
 scaleZ.InnerMajorTickStyle.Visible = false;
 scaleZ.MajorGridStyle.ShowAtWalls = new ChartWallType[0];
 scaleZ.RoundToTickMin = false;
 scaleZ.RoundToTickMax = false;
 axisZ.ScaleConfigurator = scaleZ;
 axisZ.Visible = true;

 // add a surface series
 NGridSurfaceSeries surface = new NGridSurfaceSeries();
 surface.UniqueId = new Guid(outputVariable.UniqueId);
 surface.Name = outputVariable.LegendText;
 chart.Series.Add(surface);
 surface.Legend.Mode = SeriesLegendMode.SeriesLogic;
 surface.ValueFormatter = new NNumericValueFormatter("0.0");
 surface.FillMode = SurfaceFillMode.Zone;
 surface.FrameMode = SurfaceFrameMode.Contour;
 surface.ShadingMode = ShadingMode.Flat;
 surface.DrawFlat = true;
 // Already set this property to false and working in other chart.
 surface.InflateMargins = false;                    
 surface.FrameColorMode = SurfaceFrameColorMode.Zone;
 surface.SmoothPalette = true;
 surface.Legend.Format = "<zone_value>";
 surface.FillMode = SurfaceFillMode.Zone;
 surface.FrameMode = SurfaceFrameMode.Contour;
 CreateSurfaceSeries(outputVariable, surface);
 chartControl.Refresh(); 
```

以及 ScaleConfigurator 配置

```
chartPrimaryXAxis = chart.Axis(StandardAxis.PrimaryX);
// X Axis Configuration
dateTimeScale = new NDateTimeScaleConfigurator();
dateTimeScale.Title.Text = string.Empty;
dateTimeScale.LabelStyle.Angle = new NScaleLabelAngle(ScaleLabelAngleMode.Scale, 90);
dateTimeScale.LabelStyle.ContentAlignment = ContentAlignment.MiddleLeft;
dateTimeScale.LabelStyle.TextStyle.FontStyle = new NFontStyle("Times New Roman", 6);
dateTimeScale.LabelFitModes = new LabelFitMode[] { LabelFitMode.AutoScale };
chartPrimaryXAxis.ScaleConfigurator = dateTimeScale;
chartPrimaryXAxis.ScrollBar.ResetButton.Visible = true;
chartPrimaryXAxis.ScrollBar.ShowSliders = true;
dateTimeScale.EnableUnitSensitiveFormatting = true; 
```

这是生成的输出： ![条形图轴外标签](../Images/bd20ed57e8cf8eef0f4e58adb5e247cb.png)

![防止按比例显示上一年和下一年](../Images/a27e5522ec9e09c1f434f6f8591a6d2b.png)

任何有关此问题的想法将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T07:25:39.993

> **如果系列计数增加，系列栏会相互重叠。
> &**
> **系列栏脱离轴线。**

*答：*当您使用分类数据时，请使用`NOrdinalScaleConfigurator`而不是`NDateTimeScaleConfigurator`. 它不会解决问题并将系列栏放在刻度的中心并根据图表大小自动调整它们的大小。

> **X Axis Scale 会自动添加上一年 12 月和明年 1 月的比例，这会导致图表在 Surface Chart 的情况下有空白区域。**

*答：* 将 的以下属性设置`DateTimeScaleConfigurator`为 false 以避免此类行为。

```
 dateTimeScale.RoundToTickMax = false;
 dateTimeScale.RoundToTickMin = false; 
```

# com - 带有 MTA 的进程外 COM 服务器

> ID：10795320
> 
> 赞同：2
> 
> 时间：2012-05-29T08:08:25.653
> 
> 标签：com, atl, mta, apartments

我有一个已创建为自由线程 ( `CComMultiThreadModel`)的 out of proc COM (ATL) 服务器

我对这与重新进入我的对象的调用有何关系感到有些困惑，例如，我假设我将被允许同时从多个客户端调用并同时处理这些请求，但是看起来（根据我的日志）每个请求都被序列化。

我错过了什么，简单地创建一个作为 MTA 的类是否意味着它确实是或者还有其他我必须做的事情。请注意，我在这里指的是多个进程都进行并发调用，而不是单个进程中的线程，因此`COINIT_MULTITHREADED`不是问题。

来自一些关于 MTA 的 MS 文档的片段似乎一切都应该开箱即用：

多个客户端可以同时从不同的线程调用支持自由线程的对象。**在自由线程的进程外服务器中，COM 通过 RPC 子系统在服务器进程中创建一个线程池，并且客户端调用（或多个客户端调用）可以随时由这些线程中的任何一个传递**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T08:26:33.383

我一问就找到了答案，你需要`#define _ATL_FREE_THREADED`在`stdafx.h`

# eclipse - Eclipse：如何列出不受 SVN 版本控制的文件

> ID：10795323
> 
> 赞同：1
> 
> 时间：2012-05-29T08:08:31.060
> 
> 标签：eclipse, svn, version-control

显示文件状态的图标很小，有时我会错过提交时的文件，因为我忘记将其置于版本控制之下。是否有一种简单的方法可以在提交之前列出不受版本控制的项目文件以供使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T08:26:13.237

使用同步到存储库功能，它将向您显示所有传入/传出的更改，包括本地新文件的列表

```
team -> synchronize with repository 
```

# c# - DataGridView 选择更改事件并从数据库中删除选定的行

> ID：10795325
> 
> 赞同：2
> 
> 时间：2012-05-29T08:08:32.547
> 
> 标签：c#, sql, winforms, visual-studio-2010

我的表单上有一个单选按钮、一个网格视图和一个按钮。这是我的`datagridview selection_changed`代码示例：

```
private void DataGridView1_SelectionChanged(object sender, EventArgs e)
{
    if (rdb_Delete.Checked)
    {
        lbl_deleteMsg.Text = DataGridView1.SelectedRows.Count.ToString() 
                + " rows selected.";
    }
 } 
```

当用户按下删除按钮时，我想从数据库中删除选定的行并刷新 datagridview。我的数据库中有一个 Id 列，但我没有在 datagridview 上向用户显示它。

那么通过 sql 查询如何从我的数据库中删除选定的行？这是我的删除按钮单击代码，但它似乎不起作用（因为选择更改事件）：

```
private void btn_Delete_Click(object sender, EventArgs e) 
{       
    if (rdb_Delete.Checked)
    {
        int count = DataGridView1.SelectedRows.Count;
        int length = DataGridView1.RowCount;
        if (!count.Equals(0))
        {
            if (confirm())
            {
                for (int i = 0; i < length; i++)
                {
                    if (DataGridView1.Rows[i].Selected)
                    {
                        //DataGridView1.SelectedRows[i].Selected = false;
                        DataGridView1.Rows.RemoveAt(i);
                        i--;
                    }
                }
            }
        }
    }
} 
```

编辑：在这种情况下，我还找到了一个小答案可能对某人有所帮助。DataGridView 的任何列都可以是**可见的 = false**，因此可以通过以下代码访问它：

```
int rowID = int.Parse(DataGridView1[0, selectedIndex].Value.ToString()); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T08:16:20.137

试试这个：

```
private void btn_Delete_Click(object sender, EventArgs e) 
{       
    if (rdb_Delete.Checked)
    {
        foreach (DataGridViewRow row in DataGridView1.SelectedRows)
        {
            //delete record and then remove from grid. 
            // you can use your own query but not necessary to use rowid
            int selectedIndex = row.Index;         

            // gets the RowID from the first column in the grid
            int rowID = int.Parse(DataGridView1[0, selectedIndex].Value.ToString());
            string sql = "DELETE FROM Table1 WHERE RowID = @RowID";

            // your code for deleting it from the database
            // then your code for refreshing the DataGridView

            DataGridView1.Rows.Remove(row);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T08:15:42.773

1.) 您必须使用双向绑定。2.) 您必须确认更改才能使它们成为非临时性的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T09:52:26.297

私人无效按钮60_Click（对象发送者，EventArgs e）{

```
 foreach (DataGridViewRow row in dataGridView7.SelectedRows)
        {
            dd = row.Cells["date"].Value.ToString();
            ms = row.Cells["month"].Value.ToString();
            day = row.Cells["day"].Value.ToString();
            string txt = row.Cells["descrip"].Value.ToString();
            con.Open();
            SqlCommand cmd = new SqlCommand("delete from holidays where date like '" + dd + "%' and descrip like '"+ txt +"'", con);
            SqlCommand cmd1 = new SqlCommand("delete from stholidays where holiday like '" + dd + "%' and holidescrip like '" + txt + "'", con);
            cmd.ExecuteNonQuery();
            cmd1.ExecuteNonQuery();
            con.Close();
            foreach (DataGridViewCell oneCell in dataGridView7.SelectedCells)
            {

                if (oneCell.Selected)
                    dataGridView7.Rows.RemoveAt(oneCell.RowIndex);

            }
        } 
```

# iphone - 在 Xcode 中设置前置摄像头

> ID：10795327
> 
> 赞同：20
> 
> 时间：2012-05-29T08:08:36.963
> 
> 标签：iphone, ios, camera, avfoundation

在 Xcode 中设置前置摄像头。我怎样才能做到这一点？在 Xcode 中设置前置摄像头。

```
AVCaptureSession *session = [AVCaptureSession new];
if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone)
    [session setSessionPreset:AVCaptureSessionPreset640x480];
else
    [session setSessionPreset:AVCaptureSessionPresetPhoto];

AVCaptureDevice *device = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];
AVCaptureDeviceInput *deviceInput = [AVCaptureDeviceInput deviceInputWithDevice:device error:&error];
require( error == nil, bail );

isUsingFrontFacingCamera = NO;
if ( [session canAddInput:deviceInput] )
    [session addInput:deviceInput];

stillImageOutput = [AVCaptureStillImageOutput new];
[stillImageOutput addObserver:self forKeyPath:@"capturingStillImage" options:NSKeyValueObservingOptionNew context:AVCaptureStillImageIsCapturingStillImageContext];
if ( [session canAddOutput:stillImageOutput] )
    [session addOutput:stillImageOutput]; 
```

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-05-29T08:27:56.243

添加此方法以遍历现有设备检查其位置：

```
- (AVCaptureDevice *)frontCamera {
    NSArray *devices = [AVCaptureDevice devicesWithMediaType:AVMediaTypeVideo];
    for (AVCaptureDevice *device in devices) {
        if ([device position] == AVCaptureDevicePositionFront) {
            return device;
        }
    }
    return nil;
} 
```

然后，替换：

```
AVCaptureDevice *device = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo]; 
```

和：

```
AVCaptureDevice *device = [self frontCamera]; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-08-08T14:47:02.680

由于 iOS 10`devicesWithMediaType:`已弃用。你应该使用`AVCAptureDeviceDiscoverySession`.

```
- (AVCaptureDevice *)frontCamera {    
    return [AVCaptureDeviceDiscoverySession discoverySessionWithDeviceTypes:@[ AVCaptureDeviceTypeBuiltInWideAngleCamera ]
                                                                  mediaType:AVMediaTypeVideo
                                                                   position:AVCaptureDevicePositionFront].devices.firstObject;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-09-23T08:27:58.557

```
**.h file
@interface ViewController : UIViewController<UIImagePickerControllerDelegate,UINavigationControllerDelegate>
.m File
-(IBAction)Btn_Ok:(id)sender
{
 if (![UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera])
            {
                UIAlertView *myAlertView = [[UIAlertView alloc] initWithTitle:@"Error"
                                                                      message:@"Device has no camera"
                                                                     delegate:nil
                                                            cancelButtonTitle:@"OK"
                                                            otherButtonTitles: nil];
                [myAlertView show];
            }
            else
            {
                UIImagePickerController *picker = [[UIImagePickerController alloc] init];
                picker.delegate = self;
                picker.allowsEditing = YES;
                picker.sourceType = UIImagePickerControllerSourceTypeCamera;
                picker.cameraDevice=UIImagePickerControllerCameraDeviceFront;
                [self presentViewController:picker animated:YES completion:NULL];
            }
}
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    UIImage *chosenImage = info[UIImagePickerControllerEditedImage];
    self.yourimg.image = chosenImage;
    [picker dismissViewControllerAnimated:YES completion:NULL];
}
- (void)imagePickerControllerDidCancel:(UIImagePickerController *)picker
{
    [picker dismissViewControllerAnimated:YES completion:NULL];
} 
```

# php - HTACCESS - 限制对多个域/脚本的访问

> ID：10795329
> 
> 赞同：0
> 
> 时间：2012-05-29T08:08:38.927
> 
> 标签：php, security, .htaccess, permissions

好的，我有一个中央媒体目录。这是私人成员文件，我不希望直接访问它。

有 3 或 4 个域访问此成员文件目录。

我将如何锁定目录，以便只有 php 脚本可以从 Web 访问它，并且只能从这 3 个或 4 个域访问它？

有关于锁定到一个域的帖子，以及关于锁定到 php 的帖子，但是我在一组不同的域上找不到任何锁定到 php 的内容。

感谢您的帮助，感谢您的阅读。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T08:13:07.120

> 这是私人成员文件，我不希望直接访问它。

不要放在web根目录下。

> 我将如何锁定目录，以便只有 php 脚本可以从 Web 访问它，并且只能从这 3 个或 4 个域访问它？

无法判断客户端是否使用 PHP 编写。

多亏了虚拟主机，没有办法知道请求的来源是哪个域（因为请求来自 IP 地址，一个 IP 地址可以有多个主机名）。

请改用密码或公钥身份验证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T08:21:31.197

尝试类似的东西

```
<Limit GET>
order deny,allow
deny from all
allow from .domain1.com
allow from .domain2.com
</Limit> 
```

在此处查看更多信息[http://forums.cpanel.net/f5/htaccess-block-domains-not-working-64831.html](http://forums.cpanel.net/f5/htaccess-block-domains-not-working-64831.html)

# javascript - 基于 Ajax 的多个自动完成/自动建议插件

> ID：10795330
> 
> 赞同：0
> 
> 时间：2012-05-29T08:08:42.307
> 
> 标签：javascript, jquery, mootools

我正在尝试找到一些类似的插件，用于此网站搜索框自动建议。 [http://www.propertyfinder.ae/en/buy.html](http://www.propertyfinder.ae/en/buy.html)

第二个自动建议列表基于选择的第一个关键字。我已经知道 mootools 用于它。如果有人知道这样的任何插件，请提供任何建议。您的建议将有很大帮助

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T09:50:36.760

如果您想为 mootools 执行此操作，请尝试以下操作：http: [//mootools.net/forge/p/mootagify](http://mootools.net/forge/p/mootagify)

使用退格绑定的演示：http: [//fragged.org/mooTagify/Demo/](http://fragged.org/mooTagify/Demo/)

标签的自动完成器是内置的。源代码和单元测试（通过 busterjs + syn）在我的 github 页面上 - [https://github.com/DimitarChristoff/mooTagify/](https://github.com/DimitarChristoff/mooTagify/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T08:25:26.330

只需点击链接 [http://aehlke.github.com/tag-it/](http://aehlke.github.com/tag-it/) 你会得到你想要的

# java - 如何在eclipse中为foreach循环使用条件断点？

> ID：10795333
> 
> 赞同：3
> 
> 时间：2012-05-29T08:09:12.287
> 
> 标签：java, eclipse, debugging

我想知道如何在 Eclipse 中使用条件断点。我有一个像这样的代码：

```
for(A a:aList){} 
```

我已经在线上放了一个断点并且我已经设置了条件

```
a.getXxx.equals("yyy") 
```

但日食向我显示一个错误：

```
Conditional breakpoint has compliation error(s).
Reason:
a cannot be resolved 
```

请帮我找出原因。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T08:11:37.637

您必须将断点放置在循环中的第一行，因为在循环的行上还不会知道 a。因此对于

```
List<Object> myObjects = ...;
for (Object obj : myObjects ) {
    obj.doSth();
} 
```

您可以将断点放在“ `obj.doSth();`”行

这实际上是因为对于 foreach 循环，编译器除了调用 Iterator.next(); 之外什么都不做。方法作为循环中的第一条语句（您不会注意到编译器会自动执行它）。看看java规范： [http ://docs.oracle.com/javase/specs/jls/se5.0/html/statements.html#14.14.2](http://docs.oracle.com/javase/specs/jls/se5.0/html/statements.html#14.14.2)

# regex - R：在某个字符之后大写所有内容

> ID：10795334
> 
> 赞同：16
> 
> 时间：2012-05-29T08:09:13.643
> 
> 标签：regex, r, capitalization

我想将第一个之后的字符向量中的所有内容大写`_`。例如以下向量：

```
x <- c("NYC_23df", "BOS_3_rb", "mgh_3_3_f") 
```

应该是这样出来的：

```
"NYC_23DF" "BOS_3_RB" "mgh_3_3_F" 
```

我一直在尝试使用[正则表达式](http://stat.ethz.ch/R-manual/R-devel/library/base/html/grep.html)，但无法做到这一点。任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-29T08:58:23.847

你非常接近：

```
gsub("(_.*)","\\U\\1",x,perl=TRUE) 
```

似乎工作。您只需要使用`_.*`(下划线后跟零个或多个其他字符) 而不是`_*`(零个或多个下划线) ...

把这个分开一点：

*   `_.*`给出一个正则表达式模式，它匹配下划线`_`后跟任意数量（包括 0）的附加字符；`.`表示“任何字符”并`*`表示“前一个元素的零个或多个重复”
*   用括号包围这个正则表达式`()`表示它是我们要存储的模式
*   `\\1`在替换字符串中说“插入第一个匹配模式的内容”，即匹配的任何内容`_.*`
*   `\\U`, 和 , 一起`perl=TRUE`表示“将后面的内容大写”（大写`_`没有效果；如果我们想在（例如）小写 g 之后将所有内容大写，我们需要从存储的模式中排除 g 并包含它在替换模式中`gsub("g(.*)","g\\U\\1",x,perl=TRUE)`：）

`?gsub`有关更多详细信息，请在（以及`?regexp`有关正则表达式的一般信息）中搜索“替换”和“大写”

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-29T09:18:10.110

`gsubfn`在[gsubfn 包](http://gsubfn.googlecode.com)中，`gsub`除了替换字符串可以是一个函数外，其他类似。在这里，我们匹配 _ 以及之后通过匹配的所有内容`toupper`：

```
> library(gsubfn)
>
> gsubfn("_.*", toupper, x)
[1] "NYC_23DF"  "BOS_3_RB"  "mgh_3_3_F" 
```

请注意，这种方法涉及一个特别简单的正则表达式。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-29T08:33:32.153

## 使用简单示例`base::strsplit`

```
x <- c("NYC_23df", "BOS_3_rb", "mgh_3_3_f", "a") 

myCap <- function(x) {
    out <- sapply(x, function(y) {
        temp <- unlist(strsplit(y, "_"))
        out <- temp[1]
        if (length(temp[-1])) {
            out <- paste(temp[1], paste(toupper(temp[-1]), 
                collapse="_"), sep="_") 
        }
        return(out)
    })
    out
}

> myCap(x)
   NYC_23df    BOS_3_rb   mgh_3_3_f           a 
 "NYC_23DF"  "BOS_3_RB" "mgh_3_3_F"         "a" 
```

## 使用[stringr](http://cran.at.r-project.org/web/packages/stringr/index.html)包的示例

```
pkg <- "stringr"
if (!require(pkg, character.only=TRUE)) {
    install.packages(pkg)
    require(pkg, character.only=TRUE)   
}

myCap.2 <- function(x) {
    out <- sapply(x, function(y) {
        idx <- str_locate(y, "_")
        if (!all(is.na(idx[1,]))) {
            str_sub(y, idx[,1], nchar(y)) <- toupper(str_sub(y, idx[,1], nchar(y))) 
        }
        return(y)
    })
    out
}

> myCap.2(x)
   NYC_23df    BOS_3_rb   mgh_3_3_f           a 
 "NYC_23DF"  "BOS_3_RB" "mgh_3_3_F"         "a" 
```

# sql-server - 将 SQL Server 2005 升级到 2008 或者我们可以转到 2012

> ID：10795338
> 
> 赞同：1
> 
> 时间：2012-05-29T08:09:27.510
> 
> 标签：sql-server, upgrade

我们正在运行 SQL Server 2005，我们想要升级实例。

是最好转到 SQL 2008 还是直接跳到 SQL 2012？

推荐什么，我们应该注意什么？

我正在考虑这样做[。](http://msdn.microsoft.com/en-us/library/ms144267.aspx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T08:56:50.397

最新版本通常是最佳选择，但这取决于使用 SQL 服务器的应用程序。（当然硬件和操作系统也应该匹配。）

如果它是您内部开发的应用程序，那么您只需针对最新版本运行所有测试，可选择修复问题并让它运行。

如果它是某个 3rd 方应用程序，那么您需要询问应用程序供应商，哪些 SQL 版本（最好）支持。

如果您正在开发和销售一些基于 SQL Server 的应用程序，那么您必须支持和维护多个版本的服务器（就像我们一样 - 我们支持 SQL2000 到 SQL2008；SQL2012 目前处于测试阶段）。

# android - 我在画布上的 android 游戏中处理电源按钮时遇到问题

> ID：10795341
> 
> 赞同：0
> 
> 时间：2012-05-29T08:09:32.733
> 
> 标签：android

游戏运行完美。但是在玩的时候按电源键就卡住了。线程一直在运行，因为游戏屏幕是打开的，但我的更新方法不起作用。我必须按主页键按钮，解锁手机并恢复我的游戏，然后它才能完美运行。

有谁能够帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T05:32:06.650

我有解决方案..谢谢大家

我在 onPause() 方法中这样做

```
if (_thread != null) 
{
   _thread.setRunning(false);
} 
```

和 onResume() 方法

我在做这个 _thread.setRunning(true)

我刚刚在 onPause 方法中注释了 setRunning(false)，现在它工作正常。

# eclipse - eclipse 配置文件 - 使用变量链接源目录

> ID：10795342
> 
> 赞同：0
> 
> 时间：2012-05-29T08:09:37.990
> 
> 标签：eclipse

当您在 Eclipse 中添加文件夹时，`link a source directory`我们可以使用变量。我需要知道这些变量及其值的存储位置。它在配置文件中吗？

我按照下面的，去了eclipse，（java）项目属性，然后是java构建路径。

现在我单击链接源并添加了一个变量-比如说`top_root`并指向一个位置说-`c:\temp`

我用它来链接源目录。此信息可在`.project`文件中找到。

我需要知道，将在哪个文件`test=c:\temp`中配置/可用。

```
<link>
   <name>java</name>
   <type>2</type>
   <locationURI>top_root/src/java</locationURI>
</link> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T15:33:36.540

`eclipse-3.5.2\workspace\\.metadata\\.plugins\org.eclipse.core.runtime\\.settings\org.eclipse.core.resources.prefs`

配置可用，在上面的文件夹中，这个文件**`org.eclipse.core.resources.prefs`**

`pathvariable.top_root=C\:/temp`

搜索所有***首选项***文件

# objective-c - NSStream 处理事件给出状态 4

> ID：10795344
> 
> 赞同：4
> 
> 时间：2012-05-29T08:09:44.917
> 
> 标签：objective-c, ios, tcp, nsstream

我正在尝试使用 TCP 连接应用程序，并且在 handleEvent 上得到一个 NSStreamEvent“4”。我究竟做错了什么？

我的代码就像，

```
-(void) initNetworkCommunication {

CFReadStreamRef readStream;
CFWriteStreamRef writeStream;
CFStreamCreatePairWithSocketToHost(NULL, (CFStringRef)@"localhost", 80, &readStream, &writeStream);

inputStream = (__bridge_transfer NSInputStream *)readStream;
outputStream = (__bridge_transfer NSOutputStream *)writeStream;
[inputStream setDelegate:self];
[outputStream setDelegate:self];
[inputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
[outputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
[inputStream open];
[outputStream open];

}

- (IBAction)didTapButton:(id)sender {

NSString *response  = inputTextField.text;
NSLog(@"%@", response);
NSData *data = [[NSData alloc] initWithData:[response dataUsingEncoding:NSASCIIStringEncoding]];
[outputStream write:[data bytes] maxLength:[data length]];
}

 - (void)stream:(NSStream *)theStream handleEvent:(NSStreamEvent)streamEvent {

  switch (streamEvent) {

    case NSStreamEventOpenCompleted:
        NSLog(@"Stream opened");
        break;

    case NSStreamEventHasBytesAvailable:
        NSLog(@"Stream has bytes available");

        break;          

    case NSStreamEventErrorOccurred:
        NSLog(@"Can not connect to the host!");
        break;

    case NSStreamEventEndEncountered:
        NSLog(@"Stream closed");

        break;

    default:

        NSLog(@"Unknown event: %@ : %d", theStream, streamEvent);
    }

  } 
```

控制台给出，

```
2012-05-29 13:37:07.132 GestureTrial[24289:f803] Stream opened
2012-05-29 13:37:07.133 GestureTrial[24289:f803] Stream opened
2012-05-29 13:37:07.133 GestureTrial[24289:f803] Unknown event: <__NSCFOutputStream: 0x6b85c70> : 4 
```

当试图向服务器发送消息时。我使用 Mac 的 tcp 测试器应用程序进行了尝试，它工作正常，所以可能不是防火墙问题。设备和模拟器的输出相同。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-29T09:34:42.327

其实你没有做错什么。

此事件（它是`NSStreamEventHasSpaceAvailable`）通常在写入流之后发生，告诉您流已准备好再次写入并且在打开可写流之后。请参阅[NSStream 类参考](http://developer.apple.com/library/ios/#DOCUMENTATION/Cocoa/Reference/Foundation/Classes/NSStream_Class/Reference/Reference.html)，或者更准确地说：[流事件常量](http://developer.apple.com/library/ios/DOCUMENTATION/Cocoa/Reference/Foundation/Classes/NSStream_Class/Reference/Reference.html#//apple_ref/doc/uid/20001981-SW1)。

如果您不熟悉`<<`运算符，则意味着将位向左移动 n 个位置（每个移位等于乘以 2）。翻译将是：

```
typedef enum {
   NSStreamEventNone = 0,
   NSStreamEventOpenCompleted = 1,
   NSStreamEventHasBytesAvailable = 2,
   NSStreamEventHasSpaceAvailable = 4,
   NSStreamEventErrorOccurred = 8,
   NSStreamEventEndEncountered = 16
}; 
```

在许多应用程序中，您会看到此事件被忽略（未处理），因为它通常在写入流后很快发生。如果出现问题，你会得到`NSStreamEventErrorOccurred`或者`NSStreamEventEndEncountered`这些是你需要处理的。您可以将`NSStreamEventHasSpaceAvailable`其用作可以发送更多数据的标志。

您还应该知道两个流（inputStream 和 outputStream）都在调用相同的委托方法。这就是为什么你`NSStreamEventOpenCompleted`开始有两个事件。但同样在许多情况下，这不应该是一个问题。如果需要，您始终可以检查哪个流是事件的发起者。

# jquery - 复选框更改时jQuery重新验证文本字段

> ID：10795346
> 
> 赞同：4
> 
> 时间：2012-05-29T08:10:05.910
> 
> 标签：jquery, jquery-plugins, jquery-validate

我有一个包含以下两个 HTML 元素的表单：

```
<input type="text" name="vrm" id="vrm" size="15" maxlength="15" value="" />
<input type="checkbox" id="foreign_registration" name="foreign_registration" value="yes" /> 
```

以及以下 jQuery 验证规则（使用此处的验证插件：http: [//bassistance.de/jquery-plugins/jquery-plugin-validation/](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)）：

```
vrm: {
       remote: {
            url: "/json/vrm-validate.php",
            data: {
              foreign_registration: function() {
                return $('#foreign_registration').is(':checked');
              }
            }
          }
        } 
```

远程脚本依赖于这两个字段，因为对文本字段执行的验证取决于是否检查了外国注册。

问题是，如果我在文本字段中输入内容然后更改复选框，验证规则不会重新运行。我认为这是因为验证规则仅附加到文本字段，因此它只会在更改时运行。

有没有办法说'这两个元素是相关的，所以如果它们中的任何一个发生变化，都假设应该再次检查文本字段规则'？我不想在复选框上附加任何验证规则，因为它不需要在客户端进行验证，并且远程脚本执行的验证规则过于复杂，无法在 jQuery 中实现。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-03-22T14:48:26.410

我通过电子邮件发送的另一个答案是：

> isOI 是我的复选框，Item 是我的文本框，单击复选框时我需要重新验证。

```
$("#isOI").change(function () {
  var item = $("#Item");
  item.data("previousValue", null).valid();
}); 
```

显然，现有的答案对这个人不起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T08:58:39.773

您可以在更改复选框时调用验证功能

```
$(':checkbox').change(function(){
    $('form').validate();
}); 
```

# activemq - activemq 代理名称

> ID：10795351
> 
> 赞同：0
> 
> 时间：2012-05-29T08:10:35.170
> 
> 标签：activemq

我正在尝试构建一个通用的 activemq 命令行来作为监控工具。它使用 JMX 连接来获取信息。要获取信息，我需要在 ObjectName 构造函数中使用代理名称。(例如 ObjectName activeMQ = new ObjectName("org.apache.activemq:BrokerName=localhost,Type=Queue,Destination=" + queueName);)

如果代理名称未知，我将无法运行它。

有没有办法以编程方式确定 activemq 代理名称？

谢谢和问候， Arijit Bose

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T12:49:58.507

您可以在 JMS 查询中使用通配符来获取所有代理，然后从那里开始。

# .net - WPF和Winforms在.NET框架中的地位

> ID：10795352
> 
> 赞同：0
> 
> 时间：2012-05-29T08:10:45.993
> 
> 标签：.net, wpf, winforms

这是一个简单的问题，但我似乎无法正确表述。

WPF 和 WinForms 如何在 .NET 框架中“定位”？

我的意思是，WPF 是 .NET 框架的子系统，而 WinForms 是图形 API，但谁能向我解释它们到底有什么不同？我知道 API 的含义和用途，但 WPF 作为子系统让我有点困惑。是否有视觉帮助可以澄清这一点。

我也明白 WinForms 和 WPF 都是创建图形应用程序的方法。

我希望我是有道理的...

我的信息来自： [http ://en.wikipedia.org/wiki/Windows_Presentation_Foundation](http://en.wikipedia.org/wiki/Windows_Presentation_Foundation)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T08:25:29.910

我不确定你从哪里得到这个“WPF 是 .NET 框架的子系统”，但起初我会说不。WPF 和 Windows 窗体都是使用托管语言构建图形应用程序的框架。虽然 winforms 或多或少是对 winapi 的封装，但通过事件等 .net 功能进行了增强；WPF 只是 win api 的包装器，直到到达窗口，从那时起，一切都使用加速硬件完成，这提供了更大的灵活性，例如使用矢量图形，内置对动画的支持。使用这两种 api 的方式也完全不同，例如在 WPF 中使用 XAML（不是必需的，但更好）来表达 ui 的外观、控件的组成方式等。同样在 WPF 中，控件的设计不是固定并且可以完全改变。这是通过很好地将逻辑与外观分开来完成的。现在，仅查看 WPF 带来的一些基本工具（例如依赖项属性）时，我就可以理解 .net 部分的子系统，但是我再次认为，如果不将 WPF 也用作 api，您不会那么多地使用 WPF用于创建图形应用程序。也就是说，当然可以将两个 Windows 窗体和 WPF 相互混合。

tl:dr：两者都是用于创建丰富的图形应用程序的 api，但具有完全不同的设计理念和不同的实现目标的方法。

# objective-c - 正确使用 NSURLConnection

> ID：10795357
> 
> 赞同：0
> 
> 时间：2012-05-29T08:11:09.127
> 
> 标签：objective-c, ios, nsurlconnection

使用 NSURLConnection 时，我可以在实例化它的方法结束时释放它吗？

```
NSURLConnection* connection = [[NSURLConnection alloc] initWithRequest:request delegate:self];
...
...
[connection release]; 
```

然后它继续异步过程，还是我需要保留它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T08:15:33.867

完成后需要释放连接对象。

`NSURLConnection`在委托方法中释放它-

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection

-(void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T10:31:54.120

最好的方法是使用 connectionWithRequest:Delegate: 以便它自动释放。

但是，您还应该保留指向您的 NSURLConnection 的指针，直到连接结束才有机会取消委托。否则，如果您的连接没有返回但您的委托在被连接调用之前被释放，它将崩溃。（你会得到错误：消息发送到已释放的实例）

所以最好的办法是保留一个指向你的 NSURLConnection 的指针，并在连接返回时将指针设置为 nil 。所以在 ConnectionDidFinishLoading

```
connection = nil; 
```

现在，如果委托被解除分配，您可以在 dealloc 方法中放置一些东西，如果您的委托是 viewController，则可以在 viewDidUnload 中放置一些东西

```
if (connection != nil) connection.delegate = nil; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T08:20:26.003

您应该通过“分配”来保持连接，原因是：您需要管理连接，例如：取消它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T08:28:13.097

我真的建议您尽可能使用便利分配器。您返回的对象是自动释放的意思（简单来说）您不必担心手动释放或保留。要使用经验法则回答您的问题：使用

```
connectionWithRequest:delegate: 
```

你可以走了。

# tridion - 无法在 Tridion 2009 中删除结构组

> ID：10795360
> 
> 赞同：6
> 
> 时间：2012-05-29T08:11:25.793
> 
> 标签：tridion, tridion2009

这是（受限）Tridion 论坛中关于[无法删除结构组](https://forum.sdltridion.com/topic.asp?TOPIC_ID=7008&SearchTerms=unable,delete,structure,group)的问题的重复。但是，由于报告问题的人没有得到正确的答案或解决方案，所以我在这里重新提出。

我被一个结构组困住了，我也无法删除它。它没有本地化，仅蓝图到另一个出版物，并且其中没有任何页面。内容已从演示环境迁移，可能是某个旧目标卡在某个地方？

直接在数据库中删除它不是一种选择。还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T11:38:03.537

您有可能使用该结构组呈现多媒体组件吗？这可能会导致某种锁定。您可以尝试更改 2009 年的 Set Publish States PowerTool 以将该 pub 中的所有内容设置为 UnPublished，看看是否有帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T20:23:22.870

蛮力：启动数据库跟踪，尝试通过 GUI 删除结构组，在检查依赖项时查找它找到的项目。

或者

打开支持票，将数据库发送给他们，让他们看一下。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T08:58:42.993

我们在客户那里遇到了类似的问题。我们最初的分析是检查执行删除的存储过程，并查看强制执行了哪些约束。在检查数据时，我们可以看到不会出现在用户界面中但会阻止删除的记录。

我们向 SDL Tridion 客户支持提出了请求，并且能够与他们达成一致，应该在数据库中修改哪些记录。

因此，这就是其中的要点：不允许您修改数据库，但 SDL Tridion 客户支持可以批准它，但前提是他们检查了更改是否正确且必要。显然，如果您在没有支持的情况下尝试做这些事情，您最终会得到一个不受支持的系统。

# html - css 中字体大小

> ID：10795361
> 
> 赞同：6
> 
> 时间：2012-05-29T08:11:27.003
> 
> 标签：html, css, font-size

`font-size` *中/小/大*如何在 css 中工作？如果css有a `font-size:11px`，那么`font-size:medium`其他元素是什么，它取决于字体大小，还是与字体大小无关？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T08:17:28.223

从[规范](http://www.w3.org/TR/CSS21/fonts.html#font-size-props)：

> <absolute-size> 关键字是 UA 计算并保存的字体大小表的索引。

和

> 'medium' 值是**用户的首选字体大小**，用作参考中间值。

所以它不依赖于正文字体大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T08:18:09.047

我相信这是基于用户在浏览器中的首选字体大小，可能设置为 11 或 12。

更多信息请参见此处[CSS 'font-size: medium' 是否将字体设置为 .Body 字体大小或 *browser* 的基本字体大小？](https://stackoverflow.com/questions/94241/does-the-css-font-size-medium-set-font-to-body-font-size-or-to-the-browser)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-29T08:17:26.810

如果我正确理解您的问题，正文中的字体大小是您整个网站的字体大小。

您可以轻松地为其他元素、类或 ID 设置不同的字体大小

```
p { 
  font-size: medium;
}

h1 {
  font-size: large;
}

#leftBox { 
   font-size: 12px; 
} 
```

虽然我永远不会使用静态值。我总是使用 px 值。

更多信息：[http ://www.w3schools.com/cssref/pr_font_font-size.asp](http://www.w3schools.com/cssref/pr_font_font-size.asp)

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-05-29T08:18:52.667

在你的 CSS 中使用 em。您必须使用 px 设置正文的字体大小，然后所有包含的元素都应使用 em 设置字体大小。

# zos - 如何找到 GCR LDAP 服务器管理员 ID 以在 z/OS 上配置 Enterprise Workload Manager？

> ID：10795363
> 
> 赞同：1
> 
> 时间：2012-05-29T08:11:44.833
> 
> 标签：zos

如何找到 GCR LDAP 服务器管理员 ID 以在 z/OS 上配置 Enterprise Workload Manager？

我正在寻找全局配置存储库 (GCR) LDAP 服务器管理 ID 的值，以在 z/OS 上配置企业工作负载管理器。这是关于一个参数，用于输入“installEWLM”命令。有人有全局配置存储库 (GCR) LDAP 服务器管理 ID 的示例吗？在搜索时，我刚刚发现，在另一种情况下，LDAP 用户使用“cn=root”。

我正在使用手册[http://publib.boulder.ibm.com/infocenter/eserver/v1r2/index.jsp?topic=%2Fewlminfo%2Feicaainstallewlmzos.htm](http://publib.boulder.ibm.com/infocenter/eserver/v1r2/index.jsp?topic=/ewlminfo/eicaainstallewlmzos.htm)（第 169 页需要 GCR）。

谢谢！

# c# - Castle WCF 设施容器配置

> ID：10795365
> 
> 赞同：0
> 
> 时间：2012-05-29T08:11:50.997
> 
> 标签：c#, wpf, wcf, castle-windsor

我在使用 Castle Windsor 提供的 WCF 设施时遇到了真正的麻烦。我没有找到合适的文档来指出当前版本的 WCF Facility 的一些示例。

以下是我的场景：我想编写一个 WCF 服务，通过 TCP 公开，该服务将由 Windows 服务托管。

我不知道如何配置 WCF 工具，在哪里配置它是否应该在 WCF 服务或 Windows 服务主机中。

另外，当我的服务端点在 WCF 配置文件中声明时，我将如何配置 WCF 工具？

有人可以帮忙吗？一个链接将不胜感激，虽然我找不到太多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T09:26:49.430

这是设置（人为的）服务的示例/演练。

对于我的示例，有一个服务合同 WindsorWCF.IMyService 和一个名为 WindsorWCF.MyService 的服务。我选择在应用程序配置中使用 TCP 端点配置服务，如下所示：

```
<system.serviceModel>
  <services>
    <service name="WindsorWCF.MyService">
      <endpoint name ="IMyService_Endpoint" address="net.tcp://localhost:9876/MyService" binding="netTcpBinding" contract="WindsorWCF.IMyService" />
    </service>
  </services>
</system.serviceModel> 
```

接下来，将一个 Window 配置 (XML) 文件添加到您的服务项目，并向其中添加一个组件：

```
<configuration>
  <components>
    <component id="MyService" service="WindsorWCF.IMyService, WindsorWCF" type="WindsorWCF.MyService, WindsorWCF" />
  </components>
</configuration> 
```

在服务宿主应用程序本身中，我添加了以下代码（我在编写代码时使用了控制台应用程序，但思路是一样的）：

```
static void Main(string[] args)
{
    InitWindsor();
    var host = new DefaultServiceHostFactory().CreateServiceHost("MyService", new Uri[0]);
    host.Open();
    Console.ReadLine();
}

static IWindsorContainer Container { get; set; }
private static void InitWindsor ()
{
    Container = new WindsorContainer().AddFacility<WcfFacility>().Install(Configuration.FromXmlFile("windsor.config"));
} 
```

这就是示例 - 我相信它是有道理的。

# c++ - 什么是 C++ 64 位应用程序的单元测试工具？

> ID：10795371
> 
> 赞同：0
> 
> 时间：2012-05-29T08:12:40.250
> 
> 标签：c++, windows, visual-studio, unit-testing

任何人都可以向我推荐任何用于 64 位应用程序的 C++ 代码的单元测试工具吗？操作系统：Windows 7 编译器：Visual Studio 2010 类型：64 位

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T08:18:01.377

我认为[GoogleTest](http://code.google.com/p/googletest/)完全支持 64 位构建。有关如何构建正确版本的信息，请参阅常见问题解答的此[链接。](http://code.google.com/p/googletest/wiki/FAQ#How_do_I_generate_64-bit_binaries_on_Windows_%28using_Visual_Studi)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T08:34:31.137

任何可移植库都适用于 64 位（32 位对所有操作系统并不意味着相同的东西，64 位更不用说）。

众所周知的 C++ 单元测试库是[Boost.Test](http://www.boost.org/)、[UnitTest++](http://unittest-cpp.sourceforge.net/)（轻量级）或[CppUnit](http://apps.sourceforge.net/mediawiki/cppunit/)。

# c++ - 消息循环在这个程序中的作用？还有几个问题

> ID：10795373
> 
> 赞同：0
> 
> 时间：2012-05-29T08:13:02.263
> 
> 标签：c++, winapi, hook, message-loop

以下代码工作正常。当用户按下一个键时，它会发出消息。但有些事情我不知道。[消息循环在这里](https://en.wikipedia.org/wiki/Message_loop_in_Microsoft_Windows)的作用是什么？我读到调用会在窗口中`SetWindowsHookEx(...)`注册一个函数，当注册类型的事件发生时，窗口会自动调用相应的函数。毫无疑问，如果不给消息循环它的空间，我看不到输出。

```
#include<iostream>
#include <windows.h>
using namespace std;

HINSTANCE hinst = NULL;
static HHOOK handleKeyboardHook = NULL;
static LRESULT CALLBACK LowLevelKeyboardProc(int nCode, WPARAM wParam, LPARAM lParam);

void setWinHook() {
  handleKeyboardHook = SetWindowsHookEx(WH_KEYBOARD_LL, LowLevelKeyboardProc,NULL, 0);
if(handleKeyboardHook == NULL) {
    cout << "is NULL";
} else {
    cout << "is not NULL";
}
  cout<<("Inside function setWinHook !");
}

static LRESULT CALLBACK LowLevelKeyboardProc(int nCode, WPARAM wParam, LPARAM lParam) {
 cout << ("You pressed a key !\n");
  return CallNextHookEx(handleKeyboardHook, nCode, wParam, lParam);
}

int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int nCmdShow)
{
 handleKeyboardHook = SetWindowsHookEx(WH_KEYBOARD_LL, LowLevelKeyboardProc, hInstance, 0);
 MSG msg;
 while(GetMessage(&msg, NULL, 0, 0))
 {
   TranslateMessage(&msg);
   DispatchMessage(&msg);
 }
 return msg.wParam;
} 
```

***编辑***

退出程序*（关闭控制台窗口）*是否取消注册钩子？

***编辑 2***

[Dispatch Message](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644934%28v=vs.85%29.aspx)在这里起什么作用？根据文档，它会向窗口过程发送一条消息，但即使我排除了它，它也不会影响输出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T08:20:59.360

Windows 中的所有事件，甚至是您的示例中使用的低级键盘事件，都是使用普通消息事件发送的。因此，为了让程序能够感知键盘事件，它必须使用事件循环来处理消息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T08:22:17.073

如果没有循环，程序将立即退出，并且钩子也会立即被移除。你不能注册一个钩子并退出——如果有缺陷的程序在它们之后留下太多被遗忘的钩子，系统就会变得一团糟。一旦你的进程终止，钩子就会被安排删除。

我不记得低级键盘钩子了，但是许多其他钩子的回调只在`GetMessage`/内部调用`PeekMessage`，而不是在其他线程上调用，所以仅仅一个无限循环是不够的——它必须是一个消息循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T11:52:03.480

“Dispatch Message 在这里扮演什么角色？根据文档，它向窗口过程发送消息，但在这里即使我排除它，它也不会影响输出。”

DispatchMessage 非常没用，因为控制台窗口没有收到太多消息。只有当窗口失去焦点时才会收到消息。

# javascript - 如何在主干或余烬或简单 jQuery AJAX 调用的任何 javascript MVC 框架中编写等效项，以便我可以对其进行单元测试

> ID：10795384
> 
> 赞同：0
> 
> 时间：2012-05-29T08:13:33.537
> 
> 标签：javascript, jquery, unit-testing, backbone.js, ember.js

我需要重构我正在开发的 wordpress 插件的整个 javascript 代码库，以便我可以对其运行单元测试，并且我正在寻找一个开始的地方。我知道我需要开始使用 MVC 框架来正确地进行单元测试，并且我想要一点“启动”。假设我有一个非常基本的 jQuery AJAX 调用，你将如何在 MVC 框架中编写相同的代码以便它可以进行单元测试？

```
// Refreshes the multiselect with data from facebook.
$( '.ai1ec-facebook-refresh-multiselect' ).click( function( e ) {
    e.preventDefault();
    // Find the spinner and show it
    $( this ).closest( '.ai1ec-facebook-multiselect-title-wrapper' )
             .find( '.ajax-loading' )
             .css( 'visibility', 'visible' );
    var type = $( this ).closest( '.ai1ec-facebook-multiselect-container' ).data( 'type' );
    var that = this;
    var data = {
            "action"     : 'ai1ec_refresh_facebook_objects',
            "ai1ec_type" : type
        }
    $.post( 
        ajaxurl, 
        data,
        function( response ) {
            $( that ).closest( '.ai1ec-facebook-multiselect-title-wrapper' )
                     .find( '.ajax-loading' )
                     .css( 'visibility', 'hidden' );
            if ( response.errors === true ) {
                var alert = AI1EC_UTILS.make_alert( response.error_messages.join( '<br/>'), 'error' );
                $( '#alerts' ).append( $alert );
                return;
            }
            $( ' .ai1ec-facebook-multiselect-container[data-type=' + type + '] .ai1ec-facebook-multiselect ').replaceWith( response.html );
            var $ok_alert = AI1EC_UTILS.make_alert( response.message, 'success' );
            $( '#alerts' ).append( $ok_alert );
        },
        'json'
    );
} ); 
```

任何 javascript MVC 示例都是完美的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T11:48:17.470

*使用 MVC 框架和拥有可测试*的代码之间没有任何关联。

也没有理由认为基于非 MVC 框架的代码不能非常*可测试*。

完全有可能将所有这些代码移动到 MVC 实现中，并得到与这个一样繁琐的测试结果。

我在您向我们展示的示例代码中看到的问题是它缺乏*模块化*。我不是很*虔诚*，但也许我们可以在这里谈谈*单一责任*。

我在这里推荐的是为那里的所有逻辑创建隔离的方法，组织它们，将它们放入 Class 或 Utils 模块中，然后您将看到在隔离和协作中测试它们是多么容易。

一旦实现了这一点，您就可以迁移到 MVC 或不迁移，但这只是因为代码的*可测试性*，这不是原因。

# android - android处理JSONArray和解析

> ID：10795385
> 
> 赞同：0
> 
> 时间：2012-05-29T08:13:35.807
> 
> 标签：android, parsing, arrays

嗨朋友们如何处理单个 JSON 数组，我有一个包含 set 和 getURL 方法的数据类。简单的 json 数组是：

```
"tril" [
         "http://www.youtube.com/watch?v=hsTOC-wD-mk&feature=g-logo"
         "http://www.youtube.com/watch?v=cHhZwvdRR5c&feature=related"
         "http://www.youtube.com/watch?v=l4QWxw655z0&feature=related"
       ] 
```

我的代码是：

```
JSONArray trailerArray = innerJson.getJSONArray(Constant.tril);
for(int i = 0; i < trailerArray.length(); i++) {
    String videoUrl = Constant.VIDEO_URL+trailerArray.getString(i);
    similarData.setMov_trail(videoUrl);
} 
```

类似的数据是我的数据类，我无法获得所有三个视频。我只得到最后一个视频网址如何处理这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T08:16:49.473

JSON数组的格式不正确，应该是：

```
{
    "tril" :
    [
         "http://www.youtube.com/watch?v=hsTOC-wD-mk&feature=g-logo",
         "http://www.youtube.com/watch?v=cHhZwvdRR5c&feature=related",
         "http://www.youtube.com/watch?v=l4QWxw655z0&feature=related",
    ]
} 
```

# perl - 如何使用“子程序引用”作为哈希键

> ID：10795386
> 
> 赞同：2
> 
> 时间：2012-05-29T08:13:36.760
> 
> 标签：perl, hash, reference, subroutine, dereference

在 Perl 中，我正在学习如何取消引用“子例程引用”。但我似乎无法将子例程引用用作哈希“键”。

在以下示例代码中，

1.  我可以创建对子例程 ($subref) 的引用，然后取消引用它以运行子例程 (&$subref)
2.  我可以将引用用作哈希“值”，然后轻松取消引用
3.  但我无法弄清楚如何将引用用作哈希“键”。当我从散列中取出密钥时，Perl 将密钥解释为字符串值（不是引用）——我现在[明白](https://stackoverflow.com/a/3084482/1306717)了（感谢这个网站！）。所以我尝试了 Hash::MultiKey，但这似乎把它变成了一个数组引用。我想把它当作一个子程序/代码参考，假设这是可能的？

还有其他想法吗？

```
use strict;
#use diagnostics;
use Hash::MultiKey;    

my $subref = \&hello;

#1: 
&$subref('bob','sue');               #okay

#2:
my %hash;
$hash{'sayhi'}=$subref;
&{$hash{'sayhi'}}('bob','sue');      #okay

#3: 
my %hash2;
tie %hash2, 'Hash::MultiKey';
$hash2{$subref}=1;
foreach my $key (keys %hash2) {
  print "Ref type is: ". ref($key)."\n";
  &{$key}('bob','sue');              # Not okay 
}

sub hello {
    my $name=shift;
    my $name2=shift;
    print "hello $name and $name2\n";
} 
```

这是返回的内容：

```
hello bob and sue
hello bob and sue
Ref type is: ARRAY
Not a CODE reference at d:\temp\test.pl line 21. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T09:02:35.957

没错，普通的哈希键只是一个字符串。不是字符串的东西会被强制转换为它们的字符串表示。

```
my $coderef = sub { my ($name, $name2) = @_; say "hello $name and $name2"; };
my %hash2 = ( $coderef => 1, );
print keys %hash2;  # 'CODE(0x8d2280)' 
```

[Tie](http://p3rl.org/perltie) ing 是修改该行为的常用方法，但[Hash::MultiKey](http://p3rl.org/Hash%3a%3aMultiKey)对您没有帮助，它有不同的目的：顾名思义，您可能有多个键，但同样只有简单的字符串：

```
use Hash::MultiKey qw();
tie my %hash2, 'Hash::MultiKey';
$hash2{ [$coderef] } = 1;
foreach my $key (keys %hash2) {
    say 'Ref of the key is: ' . ref($key);
    say 'Ref of the list elements produced by array-dereferencing the key are:';
    say ref($_) for @{ $key }; # no output, i.e. simple strings
    say 'List elements produced by array-dereferencing the key are:';
    say $_ for @{ $key }; # 'CODE(0x8d27f0)'
} 
```

相反，使用[Tie::RefHash](http://p3rl.org/Tie%3a%3aRefHash)。（代码评论：更喜欢这种带有`->`箭头的语法来取消引用 coderef。）

```
use 5.010;
use strict;
use warnings FATAL => 'all';
use Tie::RefHash qw();

my $coderef = sub {
    my ($name, $name2) = @_;
    say "hello $name and $name2";
};

$coderef->(qw(bob sue));

my %hash = (sayhi => $coderef);
$hash{sayhi}->(qw(bob sue));

tie my %hash2, 'Tie::RefHash';
%hash2 = ($coderef => 1);
foreach my $key (keys %hash2) {
    say 'Ref of the key is: ' . ref($key);   # 'CODE'
    $key->(qw(bob sue));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T08:39:43.753

从[perlfaq4](http://perldoc.perl.org/perlfaq4.html)：

> [如何使用引用作为哈希键？](http://perldoc.perl.org/perlfaq4.html#How-can-I-use-a-reference-as-a-hash-key%3f)
> 
> （由 brian d foy 和 Ben Morrow 提供）
> 
> 哈希键是字符串，因此您不能真正使用引用作为键。当您尝试这样做时，perl 会将引用转换为其字符串形式（例如， HASH(0xDEADBEEF) ）。从那里你不能从字符串化的表单中取回引用，至少你自己没有做一些额外的工作。
> 
> 请记住，即使引用的变量超出范围，散列中的条目仍然存在，并且 Perl 完全有可能随后在同一地址分配不同的变量。这意味着新变量可能会意外地与旧变量的值相关联。
> 
> 如果您有 Perl 5.10 或更高版本，并且您只想针对引用存储一个值以供以后查找，您可以使用核心 Hash::Util::Fieldhash 模块。如果您使用多个线程（这会导致所有变量在新地址重新分配，更改它们的字符串化），这也将处理重命名键，并在引用的变量超出范围时垃圾收集条目。
> 
> 如果您确实需要能够从每个哈希条目中获取真正的引用，您可以使用 Tie::RefHash 模块，它会为您完成所需的工作。

所以看起来[Tie::RefHash](https://metacpan.org/module/Tie%3a%3aRefHash)会做你想做的事。但老实说，我不认为你想做的是一个特别好的主意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T08:38:47.460

你为什么需要它？如果您需要将参数存储到散列中的函数，您可以使用 HoH：

```
my %hash;
$hash{$subref} = { sub => $subref,
                   arg => [qw/bob sue/],
                 };
foreach my $key (keys %hash) {
    print "$key: ref type is: " . ref($key) . "\n";
    $hash{$key}{sub}->( @{ $hash{$key}{arg} } );
} 
```

但是，无论如何，您可能仍然可以选择更好的密钥。

# android - Android MediaPlayer 错误：来自互联网的流媒体播放器错误（1，-2147483648）

> ID：10795388
> 
> 赞同：4
> 
> 时间：2012-05-29T08:13:48.583
> 
> 标签：android, stream, mp3, media-player

我正在尝试从 URL 流式传输音频。该代码适用于其他 URL，但在其中一个 URL 中它在`OnPrepared`方法中失败，返回此错误代码：(1, -2147483648)。我读过一些人说这是因为权限，但它是一个远程文件，所以我无法设置权限。我已经尝试过使用其他应用程序（如 VLC 和 iTunes）的 URL，它工作正常。我的代码在这里：

```
private void prepareradio() {
    player = new MediaPlayer();
    player.setAudioStreamType(MODE_WORLD_READABLE);
    try {
        player.setDataSource(url);

    } catch (IllegalArgumentException e) {
        e.printStackTrace();
    } catch (IllegalStateException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    player.setOnErrorListener(new OnErrorListener(){
        public boolean onError(MediaPlayer arg0, int arg1, int arg2) {
            Toast.makeText(getApplicationContext(),"An error happened while preparing radio",Toast.LENGTH_LONG).show();
            prepareradio();
            playe.setEnabled(true);
            hidenot();
            return false;
        }
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-22T10:02:17.973

我在 Froyo & Gingerbread 上也遇到了同样的错误。在更高级别的 Android 中，相同的视频播放效果很好。最后经过大量研究，尝试将 Https Url 更改为 Http Url & Bingo。它解决了我的问题。我使用的是亚马逊 S3 服务器，因此只需将 url 中的“https”替换为“http”就足够了。

```
 videoUrl= videoUrl.replaceFirst("https", "http"); 
```

PS：为了支持旧版本，如果您使用 H.264，请确保视频是基线编码的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T10:16:29.180

如果您在 Android 3.1 之前的设备上进行测试，您可能无法播放 AACP（如您的流 (AAC+) 流的信息页面所示）。

您的信息流的信息页面：
![在此处输入图像描述](../Images/3761d3ae83c5ac8bbc09fd2015b64013.png)

为了找出您可以在目标设备上播放哪些流，请查看官方文档：http: [//developer.android.com/reference/android/media/AudioManager.html](http://developer.android.com/reference/android/media/AudioManager.html)

如果您正在寻找如何处理 aacp 结帐，请执行以下操作：
[https ://stackoverflow.com/a/8833346/200272](https://stackoverflow.com/a/8833346/200272)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T09:02:18.397

如我所见，mediaPlayer 不支持此流。Android 支持 AAC LC/LTP，但您的流是 aacp。我认为这可能是您问题的根本原因。

# javascript - 模拟 chrome/firefox 浏览器（用于 javascript 测试）

> ID：10795389
> 
> 赞同：1
> 
> 时间：2012-05-29T08:13:51.803
> 
> 标签：javascript

在 linux 中使用命令行，我如何调用网页并获取其模拟 chrome 或 firefox 浏览器的内容。我还需要浏览器支持 javascript，以便输出准确的最终 html。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T08:56:10.283

经过一番搜索，我将使用 phantomjs，[http ://phantomjs.org/](http://phantomjs.org/)

# asp.net - 使用 linq.IQueryable 删除多行？

> ID：10795392
> 
> 赞同：1
> 
> 时间：2012-05-29T08:14:18.537
> 
> 标签：asp.net, linq, entity

使用以下条件删除多行 ، 但是错误..

```
 Melks = Ent.Tbl_Melk.Where(d => d.Mantaghe == Mantaghe && d.Hoze == Hoze && d.Block == Block && d.Melk == Melk).All();
        Ent.DeleteObject(Melks);
        int r = Ent.SaveChanges();
        if (r > 0)
        {
            return true;
        }
        else
        {
            return false;
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T08:38:29.003

查看您的代码，这似乎`Melks`是一个布尔变量。您不能调用`DeleteObject()`提供布尔值作为参数。

您需要删除`.All()`LINQ 语句末尾的谓词，然后删除查询返回的每个对象：

```
var melks = Ent.Tbl_Melk.Where(
  d => d.Mantaghe == Mantaghe && d.Hoze == Hoze && d.Block == Block && d.Melk == Melk);
foreach (var melk in melks)
  Ent.DeleteObject(melk); 
```

# asp.net-mvc - 如何在 asp.net mvc 中访问原始 url？

> ID：10795401
> 
> 赞同：0
> 
> 时间：2012-05-29T08:15:12.897
> 
> 标签：asp.net-mvc, httprequest

我们需要对以下网址进行 SEO 重定向：

**//////控制器/动作**

到

**/控制器/动作**

Request.Url 和 Request.RawUrl 没有 '////' 部分，它只显示一个斜线。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T08:20:58.530

您正在寻找的是 Request.ServerVariables["HTTP_URL"]。

如果您使用的是 IIS7 或更高版本，您可能需要考虑使用 IIS 重写模块，这将允许您编写一个正则表达式来捕获具有多个正斜杠的 URL 并重定向它们。这将使您不必编写代码来执行此操作。

[http://learn.iis.net/page.aspx/460/using-the-url-rewrite-module/](http://learn.iis.net/page.aspx/460/using-the-url-rewrite-module/)

# python - 合并和求和 redis 有序集

> ID：10795405
> 
> 赞同：2
> 
> 时间：2012-05-29T08:15:35.210
> 
> 标签：python, redis

由于使用 python dict 处理大量数据的性能不佳，我设法迁移到 redis。所以我有以下内容：

```
"doc1" =>  ('989', 4.0), ('99', 4.0), ('990', 4.0), ('991', 4.0), ('992', 4.0), ('993', 4.0), ('994', 4.0), ('995', 4.0), ('996', 4.0), ('997', 4.0), ('998', 4.0), ('999', 4.0)

"doc2" =>  ('4', 4.0), ('21', 4.0), ('55', 4.0), ('991', 4.0), ('992', 4.0), ('993', 4.0), ('994', 4.0), ('995', 4.0), ('996', 4.0)

"result" => ('991', 8.0), ('992', 8.0), ('993', 8.0), ('994', 8.0), ('995', 8.0), ('996', 8.0), ('99', 4.0),('4', 4.0), ('21', 4.0), ('55', 4.0) 
```

如您所见，我想通过使用 python 将两个 redis 列表合并为一个，如果 doc1 中存在 doc2 中的元素求和它们的值，如果 doc1 中的元素在 doc2 中不存在，则添加结果的要素。我之前使用 dict 的实现是：

```
result_array = {k: [db_array.get(k, result_array.get(k))[0],db_array.get(k, dv)[1] + result_array.get(k, dv)[1]] for k in set(db_array) | set(result_array)} 
```

[如何保持字典的结构](https://stackoverflow.com/questions/10699271/how-to-keep-the-structure-of-the-dictionary)

如您所见，此解决方案适用于：

```
{'991': [4.0, 's.text'], '21': [4.0, 't.text'], '990': [4.0, 'b.text']} 
```

但是redis不支持列表中的列表，所以我必须找到不同的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T09:50:06.523

如果值是唯一的，您可以使用 redis [sorted set](http://redis.io/commands#sorted_set)：

```
zadd doc1 4.0 989
zadd doc1 4.0 991

zadd doc2 4.0 21
zadd doc2 4.0 991

zinterstore result 2 doc1 doc2
zrange result 0 -1 withscores
1) "991"
2) "8" 
```

这将为您提供集合（存在于两个集合中的元素）与分数的交集，即每个集合中元素分数的总和。

获取存在`doc1`但不存在的元素`doc2`比较棘手，因为`zdiff`redis 中没有。根据您的数据（以及两组中存在的元素的分数），您可以这样做（假设所有分数（您所谓的“值”）都是正数，并且两组中相互元素的分数相同）：

```
zunionstore only_in_doc1 2 doc1 doc2 weights 1 -1
zremrangebyscore only_in_doc1 -inf 0
zrange only_in_doc1 0 -1 withscores
1) "989"
2) "4" 
```

# c# - 将 c# 模型日期属性数组转换为 JSON 日期值

> ID：10795407
> 
> 赞同：0
> 
> 时间：2012-05-29T08:15:38.450
> 
> 标签：c#, javascript, jquery, asp.net-mvc-3

我有一个 C# 模型，我返回到我的视图，然后将其转换为 JSON 对象数组，如下所示：

```
@{
    string data = new System.Web.Script.Serialization.JavaScriptSerializer().Serialize(Model);
}
var modelData = @Html.Raw(data); 
```

我的模型如下所示：

```
public int Id { get; set; }
public DateTime Date { get; set; }
public decimal Value { get; set; } 
```

当我输出时，`Date`它的输出为：`Date: /Date(1338279123847)/`

无论如何我可以将日期转换为 Javascript 日期，然后再将其输出到我的视图中，也许是在我的`modelData`数组中？形式为`DD/MM/YYYY`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T08:22:10.120

序列化模型时不能这样做，但之后可以这样做：

```
<script type="text/javascript">
    var modelData = {"Date":"\/Date(1338279675925)\/"};
    var jsDate = new Date(parseInt(modelData.Date.replace("/Date(", "").replace(")/",""), 10));
    alert(jsDate.toISOString());
</script> 
```

另一种可能性是使用[Json.NET](http://json.codeplex.com/)，它允许您[使用 ISO 8601 格式](http://james.newtonking.com/archive/2009/02/20/good-date-times-with-json-net.aspx)而不是内置的`JavaScriptSerializer`.

# javascript - ThreeJS 位图纹理上的 THREE.Shape 挤出

> ID：10795411
> 
> 赞同：2
> 
> 时间：2012-05-29T08:15:48.610
> 
> 标签：javascript, webgl, three.js

`THREE.Shape`我通过使用对象成功地绘制了一个带圆角的立方体：

```
var shape = new THREE.Shape();
x = width/2;
y = height/2;
shape.moveTo(x - radius, y);

//*** Top right
x = -width/2;
y = height/2;
shape.lineTo(x + radius, y);
if (tr) shape.quadraticCurveTo(x, y, x, y - radius);
else shape.lineTo(x, y);

//*** Bottom right
x = -width/2;
y = -height/2;
shape.lineTo(x, y + radius);
if (br) shape.quadraticCurveTo(x, y, x + radius, y);
else shape.lineTo(x, y);

//*** Bottom left
x = width/2;
y = -height/2;
shape.lineTo(x - radius, y);
if (bl) shape.quadraticCurveTo(x, y, x, y + radius);
else shape.lineTo(x, y);

//*** Top left
x = width/2;
y = height/2;
shape.lineTo(x, y - radius);
if (tl) shape.quadraticCurveTo(x, y, x - radius, y);
else shape.lineTo(x, y);

var extrude = this.shape.extrude({amount: extr || 0, bevelEnabled: false});
this.mesh = new THREE.Mesh(extrude, mat); 
```

问题是我需要像使用 a 一样对待这个网格，`CubeGeometry`并使用位图（最终是视频）纹理对其进行纹理处理。当前的结果是立方体的正面被分成四个相等的部分，每个部分都是来自位图中的像素数据的单一颜色。在这种情况下，我只关心立方体的正面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T20:37:52.823

似乎（到目前为止）您需要自己编写 UV 坐标。

您需要计算几何的边界框。使用该数据，您应该能够为每一侧生成 0 到 1 个 UV。

# java - Java：重现捕获的请求

> ID：10795412
> 
> 赞同：0
> 
> 时间：2012-05-29T08:15:52.403
> 
> 标签：java, android, http, soap, request

我正在尝试重现使用 intel upnp 开发人员工具堆栈生成的 SOAP 请求。

使用设备嗅探器，我能够捕获以下请求

有人可以向我指出重现此问题的最简单方法是什么？

数据包来源：

```
POST /_urn-upnp-org-serviceId-SwitchPower.0001_control HTTP/1.1
SOAPACTION: "urn:schemas-upnp-org:service:SwitchPower:1#SetTarget"
CONTENT-TYPE: text/xml; charset="utf-8"
HOST: 192.168.1.18:1451
Content-Length: 347

<?xml version="1.0" encoding="utf-8"?>
<s:Envelope s:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"      xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
  <s:Body>
  <u:SetTarget xmlns:u="urn:schemas-upnp-org:service:SwitchPower:1">
     <newTargetValue>0</newTargetValue>
  </u:SetTarget>
</s:Body>
</s:Envelope>HTTP/1.1 200 OK
EXT: 
CONTENT-TYPE: text/xml; charset="utf-8"
SERVER: Windows NT/5.0, UPnP/1.0
Content-Length: 290

<?xml version="1.0" encoding="utf-8"?>
<s:Envelope s:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"     xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
  <s:Body>
    <u:SetTargetResponse xmlns:u="urn:schemas-upnp-org:service:SwitchPower:1" />
  </s:Body>
</s:Envelope> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T08:21:35.160

一种简单的方法是在端口 80 上打开一个到系统的流，然后直接写出字符。您也可以通过这种方式获得响应。然而，这并不是实际处理返回的任何内容的最佳方式。您可以通过[如何在 java 中发送 HTTP 请求来发送正常请求？](https://stackoverflow.com/questions/1359689/how-to-send-http-request-in-java)，您还可以在其中解释响应。

# android - 带有用户名令牌的 WCF wshttpbinding 的 Android 客户端

> ID：10795419
> 
> 赞同：1
> 
> 时间：2012-05-29T08:16:32.730
> 
> 标签：android, wcf, client, usernametoken

我正在尝试为 WCF WS-Security 部署 Android 3.0 客户端。WCF WS 将用户名令牌实现为安全访问。我使用 KSOAP2，访问 asmx 服务没有问题，但是当我尝试调用 WCF WS 时，应用程序会抛出此异常：

**javax.net.ssl.SSLHandshakeException：java.security.cert.CertPathValidatorException：找不到证书路径的信任锚。**

看起来这是一个证书凭据，但我已将服务器凭据添加到我的项目使用的密钥库中。

这是我客户的代码：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    System.setProperty("http.keepAlive", "false");
    try {
    /**String NAMESPACE = "http://tempuri.org/";
    String URL = "http://**host**/ObtenerDatos/ServicioDatos.asmx";
    String METHOD_NAME = "SumadorDatos";
    String SOAP_ACTION = "http://tempuri.org/SumadorDatos";*/
    String NAMESPACE = "https://tempuri.org/";
    String URL = "http://**host**//WCFServicio/SWObtenerDatos.svc";
    URL url = new URL(URL);
    String METHOD_NAME = "MetodoEnWS";
    String SOAP_ACTION = "http://tempuri.org/IObtenerDatos/MetodoEnWS";
    SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);      
    request.addProperty("xmlPeticion","dato");
    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
    envelope.dotNet = true;
    envelope.setOutputSoapObject(request);
    StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();     
    StrictMode.setThreadPolicy(policy); 

    KeepAliveHttpsTransportSE transporte = new KeepAliveHttpsTransportSE(url.getHost(),url.getPort(),"",6000);
    try{

        transporte.call(SOAP_ACTION, envelope);

    try {
        SoapPrimitive resultado = (SoapPrimitive)envelope.getResponse();
        String res = resultado.toString();
        TextView tv = new TextView(this);
        tv.setText("El Resultado es: " + res);       
        setContentView(tv);
    } catch (SoapFault e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
    } catch (MalformedURLException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    } 
    }catch(Exception ex){
        ex.printStackTrace();
        this.closeContextMenu();
    }

} 
```

第二个问题。

我不知道如何将用户名令牌和密码发送到服务器。我必须为自己添加标题创建一个肥皂信封，还是存在像 .net 这样的方法，在其中我给出用户名的值并传递给特定对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T10:11:42.007

要将属性添加到标题中，您必须执行以下操作：

```
 Element[] header = new Element[2];  
     header[0] = new Element().createElement(NAMESPACE, "username");                 
     header[0].addChild(Node.TEXT, "Your username");

     header[1] = new Element().createElement(NAMESPACE, "password");                
     header[1].addChild(Node.TEXT, "Your Password");

     envelope.headerOut = header; 
```

对于证书，您可以添加以下行：

```
HttpsURLConnection conn = (HttpsURLConnection) url.openConnection();
    conn.setHostnameVerifier(new HostnameVerifier() {
        @Override
        public boolean verify(String arg0, SSLSession arg1) {
            return true;
        }
    }); 
```

所以你接受所有证书

# iphone - 如何在iphone中添加动态壁纸？

> ID：10795421
> 
> 赞同：1
> 
> 时间：2012-05-29T08:16:44.303
> 
> 标签：iphone

我想创建一个可以将动态壁纸添加到主屏幕的应用程序。在 iOS 5 中可以吗？

如果可能的话，请帮助我如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T08:18:52.163

这是不可能的，当然不是没有越狱。

# android - 如何将蓝牙设备作为列表获取？

> ID：10795424
> 
> 赞同：33
> 
> 时间：2012-05-29T08:16:51.413
> 
> 标签：android, listview, bluetooth

我正在尝试获取绑定的蓝牙设备，但我可以将其作为长字符串而不是列表来获取。

这是我的代码：

```
BluetoothAdapter mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();
Set<BluetoothDevice> pairedDevices = mBluetoothAdapter.getBondedDevices();
ArrayList<String> listview = 
new ArrayList<String>(Arrays.asList(pairedDevices.toString()));
setListAdapter(new ArrayAdapter<String>(this, R.layout.list, listview)); 
```

我得到这样的东西：`[00:23:7F:1c, f0:09:f1:b4:b0]`。它都在一条线上。如何将其更改为列表而不是全部在一行中？

另外，我怎样才能得到设备的友好名称而不是这些数字？

谢谢！！！

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-05-29T08:24:45.497

你应该改变你的代码如下：

```
BluetoothAdapter mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();
Set<BluetoothDevice> pairedDevices = mBluetoothAdapter.getBondedDevices();

List<String> s = new ArrayList<String>();
for(BluetoothDevice bt : pairedDevices)
   s.add(bt.getName());

setListAdapter(new ArrayAdapter<String>(this, R.layout.list, s)); 
```

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2015-07-08T12:44:07.610

**查找****附近的蓝牙**设备列表：

查找相同的屏幕截图。

![在此处输入图像描述](../Images/5c2579033100d0005e8d1ee077fc697a.png)

**MainActivity.java**：

```
public class MainActivity extends ActionBarActivity {

    private ListView listView;
    private ArrayList<String> mDeviceList = new ArrayList<String>();
    private BluetoothAdapter mBluetoothAdapter;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        listView = (ListView) findViewById(R.id.listView);

        mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();
        mBluetoothAdapter.startDiscovery();

        IntentFilter filter = new IntentFilter(BluetoothDevice.ACTION_FOUND);
        registerReceiver(mReceiver, filter);

    }

    @Override
    protected void onDestroy() {
        unregisterReceiver(mReceiver);
        super.onDestroy();
    }

    private final BroadcastReceiver mReceiver = new BroadcastReceiver() {
        public void onReceive(Context context, Intent intent) {
            String action = intent.getAction();
            if (BluetoothDevice.ACTION_FOUND.equals(action)) {
                BluetoothDevice device = intent
                        .getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);
                mDeviceList.add(device.getName() + "\n" + device.getAddress());
                Log.i("BT", device.getName() + "\n" + device.getAddress());
                listView.setAdapter(new ArrayAdapter<String>(context,
                        android.R.layout.simple_list_item_1, mDeviceList));
            }
        }
    }; 
```

**活动主.xml**：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context="com.example.bluetoothdemo.MainActivity" >

    <ListView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:id="@+id/listView"/>

</RelativeLayout> 
```

**清单**文件：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.bluetoothdemo"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="21" />

    <uses-permission android:name="android.permission.BLUETOOTH" />
    <uses-permission android:name="android.permission.BLUETOOTH_ADMIN" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

**笔记：**

请确保您向用户询问位置权限并打开 GPS。

**原因：**从 Android 6.0 开始，您需要蓝牙发现的位置权限。

**更多参考：**

1.  [https://developer.android.com/guide/topics/connectivity/bluetooth](https://developer.android.com/guide/topics/connectivity/bluetooth)
2.  [https://getlief.zendesk.com/hc/en-us/articles/360007600233-Why-does-Android-require-Location-Permissions-for-Bluetooth-](https://getlief.zendesk.com/hc/en-us/articles/360007600233-Why-does-Android-require-Location-Permissions-for-Bluetooth-)

**完毕**

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-05-29T08:25:09.450

我尝试了下面的代码，

**主要的.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >
<TextView  
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content" 
    android:text="@string/hello"
    />
<TextView 
    android:id="@+id/bluetoothstate" 
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content" 
    />
<Button
    android:id="@+id/listpaireddevices" 
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content"
    android:text="List Paired Devices" 
    android:enabled="false"
    /> 
<TextView
    android:id="@+id/bluetoothstate" 
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content" 
    /> 
```

**ListPairedDevicesActivity.java**

```
import java.util.Set;

import android.app.ListActivity;
import android.bluetooth.BluetoothAdapter;
import android.bluetooth.BluetoothClass;
import android.bluetooth.BluetoothDevice;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class ListPairedDevicesActivity extends ListActivity {

 @Override
 protected void onCreate(Bundle savedInstanceState) {
  // TODO Auto-generated method stub
  super.onCreate(savedInstanceState);

  ArrayAdapter<String> btArrayAdapter 
    = new ArrayAdapter<String>(this,
             android.R.layout.simple_list_item_1);

  BluetoothAdapter bluetoothAdapter 
   = BluetoothAdapter.getDefaultAdapter();
  Set<BluetoothDevice> pairedDevices 
   = bluetoothAdapter.getBondedDevices();

  if (pairedDevices.size() > 0) {
      for (BluetoothDevice device : pairedDevices) {
       String deviceBTName = device.getName();
       String deviceBTMajorClass 
        = getBTMajorDeviceClass(device
          .getBluetoothClass()
          .getMajorDeviceClass());
       btArrayAdapter.add(deviceBTName + "\n" 
         + deviceBTMajorClass);
      }
  }
  setListAdapter(btArrayAdapter);

 }

 private String getBTMajorDeviceClass(int major){
  switch(major){ 
  case BluetoothClass.Device.Major.AUDIO_VIDEO:
   return "AUDIO_VIDEO";
  case BluetoothClass.Device.Major.COMPUTER:
   return "COMPUTER";
  case BluetoothClass.Device.Major.HEALTH:
   return "HEALTH";
  case BluetoothClass.Device.Major.IMAGING:
   return "IMAGING"; 
  case BluetoothClass.Device.Major.MISC:
   return "MISC";
  case BluetoothClass.Device.Major.NETWORKING:
   return "NETWORKING"; 
  case BluetoothClass.Device.Major.PERIPHERAL:
   return "PERIPHERAL";
  case BluetoothClass.Device.Major.PHONE:
   return "PHONE";
  case BluetoothClass.Device.Major.TOY:
   return "TOY";
  case BluetoothClass.Device.Major.UNCATEGORIZED:
   return "UNCATEGORIZED";
  case BluetoothClass.Device.Major.WEARABLE:
   return "AUDIO_VIDEO";
  default: return "unknown!";
  }
 }

 @Override
 protected void onListItemClick(ListView l, View v, int position, long id) {
  // TODO Auto-generated method stub
  super.onListItemClick(l, v, position, id);

     Intent intent = new Intent();
     setResult(RESULT_OK, intent);
     finish();
 }

} 
```

**安卓蓝牙.java**

```
import android.app.Activity;
import android.bluetooth.BluetoothAdapter;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;

public class AndroidBluetooth extends Activity {

 private static final int REQUEST_ENABLE_BT = 1;
 private static final int REQUEST_PAIRED_DEVICE = 2;

    /** Called when the activity is first created. */
 Button btnListPairedDevices;
 TextView stateBluetooth;
 BluetoothAdapter bluetoothAdapter;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        btnListPairedDevices = (Button)findViewById(R.id.listpaireddevices);

        stateBluetooth = (TextView)findViewById(R.id.bluetoothstate);
        bluetoothAdapter = BluetoothAdapter.getDefaultAdapter();

        CheckBlueToothState();

        btnListPairedDevices.setOnClickListener(btnListPairedDevicesOnClickListener);
    }

    private void CheckBlueToothState(){
     if (bluetoothAdapter == null){
         stateBluetooth.setText("Bluetooth NOT support");
        }else{
         if (bluetoothAdapter.isEnabled()){
          if(bluetoothAdapter.isDiscovering()){
           stateBluetooth.setText("Bluetooth is currently in device discovery process.");
          }else{
           stateBluetooth.setText("Bluetooth is Enabled.");
           btnListPairedDevices.setEnabled(true);
          }
         }else{
          stateBluetooth.setText("Bluetooth is NOT Enabled!");
          Intent enableBtIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);
             startActivityForResult(enableBtIntent, REQUEST_ENABLE_BT);
         }
        }
    }

    private Button.OnClickListener btnListPairedDevicesOnClickListener
    = new Button.OnClickListener(){

  @Override
  public void onClick(View arg0) {
   // TODO Auto-generated method stub
   Intent intent = new Intent();
   intent.setClass(AndroidBluetooth.this, ListPairedDevicesActivity.class);
   startActivityForResult(intent, REQUEST_PAIRED_DEVICE); 
  }};

 @Override
 protected void onActivityResult(int requestCode, int resultCode, Intent data) {
  // TODO Auto-generated method stub
  if(requestCode == REQUEST_ENABLE_BT){
   CheckBlueToothState();
  }if (requestCode == REQUEST_PAIRED_DEVICE){
   if(resultCode == RESULT_OK){

   }
  } 
 }   
} 
```

**AndroidManifest.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="com.test.AndroidBluetooth"
      android:versionCode="1"
      android:versionName="1.0">
    <uses-sdk android:minSdkVersion="7" />
    <uses-permission android:name="android.permission.BLUETOOTH"></uses-permission>

    <application android:icon="@drawable/icon" android:label="@string/app_name">
        <activity android:name=".AndroidBluetooth"
                  android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
  <activity android:name=".ListPairedDevicesActivity" 
      android:label="AndroidBluetooth: List of Paired Devices"/>
    </application>
</manifest> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-04-09T13:29:23.923

```
package com.sekurtrack.myapplication;

import android.bluetooth.BluetoothAdapter;
import android.bluetooth.BluetoothDevice;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.support.v7.app.AppCompatActivity;
import android.os.Bundle;
import android.util.Log;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.Toast;

import java.util.ArrayList;
import java.util.Set;

public class MainActivity extends AppCompatActivity {
    ListView listView;
    private BluetoothAdapter BA;
    private ArrayList<String> mDeviceList = new ArrayList<String>();
    private Set<BluetoothDevice> pairedDevices;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        listView=(ListView)findViewById(R.id.devicesList);

        BA = BluetoothAdapter.getDefaultAdapter();
        BA.startDiscovery();
        IntentFilter filter = new IntentFilter(BluetoothDevice.ACTION_FOUND);
        registerReceiver(mReceiver, filter);

       /* BA = BluetoothAdapter.getDefaultAdapter();
        pairedDevices = BA.getBondedDevices();
        ArrayList list = new ArrayList();
        for(BluetoothDevice bt : pairedDevices) list.add(bt.getName());
        Toast.makeText(getApplicationContext(), "Showing Paired Devices",Toast.LENGTH_SHORT).show();
        final ArrayAdapter adapter = new ArrayAdapter(this,android.R.layout.simple_list_item_1, list);
        listView.setAdapter(adapter);*/

    }

    @Override
    protected void onDestroy() {
        unregisterReceiver(mReceiver);
        super.onDestroy();
    }

    private final BroadcastReceiver mReceiver = new BroadcastReceiver() {
        public void onReceive(Context context, Intent intent) {
            String action = intent.getAction();
            if (BluetoothDevice.ACTION_FOUND.equals(action)) {
                BluetoothDevice device = intent
                        .getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);
                mDeviceList.add(device.getName() + "\n" + device.getAddress());
                Log.i("BT1", device.getName() + "\n" + device.getAddress());
                listView.setAdapter(new ArrayAdapter<String>(context,
                        android.R.layout.simple_list_item_1, mDeviceList));
            }
        }
    };
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-04-03T14:56:23.767

在此代码中，您只需要在单击按钮时调用它。

```
private void list_paired_Devices() {
        Set<BluetoothDevice> pairedDevices = mBluetoothAdapter.getBondedDevices();
        ArrayList<String> devices = new ArrayList<>();
        for (BluetoothDevice bt : pairedDevices) {
            devices.add(bt.getName() + "\n" + bt.getAddress());
        }
        ArrayAdapter arrayAdapter = new ArrayAdapter(bluetooth.this, android.R.layout.simple_list_item_1, devices);
        emp.setAdapter(arrayAdapter);
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-16T08:22:51.683

这是在 Kotlin 中实现此目的的一种简单方法：

*蓝牙活动.kt*

```
import android.bluetooth.BluetoothAdapter
import android.bluetooth.BluetoothDevice
import android.os.Bundle
import android.view.View
import android.widget.ArrayAdapter
import android.widget.Button
import android.widget.Toast
import androidx.appcompat.app.AppCompatActivity

class BluetoothActivity : AppCompatActivity() {

private var mBTArrayAdapter: ArrayAdapter<String>? = null
private var mBTAdapter: BluetoothAdapter? = null
private var mPairedDevices: Set<BluetoothDevice>? = null

private var mListPairedDevicesBtn: Button? = null

override fun onCreate(savedInstanceState: Bundle?) {
    super.onCreate(savedInstanceState)
    setContentView(R.layout.activity_bluetooth)

    mBTArrayAdapter = ArrayAdapter(this, android.R.layout.simple_list_item_1)
    mBTAdapter = BluetoothAdapter.getDefaultAdapter()

    mListPairedDevicesBtn = findViewById<View>(R.id.paired_btn) as Button

    mListPairedDevicesBtn!!.setOnClickListener { listPairedDevices() }

}

private fun listPairedDevices() {
    mBTArrayAdapter?.clear()
    mPairedDevices = mBTAdapter?.bondedDevices
    if (mBTAdapter?.isEnabled == true) {
        for (device in mPairedDevices!!) mBTArrayAdapter?.add(device.name + "\n" + device.address)
    } else Toast.makeText(applicationContext,
        "Please Switch On The Bluetooth First",
        Toast.LENGTH_SHORT).show()
} 
```

}

*列表视图：*

```
<Button
        android:id="@+id/paired_btn"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Show Paired Devices"
        android:layout_marginTop="5dp"
        android:textSize="16sp"/> 
```

请告诉我它是否适合你！

# php - 字符串中链接的正则表达式，仅在行尾排除点

> ID：10795425
> 
> 赞同：1
> 
> 时间：2012-05-29T08:16:51.763
> 
> 标签：php, regex

我创建了一个正则表达式，它读取一个字符串并将找到的 url 转换为 HTML 链接。我想排除行尾的点（包含文本链接），但它也排除了文本链接内的点（如[http://www.website.com/page.html](http://www.website.com/page.html)。）这里的结束点应该排除但不是.html。这是我的正则表达式：

```
 $text = preg_replace("#(^|[\n  \"\'\(<;:,\*])((www|ftp)\.+[a-zA-Z0-9\-_]+\.[^ \"\'\t\n\r< \[\]\),>;:.\*]*)#", "\\1<a href=\"http://\\2\" target=\"_blank\">\\2</a>", $text); 
```

如何做到这一点？

谢谢！汤姆

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T08:20:38.417

**将您的正则表达式更改为此**

```
\b((?#protocol)https?|ftp)://((?#domain)[-A-Z0-9.]+)((?#file)/[-A-Z0-9+&@#/%=~_|!:,.;]*)?((?#parameters)\?[A-Z0-9+&@#/%=~_|!:,.;]*)? 
```

*或这个*

```
\b((?:https?|ftp|file)://[-A-Z0-9+&@#/%?=~_|$!:,.;]*[A-Z0-9+&@#/%=~_|$]*)\b 
```

**解释**

```
"
\b                            # Assert position at a word boundary
(                             # Match the regular expression below and capture its match into backreference number 1
                                 # Match either the regular expression below (attempting the next alternative only if this one fails)
      http                          # Match the characters “http” literally
      s                             # Match the character “s” literally
         ?                             # Between zero and one times, as many times as possible, giving back as needed (greedy)
   |                             # Or match regular expression number 2 below (attempting the next alternative only if this one fails)
      ftp                           # Match the characters “ftp” literally
   |                             # Or match regular expression number 3 below (the entire group fails if this one fails to match)
      file                          # Match the characters “file” literally
)
://                           # Match the characters “://” literally
[-A-Z0-9+&@#/%?=~_|\$!:,.;]    # Match a single character present in the list below
                                 # The character “-”
                                 # A character in the range between “A” and “Z”
                                 # A character in the range between “0” and “9”
                                 # One of the characters “+&@#/%?=~_|\$!:,.;”
   *                             # Between zero and unlimited times, as many times as possible, giving back as needed (greedy)
[A-Z0-9+&@#/%=~_|\$]           # Match a single character present in the list below
                                 # A character in the range between “A” and “Z”
                                 # A character in the range between “0” and “9”
                                 # One of the characters “+&@#/%=~_|\$”
" 
```

* * *

希望这可以帮助。

# jquery - jQuery 对话框：按钮中的元音变音

> ID：10795442
> 
> 赞同：0
> 
> 时间：2012-05-29T08:18:26.477
> 
> 标签：jquery, dialog

那是我的代码：

```
 $("#contactDeleteDialog").dialog({
       title: "L&ouml;schen",
                bgiframe: true,
                autoOpen: false,
                closeOnEscape: true,
                resizable:false,
                height: 150,
                modal: true,
                buttons:{
                    Löschen:function(){
                       //do something
                    },
                    Abbrechen:function(){
                      //do something else
                    }
                }
    }) 
```

标题是字符串，所以我可以使用 ö 表示 ö。但是我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T08:19:50.883

用引号括起来：

```
buttons: {
    'Löschen': function() { ... }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T08:20:05.120

试试这个：

```
"Löschen": function(){
    //do something
}, 
```

# git - TFS 11 本地，git 远程

> ID：10795446
> 
> 赞同：1
> 
> 时间：2012-05-29T08:18:40.433
> 
> 标签：git, tfs, bitbucket

我想知道是否有机会在本地安装 TFS 11 并远程安装 git(bitbucket)。TFS 11 拥有我工作所需的一切。但如果需要，我希望 bitbucket 上的项目用于远程访问。

有办法吗？？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T08:43:23.330

如果您使用共享 GIT 存储库目录的 TFS 11 本地工作区，它将工作得很好。

本地工作区不需要您手动签出文件，因此您可以共享与从 GIT 进行更改的目录相同的目录，这不会是 TFS 方面的问题（情况并非如此） TFS/VS 10）。

所以你需要 TFS11 和 VS11。

如果您想坚持使用 VS10，则必须为 TFS 和 GIT 使用两个单独的目录，然后手动从一个目录合并到另一个目录，或者使用 TFPT Online 命令从 GIT 内容更新 TFS 工作区。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T10:59:20.383

您还可以使用 git-tf(s) 桥接器。有了它——您可以正常提交到 TFS 并使用桥接器在 git 存储库中获取 TFS 提交。我使用[https://github.com/nodirt/git-tf](https://github.com/nodirt/git-tf)从 git 提交到 TFS，但您的场景只需要从 tfs 获取并推送到远程存储库（bitbucket）。

例如，从 TFS 复制提交并将它们推送到 bitbucket：

```
git remote add bitbucket <bitbucket_url>
git tf fetch
git push bitbucket master 
```

如果您对 bitbucket 进行了更改并希望将它们提交到 TFS - 您应该通过 git-tf 提交它们。在推送之前一定要使用 rebase。

# ruby-on-rails - 了解 Rails 服务器命令

> ID：10795447
> 
> 赞同：1
> 
> 时间：2012-05-29T08:18:40.573
> 
> 标签：ruby-on-rails

由于我是 Rails 的新手，所以有没有任何文件可以帮助我理解命令的内部过程。就像我使用 **$ rails server时一样，所以如果我使用选项****$ rails server -d 198.0.0.0**等，我需要了解幕后的过程以及它是如何启动 webric 服务器并创建一个 deameon IP 的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T08:57:28.883

Railties 负责处理命令行界面，包括`rails server`.

该文件应该是您的入口点：[https ://github.com/rails/rails/blob/master/railties/lib/rails/commands/server.rb](https://github.com/rails/rails/blob/master/railties/lib/rails/commands/server.rb)

您可以看到默认选项和其中实现的选项解析器。

但是，如果您想深入了解 Rails 如何与服务器通信，则应该研究[Rack](http://rack.github.com/)，因为 Rails 毕竟是一个 Rack 应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T08:28:57.487

**您可以从Rails Guide**观看所有**这些截屏视频**和文档。

 **[http://guides.rubyonrails.org/initialization.html](http://guides.rubyonrails.org/initialization.html)

[http://www.bigbinary.com/videos/2-how-rails-boots](http://www.bigbinary.com/videos/2-how-rails-boots)

[http://railscasts.com/episodes/299-rails-initialization-walkthrough](http://railscasts.com/episodes/299-rails-initialization-walkthrough)**

# android - 如何处理Android通知中的多个意图？

> ID：10795449
> 
> 赞同：0
> 
> 时间：2012-05-29T08:18:48.443
> 
> 标签：android

所以，我有这样的问题：

我编写了一个具有通知接收器并且还调用函数 notify() 的服务。我的问题是，类似于 twitter，在成功更新时我想通知用户更新已发布。而且，如果没有更新，那么我想通知用户更新失败。当更新发布并且用户点击通知时，他或她将被带到一项活动。如果未发布更新，并且用户单击通知，则用户将被带到可能有草稿的另一个活动。通知文本/图像也会根据帖子是否完成而改变。到目前为止，我只能发布一个文本并且无法从其他任何地方调用 notify() 函数，因此在构建这个通知系统时成为一个巨大的麻烦。你能帮忙的话，我会很高兴。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T08:57:45.387

创建通知（“更新中...”），保留它的标签

成功 -> 取消“更新”通知（使用它的标签）并创建一个新通知（“成功”）

失败时 -> 取消“更新”通知（使用它的标签）并创建一个新通知（“失败”）

这些通知中的每一个都应该有不同的 PendingIntents（具有不同的网络 ID），它们在单击时执行不同的操作（例如打开不同的活动）。

# sql - 连接 Where 语句

> ID：10795454
> 
> 赞同：2
> 
> 时间：2012-05-29T08:19:06.920
> 
> 标签：sql, sql-server, sql-server-2008

```
UPDATE
    dbo.FormDetail
SET 
    FieldOrder=FieldOrder+1
WHERE
    WHERE DocCode IN (1,2,3)
    AND FieldOrder >= (SELECT FieldOrder FROM dbo.FormDetail
                       WHERE FieldData LIKE '%OldField%'
                       AND DocCode IN (1,2,3)) 
```

不知道我在这里尝试做的事情有多清楚，但我想增加表格`FieldOrder`中`FormDetail`的一些文档，但只在某个字段之后（基本上，我有一个间隙来插入一个新字段）。但明显的问题是，`FieldOrder`我输入的`Where`内容并不特定于该声明当前可能正在更新的文档。我在想使用分区可能是可能的，但我只`partitions`在`From`部分中使用过。任何帮助将非常感激。

**更新**

dbo.FormDetail 示例数据

**DocCode FieldOrder FieldData**

1 1 '标题'

1 2 '老场'

1 3 '签名'

2 1 '段落'

2 2 '老场'

3 1 '老场'

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T08:37:04.207

在您现有的代码中，您的子查询执行一次，并一次性返回所有结果到您的外部查询。

您实际上想要的是为外部查询处理的每一行执行一次子查询。这称为*相关*子查询。

为了让它像这样工作，我做了两个改变；
1\. 我在子查询中给了表一个别名
2\. 我改变了子查询 WHERE 子句来引用外部查询中的表

```
UPDATE
  dbo.FormDetail
SET
  FieldOrder=FieldOrder+1
WHERE
  DocCode IN (1,2,3)
  AND FieldOrder >= (SELECT lookup.FieldOrder
                       FROM dbo.FormDetail AS lookup
                      WHERE lookup.FieldData LIKE '%OldField%'
                        AND lookup.DocCode = FormDetail.DocCode
                    ) 
```

另一种选择可能是加入子查询......

```
UPDATE
  FormDetail
SET
  FieldOrder=FieldOrder+1
FROM
  dbo.FormDetail
INNER JOIN
(
  SELECT
    DocCode,
    FieldOrder
  FROM
    dbo.FormDetail
  WHERE
    DocCode IN (1,2,3)
    AND FieldData LIKE '%OldField%'
)
  AS lookup
    ON  lookup.DocCode     = FormDetail.DocCode
    AND lookup.FieldOrder >= FormDetail.FieldOrder 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T08:43:42.307

你遇到了什么错误？我唯一能看到的错误是你没有限制你的子查询。在大型数据集上，它可能有点低效，但目前你只需要一个 MIN();

```
DECLARE @FormDetail TABLE(
    DocCode         INT
,   Fieldorder      INT
,   FieldData       NVARCHAR(MAX)
)

INSERT INTO @FormDetail (DocCode, FieldOrder, FieldData) VALUES (1,1, 'Title')
INSERT INTO @FormDetail (DocCode, FieldOrder, FieldData) VALUES (1,2, 'OldField')
INSERT INTO @FormDetail (DocCode, FieldOrder, FieldData) VALUES (1,3, 'Signature')
INSERT INTO @FormDetail (DocCode, FieldOrder, FieldData) VALUES (2,1, 'Paragraph')
INSERT INTO @FormDetail (DocCode, FieldOrder, FieldData) VALUES (2,2, 'OldField')
INSERT INTO @FormDetail (DocCode, FieldOrder, FieldData) VALUES (3,1, 'OldField')

UPDATE @FormDetail SET      
    FieldOrder = FieldOrder + 1 
WHERE 
    DocCode IN (1,2,3)     
AND FieldOrder >= (
    SELECT MIN(FieldOrder) FROM @FormDetail                        
    WHERE FieldData LIKE '%OldField%'                        
    AND DocCode IN (1,2,3)
) 

SELECT * FROM @FormDetail 
```

给出以下内容：

1 2 标题

1 3 旧场

1 4 签名

2 2 段

2 3 旧场

3 2 旧场

您想要的只是在某个点之后增加您的字段顺序，对吗？

# mysql - 优化比较查询

> ID：10795455
> 
> 赞同：1
> 
> 时间：2012-05-29T08:19:13.200
> 
> 标签：mysql, compare

我有两张完全相同的表 - products 和 products_temp。我想比较这两个表，我目前正在使用下面的查询，如果每个表中没有很多产品，它可以正常工作，但是我现在每个表中有大约 10,000 个，它需要永远运行，然后因错误而死' mysql服务器已经消失了'。

请查看下面的查询并建议我如何优化它

```
SELECT MIN( id ) AS id , product_id, product_name, program_id, program_name, deeplink,   price, image_url, merchant_category, category_id, category_path, brand, last_updated, tab
            FROM (
                SELECT id , product_id, product_name, program_id, program_name, deeplink, price, image_url, merchant_category, category_id, category_path, brand, last_updated, 'Temp' AS                   tab
                FROM products_temp AS alias1
            UNION ALL 
                SELECT id , product_id, product_name, program_id, program_name, deeplink, price, image_url, merchant_category, category_id, category_path, brand, last_updated, 'Current'                   AS tab
                FROM products AS alias2
            )AS alias_table
            GROUP BY id
            HAVING COUNT( id ) =1 # 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T13:34:40.223

您的查询显然总是从“Temp”或“Live”表中返回每个 ID，从而返回每一行。您实际上可能正在寻找的是......从“临时”表中的所有记录中，它们是否已经存在于“实时”表中，或者它们是新的并且需要更新/刷新。为了得到这个答案，我会做一个左连接，比如

SELECT tmp.*, if( products.id IS NULL, 1, 0 ) as NotOnLiveFile from products_temp tmp left join products on tmp.ID = products.id

不需要分组，也不需要 HAVING 子句。如果产品已经在文件中，你想用它做什么......用来自 Temp 的值更新实时值？如果记录是“NotOnLiveFile”，你想添加那些吗？使用这种方法，您可以在一个结果集中获得所需的一切。

如果这是您的意图，您可以随时进行相关更新（针对现有条目）或插入（如果尚未在实时文件中）。

# iphone - 如何用“##”拨打电话号码？

> ID：10795457
> 
> 赞同：3
> 
> 时间：2012-05-29T08:19:31.827
> 
> 标签：iphone

我想在 iPhone 中拨打类似“##8004664411”的电话号码。

如果我拨打号码“8004664411”，它可以工作。但如果号码包含符号“##”，它就不起作用。

这是我正在使用但不起作用的代码：

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"tel://##8004664411"]]; 
```

转义字符错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T09:37:46.903

恐怕您根本无法拨打包含 * 或 # 字符的号码。出于安全原因，Apple 似乎不允许在拨号字符串中使用它们。以下是文档的相关部分。

来自苹果的[文档](https://developer.apple.com/library/ios/#featuredarticles/iPhoneURLScheme_Reference/Articles/PhoneLinks.html)：

> 为了防止用户恶意重定向电话或更改电话或帐户的行为，电话应用程序支持 tel 方案中的大多数（但不是全部）特殊字符。具体来说，如果 URL 包含 * 或 # 字符，电话应用程序不会尝试拨打相应的电话号码。如果您的应用程序从用户或未知来源接收 URL 字符串，您还应确保正确转义任何可能不适合 URL 的特殊字符。对于本机应用程序，使用 NSString 的 stringByAddingPercentEscapesUsingEncoding: 方法来转义字符，这将返回原始字符串的正确转义版本。

**注意：**该`stringByAddingPercentEscapesUsingEncoding:`部分不适用于 * 和 # （我已经尝试过了...）

# google-chrome - Chromium 扩展：javascript 未执行

> ID：10795459
> 
> 赞同：0
> 
> 时间：2012-05-29T08:19:49.200
> 
> 标签：google-chrome

制作一个简单的插件，在页面加载时执行javascript，我想在不同的页面上执行不同的javascript

但是以下代码没有按预期工作，没有触发“警报”：

`background.html`：

```
<html><body>
<script>
chrome.webRequest.onCompleted.addListener(
  function(details) {
    alert (details.url);
  },
  {
      urls: ["*"],
      types: ["main_frame"]
  },
  []
);
</script>
</body></html> 
```

`manifest.json`：

```
{
  "name": "JS",
  "background_page": "background.html",
  "permissions": [
    "webRequest",
    "*"
  ],
  "version":"0.10"
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T08:24:54.670

从扩展的背景页面生成的警报和 console.log 在常规页面上根本不可见。

如果你想看到它们，你必须打开后台页面：转到扩展设置页面（菜单工具/扩展），然后单击扩展名称下方的“background.html”链接。

在您的情况下，在开发阶段，简单地在内容脚本（即不是背景页面）中添加 console.log 和警报可能会更好。所以你可以在不打开背景页面的情况下阅读它们。

编辑：根据要求，一个只会提醒位置的扩展：

主.js：

```
alert(document.location.href); 
```

清单.json：

```
{
    "name": "Any name",
    "version": "3.3",
    "background_page": "background.html",
    "content_scripts": [
        {
            "matches": ["http://*/*"],
            "all_frames" : true,
            "run_at" : "document_end",
            "js": [
                "main.js"
            ]
        }
    ]
} 
```

是的，我测试过。是的，这听起来很痛苦。你应该在你的开发过程中使用`console.log`而不是。`alert`

# java - JSP 表达式语言错误

> ID：10795462
> 
> 赞同：0
> 
> 时间：2012-05-29T08:20:03.520
> 
> 标签：java, spring, jsp, spring-mvc, jstl

我创建了一个使用 STS 和 Spring MVC 的动态 Web 模块项目。问题是我在模型中添加了一个字符串，但它不能在使用 EL 的 JSP 页面上显示。

我可以知道它有什么问题吗？

以下是详细信息：JSP 页面

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1" isELIgnored="false" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Spring MVC</title>
</head>
<body>
    Home 
    <br />

    <c:out value="${message}" /> 

</body>
</html> 
```

Web.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" version="3.0"> 
```

MVC 控制器：

```
@Controller
public class HomeController {

    public HomeController() {
        super();
    }

    @RequestMapping(value="/home", method=RequestMethod.GET)
    public ModelAndView showHomePage() {

        // View Name - Model Name - Model Data
        return new ModelAndView("home", "message", "Hello Spring MVC");
    }
} 
```

调度程序-servlet.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
    http://www.springframework.org/schema/beans/spring-beans.xsd
    http://www.springframework.org/schema/mvc
    http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
    http://www.springframework.org/schema/context
    http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <!-- http://www.jpalace.org/docs/tutorials/spring/mvc_10.html -->

    <!-- Context Scan -->
    <context:component-scan base-package="com.peter.controller"/>

    <!-- Handler Mapping -->
    <bean id="handlerMapping" class="org.springframework.web.portlet.mvc.annotation.DefaultAnnotationHandlerMapping">
    </bean>

    <!-- Handler Adapter - AnnotationMethodHandlerAdapter --> 
    <!-- Invoke Handler Method -->
    <bean id="handlerAdapter" class="org.springframework.web.portlet.mvc.annotation.AnnotationMethodHandlerAdapter">
    </bean> 

    <!-- Pre/Post Handler Interceptor -->
    <!-- 
    Implement HandlerInterceptor 
    Declare HandlerInterceptor inside DefaultAnnotationHandlerMapping property or 
    globally inside <mvc:interceptors>
    Need configure Filter object inside web.xml 

    <bean class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping">
        <property name="interceptors">
            <list>
                <bean class="pckg.MyInterceptor1"/>
                <bean class="pckg.MyInterceptor2"/>
            </list>
        </property>
    </bean>

    <mvc:interceptors>
        <bean class="pckg.MyInterceptor1"/>
        <bean class="pckg.MyInterceptor2"/>
    </mvc:interceptors>

    -->

    <!-- View Resolver -->
    <bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="viewClass" value="org.springframework.web.servlet.view.JstlView"></property>
        <property name="prefix" value="/WEB-INF"></property>
        <property name="suffix" value=".jsp"></property>
    </bean>

    <!-- Exception Resolver -->

    <!-- Register Interceptor, Message Resource, Bean validation support, Message conversion and field formatting -->
    <mvc:annotation-driven />

</beans> 
```

我的构建路径中有 JSTL.jar。在 Java 构建路径上找不到有关“c:out”（org.apache.taglibs.standard.tag.rt.core.OutTag）的标记处理程序类的警告消息

请帮忙。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T10:02:36.937

*   从 maven 存储库 (http://repo1.maven.org/maven2/javax/servlet/jstl/1.2/) 下载 jstl-1.2.jar。
*   确保 jar 在您的 Web 应用程序的 WEB-INF\lib 文件夹中可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T08:31:16.763

我想查看您的 viewResolver 配置。能看主页吗？？还是有404错误？

如果 home.jsp 显示正确，那么根据我的说法，问题出在您的 jsp 中。查看定义 page 指令的 jsp 的第一行。

在该声明中删除该属性`isELIgnored="false"`，默认情况下每次都是 false。所以不需要明确定义它。

我想如果你删除那个属性。你`${message}`会正确显示。

希望这对您有所帮助。

干杯。

# ruby-on-rails - Rails - Assets = false，引发 runtimeError

> ID：10795463
> 
> 赞同：2
> 
> 时间：2012-05-29T08:20:04.487
> 
> 标签：ruby-on-rails, asset-pipeline, runtime-error, thin

我希望能够在开发时动态更改 css，但是当我尝试这样做时

**应用程序.rb**

```
config.assets.enabled = false 
```

[使用Thin](http://code.macournoyer.com/thin/)启动服务器时出现此错误。

```
.rvm/gems/ruby-1.9.3-p194/gems/less-rails-2.2.2/lib/less/rails/railtie.rb:22:in `block in <class:Railtie>': The less-rails plugin requires the asset pipeline to be enabled. (RuntimeError) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T08:50:59.807

如果您想使用 LESS gem，您应该启用资产管道。

此外，您不必在开发中预编译资产。执行 a`rake assets:clean`以删除所有预编译资产并让资产管道完成其工作。还要确保你的 development.rb 文件是默认文件。

我还在 Rails 中使用 less 和 bootstrap，而且我不必在开发模式下进行任何预编译。

# python - 任何使用 Python/XML 包的人

> ID：10795467
> 
> 赞同：0
> 
> 时间：2012-05-29T08:20:14.817
> 
> 标签：python, xml

> **可能重复：**
> [Python 中的 XML 解析](https://stackoverflow.com/questions/1373707/xml-parsing-in-python)

您使用哪个包使用 Python 语言进行 XML 处理？有一个 python/xml 包： http: [//sourceforge.net/projects/pyxml/](http://sourceforge.net/projects/pyxml/) 但是，似乎没有人再维护它了，“过时”......是因为它已经过时还是太稳定了需要维护吗？当前版本是 2004 年构建的，也就是七年前。有没有人有这方面的经验？谢谢你的建议！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T08:27:49.613

尽可能避免使用 PyXML。它确实已经过时了，因为它甚至不再在当前的 Python 版本上编译，甚至对于处理简单的 XML 也没有太大帮助。

我建议使用[lxml](http://lxml.de/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T09:11:24.033

就个人而言，我更喜欢 cElementTree。[http://effbot.org/zone/celementtree.htm](http://effbot.org/zone/celementtree.htm)

它具有良好的基准性能，并且包含在 Python 2.5 及更高版本中。lxml 在另一个答案中被推荐，它似乎提供了一个与 ElementTree 非常相似的界面，还有一些功能：XPath、XSLT、Relax NG、XML Schema 支持等......

可以在此处找到完整的差异列表：http: [//lxml.de/compatibility.html](http://lxml.de/compatibility.html)

# android - android中的启动时间错误

> ID：10795473
> 
> 赞同：0
> 
> 时间：2012-05-29T08:20:37.750
> 
> 标签：android

当我在模拟器中运行我的应用程序时，它会给出一条 logcat 消息为..

```
05-29 13:45:06.941: W/ActivityManager(59): Launch timeout has expired, giving up wake lock!
05-29 13:45:07.152: W/ActivityManager(59): Activity idle timeout for HistoryRecord{45163410 com.integrated.mpr/.Progress}
05-29 13:45:07.241: D/dalvikvm(5422): GC_FOR_MALLOC freed 43964 objects / 1967584 bytes in 138ms
05-29 13:45:08.401: D/dalvikvm(5422): GC_FOR_MALLOC freed 73 objects / 536016 bytes in 65ms
05-29 13:45:09.631: W/ActivityManager(59): Activity idle timeout for HistoryRecord{450e8e38 com.integrated.mpr/.SensitiveList} 
```

被称为包 com.integrated.mpr 的函数；

```
import org.apache.commons.math.linear.RealMatrix;
import org.apache.commons.math.stat.correlation.Covariance;
import org.apache.commons.math.stat.correlation.PearsonsCorrelation;
import org.apache.commons.math.util.FastMath;

import android.util.Log;

public class Logic {

    int n = Choose.n;
    double final_matrix[][] = new double[n][5];
    double swap =0;

    double weightage_matrix[] = {0,0,0,0,0,0,0,0,0,0,0};
    double sorted_weightage[] = {0,0,0,0,0,0,0,0,0,0};
    String  display[] = new String[n]; 

    double input_matrix[][] = new double[22050][n];
    double[] peak_matrix = new double[n];
    double[] sd_matrix = new double[n];
    double[] rms_matrix = new double[n];
    double[] cf_matrix = new double[n];
    double[] mean_matrix = new double[n];
    int[] sensitive_positions = new int[n];
    double[] new_sensitive = new double[n];
    int[] sortsensi = new int[n];

    public String[] finaldata(){

        for(int i=0;i<n;i++){
            peak_matrix[i] = Choose.timedata[i*5+0];
            sd_matrix[i] = Choose.timedata[i*5+1];
            rms_matrix[i] = Choose.timedata[i*5+2];
            cf_matrix[i] = Choose.timedata[i*5+3];
            mean_matrix[i] = Choose.timedata[i*5+4];
        }

        // Arrays sorted in asecnding order
        java.util.Arrays.sort(peak_matrix);
        java.util.Arrays.sort(sd_matrix);
        java.util.Arrays.sort(rms_matrix);
        java.util.Arrays.sort(mean_matrix);
        java.util.Arrays.sort(cf_matrix);

    for(int i = 0;i<n;i++){
        final_matrix[i][0]= peak_matrix[i];
        final_matrix[i][1]= sd_matrix[i];
        final_matrix[i][2]= rms_matrix[i];
        final_matrix[i][3]= cf_matrix[i];
        final_matrix[i][4]= mean_matrix[i];
    }
    Log.d("final matrix", "final matrix 0 0" +final_matrix[0][0]);
    Log.d("final matrix", "final matrix 1 0" +final_matrix[1][0]);
    Log.d("final matrix", "final matrix 2 0" +final_matrix[2][0]);

    Log.d("final matrix", "final matrix 3 0" +final_matrix[3][0]);
    Log.d("final matrix", "final matrix 4 0" +final_matrix[4][0]);

    //final sorted matrix obtained
    for(int i =0;i<n;i++){
            for(int j=0;j<5;j++){
                if(final_matrix[i][j]== Page1.timedata1[j]){
                    weightage_matrix[0] = weightage_matrix[0]+i+1;
                }
                else if (final_matrix[i][j]== Page2.timedata2[j]){
                    weightage_matrix[1] = weightage_matrix[1]+i+1;
                }
                else if (final_matrix[i][j]== Page3.timedata3[j]){
                    weightage_matrix[2] = weightage_matrix[2]+i+1;
                }
                else if (final_matrix[i][j]== Page4.timedata4[j]){
                    weightage_matrix[3] = weightage_matrix[3]+i+1;
                }

                else{
                    weightage_matrix[4] = weightage_matrix[4]+i+1;
                }
        }
    }
    //copying the values into sorted matrix;

    for(int i=0;i<n;i++){
        sorted_weightage[i] = weightage_matrix[i];
    }

    //sorting weighatge matrix in descending order

        for (int i = 0;i<n; i++ )
           {
              for ( int j = 0 ; j < n-i-1 ; j++ )
              {
                  if ( sorted_weightage[j] <sorted_weightage[j+1] ) {
                        swap = sorted_weightage[j];
                        sorted_weightage[j] = sorted_weightage[j+1];
                        sorted_weightage[j+1] = swap;
                  }
              }

           }

    //  String[] display= new String [n];
        /*
        Log.d("", "weightage matrix0 " +weightage_matrix[0]);
        Log.d("", "weightage matrix0 " +weightage_matrix[1]);
        Log.d("", "weightage matrix0 " +weightage_matrix[2]);
        Log.d("", "weightage matrix0 " +weightage_matrix[3]);
        Log.d("", "weightage matrix0 " +weightage_matrix[4]);

        for(int i =0;i<n;i++){
            Log.d("posnames", new Choose().posnames[i]);
        }
        */
    for(int i =0;i<n;i++){
        double temp = sorted_weightage[i];
        for(int j =0;j<n;j++){
            if(temp==weightage_matrix[j]){
                sensitive_positions[i]=j+1;
            }
        }
    }
    //IT IS RUNNING UPTO THIS POINT AND NOW IT GIVES THE LOGCAT MESSAGE OF LAUNCHTIME

    //now for correaltion

    // genearting the input matrix for correaltion

    for(int i=0;i<n;i++){
        for(int j=0;j<22050;j++){
            input_matrix[j][i] =  new Choose().rawdata[i*22050+j];
        }
    }

    // now generating correlation matrix of N x n by using pearson correaltion

    RealMatrix pcorrdata = new PearsonsCorrelation().computeCorrelationMatrix(input_matrix);

    Log.d("checkng correlation mtrix", "yup");

    for(int i =0;i<n;i++){
        for(int j =0;j<n;j++){

            if(pcorrdata.getEntry(i, j)<0){
                pcorrdata.setEntry(i, j, pcorrdata.getEntry(i, j)*-1);
            }
            Log.d(" value", ""+pcorrdata.getEntry(i, j));
        }
    }

    for(int i =0;i<n;i++){
        Log.d("sensitive osition before correlation", ""+sensitive_positions[i]);
    }

    int[] perm_sensitive = sensitive_positions;

    if((pcorrdata.getEntry(perm_sensitive[0]-1, perm_sensitive[1]-1))>0.5){
        sensitive_positions = append(perm_sensitive[1],sensitive_positions);
    }

    for(int i = 0;i<n;i++){
        for(int j =0;j<n;j++){
            if(i==sensitive_positions[0]-1){
                if((j==sensitive_positions[1]-1)){
                    if(pcorrdata.getEntry(i, j)>0.5){
                        sensitive_positions = append(j,sensitive_positions);
                        }
                    }
                }
            }
        }

    if((pcorrdata.getEntry(perm_sensitive[0]-1, perm_sensitive[2]-1))>0.5){
        sensitive_positions = append(perm_sensitive[2],sensitive_positions);
    }

    if((pcorrdata.getEntry(perm_sensitive[0]-1, perm_sensitive[3]-1))>0.5){
        sensitive_positions = append(perm_sensitive[3],sensitive_positions);
    }

    perm_sensitive = sensitive_positions;

    if((pcorrdata.getEntry(perm_sensitive[1]-1, perm_sensitive[2]-1))>0.5){
        sensitive_positions = append(perm_sensitive[2],sensitive_positions);
    }

    if((pcorrdata.getEntry(perm_sensitive[1]-1, perm_sensitive[3]-1))>0.5){
        sensitive_positions = append(perm_sensitive[3],sensitive_positions);
    }

    perm_sensitive = sensitive_positions;

    if((pcorrdata.getEntry(perm_sensitive[2]-1, perm_sensitive[3]-1))>0.5){
        sensitive_positions = append(perm_sensitive[3],sensitive_positions);
    }

    for(int i =0;i<n;i++){
        Log.d("values aft 6th exchange","" +sensitive_positions[i]);
    }

    perm_sensitive = sensitive_positions;

    Log.d("checkng vales", "after correlation");

    for(int i =0;i<n;i++){
        Log.d("values",""+perm_sensitive[i]);
    }

    for(int i =0;i<n;i++){
        display[i] = new Choose().posnames[perm_sensitive[i]-1];
    }

    return display;

    }

    private int[] append(int j, int[] sensitive_positions) {
        // TODO Auto-generated method stub

        int[] sort_sensitive = new int[n];
        int z = 0;
        for(int i =0;i<n;i++){
            if(sensitive_positions[i]!=j){
                sort_sensitive[z]=sensitive_positions[i];
                z = z+1;
            }
        }
        sort_sensitive[n-1] = j;
        return sort_sensitive;
    }

} 
```

实际上，在下一个活动的 oncreate 方法中，我正在调用另一个具有一些计算的类的函数。这是原因..，如果是，我该如何删除它？

但仍然在空白屏幕之后，下一个活动打开..

但是当我尝试在手机中运行它时，它会强制关闭。我怎样才能删除这个..请帮忙？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T08:31:50.697

这意味着您的主线程不断运行，通过其消息队列泵送消息而不会空闲。如果这是您想要的，则没有什么可修复的。这就是为什么日志消息是警告而不是错误的原因。（[更多](https://stackoverflow.com/questions/10031624/launch-timeout-has-expired-giving-up-wake-lock-activity-idle-timeout-for-histo)）和其他来自 google[组](https://groups.google.com/forum/?fromgroups#!topic/android-developers/TfkPlN5b-ig)的消息。

观看更多[信息](https://stackoverflow.com/questions/4283449/activity-idle-timeout-for-historyrecord)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T08:26:49.137

此错误意味着您的 Activity 需要很长时间才能启动。如果您在 UI 线程上进行大量处理，Android 会终止您的应用程序。您应该将 AsyncTask 用于任何处理密集型的东西。

如果您可以发布您的代码和您的 SDK 版本，我可以提供更多帮助。stackoverflow 上还有另一个关于此的线程。[HistoryRecord 的活动空闲超时？](https://stackoverflow.com/questions/4283449/activity-idle-timeout-for-historyrecord)

# c# - 如何使用c#通过odbc执行存储过程？

> ID：10795480
> 
> 赞同：3
> 
> 时间：2012-05-29T08:21:03.177
> 
> 标签：c#, c#-4.0, odbc, sap-ase

如何使用c#通过odbc执行存储过程？

我想在没有 sql 注入风险的情况下执行它，我该怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-29T08:23:18.720

```
using (OdbcConnection connection = new OdbcConnection(connectionString))
using (OdbcCommand command = connection.CreateCommand())
{
    command.CommandText = commandText //your store procedure name;
    command.CommandType = CommandType.StoredProcedure;

    command.Paremeters.Add("@yourParameter", OdbcType.NChar, 50).Value = yourParameter

    DataTable dataTable = new DataTable();

    connection.Open();    
    using (OdbcDataAdapter adapter = new OdbcDataAdapter(command))
    {
        adapter.Fill(dataTable);
    }
} 
```

# cocos2d-iphone - cocos2d中的ccGridSize

> ID：10795481
> 
> 赞同：6
> 
> 时间：2012-05-29T08:21:03.520
> 
> 标签：cocos2d-iphone

使用 ccWave 时，其中一个参数是`grid`，它表明该值应该是 type `ccGridSize`。

我想知道 a`ccGridSize`是什么。应该为`ccGridSize`变量赋予什么值？

ccWaves 的代码如下...

```
[CCWaves actionWithWaves:<(int)> amplitude:<(float)>
              horizontal:<(BOOL)> vertical:<(BOOL)>
                    grid:<(ccGridSize)> duration:<(ccTime)>]; 
```

参数网格的地方可以给什么值？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T08:30:11.323

Cocos2d 定义`ccGridSize`为：

```
typedef struct _ccGridSize
{
    NSInteger   x;
    NSInteger   y;
} ccGridSize; 
```

并提供内联工厂功能：

```
static inline ccGridSize ccg(const NSInteger x, const NSInteger y); 
```

所以你可以把你的电话写成：

```
... grid:ccg(gridSizeX, gridSizeY) 
```

在哪里`gridSizeX`并`gridSizeY`为您的效果定义许多网格列和行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T08:25:33.167

来自`cctypes.h`：

```
 typedef struct _ccGridSize
 {
        NSInteger   x;
        NSInteger   y;
 } ccGridSize; 
```

因此，只需几个整数即可说明您要制作动画的网格的每一步有多大。

# grails - Grails 条件可空验证或具有可空选项的自定义验证器

> ID：10795482
> 
> 赞同：7
> 
> 时间：2012-05-29T08:21:10.433
> 
> 标签：grails, grails-domain-class, grails-2.0, grails-validation

我有一个表格来创建一个地方。根据国家/地区，省（州、地区）字段是否必填。

当不需要时，我想为空，而不是空字符串。我有使所有空表单字段为空的代码：

```
def newparams = [:]
        place = new Place()
        params.each() { k, v ->
            if (v instanceof String && place.hasProperty(k)) {
                if (!v.trim().length()) {
                    newparams[k] = null
                } else {
                    newparams[k] = v
                }
            }
        }

        place = new Place(newparams)
        place.validate() 
```

现在，在 place 域中，我在该省有一个验证器：

```
province validator:  {val, obj -> if (obj.country in obj.requiresRegionCountries() && !obj.province) return [province.required]} 
```

使用此规则，即使是否需要，我总是会得到“province can't be null”。

我认为这是因为默认设置为 false 的可空验证器。

如果我要添加 nullable: true，那么即使需要省份，也会跳过自定义验证器，并且可以使用空省份进行保存（我认为这是因为它被实例化为 null）

现在，我需要以某种方式自定义验证器以及在验证器中指定可空值的能力，如下所示：

```
province validator:  {val, obj -> 
  if (obj.country in obj.requiresRegionCountries() && !obj.province) { 
    nullable: false
    return [province.required] }
  else {
    nullable: true
  }
} 
```

如何在 Grails 2.0.3 中实现这一点？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-12T08:11:25.650

经过大量研究和反馈，我发现了 2 个有效的解决方案。一个在控制器中。不要在模型中添加任何验证并从控制器动态添加它们：

```
class PlacesController {
  def create() {
  def place = new Place(params.address)
  if (place.country in placesThatRequiresProvinceArray) {
      place.constrains.province.nullable = false
  } else {
      place.constrains.province.nullable = true
  } 
```

}

另一种解决方案是 Tri 在此线程中提出的解决方案，但将自定义验证器放在可空约束之前（否则将不会为空值调用自定义验证器）：

```
static constraints = {
  province (validator: {val, obj ->
    if (obj.country == 'Canada' && !val)
      return ['province.required']
  }, nullable: true)
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-06T14:30:17.410

我无法用您粘贴的代码来判断，但如果您的问题是默认验证不允许省为空，您是否尝试过明确允许省为空？每个字段都允许有多个验证器。所以回到你的原始代码，只需指定可为空的验证器：

```
province nullable: true, validator:  {val, obj -> 
  if (obj != null && obj.country in obj.requiresRegionCountries() && !obj.province) 
    return [province.required]
} 
```

编辑：在自定义验证器中，可能还希望防止 obj 在 if 条件下为空。

EDIT2：演示项目显示上述验证在 grails 2.0.4 上工作

```
class Place {
String country
Province province

  static constraints = {
    province (nullable: true, validator: {val, obj ->
        if (obj.country == 'Canada' && !val) return ['province.required']
    })
  }
} 
```

控制器...

```
 class MainController {
  def index() {
    def place = new Place(country: 'Canada')
    if (!place.validate()) {
        render "need province<br/>" + place.errors
    } else {
        render "cool"
    } 
```

所以我的想法是我有一个虚拟控制器，我可以在其中调用硬编码的索引操作，以创建类似于您的示例的 Place 域实例。请注意，我只定义了国家/地区字符串，因此我可以在其上键入我的逻辑以进行自定义验证。创建 Place 实例时我没有定义省份，所以它应该为空。在这种情况下，响应页面将打印以下内容...

输出片段...

```
need province 
grails.validation.ValidationErrors: 1 .... does not pass custom validation] 
```

如果我从 Place 中删除 nullable: true 约束，则错误是预期的 null 值...

输出片段...

```
need province
grails.validation.ValidationErrors: 1 .... cannot be null] 
```

# magento - 如何在 magento 中添加自定义错误消息

> ID：10795483
> 
> 赞同：3
> 
> 时间：2012-05-29T08:21:15.367
> 
> 标签：magento

`track your order`我在页脚中包含了一个名为的链接。如果用户在未登录的情况下单击此链接，它应该显示错误消息，如`please login to track your order`.

我是 magento 的新手，请指导我这样做。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-10-31T10:03:48.613

添加是因为此问题出现在 Google 中。

对于黄色“警告”消息（您可能需要用于此目的的消息），请使用

```
Mage::getSingleton('core/session')->addNotice('Please log in to track your order'); 
```

对于绿色的“成功”消息，请使用

```
Mage::getSingleton('core/session')->addSuccess('Tracking successful'); 
```

对于红色“错误”消息，请使用

```
Mage::getSingleton('core/session')->addError('There was an error tracking your parcel'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T13:15:43.570

将此代码放入您的控制器中

```
$session = Mage::getSingleton('customer/session');
if (!$session->getCustomerId()) {
    Mage::getSingleton('customer/session')->addError('You are not logged in');
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-12-05T19:35:56.657

> 1.  设置您的信息。

```
Mage::getSingleton("core/session")->addSuccess("Add success message"); 
Mage::getSingleton("core/session")->addError("Please login");
Mage::getSingleton("core/session")->addNotice("Add notification message"); 
```

> 2.  在页脚中显示您的消息。

```
<?php echo $this->getChildHtml('global_messages'); ?> 
```

> 3.在布局中定义块。（可选如果使用自定义扩展或未定义）

`<block type="core/messages" name="global_messages" as="global_messages"/>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T10:24:00.723

您可以使用`addError()`函数在会话中包含错误消息

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-04T09:09:03.913

```
Mage::getSingleton('core/session')->addSuccess('Success Message');
Mage::getSingleton('core/session')->addError('Error Message');
Mage::getSingleton('core/session')->addWarning('Warning Message');
Mage::getSingleton('core/session')->addNotice('Notice Message'); 
```

# perl - 如何在 Perl 的哈希中获取所有不同的值（或键）

> ID：10795487
> 
> 赞同：0
> 
> 时间：2012-05-29T08:21:32.270
> 
> 标签：perl, hash, key

我对一些哈希有一点问题。

如果我有一个包含 John,John,John,Bob,Bob,Paul 的散列 - 是否有一个函数可以只返回：

约翰、鲍勃、保罗。

换句话说，我想获得所有不同的值（如果值不可能，则为键）-但只有一次:)。

我希望你能理解我的问题，谢谢 :)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T08:54:26.227

蒂姆托迪：

```
my @unique = keys { reverse %hash }; 
```

请注意性能警告[`reverse`](http://perldoc.perl.org/functions/reverse.html)：

* * *

> 尽管有一些注意事项，但该运算符对于反转哈希也很方便。如果一个值在原始散列中重复，则只有其中一个可以表示为反向散列中的键。此外，这必须展开一个散列并构建一个全新的散列，这可能需要一些时间来处理大型散列，例如来自 DBM 文件的散列。
> 
> ```
> %by_name = reverse %by_address;  # Invert the hash 
> ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T09:18:31.853

通过使用哈希可以轻松（并且习惯性地）完成重复数据删除：

```
my @uniq = keys { map { $_ => 1 } values %hash }; 
```

一种不需要安装模块的简单方法。由于散列键必须是唯一的，因此任何字符串列表在用作同一散列中的键时都会自动进行重复数据删除。

请注意使用花括号在语句`{ ... }`周围形成匿名散列。`map`这是`keys`.

另请注意，它`values %hash`可以是任何字符串列表，例如一个或多个数组、子程序调用等等。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-29T08:26:37.483

这样的事情可能会帮助你：

```
use List::MoreUtils qw{ uniq };

my %hash = ( a => 'Paul', b => 'Paul', c => 'Peter' );
my @uniq_names = uniq values %hash;
print "@uniq_names\n"; 
```

键总是唯一的。

# algorithm - Pollard Rho 分解方法

> ID：10795489
> 
> 赞同：3
> 
> 时间：2012-05-29T08:21:52.003
> 
> 标签：algorithm

Pollard Rho 分解方法使用函数生成器 f(x) = x^2-a(mod n) 或 f(x) = x^2+a(mod n) ，这个函数的选择（抛物线）有没有意义，或者我们可以使用任何函数（三次、多项式甚至线性），因为我们必须识别或找到属于相同同余类模n的数字才能找到非平凡除数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T17:15:19.960

在 Knuth Vol II (The Art Of Computer Programming - Seminumerical Algorithms) 第 4.5.4 节 Knuth 说

> 此外，如果 f(y) mod p 表现为从集合 {0, 1, ... p-1} 到自身的随机映射，则练习 3.1-12 表明，最小这样 m 的平均值将是 sqrt 阶(p)... 从第 3 章的理论中，我们知道线性多项式 f(x) = ax + c 对于我们的目的来说不够随机。下一个最简单的情况是二次的，比如 f(x) = x^2 + 1。我们不*知道*这个函数是否足够随机，但我们缺乏知识往往支持随机性假设，经验测试表明这f 确实按预期工作

概率论认为 f(x) 的循环长度约为 sqrt(p) . Pollard Rho 中的 rho 包含这样一个连接点，循环包含通向它的多条线。对于线性函数 f(x) = ax + b 然后对于 gcd(a, p) = 1 mod p （这很可能因为 p 是素数） f(y) = f(z) 意味着 y = z mod p，所以没有这样的路口。

如果您查看[http://www.agner.org/random/theory/chaosran.pdf](http://www.agner.org/random/theory/chaosran.pdf)您会看到随机函数的预期循环长度大约是状态大小的 sqrt，但随机函数的预期循环长度双射与状态大小有关。如果您只在评估时考虑生成随机函数，您可以看到如果该函数是完全随机的，那么到目前为止看到的每个值都可以再次随机选择以找到一个循环，因此关闭循环的几率增加具有循环长度，但如果函数必须是可逆的，则关闭循环的唯一方法是生成起点，这不太可能。

# xml - 从 XML 文档创建实体关系图

> ID：10795490
> 
> 赞同：0
> 
> 时间：2012-05-29T08:21:56.653
> 
> 标签：xml, database, entity-relationship, erd

我真的对 XML 文档知之甚少。但我想知道是否可以从 XML 文档生成实体关系图，其中详细说明了数据库中的表和主键。例如：

```
<table name="journals">
    <field name="journal_id" type="I8">
        <KEY />
        <AUTOINCREMENT/>
    </field>
    <field name="path" type="C2" size="32">
        <NOTNULL/>
    </field>
    <field name="seq" type="F">
        <NOTNULL/>
        <DEFAULT VALUE="0"/>
    </field>
    <field name="primary_locale" type="C2" size="5">
        <NOTNULL/>
    </field>
    <field name="enabled" type="I1">
        <NOTNULL/>
        <DEFAULT VALUE="1"/>
    </field>
    <descr>Journals and basic journal settings.</descr>
    <index name="journals_path">
        <col>path</col>
        <UNIQUE />
    </index>
</table> 
```

这完全有可能吗？如果可以，有什么工具可以做到？

非常感谢，艾米

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T08:42:37.493

一种选择是使用 XSLT 将 <table> 元素转换为 SQL DDL 语句，然后使用 Toad 等逆向工程工具来创建图表。但是，字段（列）类型看起来很有趣。

# c# - C#中静态变量有什么用？什么时候使用它？为什么我不能在方法中声明静态变量？

> ID：10795502
> 
> 赞同：113
> 
> 时间：2012-05-29T08:22:58.203
> 
> 标签：c#, static, static-variables

我已经搜索了 C# 中的静态变量，但我仍然不知道它的用途。另外，如果我尝试在方法中声明变量，它不会给我这样做的权限。为什么？

我看过一些关于静态变量的例子。我已经看到我们不需要创建类的实例来访问变量，但这还不足以理解它的用途以及何时使用它。

**第二件事**

```
class Book
{
    public static int myInt = 0;
}

public class Exercise
{
    static void Main()
    {
        Book book = new Book();

        Console.WriteLine(book.myInt); // Shows error. Why does it show me error?
                                       // Can't I access the static variable 
                                       // by making the instance of a class?

        Console.ReadKey();
    }
} 
```

* * *

## 回答 #1

> 赞同：179
> 
> 时间：2012-05-29T09:54:35.257

一个`static`变量在类的所有实例中共享它的值。

未声明为静态的示例：

```
public class Variable
{
    public int i = 5;
    public void test()
    {
        i = i + 5;
        Console.WriteLine(i);
    }
}

public class Exercise
{
    static void Main()
    {
        Variable var = new Variable();
        var.test();
        Variable var1 = new Variable();
        var1.test();
        Console.ReadKey();
    }
} 
```

说明：如果你看上面的例子，我只是声明了`int`变量。当我运行此代码时，输​​出将是`10`and `10`。这很简单。

现在让我们看看这里的静态变量；我将变量声明为`static`.

带有静态变量的示例：

```
public class Variable
{
    public static int i = 5;
    public void test()
    {
        i = i + 5;
        Console.WriteLine(i);
    }
}

public class Exercise
{
    static void Main()
    {
        Variable var = new Variable();
        var.test();
        Variable var1 = new Variable();
        var1.test();
        Console.ReadKey();
    }
} 
```

现在，当我运行上面的代码时，输​​出将是`10`and `15`。因此静态变量值在该类的所有实例之间共享。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-05-29T08:48:05.080

> C# 不支持静态**局部变量**（即在方法范围内声明的变量）。

[https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/classes-and-structs/static-classes-and-static-class-members#static-members](https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/classes-and-structs/static-classes-and-static-class-members#static-members)

您可以声明静态**字段**（类成员）。

**推理：**静态字段是一种状态，与特定类型的所有实例共享。因此，静态字段的范围是整个类型。这就是为什么您不能（在方法内）声明静态**实例变量**的原因- 方法本身就是一个范围，并且在方法中声明的项目必须在方法的边界上不可访问。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2012-05-29T08:24:50.400

当只需要一个变量副本时使用静态变量。因此，如果您在方法内声明变量，则不会使用此类变量，它只会成为局部函数。

静态的例子是

```
class myclass
{
    public static int a = 0;
} 
```

声明为静态的变量通常在类的所有实例之间共享。

声明为静态的变量通常在类的所有实例之间共享。当您创建 VariableTest 类的多个实例时，此变量永久在所有实例之间共享。因此，在任何给定时间点，永久变量中只会包含一个字符串值。

由于对于所有实例只有一个可用的变量副本，因此代码 this.permament 会导致编译错误，因为可以回忆一下 this.variablename 指的是实例变量名称。因此，静态变量将被直接访问，如代码中所示。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-05-29T08:36:07.267

静态变量的一些“真实世界”示例：

构建一个类，您可以在其中获得应用程序的硬编码值。类似于枚举，但在数据类型上具有更大的灵活性。

```
public static class Enemies
{
    public readonly static Guid Orc = new Guid("{937C145C-D432-4DE2-A08D-6AC6E7F2732C}");
} 
```

广为人知的单例，这允许控制一个类的一个实例。如果您想在整个应用程序中访问它，这是非常有用的，但不要将它传递给每个类，只是为了让这个类使用它。

```
public sealed class TextureManager
    {
        private TextureManager() {}
        public string LoadTexture(string aPath);

        private static TextureManager sInstance = new TextureManager();

        public static TextureManager Instance
        {
            get { return sInstance; }
        }
    } 
```

这就是你如何调用纹理管理器

```
TextureManager.Instance.LoadTexture("myImage.png"); 
```

关于您的最后一个问题：您指的是编译器错误[CS0176](http://msdn.microsoft.com/en-us/library/zhcxt2bd%28v=vs.80%29.aspx)。我试图找到有关此的更多信息，但只能找到 msdn 必须说的话：

> 即使没有创建类的实例，也可以在类上调用静态方法、字段、属性或事件。如果创建了类的任何实例，则它们不能用于访问静态成员。静态字段和事件只存在一份，静态方法和属性只能访问静态字段和静态事件。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2019-01-08T16:44:46.477

当只需要一份静态变量时，使用静态变量。让我用一个例子来解释一下：

```
class circle
{
    public float _PI =3.14F;
    public int Radius;

    public funtionArea(int radius)
    {
        return this.radius * this._PI      
    }
}
class program
{
    public static void main()
    {
        Circle c1 = new Cirle();
        float area1 = c1.functionRaduis(5);
        Circle c2 = new Cirle();
        float area2 = c1.functionRaduis(6);
    }
} 
```

现在在这里我们为我们的`class`circle 创建了 2 个实例，即创建了 2 组副本`_PI` 以及其他变量。所以说如果我们有很多这个类的实例，`_PI`将会创建多个副本来占用内存。所以在这种情况下，最好让这些变量喜欢`_PI` `static`并对其进行操作。

```
class circle
{
    static float _PI =3.14F;
    public int Radius;

    public funtionArea(int radius)
    {
        return this.radius * Circle._PI      
    }
}
class program
{
    public static void main()
    {
        Circle c1 = new Cirle();
        float area1 = c1.functionRaduis(5);
        Circle c2 = new Cirle();
        float area2 = c1.functionRaduis(6);
    }
} 
```

现在无论为`class`circle 创建多少个实例，只存在一个变量副本来`_PI`节省我们的内存。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2016-11-18T08:01:18.630

静态类不需要您创建该类的对象/实例化它们，您可以在类名前面添加 C# 关键字 static 前缀，使其成为静态的。

请记住：我们没有实例化 Console 类、String 类、Array 类。

```
class Book
{
    public static int myInt = 0;
}

public class Exercise
{
    static void Main()
    {
        Book book = new Book();
       //Use the class name directly to call the property myInt, 
      //don't use the object to access the value of property myInt

        Console.WriteLine(Book.myInt);

        Console.ReadKey();

    }
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-12-13T23:27:16.870

从这个@Kartik Patel 例子开始，我做了一点改变，也许现在对静态变量更清楚了

```
 public class Variable
    {
        public static string StaticName = "Sophia ";
        public string nonStName = "Jenna ";
        public void test()
        {
            StaticName = StaticName + " Lauren"; 
            Console.WriteLine("  static ={0}",StaticName);
            nonStName = nonStName + "Bean ";
            Console.WriteLine("  NeStatic neSt={0}", nonStName);

        }
    }
    class Program
    {
        static void Main(string[] args)
        {
            Variable var = new Variable();
            var.test();
            Variable var1 = new Variable();
            var1.test();
            Variable var2 = new Variable();
            var2.test();
            Console.ReadKey();

        }
    }

Output 
  static =Sophia  Lauren
  NeStatic neSt=Jenna Bean
  static =Sophia  Lauren Lauren
  NeStatic neSt=Jenna Bean
  static =Sophia  Lauren Lauren Lauren
  NeStatic neSt=Jenna Bean 
```

2.  C#中的类变量VS实例变量

    静态类成员 C# OR 类变量

    ```
    class A
    {
        // Class variable or " static member variable"  are declared with 
        //the "static " keyword

        public static int i=20;
        public int j=10;         //Instance variable 
        public static string s1="static class variable"; //Class variable 
        public string s2="instance variable";        // instance variable 
    }
    class Program
    {
        static void Main(string[] args)
        {
            A obj1 = new A();

            // obj1 instance variables 
            Console.WriteLine("obj1 instance variables ");
            Console.WriteLine(A.i);
            Console.WriteLine(obj1.j);
            Console.WriteLine(obj1.s2);
            Console.WriteLine(A.s1);

            A obj2 = new A();

            // obj2 instance variables 
            Console.WriteLine("obj2 instance variables ");
            Console.WriteLine(A.i);
            Console.WriteLine(obj2.j);
            Console.WriteLine(obj2.s2);
            Console.WriteLine(A.s1);

            Console.ReadKey();

        }

    } 
    ```

    }

[![在此处输入图像描述](../Images/087ccad1a0ae4d7d460d42e904c68f8f.png)](https://i.stack.imgur.com/RYX27.png) [![在此处输入图像描述](../Images/4904d0e03ff0b25b4eac86feee310951.png)](https://i.stack.imgur.com/6i80m.jpg) [![在此处输入图像描述](../Images/1745120dc39c747166b2354faf49e990.png)](https://i.stack.imgur.com/7qipm.jpg) [![在此处输入图像描述](../Images/3bfa910c8bc6879748f4301c35b8ec6d.png)](https://i.stack.imgur.com/gUPVu.jpg)

[https://en.wikipedia.org/wiki/Class_variable](http://%20%20https://en.wikipedia.org/wiki/Class_variable)

[https://en.wikipedia.org/wiki/Instance_variable](http://%20https://en.wikipedia.org/wiki/Instance_variable)

[https://en.wikipedia.org/wiki/Static_variable](https://en.wikipedia.org/wiki/Static_variable)

[https://javaconceptoftheday.com/class-variables-and-instance-variables-in-java/?fbclid=IwAR1_dtpHzg3bC5WlGQGdgewaTvuOI6cwVeFUtTV8IZuGTj1qH5PmKGwX0yM](http://%20https://javaconceptoftheday.com/class-variables-and-instance-variables-in-java/?fbclid=IwAR1_dtpHzg3bC5WlGQGdgewaTvuOI6cwVeFUtTV8IZuGTj1qH5PmKGwX0yM)

[https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/classes-and-structs/static-classes-and-static-class-members](https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/classes-and-structs/static-classes-and-static-class-members)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-04-29T05:38:44.980

对类型的实例进行操作的数据成员和函数成员称为实例成员。int 的 ToString 方法（例如）是实例成员的示例。默认情况下，成员是实例成员。不在类型实例上而是在类型本身上操作的数据成员和函数成员必须标记为静态。Test.Main 和 Console.WriteLine 方法是静态方法。Console 类实际上是一个静态类，这意味着它的所有成员都是静态的。您永远不会真正创建控制台的实例——一个控制台在整个应用程序中共享。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-07-27T13:23:18.083

回应“何时使用它？” 问题：

我经常使用静态（类）变量为类的每个实例分配唯一的实例 ID。我在每个类中都使用相同的代码，非常简单：

```
//Instance ID ----------------------------------------
    // Class variable holding the last assigned IID
    private static int xID = 0;
    // Lock to make threadsafe (can omit if single-threaded)
    private static object xIDLock = new object();
    // Private class method to return the next unique IID 
    //  - accessible only to instances of the class
    private static int NextIID()                    
    {
        lock (xIDLock) { return ++xID; }
    }
    // Public class method to report the last IID used 
    // (i.e. the number of instances created)
    public static int LastIID() { return xID; }
    // Instance readonly property containing the unique instance ID
    public readonly int IID = NextIID();
//----------------------------------------------------- 
```

这说明了关于静态变量和方法的几点：

1.  静态变量和方法与类相关联，而不是与类的任何特定实例相关联。
2.  可以在实例的构造函数中调用静态方法——在这种情况下，静态方法 NextIID 用于初始化只读属性 IID，这是该实例的唯一 ID。

我发现这很有用，因为我开发了使用大量对象的应用程序，并且能够跟踪已创建的对象数量以及跟踪/查询单个实例是很好的。

我还使用类变量来跟踪可以实时报告的实例属性的总数和平均值。我认为该类是保存有关该类所有实例的摘要信息的好地方。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-08-23T14:02:05.903

尝试用类名直接调用它`Book.myInt`

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-04-12T09:53:39.503

与会话变量相比，考虑到我正在使用部署在服务器中的应用程序，静态变量对于所有用户将具有相同的值。如果两个用户访问应用程序的同一页面，则静态变量将保存最新值，并且将向两个用户提供相同的值，这与每个用户不同的会话变量不同。因此，如果您想要所有用户通用且相同的东西，包括应该在应用程序代码中使用的值，那么只使用静态。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-08-13T11:41:35.350

您不需要实例化对象，因为 yau 将使用静态变量： Console.WriteLine(Book.myInt);

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2017-01-04T20:27:55.800

静态变量保留它以前的值，直到程序退出。通过直接调用 class_Name.Method() 或 class_Name.Property 来使用静态。不需要对象引用。最流行的静态用法是 C# 的 Math 类。Math.Sin()、Math.Cos()、Math.Sqrt()。

# garbage-collection - 垃圾收集器如何知道堆栈帧上的引用？

> ID：10795505
> 
> 赞同：10
> 
> 时间：2012-05-29T08:23:17.343
> 
> 标签：garbage-collection, jvm, stack, clr

现代垃圾收集器（如在 CLR、JVM 中）使用哪些技术来判断从堆栈中**引用了哪些****堆对象**？

 **具体来说，VM 如何从知道堆栈从哪里开始解释所有对堆对象的本地引用返回？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T14:03:11.227

在 Java 中（可能在 CLR 中，尽管我不太了解它的内部结构），字节码是用对象与原始信息输入的。因此，字节码中有数据结构来描述每个堆栈帧中的哪些变量是对象，哪些是原语。当 GC 需要扫描根集时，它使用这些[StackMapTables](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.7.4)来区分引用和非引用。

CLR 和 Java 必须有这样的机制，因为它们是*精确的*收集器。有一些*保守*的收集器，比如[boehm 收集器](http://en.wikipedia.org/wiki/Boehm_garbage_collector)，它们将堆栈上的每个偏移量都视为一个可能的指针。他们查看该值（当被视为指针时）是否是堆中的偏移量，如果是，则将其标记为活动的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T12:35:41.027

看看 1996 年 8 月的这篇[Artima](http://www.artima.com/)文章，[Java 的垃圾收集堆](http://www.artima.com/underthehood/gc.html)；特别是[第 2 页](http://www.artima.com/underthehood/gc2.html)。

> 任何垃圾收集算法都必须做两件基本的事情。首先，它必须检测垃圾对象。其次，它必须回收垃圾对象使用的堆空间并使其可供程序使用。垃圾检测通常通过定义一组根并确定根的可达性来完成。如果执行程序可以访问对象的根有一些引用路径，则该对象是可访问的。程序始终可以访问根。任何从根可到达的对象都被认为是活动的。无法访问的对象被视为垃圾，因为它们不再影响程序执行的未来过程。
> 
> 在 JVM 中，根集依赖于实现，但总是在局部变量中包含任何对象引用。在 JVM 中，所有对象都驻留在堆上。局部变量驻留在 Java 堆栈上，每个执行线程都有自己的堆栈。每个局部变量要么是对象引用，要么是原始类型，例如 int、char 或 float。因此，任何 JVM 垃圾收集堆的根都将包括每个线程堆栈上的每个对象引用。根的另一个来源是加载类的常量池中的任何对象引用，例如字符串。加载类的常量池可以引用堆上存储的字符串，如类名、超类名、超接口名、字段名、字段签名、方法名、方法签名等。
> 
> 根引用的任何对象都是可访问的，因此是活动对象。此外，活动对象引用的任何对象也是可访问的。该程序能够访问任何可访问的对象，因此这些对象必须保留在堆上。任何无法访问的对象都可以被垃圾回收，因为程序无法访问它们。

文章继续探索不同的垃圾收集策略，包括引用计数收集器、跟踪收集器、压缩收集器和复制收集器。

* * *

虽然这篇文章很旧，但它仍然适用于今天；并没有太大的改变。不同收集策略的性能有所改进，但没有新的重大进步。

例如，Oracle HotSpot JVM 有一个新的[Garbage-First Garbage Collector](http://www.oracle.com/technetwork/java/javase/tech/g1-intro-jsp-135488.html)，它是一个复制收集器，针对多核处理器和大堆大小进行了性能调整（有关 G1 垃圾收集器的更多信息，请参阅[此答案](https://stackoverflow.com/a/7600514/649852)）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-12T15:53:27.973

.Net 团队在 CoreCLR 开源后不久就发布了有关此主题的有趣文档： [Stack Walking](https://github.com/dotnet/coreclr/blob/35dc2a5f4323049f3035f8d14e2620ae44866239/Documentation/botr/stackwalking.md)**

# php - php 解析错误 T_EXIT，期待 T_FUNCTION

> ID：10795507
> 
> 赞同：-1
> 
> 时间：2012-05-29T08:23:27.503
> 
> 标签：php

完全相同的代码在 php 5.3.13（服务器）上通过 lint 检查“php -l”，但在 php 5.3.12（本地）上没有通过。这是我的本地配置的结果，我可以改变还是应该改变？例如，我可以使用 printf() 重写下面的 else ，但只是好奇。

PHP Parse 错误：语法错误，意外的 T_EXIT，期待 T_FUNCTION

```
function wp_custom_redirect($url) {

    if( ! headers_sent() ) 
    {
        wp_redirect($url);
    } 
    else 
    {
    ?>

    <script>
    self.location.href = '<?php echo $url; ?>';
    </script>

    <?php
    }

    exit();
} 
```

**更新**：带有 exit() 的行；(T_EXIT) 是有错误的行。

我可以重写 else 看起来像这样（见下文）并在我的本地机器上传递 lint。我要确定的是为什么它是有效的 php 时它会失败，我怀疑它是一些 php.ini 配置。我只是不确定在哪里。

```
else
{
    printf( '<script>self.location.href = "%s";</script>', $url );
} 
```

**解决**了它是以前的示例，但是在我的本地服务器配置`<?`中使用了一个而不是一个`<?php`，并且在我的本地服务器配置上，short_tags 是关闭的，不知道为什么 lint 一直持续到代码的后期

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T09:17:27.267

咦，错误出现在哪一行？

你这样称呼它？

```
wp_custom_redirect('http://google.com'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T14:23:42.417

配置确实是问题所在，因为它是我本地 php.ini 上的 short_tags = Off 设置。我没有在比我发布的函数早得多的函数中捕获它，但是行号没有帮助，我不完全确定为什么 lint 没有指示 short_tag 而不是 T_EXIT。

# java - JAXB XML 约束，使用注解

> ID：10795508
> 
> 赞同：2
> 
> 时间：2012-05-29T08:23:37.683
> 
> 标签：java, jaxb, constraints

我有下一个代码

```
 @XmlAttribute
   private String workstation; 
```

我可以对该字段进行限制，例如“最大长度”吗？（使用注释）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T10:01:12.777

您应该查看[JSR 303 - Bean Validation](http://jcp.org/en/jsr/detail?id=303)的实现。它是通过注解在 POJO 上指定约束的标准。

*   [http://jcp.org/en/jsr/detail?id=303](http://jcp.org/en/jsr/detail?id=303)

# ios - 使用超级视图的框架更改调整子视图的大小

> ID：10795512
> 
> 赞同：1
> 
> 时间：2012-05-29T08:23:47.463
> 
> 标签：ios, animation

我有一个 UIImageView aSuper；当我翻转它时，这个视图正在改变它的大小，即它正在获取下一帧和下一帧的大小等等。

现在这个 UIImageView 包含一个子视图，它也是 imageview。我将其称为 bSubView。

现在我想在每次其父视图框架更改时调整此 bSubView 的大小。

代码是：- 这里 invisibleView 是子视图， viewHolder 是父视图。父视图正在改变，但问题出在子视图上。

```
 UIImage *image=[UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:imageString1]]];

            UIImageView *viewHolder=[[UIImageView alloc] initWithFrame:CGRectMake(510, 200, 20, 20)];

              invisibleView=[[UIImageView alloc] init];
              invisibleView.image=image;               
              invisibleView.frame=viewHolder.bounds;

            viewHolder.autoresizesSubviews=YES;
            [ invisibleView setAutoresizingMask:UIViewAutoresizingFlexibleWidth|UIViewAutoresizingFlexibleHeight];
            invisibleView.contentMode=UIViewContentModeCenter;                
            viewHolder.image=[UIImage imageNamed:@"EmptyPlanet"];                  
            [viewHolder addSubview:invisibleView];  

            [self.view addSubview:viewHolder]; 
```

提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-31T21:52:44.447

你可以使用继承的方法`-(void)layoutsubviews`

当其框架发生变化时，在超级视图上调用此方法。在这种方法中，您可以配置您的子视图

另一种选择是在配置子视图时使用自动布局。

# sql-server - SQL Server 中的触发器类型

> ID：10795513
> 
> 赞同：0
> 
> 时间：2012-05-29T08:23:47.823
> 
> 标签：sql-server, sql-server-2008, sql-server-2005, triggers

**[我从这里](http://www.codeproject.com/Articles/25600/Triggers-Sql-Server)**经历了不同类型的触发器

这篇文章是sayiong触发器分为两种主要类型：-

*   After Triggers // 在插入/更新/删除行后触发

*   而不是触发器 // 这会在插入/更新/删除行之前触发

以下触发器适合哪个类别？

```
create trigger TriggerName
on TableName For Insert
As 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T08:28:16.667

从[这里](http://msdn.microsoft.com/en-us/library/ms189799.aspx)：

> 当 FOR 是唯一指定的关键字时，AFTER 是默认值。

# c# - RDLC 根据区域设置格式化数字

> ID：10795515
> 
> 赞同：0
> 
> 时间：2012-05-29T08:23:53.397
> 
> 标签：c#, asp.net, rdlc

我在我的网页上使用 RDLC 报告将一些数据显示为本地报告。一切正常，但数字没有根据我的语言环境文化设置 (sl-SI) 格式化，我已经没有如何解决问题的想法了。

例子。我有一个价值的文本框：

*   =First(Fields!Count.Value, "PhoneCallsDS")

其中“Count”为整数，格式为：

*   数字
*   使用区域格式 = 是
*   小数位=0
*   使用 1000 分隔符 (.)=yes

在填充报告之前的代码中，我设置了文化：

```
 CultureInfo cInfo = new CultureInfo(“sl-SI”, false);
    Thread.CurrentThread.CurrentCulture = cInfo;
    Thread.CurrentThread.CurrentUICulture = cInfo; 
```

在此之后，我希望文本框值按照 sl-SI 文化的要求格式化为 2.358，但为 2,358。

有谁知道我做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-04T09:32:40.023

我找到了这个问题的解决方案，并想与社区分享：

1.  转到 RDLC 报告。
2.  点击报告字段（不是点击内容）
3.  转到“属性”
4.  将“语言”属性设置为您的语言环境（在我的情况下为“sl-SI”）。

就这样。

您可以通过将属性“语言”设置为等于具有所需语言环境的值的报告参数来以编程方式执行此操作....

谢谢你...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-15T10:18:35.427

作为 Cerkenvic 出色答案的补充：

如果您将报告的`Language`属性设置为以下表达式：

```
=User!Language 
```

RDLC 引擎将使用当前线程的区域设置，而无需您实现和填写自定义报告参数。

# jquery - 函数返回 Ajax 响应 - 值未定义？jQuery 阿贾克斯

> ID：10795516
> 
> 赞同：0
> 
> 时间：2012-05-29T08:23:58.393
> 
> 标签：jquery, ajax, json

当我警告 jsonServerResponse 函数的返回值时，它的值是未定义的——尽管 JSON 是从 process.php 页面返回的。

```
function jsonServerResponse(operation, JSOoptionalData) {
        JSOoptionalData = (typeof JSOoptionalData == "undefined") ? 'defaultValue' : JSOoptionalData
        var jqxhr = $.ajax({
            type: "POST",
            url: "process.php",
            data: "apicommand=" + JSOoptionalData,
            success: function (json) {
                return jQuery.parseJSON(json);
            }
        });
}

alert("Response as JS Object: "+jsonServerResponse("operation")); 
```

我知道问题是在异步请求完成之前发出的警报功能，但我不确定如何解决这个问题。任何建议都非常感谢:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T08:29:19.060

这是因为AJAX请求是异步的，所以`return`在调用完成之前就命中了，所以函数总是返回null。

`success`您需要从回调本身中调用依赖于 AJAX 调用的代码。试试这个：

```
function jsonServerResponse(operation, JSOoptionalData) {
    JSOoptionalData = (typeof JSOoptionalData == "undefined") ? 'defaultValue' : JSOoptionalData
    var jqxhr = $.ajax({
        type: "POST",
        url: "process.php",
        data: "apicommand=" + JSOoptionalData,
        success: function (json) {
            alert("Response as JS Object: " + json);

            // to see more information about the object returned, use console.log:
            console.log(json);
        }
    });
}

jsonServerResponse("operation") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T08:28:10.120

您解决了问题，ajax 是一个异步操作，您只能在成功回调中使用返回的数据：

```
function jsonServerResponse(operation, JSOoptionalData) {
    // What that line suppose to do???
        JSOoptionalData = (typeof JSOoptionalData == "undefined") ? 'defaultValue' : JSOoptionalData
        var jqxhr = $.ajax({
            type: "POST",
            url: "process.php",
            data: "apicommand=" + JSOoptionalData,
            dataType: "json", // Change the dataType to json.
            success: function (json) {
                console.log("Response as JS Object:") 
                console.log(json);
            }
        });
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T09:21:50.873

好的，我从另一个帖子中弄清楚了。结果可以在成功回调中处理，或者您可以添加一个本身就是回调函数的参数并将 ajax 请求的结果应用于回调。

```
function jsonServerResponse(operation, callback, JSOoptionalData) {
        JSOoptionalData = (typeof JSOoptionalData == "undefined") ? 'defaultValue' : JSOoptionalData
        jqxhr = $.ajax({
            type: "POST",
            contentType: "application/json",
            url: "process.php",
            data: "apicommand=" + operation + "&optionaldata" + JSON.stringify(JSOoptionalData),
            dataType: "json",
            success: function (json) {
                if(typeof callback === 'function') callback.apply(this, [json]);
            }
        });
}

jsonServerResponse("get_something_from_server", function(returnedJSO){
     console.log(returnedJSO.Result.Some_data);
}, "optional_data"); 
```

和 gdoron，你问的那行使第三个参数是可选的。我听说这是一个很好的做法，如果您要将一些数据传递到服务器（但您不知道有多少变量）以添加一个可选参数并只传递一个 js 对象，将其转换为 JSON 字符串，然后对其进行解码服务器-边。

和平！:)

# powershell - 使用 powershell 在远程机器上运行的进程的开始时间

> ID：10795517
> 
> 赞同：2
> 
> 时间：2012-05-29T08:23:58.937
> 
> 标签：powershell

我想使用 powershell 获取在远程机器上运行的进程的开始时间。在我的本地计算机上，我只需使用`get-process $processname | select StartTime`.

我尝试使用`get-process $processname -computername $server1 | select StartTime`，但这并没有给我任何回报。

请提出任何更好的方法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-29T08:32:51.353

使用 `WMI`. 此代码返回 powershell.exe 进程的开始时间：

```
$a =  gwmi win32_process -computername $server1| ? { $_.name -eq "powershell.exe" }

$a | % { $_.ConvertToDateTime( $_.CreationDate )} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T08:53:24.277

```
PS> $StartTime= @{n='StartTime';e={$_.ConvertToDateTime($_.CreationDate)}}
PS> gwmi win32_process -cn $server1 -filter "Name='$processname' AND CreationDate IS NOT NULL" | select Name,$StartTime 
```

# jquery - 用 jquery 显示的 div 被裁剪

> ID：10795521
> 
> 赞同：0
> 
> 时间：2012-05-29T08:24:14.253
> 
> 标签：jquery, css, height, truncated

我正在尝试与一种奇怪的行为作斗争 - 感谢您提供任何帮助。

我有一个长而复杂的 HTML 页面，其一般结构如下：

```
+------------------------------------------+
| Page header                              |
+-----------------------------+------------+
|                             |  Right     |
| Main content                |  Column    |
|                             |            |
+-----------------------------+------------+ 
```

在“主要内容”中，所有的动作都在发生。可能发生的事情之一是在用户单击按钮时，`absolute`显示一个最初不可见的具有位置的 div，并且使用 AJAX 填充其内容（即我事先不知道有多少内容）。

如果`height`此 div 的整体最终小于“主要内容”的可用高度，则此方法可以正常工作。但是，如果这个“弹出”div 由于内容很多而最终很长，那么它会在“主要内容”div 的底部被截断。由于下面没有任何内容，我什至无法向下滚动查看弹出窗口的所有内容。我希望“主要内容”能够增长以适应弹出窗口的整个高度，并且页面可以一直滚动到弹出窗口的底部，但这并没有发生。

这是我的“主要内容”的 CSS：

```
.content {
    width: 770px;
    position: relative;
    overflow-x: visible;
    overflow-y: hidden;
} 
```

这是弹出窗口的 CSS：

```
#popupedit {
    background-color: #f1f0ec;
    width: 770px;
    z-index: 100001;
    position: absolute;
    left: 0px;
    top: 0px;
    display: none;
} 
```

在 HTML 中，`popupedit`是`content`. 链中的任何地方都没有高度或最大高度限制。那么为什么“内容”不增长以适应“弹出”呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T08:30:30.547

看起来您正在 .content div 中创建弹出窗口。

这有 overflow-y: hidden 将隐藏任何溢出。

尝试将弹出窗口移出内容 div。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T08:33:59.547

移除溢出 -y: hidden; 它应该可以工作。我也建议给 popupedit 固定高度

编辑：好的，试试这个黑客

JS：

```
var hh = document.getElementById('popupedit').offsetHeight;
document.getElementById('fix').style.height = hh + "px"; 
```

CSS：

```
.content {
    width: 770px;
    position: relative;
    overflow-x: visible;
    overflow-y: hidden;
    height: auto
}
#popupedit {
    background-color: #f1f0ec;
    width: 770px;
    z-index: 100001;
    position: absolute;
    left: 0px;
    top: 0px;
}

#fix { width: 770px; } 
```

HTML：

```
<div class = "content">
    <div id = "popupedit">
        <p>Something important</p>                
    </div>
    <div id = "fix"></div>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T09:50:57.293

您可以通过删除绝对定位并使用不同的技术（即浮动）来定位弹出窗口来解决此问题。让我猜猜，`position: absolute`这也是必需的吗？:) 如果是这样，那么仍有希望：您可以在内容加载后使用 JavaScript 调整内容 div 的大小。

```
$(".content").css("min-height", $("#popupedit").height()+"px"); 
```

当然，这必须在弹出窗口完全加载后运行，并且您可能应该在弹出窗口消失后撤消调整大小：

```
$(".content").css("min-height", ""); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-29T09:01:01.450

尝试删除`position:relative;`.content。无论如何都不需要它（除非你需要它来做你没有说过的事情）。这是一个很大的误解。很多人使用`position: relative;`几乎所有元素。这根本不需要。

在这种情况下，它甚至会造成麻烦，因为`#popupedit`现在会将自己绝对定位到其父级而不是窗口。我的建议是，删除`position: relative;`，给弹出窗口一个静态`width`的，用 jQuery 计算它的水平位置以使其居中。也摆脱`top: 0;`和`left: 0;`

然后，将此代码片段添加到您调用的弹出代码中，或者添加到单独的文件中（并不重要）：

```
$("#popupedit ").css({
    left: ($(window).width() - $('.className').outerWidth())/2,
    top: ($(window).height() - $('.className').outerHeight())/2
});​ 
```

# c# - 无法在 Visual Studio Express 中使用 WCF 模板

> ID：10795522
> 
> 赞同：1
> 
> 时间：2012-05-29T08:24:19.573
> 
> 标签：c#, wcf, visual-studio-2010, templates

我使用 Visual Studio 2010 Express All-In-One 安装 Visaul C# 和 Visual Web Developer。

打开 Visual C# 并尝试创建 WCF 应用程序后，我找不到它。

在互联网上查看后，我在[stackoverflow](https://stackoverflow.com/questions/110451/how-to-add-wcf-templates-to-visual-studio-express)上找到了一个提示。

我已经完全按照那个人的解释做了，现在我有了`WCFServiceProject`。

![WCF](../Images/f121f3035c596b9041910e8e2c67c0a7.png)

现在一切似乎都是正确的，`but`当我尝试创建 WCF 项目时出现此错误

![错误](../Images/2465e3d65d770cb43d170fb9a275be48.png)

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T08:34:52.393

使用 Visual Studio Express，您必须显式启动**Visual Web Developer Express**以创建*WCF Service Application*类型的项目。

Visual C# Express 甚至不允许将现有 WCF 项目添加到现有解决方案中。

如果您的安装没有从（默认）安装的项目类型中提供这种类型的项目，您应该检查您的安装选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T08:26:57.513

我认为您没有在 Visual Studio 2010 Express 中创建 WCF 应用程序的选项。

# apache - 合并两个 .htaccess 代码

> ID：10795524
> 
> 赞同：0
> 
> 时间：2012-05-29T08:24:21.150
> 
> 标签：apache, .htaccess, mod-rewrite, redirect

我有两个 .htaccess ，第一个 .htaccess 位于根目录中，即**www**文件夹，第二个 .htaccess 位于名为**forum的文件夹中**

www 文件夹中的 .htaccess 代码不能与论坛文件夹中的 .htaccess 代码一起使用

我正在研究的是如何将两个 htaccess 合并到根目录 www

**www 目录中的 .htaccess**

```
Options +FollowSymlinks -MultiViews
RewriteEngine on
RewriteCond %{HTTP_HOST} ^site\.com$ [OR]
RewriteCond %{HTTP_HOST} ^www\.site\.com$
RewriteRule ^/?$ "http\:\/\/www\.site\.net\/" [R=301,L]

RewriteCond %{HTTP_HOST} ^(?:www\.)?site\.com$ [NC]
RewriteRule ^(.*)$ http://www.site.net/$1 [R=301,L] 
```

**.htaccess 在论坛目录中**

```
#RewriteEngine On
RewriteRule ^site-t(.*).html showthread.php?t=$1 [L]
RewriteRule ^site-f(.*) forumdisplay.php?f=$1 [L]
RewriteRule ^f(.*)-(.*).html forumdisplay.php?f=$1 [L]
RewriteRule ^site-u(.*).html member.php?u=$1 [L]
RewriteRule ^index.php$ http://%{http_host}/ [R=301,L
RewriteRule ^t(.*).html showthread.php?t=$1 [L] 
RewriteRule ^f(.*).html forumdisplay.php?f=$1 [L] 
RewriteRule ^post(.*)-(.*) showpost.php?p=$1&postcount=$2 [L]
RewriteRule ^u(.*).html member.php?u=$1 [L]
RewriteRule archive/t-(.*) archive/index.php/t-$1 [L]
RewriteRule tags/(.*).html tags.php?tag=$1 [L]

RewriteEngine on

# This file is only needed if you have set the Forum Component URL in your admincp and you are 
# using the mod_rewrite option for friendly urls.  If this is the case, copy this file
# to your forum component stub directory.

# If you are having problems or are using VirtualDocumentRoot, uncomment this line and set it to your forum component directory.
# RewriteBase /forum-stub-directory/

# If you are having problems with the rewrite from content/ to content.php, uncomment this line to turn MultiViews off.
# Options -MultiViews

RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d

RewriteRule ^.*$ - [NC,L]

# Forum
RewriteRule ^threads/.* showthread.php [QSA]
RewriteRule ^forums/.* forumdisplay.php [QSA]
RewriteRule ^members/.* member.php [QSA]
##################################################
RewriteEngine on
RewriteRule ^f.txt vbmaps.php?cat=d [L]
RewriteRule ^t([0-9]+).txt vbmaps.php?rss=d&page=$1 [L]
RewriteRule ^tag([0-9]+).txt maptag.php?rss=d&page=$1 [L]
RewriteRule ^t([0-9]+).txt vbmaps.php?rss=d&page=$1 [L]
RewriteRule ^tag([0-9]+).txt maptag.php?rss=d&page=$1 [L]
RewriteRule ^forums maps.php?cat=d [L]
RewriteRule ^thread([0-9]+) maps.php?rss=d&page=$1 [L]
RewriteRule ^forums.xml maps.php?cat=d 
RewriteRule ^thread([0-9]+).xml maps.php?rss=d&page=$1 [L]
RewriteRule ^t([0-9]+)\-([0-9]+)\.html$     showthread.php?t=$1&page=$2     [L]
RewriteRule ^f([0-9]+)\-([0-9]+)\.html$     forumdisplay.php?f=$1&page=$2   [L]
RewriteRule ^post([0-9]+)\.html$        showthread.php?p=$1#post$2  [L]
RewriteRule ^t(.*).html showthread.php?t=$1 [L]
RewriteRule ^u(.*).html member.php?u=$1 [L]
RewriteRule ^f(.*).html forumdisplay.php?f=$1 [L]
RewriteRule ^f(.*)-t(.*) showthread.php?t=$1 [L]
RewriteRule ^t([0-9]+)\-([0-9]+)$   showthread.php?t=$1&page=$2     [L]
RewriteRule ^f([0-9]+)\-([0-9]+)$   forumdisplay.php?f=$1&page=$2   [L]
RewriteRule ^post([0-9]+)$      showthread.php?p=$1#post$2  [L]
RewriteRule ^t([0-9]+)$         showthread.php?t=$1 [L]
RewriteRule ^u([0-9]+)$         member.php?u=$1 [L]
RewriteRule ^f([0-9]+)$         forumdisplay.php?f=$1 [L]
RewriteRule ^t([0-9]+)\-([0-9]+)$   showthread.php?t=$1&page=$2     [L]
RewriteRule ^f([0-9]+)\-([0-9]+)$   forumdisplay.php?f=$1&page=$2   [L]
RewriteRule ^post([0-9]+)$      showthread.php?p=$1#post$2  [L]
RewriteRule ^t([0-9]+)$         showthread.php?t=$1 [L]
RewriteRule ^u([0-9]+)$         member.php?u=$1 [L]
RewriteRule ^f([0-9]+)$         forumdisplay.php?f=$1 [L]
RewriteEngine On
RewriteRule ^t(.*).html showthread.php?t=$1 [L]
RewriteRule ^f(.*).html forumdisplay.php?f=$1 [L]
RewriteRule ^u(.*).html member.php?u=$1 [L]
RewriteRule ^(.*)-post(.*).html showpost.php?p=$1&postcount=$2 [L]
RedirectMatch 301 thread(.*).html$ http://www.site.net/vb/showthread.php?t=$1

#########################################################
RewriteRule ^((urllist|sitemap_).*\.(xml|txt)(\.gz)?)$ vbseo_sitemap/vbulletin_sitemap_index.xml.gz [L] 
```

# asp.net-mvc - 如何在构建服务器上安装实体框架？

> ID：10795527
> 
> 赞同：0
> 
> 时间：2012-05-29T08:24:39.373
> 
> 标签：asp.net-mvc, entity-framework

如何在构建服务器上安装实体框架？我只在那里安装了 MS Visual Studio Shell，没有包管理器控制台。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T08:28:17.777

执行以下操作之一

*   将 EF 程序集添加到源代码管理，以便在结帐时下载它们
*   启用[nuget 包还原](http://docs.nuget.org/docs/workflows/using-nuget-without-committing-packages)并允许构建服务器访问 Internet 以下载包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T08:28:06.373

您不需要在构建服务器上安装 EntityFramework。EntityFramework 是 BCL 的一部分，因此您所要做的就是在构建服务器上安装 .NET。现在，如果您需要使用通过 NuGet 包提供的一些扩展，您只需在项目中添加对这些包的引用，然后所有必要的程序集都将成为 Web 应用程序的一部分。因此，Web 应用程序是自包含的。您所要做的就是将它们置于源代码控制之下，以便构建服务器能够检索它们。

# c++ - OpenGL - PBuffer 渲染到纹理

> ID：10795535
> 
> 赞同：0
> 
> 时间：2012-05-29T08:24:57.977
> 
> 标签：c++, opengl, buffer, textures

在我上一篇文章之后，当有人推荐我使用 pBuffers 时，我在 Google 上进行了一些挖掘，发现了一些很酷的示例来使用 pbuffers 进行离屏渲染。nVidia 网站上提供的一些示例进行了简单的离屏渲染，它仅在 pbuffer 上下文中渲染，将像素读取到数组中，然后将 opengl 函数调用到 DrawPixels。

我更改了此示例，以便从读取的像素创建纹理 - 将其渲染到屏幕外，将像素读取到数组，然后使用此颜色位数组初始化纹理。但这对我来说看起来很多余 - 我们渲染图像，我们将它从图形卡内存复制到我们的内存（数组），然后将它复制回图形卡以便在屏幕上显示它，但只是在不同的渲染上下文。我为显示渲染纹理而制作的副本看起来有点愚蠢，所以我尝试了使用 glCopyTexImage2D() 的不同方法，不幸的是它不起作用。我将显示代码和解释：

```
mypbuffer.Initialize(256, 256, false, false); 
```

- 错误值用于共享上下文和共享对象。它们是错误的，因为这个出色的图形卡不支持它。

然后我执行通常的初始化，以启用混合和 GL_TEXTURE_2D。

```
 CreateTexture();
    mypbuffer.Activate();

        int viewport[4];
        glGetIntegerv(GL_VIEWPORT,(int*)viewport);
        glViewport(0,0,xSize,ySize);

        DrawScene(hDC);

        //save data to texture using glCopyTexImage2D
        glBindTexture(GL_TEXTURE_2D,texture);

        glCopyTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA,
                         0,0, xSize, ySize, 0);
        glClearColor(.0f, 0.5f, 0.5f, 1.0f);                // Set The Clear Color To Medium Blue
        glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

        glViewport(viewport[0],viewport[1],viewport[2],viewport[3]);
        // glBindTexture(GL_TEXTURE_2D,texture);
        first = false;
        mypbuffer.Deactivate(); 
```

- DrawScene 函数很简单，它只是渲染一个三角形和一个矩形，应该是离屏渲染的（我希望）。CreateTexture() 创建一个空纹理。该功能应该可以工作，因为它已按照我之前描述的方式进行了测试并且可以正常工作。

在此之后，在主循环中，我只需执行以下操作：

```
 glClear(GL_COLOR_BUFFER_BIT);
            glBindTexture(GL_TEXTURE_2D,texture);

            glRotatef(theta, 0.0f, 0.0f, 0.01f);
            glBegin(GL_QUADS);
            //Front Face
            glTexCoord2f(0.0f, 0.0f);
            glVertex3f(-0.5, -0.5f,  0.5f);
            glTexCoord2f(1.0f, 0.0f);
            glVertex3f( 0.5f, -0.5f,  0.5f);
            glTexCoord2f(1.0f, 1.0f);
            glVertex3f( 0.5f,  0.5f,  0.5f);
            glTexCoord2f(0.0f, 1.0f);
            glVertex3f(-0.5f,  0.5f,  0.5f);
            glEnd();
            SwapBuffers(hDC);

            theta = 0.10f;
            Sleep (1); 
```

最终结果只是一个蓝色背景的窗口，实际上没有渲染任何内容。知道为什么会这样吗？我的图形卡不支持扩展 wgl_ARB_render_texture，但这在调用 glCopyTexImage2D() 时应该不是问题吧？

**我的卡也不支持FBO**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T10:44:31.063

您必须做的是，“连接”您的两个 OpenGL 上下文，以便 PBuffer 上下文的纹理也显示在主渲染上下文中。您需要查找的术语是“显示列表共享”。在 Windows 中，您使用 追溯连接上下文`wglShareLists`，在 X11 和 MacOS X 上，您必须提供要在创建上下文时共享的上下文句柄。

一种完全不同的可能性和同样有效的方法是在 PBuffer 上*重用*相同的上下文。这是一个鲜为人知的事实，您不仅可以在首先创建它的可绘制对象上使用 OpenGL 渲染上下文，还可以在具有兼容设置的任何可绘制对象上使用 OpenGL 渲染上下文。因此，如果您的 PBuffer 与主窗口的像素格式匹配，您可以从主窗口中分离渲染上下文并将其附加到 PBuffer。当然，您需要对主窗口的设备上下文/可绘制对象进行低级别访问，这通常隐藏在框架后面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T08:36:02.053

您应该检查您的 OpenGL 实现是否支持帧缓冲区对象：这些对象能够成为渲染目标，并且它们可以附加纹理作为颜色缓冲区，实际上直接渲染到纹理中。

这应该是要走的路，否则你的方法是另一种选择。

# ruby-on-rails - Rails如何在子表中按属性获取组计数？

> ID：10795538
> 
> 赞同：1
> 
> 时间：2012-05-29T08:25:04.297
> 
> 标签：ruby-on-rails, activerecord

```
Application (:id, :name)

  has_many :steps

Step (:id, application_id, :status) 
```

样本数据：

```
 Application       Name
 -------------  ------------
    1              'Peter'
    2              'Paul'
    3              'Mary'

  Step    Application ID    Status
 ------   --------------   -------------
    1           1           'new'
    2           2           'new'
    3           1           'in-review'
    4           2           'in-review'
    5           2           'completed'
    6           3           'new'
    7           3           'in-review' 
```

如何获取*最新*`count(*)`申请状态的报告？IE

 *```
 Status       Count       
 ------------- -------
  'in-review'     2
  'completed'     1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T10:05:08.400

HAVING，MAX 似乎不适用于 mysql 5.1

这个似乎正在工作

```
select status, count(status) as "count"
from (
        select status 
        from (
                select * from steps order by created_at desc
             )
        steps_sorted 
        group by application_id
     )
latest_statuses 
group by status; 
```

您可以在 Step.find_by_sql 中使用它*

# c# - 访问/隐藏标题元素

> ID：10795545
> 
> 赞同：0
> 
> 时间：2012-05-29T08:25:28.393
> 
> 标签：c#, sharepoint, sharepoint-2010, field, content-type

我创建了一个从项目内容类型继承的内容类型。所以内容类型自动具有字段：标题。

但是如何访问这个字段（我想添加一些自定义验证并定义它是否显示在editform中）？

我想做服务器端验证并使用自定义的edititemform。也许有可能删除/隐藏此字段？

我尝试更改内容类型以隐藏标题：

```
 <Field
  ID="{fa564e0f-0c70-4ab9-b863-0177e6ddd247}"
  Name="Title"
  StaticName="Title"
  DisplayName="Title"
  Type="Text"
  FromBaseType="TRUE"
  Required="FALSE"
  Hidden="TRUE"
  SourceID="http://schemas.microsoft.com/sharepoint/v3"
/>

  <!-- Parent ContentType: Element (0x01) -->
  <ContentType ID="0x0100b48c62c42879472aa8f1e1afc4dba7ce"
               Name="aa- aa"               
               Group="Custom Content Types"
               Description="My Content Type"
               Inherits="TRUE"
               Version="0">
      <FieldRefs>
        <FieldRef ID="{fa564e0f-0c70-4ab9-b863-0177e6ddd247}" Name="Title" Hidden="TRUE" Required="FALSE" />

      </FieldRefs> 
```

但仍需要并显示标题字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T06:45:07.097

我发现了问题：

如果我想隐藏以删除我的内容类型中的标题列，我必须禁用内容类型 inharitation。但是在禁用 inharitation 后，自定义列将在部署后消失。因为它们不是基本类型的一部分。所以这些字段也必须在列表模式中声明。

[MSDN](http://msdn.microsoft.com/en-us/library/aa543576.aspx)

> 当 SharePoint Foundation 创建列表实例时，它仅包括在列表的基本类型架构或列表架构中声明的那些列。如果您在列表架构中引用网站内容类型，并且该内容类型引用未包含在列表的基本类型架构或列表架构中的网站列，则不包括这些列。您必须在 SharePoint Foundation 的列表架构中声明这些列，才能将它们包含在列表中。

**内容类型**

```
<Elements xmlns="http://schemas.microsoft.com/sharepoint/">
  <Field ID="{61CC6776-F855-48d5-A4EC-B7CE11CE2324}"
      DisplayName="ExpiresDate" Name="ExpiresDate"
      Type="DateTime" Required="False"
      UnlimitedLengthInDocumentLibrary="FALSE"/>

  <!-- Parent ContentType: Element (0x01) -->
  <ContentType ID="0x0100b48c62c42879472aa8f1e1afc4dba7ce"
               Name="GroupsList - ContentTypeGroups"               
               Group="Custom Content Types"
               Description="My Content Type"
               Inherits="false"
               Version="0">
      <FieldRefs>
        <RemoveFieldRef ID="{fa564e0f-0c70-4ab9-b863-0177e6ddd247}" />

      <FieldRef ID="{61CC6776-F855-48d5-A4EC-B7CE11CE2324}" Name="ExpiresDate" Required="FALSE" ShowInNewForm="FALSE" ShowInEditForm="FALSE" />
      </FieldRefs>
  </ContentType>
</Elements> 
```

**列表架构**

```
...

  <ContentTypes>

      <ContentTypeRef ID="0x0100b48c62c42879472aa8f1e1afc4dba7ce" />
    </ContentTypes>
    <Fields>
      <Field ID="{61CC6776-F855-48d5-A4EC-B7CE11CE2324}"
          DisplayName="ExpiresDate" Name="ExpiresDate"
          Type="DateTime" Required="False"
          UnlimitedLengthInDocumentLibrary="FALSE"/>

    </Fields>
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T09:09:25.330

您无法隐藏内置标题字段，因为它基本上是唯一标识符，您需要显示它。但是，您可以[重命名您的标题字段](http://alottolearn.net/2012/02/14/rename-title-in-a-sharepoint-list/)，这实际上被认为是最佳实践并且应该这样做。

# android - 向 ImageView 和 Drop-Shadow 添加 Frame 或 Border

> ID：10795550
> 
> 赞同：11
> 
> 时间：2012-05-29T08:25:45.153
> 
> 标签：android, android-layout

我正在尝试做的将更好地使用示例图像。正如你在下面看到的，我有一个灰色的背景，上面有一个容器，里面有一些包含图像的填充。容器也有轻微的阴影。

我想知道的是，在我的 layout.xml 中是否有如此不费力的方法？在普通的 HTML 文档中，这很容易。但由于这是针对移动应用程序和多种屏幕分辨率等的，事实证明这有点困难。

有什么建议吗？

![在此处输入图像描述](../Images/14b6bc95c1ca5d589ce2b1184930c827.png)

编辑：我最终解决了使用 9patch 图像。Everyting 在创建它时非常顺利，但是当我在我的应用程序中实际使用它时，我会在图像的右侧和底部看到这些深色条纹。阴影似乎工作，这是一个非常轻的阴影..但是那些该死的条纹？？

![在此处输入图像描述](../Images/b1b3c08a0cd8c901c7e2a3dc61aac7dc.png)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-29T08:35:16.107

您可以通过在可绘制文件夹中写入 xml 文件（例如 editBorder.xml）来为视图提供边框：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" >

    <stroke 
        android:width="5dp"
        android:color="#EBDDE2" />

    <padding
        android:bottom="2dp"
        android:left="2dp"
        android:right="2dp"
        android:top="4dp" />

    <gradient
        android:centerColor="@color/white" 
        android:endColor="@color/white"
        android:startColor="@color/white" />

    <corners android:radius="8dp" />

</shape> 
```

并提供此边框，使用 ImageView 中的语句作为`android:background="@drawable/editBorder"`

这应该可以解决您的问题。:)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-29T08:28:27.290

ImageView 有两个属性`android:background`和`android:src`

[http://developer.android.com/reference/android/widget/ImageView.html](http://developer.android.com/reference/android/widget/ImageView.html)

创建一个带有阴影的空白白框（Photoshop 推荐）。

所以就这样做

```
<ImageView android:id="@+id/imageView"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:src="@drawable/image"
     android:background="@drawable/whiteFrame" 
     android:padding="10dp" >
</ImageView> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-29T08:31:45.163

这可以通过适当的填充和 9 个补丁图像来完成。看到这个[链接](https://stackoverflow.com/questions/3693234/custom-imageview-with-drop-shadow)，也许它可以帮助你。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-10-19T18:15:48.843

我找到了这个[imageView](https://github.com/zhaozhentao/MaterialImageView/blob/master/library/src/main/java/com/zzt/library/MaterialImageView.java)。这可能对你有好处

[![在此处输入图像描述](../Images/989b141ab988e23f56ae22363ca50a43.png)](https://i.stack.imgur.com/CxSU6.jpg)

# php - PHP 文档已过期

> ID：10795552
> 
> 赞同：23
> 
> 时间：2012-05-29T08:25:56.213
> 
> 标签：php, back-button

我做了一些 PHP 编码，如果在浏览器上按下“返回”按钮，我会收到以下错误：

```
Document Expired
This document is no longer available. 
```

我可以实现什么代码来适应这种情况

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2014-12-08T01:18:51.210

**在 PHP 代码的开头添加**：

```
ini_set('session.cache_limiter','public');
session_cache_limiter(false); 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-10-06T04:25:21.523

在主页中设置 Cache-Control 标头。

```
<?php
header('Cache-Control: max-age=900');
?> 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-11-26T06:38:03.047

**使用 Post/Redirect/Get 规则可以避免这种情况。**

此问题将由以下情况出现：

*   假设我有`example1.php`，`example2.php`并且`example3.php`
*   从那时起，我发布了一些值`example1.php`，`example2.php`然后我根据需要完成了所有数据库内容并渲染了页面（未重定向 - 刚刚发布并且页面被渲染）。
*   之后，我将页面从 重定向`example2.php`到`example3.php`。现在，如果您单击浏览器返回**Document 将过期**。

**为了避免这种情况，我们可以将值发布`example1.php`到`example2.php`并立即将用户重定向到其他页面。**

这是可以遵循的[Post/Redirect/Get模式以避免文档过期。](http://en.wikipedia.org/wiki/Post/Redirect/Get)它还有助于避免数据库中的冗余条目。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-12-01T10:49:17.620

只需将此行放在您的页面中。

```
<?php 
header("Cache-Control: max-age=300, must-revalidate"); 
?> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-09-16T05:26:28.483

去你的服务器的 php.ini 并改变它

```
session.cache_limiter = nocache 
```

作为

```
 session.cache_limiter = public 
```

问题就解决了。我用这个解决了我的问题。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-07-03T13:38:41.127

我遇到了同样的问题。我想返回的页面发布了表单值，因此当我点击返回链接时，它显示文档过期错误。见例子——

共有三个页面，page1.php、page2.php 和 page3.php。现在我正在使用 POST 方法从 page1.php 向 page2.php 提交一些表单。从 page2.php 我点击了 page3.php 的一些链接。

现在我想从 page3.php 回到 page2.php。但是 page2.php 使用 POST 方法发布了表单值，当我从 page3.php 进入 page2.php 时，浏览器显示错误“Docuemnt Expired”。

所以我使用**GET**方法**而**不是**POST**。因此，当返回 page2.php 时，将不会有表单的 POST 值，并且页面将正确加载。此外，由于 URL 中存在表单值，因此页面将按预期加载。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-29T08:34:12.073

检查是否在标头上禁用了缓存，例如

`<HTTP-EQUIV="PRAGMA" CONTENT="NO-CACHE">`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-02-04T10:51:45.480

这个问题会在以下两种情况下出现：

*   实现搜索`Post`
*   重定向回之前发布的页面。

有两种方法可以轻松克服这个问题，而无需任何黑客攻击。

对于`search form`不使用`post`方法，而是使用 get 方法，一切正常。

如果您出于某种原因确实需要隐藏表单输入并想使用 post 方法，那么导致重定向到其他页面的链接/操作，使其通过 JavaScript 重定向。

```
location.replace('http://example.com/page2'); 
```

这将删除推荐 URL 并强制执行新的 http 请求。现在按浏览器上的后退按钮不会导致文档过期。

# c# - 将 HashSet 加入 LINQ to SQL 查询

> ID：10795557
> 
> 赞同：1
> 
> 时间：2012-05-29T08:26:07.743
> 
> 标签：c#, sql, linq, join, hashset

我有一个 HashSet，其中包含必须选择的项目的列表 int int ids。

```
HashSet<int> SelectedItems = new HashSet<int>() 
```

项目的完整列表由 LINQ to SQL 语句加载。我将填充以下内容的 ObservableCollection：

```
public class DataItem
{
    public int Id { get; private set; }
    public name String { get; private set; }
    public bool IsSelected { get; set; }
} 
```

如果Id在HashSet中，则IsSelected属性必须设置为true，否则必须设置为false；

这是我的 LINQ 查询：

```
var items =
    from c in itemsContext.DataItems
    where (c.Latest == true)
    select c; 
```

如何将 HashSet 加入到上述查询中以达到我想要的结果？

谢谢

PS：很抱歉，但我不知道为什么代码块格式不正确。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T08:32:55.503

如果我正确理解了您的问题，即与内存中的选定项相对应的数据项...然后使用包含...

```
from dataItem in context.DataItems
where dataItem.Latest && SelectedItems.Contains(dataItem.Id)
select dataItem; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T11:42:30.163

这是我想出的解决方案：

```
from dataItem in context.DataItems
where dataItem.Latest
select new {dataItem.Id,dataItem.Name,IsSelected=SelectedItems.Contains(dataItem.Id)}; 
```

感谢您为我指明正确的方向。

# cloud - 构建解决方案来处理未处理协议到已处理的大型数据集

> ID：10795561
> 
> 赞同：0
> 
> 时间：2012-05-29T08:26:34.643
> 
> 标签：cloud, salesforce

我对云计算的一般概念和 salesforce.com 的概念很陌生，并且有一点 Java 经验。我有一项任务要完成，需要社区的帮助。以下是对我的要求以及与此相关的问题的描述

1：必须创建一个按计划运行的功能来处理信息（自定义对象）

2：在 Salesforce 中安排功能

3：将 CSV 文件示例上传到未处理的协议自定义对象

我的问题（在这里我期待一些直接的几行答案和/或相关用户指南或教程的链接）：

对于 1：如何创建功能并使其按计划运行？

对于 2：这句话是什么意思？

For 3：逗号分隔值的意义是什么，为什么以及如何上传。

再一次，我不是在寻找这个问题的直接完整解决方案，而是一些提示/提示让我开始并通过 saleforce.com 为我指明正确的方向

期待着听到您的意见

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T11:21:10.813

在阅读您的要求时，我认为您需要定期处理来自对象的记录并安排它在特定时间段运行。

Salesforce 有一个叫做批处理的东西，它可以处理 200 条记录，您可以安排这个批处理在特定时间运行。看看[http://www.salesforce.com/us/developer/docs/apexcode/Content/apex_batch_interface.htm](http://www.salesforce.com/us/developer/docs/apexcode/Content/apex_batch_interface.htm)了解 abt 批处理

您可以通过编写实现可调度接口的类来调度此批处理过程。 [http://www.salesforce.com/us/developer/docs/apexcode/Content/apex_scheduler.htm](http://www.salesforce.com/us/developer/docs/apexcode/Content/apex_scheduler.htm)

对于 3，我假设您要将数据导入 SF。您可以使用 Data loader，这是一个可以在此处下载的应用程序[http://sourceforge.net/projects/sforce-app-dl/](http://sourceforge.net/projects/sforce-app-dl/)

以及有关此处数据加载器的更多信息[http://wiki.developerforce.com/page/Data_Loader](http://wiki.developerforce.com/page/Data_Loader)

# c++ - 创建指针数组时运算符 new[] 的语法

> ID：10795562
> 
> 赞同：0
> 
> 时间：2012-05-29T08:26:36.157
> 
> 标签：c++, new-operator, dynamic-arrays, dynamic-allocation

在创建`new[]`指向`char`. 由于`char*`是我希望元素的类型，因此我使用括号将其括起来，但它不起作用：

```
char **p = new (char *)[vector.size()]; 
```

但是当我去掉括号时它会起作用：

```
char **p = new char *[vector.size()]; 
```

为什么后一种有效？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T08:40:37.557

`char *p = new char[10];`为大小为 10 个字符的数组动态分配内存块，并返回其第一个元素的地址，然后将其存储到其中`p`（`p`指向该内存块的开头）。

在这种情况下，`new`关键字后跟**一个数组类型说明符**，您指定**类型**：
`char **p = new char*[10];`- 在这种情况下，类型是`char*`，不是`(char*)`。检查[运算符 new[]](http://www.cplusplus.com/reference/std/new/operator%20new%5B%5D/)

您可能会因为 C 风格的`malloc`语法而感到困惑，其中返回值的类型总是`void*`，可以将其转换为不同的类型，以便您可以取消引用它。这就是您使用`(char*)`语法（C 风格类型转换）的情况：`char *p = (char*) malloc(10);`
虽然请注意在 C 中这种转换是多余的：[我是否转换 malloc 的结果？](https://stackoverflow.com/q/605845/1168156)

请注意，使用分配的内存`new[]`应通过调用释放，`delete[]`分配的内存`malloc`应由 释放`free`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T08:40:38.567

这是“声明遵循使用”的结果。`char **p;`可以读作“如果我取消引用 p 两次，我将得到一个`char`”。`(char*) *p`左边没有类型，并被解析为表达式，意思是：“取消引用`p`并将结果转换为指向`char`”的指针。

当`char **`单独用作类型名称时，类似的约定成立。`(char*) *`根本不解析为类型名称，而是解析为表达式（因为左侧没有类型）。

# javascript - 获取 HTML table 的 childNodes 的错误

> ID：10795565
> 
> 赞同：1
> 
> 时间：2012-05-29T08:26:51.837
> 
> 标签：javascript, dom

我对 HTML DOM 有点困惑。我正在尝试获取特定的行，`<table>`以便我可以通过它们进行交互。

HTML 标记：

```
 <table style="width:70%" id="PersonalInfoExtendedModel_Table" >
      <tr>
      <td><span id="PersonalInfoExtendedModel_FirstName">@Html.DisplayFor(m => m.FirstName)</span></td>
      <td><span id="PersonalInfoExtendedModel_JobLocation">@Html.DisplayFor(m => m.JobLocation)</span></td>

      </tr>

      <tr>
      <td><span id="PersonalInfoExtendedModel_MiddleName">@Html.DisplayFor(m => m.MiddleName)</span></td>
      <td><span id="PersonalInfoExtendedModel_StateOfResidence">@Html.DisplayFor(m => m.StateOfResidence)</span></td>

      </tr>

      <tr>
      <td><span id="PersonalInfoExtendedModel_LastName">@Html.DisplayFor(m => m.LastName)</span></td>
      <td><span id="PersonalInfoExtendedModel_SSN">@Html.DisplayFor(m => m.SSN)</span></td>

      </tr>

      <tr>
      <td><span id="PersonalInfoExtendedModel_Suffix">@Html.DisplayFor(m => m.Suffix)</span></td>
      <td><span id="PersonalInfoExtendedModel_USDriversLicenseNumber">@Html.DisplayFor(m => m.USDriversLicenseNumber)</span>&nbsp;&nbsp;<span id="PersonalInfoExtendedModel_USDriversLicenseState">@Html.DisplayFor(m => m.USDriversLicenseState)</span></td>

  </tr>

  <tr>
  <td><span id="PersonalInfoExtendedModel_DOB_Date">@Html.DisplayFor(m => m.DOB_Date)</span>&nbsp;<span id="PersonalInfoExtendedModel_DOB_Month">@Html.DisplayFor(m => m.DOB_Month)</span>&nbsp;<span id="PersonalInfoExtendedModel_DOB_Year">@Html.DisplayFor(m => m.DOB_Year)</span></td>
  <td></td>
  </tr>
</table> 
```

我在 JS 和 Jquery 中所做的：

```
var rows = document.getElementById(model + "_Table").childNodes; 
```

上面这行给了我一些奇怪的 childNodes。我的 rows[] 有一个“文本”孩子和一个`<table>`孩子！！所以我也尝试了：

```
var rows = document.getElementById(model + "_Table").childNodes[1].childNodes; 
```

在调试时，第二行给出了在 Google Chrome 中看到的以下 childNode： 0：HTMLTableRowElement 1：Text 2：HTMLTableRowElement 3：Text 4：HTMLTableRowElement 5：Text 6：HTMLTableRowElement 7：Text 8：HTMLTableRowElement 9：Text

为什么第二行没有得到只是行？为什么第一行本身不获取所有行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T08:35:50.380

> 上面这行给了我一些奇怪的 childNodes。我的 rows[] 有一个“文本”孩子和一个`<table>`孩子！！

我怀疑你看到的是一个`tbody`孩子，而不是一个`table`孩子。所有表格都至少有一个[`tbody`元素](http://www.w3.org/TR/html5/the-tbody-element.html#the-tbody-element)。如果您没有在标记中提供一个，浏览器会为您添加它（在标准模式下；我不知道在 quirks 模式下会发生什么，因为我从不在 quirks 模式下工作）。该表也可能有一个`Text`用于其中空格的节点。您提到了 Chrome；您可以使用开发工具的“元素”选项卡来探索浏览器为响应您的标记而创建的 DOM。

如果`tr`要从表中获取元素，如果没有嵌套表，可以这样做：

```
var rows = document.getElementById(model + "_Table").getElementsByTagName('tr'); 
```

或者，您可以使用[`rows`property](http://www.w3.org/TR/html5/the-table-element.html#dom-table-rows)，它为您提供表自己的行（而不是嵌套表的行）：

```
var rows = document.getElementById(model + "_Table").rows; 
```

请注意，元素`rows`上的将包括表中的`table`所有行和子元素。如果*只*想要某一个，各有各的[属性](http://www.w3.org/TR/html5/the-tbody-element.html#dom-tbody-rows)。`tbody``thead``tfoot`*`rows``tbody``tbody`[`rows`](http://www.w3.org/TR/html5/the-tbody-element.html#dom-tbody-rows)*

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T08:41:49.530

1.  浏览器添加了一个`<tbody>`，这就是您无法直接访问的原因`<tr>`。

2.  子节点“文本”指的是行之间的空格。只需删除换行符就可以了。

我更喜欢使用`querySelectorAll`：

```
document.querySelectorAll("#"+model + "_Table tr") 
```

但如果您关心 IE6 用户，您的选择将如下所示：

```
var rows = document.getElementById(model + "_Table").rows; 
```*

# android - 关闭列表视图

> ID：10795568
> 
> 赞同：0
> 
> 时间：2012-05-29T08:27:13.677
> 
> 标签：android

我正在填充一个简单的列表视图，当我单击一个按钮时它会显示出来，现在的代码是

```
st.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                setlist=new  ArrayList<String>();
                setlist.add("Change Password");
                setlist.add("Change Image");
                setlist.add("Logout");
                settr=new ArrayAdapter<String>(ChatPref.this, android.R.layout.simple_list_item_1,setlist);
                llr.setAdapter(settr); 
```

现在我想知道，我能做些什么来关闭这个列表视图，因为按下后会带我回到我以前的活动..任何帮助将不胜感激..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T08:29:57.747

```
setlist.clear(); and then settr.notifyDataSetChanged(); 
```

**或者**

```
listView.setVisibility(View.INVISIBLE); 
```

# java - 如何将 $ 符号添加到 BigDecimal 类型

> ID：10795569
> 
> 赞同：1
> 
> 时间：2012-05-29T08:27:16.767
> 
> 标签：java, symbols, bigdecimal

如何`$`为类型添加符号前缀`Bigdecimal`？
我有一个要填充值的响应对象。在设置这些值时，我必须设置一个类型的值，`BigDecimal`作为响应，我需要`$`在该值之前获取一个符号。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T08:29:09.747

阅读[`DecimalFormat`](http://docs.oracle.com/javase/6/docs/api/java/text/DecimalFormat.html)，可用于格式化货币金额。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T08:40:27.520

你可以试试这个

```
import java.text.DecimalFormat;

public class Test {
        public static void main(String [] args){
            DecimalFormat decimalFormat = new DecimalFormat("$ #.00");
            double myNumber = 1234.568;
            System.out.print(" -> " + decimalFormat.format(myNumber));
        }
    } 
```

可以选择更多关于课程的细节在[这里](http://docs.oracle.com/javase/6/docs/api/java/text/DecimalFormat.html)

# linux - 没有在小猎犬板上获得目标终端

> ID：10795572
> 
> 赞同：0
> 
> 时间：2012-05-29T08:27:51.497
> 
> 标签：linux, embedded, beagleboard

我有小猎犬板。我能够在板上安装内核和根文件系统。但我没有得到终端。根文件系统已成功安装。但它没有给出目标提示（#）。所以任何人都可以提出解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T21:50:43.547

BeagleBoard 默认不启用串行登录。正如 dien 所提到的，您需要编辑 /etc/inittab。但这里有一篇专门为小猎犬板解释这一点的帖子（参见“串行控制台”部分）。[http://wiki.sabayon.org/index.php?title=Hitchhikers_Guide_to_the_PandaBoard](http://wiki.sabayon.org/index.php?title=Hitchhikers_Guide_to_the_PandaBoard)

# javascript - 在 Django 的反向函数中忽略变量类型

> ID：10795582
> 
> 赞同：1
> 
> 时间：2012-05-29T08:28:17.900
> 
> 标签：javascript, django

我正在尝试使用 URL 名称发送 URL 信息并在 JavaScript 中进行处理。所以我不会在通过反向函数生成它时设置真正的参数，因为错误的数据类型会触发错误：

```
reverse("url-name", args = ["{0}", "{1}", "{2}"]) # The first parameter should be number 
```

Javascript：

```
url = url.replace("{0}", 34)\
      .replace("{1}", "Cem")\
      .replace("{2}", "Şebinkarahisar"); 
```

有没有办法在 Django 中生成数据类型时忽略它们？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T17:58:54.440

看看[django.js](http://pypi.python.org/pypi/django.js)。这是一个执行您想要的应用程序：

```
{% load js %}
{% django_js %}
<script>
    Django.onReady(function(){
        console.log(Django.url('my-url', param1, param2, param3));
        console.log(Django.url('my-url', [param1, param2, param3]));
        console.log(Django.url('my-url', {
            param1: param1,
            param2: param2,
            param3: param3
        })
    });
</script> 
```

# java - 没有 Java EE 容器的 JAX-WS Web 服务

> ID：10795586
> 
> 赞同：0
> 
> 时间：2012-05-29T08:28:26.003
> 
> 标签：java, jax-ws, endpoint

我可以使用 javax.xml.ws.Endpoint 轻松发布 Web 服务。端点.publish(getURL()); 我想知道为什么我必须使用真实 IP 将 web 服务发布到远程。换句话说。

> 当我使用 URL http://localhost:1970/XXXService

无法从远程计算机连接 XXService。

> 但是当 httpp://47.168.96.47:1970/XXXService

使用它可以从任何机器远程或本地连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T11:02:11.960

我在stackoverflow上再次找到了解决方案。这是问题/答案 [link] [Publishing a WS with Jax-WS Endpoint](https://stackoverflow.com/questions/3680600/publishing-a-ws-with-jax-ws-endpoint)

我既没有使用 localhost 也没有使用真实 ip。相反，我使用了 0.0.0.0。它现在可以工作了，服务可以在外部发布。

# asp.net - 在 IIS 上为具有 HTTP 重定向的 Web 应用程序配置 SSL

> ID：10795588
> 
> 赞同：0
> 
> 时间：2012-05-29T08:28:28.793
> 
> 标签：asp.net, iis, web-applications, ssl

我有一个像 demo.Firm.ch 这样的子地址。在 IIS 上有三个 Webapplication 就可以了。

特定的 Web 应用程序使用 HTTP 重定向。在这种情况下，重定向到此目的地：

(IP) xxx.xxx.xxx.xxx/applicationfolder

因此，对于 SSL，我将为端口 443 添加绑定：

在我将激活 SSL 设置（需要 SSL）之后：

我将使用客户端浏览器进行测试：

403 - 禁止：访问被拒绝。您无权使用您提供的凭据查看此目录或页面。

为什么我在激活 SSL 后没有权限访问 Web 应用程序？

感谢您的回复！

戴夫

# android - 在android中释放连接

> ID：10795591
> 
> 赞同：1
> 
> 时间：2012-05-29T08:28:49.430
> 
> 标签：android, httpclient, illegalstateexception

我的第一个活动中只有一个**httpclient**用于所有其他活动。因为我使用的是**PHP Sessions**。

在我的第一个活动中，我有一个列表视图，它需要 4-5 秒来加载项目（这将通过与服务器的连接来完成），并且在同一个活动中，我有一个搜索字段...单击按钮会将我带到使用相同 httpclient 搜索结果的 searchActivity 将加载到不同的列表视图中。我的问题是在第一个活动的 4-5 秒加载时间内，如果我尝试搜索某些内容，我的应用程序崩溃说：

> > **SingleClientConnManager**的使用无效：仍然分配了连接。

确保在分配另一个连接之前释放连接。

> > **java.lang.IllegalStateException：没有包装的连接。**

最终出现空指针异常

我认为在完成第一个活动之前我在 searchActivity 中使用相同的 httpclient 会产生此错误（如果错了，请纠正我）

因此，如果我的假设是正确的，我如何才能在我从第一个活动转移到 searchAvtivity 的意图中释放这种连接？

谢谢

代码：

```
 try {
        HttpPost httppost = new HttpPost(
                SignUpActivity.url+"/feed/fetchfeed");
        httppost.setHeader("X_REQUESTED_WITH", "xmlhttprequest");
        httppost.setHeader("MOBILE_DATA_REQUESTED", "mobileHttpRequest");
        HttpResponse response = SignUpActivity.httpclient.execute(httppost);

        Log.d("response", "" + response);
        HttpEntity entity = response.getEntity();

        Log.d("entity", "" + entity);
        is = entity.getContent();

        Log.d("is", "" + is);

        try {
            BufferedReader reader = new BufferedReader(
                    new InputStreamReader(is, "iso-8859-1"), 8);
            sb = new StringBuilder();
            sb.append(reader.readLine() + "\n");

            Log.d("sb", "" + sb);
            String line = "0";
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            result = sb.toString();
            Log.d("result", result);
        } catch (Exception e) {
            Log.e("error3", "Error in http connection" + e.toString());
        }

        Log.e("response", "response is:" + response.toString());
    } catch (Exception e) {
        Log.e("error4", "Error in http connection" + e.toString());
    }

    try {
        Log.d("JArray", "entered try");
        JArray = new JSONArray(result);
        feed_products_list = new ArrayList<Product>();
        Log.d("JArray", "try last line");
    } catch (JSONException e) {
        Log.d("JArray", "in catch");
        e.printStackTrace();
    }

    JSONObject jsonObj;
    JSONObject jsonObjStore;
    JSONObject jsonObjUser;

    for (int i = 0; i < JArray.length(); i++) {
        try {
            Log.d("jsonObj",
                    "entered try" + " " + i + " " + JArray.length());
            jsonObj = JArray.getJSONObject(i);
            jsonObjUser = jsonObj.getJSONObject("user");
        } catch (Exception e) {
            Log.d("jsonObj", "in catch");
            continue;
        }

        try {
            Log.d("feed_products_list", "entered try");
            Log.d("type of action", jsonObj.getString("action"));
            if (jsonObj.getString("action").equals("entry")) {
                Log.d("if block", "entered block 'entry'");

                jsonObjStore = jsonObj.getJSONObject("store");
                Log.d("store", jsonObjStore.getString("name"));

                feed_products_list.add(new Product(jsonObj.getInt("id"),
                        jsonObj.getString("action"), jsonObj
                                .getString("image"), jsonObj
                                .getString("product_name"), jsonObj
                                .getString("reported_price_formated"),
                        jsonObjStore.getString("name"), jsonObjStore
                                .getString("area"), jsonObjStore
                                .getString("city"), jsonObj
                                .getString("mrp"), jsonObjUser
                                .getString("name"), jsonObj
                                .getLong("reported_timestamp"), jsonObj
                                .getInt("discount"), jsonObjStore
                                .getDouble("lat"), jsonObjStore
                                .getDouble("lng")));

                Log.d("store id", jsonObjStore.getString("id"));
                Log.d("feed_products_list product: ",
                        feed_products_list.get(i).lat + "   "
                                + feed_products_list.get(i).lng);

            } else if (jsonObj.getString("action").equals("contest")) {
                Log.d("if block", "entered block 'contest'");
                feed_products_list.add(new Product(jsonObj.getInt("id"),
                        jsonObj.getString("action"), jsonObjUser
                                .getString("image"), jsonObj
                                .getString("product_name"), jsonObj
                                .getString("city"), jsonObjUser
                                .getString("name"), jsonObj
                                .getLong("reported_timestamp")));

                Log.d("feed_products_list",
                        feed_products_list.get(i).productName);

            }

        } catch (JSONException e) {
            e.printStackTrace();
        }
    }
    m = 1;
} 
```

我添加了这个：

```
 try {
                    is.close();
            Intent intent = new Intent(FeedListViewActivity.this,
                            SearchActivity.class);
                    startActivity(intent);
                    Log.d("onClick", search_string);
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } 
```

但我得到了同样的错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T08:40:53.433

如果您关闭`InputStream`从 httpclient 获得的 '，连接将自动关闭。检查您的代码并确保您正确关闭它们。

# java - 对多个包 Eclipse 的相同更改

> ID：10795595
> 
> 赞同：0
> 
> 时间：2012-05-29T08:29:01.180
> 
> 标签：java, android, eclipse

我为 Android 制作了一个游戏，我有两个几乎相同的包。唯一将它们分开的是其中一个包含 Adsense。所以现在，如果我想进行一些更改并继续开发我的游戏，我想在不做太多工作的情况下将其应用于游戏的两个版本。我该怎么做，或者有人有更好的主意吗？因为我必须有两个不同的包才能上传到 Google Play 上的不同版本（免费和非免费）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T08:34:37.707

使用库项目作为游戏的主要部分，并使用两个应用程序项目来处理差异：http: [//developer.android.com/guide/developing/projects/index.html#LibraryProjects](http://developer.android.com/guide/developing/projects/index.html#LibraryProjects)

# java - 在其他几个方法执行完成后触发 Spinner 的 Android OnItemSelected

> ID：10795597
> 
> 赞同：3
> 
> 时间：2012-05-29T08:29:06.330
> 
> 标签：java, android, spinner, listener

我一直在研究有关微调器以及何时触发 onItemSelected 的线程。我得出的结论是，无论您是手动选择微调器项目还是通过 spinner.setSelection(position) 方法以编程方式选择项目都会触发它。

我的问题是我的代码中首先调用了 OnItemSelected 回调方法，但是在其他几个方法完成执行后才执行它。这是不受欢迎的行为，因为我的代码逻辑依赖于按顺序执行的某些步骤。

```
if(conition is true)
  fillSpecialtySpinner();

if(another condition is true)
  fillSubSpecialtySpinner(); 
```

fillSpecialtySpinner() 方法包含 spinner.setSelection(position) 行代码。但不知何故，它在检查第二个 if 并且 fillSubSpecialtySpinner 完成执行之后执行。

任何帮助，将不胜感激。先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T09:49:16.660

如果我理解正确，您希望确保该`fillSubSpecialtySpinner()`方法仅在`specialitySpinner.onItemSelected()`.

你`fillSubSpecialtySpinner()`能从内部打电话`specialitySpinner.onItemSelected()`吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-15T19:54:24.407

是的，在执行所有其他函数之前，回调不会发生，广告 Baqueta 说。

因此，您不能执行诸如将布尔值设置为 false 之类的操作，对微调器进行更改（如果布尔值为 true，则执行 onItemSelected 中的代码），然后将其设置为 true，因为在您的布尔值变为 true 后，该函数将被调用。

但是，我对这个问题有一个简单而通用的解决方案（请参阅该问题的公认答案）：

[不需要的 onItemSelected 调用](https://stackoverflow.com/questions/21747917/undesired-onitemselected-calls/21751327#21751327)

# hardware - 有没有办法在没有硬件虚拟化（amd-v，vt-x）的64位处理器上运行64位虚拟机？

> ID：10795604
> 
> 赞同：1
> 
> 时间：2012-05-29T08:29:26.067
> 
> 标签：hardware, vmware, virtualization, virtualbox, openvz

我们有一个 64 位虚拟机 (CentOS)，我们想在 64 位主机上运行（可能在任何操作系统下运行），但该主机不支持硬件虚拟化，你知道，它应该用于在其中运行 64 位虚拟机。

我尝试过 VirtualBox 和 VMware Player，但它们都存在非硬件虚拟化处理器的问题。我想也许另一个虚拟化系统可能会有所帮助，比如 OpenVZ 或 XEN 或 KVM？你怎么看？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T08:35:42.533

Qemu [http://www.qemu.org/](http://www.qemu.org/)可以在没有硬件支持的情况下虚拟化架构（甚至是 ARM、MIPS 等）。但是，它可能会比使用带有虚拟化硬件的 qemu-kvm 慢很多。

# javascript - 如何获得加载 ajax 的 img 的尺寸？

> ID：10795612
> 
> 赞同：0
> 
> 时间：2012-05-29T08:29:47.903
> 
> 标签：javascript, jquery, ajax

我正在使用 jquery 加载图像：

```
var myImg = new Image();

$(myImg).load(function(){
    console.log("image dimensions:"); // what should I put here ?
}).attr("src", "/path/toImg/"); 
```

加载 img 时，有没有办法获得它的宽度和高度？请注意，问题是我想在将 img 附加到正文之前获得此信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T08:32:20.897

它应该是：

```
$(myImg).load(function(){
    var w = this.width;
    var h = this.height;
    ...
}).attr("src", "/path/toImg/"); 
```

演示在[http://jsfiddle.net/alnitak/c4JJf/](http://jsfiddle.net/alnitak/c4JJf/)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-29T08:32:05.067

试试这个：

```
var curHeight;
var curWidth;

function getImgSize(imgSrc)
{
    var newImg = new Image();
    newImg.src = imgSrc;
    curHeight = newImg.height;
    curWidth = newImg.width;    
} 
```

# c# - 向 ItemsControl 的画布添加额外元素

> ID：10795615
> 
> 赞同：0
> 
> 时间：2012-05-29T08:29:58.990
> 
> 标签：c#, wpf, xaml, wpf-controls

我有一个这样的 ItemsControl 设置：

```
<Grid>
    <ItemsControl ItemsSource="{Binding Asteroids}">
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <Canvas Background="Black">
                        <!-- i want to add another polygon to the canvas-->
                        <!--<Polygon Name ="ShipPolygon" Points="{Binding Ship}" Fill="Blue" />-->
                    </Canvas>
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <Polygon Fill="Gray" Points="{Binding AsteroidPoints}" />
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl>
    </Grid> 
```

如您所见，ItemsControl 将集合的元素显示为画布中的多边形。但我也想在这个画布上添加另一个多边形，这里命名为“ShipPolygon”。我不能这样做，因为我得到了一个 XMLParseException。这样做的正确方法是什么？提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T09:00:36.247

您正在使用 ItemsControl，它可以在项目面板上显示多个相似的项目。

现在显然你不能在你`ItemsPanelTemplate`那里添加一些东西你只是告诉itemscontrol它应该使用哪个面板来显示它的项目。您的 ItemsSource 和 ItemTemplate 建议您只想在 ItemsControl 中显示 Asteroids。所以最简单的方法就是用你的小行星将你的船覆盖在 itemscontrol 上

```
<Grid>
    <ItemsControl ItemsSource="{Binding Asteroids}">
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <Canvas Background="Black"/>
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <Polygon Fill="Gray" Points="{Binding AsteroidPoints}" />
                </DataTemplate>
            </ItemsControl.ItemTemplate>
    </ItemsControl>

    <Polygon Name ="ShipPolygon" Points="{Binding Ship}" Fill="Blue" />
</Grid> 
```

否则，您也可以将其添加到 itemscontrol，但随后需要使用不同的 ItemTemplates。而且您需要处理的是，您的 ItemsControl 不再只包含小行星。使用隐式项模板

```
<!-- No key, so it is implicit and automatically used-->
<DataTemplate DataType="{x:Type Asteroids}">
    <Polygon Fill="Gray" Points="{Binding AsteroidPoints}" />
</DataTemplate>

<DataTemplate DataType="{x:Type Player}">
    <Polygon Name ="ShipPolygon" Points="{Binding Ship}" Fill="Blue" />
</DataTemplate>

<!-- above must be in a resource section, like app.xaml -->

<Grid>
    <ItemsControl ItemsSource="{Binding Entities}">
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <Canvas Background="Black"/>
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
    </ItemsControl>
</Grid> 
```

或者您可以使用 DataTemplateSelector。

# php - 在 PHP 中，echo 后跟两个单引号是什么意思？

> ID：10795619
> 
> 赞同：0
> 
> 时间：2012-05-29T08:30:24.250
> 
> 标签：php

我正在为一个非常旧的网站浏览别人的代码，它有很多这样的行：

```
echo ''; 
```

我对 PHP 不熟悉，但快速浏览了语法教程后，似乎该命令将打印单引号的内容。但是，单引号是空的，并且有很多这样的实例。

这些行的目的是什么，它们是如何出现在代码中的？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-29T08:33:27.693

你是对的，他们只是打印出空字符串。我只能猜测它们是如何进入您的代码的，但删除它们肯定是安全的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-29T08:34:01.530

单引号或双引号用于表示字符串，因此：

```
echo ''; 
```

您基本上没有打印**空**字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T08:41:25.023

我能想到的选择 '' vs "" 的唯一想法是：

```
echo '"';    // print "
echo "'";    // print ' 
```

# javascript - 连续音乐播放器Javascript

> ID：10795623
> 
> 赞同：0
> 
> 时间：2012-05-29T08:30:49.263
> 
> 标签：javascript, iframe, frame, audio-player, soundmanager2

> **可能重复：**
> [网站上不间断的背景音乐](https://stackoverflow.com/questions/529952/uninterrupted-background-music-on-website)

我有一个使用 SoundManager2 构建的音乐播放器，需要一种方法将其添加到我的 wordpress 站点，以便在用户更改他们所在的页面时继续播放。

框架是最好的方法吗？我根本不能伤害 SEO！

感谢您的任何帮助和建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T08:55:56.880

我认为你必须对你的网站进行 Ajaxify，使用框架或弹出窗口不是一个很好的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T10:12:02.400

使用 ajax/jquery 将您的网站转换为动态网站。

这样，您的页面的一部分可以加载和播放音频/视频，而页面的其余部分会在用户浏览网站时简单地更新，而不会中断媒体。

# asp.net - IHttpModule 过滤器写入方法不调用 asp.net

> ID：10795625
> 
> 赞同：0
> 
> 时间：2012-05-29T08:31:00.253
> 
> 标签：asp.net, jsonp, asp.net-web-api

我正在尝试更改响应以获取 jsonp（用于 Web 服务），但问题是永远不会调用 write 方法，最后只调用了 flush()，url 是 localhost:8080/api/employees

它的调用web api和员工是一个控制器文件，

被调用的控制器方法

```
public List<Models.Employee> Get() {

            var employees = from e in _context.Employees
                            select new Models.Employee {
                                Id = e.EmployeeID,
                                FirstName = e.FirstName,
                                LastName = e.LastName
                            };

            return employees.ToList();

} 
```

调用的 IHTTPModule 方法

```
public void OnReleaseRequestState(object sender, EventArgs e)
        {
            HttpResponse response = HttpContext.Current.Response;
            if (response.ContentType != JSON_CONTENT_TYPE && response.ContentType != JSON_CONTENT_TYPE1) return;

            //response.ContentEncoding =
           // char[] c = { 'd', 's', 'w', 'w' };

            response.Filter = new JsonResponseFilter(response.Filter);
            //response.Cache.
           // response.ClearContent();
           // response.Write(c, 0, 4);
           // response.Flush();
        } 
```

现在 JsonResponseFilter.write 不被称为这就是问题，任何人都请回复以解决它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T08:35:36.747

你做错了。不要使用任何 IHttpModules。在 Web API 中实现此目的的正确方法是使用自定义[媒体格式化程序](http://www.asp.net/web-api/overview/formats-and-model-binding/media-formatters)。例如，您可以集成一个[JsonpFormatter](https://github.com/thinktecture/Thinktecture.Web.Http/blob/master/Thinktecture.Web.Http/Formatters/JsonpFormatter.cs)`Application_Start`并为您的 Web 方法启用 JSONP：

```
var config = GlobalConfiguration.Configuration;
config.Formatters.Insert(0, new JsonpMediaTypeFormatter()); 
```

# php - PHP 十六进制字符串作为套接字发送

> ID：10795626
> 
> 赞同：1
> 
> 时间：2012-05-29T08:31:02.260
> 
> 标签：php, sockets, hex

我在字符串变量中有以下十六进制格式：

```
$str = "0dae28"; 
```

我想通过套接字接口将上述内容作为十六进制值（例如 0x0dae28）发送：

```
socket_write($spawn,$output,strlen($output)); 
```

因此，我很好奇我应该怎么做才能以`$str`十六进制格式的数据发送。`$output``$output`

非常感谢任何输入。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T08:53:23.507

使用 PHP 的[`hex2bin()`](http://www.php.net/manual/en/function.hex2bin.php)函数：

> **Example #1 hex2bin() 例子**
> 
> ```
> `<?php
> $hex = hex2bin("6578616d706c65206865782064617461");
> var_dump($hex);
> ?>`
> ```
> 
> `上面的示例将输出类似于：
> 
> ```
> string(16) "示例十六进制数据"
> ````

 `因此，在您的情况下：

```
$output = hex2bin($str); 
````

# iphone - 错误：Phonegap 中的白名单拒绝

> ID：10795628
> 
> 赞同：53
> 
> 时间：2012-05-29T08:31:11.877
> 
> 标签：iphone, html, cordova, whitelist

我是移动开发的新手。我正在使用 Phonegap/Cordova 创建跨平台应用程序。我的代码在 Android 上运行良好，但是当我将其移植到 iPhone 时，它​​显示错误：

```
[143:2003] ERROR whitelist rejection: url="abc" 
```

现在我能克服这个问题吗？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-05-29T08:45:21.550

> **注意**：此答案仅适用于 PhoneGap 1.x 及以下版本。从 2.x 版本开始，白名单配置通过`cordova.xml`.

您必须将允许的 URL 添加到 PhoneGap.plist（或 Cordova.plist）的 ExternalHosts 数组中。

例如，如果您想允许访问此 URL `http://www.myhost.com/path/file`，则将`www.myhost.com`其作为新条目添加到`ExternalHosts`数组中。

如果您想允许访问 Google 的所有子域上的内容（例如`maps.google.com`, `mails.google.com`），您可以将`*.google.com`其作为新条目添加到`ExternalHosts`数组中。

不过，我不确定你为什么在链接中得到“abc”。你有“abc”作为任何东西的链接吗？它是URI片段吗？

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2013-08-15T12:47:59.020

在 PhoneGap 3.0 中，您需要在 Project 文件夹中编辑 config.xml（注意：不是 www/config.xml）

```
<access origin="*" /> 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2013-07-23T18:09:58.050

在PhoneGap 3.0 中，您需要编辑`www/config.xml`、添加/编辑`<access>`标签。例如，如果您想允许所有内容，请将标签更改为：

```
<access origin="*" /> 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-06-29T06:51:16.180

您可以在 Cordova.plist 文件中添加以下代码：

```
<key>ExternalHosts</key>
       <array>
               <string>*.facebook.com</string>
       </array> 
```

作为`*.facebook.com`域名，您可以使用两个不同的子域。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-08-13T17:12:15.203

您必须加入域白名单，这样您才能访问外部域，例如[http://google.com](http://google.com)。

在 iOS (Cordova > 3.0.0) 中，白名单规则在元素中找到`AppName/config.xml`并用元素声明`<access origin="..." />`

您还可以使用通配符来声明域。例如，要允许访问 Google 的所有子域和 TLD（.com、.net 等），请使用`*.google.*`

参考：[域白名单指南](http://docs.phonegap.com/en/3.0.0/guide_appdev_whitelist_index.md.html#Domain%20Whitelist%20Guide)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-12T11:55:04.837

即使我遇到了同样的问题...我通过以下方式修复了它..在 cordova.plist--> ExternalHosts 数组菜单下，将项目添加为 * 或*.* . 所以它允许所有外部链接......如果你必须一一提到它作为*.facebook。*,*.google.* 等

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-06-06T05:39:28.900

这是因为 phonegap 不会接受外部 url。对于下面的 phonegap 旧版本，`2.x`我们需要`cordova.plist`像这样设置 url。

例如：（`*.google.co.in`您可以将您的网址放在 *.this 之后）和`OpenAllWhitelistURLsInWebView`---to --- `YES`。

# android - 从 SD 卡共享图像

> ID：10795630
> 
> 赞同：3
> 
> 时间：2012-05-29T08:31:27.250
> 
> 标签：android, image, share, android-sdcard

我正在尝试 2 周来寻找如何共享存储在 SD 卡上的图像但没有成功。

这个[答案](https://stackoverflow.com/questions/9018363/android-share-bitmap-not-saved-to-sd)对我不起作用，也不是我想要的。

我正在使用将图像存储到 SD 的*Cam Preview 应用程序*，然后将它们显示在应用程序内库中：

```
 public class GalleryView extends Activity {  

   private static final int SELECT_PICTURE = 1;

private String selectedImagePath;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.gallery_view);

    Gallery g = (Gallery) findViewById(R.id.gallery);
    g.setAdapter(new ImageAdapter(this, ReadSDCard()));

    g.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
    Intent intent = new Intent();
            intent.setType("image/*");
            intent.setAction(Intent.ACTION_GET_CONTENT);
            startActivityForResult(Intent.createChooser(intent, "Select Picture"), SELECT_PICTURE);
        }
    });
}

  public void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (resultCode == RESULT_OK) {
        if (requestCode == SELECT_PICTURE) {
            Uri selectedImageUri = data.getData();
            selectedImagePath = getPath(selectedImageUri);

            Intent shareIntent = new Intent();
            shareIntent.setAction(Intent.ACTION_SEND);
            shareIntent.putExtra(Intent.EXTRA_STREAM, selectedImagePath);
            shareIntent.setType("image/*");
            startActivity(Intent.createChooser(shareIntent, "Share image"));
        }
    }
}

public String getPath(Uri uri) {
    String[] projection = { MediaStore.Images.Media.DATA };
    Cursor cursor = managedQuery(uri, projection, null, null, null);
    int column_index = cursor
            .getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
    cursor.moveToFirst();
    return cursor.getString(column_index);
}

@Override
public void onDestroy() {
    super.onDestroy();       
}

private List<String> ReadSDCard() {

    createDirIfNotExists();

    List<String> tFileList = new ArrayList<String>();

    //It have to be matched with the directory in SDCard
    File f = new File("/sdcard/Cam App");

    File[] files=f.listFiles();

    for(int i=0; i<files.length; i++) {
        File file = files[i];
        /*It's assumed that all file in the path are in supported type*/
        tFileList.add(file.getPath());
    }

    return tFileList;
}

class ViewHolder {
    ImageView i;
}

public class ImageAdapter extends BaseAdapter {
    int mGalleryItemBackground;
    private Context mContext;
    private List<String> FileList;
    LayoutInflater inflater = getLayoutInflater();
    ViewHolder holder;

    public ImageAdapter(Context c, List<String> fList) {
        mContext = c;
        FileList = fList;
        TypedArray a = obtainStyledAttributes(R.styleable.GalleryTheme);
        mGalleryItemBackground = a.getResourceId(R.styleable.GalleryTheme_android_galleryItemBackground, 0);
        a.recycle();
    }

    public int getCount() {
        return FileList.size();
    }

    public Object getItem(int position) {
        return position;
    } 

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        ImageView i = new ImageView(mContext);

        Bitmap bm = BitmapFactory.decodeFile(FileList.get(position).toString());
        i.setImageBitmap(bm);

        if (convertView == null) {
            convertView = inflater.inflate(R.layout.gallery_item, parent, false);

            holder = new ViewHolder();
            holder.i = ((ImageView) convertView.findViewById(R.id.imagenGallery));

            convertView.setTag(holder);
        }
        holder.i.setScaleType(ImageView.ScaleType.FIT_XY);
        holder.i.setBackgroundResource(mGalleryItemBackground);

        return i;
    }
}

public TypedArray obtainStyledAttributes(int theme) {
    // TODO Auto-generated method stub
    return null;
}
} 
```

画廊工作正常，但我不知道如何分享保存在 SD 上的图像。

如何访问*Cam App 文件夹*中的图像并在图库中共享当时出现的图像？

我尝试使用位置，但它只适用于恒定图像。任何帮助/提示将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T12:59:16.597

好吧，我终于找到了解决方案，但这并不是我想要的：

```
g.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View v, int position, long id) {

            Intent intent = new Intent();
            intent.setAction(Intent.ACTION_GET_CONTENT);
            intent.setDataAndType(Uri.parse("file://" + "/sdcard/Cam App"), "image/*");
            startActivityForResult(Intent.createChooser(intent, "Select image to share:"), SELECT_PICTURE);
        }
    });
}

public void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (resultCode == RESULT_OK) {
        if (requestCode == SELECT_PICTURE) {
            Uri selectedImageUri = data.getData();
            //OI FILE Manager
            filemanagerstring = selectedImageUri.getPath();

            //MEDIA GALLERY
            selectedImagePath = getPath(selectedImageUri);

            //NOW WE HAVE OUR WANTED STRING
            if(selectedImagePath!=null)
                System.out.println("selectedImagePath is the right one for you!");
            else
                System.out.println("filemanagerstring is the right one for you!");

            Intent shareIntent = new Intent();
            shareIntent.setAction(Intent.ACTION_SEND);
            shareIntent.putExtra(Intent.EXTRA_STREAM, selectedImageUri);
            shareIntent.setType("image/*");
            startActivity(Intent.createChooser(shareIntent, "Share image via:"));
        }
    }
}

@SuppressWarnings("deprecation")
public String getPath(Uri uri) {
    String[] projection = { MediaStore.Images.Media.DATA };
    Cursor cursor = managedQuery(uri, projection, null, null, null);
    if(cursor!=null) {
        //HERE YOU WILL GET A NULLPOINTER IF CURSOR IS NULL
        //THIS CAN BE, IF YOU USED OI FILE MANAGER FOR PICKING THE MEDIA
        int column_index = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
        cursor.moveToFirst();
        return cursor.getString(column_index);
    }
    else return null;
} 
```

如果有人有更好的解决方案，请分享。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-08T05:05:23.180

以下代码可以正常工作，**如果您知道该图像的路径**

```
Intent shareit=new Intent(Intent.ACTION_SEND);
shareit.setType("image/jpeg");
File f = new File("imagepath");
shareit.putExtra(Intent.EXTRA_STREAM, Uri.fromFile(f));
startActivity(Intent.createChooser(shareit, "Share Image Via")); 
```

使用图像文件名创建文件，

`File f = new File(Environment.getExternalStorageDirectory() + File.separator + "image_file.jpg");`

# delphi - 通过 DataSnap 的 TCP/IP 连接

> ID：10795631
> 
> 赞同：5
> 
> 时间：2012-05-29T08:31:42.477
> 
> 标签：delphi, networking, tcp, datasnap

我使用 DataSnap（VCL 应用程序）在 Delphi XE 中编写了一个多层应用程序套件。

这将在我公司内部使用，主要用于替换过时的传真通信。

一切正常，但我遇到了一个不愉快的情况：服务器机器在路由器后面，所以它有一个内部网络 IP。我将（在路由器中）端口 211（DataSnap 默认）上的所有传入连接转发到服务器的内部 IP，并且大约十分之八的所有客户端连接到服务器没有任何问题。

问题是，在剩下的 2 次中，我遇到了各种连接错误（主要是连接超时）。当它这样做时，我必须关闭并重新打开服务器应用程序或（某些）客户端，然后它才能工作。

现在我还处于设计阶段，所以这只是一个麻烦，但是当我发布它时，我不想告诉所有人不要关闭应用程序（一旦它工作，它工作，没有更多问题） ，每次出现连接问题时关闭并重新打开应用程序。

我怎样才能消除这个问题？

我（仅）看过 NetCat 和 SoCat，但（对我而言）这种情况似乎有点过头了。还有其他方法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-17T14:51:04.380

解决方案是关闭路由器的内部防火墙。

# c++ - 将 const 变量声明为引用

> ID：10795634
> 
> 赞同：2
> 
> 时间：2012-05-29T08:31:50.760
> 
> 标签：c++, reference, declaration

在某些地方我见过这样声明的变量

```
const int &var1;
extern int & var2; 
```

这些变量在其他地方定义。我一直认为，当您声明对变量的引用时，您会将对该变量的引用绑定到同一个位置。我在这里遗漏了一些东西。此外，当没有限定符（例如 const 或 extern）时，我还没有看到如上声明的引用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T08:38:48.207

```
const int &var1; 
```

如果不是 a`class`或 a 的一部分，这是非法的`struct`。如果是，则必须在构造函数**初始化器列表**中对其进行初始化。

它合法的原因是因为该变量在创建该类的对象之前不存在。所以没有无限的参考，因为没有参考可言。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T08:37:15.860

变量的实际声明，无论是引用、指针还是普通变量，都与变量的类型无关。

即使在您的示例中您引用了变量，这也意味着与它们的初始化位置无关。拥有一个引用很有用，因为您从另一个变量中分配它，并且您实际上可以将它们用作指针，而无需关心取消引用它，仅此而已，它与其他任何变量一样是一个变量。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-29T08:39:41.897

```
int main()
{
    const int &var1;   
} 
```

> prog.cpp：在函数'int main（）'中：
> 
> prog.cpp:4：错误：“var1”声明为引用但未初始化
> 
> prog.cpp:6：错误：分配只读引用“var1”</p>

***编辑***：正如其他人所说，它可以成为构造函数的一部分`class`并在构造函数中初始化

# objective-c - 我可以在应用提交后更改应用内购买的定价吗

> ID：10795640
> 
> 赞同：3
> 
> 时间：2012-05-29T08:32:22.870
> 
> 标签：objective-c, ios, app-store, in-app-purchase

将应用提交到应用商店后，我可以更改应用内购买的定价吗？我想知道我们是否可以使用自定义价格，例如 1.75 美元或 2.50 美元等

如果这些都不可能，我该如何实现这些功能

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T08:47:51.143

a) 是的，您可以在任何阶段更改应用或应用内购买的定价。

b) 不可以，您只能使用预定义的价格等级。这里有一份非官方文件：App [Store Pricing Matrix](http://www.app-machine.com/hmcms_media/public/files/ApplePreis_Matrix.pdf)

至于*实现这些功能*：与在 App Store 中管理应用程序相关的所有事情都是通过[iTunes Connect](https://itunesconnect.apple.com/WebObjects/iTunesConnect.woa)完成的。您还可以获得官方价格矩阵，但您首先需要一个开发者帐户和与 Apple 签订的合同。

# objective-c - UIButton 列表事件类型

> ID：10795642
> 
> 赞同：1
> 
> 时间：2012-05-29T08:32:34.473
> 
> 标签：objective-c, uibutton, selector

我想将我的 UIButton 的操作复制到另一个 UIButton。现在已成功获取所需的目标和操作。但现在我还想列出 UIButton 具有的控制事件。

我找到了这个字段：

> [myButton allControlEvents]

但我不确定如何从中获取所有事件。谁能帮我？

# f# - 为什么我的 MailboxProcessor 挂起？

> ID：10795648
> 
> 赞同：3
> 
> 时间：2012-05-29T08:33:23.840
> 
> 标签：f#, mailboxprocessor

我无法弄清楚为什么以下代码在调用`GetTotal`. 我似乎无法在 MailboxProcessor 内部进行调试，因此很难看到发生了什么。

```
module Aggregator

open System

type Message<'T, 'TState> =
    | Aggregate of 'T
    | GetTotal of AsyncReplyChannel<'TState>

type Aggregator<'T, 'TState>(initialState, f) =
    let myAgent = new MailboxProcessor<Message<'T, 'TState>>(fun inbox ->
        let rec loop agg =
            async {
                let! message = inbox.Receive()
                match message with
                    | Aggregate x -> return! loop (f agg x)
                    | GetTotal replyChannel ->
                        replyChannel.Reply(agg)
                        return! loop agg
            }
        loop initialState
        )

    member m.Aggregate x = myAgent.Post(Aggregate(x))
    member m.GetTotal = myAgent.PostAndReply(fun replyChannel -> GetTotal(replyChannel))

let myAggregator = new Aggregator<int, int>(0, (+))

myAggregator.Aggregate(3)
myAggregator.Aggregate(4)
myAggregator.Aggregate(5)

let totalSoFar = myAggregator.GetTotal
printfn "%d" totalSoFar

Console.ReadLine() |> ignore 
```

`Aggregator`直接使用相同的 MailboxProcessor 而不是包装在类中时，它似乎工作正常。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-29T08:49:06.970

问题是您没有启动代理。您可以`Start`在创建代理后调用：

```
let myAgent = (...)
do myAgent.Start() 
```

或者，您可以使用而不是调用构造函数来创建代理`MailboxProcessor<'T>.Start`（我通常更喜欢这个选项，因为它看起来更实用）：

```
let myAgent = MailboxProcessor<Message<'T, 'TState>>.Start(fun inbox ->  (...) ) 
```

我想您无法调试代理，因为代理内部的代码实际上并未运行。我尝试`printfn "Msg: %A" message`在调用后立即添加到`Receive`代理内部（打印传入消息以进行调试），我注意到，在调用之后`Aggregate`，代理实际上没有收到任何消息......（它只在调用后阻塞`GetTotal`，它会回复）

作为旁注，我可能会`GetTotal`变成一个方法，所以你会调用`GetTotal()`. 每次访问属性时都会重新评估属性，因此您的代码执行相同的操作，但最佳实践不建议使用执行复杂工作的属性。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-29T08:49:21.200

您忘记启动邮箱：

```
open System

type Message<'T, 'TState> =
    | Aggregate of 'T
    | GetTotal of AsyncReplyChannel<'TState>

type Aggregator<'T, 'TState>(initialState, f) =
    let myAgent = new MailboxProcessor<Message<'T, 'TState>>(fun inbox ->
        let rec loop agg =
            async {
                let! message = inbox.Receive()
                match message with
                    | Aggregate x -> return! loop (f agg x)
                    | GetTotal replyChannel ->
                        replyChannel.Reply(agg)
                        return! loop agg
            }
        loop initialState
        )

    member m.Aggregate x = myAgent.Post(Aggregate(x))
    member m.GetTotal = myAgent.PostAndReply(fun replyChannel -> GetTotal(replyChannel))
    member m.Start() = myAgent.Start()

let myAggregator = new Aggregator<int, int>(0, (+))

myAggregator.Start()

myAggregator.Aggregate(3)
myAggregator.Aggregate(4)
myAggregator.Aggregate(5)

let totalSoFar = myAggregator.GetTotal
printfn "%d" totalSoFar

Console.ReadLine() |> ignore 
```

# excel - Excel 2003 宏的外部代码

> ID：10795660
> 
> 赞同：1
> 
> 时间：2012-05-29T08:34:13.977
> 
> 标签：excel, vba

有人知道如何在外部文件中编写 VBA 代码，每次您在 Excel 中运行此宏时，它都会“导入”到 Excel 2003 VBA 宏中 - 就像自我更新代码一样？

我的想法是我在外部编辑器 (VIm) 中编写代码，每次启动 Excel 宏时，宏都会检查更新的数据，如有必要，将代码导入内部，然后运行它（可能是一个或多个函数/子程序）。

步骤是：打开Excel，打开XLS文件，点击按钮，宏启动，检查新的外部数据（我在外部编辑器中编写的代码），如果数据是新的，删除旧代码，导入外部代码然后实际运行宏本身。

任何人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T16:57:50.610

Found solution (partly from [http://www.cpearson.com/excel/vbe.aspx](http://www.cpearson.com/excel/vbe.aspx)) 10x Scott:

```
Sub AddOutsideCode()
    Dim VBProjekt As VBIDE.VBProject
    Dim VBKomponenta As VBIDE.VBComponent
    Set VBProjekt = ThisWorkbook.VBProject
    Call DeleteAllButThis(ThisWorkbook, "Fixed")
    Set VBKomponenta = VBProjekt.VBComponents.Import(Filename:="C:\bat\bat.bas")
    VBKomponenta.Name = "OutsideCode"
End Sub

'Delete all modules but named
Private Sub DeleteAllButThis(ByVal wb As Workbook, ByVal CompName As String)
    Application.DisplayAlerts = False
    On Error Resume Next
    For Each komponenta In ThisWorkbook.VBProject.VBComponents
        If komponenta.Name <> CompName Then
            If komponenta.Type = vbext_ct_StdModule Then
                ThisWorkbook.VBProject.VBComponents.Remove komponenta
            End If
        End If
    Next komponenta
    On Error GoTo 0
    Application.DisplayAlerts = True
End Sub 
```

But how to check if the outside code changed or not?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T14:35:43.500

假设您使用[此 VIM （文本编辑器）来编写 .bas 文件，然后您可以使用该站点](http://en.wikipedia.org/wiki/Vim_%28text_editor%29)[Programming the VBE](http://www.cpearson.com/excel/vbe.aspx)中的许多功能来覆盖模块或过程。

所以，你的结构会是这样的：

```
Sub MyMacro()

Overwrite MyModule in this Workbook with MyModule in .bas file (you could do line count checks or something if you need to, or just overwrite each time to ensure latest code

Call MyModule

End Sub 
```

我认为，您要进行明显的检查，以确保您的最新代码始终与工作簿一起使用...检查更新的外部数据（我在外部编辑器中编写的代码），如果数据是新的，请删除旧代码，导入外部代码，然后实际运行宏本身。

# mysql - 如何使用骆驼将数据从mysql传输到oracle

> ID：10795662
> 
> 赞同：1
> 
> 时间：2012-05-29T08:34:19.840
> 
> 标签：mysql, oracle, spring, apache-camel

我正在尝试使用 Camel 和 Spring 将数据从 Mysql (5.1.37) 复制到 Oracle 数据库 (11)。配置如下所示：

```
<camelContext id="camelContext" xmlns="http://camel.apache.org/schema/spring">
 <route>
  <from uri="direct:start" />
  <to uri="sql:select id, name, description from user?dataSourceRef=fromDataSource" />
  <to uri="sql:insert into user (id, name, description) values (#, #, #)?dataSourceRef=toDataSource"/>
 </route>
</camelContext> 
```

我正在使用以下代码运行它：

```
public void fetchUsers() throws Exception {
    CamelContext context = (CamelContext) SpringUtil.getBean("camelContext");
    ProducerTemplate template = context.createProducerTemplate();
    context.start();
    template.sendBody("direct:start", "test");
} 
```

但是，我遇到了一个例外：

```
10:04:24,208 ERROR [main] DefaultErrorHandler - Failed delivery for (MessageId: ID-UNISTHDW177-55800-1338278663095-0-3 on ExchangeId: ID-UNISTHDW177-55800-1338278663095-0-2). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[Message: [{id=1, name=Carl, description=Developer}, {id=2, name=Lars, description=Developer}]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[Message: [{id=1, name=Carl, description=Developer}, {id=2, name=Lars, description=Developer}]]
    at org.apache.camel.util.ObjectHelper.wrapCamelExecutionException(ObjectHelper.java:1237)
    at org.apache.camel.impl.DefaultExchange.setException(DefaultExchange.java:282)
    at org.apache.camel.util.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:64)
    at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:73)
    at org.apache.camel.processor.SendProcessor$2.doInAsyncProducer(SendProcessor.java:115)
    at org.apache.camel.impl.ProducerCache.doInAsyncProducer(ProducerCache.java:285)
    at org.apache.camel.processor.SendProcessor.process(SendProcessor.java:110)
    at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:73)
    at org.apache.camel.processor.DelegateAsyncProcessor.processNext(DelegateAsyncProcessor.java:99)
    at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90)
    at org.apache.camel.management.InstrumentationProcessor.process(InstrumentationProcessor.java:71)
    at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:73)
    at org.apache.camel.processor.DelegateAsyncProcessor.processNext(DelegateAsyncProcessor.java:99)
    at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90)
    at org.apache.camel.processor.interceptor.TraceInterceptor.process(TraceInterceptor.java:91)
    at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:73)
    at org.apache.camel.processor.RedeliveryErrorHandler.processErrorHandler(RedeliveryErrorHandler.java:333)
    at org.apache.camel.processor.RedeliveryErrorHandler.process(RedeliveryErrorHandler.java:223)
    at org.apache.camel.processor.RouteContextProcessor.processNext(RouteContextProcessor.java:45)
    at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90)
    at org.apache.camel.processor.interceptor.DefaultChannel.process(DefaultChannel.java:304)
    at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:73)
    at org.apache.camel.processor.Pipeline.process(Pipeline.java:117)
    at org.apache.camel.processor.Pipeline.process(Pipeline.java:80)
    at org.apache.camel.processor.RouteContextProcessor.processNext(RouteContextProcessor.java:45)
    at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90)
    at org.apache.camel.processor.UnitOfWorkProcessor.process(UnitOfWorkProcessor.java:122)
    at org.apache.camel.processor.RouteInflightRepositoryProcessor.processNext(RouteInflightRepositoryProcessor.java:50)
    at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90)
    at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:73)
    at org.apache.camel.processor.DelegateAsyncProcessor.processNext(DelegateAsyncProcessor.java:99)
    at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90)
    at org.apache.camel.management.InstrumentationProcessor.process(InstrumentationProcessor.java:71)
    at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:73)
    at org.apache.camel.component.direct.DirectProducer.process(DirectProducer.java:61)
    at org.apache.camel.processor.UnitOfWorkProcessor.processAsync(UnitOfWorkProcessor.java:150)
    at org.apache.camel.processor.UnitOfWorkProcessor.process(UnitOfWorkProcessor.java:117)
    at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:99)
    at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:86)
    at org.apache.camel.processor.UnitOfWorkProducer.process(UnitOfWorkProducer.java:63)
    at org.apache.camel.impl.ProducerCache$2.doInProducer(ProducerCache.java:352)
    at org.apache.camel.impl.ProducerCache$2.doInProducer(ProducerCache.java:324)
    at org.apache.camel.impl.ProducerCache.doInProducer(ProducerCache.java:223)
    at org.apache.camel.impl.ProducerCache.sendExchange(ProducerCache.java:324)
    at org.apache.camel.impl.ProducerCache.send(ProducerCache.java:169)
    at org.apache.camel.impl.DefaultProducerTemplate.send(DefaultProducerTemplate.java:111)
    at org.apache.camel.impl.DefaultProducerTemplate.sendBody(DefaultProducerTemplate.java:124)
    at org.apache.camel.impl.DefaultProducerTemplate.sendBody(DefaultProducerTemplate.java:131)
    at com.unibet.finance.reporting.camel.GordiumFetcherTest.camelShouldFetchGordiumAttributes(GordiumFetcherTest.java:22)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:76)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: java.lang.AbstractMethodError
    at org.apache.camel.component.sql.SqlProducer$1.doInPreparedStatement(SqlProducer.java:50)
    at org.apache.camel.component.sql.SqlProducer$1.doInPreparedStatement(SqlProducer.java:48)
    at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:586)
    at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:614)
    at org.apache.camel.component.sql.SqlProducer.process(SqlProducer.java:48)
    at org.apache.camel.util.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:61)
    ... 70 more 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T10:04:51.063

当您的 JDBC 驱动程序实现旧版本的 JDBC API 时会发生此错误，然后是 JRE 中可用的用于运行应用程序的版本（Camel 需要该版本）。在这种情况下，您需要 JDBC API 版本 >= 3。

应该解决的问题是将您的 Oracle 驱动程序更新到最新版本（支持您的数据库）。

您在评论中写道您已经尝试更新驱动程序版本（无效）。您可能在应用服务器的 lib/ext 目录中的某个位置获得了旧版本的 Oracle 驱动程序。可能您正在使用 Maven 来获取 Oracle JDBC 驱动程序，而另一个驱动程序实例由应用程序服务器提供。

不是 Camel 问题，而是 JDBC 驱动程序和服务器类路径问题。修复您的驱动程序类路径问题，Camel 将完成他的工作:)。

# c# - 大文件上传时的 ASP.NET C# OutofMemoryException

> ID：10795667
> 
> 赞同：4
> 
> 时间：2012-05-29T08:34:43.760
> 
> 标签：c#, asp.net, out-of-memory, large-files, ihttphandler

我有以下文件上传处理程序：

```
public class FileUploader : IHttpHandler
{
 public void ProcessRequest(HttpContext context)
 {
    HttpRequest request = context.Request;

    context.Response.ContentType = "text/html";
    context.Response.ContentEncoding = System.Text.Encoding.UTF8;
    context.Response.Cache.SetCacheability(HttpCacheability.NoCache);
    var tempPath = request.PhysicalApplicationPath + "\\Files\\TempFiles\\";        
    byte[] buffer = new byte[request.ContentLength];
    using (BinaryReader br = new BinaryReader(request.InputStream))
    {
        br.Read(buffer, 0, buffer.Length);
    }
    var tempName = WriteTempFile(buffer, tempPath);
    context.Response.Write("{\"success\":true}");
    context.Response.End();
 }

 public bool IsReusable
 {
    get { return true; }
 }

 private string WriteTempFile(byte[] buffer, string tempPath)
 {
    var fileName = GetUniqueFileName(tempPath);
    File.WriteAllBytes(tempPath + fileName, buffer);
    return fileName;
 }
 private string GetUniqueFileName(string tempPath)
 {
    var guid = Guid.NewGuid().ToString().ToUpper();
    while (File.Exists(tempPath + guid))
    {
        guid = Guid.NewGuid().ToString().ToUpper();
    }
    return guid;
 }
} 
```

当我上传大文件时，这会导致 OutOfMemoryException。有人可以告诉使用这样的处理程序上传大文件的正确方法是什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-29T08:41:20.610

无需将文件加载到内存中即可将其写入某处。您应该使用一个*小*缓冲区（可能是 8k），并在流上循环。或者，对于 4.0，该`CopyTo`方法。例如：

```
using(var newFile = File.Create(tempPath)) {
    request.InputStream.CopyTo(newFile);
} 
```

（它为您执行小缓冲区/循环，默认使用 4k 缓冲区，或允许通过重载传递自定义缓冲区大小）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-29T08:44:48.303

您收到 OutOfMemoryException 是因为您将上传的文件加载到内存中。通过将流直接写入文件来避免这种情况。

```
public void ProcessRequest(HttpContext context)
 {
    const int BufferSize = 4096;    

    HttpRequest request = context.Request;

    context.Response.ContentType = "text/html";
    context.Response.ContentEncoding = System.Text.Encoding.UTF8;
    context.Response.Cache.SetCacheability(HttpCacheability.NoCache);
    var tempFilePath = Path.GetTempFileName();        

    using (Stream fs = File.OpenWrite(tempFilePath));
    {
        byte[] buffer = new byte[BufferSize];
        int read = -1;
        while(read = request.InputStream.Read(buffer, 0, buffer.Length) > 0)
        {            
             fs.Write(buffer, 0, buffer.Length);             
        }
    }

    context.Response.Write("{\"success\":true}");
    context.Response.End();
 } 
```

编辑：删除 binaryreader

# android - 按下后退按钮后，活动不会恢复到上一个 活动

> ID：10795669
> 
> 赞同：0
> 
> 时间：2012-05-29T08:34:49.847
> 
> 标签：android, tabs

我正在开发一个聊天应用程序。其中第一个屏幕有一个继续按钮，它重定向到窗口的主屏幕/主屏幕。在主屏幕中，我有五个不同的选项卡。

我的主要问题是，当我在主屏幕上时，如果我按下后退按钮，它会重定向到设备的主屏幕。但是如果再次单击启动器图标，应用程序不会从最后一个状态启动，而是从第一个屏幕启动。

如果我在任何选项卡/屏幕中按下主页按钮，那么它的工作正常。单击启动器图标会将我重定向到最后一个状态/屏幕。

我希望后退按钮上的主页按钮具有相同的行为。

我注意到一件事这只发生在有标签的活动上。在其他活动上，即使按下后退按钮 .application 也不会最小化。

有什么解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T09:55:18.230

采用

```
public void onBackPressed() {

        Intent intent = new Intent(Intent.ACTION_MAIN);
        intent.addCategory(Intent.CATEGORY_HOME);
        intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        startActivity(intent);

    } 
```

# java - Jackson 映射对象是 DAO 吗？

> ID：10795673
> 
> 赞同：1
> 
> 时间：2012-05-29T08:35:14.160
> 
> 标签：java, design-patterns, jackson

我正在使用[Jackson](http://jackson.codehaus.org/)将 JSON 映射到 Java 对象。

创建的 Java 对象是否是 DAO，因为它是 JSON 结构的对象表示，因此提供对 JSON 数据的访问？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T08:42:50.703

它不是 DAO 设计模式。DAO 模式代表提供对数据层的访问。

我宁愿说它是价值对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T08:38:58.777

不，我会说它是一个[数据传输对象](http://en.wikipedia.org/wiki/Data_transfer_object)。

DAO 用于[持久化数据](http://en.wikipedia.org/wiki/Data_access_object)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T08:38:59.627

由于您正在从一个实例映射到另一个实例，因此我认为您更多地使用了转换器或适配器（请查看[此处](http://en.wikipedia.org/wiki/Adapter_pattern)的适配器模式）。

据我所知，`DAO`（数据访问对象）的目的是提供一个层或一个对象，它提供对您的数据存储的某种访问。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T11:16:38.307

它是一个[纪念品](http://c2.com/cgi/wiki?MementoPattern)，因为“在*不违反封装的情况下，捕获并外部化对象的内部状态，以便以后可以将对象恢复到这种状态*”我不会反对称它为值对象，但它绝对不是一个 DAO是持久数据故事的抽象。

# jquery - IE中的JQuery模态高度

> ID：10795675
> 
> 赞同：0
> 
> 时间：2012-05-29T08:35:23.400
> 
> 标签：jquery

我在 div 上应用了一个 Jquery 对话框。div 的内容动态变化。我已将高度设置为 400 px，它在 Firefox 和除 IE 之外的所有其他浏览器中都能正常工作。在 IE 中，对话框缩小。我不想让对话框重新调整大小。这就是我声明我的对话框的方式

```
$('#dialog_div').dialog({
    autoOpen: false,
    modal: true,
    resizable:false,
    width: 800,
    height :400
}); 
```

这就是我如何称呼这个 div：

```
$('#dialog_div').dialog('open'); 
```

你能建议我如何让它在 IE 中工作吗？

注意：jquery 站点中有一个修复程序，可以在 IE 中固定高度。我尝试使用它，但它不允许模式中的滚动条，并且所有 div 看起来就像 div 内的一团糟。

如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T20:46:33.000

您应该删除函数选项中的最后一个逗号。

```
...
height :400
}); 
```

# c# - 哈希键乘以 9 和模数

> ID：10795677
> 
> 赞同：1
> 
> 时间：2012-05-29T08:35:26.360
> 
> 标签：c#, math, hash

我有一段奇怪的代码困扰着我，

```
 // exbPtr points to 128-bit unsigned integer
   // lgID is a "short" with 0xFFFF being the max value

   int hash = (*exbPtr + (int)lgID * 9) & tlpLengthMask; 
```

最初，这个实际上是一个数组的“哈希表”被初始化为 256 个元素，并且 tlpLengthMask 被设置为 255。

然后是这个神秘的代码.. 上面有一条评论说“如果我们到达这里.. 发生了碰撞”。然后它又开始循环回来，所以看起来这是一个哈希冲突，然后重新哈希？

```
 hash = (hash + (int)lgID * 2 + 1) & tlpLengthMask; 
```

此外，还有大量的调试代码说这个数组的长度应该是 2 的幂，因为我们使用掩码作为模数。

有人可以解释作者的意图是什么吗？这背后的原因是什么？

**编辑**——我试图辨别的是为什么他乘以 9，然后为什么乘以 2 来重新散列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T08:49:14.400

有三种可能：

1) 原作者只是或多或少地随机构造了散列函数，看到它们工作得很好，就放弃了。

2) 原作者拥有能很好地代表实际数据的测试数据，并且看到这些函数在他的确切应用中运行得非常好。

3) 这段代码执行得很差，他的哈希表根本没有有效地运行。

唯一真正的要求是对于他实际遇到的任何输入，输出看起来均匀分布在哈希表上，并且总是为相同的输入产生相同的输出。虽然这些类型的功能通常表现不佳，但对于这个特定的应用程序来说它们可能已经足够好了。

顺便说一句，这种类型的开放散列在删除时不起作用。例如，假设您向表中添加了一条记录。然后你去添加第二个，但它与第一​​个发生冲突，所以你向前跳来添加第二个。现在一切都很好——你可以找到第一条记录（直接）和第二条记录（当你在第二条记录的哈希位置找到它时跳过第一条记录）。

但是如果你删除第一条记录，你怎么找到第二条呢？当您查看第二条记录的哈希位置时，您什么也找不到。你尝试跳过吗？如果有，有多少次？

这些问题有一些解决方法，但它们往往很容易做错。

# python - python 对象在执行期间是否在内存中移动？

> ID：10795682
> 
> 赞同：5
> 
> 时间：2012-05-29T08:35:43.500
> 
> 标签：python

如果在python中多次调用同一个对象，当我打印'self'时，内存位置是否总是相同的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T08:37:59.463

AFAIK，Cpython 中的内存地址是 - 按照设计 - 静态的。可以用 来查看对象的内存地址`id()`。函数的名称说明了它不会改变的事实......

但是请参阅下面的评论，其中其他 SO 用户指出，`id()`作为内存地址是 Cpython 的详细实现。

！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-29T08:42:32.383

请注意，作为一种非常高级的语言，Python 没有为对象定义“内存地址”。然而，对象确实具有可以使用[内置`id()`函数](http://docs.python.org/library/functions.html#id)查询的“身份” 。这个身份保证在对象的生命周期内不会改变：

> 返回对象的“身份”。这是一个整数（或长整数），保证该对象在其生命周期内是唯一且恒定的。具有非重叠生命周期的两个对象可能具有相同的 id() 值。

在 CPython 中，这个标识是底层内存地址，但这只是一个实现细节；它在其他实现中可能会有所不同，甚至可能在 CPython 的未来版本中发生变化（尽管这不太可能）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T09:02:44.193

正如**mac**所注意到的，*Cpython 中的内存地址是 - 按照设计 - 静态的*

但即使在 Cpython 上，如果您使用一些 c 扩展，您也无法对此进行中继。其中一些可以移动对象并手动驱动垃圾收集器。

而且，如果您使用其他 Python 实现，例如**PyPy**，您肯定不能保证对象的内存位置总是相同的，而且很可能会移动。

# visual-studio-2010 - 如何自动将所有私有方法推送到 Visual Studio 中的文件末尾？

> ID：10795684
> 
> 赞同：1
> 
> 时间：2012-05-29T08:35:54.067
> 
> 标签：visual-studio-2010, visual-studio, resharper

我有一个很长的测试类，我将测试与私有的辅助方法混合在一起我希望所有的测试都处于易于阅读和访问的顶部，是否有自动的方法来做到这一点，也许是扩展或 Resharper方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T09:00:21.740

Resharper[代码清理](http://blogs.jetbrains.com/dotnet/2011/01/in-depth-look-at-customizing-type-layout-with-resharper/)会执行此操作。您可以做的最好的投资之一。

# wpf - 如何绑定值 在 for 循环中以编程方式创建的文本框

> ID：10795686
> 
> 赞同：0
> 
> 时间：2012-05-29T08:36:00.623
> 
> 标签：wpf, for-loop, textbox, stackpanel

堆栈面板和文本框以编程方式处于 for 循环中，只需更改边距即可。然后这些又被添加到 Window 上下文中。

现在，当用户在 TextBox 中输入值时，我需要将它们绑定到单独的字段。但是，由于某种原因，文本框未启用，我认为原因是字段未正确绑定。

```
 StackPanel panel1 = new StackPanel();

            for (int i = 0; i < 10; i++)
            {

                TextBox txtProgramValue1 = new TextBox();
                txtProgramValue1.FontSize = 14;
                txtProgramValue1.Height = 32;
                txtProgramValue1.HorizontalAlignment = HorizontalAlignment.Right;
                txtProgramValue1.VerticalAlignment = VerticalAlignment.Top;
                txtProgramValue1.Width = 126;
                txtProgramValue1.Margin = new Thickness(0, 51 + (i * 100), 16, 0);
                txtProgramValue1.Name = "lblProgramValue" + i.ToString();
                txtProgramValue1.IsEnabled = true;

                panel1.Children.Add(txtProgramValue1);
            } 
```

我需要将每个 TextBox 的*txtProgramValue1.Text*映射到一个列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T02:22:34.840

Textbox作为数组的使用

```
Textbox[] _Textbox = new Textbox[5];
for(int i=0; i < 5;i++)
{
_Textbox[i] = new Textbox();
} 
```

这解决了这个问题。

# android - 应用程序打开时如何获取服务器更新？

> ID：10795689
> 
> 赞同：1
> 
> 时间：2012-05-29T08:36:10.770
> 
> 标签：android, android-asynctask, android-c2dm, android-networking

嘿，这可能被问了几次，但我似乎找不到。

Androids C2DM 服务允许在应用程序不活动时向其发送消息，对吗？所以从服务器发送通知很有用。问题是，当用户使用应用程序并且服务器有更新时，我应该如何通知他？我可以使用刷新按钮，但我宁愿不使用。

所以我的问题真的是如何实现这一目标？

如果用户在线，C2DM 服务如何操作？它的工作原理是否相同，我可以只处理该事件来更新内容吗？

或者我应该使用某种后台线程/AsyncTask/Service？我不确定其中哪一个适合这项任务。

从逻辑上讲，每隔几秒钟就通过 http 请求到达服务器似乎效率低下，因此如果可能的话，C2DM 似乎是更好的选择。

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T08:48:57.050

Android 的 C2DM 服务允许向应用程序发送消息，无论应用程序是否处于活动状态。也就是说，即使用户当前正在使用应用程序，或者应用程序正在后台运行，设备也可以接收消息。

当您收到来自 C2DM 服务器的消息时，首先检查您的 C2DMReceiver 类，如果您的应用程序在后台运行，如果是，则在通知（状态栏）中显示消息，否则您可以通过 Toast 或 AlertDialog 框显示消息。

以下代码可以检查 App 是否在后台运行：

```
public static boolean isApplicationInBackground(final Context context) {
        final ActivityManager am = (ActivityManager) context
                .getSystemService(Context.ACTIVITY_SERVICE);
        final List<RunningTaskInfo> tasks = am.getRunningTasks(1);
        if (!tasks.isEmpty()) {
            final ComponentName topActivity = tasks.get(0).topActivity;
            if (!topActivity.getPackageName().equals(context.getPackageName())) {
                return true;
            }
        }
        return false;
    } 
```

谢谢 ：）

# android - Android：旋转后保留 Webview 内容

> ID：10795691
> 
> 赞同：1
> 
> 时间：2012-05-29T08:36:22.053
> 
> 标签：android, android-webview, screen-rotation

我有一个 WebView，其中包含从本地 javascript 填充的数据（在“资产”文件夹中）。WebView 需要几秒钟才能加载，所以我想让它保持设备旋转。我不想使用 configChanges 因为它有一些其他附带影响。

在我看来，最好的方法是从 WebView 制作图片并在旋转时加载图片而不是 WebView，但我不知道如何。

这是我尝试过的代码：

```
Canvas canvas = new Canvas();
pictureNightDay.draw(canvas);
Bitmap b = Bitmap.createBitmap(pictureNightDay.getWidth(), pictureNightDay.getHeight(),Config.ARGB_8888);
myWebViewNightDay.draw(new Canvas(b)); 
```

但这仅显示一个空白视图。

“pictureNightDay”以前是用

```
pictureNightDay = myWebViewNightDay.capturePicture(); 
```

谢谢，再见毛里齐奥

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T08:54:49.843

来自[开发者文档](http://developer.android.com/reference/android/webkit/WebView.html)（在“Cookie 和窗口管理”下）：

*当设备方向或任何其他配置发生变化时，Activity 的标准行为将被销毁并重新创建。这将导致 WebView 重新加载当前页面。如果你不想这样，你可以设置你的活动来处理方向和键盘隐藏的变化，然后只留下 WebView。它会根据需要自动重新定向。有关如何在运行时处理配置更改的更多信息，请阅读[处理运行时更改。](http://developer.android.com/guide/topics/resources/runtime-changes.html)*

基本上，如果您告诉系统在这些更改期间要保留什么，它会为您保留它。我不得不说这是一个很棒的系统。每次我认为我必须以艰难的方式做某事时，稍作搜索就会找到让系统为我做这件事的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T09:24:57.460

最后我得到了以下答案：我使用了两个视图，一个 WebView 和一个 ImageView（最初是隐藏的）

WebView加载时保存图片：

```
pictureNightDay = myWebViewNightDay.capturePicture(); 
```

（pictureNightDay 是一个静态字段）。

然后在旋转时检查 pictureNightDay 是否不为空并交换 ImageView 和 WebView 可见性：

```
ImageView im = (ImageView) l.findViewById(R.id.tripreport_tipology_imagenightday);
im.setImageDrawable(new PictureDrawable(pictureNightDay));
im.setVisibility(View.VISIBILE);
myWebViewNightDay.setVisibility(View.GONE); 
```

# android - 何时注册位置更新？

> ID：10795692
> 
> 赞同：0
> 
> 时间：2012-05-29T08:36:29.200
> 
> 标签：android, locationmanager, oncreate, onresume, locationlistener

我正在编写一个需要用户当前位置的 Android 应用程序。我使用以下代码从网络和 GPS 注册位置更新（locationManager 已定义）：

```
 // Register the listener with the Location Manager to receive location updates.
    locationManager.requestLocationUpdates(
            LocationManager.NETWORK_PROVIDER,
            getResources().getInteger(R.integer.gps_min_time),
            getResources().getInteger(R.integer.gps_min_dist), this);
    locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER,
            getResources().getInteger(R.integer.gps_min_time),
            getResources().getInteger(R.integer.gps_min_dist), this); 
```

我目前`onCreate`在.`onPause``onResume`

当应用程序启动时，它会添加两个侦听器两次，一次在 中`onCreate`，一次在 中`onResume`。我对此有两个问题：

1.  每个监听器添加两次是否意味着它实际上被添加了两次，或者第二次调用没有效果？
2.  我应该`requestLocationUpdate`从中删除 s`onCreate`并将它们放入，还是应该在再次添加之前先`onResume`删除所有侦听器？`onResume`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T09:04:39.653

1.  您的 Listener 将作为键添加到 Hashmap。所以如果你插入`this`（你的活动）并且不覆盖`equals`它应该被覆盖，并且没有效果，因为它是相同的侦听器。

2.  无论如何，我会删除 onCreate 中的寄存器并将其留在 onResume 中，因为您至少可以节省时间来散列您的侦听器和方法调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T08:58:02.117

我只是将它们添加到`onResume()`. 在 和中创建管理器`onCreate()`并添加和删除侦听`onResume()`器`onPause()`。

你的第一个问题我没有答案。

# forgot-password - 重置 Informatica 管理员密码

> ID：10795693
> 
> 赞同：1
> 
> 时间：2012-05-29T08:36:32.347
> 
> 标签：forgot-password, informatica

我正在使用informatica9.0。我丢失了**管理员密码**。你能建议一些重置它的方法吗？

我有我从存储库表中获取的**加密密码..**

有没有办法使用该**加密密码登录**。*我尝试用其他用户的密码*替换管理员加密密码，但无法登录

```
我有其他活跃的用户名，我有他们的密码
有什么方法可以让他们成为管理员
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T11:00:57.750

可以使用该`pmpasswd`实用程序（在`\server\bin`文件夹中找到）为新密码生成哈希。然后，您可以`OPB_USERS`使用此哈希更新管理员帐户的记录以将其重置。

不过，我会在您更改它之前备份该值，以防万一这不起作用。

# c# - 如何通过 LINQ to SQL 返回可变列长度

> ID：10795694
> 
> 赞同：5
> 
> 时间：2012-05-29T08:36:33.297
> 
> 标签：c#, .net, sql, linq, tsql

我在互联网上进行了搜索，找不到任何与我所追求的直接匹配的东西......

我有一个存储过程，它返回一组固定的列（比如说 ColumnA、ColumnB 和 ColumnC），然后另外返回一个不确定的数量/附加列的签名（可能是 ColumnD、ColumnE 和 ColumnF，或 ColumnF、ColumnP、ColumnT 和 ColumnW） .

查询的动态部分由 proc 的 Id 参数确定。

不幸的是，我无法控制架构，并且它的设计很糟糕，以至于在末尾添加了大量不相关的列（并且他们不断添加它们），而不是有一个额外的表来有效地存储它。

结果，我无法在编译时返回一组确定的列，因此 LINQ to SQL 无法确定存储过程的返回类型。

我还有其他选择，或者我可以解决这个问题的方法吗？这是我在下面做的一个例子。我可以重新编写它以使用 LINQ to SQL 吗？如果有帮助，我正在使用 C# 和 SQL Server 2008 编写应用程序。

谢谢。

```
CREATE PROCEDURE [Foo].[GetBar]
(
    @Id INT,
    @FooVar VARCHAR(50),
    @BarVar DATE
)

AS 
BEGIN

CREATE TABLE #TempTbl 
(     
    [ColumnName] VARCHAR(50)
)

INSERT #TempTbl EXEC [Foo].GetColumnNames @Id
DECLARE @ColumnNameList NVARCHAR(max) 
SET @ColumnNameList = '' 
SELECT @ColumnNameList = COALESCE(@ColumnNameList + '],[', '') + ColumnName FROM #TempTbl
DROP TABLE #TempTbl
SELECT @ColumnNameList = @ColumnNameList + ']'
SELECT @ColumnNameList = SUBSTRING(@ColumnNameList, 3, LEN(@ColumnNameList) )

DECLARE @FixedColumns VARCHAR(200)
DECLARE @SelectQuery NVARCHAR(max) 
DECLARE @WhereQuery VARCHAR (100)
DECLARE @FullQuery NVARCHAR(max) 
DECLARE @ParamaterDef nvarchar (100)
DECLARE @Foo VARCHAR(50)
DECLARE @Bar DATE

SET @FixedColumns = N'[ColumnA], [ColumnB], [ColumnC], '
SET @SelectQuery = N'SELECT ' + @FixedColumns + @ColumnNameList + N' FROM [Foo].[FooBar] '
SET @WhereQuery = N'WHERE [Foo] = @Foo AND [Bar] = @Bar'
SET @FullQuery = @SelectQuery + @WhereQuery   
SET @ParamaterDef = N'@Foo VARCHAR(50), @Bar DATE'

EXECUTE sp_executesql @FullQuery, @ParamaterDef, @Foo = @FooVar, @Bar = @BarVar 

END 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T08:43:25.477

你不能只使用 a`SQL Data Adapter`来填充 a`DataSet`吗？然后，您可以使用`LINQ`DataSet 并执行所有`LINQ`操作：

```
DataTable yourDataTable = ds.Tables["TableName"];

var query =
   from yourDataTable in yourDataTable.AsEnumerable()
   select new
   {
      NewField = yourDataTable.Field<int>("ColumnName"),
      NewField2 = yourDataTable.Field<string>("ColumnName2"),
   }; 
```

[MSDN（LINQ 到数据集）](http://msdn.microsoft.com/en-us/library/bb386977.aspx)

[MSDN（使用 LINQ to DataSet 的单表查询](http://msdn.microsoft.com/en-us/library/bb386910)

# css - CSS字体面不起作用

> ID：10795708
> 
> 赞同：4
> 
> 时间：2012-05-29T08:37:27.353
> 
> 标签：css, font-face

我正在尝试向我的网站添加自定义字体。我尝试了很多东西，但没有成功。这是我的CSS代码：

```
@font-face
{
    font-family: myFirstFont;
    src: url('ellis.ttf');
}

body
{
    margin: 0;
    padding: 0;
    width: 100%;
    cursor: default;
    font-size: 11px;
    line-height: 1;
    font-family: myFirstFont,arial,san-serif;
    overflow:auto;
    background:#ecf6f7;
} 
```

我知道这不是一个跨浏览器案例，但我一开始试图让工作成为一个简单的案例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2021-01-04T19:24:33.347

添加格式（“opentype”）；在网址之后

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T11:16:00.583

像这样应用字体..

```
@font-face
{
    font-family: 'ellis';
    src: url('ellis.ttf');
}
.body
{
    font-family: "ellis";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T08:40:46.763

在两个字体系列声明上都添加语音标记。

所以添加到两者`@font-face`和`body`：

```
font-family: "myFirstFont"; 
```

或者尝试这样做以确保所有代码都正确并确保它不是代码：

[http://www.fontsquirrel.com/fontface/generator](http://www.fontsquirrel.com/fontface/generator)

这也可能听起来很愚蠢，但请确保字体和路径的所有拼写都是正确的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T08:44:09.630

您确定在正确的位置引用了字体文件吗？该文件`ellis.ttf`将从样式表所在的任何位置引用。

如果您的 HTML 页面位于[http://website.com/page.html](http://website.com/page.html)，但您的 CSS 位于[http://website.com/css/page.css](http://website.com/css/page.css) ，那么它将`ellis.ttf`在[http://website.com中查找/css/ellis.ttf](http://website.com/css/ellis.ttf)。

# ios - 将 cURL 请求（使用 --data-urlencode）转换为 AFNetworking GET 请求

> ID：10795710
> 
> 赞同：3
> 
> 时间：2012-05-29T08:37:38.273
> 
> 标签：ios, nsurlrequest, afnetworking

这个问题可能与 AFNetworking 无关，而更多地与构造 NSURLRequest 相关。我正在尝试使用 AFNetworking 发出下降的 GET 请求-

```
curl -X GET \
  -H "X-Parse-Application-Id: Q82knolRSmsGKKNK13WCvISIReVVoR3yFP3qTF1J" \
  -H "X-Parse-REST-API-Key: iHiN4Hlw835d7aig6vtcTNhPOkNyJpjpvAL2aSoL" \
  -G \
  --data-urlencode 'where={"playerName":"Sean Plott","cheatMode":false}' \
  https://api.parse.com/1/classes/GameScore 
```

这来自 parse.com API [https://parse.com/docs/rest#queries-constraints](https://parse.com/docs/rest#queries-constraints)。

但是，我无法弄清楚如何编写

> [AFHTTPClient 获取路径：参数：成功：失败：]

对于这个请求。where 子句看起来不像字典，但是这个函数只接受一个字典作为它的*参数*输入。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T23:29:54.900

该参数期望`NSDictionary`将转换为 URL 中的键/值对。因此，密钥很简单，但是在将其设置到字典中之前，您需要将其转换为 JSON 的值...

```
NSDictionary *jsonDictionary = [[NSDictionary alloc] initWithObjectsAndKeys:
                                @"Sean Plott", @"playerName",
                                [NSNumber numberWithBool:NO], @"cheatMode", nil];

NSError *error = nil;
NSData *jsonData = [NSJSONSerialization dataWithJSONObject:jsonDictionary options:0 error:&error];

if (!jsonData) {
    NSLog(@"NSJSONSerialization failed %@", error);
}

NSString *json = [[NSString alloc] initWithData:jsonData encoding:NSUTF8StringEncoding];

NSDictionary *parameters = [[NSDictionary alloc] initWithObjectsAndKeys:
                            json, @"where", nil]; 
```

如果我们假设您的客户端配置了这样的东西（通常您是子类`AFHTTPClient`并且可以将这些东西移动到里面

```
AFHTTPClient *client = [[AFHTTPClient alloc] initWithBaseURL:[NSURL URLWithString:@"https://api.parse.com/"]];
[client setDefaultHeader:@"X-Parse-Application-Id" value:@"Q82knolRSmsGKKNK13WCvISIReVVoR3yFP3qTF1J"];
[client setDefaultHeader:@"X-Parse-REST-API-Key" value:@"iHiN4Hlw835d7aig6vtcTNhPOkNyJpjpvAL2aSoL"];
[client registerHTTPOperationClass:[AFJSONRequestOperation class]]; 
```

然后你应该可以打电话

```
[client getPath:@"1/classes/GameScore"
     parameters:parameters 
        success:^(AFHTTPRequestOperation *operation, id responseObject) {
            NSLog(@"Success %@", responseObject);
        } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
            NSLog(@"Failed %@", error);
        }]; 
```

# python - python和gstreamer，尝试播放视频（后来添加textoverlay）

> ID：10795718
> 
> 赞同：0
> 
> 时间：2012-05-29T08:38:20.773
> 
> 标签：python, video, gstreamer

我正在尝试编写一个 python 应用程序，并让 gstreamer 播放我录制的视频文件（并在稍后使用 textoverlay 在视频上添加一些字幕）。

但是看起来我仍然有一些基本的问题来理解垫子的工作原理。我似乎无法正确建立链接。

我在上面构建的基本示例是一个简单的应用程序，显示来自网络摄像头的视频。所以我知道代码有效，只是我的管道把事情搞砸了。

此外，如果我在终端中运行执行以下管道，它可以工作：

```
gst-launch-0.10 filesrc location=GOPR0042.MP4 ! decodebin2 ! ffmpegcolorspace ! videoflip method=2 ! xvimagesink 
```

现在，我正在尝试将此管道重新创建到 python 应用程序，如下所示：

```
#!/usr/bin/env python

import sys, os
import pygtk, gtk, gobject
import pygst
pygst.require("0.10")
import gst

class GTK_Main:

def __init__(self):
    window = gtk.Window(gtk.WINDOW_TOPLEVEL)
    window.set_title("Webcam-Viewer")
    window.set_default_size(500, 400)
    window.connect("destroy", gtk.main_quit, "WM destroy")
    vbox = gtk.VBox()
    window.add(vbox)
    self.movie_window = gtk.DrawingArea()
    vbox.add(self.movie_window)
    hbox = gtk.HBox()
    vbox.pack_start(hbox, False)
    hbox.set_border_width(10)
    hbox.pack_start(gtk.Label())
    self.button = gtk.Button("Start")
    self.button.connect("clicked", self.start_stop)
    hbox.pack_start(self.button, False)
    self.button2 = gtk.Button("Quit")
    self.button2.connect("clicked", self.exit)
    hbox.pack_start(self.button2, False)
    hbox.add(gtk.Label())
    window.show_all()

    # Set up the gstreamer pipeline
    self.pipeline = gst.Pipeline("player")
    self.filesource = gst.element_factory_make("filesrc","filesource")
          self.filesource.set_property("location","""/home/jlumme/video/GOPR0042.MP4""")
    self.pipeline.add(self.filesource)

    self.decoder = gst.element_factory_make("decodebin2","decoder")
        self.pipeline.add(self.decoder)

    self.colorspace = gst.element_factory_make("ffmpegcolorspace","colorspace")
    self.pipeline.add(self.colorspace)

    self.videosink = gst.element_factory_make("xvimagesink","videosink")
    self.pipeline.add(self.videosink)

    self.filesource.link(self.decoder)
    self.decoder.link(self.colorspace) #This fails
    self.colorspace.link(self.videosink)

    bus = self.pipeline.get_bus()
    bus.add_signal_watch()
    bus.enable_sync_message_emission()
    bus.connect("message", self.on_message)
    bus.connect("sync-message::element", self.on_sync_message)

def start_stop(self, w):
    if self.button.get_label() == "Start":
        self.button.set_label("Stop")
        self.pipeline.set_state(gst.STATE_PLAYING)
    else:
        self.pipeline.set_state(gst.STATE_NULL)
        self.pipeline.set_label("Start")

def exit(self, widget, data=None):
    gtk.main_quit()

def on_message(self, bus, message):
    t = message.type
    if t == gst.MESSAGE_EOS:
        self.pipeline.set_state(gst.STATE_NULL)
        self.button.set_label("Start")
    elif t == gst.MESSAGE_ERROR:
        err, debug = message.parse_error()
        print "Error: %s" % err, debug
        self.pipeline.set_state(gst.STATE_NULL)
        self.button.set_label("Start")

def on_sync_message(self, bus, message):
    if message.structure is None:
        return
    message_name = message.structure.get_name()
    if message_name == "prepare-xwindow-id":
        # Assign the viewport
        imagesink = message.src
        imagesink.set_property("force-aspect-ratio", True)
        imagesink.set_xwindow_id(self.movie_window.window.xid)

GTK_Main()
gtk.gdk.threads_init()
gtk.main() 
```

现在我看到人们使用动态板将解码器连接到一些音频的东西，但我真的不明白它是如何工作的......所以，我想我不能直接连接解码器bin2和ffmpegcolorspace？有人可以解释一下为什么吗？

另外，您是否预见到下一步会出现问题，我想在管道中添加 textoverlay 元素以显示字幕？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T01:11:13.463

在最近回答我自己的问题的习惯中，我也会在这里这样做:)

所以，经过更多的阅读和修改，我确实意识到我并没有真正得到动态打击垫，以及只有当有东西进来时才需要连接它们。

所以基本上我用 2 个队列解决了上述问题，包括音频和视频。然后将这些队列连接到解码器，并且需要将它们放置在解复用器之后并动态连接。解码器和接收器似乎也需要动态连接焊盘。

这个论坛上一个非常清楚地解释了这个过程的问题是： [gstreamer code for play avi file is hang](https://stackoverflow.com/questions/8396127/gstreamer-code-for-playing-avi-file-is-hanging/8402103#8402103)

# android - 如何在第一个称为第二个的 2 个活动之间共享数据

> ID：10795721
> 
> 赞同：0
> 
> 时间：2012-05-29T08:38:35.990
> 
> 标签：android

抱歉这个神秘的问题我不知道该怎么说。

```
 Intent myIntent = new Intent(CurrentClass.this, ClassToCall.class);
         myIntent.putExtra("name", "value");
         Current.this.startActivity(myIntent); 
```

我知道上面的代码可用于将消息从 CurrentClass 传递给 ClassToCall，但是当我在 ClassToCall 中调用“finish()”方法时，我想将一个字符串传递回 CurrentClass。我能得到一些帮助吗？再次对我的措辞感到抱歉。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T08:55:19.687

有时我们需要将数据或参数传递给 Android 上的另一个 Activity。一次只有一项活动处于活动状态。一个活动为结果打开新活动，打开的活动需要参数来设置它们的接口或基于请求的其他选项。因此，系统能够处理两个 Activity 之间的发送和检索参数非常重要。

**注意：** startActivity(Intent) 方法用于启动一个新的活动，该活动将被放置在活动堆栈的顶部。它需要一个参数，一个 Intent，它描述了要执行的活动。

它真的很容易使用。您以请求代码开始和活动，并以结果代码结束它。然后活动调用者可以利用请求代码和结果代码来实现切换器并实现一些逻辑。如果您查看以下示例，则很清楚：

```
startActivityForResult(intent, CREATE_REQUEST_CODE); 
```

在同一个活动中，您需要实现接收方法。它看起来像这样：

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
   if (requestCode == CREATE_REQUEST_CODE) {
      if (resultCode == RESULT_OK) {
        //ACT
      }
   }
} 
```

最后一部分是在被调用的活动中。最后，您必须指定结果代码：

```
setResult(RESULT_CANCELED, null);
finish(); 
```

//或者

```
setResult(RESULT_OK, null);
finish(); 
```

最后，我建议您重用已经在 android sdk 中实现的结果代码。特别是您至少可以重复使用

```
RESULT_CANCELED : Standard activity result : operation canceled.
RESULT_FIRST_USER : Start of user-defined activity results.
RESULT_OK : Standard activity result : operation succeeded. 
```

[来自developer.android.com](http://developer.android.com/reference/android/app/Activity.html#StartingActivities)的文档

观看有关此问题和示例的更多信息：

[链接 1](http://www.balistupa.com/blog/2009/08/passing-data-or-parameter-to-another-activity-android/)，[链接 2](http://saiful103a.wordpress.com/2011/03/19/android-startactivity-and-startactivityforresult/)可能是最好的例子（[更多](http://manisivapuram.blogspot.com/2011/06/how-to-use-startactivityforresult.html)）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T08:40:42.017

你可以使用`startActivityForResult(myIntent,1);`

[请参阅此示例](http://rahulonblog.blogspot.in/2010/05/android-startactivityforresult-example.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T08:59:54.093

在 ClassToCall 中创建一个显式意图，如下所示：

```
 Intent intent = new Intent(ClassToCall.this,CurrentClass.class);
   intent.putExtra("Value", "Robert");
   startActivity(intent);
   finish(); 
```

在当前类中：

```
 Bundle extra = getIntent().getExtras();
    if(extra != null){
    String extras =  extra.getString("Value");

    Log.e("TAG", " "+extras );
    } 
```

希望这是您正在寻找的。

# java - 如何从图表创建最快的图像

> ID：10795723
> 
> 赞同：1
> 
> 时间：2012-05-29T08:38:37.260
> 
> 标签：java, swing, graph, charts, jfreechart

我正在使用 JCChart 创建图表，最后我必须从此图表创建图像。我申请以下程序。

```
frame.add(图表);
图片 img=chart.createImage(600, 800);
图形 g = image.getGraphics();
g.setClip(0, 0, chart.getSize().width, chart.getSize().height+chart.getSize().height);
图表.paint(g);

```

在这个过程中，当图表的数据非常大时，线

```
图表.paint(g)
```

需要很多时间并且也使用很多堆内存，所以任何人都可以告诉我另一种方式，以便我可以快速创建图像。

感谢和问候迪利普·阿加瓦尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T06:31:31.130

**编辑：对不起，我以为你正在使用 jfreechart。**

您还可以使用 jfreechart 库的 ChartUtilities.saveChartAsJPEG() 函数。它只会将图表区域保存为...

ChartUtilities.saveChartAsJPEG(new File(graph_file_name), chart, 800, 600);

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T12:00:59.710

如果数据变大，那么您将不得不增加堆大小以便处理速度更快。所以用

```
java -Xmx
```

# java - 具有多个库的 Android 项目中的 Proguard 警告

> ID：10795726
> 
> 赞同：3
> 
> 时间：2012-05-29T08:38:48.033
> 
> 标签：java, android, ant, proguard

在具有多个库的 Android 项目中，Proguard 会产生以下警告：

> 警告：无法写入资源 [META-INF/MANIFEST.MF]（重复的 zip 条目 [some-library.jar:META-INF/MANIFEST.MF]）

我在[Proguard 文档](http://proguard.sourceforge.net/index.html#manual/examples.html#filtering)中发现可以通过将`(!META-INF/MANIFEST.MF)`过滤器放置到`-injars`.

似乎这是在 ant 文件中指定的`android-sdk/tools/ant/build.xml`。

覆盖该行为的最佳（侵入性最小）方法是什么？

（我不想仅仅复制整个 ant 目标，因为那时它需要使用 SDK 的其他更新来维护它。）

# iphone - UITableView 只有在向上滚动后才会显示

> ID：10795733
> 
> 赞同：3
> 
> 时间：2012-05-29T08:39:15.633
> 
> 标签：iphone, objective-c, xcode, uitableview

我有一个带有 UIView 和 UITableView 的故事板。UITableView 具有自定义单元格（带有 xib 的 UITableViewCell）。当我运行应用程序时，只显示表格的第一行，表格的其余部分被隐藏。这些行在屏幕上看不到，但它们按预期响应用户交互。

只有在表格向上滚动后才会显示其余单元格。

可能是什么问题呢？

这是带有表格的 UIView 的代码：

```
@implementation EldersTableViewController
@synthesize items;
@synthesize tableView;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    EldersDataHendler *edh = [[EldersDataHendler alloc]init];
    NSMutableArray *itemsFromPList = [edh dataForTableFrom:[NSDictionary         dictionaryWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"eldersData"     ofType:@"plist"]]];
    self.items = itemsFromPList;
    [edh release];
    edh=nil;

}

- (void)viewDidUnload
{
    [super viewDidUnload];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationLandscapeLeft || 
            interfaceOrientation == UIInterfaceOrientationLandscapeRight);
}

- (IBAction)didPressBackButton:(UIButton *)sender {
    [self.view removeFromSuperview];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{   
    return [self.items  count];
}
-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView{
    return 1;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath     *)indexPath
{

    SEObject *cellInfo = [self.items objectAtIndex:indexPath.row];    
    EldersItemCell* cell = (EldersItemCell*)[tableView     dequeueReusableCellWithIdentifier:@"EldersItemCell"];
    if (cell == nil) {

        NSArray* topObjects = [[NSBundle mainBundle] loadNibNamed:@"EldersItemCell" owner:self options:nil];

        for (id obj in topObjects){
            if ([obj isKindOfClass:[EldersItemCell class]]){
                cell = (EldersItemCell*)obj;
                break;
            }
        }

    }
    [cell setObject:cellInfo];
    return cell;
}
#pragma mark - Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    SEObject *cellInfo = [self.items objectAtIndex:indexPath.row];  
    if (!eldersDetailsViewController){
        eldersDetailsViewController = [[self.storyboard     instantiateViewControllerWithIdentifier:@"elderDetailsVC"] retain];
    }
    eldersDetailsViewController.seObject = cellInfo;
    [self.view addSubview:eldersDetailsViewController.view];
}

- (void)dealloc {
    [eldersDetailsViewController release];
    [tableView release];

    [super dealloc];
}
@end 
```

提前致谢， 卢达

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T10:16:05.977

问题解决了！非常感谢亲爱的阿鲁阿鲁。带有 xib 的自定义单元格有一些东西。所以我以编程方式创建了一个自定义表格视图单元。这是一个很好的[教程](http://jainmarket.blogspot.in/2009/05/creating-custom-table-view-cell.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T12:30:49.880

首先为您的单元设计创建一个对象类，然后将其导入您的 .m 文件中。然后像这样尝试并正确连接表视图委托和数据源

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

static NSString *CellIdentifier = @"Displayfriendscell";
Displayfriendscell *cell = (Displayfriendscell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[[Displayfriendscell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier] autorelease];
    cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
                  }
// Configure the cell...
[[cell viewWithTag:121] removeFromSuperview];
[[cell viewWithTag:151] removeFromSuperview];
friend *user = [sortedFriendsArray objectAtIndex:indexPath.row];
cell.accessoryType = UITableViewCellAccessoryNone;
cell.selectionStyle = UITableViewCellSelectionStyleNone;    
//cell.nameLabel.text = user.contactNAame;
cell.nameLabel.text = user.friendName;
//cell.nameLabel.text =[[sortedFriendsArray objectAtIndex:indexPath.row] objectForKey:@"name"];
//user.friendName=[[sortedFriendsArray objectAtIndex:indexPath.row] objectForKey:@"name"];  
NSLog(@"name is%@",cell.nameLabel.text);

return cell;

} 
```

# ruby-on-rails-3 - 使用carrierwave上传多张图片进行散列

> ID：10795734
> 
> 赞同：2
> 
> 时间：2012-05-29T08:39:16.723
> 
> 标签：ruby-on-rails-3, carrierwave, image-uploading, liquid

我有时事通讯创建者，它在 hash 中定义了几个部分类型（`"text"`或）（比如- 它取决于 early-chosen 。`"image"``{"section1" => "text", "section2" => "image", "section3" => "image"}``newsletter_template`

通过液体帮助，我正在遍历此哈希并显示正确的形式（文本字段或文件）-我希望图像可以附加，但是如何才能正常工作？（例如上传文件，给它依赖：销毁，但只保存到哈希链接到图像（如`"section2" => "http://mysite.com/images/image1.jpg"`：）

# java - drawPolygone() 绘制 18 个相差 20 度的矩形

> ID：10795735
> 
> 赞同：0
> 
> 时间：2012-05-29T08:39:18.127
> 
> 标签：java, applet

**问题是，在绘制矩形后，我在由 18 个矩形的外侧创建的更大圆圈的中心有一个圆圈。在这个问题中，这 18 个矩形的左下角必须是共同的，并且中心矩形之间没有空间。我怎样才能删除这个空间。它必须由 drawPolygon 函数绘制。感谢您的帮助，对不起我的英语！**

```
import java.awt.*;
import javax.swing.*;

public class Rect20degreeRotate extends JApplet{
public void init() {
resize(500,500);

    Container DrawArea = getContentPane();
    DrawArea.add(

            new JPanel(){
            public void paintComponent(Graphics g) {
                Graphics2D g2 = (Graphics2D)g;
                      int x[]={10,40,40,10};
                      int y[]={10,10,20,20};
                      g2.translate( 100, 100);
                      for (int i=0;i<18;i++){
                        g2.rotate(20.0 * Math.PI / 180.0);
                        g2.drawPolygon(x,y,4);
                      }                         
                    }
            }
                );
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T15:33:52.553

```
import java.awt.*;
import javax.swing.*;

public class Rect20degreeRotate extends JApplet{
public void init() {
 resize(500,500);

    Container DrawArea = getContentPane();
    DrawArea.add(

                new JPanel(){
            public void paintComponent(Graphics g) {
                Graphics2D g2 = (Graphics2D)g;
                      int x[]={0,80,80,0};
                      int y[]={0,0,50,50};
                  g2.translate( 100, 100);
                      for (int i=0;i<18;i++){
                    g2.rotate(20.0 * Math.PI / 180.0);
                    g2.drawPolygon(x,y,4);
                      }                         
                    }
            }
                );
} 
```

}

# java - java jdbc中的连接异常

> ID：10795742
> 
> 赞同：0
> 
> 时间：2012-05-29T08:39:43.330
> 
> 标签：java, sql, jdbc

这是类的构造函数之一。新对象在数据库中创建新记录。当我在源代码中“手动”创建这个对象时，一切都很好。但是当我将创建声明放入按钮的 actionlistener 时，编译器返回 sql 异常。

```
public Pacjent()
    {
        try
        {
            Connection conn = DataBase.Connect();
            Statement stat = conn.createStatement();
            String addRecord = "INSERT INTO records VALUES (12365, 'Bond', 'James', 'M', '12.41.1953r', 'Londyn', 'none');";
            stat.executeUpdate(addRecord);        
    }
    catch(SQLException e)
    {
        e.printStackTrace();
    }    

} 
```

我得到的例外是

> org.postgresql.util.PSQLException：此连接已关闭。在 org.postgresql.jdbc2.AbstractJdbc2Connection.checkClosed(AbstractJdbc2Connection.java:714) 在 org.postgresql.jdbc3.AbstractJdbc3Connection.createStatement(AbstractJdbc3Connection.java:230) 在 org.postgresql.jdbc2.AbstractJdbc2Connection.createStatement(AbstractJdbc2Connection.java:191 ) 在 klasySilnika.Pacjent.(Pacjent.java:61) 在 klasyInterfejsu.NowaKarta$1.actionPerformed(NowaKarta.java:155) 在 javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018) 在 javax.swing.AbstractButton$Handler .actionPerformed(AbstractButton.java:2341) 在 javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402) 在 javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259) 在 javax.swing.plaf。

这是动作监听器：

```
saveButton.addActionListener
        (
            new ActionListener() 
            {
                @Override
                public void actionPerformed(ActionEvent event) 
                {
                    Pacjent nowy = new Pacjent();
                }
            }
        ); 
```

Database.Connect 方法：

```
public class DataBase 
{
    public static Connection Connect()
    {
        return CONNECTION;
    }        

    private static Connection CONNECTION = CreateConnection();

    private static Connection CreateConnection() 
    {
        try 
        {
            Class.forName("org.postgresql.Driver");

            Properties props = new Properties();
            FileInputStream in = new FileInputStream("D:\\projekty\\Arch\\src\\klasySilnika\\bazadanych.properties");
            props.load(in);
            in.close();

            String drivers = props.getProperty("jdbc.drivers");
            if(drivers != null) System.setProperty("jdbc.drivers", drivers);
            String url = props.getProperty("jdbc.url");
            String username = props.getProperty("jdbc.username");
            String password = props.getProperty("jdbc.password");

            return DriverManager.getConnection(url, username,password);
        }
        catch (ClassNotFoundException e) 
        {
            System.out.println("NO JDBC driver");
        return null;
    }
        catch(IOException e)
        {
            System.out.println("Where is properties file?");
            return null;
        } 
        catch(SQLException e)
        {
            System.out.println("error: adress, user, password?");
            return null;
        }
        finally
        {
           // ...   
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T08:51:46.160

可能连接实例在其他地方关闭，因为您的连接是静态的，整个应用程序只有一个连接实例，因此您可以将连接更改为多实例或通过数据源管理，例如：c3p0，dhcp

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2019-02-20T17:57:38.220

```
public Pacjent()
{
    try
    {
        Connection conn = DataBase.**CreateConnection**();
        Statement stat = conn.createStatement();
        String addRecord = "INSERT INTO records VALUES (12365, 'Bond', 'James', 'M', '12.41.1953r', 'Londyn', 'none');";
        stat.executeUpdate(addRecord);        
}
catch(SQLException e)
{
    e.printStackTrace();
} 
```

}

您可以将方法更改为 CreateConnection

# c++ - 用方法替换包装智能指针

> ID：10795746
> 
> 赞同：3
> 
> 时间：2012-05-29T08:39:52.660
> 
> 标签：c++, templates, smart-pointers, sfinae

我正在尝试编写一个智能指针包装器（包含 boost shared_ptr 或 scoped_ptr 或另一个智能指针包装器）；每种包装器类型都注入了一些额外的功能（例如，记录使用情况、惰性初始化、验证正确的构造/销毁顺序等），但我希望它们对用户尽可能不可见（这样我就可以换入/换出包装器只需更改单个 typedef，可能还有一些构造函数代码，但没有使用代码）。

正常使用是微不足道的：

```
template<typename T>
class some_smart_ptr_wrapper
{
public:
    typedef typename T::value_type value_type;
    ...
    value_type* get() { /*do something magic*/ return m_ptr.get(); }
    const value_type* get() const { /*do something magic*/ return m_ptr.get(); }
    // repeat for operator->, operator*, and other desired methods
private:
    T m_ptr;
};
typedef some_smart_ptr_wrapper< boost::shared_ptr<int> > smart_int;
smart_int p; 
```

（现在所有其他代码都可以`p`与 shared_ptr 毫无区别地使用，至少对于定义的操作，我可以通过更改 typedef 添加额外的包装器。）

只需按照您的期望嵌套它们，就可以同时使用多个包装器，并且只有声明（有时初始化）变量的代码需要关心。

有时，虽然能够从包装器中获取“基本” shared/scoped_ptr 很有用（特别是将 shared_ptr 作为参数传递给不需要触发包装器添加的功能的函数）；对于单个包装层很容易：

```
 T& getPtr() { return m_ptr; }
    const T& getPtr() const { return m_ptr; } 
```

但这并不能很好地扩展到多个包装层（调用者必须执行`p.getPtr().getPtr().getPtr()`正确的次数）。

我想做的是声明 getPtr() 这样：

*   如果 T 实现 getPtr()，则它返回 m_ptr.getPtr()（无论是什么类型）。
*   如果 T 没有实现 getPtr()，则返回 m_ptr。
*   正如您所期望的，它仍然有 const 和 non-const 两种风格。

其最终结果是从外部代码对 getPtr() 的单个调用将“向上”链到原始智能指针，因为这将是唯一不实现 getPtr() 的。

我相当确定该解决方案将涉及 SFINAE 和 boost::enable_if; 我有一点尝试让类似的东西发挥作用，但到目前为止还没有多少运气。

解决方案或完全替代的方法都受到欢迎；请注意，我希望它在 VC++2008 和 GCC 中都可以工作（遗憾的是，没有 C++11）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T09:08:11.843

(1) 声明一个内部唯一的特殊成员类型名：

```
template<typename T>
class some_smart_ptr_wrapper
{
public:
  typedef T smart_type;  // <-- unique name
...
}; 
```

(2) 包装`getPtr()`在模板函数包装器内：

```
template<typename T>
class some_smart_ptr_wrapper
{
...
public:
  T& getPtr () { return m_ptr; }

  typename My_sfinae<T>::RealType& getFinalPtr ()
  { return My_sfinae<T>::getPtr(m_ptr); }
...
}; 
```

(3) 凡`My_sfinae`照常执行：

```
template<typename T>
struct void_ { typedef void type; };

template<typename T, typename = void>
struct My_sfinae {
  typedef T RealType;

  static T& getPtr (T &p) { return p; }
};                        //^^^^^^^^^ business logic!
template<typename T>
struct My_sfinae<T, typename void_<typename T::smart_type>::type> {
  typedef typename My_sfinae<typename T::smart_type>::RealType RealType;

  static RealType& getPtr (T &p)
  { return My_sfinae<typename T::smart_type>::getPtr(p.getPtr()); }
}; 
```

如您所见，**递归**`My_sfinae`删除所有包装器，最后留下 final 。**`m_ptr`**

 **[这是演示](http://ideone.com/8RBPU)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T09:11:36.007

实际上，这是一个简单的问题：只需使用**重载**:)

```
template <typename T>
boost::scoped_ptr<T>& get_pointer(boost::scoped_ptr<T>& sp) { return sp; }

template <typename T>
boost::shared_ptr<T>& get_pointer(boost::shared_ptr<T>& sp) { return sp; }

// One overload per "wrapper"
template <typename T>
typename get_pointer_type<T>::type& get_pointer(some_wrapper<T>& p) {
    return get_pointer(p.getPtr());
} 
```

诀窍是正确地专门`get_pointer_type`化每个包装器。

```
template <typename T>
struct get_pointer_type { typedef T type; };

template <typename T>
struct get_pointer_type< some_wrapper<T> > {
    typedef typename get_pointer_type<T>::type type;
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T08:52:32.510

我想到的最接近的事情是 Bjarne Stroustrup 写的名为[Wrapping C++ Member Function Calls](http://www2.research.att.com/~bs/wrapper.pdf)的论文。

> 本文针对前缀和后缀代码对对象的“包装”调用这一老问题提出了一种简单、通用且有效的解决方案。该解决方案也是非侵入式的，适用于现有类，允许使用多个前缀/后缀对，并且可以在 15 行标准 C++ 中实现。还提供了一个强大的包装器版本。效率的主张得到了测量的支持。**

# java - 在黑莓中隐藏菜单项

> ID：10795747
> 
> 赞同：0
> 
> 时间：2012-05-29T08:39:56.807
> 
> 标签：java, blackberry, user-interface, hide

我正在开发一个应用程序。在该应用程序中，我创建了一个主屏幕。在该主屏幕上，我添加了一个按钮字段。当我单击该按钮字段以打开我的弹出屏幕时，它将打开我的弹出屏幕，但它也显示菜单我在屏幕前面为我的主屏幕添加的项目。但是我不想显示这些菜单项，而只想在单击该按钮时打开我的弹出屏幕。请帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T09:23:40.073

[在ButtonField](http://www.blackberry.com/developers/docs/6.0.0api/net/rim/device/api/ui/component/ButtonField.html#ButtonField%28java.lang.String,%20long%29)上添加[ButtonField.CONSUME_CLICK](http://www.blackberry.com/developers/docs/6.0.0api/net/rim/device/api/ui/component/ButtonField.html#CONSUME_CLICK)样式，如下所示。

```
ButtonField btn = new ButtonField("My Button", ButtonField.CONSUME_CLICK); 
```

# jsp - 如何在 JSP 中为 CSV 文件生成 md5 校验和

> ID：10795749
> 
> 赞同：0
> 
> 时间：2012-05-29T08:40:02.123
> 
> 标签：jsp, csv, md5, checksum

我需要计算一个 csv 文件的校验和。每次更改文件中的数据时，校验和都会更改。在这方面，我在互联网上没有发现任何有用的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T16:15:46.620

首先，这个问题并不是 JSP 特有的。JSP 只是一个 HTML 代码生成器。在 JSP 文件中而不是在普通的 Java 类中编写 Java 代码不会使其成为 JSP 问题。如果您专注于使用“Java”关键字而不是“JSP”关键字来解决未来的 Java 问题，那么您将获得更多帮助。

就是说，您可以使用[`MessageDigest`](http://docs.oracle.com/javase/6/docs/api/java/security/MessageDigest.html)从文件中读取的字节进行更新。

```
FileInputStream input = new FileInputStream("/path/to/file.csv");
MessageDigest md5 = MessageDigest.getInstance("MD5");
byte[] buffer = new byte[10240];

for (int length = 0; (length = input.read(buffer)) > 0;) {
    md5.update(buffer, 0, length);
}     

byte[] hash = digest.digest(); 
```

之后您可能希望将散列转换为十六进制。

```
StringBuilder hex = new StringBuilder(hash.length * 2);

for (byte b : hash) {
    if ((b & 0xff) < 0x10) {
        hex.append("0");
    }

    hex.append(Integer.toHexString(b & 0xff));
}

String hexString = hex.toString(); 
```

# java - java - 如何使用用户定义的数据类型作为其参数从java调用本机方法？

> ID：10795754
> 
> 赞同：3
> 
> 时间：2012-05-29T08:40:14.173
> 
> 标签：java, java-native-interface, native

我有一个以用户定义的数据类型（结构）作为参数的本机方法。如何使用 JNI 从 java 调用此方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T08:46:38.863

如果你有这样的方法：

```
int cFunction(mydatatype data) ... 
```

你不能直接调用它。您将需要一层 JNI 将其粘合在一起。

* * *

因此，您的代码会生成一个 JNI 函数：

```
class JavaTest {
    public native int jMethod(int a);
} 
```

在那个类上运行`javah`你会得到一个像这样的头文件：

```
JNIEXPORT jint JNICALL Java_Javatest_jMethod(JNIEnv*, jobject obj, jint a); 
```

实现该方法来调用`cFunction(mydatatype)`：

```
JNIEXPORT jint JNICALL Java_Javatest_jMethod(JNIEnv*, jobject obj, jint a) {
    mydatatype data;
    data.count = a;
    return (jint) cFunction(data);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T09:53:41.400

有办法读取 java 对象字段：

```
jint _JMETHODNAME(MyClass,myMethod) (JNIEnv *env, jclass jcMyClass, jobject joMyObject)
{
    //Get the class
    jcMyObjectClass = env->FindClass("test/native/MyObject");
    if (jtException = env->ExceptionOccurred()) 
    {
        //Error management
    }
    if (jcMyObjectClass == NULL) 
    {
        //Error management
    }

    //Check if the class matchs the object
    jboolean jbFlag = env->IsInstanceOf(joMyObject,jcMyObjectClass);
    if (jtException = env->ExceptionOccurred()) 
    {
        //Error management
    }
    if (jbFlag == JNI_FALSE) 
    {
        //Error management
    }

    //Get a field
    jfieldID jfIdentField = env->GetFieldID(jcMyObjectClass,"fieldName","Ljava/lang/String;");
    if (jtException = env->ExceptionOccurred())
    {
        //Error management
    }
    if (jfIdentField == NULL) 
    {
        //Error management
    }

    //Read a field
    jstring jsMyString = (jstring)env->GetObjectField(joMyObject,jfIdentField);
    if (jtException = env->ExceptionOccurred()) 
    {
        //Error management
    }
    if (jsMyString == NULL) 
    {
        //Error management
    }

    //Convert to C++ format
    LPCTSTR strMyString = (LPTSTR)env->_tGetString(jsMyString, NULL);
    jsize myStringLen = env->_tGetStringLength(jsMyString);
    if (strMyString == NULL) 
    {
        //Error management
    }   
} 
```

因此，您可以使用 Java 对象作为参数，并根据需要将其转换为 C 结构。

也许这对你有帮助。

对于自引用对象，您可以像这样遍历所有对象：

```
//Get a field
jfieldID jfIdentField = env->GetFieldID(jcMyObjectClass,"selfReference","test/native/MyObject");
if (jtException = env->ExceptionOccurred())
{
    //Error management
}
if (jfIdentField == NULL) 
{
    //Error management
}

//Read a field
jobject joNextMyObject = (jstring)env->GetObjectField(joMyObject,jfIdentField);
if (jtException = env->ExceptionOccurred()) 
{
    //Error management
}
while (joNextMyObject != NULL) 
{
    //Process object

    //Read a field
     joNextMyObject = (jstring)env->GetObjectField(joNextMyObject,jfIdentField);
    if (jtException = env->ExceptionOccurred()) 
    {
        //Error management
    }
} 
```

# sql - 如何从Oracle中的任何表中获取随机多行

> ID：10795756
> 
> 赞同：1
> 
> 时间：2012-05-29T08:40:18.353
> 
> 标签：sql, oracle, oracle10g, oracle11g

如何从Oracle中的任何表中获取多行的随机输出？还有（dbms_random.value）是什么意思

```
select *
from (select *
      from emp
      order by dbms_random.value)
where rownum=1; 
```

它只给出一个随机输出。如何获得多个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T08:49:19.747

尝试

```
select * from (select * from emp order by dbms_random.value) where rownum<10 
```

10 可以替换为您选择的任何其他计数

# c - 转换为无符号字符

> ID：10795767
> 
> 赞同：2
> 
> 时间：2012-05-29T08:40:48.917
> 
> 标签：c, types, casting

我正在使用 MPLab C18 C 编译器并使用此代码收到语法错误：

```
hundreds = unsigned char((tick / 100));
tens = unsigned char((tick - (hundreds * 100)) / 10);
ones = unsigned char((tick - (hundreds * 100) - (tens * 10))); 
```

`tick`是一个`unsigned int`。我正在尝试通过简单的除法将一个三位数的值转换为三个单独的 ASCII 值，并将整数转换为我的`unsigned char`变量。

对我来说看起来不错，但我想我错过了一些东西。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-29T08:41:42.473

铸造在括号中完成：

```
 hundreds = (unsigned char)(tick/100); 
```

# facebook - 从应用程序用户上传照片到粉丝专页

> ID：10795769
> 
> 赞同：0
> 
> 时间：2012-05-29T08:40:53.657
> 
> 标签：facebook, facebook-graph-api, image-uploading, fan-page, facebook-as3-api

我有一个 Facebook 应用程序，用户可以在其中将照片上传到 Facebook 粉丝专页。我无法弄清楚如何以使用该应用程序的用户身份上传照片。目前我可以让粉丝专页自己上传照片，所以粉丝专页失去了照片的作者。

为此，我获取了粉丝页面的身份验证令牌（我假设这是应用程序作为粉丝页面发布的原因）并使用它传递给 api 的“照片”方法。我使用的是 AS3 api，但我确信无论我使用哪种 api，这个概念都是一样的。

```
var values:Object = {message:"message here", name:"title here"};
values.access_token = fanPageAccessToken;
values.image = file;
Facebook.api('fanPageId/photos/', handleUploadComplete, values,'POST'); 
```

当我更改为用户的访问令牌时，图像会上传到用户的照片中。即使我指定了 fanPageId，它也会被上传到用户的照片中。

我在这里挣扎。有没有人有我可以尝试的想法，或者有一些见解可以分享？

非常感谢你，我很感激你的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T10:37:37.440

我已经尝试了所有可能的 API 组合来将用户的照片发布到页面，但这没有用。用户不能将照片发布到页面。即使在页面上创建相册然后发布到该页面上也行不通。

# c# - RhinoMocks - 在模拟抽象类上引发事件失败

> ID：10795770
> 
> 赞同：2
> 
> 时间：2012-05-29T08:40:57.977
> 
> 标签：c#, unit-testing, rhino-mocks

有谁知道我如何在抽象类上引发事件？

下面的测试在最后一行失败。我得到的例外如下：

> System.InvalidOperationException ：无效调用，已使用最后一次调用或未进行调用（确保您正在调用虚拟（C#）/可覆盖（VB）方法）。

我可以在接口上引发事件，但不能在实现该接口的抽象类上引发。这是使用最新版本的 RhinoMocks (3.6.0.0)。

谢谢，亚历克斯

```
 public abstract class SomeClass : SomeInterface
    {
        public event EventHandler SomeEvent;
    }

    public interface SomeInterface
    {
        event EventHandler SomeEvent;
    }

    [Test]
    public void Test_raising_event()
    {
        var someClass = MockRepository.GenerateMock<SomeClass>();
        var someInterface = MockRepository.GenerateMock<SomeInterface>();

        someInterface.Raise(x => x.SomeEvent += null, someClass, EventArgs.Empty);
        someClass.Raise(x => x.SomeEvent += null, someClass, EventArgs.Empty);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T09:24:58.923

异常消息解释了问题：

> System.InvalidOperationException ：无效调用，已使用最后一次调用或未进行调用（**确保您正在调用虚拟**（C#）/可覆盖（VB）**方法**）。

您的活动不是虚拟的，即。Rhino 将无法覆盖它。只需将`virtual`关键字添加到您的抽象类事件定义中。

位背景信息。当您调用`MocksRepository.GenerateMock<SomeClass>`Rhino 时，会创建*动态代理*类，用于记录调用、准备存根等。这个类可能看起来像这样：

```
public class SomeClassDynamicProxy1 : SomeClass
{
    public override EventHandler SomeEvent 
    { 
        add { ... }
        remove { ... } 
    }

    ...
} 
```

没有`virtual`你的`SomeClass`，这段代码自然会像现在一样失败。

# c# - MVC 中的通用控制器

> ID：10795771
> 
> 赞同：0
> 
> 时间：2012-05-29T08:41:01.030
> 
> 标签：c#, asp.net-mvc, model-view-controller

当它返回一个视图时，你能向我解释一下控制器的意义吗？我错过了这里的重点吗？

我在尝试构建用户可以创建视图（存储在数据库中）的基本 CMS 时遇到过这种情况，但当然，由于它们是用户创建的，因此控制器不存在。那么还有其他方式来服务他们吗？

感谢您的帮助，我仍在尝试完全掌握 MVC！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T08:43:26.320

> 当它返回一个视图时，你能向我解释一下控制器的意义吗？

谁说控制器所做的只是返回一个视图？控制器还可以做很多其他事情。例如，它可以接收用户输入的动作参数形式，检查是否ModelState.IsValid，对Model做一些处理，然后返回一个View，这就是[MVC模式](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)的重点。

> 我在尝试构建用户可以创建视图（存储在数据库中）的基本 CMS 时遇到过这种情况，但当然，由于它们是用户创建的，因此控制器不存在。那么还有其他方式来服务他们吗？

是的当然。您可以通过实现[VirtualPathProvider](http://msdn.microsoft.com/en-us/library/system.web.hosting.virtualpathprovider.aspx)类来使用[自定义虚拟路径提供程序。](http://blog.rocketbase.co.uk/2011/04/asp-net-mvc-virtual-path-provider/)

# c# - 有没有办法打破返回 void 的函数？

> ID：10795772
> 
> 赞同：7
> 
> 时间：2012-05-29T08:41:03.493
> 
> 标签：c#, oop

我有一个函数可以为给定另一个图块的特定图块设置绘制状态。绘制状态将发生变化的图块会比较它周围的图块，然后相应地更新。我将在下面尝试说明

```
[b] [b] [a]
[b] [a] [a]
[a] [a] [a]  where a = sand && b = water 
```

当 a 检测到 b 与它接壤时，它必须更新其绘制状态。所以我有一个适用于大写、小写、左写和右写的函数。我现在需要修改该函数，以便它可以处理左右大小写、右上大小写、右下大小写等。这是我的函数

```
public override void CompareBorderingTiles(Tile T)
    {
        if (T is Water)
        {
            float leftBound = location.X - (Tile.TileWidth * Tile.TileScale);
            float rightBound = location.X + (Tile.TileWidth * Tile.TileScale);
            float upperBound = location.Y - (Tile.TileHieght * Tile.TileScale);
            float bottomBound = location.Y + (Tile.TileHieght * Tile.TileScale);
            if (T.GridLocation.X == leftBound)
            {
                drawstate = DrawState.Left;
            }
            if (T.GridLocation.X == rightBound)
                drawstate = DrawState.Right;
            if (T.GridLocation.Y == upperBound)
                drawstate = DrawState.Upper;
            if (T.GridLocation.Y == bottomBound)
                drawstate = DrawState.Lower; 
        }

        base.CompareBorderingTiles(T);
    } 
```

对于我为什么要突破这个功能，或者可能不这样做，这应该是很容易解释的。基本上我有一个枚举，它告诉我我的绘制状态是什么（绘制状态是枚举）。谁能告诉我是否可以设置正确的绘制状态然后退出我的功能？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-29T08:42:25.763

只需在要结束的地方使用 return 语句：

```
return; 
```

因此，在您的代码中，您可以执行以下操作：

```
public override void CompareBorderingTiles(Tile T)
{
    if (T is Water)
    {
        float leftBound = location.X - (Tile.TileWidth * Tile.TileScale);
        float rightBound = location.X + (Tile.TileWidth * Tile.TileScale);
        float upperBound = location.Y - (Tile.TileHieght * Tile.TileScale);
        float bottomBound = location.Y + (Tile.TileHieght * Tile.TileScale);
        if (T.GridLocation.X == leftBound)
        {
            drawstate = DrawState.Left;
            return;
        }
        if (T.GridLocation.X == rightBound)
        {
            drawstate = DrawState.Right;
            return;
        }
        if (T.GridLocation.Y == upperBound)
        {
            drawstate = DrawState.Upper;
            return;
        }
        if (T.GridLocation.Y == bottomBound)
        {
            drawstate = DrawState.Lower; 
            return;
        }
    }

    base.CompareBorderingTiles(T);
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-29T08:42:23.173

只需单独使用`return;`，这将立即从函数中“返回”。

仔细想想，你真的需要回来吗？

```
 if (T.GridLocation.X == leftBound)
    {
        drawstate = DrawState.Left;
    }
    else if (T.GridLocation.X == rightBound)
    {
        drawstate = DrawState.Right;
    }

    else if (T.GridLocation.Y == upperBound)
    {
        drawstate = DrawState.Upper;
    }
    else if (T.GridLocation.Y == bottomBound)
    {
        drawstate = DrawState.Lower; 
    } 
```

这应该使代码在将来更容易维护。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-29T08:42:44.030

您可以使用 退出函数`return`。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-29T08:46:23.717

您可以`return;`在函数中的任何位置使用，然后它将函数保留在那里。使用 return 意味着您的基本函数**不会**被调用。如果您需要调用基本函数，`else if`则当您满足条件时，它不会检查剩余的 if 语句：

```
public override void CompareBorderingTiles(Tile T)
    {
        if (T is Water)
        {
            float leftBound = location.X - (Tile.TileWidth * Tile.TileScale);
            float rightBound = location.X + (Tile.TileWidth * Tile.TileScale);
            float upperBound = location.Y - (Tile.TileHieght * Tile.TileScale);
            float bottomBound = location.Y + (Tile.TileHieght * Tile.TileScale);
            if (T.GridLocation.X == leftBound)
            {
                drawstate = DrawState.Left;
            }
            else if (T.GridLocation.X == rightBound)
                drawstate = DrawState.Right;
            else if (T.GridLocation.Y == upperBound)
                drawstate = DrawState.Upper;
            else if (T.GridLocation.Y == bottomBound)
                drawstate = DrawState.Lower; 
        }

        base.CompareBorderingTiles(T);
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-29T08:48:35.940

使用`return;` 该函数将作为 void 返回

# c# - 具有内部基础的接口继承

> ID：10795782
> 
> 赞同：7
> 
> 时间：2012-05-29T08:41:41.607
> 
> 标签：c#, inheritance, interface

我想知道是否有办法完成以下任务：

在我的项目中，我定义了一个接口，比如说 IFruit。这个接口有一个公共方法GetName()。我还声明了一个接口 IApple，它实现了 IFruit 并公开了一些其他方法，如 GetAppleType() 或其他方法。还有更多的水果，比如 Ibanana、ICherry 等等。

现在在外面，我只想能够使用实际的水果实现，而不是 IFruit 本身。但我不能将 IFruit 接口声明为私有或内部接口，因为继承的接口会说“无法实现，因为基类的可访问性较低”。

我知道这对于抽象实现是可能的，但在这种情况下这不是一个选择：我真的需要使用接口。有这样的选择吗？

**更新** 我想我的例子需要一些澄清:) 我使用 MEF 来加载接口实现。加载的集合基于 IApple、IBanana、ICherry 等。但 IFruit 本身没有用，我不能使用仅基于该接口的类。所以我一直在寻找一种方法来阻止其他开发人员单独实现 IFruit，认为他们的类将被加载（它不会）。所以基本上，它归结为：

```
 internal interface IFruit
{
  public string GetName();
}

public interface IApple : IFruit
{
  public decimal GetDiameter();
}

public interface IBanana : IFruit
{
  public decimal GetLenght();
} 
```

但是由于基础接口的可访问性较低，这将无法编译。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T09:32:47.383

您可以保证这不会无意中发生的一种方法是制作`IFruit` `internal`您的程序集，然后使用一些适配器适当地包装类型：

```
public interface IApple { string GetName(); }
public interface IBanana { string GetName(); }

internal interface IFruit { string GetName(); }

class FruitAdaptor: IFruit
{
    public FruitAdaptor(string name) { this.name = name; }
    private string name;
    public string GetName() { return name; }
}

// convenience methods for fruit:
static class IFruitExtensions
{
    public static IFruit AsFruit(this IBanana banana)
    {
        return new FruitAdaptor(banana.GetName());
    }

    public static IFruit AsFruit(this IApple apple)
    {
        return new FruitAdaptor(apple.GetName());
    }
} 
```

然后：

```
MethodThatNeedsFruit(banana.AsFruit()); 
```

`GetName`如果名称会随着时间而改变，您也可以轻松地将其扩展为懒惰地调用适应的对象。

* * *

另一种选择可能是进行仅调试检查以加载所有实现*者*，然后如果其中一个实际上没有实现/`IFruit`则抛出异常。因为听起来这些类是供公司内部使用的，所以这应该可以防止任何人意外实现错误的东西。`IBanana``IApple`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T09:18:25.043

确实不可能做你正在尝试的事情，但你可以使用带有`[Obsolete]`属性的 IFruit 界面来阻止人们，并通过消息说明原因。

在您的 Ibanana、IApple、... 接口上，禁用过时警告的出现。

```
[Obsolete]
public interface IFruit {
    ...
}

#pragma warning disable 612
public interface IBanana : IFruit {
    ...
}
#pragma warning restore 612 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T08:46:37.273

如果您的代码中有某种方式（假设我正确理解了您的状态），则如下所示：

```
public class WaterMellon : IFruit, IVegetables...
{
} 
```

并且您希望能够让您的框架的使用者**仅**访问的方法`IFruit`，我没有其他已知的方法，然后简单地进行转换。

```
IFruit fruit = new WaterMelon();
fruit. //CAN ACCESS ONLY TO FRUIT IMPLEMNTATION AVAILABLE IN WATERMELON 
```

如果这不是您要的，请澄清。

# entity-framework - 实体框架主键名

> ID：10795786
> 
> 赞同：1
> 
> 时间：2012-05-29T08:41:56.543
> 
> 标签：entity-framework

我创建了一个实体模型。我想在运行时传递实体名称时获取主键名称（即属性名称）。是否可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T09:32:28.860

实体类型是可能的：

```
var objectSet = objectContext.CreateObjectSet<YourEntityType>();
var keyNames = objectSet.EntitySet.ElementType.KeyMembers.Select(k => k.Name); 
```

或实体类型名称：

```
var workspace = objectContext.MetadataWorkspace;
var entityType = workspace.GetItems<EntityType>(DataSpace.CSpace)
                          .FirstOrDefault(e => e.Name == yourEntityTypeName);
var keyNames = entityType.KeyMembers.Select(k => k.Name); 
```

# c# - 将数据从 XML 文件导入 SQL 数据库

> ID：10795787
> 
> 赞同：5
> 
> 时间：2012-05-29T08:41:57.860
> 
> 标签：c#, sql, xml, database

是否可以将 XML 文件中的数据导入 SQL 数据库，如果可以，该怎么做。我有一个包含大约 50 000 个条目的 XML 文件，我必须制作一个可以操作该数据（主要是读取和比较）的应用程序 - 所以我担心的是使用这么多数据的操作（并且很有可能将来会有更多）将非常缓慢且效率低下。如果有其他你认为更好的选择，请指教。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T08:49:10.013

您可以使用[SQL Server 导入和导出向导](http://msdn.microsoft.com/en-us/library/ms140052.aspx)。您还可以查看[SQL Server Integration Services](http://msdn.microsoft.com/en-us/library/ms140052.aspx)。如果您想使用 C#，那么 SQL Server 确实支持 XML 数据类型。你可以利用它。

您也可以尝试读取数据集中的数据，然后使用[BulkInsert](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlbulkcopy.aspx)在 SQL Server 中插入数据

```
DataSet reportData = new DataSet();
reportData.ReadXml(Server.MapPath("yourfile.xml"));
SqlConnection connection = new SqlConnection("DB ConnectionSTring");
SqlBulkCopy sbc = new SqlBulkCopy(connection);
sbc.DestinationTableName = "yourXMLTable"; 
```

**编辑：**对于 SQL Server 2005 检查[SQL Server 2005 导入/导出向导](http://www.databasejournal.com/features/mssql/article.php/3580216/SQL-Server-2005-Import--Export-Wizard.htm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T08:47:37.790

尝试查看来自 microsoft Sql Server 集成服务的 SSIS 工具

[http://msdn.microsoft.com/en-us/library/ms141026.aspx](http://msdn.microsoft.com/en-us/library/ms141026.aspx)

[http://www.microsoft.com/sqlserver/en/us/solutions-technologies/enterprise-information-management/integration.aspx](http://www.microsoft.com/sqlserver/en/us/solutions-technologies/enterprise-information-management/integration.aspx)

使用此工具，您可以使用过滤和自定义选择创建保存和运行导入包。可能您可以将其用作解决问题的整体解决方案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-07-26T20:27:17.093

诸如 Snaplogic 之类的产品具有“快照”，意思是连接器可以读取 xml 文件，对其进行解析，然后将其移动到数据库中，而无需编写任何代码行。看看[Snaplogic](http://snaplogic.com)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-12T11:13:38.977

在这种情况下，我需要从 xml 文件中读取数据并将该 xml 文件作为参数发送到存储过程有用的链接 [http://www.aspdotnet-suresh.com/2012/12/aspnet-send-xml-file-as-parameter -to.html](http://www.aspdotnet-suresh.com/2012/12/aspnet-send-xml-file-as-parameter-to.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-07-26T22:09:46.273

另一个需要考虑的选择是：

给定以下 xml

```
<?xml version="1.0" standalone="yes" ?>
<Clients>
  <Client>
    <Id>1</Id>
    <FirstName>FirstName1</FirstName>
    <LastName>LastName1</LastName>
  </Client>
  <Client>
    <Id>2</Id>
    <FirstName>FirstName2</FirstName>
    <LastName>LastName2</LastName>
  </Client>
</Clients> 
```

您可以使用以下查询来选择内容。

```
select 
    x.a.query('Id').value('.', 'int') as Id
    , x.a.query('FirstName').value('.', 'nvarchar(50)') as FirstName
    , x.a.query('LastName').value('.', 'nvarchar(50)') as LastName  
from 
( 
    select CAST(x AS XML) from OPENROWSET
    (BULK 'C:\Users\jmelosegui\Desktop\Clients.xml', SINGLE_BLOB) as T(x)
) T(x)
cross Apply x.nodes('Clients/Client') as x(a) 
```

完成后，您可以在插入数据后加入其他表或进行匹配，所有这些都来自 sql server 端。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-29T08:51:48.403

它在很大程度上取决于 xml 文件的复杂性（对象的一个​​深度与嵌套对象、数据的种类和大小等）。

如果您有知识，SSIS 可以成为一个解决方案，一个简单的 c# 应用程序也可以完成这项工作。

申请应：

1.  定义一个表示您的数据的持久性不可知类
2.  阅读 xml 以加载此类的列表（在非常大的卷上可能需要分页
3.  使用 ado 或 linq to sql 将数据推送到数据库（实体框架是可能的，但对于简单的批量导入来说可能太多了

另一种方法也可以使用执行相同工作的简单 powershell 脚本。

# object - 动态创建表

> ID：10795790
> 
> 赞同：0
> 
> 时间：2012-05-29T08:42:14.173
> 
> 标签：object, loops, onclick

我认为我的问题对于 js 专家来说很简单（我是 js 的初学者）。

在我的脚本中，我动态创建了一个表。在 html 代码中，我有一个按钮，当您单击此按钮时，我希望所有表格单元格都填充一些颜色。我有一个单独的函数来填充表格单元格，但我遇到的问题是，当我单击按钮时，只有表格的最后一个单元格被填充。我认为这个问题与闭包有关，因为表单元格是在循环内创建的。

这是代码：

HTML：

```
<button onclick='show()'>Click</button> 
```

JS：

```
var obj = new Object;

    obj.x = document.createElement('table');
    document.body.appendChild(obj.x);

        for(i=0;i<10;i++){
            obj.y = document.createElement('tr');
            obj.x.appendChild(obj.y);

                for(j=0;j<10;j++){
                    obj.z = document.createElement('td');
                    obj.z.appendChild(document.createTextNode(j));
                    obj.y.appendChild(obj.z);
                }
            }

    function fill(){

        obj.z.style.backgroundColor='red';

    } 
```

//-->

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T09:03:52.000

每次 for 循环迭代时，obj.z 都会被一个新的覆盖，这意味着只会引用最后一个单元格。设置表格中所有单元格样式的一种更简单的方法是非常简单地更改`backgroundColor`其`<table>`本身。

如果您想以另一种方式执行此操作，则需要单独循环遍历单元格元素，并随时设置每个元素的样式。更简单的方法是使用[jQuery](http://jquery.org)，向值添加一个`className`属性（例如`theTable`在本例中）并使用以下代码：

```
$('table.theTable td').css('backgroundColor','red'); 
```

这将选择`<td>`具有类的表中的所有元素`theTable`（它使用 CSS 选择器），并将它们的`backgroundColor`CSS 属性设置为`red`.

# java - 解析 XML 期间抛出 JAXB IllegalAnnotationException

> ID：10795793
> 
> 赞同：41
> 
> 时间：2012-05-29T08:42:27.813
> 
> 标签：java, xml, jaxb

这是我的 XML 文件：

```
<fields>
    <field mappedField="Num">
    </field>

    <field mappedField="Type">      
    </field>    
</fields> 
```

我创建了 2 个类来解析它（Fields.java 和 Field.java）：

```
@XmlRootElement(name = "fields")
public class Fields {

    @XmlElement(name = "field")
    List<Field> fields = new ArrayList<Field>();
        //getter, setter
} 
```

和

```
public class Field {

    @XmlAttribute(name = "mappedField")
    String mappedField;
    //getter,setter
} 
```

但我得到了这个例外：

```
[INFO] com.sun.xml.internal.bind.v2.runtime.IllegalAnnotationsException: 1 counts of IllegalAnnotationExceptions
[INFO]  at com.sun.xml.internal.bind.v2.runtime.IllegalAnnotationsException$Builder.check(IllegalAnnotationsException.java:66) ~[na:1.6.0_07]
[INFO]  at com.sun.xml.internal.bind.v2.runtime.JAXBContextImpl.getTypeInfoSet(JAXBContextImpl.java:422) ~[na:1.6.0_07]
[INFO]  at com.sun.xml.internal.bind.v2.runtime.JAXBContextImpl.<init>(JAXBContextImpl.java:270) ~[na:1.6.0_07] 
```

我不明白为什么会出现这个异常。例外在这里：

```
JAXBContext context = JAXBContext.newInstance(Fields.class); 
```

我使用 JDK 1.6_0.0.7。谢谢。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-05-29T09:32:08.110

例外是由于您的 JAXB (JSR-222) 实现认为有两个事物映射为相同的名称（一个字段和一个属性）。您的用例有几个选项：

**选项 #1 - 使用注释字段`@XmlAccessorType(XmlAccessType.FIELD)`**

如果要注释字段，则应指定`@XmlAccessorType(XmlAccessType.FIELD)`

***字段.java：***

```
package forum10795793;

import java.util.*;
import javax.xml.bind.annotation.*;

@XmlRootElement(name = "fields")
@XmlAccessorType(XmlAccessType.FIELD)
public class Fields {

    @XmlElement(name = "field")
    List<Field> fields = new ArrayList<Field>();

    public List<Field> getFields() {
        return fields;
    }

    public void setFields(List<Field> fields) {
        this.fields = fields;
    }

} 
```

***字段.java：***

```
package forum10795793;

import javax.xml.bind.annotation.*;

@XmlAccessorType(XmlAccessType.FIELD)
public class Field {

    @XmlAttribute(name = "mappedField")
    String mappedField;

    public String getMappedField() {
        return mappedField;
    }

    public void setMappedField(String mappedField) {
        this.mappedField = mappedField;
    }

} 
```

**选项 #2 - 注释属性**

默认访问器类型是`XmlAccessType.PUBLIC`. 这意味着默认情况下，JAXB 实现会将公共字段和访问器映射到 XML。使用默认设置，您应该注释要覆盖默认映射行为的公共访问器。

***字段.java：***

```
package forum10795793;

import java.util.*;
import javax.xml.bind.annotation.*;

@XmlRootElement(name = "fields")
public class Fields {

    List<Field> fields = new ArrayList<Field>();

    @XmlElement(name = "field")
    public List<Field> getFields() {
        return fields;
    }

    public void setFields(List<Field> fields) {
        this.fields = fields;
    }

} 
```

***字段.java：***

```
package forum10795793;

import javax.xml.bind.annotation.*;

public class Field {

    String mappedField;

    @XmlAttribute(name = "mappedField")
    public String getMappedField() {
        return mappedField;
    }

    public void setMappedField(String mappedField) {
        this.mappedField = mappedField;
    }

} 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2011/06/using-jaxbs-xmlaccessortype-to.html](http://blog.bdoughan.com/2011/06/using-jaxbs-xmlaccessortype-to.html)

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2014-01-08T23:55:40.747

> 我不明白为什么会抛出这个 JAXB IllegalAnnotationException

我也遇到了`### counts of IllegalAnnotationExceptions`异常，这似乎是由于我的 Spring 接线中的依赖层次结构不正确。

我通过在 JAXB 代码中放置一个断点来解决这个问题。对我来说，这是在`com.sun.xml.bind.v2.runtime.IllegalAnnotationsException$Builder.check()`。然后我转储了`list`变量，它给出了类似的东西：

```
[org.mortbay.jetty.Handler is an interface, and JAXB can't handle interfaces.
this problem is related to the following location:
    at org.mortbay.jetty.Handler
    at public org.mortbay.jetty.Handler[] org.mortbay.jetty.handler.HandlerCollection.getHandlers()
    at org.mortbay.jetty.handler.HandlerCollection
    at org.mortbay.jetty.handler.ContextHandlerCollection
    at com.mprew.ec2.commons.server.LocalContextHandlerCollection
    at private com.mprew.ec2.commons.server.LocalContextHandlerCollection com.mprew.ec2.commons.services.jaxws_asm.SetLocalContextHandlerCollection.arg0
    at com.mprew.ec2.commons.services.jaxws_asm.SetLocalContextHandlerCollection,
org.mortbay.jetty.Handler does not have a no-arg default constructor.]
.... 
```

在`does not have a no-arg default constructor`我看来，这具有误导性。也许我不明白异常在说什么。但它确实表明我的`LocalContextHandlerCollection`. 我删除了一个依赖循环并清除了错误。

希望这对其他人有帮助。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-05-29T08:52:08.873

以下情况之一可能会导致异常：

1.  向您的 Fields 类添加一个空的公共构造函数，JAXB 使用反射来加载您的类，这就是引发异常的原因。
2.  为您的列表添加单独的 getter 和 setter。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2012-05-29T09:53:48.680

这是因为默认情况下，Jaxb 在序列化 pojo 时会查找属性的公共成员（getter 或 setter）上的注释。但是，您正在为字段提供注释。因此，要么更改并设置属性的 setter 或 getter 上的注释，要么将 XmlAccessortype 设置为字段。

选项1：：

```
@XmlRootElement(name = "fields")
@XmlAccessorType(XmlAccessType.FIELD)
public class Fields {

        @XmlElement(name = "field")
        List<Field> fields = new ArrayList<Field>();
        //getter, setter
}

@XmlAccessorType(XmlAccessType.FIELD)
public class Field {

       @XmlAttribute(name = "mappedField")
       String mappedField;
       //getter,setter
} 
```

选项 2::

```
@XmlRootElement(name = "fields")
public class Fields {

        List<Field> fields = new ArrayList<Field>();

        @XmlElement(name = "field")
        public List<Field> getFields() {

        }

        //setter
}

@XmlAccessorType(XmlAccessType.FIELD)
public class Field {

       String mappedField;

       @XmlAttribute(name = "mappedField")
       public String getMappedField() {

       }

        //setter
} 
```

有关更多详细信息和深度，请查看以下 JDK 文档[http://docs.oracle.com/javase/6/docs/api/javax/xml/bind/annotation/XmlAccessorType.html](http://docs.oracle.com/javase/6/docs/api/javax/xml/bind/annotation/XmlAccessorType.html)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-08-12T17:26:07.100

我曾经在考虑将`@XmlTransient`不需要序列化的字段放在一个用`@XmlAccessorType(XmlAccessType.NONE)`.

在这种情况下，删除`XmlTransient`解决了问题。我不是 JAXB 专家，但我怀疑因为 AccessType.NONE 表明不应该进行自动序列化（即字段必须专门注释以序列化它们），这使得`XmlTransient`非法，因为它的唯一目的是从自动排除字段序列化。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-02-11T13:27:15.220

对我来说，这个错误实际上是由一个错误地声明为公共而不是私有的字段引起的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-03-30T23:10:31.310

我遇到了同样的问题，我将一个 spring bean 作为 ResponseBody 对象传递回来。当我交还一个由 new 创建的对象时，一切都很好。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-06-02T06:50:38.647

我有同样的问题

**我的问题**

```
Caused by: java.security.PrivilegedActionException: com.sun.xml.internal.bind.v2.runtime.IllegalAnnotationsException: 2 counts of IllegalAnnotationExceptions

Two classes have the same XML type name "{urn:cpq_tns_Kat_getgroupsearch}Kat_getgroupsearch". Use @XmlType.name and @XmlType.namespace to assign different names to them.
this problem is related to the following location:
at katrequest.cpq_tns_kat_getgroupsearch.KatGetgroupsearch
at public javax.xml.bind.JAXBElement katrequest.cpq_tns_kat_getgroupsearch.ObjectFactory.createKatGetgroupsearch(katrequest.cpq_tns_kat_getgroupsearch.KatGetgroupsearch)
at katrequest.cpq_tns_kat_getgroupsearch.ObjectFactory
this problem is related to the following location:
at cpq_tns_kat_getgroupsearch.KatGetgroupsearch

Two classes have the same XML type name "{urn:cpq_tns_Kat_getgroupsearch}Kat_getgroupsearchResponse0". Use @XmlType.name and @XmlType.namespace to assign different names to them.
this problem is related to the following location:
at katrequest.cpq_tns_kat_getgroupsearch.KatGetgroupsearchResponse0
at public javax.xml.bind.JAXBElement katrequest.cpq_tns_kat_getgroupsearch.ObjectFactory.createKatGetgroupsearchResponse0(katrequest.cpq_tns_kat_getgroupsearch.KatGetgroupsearchResponse0)
at katrequest.cpq_tns_kat_getgroupsearch.ObjectFactory
this problem is related to the following location:
at cpq_tns_kat_getgroupsearch.KatGetgroupsearchResponse0 
```

**为解决它而进行的更改如下**

我将各自的名称更改为命名空间

```
@XmlAccessorType(XmlAccessType.FIELD) @XmlType(**name** =
    "Kat_getgroupsearch", propOrder = {

    @XmlAccessorType(XmlAccessType.FIELD) @XmlType(namespace =
    "Kat_getgroupsearch", propOrder = {

@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(**name** = "Kat_getgroupsearchResponse0", propOrder = {

   @XmlAccessorType(XmlAccessType.FIELD)
   @XmlType(namespace = "Kat_getgroupsearchResponse0", propOrder = { 
```

为什么？

正如错误日志中所写，两个类具有相同的名称，因此我们应该使用命名空间，因为**XML 命名空间**用于在 XML 文档中提供唯一命名的元素和属性。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-12-20T08:06:14.907

以下所有选项都对我有用。

选项 1：使用 getter/setter 方法在类和字段级别对 FIELD 进行注释

```
 @XmlRootElement(name = "fields")
 @XmlAccessorType(XmlAccessType.FIELD)
    public class Fields {

        @XmlElement(name = "field")
        List<Field> fields = new ArrayList<Field>();
            //getter, setter
    } 
```

选项 2：在类级别（@XmlAccessorType(XmlAccessType.FIELD) 没有对 FIELD 的注释，并且只有 getter 方法。添加 Setter 方法会抛出错误，因为在这种情况下我们不包括注释。请记住，当你在您的 XML 文件中显式设置值。

```
@XmlRootElement(name = "fields")
    public class Fields {

        @XmlElement(name = "field")
        List<Field> fields = new ArrayList<Field>();
            //getter
    } 
```

选项 3：仅在 getter 方法处进行注释。请记住，我们也可以在这里使用 setter 方法，因为在这种情况下我们不做任何 FIELD 级别的注释。

```
@XmlRootElement(name = "fields")
    public class Fields {

        List<Field> fields = new ArrayList<Field>();

        @XmlElement(name = "field")
        //getter

        //setter
    } 
```

希望这对你有帮助！

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-10-03T13:16:38.270

就我而言，我能够通过临时捕获异常、根据需要下降到原因（基于 IllegalAnnotationException 的深度）并在其上调用 getErrors() 来找到问题。

```
 try {
        // in my case, this was what gave me an exception
        endpoint.publish("/MyWebServicePort");
    // I got a WebServiceException caused by another exception, which was caused by the IllegalAnnotationsException
    } catch (WebServiceException e) {
        // Incidentally, I need to call getCause().getCause() on it, and cast to IllegalAnnotationsException before calling getErrors()
        System.err.println(((com.sun.xml.internal.bind.v2.runtime.IllegalAnnotationsException)e.getCause().getCause()).getErrors());
    } 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-06-20T05:19:09.857

发生这种情况是因为您有 2 个具有相同名称的类。例如，我有 2 个名为 settings 的 SOAP Web 服务，而 settings2 都具有相同的 GetEmployee 类，这是模棱两可的错误证明。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-08-14T16:34:48.037

JAXB (java.xml.bind)

这个答案：

**JDK 14**

**Spring Boot WebFlux 2.3.3.RELEASE**

**龙目岛 1.18.12**

为我工作 >>>>> **JDK 14**

```
<dependency>
    <groupId>javax.xml.bind</groupId>
    <artifactId>jaxb-api</artifactId>
    <version>2.3.1</version>
</dependency>
<dependency>
    <groupId>com.sun.xml.bind</groupId>
    <artifactId>jaxb-impl</artifactId>
    <version>2.3.3</version>
</dependency>
<dependency>
    <groupId>org.glassfish.jaxb</groupId>
    <artifactId>jaxb-runtime</artifactId>
    <version>3.0.0-M4</version>
</dependency> 
```

所以依赖项（**jaxb-api，jaxb-impl，jaxb-runtime**）

我尝试测试每个版本。

正文要求：

```
<?xml version="1.0" encoding="UTF-8"?>
<service generator="zend" version="1.0">
    <send>
        <message>OK</message>
        <status>success</status>
    </send>
</service> 
```

DTO：

```
import lombok.Getter;
import lombok.Setter;

import javax.xml.bind.annotation.XmlAccessType;
import javax.xml.bind.annotation.XmlAccessorType;
import javax.xml.bind.annotation.XmlRootElement;
import java.util.ArrayList;
import java.util.List;

public class SmsSend {

    @Getter
    @Setter
    @XmlRootElement(name = "service")
    public static class ReplyMethodSend {
        private List<ReplyValue> send = new ArrayList<>();
    }

    @Getter
    @Setter
    @XmlAccessorType(XmlAccessType.FIELD)
    public static class ReplyValue {
        private String message;
        private String status;
    }
} 
```

回复：

```
{
    "send": [
        {
        "message": "OK",
        "status": "success"
        }
    ]
} 
```

享受编程的乐趣^__^

# android - Android 选项卡将在屏幕上显示在另一个之上

> ID：10795801
> 
> 赞同：1
> 
> 时间：2012-05-29T08:42:55.940
> 
> 标签：android, tabs, tabbar

我是安卓新手。我希望我的 3 个选项卡显示在屏幕底部（一个在另一个之上）。请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T10:09:35.643

检查[本教程](http://kandroid.wordpress.com/2011/05/31/tabview-part-5-tab-control-at-bottom-of-app/)。
它有大约 7 到 8 个部分，并提供了关于`TabView`.

# postgresql - Postgresql 从表中获取最后几行

> ID：10795806
> 
> 赞同：4
> 
> 时间：2012-05-29T08:43:07.210
> 
> 标签：postgresql, select

我有[PostgreSQL](http://www.postgresql.org/)表：

```
Username1 SomeBytes1

Username2 SomeBytes1

Username1 SomeBytes1

Username1 SomeBytes1 
```

我需要从名称为 Username1 但从表的末尾获取一些行。例如，我需要最后一行 Username1

```
select from my_table where user = Username1 LIMIT 2 
```

给我前两行，但我需要最后两行。

我该如何选择它？

谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-29T08:54:35.810

表中的第一个和最后一个是非常随意的。为了获得良好的可预测结果，您应该始终有一个`order by`子句。如果你有这个，那么获得最后两行将变得容易。

例如，如果您有一个主键或类似 ID 的东西（由序列填充），那么您可以执行以下操作：

```
select * from my_table where user = 'Username1' order by ID desc limit 2. 
```

`desc`告诉数据库以相反的顺序对行进行排序，这意味着最后一个将是第一个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T08:59:28.403

你的表有主键吗？/ 你的桌子可以排序吗？因为“第一个”和“最后一个”的概念意味着对元组进行某种排序。如果是这种情况，您可以反过来对数据进行排序，以便您的“最后”条目位于顶部。然后，您可以使用您尝试过的语句访问它们。

# drools - 在drools的“then”子句中获取规则名称

> ID：10795811
> 
> 赞同：14
> 
> 时间：2012-05-29T08:43:30.397
> 
> 标签：drools

是否可以在 drool 规则的 then 子句中检索规则名称？

```
rule "A"
    when
        ---
    then
        // something that outputs "A" 
```

谢谢。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-05-29T12:59:26.370

是的，在 then 子句中你可以使用表达式：

```
drools.getRule().getName() 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-03T10:20:47.590

正如 Cyril 所说，您可以通过调用 drools 规则的 drools.getRule().getName() 来获取 then 子句中的规则名称。

更多信息，您可以在以下 api 中检查规则接口中的 getName() 方法：http: [//docs.jboss.org/jbpm/v5.1/javadocs/org/drools/definition/rule/Rule。 html](http://docs.jboss.org/jbpm/v5.1/javadocs/org/drools/definition/rule/Rule.html)

# php - PHP - 替换或匹配字符串中的\r\n？

> ID：10795813
> 
> 赞同：1
> 
> 时间：2012-05-29T08:43:41.203
> 
> 标签：php, regex, line-breaks

我有一个字符串，它看起来像这样：

```
PS-B 08 m.Gear\r\n125cm silver 
```

我正在尝试用其他东西替换 \r\n ，但到目前为止我的所有尝试都失败了。我试过了`[\r\n]`，我试过了。我尝试了 s 修饰符，但没有一个起作用。如何`\r\n`正确替换或匹配字符串？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T08:46:52.680

这有效：

```
$str = 'PS-B 08 m.Gear\r\n125cm silver';
$newStr = str_replace('\r\n', '######', $str);
echo $newStr; 
```

**结果：**

```
PS-B 08 m.Gear######125cm silver 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T08:46:27.093

如果你的意思是`"\r\n"`，那么：

```
$str = str_replace("\r\n", $something, $your_str); 
```

# iphone - 在 iPhone 中构建时找不到 libsqlite3.0.dylib

> ID：10795816
> 
> 赞同：2
> 
> 时间：2012-05-29T08:43:43.123
> 
> 标签：iphone, xcode

我试图将我的应用程序放在物理 iPhone 中，但 xCode 告诉我找不到库 libsqlite3.0.dylib。

错误代码 ：

ld：找不到-lsqlite3.0 clang的库：错误：链接器命令失败，退出代码为1（使用-v查看调用）

我无法使用 libsqlite3.dylib，因为我误删了它，并且找不到下载链接。

该应用程序在 IOS 模拟器上完美运行。

谢谢你的帮助 ！！

编辑 ！

我重新安装了 xCode 并使用 sqlite3.dylib 框架并完美运行！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T07:54:04.403

我重新安装了 xCode 并使用 sqlite3.dylib 框架并完美运行！

# jquery - 带有单选按钮的 jQuery 移动计数气泡

> ID：10795824
> 
> 赞同：0
> 
> 时间：2012-05-29T08:44:46.167
> 
> 标签：jquery, jquery-mobile

我有一系列单选按钮，我希望显示类似于列表视图计数气泡的计数值。这可以使用框架完成吗？

我试过使用以下 -

```
<input type="radio" name="radio1" id="radio1" value="30" checked="checked" />
<label for="radio1">Blank<span class="ui-li-count">30</span></label> 
```

基本上它只是显示`value`每个收音机项目的。

谢谢

*编辑*

我希望在我拥有的每个单选按钮的最右侧显示一个值。非常类似于计数气泡用于列表项的方式。

[此处](http://jquerymobile.com/demos/1.1.0/docs/lists/lists-count.html)的列表项计数气泡示例

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T09:16:23.723

您需要添加带有 data-role="listview" 属性的 ul 标记，然后在 li 标记中包含这样的 select 和 span

```
<div data-role="content">
    <ul data-role="listview">
        <li>
            <select>
                <option>select</option>
                ..
            </select>
            <span class="ui-li-count">23</span>
        </li>
    </ul>
</div> 
```

# silverlight - Silverlight 鼠标悬停

> ID：10795825
> 
> 赞同：1
> 
> 时间：2012-05-29T08:44:48.070
> 
> 标签：silverlight, silverlight-4.0

可以在鼠标悬停时更改按钮控件的图像源吗？

如果是怎么做的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T09:06:33.277

以下代码可能会有所帮助：

```
button1.MouseEnter += new MouseEventHandler(button1_MouseEnter);
button1.MouseLeave += new MouseEventHandler(button1_MouseLeave);

void button1_MouseEnter(object sender, MouseEventArgs e)
{
    button1.Content = image1;
    //do something
}

void button1_MouseLeave(object sender, MouseEventArgs e)
{
    //do something
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T09:08:27.383

您可以为此使用触发器。您可以按照[本文](http://learnwpf.com/post/2006/03/06/How-do-I-change-an-items-appearance-on-mouseover-in-WPF.aspx)或[本文](https://stackoverflow.com/a/934834/840039)寻求解决方案

参考：

```
<!-- Button will change from Blue to Yellow on MouseOver -->
<Style TargetType="{x:Type Button}">
    <Setter Property="Background" Value="Blue" />
    <Style.Triggers>
        <Trigger Property="IsMouseOver" Value="True">
            <Setter Property="Background" Value="Yellow" />
        </Trigger>
    </Style.Triggers>
</Style> 
```

# python - 当我点击它时如何在列表中获取项目

> ID：10795828
> 
> 赞同：0
> 
> 时间：2012-05-29T08:44:51.033
> 
> 标签：python, wxpython, listctrl

当我双击一行时，返回该行第二列的项目。如何做到这一点？我找到了一个函数：GetItem().GetText() 但我不知道如何使用它。请给我一个例子。或者您可以使用其他一些方法。谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T13:51:56.730

该文档讨论了 GetItem 的工作原理，但我找到了几个论坛主题为您解释它：

*   [http://ubuntuforums.org/showthread.php?t=1458398](http://ubuntuforums.org/showthread.php?t=1458398)
*   [http://www.velocityreviews.com/forums/t351572-newbie-wxpython-listctrl-question.html](http://www.velocityreviews.com/forums/t351572-newbie-wxpython-listctrl-question.html)

# django - Django REST API 接收图像

> ID：10795834
> 
> 赞同：0
> 
> 时间：2012-05-29T08:45:35.153
> 
> 标签：django, image, api, rest

我有一个使用 Tastypie 作为主要 API 的 Django 项目，它工作正常。但现在我希望能够通过 API 接收图像（来自手机等）。看起来 Tastypie 在那个领域还没有准备好。我已准备好为此尝试其他方法，甚至编写自定义视图。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T10:02:23.817

一个标准的 Django 视图在技术上也可以用作 API 端点，那么为什么不编写一个处理 POST 有效负载的视图呢？

您甚至可以制作一个用于验证输入的表单，即使您的客户端设备没有使用该表单来捕获内容 - 只要字段及其标准匹配，它仍然适合。

# python - 如何在 Python 中使用 goog.net.IframeIo 将文件上传到 Blobstore？

> ID：10795837
> 
> 赞同：2
> 
> 时间：2012-05-29T08:45:58.910
> 
> 标签：python, google-app-engine, blobstore, google-closure

在这里，我尝试将文件**异步**上传到 blobstore。以下是我到目前为止所做的：

**.html 文件**

```
<form id="my_form" enctype="multipart/form-data" method="POST"
      action="/partner">
  <input type="file" id="my_file" name="my_file"/>
</form> 
```

**js文件**

```
my.Project.prototype.onFileUpload = function(e) {
  var uploadForm = /** @type {HTMLFormElement} */ (
          goog.dom.getElement('my_form'));
  var iframeIo = new goog.net.IframeIo();
  goog.events.listen(iframeIo, goog.net.EventType.COMPLETE, function() { alert('request complete'); });
  iframeIo.sendFromForm(uploadForm); 
```

**蟒蛇代码**

```
class MyHandler(blobstore_handlers.BlobstoreUploadHandler):
  def post(self):
    logging.info(self.request)   // I can see my file in this line's output
    upload_files = self.get_uploads('my_file')
    logging.info(upload_files)  //upload_files come out to be an empty array
    blob_info = upload_files[0]
    self.redirect('/partner/serve/%s' % blob_info.key()) 
```

有关如何从 Request 对象中获取要上传的文件的任何指针。谷歌教程提供的关于 blobstore 的 python 代码可以在[这里](https://developers.google.com/appengine/docs/python/blobstore/overview#Complete_Sample_App)找到。

现在我被困住了。我相信如果我能用 python 代码获取文件，我就可以上传它。任何指针都会非常有帮助。

谢谢，
莫希特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T09:25:44.867

这实际上不是关于 iframeio 的问题，而只是关于在 AppEngine 中上传的问题。您缺少的是您应该首先在 GET 方法中创建一个要上传到的 URL，并将其用作`action`表单的参数。请参阅AppEngine 文档中的[示例应用程序。](https://developers.google.com/appengine/docs/python/blobstore/overview#Complete_Sample_App)

所以在你的情况下，你会这样做`upload_url = blobstore.create_upload_url('/partner')`，并且在你的模板中`<form action="{{ upload_url }}" method="POST" enctype="multipart/form-data">`，等等。

# delayed-job - 未初始化的常量Delayed::DelayProxy::Job 与delayed_job 2.0.7

> ID：10795839
> 
> 赞同：0
> 
> 时间：2012-05-29T08:46:13.263
> 
> 标签：delayed-job, ruby-on-rails-2

我通过 gem 安装了 DJ，版本 2.0.7 用于 rails 2 项目。我添加了

```
require 'delayed_job'
Delayed::Worker.destroy_failed_jobs = false
Delayed::Worker.max_attempts = 5 
```

到初始化器。当我尝试 .delay 我得到的东西时

NameError（未初始化的常量Delayed::DelayProxy::Job）：/var/lib/gems/1.8/gems/delayed_job-2.0.7/lib/delayed/message_sending.rb:9:in `method_missing'

有任何想法吗？Tahnks 和问候，博士。

# django - 无法为数据表指定默认排序方向

> ID：10795842
> 
> 赞同：1
> 
> 时间：2012-05-29T08:46:34.060
> 
> 标签：django, datatables

我使用数据[表](http://datatables.net/usage/columns)列出我的数据。我想定义默认排序列（列表项的创建日期）。在我的 django 视图中，我像这样按降序发送数据

```
MyObjects.objects.order_by('-create_date') 
```

即使我在创建日期列上拒绝排序（使用 bSortable），我的模板也会将排序顺序更改为升序。我尝试使用 asSorting 属性，但它在第一次单击表头后起作用。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T10:31:59.157

1.  检查您是否正确使用 aaSorting 属性数据表示[例](http://www.datatables.net/examples/basic_init/table_sorting.html)
2.  检查您准备数据表记录的方法是否有适当的代码来处理默认排序

# javascript - 是否可以在不刷新地图表单的情况下使用 js 发送值？

> ID：10795846
> 
> 赞同：1
> 
> 时间：2012-05-29T08:46:46.150
> 
> 标签：javascript, forms, return-value

我已经在我的网站上实现了按地图功能搜索。地图有一些可点击的分区并向控制器发送一个值。

```
<form name="myform" action="index.php?option=com&amp;task=seacrh_by_map" method="post">
<dd id="imgDI">
<a id="DI" href="javascript:getvalue('DI')" 
</a>
</dd>
<dd id="imgDII">
<a id="DI" href="javascript:getvalue('DII')" 
</a>
</dd>
<input type="hidden" name="my_value" value="" />    
</form>

<script language="JavaScript" type="text/javascript">
<!--
function getvalue (my_value)
{
document.myform.my_value.value = my_value;
document.myform.submit() ;
}
-->
</script> 
```

发送此表单后，控制器给出答案（搜索结果），地图返回其原始位置。有没有办法防止这种情况？地图应显示所选的分区。有没有办法在不刷新地图表单的情况下使用 js 向控制器发送值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T08:58:33.567

您可以为此使用 AJAX 和 JSON

AJAX = 一种使用 JavaScript 通过 HTTP 异步检索资源的方法

JSON = 代表 JavaScript Object Notation

简单的例子在[这里](http://www.jquery4u.com/json/ajaxjquery-getjson-simple/#.T8SO6LBo3Zc)

AJAX 代表异步 JavaScript 和 XML，这是一种听起来很吓人的技术组合，但不要让流行语吓到您。将 AJAX 视为一种结合了多种技术的编程技术。请记住，您很幸运，因为[jQuery](http://www.jquery4u.com/json/ajaxjquery-getjson-simple/#.T8SO6LBo3Zc)为您简化了 AJAX。

# date - 在 PHP 中比较两个日期的正确方法是什么？

> ID：10795850
> 
> 赞同：1
> 
> 时间：2012-05-29T08:46:56.943
> 
> 标签：date, php

我有以下代码来比较 PHP 中的两个日期，其中一个是合适的方法

```
<?php 
$var = date('d-m-Y',strtotime('29-05-2012'));
$var1 = date('d-m-Y',strtotime('27-06-2012'));

echo $var;    //29-05-2012
echo $var1;   //27-06-2012
if($var1 >= $var) //method 1
 {
  echo 'var1 is future date';
 }
 if(strtotime($var1) >= strtotime($var)) //method 2
 {
 echo 'var1 is future date(second if)';
 }
 ?> 
```

在上述两种方法中，method-1 不起作用，在 PHP 中比较两个日期不是正确的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T08:48:38.673

不，第一种方法是不正确的，因为`$var1`and`$var`是字符串，所以你不能这样比较它们。

但是， strtotime() 创建 unix 时间戳（整数），因此您可以并且应该像这样比较它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T08:57:08.307

只需将日期保留为字符串，然后使用`strtotime`in 进行转换`if ()`。

```
$a = '29-5-2012';
$b = '27-6-2012';

if (strtotime($a) >= strtotime($b)) {
    echo "$a is future date.";
} else {
    echo "$b is future date.";
}

// 27-6-2012 is future date. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T08:55:05.343

根据您的 php 版本 >= 5.3，您可以尝试**[date_diff()](http://php.net/manual/en/function.date-diff.php)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T09:04:59.097

```
$time1 = strtotime('29-05-2012'); # <--- past
$time2 = strtotime('27-06-2012'); # <--- future

echo max($time1,$time2);
echo "<br />";
echo min($time1,$time2); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-29T09:06:24.110

为什么不：

```
if (mktime(0,0,0,12,31,2012) > mktime(0,0,0,6,25,2011)) {
   echo "12/31/2012 is after 6/25/2011";
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-07-26T05:23:00.740

```
$date1=date('d/m/y');
$tempArr=explode('_', '31_12_11');
$date2 = date("d/m/y", mktime(0, 0, 0, $tempArr[1], $tempArr[0], $tempArr[2])); 
```

# wpf - 覆盖xaml中父类的按钮

> ID：10795851
> 
> 赞同：0
> 
> 时间：2012-05-29T08:46:58.193
> 
> 标签：wpf, xaml, overriding, parent

有没有办法覆盖我父类的子 xaml 文件中的按钮？或者在父类中获取chield按钮的最佳方法是什么？

# asp.net - ModalPopupExtender 中的控件未触发

> ID：10795852
> 
> 赞同：1
> 
> 时间：2012-05-29T08:47:04.027
> 
> 标签：asp.net, ajaxcontroltoolkit

我有一个扩展面板的 ModalPopupExtender，在面板中，有一个我想要执行的功能，它通过面板内的按钮执行，执行后，它将关闭面板。

但是，单击时的btnProcess根本没有触发btnProcess_Click..调试显示该函数根本没有执行

我不知道为什么它不发射。

```
 <asp:Panel ID="Panel1" runat="server" Height="600px" Width="800px" CssClass="ModalWindow">

                <asp:Button ID="btnProcess" runat="server" Text="Ok" onclick="btnProcess_Click"/>

            </asp:Panel>
            <ajaxToolkit:RoundedCornersExtender ID="Panel1_RoundedCornersExtender" runat="server"
                Enabled="True" TargetControlID="Panel1" Radius="10" BorderColor="Black">
            </ajaxToolkit:RoundedCornersExtender>
            <ajaxToolkit:ModalPopupExtender ID="Panel1_ModalPopupExtender" runat="server" DynamicServicePath=""
                BackgroundCssClass="modalBackground" Enabled="True" PopupControlID="Panel1" TargetControlID="dummy" >
            </ajaxToolkit:ModalPopupExtender> 
```

这是它应该运行的代码。

```
 protected void btnProcess_Click(object sender, EventArgs e)
 {
     //process .. bla bla bla
    Panel1_ModalPopupExtender.hide();
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T09:58:14.240

我遇到了同样的问题，我通过将此行添加到您的代码后面来解决它：

```
 btnProcess.OnClientClick = String.Format("fnClickDoPostBack('{0}','{1}')", btnOk.UniqueID, ""); 
```

这在你的标记中：

```
<script type="text/javascript">
            function fnClickDoPostBack(sender, e) {
                __doPostBack(sender, e);
            }
        </script> 
```

# java - 休眠选择查询的结果列表确实被强制转换为相应的 bean 类

> ID：10795853
> 
> 赞同：-1
> 
> 时间：2012-05-29T08:47:09.783
> 
> 标签：java, mysql, hibernate

以下查询是由休眠生成的

```
Select sum(B.c_rejected_count) as y0_,B.c_date as y1_,B.c_node_site_id as y2_, 
A.c_sccp_addr as y3_ from tb_sccp_addr A inner join tb_dm_sccp_rej_day B on 
A.c_sccp_addr_id=B.c_sccp_addr_fk  group by A.c_date, A.c_node_site_id,       
B.c_sccp_addr, B.c_sccp_addr_id ; 
```

我的 Beanclass 有以下数据：

```
private Date date;
private long rejectedCount;
private int nodeSiteId;
private String sccpAddress; 
```

当我将选择查询的结果列表转换为我的 beanclass 时，我得到一个转换异常

```
java.lang.ClassCastException 
```

请确定出了什么问题以及如何解决

我正在使用 Java 反射

//函数初始化选择查询

```
private void initializeSelectQuery()
    {
        log(Level.DEBUG, "Entering initializeSelectQuery");
        Class classname = beanclass.getMappedClass();
        crit = hibernateSession.createCriteria(classname);

               if(group.getAggregate().equals("SUM"))
        {
                       projectionList.add(Projections.sum(beanDefinition
               .getPropertyForColumn(group.getColumnName())));
             }
               else
               {
                     projectionList.add(Projections.groupProperty(beanDefinition
              .getPropertyForColumn(group.getColumnName())));
               }
                  crit.setProjection(projectionList);
        crit.setMaxResults(10); 
       }

public List executeSelectQuery() {
    log(Level.DEBUG, "Entering executeSelectQuery");

    List datalist = null;

    try {
        tx = hibernateSession.beginTransaction();
        if (crit != null) {
            datalist = crit.list();
        }
        tx.commit();

    } catch (MappingException e) {
        e.printStackTrace();
        System.out.println(e.getMessage());
    } catch (HibernateException e) {
        e.printStackTrace();
    }

    log(Level.DEBUG, "Exiting executeSelectQuery");
    return datalist;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T09:15:02.507

您的查询似乎没有使用任何结果转换器（例如`AliasToBeanResultTransformer`）。因此，由于它使用投影列表，因此您的查询返回一个`List<Object[]>`. Hibernate 无法知道它必须返回 bean 类的实例。要么`List<Object[]>`明确地将其转换为你想要的，要么使用 ResultTransformer。

# ruby - Cucumber test double：场景失败但其步骤通过

> ID：10795854
> 
> 赞同：0
> 
> 时间：2012-05-29T08:47:11.393
> 
> 标签：ruby, rspec, mocking, cucumber, bdd

我正在使用[The RSpec Book](http://pragprog.com/book/achbd/the-rspec-book)学习 Rspec + Cucumber 。我才刚刚开始，正在开发 Codebreaker 游戏。

其中，有一个功能“Codebreaker 开始游戏”，它代表用户在 shell 中键入命令并得到两个响应：“欢迎使用 Codebreaker！” 和“输入猜测：”。这是该功能的外观：

```
Feature: code-breaker starts game
   As a code-breaker
   I want to start a game
   So that I can break the code

   Scenario: start game
      Given I am not yet playing
      When I start a new game
      Then I should see "Welcome to Codebreaker!"
      And I should see "Enter a guess:" 
```

由于`cucumber`脚本使用了输出，因此本书正在创建一个模拟对象`output`，该对象期望接收`puts`带有参数`Welcome to Codebreaker!`的消息。`Enter a guess:`这是它在步骤定义中的外观：

```
#the mock object
class Output
   def messages
      @messages ||= []
   end

   def puts(message)
      messages << message
   end
end

def output
   @output ||= Output.new
end

Given /^I am not yet playing$/ do
end

When /^I start a new game$/ do
   game = Codebreaker::Game.new(output)
   game.start
end

Then /^I should see "([^"]*)"$/ do |message|
   output.messages.should include(message)
end 
```

好的，到目前为止没有问题。

做这个练习，我记得之前看过 rspeck doubles 框架可以在 cucumber 内部使用，所以我想我可以稍微清理一下。

首先，我将 rspeck doubles 框架包含在`support/env.rb`：

```
require 'cucumber/rspec/doubles' 
```

然后我更改了步骤定义：

```
Given /^I am not yet playing$/ do
end

When /^I start a new game$/ do
   @output = double('output').as_null_object #the mock object
   game = Codebreaker::Game.new(@output)
   game.start
end

Then /^I should see "([^"]*)"$/ do |message|
   @output.should_receive(:puts).with(message)
end 
```

奇怪的想法是，现在，当我用 cucumber 执行功能时，在总结中我得到了所有 4 个步骤，但不是整个场景。这怎么可能？这是怎么回事？这是我从命令行获得的输出：

```
Feature: code-breaker starts game
   As a code-breaker
   I want to start a game
   So that I can break the code

  Scenario: start game                          # features/codebreaker_starts_game.feature:6
    Given I am not yet playing                  # features/step_definitions/codebreaker_steps.rb:1
    When I start a new game                     # features/step_definitions/codebreaker_steps.rb:4
    Then I should see "Welcome to Codebreaker!" # features/step_definitions/codebreaker_steps.rb:10
    And I should see "Enter a guess:"           # features/step_definitions/codebreaker_steps.rb:10
      (Double "output").puts("Welcome to Codebreaker!")
          expected: 1 time
          received: 0 times (RSpec::Mocks::MockExpectationError)
      /home/a_user/www/codebreaker/features/step_definitions/codebreaker_steps.rb:11:in `block in <top (required)>'
      /var/lib/gems/1.9.1/gems/rspec-mocks-2.10.1/lib/rspec/mocks/error_generator.rb:80:in `__raise'
      /var/lib/gems/1.9.1/gems/rspec-mocks-2.10.1/lib/rspec/mocks/error_generator.rb:39:in `raise_expectation_error'
      /var/lib/gems/1.9.1/gems/rspec-mocks-2.10.1/lib/rspec/mocks/message_expectation.rb:251:in `generate_error'
      /var/lib/gems/1.9.1/gems/rspec-mocks-2.10.1/lib/rspec/mocks/message_expectation.rb:207:in `verify_messages_received'
      /var/lib/gems/1.9.1/gems/rspec-mocks-2.10.1/lib/rspec/mocks/method_double.rb:117:in `block in verify'
      /var/lib/gems/1.9.1/gems/rspec-mocks-2.10.1/lib/rspec/mocks/method_double.rb:117:in `each'
      /var/lib/gems/1.9.1/gems/rspec-mocks-2.10.1/lib/rspec/mocks/method_double.rb:117:in `verify'
      /var/lib/gems/1.9.1/gems/rspec-mocks-2.10.1/lib/rspec/mocks/proxy.rb:88:in `block in verify'
      /var/lib/gems/1.9.1/gems/rspec-mocks-2.10.1/lib/rspec/mocks/proxy.rb:88:in `each'
      /var/lib/gems/1.9.1/gems/rspec-mocks-2.10.1/lib/rspec/mocks/proxy.rb:88:in `verify'
      /var/lib/gems/1.9.1/gems/rspec-mocks-2.10.1/lib/rspec/mocks/methods.rb:116:in `rspec_verify'
      /var/lib/gems/1.9.1/gems/rspec-mocks-2.10.1/lib/rspec/mocks/space.rb:11:in `block in verify_all'
      /var/lib/gems/1.9.1/gems/rspec-mocks-2.10.1/lib/rspec/mocks/space.rb:10:in `each'
      /var/lib/gems/1.9.1/gems/rspec-mocks-2.10.1/lib/rspec/mocks/space.rb:10:in `verify_all'
      /var/lib/gems/1.9.1/gems/rspec-mocks-2.10.1/lib/rspec/mocks.rb:19:in `verify'
      /var/lib/gems/1.9.1/gems/cucumber-1.1.9/lib/cucumber/rspec/doubles.rb:12:in `After'

Failing Scenarios:
cucumber features/codebreaker_starts_game.feature:6 # Scenario: start game

1 scenario (1 failed)
4 steps (4 passed)
0m0.009s 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T08:54:28.667

当您设置类似 的期望时`should_receive`，您指定在将来的某个时间点应该调用指定的方法 - 之前发生的任何事情都将被忽略（否则它将是过去时的应该 have_received 或类似的东西）。

在您的代码中，您在步骤中设置了期望，`Then`但在您的步骤中调用了该方法`When`（即之前），因此此时没有设置期望。您的双重设置允许调用任何方法，因此您不会收到任何错误，但是当规范检查最后是否满足所有期望时，它会拒绝并引发异常

# php - PHP，提取facebook用户的图像并将其保存到数据库中

> ID：10795855
> 
> 赞同：0
> 
> 时间：2012-05-29T08:47:26.430
> 
> 标签：php

我的网站使用 facebook login api 让人们轻松登录。

如果我知道他们的 Facebook ID 号码，我可以获得用户的 Facebook 个人资料图片。

```
$fb_id = $this->input->post('fb_id');
$fb_image_url = 'https://graph.facebook.com/'.$fb_id.'/picture?type=large'; 
```

所以如果我有正确的身份证号码并在网站上发布网址，它会重定向到 jpg 地址。

```
https://fbcdn-profile-a.akamaihd.net/hprofile-ak-snc4/274661_1171545457_647564606.jpg 
```

因此，我不能使用第一个地址将图像文件保存到db中。

在使用 $fb_image_url 之前，我需要做一些事情来获取真实的图像地址。

有没有办法通过使用 PHP 来获取最终地址？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T09:32:29.133

`file_get_contents('https://graph.facebook.com/$fb_id/picture?type=large.');` *应该*能够抓取 img 内容。你试过吗？

# javascript - 如何在 JavaScript 中检查程序是否以管理员权限运行

> ID：10795857
> 
> 赞同：3
> 
> 时间：2012-05-29T08:47:30.440
> 
> 标签：javascript, browser, windows-7, uac, administration

如果当前程序以管理权限运行，是否有任何方法可以检查 JavaScript？

例如，在 C# 中，我可以使用以下代码来实现：

```
bool isRunningWithAdminApprovals;
WindowsIdentity identity = WindowsIdentity.GetCurrent();
WindowsPrincipal principal = new WindowsPrincipal(identity);
isRunningWithAdminApprovals = principal.IsInRole(WindowsBuiltInRole.Administrator); 
```

但是我需要使用当前正在运行的 javaScript 脚本来检查它。如果我尝试运行 exe 或 C# 代码的包装器，UAC 将提示我批准它，然后我将已经处于管理特权...

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T08:53:37.583

在现代浏览器中，Javascript 环境是在沙箱中运行的，因此除了浏览器放入沙箱中的内容（即用户代理字符串等）之外，您无法了解系统的任何信息。

我担心您必须依赖其他技术，例如 Flash 或 Java，然后使用 Javascript 检索值。

# linux - 在远程 linux 服务器的 tomcat 中部署 eclipse maven 项目

> ID：10795863
> 
> 赞同：1
> 
> 时间：2012-05-29T08:47:52.140
> 
> 标签：linux, eclipse, maven, web-deployment-project, remote-server

我正在寻找一种在远程 linux 服务器的 tomcat 中部署使用 eclipse 开发的 maven 项目的方法。我知道您可以将其导出为 .war 文件并将其转储到远程服务器的 CATALINA_HOME/webapps 文件夹中。但为此，您必须先将其导出为 .war 文件，然后通过 SFTP 或 SCP 将 .war 文件复制到远程服务器。我正在寻找一种使用 eclipse 或/和配置一些 maven 设置（在 pom.xml 或 settings.xml 中）点击几下的方法。有谁知道如何做到这一点？非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T12:17:02.550

您正在寻找的工具称为[**Tomcat Maven 插件**](http://mojo.codehaus.org/tomcat-maven-plugin/)

它的基本作用是使用*Tomcat 管理器*应用程序的 API，您必须确保将其部署在您正在使用的 Tomcat 实例上。默认情况下，Tomcat 管理器应该在以下位置可用：

```
http://ip_of_your_linux_server:8080/manager/html 
```

如果不是，请使用以下命令安装它：

```
sudo apt-get install tomcat6-admin 
```

您可以按如下方式配置**Tomcat实例的位置：**

```
<plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>tomcat-maven-plugin</artifactId>
        <configuration>
                <url>http://www.mydomain.com:1234/mymanager</url>
        </configuration>
</plugin> 
```

然后运行 ​​maven **mvn tomcat:deploy**目标。（无论是从命令行还是从 Eclipse 使用*m2Eclipse 插件*。）

请参阅插件的[配置](http://mojo.codehaus.org/tomcat-maven-plugin/configuration.html)和[部署](http://mojo.codehaus.org/tomcat-maven-plugin/deployment.html)页面以获取更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T12:21:22.750

为许多不同的容器（如 Tomcat、Jetty、Glassfish 等）提供适配器的最灵活的解决方案可能是 Maven Cargo 插件。您可以[在他们的主页上找到大量示例列表](http://cargo.codehaus.org/Deploying+to+a+running+container)，因此无需在此处再次粘贴。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T18:16:10.783

要远程部署应用程序，您需要在 tomcat 实例上配置[tomcat deployer 应用程序。](http://tomcat.apache.org/tomcat-7.0-doc/manager-howto.html)请注意，管理员用户的配置在 tomcat 6 和 7 之间发生了一些细微的变化。

一旦这个工作正常，Maven cargo 插件可以部署 war 文件，如下所示：

```
<plugin>    
    <groupId>org.codehaus.cargo</groupId>    
    <artifactId>cargo-maven2-plugin</artifactId>    
    <version>1.2.1</version>    
    <executions>    
        <execution>    
            <id>tomcat-deploy</id>    
            <phase>package</phase>    
            <configuration>    
                <container>    
                    <containerId>tomcat7x</containerId>    
                    <type>remote</type>    
                </container>    
                <configuration>    
                    <type>runtime</type>    
                    <properties>    
                        <cargo.remote.uri>${tomcat.manager.url}</cargo.remote.uri>    
                        <cargo.remote.username>${tomcat.manager.user}</cargo.remote.username>
                        <cargo.remote.password>${tomcat.manager.pass}</cargo.remote.password>
                    </properties>
                </configuration>
                <deployer>
                    <deployables>
                        <deployable>
                           <groupId>${project.groupId}</groupId>
                            <artifactId>${project.artifactId}</artifactId>
                            <type>war</type>
                            <properties>
                                <context>${project.artifactId}</context>
                            </properties>
                        </deployable>
                    </deployables>
                </deployer>
            </configuration>
            <goals>
                <goal>deploy</goal>
            </goals>
        </execution>
    </executions>
</plugin> 
```

**补充说明**

*   Cargo 插件支持几种不同的容器，问题是 doco 很难解释。
*   我没有使用过 Maven 插件。很新

# android - Android Http 客户端缓存

> ID：10795867
> 
> 赞同：6
> 
> 时间：2012-05-29T08:48:06.693
> 
> 标签：android, caching, apache-httpclient-4.x

在我的 android 应用程序中，我试图缓存 Http Client 的响应。我正在使用 facebook graph api 测试此任务并具有以下网址：[https ://graph.facebook.com/riz.ahmed.52](https://graph.facebook.com/riz.ahmed.52)

我第一次得到“first_name”并显示它。然后我更改我的 Facebook 个人资料的名字并再次调用相同的链接。我期待得到旧的/缓存的“first_name”，但我得到了更新的。当我调用 url 时，控制台总是显示**“响应来自上游服务器”消息。**

我的 Http Client 代码如下：

```
 CacheConfig cacheConfig = new CacheConfig();  
    cacheConfig.setMaxCacheEntries(1000);
    cacheConfig.setMaxObjectSizeBytes(8192);

    //HttpClient httpclient = new CachingHttpClient(new DefaultHttpClient(), cacheConfig);
    DefaultHttpClient httpclient = new DefaultHttpClient();
    HttpContext localContext = new BasicHttpContext();

    // Updated code [START]
    httpclient.addResponseInterceptor(new HttpResponseInterceptor() {
        public void process(
            final HttpResponse response,
            final HttpContext context) throws HttpException, IOException {

                 response.removeHeader(response.getFirstHeader("Pragma"));
                 response.removeHeader(response.getFirstHeader("Expires"));

            }                
        });
    // Updated code [END]

    HttpGet httpget = new HttpGet(url);

            // Execute HTTP Get Request
    HttpResponse response = httpclient.execute(httpget, localContext);
    HttpEntity entity = response.getEntity();
    String res = EntityUtils.getContentCharSet(entity);

    CacheResponseStatus responseStatus = (CacheResponseStatus) localContext.getAttribute(
        CachingHttpClient.CACHE_RESPONSE_STATUS);

    switch (responseStatus) {
        case CACHE_HIT:
            System.out.println("A response was generated from the cache with no requests " +
                "sent upstream");
            break;
        case CACHE_MODULE_RESPONSE:
                System.out.println("The response was generated directly by the caching module");
                break;
        case CACHE_MISS:
                System.out.println("The response came from an upstream server");
                break;
        case VALIDATED:
                System.out.println("The response was generated from the cache after validating " +
                        "the entry with the origin server");
                break;
            } 
```

我正在使用**Android 2.3.3**。请让我知道我在这里缺少什么

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T08:55:03.687

您正在加载的页面指定了一个`Expires:Sat, 01 Jan 2000 00:00:00 GMT`标题，即它始终被认为是陈旧的，并且必须始终重新获取。

**编辑**：

`Pragma: no-cache`显然也返回一个。基本上，它告诉你的 HTTP 客户端永远不要缓存这个页面。如果您对缓存响应一无所知，则可以使用[HttpResponseInterceptor](http://developer.android.com/reference/org/apache/http/HttpResponseInterceptor.html)删除这些标头。

**#2 编辑**：

使用`http-clientcache-4.2.jar`会有问题，因为它与 Android SDK 打包的 HTTP 客户端版本不完全兼容——`NoClassDefFoundError`使用它时你会得到 s 和类似的废话。

但是 - 如果您通过下载 clientcache-4.2 的源代码来“构建自己的”并删除任何未实现的引用（例如重构公共日志记录的包名称）并杀死散布在整个代码中的所有注释（等等）。 ) 你可能会得到一个工作版本。如果你这样做，这有效：

```
class MakeCacheable implements HttpResponseInterceptor {
    public static MakeCacheable INSTANCE = new MakeCacheable();
    public void process(HttpResponse resp, HttpContext ctx) throws HttpException, IOException {
        resp.removeHeaders("Expires");
        resp.removeHeaders("Pragma");
        resp.removeHeaders("Cache-Control");
    }
} 
```

注入到类似这样的`DefaultHttpClient`使用中：`CachingHttpClient`

```
DefaultHttpClient realClient = new DefaultHttpClient();
realClient.addResponseInterceptor(MakeCacheable.INSTANCE, 0); // This goes first
CachingHttpClient httpClient = new CachingHttpClient(realClient, cacheConfig); 
```

一个条目是否被缓存取决于`ResponseCachingPolicy`不幸的是`final`在 中的哪个`CachingHttpClient`，但是查看它会显示所有需要去使不可缓存的条目可缓存的标头。

# php - 排序后将元素添加到数组

> ID：10795870
> 
> 赞同：0
> 
> 时间：2012-05-29T08:48:22.650
> 
> 标签：php, arrays, asort

[`asort()`](http://php.net/manual/en/function.asort.php)保留键后如何将元素添加到开始数组？

```
$array = array(
    564 => "plum",
    123 => "apple",
    543 => "lemon",
    321 => "cherry",
    );
    asort($array);
    $array[0]="all";
    print_r($array); 
```

我明白了，键 [0] 的索引不在开头

```
Array(
[123] => apple
[321] => cherry
[543] => lemon
[564] => plum
[0] => all ) 
```

需要

```
Array(
[0] => all    
[123] => apple
[321] => cherry
[543] => lemon
[564] => plum) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T08:50:06.623

对数组进行排序后，使用[`array_unshift()`](http://php.net/manual/en/function.array-unshift.php)将元素添加到数组的开头。

`array_unshift($arr, 'all')`

**更新：**

请注意，这`array_unshift()`将修改所有数字键。要保留密钥，请使用`+`运算符。

```
asort($array);
$array = array('all') + $array;
print_r($array);

/*
Array
(
    [0] => all
    [123] => apple
    [321] => cherry
    [543] => lemon
    [564] => plum
)
*/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T08:52:46.047

```
$array = array(
    564 => "plum",
    123 => "apple",
    543 => "lemon",
    321 => "cherry",
);
$array[0]="all";
uasort($array, function($a, $b) {
  if ($a === 'all') return -1;
  return strcmp($a, $b);
});
print_r($array); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T08:53:04.173

在向数组添加值`asort()` **后**调用。如果您可以保证需要添加的项目已经处于相反的顺序并且总是在数组中已经存在的项目之前，那么您可以使用`$array = array($newitem) + $array`.

```
$array = array(
    564 => "plum",
    123 => "apple",
    543 => "lemon",
    321 => "cherry",
);
$array[0]="all";
asort($array);
print_r($array); 
```

输出：

```
Array
(
    [0] => all
    [123] => apple
    [321] => cherry
    [543] => lemon
    [564] => plum
) 
```

这也适用于添加之前*没有*`apple`的项目。

# javascript - getScript 或 ajax

> ID：10795871
> 
> 赞同：1
> 
> 时间：2012-05-29T08:48:26.813
> 
> 标签：javascript, jquery

我想在另一个页面中获取 Javascript 数据并在现有的 javascript 中使用它。

让我用代码解释一下。

我想从其他页面获取这些数据

```
 <script type="text/javascript">
      var data = {
  "users": [
    {
      "latitude": "48.405163",
      "longitude": "2.684659"
    },
    {
      "latitude": "43.7347242529278",
      "longitude": "7.42198348045349"
    }
  ]
};
    </script> 
```

我尝试使用此代码获取它

```
 $(function MapData() {
        $.getScript({
            type: "GET",
            url: "default.cs.asp?Process=ViewCheckinMap",
            success: function(data) {
                $("#content").append(data);
            },
            error: function (data) {
                $("#content").append(data);
            }
        });
    }); 
```

为了在此代码中使用数据变量中的数据

```
 function initialize() {
    var center = new google.maps.LatLng(48.404840395764175, 2.6845264434814453);

    var map = new google.maps.Map(document.getElementById('map'), {
      zoom: 3,
      center: center,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    });

    var markers = [];
    for (var i = 0; i < data.users.length; i++) {
      var location = data.users[i];
      var latLng = new google.maps.LatLng(location.latitude,
          location.longitude);
      var marker = new google.maps.Marker({
        position: latLng
      });
      markers.push(marker);
    }
    var markerCluster = new MarkerClusterer(map, markers);
  }
  google.maps.event.addDomListener(window, 'load', initialize); 
```

但我得到**数据未定义**错误。

我还尝试使用从其他页面获取数据

`$.getScript('default.cs.asp?Process=ViewCheckinMap');`

但我得到了同样的错误。

我怎样才能解决这个问题？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T08:53:29.477

当您使用 加载 javascript 时`$.getScript()`，您不应`<script>`在正在加载的文件中包含标签。此外，您需要在加载完文件**后**`initialize()`运行您的函数：

 **```
$.getScript('default.cs.asp?Process=ViewCheckinMap', initialize) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T08:56:06.643

data is available only for the call back function of the getScript call. If you want to use it outside, store it in a global variable and use it.**

# codeigniter - 使用 Code Igniter 在新窗口中加载标题

> ID：10795879
> 
> 赞同：0
> 
> 时间：2012-05-29T08:48:57.567
> 
> 标签：codeigniter

我有一个模式窗口，当单击 CodeIgniter 应用程序中的锚点时会打开，我想将其更改为在新窗口中而不是在当前模式窗口中打开。所以我所做的只是删除锚上的类，它告诉应用程序知道它是一个模式窗口，然后将 target="_blank" 添加到同一个锚上，它在新窗口/选项卡中打开内容时工作。

现在问题来了：新窗口中没有样式表，尽管在“现在是模式现在它是自己的窗口”的第一行它具有以下代码：

```
<?php $this->load->view('manager/theheader'); ?> 
```

看起来好像缺少什么东西，也许是什么东西告诉它 $this 是什么？我如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T08:54:12.567

如果您缺少 CI 的实例，您可以使用它来获取它

```
 $ci =& get_instance();
 $ci->load->view('manager/thehearder'); 
```

# javascript - 如何获取刚刚创建的 facebook 评论

> ID：10795881
> 
> 赞同：-2
> 
> 时间：2012-05-29T08:49:02.100
> 
> 标签：javascript, jquery, facebook, facebook-graph-api, facebook-comments

我的页面上有一个 fb 评论插件。当有人使用它发表评论时，有没有办法取回评论文本？

感谢任何能提供帮助的人。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T09:34:50.423

查看`FB.Event.subscribe`Facebook Javascript SDK 中的方法。有一个事件被调用`comment.create`，使用此代码您可以找到新注释：

```
FB.Event.subscribe('comment.create', function(post) {
    FB.api({
        method: 'fql.query',
        query: 'SELECT text, post_fbid FROM comment WHERE object_id IN (SELECT comments_fbid FROM link_stat WHERE url = "' + post.href + '")'
    }, function(comments) {
        /* Iterate through the all comments for this url */
        for (var i = 0; i < comments.length; i++) {
            /* Find the created comment text by its ID */
            if (comments[i].post_fbid == post.commentID) alert(comments[i].text);
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T08:54:54.520

您可以像这样使用 Facebook 的 FQL：`SELECT text FROM comment WHERE object_id IN (SELECT comments_fbid FROM link_stat WHERE url = 'YOUR_COMMENT_URL')`

[在这里](https://developers.facebook.com/docs/reference/fql/)阅读更多。

# rhomobile - rhomobile中的谷歌身份验证

> ID：10795882
> 
> 赞同：1
> 
> 时间：2012-05-29T08:49:06.597
> 
> 标签：rhomobile, rhodes

我是 rhomobile 的新手，我正在尝试开发一个应用程序，我需要在其中验证 google 帐户 ID 以访问该应用程序。

我尝试使用 openid 进行身份验证。我首先写了一个获取请求以获取 XRDS。得到 XRDS 后，我写了一个 POST 请求来请求登录。

但是在发送帖子后，我得到了如下回复：

```
<HTML>
<HEAD>
<TITLE>Method Not Allowed</TITLE>
</HEAD>
<BODY BGCOLOR='#FFFFFF' TEXT='#000000'>
<H1>Method Not Allowed</H1>
<H2>Error 405</H2>
</BODY>
</HTML>

Params: {"rho_callback"=>"1", "status"=>"error", "error_code"=>"2",            "http_error"=>"405", "headers"=>{"allow"=>"GET, HEAD", 
```

"cache-control"=>"private, max-age=0", "content-type"=>"text/html; charset=UTF-8", "date"=>"Mon, 28 May 2012 21:54 :15 GMT", "expires"=>"Mon, 28 May 2012 21:54:15 GMT", "server"=>"GSE", "transfer-encoding"=>"chunked", "x-content-type -options"=>"nosniff", "x-frame-options"=>"SAMEORIGIN", "x-xss-protection"=>"1; mode=block"}, "__rho_object"=>{"body"= >“0”}，“发布”=>“完成”}

任何人都可以帮助我如何进行。还是我可以使用其他类型的身份验证？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T09:41:21.900

这里有一些为 Google API 编写 RhoSync 身份验证方法的示例代码。这可能会对您有所帮助。[http://docs.rhomobile.com/google-api-rhodes-rhosync-tutorial#writing-the-rhosync-authentication-method-for-google-api](http://docs.rhomobile.com/google-api-rhodes-rhosync-tutorial#writing-the-rhosync-authentication-method-for-google-api)

# rake - 通过 rake 运行的后台进程是否需要克隆类？

> ID：10795889
> 
> 赞同：0
> 
> 时间：2012-05-29T08:49:32.027
> 
> 标签：rake, actionmailer, resque, rake-task

我有一个可以直接使用的 resque 工人阶级`ActionMailer`和另一个可以`Mail`直接使用的工人阶级。这是一个简短的示例：

```
class NotificationWorker
  def self.perform(id)
    Mailer.delivery_method.settings = {
      # custom settings here
    }

    # Working with Mailer to deliver mails
  end
end 
```

假设可能有两个工人在运行`NotificationWorker`，我不确定它们是否会相互干扰。据我了解，直接在`Mail`课堂上工作会破坏功能，因为这将导致两个邮件程序使用相同的设置而不是分配给他们的设置。一个解决方案是创建这样一个类的克隆（它适用于 ActionMailer，但不适用于 Mail AFAIK）。

根据 Resque 文档：

> Resque 工作者是永远运行的 rake 任务。他们基本上是这样做的：

```
start
loop do
  if job = reserve
    job.process
  else
    sleep 5 # Polling frequency = 5 
  end
end
shutdown 
```

除了 Rails 应用程序的基本用法外，我不熟悉 rake。那么任何人都可以启发我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T10:19:03.763

不太确定你想在这里实现什么。我有一个 resque 系统，可以排队并发送自动电子邮件。我的设置是这样的：

1) 环境.rb

```
config.action_mailer.delivery_method = :smtp
config.action_mailer.smtp_settings = {...} 
```

2) notification_job.rb # 它的工作不是需要创建的工人。

```
class NotificationWorker
  def self.perform(id)
    # Working with Mailer to deliver mails
  end
end 
```

如果您确实需要直接使用邮件程序并且每个工作人员需要不同的设置，那么您可能需要创建一个 yaml 文件，该文件与您在启动时为工作人员提供的变量相关。

# qt - Qt 项目中的子目录

> ID：10795890
> 
> 赞同：4
> 
> 时间：2012-05-29T08:49:38.970
> 
> 标签：qt, qt-creator, qmake, subdirectory

我正在寻找一种使用 QMake 来组织我的项目结构的方法。我找到了`subdirs`模板，但我很难理解它。我试图做这样的事情。谁能告诉我我是否正确。

编辑：我已阅读以下线程[如何使用 QMake 的子目录模板？](https://stackoverflow.com/questions/1417776/how-to-use-qmakes-subdirs-template)但我仍然卡住

我的项目结构如下：

```
MultiFuncTester.pro

 - DMM
 (DMM.cpp, DMM.h and Multifunctester.pri)

 -Safety
 (Safety.cpp, Safety.h and Multifunctester.pri)

 -Solar

 (Solar.cpp, Solar.h and Multifunctester.pri)

Main

(Main.pro, Main.cpp and Multifunctester.pri) 
```

这里 Multifunctester.pri 文件包含所有子目录的通用内容。我正在粘贴 MultiFuncTester.pro 和 .pri 文件以及 main.pro 文件

我已将项目的 pro 文件制作为 MultiFuncTester.pro ：

```
# build all components recursive

TEMPLATE = subdirs

######## normal build process ########
#
# Make sure your Main.pro is in the last line to ensure correct linking!
#
 SUBDIRS  = ../../MultiFuncTester/Components/Solar/Build/Solar.pro \
       ../../MultiFuncTester/Components/DMM/Build/DMM.pro \
        ../../MultiFuncTester/Components/Safety/Build/Safety.pro \
           ../../MultiFuncTester/Components/Setup/Build/Setup.pro \
           ../../MultiFuncTester/Components/Start/Build/Start.pro \
          ../../MultiFuncTester/Components/Main/Build/Main.pro \

 CONFIG += ordered 
```

MultiFunctester.pri 文件：

```
######################
# common stuff for all components
######################

TEMPLATE = lib

CONFIG += static \
      warn_on \
      qt \
      thread \
      rtti

   QT += core \
   gui

   INCLUDEPATH +=/..\
          ../../MultiFuncTester/Components \

   DEPENDPATH +=/..\
         ../../MultiFuncTester/Components \

   CONFIG += debug_and_release
   CONFIG += build_all

   QMAKE_CXXFLAGS += -Wall

   CONFIG(debug, debug|release) {
   CONFIG_SUFFIX = dbg
  } else {
  CONFIG_SUFFIX = rel
  DEFINES += QT_NO_DEBUG \
           QT_NO_DEBUG_OUTPUT \
                       DBT_TRACE_DISCARD \
           NDEBUG
 CONFIG(gcov) {
    QMAKE_CXXFLAGS_RELEASE += -fprofile-arcs -ftest-coverage
    QMAKE_LFLAGS_RELEASE += -fprofile-arcs
    QMAKE_CXXFLAGS_RELEASE -= -O2
    QMAKE_CXXFLAGS_RELEASE += -O0
}
}

CONFIG(crosstgt) {
 ### To be able to build Target run qmake as follows:
#qmake CONFIG+=crosstgt
CONFIG_SUFFIX = $${CONFIG_SUFFIX}_tgt
DEFINES += TARGET_BUILD
}

OBJECTS_DIR = obj_$${CONFIG_SUFFIX}
MOC_DIR = moc_$${CONFIG_SUFFIX}
DESTDIR = lib_$${CONFIG_SUFFIX} 
```

Main.pro 文件：

```
################# include pri file #################
!include("Main.pri") {
error("Main.pri not found")
}
 ####################################################

 ################# override some pri settings #################
TEMPLATE = app
TARGET = MultiFuncTester
CONFIG -= static
QT += core \
  gui
##############################################################

################# list used MultiFuncTester libraries #################
MultiFuncTester_COMPONENTS_DIR =../../MultiFuncTester/Components

################################################################

################# list MultiFunTester libraries #################
MultiFunTester_COMPONENTS_DIR =../../MultiFuncTester/Components
MultiFunTester_COMPONENTS = DMM \
                    SOLAR\
                    Safety\
                    Setup

   ################# own sources #################
   INCLUDEPATH += ../../MultiFuncTester/Components \

   SOURCES +=../Source/Main.cpp

   ################# set destination path
   DESTDIR = bin_$$CONFIG_SUFFIX

   ################# edit include path
    INCLUDEPATH += $$MultiFunctester_COMPONENTS_DIR \

   ################# start group
  LIBS += -Wl,--start-group \

   ################# include MultiFunctester libraries and set dependencies
    for(TheComponent, MultiFunctester_COMPONENTS) {
    THELIBPATH      = $$MultiFunctester_DIR/$${TheComponent}/Build/lib_$$CONFIG_SUFFIX
    PRE_TARGETDEPS  += $$THELIBPATH/lib$${TheComponent}.a
    LIBS            += $$THELIBPATH/lib$${TheComponent}.a
    }

   ################# end group
    LIBS += -Wl,--end-group 
```

每个子目录都有一个 .pro 文件，其中定义了头文件和源文件，还有通用的 multifunctester.pri 文件

请让我知道放置一个通用静态库（MultiFunctester.pri 文件）是一种正确的方法，它应该在代码中做什么......如果不是，请帮助我纠正我的错误。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T09:29:31.887

有一些错误：

*   `TEMPLATE = lib`在`MultiFunctester.pri`. .pri 文件就像头文件，这将被添加到每个包含它的 pro 文件中。这可能会造成混淆，因此请避免在`.pri`
*   `Multifunctester.pri`如果我理解你的第一点，你在每个目录中都有副本。这也很令人困惑，您应该只有一个（或不同的`pri`文件）。
*   覆盖以前的设置并不是一个好主意。当您必须调试以查看每个`pro`文件中使用的配置时，您会感到痛苦。而是在一个地方声明所有通用设置，并在变量设置应用时声明它们。
*   我没有看到`Multifunctester.pri`任何地方包含...

`subdirs`当您希望单独构建每个子目录（它们可以相互依赖）时，您可以使用该模板。例如，当您有一个包含许多可执行文件的框架时，它很有用。查看[qwt源目录](http://qwt.svn.sourceforge.net/viewvc/qwt/trunk/qwt/)

在这种情况下，您使用

```
TEMPLATE = subdirs
CONFIG  += ordered

### They MUST be subdirectories, no ../, and no .pro
SUBDIRS +=  dir1\
            dir2\
            ...
            dirn 
```

除了最后一个级别（您拥有的位置`TEMPLATE = lib or app`）之外的每个级别。

现在，如果您有目录结构但想要一起构建，您可以 `pri`为包含源文件的每个子目录创建一个文件。例如 ：

在您拥有的主`src.pro`文件中

```
 include(MultiFunctester.pri) ## for the configurations
 include($PATHTOSOLAR/Solar.pri)
 include($PATHTODMM/dmm.pri)
 include($PATHTOSAFETY/safety.pri)
 include($PATHTOSETUP/setup.pri)
 include($PATHTOSTART/start.pri)
 include($PATHTOMAIN/main.pri) 
```

where`$PATHTO...`是目录的*相对*路径`src.pro`。

现在在每个子目录中都包含源文件。

***onesubdir.pri：***

```
 headers += /PATHTOTHISSUBDIR/file1.h ## again same relative path as above
       ....
 source +=.... 
```

# php - Restler：使用 post 参数中的安全密钥发出获取请求

> ID：10795900
> 
> 赞同：0
> 
> 时间：2012-05-29T08:50:32.313
> 
> 标签：php, post, get, restler

我想用 GET 协议调用我的 api 的 rest 函数，但我没有成功将 restler 的安全密钥作为 post 参数。

例子：

/index.php/myrestapi/method.json?name=test post field : Array('key'=>'mykey')

```
$session = curl_init('<mydomainurl>/index.php/myrestapi/method.json?name=test');

// Tell curl that this is the body of the POST
curl_setopt ($session, CURLOPT_POSTFIELDS, array('key'=>'mykey');

// Tell curl not to return headers, but do return the response
curl_setopt($session, CURLOPT_HEADER, false);
curl_setopt($session, CURLOPT_RETURNTRANSFER, true);
$result = curl_exec($session); 
```

Myrestapi.php 函数：

```
protected function getMethod($name){
    return $name;
} 
```

怎么了？！

在此先感谢您的帮助！

凯文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T13:53:05.643

安全密钥也应该是 get 参数的一部分

```
<mydomainurl>/index.php/myrestapi/method.json?name=test&key=mykey 
```

然后需要使用 iAuthenticate 来处理。

有关更多详细信息，请参见restler 的受保护API。

# mongodb - Calling mongoimport from a script

> ID：10795901
> 
> 赞同：0
> 
> 时间：2012-05-29T08:50:33.873
> 
> 标签：mongodb

I am trying to run a script from windows powershell:

```
 .\mongo.exe  localhost:27017/test --quiet test.js 
```

that calls mongoimport:

```
var c_env = 'dev';

 if (c_env === "dev") 
 { 
 ./mongoimport.exe -d noeldb -c order_notifications --file "D:\Utilities\mongodb\bin\mycollection.json";
} 
```

I get the following error:

```
Tue May 29 09:47:00 SyntaxError: syntax error D:\Noel\Temp\test.js:5
failed to load: D:\Noel\Temp\test.js 
```

Is it possible to do this?

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-29T10:39:59.303

When you run a JS script file the commands inside of it will be executed from the mongo shell.

You are doing the equivalent of:

```
C:\> mongo.exe
MongoDB shell
connecting to test
> ./mongoimport.exe ... 
```

This will not work because mongo shell is expecting mongo syntax (Javascript) not Windows/powershell commands.

If you want to invoke mongoimport.exe from a script the simplest way would be to do it from a DOS/powershell script.

# android - jQuery Mobile can upload file?

> ID：10795903
> 
> 赞同：2
> 
> 时间：2012-05-29T08:50:35.053
> 
> 标签：android, jquery-mobile, upload

I'm finding a jQuery Mobile plugin to upload image from my android tablet onto server, but so hopelessly! I've found [the same question](https://stackoverflow.com/questions/6947785/jquery-mobile-file-upload) but `Flash uploader` on smartphone (or table) seems that a bad solution.

May jQuery Mobile support upload file from browser?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T09:47:06.320

jQuery Mobile doesn't do anything to disable file uploads. It just doesn't style them due to browser security restrictions and you can't upload files with the AJAX navigation system. I use file uploads with jQuery Mobile in my application with no problem at all.

If you want to use file uploads with jQuery Mobile you have to do two things:

1) Turn off Ajax navigation using data-ajax="false" on your form definition because you can't upload files using Ajax.

2) Specify the appropriate encoding type of enctype="multipart/form-data" on your form.

# android - Android Using Services，新手的好奇心

> ID：10795907
> 
> 赞同：1
> 
> 时间：2012-05-29T08:51:10.747
> 
> 标签：android, service

我想了解一些关于服务的基本实用的东西，这些东西在 Android 开发者参考页面中没有明确提到。

1.  如何从尚未启动的另一个应用程序调用服务？

2.  如何查询其他应用程序提供了哪些服务？

3.  是否允许服务使用 UI 方法？（文档说他们专门没有用户界面，但他们的示例中有一个 Toast）

4.  服务是否可重入？（如果两个应用程序调用相同的服务，它们是否会同时被“服务”而不会弄乱任何局部变量）

5.  服务是插件的制作方式吗？

6.  我可以使用服务来扩展我已经安装的应用程序的功能吗？（即我可以“安装”一个服务吗？

7.  服务能否启动正常活动？他们可以让他们的客户完成吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T09:21:53.123

> 如何从尚未启动的另一个应用程序调用服务？

像活动这样的服务是通过使用`Intent`系统来启动的。您可以使用该`startService(intent);`方法启动服务。只要将服务正确配置为从其自己的沙箱外部回答意图，这就会跨越应用程序边界。

> 如何查询其他应用程序提供了哪些服务？

文档。**我无法想象在没有**文档的情况下您想要询问应用程序以获取其服务的情况，因为您不知道要传递什么才能使服务正确执行。

> 是否允许服务使用 UI 方法？（文档说他们专门没有用户界面，但他们的示例中有一个 Toast）

服务可以访问应用程序上下文（因此可以发布`Toast`或启动`Activities`它们自己的）。他们还可以看到在同一个沙箱中运行的应用程序，这意味着他们可以通过处理程序直接更改正在运行的 Activity 的 UI。然而，就其本质而言`Services`，即使有可能，它们也并非旨在与 UI 交互。

> 服务是否可重入？（如果两个应用程序调用相同的服务，它们是否会同时被“服务”而不会弄乱任何局部变量）

可以使用不同的标志启动服务（并且可以进行不同的编程），以允许它们以`Intents`异步方式接收服务或排队`Intents`以串行执行。你可以找到更多关于这个（和你的问题的其余部分在[这里](http://developer.android.com/reference/android/app/Service.html)）

> 服务是插件的制作方式吗？

插件？

> 我可以使用服务来扩展我已经安装的应用程序的功能吗？（即我可以“安装”一个服务吗？

您可以将服务安装为单独的应用程序，`startService()`如果它不使用命名的`Intent`. 但是，此服务将位于不同的沙箱中，并且无法访问正在运行的应用程序的变量/状态。

> 服务能否启动正常活动？他们可以让他们的客户完成吗？

是的，如果服务在同一个沙箱中运行，他们可以看到与它一起运行的应用程序。它可以使用`startActivity()`，因为它可以访问应用程序上下文，并且可以调用应用程序内部的静态方法（其中可能包含对 的静态访问`Activity`）。

# jsf-2 - 可以使用 Spring Security 标签 在jsf视图中？

> ID：10795913
> 
> 赞同：1
> 
> 时间：2012-05-29T08:51:54.193
> 
> 标签：jsf-2, spring-security

可以将 Spring Security (3.1.0) 与 JSF (2.0) 一起使用吗？……具体来说，标签`<sec:authentication>`？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T12:55:12.983

看看这个[文档](http://static.springsource.org/spring-webflow/docs/2.2.x/reference/html/ch13s09.html)。他们基本上说您需要定义一个自定义 taglib.xml 并将其注册到您的 web.xml

# android - 安卓超时错误

> ID：10795914
> 
> 赞同：7
> 
> 时间：2012-05-29T08:52:02.027
> 
> 标签：android

我已经构建了我的应用程序并在真实设备上对其进行了测试，但由于某种原因它超时了。我不确定为什么。

这是错误日志：

```
[2012-05-29 09:49:42 - androidGUI] Android Launch!
[2012-05-29 09:49:42 - androidGUI] adb is running normally.
[2012-05-29 09:49:42 - androidGUI] Performing alex.android.development.AndroidGUIActivity activity launch
[2012-05-29 09:49:42 - androidGUI] Automatic Target Mode: using device '3834522F2C1E00EC'
[2012-05-29 09:49:42 - androidGUI] Uploading androidGUI.apk onto device '3834522F2C1E00EC'
[2012-05-29 09:49:48 - androidGUI] Failed to install androidGUI.apk on device '3834522F2C1E00EC': timeout
[2012-05-29 09:49:48 - androidGUI] Launch canceled! 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-29T09:04:22.610

尝试更改**DDMS adb 连接超时**：

> 在 Eclipse -> Windows -> 首选项 -> Android -> DDMS

随心所欲地将**ADB 连接超时（毫秒）**更改得更大。

如果也是这个问题，你可以试试：

```
adb kill-server
adb devices 
```

然后，刷新设备。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T09:01:53.440

这是因为模拟器正在与 Eclipse 的 DDMS 断开连接......

所以要重新连接它运行命令

> 亚行设备

这将重新启动 adb ...

希望它有效

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-29T09:26:52.447

尝试更改 ADB 连接超时。我认为它默认为 5000 毫秒并将我的更改为 10000 毫秒，我能够摆脱这个问题。如果您在 Eclipse 中，您可以通过**Window -> Preferences 执行此操作，然后它位于 Android 下的 DDMS 中。**

希望这会有所帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T09:02:35.003

APK 的目录路径中是否有任何空格。我见过几个人因此而遇到这种麻烦。（通常的错误是将 eclipse`Program Files`和 eclipse 中的工作区。）尝试将您的 apk 文件从工作区复制到 C: 并使用`adb push.`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-26T15:56:44.977

对我来说，解决方案是取消选中设备开发选项中的“等待调试器附加”。

# haskell - 定义一个 Torus 类

> ID：10795920
> 
> 赞同：2
> 
> 时间：2012-05-29T08:52:50.170
> 
> 标签：haskell

我想定义一个`Torus`表示在边界处环绕的二维数组的类。例如，使用超出相应维度大小的索引访问数组应返回 position 处的元素`i mod arraysize`。因此，我的类应该只需要这样定义一个`get`方法：

```
class Torus a where
    get :: a -> Int -> Int -> b 
```

这个定义是不精确的。`a`应该是一个二维数组，并且`b`应该是数组中包含的类型。我该如何表达？

谢谢，

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-29T09:06:19.163

我想你只是在寻找类中的类型：

```
class Torus t where
    get :: t a -> Int -> Int -> a 
```

或者您是否在寻找合适的实例？

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-29T09:30:12.870

如果您想要比简单`t :: * -> *`类型更复杂的东西，您还可以使用函数依赖项或类型系列：

```
{-# LANGUAGE MultiParamTypeClasses, FunctionalDependencies #-}

class Torus t v | t -> v where
    get :: t -> Int -> Int -> v

instance Torus (Vector a) a where
    get = ... 
```

或者

```
{-# LANGUAGE TypeFamilies #-}

class Torus t where
    type Element t
    get :: t -> Int -> Int -> Element t

instance Torus (Vector a) where
    type Element (Vector a) = a
    get = ... 
```

不过，这需要一些 GHC 扩展。

# c# - 线程保留在内存中

> ID：10795922
> 
> 赞同：2
> 
> 时间：2012-05-29T08:52:59.723
> 
> 标签：c#, wpf

```
void Method1(object sender, DoWorkEventArgs e)
{
    var list1 = (List<some objects>)e.Argument;
    var list2 = new List<WaitHandle>();

    foreach (var thing in list1)
    {
        var ws = new ManualResetEvent(false);
        list2.Add(ws);
        dispatcher.BeginInvoke(DispatcherPriority.Background,
            new RunDelegate(Method2), thing, ws);
    }

    WaitHandle.WaitAll(list2.ToArray());

    ConvertList1ToPDF(list1);
}

// ------------------------------------------------------------------

void Method2(Thing thing, ManualResetEvent handle)
{
    var class = thing;
    Class.RenderImages();
    PDFCount++; 
    UpdateStatusMessage("Do something " + PDFCount + " of " +
        NumberofPfdToCreate.Count() + " compounds");

    handle.Set();
} 
```

我有多个线程不释放内存的问题。我正在从数据对象创建 PDF 图表。

安排是我循环遍历数据对象。对于每个数据对象，我创建一个`ManualResetEvent`并将其添加到`list2`. 然后我用 启动一个调度程序`BeginInvoke`，并将`ManualResetEvent`对象作为参数传递。

然后我有一个`WaitHandle.WaitAll(...)`for all `WaitHandle`s。

问题是内存没有被释放。它只会累积，直到最终我得到一个“内存不足”异常。

我不一定要寻找解决方案，只是看看是否有人知道问题可能是什么。

在 WPF 3.5 上运行。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T10:13:04.607

[ManualResetEvent](http://msdn.microsoft.com/en-us/library/system.threading.manualresetevent.aspx)实现 IDisposable，因此您需要在完成后处理它们。在这种情况下，当 Method1 完成时，将它们全部清除...将以下内容添加到方法的末尾

```
void Method1(object sender, DoWorkEventArgs e)
{
    ...

    foreach(ManualResetEvent mre in list2)
        mre.Dispose();   
} 
```

这应该允许正确释放 ManualResetEvent 正在使用的非托管资源。

您需要检查其他方法以确保其中的任何 IDisposable 项目也被释放。您的示例中可能的罪魁祸首是 ConvertList1ToPDF 和 RenderImages。

# c# - WebBrowser.url 在 winform 中有时无法正常工作

> ID：10795924
> 
> 赞同：2
> 
> 时间：2012-05-29T08:53:04.843
> 
> 标签：c#, .net, winforms, webbrowser-control

[`WebBrowser`](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.aspx)我在事件上设置对象的 url 值。有时，此值的设置不会反映在 webBrowser 中。

我使用的代码是

```
webBrowser.Url= new Uri("www.google.com") 
```

我也尝试过`webBrowser.Navigate()`但同样的行为。有什么想法为什么会发生以及如何克服这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-06-01T15:27:07.083

Although very old question, for people visiting this, please check `AllowNavigation` property set on the `WebBrowser` instance.

As per MSDN documentation -

> This property does not prevent you from loading an initial page by setting the Url, DocumentText or DocumentStream property, but will prevent all subsequent navigation.

You can find more details [here](https://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.allownavigation(v=vs.110).aspx).

# c# - 父项上的 SQL 查询包括 EF 上的子项

> ID：10795926
> 
> 赞同：1
> 
> 时间：2012-05-29T08:53:15.510
> 
> 标签：c#, linq, mvvm, silverlight-4.0, ria

我正在使用 C# 使用[RIA Services - MVVM 模式](http://blogs.msdn.com/b/kylemc/archive/2011/04/29/mvvm-pattern-for-ria-services.aspx)处理 Silverlight 。当我尝试从中获取记录时`Orders`，`OrdersDetails`我在下面收到此错误：

> “Notes”不是
> “Transient.collection[XXX.SilverLight.Web.Models.OrderDetails(Nullable=True,DefaultValue=)]”的成员。
> 要提取集合元素的属性，请使用子查询来迭代集合。接近简单标识符，第 6 行，第 58 列。

这是我的查询：

```
public IQueryable<Order> AdvancedSearchOrder(string condition)
{
    ObjectQuery<Order> myQuery = new ObjectQuery<Order>("Orders", DbContext.ObjectContext()).Include("OrderDetails");
    if (condition != "")
    {
        myQuery = myQuery.Where(condition);
    }
    return myQuery;
} 
```

在这种情况下，我有

```
condition = "( (it.CustomerName like 'test')  )  and  ( (it.OrderDetails.Notes like 'testnote') )"; 
```

当我将其设置为

```
condition = "( (it.CustomerName like 'test')  )"; 
```

然后，它工作得很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T01:23:32.330

您正在尝试将其`it.OrderDetails`用作一个集合，它可能没有给出它具有复数名称。我将推断您的数据模型每个`Order`都有一个或多个`OrderDetail`记录。对象*列表*没有属性。一个人会。我不确定 RIA 语法，但应该是这样的：`OrderDetail``Notes``OrderDetail`

```
condition = "( (it.CustomerName like 'test')  )  and  ( 
      (it.OrderDetails.Notes.Any(n => n.Contains('testnote') 
)"; 
```

# python - 在模块之间更改 python 全局变量

> ID：10795927
> 
> 赞同：0
> 
> 时间：2012-05-29T08:53:21.170
> 
> 标签：python, tkinter, global-variables, python-2.7, python-module

我正在尝试将更改从全局变量转移到 Python2.7 中的另一个模块。我以前在类似的情况下做过这个，但由于某种原因，它在这种情况下不起作用。第一个文件是运行程序的文件。它设置一个全局变量并根据所选选项对其进行更改。我在下面粘贴了一些代码。亚军模组：

```
import Tkinter
from main_mod import*

choice = "0"

def main():
    main_mod=functOne()

class GUI(Tkinter.Tk):
    def __init__(self, parent):
        Tkinter.Tk.__init__(self, parent)
        self.parent = parent
            self.initialize()

    def initialize(self):
        self.grid()
        self.update()
        btnOption1 = Tkinter.Button(self, text=u"Option 1", command=self.onButtonClick)
        btnOption1.grid(column=0, row=1)

    def onButtonClick(self):
        selection = "1"
        self.destroy()
        exec 'choice=%s' %selection in globals()
        main()

class menuSelection:
    def OPTIONCHOSEN(self):
        return choice

if __name == "__main__":
    app = GUI(None)
    app.mainloop 
```

我希望 runnerMod.py 中名为 selection 的全局变量能够延续到这个模块。主模块：

```
from runnerMod import menuSelection

def functOne():
    userInput = menuSelection().OPTIONCHOSEN()
    print userInput 
```

全局变量选择从 0 开始，但我想在 runnerMod.py 模块中将其更改为 1，并将其反映在 main_mod.py 模块中。由于我正在重写现有程序的接口，因此我的选择在其编码方式上有点受限。有人在这里有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T11:55:46.570

事实证明，我无法从 runnerMod.py 传递对全局变量的更改，因为它是启动程序的模块。我要做的是使用 runnerMod.py 启动程序，然后调用 main_mod.py 中的函数。这个函数调用了 runnerMod.py 中的一个类并加载了 GUI。只有通过回调然后修改全局变量，我才能传递更改。

# erlang - cql 限制

> ID：10795936
> 
> 赞同：3
> 
> 时间：2012-05-29T08:53:55.067
> 
> 标签：erlang, cassandra, cql

我可能想使用[erlacassa在](https://github.com/ostinelli/erlcassa)[Cassandra](http://cassandra.apache.org/)和[Eralng](http://www.erlang.org/)之间进行通信。它是一个 CQL 客户端。所以我想知道，与 Thrift 访问的 cassandra 相比，CQL（cassandra 查询语言）有哪些限制？

例如，我在互联网上发现：

> CQL 目前有一些限制，不支持 GROUP BY、ORDER BY 等操作

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T17:44:29.713

这部分取决于您使用的 Cassandra 版本。例如，CQL 直到 CQL 3.0 才支持复合列（在 Cassandra 1.1 中可用，但默认情况下未启用）。但在大多数情况下，所有主要功能都在 thrift API 和 CQL 中可用。

至于`group by`这不受 CQL 或 thrift API 的支持。`Order by`在 CQL 3.0 中，但它仅用于指定反向排序（这与 Thrift 的限制相同）。听起来您发现的文章是将 Cassandra 与传统的 SQL 数据库进行比较。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T06:16:20.807

除了语法差异之外，最大的不同是 CQL 伪装成 SQL，而 thrift API 没有这样的伪装。开发人员将看到 SQL 并做出根本不适用于 Cassandra 的关系假设。例如，这里有讨论提倡使用 order by。在 Cassandra 的世界中，最好对您希望访问数据的每一种方式的具体化视图进行非规范化，而不是通过更改查询。

不要误会我的意思。我认为用 DSL 替换 thrift 接口很有价值，例如[http://glennengstrand.info/nosql/cassandra/cql](http://glennengstrand.info/nosql/cassandra/cql)，但我相信熟悉 SQL 作为访问关系数据的一种方式将引导开发人员使用 Cassandra以根本无法扩展的方式。

# android - 具有白色文本颜色的自定义微调器

> ID：10795937
> 
> 赞同：3
> 
> 时间：2012-05-29T08:53:55.707
> 
> 标签：android, android-widget, android-spinner

我希望我的操作栏微调器以白色显示它的文本（如在谷歌地图应用程序中），但我很难到达那里..

我正在尝试这样的事情：

```
 <style name="Mepo.Spinner" parent="@android:style/Widget.Spinner">
   <item name="android:spinnerItemStyle">@style/StandardSpinnerItem</item>  
   <item name="spinnerItemStyle">@style/StandardSpinnerItem</item>
   </style>

  <style name="StandardSpinnerItem" parent="@android:style/Widget.TextView.SpinnerItem">
  <item name="android:textAppearance">@android:color/white</item>
  <item name="android:textColor">@android:color/white</item>
  </style> 
```

但这没有任何效果。我知道这可能是他被问到的，但我找不到正确的解决方案。有任何想法吗？ps 如果这很重要，我实际上正在使用夏洛克动作栏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T09:47:27.990

最后这就是我所做的，也许这会对某人有所帮助：

```
<style name="Theme.Styled" parent="Theme.Sherlock.Light.DarkActionBar">
        <item name="actionBarStyle">@style/Widget.Styled.ActionBar</item>
        <item name="android:actionBarStyle">@style/Widget.Styled.ActionBar</item>
        <item name="actionDropDownStyle">@style/xxx.ActionBar.DropDown.Style</item>
        <item name="android:actionDropDownStyle">@style/xxx.ActionBar.DropDown.Style</item>
    </style>
   <style name="Widget.Styled.ActionBar" parent="Widget.Sherlock.Light.ActionBar.Solid.Inverse">
        <item name="background">#0B2F39</item>
        <item name="android:background">#0B2F39</item>
        <item name="backgroundSplit">#0B2F39</item>
        <item name="android:backgroundSplit">#0B2F39</item>
    </style>

    <style name="xxx.ActionBar.DropDown.Style" parent="Widget.Sherlock.Light.Spinner.DropDown.ActionBar">
        <item name="android:background">@drawable/abs__spinner_ab_holo_dark</item>
    </style> 
```

如果您有任何评论或更正，我很想听听

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-21T14:23:44.387

如果您已经使用了自定义主题（您扩展了基本主题并对其进行了自定义）并且您只想为一项活动自定义微调器，您需要这样做：

```
<style name="Theme.MyTheme" parent="Theme.Sherlock">
... your other items
</style>

<style name="Theme.MyTheme.Spinner" parent="Theme.MyTheme">
    <item name="android:spinnerItemStyle">@style/SpinnerItem</item>
    <item name="android:spinnerDropDownItemStyle">@style/SpinnerItem.DropDownItem</item>
</style>

<style name="Spinner" parent="@android:style/Widget.Spinner">
    <item name="android:spinnerItemStyle">@style/SpinnerItem</item>
    <item name="android:spinnerDropDownItemStyle">@style/SpinnerItem.DropDownItem</item>
</style>    
<style name="SpinnerItem" parent="@android:style/Widget.TextView.SpinnerItem">
    <item name="android:textColor">@android:color/white</item>
</style>
<style name="SpinnerItem.DropDownItem" parent="@android:style/Widget.Holo.Light.DropDownItem.Spinner">
    <item name="android:textColor">@android:color/white</item>
</style> 
```

要在活动中使用这种风格，请使用：

```
<activity
    android:name=".YourActivity"
    android:theme="@style/Theme.MyTheme.Spinner"  >
</activity> 
```

如果您想为所有活动（您的应用程序）自定义微调器，请将项目`Theme.MyTheme.Spinner`从`Theme.MyTheme`：

```
<style name="Theme.MyTheme" parent="Theme.Sherlock">
   ... your other items
   <item name="android:spinnerItemStyle">@style/SpinnerItem</item>
   <item name="android:spinnerDropDownItemStyle">@style/SpinnerItem.DropDownItem</item>
</style> 
```

# iphone - 自定义用户位置注释未跟随位置更新

> ID：10795940
> 
> 赞同：1
> 
> 时间：2012-05-29T08:54:17.630
> 
> 标签：iphone, objective-c, location

我`MKMapViewDelegate`在下面实现了方法并显示了自定义的用户位置注释。但是，当我拿着 iPhone 走动时，注释并没有移动。当我删除此委托方法时，默认蓝点用户位置注释跟随我。

请告诉我如何移动自定义的用户位置注释：

```
-(MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation
{
    static NSString* AnnotationIdentifier = @"Annotation";
    MKPinAnnotationView *pinView = (MKPinAnnotationView *)[mapView dequeueReusableAnnotationViewWithIdentifier:AnnotationIdentifier];
    if (!pinView)
    {
        pinView = [[[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:AnnotationIdentifier] autorelease];               
        pinView.animatesDrop = NO;
        pinView.canShowCallout = YES;
    }
    else
    {
        pinView.annotation = annotation;
    }

    pinView.image = [UIImage imageNamed:@"star.png"];

    return pinView;
} 
```

# javascript - 如何获取多个选中的复选框

> ID：10795947
> 
> 赞同：2
> 
> 时间：2012-05-29T08:54:52.727
> 
> 标签：javascript, jquery, html, checkbox

我想获取多个选中复选框的 id

**HTML**：

```
<input type="checkbox" class="a" id="1">1
<input type="checkbox" class="a" id="2">2
<input type="checkbox" class="a" id="3">3
<input type="checkbox" class="a" id="4">4
<input type="checkbox" class="a" id="5">5

<input type="button" value="Button" id="button"> 
```

**JS：**

```
$("#button").live('click',function(){
    var a = document.getElementsByClassName("a");
    alert(a);
    alert(a.checked);
}); 
```

[JS小提琴](http://jsfiddle.net/uHHLX/1/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T08:57:02.477

**要获得`id`检查的 s：**

```
$('.a').filter(function(){
    return this.checked // Takes only checked checkboxes.
}).map(function(){
    return this.id // Makes an array which its elements are the ids.
}).get(); // Returns the array. 
```

[**现场演示**](http://jsfiddle.net/jGFUN/2/)

**请注意，根据 w3c 规范，以数字开头的 id 无效！**

> ID 和 NAME 标记必须以字母 ([A-Za-z]) 开头，后跟任意数量的字母、数字 ([0-9])、连字符 ("-")、下划线 ("_") , 冒号 (":") 和句点 (".")。

**检查`checkboxes:`**

`live`除非您的 jQuery 版本 < 1.4.4，否则不要使用

```
$("#containerId").on('click','#button', function(){
  $('.a').prop('checked', true);
}); 
```

[**现场演示**](http://jsfiddle.net/jGFUN/1)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T08:55:36.053

```
$("body").on("click", "#button", function(){
    var ids = $(':checkbox.a')
        .filter(':checked')
        .map(function() {
            return this.id;
        });
    console.log(ids); // an array of ids
}); 
```

**[演示](http://jsfiddle.net/RGbrm/1/)**

**或者**

```
$("body").on("click", "#button", function(){
    var ids = $(':checkbox:checked.a')
        .map(function() {
            return this.id;
        }).toArray();
    console.log(ids); // an array of ids
}); 
```

**[演示](http://jsfiddle.net/NXmCj/3/)**

**或者**

```
$("body").on("click", "#button", function(){
    var ids = $(':checkbox.a')
        .map(function() {
            if( this.checked )
                return this.id;
        }).toArray();
    console.log(ids); // an array of ids
}); 
```

**[演示](http://jsfiddle.net/NXmCj/2/)**

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-29T09:00:47.563

我不确定为什么每个人都发布代码来检查这些框？

> 我想获取多个**选中复选框****的 id**

 **为此，请使用以下代码：

```
$("#button").click(function() {
    var selected = $(".a:checked").map(function() {
        return this.id;
    }).get();
    alert(selected.join(","));
}); 
```

[**示例小提琴**](http://jsfiddle.net/RoryMcCrossan/uHHLX/3/)

你也不应该使用`live()`. `delegate()`或者是更好的解决方案，但只有在页面加载后将元素添加到页面`on()`时才需要它们。`#button`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-29T09:08:14.203

试试这个代码：

```
$("#button").live('click',function(){
    $("input:checkbox").each(function()
    {
        if($(this).is(':checked')){
            alert( $(this).attr('id') )
        }
    });
}); 
```

希望对你有帮助**

# c# - 调用线程无法访问此对象，因为不同的线程拥有它。WPF

> ID：10795948
> 
> 赞同：22
> 
> 时间：2012-05-29T08:54:52.697
> 
> 标签：c#, .net, wpf, multithreading, dispatcher

每当我刷新标签时，我都会收到此错误： ***调用线程无法访问此对象，因为不同的线程拥有它。***我试图调用但它失败了。我正在使用 WPF 表单。

```
delegate void lostfocs(string st);
   private void imgPayment_MouseLeftButtonDown(object sender, MouseButtonEventArgs e)
    {

        Thread t = new Thread(modi);
        t.Start();
    }
 void modi()
    {
        try
        {
            label1.Content = "df";
        }
        catch
        {
            lostfocs ld = new lostfocs(up);
          //  ld.Invoke("df");
            object obj=new object();
            ld.Invoke("sdaf");
        }
    }
void up(string st)
    {
        label1.Content = st;
    } 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-05-29T08:59:43.833

使用[Dispatcher.Invoke](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcher.invoke.aspx)方法。

> 在 Dispatcher 关联的线程上同步执行指定的委托。

还

> 在 WPF 中，只有创建 DispatcherObject 的线程才能访问该对象。例如，**从主 UI 线程分离出来的后台线程无法更新在 UI 线程上创建的 Button 的内容**。为了让后台线程访问 Button 的 Content 属性，后台线程必须将工作委托给与 UI 线程关联的 Dispatcher。这是通过使用 Invoke 或 BeginInvoke 来完成的。Invoke 是同步的，而 BeginInvoke 是异步的。操作被添加到指定 DispatcherPriority 的 Dispatcher 的事件队列中。

您收到错误是因为您的标签是在 UI 线程上创建的，并且您正试图通过另一个线程修改其内容。这是您需要 Dispatcher.Invoke 的地方。

查看这篇文章 [WPF Threads Build More Responsive Apps With The Dispatcher](http://msdn.microsoft.com/en-us/magazine/cc163328.aspx)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-05-29T09:02:24.627

您可以为此使用 Dispatcher。你的代码变成...

```
private void imgPayment_MouseLeftButtonDown(object sender, MouseButtonEventArgs e)
{
    Dispatcher.BeginInvoke(DispatcherPriority.Input, new ThreadStart(() =>
    {
        try
        {
            label1.Content = "df";
        }
        catch
        {
            lostfocs ld = new lostfocs(up);
          //  ld.Invoke("df");
            object obj=new object();
            ld.Invoke("sdaf");
        }
    }
)); 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-05-29T09:06:05.140

使用[Dispatcher.Invoke](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcher.invoke.aspx)

例子

```
 void modi()
    {
        if(!Dispatcher.CheckAccess())
        {
            Dispatcher.Invoke(
                    ()=>label1.Content = "df",DispatcherPriority.Normal);
        }
        else
        {
            label1.Content = "df";
        }
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-19T12:51:44.577

我启动了一个非 UI 线程，在这个线程中我也盯着一个 UI 线程。所以我的要求就像在非 UI 线程中运行 UI 线程。在处理这种情况时，我遇到了以下异常。 **“例外：调用线程无法访问此对象，因为不同的线程拥有它。”**

在这种情况下，我使用了 UI 元素的 Dispatcher.Invoke 方法，如下所示，它运行良好。

```
if (m_contextWindow == null)
{   
    System.Threading.Thread newWindowThread = new System.Threading.Thread(new ThreadStart( () =>
    {
        // Create and show the Window
        m_contextWindow = new ContextWindow();
        m_contextWindow.DataContext = this;                            
        m_contextWindow.Show();
        // Start the Dispatcher Processing
        System.Windows.Threading.Dispatcher.Run();
    }));

    // Set the apartment state
    newWindowThread.SetApartmentState(ApartmentState.STA);
    // Make the thread a background thread
    newWindowThread.IsBackground = true;
    // Start the thread
    newWindowThread.Start();
}
else
{                     
    this.m_contextWindow.Dispatcher.Invoke(new ThreadStart(() => 
    {
        m_contextWindow.DataContext = this;
        if (m_contextWindow.Visibility == System.Windows.Visibility.Collapsed
         || m_contextWindow.Visibility == System.Windows.Visibility.Hidden)
            m_contextWindow.Visibility = System.Windows.Visibility.Visible;
    }));                            
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-29T09:51:26.060

```
private void imgPayment_MouseLeftButtonDown(object sender, MouseButtonEventArgs e)
        {
            Dispatcher.BeginInvoke(DispatcherPriority.Input, new ThreadStart(() =>
            {
                try
                {
                    label1.Content = "df";
                }
                catch
                {
                    lostfocs ld = new lostfocs(up);
                    object obj = new object();
                    ld.Invoke("sdaf");
                }
            }));
        } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-07T03:11:13.890

一些使用 BeginInvoke 的建议，但没有提到 EndInvoke。好的做法是“每个 BeginInvoke 都有一个匹配的 EndInvoke”，当然需要对竞争条件采取一些保护措施（想一想：多个 BeginInvoke 代码会发生什么，但还没有完成处理？）

这很容易忘记，而且我在 MSDN 示例和已出版的有关 WinForms 的书籍中都看到了这个错误（是的，这*是一个错误）*

# iphone - 我们如何对序列 UIButton 执行操作？

> ID：10795952
> 
> 赞同：8
> 
> 时间：2012-05-29T08:54:56.413
> 
> 标签：iphone, ios, algorithm, uibutton, uilabel

![在此处输入图像描述](../Images/8977308434eb5d4e9cca2b16c1d178a9.png)

正如我的屏幕截图显示我正在开发单词匹配游戏。在这个游戏中，我将我的单词分配给不同位置的特定序列中的不同 UIButtons（我的红色箭头显示这个序列）和其余 UIButtons 我分配一个随机字符（ AZ）。当我点击任何 UIButtons 时，它的标题将分配给当前部分 Fornt 中的 UILabel：我将这个 UILabel 文本放在计时器前的 UILabel 文本下方。当它与我的任何 UILabel 匹配时，它会被删除。我已经实施了所有这些过程。

但我的问题是黑线显示的问题。如果玩家找到第一个单词是“DOG”。他单击序列中的两个 UIButtons，但不按序列中的第三个。（如黑线所示）。所以在这里我希望当玩家按下任何不在序列中的 UIButtons 时，删除前面的文本（即“ DO") 的 UILabel ，现在 UILabel 的 Text 只是 "G" 。这是我获取 UIButtons 标题并将其分配给 UILabel 的代码。

```
- (void)aMethod:(id)sender 
       {
    UIButton *button = (UIButton *)sender;
    NSString    *get = (NSString *)[[button titleLabel] text];
    NSString *origText = mainlabel.text;
    mainlabel.text = [origText stringByAppendingString:get];

 if ([mainlabel.text length ]== 3) 
    {
if([mainlabel.text isEqualToString: a]){
    lbl.text=@"Right";
    [btn1 removeFromSuperview];
    score=score+10;
    lblscore.text=[NSString stringWithFormat:@"%d",score];
    words=words-1;
    lblwords.text=[NSString stringWithFormat:@"%d",words];
    mainlabel.text=@"";
    a=@"tbbb";
}

    else    if([mainlabel.text isEqualToString: c]){
    lbl.text=@"Right";
    [btn2 removeFromSuperview];
    score=score+10;
    lblscore.text=[NSString stringWithFormat:@"%d",score];
    words=words-1;
    lblwords.text=[NSString stringWithFormat:@"%d",words];
    mainlabel.text=@"";
c=@"yyyy";

}
 else   
     if([mainlabel.text isEqualToString: d]){
    lbl.text=@"Right";
    [btn3 removeFromSuperview];
    score=score+10;
    lblscore.text=[NSString stringWithFormat:@"%d",score];
    words=words-1;
    lblwords.text=[NSString stringWithFormat:@"%d",words];
    mainlabel.text=@"";
    d=@"yyyy";
}
else {
    lbl.text=@"Wrong";
   mainlabel.text=@"";
  }

 }} 
```

提前感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T22:39:10.767

有趣的问题：在这种特殊情况下，我同意 Luke 关于子类化 UIButton 的观点。这样，您可以在网格上为每个按钮提供一个 (X, Y)，以及一个 (Xnext, Ynext) 列表，用于所有可能的预期下一次按下位置（如果按钮本身可用于制作多个单词）。在外部，您会将当前命中的值与预期值（Xnext、Ynext）进行比较。如果两者不匹配，这就是您正在寻找的信号。

这是一个解决您所有情况的答案，向前和向后水平（如果您选择实施后件），向上和向下垂直（如果您选择向上实施），以及任何对角线或任何其他组合，您可以想出和！

这也解释了让我们说击中 D，然后是 O，然后尝试再次按下 D 而不是击中 G。它还负责击中不正确的 G。

创建一个新的 .m .h 文件对（一个新对象）并为其命名。

一些用于实现自定义 UIButton（h 文件）的示例代码：

```
@interface myConnectedUIButton : UIButton {

    BOOL             isAWordBeginCharacter;
    unsigned int     beginWordKey;

    unsigned int     myGridX;
    unsigned int     myGridY;

    NSMutableArray * myConnectedSet;

}

-(id)init;
-(void)initWithGridX:(unsigned int)X GridY:(unsigned int)Y BeginChar:(BOOL)yesNo BeginWordKey:(unsigned int)key;
-(void)setGridPosWithX:(unsigned int)X Y:(unsigned int)Y;
-(void)setGridX:(unsigned int)X;
-(void)setGridY:(unsigned int)Y;
-(unsigned int)getGridX;
-(unsigned int)getGridY;

-(void)setIsABeginChar:(BOOL)yesNo;
-(BOOL)getIsABeginChar;

-(void)addPosToConnectedSetGridX:(unsigned int)X GridY:(unsigned int)Y WordKey:(unsigned int)key; 
-(NSArray *)getMyConnectedSetArray;
-(void)clearConnectedSet;

@end 
```

在您的 .m 文件中

```
@implementation myConnectedUIButton

-(id)init{
    [super init];

    // Lets go ahead and initialize the NSMutableArray here also IFF it hasnt already been allocated
    if( nil == myConnectedSet ){
        myConnectedSet = [[NSMutableArray alloc] init];
    }

    // Lets also zero out the x, y position
    myGridX = 0;
    myGridY = 0;

    // Lets also state that this is NOT a begin char for the time being and 0 for the begin char key
    isAWordBeginCharacter = NO;
    beginWordKey = 0;

    return self;
}

-(void)initWithGridX:(unsigned int)X GridY:(unsigned int)Y BeginChar:(BOOL)yesNo BeginWordKey:(unsigned int)key{
    // Lets go ahead and initialize the NSMutableArray here also IFF it hasnt already been allocated
    if( nil == myConnectedSet ){
        myConnectedSet = [[NSMutableArray alloc] init];
    }

    myGridX = X;
    myGridY = Y;

    isAWordBeginCharacter = yesNo;
    beginWordKey = key;
}

-(void)setGridPosWithX:(unsigned int)X Y:(unsigned int)Y{
    myGridX = X;
    myGridY = Y;
}

-(void)setGridX:(unsigned int)X{
    myGridX = X;
}

-(void)setGridY:(unsigned int)Y{
    myGridY = Y;
}

-(unsigned int)getGridX{
    return myGridX;
}

-(unsigned int)getGridY{
    return myGridY;    
}

-(void)setIsABeginChar:(BOOL)yesNo{
    isAWordBeginCharacter = yesNo;
}

-(BOOL)getIsABeginChar{
    return isAWordBeginCharacter;
}

-(void)addPosToConnectedSetGridX:(unsigned int)X GridY:(unsigned int)Y WordKey:(unsigned int)key{
    [myConnectedSet addObject:[GridPointNext GridPointNextWithX:X GridPointY:Y  NextWordKey:key]];
}

-(NSArray *)getMyConnectedSetArray{
    return myConnectedSet;
}

-(void)clearConnectedSet{
    [myConnectedSet removeAllObjects];
}

-(void)dealloc{
    [myConnectedSet release];

    [super dealloc];
}

@end 
```

您现在还需要一个“GridPointNext”对象。

网格对象标题应如下所示：

```
@interface GridPointNext : NSObject {
    unsigned int GridPointX;
    unsigned int GridPointY;

    unsigned int nextWordKey;
}

+(GridPointNext *)GridPointNextWithX:(unsigned int)X GridPointY:(unsigned int)Y NextWordKey:(unsigned int)key;
-(id)initWithX:(unsigned int)X GridPointY:(unsigned int)Y NextWordKey:(unsigned int)key;

-(unsigned int)getGridX;
-(unsigned int)getGridY;
-(unsigned int)getNextWordKey;

@end 
```

对象的 m 文件应如下所示：

```
@implementation GridPointNext

+(GridPointNext *)GridPointNextWithX:(unsigned int)X GridPointY:(unsigned int)Y NextWordKey:(unsigned int)key{
    GridPointNext * aPoint = [[GridPointNext alloc] initWithX:X GridPointY:Y NextWordKey:key];

    [aPoint autorelease];

    return aPoint;
}

-(id)initWithX:(unsigned int)X GridPointY:(unsigned int)Y NextWordKey:(unsigned int)key{
    GridPointX  = X;
    GridPointY  = Y;

    nextWordKey = key;

    return self;
}

-(unsigned int)getGridX{
    return GridPointX;
}

-(unsigned int)getGridY{
    return GridPointY;
}

-(unsigned int)getNextWordKey{
    return nextWordKey;
}

@end 
```

您将不得不处理 dealloc 部分。这至少为您提供了一些工具来创建自定义按钮和围绕它的单词列表算法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T07:18:06.640

从左到右为每个按钮分配标签。所以你会有，

GButton.tag = 0; TButton.tag = 1; DButton.tag = 2; . . . VButton.tag = 9; . . . EButton.tag = 18; . . . CButton.tag = 26;

现在跟踪先前按下的按钮和当前按下的按钮。当您的按钮委托点击时调用以下函数：

将以下代码写入您的 .h 文件

```
#define SEQ_TYPE_ANY  0
#define SEQ_TYPE_RIGHT 1
#define SEQ_TYPE_LEFT 2
#define SEQ_TYPE_TOP 3
#define SEQ_TYPE_BOTTOM 4
#define SEQ_TYPE_RIGHT_DIAGONAL_DOWN 5
#define SEQ_TYPE_RIGHT_DIAGONAL_UP 6
#define SEQ_TYPE_LEFT_DIAGONAL_DOWN 7
#define SEQ_TYPE_LEFT_DIAGONAL_UP 8

#define NO_OF_BUTTONS_IN_ROW 9

//Add below variables into your class
int curentSequence;
UILabel *resultLabel;
UIButton *previousButton;

//Declare property for previousButton
@property(nonatomic, retain) UIButton *previousButton;

//Write below code to .m file
@synthesize previousButton;

-(BOOL) isAdjacent:(UIButton *)currentButton
{
     if(previousButton == nil)
     {
          resultLabel.text = currentButton.titleLabel.text;
          curentSequence = SEQ_TYPE_ANY;
          return TRUE;
     }

     if((curentSequence == SEQ_TYPE_ANY || curentSequence == SEQ_TYPE_RIGHT) &&
          (previousButton.tag + 1 == currentButton.tag))
     {
          resultLabel.text = [resultLabel.text stringByAppendingString:currentButton.titleLabel.text];
          curentSequence = SEQ_TYPE_ANY;
          return TRUE;
     }

     else if((curentSequence == SEQ_TYPE_ANY || curentSequence == SEQ_TYPE_LEFT) &&
        (previousButton.tag - 1 == currentButton.tag))
     {
          resultLabel.text = [resultLabel.text stringByAppendingString:currentButton.titleLabel.text];
          curentSequence = SEQ_TYPE_LEFT;
          return TRUE;
     }

     else if((curentSequence == SEQ_TYPE_ANY || curentSequence == SEQ_TYPE_TOP) &&
             (previousButton.tag - NO_OF_BUTTONS_IN_ROW == currentButton.tag))
     {
          resultLabel.text = [resultLabel.text stringByAppendingString:currentButton.titleLabel.text];
          curentSequence = SEQ_TYPE_TOP;
          return TRUE;
     }

     else if((curentSequence == SEQ_TYPE_ANY || curentSequence == SEQ_TYPE_BOTTOM) &&
             (previousButton.tag + NO_OF_BUTTONS_IN_ROW == currentButton.tag))
     {
          resultLabel.text = [resultLabel.text stringByAppendingString:currentButton.titleLabel.text];
          curentSequence = SEQ_TYPE_BOTTOM;
          return TRUE;
     }

     else if((curentSequence == SEQ_TYPE_ANY || curentSequence == SEQ_TYPE_RIGHT_DIAGONAL_DOWN) &&
             (previousButton.tag + NO_OF_BUTTONS_IN_ROW + 1 == currentButton.tag))
     {
          resultLabel.text = [resultLabel.text stringByAppendingString:currentButton.titleLabel.text];
          curentSequence = SEQ_TYPE_RIGHT_DIAGONAL_DOWN;
          return TRUE;
     }

     else if((curentSequence == SEQ_TYPE_ANY || curentSequence == SEQ_TYPE_RIGHT_DIAGONAL_UP) &&
             (previousButton.tag -  NO_OF_BUTTONS_IN_ROW + 1 == currentButton.tag))
     {
          resultLabel.text = [resultLabel.text stringByAppendingString:currentButton.titleLabel.text];
          curentSequence = SEQ_TYPE_RIGHT_DIAGONAL_UP;
          return TRUE;
     }

     else if((curentSequence == SEQ_TYPE_ANY || curentSequence == SEQ_TYPE_LEFT_DIAGONAL_UP) &&
             (previousButton.tag - NO_OF_BUTTONS_IN_ROW - 1 == currentButton.tag))
     {
          resultLabel.text = [resultLabel.text stringByAppendingString:currentButton.titleLabel.text];
          curentSequence = SEQ_TYPE_LEFT_DIAGONAL_UP;
          return TRUE;
     }
     else if((curentSequence == SEQ_TYPE_ANY || curentSequence == SEQ_TYPE_LEFT_DIAGONAL_DOWN) &&
             (previousButton.tag + NO_OF_BUTTONS_IN_ROW - 1 == currentButton.tag))
     {
          resultLabel.text = [resultLabel.text stringByAppendingString:currentButton.titleLabel.text];
          curentSequence = SEQ_TYPE_LEFT_DIAGONAL_DOWN;
          return TRUE;
     }
     else
     {
          resultLabel.text = @"";
          curentSequence = SEQ_TYPE_ANY;
          return FALSE;
     }     
}

// Event handler for button event
- (void)aMethod:(id)sender
{
     UIButton *currentButton = (UIButton *)sender;
     BOOL result = [self isAdjacent:currentButton];
     if(result == FALSE)
     {
          self.previousButton = nil;
          resultLabel.text = @"";
          curentSequence = SEQ_TYPE_ANY;
     }
     else
     {
          self.previousButton = sender;
     }
} 
```

希望它会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T12:14:31.633

如果我理解正确，您需要知道按下的按钮是否与先前按下的按钮相邻？使用此函数测试网格中的邻接性：

```
bool isAdjacent(UIButton* current, UIButton* previous) {
    if( !previous )
        return false;

    //Create a rectangle around the previous button (assuming all buttons are in a fixed grid)
    CGRect previousRect = previous.frame;
    CGRect adjacentRect = CGRectMake(previous.frame.origin.x - previous.frame.size.width,
                                     previous.frame.origin.y - previous.frame.size.height,
                                     previous.frame.size.width*3,
                                     previous.frame.size.height*3);
    return CGRectIntersectsRect(adjacentRect, previousRect);
} 
```

并且仅在它们相邻时才附加，即：

```
- (void)aMethod:(id)sender 
{
    UIButton *button = (UIButton *)sender;
    static UIButton* previous = nil;
    NSString    *get = (NSString *)[[button titleLabel] text];
    NSString *origText = mainlabel.text;

   if( isAdjacent(button, previous) )
       mainlabel.text = [origText stringByAppendingString:get];

   previous = button;

   //Rest of function
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T08:01:42.920

如果我理解正确。如果选择的字母都彼此相邻，用户只能有一个正确的单词？

您是否尝试过：保留两个参考。一个 UIButton 用于 previousPressedButton，一个 UIButton 用于 lastPressedButton。

首先用户按下 D。lastPressedButton 将引用 D。然后用户按下 O。previousPressedButton 将为 D。lastPressedButton 将为 O。

现在，获取 UIButtons 的宽度和高度，并比较 lastPressedButton.frame.origin.x 是否小于宽度或 -width 距离。还要检查 lastPressedButton.frame.origin.y 是否会小于 height 或 -height 。现在您知道它是否触摸了上一个按钮。使用它来确定它是否是一个新词。

我会把它放到一个方法中。

```
 -(BOOL)isAdjacentLetter {
          float buttonWidth = lastPressedButton.size.width;
          float buttonHeight = lastPressedButton.size.height;
          if(lastPressedButton.frame.origin.x>previousPressedButton.frame.origin.x+buttonWidth) return NO;
          if(lastPressedButton.frame.origin.y>previousPressedButton.frame.origin.y+buttonHeight) return NO;
          if(lastPressedButton.frame.origin.x<previousPressedButton.frame.origin.x-buttonWidth) return NO;
          if(lastPressedButton.frame.origin.y<previousPressedButton.frame.origin.y-buttonHeight) return NO;

          return YES;
} 
```

然后每当单击按钮时。您可以使用

```
if ([self isAdjacentLetter]) {
   //still same word
} else {
   //new word. erase
} 
```

或者，如果我理解不同的话。只有字母排成一行时才能造字。如：从左到右。从下到上。从右下角到左上角等。在这种情况下，确定所有方向。如左上为0，上为1，右上为2。右为3。右下为4。下为5。左下为6。左为7。

单击两个按钮时，存储方向。例如：如果是从左到右，direction = 3；然后当单击另一个按钮时，检查新方向。如果是 3，那么这个词仍然是同一个方向。如果是别的东西，那么擦除并重新开始。

希望这可以帮助。

# actionscript-3 - 打印 2D 元素会使 stage3d 视图消失

> ID：10795953
> 
> 赞同：0
> 
> 时间：2012-05-29T08:54:58.687
> 
> 标签：actionscript-3, flash, printing, away3d, stage3d

我有一个包含 3D 视图和一些 2D 视图的应用程序。当我尝试打印其中一个 2D 视图时会出现问题。打印完成后 3D 视图消失。

我已经用 Away3D 中的 Basic_Load3DS 示例复制了这个问题。我添加了一个红色按钮来启动打印作业。PrintJob 打印按钮，与 3D 视图无关，但打印完成后蚂蚁消失。

[你可以在这里试试](http://www.visualisera.se/demo/away3d/print/)。单击红色按钮，然后在出现问题的打印对话框中单击确定。查看源代码可用。

这是我添加到 Basic_Load3DS 示例中的代码

```
private var _btn:Sprite;
protected function initExtra():void
{
 _btn = new Sprite();
 addChild(_btn);
 _btn.graphics.beginFill(0xff0000);
 _btn.graphics.drawRect(0, 0, 100, 100);
 _btn.y = 100;
 _btn.addEventListener(MouseEvent.CLICK, print);
}
protected function print(e:Event):void
{
 var tPJ:PrintJob = new PrintJob();
 if (tPJ.start())
 {
  tPJ.addPage(_btn); //This line cause the problem
  tPJ.send();
 }
} 
```

如果我注释掉 tPJ.addPage(_btn); 

关于如何解决这个问题的任何想法？我迫切需要一个解决方案！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T18:46:26.827

如果您尝试绘制整个 3D 场景，则您尝试绘制存在于 GPU 上的东西，而不是 CPU。您必须将场景绘制成位图，然后打印出来。

[flash.display.Context3D.drawToBitmapData;](http://help.adobe.com/en_US/FlashPlatform/beta/reference/actionscript/3/flash/display3D/Context3D.html#drawToBitmapData%28%29)

其次，你只是在画一个按钮？尝试创建一个位图，然后使用 drawtobitmapdata，然后绘制舞台——这应该会给你想要的结果。

# css - 屏幕分辨率改变 CSS

> ID：10795959
> 
> 赞同：0
> 
> 时间：2012-05-29T08:55:19.493
> 
> 标签：css, cross-browser

我在跨浏览器问题上不是很有经验，但我遇到了这个问题：

**场景：** 假设我有`div`，`width:800px`因为`div`我有 2 个按钮（左箭头-右箭头），`onclick`在任何按钮上我更改图像位置`div`（图像向右或向左移动，但保持在外部`div`）

**问题：**当我重新调整大小或降低屏幕分辨率时，我的 CSS 会发生变化；图像从 div 中消失，并且我的按钮的位置也发生了变化。

有什么想法或解决方案吗？谢谢。

**编辑：**它在 Firefox 和 Opera 中运行良好，但在 Google Chrome 和 IE 中无法运行。

下面是html：

```
<div class="hand">
    <div id="handinside"></div> 
</div>
<div id="left" class="button"> left </div> 
<div class="flip"></div>
<div id="right" class="button">right</div>
</div> 
```

下面是CSS

```
.gameNavigation {
    width: 220px;
    margin: 0px auto 0px;
}

.button {
    margin: 0 0 0 5px; 
    cursor: pointer; 
    width: 59px; 
    height: 29px; 
    float: left; 
    text-align: center; 
    background-color:red;
    color: white;
}

.hand {
    position:relative;
    background-color:transparent;
    left:0px;
    width:140px;
    height:210px;
} 
```

下面是jquery

```
 $(".button").click(function() {
    var $button = $(this);
    var oldValue = $("#counter").val();
    if ($button.text() == "right"  )  {
        //move right if the value is no more than 4
        if(parseInt(oldValue) < 3){
            var newVal = parseInt(oldValue) + 1;
            $(".hand").animate({
                "left": "+=222px"
            }, "slow");
            $(".coin").animate({
                "left": "+=222px"
            }, "slow");
        //$(".block").stop();
        }
    }
    else {
        // move left and don't allow the value below zero
        var test = 'test'
        if (oldValue >= 1) {
            var newVal = parseInt(oldValue) - 1;
        }

        if(parseInt(newVal) >= -1){
            $(".hand").animate({
                "left": "-=222px",
                easing :'swing'
            }, "slow");
            $(".coin").animate({
                "left": "-=222px",
                easing : 'swing'
            }, "slow");
        }

    }
    $("#counter").val(newVal);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T09:13:07.560

用相对定位定位你的容器 div，然后用绝对定位定位你的箭头

# c++ - 如何使 boost::asio 线程池中的任务可取消/可中断？

> ID：10795971
> 
> 赞同：0
> 
> 时间：2012-05-29T08:56:09.450
> 
> 标签：c++, multithreading, boost, threadpool, boost-asio

[我有一个用这样](http://think-async.com/Asio/Recipes)`boost::asio::io_service`的配方制成的线程池。我想知道如何中断发布到它的任务（不杀死线程），以便将它们替换为池中的下一个任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T11:26:56.760

boost::asio 中的回调通常应该相当快。他们应该只做一些工作，安排另一项工作并完成。这将是任务失去 CPU 和其他任务将被执行的点。

有`boost::thread::interrupt()`and `boost::thread_group::interrupt_all()`，但它们只能在中*断点*停止执行线程。中断将被视为异常`boost::thread_interrupted`。这意味着，您必须以某种方式处理异常，并且在您的情况下 - 释放当前任务。它比仅执行一步处理和调度处理程序要复杂得多。

此外，您可以使用`interrupt()`和`interrupt_all()`在执行您自己的例程的线程中进行操作，而对于正在运行的线程则不是这样`io_service::run()`。可以想象，这`boost::thread_interrupted`是在`run()`方法内部抛出的，而不是异步处理程序，这可能会以意外行为结束。

# python - 使用正则表达式的键的 Python 字典搜索值

> ID：10795973
> 
> 赞同：44
> 
> 时间：2012-05-29T08:56:22.267
> 
> 标签：python

我正在尝试实现在 Python 字典中搜索特定键值的值（使用正则表达式作为键）。

例子：

我有一个 Python 字典，它的值如下：

```
{'account_0':123445,'seller_account':454545,'seller_account_0':454676, 'seller_account_number':3433343} 
```

我需要搜索键为“seller_account”的值？我写了一个示例程序，但想知道是否可以做得更好。主要原因是我不确定正则表达式并错过了一些东西（比如我如何为以'seller_account'开头的键设置re）：

```
#!usr/bin/python
import re
my_dict={'account_0':123445,'seller_account':454545,'seller_account_0':454676, 'seller_account_number':3433343}

reObj = re.compile('seller_account')

for key in my_dict.keys():
        if(reObj.match(key)):
                print key, my_dict[key]

~ home> python regular.py

seller_account_number 3433343
seller_account_0 454676
seller_account 454545 
```

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-05-29T09:03:28.433

如果您只需要检查以 开头的键，则`"seller_account"`不需要正则表达式，只需使用[startswith()](http://docs.python.org/library/stdtypes.html#str.startswith)

```
my_dict={'account_0':123445,'seller_account':454545,'seller_account_0':454676, 'seller_account_number':3433343}

for key, value in my_dict.iteritems():   # iter on both keys and values
        if key.startswith('seller_account'):
                print key, value 
```

或以 one_liner 方式：

```
result = [(key, value) for key, value in my_dict.iteritems() if key.startswith("seller_account")] 
```

注意：对于 python 3.X 使用，替换`iteritems()`为`items()`并且不要忘记添加`()`for `print`。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-05-12T14:16:25.777

你可以用 dpath 解决这个问题。

[http://github.com/akesterson/dpath-python](http://github.com/akesterson/dpath-python)

dpath 允许您在键上使用 glob 语法搜索字典，并过滤值。你想要的是微不足道的：

```
$ easy_install dpath
>>> dpath.util.search(MY_DICT, 'seller_account*') 
```

...这将为您返回一个包含与该 glob 匹配的所有键的大合并字典。如果您只想要路径和值：

```
$ easy_install dpath
>>> for (path, value) in dpath.util.search(MY_DICT, 'seller_account*', yielded=True):
>>> ... # do something with the path and value 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-05-29T09:01:48.807

```
def search(dictionary, substr):
    result = []
    for key in dictionary:
        if substr in key:
            result.append((key, dictionary[key]))   
    return result

>>> my_dict={'account_0':123445,'seller_account':454545,'seller_account_0':454676, 'seller_account_number':3433343}
>>> search(my_dict, 'seller_account')
[('seller_account_number', 3433343), ('seller_account_0', 454676), ('seller_account', 454545)] 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2021-02-05T15:16:26.247

您可以使用“re”和“filter”的组合。例如，如果您想在 os 模块中搜索哪些方法的方法名称中包含“stat”一词，您可以使用下面的代码。

```
import re 
import os
r = re.compile(".*stat.*")
list(filter(r.match, os.__dict__.keys())) 
```

结果是：

```
['stat', 'lstat', 'fstat', 'fstatvfs', 'statvfs', 'stat_result', 'statvfs_result'] 
```

我认为原始问题中的性能问题是使用“re”模块找到键后的 key_value 搜索。如果密钥的一部分是可互换的，我们就不能使用“startswith”。所以“re”是一个不错的选择。另外，我使用过滤器获取所有匹配键的列表并列出它们，以便我们可以使用简单的 [DICT[k] for k in LIST] 返回所有值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-28T19:01:05.323

> 就像我如何为以'seller_account'开头的密钥设置重新

```
reObj = re.compile('seller_account') 
```

应该：

```
reObj = re.compile('seller_account.*') 
```

# matrix - gnuplot：用行和列名称标记矩阵（热图）的 x 和 y 轴

> ID：10795974
> 
> 赞同：8
> 
> 时间：2012-05-29T08:56:26.470
> 
> 标签：matrix, label, gnuplot

我对 gnuplot 完全陌生，谷歌搜索后没有找到可行的解决方案。

我有一个看起来像这样的数据矩阵：

```
 A B C D E
A 0 2 3 4 5
B 6 0 8 9 0
C 1 2 0 4 5
D 6 7 8 0 0
E 1 2 3 4 0 
```

我想做的是用 绘制热图`plot 'result.csv' matrix with image`，x 轴用 AE 标记，y 轴用 AE 标记。这个矩阵并不总是具有相同的大小，但行数总是等于列数并且它总是被标记。

有人可以帮我解决这个问题吗？我想我必须使用该`using`命令，但到目前为止，这对我来说似乎是完全的巫术......

非常感谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-29T12:31:12.437

这实际上是一个 doosie，如果没有一些 *nix shell 魔法，我无法实现它。

首先，我们要获取 x tic 标签和 y tic 标签：

```
XTICS="`awk 'BEGIN{getline}{printf "%s ",$1}' test.dat`"
YTICS="`head -1 test.dat`" 
```

此时，XTICS 是字符串“FGHI J”，YTICS 是字符串“ABCD E”。

现在，我们要通过迭代设置 xtics：

```
set for [i=1:words(XTICS)] xtics ( word(XTICS,i) i-1 )
set for [i=1:words(YTICS)] ytics ( word(YTICS,i) i-1 ) 
```

我们使用了 2 个 gnuplot 内置函数（`word`和`words`）。 `words(string)`计算给定字符串中有多少单词（单词是由空格分隔的字符序列）。 `word(string,n)`返回字符串中的第 n 个单词。

现在，我们可以绘制您的数据文件...唯一的问题是`matrix`想要使用*您的数据文件中的所有行和列*。您可能可以使用`every`关键字减少实际读取的行/列，但我不知道如何在矩阵文件上执行此操作——而且我认为继续依赖 shell 实用程序（`awk`和`sed`）可能更容易

```
plot "<awk '{$1=\"\"}1' test.dat | sed '1 d'" matrix w image
#######^ replace the first field with nothing
################################## ^ delete first line 
```

现在你的情节（希望）看起来像你想要的那样。

*还要注意，由于我们使用了迭代，这个脚本只能在 gnuplot 4.3 或更高版本中工作——因为当前的稳定版是 4.6，希望没关系。*

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-06-21T08:46:38.193

好的，这个问题很老了，但是在 gnuplot 中已经实现了一种更简单的方法：

```
plot 'result.csv' matrix rowheaders columnheaders with image 
```

从[http://gnuplot.sourceforge.net/demo/heatmaps.html得到它](http://gnuplot.sourceforge.net/demo/heatmaps.html)

# php - 基于 cookie 的 Joomla 路由器

> ID：10795976
> 
> 赞同：0
> 
> 时间：2012-05-29T08:56:37.137
> 
> 标签：php, mod-rewrite, joomla, sef

如何更改插件中当前的 Joomla URL？

例如，我有一个`$_COOKIE['mycity']`等于的 cookie 集`barnaul`

我需要创建能够用新 URL 替换当前 URL 的 Joomla 插件。

例如替换

`http://www.myjoomlawebsite.com/about.html`

和

`http://www.myjoomlawebsite.com/barnaul/about.html`

现在我正在尽力了解 JoomFish 是如何做到这一点的......我想我需要深入研究`JURI->setPath`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T04:30:16.787

尝试使用`JRouter::attachBuildRule()`. 您应该向它传递一个回调函数，该函数将接受两个参数。第一个是 的实例`JRouter`，第二个是`JURI`（都通过引用传递）的实例。因此，您的函数应该检查 cookie 值并`JURI`根据需要更新实例的路径。

# android - 无法处理空指针异常

> ID：10795982
> 
> 赞同：-2
> 
> 时间：2012-05-29T08:56:59.137
> 
> 标签：android

> **可能重复：**
> [单击检查数据按钮](https://stackoverflow.com/questions/10794559/getting-nullpointer-exception-when-clicking-on-checkdata-button)
> [时出现空指针异常 当我单击按钮时引发空指针异常](https://stackoverflow.com/questions/11080994/nullpointer-exception-raises-when-i-click-on-the-button)

我无法在我的代码中处理空指针异常

在这一行中出现错误**DataManipulator.createCertificatesEntry((Certificates) testCertificates);** 这是我的 createCertificatesEntry

```
 public void createCertificatesEntry(Certificates certificates) {
            ByteArrayOutputStream out = new ByteArrayOutputStream();
            certificates.getBitmap().compress(Bitmap.CompressFormat.PNG, 100, out);
            ContentValues cv = new ContentValues();
            cv.put(KEY_IMG, out.toByteArray());
            mDb.insert(CERTIFICATES_TABLE,  null, cv);
        } 
```

这段代码有什么问题吗

```
this is logcat
05-29 12:57:42.577: E/AndroidRuntime(625): FATAL EXCEPTION: main
05-29 12:57:42.577: E/AndroidRuntime(625): java.lang.RuntimeException: Unable to start activity ComponentInfo{list.certificates/list.certificates.CheckData}: java.lang.NullPointerException
05-29 12:57:42.577: E/AndroidRuntime(625):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1955)
05-29 12:57:42.577: E/AndroidRuntime(625):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1980)
05-29 12:57:42.577: E/AndroidRuntime(625):  at android.app.ActivityThread.access$600(ActivityThread.java:122)
05-29 12:57:42.577: E/AndroidRuntime(625):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1146)
05-29 12:57:42.577: E/AndroidRuntime(625):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-29 12:57:42.577: E/AndroidRuntime(625):  at android.os.Looper.loop(Looper.java:137)
05-29 12:57:42.577: E/AndroidRuntime(625):  at android.app.ActivityThread.main(ActivityThread.java:4340)
05-29 12:57:42.577: E/AndroidRuntime(625):  at java.lang.reflect.Method.invokeNative(Native Method)
05-29 12:57:42.577: E/AndroidRuntime(625):  at java.lang.reflect.Method.invoke(Method.java:511)
05-29 12:57:42.577: E/AndroidRuntime(625):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
05-29 12:57:42.577: E/AndroidRuntime(625):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
05-29 12:57:42.577: E/AndroidRuntime(625):  at dalvik.system.NativeStart.main(Native Method)
05-29 12:57:42.577: E/AndroidRuntime(625): Caused by: java.lang.NullPointerException
05-29 12:57:42.577: E/AndroidRuntime(625):  at list.certificates.DataManipulator.createCertificatesEntry(DataManipulator.java:61)
05-29 12:57:42.577: E/AndroidRuntime(625):  at list.certificates.CheckData.onCreate(CheckData.java:28)
05-29 12:57:42.577: E/AndroidRuntime(625):  at android.app.Activity.performCreate(Activity.java:4465)
05-29 12:57:42.577: E/AndroidRuntime(625):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
05-29 12:57:42.577: E/AndroidRuntime(625):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1919)
05-29 12:57:42.577: E/AndroidRuntime(625):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T09:49:38.307

您的 this 链中的一个对象为 null`list.certificates.DataManipulator`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T09:02:41.487

当您在 DataManipulator.createCertificatesEntry( (Certificates) testCertificates) 行传递 Activity 中为空的“对象 testCertificates”时；

在 DataManipulator.createCertificatesEntry 方法中，证书为空，因此 certificate.getBitmap() 将在这里通过空指针 excption

```
 public void createCertificatesEntry(Certificates certificates) 
    { 
     ByteArrayOutputStream out = new ByteArrayOutputStream();
     certificates.getBitmap().compress(Bitmap.CompressFormat.PNG, 100, out);
     ContentValues cv = new ContentValues();
     cv.put(KEY_IMG, out.toByteArray());
     mDb.insert(CERTIFICATES_TABLE, null, cv);
     } 
```

使用此行在 Activity 中的 DataManipulator.createCertificatesEntry 中传递非空值

证书 testCertificates = new Certificates(BitmapFactory.decodeFile(Context.STORAGE_SERVICE));

以上

DataManipulator.createCertificatesEntry((Certificates) testCertificates);

# javascript - Photoshop Javascript脚本保存和关闭文档

> ID：10795983
> 
> 赞同：2
> 
> 时间：2012-05-29T08:56:59.750
> 
> 标签：javascript, scripting, photoshop

由于某种原因，我无法保存；我正在使用 Photoshop CS5.1（如果这确实是问题的原因）

```
error 8800: General Photoshop error occurred. 
This functionality may not be available in this version of Photoshop.
Could not save a copy as C:\...\Temp001.jpeg0011338281522" 
because the file could not be found 
```

```
var thistimestamp = Math.round(new Date().getTime() / 1000);
saveFile = new File( "/Users/Barny/My Pictures/Temp001" +thistimestamp+ ".jpeg" )
saveOptions = new JPEGSaveOptions();
saveOptions.embedColorProfile = true;
saveOptions.formatOptions = FormatOptions.STANDARDBASELINE;
saveOptions.matte = MatteType.NONE;
saveOptions.quality = 9;
app.activeDocument.saveAs(saveFile, saveOptions, true,Extension.LOWERCASE); 
```

我希望脚本保存并关闭，但我不断收到此错误。我正在使用 Photoshop CS5.1（如果这确实是问题的原因）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T15:17:15.287

当您`General Photoshop error`在保存时遇到错误通常意味着保存路径有问题。Photoshop 正在尝试保存到不存在的位置。假设文件夹`C:/Users/Barney/Pictures/Temp001`存在，这可行：

```
var thistimestamp = Math.round(new Date().getTime() / 1000);
saveFile = new File( "c:/Users/Barney/Pictures/Temp001/" +thistimestamp)
saveOptions = new JPEGSaveOptions();
saveOptions.embedColorProfile = true;
saveOptions.formatOptions = FormatOptions.STANDARDBASELINE;
saveOptions.matte = MatteType.NONE;
saveOptions.quality = 9;

app.activeDocument.saveAs(saveFile, saveOptions, true,Extension.LOWERCASE); 
```

我所做的唯一更改是对路径字符串`saveFile = new File("C:/Users/Barney/Pictures/Temp001/" + thistimestamp)`注意我添加了`C:`以使其成为绝对路径，并`/`在 Temp001 之后添加了一个以指定这是一个文件夹而不是最终文件名的一部分。`My Pictures`实际上应该是`Pictures`（我的图片只是一个别名），如果您从地址栏中复制地址，这就是您得到的。我还删除了`+ ".jpeg"`因为 Photoshop 会为您处理文件扩展名。

如果您尝试创建一个新文件夹，则必须使用该`Folder`对象：

```
var myfolder = new Folder("c:/Users/Barney/Pictures/Temp001/");
myfolder.create(); 
```

# sql-server - 如何从 SQL Server 2008 向手机发送 SMS

> ID：10795987
> 
> 赞同：0
> 
> 时间：2012-05-29T08:57:14.477
> 
> 标签：sql-server

目前我正在从事核心银行项目，我被困在某一点上，即从 SQL Server 发送 SMS。

当客户进行任何类型的交易（如信用卡、借记卡）时，他必须立即收到一条短信。

我不知道如何从 SQL Server 2008 发送短信。请帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T09:05:39.460

您可以将 xp_sendmail 与电子邮件一起使用到 SMS 网关，就像您可以在网上找到无数一样。

# emacs - Emacs 桌面保存模式启动错误

> ID：10795988
> 
> 赞同：3
> 
> 时间：2012-05-29T08:57:18.507
> 
> 标签：emacs, desktop

在我的 .emacs 文件中添加以下代码后，在启动 emacs 期间出现了一些错误。我是emacs的新手，有没有人可以帮我弄清楚错误来自哪里？

**在 .emacs 中添加代码：**

```
;; Auto-saving the Desktop
(require 'desktop)
(desktop-save-mode 1)
(defun my-desktop-save ()
  (interactive)
  ;; Don't call desktop-save-in-desktop-dir, as it prints a message.
  (if (eq (desktop-owner) (emacs-pid))
      (desktop-save desktop-dirname)))
(add-hook 'auto-save-hook 'my-desktop-save) 
```

**错误：** ![在此处输入图像描述](../Images/d4d7e72518fdf93dc756f5906ba40092.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T08:22:04.430

查看中断[的函数定义](http://code.google.com/p/dea/source/browse/trunk/lisps/cedet/contrib/ede-gnustep.el?r=749#480)，似乎错误是 prj-file`NIL`在第 492 行。（函数中的另一个`expand-filename`调用不应该有一个 nil，因为它是一个非 nil 列表的汽车文件名）。

现在，`prj-file`是`/home/shenyan/Test/memcached-1.4.11`匹配正则表达式的第一个文件名`"\\(Root\\)?ProjStep.ede"`，大概没有。由于 memcached 可能没有 EDE 项目文件，因此出错的原因一定是第 508 行对 ede-project-p 的调用在使用`/home/shenyan/Test/`.

我无法弄清楚发生这种情况的确切原因，但是您可以很容易地进行调试。首先打开您的`*scratch*`缓冲区以轻松键入 emacs lisp。要检查我的猜测，请将以下代码插入缓冲区

```
(ede-directory-project-p "/home/shenyan/Test/memcached-1.4.11") 
```

`C-x C-e`并通过在右括号上点击光标来运行它。如果它返回`nil`我错了。否则，您已经找到了罪魁祸首，并且可能应该通过搜索[ede-files.el](http://code.google.com/p/dea/source/browse/trunk/lisps/cedet/ede/ede-files.el?r=749)`ede-directory-project-p`中的位来进一步调试它。

可能发生的情况是您的`/home/shenyan/Test/`目录中有一些东西告诉 EDE 搜索子目录（或者这可能是默认的？）然后 memcached 子目录有一个文件，其名称使 EDE 认为应该搜索项目文件。如果您弄清楚到底发生了什么，您可能会考虑向 EDE 开发人员提交一个错误：如果项目文件不存在，他们可能不应该出错。

# sql - 在 SQL 中显示带有加号 (+) 的肯定结果

> ID：10795990
> 
> 赞同：7
> 
> 时间：2012-05-29T08:57:27.703
> 
> 标签：sql, formatting, number-formatting

我有以下查询：

```
 SELECT 
      CONVERT(DECIMAL(11,1),SUM(Column/1000*-1)) AS NAME,
    FROM
      Table 
```

我有“/ 1000 * -1”的原因是我希望结果以千为单位显示并反转（负值为正，反之亦然），只有一位小数。

我怎样才能让正值在它们前面有一个加号 (+) 就像负值有一个破折号 (-) 一样？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2018-05-02T09:13:24.207

您可以在函数中使用**分号分隔的**多部分字符串**`FORMAT`**（有点像您在 Microsoft Excel 中使用自定义数字格式）。

> 数字格式最多可以包含**三段**格式代码，以**分号分隔**。这些代码部分按顺序定义了正数、负数和零值的格式：
> 
> ## `<POSITIVE>;<NEGATIVE>;<ZERO>`
> 
> **例子：**
> 
> ## **`FORMAT(@YourValue,'+0.0;-0.0')`**
> 
> ^(（改编[**自此**](https://support.office.com/en-us/article/create-or-delete-a-custom-number-format-78f2a361-936b-4c03-8772-09fab54be7f4#bm1)）)

* * *

我通常在显示标志时也*隐藏零*`+/-`，所以我使用格式化字符串：**`'+0;-0;'''`**

`SELECT FORMAT(+5,'+0;-0;''') --returns:` **`+5`**
`SELECT FORMAT(-5,'+0;-0;''') --returns:` **`-5`**
`SELECT FORMAT(-5,'+0;-0;''') --returns:` ***`<empty string>`***

* * *

要同时显示零，您可以使用格式化字符串：**`'+0;-0;0'`**

* * *

适用于：[tsql](/questions/tagged/tsql "显示标记为“tsql”的问题")、[azure-sql-database](/questions/tagged/azure-sql-database "显示标记为“azure-sql-database”的问题")、[sql-server-2012](/questions/tagged/sql-server-2012 "显示标记为“sql-server-2012”的问题")、[sql-server-2014](/questions/tagged/sql-server-2014 "显示标记为“sql-server-2014”的问题")、[sql-server-2016](/questions/tagged/sql-server-2016 "显示标记为“sql-server-2016”的问题")

* * *

## 更多信息：

*   微软文档：[**`FORMAT`**（Transact-SQL）](https://docs.microsoft.com/sql/t-sql/functions/format-transact-sql?view=sql-server-2017)
*   Microsoft Docs：[**格式化类型**](https://docs.microsoft.com/dotnet/standard/base-types/formatting-types)
    ^(（Doc 适用于[.net](/questions/tagged/.net "显示标记为“.net”的问题")，但也适用于`FORMAT`函数）)
*   微软文档：[**`SIGN`**（Transact-SQL）](https://docs.microsoft.com/en-us/sql/t-sql/functions/sign-transact-sql?view=sql-server-2017)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-29T09:02:16.280

```
SELECT 
  case 
     when CONVERT(DECIMAL(11,1),SUM(Column/1000*-1)) >= 0 
     then concat('+', CONVERT(DECIMAL(11,1),SUM(Column/1000*-1))) 
     else CONVERT(DECIMAL(11,1),SUM(Column/1000*-1)) 
  end AS NAME
FROM Table 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-22T22:54:27.813

```
SELECT 
  REPLACE(CONCAT('+', CONVERT(DECIMAL(11,1),SUM(Column/1000*-1))), '+-', '-')
FROM
  Table 
```

不过，这种方法将显示`+0.0`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-14T17:29:49.910

在 MYSQL 中，这有效......

CONCAT(IF(TimeZone>0,'+',''),TimeZone)

# java - 如何从java中的当前日期减去n天？

> ID：10795997
> 
> 赞同：35
> 
> 时间：2012-05-29T08:57:56.123
> 
> 标签：java, date

我想从 Java 中的当前日期中减去 n 天。

我怎么做？

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-05-29T09:06:00.267

您不必使用日历。你可以玩时间戳：

```
Date d = initDate();//intialize your date to any date 
Date dateBefore = new Date(d.getTime() - n * 24 * 3600 * 1000 l ); //Subtract n days 
```

**更新** 不要忘记在 1000 结束前添加“l”。

请考虑以下警告：

`1000*60*60*24`在闰秒、夏令时等情况下，向 java 日期添加毫秒数会偶尔向原始日期添加零天或两天。如果您需要 100% 确定只添加一天，则此解决方案不适合使用。

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2012-05-29T09:00:01.707

这将减去当前日期的十天（在 Java 8 之前）：

```
int x = -10;
Calendar cal = GregorianCalendar.getInstance();
cal.add( Calendar.DAY_OF_YEAR, x);
Date tenDaysAgo = cal.getTime(); 
```

如果您使用的是 Java 8，则可以使用新的日期和时间 API ( [http://www.oracle.com/technetwork/articles/java/jf14-date-time-2125367.html](http://www.oracle.com/technetwork/articles/java/jf14-date-time-2125367.html) )：

```
LocalDate tenDaysAgo = LocalDate.now().minusDays(10); 
```

如需将新类型转换为旧类型，反之亦然，请参阅：[在 java.time.LocalDateTime 和 java.util.Date 之间转换](https://stackoverflow.com/questions/19431234/converting-between-java-time-localdatetime-and-java-util-date)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-12-26T07:17:17.293

我找到了这个完美的解决方案并且可能有用，您可以根据需要直接获取格式：

```
Calendar cal = Calendar.getInstance();
cal.add(Calendar.DATE, -90); // I just want date before 90 days. you can give that you want.

SimpleDateFormat s = new SimpleDateFormat("yyyy-MM-dd"); // you can specify your format here...
Log.d("DATE","Date before 90 Days: " + s.format(new Date(cal.getTimeInMillis()))); 
```

谢谢。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-31T09:23:56.187

# 以供将来使用查找星期几，扣除日期并显示扣除的日期使用日期。

```
public static void main(String args[]) throws ParseException {

String[] days = { "Sunday", "Monday", "Tuesday", "Wednesday",
        "Thursday", "Friday", "Saturday" };
SimpleDateFormat format1 = new SimpleDateFormat("dd/MM/yyyy");
Date dt1 = format1.parse("20/10/2013");

Calendar c = Calendar.getInstance();
c.setTime(dt1);
int dayOfWeek = c.get(Calendar.DAY_OF_WEEK);
long diff = Calendar.getInstance().getTime().getTime() ;
System.out.println(dayOfWeek);

switch (dayOfWeek) {

case 6:
    System.out.println(days[dayOfWeek - 1]);
    break;
case 5:

    System.out.println(days[dayOfWeek - 1]);
    break;      
case 4:
    System.out.println(days[dayOfWeek - 1]);
    break;
case 3:

    System.out.println(days[dayOfWeek - 1]);
    break;
case 2:
    System.out.println(days[dayOfWeek - 1]);
    break;
case 1:

    System.out.println(days[dayOfWeek - 1]);

     diff = diff -(dt1.getTime()- 3 );
     long valuebefore = dt1.getTime();
     long valueafetr = dt1.getTime()-2;
     System.out.println("DATE IS befor subtraction :"+valuebefore);
     System.out.println("DATE IS after subtraction :"+valueafetr);

     long x= dt1.getTime()-(2 * 24 * 3600 * 1000);
     System.out.println("Deducted date to find firday is - 2 days form Sunday :"+new Date((dt1.getTime()-(2*24*3600*1000))));
     System.out.println("DIffrence from now on is :"+diff);
        if(diff > 0) {

            diff = diff / (1000 * 60 * 60 * 24);
            System.out.println("Diff"+diff);
            System.out.println("Date is Expired!"+(dt1.getTime() -(long)2));
        }

    break;
}
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-05-27T06:35:20.043

正如@Houcem Berrayana 所说

如果您想使用，`n>24`那么您可以使用如下代码：

```
Date dateBefore = new Date((d.getTime() - n * 24 * 3600 * 1000) - n * 24 * 3600 * 1000); 
```

假设您想查找最近 30 天的日期，那么您将使用：

```
Date dateBefore = new Date((d.getTime() - 24 * 24 * 3600 * 1000) - 6 * 24 * 3600 * 1000); 
```

# windows-phone-7 - 在后退键按下事件 WP7 时以编程方式关闭应用程序

> ID：10795999
> 
> 赞同：1
> 
> 时间：2012-05-29T08:58:02.620
> 
> 标签：windows-phone-7

当在模拟器中按下背面时，我正在尝试关闭我的 Wp7 应用程序。我已经尝试了该页面上的代码，我将从该页面上关闭整个应用程序。代码如下：

```
protected override void OnBackKeyPress(System.ComponentModel.CancelEventArgs e)
    {
        base.OnBackKeyPress(e);

        if (NavigationService.CanGoBack)
        {
            while (NavigationService.RemoveBackEntry() != null)
            {
                NavigationService.RemoveBackEntry();
            }
        }
    } 
```

需要帮助 ！提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T09:05:40.167

首先，没有办法以编程方式关闭 wp7 应用程序。

为此，您无需覆盖返回键。在首页（理想情况下是主页或主页）中，按返回键会自动关闭应用程序。