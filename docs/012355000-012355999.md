# StackOverflow 问答 12355000-12355999

# iphone - Using UIProgressView as a Progress indicator for goals

> ID：12355001
> 
> 赞同：0
> 
> 时间：2012-09-10T15:40:07.013
> 
> 标签：iphone, ios, xcode, user-interface

I've tried figuring this out on my own, and am completely clueless as to how to accomplish it. Essentially what I'm trying to do is this:

The Overall Goal: Use the `UIProgressView` as a "different type" of indicator than what it's meant for.
Details: When a user 'completes' a 'goal' (by pressing a UIButton named "complete" in a separate `UIViewController`, let's call this one "View Controller 1") I'd like it to update a UIProgressView in a second `UIViewController` (call this one "View Controller 2"). There are several `UIProgressViews` in View Controller 2, each representing the # of goals in a category 'completed'. So I'd *like* to have a void method in `View Controller` 2 like this:

```
 (void)progressMade:(NSString *)category
{
   categoryOneProgressView.progress += 1/8 ;
   //this would be called from View Controller 1, after the "complete" button was pressed.
} 
```

![enter image description here](../Images/05ae79c6a42821033434faf671adbea6.png)

Thank you in advance for your help.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T15:57:31.840

您可以做的是在 VIEW CONTROLLER 1 中触摸按钮，您可以将已完成目标的值存储在特定类别中。视图控制器 1 的示例代码：

```
-(void)methodTriggeredOnCompleted:(NSString *)category
{
    //Do you calculation for progress of a category 

    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

    [defaults setValue:saveProgressValue forKey:category];
    [defaults synchronize];
} 
```

现在在 View Controller 2 中，您应该在 ViewDidLoad 方法或 ViewWillAppear 方法中获取存储在 NSUserDefaults 中的值并在进度条值中更新它

```
-(void)viewDidLoad
{
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    int val = [defaults valueForKey:category];
    categoryOneProgressBar.progress = val;
} 
```

# http - 如何将 curl 与显示要求身份验证的对话框的网站一起使用

> ID：12355003
> 
> 赞同：0
> 
> 时间：2012-09-10T15:40:11.850
> 
> 标签：http, curl

```
curl http://example.com 
```

返回 HTTP 401 错误，

当我在浏览器中打开[http://example.com](http://example.com)时，它显示：

![在此处输入图像描述](../Images/4a1eb2a6cc99d42487b92df993fec959.png)

如何通过以下方式输入用户名和密码`curl`

**笔记：**

我已经根据其中一个答案尝试了这个，我得到了同样的信息：

```
curl --user myuser:123456 http://example.com
401 Unauthorized 
```

**解决方案**

我刚刚添加了“--ntlm”并且它有效！

```
curl --user myuser:123456 http://example.com --ntlm 
```

我会选择最近的答案...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T15:54:37.863

你有没有尝试过 ：

```
curl --user name:password http://www.example.com 
```

# tfs - TFS How to merge two development branches together?

> ID：12355011
> 
> 赞同：3
> 
> 时间：2012-09-10T15:40:27.953
> 
> 标签：tfs

I have reviewed the web attempting to find a solution to this. I have two development branches and one main branch (production). I need to merge my two development branches together and then merge that joined dev branch to live (main). When I attempt to merge the two dev branches together the only target branch that I get is live/main. Any ideas on how to do this? Is this even possible?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T16:29:18.063

单击“浏览”按钮，然后浏览到要合并到的分支。它会在合并窗口中向您发出警告，说明您即将进行毫无根据的合并。

然而，这确实不是最好的方法。将两个分支（单独）合并到主分支中，然后将主分支拉入每个开发分支。然后一切都是最新的，您将合并冲突最小化（您将确切地知道冲突来自何处），并且您不必进行毫无根据的合并（这将在您的两个开发分支之间建立永久关系）。

# iphone - 在终端中找到 xcodeproj

> ID：12355021
> 
> 赞同：-2
> 
> 时间：2012-09-10T15:41:18.847
> 
> 标签：iphone, terminal

如何在我在 xcode 中创建的终端中找到我的项目？

如何将 Sharekit 的子模块添加或安装到我的项目中？

我试图找到我在 Xcode 中创建的项目。

当我输入 locate abc.xcodeproj

它给出了这个警告

**警告：定位数据库 (/var/db/locate.database) 不存在。要创建数据库，请运行以下命令： sudo launchctl load -w /System/Library/LaunchDaemons/com.apple.locate.plist 请注意，生成数据库可能需要一些时间；创建数据库后，此消息将不再出现。**

感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T15:42:43.633

`locate`有点过时了。改用聚光灯：

```
$ mdfind abc.xcodeproj 
```

# asp.net-mvc - Detect if you are adding or updating within an EditorTemplate View

> ID：12355025
> 
> 赞同：1
> 
> 时间：2012-09-10T15:41:35.250
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, telerik-mvc, mvc-editor-templates

I have a View that I am using as an EditorTemplate. I want to limit what the user can edit vs. what they can insert. My EditorTemplate View is typed as SomeModel and I know that if SomeModel.Id is not 0, that means we are doing an edit, otherwise we are doing an insert. I thought I'd be able to do something like:

```
@if (Model.Id == 0) 
{ 
  //show "insert-specific" UI 
} 
```

but for some reason, I always get 0's, nulls, default, etc. when I check via `Model.` whereas the Html helper methods pick up the true value just fine, such as:

```
@Html.TextBoxFor(model => model.Id) 
```

Again, the value of `Model.Id` is always 0, even when `@Html.TextBoxFor(model => model.Id)` shows another value.

Is there a better way to achieve what I am trying to do?

Note: Not sure that it matters, but I'm using the Telerik MVC Grid control. It doesn't seem to allow for a different View for inserting vs. editing.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T17:48:45.353

哟，

如果您使用的是 Ajax 绑定，那么 EditorTemplate 会被序列化并发送到客户端，每次您编辑记录或添加新记录时，都会使用不同的值重新填充它。如果您使用的是 ajax 绑定，那么您可以使用 OnEdit 客户端事件并检查**e.mode**是否为**edit**或**insert**。然后，您可以使用 JavaScript 操作该编辑器。

# iphone - tableview, adding a row, iphone app, objective c,

> ID：12355027
> 
> 赞同：-2
> 
> 时间：2012-09-10T15:41:44.087
> 
> 标签：iphone, objective-c, tableview

I have a tableview set up that i can drill down about 3 levels. I have an edit button at the top that lets me delete rows. I've just used a mutable array to store data and I can remove items from the array. This all works fine.

For the life of me I can't figure out how to add a row. I've been through all the documentation but can't get it working. I've tried countless things.

I've edited numberOfRowsInSection so that in editing mode it is incremented by 1\. But I don't know how to make that row appear. I want an extra row at the bottom (in editing mode) so that I can add a row. I just don't know how to get that row on the screen.

If someone has code for a simple tableview, just one view, that has an edit button that allows for adding and deleting a row I'd really appreciate it. Just can't get my head around something here.

Cheers. Stephen

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T15:48:02.617

您可以将新项目添加到数组并调用`[UITableView reloadData]`.

或者您可以使用：

```
[tableView beginUpdate];
[tableView insertRowsAtIndexPaths:*arrayOfIndexPaths* withRowAnimation:*rowAnimation*];
[tableView endUpdate]; 
```

# php - 无需 cron 自动执行 MySQL 查询或 PHP 脚本

> ID：12355033
> 
> 赞同：0
> 
> 时间：2012-09-10T15:42:07.550
> 
> 标签：php, mysql

所以，我有一个论坛，我想用一个特殊的会员组奖励自动捐款的用户，我可以通过将它添加到论坛的 MySQL 数据库中来做到这一点。我现在需要的是在一个月过去后自动删除这样的用户组。我想知道的是，是否有可能仅在 PHP 或其他类似的替代方案上实现。

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T15:43:38.030

php 没有内置的作业调度机制，除非您将脚本作为守护进程运行。MySQL有自己的调度机制：[http ://dev.mysql.com/doc/refman/5.1/en/events-overview.html](http://dev.mysql.com/doc/refman/5.1/en/events-overview.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T15:59:11.377

You could store the date that the donation was made, and then, you could check the difference between that date and the current date.

If the result is > month then the user should not be in that membergroup.

Also, to avoid calculating that difference every single time, you could have an extra field in your database for each user, which would indicate if that user should be considered a donator.

# linux - 使用命令 grep 并定位

> ID：12355035
> 
> 赞同：10
> 
> 时间：2012-09-10T15:42:25.400
> 
> 标签：linux, search, command-line, grep, locate

如何使 grep 命令在由 locate 命令找到的路由指定的文件中定位某些单词？

```
locate my.cnf | grep user 
```

（我希望该 grep 命令在找到的文件中搜索“用户”一词以查找命令）

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-10T15:46:11.237

尝试：

```
locate my.cnf | xargs grep user 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-09-10T15:48:13.810

代替管道，使用命令替换：

```
grep user `locate my.cnf` 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T15:54:19.050

为了更好地处理定位结果名称中包含空格的情况，您可以这样做

```
locate -0 my.cnf | xargs -n1 -0 grep user 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T15:44:26.967

如果我正确理解您的问题，可能`grep user $(locate my.cnf)`就是您正在寻找的东西。

# cucumber - 使用 Cucumber 测试同一站点的移动版和桌面版

> ID：12355036
> 
> 赞同：0
> 
> 时间：2012-09-10T15:42:26.593
> 
> 标签：cucumber, bdd

我有一个网站在移动版和桌面版的前端完全不同。

在 Cucumber 上定义步骤时，您无法确定步骤的范围，因此我坚持使用两种解决方案（如我所见）：

*   写下与其他版本冲突的每一步，明确说明我是哪个版本
*   设置一个“背景”，告诉我我的上下文是什么，并更改所有步骤定义以检查此上下文

这些对我来说似乎都不是最优的。

有没有更好/更清洁的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T21:21:30.670

您可以为此使用标签和挂钩，用它测试的站点版本标记每个场景/功能：

```
@mobile
Scenario: Logging in on mobile
  Given I visit the login page

@desktop
Scenario: Logging in on desktop
  Given I visit the login page 
```

使用一些钩子来设置一个变量来指示正在测试的站点的版本：

```
Before '@mobile' do
  @version = :mobile
end

Before '@desktop' do
  @version = :desktop
end 
```

然后在您的步骤中：

```
Given /^I visit the login page$/ do
  if @version == :desktop
    # Desktop specific code
  elsif
    # Mobile specific code
  else
    raise "Don't know what to do!"
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T11:49:21.927

我最终使用了类似于 Jon M 的解决方案。

对于并发步骤，我做了一个“元”步骤，传递到正确的上下文。这是一个例子：

```
When /^I log in$/ do
  step %Q{I log in on #{@context}}
end 
```

然后在另一个文件中（由上下文分隔）我有：

```
When /^I log in on mobile$/ do
  # do stuff
end 
```

为了设置上下文，我创建了一个支持模块。基本上，它会保留当前上下文，并且还有一个默认上下文，您可以通过一个步骤进行更改：

```
Given /^I am on the "(.*?)" version$/ do |version|
  @context = version
end 
```

这不完全是我设置上下文部分的方式，但你明白了。

这样做的好处是，我可以拥有无​​限的上下文，并且这个“元”步骤将拾取它们。我也没有臃肿的脚步。每个步骤都很简单，只处理它自己的上下文逻辑。

不利的一面是，对于我拥有的每个非默认上下文，我都需要一个背景来说明我处于不同的上下文中。

我不会在这里接受正确的答案，因为没有这样的事情。你可以用不同的方法来处理它，直到现在，甚至还没有关于这个的最佳实践:)

# extjs - ExtJS 4 图表 - 使用 Ajax 存储进行更改

> ID：12355040
> 
> 赞同：1
> 
> 时间：2012-09-10T15:42:41.227
> 
> 标签：extjs, charts, store

我的应用程序有些问题。我有一个图表，数据是从建立 Ajax 连接的商店加载的。我第一次加载页面时它工作正常，但我有三个按钮，我的目标是加载一个新图表以在有人单击按钮时替换以前的图表，但这不像我想要的那样工作。我有一些错误，我想知道是否有“官方”方式来做我想做的事情。

我有一个错误：

```
Error : TypeError: me.labels[inflections.length - 1] is undefined
Source File : extjs-4.1.0/ext-all-debug.js
Ligne : 58728 
```

当有人单击按钮时，我会这样做：

```
var el = Ext.get('GraphVolumeBar03');
                if(!el) {
                    var elem = Ext.create('Axiastats.view.GraphVolumeBar03');
                     Ext.create('Ext.panel.Panel', {
                        id : 'GraphVolumeBar03',
                        renderTo: 'graphContainer-body',
                        height : 300,
                        border: false,
                        items: elem,
                    });
                }
                else {
                    el.show();
                    Ext.getCmp('GraphVolumeBar03-chart').redraw(true);
                } 
```

我隐藏了旧图表，但我认为这不是正确的解决方案：

```
var el2 = Ext.get('GraphVolumeBar01');
                 if(el2) { el2.hide(); }
                 var el3 = Ext.get('GraphVolumeBar02');
                 if(el3) { el3.hide(); } 
```

# linux - SQL Anywhere 不能在 VPS 上运行

> ID：12355044
> 
> 赞同：0
> 
> 时间：2012-09-10T15:42:44.600
> 
> 标签：linux, sqlanywhere

我正在尝试连接到外部服务器上的 SQL Anywhere 数据库。我正在研究 VPS Linux。

运行命令时遵循[文档](http://dcx.sybase.com/index.html#1100/en/dbprogramming_en11/php-s-4388017.html)`./bin32/sa_config.sh`，我收到此错误。

```
-bash: ./bin32/sa_config.sh: Permission denied 
```

权限是：`-rw-r--r-- 1 root root 1201 Sep 10 14:50 sa_config.sh`。
当我从`bin64`.

在`phpinfo()`我有错误：

```
SQLAnywhere client version  The SQLAnywhere client libraries could not be loaded. Please ensure that libdbcapi_r.so can be found in your LD_LIBRARY_PATH environment variable. 
```

我将此行添加到`/etc/init.d/httpd`：

```
LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/lib/sql_anywhere/ 
```

并复制到这个位置`libdbcapi_r.so`，然后`libdblib12_r.so`. `lib32`我从和尝试了这些文件`lib64`。

我将位置添加到`php-5.x.y_sqlanywhere_r.so`in`php.ini`和 line 以自动运行它。

如何使 SQL Anywhere 正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T17:05:41.640

您需要像这样运行 sa_config.sh 文件：

```
. <path>sa_config.sh 
```

注意`.`文件名和文件名之间的空格。这将允许脚本更改当前 shell 中的环境变量。

# c# - 在这种情况下，是创建一个新类还是复制粘贴一个方法更好？

> ID：12355047
> 
> 赞同：0
> 
> 时间：2012-09-10T15:42:50.063
> 
> 标签：c#, coding-style

ComboBox 的项目正在从某些 DB 缓存等中提取。该 ComboBox 已在一个程序集中使用，因此该程序集中有关于如何加载数据的代码。现在在第二个程序集中，我再次拥有相同的组合框，并且应该再次填充相同的项目，因此为该组合框加载项目的代码是相同的。

现在：我可以在我的新程序集中复制粘贴该 Load 方法，或者我可以添加对该程序集的引用并创建该方法所在的类的实例，然后调用该方法。（它的方法在那个类中不是静态的）

您建议采用哪种方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T15:46:31.863

也许您可以拥有一个“共享类”，其中包含可以在两个程序集中使用的代码，以防您有更多这种情况的实例？

例如`Shared.PopulateLocatons(cmbLocations)`，所以这个函数包含填充位置的代码，但它是可以从任何程序集调用的共享库的一部分？

如果您不需要，就没有必要复制代码:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-10T15:48:50.367

从广义上讲，我提倡 DRY（不要重复自己）原则。除非有很好的理由不这样做，否则不要复制代码——创建一个帮助类或其他共享代码设备，您可以在其中放置代码，然后从两个地方调用它。这样，如果进行了更改，则只需进行一次，如果需要第 3/4/n 次使用，您将不需要相同代码的 3/4/n 次重复。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T15:44:39.853

这是非常主观的。对于一种方法，我只是复制粘贴，但请注意——如果您后来发现您想从该程序集中使用更多内容，那么您可能需要添加一个引用（并重构复制粘贴）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-10T15:44:53.613

如果两个程序集仍在使用中（即以后会更改），那么显然 import + 使用相同的类。如果该方法需要更改，则需要在两个地方进行。这是维护的噩梦。

如果另一个程序集被“放弃”（永远不会再更改），我想你可以只复制代码就可以逃脱。

# java - 在 For-Loop 中休眠或等待

> ID：12355051
> 
> 赞同：3
> 
> 时间：2012-09-10T15:43:07.407
> 
> 标签：java, android, wait, flashlight, postdelayed

我正在尝试根据摩尔斯电码（文本）中的给定文本打开和关闭特定长度（out_tic）的 LED。我试图用“postDelay”和 sleep() 或 wait() 来解决这个问题，但是 flash 的长度总是相同或应用程序崩溃。我认为这是因为 Flash 被告知在它没有启动时启动关门了。

```
cam = Camera.open();
    Handler handler = new Handler(); 
    for(int i=0;i<Text.length();i++){

        if(Text.charAt(i)=='.' ||Text.charAt(i)=='·'){
            ledon();
            handler.postDelayed(new Runnable() { 
                 public void run() {
                     ledoff();
                     } 
            }, out_tic);

        }
        else if(Text.charAt(i)=='-'){
            ledon();
            handler.postDelayed(new Runnable() { 
                 public void run() {
                     ledoff();
                     } 
            }, 3*out_tic);
        }
        else if(Text.charAt(i)=='/'){
            if(Text.charAt(i-1)=='/'){

            }
        }

    } 
```

ledon() 和 ledoff() 方法只需设置参数并启动/停止预览。

谢谢你的帮助！

**对我有用的新代码：**

*（由于 JRaymond）*

```
final String Text = "./-..-/.-/--/.--./.-.././/";
final int out_tic = 200;

new Thread(new Runnable(){
        @Override
        public void run() {
        for(int i=0;i<Text.length();i++){

        if(Text.charAt(i)=='.' ||Text.charAt(i)=='·'){
        flash(out_tic);
        flashpause(out_tic);
        continue;
        }
        else if(Text.charAt(i)=='-'){
        flash(3*out_tic);
        flashpause(out_tic);
        continue;
        }
        else if(Text.charAt(i)=='/'){
            flashpause(2*out_tic);
            if(Text.charAt(i-1)=='/'){
                flashpause(4*out_tic);
                    }
                }
            }
        }   
    }).start();
}

        private Handler handler = new Handler();
private void flash(final int sleeptime) {
    handler.post(new Runnable() {
        @Override
        public void run() {
            ledon();
        }
    });
    try {
        Thread.sleep(sleeptime);
    } catch (InterruptedException e){
    }
    handler.post(new Runnable(){
        public void run() {
            ledoff();
        }
    });
}

private void flashpause(final int sleeptime)    {
        try {
            Thread.sleep(sleeptime);
            } catch (InterruptedException e){
            }
}

private Camera cam;
private void ledon() {
    cam = Camera.open();     
    Parameters params = cam.getParameters();
    params.setFlashMode(Parameters.FLASH_MODE_TORCH);
    cam.setParameters(params);
    cam.startPreview();
}
private void ledoff() {
    cam.stopPreview();
    cam.release();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T16:21:41.773

我想我已经解决了您的难题-您的所有可运行文件都已发布，因此它们几乎同时发生。 `postDelayed`从现在开始安排`Runnable`一段时间，而不是从上次`Runnable`安排的时间开始。我认为您最好的解决方案是这样的，它将 LED 控制卸载到另一个线程：

```
cam = Camera.open();
Handler handler = new Handler();
new Thread(new Runnable() {
  public void run() {
    for(int i=0;i<Text.length();i++){
      if(Text.charAt(i)=='.' ||Text.charAt(i)=='·') {
        flash(out_tic);
        continue;
      }
      else if(Text.charAt(i)=='-'){
        flash(3 * out_tic)
        continue;
      }
      // I don't quite understand what this does, but the same principles apply
      else if(Text.charAt(i)=='/'){
        //Warte 2*out_tic lang (1mal wurde schon gewartet)
        if(Text.charAt(i-1)=='/'){

        }
      }
    }
  }
  private void flash(int tic) {
    handler.post(new Runnable() {
      public void run() {
        ledon();
      }
    });
    try {
          Thread.sleep(out_tic);
    } catch (InterruptedException e) {
    }
    handler.post(new Runnable() {
      public void run() {
        ledoff();
      }
    }
  }
}); 
```

请注意，上面的内容非常混乱，您可能想要移动一些东西并稍微清理一下 - 但我们的想法是让 UI 中的不同线程进行睡眠，然后在需要相机参数时回发给处理程序被改变。

# wolfram-mathematica - 带参数的 NDSolve

> ID：12355052
> 
> 赞同：2
> 
> 时间：2012-09-10T15:43:13.003
> 
> 标签：wolfram-mathematica, differential-equations

我是 Mathematica 的新手，可能我正在寻找的东西很简单，我尝试了一些方法，但我无法成功。

我有一个 DE，我想要一个由 DE 参数参数化的解决方案。更准确地说，
让我们将 DE 定义为： `x'=f[x,t,a]`其中“a”是参数，我希望得到`x`作为时间和参数的函数的解，我将函数 g 命名如下。 `x=g[t,a]`

当 DE 是基本的时，它很容易使用`DSolve`和获取它，但是我找不到使用`NDSolve`. 我知道这`NDSolve`仅适用于数值争论，但我正在寻找一种方法来将结果与不同的参数值进行比较。
用不同的参数值显示/比较结果的简单方法也可以。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T16:41:02.870

```
vdp[k_] := {x'@t == y@t, y'@t == -x@t + k (1 - x@t^2) y@t, x@0 == 2, y@0 == 0};
sol = Table[NDSolve[vdp@k, {x, y}, {t, 2000}], {k, 1000, 1500, 100}];
Plot[x@t /. sol, {t, 0, 2000}, PlotRange -> All, Evaluated -> True] 
```

![数学图形](../Images/47f977a9c142bd9a6bffa12634c2aa58.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T15:51:02.597

我认为这样做的唯一方法是针对不同的参数值运行 NDSolve 多次，然后比较结果。

# mysql - MySQL 'WHERE AND' 问题

> ID：12355053
> 
> 赞同：0
> 
> 时间：2012-09-10T15:43:16.943
> 
> 标签：mysql, select

我遇到了一个问题，我正在尝试从数据库中收集一些已定义的电子邮件，我通过每个客户的 ID 收集它们。

因此，我目前在数据库中有 1000 个用户，我只想要来自 ID 10、11、23、34、56、33、340、433、434 等的电子邮件......

除了“

```
SELECT email FROM users WHERE id=10 OR id=11 OR id=23 OR id=34... 
```

等”是否有任何其他方法可以同时包含所有 ID，而不必每次都编写 OR 条件并添加 ID？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T15:44:20.307

使用`IN`运算符：

```
WHERE id in (10, 11, 23, 34, ....) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T15:44:29.853

利用`IN`

```
SELECT email 
FROM users 
WHERE ID IN (34, 56, 33, 340, 433, 434) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T15:45:05.170

```
SELECT email FROM users WHERE id IN (10, 11, 23, 34, 56, 33, 340, 433, 434); 
```

# php - 更改 documentroot 后，xampp 仍然使用默认的 phpmyadmin

> ID：12355054
> 
> 赞同：0
> 
> 时间：2012-09-10T15:43:18.950
> 
> 标签：php, apache, phpmyadmin, xampp

我使用 XAMPP 安装 Apache、PHP、MySQL。

`c:\xampp\apache\conf\httpd.conf`然后我因此对文件进行了个性化：

```
# DocumentRoot "C:/xampp/htdocs"
DocumentRoot "C:\Users\edward\Documents\webs"

# <Directory "C:/xampp/htdocs">
<Directory "C:\Users\edward\Documents\webs"> 
```

我现在可以把网站放在这里：

```
C:\Users\edward\Documents\webs\test 
```

这里的地图：

```
http://localhost/test/ 
```

但是，当在这里复制到我自己的 phpmyadmin 站点时：

```
C:\Users\edward\Documents\webs\phpmyadmin 
```

我注意到网址：

```
http://localhost/phpmyadmin 
```

仍然指向：

```
C:\xampp\phpMyAdmin 
```

这是在哪里设置的，如何更改它以便 URL`http://localhost/phpmyadmin`映射到`C:\Users\edward\Documents\webs\phpmyadmin`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T06:55:01.403

这是因为 xampp 使用`alias`for`http://localhost/phpmyadmin`指向`xampp's phpmyadmin path`

因此，您可以做的是，`Alias /phpmyadmin`在您的中找到`httpd.conf`并将其替换为`Alias /xphpmyadmin`or 甚至`Alias /phpmyadmin2`. 如果你这样做，你不会与`phpmyadmin`在你的文件夹中有一个文件夹发生冲突`webs`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-26T20:50:23.477

这可能对其他人有所帮助您将在 httpd.conf 文件中找到这些行

> `# XAMPP specific settings
> Include "conf/extra/httpd-xampp.conf"`

如果您查看包含的文件“httpd-xampp.conf”，您将看到该行

> ```
> Alias /phpmyadmin "C:/xampp/phpMyAdmin/"
> <Directory "C:/xampp/phpMyAdmin">
>     AllowOverride AuthConfig
>     Require all granted
> </Directory> 
> ```

以多种方式修改此信息（更改 httpd-xampp.conf，包含您自己的自定义 conf 文件，在上述语句之后放置一个语句）应该可以解决您的问题

# mysql - 声纳 MySQL 设置

> ID：12355055
> 
> 赞同：8
> 
> 时间：2012-09-10T15:43:25.767
> 
> 标签：mysql, jdbc, configuration, properties, sonarqube

我刚刚下载了 Sonar 3.2 并配置了 sonar.properties 文件以连接到我的本地 MySql 数据库。我启用了以下设置：

```
sonar.jdbc.url:   jdbc:mysql://localhost:3306/sonar?useUnicode=true&characterEncoding=utf8&rewriteBatchedStatements=true
sonar.jdbc.driverClassName:   com.mysql.jdbc.Driver 
```

我能够在没有任何错误的情况下启动服务器，并且能够登录到 Sonar 界面，但是当我在我的 maven 项目上运行“mvn sonar:sonar”时，我收到以下错误：

```
[ERROR] Failed to execute goal org.codehaus.mojo:sonar-maven-plugin:2.0:sonar (default-cli) on project vrservices: Can not execute Sonar: Fail to connect to database: Cannot load JDBC driver class 'org.h2.Driver' -> [Help 1] 
```

我已经阅读了一些论坛，说将以下代码放在 settings.xml 文件中，但这仍然没有解决问题。

```
 <profile>
      <id>sonar</id>
      <activation>
          <activeByDefault>true</activeByDefault>
      </activation>
      <properties>
          <!-- EXAMPLE FOR MYSQL -->
          <sonar.jdbc.url>jdbc:mysql://localhost:3306/sonar?useUnicode=true&amp;characterEncoding=utf8</sonar.jdbc.url>
          <sonar.jdbc.driver>com.mysql.jdbc.Driver</sonar.jdbc.driver>
          <sonar.jdbc.username>root</sonar.jdbc.username>
          <sonar.jdbc.password></sonar.jdbc.password>
      </properties>
  </profile> 
```

我想知道是否有人也遇到过这个问题，如果有，您是如何解决的？

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-10T18:38:20.883

如果您不配置 Maven Sonar 插件，它将尝试连接到 Sonar 附带的嵌入式数据库的默认位置。从 3.2 版开始，默认的嵌入式数据库是 H2（替换 derby）。

论坛的建议是正确的，我怀疑您的 Maven 实例没有加载正确的设置文件。尝试按如下方式运行 Maven：

```
mvn -s /path/to/settings/file/setting.xml sonar:sonar 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-07-14T13:42:42.190

看到 settings.xml 和 sonar.properties 文件中的属性“sonar.jdbc.url”是相同的。其次，在您尝试运行声纳服务器之前，按名称“声纳”创建一个模式。祝你好运

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T20:20:02.590

也许您不小心将“配置文件”部分粘贴到了 settings.xml 中的错误位置？一定要把它放在`<profiles></profiles>`标签之间。（我的一个同事偶然发现了一个类似的问题）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-02T13:50:25.540

基于@Mark O'Connor 的回答：检查文件 settings.xml 是否在正确的路径中（/home/YOURUSER/.m2/ 或 MAVEN_HOME 环境变量）并且您从正确的用户运行它 - 当我运行 Sonar Maven Runner 时root 它不能设置 settings.xml 文件，因为我将它放在用户的主文件夹中。

# apache - 无法使用 tortoise svn 连接到 svn，但可以通过网络浏览器连接

> ID：12355056
> 
> 赞同：0
> 
> 时间：2012-09-10T15:43:26.420
> 
> 标签：apache, svn, mod-rewrite, mod-dav-svn

我将我的 svn 存储库配置为通过 apache 访问它。

我可以通过任何具有这些地址的网络浏览器访问它。

```
http://svn.domain.com
http://www.domain.com:3690 
```

但是，当我尝试在 Windows 上使用 tortoiseSVN 或在 linux 上使用命令行进行结帐时，第一个返回：“无法使用的 URI：它不引用此存储库”，第二个运行数小时并以超时错误结束。（我也试过 svn://domain.com 做同样的事情）

我读到 mod_rewrite 可以解决该问题，但除了删除 mod_rewrite 之外，我没有看到任何解决该问题的方法。

但我需要 mod_rewirte 用于此服务器上的网站。

问题是什么？

有没有办法同时运行 mod_dav_svn 和 mod_rewrite ？

**编辑**

虚拟主机 conf 文件如下所示：

```
<Directory /path/to/subdomain>
  DAV svn
  SVNPath /path/to/repos
  AuthType Basic
  AuthName "Repos Name"
  AuthUserFile /path/to/auth-user/file
  Require valid-user
</Directory> 
```

我将此添加到 httpd.conf 文件中：

```
Listen 3690
NameVirtualHost *:3690

<VirtualHost *:3690>
  ServerName svn.domain.com
  <Location />
    DAV svn
    AuthType Basic
    AuthName "Repos Name"
    AuthUserFile /path/to/auth-user/file
    SVNPath /path/to/repos
    Require valid-user
  </Location>
</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T17:31:42.220

好的，你为什么使用端口 3690 进行 HTTP？

Subversion 可以使用几种不同的协议来访问存储库。但是，您不能混合搭配。如果您使用 Apache HTTP 作为服务器，则只能使用 HTTP 协议：

```
$ svn co http://svn.domain.com/<srvrInst>/path/to/your/repository 
```

在 Apache 中，域之后通常是服务器实例，因为多个服务器实例可以连接到单个 Apache 实例。大多数时候，它只是*svn* ，尽管我见过使用*源代码*。这是在您的 Apache HTTP 配置中配置的。

基本上，您可以在 Web 浏览器中浏览的任何目录都应该允许您查看它。但是，如果你有一个例外`SVNListParentPath`。无法*签出*所有存储库的父目录。否则，您可以签出您可以浏览到的任何目录。

可以同时通过 svnserve 和 Apache http 为同一个存储库提供服务。如果这样做，您可以使用 Apache`http`协议或`svn`协议。

如果这不能解决您的问题，您必须向我们提供更多信息。例如，您的 Apache http 配置是什么样的。您可以浏览哪个 URL，但不能结帐？请记住，在 Subversion 下，您只能签出目录而不能签出文件。如果需要文件，可以使用`svn cat`文件并将输出重定向到文件。

* * *

> 虚拟主机 conf 文件如下所示：

```
<Directory /path/to/subdomain>
  DAV svn
  SVNPath /path/to/repos
  AuthType Basic
  AuthName "Repos Name"
  AuthUserFile /path/to/auth-user/file
  Require valid-user 
```

我相信你的问题是目录指令本身。假设指定您的存储库所在的域下的目录。通常，它只是类似`svn`or的东西`source`，所以你会这样做来结帐：`$ svn co http://svn.domain.com/svn/repo`or `$ svn co http://svn.domain.com/source/repo`。查看URL 中您的域名**后面的位置吗？**

我从未尝试过这样的多级目录。您是否希望人们指定`http://svn.domain.com/path/to/subdomain/repo`进行结帐？结帐 URL 已经很长了，所以我无法想象添加更多的目录。

您说您可以通过网络浏览器浏览存储库。如果是这种情况，您应该能够从 Web 浏览器中删除该 URL（只要它是目录而不是文件）并将其粘贴到 Tortoise 或 Subversion 命令行中。

顺便说一句，我看到你设置了 AuthUserFile。也许问题是您需要指定用户名和密码？暂时忽略在端口 3690 上侦听的虚拟主机。如果您真的想使用该端口，`svnserve`请在您的存储库服务器上运行，并让人们使用该`snv://`协议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T15:47:49.163

您无法检查域名，也无法更改协议并期望另一端的服务器突然开始使用该新协议。

您的网站正在向 SVN 服务器发出 SVN 请求，然后将请求格式化为 HTML。这意味着这`http://svn.domain.com`不是 SVN URL。你需要找出什么是 SVN URL，它*至少会包含一个*项目名称，就像这样`protocol://server/projectname`

mod_rewrite 是一个很好的工具，可以自动将一个 URL 重写为另一个；但是，如果您此时使用 mod_rewrite，您只会将您的 mod_dav_svn 配置问题隐藏在以编程方式重写您的 url 的层下。以这种方式修复它要困难得多，因为您在没有修复第一个问题的情况下引入了一个新问题（URL 重写是否损坏？）。

# mp3 - 如何流式传输 Rhapsody RAD/EA 音乐文件？

> ID：12355062
> 
> 赞同：1
> 
> 时间：2012-09-10T15:43:53.567
> 
> 标签：mp3, audio-streaming, aac, rhapsody

我正在编写一个与[Rhapsody 音乐服务](http://www.rhapsody.com/) [SDK](http://webservices.rhapsody.com/)交互的 iOS 应用程序。我被困在需要合并音乐文件的 RAD 和 EA 部分的地方。根据他们的文档：

> 返回曲目播放信息后，您现在可以开始检索 Rhapsody 音频数据。首先，将从 getTrackPlaybackInfos 方法返回的媒体 URL 属性加载到您的客户端中。大多数允许流式传输的 Rhapsody 格式都需要 Rhapsody 使用的称为 RAD/EA 的安全方法。RAD/EA 安全模型允许通过 HTTP 立即下载大部分曲目（称为音频的 RAD 部分）。然后客户端每 30 秒下载文件的一小部分加密部分（称为文件的 EA 部分）以构成整个音乐文件。
> 
> 如果媒体 URL 包含 RAD，则调用 getEA 方法以获取基本音频 (EA)。使用从 cal 返回到 getTrackPlaybackInfos 的会话标识符、RAD 版本（3，除非您的 Rhapsody Direct 代表另有说明）、格式和比特率。您必须多次调用 getEA 方法才能播放整个音轨。position 参数包含 EA 块中开始检索音频数据的偏移量，count 参数包含要返回的实际字节数。例如，在第一次调用 getEA 时，您可以将 position 参数设置为 0，并将 count 参数设置为 4096。这将返回从轨道开头开始的 4096 字节的音频数据。在第二次获得 EA 时，

我可以很容易地找到 RAD 文件。但我不清楚的是如何将 RAD 和 EA 文件重新组合成可流式传输/可播放的媒体文件？我认为这是谷歌第一次让我失望。我什至找不到有关如何进行的提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T23:18:03.730

1.  关于 RAD/EA：在 Rhapsody 网站上，有一些示例如何从输入的 RAD 和 EA 文件中获取可播放的音乐文件（Java 和 C++ 中的示例）

2.  RAD文件我们可以直接下载

3.  EA 文件的问题 - 如何创建它？在文档中写到我们需要每 30 秒调用一次 getEA 方法，但接下来的问题出现在这里：

    *   如何从从 WS getEA 方法字节接收到的 EA 文件（据我了解应该具有带有特殊文件头的特殊结构）？
    *   如果我们需要每 30 秒调用一次 getEA 方法来解码 RAD 文件，如何处理离线模式？

如果您有什么要补充的 - 请随时...我会很高兴有任何新信息。

**解决方案：**

1.  下载 RAD 文件。

2.  调用 getEA - 我们在这里得到一些 ASCII 码的数组。请在此处查看如何将其转换为 Java 中的字节数组：[ASCII 代码 => 字符串](https://stackoverflow.com/questions/14438003/ascii-codes-string-of-characters/14438072#14438072)

3.  ```
     RadStream rs = new RadStream(getRadSource());
            Log.e(TAG, "" + rs.getHeader());

            EaStream es = new EaStream(getEaSource());
            Log.e(TAG, "" + es.getHeader());

            RadEaStream radea = new RadEaStream(rs, es);

            int counter = 0;
            FileOutputStream out = new FileOutputStream(fileWMA);
            for (int c = radea.read(); c >= 0; c = radea.read()) {
                out.write(c);
                counter += 1;
            }
            out.close(); 
    ```

对我来说它有效。

# javascript - Javascript以不同方式声明数字？

> ID：12355063
> 
> 赞同：10
> 
> 时间：2012-09-10T15:43:55.703
> 
> 标签：javascript

```
var a = 1;
var b = Number(1);
var c = new Number(1); 
```

我想知道这三个陈述之间有什么区别。我知道第一个和第二个语句是一样的，就像`if(a===b)`给了一样`true`，但是**第三个语句会创建一个**number 类型的对象。

我想知道的是这些方法有何不同，其中一种方法会比另一种方法有什么优势？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-10T15:48:00.363

像这样的值`1`是原语，而不是对象。JavaScript 通常会`Number`在必要时将数字提升为对象。很少有理由明确地构建一个，当然也没有特别的“优势”。`Number(1)`尽管`Number`构造函数是将值强制为数字的几种方法之一，但也没有类似的理由。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T15:58:32.477

In short, non: the `new String()` and `new Number()` constructors are to be ignored if you want to save yourself a world of trouble.
The first two methods you present here assign a numeric constant to the variable, the third way -as you say- creates an object. The value of that object will be `1`, but you can change that value without loosing any specific methods you set to the object.

There aren't very many advantages to storing numbers or strings in objects. AFAIK, the only thing you *"gain"* is a very, very, very slight performance difference over the constants when invoking certain methods, like `toExponential` etc...
In my view, that isn't worth the trouble of creating objects for all numbers you're bound to use. I think of it as one of the *bad parts* of JS, meant to make the language look familiar to Java Applet developers.

The second, without the new keyword, allows you to sort-of-type-cast: `Number(document.getElementById('formElem').value) === 123;` and has its uses (mainly with Date objects, in my experience). But then again, converting to a number can be achieved using the `+` operator, too: `+document.getElementById('formElem').value) === 123`

On the whole, just stay well clear of these primitive constructors. The only reason they're still there is because they're objects, and therefore have prototypes. Now **THAT** is an advantage:

```
Number.prototype.addOneToString = function()
{
    return (1+this).toString();
};
String.prototype.UpperFirst = function()
{
    return this.charAt(0).toUpperCase() + this.slice(1);
}
var foo = new Number(3);
foo.addOneToString();//returns "4"
foo = new String('foo');
foo.UpperFirst();//Foo 
```

Since JS wraps constant operands in an instance of its object counterpart, when the statement requires it, you can apply prototype methods (either native or self-made ones) to any constant. (Thanks to Pointy for this, and +1)

```
(3).addOneToString();//"4"
'foo'.UpperFirst();//Foo 
```

So just regard them as legacy quirks, that are still there because of their prototypes.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-20T06:54:44.683

在 ES12 及之后，您可以使用以下方式来声明大数。

```
const oneMillion = 1_000_000;

var oneMillion1 = 1_000_000; 
```

您可以使用分隔符`_`，以提高可读性

# asp.net-mvc - jquery mvc 模态按钮以访问发布操作

> ID：12355068
> 
> 赞同：0
> 
> 时间：2012-09-10T15:44:05.977
> 
> 标签：asp.net-mvc, jquery-ui, modal-dialog, asp.net-mvc-ajax

我有这个模态对话框弹出窗口，其中有 2 个按钮。一个是取消，另一个是接受。我希望接受按钮调用 POST 操作。

```
$(document).ready(function () {
        $('.toscontainer').dialog({
            autoOpen: true,
            draggable: false,
            width: 700,
            height: 500,
            modal: true,
            resizable: false,
            title: "Terms Of Service",
            buttons: {
                "Accept": function () {
                    console.log('accept');
                    $.post({
                        type: "POST",
                        url: '/User/TermsOfService/'
                    });
                },
                "Decline": function () {
                    $('.accept').dialog('close');
                }
            }
        });
    }); 
```

我一直在使用上面的代码，但它给了我一个

> NetworkError: 404 Not Found - http : // somethinghost:999 /User/%5Bobject%20Object%5D

我不确定我做错了什么......

此外，在操作中，我需要一个“真”或“假”的值。从该按钮传递它的最佳方法是什么？

我有这样的东西

```
public ActionResult User(bool accept){
   // process
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T15:53:22.893

尝试使用 ajax 调用而不是 post：

```
$.ajax({
    type: 'POST',
    url:  '/User/TermsOfService/',
    data: $("form#identifier").serialize(),
    error: function(e) {
        console.log(e.responseText);
    },
    success: function(result) {
        console.log(result);
    }
}); 
```

# android - 无法从偏好活动中获取偏好

> ID：12355070
> 
> 赞同：0
> 
> 时间：2012-09-10T15:44:15.530
> 
> 标签：android, preference

主要活动

```
 @Override public void onCreate() {
        super.onCreate();
        SharedPreferences settings = PreferenceManager.getDefaultSharedPreferences(this);
         boolean checked = settings.getBoolean("test", false);

    } 
```

首选项.xml

```
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android"
        android:title="@string/settings">
    <CheckBoxPreference android:key="test" android:title="test" android:defaultValue="false"/>
</PreferenceScreen> 
```

环境

```
import android.os.Bundle;
import android.preference.PreferenceActivity;

public class Setting extends PreferenceActivity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        addPreferencesFromResource(R.xml.preferences);
    }

} 
```

尽管我勾选了复选框，但检查的结果总是错误的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T16:18:29.240

如果我们为 'CheckBoxPreference' 设置 'android:persistent="true"'，那么我们可以看到下次调用 'onCreate' 时值发生了变化。

# java - 无法从布局文件夹中引用布局

> ID：12355079
> 
> 赞同：0
> 
> 时间：2012-09-10T15:44:48.480
> 
> 标签：java, android, xml, android-layout

我在布局文件夹中有一个名为“activity_qrtest”的布局。当我尝试在类中引用此布局时，如下所示：

```
setContentView(R.layout.activity_qrtest); 
```

eclipse 用红色突出显示布局名称“activity_qrtest”，这意味着它不可用。

控制台输出：

```
[2012-09-10 17:15:15 - QRTest] ERROR: resource directory 'D:\workspaceQR\QRTest\res'  
does not exist 
[2012-09-10 17:26:48 - QRTest] 'default' is not a best match for any device/locale  
combination.
[2012-09-10 17:26:48 - QRTest] Displaying it with 'Locale Language ___Region __,  
sw320dp, w320dp, h533dp, Normal Screen, Long screen aspect ratio, Portrait   
Orientation, High Density, Finger-based touchscreen, Soft keyboard, No keyboard,  
Exposed navigation, Trackball navigation, Screen resolution 800x480, API Level 16'   
which is compatible, but will actually be displayed with another more specific   
version of the layout.
[2012-09-10 17:28:41 - QRTest] AndroidManifest.xml file missing! 
```

解决此类问题的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T15:46:18.510

`activity_qrtest.xml`如果您的文件中有任何错误，请检查控制台视图。很可能您的 xml 不正确。另外，试试`Project|Clean`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T16:18:13.673

确保在活动中导入 YourApplication.R 而不是 Android.R，它们有时会混淆。

另外，您确定从正确的上下文/活动中调用 setContentView 吗？有时这样称呼它会有所帮助（我现在无法测试它，但我的记忆告诉我它是这样工作的）：

```
((Activity)getApplicationContext()).setContentView(R.layout.mylayout); 
```

# c# - C# - Encoding.ASCII.GetString() 返回“??” 而不是实际的字符串，为什么？

> ID：12355084
> 
> 赞同：2
> 
> 时间：2012-09-10T15:45:02.060
> 
> 标签：c#

这是我的一段代码（文件是一种`HttpPostedFileBase`类型）：

```
var imageStream = file.InputStream;
var header = new Byte[4];
imageStream.Read(header, 0, header.Length); 
```

现在，当我的代码运行时，我放置一个断点，并在我的即时窗口中检查值：

```
header
{byte[4]}
    [0]: 255
    [1]: 216
    [2]: 255
    [3]: 224 
```

但是，当我想将此字节数组转换为 ASCII 字符串时，我得到了这个（立即窗口获得的值）：

```
Encoding.ASCII.GetString(header)
"????"
Encoding.ASCII.GetString(header, 0, 2)
"??" 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T15:46:25.717

127 以上的字符不能表示为 ASCII（这是一种 7 位编码），因此会转换为`?`.

你想达到什么目的？还有许多其他编码可能更适合您尝试做的事情 - 或者根本没有编码。理解 char 不等同于 byte 很重要。

如果标头是“固定”的 4 字节序列，请不要使用字符，而是直接使用字节（或整数表示 - 请参阅 BitConverter 类将字节数组转换为其他内容）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-10T15:47:08.713

ASCII 字符代码在 0 到 127 的范围内。您的数据超出了该范围。因此，将数据解释为 ASCII 的尝试失败了。`?`字符用于表示无法解码的字符。

前 4 个字节（十六进制）是

```
FF D8 FF E0 
```

[这是JPEG 文件](http://www.mikekunz.com/image_file_header.html)的标题。

因此，将这些字节转换为字符串并不是合适的做法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T15:48:21.427

这是因为这些字符无法使用 ASCII 打印 - 请尝试使用`Encoding.UTF8.GetString(header)`。

编辑：由于盲目地使用 UTF8 似乎不合适，您也许可以尝试以下方法：- `Request.ContentEncoding.GetString(header)`应该使用请求中配置的编码。

# c# - tesseract useROI 方法有什么用？

> ID：12355086
> 
> 赞同：0
> 
> 时间：2012-09-10T15:45:10.350
> 
> 标签：c#, methods, ocr, tesseract

是否有 tesseract dotnetwrapper 的文档？就像一个java doc之类的？我试图了解这种 useROI 方法的作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T00:13:07.590

您可以查看其[Wiki](http://code.google.com/p/tesseractdotnet/wiki/tesseract_engine_v3_01r590_dotnet_wrapper)页面。UseROI 指定要识别的图像上的感兴趣区域。

# c# - WPF MVVM DataBindings 停止更新

> ID：12355087
> 
> 赞同：20
> 
> 时间：2012-09-10T15:45:22.253
> 
> 标签：c#, wpf, data-binding, mvvm, inotifypropertychanged

我正在开发一个利用 MVVM 模式的中型 WPF 应用程序。ViewModel 用于`INotifyPropertyChanged`刷新它们各自的 View。

这种方法非常有效，除了一个问题：当这个应用程序长时间运行（3-7 天）时，视图（整个应用程序中的每个视图！）突然停止更新它们的绑定属性。

如果我在 ViewModels 中设置断点，它们就会愉快地离开，`PropertyChanged`就像什么都没有错一样调用。但是，如果我在 View 绑定到的 ViewModel 对象之一的 getter 中设置断点，则永远不会调用 getter！

在这一点上我很难过，甚至不知道如何正确调试这个问题。我检查了 Visual Studio 输出窗口中的数据绑定错误，但一切看起来都很正常。就好像 WPF 数据绑定引擎在后台崩溃了一样。此应用程序还在监视未处理的异常 (`AppDomain.UnhandledException`和`Dispatcher.UnhandledException`)，但没有抛出异常。

**总结：经过很长一段时间，视图停止更新其数据绑定，但视图模型仍在调用 PropertyChanged 事件。**

有什么建议？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T19:33:13.953

After several months of debugging, I was finally able to solve the issue by attaching a debugger to the remote target. Only then did it produce an exception that I could debug. I still do not understand why AppDomain.UnhandledException and Dispatcher.UnhandledException did not catch this exception, but at least I was able to figure it out.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T18:04:03.953

您可能会成为过度热心的弱引用的受害者。您的 MVVM 框架可能有一个修复程序。如果没有，此信息可能会帮助您在源代码中找到问题。

在 INotifyPropertyChanged 的​​大多数实现中都存在已知的内存泄漏。视图模型对 XAML 控件的 PropertyChanged 处理程序的委托进行硬引用。该委托反过来对 XAML 控件进行硬引用。因此，只要视图模型存在，就无法收集控件。

所以为了解决这个问题，许多 MVVM 框架[对事件使用弱引用](http://blog.tonysneed.com/2011/03/22/building-a-leak-proof-eventing-model/)。虽然这可以修复内存泄漏，但它也可能导致您看到的问题。如果弱事件未正确实现，则可能在实际收集 XAML 控件之前将其删除。

我怀疑您正在使用带有弱引用的 MVVM 框架，并且它们被过早地处理掉了。要查看这是否是一个可能的问题，请调用 GC.Collect() 并查看问题是否更频繁地发生。

# jetty - Jetty-Hightide 7 或 8 是否有 debian 发行版？

> ID：12355088
> 
> 赞同：1
> 
> 时间：2012-09-10T15:45:22.847
> 
> 标签：jetty

我想在我的 Ubuntu 服务器上轻松安装 Jetty 并让它监听端口 80，但我不希望 webapp JVM 以 root 身份运行。我看到了另一个问题，它指出了 Jetty-Hightide 如何已经设置为使用 SetUID 功能，但我希望能够将它作为 deb 包而不是 tarball 文件下载（http://stackoverflow.com/questions /9640533/running-jetty-on-port80-as-non-root-user)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T21:42:58.407

[http://central.maven.org/maven2/org/mortbay/jetty/dist/jetty-deb/](http://central.maven.org/maven2/org/mortbay/jetty/dist/jetty-deb/)

这些debs是基于高潮

# vim - 是否可以在 Vim 中确定视觉选择的方向？

> ID：12355096
> 
> 赞同：4
> 
> 时间：2012-09-10T15:45:49.653
> 
> 标签：vim

在 Vim 中，我想直观地选择一些行，然后将注释掉的选择的副本粘贴到原始选择的上方或下方，具体取决于视觉选择是向上还是向下创建的。因此，如果我在第 100 行开始视觉模式并将光标向上移动 10 行，这将是一个向上的视觉选择，而如果我从第 100 行开始并将光标向下移动 10 行，它将是一个向下的选择。`line("'<")`并且`line("'>")`在两种情况下都是相同的，所以看起来 Vim 总是选择较小的数字作为选择的开始。有没有办法确定视觉选择是向上还是向下？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T15:57:59.273

当（在您的映射/命令中）您第一次通过 退出可视模式时`<Esc>`，您可以将光标 ( `line('.')`) 的位置/行与`'<`和`'>`标记进行比较。然后只需使用标记（即使离开视觉模式，它们也会保留它们的值），或者通过`:normal! gv`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T16:03:51.683

您可以在开始选择之前打一个标记，在您离开选择时再打一个：

```
ma
V
jjj
<Esc>
mb 
```

然后看看是否`line("'a") < line("'b")`。

# java - 跨不同线程调用 c>java

> ID：12355098
> 
> 赞同：2
> 
> 时间：2012-09-10T15:45:56.887
> 
> 标签：java, android, android-ndk, java-native-interface

我正在尝试从 c>java 调用以打开 URL（即启动 Web 浏览器）。我有在java中工作的代码来启动url（这是我主要活动的一种方法）。当我刚刚在同一个线程上进行调用时它正在工作，但是，因为我已经从另一个线程进行了调用，所以它已经坏了。

我收到以下错误： http: [//pastie.org/4696174](http://pastie.org/4696174)

```
09-10 15:59:49.405: W/dalvikvm(31430): JNI WARNING: threadid=11 using env from threadid=1
09-10 15:59:49.405: E/dalvikvm(31430): JNI ERROR: env->self != thread-self (0x12988 vs. 0x200fb0); auto-correcting
09-10 15:59:49.405: W/dalvikvm(31430): JNI WARNING: threadid=11 using env from threadid=1
09-10 15:59:49.405: W/dalvikvm(31430): JNI WARNING: 0x41578910 is not a valid JNI reference
09-10 15:59:49.405: W/dalvikvm(31430):              in Lcom/mrqwak/app/AppRenderer;.onDrawFrameN:()V (CallVoidMethodV)
09-10 15:59:49.415: I/dalvikvm(31430): "GLThread 876" prio=5 tid=11 RUNNABLE
09-10 15:59:49.415: I/dalvikvm(31430):   | group="main" sCount=0 dsCount=0 obj=0x4157b270 self=0x200fb0
09-10 15:59:49.415: I/dalvikvm(31430):   | sysTid=31443 nice=0 sched=0/0 cgrp=default handle=1986128
09-10 15:59:49.420: I/dalvikvm(31430):   | schedstat=( 1035202257 457143963 4029 ) utm=80 stm=23 core=0
09-10 15:59:49.420: I/dalvikvm(31430):   at com.mrqwak.app.AppRenderer.onDrawFrameN(Native Method)
09-10 15:59:49.420: I/dalvikvm(31430):   at com.mrqwak.app.AppRenderer.onDrawFrame(AppActivity.java:289)
09-10 15:59:49.425: I/dalvikvm(31430):   at android.opengl.GLSurfaceView$GLThread.guardedRun(GLSurfaceView.java:1462)
09-10 15:59:49.425: I/dalvikvm(31430):   at android.opengl.GLSurfaceView$GLThread.run(GLSurfaceView.java:1216)
09-10 15:59:49.425: E/dalvikvm(31430): VM aborting
09-10 15:59:49.430: A/libc(31430): Fatal signal 11 (SIGSEGV) at 0xdeadd00d (code=1) 
```

这是我的 c 代码： http: [//pastie.org/4696207](http://pastie.org/4696207)

我在主 UI 线程上从 c>java 调用它，因为创建了主要活动：

```
JNIEnv*     g_envApp            =   0;
jobject     g_objApp            =   0;
jclass      g_classApp          =   0;
jmethodID   g_methodOpenURL     =   0;

JNIEXPORT void JNICALL Java_com_mrqwak_app_AppActivity_onCreateN(JNIEnv *env, jobject obj)
{
    g_envApp = env;
    g_objApp = obj;
    g_classApp = env->GetObjectClass(obj);
    if (g_classApp)
    {
        g_methodOpenURL = env->GetMethodID(g_classApp,"openURL","(Ljava/lang/String;)V");
    }
} 
```

我稍后从 c>java 调用它，而不是在主 UI thead 上，当用户按下按钮打开一个 url 时：

```
extern  JNIEnv*     g_envApp;
extern  jobject     g_objApp;
extern  jclass      g_classApp;
extern  jmethodID   g_methodOpenURL;

void cHTTP::OpenURL(const char* psURL)
{
    if (g_methodOpenURL)
    {
        jstring jstr = g_envApp->NewStringUTF(psURL);
        g_envApp->CallVoidMethod(g_objApp,g_methodOpenURL,jstr);
    }
} 
```

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T16:56:57.777

我相信您需要附加到 UI 线程 - jobjects 不能跨线程共享 - 效果如下：

```
JNIEnv *env;
jvm->AttachCurrentThread(&env, 0);
jmethodID mid = env->GetMethodID(g_classApp, "openURL", "(Ljava/lang/string)V");
env->CallVoidMethod(g_objApp, mid, url); 
```

在您第一次调用 JNI（设置其他变量）时，添加一个 jvm 对象：

```
JavaVM  *jvm;
...
env->GetJavaVM(&jvm); 
```

# c# - 表单提交后从查询字符串中删除项目

> ID：12355100
> 
> 赞同：0
> 
> 时间：2012-09-10T15:46:03.660
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

我有一个搜索表单，其中包含一些`Type your search phrase here`当前作为查询字符串参数发送的默认文本 - 生成的 URL 如下所示：

```
/search?KeyWords=Type+your+search+phrase+here 
```

但是我想将它从查询字符串中完全删除。

我应该在什么时候删除它？我的意思是，我可以在控制器中检查字符串是否匹配，而不是将其用作搜索的关键字，但它仍然存在于 URL 中，理想情况下我希望将其完全删除，以免造成任何混淆（另外，在 URL 中使用默认短语看起来很糟糕！）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T16:54:46.243

为文本输入字段设置默认值的语义正确方法是使用 HTML5[占位符](http://davidwalsh.name/html5-placeholder)属性而不是设置该`value`属性：

```
@Html.TextBoxFor(x => x.Foo, new { placeholder = "Type your search phrase here" }) 
```

在这种情况下，提交表单时不会发送默认值。

如果您需要支持旧版浏览器，您可以使用[jquery.placeholder 插件](https://github.com/danielstocks/jQuery-Placeholder)，该插件将不显眼地启用对它的支持。

# algorithm - 半边数据结构 delaunay 三角剖分

> ID：12355101
> 
> 赞同：1
> 
> 时间：2012-09-10T15:46:04.623
> 
> 标签：algorithm, data-structures, geometry, mesh, delaunay

我正在用半边数据结构编写 Python delaunay 三角剖分。

此外，在三角测量算法中，我尝试只存储半边。我从边列表中检索三角形。

但是，这很多余，对吧？我有比描述三角形所需的更多的边，因为一个三角形由一个边定义，并且可以轻松通过，因为每个边都有指向下一个的指针。

1/ 是否可以为 delaunay 实现仅存储半边列表的 Watson 算法？以后会不会很难走过去？

在 Watson 确定腔内边缘的算法步骤中，我想在边缘上行走并找到位于三个以上不同半边末端的边缘顶点。

2/ 这个属性“多于两条边在这个顶点处结束”是否是在 Bowyer Watson 算法中丢弃边的正确标准？

为了穿过网格，我会在每个半边上进行迭代。所以，我是一个接一个地工作，而不是一个接一个三角形的工作。我在不使用“下一个”属性的情况下穿过网格，这听起来不太好。

3/ 遍历网格中的三角形的方式是什么，存储为边列表？或者如何更好地存储网格以便更轻松地通过它？

谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-14T12:23:09.223

半边数据结构很好！使用面列表和边列表，这可能就足够了。

# objective-c - 自定义 UItabBarItem（所选项目的背景图片）

> ID：12355102
> 
> 赞同：-1
> 
> 时间：2012-09-10T15:46:06.997
> 
> 标签：objective-c, ios

我想为每个 tabBarItem 实现一个像这张图片一样的 UItabBar，并选择不同的图片。这在 iOS 上可行吗？谢谢

![在此处输入图像描述](../Images/4eed814ca1db99970d7f43b8f5ac6769.png)

![在此处输入图像描述](../Images/4dd196889a2fe79d4f929635c010fa27.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T16:02:19.237

是的，通过设置图像

UITabBarItem 初始化程序 initWithTitle:image:tag;

和颜色通过：

```
[[UITabBar appearance] setSelectedImageTintColor:[UIColor greenColor]]; 
```

尽管您需要指定确切的颜色以满足您的喜好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T15:51:53.173

这可以通过编程方式使用 tabBarItem.image 属性在调用 viewDidLoad 时更改图像。

# asp.net - 在 ASP.NET 4 中找不到配置文件属性

> ID：12355105
> 
> 赞同：2
> 
> 时间：2012-09-10T15:46:12.443
> 
> 标签：asp.net, asp.net-4.0, asp.net-profiles

我正在使用 ASP.NET 4 开箱即用的表单身份验证方法。我想向用户的配置文件添加一些自定义属性，因此我将以下代码添加到我的`web.config`文件中：

```
<profile enabled="true">

  <providers>
    <clear/>
    <add name="AspNetSqlProfileProvider" 
         type="System.Web.Profile.SqlProfileProvider" 
         connectionStringName="ApplicationServices" 
         applicationName="/"/>
  </providers> 

  <properties>        
    <add name="DisplayName"/>
    <add name="PhoneNumber"/>
    <add name="FaxNumber"/>
    <add name="Email"/>
  </properties>

</profile> 
```

但是，当我尝试使用以下内容访问 aspx 文件中的任何这些属性时：

```
TextBox.Text = Profile.DisplayName; 
```

我在下面看到一条红线`DisplayName`，上面写着`ProjectName.Profile does not contain a definition for DisplayName`。

我现在已经在网上搜索了几个小时，但我一无所知。有想法该怎么解决这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T16:23:31.400

尝试在配置文件节点上设置 defaultProvider 属性

```
<profile defaultProvider="AspNetSqlProfileProvider"> 
```

我假设您还定义了为提供程序工作的成员资格部分和连接字符串，对吗？

如果没有，您可能需要

```
<membership defaultProvider="SqlProvider" 
      userIsOnlineTimeWindow="15">
      <providers>
        <clear/>
        <add name="SqlProvider" 
          type="System.Web.Security.SqlMembershipProvider" 
          connectionStringName="SqlServices"
          applicationName="SampleApplication"
          enablePasswordRetrieval="true"
          enablePasswordReset="true"
          passwordFormat="Encrypted"
          requiresQuestionAndAnswer="true" />
      </providers>
    </membership>

 <connectionStrings>
    <add name="SqlServices" connectionString=
      "Data Source=localhost;Integrated Security=SSPI;Initial Catalog=aspnetdb;" />
  </connectionStrings> 
```

其余的配置看起来没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T19:58:35.517

嗯，我找到了！

看起来“Web 应用程序”和“网站”之间的区别之一是它处理配置文件的方式。网站能够读取 web.config 文件并动态创建配置文件类，而 Web 应用程序则不能。据我了解，如果使用 Web 应用程序项目，应该创建一个自定义配置文件类。

更多信息可以在这里找到：http: [//www.codersbarn.com/post/2008/06/aspnet-web-site-versus-web-application-project.aspx](http://www.codersbarn.com/post/2008/06/aspnet-web-site-versus-web-application-project.aspx)

# hadoop - Mahout 0.7 和 cdh4

> ID：12355106
> 
> 赞同：0
> 
> 时间：2012-09-10T15:46:13.377
> 
> 标签：hadoop, mahout

我通过 ssh 与安装了 hadoop-2.0.0-mr1-cdh4.0.0 版本的 hadoop 集群连接。有没有办法构建 mahout 0.7 以便它可以与这个版本的 hadoop 兼容？

编辑：由于肖恩的回答，我添加了一些东西

我已经更改了 pom.xml 文件，但我得到了这个：

```
[ERROR] BUILD ERROR
[INFO] ------------------------------------------------------------------------
[INFO] Failed to resolve artifact.
missing:
1) org.apache.hadoop:hadoop-core:jar:2.0.0-mr1-cdh4.0.0
Try downloading the file manually from the project website.
Then, install it using the command: 
  mvn install:install-file -DgroupId=org.apache.hadoop -DartifactId=hadoop-core 
  -Dversion=2.0.0-mr1-cdh4.0.0 -Dpackaging=jar -Dfile=/path/to/file
Alternatively, if you host your own repository you can deploy the file there: 
  mvn deploy:deploy-file -DgroupId=org.apache.hadoop -DartifactId=hadoop-core 
  -Dversion=2.0.0-mr1-cdh4.0.0 -Dpackaging=jar -Dfile=/path/to/file -Durl=[url] 
  -DrepositoryId=   [id]
Path to dependency: 
1) org.apache.mahout:mahout-core:jar:0.7
2) org.apache.hadoop:hadoop-core:jar:2.0.0-mr1-cdh4.0.0
1 required artifact is missing.
for artifact: 
org.apache.mahout:mahout-core:jar:0.7
from the specified remote repositories:
apache.snapshots (http://repository.apache.org/snapshots),
central (http://repo1.maven.org/maven2) 
```

所以我已经下载了jar文件并成功构建了它。如何从 pom.xml 中排除 hadoop 以构建其他依赖项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T16:36:45.370

您可以简单地将项目在 Maven 中的依赖关系更改为依赖于 2.0.x 工件，然后`mvn package`再一次。

我不知道它是否会编译兼容，因为该项目既有`.mapred.`可能不再受支持的 Hadoop 0.19.x 时代代码`.mapreduce.`（ .

不知道它是否真的适用于 Hadoop 2.0.x。

# jsf - 素面无法获取值

> ID：12355111
> 
> 赞同：-2
> 
> 时间：2012-09-10T15:46:29.257
> 
> 标签：jsf, jpa, primefaces

当我按下此按钮时，该`test()`方法无法打印任何值。并且`System.out.println(person);`总是在中打印空`handleCityChange()`，并且边框显示为红色，右上角跳出值无效的信息。我该如何解决？谢谢大家。

索引.xhtml

```
<h:body>
  <h:form>
    <p:fieldset legend="Modify" toggleable="true" toggleSpeed="200" collapsed="true">
       <h:panelGrid columns="2" cellpadding="10" id="modify_change">
          <h:outputLabel value="Department :"/> 
          <p:selectOneMenu id="modify" value="#{modify.department}" style="width: 150px">
             <f:selectItem itemLabel="Choose Department" itemValue=""/>
             <f:selectItems value="#{modify.departments}" />
             <p:ajax update="modify_delete" listener="#{modify.handleCityChange()}" />
          </p:selectOneMenu>
       <h:outputLabel value="Choose Employee" />
          <p:selectOneMenu id="modify_delete" value="#{modify.person}" style="width: 150px">
             <f:selectItem itemLabel="Choose Employee" itemValue=""/>
             <f:selectItems value="#{modify.persons}" />
          </p:selectOneMenu>
       </h:panelGrid>
       <h:commandButton value="Go to Modify !" actionListener="#{modify.test()}"/>
    </p:fieldset>
  </h:form>
</h:body> 
```

Java 代码

```
@ManagedBean
@SessionScoped
public class modify {

  EntityManagerFactory emf = Persistence.createEntityManagerFactory("com.mycompany_SuneCoolingSystem_war_1.0-SNAPSHOTPU");
  EmployeeJpaController jpaController = new EmployeeJpaController(null, emf);
  EntityManager e = jpaController.getEntityManager();
  private Map<String, String> departments = new HashMap<String, String>();
  private Map<String, String> persons = new HashMap<String, String>();
  private Map<String, Map<String, String>> allocatoin = new HashMap<String, Map<String, String>>();
  private String department;
  private String person;

  public modify() {
    Query q = e.createNamedQuery("Employee.findAll");
    List resultList = q.getResultList();
    for (int i = 0; i < resultList.size(); i++) {
        Employee result = (Employee) resultList.get(i);
        departments.put(result.getDepartment(), result.getDepartment());
    }
    q = e.createNamedQuery("Employee.findByDepartment");
    q.setParameter("department", department);
    resultList = q.getResultList();
  }

  public void handleCityChange() {
    if (department != null && !department.equals("")) {
        Query q = e.createNamedQuery("Employee.findByDepartment");
        q.setParameter("department", department);
        List resultList = q.getResultList();
        persons.clear();
        for (int j = 0; j < resultList.size(); j++) {
            Employee result = (Employee) resultList.get(j);
            persons.put(result.getName(), result.getName());
        }
    } else {
        persons = new HashMap<String, String>();
    }
    System.out.println(departments);
    System.out.println(department);
    System.out.println(persons);
    System.out.println(person);
  }
  public void test() {
    System.out.println(departments);
    System.out.println(department);
    System.out.println(persons);
    System.out.println(person);
  }

         //getter() and setter()
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T14:34:04.597

你做错了几件事：

1.  `person` **永远不会被设置！**. 因此它始终为null，当`getPerson()`被调用时它会返回null，就这么简单。
2.  您正在使用`SessionScoped`bean，我认为您应该使用`ViewScoped`bean。有关更多解释，请参阅[此问题](https://stackoverflow.com/questions/7031885/)。
3.  您正在使用`Map<String, String>`应该使用 a`List<String>`或任何其他`Collection`. `Map`s 用于键值对。
4.  为什么要查询一组`Employee`s 然后遍历它来获取它们的 s `Department`？为什么不查询`Department`s 的列表？像`select e.department from Employee e`什么？
5.  构造函数的最后一部分无效。The`Query` `q`不再使用，就像 the 一样`resultlist`，并且属性`department`为空。

    ```
    q = e.createNamedQuery("Employee.findByDepartment");
    q.setParameter("department", department);
    resultList = q.getResultList(); 
    ```

6.  您在支持 bean 中使用持久性/数据库的东西。这通常是非常糟糕的做法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T15:54:37.683

改变（actionListener > action）：

```
<h:commandButton value="Go to Modify !" actionListener="#{modify.test()}"/> 
```

至：

```
<h:commandButton value="Go to Modify !" action="#{modify.test()}"/> 
```

并将所有投入`<h:form></h:form>`

问候，

# java - ColdFusion 和 JSoup - 找不到 addTags 方法错误

> ID：12355115
> 
> 赞同：4
> 
> 时间：2012-09-10T15:46:31.033
> 
> 标签：java, coldfusion, jsoup

我正在尝试将 JSoup 与 ColdFusion 一起使用来清理一些 HTML，但遇到以下错误：

> *未找到 addTags 方法。要么没有具有指定方法名称和参数类型的方法，要么 addTags 方法被 ColdFusion 无法可靠破译的参数类型重载。ColdFusion 找到 0 个与提供的参数匹配的方法。如果这是一个 Java 对象并且您验证了该方法存在，请使用 javacast 函数来减少歧义。*

我的代码如下：

```
<cfset jsoup = createObject('java','org.jsoup.Jsoup')>
<cfset Whitelist = createObject("java", "org.jsoup.safety.Whitelist")>

<cfset parsedhtml = jsoup.parse(form.contentrichtext)> 
<cfset post = parsedhtml.body().html()>
<cfset post = jsoup.clean(post, Whitelist.none().addTags("span"))> 
```

我已经转储了 Whitelist 对象，并且存在 add Tags 方法。如果我删除 addTags() 方法并使用标准 JSoup 白名单之一，例如 basic()、none() 或 Relax()，则代码运行完美。据我从其他在线示例中可以看出，这是使用 addTags() 方法的正确语法。

我对在 ColdFusion 中使用 Java 对象还很陌生，所以这让我很困惑。

任何帮助将不胜感激。

谢谢，迈克尔。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T16:37:18.247

该`addTags`方法需要一个字符串数组，而不仅仅是一个字符串。首先将值放入数组中：

```
<!--- create a CF array then cast it as type string[] --->  
<cfset tagArray = javacast("string[]", ["span"]) >
<cfset post = jsoup.clean(post, Whitelist.none().addTags( tagArray ))> 
```

**编辑：**

> 据我从其他在线示例中可以看出，这是正确的语法

澄清一下，这*是*正确的语法 - 对于 java.util. 在 java 中，您可以使用数组或以下语法传入[可变数量的参数](http://docs.oracle.com/javase/1.5.0/docs/guide/language/varargs.html)`addTags("tag1", "tag2", ...)`： . 但是，CF 只支持数组语法。所以如果你cfdump这个java对象，你会在类名后面看到方括号，这表明参数是一个数组：

```
 method:  addTags( java.lang.String[] )  // array of strings 
```

# c++ - 哪些标准允许 C 和 C++ 中的匿名结构和联合？

> ID：12355118
> 
> 赞同：7
> 
> 时间：2012-09-10T15:46:36.623
> 
> 标签：c++, c, struct, anonymous, unions

我们在哪里可以使用匿名结构和联合？

```
struct
{
    int bar;
}; // anonymous struct

union
{
    int bar;
}; // anonymous union 
```

我认为我们可以按照以下标准做到这一点：

*   联合 - C++98、C++03、C++11、C11

*   结构 - C11

我对不对

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T15:53:42.693

关于 C 的陈述是正确的：匿名结构和联合的标准化是相当新的（C11）[cfr。海湾合作委员会人](http://gcc.gnu.org/onlinedocs/gcc/Unnamed-Fields.html)。

请注意，您首选的编译器可以启用这些功能作为对当前支持的标准的扩展（例如 GNU C99 扩展）。

[然后，检查旧规范，自1998 年](http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_active.html#57)以来，C++ 似乎支持匿名联合。

众所周知，C++ 中禁止使用匿名结构，我没有发现任何修改。从[Visual Studio 2012 开始](http://msdn.microsoft.com/en-us/library/z2cx9y4f.aspx)，确认 C++ 不支持此功能。

# python - 创建多个指向同一个 wsdl 的 suds 客户端

> ID：12355119
> 
> 赞同：0
> 
> 时间：2012-09-10T15:46:42.983
> 
> 标签：python, suds

打开 IDLE 并导入 suds 客户端，我可以通过以下方式创建客户端：

```
c = Client('http://blah/Core.svc?wsdl') 
```

随后调用：

```
c2 = Client('http://blah/Core.svc?wsdl') 
```

会给我一个`TypeNotFound`错误，在 wsdl 文件中命名一个类。

我努力了：

```
timeout = 5 # and then waiting
cache = None 
```

但是会发生同样的错误。如果我不能使用第一个实例，我不介意，但我如何获得第二个实例？

我正在编写测试，它将由 PySys 的单个实例运行，但单独不共享数据。

顺便说一句，当我在此之后退出（）空闲时，它会询问我是否要终止正在运行的进程，所以我假设创建客户端会触发线程是否正确？

我得到的错误是：

```
Traceback (most recent call last):
  File "<pyshell#9>", line 1, in <module>
    c1 = Client('http://localhost:8090/Service/Core.svc?wsdl')
  File "build\bdist.win-amd64\egg\suds\client.py", line 119, in __init__
    sd = ServiceDefinition(self.wsdl, s)
  File "build\bdist.win-amd64\egg\suds\servicedefinition.py", line 58, in __init__
    self.paramtypes()
  File "build\bdist.win-amd64\egg\suds\servicedefinition.py", line 137, in paramtypes
    item = (pd[1], pd[1].resolve())
  File "build\bdist.win-amd64\egg\suds\xsd\sxbasic.py", line 63, in resolve
    raise TypeNotFound(qref)
TypeNotFound: Type not found: '(ClassName, http://schemas.datacontract.org/4004/07/Class.Namespace, )' 
```

c.last_received() 和 c.last_sent() 都是空的。

更进一步，我查看了 IIS 的日志，发现每当我在 python 实例中第一次调用 Client(url) 时，我都会得到：

```
GET /Service/Core.svc   wsdl    8090    -   ::1 Python-urllib/2.6   
GET /Service/Core.svc   xsd=xsd0    8090    -   ::1 Python-urllib/2.6   
GET /Service/Core.svc   xsd=xsd2    8090    -   ::1 Python-urllib/2.6   
GET /Service/Core.svc   xsd=xsd1    8090    -   ::1 Python-urllib/2.6   
GET /Service/Core.svc   xsd=xsd3    8090    -   ::1 Python-urllib/2.6   
GET /Service/Core.svc   xsd=xsd2    8090    -   ::1 Python-urllib/2.6   
GET /Service/Core.svc   xsd=xsd1    8090    -   ::1 Python-urllib/2.6   
GET /Service/Core.svc   xsd=xsd3    8090    -   ::1 Python-urllib/2.6   
GET /Service/Core.svc   xsd=xsd2    8090    -   ::1 Python-urllib/2.6   
GET /Service/Core.svc   xsd=xsd1    8090    -   ::1 Python-urllib/2.6   
GET /Service/Core.svc   xsd=xsd3    8090    -   ::1 Python-urllib/2.6   
GET /Service/Core.svc   xsd=xsd2    8090    -   ::1 Python-urllib/2.6   
GET /Service/Core.svc   xsd=xsd3    8090    -   ::1 Python-urllib/2.6   
GET /Service/Core.svc   xsd=xsd1    8090    -   ::1 Python-urllib/2.6   
GET /Service/Core.svc   xsd=xsd2    8090    -   ::1 Python-urllib/2.6   
GET /Service/Core.svc   xsd=xsd3    8090    -   ::1 Python-urllib/2.6 
```

但是来自同一个 python 实例的后续调用给了我：

```
GET /Service/Core.svc   wsdl    8090    -   ::1 Python-urllib/2.6
GET /Service/Core.svc   xsd=xsd0    8090    -   ::1 Python-urllib/2.6
GET /Service/Core.svc   xsd=xsd2    8090    -   ::1 Python-urllib/2.6
GET /Service/Core.svc   xsd=xsd3    8090    -   ::1 Python-urllib/2.6
GET /Service/Core.svc   xsd=xsd1    8090    -   ::1 Python-urllib/2.6
GET /Service/Core.svc   xsd=xsd2    8090    -   ::1 Python-urllib/2.6
GET /Service/Core.svc   xsd=xsd3    8090    -   ::1 Python-urllib/2.6 
```

每次请求某个文件时，响应的大小都是相同的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T18:35:57.537

这可能是其他地方的问题（即提供 WSDL 的服务），因为在使用 SOAP 服务时，我无法在 IDLE 或 python 命令 shell 或脚本（我正在使用 Windows）中重现。

您能否提供确切的错误、suds 的版本和相关 WSDL 的实际 URL？

无论我如何尝试，以下输出都是相同的。

```
>>> from suds.client import Client
>>> c1 = Client('http://vocab.nerc.ac.uk/vocab2.wsdl')
>>> c2 = Client('http://vocab.nerc.ac.uk/vocab2.wsdl')
>>> c1
<suds.client.Client object at 0x022AE230>
>>> c2
<suds.client.Client object at 0x022CCDB0>
>>> 
```

编辑：

关于在IDLE中没有运行任何代码然后输入`quit()`关闭也会出现的退出IDLE的提示

编辑2：

[尝试使用这里](https://stackoverflow.com/questions/4426204/how-can-i-output-what-suds-is-generating-receiving)提到的一些技术（包括 last_sent 和 logging）来调试它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-25T17:57:17.140

suds 默认不会出现此错误。在下面应用[此补丁](https://github.com/sandersnewmedia/suds/blob/master/suds/xsd/recurselevel-schema.py.patch)后出现：

`recurselevel-schema.py.patch https://github.com/sandersnewmedia/suds/blob/master/suds/xsd/recurselevel-schema.py.patch`

在文件中 `/suds/xsd/schema.py`

此补丁解决了“递归级别架构错误”，但当您需要使用多个指向同一个 wsdl 的 suds 客户端时会导致错误。

# c# - linq to sql 在一对多关系上加载孩子

> ID：12355125
> 
> 赞同：1
> 
> 时间：2012-09-10T15:47:22.643
> 
> 标签：c#, linq, linq-to-sql

我有 3 张桌子。事件、根本原因和事件根本原因。表incidentrootcauses 以一对多的方式与事件相关联。当我得到事件对象时，没有我预期的根本原因对象列表，而是得到（在我的即时窗口中）

```
var rt = incident.IncidentRootCauses; 
```

{System.Data.Linq.EntitySet} 计数：1

```
HasLoadedOrAssignedValues: true

IsDeferred: false 
```

我希望能够在查询运行时加载所有根本原因对象。我知道问题是事件没有明确地与根本原因表相关联。感谢您对此的任何帮助。

```
using (var db = new IncidentTrackerDataContext())
            {
                var lo = new DataLoadOptions();
                lo.LoadWith<Incident>(incidents => incidents.ReportedTo);
                lo.LoadWith<Incident>(incidents => incidents.Shift);
                lo.LoadWith<Incident>(incidents => incidents.Machine);
                lo.LoadWith<Incident>(incidents => incidents.Department);
                lo.LoadWith<Incident>(incidents => incidents.IncidentRootCauses);
                lo.LoadWith<IncidentRootCause>(i => i.RootCause);

                // lo.LoadWith<Incident>(incidents => incidents.IncidentManagers);
                // lo.LoadWith<Incident>(incidents => incidents.IncidentMembers);
                // lo.LoadWith<Incident>(incidents => incidents.IncidentWitnesses);
                db.LoadOptions = lo;
                db.DeferredLoadingEnabled = false;
                Incident incident = (from i in db.Incidents
                                     where i.IncidentReportID == new Guid(incidentID)
                                     select i).FirstOrDefault();

                return incident;
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T16:02:12.083

听起来您还想要第二级急切加载的实体。

在相同的 LoadOptions 上，尝试：

```
lo.LoadWith<IncidentRootCause>(irc => irc.RootCause); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T17:24:42.053

您可能需要检查生成的 SQL。尝试加载多个子项时，可能会忽略某些带有选项的加载，因为这可能意味着提取太多记录。因此，在 using 子句退出之前，您的某些子记录可能不会被提取。

# java - Selenium IEDriver 问题启动 IE NoSuchWindowException

> ID：12355126
> 
> 赞同：5
> 
> 时间：2012-09-10T15:47:27.683
> 
> 标签：java, windows, internet-explorer, selenium, webdriver

```
org.openqa.selenium.NoSuchWindowException: Unable to get browser (WARNING: The server did not provide any stacktrace information)Command duration or timeout: 16 millisecondsBuild info: version: '2.25.0', revision: '17482', time: '2012-07-18 21:08:56'System info: os.name: 'Windows 7', os.arch: 'amd64', os.version: '6.1', java.version: '1.7.0_07'Driver info: driver.version: EventFiringWebDriverSession ID: c1d95c8f-b182-4f96-a9f9-ed67f68b0bc9Command duration or timeout: 190 millisecondsBuild info: version: '2.25.0', revision: '17482', time: '2012-07-18 22:18:01'System info: os.name: 'Mac OS X', os.arch: 'x86_64', os.version: '10.7.4', java.version: '1.6.0_33'Driver info: driver.version: RemoteWebDriverSession ID: 1347289084315at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
 sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
 sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
 java.lang.reflect.Constructor.newInstance(Constructor.java:513)
 org.openqa.selenium.remote.ErrorHandler.createThrowable(ErrorHandler.java:188)
 org.openqa.selenium.remote.ErrorHandler.throwIfResponseFailed(ErrorHandler.java:145)
 org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:498)
 org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:502)
 org.openqa.selenium.remote.RemoteWebDriver.getPageSource(RemoteWebDriver.java:363)
 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
 java.lang.reflect.Method.invoke(Method.java:597)
 org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite$PojoCachedMethodSiteNoUnwrapNoCoerce.invoke(PojoMetaMethodSite.java:229)
 org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite.call(PojoMetaMethodSite.java:52)
 org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:40)
 org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:117)
 org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:121)
 com.pearson.moxie.schooladmin.LoginTests.startSelenium(LoginTests.groovy:59)
 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
 java.lang.reflect.Method.invoke(Method.java:597)
 org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
 org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
 org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
 org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:27)
 org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:30)
 org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)
 org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)
 org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
 org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
 org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
 org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
 org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
 org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
 org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
 org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:30)
 org.junit.runners.ParentRunner.run(ParentRunner.java:300)
 org.apache.maven.surefire.junit4.JUnit4TestSet.execute(JUnit4TestSet.java:45)
 org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:123)
 org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:104)
 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
 java.lang.reflect.Method.invoke(Method.java:597)
 org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:164)
 org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:110)
 org.apache.maven.surefire.booter.SurefireStarter.invokeProvider(SurefireStarter.java:175)
 org.apache.maven.surefire.booter.SurefireStarter.runSuitesInProcess(SurefireStarter.java:123)
 org.apache.maven.plugin.surefire.AbstractSurefireMojo.executeProvider(AbstractSurefireMojo.java:195)
 org.apache.maven.plugin.surefire.AbstractSurefireMojo.executeAllProviders(AbstractSurefireMojo.java:177)
 org.apache.maven.plugin.surefire.AbstractSurefireMojo.executeAfterPreconditionsChecked(AbstractSurefireMojo.java:135)
 org.apache.maven.plugin.surefire.AbstractSurefireMojo.execute(AbstractSurefireMojo.java:98)
 org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
 org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
 org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
 org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
 org.apache.maven.lifecycle.internal.MojoExecutor.executeForkedExecutions(MojoExecutor.java:365)
 org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:199)
 org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
 org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
 org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
 org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
 org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
 org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
 org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:319)
 org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
 org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
 org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
 org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
 java.lang.reflect.Method.invoke(Method.java:597)
 org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
 org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
 org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
 org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)Caused by: org.openqa.selenium.remote.ScreenshotException: Screen shot has been takenBuild info: version: '2.25.0', revision: '17482', time: '2012-07-18 22:18:01'System info: os.name: 'Mac OS X', os.arch: 'x86_64', os.version: '10.7.4', java.version: '1.6.0_33'Driver info: driver.version: RemoteWebDriverat org.openqa.selenium.remote.ErrorHandler.throwIfResponseFailed(ErrorHandler.java:125)... 73 moreCaused by: org.openqa.selenium.NoSuchWindowException: Unable to get browser (WARNING: The server did not provide any stacktrace information)Command duration or timeout: 16 millisecondsBuild info: version: '2.25.0', revision: '17482', time: '2012-07-18 21:08:56'System info: os.name: 'Windows 7', os.arch: 'amd64', os.version: '6.1', java.version: '1.7.0_07'Driver info: driver.version: EventFiringWebDriverSession ID: c1d95c8f-b182-4f96-a9f9-ed67f68b0bc9Build info: version: '2.25.0', revision: '17482', time: '2012-07-18 22:18:01'System info: os.name: 'Mac OS X', os.arch: 'x86_64', os.version: '10.7.4', java.version: '1.6.0_33'Driver info: driver.version: EventFiringWebDriverat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
 sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
 sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
 java.lang.reflect.Constructor.newInstance(Unknown Source)
 org.openqa.selenium.remote.ErrorHandler.createThrowable(ErrorHandler.java:188)
 org.openqa.selenium.remote.ErrorHandler.throwIfResponseFailed(ErrorHandler.java:145)
 org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:498)
 org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:502)
 org.openqa.selenium.remote.RemoteWebDriver.getPageSource(RemoteWebDriver.java:363)
 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
 sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
 sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
 java.lang.reflect.Method.invoke(Unknown Source)
 org.openqa.selenium.support.events.EventFiringWebDriver$2.invoke(EventFiringWebDriver.java:101)
 $Proxy1.getPageSource(Unknown Source)
 org.openqa.selenium.support.events.EventFiringWebDriver.getPageSource(EventFiringWebDriver.java:186)
 org.openqa.selenium.remote.server.handler.GetPageSource.call(GetPageSource.java:29)
 org.openqa.selenium.remote.server.handler.GetPageSource.call(GetPageSource.java:1)
 java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
 java.util.concurrent.FutureTask.run(Unknown Source)
 org.openqa.selenium.remote.server.DefaultSession$1.run(DefaultSession.java:150)
 java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
 java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
 java.lang.Thread.run(Unknown Source) 
```

这就是我们设置驱动程序的方式：

```
DesiredCapabilities ieCapabilities = DesiredCapabilities.internetExplorer();
ieCapabilities.setCapability( InternetExplorerDriver.INTRODUCE_FLAKINESS_BY_IGNORING_SECURITY_DOMAINS, true );
ieCapabilities.setCapability(CapabilityType.ACCEPT_SSL_CERTS, true);

driver = new RemoteWebDriver( new URL( "http://" + serverIp + ":" + serverPort + "/wd/hub" ), ieCapabilities );
driver.manage().timeouts().implicitlyWait( 30, TimeUnit.SECONDS ); 
```

我们执行：

```
driver.get("http://www.google.com/"); 
```

它成功导航到 google.com，然后在下一次 selenium 或 webdriver api 调用中抛出此堆栈跟踪：/

我们使用的是 Windows 7，即带有 RemoteWebDriver 2.25.0 和 IEDriver.exe 的 8

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T07:12:46.770

IE 设置必须按照[链接中给出的方式进行修改](http://code.google.com/p/selenium/wiki/InternetExplorerDriver)

在 Windows Vista 或 Windows 7 上的 IE 7 或更高版本上，您必须将每个区域的保护模式设置设置为相同的值。该值可以打开或关闭，只要每个区域都相同。要设置保护模式设置，请从“工具”菜单中选择“Internet 选项...”，然后单击“安全”选项卡。对于每个区域，标签底部都会有一个标记为“启用保护模式”的复选框。

然后使用如下代码

```
DesiredCapabilities capabilities = DesiredCapabilities.internetExplorer();
capabilities.set(InternetExplorerDriver.
                 INTRODUCE_FLAKINESS_BY_IGNORING_SECURITY_DOMAINS,true); 
WebDriver driver = new InternetExplorerDriver(capabilities); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T17:03:48.553

这个话题已经在[这里讨论过](https://stackoverflow.com/questions/7278340/selenium-web-driver-internetexplorerdriver-nosuchelementexception)

因此，请为驱动程序尝试此设置：

```
DesiredCapabilities capabilities = DesiredCapabilities.internetExplorer();
capabilities.set(InternetExplorerDriver.INTRODUCE_FLAKINESS_BY_IGNORING_SECURITY_DOMAINS,
true); 
WebDriver driver = new InternetExplorerDriver(capabilities); 
```

这对我有用

# mysql - 将具有三个外键的 MySQL 表连接到同一个表

> ID：12355127
> 
> 赞同：1
> 
> 时间：2012-09-10T15:47:30.460
> 
> 标签：mysql

我想从部门表中选择所有部门的详细信息。但我想要每个 head_user_id、assistant_1_user_id 和 assistant_2_user_id 的 name_full

```
CREATE TABLE IF NOT EXISTS `user_mst` (
  `user_id` int(11) NOT NULL AUTO_INCREMENT,
  `name_full` varchar(250) DEFAULT NULL,
  `name_with_initials` varchar(250) DEFAULT NULL,
  `gender` char(1) NOT NULL,
  `nic_no` varchar(20) DEFAULT NULL,
  `title_id` varchar(10) NOT NULL,
  `dob` date DEFAULT NULL,
  `address1` varchar(100) DEFAULT NULL,
  `address2` varchar(100) DEFAULT NULL,
  `address3` varchar(100) DEFAULT NULL,
  `address4` varchar(100) DEFAULT NULL,
  `tele_no` varchar(40) DEFAULT NULL,
  `mob_no` varchar(40) DEFAULT NULL,
  `email_personal` varchar(100) DEFAULT NULL,
  `role_id` varchar(10) NOT NULL,
  `creator_user_id` varchar(50) NOT NULL,
  `active_user` tinyint(1) NOT NULL,
  `emp_no1` varchar(50) DEFAULT NULL,
  `emp_no2` varchar(50) DEFAULT NULL,
  `unit_id` varchar(50) DEFAULT NULL,
  `division_id` varchar(50) DEFAULT NULL,
  `username` varchar(50) NOT NULL,
  `password` varchar(50) NOT NULL,
  `email_official` varchar(45) DEFAULT NULL,
  PRIMARY KEY (`user_id`),
  KEY `fk_user_mst_title_mst` (`title_id`),
  KEY `fk_user_mst_role_mst1` (`role_id`),
  KEY `fk_user_mst_unit_mst1` (`unit_id`,`division_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=5 ;

INSERT INTO `user_mst` (`user_id`, `name_full`, `name_with_initials`, `gender`, `nic_no`, `title_id`, `dob`, `address1`, `address2`, `address3`, `address4`, `tele_no`, `mob_no`, `email_personal`, `role_id`, `creator_user_id`, `active_user`, `emp_no1`, `emp_no2`, `unit_id`, `division_id`, `username`, `password`, `email_official`) VALUES
(2, 'dss', 'ddsf', 'm', '2353246565v', '12', '2012-03-12', 'ewtewt', 'ryery', 'ertert', 'wetwet', '325235325', '23523534523', 'fdrg@yahoo.com', '1', '1', 1, '', NULL, '1', '1', 'cde', '123', 'sasas@gmail.com'),
(3, 'wrwer', 'egrt', 'f', '2432544663', '12', '2012-03-26', 'erwerw', 'wetw', 'ewtwe', 'ewtw', '132435435', '1243345345', 'dfggdfg', '23', '1', 1, '12', '12', '12', '3', 'pas', '123', 'sdasda'),
(4, 'asd', 'asd', 'f', '5671234676V', '12', '2012-03-05', 'sdgdsgsd', 'sdgsdgds', 'rgwergwetg', 'ergry', '12141242145', '1242135346', 'prameeshas@yahoo.com', '1', '123567', 1, '1234', '123', '1', '1', 'abc', '234', 'prameeshas@yahoo.com');    

  CREATE TABLE IF NOT EXISTS `division_mst` (
  `division_id` varchar(50) NOT NULL,
  `division_code` varchar(50) NOT NULL,
  `name` varchar(100) NOT NULL,
  `description` varchar(500) DEFAULT NULL,
  `colour` varchar(50) DEFAULT NULL,
  `head_user_id` int(11) DEFAULT NULL,
  `assistant_1_user_id` int(11) DEFAULT NULL,
  `assistant_2_user_id` int(11) DEFAULT NULL,
  `main_division_id` int(11) DEFAULT NULL,
  PRIMARY KEY (`division_id`),
  KEY `fk_division_mst_user_mst1` (`head_user_id`),
  KEY `fk_division_mst_user_mst2` (`assistant_1_user_id`),
  KEY `fk_division_mst_user_mst3` (`assistant_2_user_id`),
  KEY `fk_division_mst_main_division_mst1` (`main_division_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

INSERT INTO `division_mst` (`division_id`, `division_code`, `name`, `description`, `colour`, `head_user_id`, `assistant_1_user_id`, `assistant_2_user_id`, `main_division_id`) VALUES
('1', 'D001', 'Administration', 'tjrtujrt', 'pink', 1, 2, NULL, 1),
('2', 'D002\n', 'Human Resource\n', 'yjghkhk', 'red', 1, 3, 2, 1),
('3', 'D003', 'Marketing', 'jhghfg', 'green', 2, 1, 3, 2),
('4', 'D004', 'IT ', NULL, NULL, NULL, NULL, NULL, NULL),
('5', 'D005', 'Accounting ', NULL, NULL, NULL, NULL, NULL, NULL); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T15:50:55.550

试试这个，

```
SELECT  b.`name_full` head_user,
        c.`name_full` assistant_1,
        d.`name_full assistant_2
FROM    `division_mst` a
        INNER JOIN `user_mst` b
            ON a.`head_user_id` = b.`user_id`
        INNER JOIN `user_mst` c
            ON a.`assistant_1_user_id` = b.`user_id`
        INNER JOIN `user_mst` d
            ON a.`assistant_2_user_id` = b.`user_id` 
```

希望这可以帮助。

顺便说一句，你的约束应该是这样的

```
 CONSTRAINT `fk_division_mst_user_mst1` FOREIGN KEY (`head_user_id`) REFERENCES `user_mst`(user_id),
  CONSTRAINT `fk_division_mst_user_mst2` FOREIGN KEY (`assistant_1_user_id`) REFERENCES `user_mst`(user_id),
  CONSTRAINT `fk_division_mst_user_mst3` FOREIGN KEY (`assistant_2_user_id`) REFERENCES `user_mst`(user_id) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T16:00:13.440

```
select 
    d.*, 
    u1.name_full AS head_user, 
    u2.name_full AS assistant1, 
    u3.name_full AS assistant2
from division_mst d 
    LEFT OUTER JOIN user_mst u1 ON d.head_user_id=u1.user_id
    LEFT OUTER JOIN user_mst u2 ON d.assistant_1_user_id=u2.user_id
    LEFT OUTER JOIN user_mst u3 ON d.assistant_2_user_id=u3.user_id 
```

# gwt - 为什么我不能添加从 SimplePanel 扩展到 RootPanel 的类？

> ID：12355128
> 
> 赞同：2
> 
> 时间：2012-09-10T15:47:35.187
> 
> 标签：gwt

我正在 GWT 中设计一个简单的应用程序，并且在客户端有不同的视图。每个视图都从 SimplePanel 扩展而来，并将根据需要添加到 RootPanel。

我的第一个视图是 Login 类：

```
public class Login extends SimplePanel
{
    private final TextBox txt_login;
    private final PasswordTextBox txt_password;
    private final Button btn_login;
    private final Grid main_grid;

    Login()
    {
        super();

        txt_login=new TextBox();
        txt_password=new PasswordTextBox();
        btn_login=new Button("Login");
        main_grid=new Grid(3,2); 

        main_grid.setWidget(0, 0, new HTML("Login"));
        main_grid.setWidget(1, 0, new HTML("Password"));
        main_grid.setWidget(0, 1, txt_login);
        main_grid.setWidget(1, 1, txt_password);
        main_grid.setWidget(2, 1, btn_login);

        setWidget(main_grid);
    }
} 
```

我尝试使用以下代码将其添加到我的入口点类中的 RootPanel 中：

```
Login login_box=new Login();
RootPanel.get().add(login_box); 
```

但我最终在运行时收到以下错误：

```
java.lang.NullPointerException: null
    at com.google.gwt.user.client.ui.AttachDetachException.tryCommand(AttachDetachException.java:72)
    at com.google.gwt.user.client.ui.Panel.doAttachChildren(Panel.java:170)
    at com.google.gwt.user.client.ui.Widget.onAttach(Widget.java:345)
    at com.google.gwt.user.client.ui.Widget.setParent(Widget.java:475)
    at com.google.gwt.user.client.ui.Panel.adopt(Panel.java:127)
    at com.google.gwt.user.client.ui.ComplexPanel.add(ComplexPanel.java:97)
    at com.google.gwt.user.client.ui.AbsolutePanel.add(AbsolutePanel.java:97)
    at de.enercon.epi.client.Epi.onModuleLoad(Epi.java:15)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at com.google.gwt.dev.shell.ModuleSpace.onLoad(ModuleSpace.java:405)
    at com.google.gwt.dev.shell.OophmSessionHandler.loadModule(OophmSessionHandler.java:200)
    at com.google.gwt.dev.shell.BrowserChannelServer.processConnection(BrowserChannelServer.java:526)
    at com.google.gwt.dev.shell.BrowserChannelServer.run(BrowserChannelServer.java:364)
    at java.lang.Thread.run(Unknown Source) 
```

奇怪的是，如果我从 DialogBox 而不是 SimplePanel 扩展 Login 类，我完全能够让它工作。

可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T16:55:29.510

简单面板可能只接受一个子小部件。您不能将其扩展为包含多个小部件。

最佳实践是将 Composite 或 LayoutPanel 添加到 RootPanel - 这是您的“应用程序”，您可以根据自己的应用程序外观调整大小和样式。然后您扩展 Composite 以创建您的“视图”，并在用户浏览您的应用程序时将您的视图删除并添加到“应用程序”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T16:32:49.557

我不确定您的问题是什么，但我建议您扩展`Composite`而不是`SimplePanel`，然后问题就会消失，您将遵循最佳实践:-) [http://googlewebtoolkit.blogspot.com/2009/05 /widget-best-practices-widget-building.html](http://googlewebtoolkit.blogspot.com/2009/05/widget-best-practices-widget-building.html)

```
public class Login extends Composite {
  private final TextBox txt_login;
  private final PasswordTextBox txt_password;
  private final Button btn_login;
  private final Grid main_grid;

  Login() {
    txt_login = new TextBox();
    txt_password = new PasswordTextBox();
    btn_login = new Button("Login");
    main_grid = new Grid(3, 2);

    main_grid.setWidget(0, 0, new HTML("Login"));
    main_grid.setWidget(1, 0, new HTML("Password"));
    main_grid.setWidget(0, 1, txt_login);
    main_grid.setWidget(1, 1, txt_password);
    main_grid.setWidget(2, 1, btn_login);

    initWidget(main_grid);
  }
} 
```

# phantomjs - 使用 casperJS 登录 Bing 搜索

> ID：12355130
> 
> 赞同：2
> 
> 时间：2012-09-10T15:47:46.383
> 
> 标签：phantomjs, casperjs

我一直在尝试创建一个登录脚本来使用 CasperJS 检查我的 bing 奖励积分，我正在查看调试输出，一切看起来都很好，只是它没有成功登录。（所以我账户上的奖励没有显示）。我已经在 chrome 控制台中对此进行了测试，并避免使用 casper.fill ，因为它会刷新登录页面。登录信息是一个工作测试帐户。

```
var system = require('system');
var utils = require('utils');

var casper = require('casper').create({
  verbose: true,
  logLevel: 'debug'
});

var binglink = "https://login.live.com/ppsecure/post.srf?wa=wsignin1.0&rpsnv=11&ct=1347289667&rver=6.0.5286.0&wp=MBI&wreply=https:%2F%2Fssl.bing.com%2Fsecure%2FPassport.aspx%3Frequrl%3Dhttps%253a%252f%252fssl.bing.com%252faccount%252frewards%253fru%253dhttp%25253a%25252f%25252fwww.bing.com%25252f&lc=1033&id=264960&bk=1347289670";

casper.start(binglink, function() { 

    casper.evaluate(function() {
        document.querySelector('input[type="email"]').value = "genericemail@live.com";
        document.querySelector('input[type="password"]').value = "genericpassword";
        document.querySelector('input[type="submit"]').click();
    });

}); 

casper.then( function(){
    this.wait(2000); 
})
casper.then( function(){
    this.echo("Capturing Page");
    this.capture('bing.live.png');

});

casper.run(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T02:03:40.403

我一直在做类似的事情，这就是我登录他们网站的方式。

```
var username = 'username@gmail.com', password = 'password';
var casper = require('casper').create({
    pageSettings: {
        userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.10 (KHTML, like Gecko) Chrome/23.0.1262.0 Safari/537.10'
    },
    viewportSize: {
        width: 1024,
        height: 768
    },
});

casper.start('http://www.bing.com/rewards/signup/signin', function goToLoginPage() {
    this.click('#WLSignin');
});
casper.then(function fillLoginDetails() {
    this.fill('form[name="f1"]', {
        'login': username,
        'passwd': password,
        'KMSI': true
    }, false);
});
casper.then(function clickButton() {
    this.click('input[name="SI"]');
});
casper.run(function() {
    this.exit();
}); 
```

# android - 从/向模拟器拉/推文件

> ID：12355133
> 
> 赞同：0
> 
> 时间：2012-09-10T15:47:49.567
> 
> 标签：android

我想尝试从/向模拟器拉/推文件，因此我找到了一些关于此的教程，但是当我在 DDMS 视图中转到文件资源管理器时，推/拉按钮被禁用......为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-03-08T16:12:35.453

尝试先在模拟器中启用“USB 调试”选项，然后打开 Android 设备监视器 --> DDMS 透视图 --> 选择模拟器。当您从文件资源管理器中选择文件或文件夹时，您应该能够看到启用的选项。

[看图](https://i.stack.imgur.com/9hWcS.png)

# ruby-on-rails - Rails 协会的用途是什么？

> ID：12355134
> 
> 赞同：0
> 
> 时间：2012-09-10T15:47:51.410
> 
> 标签：ruby-on-rails, associations

我很困惑为以下关系船定义关联。

1.一个用户可以拥有多个公司。

2.一个公司会有很多团队成员用户

3.团队成员可以有不同的角色，如所有者、投资者、顾问。

请让我对此进行关联。目前我有用户和公司模型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T01:16:50.200

如果你使用了：

```
class Company < ActiveRecord::Base
  has_many :users
end

class User < ActiveRecord::Base
  belongs_to :companies
  has_many :roles
end

class Role < ActiveRecord::Base
  belongs_to :user
end 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-10T16:00:38.380

如果你想声明 team_members 动态：在你的角色模型中声明你的“角色”静态（diffrent_role）

```
 class User < ActiveRecord::Base
      has_many :companies
      has_many :roles
    end

    class Company < ActiveRecord::Base
      belongs_to :user
      has_many :team_members, :class_name => "User", :finder_sql => 'SELECT u.* FROM users u INNER JOIN roles r ON u.company_id = r.id WHERE r.diffrent_role = "member";'

    end

    class Role < ActiveRecord::Base
      belongs_to :user
    end 
```

# safari - Safari 6.0 (8536.25) CSS Bug（下拉菜单上奇怪的背景/选择颜色错误）

> ID：12355148
> 
> 赞同：1
> 
> 时间：2012-09-10T15:48:51.677
> 
> 标签：safari

使用 Safari 6.0 (8536.25)。

这个“错误”不存在于 Firefox 或 Chrome 中，仅存在于 Safari 中。

我在导航中看到一种非常奇怪的颜色（无法确定这是 CSS 背景颜色、CSS 选择颜色还是与操作系统相关的颜色）。这仅在 Safari 中发生，并且似乎是“一致的”，因为“颜色”总是出现在同一区域。

我无法通过 Web Inspector 确定这是从哪里来的。

这是网址：[http ://project1989.com/development/RAD/](http://project1989.com/development/RAD/)

此外，这是一个截图，以防其他人看到“错误”。

野生动物园：[http ://cl.ly/image/1c0b2T380v1C](http://cl.ly/image/1c0b2T380v1C)

其他任何人都可以重新产生这个错误，和/或深入了解导致它的原因吗？

我自己编写了所有的 css，所以我对它的来源感到困惑，我可以确认在升级到 Safari 6.0 之前，一切正常。

谢谢！

PS，我从我的css中删除了这些行，因为我认为它们是导致问题的原因，但它没有解决任何问题。然而，这些*在*我的 CSS 中-

```
::selection {
    background: #04C4FB; /* Safari */
}

::-moz-selection {
    background: #04C4FB; /* Firefox */
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T16:55:08.390

这似乎与我报告的关于 Safari 6 中颜色处理的错误有关。它只发生在某些系统上，这就是为什么这很难重现。例如，我在我的 MacBook Air 上看不到这个，但我的旧 MacBook Pro（运行相同的版本）显示了这个问题。

由于这是一个渲染错误，到目前为止，据我所知，没有解决方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-04T17:15:14.897

将 'transform: translateZ(0)' 添加到元素中，就可以了！希望我能帮上忙！

# php - 有什么方法可以在 virtualbox vm 中运行 php 来运行 sublime text linter？

> ID：12355149
> 
> 赞同：6
> 
> 时间：2012-09-10T15:48:52.300
> 
> 标签：php, virtualbox

我正在使用 sublime text 2，我想使用插件 sublimelinter。它使用 php -l 在后台检查代码。我正在使用在 VirtualBox VM 中运行的网络服务器进行开发，网络服务器在 VM（来宾）中，并且 sublime 文本在主机上运行。

有什么办法让这两个一起工作吗？我真的很想避免在 VM 之外安装 php。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T00:10:57.993

我有一些在我的机器上运行良好的东西，但它似乎很脆弱。

# 理念

这里的想法是在主机上创建一个命令行脚本，通过 SSH 隧道将其所有参数传递给 VM 上的 PHP 调用。然后 SublimeLinter 可以调用这个脚本，就像它通常调用 PHP 二进制文件一样，从 Sublime 的角度来看，一切都将“正常工作”，而无需在您的主机上安装 PHP。

我同时使用 Windows 和 OS X 主机，所以我有两个版本的隧道脚本。请注意，在 Windows 上，您需要获取 Windows PuTTY SSH 工具，但对于 Unix 风格的主机，SSH 可能已经存在。

# 对于 Windows 主机

*   下载[putty](http://the.earth.li/~sgtatham/putty/latest/x86/putty.zip)工具并将它们解压缩到有用的地方，例如`C:/Users/Youruser/bin/putty`.
*   使用以下内容创建批处理脚本`C:/Users/Youruser/bin/php_vm_tunnel.bat`：

    > ```
    > @echo off
    > C:/Users/Youruser/bin/putty/plink -l youruser -pw yourpassword 192.168.56.101 php %* 
    > ```

*注意*- 请务必将 plink 的路径替换为您在上面解压缩腻子的正确路径。此外，将`-l`和`-pw`标志值替换为您通过 SSH 连接到 VM 时使用的用户名和密码。最后，请务必将示例中的 IP 地址替换为用于通过 SSH 连接到 VM 的 IP 地址。

# 对于 Unix-ish 主机（OS X、Linux 等）

*   在以下位置创建 bash 脚本`~\bin\php_vm_tunnel`

    > ```
    > #!/usr/bin/env bash
    > FIXED_ARGS='';
    > for (( i = 1; i &lt;= $# ; i++ )); do
    >     eval ARG=\$$i
    >     FIXED_ARGS="$FIXED_ARGS $(echo "$ARG" | awk '{gsub(".", "\\&amp;");print}')"
    > done
    > ssh -l root 192.168.56.101 php $FIXED_ARGS 
    > ```

*注意*- 请务必将`-l`标志值替换为您通过 SSH 连接到 VM 时使用的用户名。此外，请务必将示例中的 IP 地址替换为用于通过 SSH 连接到 VM 的 IP 地址。

# 测试脚本

此时，您有一个脚本，该脚本应该将您传递给它的任何内容通过隧道传输到您的虚拟机。因此，如果您要在终端中进行操作，请说：

> ```
> cd wherever_you_put_the_script 
> php_vm_tunnel -v 
> ```

您应该会看到从您的虚拟机返回的 PHP 版本信息。

# Sublime Text 2 配置

现在你已经设置了这个隧道，你可以配置 Sublime Text 2 来使用它：

*   安装`Package Control`Sublime Text 2 插件
*   安装`SublimeLinter`插件（听起来你已经在这一点上）
*   转到`Preferences`-> `Package Settings`-> `SublimeLinter`->`Settings - User`
*   将此添加到配置文件中（再次替换到脚本的正确路径并注意双斜杠以正确转义反斜杠字符）并保存：

    > ```
    > {
    >     "sublimelinter_executable_map":
    >     {
    >         "php": "C:\\\Users\\\Youruser\\\bin\\\php_vm_tunnel.bat"
    >         "php": "/Users/youruser/bin/php_vm_tunnel"
    >     }
    > } 
    > ```

    *注意*- 您只能有一个“php”语句。上面第一个是Windows版本，第二个是Unix版本。删除不需要的那个。

*   重启 Sublime Text

如果您打开 Sublime Text 控制台（一切都按计划进行），您应该会在启动文本中看到如下内容：

> ```
> SublimeLinter: php enabled (using "C:\Users\Youruser\bin\php_vm_tunnel.bat" for executable) 
> ```

SublimeLinter 应该正确地检查 PHP 文件，就好像它正在调用原生 PHP 二进制文件一样。

祝你好运。

# sql-server - 跟踪客户端中安装的 sql server 2008 数据库结构以进行下次升级的最佳方法

> ID：12355152
> 
> 赞同：2
> 
> 时间：2012-09-10T15:49:01.237
> 
> 标签：sql-server, upgrade, software-update

我们公司有一个在 Asp.net 和 Sql Server 2008 中开发的与人力资源管理相关的产品，并安装在 20-30 个客户端中。由于每个客户的要求，该软件都在不断开发中。

现在，当进行一些新的更改并且某些使用旧版本的客户端要求进行一些更改时，我们必须安装具有最新数据库结构的最新版本代码。现在我们必须使用查询升级他们的数据库并且我们必须跟踪每个客户端数据库结构以生成升级查询。

目前，我们正在存储每个客户端数据库，并使用 Red Gate SQL Compare 等工具生成 sql 进行升级。随着客户端的增加，这个过程非常繁琐，那么这个过程的替代方法是什么，我们可以使用数据库版本控制或任何其他替代方法，使用安装程序（如 installaware）使用最新的数据库引用自动更新客户端数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T11:28:06.800

Red Gate 正在考虑使部署更容易。

我是 Red Gate 的产品经理，最近我写了一份名为“使用 Red Gate 工具的自动化部署”的白皮书，其中介绍了一种可能的解决方案。 [http://assets.red-gate.com/delivery/deployment-manager/assets/pdf/automated-deployment-whitepaper.pdf](http://assets.red-gate.com/delivery/deployment-manager/assets/pdf/automated-deployment-whitepaper.pdf)

该方法本质上是将 Web 应用程序和数据库组件都转换为可以由管理系统部署的包。数据库是最难的部分，论文提出了两种方法：

*   动态升级。升级脚本在部署时创建。这对于可以轻松重建数据库的开发和测试环境很有用。数据库包包含数据库的结构，通常作为脚本文件夹。

*   静态升级。为您知道当前部署的每个版本创建包时，通常在 CI 构建结束时创建升级脚本。（管理系统跟踪部署了哪些版本。）在部署时，使用正确的升级脚本。还有部署前和部署后验证步骤，以确保数据库未更改，升级脚本将正常运行并且升级脚本确实运行成功。这种方法非常好，因为它允许测试升级脚本本身，因为它是通过开发、测试、暂存、生产等进行部署的。它还允许 DBA 在流程的早期审查脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T16:43:02.610

我怀疑你会为你的问题找到一个最佳答案，因为可以有很多方法来实现你的目标，但我可以分享我们的过程以及我在过去 10 年中所做的事情所获得的一些见解描述。也许他们会帮助您确定适合您的解决方案。

首先，更新客户端数据库是一个**难题**。自从您安装了您的软件后，您永远不会真正知道他们可以对数据库做什么。我让客户将他们自己的表、视图甚至索引添加到我们的系统表中，因为他们认为系统需要它们。在升级目标数据库时，所有这些都会让人头疼，因为您不一定知道一开始的数据库状态。

其次，我喜欢你最初认为升级数据库的安装程序将是要走的路。然后我开始更多地考虑这个问题，在我们的案例中，至少 DBA 通常不是升级前端软件的人。我们还从许多客户那里听说，在服务器上安装**任何东西**对他们来说都是不可能的，所以回到第一条。

最后，我们选择构建自己的可执行文件，其中包含升级脚本以及 DBA \ 最终用户连接到服务器 \ 数据库并运行升级过程的能力。

（在我们的例子中，我们使用了许多包含我们专有商业智能的加密存储过程，这就是为什么我们不只是将脚本提供给客户。）

如果您还没有这样做，请将您的数据库纳入源代码控制！Visual Studio 和 Red-Gate 各自提供产品来促进这一点。我都用过，没有特别的偏好，但我会说使用你和你的团队感到舒服的东西。

当我们发布更新时，我们执行从源代码控制中的最新版本数据库到早期版本数据库的差异。我们寻找任何新对象和任何更改的对象 - 我们很少删除对象，但这可能也是您需要的。

一旦我们知道数据库中发生了什么变化，我们就会非常有条不紊地通过更改列表创建[幂等](http://en.wikipedia.org/wiki/Idempotence#Computer_science_meaning)脚本来执行必要的更改。这是一个非常繁琐的过程，但有助于确保客户获得轻松的升级体验。本质上，我们对这个过程所做的是防御性编程——而不是假设数据库中存在表、视图、存储过程、函数等，我们首先检查以确保该项目存在。如果是这样，我们也许可以完全跳过该 DDL 语句。在其他情况下，我们可能希望删除对象并重新创建它。

需要明确的是，我们**从不**删除表，但我们经常会删除其他对象并重新创建它们以确保对象是最新的。

脚本以正确的顺序打包到我们的可执行文件（我们内部构建的解决方案）中（例如，如果您要添加一个表和一个引用该表的视图，则需要在视图之前创建该表）。

顺便说一句，Red-Gate 提供了一个现在为您执行此操作的工具，尽管我还没有在生产中亲自使用它。

一旦我们对更新已正确打包感到高兴，我们就会尝试破解它！我们在我们支持的所有 SQL Server 版本（例如 2000、2005、2008、2012）上针对我们数据库的各种版本进行测试——真正的旧版本、我们以一种或另一种方式修改过的数据库。如果我们发现一种情况不起作用，我们会修复我们的脚本，直到它发生。

我还应该提到，我们的数据库模式有一个日志表，我们的更新模块写入该日志表，以便记录执行更新的时间、执行者以及哪些对象是该更新的一部分。这有时有助于排除故障。

虽然我们的实用程序不会在执行脚本之前备份要升级的数据库，但我们可以，而且我建议您将其视为过程的一部分。（我们的文档强调了这一点的重要性，并且我们多年来与之合作的大多数 DBA 也自然而然地这样做了，因此我们认为没有必要将其写入实用程序中）。

数据库更新实用程序与我们的软件更新打包在一起，并作为整个产品的另一个组件分发，并且可以由在我们客户端站点的数据库中拥有适当凭据和权限的任何用户执行。

虽然多年来这个过程对我们来说效果很好，但随着新工具在市场上的引入以及我们遇到客户遇到的错误，我们会继续对其进行改进。开发一个有效的过程可能需要一段时间，所以尽量不要在任何给定时间咀嚼太多。对我们来说，将数据库纳入源代码控制是最大的关键。一旦我们这样做了，事情就开始逐渐到位。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T17:05:37.713

考虑支持导出/导入功能。

“导出”功能本质上是创建已知/预期表的备份到不同名称的源。“导入”函数创建最新版本对象的空副本，然后从导出到其他源的表中导入行。

正如 Tim Lentine 所说，无论他们应用了什么定制，他们都必须重新应用。您的企业将需要决定他们愿意在多大程度上花费资源在升级期间重新应用客户端自定义。

我会告诉客户他们需要先进行备份（假设他们有 DBA）或支持数据库备份功能（如果他们没有）然后导出然后导入。

当然，这假设您的更改始终是向后兼容的。

这是一个简单、便宜的解决方案，如果你能侥幸逃脱的话。如果没有，正如 Tim Lentine 所说，它会变得非常困难和混乱。

高温高压

# jquery - HTML5 存储/JQuery 不保存数据

> ID：12355156
> 
> 赞同：1
> 
> 时间：2012-09-10T15:49:22.777
> 
> 标签：jquery, html, local-storage

我试图让一些 html5 本地存储工作，但没有运气。

它没有保存，当我单击“单击以保存”链接时，我没有收到有关该功能的警报。

我在这里忘记了什么？

下面是完整的代码：

```
<html>
<head>
<title></title>
<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>

<script>
$(document).ready(function(){

loaddata(); //Load the saved data

function loaddata() {
    $('#mydiv').val(localStorage.mydata);

}

function savedata() {
    localStorage.mydata = $('#mydiv').val();
    alert('Data Saved!'); //This is not showing up
} 

});
</script>
</head>
<body>

<a href="#" onclick="savedata();">Click to Save</a>

<table>
    <tr>
        <td id="mydiv">0</td>
    </tr>
</table>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T15:54:17.760

您无法`savedata`从链接的 onclick 处理程序访问，因为它包含在`document.ready`调用中。

要么移出`savedata`，`document.ready`要么使用 jQuery 将点击处理程序直接附加到元素。

```
$(document).ready(function() {

    loaddata(); //Load the saved data

    function loaddata() {
        $('#mydiv').html(localStorage.mydata);

    }
});

function savedata() {
    localStorage.mydata = $('#mydiv').html();
    alert('Data Saved!'); //This is not showing up
} 
```

或者其他方式

```
<a href="#" id="savebtn">Click to Save</a>

$("#savebtn").click(function() {
    localStorage.mydata = $('#mydiv').val();
    alert('Data Saved!'); //This is not showing up
}); 
```

这是一个修复错误的[jsFiddle](http://jsfiddle.net/5rnhD/)，包括尝试`.val()`在`td`元素上使用。它还将数据更改为不同的值，您可以查看它是否正常工作。

# c++ - Comeau编译器中的未命名结构

> ID：12355161
> 
> 赞同：2
> 
> 时间：2012-09-10T15:49:35.980
> 
> 标签：c++, c

为什么我们不能使用这样的东西

```
struct
{
    int bar;
} Foo;

int main() {} 
```

在 C++ 模式下的 Comeau 编译器中，而在 C 模式下我们可以吗？

> “ComeauTest.c”，第 4 行：错误：使用没有链接的类型来声明有链接的变量 } Foo; ^

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T15:57:10.413

每 3.5:8,

> 没有链接的类型不应用作具有外部链接的变量或函数的类型，除非
> — 实体具有 C 语言链接 (7.5)，或
> — 实体在未命名的命名空间 (7.3.1) 中声明，或
> — entity 不是 odr-used (3.2) 或在同一个翻译单元中定义的。

请注意，这是从 C++98 放宽的，它具有（在 3.5:8 中）：

> 不带链接的名称 [...] 不得用于声明具有链接的实体。

这条规则的原因是，为了从另一个翻译单元引用变量，您需要知道它的类型，这对于未命名的类型是不可能的。在实践中，这是因为具有外部链接的变量与它们的类型一起被*破坏*以生成一个明确的名称，这对于未命名的类型是不可能的。

但是，在您的代码中，实体`Foo`（可以说）没有被 odr 使用，并且最肯定是定义的，因此它应该被符合 C++11 的编译器接受，而 Comeau 不是。

# c# - MVC3 用列表传回对象列表

> ID：12355165
> 
> 赞同：1
> 
> 时间：2012-09-10T15:49:50.567
> 
> 标签：c#, javascript, ajax, asp.net-mvc

我需要将包含数组的对象数组从 javascript 传递给 MVC actionresult 方法。基本上我有一个 KeyValuePair，它的键是一个字符串数组，我需要传回这些 KeyValuePair 的列表。在代码中，我有一个我已更改的键列表，以及一个包含键-> 值对的 JS 对象。我尝试传回的 javascript 对象的格式应该与我的班级相同。我也尝试对它进行 JSON 化，但没有运气。

谢谢。

```
public class ChangedItem
{
    public IEnumerable<string> Key { get; set; }
    public int Value { get; set; }

    public ChangedItem()
    {
    }

    public ChangedItem(IEnumerable<string> key, int value)
    {
        Key = key;
        Value = value;
    }
}

[HttpPost]
public ActionResult UpdateResults(IEnumerable<ChangedItem> changedItems)
{
    return RedirectToAction("Index");
}

function getChangedItems() {
    var ChangedItems = new Array();
    for (var i = 0; i < _ChangedItemKeys.length; i++) {
        var ChangedItem = {};
        ChangedItem.Key = _ChangedItemKeys[i];
        ChangedItem.Value = _ChangedItems[_ChangedItemKeys[i]];
        ChangedItems[i] = ChangedItem;
    }
    return ChangedItems;
}

function submitNewVals() {
    $.ajax({
        url: '/Home/UpdateResults',
        type: 'POST',
        dataType: 'json',
        data:
        {
            changedItems: getChangedItems()
        }
    });
} 
```

我的请求数据详述如下，我的操作结果中有 6 个项目，只是在每个项目中，键为空，值为 0：

```
changedItems[0][Key][]:BoxeR
changedItems[0][Key][]:Proleague
changedItems[0][Key][]:Total
changedItems[0][Key][]:2005
changedItems[0][Key][]:Quarter 2
changedItems[0][Key][]:Actual
changedItems[0][Value]:123
changedItems[1][Key][]:BoxeR
changedItems[1][Key][]:Proleague
changedItems[1][Key][]:Team
changedItems[1][Key][]:2005
changedItems[1][Key][]:Quarter 1
changedItems[1][Key][]:Actual
changedItems[1][Value]:123
changedItems[2][Key][]:BoxeR
changedItems[2][Key][]:Proleague
changedItems[2][Key][]:Team
changedItems[2][Key][]:2005
changedItems[2][Key][]:Quarter 1
changedItems[2][Key][]:Estimate
changedItems[2][Value]:123
changedItems[3][Key][]:BoxeR
changedItems[3][Key][]:Proleague
changedItems[3][Key][]:Team
changedItems[3][Key][]:2005
changedItems[3][Key][]:Quarter 2
changedItems[3][Key][]:Actual
changedItems[3][Value]:123
changedItems[4][Key][]:BoxeR
changedItems[4][Key][]:Proleague
changedItems[4][Key][]:Team
changedItems[4][Key][]:2005
changedItems[4][Key][]:Quarter 2
changedItems[4][Key][]:Estimate
changedItems[4][Value]:123 
```

我尝试在提琴手中玩耍并更改请求数据格式（使用.Key [x]，.Value），但没有任何效果。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T15:54:06.740

抱歉，您的返回数据类型是`json`并且您传递数组请更改您的代码返回类型`JsonResult`

```
return Json(ChangedItems, JsonRequestBehavior.AllowGet); 
```

看到[这个链接](http://lesson8.blogspot.in/2012/09/mvc-razor-using-jsonresult.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T16:03:24.827

格式应该是这样的：

```
changedItems[0].Key[0]=BoxeR
changedItems[0].Key[1]=Proleague
changedItems[0].Key[2]=Total
changedItems[0].Key[3]=2005
changedItems[0].Key[4]=Quarter 2
changedItems[0].Key[5]=Actual
changedItems[0].Value=123
... 
```

有关详细信息，请参阅[ASP.NET Wire Format for Model Binding to Arrays、Lists、Collections、Dictionaries](http://www.hanselman.com/blog/ASPNETWireFormatForModelBindingToArraysListsCollectionsDictionaries.aspx)。

# jquery-ui - Jquery 对话框事件清除

> ID：12355167
> 
> 赞同：-1
> 
> 时间：2012-09-10T15:50:09.603
> 
> 标签：jquery-ui, jquery

我正在使用 jquery 对话框供用户输入评论，而不是在 jquery 对话框中添加和取消按钮。我有一个逻辑，比如当他们点击添加时，我需要在数据库中插入文本并只刷新整个 html 页面中的 iframe。一切都很完美。但是当 iframe 刷新时，它会将旧对话框保留在 dom 事件中。所以当我第二次点击它时，它会出现在预期的屏幕上。但我不确定为什么第一次点击它会保留旧的 jquery 对话框。

我正在使用这段代码:;

```
 $("#dialog-confirm").dialog({
        resizable: false,
        height: 200,
        modal: true,
        autoOpen: false,
       buttons: [
        {
            id: "add_btn",
            text: "Add",
           disabled: true,
            click: function () {
           // logic of adding text in db goes here.
             $(this).dialog("close");
            }
        },
        {
            id: "cancel_btn",
            text: "Cancel",
            click: function () {
            $(this).dialog("close");
            }
        }
        ]
    }); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T15:59:58.303

```
function resetForm($form) {
    $form.find('input:text, input:password, input:file, select, textarea').val('');
    $form.find('input:radio, input:checkbox')
         .removeAttr('checked').removeAttr('selected');
} 
```

and call `resetForm($('#myform')); // by id`

**OR**

```
jQuery.fn.reset = function () {
  $(this).each (function() { this.reset(); });
} 
```

call `$("#FormID").reset();`

**OR**

```
$('#FormID').each (function(){
  this.reset();
}); 
```

If your using form above code will be correct but not in case that will be use [like this](http://jsfiddle.net/nvUsD/22/)

```
$("#clear").click(function(){
    $("input[type='text']").val(""); 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T16:02:50.330

似乎你的 iframe 被缓存了，看看这个，

[防止浏览器中的 iframe 缓存](https://stackoverflow.com/questions/2648053/preventing-iframe-caching-in-browser)

还要发布您用于测试的浏览器和版本。

# bash - 用于将文件从一个位置复制到另一个位置并重命名的 Shell 脚本将当前日期添加到每个文件

> ID：12355176
> 
> 赞同：23
> 
> 时间：2012-09-10T15:50:39.940
> 
> 标签：bash, shell, unix

我的服务器中有一个文件夹，其中包含一些文件。这些是自动化的，这意味着我们每天都会自动获取新文件，这将覆盖旧文件。所以想备份这些数据。如何通过在复制时用当前日期重命名文件来将所有这些文件复制到另一个文件夹中。

例如：我有一个名为 folder1 的文件夹，其中包含 4 个文件。此文件夹的路径是 home/webapps/project1/folder1

1.  aaa.csv
2.  bbb.csv
3.  ccc.csv
4.  ddd.csv

现在我想将所有这四个文件复制到一个名为 folder2 的不同文件夹中。此文件夹的路径是 home/webapps/project1/folder2。在复制这些文件时，我想重命名每个文件并将当前日期添加到文件中。所以我在folder2中的文件名应该是..

1.  aaa091012.csv
2.  bbb091012.csv
3.  ccc091012.csv
4.  ddd091012.csv

我想为此编写一个 shell 脚本。请给我一些想法或一些与此相关的示例脚本。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-09-10T16:21:58.497

在`bash`中，如果您的文件名没有空格：

```
cd /home/webapps/project1/folder1
for f in *.csv
do 
   cp -v "$f" /home/webapps/project1/folder2/"${f%.csv}"$(date +%m%d%y).csv
done 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-10T16:15:33.227

您可以使用如下脚本。您只需要更改日期选项以匹配您想要的格式。

```
#!/bin/bash

for i in `ls -l /directroy`
do
cp $i /newDirectory/$i.`date +%m%d%Y`
done 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-10T16:24:30.597

```
path_src=./folder1
path_dst=./folder2
date=$(date +"%m%d%y")
for file_src in $path_src/*; do
  file_dst="$path_dst/$(basename $file_src | \
    sed "s/^\(.*\)\.\(.*\)/\1$date.\2/")"
  echo mv "$file_src" "$file_dst"
done 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-10T17:48:35.473

有一种拆分文件名和扩展名的正确方法：[Extract filename and extension in Bash](https://stackoverflow.com/questions/965053/extract-filename-and-extension-in-bash)

您可以像这样应用它：

```
date=$(date +"%m%d%y")
for FILE in folder1/*.csv
do
    bname=$(basename "$FILE")
    extension="${bname##*.}"
    filenamewoext="${bname%.*}"
    newfilename="${filenamewoext}${date}.${extension}
    cp folder1/${FILE} folder2/${newfilename}
done 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-11T11:09:14.560

```
cp --archive home/webapps/project1/folder1/{aaa,bbb,ccc,ddd}.csv home/webapps/project1/folder2
rename 's/\.csv$/'$(date +%m%d%Y).csv'/' home/webapps/project1/folder2/{aaa,bbb,ccc,ddd}.csv 
```

解释：

*   `--archive`确保以相同的所有权和权限复制文件。
*   `foo{bar,baz}`扩展为`foobar foobaz`.
*   `rename`是一个常用的程序来做这种替换。

PS：[不要`ls`用于这个](http://mywiki.wooledge.org/ParsingLs)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-04-17T12:13:00.633

你可以使用这一步非常有用：

```
for i in `ls -l folder1 | grep -v total | awk '{print $ ( ? )}'`
do
   cd folder1
   cp $i folder2/$i.`date +%m%d%Y`
done 
```

# xaml - WinRT GridView ItemTemplate 中的视觉状态管理器

> ID：12355177
> 
> 赞同：2
> 
> 时间：2012-09-10T15:50:41.237
> 
> 标签：xaml, windows-8, microsoft-metro, windows-runtime

是否可以在 gridview 项目模板中使用 VisualStates？如果我通过 ItemContainerStyle ControlTemplate 设置它们，我可以使用 VisualStates，但这只能让我访问同一级别的项目，包括 ContentPresenter。我想要做的是更改内容演示器内控件的背景颜色。这是一个似乎没有任何效果的简单示例。

```
<GridView x:Name="ItemsGrid" ItemContainerStyle="{StaticResource StyleWhereVisualStatesWork}">
    <GridView.ItemsPanel>
        <ItemsPanelTemplate>
            <WrapGrid Orientation="Horizontal"/>
        </ItemsPanelTemplate>
    </GridView.ItemsPanel>
    <GridView.ItemTemplate> //This Is Where I Can't Get Visual States To Work
        <DataTemplate>
            <Grid x:Name="ContainerGrid">
                <VisualStateManager.VisualStateGroups>
                    <VisualStateGroup x:Name="CommonStates">
                        <VisualState x:Name="Normal"/>
                        <VisualState x:Name="PointerOver">
                            <Storyboard>
                                <ColorAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="TestBackgroundGrid">
                                    <DiscreteColorKeyFrame KeyTime="0" Value="{StaticResource SomeBrush}"/>
                                </ColorAnimationUsingKeyFrames>
                            </Storyboard>
                        </VisualState>
                    </VisualStateGroup>
                </VisualStateManager.VisualStateGroups>
                <Grid x:Name="TestBackgroundGrid" Height="60" Width=60" Background="{StaticResource SomeStandardColourBrush}">
                </Grid>
            </Grid>
        </DataTemplate>
    </GridView.ItemTemplate>
</GridView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T18:33:05.477

很确定你不能。ItemTemplate 基本控件不处理任何鼠标/焦点事件，AFAIK。如果您可以为默认控件创建模板的副本并且它没有定义的视觉状态，则您无法定义新的并自动调用它们。在这种情况下，项目模板不知道任何鼠标/焦点/任何信息。没有时间确认这一切，但 99% 肯定。

# jquery - 如何在字体真棒图标上绑定事件？

> ID：12355180
> 
> 赞同：3
> 
> 时间：2012-09-10T15:51:08.797
> 
> 标签：jquery, font-awesome

我想将`click`事件绑定在一个很棒的字体图标上。然而，图标本身是不可点击的，只有当我插入额外的文本时，该文本才会被绑定。

如何绑定图标本身？

```
<span class="icon-star">
    only this text is clickable, the icon itself is not
</span>

<script type="text/javascript">
(function($) {
    $('span.icon-star').on('click', function() {
        console.log($(this));
    });
})(jQuery);
</script> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-10T17:18:06.127

如上所述，给跨度 a`block`或`inline-block`布局将解决问题。至于为什么非标准字体会发生这种情况，我不完全确定，但这可能是由于浏览器无法识别字符并因此假设`span`标签为空，从而将其折叠为 0 宽度和高度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-09-14T18:26:11.083

这是我使用的另一个解决方案，它似乎更清楚地回答了这个问题，只绑定图标，不需要其他文本。只需将其包装`span`在您设置 id 的位置即可。这是一个例子：

```
<span id="menuOpen">
  <i class="fa fa-navicon"></i>
</span> 

 $("#menuOpen").click(showMenu); 
```

希望可以帮助某人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-22T15:46:57.463

另一种解决方案是将 onClick 直接写入 i 标记，如下所示：

```
<i class="fa fa-navicon" onClick="functionName()"></i> 
```

是的，经过数小时的测试，上述解决方案完成了任务，然后我知道这可能是一个很棒的图标问题，搜索把我带到了这里。

# php - 如何从数组中检索值并检查它们是否匹配

> ID：12355182
> 
> 赞同：0
> 
> 时间：2012-09-10T15:51:11.657
> 
> 标签：php

我正在学习用 php 编程，我有一个小问题。我有两个数组：
数组 A：

```
array(10){
           [0]: string(10) "2012-08-01"
           [1]: int 1
           [2]: string(10) "2012-08-03"
           [3]: int 1
           [4]: string(10) "2012-08-07"
           [5]: int 2
           [6]: string(10) "2012-08-09"
           [7]: int 2
           [8]: string(10) "2012-08-27"
           [9]: int 1
          } 
```

阵列 B：

```
array(4){
          [0]: string(10) "2012-09-04"
          [1]: string(10) "2012-09-06"
          [2]: string(10) "2012-09-08"
          [3]: string(10) "2012-09-10"
        } 
```

我想检查数组 A 中的第一个元素是否等于数组 B 中的第一个元素，如果是，则将`1`数组 A 中的第二个元素（在本例中）写入新的数组 C（一维），否则不要在其中写入任何内容一个数组 C，然后检查数组 A 中索引为 2 的元素是否等于`[1]: string(10) "2012-09-06"`数组 B 中的第二个元素，如果是，则将`[3]: int 1`数组 A 中的第四个元素 ( ) 写入数组 C 等，因此数组 C 将只有 int 元素。如果有人可以帮我解决这个问题，我会很高兴

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T16:06:07.957

如果您真的需要这样做，您可以执行以下操作：

```
foreach($arrayB as $bRow)
{
    if(FALSE !== ($key = array_search($bRow, $arrayA))
    {
        $arrayC[] = $arrayA[$key+1];
    }
} 
```

但是，对于数组 A，字符串索引的数组可能会更好。对下面的 3 个示例使用以下内容：

```
$arrayA = array("2012-08-01" => 1, "2012-08-03" => 1, "2012-08-07" => 2, "2012-08-09" => 2, "2012-08-27" => 1);
$arrayB = array("2012-09-04", "2012-09-06", "2012-09-08", "2012-09-10");
$arrayC = array(); 
```

如果数组 A 总是包含比数组 B 更多的元素（或相同的数量）：

```
foreach($arrayA as $key=>$value)
{
    if(in_array($key, $arrayB))
    {
        $arrayC[] = $value;
    }
} 
```

如果数组 B 总是包含比数组 A 更多的元素（或相同的数量）：

```
foreach($arrayB as $bRow)
{
    if(isset($arrayA[$bRow]))
    {
        $arrayC[] = $arrayA[$bRow];
    }
} 
```

如果有时数组 A 更长，有时数组 B 更长：

```
$matchedIndexes = array();

foreach($arrayA as $key=>$value)
{
    if(in_array($key, $arrayB))
    {
        $arrayC[] = $value;
        $matchedIndexes[] = $key;
    }
}

foreach($arrayB as $bRow)
{
    // Only add the entries that we did not already add when looping through $arrayA
    if(!in_array($key, $matchedIndexes) && isset($arrayA[$bRow]))
    {
        $arrayC[] = $arrayA[$bRow];
    }
} 
```

为 arrayA 中的每个条目在 arrayB 中没有匹配项填充零：

```
foreach($arrayA as $key=>$value)
{
    if(in_array($key, $arrayB))
    {
        $arrayC[] = $value;
    }
    else
    {
        $arrayC[] = 0;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T16:07:04.550

首先，在 A 中有 5 对元素，在 B 中有 4 个元素。如果您不向 $b 添加元素，我的代码可能会产生错误。需要一个if语句，如果需要我会写。假设 $b 有 5 个元素（从 0 到 4），这应该可以工作，但在您的示例中，数组 C 将为空，因为 A 和 B 中的日期之间没有单一匹配：

```
$l=count($a); //$a is array A, $b is array B
$c=array(); //definition of empty array
for ($p=0;$p<$l;$p++) {
    if ($a[$p*2]==$b[$p]) 
        $c[]=$a[($p*2)+1]; // the way to add new element to C array is to use empty brackets
} 
```

# mysql - 在多个条件上关联 GROUP BY 和 LEFT JOIN 以显示最新记录？

> ID：12355187
> 
> 赞同：5
> 
> 时间：2012-09-10T15:51:34.267
> 
> 标签：mysql, sql, inventory-management

在一个简单的库存管理数据库中，添加新库存的数量并发货，直到数量达到零。每个库存移动都分配了一个参考，仅使用最新的参考。

在提供的示例中，从不显示最新的引用，股票 ID 的 1,4 应该分别有引用 charlie、foxtrot，而是显示 alpha、delta。

如何将多个条件上的 GROUP BY 和 LEFT JOIN 关联起来以显示最新记录？

[http://sqlfiddle.com/#!2/6bf37/107](http://sqlfiddle.com/#!2/6bf37/107)

```
CREATE TABLE stock (
  id tinyint PRIMARY KEY,
  quantity int,
  parent_id tinyint
);

CREATE TABLE stock_reference (
  id tinyint PRIMARY KEY,
  stock_id tinyint,
  stock_reference_type_id tinyint,
  reference varchar(50)
);

CREATE TABLE stock_reference_type (
  id tinyint PRIMARY KEY,
  name varchar(50)
);

INSERT INTO stock VALUES 
(1, 10, 1),
(2, -5, 1),
(3, -5, 1),
(4, 20, 4),
(5, -10, 4),
(6, -5, 4);

INSERT INTO stock_reference VALUES 
(1, 1, 1, 'Alpha'),
(2, 2, 1, 'Beta'),
(3, 3, 1, 'Charlie'),
(4, 4, 1, 'Delta'),
(5, 5, 1, 'Echo'),
(6, 6, 1, 'Foxtrot');

INSERT INTO stock_reference_type VALUES 
(1, 'Customer Reference');

SELECT stock.id, SUM(stock.quantity) as quantity, customer.reference
FROM stock
LEFT JOIN stock_reference AS customer ON stock.id = customer.stock_id AND stock_reference_type_id = 1
GROUP BY stock.parent_id 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T16:02:41.287

您可以使用子查询来提取每个股票组的最新 ID：

```
SELECT g.parent_id, g.quantity, customer.reference
FROM (
    SELECT parent_id, SUM(stock.quantity) as quantity, MAX(id) as LatestID
    FROM stock
    GROUP BY parent_id
) g LEFT JOIN stock_reference AS custome
    ON g.LatestID = customer.stock_id AND stock_reference_type_id = 1 
```

# iphone - 核心数据图像“无法识别的选择器......”

> ID：12355189
> 
> 赞同：0
> 
> 时间：2012-09-10T15:51:44.353
> 
> 标签：iphone, ios, core-data, uiimage

我有一个名为 Image 的实体的数据模型。这将用于存储图像。

以前我将图像作为特定实体的属性。

我设置了可变形的东西，一切都奏效了。

但是，现在我已将其移至一个单独的实体中，但我不断收到错误。

所以...这是 Image.m 文件的内容。

```
#import "Image.h"
#import "Person.h"

@implementation ImageToDataTransformer

+ (BOOL)allowsReverseTransformation {
    return YES;
}

+ (Class)transformedValueClass {
    return [NSData class];
}

- (id)transformedValue:(id)value {
    NSData *data = UIImagePNGRepresentation(value);
    return data;
}

- (id)reverseTransformedValue:(id)value {
    return [[UIImage alloc] initWithData:value];
}

@end

@implementation Image

@dynamic image;
@dynamic createdDate;
@dynamic person;

@end 
```

当我保存它时它不会抱怨当我创建它时它不会抱怨，我什至可以在 Person 实体中将它视为一个对象。

```
(Person *) $0 = 0x1002dec0 <Person: 0x1002dec0> (entity: Person; id: 0x4f8f30 <x-coredata://2800C028-8745-45FE-854B-5783FF3FC173/Person/p6> ; data: {
    avatar = "0x1007e540 <x-coredata://2800C028-8745-45FE-854B-5783FF3FC173/Image/p1>";
    createdDate = nil;
    email = nil;
    firstname = Blah;
    id = "1234567890987654321234567890";
    lastName = Blah;
    updatedDate = nil;
}) 
```

avatar 属性是与 Image 实体的关系（一对一）。

但是，如果我尝试访问图像的任何属性，我会得到这个......

```
-[_NSObjectID_64_2 createdDate]: unrecognized selector sent to instance 0x1007e540
-[_NSObjectID_64_2 image]: unrecognized selector sent to instance 0x1007e540 
```

等等等等……

产生错误的代码...

```
NSFetchRequest *request = [NSFetchRequest fetchRequestForEntityName:@"Person"];

[request setPredicate... blah];
NSArray *results = [context executeFetchRequest...];

Person *person = [results objectAtINdex:0];

NSLog(@"%@", person.firstName); //this works fine.
NSLog(@"%@", person.avatar.createdDate); //this crashes. 
```

尝试删除图像属性并仍然遇到同样的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T15:56:24.210

鉴于您正在生成的崩溃类型，请确保您在使用核心日期建模工具时分配了正确的类名。默认情况下，它不会使用实体名称创建子类，而是让您通过使用键值编码来访问属性值。去做你的建模工具，选择实体，然后在实用程序面板上的模型数据检查器上检查类名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T16:32:00.840

嗯，这完全是奇怪的。

我删除了实体并重新添加了它......仍然是同样的问题。

我再次删除它并添加了一个名为“StoredImage”而不是“Image”的实体，它运行良好，完全没有问题。

感谢所有的帮助。

# python - 在 Python 中运行但直接运行时不会出现 MySQL Query 错误

> ID：12355190
> 
> 赞同：4
> 
> 时间：2012-09-10T15:51:51.047
> 
> 标签：python, mysql, django

我正在传递`'2012-09-10 00:00:00-05:00'`给 MySQL 查询。该值是使用 Python 的[pytz 模块](http://pytz.sourceforge.net/)检索的。

```
import pytz
class MyClass():
    def __init____(self):
        self.tz = pytz.timezone(settings.TIME_ZONE)
        todaystart = self.tz.localize(datetime.now(self.tz).replace(hour=0, minute=0, second=0, microsecond=0, tzinfo=None), is_dst=None).astimezone(self.tz) 
```

MySQL 查询是这样的，之后`todaystart`被替换为：

```
SELECT * FROM mytable WHERE created > UNIX_TIMESTAMP(STR_TO_DATE('2012-09-10 00:00:00-05:00','%Y-%m-%d %k:%i:%s') - INTERVAL 1 DAY); 
```

如果我直接执行此查询，它会按预期返回数据。如果我将此查询放入代码中，则会出现此错误：`Warning: Truncated incorrect datetime value: '2012-09-09 00:00:00-05:00'`

我正在使用的代码是这样的（在 Django 中）：

```
query = """SELECT * FROM mytable WHERE created > UNIX_TIMESTAMP(STR_TO_DATE('2012-09-10 00:00:00-05:00','%Y-%m-%d %k:%i:%s') - INTERVAL 1 DAY);"""
myCursor = connections[system_db].cursor()
results = myCursor.execute(query)    # Dies on this statement
resultcount = results.fetchall() 
```

我在 MySQL 文档中没有看到str_to_date的偏移[格式字符串。](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_date-format)我希望保留该偏移量，因为数据是为第 3 方系统返回的，并且通过将其保留在适当的位置，我不必在该返回和使用返回日期执行查询之间执行任何逻辑。但是，我认为它与偏移量无关，因为如果我直接运行它，它就可以工作。

`Warning`当 Python 对 MySQL 运行查询时，我做错了什么会导致出现这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T13:46:07.653

马克 B 说得对。

直接执行时，您会收到警告，但可能没有注意到：

```
mysql> SELECT * FROM mytable WHERE created > UNIX_TIMESTAMP(STR_TO_DATE('2012-09-10 00:00:00-05:00','%Y-%m-%d %k:%i:%s') - INTERVAL 1 DAY);
Empty set, 3 warnings (0.00 sec)

mysql> show warnings;
+---------+------+----------------------------------------------------------------------+
| Level   | Code | Message                                                              |
+---------+------+----------------------------------------------------------------------+
| Warning | 1292 | Truncated incorrect datetime value: '2012-09-10 00:00:00-05:00'      |
| Warning | 1292 | Truncated incorrect datetime value: '2012-09-10 00:00:00-05:00'      |
| Warning | 1292 | Incorrect datetime value: '1347148800' for column 'created' at row 1 |
+---------+------+----------------------------------------------------------------------+
3 rows in set (0.00 sec) 
```

# android - 一次且仅显示一次 DialogFragment

> ID：12355196
> 
> 赞同：4
> 
> 时间：2012-09-10T15:52:23.887
> 
> 标签：android, android-fragments

我想在调用给定回调时向用户显示 DialogFragment。我的问题是有时同时对侦听器进行多次调用，并且片段管理器显示多个片段，我正在使用以下代码

```
 if (getSupportFragmentManager().findFragmentByTag("testFragment") == null) {
        getSupportFragmentManager().beginTransaction()
                .add(new MyFragment(), "testFragment")
                .commit();
        Log.e("TAG", "Show! "+(getSupportFragmentManager()
                    .findFragmentByTag("testFragment") == null));
    } 
```

正如最后一行中的日志消息所示，在提交 FragmentTransaction 后，findFragmentByTag 会在短时间内返回 null。那么，是否有某种方法可以确保只显示一次比保存最后一次提交调用的 mili-time 并在一秒钟内忽略以后的调用更优雅的方法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-10T16:04:22.403

在提交后立即调用`getSupportFragmentManager().executePendingTransactions()`应该强制片段管理器立即提交片段，以便后续调用`findFragmentByTag("testFragment")`不应再返回 null。

# three.js - 变形目标可以与 three.js canvasrenderer 一起使用吗？

> ID：12355203
> 
> 赞同：0
> 
> 时间：2012-09-10T15:52:49.853
> 
> 标签：three.js

简单的问题。变形目标可以与 three.js canvasrenderer 一起使用吗？如果没有，我有办法伪造它吗？就像我有一架上面有图像的飞机。我有一堆要移动的顶点，它们会变形图像。这甚至可以用画布吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T17:08:25.913

我们还没有实施。还需要尝试在 CanvasRenderer 中实现 BufferGeometry。

# javascript - 如何查找祖先元素并查询其元数据

> ID：12355206
> 
> 赞同：0
> 
> 时间：2012-09-10T15:53:01.937
> 
> 标签：javascript, jquery, parents

我有一个包含嵌套表的 html：

```
<table ....
<tbody ...
<tr ...
    <td class="Field">item1_1</td>
        <td class="Value">
        <table ...
        <tbody...
        <tr
            <td class="Field">0</td>
            <td class="Value">
            <table ...
                .... 
```

可点击元素是字段。当用户单击一个字段时，我需要找到包含其表的表（最多 2 个表）并检查其元数据。我尝试使用：

```
field.parents("table")[1] 
```

这将返回正确的表，但它不允许我查询其元数据：

```
field.parents("table")[1].data("isArray") 
```

你能帮我弄清楚如何查询包含表的元数据吗？

谢谢，李

ps我只能通过使用来做到这一点：

```
field.parent().parent().parent().parent().parent().parent().parent().parent().data("isArray") 
```

但我真的很想避免这种丑陋。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T15:57:41.147

您遇到的问题是索引 jquery 对象的数组将返回一个 dom 对象。您可以改为使用`eq`来获取 jquery 对象。

```
field.parents("table").eq(1).data("isArray") 
```

如果您能够修改html。一种更简洁的方法是将一个类分配给您尝试获取的表，然后使用[最接近的](http://api.jquery.com/closest/)。

```
field.closest(".someClass").data("isArray") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T15:58:10.060

看到这个电话

`field.parents("table")[1].data("isArray")`

我假设您正在使用 jQuery.data() 方法。如果是，那么按索引调用将返回一个 HTMLElement 而不是 jQuery 对象。在这种情况下，将您的代码更改为

`$(field.parents("table")[1]).data("isArray")`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T16:01:00.963

`eq()`将解决问题，但为了简单起见，您可以将 an 分配`id`给外部表并创建对`table`仅一次的引用，而无需在每次用户单击时都找到它。

还要考虑`eq()`如果您再次将字段嵌套在另一个表中，使用可能会产生一些维护问题，因为您完全依赖于返回的集合的索引`parents()`来检索最外面的表

否则，如果该表是唯一具有内联`data-*`属性的表，您可以使用

```
field.closest('table[data-isArray]'); 
```

# javascript - 如何从 rgb/rgba 字符串中获取红色绿色和蓝色值？

> ID：12355212
> 
> 赞同：2
> 
> 时间：2012-09-10T15:53:30.413
> 
> 标签：javascript, jquery, regex

如果我有字符串`rgba(111,222,333,0.5)`，我如何从字符串中提取单个颜色，即

```
red => 111
green => 222
blue => 333
opacity => 0.5 
```

我希望能够为此使用一个简洁干净的解决方案，所以我假设正则表达式是最好的？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-10T16:00:11.157

对于可预测的字符串，我会避免使用正则表达式，并建议：

```
// assigning the rgb() colour to a variable:
var colorString = "rgba(111,222,333,0.5)",

    // using String.prototype.substring() to retrieve
    // the substring between the indices of the opening
    // and closing parentheses:
    colorsOnly = colorString.substring(
        // here we find the index of the opening
        // parenthesis, and add 1 to that index
        // so that the substring starts after that
        // parenthesis:
        colorString.indexOf('(') + 1,

        // and terminating the substring at the
        // index of the closing parenthesis:
        colorString.lastIndexOf(')')
      // here we split that substring on occurrence
      // of a comma followed by zero or more white-
      // space characters:
      ).split(/,\s*/),

    // String.prototype.split() returns an Array,
    // here we assign those Array-elements to the
    // various colour-, or opacity-, variables:
    red = colorsOnly[0],
    green = colorsOnly[1],
    blue = colorsOnly[2],
    opacity = colorsOnly[3];
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/PN4pe/)。

或者，假设您希望返回一个对象：

```
var colorString = "rgba(111,222,333,0.5)",
  colorsOnly = colorString.substring(colorString.indexOf('(') + 1, colorString.lastIndexOf(')')).split(/,\s*/),
  // here we initialise an empty Object:
  components = {};
// here we assign the Array-elements to the
// named properties of that Object:
components.red = colorsOnly[0];
components.green = colorsOnly[1];
components.blue = colorsOnly[2];
components.opacity = colorsOnly[3];

console.log(colorsOnly, components);
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/PN4pe/1/)。

编辑为使用更现代的 JavaScript：

```
const colorString = "rgba(111,222,333,0.5)",
  // here we use destructuring assignment to assign the returned Array-elements
  // - in respective order - to the named variables:
  [red, green, blue, opacity] = colorString.substring(colorString.indexOf('(') + 1, colorString.lastIndexOf(')')).split(/,\s*/),
  // passing the variables into the Object Literal; in this instance
  // we're passing in the variables which are the literal name of the
  // properties they define and which also contain the relevant value:
  colorObject = {
    red,
    green,
    blue,
    opacity
  };
console.log(red, green, blue, opacity, colorObject);
```

参考：

*   [`Array.prototype.indexOf()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/indexOf).
*   [解构赋值](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment)。
*   [`String.prototype.split()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/split).
*   [`String.prototype.substring()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/substring).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-10T15:56:26.440

正则表达式将是：

```
^rgba\(([^,]+),([^,]+),([^,]+),([^,]+)\)$ 
```

Javascript代码：

```
var regex = /^rgba\(([^,]+),([^,]+),([^,]+),([^,]+)\)$/g; 
var input = "rgba(111,222,333,0.5)"; 
if(regex.test(input)) {
  var matches = input.match(regex);
  for(var match in matches) {
    alert(matches[match]);
  } 
} else {
  alert("No matches found!");
} 
```

您可能希望修剪匹配项和/或将值转换为数字以在 JavaScript 中获取所需的 RGBA 值。

[在RegexHero](http://regexhero.net/tester/?id=827ab00e-937a-4705-8f21-0d766bd382c6)玩这个

如果您想处理正则表达式本身的参数之间的空格，它可能会开始看起来像这样丑陋：

```
^rgba\(\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*\)$ 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-04-22T09:55:36.273

使大卫更简单和解释

```
 var colorString = "rgba(111,222,333,0.5)";
 var colorsOnly = colorString.split(")"); //gives "rgba(111,222,333,0.5" at index 0
 var colorsOnly = colorString[0].split("(");   //gives "111,222,333,0.5 at index 1
 var colorsOnly = colorString[1].split(","); 
```

在 [0] 处给出“111”，在 [1] 处给出“222”，在 [2] 处给出“333”，在 [3] 处给出“0.5”，**但注意：**所有这些都具有字符串数据类型，因为所有这些都是子字符串。

```
red = parseInt(colorsOnly[0]);
green = parseInt(colorsOnly[1]);
blue = parseInt(colorsOnly[2]);
opacity = parseFloat(colorsOnly[3]); 
```

使用`parseInt()`和`parseFloat()`方法将字符串分别转换为整数和浮点数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-07T00:16:28.913

对于 Ahmed Bilal 的回答，我有一些需要纠正的地方。如果我错了，也请随时纠正我！:)

它应该是：

```
 var colorsOnly = colorString.split(")");
    var colorsOnly = colorString.split("(");
    var colorsOnly = colorsOnly[1].split(","); 
```

注意第四句的变化。由于第三句中的 ColosOnly 代表了“（”拆分后的结果。所以我认为应该`colorsOnly[1]`在第三句中。我自己尝试过并得到了证明。

再次，如果我错了，也请随时纠正我！:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-09-14T01:41:40.493

这是另一种解决方案。

```
const rgbaStrToValues = function( rgba ) {
    const realNumPattern = '([+-]?\\d*\\.?\\d+)';
    const rgbaPattern = `rgba?\\(` +
        ` *${ realNumPattern } *, *${ realNumPattern } *,` +
        ` *${ realNumPattern } *(?:, *${ realNumPattern } *)?\\)`;
    const regexp = new RegExp( rgbaPattern );
    const result = regexp.exec( rgba );
    if ( ! result ) { return; }

    const { 1: red, 2: green, 3: blue, 4: alpha } = result;
    if ( ! ( red && green && blue ) ) { return; }

    const { min, max } = Math;
    return {
        red  : max( min( Number( red ), 255 ), 0 ),
        green: max( min( Number( green ), 255 ), 0 ),
        blue : max( min( Number( blue ), 255 ), 0 ),
        alpha: alpha ? max( min( Number( alpha ), 1 ), 0 ) : 1,
    };
};

rgbaStrToValues( 'rgba( 111, 222, 333, 0.5 )' ); 
```

我用日语写了这段代码的描述

*   ['rgb[a](R, G, B[, A])' を正规で处理して、各値をメンバーとしてもつオブジェクトを返す关数。 - Qiita](https://qiita.com/juthaDDA/items/d81f45295095eb4563f4)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-09-10T16:00:01.843

如果它始终采用 rgba 格式，您可以执行以下操作：

```
var str = 'rgba(111,222,333,0.5)'

var red = str.substr(5,3);
var green = str.substr(9,3);
var red = str.substr(13,3); 
```

# sql - 根据日期分组记录总数

> ID：12355216
> 
> 赞同：3
> 
> 时间：2012-09-10T15:53:44.267
> 
> 标签：sql, sql-server, sql-server-2008, count, group-by

在我`SqlServer 2008`的表中，我有一个名为 Table1 的表，其中有一列名为`IncDate`DateTime。

我需要运行一个查询，返回该日期的记录总数。例如，我的表有这些记录：

```
IncDate
09/09/2012 16:21:51.547
09/09/2012 16:22:11.032
10/09/2012 13:51:33.327 
```

我的查询需要输出：

```
Date................Total
09/09/2012...........2 
10/09/2012...........1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T15:57:23.853

您需要`CAST()`将日期设置为仅日期。

```
SELECT Cast(incdate as date) DateOnly, Count(*) AS Total
FROM yourtable
GROUP BY Cast(incdate as date) 
```

# 见[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/bd075/2)

如果您没有`CAST()`仅日期到日期，则计数将关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T15:56:10.100

这是一种方法：

```
select cast(incdate as date) as date, count(*)
from table1
group by cast(incdate as date)
order by 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T15:59:26.100

尝试

```
SELECT cast(incdate as [date]) as [idate], count(incdate) totalCount
FROM table1
GROUP BY cast(incdate as [date])
ORDER BY totalCount 
```

# php - 如何使用 NuSOAP（客户端）设置命名空间

> ID：12355218
> 
> 赞同：0
> 
> 时间：2012-09-10T15:53:49.447
> 
> 标签：php, web-services, nusoap, webservices-client

几个月前我问过这样的问题，但问题是 WebService 工作不正常。现在它工作得很好，我仍然无法提出一个简单的请求。首先，我用[http://www.validwsdl.com/](http://www.validwsdl.com/)试了一下 ，WS是`http://amibcertifica.amib.com.mx:9090/axis2/services/JpaWebServicesAmib?wsdl` 你可以自己试试。它适用于该网站。现在我正在尝试使用 NuSOAP 发出请求，但出现此错误：`namespace mismatch require http://ws.mobius.amib found http://tempuri.org`

你可以在这里检查整个错误：http: [//dev.etic.com.mx/bmv/test.php](http://dev.etic.com.mx/bmv/test.php)

我的代码如下：

```
<?php 
require_once('nusoap/lib/nusoap.php');

$url = "http://amibcertifica.amib.com.mx:9090/axis2/services/JpaWebServicesAmib?wsdl";

try
{
    $client = new nusoap_client($url);
    $err = $client->getError();
if ($err) {
    // Display the error
    echo '<h2>Constructor error</h2><pre>' . $err . '</pre>';
    // At this point, you know the call that follows will fail
}
    $result = $client->call('findAllComprobanteOperacion');
}
catch (SoapFault $e)
{
    echo 'Error0'.$e->getMessage() . "\n";
}

echo '<pre>';print_r( $result );
echo $client->debug_str;
?> 
```

NuSOAP 版本：`$Id: nusoap.php,v 1.123 2010/04/26 20:15:08 snichol Exp $`

我一直在网上寻找如何做到这一点，但我完全一无所知，所以非常感谢任何帮助。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-05T21:22:17.437

通过将命名空间声明为参数来设置命名空间。默认情况下，命名空间设置为“ [http://tempuri.org](http://tempuri.org) ”（一些肥皂服务器需要额外的正斜杠，如“ [http://tempuri.org/](http://tempuri.org/) ”）。所以当你使用 call 函数时，你可以像这样在第三个参数中设置命名空间：

```
$result = $client->call('findAllComprobanteOperacion', null, 'http://tempuri.org/'); 
```

您还可以声明您的参数并设置第四个参数 SoapAction，如下所示：

```
$result = $client->call('findAllComprobanteOperacion', array('Argument1' => 'value1', 'Argument2' => 'value2'), 'http://tempuri.org/', 'SoapActionHere'); 
```

默认情况下，NuSoap 还强制使用 1000 到 9999 之间的随机数作为命名空间的前缀（变量名）。服务器也可能不喜欢这点。没有内置的方法来实际纠正这个问题。我只是编辑了 nusoap.php 来解决这个问题。在第 7431 行（或附近），您会发现：

```
$this->debug("wrapping RPC request with encoded method element");
if ($namespace) {
// http://www.ws-i.org/Profiles/BasicProfile-1.1-2004-08-24.html R2735 says rpc/literal accessor elements should not be in a namespace
    $payload = "<$nsPrefix:$operation xmlns:$nsPrefix=\"$namespace\">" .
            $payload . "</$nsPrefix:$operation>";
} else {
    $payload = "<$operation>" . $payload . "</$operation>";
} 
```

将其更改为：

```
if ($namespace) {
    $payload = "<$operation xmlns=\"$namespace\">" .
        $payload . "</$operation>";
} else {
    $payload = "<$operation>" .
            $payload . "</$operation>";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T16:48:48.123

这比我想象的要简单。我只需将 nusoap_client 的第二个参数设置为 TRUE（因为它默认为 FALSE）。所以，`$client = new nusoap_client($url, TRUE);` 就是这样。不管怎么说，还是要谢谢你。

# int - const int 的多重定义

> ID：12355229
> 
> 赞同：-1
> 
> 时间：2012-09-10T15:54:24.617
> 
> 标签：int, constants

我有一个头文件`A.h`，我在其中定义了一个`const int ID = 4;`. 我已将此头文件包含在 C 文件`A.c`和`main.c`. 我使用了标头保护`#ifndef A_H #define A_H`等。但是`multiple definition of ID`当我尝试编译代码时出现错误。我在某处读到，在大多数情况下，可以通过使用来避免这种情况，`#pragma once`但我仍然得到错误。我的问题是如何在 C 中定义变量？我是否必须将 ID 的定义移至 C 文件，然后我必须在我使用的每个文件中声明它？还是`extern`在这种情况下使用唯一的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T15:58:35.310

在 C 中，每个对象只能有一个定义。`.o`如果您有多个文件（编译单元），包括警卫和类似的东西对此没有帮助。他们每个人都有一个副本，这是不允许的。

如果您不需要该对象的地址并且只对它的常量值感兴趣，则可以将其替换为

```
enum { ID = 4 }; 
```

`ID`这定义了一个类型的命名值`int`，您可以轻松地将其放入头文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T15:55:29.220

是的，使用`extern`是唯一的解决方案。`pragma`或 include 保护防止在同一个翻译单元中多次包含，这是一个多重定义错误。

# awk - AWK 错误：尝试在标量上下文中使用数组

> ID：12355230
> 
> 赞同：6
> 
> 时间：2012-09-10T15:54:24.797
> 
> 标签：awk

我正在学习AWK。这是一个简单的代码片段，我试图将一个字符串拆分为一个数组并遍历它。

```
BEGIN {
  split("a,b,c", a, ",");

  for(i = 1; i <= length(a); i++) {
    print a[i];
  }
} 
```

在运行此代码时，我收到以下错误：

> awk：awk.txt:4：致命：尝试在标量上下文中使用数组“a”

但是，如果我将 for 语句更改为`for (i in a)`它就可以了。在进一步尝试通过谷歌搜索来理解这意味着什么时，我看到许多论坛（例如：[[1]](http://compgroups.net/comp.lang.awk/gawk-length-array-question/192376)）在谈论[awk 错误](http://awk.freeshell.org/Frequently_Asked_Questions#toc9)。如果这里的 AWK 专家可以帮助我理解错误消息的含义，那就太好了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-10T16:00:09.663

`length`需要一个字符串参数。您正在向它传递一个数组。错误消息告诉您您正在使用需要标量的数组。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-10T16:03:50.860

```
BEGIN {
  count = split("a,b,c", a, ",");

  for(i = 1; i <= count; i++) {
    print a[i];
  }
} 
```

此外，`length(ARRAY)`适用于我的 awk 版本（GNU awk 4.0.1），但文档指出该行为是非标准的。

# java - 如何使用 Shiro 的 SaltedAuthenticationInfo？

> ID：12355231
> 
> 赞同：6
> 
> 时间：2012-09-10T15:54:26.903
> 
> 标签：java, salt, shiro

我为我的应用程序开发一个身份验证组件。我正在使用带有加盐密码的 Apache Shiro API。

我用这个例子中的盐创建了一个新用户：

```
ByteSource salt = randomNumberGenerator.nextBytes(32);      
byte[] byteTabSalt = salt.getBytes();   
String strSalt = byteArrayToHexString(byteTabSalt);         
String hashedPasswordBase64 = new Sha256Hash(inPassword, salt, 512).toBase64(); 
```

但我不明白我应该如何使用盐在 doGetAuthenticationInfo 方法中对用户进行身份验证。我的方法必须返回一个 SaltedAuthenticatedInfo 但我不明白我应该如何创建它。

我不明白 Credential Matcher 和 SaltedAuthenticateInfo 之间的联系。

创建密码盐时是否必须通知凭据匹配器？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-11T17:42:14.857

## SaltedAuthenticationInfo

`SaltedAuthenticationInfo`是一个接口。为了方便起见，Shiro API 提供了许多默认实现。尽可能尝试使用默认实现之一；避免创建自己的。
我建议`SimpleAuthenticationInfo`哪些实现不仅仅是`SaltedAuthenticationInfo`但可能足以满足您的目的。
有关详细信息，请参阅[org.apache.shiro.authc.SimpleAuthenticationInfo](http://shiro.apache.org/static/current/apidocs/org/apache/shiro/authc/SimpleAuthenticationInfo.html "Shiro JavaDoc")。

如果你绝对需要实现你自己的`SaltedAuthenticationInfo`，你应该仔细阅读文档。
有关详细信息，请参阅[org.apache.shiro.authc.AuthenticationInfo](http://shiro.apache.org/static/current/apidocs/org/apache/shiro/authc/AuthenticationInfo.html "Shiro JavaDoc")和[org.apache.shiro.authc.SaltedAuthenticationInfo](http://shiro.apache.org/static/current/apidocs/org/apache/shiro/authc/SaltedAuthenticationInfo.html "Shiro JavaDoc")。

## HashedCredentialMatcher

`boolean doCredentialsMatch(AuthenticationToken, AuthenticationInfo)`实际上负责身份验证逻辑。
此方法以 an 的形式获取用户提交的凭据，`AuthenticationToken`并将它们与以前存储的 形式的凭据进行比较`AuthenticationInfo`。
不过，您必须确保将所有必要的信息传递给`HashCredentialMatcher`first （迭代、算法和`SaltedAuthenticationInfo`.

伪示例使用，

```
final int iterations = 50000;

AuthenticationToken authToken = ...;
SaltedAuthenticationInfo saltedAuthInfo = ...;

HashedCredentialsMatcher authenticator = 
     new HashedCredentialsMatcher(Sha256Hash.ALGORITHM_NAME);
authenticator.setHashIterations(iterations);

final boolean successfulAuthentication = 
     authenticator.doCredentialsMatch(authToken, saltedAuthInfo); 
```

有关详细信息，请参阅[org.apache.shiro.authc.credential.HashedCredentialsMatcher](http://shiro.apache.org/static/current/apidocs/org/apache/shiro/authc/credential/HashedCredentialsMatcher.html "Shiro JavaDoc")。

## 其他安全注意事项

*   **盐长度**
    256 位盐看起来不错。使用这么大的盐，您可以最大限度地降低任何两个用户共享相同盐的风险。[在选择生日悖论](http://en.wikipedia.org/wiki/Birthday_problem)起作用 的盐长度时请记住。

*   **迭代次数**
    根据经验，您*永远*不应使用少于 10,000 次。您目前使用 512，

    ```
    String hashedPasswordBase64 = new Sha256Hash(inPassword, salt, 512).toBase64(); 
    ```

    大多数散列算法都非常快（包括 sha256），你不想给任何潜在的黑客任何好处。您使用的迭代越多，身份验证就越慢，但它也会直接减慢破解尝试的速度。

    您将希望将迭代次数设置得尽可能高，同时仍为您的应用程序保持可接受的响应能力。你可能会惊讶于你能走多高。
    我个人倾向于使用数百万；但我很偏执，不介意稍有延迟。有关更多信息，
    请参阅[Key Stretching](http://en.wikipedia.org/wiki/Key_stretching)。

*   **就我个人而言，我会避免对任何散列参数（散列算法、盐大小、迭代计数等）**
    进行硬编码。 通过硬编码这些值，您会限制您立即适应和响应的能力。

    使用散列凭据存储这些值允许您进行更动态的身份验证，您可以在未来以相对较少的工作量配置和推出更强大的算法。

    例如，您的默认散列算法可能是使用 50,000 次迭代和 256 位盐的 sha256。在未来，尽管 50,000 次迭代可能还不够。
    无需大惊小怪，您就可以将首选算法配置更改为对所有新密码进行 100,000 次迭代。您不必担心破解旧密码，因为您不会更改使用现有凭据存储的算法参数。您还可以使用它来更改盐大小甚至完全更改算法。

    如果需要，您可以让每个人都更改密码；迫使用户选择新的（希望更强大）首选算法设置。
    Unix 操作系统多年来一直使用[/etc/shadow](http://en.wikipedia.org/wiki/Shadow_password)做到这一点。

    前期需要付出更多的努力，但值得投资。强大的身份验证控制至关重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T11:49:23.080

我的错误是没有正确创建用于比较 AuthenticationToken 的 AuthenticationInfo。所以在我自己领域的 doGetAuthenticationInfo 方法中，我这样做：

```
Object principal   = arg0.getPrincipal();
Object credentials = arg0.getCredentials();
String realmName   = this.getName(); // to get the realm name

SimpleAuthenticationInfo simpleAuthenticationInfo = new SimpleAuthenticationInfo(principal, credentials, realmName);

CredentialsMatcher credentialsMatcher = this.getCredentialsMatcher();
boolean successfulAuthentication = credentialsMatcher.doCredentialsMatch(arg0, simpleAuthenticationInfo); 
```

所以布尔成功认证是真的。但我不明白 CredentialsMatcher 和 HashedCredentialsMatcher 之间有什么区别，因为那个是假的。我必须阅读 Javadoc。

# datagrid - 单击任何按钮后，将在数据网格中添加一个额外的行

> ID：12355234
> 
> 赞同：2
> 
> 时间：2012-09-10T15:54:39.987
> 
> 标签：datagrid, row

我有一个弹出数据网格，允许用户向数据库添加信息。它工作得很好，除了用户必须点击“接受”两次。第一次添加另一行，第二次执行正确的功能。（用户可以点击屏幕上的任何按钮，它会添加额外的行）怎么办？

XAML

```
<DataGrid Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="2" FontSize="17"          AutoGenerateColumns="False" EnableRowVirtualization="True" 
                              Margin="15" Name="addProductDataGrid" RowDetailsVisibilityMode="VisibleWhenSelected"  Visibility="Collapsed" CanUserAddRows="True">
    <DataGrid.Columns>
          <DataGridTextColumn x:Name="prodNameColumn1" Binding="{Binding One}" Header="Name" Width="250"/>
         <DataGridTextColumn x:Name="prodPriceColumn1" Binding="{Binding Two}" Header="Price" Width="100" />
         <DataGridTextColumn x:Name="prodCategoryNameColumn1" Binding="{Binding Three}" Header="Category" Width="200"/>
    </DataGrid.Columns>
</DataGrid> 
```

代码

```
AddInput.Visibility = System.Windows.Visibility.Collapsed;
_currentDataGrid.Visibility = System.Windows.Visibility.Collapsed;
MenuDirectEntities db = new MenuDirectEntities();
BindingList<product> tempproduct = new BindingList<product>();
BindingList<Category> tempCategory = new BindingList<Category>();

            String productName = "";
            Decimal price = 0.00M;
            String categoryName = "";

            for (int i = 0; i < addProductDataGrid.Items.Count; i++)
            {
                TextBlock x = addProductDataGrid.Columns[0].GetCellContent(addProductDataGrid.Items[i]) as TextBlock;
                if (x != null)
                {
                    if (!x.Text.Equals(""))
                    {
                       // Console.WriteLine(x.GetType());
                       // Console.WriteLine("Product " + i + ": " + x.Text);
                        productName = x.Text;
                    }
                    else
                    {
                        break;
                    }
                }

                TextBlock y = addProductDataGrid.Columns[1].GetCellContent(addProductDataGrid.Items[i]) as TextBlock;
                if (y != null)
                {
                    if (!y.Text.Equals(""))
                    {
                       // Console.WriteLine("Price " + i + ": " + y.Text);
                        price = Convert.ToDecimal(y.Text);
                    }
                    else
                    {
                        break;
                    }
                }

                TextBlock z = addProductDataGrid.Columns[2].GetCellContent(addProductDataGrid.Items[i]) as TextBlock;
                if (z != null)
                {
                    if (!z.Text.Equals(""))
                    {
                        //Console.WriteLine("Category " + i + ": " + z.Text);
                        categoryName = z.Text;
                    }
                    else
                    {
                        break;
                    }
                }
                theSender.SendToDB(new product() { prodName = productName, prodPrice = price, prodCategoryName = categoryName });
            }

            foreach (product theT in db.products)
            {
                tempproduct.Add(theT);
            }

            productDataGrid.ItemsSource = tempproduct;
            addProductDataGrid.ItemsSource = new BindingList<TestGridItem>();
        }
    }
    private void cancelAddButton_Click(object sender, RoutedEventArgs e)
    {
        AddInput.Visibility = System.Windows.Visibility.Collapsed;
        _currentDataGrid.Visibility = System.Windows.Visibility.Collapsed;
    } 
```

附加信息

```
public class TestGridItem
{
    public string One { get; set; }
    public string Two { get; set; }
    public string Three { get; set; }
    public string Four { get; set; }
}

addProductDataGrid.ItemsSource = new BindingList<TestGridItem>(); 
```

# javascript - 即使在验证函数抛出未捕获的异常之后，表单也提交

> ID：12355236
> 
> 赞同：1
> 
> 时间：2012-09-10T15:54:46.703
> 
> 标签：javascript, forms, submit

我有一个表单，其验证函数一行会引发未捕获的异常，但浏览器不会停止执行，而是提交表单

[http://jsfiddle.net/yur4U/1/](http://jsfiddle.net/yur4U/1/)

```
 function validation(){
   var value = document.forms["myform"]['badInput'].value;//this line throws an exception
   return false;
 }​

<form name='myform' action ="" onsubmit="return validation()" method="POST">
    <input name='myInput' value="testing" type="text"/>
     <input value="submit" type="submit"/>
</form > 
```

上面提供的代码是一个简单的示例，但我可能正在进行一些可能产生异常的计算或转换。处理此问题的一种方法是将其包含在 try catch

```
function validation(){
   var ret =true;
   try{
       var value = document.forms["myform"]['badInput'].value;
       ......//some condition to make ret=false
   } catch(e){
       ret = false
   }
   return ret;
 }​ 
```

但我正在寻找更好的方法来做到这一点？我认为浏览器应该默认处理这个问题，如果 onsubmit 函数抛出异常，规范中是否有提到浏览器应该如何表现？

​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T16:04:31.240

```
var value = document.forms["myform"]['badInput'].value;
//this line throws an exception 
```

因为您的表单中没有“badInput”命名元素。尽管最好使用`form.elements["elementName"]`甚至更好地使用 JS 框架（如 jQuery/dojo/等）。

如果您仍然需要这条线，您可以检查`typeof`：

```
if (typeof document.forms["myform"].elements['badInput'] != "undefined")
   ... 
```

# mysql - 服务器错误 MySQL 错误 - Flex 中的 1064

> ID：12355237
> 
> 赞同：-1
> 
> 时间：2012-09-10T15:55:00.417
> 
> 标签：mysql

跟随功能不起作用

```
public function matchingService() {

    $stmt = mysqli_prepare($this->connection, "
    INSERT INTO reusematching.matchedtable(user_idUser, productDetail_idProduct,Status,applyData)
        SELECT  waitinglist_user.user_idUser, 
                waitinglist_product.ProductDetail_idProduct, 
                productstatus,          
                waitinglist_user.waitinglistUser_applydata
                FROM reusematching.waitinglist_user, 
                reusematching.waitinglist_product, 
                productinformation.productdetail, 
                productinformation.productstatus
                where (waitinglistProduct_status = 1 
                and waitinglistUser_status = 1 
                and productCategroy_productCategroyID = waitinglistUser_applyProductType
                and ProductDetail_idProduct = idProduct
                and idStatus = waitinglistProduct_status);

    SET SQL_SAFE_UPDATES=0; 

    DELETE FROM reusematching.waitinglist_user
    WHERE Exists
                    (SELECT matchedtable.idMatchedTable
                        FROM  reusematching.matchedtable 
                        where  matchedtable.user_iduser= waitinglist_user.user_idUser);

    DELETE FROM reusematching.waitinglist_product
    WHERE Exists
                    (SELECT matchedtable.idMatchedTable
                        FROM  reusematching.matchedtable 
                        where  matchedtable.ProductDetail_idProduct
                                = waitinglist_product.ProductDetail_idProduct);

    SET SQL_SAFE_UPDATES=1;

    "); 

    $this->throwExceptionOnError();

    mysqli_stmt_execute($stmt);
    $this->throwExceptionOnError();

    mysqli_stmt_free_result($stmt);
    mysqli_close($this->connection);

    return null;
} 
```

显示的弹性

> 服务器错误 MySQL 错误 - 1064：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 18 行的 'DELETE FROM reusematching.waitinglist_user WHERE Exists (SELECT matche' 附近使用正确的语法

为什么我有这个错误？以及如何调试它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T17:00:31.067

PHP 中的 mysql 驱动程序不允许在单个 query() 调用中发出多个查询。旧的 mysql 和新的 mysqli 函数都是如此。这是一种防止某些形式的 SQL 注入攻击的安全措施。

您必须将您可怕的大查询语句拆分为多个（较小）单独的查询：

```
a) INSERT ... SELECT
b) SET ...
c) DELETE ..
d) etc... 
```

# java - 如何在没有 Shade 插件的情况下编译 DropWizard？

> ID：12355241
> 
> 赞同：3
> 
> 时间：2012-09-10T15:55:10.070
> 
> 标签：java, maven, maven-2, maven-shade-plugin, dropwizard

我试图让我的 DropWizard 项目工作，但我无法编译它而不会出现一百万个重复的依赖错误。错误是由 Shade 插件和我的 com.thinkaurelius.titan 插件引起的。使用 Shade 时 Titan 拒绝在没有重复错误的情况下编译，所以我想摆脱 shade。

当我尝试在没有 Shade 的情况下编译我的项目时，java 无法使用我的 main 方法找到该类。

有任何想法吗？:)

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-02T21:20:08.497

Shade 插件解压缩所有依赖项 jar 以使它们在您的可执行 jar 的类路径中可用。一些依赖项带来了导致重复 jars 错误的常见依赖项。您可以通过检查依赖关系树并排除重复的 jar 来解决此问题。

要遵循的步骤：

1.  mvn -DskipTests=true 全新安装
2.  mvn 依赖：树
3.  排除重复依赖项

# php - Login_redirect 挂钩不起作用

> ID：12355244
> 
> 赞同：-2
> 
> 时间：2012-09-10T15:55:20.657
> 
> 标签：php, wordpress, redirect, login, hook

我已经按照下面描述的相同方式使用了这个钩子，可能出了什么问题？

```
class my_plugin {

    function __construct()
    {
        parent::__construct();

        var_dump(__LINE__); // run 
        add_filter('login_redirect', array($this, 'login_redirect'));
    }

    function login_redirect()
    {
        var_dump(__LINE__); // not run
    }

} 
```

**编辑 1**

这`hook`在成功登录过程后运行。正如我所说，我在另一个插件中使用了这个钩子。问题是什么可能导致此故障？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T16:36:40.957

好的，我知道了。

**作为记录：**

可以肯定，这可以帮助其他人。确实，前段时间我遇到了由相同原因触发的问题：`is_admin()`错误使用：

我的入门代码是：

```
if (is_admin())
{
    // block 1
    // 
    // run admin classes
    // including my_plugin class
    // that includes login_redirect hook // WRONG!
}
else
{
    // block 2
    // 
    // run frontend classes
} 
```

`login_redirect`钩子不在管理页面内运行（`is_admin()`条件）

**解决方案**：将 login_redirect 钩子移动到前端块

# java - Tomcat中JPA+Spring+Hibernate的容器管理事务

> ID：12355245
> 
> 赞同：1
> 
> 时间：2012-09-10T15:55:23.897
> 
> 标签：java, spring, hibernate, tomcat, jpa-2.0

我正在尝试使用 JPA、Spring、hibernate 和 tomcat 配置 JOTM。我以某种方式进行了配置，但它既不执行插入也不执行更新，换句话说，我无法在插入/更新数据后执行提交。我有以下配置。

**%TOMCAT_HOME%/conf/context.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<Context>
    <WatchedResource>WEB-INF/web.xml</WatchedResource>
    <Resource name="jdbc/myDS" auth="Container" type="javax.sql.XADataSource" factory="org.objectweb.jotm.datasource.DataSourceFactory" driverClassName="com.mysql.jdbc.Driver" username="root" password="mypassword" url="jdbc:mysql://localhost:3306/myDB"/>
    <Resource name="UserTransaction" auth="Container" type="javax.transaction.UserTransaction"/>
    <Transaction factory="org.objectweb.jotm.UserTransactionFactory" jotm.timeout="60"/>
</Context> 
```

**在 %TOMCAT%/lib 中提取的 JOTM 2.1.9 库**

```
 Jotm-datasource.jar
·         Jotm-core.jar
·         Xapool.jar
·         Log4j.jar
·         Commons-loggin-api.jar
·         Carol-iiop-delegate.jar
·         Carol-interceptors.jar
·         Carol.jar
·         Ow2-jta-1.1-spec.jar
·         Ow2-connector-1.5-spec.jar
·         Howl.jar 
```

**src/main/webapp/META-INF/context.xml**

```
<Context path="/MyJPATest" reloadable="true">
    <Loader loaderClass="org.springframework.instrument.classloading.tomcat.TomcatInstrumentableClassLoader"/>
</Context> 
```

**src/main/webapp/WEB-INF/classes/carol.properties**

```
# JNDI (Protocol Invocation)

carol.protocols=jrmp

# Local RMI Invocation
carol.jvm.rmi.local.call=true

# do not use CAROL JNDI wrapper
carol.start.jndi=false

# do not start a name server
carol.start.ns=false

# Naming Factory
carol.jndi.java.naming.factory.url.pkgs=org.apache.naming 
```

**META-INF/Persistence.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<persistence xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd" version="1.0">
    <persistence-unit name="myPersistenceUnit" transaction-type="RESOURCE_LOCAL">
        <provider>org.hibernate.ejb.HibernatePersistence</provider>
        <jta-data-source>java:comp/env/jdbc/myDS</jta-data-source>
        <class>com.test.domain.PUser</class>
        <exclude-unlisted-classes>true</exclude-unlisted-classes>
        <properties>
            <property name="hibernate.dialect" value="org.hibernate.dialect.MySQLDialect"/>
            <property name="hibernate.hbm2ddl.auto" value="update"/>
        </properties>
    </persistence-unit>
</persistence> 
```

**应用程序上下文.xml**

```
 <bean
        id="entityManagerFactory"
        class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean" >
        <property
            name="persistenceUnitName"
            value="myPersistenceUnit" />
    </bean>

    <context:annotation-config />

    <jee:jndi-lookup
        id="jndiUserTransaction"
        jndi-name="java:comp/UserTransaction" />

    <bean
        id="transactionManager"
        class="org.springframework.transaction.jta.JtaTransactionManager" >

        <property
            name="userTransaction"
            ref="jndiUserTransaction" />
    </bean>

    <tx:annotation-driven transaction-manager="transactionManager" />

      <jpa:repositories
        base-package="com.test"
        entity-manager-factory-ref="entityManagerFactory" />

    <bean
        id="hibernate4ExceptionTranslator"
        class="org.springframework.orm.hibernate4.HibernateExceptionTranslator" /> 
```

**web.xml**

```
<resource-ref>
        <res-ref-name>jdbc/myDS</res-ref-name>
        <res-type>javax.sql.XADataSource</res-type>
        <res-auth>Container</res-auth>
    </resource-ref> 
```

**PUserService 的方法**

```
 @Transactional
    public List<PUser> bootstrapUsers( )
    {

        List<PUser> users = new ArrayList<PUser>();

        try
        {

            for (int i = 0; i < 5; i++)
            {

                PUser newUser = new PUser();
                newUser.setName("B_" + i);
                PUser user = this.pUserRepository.save(newUser);

                users.add(user);

            }

        }
        catch (Exception e)
        {
            this.logger.error(e, e);

            return null;
        }

        return users;

    } 
```

**src/main/java/com.test.dao.PUserRepository（Spring 数据存储库）**

```
public interface PUserRepository extends JpaRepository<PUser, Serializable>
{

    PUser findByName(String username);
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T05:50:58.757

由于您使用的是 JTA，因此您的事务类型应该`transaction-type="JTA"`在您的 persistence.xml 中。[您可以在](http://docs.jboss.org/hibernate/entitymanager/3.5/reference/en/html/configuration.html#Configuration%20and%20bootstrapping)配置和引导下阅读更多信息。

# vb.net - 使用directX进行按需渲染而不是循环连续渲染是否可以

> ID：12355248
> 
> 赞同：1
> 
> 时间：2012-09-10T15:55:36.223
> 
> 标签：vb.net, graphics, directx

我目前正在编写和应用程序来测试人类的视觉。就目前的程序而言，我使用 VB.Net 和 DirectX 9 在屏幕上按需呈现刺激。按需我只是指包含用于绘制刺激的代码并具有 device.present 调用的 renderscene 方法不存在于一个单独的线程中，该线程会尽可能地不断绘制帧。每当我需要更改刺激时，我只需调用 renderscene 方法，该刺激不超过每秒一次，通常甚至更少。这被认为是不好的形式吗？我在弄清楚如何处理 DeviceLostExceptions 时遇到了一些麻烦（例如在 alt-Tab 或 ctrl-alt-delete 之后），因为我发现的大多数示例代码都假设程序不断地渲染场景。笔记：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T13:17:53.113

There is nothing wrong with this approach per se.

It is simply unusual because DirectX is *usually* used for games, and in games, you generally need to redraw the scene constantly, as fast as possible, no matter what. (things are typically always moving on the screen, and the game has to be as responsive as possible).

But if you don't need this responsiveness, and if your scene is mostly static, then there's nothing wrong with rendering only when the contents to be rendered change.

# javascript - 如何在 For 循环中为多个标记创建 InfoWindows

> ID：12355249
> 
> 赞同：6
> 
> 时间：2012-09-10T15:55:41.560
> 
> 标签：javascript, google-maps-api-3, google-maps-markers, jinja2

我有以下代码，它正确地创建了我正在存储的所有标记，但是当我单击它们中的任何一个时，只会创建最后一个 InfoWindow，并且无论我单击哪个标记，它都只会出现在最后一个标记上。我想这与我的 for 循环中使用的相同变量有关。

```
{% for record in records %}

//need to do the JSON encoding because JavaScript can't have Jinja2 variables
//I need the safe here because Jinja2 tries to escape the characters otherwise
var GPSlocation = {{record.GPSlocation|json_encode|safe}};  
var LatLng = GPSlocation.replace("(", "").replace(")", "").split(", ")
var Lat = parseFloat(LatLng[0]);
var Lng = parseFloat(LatLng[1]);

var markerLatlng = new google.maps.LatLng(Lat, Lng);

var marker = new google.maps.Marker({
    position: markerLatlng,
    title: {{record.title|json_encode|safe}}
});

var infowindow = new google.maps.InfoWindow({
    content: "holding..."
    });

google.maps.event.addListener(marker, 'click', function () {
    infowindow.setContent({{record.description|json_encode|safe}});
    infowindow.open(map, marker);
    });

//add the marker to the map
marker.setMap(map);

{% endfor %} 
```

我尝试将事件侦听器更改为此：

```
google.maps.event.addListener(marker, 'click', function () {
        infowindow.setContent({{record.description|json_encode|safe}});
        infowindow.open(map, this);
        }); 
```

正如我所见，这对 SO 上的其他一些用户有效，但随后没有出现 InfoWindows。这里有什么明显的错误吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T16:07:50.147

您需要在单独的函数中创建标记：

```
 // Global var
   var infowindow = new google.maps.InfoWindow(); 
```

然后，在循环内：

```
 var markerLatlng = new google.maps.LatLng(Lat, Lng);
    var title = {{record.title|json_encode|safe}}
    var iwContent = {{record.description|json_encode|safe}}
    createMarker(markerLatlng ,title,iwContent); 
```

最后：

```
 function createMarker(latlon,title,iwContent) {
      var marker = new google.maps.Marker({
          position: latlon,
          title: title,
          map: map
    });

google.maps.event.addListener(marker, 'click', function () {
    infowindow.setContent(iwContent);
    infowindow.open(map, marker);
    });

    } 
```

[**解释在这里。**](http://econym.org.uk/gmap/closure.htm)

# jquery - Jquery - 将选定的行值传递给隐藏的文本框

> ID：12355252
> 
> 赞同：1
> 
> 时间：2012-09-10T15:55:58.410
> 
> 标签：jquery, xml

我正在进行邮政编码（机场和火车站）搜索，但似乎无法弄清楚为什么选定的行值没有将正确的值写入隐藏的文本框。

基本上，如果我搜索“盖特威克”，如下所示：

![在此处输入图像描述](../Images/a3955028ab5a0400ef8f91afad2d75c8.png)

我得到以下 XML 响应：

```
<?xml version="1.0"?>
<addresslist resultcount="4">
    <address id="0" catagoryid="1" lat="184179968" lng="-639296">
        <companyname></companyname>
        <premiseno></premiseno>
        <streetname>GATWICK AIRPORT (NORTH)</streetname>
        <townname></townname>
        <postcode>RH6 0PJ</postcode>
    </address>
    <address id="1" catagoryid="1" lat="184161536" lng="-586944">
        <companyname></companyname>
        <premiseno></premiseno>
        <streetname>GATWICK AIRPORT (SOUTH)</streetname>
        <townname></townname>
        <postcode>RH6 0NP</postcode>
    </address>
    <address id="2" catagoryid="1" lat="184161664" lng="-580224">
        <companyname></companyname>
        <premiseno></premiseno>
        <streetname>GATWICK GATWICK AIRPORT RAILWAY STATION</streetname>
        <townname></townname>
        <postcode>RH6 0RD</postcode>
    </address>
    <address id="3" catagoryid="1" lat="184161536" lng="-586944">
        <companyname></companyname>
        <premiseno></premiseno>
        <streetname>GATWICK RAILWAY CONCOURSE</streetname>
        <townname></townname>
        <postcode>RH6 0NN</postcode>
    </address>
</addresslist> 
```

目前，无论我选择哪一行，它总是将最后的 Lat & Long 值写入隐藏的文本框。例如，如果我选择第一行，它将写入`184161536, -586944`“GATWICK RAILWAY CONCOURSE”的 Lat Long 值

这是Jquery代码：

```
function buildResultView(xml_object,pageNum,rowdiv) {

// Remove existing page up page down click events
rowdiv.find('.lbl-addr-pgup').unbind('click');
rowdiv.find('.lbl-addr-pgdn').unbind('click');

// Remove result list if there is one
if (rowdiv.find('.ul-result-view')) {
    rowdiv.find('.ul-result-view').remove();
}

ul = $('<ul></ul>');
ul.addClass('ul-addr-res');
ul.addClass('ul-result-view');

// Prepend ul before resultinfo
rowdiv.find('.div-result-info').before(ul); 

// Reset result count
var resCount = 0;

// Count Results
$(xml_object).find('address').each(function(){
    resCount += 1;
});

// Pull out start row and max rows
var pageRes = clientPaginate(resCount,pageNum).split(',');
var loopMax = parseInt(pageRes[0]);
var currentRow = parseInt(pageRes[1]);
var lastPge = parseInt(pageRes[2]);
var addType;

// Show maxRows starting at startIndex  
for (var i = currentRow; i < loopMax; i++) {

    var li = $('<li></li>');
    li.addClass('li-addr-res');
    addType = parseInt($(xml_object).find("address[id='"+i+"']").attr("catagoryid"));
    var lat = ($(xml_object).find("address[id='"+i+"']").attr("lat"));
    var lng = ($(xml_object).find("address[id='"+i+"']").attr("lng"));

    li.css('cursor','pointer');

// Reset result count
var resCount = 0;

// Count Results
$(xml_object).find('address').each(function(){
    resCount += 1;
});

// Pull out start row and max rows
var pageRes = clientPaginate(resCount,pageNum).split(',');
var loopMax = parseInt(pageRes[0]);
var currentRow = parseInt(pageRes[1]);
var lastPge = parseInt(pageRes[2]);
var addType;

// Show maxRows starting at startIndex  
for (var i = currentRow; i < loopMax; i++) {

    var li = $('<li></li>');
    li.addClass('li-addr-res');
    addType = parseInt($(xml_object).find("address[id='"+i+"']").attr("catagoryid"));
    var lat = ($(xml_object).find("address[id='"+i+"']").attr("lat"));
    var lng = ($(xml_object).find("address[id='"+i+"']").attr("lng")); 
```

然后我将 lat、lng 值写入隐藏的文本框：

```
 // Add this lat lng to hidden text box
    rowdiv.find('.hidden-lat-lng').val(lat+","+lng); 
```

知道为什么没有选择正确的纬度经度值吗？

我只需要能够获得所选行的纬度经度值。

如果有人可以提供帮助，我将非常感激！:-)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-12T21:38:47.360

当你有这样的代码时：

```
for (var i = 0; i < 10; i++) {
   var foo = i;
} 
```

`foo`将是`9`。这就是正在发生的事情，你的`lat`和`lng`值只是循环中的最后一个，因为那是你设置它们的地方。

`foo`请注意，无论是在循环内部`for()`还是外部声明都无关紧要；javascript 中的变量作用域不像许多其他语言那样是块级的，使用`var`将为这些变量提供函数的作用域。

您也在尝试重新声明变量；我不确定这只是复制粘贴代码的结果还是对变量范围的误解，但无论如何它不会产生后续影响。如果您只是在函数顶部声明局部变量，它会更清晰，并且可能会导致更少的问题。

大概有更多代码处理选择了哪一行。如果它设置`lat`，`lng`然后将其发布到您的问题。否则，这是我的看法：

```
for (var i = currentRow; i < loopMax; i++) {
    var li = $('<li></li>');
    li.addClass('li-addr-res');
    addType = parseInt($(xml_object).find("address[id='"+i+"']").attr("catagoryid"));

    lat = ($(xml_object).find("address[id='"+i+"']").attr("lat"));
    lng = ($(xml_object).find("address[id='"+i+"']").attr("lng"));

    // Store the latitude and longitude alongside the li element itself
    li.data('lat', lat).data('lng', lng);

    // add a handler to copy that data to the hidden textarea when clicked
    // I'm assuming you mean the row is selected when it's clicked, otherwise
    // just bind to something else
    li.click(function() {        
        // recover the data from this element (the <li>)
        var lat = $(this).data('lat'),
            lng = $(this).data('lng');

        // rowdiv is probably still in scope from the parent function,
        // though there is missing code in your question. I'm going to 
        // assume there's only one hidden textarea for this purpose
        $('.hidden-lat-lng').val(lat + "," + lng);
    } 
```

# java - 检测压缩文件java

> ID：12355255
> 
> 赞同：2
> 
> 时间：2012-09-10T15:56:10.987
> 
> 标签：java, stream, inputstream, compression

大家好，愿意阅读这篇文章的人。

我正在使用一个 Java 程序，我没有成功，但我正在改进它，问题是你可以添加文件，但我想验证添加的文件不会以任何人类已知的格式压缩，所以我不希望人们能够添加 zip 文件或 rar 或 7z 或 gz 等等。

任何人都可以帮我一个想法，这甚至可能吗？

提前致谢。

*编辑：IT学生使用的程序，他们添加了他们的源代码文件（.java，.class，.php，.doc，.mdb），路径保存在字符串中，最后，程序压缩文件，并将它们发送给老师，知道老师不想接收压缩或压缩文件，这就是验证的原因。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T16:03:24.600

您基本上`type`对文件的字节执行与 unix 命令等效的 java 。大多数文件都有一个嵌入式指纹，可以向其他程序提示它是什么类型的文件。这个指纹通常被称为“幻数”

```
7zip - '7', 'z', 0xBC, 0xAF, 0x27, 0x1C
gzip - 0x1F, 0x8B 
```

[可以在此处找到一份](https://web.archive.org/web/20161113173723/http://www.astro.keele.ac.uk/oldusers/rno/Computing/File_magic.html)（不完整的）幻数列表。

有些文件没有幻数，在这种情况下，您必须在文件中寻找其他常见的项目，这强烈暗示它是可疑类型的文件。

依赖文件扩展名只会让每个人最终重命名扩展名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T16:01:41.860

大多数压缩文件类型的开头都有一个“幻数”，几个字节表示文件的类型（不仅是压缩文件，还有图像等）。您可以根据已知文件类型检查文件内容。您可以在“幻数文件类型”上搜索。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-19T14:29:56.420

FWIW，此函数检查文件是否被压缩：

```
public static boolean isGzipped(File f) {
    InputStream is = null;
    try {
        is = new FileInputStream(f);
        byte [] signature = new byte[2];
        int nread = is.read( signature ); //read the gzip signature
        return nread == 2 && signature[ 0 ] == (byte) 0x1f && signature[ 1 ] == (byte) 0x8b;
    } catch (IOException e) {
        Log.x(e);
        return false;
    } finally {
        Closer.closeSilently(is);
    }
} 
```

[请参阅*Closer.closeSilently()*此处。](https://stackoverflow.com/a/26654728/755804)

# php - 通过 REST 将图像作为 base64 编码字符串读取和发送

> ID：12355256
> 
> 赞同：1
> 
> 时间：2012-09-10T15:56:16.877
> 
> 标签：php, javascript, rest, air, base64

我正在使用 PHP 开发一个 RESTful API，它允许发布图像等数据。在基于 PHP 的客户端中，获取发布的 base64 编码字符串是这样获得的：

```
$string = base64_encode( file_get_contents('image.jpg') ); 
```

然后通过简单的反转在 API 端对其进行解码：

```
file_put_contents('new-image.jpg', base64_decode($string)); 
```

这适用于基于 PHP 的客户端，但现在我正在尝试使用 Adob​​e Air 对其进行测试。下面的结果是一个相当大的 base64 编码字符串，但是一旦它到达 API 就不能正确解码：

```
var fs = new air.FileStream();
var file = air.File.desktopDirectory.resolvePath(files[0].nativePath);
var photoData = '';

fs.open(file, air.FileMode.READ);

for( var i = 0; i < fs.bytesAvailable; i++ ) {
    photoData += fs.readByte();
}

fs.close();

photoData = btoa(photoData); // base64-encoded string 
```

在这一点上，我想知道是否`btoa()`是一种不同于 PHP 使用的编码方法，或者我只是将字节不正确地组装成一个字符串。

知道我哪里出错了吗？我已经看这个太久了:)

# ios - 打开 cv ios 视频处理

> ID：12355257
> 
> 赞同：5
> 
> 时间：2012-09-10T15:56:20.867
> 
> 标签：ios, opencv, frameworks

我正在尝试使用 openCv 框架进行 ios 视频处理的[教程。](http://docs.opencv.org/trunk/doc/tutorials/ios/video_processing/video_processing.html)

我已经成功地将 ios openCv 框架加载到我的项目中 -**但**我的框架与教程中介绍的框架之间似乎不匹配，我希望有人能帮助我。

OpenCv 使用`cv::Mat`类型来表示图像。当使用 AVfoundation 委托处理来自相机的图像时 - 我需要将所有的转换`CMSampleBufferRef`为该类型。

似乎教程中介绍的 openCV 框架提供了一个名为 using 的库

```
#import <opencv2/highgui/cap_ios.h> 
```

使用新的委托命令：

谁能指出我在哪里可以找到这个框架或可能在`CMSampleBufferRef`和之间快速转换`cv::Mat`

**编辑**

opencv框架中有很多分割（至少对于ios来说）。我已经通过各种“官方”网站下载了它，并且还使用他们的说明使用了 fink 和 brew 等工具。我什至比较了安装到 /usr/local/include/opencv/ 的头文件。他们每次都不一样。下载 openCV 项目时 - 同一个项目中有各种 cmake 文件和相互冲突的自述文件。`<opencv2/highgui/cap_ios.h>`我认为我成功地通过此[链接](https://github.com/Itseez/opencv#readme)为 IOS 构建了一个良好的版本，其中 avcapture 功能内置于框架中（带有此标头） ，然后使用 ios 目录中的 python 脚本构建库 - 使用命令`python opencv/ios/build_framework.py ios`。我会尝试更新

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-10T16:21:23.567

这是我使用的转换。您锁定像素缓冲区，创建 cv::Mat，使用 cv::Mat 进行处理，然后解锁像素缓冲区。

```
- (void)captureOutput:(AVCaptureOutput *)captureOutput didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer fromConnection:(AVCaptureConnection *)connection
{
CVImageBufferRef pixelBuffer = CMSampleBufferGetImageBuffer(sampleBuffer);

CVPixelBufferLockBaseAddress( pixelBuffer, 0 );

int bufferWidth = CVPixelBufferGetWidth(pixelBuffer);
int bufferHeight = CVPixelBufferGetHeight(pixelBuffer);
int bytesPerRow = CVPixelBufferGetBytesPerRow(pixelBuffer);
unsigned char *pixel = (unsigned char *)CVPixelBufferGetBaseAddress(pixelBuffer);
cv::Mat image = cv::Mat(bufferHeight,bufferWidth,CV_8UC4,pixel, bytesPerRow); //put buffer in open cv, no memory copied
//Processing here

//End processing
CVPixelBufferUnlockBaseAddress( pixelBuffer, 0 );
} 
```

上述方法不会复制任何内存，因此您不拥有内存，pixelBuffer 将为您释放它。如果您想要自己的缓冲区副本，只需执行

```
cv::Mat copied_image = image.clone(); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-04-20T15:11:42.567

这是之前接受的答案中代码的更新版本，应该适用于任何 iOS 设备。

由于至少在 iPhone 6 和 iPhone 6+ 上`bufferWidth`不等于，我们需要指定每行中的字节数作为 cv::Mat 构造函数的最后一个参数。`bytePerRow`

```
CVImageBufferRef pixelBuffer = CMSampleBufferGetImageBuffer(sampleBuffer);

CVPixelBufferLockBaseAddress(pixelBuffer, 0);

int bufferWidth = CVPixelBufferGetWidth(pixelBuffer);
int bufferHeight = CVPixelBufferGetHeight(pixelBuffer);
int bytePerRow = CVPixelBufferGetBytesPerRow(pixelBuffer);
unsigned char *pixel = (unsigned char *) CVPixelBufferGetBaseAddress(pixelBuffer);
cv::Mat image = cv::Mat(bufferHeight, bufferWidth, CV_8UC4, pixel, bytePerRow); 

// Process you cv::Mat here

CVPixelBufferUnlockBaseAddress(pixelBuffer, 0); 
```

该代码已在我运行 iOS 10 的 iPhone5、iPhone6 和 iPhone6+ 上进行了测试。

# c# - 无法从 HttpWebRequest 获得响应

> ID：12355260
> 
> 赞同：3
> 
> 时间：2012-09-10T15:56:28.063
> 
> 标签：c#, mono, google-api, httpresponse

我在mono上编写了以下代码（ubuntu上的Mono）

```
string URI = "http://www.google.com/webmasters/tools/feeds/http%3A%2F%2Fwww%2Ekarkala%2Ein%2F/keywords/?access_token=ya29.ABCDEFGI7bzJmlLWtk290M-PkNx20ej9p6a0sxoaxFPe_7qypXuW7Q";
HttpWebRequest request = (HttpWebRequest)WebRequest.Create(URI);
request.Headers.Add("GData-Version", "2");
request.Method = "GET";
HttpWebResponse response = (HttpWebResponse)request.GetResponse(); 
```

该代码是从 Google 网站管理员 API 获取响应的一部分。但是在尝试获取响应时出现以下错误

```
The remote server returned an error: (400) Bad Request. 
```

System.Net.HttpWebRequest.CheckFinalStatus (System.Net.WebAsyncResult 结果) [0x00000] 在 System.Net.HttpWebRequest.SetResponseData (System.Net.WebConnectionData 数据) [0x00000] in :0 的系统

如果我在浏览器上复制粘贴相同的 URI，我可以看到 xml 响应。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T16:02:44.277

您必须设置请求内容类型：

`request.ContentType = "text/xml";`

否则，远程服务器将不知道如何处理您的请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T17:29:34.237

会不会是 URI 值的编码方式？您是否尝试过使用[提琴手](http://www.fiddler2.com/fiddler2/)？

它具有非常好的功能，可让您调查 Web 请求。希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-21T09:23:28.840

这是我在 Xamarin 中使用的一个函数，它获取一个 CSRF 令牌，但是从这里你可以看到我是如何设置我的请求的。正如 aevitas 所说，您需要根据第 3 行指定 Content-Type

```
public JsonToken getCSRFToken(){
        var request = HttpWebRequest.Create(string.Format(this.apiBaseUrl + @"/druidapi/user/token.json"));
        request.ContentType = "application/json";
        request.Method = "GET";

        Console.Out.WriteLine("GET call to: {0}", this.apiBaseUrl.ToString() + @"/druidapi/user/token.json");

        using (HttpWebResponse response = request.GetResponse() as HttpWebResponse)
        {
            if (response.StatusCode != HttpStatusCode.OK)
                Console.Out.WriteLine("Error fetching data. Server returned status code: {0}", response.StatusCode);
            using (StreamReader reader = new StreamReader(response.GetResponseStream()))
            {
                var content = reader.ReadToEnd();

                if(string.IsNullOrWhiteSpace(content)) {
                    Console.Out.WriteLine("Response contained empty body...");
                }
                else {
                    Console.Out.WriteLine("Response Body: \r\n {0}", content);
                }

                if (content == null) {
                    throw new Exception ("content is NULL");
                } else {

                    JsonToken deserializedToken = JsonConvert.DeserializeObject<JsonToken>(content);
                    return deserializedToken;
                }

            }
        }
    } 
```

# asp.net - ASP.NET Web API 持久性 Cookie

> ID：12355261
> 
> 赞同：2
> 
> 时间：2012-09-10T15:56:29.570
> 
> 标签：asp.net, security, rest, asp.net-mvc-4, asp.net-web-api

我有一个 REST 服务，用户将使用它进行身份验证，我从 WCF REST 服务移植。使用 WCF Rest，在使用 cookie 持久化用户时出现问题，我不得不使用数据库并创建票证系统。是否支持 Web API 中的 cookie，我可以像在 MVC 或 Web 表单中为用户创建持久票证，或者 Web API 是否也存在相同的问题？

谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-10T17:20:28.563

WebAPI 中的 Cookie 和我预期的一样工作（来自 ASP、webforms，然后是 mvc 背景）。虽然，与 cookie 交互的 api 有点不稳定。

# java - SWT 中不同大小的视图

> ID：12355264
> 
> 赞同：1
> 
> 时间：2012-09-10T15:57:04.193
> 
> 标签：java, swt, eclipse-rcp

我正在努力在 SWT 中布置一个视角。为简单起见，它没有编辑器，只有 1 个或多个视图。有一个默认视图应该在默认情况下占据整个查看器区域（可以最大化，但不是必须），没有其他查看器打开。有少量 (2-3) 个其他视图可能会或可能不会通过用户输入打开。当它们打开时，默认视图应占屏幕空间的约 75%，而其他堆叠的视图应占约 25%。

我有一个始终设置为不可见的视图，称为锚点。默认与此锚相关，如左。其他视图与此锚点相关作为堆栈。

这似乎工作正常，期待空间。默认情况下，我可以有 25% 的屏幕是空的，或者我几乎没有空间分配给辅助视图。

我的问题：

1.  使用“锚”是一个好的模式还是有更好的模式？
2.  我将如何在一个视图打开和多个视图之间进行这种有条件的切换？

谢谢！

米

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T18:07:24.957

我不太确定我是否有你的问题，但这是我通常使用的：

```
public class PerspectiveExplore implements IPerspectiveFactory {

    public static final String ID = "UF.PerspectiveExplore";
    @Override
    public void createInitialLayout(IPageLayout layout) {
        String editorArea = layout.getEditorArea();
        layout.setEditorAreaVisible(false);

        IFolderLayout workflowSelection = layout.createFolder("Workflow Selection", IPageLayout.LEFT, 0.20f, editorArea);
        workflowSelection.addPlaceholder(WorkflowSelection.ID + ":*");
        workflowSelection.addView(WorkflowSelection.ID);

        IFolderLayout filter = layout.createFolder("Filter", IPageLayout.BOTTOM, 0.5f, WorkflowSelection.ID);
        filter.addPlaceholder(FilterView.ID + ":*");
        filter.addView(FilterView.ID);

        IFolderLayout resultSelection = layout.createFolder("Result Selection", IPageLayout.BOTTOM, 0.5f, editorArea);
        resultSelection.addPlaceholder(ResultSelection.ID + ":*");
        resultSelection.addView(ResultSelection.ID);

        IFolderLayout canvas = layout.createFolder("Plot", IPageLayout.TOP, 0.6f, ResultSelection.ID);
        canvas.addPlaceholder(Plot.ID + ":*");
        canvas.addView(Plot.ID);    
    }

} 
```

这将创建一个具有相对大小的布局，即工作流选择位于左侧，占透视宽度的 20%。过滤器位于工作流选择下方，占高度的 50%，依此类推。

也许你可以以此为起点。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-10T16:03:32.527

这是 SWT 还是 RCP 插件……如果您使用的是视图和透视图……那么它是一个 RCP 插件。在 RCP 中，将始终为编辑器保留默认空间（“org.eclipse.ui.editorss”）。你能做的最好的就是最小化它..但它总是在那里

# javascript - jquery 选择自定义属性未定义的锚点

> ID：12355265
> 
> 赞同：2
> 
> 时间：2012-09-10T15:57:07.310
> 
> 标签：javascript, jquery, anchor, attr

```
<a myattr="something">anchor</a>
<a>anchor</a>

$(a[myattr]) does not work
$(a[myattr!="") does not work
$(a[myattr!==undefined) does not work 
```

什么可以让那些“myattr”被定义并等于某些东西的锚点起作用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T16:02:24.397

如果你把选择器放在引号之间，你的第一个应该可以工作。

```
$('a[myattr]') 
```

[**小提琴**](http://jsfiddle.net/ult_combo/nuUrt)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T16:01:03.223

[http://jsfiddle.net/Be9Ab/](http://jsfiddle.net/Be9Ab/)

```
$("a[myattr]").css("color","red");​ 
```

工作得很好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T16:26:40.503

```
 jQuery(function(){
        jQuery("a").each(function(){
            if(jQuery(this).attr("myattr") && jQuery(this).attr("myattr")!==""){
                jQuery(this).addClass("myattr-link").css("color", "red");
            }
        });
    }); 
```

# android - TabWidget 教程发生了什么？

> ID：12355266
> 
> 赞同：1
> 
> 时间：2012-09-10T15:57:08.673
> 
> 标签：android, android-tabhost, tabwidget, android-tabs

TabWidget[教程](http://web.archive.org/web/20100120081203/http://developer.android.com/intl/de/resources/tutorials/views/hello-tabwidget.html)显然已从 Android 开发者网站中删除。为什么这个被删除了？有更新的教程吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T16:38:31.323

该`TabWidget`教程已被删除，因为它使用了`TabActivity`一个已弃用的类，*应该避免*使用[`Fragments`](http://developer.android.com/guide/components/fragments.html)（通过兼容性包在旧版本的 android 上可用）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T16:41:14.593

我建议在操作栏中使用导航选项卡。如果您的构建目标是 Pre-Honeycomb，您可以很好地将导航选项卡合并到 ActionBarSherlock 中。

[http://developer.android.com/guide/topics/ui/actionbar.html#Tabs](http://developer.android.com/guide/topics/ui/actionbar.html#Tabs)

[http://developer.android.com/training/implementing-navigation/lateral.html#tabs](http://developer.android.com/training/implementing-navigation/lateral.html#tabs)

[http://actionbarsherlock.com/](http://actionbarsherlock.com/)

# vba - 如何使用 VBA 将列从关闭的工作簿复制到新工作簿？

> ID：12355269
> 
> 赞同：0
> 
> 时间：2012-09-10T15:57:12.807
> 
> 标签：vba

现在，我正在创建一个新的工作簿，其中 12 个列名都在第 1 行，每次运行宏来测试它时，工作簿都有不同的名称（Book1、Book2、....）

我想从 CLOSED 工作簿中获取特定列并将它们粘贴到这个新工作簿中的不同列。我不想使用 GetValuesFromAClosedWorkbook，因为在我的宏中，用户正在选择文件（“Y:...\Test.xls”）。

我有以下代码可以工作，但不像我希望的那样自动化，因为我不知道工作簿的名称......是否是 Book1、Book2 等等......而且因为它正在打开该文件，我不希望它这样做。

```
Workbooks.Open Filename:="Y:\......\Test.xls"
Range("D3").Select
Range(Selection, Selection.End(xlDown)).Select
Selection.Copy
Windows("Book1").Activate
ActiveWorkbook.ActiveSheet.Range("B2").PasteSpecial Paste:=xlValues 
```

是否有可能一旦用户选择文件，我可以选择某些列并将它们粘贴到这个新工作簿中？

任何帮助将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T16:14:03.060

打开工作簿时，您可以执行以下操作：

```
Dim wb as WorkBook
Set wb = Workbooks.Open("filepathhere") 
```

或者当您添加新工作簿时：

```
Set wb = Workbooks.Add() 
```

然后您可以使用参考`wb`：

```
Dim rngCopy as Range
Set rngCopy = wb.Sheets(1).Range(.Range("D3"), .Range("D3").End(xlDown))

wb2.Sheets("sheetname").Range("B2").Resize(rngCopy.Rows.Count).Value = rngCopy.Value 
```

`wb`您打开的文件在哪里，`wb2`是新添加的工作簿。

使用“助手”子执行复制：

```
Sub DoCopy(rngFrom as Range, rngTo as Range)
    Dim rngCopy as Range
    Set rngCopy = rngFrom.Parent.Range(rngFrom,rngFrom.End(xlDown))
    rngTo.Resize(rngCopy.Rows.Count).Value = rngCopy.Value
End Sub 
```

如果要复制值和格式：

```
Sub DoCopy(rngFrom As Range, rngTo As Range)
    rngFrom.Parent.Range(rngFrom, rngFrom.End(xlDown)).Copy
    rngTo.PasteSpecial xlPasteFormats
    rngTo.PasteSpecial xlPasteValues
End Sub 
```

用法：

```
'updated to copy values to first empty row (NOTE: all copied columns
'   must be the same length)
Dim shtDest as Worksheet
Set shtDest= wb2.Sheets("sheetname")

DoCopy wb.Sheets(1).Range("D3"), shtDest.Cells(.Rows.Count, 2).end(xlUp).offset(1,0)
DoCopy wb.Sheets(1).Range("G3"), shtDest.Cells(.Rows.Count, 3).end(xlUp).offset(1,0) 
```

# azure - IIS 7.5 向缓存控制响应添加了无缓存

> ID：12355270
> 
> 赞同：6
> 
> 时间：2012-09-10T15:57:18.573
> 
> 标签：azure, iis-7.5, cache-control

我正在使用 Azure 和 IIS 7.5 为我的 Web 应用程序提供服务，但我没有使用 .NET。

我正在尝试覆盖我的静态文件的默认缓存控制值，但无论我指定什么，IIS 7.5 似乎都添加了*无缓存。*

我的*approot/web.config*文件如下所示：

```
<?xml version="1.0"?>
<configuration>
  <system.webServer>
    ...

    <staticContent>
      <clientCache cacheControlCustom="public" cacheControlMode="UseMaxAge" cacheControlMaxAge="30.00:00:00" /> 
    </staticContent>
    ...

  </system.webServer>
</configuration> 
```

我的响应标题是：

```
Accept-Ranges:bytes
Access-Control-Allow-Origin:*
Cache-Control:no-cache,public,max-age=2592000
Content-Encoding:gzip
Content-Length:4309
Content-Type:application/x-javascript
Date:Mon, 10 Sep 2012 14:42:07 GMT
ETag:"8ccd2f95a8fcd1:0"
Last-Modified:Mon, 10 Sep 2012 13:48:36 GMT
Server:Microsoft-IIS/7.5
Vary:Accept-Encoding
X-Powered-By:ASP.NET 
```

我在其中一个子文件夹中有一个额外的*web.config*文件，但这不会覆盖任何*clientCache*值。

有谁知道为什么 IIS 预先*设置 no-cache*？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T08:41:54.727

显然，输出缓存需要一个 location 属性，否则它将覆盖*staticContent/clientCache*设置。

```
<system.webServer>
    ...
    <caching>
        <profiles>
            <add extension="*" policy="CacheForTimePeriod" duration="00:01:00" varyByQueryString="*" varyByHeaders="X-Requested-With" location="Any" />
        </profiles>
    </caching>
    ...
</system.webServer> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T23:57:53.843

根据您的问题，我认为您正在使用具有 Web 角色的 Windows Azure 云服务。

在这种情况下，您需要使用启动任务在 IIS 中设置 Cache-Control，一旦角色启动，它将与您的网站配置保持一致。根据您的上述设置，您的启动任务中的命令应如下所示：

```
appcmd.exe set config "Default Web Site/folder" -section:system.webServer/staticContent -clientCache.cacheControlCustom:public
appcmd.exe set config "Default Web Site/folder" -section:system.webServer/staticContent -clientCache.cacheControlMode:UseMaxAge
appcmd.exe set config "Default Web Site/folder" -section:system.webServer/staticContent -clientCache.cacheControlMaxAge:"30.00:00:00" 
```

如果你想知道如何在启动任务中使用 appcmd，你可以阅读[这篇](http://blogs.msdn.com/b/avkashchauhan/archive/2011/05/28/how-to-perform-custom-iis-configuration-such-as-adding-dynamic-compression-for-additional-mime-types-in-web-role-using-startup-task.aspx)文章。

# ruby-on-rails-3 - Rails：在多个表上加入表'table1.table2'不存在

> ID：12355271
> 
> 赞同：0
> 
> 时间：2012-09-10T15:57:18.963
> 
> 标签：ruby-on-rails-3, ruby-on-rails-3.2

我正在尝试按如下方式构建连接：

```
UserLog.find(:all, :joins => " JOIN client_inspector ON user_log.COMPUTER_NAME = client_inspector.Retrieving_Hostname ", :select=>  "DISTINCT user_log.COMPUTER_NAME, client_inspector.Retrieving_Hostname ") 
```

但它给了我以下错误->

```
ActiveRecord::StatementInvalid (Mysql2::Error: Table 'user_log.client_inspector' doesn't exist: SELECT DISTINCT user_log.COMPUTER_NAME, client_inspector.Retrieving_Hostname  FROM `user_log` JOIN client_inspector ON user_ 
```

log.COMPUTER_NAME = client_inspector.Retrieving_Hostname）：

我了解 MYSQL 错误，但为什么 Rails 会这样做？

我没有创建任何将这两个表关联在一起的模型。我想做的是能够通过Ruby内置的默认值以外的不同列加入。

有不同的方法可以做到这一点吗？

编辑：我更新以包括我的实际表名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T16:47:25.810

mysql 请求有效。我认为您不需要模型之间的关联。

模型的表名是用复数名称创建的，你可以试试这个：

```
UserLog.find(:all, :joins => " JOIN client_inspectors ON user_logs.COMPUTER_NAME = client_inspectors.Retrieving_Hostname ", :select=>  "DISTINCT user_logs.COMPUTER_NAME, client_inspectors.Retrieving_Hostname ") 
```

mysql 查询中的每个表名都有一个“s”

编辑：用表名更新

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T18:43:58.617

任何正在寻找答案的人，只需使用它来获取您的数据 ->

```
@returned_fields = ActiveRecord::Base.connection.execute(sql) 
```

这不会返回“模型”对象，而只是一个通用的 MySQL::Result 对象。使用它来获取数据->

```
@returned_fields.each 
```

这会给你一个像这样的数组数组->

```
[[1,2], [3,4], etc...] 
```

另外，请确保您使用数据库名称来限定您的表，如下所示 ->

```
SELECT foo FROM database.BAR as bar JOIN database.BLEZ as blez ON bar.COMPUTER_NAME = blez.Retrieving_Hostname 
```

我的问题原来是数据库的限定。由于我没有资格，它在错误的数据库（我当前连接的那个）中寻找表。

# java - 具有寻路算法的迷宫

> ID：12355272
> 
> 赞同：1
> 
> 时间：2012-09-10T15:57:22.333
> 
> 标签：java, a-star, maze

我正在努力学习如何使用 A* 算法来寻找路径，我想看看最好的方法。这就是我在想的我想要一个起点和终点然后通过构建函数构建迷宫然后用产科填充它然后运行 ​​A* 算法在表格中打印路线基本上将 0 更改为a 3 显示所采用的路径（产科将等于 1）。这听起来像是一个好计划吗？

我遇到的麻烦是我不知道将产科放入阵列的最佳方法。这是我到目前为止所拥有的：

```
public class Maze {

/**
 * @param args the command line arguments
 */
public static void main(String[] args) {

    //start and end points in the array
    int startx = 115;
    int starty = 655;
    int endx = 380;
    int endy = 560;
    //number of collums and rows
    int row = 700;
    int col = 500;
    //size of maze
    int maze [][] = new int [row][col];

    makeMaze(row, col, maze);
    printMaze(row, col, maze);

}

 //fill mazz with 0
    private static void makeMaze(int row, int col,  int maze[][])
    {   
         //fill maze with 0 for initilization
        for(int i = 0; i < row; i++)
        {
            for(int j = 0; j < col; j++)
            {
                maze[i][j] = 0;
            }

        }
    }
    //print out array/maze
    private static void printMaze(int row, int col,  int maze[][])
    {
         //... Print array in rectangular form
        for(int i = 0; i < row; i++)
        {
            for(int j = 0; j < col; j++)
            {
                System.out.print(" " + maze[i][j] );
            }
            System.out.println("");
        }

    }
    //fill the array with obsticals
    private void makeObsticals()
    {
        //obstical 1
        //this represent the corners of the object
        int ob1Point1 [][] = new int [220][616];
        int ob1Point2 [][] = new int [220][666];
        int ob1Point3 [][] = new int [251][670];
        int ob1Point4 [][] = new int [272][647];

        //object 2
        int ob2Point1 [][] = new int [341][655];
        int ob2Point2 [][] = new int [359][667];
        int ob2Point3 [][] = new int [374][651];
        int ob2Point4 [][] = new int [366][577];

        //obejct 3
        int ob3Point1 [][] = new int [311][530];
        int ob3Point2 [][] = new int [311][559];
        int ob3Point3 [][] = new int [339][578];
        int ob3Point4 [][] = new int [361][560];
        int ob3Point5 [][] = new int [361][528];
        int ob3Point6 [][] = new int [113][516];

         //object 4
        int ob4Point1 [][] = new int [105][628];
        int ob4Point2 [][] = new int [151][670];
        int ob4Point3 [][] = new int [180][629];
        int ob4Point4 [][] = new int [156][577];
        int ob4Point5 [][] = new int [113][587];

        //object 5
        int ob5Point1 [][] = new int [118][517];
        int ob5Point2 [][] = new int [245][517];
        int ob5Point3 [][] = new int [245][577];
        int ob5Point4 [][] = new int [118][577];

        //object 6
        int ob6Point1 [][] = new int [280][583];
        int ob6Point2 [][] = new int [333][583];
        int ob6Point3 [][] = new int [333][665];
        int ob6Point4 [][] = new int [280][665];

          //object 7
        int ob7Point1 [][] = new int [252][594];
        int ob7Point2 [][] = new int [290][562];
        int ob7Point3 [][] = new int [264][538];

          //object 8
        int ob8Point1 [][] = new int [198][635];
        int ob8Point2 [][] = new int [217][574];
        int ob8Point3 [][] = new int [182][574];

    }
    //astar algorithum
    private void findPath()
    {
    } 
```

}

感谢您对此的任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T17:28:14.630

抱歉，但我不明白你为什么要声明这么多二维数组作为障碍物......正如你所说。. .

```
//obstacle1
//this represent the corners of the object
   int ob1Point1 [][] = new int [220][616];
   int ob1Point2 [][] = new int [220][666];
   int ob1Point3 [][] = new int [251][670];
   int ob1Point4 [][] = new int [272][647]; 
```

我认为从上面的代码中你想要的意思是 (220,616),(220,666),(251,670),(272,647) 是 1 个障碍物的角点。

如果是这样，那么我建议不要采用 4 个二维数组，而是将 maze[][] 数组中障碍物覆盖的区域标记为**无穷大**，即最高整数编号。（让我们将其视为 10000）

对于其他 (x,y) 位置，在 maze[x][y] 中放置每个位置的启发式值（这意味着从该 (x,y) 位置到达目的地 (endx,endy) 的成本）

然后应用 A* 算法从头到尾到达。

# entity-framework-4 - LINQ to Entities 字符串到双重转换

> ID：12355273
> 
> 赞同：0
> 
> 时间：2012-09-10T15:57:22.650
> 
> 标签：entity-framework-4

我是第一次使用 LINQ to Entities。

我的数据存储有一个字符串字段，取决于某些其他字段，它通常是一个整数。我无法更改此数据库的结构。

EF 中有问题的表是 masterdatas。

我正在尝试根据基于 varname 字段的分组为 varvalue 字段中的这些记录创建总和，如下所示：

```
var varsum = from md in context.masterdatas
             where md.imparcid == SelectedDataSet.imparcid && md.varname == t.VarName
             group md by md.varname into g
             select new { varname = g.Key, SummedAmt = g.Sum(md => Convert.ToDouble(md.varvalue)) }; 
```

我收到错误 LINQ to Entities 无法识别方法 Double ToDouble（系统字符串）。

基于[这个](https://stackoverflow.com/questions/5971521/linq-to-entities-does-not-recognize-the-method-double-parsesystem-string-met)SO question，我在我的 EDMX 模型中添加了一个 DefiningExpression，并在我的数据模型的部分类中定义了该函数并使用了以下代码：

```
var varsum = from md in context.masterdatas
             where md.imparcid == SelectedDataSet.imparcid && md.varname == t.VarName
             group md by md.varname into g
             select new { varname = g.Key, SummedAmt = g.Sum(md => context.ParseDouble(md.varvalue)) }; 
```

现在我收到一个错误，即 ParseDouble 函数无法转换为 LINQ 到实体存储表达式。

我真正想做的就是让这个 SQL 语句运行：

```
SELECT [varname]
      ,[vartype]
      ,Sum(CASE WHEN Isnumeric([varvalue])=1 THEN cast([varvalue] as float) Else 0 END)
  FROM [masterdata]
  Group by varname, imparcid, vartype
  Having imparcid=25 AND varname = 'S2CMT8B' 
```

我不知道完成这项工作的最佳方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T16:12:39.037

在您的 LINQ 查询的最后一行，您需要调用上下文**类的****静态** 方法，而不是实例：`ParseDouble`**`context`**

 **```
// ...
select new { varname = g.Key, SummedAmt = g.Sum(md =>
    MyContextClass.ParseDouble(md.varvalue)) };
//  ^^^^^^^^^^^^^^
//  NOT the context instance, just the class name because ParseDouble is static 
```

我相信只有在这种情况下，该`EdmFunction`属性才由 EF 处理，否则它会尝试调用该方法，就像引发异常的普通 .NET 方法一样。

**编辑**

在`EdmFunction`属性中指定正确的模型命名空间也很重要。如果您的 EDMX 看起来像这样...

```
<edmx:ConceptualModels>
  <Schema Namespace="MyDBModel" Alias="Self"
      xmlns:annotation="http://schemas.microsoft.com/ado/2009/02/edm/annotation"
      xmlns="http://schemas.microsoft.com/ado/2008/09/edm">

    <!-- etc. -->

    <Function Name="ParseDouble" ReturnType="Edm.Double">
      <Parameter Name="stringvalue" Type="Edm.String" />
      <DefiningExpression>
        cast(stringvalue as Edm.Double)
      </DefiningExpression>
    </Function>

  </Schema>
</edmx:ConceptualModels> 
```

...您必须将架构的命名空间指定`MyDBModel`为的第一个参数`EdmFunctionAttribute`：

```
[EdmFunction("MyDBModel", "ParseDouble")]
public static double ParseDouble(string stringvalue)
{
    // ...
} 
```

否则`ParseDouble`将被视为普通的 .NET 方法并导致无法将其转换为存储表达式的异常。**

# math - 在 3D 游戏中“射击”目标的算法

> ID：12355282
> 
> 赞同：2
> 
> 时间：2012-09-10T15:57:44.360
> 
> 标签：math, graphics, 3d, game-engine

对于那些记得 Descent Freespace 的人来说，它有一个很好的功能可以帮助你在射击非归航导弹或激光时瞄准敌人：它在你追逐的船前面显示一个十字准线，告诉你在哪里射击以便击中移动目标。

我尝试使用[AI 算法的答案在 2D 游戏中“射击”目标，](https://stackoverflow.com/questions/4107403/ai-algorithm-to-shoot-at-a-target-in-a-2d-game?lq=1)但它是针对 2D 的，所以我尝试对其进行调整。

我首先分解计算以求解 XoZ 平面的交点并保存 x 和 z 坐标，然后求解 XoY 平面的交点并将 y 坐标添加到最终的 xyz，然后我将其转换为剪辑空间并在那些位置放置纹理坐标。但当然它不能正常工作，否则我不会发布这个问题。

从我注意到在 XoZ 平面和 XoY 中找到 x 后，x 是不一样的，所以一定有问题。

```
 float a = ENG_Math.sqr(targetVelocity.x) + ENG_Math.sqr(targetVelocity.y) -
            ENG_Math.sqr(projectileSpeed);
    float b = 2.0f * (targetVelocity.x * targetPos.x + 
            targetVelocity.y * targetPos.y);
    float c = ENG_Math.sqr(targetPos.x) + ENG_Math.sqr(targetPos.y);
    ENG_Math.solveQuadraticEquation(a, b, c, collisionTime); 
```

第一次 targetVelocity.y 实际上是 targetVelocity.z（与 targetPos 相同），第二次实际上是 targetVelocity.y。

XoZ 之后的最终位置是

```
 crossPosition.set(minTime * finalEntityVelocity.x + finalTargetPos4D.x, 0.0f, 
                minTime * finalEntityVelocity.z + finalTargetPos4D.z); 
```

在 XoY 之后

```
 crossPosition.y = minTime * finalEntityVelocity.y + finalTargetPos4D.y; 
```

我分离成 2 个平面并计算的方法有什么好处吗？或者对于 3D 有完全不同的方法？

*   sqr() 是正方形而不是 sqrt - 避免混淆。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T21:15:51.467

如果你`(0,0,0)`在 time`t_0 = 0`并且以速度发射弹丸`pv`并击中在时间 t 具有初始位置`tp=(tpx,tpy,tpz)`和恒定速度的目标`tv=(tvx,tvy,tvz)`，这意味着

```
Abs(tp+t*tv) == t*pv 
```

求解 t 的方程（tp*tv 是 tp 和 tv 的标量积等）：

```
t = - (tp*tv ± sqrt((tp*tv)^2+(tp * tp)*(pv^2-tv*tv))) / (tv*tv-pv*pv) 
```

所以你需要在这个位置射击`tp+t*tv`。只需将其投影到您的视口中并在那里绘制您的十字准线。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T21:24:37.210

[3D 案例的方程式与我在 2D 案例中给出](https://stackoverflow.com/a/4124965/68063)的方程式相同。唯一的区别是发射解决方案不是角度的形式：您需要 3D 旋转。但是对于这个应用程序，您不需要射击解决方案，您只需要知道在哪里绘制标线即可。

例如，以最简单的情况为例（一个可以立即旋转的静止射手）：

设目标在位置 A 并以速度 VA 移动，而射手静止在位置 B 并且可以以速度*s*发射子弹。让射手在时间 0 开火。子弹在时间*t*击中，使得 |A - B + *t* VA| = *ts*。*这是t*中的二次方程，您应该能够求解（或确定没有解）。确定*t*后，您现在可以在与子弹将要击中的世界位置（即 A + *t* VA）相对应的屏幕位置绘制标线。

其他情况类似，就像在 2D 中一样。

# facebook - 如何从 Facebook Graph API（服务器端身份验证）获取长期访问令牌？

> ID：12355283
> 
> 赞同：5
> 
> 时间：2012-09-10T15:57:46.107
> 
> 标签：facebook, facebook-graph-api, oauth, facebook-oauth

由于 Facebook 正在删除 offline_access 权限，我想继续迁移我们的网站以使用新系统。

我在 Facebook 的网站上找到了这份文件： [https ://developers.facebook.com/roadmap/offline-access-removal](https://developers.facebook.com/roadmap/offline-access-removal)

但是，当我使用服务器端身份验证处理某人时，我收到以下响应：

```
access_token => BLAHBLAHBLAHdontusemytokensilly
expires => 4992 
```

当我尝试使用访问点（在该文档上）将访问令牌延长几个小时以上时，我得到了这个：

```
access_token => BLAHBLAHBLAHdontusemytokensilly
expires => 4990 
```

根据该文档，服务器端 OAuth 应该获得一个持续 60 天的令牌，我不明白为什么我没有得到它。

我真的不想每 2 小时通过 OAuth 重定向发送我们的用户。

有任何想法吗？谢谢！

**更新**

根据要求，这是我正在采取的流程（在浏览器中）：

首先，我将用户重定向到这里：

[https://www.facebook.com/dialog/oauth?client_id=BLAHBLAH&redirect_uri=http%3A//localhost/user-social/facebook/redirect&scope=user_about_me%2Cuser_events%2Cuser_interests%2Cuser_likes%2Cfriends_likes%2Cuser_location%2Cuser_status%2Cuser_subscriptions%2Cfriends_subscriptions %2Cemail%2Ccreate_event%2Cpublish_stream%2Crsvp_event%2Cpublish_actions%2Cuser_actions.music%2Cfriends_actions.music%2Cuser_actions.news%2Cfriends_actions.news%2Cuser_actions.video%2Cfriends_actions.video%2Cmanage_pages](https://www.facebook.com/dialog/oauth?client_id=BLAHBLAH&redirect_uri=http%3A//localhost/user-social/facebook/redirect&scope=user_about_me%2Cuser_events%2Cuser_interests%2Cuser_likes%2Cfriends_likes%2Cuser_location%2Cuser_status%2Cuser_subscriptions%2Cfriends_subscriptions%2Cemail%2Ccreate_event%2Cpublish_stream%2Crsvp_event%2Cpublish_actions%2Cuser_actions.music%2Cfriends_actions.music%2Cuser_actions.news%2Cfriends_actions.news%2Cuser_actions.video%2Cfriends_actions.video%2Cmanage_pages)

这会将用户重定向到此处：

```
http://localhost/user-social/facebook/redirect?code=BLAHBLAHBLAHsomeawesomecode#_=_ 
```

然后我请求了一个访问令牌，如下所示：

[https://graph.facebook.com/oauth/access_token?client_id=BLAHBLAH&redirect_uri=http%3A//localhost/user-social/facebook/redirect&client_secret=BLAHBLAHsomeawesomesecret&code=BLAHBLAHBLAHsomeawesomecode](https://graph.facebook.com/oauth/access_token?client_id=BLAHBLAH&redirect_uri=http%3A//localhost/user-social/facebook/redirect&client_secret=BLAHBLAHsomeawesomesecret&code=BLAHBLAHBLAHsomeawesomecode)

我从 Facebook 收到这个休息：

```
access_token=BLAHBLAHBLAHdontusemytokensilly&expires=4057 
```

这显然是一个短暂的象征。根据 Facebook 文档（上图），我应该收到一个长期存在的令牌（因为我使用的是服务器端 OAuth）。

但是，由于它是短暂的，我试图将其换成长期存在的代币：

[https://graph.facebook.com/oauth/access_token?client_id=BLAHBLAH&redirect_uri=http%3A//localhost/user-social/facebook/redirect&client_secret=BLAHBLAHsomeawesomesecret&grant_type=fb_exchange_token&fb_exchange_token=BLAHBLAHBLAHdontusemytokensilly](https://graph.facebook.com/oauth/access_token?client_id=BLAHBLAH&redirect_uri=http%3A//localhost/user-social/facebook/redirect&client_secret=BLAHBLAHsomeawesomesecret&grant_type=fb_exchange_token&fb_exchange_token=BLAHBLAHBLAHdontusemytokensilly)

这是 Facebook 返回的内容：

```
access_token=BLAHBLAHBLAHdontusemytokensilly&expires=3967 
```

两个请求中都返回了相同的 access_token。

**更新 2**

我将上面的访问令牌放入[Facebook 调试器](https://developers.facebook.com/tools/debug)，这是它返回的内容：

```
App ID: 
BLAHBLAH
User ID:    
211800900 : David Barratt
Issued: 
Unknown
Expires:    
1347303600 (in 40 minutes)
Valid:  True
Origin: Web
Scopes: create_event create_note email friends_actions.music friends_actions.news friends_actions.video friends_likes friends_subscriptions manage_pages photo_upload publish_actions publish_stream rsvp_event share_item status_update user_about_me user_actions.music user_actions.news user_actions.video user_events user_interests user_likes user_location user_status user_subscriptions video_upload 
```

**更新 3**

删除我的所有权限并重新授权应用程序后（如@phwd 建议的那样）。Facebook API 返回以下内容：

```
access_token=BLAHBLAHBLAHdontusemytokensilly 
```

这是否意味着我已经返回了长期存在的 access_token？如果是这样，到期时间在哪里？

**更新 4**

当我通过 Facebook 调试器运行上述 access_token 时，我得到以下结果：

```
App ID: 
BLAHBLAH
User ID:    
211800900 : David Barratt
Issued: 
1347309538 (39 minutes ago)
Expires:    
Never
Valid:  True
Origin: Web
Scopes: create_event create_note email friends_actions.music friends_actions.news friends_actions.video friends_likes friends_subscriptions manage_pages photo_upload publish_actions publish_stream rsvp_event share_item status_update user_about_me user_actions.music user_actions.news user_actions.video user_events user_interests user_likes user_location user_status user_subscriptions video_upload 
```

这似乎解决了最初的问题，但奇怪的是 access_tokens 是不确定的，而不是持续规定的 60 天。

关于为什么会这样的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T19:35:45.330

不确定你是否知道。但是无论用户登录您的应用程序多少次，访问令牌每天只会更新一次。

请参阅：[https ://developers.facebook.com/roadmap/offline-access-removal/](https://developers.facebook.com/roadmap/offline-access-removal/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T19:41:53.673

> 由于 Facebook 正在删除 offline_access 权限，我想继续迁移我们的网站以使用新系统。

`offline_access`确保您在应用的高级设置中启用了“删除权限”

![高级设置](../Images/eebc7297e0ea035261f4b8ee2bae310d.png)

如果你这样做了，你可能会遇到一个错误[https://developers.facebook.com/bugs/378106708911903](https://developers.facebook.com/bugs/378106708911903)

# javascript - 重新加载 AJAX 请求的页面源

> ID：12355284
> 
> 赞同：3
> 
> 时间：2012-09-10T15:57:50.620
> 
> 标签：javascript, html, ajax, reload

我发现如果我在页面上使用 AJAX 调用，页面源将保持不变。这可能会导致问题，例如，如果用户在浏览器中使用前进/后退操作，当它返回页面时，浏览器将拥有/读取原始 HTML 代码，而不是具有 AJAX 内容的代码。例如，假设您构建了一个页面

```
<div id="foo">
<script type="text/javascript">
setTimeout('ajaxFunction', ...);
</script>
</div> 
```

加载页面后，它将调用 ajaxFunction，最终将 div 标签的内容替换为 id="foo"（顺便说一句，它也可以是递归调用）。但是您可以从浏览器查看的页面源代码仍将包含此代码段。有没有办法在不重新加载页面的情况下刷新页面源？

我知道我可以在我的 AJAX 代码中添加页面重新加载，但我想避免它并且不打扰最终用户。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T16:04:23.470

浏览器正在向您显示它在 HTTP 响应中从服务器接收到的内容。DOM 中的所有动态变化都不会反映在那里。因此，您可以使用 FF 中的 firebug 或 Chrome 中的开发者工具来跟踪动态变化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T16:15:10.897

如果您正在使用右键单击可用的“查看源代码”选项 - 某些浏览器（如果不是全部）正在执行另一个请求以获取 HTML。开发人员工具/Firebug 将向您显示更新的 HTML，但似乎在下一个/前进导航后显示初始 HTML（未使用 JS/AJAX 进行更改）。我认为 chrome 也会缓存动态更改，但只是检查了这一点，它显示了初始页面。假设没有办法改变这种行为。就我而言，这里唯一的方法是调用 ajaxFunction`document.onload`如果您想确保向用户显示最新信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-05T17:55:10.147

如果您绝对需要获取已加载的页面源，而无需重新加载或重新提交，我建议您使用这个 Chrome 扩展程序，它在大多数情况下都运行良好。

[https://chrome.google.com/webstore/detail/quick-source-viewer/cfmcghennfbpmhemnnfjhkdmnbidpanb](https://chrome.google.com/webstore/detail/quick-source-viewer/cfmcghennfbpmhemnnfjhkdmnbidpanb)

# azure - 如何动态/以编程方式设置企业库数据库跟踪侦听器连接字符串

> ID：12355288
> 
> 赞同：1
> 
> 时间：2012-09-10T15:58:05.347
> 
> 标签：azure, enterprise-library, tracelistener, trace-listener

有没有办法动态/以编程方式设置 EntLib 5 数据库跟踪侦听器使用的连接字符串？

我在 Windows Azure 中托管我的 WCF 服务，这意味着一旦部署了 web.config，我将无法访问它。为了消除每当我想将数据库跟踪侦听器指向不同的数据库时重新部署我的解决方案的需要，我希望有一种方法可以从我的服务配置文件中提取该设置并动态设置它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T18:28:57.580

是的，您可以使用本文所述[的](http://entlib.codeplex.com/discussions/270338)[流畅配置](http://msdn.microsoft.com/en-us/library/ff664363%28v=pandp.50%29.aspx#fluent_api_logging)：

```
var builder = new ConfigurationSourceBuilder();
builder.ConfigureData()
        .ForDatabaseNamed("MyDb")
        .ThatIs.ASqlDatabase()
        .WithConnectionString(RoleEnvironment.GetConfigurationSettingValue("MyConnectionString"))
        .AsDefault();

builder.ConfigureLogging()
        .WithOptions
        .LogToCategoryNamed("General")
        .SendTo
        .Database("Formatted Database TraceListener").UseDatabase("MyDb")
        ...;

var configSource = new DictionaryConfigurationSource();
builder.UpdateConfigurationWithReplace(configSource);
EnterpriseLibraryContainer.Current = EnterpriseLibraryContainer.CreateDefaultContainer(configSource); 
```

# python - Django: cannot import name formset_factory

> ID：12355293
> 
> 赞同：4
> 
> 时间：2012-09-10T15:58:16.677
> 
> 标签：python, django, pycharm, python-import

I have trouble importing formset_factory from django.

Here's the traceback:

```
from django.forms import formset_factory

Environment:

Request Method: GET
Request URL: http://localhost:8000/forma/

Django Version: 1.4.1
Python Version: 2.7.3
Installed Applications:
['debug_toolbar',
 'django_extensions',
 'gunicorn',
 'django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'internal',
 'internal.customers',
 'internal.customers.natural',
 'internal.customers.entity',
 'internal.farmsteads',
 'internal.photos',
 'internal.offers',
 'internal.orders',
 'internal.places',
 'internal.statuses',
 'internal.extra_information',
 'internal.properties',
 'internal.calendar',
 'internal.newsletters',
 'aemdyutils',
 'tinymce']
Installed Middleware:
('debug_toolbar.middleware.DebugToolbarMiddleware',
 'django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware',
 'django.middleware.clickjacking.XFrameOptionsMiddleware')

Traceback:
File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py" in get_response
  101\.                             request.path_info)
File "/usr/local/lib/python2.7/dist-packages/django/core/urlresolvers.py" in resolve
  300\.                     sub_match = pattern.resolve(new_path)
File "/usr/local/lib/python2.7/dist-packages/django/core/urlresolvers.py" in resolve
  209\.             return ResolverMatch(self.callback, args, kwargs, self.name)
File "/usr/local/lib/python2.7/dist-packages/django/core/urlresolvers.py" in callback
  216\.         self._callback = get_callable(self._callback_str)
File "/usr/local/lib/python2.7/dist-packages/django/utils/functional.py" in wrapper
  27\.         result = func(*args)
File "/usr/local/lib/python2.7/dist-packages/django/core/urlresolvers.py" in get_callable
  92\.                 lookup_view = getattr(import_module(mod_name), func_name)
File "/usr/local/lib/python2.7/dist-packages/django/utils/importlib.py" in import_module
  35\.     __import__(name)
File "/home/aemdy/projects/rezervavau_v2/internal/orders/views.py" in <module>
  3\. from django.forms import formset_factory

Exception Type: ImportError at /forma/
Exception Value: cannot import name formset_factory 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-10T16:00:51.850

您从错误的位置导入它，您需要从以下位置导入`django.forms.formsets`：

```
from django.forms.formsets import formset_factory 
```

请参阅[表单集文档](https://docs.djangoproject.com/en/stable/topics/forms/formsets/)。

# streaming - Wowza、iOS 和 HTML5 视频标签

> ID：12355296
> 
> 赞同：1
> 
> 时间：2012-09-10T15:58:31.730
> 
> 标签：streaming, html5-video, wowza

我正在尝试使用 html5 中的标签流式传输到 ipad... 它应该像使用正确的源设置视频标签一样简单，仅此而已，但这根本不起作用...

我在此页面[http://www.wowza.com/html/mobile.html](http://www.wowza.com/html/mobile.html)上找到了一个示例链接，一个 rtsp url，这是我必须用于 iOS 设备的链接......

我正在这样做：

```
<video controls="controls" >
    <source src="rtsp://184.72.239.149/vod/mp4:BigBuckBunny_175k.mov" />
</video> 
```

我也试过

```
<video controls="controls" src="src="rtsp://184.72.239.149/vod/mp4:BigBuckBunny_175k.mov"></video> 
```

但是他们都没有，在网页上我只是得到一个带有“播放”按钮的黑框，当然它不起作用....

任何的想法？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T08:02:06.200

我在 Amazon EC2 上使用来自 Wowza 的 HTML5 流，如下所示

```
http://[VIDEO_PATH]:1935/vod/mp4:videoclip1/playlist.m3u8 
```

用你的 ip 替换视频路径，用你的视频名称替换视频剪辑

# c# - Performance: minimize database hitting

> ID：12355299
> 
> 赞同：0
> 
> 时间：2012-09-10T15:58:34.507
> 
> 标签：c#, sql-server, sql-server-2008

I have a `list<abbreviatedProducts>` that I need to cross-reference with values from my sql server 2008 database.

I am imagining I have to iterate the string and hit the database each time for each product.

```
List<string> abbreviatedProducts = new[] { strawb, bana, ki, orang };

for each (var item in products)
{
  //hit database to get full product name;
} 
```

Is this the best way?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T16:01:53.970

有一种更快的方法，你可以这样做：

```
List<string> products = new [] { "prod1", "prod2", "prod3" };

var dbProducts = datacontext.Products.Where(pr => products.Contains(pr.ProductName)); 
```

这假设您的`Products`表中有一个名为`ProductName`“prod1”等名称的列。

# php - Getting embed code for specific vimeo video, vimeo API

> ID：12355300
> 
> 赞同：0
> 
> 时间：2012-09-10T15:58:37.267
> 
> 标签：php, vimeo

Ok, working on a vimeo based video blog theme for wordpress and rather than lazily ask people to paste the embed code into each video update (via a custom field), I'd rather the user supplied just the video id... basically I can't guarantee that each video is going to be the same height / width so I'm trying to get the embed code directly from vimeo (rather than getting the user to supply) rather than hardcoding a height / width for the iframe (as the theme is going to be responsive and I'm using a small jquery script to resize the videos on the fly)

So far, having tried to butcher Vimeo's own API example, I've got this:

```
function curl_get($url) {
    $curl = curl_init($url);
    curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($curl, CURLOPT_TIMEOUT, 30);
    curl_setopt($curl, CURLOPT_FOLLOWLOCATION, 1);
    $return = curl_exec($curl);
    curl_close($curl);
    return $return;
} 

// Create the URL
$oembed_vid_id = get_field('video_embed_code');
$oembed_url = 'http://vimeo.com/api/v2/video/' . $oembed_vid_id . '.xml';

// Load in the oEmbed XML
$oembed = simplexml_load_string(curl_get($oembed_url));
$embed_code = html_entity_decode($oembed->html);

<?php echo $embed_code ?> 
```

But I get nothing back, have I overlooked something quite basic?

I can confirm that the $oembed_url URL does exist, try any vimeo id and you'll see the relevant xml for it, i.e. here's a video I've plucked from vimeo:

[http://vimeo.com/api/v2/video/48198301.xml](http://vimeo.com/api/v2/video/48198301.xml)

Would be fantastic if I could get to grips with this as I'll be able to pull down thumbnails etc. and make use of all that other lovely info tucked away in the xml file.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T16:28:43.210

从[Vimeo 的示例代码](https://github.com/vimeo/vimeo-api-examples/blob/master/oembed/php-example.php)中，您似乎没有使用正确的 API。

`http://vimeo.com/api/v2/video/`将返回视频信息字段，但没有`html`字段。要获取嵌入代码，请使用以下 URL：

```
$oembed_url = 'http://vimeo.com/api/oembed.xml?url=' . urlencode("http://vimeo.com/$oembed_vid_id"); 
```

# php - PHP mySQL - Loop while consecutive specific values

> ID：12355301
> 
> 赞同：1
> 
> 时间：2012-09-10T15:58:40.523
> 
> 标签：php, mysql, loops

Long time reader, first time poster, so please forgive what could be a stupid question...

I have a table in my database (I'm creating a Basketball Fantasy Keeper League Draft) that has the order of the draft (pick number, GM nominated to make that pick, picked player, the time the pick was made [there's a 12hr draft window] and whether the pick is a keeper pick or not) so what I'm trying to do is detect if the next pick is a keeper pick and if it is, run a few more queries, etc etc. I can do it if there is only ONE keeper pick where a GM would normally make a selection, but what happens if there are 2 or more keeper picks in a row?

So instead of doing a bunch of nested IF statements where I run a query selecting the next pick from the table and checking if it's a keeper pick or not 3 or 4 times (see below):

```
$query1Counter = "SELECT counterID FROM draftCounter";
$query1Result=mysql_query($query1Counter);
$livePickCount=mysql_numrows($query1Result); 
```

then:

```
if ($livePickCount != "") {
    //Do stuff then:
    //run $query1Counter again, then:

    if ($livePickCount != "") {
        //Do stuff then:
        //run $query1Counter again

        if ($livePickCount != "") {
            //Do stuff then:
            //run $query1Counter again
        }
    }
} 
```

I was hoping that I could pull ALL the results from the table like:

```
query = SELECT * FROM keeperLeagueDraftOrder;
$result=mysql_query($query); 
```

pull out the specific column value like:

```
$keeperPick=mysql_result($result,$i,"keeperPick"); 
```

and then, since it's either 1 for a Keeper Pick and 0 for a normal pick, possibly do a loop like:

```
WHILE $keeperPick=1 {
    //Do all the stuff that would skip the row here
} 
```

So that it loops in case there are 2 or more Keeper pics in a row, otherwise, once it gets to the first value where `keeperPick==0`, then it goes about it's normal business.

My problem is that I'm not a proper programmer and am only fudging my way through this stuff by googling and copy/pasting and some tweaking where needed, and only used to really simple loops.

Sample table (where the first draft pick has been made as well as 4 Keeper picks nominated [no draft time]):

```
draftPickID  draftPickPlayerID  draftPickGM  keeperPick  draftTime
1            72                 5            0           2012-09-10 22:04:24
2            10                 3            1           0000-00-10 00:00:00
3            32                 2            1           0000-00-10 00:00:00
4            0                  6            0           0000-00-10 00:00:00
5            0                  1            0           0000-00-10 00:00:00
6            5                  4            1           0000-00-10 00:00:00
7            44                 4            1           0000-00-10 00:00:00
8            0                  1            0           0000-00-10 00:00:00
9            0                  6            0           0000-00-10 00:00:00
10           0                  2            0           0000-00-10 00:00:00 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T16:03:38.107

如果您只是想从 keeperPick = 0 和 draftPickPlayerID = 0 的数据库中获取最低的 draftPickID，为什么不直接使用这个数据库查询呢？

```
SELECT * FROM keeperLeagueDraftOrder
WHERE keeperPick = 0 AND draftPickPlayerID = 0
ORDER BY draftPickID ASC
LIMIT 1 
```

这消除了循环或其他任何需要。它只会让您进入需要进行实际选择的选秀中的下一个选择。

此外，您应该真正考虑使用`mysqli_*`函数，因为`mysql_*`不鼓励使用函数。

# android - Android - Need help for Tabs+Swipe template in SDK 20

> ID：12355302
> 
> 赞同：3
> 
> 时间：2012-09-10T15:58:48.463
> 
> 标签：android, layout, tabs

I really like the template for Tabs+Swipe. You know...this one:

![enter image description here](../Images/841b4327e937490946fac1ea0ea9ea3e.png)

The problem is, **I do not know where to start** after creating that template. **How to put a layout into each tab page?**

Can we do something like call a Class when the tab is selected? So I can store the view for first tab in Class A then second tab in Class B.

I cannot found any information about this in Google, maybe because it is a new feature from Android SDK?

Thanks

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T16:09:15.800

> 如何将布局放入每个标签页？

生成的代码`ViewPager`在布局文件中创建一个，并将操作栏选项卡连接到其中的页面`ViewPager`。就我个人而言，我宁愿使用一个`PagerTabStrip`，或者可能是 ViewPagerIndicator 等价物之一，但他们没有问我...... :-)

无论如何，要填写页面，您需要替换（或完成）生成的活动的`SectionsPagerAdapter`和/或`DummySectionFragment`内部类。现在，它被设置为三个页面，每个页面只是一个`TextView`. 但是，您可以`DummySectionFragment`改为扩展布局，如果您正在为每个选项卡寻找不同的布局，您可能会`Fragment`为每个布局/选项卡组合创建单独的实现。然后，您将教`SectionsPagerAdapter`您想要多少页 ( `getCount()`) 以及每页使用什么 ( `getItem()`) 以及每个选项卡标题是什么 ( `getPageTitle()`)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T21:17:33.553

您是否可以放置一个在选项卡之间切换活动的示例？上面的例子并不理想。

# php - absolute/relative paths for php includes

> ID：12355303
> 
> 赞同：1
> 
> 时间：2012-09-10T15:58:49.797
> 
> 标签：php

I have a function(orders) with many php includes in a file called extract.php

[http://example.com/application/dir1/dir2/dir3/extract.php](http://example.com/application/dir1/dir2/dir3/extract.php)

```
function orders ($username)
{
 require ("functions.inc.php");
 define("DATAGRID_DIR", "./../datagrid/");
 define("PEAR_DIR", "./../datagrid/pear/");
 require_once (DATAGRID_DIR . 'datagrid.class.php');
 require_once (PEAR_DIR . 'PEAR.php');
 require_once (PEAR_DIR . 'DB.php');
 require_once ('./../datagrid/classes/database.class.php');

//function code here
} 
```

I have another file(install.php) that calls this function inside the same directory and it works very well.

```
<?php
include ("extract.php");
orders ("643443876996");
?> 
```

However, when i include it in another function in this path [http://example.com/orders/getorder.php](http://example.com/orders/getorder.php), it gives me error that it cannot find my files 'datagrid.class.php';

```
 <?php
    include ("include('../application/dir1/dir2/dir3/extract.php');");
    orders ("643443876996");
    ?> 
```

How can I get the path referencing correct?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T16:04:21.200

来自服务器根目录的引用，使用 $_SERVER['DOCUMENT_ROOT'] 或

需要一次（DATAGRID_DIR。'/application/dir1/dir2/dir3/datagrid.class.php'）；

ETC...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T16:16:55.847

相对文件总是从调用 PHP 二进制文件的目录中计算出来的。

为避免这种情况，您可以使用`__FILE__`常量来引用实际文件。

使用它你可以这样写：

```
$path = realpath(dirname(__FILE__)) . '/my/relative/path';

include_once $path; 
```

无论在哪里调用脚本，这总是会产生相同的路径

# sql - how to combine two update statements

> ID：12355305
> 
> 赞同：2
> 
> 时间：2012-09-10T15:59:07.257
> 
> 标签：sql, sql-update

I have two following update statements:

```
update tb1
set col1=1
where id in ('1', '2', '3')

update tb1
set col1=0
where id not in ('1', '2', '3') 
```

Can I combine above two update statements into one?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T16:00:28.123

尝试这个：

```
UPDATE tb1 SET col1= CASE WHEN id in ('1', '2', '3') THEN 1 ELSE 0 END 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T17:58:20.957

```
UPDATE tb1 
SET col1 = CASE WHEN id in (1, 2, 3) 
                    THEN 1 
                WHEN id NOT IN (1, 2, 3)
                    THEN 0
                ELSE
                    col1
           END ; 
```

# jquery - Jquery Masonry not accommodating different heights

> ID：12355310
> 
> 赞同：0
> 
> 时间：2012-09-10T15:59:20.623
> 
> 标签：jquery, css, image, grid

I'm currently trying to get jquery masonry to accomodate with different image heights, but it is not wanting to work.

CSS:

```
 #container {
    background-color:red;
    width:1000px;
    text-align:center;
    margin: 0 auto;
    }

    .item {

    float:left;
    margin:10px;
    width:275px;
    background-color:red;

} 
```

Jquery:

```
 <script type="text/javascript" src="jquery-1.7.2.min.js"></script>
<script src="/jquery.masonry.min.js"></script>
<script>
$(function(){
  $('#container').masonry({
    // options
    itemSelector : '.item',
    columnWidth : 275
  });
});
</script> 
```

HTML:

```
<div id="container">
<div class="item"><img src="/green"></div>

<div class="item"><img src="/purple"></div>

<div class="item"><img src="/green"></div>

<div class="item"><img src="/green"></div>

<div class="item"><img src="/purple"></div>

<div class="item"><img src="/green"></div>
 </div> 
```

In an ideal world, the two purple squares would be beneath each other.

Interestingly, if I remove the jquery masonry, nothing changes.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T16:15:23.797

如果您修复了我在上面的评论中提到的 HTML 问题，并在加载 jQuery Masonry 文件之前加载 jQuery，这有望解决您的问题。

我之前的评论：

也许尝试修复您的 HTML 文档，看看是否有帮助。您的 STYLE 标记应在 HEAD 内，并且您没有结束 HEAD 标记。

# c++ - How large is the branch prediction buffer for a typical modern CPU?

> ID：12355312
> 
> 赞同：4
> 
> 时间：2012-09-10T15:59:26.240
> 
> 标签：c++, performance, cpu, branch-prediction

The application that I'm dealing with has a large number of a if-statements with the characteristics that in any one execution, only one of the branches is executed 90% of the time.

Now, I can test the impact of branch prediction on a single if-statement for a specific CPU by doing something like this :-

```
#include <iostream>
#include <stdlib.h>

using namespace std;

int main() {
  int a;
  cin>>a;
  srand(a);
  int b;

  long count=0;

  for (int i=0; i<10000; i++) {
    for (int j=0; j<65535; j++) {
      b = rand() % 30 + 1;
      if (b > 15) // This can be changed to get statistics for different %-ages
        count += (b+10);
    }
  }

  cout << count <<"\n";
} 
```

My question is, is there a way of testing the scalability and impact of branch prediction with multiple if-statements in an actual large application for a given CPU?

Basically, I want to be able to figure out how much branch mispredicts are costing on various CPUs and their impact on the application.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T18:04:59.730

您需要考虑分支的复杂性，编译器可能会使用特定于架构的操作代码（如 CMOV（比较和移动））来删除分支。

您的简单示例代码

```
if (b > 15)
    count += (b+10); 
```

这是编译成机器语言的代码

```
;; assembly x86 FASM/NASM syntax

;; WITH branching
MOV ebx, [b] ;; b
MOV ecx, [count] ;; count
CMP ebx, 15 ;; if condition to set flags
JLE .skip ;; { branch/jump over the if body when less than or equal
LEA eax, [ecx + ebx + 10] ;; count + b+10
MOV [count], eax ;; store count
.skip: ;; } label after the if block

;; WITHOUT branching
MOV ebx, [b] ;; b
MOV ecx, [count] ;; count
LEA eax, [ecx + ebx + 10] ;; pre-calc avoiding the need to branch
CMP ebx, 15 ;; if condition to set flags
CMOVLE eax, ecx ;; make eax equal to ecx (current count) when less than or equal
            ;; avoiding the branch/jump
MOV [count], eax ;; store count 
```

所以除非你知道你的优化编译器是如何优化你的代码的，否则分析分支预测有点困难。如果您正在检查您的机器代码输出并且知道您有很多 J[condition] 语句，那么使用注释中提到的代码分析工具就足够了。尝试在不使用适当的架构调试寄存器的情况下进行自己的分支预测测试将导致我在上面演示的情况。

# javascript - javascript checkbox function if checked will delete the data not working

> ID：12355317
> 
> 赞同：0
> 
> 时间：2012-09-10T15:59:41.537
> 
> 标签：javascript, checkbox

I have a simple checkbox function in javascript which would determine which items are checked.

```
<script type="text/javascript" language="javascript">
    var items = new Array();
    function prepareDeleteItems(className){
        var value = className;
        if($('.'+value).attr('checked'))
        {
            items[items.length] = value;
        }
        else
            removeItemFromList(value);
        reAddHiddenInput();
    }

    function reAddHiddenInput(){
        $('.itemsToDelete').html("");
        for(var i = 0; i<items.length; i++)
        {

            $('.itemsToDelete').append('<input type="hidden" name="itemstodelete[]" value="'+($('.'+items[i]).val())+'" />');
        }       
    }

    function removeItemFromList(className){
        for(var i = 0; i<items.length; i++)
        {
            if(items[i] == className)
                items.splice(i,1);
        }
        return;
    }
</script> 
```

then I have the if statement which will delete the items selected.

```
if (isset($_POST['delete'])){

        $delete = $_POST['check'];

            $N = count($delete);
                echo $N;
                    for($i=0; $i < $N; $i++){

                        $strSQL = "DELETE FROM customerinfo ";  
                        $strSQL .="WHERE CUS_ID = '".$delete[$i]."' ";  
                        mysql_query($strSQL);  

                    }
    } 
```

and to display the data

```
<form action="<?php echo $_SERVER['PHP_SELF'];?>" method="POST">

<div>
<input type="button" title="delete item" value='Delete' name='delete'/></div>

<div>

<table width='95%' border='1'  class='hovertable'>
  <tr>
  <td colspan='9'>CUSTOMERS</td>
  </tr>
  <tr>
  <th>---</th>
  <th>---</th>
  <th>ID</th>
  <th>First Name</th>
  <th>Last Name</th>
  <th>Email</th>
  <th>Gender</th>
  <th>Address</th>
  <th>Contact</th>
  </tr>
<?php
while($row = mysql_fetch_array($sql2)){ 

$CUS_ID = $row['CUS_ID'];
$FNAME = $row['FNAME'];
$LNAME = $row['LNAME'];
$EMAIL = $row['EMAIL'];
$GENDER = $row['GENDER'];
$ADDRESS = $row['ADDRESS'];
$CONTACT = $row['CONTACT'];

 ?>
<tr>

<?php if (isset($_POST['update'])){ ?>
<?php if($ID==$CUS_ID){?>

<?php }else{?>

<?php } ?>
<?php }else{?>

    <td align='center'> 
```

now this is where I put the checkbox.

```
<input type="checkbox" name="check[]" class="item_del_<?php echo $CUS_ID; ?>" value="<?php echo $CUS_ID; ?>" onclick="prepareDeleteItems('item_del_<?php echo $CUS_ID; ?>');" />
    <!--ADD-->        </td>                 
<?php } ?>
</form> 
```

and more codes.

but the checkbox function is not working, the items aren't deleted. please help.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T16:05:13.900

我会做一切 php-wise

```
<input type="checkbox" name="check[]" 
```

可能成为

```
<input type="checkbox" name="check[<?php echo $CUS_ID; ?>]" 
```

这样，您将收到一个数组，其中包含以 ID 作为键的已删除项目

```
foreach ($_POST[check] as $key=>$value){
..delete element with id=$key here...
} 
```

# php - PHP AMQP 内部服务器错误

> ID：12355319
> 
> 赞同：0
> 
> 时间：2012-09-10T15:59:46.173
> 
> 标签：php, rabbitmq, amqp

我在我的 Debian Squeeze 服务器上使用编译和安装的 AMQP 来连接到我的 RabbitMQ 服务器。我正在实例化的类中使用以下命令：

```
$this->_amqpConnection = new AMQPConnection($arrRmqConfig);
$this->_amqpConnection->connect();

// creating the amqp channel is sufficient to throw the errors
$this->_amqpChannel = new AMQPChannel($this->_amqpConnection);

$this->_amqpExchange = new AMQPExchange($this->_amqpChannel);
$this->_amqpExchange->setName($strExchange);

$this->_amqpExchange->publish($strMessage, 'dco.marker', AMQP_MANDATORY); 
```

我收到 lighttpd 错误消息和 HTTP-500 响应：

```
2012-09-10 17:43:01: (mod_fastcgi.c.2568) unexpected end-of-file (perhaps the fastcgi process died): pid: 11358 socket: unix:/var/tmp/sockets/php-fastcgi.socket11050-99 
2012-09-10 17:43:01: (mod_fastcgi.c.3356) response not received, request sent: 1002 on socket: unix:/var/tmp/sockets/php-fastcgi.socket11050-99 for /index.php?, closing connection 
```

发布消息和调试代码正在工作。我想知道为什么程序运行到最后但仍然产生内部服务器错误。

任何人都可以重现这个或有一个想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T09:40:46.070

似乎一个较新的版本解决了他的问题

# php - 在一个带有条件的查询中选择 3 个表

> ID：12355321
> 
> 赞同：4
> 
> 时间：2012-09-10T15:59:51.920
> 
> 标签：php, mysql, sql

如何在一个查询中选择 3 个表并显示所有产品的价格？

下面是我的数据库结构（MySql）：

**类别**

```
+-------------+------------+
 category_id  | parent_id  |
+-------------+------------+
  1           |      0     
  2           |      1
  3           |      1
  4           |      1
  5           |      2
  6           |      3 
```

**products_to_categories**

```
+-------------+------------+
 product_id   | category_id|
+-------------+------------+
  54          |      0     
  55          |      2
  56          |      2
  57          |      2
  58          |      3
  59          |      3
  60          |      4 
```

**产品**

```
+-------------+------------+
 product_id   |    price   |
+-------------+------------+
  54          |      10.50     
  55          |      11.20
  56          |      1.00
  57          |      22.20
  58          |      32.0
  59          |      32.0
  60          |      22.0 
```

以下是我的情况；

```
1\. table categories : parent_id = '1'  
(result : 2,3,4)

2\. table products_to_categories : category_id = result categories(result : 2,3,4) 
(result : 55,56,57,58,59,60)

3\. table products : inner join or left join table product to display price where product_id = result products_to_categories(result : 55,56,57,58,59,60) 
```

**最终输出**

```
 55 - 11.20
  56 - 1.00
  57 - 22.20
  58 - 32.0
  59 - 32.0
  60 - 22.0 
```

在我在这里发布这个问题之前是我之前的查询（我卡住了如何继续条件 2）

```
$sql_all = mysql_query("SELECT cat.parent_id,cat.category_id FROM categories cat WHERE cat.parent_id='1' ");
while($row = mysql_fetch_array($sql_all)) {
echo $row['categories_id'].'<br/>'; 
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T16:02:07.553

试试这个，

```
SELECT  c.*
FROM    categories a
        INNER JOIN products_to_categories b
            ON a.category_id = b.category_id
        INNER JOIN products c
            ON b.product_id = c.product_id
WHERE  a.parent_id = 1 
```

这将显示`products`表中具有`parent_id`= 1 的所有记录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T16:05:38.237

看看下面的查询：

```
SELECT pro.product_id, SUM(pro.price) 
FROM categories cat 
JOIN products_to_categories ptc USING(category_id)
JOIN products pro ON ptc.product_id = pro.product_id
WHERE cat.parent_id='1' 
```

使用上述解决方案，您将来可以轻松扩展，以防您想按特定产品分组...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T16:11:04.703

以下查询应该会带来您想要的结果。

```
SELECT p.product_id, p.price
FROM products p
JOIN products_to_categories pc ON (pc.product_id = p.product_id)
JOIN categories c ON ((c.category_id = pc.category_id) AND (c.parent_id = "1")) 
```

当然，您可以将**1**`parent_id`更改为任何其他值，并获得相应的结果。

 **注意：我相信在这种情况下，通过`parent_id`在 JOIN 子句而不是 WHERE 子句中声明条件，您将获得更好的性能。**

# regex - Extract title from HTML content

> ID：12355323
> 
> 赞同：0
> 
> 时间：2012-09-10T15:59:54.120
> 
> 标签：regex

Given the following HTML content (limited to the absolute *minimum* I require):

![enter image description here](../Images/9a5ade211b91f42bdf7842ebae3680b4.png)

How would I be able to extract `Page Title` using Regex?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-01T08:52:30.520

正如其他人所评论的那样，正则表达式可能不适合防弹方法。例如，使用正则表达式，很难检查`<title>`标记是否是 HTML 中引用字符串的一部分。这是 StackOverflow 上对此类问题的反复回应。但就个人而言，我认为您有一个观点，即对于如此简单的提取，解析器将是矫枉过正的。如果您正在寻找一种在*大多数*情况下都有效的方法，那么以下方法之一应该可以满足。

**选项 1：后视/前瞻**

```
(?<=<title[\s\n]*>[\s\n]*)(.(?![\s\n]*</title[\s\n]*>))* 
```

这对标签使用了[lookbehind 和lookahead](http://www.regular-expressions.info/lookaround.html) - .NET 有一个复杂的正则表达式引擎，允许无限重复，因此您甚至可以检查标签名称和结束大括号之间的空格/返回字符（参见[这个答案](https://stackoverflow.com/questions/3314535/white-space-inside-xml-html-tags#3314572)）。

**选项 2：捕获组**

```
<title[\s\n]*>[\s\n]*(.*)[\s\n]*</title[\s\n]*> 
```

类似但稍微简单一点——整个正则表达式匹配包括开始和结束标签。第一个（也是唯一的）捕获组`(.*)`捕获中间感兴趣的位。

可视化： ![正则表达式可视化](../Images/02ac661c494d2597915f9c9ccbc004cd.png)

[在 Debuggex 上实时编辑](http://www.debuggex.com/r/nTVcC3ltpInvzX3W)

# javascript - jquery展开折叠效率

> ID：12355333
> 
> 赞同：1
> 
> 时间：2012-09-10T16:00:23.187
> 
> 标签：javascript, jquery, user-interface, performance

我刚刚在我们网站的一部分上实现了一个简单的展开/折叠系统。我尝试了几个现有的解决方案，但感觉要使网站适应它需要付出太多努力，所以我自己编写了适合的解决方案。

代码如下：

```
function hide(boxtohide, boxtomodify, expandbox) {

$('#' + boxtohide).hide(300);
$('#' + boxtomodify).css('background-image', 'url("images/new/date.png")');
$('#' + boxtomodify).css('height', '69px');
$('#' + expandbox).show(300);

}

function show(boxtohide, boxtomodify, expandbox, origheight, origurl) {
$('#' + expandbox).hide(300);
$('#' + boxtomodify).css('height', origheight);
$('#' + boxtomodify).css('background-image', 'url("'+origurl+'")');
$('#' + boxtohide).show(300);

} 
```

背后的逻辑是这样的：

*   用户点击隐藏
*   内容被隐藏
*   内容包装器替换为更薄的 div，
*   内容包装器中显示的展开按钮（即它替换原始内容）

并反过来再次扩展。

对我来说，代码感觉有点笨拙，我不是 javascript 高手，所以这里可能有点不够深入，欢迎提出任何建议！

戴夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T16:11:14.233

我建议的唯一明显更改是`$('#' + boxtomodify')`行，可以压缩为：

```
function hide(boxtohide, boxtomodify, expandbox) {
    $('#' + boxtohide).hide(300);
    $('#' + boxtomodify).css({
        'background-image' : 'url("images/new/date.png")'),
        'height' : '69px' });
    $('#' + expandbox).show(300);
}

function show(boxtohide, boxtomodify, expandbox, origheight, origurl) {
    $('#' + expandbox).hide(300);
    $('#' + boxtomodify).css({
        'height' : origheight
        'background-image' : 'url("'+origurl+'")' });
    $('#' + boxtohide).show(300);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T16:14:04.857

您可以加速代码，只需首先在 JS 中获取每个元素，然后链接这些 CSS 修改，如下所示：

```
function hide(boxtohide, boxtomodify, expandbox) {

var hideElem = document.getElementById(boxtohide),
    modElem = document.getElementById(boxtomodify),
    expandElem = document.getElementById(expandbox),
    cssObj = { 'background-image' : 'url("images/new/date.png")',
               'height' : '69px' };

$(hideElem).hide(300);
$(modElem).css(cssObj);
$(expandElem).show(300);

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T16:25:01.893

我敢打赌，您使用这种方式太复杂了，使用 jQuery，您可以用最少的代码完成这些事情，例如：

[jsfiddle](http://jsfiddle.net/jQ38R/)

```
$('.toggle').on('click', 'h3', function() {
    var $content = $(this).next('.content');
    $content.slideToggle('fast');
}); 
```

# c# - 从 XNA 中的 Texture2D 获取资产名称

> ID：12355338
> 
> 赞同：0
> 
> 时间：2012-09-10T16:00:46.607
> 
> 标签：c#, xna

我正在尝试在我的 XNA 项目中序列化数据。我有一个在运行时使用的 Texture2D 背景属性，但我也有一个“字符串属性”来保存我的背景名称。这将允许我序列化资产名称，以便稍后我可以使用该信息反序列化并加载到我的游戏中。

问题是 myTexture.Name 属性应该包含资产名称，但是当我尝试序列化为 XML 文件时，BackgroundName 元素为空。

下面是属性代码的样子：

```
//This property is Only used for serialization, myTexture is Texture2D and is assigned in the ctor of the class
public string BGName { get { return this.myTexture.Name;} set{/*Empty on purpose*/} } 
```

有人可以建议，如何从 Texture2D 中检索资产名称，根据 MSDN，此字段包含纹理的名称。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-10T17:42:17.703

XNA 框架实际上并未使用on`Name`属性；`GraphicsResource`由您决定用您认为合适的任何内容填充它。您可以编写一个辅助方法来很容易地做到这一点：

```
public static Texture2D LoadTexture2D(this ContentManager content, String asset)
{
    var texture = content.Load<Texture2D>(asset);
    texture.Name = asset;
    return texture;
}

var texture = contentManager.LoadTexture2D("textures\\whatever");
Console.WriteLine(texture.Name); // should be "textures\\whatever" 
```

# javascript - $.get 和 $.ajax 有什么区别？

> ID：12355342
> 
> 赞同：-6
> 
> 时间：2012-09-10T16:01:06.097
> 
> 标签：javascript, jquery, ajax

> **可能重复：**
> [$.ajax() 和 $.get() 和 $.load() 之间的区别](https://stackoverflow.com/questions/3870086/difference-between-ajax-and-get-and-load)

$.get() 和 $.ajax 有什么区别

我得到的代码使用这样的调用：

```
$.get(href)
   .success(function (content) {
        $('#content') 
```

和：

```
$.ajax({
    cache: false,
    url: href + params.param,
    dataType: 'html'
}) 
```

有人可以解释这些之间有什么区别。使用其中一个有什么优势吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T16:02:43.030

> 有人可以解释这些之间有什么区别。

请参阅[get](http://api.jquery.com/jQuery.get/)的文档：

> 这是一个简写的 Ajax 函数，相当于：

```
$.ajax({
  url: url,
  data: data,
  success: success,
  dataType: dataType
}); 
```

> 使用其中一个有什么优势吗？

一个更短。一是更灵活。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T16:03:10.780

`.get()`, `.getJSON()`, `.getScript()`,`.post()`和`.load()`都是调用`.ajax()`.

将它们视为使用更少代码获得相同结果的捷径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T16:03:40.770

我相信在幕后他们都做同样的事情。主要区别在于它`.get`是一个更简单的界面，使其更易于使用，但就您可以使用它执行的操作而言，灵活性要低得多。`.ajax`另一方面，那里有所有的功能，这意味着你可以做任何你想做的事情，但有点复杂。

作为一个经验法则，`.get`如果可以，并且当它似乎并不能完全按照您想要的方式继续使用时，请使用`.ajax`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T16:04:17.080

你可以在这里阅读：

```
$.ajax http://api.jquery.com/jQuery.ajax
$.get http://api.jquery.com/jQuery.get 
```

所有文档都可以在 jQuery 网站上找到

# database-design - Citadel 如何仅使用 BerkeleyDB 键/值存储来构建数据？

> ID：12355343
> 
> 赞同：3
> 
> 时间：2012-09-10T16:01:05.913
> 
> 标签：database-design, nosql, key-value, berkeley-db

我正在阅读[Citadel](http://www.citadel.org/)文档，它[提到它使用 BerkeleyDB](http://www.citadel.org/doku.php?id=faq%3ageneralquestions%3ardbms_store_layer#how_citadel_stores_your_data)来存储数据。由于 BerkeleyDB 是一个键/值存储，我想知道他们如何使用这样一个简单的数据模型来管理所有数据关系（因为 Citadel 做了很多事情）。

```
CREATE TABLE citadel (
  key LONGBLOB INDEX,
  data LONGBLOB
); 
```

这让我有机会最终看到使用 NoSQL 数据库建模的完整应用程序。然而，我找不到任何关于他们如何做到这一点的文档。

**那么，citadel 是如何仅使用 BerkeleyDB 键/值存储来构建数据的呢？**

*   它如何将电子邮件映射到用户？
*   用户如何与其他用户相关联？
*   联系人如何存储？
*   如何找到相关的电子邮件回复？
*   电子邮件如何标记为已查看？

这样的例子不胜枚举...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T11:12:31.040

相当多的 NoSQL 数据库，就其裸露形式而言，可以与文件系统相媲美。给定一个键（=路径），你会得到一个数据块（=文件内容）。其余的大致归结为调整和额外功能；

*   一个命名空间中有很多（数十亿和数十亿）键？（HBase、Riak、BerkeleyDB、...）
*   支持多 TB 值？(Amazon S3) 或针对许多较小的 (Zookeeper)
*   不透明的价值观？有些数据库不查看它们（HBase、BerkeleyDB），有些则查看（CouchDB）。

目前似乎最流行的事情是进行键扫描（HBase、Cassandra、CouchDB，我相信还有 BerkeleyDB），您可以在其中请求您感兴趣的键间隔，例如。“从`foo@bar:emails:folderName:00000000`到`foo@bar:emails:folderName:999999999`”。这通常会返回在两者之间的 ASCIIbetic 间隔中的键和/或值的列表。因此，您可以在平面命名空间中模拟类似文件的层次结构。

下一个问题是并发。*非常*简单，大多数 NoSQL 数据库放弃 ACID 以支持可扩展性和/或可用性。查看[CAP 定理](http://en.wikipedia.org/wiki/CAP_theorem)了解更多详情。

总而言之，在这么短的时间里很难做到主题公正，所以我真的建议你自己研究一下。

挑选一些开源项目（[OpenTSDB](http://opentsdb.net/)以一种有趣但显而易见的方式做事）。或者自己在 NoSQL 上构建一些东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T10:03:54.123

不久前我对 Amazon Simple DB 进行了深入研究，我怀疑 BerkleyDB 的做法可能有些相似。

Key 和 Value 都是 BLOBS。基本上你可以在那里存储任何东西。让我们根据您列出的一些观点/问题举一个例子。

我将介绍的要点如下：

*   它如何将电子邮件映射到用户？
*   用户如何与其他用户相关联？

与关系数据库一样，键值必须是唯一的，因此假设用户 ID/用户名是唯一的。因此，我们可以将 admin、jdoe、serviceadmin 等键值作为键。由于我们可以在 value 字段中存储任何内容，因此我们可以在 value 字段中存储 XML 文档。

一个示例可能如下所示：

```
Key:
    admin
Value:
     <user>
           <emaillist>
                <email>admin@server.com</email>
           </emaillist>
           <relatedusers>
                 <relateduser>
                          <name>jdoe</name>
                          <relationship>someidentifier</relationship>
                 </relateduser>
                 <relateduser>
                          <name>serviceadmin</name>
                          <relationship>someidentifier</relationship>
                 </relateduser>
           </relatedusers>
      </user> 
```

由于 XML 可用于以多种方式描述数据，这可能是可以实现的一个非常简单的示例。但是，您可以在其中存储一些与 XML 非常相似的二进制格式的数据，您可以通过某种方式检索和解释这些数据。像位 1 是用户的活动状态等。

NoSQL 的强大之处在于可以存储任何内容，并且行与行的结构也可以不同。这也是不利的一面。由于没有适当的文档就无法解释数据，因此从结构的角度来看，这些类型的数据库很难理解。它们实际上可以包含任何东西。

希望它现在在某种程度上有意义。

# ios - 限制 UIAppearance 代理范围

> ID：12355345
> 
> 赞同：1
> 
> 时间：2012-09-10T16:01:15.757
> 
> 标签：ios, uiappearance

我目前正在使用外观代理对象来自定义我的应用程序界面。

我想知道是否可以将自定义效果限制在特定视图控制器内的元素上。

换句话说，我可以使用

```
[UINavigatioBar appearance] 
```

更改特定屏幕内的颜色和字体属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T16:45:03.143

您可以使用appearanceWhenContainedIn 方法将外观代理的范围限制为查看包含在某个容器类中。例如

```
[[UIBarButtonItem appearanceWhenContainedIn:[UIToolbar class], nil] setTintColor:myToolbarColor]; 
```

# flexbuilder - 赢得 Azure PUT 文件上传

> ID：12355346
> 
> 赞同：0
> 
> 时间：2012-09-10T16:01:16.007
> 
> 标签：flexbuilder, azure-blob-storage, put

我需要使用 PUT 方法将文件从 Flex 上传到 Win Azure。

在 flex 中，我可以使用 URLRequest 上传文件，但我不知道要上传文件的 Azure 服务的 URL 是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T23:25:47.223

Azure blob 转到：http(s)://{storage-account-name}.blob.core.windows.net/{containername}/{blobname}

# jsf-2 - 使用具有绑定和会话作用域的数据表时，已在视图中找到组件 ID

> ID：12355348
> 
> 赞同：7
> 
> 时间：2012-09-10T16:01:27.770
> 
> 标签：jsf-2

我有一个 XHTML 页面，它在提交时会返回到自身。支持 bean 是会话范围的。在重定向到自身时，页面呈现 h:datatable 两次并给了我重复的 id 错误。我可以直观地看到表格彼此相邻呈现两次。

** xhtml 页面：**

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core">

                <f:view>
                <h:form  >

                <h:dataTable binding="#{ecole.dataTable}" value="#{ecole.getEcoleList()}" var="c"
                border="0" width="100%" cellpadding="0" cellspacing="0" 
                styleClass="order-table"
                headerClass="order-table-header"
                rowClasses="order-table-odd-row,order-table-even-row"
            >

                        <h:column>
                            <f:facet name="header">
                                ID
                            </f:facet>
                                #{c.idEcole}
                        </h:column>
                        <h:column>
                            <f:facet name="header">
                                Nom
                            </f:facet>
                                #{c.nomEcole}
                        </h:column>

                        <h:column>
                            <f:facet name="header">
                                Description
                            </f:facet>
                                #{c.desc_ecl}
                        </h:column>
                        <h:column>
                             <f:facet styleclass="options-width" name="header">
                                        Options
                             </f:facet>
                             <h:commandLink action="#{ecole.editEcoleItem()}" title="Edit" >
                                <h:graphicImage style="border:0" url="/icones/b_edit.png" />
                             </h:commandLink>
                             &#xa0;&#xa0;&#xa0;
                             <h:commandLink title="Delete" 
                             onclick="return confirm('Voulez-vous confirmer la suppression?') ;" 
                                 action="#{ecole.deleteEcole(c)}"
                             >
                              <h:graphicImage style="border:0" url="/icones/b_drop.png" />
                             </h:commandLink>
                        </h:column>

        </h:dataTable>
                <!--  end product-table................................... --> 
                </h:form>
                </f:view> 
```

这是显示的错误消息：

```
 java.lang.IllegalStateException: Component ID j_id15:j_id16:j_id29 has already been found in the view.  See below for details.
    +id: null
     type: javax.faces.component.UIViewRoot@1abe6f6
      +id: javax_faces_location_HEAD
       type: javax.faces.component.UIPanel@c84a5d
        +id: j_id4
         type: javax.faces.component.UIOutput@18a5776
        +id: j_id22
         type: javax.faces.component.UIOutput@1742dcc
      +id: j_id19
       ... 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-10T16:11:05.933

该`binding`属性应该绑定到请求范围的 bean，或者完全删除并用更好的替代方案替换，具体取决于具体的功能要求。

如果我获得了能够在`editEcoleItem()`方法中检索当前项目的功能要求，那么您可以直接将其作为方法参数传递，就像您在`deleteEcole()`. 这样您就可以完全删除该`binding`属性。这就是 JSF 2.0 / EL 2.2 的方式。也许您过于关注旧的 JSF 1.x 示例。在使用 JSF 2.x 进行开发时，您不应该这样做。

### 也可以看看：

*   [一个 JSF 2.0 CRUD 示例](https://stackoverflow.com/questions/3180400/recommended-jsf-2-0-crud-frameworks/3180885#3180885)
*   [如何将选定的行传递给 dataTable 中的 commandLink？](https://stackoverflow.com/questions/4994458/how-can-i-pass-a-parameter-to-a-commandlink-inside-a-datatable)

# firefox - SVG元素的边界框在浏览器之间不一致

> ID：12355349
> 
> 赞同：2
> 
> 时间：2012-09-10T16:01:28.990
> 
> 标签：firefox, svg, cross-browser, bounding-box

我注意到浏览器之间的形状边界框之间不一致。我制作了包含以下内容的 SVG：

```
<rect x="100" y="100" width="100" height="100" id="rect" fill="gray" stroke="black" stroke-width="2px" />
<path d="M100 100 L100 200 L200 200 L200 100 z" id="path" fill="red" stroke="white" stroke-width="2px"/> 
```

当我试图在 Chrome 和 IE 上获取它们的边界框 (element.getClientBoundingBox) 时，尺寸为 w=100，h=100，并且它们的位置对于两个形状都是 x=100，y=100。但是在 FireFox 上，对于第一个形状，我得到 w=102,h=102（大小 + 边框）和 x=99,y=99。在路径上的值更加奇怪 - w=116,h=116, x=92,y=92。

这是一个 Firefox 错误 - 应该发布到 Bugzilla 吗？SVG 规范对此有什么说明吗？（我找不到与此相关的任何信息）。有人知道解决此问题的任何方法吗？特别是路径元素对我来说有点不可预测。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T16:16:21.497

Firefox 在边框中包含笔画。[我们已要求](http://lists.w3.org/Archives/Public/www-style/2011Aug/0120.html)更改规范以反映这是正确的。

对于路径来说，尺寸太大是因为我们没有很好地计算出描边形状的实际尺寸，因为估计尖形状尺寸的复杂性。我们使用 stroke-miterlimit 来给出一个上限，但它并不是那么好。

您可以使用 SVG DOM getBBox 方法，该方法不包括形状的笔触，只为您提供填充尺寸。

# java - 在 Java 中使用 indexOf() 方法解析文件

> ID：12355351
> 
> 赞同：1
> 
> 时间：2012-09-10T16:01:36.130
> 
> 标签：java, string, performance, parsing, indexof

在stackoverflow中验证了[这篇文章后](https://stackoverflow.com/questions/5965767/performance-of-stringtokenizer-class-vs-split-method-in-java)，我正在使用`indexOf()`方法来解析文件中的值。以下是我的文件格式-

```
10/05/2005 10:02;AM;a@xyz.com;student=student1 std=X marks=87 rollnumber=102
10/05/2005 10:05;AM;b@xyz.com;student=student2 std=IX rollnumber=26
10/05/2005 10:15;PM;c@xyz.com;student=student3 std=VII marks=87 attandance=5 rollnumber=12
10/05/2005 10:32;AM;d@xyz.com;student=student4 std=V marks=87 rollnumber=69 
```

注意：电子邮件中的`domain name`ie`xyz.com`不会在任何地方更改。
以下是我目前使用的代码片段 -

```
 FileInputStream fis = new FileInputStream(file);
            BufferedReader br = new BufferedReader(new InputStreamReader(
                    fis));

            String line = "";
            while ((line = br.readLine()) != null) {

                int index = -1;

                if ((index = line.indexOf("xyz.com")) != -1) {
                    int inStudent = line.indexOf("student=", index);
                    int spaceExistsinStudent = -1;
                    int studentIndex = -1;

                    if ((spaceExistsinStudent = line.indexOf("student=\"", inStudent)) != -1)
                        studentIndex = line.indexOf(" ", inStudent);
                    else
                        studentIndex = line.indexOf("\" ", spaceExistsinStudent);

                    int inSTD = line.indexOf("std=", studentIndex);
                    int spaceExistsinSTD = -1;
                    int stdIndex = -1;

                    if ((spaceExistsinSTD = line.indexOf("std=\"", inSTD)) != -1)
                        stdIndex = line.indexOf(" ", inSTD);
                    else
                        stdIndex = line.indexOf("\" ", spaceExistsinSTD);

                    String studentName = line.substring(inStudent + 9, studentIndex);
                    String stdName = line.substring(inSTD + 4, stdIndex); 
```

无需粘贴整个代码。
好吧，使用上述实现，我可以工作，但是考虑到性能，这种有效的解决方案是否有效？任何更好的方法来实现同样的......
提前谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T16:14:28.540

我建议不要使用 indexOf()，而是使用 StringTokenizer。基本上你可以根据一些分隔符分割你的字符串（例如：;）..

while 循环中的示例

```
 StringTokenizer st = new StringTokenizer(line,";");

        st.nextToken(); //Date
        st.nextToken(); //AM
        String email = st.nextToken();
        String values = st.nextToken();

        StringTokenizer st2 = new StringTokenizer(values," ");

        while (st2.hasMoreElements()) {
            String token = (String) st2.nextElement();
            if(token.startsWith("student=")){
                System.out.println(token.substring("student=".length()));
            }else if(token.startsWith("std=")){
                System.out.println(token.substring("std=".length()));
            }

        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T16:04:46.600

您不需要对所有内容都使用 indexOf 。如果你想查看一个字符，你可以使用 charAt() 例如你正在检查一个 '"'

我会使用一种提取字段值的方法来简化代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T19:12:42.103

正如我在之前的评论中所说，我很惊讶解析是这里的瓶颈。但是，如果您想知道可以做到这一点的其他方法，并尝试一下，看看哪种方法最快，这里还有两个尚未发布的想法 - 使用`.split`：

```
String[] arr1 = line.split(";");
String dateTime = arr1[0];
String ampm = arr1[1];
String email = arr1[2];
String[] arr2 = arr1[3].split(" ");
String student, std, marks, rollnumber;
student = std = marks = rollnumber = null;
for (String str : arr2) {
    String value = str.substring(str.indexOf("=") + 1);
    switch(str.charAt(2)) {
    case 'u': student = value; break;
    case 'd': std = value; break;
    case 'r': marks = value; break;
    case 'l': rollnumber = value; break;
    }
} 
```

或使用正则表达式：

```
private static final Pattern PATTERN = Pattern.compile("([^;]+);([^;]+);([^;]+);student=([^ ]+) std=([^ ]+) marks=([^ ]+) rollnumber=([^ ]+)");

Matcher m = PATTERN.matcher(line);
m.find();
String dateTime = m.group(1);
String ampm = m.group(2);
String email = m.group(3);
String student = m.group(4);
String std = m.group(5);
String marks = m.group(6);
String rollnumber = m.group(7); 
```

# clojure - 使用有限域声明降序/升序坐标的谓词

> ID：12355352
> 
> 赞同：28
> 
> 时间：2012-09-10T16:01:37.723
> 
> 标签：clojure, prolog, logic, clojure-core.logic

我想写一个谓词，destroy，它声明第一个给定坐标 [y, x] 下降到第二个给定坐标（想象左上角有 [0, 0] 的棋盘）。

Prolog 中的一个非常简单的实现可能如下所示：

```
descending(B, A) :-
  B = [B1,B2],
  A = [A1,A2],
  B1 is A1 + 1,
  B2 is A2 + 1. 
```

我无法在 core.logic 中实现这一点。我已经尝试了很多不同的东西（==/=fd/conso/appendo 和+fd/+）。我尝试过的一件事：

```
(defn descendo
  [b a]
  (l/fresh [b1 b2 a1 a2]
           (l/== b [b1 b2])
           (l/== a [a1 a2])
           (l/+fd b1 1 a1)
           (l/+fd b2 1 a2))) 
```

他们中的大多数在像这样运行它们时什么都不返回：

```
(l/run* [q]
  (l/fresh [a]
    (l/infd a (l/domain [0 0] [1 0] [0 1] [1 1]))
    (descendo a [0 0])
    (l/== q a)))

=> () ; expected output: ([1 1]) 
```

我觉得在使用 core.logic 时在 Prolog 中想太多是不好的……任何提示都值得赞赏。提前致谢。

**编辑：**找到了一种解决方法，其中 descendo 保持不变，但是在运行它时我们不使用域：

```
(l/run* [q]
  (l/fresh [a]
    (l/membero a [[0 0] [1 0] [0 1] [1 1]])
    (l/membero q [[0 0] [1 0] [0 1] [1 1]])
    (descendo a q)))

=> ([1 1]) 
```

我不确定是否`domain`要在向量上使用，所以这可能不是一种解决方法，而是实际的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T17:27:31.457

找到了一种解决方法，其中 descendo 保持不变，但是在运行它时我们不使用域：

```
(l/run* [q]
  (l/fresh [a]
    (l/membero a [[0 0] [1 0] [0 1] [1 1]])
    (l/membero q [[0 0] [1 0] [0 1] [1 1]])
    (descendo a q)))

=> ([1 1]) 
```

我不确定 domain 是否打算用于向量，所以这可能不是一种解决方法，而是实际的解决方案。

# php - jquery ui自动完成导致标题错误

> ID：12355364
> 
> 赞同：2
> 
> 时间：2012-09-10T16:02:28.130
> 
> 标签：php, javascript, jquery

尝试重定向时出现错误。它只是在我安装了带有自动完成功能的搜索框后才开始的。当我拉出一些代码时，页面会再次正确重定向。我知道这不是我的 php.ini 设置。

这是我得到的错误：

> 警告：无法修改标头信息 - 标头已由 /home/content/67/6231767/html/nav.php:9 中的 /home/content/67/6231767/html/admin/includes/functions2 发送。第 7 行的 php

这是导致问题的代码。谢谢你的帮助！

```
$(function() { $.ajax({
        url: "/admin/includes/links.xml",
        dataType: "xml",
        success: function( xmlResponse ) {
            var data = $( "link", xmlResponse ).map(function() {
                return {
                    value: $( "title", this ).text(),
                    id: $( "url", this ).text()
                };
            }).get();
            $( "#tags" ).autocomplete({source: function (request, response) {
                    var term = $.ui.autocomplete.escapeRegex(request.term)
                        , startsWithMatcher = new RegExp("^" + term, "i")
                        , startsWith = $.grep(data, function(value) {
                            return startsWithMatcher.test(value.label || value.value || value);
                        })
                        , containsMatcher = new RegExp(term, "i")
                        , contains = $.grep(data, function (value) {
                            return $.inArray(value, startsWith) < 0 &&
                                containsMatcher.test(value.label || value.value || value);
                        });

                    response(startsWith.concat(contains));
                },
                select: function( event, ui ) { window.location.href = ui.item.id; }
            });
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T16:15:13.470

问题不在于您的 javascript，而在于您的 php 输出。在您编写标题和发送信息之前，您的 php 脚本中的某些内容正在尝试写入（可能是 php 错误）。您的 php 脚本的第 7 行和第 9 行是什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T16:22:31.897

由于您没有发布导致错误的 PHP 代码，因此这是我可以提供的最佳创可贴解决方案。

在你的functions2.php 中，放在`ob_start();`上面。以下是一些可以解释这一点的资源：

[http://brian.moonspot.net/php-ob-start-headers](http://brian.moonspot.net/php-ob-start-headers)

[http://php.net/ob_start](http://php.net/ob_start)

# sql - db2 用于比较字符串的内部工作是什么

> ID：12355365
> 
> 赞同：1
> 
> 时间：2012-09-10T16:02:28.277
> 
> 标签：sql, db2, string-comparison

db2 用于比较字符串的内部工作是什么？

我有一个问题

> select * from mytab where name='rohit'

如何将每行中的名称与值“rohit”进行比较

我还想为每个名称（varchar）列有一个哈希码，上面有索引。所以每当我寻找一个名字时，我应该寻找哈希码。

这种方法是否可行并且可以获得性能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T16:18:15.783

## 第一个问题

> DB2 用于比较字符串的内部工作是什么？

简单的答案是区分大小写的匹配。

IBM 提供了[更复杂](http://publib.boulder.ibm.com/infocenter/dzichelp/v2r2/index.jsp?topic=/com.ibm.db2z10.doc.sqlref/src/tpc/db2z_charandgraphiccomparisions.htm)的答案。IBM 以复杂的答案而闻名。

> 通过比较每个字符串的相应字节来比较两个字符串。如果字符串的长度不同，则使用较短字符串的临时副本进行比较，该较短字符串已在右侧填充空白，使其与另一个字符串具有相同的长度。
> 
> 如果两个字符串都为空或所有对应的字节都相等，则它们相等。空字符串等于空字符串。如果两个字符串不相等，则它们的关系（即哪个值较大）通过比较字符串左端的第一对不相等字节来确定。这种比较是根据与数据的编码方案相关的整理顺序进行的。对于 ASCII 数据，字符 A 到 Z（大写和小写）的值大于字符 0 到 9。对于 EBCDIC 数据，字符 A 到 Z（大写和小写）的值小于字符 0 到 9。
> 
> 具有不同长度的变长字符串如果仅在尾随空格的数量上有所不同，则它们是相等的。在从这些值的集合中选择一个值的操作中，选择的值是任意的。可能涉及此类任意选择的操作是 DISTINCT、MAX、MIN 和对分组列的引用。有关在引用分组列时涉及的任意选择的更多信息，请参见 GROUP BY 的描述。

## 第二个问题

> 我还想为每个名称（varchar）列有一个哈希码，上面有索引。所以每当我寻找一个名字时，我应该寻找哈希码。
> 
> 这种方法是否可行并且可以获得性能？

是的，您可以散列名称。不，您不会看到任何性能改进。

原因是 DB2 花费在处理表或表索引上的大部分时间都用于磁盘输入。名称索引的字符串匹配只占处理时间的一小部分。

您可能会考虑实施的一件事是名称的[soundex](http://en.wikipedia.org/wiki/Soundex)匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T16:17:30.760

比较是由 SQL 语言本身定义的。当名称完全匹配时，行匹配条件。有几个变化：

1.  匹配是否区分大小写？
2.  字符串末尾的空格重要吗？

对于 varchar()，空格无关紧要，默认行为应该不区分大小写（尽管我不知道这在 DB2 上是否成立）。

使用精确匹配的索引可以获得更好的性能。

# php - 如何在 php WSDL 中指定端口名称

> ID：12355366
> 
> 赞同：6
> 
> 时间：2012-09-10T16:02:33.563
> 
> 标签：php, soap, wsdl, travelport-api

如何在 SOAP PHP 中选择端口？我正在开发一个以 TravelPort 作为 GDS 的旅行预订网站。我刚刚开始查看他们的 WSDL，我正在尝试使用它们通过 PHP 调用他们的服务器。我做不到。我知道服务器可以工作，因为如果我制作一个请求并通过 cURL 发送它，我会得到我期望的响应，但是通过使用和改编他们自己的[示例代码](http://demo.travelportuniversalapi.com/)（接受保密协议，然后单击“示例代码”看），我哪儿也不去。

通过查看 SOAP PHP 模块生成的请求，我认为问题在于它使用了错误的函数。我不认为我可以透露整个 WSDL，但这里有一段摘录：

```
<!-- Service -->

<service name="AirService">
    <port name="AirRepriceSearchPort"
          binding="tns:AirRepriceSearchBinding">
        <soap:address
                location="http://localhost:8080/kestrel/AirService" />
    </port>

    <port name="AirScheduleSearchPort"
          binding="tns:AirScheduleSearchBinding">
        <soap:address
                location="http://localhost:8080/kestrel/AirService" />
    </port>

    <port name="AirLowFareSearchPort"
          binding="tns:AirLowFareSearchBinding">
        <soap:address
                location="http://localhost:8080/kestrel/AirService" />
    </port> 
```

显然，该脚本始终基于 AirReprice 模块而不是 LowFareSearch 模块生成请求。事实上，如果我编辑 WSDL 并将“AirLowFareSearchPort”作为第一个元素，请求就会起作用。

我尝试了以下方法：

*   使用 指定要执行的操作`$client->AirLowFareSearchPort($data)`，但它不是有效的函数；

*   我通过使用获得了所有功能`$client->__getfunctions()`：

：

```
 [0]=>
 string(48) "AirRepriceRsp service(AirRepriceReq $parameters)"
 [1]=>
 string(56) "ScheduleSearchRsp service(ScheduleSearchReq $parameters)"
 [2]=>
 string(54) "LowFareSearchRsp service(LowFareSearchReq $parameters)"
 [3]=>
 string(66) "LowFareSearchAsynchRsp service(LowFareSearchAsynchReq $parameters)" 
```

看起来唯一的“功能”就是“服务”。但我不知道我会把这些东西放在括号里的什么地方。

我没有其他想法。希望您能提供帮助！

**更新：**

我发现[这篇文章](http://phpwebservices.blogspot.it/2008/06/choose-among-multiple-services-multiple.html)暴露了这个问题。但是，它指的是他们自己的称为 PHP Web Services 的模块。我需要对 SOAP 做同样的事情。我真的需要你的帮助..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-05-30T00:20:05.660

加载 WSDL 后，您应该能够使用[__setLocation手动设置端点。](http://php.net/manual/en/soapclient.setlocation.php)

例子：

```
$client = new SoapClient('http://localhost/supplied_path?wsdl');
$client->__setLocation('http://localhost:8080/kestrel/AirService');

print_r($client->__getfunctions()); 
```

# c# - 如何在状态栏中对齐进度条？

> ID：12355367
> 
> 赞同：4
> 
> 时间：2012-09-10T16:02:37.490
> 
> 标签：c#, winforms, statusbar, alignment

如何将突出显示的进度条与状态栏的右侧对齐？

![在此处输入图像描述](../Images/d48e8ccd401a080f1674e3bcca7faa19.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-10T16:07:01.173

设置`Spring`左侧的状态栏项目之一的-Property `ProgressBar`，`true`例如`ToolStripStatusLabel`保存文本`Loading...`。

# cocoa - 可可：CATransaction 和 NSAnimationContext 有什么不同

> ID：12355371
> 
> 赞同：3
> 
> 时间：2012-09-10T16:02:44.533
> 
> 标签：cocoa, core-animation

我可以使用代码以动画方式移动图层托管视图：

```
[CATransaction setAnimationDuration:2];
self.imageLayer.position = CGPointMake(0, 0); 
```

我也可以通过以下代码来做到这一点：

```
 [NSAnimationContext runAnimationGroup:^(NSAnimationContext *context) {
    [context setDuration:2];
    self.imageLayer.position = CGPointMake(0, 0);
} completionHandler:nil]; 
```

我想知道 CATransaction 和 NSAnimationContext 之间有什么区别，我应该使用哪一个来为视图设置动画？为什么我可以在 NSAnimationContext 和 CATransaction 中设置持续时间？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T20:22:57.990

CATransaction 适用于核心动画层动画。CATransaction 是 iOS 和 Mac OS 之间的跨平台。

NSAnimationContext 与 NSAnimationContext 一起工作。它是特定于 Mac OS 的。

（NS 动画仅适用于 Mac，而 UIView 动画仅适用于 iOS。）

这些天，我在 iOS 上工作的时间比在 Mac OS 上的多，而且我一直在寻找跨平台的方法来做事。

CAAnimation、CALayer、CAAnimationGroup 等在 Mac 和 iOS 之间几乎相同。有一些差异（例如，iOS 中不支持 quicktime 层，iOS 中对 Core Image 的支持更有限等），但 CA 的东西更像是相似的而不是不同的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-09-28T07:47:50.987

大多数情况`NSAnimationContext`下是作为`CATransaction`. 您可以使用像[Hopper](https://www.hopperapp.com)这样的反汇编工具对 AppKit 的代码进行逆向工程，然后自己查看。以下是`NSAnimationContext`伪Objective-C中的一些重构方法：

```
void +[NSAnimationContext beginGrouping](void * self, void * _cmd) {
  if (([CATransaction currentState] & 0x3) != 0x0) {
    [CATransaction begin];
  } else {
    rdi = @class(CATransaction);
    if (pthread_main_np() != 0x0) {
      [rdi activate];
      [CATransaction begin];
    }
    else {
      [rdi begin];
      [CATransaction activateBackground:0x1];
    }
  }
  [CATransaction setValue:@(YES) forKey:@"NSAnimationContextBeganGroup"];
  return;
}

void +[NSAnimationContext endGrouping](void * self, void * _cmd) {
  [CATransaction commit];
  return;
}

void -[NSAnimationContext setTimingFunction:](void * self, void * _cmd, void * arg2) {
  [CATransaction setAnimationTimingFunction:arg2];
  return;
} 
```

除此之外，它`NSAnimationContext`还有一些附加功能，例如如果按下 shift 键 ( `NSAnimationSlowMotionOnShift`) 则更改动画持续时间和测量性能。

# oop - 可从同一类的其他实例访问的私有成员

> ID：12355372
> 
> 赞同：19
> 
> 时间：2012-09-10T16:02:46.567
> 
> 标签：oop

我刚刚注意到一些我以前从未意识到的事情。事实证明，这个类在 C# 中是有效的：

```
class Foo
{
    private string contents;

    public Foo(string str) {
        contents = str;
    }

    public void set(Foo other)
    {
        contents = other.contents;
    }
} 
```

因此同一类的不同实例可以访问彼此的私有成员。

到目前为止，我认为对象的私有成员只能由该对象访问，而不能由同一类的其他实例访问。发现这一点有点令人惊讶。

在所有常见的面向对象语言中都是这种情况吗？这对我来说并不直观。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-10T16:09:02.543

这与 C++ 和 Java 中的相同：访问控制基于每个类而不是基于每个对象。

在 C++ 中，Java 和 C# 访问控制被实现为静态的编译时特性。这样它就不会产生任何运行时开销。只有按类控制才能以这种方式实现。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-09-10T17:10:10.340

您将如何为一个不通过公共方法公开其所有内部状态的类创建一个复制构造函数？

考虑这样的事情：

```
class Car
{
public:
    void accelerate(double desiredVelocity);
    double velocity() const;
private:
    Engine myEngine;
}; 
```

的`Car`公共接口不公开它`Engine`，但你需要它来制作副本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-03-22T16:26:24.560

对于完全相同的场景，Scala 中存在“特定于对象的私有”与 Java 也不支持的“特定于类的私有”。

```
class Foo {

  private[this] def contents // [this] marks the property as private to the owner

  def doFoo(other: Foo) {
    if (other.contents) { // this line won't compile
      // ...
    }
  }

} 
```

令人惊讶的是，其他现代语言[private[this] 与 private](https://stackoverflow.com/questions/9698677/privatethis-vs-private)不支持此类功能，我理解这可能不是安全风险，因为它仍然与 Class 相关联，您仍然可以访问所有私有变量反射任何一种方式例如[反射是否打破了私有方法的想法，因为私有方法可以在类之外访问？](https://stackoverflow.com/questions/3300680/does-reflection-breaks-the-idea-of-private-methods-because-private-methods-can).

如果从 Python 语言的角度来看，它们甚至没有 C# 那样广泛的范围特性，最终都是关于代码组织的，而从语言设计的角度来看，这是新手必须经历的学习曲线

# jquery-ui - jquery UI datepicker在范围选择场景中闪烁“其他”日期

> ID：12355375
> 
> 赞同：1
> 
> 时间：2012-09-10T16:02:56.370
> 
> 标签：jquery-ui, datepicker

我似乎在日期选择器上有一个小问题。基本上，我在 jquery UI 示例站点中实现了一个示例，例如日期范围。一切正常，但我有一个奇怪的行为：当我选择任何日期时，日历会闪烁片刻，显示另一个日历选择的日期，然后消失。我知道这没什么大不了的，但这显然对我们的客户来说很烦人。

我想在这里放一个代码示例，但后来注意到在[datepicker 示例页面](http://jqueryui.com/demos/datepicker/#date-range)中可以看到相同的行为。

有人知道这是否是 jquery 的已知问题吗？它似乎也发生在跨浏览器...

# coldfusion - 在 2 个不同的站点上使用 gmail smtp 和 Coldfusion

> ID：12355376
> 
> 赞同：2
> 
> 时间：2012-09-10T16:03:01.927
> 
> 标签：coldfusion, smtp, gmail

我在使用 Coldfusion 和 google SMTP 时遇到问题。问题是这样的，我已经设置好了所有东西，所以当发送电子邮件时，它将使用谷歌的 SMTP 中继。但是，现在可以了，我拥有该站点的服务器也有另一个使用 google 的 SMTP 中继的站点。因此，由于某种原因，当客户从一个站点 1 购买商品（并获得订单确认）而另一位客户从站点 2 订购商品（并获得订单确认）时，站点 2 上的 FROM 电子邮件将切换到站点 1。

例子：

客户从站点 1 购买 - FROM="cs@site1.com"

另一个客户从站点 2 购买 - FROM="cs@site1.com"（这应该是 cs@site2.com）

我知道这听起来令人困惑，这让我很困惑。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T19:07:34.593

您是否使用不同的帐户连接到 GMail？

如果我没记错的话，GMail 会更改任何电子邮件上的“发件人”以匹配您登录帐户的电子邮件地址。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-06T17:20:50.783

我遇到了一个非常相似的问题，[这个问题](https://stackoverflow.com/questions/13481713/coldfusion-cfmail-and-sendgrid)帮助我找到了解决方案。

我们托管多个通过 AuthSMTP 发送邮件的站点。我们的电子邮件问题是在从 Coldfusion 7 升级到 Coldfusion 10 后开始的。看起来电子邮件发送的“发件人”地址不正确，但实际发生的事情要险恶得多。

Coldfusion 9 和 10 在 Coldfusion 管理器中有一个名为“保持与邮件服务器的连接”的设置。

![在此处输入图像描述](../Images/8d64aeed9480dc06cb63061e58882750.png)

我们的问题是：

1.  客户端“A”发送了一封电子邮件，与邮件服务器的连接保持打开状态

2.  客户端“B”使用开放连接发送了一封电子邮件。Coldfusion 忽略了新的 SMTP 凭据。正在使用客户端“A”的 SMTP 凭据。

3.  AuthSMTP 拒绝了客户“B”的电子邮件，因为它试图使用客户“A”的帐户发送邮件，但客户“B”的电子邮件使用的 FROM 地址未在该帐户中注册。

我希望这不会太令人困惑。我关闭了控制面板中的设置，希望能解决问题。如果没有，我会更新我的答案。

# c# - 从控制台 C# 上的位置读取

> ID：12355378
> 
> 赞同：15
> 
> 时间：2012-09-10T16:03:18.047
> 
> 标签：c#, console

我需要从控制台中的特定位置读取文本，比如 5,5。

如果我需要写信到这个位置，那就是：

```
Console.SetCursorPosition(5, 5);
Console.Write("My text"); 
```

有什么方法可以让我以类似的方式阅读吗？

澄清一下：我不想停下来接受用户的输入，甚至有可能输入不是来自用户，而是以前打印出来的。我真的想要某种： Console.GetCharAtLocation(5,5) 或类似的东西。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-11T09:07:27.143

这是一个 C# 代码实用程序，可以读取控制台缓冲区（不是窗口，缓冲区）中的当前内容：

示例用法：

```
class Program
{
    static void Main(string[] args)
    {
        // read 10 lines from the top of the console buffer
        foreach (string line in ConsoleReader.ReadFromBuffer(0, 0, (short)Console.BufferWidth, 10))
        {
            Console.Write(line);
        }
    }
} 
```

效用：

```
public class ConsoleReader
{
    public static IEnumerable<string> ReadFromBuffer(short x, short y, short width, short height)
    {
        IntPtr buffer = Marshal.AllocHGlobal(width * height * Marshal.SizeOf(typeof(CHAR_INFO)));
        if (buffer == null)
            throw new OutOfMemoryException();

        try
        {
            COORD coord = new COORD();
            SMALL_RECT rc = new SMALL_RECT();
            rc.Left = x;
            rc.Top = y;
            rc.Right = (short)(x + width - 1);
            rc.Bottom = (short)(y + height - 1);

            COORD size = new COORD();
            size.X = width;
            size.Y = height;

            const int STD_OUTPUT_HANDLE = -11;
            if (!ReadConsoleOutput(GetStdHandle(STD_OUTPUT_HANDLE), buffer, size, coord, ref rc))
            {
                // 'Not enough storage is available to process this command' may be raised for buffer size > 64K (see ReadConsoleOutput doc.)
                throw new Win32Exception(Marshal.GetLastWin32Error());
            }

            IntPtr ptr = buffer;
            for (int h = 0; h < height; h++)
            {
                StringBuilder sb = new StringBuilder();
                for (int w = 0; w < width; w++)
                {
                    CHAR_INFO ci = (CHAR_INFO)Marshal.PtrToStructure(ptr, typeof(CHAR_INFO));
                    char[] chars = Console.OutputEncoding.GetChars(ci.charData);
                    sb.Append(chars[0]);
                    ptr += Marshal.SizeOf(typeof(CHAR_INFO));
                }
                yield return sb.ToString();
            }
        }
        finally
        {
            Marshal.FreeHGlobal(buffer);
        }
    }

    [StructLayout(LayoutKind.Sequential)]
    private struct CHAR_INFO
    {
        [MarshalAs(UnmanagedType.ByValArray, SizeConst = 2)]
        public byte[] charData;
        public short attributes;
    }

    [StructLayout(LayoutKind.Sequential)]
    private struct COORD
    {
        public short X;
        public short Y;
    }

    [StructLayout(LayoutKind.Sequential)]
    private struct SMALL_RECT
    {
        public short Left;
        public short Top;
        public short Right;
        public short Bottom;
    }

    [StructLayout(LayoutKind.Sequential)]
    private struct CONSOLE_SCREEN_BUFFER_INFO
    {
        public COORD dwSize;
        public COORD dwCursorPosition;
        public short wAttributes;
        public SMALL_RECT srWindow;
        public COORD dwMaximumWindowSize;
    }

    [DllImport("kernel32.dll", SetLastError = true)]
    private static extern bool ReadConsoleOutput(IntPtr hConsoleOutput, IntPtr lpBuffer, COORD dwBufferSize, COORD dwBufferCoord, ref SMALL_RECT lpReadRegion);

    [DllImport("kernel32.dll", SetLastError = true)]
    private static extern IntPtr GetStdHandle(int nStdHandle);
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2018-06-26T11:28:16.610

**适用于Windows 10**的简化演示，用于从`(X, Y)`屏幕上的指定位置读取单个字符。使用**.NET 4.7.2**测试。

首先，这是用演示网格填充控制台的一行代码。请注意，它应该呈现在屏幕的左上角，以便演示工作。

```
static void Populate_Console()
{
    Console.Clear();
    Console.Write(@"
 ┌───────┐
1│C D E F│
2│G H I J│
3│K L M N│
4│O P Q R│
 └───────┘
  2 4 6 8          ".Trim());
} 
```

它应该如下所示：

[![在此处输入图像描述](../Images/94d7cd52d00b09bd36918a82808fca05.png)](https://i.stack.imgur.com/LpnhP.png)

现在让我们读回一些字符。首先，您需要**stdout**的本机控制台句柄。**这是从Win32**获取它的 P/Invoke 方法：

```
[DllImport("kernel32", SetLastError = true)]
static extern IntPtr GetStdHandle(int num); 
```

现在是最酷的部分；到目前为止，这似乎是此页面上唯一使用[`ReadConsoleOutputCharacter`](https://docs.microsoft.com/en-us/windows/console/readconsoleoutputcharacter)Win32 功能的答案。虽然它不能让您获得字符颜色属性，但这种方法确实省去了处理复制矩形和必须使用[`CreateConsoleScreenBuffer`](https://docs.microsoft.com/en-us/windows/console/createconsolescreenbuffer)分配屏幕缓冲区和在它们之间复制的所有麻烦。

有单独的**Ansi**和**Unicode**版本，您需要根据控制台窗口中活动的代码页调用正确的版本。我在这里展示了两个 P/Invoke 签名，但为简单起见，在示例中我将继续使用**Ansi**版本：

```
 [DllImport("kernel32", SetLastError = true, CharSet = CharSet.Ansi)]
    [return: MarshalAs(UnmanagedType.Bool)] //   ̲┌──────────────────^
    static extern bool ReadConsoleOutputCharacterA(
        IntPtr hStdout,   // result of 'GetStdHandle(-11)'
        out byte ch,      // A̲N̲S̲I̲ character result
        uint c_in,        // (set to '1')
        uint coord_XY,    // screen location to read, X:loword, Y:hiword
        out uint c_out);  // (unwanted, discard)

    [DllImport("kernel32", SetLastError = true, CharSet = CharSet.Unicode)]
    [return: MarshalAs(UnmanagedType.Bool)] //   ̲┌───────────────────^
    static extern bool ReadConsoleOutputCharacterW(
        IntPtr hStdout,   // result of 'GetStdHandle(-11)'
        out Char ch,      // U̲n̲i̲c̲o̲d̲e̲ character result
        uint c_in,        // (set to '1')
        uint coord_XY,    // screen location to read, X:loword, Y:hiword
        out uint c_out);  // (unwanted, discard) 
```

您可能会注意到我已经将这些封送处理减少到了示例代码所需的最低限度，该示例代码旨在一次仅获取一个字符。因此，由于托管指针声明 '<code>out byte ch' 和 '<code>out Char ch' ，您可能会发现`c_in`must always be 。`1`

这就是你真正需要的；如果您限制自己阅读单个字符，则如上所述调用适当的 P/Invoke 函数通常是不言自明的。为了用一个简单的例子来说明这一点，我将完成一个可爱的演示程序，它`Console`沿着我们上面绘制的网格的对角线从 中读取四个字符。

```
static void Windows_Console_Readback()
{
    var stdout = GetStdHandle(-11);

    for (uint coord, y = 1; y <= 4; y++)
    {
        coord = (5 - y) * 2;        // loword  <-- X coord to read
        coord |= y << 16;           // hiword  <-- Y coord to read

        if (!ReadConsoleOutputCharacterA(
                stdout,
                out byte chAnsi,    // result: single ANSI char
                1,                  // # of chars to read
                coord,              // (X,Y) screen location to read (see above)
                out _))             // result: actual # of chars (unwanted)
            throw new Win32Exception();

        Console.Write(" " + (Char)chAnsi + " ");
    }
} 
```

你有它...

[![在此处输入图像描述](../Images/7af159d9f93731443c4eb4ab7e175713.png)](https://i.stack.imgur.com/qHZlY.png)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-09-10T16:09:35.490

该功能不存在。从理论上讲，您可以覆盖控制台上的输入和输出流，以保留您自己可以读取的控制台缓冲区副本，但这并不重要（并且可能无法支持所有边缘情况，例如作为连接到您的控制台并读取/写入它的外部程序）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-12-16T18:41:29.303

算了，太麻烦了，你可以从缓冲区中读取并获取所有当前的控制台输出，但这太过分了。

我的建议是创建一个 ConsoleWriter 委托，你可以选择如何，可以是一个类或只是一个静态方法，这个 writer 会将最后一行保留在一个属性中，所以每次你使用 Console.WriteLine 时，你只需调用你的委托，使用您的实现，最后它调用 Console.WriteLine。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-10T16:45:16.890

关于什么：

```
class Program {
    static void Main( string[ ] args ) {
        CustomizedConsole.WriteLine( "Lorem Ipsum" ); //Lorem Ipsum
        Console.WriteLine( CustomizedConsole.ReadContent( 6, 5 ) ); //Ipsum
        Console.WriteLine( CustomizedConsole.GetCharAtLocation( 0, 0 ) ); //L
    }
}

static class CustomizedConsole {
    private static List<char> buffer = new List<char>();
    private static int lineCharCount = 0;

    public static void Write(string s){
        lineCharCount += s.Length;
        buffer.AddRange( s );
        Console.Write( s );
    }

    public static void WriteLine(string s ) {
        for ( int i = 0; i < Console.BufferWidth - lineCharCount - s.Length; i++ )
            s += " ";

        buffer.AddRange( s );
        Console.WriteLine( s );
        lineCharCount = 0;
    }

    public static string ReadContent( int index, int count ) {
        return new String(buffer.Skip( index ).Take( count ).ToArray());
    }

    public static char GetCharAtLocation( int x, int y ) {
        return buffer[ Console.BufferHeight * x + y ];
    }
} 
```

**编辑 ：**

正如其他人所说，这只是一个微不足道的案例，还有很多其他事情需要改进。但我写这个只是作为一个起点。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-10T16:46:28.910

正如@Servy 所说，没有任何内置功能（我知道或可以找到）可以满足您的需求。但是，有一种解决方法（这有点像 hack，但它有效）。

您可以在内存或磁盘上创建自己的缓冲区。每当您输出到控制台时，也输出到您的缓冲区。然后，您可以使用您的缓冲区以您无法使用控制台的方式进行读取。

有两种缓冲方式：在磁盘上或在内存中。您可以使用`Console.BufferWidth`和`Console.BufferHeight`属性来找出您的缓冲区大小。我发现使用字符串数组在内存中执行此操作更简单（每个字符串都是一行输出，`BufferHeight`如果我没记错的话，数组中有许多字符串等于 ）。一位同事最终在磁盘上做了同样的事情。

您需要创建一个方法来替换`Console.Write`and `Console.WriteLine`，以便您可以一次写入两个缓冲区。就像是：

```
public void MyWrite( string output ) {
    Console.Write( output );
    Array.Write( output );  // obvious pseudo-code
} 
```

我发现在数组周围包装一个类并实现支持它的方法很有帮助......然后您可以实现您的`GetCharAtLocation( int i, int j )`方法以及您需要的任何其他功能。

# appharbor - Appharbor 会在部署新版本时擦除存储的头像吗

> ID：12355379
> 
> 赞同：0
> 
> 时间：2012-09-10T16:03:20.887
> 
> 标签：appharbor

我是 appharbor 的新手，想在稍后出现之前确定一下。部署时，它会清除目录然后部署吗？我将用户头像存储在 images/avatars 文件夹中的磁盘上。我想确保这不会被擦除，如果是，是否有我可以使用的特殊目录或告诉 appharbor 不要擦除该目录的设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T22:58:05.093

您不能将 AppHarbor 工作程序实例文件系统用于永久存储。他们没有坚持。我们建议您改用 AWS S3。[FAQ](http://support.appharbor.com/kb/getting-started/frequently-asked-questions)中有更多信息。

# android - RemoteView 和错误的 layout_weight

> ID：12355382
> 
> 赞同：2
> 
> 时间：2012-09-10T16:03:29.553
> 
> 标签：android, android-layout, android-linearlayout, android-appwidget, remoteview

我的 appWidget 的 layout_weight 和 remoteView 有问题。

我所有的切换都是这样的 ![我的切换](../Images/0ecd417b88b1f9e608307598fd881186.png)

有了这个 xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/btn"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:layout_weight="1"
android:background="@drawable/appwidget_button_center"
android:gravity="bottom"
android:orientation="vertical"
android:visibility="visible" >

    <ImageView
            android:id="@+id/toggle_img"
            android:layout_width="fill_parent"
            android:layout_height="0dip"
            android:layout_weight="2"
            android:scaleType="center" />

         <TextView
            android:id="@+id/toggle_txt"
            style="@style/TextSmallButton" 
            android:layout_height="0dip"
            android:layout_weight="1"
            />
        <ImageView
            android:id="@+id/toggle_ind"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:scaleType="fitXY"
            android:src="@drawable/b7_on" />
    </LinearLayout> 
```

现在我希望我的切换之一采用默认大小的两倍大小，所以我将 layout_weight = 2 放在我的 xml 上，仅用于特定切换。现在我有了这个： ![现在](../Images/a70cf9862bed65e0592ed06830178393.png)

如果我在我的活动中这样做，那么我就有： ![我想要的是](../Images/acf08fb05a9a9c3d8d2b45dc09105949.png)

那么请问我该如何解决这个问题...

# java - db4o Defragment 删除数据库中的所有对象

> ID：12355384
> 
> 赞同：3
> 
> 时间：2012-09-10T16:03:32.147
> 
> 标签：java, db4o, defragmentation

我正在使用 db4o 8.0。db4o 数据库文件大小为 21MB。数据库中有以下对象。

```
User : There is 1 user in db.
PostedMessage : There are 10000 postedMessages in db. 
```

我删除了所有 10000 条 PostedMessage。然后我尝试对 db4o 数据库进行碎片整理。以下代码用于碎片整理。

```
private void processDefrag() {
    try {
        String dbpath = "D:\\db4oDatabase";

        IdMapping mapping = new InMemoryIdMapping();
        //new DatabaseIdMapping(dbpath); //use this if heap overflows

        DefragmentConfig config = new DefragmentConfig(dbpath, dbpath+".bak", mapping);
        config.storedClassFilter(new AvailableClassFilter());
        config.forceBackupDelete(false);
        config.objectCommitFrequency(1000);
        Defragment.defrag(config);
        System.out.println("Defrag completed");

    } catch (IOException ex) {
        ex.printStackTrace();
    }
} 
```

我的期望是 db4oDatabase 文件大小将回到 21 Kb。并且 db4oDatabase 仍将包含 1 个用户对象。然而，运行上述代码后，db4odatabase 完全为空。为什么会这样？

如何避免丢失未删除的其他对象（在本例中为 1 个用户对象）？在 db4o 数据库上进行碎片整理的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T19:02:50.837

如果它因为找不到该类而不接受该类，则可以尝试编写[`StoredClassFilter`](http://community.versant.com/documentation/reference/db4o-8.1/java/api/com/db4o/defragment/StoredClassFilter.html)自己的只接受所有`StoredClass`对象的类。

```
public class AcceptAllClassFilter implements StoredClassFilter {

    @Override
    public boolean accept(StoredClass storedClass) {
        return true;
    }
} 
```

然后：

```
config.storedClassFilter(new AcceptAllClassFilter()); 
```

这将起作用，除非碎片整理过程只是`StoredClass`自动删除所有内容。如果是这种情况，我们可能需要弄清楚为什么`User`该类没有`StoredClass`容器的相应实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T19:59:57.020

```
public static void printStoredClasses(ObjectContainer db) {
    StoredClass[] storedClasses = db.ext().storedClasses();
    for (StoredClass sc : storedClasses) {
        try {        
            Class<?> c = Class.forName(sc.getName());
            DebugMessagePrinter.print(c.getName());
        } catch (ClassNotFoundException ex) {
            ex.printStackTrace();
        }
    }
} 
```

我使用上述方法打印存储的类。正如 Brian 猜测的那样，出于某种原因，它没有打印 User 和 PostedMessage 类名。这意味着它无法在 db4o 数据库文件中看到这些类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T20:06:45.943

最后，在 Brian 的 AcceptAllFilter 类的帮助下，我可以成功地对 db4oDatabase 文件进行碎片整理。大小从 21 MB 减少到 12 MB。工作方法如下图所示。

```
private void process() {
    try {
        String dbpath = "D:\\db4oDatabase";
        printStoredClassNames(dbpath);

        IdMapping mapping = new InMemoryIdMapping();
        //new DatabaseIdMapping(dbpath); //use this if heap overflows

        DefragmentConfig config = new DefragmentConfig(dbpath, dbpath+".bak2", mapping);
        config.storedClassFilter(new AcceptAllClassFilter());
        config.forceBackupDelete(false);
        config.objectCommitFrequency(1000);
        config.db4oConfig().add(new UuidSupport());
        Defragment.defrag(config);
        System.out.println("Defrag completed" + t.s());

    } catch (IOException ex) {
        ex.printStackTrace();
    }
} 
```

顺便说一句，碎片整理似乎并没有尽其所能。删除 10000 个 PostedMessage 对象后，数据库只包含 1 个用户对象。我希望数据库文件大小以 KB 为单位。

但是，正如他们所说，有总比没有好。有了这一些成功，我将继续寻找更好的碎片整理。如果我碰巧得到更好的结果，我会在这里发布。

# xcode - 未找到 xcode 有效的签名身份

> ID：12355387
> 
> 赞同：8
> 
> 时间：2012-09-10T16:03:38.250
> 
> 标签：xcode, distribution

我找不到这个问题的解决方案 2 周!!! 那是巨大的。

当我尝试验证我的应用程序时，我遇到了一个错误。Xcode 显示：未找到...的有效签名身份。我不知道该怎么做，我已经尝试了很多。请帮忙。

以下是打印屏幕：

[Image1 http://img838.imageshack.us/img838/9749/20120910195154.png](http://img838.imageshack.us/img838/9749/20120910195154.png) [全尺寸](http://img838.imageshack.us/img838/9749/20120910195154.png)

[Image2 http://img100.imageshack.us/img100/9126/20120910195440.png](http://img100.imageshack.us/img100/9126/20120910195440.png) [全尺寸](http://img100.imageshack.us/img100/9126/20120910195440.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T12:33:00.397

我认为删除所有证书并重新制作它们应该可以解决您的问题

查看此线程中的最佳答案，了解执行相同操作的步骤

[Xcode 在您的钥匙串中找不到此配置文件的有效私钥证书对](https://stackoverflow.com/questions/8424017/xcode-could-not-find-a-valid-private-key-certificate-pair-for-this-profile-in-yo)

# javascript - Javascript：触发函数后返回变量以供使用

> ID：12355390
> 
> 赞同：0
> 
> 时间：2012-09-10T16:03:40.087
> 
> 标签：javascript, jquery, function, variables

*如果这是一个非常基本的问题，请原谅我，但我希望这里有人可以为 JS 初学者非常清楚地解释它。*

我注意到我在两个地方使用了相同的代码，因此创建了一个函数来触发。但是我想使用我在这个函数中创建的一个变量，以便在它完成后使用。这是一个代码示例：

```
function calculate_animation(direction) {
    var theWidth = parseInt(visibleArea.outerWidth() - 70),
        currentMargin = parseInt(listingsSlider.css('margin-left')),
        hoursVisible = Math.floor(theWidth / itemWidth),
        hoursWidth = itemWidth * hoursVisible,
        newMargin = currentMargin - hoursWidth;
}

forwardBtn.click(function () {
    calculate_animation();

    // animate the slider
    listingsSlider.animate({
        'margin-left': newMargin + 'px'
    });
}); 
```

所以我创建了一个`newMargin`在`calculate_animation`函数中调用的新变量，并尝试在下面的 animate 函数中使用它。

我需要做什么才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T16:06:04.447

您需要`return`函数中的关键字...

```
function calculate_animation(direction) {
        var theWidth        =  parseInt(visibleArea.outerWidth() - 70),
            currentMargin   = parseInt(listingsSlider.css('margin-left')),
            hoursVisible    = Math.floor(theWidth / itemWidth),
            hoursWidth    = itemWidth * hoursVisible,
            newMargin       =  currentMargin - hoursWidth;

        return newMargin;
}

forwardBtn.click(function () {
        var newMargin = calculate_animation();

        // animate the slider
        listingsSlider.animate({'margin-left' : newMargin + 'px'});
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T16:06:12.450

这是一个范围问题。newMargin 变量是在函数内部定义的，因此变量的范围从函数的开头开始，它用`var`关键字定义，并在函数的末尾结束。

您可以使用`return newMargin`将计算的值返回给调用者。

见下文，

```
function calculate_animation(direction) {
        var theWidth        =  parseInt(visibleArea.outerWidth() - 70),
            currentMargin   = parseInt(listingsSlider.css('margin-left')),
            hoursVisible    = Math.floor(theWidth / itemWidth),
            hoursWidth    = itemWidth * hoursVisible,
            newMargin       =  currentMargin - hoursWidth;

        return newMargin;
}

forwardBtn.click(function () {
        // animate the slider
        listingsSlider.animate({'margin-left' : calculate_animation() + 'px'});
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-10T16:06:14.780

您需要将其返回给被调用的函数并在被调用的函数中使用该变量..

```
function calculate_animation(direction) {
    var theWidth = parseInt(visibleArea.outerWidth() - 70),
        currentMargin = parseInt(listingsSlider.css('margin-left')),
        hoursVisible = Math.floor(theWidth / itemWidth),
        hoursWidth = itemWidth * hoursVisible,
        newMargin = currentMargin - hoursWidth;
    return newMargin;
}

forwardBtn.click(function () {
    var newMargin = calculate_animation();

    // animate the slider
    listingsSlider.animate({
        'margin-left': newMargin + 'px'
    });
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-10T16:08:01.113

您可以简单地`return`说：（方向参数是什么？您没有在任何地方使用它）

```
function calculate_animation(direction) {
        var theWidth        =  parseInt(visibleArea.outerWidth() - 70),
            currentMargin   = parseInt(listingsSlider.css('margin-left')),
            hoursVisible    = Math.floor(theWidth / itemWidth),
            hoursWidth    = itemWidth * hoursVisible,
            newMargin       =  currentMargin - hoursWidth;

        return newMargin;
}

forwardBtn.click(function () {
        var newMargin = calculate_animation();

        // animate the slider
        listingsSlider.animate({'margin-left' : newMargin + 'px'});
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-10T16:05:24.353

您可以从该函数返回，而是全局声明变量并在需要时更改其值。

# sql - 需要帮助使用局部变量来压缩 sql server 查询。还需要会计闰年的提示

> ID：12355395
> 
> 赞同：2
> 
> 时间：2012-09-10T16:03:51.267
> 
> 标签：sql, sql-server, tsql, stored-procedures, local-variables

我最近换了工作，因此也从 oracle 切换到 sql server。我正在尝试编写一个将按需生成报告的存储过程。该报告将显示每月金额和这些金额的总和。我对此的求和部分主要有麻烦。完整的查询在这篇文章的最底部。正如您从我的超长查询中看到的那样，我基本上已经写了两次以获得 Total_Current_Plus_Archived 列中的总和。我正在考虑为此使用局部变量（@totalReportSum）。我想在每次计算总列时更新这个变量，但无论我使用什么语法都会出错。以下是我尝试过的几件事：

尝试1。

```
--March total   
                     (SELECT @totalReportSum  =@totalReportSum + Count(*) AS Expr1 
                      FROM   dbo.accident_information AS ai 
                             INNER JOIN dbo.municipality AS mx 
                                     ON mx.agency_ori = ai.agency_ori 
                      WHERE  ( mx.ram = m.ram ) 
                             AND ( ai.crash_date >= @year + '-03-01' ) 
                             AND ( ai.crash_date <= @year + '-03-31' )) 
                     AS March_Total_Reports, 
```

尝试2。

```
--March total   
                 @totalReportSum = (SELECT Count(*) AS Expr1 
                      FROM   dbo.accident_information AS ai 
                             INNER JOIN dbo.municipality AS mx 
                                     ON mx.agency_ori = ai.agency_ori 
                      WHERE  ( mx.ram = m.ram ) 
                             AND ( ai.crash_date >= @year + '-03-01' ) 
                             AND ( ai.crash_date <= @year + '-03-31' )) 
                     AS March_Total_Reports, 
```

如果可能的话，我还想就如何计算闰年提出建议。

非常感谢任何帮助或提示。谢谢。

```
CREATE PROCEDURE Sp_get_ram_report @year NCHAR(4) 
AS 
BEGIN--declare variable to hold total sum of reports 
  DECLARE @totalReportSum INT; 

  --initialize sum 
  SET @totalReportSum = 0; 
END 

SELECT TOP (100) PERCENT r.ramid 
                     AS Ram_ID, 
                     r.ram_fname 
                     AS RAM_First_Name, 
                     r.ram_lname 
                     AS RAM_Last_Name, 
                     Count(*) 
                     AS Number_of_Agencies, 
                     Isnull(Sum(m.yearly_avg_reports), 0) 
                     AS Yearly_Avg#_of_reports, 
                     Round(Isnull(Sum(m.yearly_avg_reports), 0) / 12, 2) 
                     AS Monthly_Reports_Expected, 
                     --January 
                     (SELECT Count(*) AS Expr1 
                      FROM   dbo.accident_information AS ai 
                             INNER JOIN dbo.municipality AS mx 
                                     ON mx.agency_ori = ai.agency_ori 
                      WHERE  ( mx.ram = m.ram ) 
                             AND ( ai.crash_date >= @year + '-01-01' ) 
                             AND ( ai.crash_date <= @year + '-01-31' ) 
                             AND ( ai.insert_datetime - ai.crash_date < 35 ) 
                     ) AS January, 
                     --January total   
                     (SELECT Count(*) AS Expr1 
                      FROM   dbo.accident_information AS ai 
                             INNER JOIN dbo.municipality AS mx 
                                     ON mx.agency_ori = ai.agency_ori 
                      WHERE  ( mx.ram = m.ram ) 
                             AND ( ai.crash_date >= @year + '-01-01' ) 
                             AND ( ai.crash_date <= @year + '-01-31' )) 
                     AS January_Total_Reports, 
                     --February 
                     (SELECT Count(*) AS Expr1 
                      FROM   dbo.accident_information AS ai 
                             INNER JOIN dbo.municipality AS mx 
                                     ON mx.agency_ori = ai.agency_ori 
                      WHERE  ( mx.ram = m.ram ) 
                             AND ( ai.crash_date >= @year + '-02-01' ) 
                             AND ( ai.crash_date <= @year + '-02-28' ) 
                             AND ( ai.insert_datetime - ai.crash_date < 35 ) 
                     ) AS February, 
                     --February total   
                     (SELECT Count(*) AS Expr1 
                      FROM   dbo.accident_information AS ai 
                             INNER JOIN dbo.municipality AS mx 
                                     ON mx.agency_ori = ai.agency_ori 
                      WHERE  ( mx.ram = m.ram ) 
                             AND ( ai.crash_date >= @year + '-02-01' ) 
                             AND ( ai.crash_date <= @year + '-02-28' )) 
                     AS February_Total_Reports, 
                     --March 
                     (SELECT Count(*) AS Expr1 
                      FROM   dbo.accident_information AS ai 
                             INNER JOIN dbo.municipality AS mx 
                                     ON mx.agency_ori = ai.agency_ori 
                      WHERE  ( mx.ram = m.ram ) 
                             AND ( ai.crash_date >= @year + '-03-01' ) 
                             AND ( ai.crash_date <= @year + '-03-31' ) 
                             AND ( ai.insert_datetime - ai.crash_date < 35 ) 
                     ) AS March, 
                     --March total   
                 (SELECT Count(*) AS Expr1 
                      FROM   dbo.accident_information AS ai 
                             INNER JOIN dbo.municipality AS mx 
                                     ON mx.agency_ori = ai.agency_ori 
                      WHERE  ( mx.ram = m.ram ) 
                             AND ( ai.crash_date >= @year + '-03-01' ) 
                             AND ( ai.crash_date <= @year + '-03-31' )) 
                     AS March_Total_Reports, 
                     --April 
                     (SELECT Count(*) AS Expr1 
                      FROM   dbo.accident_information AS ai 
                             INNER JOIN dbo.municipality AS mx 
                                     ON mx.agency_ori = ai.agency_ori 
                      WHERE  ( mx.ram = m.ram ) 
                             AND ( ai.crash_date >= @year + '-04-01' ) 
                             AND ( ai.crash_date <= @year + '-04-30' ) 
                             AND ( ai.insert_datetime - ai.crash_date < 35 ) 
                     ) AS April, 
                     --April total   
                     (SELECT Count(*) AS Expr1 
                      FROM   dbo.accident_information AS ai 
                             INNER JOIN dbo.municipality AS mx 
                                     ON mx.agency_ori = ai.agency_ori 
                      WHERE  ( mx.ram = m.ram ) 
                             AND ( ai.crash_date >= @year + '-04-01' ) 
                             AND ( ai.crash_date <= @year + '-04-30' )) 
                     AS April_Total_Reports, 
                     --May 
                     (SELECT Count(*) AS Expr1 
                      FROM   dbo.accident_information AS ai 
                             INNER JOIN dbo.municipality AS mx 
                                     ON mx.agency_ori = ai.agency_ori 
                      WHERE  ( mx.ram = m.ram ) 
                             AND ( ai.crash_date >= @year + '-05-01' ) 
                             AND ( ai.crash_date <= @year + '-05-31' ) 
                             AND ( ai.insert_datetime - ai.crash_date < 35 ) 
                     ) AS May, 
                     --May total   
                     (SELECT Count(*) AS Expr1 
                      FROM   dbo.accident_information AS ai 
                             INNER JOIN dbo.municipality AS mx 
                                     ON mx.agency_ori = ai.agency_ori 
                      WHERE  ( mx.ram = m.ram ) 
                             AND ( ai.crash_date >= @year + '-05-01' ) 
                             AND ( ai.crash_date <= @year + '-05-31' )) 
                     AS May_Total_Reports, 
                     --June 
                     (SELECT Count(*) AS Expr1 
                      FROM   dbo.accident_information AS ai 
                             INNER JOIN dbo.municipality AS mx 
                                     ON mx.agency_ori = ai.agency_ori 
                      WHERE  ( mx.ram = m.ram ) 
                             AND ( ai.crash_date >= @year + '-06-01' ) 
                             AND ( ai.crash_date <= @year + '-06-30' ) 
                             AND ( ai.insert_datetime - ai.crash_date < 35 ) 
                     ) AS June, 
                     --June total   
                     (SELECT Count(*) AS Expr1 
                      FROM   dbo.accident_information AS ai 
                             INNER JOIN dbo.municipality AS mx 
                                     ON mx.agency_ori = ai.agency_ori 
                      WHERE  ( mx.ram = m.ram ) 
                             AND ( ai.crash_date >= @year + '-06-01' ) 
                             AND ( ai.crash_date <= @year + '-06-30' )) 
                     AS June_Total_Reports, 
                     --July 
                     (SELECT Count(*) AS Expr1 
                      FROM   dbo.accident_information AS ai 
                             INNER JOIN dbo.municipality AS mx 
                                     ON mx.agency_ori = ai.agency_ori 
                      WHERE  ( mx.ram = m.ram ) 
                             AND ( ai.crash_date >= @year + '-07-01' ) 
                             AND ( ai.crash_date <= @year + '-07-31' ) 
                             AND ( ai.insert_datetime - ai.crash_date < 35 ) 
                     ) AS July, 
                     --July total   
                     (SELECT Count(*) AS Expr1 
                      FROM   dbo.accident_information AS ai 
                             INNER JOIN dbo.municipality AS mx 
                                     ON mx.agency_ori = ai.agency_ori 
                      WHERE  ( mx.ram = m.ram ) 
                             AND ( ai.crash_date >= @year + '-07-01' ) 
                             AND ( ai.crash_date <= @year + '-07-31' )) 
                     AS July_Total_Reports, 
                     --august 
                     (SELECT Count(*) AS Expr1 
                      FROM   dbo.accident_information AS ai 
                             INNER JOIN dbo.municipality AS mx 
                                     ON mx.agency_ori = ai.agency_ori 
                      WHERE  ( mx.ram = m.ram ) 
                             AND ( ai.crash_date >= @year + '-08-01' ) 
                             AND ( ai.crash_date <= @year + '-08-31' ) 
                             AND ( ai.insert_datetime - ai.crash_date < 35 ) 
                     ) AS August, 
                     --august total   
                     (SELECT Count(*) AS Expr1 
                      FROM   dbo.accident_information AS ai 
                             INNER JOIN dbo.municipality AS mx 
                                     ON mx.agency_ori = ai.agency_ori 
                      WHERE  ( mx.ram = m.ram ) 
                             AND ( ai.crash_date >= @year + '-08-01' ) 
                             AND ( ai.crash_date <= @year + '-08-31' )), 
                     --september 
                     (SELECT Count(*) AS Expr1 
                      FROM   dbo.accident_information AS ai 
                             INNER JOIN dbo.municipality AS mx 
                                     ON mx.agency_ori = ai.agency_ori 
                      WHERE  ( mx.ram = m.ram ) 
                             AND ( ai.crash_date >= @year + '-09-01' ) 
                             AND ( ai.crash_date <= @year + '-09-30' ) 
                             AND ( ai.insert_datetime - ai.crash_date < 35 ) 
                     ) AS September, 
                     --September Total 
                     (SELECT Count(*) AS Expr1 
                      FROM   dbo.accident_information AS ai 
                             INNER JOIN dbo.municipality AS mx 
                                     ON mx.agency_ori = ai.agency_ori 
                      WHERE  ( mx.ram = m.ram ) 
                             AND ( ai.crash_date >= @year + '-09-01' ) 
                             AND ( ai.crash_date <= @year + '-09-30' )) 
                     AS September_Total_Reports, 
                     --October 
                     (SELECT Count(*) AS Expr1 
                      FROM   dbo.accident_information AS ai 
                             INNER JOIN dbo.municipality AS mx 
                                     ON mx.agency_ori = ai.agency_ori 
                      WHERE  ( mx.ram = m.ram ) 
                             AND ( ai.crash_date >= @year + '-10-01' ) 
                             AND ( ai.crash_date <= @year + '-10-31' ) 
                             AND ( ai.insert_datetime - ai.crash_date < 35 ) 
                     ) AS October, 
                     --october total 
                     (SELECT Count(*) AS Expr1 
                      FROM   dbo.accident_information AS ai 
                             INNER JOIN dbo.municipality AS mx 
                                     ON mx.agency_ori = ai.agency_ori 
                      WHERE  ( mx.ram = m.ram ) 
                             AND ( ai.crash_date >= @year + '-10-01' ) 
                             AND ( ai.crash_date <= @year + '-10-31' )) 
                     AS October_Total_Reports, 
                     --november 
                     (SELECT Count(*) AS Expr1 
                      FROM   dbo.accident_information AS ai 
                             INNER JOIN dbo.municipality AS mx 
                                     ON mx.agency_ori = ai.agency_ori 
                      WHERE  ( mx.ram = m.ram ) 
                             AND ( ai.crash_date >= @year + '-11-01' ) 
                             AND ( ai.crash_date <= @year + '-11-30' ) 
                             AND ( ai.insert_datetime - ai.crash_date < 35 ) 
                     ) AS November, 
                     --november total 
                     (SELECT Count(*) 
                      FROM   dbo.accident_information AS ai 
                             INNER JOIN dbo.municipality AS mx 
                                     ON mx.agency_ori = ai.agency_ori 
                      WHERE  ( mx.ram = m.ram ) 
                             AND ( ai.crash_date >= @year + '-11-01' ) 
                             AND ( ai.crash_date <= @year + '-11-30' )) 
                     AS November_Total_Reports, 
                     --December 
                     (SELECT Count(*) AS Expr1 
                      FROM   dbo.accident_information AS ai 
                             INNER JOIN dbo.municipality AS mx 
                                     ON mx.agency_ori = ai.agency_ori 
                      WHERE  ( mx.ram = m.ram ) 
                             AND ( ai.crash_date >= @year + '-12-01' ) 
                             AND ( ai.crash_date <= @year + '-12-31' ) 
                             AND ( ai.insert_datetime - ai.crash_date < 35 ) 
                     ) AS December, 
                     --December Total 
                     (SELECT Count(*) 
                      FROM   dbo.accident_information AS ai 
                             INNER JOIN dbo.municipality AS mx 
                                     ON mx.agency_ori = ai.agency_ori 
                      WHERE  ( mx.ram = m.ram ) 
                             AND ( ai.crash_date >= @year + '-12-01' ) 
                             AND ( ai.crash_date <= @year + '-12-31' )) 
                     AS December_Total_Reports, 
      --Total Current +archived: Would like to replace this huge chunk w/ something a lot smaller 
                     ( (SELECT Count(*) AS Expr1 
                        FROM   dbo.accident_information AS ai 
                               INNER JOIN dbo.municipality AS mx 
                                       ON mx.agency_ori = ai.agency_ori 
                        WHERE  ( mx.ram = m.ram ) 
                               AND ( ai.crash_date >= @year + '-01-01' ) 
                               AND ( ai.crash_date <= @year + '-01-31' )) 
                       + (SELECT Count(*) AS Expr1 
                          FROM   dbo.accident_information AS ai 
                                 INNER JOIN dbo.municipality AS mx 
                                         ON mx.agency_ori = ai.agency_ori 
                          WHERE  ( mx.ram = m.ram ) 
                                 AND ( ai.crash_date >= @year + '-02-01' ) 
                                 AND ( ai.crash_date <= @year + '-02-28' )) 
                       + (SELECT Count(*) AS Expr1 
                          FROM   dbo.accident_information AS ai 
                                 INNER JOIN dbo.municipality AS mx 
                                         ON mx.agency_ori = ai.agency_ori 
                          WHERE  ( mx.ram = m.ram ) 
                                 AND ( ai.crash_date >= @year + '-03-01' ) 
                                 AND ( ai.crash_date <= @year + '-03-31' )) 
                       + (SELECT Count(*) AS Expr1 
                          FROM   dbo.accident_information AS ai 
                                 INNER JOIN dbo.municipality AS mx 
                                         ON mx.agency_ori = ai.agency_ori 
                          WHERE  ( mx.ram = m.ram ) 
                                 AND ( ai.crash_date >= @year + '-04-01' ) 
                                 AND ( ai.crash_date <= @year + '-04-30' )) 
                       + (SELECT Count(*) AS Expr1 
                          FROM   dbo.accident_information AS ai 
                                 INNER JOIN dbo.municipality AS mx 
                                         ON mx.agency_ori = ai.agency_ori 
                          WHERE  ( mx.ram = m.ram ) 
                                 AND ( ai.crash_date >= @year + '-05-01' ) 
                                 AND ( ai.crash_date <= @year + '-05-31' )) 
                       + (SELECT Count(*) AS Expr1 
                          FROM   dbo.accident_information AS ai 
                                 INNER JOIN dbo.municipality AS mx 
                                         ON mx.agency_ori = ai.agency_ori 
                          WHERE  ( mx.ram = m.ram ) 
                                 AND ( ai.crash_date >= @year + '-06-01' ) 
                                 AND ( ai.crash_date <= @year + '-06-30' )) 
                       + (SELECT Count(*) AS Expr1 
                          FROM   dbo.accident_information AS ai 
                                 INNER JOIN dbo.municipality AS mx 
                                         ON mx.agency_ori = ai.agency_ori 
                          WHERE  ( mx.ram = m.ram ) 
                                 AND ( ai.crash_date >= @year + '-07-01' ) 
                                 AND ( ai.crash_date <= @year + '-07-31' )) 
                       + (SELECT Count(*) AS Expr1 
                          FROM   dbo.accident_information AS ai 
                                 INNER JOIN dbo.municipality AS mx 
                                         ON mx.agency_ori = ai.agency_ori 
                          WHERE  ( mx.ram = m.ram ) 
                                 AND ( ai.crash_date >= @year + '-08-01' ) 
                                 AND ( ai.crash_date <= @year + '-08-31' )) 
                       + (SELECT Count(*) AS Expr1 
                          FROM   dbo.accident_information AS ai 
                                 INNER JOIN dbo.municipality AS mx 
                                         ON mx.agency_ori = ai.agency_ori 
                          WHERE  ( mx.ram = m.ram ) 
                                 AND ( ai.crash_date >= @year + '-09-01' ) 
                                 AND ( ai.crash_date <= @year + '-09-30' )) 
                       + (SELECT Count(*) AS Expr1 
                          FROM   dbo.accident_information AS ai 
                                 INNER JOIN dbo.municipality AS mx 
                                         ON mx.agency_ori = ai.agency_ori 
                          WHERE  ( mx.ram = m.ram ) 
                                 AND ( ai.crash_date >= @year + '-10-01' ) 
                                 AND ( ai.crash_date <= @year + '-10-31' )) 
                       + (SELECT Count(*) 
                          FROM   dbo.accident_information AS ai 
                                 INNER JOIN dbo.municipality AS mx 
                                         ON mx.agency_ori = ai.agency_ori 
                          WHERE  ( mx.ram = m.ram ) 
                                 AND ( ai.crash_date >= @year + '-11-01' ) 
                                 AND ( ai.crash_date <= @year + '-11-30' )) 
                       + (SELECT Count(*) 
                          FROM   dbo.accident_information AS ai 
                                 INNER JOIN dbo.municipality AS mx 
                                         ON mx.agency_ori = ai.agency_ori 
                          WHERE  ( mx.ram = m.ram ) 
                                 AND ( ai.crash_date >= @year + '-12-01' ) 
                                 AND ( ai.crash_date <= @year + '-12-31' )) 
                     ) AS 
                     Total_Current_Plus_Archived 
FROM   dbo.municipality AS m 
   INNER JOIN dbo.ram AS r 
           ON m.ram = r.ramid 
GROUP  BY m.ram, 
      r.ramid, 
      r.ram_fname, 
      r.ram_lname 
ORDER  BY ram_last_name 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T17:44:12.667

只是一个想法，我想以这种方式查询。然后，你不需要关心闰年

```
;WITH monthly AS
(
    SELECT 
        mx.ram 
        ,DATEPART(month,crash_date) AS report_month
        ,SUM(CASE WHEN ai.insert_datetime - ai.crash_date < 35 THEN 1 ELSE 0 END) AS Expr1
        ,Count(*) AS Expr1_total
    FROM   dbo.accident_information AS ai 
    INNER JOIN dbo.municipality AS mx 
        ON mx.agency_ori = ai.agency_ori 
    WHERE DATEPART(year,crash_date) = @year             
    GROUP BY mx.ram,DATEPART(month,crash_date)
)                 
SELECT
    r.ramid AS Ram_ID, 
    r.ram_fname AS RAM_First_Name,
    ...
    ,(SELECT Expr1 FROM monthly mt WHERE mt.ram = m.ram AND report_month = 1) AS January
    ,(SELECT Expr1_total FROM monthly mt WHERE mt.ram = m.ram AND report_month = 1) AS  January_Total_Reports
    ,(SELECT Expr1 FROM monthly mt WHERE  mt.ram = m.ram AND report_month = 2) AS February
    ,(SELECT Expr1_total FROM monthly mt WHERE mt.ram = m.ram AND report_month = 2) AS  February_Total_Reports
    ...
    ,(SELECT SUM(Expr1_total) FROM monthly mt WHERE mt.ram = m.ram) AS Total_Current_Plus_Archived 
FROM   dbo.municipality AS m 
INNER JOIN dbo.ram AS r 
    ON m.ram = r.ramid         
GROUP  BY m.ram, 
      r.ramid, 
      r.ram_fname, 
      r.ram_lname 
ORDER  BY ram_last_name 
```

# xml - 我可以通过 Robohelp 10 中的 Docbook Export 输出 csh.xml

> ID：12355402
> 
> 赞同：0
> 
> 时间：2012-09-10T16:04:16.497
> 
> 标签：xml, xhtml, docbook, robohelp, help-authoring

我可以通过 Robohelp 10 中的 Docbook Export 输出上下文相关的帮助文件“Project_Name_csh.xml”吗？

从 XML_Output SSL 使用“将项目导出到 DocBook”处理程序时，不会生成该文件。

但是，它是在使用 XML_Output SSL 中的“Export Project to XHTML”时生成的，这种格式没有用，因为它混合了“.htm”文件和与之关联的链接。

我需要将所有帮助文件生成为 xml 输出，包括上下文相关帮助（包括地图/主题 ID），以便在各种应用程序中使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T17:39:03.257

不确定我是否正确理解了这个问题。但听起来像是来自 DocBook 导出的 appart，您可以创建您喜欢的上下文相关帮助文件 (csf)。导出的 docbook 文件中是否提供 csf 中的信息？如果是这样，您可能想要一个 XSL 来提取信息并创建所需的 csf。

# php - 嵌套替换语句的语法错误

> ID：12355403
> 
> 赞同：0
> 
> 时间：2012-09-10T16:04:18.620
> 
> 标签：php

我收到以下代码片段的语法错误：

```
 $handle = $table.'_'.$field;
    if($queryType=='replace') {
        $sql[$handle]['sql'] = 'UPDATE '.$table.' SET '.$field.' = replace(replace(replace('.$field.',\''0', ''), '1', ''), '2', '')';
    } else {
        $sql[$handle]['sql'] = 'SELECT * FROM '.$table.' WHERE '.$field.' REGEXP(\''.$search.'\')';
    } 
```

我确定我刚刚忘记了一些小东西，但我似乎无法找出导致错误的原因。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T16:09:13.267

您的语法错误来自您提供的代码段的第 3 行：该行的结尾 ,`',\''0', ''), '1', ''), '2', '')';`导致了问题，因为应该是您的 SQL 语句的一部分的单引号没有被转义。与其将它们全部转义，不如使用双引号来包含该部分要简单得多，如下所示：`",''0', ''), '1', ''), '2', '')";`

此外，您当前的代码很容易受到 SQL 注入的影响。

# java - 玩！框架 - 获取变量

> ID：12355404
> 
> 赞同：0
> 
> 时间：2012-09-10T16:04:20.243
> 
> 标签：java, web, playframework-2.0

从 GET 请求中提取变量的最有效/优雅的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T17:53:16.153

有比读取 a 更好的方法`queryString()`（它返回`Map`您必须手动处理的 a）。改用`play.data.DynamicForm`：

```
public static Result aboutAMan() {
    DynamicForm df = form().bindFromRequest();

    int age;
    String name;
    boolean isAdmin;

    name = (df.get("name") != null) ? df.get("name") : "The Unknown";
    age = (df.get("age") != null) ? Integer.parseInt(df.get("age")) : 0;
    isAdmin = Boolean.parseBoolean(df.get("is_admin"));

    String about = (name + " is " + age + " years old and " + ((isAdmin) ? "is" : "isn't") + " an admin");

    return ok(about);
} 
```

当然，您也可以在获取单个参数时使用较短的版本

```
public static Result aboutAMan() {
    return ok("ellou' " + form().bindFromRequest().get("name"));
} 
```

链接是：

```
http://localhost:9000/about-a-man?name=SockSocket&age=23&is_admin=false 
```

路线是：

```
GET    /about-a-man     controllers.Application.aboutAMan 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T16:14:10.560

成立。只需使用 request().queryString()

# php - php查询导致响应发布为三行而不是每个用户一行

> ID：12355408
> 
> 赞同：0
> 
> 时间：2012-09-10T16:04:22.200
> 
> 标签：php, mysql

我正在制作我的第一个数据库，并且正在使用一个表来包含 php/mysql 调查中的所有响应。然而，响应发布到一个表中，但在三个不同的行中。我怀疑这与为三部分响应执行 3 次的查询有关。我需要连接这个吗？如果需要，如何连接？有没有别的解决办法。

**这是 HTML 表单：**

```
<html>
<?php include 'C:\xampp\htdocs\paxdb\head.php'; 
include 'config/menu.php';?> 
<div id="dataentry">

<!--This section is the demographic text field area-->
<form method="post" action="dataentered.php">
First Name:&nbsp;<input type="text" name="First_Name"/></br>
</br>
Last Name:&nbsp;<input type="text" name="Last_Name"/></br>
</br>
E-mail:&nbsp;<input type="text" name="email"/></br>
</br>

<!--This section is the age range checkbox selection area-->
<p><u><b>Age Range</b></u></p>
<input type="checkbox" name="age[]" id="20-25" value="20-25"/>&nbsp;20-25</br>
<input type="checkbox" name="age[]" id="26-30" value="26-30"/>&nbsp;26-30</br>
<input type="checkbox" name="age[]" id="31-35" value="31-35"/>&nbsp;31-35</br>
</div>
<div id="checkboxes">
</div>

<!--This section is the trips take checkbox area-->
<div id="tripstodatetype">
<p><u><b>WHAT TYPE OF TRIPS TO DATE HAVE YOU TAKEN?</b></u></p>
<input type="checkbox" name="trip2date[]" id="Bus" value="Bus">&nbsp;Bus&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</br>
<input type="checkbox" name="trip2date[]" id="Car" value="Car">&nbsp;Car</br>
<input type="checkbox" name="trip2date[]" id="Weekend fly-in" value="Weekend fly-in">&nbsp;Weekend fly-in&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</br>
</div>
<div id="tripstodateborder">
</div>

<!--This section is the type of trip client likes best checkbox area-->
    <div id="triplikebest">
<p><u><b>WHAT TYPE OF TRIP DO YOU LIKE BEST?</b></u></p>
<input type="checkbox" name="triplikebest[]" value="Bus">&nbsp;Bus&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</br>
<input type="checkbox" name="triplikebest[]" value="Car">&nbsp;Car</br>
<input type="checkbox" name="triplikebest[]" value="Weekend fly-in">&nbsp;Weekend fly-in&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</br>
</div>
<div id="triplikeborder">
</div> 
```

**和相应的PHP：**

```
<html>
<?php
include 'head.php';
include 'config/menu.php'; 
$host="localhost";
$username="someusername";
$password="somepass";
$dbname="somedb";

$dbc = mysql_connect($host, $username, $password, $dbname);
if (!$dbc)
{
    die('Error connecting to MySQL server' . mysql_error());
    }
mysql_select_db($dbname, $dbc);

//send user data to the database table
$first_name=$_POST['First_Name'];   
$last_name=$_POST['Last_Name'];
$email=$_POST['email'];

mysql_query("INSERT INTO pax (First_Name, Last_Name, email)
VALUES('$first_name','$last_name','$email')"); 

//send age data to the database table
$age = $_POST['age'];
$my_range = "";
foreach($age as $range) 
$my_range = $my_range . $range . " ";
mysql_query("INSERT INTO pax(age) VALUES ('$my_range')") or die (mysql_error()); 

//send trip to date data to the database table
$trip2date = $_POST['trip2date'];
$my_triprange = "";
foreach($trip2date as $triprange) 
$my_triprange = $my_triprange . $triprange . ", ";
mysql_query("INSERT INTO pax(trip2date) VALUES ('$my_triprange')") or die (mysql_error()); 

mysql_close($dbc);
?> 
```

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T16:07:06.900

...您正在运行 3 个 INSERT 查询。我认为您严重误解了您要达到的目标。您可能想要连接“trip2date”参数的值，或者最好在另一个表中插入多条记录（查看基本的关系数据库使用情况）。

另外，为什么用户可以选择多个年龄范围？一个人怎么可能同时是 20-25 和 26-30？您可能希望在那里有一个广播组，因此他们只能选择一个选项。（同样，您也可能在其中插入多行；如果用户勾选所有三个年龄范围（您允许他们这样做，没有明显的原因），那么您将插入包含他们的姓名和电子邮件的一行，然后是三个仅包含其年龄的行。）

另外，神圣的 SQL 注入，蝙蝠侠。见[http://bobby-tables.com/](http://bobby-tables.com/)

我假设您仍在学习，但要学会在担心其他任何事情之前不要先编写不安全的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T16:10:31.363

您正在执行三个 INSERT。INSERT 查询在数据库中创建一条新记录。

如果要将信息存储在同一行中，则应该有一个包含 age 和 trip2date 值的 INSERT 查询。

或者，如果你想保持结构有一个 INSERT 和两个 UPDATE 查询，它们通过你拥有的任何主键来更新记录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T16:12:07.197

哇，好吧，我同意 ManseUK

1) 您的查询极易受到 SQL 注入的攻击。请参阅 - ["Bobby Tables" XKCD 漫画中的 SQL 注入如何工作？](https://stackoverflow.com/questions/332365/xkcd-sql-injection-please-explain)

2) `mysql`library 已被弃用，该库不再被开发。您应该使用 MySQLi 或 PDO - 请参阅[http://www.php.net/manual/en/mysqlinfo.api.choosing.php](http://www.php.net/manual/en/mysqlinfo.api.choosing.php)

3）您的数据库未标准化。也就是说，您有多个值进入一行的一个字段（所有旅行日期。请参阅[http://en.wikipedia.org/wiki/Database_normalization](http://en.wikipedia.org/wiki/Database_normalization)

4) 您正在运行 3 个插入查询。您应该通过首先准备数据在一个查询中完成此操作。

* * *

**更新**

好的，这是我的解决方案。它带来了更多的建议。不要攻击或侮辱帮助你的人。我们不知道这段代码最终会在哪里结束，并且设计不安全的软件是一个坏习惯。糟糕的代码会产生更多的糟糕代码，最终导致 IT 行业看起来像白痴。LinkedIn 的违规行为很可能是 SQL 注入。这个网站上的一些人会以艰难的方式学习。

其次，该网站的目的是教育人们并解决问题。所以是数据库的入门。

当您运行 INSERT 查询时，它会在数据库的表中创建一个或多个行。您指定的字段用您提供的数据填充，其余的用空白填充。3 INSERT 查询？3 行。

## 这里有几个版本来改进它

**1.0 版：** “mysql_”单行（已修复 SQL 注入）：

```
<?php
//Database Connection as Before ...
$first_name = mysql_real_escape($_POST['First_Name']); 
$last_name = mysql_real_escape($_POST['Last_Name']);
$email = mysql_real_escape($_POST['email'];
foreach($age as $range) {
   $my_range = $my_range . mysql_real_escape($range) . ", ";
}
foreach($trip2date as $triprange) {
   $my_triprange = $my_triprange . mysql_real_escape($triprange) . ", ";
}
mysql_query("INSERT INTO `pax` (`First_Name`, `Last_Name`, `email`, `age`,`trip2date`)   
     VALUES('$first_name','$last_name','$email', '$my_range','$my_triprange')") 
     or die(mysql_error()); 
mysql_close($dbc);
?> 
```

* * *

**2.0 版：** “mysql_”单行（已修复 SQL 注入）：

```
<?php

$dbc = @new mysqli($host, $username, $password, $dbname);
if ($dbc->connect_error) {
  die('Error connecting to MySQL server' . $mysqli->connect_error);
}
$first_name = $dbc->real_escape($_POST['First_Name']); 
$last_name = $dbc->real_escape($_POST['Last_Name']);
$email = $dbc->real_escape($_POST['email'];
foreach($_POST['age'] as $range) {
   $my_range = $my_range . $dbc->real_escape($range) . ", ";
}
foreach($trip2date as $triprange) {
   $my_triprange = $my_triprange . $dbc->real_escape($triprange) . ", ";
}
$dbc->query("INSERT INTO `pax` (`First_Name`, `Last_Name`, `email`, `age`,`trip2date`)   
     VALUES('$first_name','$last_name','$email', '$my_range','$my_triprange')") 
     or die($dbc->error()); 
$dbc->close();
?> 
```

* * *

关于数据库，多表将是存储范围的理想方式。但是，鉴于这是一个小项目，仅将列表用作非规范化字段可能就足够了。即使在大型项目中（在默认数据库类型（MyISAM）中不起作用），我通常也不会为 FOREIGN KEYS 烦恼，而只是在应用程序端强制执行它。这里的数据库开发人员会有所不同。

* * *

示例数据库结构和内容

```
pax  //Sample data, only a few fields for example
-----------
id , firstname , lastname
1 , 'John' , 'Doe',
2,  'Joe', 'Bloggs',
3, 'Anne', 'Smith',

pax_ages
--------
pax_id, ageGroup
1, 20-55
1, 55+
2, 20-55
3, 20-55 
```

查询和一些要插入的伪代码

```
//Do insert similar to V2.0 (removing age) and then
$id = $mysqli->insert_id;  //mysql version $id = mysql_insert_id();
foreach($_POST['age'] as $range) {
   $iQ = "INSERT INTO `pax_ages` VALUES('$id', '$mysqli->real_escape($range)')";
}
while($row = $result->fetch_assoc) {   // mysql version: $row = mysql_fetch_assoc($result)
   $query2 = "SELECT * FROM `pax_ages` WHERE `pax_id` = $row['id']";
   while($age_row = $result2->fetch_assoc) {
       $ageRanges .=  $age_row['ageGroup'];
   }
} 
```

查询和一些要检索的伪代码

```
"SELECT * FROM `pax`";
while($row = $result->fetch_assoc) {   // mysql version: $row = mysql_fetch_assoc($result)
   $query2 = "SELECT * FROM `pax_ages` WHERE `pax_id` = '$row['id']'";
   while($age_row = $result2->fetch_assoc) {
       $ageRanges .=  $age_row['ageGroup'];
   }
} 
```

# python - 当指定 facecolors 时，边缘线在 mplot3d surf 中消失

> ID：12355410
> 
> 赞同：7
> 
> 时间：2012-09-10T16:04:25.533
> 
> 标签：python, python-2.7, matplotlib, mplot3d

我在 matlab 中生成了以下曲面图：

![Matlab 图](../Images/ed01eb1bebff31e4cdd877c8af4d01e0.png)

我需要在 .NET 中创建它。我希望使用 IronPython 来做到这一点。但首先我只是想在 Python (PyLab) 中创建绘图。这是我到目前为止所拥有的：

![蟒蛇图](../Images/e76e016fa08c4831fcf1fdcc790a4fc2.png)

请查看我的代码并告诉我如何让 python 显示黑边线。当我将`facecolors=UWR(heatmap)`属性添加到`surf(...)`. 这是 mplot3d 中的错误还是设计使然？无论哪种方式，我如何找回线路？

这是我的代码（为庞大的数据矩阵道歉）：

```
from mpl_toolkits.mplot3d import Axes3D
from matplotlib import cm
from matplotlib.ticker import LinearLocator, FormatStrFormatter
import matplotlib.pyplot as plt
import matplotlib
from pylab import *
import numpy as np

fig = plt.figure()
ax = fig.gca(projection='3d')

#Sample colour data
heatmap = np.array([(0.304, 0.288,  0.284,  0.26,   0.248,  0.224,  0.204,  0.184,  0.18,   0.18,   0.156,  0.148,  0.144,  0.136,  0.136,  0.128,  0.124,  0.124,  0.128,  0.124,  0.124),
                    (0.356, 0.348,  0.332,  0.328,  0.308,  0.292,  0.288,  0.272,  0.252,  0.232,  0.216,  0.204,  0.16,   0.148,  0.152,  0.148,  0.132,  0.124,  0.124,  0.132,  0.144),
                    (0.396, 0.384,  0.372,  0.36,   0.34,   0.316,  0.312,  0.312,  0.3,    0.272,  0.244,  0.236,  0.216,  0.192,  0.176,  0.168,  0.148,  0.148,  0.156,  0.156,  0.16),
                    (0.452, 0.444,  0.428,  0.408,  0.388,  0.376,  0.364,  0.348,  0.336,  0.336,  0.3,    0.284,  0.264,  0.256,  0.24,   0.244,  0.212,  0.2,    0.22,   0.224,  0.224),
                    (0.488, 0.476,  0.464,  0.444,  0.424,  0.4,    0.4,    0.384,  0.38,   0.372,  0.356,  0.324,  0.312,  0.312,  0.312,  0.312,  0.308,  0.292,  0.304,  0.332,  0.344),
                    (0.492, 0.492,  0.48,   0.468,  0.452,  0.432,  0.424,  0.412,  0.404,  0.396,  0.396,  0.392,  0.376,  0.356,  0.356,  0.36,   0.368,  0.372,  0.392,  0.404,  0.42),
                    (0.5,   0.5,    0.5,    0.484,  0.46,   0.452,  0.444,  0.436,  0.44,   0.44,   0.44,   0.452,  0.44,   0.436,  0.424,  0.42,   0.404,  0.44,   0.452,  0.468,  0.5),
                    (0.484, 0.48,   0.46,   0.444,  0.44,   0.44,   0.44,   0.44,   0.444,  0.44,   0.456,  0.456,  0.46,   0.448,  0.448,  0.448,  0.436,  0.456,  0.468,  0.492,  0.492),
                    (0.405737704918033, 0.401639344262295,  0.409836065573771,  0.418032786885246,  0.434426229508197,  0.438524590163934,  0.438524590163934,  0.44672131147541,   0.454918032786885,  0.471311475409836,  0.467213114754098,  0.479508196721311,  0.487704918032787,  0.487704918032787,  0.479508196721311,  0.483606557377049,  0.495901639344262,  0.516393442622951,  0.520491803278689,  0.532786885245902,  0.536885245901639),
                    (0.320987654320988, 0.329218106995885,  0.349794238683128,  0.362139917695473,  0.374485596707819,  0.395061728395062,  0.42798353909465,   0.440329218106996,  0.465020576131687,  0.477366255144033,  0.48559670781893,   0.493827160493827,  0.506172839506173,  0.518518518518519,  0.51440329218107,   0.518518518518519,  0.547325102880658,  0.555555555555556,  0.555555555555556,  0.584362139917696,  0.580246913580247),
                    (0.282700421940928, 0.29535864978903,   0.30379746835443,   0.320675105485232,  0.337552742616034,  0.354430379746835,  0.383966244725738,  0.434599156118144,  0.464135021097046,  0.485232067510549,  0.493670886075949,  0.514767932489452,  0.527426160337553,  0.535864978902954,  0.544303797468354,  0.561181434599156,  0.594936708860759,  0.59915611814346,   0.590717299578059,  0.60337552742616,   0.607594936708861),
                    (0.230434782608696, 0.256521739130435,  0.273913043478261,  0.304347826086957,  0.334782608695652,  0.360869565217391,  0.373913043478261,  0.408695652173913,  0.469565217391304,  0.504347826086957,  0.521739130434783,  0.539130434782609,  0.552173913043478,  0.560869565217391,  0.578260869565217,  0.6,    0.617391304347826,  0.61304347826087,   0.61304347826087,   0.617391304347826,  0.643478260869565),
                    (0.161137440758294, 0.175355450236967,  0.218009478672986,  0.28436018957346,   0.327014218009479,  0.341232227488152,  0.388625592417062,  0.436018957345972,  0.488151658767773,  0.516587677725119,  0.549763033175356,  0.573459715639811,  0.578199052132701,  0.592417061611374,  0.611374407582938,  0.649289099526066,  0.658767772511848,  0.658767772511848,  0.677725118483412,  0.66824644549763,   0.691943127962085),
                    (0.224719101123596, 0.269662921348315,  0.303370786516854,  0.365168539325843,  0.382022471910112,  0.404494382022472,  0.443820224719101,  0.48876404494382,   0.5,    0.556179775280899,  0.567415730337079,  0.612359550561798,  0.612359550561798,  0.629213483146067,  0.634831460674157,  0.646067415730337,  0.662921348314607,  0.685393258426966,  0.707865168539326,  0.707865168539326,  0.724719101123596),
                    (0.333333333333333, 0.363636363636364,  0.401515151515152,  0.431818181818182,  0.446969696969697,  0.46969696969697,   0.515151515151515,  0.53030303030303,   0.553030303030303,  0.583333333333333,  0.613636363636364,  0.621212121212121,  0.636363636363636,  0.643939393939394,  0.651515151515152,  0.651515151515152,  0.666666666666667,  0.666666666666667,  0.674242424242424,  0.681818181818182,  0.696969696969697),
                    (0.373626373626374, 0.406593406593407,  0.483516483516484,  0.505494505494506,  0.527472527472528,  0.54945054945055,   0.571428571428571,  0.582417582417583,  0.593406593406593,  0.637362637362637,  0.659340659340659,  0.681318681318681,  0.692307692307692,  0.692307692307692,  0.703296703296703,  0.692307692307692,  0.703296703296703,  0.736263736263736,  0.736263736263736,  0.703296703296703,  0.67032967032967),
                    (0.484375,  0.5625, 0.578125,   0.578125,   0.578125,   0.625,  0.625,  0.640625,   0.65625,    0.671875,   0.703125,   0.734375,   0.75,   0.734375,   0.734375,   0.75,   0.734375,   0.640625,   0.65625,    0.625,  0.609375),
                    (0.617647058823529, 0.617647058823529,  0.617647058823529,  0.617647058823529,  0.617647058823529,  0.588235294117647,  0.588235294117647,  0.588235294117647,  0.617647058823529,  0.647058823529412,  0.676470588235294,  0.705882352941177,  0.676470588235294,  0.705882352941177,  0.705882352941177,  0.735294117647059,  0.705882352941177,  0.705882352941177,  0.735294117647059,  0.705882352941177,  0.647058823529412),
                    (0.6,   0.6,    0.6,    0.6,    0.6,    0.6,    0.6,    0.5,    0.5,    0.5,    0.5,    0.5,    0.4,    0.4,    0.4,    0.4,    0.3,    0.3,    0.3,    0.4,    0.4)
]);

#Sample Z data
volatility = np.array([(0.2964396,  0.28628612, 0.27630128, 0.26648508, 0.25683752, 0.2473586,  0.23804832, 0.22890668, 0.21993368, 0.21112932, 0.2024936,  0.19402652, 0.18572808, 0.17759828, 0.16963712, 0.1618446,  0.15422072, 0.14676548, 0.13947888, 0.13236092, 0.1254116),
                       (0.2979793,  0.287974509333333,  0.278154444,    0.268519104,    0.259068489333333,  0.2498026,  0.240721436,    0.231824997333333,  0.223113284,    0.214586296,    0.206244033333333,  0.198086496,    0.190113684,    0.182325597333333,  0.174722236,    0.1673036,  0.160069689333333,  0.153020504,    0.146156044,    0.139476309333333,  0.1329813),
                       (0.299519,   0.289662898666667,  0.280007608,    0.270553128,    0.261299458666667,  0.2522466,  0.243394552,    0.234743314666667,  0.226292888,    0.218043272,    0.209994466666667,  0.202146472,    0.194499288,    0.187052914666667,  0.179807352,    0.1727626,  0.165918658666667,  0.159275528,    0.152833208,    0.146591698666667,  0.140551),
                       (0.3010587,  0.291351288,    0.281860772,    0.272587152,    0.263530428,    0.2546906,  0.246067668,    0.237661632,    0.229472492,    0.221500248,    0.2137449,  0.206206448,    0.198884892,    0.191780232,    0.184892468,    0.1782216,  0.171767628,    0.165530552,    0.159510372,    0.153707088,    0.1481207),
                       (0.3025984,  0.293039677333333,  0.283713936,    0.274621176,    0.265761397333333,  0.2571346,  0.248740784,    0.240579949333333,  0.232652096,    0.224957224,    0.217495333333333,  0.210266424,    0.203270496,    0.196507549333333,  0.189977584,    0.1836806,  0.177616597333333,  0.171785576,    0.166187536,    0.160822477333333,  0.1556904),
                       (0.3041381,  0.294728066666667,  0.2855671,  0.2766552,  0.267992366666667,  0.2595786,  0.2514139,  0.243498266666667,  0.2358317,  0.2284142,  0.221245766666667,  0.2143264,  0.2076561,  0.201234866666667,  0.1950627,  0.1891396,  0.183465566666667,  0.1780406,  0.1728647,  0.167937866666667,  0.1632601),
                       (0.3056778,  0.296416456,    0.287420264,    0.278689224,    0.270223336,    0.2620226,  0.254087016,    0.246416584,    0.239011304,    0.231871176,    0.2249962,  0.218386376,    0.212041704,    0.205962184,    0.200147816,    0.1945986,  0.189314536,    0.184295624,    0.179541864,    0.175053256,    0.1708298),
                       (0.3008828768,   0.292424567021333,  0.284187283338667,  0.276171025752, 0.268375794261333,  0.260801588866667,  0.253448409568, 0.246316256365333,  0.239405129258667,  0.232715028248, 0.226245953333333,  0.219997904514667,  0.213970881792, 0.208164885165333,  0.202579914634667,  0.1972159702,   0.192073051861333,  0.187151159618667,  0.182450293472, 0.177970453421333,  0.173711639466667),
                       (0.2960879536,   0.288432678042667,  0.280954302677333,  0.273652827504, 0.266528252522667,  0.259580577733333,  0.252809803136, 0.246215928730667,  0.239798954517333,  0.233558880496, 0.227495706666667,  0.221609433029333,  0.215900059584, 0.210367586330667,  0.205012013269333,  0.1998333404,   0.194831567722667,  0.190006695237333,  0.185358722944, 0.180887650842667,  0.176593478933333),
                       (0.2912930304,   0.284440789064, 0.277721322016, 0.271134629256, 0.264680710784, 0.2583595666,   0.252171196704, 0.246115601096, 0.240192779776, 0.234402732744, 0.22874546, 0.223220961544, 0.217829237376, 0.212570287496, 0.207444111904, 0.2024507106,   0.197590083584, 0.192862230856, 0.188267152416, 0.183804848264, 0.1794753184),
                       (0.2864981072,   0.280448900085333,  0.274488341354667,  0.268616431008, 0.262833169045333,  0.257138555466667,  0.251532590272, 0.246015273461333,  0.240586605034667,  0.235246584992, 0.229995213333333,  0.224832490058667,  0.219758415168, 0.214772988661333,  0.209876210538667,  0.2050680808,   0.200348599445333,  0.195717766474667,  0.191175581888, 0.186722045685333,  0.182357157866667),
                       (0.281703184,    0.276457011106667,  0.271255360693333,  0.26609823276,  0.260985627306667,  0.255917544333333,  0.25089398384,  0.245914945826667,  0.240980430293333,  0.23609043724,  0.231244966666667,  0.226444018573333,  0.22168759296,  0.216975689826667,  0.212308309173333,  0.207685451,    0.203107115306667,  0.198573302093333,  0.19408401136,  0.189639243106667,  0.185238997333333),
                       (0.2769082608,   0.272465122128, 0.268022380032, 0.263580034512, 0.259138085568, 0.2546965332,   0.250255377408, 0.245814618192, 0.241374255552, 0.236934289488, 0.23249472, 0.228055547088, 0.223616770752, 0.219178390992, 0.214740407808, 0.2103028212,   0.205865631168, 0.201428837712, 0.196992440832, 0.192556440528, 0.1881208368),
                       (0.279132175333333,  0.27446485122,  0.26979833968,  0.265132640713333,  0.26046775432,  0.2558036805,   0.251140419253333,  0.24647797058,  0.24181633448,  0.237155510953333,  0.2324955,  0.22783630162,  0.223177915813333,  0.21852034258,  0.21386358192,  0.209207633833333,  0.20455249832,  0.19989817538,  0.195244665013333,  0.19059196722,  0.185940082),
                       (0.281356089866667,  0.276464580312, 0.271574299328, 0.266685246914667,  0.261797423072, 0.2569108278,   0.252025461098667,  0.247141322968, 0.242258413408, 0.237376732418667,  0.23249628, 0.227617056152, 0.222739060874667,  0.217862294168, 0.212986756032, 0.208112446466667,  0.203239365472, 0.198367513048, 0.193496889194667,  0.188627493912, 0.1837593272),
                       (0.2835800044,   0.278464309404, 0.273350258976, 0.268237853116, 0.263127091824, 0.2580179751,   0.252910502944, 0.247804675356, 0.242700492336, 0.237597953884, 0.23249706, 0.227397810684, 0.222300205936, 0.217204245756, 0.212109930144, 0.2070172591,   0.201926232624, 0.196836850716, 0.191749113376, 0.186663020604, 0.1815785724),
                       (0.285803918933333,  0.280464038496, 0.275126218624, 0.269790459317333,  0.264456760576, 0.2591251224,   0.253795544789333,  0.248468027744, 0.243142571264, 0.237819175349333,  0.23249784, 0.227178565216, 0.221861350997333,  0.216546197344, 0.211233104256, 0.205922071733333,  0.200613099776, 0.195306188384, 0.190001337557333,  0.184698547296, 0.1793978176),
                       (0.288027833466667,  0.282463767588, 0.276902178272, 0.271343065518667,  0.265786429328, 0.2602322697,   0.254680586634667,  0.249131380132, 0.243584650192, 0.238040396814667,  0.23249862, 0.226959319748, 0.221422496058667,  0.215888148932, 0.210356278368, 0.204826884366667,  0.199299966928, 0.193775526052, 0.188253561738667,  0.182734073988, 0.1772170628),
                       (0.290251748,    0.28446349668,  0.27867813792,  0.27289567172,  0.26711609808,  0.261339417,    0.25556562848,  0.24979473252,  0.24402672912,  0.23826161828,  0.2324994,  0.22674007428,  0.22098364112,  0.21523010052,  0.20947945248,  0.203731697,    0.19798683408,  0.19224486372,  0.18650578592,  0.18076960068,  0.175036308)
]);

#Create X and Y data
x = np.arange(80, 121, 2)
y = np.arange(3, 12.01, 0.5)
X, Y = np.meshgrid(x, y)

#Create a color map that goes from blue to white to red
cdict = {'red':   ((0,    0, 0),  #i.e. at value 0, red component is 0\. First parameter is the value, second is the color component. Ignore the third parameter, it is for discontinuities.
                   (0.5,  1, 1),  #     at value 0.5, red component is 1.
                   (1,    1, 1)), #     at value 1, red component is 1
         'green': ((0,    0, 0),
                   (0.5,  1, 1),
                   (1,    0, 0)),
         'blue':  ((0,    1, 1),
                   (0.5,  1, 1),
                   (1,    0, 0))}
#Make the color map and register it                
cmap1 = matplotlib.colors.LinearSegmentedColormap('UWR',cdict,256)
cm.register_cmap(name='UWR', cmap=cmap1)
UWR = cm.get_cmap('UWR')
#Create a variable for the colorbar
m = cm.ScalarMappable(cmap=UWR)
m.set_array(heatmap)

#Create the surface, multiply vol by 100 so axis label can be in units of %.
surf = ax.plot_surface(X, Y, volatility*100, rstride=1, cstride=1, facecolors=UWR(heatmap), linewidth=1, shade=False, edgecolors='#000000', antialiased=True)

#Axis limits
ax.set_xlim3d(80, 120)
ax.set_ylim3d(0, 12)

#Tick locations. 7 ticks for Y axis, 5 ticks for X. For Z axis maximum 6 ticks, only allow integers and only in steps of either 2, 5 or 10.
ax.yaxis.set_major_locator(LinearLocator(7))
ax.xaxis.set_major_locator(LinearLocator(5))
ax.zaxis.set_major_locator(MaxNLocator(6, interger = True, steps=[2, 5, 10]))

#Format X and Z axis tick labels as percentages and as integers
ax.xaxis.set_major_formatter(FormatStrFormatter('%d%%'))
ax.zaxis.set_major_formatter(FormatStrFormatter('%d%%'))

#Create a color bar with 11 ticks
cbar = plt.colorbar(m, ticks=LinearLocator(11), shrink=0.85)
#Make the tick label go from 0 to 1 in steps of 0.1
cbar.ax.set_yticklabels(arange(0,1.01,0.1))

ax.xaxis.set_label_text("Moneyness (Strike / Future)")
ax.yaxis.set_label_text("Term (Months)")
ax.zaxis.set_label_text("Implied Volatility")

cbar.ax.yaxis.set_label_text("Percentile of current volatility compared with historical levels")

#Set view angle
ax.view_init(20, -40) 

#Show the plot
plt.show() 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T18:26:49.777

您可以将线条放在曲面图中添加关键字参数`edgecolors`

```
# Add black lines in the edges
surf = ax.plot_surface(X, Y, volatility, rstride=1, cstride=1, facecolors= UWR(heatmap), linewidth=1, shade=False, edgecolors='#000000') 
```

关于如何在此处格式化轴刻度标签和位置的说明：http: [//matplotlib.sourceforge.net/api/ticker_api.html#matplotlib.ticker.FormatStrFormatter](http://matplotlib.sourceforge.net/api/ticker_api.html#matplotlib.ticker.FormatStrFormatter)

* * *

**已解决 - 从评论中上移：**

在plot_surface`surf.set_edgecolor('k')`之后添加会覆盖边缘颜色。我认为这可能与 facecolors 是 plot_surface 的一个选项有关，但 edgecolors 是 Poly3DCollection 的一个选项。更多细节[在这里](http://matplotlib.sourceforge.net/mpl_toolkits/mplot3d/tutorial.html#mpl_toolkits.mplot3d.Axes3D.plot_surface)。

# python - 多特征推荐系统表示

> ID：12355416
> 
> 赞同：1
> 
> 时间：2012-09-10T16:05:07.727
> 
> 标签：python, numpy, scipy, data-mining

我正在寻找扩展我的推荐系统以包含其他功能（维度）。到目前为止，我正在跟踪用户如何评价某些文档，并使用它来进行推荐。我有兴趣添加更多功能，例如用户位置、年龄、性别等。到目前为止，一些 mysql 表已经足以处理这个问题，但我担心随着我添加更多功能它会很快变得混乱。

我的问题：我怎样才能最好地表示和保存这种多维数据？Python 特定提示会有所帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-30T13:41:03.767

我推荐使用张量，它是多维数组。您可以使用任何数据表或简单的文本文件来存储张量。每一行或每一行都是一个记录/交易，其中列出了不同的特征。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T12:02:44.793

SQL 数据库在您的情况下应该可以正常工作。事实上，您可以将所有训练示例存储在一个数据库中，每一行代表一个特定的训练集，每一列代表一个特征。您可以在需要时通过添加列来添加功能。在关系数据库中，由于各种不一致的原因，您可能会在查询数据时遇到访问错误。尝试使用 NoSQL 数据库。我个人在 python 上使用 MongoDB 和 Pymongo 将训练示例存储为 JSON 格式的字典。（这种方式更容易用于网络应用程序）。

# c++ - 如何在 C++ WinRT 中执行 SHA512 哈希？

> ID：12355417
> 
> 赞同：0
> 
> 时间：2012-09-10T16:05:11.780
> 
> 标签：c++, windows-runtime

C++ WinRT中的 C# 方法[SHA512CryptoServiceProvider.ComputeHash()的等价物是什么？](http://msdn.microsoft.com/en-us/library/s02tk69a.aspx)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T18:49:56.137

见[`Windows.Security.Cryptography.Core.CryptographicHash`](http://msdn.microsoft.com/en-us/library/windows/apps/windows.security.cryptography.core.cryptographichash.aspx)和朋友。该页面上有一个示例演示了一种用法，相关类和函数的文档也有示例。

对于“完整”示例，您可以查看[`compute_sha1_hash`](http://cxxreflect.codeplex.com/SourceControl/changeset/view/2ab4aa208c09#cxxreflect%2fwindows_runtime%2fdetail%2fruntime_utility.cpp)我的 Boost 许可的 CxxReflect 库中的函数。它计算一个 SHA1 哈希值；计算 SHA512 哈希应该只需要将请求的哈希算法从“SHA1”更改为“SHA512”。请注意，此函数是使用 WRL 而不是 C++/CX 编写的，尽管将代码转换为 C++/CX 应该很简单，并且会产生更简洁的代码。

# wpf - 从 xaml 中的资源加载图像

> ID：12355423
> 
> 赞同：1
> 
> 时间：2012-09-10T16:05:28.930
> 
> 标签：wpf, image, resources, resourcedictionary

我有一个以这种方式链接的 xaml 资源

```
<Window.Resources>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="AudioPitchShiftStyle.xaml"/>
        </ResourceDictionary.MergedDictionaries>

    </ResourceDictionary>

</Window.Resources> 
```

在现场 AudioPitchShiftStyle.xaml 我已经把这个声明

```
<Image Source="img/play.png" x:Key="play" /> 
```

如何使用源键通过代码实现 ImageBitmap ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T00:04:01.113

您可以从资源字典中获取。

```
<Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary 
                  Source="Resources/MyResourceDictionary.xaml">
                </ResourceDictionary>
                <ResourceDictionary 
                  Source="Resources/OthersStyle.xaml">
                </ResourceDictionary>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Window.Resources>
    <Grid>
        <Image Source="/WPFDemo;component/Images/AddResourceDictionary.jpg"></Image>
    </Grid> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T08:03:31.600

抱歉，我的意思是使用 C#。无论如何，我想出了如何接受它。

```
ResourceDictionary dicto = this.Resources.MergedDictionaries[0];
Image myImage = (Image)dicto["play"];
img.Source = myImage.Source; 
```

同样谢谢你:-)

# ios - XCode 如何决定什么是资源，什么不是？

> ID：12355424
> 
> 赞同：1
> 
> 时间：2012-09-10T16:05:31.253
> 
> 标签：ios, resources, copy

我的 iPad 应用程序中有顶点和像素着色器。

*顶点和像素着色器对（“附带”默认 GL 游戏应用程序示例的一对）可以很好地复制到 iPhone *。*我注意到其中一个在 Finder 和 XCode 中被标记为“应用程序”（即使它只是一个纯文本文件）。*

 *另一个着色器（我自己添加到项目中）没有。

[我尝试清理](https://stackoverflow.com/questions/4718677/xcode-not-copying-latest-resource-file-to-iphone)，但它仍然不会复制文件。

如何让我的着色器文件下到 iPhone 模拟器？他们似乎不会去。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T16:08:31.117

**检查您的目标的构建阶段**屏幕中的“复制捆绑资源”设置，这些代表复制到您的应用程序捆绑包的文件列表。*

# lucene - Lucene 不匹配具有大写字符的字符串

> ID：12355430
> 
> 赞同：1
> 
> 时间：2012-09-10T16:06:03.370
> 
> 标签：lucene, character, standardanalyzer

我正在使用带有 StandardAnalyzer 的 Lucene 搜索引擎 (v36)。我使用 MultiFieldQueryParser。

我的一个字段设置为 NOT_ANALYZED，因为它是包含字母数字字符和点的版本名称。当此字段包含大写字符时，搜索不会找到任何结果。任何想法 ？

细节：

该字段包含以下值：

*   版本1.26.12.test.a
*   版本1.26.12.test.b
*   v1.2
*   version1.Dummy

我的搜索返回的是上面三个第一个示例的结果，但不是最后一个。

除了使用 Collections.emptySet() 绕过标准停用词外，我根本没有自定义 Lucene。

非常感谢。迪米特里

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T17:46:13.067

我相信如果您将一个字段标记为 NOT_ANALYZED，它会按原样存储，但是 [StandardAnalyzer](https://lucene.apache.org/core/old_versioned_docs/versions/3_0_1/api/all/org/apache/lucene/analysis/standard/StandardAnalyzer.html)使用 LowerCaseFilter （以及其他参见链接）。因此，如果您搜索“version1.Dummy”，您的查询字符串可能是“version1.dummy”，它与存储的字符串不匹配。

# tsql - 案例陈述和排序中的多个分组

> ID：12355433
> 
> 赞同：0
> 
> 时间：2012-09-10T16:06:08.290
> 
> 标签：tsql, grouping, rollup

我目前正在处理聚合存储过程，我的最终选择如下所示：

```
SELECT 
        CASE 
            WHEN GROUPING(Custodian) = 1 
                THEN 'Grand Total'
            ELSE Custodian

        END AS Custodian

    ,   PortfolioID
    ,   PortfolioBaseCCY
    ,   [Date]
    ,   SUM(AmountTotalBaseEquiv) AS AmountTotalBaseEquiv
    ,   ExchangeRate
    ,   AmountTotalBaseEquivUSD
    ,   PortfolioNAVUSD
    ,   SUM(TotalCashPctNAV) AS TotalCashPctNAV 

FROM @ResultSet
WHERE TotalCashPctNAV > 5
GROUP BY Custodian
    ,   PortfolioID
    ,   PortfolioBaseCCY
    ,   [Date]
    ,   AmountTotalBaseEquiv
    ,   ExchangeRate
    ,   AmountTotalBaseEquivUSD
    ,   PortfolioNAVUSD 
    ,   TotalCashPctNAV WITH ROLLUP

HAVING GROUPING_ID(Custodian
    ,   PortfolioID
    ,   PortfolioBaseCCY
    ,   [Date]
    ,   AmountTotalBaseEquiv
    ,   ExchangeRate
    ,   AmountTotalBaseEquivUSD
    ,   PortfolioNAVUSD 
    ,   TotalCashPctNAV) IN (1,255,511)

ORDER BY ABS(TotalCashPctNAV) DESC 
```

但是我想在 CASE 语句中添加另一个分组，即：

```
 CASE 
            WHEN GROUPING(Custodian) = 1 
                THEN 'Grand Total'
            WHEN GROUPING(PortfolioID) = 1
                THEN Custodian+''+'Total'
            ELSE Custodian 
```

但是它不起作用，因为第二种情况不返回值，这是为什么呢？

我还想通过以下方式在上述选择中订购 TotalCashPctNAV：

```
ORDER BY ABS(TotalCashPctNAV) DESC 
```

但是，这似乎不起作用。我希望它排序，以便它在每个投资组合 ID 子总计之间降序排列 ABS 值。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T04:38:51.277

将第二个分组添加到 CASE 语句中按我的预期工作。AmounttotalBaseEquiv 和 TotalCashPct 列填充了与 Grand Total 行一样的值，并且 Custodian 列的命名似乎适合各个 Custodian 总计。

我怀疑排序问题与显示的列实际上是 TotalCashPctNAV 的总和有关，它已被别名回“TotalCashPctNAV”。ORDER BY 语句针对的是实际的 TotalCashPctNAV 列而不是别名 SUM。

有趣的是，如果 ORDER BY 语句不使用 ABS，那么排序就是我所期望的。我不确定为什么 ABS 会导致它的顺序不同，因为我在我的例子中使用了所有积极的术语。

例子：

```
DECLARE @ResultSet TABLE
(
    Custodian VARCHAR(10),
    PortfolioID INT,
    PortfolioBaseCCY INT,
    [Date] DATETIME,
    AmountTotalBaseEquiv NUMERIC(8,2),
    PortfolioNAVUSD NUMERIC(8,2),
    TotalCashPctNAV NUMERIC(8,2),
    ExchangeRate NUMERIC(8,2),
    AmountTotalBaseEquivUSD NUMERIC(8,2)
)

INSERT INTO @ResultSet SELECT 'Anne', 1, 1, '6/1/2012', '600.00', '643.45', '3.78', '2.00', '353.00'
INSERT INTO @ResultSet SELECT 'Bob', 2, 1, '6/13/2012', '745.00', '9.42', '36.70', '1.70', '353.00'
INSERT INTO @ResultSet SELECT 'Carl', 3, 1, '6/27/2012', '488.00', '9875.99', '6.60', '1.80', '353.00'
INSERT INTO @ResultSet SELECT 'Doug', 4, 1, '6/29/2012', '87.00', '45.98', '69.12', '2.10', '353.00'
INSERT INTO @ResultSet SELECT 'Elmer', 5, 1, '6/30/2012', '775.00', '78.47', '69.78', '2.41', '353.00'
INSERT INTO @ResultSet SELECT 'Bob', 6, 1, '6/30/2012', '775.00', '78.47', '69.78', '2.41', '353.00'

SELECT 
        CASE 
            WHEN GROUPING(Custodian) = 1 
                THEN 'Grand Total'
            WHEN GROUPING(PortfolioID) = 1
                THEN Custodian+''+'Total'

            ELSE Custodian

        END AS Custodian

    ,   PortfolioID
    ,   PortfolioBaseCCY
    ,   [Date]
    ,   SUM(AmountTotalBaseEquiv) AS AmountTotalBaseEquiv
    ,   ExchangeRate
    ,   AmountTotalBaseEquivUSD
    ,   PortfolioNAVUSD
    ,   SUM(TotalCashPctNAV) AS TotalCashPctNAVSUM --I appended SUM to the alias

FROM @ResultSet
WHERE TotalCashPctNAV > 5
GROUP BY Custodian
    ,   PortfolioID
    ,   PortfolioBaseCCY
    ,   [Date]
    ,   AmountTotalBaseEquiv
    ,   ExchangeRate
    ,   AmountTotalBaseEquivUSD
    ,   PortfolioNAVUSD 
    ,   TotalCashPctNAV WITH ROLLUP

HAVING GROUPING_ID(Custodian
    ,   PortfolioID
    ,   PortfolioBaseCCY
    ,   [Date]
    ,   AmountTotalBaseEquiv
    ,   ExchangeRate
    ,   AmountTotalBaseEquivUSD
    ,   PortfolioNAVUSD 
    ,   TotalCashPctNAV) IN (1,255,511)
ORDER BY ABS(TotalCashPctNAV) DESC  --works with TotalCashPctNAV but not TotalCashPctNAVSUM
--ORDER BY TotalCashPctNAV DESC  --works as initially expected 
```

# python - 具有硬边距和 C 值的 svm

> ID：12355434
> 
> 赞同：4
> 
> 时间：2012-09-10T16:06:10.353
> 
> 标签：python, math, machine-learning, scikit-learn

我必须创建带有 RBF 内核和硬边距的 svm 分类器。如果我理解正确，那么边距的类型是由 C 参数控制的。也就是说，C 参数越大，我得到的硬边距就越大。是否有一个典型的 C 值可以模拟一个非常强大的“硬边距”？或者有没有其他方法可以模拟强大的硬保证金？当然，我们总是可以讨论为什么我们需要模拟硬边距。但在这种情况下，我需要效仿它！

```
clf = svm.SVC(C = ??,kernel="rbf",gamma =1.5,shrinking=False,cache_size=3000) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T08:37:05.370

通常你不需要那么大的值，但总的来说就是这样。只需尝试将其设置为 1e10，然后查看生成的 alpha。

如果没有一个 alpha 处于 C 值，则不应用正则化（即所有点都在训练集中正确分类 = 硬边距）。

顺便说一句，如果您的数据集非常嘈杂并且无法与您正在使用的内核分开，那么您就无法实现硬边距。

# c# - C# 文件读取行找到项目的结尾

> ID：12355439
> 
> 赞同：-1
> 
> 时间：2012-09-10T16:06:18.540
> 
> 标签：c#, file, readfile

我有一个这样的文件...

```
2000,0, <-----ID
0,180000.100,190000.200
1,200000.100,210000.200
2,300000.100,210000.200
3,400000.100,400000.200
2001,0,
0,199999.001,100000.100
1,200000.000,200000.100
... 
```

我可以使用 streamreader 逐行读取这些行，但我需要弄清楚如何仅为每个 ID 组获取第一行和最后一行。所以对于上面的例子，我需要......

```
0,180000.100,190000.200
3,400000.100,400000.200 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T16:12:47.407

使用行的总长度或逗号的#。

您必须将这些行保存在内存中，因为它是向前阅读的。

也就是说，读取第 1 行。<=1 逗号？新项目，清除保存。下一行，保存到“firstItem”变量。随后的每一行，保存到“lastItem”变量，覆盖现有值。

一旦你用 <=1 逗号打到另一行，把保存的两个变量写到你的永久保存位置或对象中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T16:13:48.960

您可以尝试逐行检查您的输入并将它们放入`List<string>`

如：

```
string str = ReadNextLine();
if(IsANewIDGroupHeader(str)){
  CreateNewIDGroup();
  NewIDGroup.Add(str);
}else{
  OldIDGroup.Add(str);
} 
```

# android - 在 Inflater 上拉刷新 Android 崩溃

> ID：12355440
> 
> 赞同：0
> 
> 时间：2012-09-10T16:06:35.950
> 
> 标签：android, layout-inflater, pull-to-refresh

我已经下载了用于 android 的[pull to refresh 小部件](https://github.com/johannilsson/android-pulltorefresh)，现在我正试图让它工作。我将插件和插件示例文件夹中的所有内容复制到我的项目中，将 com.markupartist.android.widget.PullToRefreshListView 中对 R 的导入引用更改为我项目的 R 文件。此时工作正常。

然后我在 res/layout 中添加了另一个布局并开始收到奇怪的错误消息。这个布局无论如何都没有在我的项目中使用，我只是将文件放在适当的位置。当前的异常消息是： *您的内容必须有一个 id 属性为 'android.r.id.list'* 的列表视图（示例项目中的 pull_to_refresh.xml 中仍然存在具有此 id 的列表视图，无论如何都没有改变）。我添加的 xml 文件（名为 crasher.xml）的内容是：

```
<?xml version="1.0" encoding="UTF-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"

    android:orientation="horizontal"
    android:padding="5dip" >

    <!-- Article title -->
    <TextView
        android:id="@+id/alr_title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:text="Article title"
        android:textColor="#040404"
        android:typeface="sans"
        android:textSize="15dip"
        android:textStyle="bold"/>

</RelativeLayout> 
```

当我更改这个新添加的布局时，异常有时会发生变化，并从 PullToRefreshListView.java 的第 93 行抛出，其中调用了充气器来充气 pull_to_refresh_header 文件。我几乎可以肯定充气器存在问题，并且布局存在某种冲突。有那么一刻，我在这条线上遇到了一个错误，说我不能将 RelativeLayout 转换为 LinearLayout（我不知道在任何地方都这样做） - 现在我不记得我到底做了什么并且无法重现它，但它只是在在添加和未使用的布局 crasher.xml 中更改视图。

我不完全了解充气过程，无法确定问题出在哪里，谁能帮助我？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T10:00:20.253

我终于找到了解决此类问题的方法：

**干净的构建似乎是解决方案。**在 NetBeans 中，*Run->Clean 和 Build*，在 Eclipse 中，我认为有一个类似的选项。它解决了生成的布局资源的各种奇怪问题，这些资源在开发过程中显然没有很好地缓存和重新构建。

# python - 将元组列表转换为简单的平面列表

> ID：12355442
> 
> 赞同：23
> 
> 时间：2012-09-10T16:06:50.487
> 
> 标签：python

> **可能重复：**
> [如何使用列表理解将元组的元组转换为一维列表？](https://stackoverflow.com/questions/3204245/how-do-i-convert-a-tuple-of-tuples-to-a-one-dimensional-list-using-list-comprehe)

假设我有以下元组列表：

```
[(1,2), (1,3), (1,4), (1,5), (1,6)] 
```

我正在尝试将其转换为一个简单的列表，如下所示：

```
[1,2,1,3,1,4,1,5,1,6] 
```

如何将其转换为像上面这样的简单列表，而不必遍历每个元素并将项目逐个添加到另一个列表中？

是否有任何快速有效的方法来执行此操作而无需实际遍历原始元组列表，或者是否有一些内置函数/方法来执行此操作？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-09-10T16:08:27.373

```
lst = [(1,2), (1,3), (1,4), (1,5), (1,6)]

import itertools
list(itertools.chain(*lst))
# [1, 2, 1, 3, 1, 4, 1, 5, 1, 6] 
```

或者：

```
[e for l in lst for e in l]
# [1, 2, 1, 3, 1, 4, 1, 5, 1, 6] 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-10T17:44:36.353

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-09-10T16:22:40.630

使用[`chain.from_iterable`](http://docs.python.org/library/itertools.html#itertools.chain.from_iterable), 因为它通过懒惰地推进列表来避免不必要的一次性解包（这会导致多余的内存消耗）：

```
>>> import itertools
>>> L = [(1,2), (1,3), (1,4), (1,5), (1,6)]
>>> list(itertools.chain.from_iterable(L))
[1, 2, 1, 3, 1, 4, 1, 5, 1, 6] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-10T16:48:37.927

就 itertools 等特殊模块的性能和独立性而言，这是最好的方法：

```
>>> l = [(1,2), (1,3), (1,4), (1,5), (1,6)] 
>>> reduce(list.__add__,map(list,l))
[1, 2, 1, 3, 1, 4, 1, 5, 1, 6] 
```

# c# - 页面未定向（超链接）

> ID：12355445
> 
> 赞同：0
> 
> 时间：2012-09-10T16:07:00.237
> 
> 标签：c#, asp.net

有人能告诉我为什么我的链接无法重定向到这个特定页面吗？这是我的代码，我使用了 jQuery 菜单：

```
<link type="text/css" rel="stylesheet" media="all" href="css/styles.css" />
<script src="js/jquery-1.4.1.min.js" type="text/javascript"></script>
<script src="js/lavalamp.js" type="text/javascript"></script>
<script>

$(document).ready(function () {
var dleft = $('.lavalamp li.active').offset().left - $('.lavalamp').offset().left; 
var dwidth = $('.lavalamp li.active').width() + "px";

//apply the current position of active item to our floatr element
$('.floatr').css({
    "left": dleft+"px",
    "width": dwidth
});

$('.lavalamp li').hover(function(){

    var left = $(this).offset().left - ($(this).parents('.lavalamp').offset().left + 15);
    var width = $(this).width() + "px";
    var sictranslate = "translate("+left+"px, 0px)";

    $(this).parent('ul').next('div.floatr').css({
        "width": width,
        "-webkit-transform": sictranslate,
        "-moz-transform": sictranslate
    });

},

function(){

    var left = $(this).siblings('li.active').offset().left - ($(this).parents('.lavalamp').offset().left + 15);
    var width = $(this).siblings('li.active').width() + "px";

    var sictranslate = "translate("+left+"px, 0px)";

    $(this).parent('ul').next('div.floatr').css({
        "width": width,
        "-webkit-transform": sictranslate,
        "-moz-transform": sictranslate

    });

}).click(function(){

    $(this).siblings('li').removeClass('active');

    $(this).addClass('active');

    return false;

});

});
</script> 
```

* * *

```
 <p><div class="lavalamp magenta">
<ul >
    <li class="active">
    <a href="http://localhost:52731/MCR/HomeUser.aspx">Home</a></li>
    <li><a href="">Inventory</a></li>
    <li><a href="">My Reservation</a></li>
    <li><a href="">My Profile</a></li>
    <li><a href="">Contact Us</a></li>
    <li><a href="">Log Out</a></li>

</ul>
    <div class="floatr"></div>
</div></p> 
```

* * *

当我单击主页时，该页面没有执行任何操作。告诉我我该怎么做。P/s : 换成超链接，还是一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T16:20:26.933

我会认为 JQuery 菜单插件正在对构成菜单的原始 HTML 做一些事情。尝试检查元素以确认这一点。

*   您使用的 JQuery 插件是什么？
*   您可以在页面加载后提供 HTML 吗？

然后我可以进一步帮助..

SR

**编辑：**

我相信您不应该将 HREF URL 放在菜单项本身上，而应使用简单的 href="#" 并确保为菜单项提供 id 值。

然后，您将使用以下方法绑定到元素的类或 id 的单击事件：

```
$(".classname,#idofelement").click( function() {
    // do your stuff
}); 
```

有关 lavalamp 的教程，请参阅此页面：

[http://www.queness.com/post/530/simple-lava-lamp-menu-tutorial-with-jquery](http://www.queness.com/post/530/simple-lava-lamp-menu-tutorial-with-jquery)

此外，您可以在点击处理程序中使用此重定向：

```
window.location.replace("http://stackoverflow.com"); 
```

您可以使用类似于以下内容的方法找到在单击处理程序中单击的元素的类或 id：

```
if($(this).attr("id") == "myelement") {
    // redirect here using window.location
} else {
    // etc
} 
```

希望这可以帮助！

# unicode - Unicode 字符：购物车

> ID：12355456
> 
> 赞同：11
> 
> 时间：2012-09-10T16:07:42.143
> 
> 标签：unicode, utf-8

有人知道购物车（或类似）的 unicode 字符吗？我找到了披萨（U+1F355）、热线（U+2706）和这是什么（U+26A7），但没有该死的购物车！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2016-02-23T02:25:53.720

值得注意的是：Unicode 9.0 和 Emoji 3.0：购物车“”（U+1F6D2）

[http://www.unicode.org/emoji/charts/emoji-released.html#1f6d2](http://www.unicode.org/emoji/charts/emoji-released.html#1f6d2)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-10T17:22:27.367

到目前为止，没有。如果有，它的名称中无疑会包含 SHOPPING 一词，然后[http://www.fileformat.info/info/unicode/char/search.htm](http://www.fileformat.info/info/unicode/char/search.htm)会在该名称下找到它，但它没有。

真的不是什么大问题。从将新字符采用到 Unicode 中通常需要十年以上的时间，然后才能在常用字体中合理地广泛使用。例如，U+1F355 SLICE OF PIZZA 可用于大约一种字体（不包含在任何操作系统或常用软件分发中）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-18T10:53:38.930

今天（2015 年）[Font-Awesome](http://fortawesome.github.io/Font-Awesome/cheatsheet/)很受欢迎，并且有一些购物车可供选择。例如：fa-shopping-cart

您需要在 CSS 中导入字体。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2015-07-20T18:14:52.350

试试 Unicode：f07a [http://fortawesome.github.io/Font-Awesome/icon/shopping-cart/](http://fortawesome.github.io/Font-Awesome/icon/shopping-cart/)

我没有测试过这个，但是在上面的网站上找到了它，祝你好运！

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2017-02-27T10:27:24.017

 这个 unicode s 根据 W3schools.com

# vba - 检查空数组的大小

> ID：12355460
> 
> 赞同：4
> 
> 时间：2012-09-10T16:07:51.270
> 
> 标签：vba

> **可能重复：**
> [如何确定数组是否在 VB6 中初始化？](https://stackoverflow.com/questions/183353/how-do-i-determine-if-an-array-is-initialized-in-vb6)

我最初声明一个数组为空：

```
Dim ArrayVar() as Variant

'May add some data, may not
if something then 
    Redim Preserve ArrayVar(ubound(ArrayVar,1)+1)
    ArrayVar(ubound(ArrayVar,1)) = "something"
end if

'Always check size of array
if ubound(ArrayVar,1) > x 
```

问题是有时当我检查大小时，没有添加任何内容 - 数组为空，并且出现运行时错误。我确实尝试过声明数组，`Dim ArrayVar(0) as Variant`但随后 redim 语句无法编译。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T16:12:42.423

您可以使用 IsEmpty() 函数。

请尝试以下代码：

```
Dim ArrayVar() As Variant

Sub x()
If IsEmpty(arrvar) Then
    ReDim ArrayVar(0)
Else
    ReDim Preserve ArrayVar(UBound(ArrayVar, 1) + 1)
    ArrayVar(UBound(ArrayVar, 1)) = "something"
End If

MsgBox UBound(ArrayVar, 1)
End Sub 
```

# hadoop - HBase 可以提供对其单元的实时写/读访问吗？

> ID：12355462
> 
> 赞同：2
> 
> 时间：2012-09-10T16:07:55.153
> 
> 标签：hadoop, hbase

我从一些消息来源听说 HBase 是一个基于 Hadoop 的“批处理”进程，所以我不确定 HBase 是否可以提供对其单元的实时写入/读取访问？

例如，对于应用程序要写入 HBase 表中某个单元格的一条数据，HBase 是否需要经过 Map-Reduce 中使用的批处理才能将数据放入该单元格？如果是这种情况，那么在批处理完成之前，该应用程序无法从 HBase 读取这条新数据......

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T17:22:13.917

是的，它确实提供了“实时”访问。

您所指的“批处理”过程是 Hadoop 上的 MapReduce。HBase，只依赖HDFS进行存储，不依赖mapreduce。

# c++ - 类似于汇编的 C++ 指针访问

> ID：12355464
> 
> 赞同：0
> 
> 时间：2012-09-10T16:07:59.147
> 
> 标签：c++, arrays, pointers, assembly

有时我在 C++ 中看到不同的数组访问样式，并认为它可能与程序集寻址模式有关：

C++：

```
int * aa=new int[2];
0[aa]=15; //a little different than aa[0]
1[aa]=15;
aa[0]=15;
aa[1]=15;
printf("%d %d \n",aa[0],aa[1]); 
```

集会：

```
__asm
{
    mov aa[0],ebx
    mov aa[1],eax
    mov 0[aa],ebx
    mov 1[aa],eax
} 
```

**这个 C++ 数组访问表示法是标准吗？如果是，它是从程序集寻址模式派生的吗？**

当我尝试`[aa]1=5;`时，编译器给出

*   “未找到 aa 属性”，
*   “失踪 ';' 在‘常数’之前”
*   “左操作数必须是左值”。

    //当我尝试指针运算时，

    *(aa+1)=0//不报错

    *(aa+0)=0//没有错误:)

**运算符 [] 重载的这条规则是否相同？**

MSVC++ 2010

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T16:11:04.733

这是 C 和 C++ 的一个众所周知的怪癖，它们并不真正关心表达式的哪一半放在方括号`[]`中。它们都计算为相同的等效表达式：

```
*(0+aa)=15; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-10T16:11:57.947

表达式`a[b]`基本上被翻译成`*(a+b)`. 这就是为什么这种“风格”`11[arr]`是可能的。

失败的原因`[aa]11`纯粹是句法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-10T16:29:13.133

> 这个 C++ 数组访问表示法是标准吗？

是的。只要一个操作数是指针，另一个是算术，`a[b]`就等价于`*(a+b)`，所以无论是指针还是索引进入`[]`.

> 如果是，它是从汇编寻址模式派生的吗？

几乎可以肯定不是。语法直接来自 C，它最初是为 PDP 系列计算机开发的，其中编写了汇编寻址模式`1(aa)`。

> 当我尝试`[aa]1=5`时，编译器给出（错误）

这是因为下标表达式的语法被指定为`postfix-expression [ expression ]`，所以 in 的操作数`[]`必须在另一个之后。

> 运算符 [] 重载的这条规则是否相同？

否。如果运算符已重载，则`a[b]`等于`a.operator[](b)`，而不是`b.operator[](a)`。

# caching - Cassandra：为列族激活行缓存似乎失败了

> ID：12355465
> 
> 赞同：2
> 
> 时间：2012-09-10T16:07:59.863
> 
> 标签：caching, cassandra

我在为大型 cassandra 1.1.2 cf 激活行级缓存时遇到了一些问题：

如果我跑

```
update column family user_data with caching = 'ALL'; 
```

（无论我是否使用引号）

它说

```
515b08ac-89c5-3890-bcc1-60bf55f0228a
Waiting for schema agreement...
... schemas agree across the cluster 
```

但之后，缓存似乎仍然关闭。我也在配置文件中激活了它。描述还说它已关闭：

```
create column family user_data
  with column_type = 'Standard'
  and comparator = 'UTF8Type'
  and default_validation_class = 'BytesType'
  and key_validation_class = 'UTF8Type'
  and read_repair_chance = 0.1
  and dclocal_read_repair_chance = 0.0
  and gc_grace = 864000
  and min_compaction_threshold = 4
  and max_compaction_threshold = 32
  and replicate_on_write = true
  and compaction_strategy = 'org.apache.cassandra.db.compaction.SizeTieredCompactionStrategy'
  and caching = 'KEYS_ONLY'
  and column_metadata = [
    {column_name : 'content',
    validation_class : BytesType}]
  and compression_options = {'sstable_compression' : 'org.apache.cassandra.io.compress.SnappyCompressor'}; 
```

使用 CQL 更新它（ALTER TABLE user_data WITH caching='all';）也不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T17:08:39.370

这在 1.1.5 中由[https://issues.apache.org/jira/browse/CASSANDRA-4561](https://issues.apache.org/jira/browse/CASSANDRA-4561)修复。1.1.5 今天要出镜了，但在那之前你可以在[http://people.apache.org/~slebresne/](http://people.apache.org/~slebresne/)上得到它。

# javascript - javascript 连接

> ID：12355473
> 
> 赞同：0
> 
> 时间：2012-09-10T16:08:20.023
> 
> 标签：javascript

我有几个数组需要连接成一个新数组。我正在这样做：

```
function ConcatArrays() {

     var TheNewArray = [];

     function TheConcat(TheArray) { TheNewArray = TheNewArray.concat(TheArray); }

     for (var i = 0; i < SomeArrayOfObjects.length; i++) {

         if (SomeCondition) { TheConcat(SomeArrayOfObjects[i]); }
     }
} 
```

不知为何，`TheNewArray`始终是空的。有什么我想念的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T16:10:17.893

您正在为本地参数分配一个新数组。
这不会影响您作为参数传递的那个变量。

您可以将数组添加到现有数组实例（而不是创建新数组），如下所示：

```
Array.prototype.push.apply(oldArray, newArray); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-10T16:18:43.863

`.concat()`您可以使用现有数组的方法直接连接数组。我不明白你要写什么方法，但如果你有三个数组，你可以像这样组合它们：

```
var a = [1,2,3];
var b = [4,5,6];
var c = [7,8,9];

var d = a.concat(b,c);   // creates [1,2,3,4,5,6,7,8,9] 
```

工作示例：http: [//jsfiddle.net/jfriend00/N4ews/](http://jsfiddle.net/jfriend00/N4ews/)

该`array.concat()`方法将采用单个元素添加到数组或数组中。如果您传递数组，它将遍历数组并为您获取所有元素。有关数组的更多信息，请参阅[MDN 文档。](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/concat)`.concat()`

# cocoa - NSUserDefaults 不会写入磁盘

> ID：12355482
> 
> 赞同：0
> 
> 时间：2012-09-10T16:09:14.070
> 
> 标签：cocoa, nsuserdefaults

在我的用户默认设置中，我有一个字典数组，每个字典都代表一个对象。我正在尝试实现一种方法来更改具有键“名称”的对象名称。我在 NSObject 的 KVO 兼容子类中执行此操作，因为名称是 NSTableView 中的文本字段。

我能够找到正确的字典，更改该对象中键的值，并替换数组中的该对象 - NSLog 确认此过程的每个步骤。此外，更改会反映在 tableview 中。但是，当涉及到同步默认值时，它就是不写。什么明显的错误让我坚持了将近一天！？

```
- (void)setName:(NSString *)aName {

if (name && aName != name) {

    NSMutableArray *existingArray = [[NSMutableArray alloc] initWithArray:[[NSUserDefaults standardUserDefaults] objectForKey:@"array"]];

    [existingArray enumerateObjectsUsingBlock:^(id object, NSUInteger idx, BOOL *stop) {
        if ([[object valueForKey:@"name"] isEqualToString:name]) {

            NSMutableDictionary *data = [existingArray objectAtIndex:idx];
            [data setObject:aName forKey:@"name"];
            [existingCrates replaceObjectAtIndex:idx withObject:data];
            [[NSUserDefaults standardUserDefaults] setObject:existingCrates forKey:@"crates"];

            NSLog(@"this is the new existingArray: %@", existingArray);
            NSLog(@"this is the new plist: %@", [[NSUserDefaults standardUserDefaults] objectForKey:@"array"]);
            [[NSUserDefaults standardUserDefaults] synchronize];

            name = aName;
            return;
        }
    }];
}

else {
    name = aName;
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T02:35:28.673

尽管我没有收到任何错误指示，但我试图改变一个不可变的元素。通过将不可变对象复制到可变对象并将它们写入用户默认值来修复。

# mysql - 用一条语句更新mysql中的两个表

> ID：12355489
> 
> 赞同：1
> 
> 时间：2012-09-10T16:09:41.830
> 
> 标签：mysql, sql-update, multi-table

我有两张桌子——“活动”和“房间”。

房间表如下所示：

```
 CREATE TABLE `rooms` (
    `roomKey` INT(9) UNSIGNED NOT NULL AUTO_INCREMENT,
    `locationID` INT(9) NOT NULL DEFAULT '0',
    `locationName` VARCHAR(150) NOT NULL DEFAULT '',
    `buildingID` INT(9) NOT NULL DEFAULT '0',
    `buildingName` VARCHAR(150) NOT NULL DEFAULT '',
    `areaID` INT(9) NOT NULL DEFAULT '0',
    `areaName` VARCHAR(150) NOT NULL DEFAULT '',
    `roomID` INT(9) NOT NULL DEFAULT '0',
    `roomName` VARCHAR(150) NOT NULL DEFAULT '',
    `clientKey` MEDIUMINT(5) UNSIGNED NOT NULL DEFAULT '0',
    PRIMARY KEY (`roomKey`),
    UNIQUE INDEX `locationID` (`locationID`, `buildingID`, `areaID`, `roomID`, `clientKey`),
    INDEX `clientKey` (`clientKey`)

)
COLLATE='latin1_swedish_ci'
ENGINE=InnoDB
AUTO_INCREMENT=21270411; 
```

事件表如下所示：

```
CREATE TABLE `events` (
    `eventKey` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT,
    `accountNum` INT(11) NULL DEFAULT NULL,
    `locationID` INT(9) NOT NULL DEFAULT '0',
    `buildingID` INT(9) NOT NULL DEFAULT '0',
    `areaID` INT(9) NOT NULL DEFAULT '0',
    `roomID` INT(9) NOT NULL DEFAULT '0',
    `clientKey` SMALLINT(5) UNSIGNED NOT NULL,
    `roomKey` INT(10) UNSIGNED NOT NULL DEFAULT '0',
    `eventTitle` VARCHAR(100) NOT NULL DEFAULT '',
    `dateStart` DATETIME NOT NULL DEFAULT '0000-00-00 00:00:00',
    `dateEnd` DATETIME NOT NULL DEFAULT '0000-00-00 00:00:00',
    `status` SMALLINT(5) UNSIGNED NOT NULL DEFAULT '0',
    PRIMARY KEY (`eventKey`),
    UNIQUE INDEX `uniqueEvent` (`accountNum`, `locationID`, `buildingID`, `areaID`, `roomID`),
    INDEX `clientKey` (`clientKey`)
)
COLLATE='latin1_swedish_ci'
ENGINE=InnoDB
AUTO_INCREMENT=98690419; 
```

有一个将新事件的批量导入插入事件表的过程。完成后，我们需要使用与“房间”表中的主键对应的 roomKey 更新新记录 - 我们可以使用房间中记录的 locationID、buildingID、areaID、roomID 和 clientKey 进行匹配桌子。（clientKey 是必需的，因为多个帐户可能具有相同的位置、建筑物、区域或房间值）。

目前，我用于此的查询是：

```
UPDATE events e, rooms dr SET e.locationKey=dr.locationKey 
       WHERE e.locationID=dr.locationID 
           AND e.buildingID=dr.buildingID 
           AND e.areaID=dr.areaID 
           AND e.roomID=dr.roomID 
           AND e.clientKey=dr.clientKey 
```

但它没有考虑两个帐户（客户）在位置、建筑物、面积和房间中具有相同值的情况。基于另一个帐户具有相同 locationID、buildingID、areaID 和 roomID 的房间记录这一事实，该查询很容易将错误的 roomKey 值放入事件记录中。

我可以修改查询以如下所示运行，但它非常慢。我知道这不是使用正确的查询，所以我正在寻求改进它 - 无需使用 PHP 循环等进行此更新。

```
UPDATE EVENTS e, rooms dr SET e.locationKey=dr.locationKey
WHERE (e.locationID=dr.locationID AND e.clientKey=dr.clientKey)
    AND (e.buildingID=dr.buildingID  AND e.clientKey=dr.clientKey)
    AND (e.areaID=dr.areaID  AND e.clientKey=dr.clientKey)
    AND (e.roomID=dr.roomID  AND e.clientKey=dr.clientKey)
    AND e.clientKey=dr.clientKey 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T16:11:20.310

在 Mysql 中，您可以在加入时使用此语法`update`

```
UPDATE table1 t1 
       INNER JOIN table2 t2 
         ON t1.id = t2.id
SET t1.col1 = t2.col2, t1.col2 = t2.col2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T17:24:11.623

如果 in 的`clientKey`值`rooms`是权威的，并且您只想根据匹配的值更新所有`clientKey`值，那么您应该能够这样做：`events``roomID`

```
UPDATE rooms AS r
INNER JOIN events AS e ON r.roomKey = e.roomKey
SET e.clientKey = r.clientKey 
```

# java - 在java中的DES（反转CBC？）之前做XOR的任何内置方法？

> ID：12355491
> 
> 赞同：1
> 
> 时间：2012-09-10T16:09:47.487
> 
> 标签：java

我试图通过使用此代码来破译数据

```
byte[] iv = new byte[] { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00 };
IvParameterSpec ivParameterSpec = new IvParameterSpec(iv);
SecretKey s = new SecretKeySpec(key, Algorithm.TEDE.toString());
Cipher cipher = Cipher.getInstance("DESede/CBC/NoPadding", "BC");
cipher.init(Cipher.DECRYPT_MODE, s, ivParameterSpec);
byte[] deciphered_data = cipher.doFinal(enciphered_data); 
```

它似乎做如下图（DES后的XOR）

![在此处输入图像描述](../Images/e76c0a55b4cfc9c96045a50d65ec08d6.png)

我想知道是否有任何方法可以像下图那样进行倒置的 CBC 解密（DES 之前的 XOR） ![在此处输入图像描述](../Images/7f9bf5f4934f98a8531c7a67dc955fb2.png)

# php - 获取复选框和相应的文本字段值以显示在一行中

> ID：12355492
> 
> 赞同：0
> 
> 时间：2012-09-10T16:09:50.863
> 
> 标签：php, html, css

我有一个表单，可以根据我想要的数字动态生成复选框字段和文本字段字段。这是生成的表单和字段

```
<?php
     $num = "6";
     $index = "0";
     echo "<form action='".$_SERVER['PHP_SELF']."' name='myform' method='post'>";
     echo "<table>";
     for($i= 0;$i<$num;$i++){
        echo "<tr><td><input type='hidden' name='indexnum[]' value='".$index."'><input type='checkbox' name='mychecks[]' value='check".$i."'><input type='text' name='checktext[]' size='20'></td><tr>";
$index++;
     }
    echo "<tr><td><input type='submit' name='submit' value='Submit'/></td></tr>";
    echo "</table>";
    echo "</form>";
   if(isset($_POST['submit'])){
    $num = count($_POST['indexnum']);
     for($i=0;$i<$num;$i++){
        $index = $_POST['indexnum'];
        $checkvalues = $_POST['mychecks'];
        $textValue = $_POST['checktext'];
        echo $index[$i].".)".$checkvalues[$i]." coressponse ".$textValue[$i]."<br>";

}
}
?> 
```

问题是我无法正确获取文本字段的值，但复选框的值可以。请有人帮我离开这里。我想要的是，当检查复选框并输入相应的文本字段值时。这两个值应该在一行中，即它们应该显示为一行。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T22:00:06.590

您必须访问数组文件。因此，在持有您的解决方案时：

```
...
$index = $_POST['indexnum'][$i];
$checkvalues = $_POST['mychecks'][$i];
$textValue = $_POST['checktext'][$i];
... 
```

只有 2 个输入的解决方案：

```
<form action='<?php echo $_SERVER['PHP_SELF'];?>' name='myform' method='post'>
 <table>
  <?php

  $num = "6";

  for($i= 0;$i<$num;$i++)
  {
  ?>
  <tr>
   <td>
    <input type='checkbox' name='mychecks[<?php echo $i;?>]' value='1'>
    <input type='text' name='checktext[<?php echo $i;?>]' size='20'>
   </td>
  </tr>
  <?php            
  }  
  ?>    

  <tr><td><input type="submit" name="submit" value="Submit" /></td></tr>
 </table>
</form>
<?php    

if(isset($_POST['submit']))
{
  $i = 1;

  foreach ($_POST["mychecks"] as $id=>$val)
  {
    echo ($i++).".)".$id." coressponse ".$_POST["checktext"][$id]."<br>";
  }    
}
?> 
```

# sql - System.Transaction 和 System.Data.Common.DbTransaction 有什么区别？

> ID：12355494
> 
> 赞同：1
> 
> 时间：2012-09-10T16:10:09.133
> 
> 标签：sql, entity-framework-4, transactions, linq-to-entities, transactionscope

我在我的项目中使用 Linq-to-Entity (EF 4.0)。我想在我的代码中使用事务。我发现了两种在我的代码中使用事务的方法。System.Transaction 和 System.Data.Common.DbTransaction 有什么区别？哪个性能更好？

第一的：

```
 using (testEntities ent = new testEntities())
        {
            ent.Connection.Open();
            using (System.Data.Common.DbTransaction transaction = ent.Connection.BeginTransaction())
            {
                try
                {
                    ...

                    int er1 = ent.SaveChanges();
                    if (er1 > 0)
                        success = true;
                    else
                        success = false;

                    ...

                    int er2 = ent.SaveChanges();
                    if (er2 > 0)
                        success = true;
                    else
                        success = false;
                }
                catch
                {
                    success = false;
                }

                success = false;

                if (success)
                    transaction.Commit();
                else
                    transaction.Rollback();
            }
        } 
```

第二：

```
 using (testEntities ent = new testEntities())
        {
            ent.Connection.Open();
            using (TransactionScope tscope= new TransactionScope())
            {

                ...

                int er1 = ent.SaveChanges();

                ...

                int er2 = ent.SaveChanges();

                tscope.Complete();

            }
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T16:14:26.077

来自 msdn

> System.Transactions 命名空间包含允许您编写自己的事务应用程序和资源管理器的类。具体来说，您可以创建并参与一个或多个参与者的事务（本地或分布式）。

DbTransactions 仅用于数据库事务。TransactionScope 为您提供自动事务注册能力。它将为您注册或创建新交易。这可以包括数据库或分布式事务。

检查[msdn](http://msdn.microsoft.com/en-us/library/system.transactions.transactionscope.aspx)以获取更多信息。

# php - 查询数据库中的重复条目

> ID：12355498
> 
> 赞同：0
> 
> 时间：2012-09-10T16:10:22.577
> 
> 标签：php, mysql

在添加新邮政编码之前尝试查看邮政编码是否已经存在：

使用空查询，我得到答案 NO 搜索字段中的任何内容，即使邮政编码不存在，我也会得到肯定的答案。

```
$search=$_POST['search'];
$result = mysql_query("SELECT zipcodes FROM zipcodes WHERE zipcodes='$search'");
if ($result = $search) {
$search = "yes";
}else{
$search = "no";
} 
```

有任何想法吗？谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T16:13:24.713

您在此行上使用一个等号：

`if ($result = $search)`

这是分配`$result`而`$search`不是比较相等，然后总是返回true。使用`==`.

另外，请接受 John Woo 关于使用`COUNT`or的建议`mysql_num_rows`：

```
$search = $_POST['search'];
$result = mysql_query("SELECT zipcodes FROM zipcodes WHERE zipcodes='$search'");

if (mysql_num_rows($result) > 0) {
    $search = "yes";
}else{
    $search = "no";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T16:12:50.263

尝试使用`COUNT`

```
SELECT COUNT(*) FROM `zipcodes` WHERE` zipcodes = 'value' 
```

如果邮政编码不存在，它将返回 0。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T16:15:44.063

尝试更改此行

```
$result = mysql_query("SELECT zipcodes FROM zipcodes WHERE zipcodes='$search'"); 
```

至

```
$result = mysql_query("SELECT zipcodes FROM zipcodes WHERE zipcodes=\"$search\""); 
```

$search 变量不会在单引号内打印它的值

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T16:14:12.590

在 PHP 你也可以做`if (mysql_num_rows($result) > 0)`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-10T16:14:45.757

```
echo (mysql_errno($db_object) == 1062) ? 'duplicate' : 'unique'; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-10T16:33:00.340

利用

```
$search=$_POST['search'];
$result = mysql_query("SELECT zipcodes FROM zipcodes WHERE zipcodes='$search'");

if (mysql_num_rows($result) > 0) {

$search = "yes";
}else{
$search = "no";
} 
```

# node.js - Bower 没有在项目文件夹中复制文件

> ID：12355499
> 
> 赞同：3
> 
> 时间：2012-09-10T16:10:24.133
> 
> 标签：node.js, twitter, npm

我今天尝试了[Twitter](http://twitter.com)的新[`bower`](https://github.com/twitter/bower)工具，但不幸的是我无法让它像宣传的那样工作。我正在使用 Ubuntu 并安装了最新的`node.js`. 我`Node`按照节点 github 上的指南安装

```
tar -zxf node-v0.8.8.tar.gz #Downloaded this from nodejs.org
cd node-v0.8.8
./configure
make
sudo make install 
```

和`bower`这条线

```
npm install bower -g 
```

然后我在我的 html 文件夹中创建了一个新文件夹，然后我尝试了

```
bower install domready 
```

鲍尔然后这样做

```
bower cloning git://github.com/ded/domready.git
bower caching git://github.com/ded/domready.git
bower fetching domready
bower copying /home/ps/.bower/domready 
```

然后这些文件存在于“/home/ps/.bower/domready”中。文档虽然说文件将放在“/path/to/project/components/”中，但组件文件夹保持为空。与

```
sudo bower install domready 
```

没有错误/警告/提示/任何出现。关于我可能做错的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-27T16:05:44.043

您可能想先尝试使用 bower init 来创建 bower.json 文件。然后进行安装（使用 --save 标志），您将看到一个包含所有 js 好东西的组件文件夹。

应该做的伎俩

# ruby - 大虾PDF表格混合格式

> ID：12355503
> 
> 赞同：7
> 
> 时间：2012-09-10T16:10:38.257
> 
> 标签：ruby, pdf, pdf-generation, prawn

我正在尝试使用 prawn pdf 在 ruby​​ 中生成一个简单的表格。

我需要单元格中的一些文本是粗体的，有些不是粗体的。例如：

![示例表](../Images/f2d96503c547176019d252f6384e1a53.png) 现在按照一些示例，我使用以下代码进行了基本的表格渲染：

```
pdf.table([
  ["1\. Row example text", "433"],
  ["2\. Row example text", "2343"],
  ["3\. Row example text", "342"],
  ["4\. Row example text", "36"]], :width => 500, :cell_style => {
    :font_style => :bold}) 
```

但是我绝对看不到将更多文本插入到具有不同格式的第一个单元格中的方法。（在这种情况下，我希望它不加粗）

有谁知道如何做到这一点？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-10T16:43:01.357

```
Prawn::Document.generate("test.pdf") do |pdf|
     table_data = [[Prawn::Table::Cell::Text.new( pdf, [0,0], :content => "<b>1\. Row example text</b> \n\nExample Text Not Bolded", :inline_format => true), "433"],
                   [Prawn::Table::Cell::Text.new( pdf, [0,0], :content => "<b>2\. Row example text</b>", :inline_format => true), "2343"],
                   [Prawn::Table::Cell::Text.new( pdf, [0,0], :content => "<b>3\. Row example text</b>", :inline_format => true), "342"],                    
                   [Prawn::Table::Cell::Text.new( pdf, [0,0], :content => "<b>4\. Row example text</b>", :inline_format => true), "36"]]

    pdf.table(table_data,:width => 500)
end 
```

你也可以做

```
Prawn::Document.generate("test.pdf") do |pdf|
    table_data = [["<b>1\. Row example text</b>\n\nExample Text Not Bolded", "<b>433<b>"], 
                  ["<b>2\. Row example text</b>", "<b>2343</b>"], 
                  ["<i>3\. Row example text</i>", "<i>342</i>"],
                  ["<b>4\. Row example text</b>", "<sub>36</sub>"]]

    pdf.table(table_data, :width => 500, :cell_style => { :inline_format => true })
end 
```

大虾的 inline_format 支持`<b>, <i>, <u>, <strikethrough>, <sub>, <sup>, <font>, <color> and <link>`

# java - 在java中修改代码

> ID：12355505
> 
> 赞同：1
> 
> 时间：2012-09-10T16:10:43.547
> 
> 标签：java, sorting

因此，我编写了一些相当标准的排序算法来对字符串数组进行排序。我想修改一些排序方法，使它们对数据的排序略有不同。这是我想做的：

选择排序当前遍历数组的剩余部分，寻找最小值，然后将其交换到前面。我想更改算法，以便它也在剩余部分中查找最大值，并将其交换到后面，以便它同时从前面和后面建立一个排序列表。

插入排序当前将每个项目插入到它从左侧构建的排序区域中。它通过搜索已排序的区域来执行此操作，一次一个项目。我想在该区域上使用二进制搜索来找到插入项目的正确位置。

这是我到目前为止的代码：

```
/** Swaps the specified elements of an array.
 *  Used in several of the sorting algorithms
 */
private  void swap(String[ ] data, int here, int there){
    String temp = data[here];
    data[here] = data[there];
    data[there] = temp;
}

/* ===============SELECTION SORT================= */

/** Sorts the elements of an array of String using selection sort */
public  void selectionSort(String[ ] data){
    // for each position, from 0 up, find the next smallest item 
    // and swap it into place
    for (int place=0; place<data.length-1; place++){
        int minIndex = place;
        for (int sweep=place+1; sweep<data.length; sweep++){
            if (data[sweep].compareTo(data[minIndex]) < 0)
                minIndex=sweep;
        }
        swap(data, place, minIndex);
    }
}

/* ===============INSERTION SORT================= */
/** Sorts the  elements of an array of String using insertion sort */
public  void insertionSort(String[] data){
    // for each item, from 0, insert into place in the sorted region (0..i-1)
    for (int i=1; i<data.length; i++){
        String item = data[i];
        int place = i;
        while (place > 0  &&  item.compareTo(data[place-1]) < 0){
            data[place] = data[place-1];       // move up
            place--;
        }
        data[place]= item;
    }
} 
```

# windows-7 - 使用 bin/cassandra -f 启动 cassandra 时出错

> ID：12355507
> 
> 赞同：4
> 
> 时间：2012-09-10T16:11:03.000
> 
> 标签：windows-7, cassandra

我的 Windows 7 机器上安装了最新版本的 cassandra，位于以下目录中：

```
/cygdrive/c/Development/Cassandra/apache-cassandra-1.1.4 
```

已经为 /var/lib/cassandra 下的 data_file_directories、saved_caches_direcory 和 commitlog_directory 创建了所有必要的目录，但是当我尝试使用以下命令启动它时：

```
bin/cassandra -f 
```

我收到以下错误：

> $ bin/cassandra -f xss = -ea -javaagent:bin/../lib/jamm-0.2.5.jar -XX:+UseThreadPriorities -XX:ThreadPriorityPolicy=42 -Xms1024M -Xmx1024M -Xmn200M -XX:+HeapDumpOnOutOfMemoryError bin /cassandra：第 149 行：getopt：找不到命令解析参数时出错！

这不是我第一次看到这个错误，但是在 Mac（相同版本）上声明 cassandra 时我没有这个问题。我是否错过了 Windows 上某处的配置步骤，因为我正在关注“入门 wiki”，但我看不到任何明显的东西。我的系统有 4GB 的内存，所以它应该能够应付得很好，我没有更改 HEAP_SIZE 的值，只是将它们注释掉，以便 cassandra 可以选择它需要多少。

关于在启动时导致此错误的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T17:10:41.397

cygwin 下不支持 Cassandra，但已知 bin\cassandra.bat 在普通 Windows cmd 下工作。DataStax 还在[http://www.datastax.com/products/community](http://www.datastax.com/products/community)分发本机 Windows 安装程序（将创建 Windows 服务） 。

# python - “for”迭代与直接索引性能

> ID：12355516
> 
> 赞同：0
> 
> 时间：2012-09-10T16:11:21.183
> 
> 标签：python, performance, for-loop, iteration

刚得到一个我试图理解的奇怪结果。我有一个大约 325k 行（列表）的数据集，每行大约 90 个项目（字符串、浮点数等 - 这并不重要）。比如说，如果我想对所有项目进行一些处理，那么我可以使用 2 个“for”来迭代它们：

```
for eachRow in rows:
    for eachItem in eachRow:
        # do something 
```

在我的系统中，这段代码执行了 41 秒。但是，如果我用一系列索引访问（ eachRow[0]、eachRowm[1] 直到 eachRow[89] ）替换嵌套循环，执行时间将下降到 25 秒。

```
for eachRow in rows:
    eachRow[0]  # do something with this item
    eachRow[1]  # do something with this item
    ..
    eachRow[89] # do something with this item 
```

当然，写这样的代码不是一个好主意——我只是在寻找一种提高数据处理性能的方法，偶然发现了这种奇怪的方法。任何意见？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T16:53:24.800

展开似乎确实有轻微的性能优势，但它可以忽略不计，所以除非你的`do_something`函数真的几乎什么都不做，否则你不应该看到差异。我很难相信不同方法的等效行为可能达到 60%，尽管我总是愿意对一些我从未想过的实现细节感到惊讶。

tl;博士总结，使用 32500 而不是 325000 因为我不耐烦：

```
do_nothing easy 3.44702410698
do_nothing indexed 3.99766016006
do_nothing mapped 4.36127090454
do_nothing unrolled 3.33416581154
do_something easy 5.4152610302
do_something indexed 5.95649385452
do_something mapped 6.20316290855
do_something unrolled 5.2877831459
do_more easy 16.6573209763
do_more indexed 16.8381450176
do_more mapped 17.6184959412
do_more unrolled 16.0713188648 
```

CPython 2.7.3，代码：

```
from timeit import Timer

nrows = 32500
ncols = 90
a = [[1.0*i for i in range(ncols)] for j in range(nrows)]

def do_nothing(x):
    pass

def do_something(x):
    z = x+3
    return z

def do_more(x):
    z = x**3+x**0.5+4
    return z

def easy(rows, action):
    for eachRow in rows:
        for eachItem in eachRow:
            action(eachItem)

def mapped(rows, action):
    for eachRow in rows:
        map(action, eachRow)

def indexed(rows, action):
    for eachRow in rows:
        for i in xrange(len(eachRow)):
            action(eachRow[i])

def unrolled(rows, action):
    for eachRow in rows:
        action(eachRow[0])
        action(eachRow[1])
        action(eachRow[2])
        action(eachRow[3])
        action(eachRow[4])
        action(eachRow[5])
        action(eachRow[6])
        action(eachRow[7])
        action(eachRow[8])
        action(eachRow[9])
        action(eachRow[10])
        action(eachRow[11])
        action(eachRow[12])
        action(eachRow[13])
        action(eachRow[14])
        action(eachRow[15])
        action(eachRow[16])
        action(eachRow[17])
        action(eachRow[18])
        action(eachRow[19])
        action(eachRow[20])
        action(eachRow[21])
        action(eachRow[22])
        action(eachRow[23])
        action(eachRow[24])
        action(eachRow[25])
        action(eachRow[26])
        action(eachRow[27])
        action(eachRow[28])
        action(eachRow[29])
        action(eachRow[30])
        action(eachRow[31])
        action(eachRow[32])
        action(eachRow[33])
        action(eachRow[34])
        action(eachRow[35])
        action(eachRow[36])
        action(eachRow[37])
        action(eachRow[38])
        action(eachRow[39])
        action(eachRow[40])
        action(eachRow[41])
        action(eachRow[42])
        action(eachRow[43])
        action(eachRow[44])
        action(eachRow[45])
        action(eachRow[46])
        action(eachRow[47])
        action(eachRow[48])
        action(eachRow[49])
        action(eachRow[50])
        action(eachRow[51])
        action(eachRow[52])
        action(eachRow[53])
        action(eachRow[54])
        action(eachRow[55])
        action(eachRow[56])
        action(eachRow[57])
        action(eachRow[58])
        action(eachRow[59])
        action(eachRow[60])
        action(eachRow[61])
        action(eachRow[62])
        action(eachRow[63])
        action(eachRow[64])
        action(eachRow[65])
        action(eachRow[66])
        action(eachRow[67])
        action(eachRow[68])
        action(eachRow[69])
        action(eachRow[70])
        action(eachRow[71])
        action(eachRow[72])
        action(eachRow[73])
        action(eachRow[74])
        action(eachRow[75])
        action(eachRow[76])
        action(eachRow[77])
        action(eachRow[78])
        action(eachRow[79])
        action(eachRow[80])
        action(eachRow[81])
        action(eachRow[82])
        action(eachRow[83])
        action(eachRow[84])
        action(eachRow[85])
        action(eachRow[86])
        action(eachRow[87])
        action(eachRow[88])
        action(eachRow[89])

def timestuff():
    for action in 'do_nothing do_something do_more'.split():
        for name in 'easy indexed mapped unrolled'.split():
            t = Timer(setup="""
from __main__ import {} as fn
from __main__ import {} as action
from __main__ import a
""".format(name, action),
                      stmt="fn(a, action)").timeit(10)
            print action, name, t

if __name__ == '__main__':
    timestuff() 
```

（请注意，我并没有费心使比较完全公平，因为我只是试图衡量变化的可能规模，即顺序统一的变化与否。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T16:51:46.813

对不起各位，是我的错。我的系统出了点问题（这不是一个独立的 Python 解释器，而是一个内置的大系统）。重新启动整个系统后，我得到了正确的结果——两种变体大约 2.8 秒。我觉得我好笨。由于无关紧要，正在寻找一种删除我的问题的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T17:58:05.673

与其他计时的响应者不同，我发现计时有很大差异。首先，我的代码：

```
import random
import string
import timeit

r = 1000
outer1 = [[[''.join([random.choice(string.ascii_letters) for j in range(10)])] for k in range(90)] for l in range(r)]
outer2 = [[[''.join([random.choice(string.ascii_letters) for j in range(10)])] for k in range(90)] for l in range(r)]
outer3 = [[[''.join([random.choice(string.ascii_letters) for j in range(10)])] for k in range(90)] for l in range(r)]

def x1(L):
    for outer in L:
        for inner in L:
            inner = inner[:-1]

def x2(L):
    for outer in L:
        for y in range(len(outer)):
            outer[y] = outer[y][:-1]

def x3(L):
    for x in range(len(L)):
        for y in range(len(L[x])):
            L[x][y] = L[x][y][:-1]

print "x1 =",timeit.Timer('x1(outer1)', "from __main__ import x1,outer1").timeit(10)
print "x2 =",timeit.Timer('x2(outer2)', "from __main__ import x2,outer2").timeit(10)
print "x3 =",timeit.Timer('x3(outer3)', "from __main__ import x3,outer3").timeit(10) 
```

请注意，我正在运行这 10 次。每个列表都填充了 3000 个项目，每个项目包含 90 个项目，每个项目都是由十个字母组成的随机字符串。

代表性结果：

```
x1 = 8.0179214353
x2 = 0.118051644801
x3 = 0.150409681521 
```

不使用索引的函数 (x1) 的执行时间是仅对内部循环使用索引的函数 (x2)的**66 倍。**奇怪的是，只对内循环使用索引的函数 (x2) 比对外循环和内循环都使用索引的函数 (x3) 执行得更好。

# linux - Linux 标准基础合规性和守护进程管理

> ID：12355518
> 
> 赞同：2
> 
> 时间：2012-09-10T16:11:44.917
> 
> 标签：linux

我希望控制各种系统中的许多进程。我的主要问题是每个系统的 Linux 发行版不一样。我想知道 LSB，特别是在其中`status_of_proc()`找到的功能和各种其他功能`/lsb/init-functions`是否是该过程的可行方法。如果没有，我可以依靠其他标准。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T21:16:42.117

如果您将需要能够控制的所有组件包装到符合 LSB 的 init.d 脚本中，那么您应该能够使用相同的命令从任何符合 LSB 的 Linux 发行版中控制它们。我发现的问题（可能不再是这种情况）是 LSB 函数位于不同分布的不同位置。这意味着我不能轻易地将脚本复制到另一个发行版。

为了检查正在运行的进程的状态，我最终退回到 pid 文件和 ps 命令的组合。这使我能够在每个发行版上拥有相同的实现并访问以下命令：

服务启动/停止/状态

# .net - 通过 OData 访问的 Azure 表存储实体。PartitionKey 和 RowKey 作为主键

> ID：12355520
> 
> 赞同：0
> 
> 时间：2012-09-10T16:11:51.677
> 
> 标签：.net, wcf-data-services, visual-studio-2012, odata, azure-table-storage

我正在通过 OData（WCF 数据服务）使用 Azure 表存储访问“人员”实体。我有很多问题要让它发挥作用。我遇到了这个错误：

实体代码：

```
public class Person : TableServiceEntity
{
public string Name { get; set; }
... etc 
```

URI：http: *//127.0.0.1/DataService/PersonDataService.svc/Person*

结果：

> 服务器在处理请求时遇到错误。异常消息是“在数据上下文类型“PersonDataServiceContext”上，有一个顶级 IQueryable 属性“Person”，其元素类型不是实体类型。确保 IQueryable 属性是实体类型或在数据上下文类型上指定 IgnoreProperties 属性以忽略此属性。

经过大量故障排除后，我通过这篇[文章](http://marcgravell.blogspot.ca/2008/12/astoria-and-linq-to-sql-getting-started.html)发现，为了解决这个错误，我可以添加到我的实体中：

1）[DataServiceKey]属性添加自定义键（我需要[DataServiceKey（“PartitionKey”，“RowKey”）]）

2）通过寻找“PersonID”属性（这是唯一对我有用的）

3) 通过寻找“ID”属性

没有 1 是唯一对我有用的。我必须添加一个“PersonID”列，如下所示：

实体代码：

```
public class Person : TableServiceEntity
{
public Guid PersonID { get; set; } //This is absolutely necessary to get around the aforementioned error
public string Name { get; set; }
... etc 
```

*我通过http://127.0.0.1/DataService/PersonDataService.svc/Person*或通过指定 PersonID 成功获取数据：http: *//127.0.0.1/DataService/PersonDataService.svc/Person (guid'e4a924d1-a564-45d7- 9e3e-fe0396d08f8e')*

我想指定一个自定义主键列，例如 PartitionKey/RowKey（来自 TableServiceEntity），但使用此代码无济于事：

```
[DataServiceKey("PartitionKey", "RowKey")]
public class Person : TableServiceEntity
{
public string Name { get; set; }
... etc 
```

这是一个错误吗？我是否必须为我拥有的每个实体遵循该约定？Person => PersonID、Foo => FooID 等。

我正在使用 Visual Studio 2012 和 Silverlight 5、.NET Framework 4.0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T19:33:30.667

这是一个非常接近您正在尝试的示例

[Windows Azure 演练：表存储](http://blogs.msdn.com/b/jnak/archive/2008/10/28/walkthrough-simple-table-storage.aspx)

[了解表服务数据模型](http://msdn.microsoft.com/en-us/library/windowsazure/dd179338.aspx)

每个条目都有一个 PartitionKey 和一个 RowKey，并且组合必须是唯一的。基于第一个链接，rowkey 可以是 string.empty。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T17:13:50.137

根据[WCF 数据服务和 Azure 表存储：如何使用 PartitionKey / RowKey 作为主键](https://stackoverflow.com/questions/12376741/wcf-data-service-and-azure-table-storage-how-can-i-use-partitionkey-rowkey-as/)...

这似乎是反射提供程序的限制，可能不是预期的限制。我将在内部将此作为错误提交，但在我们修复之前，这里有一个解决方法......

您可以使用[new 修饰符](http://msdn.microsoft.com/en-us/library/51y09td4%28v=VS.71%29.aspx#vclrfnew_newmodifier)隐藏通过/从基类传递所需的值：

```
using System;
using System.Data.Services.Common;

namespace SO.OData
{
    [DataServiceKey("PartitionKey", "RowKey")]
    public class Question : TableServiceEntry
    {
        public new string PartitionKey
        {
            get { return base.PartitionKey; }
            set { base.PartitionKey = value; }
        }

        public new string RowKey
        {
            get { return base.RowKey; }
            set { base.RowKey = value; }
        }

        public string Text { get; set; }
        public User AskedBy { get; set; }
        public DateTimeOffset AskedAt { get; set; }
    }

    public abstract class TableServiceEntry
    {
        public string PartitionKey { get; set; }
        public string RowKey { get; set; }
    }
} 
```

# actionscript-3 - 是否可以将项目（游戏）从 Flash cs4 导入 FlashDevelop？

> ID：12355525
> 
> 赞同：0
> 
> 时间：2012-09-10T16:12:09.257
> 
> 标签：actionscript-3, flash, flashdevelop

是否可以将项目（游戏）从 Flash cs4 导入 FlashDevelop ？时间线之类的东西将如何运作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T16:25:27.243

如果您在时间线中有代码，这并不容易，您将不得不没有时间线。您可以将资产与其时间线代码一起导入（如果它们按您的预期工作），否则您将无法以任何方式编辑该代码。是的，有一种复杂的方法`addFrameScript()`可以让您向 MovieClip 添加一些代码，但它会覆盖第一次出现的任何内容。实际上，最好不要在时间轴上编码，因为您无法完全控制执行流程，并且在第 X 帧上省略某些行可能会对后续帧或整个游戏完整性造成奇怪的影响。

FlashDevelop 可以解析 SWF 以获取资源，也可以解析 SWC，但无法打开 FLA 文件，因此您必须做很多工作才能将游戏移出 Flash CS。当我对 Flash CS4 的试用期到期时，我采用了类似的方式，除了我打算无限重复的自动画电影剪辑之外，我没有在时间轴上编写太多代码，最终我完全绕过了 MovieClip 对象，以支持不太复杂但更高级的可更改的 Sprite 类。

# asp.net-mvc - 查看控制器方法

> ID：12355527
> 
> 赞同：1
> 
> 时间：2012-09-10T16:12:19.990
> 
> 标签：asp.net-mvc, asp.net-mvc-4, telerik-grid, telerik-mvc

查看控制器方法

```
 .ClientEvents(events =>
        {
            events.OnDataBinding("onDB");
        }) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T17:44:03.403

正如 dbaseman 所说 - 插入操作发送表单值，这些值将用于生成带有新数据键的新记录。此外，默认情况下参数的名称称为**id** - 在更新操作方法中，您可以像这样检索它：

```
[GridAction]
[AcceptVerbs(HttpVerbs.Post)]
public ActionResult Update(string id)
{
    // code..
    return View();
} 
```

# php - MySQL 语法错误，但仅在通过 PHP 使用时

> ID：12355529
> 
> 赞同：5
> 
> 时间：2012-09-10T16:12:26.553
> 
> 标签：php, mysql, syntax

我正在尝试在我的数据库中重新散列用户 ID，但我被卡住了。

```
<?php
include("session.php");
include("functions.php");
$conn = ConnectMySQL();
setTimezone($session->username);

$sql = "SELECT username, userid FROM users";
$result = mysql_query($sql) or die(mysql_error());
while($rows = mysql_fetch_array($result)){
    $username = $rows['username'];
    $old = mysql_real_escape_string($rows['userid']);
    $new = mysql_real_escape_string($session->generateRandID());

    $moresql = "START TRANSACTION;
                UPDATE users SET userid='$new' WHERE userid='$old';
                UPDATE comments SET user='$new' WHERE user='$old';
                UPDATE forum_posts SET poster_name='$new' WHERE poster_name='$old';
                UPDATE forum_topics SET topic_poster_name='$new' WHERE topic_poster_name='$old';
                UPDATE images SET author='$new' WHERE author='$old';
                UPDATE likes SET user='$new' WHERE user='$old';
                UPDATE music SET author='$new' WHERE author='$old';
                UPDATE ratings SET user='$new' WHERE user='$old';
                COMMIT;";
    $newresult = mysql_query($moresql) or die(mysql_error());
    if(!$newresult){echo "There was a problem with changing $username's hash. \n";}
    else{echo "Changed $username's hash<i>!</i> \n";}
}
mysql_close($conn);
?> 
```

整个查询完全可以通过 PHPMyAdmin 工作，显然只返回零行。但是，当我尝试使用 PHP 传递实际值时，它会变得很糟糕：

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'UPDATE users SET userid='b8aca4b680707453fa4dfe1bf1d0fddb' WHERE userid='8' at line 2 
```

没有其他错误 - 我不知道它是什么。提前致谢，

山姆

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-10T16:16:17.607

mysql_query() 不支持多个查询。您必须一次执行一个查询。见[http://php.net/manual/en/function.mysql-query.php](http://php.net/manual/en/function.mysql-query.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T16:17:15.330

从[文档](http://php.net/manual/en/function.mysql-query.php)中：

```
mysql_query() sends a unique query (multiple queries are not supported) 
```

您不能通过 php 向数据库发送一系列查询。考虑在您的实际数据库上编写一个过程，然后从 php.ini 调用它。

此外，这些功能已被弃用。您应该考虑使用不同的库。 [PDO](http://www.php.net/manual/en/class.pdo.php)是一种流行的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T16:20:12.177

我在处理事务时通常使用的想法是这样的（半伪代码）：

```
try {
    // First of all, let's begin a transaction
    $db->beginTransaction();

    // A set of queries ; of one fails, an exception should be thrown
    $db->query('first query');
    $db->query('second query');
    $db->query('third query');

    // If we arrive here, it means that no exception was thrown
    // i.e. no query has failed ; and we can commit the transaction
    $db->commit();
} catch (Exception $e) {
    // An exception has been thrown
    // We must rollback the transaction
    $db->rollback();
} 
```

请注意，有了这个想法，如果查询失败，则必须抛出异常：

PDO 可以做到这一点，具体取决于您如何配置它 请参阅 PDO::setAttribute 和 PDO::ATTR_ERRMODE 和 PDO::ERRMODE_EXCEPTION 否则，使用其他一些 API，您可能必须测试用于执行查询的函数的结果，并且自己抛出异常。

不幸的是，这并不涉及魔法：您不能只是在某处放置指令并自动完成事务：您仍然必须具体说明必须在事务中执行哪组查询。

例如，很多时候，在事务之前（开始之前）会有几个查询，在事务之后（在提交或回滚之后）会有另外几个查询；无论事务中发生（或不发生）什么，您都希望执行这些查询。

==================================================== ===

您也可以使用 mysqli 来实现相同的目的

例如

```
<?php
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

/* disable autocommit */
mysqli_autocommit($link, FALSE);

mysqli_query($link, "CREATE TABLE myCity LIKE City");
mysqli_query($link, "ALTER TABLE myCity Type=InnoDB");
mysqli_query($link, "INSERT INTO myCity SELECT * FROM City LIMIT 50");

/* commit insert */
mysqli_commit($link); 
```

# android - 当 ListView 项目超出可见范围时

> ID：12355531
> 
> 赞同：0
> 
> 时间：2012-09-10T16:12:36.627
> 
> 标签：android, listview

我有一个用图像填充的 ListView。我还使用 AsynTask 在后台加载图像，以免干扰 UI 线程。

但是有一个问题。例如，当我滚动到第 50 个项目时，所有项目都会被填充，所以我必须等待那些可见的项目。

有没有办法阻止对不再可见的项目执行 getView 方法？

# windows - php composer.phar 更新不适用于 Symfony 安装

> ID：12355540
> 
> 赞同：9
> 
> 时间：2012-09-10T16:13:11.513
> 
> 标签：windows, symfony, wamp, composer-php

我在 Windows 7 64 位上运行 WAMP。`PATH`变量设置为`c:\wamp\bin\php\php5.3.13\`

我正在尝试安装 Symfony，但我不明白为什么第一行运行而不是第二行：

这成功运行：

```
php c:\wamp\bin\php\php5.3.13\composer.phar 更新
```

此行失败：

```
php composer.phar 更新
```

出现错误：

> “无法打开输入文件：composer.phar”

这有什么可以解释的？

`get_include_path`返回：`

> .;C:\wamp\bin\php\php5.3.13\php\PEAR`。

这是否意味着如果 composer.phar 不在 PEAR 目录中，'php composer.phar update' 将不起作用？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-03-04T05:03:51.357

命令`composer self-update`可以解决问题。
例如：

1.  转到 cmd 并跳转到您的项目文件夹（如果
    `c:\wamp\www\{yourprojectfolder}`
    您的项目）

2.  运行这个
    `cd c:\wamp\www\{yourprojectfolder}`

3.  用这个
    `composer self-update`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-10T16:32:45.257

你应该试试这个：

> composer.phar 更新

为什么 php 会知​​道您的 $PATH 变量？

另外，我认为 $PATH 仅在处理命令行的第一个单词时由您的 shell 使用。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-30T10:40:13.800

您应该注销然后登录或重新启动以使路径更改可用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-09-01T12:24:30.187

好的，这就是我解决它的方法。

1.  下载并安装 git bash
2.  打开 git bash
3.  运行作曲家自我更新或作曲家自我更新

干杯希望这对你也有帮助。

# iphone - 如何缩小从远程服务器加载的非视网膜 iPhone 的视网膜图像？

> ID：12355541
> 
> 赞同：1
> 
> 时间：2012-09-10T16:13:11.340
> 
> 标签：iphone, ios, uiimage, scale, retina-display

我必须从远程源加载我的应用程序的图标，图像为 50x50px，以 25x25px 显示在设备上。

目前，图标在视网膜设备上显示正确大小，但在非视网膜设备上显示两倍大小。

仅供参考：远程源无法提供非视网膜图像。

如何在非视网膜设备上按比例缩小 UIImage，以便所有设备显示相同的大小？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-10T16:22:15.747

首先检查你是否有 Retina 显示器

```
if ([[UIScreen mainScreen] respondsToSelector:@selector(scale)] && [[UIScreen mainScreen] scale] == 2){ 
```

那么您需要设置图像的比例选项：

```
UIImage * scaledImage = [UIImage alloc];
scaledImage = [[scaledImage initWithCGImage:[resourceImage CGImage] scale:2.0 orientation:UIImageOrientationUp] autorelease]; 
```

然后我相信 imageView 应该缩放它并正确显示

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T16:29:10.330

好吧，您可以将每次调用都包含在 if 语句中，如下所示：

```
if ([[UIScreen mainScreen] respondsToSelector:@selector(scale)]) {
    //do scale stuff here
} 
```

为了避免每次都输入这个，你可以在 UIScreen 上声明一个类别，它在 -realScale 方法或其他东西中使用这个代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T16:21:50.880

尝试这个：

```
+ (UIImage *) onScaleImage:(UIImage *)image width:(int)width
{
    CGImageRef imageRef = image.CGImage;

    NSUInteger nWidth = CGImageGetWidth(imageRef);
    if (nWidth == width)
        return (nil);

    double dScaleFactor = (double)width / (double)nWidth;

    NSUInteger nHeight = (int)((double)CGImageGetHeight(imageRef) * dScaleFactor);

    CGContextRef context = CGBitmapContextCreate(NULL, width, nHeight, CGImageGetBitsPerComponent(imageRef), CGImageGetBytesPerRow(imageRef), CGImageGetColorSpace(imageRef), CGImageGetBitmapInfo(imageRef));

    CGContextSetInterpolationQuality(context, kCGInterpolationHigh);
    CGContextSetShouldAntialias(context, true);

    CGContextDrawImage (context, CGRectMake(0, 0, width, nHeight), imageRef);
    CGImageRef imageRefScaled = CGBitmapContextCreateImage(context);

    // caller must retain
    UIImage *imageScaled = [[UIImage alloc] initWithCGImage:imageRefScaled];

    CGContextRelease (context);
    CGImageRelease (imageRefScaled);

    return (imageScaled);
} 
```

# java - 在 Java 中同时做两件事

> ID：12355542
> 
> 赞同：3
> 
> 时间：2012-09-10T16:13:12.467
> 
> 标签：java

好吧，我正在用 Java 开发一个在线游戏。我有一个客户端和一个服务器。语音系统等待新消息显示如下：

```
public void addSpeech(String msg) {
    String newMsg = parsel10n(msg);
    m_narrator.addSpeech(parsel10n(newMsg));
    while (!m_narrator.getCurrentLine().equalsIgnoreCase(newMsg))
      ;
    while (!m_narrator.getAdvancedLine().equalsIgnoreCase(newMsg))
      ;
 } 
```

问题是.. 应用程序的其余部分由于 while 循环而停止。在这个循环中，我没有看到任何其他玩家移动或看到聊天。有没有一种方法可以在不使用循环触及应用程序（客户端）的其余部分的情况下运行此方法？是否应该涉及线程？我希望你能回答我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-10T16:15:42.383

是的，应该涉及线程。

如果您只想与主执行线程并行启动任务，您可以这样做：

```
new Thread(){
   public void run(){
        addSpeech();
   }
}.start(); 
```

但是您必须检查您的数据结构是否可以从多个线程访问。

你可能想在任务结束时做点什么，等等。所以我建议你找一个关于 java 线程和任务队列的教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T16:19:20.257

使用多线程。查看 java.util.concurrent 包以获取更多详细信息。您可以使用观察者模式来发送信号和通知。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T16:16:55.143

要同时执行多个任务，您需要使用多个线程。

在任何情况下，除了在 GUI 线程上进行微不足道的计算或延迟之外，做任何事情都被认为是不好的做法，否则它可能会锁定一段时间。

# php - Valums 文件上传器：按用户信用限制上传

> ID：12355544
> 
> 赞同：5
> 
> 时间：2012-09-10T16:13:22.860
> 
> 标签：php, javascript, jquery, ajax

我正在使用 Valums 很棒的文件上传器 - [https://github.com/valums/file-uploader](https://github.com/valums/file-uploader)

我想添加的一件事是基于用户帐户余额的限制。

第一张图片始终免费，因此即使您的余额为 0，您也可以上传一张图片。

额外的图像将需要 0.50 的价值或信用。如果他们没有足够的信用，它将显示警报并且不会上传文件。

余额可以从 php 会话变量中接收`$_SESSION['user']['credit']`

这是到目前为止的代码

```
function createUploader(){ 
    var running = 0;    
    var uploader = new qq.FileUploader({
        multiple: true,
        element: $('#file-uploader')[0],
        action: 'classes/upload.item.php',
        allowedExtensions: ['jpg', 'png', 'gif'],
        params: {item: '<?php echo $item_id ?>'},
        onSubmit: function(id, fileName){
            running++;
            $('.button').replaceWith('<a class="button large grey full-width">Please wait...</a>');
        },
        onComplete: function(id, fileName, responseJSON){
            running--;
            $(".thumbnails").append('<li class="span2"> <a class="thumbnail"><img src="<?php echo $path; ?>'+fileName+'" /></a> </li>');
            if(running==0){
              $('.button').replaceWith('<a class="button large green full-width" href="confirm/<?php echo $item_id; ?>">Continue to next step</a>');                                 
            }           

        },
        onCancel: function(id, fileName){
            running--;
        },
        debug: true
    });           
} 
```

抱歉，问题是，您能否就实施我上面描述的内容提供任何建议？

干杯

**编辑：** 我使用以下建议尝试了以下操作（可能不正确）。

我尝试停止文件上传`return false`失败，上传立即开始，似乎被警报暂停，一旦警报关闭，上传完成。

文件说

> onSubmit(String id, String fileName) - 当文件提交到代码的上传者部分时调用。请注意，这并不意味着文件上传将从此时开始。返回 false 以防止提交给上传者。

```
<?php
// count uploaded files
$path = 'uploads/' . $_SESSION['user']['username'] . '/' . $item_id . '/thumbs/s_';
$files = glob($path . '*.*'); 

// has free upload been used yet? incase of page refresh etc
if (count($files) >= 1) {
    $used_free = 'true';
} else {
    $used_free = 'false';
}
?>

<script>
    function createUploader(){ 
        var credit = <?php echo $_SESSION['user']['credit'] ?>;  
        var used_free = <?php echo $used_free ?>; 
        var running = 0; 

            var uploader = new qq.FileUploader({
                multiple: true,
                element: $('#file-uploader')[0],
                action: 'classes/upload.item.php',
                allowedExtensions: ['jpg', 'png', 'gif'],
                params: {item: '<?php echo $item_id ?>'},
                onSubmit: function(id, fileName){   
                    console.log(used_free);
                    if (!used_free) {
                        used_free = 'true';
                        running++;
                        $('.button').replaceWith('<a class="button large grey full-width">Please wait...</a>');
                    } else {
                        $.get('ajax/getCredit.php', function (data) {
                            if (data.credit >= 0.5) {
                                running++;
                                $('.button').replaceWith('<a class="button large grey full-width">Please wait...</a>');
                            } else {
                                alert('you do not have enough credits');
                                return false;
                            }
                        }, "json");
                    }
                },
                onComplete: function(id, fileName, responseJSON){
                    running--;
                    $(".thumbnails").append('<li class="span2"> <a class="thumbnail"><img src="<?php echo $path; ?>'+fileName+'" /></a> </li>');
                    if(running==0){
                      $('.button').replaceWith('<a class="button large green full-width" href="confirm/<?php echo $item_id; ?>">Continue to next step</a>');                                 
                    }           
                },
                onCancel: function(id, fileName){
                    running--;
                },
                debug: true
            });      
    }
</script> 
```

**简化它，这有效**

```
function createUploader(){ 
    var credit = <?php echo $_SESSION['user']['credit'] ?>;  
    var used_free = <?php echo $used_free ?>; 
    var running = 0; 

    var uploader = new qq.FileUploader({
        multiple: true,
        element: $('#file-uploader')[0],
        action: 'classes/upload.item.php',
        allowedExtensions: ['jpg', 'png', 'gif'],
        params: {item: '<?php echo $item_id ?>'},
        onSubmit: function(id, fileName){   
            if (!used_free) {
                used_free = 'true';
                running++;
                $('.button').replaceWith('<a class="button large grey full-width">Please wait...</a>');
            } else {
                if (credit >= 0.5) {
                    running++;
                    credit = credit - 0.5;
                    $('.button').replaceWith('<a class="button large grey full-width">Please wait...</a>');
                } else {
                    alert('you do not have enough credits');
                    return false;
                }
            }
        },
        onComplete: function(id, fileName, responseJSON){
            running--;
            $(".thumbnails").append('<li class="span2"> <a class="thumbnail"><img src="<?php echo $path; ?>'+fileName+'" /></a> </li>');
            if(running==0){
              $('.button').replaceWith('<a class="button large green full-width" href="confirm/<?php echo $item_id; ?>">Continue to next step</a>');                                 
            }           
        },
        onCancel: function(id, fileName){
            running--;
        },
        debug: true
    });      
} 
```

然后我在扣除信用的确认页面上计算上传的文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T16:21:02.037

您可以为您的 javascript 打印一个布尔值，以检查是否允许上传：

```
var allowUpload = <?php echo $_SESSION['user']['credit'] >= 0.5 ? 'true' : 'false' ?>; 
```

当他们尝试上传文件时，您仍然需要验证他们在服务器端是否有足够的积分。

## AJAX/JSON 方法

您可以使用 AJAX 来获取可用积分，让我们使用 PHP 生成一些 JSON。`getCredit.php`：

```
<?php
session_start();
header('Cache-Control: no-cache, must-revalidate');
header('Expires: Mon, 26 Jul 1997 05:00:00 GMT');
header('Content-type: application/json');
echo '{"credit":' . $_SESSION['user']['credit'] . '}'; 
```

然后从您的 JavaScript 中，您可以即时获得积分。

```
$.get('getCredit.php', function (data) {
    if (data.credit >= 0.5) {
        // call uploader code here
    }
}, "json"); 
```

# c++ - 如何从 c++ 接口 cv::Mat 转换为 c IplImage？

> ID：12355547
> 
> 赞同：0
> 
> 时间：2012-09-10T16:13:39.283
> 
> 标签：c++, c, opencv, detect

如何从 c++ 接口 cv::Mat 转换为 c IplImage ？这样我就使用
*了 IplImage * lpl= matimage;*

*和 matimage 包含数据，经过一些操作后我想做逆变换。来自 IplImage* lpl ===> cv::Mat 我可以使用复制数据吗？如何使用？*

 ** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T16:23:00.227

```
cv::Mat img = ....;
IplImage iplImg = img; 
```

然后

```
cv::Mat img2(iplImg); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T07:19:39.710

```
#include "iostream"
#include <opencv2/core/core.hpp>
#include <opencv2/highgui/highgui.hpp>

using namespace std;
using namespace cv;

int main()
{
    Mat image = imread("C:\\lena.jpg");
    IplImage image2 = image;
    cvShowImage("TESTiplimage",&image2);
    imshow("TESTmat",image);
    waitKey(0);

    return 0;
} 
```

...试试这个代码...它对我有用...你应该得到 2 个显示相同图像的窗口..*

# jquery - struts2中的JQuery Grid - 初学者

> ID：12355549
> 
> 赞同：3
> 
> 时间：2012-09-10T16:13:55.543
> 
> 标签：jquery, jquery-ui, struts2, jqgrid, struts2-jquery

我是 struts2 和 JQuery 编程的新手。我是我的应用程序，当调用 loginAction 并且用户是管理员时，我将他们定向到 AdminLoadAction。此操作加载 adminHome.jsp。我需要的是 adminHome.jsp 使用 JQueryGrid 来显示系统中的所有客户。现在我的 AdminLoadAction 返回成功（我使用 jdbc 连接到数据库，所以我查询我的数据库并获取系统中所有客户的列表，这工作正常）。

我一直在尝试逐步找到好的教程，但还没有找到。有人可以知道我需要做些什么改变才能实现这一目标。到目前为止，我已经下载并添加了 struts2-jquery 插件、struts2-jquery-grid 插件和 struts2-json 插件到我的项目中。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T20:10:18.347

你已经看过这张幻灯片了吗？

[http://www.slideshare.net/johannesgeppert1/introduction-into-struts2-jquery-grid-tags](http://www.slideshare.net/johannesgeppert1/introduction-into-struts2-jquery-grid-tags)

另一个很好的起点是研究[Showcase](http://struts.jgeppert.com/struts2-jquery-showcase/index.action)和[Showcase Grid App](http://struts.jgeppert.com/struts2-jquery-grid-showcase/index.action)中的示例。并查看[Grid Tag](http://code.google.com/p/struts2-jquery/wiki/GridTag)周围的 Wiki 页面。

约翰内斯

# jquery - 通过csv文件做js树

> ID：12355552
> 
> 赞同：0
> 
> 时间：2012-09-10T16:14:03.720
> 
> 标签：jquery, csv, tree, automation

我想做 jquery 树，但它会有很多元素，所以手动（填充数据）是一个坏主意，ajax 是一种方法......我怎样才能将我的 csv 数据转换为它？我有像id，parent，name这样的字段。

有什么想法如何自动化吗？以及选择什么库？

# c++ - 以 printf 在 C++ 中的方式转换 unsigned char

> ID：12355555
> 
> 赞同：0
> 
> 时间：2012-09-10T16:14:10.490
> 
> 标签：c++, hex, printf

我有一个`unsigned char`要转换为十六进制的。我知道`printf("%02X", char)`给了我想要的输出，但它被发送到终端，因此没什么用。如何将字符转换为十六进制并以与 printf 相同的方式将其存储在变量中？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T16:16:14.873

怎么样：

```
stringstream ss;
ss << std::hex << std::setw(2) << (unsigned int) x;

cout << ss.str() << endl; 
```

不过，您可能还想再调整`stringstream`一些。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-10T16:15:19.973

改为使用`sprintf`到缓冲区中，例如

```
char str[50];
sprintf(str, "%X02", char); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-10T19:40:08.103

也许是最快的？

```
struct hex_uchar {
   hex_uchar(unsigned char c)
   {
      value[0] = hc[c >> 4];
      value[1] = hc[c & 0xF];
      value[2] = '\0';
   }
   char value[3];
   static char hc[16];
};
char hex_uchar::hc[16] = { '0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 
                           'A', 'B', 'C', 'D', 'E', 'F' }; 

int main() {
   std::cout << hex_uchar('A').value << std::endl;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-10T16:21:12.937

请注意：您没有将其转换为十六进制值，而是转换为以空字符结尾的字符串。将其存储在模型的变量中是一种废话。

# html - 如何垂直对齐输入类型=“文本”中的文本？

> ID：12355557
> 
> 赞同：36
> 
> 时间：2012-09-10T16:14:12.400
> 
> 标签：html, css

我`<input type="text" />`需要设置输入文本的垂直对齐方式。例如中间或顶部。 [http://jsfiddle.net/eSPMR/](http://jsfiddle.net/eSPMr/)

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-10T16:20:59.917

使用填充来伪造它，因为垂直对齐不适用于文本输入。

**[jsFiddle 示例](http://jsfiddle.net/j08691/eSPMr/388/)**

**CSS**

```
.date-input {     
    width: 145px;
    padding-top: 80px;
}​ 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-10T16:34:10.717

另一种方法是使用`line-height`：http: [//jsfiddle.net/DjT37/](http://jsfiddle.net/DjT37/)

```
.bigbox{
    height:40px;
    line-height:40px;
    padding:0 5px;
} 
```

当您需要特定高度时，这往往会更加一致，因为您不需要根据字体大小和所需高度等计算填充。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-09-10T16:31:03.410

```
input[type=text]
{
   height: 15px; 
   line-height: 15px;
} 
```

这是设置垂直中间位置的正确方法。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-07-03T19:05:32.650

`<textarea>`如果您不想使用 CSS 强制它，该元素会自动对齐文本框顶部的文本。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-11-05T13:32:40.013

将其放在 div 标签中似乎是强制执行以下操作的唯一方法：

```
<div style="vertical-align: middle"><div><input ... /></div></div> 
```

可能是像 span 这样的其他标签就像 div 一样工作。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-09-22T20:18:41.047

我在寻找解决自己问题的方法时发现了这个问题。前面的答案依赖于 padding 使文本出现在输入的顶部或底部，或者使用 height 和 line-height 的组合将文本与垂直中间对齐。

这是使用 div 和定位使文本出现在中间的替代解决方案。查看[jsfiddle](https://jsfiddle.net/xk4m2mqg/)。

```
<style type="text/css">
    div {
        display: inline-block;
        height: 300px;
        position: relative;
        width: 500px;
    }

    input {
        height: 100%;
        position: absolute;
        text-align: center; /* Optional */
        width: 100%;
    }
</style>

<div>
    <input type="text" value="Hello world!" />
</div> 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2019-01-05T00:01:46.550

如果垂直对齐不起作用，请使用填充。 `padding-top: 10px;` 它会将文本移到底部或 `padding-bottom: 10px;` 将文本框中的文本移到顶部

调整填充大小，直到它适合你想要的大小。这就是黑客

# python - Python/在 Sage Notebook 中创建图表

> ID：12355559
> 
> 赞同：0
> 
> 时间：2012-09-10T16:14:19.523
> 
> 标签：python, graph, sage

```
import csv

a = csv.reader(open(DATA+'DataA.csv'))

for row in a:
   time = row[1]
   conversion = row[3]
   x_series = time
   y_series = conversion
   scatter_plot(zip(x_series,y_series)) 
```

我正在尝试在 Sage Notebook 中创建散点图。我正在读取 DataA.csv 中的数据，特别是第 1 行和第 3 行。我想根据这些数据创建散点图。一切正常，除了为每个单独的元组创建一个新的散点图，而不是将它们全部放在一个散点图上。关于如何解决此问题的任何想法。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T16:42:04.203

你可能想试试这个。

```
import csv

a = csv.reader(open(DATA+'DataA.csv'))

G = Graphics()

for row in a:
   time = row[1]
   conversion = row[3]
   x_series = time
   y_series = conversion
   G += scatter_plot(zip(x_series,y_series))

G # this will show the plot 
```

我没有你的数据（或任何数据，实际上），所以我无法测试它，但这应该可以正常工作。在 Sage 中添加绘图，然后在`G`给出时它们显示为默认表示。您也可以要求不同的散点图具有不同的颜色......

另外，我更喜欢使用[point](http://www.sagemath.org/doc/reference/sage/plot/point.html#sage.plot.point.point)或者也许`list_plot`为此，但我想这是一个偏好问题。

# google-fusion-tables - 如何使用 Google Fusion Tables php api 设置表格样式？

> ID：12355562
> 
> 赞同：0
> 
> 时间：2012-09-10T16:14:28.913
> 
> 标签：google-fusion-tables

我正在慢慢弄清楚如何使用 v1 api 的点点滴滴，到目前为止，我可以使用服务帐户成功进行身份验证、列出和创建表以及操作表权限。我目前正在尝试以编程方式设置表格样式，但我从服务器收到了 400 个错误请求。我真的不清楚如何生成有效的样式请求，文档根本不清楚。我的表只包含折线，我希望颜色和重量来自两个特定的列。

这是我的代码：

```
$resp = $fusionTables->style->insert($id, new Google_StyleSetting(array(
  "polylineOptions"=> new Google_LineStyle(array(
    "strokeColorStyler" => new Google_StyleFunction(array(
      "kind" => "fromColumn",
      "columnName" => "color"
  )),
  "strokeWeightStyler"=> new Google_StyleFunction(array(
    "kind" => "fromColumn",
    "columnName" => "width"
    ))
  )),
  "isDefaultForTable" => false
  ))
); 
```

在[使用 API 文档](https://developers.google.com/fusiontables/docs/v1/using#CreatingStyle)时，我只需要为 polylineOptions 提供两个样式器似乎是合理的。这与[参考 api 文档](https://developers.google.com/fusiontables/docs/v1/reference/style/insert "文件")有些不一致，该文档似乎表明有 6 个必需参数来为所有可能的样式器指定列名，这似乎是错误的。无论如何，我确实尝试了一个使用样式器配置点、线和多边形的版本，如参考文档所示，但一无所获。我还尝试提供其他可选值，包括样式名称和 tableId。

任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T16:43:35.683

原来我比我想象的更接近。仔细阅读文档，似乎样式器的“种类”属性必须`fusiontables#fromColumn`而不是`fromColumn`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-02T01:49:13.357

最新的 PHP 客户端库 v2.0 已重命名这些类。所以现在的代码变成了：

```
$client = new Google_Client();
$client->setAuthConfig('oauth-credentials.json');
$client->addScope("https://www.googleapis.com/auth/fusiontables");

if (isset($_SESSION['access_token']) && $_SESSION['access_token']) 
{
    $client->setAccessToken($_SESSION['access_token']);  
    $service = new Google_Service_Fusiontables($client);
} 

$tableId = "{enter_your_table_id}";

$style = $service->style->insert($tableId, new Google_Service_Fusiontables_StyleSetting(array(
        'markerOptions' => new Google_Service_Fusiontables_PointStyle(array(
            "iconStyler" => new Google_Service_Fusiontables_StyleFunction(array(
                "kind" => "fusiontables#fromColumn",
                "columnName" => "markerColor"
            ))
        )),
        'polylineOptions' => new Google_Service_Fusiontables_LineStyle(array(
            "strokeColorStyler" => new Google_Service_Fusiontables_StyleFunction(array(
                "kind" => "fusiontables#fromColumn",
                "columnName" => "polylineStrokeColor"
            )),
            "strokeWeightStyler"=> new Google_Service_Fusiontables_StyleFunction(array(
                "kind" => "fusiontables#fromColumn",
                "columnName" => "polylineStrokeWeight"
            ))
        )),
        'polygonOptions' => new Google_Service_Fusiontables_PolygonStyle(array(
            "fillColorStyler" => new Google_Service_Fusiontables_StyleFunction(array(
                "kind" => "fusiontables#fromColumn",
                "columnName" => "polygonFillColor"
            )),
            "strokeColorStyler" => new Google_Service_Fusiontables_StyleFunction(array(
                "kind" => "fusiontables#fromColumn",
                "columnName" => "polylineStrokeColor"
            )),
            "strokeWeightStyler"=> new Google_Service_Fusiontables_StyleFunction(array(
                "kind" => "fusiontables#fromColumn",
                "columnName" => "polylineStrokeWeight"
            ))
        )),
        "isDefaultForTable" => true
        ))
    ); 
```

更多信息可以在这里找到：
（1）**[创建样式](https://developers.google.com/fusiontables/docs/v2/using#CreatingStyle)**
（2）**[参考](https://developers.google.com/fusiontables/docs/v2/reference/style)**

# sql - 需要帮助使 MERGE 语句起作用

> ID：12355564
> 
> 赞同：1
> 
> 时间：2012-09-10T16:14:37.817
> 
> 标签：sql, sqlanywhere

我的 SQL Anywhere 12.0.1 数据库有两个表：

```
CREATE TABLE "ListDetails" (
    ListDetailId    UNIQUEIDENTIFIER    NOT NULL PRIMARY KEY,
    ListId          UNIQUEIDENTIFIER    NOT NULL,
    CountryId       VARCHAR(3)          NULL REFERENCES "Countries"      ( CountryId ) DEFAULT 'USA',
    LocaleCode      VARCHAR(3)          NULL REFERENCES "Locales"        ( LocaleCode ),
    Plate           VARCHAR(50)         NULL,
    HashedPlate     UNIQUEIDENTIFIER    NULL,
    AlarmClassId    INT                 NULL REFERENCES "AlarmClasses"   ( AlarmClassId ),
    BeginDate       DATETIME            NULL,
    EndDate         DATETIME            NULL,
    ListPriorityId  INT                 NULL REFERENCES "ListPriorities" ( ListPriorityId ),
    VehicleTypeId   INT                 NULL REFERENCES "VehicleTypes"   ( VehicleTypeId ),
    PlateClassId    INT                 NULL REFERENCES "PlateClasses"   ( PlateClassId ),
    MakeId          INT                 NULL REFERENCES "VehicleBrands"  ( VehicleBrandId ),
    ModelId         INT                 NULL REFERENCES "VehicleModels"  ( VehicleModelId ),
    "Year"          INT                 NULL,
    ColorId         INT                 NULL REFERENCES "VehicleColors"  ( VehicleColorId ),
    Notes           VARCHAR(8000)       NULL,
    OfficerNotes    VARCHAR(8000)       NULL,
    IsNewRow        BIT                 NOT NULL DEFAULT '1',
    CreatedDate     DATETIME            NOT NULL DEFAULT NOW(),
    i_active        SMALLINT            NOT NULL DEFAULT 1,
    ModifyDate      DATETIME            NULL,
    Subscriber      UNIQUEIDENTIFIER    NULL,
    FromToVersion   BIGINT              NOT NULL,
    FromVersion     BIGINT,
    InstanceId      UNIQUEIDENTIFIER    NOT NULL UNIQUE
); 
```

和：

```
CREATE GLOBAL TEMPORARY TABLE "ListDetailsLoad" ( 
    ListDetailId    UNIQUEIDENTIFIER    NOT NULL,
    ListId          UNIQUEIDENTIFIER    NOT NULL,
    CountryId       VARCHAR(3)          NULL,
    LocaleCode      VARCHAR(3)          NULL,
    Plate           VARCHAR(50)         NULL,
    HashedPlate     UNIQUEIDENTIFIER    NULL,
    AlarmClassId    INT                 NULL,
    BeginDate       DATETIME            NULL,
    EndDate         DATETIME            NULL,
    ListPriorityId  INT                 NULL,
    VehicleTypeId   INT                 NULL,
    PlateClassId    INT                 NULL,
    MakeId          INT                 NULL,
    ModelId         INT                 NULL,
    "Year"          INT                 NULL,
    ColorId         INT                 NULL,
    Notes           VARCHAR(8000)       NULL,
    OfficerNotes    VARCHAR(8000)       NULL,
    Subscriber      UNIQUEIDENTIFIER    NULL,
    InstanceId      UNIQUEIDENTIFIER    NOT NULL
) NOT TRANSACTIONAL; 
```

我的程序（用 C# 编写）对 ListDetailsLoad 表执行大容量复制，然后运行存储过程。存储过程的工作是将数据移动到 ListDetails 表中。这是存储过程：

```
MERGE INTO "ListDetails" AS dst
USING "ListDetailsLoad" AS src
ON dst.ListDetailId = src.ListDetailId
WHEN MATCHED THEN UPDATE 
    SET ListDetailId    = src.ListDetailId,
        ListId          = src.ListId,
        CountryId       = src.CountryId,
        LocaleCode      = src.LocalCode,
        Plate           = src.Plate,
        HashedPlate     = src.HashedPlate,
        AlarmClassId    = src.AlarmClassId,
        BeginDate       = src.BeginDate,
        EndDate         = src.EndDate,
        ListPriorityId  = src.ListPriorityId,
        VehicleTypeId   = src.VehicleType,
        PlateClassId    = src.PlateClassId,
        MakeId          = src.MakeId,
        ModelId         = src.ModelId,
        "Year"          = src."Year",
        ColorId         = src.ColorId,
        Notes           = src.Notes,
        OfficerNotes    = src.OfficerNotes,
        ModifyDate      = NOW(),
        FromToVersion   = dbVersion.NEXTVAL,
        FromVersion     = NULL,
        Subscriber      = src.Subscriber,
        InstanceId      = src.InstanceId
    WHEN NOT MATCHED THEN INSERT
        ( ListDetailId, ListId,        CountryId,  LocaleCode,     Plate,         HashedPlate,
          AlarmClassId, BeginDate,     EndDate,    ListPriorityId, VehicleTypeId, PlateClassId,
          MakeId,       ModelId,       "Year",     ColorId,        Notes,         OfficerNotes,
          ModifyDate,   FromToVersion, Subscriber, FromVersion,    InstanceId )
    VALUES
        ( src.ListDetailId, src.ListId,        src.CountryId,  src.LocaleCode,     src.Plate,         src.HashedPlate,
          src.AlarmClassId, src.BeginDate,     src.EndDate,    src.ListPriorityId, src.VehicleTypeId, src.PlateClassId,
          src.MakeId,       src.ModelId,       src."Year",     src.ColorId,        src.Notes,         src.OfficerNotes,
          NOW(),            dbVersion.NEXTVAL,     NULL,       src.Subscriber, src.InstanceId );

    TRUNCATE TABLE "ListDetailsLoad";
END; 
```

这编译得很好。问题是当我运行它时，我收到以下错误消息：

```
Could not execute statement.  Column "ListDetailId" found in more than one table or it is used more than once in the SELECT list -- it needs a correlation name. 
```

如何修复 MERGE 语句？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T16:18:19.027

它告诉你问题是什么。:)

在您的语句的左侧`UPDATE`，没有相关名称，并且它不知道`ListDetailId`要更新哪个。这应该有效：

```
USING "ListDetailsLoad" AS src
ON dst.ListDetailId = src.ListDetailId
WHEN MATCHED THEN UPDATE 
    SET dst.ListDetailId    = src.ListDetailId,
        dst.ListId          = src.ListId,
        dst.CountryId       = src.CountryId,
        dst.LocaleCode      = src.LocalCode,
        dst.Plate           = src.Plate,
        dst.HashedPlate     = src.HashedPlate,
        dst.AlarmClassId    = src.AlarmClassId,
        dst.BeginDate       = src.BeginDate,
        dst.EndDate         = src.EndDate,
        dst.ListPriorityId  = src.ListPriorityId,
        dst.VehicleTypeId   = src.VehicleType,
        dst.PlateClassId    = src.PlateClassId,
        dst.MakeId          = src.MakeId,
        dst.ModelId         = src.ModelId,
        dst."Year"          = src."Year",
        dst.ColorId         = src.ColorId,
        dst.Notes           = src.Notes,
        dst.OfficerNotes    = src.OfficerNotes,
        dst.ModifyDate      = NOW(),
        dst.FromToVersion   = dbVersion.NEXTVAL,
        dst.FromVersion     = NULL,
        dst.Subscriber      = src.Subscriber,
        dst.InstanceId      = src.InstanceId
    WHEN NOT MATCHED THEN INSERT
        ( ListDetailId, ListId,        CountryId,  LocaleCode,     Plate,         HashedPlate,
          AlarmClassId, BeginDate,     EndDate,    ListPriorityId, VehicleTypeId, PlateClassId,
          MakeId,       ModelId,       "Year",     ColorId,        Notes,         OfficerNotes,
          ModifyDate,   FromToVersion, Subscriber, FromVersion,    InstanceId )
    VALUES
        ( src.ListDetailId, src.ListId,        src.CountryId,  src.LocaleCode,     src.Plate,         src.HashedPlate,
          src.AlarmClassId, src.BeginDate,     src.EndDate,    src.ListPriorityId, src.VehicleTypeId, src.PlateClassId,
          src.MakeId,       src.ModelId,       src."Year",     src.ColorId,        src.Notes,         src.OfficerNotes,
          NOW(),            dbVersion.NEXTVAL,     NULL,       src.Subscriber, src.InstanceId );

    TRUNCATE TABLE "ListDetailsLoad";
END; 
```

# javascript - 如何将href设置为不同的值？

> ID：12355566
> 
> 赞同：0
> 
> 时间：2012-09-10T16:14:54.343
> 
> 标签：javascript, html

如何根据变量值设置 href 的值。截至目前，我有以下代码：

`<a href="javascript:clearDate('txtDueDate');"`

我需要的东西如下所示。`udisable`如果为真，我希望禁用 href 值。

```
var udisable = '<%=dueDateDisabled %>';
if (udisable == "false")
         <a href="javascript:clearDate('txtDueDate');"
      else
          <a href="javascript:void(0);" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T16:20:10.353

尝试

```
<a href="javascript:if (udisable == "false) {clearDate('txtDueDate');}"/> 
```

甚至更好：创建自己的函数来封装它：

```
// In some JavaScript file:
function clearDate2(dateString) {
    if (udisable == "false") {
        clearDate(datestring);
    }   
}

-----

<a href="javascript:clearDate2('txtDueDate');"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T16:20:40.893

看起来这是 ASP.Net？

如果是这样，您需要问 - 我在哪里做出这个决定？在客户端还是在服务器上？在这种情况下，您确实*需要*在服务器上执行此操作，并且确实看起来像您打算的那样，但随后也与客户端 javascript 混淆了。以下块将输出一个或其他锚标记：

```
<% if(dueDateDisabled) { %>
  <a href="javascript:clearDate('txtDueDate');" <% }
   else { %>
  <a href="javascript:void(0)" <% } %> 
```

*注意我已经离开了锚标签的其余部分，因为你在你的问题中做了*

现在，当服务器呈现页面时，您只会在页面输出中看到一个或另一个锚点。

您的原始代码将不起作用，因为您不能像那样混合 javascript 和 html - 您需要在服务器上执行此操作；除非您想`document.write`在客户端上执行（在这种情况下我不建议这样做），或者直接或通过 jQuery 之类的东西在 javascript 中操作 DOM。正如我所说，这真的是你不想做的。

# ruby-on-rails - 使用 Nginx 的 Rails 多阶段环境

> ID：12355577
> 
> 赞同：3
> 
> 时间：2012-09-10T16:15:18.853
> 
> 标签：ruby-on-rails, nginx, environment, env

我创造了新的环境“舞台”。在本地它有效。我这样运行它：

```
RAILS_ENV=staging passenger start 
```

在服务器上，我使用 Nginx + 乘客。在我写的虚拟主机设置中：

```
server {
        listen       443;
        server_name  test.myapp.com;
        rails_env staging;
        root /home/admin/myapp/current/public; # <-- be sure to point to 'public'
        passenger_enabled on;
        ssl on;
        ssl_certificate /home/admin/ssl/server.crt;
        ssl_certificate_key /home/admin/ssl/server.key;
}
server {
        listen 80;
        server_name  test.myapp.com;
       root /home/admin/myapp/current/public;  
        rewrite ^ https://$server_name$request_uri? permanent;
} 
```

但应用程序仍在生产中运行。它加载生产数据库，而不是暂存。重新加载 Nginx 没有帮助。怎么了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T16:31:53.353

我认为您缺少`rails_env`设置。

```
server {
  ...
  rails_env staging;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T19:11:43.593

用户的 .bashrc 或 .zshrc 是否包含 RAILS_ENV 设置？如果是这样，它可能会覆盖 NGINX 设置。

# c# - 使用触发器更改已经绑定到视图模型的属性

> ID：12355580
> 
> 赞同：2
> 
> 时间：2012-09-10T16:15:24.150
> 
> 标签：c#, wpf, mvvm, binding, triggers

我想制作一个单选按钮，这样当按钮获得焦点时，它就会被选中。我有一个我想要实现的例子：

```
<Style x:Key="RadioStyle" TargetType="RadioButton">
    <Setter Property="IsChecked" Value="{Binding MyBoolean, Mode=TwoWay}"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="RadioButton">
                <Border Name="RadioBorder"
                        Margin="4">
                    <ContentPresenter/>
                </Border>
                <ControlTemplate.Triggers>
                    <Trigger Property="IsChecked" Value="True">
                        <Setter TargetName="RadioBorder" Property="Background" Value="Red"/>
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
    <Style.Triggers>
        <Trigger Property="IsFocused" Value="True">
            <Setter Property="IsChecked" Value="True"/>
        </Trigger>
    </Style.Triggers>
</Style> 
```

问题：

当视图模型中的 MyBoolean 发生更改时，单选按钮将被选中。当我单击或选择单选按钮时，MyBoolean 保持不变。如果我删除样式触发器，问题就会消失，但是我需要能够选择焦点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T05:13:51.590

我已经重现了你的问题。但一切正常。

问题可能是`GroupName`单选按钮的属性没有定义。为两个单选按钮的 GroupName 指定相同的名称。

前任：

```
<RadioButton Content="No" GroupName="group1" />
<RadioButton Content="Yes" GroupName="group1" /> 
```

这是我的完整 XAML：

```
<Window x:Class="RadioButtonFocus.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
        Title="MainWindow" Height="350" Width="525">

    <Grid Name="mainGrid">
        <StackPanel Orientation="Horizontal">

            <RadioButton Content="No" GroupName="group1" IsChecked="{Binding IsNoChecked}">

                <i:Interaction.Triggers>
                    <i:EventTrigger EventName="MouseEnter">
                        <i:InvokeCommandAction Command="{Binding CheckNoCommand}" />
                    </i:EventTrigger>
                </i:Interaction.Triggers>

            </RadioButton>

            <RadioButton Content="Yes" GroupName="group1" IsChecked="{Binding IsYesChecked}">

                <i:Interaction.Triggers>
                    <i:EventTrigger EventName="MouseEnter">
                        <i:InvokeCommandAction Command="{Binding CheckYesCommand}" />
                    </i:EventTrigger>
                </i:Interaction.Triggers>

            </RadioButton>

        </StackPanel>
    </Grid>
</Window> 
```

视图模型

```
public class MainViewModel : ViewModelBase
{
    #region Declarations

    private bool isNoChecked;
    private bool isYesChecked;

    private ICommand checkNoCommand;
    private ICommand checkYesCommand;
    #endregion

    #region Properties

    /// <summary>
    /// Gets or sets a value indicating whether this instance is no checked.
    /// </summary>
    /// <value>
    ///     <c>true</c> if this instance is no checked; otherwise, <c>false</c>.
    /// </value>
    public bool IsNoChecked
    {
        get
        {
            return isNoChecked;
        }
        set
        {
            isNoChecked = value;
            NotifyPropertyChanged("IsNoChecked");
        }
    }

    /// <summary>
    /// Gets or sets a value indicating whether this instance is yes checked.
    /// </summary>
    /// <value>
    ///     <c>true</c> if this instance is yes checked; otherwise, <c>false</c>.
    /// </value>
    public bool IsYesChecked
    {
        get
        {
            return isYesChecked;
        }
        set
        {
            isYesChecked = value;
            NotifyPropertyChanged("IsYesChecked");
        }
    }

    #endregion

    #region Commands

    /// <summary>
    /// Gets the check no command.
    /// </summary>
    /// <value>The check no command.</value>
    public ICommand CheckNoCommand
    {
        get
        {
            if (checkNoCommand == null)
            {
                checkNoCommand = new RelayCommand(param => this.CheckNo(),
                    null);
            }
            return checkNoCommand;
        }
    }

    /// <summary>
    /// Gets the check yes command.
    /// </summary>
    /// <value>The check yes command.</value>
    public ICommand CheckYesCommand
    {
        get
        {
            if (checkYesCommand == null)
            {
                checkYesCommand = new RelayCommand(param => this.CheckYes(),
                    null);
            }
            return checkYesCommand;
        }
    }

    #endregion

    #region Private Methods

    /// <summary>
    /// Changes the checked.
    /// </summary>
    private void CheckNo()
    {
        this.IsNoChecked = true;
    }

    /// <summary>
    /// Checks the yes.
    /// </summary>
    private void CheckYes()
    {
        this.IsYesChecked = true;
    }

    #endregion
} 
```

注意：这里我使用了交互库。您必须安装可再发行组件才能运行此示例。你可以从[这里下载](http://www.microsoft.com/en-us/download/details.aspx?id=10801)

# ruby - 搜索文本然后选择父元素？（红宝石）

> ID：12355582
> 
> 赞同：4
> 
> 时间：2012-09-10T16:15:26.260
> 
> 标签：ruby, watir

我想在 html 中搜索文本，然后选择元素的父元素，以便我可以使用它将引用 ID 存储为字符串。（我使用 watir 来做这件事，因为它的目的是自动化测试）

所以这里有一个例子：

```
<html>
     <body>
         <div id="container">
             <span class="story">
                 <span>
                     ref4040
                 </span>
             </span>
             <div id="text">
                 example
             </div>
         </div>
     </body>
</html> 
```

有没有办法可以使用 ruby​​ 搜索文本“示例”然后选择父级，以便我可以将跨度内的参考 ID 作为字符串存储？

（我知道您可以在此示例中选择 div 然后选择跨度的简单方法，但在我实际从事的项目中，这是不可能的。唯一可能的方法是通过搜索文本然后选择参考。）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-10T16:19:09.490

你可以通过做得到父元素`.parent`。

因此，您可以执行以下操作：

```
browser.div(:text, 'example').parent.span(:class, 'story').text 
```

# c# - 调用“Workspace.PendAdd”不添加项目

> ID：12355585
> 
> 赞同：2
> 
> 时间：2012-09-10T16:15:39.327
> 
> 标签：c#, tfs-sdk

我有以下函数在两个新项目的循环中被调用以添加到源代码管理中。循环的每次迭代都会获取源代码，将其复制到文件夹中，创建一个 tfs 团队项目，为该项目创建一个工作区，然后尝试将代码添加到源代码管理中。

```
static void Main(string[] args) {
    var tfsWorkItems = _<IWorkItems>();
    var workItems = tfsWorkItems.GetProjectsToMigrate();
    var tfs = _<ITfs>();
    var logFilePath = new DirectoryInfo("C:\\log");
    var workingDirectory = new DirectoryInfo("C:\\m");
    Cleanup(workItems, tfs, logFilePath, workingDirectory);
    var svn = _<ISvn>();
    var app = _<IApplication>();
    foreach (var workItem in workItems)
    {
        var root = Path.Combine(workingDirectory.FullName, workItem.Id.ToString());
        var svnBase = Path.Combine(root, "s");
        var localWorkspacePath = Path.Combine(root, "t");
        var tfsBase = Path.Combine(localWorkspacePath, workItem.TfsProjectName, "Main");
        var tfsProject = workItem.ProjectType.ToLower() == "php" ? Path.Combine(tfsBase, "src")
                                                                    : tfsBase;
        svn.CheckoutFromSvn(workItem.SvnLocation, svnBase);
        app.CopyToTfsFolderStructure(svnBase, tfsProject);
        tfs.CreateTeamProject(workItem.TfsProjectName, logFilePath);
        tfs.CreateWorkspace(workItem.WorkspaceName, localWorkspacePath);
        tfs.AddToSourceControl(workItem.WorkspaceName, localWorkspacePath, workItem.TfsProjectName);
    }
} 
```

有两个项目。第一个项目正常工作，但第二个项目没有。第二个项目创建项目和工作区，但在 AddToSourceControl

```
public void AddToSourceControl(string workspaceName, string localPath, string projectName) {
    var tfs = new TfsTeamProjectCollection(_collection);
    var vcs = tfs.GetService<VersionControlServer>();
    var user = vcs.AuthorizedUser;
    var workspace = vcs.GetWorkspace(workspaceName, user);
    var serverPath = workspace.GetServerItemForLocalItem(Path.Combine(localPath, projectName, "Main"));
    var itemSpec = new ItemSpec[] {
        new ItemSpec(serverPath, RecursionType.Full)
    };
    workspace.PendAdd(serverPath, true);

    // doesn't return anything
    var pendingSets = vcs.QueryPendingSets(
        itemSpec, workspace.Name, user, true);
    var pendingChanges = pendingSets.Aggregate(new List<PendingChange>(), (acc, item) => {
        acc.AddRange(item.PendingChanges);
        return acc;
    });
    var parameters = new WorkspaceCheckInParameters(pendingChanges, "svn to tfs migration") {
        OverrideGatedCheckIn = ((CheckInOptions2)vcs.SupportedFeatures & CheckInOptions2.OverrideGatedCheckIn) == CheckInOptions2.OverrideGatedCheckIn,
        PolicyOverride = new PolicyOverrideInfo("migration triggered check-in", null),
        SuppressEvent = true,
    };
    workspace.CheckIn(parameters);
} 
```

`workspace.PendAdd(serverPath, true)`总是为第二个项目返回零，无论哪个项目是第二个。第一个项目总是正确完成。哪个项目是第二个并不重要。第二个项目总是返回零项。我显然希望所有项目都正确添加到源代码管理中。这里发生了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-11T14:29:11.457

我不知道您的应用程序为什么不工作，但是 TFS API 能够创建多个工作区并从中签入，而无需处理任何东西或调用 GC 或类似的任何奇怪的东西。

这是一个示例程序，根据您发布到连接站点的程序进行了修改，它表现出正确的行为：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Microsoft.TeamFoundation.Client;
using Microsoft.TeamFoundation.VersionControl.Client;
using System.IO;
using Microsoft.TeamFoundation.VersionControl.Common;

namespace AddToSourceControl
{
    class Program
    {
        static void Main(string[] args)
        {
            try
            {
                Uri serverUri = new Uri(args[0]);
                string serverPath = args[1];
                string localPath = args[2];

                for (int i = 0; i < 5; i++)
                {
                    string uniqueId = Guid.NewGuid().ToString();

                    if (i > 0)
                    {
                        Console.WriteLine();
                    }

                    Console.WriteLine("Creating a workspace and checking in with id " + uniqueId);

                    TfsTeamProjectCollection connection = new TfsTeamProjectCollection(serverUri);
                    VersionControlServer vcs = connection.GetService<VersionControlServer>();

                    string uniqueServerPath = VersionControlPath.Combine(serverPath, uniqueId);
                    string uniqueFolder = Path.Combine(localPath, uniqueId);

                    Workspace workspace = vcs.CreateWorkspace(uniqueId, vcs.AuthorizedUser, "", new WorkingFolder[] {
                        new WorkingFolder(uniqueServerPath, uniqueFolder)
                    });

                    Console.WriteLine("Created TFS workspace " + uniqueId);

                    CheckinLocalFolder(serverUri, localPath, uniqueId);
                }
            }
            catch (Exception e)
            {
                Console.WriteLine("Failed: " + e);
            }
        }

        private static void CheckinLocalFolder(Uri serverUri, string localPath, string uniqueId)
        {
            TfsTeamProjectCollection connection = new TfsTeamProjectCollection(serverUri);
            VersionControlServer vcs = connection.GetService<VersionControlServer>();

            string uniqueFolder = Path.Combine(localPath, uniqueId);
            string uniqueFile = Path.Combine(uniqueFolder, uniqueId + ".txt");

            Workspace workspace = vcs.GetWorkspace(uniqueFolder);

            Console.Out.WriteLine("Found workspace " + workspace.Name);

            // Create a local folder with a file in it
            Directory.CreateDirectory(uniqueFolder);
            using (TextWriter output = new StreamWriter(uniqueFile))
            {
                output.WriteLine("This is " + uniqueId);
                output.Close();
            }

            Console.WriteLine("Created file " + uniqueFile);

            workspace.PendAdd(uniqueFolder, true);

            PendingChange[] pendingChanges = workspace.GetPendingChanges();

            Console.WriteLine("Pended changes:");
            foreach (PendingChange pendingChange in pendingChanges)
            {
                Console.WriteLine(" " + pendingChange.LocalItem + " (" + pendingChange.ChangeType + ")");
            }

            int changeset = workspace.CheckIn(pendingChanges, "Test from id " + uniqueId);

            Console.WriteLine("Checked in " + pendingChanges.Length + " as changeset " + changeset);
        }
    }
} 
```

所以我建议问题出在你的代码的其他地方。但是，如果您可以生成一个[简短的、自包含的示例](http://sscce.org)来展示该问题而无需许多抽象层，那将很有帮助。

一些有用的提示：

**确保您的工作区映射设置正确**：否则，`PendAdd`递归调用实际上不会添加任何内容。

**确保文件在本地存在**：出于同样的原因。

**侦听错误：** TFS API 有几个可以通知消费者的事件——其中一个特别有用的是“非致命”错误通知。在许多操作中，操作的一部分可能会失败，而不是退出或抛出异常，而是会引发“非致命”并且操作将继续。

例如，当您向其中添加多个路径`PendAdd`并且其中一个失败时（例如，因为路径被锁定。）如果不听取非致命错误，您将不会知道该路径已从待处理的更改中排除。（尽管您会知道由于查看返回码而排除*了路径。）*

如果您有`VersionControlServer vcs`：

```
public class Example
{
    static void Main(string[] args)
    {
        VersionControlServer vcs = ConnectToServer(); // ... etc ...
        vcs.NonFatalError += Example.OnNonFatalError;
    }

    internal static void OnNonFatalError(Object sender, ExceptionEventArgs e)
    {
        if (e.Exception != null)
        {
            Console.Error.WriteLine("  Non-fatal exception: " + e.Exception.Message);
        }
        else
        {
            Console.Error.WriteLine("  Non-fatal failure: " + e.Failure.Message);
        }
    }
} 
```

*（请注意，此示例取自 Buck Hodges 有用的[客户端 API 示例](http://blogs.msdn.com/b/buckh/archive/2012/03/10/team-foundation-version-control-client-api-example-for-tfs-2010-and-newer.aspx)博客文章。）*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-03-24T22:09:37.497

我遇到了同样的问题（即使是 MSDN 示例也无法在我的机器上运行），但听[非致命错误](https://msdn.microsoft.com/en-us/library/microsoft.teamfoundation.versioncontrol.client.versioncontrolserver.nonfatalerror(v=vs.120).aspx)提示我在调用 PendAdd**之前调用**[Workstation.EnsureUpdateWorkspaceInfoCache 。](https://msdn.microsoft.com/en-us/library/bb139687(v=vs.120).aspx) 这为我解决了。

 *** * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-10T07:33:36.210

我被命令 PenAdd 卡住了，就像 Wobuntu 一样，命令：

```
Workstation.Current.EnsureUpdateWorkspaceInfoCache( _versionControl, _versionControl.AuthenticatedUser); 
```

为我解决了这个问题。

您需要在命令 PenAdd 之前调用此方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-02-05T11:22:58.753

```
Workstation.Current.EnsureUpdateWorkspaceInfoCache(
                                                _versionControl, 
                                                _versionControl.AuthenticatedUser
                                               ); 
```

这是正确的解决方案，它对我有用。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-11T12:20:32.977

我已经想出了解决这个问题的方法。我必须创建一个单独的控制台应用程序，其中包含`AddToSourceControl`方法中的代码并通过类调用控制台应用程序`System.Diagnostics.Process`。在整个程序退出之前，不能正确释放 TFS API 内部的某些内容。**

# jenkins - 如何在 cloudbees 中强行杀死 Jenkins 构建？

> ID：12355588
> 
> 赞同：2
> 
> 时间：2012-09-10T16:15:47.040
> 
> 标签：jenkins, cloudbees

我在 Cloudbees Jenkins 中有一个项目已经卡住了 12 个小时。该构建似乎已经完成了它应该做的大部分工作（将工件上传到存储库），但日志文件的最后一行显示：

> 由于全局超时（480 分钟后），构建超时。将构建标记为已中止。

当我单击红色的“X”终止构建时，没有任何反应。

我之前通过手动重新启动从属服务器和主机来运行我自己的 Jenkins 服务器时已经处理过这个问题，但我不知道如何使用 Cloudbees 来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T23:04:20.597

处理此问题的最可靠方法是仅使用 /restart URL 重新启动您的实例。

# iphone - UIImagePickerControllerOriginalImage 与原始资产数据

> ID：12355589
> 
> 赞同：8
> 
> 时间：2012-09-10T16:15:50.530
> 
> 标签：iphone, xcode, ios5, alassetslibrary, uiimagepngrepresentation

在我正在开发的应用程序中，我使用的是用户从他们的相册中选择的图像。我需要将该照片的高分辨率版本上传到我的服务器。

我正在使用 imagePickerController 并且我确定我有 2 个选项

*   使用 UIImagePickerControllerOriginalImage 中的 UIImage
*   通过使用 UIImagePickerControllerReferenceURL 和 ALAssetsLibrary assetForURL 获取原始资产（我不喜欢这样，因为它会提示用户使用他们当前的位置，我不需要）

我的问题是......**如果我使用第一个选项和第二个选项，图像质量有什么区别吗？**

```
-(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info{

    //option 1
            UIImage *image = [info objectForKey:@"UIImagePickerControllerOriginalImage"];
            NSData *imgData = UIImagePNGRepresentation(image);

    // option 2 (will prompt user to allow use of current location)
            NSURL *imgURL = [info objectForKey:@"UIImagePickerControllerReferenceURL"];
            __block NSData* imgData;

            ALAssetsLibrary *assetLibrary=[[ALAssetsLibrary alloc] init];

            [assetLibrary assetForURL:img resultBlock:^(ALAsset *asset)
             {
                 ALAssetRepresentation *rep = [asset defaultRepresentation];
                 Byte *buffer = (Byte*)malloc(rep.size);
                 NSUInteger buffered = [rep getBytes:buffer fromOffset:0.0 length:rep.size error:nil];
                 imgData = [NSData dataWithBytesNoCopy:buffer length:buffered freeWhenDone:YES]; 
             }
                       failureBlock:^(NSError *err) {
                             NSLog(@"Error: %@",[err localizedDescription]);
                         }]; 
        } 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-19T19:10:24.557

我使用这两个选项进行了比较图像的测试。使用选项 1，图像是两倍大（4.22 MB 对 2.04 MB）。在 Photoshop 中查看照片，质量似乎没有任何重大差异。在查看级别时，选项 1 创建的级别并不那么平滑（下图）。查看文件属性时，选项 1 创建的文件缺少选项 2 创建的文件所具有的一些“原点”、“相机”和“高级照片”选项。我还没有决定要使用哪种方式，但希望这些信息对其他人有所帮助！

![Photoshop 中的级别](../Images/5fc174d2d8eda2bca76bb76fff3ffafa.png)

# cygwin - 为什么 Windows Git bash shell 上的 Ctrl-Z 会失败？

> ID：12355591
> 
> 赞同：12
> 
> 时间：2012-09-10T16:16:08.183
> 
> 标签：cygwin, msysgit, git-bash

我有时必须在 Windows 中工作，这通常意味着使用 Bash shell。如果我（例如）在`vim`( *not* `gvim` ) 中打开了几个文件，并且我点击`Ctrl``Z`短暂返回 shell 并在返回之前做一些事情`vim`，而不是暂停我的`vim`进程 Git Bash 创建一个新的 DOS shell。这是我想要的最后一件事。 [谷歌搜索没有任何用处](https://www.google.com/search?q=Why+does+control+z+on+Windows+Git+bash+shell+fail%3F&sugexp=chrome,mod=7&sourceid=chrome&ie=UTF-8&safe=active)（在这个时间点 - 我未来的 YMMV）。到底是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-30T07:12:43.963

*如果我（例如）在 vim（不是 gvim）中打开了几个文件，并且我点击 ^Z 以短暂返回 shell 并在返回 vim 之前做一些事情，而不是暂停我的 vim 进程 Git Bash 创建一个新的 DOS壳。*

如果您在 git bash 中执行其他进程，CTRL-Z 也不会暂停它们。Vim 解决了这个问题，而是创建了一个 shell 来实现类似的结果。Vim 是 windows 中不需要 bash 的工具，而 windows 命令提示符必须安装在 windows 机器中。我认为这是 Windows 二进制程序的安全选择。

*这是我想要的最后一件事。谷歌搜索没有任何用处（在这个时间点 - 我未来的 YMMV）。到底是怎么回事？*

我的猜测是 vim 有 CTRL-Z 映射来创建 DOS shell。如果你想创建一个 bash shell，你可以输入：

`:!sh`

您将在 bash shell 中执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T12:01:51.310

我猜这是因为 Windows 没有实现 POSIX 挂起进程 API。我有同样的问题，还没有找到一个通用的解决方案。但是对于特定的常见情况（例如 gvim），一种解决方法是在 PATH 中的某处（例如 /c/bin/gvim）中创建一个脚本

```
 #!/bin/env bash
   /c/Program\ Files\ \(x86\)/Vim/vim73/gvim.exe $@ & 
```

# css - 在此 CSS 上将文本和图像右对齐

> ID：12355594
> 
> 赞同：-1
> 
> 时间：2012-09-10T16:16:19.287
> 
> 标签：css, zurb-foundation

我在这里遇到了一个小问题，找不到解决方案，所以我在这里寻求帮助。我正在建立一个[网站](http://comvivem.treswd.com/net/)，我使用[Foundation Zurb](http://foundation.zurb.com/)作为基本布局。如果您以 demo/demo123 身份登录，那么在页面标题处，您将看到头像图像以及一些指向个人资料、注销和用户名的链接。我需要通过将这些文本右对齐但在图像之前来修复此代码。也许我的标记很丑，所以我接受关于这个主题的建议。您可以尝试与多个用户一起进行测试：

```
demo/demo123, 1632dd55e/1qazxsw2, 1632e8322/1qazxsw2 
```

怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T17:16:13.847

我认为通常有什么问题是你误用了网格系统，试图在 8 列中包含 12 列，一个列表没有任何意义的列表，以及其他问题。对我来说，重写标记的用户面板部分是最简单的，然后对其进行样式设置，而不必太担心覆盖的事情。

我将用以下内容替换当前分类为“八列移动三”的 div：

```
<div class="eight columns mobile-three user-panel">
  <div class="user-controls">
    <ul>
      <li class="account-options"><a href="http://comvivem.treswd.com/net/my-profile">Opciones de cuenta</a></li>
      <li class="logout-link"><a href="http://comvivem.treswd.com/net/users/logout">Cerrar sesión</a></li>
    </ul>
  </div>

  <div class="user">
    <span class="user-name">Demo</span>
    <a class="avatar" href="http://comvivem.treswd.com/net/users/view/2">
      <img title="Demo&nbsp;Demo" alt="Demo&nbsp;Demo" style="" src="uploads/default/files/kung_fu_panda.gif">
    </a>
  </div>
</div> 
```

然后删除所有现有样式`.user-panel`及其后代元素。添加以下样式：

```
.user-panel {
 color: #FFFFFF;
 text-align: right;
}

.user-panel a { color: #FFFFFF; }
.user-panel .user-controls {
    margin: 9px 54px 0 0;
}
.user-panel .user-controls ul { list-style-type: none; }
.user-panel .user-controls li {
    display: inline-block;
    font-size: 11px;
}
.user-panel .user-controls li:not(:last-child):after {
    color: #FFFFFF;
    content: "|";
    padding: 0 3px 0 6px;
}

.user-panel .user {
    position: absolute;
    right: 6px;
    top: 0;
}
.user-panel .user .user-name {
    bottom: 10px;
    margin-right: 54px;
    position: relative;
}
.user-panel .user .avatar {
    display: inline-block;
    position: absolute;
    right: 0;
    top: 8px;
    width: 54px;
}
.user-panel .user .avatar img {
    max-height: 54px;
    max-width: 54px;
} 
```

那应该会产生这样的布局[，](http://easycaptures.com/fs/uploaded/654/9560872079.png)我假设这是您想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T17:04:43.187

您必须将这些行更改为浮点值。因此它们彼此流动，而不是彼此重叠。

第 98 行 .avatar{位置：绝对；对：0；}

第 100 行 .user-name { 位置：绝对；白颜色; 字体系列：Verdana，无衬线；字体大小：14px；右：0；

}

# java - 将库从 org.json 更改为 Jackson 以解析 JSON

> ID：12355596
> 
> 赞同：0
> 
> 时间：2012-09-10T16:16:23.663
> 
> 标签：java, android, json, parsing, jackson

我一直在使用 stock org.json 库并且对此很熟悉。出于性能原因，我现在想使用 Jackson 库，但正在努力适应看起来非常不同的框架。采取以下 JSON ：

```
{"result":[[{"usUserName":"FRED","usActive":true},{"usUserName":"JIM","usActive":true},{"usUserName":"DAVID","usActive":true}]]} 
```

使用 org.json 我将其解析如下：

```
try {
    JSONArray jsonRecordset = response.getJSONArray("result").getJSONArray(0);
    JSONObject jsonFirstRecord = jsonRecordset.getJSONObject(0);
    Log.i("myloginfo", jsonFirstRecord.getString("usUserName"));
} catch (JSONException e) {
    e.printStackTrace();
} 
```

我想用杰克逊复制这个，但看不到去哪里，因为它看起来非常不同。我的 JSON 来自我无法控制的 Web 服务。上面的数据只是为了说明，我的实际数据要大得多，因此我想要最好的性能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T20:45:56.903

通常的方法是，您定义一个结构与 JSON 兼容的 Java 类（或多个类），而不是手动切片和切块。像这样：

```
public class Response {
  public UserInfo[][] result;
}
public class UserInfo {
  public String usUserName;
  public boolean usActive;
}

ObjectMapper mapper = new ObjectMapper(); // must reuse for good performance
Response resp = mapper.readValue(jsonInput, Response.class);
// and use 'resp' however you want, now has the expected data. 
```

也可以像json.org一样使用Jackson，所谓的树模型；为此，您可以查看教程。当数据没有良好的对象结构时（即没有设计成便于从 OO 语言访问），或者您只需要大文档中的一小段片段时，它会更好地工作。

# c# - 使用正则表达式掩码打包和解包字符串

> ID：12355597
> 
> 赞同：-1
> 
> 时间：2012-09-10T16:16:26.200
> 
> 标签：c#, .net, regex, masking

我正在寻找一种简单快速的方法来打包和解包带有正则表达式字符串的整数（不使用反向引用）。我认为这将是 .Net Regex 库的一个非常明显的功能，但没有找到任何东西。我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T16:43:38.350

我能够通过使用 MaskedTextProvider 解决这个问题。我需要能够在我的数据库中存储一个掩码（例如：“(000) 000-000”）并对其应用一个整数值。目标是拥有多个可以动态绑定到整数值的掩码。

# python - Pyfluidsynth 错误

> ID：12355598
> 
> 赞同：2
> 
> 时间：2012-09-10T16:16:32.953
> 
> 标签：python, jack

我正在尝试让 pyfluidsynth 启动并运行。问题是我什至无法运行下载页面上提供的示例代码。以下是相关代码：

```
import time
import fluidsynth

fs = fluidsynth.Synth()
fs.start()

sfid = fs.sfload("example.sf2")
fs.program_select(0, sfid, 0, 0)

fs.noteon(0, 60, 30)
fs.noteon(0, 67, 30)
fs.noteon(0, 76, 30)

time.sleep(1.0)

fs.noteoff(0, 60)
fs.noteoff(0, 67)
fs.noteoff(0, 76)

time.sleep(1.0)

fs.delete() 
```

不太确定问题出在哪里——据我所知，我已经安装了所有依赖项，还有什么没有。遵循错误消息：

```
Cannot connect to server socket err = No such file or directory
Cannot connect to server socket
jackdmp 1.9.7
Copyright 2001-2005 Paul Davis and others.
Copyright 2004-2010 Grame.
jackdmp comes with ABSOLUTELY NO WARRANTY
This is free software, and you are welcome to redistribute it
under certain conditions; see the file COPYING for details
Cannot create thread 1 Operation not permitted
Cannot create thread 1 Operation not permitted
JACK server starting in realtime mode with priority 10
Cannot lock down memory area (Cannot allocate memory)
control device hw:0
control device hw:0
audio_reservation_init
Acquire audio card Audio0
creating alsa driver ... hw:0|hw:0|1024|2|48000|0|0|nomon|swmeter|-|32bit
control device hw:0
Using ALSA driver HDA-Intel running on card 0 - HDA Intel at 0xf4800000 irq 47
configuring for 48000Hz, period = 1024 frames (21.3 ms), buffer = 2 periods
ALSA: final selected sample format for capture: 32bit integer little-endian
ALSA: use 2 periods for capture
ALSA: final selected sample format for playback: 32bit integer little-endian
ALSA: use 2 periods for playback
Cannot use real-time scheduling (RR/10)(1: Operation not permitted)
AcquireSelfRealTime error
Cannot lock down memory area (Cannot allocate memory)
Cannot use real-time scheduling (RR/5)(1: Operation not permitted)
AcquireRealTime error
fluidsynth: Jack sample rate mismatch, adjusting. (synth.sample-rate=44100, jackd=48000)
fluidsynth: warning: Failed to pin the sample data to RAM; swapping is possible.
JackEngine::XRun: client = fluidsynth was not run: state = 2
JackAudioDriver::ProcessGraphAsync: Process error
JackActivationCount::Signal value = 0 ref = 2
JackTemporaryException : now quits...
jack main caught signal 2 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-01T14:27:00.597

Check the solution here: [PyAudio working, but spits out error messages each time](https://stackoverflow.com/questions/7088672/pyaudio-working-but-spits-out-error-messages-each-time) , especially the script provided by Nils Werner.

Its working for me, except that I continue to have following these 3 errors: "Cannot connect to server socket err = No such file or directory Cannot connect to server request channel jack server is not running or cannot be started"

# .net - 为什么文档说 Windows 8 不支持某些 WPF 类？

> ID：12355599
> 
> 赞同：1
> 
> 时间：2012-09-10T16:16:32.620
> 
> 标签：.net, windows-8

我正在尝试将一些方法从 WPF 调整到 Windows 8。

Windows 8 中缺少很多类，而且大多数时候，当我在互联网上查看它们以获取等价物时，据说它适用于 Windows 8。

只有两个例子，但我已经看过数百个：

[http://msdn.microsoft.com/en-us/library/system.threading.threadabortexception.aspx](http://msdn.microsoft.com/en-us/library/system.threading.threadabortexception.aspx)

[http://msdn.microsoft.com/en-us/library/system.security.cryptography.aesmanaged.aspx](http://msdn.microsoft.com/en-us/library/system.security.cryptography.aesmanaged.aspx)

页面底部显示“在 Windows 8 中受支持”。支持的 .Net 框架是 4.5，我认为这是我在 Windows 8 RTM 上使用的框架。

那我做错什么了吗？我忘了包括一些参考资料吗？还是文档不正确？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T16:20:29.230

Windows 8 有两个独立的平台：WinRT 和 Win32。WinRT 是平板电脑界面，而 Win32 是传统桌面。有关图表和说明，请参见[此处](http://www.lhotka.net/weblog/Windows8DevelopmentPlatformClarified.aspx)。WPF 仅适用于 win32。

如果您想要 WinRT 应用程序（或众所周知的 Windows Store Apps 或 Windows 8 UI Applications）的文档，您需要查看[Windows Store Apps](http://msdn.microsoft.com/en-us/windows/apps/br229512.aspx)而不是[.NET Development](http://msdn.microsoft.com/en-us/library/w0x726c2)。

# xml - TYPO3 flexform嵌套标签？

> ID：12355603
> 
> 赞同：1
> 
> 时间：2012-09-10T16:17:03.003
> 
> 标签：xml, typo3, backend

是否可以在 flexform 中包含嵌套选项卡？

好吧，可以创建它们，但不会保存任何值。我得到以下代码来创建嵌套选项卡： flexform.xml

```
<tab1>
    <TCEforms>
        <config>
             <type>flex</type>
                  <ds>
                      <default>FILE:EXT:extension/Configuration/FlexForms/flexform_subtabs.xml</default>
                  </ds>
        </config>
    </TCEforms>
</tab1> 
```

在 *flexform_subtabs.xml* 中创建了其他选项卡。插件中的一切看起来都不错，但我无法保存这些值。

我的代码有什么问题吗？

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T16:07:46.077

截至 09/2011，这是不可能的，恕我直言，仍然不可能。我的消息来源是：

[此邮件列表发布](http://lists.typo3.org/pipermail/typo3-dev/2006-November/020841.html)于 11/2006

> 如果您的意思是选项卡式表单中的选项卡式表单，恐怕这是不可能的（尽管我可能是错的）。标签是从工作表创建的，但不能是工作表内的工作表。

[此错误报告 #19169](http://forge.typo3.org/issues/19196) 09/2011。尚未命名目标版本，因此没有可用的解决方案。

> TYPO 4.5.5 中仍然存在问题，但补丁不起作用

# android - Android 2.3.6 + Phonegap + localStorage

> ID：12355604
> 
> 赞同：1
> 
> 时间：2012-09-10T16:17:13.180
> 
> 标签：android, cordova, local-storage

我正在使用 phonegap 和 jQuery mobile 开发一个移动应用程序。

我收到来自 QA 的报告，关于三星 Galaxy Y (android 2.3.6) - localStorage 为空，因此导致应用程序崩溃。

据我所知，android 2.0+ 版本应该支持 localStorage，我什至在 DroidGap 类中添加了以下代码：

```
super.appView.getSettings().setAllowFileAccess(true);        
super.appView.getSettings().setDatabaseEnabled(true);
super.appView.getSettings().setDatabasePath("/data/data/" + appView.getContext().getPackageName() + "/databases/");
super.appView.getSettings().setDomStorageEnabled(true); 
```

所以我很难理解为什么这个特定设备似乎不支持 localStorage。有人告诉我，它甚至可以在具有相同版本 Android 的其他设备上运行正常！

是否有任何我不知道的设置或其他事情可能导致 localStorage 为空？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T09:35:10.130

您可以从 android SDK 安装文件夹的平台工具文件夹中运行 logcat，在我的机器上是：`C:\Program Files (x86)\Android\android-sdk\platform-tools`

只需`adb logcat`从命令提示符运行。你会收到很多消息。

我创建了一个测试应用程序并在 Galaxy Y 上运行它，该应用程序在 onDeviceReady 函数中有以下代码。使用 logcat 它显示不支持的消息

```
if (typeof window.localStorage == 'object')
{
    // localStorage is supported
    console.log('**HelloGap: localStorage is supported');
}
else
{
    // localStorage is not supported
    console.log('**HelloGap: localStorage is NOT supported');
} 
```

您可以过滤来自 logcat 的消息，但我无法让它工作，所以我只是将输出重定向到一个文本文件并搜索它`**HelloGap`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T15:26:15.193

所以事实证明，通过将 Phonegap (cordova) 从 1.8.1 升级到 2.0.0 可以解决问题......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T01:36:29.417

I had problem with 2.3.6 and localStorage also so I tested 2.3.3 and 2.2 AVD images together with Cordova 2.2.0 and it seems that localStorage is supported but should be called as window.localStorage and not without window scope but what is working on Android 4.x and in Desktop Chrome. But there is another problem that localStorage is not persistent when application is restarted, and I see equal problem in Hydratation, which offers again and again app reinstalation, so I think that is affected by same bug.

# git - 混帐怪事；本地修改的镜像在部署后不用于生产（未更新）

> ID：12355605
> 
> 赞同：1
> 
> 时间：2012-09-10T16:17:14.647
> 
> 标签：git, deployment

我有一个奇怪的问题，当我使用 Rails 部署我的应用程序时，我的 web 应用程序中的某些图像没有更新。旧图像仍然存在。

检查我的 git repo 是否有所有可用更改的好方法是什么？

通常生病 git commit 。-m '修复' git add . 并使用 gitignore

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T16:26:57.597

您可以使用[git-ls-files检查](http://schacon.github.com/git/git-ls-files.html)

在您的情况下：`git ls-files public/`返回 git 下的文件列表。将其与`git ls-files public -o`列出所有其他文件进行比较，例如被忽略的文件或（尚未）在索引中的文件。

此外，只需简单[`git status`](http://schacon.github.com/git/git-status.html)地显示哪些文件已暂存、未暂存、未跟踪等。

# wcf - 处理处理存储过程的事务的最佳方法，WCF 中的实体框架？

> ID：12355609
> 
> 赞同：2
> 
> 时间：2012-09-10T16:17:28.607
> 
> 标签：wcf, entity-framework, stored-procedures, transactions, transactionscope

这是大图：

在我们新的基于 SOA 的信息系统中，我们需要构建几个 WCF 服务。这些服务的主要目标是处理业务交易。

举个例子：用户在网站（或移动应用程序）上下订单，客户端应用程序将调用 WCF 服务（我们称之为 Order Process Manager），该服务将编排所有业务事务。OPM 会以某种方式开始一个事务，以确保如果一个子进程失败，所有事务都会回滚。

关键是 OPM 可能必须调用其他服务，如用户帐户服务、库存管理服务等等……这些服务可能是现有服务（我们无法修改），它们调用提交和回滚自己的事务的存储过程。另一种可能性是那些其他服务可能建立在实体框架之上，有自己的方式来处理事务（使用工作单元、事务范围、存储库和东西......）

我的想法是，它不会像在 OPM 中使用事务范围那么简单，而且它会在决定回滚所有事情时发挥所有作用。

如果有人已经遇到过这些问题，我会全力以赴！

环境规格为：

*   .Net 4.0 / C#
*   WCF
*   SQL Server 2008R2

非常感谢大家。

弗雷迪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T19:52:58.920

> 这些服务可能是现有服务（我们无法修改）

因此，这只是您需要知道的要求，以发现没有适合您的神奇解决方案。WCF 提供分布式事务，您的 OPM 可以在其中使用`TransactionScope`事务并将事务传播到其他服务，但这需要双方进行配置和一些编码 - 此外，调用的服务必须由支持事务委托的 API 编写。分布式事务非常复杂，它们会对系统产生很大的性能影响。

如果您必须使用现有服务而无法更改它们，那么您唯一的选择就是补偿。补偿就像手动回滚——它经常用于长时间运行的进程中，在这些进程中不能使用带锁的标准事务。补偿是您自己调用的自定义代码而不是回滚，它将恢复当前业务事务所做的所有更改。

# java - 相同的程序，相同的 JVM，但在不同机器上的内存需求和执行时间却大不相同——为什么？

> ID：12355611
> 
> 赞同：9
> 
> 时间：2012-09-10T16:17:30.757
> 
> 标签：java, jvm, out-of-memory, heap-memory, execution-time

作为大型实验的一部分，我正在尝试在集群上运行[NetLogo （Java 模拟框架）模拟。](http://ccl.northwestern.edu/netlogo/)我对（相对）简单的模拟看似庞大的内存需求感到惊讶。在集群上，对于小于“-Xmx2500M”堆大小的任何内容，它都会引发“java.lang.OutOfMemoryError: Java heap space”异常。一次执行需要 5 小时才能运行。我在我的两台 Mac（iMac 和 MacBook Pro）上进行了相同的实验，它们在不到一小时的时间内执行，“-Xmx1024”没有出现错误。集群作业需要“-XX:MaxPermSize=250M”，而在我的 Mac 上，不需要高于默认值。在所有情况下，我使用完全相同的 jar 运行相同的代码、相同的输入。

在每种情况下都使用 64 位 JVM（据我所知，它们非常相似）：

```
<on the cluster>
$ java -version
java version "1.6.0_26"
Java(TM) SE Runtime Environment (build 1.6.0_26-b03)
Java HotSpot(TM) 64-Bit Server VM (build 20.1-b02, mixed mode)

<on my macs>
$ java -version
java version "1.6.0_31"
Java(TM) SE Runtime Environment (build 1.6.0_31-b04-415-10M3646)
Java HotSpot(TM) 64-Bit Server VM (build 20.6-b01-415, mixed mode) 
```

而且我在所有情况下都在运行客户端 JVM（最初是在集群上使用服务器，切换到客户端没有任何区别）。我曾尝试使用 java 7 在集群上执行，同样巨大的内存和执行时间问题。

我完全感到困惑，与我交谈过的人都无法解释这一点。有没有人以前遇到过这个？非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T16:22:48.247

我怀疑一个有更快的网络或磁盘 IO。如果您使用队列写入磁盘或写入网络，其中一台计算机可以跟上而另一台计算机不能跟上，则队列可能会增长，从而减慢机器速度并使用无限量的内存。

如果您有更快的网络 IO，它可以帮助更快地发送数据（保持队列较小），或者这可能意味着您接收数据的速度太快（这意味着队列的增长速度可能快于消耗的速度）

很大程度上取决于您的应用程序实际执行的操作。当您的程序发生 OOME 时，我建议您获取堆转储并对其进行分析并查找消耗大量内存的集合（例如队列）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-19T12:55:08.653

我怀疑问题在于您使用的是服务器 JVM。客户端 JVM 在 64 位机器上不可用。即使您要求使用客户端 JVM，它也会为您提供服务器。

# objective-c - 调用释放会触发自动释放对象的释放吗？

> ID：12355612
> 
> 赞同：1
> 
> 时间：2012-09-10T16:17:31.643
> 
> 标签：objective-c, ios, memory-management, autorelease

对于以下

```
NSImage *image = [[UIImage imageNamed:@"foo.png"] retain];
...
[image release]; 
```

我的理解是，从 imageNamed 返回的对象应该会被自动释放。但是由于对象上有一个保留，然后是一个明确的释放。显式释放不仅会减少引用计数，还会触发整个对象的释放，而不是等待稍后进行 GC。假设是，当释放调用时，iOS 将首先尝试减少对象上的引用计数，然后发现当时没有其他主体在引用该对象，因此它决定释放分配的内存。是正确的理解和假设吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T16:31:27.133

不，这是不正确的。

此外，您对内存管理术语有些松懈，因此您的问题有点令人困惑。

对所有这些方面的详细讨论对于 SO 帖子来说太多了。

自动释放池不是垃圾收集。将其视为对象的集合。当您自动释放对象时，该对象将添加到池中。当池耗尽时，它基本上对池中的每个对象调用释放（因此，名称为自动释放池）。

因此，如果您有一个已自动释放的对象，并且您进行了额外的`retain`调用（没有匹配的释放），则自动释放池将不会释放该对象。它只会像预期的那样释放一次。

如果您持有对该对象的其他引用，则该对象仍将存在于自动释放池之后。

多次调用保留/释放只是增加和减少计数。在计数达到零之前，对象不会释放。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T16:30:06.693

这不是一个正确的假设。将`release`在概念上否定`retain`. 但是，您无法知道任何其他可能浮动的引用计数。*如果*你`retain`是唯一的，那么它将立即被摧毁。当然不是这样。

因为我们知道我们得到了一个自动释放的对象，我们知道我们的`retain`引用不是唯一的。来自自动释放源的原始引用将保留，直到当前自动释放池被耗尽。因此，您的假设在这里是有缺陷的：

> 当释放调用时，iOS 会首先尝试减少对象的引用计数，然后发现当时没有其他主体在引用该对象，因此决定释放分配的内存。

...因为原始自动释放的引用将保留。

一般来说，您不应该对对象何时被解除分配做出任何假设。只需担心平衡您自己的保留数量并相信事情会解决。在此示例中，存在的引用也可能远不止您自己的`retain`和假定的`autorelease`. 只要事情保持平衡，框架就可以在幕后自由保留和释放他们想要的一切。

最后，只需使用 ARC 并忘记这一切 :)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T16:40:50.030

没有这样的垃圾收集。严格来说，它是对自己的引用进行计数的对象。当一个对象被创建时，它给自己一个引用计数 1。不过，在这种情况下，创建对象的方法 -- `imageNamed:`-- 将对象放入一个自动释放池中。这意味着池是 1 引用的所有者，它会在以后自动*释放**引用*（在此方法完成后）。

当一个对象的引用计数下降到 0 时，它会通过运行它的`dealloc`方法来销毁自己。

您发送`retain`到图像（由自动释放池拥有）意味着有另一个引用 - 另一个所有者 - （然后计数将是 2，但您真的不应该考虑对象的内部绝对数，只考虑您的所有权）。

无论如何，池仍然会发送`release`，但是（如果您尚未释放通过发送获得的所有权声明`retain`），此释放本身不会将引用计数降至 0，因此对象不会被销毁。

既然你发送`release`了，你就放弃了你的声明，自动释放池将处理它的所有权——但更*晚*，当你发送时不正确`release`——导致图像被破坏。

简而言之，不，您的发送`release`不会改变自动释放池的操作。它仍然拥有该对象，并且仍然`release`在运行循环结束时发送给它。

# html - 为什么 和 tags are ordered in this way?

```
 <title>Test Title</title> 

> ID：12355613
> 
>         
> 
> 赞同：3
> 
>         
> 
> 时间：2012-09-10T16:17:34.817
> 
>         
> 
> 标签：html, reference, conventions, specifications

* * *

## 回答 #1

> 赞同：5
> 
>             
> 
> 时间：2012-09-10T16:20:44.000

浏览器需要尽快知道字符编码。其他元素（包括标题）可以包含仅在所使用的特定编码中有意义（或正确含义）的字符。

标题之前不需要出现任何其他元元素。

> 是否有任何原因（兼容性、编码参考或规则）我不能将所有元标记放在标题之前？

标题出现得越早，浏览器就可以越早显示它（在标题栏、标签等中）。

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2012-09-10T16:21:29.353

这部分是不必要的，但从严格的理论角度来看，这是有道理的。

如果您认为您首先告诉浏览器它是`<HTML>`, 正在处理的文档，然后内容/字符集是`UTF-8`，那么浏览器将知道如何`title`使用正确的字符集正确处理文本。 
```

# java - 在 primefaces 中拖放

> ID：12355625
> 
> 赞同：2
> 
> 时间：2012-09-10T16:18:23.647
> 
> 标签：java, primefaces

我需要创建两个包含面板的字段集，我需要将面板从第一个字段集拖放到第二个，反之亦然（从第二个字段集到第一个），所以组件可以拖放到同时？

# ajax - 尝试在视图中执行使用 Django CommentForm 时出错

> ID：12355629
> 
> 赞同：0
> 
> 时间：2012-09-10T16:18:41.850
> 
> 标签：ajax, django, comments

我试图在我的视图中使用内置的 Django CommentForm，但我不断收到错误消息： `'QueryDict' object has no attribute '_meta'`

我的观点：

```
def comments(request):
    if request.is_ajax() and request.method == "POST":
        form = CommentForm(request.POST)
        if form.is_valid():
            new_comment = form.save()
            return HttpResponse(new_comment) 
```

我知道内置的评论模板标签，但不认为它们对我的应用程序很容易。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T16:24:28.523

初始化时`CommentForm`，第一个参数应该是注释相关的对象。

```
form = CommentForm(obj, data=request.POST) 
```

# c# - 在图片框中设置图像时出现“对象当前在别处使用”异常

> ID：12355631
> 
> 赞同：4
> 
> 时间：2012-09-10T16:18:45.190
> 
> 标签：c#, wpf, winforms

标题中有几个问题，但没有一个可以帮助我或指导我解决我的问题。

我正在使用 C# winform 构建实时或近实时成像应用程序。

但是在winform中将图像分配给PictureBox

```
pictureBox.Image = image; 
```

`Object is currently in use elsewhere.`基本上在 5-20 分钟内给出一个随机异常。

我搜索了有关此问题的材料，但找不到正确的解决方案。当程序只是将图像设置为从队列中显示时发生错误。因此，图像无法在其他线程中使用。

在这一点上，我不确定 winform 是否适合成像应用程序。我是否必须转移到另一个平台，例如 WPF？

我需要有经验的建议。

**更新：**正如 Nathanael 指出的，我可以从多线程访问图片框，所以我假设多线程可以访问图片框的图像。因此，当我将上面的行更改为以下行时，我不再收到任何错误。

```
 private void SetImage(Bitmap image) 
      {
            if (this.pictureBox.InvokeRequired)
            {
                SetImageCallback callback = new SetImageCallback(SetImage);
                this.BeginInvoke(callback, new object[] { image });
            }
            else
            {
                pictureBox.Image = image;
            }
      } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T17:39:20.220

如果我正确理解了您的问题，那么您正在从多个线程访问此图片框。WinForms 在后台使用 GDI+，这不是线程安全的。WinForms 不会强制您仅从创建它们的线程访问 UI 对象。它让你这样做，但你最终会遇到错误，正如你所发现的那样。

尝试从您的工作线程向您的 GUI 线程发布消息，以让 GUI 线程更新图片。这应该可以解决您看到的错误。

如果您迁移到 WPF，您将遇到类似的线程问题。WPF 严格强制只有创建 UI 对象的线程才能对其进行修改。在 WPF 中，您可以使用 Invoke 方法让正确的线程操作您的图片框。

否则，如前所述，两者之间的性能差异不会很大。您应该考虑是否需要或更喜欢立即模式绘图而不是保留模式。表单是即时的，WPF 保留。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T17:21:24.893

这两种技术都应该允许你做你想做的事。取决于您以前的技能和经验以及项目的确切要求，哪个是您更好的选择。

如果您询问性能，如果您有一个相当简单的界面，没有太多元素，并且基本上只是显示一个大图像（然后您修改和更新），您不会看到 winforms 和 wpf 之间的性能差异很大（没有3d，没有大的元素计数）。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2016-02-10T12:53:43.157

```
private void ThreadSafe(MethodInvoker method)
{
    try
    {
        if (InvokeRequired)
            Invoke(method);
        else
            method();
    }
    catch
    { }
}

///////////////////////
pictureBox1.Image = img; 
```

# ruby-on-rails-3 - rake undefined 方法 `gsub' 用于 nil:NilClass

> ID：12355632
> 
> 赞同：3
> 
> 时间：2012-09-10T16:18:55.017
> 
> 标签：ruby-on-rails-3, rake

我希望有人在这里发表一些鼓励的话和一些建议。

我正在使用 Ruby v1.9.2 p290

我一直在设置一个新的生产服务器，但我很难让新环境正常工作。一切都已安装，现在我正在尝试运行`rake`，但它给了我一个错误，我无法理解并且找不到任何互联网帮助。

```
deploy@ip-10-99-66-30:~/pm$ rake -v --trace
rake aborted!
undefined method `gsub' for nil:NilClass
/usr/local/lib/ruby/gems/1.9.1/gems/bundler-1.1.4/lib/bundler/runtime.rb:77:in `rescue in rescue in block in require'
/usr/local/lib/ruby/gems/1.9.1/gems/bundler-1.1.4/lib/bundler/runtime.rb:72:in `rescue in block in require'
/usr/local/lib/ruby/gems/1.9.1/gems/bundler-1.1.4/lib/bundler/runtime.rb:62:in `block in require'
/usr/local/lib/ruby/gems/1.9.1/gems/bundler-1.1.4/lib/bundler/runtime.rb:55:in `each'
/usr/local/lib/ruby/gems/1.9.1/gems/bundler-1.1.4/lib/bundler/runtime.rb:55:in `require'
/usr/local/lib/ruby/gems/1.9.1/gems/bundler-1.1.4/lib/bundler.rb:119:in `require'
/home/deploy/pm/config/application.rb:14:in `<top (required)>'
<internal:lib/rubygems/custom_require>:29:in `require'
<internal:lib/rubygems/custom_require>:29:in `require'
/home/deploy/pm/Rakefile:5:in `<top (required)>'
/usr/local/lib/ruby/gems/1.9.1/gems/rake-0.9.2/lib/rake/rake_module.rb:25:in `load'
/usr/local/lib/ruby/gems/1.9.1/gems/rake-0.9.2/lib/rake/rake_module.rb:25:in `load_rakefile'
/usr/local/lib/ruby/gems/1.9.1/gems/rake-0.9.2/lib/rake/application.rb:495:in `raw_load_rakefile'
/usr/local/lib/ruby/gems/1.9.1/gems/rake-0.9.2/lib/rake/application.rb:78:in `block in load_rakefile'
/usr/local/lib/ruby/gems/1.9.1/gems/rake-0.9.2/lib/rake/application.rb:129:in `standard_exception_handling'
/usr/local/lib/ruby/gems/1.9.1/gems/rake-0.9.2/lib/rake/application.rb:77:in `load_rakefile'
/usr/local/lib/ruby/gems/1.9.1/gems/rake-0.9.2/lib/rake/application.rb:61:in `block in run'
/usr/local/lib/ruby/gems/1.9.1/gems/rake-0.9.2/lib/rake/application.rb:129:in `standard_exception_handling'
/usr/local/lib/ruby/gems/1.9.1/gems/rake-0.9.2/lib/rake/application.rb:59:in `run'
/usr/local/lib/ruby/gems/1.9.1/gems/rake-0.9.2/bin/rake:32:in `<top (required)>'
/usr/local/bin/rake:19:in `load'
/usr/local/bin/rake:19:in `<main>' 
```

这是我的宝石清单

```
actionmailer (3.1.0)
actionpack (3.1.0)
activemodel (3.1.0)
activerecord (3.1.0)
activeresource (3.1.0)
activesupport (3.1.0)
archive-tar-minitar (0.5.2)
arel (2.2.3)
bcrypt-ruby (3.0.1)
builder (3.0.0)
bundler (1.1.4)
cancan (1.6.8)
capybara (1.1.2)
childprocess (0.3.3)
client_side_validations (3.1.4)
cocaine (0.2.1)
coffee-rails (3.1.1)
coffee-script (2.2.0)
coffee-script-source (1.3.3)
columnize (0.3.6)
cucumber (1.2.1)
cucumber-rails (1.3.0)
daemon_controller (1.0.0)
database_cleaner (0.8.0)
devise (1.5.3)
diff-lcs (1.1.3)
erubis (2.7.0)
execjs (1.4.0)
factory_girl (3.5.0)
factory_girl_rails (3.5.0)
faker (1.0.1)
fastthread (1.0.7)
ffi (1.0.11)
geocoder (1.1.2)
gherkin (2.11.1)
guard (1.2.3)
guard-rspec (1.2.0)
haml (3.1.6)
haml-rails (0.3.4)
hike (1.2.1)
hpricot (0.8.6)
httparty (0.8.3)
i18n (0.6.0)
journey (1.0.4)
jquery-rails (1.0.19)
json (1.7.3)
json_pure (1.7.3)
jsonify (0.3.1)
jsonify-rails (0.3.2)
libv8 (3.3.10.4 x86_64-linux)
linecache19 (0.5.12)
listen (0.4.7)
mail (2.3.3)
meta_search (1.1.3)
mime-types (1.19)
minitest (1.6.0)
multi_json (1.3.6)
multi_xml (0.5.1)
mysql2 (0.3.11)
nokogiri (1.5.5)
orm_adapter (0.0.7)
paperclip (2.7.0)
passenger (3.0.17)
polyamorous (0.5.0)
polyglot (0.3.3)
rack (1.3.6)
rack-cache (1.0.3)
rack-mount (0.8.3)
rack-ssl (1.3.2)
rack-test (0.6.1)
rails (3.1.0)
rails3-jquery-autocomplete (1.0.7)
railties (3.1.0)
rake (0.9.2)
rb-fchange (0.0.5)
rb-fsevent (0.9.1)
rb-inotify (0.8.8)
rdoc (3.12, 2.5.8)
remotipart (1.0.2)
rspec (2.11.0)
rspec-core (2.11.1)
rspec-expectations (2.11.3)
rspec-mocks (2.11.2)
rspec-rails (2.11.0)
ruby-debug-base19 (0.11.25)
ruby-debug19 (0.11.6)
ruby_core_source (0.1.5)
ruby_parser (2.3.1)
rubyzip (0.9.9)
sass (3.1.20)
sass-rails (3.1.4)
selenium-webdriver (2.7.0)
sexp_processor (3.2.0)
simple_datatables (0.2.1)
sprockets (2.0.4)
therubyracer (0.10.1)
thor (0.14.6)
tilt (1.3.3)
timeliness (0.3.6)
treetop (1.4.10)
tzinfo (0.3.33)
uglifier (1.2.6)
validates_timeliness (3.0.12)
warden (1.2.1)
web-app-theme (0.8.0)
webrat (0.7.3)
will_paginate (3.0.3)
xpath (0.1.4) 
```

我在这上面花了几天时间，拉完头发后头上没有多少头发了。

有什么建议么？Ruby on Rails 是一个很好的平台，但我对这个平台感到困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T21:55:42.827

通过执行以下操作将捆绑器 gem 更新到最新版本（回答时为 1.2.3）：

```
gem update bundler 
```

为我解决了这个问题。好吧，它并没有完全修复它，但它允许显示导致问题的实际错误消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-28T05:56:32.147

我的 gem 有问题。

更新捆绑器

正确阅读错误，它会告诉你哪个宝石是罪魁祸首。

问题是并非所有 gem 都与 OS 兼容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T18:09:30.017

似乎是与 gem 版本冲突和捆绑程序吐出特别不透明的错误消息有关的问题。

见： [https ://github.com/carlhuda/bundler/issues/1847](https://github.com/carlhuda/bundler/issues/1847)

显然，这已在最新版本的捆绑程序中进行了修补。我目前有同样的问题并正在调查它，但我希望这有助于为您指明正确的方向。

# grails - Gails - 应用程序停止时的 Hazelcast IllegalStateException

> ID：12355633
> 
> 赞同：2
> 
> 时间：2012-09-10T16:18:56.967
> 
> 标签：grails, hazelcast, session-replication

我正在尝试某种方式来集群化我的 grails 应用程序，我发现 Hazelcast 非常有趣。

我做了一个小测试应用程序来尝试与 grails 的集成。

我按照网站上的文档进行了会话复制。

我发现当我停止一个节点时，它开始抛出很多这样的异常：

```
INFO: Illegal access: this web application instance has been stopped already.  Could not load com.hazelcast.cluster.AddOrRemoveConnection.  The eventual following stack trace is caused by an error thrown for debugging purposes as well as to attempt to terminate the thread which caused the illegal access, and has no functional impact.
java.lang.IllegalStateException
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1597)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1556)
    at com.hazelcast.nio.NodeIOService.removeEndpoint(NodeIOService.java:108)
    at com.hazelcast.nio.ConnectionMonitor.onError(ConnectionMonitor.java:59)
    at com.hazelcast.nio.ConnectionManager.failedConnection(ConnectionManager.java:255)
    at com.hazelcast.nio.SocketConnector.run(SocketConnector.java:66)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:909)
    at java.lang.Thread.run(Thread.java:662)
Exception in thread "pool-11-thread-18" java.lang.NoClassDefFoundError: com/hazelcast/cluster/AddOrRemoveConnection
    at com.hazelcast.nio.NodeIOService.removeEndpoint(NodeIOService.java:108)
    at com.hazelcast.nio.ConnectionMonitor.onError(ConnectionMonitor.java:59)
    at com.hazelcast.nio.ConnectionManager.failedConnection(ConnectionManager.java:254)
    at com.hazelcast.nio.SocketConnector.run(SocketConnector.java:66)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662) 
```

谁能解释我为什么会发生以及如何解决它？
谢谢

# c# - 确定了一个丢弃活动

> ID：12355634
> 
> 赞同：0
> 
> 时间：2012-09-10T16:18:59.057
> 
> 标签：c#, wpf, workflow-foundation-4

我在 WPF 中工作。我有以下问题。当我将新活动交给设计器时，我需要将一些信息存储在哈希表中。此哈希表必须是以下结构：

键：活动对象删除值：此活动在运行时创建的变量列表。

现在，我在 Window 类中有以下代码：

```
 private void AddDesigner()
 {
     this.wd = new WorkflowDesigner();
     ------------------------
     ModelService ms = wd.Context.Services.GetService<ModelService>();
     if (ms != null)
            ms.ModelChanged += new EventHandler<ModelChangedEventArgs>(ms_ModelChanged);
 } 
```

和 ms_ModelChanged：

```
 void ms_ModelChanged(object sender, ModelChangedEventArgs e)
 {
        if (e.ItemsAdded != null)
        {
            ModelItem item = e.ItemsAdded.FirstOrDefault<ModelItem>();
            var test = item.GetCurrentValue() as CountActivity;
            RulesDll.ObjectsClass.HashTableActivity.HashActivity.Add(XXXX, lista);
        }

        else if (e.ItemsRemoved != null)
        {
            ModelItem item = e.ItemsRemoved.FirstOrDefault<ModelItem>();
            //mi.Properties["Variables"].Collection.Remove(n);
        }
    } 
```

在：RulesDll.ObjectsClass.HashTableActivity.HashActivity.Add(XXXX, lista);

其中 XXXX 必须是设计器中放置的对象项....好吧，据我所知，当我使用以下代码在设计器中放置两个相同的活动时，不可能在哈希表中添加重复键：

RulesDll.ObjectsClass.HashTableActivity.HashActivity.Add(item, lista);

正常情况下，哈希表中允许出现错误提示 NOT DUPLICATE 值....

那么我必须做些什么来识别我在设计器中放置的活动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T17:43:08.277

为什么不能使用当前活动对象作为键？

```
hashtable.Add(item.GetCurrentValue(), ...); 
```

无论如何，几乎可以肯定 Hashtable 在`System.Object.GetHashCode()`内部使用“[不保证不同对象的唯一返回值](http://msdn.microsoft.com/en-us/library/system.object.gethashcode)”，尽管很难发生冲突。

在工作流设计时，您无权访问某种*活动唯一 id*。你自己一个人。就像我说的，我不知道你想做什么，但听起来不太好！

# ios - 带有 Unity ios 应用程序的 Facebook 对话框中的文本伪影

> ID：12355638
> 
> 赞同：1
> 
> 时间：2012-09-10T16:19:09.980
> 
> 标签：ios, facebook, unity3d

Unity3D ios 应用程序有一个问题。我正在使用 Prime31 插件（SocialNetworking）向 FB 发送消息。有时，当我尝试将应用程序发布到流时，我会看到以下问题（应用程序内的对话框表单中的 html 标签等。但在 facebook 流中，一切看起来都不错。所有文本都在 XML 文件（UTF-16）中。请如果您知道如何从对话框形式的消息中删除标签，请告诉我。谢谢。

# visual-studio-2010 - VS2010 - 将 html 代码格式分配给 T4 (.tt) 文件

> ID：12355639
> 
> 赞同：2
> 
> 时间：2012-09-10T16:19:14.937
> 
> 标签：visual-studio-2010, t4

我在 VS2010 中有一个 T4 文本模板 (.tt) - 主要用于生成 HTML 代码（基本上是一些包含和 JavaScript）。

**是否可以将 HTML 代码格式**（颜色等）分配给该 tt 文件。

是情况（T4）：

![tt文件是如何格式化的](../Images/92dbc0c4d561206d75ea06b5c3760bb1.png)

想要拥有：

![我可以在 .tt 文件上获得这种格式吗](../Images/b298a39c08fb3c0342ea885937b407b0.png)

-- 更新至回答 Marcio Barcellos --

使用建议的 AddOn 进行格式化：

![使用插件格式化](../Images/1ee690ea0f51e02e9cc31743c5b456d0.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T16:25:26.807

您可以将扩展添加到 Visual Studio 并获得您想要的结果

[http://visualstudiogallery.msdn.microsoft.com/40a887aa-f3be-40ec-a85d-37044b239591](http://visualstudiogallery.msdn.microsoft.com/40a887aa-f3be-40ec-a85d-37044b239591)

# excel - 循环 VBA 案例语句

> ID：12355641
> 
> 赞同：-2
> 
> 时间：2012-09-10T16:19:21.287
> 
> 标签：excel, vba, case-statement

目前我在每个 Case 语句中都有相同的代码，有时我必须重复 50 次，有没有办法简化这一点：对于每个我必须创建 40 个帧，每个帧都命名为 VarFrame1...VarFrame40 我也是在 Excel 中的 Visual Basic 6.5 中创建此代码

```
For iVar = 1 To nrVars
    Select Case iVar
    Case 1
        VarFrame1.Caption = varInfo(iVar).varName
        VarFrame1.Top = lastRow
        VarFrame1.Left = leftMargin
        VarFrame1.Height = 12
        VarFrame1.Visible = True
    Case 2
        VarFrame2.Caption = varInfo(iVar).varName
        VarFrame2.Top = lastRow
        VarFrame2.Left = leftMargin
        VarFrame2.Height = 12
        VarFrame2.Visible = True

.... to Case 50

End Select

 lastRow = lastRow + 15

    Dim res As Boolean
Select Case varInfo(iVar).varType
    Case "RadioButton"
        nrOptionButtonVals = nrOptionButtonVals + 1
        res = SetUpOptionButtons(lastRow, iVar, nrOptionButtonVals, varInfo(iVar).varOptions, varInfo(iVar).varOptionText, False)
    Case "RadioButtonOther"
        nrOptionButtonVals = nrOptionButtonVals + 1
        res = SetUpOptionButtons(lastRow, iVar, nrOptionButtonVals, varInfo(iVar).varOptions, varInfo(iVar).varOptionText, True)
    Case "DropDown"
        res = SetUpDropDown(lastRow, iVar, varInfo(iVar).varOptions, varInfo(iVar).varOptionText)
    Case "CheckBox"
        nrCBButtonVals = nrCBButtonVals + 1
        res = SetUpCBButtons(lastRow, iVar, nrCBButtonVals, varInfo(iVar).varOptions, varInfo(iVar).varOptionText, False)
    Case "CheckBoxOther"
        nrCBButtonVals = nrCBButtonVals + 1
        res = SetUpCBButtons(lastRow, iVar, nrCBButtonVals, varInfo(iVar).varOptions, varInfo(iVar).varOptionText, True)
    Case "TextEntry"
        res = SetUpTextEntry(lastRow, iVar, varInfo(iVar).varType, varInfo(iVar).varOptions, varInfo(iVar).varOptionText)
    Case "DateEntry"
        res = SetUpTextEntry(lastRow, iVar, varInfo(iVar).varType, varInfo(iVar).varOptions, varInfo(iVar).varOptionText)
    Case "NumberEntry"
        res = SetUpTextEntry(lastRow, iVar, varInfo(iVar).varType, varInfo(iVar).varOptions, varInfo(iVar).varOptionText)
    End Select
    lastRow = lastRow + 10
Next iVar
QuitButton.Top = lastRow
lastRow = lastRow + 30
PhraseDisplay.Height = lastRow + 50

DisplayCorrectedPhrase
SetUpForm = True
End Sub 
```

* * *

更新了蒂姆·威廉姆斯评论：

```
Public Function SetUpForm(ByRef thePhrase As String) As Boolean
    Dim nrVars, iVar, lastRow As Integer

    nrVars = Utilities.getNrPhraseVariables(thePhrase)
    ReDim varInfo(0 To nrVars)
    PhraseBoxOriginal.Text = thePhrase

    For iVar = 1 To nrVars
    varInfo(iVar).varName = Utilities.getPhraseVariable(thePhrase, iVar)
    varInfo(iVar).varIndex = PhraseVars.getPhraseVarIndex(varInfo(iVar).varName)
    varInfo(iVar).varType = PhraseVars.getTypeFromIndex(varInfo(iVar).varIndex)
    varInfo(iVar).varOptions = PhraseVars.getOptionsFromIndex(varInfo(iVar).varIndex)
    varInfo(iVar).varOptionText = PhraseVars.getOptionTextFromIndex(varInfo(iVar).varIndex)
    varInfo(iVar).varValue = Utilities.getVarOption("", 0) ' Get the default option string
    Next iVar

    nrOptionButtonVals = 0
    lastRow = 115
    For iVar = 1 To nrVars

      With Me.Controls("VarFrame" & iVar)
        .Caption = varInfo(iVar).varName
        .Top = lastRow
        .Left = leftMargin
        .Height = 12
        .Visible = True
      End With

    Next iVar
        lastRow = lastRow + 15

        Dim res As Boolean
    Select Case varInfo(iVar).varType
        Case "RadioButton"
            nrOptionButtonVals = nrOptionButtonVals + 1
            res = SetUpOptionButtons(lastRow, iVar, nrOptionButtonVals, varInfo(iVar).varOptions, varInfo(iVar).varOptionText, False)
        Case "RadioButtonOther"
            nrOptionButtonVals = nrOptionButtonVals + 1
            res = SetUpOptionButtons(lastRow, iVar, nrOptionButtonVals, varInfo(iVar).varOptions, varInfo(iVar).varOptionText, True)
        Case "DropDown"
            res = SetUpDropDown(lastRow, iVar, varInfo(iVar).varOptions, varInfo(iVar).varOptionText)
        Case "CheckBox"
            nrCBButtonVals = nrCBButtonVals + 1
            res = SetUpCBButtons(lastRow, iVar, nrCBButtonVals, varInfo(iVar).varOptions, varInfo(iVar).varOptionText, False)
        Case "CheckBoxOther"
            nrCBButtonVals = nrCBButtonVals + 1
            res = SetUpCBButtons(lastRow, iVar, nrCBButtonVals, varInfo(iVar).varOptions, varInfo(iVar).varOptionText, True)
        Case "TextEntry"
            res = SetUpTextEntry(lastRow, iVar, varInfo(iVar).varType, varInfo(iVar).varOptions, varInfo(iVar).varOptionText)
        Case "DateEntry"
            res = SetUpTextEntry(lastRow, iVar, varInfo(iVar).varType, varInfo(iVar).varOptions, varInfo(iVar).varOptionText)
        Case "NumberEntry"
            res = SetUpTextEntry(lastRow, iVar, varInfo(iVar).varType, varInfo(iVar).varOptions, varInfo(iVar).varOptionText)
        End Select
        lastRow = lastRow + 10
    Next iVar
    QuitButton.Top = lastRow
    lastRow = lastRow + 30
    PhraseDisplay.Height = lastRow + 50

    DisplayCorrectedPhrase
    SetUpForm = True
    End Sub 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T16:34:25.497

```
For iVar = 1 To nrVars     

  With Me.Controls("VarFrame" & iVar)        
    .Caption = varInfo(iVar).varName         
    .Top = lastRow         
    .Left = leftMargin         
    .Height = 12         
    .Visible = True 
  End With

Next iVar 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T16:23:08.230

几个选项： 1\. 使用在运行时添加的一组控件。2\. 在启动时将这些控件中的每一个添加到列表中，然后您只需遍历列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T16:29:24.213

您希望将所有帧都放在一个集合中，以便可以迭代它们并使用以下内容初始化它们：

```
Sub initFrame(ByRef frame as VarFrame)
    frame.Caption = varInfo(iVar).varName
    frame.Top = lastRow
    frame.Left = leftMargin
    frame.Height = 12
    frame.Visible = True
End Sub

For Each element As VarFrame In frames
    initFrame(element)
Next 
```

这样，如果您以相同的方式初始化许多帧，则不必复制代码。

# facebook - 将 Facebook 用户个人资料图片与另一张图片合并

> ID：12355643
> 
> 赞同：2
> 
> 时间：2012-09-10T16:19:40.917
> 
> 标签：facebook

我正在创建一个应用程序，它将用户的个人资料图片与我的自定义图片合并。使用 imagecopymerge 很容易做到这一点，但是当我这样做时，它会出现在 facebook 用户的个人资料图片中。它不起作用我正在使用此代码：

```
 $uid = $facebook->getUser();
$userpic = imagecreatefromjpg("http://graph.facebook.com/".$user_id."/picture?type=normal");
$mainphoto = imagecreatefromjpeg("img/back.jpg");
imagecopymerge($mainphoto, $userpic, 10, 10, -2, -2, 55, 55, 100);
imagejpeg($mainphoto, "new.jpg", 100);
imagedestroy($mainphoto); 
```

它显示错误

致命错误：在第 6 行的 /home/a7193625/public_html/fb/index.php 中调用未定义函数 imagecreatefromjpg()

这意味着它没有获取用户的图像，所以我该怎么办？如何在我的服务器上下载图片或在不下载的情况下使用它。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T18:05:24.937

您需要图像的 URL，同时使用

```
$userpic = imagecreatefromjpg("http://graph.facebook.com/".$user_id."/picture?type=normal"); 
```

只需重定向到图像 url 并输出图像。这导致了问题。

您只需要一个指向用户图像的 URL。

```
$user_id = $facebook->getUser(); 
$result = file_get_contents("https://graph.facebook.com/{$user_id}?fields=picture.type(normal)");
$result = json_decode($result);
$userpic = imagecreatefromjpeg($result->picture); 
```

使用这种方式，您将获得图像 URL，并且您可以使用您的函数来操作图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T16:24:19.973

我认为问题在于您的函数名称，它应该是 imagecreatefromjpeg 而不是 imagecreatefromjpg

# asp.net - ASP.NET MVC 路由映射问答

> ID：12355650
> 
> 赞同：0
> 
> 时间：2012-09-10T16:20:04.997
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, routing, asp.net-mvc-routing

我已经使用 ASP.NET MVC 工作了 8 个月。我知道基本的路由以及它是如何工作的，但我心中没有几个问题。

首先，我必须解释一下我所知道的，对吧？因此，例如在下面的路由中，我知道模式及其工作原理。

```
routes.MapRoute(
 "Categories",
 "category/{CategoryName}",
/*If I use 'mysite.com/category/anything'  
it will look into the 'News' controller and 
then Category action with the given 
parameter('anything') in the category 
action's with the same name parameter. 
EG. public ActionResult Category(Anytype CategoryName) { ... }
*/
 new { controller = "News", action = "Category", CategoryName = "" },
 new string[] { "MyProj.Controllers" } //it is for specifying specific 
//Namespace, mostly used for distinguishing between area routing and regular routing
    ); 
```

现在如果在上面的例子中我有类似的方法

```
public ActionResult Category(Anytype CategoryName2) 
```

**上面的路线不起作用，因为参数名称不匹配。**但是，如果我将类别操作中的表单提交到同名操作，例如：

```
[HttpPOST]
public ActionResult Category(ModelType Anyname){...} 
```

它工作得很好。但是，如果**我从其他地方提交表格，它会起作用吗？**

另一件事，当我们使用 [HttpGET] 注解时，它可以接收任何参数，没有限制，那么为什么只限制非动作动词注解的动作呢？谁能简要解释一下这个事实？

例如，我的这篇文章可以帮助我理解我的意思。我终于改变了路线以使其工作。

[是否可以/正确在一页中以 2 种不同形式使用多个 @Html.AntiForgeryToken()？](https://stackoverflow.com/questions/12341725/is-it-possible-right-to-use-multiple-html-antiforgerytoken-in-2-different-for)

谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T17:20:01.407

替换这个：

```
public ActionResult Category(Anytype CategoryName2) 
```

和

```
public ActionResult Category(Anytype CategoryName) 
```

这是因为您在路由中指定了名称为“CategoryName”的参数，并且您使用的是“CategoryName2”。

# c# - ASP.NET StreamWriter 无法间歇性工作

> ID：12355651
> 
> 赞同：1
> 
> 时间：2012-09-10T16:20:07.000
> 
> 标签：c#, asp.net, iis-7, ftp, streamwriter

我们遇到了一个问题，我们有一个函数被调用来创建 FTP 设置文件，但是有时这个函数从未被调用（因为 FTP 设置文件从不存在）并且这个问题是间歇性的。该函数在之后调用

```
 Directory.CreateDirectory(System.Web.HttpContext.Current.Server.MapPath(UploadPath));
  public bool GenerateFTPSettings()
{
    try
    {
        using (System.IO.StreamWriter file = new System.IO.StreamWriter(HttpContext.Current.Server.MapPath((string)HttpContext.Current.Session["UploadPath"]) + @"\ftp_settings.ftp"))
        {
            file.WriteLine(string.Format("user {0}",ConfigurationManager.AppSettings["FTPUserName"]));
            file.WriteLine(ConfigurationManager.AppSettings["FTPPassword"]);
            file.WriteLine(string.Format("QUOTE SITE LRECL=80 RECFM=FB CY PRI={0} SEC={1}", ConfigurationManager.AppSettings["PRI"], ConfigurationManager.AppSettings["SEC"]));
            file.WriteLine("BIN");
            file.WriteLine(string.Format("put {0}\\NEW FILE'FTPP.Z.T.{1}.{2}.INT'", HttpContext.Current.Server.MapPath((string)HttpContext.Current.Session["UploadPath"]),
              ConfigurationManager.AppSettings["FTPUserName"], ConfigurationManager.AppSettings["MailboxID"]));
            file.WriteLine("QUIT");
        }
        return true;
    }
    catch (Exception ex)
    {
        ErrorHandler.WriteError(ex, "Upload"); 
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T16:27:24.043

我看到两件事可能是。确保像这样刷新您的流：

```
using (System.IO.StreamWriter file = new System.IO.StreamWriter("somefile")
{
    //write to the stream
    file.Flush();
} 
```

您还确定会话具有值：

```
HttpContext.Current.Session["UploadPath"] 
```

它是否总是被填充，或者它是否会从会话中丢失？我会拆分逻辑以确保它是这样设置的：

```
string uploadPath = HttpContext.Current.Session["UploadPath"];
if (!string.IsNullOrEmpty())
{
    //write to the file
} 
```

# java - 此 get-HTML-from-Url-Function 中的错误在哪里？

> ID：12355652
> 
> 赞同：0
> 
> 时间：2012-09-10T16:20:06.623
> 
> 标签：java, android

我有这个功能：

```
public String getUrl(String url) {
            HttpClient httpclient = new DefaultHttpClient();
            String html = "";
            try {
                    CookieStore cookieStore = new BasicCookieStore();
                    HttpContext localContext = new BasicHttpContext();
                    localContext.setAttribute(ClientContext.COOKIE_STORE, cookieStore);

                    HttpGet httpget = new HttpGet(url);

                    // Pass local context as a parameter
                    HttpResponse response = httpclient.execute(httpget, localContext);

                    InputStream in = response.getEntity().getContent();
                    BufferedReader reader = new BufferedReader(
                                    new InputStreamReader(in));
                    StringBuilder str = new StringBuilder();
                    String line = null;
                    while ((line = reader.readLine()) != null) {
                            str.append(line);
                    }
                    in.close();
                    html = str.toString();

            } catch (ClientProtocolException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
            } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
            } finally {
                    httpclient.getConnectionManager().shutdown();
                    return html;
            }
    } 
```

问题是，这些函数从不返回任何字符（我已经用 google.de 试过了）。可悲的是，结果总是空的。

谢谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T16:22:13.190

我的猜测（我只能根据您提供的信息猜测）：

您忘记了清单中的 Internet 权限。

# scripting - 在 windows 2003 上安装 IIS 6 脚本工具

> ID：12355655
> 
> 赞同：0
> 
> 时间：2012-09-10T16:20:10.557
> 
> 标签：scripting, iis-6, installation, windows-server-2003

我想记录工作进程回收，默认情况下，IIS 不记录工作进程回收事件： http: [//www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/87892589-4eda-4003-b4ac-3879eac4bf48。 mspx?mfr=true](http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/87892589-4eda-4003-b4ac-3879eac4bf48.mspx?mfr=true)

为此，我需要文件夹 %systemroot%\inetpub\adminscripts 此文件夹包含 AdsUtil.vbs 管理脚本 [http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/d3df4bc9-0954-459a-b5e6- 7a8bc462960c.mspx?mfr=true](http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/d3df4bc9-0954-459a-b5e6-7a8bc462960c.mspx?mfr=true)

问题是我的服务器没有这个文件夹——即没有安装 Adsutil.vbs 管理脚本。

现在有很多方法可以在 IIS 7 上安装 IIS 6 脚本工具 - [http://myhosting.com/wiki/IIS_6_Scripting_Tools](http://myhosting.com/wiki/IIS_6_Scripting_Tools)

但是，如果它不存在，我在任何地方都找不到如何在 Windows 2003 上安装它。该服务器设置为应用程序服务器，并且 IIS 6 一直在其上完美运行，没有任何问题，因此并不是没有安装 IIS 6

我已经尝试过按照 technet 所说 的[http://technet.microsoft.com/en-us/library/bb808814.aspx](http://technet.microsoft.com/en-us/library/bb808814.aspx) 但是当我进入第 2 部分时：安装所需的 Windows Server 2003 组件

1.在控制面板中，选择添加或删除程序。2.在“添加或删除程序”对话框中，单击“添加/删除 Windows 组件”。3.在 Windows 组件向导中，选择应用程序服务器，然后单击详细信息。4\. 在应用程序服务器对话框中，选择 ASP.NET，选择 Internet 信息服务 (IIS)，然后单击确定。

现在我迷路了，不知道该去哪里。我什至不认为这是正确的选项卡。

所以我尝试了服务器角色管理你的服务器 - 管理这个应用程序服务器 - 现在我在这里迷路了 - 它显示应用程序服务器 -.net 配置 1.1 -IIS 管理器 - 组件服务

但是我看不到如何安装所需的脚本。该服务器已设置为“应用程序服务器（IIS、ASP.net）

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T20:48:40.660

如您所述，AdsUtil.vbs 应位于 Windows Server 2003 上的 %systemroot%\Inetpub\AdminScripts 文件夹中（即 c:\Inetpub\AdminScripts\adsutil.vbs）。我相信它通常与 IIS 一起安装，但如果您在某个时候将 IIS 根目录移到其他地方，它可能会在随机播放中丢失。

要取回它，您可以：

1.  从另一台拥有它的机器上抓取它。adsutil.vbs 除了我知道的 cscript 之外没有任何包袱/依赖项，因此您可以将其复制到另一台服务器上。

2.  使用 7Zip 或其他一些提取/资源管理器实用程序从 Windows Server 2003 安装盘中提取它。

3.  检查您的 Service Pack 安装文件中是否已有副本（即 C:\Windows\ServicePackFiles\i386\adsutil.vbs

# java - 使用其他包名导入 eclipse 项目？- 日食/安卓

> ID：12355665
> 
> 赞同：2
> 
> 时间：2012-09-10T16:20:45.280
> 
> 标签：java, android, eclipse

我在 Eclipse 中有项目（完成的应用程序）。现在我想复制这个项目，但使用其他包名。

我只想做一个新的应用程序，只有很小的变化（一些图像和数据库）。

如何导入具有其他包名的旧项目，或者在这种情况下我应该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T16:23:52.703

1.  将项目文件复制到新位置
2.  导入新项目
3.  右键单击您的新项目，然后选择 -> Android 工具|重命名应用程序包

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T16:29:42.367

在 Eclipse 中执行此操作的两种方法......

**1.**文件 --> 导入

**2.** File --> New Android Project --> Give path for the Project to be importing

现在`R_CLick on the Package from the Package Explorer --> then goto Refactor --> New name`

# android - 使用 android maven 插件运行 Proguard 来混淆 apklib 很难

> ID：12355667
> 
> 赞同：1
> 
> 时间：2012-09-10T16:20:51.210
> 
> 标签：android, maven-plugin, proguard

我希望在 android apklib 文件中混淆非公共方法等，以便我可以与其他人分发 apklib 文件，而不会影响共享我的所有源代码，因为 apklib 包含源代码。

我正在采取的方法是通过在 pom.xml 中启用 proguard.cfg 来混淆库项目中的非公共方法

这是我的 proguard.cfg 的样子

```
-optimizationpasses 5
-dontusemixedcaseclassnames
-dontskipnonpubliclibraryclasses
-dontpreverify
-verbose
-optimizations !code/simplification/arithmetic,!field/*,!class/merging/*

-keep public class * extends android.app.Activity
-keep public class * extends android.app.Application
-keep public class * extends android.app.Service
-keep public class * extends android.content.BroadcastReceiver
-keep public class * extends android.content.ContentProvider
-keep public class * extends android.app.backup.BackupAgentHelper
-keep public class * extends android.preference.Preference

-keepclasseswithmembernames class * {
    native <methods>;
}

-keepclasseswithmembers class * {
    public <init>(android.content.Context, android.util.AttributeSet);
}

-keepclasseswithmembers class * {
    public <init>(android.content.Context, android.util.AttributeSet, int);
}

-keepclassmembers class * extends android.app.Activity {
   public void *(android.view.View);
}

-keepclassmembers enum * {
    public static **[] values();
    public static ** valueOf(java.lang.String);
}

-keep class * implements android.os.Parcelable {
  public static final android.os.Parcelable$Creator *;
} 
```

这是我在 Maven 安装时遇到的错误

> 资源（默认资源）@ libraryprojects-lib1 --- [INFO] 使用 'UTF-8' 编码复制过滤的资源。[INFO] 复制 1 个资源 [INFO] 跳过不存在的 resourceDirectory C:\GSDevelopment\expworkspace\Samples\libraryprojects\libraryprojects-lib1\target\generated-sources\extracted-dependencies\src\main\resources [INFO] [INFO] - -- maven-compiler-plugin:2.5.1:compile (default-compile) @ libraryprojects-lib1 --- [INFO] 将 2 个源文件编译到 C:\GSDevelopment\expworkspace\Samples\libraryprojects\libraryprojects-lib1\target\类 [INFO] [INFO] --- android-maven-plugin:3.3.2:proguard (default-proguard) @ libraryprojects-lib1 --- [INFO] C:\GSDevelopment\tools\java\jdk1.6.0_33\ jre\bin\java [-Xmx512M, -jar, C:\GSDevelopment\tools\android-sdk\tools\proguard\lib\proguard.jar, @proguard.cfg, -injars,**,!org/w3c/** ,!java/ **,!javax/**\GSDevelopment\expworkspace\Samples\libraryprojects\libraryprojects-lib1\target\proguard-obfuscated.jar', -dump, 'C:\GSDevelopment\expworkspace\Samples\libraryprojects\libraryprojects-lib1\target\proguard\dump.txt', -printseeds, 'C:\GSDevelopment\expworkspace\Samples\libraryprojects\libraryprojects-lib1\target\proguard\seeds.txt', -printusage, 'C:\GSDevelopment\expworkspace\Samples\libraryprojects\libraryprojects-lib1\target\proguard \usage.txt', -printmapping, 'C:\GSDevelopment\expworkspace\Samples\libraryprojects\libraryprojects-lib1\target\proguard\mapping.txt'] [INFO] 注意：有 185 个重复的类定义。[信息] \GSDevelopment\expworkspace\Samples\libraryprojects\libraryprojects-lib1\target\proguard\dump.txt', -printseeds, 'C:\GSDevelopment\expworkspace\Samples\libraryprojects\libraryprojects-lib1\target\proguard\seeds.txt', -printusage, 'C:\GSDevelopment\expworkspace\Samples\libraryprojects\libraryprojects-lib1\target\proguard\usage.txt', -printmapping, 'C:\GSDevelopment\expworkspace\Samples\libraryprojects\libraryprojects-lib1\target\proguard \mapping.txt'] [INFO] 注意：有 185 个重复的类定义。[信息] \GSDevelopment\expworkspace\Samples\libraryprojects\libraryprojects-lib1\target\proguard\dump.txt', -printseeds, 'C:\GSDevelopment\expworkspace\Samples\libraryprojects\libraryprojects-lib1\target\proguard\seeds.txt', -printusage, 'C:\GSDevelopment\expworkspace\Samples\libraryprojects\libraryprojects-lib1\target\proguard\usage.txt', -printmapping, 'C:\GSDevelopment\expworkspace\Samples\libraryprojects\libraryprojects-lib1\target\proguard \mapping.txt'] [INFO] 注意：有 185 个重复的类定义。[信息] -printmapping, 'C:\GSDevelopment\expworkspace\Samples\libraryprojects\libraryprojects-lib1\target\proguard\mapping.txt'] [INFO] 注意：有 185 个重复的类定义。[信息] -printmapping, 'C:\GSDevelopment\expworkspace\Samples\libraryprojects\libraryprojects-lib1\target\proguard\mapping.txt'] [INFO] 注意：有 185 个重复的类定义。[信息] ***java.io.IOException：输出 jar 为空。您是否指定了正确的“-keep”选项？[INFO] 在 proguard.shrink.Shrinker.execute(Shrinker.java:159) [INFO] 在 proguard.ProGuard.shrink(ProGuard.java:275) [INFO] 在 proguard.ProGuard.execute(ProGuard.java:101) [信息] 在 proguard.ProGuard.main(ProGuard.java:492)***

我有两个带有两个私有方法的 java 文件。谁能指出我可能出了什么问题？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T06:24:19.917

不确定您是否还需要答案，但无论如何我都会给出答案，因为我遇到了类似的问题并偶然发现了您的问题......

关键是，引用 Proguard 手册：“为了确定哪些代码必须保留以及哪些代码可以丢弃或混淆，您必须为代码指定一个或多个入口点。这些入口点通常是类与主要方法、小程序、midlets、活动等"

因此，您的代码中似乎没有任何公开条目。必须有一个公共条目，否则任何东西如何使用您的库或操作系统（如 Android）如何调用您的代码。

您需要确定库的入口点是什么，然后需要确保正确使用“-keep”命令。例如，从库的 Proguard 示例中，这就是它们保持公共类的方式：

```
-keep public class * {
    public protected *;
} 
```

# c - 信号错误：“无效表达式的使用”

> ID：12355671
> 
> 赞同：0
> 
> 时间：2012-09-10T16:21:05.373
> 
> 标签：c, signals, multiprocess

我在使用“信号”功能时遇到了一些其他问题。我有 5 个子进程及其父亲。

一次只应运行一个进程，并且该进程应更改为具有一定延迟（从 1 到 10 秒）的另一个随机进程。对于这些更改，必须使用 SIGUSER1 信号。这是我的代码和我遇到的错误：

```
struct compartido{
   int pid1, pid2, pid3, pid4, pid5;
   int propietario;     
   int contador;            
   int pidpadre;            
};

   struct compartido* var;  

void manejador(int prop, int actual){
   if(signal(SIGUSR1,SIG_IGN)==SIG_ERR){
      perror("Error en el Signal.\n");
      exit(2);
   }
   printf("Proceso %d al mando en el manejador.\n",prop);

   kill(prop,SIGCONT);
   if(actual==getpid()) kill(actual,SIGSTOP);

   sleep(rand() % 11 + 1);
}

int main(int argc, char *argv[]) {

    key_t llave1,llavesem;  
    int idmem,idsem;    

    idmem=shmget(llave1,sizeof(struct compartido),IPC_CREAT|0600);
    if (idmem==-1) {
        perror ("shmget");
        return 1;
    }
    var=(struct compartido*) shmat(idmem,0,0);
    var->pidpadre=getpid();

    var->propietario=var->pid1;
    /*Next line gives the error*/
    if(var->pid1==getpid()) signal(SIGUSR1,manejador(var->propietario, getpid()));

    /*Doing more things inside...*/

    /*Next line gives the error*/
   signal(SIGUSR1,manejador(var->propietario, getpid()));
} 
```

据我所知，名为“manejador”的函数可以与一个 int 值一起使用 void manejador(int s){ printf("Signal received %d\n",s); }

但我需要 2 个变量，因为我应该停止当前进程并重新启动新进程。

我遇到的确切错误说：

> 错误：无效表达式的使用无效

你能帮我么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T16:23:23.110

> ```
> signal(SIGUSR1,manejador(var->propietario, getpid())); 
> ```

*   您需要传递函数标识符而不是调用函数，即只需保留`manejdor`

*   信号处理程序具有您必须尊重的非常具体的布局：信号处理程序必须采用一个`int`参数并返回`void`

# asp.net - 在 IIs6 中模拟

> ID：12355672
> 
> 赞同：0
> 
> 时间：2012-09-10T16:21:07.950
> 
> 标签：asp.net, iis-6, access-denied, impersonation

我们的网络服务器出现问题，它拒绝访问共享文件夹，经过一番调查，我注意到“WindowsIdentity.GetCurrent().Name”返回客户端用户名“我的用户名”而不是“网络服务” '。

现在，如果我将以下代码添加到 Web 配置中，该应用程序当前可以运行并使用“网络服务”。

```
<identity impersonate="false" /> 
```

我的问题是，在 IIS6 中是否有任何地方可以使用/设置来强制所有应用程序使用“网络服务”用户？

在此先感谢您的帮助，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T16:29:04.337

`impersonate="false`在 machine.config 中设置框。默认情况下，machine.config 没有`impersonate`打开。

# php - How to build a mysql query in php that uses an "IN" clause

> ID：12355680
> 
> 赞同：1
> 
> 时间：2012-09-10T16:21:45.093
> 
> 标签：php, mysql

I was working on a search form that stores people's names in an array, and then wanted to create a query on the results page in PHP that uses an IN clause (if that's the best way; feel free to point me in another direction). Basically the page has checkboxes for all the names, so they can check one, many or all names. I tried using the implode function, but have been unsuccessful so far.

```
$yourName = implode("', '", $_POST['Your_name']);

if($dutyReq=="All" && $yourName!="All" ) $query="SELECT * FROM talent_eas WHERE Your_name IN ('$yourName')"; 
```

Does that look at all right? Would that handle all scenarios? I'm just starting out with PHP so I have no idea what I'm doing. I tried searching for my specific question but just didn't seem to see much use of the IN clause.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T16:25:16.860

Yes, that how to use IN. Here are some more examples:

```
SELECT * FROM users WHERE name IN ('John','Jane');

SELECT * FROM some_table WHERE the_month IN ('January','April','September'); 
```

Also, please read on [SQL Injections](http://php.net/manual/en/security.database.sql-injection.php).

**For your comment:**

You need to use mysql_real_escape_string BEFORE the implode. So your code should be:

```
$yourName = implode("', '", mysql_real_escape_string($_POST['Your_name'])); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T16:27:43.333

You can Use

SELECT * FROM talent_eas WHERE Your_name IN ('shail','jyoti');

I suggest you to read Mysql Injection, else your code can be hacked easily

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T16:46:47.053

Here's few ways to prevent SQLi

```
# 1\. Map each name with escape function
$yourname = implode("', '", array_map('mysql_real_escape_string', $_POST['Your_name']));

# 2\. Use PDO with prepare statement (with placeholders e.g. (?, ?, ?)
$placeholders = array_fill(0, sizeof($_POST['Your_name']), '?');
$stmt         = $pdo->prepare('SELECT * FROM talent_eas WHERE Your_name IN ('.implode(', ', $placeholders).')';

$stmt->execute($_POST['Your_name']); 
```

# .net - 在 Cruise Control .NET 中共享源代码控制/构建工件

> ID：12355682
> 
> 赞同：0
> 
> 时间：2012-09-10T16:21:48.993
> 
> 标签：.net, continuous-integration, cruisecontrol.net

我有一个存储库，它的目录结构下面有多个项目，我希望为我的存储库中的每个项目设置一个唯一的 CC.NET 项目。

我遇到了两个独特的挑战，我想确保我能做到这一点，而不会伤到自己的脚。

我主要关心的是源代码控制，我可以用`<cc:define>`预处理器块复制源代码控制块，这很好。但是，我担心源代码控制冲突。如果两个项目同时运行，一个项目可能会在另一个正在构建时更新源代码控制。有没有办法安全地共享这个源代码控制资源？

我曾考虑过有一个特殊的项目来负责所有从源更改/定期间隔/等触发的 CI，并让其他项目在该项目完成后触发。这对我来说似乎有点阴暗。

另一个问题是依赖关系，我知道 CC.NET 可以使用解决方案文件（并且经常被推荐），这里的问题是我真的不想为 CC.NET 中的每个项目构建我的库项目一次。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T19:41:49.617

您可以添加一个队列，这样当一个项目正在构建/更新源时，它会阻止所有其他项目这样做。

否则，您可以为每个 ccnet 项目在磁盘上创建一个新报告 - 这确实会破坏您理想中想要做的事情。

然而，优点是一个 ccnet 项目不会阻止另一个 - 如果需要一段时间来构建/更新

# android - 有没有办法在同一个工作区中制作项目的副本？

> ID：12355686
> 
> 赞同：1
> 
> 时间：2012-09-10T16:22:10.757
> 
> 标签：android, eclipse

我在 Eclipse 中有一个基本的相册项目。我想以此为基础制作专门的相册项目。

有没有办法可以将我的 phtotalbulm 项目复制到一个新项目中，相同的 eclipse 工作区，并说它叫 carphotoabulm 之类的东西？？？？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T17:08:39.167

好吧，如果您想在另一个专门的应用程序项目中实现您已经存在的代码，我认为最好将您以前的项目用作**库**并在您的新项目中引用它。这样，`PhotoAlbum`您可以在`CarPhotoAlbum`. 它可以被认为类似于继承，其中父类可以用作派生子类中特化的基类。

**创建项目的克隆：**打开要复制的项目。使用 Cntrl-C 和 Cntrl-V 复制和粘贴。当您完成粘贴时，Eclipse 会要求您输入一个新的项目名称。Eclipse 项目名称和目录独立于应用程序名称和包。

请查看[此问题](https://stackoverflow.com/questions/5483539/android-copy-existing-project-with-a-new-name)以获取更多详细信息。

# c# - 使用大量内存的位图图像

> ID：12355690
> 
> 赞同：2
> 
> 时间：2012-09-10T16:22:18.693
> 
> 标签：c#, .net, silverlight

我有一个应用程序，它从 XML 文件（到字节数组）读取 JPEG，生成 MemoryStreams 并使用这些来实例化 BitmapImages。JPEG 文件的总大小约为 60 MB。但是，我的应用程序的内存使用量为 1.6GB（之后发生系统内存不足异常）。

我将字节数组、MemoryStreams 和（当然）BitmapImages 保留在内存中。因此，我希望得到存储在内存中的原始大小的大约三倍（也许更多），但 1.6GB 是荒谬的。

这可能是什么原因造成的？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T17:06:40.267

没那么荒谬，真的。要记住的一个好的经验法则是，JPEG 平均约为保存为 BMP 的相同图像大小的 10%。有些图像的可压缩性更高，有些则更少，JPEG 编码器的质量和压缩设置会产生显着差异，但根据我的经验，这个原则通常是成立的。

如果我们在这种情况下接受该规则为真，那么您的程序仅存储了至少 720MB 的图像数据；字节数组和 MemoryStreams 中的 60MB JPEG 数据，然后是 600MB 未压缩的 BMP 图像。此外，该程序还将自己和任何引用的第三方二进制文件加载到同一内存空间（包括引用的框架命名空间的 DLL；人们经常忘记框架不是“免费”使用的，只是因为它是“内置的” )，并记住某些集合以非常乐观的方式为自己请求内存；例如，每次达到 List 的内部最大容量时，它都会将自身调整为之前大小的两倍。字典也是如此，只是增加了维护两个内部数组结构的开销；一个用于密钥哈希，另一个用于“节点”，其中包含链接到键哈希的实际值。这种行为很容易导致处理大量对象集合的程序请求比运行时允许提供的更多内存。然后，如果这是一个图形应用程序，运行时会为每个使用图形元素的线程维护一个消息循环，并挂钩到每个图形元素（每个“窗口”，尽管该术语用词不当，因为实际上所有 GUI 元素都是“ windows”，而不仅仅是通常称为 windows 的 Form 对象）。

所有这些都可以轻松地使应用程序需要 1.6GB 的托管内存。然后，当应用程序要求增加 400MB 内存（以调整大型集合的大小）或超过 21 亿的新句柄时（.NET 即使在 64 位操作系统中也使用 32 位索引，因此运行时只能跟踪每个进程总共2 ^(32 个不同的内存地址），运行时将注入一个 OOME。)

# objective-c - How do I get the startDate of an event that is already on my iPhone's calendar?

> ID：12355695
> 
> 赞同：0
> 
> 时间：2012-09-10T16:22:34.673
> 
> 标签：objective-c, ios, xcode, nsarray, ekevent

I am making an app for myself and I need to access the startDate and endDate of specific events that are already in my calendar. How can I go about doing this? I have tried storing a list of events into an array but once the events are in the array, what is the point, how can I access them?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T17:07:20.377

You can save the eventIdentifier property of the EKEvents in the array.

```
EKEventStore *eventStore = [[EKEventStore alloc] init];
// Create the predicate from the event store's instance method

NSPredicate *predicate = [store predicateForEventsWithStartDate:oneDayAgo

                                                    endDate:oneYearFromNow

                                                  calendars:nil];

// Fetch all events that match the predicate

NSArray *eventsArray = [store eventsMatchingPredicate:predicate];

for (EKEvent *eventToCheck in eventsArray) {
    if ([eventToCheck.eventIdentifier isEqualToString:[eventsIdentifierArray objectAtIndex:i]]) {
        //Do your changes here
        NSLog(@"%@", eventToCheck.startDate);
        NSLog(@"%@", eventToCheck.endDate);
    }
} 
```

[Refer this](http://developer.apple.com/library/ios/#documentation/DataManagement/Conceptual/EventKitProgGuide/ReadingAndWritingEvents.html#//apple_ref/doc/uid/TP40004775-SW5)

# php - PHP 如果第一个 MySQL 查询的结果为零，则循环另一个查询直到找到结果

> ID：12355698
> 
> 赞同：1
> 
> 时间：2012-09-10T16:22:45.747
> 
> 标签：php, mysql, loops

我有一个可能很基本的问题，但完全让我感到困惑。

我有一个网站可以从某个位置提取附近的邮政编码（即，如果我将我的位置设为密歇根州底特律，那么我会得到邮政编码 48201、48272、48260、48226、48255、48275、48267、48231、48268、48278 等。 ) 它获取的数量是可变的（底特律获得 28，巴尔的摩，马里兰州获得 15）。

该网站正在抓取附近的鲜花递送地点（在这种情况下，该地点是殡仪馆）。

如果当前邮政编码（即 48201）中没有殡仪馆，则应检查相邻邮政编码`$zipListArray`（48272 等），直到找到 5 个结果。

我尝试了两种不同的代码...

```
$num_rows = mysql_num_rows($result); //This is from the previous query, where it checks the immediate zip code
$i = 0;
while ($num_rows < 5) {
   $result = mysql_query('SELECT funeralh_name, address1, city, state_abbr, zipcode, phone FROM funeral_homes WHERE city != "" AND zipcode = "'.$zipListArray[$i].'" AND state_abbr = "'.$abbr.'"');
   $num_rows = mysql_num_rows($result);
   $i++;
} 
```

对于没有 5 个相邻殡仪馆的任何较小的城市或城市群，此代码将是一个无限循环。

```
$inc = 0;
if ($num_rows == 0) {
   foreach ($zipListArray as $zip) {
      $result = mysql_query('SELECT funeralh_name, address1, city, state_abbr, zipcode, phone FROM funeral_homes WHERE zipcode = "'.$zip[$inc].'"');
      $total = 0;
      $num_rows = mysql_num_rows($result);
      $total += $num_rows;
      if ($total == 5){
         break;
      }
      $inc++;
      }
} 
```

这个我根本无法上班。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T16:26:20.657

这听起来像一个糟糕的主意（查询数据库直到你得到你所得到的）。

为什么不改进查询，以便在 1 个查询中获得最近的邮政编码（查看[`abs()`](https://dev.mysql.com/doc/refman/5.0/en/mathematical-functions.html#function_abs)函数）？

或者使用数据库引擎的 GEO 功能在数据库中添加坐标。或者，如果它不可用[haversine 公式](http://en.wikipedia.org/wiki/Haversine_formula)。

附言

最近的邮政编码通常不是最近的位置。为此使用一些 GEO / maps API。

**更新**

*我有点误读了你的问题，但我最初的陈述仍然有效。对这种事情进行多次查询是一个愚蠢的想法*

我现在才看到您已经有一个要检查的 ziplist。尽管我仍然认为如果您真的想走那条路线，这可能不是最佳方法，但您应该使用[`in()`](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_in)运算符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T16:27:38.693

你最好`WHERE ... IN`搜索所有可能的邮政编码，例如

```
$zips = implode(',', $zipListArray);
$sql = "SELECT ... WHERE ... AND zipcode IN ($zips)";
                                         ^^^^^^^^^^ 
```

这样，您只运行一个查询，您可以获得所有可能的 zip，并且您可以添加 LIMIT 子句以将结果限制为仅 5 行 - 或仅获取最多 5 行。无论哪种方式，您都消除了 for() 循环，因此您不会以无限循环结束，以防一开始附近没有 5 个以上的花卉位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T16:32:44.460

而不是在循环中对数据库进行多个查询查询似乎不是一个好方法。PeeHaa 在他的回答中提出了一些很好的建议，但如果您不想担心地理定位技术，为什么不只运行一个查询，例如

```
SELECT funeralh_name, address1, city, state_abbr, zipcode, phone
FROM funeral_homes WHERE zipcode IN ('12345', '23456', ...)
ORDER BY zipcode ASC 
```

这意味着您必须使用更大的数据集并手动检查结果集，以首先找到与邮政编码完全匹配的数据集，然后查看替代数据。但也许这对你来说比尝试使用地理空间数据更麻烦。

或者，您可以先`LIMIT 5`只搜索您的邮政编码，如果返回的记录少于 5 条，您可以对列表中的所有其他邮政编码进行第二次查询，将结果数限制为提供 5 条所需的数量全部的。这将最多对数据库进行 2 次查询。

我个人会使用 Google API 或 MySQL 空间扩展 (http://dev.mysql.com/doc/refman/5.0/en/spatial-extensions.html) 来完成这项工作。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-10T16:30:43.037

```
if ($num_rows == 0) {
    $zips = implode(', ', $zipListArray);
    $result = mysql_query('SELECT funeralh_name, address1, city, state_abbr, zipcode, phone FROM funeral_homes WHERE zipcode IN (' . $zips . ') LIMIT 5');
} 
```

# mongodb - 有什么简单的方法可以判断 mongodb 索引是否仍在使用？

> ID：12355702
> 
> 赞同：10
> 
> 时间：2012-09-10T16:23:01.320
> 
> 标签：mongodb, indexing

随着我项目的代码不断发展，新的索引正在到位，我相信一些旧的索引不再需要。但是，在我放弃它们以查看是否有任何减慢之前，我希望是否有更多的编程或分析方法来确定是否正在使用索引。

我在 system.indexes 集合中看不到任何内容，但理想情况下，某处有一些关于索引访问的统计信息！是这样吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-10T16:42:34.030

最后运行您的`db.collection.find(...)`查询`.explain()`。这是查看查询如何运行的最有用的方法：[http ://www.mongodb.org/display/DOCS/Explain](http://www.mongodb.org/display/DOCS/Explain)

您还可以打开分析，分析日志条目为您提供每个分析查询的索引使用情况。不过，目前还没有任何汇总统计数据。特别是，它不会给你哪些索引没有被使用，只有正在使用的索引（对于每个查询）。（编辑：我一定一直在想象——你必须从探查器获取查询，然后对其运行解释。手动有点痛苦。）[http://www.mongodb.org/display/DOCS/Database+Profiler](http://www.mongodb.org/display/DOCS/Database+Profiler)

*更新：* 刚从 mongolab 看到这个；看起来像一个有趣的新项目： http: [//blog.mongolab.com/2012/06/introducing-dex-the-index-bot/](http://blog.mongolab.com/2012/06/introducing-dex-the-index-bot/)

*更新：* 我创建了一个脚本来通过分析器检查未使用的索引： [https ://github.com/wfreeman/indexalizer](https://github.com/wfreeman/indexalizer)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-12-05T17:07:28.833

是的，同意其他答案，对正在执行的查询使用解释（）应该给我们信息，但是对于最新版本，我们可以尝试类似：

```
db.collection.aggregate([ { $indexStats: { } } ]) 
```

请查看以下链接以获取更多信息：

[如何检查是否正在使用索引](https://stackoverflow.com/questions/24535439/how-do-i-check-if-an-index-is-being-used)

[https://docs.mongodb.com/manual/reference/operator/aggregation/indexStats/#pipe._S_indexStats](https://docs.mongodb.com/manual/reference/operator/aggregation/indexStats/#pipe._S_indexStats)

# fitnesse - FitNesse 测试：获取 DOM 节点的数量

> ID：12355703
> 
> 赞同：0
> 
> 时间：2012-09-10T16:23:04.283
> 
> 标签：fitnesse

我是 FitNesse 的新手，我试图弄清楚如何编写一个测试来计算给定 DOM 元素的子元素数量，然后测试该数字。任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T18:38:24.593

您如何整合 FitNesse 和 Selenium？通过在您的灯具中直接调用 WebDriver？

如果您使用自己的 WebDriver 实现（或任何其他允许您直接使用 WebElement 对象的方法），您可以通过选择所有子节点并计算这些节点来查询 WebElement：

```
public int countTotalChildElementsForElement(final WebElement domElement) {
    return domElement.findElements(By.xpath("//*")).size();
} 
```

# html - Chromium Embedded Framework 是否支持 HTML5 音频？

> ID：12355706
> 
> 赞同：5
> 
> 时间：2012-09-10T16:23:08.340
> 
> 标签：html, audio, mp3, chromium, ogg

我一直在玩 CefSharp，但似乎无法播放任何音频。我可以让音频控件出现，但它们仍然冻结。

这些是我使用的版本：

```
Chromium: 21.0.1180.0, CEF: r728, CefSharp: 0.12.4596.50 
```

我首先尝试了 .mp3，然后是 .ogg，最后是 .wav，但没有一个可以工作。

这是我尝试使用 .ogg 时加载的 HTML 和音频：

```
public bool OnBeforeResourceLoad(IWebBrowser browser, 
    IRequestResponse requestResponse)
{
    IRequest request = requestResponse.Request;

    if (request.Url.EndsWith(".gif")) {
        MemoryStream stream = new MemoryStream();
        Properties.Resources.cursor_test.Save(stream,
            System.Drawing.Imaging.ImageFormat.Bmp);
        requestResponse.RespondWith(stream, "image/gif");
    }
    else if (request.Url.EndsWith(".ogg")) {
        MemoryStream stream = new MemoryStream(Properties.Resources.foo);
        requestResponse.RespondWith(stream, "audio/ogg");
    }
    else {
        Stream resourceStream = new MemoryStream(Encoding.UTF8.GetBytes(
            @"<!DOCTYPE html>
<html>
<body>
    <img src=""bla1/bla2/foo.gif"" />
    <audio controls=""controls"" autoplay=""autoplay"">
        <source src=""foo.ogg""  />
    </audio>
</body>
</html>"));
        requestResponse.RespondWith(resourceStream, "text/html");
    }

    return false;
} 
```

这就是 Chromium 的样子：

![在此处输入图像描述](../Images/cd427647e793f90540df2a5511605a3e.png)

我读到也许 Chromium[只支持开放格式](http://code.google.com/p/chromiumembedded/issues/detail?id=371)。我还阅读了也许[音频暂时不可用](http://code.google.com/p/chromium/issues/detail?id=112159)。

`<audio />`Chromium 和 CEF的当前状态是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T12:14:44.497

默认情况下，出于法律原因禁用对 MP3 音频的支持。
您可以通过重建 CEF 来启用它。在此处查看详细信息：
[Chromium Embedded Framework MP3 支持](https://stackoverflow.com/questions/8033495/chromium-embedded-framework-mp3-support/12354577)

# javascript - Dojo IE DataGrid 内联编辑

> ID：12355707
> 
> 赞同：2
> 
> 时间：2012-09-10T16:23:17.793
> 
> 标签：javascript, dojo, dojox.grid.datagrid

我已经在 DataGrid 中启用了单元格的内联编辑，它在除 IE 之外的所有浏览器中都可以正常工作。

问题是，双击一个单元格并更改单元格的值后，我必须双击网格中的另一个单元格。如果我在网格外单击/双击，则用户正在编辑的单元格仍处于编辑模式。

我已经覆盖了 datagrid 的 onApplyCellEdit 事件以捕获更改并提交到服务器。

IE的开发者工具控制台没有javascript错误

对此有任何想法或指示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T11:44:35.977

这也已添加到其他链接的问题中，但为了完整起见也在此处添加。

好的，我找到了解决方法。似乎它工作得很好。您需要注册网格的 onBlur 事件并在网格上手动调用 save。

```
vGrid.onBlur = function(){
    var grid = dijit.byId('validation_grid');
    if (grid.edit.isEditing()){
        grid.edit.apply();
    }
}; 
```

# python - 如何使用 python 向 gtalk 发送消息？

> ID：12355713
> 
> 赞同：1
> 
> 时间：2012-09-10T16:23:48.373
> 
> 标签：python, xmpp, ejabberd, google-talk

我正在尝试使用 XMPP 服务器及其相关的 python 库，我将使用以下 python 代码段使用我的帐户向谷歌用户发送消息：

```
import sys,os,xmpp
jid=xmpp.protocol.JID('MYGOOGLEACCOUNT@gmail.com')
cl=xmpp.Client(jid.getDomain(), debug=[])
cl.connect()
cl.auth(jid.getNode(),'MYPASSWORD')
cl.sendInitPresence()
cl.send(xmpp.protocol.Message('MYTARGET','MYMESSAGE')) 
```

但我收到了这个错误：

> 查找 _xmpp-client._tcp.gmail.com 时出错

好的，现在我想知道如何解决这个问题。之后，我如何使用 python 而不是 gtalk 接收该消息。tnx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T00:29:50.440

您可以在这里查看已完成的 gtalk 客户端：[http](http://wiki.woodpecker.org.cn/moin/GoogleTalkBot) ://wiki.woodpecker.org.cn/moin/GoogleTalkBot 我也发现了另一个类似的问题，您可以在这里查看： [Can't connect to gtalk with python and xmpppy](https://stackoverflow.com/questions/8280727/cant-connect-to-gtalk-with-python-and-xmpppy)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T17:28:37.503

确保您已安装[dnspython](http://www.dnspython.org/)或[PyDNS](http://pydns.sourceforge.net/)。

# jquery - ColorBox - CDN 上所有图像的 jQuery 选择器

> ID：12355715
> 
> 赞同：0
> 
> 时间：2012-09-10T16:23:51.080
> 
> 标签：jquery, colorbox, cdn

我刚刚将我的网站设置为使用 CDN，这一切都按计划进行，并且大部分都按预期工作 - 除了我用于图像的 colorbox 之外。

我感觉它不再起作用了，因为所有图像的末尾都有一个查询字符串（例如`image.png?9d7bd4`），这破坏了我的 jQuery 选择器：

```
/* colorbox - use it on all links to images */
$('a[href$=".jpg"],a[href$=".jpeg"],a[href$=".png"],a[href$=".gif"]').colorbox({
    'rel': 'images',
    'photo': true,
    'maxWidth': '90%',
    'maxHeight': '90%'
}); 
```

有人可以帮我重写 jQuery 代码以使其工作吗？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T16:30:46.277

您使用的是选择器的结尾。您想将其更改为“包含”。

```
/* colorbox - use it on all links to images */
$('a[href*=".jpg"],a[href*=".jpeg"],a[href*=".png"],a[href*=".gif"]').colorbox({
    'rel': 'images',
    'photo': true,
    'maxWidth': '90%',
    'maxHeight': '90%'
}); 
```

有关属性选择器的更多信息：[https ://developer.mozilla.org/en-US/docs/CSS/Attribute_selectors](https://developer.mozilla.org/en-US/docs/CSS/Attribute_selectors)

但是，如果可能的话，您可以向图像添加一个类，以便更轻松地选择它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T16:28:42.610

[您可以使用contains](http://api.jquery.com/attribute-contains-word-selector/)代替使用 ends-with 选择器：

```
/* colorbox - use it on all links to images */
$('a[href*=".jpg"],a[href*=".jpeg"],a[href*=".png"],a[href*=".gif"]').colorbox({
    'rel': 'images',
    'photo': true,
    'maxWidth': '90%',
    'maxHeight': '90%'
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T16:31:58.920

或者作为**包含 Word**的替代品，您可以使用**包含**选择器

```
/* colorbox - use it on all links to images */
$('a[href*=".jpg"],a[href*=".jpeg"],a[href*=".png"],a[href*=".gif"]').colorbox({
    'rel': 'images',
    'photo': true,
    'maxWidth': '90%',
    'maxHeight': '90%'
}); 
```

它对我有用

# android - 安卓。在运行时将库写入 lib 文件夹

> ID：12355719
> 
> 赞同：2
> 
> 时间：2012-09-10T16:24:06.810
> 
> 标签：android

我了解到“libs”项目文件夹中的 Android 应用程序库被写入 /data/data/[package_name]/lib 文件夹。在运行时，如果需要，它们会从该位置加载。

我正在编写一个出租车司机安卓应用程序。我们决定将其作为一个模块包来执行，如果需要，可以通过 Internet 进行更新。因此，如果有更新，则只更新需要的文件，而不是整个 apk。这已经有效了！但我们计划添加地图，以便司机可以在其中一个的帮助下构建出租车驱动器根并在屏幕上看到它。

我开始研究适用于 Android 的 Yandex Map Kit。问题是这个工具包有一个本地库（甚至它的两个版本，用于不同的硬件），在运行时通过 System.loadLibrary() 加载。我也希望将这些 .so 文件作为模块通过 Internet 加载，因此我需要一种将文件写入应用程序的 /data/data/[package_name]/lib 文件夹的方法。那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-25T09:18:07.013

使用此代码：

```
public class MainActivity extends Activity {
    private final static int FILE_WRITE_BUFFER_SIZE = 32256;
    String[] libraryAssets = {"libmain.so"};
    static MainActivity instance;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        instance = this;
        File libs = getApplicationContext().getDir("libs", 0);
        File libMain = new File(libs, libraryAssets[0]);
        File input = new File(Environment.getExternalStorageDirectory(), libraryAssets[0]);
        if(libMain.exists()){
            Log.v("Testing", "exist");
        }else{
            try {
                InputStream is = new BufferedInputStream(new FileInputStream(input), FILE_WRITE_BUFFER_SIZE);
                if(streamToFile(is, libMain)){
                     Log.v("Testing", "File copied");
                }
            } catch (FileNotFoundException e) {
                     Log.v("Testing", e.toString());
            } catch (IOException e) {
                     Log.v("Testing", e.toString());
            }
        Log.v("Testing", libMain.getAbsolutePath());
        }
    }

    private boolean streamToFile(InputStream stm, File outFile) throws IOException{
        byte[] buffer = new byte[FILE_WRITE_BUFFER_SIZE];
        int bytecount;
        OutputStream stmOut = new FileOutputStream(outFile, false);
        while ((bytecount = stm.read(buffer)) > 0){
            stmOut.write(buffer, 0, bytecount);
        }
        stmOut.close();
        stm.close();
        return true;
    }

    public static Context getContext(){
           return instance;
    }
} 
```

在需要加载库的类中：

```
private static File libMain = new File(MainActivity.getContext().getDir("libs", 0), "libmain.so");

static{
    try {
        System.load(libMain.getAbsolutePath());
    }catch(Exception e){
        Log.v(Tag, e.toString());
    }catch(UnsatisfiedLinkError e){
        Log.v(Tag, e.toString());
    }
} 
```

# android - Android 上的 OpenX 不会获取广告

> ID：12355720
> 
> 赞同：0
> 
> 时间：2012-09-10T16:24:07.197
> 
> 标签：android, mobile, openx

我在我的应用程序中实现 OpenX 时遇到问题。这就是我设置 OXMAdController 的方式：

```
protected void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);

    //OpenX init (needs to be called before setContentView method)
    OXMManagersResolver.getInstance().prepare(this);

    setContentView(R.layout.category_pager);    

    //Setting OpenX
    try
    {
        mAdController = new OXMAdController(this, "ads.domain.com");
    }
    catch (OXMAndroidSDKVersionNotSupported e) 
    {
        e.printStackTrace();
    }

    mAdController.setAdControllerEventsListener(new OXMAdControllerEventsListener() 
    {
        @Override
        public void adControllerWillLoadAd(OXMAdBaseController arg0) 
        {
            Log.v("test", "adControllerWillLoadAd");
        }

        @Override
        public void adControllerDidLoadAd(OXMAdBaseController arg0) 
        {
            Log.v("test", "adControllerDidLoadAd");
        }

        @Override
        public void adControllerDidFailWithNonCriticalError(OXMAdBaseController arg0, OXMError arg1) 
        {
            Log.v("test", "adControllerDidLoadAd");
        }

        @Override
        public void adControllerDidFailToReceiveAdWithError(OXMAdBaseController arg0, Throwable arg1) 
        {
            Log.v("test", "adControllerDidFailToReceiveAdWithError");
        }

        @Override
        public void adControllerActionUnableToBegin(OXMAdBaseController arg0) 
        {
            Log.v("test", "adControllerActionUnableToBegin");
        }

        @Override
        public boolean adControllerActionShouldBegin(OXMAdBaseController arg0, boolean arg1) 
        {
            Log.v("test", "adControllerActionShouldBegin");
            return true;
        }

        @Override
        public void adControllerActionDidFinish(OXMAdBaseController arg0) 
        {
            Log.v("test", "adControllerActionDidFinish");
        }
    });

    mAdController.initForAdUnitIds(43, 43);
    mAdController.startLoading();
} 
```

服务器返回回调方法`adControllerDidFailToReceiveAdWithError`两次。第一次错误是`com.openx.ad.mobile.sdk.errors.OXMServerWrongStatusCode: Server returned 404 status code`，第二次错误是`com.openx.ad.mobile.sdk.errors.OXMServerWrongResponse: Server response parsing error.`

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T14:50:40.263

首先，“ads.domain.com”是未知域。它是 OpenX 就绪的服务器吗？尝试调查演示应用程序控制台日志以获取更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-15T19:20:33.837

另外要问的是你的banner在哪里？没有它，控制器不会显示任何内容。你应该有这样的东西：

```
 @Override
            public void adControllerWillLoadAd(OXMAdBaseController c) {
                Log.w(HangApp.TAG, "adControllerWillLoadAd");
                RelativeLayout parent = (RelativeLayout) findViewById(R.id.ad_parent);
                OXMAdBannerView view = mAdController.getAdBannerView();

                if (view != null) {
                    findViewById(R.id.ad_image).setVisibility(View.GONE);
                    RelativeLayout.LayoutParams layoutParams = new RelativeLayout.LayoutParams(
                            RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT);
                    layoutParams.addRule(RelativeLayout.CENTER_IN_PARENT, 0);
                    view.presentAdInViewGroup(parent, layoutParams);
                }
            } 
```

# jsf-2 - JSF：从 JBoss 6 切换到 JBoss 7 后找不到“scrollListener”方法

> ID：12355728
> 
> 赞同：1
> 
> 时间：2012-09-10T16:24:43.047
> 
> 标签：jsf-2, richfaces, jboss7.x

我有一个带有以下代码的 Web 应用程序：

```
<rich:dataScroller id="id1" for="tableX" execute="tableX" page="#{formBackingBean.navigationHelper.scrollerPage}" render="tableX-sc1 tableY" maxPages="5" scrollListener="#{aBean.handleScrollPage()}" fastControls="hide" /> 
```

我使用richfaces 4.2.0 final，在JBoss 6 下（我使用Mojarra 2.0.3 作为JSF 实现）这工作正常。我在 JBoss EAP 6（即 Jboss 7）上安装了应用程序，但出现以下异常：

```
[javax.enterprise.resource.webcontainer.jsf.lifecycle] (http-localhost/127.0.0.1:8080-1) /example/pages/common/myPage.xhtml @93,29 scrollListener="#{aBean.handleScrollPage()}": Method not found: example.pagecode.ABean$Proxy$_$$_WeldSubclass@1cf00a1.handleScrollPage(): javax.el.MethodNotFoundException: example/pages/common/myPage.xhtml @93,29 scrollListener="#{aBean.handleScrollPage()}": Method not found: example.ABean$Proxy$_$$_WeldSubclass@1cf00a1.handleScrollPage()
    at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:109) [jsf-impl-2.1.7-redhat-1.jar:2.1.7-redhat-1]
    at org.richfaces.taglib.MethodExpressionScrollListener.processDataScroll(MethodExpressionScrollListener.java:27) [richfaces-components-ui-4.2.0.Final.jar:4.2.0.Final]
    at org.richfaces.event.DataScrollEvent.processListener(DataScrollEvent.java:83) [richfaces-components-api-4.2.0.Final.jar:4.2.0.Final]
    at javax.faces.component.UIComponentBase.broadcast(UIComponentBase.java:769) [jboss-jsf-api_2.1_spec-2.0.2.Final-redhat-1.jar:2.0.2.Final-redhat-1]
    at org.richfaces.component.AbstractDataScroller.broadcast(AbstractDataScroller.java:166) [richfaces-components-ui-4.2.0.Final.jar:4.2.0.Final]
    at org.richfaces.component.RowKeyContextEventWrapper.broadcast(RowKeyContextEventWrapper.java:104) [richfaces-components-ui-4.2.0.Final.jar:4.2.0.Final]
    at org.richfaces.component.UIDataAdaptor.broadcast(UIDataAdaptor.java:455) [richfaces-components-ui-4.2.0.Final.jar:4.2.0.Final]
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794) [jboss-jsf-api_2.1_spec-2.0.2.Final-redhat-1.jar:2.0.2.Final-redhat-1]
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259) [jboss-jsf-api_2.1_spec-2.0.2.Final-redhat-1.jar:2.0.2.Final-redhat-1]
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81) [jsf-impl-2.1.7-redhat-1.jar:2.1.7-redhat-1]
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101) [jsf-impl-2.1.7-redhat-1.jar:2.1.7-redhat-1]
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118) [jsf-impl-2.1.7-redhat-1.jar:2.1.7-redhat-1]
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593) [jboss-jsf-api_2.1_spec-2.0.2.Final-redhat-1.jar:2.0.2.Final-redhat-1]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.16.Final-redhat-1.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.16.Final-redhat-1.jar:]
    ..... 
```

关于什么可能是错误的任何提示？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T16:43:31.547

我以前没有见过这个，我无法解释原因，但我敢打赌这是 JBoss 7 EL 实现中的一个错误。作为第一步，我会尝试从方法中删除那些不必要的括号，

```
scrollListener="#{aBean.handleScrollPage()}" 
```

使它变成

```
scrollListener="#{aBean.handleScrollPage}" 
```

*（正如问题评论中所证实的那样，这已经为您解决了问题，也许这与此侦听器方法可选地接受一个参数并且 RichFaces 可能隐含地提供了一个参数有关）*

为了完整起见，我建议将此问题[报告](https://issues.jboss.org/browse/AS7)给 JBoss 人员。

# inheritance - 如何使用自己的属性创建 CoffeeScript 子类

> ID：12355729
> 
> 赞同：1
> 
> 时间：2012-09-10T16:24:51.127
> 
> 标签：inheritance, coffeescript, subclass

我正在尝试在 CoffeeScript 中做一些简单的子类化

```
class List
  items: []
  add: (n) ->
    @items.push(n)
    console.log "list now has: #{@}"

  toString: ->
    @items.join(', ')

class Foo extends List
  constructor: ->
    console.log "new list created"
    console.log "current items: #{@}" 
```

### 问题：

```
a = new Foo() # []
a.add(1)      # [1]
a.add(2)      # [2]

b = new Foo() # [1,2]
# why is b initializing with A's items?

b.add(5)      # [1,2,5]
# b is just adding to A's list :(​ 
```

但是，`Foo`类的实例不维护它们自己的`items`属性副本。

### 预期结果：

```
b = new Foo()   # []
b.add(5)        # [5] 
```

### jsFiddle

为您提供方便的[代码片段](http://jsfiddle.net/6EC97/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T16:29:29.943

您正在为 List 的原型设置数组，该数组与 List 的所有实例共享。

您必须在构造函数中初始化数组，以便为​​每个实例初始化单独的数组。

尝试

```
class List
  constructor: ->
    @items = [] 
```

# c# - 线程的自毁定时器？

> ID：12355736
> 
> 赞同：0
> 
> 时间：2012-09-10T16:25:25.947
> 
> 标签：c#, multithreading, visual-studio-2010

有什么办法可以创建一个线程，不管 1 分钟后如何结束？

目前我创建一个线程来登录网站代码如下：

```
 private void runBrowserThread()
    {

        specialCheck = 0;
        var th = new Thread(() =>
        {
            var br = new WebBrowser();
            browserCounter = 0;
            br.ScriptErrorsSuppressed = true;
            br.DocumentCompleted += browser_DocumentCompleted;
            br.Navigate("https://www.xample.com/login");
            Application.Run();

        });

        th.SetApartmentState(ApartmentState.STA);
        th.Start();
        th.Join();
    } 
```

但是这个过程有很多复杂的地方，所以我不想把它们都编码，我在想像自毁这样的东西，我可以在制作这个计时器时使用，所以不管代码卡住了，它确实没有到达其中一个，`Application.Exitthread()`它将永远卡在那里，因此在 1 分钟后自毁，退出线程以便代码可以继续。

因为目前我`Application.Exitthread()`在很多地方都有，但有时代码被卡住并没有到达任何地方，所以让我知道是否有任何方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T16:29:23.157

由于您已经阻塞，`th.Join`您可以使用它来终止线程，如下所示：

```
Boolean success = th.Join( 60 * 1000 ); // 60 second timeout
if( !success ) th.Abort(); 
```

如果您不想阻止加入，那么您可以生成第二个看门狗线程，该线程仅用于阻止`Join`并执行超时和终止任务，而不是发起者线程。

此外，使用`Application.ExitThread`也不是好的设计。线程可以通过`return`从它们的入口点方法终止——它还消除了对`Application`类及其相关`System.Windows.Forms`程序集的不必要依赖。

# python - 如何将下面的示例代码转换为接受多个输入？

> ID：12355740
> 
> 赞同：3
> 
> 时间：2012-09-10T16:25:29.583
> 
> 标签：python, web-services, flask

我想从我写的一个简单的发票应用程序创建一个 Web 服务。我希望它从 apache fop 返回 json 和希望的 pdf 文件。我不想要一个 html 网页，我将从 python 桌面应用程序访问该服务。

我可以忽略文档的模板部分吗？

我遇到的最大麻烦是接受一个函数的多个参数。

如何将下面的示例代码转换为接受多个输入？

```
@app.route('/post/<int:post_id>')
def show_post(post_id):
    # show the post with the given id, the id is an integer
    return 'Post %d' % post_id 
```

我是编程新手，对网络服务更是如此，如果我以错误的方式处理这个问题，请告诉我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T16:31:32.173

你当然可以忽略 html 部分。Flask 是一种创建 Web 应用程序的轻量级方式。如果需要，您可以只返回 json（或其他数据）作为对所有 url 的响应，并完全忽略 html 模板。

您可以在路由定义中包含任意数量的参数/正则表达式，每个参数都会为函数创建一个新参数。

```
@app.route('/post/<int:post_id>/<int:user_id>/')
def show_post(post_id, user_id):
    # show the post with the given id, the id is an integer
    return 'Post %d' % post_id 
```

[Flask 在其 URL 路由中是否支持正则表达式？](https://stackoverflow.com/questions/5870188/does-flask-support-regular-expressions-in-its-url-routing)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T16:46:24.083

> 烧瓶是适合这项工作的工具吗？

Flask 是一个微型 Python 网络框架，如 Bottle 或 webpy。在我看来，极简主义的 Web 框架很适合你的工作。

不要混淆作为 URL 可变部分的“可变规则”和函数的“经典”参数。

```
from flask import Flask
app = Flask(__name__)

@app.route('/post/<int:post_id>', defaults={'action': 1})
def show_post(post_id, action):
    # show the post with the given id, the id is an integer
    # show the defauls argument: action.
    response = 'Post %d\nyour argument: %s' % (post_id, action)
    return response

if __name__ == '__main__':
    app.run() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T19:14:18.143

感谢大家的所有回答，他们有很多帮助。下面是一些工作示例代码，从无参数到参数，然后是带有 json 响应的参数。

希望下面的代码对某人有所帮助。

```
from flask import Flask
from flask import jsonify
app = Flask(__name__)

@app.route('/')
def helloworld():
    response = 'HelloWorld'
    return response

@app.route('/mathapi/<int:x>/<int:y>/',  methods = ['GET'])
def math(x, y):
    result = x + y # Sum x,t -> result
    response = '%d + %d = %d' %(x, y, result) #Buld response
    return response #Return response

@app.route('/mathapijson/<int:x>/<int:y>/', methods = ['GET'])
def mathjs(x, y):
    result = x + y #Sum x,t -> result
    data = {'x'  : x, 'y' : y, 'result' : result} #Buld arrary
    response = jsonify(data) #Convert to json
    response.status_code = 200 #Set status code to 200=ok
    response.headers['Link'] = 'http://localhost'

    return response #return json response

if __name__ == '__main__':
app.run(debug=True) 
```

用法：

localhost:port/ - 输出 - HelloWorld

本地主机：端口/mathapi/3/4/ - 输出= 3 + 4 = 7

本地主机：端口/mathapi/mathapijson/3/4/ - 输出= {“y”：4，“x”：3，“结果”：7}

# java - Jackson - 反序列化为运行时指定的类

> ID：12355742
> 
> 赞同：0
> 
> 时间：2012-09-10T16:25:39.333
> 
> 标签：java, json, jackson

我正在编写一个使用 Jackson 序列化/反序列化对象的类。在编译时，我不知道我将要序列化/反序列化的对象的类型。

我阅读了几篇关于 and 用法的文章和问题`TypeReference`，`TypeFactory`但是我仍然遇到一些问题。

我的课看起来像（删除了一些不相关的代码）：

```
public class JsonSerializer<T> {

  private ObjectMapper objectMapper;
  private TypeReference typeReference;

  @PostConstruct
  public void init() {
      objectMapper = new ObjectMapper();
      typeReference = new TypeReference<T>(){ };
  }

  // ...

  public Object decode(CachedData cachedData) {
    try {
        return objectMapper.readValue(cachedData.getData(), typeReference);
    } // ...
  }
} 
```

这是我用来测试的代码片段：

```
public class SerializerTest {

  private JsonSerializer<Clazz> serializer;
  private ObjectMapper objectMapper = new ObjectMapper();
  private static final String CHARSET = "UTF-8";
  private Clazz data = generateData(); // creates a simple object

  @BeforeMethod
  public void beforeMethod() {
      serializer = new JsonSerializer<Clazz>();
      serializer.init();
  }

  // ...

  public void shouldDecodeDataCorrectly() throws Exception {
    CachedData cachedData = new CachedData(0, 
      objectMapper.writeValueAsString(data).getBytes(CHARSET), 
      CachedData.MAX_SIZE);

    Object object = serializer.decode(cachedData);
    assertEquals(data, object);
  }

  public static class Clazz {
    // POJO with getters and setters
  }

} 
```

据我所知，使用`typeReference`应该足以让反序列化器知道从字节流中读取的值应该放在一个`Clazz`对象中。但是，该`decode()`方法返回的对象仍然是 a `Map`，据我了解是反序列化的默认类。

我也尝试将`decode()`方法更改为 return `return objectMapper.readValue(cachedData.getData(), objectMapper.getTypeFactory().constructType(typeReference))`，但我遇到了同样的问题。

我很确定这与我将类型传递到序列化程序的方式有关，但到目前为止我还无法修复它。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T20:40:28.420

目前尚不清楚您到底要做什么：大部分代码都没有改变。具体用法`TypeReference`是错误的：你不能使用类型变量，类型必须是具体的。

但是，也许解决方案比您想象的要简单。如果您可以跟踪 original `Class`，只需存储它（或名称来自`clazz.getName()`），并在反序列化时传递它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T16:35:32.973

你检查了@JsonTypeInfo 吗？请查看它的文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T17:26:23.900

基于[http://jackson.codehaus.org/1.9.9/javadoc/org/codehaus/jackson/type/TypeReference.html](http://jackson.codehaus.org/1.9.9/javadoc/org/codehaus/jackson/type/TypeReference.html)上的 javadoc， 我将这样做：

从 JsonSerializer 中删除 typeReference 字段

修改 JsonSerializer.decode 方法以将类型引用作为参数

将类型引用作为参数传递

```
Object object = transcoder.decode(cachedData, new TypeReference<Clazz>() {}); 
```

顺便说一句 - “转码器”应该是“序列化器”？错字？

# javascript - jQuery范围滑块捕获值并将它们放在另一个div中

> ID：12355745
> 
> 赞同：1
> 
> 时间：2012-09-10T16:25:50.587
> 
> 标签：javascript, jquery

我正在尝试使用 jquery 范围滑块，虽然它默认显示价格范围，但它会导致我的设计出现问题，所以我不得不隐藏那个特定的输入

但是我仍然想显示已选择的价格范围。

这就是我所拥有的，但它只是不断添加东西，但我希望它们被替换（.replacewith 也不起作用）

小提琴会更好地解释：http: [//jsfiddle.net/Pyprr/98/](http://jsfiddle.net/Pyprr/98/)

如果有人可以提供帮助，我将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T16:29:27.673

试试这个：

```
//...
$("#displaypricerange").html(price3);
//... 
```

[http://jsfiddle.net/Pyprr/99/](http://jsfiddle.net/Pyprr/99/)

# iphone - nflx:// 应用程序可以在使用 UIWebView 的 IOS 应用程序中运行吗

> ID：12355749
> 
> 赞同：1
> 
> 时间：2012-09-10T16:25:59.227
> 
> 标签：iphone

我正在编写一个 IOS 应用程序，我想在我的应用程序中使用 UIWebView 启动 Netflix 应用程序 (nflx://)。我想让 Netfix 电影在我的 UIWebview 结构中运行，因此当用户停止电影时，它将返回到我的应用程序控件。

我做了以下事情：

1）。我可以在 UIWebview 中启动 nflx://，然后离开我的应用程序立即启动应用程序。

```
NSURL *url = [NSURL URLWithString:@"nflx://"];

NSURLRequest *requestPage = [NSURLRequest requestWithURL: url];
     loadingView = [LoadingView loadingViewInView:webPage];

self.webPage.delegate = self;
[self.webPage loadRequest: requestPage];
     [self.webPage setScalesPageToFit:YES]; 
```

2）。我已经启动了 Netflix 网站 @"movies.netflix.com://。这允许用户在我的应用程序中选择视频，但是一旦视频启动，它就会退出到 Netflix 应用程序。

```
NSURL *url = [NSURL URLWithString:@"@"movies.netflix.com://"];

NSURLRequest *requestPage = [NSURLRequest requestWithURL: url];
     loadingView = [LoadingView loadingViewInView:webPage];

self.webPage.delegate = self;
[self.webPage loadRequest: requestPage];
     [self.webPage setScalesPageToFit:YES]; 
```

这可能吗？如果是这样，任何指导都会有所帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T17:32:39.653

如果您使用 url 方案离开您的应用程序，则无法返回到您的应用程序，如果其他应用程序没有提供 API 供您提供方案或用户手动返回。

# rest - Tomcat容器中的Dropwizard

> ID：12355751
> 
> 赞同：3
> 
> 时间：2012-09-10T16:26:02.267
> 
> 标签：rest, restful-architecture, dropwizard

我有一个在 tomcat 中运行的现有应用程序。现在我正在为我的新休息网络服务评估 dropwizard。现在，dropwizard 带有内置的码头。如何使用我的 tomcat 容器而不是它的码头容器来部署它？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-10T06:48:25.860

你不能这样做。Dropwizard 嵌入了 Jetty。您应该考虑将 Jersey 用作标准 Web 应用程序。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-03-31T08:00:35.547

将您的应用程序作为 jar 部署是很有意义的，但有时您会受到公司/企业标准的限制，并且您必须在生产环境中部署在给定的应用程序服务器上。'Dropwizard in a box' ( [https://github.com/rvs-fluid-it/wizard-in-a-box](https://github.com/rvs-fluid-it/wizard-in-a-box) ) 使得将 Dropwizard 应用程序部署为战争变得微不足道。它交换 DropWizard 的嵌入式 Jetty 容器并桥接到 servlet 3 容器。'Dropwizard in a box' 在 Tomcat 7 和 Weblogic 12c 上进行了测试。

# php - htaccess 用不同的路径重写规则

> ID：12355752
> 
> 赞同：-1
> 
> 时间：2012-09-10T16:26:02.430
> 
> 标签：php, .htaccess

我写了一条规则，将斜杠后的所有内容重定向到`index.php?section=site`. 这条规则很好用：

```
RewriteRule (.*)(\/)? index.php?section=site 
```

如果 uri 是`/cms/....`我想将它重定向到`index.php?section=cms`. 问题是第一条规则说明一切都会发生，`index.php?section=site`所以如果 url 的开头是 cms ，我怎么能避免这种情况？

**我试过这个：**

```
RewriteRule (.*)(\/)? index.php?section=site
RewriteRule cms\/(.*) index.php?section=cms [L] 
```

**例如 ：**

1.  url like : domain.com/login ，属于 index.php?section=site
2.  url like : domain.com/cms/login ，属于 index.php?section=cms

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T03:25:44.193

如果这是您唯一的规则并且您的目标是`index.php`用作[前端控制器](http://onlamp.com/pub/a/php/2004/07/08/front_controller.html)，我建议使用[`FallbackResource`](https://httpd.apache.org/docs/trunk/mod/mod_dir.html#fallbackresource)PHP 使用和解析/路由请求。

```
FallbackResource /index.php 
```

最后，它避免了开销和复杂性，`mod_rewrite`并且可以说提供了更大的灵活性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T12:43:10.657

我找到了简单的解决方案，因为我用 htaccess 尝试的一切都没有奏效。

.htaccess 文件：

```
RewriteRule (.*) index.php 
```

索引文件：

```
$uri = $_SERVER['REQUEST_URI'];
$ex = explode("/",$uri);
switch($ex[2])
{
    case "cms":
        // cms dispatch here
    break;

    default:
       // site dispatch here
    break;

} 
```

不管怎么说，还是要谢谢你 ：）

# objective-c - iOS 将文本输入限制为一组语言

> ID：12355753
> 
> 赞同：3
> 
> 时间：2012-09-10T16:26:03.003
> 
> 标签：objective-c, ios

我有一个 iOS 应用程序，用户可以在其中订购照片打印件。用户可以在订购打印之前将他选择的文本添加到照片上。现在，我的问题是我们的打印机不支持汉字。我有办法限制用户只使用我的打印机支持的一组语言吗？我假设应用程序不能强制用户为其键盘选择语言。所以，我想在 UITextView 的“shouldChangeCharacters”方法上禁止无效文本。我知道我可以想出一组我的打印机和用户 NSCharacterSet 支持/不支持的所有字符来限制，但有没有更好的方法来实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T16:41:22.040

使用 an`NSCharacterSet`是正确的方法。像这样的东西：

```
- (NSCharacterSet *)bannedCharacters {
    static NSCharacterSet *bannedCharacters;
    static dispatch_once_t once;
    dispatch_once(&once, ^{
        NSMutableCharacterSet *set = [[NSMutableCharacterSet alloc] init];

        // Use lines like these to add the characters allowed by your printer.
        [set addCharactersInRange:NSMakeRange(65, 26)];
        [set addCharactersInString:@"0123456789"];

        bannedCharacters = [set invertedSet];
    });
}

- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)replacement {
    NSRange badRange = [replacement rangeOfCharacterFromSet:[self bannedCharacters]];
    return badRange.location == NSNotFound;
} 
```

# regex - 不带后跟的 RegEx 模式

> ID：12355755
> 
> 赞同：0
> 
> 时间：2012-09-10T16:26:17.490
> 
> 标签：regex

我只想匹配不包含单词缩略图的第一个文件路径。我使用“不遵循模式”，但它不起作用。有人可以看看并告诉我我的错误在哪里吗？这是我的正则表达式：

```
<string>((.*(?!Thumbnails))\.jpg)</string> 
```

字符串

```
<string>/Volumes/Macintosh HD/Users/username/Pictures/iPhoto Library/Masters/2012/05/14/20120514-105314/IMG_6204.JPG</string>
<string>/Volumes/Macintosh HD/Users/username/Pictures/iPhoto Library/Thumbnails/2012/05/14/20120514-105314/IMG_6204.jpg</string> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T16:28:39.287

*您的正则表达式将匹配文件扩展名之前*不包含“缩略图”的文件路径。您想防止它与文本中*任何位置*包含“缩略图”的内容匹配。

您可以尝试以下方法：

```
<string>((?!.*Thumbnails).*?\.jpg)</string> 
```

或者：

```
<string>((?![^<]*Thumbnails)[^<]*\.jpg)</string> 
```

（这将防止正则表达式引擎在搜索“缩略图”时越过关闭的“<”。它还将禁止包含“<”的文件路径。）

我想您是在将其与单个文本行进行匹配，*而不是*与包含多行的字符串进行匹配，对吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T16:28:42.087

```
<string>^((?!Thumbnails).)*$</string> 
```

# c - C语言中正确的Hello World

> ID：12355758
> 
> 赞同：25
> 
> 时间：2012-09-10T16:26:34.437
> 
> 标签：c

C 中正确的 Hello World 程序是什么？

[由于“c hello world”](http://www.google.com/search?q=c+hello+world)的谷歌结果第一页差异很大，而且很多是旧的C，我想把标准版本放在一个地方，方便复制和粘贴。

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-09-10T23:50:56.020

看你有多懒：：）

```
#error Hello World 
```

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2012-09-10T16:26:34.437

我相信这是 C 语言中的标准 Hello World 程序：

```
#include <stdio.h>

int main(void)
{
  printf("Hello World\n");
  return 0;
} 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-09-10T22:10:13.903

在 C99 或 C2011 中，您可以使用以下五行代码：

```
#include <stdio.h>
int main(void)
{
    puts("Hello World!");
} 
```

由于 C99（但不是 C89）允许您`return 0;`在末尾省略 ，因此它会向调用环境返回确定性状态 0（成功）。它没有任何未使用的函数参数。它具有`puts()`来自标题的原型。输出包括适当的行尾。我认为这是犹太洁食，基本上是最小的。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-09-10T20:13:47.660

官方 GNU Hello World 可以在这里找到：[http ://www.gnu.org/software/hello/](http://www.gnu.org/software/hello/)

> GNU Hello 程序会产生熟悉、友好的问候语。是的，这是打印“Hello, world!”的经典程序的另一个实现。当你运行它时。
> 
> 然而，与常见的最小版本不同，GNU Hello 处理其参数列表以修改其行为，支持多种语言的问候语等等。GNU Hello 的主要目的是演示如何编写其他程序来做这些事情；它作为 GNU 编码标准和 GNU 维护者实践的模型。
> 
> GNU Hello 是用 C 语言编写的。对于其他编程语言的实现，特别是包括翻译成其他语言，请参阅 GNU Gettext 发行版。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2012-09-10T16:27:44.933

不止一个，虽然 Tor 的回答很好，但我更喜欢总是使用 argc / argv main 函数。

```
#include <stdio.h>

int main(int argc, char** argv)
{
  printf("Hello World\n");
  return 0;
} 
```

在检查 printf 是否失败的罕见奇怪事件中，您可能会遇到

```
#include <stdio.h>
#include <stdlib.h>
#include <errno.h>

extern int errno;
extern FILE *stdout;

int main(int argc, char** argv)
{
  errno = 0;

  int err = printf("Hello World\n");

  if (err < 0) {
    return EXIT_FAILURE;
  }

  err = fflush(stdout);

  if (err < 0 || errno != 0) {
    return EXIT_FAILURE;
  } else {
    return EXIT_SUCCESS;
  }
} 
```

像任何 C 程序一样，它已经被修改了太多次以试图减少它的错误。特别感谢 R..、dmp 和 Scooter，他们真的值得我给予更多的信任。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-09-10T21:23:01.253

“官方”版本是 Kernighan 和 Ritchie 所著的“The C Programming Language”第一版中的版本。

[也就是说](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CCAQFjAA&url=http%3A%2F%2Fciteseerx.ist.psu.edu%2Fviewdoc%2Fdownload%3Fdoi%3D10.1.1.126.4437%26rep%3Drep1%26type%3Dpdf&ei=H1lOUPU-5JnJAZC2gHA&usg=AFQjCNE0mRrYFIweLQKJL8rfP0u_H6hBpA)：

```
#include <stdio.h>
main()
{
    printf("hello, world\n");
} 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2012-12-06T01:20:30.277

```
#include <stdio.h>

int main()
{
  printf("Hello World\n");
  getchar();
  return 0;
} 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-09-10T16:32:44.090

“正确”是什么意思？

我想这个是最正确的，因为它不会遗漏任何东西：

```
#include <stdio.h>

#ifndef HELLO_STRING
#define HELLO_STRING "Hello, world!"
#endif

int main(int argc, char *argv[], char *envp[])
{
    puts(HELLO_STRING);
    return 0;
} 
```

但是，这个程序没有本地化；如果您想要本地化，请使用“libintl”。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-09-10T20:43:10.593

```
$ cat hello.c
#include <stdio.h>

int main(void)
{
    printf("Hello world!\n");
}

$ c99 hello.c
$ ./a.out
Hello world!
$ 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2012-09-10T23:45:27.910

然后是：

```
#include <stdlib.h>

int main()
{
  system("echo Hello World!");
  return 0;
} 
```

# php - MySQL - 选择具有特定权限的用户 (INNER JOIN)

> ID：12355761
> 
> 赞同：0
> 
> 时间：2012-09-10T16:26:38.537
> 
> 标签：php, mysql, select, inner-join

您好，我需要从名为“USERS”的表中选择所有具有特权 1、2 和 3 的用户。之后，我将使用他们的 ID 在另一个名为“Status”的表中进行新的选择。

```
<?php
include_once("include/connection.php");
$sql = 'select * from USERS where Privileges != "4"';

$rs = mysqli_query($connect, $sql) or die ("error");
$op = mysqli_num_rows($rs);

while($row = mysqli_fetch_array($rs))
{
    $id = $row['ID'];
    $name = $row['Name'];
    $priv = $row['Privileges'];

    $sql = 'select * from Status where ID="$id"';
    $result = mysqli_query($connect, $sql) or die ("database error");
    $gmon = mysqli_num_rows($result);

    $login = $row['Login'];

    switch($login)
    {
        case "ONLINE":
            $login = "<font color=\"#84FB84\"><strong>".$name."</strong></font>";
            break;
        case "OFFLINE":
            $login = "<font color=\"#46AAEB\"><strong>".$name."</strong></font>";
            break;
    }
    $online_adms .= "<td>$login</td>";
}
?>
<?php echo $online_adms; ?> 
```

**更新** 我无法获得“$login”变量的输出...如果我尝试输出“$name”或“$id”，它工作正常...但我需要输出“$login”。我想我可以在这里使用一些 INNER JOin ......

有什么线索吗？

谢谢。

**解决方案**

```
$sql = 'SELECT c.Name, c.ID, c.Privileges, d.Login FROM USERS c 
        INNER JOIN Status d 
        ON c.ID = d.ID
        where Privileges != 4'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T17:18:18.070

您可以通过连接选择所有必填字段

```
SELECT `ID`,`Name`,`Privileges`,`Login` 
 FROM `USERS` 
 INNER JOIN `Status`
 ON `USERS`.`ID` = `Status`.`ID`
 WHERE Privileges != 4 
```

然后删除您的第二个查询

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T16:52:08.517

基本上，Login 列似乎应该在 Status 表中，但它没有被使用。尝试这样的事情：

```
<?php
include_once("include/connection.php");
$sql  = 'SELECT USERS.*, STATUS.* FROM USERS INNER JOIN STATUS ';
$sql .= 'ON USERS.ID=STATUS.ID WHERE USERS.Privileges != "4"';

$rs = mysqli_query($connect, $sql) or die ("error");
$op = mysqli_num_rows($rs);

while($row = mysqli_fetch_array($rs))
{
    $id = $row['ID'];
    $name = $row['Name'];
    $priv = $row['Privileges'];
    $login = "<font color=\"#46AAEB\"><strong>".$name."</strong></font>";
    $loginStatus = $row['Login'];

    switch($loginStatus)
    {
        case "ONLINE":
            $login = "<font color=\"#84FB84\"><strong>".$name."</strong></font>";
            break;
        case "OFFLINE":
            $login = "<font color=\"#46AAEB\"><strong>".$name."</strong></font>";
            break;
        default:
            $login = "<font color=\"#999999\"><strong>".$name."</strong></font>";
            break;
    }
    $online_adms .= "<td>$login</td>";
}
?>
<?php echo $online_adms; ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T16:33:19.030

如果你只是得到 PHP 语法错误，你忘了关闭 while 循环。这是更正后的代码：

```
$sql = 'select * from USERS where Privileges != "4"';

$rs = mysqli_query($connect, $sql) or die ("error");
$op = mysqli_num_rows($rs);

while($row = mysqli_fetch_array($rs))
{
    $id = $row['ID'];
    $name = $row['Name'];
    $priv = $row['Privileges'];

    $sql = 'select * from Status where ID="$id"';
    $result = mysqli_query($connect, $sql) or die ("database error");
    $gmon = mysqli_num_rows($result);

    $login = $row['Login'];

    switch($login)
    {
        case "ONLINE":
            $login = "<font color=\"#84FB84\"><strong>".$name."</strong></font>";
            break;
        case "OFFLINE":
            $login = "<font color=\"#46AAEB\"><strong>".$name."</strong></font>";
            break;
        default:
            $login = 'OOPS! The value of $login is '.$login.' that is why nothing is being printed. :(';
    }
} 
```

此外，您可能想改进您的产品线：

```
$result = mysqli_query($connect, $sql) or die ("database error"); 
```

经过：

```
$result = mysqli_query($connect, $sql) or die ("database error: ".mysql_error().'<br />query: '.$sql); 
```

# javascript - javascript上的数字类型模拟

> ID：12355763
> 
> 赞同：0
> 
> 时间：2012-09-10T16:26:50.970
> 
> 标签：javascript, numbers

我想知道是否有任何库可以在其他语言上模拟本机类型编号，例如 int 和 double。库应该准确地模拟这些类型，包括溢出。

每个提示将不胜感激。

编辑：

我需要实现一个[Linear Congruential Generator](http://en.wikipedia.org/wiki/Linear_congruential_generator)。我不能切换到另一个RNG，它必须是一个LCG。

问题是大数的乘法会产生错误的结果，从而弄乱了序列。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T22:12:17.290

您可以使用[类型化数组](https://developer.mozilla.org/en-US/docs/JavaScript_typed_arrays/ArrayBufferView#Typed_array_subclasses)。（FF 4+、Chrome 7+、IE 9+、Safari 5.1+）

它有以下子类：`Int8Array`, `Uint8Array`, `Int16Array`, `Uint16Array`, `Int32Array`, `Uint32Array`, `Float32Array`, `Float64Array`.

对于较旧的浏览器，您可以查看：[寻找 Javascript Typed Arrays emulation library](https://stackoverflow.com/questions/11278619/looking-for-javascript-typed-arrays-emulation-library)

希望这些信息对您有所帮助

# jquery - 仅使用 jQuery 从表中查找第一个和第二个 td

> ID：12355764
> 
> 赞同：0
> 
> 时间：2012-09-10T16:26:50.807
> 
> 标签：jquery, html-table

我试图只操纵这两个 TD。有大量嵌套表位于无法更改的非常旧的代码上。

该表没有类。但我能看到的主要结构是这样的。

```
<table>
  <tr>
    <td class="nowrap" "bunch of inline stuff"></td>
    <td "bunch of inline stuff">
  </tr>
</table> 
```

这就是我能看到的。其余的就在里面，我真的不在乎，但它都是嵌套的表。

我希望能够仅更改这两个 td 的所有“内联内容”，但我似乎尝试的所有内容都通过嵌套的内容运行。

任何帮助，将不胜感激。如果你能告诉我我做错了什么，那就太好了。

这是我已经尝试过的一切

```
//$('#main_content_wrapper table:first tbody tr td:nth-child(1)').attr('width','240').attr('id','ezweb_lhr').css('background','lime');
//$("#main_content_wrapper table:first td:nth-child(1)").attr('width','240').attr('id','ezweb_lhr').css('background','lime');
//$("#main_content_wrapper table:first tr:nth-child(1) td:nth-child(1)").attr('width','240').attr('id','ezweb_lhr').css('background','lime');
//$("#main_content_wrapper table tr:nth-child(1) td:nth-child(2)").attr('width','680').attr('id','ezweb_content').css('padding-left','20px').css('background','red'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T16:38:38.580

这将返回`td's`第一个表中的所有内容：

```
$("main_content_wrapper table:first").find("tr:first").find('td'); 
```

完整的选择：

```
$("#main_content_wrapper table:first").find("tr:first").find('td')
    .attr({
        'width': '240',
        'id' : 'ezweb_1hr'
    }).css('background','lime'); 
```

这是一个工作示例：[jsFiddle](http://jsfiddle.net/XYQej/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T16:35:10.200

你可以试试这个

```
$("#main_content_wrapper table:first").find("td") 
```

这将为您提供一个包含第一个表内 td 的所有元素的数组，该表位于 id 为“main_content_wrapper”的元素内。使用索引，您可以找到它是第一还是第二。例如，要访问第 n 个 td 元素，请使用

```
var nth_elem = $("#main_content_wrapper table:first").find("td")[n-1] 
```

记住 ':nth-child' 选择器在 IE7 和 IE8 中不起作用

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T13:15:42.863

基本上使用了第二个 TD 中唯一的另一部分，即行内宽度。所以对于其他可能经历过这个的人来说，这就是我使用的。

```
$("#main_content_wrapper table:first tbody tr:first td[width='647']") 
```

# windows-8 - 定期更新中的多个图块

> ID：12355765
> 
> 赞同：0
> 
> 时间：2012-09-10T16:26:53.340
> 
> 标签：windows-8, microsoft-metro

我可以将多个图块作为 XML 返回吗？“天气”、“金融”或“新闻”应用程序如何在磁贴中显示多个结果？我尝试创建这样的 XML，但没有成功：

```
<tile>
    <visual lang="en-US">
        <binding template="TileWideSmallImageAndText04">
            <image id="1" src="URLOFIMG" alt="alt text"/>
            <text id="1">Some Text</text>
            <text id="2">Text Field 2</text>
        </binding>
        <binding template="TileWideSmallImageAndText04">
            <image id="1" src="URL2" alt="alt text"/>
            <text id="1">SOME TEXT</text>
            <text id="2">Text Field 2</text>
        </binding>
        <binding template="TileWideSmallImageAndText04">
            <image id="1" src="URL" alt="alt text"/>
            <text id="1">TEXT</text>
            <text id="2">Text Field 2</text>
        </binding>
    </visual>
</tile> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T17:13:40.297

不允许在单个 XML 负载中放置多个宽 tile 绑定（或多个方形 tile 绑定）。换句话说，磁贴通知 XML 有效负载最多可以包含一个宽磁贴绑定和最多一个方形磁贴绑定。

也就是说，可以通过定期更新或任何其他传递机制（本地、推送或计划）提供多个图块通知。

默认情况下，磁贴只会显示最近的磁贴通知。通过[启用磁贴通知队列](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.notifications.tileupdater.enablenotificationqueue)，一次最多可以为任何给定磁贴存储五个磁贴通知。

然后可以将定期更新配置为在每个间隔使用 TileUpdater.StartPeriodicUpdate 从一个 Web URL 下载，或者使用[TileUpdater.StartPeriodicUpdateBatch](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.notifications.tileupdater.startperiodicupdate.aspx)从最多五个 Web URL[下载](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.notifications.tileupdater.startperiodicupdatebatch)。通过提供返回不同磁贴通知 XML 有效负载的 URL，多个通知将显示在磁贴上。

此处有关定期更新的更多详细信息：http: [//msdn.microsoft.com/en-us/library/windows/apps/hh761476](http://msdn.microsoft.com/en-us/library/windows/apps/hh761476)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T16:35:22.983

您是否尝试过查看[示例应用程序](http://code.msdn.microsoft.com/windowsapps/Secondary-Tiles-Sample-edf2a178)？

```
 private void SendTileNotificationWithStringManipulation_Click(object sender, RoutedEventArgs e) 
    { 
        Button button = sender as Button; 
        if (button != null) 
        { 
            string tileXmlString = "<tile>" 
                                 + "<visual>" 
                                 + "<binding template='TileWideText04'>" 
                                 + "<text id='1'>Send to a secondary tile from strings</text>" 
                                 + "</binding>" 
                                 + "<binding template='TileSquareText04'>" 
                                 + "<text id='1'>Send to a secondary tile from strings</text>" 
                                 + "</binding>" 
                                 + "</visual>" 
                                 + "</tile>"; 

            Windows.Data.Xml.Dom.XmlDocument tileDOM = new Windows.Data.Xml.Dom.XmlDocument(); 
            tileDOM.LoadXml(tileXmlString); 
            TileNotification tile = new TileNotification(tileDOM); 

            // Send the notification to the secondary tile by creating a secondary tile updater 
            TileUpdateManager.CreateTileUpdaterForSecondaryTile(MainPage.dynamicTileId).Update(tile); 

            rootPage.NotifyUser("Tile notification sent to " + MainPage.dynamicTileId, NotifyType.StatusMessage); 
        } 
    } 
```

如何固定辅助磁贴的示例`PinLiveTile_Click()`

编辑：要定期更新，请参见[此处](http://msdn.microsoft.com/en-us/library/windows/apps/hh761461.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T13:46:43.253

正如 Nathan 指出的那样，您只能有一个正方形和一个宽图块，但请查看宽图块的范围（特别是 TileWidePeekImageCollection06）可用图块列表可在此处找到：http: [//msdn.microsoft.com/en -us/library/windows/apps/hh761491.aspx#TileWideImageAndText01](http://msdn.microsoft.com/en-us/library/windows/apps/hh761491.aspx#TileWideImageAndText01)

如果这仍然不能解决您的要求，那么唯一的另一种方法是使用辅助磁贴。

# c# - 类库中定义的内容在 ClickOnce 部署期间不会传输

> ID：12355768
> 
> 赞同：5
> 
> 时间：2012-09-10T16:27:02.580
> 
> 标签：c#, winforms, visual-studio-2010, clickonce

我有一个使用 ClickOnce 部署的 WinForms、C# 解决方案，这会导致资源文件出现一些问题。简而言之，在我使用 ClickOnce 部署后，类库项目中标记为内容的文件不会被复制到输出 bin/ 文件夹中。

这是解决方案的基本结构（它包含比我在下面列出的更多的项目）

```
Solution 
 |--Gui 1 Project
 |  |--References
 |  |  |--ClassLibrary
 |--Gui 2 Project
 |  |--References
 |  |  |--ClassLibrary
 |--Main Gui Project  (StartUp Project)
 |  |--References
 |  |  |--Gui 1 Project
 |  |  |--Gui 2 Project
 |  |  |--ClassLibrary
 |  |--Datafile.wav    (Build Action: Content, Copy-if-newer)
 |  |--Mods.xml        (Build Action: Content, Copy-if-newer)
 |  |--VariousSourceFiles.cs
 |--ClassLibrary
 |  |--Resources
 |  |  |--Elements.xml     (Build Action: Content, Copy-if-newer)
 |  |  |--AminoAcids.xml   (Build Action: Content, Copy-if-newer)
 |  |--VariousSourceFiles.cs 
```

Main Gui 项目是该程序的 StartUp 项目，是一个简单的 MDI 容器，可在其中启动其他 GUI 应用程序。当我在我的开发机器上以调试/发布模式构建时，一切都按预期工作。编译 GUI 程序，将 Datafile.wav 和 Mods.xml 文件复制到 bin/ 文件夹，并将 Elements.xml 和 AminoAcids.xml 文件复制到 bin/Resources/ 文件夹。该程序按预期运行，没有打嗝。

这就是问题开始的地方，我使用 VS2010 中的 Click-Once 发布功能在内部将程序发布给我们服务器上的同事。他们能够很好地安装程序，甚至启动它。但是，一旦他们单击使用其中一个资源文件（Elements.xml 或 AminoAcids.xml）的按钮，就会引发无法找到该文件的异常。其他两个内容文件（Datafile.wav 和 Mods.xml）不会发生这种情况，换句话说，它们被正确复制到最终目录。

所以我去 Main Gui Project -> Properties -> Publish -> Application Files.. 我看到 Datafile.wav 和 Mods.xml 包含在这个列表中。但是，其他两个内容文件（Elements.xml 和 AminoAcids.xml）不是。我相信这是问题所在，因为当我将程序发布到我们的服务器时，它不知道将资源复制过来。我如何通知 ClickOnce 他们需要包含这些文件？ClassLibrary.dll 显示在此列表中，但没有任何 .xml 文件。

然后我尝试转到 ClassLibrary -> Properties -> Publish，但没有 Publish 选项卡，因为它是一个类库。所以我无法指定我希望将这两个资源文件复制到任何客户端计算机上的最终 bin/Resources 文件中。有谁知道如何克服这个问题？

我想将资源文件 (.xml) 保留为 Build Action: Content 而不是 Embedded Resources，因为程序的用户可能会更改/更新/扩展文件的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T07:27:47.890

我知道这并不漂亮，但它会完成工作。Microsoft 有一篇文章向您展示如何在发布后将数据文件添加到 Click Once 部署。你可以很容易地自动化这些步骤

文章的链接是：http: [//msdn.microsoft.com/en-us/library/6fehc36e (v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/6fehc36e(v=vs.110).aspx)

以下是链接更改时的步骤： 使用 Mage.exe 包含数据文件

1\. 将数据文件与应用程序的其余文件一起添加到应用程序目录。

通常，您的应用程序目录将是一个标有部署当前版本的目录，例如 v1.0.0.0。

2\. 更新您的应用程序清单以列出数据文件。

法师 -u v1.0.0.0\Application.manifest -FromDirectory v1.0.0.0

执行此任务会重新创建应用程序清单中的文件列表，并自动生成哈希签名。

3\. 在您喜欢的文本或 XML 编辑器中打开应用程序清单，找到您最近添加的文件的文件元素。

如果您添加了一个名为 Data.xml 的 XML 文件，该文件将类似于以下代码示例。

```
<file name="Data.xml" hash="23454C18A2DC1D23E5B391FEE299B1F235067C59" hashalg="SHA1" asmv2:size="39500" /> 
```

1\. 将属性类型添加到此元素，并为其提供数据值。

```
<file name="Data.xml" writeableType="applicationData" hash="23454C18A2DC1D23E5B391FEE299B1F235067C59" hashalg="SHA1" asmv2:size="39500" /> 
```

1\. 使用您的密钥对或证书重新签署您的应用程序清单，然后重新签署您的部署清单。

您必须重新签署部署清单，因为其应用程序清单的哈希已更改。

mage -s app manifest -cf cert_file -pwd 密码

mage -u 部署清单 -appm 应用清单

mage -s 部署清单 -cf certfile -pwd 密码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-06T16:20:04.800

这似乎更简单。

1.  在需要数据文件的类库项目目录中，找到该数据文件。
2.  在类库项目中，转到项目属性选项卡，单击生成事件选项卡并更新生成后事件命令行并添加脚本代码，使用 copy 或 xcopy，将数据文件相对于可执行程序集复制，使用类库文件作为依赖项，如项目引用、项目文件夹所示。
3.  在可执行程序集的项目中，将复制的文件设置为包含“构建操作”“内容”和“复制到输出目录”“始终复制”的属性。
4.  在可执行程序集项目属性中，转到发布选项卡，单击“应用程序文件...”按钮。确保选中“显示所有文件”。查找数据文件，确保“发布状态”为“包含”且下载组为“必需”。

ClickOnce 将使用类库部署数据文件，并且类库代码将能够在运行时找到数据文件。

如果我在某个地方错了，请纠正我。

# macos - 安装 Mac Homebrew 时遇到问题

> ID：12355771
> 
> 赞同：2
> 
> 时间：2012-09-10T16:27:05.870
> 
> 标签：macos, homebrew

我试过各种论坛和谷歌都无济于事。我正在尝试在 OS X 10.6.8 上安装 Mac Homebrew。当我尝试从 Homebrew Homepage 安装命令时：

```
ruby <(curl -fsSkL raw.github.com/mxcl/homebrew/go) 
```

我收到以下错误：

```
host-197-7-0-10:~ rzazueta$ ruby <(curl -fsSkL raw.github.com/mxcl/homebrew/go)
==> This script will install:
/usr/local/bin/brew
/usr/local/Library/...
/usr/local/share/man/man1/brew.1

Press enter to continue
==> Downloading and Installing Homebrew...
error: The requested URL returned error: 403 while accessing https://github.com/mxcl/homebrew    /info/refs

fatal: HTTP request failed
Failed during: git fetch origin master:refs/remotes/origin/master -n 
```

那个403很奇怪。知道这里会发生什么吗？我能够在另一台 Mac 上使用这种方法成功安装，所以我确信问题出在我的机器上，但我什至不知道从哪里开始找出导致这种情况的原因。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T00:00:12.293

检查他们的安装页面（[https://github.com/mxcl/homebrew/wiki/Installation](https://github.com/Homebrew/legacy-homebrew)）并查看备用安装。

相关的线路是：

```
cd /usr/local/bin    
mkdir homebrew && curl -L https://github.com/mxcl/homebrew/tarball/master | tar xz --strip 1 -C homebrew 
```

那么就

```
ln -s path/to/homebrew/bin/brew /usr/local/bin/brew 
```

[我认为Link](https://brew.sh/)上列出的路径已经过时了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T21:29:58.150

我在 OS X 10.8.2 上遇到了同样的问题。原来我在 /usr/local 中安装了一个旧版本的 git (1.6.5.2)。当我删除它并使用 Mountain Lion (1.7.10.2) 提供的版本时，正常安装工作正常。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-23T16:33:18.340

刚刚安装使用：

```
ruby <(curl -fsSkL raw.github.com/mxcl/homebrew/go) 
```

它工作没有问题。可能是*暂时*的问题...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-24T14:50:47.780

这是一个临时的 Github 问题。它偶尔会发生。稍后再试。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-22T17:41:35.193

小心，安装脚本已从 raw.github.com/mxcl/homebrew/go 移动到 raw.github.com/mxcl/homebrew/go/install ！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-08-11T07:20:12.133

将您的脚本更改为

```
ruby -e "$(curl -fsSL https://raw.github.com/Homebrew/homebrew/go/install)" 
```

而不是 ruby​​ <(curl -fsSkL raw.github.com/mxcl/homebrew/go)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-10-26T08:47:32.160

我已经尝试了上述所有答案，但它们不起作用。然后我发现链接可能已损坏。我使用以下命令并成功：

```
ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)" 
```

# javascript - 如何构建一个网页来检查我的路由器 Web 界面是否可访问

> ID：12355774
> 
> 赞同：0
> 
> 时间：2012-09-10T16:27:07.460
> 
> 标签：javascript, jquery, html, web

在我的家里，我有很多路由器和接入点（大约 7 个 + 一台打印机）。他们都有我可以浏览的网络界面。（例如“http://192.168.1.1”）

有时它们会变坏，需要重新启动。

我想创建一个 html 文件，它将充当 Dashboard ，它将向我显示路由器列表以及它们是“Ok”还是“Error”。

我不知道该怎么做。我尝试了两种方法：

1.  使用 $.ajax，但 Ajax 有“同源策略”，所以不会。（或者我可以用服务器做一些事情，但我不想为此运行服务器）。

2.  我尝试从某个路由器 Web 界面加载图像，并检查它是否可用，但仅适用于不需要预先登录的 Web 界面。对于那些要求我登录的人，我想要一个不需要回答任何提示的仪表板。只是“确定”或“错误”。

    ```
    <img src="image.jpg" />
    <div>displayed after the image is loaded</div>

    <script>
        $('img').load(function() {
            $('div').show();
       });
    </script> 
    ```

    [取自这里](http://www.stoimen.com/blog/2009/08/05/jquery-check-whether-image-is-loaded/)

有没有办法可以实现它？像“ping”一个网络界面，看看它是否存在。

谢谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T16:37:20.977

你可以看看这个插件：[http ://binarykitten.com/js/88-jquery-plugin-ajax-head-request.html](http://binarykitten.com/js/88-jquery-plugin-ajax-head-request.html)

发出请求并查看响应是否为代码 200。

# mercurial - 使用 Mercurial 推送到 Google 代码库：“中止：错误：现有连接被远程主机强行关闭”

> ID：12355775
> 
> 赞同：1
> 
> 时间：2012-09-10T16:27:18.613
> 
> 标签：mercurial, google-code

Mercurial 过去可以很好地推送到我的 Google 代码存储库，但最近，推送在我家的桌面上出现故障。每次我尝试推送到存储库时，我都会收到“中止：错误：现有连接被远程主机强行关闭”。

这是 Mercurial 2.3.1 版。我的 Mercurial.ini 文件或项目的 hgrc 文件都没有在 [http_proxy] 下输入任何内容，所以我知道这不是问题所在。奇怪的是，拉动没有问题。我什至卸载并重新安装 Mercurial，但也没有解决问题。

我唯一能想到的可能是我试图推送到存储库的数据量（6MB）太大了。但是，我可以从我的笔记本电脑和我的工作计算机上推拉。我已经阅读了这些其他问题并尝试了他们的解决方案，但问题仍然存在。

[Windows 上的 Mercurial：中止：错误：现有连接被远程主机强行关闭](https://stackoverflow.com/questions/6554921/mercurial-on-windows-abort-error-an-existing-connection-was-forcibly-closed-b)

[无法从 mercurial 存储库推/拉 - 中止：错误：现有连接被远程主机强行关闭](https://stackoverflow.com/questions/10086576/cant-push-pull-from-mercurial-repository-abort-error-an-existing-connection)

[HG PUSH : abort: error: 现有连接被远程主机强行关闭](https://stackoverflow.com/questions/12279767/hg-push-abort-error-an-existing-connection-was-forcibly-closed-by-the-remote)

编辑：与 Mercurial 一起安装 Tortoise HG 允许我再次推送到存储库，但我仍然不知道为什么它首先被破坏。我最好的猜测是，没有 [http_proxy] 部分会以某种方式破坏它，就像设置不正确一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T13:46:15.243

您可以在某处将您的存储库作为 zip 文件共享吗？您可能在 Google Code 的 Mercurial 实现中发现了一个错误，最好检查一下该存储库。

我建议在[https://code.google.com/p/support/issues使用指向您的仓库的链接打开一个问题](https://code.google.com/p/support/issues)

# .net - 如何使用 RestSharp 发布原始 Json？

> ID：12355777
> 
> 赞同：9
> 
> 时间：2012-09-10T16:27:27.487
> 
> 标签：.net, json, restsharp

我有一个端点，它接受一个具有消息元素的 Json 对象，然后其余的可以具有不同的属性。这是一个例子：

```
public void SendMessage(IDictionary<string, string> message)
{
    var client = new RestClient(MahUrl);
    var request = new RestRequest(Method.POST);
    var json = new JObject();

    foreach (var pair in message)
    {
        json.Add(pair.Key, pair.Value);
    }
    json = new JObject(new JProperty("message", json));
    // {
    //     "message":
    //     {
    //         "prop1": "val1",
    //         "foo": "bar",
    //         "batman": "robin"
    //     }
    // }

    // not quite sure here
    request.?

    // send request
} 
```

我已经看过一堆关于如何序列化/反序列化 .Net 对象的示例，但正如您所见，json 对象的属性可以是任何东西。如何使用 RestSharp 发布原始 json？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-01-28T13:15:41.587

我相信以下代码段是您正在寻找的。

```
request.AddParameter("application/json", json, ParameterType.RequestBody); 
```

# java - java中自动计算圈复杂度的工具？

> ID：12355783
> 
> 赞同：7
> 
> 时间：2012-09-10T16:27:54.917
> 
> 标签：java, cyclomatic-complexity

是否有任何可用于 Java 的工具可以自动确定给定 Java 代码的圈复杂度？我在网上找了工具，还没有找到。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T16:33:33.530

我使用声纳（我的首选方法）。有一些插件可以在构建时“自动”生成报告（即 ANT/Maven 等）。

关于如何在仪表板上显示 CC 的另一篇相关文章：[如何列出具有最大圈复杂度的方法](https://stackoverflow.com/questions/8383779/how-to-list-methods-with-most-cyclomatic-complexity)

我过去使用的另一种工具是 corbetura。不过，您必须进行良好的单元测试，并且找到 CC 的定量分析有点棘手。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T16:33:39.187

[Sonar](http://www.sonarsource.org/)产生的指标之一是[Cyclomatic Complexity](http://docs.codehaus.org/display/SONAR/Java+Metric+Definitions#JavaMetricDefinitions-Complexity)。
我相信它也有一个 Eclipse 插件（但我还没有设法找到它）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T20:19:14.147

Agitar Technologies ( [http://www.agitar.com/solutions/products/agitarone.html](http://www.agitar.com/solutions/products/agitarone.html) ) 的 AgitarOne 在其仪表板报告中计算圈复杂度，并在 Eclipse 中使用代码规则插件。[另请注意，Agitar Technologies 的姊妹公司 McCabe Software ( http://www.mccabe.com](http://www.mccabe.com) ) 的McCabe IQ还计算 Java 的圈复杂度（又名 McCabe 复杂度），并具有用于项目设置的 Eclipse 插件。

# java - 如何在 unix 上找到我正在运行的 jar 文件路径？

> ID：12355785
> 
> 赞同：1
> 
> 时间：2012-09-10T16:27:57.667
> 
> 标签：java, netbeans, jar

我有一个 .jar 文件。我想要它运行时的路径。

我使用此代码： `System.getProperty("user.dir")`它适用于 Windows，但不适用于 unix

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T16:41:43.307

如果你真的需要这个，这里有一个解决方案：

```
MyClass.class.getProtectionDomain().getCodeSource().getLocation().getPath(); 
```

然而，它远非漂亮;)。考虑使用其他机制。（来源：[我的幻灯片](http://www.slideshare.net/miquelmartin/java-pitfalls-and-goodtoknows)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T18:29:12.007

答案是 ：

在窗口中：

```
String yourJarName="yourJarName.jar"; 
String Jar_path= MyClass.class.getProtectionDomain().getCodeSource().getLocation().getPath().replace(yourJarName,"").substring(1); 
```

在 unix 中：

```
 String yourJarName="yourJarName.jar"; 
    String Jar_path= MyClass.class.getProtectionDomain().getCodeSource().getLocation().getPath().replace(yourJarName,""); 
```

# javascript - jquery - 用动画改变背景

> ID：12355786
> 
> 赞同：0
> 
> 时间：2012-09-10T16:28:08.697
> 
> 标签：javascript, jquery

我的下拉菜单有以下代码：

```
 <ul>

    <li><a href="#">Menu 1</a></li>
    <li><a href="#">Menu 2</a></li>
    <li><a href="#">Menu 3</a></li>
    <li><a href="#">Menu 4</a></li>
    <li><a href="#">Menu 5</a></li>
    <li><a href="#">Menu 6</a>
      <ul>
        <li><a href="#"> Menu 6.1</a></li>
      </ul>
    </li>
    <li><a href="#">Menu 7</a></li>
  </ul>

</div> 
```

使用以下CSS：

```
#nav-menu li a
{
    background-image:url('../images/menu_background.png');  
    background-repeat:repeat-x;
    background-position: left top;
    height: 35px;
    line-height: 35px;
    float: left;
    width: 144px;
    display: block;
    color: #f3f6fb;
    font-size: 13px;
    font-weight: bold;
    text-decoration: none;
    text-align: center;
}

#nav-menu li a:hover
{
    background-image:url('../images/menu_background_hover.png');  
    background-repeat:repeat-x;
    background-position: left top;
    height: 35px;
    line-height: 35px;
    float: left;
    width: 144px;
    display: block;
    color: #f3f6fb;
    text-decoration: none;
    text-align: center;
} 
```

当我将鼠标悬停在下拉菜单项上时，背景图像会发生变化。我想使用 jquery 或 javascript 为悬停动作设置动画，以使背景颜色变化更加平滑/动画。

最简单的方法是什么？

非常感谢您的建议。

# ios - 为什么当样本缓冲区不为空时 jpegStillImageNSDataRepresentation 会抛出异常？

> ID：12355788
> 
> 赞同：5
> 
> 时间：2012-09-10T16:28:10.323
> 
> 标签：ios, avcapture

在 iOS 中，我使用代码从 AVCaptureStillImageOutput 捕获，因此：

[_captureStillOutput captureStillImageAsynchronouslyFromConnection: _captureConnection completionHandler: asyncCaptureCompletionHandler];

为了简化我的代码，我的 asyncCaptureCompletionHandler 块如下所示：

```
void(^asyncCaptureCompletionHandler)(CMSampleBufferRef imageDataSampleBuffer, NSError *error) = 
^(CMSampleBufferRef imageDataSampleBuffer, NSError *error) {
    if (CMSampleBufferIsValid(imageDataSampleBuffer)) {
        NSData *imageData = [AVCaptureStillImageOutput jpegStillImageNSDataRepresentation:imageDataSampleBuffer];
        UIImage *image = [[UIImage alloc] initWithData:imageData];                                                                 
    }
} 
```

我已经通过了我的所有代码并与堆栈溢出交叉引用，并且没有发现任何建议为什么会在没有正确 JPEG 的情况下捕获有效的样本缓冲区。

```
_captureStillOutput = [[AVCaptureStillImageOutput alloc] init];
_captureStillOutput.outputSettings = 
        [NSDictionary dictionaryWithObjectsAndKeys:
         AVVideoCodecJPEG, AVVideoCodecKey,
         nil];

if ([session canAddOutput:_captureStillOutput]) {
            [session addOutput:_captureStillOutput];
} 
```

调试器中有补充信息： *** 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“*** +[AVCaptureStillImageOutput jpegStillImageNSDataRepresentation:] - 不是 jpeg 样本缓冲区。”

在谷歌和堆栈溢出中搜索“不是 jpeg 样本缓冲区”产生的结果为零。我被困住了。呸。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-11-16T09:35:11.473

这个问题很老，但很金。我来自未来，可以确认这仍然会在 2015 年发生。我尝试通过相同的步骤来解决问题，但无济于事。然而，这个问题让我意识到，当它在完成处理程序`CMSampleBufferRef imageDataSampleBuffer`之外处理时，它的行为很奇怪。`captureStillImageAsynchronouslyFromConnection`

简而言之：

```
[self.stillImageOutput captureStillImageAsynchronouslyFromConnection:connection
                                                       completionHandler:^( CMSampleBufferRef imageDataSampleBuffer, NSError *error )
    {
        //call another method to handle the sample buffer causes weird behaviour
        //maybe the buffer is not being safely referenced by AVFoundation?
        [self handleBufferSomewhereElse:imageDataSampleBuffer]; //will behave strangely
        //even more so if you move to another thread
    }]; 
```

**更喜欢这样做**：

```
[self.stillImageOutput captureStillImageAsynchronouslyFromConnection:connection
                                                       completionHandler:^( CMSampleBufferRef imageDataSampleBuffer, NSError *error )
    {
        //handle the buffer right here
        NSData *data = [AVCaptureStillImageOutput jpegStillImageNSDataRepresentation:imageDataSampleBuffer]; 
        //works better
    }]; 
```

希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T16:59:29.210

此解决方案的下一步是使用以下命令记录调试器中报告的所有数据：

```
po imageDataSampleBuffer 
```

在抛出异常时，这总是会产生很多细节，在样本缓冲区中会产生很多信息。然后自从将其发布到 SO 后，我注释掉了一些代码，然后取消注释它，现在它正在工作。我的代码没有任何变化，但是，我确实关闭了一些在 mac 上运行的程序。也许这是一个开发机器错误。在这之后，我关闭并重新打开了Xcode，并没有抛出异常。

# java - 具有透明层的 JLayeredPane 导致绘制不正确

> ID：12355789
> 
> 赞同：0
> 
> 时间：2012-09-10T16:28:31.377
> 
> 标签：java, swing, alpha-transparency, jlayeredpane, glasspane

我有一个有两层的 JLayeredPane。顶层是完全透明的，作为一个玻璃窗格，它捕获鼠标事件，然后将它们分派到它下面的窗格中。由于未知原因，底层无法正确绘制。我是否必须向它发送绘画事件或其他什么？

顺便说一句，我会使用 Frame 的玻璃窗格，但我无法做到。我被困在使用建立在 Swing 之上的 GUI 框架提供的 JPanel 上。我尝试使用 SwingUtilities 来获取父框架，但它总是返回 null。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T09:49:09.263

如果您想使用玻璃窗格并在 Swing 中捕获事件，请使用 JLayer (Java 7)。如果您不使用 Java 7，您可以使用 JXLayer ( [http://java.net/projects/jxlayer/](http://java.net/projects/jxlayer/) )。这是此行为的新 Swing 默认组件。看

*   [http://docs.oracle.com/javase/tutorial/uiswing/misc/jlayer.html](http://docs.oracle.com/javase/tutorial/uiswing/misc/jlayer.html)
*   [单个面板的 Java Swing GlassPane 功能？](https://stackoverflow.com/questions/11463870/java-swing-glasspane-functionality-for-individual-panels)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T09:13:36.833

我同意 Guillaune 的观点，这是一个非常模糊的问题。因此，您可能有充分的理由按照您的方式进行操作。但是，如果它有帮助，您可能可以完全处理透明层，只需将鼠标侦听器直接附加到 JLayeredPane：

```
JPanel jP = new JPanel();
JLayeredPane jLP = new JLayeredPane();
MouseAdapter mouse = new MouseAdapter();
jLP.addMouseListener(mouse); 
```

然后是 MouseAdapter 类：

```
public class MouseAdapter{
  //Make sure you override the methods
} 
```

另一种方式，也是我经常使用的方式，是简单地扩展 JLayeredPane 并实现 MouseListener：

```
public class MyLayers extends JLayeredPane implements MouseListener
{
  public MyLayers(){
    addMouseListener(this);
  }
//again make sure you override the methods
} 
```

这会在 NetBeans 中引发“在构造函数中泄漏 this”，但它是可以忽略的。

# ruby-on-rails-3 - 只为嵌套模型渲染表单

> ID：12355795
> 
> 赞同：0
> 
> 时间：2012-09-10T16:28:43.327
> 
> 标签：ruby-on-rails-3, nested-forms, nested-attributes, form-for, nested-form-for

我有一个名为属性的模型和一个嵌套模型 PropertyReviews。我可以使用 property 和 property_reviews 呈现单个表单。一个属性可以有多个评论，所以当我想添加另一个评论时，我不想为属性呈现表单，而只是为了评论。这是我的代码。

```
 #for fresh property (with review)
 def new
    @property = Property.new       
    @property.property_reviews.build
 end 
```

下面是属性模型：

```
class Property < ActiveRecord::Base
  has_many :property_reviews, :dependent => :destroy
  accepts_nested_attributes_for :property_reviews
end 
```

以下是视图和部分内容：

app/views/property/new.html.erb

```
<%= render :partial => 'form' %> 
```

app/views/property/_from.html.erb

```
<%= form_for @property, :html => {multipart: true} do |f| %>
    <%= render 'shared/error_messages', object: f.object %>

    <%= f.label :address, "Complete Address" %>
    <%= f.text_area :address, rows: 3 %>

    <%= f.fields_for :property_reviews do |review| %>
      <%= render "review_fields", r: review %>
    <% end %>

<%= f.submit "Submit", class: "btn btn-large btn-primary" %> 
```

app/views/property/_review_fields.html.erb

```
<p>
   <%= r.label :comments %>
   <%= r.text_area :comments, rows: 5 %>
   ..
   ..
</p> 
```

到现在为止一切都还好，因为我渲染了新的内容来创建一个带有审查的新属性。

现在我只想添加一个评论，因为属性地址是固定的，它的控制器代码如下：

```
 # add another review to existing property
  def add_new_review
    @property = Property.find(params[:id])
    @review = @property.property_reviews.build
  end 
```

视图：app/views/property/add_new_review.html.erb

```
<b><%= @property.address %></b>
<%= form_for @review do |r| %>
  <%= render "review_fields" %>

  <%= f.submit "Submit", class: "btn btn-large btn-primary" %>
<% end %> 
```

当我尝试渲染 add_new_review 页面时，出现以下错误：

```
undefined method `property_reviews_path' for #<#<Class:0xa2ac3a8>:0xa5e487c> 
```

在线的：

```
<%= form_for @review do |r| %> 
```

这是我的第一个 Rails 项目，请告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T19:53:20.787

这是因为您没有为 property_review 定义路由。为了为您的模型定义独立路径，您应该编写

```
 resources :property_reviews 
```

在路由文件中。

此链接将简要介绍有关 model_name_path 助手的信息，

[模型和嵌套表单](https://stackoverflow.com/questions/12300619/models-and-nested-forms/12301317#12301317)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T19:01:21.290

在嵌套模型中，您应该在帮助程序中使用父模型实例数组和子模型实例数组`form_for`。

试试这个代码

```
<%= form_for [@property, @review] do |r| %> 
```

希望这会有所帮助。

# php - 使用 jQuery 验证和发布

> ID：12355796
> 
> 赞同：1
> 
> 时间：2012-09-10T16:28:46.370
> 
> 标签：php, jquery, jquery-plugins

我想知道如何使用 jquery 验证和发布图片上传论坛。只有两个输入：标题和图像。如果这些字段中的任何一个为空或上传的文件格式错误，我需要给出一个错误。这是我的代码（目前不使用 jquery。）

图片.php

```
<?php

$uploadDir = 'images/'; //Image Upload Folder
if(isset($_POST['Submit']))
{
    $title = mysql_real_escape_string($_POST['title']); 
    $fileName = $_FILES['Photo']['name'];
    $tmpName = $_FILES['Photo']['tmp_name'];
    $fileSize = $_FILES['Photo']['size'];
    $fileType = $_FILES['Photo']['type'];
    $filePath = $uploadDir . $fileName;
    $result = move_uploaded_file($tmpName, $filePath);
    if (!$result) {
        echo "Error uploading file";
        exit;
    }
    if(!get_magic_quotes_gpc())
    {
        $fileName = addslashes($fileName);
        $filePath = addslashes($filePath);
    }
    $query = "INSERT INTO images(title,image) VALUES ('".$title."','".$filePath."')";
    mysql_query($query) or die (mysql_error());
}
?>

<form name="Image" enctype="multipart/form-data" action="image.php" method="POST">
<input type="text" name="title" id="title" value=""><br/><br/>
<input type="file" name="Photo" size="20" accept="image/gif, image/jpeg, image/x-ms-bmp, image/x-png"><br/>
<INPUT type="submit" class="button" name="Submit" value=" Submit ">
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T16:45:49.267

你可以验证扩展...

```
$('form').submit(function(event) {
   var file = $('input[type=file]').val();       

   if ( ! file) {
       alert('The file is required.');
       event.preventDefault();
       return;
   } 

   if (file.match(/\.(?:jpeg|jpg|gif)$/)) {
       alert('Image files only!');
       event.preventDefault();
   }

}); 
```

...或者您可以验证 mime 类型。

```
$('form').submit(function(event) {
   var file = $('input[type=file]').prop('files')[0];

   if ( ! file) {
       alert('The file is required.');
       event.preventDefault();
       return;
   } 

   var mime = file.type;

   if (mime != 'text/jpeg' || mime != 'application/gif') {
       alert('Image only!');
       event.preventDefault();
   }

}); 
```

当然，您也需要在服务器上进行验证，此代码只是对启用 JavaScript 的用户的礼貌。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T16:50:17.720

我只会使用 jQuery 验证 jQuery 库，它内置了很多验证，因此您无需担心处理多个条件，而且它非常易于使用。

[http://bassistance.de/jquery-plugins/jquery-plugin-validation/](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)

[http://docs.jquery.com/Plugins/Validation](http://docs.jquery.com/Plugins/Validation)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T16:36:27.143

你不能用 jQuery 检查文件，你可以检查它是否有正确的扩展名。要检查字段是否为空白，您可以使用：

```
if ($('#title').val() === '') {
    // error code
} 
```

您可以使用以下内容检查文件扩展名：

```
var extension = $('input[name=Photo]').val().split('.').pop();
if (extension !== "gif" && extension !== "jpg") {
    // error code
} 
```

我不确定您是否要使用 AJAX 发布文件，但您不必这样做。如果您附加了对表单提交事件的验证，您可以在出现错误时停止表单提交，否则让它提交到服务器。

```
$('form').submit(function () {
    var error = false;
    // error checking here

    if (error) {
        return false;
    }
}); 
```

# jquery - 在 jquery 切换功能上更改图像

> ID：12355799
> 
> 赞同：1
> 
> 时间：2012-09-10T16:28:59.050
> 
> 标签：jquery, toggle

我试图在使用 jquery 切换时使用 replace 命令更改图像。基本上显示一个向下的箭头，在显示内容后变为向上的箭头。以下代码有效，但向下箭头没有被替换。

```
<img src="/images/arrow_down.png" id="#1" class="nav-toggle">
<div id="1" style="display:none">some content</div> 
```

这是jQuery代码

```
jQuery('document').ready(function($) {
    jQuery('.nav-toggle').click(function() {
        var collapse_content_selector = $(this).attr('id');
        var toggle_switch = $(this);
        $(collapse_content_selector).toggle(function() {
            if ($(this).css('display') == 'none') {

            } else {
                toggle_switch.attr("src").replace("down", "up");
            }
        });
    });
});​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T16:49:05.770

你应该使用类似的东西；

```
jQuery('.nav-toggle').click(function() {
        var collapse_content_selector = $(this).attr('id');
        var toggle_switch = $(this);
        $(collapse_content_selector).toggle(function() {
            if ($(this).css('display') == 'none') {
                toggle_switch.attr("src", toggle_switch.attr("src").replace("image_2.jpg", "image_1.jpg"));
            } else {
                toggle_switch.attr("src", toggle_switch.attr("src").replace("image_1.jpg", "image_2.jpg"));
            }
        });
    }); 
```

***[这](http://jsfiddle.net/blasteralfred/kYXcu/)***是一个现场演示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T16:30:30.310

您没有将其分配回 src，请尝试：

```
toggle_switch.attr("src", toggle_switch.attr("src").replace("down", "up")); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-10T16:36:04.293

代码越少越好。

HTML

```
<a href="#" id="#arrow-toggle">
    <img src="/images/arrow_down.png">
    <img src="/images/arrow_up.png" class="up" style="display: none;">
</a>
<div id="content" style="display:none">some content</div> 
```

jQuery

```
(function($) { 

    $('#arrow-toggle').click(function(event) {
        event.preventDefault();
        $('img:visible', this).hide().siblings().show();
        $('#content').toggle($('img:visible').is('.up'));
    });

})(jQuery); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-24T10:01:20.780

HTML

```
<img src="/images/arrow_down.png" id="#1" class="nav-toggle">
<div id="1" style="display:none">some content</div> 
```

jQuery

```
$(function(){
  $('.nav-toggle').on('click', function(){
    var t = $(this);
    var imgSrc = t.attr('src');
    var divId = t.attr('id');
    $(divId).toggle('slow', function() {
      if (imgSrc === '/images/arrow_down.png') {
        t.attr({'src' : '/images/arrow_up.png'});
      } else {
        t.attr({'src' :'/images/arrow_down.png'});
      }
     });
  });
}); 
```

试试这个

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-16T00:23:00.700

```
$("div#id").slideToggle(function() {
            if ($(this).css('display') == 'none') {
                $("div#id").css({'background-image':'url(css/img/nav_plus.gif)'});
            } else {
                $("div#id").css({'background-image':'url(css/img/nav_minus.gif)'});
            }
        }); 
```

另一个简单的解决方案可能是可以帮助某人；）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-10T16:33:25.053

我认为您应该尝试[jQuery.UI.toggleSwitch()](http://taitems.github.com/UX-Lab/ToggleSwitch/index.html)

# java - 在 Android 中使用属性解析 XML

> ID：12355808
> 
> 赞同：0
> 
> 时间：2012-09-10T16:29:28.813
> 
> 标签：java, android, xml

我正在尝试解析一个 xml 文件（来自资产），但是我无法正确处理。

通常当我这样做时，我会像下面这样格式化我的 xml 文件：

```
<channel>
  <item>
    <name>Hello Earth</name>
    <place>Earth</place>
  </item>
  <item>
    <name>Goodbye Mars</name>
    <place>Mars</place>
  </item/>
</channel> 
```

我会使用下面的代码来解析出我需要的东西：

```
AssetManager assetManager = getAssets();
InputStream inputStream = assetManager.open("words.xml");

DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
factory.setCoalescing(true);
DocumentBuilder builder = factory.newDocumentBuilder();

Document dom = builder.parse(inputStream);      

org.w3c.dom.Element root = dom.getDocumentElement();
NodeList items = root.getElementsByTagName("item");     

String name="";
String place="";

for (int i = 0; i < items.getLength(); i++) {
Node item = items.item(i);
NodeList properties = item.getChildNodes();

for (int j = 0; j < properties.getLength(); j++) {
    Node property = properties.item(j);
    String propertyName = property.getNodeName();

    if (propertyName.equalsIgnoreCase("name")) {
        String strText = property.getFirstChild()
        .getNodeValue();
        nam = strText;
    }

    if (propertyName.equalsIgnoreCase("place")) {
        String strText = property.getFirstChild()
        .getNodeValue();
        place = strText;
    }

    db.insertWord(name, place);
} 
```

但是 xml 来自另一个来源并且格式不同，它使用属性代替，因为它是 mysql 导出。这是我必须解析的 XML，但我不知道该怎么做，我尝试使用 getAttribute() 方法，但无法从 xml 中获取数据：

```
<table name="item">
  <column name="name">Hello Earth</column>
  <column name="place">Earth</column>
</table>
<table name="item">
  <column name="name">Goodbye Mars</column>
  <column name="place">Mars</column>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T16:31:29.840

试试这些......

**1.** `DOM PARSER`

**2.** `SAX PARSER`

**3.** `JAXB AND JAXP`

**4.** `CASTOR`

**5.** `Pull Parser`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T17:08:45.010

您可以使用拉解析器尝试此操作，如下所示..

//定义类项

```
class Item
{
   String name;
   String place;
}

 ArrayList<Item>items=new ArrayList<Item>();

void somemethod()
{

AssetManager assetManager = getAssets();
 InputStream inputStream = assetManager.open("words.xml");

Item item=new Item();
try
        {
             XmlPullParserFactory factory = XmlPullParserFactory.newInstance();
             factory.setNamespaceAware(true);
             XmlPullParser xpp = factory.newPullParser();
             xpp.setInput(inputStream,null);
             int eventType = xpp.getEventType();
             while (eventType != XmlPullParser.END_DOCUMENT) 
             {
                 if(eventType == XmlPullParser.START_DOCUMENT) 
                  { }                 
                 else if(eventType == XmlPullParser.START_TAG)
                 {
                     try 
                     {                          
                             if(xpp.getName()!=null&& xpp.getName().equalsIgnoreCase("name"))
                              {
                                   eventType = xpp.next();
                                   item.name=Integer.parseInt(xpp.getText().toString());
                              }
                             else if(xpp.getName()!=null&& xpp.getName().equalsIgnoreCase("place"))
                              {
                                   eventType = xpp.next();
                                   item.place=xpp.getText().toString();
                              }                     
                        } 
                     catch (Exception e) 
                        {
                            //e.printStackTrace();
                        }
                 }
                 else if(eventType == XmlPullParser.END_TAG) 
                 {
                     if(xpp.getName()!=null&& xpp.getName().equalsIgnoreCase("content"))
                      {
                           eventType = xpp.next();  
                           items.put(item);
                           item=new Item();
                      }
                 }
                 else if(eventType == XmlPullParser.TEXT) 
                 {}
                 eventType = xpp.next();       
         }// end of while                    

        }
        catch (XmlPullParserException e) 
        {
            //e.printStackTrace();
        } 
        catch (IOException e) 
        {
          //e.printStackTrace();
        }
        finally
        {
            try 
            {
                if(inputStream!=null)
                    inputStream.close();
            } catch (IOException e) 
            {               
            }
        }

    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T17:44:28.807

看看这个问题的答案。有一个如何处理属性的示例：

[如何在 android 中使用 xmlpullparser 从嵌套的 xml 中提取文本？](https://stackoverflow.com/questions/9469028/how-do-i-extract-text-from-a-nested-xml-using-xmlpullparser-in-android/9469483#9469483)

# php - 按标签或文本字段和 MySQL 的 FULL TEXT 搜索方法

> ID：12355814
> 
> 赞同：0
> 
> 时间：2012-09-10T16:29:49.303
> 
> 标签：php, mysql, search, full-text-search

我有这个 MySQL 表

```
id | description | tags         |
1    hi man       tag1;tag2;tag3
2    hi woman     tag0;tag2;tag9 
```

我想知道建立一个简单的搜索引擎的最佳实践是什么？是否可以仅使用 MySQL 查询来获得搜索关键字优先级，或者需要更复杂的东西，例如 elasticsearch、lucene、sphinx 等.. ??

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T16:35:51.573

只是用空格分隔标签，而不是用分号。然后将 FULLTEXT 索引添加到您的表中。

极客资源：[http ://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html](http://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html)

更友好的资源：[http ://www.artfulcode.net/articles/full-text-searching-mysql/](http://www.artfulcode.net/articles/full-text-searching-mysql/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T16:49:01.063

您可以使用 MySQL 进行全文搜索

请参阅示例：- [http://devzone.zend.com/26/using-mysql-full-text-searching/](http://devzone.zend.com/26/using-mysql-full-text-searching/)

但作为一种性能，与 elasticsearch、lucene、sphinx 等相比，全文搜索是一种慢速搜索。

因此，如果您想要非常快的性能，请使用 elasticsearch、lucene、sphinx 等。对于正常速度，您可以使用简单的全文搜索

# webgl - 在 Three.js Picking Ray 中，对象如何仅移动 X、Z？不是Y

> ID：12355817
> 
> 赞同：0
> 
> 时间：2012-09-10T16:30:04.910
> 
> 标签：webgl, three.js, mouse-picking, ray-picking

现在对象向各个方向移动。但我想对象只移动 X 或 Z，而不是 Y。

我试试这个。但结果并不好。

在鼠标移动

```
// OBJECT SELECTED
if ( SELECTED ) 
{       
    var intersects = ray.intersectObject( PICKING_PLANE );SELECTED.position.set( intersects[ 0 ].point.x, 0, intersects[ 0 ].point.y ); /*SELECTED.position.copy( intersects[ 0 ].point.subSelf( offset ) );*/
    return;
} 
```

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T17:06:09.067

存储开始拖动对象时的 Y 位置。然后在拖动时应用该 Y 位置。

# oracle - 数据过滤查询

> ID：12355819
> 
> 赞同：0
> 
> 时间：2012-09-10T16:30:08.180
> 
> 标签：oracle

我的表有看起来像的数据

```
REF_NO  PRODUCT  MTR 
1       200       20
1       200       21
1       300       35
1       400       42
2       200       21
2       399       31 
```

现在我希望 REF_NO 和 PRODUCT 相同但 MTR 不同的行。

# 需要的结果是：-

```
REF_NO  PRODUCT  MTR 
1       200       20
1       200       21 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T16:31:37.837

```
select t.REF_NO, t.PRODUCT, t.MTR
from (
    select REF_NO, PRODUCT    
    from MyTable
    group by REF_NO, PRODUCT
    having count(distinct MTR) > 1
) tm 
inner join MyTable t on tm.REF_NO = t.REF_NO 
    and tm.PRODUCT = t.PRODUCT 
```

[SQL 小提琴示例](http://sqlfiddle.com/#!2/303ff/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T16:35:02.553

好的。我在写这个问题时得到了所需的查询。

```
select a.REF_NO, a.PRODUCT, a.MTR 
  from MYTABLE a, MYTABLE b
where a.REF_NO = b.REF_NO, a.PRODUCT = b.PRODUCT 
   and a.MTR <> b.MTR; 
```

# android - Android GCM Sender_ID 使用情况

> ID：12355820
> 
> 赞同：0
> 
> 时间：2012-09-10T16:30:09.203
> 
> 标签：android, google-cloud-messaging

对此参数用法感到困惑。我按照 GCM 设置的步骤操作并获得了我的`senderID`. 现在我只是在我的应用程序中硬编码，如下所示？

```
intent.putExtra("sender", senderID); 
```

我的意思是`senderID`我的客户端和服务器的所有安装都一样吗？如果没有，用户在安装应用程序时如何设置他`senderID`的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T06:49:18.547

SenderId 是您从 Google API 控制台页面创建的 projectId。您应该使用此 ID 来注册 GCM。

```
GCMRegistrar.register(this, SENDER_ID); 
```

注册后可以得到如下的registrationID并保存到服务器。

```
String regId = GCMRegistrar.getRegistrationId(this); 
```

您还应该从 Google API 控制台页面获取 API 密钥，并使用该密钥向使用在客户端生成的 registrationId 的注册设备发送通知。

对于您的问题，您应该创建一个在客户端使用的 senderID 和一个在服务器端使用的 API 密钥。所有已安装的客户端都将使用相同的 senderId。

但是，请注意，您也可以使用多个 senderId。

再次阅读[教程](http://developer.android.com/guide/google/gcm/gs.html)以获取详细信息。

# unit-testing - Selenium 2 (WebDriver) 和 Phpunit 与 Symfony 2.1 的最佳捆绑包

> ID：12355821
> 
> 赞同：2
> 
> 时间：2012-09-10T16:30:10.200
> 
> 标签：unit-testing, symfony, phpunit, symfony-2.1

我有一个关于 Selenium V2 (Webdriver) 和 phpUnit 的问题，那么这个捆绑包之间最好使用它：

*   [PHP-硒](https://github.com/Nearsoft/PHP-SeleniumClient.git)
*   [门塔](https://github.com/fbrnc/Menta.git)
*   [facebook-php-webdriver](https://github.com/facebook/php-webdriver.git)

我想知道你对在我用 symfony 2.1 开发的项目中使用它的好方法的看法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T16:45:13.700

如果您想使用 Selenium 进行功能测试，最好的办法是使用[Behat](http://behat.org/)和[Mink](http://mink.behat.org/)，它们是出色的工具，并且由于[Symfony2 Extension](http://extensions.behat.org/symfony2/index.html)与 Symfony 的集成非常好。它们并不是真正的 phpUnit 库，因为它们使用了一种不同的方法，称为 BDD（行为驱动开发）。但是它们真的很容易使用，一旦你掌握了窍门，你就会非常轻松地开发你的功能测试，你会想知道为什么你以前没有学过这个。

顺便说一句，你提到的三个工具都不是 Symfony 意义上的“包”，它们只是 PHP 库

# php - 设置 xampp 以上传文件

> ID：12355823
> 
> 赞同：1
> 
> 时间：2012-09-10T16:30:16.073
> 
> 标签：php, linux, xampp

我已经正确设置了 xampp，但是当我尝试上传带有我编写的页面的文件时，它失败了。我已将上传文件路径更改为`/opt/lampp/etc/php.ini`，`/opt/lampp/tmp/`但是当我打印时

`echo $_FILES['file']['tmp_name'];`

在一个 php 页面中它打印出来`/tmp/phpjfsfjal`

我确定这都是关于权限的，但我不知道我应该有什么设置

从 php 页面运行 whoami 显示“没人”

任何人都可以帮忙吗？

# sitefinity - 如何将图像选择器添加到 Sitefinity 自定义小部件编辑器中？

> ID：12355825
> 
> 赞同：4
> 
> 时间：2012-09-10T16:30:24.333
> 
> 标签：sitefinity, sitefinity-4, sitefinity-5

在 Sitefinity CMS 4.x 或 5.x 架构上，如何将图像选择器添加到自定义小部件？目前我必须在文本字段中输入图像路径。我希望能够使用标准选择器从 Sitefinity 库中选择图像或上传新图像。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T04:52:21.823

Sitefinity Thunder [http://visualstudiogallery.msdn.microsoft.com/381fde64-9898-4a5d-ae20-861e119bbf92](http://visualstudiogallery.msdn.microsoft.com/381fde64-9898-4a5d-ae20-861e119bbf92)可以帮助您通过将选择图像、文档或其他媒体字段的 Guid 属性为现有控件创建控件设计器

以下是雷霆文档中的一个示例：[http ://www.sitefinity.com/documentation/documentationarticles/create-selectors-for-guid-properties-in-widget-designers](http://www.sitefinity.com/documentation/documentationarticles/create-selectors-for-guid-properties-in-widget-designers)

或者，您可以按照这篇关于在控件设计器中选择 sitefinity 内容的博客文章中所述手动连接：[http ://www.sitefinity.com/blogs/joshmorales/posts/11-10-05/selecting_sitefinity_4_content_inside_widget_designers.aspx](http://www.sitefinity.com/blogs/joshmorales/posts/11-10-05/selecting_sitefinity_4_content_inside_widget_designers.aspx)

希望这会有所帮助！

# debugging - 为我的自定义 .NET 语言构建调试器

> ID：12355827
> 
> 赞同：4
> 
> 时间：2012-09-10T16:30:32.143
> 
> 标签：debugging, f#, lisp, cil

> **可能重复：**
> [为 .NET 语言构建调试器的好方法是什么？](https://stackoverflow.com/questions/12330650/what-is-a-good-approach-to-building-a-debugger-for-a-net-language)

我有一种 Lisp 风格的语言，我想为其构建调试器。我的语言在这里 - [https://github.com/bryanedds/aml](https://github.com/bryanedds/aml)。

我可能会将其编译为 IL。如果对编写调试器有帮助，我会先编写编译器。但是，我想知道构建调试器的一些方法是什么。我考虑为 Visual Studio 构建它，但这很困难，因为它似乎需要我通过 COM 与 VS 交互，这意味着我需要用 C 或 C++ 编写调试器（UGH！）。我希望 Visual Studio Debugger 开发有一个我不知道的更好的故事。

查看 SO 上 .NET 调试的其他线程，我发现 IL 包含源文件坐标，所以我想知道这是否意味着我不需要编写最初怀疑的那么多 COM 代码（EG - 步骤调试有效只要编译的 IL 具有源文件坐标，就可以在没有任何 COM 代码的情况下使用该框）。

或者，我可以考虑使用另一个 IDE，它可能对 .NET 语言调试有更好的路径。有 Eclipse，但它似乎对 .NET 语言调试没有任何特别的支持。

具有最佳调试器构建故事的 IDE 可能是 MonoDevelop。当然，我需要它与 MS .NET 一起工作，而不仅仅是 Mono。但是，它的文档相当简陋。有人有在那里构建调试器的经验吗？

所以，正如你所看到的，我相当迷失在这一切中。我只需要一些方法来构建一个带有断点的简单调试器，并为我的 .NET 语言使用变量检查进行单步调试。我更喜欢用 F# 编写大部分代码，因为那是我的语言所用的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-10T16:57:46.680

如果您要使用`System.Reflection.Emit`将语言编译为 IL，那么使用您的代码（文件）生成调试信息也应该很容易`pdb`，Visual Studio 会自动获取该信息（因此您不必*编写*调试器） .

*   [Emitting Symbolic Information with Reflection Emit](http://msdn.microsoft.com/en-us/library/a263ywy6.aspx) on MSDN 有一些关于这方面的信息。

*   你也可以看一下[TickSpec](http://tickspec.codeplex.com/)源代码，它是用 F# 编写的，并使用它在描述测试场景的文件中启用调试（如果你看视频，在主页上，你可以看到他可以放置断点在文本文件中）。

我不认为为 .NET 语言编写调试器是您需要的——Visual Studio 中已经有一个非常好的调试器，因此您只需要启用您的语言即可使用它。

# entity-framework - EF 迁移：自动迁移中的重命名列？

> ID：12355833
> 
> 赞同：18
> 
> 时间：2012-09-10T16:30:58.203
> 
> 标签：entity-framework, ef-code-first, code-first, entity-framework-5, entity-framework-migrations

如果重命名属性，Visual Studio IDE 足够智能，可以帮助您在整个代码中重构以重命名该属性。如果该重命名在 EF 迁移中使用的模型上，并且您运行标准自动迁移，例如：

```
update-database -f 
```

你会得到这个：

```
AddColumn("NewName"...
DropColumn("OldName"... 
```

不是你想要的。显然此时运行 Add-Migration 会让您进入并手动将这 2 个调用更改为对 RenameColumn 的单个调用，但是有什么方法可以让 Automatic Migrations 自动执行此操作吗？一些我做的不对的属性重命名方法，也许？

我在 VS2012 中使用 EF 5.0，但这种行为也出现在 EF 4.3.1 和 VS2010 中。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-11T19:36:05.543

迁移无法自动检测属性和列的重命名。脚手架迁移将包含一个 Drop/Create，您需要将其更改为重命名。

如果您只是重命名列（通过向属性添加 [Column] 注释），我们可以将其检测为重命名，因为我们可以匹配列映射到的属性名称。

我们确实考虑在 Add-Migration 命令中添加一个 -Renames 开关，但最终我们决定编辑生成的代码比在命令行中制定提供重命名的语法更容易。

〜罗文

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-10T19:37:43.647

我的意见：EF 不知道您已重命名现有列。重构是设计时更改，没有任何关于更改的持久信息，因此当您运行迁移时，EF 根本不知道如何区分重命名和实际删除/添加新列。

# java - 在 Java 中保存静态数据的最佳方法

> ID：12355836
> 
> 赞同：-1
> 
> 时间：2012-09-10T16:31:05.823
> 
> 标签：java, static, save

我想在许多 Java 类/对象中保存大量数据，我可以这样做：

```
public static void main(String[] args){
    System.out.println(String.valueOf(Data.Foo.bar));
    System.out.println(String.valueOf(Data.Foo.array[0].bar));
} 
```

输出：

```
True
False 
```

==== 包含所有数据的数据类：

```
public class Data {
    public class Base {
        public boolean bar = false;
        public Base[] array = {};
    }

    public class Foo extends Base {
        this.bar = true;
        this.array = {Abc};
    }
    public class Abc extends Base {}
} 
```

我**不想**创建这些类的实例，但我想访问类中的数据。数据都是最终的，不会更改，但应该由覆盖这些数据的另一个对象更改。（参见示例中的**Foo 类**）

我必须做些什么才能使其正常工作？

**编辑：** 数据类应该可以从整个程序中的每个点访问。不应存在​​ Data 类的任何实例

**编辑** 好吧，我将举一个例子，这将如何以“正常”的方式工作......

```
public class Data {
    public Foo foo = new Foo();
    public Abc abc = new Abc();

    public class Base {
        public boolean bar = false;
        public Base[] array = {};
    }

    public class Foo extends Base {
        this.bar = true;
        this.array = {abc}; //changed to abc from Abc
    }
    public class Abc extends Base {}
} 
```

我想在没有这两行的情况下引用 Foo 类和 Abc**类**：

```
 public Foo foo = new Foo();
    public Abc abc = new Abc(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T16:48:23.573

一般来说，访问类中的数据首先是违反封装或缺乏封装。如果您使用的是面向对象的编程语言，那么这两个都不是一个好主意。

假设你确实取得了一些进展，类型检查只会让事情变得更难。

它看起来很像您熟悉另一种编程语言，并询问您如何在 Java 中使用该编程语言完成常见任务。答案是，你没有。

像这样重写你的查询

```
public static void main(String[] args) {
    System.out.println(String.valueOf(Datas.getFoo().getBar()));
    System.out.println(String.valueOf(Datas.getFoo().getArray()[0].getBar()));
} 
```

或者请考虑修正你的逻辑，让它看起来少一点关于*你如何做事*，多一点关于*你在做什么*。像这样

```
public static void main(String[] args) {
    System.out.println(String.valueOf(Door.isOpen()));
    System.out.println(String.valueOf(Building.getDoors().atIndex(0).isOpen()));
} 
```

最后，类只存在于概念上，当JVM运行时，每一件事物都是一个类的实例。正在运行的 JVM 只处理实例。如果您想避免重复实例，那很好；但是，如果你想避免处理实例，那是不可能的。尝试这样做只会导致试图使该语言表现得像另一种语言，无论您如何看待它都会给您带来不好的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T16:44:18.473

嗯，我不知道我是否理解你的问题，但是..

你不想创建实例..你想在整个程序中有 1 个实例？您是否使用线程？

我建议您将类设为**静态**。静态引用只是整个程序中的一个，您不需要创建任何其他实例。

**没有静态**字段和类的另一种方法是通过**引用**调用类（引用与 c/c++ 中的指针“相等”）..因此，您将在 main 方法中仅创建一个实例，然后调用一些方法或任何带有引用的方法这个例子。。

好的方法是使用**单例**对象。单例是对象编程中的一种**设计模式**。在那里你有 100% 的保证，该对象将只是整个程序中的一个..单例是基于静态字段的..所以我认为你不需要像单例这样“硬”的东西（但这对你有好处了解一些关于单例的东西），最好只使用静态字段和静态类

# c# - 在后面的代码中获取和设置绑定转换器

> ID：12355837
> 
> 赞同：2
> 
> 时间：2012-09-10T16:31:12.483
> 
> 标签：c#, silverlight, xaml, windows-phone-7, windows-phone-8

我以这种方式在我的 XAML`Text`中为 a 的属性设置了绑定：`TextBlock`

```
<TextBlock x:Name="MyTextBlock" TextWrapping="Wrap" Text="{Binding TextProperty, Converter={StaticResource MyConverter}}"/> 
```

我想从当前使用的代码隐藏更改转换器。如何从后面的代码中获取和设置绑定的转换器？我喜欢这样的东西：

```
if (converter = x)
    converter = y;
else
    converter = x; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T16:46:09.207

您需要获取绑定本身：

```
//For WPF:
// var binding = BindingOperations.GetBindingBase(
//     MyTextBlock,
//     TextBlock.TextProperty);

//For SilverLight we have to use the expression:
var expr = MyTextBlock.GetBindingExpression(TextBlock.TextProperty);
if (expr != null)
{
    // for Silverlight we have to use the ParentBinding of the expression
    var binding = expr.ParentBinding;
    binding.Converter = yourLogicHere;

    // in WPF there are 3 types of bindings
    /*
    else if (binding is MultiBinding)
    {
        ((MultiBinding)binding).Converter = yourMultiLogicHere;
    }
    else if (binding is PriorityBinding)
    {
        foreach (var childBinding in ((PriorityBinding)binding).Bindings)
        {
            ((Binding)childBinding).Converter = yourLogicHere;
        }
    }
    */
} 
```

# jquery - Javascript 在 MVC 项目中不起作用

> ID：12355838
> 
> 赞同：0
> 
> 时间：2012-09-10T16:31:14.620
> 
> 标签：jquery, asp.net-mvc

我在 ASP.NET MVC 项目中使用模板。模板在这里 - [http://themeforest.net/item/lagu-admin-premium-template/687301](http://themeforest.net/item/lagu-admin-premium-template/687301)

除了标签脚本之外，一切似乎都在工作。这适用于纯 html 版本，但在我的 MVC 项目中它不起作用。

这是页面末尾的脚本

```
<script type="text/javascript">  
        head.js(
            "/Content/js/jquery-1.6.2.min.js",
            "/Content/lib/jquery-ui/jquery-ui-1.8.15.custom.min.js",
            "/Content/lib/harvesthq-chosen/chosen.jquery.min.js",
            "/Content/lib/fusion-charts/FusionCharts.js",
            "/Content/lib/fancybox/jquery.easing-1.3.pack.js",
            "/Content/lib/fancybox/jquery.fancybox-1.3.4.pack.js",
            "/Content/lib/file-uploader/fileuploader.js",
            "/Content/lib/tiny-mce/jquery.tinymce.js",
            "/Content/js/jquery.microaccordion.js",
            "/Content/js/jquery.tools.min.js",
            "/Content/js/jquery.stickyPanel.js",
            "/Content/js/xbreadcrumbs.js",
            "/Content/lib/jquery-validation/jquery.validate.js",
            "/Content/js/lagu.js",
            function(){
                lga_fusionCharts.chart_k();
                lga_wizard.init();
                lga_flowTabs.tabs_b();
                lga_selectBox.init();
                lga_datepicker.init();
                lga_editor.init();
                lga_sticky.sticky_contentActions();
                lga_clearForm.init();
                lga_form_a_validation.init();
            }
        )
    </script> 
```

当我查看源代码时，lagu.js 文件的正确位置在那里，但 lga_flowTabs 函数似乎不起作用。

html 版本完全相同，但没有“内容”文件夹。

无论如何我可以调试它并找出为什么该功能没有在 MVC 应用程序中被击中？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T19:29:08.770

如果使用此代码的文件是 cshtml（假设您在 MVC3 项目上使用 Razor），也许您可​​以试试这个

```
<script type="text/javascript">  
        head.js(
            "@Url.Content("~/Content/js/jquery-1.6.2.min.js")",
            "@Url.Content("/Content/lib/jquery-ui/jquery-ui-1.8.15.custom.min.js")",
            "@Url.Content("/Content/lib/harvesthq-chosen/chosen.jquery.min.js")",
            "@Url.Content("/Content/lib/fusion-charts/FusionCharts.js")",
            "@Url.Content("/Content/lib/fancybox/jquery.easing-1.3.pack.js")",
            "@Url.Content("/Content/lib/fancybox/jquery.fancybox-1.3.4.pack.js")",
            "@Url.Content("/Content/lib/file-uploader/fileuploader.js")",
            "@Url.Content("/Content/lib/tiny-mce/jquery.tinymce.js")",
            "@Url.Content("/Content/js/jquery.microaccordion.js")",
            "@Url.Content("/Content/js/jquery.tools.min.js")",
            "@Url.Content("/Content/js/jquery.stickyPanel.js")",
            "@Url.Content("/Content/js/xbreadcrumbs.js")",
            "@Url.Content("/Content/lib/jquery-validation/jquery.validate.js")",
            "@Url.Content("/Content/js/lagu.js")",
            function(){
                lga_fusionCharts.chart_k();
                lga_wizard.init();
                lga_flowTabs.tabs_b();
                lga_selectBox.init();
                lga_datepicker.init();
                lga_editor.init();
                lga_sticky.sticky_contentActions();
                lga_clearForm.init();
                lga_form_a_validation.init();
            }
        )
    </script> 
```

另外，也许是个愚蠢的问题，但是，您的脚本不应该在`Scripts`文件夹上而不是`Content`?

# java - Java 6 - 创建和检测 Long.MAX_VALUE 以上的第一个双精度值

> ID：12355839
> 
> 赞同：2
> 
> 时间：2012-09-10T16:31:18.527
> 
> 标签：java, casting, double, long-integer, max

下面我尝试分配`value`最大值`Long`，然后添加可能的最小正值`Double`。

然后我尝试检测该值是否大于最大值`Long`。

```
Double value = new Long(Long.MAX_VALUE).doubleValue();
value += Double.MIN_VALUE;
if (value < -(new Long(Long.MAX_VALUE).doubleValue()) || value > new Long(Long.MAX_VALUE).doubleValue()) {
  // Expecting code here to execute, but it doesn't.
} 
```

研究所涉及的值表明，`value`最终值为

```
9.223372036854776E18
= 9223372036854776000 
```

虽然`Long.MAX_VALUE`有价值

```
9223372036854775807 
```

比较这些显示，`value`如预期的那样更大：

```
9223372036854776000 (value)
9223372036854775807 (Long.MAX_VALUE) 
```

有人可以解释为什么该`if`声明无法检测到这一点吗？

真诚的感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T16:37:19.513

`Long.MAX_VALUE`不能完全表示为双精度。最接近的可用双精度值是`9223372036854775808`。

添加`Double.MIN_VALUE`到该数字 (10^-1074) 不会改变任何内容，因为最接近的 double 值`9223372036854775808 + 10^-1074`仍然是`9223372036854775808`.

使用@PeterLawrey 的代码，您可以看到下一个可用的双精度是`9223372036854777856`（等于`Long.MAX_VALUE + 2048`）。

注意：你的双精度实际上等于`9223372036854775808`，它被**打印**为`9.223372036854776E18`。您可以使用以下代码查看它：

```
double d = Long.MAX_VALUE;
BigDecimal bd= new BigDecimal(d);
System.out.println(bd); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-10T16:34:50.563

将一个非常小的值添加到一个很大的值中与不添加任何内容相同。

我怀疑你的想法是

```
double d = Long.MAX_VALUE;
// get the next represented value.
double d1 = Double.longBitsToDouble(Double.doubleToLongBits(d)+1);
System.out.println(d > Long.MAX_VALUE);
System.out.println(d1 > Long.MAX_VALUE); 
```

印刷

```
false
true 
```

# c++ - 重构为模板

> ID：12355841
> 
> 赞同：1
> 
> 时间：2012-09-10T16:31:20.687
> 
> 标签：c++, templates, crtp

我想写一些字符串包装器，如果它对其类型有效，它们将接受一个字符串：

*   `Length`有效字符串：*mm、m、ft、in*
*   `Angle` 有效字符串：*度、弧度*

我想像这样的用途：

```
Length len = read_from_keyboard(); // or some means of initialization
if( len.is_valid() )   { ...   } 
```

所以我写了这些实现。

```
struct Length
{
  QString m;

  Length() {}

  Length( QString s )   {   if( is_valid_string(s) )  {  m = s; }      }

  QString operator() () {   return m;      }

  bool is_valid()       {   return is_valid_string(m);      }

  static bool is_valid_string( QString s ) { 
    return s == "mm" || s=="m" || s=="ft" || s=="in";
  }
}; 
```

和

```
struct Angle{
  QString m;

  Angle() {}

  Angle( QString s )    {   if( is_valid_string(s) )  {  m = s; }      }

  QString operator() () {   return m;      }

  bool is_valid()       {   return is_valid_string(m);      }

  static bool is_valid_string( QString s ) { 
    return s == "deg" || s=="rad";
  }
}; 
```

在我看来，这似乎是某种形式的静态多态性，`is_valid_string()`这是它们在实现上的唯一区别。

由于我有很多这样的类，我想到了使用静态继承（而不是通过虚拟）来掌握通用功能。

所以，我想到了使用*奇怪的重复模板模式*：

```
template <class T>
struct ConstrainedText {
  QString m;

  ConstrainedText() {}

  ConstrainedText( QString s ) {   if( T::is_valid_string(s) )   {  m = s;  }    }

  QString operator() ()        {   return m;      }

  bool is_valid()              {   return T::is_valid_string(m);    }

};

struct Angle : public ConstrainedText<Angle> {
   static bool is_valid_string( QString s ) { 
      return s == "deg" || s="rad";
   }  
};

struct Length : public ConstrainedText<Angle> {
   static bool is_valid_string( QString s ) { 
      return s == "mm" || s="m" || s=="ft" || s=="in";
   }  
}; 
```

但现在我失去了基类中的隐式构造函数，我必须重写它们！

有没有其他方法可以实现它以便拥有相同的接口 [`default constructor`和]`implicit constructor`并且`is_value()`只为不同的部分（静态）编写最少的代码`is_valid_string()`？

我知道我可以使用预处理器，但我希望代码对调试器友好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T16:40:19.360

构造函数不是继承的，你不能用`using`.

在 C++11 中，您可以使用可变参数模板和完美转发：

```
template<typename... Args> Derived(Args &&...args):
    Base(std::forward<Args>(args)...) {} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T17:27:03.993

正如其他人所指出的，由于构造函数不是继承的，因此您必须重新定义它们。但是，您可以[在 ideone.com 上执行类似的代码](http://ideone.com/EP5C4)：

```
#include <string>
#include <stdexcept>
#include <iostream>

template <class T>        
class ConstrainedText {        
  std::string m;                 

protected:
  ConstrainedText() {}
  ~ConstrainedText() {}
public: 
  bool is_valid() {        
    return T::is_valid_string(m);        
  }        

  static T Create(std::string const & s)
  {
      if (T::is_valid_string(s)) {
          T t;
          static_cast<ConstrainedText<T>&>(t).m = s;
          return t;
      }

      throw std::runtime_error("invalid input!");
  }
};        

struct Angle : public ConstrainedText<Angle> {        
   static bool is_valid_string( std::string s ) {         
      return s == "deg" || s=="rad";        
   }          
};        

struct Length : public ConstrainedText<Length> {        
   static bool is_valid_string( std::string s ) {         
      return s == "mm" || s == "m" || s == "ft" || s == "in";        
   }          
};        

int main()
{
   auto a = Angle::Create("deg");
   auto l = Length::Create("mm");

   try {
       Angle::Create("bimbo");
   } catch (std::runtime_error & pEx) {
       std::cout << "exception as expected" << std::endl;
   }

   try {
       Length::Create("bimbo");
   } catch (std::runtime_error & pEx) {
       std::cout << "exception as expected" << std::endl;
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T16:54:55.510

由于构造函数在 C++ 中永远不会被继承（如果没有定义构造函数，则默认除外），您要么自己再次实现它们，要么模板化（使用或不使用 C++11 可变参数模板）以使编译器与构造函数匹配。但是请注意，这样做会使文档和编译器错误更难解释，因为无意义的模板构造函数添加了（有时）令人困惑的抽象层。

预处理器运算符也可以解决这个问题，但我只会在构造函数非常简单且易于在所有继承者之间复制的情况下这样做。

所以一般来说，如果你可以干净地生成一个继承的默认构造函数和一个隐式构造函数，答案是否定的。但是上面概述的两种方法会以一种有点混乱但自动的方式来完成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T08:37:44.003

我使用了一个*策略*，它节省了一天。现在我不必重写构造函数，只需要实现`is_valid_string()`. 它现在也兼容 C++98。

```
template <class Policy>
struct ConstrainedText {
  QString m;

  ConstrainedText() {}

  ConstrainedText( QString s ) {   if( Policy::is_valid_string(s) )   {  m = s;  }    }

  QString operator() ()        {   return m;      }

  bool is_valid()              {   return Policy::is_valid_string(m);    }

};

struct Angle_policy {
   static bool is_valid_string( QString s ) { 
      return s == "deg" || s="rad";
   }  
};

struct Length_policy {
   static bool is_valid_string( QString s ) { 
      return s == "mm" || s="m" || s=="ft" || s=="in";
   }  
};

typedef ConstrainedText<Length_policy> Length;
typedef ConstrainedText<Angle_policy>  Angle; 
```

谢谢大家的帮助

# c# - 在 C# 中使用多个资源管理器

> ID：12355845
> 
> 赞同：0
> 
> 时间：2012-09-10T16:31:34.107
> 
> 标签：c#, visual-studio, resourcemanager

我想知道以下是否可行：

我有 2 个资源管理器 A 和 B。只有 A 具有所有字符串条目，而 B 只有 A 中某些条目的一些替代值。

前任：

```
A.foo
A.bar
B.bar 
```

我希望能够做类似 B.foo 的事情，因为 foo 在 B 中不存在但存在于 A 中，所以它会返回 A.foo。但如果 B.bar 存在，我希望它返回 B.bar 而不是 A.bar。

这可能吗？（我想获取没有字符串选择器的条目，以确保编译时代码的正确性）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T18:02:40.087

我不确定您的类（A 和 B）中是否有任何层次结构，但如果有的话，这似乎是虚拟方法的一个很好的用例。

例如：

```
public class A
{
    public virtual string foo()
    {
        return "A Foo";
    }

    public string bar()
    {
        return "A Bar";
    }
}

public class B:A
{
    public override string foo()
    {
        return "B Foo";
    }
} 
```

B类继承A类。通过将A类中的方法标记为virtual，可以覆盖B类中的方法。如果B类没有实现method `Bar()`，`Bar()`则会调用A类的方法。

这是你想要的吗？

# r - Gephi中的动力学

> ID：12355852
> 
> 赞同：1
> 
> 时间：2012-09-10T16:31:58.737
> 
> 标签：r, social-networking, igraph, gephi

我想做一个有一些动态的社交网络分析图。我想要的动态是在某些日期我希望节点更改颜色和标签，但我希望链接保持不变。R 中有一些包可以进行社交网络分析，例如`igraph`, `igraph0`，但是这些包在可视化方面非常有限。`network``sna`

我也尝试过 Gephi，并且在动态方面取得了一些成功，我可以让节点/链接在某些时间点出现/消失。（如果人们愿意，可以给出这个代码）。但就我想要的动态而言，如上段所述，我在网上看到，目前gephi无法做到这样的动态。

因此，我的问题是：是否会有一个 gephi 版本可以进行这种动态处理，或者什么是可以进行这种动态处理的最好的开源社交网络分析可视化软件？

提前喝彩

PS我不确定要在什么标签下标记问题，所以我选择了gephi和R。如果有更好的标签我应该使用，请纠正我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T05:56:29.670

您所描述的动态似乎非常简单，但是如果您希望能够在图形上实现任何复杂的动态，同时产生一个很好的可视化效果，那么解决您的问题的一个好方法是使用 Gephi Graph Streaming 插件 ( [https://gephi.org/plugins/graph-streaming/](https://gephi.org/plugins/graph-streaming/) )，加上一些你最喜欢的脚本语言的脚本。

使用这个插件，您可以在一个可视化端点中转换您的 Gephi 流程，该端点接收 REST 请求以更新图形，并且您可以使用任何可以发送 HTTP 请求的编程语言来实现您的动态流程。

在此存储库中查看一些使用 Python 作为脚本语言的示例： [https](https://github.com/panisson/pygephi_graphstreaming/) ://github.com/panisson/pygephi_graphstreaming/ 。square.py 示例非常简单，但它展示了从图中添加和删除节点的能力，并在 Gephi 中可视化。此外，在更新图表时，您还可以使用 Gephi 实时运行分析和布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-22T20:42:36.103

对于 R，您可能需要查看包[networkDynamic](https://cran.r-project.org/web/packages/networkDynamic/index.html) 和[ndtv](https://cran.r-project.org/web/packages/ndtv/index.html)包，用于可视化和动画化动态网络数据

# javascript - 使用 google 在 url 中搜索

> ID：12355854
> 
> 赞同：4
> 
> 时间：2012-09-10T16:32:15.253
> 
> 标签：javascript, textinput, google-search

我想用谷歌搜索我的网址。我想使用这些代码：

```
site: http://my-url.ir/ my_words_that_want_to_search 
```

然后我有一个文本输入和一个搜索按钮

我想要 HTML（或 JavaScript），当我单击按钮时，将文本输入中的文本放入

```
site: http://my-url.ir/ text_that_is_in_text_input 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T16:36:39.847

查看[Google 自定义搜索引擎](http://www.google.com/cse/)，它将为您创建此类代码片段。

根据[这个查询字符串 anatomy](http://www.blueglass.com/blog/google-search-url-parameters-query-string-anatomy/)，您可以只添加另一个参数而不是添加`site:xyz`到搜索字符串：

```
<form method="GET" action="//www.google.de/search">
    <input type="hidden" name="as_sitesearch" value="http://example.com">
    <input type="text" name="q">
    <input type="submit" value="Search!">
</form> 
```

无需为简单的搜索表单使用 JavaScript。

# ruby-on-rails - 如何通过 cedar 上的 ftp 将文件保存到 /tmp/

> ID：12355855
> 
> 赞同：1
> 
> 时间：2012-09-10T16:32:18.983
> 
> 标签：ruby-on-rails, heroku, cedar

我有一个 rake 任务，它连接到一个 ftp 服务器，下载一个文件，然后对其进行压缩。这在本地工作，但是当我在 heroku cedar 服务器上运行任务时，在执行 net::ftp.getbinaryfile 后我没有得到任何反馈。

这是下载文件的代码：

```
tempfile = "#{Rails.root}/tmp/#{Process.pid}_#{MyApp::Application.config.products_bbcom_file}"
      ftp = Net::FTP.new()
      puts "connecting to ftp server #{MyApp::Application.config.products_bbcom_host}"
      ftp.connect(MyApp::Application.config.products_bbcom_host)
      puts "logging in"
      ftp.login(MyApp::Application.config.products_bbcom_user,MyApp::Application.config.products_bbcom_pass)
      puts "changing directory"
      files = ftp.chdir(MyApp::Application.config.products_bbcom_path)
      #files = ftp.list('n*')
      puts "downloading file #{MyApp::Application.config.products_bbcom_file} to #{tempfile}"
      ftp.getbinaryfile(MyApp::Application.config.products_bbcom_file, tempfile, 1024)
      ftp.close 
```

当我在 heroku 上执行任务时： heroku run rake db:import 并跟踪我看到的日志：

```
2012-09-10T16:26:24+00:00 heroku[run.1]: Awaiting client
2012-09-10T16:26:24+00:00 heroku[run.1]: Starting process with command `bundle exec rake db:import`
2012-09-10T16:26:25+00:00 heroku[run.1]: State changed from starting to up 
```

任务的输出是：

```
== Starting ==
Connecting to database specified by DATABASE_URL
connecting to ftp server datatransfer.cj.com
logging in
changing directory
downloading file 
```

脚本到达尝试将文件下载到 #{Rails.root}/tmp/ 但不再响应的地步。这在本地只需要几秒钟，但我等了几分钟，任务没有做任何事情。

从 heroku 开发站点看来，您可以将文件保存到 cedar 上的 #{Rails.root}/tmp/ 。这可能吗？如果是这样，我是否采取了错误的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T19:27:26.427

可以下载文件 vit NET::FTP，但 heroku 仅支持 PASSIVE 模式 FTP。我需要指定我想使用被动模式。这是一个简化的示例：

```
ftp = Net::FTP.new()
ftp.passive = true
ftp.connect(host)
ftp.login(username,password)
files = ftp.chdir(path_to_file)
ftp.getbinaryfile(filename, tempfile, 1024)
ftp.close 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T18:06:08.367

您可以将文件保存到 ./tmp，但要知道，如果重新启动测功机，数据将会消失。此外，一个测功机无法访问另一个测功机的 tmp 目录。

对于数据处理和短期存储，tmp 目录是一个很好的地方。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-10T18:49:18.917

您是否尝试备份/导入数据库？

使用 PGBACKUPS。转储进入 S3。您可以从那里下载或导入。

[https://devcenter.heroku.com/articles/pgbackups#restoreing-from-a-backup](https://devcenter.heroku.com/articles/pgbackups#restoring-from-a-backup)

在切换到 Heroku 之前，我曾经通过 FTP 做同样的事情。pgbackups 使它变得如此容易。

# flash - “硬件加速”指的是什么？

> ID：12355856
> 
> 赞同：5
> 
> 时间：2012-09-10T16:32:31.387
> 
> 标签：flash, css, video, web, hardware-acceleration

我已经看到它主要用于参考动画和其他视觉效果。花哨的 CSS3 东西，flash 视频播放，诸如此类。我不知道我是否见过它与 Web 浏览器无关时使用它，尽管这可能只是因为我没有阅读任何与 Web 开发无关的技术文献.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-10T16:38:09.637

当您拥有旨在加速特定功能的硬件时。

因此，例如，当您对视频进行解码或编码时，您会在 CPU 上进行。一些视频卡允许您在其 GPU 上执行此操作，因此您现在拥有“硬件加速视频解码”。

因此，两个用户，一个有硬件加速，一个没有，将看到或多或少相同的视觉效果，但没有的用户可能会遇到更少的帧或分辨率等。或者这可能只是意味着计算机的不同部分变得更热，看起来两者都一样。

另一个示例，您可以使用 3D 包，您可能会获得 30 fps。如果您添加 3D 包可以直接使用的豪华显卡，您现在可以获得 60 fps。硬件加速了这个过程！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T16:37:56.373

这意味着图形渲染是在专用硬件（您的 GPU / 显卡）而不是您的 CPU 上完成的。硬件加速通常会产生更流畅的动画。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-10T15:26:08.203

确保浏览器视图设置为 100%。在 iOs 上的 Chrome 中，您可以通过按 cmd + 0 来完成。

我注意到，如果浏览器视图按比例缩小或放大，带有透明度的 png 图像将在 Flash 动画中失真。

# xcode4 - selectedRowInComponent 在 numberOfRowsInComponent 中崩溃

> ID：12355857
> 
> 赞同：2
> 
> 时间：2012-09-10T16:32:43.577
> 
> 标签：xcode4, uipickerview

我在使用 Xcode (4.4.1) 以编程方式创建的 pickerView 中有 2 个组件

```
UIPickerView *picker = [[[UIPickerView alloc] init] retain];
[picker sizeToFit];
picker.autoresizingMask = (UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight);
picker.delegate = self;
picker.dataSource = self;
picker.showsSelectionIndicator = YES; 
```

我认为不需要转储与此pickerView 相关的所有代码，因为我知道它在哪里崩溃。

pickerView 在模拟器中就像一个魅力，但是当我在 iPhone 设备（5.1.1）中测试它时，它在以下方法中崩溃：

```
- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component{
  if (component == 0) return [array1 count];
  if (component == 1) {
    NSLog(@"selectedRowInComponent:%i",[pickerView selectedRowInComponent:1]); //CRASHES HERE
    return [[array2 objectAtIndex:[pickerView selectedRowInComponent:1]] count];
  }
} 
```

它认为以下错误：

```
*** Terminating app due to uncaught exception 'NSRangeException', reason: '*** -[__NSArrayM objectAtIndex:]: index 1 beyond bounds [0 .. 0]' 
```

正如我所说，如果在模拟器中测试（没有问题），如果在设备中测试（崩溃）！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T21:23:14.330

您确定它在您指定的行而不是它之后的行上崩溃吗？

模拟器和真实设备之间经常让人绊倒的区别在于文件系统在真实设备上区分大小写，但在模拟器中不区分大小写。如果您从文件中加载选择器的数据，并且您错误地指定了大小写，这可能会导致您的问题。我见过人们多次犯这种错误。查看`array2`并确保它包含您认为的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-16T15:20:31.553

有同样的问题......只在ios8上崩溃。奇怪的是，当我还原组件时，我遇到了这个问题。（反转 0 和 1）

将 [pickerView selectedRowInComponent:1] 替换为保存当前选定行的属性，因为存在并发问题

# php - 一个电子邮件地址中可以有多少个@符号？

> ID：12355858
> 
> 赞同：24
> 
> 时间：2012-09-10T16:32:42.047
> 
> 标签：php, email-validation

是否有任何规则可以在任何电子邮件 ID 中使用指定数量的 @ 符号。如果我们要检查电子邮件 ID 是否有效，我会想到是否使用 PHP。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-09-10T16:35:08.820

如果允许引用多个`@`。我不得不问你为什么需要这些信息。请不要尝试编写正则表达式/函数或任何验证电子邮件地址的方法**。**您必须担心 3 个 rfc（如果您想考虑 unicode，可能需要 4 个）。你*会*失败，它*会让*你发疯。

[如果您有旧版本的 PHP，请参阅我以前的答案以获取更多信息和可以使用的正则表达式](https://stackoverflow.com/a/12026863/508666)

附言

万一有人错过了我的观点：不要**试图**提出自己的一些验证来“永远”验证电子邮件地址。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-09-10T16:34:31.683

可以有任何数字（在电子邮件地址的大小限制内），但最后一个必须是域名和[“本地部分”](http://en.wikipedia.org/wiki/Email_address#Local_part)之间的分隔符。

如果本地部分中存在一个`@`或任何其他“不寻常”字符（由[RFC 5322定义），则它](https://www.rfc-editor.org/rfc/rfc5322)[必须](https://www.rfc-editor.org/rfc/rfc2119)出现在引号中，例如：`"user@something"@example.com`

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-09-10T16:34:39.403

字符没有具体限制`@`。

`"very.(),:;<>[]\".VERY.\"very@\\ \"very\".unusual"@strange.example.com`是一个有效的地址。

另请参阅有关该主题[的 Wikipedia 页面](http://en.wikipedia.org/wiki/Email_address)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-10T16:46:37.507

我真正的问题是在电子邮件中包含两个 @ 符号是否有意义？
它将如何运作？

我会使用`filter_var()`with `FILTER_VALIDATE_EMAIL`。下面是一个示例使用和输出，

```
function testemail($email) {
    echo "'$email' => ";
    var_dump(filter_var($email, FILTER_VALIDATE_EMAIL));    
    echo "<br />";
}

testemail('');
testemail('myemailsample.com');
testemail('myemail@sample');
testemail('myemail@sample.com');
testemail('myemail@@sample.com');
testemail('myemail@sa@mple.com'); 
```

输出，

> '' => bool(false)
> 'myemailsample.com' => bool(false)
> 'myemail@sample' => bool(false)
> 'myemail@sample.com' => string(18) "myemail@sample.com"
> 'myemail@@sample.com' => bool(false)
> 'myemail@sa@mple.com' => bool(false)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-10T16:37:20.247

addr-spec 是一个特定的 Internet 标识符，它包含一个本地解释的字符串，后跟 at-sign 字符（“@”，ASCII 值 64），后跟一个 Internet 域。本地解释的字符串是带引号的字符串或点原子。如果字符串可以表示为点原子（即，它不包含除 atext 字符或由 atext 字符包围的“.”以外的任何字符），则应使用点原子形式，不应使用带引号的字符串形式使用。addr-spec 中的“@”周围不应使用注释和折叠空格。

见：- [https://www.rfc-editor.org/rfc/rfc5322#section-3.4.1](https://www.rfc-editor.org/rfc/rfc5322#section-3.4.1)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-10T16:34:43.513

要检查有效的电子邮件地址，我应该使用 filter_var 函数。它将验证字符串并返回真或假。您不必考虑正则表达式。

# c# - 为非关键属性赋予唯一约束

> ID：12355865
> 
> 赞同：0
> 
> 时间：2012-09-10T16:33:08.273
> 
> 标签：c#, mysql

在我的 userprivilage 表中，我有 userId(auto increment)、userName、password 和 status 列。我想为 userName 列提供唯一约束。所以当我向表中插入值时，它应该避免 userName 列的重复值。我该怎么做？我正在使用 C# 2010 express windows 应用程序和 mysql 5.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T16:37:23.997

如果您只是编写简单的 SQL，您应该可以使用`UNIQUE`关键字来完成。所以，像这样：

```
ALTER TABLE userprivilage
ADD UNIQUE (userName) 
```

# php - 为什么 5.5 返回一个不同的（这两个查询的结果集）第二个查询是那个

> ID：12355870
> 
> 赞同：0
> 
> 时间：2012-09-10T16:33:35.963
> 
> 标签：php, mysql, performance, join, database-performance

编辑最终：修改后的代码适用于 5.5，但在 5.0 上，我得到的行集略有不同，任何人都有任何想法......

以下查询

```
SELECT DISTINCT
  sql_no_cache as job.id,
  job.id as job_id,
  job.job_status,
  job.servee_name,
  kase.plaintiff,
  index_number,
  lawfirm_filenumber,
  DATE_FORMAT(job.datetime_received, '%m/%d/%Y') as date_received,
  DATE_FORMAT(job.date_sent_to_court, '%m/%d/%Y') as date_sent_to_court,
  DATE_FORMAT(kase.date_kase_filed, '%m/%d/%Y') as date_kase_filed,
  TO_DAYS(NOW())-TO_DAYS(kase.date_kase_filed) as thedays,
  DATE_FORMAT(kase.court_datetime, '%m/%d/%Y %h:%i %p') as court_date,
  kase.court_room,
  CONCAT( LUcourt.court_county," - ",LUcourt.court_type) as court_name,
  DATE_FORMAT( job.datetime_served, '%m/%d/%Y') as datetime_served,
  CONCAT( server.namefirst,' ', server.namelast) as server_name

FROM      job 
LEFT JOIN kase        ON job.kase_id = kase.id
LEFT JOIN kasebilling ON kasebilling.kase_id = kase.id
LEFT JOIN server      ON job.server_id = server.id
LEFT JOIN client      ON client.id     = kase.client_id
LEFT JOIN LUcourt     ON LUcourt.id    = kase.court_id

   WHERE job.subscriber_id = 1
ORDER BY job_id + 0
   LIMIT 0,500;

</pre>
i modified the query but it wont run ...

    SELECT DISTINCT sql_no_cache  job.id, job.id as job_id, job.job_status, job.servee_name, kase.plaintiff, index_number, lawfirm_filenumber, DATE_FORMAT(job.datetime_received, '%m/%d/%Y') as date_received, DATE_FORMAT(job.date_sent_to_court, '%m/%d/%Y') as date_sent_to_court, DATE_FORMAT(kase.date_kase_filed, '%m/%d/%Y') as date_kase_filed, TO_DAYS(NOW())-TO_DAYS(kase.date_kase_filed) as thedays, DATE_FORMAT(kase.court_datetime, '%m/%d/%Y %h:%i %p') as court_date, kase.court_room, CONCAT(LUcourt.court_county," - ",LUcourt.court_type) as court_name, DATE_FORMAT(job.datetime_served, '%m/%d/%Y') as datetime_served, concat(server.namefirst,' ', server.namelast) as server_name FROM job 
    LEFT JOIN kase ON job.kase_id = kase.id
    LEFT JOIN kasebilling  ON kasebilling.kase_id = kase.id
    LEFT JOIN server ON job.server_id = server.id
    left join client on client.id=kase.client_id
    left join LUcourt on LUcourt.id=kase.court_id  WHERE job.subscriber_id = 1 and job_id in (select distinct job.id from job where job.subscriber_id = '1' order by id+0) LIMIT 0,500
</pre> 
```

我已经修改了上面的查询以删除一些表名......但是发生的情况是，如果我通过查询删除订单会非常快......我认为它的排序不仅仅是限制 500，而是所有行...我怎样才能通过 order by 更快地完成这项工作。任何帮助将不胜感激谢谢....

PS：它在 order_by 上使用文件排序...

解释：

```
+----+-------------+-------------+--------+------- -------------------------------------------------- -----------------------------------------+-------- -------------------------+---------+-------------- ---------+--------+------------------------------- ---------------+
| 编号 | 选择类型 | 表| 类型 | 可能的键 | 关键 | key_len | 参考 | 行 | 额外 |
+----+-------------+-------------+--------+------- -------------------------------------------------- -----------------------------------------+-------- -------------------------+---------+-------------- ---------+--------+------------------------------- ---------------+
| 1 | 简单 | 工作 | 参考 | 订阅者 ID，订阅者 ID-job_loc-client_loc-server_loc，sub_id_idx_servee_name_idx | subscriber_id-job_loc-client_loc-server_loc | 4 | 常量 | 362381 | 使用哪里；使用临时的；使用文件排序 |
| 1 | 简单 | 加濑 | eq_ref | 初级 | 初级 | 4 | pserve.job.kase_id | 1 | |
| 1 | 简单 | 卡西比林 | 参考 | kase_id | kase_id | 4 | pserve.kase.id | 2 | 使用索引 |
| 1 | 简单 | 服务器 | eq_ref | 初级 | 初级 | 4 | pserve.job.server_id | 1 | |
| 1 | 简单 | 客户 | eq_ref | 初级 | 初级 | 4 | pserve.kase.client_id | 1 | 使用索引 |
| 1 | 简单 | 卢考特 | eq_ref | 初级 | 初级 | 4 | pserve.kase.court_id | 1 | |
+----+-------------+-------------+--------+------- -------------------------------------------------- -----------------------------------------+-------- -------------------------+---------+-------------- ---------+--------+------------------------------- ---------------+

```

我修改了查询，但它不会运行...

```
SELECT DISTINCT sql_no_cache  job.id, job.id as job_id, job.job_status, job.servee_name, kase.plaintiff, index_number, lawfirm_filenumber, DATE_FORMAT(job.datetime_received, '%m/%d/%Y') as date_received, DATE_FORMAT(job.date_sent_to_court, '%m/%d/%Y') as date_sent_to_court, DATE_FORMAT(kase.date_kase_filed, '%m/%d/%Y') as date_kase_filed, TO_DAYS(NOW())-TO_DAYS(kase.date_kase_filed) as thedays, DATE_FORMAT(kase.court_datetime, '%m/%d/%Y %h:%i %p') as court_date, kase.court_room, CONCAT(LUcourt.court_county," - ",LUcourt.court_type) as court_name, DATE_FORMAT(job.datetime_served, '%m/%d/%Y') as datetime_served, concat(server.namefirst,' ', server.namelast) as server_name FROM job 
LEFT JOIN kase ON job.kase_id = kase.id
LEFT JOIN kasebilling  ON kasebilling.kase_id = kase.id
LEFT JOIN server ON job.server_id = server.id
left join client on client.id=kase.client_id
left join LUcourt on LUcourt.id=kase.court_id  WHERE job.subscriber_id = 1 and job_id in (select distinct job.id from job where job.subscriber_id = '1' order by id+0) LIMIT 0,500 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T19:56:59.203

第一个丑陋的尝试：添加条件`job.subscriber_id = '1'`以`LEFT JOIN job`减少要排序和限制的总行数，但也将其保留在 WHERE 部分：

```
FROM      kase
LEFT JOIN job     ON k.kase_id   = kase.id
                 AND job.subscriber_id = '1' /* condition copied here ... */
LEFT JOIN kb      ON kb.kase_id  = kase.id
LEFT JOIN server  ON job.server_id = server.id
LEFT JOIN client  ON client.id   = kase.client_id
LEFT JOIN LUcourt ON LUcourt.id  = kase.court_id
    WHERE job.subscriber_id = '1'            /* ... but also kept here */
 ORDER BY job.id
    LIMIT 0,500; 
```

第二次尝试，更丑陋：子选择前 500 `kase`*`job`组合，并针对子选择的行左连接其他表：

```
FROM
( SELECT * /* you probably have to list & alias column names if necessary */
  FROM      kase
  LEFT JOIN job   ON k.kase_id   = kase.id
      WHERE job.subscriber_id = '1'
   ORDER BY job.id
      LIMIT 0,500
) AS kase_job
/* Now we have 500 rows*/

LEFT JOIN kb      ON kb.kase_id  = kase_job.id
LEFT JOIN server  ON kase_job.server_id = server.id
LEFT JOIN client  ON client.id   = kase_job.client_id
LEFT JOIN LUcourt ON LUcourt.id  = kase_job.court_id

/* If you do `(500 rows) LEFT JOIN whatever` you can be sure you have
   at least 500 rows (never less) here, so you have to ORDER/LIMIT then again
*/

 ORDER BY kase_job.id
    LIMIT 0,500; 
```

# database - 使用 Dublin Core 标记 pdf 文件

> ID：12355871
> 
> 赞同：1
> 
> 时间：2012-09-10T16:33:36.607
> 
> 标签：database, metadata, markup, dublin-core

嘿，我是使用都柏林核心的新手，我被分配了一项任务来将一些数据映射到都柏林核心，这些数据主要是 pdf 文件（主要是讲义）。我不知道从哪里开始或如何开始。我阅读了都柏林核心文档，但它没有让我知道如何开始？我希望以前与此合作过的人请为我概述该过程，或者至少向我指出一个关于都柏林核心的描述性资源，而不是都柏林核心网站，后者不能很好地解释该过程一点也不。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T16:28:52.897

从最后开始，dc.dot 将自动将都柏林核心分配给文档。 [DC dot, ukoln](http://www.ukoln.ac.uk/metadata/dcdot/)

请记住自动元数据的常见警告——它通常不如人工生成的元数据好。

再上一层，关于手动生成，首先要确定的是您要定义的资源的哪些属性，例如。标题，以及您没有哪些属性。

再上一个层次，为什么还需要使用 DC？

# oracle11g - 如何在 oracle 中将日期数据类型转换为 mm/dd/yyyy 格式？

> ID：12355874
> 
> 赞同：-2
> 
> 时间：2012-09-10T16:34:06.667
> 
> 标签：oracle11g

我有一个将`Start_date`和`End_Date`作为输入参数的过程。这些参数是日期数据类型。我的查询如下：

`select count(1) from table_name where inspection_date between start_date and end_date;`

当我将输入参数值提供为： start_date: 1/1/1800 或 1/1/2000 时，查询将开始日期设为 1-jan-00，因此我没有得到正确的结果。

我还尝试使用`to_date(to_char(start_date,'mm/dd/yyyy),'mm/dd/yyyy')`并存储在类型变量中将其转换为 mm/dd/yyyy 格式，`timestamp(6)`但仍然没有给出正确的结果。

请让我知道如何执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T12:42:08.927

```
where inspection_date between to_date('1/1/1800','mm/dd/yyyy') and to_date('1/1/2000','mm/dd/yyyy') 
```

# javascript - IE7 中 blockUI 插件的 25kb 内存泄漏

> ID：12355877
> 
> 赞同：1
> 
> 时间：2012-09-10T16:34:13.607
> 
> 标签：javascript, internet-explorer, internet-explorer-7, blockui, jquery-blockui

我正在使用 Mike Alsup 出色的 blockUI jQuery 插件，但我似乎在 IE7 中遇到了一个问题（是的，公司选择的浏览器......）每次使用该块都会为进程增加大约 25kb 的内存，而且似乎从来没有走开。这通常不是问题，但页面每分钟至少使用一次该块，并且意味着整天都在屏幕上而不刷新。

我已经使用 sIEve 对此进行了测量，通过打开或关闭插件，我每次都能持续获得那么多。用 2.36 和最新的 2.44 都试过了。

有没有人看到过这种行为或知道有什么好的修复方法或可以看的地方？

**编辑**：按照 sergio 的建议尝试 JS Leak Detector（给了我 sIEve 没有的堆栈跟踪），我确定问题出在第 241 行：

```
$(el).data('blockUI.onUnblock', opts.onUnblock); 
```

似乎是 jQuery 如何处理额外数据的问题。这会是一个 jQuery 核心问题，还是 blockUI 是如何处理它的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T16:53:11.870

尝试使用此工具[JavaScript Memory Leak Detector (v2)](http://blogs.msdn.com/b/gpde/archive/2009/08/03/javascript-memory-leak-detector-v2.aspx)来检测站点中的任何泄漏...

# c# - 试图用 char * 数据编组结构，但数据为空

> ID：12355878
> 
> 赞同：5
> 
> 时间：2012-09-10T16:34:14.490
> 
> 标签：c#, dll, struct, pinvoke, marshalling

我的 C# 中有一个结构如下：

```
[StructLayout(LayoutKind.Sequential, CharSet=CharSet.Ansi)]
public struct UserProfileData
{
    int userProfileRevision;
    [MarshalAs(UnmanagedType.LPStr)] 
    public String firstName;
    [MarshalAs(UnmanagedType.LPStr)] 
    public String lastName;
    [MarshalAs(UnmanagedType.LPStr)] 
    public String memberids;
    [MarshalAs(UnmanagedType.LPStr)] 
    public String emailAddress;
} 
```

我传递了一个参考

```
typedef struct userProfile
{
    int profileRevision;
    char *firstName;
    char *lastName;
    char *memberids;
    char *emailAddress;
} userProfile_t; 
```

我的 C .dll 有这样的功能

```
int getUserProfileData(userProfile_t *pUserProfile); 
```

获取上述结构中字符串的值。我从 C# 代码调用此函数，并且正确填充了 int 值“profileRevision”。像 'firstname' 这样的字符串在上面的 C 函数中被正确地动态分配和填充*，*但是当代码返回到 C# 环境时，结构中的所有字符串都是空的。处理这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T16:38:03.497

按照您编写的方式，`char*`缓冲区是在托管端分配的。但那是错误的地方。分配发生在非托管端。像这样在 C# 中声明结构：

```
[StructLayout(LayoutKind.Sequential)]
public struct UserProfileData
{
    int userProfileRevision;
    public IntPtr firstName;
    public IntPtr lastName;
    public IntPtr memberids;
    public IntPtr emailAddress;
} 
```

然后调用`getUserProfileData`，将结构作为输出参数传递。或者可能是一个 ref 参数。我不能从这里判断它应该是哪个。

您`DllImport`将如下所示（指定正确的调用约定）：

```
[DllImport(@"mydll.dll", CallingConvention=CallingConvention.???)]
private static extern int getUserProfileData(out UserProfileData userProfile); 
```

然后将返回的指针转换为这样的字符串：

```
string firstName = Marshal.PtrToStringAnsi(userProfile.firstName); 
```

其他领域以此类推。

据推测，非托管代码还公开了一个释放结构中返回的内存的函数。完成结构后调用它。

# c - C中损坏的堆栈变量

> ID：12355880
> 
> 赞同：-2
> 
> 时间：2012-09-10T16:34:21.480
> 
> 标签：c, function, parameters

我将指针参数传递给函数，调用和被调用函数中的指针值不同。为了给出一个想法，我正在编写一段看起来类似于我的工作代码的代码 -

```
void free_wrapper (char* a) {
printf ("a - %p \n", a);
free (a);
}

main () {
char a [200];
char * c = malloc (sizeof (char)*100); //some 100 bytes;

memset (a, 50, 200);
a [199]  = '\0';

/* here I write some data into the alloc'ed memory */
/* instead of writing 100 bytes I go and write beyond the boundaries */;

strcpy (c, a); //explicit use of strcpy
printf ("c - %p \n", c);
free_wrapper (c);

return 0;
} 
```

当我破坏分配的内存时，我看到 free_wrapper 之前的 printf 和 free_wrapper 中的 printf 正在为指针打印不同的值。

我在这里展示的代码可能不会出现这个问题，但我经常用我的工作代码来解决这个问题。有人可以告诉我不同​​的场景，其中作为参数传递的值在堆栈上被破坏了吗？

抱歉打错了，问题已更正。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T16:46:25.187

您的代码有两个问题：

1.  你正在释放一些不需要释放的东西。您正在将数组传递`a`给您的 free_wrapper 函数。这是非法的。你只能释放你所要求`malloc`的。所以要释放的是`c`.

2.  `c`由于您将 200 字节缓冲区复制`a`到 100 字节缓冲区中，因此您正在大量覆盖缓冲区的末尾`c`。这会导致您的内存损坏。`c`至少`a`与.

`char * strcpy ( char * destination, const char * source );`你的目的地应该总是比你的源缓冲区大。也使用`strcpy_s`版本，它检查你的目标数组的大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T16:38:22.890

> 我看到 free_wrapper 之前的 printf 和 free_wrapper 中的 printf 正在为指针打印不同的值。

你传给`a`，`free_wrapper`但之前你写`c`，不行`a`！那是因为它们不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T16:47:20.997

我不确定您是否没有注意到您正在打印两个不同的值，这就是结果不同的原因：

```
printf ("c - %p \n", c); 
free_wrapper (a);    //This will call a printf of a
                     // a's memory location != c's memory location 
```

或者如果您对 strcpy 的工作方式感到困惑。[strcpy](http://linux.die.net/man/3/strcpy)只是复制字符串的内容，而不是使指针成为同一个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T16:36:51.407

当然，它们打印不同的值；他们**是**不同的价值观。`a`是分配在栈上的数组，`c`是从堆中动态分配的。（`a`是你传递给的`free_wrapper`）。

# c# - 在 TextBlock 中将文本环绕在图像周围

> ID：12355883
> 
> 赞同：4
> 
> 时间：2012-09-10T16:34:34.303
> 
> 标签：c#, .net, wpf

如何在 TextBlock 中的图像周围环绕文本？

文字总是在底部...

一般有哪些基本做法呢？

![在此处输入图像描述](../Images/6681dd52716eeda75781c4a50f3a8fed.png)

谢谢！

```
var image = new BitmapImage();
image.BeginInit();
image.CacheOption = BitmapCacheOption.OnLoad;
image.CreateOptions = BitmapCreateOptions.IgnoreImageCache;
image.UriSource = new Uri(@"http://cl.jroo.me/z3/P/0/C/d/a.aaa-bad-crazy-cat.jpg", UriKind.Absolute);
image.EndInit();

var imageInline = new InlineUIContainer { Child = new Image { Source = image  } };

textBlock1.Inlines.Add(imageInline);

textBlock1.Inlines.Add(new Run{ Text = "any text goes here..."}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T03:06:57.360

我建议将它们放入网格中的两个不同列中...

# linux - 获取远程 rsync PID？

> ID：12355884
> 
> 赞同：1
> 
> 时间：2012-09-10T16:34:36.017
> 
> 标签：linux, ssh, rsync

我正在制作一个开源`rsync`管理器，需要能够从服务器端终止客户端 rsync 进程。

现在，2 个客户`rsync`端正在将文件从服务器发送到客户端，客户端将`rsync`命令发送到服务器并通过 ssh 密钥进行身份验证。

clinet-1 和 client-2 都：

```
rsync -zav root@server:/home/aaa . 
```

服务器：

```
ps aux | grep rsync

root      6117  8.9  0.7  87524 60604 ?        Ds   00:23   0:26 rsync --server --sender -vlogDtprz . /home/aaa
root      6339  8.6  0.6  87524 58792 ?        Ds   00:23   0:25 rsync --server --sender -vlogDtprz . /home/aaa 
```

问题是我需要知道与这些单独的客户端 rsync 命令对应的 pid。为了能够杀死他们，任何人都可以指出一些方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T17:02:14.607

一种方法是在服务器中编写脚本（`/usr/bin/run_rsync`）：

```
#!/bin/bash

client_ip=$1
client_id=$2
client_path=$3
rsync_script=~/rsync_CID$client_id
echo "rsync -zav /home/aaa root@$client_ip:$client_path" > $rsync_script
sh $rsync_script
rm $rsync_script 
```

`ssh root@server run_rsync <IP> <ID> $(pwd)`然后从客户端 ( )使用此脚本。当你想杀死一个客户端时，在服务器（给定`$client_id`）：

```
pstree $(pgrep CID$client_id) -ap | sed -n 's/.*rsync,\([0-9]*\).*/\1/p' 
```

应该给你这个客户端正在使用的 rsync 的 PID。

# css - IE 7,8：使用浮动“左”和固定宽度溢出“可见”

> ID：12355889
> 
> 赞同：0
> 
> 时间：2012-09-10T16:34:44.527
> 
> 标签：css, internet-explorer-8, internet-explorer-7

任何想法如何让 IE 在 FF 或 Chrome 中呈现以下内容？？！！

Firefox 和 chrome 在彼此下方显示图像.. Internet Explorer 忽略宽度并彼此相邻显示 LI

```
 <html>
    <style>
    ul{
      position: relative;
      height: auto;
    }
    li{
      list-style-type: none;
      width: 30px !important;
      display: inline;
      float: left;
      overflow: visible
    }
    img{
      width:100px;
    }
    </style>
    <body>

    <ul>
      <li>
         <img src="http://upload.wikimedia.org/wikipedia/commons/thumb/8/82/Joker_red_02.svg/220px-Joker_red_02.svg.png" />
      </li>

      <li>
         <img src="http://upload.wikimedia.org/wikipedia/commons/thumb/8/82/Joker_red_02.svg/220px-Joker_red_02.svg.png" />
      </li>

      <li>
         <img src="http://upload.wikimedia.org/wikipedia/commons/thumb/8/82/Joker_red_02.svg/220px-Joker_red_02.svg.png" />
      </li>
    </ul>

    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T16:49:52.310

我建议做这样的事情：http: [//jsfiddle.net/nYJrd/2/](http://jsfiddle.net/nYJrd/2/)

```
ul{
    /*position: relative;
    height: auto;*/ /* These lines aren't really doing anything (with the current example). */
    margin:0;
    padding:0;
}
li{
    list-style: none;
    float: left;
    overflow: hidden;
    margin-left:-70px; /* This is what makes them overlap. */
}
li.first{ 
    margin-left:0;
}
img{
    width:100px;
}​ 
```

也就是说，如果您可以控制标记。如果你不这样做，你可以使用`li + li {}`，但这与非 CSS3 浏览器不兼容。这种方法的好处是您可以为这些元素上的边距设置动画`li`以显示卡片的某些部分。

# php - 文件下载已损坏

> ID：12355891
> 
> 赞同：3
> 
> 时间：2012-09-10T16:34:49.287
> 
> 标签：php

我是一名实验室讲师，并试图通过将文件保留在 webroot 之上并强制他们登录（通过大学的 LDAP 进行身份验证）来确保我的学生无法提前下载他们的入门文件，并验证它是否已经过发布time 然后使用 readfile 将文件发送给他们。不幸的是，我发送的任何文件最终都已损坏。

我的代码是：

```
if (file_exists($path)) {
     //header('Content-Description: File Transfer');
     header('Content-Type: application/octet-stream');
     header('Content-Disposition: attachment; filename='.basename($path));
     //header('Content-Transfer-Encoding: binary');
     header('Expires:' . date('r', 0));
     header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
     //header('Pragma: public');
     header('Content-Length: ' . filesize($path));
     //ob_clean();
     //flush();
     readfile($path);
     exit(0);
 } 
```

我什至尝试只发送也没有正确传输的纯文本，结果只是乱码。

* * *

编辑：

抱歉，我疏忽了我已经尝试过的内容。我确实尝试发送一个简单的文本文件（尝试在记事本中检查 pdf 以查找 PHP 警告有点多）。

我发送了一个仅包含内容的文件，`This is plain text`结果纯属胡言乱语。主要是不可打印的字符。 `1f 8b 08 00 00 00 00 00 00 03 0b c9 c8 2c 56 00 a2 82 9c 00`

* * *

更新：

在其中一台服务器上禁用 gzip，文件仍然损坏。删除`ob_clean(); flush()`并且文本文件开始干净地通过（无法相信您在互联网上阅读的所有内容：/）。

Zip 文件仍然损坏，但我的 PDF 现在可以阅读了。再看一些，似乎在文件的开头添加了一个额外的换行符。回顾一下文本文件，它的前面确实有一个额外的换行符，并且最后一个字符丢失了。正如预期的那样，添加`+1`到 Content-Length 标头可以让最后一个字符通过，仍然在寻找前置换行符的来源。此外，如果我注释掉`readfile`我会得到一个只有 CRLF ( `0d0a`) 的文件。

框架通常用视图和布局“包装”来自控制器的内容，但两者都设置为空白文件，并且头控制器正在检查它们是否为空白，然后跳过该行以回显生成的 HTML。即使这样，`exit(0)`也应该确保在传输后只调用析构函数。我通过在布局和视图中放置 echo 语句并相应地增加内容大小来验证这一点，并且该文本没有最终出现在下载的文件中，所以我相对确定换行符不是来自那里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T16:41:08.893

确保 PHP 脚本不包含`<?php ?>`标签中的空行。一般来说，确保没有其他内容被回显，但文件。

It would be *very* helpful if you post resulting file contents here, please. Try with a simple one-line *text* file.

# android - 使用 Intent.View 更新 Android 应用

> ID：12355900
> 
> 赞同：1
> 
> 时间：2012-09-10T16:35:20.303
> 
> 标签：android, android-intent

我需要开发一个具有自动更新过程的 android 应用程序。我阅读了一些帖子并看到 Intent.View 从代码安装/更新应用程序。

安装或更新应用程序是否需要 root 访问权限？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T17:20:39.147

您可以触发`Intent`将启动 APK 的安装过程。它将启动正常的 Android 软件安装程序，这意味着用户将有机会接受或拒绝安装。您不需要 root 设备来执行此操作，但您也不能强制用户接受安装。我认为我们可以同意这将是安全模型中的一个非常糟糕的漏洞。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T07:16:53.013

如果您**没有 root 访问权限**，则可以通过以下意图安装该应用程序：

```
Intent intent = new Intent();
intent.setAction(android.content.Intent.ACTION_VIEW);
intent.setFlags(android.content.Intent.FLAG_ACTIVITY_NEW_TASK);
intent.setDataAndType(Uri.fromFile(myFile)),"application/vnd.android.package-archive");
context.startActivity(intent); 
```

请注意，随后将提示用户替换现有应用程序，并提示他实际安装该应用程序。

如果您**确实具有 root 访问权限**，则可以执行以下命令来安装应用程序：

```
pm install -r {myFile.getAbsolutePath()} 
```

您可以使用库 RootTools ( [https://code.google.com/p/roottools/](https://code.google.com/p/roottools/) ) 通过以下方式执行该命令：

```
CommandCapture command = new CommandCapture(0, "pm install -r " + myFile.getAbsolutePath());
RootTools.getShell(true).add(command).waitForFinish(); 
```

请注意，应用程序在安装后不会自动启动。也无法捕获安装意图（正在安装的应用程序不会收到该事件）。您可以在安装后重新启动设备，然后捕获 ON-Boot-Intent。

# git - 如何将一个git分支分成两个分支？

> ID：12355904
> 
> 赞同：58
> 
> 时间：2012-09-10T16:35:40.310
> 
> 标签：git, split, branch

我正在尝试帮助一位不小心从另一个功能分支创建一个功能分支的同事，而不是从 master 创建第二个。这基本上就是我们现在所拥有的......</p>

```
Master ---A---B---C
                   \
              Foo   E---F---F---H
                                 \
                            Bar   J---K---L---M 
```

这就是我们想要的……</p>

```
Master ---A---B---C
                  |\
             Foo  | E---F---F---H
                  |
             Bar  J---K---L---M 
```

我想到的一种方法是创建 FooV2 和 BarV2 分支，然后将各个提交挑选到适当的 V2 分支中。但我很好奇，有没有更好的方法来处理这种情况？

* * *

## 回答 #1

> 赞同：126
> 
> 时间：2014-05-19T18:18:54.763

对于一个比“运行这个命令”更能帮助我们理解事物的更一般的答案，我们需要一个更大的例子。因此，让我们假设您实际上处于这种情况：

```
---A---B---C <= Master
            \
             E---F---F---H <= Foo
                          \
                           J---K---L---M <= Bar
                                        \
                                         N---O---P---Q <= Baz 
```

这就是我们想要的……</p>

```
---A---B---C <= Master
           |\
           | E---F---F---H <= Foo
           |\
           | J---K---L---M <= Bar
            \
             N---O---P---Q <= Baz 
```

值得庆幸的是，Git 在`rebase`命令选项中为我们提供了解决方案！

```
git rebase --onto [newParent] [oldParent] [branchToMove] 
```

这意味着什么可以分解为几个部分：

1.  `rebase`- 改变*某事的父母*
2.  `--onto`- 这是告诉 git 使用这种备用变基语法的标志
3.  `newParent`- 这是您正在变基的分支将作为其父级的分支
4.  `oldParent`- 这是您正在变基的分支当前作为其父级的分支
5.  `branchToMove`- 这是您要移动的分支（变基）

关于“旧父分支”的部分可能有点令人困惑，但它真正在说的是“在进行变基时忽略我的旧父分支的更改”。这`oldParent`就是您定义要移动的分支（即`branchToMove`）从哪里*开始*的方式。

那么，在我们的情况下要执行的命令是什么？

```
git rebase --onto Master Bar Baz
git rebase --onto Master Foo Bar 
```

请注意，这些命令的顺序很重要，因为我们需要从“分支链”的*末端拉出每个分支。*

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-09-10T16:38:22.160

在我看来，您可以：

```
git checkout J
git rebase master 
```

编辑：

我尝试了我的建议，但它不起作用。knittl 的建议不起作用（在我的盒子上）。这对我有用：

```
git rebase --onto master foo bar 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-10T16:37:27.457

您可以将 Bar 分支重新设置为 master：

```
git rebase --onto C H M 
```

如果某些补丁冲突，您必须手动解决它们（但在采摘樱桃时也必须这样做）。警告：当历史已经发布时不要变基。

# sql-server - 简单的 WHERE 子句会破坏我的查询性能

> ID：12355909
> 
> 赞同：3
> 
> 时间：2012-09-10T16:36:01.137
> 
> 标签：sql-server

我在查询时遇到了这个奇怪的性能问题，我试图弄清楚为什么会发生这种情况。这是查询的简化示例：

```
SELECT DISTINCT table1.status AS Status
FROM table1
INNER JOIN (
        SELECT DataID, MAX(VersionNum) as mVersion 
        FROM table1
        GROUP BY DataID 
    ) AS b 
    ON table1.DataID = b.DataID 
    AND table1.VersionNum = b.mVersion
INNER JOIN table2
    ON table1.table2ID = table2.ID
WHERE table2.field = @parameter 
```

表 1 由有时具有相同 DataID 的行组成，这些行都有一个版本号，我需要从该组行中选择最高的数字。

表 1 包含某个 ID，可用于与 table2 连接。如果我从 table2 添加约束并且参数实际存在于 table2 中，则查询需要一分钟才能完成，返回 10 行。

如果我为 table1 添加约束，则不会出现任何性能问题，只需不到一秒钟即可完成。

我希望这是足够的信息，我真的很好奇为什么会发生这种情况以及如何解决它。

编辑：我必须提到，如果我删除第一个内部连接（过滤最大版本），性能下降就消失了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T09:17:02.767

我知道探查器应该能够处理所有这些情况，但我还是要问......

您是否尝试过分析以下任何内容：

*   将内部选择转换为 CTE？

> ```
>  WITH CTE_Versions AS (
>       SELECT DataID, MAX(VersionNum) as mVersion 
>       FROM t1
>       GROUP BY DataID 
>   )
>   SELECT DISTINCT t1.status AS Status
>   FROM t1
>   JOIN CTE_Versions AS b
>       ON t1.DataID = b.DataID 
>       AND t1.VersionNum = b.mVersion
>   JOIN table2
>       ON t1.table2ID = table2.ID
>   WHERE table2.field = @parameter 
> ```

*   添加锁定提示？

> ```
>  SELECT DISTINCT t1.status AS Status
>   FROM t1 with (nolock)
>   JOIN (
>           SELECT DataID, MAX(VersionNum) as mVersion 
>           FROM t1 with (nolock)
>           GROUP BY DataID 
>   ) AS b
>       ON t1.DataID = b.DataID 
>       AND t1.VersionNum = b.mVersion
>   JOIN table2 with (nolock)
>       ON t1.table2ID = table2.ID
>   WHERE table2.field = @parameter 
> ```

*   将参数移动到连接中？（根据@X-Zero 的评论）

> ```
>  SELECT DISTINCT t1.status AS Status
>   FROM t1
>   JOIN (
>           SELECT DataID, MAX(VersionNum) as mVersion 
>           FROM t1
>           GROUP BY DataID 
>   ) AS b
>       ON  t1.DataID = b.DataID 
>       AND t1.VersionNum = b.mVersion
>   JOIN table2
>       ON  t1.table2ID = table2.ID
>       AND table2.field = @parameter 
> ```

我很想知道这三个（或它们的组合）会如何发展？

# iphone - 数据库未使用 3g 更新，但可在 Wi-Fi 下正常工作

> ID：12355911
> 
> 赞同：1
> 
> 时间：2012-09-10T16:36:13.867
> 
> 标签：iphone, database, xcode, caching

我想更新在线数据库。我意识到当我的网络连接到 Wi-Fi 时，按下刷新按钮时数据库会更新，但是当我的网络连接到 3g 时，数据库可能会或可能不会更新。如果它得到更新，即使我按下刷新按钮也需要很长时间。我认为缓存有问题，但我不确定如何将缓存放入我的代码中。这是我的代码：

```
- (void)downloadAtURLString:(NSString *)urlString
{
    NSMutableData *data = [[NSMutableData alloc] init];
    self.activeDownload = data;
    [data release];
    // encode the urlString with percent escapes
    NSString *urlStr = [urlString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
    NSURL *url = [[NSURL alloc] initWithString:urlStr];
    NSURLRequest *request = [[NSURLRequest alloc] initWithURL:url];
    NSURLConnection *conn = [[NSURLConnection alloc] initWithRequest:request delegate:self];
    self.urlConnection = conn;
    [conn release], [request release], [url release];
 } 
```

我尝试使用此代码：

```
NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:urlString] cachePolicy:NSURLRequestReturnCacheDataElseLoad timeoutInterval:30.0]; 
```

我收到警告.. cachePolicy 是否正确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T11:46:50.433

你试过这个吗？此示例忽略请求的本地缓存。

```
- (void)downloadAtURLString:(NSString *)urlString
{
    NSMutableData *data = [[NSMutableData alloc] init];
    self.activeDownload = data;
    [data release];
    // encode the urlString with percent escapes
    NSString *urlStr = [urlString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
    NSURL *url = [[NSURL alloc] initWithString:urlStr];
    NSURLRequest *request = [NSURLRequest requestWithURL:url cachePolicy:NSURLRequestReloadIgnoringLocalCacheData timeoutInterval:30.0];
    NSURLConnection *conn = [[NSURLConnection alloc] initWithRequest:request delegate:self];
    self.urlConnection = conn;
    [conn release], [request release], [url release];
 } 
```

还包括`NSURLConnectionDelegate`在你的类中并实现[委托函数](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSURLConnectionDelegate_Protocol/Reference/Reference.html)以从 NSURLConnection 获得反馈。

# ios - 重新启动 iPad 时，使用 RemoteIO AudioUnit 的 iOS 应用程序没有音频

> ID：12355920
> 
> 赞同：2
> 
> 时间：2012-09-10T16:36:46.503
> 
> 标签：ios, core-audio, audiounit, remoteio

我有一个奇怪的问题，当我从设备上的 XCode 构建和运行我开发的 iOS 应用程序时，它运行良好。但是，在重新启动设备并运行应用程序时，我根本听不到音频。如果我随后终止该应用程序并从设备重新启动它，我将再次开始获取音频。我最初认为这是一个中断处理程序问题，但现在不确定了。任何帮助，将不胜感激！

这是我的中断处理程序以防万一。

```
static void MyInterruptionListener (void *inUserData,
                                UInt32 inInterruptionState) {

printf ("Interrupted! inInterruptionState=%ld\n", inInterruptionState);
pediViewController *pediController = (__bridge pediViewController*)inUserData;
switch (inInterruptionState) {
    case kAudioSessionBeginInterruption:
        CheckError (AudioOutputUnitStop (pediController.effectState.rioUnit),
                    "Couldn't start RIO unit");
    case kAudioSessionEndInterruption:
        // TODO: doesn't work!
        CheckError(AudioSessionSetActive(true),
                   "Couldn't set audio session active");
        CheckError (AudioOutputUnitStart (pediController.effectState.rioUnit),
                    "Couldn't start RIO unit");
        break;
    default:
        break;
}; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:52:02.227

您应该使用音频路由更改回调而不是中断处理程序来处理进出后台的应用程序。

无论如何，当我遇到与您类似的问题时，这对我有用（如果我正确理解您的问题）。

这是一个例子

```
AudioSessionAddPropertyListener (
                                     kAudioSessionProperty_AudioRouteChange,
                                     audioRouteChangeListenerCallback,
                                     (__bridge void*) self
                                     );

void audioRouteChangeListenerCallback (
                                       void                      *inUserData,
                                       AudioSessionPropertyID    inPropertyID,
                                       UInt32                    inPropertyValueSize,
                                       const void                *inPropertyValue
                                       ) {

    // Ensure that this callback was invoked because of an audio route change
    if (inPropertyID != kAudioSessionProperty_AudioRouteChange) return;

    AudioEngine *audioObject = (__bridge AudioEngine *) inUserData;

    // if application sound is not playing, there's nothing to do, so return.
    if (NO == audioObject.isPlaying) {

        NSLog (@"Audio route change while application audio is stopped.");
        return;

    } else {

        CFDictionaryRef routeChangeDictionary = inPropertyValue;

        CFNumberRef routeChangeReasonRef =
        CFDictionaryGetValue (
                              routeChangeDictionary,
                              CFSTR (kAudioSession_AudioRouteChangeKey_Reason)
                              );

        SInt32 routeChangeReason;

        CFNumberGetValue (
                          routeChangeReasonRef,
                          kCFNumberSInt32Type,
                          &routeChangeReason
                          );
             if (routeChangeReason == kAudioSessionRouteChangeReason_OldDeviceUnavailable) {

            NSLog (@"Audio output device was removed; stopping audio playback.");
            NSString *MixerHostAudioObjectPlaybackStateDidChangeNotification = @"MixerHostAudioObjectPlaybackStateDidChangeNotification";
            [[NSNotificationCenter defaultCenter] postNotificationName: MixerHostAudioObjectPlaybackStateDidChangeNotification object: audioObject]; 

        } else {

            NSLog (@"A route change occurred that does not require stopping application audio.");
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T08:50:42.160

升级到 iOS 6 后问题就消失了。我通过注释掉音频回调中的每一行代码进行了一些密集的调试，并通过重新启动 iPad 并再次运行应用程序 3 次来进行测试。最后，它通过在设备上更新到 iOS 6 并在其上运行来解决。这样做我也得到了巨大的性能提升！

# vb.net - 通过 XML-RPC 为 WordPress 帖子设置特色图片

> ID：12355922
> 
> 赞同：3
> 
> 时间：2012-09-10T16:36:52.413
> 
> 标签：vb.net, wordpress, xml-rpc

大约 6 个月前，WordPress API 进行了更新，允许设置帖子的缩略图（或特色）图像。

[http://www.maxcutler.com/2012/04/04/xml-rpc-in-wordpress-3-4/](http://www.maxcutler.com/2012/04/04/xml-rpc-in-wordpress-3-4/)

我正在尝试使用它，但它对我不起作用。我想知道我可能做错了什么。我正在调用 XML-RPC newPost 方法来创建帖子并传递媒体库中现有资产的媒体 ID（称为媒体库中的附件 ID）正在创建新帖子，并且正在创建所有其他属性集，除了特色图像。

我验证了我的 wordpress api 版本，果然在 class-wp-xmlrpc-server.php 中我在新的帖子功能部分看到了评论：“* post_thumbnail - 用作帖子缩略图/特色的媒体项目的 ID图片”

所有其他属性都在工作。我可以通过 XML-RPC 将新图像添加到媒体库。我可以创建和更新帖子并设置它们的标签、标题、描述、自定义字段值和类别。当我尝试设置 post_thumbnail 值时，我没有收到任何错误。即使我传入一个不存在的媒体 ID，这似乎很奇怪。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T16:50:19.233

啊！这张 WP 3.4 版票具有误导性！ [http://core.trac.wordpress.org/ticket/20396](http://core.trac.wordpress.org/ticket/20396)

它是“wp_post_thumbnail”而不是“post_thumbnail”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-21T07:19:53.760

我试图对我的 Ruby 脚本和使用 XML RPC API 做同样的事情。

*   首先初始化并连接到您的 wordpress 站点：

    ```
    wp = Rubypress::Client.new( :host => "your host",
        :username => "test",
        :password => "test",
        :path => "yourhost/xmlrpc.php"
      ) 
    ```

*   上传您想要作为特色图片的图片。

    ```
    wp.uploadFile( :data => { :name => File.basename(FILENAME),
                  :type => "image/png",
                  :bits => XMLRPC::Base64.new(File.open(FILENAME).read)
                }
              ) 
    ```

*   `getMediaItem`使用方法获取附件ID 。

    ```
    attach = wp.getMediaItem(:blog_id => 0, :attachment_id => img_id.to_i) 
    ```

    *   `newPost`现在使用方法创建一个帖子

        ```
        wp.newPost( :blog_id => 0, # 0 unless using WP Multi-Site, then use the blog id
        :content => {
                     :post_status  => "draft",
                     :post_date    => Time.now,
                     :post_content => "This is the body",
                     :post_title   => "test title best!",
                     :post_name    => "test best",
                     :post_author  => 1,
                     :post_type=>'post',
                     :post_thumbnail => attach['attachment_id']
                     :terms_names  => {
                        :category   => ['Category One','Category'],
                        :post_tag => ['Tag One','Tag Two', 'Tag Three']
                                      },

                     }

        ) 
        ```

*   `getPost`通过将返回帖子的方法检查结果

    ```
     get_data = wp.getPost(:post_id => new_post_resp.to_i, :blog_id => 0) 
    ```

您应该参考以下链接。这些都是我遇到同样问题时的发现：

*   [参考文献-1](https://stackoverflow.com/questions/17722743/attach-image-to-post-in-wordpress-xmlrpc)
*   [参考文献2](https://stackoverflow.com/questions/13378192/wordpress-xml-rpc-and-featured-images)
*   [参考文献3](http://codex.wordpress.org/XML-RPC_WordPress_API/Posts)
*   [参考文献 4](http://codex.wordpress.org/XML-RPC_WordPress_API/Media#wp.getMediaItem)
*   [参考文献 5](http://www.hurricanesoftwares.com/wordpress-xmlrpc-posting-content-from-outside-wordpress-admin-panel/)

# c++ - 在选择时处理 FD_SETSIZE

> ID：12355927
> 
> 赞同：1
> 
> 时间：2012-09-10T16:37:18.227
> 
> 标签：c++, c, networking, network-programming

我们有一个使用 select() 设计的 web 服务器，直到上周才真正看到太多负载，并且在我们 500-1000 conn/s 的负载下总是可以正常工作。然而，我们最近开始看到更高的负载（和峰值），并且在看到套接字句柄 > FD_SETSIZE 后遇到了 select() 变得疯狂的问题。如果它的 FD_SET 中有任何 > FD_SETSIZE 的内容，这只会冻结服务器，并且在重复超时后选择进入一个牢不可破的循环。切换到 poll（或 epoll）的选项现在不存在，我们必须坚持使用 select。我现在修复它的方法是增加侦听队列并停止接受新连接，当我看到一个新连接返回 accept() 为 >= FD_SETSIZE 并返回到侦听套接字上的 select() 时。这是有效的，因为操作系统会回收文件句柄并始终尝试提供最小的可用句柄。但不利的一面是，如果套接字句柄 >= FD_SETSIZE，则在调用 accept() 时，我最终会向某些连接发送 RST。目前这仍然是可以接受的，因为它使服务器保持运行并且连接丢失约为 5%。有没有办法可以在不断开这些连接的情况下做到这一点。我不想记录所有使用过的手柄和使它变得过于复杂的东西。正在创建一个伪造的套接字，在调用 accept 之前检查它的句柄并关闭它，这将相当准确地估计操作系统接下来会给我什么句柄。目前这仍然是可以接受的，因为它使服务器保持运行并且连接丢失约为 5%。有没有办法可以在不断开这些连接的情况下做到这一点。我不想记录所有使用过的手柄和使它变得过于复杂的东西。正在创建一个伪造的套接字，在调用 accept 之前检查它的句柄并关闭它，这将相当准确地估计操作系统接下来会给我什么句柄。目前这仍然是可以接受的，因为它使服务器保持运行并且连接丢失约为 5%。有没有办法可以在不断开这些连接的情况下做到这一点。我不想记录所有使用过的手柄和使它变得过于复杂的东西。正在创建一个伪造的套接字，在调用 accept 之前检查它的句柄并关闭它，这将相当准确地估计操作系统接下来会给我什么句柄。

```
while(max_conn_to_accept--){
SOCKET a_s = accept(..);
if(a_s >= FD_SETSIZE){
    close(a_s);
    return;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T16:40:41.473

只是提高`FD_SETSIZE`。`-DFD_SETSIZE=16384`在编译器命令行上指定。

我认为您的版本足够新，没有其他问题。如果您在头文件中遇到错误，您可能需要调整一两行。

例如，如果您看到如下内容：

```
#undef __FD_SETSIZE
#define __FD_SETSIZE    1024 
```

将其更改为：

```
#undef __FD_SETSIZE
#ifndef FD_SETSIZE
#define __FD_SETSIZE    1024
#else
#define __FD_SETSIZE    FD_SETSIZE
#endif 
```

或者，如果您看到：

```
#define FD_SETSIZE      1024 
```

将其更改为：

```
#ifndef FD_SETSIZE
#define FD_SETSIZE      1024
#endif 
```

但是，我认为你不需要改变任何东西。

# php - 是否可以将 cookie 的无限时间设置为会话变量？

> ID：12355931
> 
> 赞同：3
> 
> 时间：2012-09-10T16:37:21.273
> 
> 标签：php, session, cookies, session-cookies

如何为会话设置无限时间到 cookie？我尝试了以下方法，但一天后我的会话中仍然收到未定义的索引通知：

```
setcookie('idcourse', 'CourseID', 9999999999);
setcookie('namecourse', 'CourseName', 9999999999);
setcookie('id', 'ID', 9999999999);

if (isset($_POST['idcourse'])) {

$_SESSION['idcourse'] = $_POST['idcourse'];

}

if (isset($_POST['namecourse'])) {

$_SESSION['namecourse'] = $_POST['namecourse'];

}

if (isset($_POST['id'])) {

$_SESSION['id'] = $_POST['id'];

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T16:39:59.413

您必须添加到期日期，否则 cookie 将像会话一样在您离开网站时到期，

你所做的几乎是正确的，但你需要稍微改变它；

您正在设置 expire 9999999999 （您需要在将来指定一个 UNIX TIMESTAMP），所以我使用以下内容：

```
$inTwoMonths = 60 * 60 * 24 * 60 + time();
setcookie('idcourse', 'CourseID', $inTwoMonths );
setcookie('namecourse', 'CourseName', $inTwoMonths );
setcookie('id', 'ID', $inTwoMonths ); 
```

将使 cookie 在 2 个月后过期，您可以相应地增加它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T16:41:26.567

您不应将 cookie 设置为无限时间。如果您需要更长时间地存储某些东西，请使用[localStorage](http://diveintohtml5.info/storage.html)。它们不会过期。它们不是真正的 cookie，但它也是在浏览器中设置信息的一种方式。你只需要使用 JavaScript。

至于 PHP，您可以做的是您可以依赖将永久存储您的信息的数据库。您可以在本地存储中设置可用于加载会话信息的内容。但我的建议只是使用 localStorage。

# java - 旋转android时出现NullPointerException（显示更改大小）

> ID：12355934
> 
> 赞同：2
> 
> 时间：2012-09-10T16:37:28.913
> 
> 标签：java, android, android-canvas

我正在使用 android & canvas，除了显示分辨率发生变化（即旋转设备）应用程序强制关闭和 log cat 显示时，我的代码可以完美地工作：

> 致命异常：Thread-367
> 
> java.lang.NullPointerException
> 
> 在 ...doDraw()

它将错误链接到的行包含：

```
canvas.drawARGB(255, 0, 0, 0); 
```

但我相信，只要它试图绘制一些东西并显示我试图绘制的第一件东西，这并不重要。

这是我的运行循环：

```
 @Override
    public void run() {
        while (mPlaying) {
            Canvas c = null;
            try {
                c = mSurfaceHolder.lockCanvas(null);
                synchronized (mSurfaceHolder) {
                    if (mPlaying == true) updatePosition();
                    doDraw(c);
                }
        } finally {
                if (c != null) {
                    mSurfaceHolder.unlockCanvasAndPost(c);
                }
            }
        }
    } 
```

我直接取自 LunarLander 示例。现在，并不是每次我旋转时都会发生崩溃，而是大约 75% 的时间。

有任何想法吗？谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T16:57:46.043

这可能会帮助你

```
 if your android:targetSdkVersion="12" or less
     android:configChanges="orientation|keyboardHidden">

      if your  android:targetSdkVersion="13" or more
  android:configChanges="orientation|keyboardHidden|screenSize"> 
```

# php - 如何保护我在 Wordpress 页脚中的版权链接？

> ID：12355935
> 
> 赞同：1
> 
> 时间：2012-09-10T16:37:31.937
> 
> 标签：php, wordpress, wordpress-theming, source-code-protection

我想在我的模板中保护我的页脚版权，因为有些人已经删除了它。我在一些模板中看到了一些带有版权的加密代码，当我删除它时 - 模板不起作用。我如何在我的模板中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T17:39:27.617

你真的无法阻止它们被删除。你可以做的是编码你的functions.php文件（假设你有一些你知道用户想要保留的函数，然后添加一个这样的函数：

```
 add_action('wp_footer', 'copyright');
   function copyright{

   $copyright_notice = "YOUR COPYRIGHT CODE";

   echo $copyright_notice;

   } 
```

[然后你可以使用这样](http://www.fopo.com.ar/)的在线工具对functions.php文件进行编码，用户，除非他擅长逆向工程，否则将无法删除版权声明。

# cocos2d-iphone - Cocos2d 2.0.3 使用未声明的标识符'glColor4f'

> ID：12355936
> 
> 赞同：2
> 
> 时间：2012-09-10T16:37:39.420
> 
> 标签：cocos2d-iphone, opengl-es-2.0, kobold2d

我在切换到 cocos2d 2.0.3 后尝试编译我的项目，但我不断收到此错误。（使用未声明的标识符'glColor4f'）我应该使用其他东西来代替这种方法。

```
glColor4f(1.0f,1.0f,1.0f,1.0f); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T21:58:33.313

您可以使用 ccDrawColor4F 作为替代品。

```
ccDrawColor4F(1.0f, 1.0f, 1.0f, 1.0f); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T17:20:25.713

据我所知，cocos2d 2.0 使用的是 OpenGL ES 2.0，没有这个功能。您可以改用 glColorPointer。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-19T10:25:31.690

```
DrawPrimitives::setDrawColor4F(r, g, b, a); 
```

# ios - 为 iOS 应用程序保持一致的 wifi 连接

> ID：12355937
> 
> 赞同：0
> 
> 时间：2012-09-10T16:37:41.423
> 
> 标签：ios, ios5, network-programming, wifi, core-audio

我正在开发的应用程序涉及任何 2 个 iOS 设备长时间相互通信，直到用户希望结束它（大致与 VoIP 相当）。我很难维持两台设备之间的连接，因为最终其中一台设备会间歇性地失去 wifi。该应用程序使用 UDP 套接字进行通信。

我尝试并检查但不起作用的事情清单包括：

*   应用程序使用 wifi 密钥设置为 YES
*   使用 Reachability API 检测 wifi 丢失，以便稍后在 wifi 恢复时重新启动 - 这对我不起作用，因为一旦 wifi 丢失并且不再播放音频，应用程序就会被发送到后台

我现在想知道其他此类应用程序如何设法维持连接，尤其是那些可能需要通宵运行的应用程序。

非常感谢任何帮助。我在这个问题上碰壁了。

谢谢！

以下是可能相关的控制台日志摘录：

```
Aug 28 23:12:10 unknown wifid[13] <Error>: WiFi:[367913530.830882]: Processing link event DOWN

Aug 28 23:12:11 unknown kernel[0] <Debug>: Removing any beacons matching:    @ 0xc140a400, BSSID = 90:84:0d:dc:46:53, rssi = -64, rate = 54 (100%), channel = 10, encryption = 0x8, ap = 1, failures =   0, age = 7529, ssid[12] = "Studio"

Aug 28 23:12:11 unknown kernel[0] <Debug>: Also removing matching beacon:    @ 0xc140a400, BSSID = 90:84:0d:dc:46:53, rssi = -64, rate = 54 (100%), channel = 10, encryption = 0x8, ap = 1, failures =   0, age = 7529, ssid[12] = "Studio"

Aug 28 23:12:11 unknown kernel[0] <Debug>: AppleBCMWLAN Left BSS:       @ 0xc140a400, BSSID = 90:84:0d:dc:46:53, rssi = -64, rate = 54 (100%), channel = 10, encryption = 0x8, ap = 1, failures =   0, age = 7529, ssid[12] = "Studio"

Aug 28 23:12:11 unknown kernel[0] <Debug>: AirPort: Link Down on en0\. Reason 1 (Unspecified).

Aug 28 23:12:12 unknown configd[45] <Notice>: network configuration changed.

Aug 28 23:12:12 unknown UserEventAgent[12] <Warning>: DEBUG: Changing WiFi state: 0

Aug 28 23:12:12 unknown CommCenter[57] <Notice>: Client [com.apple.persistentconnection[apsd,50]] is telling PDP context 0 to go active.

Aug 28 23:12:12 unknown CommCenter[57] <Notice>: No more assertions for PDP context 0\.  Returning it back to normal.

Aug 28 23:12:12 unknown CommCenter[57] <Notice>: Scheduling PDP tear down timer for (367913832.324872) (current time == 367913532.324882)

Aug 28 23:12:13 unknown mDNSResponder[34] <Error>: mDNS_Execute: SendResponses didn't send all its responses; will try again in one second

Aug 28 23:12:14 unknown wifid[13] <Error>: WiFi:[367913534.115957]: Processing link event UP

Aug 28 23:12:14 unknown kernel[0] <Debug>: AppleBCMWLANCore::setASSOCIATE() [wifid]:  lowerAuth = AUTHTYPE_OPEN, upperAuth = AUTHTYPE_WPA2_PSK, key = CIPHER_PMK , don't disassociate    .

Aug 28 23:12:14 unknown kernel[0] <Debug>: [31834.320185375]: AppleBCMWLANNetManager::prepareToBringUpLink(): Delaying powersave entry in order to get an IP address

Aug 28 23:12:14 unknown kernel[0] <Debug>: AppleBCMWLAN Joined BSS:     @ 0xc22d4400, BSSID = 90:84:0d:dc:46:53, rssi = -67, rate = 54 (100%), channel = 10, encryption = 0x8, ap = 1, failures =   0, age = 1, ssid[12] = "Studio"

Aug 28 23:12:14 unknown kernel[0] <Debug>: AirPort: Link Up on en0

Aug 28 23:12:14 unknown kernel[0] <Debug>: en0: BSSID changed to 90:84:0d:dc:46:53

Aug 28 23:12:14 unknown kernel[0] <Debug>: AppleBCMWLANJoinManager::handleSupplicantEvent(): status = 6, reason = 0, flags = 0x0, authtype = 0, addr = 90:84:0d:dc:46:53

Aug 28 23:12:14 unknown mDNSResponder[34] <Error>: mDNS_Execute: SendResponses didn't send all its responses; will try again in one second

Aug 28 23:12:15 unknown configd[45] <Notice>: Captive: en0: Not probing 'Studio' (protected network)

Aug 28 23:12:15 unknown kernel[0] <Debug>: [31835.475445625]: AppleBCMWLANNetManager::receivedIPv4Address(): Received address 10.0.1.3, entering powersave mode 2

Aug 28 23:12:15 unknown configd[45] <Notice>: network configuration changed.

Aug 28 23:12:15 unknown configd[45] <Notice>: network configuration changed.

Aug 28 23:12:15 unknown UserEventAgent[12] <Warning>: DEBUG: Changing WiFi state: 1

Message was edited by studiosutara on 8/31/12 at 12:21 PM 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T17:52:38.840

事实证明问题确实是操作系统会启动（更频繁地在晚上）并关闭 wifi 以节省电池。数据被强制通过 WWAN 接口（这是我能够从可达性 API 中推断出来的）。

“已连接”的 UDP 套接字就是答案。由于我使用的是 CocoaAsyncSockets，我必须在套接字上进行以下调用：

```
 [senderSocketName connectToHost:mPeerName onPort:[self getSocketPort] error:&socketError]; 
```

这似乎解决了这个问题。该应用程序现在可以始终如一地运行，而不会断开 wifi 连接。

# java - 为什么 Collection.toArray(T[]) 不采用 E[] 代替

> ID：12355941
> 
> 赞同：12
> 
> 时间：2012-09-10T16:38:02.743
> 
> 标签：java, generics, arraylist

方法（让我们在`toArray`中选择实现[`java.util.ArrayList`](http://www.docjar.com/html/api/java/util/ArrayList.java.html)）如下：

```
class ArrayList<E> ....{
    public <T> T[] toArray(T[] a){
        if(a.length < size)
            return (T[]) Arrays.copyof(elementData, size, a.getClass());
        System.arraycopy(elementData, 0, a, 0, size);
        if(a.length > size)
            a[size] = null;
        return a;
    }    
} 
```

我想知道我们可以在这种情况下使用`<E>`而不是吗？`<T>`像

```
public E[] toArray(E[] a){
      if(a.length < size)
             return (E[]) Arrays.copyof(elementData, size, a.getClass());
      System.arraycopy(elementData, 0, a, 0, size);
      if(a.length > size)
            a[size] = null;
      return a;
} 
```

由于 ArrayList 类本身已经是泛型的`<E>`，所以我们可以使用它来代替新的泛型类型`<T>`吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-11T04:59:19.837

我认为[约翰 B 的回答](https://stackoverflow.com/a/12356004/697449)很好地涵盖了这个想法 - 我只想详细说明一下。

首先，让我们看一下您在问题中提出的方法签名：

```
public E[] toArray(E[] a) 
```

正如约翰解释的那样，这个签名不太灵活。如果我想将 an 转储`ArrayList<Integer>`到 a`Number[]`中，这种方法不允许我这样做。Collections API 希望允许这种灵活性。

不幸的是，目前的方法不允许在编译时检查数组的类型，这似乎是您遇到的问题。[`toArray`](http://docs.oracle.com/javase/7/docs/api/java/util/Collection.html#toArray%28T%5B%5D%29)由 声明的的文档`Collection`解释说，`ArrayStoreException`“如果指定数组的运行时类型不是此集合中每个元素的运行时类型的超类型”，则可能会抛出 an。

根据该描述，以下签名*似乎*是理想的：

```
public <T super E> T[] toArray(T[] a) 
```

乍一看，这似乎允许传入和填充任何合法类型的数组——但会在编译时而不是运行时提供类型检查。那么为什么不声明这个签名呢？

好吧，这个语法：

```
 <T super E> 
```

语言不[支持](https://stackoverflow.com/q/2800369/697449)。但这很容易分散您的注意力，因为这种类型检查无论如何都不起作用。问题在于，与参数化类型不同，[数组是协变的](https://stackoverflow.com/q/1650931/697449)。一个`Integer[]`是一个`Number[]`是一个`Object[]`。因此，考虑到我们假设的签名`<T super E>`，如果我调用`toArray`an`ArrayList<Number>`并传入 an `Integer[]`，它仍然会编译 - 并且可能在运行时失败，具体取决于列表中的内容。

所以底线是，传入数组的组件类型的下限不会有任何好处。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-10T16:41:46.427

的要点`<T>`是，如果所需的数组是 的基类`E`。例如 if `E`is`HashMap`但所需的数组 was `Map[]`。如果`toArray`被锁定到`E`这将是不可能的。

由于类型擦除，在泛型集合/类型中不需要这种类型的东西。但是数组没有类型擦除，因此数组的类型可能非常重要。

# php - 是否需要一种方法来识别用户，如果用户就他们的帐户被黑客攻击而取得联系？

> ID：12355943
> 
> 赞同：0
> 
> 时间：2012-09-10T16:38:03.793
> 
> 标签：php, security, password-recovery, phishing

我正在开发一个具有用户帐户的 PHP 应用程序，我遵循了最佳安全实践（所以我已经尽了我的一份力量）——但这显然不会阻止帐户被黑客入侵。

这只是我的前瞻性思考，但请看以下场景：

> 假设一个用户很傻，通过写下密码（有人发现 - '*黑客*'......）来入侵帐户。
> 
> 由于黑客获得了密码，黑客登录并更改了密码并更改了电子邮件。
> 
> 现在用户发现（由于他们无法登录也无法恢复/重置他们的通行证）......
> 
> 然后，用户决定将此情况报告给员工（因为他们希望重新获得对帐户的控制权）。

我（工作人员）如何能够识别报告的人是实际用户，以便我可以帮助他/她？

任何人都可以只提供一个用户名（可能还有电子邮件 - 如果他们认识这个人）......

我对也许有一个想法；一个令人难忘的词，需要在注册时给出（并且不能更改）......以帮助识别用户。

必须有其他具有类似程序/功能的站点......

你的意见？任何示例代码都会很好！

PS：这不是一个高安全性的金融网站，更多的是游戏玩家的社交网络。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T16:43:58.803

我个人不允许更改帐户的主要电子邮件。因此，被利用的用户可以进行典型的基于电子邮件的密码重置。

如果您绝对需要允许更改电子邮件地址，请要求登录用户生成电子邮件更改密码并发送到原始地址，并且只有在单击原始地址的链接时，他们才能被采取到一个表格来更改他们的电子邮件地址，这再次需要通过向新地址发送电子邮件来验证。只有在成功单击新地址处的链接后，才会提交电子邮件更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T16:41:46.730

为什么不将用于注册的原始电子邮件地址存储为数据库中的字段。这不需要用户查看，并且可以仅用作后备。然后，您可以允许管理员向该帐户发送一封电子邮件，其中包含指向您可以提出安全问题的页面的链接。

这不是我的想法，但我认为它是可行的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T16:48:19.283

您可以使用安全问题/答案。在注册期间，向您的用户提示诸如“您最喜欢的东西是什么？”之类的问题。他们对这些问题的回答应该被用来验证他们的身份。

# modx-revolution - 当用户更换另一台电视时自动更新一组电视

> ID：12355945
> 
> 赞同：0
> 
> 时间：2012-09-10T16:38:09.567
> 
> 标签：modx-revolution

我在 MODX revo 2.2 中有以下内容：

我定义了 5 个代表定价结构的模板变量。其中一台电视代表基本价格并由用户维护（在管理器中），而其他电视应自动计算为基本价格的已知百分比。所以我想要的是，当用户更改基本价格时，其他 4 台电视会自动（重新）计算。

我尝试通过`@EVAL`为 4 台电视定义一个绑定并调用一个片段来实现这一点，但是我没有成功使用这种方法。即使只是一个简单的操作`@EVAL return 100;`也会让电视一片空白。

我还查看了解决此问题的插件，并发现在使用电视时会触发各种系统事件。这表明这将是实现这一点的一种方法。

关于如何处理这个问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T20:18:10.070

我们可以看到一些代码吗？在我看来，您的其他 4 台电视根本不需要是电视 [除非它们需要根据每个资源进行修改？] 但最好作为模板中的片段从一个基本价格运行计算电视。另外 - 小心系统事件，虽然有很多可以使用，但并非所有事件都实际实现。[我发现了困难的方式] –</p>

谢谢罗杰。我确实花了很多时间试图找到不使用电视的方法，因为它们的处理成本可能很高。如果您在任何时候看电视并认为它可以作为片段 [或块或插件] 工作，那么这可能就是要走的路。恕我直言。

很高兴你解决了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T17:57:04.577

这对我来说可以总结 MODX Evolution 1.0.3 中两个模板变量的内容：

```
@EVAL $tvs=array('Fee_year_1','Fee_year_2');$tarifs=$modx->getTemplateVarOutput($tvs,'39');return $tarifs['Fee_year_1']+$tarifs['Fee_year_2']; 
```

这被放入“数字”类型的模板变量中，在同上块中显示为占位符：[+Total_2_years+]

如果使用 TV 作为占位符，您必须明确指定文档 ID。一个缺点是我不得不手动设置文档标识符。[+id+] 和 strval($modx->documentIdentifier) 都不起作用。

我相信在这种情况下使用片段会更好。

# iphone - 使用 xib 将 tapGestureRecognizer 添加到自定义 UIView

> ID：12355948
> 
> 赞同：0
> 
> 时间：2012-09-10T16:38:16.517
> 
> 标签：iphone, objective-c, ios, uitapgesturerecognizer

背景：我有一系列问题，这些问题是设置一堆 uiview 并将它们布置在屏幕上的基础。每个 uiview 都有一个标题和一个 imageview。我想向 imageview 添加一个点击手势识别器，并让 uiview 成为手势代表。

问题：无法让uiview接收到手势。

到目前为止我所尝试的：如果我使用带有框架的 init 在代码中初始化视图，而不是通过主捆绑包以 viewcontroller 作为所有者加载 xib，则无需修改手势代码即可工作。所以我认为问题一定在于如何以及何时添加手势识别器。目前我正在使用一种设置方法，该方法加载问题名称，然后将其添加到那里。从笔尖唤醒时添加它不起作用。

这是加载每个 uiview 的循环中的代码

```
NSArray* bundle = [[NSBundle mainBundle] loadNibNamed:@"QnA" owner:self options:nil];

QuestionAnswer *qa;
for (id object in bundle) {
    if ([object isKindOfClass:[QuestionAnswer class]])
        qa = (QuestionAnswer *)object;
    }

CGRect f = qa.frame;
f.origin.x = x;
f.origin.y = y;
qa.frame = f;
[self.view addSubview: qa];
[qa setup:[questions objectAtIndex:i ]]; 
```

这是 QuestionAnswer 类中的“设置”方法

```
-(void)setup:(NSString *)label
{
    self.afl.text = label;
    UITapGestureRecognizer *tgr = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(imageTapped:)];
    tgr.delegate = self;
    [self addGestureRecognizer:tgr];

} 
```

QuestionAnswer 实现 UIGestureRecognizerDelegate。我在 imageTapped 的第一行有一个断点，但它永远不会到达那里。我还尝试将手势识别器直接应用于图像视图，但无济于事。

viewcontroller 在 splitview 控制器中，当我在代码中初始化视图时，不要认为这与识别器工作有关。：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T20:14:38.907

在 viewDidLoad 方法中添加手势识别器。

# xtext - 如何在 xtext 中使用带有 JvmModelInferrer 的声明变量的值生成代码？

> ID：12355950
> 
> 赞同：0
> 
> 时间：2012-09-10T16:38:20.143
> 
> 标签：xtext

所以我有以下 XText 语法：

```
grammar org.xtext.example.hyrule.HyRule with org.eclipse.xtext.xbase.Xbase

generate hyRule "http://www.xtext.org/example/hyrule/HyRule"

Start:
    rules+=Rule+;

Rule:
    constantDecs+= XVariableDeclaration*
    elementDecs+=elementDec+
    'PAYLOAD' payload=PAYLOAD 'CONSTRAINT' expression= XExpression
;

elementDec:
    variable=FullJvmFormalParameter '=' xpath=XPATH
;

PAYLOAD:
    "Stacons" |  "any" | "sse";

//we override the definition in Xtype.xtext, so that we can have // in Xpaths
terminal SL_COMMENT:
    '#' !('\n' | '\r')* ('\r'? '\n')?;

terminal XPATH: 
    (('//'|'/')('a'..'z'|'A'..'Z'|'_')('a'..'z'|'A'..'Z'|'_'|':'|'0'..'9')*)+

    ; 
```

我正在使用 JvmModelInferrer 来推断每个规则的方法。推断器代码的相关部分是：

```
def dispatch void infer(Start start, IJvmDeclaredTypeAcceptor acceptor, boolean isPreIndexingPhase) {

        for (rule: start.rules) {
            acceptor.accept(rule.toClass("Rule" + counter)).initializeLater[
                ...
                // method used to check the rule this class represents 
                members += rule.toMethod("checkRule",rule.newTypeRef('boolean'))[
                    for (e : rule.elementDecs) {
                        parameters += e.variable.toParameter(e.variable.name, e.variable.parameterType)
                    }
                    setStatic(true)
                    body = expression
                ] 
```

我不知道该怎么做是让常量decal中的变量声明的值对表达式可见，更具体地说，如何为包含这些值的表达式生成代码。目前，变量声明在生成代码的范围内，但它们的值被声明为它们的名称。例如输入：

```
val j = Integer::parseInt('199')
int x = //val/v
PAYLOAD Stacons CONSTRAINT x>j 
```

结果生成的方法：

```
public static boolean checkRule(final int x) {
    int _j = j;
    boolean _greaterThan = (x > _j);
    return _greaterThan;
  } 
```

而我希望它生成方法：

```
public static boolean checkRule(final int x) {
        int _j = 199;
        boolean _greaterThan = (x > _j);
        return _greaterThan;
      } 
```

我的范围提供程序如下所示：

```
@Inject
    IJvmModelAssociations associations;

    @Override
    protected IScope createLocalVarScopeForJvmOperation(JvmOperation context, IScope parentScope) {
        parentScope = super.createLocalVarScopeForJvmOperation(context, parentScope);

        // retrieve the AST element associated to the method
        // created by our model inferrer
        EObject sourceElement = associations.getPrimarySourceElement(context);
        if (sourceElement instanceof Rule) {
            Rule rule = (Rule) sourceElement;
            return Scopes.scopeFor(rule.getConstantDecs(), parentScope);
        }

        return parentScope; 
```

我曾尝试摆弄范围和推断器，但无济于事。我正在尝试做的事情可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T20:37:53.413

基本上有两种选择：

1.  您可以为模型中的每个 constantDecl 推断 JvmType 中的常量。
2.  您必须自定义范围、代码生成和验证等各种事情，以便将常量值内联到您的表达式中。

由于我觉得（2）太糟糕了，我建议去（1）。

```
acceptor.accept(rule.toClass("Rule" + counter)).initializeLater[
  ..
  for(varDecl : constantDecs) {
    switch(varDecl) {
     XVariableDeclaration: members += varDecl.toField(varDecl.name, varDecl.type) [
       initializer = varDecl.right
       setStatic(true)
       setFinal(true)
     ]
    }

  }
  // method used to check the rule this class represents 
  members += rule.toMethod("checkRule",rule.newTypeRef('boolean'))[
    for (e : rule.elementDecs) {
      parameters += e.variable.toParameter(e.variable.name, e.variable.parameterType) 
    }
    setStatic(true)
    body = expression
  ]
] 
```

# c# - 高级选项对话框

> ID：12355955
> 
> 赞同：0
> 
> 时间：2012-09-10T16:38:29.580
> 
> 标签：c#, winforms

我必须为我的应用程序制作一个高级选项对话框。我希望它看起来像下图，有一个左面板和一个右面板，用于每个类别中的特别选项： ![在此处输入图像描述](../Images/950f0492049a77eb78293ef9aa4ce604.png)

我将不胜感激有关此主题的（免费）完整资源。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T16:43:33.763

在 WinForms 中，这很容易：

*   创建一个 MainForm 类，左侧带有`TreeView`or ，右侧带有 a 。请务必相应地设置控件的属性。`ListBox``Panel``Anchor`
*   您可能希望使用该`Split`控件来允许用户水平调整树视图的大小，但在大多数情况下，这不是必需的。如果您确实使用拆分，则使用该`Dock`属性而不是`Anchor`.
*   为每个不同的右侧面板创建一个`UserControl`带有控件的子类。我建议在这方面使用 MVC 风格：您创建的每个控件都应该有两种方法：`ShowData(Data d)`而`UpdateData(Data d)`不是让控件直接与您的程序或数据状态交互。
*   当 MainForm 加载时，创建每个 UserControl 的实例并将它们添加到 中`Panel`，但在任何给定时间只使其中一个可见。
*   选择树视图节点时，您只需将该控件`.Visible = true`和其他所有内容设置为`false`.

但这很简单，我不知道你为什么需要这方面的建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T17:15:53.273

我会使用表单项目。我可以将表单项目制作成一个 dll，然后我可以在其他项目中使用

1）左侧树视图

2) MyOK、CANCEL、APPLY 是控制按钮

我将有多种形式，因此我可以将它们全部放入一个项目中。

# sitefinity - 如何将 RadEditor 控件集成到 Sitefinity 自定义设计器中？

> ID：12355960
> 
> 赞同：2
> 
> 时间：2012-09-10T16:38:38.533
> 
> 标签：sitefinity, sitefinity-4, sitefinity-5

在 Sitefinity 4.x 或 5.x CMS 上，如何将 RadEditor 添加到自定义小部件？我目前有一个常规文本字段，它工作正常，但是我想为编辑文本提供更多功能。

我有一个有效的自定义小部件，其中包括一个有效的自定义设计器。没有问题，只是想知道集成 RadEditor 的细节。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T04:49:01.330

在 Sitefinity 中，RadEditor 被包裹在一个 HtmlField 中，该 HtmlField 可以嵌入到控件设计器中以允许富文本输入。

以下是有关创建控件设计器的一些信息：[http ://www.sitefinity.com/blogs/joshmorales/posts/11-09-20/creating_advanced_sitefinity_4_widget_control_designers.aspx](http://www.sitefinity.com/blogs/joshmorales/posts/11-09-20/creating_advanced_sitefinity_4_widget_control_designers.aspx)

还有一篇博客文章演示了使用 HtmlField 的控件设计器：[http ://www.avisra.com/blog/2011/05/22/sitefinity-control-designer-fields](http://www.avisra.com/blog/2011/05/22/sitefinity-control-designer-fields)

希望这会有所帮助！

# java - 我们可以使包含主要方法的类匿名吗

> ID：12355962
> 
> 赞同：0
> 
> 时间：2012-09-10T16:38:53.923
> 
> 标签：java

下面是匿名内部类的示例，我们用 A 创建匿名类

```
class A
{
    void one()
    {
        System.out.println("hello");
    }
}

class One
{
    public static void main(String args[])
    {
        new A()
        {
            void five()
            {
                one();
            }
        }.five();
    }
} 
```

我的问题是我们可以将类`One`设为匿名（而不是其内部匿名类），即简单地包含**公共静态 void 主要**方法的类。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T16:40:58.207

`static void main(String...)`必须是`static`并且内部类（匿名或其他）不能有静态方法。

关于嵌套类与内部类[http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html](http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html)

> 嵌套类分为两类：静态和非静态。声明为静态的嵌套类简称为静态嵌套类。非静态嵌套类称为内部类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T16:56:43.200

您不能为匿名类创建静态方法。在第一种情况下，您将无法引用静态方法。唯一可能的方法是在运行时通过反射（几乎没有好的编码实践）。在第二个实例中，所有匿名类和内部类都是使用一些“父”实例创建的（在您的示例中，您的匿名 A 实例将包含对 One 实例的引用）。这意味着内部类和匿名类在设计时并未考虑到静态方法。如果它们确实需要静态方法，那么它们应该是父类的一部分。

# c++ - C++ 中的 Cplex：无法打开此源文件

> ID：12355964
> 
> 赞同：1
> 
> 时间：2012-09-10T16:39:11.577
> 
> 标签：c++, c++11, mathematical-optimization, cplex

我正在学习音乐会技术，我还处于起步阶段。我试图打开其中一个示例（Ilolpex1.ccp），但是当我运行它时，程序说：

```
#include <ilcplex/ilocplex.h> : cannot open this source file 
```

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T01:32:48.780

The message you are seeing is during compilation, not running the program. You need to add the concert *and* cplex include directories to your include path. The examples are in the directory

```
<cplex_root_dir>/cplex/examples/src/cpp/ 
```

The include files are in

```
<cplex_root_dir>/cplex/include
<cplex_root_dir>/concert/include 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T16:42:27.550

假设您的 C++11 编译器是 GCC（在 Linux 上），即`g++`命令，您可以运行它`g++ -H`以了解包含哪些标头，并且您应该添加适当`-I`的选项以提供相关的包含目录。

也许你只需要添加例如`-I /usr/local/include`

您可能需要添加库的开发人员包。（例如Debian 或 Ubuntu 上的一些`lib`*foo包）*`-dev`

在实践中，您最好在 中编辑一些变量`Makefile`，也许是一些`CXXFLAGS`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-10T10:32:15.663

**出现此问题的原因可能是您在64 位 Windows**上安装了**32 位版本**的 IBM ILOG CPLEX Optimization Studio 。所以Visual Studio 找不到像“ilcplex”这样的相关头文件。

# java - 如何在 B 类中传递在 A 类中创建的变量的值

> ID：12355966
> 
> 赞同：0
> 
> 时间：2012-09-10T16:39:14.133
> 
> 标签：java, android, android-layout, android-intent, android-widget

我需要将在 A 类中创建的变量的值传递给 B 类。我仍然是初学者，我不知道如何继续。你能帮我一把吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T16:42:33.920

请参阅以下 2 个传递字符串值的选项：通过构造函数和通过公共 setter 方法。

```
class A {
  void method() {
    String s = "test";
    B b = new B(s);
    b.setValue(s);
  }
}

class B {
  private String value;

  B(String val) {
    value = val;
  }

  public void setValue(String val) {
    value = val;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T16:51:42.163

在 B 类的构造函数中传递值。如果您的两个类都扩展了 Activity，则使用意图将数据从一个 Activity 传递到另一个 Activity，如下所示

```
 Intent mIntent = new Intent (classA.this,yourpackage_name.ClassB.class);
   mIntent.putExtra("YourData",variable_holdding_data);
   startActivity(mIntent); 
```

在activityB oncreatmethod()上，你可以得到它

```
 Intent myIntent = new Intent();
          myIntent= getIntent();
          YourData=myIntent7.getStringExtra("YourData"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T16:48:36.193

要将任何数据从一个页面传递到另一个页面，只需输入这些代码行，这会将您的数据从一个类传递到另一个类。

```
Intent itemintent = new Intent(this, ShowDescription.class);
            Bundle b = new Bundle();
            b.putString("feed_type","Your Value");
            itemintent.putExtra("android.intent.extra.INTENT", b);

            startActivity(itemintent); 
```

此代码将调用 ShowDescription 类传递“feed_type”变量中的数据。并且可以通过以下 LOC 获取 showDescription 类中的数据

```
Bundle b = startingIntent.getBundleExtra("android.intent.extra.INTENT");
b.getString("feed_type") 
```

更多可以看下面的链接。 [http://grabcodes.blogspot.in/2012/08/passing-data-between-two-activities.html](http://grabcodes.blogspot.in/2012/08/passing-data-between-two-activities.html)

# linux - 如何在 Cpanel/WHM 中配置 SVN？

> ID：12355967
> 
> 赞同：1
> 
> 时间：2012-09-10T16:39:21.087
> 
> 标签：linux, apache, svn, git-svn, cpanel

我想在运行 cpanel/WHM 的 Linax VPS 中安装 SVN 服务器。通过 WHM 和 SSH 检查 RPM 包时，我看到 SVN 已作为 RPM 包安装。我怎样才能使它工作？我对服务器管理没有那么丰富的经验。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-27T11:44:51.507

我为此苦苦挣扎了一段时间，然后最终直接联系了 CPanel。这就是我在他们的一些指导下让它工作的方法。PS。**请通过调用yum install subversion**确保已经安装了 SVN

 **1.  ）登录到WHM（我有root访问权限）
2.  ) 转到主页 -> 服务配置 -> Apache 配置
3.  ) 点击包含编辑器
4.  ) Jump To : Pre Main Include 5) 在“我希望编辑 Pre Main 配置包含文件：”下，选择**All Versions**
5.  ) 根据您服务器上的个人设置和路径，添加以下内容（我使用 CentOS gcc 版本 4.4.6 20120305 (Red Hat 4.4.6-4) (GCC)）

    *   LoadModule dav_module /usr/lib64/httpd/modules/mod_dav.so
    *   加载模块 dav_svn_module /usr/lib64/httpd/modules/mod_dav_svn.so
    *   加载模块 authz_svn_module /usr/lib64/httpd/modules/mod_authz_svn.so

    <Location /svn> DAV svn SVNPath /data/svn/repos AuthType Basic AuthName "Subversion repos" AuthUserFile /data/svn/svn-auth-conf 需要有效用户 </Location>

6.  ) 点击更新

7.  ) 重启阿帕奇

如果 Apache 重新启动，你应该没问题。然后，您应该能够（基于上述配置）通过 yourdomain.com/svn 访问您的 SVN。使用**htpasswd**命令创建**svn-auth-conf**文件

我正在努力解决的一件事是以下错误[**无法打开请求的 SVN 文件系统**]，但我强烈认为它与 /data/svn/repos 下与 apache (httpd) 相关的文件夹权限有关。我正在调查:)

这些链接也帮助了我
[http://wiki.centos.org/HowTos/Subversion](http://wiki.centos.org/HowTos/Subversion)
[http://docs.cpanel.net/twiki/bin/view/EasyApache/EasyApacheCustomDirectivesOutsideVirtualHost](http://docs.cpanel.net/twiki/bin/view/EasyApache/EasyApacheCustomDirectivesOutsideVirtualHost)**

# html - HTML 中的输入样式

> ID：12355968
> 
> 赞同：0
> 
> 时间：2012-09-10T16:39:30.320
> 
> 标签：html, css, input, label

我有这个结构：

```
<div class="right"><div class="button"><a class="go-button green" href="<?php echo $checkout; ?>"><span>SHOP</span></a></div>
            </div>
                <div class="center"><div class="button"><a class="go-button green" href="<?php echo $continue; ?>"><span>SHOP 2</span></a></div>
            </div> 
```

CSS：

```
div.button {
    display: inline-block;
  -webkit-border-radius: 4px;
  -moz-border-radius: 4px;
  border-radius: 4px;
  -webkit-transition: all 0s 0;
  -moz-transition: all 0s 0;
  -ms-transition: all 0s 0;
  -o-transition: all 0s 0;
  transition: all 0s 0;
  text-shadow: 0px -1px 0px #42af92;
  padding: 5px 15px;
  margin: 5px 0px;
  color: #fff !important;
  font-weight: 100;
  font-style: normal;
  cursor: pointer !important;

}

a.go-button {
    height: 35px;

/../ 
```

这种结构正在发挥作用。但我有这个输入：

```
<div class="input cf">
                        <input type="submit" name="reg-submit" id="reg-submit" value="Kaydı Tamamla" class="button">
                    </div> 
```

并希望这种风格像以前的 div 一样。我如何导入/嵌入这个输入`div button`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T16:42:44.180

你不需要。只需将样式应用于多个选择器，如下所示：

```
div.button, #reg-submit {
display: inline-block;
-webkit-border-radius: 4px;
-moz-border-radius: 4px;
border-radius: 4px;
-webkit-transition: all 0s 0;
-moz-transition: all 0s 0;
-ms-transition: all 0s 0;
-o-transition: all 0s 0;
transition: all 0s 0;
text-shadow: 0px -1px 0px #42af92;
padding: 5px 15px;
margin: 5px 0px;
color: #fff !important;
font-weight: 100;
font-style: normal;
cursor: pointer !important;

} 
```

# php - PHP中缺少替换图像时显示默认图像的正确方法

> ID：12355969
> 
> 赞同：1
> 
> 时间：2012-09-10T16:39:30.460
> 
> 标签：php

我有以下代码，用于在显示用户信息时从数据库加载用户图像。

我试图以一种方式编写它，它会检查用户是否已经在数据库中拥有与他们的用户 ID 相关联的图像，如果是，将保留图像，如果没有，将显示“missing.jpg” /默认用户图像。

我尝试了以下方法，但现在似乎代码正在覆盖现有图像并用 missing.jpg 图像替换它们，我不知道为什么。

我会很感激有人看一看并告诉我为什么会这样。

```
 //Images
    $thisScript = $_SERVER["SCRIPT_FILENAME"];
    $dirName = dirname($thisScript);
    $relative_path = "images/headshots/".$this->id.".jpg";
    $missing_path = "images/headshots/missing.jpg";
    $full_path = $dirName . "/" . $relative_path;

    //if(file_exists($relative_path))
    //if(file_exists($_FILES['uploadedfile']['name']))
    if(basename( $_FILES['uploadedfile']['name']) != '' /*and (file_exists($_FILES['uploadedfile']['name']))*/)
    {
            $this->process_headshot_file($relative_path, $full_path);
    }
    else
    {
        //$this->process_headshot_file($missing_path, $full_path);
        $query = "UPDATE hraps SET headshot_filename = '".$_SESSION['missing_headshot_image']."' WHERE id = ".$this->id;
        $result = mydb::cxn()->query($query);
    } 
```

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T16:44:56.777

你`if`在这里的声明：

```
 if(basename( $_FILES['uploadedfile']['name']) != '') 
```

只有在有东西的时候才会起作用`$_FILES`

由于您说要在显示他们的信息时显示图像，因此这可能不会经常触发，因此会触发`else`。

我认为您不需要做任何比这更复杂的事情：

```
$image = "images/headshots/missing.jpg";
if(file_exists($relative_path)) {
    $image = $relative_path;
}

$full_path = $dirName . "/" . $image;
$this->process_headshot_file($image, $full_path); 
```

# jquery - 如何获取子元素的数量？

> ID：12355972
> 
> 赞同：4
> 
> 时间：2012-09-10T16:39:49.483
> 
> 标签：jquery

我正在尝试计算我的 div 中有多少类 .test 元素。我有

```
<div id='testDiv'>ddd 
   <div class='test'> 111<div> another div </div></div>
   <div class='test'> 222</div>
   <div class='test'> 333</div>
   more...
</div> 
```

我的 jQuery：

```
if($('#testDiv.test').length>5){
   alert('haha');
} 
```

我似乎无法通过类名测试获得正确数量的 div。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T16:40:39.570

更改选择器，如下所示：

```
$('#testDiv .test').length 
```

放一个`space`介于`#testDiv`和之间`.test`。

`$('#testDiv .test')`会找出`#testDiv`谁有的直子`class=test`。

***完整代码：***

```
if( $('#testDiv .test').length > 5 ){
   alert('haha');
} 
```

### 笔记

`$('#testDiv.test')``id=testDiv`表示您正在选择一些同时具有和`class=test`like的元素`<div id="testDiv" class="test"></div>`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-10T16:40:45.950

尝试在`#testDiv`和之间添加一个空格`.test`

```
$('#testDiv .test').length 
```

你所拥有的如下所示，

```
$('#testDiv.test') //- element with ID testDiv and class test  
//<div id="testDiv" class="test">...</div> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-10T16:41:55.890

您正在搜索 ID 为`testDiv` **AND**类的元素`test`，例如

```
<div id="testDiv" class="test"> 
```

你需要

```
$('#testDiv .test")
           ^--- note the space 
```

反而。有了这个空间，所有具有类“test”的节点都是 id 为 testDiv 的节点的子节点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-10T16:41:15.227

尝试：

```
$('#testDiv').children('.test').length; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-10T17:02:11.343

*   `$('#testDiv .test")`这将计算所有*直接*后代 - 如果它是孩子的​​孩子，您将不计算它。
*   `$('#testDiv').find('.test')`或者干脆`$('#testDiv, .test')`找到所有后代。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-10T17:14:44.113

嗨，我正在写 3 个案例：

**方法 1：** 如果 .test 是 #testdiv 的直接子级

在这你应该使用[.children](http://api.jquery.com/children/)

例如：

```
$("#testdiv").children(".test") 
```

这将为您提供具有“test”类的元素数组。在 javascript 中，我们使用 length 属性来查找数组的大小。所以 $("#testdiv").children(".test").length 会做你的工作。

**方法 2：** 类似地，要在您的 #testdiv 中查找所有具有“测试”类的元素，您可以使用[.find](http://api.jquery.com/find/)回调。当您不知道“.test”元素的嵌套级别时，应该使用这种方法，因为它不是优化的方式。例如： $("#testdiv").find(".test") 这将为您提供元素数组。使用相同的 .length 来查找数组的大小。

**方法3：** 您也可以尝试使用：

```
$("#testdiv .test") 
```

这将与方法：2 相同，但优化程度较低。

**您的错误：** 您尝试使用以下语法

```
$("#testdiv.test") 
```

此选择器为您提供类为“test”和 id 为“testdiv”的元素。

谢谢

# java - 如何将 WAR 文件添加到现有的 EAR 文件中？

> ID：12355974
> 
> 赞同：1
> 
> 时间：2012-09-10T16:40:10.847
> 
> 标签：java, jakarta-ee, deployment, war, ear

有人可以向我解释如何将 WAR 文件添加到 EAR 中吗？我有一个已经包含一个 WAR 文件的 EAR 文件，我有另一个 WAR 文件，我想将它添加到这个 EAR 中，以便它可以包含两个 WAR 并正常工作。

我不知道该怎么做，但我认为可以手动更改包含在 EAR 中的 application.xml 文件。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T17:16:59.273

假设 EAR 文件尚未包含 WAR 文件，您可以使用常用的 zip 实用程序将 WAR 文件添加到 EAR 文件中。

请注意，这不会更新任何 EAR 文件描述符。要更新描述符，您需要添加一个新的 Web 模块指令。

# javascript - 如何解决 标签？

> ID：12355979
> 
> 赞同：-1
> 
> 时间：2012-09-10T16:40:39.847
> 
> 标签：javascript, html, variables, tags, base

> **可能重复：**
> [如何在 HTML 链接中使用 JavaScript 变量](https://stackoverflow.com/questions/12314799/how-to-use-javascript-variable-in-an-html-link)

我正在处理的网站有一个`<base>`指向预先建立的 URL 的标记。我想做的是`<base>`通过使用下面的 trueURL 来查找网页的 url 来绕过标签。

我需要这个变量，因为我想构建一些指向网页不同部分的内部锚点。

我遇到的问题是我不知道应该如何使用我存储在我的 trueURL 变量中的 url。是否可以使用它，然后向 url 添加额外的扩展名以使其指向我的锚点？

```
var trueURL = window.location.href; 
```

以下是我想要获得的：

```
 <html>

    <ol>
        <li>
            <a href= [trueURL] + "#link1">Link1</a>
        </li>

        <li>
            <a href= [trueURL] + "#link2">Link2</a>
        </li>

        <li>
            <a href= [trueURL] + "#link3">Link2</a>
        </li>
    </ol>

    </html> 
```

因此，最后我希望有link1，例如，看起来像trueURL#link1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T17:03:27.130

我认为这会产生您正在寻找的效果：

```
<html>
<base href="http://www.example.com" target="_blank" />
<script type="text/javascript">
var trueUrl = document.location.href;
</script>
<ol>
    <li>
        <a href="#" onclick="window.location = trueUrl + '#link1'; return false">Link1</a>
    </li>
    <li>
        <a href="#" onclick="window.location = trueUrl + '#link2'; return false">Link2</a>
    </li>
    <li>
        <a href="#" onclick="window.location = trueUrl + '#link3'; return false">Link3</a>
    </li>
</ol>
</html> 
```

但是，通过 javascript 执行此操作的一个问题是爬虫将无法跟踪这些链接，因此您可能会受到 SEO 的影响。

理想的解决方案可能是提供绝对路径服务器端，而不是使用 javascript。

# c# - 自动刷新 IIS 服务器上的缓存

> ID：12355983
> 
> 赞同：1
> 
> 时间：2012-09-10T16:40:50.670
> 
> 标签：c#, asp.net, windows-server

抱歉，我工作的代理机构的人在这里缺乏知识，他们继承了一个使用 ASP.net 在 Windows 服务器上构建的站点。

我们遇到了用户登录系统的问题。基本情况是当用户请求一个帐户时，管理员必须批准它。如果管理员拒绝用户应用程序，则用户仍然可以使用忘记密码选项登录。

我最初的反应是代码中的逻辑错误，但我们已经让一些 ASP 人员快速查看并无法重现该问题。因此，他们建议这可能是某种缓存问题。如果是这样，无论如何设置服务器以每小时左右重置它的缓存？或对此的任何其他建议也受到欢迎。抱歉完全没有代码示例，但我现在只能提供一个场景。

干杯。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T16:47:28.630

如果你不能重现它，那么没有问题；尽管我承认可能存在缓存问题。但是在不了解您的应用程序的更多信息的情况下，我只能建议使用 grep 您的源代码来获取对`System.Web.Caching.Cache`类的引用（如果不是通过 ，通常通过`Page`类直接访问`HttpContext.Current`）。

删除负责缓存的想法，我认为这只是忘记密码功能编码错误的情况。我猜是忘记密码功能会重置某种“帐户禁用”标志，这就是允许用户进入的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T16:50:28.473

[ASP.Net 缓存类](http://msdn.microsoft.com/en-us/library/system.web.caching.cache.aspx)有一个用于缓存项的迭代器和一个删除项的方法。在 IIS 中托管长时间运行的进程很困难——因为“空闲”工作进程会被杀死——所以你不能只运行一个计时器。但是您可以使用[IIS 自动启动](http://msdn.microsoft.com/en-us/library/ee677285%28v=azure.10%29.aspx)功能，结合持久存储，每小时运行一次“核对缓存”方法。

话虽如此，我看不出这是解决问题的明智方法——我希望这里的计划只是为了帮助隔离真正的问题。

# spring-mvc - 我的角色之一不在 Spring Security 3.1 中工作

> ID：12355992
> 
> 赞同：0
> 
> 时间：2012-09-10T16:41:13.243
> 
> 标签：spring-mvc, spring-security, roles

我有一个使用 Spring Security (3.1) 的 webapp，并且我有 3 个不同的角色（ROLE_ADMIN、ROLE_CONS、ROLE_S_CEN）

当我使用具有 ROLE_ADMIN 角色的用户登录时，一切都按预期工作，但是当我使用具有 ROLE_CONS 角色的另一个用户登录时，它就不起作用了......

这是我的 security-context.xml

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:security="http://www.springframework.org/schema/security"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
       http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.1.xsd">

    <!-- preauthentication -->    
    <security:global-method-security pre-post-annotations="enabled">
    </security:global-method-security>

   <security:http auto-config="false" use-expressions="true" entry-point-ref="http403EntryPoint" access-denied-page="/autenticacion/accesodenegado">
        <security:intercept-url pattern="/" access="permitAll"/>
        <security:intercept-url pattern="/403.jsp" access="permitAll"/>
        <!-- Allow non-secure access to static resources  -->
        <security:intercept-url pattern="/resources/**" access="permitAll"/>
        <security:intercept-url pattern="/autenticacion/**" access="permitAll"/>
        <!-- URLs que dependen de perfiles -->
        <security:intercept-url pattern="/gestion/facturas/**" access="hasAnyRole('ROLE_ADMIN','ROLE_S_CEN','ROLE_CONS')"/>
        <security:intercept-url pattern="/gestion/tarifas/**" access="hasAnyRole('ROLE_ADMIN','ROLE_S_CEN','ROLE_CONS')"/>
        <security:intercept-url pattern="/gestion/envios/**" access="hasAnyRole('ROLE_ADMIN','ROLE_S_CEN')"/>
        <security:intercept-url pattern="/gestion/perfiles/**" access="hasRole('ROLE_ADMIN')"/>
        <security:intercept-url pattern="/gestion/usuarios/**" access="hasRole('ROLE_ADMIN')"/>
        <security:intercept-url pattern="/consulta/**" access="hasAnyRole('ROLE_CONS','ROLE_ADMIN','ROLE_S_CEN')"/>
        <security:intercept-url pattern="/importacion/**" access="hasAnyRole('ROLE_ADMIN','ROLE_S_CEN')"/>
        <!-- Pantalla a la que redirige el logout -->           
        <security:logout logout-success-url="/"/>
    </security:http>

    <bean id="http403EntryPoint" class="org.springframework.security.web.authentication.Http403ForbiddenEntryPoint">
    </bean>

    <bean id="filterChainProxy" class="org.springframework.security.web.FilterChainProxy">
        <security:filter-chain-map path-type="ant">
            <security:filter-chain pattern="/**" filters="j2eePreAuthFilter"/>
        </security:filter-chain-map>
    </bean>

    <security:authentication-manager alias="authenticationManager">
        <security:authentication-provider ref='preAuthenticatedAuthenticationProvider'/>
    </security:authentication-manager>

    <bean id="preAuthenticatedAuthenticationProvider" class="org.springframework.security.web.authentication.preauth.PreAuthenticatedAuthenticationProvider">
        <property name="preAuthenticatedUserDetailsService" ref="preAuthenticatedUserDetailsService"/>
    </bean>

    <bean id="preAuthenticatedUserDetailsService"
            class="org.springframework.security.web.authentication.preauth.PreAuthenticatedGrantedAuthoritiesUserDetailsService"/>

    <bean id="j2eePreAuthFilter" class="es.myapp.security.MyAppUserJ2eePreAuthenticatedProcessingFilter">
        <property name="authenticationManager" ref="authenticationManager"/>
        <property name="authenticationDetailsSource" ref="authenticationDetailsSource"/>
        <property name="continueFilterChainOnUnsuccessfulAuthentication" value="false"/>
    </bean>

  <bean id="authenticationDetailsSource" class="org.springframework.security.web.authentication.preauth.j2ee.J2eeBasedPreAuthenticatedWebAuthenticationDetailsSource">
    <property name="mappableRolesRetriever" ref="j2eeMappableRolesRetriever"/>
    <property name="userRoles2GrantedAuthoritiesMapper" ref="j2eeUserRoles2GrantedAuthoritiesMapper"/>
  </bean>

  <bean id="j2eeMappableRolesRetriever" class="org.springframework.security.web.authentication.preauth.j2ee.WebXmlMappableAttributesRetriever">
  </bean>

   <bean id="j2eeUserRoles2GrantedAuthoritiesMapper" class="org.springframework.security.core.authority.mapping.SimpleAttributes2GrantedAuthoritiesMapper">
    <property name="attributePrefix" value="test"/>
  </bean>

</beans> 
```

还有我的 menu.jsp

```
<%@ taglib uri="http://www.springframework.org/tags" prefix="s"%>
<%@ taglib uri="/WEB-INF/security.tld"  prefix="sec"%>
<div class="inner"> 
    <sec:authorize access="isAuthenticated()">
        <ul id="menu">
            <li>
                <a href="#"><span id="padre" class="abierto"><s:message code="menu.conexion.capri"/></span></a>
                <div class="sub_menu">
                    <ul>
                        <sec:authorize access="hasAnyRole('ROLE_ADMIN','ROLE_S_CEN')">
                            <li>
                                <a href="<s:url value="/importacion/datos"/>"><span><s:message code="menu.importacion.importarDatos"/></span></a>
                            </li>
                        </sec:authorize>
                        <sec:authorize access="hasAnyRole('ROLE_ADMIN','ROLE_S_CEN')">
                            <li>
                                <a href="<s:url value="/gestion/envios"/>"><span><s:message code="menu.gestion.envios"/></span></a>
                            </li>
                        </sec:authorize>
                        <sec:authorize access="hasAnyRole('ROLE_ADMIN','ROLE_S_CEN','ROLE_CONS')">
                            <li>
                                <a href="<s:url value="/consulta/envios"/>"><span><s:message code="menu.consulta.envios"/></span></a>
                            </li>
                        </sec:authorize>
                        <sec:authorize access="hasAnyRole('ROLE_ADMIN','ROLE_S_CEN')">                  
                            <li>
                                    <a href="<s:url value="/gestion/facturas"/>"><span><s:message code="menu.gestion.facturas"/></span></a>
                            </li>
                        </sec:authorize>
                        <sec:authorize access="hasAnyRole('ROLE_ADMIN','ROLE_S_CEN','ROLE_CONS')">                  
                            <li>
                                <a href="<s:url value="/gestion/tarifas"/>"><span><s:message code="menu.gestion.tarifas"/></span></a>
                            </li>
                        </sec:authorize>

                            <li>
                                <a href="<s:url value="/gestion/envios/verpaginarecibir"/>"><span><s:message code="menu.recibir.envios"/></span></a>
                            </li>

                    </ul>
                </div>
            </li>
            <sec:authorize access="hasRole('ROLE_ADMIN')">
                <li>
                    <a href="#"><span id="padre" class="abierto"><s:message code="menu.usuarios"/></span></a>
                    <div class="sub_menu">
                        <ul>            
                            <sec:authorize access="hasRole('ROLE_ADMIN')">                  
                                <li>
                                    <a href="<s:url value="/gestion/usuarios"/>"><span><s:message code="menu.gestion.usuarios"/></span></a>
                                </li>
                            </sec:authorize>
                            <sec:authorize access="hasRole('ROLE_ADMIN')">                      
                                <li>
                                    <a href="<s:url value="/gestion/perfiles"/>"><span><s:message code="menu.gestion.perfiles"/></span></a>
                                </li>                   
                            </sec:authorize>    
                        </ul>
                    </div>                          
                </li>       
            </sec:authorize>
        </ul>   
    </sec:authorize>
</div> 
```

当我使用具有 ROLE_CONS 角色的用户登录时，我只被允许查看没有安全性的页面和 url，但不允许 ROLE_CONS 看到那些 ROLE_CONS ......

我已经检查过用户是否经过了正确的身份验证，并且它具有 ROLE_CONS 作为权限...

有任何想法吗？

编辑添加了当我使用 ROLE_CONS 登录时由 menu.jsp 生成的 HTML：

```
<ul id="menu">
  <li>
    <a href="#"><span id="padre" class="abierto">Conexión CAPRI</span></a>
    <div class="sub_menu">
      <ul>
    <li>
      <a href="/myApp/gestion/envios/verpaginarecibir"><span>Recibir envíos</span></a>
    </li>
      </ul>
    </div>
  </li>
</ul> 
```

这是我登录时的调试输出：

```
INFO : Spring Security Debugger - 

************************************************************

Request received for '/autenticacion/inicio?lang=es':

org.apache.catalina.connector.RequestFacade@5b34329b

servletPath:/autenticacion/inicio
pathInfo:null

Security filter chain: [
  SecurityContextPersistenceFilter
  LogoutFilter
  RequestCacheAwareFilter
  SecurityContextHolderAwareRequestFilter
  AnonymousAuthenticationFilter
  SessionManagementFilter
  ExceptionTranslationFilter
  FilterSecurityInterceptor
]

************************************************************

DEBUG: es.myApp.security.MyAppUserJ2eePreAuthenticatedProcessingFilter - Checking secure context token: org.springframework.security.authentication.UsernamePasswordAuthenticationToken@bf1d7451: Principal: org.springframework.security.core.userdetails.User@27a6eeec: Username: centro1; Password: [PROTECTED]; Enabled: true; AccountNonExpired: true; credentialsNonExpired: true; AccountNonLocked: true; Granted Authorities: ROLE_CONS ; Credentials: [PROTECTED]; Authenticated: true; Details: null; Granted Authorities: ROLE_CONS 
DEBUG: es.myApp.controller.MyAppDispatcherServlet - DispatcherServlet with name 'Spring MVC Dispatcher Servlet' processing GET request for [/myApp/autenticacion/inicio]
DEBUG: es.myApp.controller.MyAppDispatcherServlet - Last-Modified value for [/myApp/autenticacion/inicio] is: -1
DEBUG: es.myApp.controller.MyAppDispatcherServlet - Rendering view [org.springframework.web.servlet.view.JstlView: name 'inicio'; URL [/WEB-INF/jsp/inicio.jsp]] in DispatcherServlet with name 'Spring MVC Dispatcher Servlet'
DEBUG: es.myApp.controller.MyAppDispatcherServlet - Successfully completed request 
```

这是 MyAppUserJ2eePreAuthenticatedProcessingFilter

```
package es.myApp.security;

import java.util.ArrayList;
import java.util.Collection;
import javax.servlet.http.HttpServletRequest;
import org.springframework.security.core.GrantedAuthority;
import org.springframework.security.web.authentication.preauth.AbstractPreAuthenticatedProcessingFilter;
import es.myApp.Constantes;
import es.myApp.modelo.datos.dominio.usuario.Perfil;
import es.myApp.security.impl.MyAppGrantedAuthorityImpl;

public class MyAppUserJ2eePreAuthenticatedProcessingFilter extends AbstractPreAuthenticatedProcessingFilter {

    @Override
    protected Object getPreAuthenticatedCredentials(HttpServletRequest request) {   
        MyAppUser usuario = (MyAppUser)request.getSession().getAttribute(Constantes.USUARIO_SESION);
        return usuario.getCredentials();
    }

    @Override
    protected Object getPreAuthenticatedPrincipal(HttpServletRequest request) {
        MyAppUser user = (MyAppUser)request.getSession().getAttribute(Constantes.USUARIO_SESION);
        if (user.getLogin() != null) {
            Collection<GrantedAuthority> authorities = new ArrayList<GrantedAuthority>();
            for (Perfil p: user.getPerfiles()) {
                authorities.add(new MyAppGrantedAuthorityImpl(p.getCodPerfil()));
            }
        }
        return user;
    }

} 
```

这是 MyAppGrantedAuthorityImpl

```
package es.myappsecurity.impl;

import es.myappsecurity.MyAppGrantedAuthority;

@SuppressWarnings("serial")
public class MyAppGrantedAuthorityImpl implements MyAppGrantedAuthority {

    private String autority;

    public MyAppGrantedAuthorityImpl(String autority) {
        super();
        this.autority = autority;
    }

    public void setAutority(String autority) {
        this.autority = autority;
    }

    @Override
    public String getAuthority() {
        return this.autority;
    }

    @Override
    public String toString() {
        return this.autority;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T10:28:22.853

这应该可行，因此我将尝试找到这种情况的潜在问题根源：

1.  您为 sec taglib 使用自定义 URI：`<%@ taglib uri="/WEB-INF/security.tld" prefix="sec"%>`- 为什么不使用标准 URI？你使用 Maven 吗？

2.  你能显示`MyAppUserJ2eePreAuthenticatedProcessingFilter`代码吗？

3.  您同时使用`<security:http>`namespace config**和** `<bean id="filterChainProxy" class="org.springframework.security.web.FilterChainProxy">`，这可能是潜在的问题。尝试在里面添加这个`<http>`：

    ```
    <sec:custom-filter ref="j2eePreAuthFilter" position="PRE_AUTH_FILTER" /> 
    ```

    顺便说一句，在 Spring Security 3.1 中[，您可以创建多个`<http>`元素](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#filter-chains-with-ns)。

编辑：

我*想*我知道问题出在哪里......是否`es.myApp.modelo.datos.dominio.security.impl.MyAppGrantedAuthorityImpl`正确实施了equals和hashCode？你能显示源代码吗？

您可以执行`extend SimpleGrantedAuthority implements MyAppGrantedAuthority`或尝试此实现：

```
public class MyAppGrantedAuthorityImpl implements MyAppGrantedAuthority {

    private String autority;

    public MyAppGrantedAuthorityImpl(String autority) {
        super();
        if (autority == null || autority.isEmpty()) {
            throw new IllegalArgumentException("Authority cannot be empty");
        }
        this.autority = autority;
    }

    public void setAutority(String autority) {
        this.autority = autority;
    }

    @Override
    public String getAuthority() {
        return this.autority;
    }

    @Override
    public String toString() {
        return this.autority;
    }

    public boolean equals(Object obj) {
        if (obj instanceof String) {
            return obj.equals(this.autority);
        }

        if (obj instanceof GrantedAuthority) {
            GrantedAuthority attr = (GrantedAuthority) obj;

            return this.autority.equals(attr.getAuthority());
        }

        return false;
    }

    public int hashCode() {
        return this.autority.hashCode();
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T11:37:50.513

好吧，这真的很奇怪...如果我将角色名称从 ROLE_CONS 更改为 ROLE_CONSL 它可以工作...我认为这是因为数据库中的字段长度为 10 个字符...我没有找到其他解释... O_o

所有工作的角色都是 10 个字符长（ROLE_ADMIN 和 ROLE_S_CEN）.. 失败的角色是 9 个字符......

无论如何，这很奇怪，因为当我在 jsp 中打印角色名称时，它是 9 个字符而不是 'ROLE_CONS' 或任何东西......

# java - 带有前后（。*）的java正则表达式慢

> ID：12355995
> 
> 赞同：1
> 
> 时间：2012-09-10T16:41:17.977
> 
> 标签：java, regex, perl

我注意到，当我在文本上匹配如下正则表达式时，它比没有前后 ( `.*`) 部分的正则表达式要慢得多。我在 perl 上做了同样的事情，发现对于 perl 它几乎没有什么区别。有没有办法优化`"(.*)someRegex(.*)"`java的原始正则表达式？

```
Pattern p = Pattern.compile("(.*)someRegex(.*)");
Matcher m = p.matcher("some text");
m.matches();

Pattern p = Pattern.compile("someRegex");
Matcher m = p.matcher("some text");
m.matches(); 
```

编辑：这是一个具体的例子：

```
(.*?)<b>\s*([^<]*)\s*<\/b>(.*) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T17:08:40.953

最好的办法是完全跳过匹配字符串的开头和结尾的尝试。如果您使用该方法，则必须这样做，`matches()`但如果您使用该方法，则不必这样做`find()`。这可能就是你想要的。

```
Pattern p = Pattern.compile("<b>\\s*([^<]*)\\s*<\\/b>");
Matcher m = p.matcher("some <b>text</b>");
m.find(); 
```

您可以使用`start()`and`end()`来查找包含匹配项的源字符串中的索引。您可以使用在匹配项内`group()`查找`()`捕获的内容（即粗体标记内的文本。

以我的经验，使用正则表达式来处理 HTML 是非常脆弱的，并且只在最微不足道的情况下工作得很好。改用成熟的 XML 解析器可能会更好，但如果这是其中一种微不足道的情况，那就试试吧。

**原始答案：**这是我的原始答案，分享为什么 a`.*`在比赛开始时表现如此糟糕。

在前面使用的问题`.*`是它会在你的比赛中导致很多回溯。例如，考虑以下情况：

```
Pattern p = Pattern.compile("(.*)ab(.*)");
Matcher m = p.matcher("aaabaaa");
m.matches(); 
```

比赛将这样进行：

1.  匹配器将尝试将整个字符串“aaabaaa”吸进第一个`.*`，但随后尝试匹配`a`并失败。
2.  匹配器将备份并匹配“aaabaa”，然后尝试匹配`a`并成功，但尝试匹配`b`并失败。
3.  匹配器将备份并匹配“aaaba”，然后尝试匹配`a`并成功，但尝试匹配`b`并失败。
4.  匹配器将备份并匹配“aaab”，然后尝试匹配`a`并成功，但尝试匹配`b`并失败。
5.  匹配器将备份并匹配“aaa”，然后尝试匹配`a`并失败。
6.  匹配器将备份并匹配“aa”，然后尝试匹配`a`并成功，尝试`b`并成功，然后将“aaa”匹配到 final `.*`。成功。

您希望尽可能避免在模式匹配开始时进行非常广泛的匹配。在不了解您的实际问题的情况下，很难提出更好的建议。

**更新：** Anirudha 建议使用`(.*?)ab(.*)`作为一种可能的解决方法来避免回溯。这会在一定程度上缩短回溯，但代价是每次尝试都尝试应用下一个匹配。所以现在，考虑以下几点：

```
Pattern p = Pattern.compile("(.*?)ab(.*)");
Matcher m = p.matcher("aaabaaa");
m.matches(); 
```

它将像这样进行：

1.  匹配器将尝试不匹配任何内容，“”，进入第一个`.*?`，尝试匹配`a`并成功，但未能匹配`b`。
2.  匹配器将尝试将第一个字母“a”匹配到第一个`.*?`，尝试匹配`a`并成功，但匹配失败`b`。
3.  匹配器将尝试将前两个字母 "aa" 匹配到第一个`.*?`，尝试匹配`a`并成功，尝试匹配`b`并成功，然后将其余字母吞入`.*`"aaa"。成功。

这次没有任何回溯，但对于 内的每一次前进，我们仍然有一个更复杂的匹配过程`.*?`。这可能是特定匹配的性能提升，或者如果向前迭代匹配的速度较慢，则可能会造成损失。

这也改变了比赛的进行方式。匹配是贪婪的，并试图在更保守`.*`的地方尽可能多地匹配。`.*?`

例如，字符串“aaabaaabaaa”。

第一个模式`(.*)ab(.*)`将匹配“aaabaa”到第一个捕获和“aaa”到第二个。

第二个模式`(.*?)ab(.*)`将匹配“aa”到第一个捕获和“aaabaaa”到第二个。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-10T17:12:35.500

而不是这样做`"(.*)someRegex(.*)"`，为什么不只是在“someRegex”上拆分字符串并从结果数组中获取部分？这将为您提供相同的结果，但更快更简单。如果需要，Java 支持通过正则表达式拆分 - [http://www.regular-expressions.info/java.html](http://www.regular-expressions.info/java.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T16:47:58.677

`.`匹配每个字符

而不是尝试通过使用类似or`.`的类来限制您的搜索。`\w``\s`

但我不保证它会运行得很快。

这完全取决于您匹配的文本数量！

# javascript - 求教：用Javascript替换flash元素-美国地图

> ID：12355999
> 
> 赞同：0
> 
> 时间：2012-09-10T16:41:39.397
> 
> 标签：javascript, html, flash, actionscript

这是我要替换的虚构示例

[http://ryanhollingsworth.com/test/map.html](http://ryanhollingsworth.com/test/map.html)

目标：输入一系列状态缩写和十六进制值，并拥有一个动态地图，我可以快速更新或使用 php 即时更新。

几周以来，我一直在通过谷歌寻找解决方案，我想我会谦虚地问。如果我不需要的话，我不想重新发明轮子并开发已经完成的东西:) 谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T16:47:37.550

[https://developers.google.com/chart/image/docs/gallery/new_map_charts](https://developers.google.com/chart/image/docs/gallery/new_map_charts)应该提供一个快速简便的解决方案，尽管它有些有限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T16:54:02.403

我使用了谷歌的 Geochart API，并且能够创建与您的模型图像非常相似的东西：http: [//cmoreira.net/interactive-world-maps-demo/usa-custom-election-map/](http://cmoreira.net/interactive-world-maps-demo/usa-custom-election-map/)

API 使用起来非常简单。