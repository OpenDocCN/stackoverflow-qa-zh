# StackOverflow 问答 11599000-11599999

# ms-access - 当没有为 requested.form 值找到数据并在最后一行加粗时 asp 不做

> ID：11599000
> 
> 赞同：0
> 
> 时间：2012-07-22T09:10:30.740
> 
> 标签：ms-access, asp-classic

我有如下访问查询：

```
select column_date, sum(qty1), sum(qty2), sum(qty3) from table1
where column_date = [enter date]
group by column_date
union all
select 'Total' as column_date, sum(qty1), sum(qty2), sum(qty3) from table1
where column_date = [enter date] 
```

现在我有如下的asp代码：

```
<%
Dim enterdate = Request.Form("enterdate")
set conn=Server.CreateObject("ADODB.Connection")
conn.open "odbcdatasourcename"
set rs = Server.CreateObject("ADODB.recordset")
sql="abovequery '" & enterdate & "' "
rs.Open sql, conn
%>
<table border="1" width="100%">
<%If rs.EOF then
Response.write ("<center>" & "<b>" & "There is no records for 
the selected dates" & "</b>" & "</center>")%>
<%Else%>
<tr>
<%for each x in rs.Fields
response.write("<th>" & x.name & "</th>")
next%>
</tr>
<%do while not rs.EOF%>
<tr>
<%for each x in rs.Fields%>
<td><%Response.Write(x.value)%></td>
<%next
 rs.MoveNext%>
</tr>
<%loop%>
<%End if%>
<%rs.close
conn.close%> 
```

如您所见，当所选日期没有数据时，它应该显示消息“所选日期没有记录”。但是每次没有记录时，它仍然只显示最后一行“总计”，即第二个查询具有空白值。有可能修复它吗？

当数据库中有选定日期的记录时，我想制作“粗体”最后一行，即总行。这里也可以吗？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T12:02:52.087

您有两个查询，应该这样运行它们，首先是获取数据的查询，然后是获取总数的查询。就目前而言，查询将始终返回以 Total 作为日期的一行。

即使表格完全是空的，也是如此。您可以通过创建一个包含一列名为 ID 且没有行的表来检查这一点。

```
SELECT ID,ID As ASum
FROM EmptyTable
UNION
SELECT "Total" As ID, Sum(ID)
FROM EmptyTable 
```

它将返回一行。

# java - 为什么在覆盖方法时类型兼容性也不适用于基元？

> ID：11599005
> 
> 赞同：7
> 
> 时间：2012-07-22T09:11:33.560
> 
> 标签：java, inheritance, polymorphism, overriding

当我们说基类`Base`及其派生类`Derived`时，`type compatible`我们指的是`Base`引用可以引用`Derived`实例这一事实。
即`Base b = new Derived();`
对于相反，将需要强制转换，因为类型不兼容。
现在这个概念不适用于原始类型吗？
我的意思是这个

```
short shortNumber = 10;  
int intNumber = shortNumber; 
```

对我来说似乎是同一件事（因为也不需要强制转换，并且两者`short`都是`int` *整数类型*）。
因此，当覆盖基类中的方法时，为什么返回类型与基类的返回类型相同或至少类型兼容是可以接受的，但这也不适用于整数类型？
例如，为什么这是不可接受的？

```
public class Person {    

    public int getId(){  
        return 1;  
    }           
}   

public class Employee extends Person {    

    public short getId(){  
        return 0;  
    }  

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-22T09:28:32.160

直接的答案，为什么您的代码示例无效，很简单：**协变返回类型**的 Java 语言特性显式**不适**用于**原语**。请参阅[JLS 8.4.5](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.4.5)和[JLS 8.4.8.3](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.4.8.3)。

自动装箱不适用于此处。如果您将返回类型更改为`Integer`and `Short`，它们仍然不能返回类型替代，因为两者都不是另一个的子类。

我无法回答“为什么 JLS 不允许原语的协变返回类型”的问题，即为什么语言设计者决定不应该允许它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-22T09:16:37.923

从 Java 1.5 开始，您的 short 和 int 都可以自动装箱到`Short`and `Integer`，并且 Short 不扩展 Integer（例如，它具有不同的 MAX_VALUE）。

这是造成问题的原因之一，但我认为真正的原因是这些 Java 语言设计决策之一：如果您要更改类型，我们希望您意识到这一点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-22T09:26:32.733

您不能根据返回类型覆盖方法，这是不允许的，编译器会抱怨它不会被视为被覆盖的方法。

此外，函数调用在返回类型的基础上也不是确定性的。例如，如果你打电话

someObj.getId();

编译器将如何确定应该调用哪个方法？从编译器的角度来看，您没有处理返回值并不重要。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-22T09:58:40.570

1.  [JLS #8.4.8.3](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.4.8.3)：覆盖和隐藏的要求

    > 如果具有返回类型 R1 的方法声明 d1 覆盖或隐藏具有返回类型 R2 的另一个方法 d2 的声明，则 d1 必须是 d2 的返回类型可替换（第 8.4.5 节），否则会发生编译时错误。
    > *此规则允许协变返回类型 - 在重写方法时改进方法的返回类型。*

2.  [JLS #8.4.5](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.4.5)：方法返回类型 - 对象和基元的处理方式不同（强调我的）：

    > 具有返回类型 R1 的方法声明 d1 可以返回类型替代具有返回类型 R2 的另一个方法 d2，当且仅当以下条件成立时：
    > 
    > *   如果 R1 无效，则 R2 无效。
    > *   **如果 R1 是原始类型，则 R2 与 R1 相同。**
    > *   如果 R1 是引用类型，则：
    >     *   **R1 是 R2 的子类型，或者 R1 可以**通过未经检查的转换（第 5.1.9 节）转换为 R2 的子类型，或者
    >     *   R1 = |R2|

至于您的初始示例，它称为扩展转换（short -> int），不适用于方法覆盖的上下文。

# segmentation-fault - SWFTools 分段错误

> ID：11599008
> 
> 赞同：0
> 
> 时间：2012-07-22T09:11:53.993
> 
> 标签：segmentation-fault, flash, pdf-conversion, pdf2swf

我知道有类似的问题（[这里](https://stackoverflow.com/questions/2965171/swftools-segmentation-fault)和[这里](https://stackoverflow.com/questions/2055061/swftools-segmentation-fault)），但没有一个答案对我有用。

运行时出现`pdf2swf sample.pdf -v -o sample.swf`分段**错误**：

```
...
VERBOSE colorMap pixcomps:3 bits:8 mode:2
NOTICE  File contains jpeg pictures
VERBOSE Drawing 1496x1808 transparent jpeg-image (id 151) at size 1496x1808 (548x663), >256 colors
Segmentation fault 
```

“-O 1”标志不起作用，**dmesg**没有帮助：

```
pdf2swf[29304]: segfault at 0000000000000000 rip 00002ac82a6c75b0 rsp 00007fff623484b0 error 4
pdf2swf[32714]: segfault at 0000000000000000 rip 00002b7f2e0145b0 rsp 00007fff68ea90c0 error 4 
```

我有一个类似的服务器，swftools 工作正常并成功处理相同的文件。我已经尝试像在我的其他服务器上一样安装两个版本 0.9.1，以及在没有帮助的情况下安装可用的最新版本。

我已经安装了以下命令：

```
LDFLAGS="-L/usr/local/lib" CPPFLAGS="-I/usr/local/include" ./configure
make
make install 
```

有谁知道有什么帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T16:05:32.150

我认为导致此问题的安装文件之一有问题。我重新下载了下一个文件：

```
jpegsrc.v8d.tar
freetype-2.3.12.tar.gz
swftools-0.9.2.tar.gz 
```

并以下列方式安装它们：

```
# Install JPEGlib 8d
tar -zvxf jpegsrc.v8d.tar
cd /var/src/conversion/jpeg-8d
./configure
make
make install
ranlib /usr/local/lib/libjpeg.a
ldconfig /usr/local/lib

# install freetype
tar -zvxf freetype-2.3.12.tar.gz
cd /var/src/conversion/freetype-2.3.12
rm -f config.cache
ranlib /usr/local/lib/libjpeg.a
ldconfig /usr/local/lib
export LDFLAGS="-L/usr/local/lib"
export CPPFLAGS="-I/usr/local/include"
./configure
make
make install

# Install SWFTOOL
tar -zvxf swftools-0.9.2.tar.gz
cd /var/src/conversion/swftools-0.9.2
export LDFLAGS="-L/usr/local/lib"
export CPPFLAGS="-I/usr/local/include" 
./configure
make
make install 
```

现在一切正常，希望这对其他人也有帮助

# javascript - 触发 contenteditable div 中的所有 keydown/up 事件

> ID：11599009
> 
> 赞同：1
> 
> 时间：2012-07-22T09:12:02.590
> 
> 标签：javascript, jquery

我的问题...我似乎无法触发所有 keydown 事件。

我正在使用 [enter] 和 [esc] keydown 事件来更新/刷新或退出/刷新某些 html 表中的数据

有静态表格单元格和动态表格单元格，根据用户搜索词输入填充

动态表来自 $.each 循环，但 div 结构完全相同（并且 div id 是唯一的）。在这两种情况下，生成的表格单元格都是......

```
<td class="edit"><div contenteditable="true" id="XYZ">[value]</div></td> 
```

keydown 功能完全相同....

```
$(document).ready(function() {

    $("#divA").keydown(function (e) { 
    if (e.keyCode == 13) {
        e.preventDefault();
        // send data to server          
        // refresh stuff
    } 
    if (e.keyCode == 27) {
        // refresh stuff
    }       
    });

    $("#divB").keydown(function (e) { 
    if (e.keyCode == 13) {
        e.preventDefault();
        // send data to server
        // refresh stuff        
    } 
    if (e.keyCode == 27) {
        // refresh stuff
    }       
    }); 
```

向服务器发布日期的单独功能是相同的。更新数据库的php也是一样的。并且两者都具有相同的mysql数据结构`double, yes null, zero default`。divB 中包含数据，并`alert($("#divB").text());`显示将在 ajax 更新中使用的值。

但我想这些都不重要，因为我已将问题范围缩小到这里......

在 divA 中，keydown 停止 [enter] 换行符并运行代码

在 divB 中，keydown 不会停止 [enter] 换行符，并且没有任何代码运行

唯一的区别是 divA 是静态的，而 divB 是在 javascript 中生成的。如何让 divB keydown 功能运行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T09:21:53.533

由于某些 div 是动态的，因此您不能使用`keydown` 它们将事件绑定到它们。此方法只会在页面加载时绑定到现有的 div。

您需要的是使用[jquery.on()](http://api.jquery.com/on/)或[jquery.live()](http://api.jquery.com/live/)（on 较新，因此如果您的 jquery 版本支持它，最好使用它）。

# iphone - 用 sender vs self._inputBox 关闭键盘

> ID：11599013
> 
> 赞同：0
> 
> 时间：2012-07-22T09:12:30.690
> 
> 标签：iphone, objective-c, ios

在运行我的程序时，我正在编写一个基本的聊天应用程序来学习 ios，我注意到不同的结果：

```
[self._inputBox  resignFirstResponder]; 
```

对比

```
[sender  resignFirstResponder]; 
```

我有这个ibaction：

```
- (IBAction)_sendText:(id)sender 
```

在点击发送按钮时调用。它也被称为输入，因为 ibaction 调用与发送按钮相同的 ibaction。

现在在我今晚刚刚支持的 iphone 上（这是一个视图，现在我在我的 ipad 故事板和我的 ipod 上都有一个视图，并且今晚将 ipad 动作连接到 ipod 故事板）点击连接到这个 ibaction 的发送按钮， self.inputBox 调用 resignFirstResponder 工作，但发件人 resignFirstResponder 没有工作。我有一个朋友正在测试，他发现它在他的 ipod 上不起作用。我只在模拟器中运行它并且都在那里工作。

麦克风

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T10:30:20.747

如果“发送”按钮连接到您的`_sendText:`操作并且您单击该按钮，则该按钮是发件人，而不是您的文本输入字段，因此 [`sender resignFirstResponder]`将不会产生所需的效果。

# c# - C# 5.0 async/await 与 Akka Actor 与基本 fork/join 的示例？

> ID：11599017
> 
> 赞同：6
> 
> 时间：2012-07-22T09:13:30.967
> 
> 标签：c#, scala, parallel-processing, actor, async-await

C# 和 Scala 都采用了框架来简化异步/并行计算，但方式不同。最新的 C#（5.0，仍处于测试阶段）已决定使用 async/await 框架（在底层使用 continuation-passing，但以更易于使用的方式），而 Scala 则使用“actors”的概念，并且最近在 Akka 中实现了 actor 并将其合并到基础库中。

下面是一个需要考虑的任务：我们收到一系列请求来执行各种操作——例如，来自用户输入、对服务器的请求等。有些操作很快，但有些需要一段时间。对于较慢的，我们希望异步执行操作（在另一个线程中）并在线程完成时处理它，同时仍然可以自由处理新请求。

一个简单的同步循环可能是（伪代码）：

```
while (1) {
  val request = waitForAnything(user_request, server_request)
  val result = do_request(request)
  if (result needs to be sent back)
    send_back_result(result)
} 
```

在基本的 fork/join 框架中，您可能会执行以下操作（伪代码）：

```
val threads: Set[Thread]

while (1) {
  val request = waitForAnything(user_request, server_request, termination of thread)
  if (request is thread_terminate) {
    threads.delete(request.terminated_thread)
    val result = request.thread_result
    if (result needs to be sent back)
      send_back_result(result)
  } else if (request is slow) {
    val thread = new Thread(() => do_request(request))
    Threads.add(thread)
    thread.start()
  } else {
    val result = do_request(request)
    if (result needs to be sent back)
      send_back_result(result)
  }
} 
```

使用 async/await 和使用 actor 会如何表达，更一般地说，这些方法的优点/缺点是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T10:05:25.647

请考虑我的部分答案：“旧” Scala 演员已被 Akka 演员取代，这不仅仅是一个简单的 async/await 库。

1.  Akka Actor 是“消息处理程序”，它们被组织成一个层次结构，可以*在一个或多个 JVM 上运行，甚至分布在网络上。*
2.  当您意识到您的异步处理需要参与者时（稍后阅读为什么这不是强制必要的），*Akka 让您并帮助您在故障处理、调度和路由方面建立最佳模式*
3.  Akka 带有不同的传输层，以及其他花哨的即用型工具，例如显式有限状态机、数据流并发等。
4.  Akka自带Futures，更可能对应C# 5.0中的Async/Await框架

你可以在 Akka 网站或这篇文章中阅读更多关于 Akka 期货的信息：

[Scala 中的并行文件处理](https://stackoverflow.com/questions/11576439/parallel-file-processing-in-scala/11576940#11576940)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T17:37:13.233

我不能代表 Scala，但 C# 版本看起来像这样（我没有方便的 IDE，所以请原谅任何错误/错别字：

```
public async Task<int> GetResult()
{
   while (true)
   {
      var request = await waitForAnything(user_request, server_request);
      var result = await do_request(request);
      if (isValid(result))
         return result;
   }
} 
```

你会这样称呼它：

```
public void RunTheProgram()
{
   int result = await GetResult();
   Console.WriteLine("Result: {0}", result);
} 
```

简而言之，实际代码看起来非常像伪代码，即非常像普通人对问题的思考方式。这就是 C# 的 async/await 的真正美妙之处。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-21T09:19:33.197

Scala 还实现了 async/await 范式，它可以简化一些算法。

这是建议： [http ://docs.scala-lang.org/sips/pending/async.html](http://docs.scala-lang.org/sips/pending/async.html)

这是实现： [https ://github.com/scala/async](https://github.com/scala/async)

# jboss7.x - 需要对 HornetQ 进行修正

> ID：11599019
> 
> 赞同：4
> 
> 时间：2012-07-22T09:13:50.113
> 
> 标签：jboss7.x, hornetq

我正在使用 Jboss 7.1.1.final，我想定义 2 个不同的 DLQ，一个用于某个队列，另一个用于所有其余队列。

我找到了这个配置：

```
<address-settings>
   <address-setting match="jms.queue.exampleQueue">
      <dead-letter-address>jms.queue.deadLetterQueue</dead-letter-address>
      <max-delivery-attempts>3</max-delivery-attempts>
      <redelivery-delay>5000</redelivery-delay>
      <expiry-address>jms.queue.expiryQueue</expiry-address>
      <last-value-queue>true</last-value-queue>        
      <max-size-bytes>100000</max-size-bytes>
      <page-size-bytes>20000</page-size-bytes>
      <redistribution-delay>0</redistribution-delay>
      <send-to-dla-on-no-route>true</send-to-dla-on-no-route>
      <address-full-policy>PAGE</address-full-policy>
   </address-setting>
</address-settings> 
```

match 属性可以用来匹配某个队列，我有几个关于这个配置的问题：

1.  如果我定义 2 `address-setting`，一个用通配符匹配所有，一个只匹配一个队列，那么一个队列定义是否优先？我需要把它放在匹配所有定义之前还是没关系？
2.  在他们匹配队列的示例中`jms.queue.exampleQueue`，我将队列定义为：

    ```
    <jms-queue name="MissionResult">
        <entry name="queue/MissionResult"/>
    </jms-queue> 
    ```

    我应该在`match`属性中添加什么以匹配它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T14:07:03.327

找到了答案：

1.  这两个定义可以共存。Jboss 会找到最佳匹配。
2.  您需要定义一个队列，如：

    ```
    <jms-queue name="exampleQueue">
       <entry name="queue/exampleQueue" />
    </jms-queue> 
    ```

    然后要匹配此队列，请使用`jms.queue.exampleQueue`.

# c# - 在 C# 中模拟 KeyPress 到游戏

> ID：11599020
> 
> 赞同：1
> 
> 时间：2012-07-22T09:13:52.773
> 
> 标签：c#, c++, keyboard, keypress, simulate

我正在尝试将按键模拟到另一个窗口，这是一个游戏。不起作用的事情是：

*   SendKey - 将输入作为字符串发送，例如一些文本或其他内容，但不用于 ENTER TAB 或其他关键键
*   InputSimulator - 完全浪费时间
*   SendInput - 对此也有一些问题。它不编译，我以前从未使用过它
*   PostMessage - 似乎这两个几乎相同，它们再次发送文本但同样没有其他键，例如 ENTER TAB 或其他。如果我想按住键几秒钟，也无法计算出 wParam 的值。这是一个 32 位十六进制值，其中最后 16 位似乎是重复数。
*   SendMessage - 见 PostMessage
*   AUTOIT 或 AHK 如果有人知道如何将它们合并到 C# 中似乎有困难，这将有很大帮助，这意味着我可以在 C# .cs 文件中编写 AHK 脚本以便编译。COM，参考，或任何东西。

DirectInput 有问题

```
public void Test_KeyDown()
{
        INPUT[] InputData = new INPUT[2];
        Key ScanCode =  Microsoft.DirectX.DirectInput.Key.W;

        InputData[0].type = 1; //INPUT_KEYBOARD
        InputData[0].ki.wScan = (short)VirtualKeyCode.NUMPAD2 ; //ScanCode;
        InputData[0].ki.dwFlags = (int)KEYEVENTF.SCANCODE;

        InputData[1].type = 1; //INPUT_KEYBOARD
        InputData[1].ki.wScan = (short)VKeys.VK_W; 
        InputData[1].ki.dwFlags = (int)(KEYEVENTF.KEYUP | KEYEVENTF.UNICODE);

        // send keydown
        if (SendInput(2, InputData, Marshal.SizeOf(InputData[1])) == 0)
        {
            System.Diagnostics.Debug.WriteLine("SendInput failed with code: " +
            Marshal.GetLastWin32Error().ToString());
        }
} 
```

它给出了这个错误：

```
无法加载文件或程序集“Microsoft.DirectX.DirectInput.dll”或其中之一  
它的依赖关系。不是有效的Win32应用程序。  
（来自 HRESULT 的异常：0x800700C1）

```

我从 DirectX SDK 工具包 2007 中引用了它

我正在尝试将密钥发送到另一个实例或句柄。C++ 或 C# 任何工作都很好，也是。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T09:24:01.287

看起来您正在尝试在 64 位解决方案中加载 32 位 dll，所以请使用 64 位 dll

# regex - 似乎无法为 URL 垃圾邮件清除程序找到可靠的正则表达式

> ID：11599021
> 
> 赞同：4
> 
> 时间：2012-07-22T09:13:54.750
> 
> 标签：regex, url, preg-replace

我似乎找不到任何体面的简单正则表达式来删除垃圾邮件链接。我正在尝试的一个作品，但前提是 www.example.com 旁边没有句号和另一个句子。我有一本关于正则表达式的好书，但根本没有时间在 atm 学习它。

这是我正在使用的正则表达式。老实说，我不确定我是否做得对。

```
 $a = $_POST['msge'];
    $b = preg_replace('^[a-zA-Z0-9\-\.]+\.(com|org|net|mil|edu|COM|ORG|NET|MIL|EDU)$^', '[LINK REMOVED]', $a);
    print $b; 
```

所以，我想知道的是，如果代码看起来正确，有没有人可以使用更好的正则表达式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T09:26:18.907

蒂姆回答了我的问题。他写了：

您的正则表达式当前仅在链接位于文件末尾时才找到链接（因为 $ 锚点）。此外，您最好不要使用 ^ 作为正则表达式分隔符，因为这是正则表达式中的一个重要元字符。如果您不想使用标准，最好使用 ~ 或 % /

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T09:38:01.047

可靠地检测文本中的所有链接是[不可能的。](http://www.regexguru.com/2008/11/detecting-urls-in-a-block-of-text/)特别是如果您想查找没有协议（`bit.ly/foo`等）的链接。

您可以找到更多（但绝不是全部）链接

```
$result = preg_replace(
    '/\b
    (?:
     (?:https?|ftp|file):\/\/  # protocol (optional)
     |www\.|ftp\.|bit\.        # add more typical "link starters" here
    )
    [-A-Z0-9+&@#\/%=~_|$?!:,.]*
    [A-Z0-9+&@#\/%=~_|$]
    /ix', 
    '[LINK REMOVED]', $subject); 
```

# wpf - WPF + PRISM - 我应该将 WCF 客户端注入 View-Model 吗？

> ID：11599022
> 
> 赞同：4
> 
> 时间：2012-07-22T09:14:03.357
> 
> 标签：wpf, wcf, dependency-injection

我在 PRISM 架构中有一个 WPF 应用程序。

从我在网上阅读的内容中，我看到 View-Models 以**ASYNC**方式调用 WCF 服务操作是最好的，而且 - 最好**为每个操作创建一个新连接**。（有人告诉我，保持连接活动时间过长是不好的）。

我的问题是 - 我应该如何将 WCF 客户端注入到我的 View-Model 中？

如果我只是为“自动生成”客户端创建一个接口 - 并注入接口 - 这将只是在我的 View-Model 构造函数中为客户端创建一个实例，但如果我想创建一个新客户端，这对我没有帮助对于我在窗口中执行的每个操作。

为此-我需要注入“客户端工厂”之类的东西。

任何人都可以对此发表意见吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T09:33:55.720

首先，IMVHO WCF 调用最好放在模型中，而不是视图模型中。

您可以创建一个工厂助手类，向它传递一个接口，然后它会传回一个实现该接口的具体实例。工厂助手仍然可以使用 PRISM 将接口解析为具体类型，这些类型将解析您已将它们注册到的任何内容，并且您每次都将获得一个新实例，前提是您尚未向生命周期管理器注册它们。

在工厂助手中使用 PRISM 有助于保持整个事物的高度可单元测试——您可以在测试时模拟出与 WCF 相关的代理类，而目标模型永远不会知道其中的区别。如果你真的想遵循[依赖注入](http://martinfowler.com/articles/injection.html)模式，那么你可以在构造函数中注入工厂助手。

# r - 在 geom_tile 中对轴标签进行排序

> ID：11599023
> 
> 赞同：12
> 
> 时间：2012-07-22T09:14:16.507
> 
> 标签：r, ggplot2

我有一个数据框，其中包含来自 20 多个国家/地区的 20 多种产品中每种产品的订单数据。我使用`ggplot2`类似于以下的代码将其放在突出显示表中：

```
require(ggplot2)
require(reshape)
require(scales)

mydf <- data.frame(industry = c('all industries','steel','cars'), 
    'all regions' = c(250,150,100), americas = c(150,90,60), 
     europe = c(150,60,40), check.names = FALSE)
mydf

mymelt <- melt(mydf, id.var = c('industry'))
mymelt

ggplot(mymelt, aes(x = industry, y = variable, fill = value)) +
    geom_tile() + geom_text(aes(fill = mymelt$value, label = mymelt$value)) 
```

这会产生这样的情节：

![高亮表](../Images/6500dc1be3798170d89382c12c53f8fc.png)

在实际图中，450 个单元格表很好地显示了订单集中的“热点”。我要实现的最后一个改进是按字母顺序排列 x 轴和 y 轴上的项目。所以在上图中，y 轴 ( `variable`) 的顺序为`all regions`, `americas`, 然后`europe`x 轴 ( `industry`) 的顺序为`all industries`,`cars`和`steel`。事实上，x 轴已经按字母顺序排列，但如果不是这样，我不知道如何实现这一点。

我对不得不问这个问题感到有些尴尬，因为我知道在 SO 上有很多类似的问题，但是 R 中的排序和排序仍然是我个人的问题，我无法让它工作。尽管我确实尝试过，但除了最简单的情况外，我在对`factor`、`levels`、`sort`和的大量调用中迷失了`order`方向`with`。

**Q. 如何排列上面的高亮表，使 y 轴和 x 轴都按字母顺序排列？**

编辑：下面 smillig 和 joran 的答案确实用测试数据解决了这个问题，但使用真实数据，问题仍然存在：我无法按字母顺序排序。这让我摸不着头脑，因为数据框的基本结构看起来是一样的。显然我遗漏了一些东西，但是什么？

```
> str(mymelt)
'data.frame':   340 obs. of  3 variables:
 $ Industry: chr  "Animal and vegetable products" "Food and beverages" "Chemicals" "Plastic and rubber goods" ...
 $ variable: Factor w/ 17 levels "Other areas",..: 17 17 17 17 17 17 17 17 17 17 ...
 $ value   : num  0.000904 0.000515 0.007189 0.007721 0.000274 ... 
```

但是，应用该`with`语句不会产生按字母排序的级别。

```
> with(mymelt,factor(variable,levels = rev(sort(unique(variable)))))

  [1] USA                   USA                   USA                  
  [4] USA                   USA                   USA                  
  [7] USA                   USA                   USA                  
 [10] USA                   USA                   USA                  
 [13] USA                   USA                   USA                  
 [16] USA                   USA                   USA                  
 [19] USA                   USA                   Canada               
 [22] Canada                Canada                Canada               
 [25] Canada                Canada                Canada               
 [28] Canada                Canada                Canada 
```

一直到：

```
 [334] Other areas           Other areas           Other areas          
 [337] Other areas           Other areas           Other areas          
 [340] Other areas 
```

如果你做 a`levels()`它似乎显示同样的事情：

```
 [1] "Other areas"           "Oceania"               "Africa"               
 [4] "Other Non-Eurozone"    "UK"                    "Other Eurozone"       
 [7] "Holland"               "Germany"               "Other Asia"           
[10] "Middle East"           "ASEAN-5"               "Singapore"            
[13] "HK/China"              "Japan"                 "South Central America"
[16] "Canada"                "USA" 
```

即上述的非反转版本。

下图显示了真实数据图的样子。如您所见，x 轴已排序，y 轴未排序。我很困惑。我错过了一些东西，但看不到它是什么。

![带有真实数据的绘图截图](../Images/f6011f71067a5a8a79fc45d6ac957a76.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-22T11:05:40.160

图表上的 y 轴也已经按字母顺序排列，但从原点开始。我认为您可以使用`xlim`and来实现您想要的轴的顺序`ylim`。例如：

```
ggplot(mymelt, aes(x = industry, y = variable, fill = value)) +
    geom_tile() + geom_text(aes(fill = mymelt$value, label = mymelt$value)) +
    ylim(rev(levels(mymelt$variable))) + xlim(levels(mymelt$industry)) 
```

将从`all regions`顶部开始对 y 轴进行排序，然后是`americas`，然后`europe`是底部（从技术上讲，这是逆字母顺序）。x 轴按字母顺序排列`all industries`，介于`steel`两者`cars`之间。

![在此处输入图像描述](../Images/fd7c8ba95adf6ef5f8736a426ef7321d.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-22T15:04:07.570

正如 smillig 所说，默认值已经按字母顺序排列轴，但 y 轴将从左下角向上排列。

**ggplot2**的基本规则适用于几乎任何你想要的特定顺序的东西：

*   如果您希望某物以特定顺序出现，您必须将相应的变量设为一个因子，并按照您想要的顺序对级别进行排序。

在这种情况下，您只需要这样做：

```
mymelt$variable <- with(mymelt,factor(variable,levels = rev(sort(unique(variable))))) 
```

无论您是使用 还是 运行 R，这都应该`stringsAsFactors = TRUE`有效`FALSE`。

此原则适用于排序轴标签、排序条、条内排序段、排序方面等。

对于连续变量，有一个方便`scale_*_reverse()`但显然不适用于离散变量的方法，我认为这将是一个很好的补充。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-07-29T17:55:26.250

另一种可能性是使用预测**库**中的**fct_reorder 。**

 **```
library(forecast)
mydf %>%
pivot_longer(cols=c('all regions', 'americas', 'europe')) %>% 
  mutate(name1=fct_reorder(name, value, .desc=FALSE)) %>% 
  ggplot( aes(x = industry, y = name1, fill = value)) +
  geom_tile() + geom_text(aes( label = value)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-26T06:44:58.200

可能有点晚了，

```
with(mymelt,factor(variable,levels = rev(sort(unique(variable))))) 
```

此函数不排序，因为您正在订购没有顺序的“变量”（这是一个无序因素）。

您应该首先使用 as.character 函数将变量转换为字符，如下所示：

```
with(mymelt,factor(variable,levels = rev(sort(unique(as.character(variable)))))) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-11T12:51:49.580

也许这个 StackOverflow 问题可以提供帮助：

[geom_tile 中的订单数据](https://stackoverflow.com/questions/5713713/order-data-inside-a-geom-tile)

特别是 Brandon Bertelsen 的第一个答案：

> “注意这不是一个有序的因素，它是一个正确顺序的因素”

它帮助我在 ggplot2 geom_tile 图中获得了正确的 y 轴顺序。**

# opengl - CgFx 编译器错误“未知状态 'VertexShader'”

> ID：11599025
> 
> 赞同：1
> 
> 时间：2012-07-22T09:14:31.957
> 
> 标签：opengl, shader, nvidia, cg

我有以下 CgFx 文件：

```
struct VertIn {
  float4 pos   : POSITION;
  float4 color : COLOR0;
};
struct VertOut {
  float4 pos   : POSITION;
  float4 color : COLOR0;
};
VertOut vert(VertIn IN) {
  VertOut OUT;
  OUT.pos     = IN.pos;
  OUT.color   = IN.color;
  OUT.color.z = 0.0f;
  return OUT;
}
struct FragIn {
  float4 color: COLOR;
};
struct FragOut {
  float4 color : COLOR;
};
FragOut frag(FragIn IN) {
  FragOut OUT;
  OUT.color = IN.color;
  OUT.color.y = 0.0f;
  return OUT;
}
struct GeomIn {
  float4 position : POSITION;
  float4 color : COLOR0;
};
TRIANGLE void geom(AttribArray<GeomIn> IN) {
  for(int i=0; i<IN.length; i++) {
    emitVertex(IN[i]);
  }
}
technique technique0 {
  pass p0 {
    VertexShader = compile gp4vp vert();    //line 47
    FragmentShader = compile gp4fp frag();  //line 48
    GeometryShader = compile gp4gp geom();  //line 49
  }
} 
```

使用 cgc 验证 3 个着色器时，它们都可以正常编译。

但是当我尝试使用以下方法编译整个效果时：

```
context=cgCreateContext();
effect=cgCreateEffectFromFile(context, "my_shader.cgfx", NULL);
if(!effect) {
  printf(ygl.cgGetLastErrorString(NULL));
  printf(cgGetLastListing(context));
} 
```

然后我收到以下错误：

```
CG ERROR : The compile returned an error.
my_shader.cgfx(47) : error C8001: Unknown state 'VertexShader'
my_shader.cgfx(48) : error C8001: Unknown state 'FragmentShader'
my_shader.cgfx(49) : error C8001: Unknown state 'GeometryShader' 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T22:29:04.283

创建上下文后，您需要调用

```
cgGLRegisterStates(handle); 
```

`handle`您的 CG 上下文句柄在哪里。这将注册诸如`VertexShader`, `PixelShader`,`FillMode`等之类的内容。我不确定为什么默认情况下没有注册这些内容，但是您已经有了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T11:21:12.893

嗯，解决了，不知道怎么解决。我认为编译器没有预料到 CgFx，因为我之前确实加载了一个 cg 配置文件，所以它尝试使用那个。但不确定。

# css - @font-face 仍然无法与 Firefox 和 htaccess 一起使用

> ID：11599028
> 
> 赞同：1
> 
> 时间：2012-07-22T09:14:52.277
> 
> 标签：css, .htaccess, font-face

我已经搜索和搜索，但我仍然无法弄清楚如何在 Firefox 中加载我的自定义字体。使用 @font-face 属性，我在头部有这个：

```
@font-face {
   font-family: 'MeanTimeMedium';
src: url('http://sweetbacklove.com/fonts/meantimec3-webfont.eot');
src: url('http://sweetbacklove.com/fonts/meantimec3-webfont.eot?#iefix') format('embedded-opentype'),
     url('http://sweetbacklove.com/fonts/MeanTimec3.ttf') format('truetype'),
     url('http://sweetbacklove.com/fonts/meantimec3-webfont.woff') format('woff'),
     url('http://sweetbacklove.com/fonts/meantimec3-webfont.svg#MeanTimeMedium') format('svg');} 
```

因为 Firefox 不接受到其他域的直接链接，所以我将一个 .htaccess 文件放在我的“字体”文件夹中，如下所示：

```
<FilesMatch "\.(ttf|ttc|otf|eot|woff)$">
<IfModule mod_headers.c>
    Header set Access-Control-Allow-Origin "*"
</IfModule>
</FilesMatch> 
```

尽管如此，我还是要蹲下。如果有人可以提供任何见解，将不胜感激。

我的[网站](http://www.meantimemash.com)。字体和 .htaccess 文件托管在装有 IIS 7.0 的 Windows 服务器上的 GoDaddy 上。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T00:08:25.873

Google Web Fonts API 生成/使用链接标签，放置在 html 头标签中。

```
<link href='http://fonts.googleapis.com/css?family=Capriola' rel='stylesheet' type='text/css'> 
```

当此页面链接到时，它会处理对 .woff 文件的获取请求，该文件是字体/woff 的 mime 类型。

参考这篇 stackoverflow 文章 < [CSS @font-face not working with Firefox, but working with Chrome and IE](https://stackoverflow.com/questions/2856502/css-font-face-not-working-with-firefox-but-working-with-chrome-and-ie?rq=1) >，你我想在你的 .htaccess 文件中添加以下 Mime 类型。

```
AddType font/ttf .ttf
AddType font/eot .eot
AddType font/otf .otf
AddType font/woff .woff 
```

您也可以尝试直接链接到字体文件（我没有尝试过）

```
<link href='http://sweetbacklove.com/fonts/meantimec3-webfont.woff' rel='stylesheet' type='font/woff' media='all'> 
```

# javascript - Dom 语言 Javascript？

> ID：11599033
> 
> 赞同：0
> 
> 时间：2012-07-22T09:15:26.063
> 
> 标签：javascript, jquery, sql

我是 javascript 和 jQuery 的新手。

我只是想知道有什么方法可以创建不同的东西，比如结构化的 dom 语言？

在jQuery中选择所有div

```
var divs = $("div"); 
```

我想知道这样的事情的可能性

var SDL = 新 SDL();

```
var div = SDL.query("select div from document"); //or something like that .. 
```

或选择一个 div`ID`

```
var div = SDL.query("select div from document where id='divID'"); 
```

看起来很生气吧？

**我相信我不会关心这个问题的否决票，但我需要知道`why this is not good ?`或`why its is not posible ?`**

请在这方面说点什么...

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T09:18:30.077

这不好，因为它没有实现或使用的意义。它会使 jQuery 库比它需要的大得多，并且 CSS 选择器无论如何都足够清晰，并且更加简洁。

这*是*可能的，但是您所描述的实际上非常接近 CSS 选择器，但是在一些格式更改中引入了一些无关紧要的词。

在您的“SDL”选择器中，它将简单地替换为：

```
div#id 
```

为什么要写一个完整的句子来做同样的事情呢？可能有第三方类似 SQL 的选择器库，就像[Sizzle](http://sizzlejs.com/)是一个 CSS 选择器库一样，但我个人从未听说过或见过。

SDL 也比使用基于 CSS 的选择器要慢得多，因为字符串比 CSS 选择器字符串更复杂并且其中包含更多垃圾。然而，更重要的是，您不会获得`querySelectorAll()` *等人*在本机使用时提供的本机加速。

# c# - javascript不实时执行

> ID：11599035
> 
> 赞同：0
> 
> 时间：2012-07-22T09:15:50.427
> 
> 标签：c#, javascript

我正在使用 Visual Studio。如果我在本地主机上调试它，我的 javascript 正在运行，功能非常简单，在 mouseOver 上更改照片。

但是在我将文件上传到我的服务器后，此功能不起作用。我在 Chrome、Firefox、IE 和 Safari 上试过：

```
function mouseOver1()
{
    var category1 = document
         .getElementById('ctl00_ContentPlaceHolder1_lblItemID')
         .innerHTML + '_1.jpg';

    document
      .getElementById('<%= iPhotoMain.ClientID.Replace("$","_") %>')
      .src = 'photos/product/' + category1;
}

<img id ="photo1" 
     src ="photos/product/noImage.gif" 
     onmouseover="mouseOver1();"  
     class="thumbpic" 
     runat ="server" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T09:50:07.477

根据OP的评论，我的原始答案部分不正确（尽管我仍然认为您不应该使用静态ID `lblItemID`- 所以将在下面留下答案）。

我的**新猜测**是您在页面的某处定义了*第二个* `mouseOver1();`函数，或者更可能是您链接到的外部 JavaScript 文件。因此，我建议您检查服务器上链接到的所有外部 JavaScript 文件，并确保它们符合您的预期。

我可以推荐[firebug 的 firebug](http://getfirebug.com)或 IE 和 Chrome 下的开发者工具（两者都按 F12）。使用 firebug，您可以*在下一个*要触发的 Javascript 上设置断点，这样您就可以轻松找出调用的去向

* * *

**原始答案**

我的**猜测**是你混淆了你的对象 ID。您还使用静态字符串来查找您的对象之一。

如果我是正确的，请试试这个 - 如果我的猜测不正确，我会很乐意删除我的答案。

（注意，我已更改`iPhotoMain`为`photo1`）

```
function mouseOver1(){
  var category1 = document
    .getElementById('<%=lblItemID.ClientID%>')
    .innerHTML + '_1.jpg';

  document
    .getElementById('<%=photo1.ClientID%>')
    .src = 'photos/product/' + category1;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T09:49:18.530

也许在服务器上你的页面（数据）比你的本地慢。所以尝试使用 javascript 的回调函数。像这样..

```
 var category1 = "";

    function mouseOver1(callback)
    {
        category1 = document
             .getElementById('ctl00_ContentPlaceHolder1_lblItemID')
             .innerHTML + '_1.jpg';

        callback();
    }

    function mouseOver2()
    {
       document
          .getElementById('<%= iPhotoMain.ClientID.Replace("$","_") %>')
          .src = 'photos/product/' + category1;
    }

<img id ="photo1" src ="photos/product/noImage.gif" onmouseover="mouseOver1(mouseOver2);" class="thumbpic"  runat ="server" /> 
```

# android - 谷歌地图可以用在普通的 api 上而不是用在 google api 上吗？

> ID：11599036
> 
> 赞同：0
> 
> 时间：2012-07-22T09:15:58.490
> 
> 标签：android, google-maps

我只想在他愿意的情况下使用谷歌地图来显示一个人的信息。否则他会在另一个屏幕上做其他事情，但即使他没有看地图，地图也会自动更新？

而且我希望该应用程序能够在所有版本的 android 上运行，而不仅仅是具有特定 google api 的手机。如果我使用第三方 google 插件创建应用程序，它是否也会在具有 android 2.2 或 2.3.3 版本的普通设备上运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T13:34:07.783

第一件事听起来，就像您想在后台更新地图，而您的用户不在`MapActivity`. 为此，您可以使用[`Service`](http://developer.android.com/reference/android/app/Service.html).

* * *

使用 Google API 时，它们必须安装在目标设备上。从[文档](https://developers.google.com/maps/documentation/android/index?hl=de#useslibrary)中：

> 该`<uses-library>`引用是必需的，因为它使构建工具能够将您的应用程序与地图外部库链接起来。它还**确保 Android 系统不会在设备上安装您的应用程序，除非所需的库可用。**

# javafx-2 - 如何对齐大按钮内的图标和文本？

> ID：11599041
> 
> 赞同：7
> 
> 时间：2012-07-22T09:16:51.963
> 
> 标签：javafx-2

我有一个相当大的按钮（`minWidth`并且`minHeight`被明确设置为大数字），并且在那个大按钮内有相对较小的图标和一些文本。图标和文本不会占用所有可用空间，最终会被放置在按钮的中心。

我想将图标和文本放在按钮的左侧。但似乎我不明白所有这些对齐的含义，因为设置`alignment`为`BASELINE_LEFT`或设置`textAlignment`为`LEFT`并没有改变任何东西。

我该如何解决？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-22T12:41:21.860

属性`textAlignment`控制多行文本的对齐方式，因此对您没有帮助。

但两者

```
 btn.setStyle("-fx-alignment: LEFT;"); 
```

或者

```
 btn.setAlignment(Pos.BASELINE_LEFT); 
```

应该为你工作。请参见下面的示例。

![在此处输入图像描述](../Images/874edf36e2a32b0b3c9eef01102b3629.png)

```
public class ILoveBigButtonsAndICannotLie extends Application {

    @Override
    public void start(Stage primaryStage) {
        Button btn = new Button();
        btn.setText("Button");
        btn.setGraphic(new Rectangle(10,10, Color.RED));
        btn.setMinHeight(200);
        btn.setMinWidth(250);
        //btn.setStyle("-fx-alignment: LEFT;");
        btn.setAlignment(Pos.BASELINE_LEFT);

        StackPane root = new StackPane();
        root.getChildren().add(btn);
        primaryStage.setScene(new Scene(root, 300, 250));
        primaryStage.show();
    }

    public static void main(String[] args) { launch(); }
} 
```

# php - php DOMDocument 表格行到文本

> ID：11599043
> 
> 赞同：0
> 
> 时间：2012-07-22T09:17:01.113
> 
> 标签：php, html, html-table, domdocument

我得到以下信息：

```
$table      = $dom->getElementsByTagName('table')->item(1);
$row        = $table->getElementsByTagName('tr')->item(0)->getElementsByTagName('td'); 
```

我想将一个包含所有 td 元素的 textContent 的数组放入一个数组中。

我可以使用类似的东西手动执行此操作

```
foreach ($row as $col) {
            $array[] = $col->textContent;
} 
```

但我确信必须有一个函数如何自动执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T17:32:57.423

看起来没有 PHP 函数可以做到这一点！

我实现此目的的自编程功能如下所示：

```
function elementsToArray($elements) {
foreach ($elements as $element) {
    $array[] = $element->textContent;
}
return $array;
} 
```

# api - 如何获取当前登录用户的 youtube 用户名

> ID：11599051
> 
> 赞同：1
> 
> 时间：2012-07-22T09:18:40.540
> 
> 标签：api, youtube, youtube-api

我正在编写一个应用程序，我需要 youtube.com 上当前登录用户的 youtube 用户名。任何人都可以提供某种提示/教程吗？

任何类型的帮助将不胜感激。谢谢 ：）

# wordpress - 使用插件为页面设置模板

> ID：11599054
> 
> 赞同：0
> 
> 时间：2012-07-22T09:18:53.507
> 
> 标签：wordpress

我正在寻找一个插件，它可以让我为我的页面选择模板。

目前，我正在做的是我手动打开我想要设置模板的页面并为这个单页选择一个。然后我必须一一为所有其他页面再次执行此操作。

是否有一个插件可以列出我所有的页面并让我轻松地为这些页面选择模板？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T11:30:59.923

没有这样的插件，因为这个功能集成在 wordpress 核心中， http: [//img1.uploadscreenshot.com/images/orig/7/20222113055-orig.png](http://img1.uploadscreenshot.com/images/orig/7/20222113055-orig.png)

# java - 在 IntelliJ Idea 中删除 .orig 文件

> ID：11599057
> 
> 赞同：2
> 
> 时间：2012-07-22T09:19:08.967
> 
> 标签：java, merge, intellij-idea, kdiff3

IntelliJ Idea 中是否有任何舒适的方法可以删除所有 .orig 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T12:28:03.870

AFAIK，.orig 文件是使用**hg revert**命令创建的。所以你可以只做**hg clean**并清除非托管文件。

否则，如果您在 Linux 上使用 Mac，则可以使用命令行执行以下操作：

**寻找 。-name *orig | xargs rm**

# cocoa - 可可：如何实现地址簿

> ID：11599058
> 
> 赞同：1
> 
> 时间：2012-07-22T09:19:10.277
> 
> 标签：cocoa

我想知道如何实现地址簿人员信息视图。喜欢 ![在此处输入图像描述](../Images/c24e45bb484fd8c0291dd9dfd7ec5185.png)

如果一个人有不同的标签，则视图将显示不同。 ![在此处输入图像描述](../Images/9f558095b648519cdf06addf2b29ea05.png)

有没有简单的方法来实现它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T09:25:03.157

您不需要构建该视图。有一个内置的[ABPeoplePickerView](https://developer.apple.com/library/mac/#documentation/UserExperience/Reference/AddressBook/Classes/ABPeoplePickerView_Class/Reference/Reference.html)可以提供这种行为。

# javascript - $.datepicker 未定义

> ID：11599063
> 
> 赞同：0
> 
> 时间：2012-07-22T09:19:46.900
> 
> 标签：javascript, jquery, datepicker, datetimepicker

我不能哄 datetimepicker 工作。日期选择器工作正常。但经过大约 7 小时的尝试，该插件仍然无法正常工作。

Firebug 没有显示 404。

所有 jQuery 库也包含在主题框架中。

我尝试在脚本中用 jQuery.datepicker 替换 $.datepicker 的所有实例。这没什么区别。

我尝试将脚本移动到上方或下方或将它们组合起来。同样的错误仍然存​​在。我在这个论坛上检查了几个相关的答案，还有很多很多其他的都无济于事。我已经回顾了 jQuery 文献，但它并没有解决这个特定的问题..

我的代码是这样的。只需几个 html 输入。日期选择器工作正常。

```
 `jQuery(document).ready(function(){
    jQuery('#datepicker').datepicker();
});

jQuery(document).ready(function(){
    jQuery('#datetime').datetimepicker();
});` 
```

这段代码工作正常。Datetimepicker 然后命中该行

`$.datepicker.parseDateTime = function(dateFormat, timeFormat, dateTimeString, dateSettings, timeSettings) {`

$.datepicker 未定义。

如果您不知道答案，也许 javascript/jQuery 有办法生成有关其失败的更详细信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T09:34:54.973

改成这个

```
jQuery(document).ready(function(){
        $.datepicker.parseDateTime = function(dateFormat, timeFormat, dateTimeString, dateSettings, timeSettings){};
}); 
```

看起来您正试图在加载该函数之前调用它。Jquery 将按顺序遍历每个 doc.ready 函数，因此只要这是在初始加载之后它应该可以工作。

此外，使用 chrome 的内置开发工具进行调试。PC 上的 Ctrl-shift-j 将打开它们，您可以看到控制台消息以了解发生了什么。

这是一个 jsfiddle 来显示工作语法 [http://jsfiddle.net/XA79k/](http://jsfiddle.net/XA79k/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T09:34:17.130

```
( function($$) {

$$(document).ready(function(e) {
        $.datepicker.parseDateTime = function(dateFormat, timeFormat, dateTimeString, dateSettings, timeSettings) {
});

} ) ( jQuery ); 
```

我有类似的问题，因为有冲突，所以不得不这样做。我也尝试了 jQuery.noConflict()，但没有奏效。上面的代码对我有用。

# matlab - 从文本文件创建图形，其中轴 X 是具有毫秒精度的日期，Y 是值

> ID：11599065
> 
> 赞同：0
> 
> 时间：2012-07-22T09:19:54.640
> 
> 标签：matlab, datetime, file-io, plot

我有这样的文本文件：

```
10:00:15:956 0,0155260005803643
10:00:21:968 0,0155280030632315
10:00:21:968 0,0155270018379389
10:00:21:968 0,0155260006126463
10:00:22:069 0,0155239981620611
10:00:22:090 0,0155249993873537 
```

第一列是毫秒精度的时间，第二列是值。我需要绘制图表，其中 X 轴是时间，Y 轴是值。

*   我应该使用什么功能来读取文件？dlmread，文本扫描，导入数据？
*   如何强制matlab识别“时间”？我可以以任何需要的格式（10:00:22:090 或 10.00.22.090 或其他任何格式）编写时间，但我需要 matlab 才能正确理解和处理时间标签。例如，10:00:22:090 和 10:00:23:090 之间的差异是一秒，并且应该在 X 轴上的这些标签之间使用该间隔。我想在 X 轴上看到“时间”，但我不想想要将时间转换为一些“不可读”的 int 值或类似的值（例如，从 10.00.00 开始的毫秒数。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T12:03:37.893

您可以在几秒钟内拥有它并`datatics`在绘图中使用。注意我有一个快速修复来处理第二列中的逗号。可能你不需要它。

```
f = fopen('foo.txt');
data = textscan(f, '%f:%f:%f:%f %f,%f');
fclose(f);

% hh:min:sec:millisec
secvec = [60*60 60 1 1e-3];
x = [data{1:4}] * secvec';

flvec = [1 1e-16];
y = [data{5:6}] * flvec';

xindays = x / (24*60*60);
plot(xindays, y, 'x');
datetick('x', 'HH:MM:SS'); 
```

# c++ - 用于 c++ 程序的带有控制台输入的 Sublime Text

> ID：11599066
> 
> 赞同：7
> 
> 时间：2012-07-22T09:19:59.683
> 
> 标签：c++, gcc, sublimetext2

如何在 SublimeText 2.0.1 中使用控制台输入？我选择了“工具 -> 构建系统 -> C++”，并将 hello.cpp 文件添加到项目中：

```
#include <iostream>
int main() 
{
    int a, b, c;
    std::cout << "Enter: ";
    std::cin >> a >> b;
    c = a + b;
    std::cout << a << '+' << b << '=' << c << std::endl;
    return 0;
} 
```

构建成功，但是当我运行（“工具->运行”）时，“std::cin >> a >> b;”行 已通过，我无法输入值。在带有 g++ 的终端中，它运行良好。操作系统：Ubuntu 12.04

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T11:12:24.737

我认为 Sublime Text 不支持 stdin，但是，您可以创建一个文件`stdin.input`并在编辑器下使用它：

```
#include <iostream>
#include <fstream>

#define SUBLIME

#if defined SUBLIME
#  define ISTREAM ifile
#else
#  define ISTREAM std::cin
#endif

int main() 
{
    int a, b, c;
    std::cout << "Enter: ";
    #if defined (SUBLIME)
      std::ifstream ifile("stdin.input");
    #endif
    ISTREAM >> a >> b;
    c = a + b;
    std::cout << a << '+' << b << '=' << c << std::endl;
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T10:31:39.820

我看到的唯一错误是您缺少 int c; 如果这不起作用，可以尝试 return 0; 而不是返回 1；

# objective-c - 根据部分更改 CellReuseIdentifier

> ID：11599068
> 
> 赞同：1
> 
> 时间：2012-07-22T09:20:06.047
> 
> 标签：objective-c, uitableview, xib, reuseidentifier

我有一个 UITableView 和一些具有不同表格视图样式的 .xib。每个 .xib 都有它自己的类，并使用基于该部分的重用标识符进行注册。例如：在我的 viewDidLoad 我有以下内容：

```
UINib *cellStyleOne = [UINib nibWithNibName:@"CellStyleOne" bundle:nil];
[self.tableView registerNib:cellStyleOne forCellReuseIdentifier:@"CellStyleOne"];

UINib *cellStyleTwo = [UINib nibWithNibName:@"CellStyleTwo" bundle:nil];
[self.tableView registerNib:cellStyleTwo forCellReuseIdentifier:@"CellStyleTwo"];

UINib *cellStyleThree = [UINib nibWithNibName:@"CellStyleThree" bundle:nil];
[self.tableView registerNib:cellStyleThree forCellReuseIdentifier:@"CellStyleThree"]; 
```

我如何将这些重用标识符中的每一个分配给我的 cellForRowAtIndexPath 中的一部分单元格而不引起任何问题？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T10:17:15.983

你可以在里面返回任何你喜欢的单元格`cellForRowAtIndexPath:`，只需执行类似的操作

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (indexPath.section == 0)
    {
        //create and return a cell with reuse ID: @"CellStyleOne"
    }
    else 
    {
        //create and return a cell using a different reuse ID
    }
} 
```

# mongodb - 未指定排序顺序时，MongoDB 如何对记录进行排序？

> ID：11599069
> 
> 赞同：131
> 
> 时间：2012-07-22T09:20:09.547
> 
> 标签：mongodb

当我们在没有指定任何排序顺序的情况下运行 Mongo find() 查询时，数据库内部使用什么对结果进行排序？

根据[mongo 网站上的文档](http://www.mongodb.org/display/DOCS/Sorting+and+Natural+Order)：

> 当执行不带参数的 find() 时，数据库会以正向自然顺序返回对象。
> 
> 对于标准表，自然顺序并不是特别有用，因为尽管顺序通常接近插入顺序，但不能保证如此。但是，对于 Capped Collections，自然顺序保证为插入顺序。这可能非常有用。

但是对于标准集合（无上限集合），使用什么字段对结果进行排序？是**_id**字段还是其他什么？

**编辑：**

基本上，我想我想要得到的是，如果我执行以下搜索查询：

```
db.collection.find({"x":y}).skip(10000).limit(1000); 
```

在两个不同的时间点：**t1**和**t2**，我会得到不同的结果集：

1.  当 t1 和 t2 之间没有额外的写入时？
2.  t1 和 t2 之间何时有新的写入？
3.  在 t1 & t2 之间添加了新的索引？

我在一个临时数据库上运行了一些测试，我得到的结果对于所有 3 个案例都是相同的（**是**）——但我想确定并且我确信我的测试用例不是很彻底。

* * *

## 回答 #1

> 赞同：145
> 
> 时间：2012-07-22T09:55:50.060

### 未指定时，默认排序顺序是什么？

默认的内部排序顺序（或[自然顺序](https://docs.mongodb.com/manual/reference/method/cursor.sort/#return-natural-order)）是**未定义**的实现细节。维护顺序是存储引擎的额外开销，并且 MongoDB 的 API 不要求在明确或具有相关[使用限制](https://docs.mongodb.com/manual/core/capped-collections/#restrictions-and-recommendations)`sort()`的固定大小[上限集合](http://docs.mongodb.org/manual/core/capped-collections/)的特殊情况之外的可预测性。对于典型的工作负载，存储引擎需要尝试重用可用的预分配空间，并决定如何最有效地将数据存储在磁盘和内存中。

如果没有任何查询条件，存储引擎将按[自然顺序](http://docs.mongodb.org/manual/reference/glossary/#term-natural-order)（也**就是找到它们的顺序**）返回结果。结果顺序可能与插入顺序一致，但不能保证并且不能依赖此行为（除了上限集合）。

一些可能影响存储（自然）顺序的示例：

*   WiredTiger 在磁盘上使用与内存缓存不同的文档表示形式，因此自然顺序可能会根据内部数据结构而改变。
*   原始的 MMAPv1 存储引擎（在 MongoDB 4.2 中删除）根据填充规则为文档分配记录空间。如果文档超出当前分配的记录空间，则文档位置（和自然顺序）将受到影响。由于删除或移动的文档，新文档也可以插入标记为可重复使用的存储中。
*   复制使用[幂等 oplog](https://docs.mongodb.com/manual/core/replica-set-oplog/)格式在副本集成员之间一致地应用写操作。每个副本集成员都维护本地数据文件，这些文件可以按自然顺序变化，但在应用 oplog 更新时将具有相同的数据结果。

### 如果使用索引怎么办？

如果使用索引，文档将按照它们被发现的顺序返回（它必须匹配插入顺序或 I/O 顺序）。如果使用了多个索引，则顺序在内部取决于在重复数据删除过程中首先标识文档的索引。

如果您想要一个可预测的排序顺序，您**必须**在查询中包含一个显式`sort()`，并为您的排序键提供唯一值。

### 封顶集合如何维护插入顺序？

限制集合中的自然顺序的实现例外是由它们的特殊使用限制强制执行的：文档按插入顺序存储，但现有文档大小不能增加，并且不能显式删除文档。排序是封顶集合设计的一部分，可确保最旧的文档首先“过期”。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-22T09:53:45.863

它以存储的顺序（文件中的顺序）返回，但不能保证它们是插入的顺序。它们不按 _id 字段排序。有时它看起来像是按插入顺序排序的，但它可以在另一个请求中更改。它不可靠。

# android - 从 listView 在活动之间传递数据

> ID：11599072
> 
> 赞同：0
> 
> 时间：2012-07-22T09:20:25.783
> 
> 标签：android, android-emulator

以下代码解析来自 xml web 服务的数据，并应将所选项目的数据从列表视图传递到下一个活动。

该代码运行良好，直到我单击列表项以将数据传递给下一个活动，但随后应用程序崩溃。

我已经尝试了许多修复来解决问题，比如删除 setcontentView 但仍然相同。

```
 public class LastActivity extends ListActivity {
        /** Called when the activity is first created. */
        ListView lv;

    static String UName="name";
    static String UniUrl="description";
    public String val;
    static List<String> links;
    static List<String> names;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        lv=(ListView) findViewById(R.id.list1);
        links=new ArrayList<String>();
        names=new ArrayList<String>();
        try{

            URL url=new URL("http://api.androidhive.info/pizza/?format=xml");
            XmlPullParserFactory factory = XmlPullParserFactory.newInstance();
            factory.setNamespaceAware(false);
            XmlPullParser xpp = factory.newPullParser();
            xpp.setInput(getInputStream(url), "UTF_8");
            boolean insideItem = false;

                    // Returns the type of current event: START_TAG, END_TAG, etc..

            int eventType = xpp.getEventType();

            while (eventType != XmlPullParser.END_DOCUMENT) {

                    if (eventType == XmlPullParser.START_TAG) {

                        if (xpp.getName().equalsIgnoreCase("item")) {

                            insideItem = true;

                        } else if (xpp.getName().equalsIgnoreCase(UName)) {

                            if (insideItem)

                                names.add(xpp.nextText()); //extract the headline
                               // val=xpp.nextText();
                        } else if (xpp.getName().equalsIgnoreCase(UniUrl)) {

                            if (insideItem)

                                links.add(xpp.nextText()); //extract the link of article

                        }
                    }else if(eventType==XmlPullParser.END_TAG && xpp.getName().equalsIgnoreCase("item")){

                        insideItem=false;

                    }

                    eventType = xpp.next(); //move to next element

                }

        }catch (MalformedURLException e) {

            e.printStackTrace();

        } catch (XmlPullParserException e) {

            e.printStackTrace();

        } catch (IOException e) {

            e.printStackTrace();

        }catch (Exception e)
        {
            e.printStackTrace();

        }
        /*ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, names);

                setListAdapter(adapter);*/
                 lv = getListView();
                   ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                            android.R.layout.simple_list_item_1, names);
                    setListAdapter(adapter); 

                    lv.setOnItemClickListener(new OnItemClickListener(){
                        public void onItemClick(AdapterView<?> parent, View view,
                        int position, long id)
                        {

                               String bb=parent.getItemAtPosition(position).toString();
                               Intent i = new Intent(getApplicationContext(), Details.class);
                               //  String x=edt.getText().toString();
                                i.putExtra("name",bb);
                                // starting new activity
                                startActivity(i);

                        }
                    });
            }

    private InputStream getInputStream(URL url) {
        // TODO Auto-generated method stub
        try {
             return url.openConnection().getInputStream();
             } catch (IOException e) {
                   return null;
            }

    }

}

//detail activity:

    public class Details extends LastActivity{
        LastActivity last=new LastActivity();
        TextView tv;
        TextView url;
        String read;
        @Override
        public void onCreate(Bundle savedInstanceState) {
            // TODO Auto-generated method stub
            super.onCreate(savedInstanceState);
            setContentView(R.layout.details);

            tv=(TextView) findViewById(R.id.text);
            //url=(TextView) findViewById(R.id.link);
            Intent intent=getIntent();

                // receiving  data
                String name = intent.getStringExtra("name");
               //String path=intent.getStringExtra("url");

                //Log.e("Second Screen", name + ".");
                //tv.setText(name);
               // url.setText(path);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T09:44:38.977

扩展 `Activity`而不是`LastActivity`在详细信息活动中

```
public class Details extends Activity{
        //LastActivity last=new LastActivity();
       ..... 
```

# ruby-on-rails - Rolify 动态调用未运行或被 heroku 识别

> ID：11599075
> 
> 赞同：2
> 
> 时间：2012-07-22T09:21:08.993
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku

我在使用 Heroku 上的特殊配置提供的功能时遇到错误，即使它在我的机器上运行良好。

具体来说，我使用的是 Rolify 方法 is_admin? 在用户上，这可以通过初始化文件中的配置设置来实现。

到目前为止，我已经使用 Heroku 再次迁移了数据库，重新启动了应用程序并多次刷新了页面。每次重置本地服务器时，如何让 Heroku 像本地机器一样运行配置文件？

错误：

```
 ActionView::Template::Error (undefined method `is_admin?' for #<User:0x0000000524c8e0>):
2012-07-22T09:00:53+00:00 app[web.1]:     1: <% if current_user.is_admin? %> 
```

代码：

```
# config/initializers/rolify.rb
Rolify.configure do |config|
  config.use_dynamic_shortcuts
end 
```

好吧，我又尝试了一件事，它奏效了，但在这里以防万一。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T09:21:08.993

我跑了 $ `heroku run rake db:reset`，它又工作了。不知道为什么，但是哦。

**编辑：**

问题是，如果您在数据库中尚不存在该角色时调用 Rolify 自定义方法，则会导致错误。要解决这个问题，要么使用您需要的所有角色为您的数据库播种，或者更好的是，不要使用动态方法。

例如，而不是： `@user.is_admin?`使用`@user.has_role?(:admin)`它不会破坏。

# php - 如何在 Mac OS X Lion 上从 svn 安装 ZendFramework？

> ID：11599077
> 
> 赞同：0
> 
> 时间：2012-07-22T09:21:31.987
> 
> 标签：php, xcode, macos, svn, zend-framework

我有一台带有 Lion（10.7.4）的 Macbook pro。我是这个环境的新手。我试图在我的 mac 中安装 Zend Framework。我已经安装了 XAMPP 并在 XAMPP 根目录中创建了 svn 和 ZendFramework 文件夹。

```
/Applications/XAMPP/svn/ZendFramework 
```

但是每当我尝试安装 ZendFramework 时，它都会显示一些信息。可能是我之前没有在我的mac中安装svn。我不知道怎么做。或者我不知道是什么问题。我已经安装了 XCODE。我是否需要先安装 svn，然后我必须安装 ZendFramework。如果是这样，我有两个问题-

1.  如何使用 XCODE 安装 svn？
2.  如何使用 svn 安装 ZendFramework？

命令行输出：

```
$ svn checkout http://framework.zend.com/svn/framework/standard/trunk
dyld: Library not loaded: /usr/lib/libpq.5.dylib
  Referenced from: /usr/bin/svn
  Reason: no suitable image found.  Did find:
    /usr/lib/libpq.5.dylib: no matching architecture in universal wrapper
    /usr/lib/libpq.5.dylib: no matching architecture in universal wrapper
Trace/BPT trap: 5 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T16:20:16.387

```
cd /usr/lib
sudo ln -s libpq.5.3.dylib libpq.5.dylib 
```

为我工作。

# python - 注销Windows XP时从python中的Windows服务运行的应用程序停止

> ID：11599085
> 
> 赞同：0
> 
> 时间：2012-07-22T09:22:16.183
> 
> 标签：python, windows, service, logoff

我在python（windows XP）中创建了一个windows服务，在这个服务中我运行一个python服务器程序（带有`p = subprocess.Popen(Arg)`），当我注销服务正在运行但我的应用程序停止时。什么是正确的，其他的？有人能帮我吗？

谢谢

源代码 ：

```
class PythonService(win32serviceutil.ServiceFramework):
    # you can NET START/STOP the service by the following name
    _svc_name_ = "PythonService"
    # this text shows up as the service name in the Service
    # Control Manager (SCM)
    _svc_display_name_ = "server service"
    # this text shows up as the description in the SCM
    _svc_description_ = "This service run a server"

    def __init__(self, args):
        win32serviceutil.ServiceFramework.__init__(self,args)
        # create an event to listen for stop requests on
        self.hWaitStop = win32event.CreateEvent(None, 0, 0, None)
        servicemanager.LogInfoMsg("PythonService Service is starting")

    # core logic of the service   
    def SvcDoRun(self):   
        rc = None      
        PathPython = "c:/python2.6/python.exe"
        Script = "c:/PythonService/service.py"
        sJson = "c:/PythonService/service_static.json"

        Arg = [PathPython,Script,"-c",sJson] 
        process_arreter = 1

        try :
            # run a server
            p = subprocess.Popen(Arg)
        except OSError, why:
            msgerror = "PythonService Service is not running :" + os.strerror(why.errno) + " ["+PathPython+","+Script+","+sJson+"]"
            servicemanager.LogErrorMsg(msgerror)       
            return

        # if the stop event hasn't been fired keep looping
        servicemanager.LogInfoMsg("PythonService Service is running")
        while rc != win32event.WAIT_OBJECT_0:
            # block for 5 seconds and listen for a stop event
            rc = win32event.WaitForSingleObject(self.hWaitStop, 5000)
            if (p.poll()!=None):
                if process_arreter: 
                    servicemanager.LogWarningMsg("Server-Engine is stopped (failed)")
                process_arreter = 0

        if process_arreter:
            try:
                p.terminate()
                servicemanager.LogInfoMsg("Server-Engine is now stopped")
            except :
                pass

    # called when we're being shut down
    def SvcStop(self):
        # tell the SCM we're shutting down
        self.ReportServiceStatus(win32service.SERVICE_STOP_PENDING)
        # fire the stop event
        win32event.SetEvent(self.hWaitStop)
        servicemanager.LogInfoMsg("PythonService Service is stopped")

if __name__ == '__main__':
    win32serviceutil.HandleCommandLine(PythonService)` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T05:34:47.243

```
# first try to get the currently logged on user
# works okay for a straight python app / prog
if sys.platform == 'win32':
     userName = os.getenv('USERNAME')
else: #linux but also not forgetting mac
      userName = os.getenv('USER')

# when code run in a python win service userName in None here!!!!
# so lets get platform specific
if not userName:
    if sys.platform == 'win32':
        import win32api
        userName = win32api.GetUserName()

# do you see 'SYSTEM' here - NOT the currently logged on user 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T05:29:46.200

您的服务以什么用户身份运行，它是否有权访问所有必需的功能？

服务不会在与用户相同的上下文中运行，除非您指定它们具有这些权限。

如果您在 Windows 服务中，您必须指定您的文件路径，并确保它们的路径有权读取和写入，但它没有完成，我无缘无故地拔掉了头发。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-20T19:28:04.040

为了让您的服务即使在您的用户注销时也能继续运行，您需要指定一个`True`在启动它之前总是返回的控制处理程序。

```
if __name__ == "__main__":
    win32api.SetConsoleCtrlHandler(lambda x: True, True)
    win32serviceutil.HandleCommandLine(PythonService) 
```

# mysql - MySQL：如何根据另一个表的结果选择一个值（日期）并将其包含在所述结果中？

> ID：11599087
> 
> 赞同：0
> 
> 时间：2012-07-22T09:22:38.900
> 
> 标签：mysql, sql

我有以下 MySQL 表（简体）

```
DRIVER (D)
----------
id (PK)
name

RACE (RA)
---------
id (PK)
date

RESULT (RE)
-----------
id (PK)
raceid (FK -> RACE.id)
driverid (FK -> DRIVER.id)
bestRound
averageRound 
```

我希望能够列出所有车手及其 numRaces、firstRace、lastRace、bestRound、bestAverageRound 以及他们的 bestRound 和 bestAverageRound 发生的日期。我在最后两个问题上遇到问题，即 bestRound 和 bestAverageRound 的日期。

这是我到目前为止所拥有的：

```
SELECT D.name, COUNT(DISTINCT RE.raceid) AS numRaces, min(RA.date) AS firstRace,
max(RA.date) AS lastRace, min(RE.bestRound) AS bestRound,
min(RE.averageRound) AS bestAverageRound 
FROM DRIVER D
JOIN RESULT RE ON RE.driverid = D.id
JOIN RACE RA ON RA.id = RE.raceid
GROUP BY D.id
ORDER BY D.name 
```

这工作正常。但是我如何继续从 RACE 表中选择 bestRound 和 bestAverageRound 发生的日期？谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T10:04:38.640

试试这个解决方案：

```
SELECT 
    a.*, b.date AS bestRoundDate, c.date AS bestAverageRoundDate
FROM
(
    SELECT 
        d.id, 
        d.name,
        COUNT(DISTINCT re.raceid) AS numRaces,
        MIN(ra.date) AS firstRace,
        MAX(ra.date) AS lastRace,
        MIN(re.bestRound) AS bestRound,
        MIN(re.averageRound) AS bestAverageRound
    FROM driver d
    INNER JOIN result re ON d.id = re.driverid
    INNER JOIN race ra ON re.raceid = ra.id
    GROUP BY d.id, d.name
) a
INNER JOIN
(
    SELECT aa.driverid, aa.bestRound, bb.date
    FROM result aa
    INNER JOIN race bb ON aa.raceid = bb.id
) b ON a.id = b.driverid AND a.bestRound = b.bestRound
INNER JOIN
(
    SELECT aa.driverid, aa.bestAverageRound, bb.date
    FROM result aa
    INNER JOIN race bb ON aa.raceid = bb.id
) c ON a.id = c.driverid AND a.bestAverageRound = c.bestAverageRound
ORDER BY
    a.name 
```

# templating - Mustache/Hogan JS：是否可以在列表中引用父标签？

> ID：11599089
> 
> 赞同：4
> 
> 时间：2012-07-22T09:22:51.527
> 
> 标签：templating, mustache, hogan.js

我有一个用例，我想在 Mustache/Hogan JS 模板的列表循环部分中访问父标签。

例如，这是我的数据结构：

```
var data = {
  users: [{name: "John", age: 100},{name: "Max", age: 80}],
  meta: {membership: "full"}
}; 
```

..这是我的 Mustache/Hogan JS 模板：

```
{{#users}}
h1 Hello there, {{name}}
{{/users}} 
```

..呈现为：

```
<h1>Hello there, John</h1>
<h1>Hello there, Max</h1> 
```

这一切都很好，但是我可以访问**{{#users}...{{/users}}**部分中的**meta.membership**父变量吗？似乎标签仅限于本地上下文，因此在迭代用户时无法输出 meta.membership 标签的值。

 **理想情况下，我想知道这样的事情是否可行：

```
{{#users}}
h1 Hello there, {{name}}
p You have a {{meta.membership}} membership
{{/users}} 
```

期望的结果：

```
<h1>Hello there, John</h1>
<p>You have a full membership</p>
<h1>Hello there, Max</h1>
<p>You have a full membership</p> 
```

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T13:12:00.060

[佩卡克](http://en.wikipedia.org/wiki/User_error)！

事实证明，Hogan JS 确实支持[Context Bubbling 规范](https://github.com/mustache/spec/blob/master/specs/sections.yml)，因此根据问题我想要的输入实际上会评估为我想要的输出！:) 我只是在让它按预期工作时遇到问题，因为我正在处理一个高度嵌套的数据集和几个 Mustache，所以我在此过程中犯了一些愚蠢的错误，导致我的输出为空白。

现在一切都好-尽管我想我最好去找一个 Hogan 调试器，以免将来进一步沮丧... ;)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-22T09:27:39.087

```
{{#users}}
h1 Hello there, {{name}}
p You have a {{#meta.membership}} membership
{{/users}} 
```

**或者**

```
{{#users #meta}}
h1 Hello there, {{name}}
p You have a {{membership}} membership
{{/users}} 
```

试试看...可以工作，因为数据数组的结构允许它工作**

# c# - 如何为 ASP.Net 中的 Repeater 控件添加分页功能？

> ID：11599109
> 
> 赞同：0
> 
> 时间：2012-07-22T09:25:41.140
> 
> 标签：c#, asp.net, sql-server-2008-r2, sqldatasource

我有一个 asp.net 中继器控件。我必须在中继器中只显示 5 行。我在 Google 中搜索过它，但大多数资源都在谈论如何使用 DataSet 来实现。就我而言，我使用的是 SqlDataSource。**所以我可以在这个Repeater控件中进行分页吗？**

ASP.NET 代码：

```
<asp:Repeater ID="Repeater3" runat="server" DataSourceID="SqlDataSource3">
                    <HeaderTemplate>
                        <div>
                        <table border="1">
                            <thead>
                                <tr>
                                    <td colspan="3">
                                        <center> <strong>Safety Quizzes Record</strong> </center>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <center> <strong>Quiz Title</strong> </center>
                                    </td>
                                    <td>
                                        <center> <strong>Date & Time</strong> </center>
                                    </td>
                                    <td>
                                        <center> <strong>Score</strong> </center>
                                    </td>
                                </tr>
                            </thead>

                    </HeaderTemplate>
                    <ItemTemplate>
                        <tr>
                            <td>
                                <p>
                                    <%# Eval("Title") %>
                                </p>
                            </td>
                            <td>
                                <p>
                                    <%# Eval("DateTimeComplete") %>
                                </p>
                            </td>
                            <td>
                                <p>
                                    <%# Eval("Score") %>
                                </p>
                            </td>
                        </tr>
                    </ItemTemplate>
                    <FooterTemplate>
                        </table>
                        </div>
                    </FooterTemplate>
                </asp:Repeater>
                <asp:SqlDataSource ID="SqlDataSource3" runat="server" 
                    ConnectionString="<%$ ConnectionStrings:testConnectionString %>" SelectCommand="SELECT     dbo.Quiz.Title, dbo.UserQuiz.DateTimeComplete, dbo.UserQuiz.Score
FROM         dbo.employee INNER JOIN
                      dbo.UserQuiz ON dbo.employee.Username = dbo.UserQuiz.Username INNER JOIN
                      dbo.Quiz ON dbo.UserQuiz.QuizID = dbo.Quiz.QuizID
WHERE     (dbo.employee.Username = @Username)">
                    <SelectParameters>
                        <asp:Parameter Name="Username" />
                    </SelectParameters>
                </asp:SqlDataSource> 
```

**更新：**

我想要的是在中继器中只显示 5 个项目，其他项目将在中继器的其他页面上列出。那么如上所述，我如何使用 SqlDataSource 进行分页。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T09:34:22.913

该`Repeater`控件不支持开箱即用的分页。

但是，您可以实现它，但它需要您手动编码。

我想建议您将控件更改`Repeater`为`ListView`控件

差异：

*   [中继器](http://msdn.microsoft.com/en-us/library/x8f2zez5.aspx)。此控件不支持开箱即用的分页、更新、插入或删除操作，如果您想要这些功能，则需要手动对其进行编码。

*   [列表视图](http://msdn.microsoft.com/en-us/library/bb398790.aspx)。这是所有数据绑定控件中最灵活的。它基于`Repeater`和`DataList`控件等模板。它确实支持 CRUD 操作，自动将操作映射到您的数据源控件。它确实支持服务器分页，您几乎可以自定义所有内容

顺便说一句，由于您使用的是 a `SqlDataSource`，因此您必须手动将分页代码添加到您的查询或存储过程中，如果您使用 a`LinqDataSource`或 an则可以更改该行为`EntityDataSource`

这是一个简化的`ListView`标记：

```
 <asp:ListView runat="server" ID="lv"
        DataSourceID="lds" DataKeyNames="emp_id"
        EnableModelValidation="false"
        EnablePersistedSelection="false" 
    >
        <LayoutTemplate>
            <br />
            <br />
            A static header
            <div runat="server" id="itemPlaceHolder"></div>
            <br />
            <asp:DataPager runat="server" PageSize="4">
                <Fields>
                    <asp:NextPreviousPagerField 
                        ButtonType="Button" 
                        ShowFirstPageButton="true"
                        ShowLastPageButton="true"
                    />
                </Fields>
            </asp:DataPager>
        </LayoutTemplate>
        <ItemTemplate>
            <div style="background-color:Gray">
                First Name
                <div><asp:Label runat="server" ID="lbl" Text='<%# Eval("fname") %>'></asp:Label></div>
                <br />
                <asp:GridView ID="GridView1" runat="server" DataSource='<%# Eval("Achivements") %>' />
                <br />
                <asp:LinkButton ID="LinkButton1" Text="Select" CommandName="Select" runat="server" />
                <asp:LinkButton ID="LinkButton2" Text="Edit" CommandName="Edit" runat="server" />
                <asp:LinkButton ID="LinkButton4" Text="Delete" CommandName="Delete" runat="server" />
            </div>
        </ItemTemplate>
        <ItemSeparatorTemplate>
            <hr />
        </ItemSeparatorTemplate>
    </asp:ListView> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T09:35:56.703

[请使用链接http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.pageddatasource.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.pageddatasource.aspx)中显示的 PagedDataSource

# xml - 如何提取 XML 文件的特定元素？

> ID：11599111
> 
> 赞同：2
> 
> 时间：2012-07-22T09:26:07.557
> 
> 标签：xml, linux, bash

我有一个包含某些语言文本的 XML 文件。我想只用一种语言提取文本并将它们存储在一个单独的文件中。我怎样才能做到这一点？这是我的文件的一些开头行：

```
<?xml version="1.0" encoding="UTF-8"?>
<tmx version="1.4b">
  <header creationtool="ORESAligner" creationtoolversion="1.0" datatype="plaintext" segtype="paragraph" adminlang="en-us" srclang="EN" o-tmf="ORES"/>
  <body>
    <tu tuid="55_100:6">
      <prop type="session">55</prop>
      <prop type="committee">3</prop>
      <tuv xml:lang="EN">
        <seg>RESOLUTION 55/100</seg>
      </tuv>
      <tuv xml:lang="AR">
        <seg>القرار 55/100</seg>
      </tuv>
      <tuv xml:lang="ZH">
        <seg>第55/100号决议&lt;/seg>
      </tuv>
      <tuv xml:lang="FR">
        <seg>RÉSOLUTION 55/100</seg>
      </tuv>
      <tuv xml:lang="RU">
        <seg>РЕЗОЛЮЦИЯ 55/100</seg>
      </tuv>
      <tuv xml:lang="ES">
        <seg>RESOLUCIÓN 55/100</seg>
      </tuv>
    </tu>
  </body>
</tmx> 
```

现在说我只想要英文文本。所需的输出应该是：

```
RESOLUTION 55/100 
```

* * *

我应该如何使用这个脚本？我是处理 XML 文件的新手，不知道如何使用这个 XPath 表达式。据我所知，xmlstarlet 能够修改 XML 文件。但我不知道怎么...？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T00:35:26.033

### 用 XmlStarlet 提取英文节点

您可以使用xmlstarlet 使用*XPath*查询[您](http://www.w3.org/TR/xpath/)[的 XML](http://xmlstar.sourceforge.net/doc/UG/xmlstarlet-ug.html#d0e270)，并仅返回具有英语属性的节点。例如：

```
$ xmlstarlet sel -t -v "//tuv[@xml:lang='EN']/seg/text()" /tmp/foo
RESOLUTION 55/100 
```

### 将节点值存储在具有语言扩展名的文件中

如果您想将这些值存储在某个基于语言的文件中，那么您可以将找到的每个节点的值转储到具有基于语言的扩展名的文件中（例如，“EN”表示英语）。

```
# Don't overwrite LANG; use some other variable.
language='EN'

xmlstarlet sel \
    --noblanks \
    --text \
    --template \
    --match "//tuv[@xml:lang='${language}']" \
    --value-of seg \
    -n \
    /tmp/foo > "/tmp/foo.$language" 
```

在此示例中，所有匹配节点的内容将写入**/tmp/foo.EN**以进行进一步处理。您当然可以调整 shell 重定向以适应任何其他要求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T11:16:56.090

如果 xml 文件格式正确，可以使用简单的 sed 命令：

```
sed -n '/xml:lang="EN"/ {
N
s_.*<seg>\([^<]*\)</seg>_\1_p
}
' input_file 
```

描述：

```
sed -n '/xml:lang="EN"/ {           # 1) exec sed with no print flag, find a line
                                    # matching xml:lang="EN"
N                                   # 2) read the next line
s_.*<seg>\([^<]*\)</seg>_\1_p       # 3) replace everything until </seg> with 
                                    # the text between <seg> and </seg> and print
}
' input_file 
```

如果要保留`seg`标签，可以更改第三步：

```
sed -n '/xml:lang="EN"/ {
N
s_.*\(<seg>[^<]*</seg>\)_\1_p
}
' input_file 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T11:49:23.640

以下 XPath 表达式提取您要查找的信息：

```
/tmx/body/tu/tuv[@xml:lang='EN']/seg 
```

有许多工具允许您使用 XPath 表达式处理 XML 文件。如果您从命令行工作，您可以查看`xmlsh`.

很难说出需求的上下文，但我想随着它超出此处给出的简单案例，您会想要查看 XSLT 和/或 XQuery。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-29T18:40:43.990

您可以像这样使用命令行工具`xml_grep`：

```
xml_grep --cond "tu/tuv[@xml:lang='EN']/seg" --text_only file.tmx 
```

to 的参数`--cond`是一个类似 XPath 的表达式。它的语法类似于`xstarlet`etc. 所期望的，但并不完全相同。

# dart - 如何在 Dart 中加载图像

> ID：11599113
> 
> 赞同：7
> 
> 时间：2012-07-22T09:26:23.337
> 
> 标签：dart

我正在尝试 Dart 语言和 HTML5 Canvas 元素，但我遇到了一个问题。我不知道如何在 Dart 中加载图像。我可以得到 CanvasRenderingContext2D 并且我可以调用 fillText() 和 fillRect() 并且一切正常，但我试图弄清楚如何加载图像并使用 drawImage 绘制。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-22T13:41:36.547

创建并加载图像

```
ImageElement image = new ImageElement(src: "my_image.png");
image.onLoad.listen((e) {
    // Draw once the image is loaded
}); 
```

加载后在画布上绘制上图

```
context.drawImage(image, destX, destY); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-06-01T20:35:33.560

较新的图像加载语法：

```
readFile() {
    ImageElement image = new ImageElement(src: "plant.png");
    document.body.nodes.add(image);
    image.onLoad.listen(onData, onError: onError, onDone: onDone, cancelOnError: true);
  }

  onData(Event e) {
    print("success: ");
  }

  onError(Event e) {
    print("error: $e");
  }

  onDone() {
    print("done");
  } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-28T14:12:49.517

这是另一种方法：

```
void main() {
  ImageElement image = new ImageElement(src: "pic.png");
  img.onLoad.listen(onData);
  img.onError.listen(onError);
}

void onData(Event e) {
  print("Load success");
}

void onError(Event e) {
  print("Error: $e");
} 
```

# php - 使用 Yoast Wordpress SEO API 设置自定义 SEO 标题

> ID：11599114
> 
> 赞同：1
> 
> 时间：2012-07-22T09:26:29.617
> 
> 标签：php, api, plugins, wordpress

我刚刚在我的网站上安装了这个插件，这意味着我之前设置的自定义标题不再有效。这是简短的 Wordpress SEO API 文档的链接：[http://yoast.com/wordpress/seo/api-docs/]

以前，我是这样做的：

```
$pagetitle = '' . $design['name'] . ' | Free Design from My Site'; 
```

我有一个自定义 URL 重写，它采用 WP 页面 /design/ 并将设计名称附加到 /design/design-name 所以现在我已经安装了 WP SEO，页面标题是 /design/ 的标题是和不是t 具体。

根据上面链接中的文档，我尝试了这个：

```
function wpseo_design_detail_title($pagetitle) {
$pagetitle = $design['name'] . ' | Free Web Template from My Site';
}
add_filter( 'wpseo_title', 'wpseo_design_detail_title' ); 
```

这确实删除了以前的 /design/ 标题，但它只有站点 URL（即页面标题为空白）。

我可能错过了一些非常简单的东西，对吧？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-01T05:11:46.033

这是如何完成的：

```
function YourFunctionName( $title ) {

    $title = 'Your Webpage Title';

    return $title;

}
add_filter( 'wpseo_title', 'YourFunctionName' ); 
```

但是@user1502679 建议，您可以使用 WordPress 的`wp_title`过滤器（但它仅在禁用 Yoast 的 WordPress SEO 时才有效）：

```
function YourFunctionName( $title, $sep ) {

    $title = 'Your Webpage Title';

    return $title;

}
add_filter( 'wp_title', 'YourFunctionName' ); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-22T11:25:33.000

为什么你使用 Yoast？只需向 wp_title 添加一个过滤器

# oop - 创建一个只有两个继承方法的小类是不是一个糟糕的设计？

> ID：11599120
> 
> 赞同：0
> 
> 时间：2012-07-22T09:27:17.223
> 
> 标签：oop, inheritance

我想创建一个有两个方法的类，没有别的目的，我可以创建两个继承这些方法的子类。这个类不能单独运行。这是一个糟糕的编程设计或习惯吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T09:53:50.450

甚至有些类什么都不做，除了让其他类从中派生。超类本身是否可以拥有有用的实例并不重要。只存在于其他类派生的类通常称为抽象类；某些语言（例如 C++）还具有语法功能，允许编译器在您尝试从抽象类创建对象时给出错误。因此，拥有这样的课程并不会那么糟糕。

除此之外，什么是“坏习惯”？如果设置使代码更容易理解，那么它就不错了。

当然，如果您打算派生的两个类真的没有任何共同点，而这两个方法只是“嘿，我注意到那个类中的 10 行代码与另一个类中的这 10 行代码相同” ，然后把它变成一个共同的超类可能会让人感到困惑，而不仅仅是帮助。类仍应具有某种形式的关系。如果只是共享一些随机出现的代码，那么独立函数可能是更好的选择。

基本上，查看类的名称。如果您的新超类的名称类似于“一些非常通用的名称，因为我不知道它是什么”，那么它可能不是“好的设计”。另一方面，如果您对超类有一个专有名称，并且派生类的名称仍然与超类具有“某种”关系，那么这可能不是一件坏事。

另一个“好”的东西的强烈暗示是当你开始使用指向超类的指针时，因为你不在乎你是在处理一个还是另一个子类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T09:41:46.673

这是一个好习惯，它可以更好地组织功能。另一个原因是你只要看一下继承树就知道它与两个函数类有关。它没有太大的危害。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T02:15:50.793

1.  一般来说，没有固有的好坏之分。这在很大程度上取决于具体情况。但是，一般来说，您应该始终尝试遵循面向对象的原则。例如，无论何时创建一个类，无论是抽象的还是具体的，该类都应该同时具有**data**和**behavior**。这条规则非常重要，它一直是面向对象的基础。一个没有数据的类，只是一堆方法（这是过程编程，不是 OO）。没有行为的类是一堆变量（同样是过程的，而不是 OO）。因此，将数据和行为结合在一起很重要。但是，它们之间应该有逻辑关系，而不是随意放在一起。例如，一个方法应该以某种方式访问​​数据。

当然，这个规则也有偏差。例如，您可能在静态类中只有一堆方法（如 Java 中的 Math 类），或者在接口中只有一堆常量。但是，它们是例外而不是规则。他们在那里，出于必要，为了方便。在严格的面向对象的意义上，它们不是真正的类。

所以，要始终以正确的原则为目标，只有在别无他法的情况下才会偏离，而且只能作为例外，而不是作为规则。

1.  上一点是指如何构造一个类。对于设计类之间的关系，同样，应该遵循逻辑路径。仔细思考你正在处理的每个概念，看看每个概念作为一个类是否有意义，然后看看这些类之间的关系是什么。如果看起来你有三个可以在继承中组织的概念 - 两个派生自父级的类，就这样吧。如果父类有两个方法，没关系。即使它有一种方法，它仍然可以。只要它代表一个连贯的逻辑单元。

# c - 将库中的外部源文件添加到 Eclipse-CDT 中的项目中

> ID：11599121
> 
> 赞同：1
> 
> 时间：2012-07-22T09:27:27.317
> 
> 标签：c, eclipse, eclipse-cdt

我有一个项目，我尝试使用 Eclipse-CDT 进行编译。该项目依赖于带有头文件和源文件的库。如何在 Eclipse 中配置项目，以便它将库中所需的源文件与项目一起编译？

使用makefile我使用：

```
SRC+=lib_source.c 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T22:08:47.440

您可以添加链接的源文件。选择项目属性，然后在左侧面板中选择 c++ general。在它下面选择路径和符号。现在在右侧面板选项卡中选择源位置并添加链接的源文件夹。包括您需要在“包含”中定义（在 c++ 构建下您会找到设置）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-11T15:40:36.860

另一种方法是使用操作系统将您的库添加到项目中。然后，Eclipse 将所有源文件（包括库文件）视为项目的一部分，因此编译任何需要它的文件，即使它们在库中也是如此。这种设置允许将库源保存在与项目源代码不同的 git 存储库中。您可以记录库的 git commit 以提供库版本控制，以便在一个项目中改进库不会破坏所有其他项目。该设置依赖于操作系统以对 eclipse 完全透明的方式链接目录的能力——在 windows 中使用 mklink 命令。

在 Windows 中，步骤是

1.  将您的库文件放在不与 .git 混合的干净工作区中（您可以将 .git 放在父目录中，因为 egit 设置它）
2.  在管理员模式下使用 cmd 窗口将项目目录中的链接添加到库目录。
3.  从 Eclipse 按 F5 t 确保您的项目与磁盘上的内容匹配，然后设置 git 以忽略您的库目录。
4.  除非您仍在调整该库，否则将您的库文件属性设置为只读访问。
5.  设置您的项目包含路径以将项目子目录包含在您的项目中。

我不记得为什么我放弃了 eclipse 链接目录；我认为是包括不断打破。到目前为止，mklink 方法运行良好。

我有一个关于如何设置的 pdf 教程——但我是论坛的新手，看不到如何附加文件。

# backbone.js - 骨干集合：检索集合的不同值

> ID：11599123
> 
> 赞同：4
> 
> 时间：2012-07-22T09:27:37.160
> 
> 标签：backbone.js, underscore.js

我有模型的主干集合，并想检索某个属性的不同值

如果我已将以下数据加载到我的集合中：

```
[{brand:'audi',id:'1234'},
{brand:'audi',id:'3456'},
{brand:'bmw',id:'3456'}] 
```

我现在想从该系列中获得不同的品牌。结果应该是：

```
['audi','bmw'] 
```

查看 Backbone 和 Underscore API，我看不到任何明显的实现。我目前的方法是使用像[jslinq这样的库](http://jslinq.codeplex.com/)

我是否遗漏了任何明显的东西，或者有人有比 jslinq 更好的建议？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-22T09:38:32.680

您可以使用[pluck](http://underscorejs.org/#pluck)然后使用[uniq](http://underscorejs.org/#uniq)（例如：http: [//jsfiddle.net/sCVyN/5/](http://jsfiddle.net/sCVyN/5/)）

采摘

> map 最常见用例的一个方便版本：提取属性值列表。

独特的

> 生成数组的无重复版本，`===`用于测试对象是否相等。如果您事先知道数组已排序，则为 isSorted 传递 true 将运行更快的算法。如果要基于转换计算唯一项，请传递迭代器函数。

# linux - 如何在 bash 脚本中使用 wget 命令下载目录中的文件？

> ID：11599126
> 
> 赞同：0
> 
> 时间：2012-07-22T09:27:51.990
> 
> 标签：linux, bash

我想在 bash 脚本文件中使用 linux 的“wget”命令下载文件列表。问题是当我试图将目录更改为我家中的另一个子目录时，它不起作用，并且 cd 命令后的 wget 将下载我的主目录中的文件而不是所需的子目录

```
mkdir -m 777 "dbback2012"
cd "dbback2012"
wget -r [FTP URL] 
```

问题是通过 wget 下载的文件位于主目录而不是“dbback2012”目录中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T09:32:05.150

代码没有问题，你要么

*   没有向我们展示真实的代码
*   脚本在其他地方执行，检查工作目录：`pwd`
*   脚本未能创建目录`mkdir -m 777 "dbback2012" || (echo "ooops"; exit 1)`

# facebook - facebook post api fied description 是否支持 html

> ID：11599130
> 
> 赞同：0
> 
> 时间：2012-07-22T09:28:58.313
> 
> 标签：facebook

描述字段是否支持html标签

```
$facebook->api("/me/feed", "post", array(
    message => $des,
    picture => $img,
    link => $link,
    caption => $title ,
    description =>$desc
)); 
```

我希望有描述为

```
$desc="hai to <strong>All</strong><br>I am on the nextline"; 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T16:46:26.390

不，facebook 不会解释描述字段中的格式（只是在您发送时显示），并且您不能放置换行符。如果您想为消息添加额外的链接，您可以使用[Post 对象](http://developers.facebook.com/docs/reference/api/post/)的属性字段。

# c# - 对象内存重新定位？

> ID：11599133
> 
> 赞同：1
> 
> 时间：2012-07-22T09:29:48.713
> 
> 标签：c#, .net, memory-management, .net-4.0, clr

有没有办法*告诉*.net 运行时，*而不是*在内存中重新定位对象？

恕我直言 - 对象可以在以下时间重新定位`GC`：

*   从一代到另一代
*   被移到队列中`finilization-queue`。`f-reachable`
*   否则（*也许是优化机制？*）。

    另外，我认为不可变（字符串）每次都会自动重新创建，因此必须在新位置创建它们。

*（只是一个理论问题）*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T09:56:09.267

*作为一个实现细节*，.Net 框架可以在垃圾回收的最后阶段移动内存中的对象。但这并不一定意味着在世代之间移动：在执行第 2 代 GC 时，第 2 代中的对象将被移动，即使它们不会改变世代（因为没有地方可以超越第 2 代）。

finalization queue 和 f-reachable queue 与此无关，它们只包含对对象的引用，而不是对象本身。

我不知道这与不可变对象有什么关系。运行时不会对它们进行任何特殊处理（字符串除外）。

告诉运行时不要重定位对象（也称为“固定”对象）是一个不寻常的要求，应该有一个非常好的理由，因为它会对 GC 的性能产生负面影响。要在不安全代码中临时固定对象，可以[使用`fixed`语句](http://msdn.microsoft.com/en-us/library/f58wzh21.aspx). 要永久执行此操作或从安全代码执行此操作，您可以使用[`GCHandle.Alloc()`](http://msdn.microsoft.com/en-us/library/1246yz8f), 指定`GCHandleType.Pinned`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T09:38:57.327

固定对象告诉 gc 不要移动它以创建大量可用空间。它们是使用[Fixed](http://msdn.microsoft.com/en-us/library/f58wzh21%28v=vs.110%29.aspx)关键字创建的。

**有用的场景**

让我们考虑一个场景，我们需要将一个 int 数组传递给某个非托管函数，并且非托管函数读取数组的值并进行一些更改。如果数组未固定，则更改的值将无法写回，因为指向数组的指针已被 GC 移动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T09:34:03.707

不确定这在问题上下文中是否有用，但在托管场景中，您可以使用[Marshall](http://msdn.microsoft.com/en-us/library/asx0thw2)类来分配内存，将结构移动到分配的内存并取回指针。这个结构不会被 gc 移动。稍后您可以使用之前的指针从分配的内存中检索结构。

# image-processing - 胡七不变矩在物体识别中的意义

> ID：11599139
> 
> 赞同：3
> 
> 时间：2012-07-22T09:30:19.470
> 
> 标签：image-processing, statistics, computer-vision, invariants

我的问题是关于胡七不变矩的含义。

据我所知，有些时刻是有意义的；即零阶是指图像的区域。同样如[http://mathworld.wolfram.com/topics/Moments.html](http://mathworld.wolfram.com/topics/Moments.html)中所述，可以从不同的时刻顺序中提取许多特征。但问题是胡矩提取了哪些特征？我知道他工作的重点是这些特征对于 RTS（旋转、平移和缩放）是不变的。但我的问题是这些特征描述了什么？这些特征与图像中的物体有什么关系？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T17:46:42.617

Hu 矩于 1962 年在“通过矩不变量进行视觉模式识别”一文中提出，与从中提取它们的形状的物理方面没有直接对应关系。相反，它们在数学上被表述为在平移、缩放和旋转下是不变的。

# html - 如何实现facebook手机网站按钮菜单滚动效果？

> ID：11599140
> 
> 赞同：0
> 
> 时间：2012-07-22T09:30:32.353
> 
> 标签：html, css, jquery-mobile, css-float

当您从带有时间线的个人资料的移动设备上打开 facebook 移动网站时，会出现包含以下项目的菜单：“关于”、“照片”、“朋友”、“订阅”、“地图”...

您可以在移动设备上滑动菜单项。

我如何使用 html、css、js 来完成此操作以适用于所有设备？

[样本](http://m.facebook.com/apps/the-farmer?fb_source=search&ref=search#!/jackie.yaacov?__user=625134695)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T12:02:27.143

[这是使用 JQuery 创建移动触摸滑动面板](http://www.zackgrossbart.com/hackito/touchslider/)的精彩教程。源代码也可以在 github- [jstouchslide](https://github.com/zgrossbart/jstouchslide)上找到。

# sql - WITH 关键字是必需的

> ID：11599142
> 
> 赞同：3
> 
> 时间：2012-07-22T09:31:11.733
> 
> 标签：sql, sql-server

运行以下 SQL 查询时 -

```
INSERT INTO Countries ('sno', 'Name' ) VALUES
(1, 'Afghanistan'),
(2, 'Albania'),
(3, 'Algeria'),
(4, 'American Samoa'),
(5, 'Andorra'),
(6, 'Angola'),
(7, 'Anguilla'),
(8, 'Antarctica'),
(9, 'Antigua and Barbuda'),
(10, 'Argentina'),
(11, 'Armenia'),
(12, 'Armenia'),
(13, 'Aruba'),
(14, 'Australia'),
(15, 'Austria'),
(16, 'Azerbaijan'),
(17, 'Azerbaijan'),
(18, 'Bahamas'),
(19, 'Bahrain'),
(20, 'Bangladesh'),
(21, 'Barbados'),
(22, 'Belarus'),
(23, 'Belgium'),
(24, 'Belize'),
(25, 'Benin'),
(26, 'Bermuda'),
(27, 'Bhutan'),
(28, 'Bolivia'),
(29, 'Bosnia and Herzegovina'),
(30, 'Botswana'),
(31, 'Bouvet Island'),
(32, 'Brazil'),
(33, 'British Indian Ocean Territory'),
(34, 'Brunei Darussalam'),
(35, 'Bulgaria'),
(36, 'Burkina Faso'),
(37, 'Burundi'),
(38, 'Cambodia'),
(39, 'Cameroon'),
(40, 'Canada'),
(41, 'Cape Verde'),
(42, 'Cayman Islands'),
(43, 'Central African Republic'),
(44, 'Chad'),
(45, 'Chile'),
(46, 'China'),
(47, 'Christmas Island'),
(48, 'Cocos (Keeling) Islands'),
(49, 'Colombia'),
(50, 'Comoros'),
(51, 'Congo'),
(52, 'Congo, The Democratic Republic of The'),
(53, 'Cook Islands'),
(54, 'Costa Rica'),
(55, 'Cote Divoire'),
(56, 'Croatia'),
(57, 'Cuba'),
(58, 'Cyprus'),
(59, 'Cyprus'),
(60, 'Czech Republic'),
(61, 'Denmark'),
(62, 'Djibouti'),
(63, 'Dominica'),
(64, 'Dominican Republic'),
(65, 'Easter Island'),
(66, 'Ecuador'),
(67, 'Egypt'),
(68, 'El Salvador'),
(69, 'Equatorial Guinea'),
(70, 'Eritrea'),
(71, 'Estonia'),
(72, 'Ethiopia'),
(73, 'Falkland Islands (Malvinas)'),
(74, 'Faroe Islands'),
(75, 'Fiji'),
(76, 'Finland'),
(77, 'France'),
(78, 'French Guiana'),
(79, 'French Polynesia'),
(80, 'French Southern Territories'),
(81, 'Gabon'),
(82, 'Gambia'),
(83, 'Georgia'),
(84, 'Georgia'),
(85, 'Germany'),
(86, 'Ghana'),
(87, 'Gibraltar'),
(88, 'Greece'),
(89, 'Greenland'),
(90, 'Greenland'),
(91, 'Grenada'),
(92, 'Guadeloupe'),
(93, 'Guam'),
(94, 'Guatemala'),
(95, 'Guinea'),
(96, 'Guinea-bissau'),
(97, 'Guyana'),
(98, 'Haiti'),
(99, 'Heard Island and Mcdonald Islands'),
(100, 'Honduras'),
(101, 'Hong Kong'),
(102, 'Hungary'),
(103, 'Iceland'),
(104, 'India'),
(105, 'Indonesia'),
(106, 'Indonesia'),
(107, 'Iran'),
(108, 'Iraq'),
(109, 'Ireland'),
(110, 'Israel'),
(111, 'Italy'),
(112, 'Jamaica'),
(113, 'Japan'),
(114, 'Jordan'),
(115, 'Kazakhstan'),
(116, 'Kazakhstan'),
(117, 'Kenya'),
(118, 'Kiribati'),
(119, 'Korea, North'),
(120, 'Korea, South'),
(121, 'Kosovo'),
(122, 'Kuwait'),
(123, 'Kyrgyzstan'),
(124, 'Laos'),
(125, 'Latvia'),
(126, 'Lebanon'),
(127, 'Lesotho'),
(128, 'Liberia'),
(129, 'Libyan Arab Jamahiriya'),
(130, 'Liechtenstein'),
(131, 'Lithuania'),
(132, 'Luxembourg'),
(133, 'Macau'),
(134, 'Macedonia'),
(135, 'Madagascar'),
(136, 'Malawi'),
(137, 'Malaysia'),
(138, 'Maldives'),
(139, 'Mali'),
(140, 'Malta'),
(141, 'Marshall Islands'),
(142, 'Martinique'),
(143, 'Mauritania'),
(144, 'Mauritius'),
(145, 'Mayotte'),
(146, 'Mexico'),
(147, 'Micronesia, Federated States of'),
(148, 'Moldova, Republic of'),
(149, 'Monaco'),
(150, 'Mongolia'),
(151, 'Montenegro'),
(152, 'Montserrat'),
(153, 'Morocco'),
(154, 'Mozambique'),
(155, 'Myanmar'),
(156, 'Namibia'),
(157, 'Nauru'),
(158, 'Nepal'),
(159, 'Netherlands'),
(160, 'Netherlands Antilles'),
(161, 'New Caledonia'),
(162, 'New Zealand'),
(163, 'Nicaragua'),
(164, 'Niger'),
(165, 'Nigeria'),
(166, 'Niue'),
(167, 'Norfolk Island'),
(168, 'Northern Mariana Islands'),
(169, 'Norway'),
(170, 'Oman'),
(171, 'Pakistan'),
(172, 'Palau'),
(173, 'Palestinian Territory'),
(174, 'Panama'),
(175, 'Papua New Guinea'),
(176, 'Paraguay'),
(177, 'Peru'),
(178, 'Philippines'),
(179, 'Pitcairn'),
(180, 'Poland'),
(181, 'Portugal'),
(182, 'Puerto Rico'),
(183, 'Qatar'),
(184, 'Reunion'),
(185, 'Romania'),
(186, 'Russia'),
(187, 'Russia'),
(188, 'Rwanda'),
(189, 'Saint Helena'),
(190, 'Saint Kitts and Nevis'),
(191, 'Saint Lucia'),
(192, 'Saint Pierre and Miquelon'),
(193, 'Saint Vincent and The Grenadines'),
(194, 'Samoa'),
(195, 'San Marino'),
(196, 'Sao Tome and Principe'),
(197, 'Saudi Arabia'),
(198, 'Senegal'),
(199, 'Serbia and Montenegro'),
(200, 'Seychelles'),
(201, 'Sierra Leone'),
(202, 'Singapore'),
(203, 'Slovakia'),
(204, 'Slovenia'),
(205, 'Solomon Islands'),
(206, 'Somalia'),
(207, 'South Africa'),
(208, 'South Georgia and The South Sandwich Islands'),
(209, 'Spain'),
(210, 'Sri Lanka'),
(211, 'Sudan'),
(212, 'Suriname'),
(213, 'Svalbard and Jan Mayen'),
(214, 'Swaziland'),
(215, 'Sweden'),
(216, 'Switzerland'),
(217, 'Syria'),
(218, 'Taiwan'),
(219, 'Tajikistan'),
(220, 'Tanzania, United Republic of'),
(221, 'Thailand'),
(222, 'Timor-leste'),
(223, 'Togo'),
(224, 'Tokelau'),
(225, 'Tonga'),
(226, 'Trinidad and Tobago'),
(227, 'Tunisia'),
(228, 'Turkey'),
(229, 'Turkey'),
(230, 'Turkmenistan'),
(231, 'Turks and Caicos Islands'),
(232, 'Tuvalu'),
(233, 'Uganda'),
(234, 'Ukraine'),
(235, 'United Arab Emirates'),
(236, 'United Kingdom'),
(237, 'United States'),
(238, 'United States Minor Outlying Islands'),
(239, 'Uruguay'),
(240, 'Uzbekistan'),
(241, 'Vanuatu'),
(242, 'Vatican City'),
(243, 'Venezuela'),
(244, 'Vietnam'),
(245, 'Virgin Islands, British'),
(246, 'Virgin Islands, U.S.'),
(247, 'Wallis and Futuna'),
(248, 'Western Sahara'),
(249, 'Yemen'),
(250, 'Yemen'),
(251, 'Zambia'),
(252, 'Zimbabwe'); 
```

在 microsoft sql server 上可以看到以下错误代码-

消息 215，级别 16，状态 1，行 1 为不是函数的对象“国家/地区”提供的参数。如果将参数用作表提示，则需要 WITH 关键字。

请帮忙分享原因？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-22T09:32:17.250

不要在列名中使用单引号。

```
INSERT INTO Countries ([sno], [Name])... 
```

您可以正常使用括号。或者，如果 SET QUOTED_IDENTIFIER 为 ON，您可以使用双引号`"`（默认情况下应该是）

目前，您有字符串文字，这导致 SQL Server 解释代码的方式与您期望的不同

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T14:12:39.067

您可以将所有带括号的部分放在一起：[SQL Fiddle](http://sqlfiddle.com/#!3/25deb/1)

```
INSERT INTO Countries VALUES 
```

因此，这不是明确的，也不是最佳实践（参见@AaronBertrand 的评论）——但仍然是一种替代方法。

# solr - 识别慢速 solr 查询

> ID：11599143
> 
> 赞同：0
> 
> 时间：2012-07-22T09:31:24.287
> 
> 标签：solr

在我的设置中，有些查询运行速度非常慢。是否有一种简单的方法来识别和收集它们（可能通过日志或管理控制台），以便我以后可以进行一些性能分析？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T11:05:18.920

是的，在日志中很容易，查看示例行

```
INFO: [core0] webapp=/solr path=/select/ params={indent=on&start=0&q=*:*&version=2.2&rows=10} hits=1074 status=0 QTime=1 
```

你需要看看Qtime

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T16:49:13.373

截至目前，它的目标是 4.3 版。这是问题链接。 [https://issues.apache.org/jira/browse/SOLR-1101](https://issues.apache.org/jira/browse/SOLR-1101)

# c++ - 如何在 C++/CX 中创建具有属性的类的复制构造函数

> ID：11599154
> 
> 赞同：2
> 
> 时间：2012-07-22T09:33:55.100
> 
> 标签：c++, windows-runtime, c++-cx

我是 C++/CX 的新手。我想创建一个具有两个属性 X 和 Y 的 Vector 类。

在标准 C++ 中，复制构造函数是：

```
Vector(const Vector& v); 
```

我将其翻译为 C++/CX 为：

```
Vector(const Vector^ v); 
```

这是课程：

标题：

```
ref class Vector
{
public:
    Vector();
    Vector(const Vector^ v);

    property double X;
    property double Y;
}; 
```

执行：

```
Vector::Vector()
{
    X = 0;
    Y = 0;
}

Vector::Vector(const Vector^ v)
{
    this->X = v->X;
    this->Y = v->Y;
} 
```

但是在将 v->X 分配给 this->X 时出现错误：没有函数“Vector::X::get”的实例与参数列表和对象匹配（对象作为阻止匹配的类型限定符）。

如何正确实现复制构造函数？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T12:48:33.757

您的问题与复制构造函数没有直接关系。当我编译你的代码时，我收到以下错误：

> “Vector::X::get”：无法将“this”指针从“const Vector”转换为“Vector %”

这表明问题出在`const`-ness 上，例如参见[这个问题](https://stackoverflow.com/q/6619360/41071)及其接受的答案。

似乎问题在于，对于琐碎的属性，`get`访问器未声明`const`。因此，您无法访问`const Vector^`.

我认为解决方案不是使用琐碎的属性，而是自己实现两个访问器，使`get`访问器`const`：

```
private:
    double x;
    double y;
public:
    property double X
    {
        double get() const { return x; }
        void set(double value) { x = value; }
    }

    property double Y
    {
        double get() const { return y; }
        void set(double value) { y = value; }
    } 
```

这种方法的问题是你不能`const`在 WinRT 类型中拥有方法（我认为这就是为什么`get`访问器不是`const`普通属性的原因）。因此，如果您将类型更改为`public ref class`，您将收到此错误：

> 'get'：不支持 WinRT 类型的成员函数上的 'const' 和 'volatile' 限定符

因此，我认为您最好的选择是不要`const`在您的复制构造函数中使用：

```
Vector::Vector(Vector^ v)
{
    this->X = v->X;
    this->Y = v->Y;
} 
```

虽然我不确定为什么你甚至需要一个复制构造函数`ref class`，因为你总是将它用作参考。

# google-maps - 将标记放在另一个标记上

> ID：11599162
> 
> 赞同：3
> 
> 时间：2012-07-22T09:35:24.777
> 
> 标签：google-maps, google-maps-api-3

我的应用程序显示两种标记：位置和项目。我希望能够将项目拖放到位置上。

但是当一个标记被拖动时，`mouseover`它被拖动到的标记上的事件不会被触发。

如果有人知道创造这种效果的方法，我会永远很高兴:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T15:25:28.070

我认为你最好的选择是根据到目标的距离来实现它，无论是现实世界的距离（以米为单位）还是屏幕距离（以像素为单位）。例如：

```
var locations = Array();
var items = Array(); 
```

进而：

```
var itemMarker = new google.maps.Marker(opts);
google.maps.event.addListener(itemMarker, 'drag', function(){
    for( var n = 0; n < locations.length; n++){
    var d = google.maps.geometry.spherical.computeDistanceBetween(this.getPosition(),locations[n].getPosition());
     if (d < 5){
         // do something when below a given threshold.
     }
    }
});
items.push(itemMarker); 
```

演示在这里：

[http://maps.forum.nu/v3/gm_template_simple.html](http://maps.forum.nu/v3/gm_template_simple.html) （将 Omaha 标记拖向芝加哥。）请记住在加载 API 时加载几何库。

# jquery - jQuery UI 自动完成匹配第一组字母？

> ID：11599164
> 
> 赞同：0
> 
> 时间：2012-07-22T09:35:49.840
> 
> 标签：jquery, jquery-ui, filter

说这是我的自动完成数组：

```
Pascal
PHP
Lua
JavaScript
ActionScript
Active Server Pages 
```

当我现在在自动完成文本框中输入“a”时，它将显示 Pascal、Lua、JavaScript、ActionScript 和 ASP。那是因为它们都有字母“a”。但我只想显示 ActionScript 和 ASP，因为它们的第一个字母是“a”。这怎么可能？

我看过这个[Stack Overflow question](https://stackoverflow.com/questions/5646170/jquery-ui-autocomplete-match)，但它似乎没有用，因为我在页面上有数据（Pascal、PHP 等）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T09:41:14.833

这取决于您从列表中过滤值的方式。例如，如果源是 SQL Server 表或视图，则过滤条件具有

```
WHERE Col = '%' + ValueInAutoCompleteTextBox + '%' 
```

因此你会得到 Pascal、Lua、JavaScript 等。在这种情况下，你可以删除前面的 '%' 来实现你所需要的。希望这可以帮助。

# php - 使用 MySQL 和 PHP 对 opencart 进行产品过滤

> ID：11599166
> 
> 赞同：0
> 
> 时间：2012-07-22T09:36:02.917
> 
> 标签：php, mysql, e-commerce, filtering, opencart

我正在尝试为 opencart 进行动态产品过滤，用户可以在其中添加过滤器，将它们分配给类别并为产品分配过滤器值。

目前我有这些mysql表：

1.  过滤器 - ID NAME
2.  Filters_categories - ID FILTER_ID CATEGORY_ID
3.  Filters_values - ID FILTER_ID VALUE
4.  Filters_products - ID FILTER_ID VALUE_ID PRODUCT_ID

问题在于这种结构，当激活多个过滤器时我无法获得产品，因为我得到的 MySQL 查询看起来像这样：

```
SELECT product_id FROM Filters_products WHERE ((name_id='1' OR name_id='2') AND filter_id='1') AND ((name_id='3' OR name_id='4') AND filter_id='2') 
```

这没有任何意义。我不知道应该如何更改我的数据库结构以使动态过滤成为可能。我该如何解决这种情况？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T11:59:41.357

使用这个很棒的扩展，

[http://www.opencart.com/index.php?route=extension/extension/info&extension_id=10098](http://www.opencart.com/index.php?route=extension/extension/info&extension_id=10098)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T22:12:37.247

在文件 /catalog/model/catalog/product.php 中找到第 nr 行。91 并用此代码替换“if {}”块...

```
if (!empty($data['filter_category_id'])) {
        if (!empty($data['filter_sub_category'])) {
            $sql .= " AND cp.path_id = '" . (int)$data['filter_category_id'] . "'"; 
        } else {
            $sql .= " AND p2c.category_id = '" . (int)$data['filter_category_id'] . "'";            
        }   

        if (!empty($data['filter_filter'])) {
            $implode = array();

            $filters = explode(',', $data['filter_filter']);

            foreach ($filters as $filter_id) {

                $filterSQL = $this->db->query("SELECT * FROM " . DB_PREFIX . "filter WHERE filter_id = ". $filter_id);

                $implode[$filterSQL->row['filter_group_id']][] = (int)$filter_id;

            }

            foreach($implode AS $implode2) {

                $sql .= " AND (";
                     foreach($implode2 AS $filterID) {
                        $sql .= "(SELECT count(*) FROM product_filter WHERE product_filter.product_id=p.product_id AND product_filter.filter_id=$filterID) OR ";
                     }
                     $sql = substr($sql, 0, -4);
                $sql .= ")";
            }

        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T09:57:48.853

SELECT product_id FROM Filters_products WHERE (screen_id='1' OR screen_id='2') and (connection_id='1')

# jquery - Codeigniter JQuery AJAX 加载不适用于所有浏览器

> ID：11599167
> 
> 赞同：0
> 
> 时间：2012-07-22T09:36:12.897
> 
> 标签：jquery, ajax, codeigniter

我正在尝试在 CodeIgniter 2.x 中执行简单的 JQuery AJAX 页面加载

它似乎在不同的网络浏览器中也有不同的响应。注意：这不是一个不正确的路径问题，页面工作和显示都很好，我使用了 base_url、realurl、手动输入绝对路径和手动输入相对路径，但没有一个能 100% 成功。有时我认为它是 .htaccess 文件，但如果是它，它就不能在所有浏览器中工作，而不仅仅是 1。

**现在可以在以下浏览器中使用：**

*   铬 - 不工作
*   IE 9 - 作品
*   火狐 - 作品
*   Safari - 作品
*   歌剧 - 作品

我已经为任何希望提供帮助的人在线放置了一个干净的 CI 测试站点/应用程序：演示（也可以在这里进行测试，尝试页面上列出的第 1,2 和 3 点并观察控制台输出）： [http ://www.allforthecode.co .uk/dev/CodeigniterJQueryAJAXTest/](http://www.allforthecode.co.uk/dev/CodeigniterJQueryAJAXTest/)

**文件：**

```
/application/controllers/test.php
/application/views/test.php (loaded in by test.php)
/application/controllers/advert/test2.php (loaded in by the test.php view via JQuery ajax)
/application/controllers/test_root.php (loaded in by the test.php view via JQuery ajax)
/application/views/advert/test2.php (loaded in by test2.php) 
```

**testapp/应用程序/控制器/test.php**

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

    class test extends CI_Controller {

        public function index()
        {
            $this->load->view('test');
        }

    }

?> 
```

**/application/views/test.php（由 test.php 控制器加载）**

```
<!DOCTYPE html>
<html>

    <head>
        <meta http-equiv="Content-type" content="text/html; charset=utf-8">
        <title>JQUERY AJAX TEST</title>
        <!-- CSS START -->
        <style>
            html, body {
                font-family: arial;
                font-size: 12px;
            }
            #container {
                width: 100%;
                height: 400px;
                border: 2px solid #000000;
                overflow: auto;
            }
        </style>
        <!-- JS INCLUDES START -->
        <script type="text/javascript" src="<? echo(base_url(" includes/js/jquery/jquery-1.7.2.min.js
        ")); ?>"></script>
        <script type="text/javascript" src="<? echo(base_url(" includes/js/functions.js
        ")); ?>"></script>
        <!-- JQuery AJAX START -->
        <script type="text/javascript">
            function loadPage() {
                $url = $("#url").val();
                var request = $.ajax({
                    type: "post",
                    url: $url,
                    data: "t=1234",
                    success: function (data) {
                        trace("#### SUCCESS ####");
                        $("#container").html(data);
                    },
                    error: function (data) {
                        trace("#### ERROR ####");
                        trace("data = " + data);
                        traceObject(data);
                        traceToDiv("#container", "<h2>#### ERROR ####</h2>");
                        traceObjectToDiv("#container", data);
                    },
                    statusCode: function (data) {
                        trace("#### StatusCode ####");
                        traceObject(data);
                        traceToDiv("#### StatusCode ####");
                        traceObjectToDiv(data);
                    },
                    isModified: function () {
                        trace("#### isModified ####");
                    }
                });
            }
            <!-- JQuery AJAX END -->
        </script>
    </head>

    <body>
        <form id="frm">
            <input type="button" value="LOAD PAGE IN BOX" onclick="loadPage();" />
            <input type="reset" value="RESET" />
            <div id="container"></div>
            <b>JQuery AJAX page url target:</b>
            <input type="text" id="url" value="advert/test2"
            />
            <ol>
                <li>
                    <p>Set
                        <b>url target</b>to "test_root" to test load a root page. (WORKS IN CHROME!)</p>
                </li>
                <li>
                    <p>Set
                        <b>url target</b>to "advert/test2" to test load a 1 dir deep controller page.
                        (FAILS IN CHROME!)</p>
                </li>
                <li>
                    <p>Set
                        <b>url target</b>to "../ci.php" to test load a php page outside of the codeigniter
                        framework. (WORKS IN CHROME?!)</p>
                </li>
            </ol>
        </form>
        <br>
        <h3>Test links</h3>
        <ul>
            <li>Browser test link via index.php/
                <br/>
                <a href="<? echo(base_url(" index.php/advert/test2 ")); ?>"><b><? echo(base_url("index.php/advert/test2")); ?></b></a>
            </li>
            <li>Browser test link direct (needs .htaccess to work)
                <br/>
                <a href="<? echo(base_url(" advert/test2 ")); ?>"><b><? echo(base_url("advert/test2")); ?> </b></a>
            </li>
            <li>Browser test link direct (needs .htaccess to work)
                <br/>
                <a href="<? echo(base_url(" test_root ")); ?>"><b><? echo(base_url("test_root")); ?></b></a>
            </li>
            <li>Browser test link direct
                <br/>
                <a href="../ci.php"><b>../ci.php</b></a>
            </li>
        </ul>
        <br>
        <p>Windows 7x64 - Browser results:</p>
        <ul>
            <li>Chrome - Fail</li>
            <li>IE 9.0.8112.16421 64Bit - Success (Compatability view on & off)</li>
            <li>IE 9.0.8112.16421 32Bit - Success (Compatability view on & off)</li>
            <li>FireFox 14.0.1 - Success</li>
            <li>Opera 12 build 1467 - Success</li>
            <li>Safari 5.1.7 (7534.57.2) - Success</li>
        </ul>
    </body>

</html> 
```

**/application/controllers/advert/test2.php（由 test.php 视图通过 JQuery ajax 加载）**

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

    class test2 extends CI_Controller {

        public function index()
        {
            $this->load->view('advert/test2');
        }

    }

?> 
```

**/application/views/advert/test2.php（由 test2.php 加载）**

```
Hello I am loaded by JQuery AJAX 
```

**../ci.php**

```
<?
    echo("I am a php file echo test from outside of the Codeigniter test site");
?> 
```

**Chromes 网络结果为：**

```
http://127.0.0.1/testapp/public/advert/test2 - Method:POST - Status: Failed 
```

**额外的**

**此代码适用于 Chrome 的唯一方法是**

1.  如果我在该项目的 CodeIgniter 框架之外使用 html 文件，则 JQuery AJAX 加载有效。有什么想法可以在所有其他浏览器（除 Chrome 之外）中使用吗？

和

1.  If I place the page which JQuery wants to load at the root of the CodeIgniter website. So "application/controllers/test.php" which loads "application/views/advert/test2.php" will work but "application/controllers/advert/test.php" will not? But works in all other browsers? Chrome status - 0

    **Anyone got any ideas?**

Give it a try at [http://www.allforthecode.co.uk/dev/CodeigniterJQueryAJAXTest/](http://www.allforthecode.co.uk/dev/CodeigniterJQueryAJAXTest/) and try points 1,2 & 3 listed on page and watch console outputs)

ZIP: [http://www.allforthecode.co.uk/dev/CodeigniterJQueryAJAXTest/CodeigniterJQueryAJAXTest.zip](http://www.allforthecode.co.uk/dev/CodeigniterJQueryAJAXTest/CodeigniterJQueryAJAXTest.zip)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T05:51:51.087

Found the problem... Browser adons/plugins...

If you have adblock installed on either firefox & chrome it will break many AJAX Queries.

In my case it was "AdBlock".

Turn them off and all is fine...

# openstreetmap - 在我的黑莓应用程序中使用 OpenStreet Maps

> ID：11599168
> 
> 赞同：0
> 
> 时间：2012-07-22T09:36:22.257
> 
> 标签：openstreetmap, blackberry-maps

我想在我的黑莓应用程序中使用openstreet 地图。这个想法是应用程序通过 GPS/蜂窝塔获取当前位置。用户可以选择单击按钮并在下面的应用程序中加载地图（相同的显示）。我研究了一下，黑莓地图似乎受到限制，谷歌地图需要安装单独的 API。我希望通过 http 连接（类似于 web 服务）获取和加载地图。有人可以指导吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T15:18:44.967

我使用有用的 nutiteq 库，它在我的黑莓中实现了 openstreet 地图。这里有一些链接快速[入门 nutiteq RIM BlackBerry Mapping API SDK](http://www.nutiteq.com/rim-blackberry-mapping-api-sdk)

# javascript - 有关如何使用表单中的值制作 js 确认弹出窗口的示例？

> ID：11599172
> 
> 赞同：-2
> 
> 时间：2012-07-22T09:37:57.717
> 
> 标签：javascript, codeigniter

我正在使用代码点火器。如果我单击表单上的提交按钮，将出现一个弹出确认。在我确认或购买之前，我在表格上输入的数量或任何东西必须出现在弹出窗口中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T09:59:36.680

您不能使用默认的 javascript 弹出窗口来做到这一点。我建议你使用[jquery ui 对话框](http://jqueryui.com/demos/dialog/#default)。

# android - ListView 可点击 false 不起作用

> ID：11599177
> 
> 赞同：2
> 
> 时间：2012-07-22T09:38:15.390
> 
> 标签：android, listview

我想让 Android`ListView`有一段时间不可点击，直到我`AysncTask`完成。

所以我用

```
lv.setClickable(false); 
```

但它不起作用。`ListView`仍然需要点击。需要帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-02T04:13:35.397

对我有用的是在 XML 中为我的列表项设置两个属性。我设置`clickable="false"`和`focusable="true"`。所以我的每个列表项都在膨胀一个类似于这个的 XML 文件：

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:clickable="false"
    android:focusable="true" >

    <!-- Children here -->

</LinearLayout> 
```

我不确定为什么会这样，尽管这是我的猜测：

*   只使用 clickable 属性是行不通的，因为虽然 LinearLayout 不可点击，但它里面的子元素仍然是可点击的。然后孩子们得到点击事件但不使用它并将其转发到LinearLayout。

*   通过使 LinearLayout 可聚焦，它现在将接受单击事件，然后将其删除，因为它不可单击。

希望这可以帮助。如果有人确切知道为什么这种方法有效，请加入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T09:49:02.120

试试这个：

```
 lv.setEnabled(false); 
```

编辑：好的，对不起我的错。

我认为问题在于它不是您单击的 ListView，而是代表 ListView 中每个项目的 View。所以试试这个：

```
View itemView = lv.findViewTraversal(id_of_your_view);
itemView.setClickable(false); 
```

我希望这行得通。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T09:56:13.387

1.  你试过`setFocusable`/`setEnabled`方法吗？
2.  您可以在 onItemClick 方法中：

`if(!mWorking){ mWorking = true; //do the job... }`

1.  您可以尝试实现[SimpleOnGestureDetector](http://developer.android.com/reference/android/view/GestureDetector.SimpleOnGestureListener.html)并覆盖[onSingleTapConfirmed](http://developer.android.com/reference/android/view/GestureDetector.SimpleOnGestureListener.html#onSingleTapConfirmed%28android.view.MotionEvent%29)方法。google上有很多tuts。

我希望这能帮到您

# java - 将我的 asp.net mvc Web 应用程序与基于 Java 的开源 BPM（业务流程管理）软件集成

> ID：11599178
> 
> 赞同：0
> 
> 时间：2012-07-22T09:38:31.617
> 
> 标签：java, asp.net-mvc-3, open-source, integration

我公司的员工在开发 asp.net Web 应用程序方面具有良好的知识和经验，尤其是使用 MVC 框架。我需要购买一个开源的基于 Java 的 BPM 解决方案，它将为我的团队将要开发的 BPM 软件提供基础引擎。

但我的问题是，是否可以将基于 Java 的开源 BPM 软件与我们将在基于 Java 的 BPM 引擎之上构建的 asp.net MVC Web 应用程序集成？BR

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T12:42:54.697

只要您的 MVC 应用程序公开 Web 服务（REST 或 SOAP），BPM 引擎就可以与之通信。

# ios - 检测网站是否有 RSS/Atom 提要？

> ID：11599180
> 
> 赞同：1
> 
> 时间：2012-07-22T09:38:49.183
> 
> 标签：ios, nsurl

我有该网站的 URL，但没有我想要解析的提要。

如何检测网站是否有 RSS/Atom 提要？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T09:49:05.023

正如这个问题中提到的[如何检查网站是否有 rss 提要](https://stackoverflow.com/questions/5450501/how-to-check-if-a-site-has-rss-feeds) ，您需要下载页面并检查 rel='alternate'。

如果第一次解析失败，如果您想确保找到任何可能的 RSS/Atom 链接，您还可以对任何提及 feed.xml 或类似内容的页面进行正则表达式的回退。这不一定包含实际页面的 RSS，它可能是指向外部 RSS 的链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T09:49:27.850

在网站默认页面的 head 部分中查找 rel="alternate" type="application/rss+xml" 链接：

```
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
  <link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="http://someurl/feed/" />
  <title>Some title</title>
</head> 
```

# php - 如何通过 php 和 fpdf 在 pdf 中添加多列

> ID：11599181
> 
> 赞同：0
> 
> 时间：2012-07-22T09:38:48.287
> 
> 标签：php, pdf, phpmyadmin, tcpdf, fpdf

我在使用 php 和 fpdf 时遇到了一些问题。

我必须通过 fpdf 和 php 以 pdf 格式制作报告，我想在其中向学生展示老师正在教书。

我想要的是 fpdf 应该创建一个具有相同字段的多列的页面。

图片链接：http: [//i1267.photobucket.com/albums/jj552/ThePerfectH/abc.png](http://i1267.photobucket.com/albums/jj552/ThePerfectH/abc.png)

如您所见，在此图像中，我希望数据在一列中直到 30，然后它应该在一页中的不同列中移动。

示例代码：

```
$result=mysql_query("select p.p_sname as pap from sgm, students st
    left join sps on st.studentid=sps.studentid
    left join papers p on p.p_id=sps.paperid where p.type='optional' and
    sgm.studentid=st.studentid and sgm.groupid=3 and st.course=3 and
    st.status='Regular' order by name");
    if($result === FALSE)
{
die(mysql_error()); // better error handling
}
$i=0;
$max=30;
$s=1;
$row_height = 6;
$y_axis = 33 + $row_height;
while($row = mysql_fetch_array($result))
{
//If the current row is the last one, create new page and print column title
if ($i == $max)
{
    $y_axis= 33 + $row_height;
    $pdf->SetX(80);
    $pdf->SetTextColor(153,0,102);
    $pdf->SetFont('Arial','',10);
        //print column titles for the current page
    $pdf->SetY(33);
    $pdf->SetX(80);
    $pdf->Cell(20,6,'S No.',1,0,'C',1);
    $pdf->SetY($y_axis);
    $pdf->SetX(80);
    $pdf->Cell(20,6,$s,1,0,'C',1);
    $y_axis = $y_axis + $row_height;
        $i = $i + 1;
    $s=$s+1;

}

        $rollno=$row['rollno'];
    $name=$row['name'];
    $cat=$row['cat'];
    $pap=$row['pap'];
    $pdf->SetY($y_axis);
    $pdf->SetX(48);
    $pdf->SetFont('Arial','',10);
    $pdf->Cell(20,6,$s,1,0,'C',1);
    //Go to next row
    $s=$s+1;
    $y_axis = $y_axis + $row_height;

        $i = $i + 1;    } 
```

正如您在图片中看到的，这导致我的行在创建一个新列后重叠。

任何人都可以帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T20:46:48.020

我通过将 SetX 更改为 x_axis 来完成它，当它达到 30 时，它添加到 x_axis

# sharepoint - 如何阻止用户组的共享点页面 people.aspx？

> ID：11599184
> 
> 赞同：-1
> 
> 时间：2012-07-22T09:39:14.503
> 
> 标签：sharepoint, sharepoint-2010, permissions

在我的 SharePoint 2010 应用程序中，我想不授予访问者组访问“_layouts/people.aspx”页面的权限。这可能吗？如何？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T19:26:25.333

我自己找到了答案。我给了该组一个受限的读取权限，然后他们无法查看 people.aspx 页面等。

# c# - 操作顺序简单脑筋急转弯

> ID：11599186
> 
> 赞同：-6
> 
> 时间：2012-07-22T09:39:25.800
> 
> 标签：c#, operator-precedence

我有一段简单的代码没有达到我的预期。这段代码有什么问题？

```
int value1 = (int).5*100; 
```

这很容易，但通过我循环了一段时间。当然，答案是微不足道的，并且是众所周知的。但是，我认为有人考虑可能会很有趣。

第一个提出正确解决方案并解释原因的人将获得学分。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-22T09:43:16.897

“什么是错的”：括号的使用不足，迫使我记住和背诵愚蠢的优先规则（旨在满足编译器，而不是人眼），使其难以编写，更难以维护。

如果含义*有一点*疑问，请添加括号。即使他们不需要。那么这不是问题。而且你不必记住任何东西！

如果代码写成：

```
((int)0.5)*100 
```

或者：

```
(int)(0.5*100) 
```

然后我怀疑这个问题是否有必要:)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-22T09:42:11.480

首先它转换`.5`为`int`，结果为`0`，然后将其乘以`100`结果为 (0 * 100) `0`。

如果您期望它是，`50`那么您需要使用括号（所以先乘法，然后键入 cast）：

```
int value1 = (int)(.5*100); 
```

多加括号总比少加括号好，它没有任何成本，而且增加了可读性和理解力。

MSDN 库：[运算符优先级和关联性](http://msdn.microsoft.com/en-us/library/aa691323%28v=vs.71%29.aspx)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-22T09:43:47.687

它与强制转换的优先级有关，强制转换具有更高的优先级，因此 i 在乘法运算之前执行，您必须使用括号来更改优先级，请尝试以下方式：

```
int value1 = (int)(.5 * 100); 
```

# android - 自定义holo风格进度条

> ID：11599190
> 
> 赞同：3
> 
> 时间：2012-07-22T09:39:40.710
> 
> 标签：android, android-progressbar, android-2.3-gingerbread

我想在android中创建自定义进度条，如下

![在此处输入图像描述](../Images/43e240d989eb83ed71b74a5f50d0ac75.png)

但我`don't want to use any external library`喜欢这样`actionbarsherlock`，所以我如何使用 xml 布局和所有来创建它。我使用的是安卓 2.3.3 版本。

此外，我试图`HoloEveryWhere`从这个[链接](https://github.com/ChristopheVersieux/HoloEverywhere/blob/master/HoloDemo/res/layout-v4/main.xml)复制一些样式、可绘制的图像， 但我没有得到预期的结果。请看下面。它是一个不断移动的酒吧。

![在此处输入图像描述](../Images/16fb880ceaecb8900439634ab1f38b1d.png)

我使用了以下代码

```
 <ProgressBar
                style="@style/ProgressBarHolo.Horizontal"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:indeterminate="true"
                android:progress="25" /> 
```

和风格

```
<item name="android:progressDrawable">@drawable/progress_horizontal_holo_dark</item>
<item name="android:indeterminateDrawable">@drawable/progress_indeterminate_horizontal_holo</item> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T23:30:37.263

您需要包括“progress_horizo​​ntal_holo_dark”和“progress_indeterminate_horizo​​ntal_holo”的定义。以下是文件：[https](https://github.com/ChristopheVersieux/HoloEverywhere/blob/master/HoloEverywhereLib/res/drawable/progress_horizontal_holo_dark.xml) ://github.com/ChristopheVersieux/HoloEverywhere/blob/master/HoloEverywhereLib/res/drawable/progress_horizo​​ntal_holo_dark.xml和[https://github.com/ChristopheVersieux/HoloEverywhere/blob/master/HoloEverywhereLib/res /drawable/progress_indeterminate_horizo​​ntal_holo.xml](https://github.com/ChristopheVersieux/HoloEverywhere/blob/master/HoloEverywhereLib/res/drawable/progress_indeterminate_horizontal_holo.xml)

不要忘记复制上述两个文件中提到的资产。

然后您将看到第二张图片中显示的进度条。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T10:11:26.683

你在这里想要的不是 a`progressBar`而是`seekBar`. 你复制的drawables是holo进度条的drawables，但你看到的是一个不确定的progressBar。这就是为什么它是一个不断移动的酒吧。

只需`setIndeterminate="false"`设置进度、最大值等，您将拥有一个全息确定`progressBar`。

但是您发布的第一张图片是搜索栏 =) => 链接[这里](http://developer.android.com/design/building-blocks/seek-bars.html)

# java - Jettison 或 Kryo

> ID：11599191
> 
> 赞同：3
> 
> 时间：2012-07-22T09:39:47.610
> 
> 标签：java, json, serialization, deserialization, kryo

我目前将 JAXB 用于我正在处理的项目，并希望将我的库归档 xml 转换为归档 json，以便在我的项目中起作用。我想我会使用[Jettison](http://jettison.codehaus.org/)，因为它似乎[更容易实现](http://blog.bdoughan.com/2011/04/jaxb-and-json-via-jettison.html)，因为它实际上与 JAXB 一起工作；但是，查看不包含 Jettison的[旧基准测试，我发现](http://code.google.com/p/thrift-protobuf-compare/wiki/Benchmarking)[Kryo](http://code.google.com/p/kryo/) 生成的文件更小，并且比某些替代方案更快地进行序列化和反序列化。

谁能告诉我关键区别或 Jettison 如何与 Kryo 叠加，尤其是对于未来的项目，如 android 应用程序。

编辑：

我想我正在寻找产生更小文件和更快运行的东西。可以牺牲人类的可读性，因为我不打算阅读仅处理它们的文件

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T09:54:30.290

它们的目的有些不同：

*   Jettison 用于读取/写入 JSON。如果您需要与 JSON（人类可读）数据格式进行互操作，请使用它
*   Kryo 用于高效的二进制序列化。如果您需要高性能和小编码对象大小（例如实时游戏中的消息通信），请使用它。

由于听起来您正在使用该格式来存档数据，因此人类可读性和使用标准的长寿命格式可能比效率更重要，所以我怀疑您会想要选择 JSON 路线。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T10:28:58.137

**注意：** 我是[**EclipseLink JAXB (MOXy** )](http://www.eclipse.org/eclipselink/moxy.php)的负责人，也是**[JAXB (JSR-222)](http://jcp.org/en/jsr/detail?id=222)**专家组的成员。

由于您已经建立了 JAXB 映射并将 XML 转换为 JSON，您可能对 EclipseLink JAXB (MOXy) 感兴趣，它使用相同的 JAXB 元数据提供对象到 XML 和对象到 JSON 的映射。

**顾客**

下面是一个带有 JAXB 注释的示例模型。

```
package forum11599191;

import java.util.List;
import javax.xml.bind.annotation.*;

@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class Customer {

    @XmlAttribute
    private int id;

    private String firstName;

    @XmlElement(nillable=true)
    private String lastName;

    private List<String> email;

} 
```

**jaxb.properties**

要将 MOXy 作为您的 JAXB 提供程序，您需要包含一个`jaxb.properties`在与域模型相同的包中调用的文件，其中包含以下条目（请参阅： [http ://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as -your.html](http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html) )。

```
javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory 
```

**输入.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<customer id="123" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <firstName>Jane</firstName>
    <lastName xsi:nil="true"/>
    <email>jdoe@example.com</email>
</customer> 
```

**演示**

以下演示代码将从 XML 填充对象，然后输出 JSON。注意 MOXy 没有编译时依赖。

```
package forum11599191;

import java.io.File;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Customer.class);

        // Unmarshal from XML
        Unmarshaller unmarshaller = jc.createUnmarshaller();
        File xml = new File("src/forum11599191/input.xml");
        Customer customer = (Customer) unmarshaller.unmarshal(xml);

        // Marshal to JSON
        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.setProperty("eclipselink.media-type", "application/json");
        marshaller.marshal(customer, System.out);
    }

} 
```

**JSON 输出**

下面是运行演示代码的输出。

```
{
   "customer" : {
      "id" : 123,
      "firstName" : "Jane",
      "lastName" : null,
      "email" : [ "jdoe@example.com" ]
   }
} 
```

关于输出需要注意的几点：

1.  由于该`id`字段是数字类型，因此它被编组为不带引号的 JSON。
2.  即使该`id`字段已映射，`@XmlAttribute`JSON 消息中也没有对此的特殊指示。
3.  该`email`属性`List`的大小为 1，这在 JSON 输出中正确表示。
4.  该`xsi:nil`机制用于指定该`lastName`字段具有一个`null`值，这已在 JSON 输出中转换为正确的 null 表示。

**了解更多信息**

*   [http://blog.bdoughan.com/2011/08/json-binding-with-eclipselink-moxy.html](http://blog.bdoughan.com/2011/08/json-binding-with-eclipselink-moxy.html)
*   [http://blog.bdoughan.com/2012/04/binding-to-json-xml-handling-null.html](http://blog.bdoughan.com/2012/04/binding-to-json-xml-handling-null.html)
*   [http://blog.bdoughan.com/2011/04/jaxb-and-json-via-jettison.html](http://blog.bdoughan.com/2011/04/jaxb-and-json-via-jettison.html)

# wpf - 使用 Vb.net 的 SQL CE 插入语句

> ID：11599195
> 
> 赞同：0
> 
> 时间：2012-07-22T09:40:11.367
> 
> 标签：wpf, vb.net, sql-server-ce

我在带有 vb.net 和 sql CE 3.5 的 wpf 中有以下代码，我的操作系统是 win7 64 位。Visual Studios 是 2010 年。我导入了以下内容：

```
Imports System.ComponentModel
Imports System.Data.SqlServerCe
Imports System.Data 
```

代码的主要部分是：

```
 Dim Con As SqlCeConnection = New SqlCeConnection(DataSource)
            Dim Cmd As SqlCeCommand
            If Con.State = ConnectionState.Closed Then Con.Open()

            'Inserting Prime Details
            Try
                Cmd = New SqlCeCommand("INSERT INTO [ContactPrime]([ID],[Namee],[Company],[JobTitle],[Number],[Address],[Typee] VALUES (@ID,@Namee,@Company,@JobTitle,@Number,@Address,@Typee)", Con)
                With InsertObject.Prime
                    Cmd.Parameters.Add(New SqlCeParameter("@ID", SqlDbType.NVarChar)).Value = .ID
                    Cmd.Parameters.Add(New SqlCeParameter("@Namee", SqlDbType.NVarChar)).Value = .Namee
                    Cmd.Parameters.Add(New SqlCeParameter("@Company", SqlDbType.NVarChar)).Value = .Company
                    Cmd.Parameters.Add(New SqlCeParameter("@JobTitle", SqlDbType.NVarChar)).Value = .JobTitle
                    Cmd.Parameters.Add(New SqlCeParameter("@Number", SqlDbType.NVarChar)).Value = .Number
                    Cmd.Parameters.Add(New SqlCeParameter("@Address", SqlDbType.NVarChar)).Value = .Address
                    Cmd.Parameters.Add(New SqlCeParameter("@Typee", SqlDbType.NVarChar)).Value = .Typee
                End With
                Cmd.ExecuteNonQuery()
            Catch ex As Exception

            End Try

            'Inserting  Numbers of Contact
            Try
                For Each num In InsertObject.Numbers
                    Cmd = New SqlCeCommand("INSERT INTO [ContactNumbers]([ContactID],[ID],[Title],[Mobile],[Land],[Fax],[Email],[IsPrimary] VALUES (@ContactID,@ID,@Title,@Mobile,@Land,@Fax,@Email,@IsPrimary)", Con)
                    With num
                        Cmd.Parameters.Add(New SqlCeParameter("@ContactID", SqlDbType.NVarChar)).Value = .ContactID
                        Cmd.Parameters.Add(New SqlCeParameter("@ID", SqlDbType.NVarChar)).Value = .ID
                        Cmd.Parameters.Add(New SqlCeParameter("@Title", SqlDbType.NVarChar)).Value = .Title
                        Cmd.Parameters.Add(New SqlCeParameter("@Mobile", SqlDbType.NVarChar)).Value = .Mobile
                        Cmd.Parameters.Add(New SqlCeParameter("@Land", SqlDbType.NVarChar)).Value = .Land
                        Cmd.Parameters.Add(New SqlCeParameter("@Fax", SqlDbType.NVarChar)).Value = .Fax
                        Cmd.Parameters.Add(New SqlCeParameter("@Email", SqlDbType.NVarChar)).Value = .Email
                        Cmd.Parameters.Add(New SqlCeParameter("@IsPrimary", SqlDbType.Bit)).Value = .IsPrimary
                    End With
                    Cmd.ExecuteNonQuery()
                Next
            Catch ex As Exception

            End Try 
```

我得到的错误是：

```
A first chance exception of type 'System.Data.SqlServerCe.SqlCeException' occurred in System.Data.SqlServerCe.dll 
```

你能告诉我哪里做错了吗？连接工作得很好，我用一个 select 语句进行了测试，它工作了，看来我的 insert 语句是错误的。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T09:45:42.967

看来，您没有在 VALUES 开始之前关闭括号......

```
"INSERT INTO [ContactNumbers]([ContactID],[ID],[Title],[Mobile],[Land],
 [Fax],[Email],[IsPrimary] 
 VALUES (@ContactID,@ID,@Title,@Mobile,@Land,@Fax,@Email,@IsPrimary) 
```

您在上述语句中缺少右括号，因此更正后的查询将如下所示：

```
"INSERT INTO [ContactNumbers]([ContactID],[ID],[Title],[Mobile],[Land],
 [Fax],[Email],[IsPrimary])
 VALUES (@ContactID,@ID,@Title,@Mobile,@Land,@Fax,@Email,@IsPrimary) 
```

同样，同样的事情`INSERT`也发生在第二个查询中......

# c++ - List vs Vector，在循环中删除一个元素

> ID：11599197
> 
> 赞同：2
> 
> 时间：2012-07-22T09:40:23.640
> 
> 标签：c++, performance, list, vector

我需要一个容器，它允许我在循环遍历一个元素时快速擦除它**。**我不需要直接访问，因为我总是在循环中访问它。

`List`比`Vector`这种情况快吗？

伪代码：

```
vector<Item*> myContainer;

for(..loop over it...) {

  if (someCondition)
    myContainer.erase(currentElement)
} 
```

删除一个元素后，我需要**继续遍历**其余元素

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-22T12:09:35.450

是的，理论上列表比向量提供更快的删除，但实际上，没有人使用列表。为什么不？因为向量产生的堆活动少得多，而且它们提供了更好的缓存局部性。

你确定你绝对需要遍历向量并一个一个地擦除元素吗？这将导致向量的二次复杂度，但[擦除删除成语](http://en.wikipedia.org/wiki/Erase-remove_idiom)在线性时间内完成：

```
#include <algorithm>

myContainer.erase(
    std::remove_if(
        myContainer.begin(),
        myContainer.end(),
        [](Item* p) {
            return p->someCondition;
        }
    ),
    myContainer.end()
); 
```

（如果向量拥有项目，您可能应该将其替换为`vector<unique_ptr<Item>>`.）

作为替代方案，如果您确实必须逐个删除元素，并且您不关心项目的相对顺序，那么有一个[巧妙的小技巧](https://stackoverflow.com/a/4442529/)可以在恒定时间内删除向量的一个元素。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-22T09:44:35.467

使用列表擦除任意位置的元素会更快：

> [std::vector::erase 的复杂性](http://www.cplusplus.com/reference/stl/vector/erase/)：与删除的元素数量（析构函数）加上最后一个元素删除（移动）之后的元素数量成线性关系。
> 
> [std::list::erase 的复杂性](http://www.cplusplus.com/reference/stl/list/erase/)：与擦除的元素数量（析构函数）成线性关系。

此外，擦除后迭代器将无效，因此您需要更新迭代器：

```
it = list.erase(it); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T10:25:00.720

C++ 列表是一个链表。所以元素将按如下方式排列，

```
 head <--> 1 <--> 2 <--> 3 <--> 4 <--> 5 
```

所以，当我想删除 3 时，它只是一个指针改组。我想擦除 3，我需要移动 2 的指针指向 4。在这种情况下，我需要移动到 3（定位元素）。时间复杂度将是 O(1) 最坏的情况，因为它是一个双向链表，并且您已经确定了要删除的元素。

然而另一方面，C++ 向量只是一个数组。因此，从数组中删除元素之后是向量元素删除。在这种情况下，您可以在 O(1) 复杂度中发现要擦除的元素。但是要删除它，您需要左移所有元素以删除创建的空白。所以复杂度是 O(n) 最坏的情况。口头上的复杂性可能类似于“n - 要删除的元素的索引”。

列表产生 O(1) 的删除复杂度和渐近向量 O(n)。但是该列表将有额外的开销来维护每个元素的指针（总体上额外增加 O(2n) 空间）。

# android - Android布局，指定dp随屏幕大小缩放

> ID：11599198
> 
> 赞同：3
> 
> 时间：2012-07-22T09:40:29.230
> 
> 标签：android, layout

我一直在尝试在 Android 上使用通用布局，但没有成功。我的理解是，如果您在 dp 中指定所有小部件，并使其在一个屏幕尺寸下看起来正确，它应该正确缩放到其他分辨率，但我的结果对我来说看起来有点不对。

我使用相对布局在 HVGA 中布置了所有内容。相对布局具有我们的 UI 设计师用来定义元素边界的背景。在这种布局中，一切看起来都很完美。

然后我切换到一个宽高比略有不同的更大屏幕，背景可以正确缩放，但其他一切看起来都有些 dp。我的问题是，使所有元素与屏幕正确缩放的黄金方法是什么。我想保留所有元素相对于背景的比例。 ![一切看起来都很好的布局](../Images/c4e86e868a513e5841e911d78e932f85.png)

![放大的布局，其中背景看起来不错，但宽度为 100dp 的左侧列表视图缩放不正确](../Images/9d0e39459fea68ff088712ff1363d201.png)

谢谢！

编辑：想出了如何做到这一点。按钮和背景不一致的原因是背景与dp的缩放比例不同，设备显然具有不同的dps。解决方案是从绝对像素手动计算比例因子，然后按该因子手动缩放所有内容。这是一个很好的参考如何做到这一点： [Scale Android for different screen](http://www.vanteon.com/downloads/Vanteon_Android_White_Paper.pdf)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T21:22:01.330

dp 以这样的方式缩放自身，以便任何小部件的大小在具有不同分辨率的不同屏幕上保持不变。在您的情况下，列表视图的大小保持不变，但背景拉伸到屏幕宽度。为避免这种情况，请使用第一种颜色作为第一个列表视图的背景，并与第二个列表视图相同。

# cpanel - 在文件管理器上使用“移动”时“丢失”cPanel 文件

> ID：11599199
> 
> 赞同：0
> 
> 时间：2012-07-22T09:41:09.670
> 
> 标签：cpanel, file-manager

我正在使用 cPanels 文件管理器上的“移动文件”功能将一些关键文件移到 public_html 目录之外以增强安全性。

我在输入文件的目的地时打错了...现在文件已经消失了，它们不在错字目录或原始目录中。如果文件管理器找不到要放入的目录，文件管理器肯定不会删除文件吗？

我启用了隐藏文件并查看了几乎每个目录，有什么线索可以让它们消失吗？或者如何撤消该操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T09:43:12.837

它们出现在原始位置的子目录中，因为我忘记在开头添加“/”，即使 cpanel 似乎已经为您完成了。

在目录中查找了半小时，发布此问题。一秒钟后..找到了！

# java - 监视 Rails 应用程序中的 db 更改

> ID：11599203
> 
> 赞同：0
> 
> 时间：2012-07-22T09:41:26.047
> 
> 标签：java, ruby-on-rails, ruby, database, ruby-on-rails-3

我的应用程序由两部分开发 - rails 前端和 java 后端。后端可以修改数据库（添加、修改或删除记录），我正在寻找解决方案 - 如何从前端监控数据库中的更改以将其推送到客户端。当然 - 我可以向后端添加代码以通过 http get 调用某些方法，但也许你可以向我推荐更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T21:14:05.143

我推荐 Faye gem。结帐[http://railscasts.com/episodes/260-messaging-with-faye](http://railscasts.com/episodes/260-messaging-with-faye)。您需要在处理数据后调用 Faye 函数的 Java 应用程序中构建一个“调用者”。然后让faye推送数据给客户端。

添加：在您的 Rails 应用程序中构建一个 API 控制器，并在您的 JAVA 应用程序更新数据时调用该操作。然后 API 操作可以使用 Faye 将数据推送到 Rails“客户端”。

如果您以这种方式实现它，您可以在来自 Java 应用程序的调用中非常具体，并且只更新需要更新的客户端。您还可以添加其他复杂性，例如，如果您的数据经常更新，您可以将更新排队并以某些可配置的间隔推送它们。等等等等

# asp.net - 在 MVC 中是否可以覆盖编辑器模板

> ID：11599204
> 
> 赞同：1
> 
> 时间：2012-07-22T09:41:45.023
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3

是否可以覆盖编辑器模板？

我的模型中有 DateTime 字段，用于到达/离开日期 - 这些是使用以下 EditorTemplate 呈现的：

```
@model Nullable<System.DateTime> 

@if ( Model.HasValue ) { 
   @Html.TextBox( "" , String.Format( "{0:dd/MM/yyyy}" , Model.Value ) , new  { @class = "datepicker span2" } ) 
} 
else { 
   @Html.TextBox( "" , String.Format( "{0:dd/MM/yyyy}" , DateTime.Now ) , new { @class = "datepicker span2" } ) 
} 
```

...这将格式化日期时间字段，例如：01/08/2012

但是，我还想在另一个字段中显示预订的日期和时间，例如：

```
22/07/2012 08:23 
```

我的模型是：

```
 public DateTime Arrival { get; set; }
    public DateTime Departure { get; set; }
    public DateTime TimeBooked { get; set; } 
```

我希望 TimeBooked 也能显示时间 - 但编辑器模板显然只显示日期。

这可以被覆盖吗？还是有另一种方法可以做到这一点？

谢谢，

标记

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-22T10:02:51.127

您可以添加一个不同的命名编辑器，它也显示时间并使用 EditorFor 的重载，它接受模板名称作为第二个参数，例如：

EditorFor(m=>m.TimeBooked, "DateWithTimeTemplate")

[MSDN 帮助](http://msdn.microsoft.com/en-us/library/ee407414.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-22T09:57:05.803

您可以使用[UIHintAttribute](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.uihintattribute.aspx)属性。您可以使用此属性装饰`TimeBooked`属性，以便 MVC 知道要使用哪个编辑器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T09:45:34.477

是的，您可以通过添加`hh:mm`占位符来做到这一点..

```
String.Format("{0:d/M/yyyy HH:mm:ss}", DateTime.Now) 
```

有关更多示例，请参见[此处](http://www.csharp-examples.net/string-format-datetime/)..

# java - ValidationMessages.properties 文件之间的冲突

> ID：11599208
> 
> 赞同：4
> 
> 时间：2012-07-22T09:42:10.260
> 
> 标签：java, bean-validation, resourcebundle

我用来在一个公共库中收集我所有的验证约束。在 jar 的根目录中，我放置了一个`ValidationMessages_it.properties`文件。一切正常，如果我将此库放入 jsf 2 war 项目中，所有验证消息都会正确显示。`ValidationMessages_it.properties`但是，如果我也将另一个放在战争神器中，则会出现问题。在这种情况下，`{library.message_key}`会显示一个字符串。

我认为 Bean Validation 在战争中找到了正确的属性文件，并没有考虑到库中的那个。我该如何解决？

# 例子

我有一个包含自定义约束的库 commons.jar。为了为这些约束设置消息，我`ValidationMessages_it.properties`在这个库的根目录中添加了一个

```
commons.jar
    |
    + library
    |   |
    |   + CustomConstraint.class
    |
    + ValidationMessages_it.properties 
```

## ValidationMessages_it.properties

```
library.custom=Questo è l'errore di cui parlavo 
```

## 自定义约束.java

```
@Pattern( regexp = "[a-z]", message = "{library.custom}" )
@Constraint( validatedBy = {} )
@Documented
@Target( { ElementType.METHOD, ElementType.FIELD } )
@Retention( RetentionPolicy.RUNTIME )
public @interface CustomConstraint {
    String message() default "C'è un errore";

    Class<?>[] groups() default {};

    Class<? extends Payload>[] payload() default {};
} 
```

**PS：** *请注意，消息键位于@Pattern 注释而不是 message() 上，这似乎是一个错误，但否则它永远不会起作用！*

之后我想`commons.jar`在我的网络应用程序项目（jsf/mojarra 2.1）中使用它。一切正常。显示的错误消息是“Questo è l'errore di cui parlavo”。

但是现在假设我在我的 webapp 中定义了新的验证约束，所以我想通过添加一个`ValidationMessages_it.properties`in`WEB-INF/classes`文件夹来为这些约束提供翻译。在这种情况下，显示的错误消息是“{library.custom}”

所以我认为BV（或jsf？）在战争中找到了捆绑并且没有考虑到commons.jar中的那个。它在文件夹中找不到密钥`library.custom`，因此按字面意思返回。`ValidationMessages_it.properties``WEB-INF/classes``{library.custom}`

# 示例 2

基于[共享库中的 Bean Validation 约束](https://stackoverflow.com/questions/11683708/bean-validation-constraints-in-a-shared-library)，我的包结构似乎是正确的。我上传了一个简单的网络应用程序来显示问题：

*   [可以部署在符合 java EE 6 的应用程序服务器中的战争工件](http://www.filefactory.com/file/1v4e61w0ty77/n/bvtest-1_0_war)
*   [包含两个 maven 项目的源 zip，一个用于库，一个用于 webapp](http://www.filefactory.com/file/1iteiatld9of/n/bvsource_zip)

我在 Glassfish 3.1.2、JBoss AS 7.1.1、Geronimo 3.0.0 中测试了 webapp

Glassfish 和 JBoss 具有相同的行为。在 Geronimo 中它工作得更好一些。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-10-30T18:31:55.497

默认情况下，如果有多个 JAR/WAR/etc。文件包含一个具有完全相同名称的资源包文件，其中只有一个将用于验证器消息。这是这里的问题：`commons.jar`应用程序 WAR 都包含一个具有 name 的资源`ValidationMessages_it.properties`。

2015 年 7 月发布的 Hibernate Validator 5.2 增加了对聚合来自不同 JAR 文件的所有同名资源包的支持。默认情况下禁用此功能，并且可以在[org.hibernate.validator.resourceloading.PlatformResourceBundleLocator](http://docs.jboss.org/hibernate/validator/5.2/api/org/hibernate/validator/resourceloading/PlatformResourceBundleLocator.html#PlatformResourceBundleLocator-java.lang.String-java.lang.ClassLoader-boolean-)中进行配置。

例子：

```
PlatformResourceBundleLocator resourceBundleLocator =
    new PlatformResourceBundleLocator(ResourceBundleMessageInterpolator.USER_VALIDATION_MESSAGES, null, true);

Validator validator = Validation.byProvider(HibernateValidator)
    .configure()
    .messageInterpolator(new ResourceBundleMessageInterpolator(resourceBundleLocator))
    .buildValidatorFactory()
    .getValidator(); 
```

使用 Java 配置的 Spring 项目的等效代码：

```
@Bean
public LocalValidatorFactoryBean validator() {
    PlatformResourceBundleLocator resourceBundleLocator =
            new PlatformResourceBundleLocator(ResourceBundleMessageInterpolator.USER_VALIDATION_MESSAGES, null, true);

    LocalValidatorFactoryBean factoryBean = new LocalValidatorFactoryBean();
    factoryBean.setMessageInterpolator(new ResourceBundleMessageInterpolator(resourceBundleLocator));
    return factoryBean;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T14:22:51.910

我认为您的解决方案是提到的*AggregateResourceBundleLocator*。但是，属性文件不能使用相同的名称。在内部调用*ResourceBundle#getBundle*，它确实返回一个*ResourceBundle*。没有组合/合并具有相同名称的属性文件的概念。

**编辑 1**

关于这样做的标准方式 - 不幸的是没有。Bean Validation 1.1 ( [BVAL-252](https://hibernate.atlassian.net/browse/BVAL-252) ) 存在一个未解决的问题，以解决提供约束库的能力，但尚未做出任何决定，消息插值也需要解决。也许你对它应该如何工作有一个想法。如果是这样，请将您的建议提供给专家组。检查 beanvalidation.org

# visual-studio-2010 - Visual Studio 停止重建依赖项目

> ID：11599210
> 
> 赞同：7
> 
> 时间：2012-07-22T09:42:17.543
> 
> 标签：visual-studio-2010

突然之间，Visual Studio 2010 的行为不再像以前那样：

我有一个包含多个项目的解决方案：一个类库项目、一个应用程序项目和一个测试项目。

应用程序项目设置为默认启动项目。

现在，如果我更改类库中的任何内容并按 F5，Visual Studio 将不再重建类库，因此它会运行过时的代码。

与测试项目相同的行为。

我究竟做错了什么？我很确定这种行为是新的，但我不知道我改变了什么。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-22T09:59:41.553

在解决方案资源管理器中，右键单击解决方案名称并转到“配置管理器..”您将看到活动的解决方案配置。通过打开或关闭复选框来选择要构建或不构建的项目。希望能解决您的问题。

# javascript - 放大或缩小事件

> ID：11599214
> 
> 赞同：0
> 
> 时间：2012-07-22T09:42:35.747
> 
> 标签：javascript, google-maps-api-3

是否有任何事件可以检查用户端是放大地图还是缩小地图

我们所做的是.. 我们希望在服务器更改地图时将纬度或经度发送到服务器。例如，当他们结束拖动时，我们会将纬度和经度发送到服务器以加载位于该纬度和经度边界内的一些商店位置，我们将在其上放置图钉。所以所有可能的事件都是用户拖动地图、放大、缩小和滚动。我们不会使用 bounds_changed 事件，因为它会一直向服务器发送数据。

```
 //Get bound of the map when a user dragged the map.
    google.maps.event.addListener(map, 'dragend', function () {
        bound = map.getBounds();
        var latlng_NE = bound.getNorthEast();
        var latlng_SW = bound.getSouthWest();

       // Some code to send latitude or longtitude to server here
       throw new Error(latlng_NE, latlng_SW);
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T09:47:15.667

来自 Google Maps API 文档

```
google.maps.event.addListener(map, 'zoom_changed', function() {
    setTimeout(moveToDarwin, 3000);
}); 
```

[https://developers.google.com/maps/documentation/javascript/events](https://developers.google.com/maps/documentation/javascript/events)；

* * *

## 编辑

```
// closure
(function() {

    var timeout = null;
    var delay = 500;

    function react() {
        if (timeout) {
            clearTimeout(timeout)
        }
        timeout = setTimeout(react, delay)
    }

    function sendBoundsToServer() {
        bound = map.getBounds();
        var latlng_NE = bound.getNorthEast();
        var latlng_SW = bound.getSouthWest();            
        // some AJAX action to send bound to server
        // ...
    }
    //Action after a user dragged the map.
    google.maps.event.addListener(map, 'zoom_changed', function () {
       // Some code to send latitude or longtitude to server here
       setTimeout(sendMessageToServer, 1000)
    });
    google.maps.event.addListener(map, 'dragend', function () {
       // Some code to send latitude or longtitude to server here
       setTimeout(react, 1000)
    });

    // Add more events here like the two above  

}()) 
```

# ios - 游戏崩溃 3-5 个背景大精灵（每个 1920*640 ~100kb）~ 每个关卡 400-500kb

> ID：11599215
> 
> 赞同：0
> 
> 时间：2012-07-22T09:43:01.150
> 
> 标签：ios, cocos2d-iphone, sprite

我在我的 cocos2d 游戏中遇到了一个问题：在游戏的关卡层中，我有 3-5 个大精灵作为背景（每个 1920*640 ~100kb）~每个关卡 400-500kb。当我在菜单和各种游戏级别之间切换 4-5 次游戏崩溃到主 iPhone 菜单

```
[[CCDirector sharedDirector] replaceScene:transition]; 
```

没有这个大精灵，一切都很完美！

```
-(id) init
{
 ....   
    if( (self=[super init])) {
_spriteBGLevel1 = [CCSprite spriteWithFile: [NSString stringWithFormat:@"level_fon_%i_1.png", _currentLevel]]; 
_spriteBGLevel1.anchorPoint = ccp(0, 0);
_spriteBGLevel1.position = CGPointMake(0.0, 0.0); 
[self addChild:_spriteBGLevel1 z:-5];
_spriteBGLevel2 = [CCSprite spriteWithFile: [NSString stringWithFormat:@"level_fon_%i_2.png", _currentLevel]]; 
_spriteBGLevel2.anchorPoint = ccp(0, 0);
_spriteBGLevel2.position = CGPointMake(0.0, 0.0); 
[self addChild:_spriteBGLevel2 z:-5];
_spriteBGLevel3 = [CCSprite spriteWithFile: [NSString stringWithFormat:@"level_fon_%i_3.png", _currentLevel]]; 
_spriteBGLevel3.anchorPoint = ccp(0, 0);
_spriteBGLevel3.position = CGPointMake(0.0, 0.0); 
[self addChild:_spriteBGLevel3 z:-5];        

....

- (void) dealloc
{
....
    _spriteBGLevel1=nil;
    _spriteBGLevel2=nil;
    _spriteBGLevel3=nil;
    [super dealloc];
} 
```

背景.m

```
#import "Background.h"
#import "GameConfig.h"
#import "XMLReader.h"
#import "CCParallaxNode-Extras.h"
#import "SettingsManager.h"

@implementation Background

@synthesize backgrounds=_backgrounds;
@synthesize backgroundNode=_backgroundNode;

+(id) scene
{
    CCScene *scene = [CCScene node];

    Background *layer = [Background node];

    [scene addChild: layer];

    return scene;
}

-(id) init
{
    if ((self = [super init]))
    {

        CGSize screenSize = [[CCDirector sharedDirector] winSize];

        int currentLevel = [[SettingsManager sharedSettingsManager] getCurrentLevel];

        _backgroundNode = [CCParallaxNode node];
        _backgroundNode.anchorPoint = CGPointMake(0, 0);
        _backgroundNode.position = CGPointMake(0, 0);
        [self addChild:_backgroundNode z:-1];

        NSData *xmlData = [NSData dataWithContentsOfFile:[[NSBundle bundleForClass:[self class]] pathForResource:@"gameScene" ofType:@"xml"]];

        NSError *error = nil;

        NSDictionary *dictionary = [XMLReader dictionaryForXMLData:xmlData error:&error];
        NSDictionary *levelsDict = [dictionary valueForKeyPath:@"levels.level"];
        NSDictionary *levelDict;

        _backgrounds = [[[NSMutableArray alloc] init] retain];

//        [[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile: [NSString stringWithFormat:@"level_fon_%i.plist", currentLevel]];

        for (levelDict in levelsDict)
        {

            int idLevel = [[levelDict valueForKeyPath:@"id"] intValue];
            if(idLevel==currentLevel)
            {
                NSDictionary *fonsDict = [levelDict valueForKeyPath:@"background.fon"];

                NSDictionary *fonDict;
                for (fonDict in fonsDict){

                    NSString *name=[fonDict valueForKeyPath:@"name"];
                    int zIndex=[[fonDict valueForKeyPath:@"z"] intValue];
                    float ratio=[[fonDict valueForKeyPath:@"ratio"] floatValue];
                    float offsetx=[[fonDict valueForKeyPath:@"offsetx"] floatValue];
                    float offsety=[[fonDict valueForKeyPath:@"offsety"] floatValue];
                    if(zIndex<0)
                    {    
                    //CCTexture2D* tex = [[CCTextureCache sharedTextureCache] addImage:[NSString stringWithFormat:@"%@", name]];

                    //CCSprite *fon_level_1 = [CCSprite spriteWithSpriteFrameName: [NSString stringWithFormat:@"%@", name]];
                    //CCSprite *fon_level_2 = [CCSprite spriteWithSpriteFrameName: [NSString stringWithFormat:@"%@", name]];
                    //CCSprite *fon_level_1 = [CCSprite spriteWithTexture:tex];
                    //CCSprite *fon_level_2 = [CCSprite spriteWithTexture:tex];

                    fon_level_1 = [CCSprite spriteWithFile:[NSString stringWithFormat:@"%@", name]];
                    fon_level_2 = [CCSprite spriteWithFile:[NSString stringWithFormat:@"%@", name]];

                    fon_level_1.anchorPoint = CGPointMake(0, 0);
                    fon_level_1.position = CGPointMake(0, 0);
                    fon_level_2.anchorPoint = CGPointMake(0, 0);
                    fon_level_2.position = CGPointMake(0, 0);
                    //[_backgroundNode addChild:fon_level_1 z:zIndex parallaxRatio:ccp(ratio, ratio) positionOffset:ccp(offsetx, offsety*screenSize.height)];
                    //[_backgroundNode addChild:fon_level_2 z:zIndex parallaxRatio:ccp(ratio, ratio) positionOffset:ccp(fon_level_1.contentSize.width, offsety*screenSize.height)];
                    [_backgrounds addObject:fon_level_1];
                    [_backgrounds addObject:fon_level_2];

                        fon_level_1=nil;
                        fon_level_2=nil;
                    }    
                }
                break;
            }    
        }

        NSLog(@"count: %d",_backgrounds.count);
        [self scheduleUpdate];
    }
    return self;
}
- (void)scheduleUpdate
{
    [self schedule:@selector(updateBackgroud:)];
}
-(void) updateBackgroud:(ccTime)delta
{
    CGPoint backgroundScrollVel = ccp(-1000, 0);

    _backgroundNode.position = ccpAdd(_backgroundNode.position, ccpMult(backgroundScrollVel, delta));

    for (CCSprite *background in _backgrounds) {
        if (([_backgroundNode convertToWorldSpace:background.position].x+background.contentSize.width/10) < -(background.contentSize.width)) {
            [_backgroundNode incrementOffset:ccp(background.contentSize.width*2,0) forChild:background];
        }
    }
}
- (void) dealloc
{
     _backgroundNode = nil;
    // _backgrounds = nil;
    [_backgrounds removeAllChildren]; 
    [_backgrounds release];
    [super dealloc];
}
@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T13:26:00.403

好吧，这就是我的做法：

*   尽可能接近 POT 纹理大小。1920x640 占用的内存与 2048x2048 一样多。也许你可以让你的艺术家将三个五个精灵组合在一个 2048x2848 png 上，用 plist 裁剪（比如动画）。
*   只要有可能，“及时”加载纹理，即在它们需要可见之前。如果加载时间成为问题（在不适当的游戏环境下可察觉延迟），请将纹理转换为 .pvr 格式（更快的加载），然后再转换为 .pvr.gz（仍然更快的加载时间，更小的应用程序下载大小）。PVR 会导致一些伪影，因此在提交之前请与您的项目中的图形人员核对一下。
*   从任何级别过渡（到某种菜单或某个过场动画）中出来，清理纹理使用的内存。这意味着如果游戏逻辑需要返回主场景，请在过渡期间及时重新加载纹理。
*   最后，在加载这些大纹理之前更改深度设置（下面的代码片段）。设置为 RGBA444 将节省 75% 的内存需求，但是，您会受到一些图形质量的影响，尤其是对于高饱和度图像。再一次，如果您需要去那里，请让您的图形人员将图像优化到这个深度，以便他们对设备上的结果感到满意。

清理：

```
NSLog(@"GESprite<removeUnusedSprites> : before purging all caches");
[[CCTextureCache sharedTextureCache] dumpCachedTextureInfo];
[[CCSpriteFrameCache sharedSpriteFrameCache] removeUnusedSpriteFrames];
[[CCDirector sharedDirector] purgeCachedData];
NSLog(@"GESprite<removeUnusedSprites> : after purging all caches");
[[CCTextureCache sharedTextureCache] dumpCachedTextureInfo]; 
```

深度（在 CCSprite 派生类中，一些实用方法），您可以随时随地执行此操作：

```
+(void) mediumPixelFormat{
    [CCTexture2D setDefaultAlphaPixelFormat:kTexture2DPixelFormat_RGBA4444];
}

+(void) highPixelFormat{
    [CCTexture2D setDefaultAlphaPixelFormat:kTexture2DPixelFormat_RGBA8888];
} 
```

# php - 为什么我的 php 会话信息在不同的服务器上表现不同

> ID：11599224
> 
> 赞同：1
> 
> 时间：2012-07-22T09:44:36.123
> 
> 标签：php

我正在编写一个简单的网站 php/jquery/mysql 等。目前我有一个非常简单的登录系统，一旦用户登录，就会设置一个会话变量，该变量被引用以确认他们是否仍在其他页面上登录. 代码是：

```
$_SESSION['logged_in'] = TRUE;
$_SESSION['member_id'] = $member_id_for_session;
$_SESSION['handle'] = $user_handle; 
```

我在 util 文件中有多种函数可以利用它，例如：

```
function echoUserHandle() {
    if (isset($_SESSION['handle'])) {
        echo "Welcome " . $_SESSION['handle'];
    } else {
        echo "You are not logged in";
    }
} 
```

和

```
function checkLoggedIn() {

if (isset($_SESSION['logged_in'])) {
    return TRUE;
} else {
    return FALSE;
}
} 
```

这在我的 Mac 上使用 chrome 的 MAMP 服务器上运行良好，但是当我将它推送到远程服务器时，即使在我用来开发的同一浏览器上，我也会得到不一致的数据视图。我看到这一点只是因为某些页面显示状态“您未登录”，而有些页面显示正确的用户 ID。

此外，一旦用户注销，会话将被完全销毁：

```
 unset($_SESSION['logged_in']);
        unset($_SESSION['member_id']);
        unset($_SESSION['handle']);
        $_SESSION = array();

        if (ini_get("session.use_cookies")) {
            error_log("unsetting cookie:" . session_name(), 0);
            $params = session_get_cookie_params();
            error_log("cookie params:" . $params, 0);
            setcookie(session_name(), '', time() - 42000, $params["path"], $params["domain"], $params["secure"], $params["httponly"]);
        }

        session_destroy(); 
```

这可能有点矫枉过正，但是当我在某些页面上以其他用户身份重新登录时，它仍会显示以前登录的用户。这表明会话有问题，不是吗？

任何人都可以提出一种调试方法，我在其他领域做了很多开发，但 php 对我来说仍然是新的。

非常感谢

# python - 如何在python中将二进制字符串转换为ascii字符串？

> ID：11599226
> 
> 赞同：6
> 
> 时间：2012-07-22T09:44:42.913
> 
> 标签：python, binary, ascii

我制作了一个小 Python 程序，它从文件中读取二进制文件并将其存储到文本文件中，读取文本文件并存储二进制文件。但是，我无法让二进制文件工作......它读取这样的文件：

```
f_bin = open(bin_file,"rb")
to_bin_data = f_bin.read()
bin_data = bin(reduce(lambda x, y: 256*x+y, (ord(c) for c in to_bin_data), 0))
f_bin.close() 
```

**这个对我不起作用...[将二进制转换为ASCII，反之亦然](https://stackoverflow.com/questions/7396849/convert-binary-to-ascii-and-vice-versa-python)**

类似这个网页的东西：[http ://www.roubaixinteractive.com/PlayGround/Binary_Conversion/Binary_To_Text.asp](http://www.roubaixinteractive.com/PlayGround/Binary_Conversion/Binary_To_Text.asp)

**编辑：我现在为它制作了一个很长的 if else 脚本，但感谢您的回答**

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-22T11:00:54.527

让我们以“你好”这个词为例`0110100001100101011011000110110001101111`

要将其转换回字符，我们可以使用`chr`和`int`（以 2 为基数）和一些列表切片......

```
''.join(chr(int(bin_text[i:i+8], 2)) for i in xrange(0, len(bin_text), 8)) 
```

如果我们想将 'hello' 转换为二进制，我们可以使用`ord`字符串格式化......

```
''.join('{:08b}'.format(ord(c)) for c in 'hello') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-22T10:23:44.190

也许您可以使用内置函数：

```
>>> myString = "hello"
>>> ba = bytearray(myString)
>>> ba[0]
104
>>> bin(ba[0])
'0b1101000' 
```

拆分`0b`：

```
>>> bin(ba[0]).split('b')[1]
'1101000' 
```

或者

```
>>> bin(ba[0])[2:]
'1101000' 
```

我希望你能用片段解决你的问题！:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-22T11:26:15.207

我使用结构模块：

```
import struct
buf=struct.unpack('c',to_bin_data) # for one character
buf=struct.unpack('s',to_bin_data) # for a string 
```

**编辑：**对不起，误解了这个问题......这适用于二进制数据，不适用于二进制表示的字符串。

# css - 如何停止以特定宽度为中心的背景图像

> ID：11599227
> 
> 赞同：0
> 
> 时间：2012-07-22T09:45:08.610
> 
> 标签：css

有没有办法停止以特定宽度为中心的背景图像？

为了说明问题，减小以下站点的宽度，直到出现滚动条。然后观察背景图像如何保持居中，但是，所有其他元素都保持其位置。

看[这里](https://dl.dropbox.com/u/2306276/site/front.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T10:00:05.680

您可以将 min-width 添加到您的#header css

```
#header { background: #f8f8f8 url("background.jpg") no-repeat center bottom; background-position-y: 160px; min-width:960px;} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T09:57:24.337

使用媒体查询将某些样式设置为特定宽度并用于`background-position`停止使图像居中。一个例子：http: [//3.jsbin.com/ojemur/4/watch](http://3.jsbin.com/ojemur/4/watch)（调整浏览器窗口的大小，如果背景变红，图像不会垂直居中）

有关媒体查询的更多信息：

*   [webdesignerwall 上的 css3 媒体查询](http://webdesignerwall.com/tutorials/css3-media-queries)
*   [在 webdesignerwall 上使用 CSS3 媒体查询进行响应式设计](http://webdesignerwall.com/tutorials/responsive-design-with-css3-media-queries)
*   [nettuts+ 上的 CSS 媒体查询速成课程](http://net.tutsplus.com/tutorials/html-css-techniques/quick-tip-a-crash-course-in-css-media-queries/)

# z3 - 如何将公式转换为析取范式？

> ID：11599230
> 
> 赞同：5
> 
> 时间：2012-07-22T09:45:48.077
> 
> 标签：z3, smt

说给定一个公式

(t1>=2 或 t2>=3) 和 (t3>=1)

我希望得到它的析取范式 (t1>=2 and t3>=1) or (t2>=3 and t3>=1)

如何在 Z3 中实现这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-23T15:09:13.123

Z3 没有将公式转换为 DNF 的 API 或策略。但是，它支持使用该策略将一个目标分解为多个子目标`split-clause`。给定 CNF 中的输入公式，如果我们详尽地应用此策略，则每个输出子目标都可以视为一个大合取。这是有关如何执行此操作的示例。

[http://rise4fun.com/Z3/zMjO](http://rise4fun.com/Z3/zMjO)

这是命令：

```
(apply (then simplify (repeat (or-else split-clause skip)))) 
```

组合器继续应用该`repeat`策略，直到它不执行任何修改。`split-clause`如果输入没有子句，则策略失败。这就是为什么我们使用`or-else`组合器和`skip`（什么都不做）策略。我们可以通过在将每个子句拆分为案例后使用简化（例如，，）的策略来改进命令`simplify`。`solve-eqs`

请注意，上面的脚本假定输入公式是 CNF。

# google-apps-script - 处理 Google Apps 脚本中的空单元格

> ID：11599231
> 
> 赞同：1
> 
> 时间：2012-07-22T09:45:57.703
> 
> 标签：google-apps-script

为什么这不起作用？

```
function sendDuesReminder() {

  var paid = 3;
  var name = 1;
  var submitted = 0;
  var allowance = 9;
  var ms = 86400000; // Number of milliseconds in a day
  var today = new Date();
  var reminder = 72;
  var data = SpreadsheetApp.openById('___').getSheetByName('Master').getDataRange().getValues();

  for (var i = 1; i < data.length; i++) {
    if (data[i][paid] != 'Yes' &&
        data[i][paid] != 'yes' &&
        data[i][reminder] == '' &&
        ((((today.valueOf()) - (data[i][submitted].valueOf()))/ms) > allowance)) {
        MailApp.sendEmail("___", "___") ;
    SpreadsheetApp.openById('___').getSheetByName('Master').getRange(i+1, reminder).setValue(today);
    }

 if (data[i][paid] != 'Yes' &&
        data[i][paid] != 'yes' &&
        data[i][reminder] != null &&
       ((((today.valueOf()) - (data[i][reminder].valueOf()))/ms) > allowance)) {
        MailApp.sendEmail("___", "___") ;
        SpreadsheetApp.openById('___').getSheetByName('Master').getRange(i+1, reminder).setValue(today);
    }
  SpreadsheetApp.flush();        
  }
  Browser.msgBox("OK. Reminder e-mails have been sent. !")
} 
```

我真正想做的是，如果 BT 列为空，或者 BT 列中的日期超过 9 天，则发送电子邮件。但我不知道如何在 if 语句中包含 or 语句。所以我只是设置了两个单独的 if 语句。

但是，当我在第二个 if 语句中使用 '' 时，我收到一条错误消息，指出它无法获取未定义内容的值。

当我使用 null 或 undefined 时，它不起作用。

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T10:32:52.970

*   您确定电子表格中有 72 列吗？当您使用`data[i][reminder] == ''`返回的错误时，涉及等号的第一项，而不是第二项……所以我猜数据没有 72 个二级索引，这将返回一个错误。（**编辑：**更清楚一点：您无法使用未定义项目的值`.valueOf`并将其除以某物，这就是为什么您会收到*“一个错误，指出它无法获得未定义项目的值”*。）
*   如果您想了解如何实现 OR 语句，您可以查看[w3school, 'Comparison Operators'](http://www.w3schools.com/js/js_comparisons.asp)
*   请注意，您可以直接比较日期对象，您不需要显式地将它们转换为毫秒，javascript 在内部进行。

这是您如何快速编写此内容的示例

```
var tendaysBefore = new Date(new Date().getTime()-10*24*60*60*1000);// 10 days before
 if (data[i][paid].toLowerCase() != 'yes' && (data[i][reminder] == ''||(data[i][reminder] == null || data[i][submitted]< tendaysBefore)) { // not 'yes' and one of the 3 other conditions
    MailApp.sendEmail("___", "___") ;
SpreadsheetApp.openById('___').getSheetByName('Master').getRange(i+1, reminder).setValue(today);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T17:46:01.817

所以这是我根据 Serge 最初的想法尝试的循环代码。

```
for (var i = 1; i < data.length; i++) {
    if (data[i][paid].toLowerCase() != 'yes' &&
        (data[i][submitted]<tendaysBefore &&
        (data[i][reminder] == ''||
        data[i][reminder] == null))) {
        MailApp.sendEmail("___", "Reminder About Dues for Newcomers & Neighbors", "___") ;
    SpreadsheetApp.openById('___').getSheetByName('Master').getRange(i+1, reminder).setValue(today);
    }
  SpreadsheetApp.flush();        
  } 
```

我改变了 if 语句的顺序，因为我不确定我是否已经用英语充分表达了我想要让它做的事情。

我想说的是，如果他们没有付款并且自他们提交表单以来已经过去了 10 天，并且提醒单元格为空白或具有空值，则发送电子邮件。

（一旦我得到这个声明，我会继续说，如果在我们发送第一封电子邮件后 10 天过去了，他们仍然没有付款，我们会发送另一封电子邮件。这就是为什么我要通过所有这些诡计都是为了提醒一个日期，而不仅仅是“发送”之类的东西。）

我的代码有效。除了，如果你运行它，发送第一批电子邮件，让它在提醒中添加今天的日期，然后再次运行它，它会重新发送电子邮件。

简而言之，

```
(data[i][reminder] == ''||
        data[i][reminder] == null)) 
```

似乎没有完成应该做的事情，这使得 if 语句对于提醒列中包含 ANYTHING 的任何行都失败。这就是为什么我最初提出“如何处理空单元格”？因为——为了我的一生，我无法理解为什么

```
(data[i][reminder] == ''||
        data[i][reminder] == null)) 
```

不是防弹的。

正如我在对 Serge 的回答的评论中所建议的那样，这开始让我发疯了。因此，对于您的任何想法，我都不能感谢任何人。提前致谢！

针对 Serge 提出的我从日志中捕获一些值的问题，这是我将他请求的代码添加到循环后的日志输出：

```
Paid=yes date subm=Sat Jun 02 2012 14:44:27 GMT-0400 (EDT)reminder=undefined
Paid=yes date subm=reminder=undefined
Paid=yes date subm=reminder=undefined
Paid=yes date subm=reminder=undefined
Paid=yes date subm=reminder=undefined
Paid=yes date subm=reminder=undefined
Paid=yes date subm=reminder=undefined
Paid=yes date subm=reminder=undefined
Paid=yes date subm=reminder=undefined
Paid=yes date subm=reminder=undefined
Paid=yes date subm=reminder=undefined
Paid=yes date subm=Wed Jun 27 2012 16:22:35 GMT-0400 (EDT)reminder=undefined
Paid=yes date subm=Fri Jun 29 2012 09:07:21 GMT-0400 (EDT)reminder=undefined
Paid=yes date subm=Mon Jul 09 2012 10:11:20 GMT-0400 (EDT)reminder=undefined
Paid=yes date subm=Mon Jul 09 2012 10:16:56 GMT-0400 (EDT)reminder=undefined
Paid= date subm=Mon Jul 09 2012 10:17:00 GMT-0400 (EDT)reminder=undefined
Paid=yes date subm=Mon Jul 09 2012 10:26:36 GMT-0400 (EDT)reminder=undefined
Paid=yes date subm=Mon Jul 09 2012 10:30:23 GMT-0400 (EDT)reminder=undefined
Paid=yes date subm=Mon Jul 09 2012 11:02:19 GMT-0400 (EDT)reminder=undefined
Paid= date subm=Mon Jul 09 2012 12:33:57 GMT-0400 (EDT)reminder=undefined
Paid=yes date subm=Mon Jul 09 2012 13:48:54 GMT-0400 (EDT)reminder=undefined
Paid= date subm=Mon Jul 09 2012 18:19:22 GMT-0400 (EDT)reminder=undefined
Paid= date subm=Mon Jul 09 2012 21:07:05 GMT-0400 (EDT)reminder=undefined
Paid= date subm=Mon Jul 09 2012 21:44:13 GMT-0400 (EDT)reminder=undefined
Paid= date subm=Mon Jul 09 2012 21:53:55 GMT-0400 (EDT)reminder=undefined
Paid= date subm=Tue Jul 10 2012 11:09:03 GMT-0400 (EDT)reminder=undefined
Paid= date subm=Tue Jul 10 2012 12:57:41 GMT-0400 (EDT)reminder=undefined
Paid=yes date subm=Wed Jul 11 2012 18:36:49 GMT-0400 (EDT)reminder=undefined
Paid= date subm=Thu Jul 12 2012 07:14:53 GMT-0400 (EDT)reminder=undefined
Paid=yes date subm=Tue Jul 17 2012 14:54:16 GMT-0400 (EDT)reminder=undefined
Paid=yes date subm=Wed Jul 18 2012 20:26:23 GMT-0400 (EDT)reminder=undefined
Paid= date subm=Thu Jul 19 2012 13:43:09 GMT-0400 (EDT)reminder=undefined 
```

我不知道该怎么做，但我敢肯定比我更聪明的人在这里看到了一些有趣的东西？

好的，在 Serge 与我一起努力解决问题之后，这是解决此问题的代码。非常感谢 Serge！

```
function sendDuesReminder() {

  var paid = 3;
  var name = 1;
  var submitted = 0;
  var allowance = 9;
  var ms = 86400000; // Number of milliseconds in a day
  var today = new Date();
  var reminder = 72;
  var reminderArray = reminder - 1;
  var tendaysBefore = new Date(new Date().getTime()-10*24*60*60*1000);
  var data = SpreadsheetApp.openById('___').getSheetByName('Master').getDataRange().getValues();

  for (var i = 1; i < data.length; i++) {
    if (data[i][paid].toLowerCase() != 'yes' &&
        (data[i][submitted]<tendaysBefore &&
        (data[i][reminderArray] == ''||
        data[i][reminderArray] == null))) {
        MailApp.sendEmail("___", "___", "___") ;
    SpreadsheetApp.openById('___').getSheetByName('Master').getRange(i+1, reminder).setValue(today);
    }
  SpreadsheetApp.flush();        
  Logger.log('Paid='+data[i][paid].toLowerCase()+' date subm='+data[i][submitted]+'reminder='+data[i][reminder])
  }
  Browser.msgBox("OK. Reminder e-mails have been sent. !")
} 
```

# html - 获取标题以与页面顶部对齐

> ID：11599233
> 
> 赞同：1
> 
> 时间：2012-07-22T09:46:44.937
> 
> 标签：html, css

我刚开始建立这个网站时遇到了这个奇怪的问题。我想让页眉与页面顶部完全对齐。但由于某种原因，有一个小空间，大约 20px 高，无论我怎么尝试都不会消失。我假设我没有得到关于 CSS 和 html 的一些东西，所以你们能帮帮我吗？

**CSS**：

```
#header {
    background-color:#3429C9;
    /*-webkit-border-radius:15px;
    -moz-border-radius:15px;
    border-radius:15px;*/
    display:block;
    position:relative;
    z-index:2;
    margin-top:-20px;
    border-bottom:2px solid white;
    margin-bottom:20px;
    height:60px;
}

body {
    text-align:center;
    font-family: Georgia, Serif;
    background: #000000;
    margin:0;
    height:100px;
    display:block;
    border:2px solid red;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T09:53:53.137

每个浏览器（firefox、chrome、IE）都有一个默认的 CSS，它为元素提供默认样式。它还提供了一些默认边距/填充，因此通常在开始网站设计时，您应该使用[css 重置文件](http://meyerweb.com/eric/tools/css/reset/)来重置所有默认样式。

这样，您就可以为所有浏览器获得相同的基本行为。

要快速解决您的问题，只需将标题填充/边距设置为 0。

# django - 安装了 Celery 但它不执行任务

> ID：11599239
> 
> 赞同：1
> 
> 时间：2012-07-22T09:47:29.420
> 
> 标签：django, amazon-web-services, celery

我正在使用亚马逊网络服务。我正在努力让 Celery 工作。试图做文档所说的（http://docs.celeryproject.org/en/latest/django/first-steps-with-django.html#configuring-your-django-project-to-use-celery），但是当我启动 celery worker 并尝试调用任务时，没有任何反应，就好像没有任务一样。

这是我的 settings.py 文件：

```
import os
import djcelery
import djkombu
import sys
import tasks
sys.path.append(os.getcwd())

djcelery.setup_loader()

# Django settings for analogg project.

DEBUG = False
TEMPLATE_DEBUG = DEBUG

ADMINS = (
     ('Nikita', 'bodnarnikita@gmail.com'),
)

MANAGERS = ADMINS

DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3', # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.
        'NAME': 'analoggdb',                      # Or path to database file if using sqlite3.
        'USER': '',                      # Not used with sqlite3.
        'PASSWORD': '',                  # Not used with sqlite3.
        'HOST': '',                      # Set to empty string for localhost. Not used with sqlite3.
        'PORT': '',                      # Set to empty string for default. Not used with sqlite3.
    }
}

# Local time zone for this installation. Choices can be found here:
# http://en.wikipedia.org/wiki/List_of_tz_zones_by_name
# although not all choices may be available on all operating systems.
# On Unix systems, a value of None will cause Django to use the same
# timezone as the operating system.
# If running in a Windows environment this must be set to the same as your
# system time zone.
TIME_ZONE = 'America/Chicago'

# Language code for this installation. All choices can be found here:
# http://www.i18nguy.com/unicode/language-identifiers.html
LANGUAGE_CODE = 'en-us'

SITE_ID = 1

# If you set this to False, Django will make some optimizations so as not
# to load the internationalization machinery.
USE_I18N = True

# If you set this to False, Django will not format dates, numbers and
# calendars according to the current locale.
USE_L10N = True

# If you set this to False, Django will not use timezone-aware datetimes.
USE_TZ = True

# Absolute filesystem path to the directory that will hold user-uploaded files.
# Example: "/home/media/media.lawrence.com/media/"
MEDIA_ROOT = ''

# URL that handles the media served from MEDIA_ROOT. Make sure to use a
# trailing slash.
# Examples: "http://media.lawrence.com/media/", "http://example.com/media/"
MEDIA_URL = '/static/'

# Absolute path to the directory static files should be collected to.
# Don't put anything in this directory yourself; store your static files
# in apps' "static/" subdirectories and in STATICFILES_DIRS.
# Example: "/home/media/media.lawrence.com/static/"
SITE_ROOT = os.path.dirname(os.path.realpath(__file__))
STATIC_ROOT = os.path.join(SITE_ROOT, 'static')

# URL prefix for static files.
# Example: "http://media.lawrence.com/static/"
STATIC_URL = 'http://analogg.info/static/'

# Additional locations of static files
STATICFILES_DIRS = (
    # Put strings here, like "/home/html/static" or "C:/www/django/static".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
)

# List of finder classes that know how to find static files in
# various locations.
STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
    'django.contrib.staticfiles.finders.DefaultStorageFinder',
)

ADMIN_MEDIA_PREFIX = '/static/admin/'

# List of callables that know how to import templates from various sources.
TEMPLATE_LOADERS = (
    'django.template.loaders.filesystem.Loader',
    'django.template.loaders.app_directories.Loader',
#     'django.template.loaders.eggs.Loader',
)

MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    # Uncomment the next line for simple clickjacking protection:
    # 'django.middleware.clickjacking.XFrameOptionsMiddleware',
)

ROOT_URLCONF = 'analogg.urls'

# Python dotted path to the WSGI application used by Django's runserver.
WSGI_APPLICATION = 'analogg.wsgi.application'

TEMPLATE_DIRS = (
    "/templates/",
    "/home/ubuntu/analogg/templates",
    # Put strings here, like "/home/html/django_templates" or "C:/www/django/templates".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
)

INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    # Uncomment the next line to enable the admin:
    'django.contrib.admin',
    # Uncomment the next line to enable admin documentation:
    'django.contrib.admindocs',
)

INSTALLED_APPS += ('djcelery', )
#INSTALLED_APPS += ('djkombu', )

CELERYBEAT_SCHEDULER = "djcelery.schedulers.DatabaseScheduler"

CELERY_SEND_TASK_ERROR_EMAILS = True
CELERY_DISABLE_RATE_LIMITS = True
CELERY_IMPORTS = ("analogg.tasks", )

#BROKER_URL = 'amqp://guest:guest@localhost:5672/'
#BROKER_BACKEND = "djkombu.transport.DatabaseTransport"

# A sample logging configuration. The only tangible logging
# performed by this configuration is to send an email to
# the site admins on every HTTP 500 error when DEBUG=False.
# See http://docs.djangoproject.com/en/dev/topics/logging for
# more details on how to customize your logging configuration.
LOGGING = {
    'version': 1,
    'disable_existing_loggers': False,
    'filters': {
        'require_debug_false': {
            '()': 'django.utils.log.RequireDebugFalse'
        }
    },
    'handlers': {
        'mail_admins': {
            'level': 'ERROR',
            'filters': ['require_debug_false'],
            'class': 'django.utils.log.AdminEmailHandler'
        }
    },
    'loggers': {
        'django.request': {
            'handlers': ['mail_admins'],
            'level': 'ERROR',
            'propagate': True,
        },
    }
} 
```

这是我的views.py 文件：

```
# -*- coding: utf-8 -*-
from django.http import HttpResponseRedirect, HttpResponse
from django.template import Context, loader, RequestContext
from django.shortcuts import render_to_response
from tasks import parsesob, add
from parsersob import parser
import os, random, string

def index(request):
    html = "<html><body>Hello, world!</body></html>"
    add.apply_async(args=[id, '23bnn'])
    return HttpResponse(html) 
```

这是我的 tasks.py 文件：

```
from celery.decorators import task
from celery.task.schedules import crontab
from parsersob import parser
#from parsersob2 import parser2
from celery import Celery

#celery = Celery('tasks', broker='amqp://rabbitmqprelaunch9176@ip-10-117-81-80//')

@task
def add(id, a1, a2):
    f = open('add.txt', 'w')
    g = a1 + a2
    f.write(g)
    f.close() 
```

这是我的 celeryconfig.py 文件与 tasks.py、settings.py 和 views.py 位于同一文件夹中：

```
#BROKER_URL = 'amqp://'
#CELERY_RESULT_BACKEND = 'analoggdb'
#BROKER_URL = "amqp://guest:guest@localhost:5672//"
CELERY_IMPORTS = ("analogg.tasks", )
#CELERY_RESULT_DBURI = "sqlite:///analoggdb.db"

CELERY_TASK_SERIALIZER = 'json'
CELERY_RESULT_SERIALIZER = 'json'
CELERY_TIMEZONE = 'Europe/Moscow'
CELERY_ENABLE_UTC = True 
```

我是新手，所以谁能告诉我该怎么做才能使它工作。任何帮助将不胜感激。

升级版：

```
ubuntu@ip-10-117-81-80:/var/log/apache2$ sudo rabbitmqctl status
Status of node 'rabbit@ip-10-117-81-80' ...
[{pid,849},
 {running_applications,[{rabbit,"RabbitMQ","2.7.1"},
                        {os_mon,"CPO  CXC 138 46","2.2.7"},
                        {sasl,"SASL  CXC 138 11","2.1.10"},
                        {mnesia,"MNESIA  CXC 138 12","4.5"},
                        {stdlib,"ERTS  CXC 138 10","1.17.5"},
                        {kernel,"ERTS  CXC 138 10","2.14.5"}]},
 {os,{unix,linux}},
 {erlang_version,"Erlang R14B04 (erts-5.8.5) [source] [64-bit] [rq:1] [async-threads:30] [kernel-poll:true]\n"},
 {memory,[{total,25494568},
          {processes,11083752},
          {processes_used,11077008},
          {system,14410816},
          {atom,1124433},
          {atom_used,1120234},
          {binary,89696},
          {code,11134393},
          {ets,752120}]},
 {vm_memory_high_watermark,0.3999999990304762},
 {vm_memory_limit,247544217}]
...done. 
```

运行 celeryd 的输出：

```
ubuntu@ip-10-117-81-80:~/analogg$ python manage.py celeryd worker --loglevel=info

 -------------- celery@ip-10-117-81-80 v3.0.3 (Chiastic Slide)
---- **** ----- 
--- * ***  * -- [Configuration]
-- * - **** --- . broker:      amqp://guest@localhost:5672//
- ** ---------- . app:         default:0x13c2a90 (djcelery.loaders.DjangoLoader)
- ** ---------- . concurrency: 1 (processes)
- ** ---------- . events:      OFF (enable -E to monitor this worker)
- ** ---------- 
- *** --- * --- [Queues]
-- ******* ---- . celery:      exchange:celery(direct) binding:celery
--- ***** ----- 

[Tasks]
  . analogg.tasks.add
  . analogg.tasks.parsesob

[2012-07-22 06:24:30,336: WARNING/MainProcess] celery@ip-10-117-81-80 has started. 
```

升级版：

```
 [Sun Jul 22 08:10:58 2012] [error] [client 37.110.0.126] mod_wsgi (pid=7411): Exception occurred processing WSGI script '/home/ubuntu/analogg/apache/django.wsgi'.
[Sun Jul 22 08:10:58 2012] [error] [client 37.110.0.126] Traceback (most recent call last):
[Sun Jul 22 08:10:58 2012] [error] [client 37.110.0.126]   File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/wsgi.py", line 241, in __call__
[Sun Jul 22 08:10:58 2012] [error] [client 37.110.0.126]     response = self.get_response(request)
[Sun Jul 22 08:10:58 2012] [error] [client 37.110.0.126]   File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py", line 82, in get_response
[Sun Jul 22 08:10:58 2012] [error] [client 37.110.0.126]     urlconf = settings.ROOT_URLCONF
[Sun Jul 22 08:10:58 2012] [error] [client 37.110.0.126]   File "/usr/local/lib/python2.7/dist-packages/django/utils/functional.py", line 185, in inner
[Sun Jul 22 08:10:58 2012] [error] [client 37.110.0.126]     return func(self._wrapped, *args)
[Sun Jul 22 08:10:58 2012] [error] [client 37.110.0.126] AttributeError: 'Settings' object has no attribute 'ROOT_URLCONF'
[Sun Jul 22 08:10:58 2012] [error] [client 37.110.0.126] mod_wsgi (pid=7377): Exception occurred processing WSGI script '/home/ubuntu/analogg/apache/django.wsgi'.
[Sun Jul 22 08:10:58 2012] [error] [client 37.110.0.126] Traceback (most recent call last):
[Sun Jul 22 08:10:58 2012] [error] [client 37.110.0.126]   File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/wsgi.py", line 241, in __call__
[Sun Jul 22 08:10:58 2012] [error] [client 37.110.0.126]     response = self.get_response(request)
[Sun Jul 22 08:10:58 2012] [error] [client 37.110.0.126]   File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py", line 82, in get_response
[Sun Jul 22 08:10:58 2012] [error] [client 37.110.0.126]     urlconf = settings.ROOT_URLCONF
[Sun Jul 22 08:10:58 2012] [error] [client 37.110.0.126]   File "/usr/local/lib/python2.7/dist-packages/django/utils/functional.py", line 185, in inner
[Sun Jul 22 08:10:58 2012] [error] [client 37.110.0.126]     return func(self._wrapped, *args)
[Sun Jul 22 08:10:58 2012] [error] [client 37.110.0.126] AttributeError: 'Settings' object has no attribute 'ROOT_URLCONF' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T11:40:17.080

我不太确定这里有什么问题，但这里有一个示例配置，它有效：

这位于 settings.py 的末尾：

```
#CELERY CONFIG
import djcelery
djcelery.setup_loader()

BROKER_HOST = "Host"
BROKER_PORT = "Port"
BROKER_USER = "User"
BROKER_PASSWORD = "Pass"
BROKER_VHOST = "VHost"

CELERY_DEFAULT_QUEUE = "some_queue"
CELERY_DEFAULT_EXCHANGE = "some_exc" 
```

使用[rabbitmqctl工具配置代理的用户/通行证/虚拟主机](http://www.rabbitmq.com/man/rabbitmqctl.1.man.html)

您可以跟踪队列/交换

```
rabbitmqadmin get queue="some_queue" 
```

`/var/log/rabbitmq/rabbit@localhost.log`注意：跟踪日志或任何日志文件非常有用。这将显示与 RabbitMQ 的连接是否存在问题，例如错误的凭据、权限等。

# unit-testing - 从根文件夹开始创建代码覆盖率报告

> ID：11599242
> 
> 赞同：2
> 
> 时间：2012-07-22T09:48:01.580
> 
> 标签：unit-testing, zend-framework, phpunit

我刚刚创建了一个新的 zend 框架应用程序来尝试单元测试。

我已按照[本](http://grover.open2space.com/content/unit-testing-zend-framework-111-and-phpunit)教程进行操作，并且一切似乎都可以正常进行测试。覆盖率报告的显示有问题。它显示了正确的信息，但报告从我的硬盘驱动器的根目录开始，我需要遍历树到我的项目文件夹以查看有用的信息。

这意味着每次运行测试时，我都需要单击 5 个文件夹深处才能获得实际报告。

如何使报告在我的项目文件夹中开始？这是我的 phpunit 配置文件：

```
<phpunit bootstrap="./bootstrap.php">
    <testsuite name="Application Test Suite">
        <directory>./application</directory>
    </testsuite>
    <testsuite name="Library Test Suite">
        <directory>./library</directory>
    </testsuite>

    <filter>
        <whitelist>
            <directory>../../library/Zend</directory>
            <exclude>
                <directory suffix=".phtml">../application/</directory>
                <file>../application/Bootstrap.php</file>
                <file>../application/controllers/ErrorController.php</file>
            </exclude>          
        </whitelist>
    </filter>

    <logging>
        <log type="coverage-html" target="./log/report" charset="UTF-8" yui="true" 
             hightlight="true" lowupperbound="50" highlowerbound="80">
            <log type="testdox" target="./log/testdox.html">
            </log>
        </log>
    </logging>
</phpunit> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T18:59:07.440

我解决了问题...

我需要在白名单中明确指定我的应用程序文件夹。如果为空，则代码覆盖率报告仅从“c:”开始并尝试查找每个“.php”文件。

在白名单部分添加该行后：

```
<directory>../application/</directory> 
```

它按预期工作。

Since I don't have any library tests in my test folder, including the Zend library folder probably had no effect and the report must have considered the whitelist empty. And because there is no blacklist, it just started from the root.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T10:06:15.387

代码覆盖率从报告中包含的所有文件的最常见路径开始。因此，如果您的 Web 根目录位于 /var/www 并且您在 /usr/local/zend/ 中包含库，那么最常见的路径将是根路径。

解决方案是排除库路径，因为通常无论如何您都不想测量外部库的代码覆盖率。

# iphone - Iphone：从数据库中获取最大值

> ID：11599253
> 
> 赞同：0
> 
> 时间：2012-07-22T09:50:51.420
> 
> 标签：iphone, objective-c, database

我正在从 iPhone 应用程序中的数据库获取数据，我想要“价格”列中的最大数量，并且此代码不起作用

```
for(int *i=0; i <= [Rows count]; i++){
    Dict = [Rows objectAtIndex:i];
    if([[Dict objectForKey:@"Price"]intValue] > MaxNum){
        MaxNum = [[Dict objectForKey:@"Price"]floatValue];   
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T10:13:29.337

如果您使用核心数据，请看这里：[Querying max, min and other via Core Data](https://stackoverflow.com/questions/4789033/querying-max-min-and-other-via-core-data)

如果你使用 sqlite，这是一个简单的 sql 请求：

SELECT MAX(Price) FROM yourtables WHERE yourpredicates;

# python - Python - 操作列表以创建另一个列表

> ID：11599256
> 
> 赞同：4
> 
> 时间：2012-07-22T09:51:47.037
> 
> 标签：python, list

我有许多长度相等的列表，比如 4 个，但这可以改变。我想要做的是组合这些列表，以便将每个列表的第一项 item[0] 组合成一个新列表。与 item[1]、item[2] 等类似。这看起来很简单，但我如何确保列表名称（即 slide1）是从第一个列表（list1）动态创建的。

即我想从这个开始：

```
list1 = ['slide1','slide2','slide3','slide4']
list2 = [1,2,3,4]
list3 = ['banana', 'apple', 'pear', 'orange'] 
```

对此：

```
slide1 = ['slide1',1,'banana']
slide2 = ['slide2',2,'apple']
slide3 = ['slide3',3,'pear']
slide4 = ['slide4',4,'orange'] 
```

我需要这样做的原因是随后将这些列表输入数据库。有什么线索吗？我想我知道如何执行 for 循环，但我坚持创建“动态”列表名称。我应该使用字典吗？

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-22T09:53:04.427

很简单：

```
lst = zip(list1, list2, list3)

print(lst[0])
>>> ('slide1', 1, 'banana')

# in case you need a list, not a tuple
slide1 = list(lst[0]) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-22T10:22:32.167

您不想即时创建变量名。

实际上，您`list1, list2, list3`首先不应该拥有一个列表，而应该拥有一个名为的列表`lists`：

```
>>> lists = [['slide1','slide2','slide3','slide4'], [1,2,3,4], ['banana', 'apple', 'pear', 'orange']]
>>> slides = [list(slide) for slide in zip(*lists)]
>>> slides
[['slide1', 1, 'banana'], ['slide2', 2, 'apple'], ['slide3', 3, 'pear'], ['slide4', 4, 'orange']] 
```

现在，`list1`你使用`lists[0]`代替 ，而不是`slide1`，你使用`slides[0]`。这更清洁，更易于维护，并且可以扩展。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T11:32:30.263

A direct answer is that it seems you want a `dict` with the list1 element as a key which can be achieved as follows:

```
dict( zip(list1, list(zip(list2, list3))) ) 
```

However, Tim's correct in saying you should review your data structure...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-22T10:29:04.943

`itertools.izip`如果列表非常大并且您只需要遍历新幻灯片，则使用效率会更高。

```
import itertools
for x in itertools.izip(list1, list2, list3):
    print x 
```

# graph - 图最短路径？

> ID：11599257
> 
> 赞同：2
> 
> 时间：2012-07-22T09:51:47.633
> 
> 标签：graph, graph-algorithm

我面临着我认为是图上的一种最短路径问题。

我需要找到从节点 A 到 B 的最短路径，考虑到所有边对连接的顶点具有正权重，对于未连接的顶点具有 ∞。

顶点具有可变的正权重。

考虑到该路径中涉及的所有顶点，路径的成本是具有最大权重的顶点的权重。

我应该在这种情况下应用 Dijkstra，如果是这样，考虑到每个顶点的权重会根据之前访问的顶点而变化，应该如何应用？

你能指出我如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-22T14:46:01.920

我不明白你是否应该考虑边缘的权重，因为你说你想要一个顶点上可能具有最大/最小权重的路径，从 A 到 B。我的解决方案是将顶点上的每个权重转换为边缘的重量，就像在图像中一样：![在此处输入图像描述](../Images/c109929864f81205d5c0ecbecd36b37a.png)

现在你想找到从 A 到 B 的路径，其中边缘上的最大权重是 min/max。您可以为此使用 MST algotirhm，因为您不关心路径长度，而只关心最大/最小边缘成本。

# actionscript-3 - 如何在不知道 AIR for iOS 中的确切类型的情况下克隆对象

> ID：11599262
> 
> 赞同：2
> 
> 时间：2012-07-22T09:53:05.370
> 
> 标签：actionscript-3, air

我正在用 Flash 编写 iOS 游戏，我需要一种克隆多态对象的方法。我有 BaseClass、SubClass1、SubClass2（等等......），我需要 BaseClass 中的 clone() 方法，它将创建当前对象的副本，**没有**条件，例如

```
var obj:BaseClass;
if(this is SubClass1) { 
   obj = new SubClass1(); 
}else if(this is SubClass2) {
   obj = new SubClass2();
}else... 
```

我需要一种方法来创建对象并创建对象的确切字节（是的，浅拷贝就足够了）。我看过：

[AS3 - 克隆一个对象](https://stackoverflow.com/questions/8461988/as3-clone-an-object)

[As3 复制对象](https://stackoverflow.com/questions/6260342/as3-copy-object)

[http://actionscripthowto.com/how-to-clone-objects-in-as3/](http://actionscripthowto.com/how-to-clone-objects-in-as3/)

但似乎没有一个工作。AIR 3.3 for iOS SDK 中可能不可用。（他们编译，但代码在我的情况下不起作用）

有没有其他方法，或者有没有人实现在 AIR for iOS 中克隆一个对象？

谢谢，

能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T14:32:18.337

使用 ActionScript 无法进行逐位克隆，除非您的类仅包含原始值（即简单的数据结构）。这就是`ByteArray`您在[这个问题的答案](https://stackoverflow.com/questions/8461988/as3-clone-an-object)中链接到的方法的用途 - 但是当您处理复杂类型，尤其是显示对象时，您很快就会达到极限（据我所知，您已经意识到） .

所以这或多或少给你留下了两个选择：

1.  创建一个新对象并复制其所有字段和属性。

    如果您需要行为和字段值，并且您没有使用任何绘图方法（即，您不能以这种方式复制矢量图形），这就是您要走的路。在不知道其确切类型的情况下创建一个新的类实例可以使用反射以一种通用的方式完成，`getQualifiedClassName()`并且`getDefinitionByName()`会在这方面为您提供帮助，如果您需要的不仅仅是名称，`describeType()`. 但是，这也有限制：`private`字段将不可用（它们不会出现在 提供的信息中`describeType()`），并且为了不遇到性能问题，您将不得不使用某种缓存。幸运的是，[as3commons-reflect](http://www.as3commons.org/as3-commons-reflect/)已经解决了这个问题，因此实现功能齐全的浅拷贝机制所需的其余部分并不太复杂。

    像这样创建一个新实例：

    ```
    var newObject:* = new Type.forInstance( myObject ).clazz(); 
    ```

    然后遍历所有访问器、变量和动态属性并分配旧实例的值。

    我自己已经为我正在开发的开源框架实现了这样的方法。您可以在[github](https://github.com/weltraumpirat/robotools/blob/master/src/org/robotools/data/copy/shallowCopy.as)下载或 fork 。目前还没有任何文档，但它的使用就像编写一样简单：

    ```
    var myCopy:* = shallowCopy( myObject ); 
    ```

    我也有一个`copy()`方法，它可以创建一个真正的深层副本。但是，除了数据结构（尽管很大）之外，还没有对其他任何东西进行过测试，因此使用风险自负；）

2.  创建位图副本。

    如果您确实有矢量图形，这通常比重新创建图像更容易：只需将对象的内容绘制`graphics`到新的位图。

    ```
    function bitmapCopy( source:Sprite ):Bitmap {
        source.cacheAsBitmap = true;
        var bitmapData:BitmapData = new BitmapData( source.width, source.height, true, 0xFFFFFF );
        bitmapData.draw( source, new Matrix(), null, null, null, true );

        return new Bitmap( bitmapData, PixelSnapping.AUTO, true );
    } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T10:48:21.473

您需要`clone`在基类中创建一个抽象方法并为每个子类实现它。在具体实现中，您会将对象的所有属性复制到新的对象中。

```
public class BaseClass {
    public function clone():BaseClass
    {
         // throw an error so you quickly see the places where you forgot to override it
         throw new Error("clone() should be overridden in subclasses!");
         return null;
    }
}

public class Subclass1 extends BaseClass {
    public override function clone():BaseClass
    {
         var copy:Subclass1 = new Subclass1();
         copy.prop1 = prop1;
         copy.prop2 = prop2;
         // .. etc
         return copy;
    }
} 
```

如果你想创建一个通用的默认实现`clone`，你可以`describeType`用来访问属性并将它们复制过来：

```
public function clone():BaseClass
{
    var defn:XML = describeType(this);
    var clsName:String = defn.@name;
    var cls:Class = getDefinitionByName(clsName) as Class;
    var inst:* = new cls();
    for each(var prop:String in (defn.variable + defn.accessor.(@access == 'readwrite')).@name )
    {
        inst[prop] = this[prop];
    }
    return inst;
} 
```

这样做的主要问题是 describeType XML 可能会变得非常大，尤其是在处理扩展对象时`DisplayObject`。这可能会使用大量内存并且在 iOS 上速度很慢。

# python - 使其成为 Pythonic：如果它不存在，则创建一个 sqlite3 数据库？

> ID：11599263
> 
> 赞同：21
> 
> 时间：2012-07-22T09:53:26.973
> 
> 标签：python, sqlite

我编写了一个 Python 脚本，如果它不存在，它会初始化一个空数据库。

```
import os

if not os.path.exists('Database'):
    os.makedirs('Database')
    os.system('sqlite3 Database/testDB.db ";"')

# rest of the script... 
```

我可以以更 Pythonic 的方式使用 try-except 来执行此操作，还是可以接受这种代码？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-07-22T10:05:05.850

我认为你可以这样做：

```
import sqlite3
conn = sqlite3.connect('Database/testDB.db') 
```

这应该连接到您的数据库并在它不存在的情况下创建它。我不确定这是最pythonic的方式，但它确实使用`sqlite3`模块而不是`sqlite3`命令。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-12-04T15:42:07.203

> # 使其成为 Pythonic：如果它不存在，则创建一个 sqlite3 数据库？

最*Pythonic*的方法是使用上下文管理器：

```
import sqlite3

# if we error, we rollback automatically, else commit!
with sqlite3.connect('/Temp/testDB.db') as conn:
    cursor = conn.cursor()
    cursor.execute('SELECT SQLITE_VERSION()')
    data = cursor.fetchone()
    print('SQLite version:', data) 
```

在 python shell 中，这对我来说是回声：

```
<sqlite3.Cursor object at 0x0CCAD4D0>
SQLite version: (u'3.5.9',) 
```

为确保您拥有跨平台工作的临时文件路径，请使用`tempfile.gettempdir`：

```
import tempfile
with sqlite3.connect(tempfile.gettempdir() + '/testDB.db') as conn:
    ... 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-07-18T12:04:51.800

# 创建目录路径、数据库文件和表

这是在必要时创建目录路径、数据库文件和表的方法。如果这些已经存在，脚本将不会覆盖任何内容，而只会使用手头的内容。

```
import os
import sqlite3

data_path = './really/deep/data/path/'
filename = 'whatever'

os.makedirs(data_path, exist_ok=True)

db = sqlite3.connect(data_path + filename + '.sqlite3')
db.execute('CREATE TABLE IF NOT EXISTS TableName (id INTEGER PRIMARY KEY, quantity INTEGER)')
db.close() 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-22T10:10:28.943

`sqlite3.connect`如果它不存在，将尝试创建一个数据库 - 所以判断一个数据库是否存在的唯一方法是尝试打开它并捕获一个`IOError`. 然后要创建一个空白数据库，只需使用该`sqlite3`模块进行连接。

```
import sqlite3

try:
    open('idonotexist')
    print 'Database already exists!'
except IOError as e:
    if e.args == 2: # No such file or directory
        blank_db = sqlite3.connect('idontexist')
        print 'Blank database created'
    else: # permission denied or something else?
        print e 
```

当然，您可能仍然需要`os.makedirs`根据结构是否已经存在来做一些事情。

# html - Tumblr 视频大小

> ID：11599267
> 
> 赞同：0
> 
> 时间：2012-07-22T09:53:39.657
> 
> 标签：html, tumblr

请我使用 tumblr 主题，并且当我单击永久链接时，主页上允许视频帖子的空间是相同的。主页的空间很好，但对于永久链接来说太小了，那么我该怎么做才能在不改变主页上的视频大小的情况下将永久链接的视频空间设置得更大呢？

这是 HTML 代码：[概念](http://www.tumblr.com/theme/18547) 有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T10:44:46.317

在页面上包含到您的主题[**Fitvid.js**](http://fitvidsjs.com/)*`permalink`*。

> 一个轻量级、易于使用的 jQuery 插件，用于流体宽度视频嵌入。

改变视频大小改变视频包装器的大小，**FitVid**将调整视频大小。

**升级版：**

## 分步说明：

1.  [](https://github.com/davatron5000/FitVids.js/downloads)**从 github[**下载**](https://github.com/davatron5000/FitVids.js/downloads)*Fitvid.js*的源代码**
***   [**使用静态文件上传**](http://www.tumblr.com/themes/upload_static_file)器上传到 Tumblr 文件托管并复制（保存）上传文件的*url*；*   在新页面中打开您博客的[自定义](http://www.tumblr.com/customize/)页面；*   按**“编辑 HTML”**按钮；*   查找`<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>`字符串；*   在它后面粘贴这个字符串：`<script type="text/javascript" src="FITVIDURL"></script>`-`FITVIDURL`步骤＃2中保存的url在哪里；*   用这个语句包装第 6 步得到的字符串`if`，如下所示：
    `{block:PermalinkPage} STRING from prev. step {/block:PermalinkPage}`-- 这个语句将只在*永久链接*页面上包含这个库；**

 **### 进一步阅读：

*   [Fitvid.js 自述文件](https://github.com/davatron5000/FitVids.js)
*   [如何](http://www.tumblr.com/docs/en/custom_themes/)通过[@Tumblr创建自定义 HTML 主题](http://twitter.com/tumblr)
*   来自[@bobdiaes 的](http://twitter.com/bobdiaes)[非官方 Tumblr 主题指南](http://disattention.com/labs/tumblr/theme-guide/)**

# java - 正好 n 次 - 组

> ID：11599271
> 
> 赞同：0
> 
> 时间：2012-07-22T09:53:55.533
> 
> 标签：java, regex

我想从带有模式的行中取出数字，但它不会按照我的意愿对数字进行分组。

```
public static void main(String[] args) {
    Pattern pattern = Pattern.compile("(.*?)((\\d+),{0,1}\\s*){7}");
    Scanner in = new Scanner("text: 1, 2, 3, 4, 5, 6, 7"); // new Scanner(new File("data.txt"));
    in.useDelimiter("\n");

    try {
        while(!(in.hasNext(pattern))) {
            //Skip corrupted data
            in.nextLine();
        }
    } catch(NoSuchElementException ex) {
    }
    String line = in.next();
    Matcher m = pattern.matcher(line);
    m.matches();
    int groupCount = m.groupCount();
    for(int i = 1; i <= groupCount; i++) {
        System.out.println("group(" + i + ") = " + m.group(i));
    }
} 
```

输出：

组（1）=文本：

组（2）= 7

组（3）= 7

我想要得到的是：

组（2）= 1

组（3）= 2

...

组（8）= 7

我可以从这个模式中得到这个还是应该再做一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T10:25:40.413

`Matcher.find()`如果您只是想收集整数，您可以使用以下样式中的模式使用该方法迭代子字符串：1）可选分隔符或新行；2) 一个可能被空格包围的整数。您根本不必管理组索引，因为您只能引用一个具体的捕获组。以下解决方案除了正则表达式之外不需要任何东西，只需遍历 char 序列以查找整数：

```
package stackoverflow;

import java.util.ArrayList;
import java.util.Collection;
import java.util.regex.Matcher;
import java.util.regex.Pattern;

import static java.lang.System.out;
import static java.util.regex.Pattern.compile;

public final class Q11599271 {

    private Q11599271() {
    }

    //
    // (2) Let's capture an integer number only     -------------------+
    // (1) Let's assume it can start with a new     ------+            |
    //     line or a comma character                      |            |
    //                                              +-----+-----+    +-+--+
    //                                              |           |    |    |
    private static final Pattern pattern = compile("(?:^\\S+:|,)?\\s*(\\d+)\\s*");

    private static Iterable<String> getOut(CharSequence s) {
        final Collection<String> numbers = new ArrayList<String>();
        final Matcher matcher = pattern.matcher(s);
        while ( matcher.find() ) {
            numbers.add(matcher.group(1));
        }
        return numbers;
    }

    private static void display(Iterable<String> strings) {
        for ( final String s : strings ) {
            out.print(" ");
            out.print(s);
        }
        out.println();
    }

    public static void main(String[] args) {
        display(getOut("text: 1, 2, 3, 4, 5, 6, 7"));
        display(getOut("1, 2, 3, 4, 5, 6, 7"));
        display(getOut("text: 1,  22,  333   , 4444 , 55555 , 666666, 7777777"));
    }

} 
```

这将产生以下内容：

```
1 2 3 4 5 6 7
1 2 3 4 5 6 7
1 22 333 4444 55555 666666 7777777 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T10:17:07.540

你不能。组始终对应于正则表达式中的捕获组。也就是说，如果您有一个捕获组，则匹配中的组不能超过一个。在比赛期间重复某个部分（甚至是捕获组）的频率无关紧要。表达式本身定义了最终匹配可以有多少组。

# c# - 与 C# 中 MDI 窗体中的滚动条相关的问题

> ID：11599272
> 
> 赞同：-2
> 
> 时间：2012-07-22T09:53:57.483
> 
> 标签：c#, .net, winforms

我有一个 MDI From 和一个子表单

子窗体的高度高于 MDI 子窗体。每当子窗体以 MDI 窗体打开时滚动条显示正确，但是当我尝试使用鼠标滚轮滚动它时，它什么也没有？

如何使用鼠标滚轮向下和向上滚动？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T14:51:36.950

鼠标滚轮通知消息 (WM_MOUSEWHEEL) 是一个不寻常的消息，它会“冒泡”。只要没有窗口处理它，消息就会发送到窗口的父级。重复直到一个窗口处理它或没有更多的父级。

MDI 客户端窗口的 Windows 实现中存在一个不幸的缺陷，即您在 MDI 父窗口中看到的深灰色窗口。它是显示滚动条的那个，但它不够聪明，无法处理鼠标滚轮通知。不知道为什么，但 MDI 是石器时代的，早在老鼠得到轮子之前就已经存在了。

Winforms 很好，它允许修复这样的缺陷。不能通过更换MDI客户端窗口来完成，它是硬生生的。所需的是对窗口进行子分类并捕获 WM_MOUSEWHEEL 消息。并通过使用 WM_VSCROLL 消息使窗口滚动来添加此缺少的功能。这确实需要一点 pinvoke 的魔力，Winforms 也不容易获得对 MDI 客户端窗口的引用。在您的项目中添加一个新类并粘贴以下代码：

```
using System;
using System.Windows.Forms;
using System.Runtime.InteropServices;

class MdiScroller : NativeWindow {
    public static void Install(Form mdiParent) {
        if (!mdiParent.IsMdiContainer) throw new ArgumentException("Not an MDI application");
        if (!mdiParent.IsHandleCreated) throw new InvalidOperationException("Create me in the Load event please");
        foreach (Control ctl in mdiParent.Controls) {
            if (ctl is MdiClient) {
                var hooker = new MdiScroller();
                hooker.AssignHandle(ctl.Handle);
                break;
            }
        }
    }

    protected override void WndProc(ref Message m) {
        if (m.Msg == WM_DESTROY) this.ReleaseHandle();
        if (m.Msg == WM_MOUSEWHEEL) {
            short delta = (short)((int)(long)m.WParam >> 16);
            SendMessage(this.Handle, WM_VSCROLL, (IntPtr)(delta < 0 ? SB_LINEUP : SB_LINEDOWN), IntPtr.Zero);
            m.Result = IntPtr.Zero;
        }
        base.WndProc(ref m);
    }

    // PInvoke:
    private const int WM_DESTROY = 0x002;
    private const int WM_MOUSEWHEEL = 0x20a;
    private const int WM_VSCROLL = 0x115;
    private const int SB_LINEDOWN = 0;
    private const int SB_LINEUP = 1;

    [DllImport("user32.dll")]
    private static extern IntPtr SendMessage(IntPtr hWnd, int msg, IntPtr wp, IntPtr lp);

} 
```

在 MDI 父窗体中，实现 Load 事件处理程序或重写 OnLoad() 以激活此代码。像这样：

```
 protected override void OnLoad(EventArgs e) {
        MdiScroller.Install(this);
        base.OnLoad(e);
    } 
```

或者：

```
 private void Form1_Load(object sender, EventArgs e) {
        MdiScroller.Install(this);
    } 
```

通过注意滚动量（增量）可以进一步改进代码。但是这个简单的实现已经在我的机器 ymmv 上运行良好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-18T13:38:52.753

Hans Passant 的回答很棒，但是漏掉了一点：如果父窗体没有垂直滚动条，子窗体在滚动时会消失……

修复很简单——你只需要检查是否有垂直滚动条；我复制了 Passant 的`MdiScroller`课程并添加了一些内容：

```
using System;
using System.Windows.Forms;
using System.Runtime.InteropServices;

class MdiScroller : NativeWindow
{
    public static void Install(Form mdiParent)
    {
        if (!mdiParent.IsMdiContainer) throw new ArgumentException("Not an MDI application");
        if (!mdiParent.IsHandleCreated) throw new InvalidOperationException("Create me in the Load event please");
        foreach (Control ctl in mdiParent.Controls)
        {
            if (ctl is MdiClient)
            {
                var hooker = new MdiScroller();
                hooker.AssignHandle(ctl.Handle);
                break;
            }
        }
    }

protected override void WndProc(ref Message m)
{
    if (m.Msg == WM_DESTROY) this.ReleaseHandle();
    if (m.Msg == WM_MOUSEWHEEL)
    {
        short delta = (short)((int)(long)m.WParam >> 16);
        var scrollbars = GetVisibleScrollbars();

        // ** ADDED **
        if (scrollbars == ScrollBars.Horizontal || scrollbars == ScrollBars.None) { return;    }

        SendMessage(this.Handle, WM_VSCROLL, (IntPtr)(delta < 0 ? SB_LINEUP : SB_LINEDOWN), IntPtr.Zero);
        m.Result = IntPtr.Zero;
    }
    base.WndProc(ref m);
}

// ** ADDED **
private ScrollBars GetVisibleScrollbars()
{
    int wndStyle = GetWindowLong(this.Handle, GWL_STYLE);
    bool hsVisible = (wndStyle & WS_HSCROLL) != 0;
    bool vsVisible = (wndStyle & WS_VSCROLL) != 0;

    if (hsVisible)
    {
        return vsVisible ? ScrollBars.Both : ScrollBars.Horizontal;
    }
    else
    {
        return vsVisible ? ScrollBars.Vertical : ScrollBars.None;
    }
}

// PInvoke:
private const int WM_DESTROY = 0x002;
private const int WM_MOUSEWHEEL = 0x20a;
private const int WM_VSCROLL = 0x115;
private const int SB_LINEDOWN = 0;
private const int SB_LINEUP = 1;

// ** ADDED **
public const int GWL_STYLE = -16;
public const int WS_VSCROLL = 0x00200000;
public const int WS_HSCROLL = 0x00100000;

[DllImport("user32.dll")]
private static extern IntPtr SendMessage(IntPtr hWnd, int msg, IntPtr wp, IntPtr lp);

// ** ADDED **
[DllImport("user32.dll", SetLastError = true)]
public static extern int GetWindowLong(IntPtr hWnd, int nIndex); 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T10:50:18.237

滚动鼠标滚轮在 Windows 中的工作方式是具有***输入焦点*****的窗口是滚动***的窗口。*

 *这意味着如果您的 MDI*子*窗口具有焦点，它将是接收滚动消息的窗口。如果它没有滚动条，那么它将忽略这些消息，因为它没有可滚动的内容。

将其与您的 MDI*父*窗口是否具有焦点进行比较。然后父窗口将滚动，露出 MDI 子窗口的底部，就像您移动了附加到父窗口的滚动条一样。

您可以通过单击 MDI 父窗口来演示这一点（如背景中未被子窗口覆盖的空白区域）。当它接收到焦点时，您的滚轮应该使它像您期望的那样滚动。*

# c++ - Qt：RemoveWidget 和对象删除

> ID：11599273
> 
> 赞同：2
> 
> 时间：2012-07-22T09:54:01.153
> 
> 标签：c++, qt, qwidget, removechild, qobject

我一直在阅读 Qt 文档并使用 qobject 树。我想知道是否有一种方法可以从树中删除小部件，从而将它们从内存中删除。

当相互嵌入 qwidgets/qobjects 并创建树时，从 qlayouts 中删除带有 removeWidget 的小部件将在 gui 中可视地删除它们，但是该对象仍保持连接到父 qobject（object->parent() 不是 0），只有在删除其父级（例如超出范围）后才会删除它。我只能看到一个 qwidget 只有在应用程序终止时才能被销毁，其中顶部小部件将其下面的所有内容（或者如果对象超出范围）。

例如，假设有一个具有 2 个阶段的主窗口：第一个具有从一个父级嵌入的大约 100 个对象，另一个具有 200 个。应用程序从第 1 阶段开始并移动到第 2 阶段，它永远不会回到第 1 阶段. 如果我想让这有点效率，我会尝试杀死阶段 1 中的所有对象（100 个对象），但是因为它们附加到主窗口的根节点，即使使用“removeWidget”也无法销毁它。

我还尝试接收在没有“new”运算符的情况下创建的小部件的指针，如果我删除该对象，应用程序将崩溃，因为它会调用析构函数两次。

我的问题是，有没有办法删除 qobject 树中的节点（该节点没有被删除，因为它超出范围或应用程序终止时）？

对不起，如果这没有多大意义。提前致谢。

**编辑：**

对不起，如果我给出了错误的想法。我的问题是在应用程序终止之前或对象超出范围之前从内存中删除一个节点。这是一个例子（可能不是那么好）。

```
int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    Test w;
    w.show();

    QHBoxLayout *layout = new QHBoxLayout();
    w.setLayout(layout);

    Test heavyObj;             //I know you can use pointers instead and that 
                               //would allow you to easy delete the object
                               //but say if I did this instead.
    w->addWidget(&heavyObj);

    for(int i=0; i < 200; i++) {
        Test obj(heavyObj);
    }

    w->removeWidget(&heavyObj); //At this point we don't want "heavyObj", I want
                                //to delete this object from memory
                                // is it possible to remove p1 from memory?

    return a.exec();

    //As stated, once the program terminates everything is destroyed
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T10:13:07.310

调用 removeWidget() 后，用 . 删除对象`delete yourWidgetPointer;`。QObject 的析构函数将负责从父级注销子级。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T10:06:52.157

> 当 QObjects 在堆上创建（即用 new 创建）时，可以以任何顺序从它们构造树，然后，可以以任何顺序销毁树中的对象。当树中的任何 QObject 被删除时，如果该对象有父对象，则析构函数会自动从其父对象中删除该对象。如果对象有子对象，析构函数会自动删除每个子对象。**没有 QObject 被删除两次，无论销毁顺序如何。**

取自[这里](https://qt-project.org/doc/qt-4.8/objecttrees.html#construction-destruction-order-of-qobjects)。

我不知道你在问什么，如果你删除一个对象，它会从它的父级中删除，然后删除它拥有的所有子级（这会从你正在删除的内容中向下级联子树）。请显示您正在调用的导致段错误的代码，因为您应该能够在树中的任何点删除（使用`delete`）any `QObject`，并且树将自行重组。

# android - 是否可以使用可绘制+颜色作为背景？

> ID：11599281
> 
> 赞同：9
> 
> 时间：2012-07-22T09:55:37.903
> 
> 标签：android

我有一个不透明的图案（10% 的不透明度），我需要将它与一些颜色结合起来。

是否可以将背景颜色设置为图像？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-22T10:01:25.470

当然。只需使用 LayerListDrawable。

就像是：

```
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
    <item>
        <shape android:shape="rectangle" >
            <solid android:color="#FF00ffff" />
        </shape>
    </item>
    <item>
         <bitmap 
             android:src="@drawable/your_tiled_drawable"
             android:tileMode="repeat" />
    </item>
</layer-list> 
```

将其保存在您的`res/drawables`目录中，并将其用作背景。

遗憾的是，如果您的应用程序更复杂，有时 tileMode 会无缘无故地取消设置。如果遇到这种情况，则必须在 Java 中重新添加平铺模式。

我通常仍然在xml中设置它，然后执行以下操作：

```
View v = findViewById(R.id.my_view);
LayerDrawable lld = (LayerDrawable) v.getBackground();
BitmapDrawable tiled = (BitmapDrawable) lld.getDrawable(1);
tiled.setTileModeXY(TileMode.REPEAT, TileMode.REPEAT); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T10:00:57.367

是的。

你可以使用`ImageView`. 设置其背景颜色并将半透明图像设置为其来源。

如果要对布局执行此操作，则扩展该布局并在覆盖的 onDraw() 中，绘制背景颜色并与半透明图像混合

```
Paint p = new Paint();
p.setXfermode(new PorterDuffXfermode(Mode.MULTIPLY)); 
```

# java - 有什么比从末端迭代 ArrayList 更快的方法吗？

> ID：11599289
> 
> 赞同：3
> 
> 时间：2012-07-22T09:56:12.290
> 
> 标签：java, arraylist, deque

使用此 Java 代码：

```
 // create the items list
    List<Item> items = new ArrayList<Item>();
    // ... (add some elements into the list so that it is not empty)

    // iterating ArrayList<Item> from right to left we find the position
    // based on the `if` condition satisfied for an item property
    int pos = 0;
    for (int j = items.size() - 1; j >= 0; j--) {
        Item item = items.get(j);
        if (item.property <= 7) {
            pos = j + 1; break;
        }
    }

    // add new item on the found above position
    Item it = new Item();
    if (pos == items.size()) {
        items.add(it);
    } else {
        items.add(pos, it);
    } 
```

我想知道这个语句`Item item = items.get(j);`是否会因为使用而需要一些额外的时间来执行`ArrayList`。例如，假设我们需要将新项目添加到末尾，然后通过调用`get()`项目列表将仅从左侧迭代它，这是多余的。我希望使用`Deque`结构而不是`ArrayList`.

您能推荐什么，也许我完全错了，因为新元素也可以在开始时添加，尽管目标是从右侧迭代到左侧。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-22T09:59:04.883

`Get`在 ArrayList 中以恒定时间运行。证明：[javadoc](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)。

> size、isEmpty、get、set、iterator 和 listIterator 操作在恒定时间内运行。

所以不用担心`get`性能。`ArrayList`不是链表。我认为它是由一个普通的 java 数组支持的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T10:15:17.683

对于 an ， （右）端`ArrayList`的操作、迭代和添加/删除是便宜的（基本上 O(1) 或摊销 O(1)）。`get(i)`但是，在另一端（左）添加/删除元素非常昂贵，并且每次都涉及复制整个后备数组。

因此，如果您需要在两端添加和删除，请务必使用`ArrayDeque`. 这基本上与`ArrayList`所有操作一样便宜，但支持以便宜的方式在两端添加。

请注意，如果您只想在列表的开头而不是末尾添加/删除，您仍然可以使用 an`ArrayList`并且只是“向后”（因此，当您想在开头添加某些内容时，只需将其添加到最后，当你想从右到左迭代时，你实际上是从左到右迭代）。

使用该方法插入元素`add(Object, int)`对于两种数据结构都是 O(n) （插入元素右侧的所有元素都需要在数组中移动）。

另一种方法是使用`LinkedList`（也实现`Deque`）。您只需要确保不使用`get(int)`或任何其他将索引作为 int 传递的方法，因为这是 O(n)。但是，添加/删除/插入操作在列表中的所有位置都是 O(1)（只要您已经有一个指向该位置的迭代器）。因此，对于代码中的循环，调用`.listIterator()`列表，适当地迭代并使用`ListIterator.add(Object)`方法插入元素。对于您的代码而言，这将是最便宜的解决方案。

***编辑***

我没有注意到它`ArrayDeque`不提供在中间插入元素的方法（尽管它可以，就像`ArrayList`）。（谢谢啊）所以如果你真的需要所有这些操作（在开头、中间和结尾插入），请使用`LinkedList`and `ListIterator`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T10:41:49.860

不，可能不是。你的 for 循环从右到左迭代，如果可能是最快的实现。

如果您使用的是 LinkedList，那么答案是肯定的 - 您应该使用 listIterator() 向后迭代，因为 LinkedList 上的 .get(i) 很慢。ArrayList 也有 listIterator()，但使用它和使用简单的 for 循环向后迭代可能没有什么不同。

如果你真的关心每一个毫秒，你应该把人们对这个问题所说的一切以及你在互联网上阅读的基准测试加一点盐，并运行大量负载测试并使用 VisualVM 进行大量分析，以告知你真正的性能在哪里您的系统中的瓶颈是。

# c# - 如何将外部非 windows phone 类库项目引用添加到 windows phone 项目？

> ID：11599293
> 
> 赞同：2
> 
> 时间：2012-07-22T09:57:22.473
> 
> 标签：c#, .net, windows, winapi, windows-phone-7

嗨，我是 windows phone 开发的新手，我正在尝试构建一个数据驱动的应用程序，在其中我创建了我的 BLL 和 EL 和 DAL，它们都是 windows phone 类库类型的项目。我的解决方案中还有一个额外的类型类库项目，其中添加了对“MyGeneration.dOOdads.dll”文件的引用。现在我希望这个项目在windows phone app项目中被引用。但是当我尝试添加引用时，VS 2010说...... ***“无法添加选定的项目引用。项目引用必须是另一个银灯相同或更低版本的 windows phone 项目"*** . . . . 请在这种情况下帮助我。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-22T10:05:01.830

那不能也不会奏效。phone 运行时只能访问完整 .NET 库的一个小子集（嗯，有点），因此任何非 phone-7 库都极不可能运行。为了阻止这个令人惊讶的人，只允许引用针对该运行时构建的库。

如果可能，使用相同的 c# 文件创建一个新项目，以 phone 7 框架为目标。现在参考这个项目。很可能某些位将无法编译（证明它也不会运行），可以通过多种方式（`#if`块，替代`.cs`文件等）进行纠正。

使现有项目成为“可移植类库”也可能会带来一些运气 - 然而，这是*所有*常见框架中限制性最强的子集，并且更不可能仍然编译（无需更改）。

> 使用可移植类库项目，您可以构建无需修改即可在 .NET Framework、Silverlight、Windows Phone 7 或 Xbox 360 平台上工作的可移植程序集。

（来自[MSDN](http://msdn.microsoft.com/en-us/library/gg597391.aspx)）

# ios - AFNetworking 仅在调试中构建。发布抱怨缺少 ivars

> ID：11599298
> 
> 赞同：0
> 
> 时间：2012-07-22T09:58:25.497
> 
> 标签：ios, cocoa, afnetworking

获得了一个包含 AFNetworking 库（最新源）的 Mac OS X 项目。Build in Debug 一切正常。但是，在 Release 中构建会引发很多这样的错误：

```
Synthesized property 'baseURL' must either be named the same as a compatible ivar or must explicitly name an ivar

Synthesized property 'stringEncoding' must either be named the same as a compatible ivar or must explicitly name an ivar 
```

那指向

```
@synthesize baseURL = _baseURL;
@synthesize stringEncoding = _stringEncoding; 
```

等等

深入研究[代码](https://github.com/AFNetworking/AFNetworking/blob/master/AFNetworking/AFHTTPClient.h)`_baseURL`，在类 (AFHTTPClient) 的 ivar 部分或其他任何地方都没有定义。只是这个在dealloc合成和释放。

1.  它如何构建（并在调试中工作）正常？它真的不需要那个 ivar 吗？
2.  我应该怎么做才能修复它？

# mysql - mysql中的游标错误语法

> ID：11599304
> 
> 赞同：0
> 
> 时间：2012-07-22T09:59:08.697
> 
> 标签：mysql

我有这样的程序，但我一直想执行它我在声明变量附近遇到语法错误......谁能告诉我我做错了什么

我有两张表，一张用于问题，一张用于答案和 excel 文件，用于将数据迁移到这些表中。Excel中的数据如下所示：

```
ID      N       TITLE
3       99500   question1
4       
5               answer1
6       X       answer2
7               answer3

 DELIMITER $$
create Procedure proc_answermigration()
begin

  DECLARE @i,@n,@q,@ind,@pt varchar default '';
  DECLARE @done,@aord int default 0;
  DECLARE cur cursor for select ID, N, question, from test.qustionmigration;
  DECLARE CONTINUE HANDLER FOR NOT FOUND SET @done = 1;
  open cur;

  read_loop: Loop
  fetch cur into i,n,q;

  IF done THEN
  LEAVE read_loop;
  END IF;

  if n <> '' or n <> 'X'
    then
      select @ind = iq.question_id, @pt = iq.points from test.qustionmigration qm
      inner join ilias.qpl_questions iq on qm.question = iq.question_text
      where question = q
  else
      insert into qpl_a_sc
      (
        answer_id,
        question_fi,
        answertext,
        points,
        aorder,
        tstamp
      )
      select (select sequence from qpl_a_sc_seq),
              ind,
              question,
              pt,
              aord,
              '1342884200'
      from test.qustionmigration
      end if;

  update qpl_a_sc_seq
  set sequence = sequence + 1;

  if @aord = 0 then set @aord = 1;
  elseif @aord = 1 then set @aord = 2;
  else set @aord = 0;

  end loop;
  CLOSE cur;

end$$

DELIMITER ; 
```

我更正了一些语句，但仍然有语法错误说：

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'LOOP; close cur; end' at line 52

DELIMITER $$
create Procedure proc_answermigration()
begin

  DECLARE i,n,q,ind,pt varchar(500) default '';
  DECLARE done,aord,c int default 0;
  DECLARE cur cursor for select ID, N, question from test.qustionmigration;
  DECLARE  CONTINUE HANDLER FOR NOT FOUND SET done = 1;

  open cur;

  read_loop: LOOP
    fetch cur into i,n,q;
    IF n <> '' or n <> 'X'
      then
        select ind = iq.question_id, pt = iq.points from test.qustionmigration qm
        inner join ilias.qpl_questions iq on qm.question = iq.question_text
        where question = q;
    else
        insert into qpl_a_sc
        (
          answer_id,
          question_fi,
          answertext,
          points,
          aorder,
          tstamp
        )
        select (select sequence from qpl_a_sc_seq),
                ind,
                question,
                pt,
                aord,
                '1342884200'
        from test.qustionmigration;
    end IF;

    update qpl_a_sc_seq
    set sequence = sequence + 1;

    if aord = 0 then set aord = 1;
    elseif aord = 1 then set aord = 2;
    else set aord = 0;

    set c = c + 1;

  IF done = 1 THEN
      LEAVE read_loop;
  END IF;

  END LOOP;

  close cur;
end$$
DELIMITER ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T10:29:33.630

您不能[使用变量](http://dev.mysql.com/doc/en/user-variables.html)（以 a 开头的变量）。只是它们，或者使用[局部变量](http://dev.mysql.com/doc/en/declare-local-variable.html)（不以 a 开头）。[`DECLARE`](http://dev.mysql.com/doc/en/declare.html) `@`[`SET`](http://dev.mysql.com/doc/en/set-statement.html)`@`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T12:00:52.353

您的最后一个`IF ELSE`块缺少它的`END IF`：

```
if @aord = 0 then set @aord = 1;
elseif @aord = 1 then set @aord = 2;
else set @aord = 0;
/* END IF either belongs here or after following statements, depending on your intended logic */
/* Either way, this block is unclosed when you close the loop */
end if 
```

当解析器读取 时`END LOOP;`，它正在寻找`END IF`，并在 处报告语法错误`LOOP`。

# spring-mvc - 从另一个线程调用 Spring MVC 控制器方法 (javax.jms.MessageListener)

> ID：11599305
> 
> 赞同：0
> 
> 时间：2012-07-22T09:59:14.973
> 
> 标签：spring-mvc

我正在寻找一种从另一个线程向我的 Spring MVC 控制器发送消息的方法。特别是我的线程是一个`javax.jms.MessageListener`在 ActiveMQ 队列上监听消息的实现。一旦我在队列中收到一条新消息，`onMessage()`就会调用 jms MessageListener 的方法。但是，现在我想在调用 MessageListener 时在我的 spring 控制器中调用另一个方法`onMessage()`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T11:35:00.930

Spring MVC 中的控制器并非旨在以您正在寻找的方式直接调用，而是旨在处理和响应 Web 请求。处理您正在做的事情的一种更简洁的方法是将您计划调用的控制器逻辑移动到服务层，并从控制器和 JMS 侦听器调用此公共服务层。

如果你绝对想要，你总是可以在控制器中自动装配并调用它的方法，就好像它是一个普通的 POJO 一样。

# jquery - 检查是否所有的jquery文件都被加载然后运行与之相关的div

> ID：11599311
> 
> 赞同：0
> 
> 时间：2012-07-22T09:59:46.610
> 
> 标签：jquery, fancybox

如何检查我的所有 j Query 文件是否已完全加载。

我只想在加载了与该 div 相关的所有 jQuery 文件时才显示我的 div。

文档准备和窗口加载功能不起作用。

如何编写一个条件函数，您可以在其中检查是否所有 jQuery 都已加载，然后显示 div .... 我在外部 js 文件中调用所有 jQuery 文件，（基本上我正在尝试为我的客户端创建一个插件我的 external.js 文件将在我的服务器上远程工作）。

我的 external.js 文件是这样的：

```
 if (typeof jQuery === "undefined") {
   var script = document.createElement('script');
   script.src = 'js/jquery-1.7.1.min.js';
   script.type = 'text/javascript';
   document.getElementsByTagName('head')[0].appendChild(script);

   }

  if (typeof jQuery === "undefined") {
  var script = document.createElement('script');
  script.src = 'js/fancybox.js';
  script.type = 'text/javascript';
  document.getElementsByTagName('head')[0].appendChild(script);
 }

 document.ready = function() {
 $(document).ready(function(){

   $("#addimage").html("<a id='fancybox' href='large"+clientID+".jpg'><img border=0 src='thumb"+clientID+".jpg'/></a>");

 }
 }); 
```

所以我希望这个 addimage div 只工作我的 jquery 文件完全加载

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T10:09:10.207

在加载所有其他页面的根页面中，创建一个数组或变量列表，这些变量是特定 JQuery 页面是否加载的标志。

编写一个例程，在它们全部加载之前不显示任何 JQuery CSS 容器，并通过使用根页面中的函数设置标志来将数组/变量加载标志设置为 true。

**所以根页面有：**

```
 <script>
   $JQueryPage1Ready = false;
   $JQueryPage2Ready = false;
   $JQueryPage3Ready = false;

   // Your JQuery loaded pages have javascript within them to call this function
   function setJQueryPageToReady($PageNo)
   {
       switch ($PageNo)
       {
       case 1: $JQueryPage1Ready = true; break;
       case 2: $JQueryPage2Ready = true; break;
       case 3: $JQueryPage3Ready = true; break;
       }

       // Check all pages are loaded
       if ($JQueryPage1Ready && JQueryPage2Ready && JQueryPage3Ready)
       {
           $("JQueryPage1Container").show(1000);
           $("JQueryPage2Container").show(1000);
           $("JQueryPage3Container").show(1000);
       }
   }
   <script> 
```

**jQuery加载页面1**

```
 <script>
       setJQueryPageToReady(1);
   <script> 
```

**jQuery加载页面2**

```
 <script>
       setJQueryPageToReady(2);
   <script> 
```

**jQuery加载页面3**

```
 <script>
       setJQueryPageToReady(3);
   <script> 
```

可能还有其他方法，但这是我首先想到的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T10:06:03.117

好的，您需要一个 javascript 加载程序..您可以使用 headjs 或 modernizr 或 yepnope。它们具有回调功能，您可以在其中放置在某个 javascript 文件已加载时将运行的脚本

[www.headjs.com](http://headjs.com/)

[www.modernizr.com](http://modernizr.com)

[www.yepnopejs.com](http://yepnopejs.com/)

# java - 出现异常：网络适配器无法在简单的 jdbc 程序中建立连接

> ID：11599312
> 
> 赞同：1
> 
> 时间：2012-07-22T09:59:51.517
> 
> 标签：java, oracle10g

我试图运行一个简单的jdbc代码[使用jdk 1.6，oracle 10g]，

```
package javaapplication2;
import java.text.*;
import java.sql.*;
import java.io.FileWriter;
import java.io.PrintWriter;
import java.io.BufferedWriter;
/**
 * @author animark
 */
public class CallableStatementEx1 {
    public CallableStatementEx1(){;}

public static void main(String s[]) throws Exception {
    try
    {
        Class.forName("oracle.jdbc.driver.OracleDriver").newInstance();
        Connection con=null;
        String url= "jdbc:oracle:thin:@//localhost:1521:orcl" ;   
        con = DriverManager.getConnection(url,"scott","password");

        String query="update emp set HIREDATE=?,ENAME=? where empno=?";

        //Step1: Get PreparedStatement
        PreparedStatement ps=con.prepareStatement(query);

        //Prepare java.sql.Date object
        /*
        This logic shows how to convert simple String that is in 
        dd-MM-yyyy format into Date object
        */
        SimpleDateFormat sdf=new SimpleDateFormat("dd-MM-yyyy");
        java.util.Date d=sdf.parse("26-12-2001");
        java.sql.Date newdate=new java.sql.Date(d.getTime());

        //Step2: set parameters
        ps.setDate(1,newdate);
        ps.setString(2,"animark");
        ps.setInt(3,7839);

        //Step3: execute the query
        int i=ps.executeUpdate();

        System.out.println("record updated count: "+i);
        con.close();
    }
    catch(Exception e)
    {
                    e.printStackTrace();

    }
    }//main
}//class 
```

代码正在正确编译。但是当我试图运行它时，我得到了以下异常..

```
java.sql.SQLException: Io exception: The Network Adapter could not establish the connection
    at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:112)
    at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:146)
    at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:255)
    at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:387)
    at oracle.jdbc.driver.PhysicalConnection.<init>(PhysicalConnection.java:414)
    at oracle.jdbc.driver.T4CConnection.<init>(T4CConnection.java:165)
    at oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:35)
    at oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:801)
    at java.sql.DriverManager.getConnection(Unknown Source)
    at java.sql.DriverManager.getConnection(Unknown Source)
    at javaapplication2.CallableStatementEx1.main(CallableStatementEx1.java:19) 
```

我检查了 oracle 服务，它们都已启动并正在运行。

另外，请查找其他文件的内容为

==================================================== ================================ tnsnames.ora:

```
# tnsnames.ora Network Configuration File: C:\oraclexe\app\oracle\product\10.2.0\server\BIN\network\admin\tnsnames.ora
# Generated by Oracle configuration tools.

ORCL =
  (DESCRIPTION =
    (ADDRESS = (PROTOCOL = TCP)(HOST = localhost)(PORT = 1521))
    (CONNECT_DATA =
      (SERVER = DEDICATED)
      (SERVICE_NAME = orcl)
    )
  )

EXTPROC_CONNECTION_DATA =
  (DESCRIPTION =
    (ADDRESS_LIST =
      (ADDRESS = (PROTOCOL = IPC)(KEY = EXTPROC1))
    )
    (CONNECT_DATA =
      (SID = PLSExtProc)
      (PRESENTATION = RO)
    )
  ) 
```

==================================================== ====================================

```
sqlnet.ora

# sqlnet.ora Network Configuration File: C:\oraclexe\app\oracle\product\10.2.0\server\BIN\network\admin\sqlnet.ora
# Generated by Oracle configuration tools.

# This file is actually generated by netca. But if customers choose to 
# install "Software Only", this file wont exist and without the native 
# authentication, they will not be able to connect to the database on NT.

SQLNET.AUTHENTICATION_SERVICES= (NTS)

NAMES.DIRECTORY_PATH= (TNSNAMES, EZCONNECT)
================================================================================

# listener.ora Network Configuration File: C:\oraclexe\app\oracle\product\10.2.0\server\BIN\network\admin\listener.ora
# Generated by Oracle configuration tools.

SID_LIST_LISTENER =
  (SID_LIST =
    (SID_DESC =
      (SID_NAME = PLSExtProc)
      (ORACLE_HOME = C:\oraclexe\app\oracle\product\10.2.0\server\BIN)
      (PROGRAM = extproc)
    )
  )

LISTENER =
  (DESCRIPTION_LIST =
    (DESCRIPTION =
      (ADDRESS = (PROTOCOL = IPC)(KEY = EXTPROC1))
      (ADDRESS = (PROTOCOL = TCP)(HOST = localhost)(PORT = 1521))
    )
  ) 
```

==================================================== ==============================

我能够使用凭据“scott/password”连接到实例“orcl”，但是当我尝试使用语句连接时

SQL> 以 sysdba 身份连接 sys/password@orcl

我收到以下错误.. ORA-12514: TNS:listener 目前不知道连接中请求的服务

## 描述符。

我还为 orcl 运行 LSNRCTL 并发现

适用于 32 位 Windows 的 LSNRCTL：版本 10.2.0.1.0 - 2012 年 7 月 22 日 13:42:30 生产

版权所有 (c) 1991, 2005, Oracle。版权所有。

```
Connecting to (DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(HOST=localhost)(PORT=1521))(CONNECT_DATA=(SERVER=DEDICATED)(SERVICE_NAME=orcl)))
Services Summary...
Service "PLSExtProc" has 1 instance(s).
  Instance "PLSExtProc", status UNKNOWN, has 1 handler(s) for this service...
    Handler(s):
      "DEDICATED" established:0 refused:0
         LOCAL SERVER
The command completed successfully 
```

如果我在这里做错了什么，请帮助我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T13:49:58.597

尝试从`//`连接 URL 中取出。代替

```
 String url= "jdbc:oracle:thin:@//localhost:1521:orcl" ; 
```

尝试

```
 String url= "jdbc:oracle:thin:@localhost:1521:orcl" ; 
```

# php - php 包含（无法获得正确的路径）

> ID：11599321
> 
> 赞同：0
> 
> 时间：2012-07-22T10:01:26.233
> 
> 标签：php, wordpress, include-path

我有一个文件位于：

```
/Library/WebServer/Documents/wordpress/wp-content/themes/directorypress/sidebar-left-big.php 
```

我在子目录中有另一个文件：

```
/Library/WebServer/Documents/wordpress/wp-content/themes/directorypress/template_directorypress/_gallerypage.php 
```

在 _gallerypage.php 我有 php 包括：

```
<?php include('../sidebar-left-big.php'); //left sidebar, category navigation and ads ?> 
```

我得到的错误：

```
Warning: include(../sidebar-left-big.php) [function.include]: failed to open stream: No such file or directory in /Library/WebServer/Documents/wordpress/wp-content/themes/directorypress/template_directorypress/_gallerypage.php on line 9

Warning: include() [function.include]: Failed opening '../sidebar-left-big.php' for inclusion (include_path='.:') in /Library/WebServer/Documents/wordpress/wp-content/themes/directorypress/template_directorypress/_gallerypage.php on line 9 
```

在我看来，我做的一切都是正确的。

我认为问题可能是 _gallerypage.php 是通过包含在另一个文件中加载的，因此 ../ 相对于该文件会导致错误。但是错误并没有说明它认为 sidebar-left-big.php 的路径在哪里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T10:06:36.540

采用`include dirname(__FILE__).'/../sidebar-left-big.php';`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T10:09:22.623

***是***的，你是对的。

当您包含`_gallerypage.php`来自另一个文件的 时，它确实采用相对于自身的路径。所以，你应该解决这个问题。

最好的方法，可能是避免这些困难。有很多方法可以做到这一点。就像，一个人会在一个常量中定义一个全局根，并根据它在任何地方包含所有东西。

例如：

```
define("BASE" , "/wordpress"); //Define a base directory

//now whenever you are including and requirng files, include them on the basis of BASE

require(BASE."/admin/.../some.php"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-30T00:24:06.273

使用以下代码段并将其保存为 PHP 应用程序根目录中的文件（例如 config.php）。然后您可以继续在所有其他 PHP 文件中引用此文件以使用变量 BASE_PATH 和 TOP_LEVEL_DIR

```
<?php

/**
 * @def (string) DS - Directory separator.
 */
define("DS","/",true);

/**
 * @def (resource) BASE_PATH - get a base path.
 */
define('BASE_PATH',realpath(dirname(__FILE__)).DS,true);
define('TOP_LEVEL_DIR', public_base_directory());

?>

<?php
function public_base_directory()
{
    //get public directory structure eg "/top/second/third"
    $public_directory = dirname($_SERVER['PHP_SELF']);
    //place each directory into array
    $directory_array = explode('/', $public_directory);
    //get highest or top level in array of directory strings
    $public_base = max($directory_array);

    return $public_base;
}
?> 
```

# android - 如何将 iFrame 用户代理覆盖到 iPhone？

> ID：11599322
> 
> 赞同：1
> 
> 时间：2012-07-22T10:01:37.220
> 
> 标签：android, iphone, ios, iframe, user-agent

如何强制我网站中的 iFrame 像 iPhone 浏览器一样运行并始终加载移动网站？

这意味着当有人从桌面/移动浏览器访问该站点并希望该 iFrame 加载 [www.nytimes.com] 时，该 iFrame 将加载移动站点 [m.nytimes.com]。

# java - Java：返回无穷大

> ID：11599323
> 
> 赞同：1
> 
> 时间：2012-07-22T10:01:50.333
> 
> 标签：java, multithreading, math, parallel-processing

> **可能重复：**
> [ConcurrentHashMap：我们可以信任它吗？](https://stackoverflow.com/questions/11599949/concurrenthashmap-can-we-trust-on-it)

以下表达式为我返回无穷大。

```
 Double sum =0.0; 
 sum = sum + Math.exp(getScore(contextFeatureVector,entry.getValue())+constant); 
```

这里`getScore`计算两个向量的内积。

```
 Constant = 0.00001 
```

向量值范围从 [-0.01,0.01]， `entry.getValue()` 由多个线程读取/写入。`entry.getValue()`是哈希图的值：

```
 Map<Integer,ArrayList<Double>> anEntry = new ConcurrentHashmap(); 
```

# amazon-s3 - 如何采取亚马逊增量备份

> ID：11599325
> 
> 赞同：0
> 
> 时间：2012-07-22T10:02:10.980
> 
> 标签：amazon-s3, amazon-ec2, amazon-ebs

我正在为我们的 EBS 卷每天备份一个自动化机制。

关于那你能告诉我如何备份快照，如何将其移动到 s3，然后如何进行增量备份？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T19:25:54.853

您显然还没有意识到[Amazon EBS](http://aws.amazon.com/ebs/)的全部潜力，只要您的要求大多已经内置，请参阅*Amazon EBS 卷的功能*以及*Amazon EBS 快照*部分：

> Amazon EBS 还提供创建**卷的时间点快照的能力，这些快照持久保存到 Amazon S3**。这些快照可用作新 Amazon EBS 卷的起点，并保护数据以实现长期持久性。[...] *[强调我的]*

和

> Amazon EBS 能够将数据的时间点快照备份到 Amazon S3 以实现持久恢复。**Amazon EBS 快照是增量备份**，这意味着只会保存设备上自上次快照以来发生更改的块。[...] *[强调我的]*

因此，您既不需要将 EBS 快照移动到 S3，也不需要自己处理它们的增量性质，唯一缺少的是各个 API 的预定使用，这可以通过以下两种方式之一来实现：

*   [通过可用的AWS 软件开发工具包 (SDK)](http://aws.amazon.com/code/)之一集成到自定义解决方案中，请参阅[CreateSnapshot](http://docs.amazonwebservices.com/AWSEC2/latest/APIReference/ApiReference-query-CreateSnapshot.html)
*   通过现成的[Amazon EC2 API 工具](http://aws.amazon.com/developertools/351/)集成到 shell（例如通过[Cron](http://en.wikipedia.org/wiki/Cron) ） ，参见例如[ec2-create-snapshot](http://docs.amazonwebservices.com/AWSEC2/latest/CommandLineReference/ApiReference-cmd-CreateSnapshot.html)

祝你好运！

* * *

### 附录

事实上，在上述 API 之外，甚至无法访问 S3 中的 EBS 快照，请参阅常见问题解答[我能否使用常规 Amazon S3 API 访问我的快照？](http://aws.amazon.com/ec2/faqs/#Will_I_be_able_to_access_my_snapshots_using_the_regular_Amazon_S3_APIs)：

> 不可以，快照只能通过 Amazon EC2 API 获得。

您可能还想查看[Amazon EC2 常见](http://aws.amazon.com/ec2/faqs/)问题中的*Amazon Elastic Block Storage (EBS)*部分中的其他 EBS 相关常见问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T15:36:22.493

查看[http://skeddly.com](http://skeddly.com) - 他们有自动备份的功能。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-23T06:24:17.583

我是 Bucket Explorer 的开发者之一，它是 amazon s3 工具。存储桶资源管理器仅在 Amazon s3 存储桶上上传更新文件或新文件。它不会在 s3 上上传相同的文件。因此，当您上传/下载时，它只会上传/下载新的或更新的数据。

[存储桶资源管理器](http://www.bucketexplorer.com)

# asp.net - 为什么__VIEWSTATE隐藏的输入元素被包围 ?

> ID：11599329
> 
> 赞同：8
> 
> 时间：2012-07-22T10:03:13.043
> 
> 标签：asp.net, .net, viewstate

为什么 ASP.NET 会在其中呈现隐藏的`__VIEWSTATE`输入元素`<div></div>`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T10:38:18.880

他们这样做是为了“更符合 Web 标准”——这是 MSDN 杂志文章[Enforce Web Standards For Better Accessibility](http://msdn.microsoft.com/en-us/magazine/cc163438.aspx)的引述：

> ASP.NET 1.1 中存在一些众所周知的缺陷。开箱即用的控件生成的代码无法通过验证。这主要归因于 ASP.NET 1.1 中处理 ViewState 的方式——使用不包含在块显示中的隐藏输入标记，如下所示：
> 
> ```
> <input type="hidden" name="__VIEWSTATE" value="dDwtMTU1NzQzNDgy..." /> 
> ```
> 
> 这与其他一些语法问题相结合，给 ASP.NET 1.1 带来了不合规的不幸名声。
> ASP.NET 2.0 解决了许多 Web 标准问题。例如，如果您查看 ASP.NET 2.0 生成的页面的源代码，您会看到 ViewState 现在被包装在 div 标记中，从而使其兼容：
> 
> ```
> <div>
>       <input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="dDwtMTU1NzQzNDgy..." />
> </div> 
> ```
> 
> Microsoft 已公开表明 ASP.NET 2.0 的目标之一**是更符合 Web 标准**，事实上，ASP.NET 2.0 允许您创建兼容的网站和控件。[Stephen Walther 的 MSDN® 文章“使用 Web 标准构建 ASP.NET 2.0 网站](http://msdn2.microsoft.com/aa479043.aspx)”是构建兼容网站的重要资源。这篇 78 页的文章非常详细地介绍了根据 Web 标准构建站点。

这是否真正与 Web 标准更一致还有待商榷。我对 Web 标准的了解还不够，无法发表自己的看法，我只是回答你的问题。

# ios - 如何为 iOS 应用程序自动创建性能报告？

> ID：11599334
> 
> 赞同：18
> 
> 时间：2012-07-22T10:03:40.673
> 
> 标签：ios, continuous-integration, performance-testing

对于我的一些 iOS 应用程序项目，我希望我的 CI 服务器能够报告以下属性：

*   启动时间
*   帧率

两者都是随时间变化的图表，并且带有“低水位标记”，因此如果测量结果不在特定标准内，则构建失败。我已经找到了一些我需要的东西。

*   CI 服务器将是 Jenkins。
*   我可以使用[Transporter Chief](http://gamua.com/blog/2012/03/how-to-deploy-ios-apps-to-the-iphone-via-the-command-line/)将构建的应用程序安装到 iPad 上。
*   为了测量启动时间，我可以找到启动`main()`和离开之间的持续时间`application:didFinishLaunchingWithOptions:`。
*   要测量帧速率，我可以将 a放入应用程序并对其属性`CADisplayLink`进行采样。`duration`
*   如果这些测试输出 JMeter XML，那么 Jenkins 可以通过[性能](https://wiki.jenkins-ci.org/display/JENKINS/Performance+Plugin)插件显示输出。

我没有解决的是，我应该如何将这些测试嵌入到我的应用程序中并在 iPad 上启动它？如上所述，我可以将应用程序*部署*到 iPad，但是我不知道如何启动它来收集测试结果。我的单元测试在模拟器上运行 - 我显然不想在那里运行性能测试:-)。

我想有一个解决方案涉及越狱 iPad 并通过 SSH 控制应用程序，如果可能的话，我宁愿不走那条路。如果你*已经*这样做了并且可以解释它是如何工作的，我仍然想听听它。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-26T13:36:07.073

我还使用 fruitstrap 在 CI 的设备上安装应用程序。在启动应用程序方面，我知道两种方法：

1.  使用带有调试器的fruitstrap

    *   我知道有团队这样做是为了在 CI 中的设备上运行 KIF 集成测试。我玩过fruitstrap，让它在设备上启动应用程序，但我自己还没有采取额外的步骤来自动化整个事情
    *   我在水果带上的帖子的无耻插件：http: [//www.stewgleadow.com/blog/2011/11/05/installing-ios-apps-on-the-device-from-the-command-line/](http://www.stewgleadow.com/blog/2011/11/05/installing-ios-apps-on-the-device-from-the-command-line/)
2.  将`instruments`命令行工具与 UIAutomation 一起使用

    *   我知道 Instruments 工具可以在 CI 中自动启动设备上的应用程序（我*希望*它也安装了它们，但在 Apple 修复它之前我们有果子带）。因此，您可以编写一个非常简单的小 UIAutomation 测试，让您的应用程序有足够的时间进行性能分析。
    *   Jonathan Penn 有一个不错的 UIAutomation 小演示项目和构建脚本，可以使用 fruistrap 与“安装”步骤集成，以便在设备上试用

在这两种情况下，我在 libusb 周围使用了一个小包装器来给我附加设备的设备 ID，所以我插入 CI 机器的设备越多，它运行测试的设备就越多，[https://github.com/sgleadow/ iphone_detect](https://github.com/sgleadow/iphone_detect)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T13:08:13.567

您可以使用 lldb 在设备上启动应用程序吗？

如果是这样，它也可能能够捕获日志输出。

# r - 如何在每小时时间序列中添加缺失的日期并删除重复的日期

> ID：11599341
> 
> 赞同：2
> 
> 时间：2012-07-22T10:04:53.920
> 
> 标签：r, time-series

如何在每小时时间序列中添加缺失的日期和删除重复的日期。缺失的日期用 NA 填充相应的日期以表示降雨。

示例时间序列如

```
 date  Rainfall(mm)
1970-01-05 00:00:00           1.0 
1970-01-05 01:00:00           1.0
1970-01-05 05:00:00           3.6
1970-01-05 06:00:00           3.6
1970-01-05 07:00:00           2.2
1970-01-05 08:00:00           2.2
1970-01-05 09:00:00           2.2
1970-01-05 10:00:00           2.2
1970-01-05 11:00:00           2.2
1970-01-05 13:00:00           2.2
1970-01-05 13:00:00           2.2
1970-01-05 13:00:00           2.2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T11:03:08.873

您可以使用组合`seq.POSIXt`来创建一个`data.frame`没有丢失时间步长的对象（对象`grid.`），然后在我的示例中使用`merge`来与观察到的组合。`df`

这应该可以解决您的问题

```
# Create a sample data.frame missing every second observation.
df <- data.frame(date=seq.POSIXt(from=as.POSIXct("1970-01-01 00:00:00"), to=as.POSIXct("1970-01-01 10:00:00"), by="2 hours"), rainfall=rnorm(6))
#Create a seq of times without anything missing
grid. <- data.frame(date=seq.POSIXt(as.POSIXct("1970-01-01 00:00:00"), to=as.POSIXct("1970-01-01 10:00:00"), by="1 hours"))
# Merge them together keeping all the values from grid.
dat. <- merge(grid., df, by="date", all.x=TRUE) 
```

要删除重复值，您可以查找它们并使用该`duplicated`函数删除它们。

```
# The ! means the reverse logic. Therefore TRUE becomes FALSE.
dup_index <- !duplicated(dat.[,1])
# Now re-create the dat. object with only non-duplicated rows.
dat. <- dat.[dup_index,] 
```

另一种方法是使用该`aggregate`功能。如果您有重复的实际上是两个不同的观察结果，因此您想要两者的平均值，这可能很有用；

```
dat. <- aggregate(dat.[,2], by=list(dat[,1]), FUN=mean) 
```

高温高压

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T14:05:48.167

[动物园常见问题解答小插图](http://cran.r-project.org/web/packages/zoo/vignettes/zoo-faq.pdf)中的常见问题解答 #13解决了有关填充时间序列的部分。中的`aggregate`参数`read.zoo`处理重复项。在这种情况下，我们对它们进行平均，但我们可以采取其他措施，例如使用`FUN = function(x) tail(x, 1)`. 我们在这里使用[chron](http://cran.r-project.org/web/packages/chron/index.html)日期/时间来避免时区问题（请参阅[R News 4/1](http://cran.r-project.org/doc/Rnews/Rnews_2004-1.pdf)），但如果时区相关，我们可以使用 POSIXct ——它们似乎不是，因为它们不在输入中。

```
Lines <- "date  Rainfall(mm)
1970-01-05 00:00:00           1.0 
1970-01-05 01:00:00           1.0
1970-01-05 05:00:00           3.6
1970-01-05 06:00:00           3.6
1970-01-05 07:00:00           2.2
1970-01-05 08:00:00           2.2
1970-01-05 09:00:00           2.2
1970-01-05 10:00:00           2.2
1970-01-05 11:00:00           2.2
1970-01-05 13:00:00           2.2
1970-01-05 13:00:00           2.2
1970-01-05 13:00:00           2.2"

library(zoo)
library(chron)

asChron <- function(d, t) as.chron(paste(d, t))
z <- read.zoo(text = Lines, skip = 1, index = 1:2, FUN = asChron, agg = mean)
merge(z, zoo(, seq(start(z), end(z), 1/24))) # as in FAQ 
```

如果数据来自文件，请替换`text = Lines`为`file = "myfile.dat"`.

# domain-driven-design - DDD中实体构造的资源查找

> ID：11599342
> 
> 赞同：1
> 
> 时间：2012-07-22T10:05:01.200
> 
> 标签：domain-driven-design, ddd-repositories

我对 DDD 相当陌生，这是我的困境：

我必须保留一个引用实体 B 的实体 A（让我们认为两者都是实体根）。UI 层通过 A_DTO（A 的 DTO 类）收集所有这些信息（在控制器处），将属性从 DTO 映射到 A 的新实例，现在为了在 A 中引用 B，UI 发送一个 id。当我在存储库后面使用 ORM 时，我想从 BRepository 查找 B 的对象实例，在我们正在构建的新 A 实例上填充引用，最后调用 ARepository.save(A instance)。

我这里有几个选择

1.  在 UI 层中执行所有这些操作（在控制器或某种服务外观中）或
2.  在名为 createA 的 ApplicationService 甚至是域 Service 中执行此操作。

哪个选项是正确的？？？。这里真正突出的是通过其 id 查找 B 以获取对 A 对象设置的引用的过程，这可以同样被认为是保持 ORM 满足或保持域模型一致的过程。围绕在 A 上设置 B 的引用的过程可能存在一些隐含的业务规则和验证，我认为这些是这里决定的驱动点。

此外，如果在创建实体的过程中编织验证，并通过特定错误说构造函数和/或设置器可以通过 UI 冒泡给客户端并有另一个，那么这里可能会进一步奇怪的音调将是验证的考虑因素通过回购的验证级别？？或作为控制器中发生的明确步骤？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T03:22:13.163

DTO 只是用于在 UI 层中传输数据的便利类。您使用 ID 来引用 B 的事实是 UI 层的实现细节。因此，将 DTO 映射到域对象应该是 UI 层/控制器的工作，包括将 ID 转换为引用。

另一方面，验证正确地属于领域层。在这方面，UI 的唯一工作是在域对象中设置值并显示由此产生的任何错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T23:28:53.067

这两个选项都可以被视为正确，但我更倾向于选项 2，因为应用程序服务提供的封装有助于阅读和理解代码。它还可以更轻松地整合您的域的 API。支持选项 1 而不是 2 的论点是，由于使用应用程序服务而产生的额外封装层是不必要的复杂性，尽管您当然是评判者。验证通常体现在应用程序的多个层中，包括表示层和领域层。编写一次验证逻辑并在其他地方重用似乎很理想，实际上复制验证逻辑通常更容易。这意味着表示层，例如 ASP.NET MVC，有自己的视图模型验证声明。然后应用程序服务和域实体还应该执行该上下文中所需的任何验证。看看我的帖子[DDD 中的服务](http://gorodinski.com/blog/2012/04/14/services-in-domain-driven-design-ddd/)以及DDD 中的[验证，](http://gorodinski.com/blog/2012/05/19/validation-in-domain-driven-design-ddd/)以便深入讨论这些主题。

# php - 如何开始使用来自另一个域的 Web 服务？

> ID：11599345
> 
> 赞同：0
> 
> 时间：2012-07-22T10:05:20.587
> 
> 标签：php, web-services, web

PHP初学者在这里。抱歉，如果这已以另一种形式发布 - 我已经看过，但由于我不确定我在寻找什么，我也不确定具体要搜索什么。

本质上 - 我的城镇在[http://data.brisbane.qld.gov.au/index.php/datasets/page/2/](http://data.brisbane.qld.gov.au/index.php/datasets/page/2/)上发布了许多网络服务- 其中一些是网络服务。为了学习如何在我自己的域上查询和显示这些 Web 服务的结果，我应该研究什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T10:36:12.447

似乎这个站点上的大多数 Web 服务都是 RSS 提要，因此您可以获取这些数据并对其进行解析。[这篇文章](https://stackoverflow.com/questions/1464543/rss-feeds-in-php)很好地解释了通过 PHP 阅读 RSS 。

# android - 通过模拟器发送电话号码

> ID：11599346
> 
> 赞同：3
> 
> 时间：2012-07-22T10:05:22.870
> 
> 标签：android, android-emulator, phone-number

我正在制作一个应用程序，我想检索设备电话号码并将其发送到服务器上。但我正在 android 模拟器上测试这个应用程序。谁能告诉我如何在模拟器和实际设备中设置或获取电话号码。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T10:32:21.257

如果我们使用电话管理器，我们可以在模拟器中获取电话号码

```
TelephonyManager tm = (TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE);
    String phone = tm.getLine1Number();

    Toast toast = Toast.makeText(getApplicationContext(), phone, Toast.LENGTH_SHORT);
    toast.show(); 
```

在制作电话号码的祝酒词时，我们得到电话号码，例如.. `15555215554`

它还需要 android.permission.READ_PHONE_STATE 权限。所以模拟器也有自己的电话号码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T10:08:44.357

在**DDMS**透视图中，您将看到**Emulator Control**选项卡，您可以从那里模拟调用。如果您没有看到 Emulator Control 那里。使用 Window> Show /View > Emulator Control 使选项卡出现。

要访问代码中的设备电话号码，请使用 telephonymanager.getLine1Number(); 为此，您需要在清单文件中设置 READ_PHONE_STATE 权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T10:12:43.427

您无法从您的设备调用模拟器。但是您可以调用两个模拟器。详情如何？您可以转到 DDMS 透视图，然后转到 Emulator Control 选项卡，您可以从那里调用其他仿真器。 [http://developer.android.com/tools/devices/emulator.html](http://developer.android.com/tools/devices/emulator.html)

# php - 在 $model->find Yii 中使用 UTC_TIMESTAMP()

> ID：11599349
> 
> 赞同：1
> 
> 时间：2012-07-22T10:05:44.520
> 
> 标签：php, mysql, yii, timestamp, utc

我想知道如何使用`CActiveRecord`Yii 实现这一点：

`SELECT name, surname, UTC_TIMESTAMP(last_seen) FROM users WHERE id = '12345'`

我已经使用这种方法编写了大部分代码：`$model->findAll(...)`，但是我无法将我最喜欢的 MySQL 时间戳函数合并到查询中。

我需要这个才能`date_default_timezone_set()`在 PHP 中设置时区。

我的时间戳`TIMESTAMP`以 mysql 表中的格式存储。

**编辑**

我不想将时区从 PHP 传递给 MySQL。`CURRENT_TIMESTAMP`我使用默认值存储我的时间戳。我想使用的唯一时间`date_default_timezone_set()`是当我想在用户的时区中显示此日期时。

抱歉，如果我不够清楚，感谢您的输入:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T13:44:24.633

在您最近发表评论之后，是的，有一种方法可以传递[日期时间函数](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html "http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html")。如果您查看 can take 2 个参数的[文档`findAll();`](http://www.yiiframework.com/doc/api/1.1/CActiveRecord#findAll-detail "http://www.yiiframework.com/doc/api/1.1/CActiveRecord#findAll-detail")，一个用于条件或条件，第二个用于将参数绑定到生成的 sql。

我们可以使用第一个参数来传递一个条件并使用[CDbCriteria 的`select`属性](http://www.yiiframework.com/doc/api/1.1/CDbCriteria#select-detail "http://www.yiiframework.com/doc/api/1.1/CDbCriteria#select-detail")，它

> 指sql语句的select子句

因此我们可以这样做：

```
$dbCriteria=new CDbCriteria;
$dbCriteria->select='name, surname, UTC_TIMESTAMP() as some_alias'; // we need the alias so that the timestamp is easily accessible
// you can also pass * if you need to access all the values of the table, alongwith the timestamp, like '*, UTC_TIMESTAMP() as some_alias'
$model->findAll($dbCriteria); 
```

但是当然要使用 some_alias 你需要在你的模型中声明它：

```
public $some_alias; // this will be automatically be populated by the alias, when you query the db, in findAll 
```

# objective-c - NSString 接受子字符串

> ID：11599350
> 
> 赞同：0
> 
> 时间：2012-07-22T10:05:53.000
> 
> 标签：objective-c

我在目标 C 中有以下 NSString：

```
[["123"], ["456"], ["adg"]] 
```

我想像这样分成不同的字符串：

```
aux = 123;

aux2 = 456;

aux3 = adg; 
```

拜托，任何人都可以帮助我

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T11:07:42.567

如果您可以控制要解析的字符串格式，我强烈建议您查看[JSON](http://json.org/)并使用[`NSJSONSerialization`](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html)它来解析它。这比通过定义自己的格式来存储原始对象来重新发明轮子更可取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T10:48:06.397

```
NSString *str = @"[[\"123\"], [\"456\"], [\"adg\"]]";
NSString *new = [[str substringFromIndex:4]substringToIndex:7];

new will be 123 
```

等等

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T10:32:53.613

你可以打电话

```
NSArray *arrayOfSubStrings = [myString componentsSeparatedByString:@","]; 
```

然后遍历数组中的每个字符串并通过调用删除方括号

```
aux =  [stringByReplacingOccurrencesOfString:[arrayOfSubStrings ObjectAtIndex:x] withString:@""] 
```

[有关详细信息，请参阅 NSString 文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)

# regex - 需要改进我的正则表达式以删除完整的句子而不是删除链接

> ID：11599352
> 
> 赞同：0
> 
> 时间：2012-07-22T10:06:12.180
> 
> 标签：regex, url, hyperlink

因此，在一些浏览 stackoverflow 的可爱人士的帮助后，我得到了一个正则表达式来删除人们发布的链接。现在，我想我想找到一个删除他们整个帖子的人，也许用“”，所以我的表格不允许这个帖子。（而不是嘿，在 [LINK REMOVED] 上查看我的网站。这太棒了，但如果它删除整个句子而不仅仅是链接可能会更好。）我对正则表达式 atm 很糟糕，所以任何帮助将不胜感激！

这是我当前的正则表达式：

```
$a = $_POST['msge'];
$b = preg_replace('%[a-zA-Z0-9\-\.]+\.(com|org|net|mil|edu|COM|ORG|NET|MIL|EDU)%', '[LINK REMOVED]', $a); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T01:24:45.747

有更好的方法可以在字符串中查找链接，这是在[这个](https://stackoverflow.com/questions/1053349/using-regex-to-extract-urls-from-plain-text-with-perl)相关问题中给出的 Perl[示例。](http://search.cpan.org/~mschwern/URI-Find-20111103/lib/URI/Find.pm)如果您坚决使用正则表达式，则在[另一个相关问题中提到了](https://stackoverflow.com/questions/206059/php-validation-regex-for-url)[这](http://daringfireball.net/2010/07/improved_regex_for_matching_urls)一点，并且看起来比您当前正在尝试的更有希望。

如果您想替换给定链接的整个句子，您可以使用以下内容：

```
[^.|^!|^?]*(link)[^.|^!|^?]*[.|!|?] 
```

显然，您想用您的链接模式匹配替换链接。

主观上我还建议从人们发布的内容中间删除整个句子可能有点奇怪，因为它可能会改变帖子的整个含义。如果您的主要目的是删除链接（例如，防止垃圾邮件反向链接），您可能只想通过将链接替换为 -LINK- 之类的明显内容来混淆链接。

# ado.net - 使用 Rowfilter 过滤数据视图的日期列

> ID：11599355
> 
> 赞同：1
> 
> 时间：2012-07-22T10:06:15.117
> 
> 标签：ado.net

我想根据格式为“DD/MM/YYYY”的选定日期过滤我的视图，但我的数据视图列的日期为“DD/MM/YYYY hh:mm:ss”格式。我想过滤视图根据选择的日期而不考虑时间。如何将 MATCH_DATE 列转换为 RowFilter 中的“DD/MM/YYYY”格式。

```
dtFixt.DefaultView.RowFilter = "MATCH_DATE='" & CType(calSeason.SelectedDate,DateTime).ToString("dd/MM/yyyy") & "'" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T10:12:30.947

您可以使用 CONVERT 函数在您的视图中将 MATCH_DATE 列转换为“DD/MM/YYYY”格式，如下所示：

```
CONVERT(VARCHAR(10), MATCH_COLUMN, 103) 
```

103 是日期格式代码，可将任何日期转换为“DD/MM/YYYY”格式。

有关不同日期格式的更多详细信息，请参阅文章[日期格式](http://www.sql-server-helper.com/tips/date-formats.aspx)。

# windows-8 - Windows 8 live Tile 的定期更新

> ID：11599356
> 
> 赞同：3
> 
> 时间：2012-07-22T10:06:19.140
> 
> 标签：windows-8, microsoft-metro

比如说，我想定期更新 Windows 8 动态磁贴，比如 10 秒后。有没有办法做到这一点？我在 Windows 8 中使用 Metro xaml c#。

这是我在 Dispatcher Timer 的 Tick 事件上编写的代码：

```
switch(imageIndex)
{
    case  0:
        imageUrl = "Assets/Image1.png";
        break;
    case 1:
        imageUrl = "Assets/Image1.png";
        break;
    case 2:
        imageUrl = "Assets/Image1.png";
        break;        
}

ITileWIdeImageAndText01 tileContent = TileContentFactory.CreateTileWideImageAndText01();
tileContent.TextCaptionWrap.Text = "Hello";
tileContent.Image.Src = imageUrl;
tileContent.Image.Alt = "";

ITileSquareImage squareContent = TileContentFactory.CreateTileSquareImage();
squareContent.Image.Src = imageUrl;
squareContent.Image.Alt = "";
tileContent.SquareContent = squareContent;

TileUpdateManager.CreateTileUpdaterForApplication().Update(tileContent.CreateNotification()); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T15:51:53.627

Don't use Dispatcher Timer as it will slow your app. You can use the following in your page Initializer:

```
TileUpdateManager.CreateTileUpdaterForApplication().EnableNotificationQueue(true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T15:19:57.917

这是你应该如何做的：

```
switch(imageIndex)
{
    case  0:
        imageUrl = "Assets/Image1.png";
        break;
    case 1:
        imageUrl = "Assets/Image1.png";
        break;
    case 2:
        imageUrl = "Assets/Image1.png";
        break;        
}

ITileWIdeImageAndText01 tileContent = TileContentFactory.CreateTileWideImageAndText01();
tileContent.TextCaptionWrap.Text = "Hello";
tileContent.Image.Src = imageUrl;
tileContent.Image.Alt = "";

ITileSquareImage squareContent = TileContentFactory.CreateTileSquareImage();
squareContent.Image.Src = imageUrl;
squareContent.Image.Alt = "";
tileContent.SquareContent = squareContent;

var updater = TileUpdateManager.CreateTileUpdaterForApplication();
updater.EnableNotificationQueue(true);

updater.AddToSchedule(
    new ScheduledTileNotification(
        tileContent.CreateNotification(), 
        DateTime.Now.AddSeconds(10))
    { 
           ExpirationTime=DateTimeOffset.UtcNow.AddSeconds(20)
    }); 
```

这将导致在您启动应用程序 10 秒后出现通知。它将在 10 秒后过期。

（另外，也许你应该研究后台服务，因为这个特定的解决方案可能不是你想要的最好的......）

# node.js - 使用 Nodejs 和 Imagemagick 调整图像大小

> ID：11599357
> 
> 赞同：5
> 
> 时间：2012-07-22T10:06:26.477
> 
> 标签：node.js, mongodb, imagemagick

使用 nodejs 和 imagemagick 可以重新调整图像大小并将其发送到浏览器。

```
 var http = require('http'),
        spawn = require('child_process').spawn;

    http.createServer(function(req, res) {

        var image = 'test.jpg';
        var convert = spawn('convert', [image, '-resize', '100x100', '-']);

        convert.stdout.pipe(res);
        convert.stderr.pipe(process.stderr);

    }).listen(8080); 
```

测试图像是从文件系统中读取的，我想更改以便测试图像是二进制字符串。

```
var image = 'some long binray string representing an image.......'; 
```

我的计划是将二进制字符串存储在 Mongodb 中并动态读取它们。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T10:24:06.027

看看节点模块[node-imagemagick](https://github.com/rsms/node-imagemagick/)。模块页面上有以下示例，用于调整大小和图像并将其写入文件...

```
var fs = require('fs');
im.resize({
  srcData: fs.readFileSync('kittens.jpg', 'binary'),
  width:   256
}, function(err, stdout, stderr){
  if (err) throw err
  fs.writeFileSync('kittens-resized.jpg', stdout, 'binary');
  console.log('resized kittens.jpg to fit within 256x256px')
}); 
```

您可以更改此代码以执行以下操作...

```
var mime = require('mime')   // Get mime type based on file extension. use "npm install mime"
  , fs = require('fs')
  , util = require('util')
  , http = require('http')
  , im = require('imagemagick');

http.createServer(function (req, res) {
    var filePath = 'test.jpg';

    fs.stat(filePath, function (err, stat) {
        if (err) { throw err; }

        fs.readFile(filePath, 'binary', function (err, data) {
            if (err) { throw err; }

            im.resize({
                srcData: data,
                width: 256
            }, function (err, stdout, stderr) {
                if (err) { throw err; }

                res.writeHead(200, {
                    'Content-Type': mime.lookup(filePath),
                    'Content-Length': stat.size
                });

                var readStream = fs.createReadStream(filePath);

                return util.pump(readStream, res);
            });
        });
    });
}).listen(8080); 
```

附言。还没有运行上面的代码。很快就会尝试这样做，但它应该让您了解如何异步调整文件大小和流式传输文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T01:32:40.433

由于您使用`spawn()`的是调用 ImageMagick 命令行`convert`，因此通常的方法是将中间文件写入临时目录，它们将在使用后立即清理或作为计划/cron 作业进行清理。

如果您想避免写入要转换的文件，可以尝试的一种选择是对图像进行 base64 编码并使用[内联格式](http://www.imagemagick.org/Usage/files/#inline)。这类似于图像在某些 HTML 电子邮件或网页中的编码方式。

```
 inline:{base64_file|data:base64_data}
 Inline images let you read an image defined in a special base64 encoding. 
```

**注意：**您可以传递的命令行选项的大小是有限制的。Imagemagick 文档建议 5000 字节。Base64 编码的字符串比原始字符串大（维基百科建议粗略指南大[137%](http://en.wikipedia.org/wiki/Base64#MIME)），除非您显示缩略图，否则这可能非常有限。

另一个 ImageMagick 格式选项是[ephemeral](http://www.imagemagick.org/Usage/files/#ephemeral)：

```
 ephemeral:{image_file}
 Read and then Delete this image file. 
```

如果你想完全避免 I/O 传递，你需要一个直接集成像 ImageMagick 或 GD 这样的低级库的 Node.js 模块，而不是包装命令行工具。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T10:31:10.757

你试过什么了？您可以使用 GridFS 存储图像数据并从那里作为流检索.. 这在 C# 中..不确定这是否有帮助..

```
public static void UploadPhoto(string name)
{
    var server = MongoServer.Create("mongodb://localhost:27017");
    var database = server.GetDatabase("MyDB");
    string fileName = name;
    using (var fs = new FileStream(fileName, FileMode.Open))
    {
        var gridFsInfo = database.GridFS.Upload(fs, fileName);
        var fileId = gridFsInfo.Id;
        //ShowPhoto(filename);
    }
}

public static Stream ShowPhoto(string name)
{
    var server = MongoServer.Create("mongodb://localhost:27017");
    var database = server.GetDatabase("MyDB");
    var file = database.GridFS.FindOne(Query.EQ("filename",name));
    var stream = file.OpenRead())
    var bytes = new byte[stream.Length];
    stream.Read(bytes,0,(int)stream.Length);
    return stream;
} 
```

您现在可以使用 ShowPhoto 返回的流。

# javascript - 不调用来自 javascript 的 Objective-C 方法

> ID：11599361
> 
> 赞同：0
> 
> 时间：2012-07-22T10:06:51.937
> 
> 标签：javascript, iphone, cocoa-touch, uiwebview, uiwebviewdelegate

我有一个`UIWebView`包含带有 JS 功能的按钮，但委托方法仅在加载页面上调用，而不是在按下的按钮上，正如我所期望的那样。

问题是什么？

附言

我正在模拟器上测试。

在.h中：

```
@interface MyViewController : UIViewController <UIWebViewDelegate>{
    UIWebView *webView;
}
@property (strong, nonatomic) IBOutlet UIWebView *webView; 
```

以 .m 为单位：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    NSString *myHTML = @"<!DOCTYPE html><html><head><script type=\"text/javascript\">
    function myFunction(){document.location = \"myapp:\" + \"myfunction:\" 
    + param1 + \":\" + param2;}</script></head><body><button onclick=\
    "myFunction()\">Try it</button><p>By clicking the button above,
     a function will be called.</p></body></html>";

    [webView loadHTMLString:myHTML baseURL:nil];
    webView.delegate = self;
}

- (BOOL)webView:(UIWebView *)webView2 
shouldStartLoadWithRequest:(NSURLRequest *)request 
 navigationType:(UIWebViewNavigationType)navigationType {

    NSString *requestString = [[request URL] absoluteString];
    NSArray *components = [requestString componentsSeparatedByString:@":"];

    if ([components count] > 1 && 
        [(NSString *)[components objectAtIndex:0] isEqualToString:@"myapp"]) {
        if([(NSString *)[components objectAtIndex:1] isEqualToString:@"myfunction"]) 
        {

            NSLog([components objectAtIndex:2]); // param1
            NSLog([components objectAtIndex:3]); // param2
            // Call your method in Objective-C method using the above...
        }
        return NO;
    }

    return YES; // Return YES to make sure regular navigation works as expected.
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T10:30:39.557

以这种方式测试，对我有用

```
NSString *myHTML = @"<!DOCTYPE html><html><head>" "<script type='text/javascript'>function myFunction(){alert('ciao');document.location = 'myapp:myfunction:param1:param2';}
</script>"
"</head><body><button onclick='myFunction()'>Try it</button>" 
"<p>By clicking the button above,a function will be called.</p></body></html>"; 
```

你的错误应该如下

```
document.location = \"myapp:\" + \"myfunction:\" + param1 + \":\" + param2; 
```

你应该改写

```
document.location =\"myapp:myfunction:param1:param2\"; 
```

# ruby-on-rails - 预期的类/对象

> ID：11599364
> 
> 赞同：0
> 
> 时间：2012-07-22T10:07:36.353
> 
> 标签：ruby-on-rails, csv, controllers

我在我的控制器中的 index 操作下有这个：

```
format.csv do

    @coasters = Coaster.all
    render text: @coasters.to_csv

end 
```

但是当我运行它时，我得到： undefined method `to_csv' for # I just can;t see where I wrong?

to_csv 方法在这里：

```
def self.to_csv
    CSV.generate do |csv|
      csv << column_names
      all.each do |coaster|
        csv << coaster.attributes.values_at(*column_names)
      end
    end
  end 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T13:39:02.310

Your class method `to_csv` works on relations (scopes), so just write `@coasters = Coaster.scoped` instead `@coasters = Coaster.all`:

```
format.csv do

    @coasters = Coaster.scoped
    render text: @coasters.to_csv

end 
```

Explanation:

Your method `to_csv` is declared with `self.` so this is class method. This method can be executed only on `Coaster` **class**, not over object or array of objects:

```
 Coaster.to_csv  #good
 Coaster.find(1).to_csv #error - Coaster object: undefined method 'to_csv'
 Coaster.where('id>5').to_csv #good
 Coaster.where('id>5').all.to_csv #error - return array of objects
 Coaster.all.to_csv #error 
```

Last 3 lines are related with Rails 3 `ActiveRecord::Relation`: [link1](http://www.asciicasts.com/episodes/239-activerecord-relation-walkthrough), [link2](http://asciicasts.com/episodes/202-active-record-queries-in-rails-3). All class method can be executed on `ActiveRecord::Relation` object, but remember that `Coaster.all` returns array of objects, not relation.

`Coaster.scoped` returns ActiveRecord::Relation for all objects: [http://apidock.com/rails/ActiveRecord/Scoping/Named/ClassMethods/scoped](http://apidock.com/rails/ActiveRecord/Scoping/Named/ClassMethods/scoped)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T10:23:31.443

`Coaster.all`返回一个不是异常类的数组。所以，当你尝试提高它时，你会得到你所看到的错误

# jquery - 谷歌浏览器扩展 - 弹出页面未正确显示

> ID：11599365
> 
> 赞同：1
> 
> 时间：2012-07-22T10:08:05.493
> 
> 标签：jquery, google-chrome-extension

我正在努力创建一个 Google Chrome 扩展程序——在这个扩展程序中，有一个使用 Accordion 的弹出页面——通过 Jquery UI。

现在，我已经在 manifest.json 中正确定义了 popup.html 文件，并在 popup.html 文件中添加了 Jquery UI 的“start”主题的代码。

但是，当我单击工具栏上应该显示弹出窗口的按钮时，手风琴的所有部分都显示为打开状态——而手风琴根本没有显示——我只能看到各个部分的纯文本手风琴。

下面给出的是我的 manifest.json 的代码——

```
{
  "name": "Test",
  "version": "1.0",
  "manifest_version": 2,
 "content_scripts": [
     {
       "matches": ["<all_urls>"],
       "js": ["jquery-1.7.2-full.js", "basicjs.js"]
     }
  ],
  "description": "The first extension that I made.",
  "browser_action": {
    "default_icon": "icon.png",
    "default_popup":   "popup.html"
  } ,
  "permissions": [
      "http://*/", "https://*/"
  ],
  "background": {
      "scripts": ["background.js"]
  },
  "browser_action": {
      "default_icon": "images/anya_bl_32x32x32.png", // optional
      "default_title": "Test",      // optional; shown in tooltip
      "default_popup": "popup.html"        // optional
 }
} 
```

此外，下面给出的是我的 popup.html 文件的一部分代码——

```
<html>
<head>
<title> Anya Services Data Crawler Automated Data Retrieval App</title>
<style>
/*!
 * jQuery UI CSS Framework 1.8.21
 *  Below this is the entire code for the start theme's css file....
 .................................
</style>
<script type="text/javascript" src="jquery-1.7.2.min.js"></script>
  <script type="text/javascript" src="jquery-ui-1.8.21.custom.min.js"></script>
   <script>
        $(function() {
    $( "#accordion" ).accordion({
        collapsible: true
    });
});
</script>
 </head>

 <body>

<div id="accordion">
<h3><a href="#">Section 1</a></h3>
<div>
    <p>Mauris mauris ante, blandit et, ultrices a, suscipit eget, quam. Integer ut neque. Vivamus nisi metus, molestie vel, gravida in, condimentum sit amet, nunc. Nam a nibh. Donec suscipit eros. Nam mi. Proin viverra leo ut odio. Curabitur malesuada. Vestibulum a velit eu ante scelerisque vulputate.</p>
</div>
<h3><a href="#">Section 2</a></h3>
<div>
    <p>Sed non urna. Donec et ante. Phasellus eu ligula. Vestibulum sit amet purus. Vivamus hendrerit, dolor at aliquet laoreet, mauris turpis porttitor velit, faucibus interdum tellus libero ac justo. Vivamus non quam. In suscipit faucibus urna. </p>
</div>
<h3><a href="#">Section 3</a></h3>
<div>
    <p>Nam enim risus, molestie et, porta ac, aliquam ac, risus. Quisque lobortis. Phasellus pellentesque purus in massa. Aenean in pede. Phasellus ac libero ac tellus pellentesque semper. Sed ac felis. Sed commodo, magna quis lacinia ornare, quam ante aliquam nisi, eu iaculis leo purus venenatis dui. </p>
    <ul>
        <li>List item one</li>
        <li>List item two</li>
        <li>List item three</li>
    </ul>
</div>
<h3><a href="#">Section 4</a></h3>
<div>
    <p>Cras dictum. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Aenean lacinia mauris vel est. </p><p>Suspendisse eu nisl. Nullam ut libero. Integer dignissim consequat lectus. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. </p>
</div>
</div>

</body>
</html> 
```

我在这里做错了什么？如何解决此错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T10:16:48.697

[`"manifest_version": 2`](http://code.google.com/chrome/extensions/manifestVersion.html)指定时，将设置[默认的内容安全策略限制](http://code.google.com/chrome/extensions/contentSecurityPolicy.html#H2-0)。后果之一是不评估内联 JavaScript。

[无法](http://code.google.com/chrome/extensions/contentSecurityPolicy.html#H2-3)启用内联 Javascript。要使您的代码正常工作，请将其移至外部脚本文件，然后将其嵌入，如下所示：

```
<script src="popup.js"></script> 
```

`popup.js`：

```
$(function() {
    $("#accordion").accordion({
        collapsible: true
    });
}); 
```

# redirect - 重新路由网络流量。充当网关

> ID：11599368
> 
> 赞同：1
> 
> 时间：2012-07-22T10:08:28.750
> 
> 标签：redirect, routing, gateway

在酒店 WiFi 不受保护，每个人都可以连接。但无论请求的 url 是什么，您都会被重定向到他们的“Give a password”页面。

我有兴趣制作类似的东西，但我有点迷路了。我不知道从哪里开始。

这种事情所需的最低硬件是多少，我是否必须购买一个特殊的路由器来执行此操作，或者我可以简单地获得一台带有 Apache 或 IIS 的计算机并从那里管理流量？

**编辑：**

由于第二种情况更有可能是答案，我正在寻找一些关于从哪里开始的信息。

# xcode - Xcode build products 文件夹不会更改为 Unique

> ID：11599371
> 
> 赞同：1
> 
> 时间：2012-07-22T10:08:52.477
> 
> 标签：xcode, xcode4, xcode4.3

我不记得在我迁移到我的 Retina MacBook Pro 之前遇到过这个问题，但是自从这样做之后，我的项目一直坚持在“旧”开发位置加载。在过去的几年中，在 XCode 4 之前，我们将所有产品都放在`/Development/Products`. 而且，在迁移到新的 MacBook Pro 之后，他们又回到了那里。我可以使用 4.3 或更高版本并看到两者都存在相同的问题，所以我假设它是某种可配置的在这里工作。

当然，我做的第一件事是验证 Preferences/Locations 是否设置为 Build Location = Unique。我在 GUI 中确认了这一点，并通过打开 .plist 来检查它的值`IDEBuildLocationStyle`并将其设置为唯一。

我尝试删除我现有的配置文件（`~/Library/Preferences/`名为*Xcode*中的所有内容），并且成功地改变了将输出放在`build`项目本身目录中的行为（在我的世界中真的没有帮助，因为我有复杂的多项目工作区）。退出并检查设置，它们被设置为`IDEBuildLocationStyle`=`Unique.`

因此，我将工作配置从另一台机器复制到了这台机器上。由于它之前也有`/Development/Products`目的地，但随后被转移到独特的构建风格，我希望这能奏效。它没有。而是将输出返回到`/Development/Products`.

认为这可能与我的 Xcode 安装有关，我创建了一个新用户并从相同的源代码树构建（不是重复，不是副本，完全相同的文件）。在这种情况下，输出到正确的位置（该用户的派生产品的唯一子目录）。因此，我再次吹走`~/Preferences/*Xcode*`并复制了新用户的首选项。不幸的是，这使我们回到了与未初始化配置相同的行为，即在项目本身的构建目录中构建。

我恢复到我的备份配置文件，现在我又回到了工作`/Development/Products`，但这不是一个好的长期解决方案。

在检查测试脚本的脚本输出时，我可以清楚地看到有人在旧配置的情况下设置`SYMROOT`为，在默认配置文件的情况下。`/Development/Products``build`

很明显，这个系统上有些东西会影响配置，但我无法弄清楚它是什么。任何帮助将不胜感激！

另外 - 当我尝试使用 option-Clean 来启用 Clean Build Folder 时，它从未启用，这具有某种意义，但我认为它可能是另一个数据点。

[我在 Build Locations 下的 Xcode Build Products Path](https://stackoverflow.com/questions/5599587/strange-behavior-of-xcode-build-products-path-under-build-locations)的奇怪行为中尝试了解决方案，结果与删除首选项相同：将产品构建为项目目录的子项。

Has anyone else seen such a problem? Have you found a solution?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T18:53:24.173

Well, after a very long time of suffering through this on my laptop, I was finally able to track down the problem.

Inside of:

```
project.xcworkspace/xcuserdata/<user>.xcuserdatad/ 
```

there is a `WorkspaceSettings.xcsettings` file.

It contained a key `BuildLocationStyle`, which was set to `UseTargetSettings`.

Deleting the file and thus resetting this value allowed me to get both the `Clean Build Folder...` working and to get my project building correctly.

Hopefully this will help somebody else.

# php - PHP 代码在服务器上工作，但在 localhost 中引发错误

> ID：11599372
> 
> 赞同：0
> 
> 时间：2012-07-22T10:09:05.477
> 
> 标签：php

```
for($i=0;$cast_row = mysql_fetch_array($res);$i++)
{
    $cast['id'][] = $cast_row['user_id'];
    $cast['role'][] = $cast_row['role'];
    $cast['role_name'][] = $cast_row['role_name'];
    $cast['is_approved'][] = $cast_row['is_approved'];
    $cast['movie_id'][] = $cast_row['movie_id'];
}
for($i=0;$i<count($cast['id']);$i++) //LINE 31
{
    $output .= "<tr>";
    $mname = getMovieNameById($m_id);
    $output .= "<td><a href='single.php?id=$m_id'>$mname</a></td>";

    $aname = getArtistNameById($cast['id'][$i]);
    $output .= "<td><a href=project.php?id={$cast['id'][$i]}>$aname</a></td>";
} 
```

此代码在 Web 服务器中运行良好，但在 localhost 上执行时会引发错误（通知）

> 注意：未定义索引：第 31 行 C:\wamp\www\Tinyflick\managemovie.php 中的 id

可能是什么问题？其余的代码似乎工作得很好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T05:16:34.017

这是一个愚蠢的错误..它解决了。感谢nico的评论

localhost 中的错误报告级别与服务器上的不同。改变这一点就可以了。以下代码将显示所有错误和警告

```
error_reporting(E_ALL) 
```

生产服务器上通常禁用警告。有关更多信息，请参阅[所述功能的文档](http://php.net/manual/en/function.error-reporting.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T10:15:23.940

我猜mysql结果只是空的！:) 尝试转储您返回的行的内容。

顺便说一句，您可以通过执行以下操作来改进您的代码：

```
while($row = mysql_fetch_array($res)) { // iterates as long there is content
    //do something with the $row... like your second for block! ;)
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T10:16:24.733

事实证明这`$cast array`是空的，因为您没有正确地从数据库中获取数据。

如果在您的服务器中关闭了错误报告，那么您将不会看到任何错误。

而不是 for 循环使用 while 循环来遍历从数据库中获取的数据。

```
$cast = array();
while($row = mysql_fetch_array($res)) {
    $cast['id'][] = $row['user_id'];
    $cast['role'][] = $row['role'];
    $cast['role_name'][] = $row['role_name'];
    $cast['is_approved'][] = $row['is_approved'];
    $cast['movie_id'][] = $row['movie_id'];
} 
```

然后你可以运行 for 循环。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-22T14:58:02.923

我想如果你想抑制这些通知，请在循环之前添加以下行：

```
$cast = array('id'=>array(), 'role'=>array(), 'role_name'=>array(), 'is_approved'=>array(), 'movie_id'=>array() ); 
```

初始化变量。

# google-maps - 方向服务谷歌地图api v3后扩展边界

> ID：11599374
> 
> 赞同：1
> 
> 时间：2012-07-22T10:09:10.760
> 
> 标签：google-maps

我在地图中使用了标记和方向服务。

我使用 bounds.extend(lat),map.fitBounds(bounds); 来扩展地图以显示我的所有标记。在我使用方向服务之前，这一切正常。使用方向后，地图会自动缩放到从 A 到 B 的方向。现在地图中只能看到指向 A 和 B 的两个标记。

但我希望地图显示所有标记以及其他两个标记之间使用的方向。

我该怎么做？

```
Issue solved by using the following line
 var directionsDisplay = new google.maps.DirectionsRenderer({
            preserveViewport:true
        }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T10:54:40.363

如果您不希望方向渲染器缩放到其结果，请使用[preserveViewport](https://developers.google.com/maps/documentation/javascript/reference#DirectionsRendererOptions)选项。

另一种选择是使用方向服务返回的路线边界与您为标记计算的边界的并[集。](https://developers.google.com/maps/documentation/javascript/reference#LatLngBounds)

# opengl - DirectX 转换指南？

> ID：11599376
> 
> 赞同：0
> 
> 时间：2012-07-22T10:09:14.560
> 
> 标签：opengl, directx, upgrade

我目前想知道是否有任何类型的文档可以帮助我升级/切换到不同的 DirectX 版本或 OpenGL。

因为我有一个旧游戏（完整的源代码可用），我相信它使用 DirectX 7（或更旧），我想将它升级到更新的 DirectX 版本，最好是 8，但如果可能的话也可以升级到 9 或更高版本。

OpenGL 对我来说也是一个选择，但由于我不知道如何为 Windows 设置它以实际使用更高版本，我现在更喜欢 DirectX。

我正在寻找的是不同版本之间变化的指南，甚至更好的是，描述在新版本中必须使用多少旧功能（带有代码示例）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T15:47:51.453

升级到 DirectX 版本高达 9 应该不是什么大问题。DirectX 9 及更低版本完全向下兼容。事实上，大多数类和函数与升级后的版本号（`DirectX7`-> `DirectX8`）具有相同或相似的名称。您可以尝试通过交换引用的库并删除任何错误来升级应用程序。Direct2D 是 DirectX 7 的一部分，但它不是版本 8 和 9 的一部分。您可以使用`Sprite`该类来呈现 2D 内容。

升级到 >= 10 的版本有点复杂，因为基本原理已经发生了很大变化。您可以尝试使用相同的方法升级到 8/9，但是，这将是一个非常漫长的过程。此外，结果不会利用许多新功能，并且可能比 DirectX 7 版本慢。在这种情况下，最好从头重写整个应用程序。

如果您不确定从哪里开始，我会推荐基本的 DirectX 教程，这将使您开始行动。

# javascript - 命名空间我的主干模型

> ID：11599377
> 
> 赞同：1
> 
> 时间：2012-07-22T10:09:17.863
> 
> 标签：javascript, backbone.js

我目前这样设置我的模型：

```
var Contact = Backbone.Model.extend({
    defaults: {
        photo: "img/placeholder.png",
        name: "",
        address: "",
        tel: "",
        email: "",
        type: ""
    }
}); 
```

我的收藏是这样的：

```
var Directory = Backbone.Collection.extend({
    model: Contact
}); 
```

然后在我的主 app.js 文件中，我这样做是为了定义我的路线：

```
var AppRouter = Backbone.Router.extend({

    initialize:function () {
        $('#header').html(new HeaderView().render().el);
    },

    routes: {
        "filter/:type": "urlFilter"
    },

    urlFilter: function (type) {
        directory.filterType = type;
        directory.trigger("change:filterType");
    },

}); 
```

下面的代码出现错误，告诉我“目录”未定义。

```
 directory.filterType = type;
    directory.trigger("change:filterType"); 
```

在我看来，我像这样更新了这个系列，`this.collection = new Directory(contacts);`

我对骨干很陌生，我不确定我是否以正确的顺序做事，并且我的收藏在我尝试做我的 filterType 和 Trigger 时不存在，或者我是否完全拥有东西错误的。

我的代码可以在这里查看，[http://dan.ms/backbone](http://dan.ms/backbone)

任何指点都感激不尽。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T10:30:12.053

该`directory`变量似乎是在回调中创建的`tpl.loadTemplates`。该变量在路由器内部访问的范围内不可用。一种方法是作为参数传递`directory`给构造函数。`AppRouter`在`AppRouter`的构造函数中，将其保存为属性，并`urlFilter`通过当前实例在方法中访问它。

```
var AppRouter = Backbone.Router.extend({
  initialize: function (options) {
    this.directory = options.directory;
  },

  urlFilter: function (type) {
    this.directory.set("filterType", type);
  }
});

// Initialize with:
var directory = new DirectoryView;
var app = new AppRouter({ directory: directory });
Backbone.history.start(); 
```

# javascript - CoffeeScript - 传递带有参数的匿名函数

> ID：11599378
> 
> 赞同：0
> 
> 时间：2012-07-22T10:09:18.053
> 
> 标签：javascript, coffeescript

我不知道如何传递一个带参数的匿名函数。这是我的情况：

```
class MyClass
  constructor: (@a) ->
    console.log("MyClass: created " + @a)

  show: ->
    console.log("MyClass: show " + @a) 
```

然后，使用 UnderscoreJS，这有效：

```
_.map listOfMyClassObjects, (obj) -> obj.show 
```

但为了方便起见，我想将 map 调用包装在一个单独的函数中：

```
allMyClass(fun) ->
  _.map listOfMyClassObjects, fun(obj) 
```

以便以后我可以这样做：

```
allMyClass((obj) -> obj.show()) 
```

但浏览器控制台说：

```
Uncaught ReferenceError: fun is not defined
  (anonymous function)
  require../browser.CoffeeScript.run
  ... 
```

什么是正确的合成器？另外，可以这样简化吗？

```
 allMyClass(fun) ->
    _.map listOfMyClassObjects, obj[fun]()

 allMyClass(show()) 
```

**更新：**

根据 Thilo 的回答，函数调用中存在语法错误。而且，在 map 迭代结果上调用函数时出错。工作版本是这样的：

```
allMyClass = (fun) ->
  _.map listOfMyClassObjects, (obj) -> fun(obj) 
```

如果有将类方法传递给`allMyClass`函数的较短版本，仍然会徘徊。

**更新2：**

可以这样简化：

```
allMyClass = (fun) ->
  _.map listOfMyclassObjects, (obj) -> obj[fun]()

allMyClass("show") 
```

将参数传递给`fun`将需要传递更多的参数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T10:14:05.317

你的意思是定义一个函数

```
allMyClass = (fun) ->
   _.map listOfMyClassObjects, fun(obj) 
```

或方法

```
allMyClass : (fun) ->
   _.map listOfMyClassObjects, fun(obj) 
```

没有`=`or`:`你只是在打电话`allMyClass`。

# javascript - 如何防止按钮提交？

> ID：11599381
> 
> 赞同：0
> 
> 时间：2012-07-22T10:10:03.910
> 
> 标签：javascript, jquery

我是 jquery/javascript 的新手，所以也许我在这里走错了路。

我的表单中有一个按钮，它的工作只是进行一些 DOM 操作。当然不提交表格。

```
<button id="add_deals_button" class="btn btn-success"></button> 
```

在我的 js 文件中，我编写了以下内容：

```
$(document).ready(function () {  
  $("#add_deals_button").click(add_deals)
}); 
```

当我单击按钮时，它会进行 DOM 操作，但也会发送 POST，从而提交表单。如何防止按钮提交任何内容？

**更新：**

```
function add_deals(e){
    $('#hidden_deals').clone().attr({'class':'none'}).appendTo('#deal_status tbody')

} 
```

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T10:16:56.173

最简单的方法是将其添加到`button`标签中：

```
type="button" 
```

例如：

```
<button id="add_deals_button" type="button" class="btn btn-success"></button> 
```

默认情况下，[`type`元素`button`的 是`"submit"`](http://www.w3.org/TR/html5/the-button-element.html#attr-button-type)，它提交表单。但如果`type`is `"button"`，它只是一个按钮，而不是表单提交按钮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T10:16:15.253

根据您已绑定到单击以及您想要实现的目标，您可能会返回 false；

```
 $("#add_deals_button").click(function(e) {
      // do your actions
      add_deals();
      return false;
 }); 
```

这将在 jQuery 中与

```
 $("#add_deals_button").click(function(e) {
      // do your actions
      e.preventDefault();
     e.stopPropagation();          
 }); 
```

# ios - touchBegin 仅在有颜色时才被调用

> ID：11599385
> 
> 赞同：0
> 
> 时间：2012-07-22T10:11:02.857
> 
> 标签：ios

我有一个视图（MatrixView），没什么花哨的，只是继承自 UIView。仅当我设置颜色时才调用视图的 touchBegin？

```
MatrixView view = [[MatrixView alloc] initWithFrame:[self view]bounds];
// view.backgroundColor = [UIColor greenColor]; 
```

我听起来很奇怪？

# jquery - jquery lavaLamp 导航链接

> ID：11599389
> 
> 赞同：0
> 
> 时间：2012-07-22T10:11:56.173
> 
> 标签：jquery

有没有像这样的lavalamp jquery插件，除非单击菜单，否则背景元素不会跟随鼠标。我已经搜索了一段时间找不到一个，或者我的“关键字”错误。

我的代码运行良好，但只是想知道是否有任何选项可以做到这一点。

提前致谢。

JS

```
<script type="text/javascript">
        $(function() {

            $("#lavalamp").lavaLamp({
                fx: "easeinout",
                speed: 700,
             click: function(event, menuItem) {
                   return false;
                }
            });

        });

    </script> 
```

HTML

```
<ul id="lavalamp" class="nav">
<li><a href="#a">Menu1</a></li>  
<li><a href="#b">Menu2</a></li> 
<li><a href="#c">Menu3</a></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T11:21:36.337

菜单用于导航到特定 url，单击该链接将重定向到新页面，并且 lavalamp 动画将没有时间执行，否则将被破坏

# sql - Rails 中的 SQL 迁移时，updated_at 和 created_at 的默认值有问题吗？

> ID：11599400
> 
> 赞同：1
> 
> 时间：2012-07-22T10:13:41.653
> 
> 标签：sql, ruby-on-rails, postgresql, migration, default

我正在使用 SQL（即`execute`）在 Rails 3.2 中编写迁移，以在数据库级别强制执行应用程序逻辑（外键、默认值、检查、触发器）。原因是我想要一致的数据库交互，以防我需要使用来自不同应用程序（即不是 Rails）的相同数据库或直接大量导入数据。**除了一个模型**的默认值（见下文）之外，一切似乎都工作得很好。

例如`created_at`将包括`NOT NULL DEFAULT current_timestamp`. 如果我在数据库中创建一条记录，这一切都很好，但由于某种原因，schema.rb 没有检测到默认值，但正确地识别了`NOT NULL`约束。结果是我无法使用 Model.create 或 Model.new（例如`BibliographicItem.create(title: "Foo")`）将实例保存在数据库中，因为`created_at`最终违反了`updated_at`schema.rb中的约束。`nil``null: false`

schema.rb 中的违规表：

```
create_table "bibliographic_items", :id => false, :force => true do |t|
  t.string   "uuid",             :limit => nil, :null => false
  t.string   "title",            :limit => nil, :null => false
  t.integer  "publication_year"
  t.string   "type",             :limit => nil, :null => false
  t.text     "description"
  t.datetime "created_at",                      :null => false
  t.datetime "updated_at",                      :null => false
end 
```

其型号：

```
class BibliographicItem < ActiveRecord::Base
  include Extensions::UUID
  attr_accessible :title, :publication_year, :description

  has_many :authorships
  has_many :authors, through: :authorships, order: "role DESC, author_order DESC NULLS LAST"

  validates :title, presence: true, length: { maximum: 500 }

  validates :publication_year, numericality: { only_integer: true,
                               less_than_or_equal_to: Date.today.year() }
end 
```

语句中的表创建`execute`：

```
CREATE TABLE bibliographic_items (
uuid uuid DEFAULT uuid_generate_v4() PRIMARY KEY,
title varchar NOT NULL,
publication_year int CHECK (publication_year <= left(now()::text, 4)::int),
type varchar NOT NULL REFERENCES bibliographic_item_types ON UPDATE CASCADE ON DELETE RESTRICT,
description text,
created_at timestamp without time zone NOT NULL DEFAULT current_timestamp,
updated_at timestamp without time zone NOT NULL DEFAULT current_timestamp,
CHECK (updated_at >= created_at)
); 
```

为什么不为`.create`and`.new`赋值？对于我所有的其他模型，具有相似（但更简单的定义）没有问题。`created_at``updated_at`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T11:05:41.677

我发现我的问题的原因与 SQL 迁移、created_at 或 schema.rb**无关**`validates publication_year, numericality: { only_integer: true, less_than_or_equal_to: Date.today.year() }`，而是由于在 publication_year 为`nil`.

*刘海头撞墙。*

# php - 如何在 zend 框架视图中包含文件？

> ID：11599403
> 
> 赞同：2
> 
> 时间：2012-07-22T10:15:00.257
> 
> 标签：php, zend-framework

我是zend框架的新手。

我想知道如何在**zend 框架视图**中包含文件。

我正在使用**index.phtml**在 zend 框架中显示数据。

**index.phtml**包含一些 php 页面，例如：

```
require_once ('/_incl/functions.php');
include('../functions.php'); 
```

现在我想知道我把这些文件放在哪里并调用**index.phtml**页面。

我可以做些什么来包含这些文件，这意味着保存所有这些文件的正确位置在哪里，并从**index.phtml**页面调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T09:42:03.887

我有简单的方法在 zend 视图页面中包含文件。

只需在公用文件夹中创建一个名为“include”的文件夹并存储您要包含的文件。

之后，在要包含该文件的页面上方写入以下行。

```
**include_once "./<include folder name>/<include file name>.php";** 
```

谢谢......p2c

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T10:32:55.410

我完全理解成为新手的感觉。不，您不包含任何内容。如果您想发生某些事情但在 zend 中没有选择，您可以创建自己的库并相应地构造类名。例如： Zend_Form_Element 是 Zend / Form / Element.php 的一个类

你要做的是，制作一个类文件，然后编译它。

要开始使用，我建议您阅读 tutsplus 上的本教程。

[http://net.tutsplus.com/tutorials/php/zend-framework-from-scratch/](http://net.tutsplus.com/tutorials/php/zend-framework-from-scratch/)

因此，制作一个控制器，制作视图，从控制器传递值，然后在视图中回显它。

尝试遵循规则手册，而不是用传统方法编写代码。:)

希望你学得更快:)

# android - 在 Android 服务中使用 NotificationManager

> ID：11599406
> 
> 赞同：2
> 
> 时间：2012-07-22T10:15:17.230
> 
> 标签：android, service, notificationmanager

我有一个在后台运行的服务，如果有新数据，我想通知用户，我使用了一个通知管理器，并且通知出现了，但是当点击它时它什么也没做（它应该显示我是 android 新手的一项活动，这是我的代码

```
NotificationManager notificationmanager = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
Notification notification = newNotification(R.drawable.shoppingcarticon, "Nouvelle notification de ShopAlert", System.currentTimeMillis());
notification.defaults |= Notification.DEFAULT_VIBRATE;
notification.flags |= Notification.FLAG_AUTO_CANCEL;

Intent intent = new Intent(this,GooglemapActivity.class);
PendingIntent activity = PendingIntent.getService(this, 0, intent, 0);

notification.setLatestEventInfo(this, "This is the title", "This is the text", activity);
notification.number += 1;
notificationmanager.notify(0, notification); 
```

您的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T10:28:49.230

您可以使用此代码。将 Main.Class 更改为您的活动类，并根据需要更改标题和内容文本。

```
String ns = Context.NOTIFICATION_SERVICE;
NotificationManager mNotificationManager = (NotificationManager) getSystemService(ns);

int icon = R.drawable.ic_action_search;
CharSequence tickerText = "Pet Parrot";
long when = System.currentTimeMillis();

Notification notification = new Notification(icon, tickerText, when);
notification.flags |= Notification.FLAG_AUTO_CANCEL;
Context context = getApplicationContext();
CharSequence contentTitle = "Hungry!";
CharSequence contentText = "your parrot food meter is: ";
Intent notificationIntent = new Intent(context, Main.class);
PendingIntent contentIntent = PendingIntent.getActivity(context, 0, notificationIntent, 0);

notification.setLatestEventInfo(context, contentTitle, contentText, contentIntent);

mNotificationManager.notify(1, notification); // Log.d("test", "Saving Data to File from Service."); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-22T10:20:41.047

以下行：

```
PendingIntent activity = PendingIntent.getService(this, 0, intent, 0); 
```

应该是这样的：

```
PendingIntent activity = PendingIntent.getActivity(this, 0, intent, 0); 
```

因为你试图开始一个`Activity`，而不是一个`Service`。希望这可以帮助。

# php - 在 preg_replace 中执行 PHP 命令

> ID：11599410
> 
> 赞同：0
> 
> 时间：2012-07-22T10:15:24.720
> 
> 标签：php, preg-replace

`strtolower()`是否可以通过例如执行 php 命令`preg_replace()`？

我只想用小写字母制作数组的一部分，而将另一部分变成大写字母。问题是字母是动态变化的，不是固定的，只有一个词保持不变，其余的则不然。

例如
arraypart1 (应该保持大写) (constantword)+arraypart2 (都应该变成小写字母)

arraypart2 也改变了字符数的大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T17:22:57.483

不是 100% 清楚你想要做什么，但我认为它是以下内容：从字符串中提取单词，并根据它们在数组之一中的存在情况提取其中一些单词。`preg_replace_callback`会帮助你。

PHP 5.3 及更高版本：

```
$initial = "Mary had a little lamb";
$toupper = array("Mary", "lamb");
$tolower = array("had", "any");
$out = preg_replace_callback(
   "/\b(?P<word>\w+)\b/", // for every found word 
   function($matches) use ($toupper, $tolower) { // call this function 
      if (in_array($toupper, $matches['word'])) // is this word in toupper array?
          return strtoupper($matches['word']);

      if (in_array($tolower, $matches['word'])) // is this word in tolower array?
          return strtolower($matches['word']);

      // ... any other logic
      return $matches['word']; // if nothing was returned before, return original word
   },
   $initial);
print $out; // "MARY had a little LAMB" 
```

如果您有其他需要考虑的数组，请将它们放在`use`语句中，以便它们在匿名函数中可用。

PHP >= 4.0.5：

```
$initial = "Mary had a little lamb";
$toupper = array("Mary", "lamb");
$tolower = array("had", "any");

function replace_callback($matches) {  
   global $tolower, $toupper;
      if (in_array($toupper, $matches['word'])) // is this word in toupper array?
          return strtoupper($matches['word']);

      if (in_array($tolower, $matches['word'])) // is this word in tolower array?
          return strtolower($matches['word']);

      // ... any other logic
      return $matches['word']; // if nothing was returned before, return original word
   }

$out = preg_replace_callback(
   "/\b(?P<word>\w+)\b/", // for every found word 
   'replace_callback', // call this function
   $initial);
print $out; // "MARY had a little LAMB" 
```

如您所见，没有什么显着变化，我只是用一个命名函数替换了匿名函数。要为它提供其他字符串数组，请使用`global`关键字引用它们。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-22T10:26:49.697

我希望我理解正确，`preg_replace`是一个函数，就像你可以做的所有其他函数一样：

```
preg_replace(strtolower($val),$pattern,$someString); 
```

`preg_replace`将使用小写版本的`$val`

# facebook - start_time 与事件的开始时间不对应

> ID：11599411
> 
> 赞同：0
> 
> 时间：2012-07-22T10:15:27.233
> 
> 标签：facebook, facebook-graph-api, facebook-fql

我在 TZ Paris (GMT +1)，我使用 PHP 获取一些事件。

首先，我将默认 TZ 设置为洛杉矶： date_default_timezone_set('America/Los_Angeles');

一切正常，我得到了正确的日期/时间。

除了一个事件：[https ://www.facebook.com/events/115566628587479/](https://www.facebook.com/events/115566628587479/)

活动时间：17:00 – 20:00 (UTC-04)

当我使用 FQL 获取事件时，会返回一个 start_time 时间戳：1343023200，即星期一，2012 年 7 月 23 日 06:00:00 PST -> 通过 date_default_timezone_set 函数转换为 2012-07-22 23:00:00。

这与事件的日期/时间不对应。

知道我要去哪里错了吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T13:57:49.487

> 首先，我将默认 TZ 设置为洛杉矶： date_default_timezone_set('America/Los_Angeles');

好吧，这就是你的错误——因为当你[使用 Graph API explorer 查找事件时](https://developers.facebook.com/tools/explorer?method=GET&path=115566628587479)，你会看到帽子设置了不同的时区：

> “时区”：“美国/蒙特利尔”

# api - 在 Google 电子表格 API 上获取合并的单元格宽度

> ID：11599412
> 
> 赞同：2
> 
> 时间：2012-07-22T10:15:46.423
> 
> 标签：api, cell, spreadsheet

我正在使用 Google 电子表格 API 将包含工人轮班的文档转换为事件日历。唯一的问题是班次由合并的单元格根据天数和小时数表示（天数和小时数作为行，不同的工作槽作为列），当我读取某个合并并跨越 6 个单元格的单元格时，我不能获取单元格的特定宽度或其合并区域。

例如： [![一只忙碌的猫](../Images/fcbc157256f8c4bb385c85df063ff76f.png)](https://i.stack.imgur.com/D50uP.png)

如果我尝试获取 (4C:4E) 之间的值，我将得到“Bob, , ”而不是“bob,bob,bob”，我什至无法找到知道“bob”占用多少个单元格的方法。

你们知道我怎么知道合并的一个扩散到多少个单元格？或者至少是总宽度。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T00:53:11.600

从谷歌驱动器下载为 html，请参阅： [从谷歌电子表格中获取字体样式信息到 appengine](https://stackoverflow.com/questions/14095919/get-fontstyle-information-from-google-spreadsheet-into-appengine)

```
 Drive driveService = new Drive.Builder(TRANSPORT, JSON_FACTORY, credential).build();
    File file = driveService.files().get(this.spreadsheetKey).execute();
    String downloadUrl = file.getExportLinks().get("application/pdf");
    downloadUrl = downloadUrl.replaceFirst("exportFormat=pdf", "exportFormat=html");
    downloadUrl = appendWorksheetGid(downloadUrl); // adds "&gid="+sheetGid
    HttpResponse resp =
            driveService.getRequestFactory().buildGetRequest(new GenericUrl(downloadUrl))
                .execute();
    System.out.println("downloadUrl:"+downloadUrl);

    InputStream fileContent = resp.getContent();
    extractStyleFromHtml(fileContent,downloadUrl); 
```

extractStyleFromHtml 使用 Jsoup -（Jsoup 让我印象深刻）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-27T13:54:30.940

这是不可能通过电子表格 API 实现的。我一直在寻找相同的。[谷歌在他们的文档](https://developers.google.com/google-apps/spreadsheets/#working_with_cell-based_feeds)中也承认了这 一点。

> 单元格元素的字面值是单元格的计算值，未应用格式。如果单元格包含公式，则在此处给出计算值。电子表格 API 没有格式的概念，因此无法操作单元格的格式。

相关问题： [使用其 API 和 Python 在 Google 表格电子表格中设置单元格格式](https://stackoverflow.com/questions/2798514/set-cell-format-in-google-spreadsheet-using-python-api)

另一种方法是以编程方式下载 excel 格式的文档。它将包含格式信息。然后使用 excel API 提取信息。

# javascript - 如何在鼠标单击时展开特定的 div 元素？

> ID：11599413
> 
> 赞同：0
> 
> 时间：2012-07-22T10:15:57.207
> 
> 标签：javascript, css, jquery

例如，在 twitter 中，我们在单个推文上单击展开，然后它只是展开提供指向单个推文的链接或显示图像或视频以及时间戳。然后在下一次单击时它只是隐藏扩展的数据。

还如何在鼠标悬停在 div 上而不是鼠标箭头时显示鼠标手。就像在推特上一样。

我希望使用 jQuery 是可能的。有人可以给我一个示例代码来实现这一点。??

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T11:01:24.843

为了扩展额外的部分，您将需要两个 div。一个将具有您要显示的默认信息。第二个将包含您要扩展和显示的内容。然后你使用类似的东西：

```
$('#expand_button').click(function(){
     $('#second_div').slideToggle();
}); 
```

对于光标：[http](http://www.w3schools.com/cssref/pr_class_cursor.asp) ://www.w3schools.com/cssref/pr_class_cursor.asp 使用类似：

```
div { cursor: arrow; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T10:20:36.793

你会想要：

```
$('.button').click(function(){
     $('div').slideToggle();
}); 
```

确保隐藏`$('div')`选择器

# php - PHP/SQL - 密码和电子邮件安全（理论）

> ID：11599414
> 
> 赞同：-2
> 
> 时间：2012-07-22T10:15:59.913
> 
> 标签：php, sql, security, email, passwords

> **可能重复：**
> [在 PHP 中编码密码的最佳方法](https://stackoverflow.com/questions/1391613/best-way-to-encode-passwords-in-php)

我一直在阅读很多关于密码和电子邮件哈希的内容，但我不确定我是否知道什么是最好的方法。很明显，md5 和 SHA 已经过时并且毫无用处，但是当涉及到所有 crypt 时，mcrypt_encrypt、hash() 等：

*   哪一种是当今保护密码和电子邮件的有效方法？；（也许是最好的方法？）
*   我可以对两者使用相同的方法吗？

如果有人能给我一些建议，我真的很感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T10:25:26.617

看看这个博客。它是关于密码散列的***好***信息。

[http://blog.ircmaxell.com/search/label/Password-Hashing](http://blog.ircmaxell.com/search/label/Password-Hashing)

作者还有一个密码哈希库，它只使用经过审查的高质量算法。

除了那条注释之外，您应该使用 bcrypt 或 PBKDF2 进行密码散列。

至于电子邮件加密，PGP/GPG 是交叉兼容/支持的电子邮件加密的最佳选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T10:30:08.870

你应该阅读这个问题[Secure hash and salt for PHP passwords](https://stackoverflow.com/questions/401656/secure-hash-and-salt-for-php-passwords)和这个[How do you use bcrypt for hashing passwords in PHP?](https://stackoverflow.com/questions/4795385/how-do-you-use-bcrypt-for-hashing-passwords-in-php) .

这两个问题都有 170 多个赞成票。

# java - 在 Google App Engine 上安排备份

> ID：11599418
> 
> 赞同：1
> 
> 时间：2012-07-22T10:16:36.037
> 
> 标签：java, xml, google-app-engine

我正在尝试使用 GAE 的计划备份机制，但不断收到错误消息，而不是 cron.xml 有语法错误。使用 Google 的示例会出现相同的错误消息。

我正在使用 SDK 1.7.0

## 一、cron.xml文件

```
<?xml version="1.0" encoding="UTF-8"?>
<cronentries>
  <cron>
    <url>/_ah/datastore_admin/backup.create?name=BackupToCloud&kind=LogTitle&kind=EventLog&filesystem=gs&gs_bucket_name=whitsend</url>
    <description>My Daily Backup</description>
    <schedule>every 12 hours</schedule>
    <target>ah-builtin-python-bundle</target>
  </cron>
</cronentries> 
```

## 二、cron.xsd（默认提供的那个）

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="cronentries" type="cronentries-Type"/>

  <xs:complexType name="cronentries-Type">
    <xs:sequence>
      <xs:element type="cron-Type" name="cron" maxOccurs="unbounded" minOccurs="0"/>
    </xs:sequence>
  </xs:complexType>

  <xs:complexType name="cron-Type">
    <xs:all>
      <xs:element type="xs:string" name="url"/>
      <xs:element type="xs:string" name="description" minOccurs="0"/>
      <xs:element type="xs:string" name="schedule"/>
      <xs:element type="xs:string" name="timezone" minOccurs="0"/>
      <xs:element type="target-Type" name="target" minOccurs="0"/>
    </xs:all>
  </xs:complexType>

  <xs:simpleType name="target-Type">
    <xs:restriction base="xs:string">
      <xs:pattern value="[a-z\d\-]{1,100}"/>
    </xs:restriction>
  </xs:simpleType>

</xs:schema> 
```

## 三、错误信息

“对实体“种类”的引用必须以 ';' 结尾 分隔符。” 使用在线 xml 验证器检查 xml 有效性时，我收到相同的错误消息。

==> 有人遇到过同样的问题吗？如果是，你是怎么解决的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T10:21:29.900

尝试使用`&amp;`read 转义 & ：将 url 元素中的 & 替换为`&amp;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T17:43:51.870

我们 (Streak.com) 开源了一个工具，它可以自动备份以及将日志和数据存储数据自动推送到 bigquery 中。项目在这里：[https ://github.com/StreakYC/mache](https://github.com/StreakYC/mache)

# java - 如何从用户输入字符串中获取日期、月份和年份，例如 25/03/2012

> ID：11599422
> 
> 赞同：1
> 
> 时间：2012-07-22T10:16:55.860
> 
> 标签：java, string, date

我正在努力将表示日期的字符串分解为单个元素日期、月份、年份。目前我有一个用户输入日期作为字符串。`scan.nextLine()`

我希望能够将日期分解为各个元素，因为我想假设年份是 2012 年，并且我希望他们只输入日期和月份 23/03，因为我不希望他们输入不同的年份。

我试过在用户输入的日期和月份字符串中添加一个`String year = "2012";` 然后添加`year`，但我的程序仍然输出用户输入的日期和月份，然后是 1970：S

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T10:28:09.110

如果您知道字符串的格式，则可以使用`SimpleDateFormat`，这将为您提供 Date 值 schaub，然后您可以使用它来提取所需的值。

```
SimpleDateFormat sdf = new SimpleDateFormat("dd/MM/yyyy");
Date date = sdf.parse(value); 
```

# java - 优先级队列的预期操作时间

> ID：11599430
> 
> 赞同：-3
> 
> 时间：2012-07-22T10:17:23.540
> 
> 标签：java

只需要知道，优先级队列的预期运行时间是多少

O(n) O(lg n) 或 O(2) 或 O(1) 或 O(3)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T10:20:04.343

然后阅读[文档](http://docs.oracle.com/javase/6/docs/api/java/util/PriorityQueue.html)：

> 实现说明：此实现为入队和出队方法（offer、poll、remove() 和 add）提供 O(log(n)) 时间；remove(Object) 和 contains(Object) 方法的线性时间；检索方法（peek、元素和大小）的恒定时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-04T23:16:31.803

PriorityQueue 有以下主要方法：

*   add(e)/offer(e) - 将元素 e 添加到队列中：O(log(n))
*   peek() - 获取排序队列的第一个元素：O(1)
*   pool() - 获取排序队列的第一个元素并将其从队列中删除：O(log(n))
*   remove(e) - 从列表中删除元素 e O(log(n))
*   contains - 检查队列是否包含元素 e：O(n)

其中 n 表示队列中元素的数量。

# java - 在 Netbeans 中添加来自 Maven 库的源代码

> ID：11599435
> 
> 赞同：4
> 
> 时间：2012-07-22T10:18:10.690
> 
> 标签：java, maven, netbeans

我一直在我的 Maven 项目中使用 Ebay SDK，但遇到了一个问题，现在我需要在我的项目中包含 Ebay SDK 源，以便我可以看到库中发生了什么。我已将源库作为 Maven 依赖项包含在内，但在调试时我仍然无法进入库。

有人对我能做什么有任何想法吗？

爱

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T13:11:32.313

在 Netbeans 中，在 Projects 窗口中，您的项目/依赖项节点，右键单击所需的库节点；你有“下载来源”的选择。去做。

您可以在调试期间查看这些来源并进入。

# c# - 为什么 WebBrowser.Document.DomDocument 不包含实际的 DOM 模型？

> ID：11599436
> 
> 赞同：3
> 
> 时间：2012-07-22T10:18:28.620
> 
> 标签：c#, webbrowser-control

我使用 WebBrowser.Document.DomDocument 并发现它具有不同的 DOM 模型，我可以在 IE 调试工具中看到。

IE 调试工具包含有效的实际 DOM 模型，而 WebBrowser.Document.DomDocument 不包含一些由 JavaScript 动态添加的元素。

实际上，WebBrowser 控件显示所有元素，即使是动态添加的元素，但 WebBrowser.Document.DomDocument 包含过时的 DOM 模型。

IE Debug Tool 可以在当前状态下显示实际修改后的 DOM 模型，如何使用 WebBrowser 组件获取当前的 DOM 模型？

绝对应该有办法做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T15:23:55.780

这个问题可以使用更好的文档。但这是一个非常经典的问题，它是一个时间问题。*毫无疑问，您过早*地访问 DomDocument 属性，通常您会在浏览器的 DocumentCompleted 事件中这样做。这大约是 javascript 代码*开始*执行的时间。因此，您将获得脚本进行更改之前的 DOM 版本。

没有体面的方法来处理这个问题。Javascript 的执行是完全异步的，没有任何事件表明任何脚本代码开始或停止运行。您可以做的唯一体面的事情是“等一下”，使用计时器。最好反复进行，直到您从 DOM 中看到脚本已完成更改的良好指示。

# android - 样式化自定义 ListView

> ID：11599438
> 
> 赞同：1
> 
> 时间：2012-07-22T10:18:58.127
> 
> 标签：android, android-listview

我通过包含 ImageView 和 TextView 并使用 LayoutInflater 的 xml 文件创建了类似于列表视图的内容。

似乎我以一种非常不正统的方式完成了这项工作，因为我无法弄清楚如何实际设置列表视图的样式（理想情况下，我想定义大小，因为还有其他内容要放在同一界面上）

我已经尝试自己设置LinearLayout的样式，并将LinearLayout放在父LinearLayout中，包括在名为'list'的所述文件中的ListView，尝试在扩展ListActivity的类中定义setContentView。

我希望能够像任何其他控件一样将自定义列表视图控件包含到 LinearLayout 中，而不是控件是整个 UI。

```
public class ImageActivity extends ArrayAdapter<PlaceStore> {

    private final Context context;
    private final List<PlaceStore> places;

    public ImageActivity(Context context, List<PlaceStore> places) {
        super(context, R.layout.image_text_row, places);
        this.context = context;
        this.places = places;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        LayoutInflater inflater = (LayoutInflater) context
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        View rowView = inflater.inflate(R.layout.image_text_row, parent, false);

        TextView textView = (TextView) rowView.findViewById(R.id.label);
        ImageView imageView = (ImageView) rowView.findViewById(R.id.logo);
        textView.setText(places.get(position).getName());

        return rowView;
    }

public class FavouriteActivity extends ListActivity{

    public void onCreate(Bundle savedInstanceState) {

         super.onCreate(savedInstanceState);

         setContentView(R.layout.favourite);

         FavouriteData data = new FavouriteData(this);

         List<PlaceStore> pS = data.returnFileData();

         setListAdapter(new ImageActivity(this, pS));

    } 
```

R.layout.image_text_row

```
<?xml version="1.0" encoding="utf-8"?>    
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="5dp" android:background="@drawable/background_type" >

    <ImageView
        android:id="@+id/logo"
        android:layout_width="50dp"
        android:layout_height="50dp"
        android:layout_marginLeft="5dp"
        android:layout_marginRight="20dp"
        android:layout_marginTop="5dp"
        android:src="@drawable/androidmarker" >
    </ImageView>

    <TextView
        android:id="@+id/label"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@+id/label"
        android:textSize="20sp" >
    </TextView>

    </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T10:55:04.400

*这是一个非常好的教程，确切地说是您正在寻找的*

[**使用自定义 ArrayAdapter 自定义 Android ListView 项**](http://www.ezzylearning.com/tutorial.aspx?tid=1763429)

上述教程的输出将与此类似。

![Android 自定义列表视图](../Images/ec57301c209de386fc34ad04654516b5.png)

这肯定会帮助您完成工作。

谢谢 ：）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T10:25:45.720

试试下面的教程，它将帮助您满足您的要求

[自定义 ListView](http://www.ezzylearning.com/tutorial.aspx?tid=1763429)和[这个](http://android-er.blogspot.co.uk/2010/06/custom-arrayadapter-with-with-different.html)

视频 - [youtubeVideo](http://www.youtube.com/watch?v=LjAlNfa6obU)

希望能帮助到你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T10:32:54.220

我认为您不需要 ListActivity。我建议你这个教程：

[列表视图和缓存视图](http://www.framentos.com/en/android-tutorial/2012/07/16/listview-in-android-using-custom-listadapter-and-viewcache/)

# scorm - 目标全局到系统

> ID：11599441
> 
> 赞同：1
> 
> 时间：2012-07-22T10:19:21.320
> 
> 标签：scorm, scorm2004

我有一个关于*组织*元素的***全局目标系统***属性的问题。“系统全局目标”是什么意思？它的用途是什么？

 ** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T23:17:38.873

`Objectives Global to System`，默认设置为 true，表示所有全局目标都可用于同一学习者为某次尝试所修读的所有课程。假设您在课程 A 中将“OBJ_1”的客观满足状态设置为 true，如果该学习者在同一 LMS 中学习课程 B，则该值将可供该学习者使用。*

# java - Java 在 Linux 和 Windows 中是否相同？

> ID：11599442
> 
> 赞同：-1
> 
> 时间：2012-07-22T10:19:30.397
> 
> 标签：java, cross-platform

> **可能重复：**
> [哪些问题阻止 Java 应用程序在多个平台上运行？](https://stackoverflow.com/questions/453538/what-issues-prevent-java-applications-from-working-on-multiple-platforms)

我开始学习 Java，我正在研究 Linux (Ubuntu) 上的 Java 和 Windows 上的 Java 之间是否存在显着差异？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T10:23:17.597

> 一次编写，到处运行

这是Java的哲学。不同平台上唯一不同的是 JVM，它将 Java 字节码转换为实际的机器码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T10:23:42.150

Java 语言规范在任何地方都是相同的。不同的是特定于平台的 JVM 实现。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-22T10:21:16.947

Java 到处都是一样的：**JVM**。

阅读[本文](https://stackoverflow.com/questions/2748910/how-is-java-platform-independent-when-it-needs-jvm-to-run)，可能会有所帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-22T10:28:59.157

这取决于您使用的虚拟机。取决于它，有些事情可能会有所不同——例如布尔值的大小取决于 VM。如果您在 linux 和 windows 中使用相同的 VM，那么没有什么不同。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-22T11:21:15.460

**1.**众所周知`"WORA"` **（Write Once Run Anywhere）**。

**2.**如果您在 Window 和 Linux 上使用，则几乎没有**明显的差异，因为** **AWT 将使用**底层平台的 Peer Components 来获得外观和感觉。`AWT`

# java - Java DSL配置的Apache Camel OSGi容器？

> ID：11599443
> 
> 赞同：0
> 
> 时间：2012-07-22T10:19:47.417
> 
> 标签：java, osgi, apache-camel

我需要将 Apache-camel 应用程序与 OSGi 容器集成。这对我很有帮助，因为这种集成可以通过 Java DSL 进行配置。

到目前为止，我已将 Apache Karaf 测试为最合适的解决方案，因为它与我的实现所需的一样轻巧。

然而，我正在寻找一个相关的 OSGi 服务器，它可以像 Karaf 一样完美地与 Apache-Camel 集成。

干杯!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T10:35:59.743

我们一直在使用 servicemix esb——它看起来非常轻量级，因为它基本上是 karaf，它将骆驼应用程序部署为 osgi 包。

我打算采用的方法是创建一个 spring 应用程序上下文并创建骆驼上下文并在其中引用 java dsl 路由构建器。[当您部署模块时，它会查找 spring 上下文并像这样](http://servicemix.apache.org/32-using-the-camel-java-dsl-for-the-first-time.html)自动启动它。

# qt - openGL - 我希望相机更接近物体，如何？

> ID：11599444
> 
> 赞同：1
> 
> 时间：2012-07-22T10:19:55.747
> 
> 标签：qt, opengl, graphics, 3d, camera

我使用与 gluLookAt 等效的 Qt 来设置我的视图矩阵，我一直在通过在场景中的任何地方平移它来移动它。现在我想用相机靠近一个物体。

我知道对象的位置，包括对象坐标和相互坐标（我有该对象的模型矩阵），但是如何获得相机的位置？

为了让相机越来越接近物体，我想我应该采取两点：

*   物体所在的点
*   相机所在的位置

然后做类似的事情

```
QVector3D direction_to_get_closer = point_where_object_is - point_where_camera_is 
```

我如何获得相机所在的位置？或者，如果不需要，我如何将矢量指向相机必须遵循的方向（没有旋转，我只需要平移，这将简化事情）以到达对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T12:14:06.160

gluLookAt(eye, target, headUp) 采用三个参数，相机/眼睛的位置，您要查看的对象的位置，以及控制滚动/抬头方向的单位向量。

要放大更近，您可以将眼睛/相机位置移动矢量 direction_to_get_closer 的一部分。例如，

```
point_where_camera_is += 0.1f * direction_to_get_closer; // move 10% closer 
```

以恒定的量而不是当前距离的 10% 移动更有用（否则当距离很大时你会移动得非常快，然后会越来越慢）。因此，您应该使用归一化方向：

```
 QVector3D unitDir = direction_to_get_closer.normalized();
 point_where_camera_is += 0.1f * unitDir; // move 0.1 units in direction 
```

如果 point_where_camera_is 等于 point_where_object_is，相机变换将中断。

更好的方法是，如果您不需要缩放，平移/旋转新的“缩放”point_where_camera_is 是在 to 位置之间进行插值。

```
float t = some user input value between 0 and 1 (0% to 100% of the line camToObj)
QVector3D point_on_line_cam_obj = t * point_where_camera_is + (1-t) * point_where_object_is; 
```

这样，您可以通过限制 t 来阻止用户放大对象，也可以在 t=0 时回到起始位置；

# sql - cakephp关系模型

> ID：11599449
> 
> 赞同：0
> 
> 时间：2012-07-22T10:20:50.823
> 
> 标签：sql, cakephp, cakephp-model

我有一个用 CakePHP 2.0 开发的网站。我有一个包含许多表的数据库，我想关联两个表。我已经这样做了很多次，但是有两张桌子我不能这样做，我不知道为什么。这是我的两张桌子：

成分别名：

```
id             INT(10) UNSIGNED AUTO_INCREMENT 
ingredient_id  INT(10)          
user_id        INT(10)          
alias          VARCHAR(100) latin1_swedish_ci 
```

活动成分

```
id             INT(10) UNSIGNED     
activity_id    INT(11)      
ingredient_id  INT(10)          
created        DATETIME 
```

成分 ID 是我的外键，这是我的模型，我想制作`ingredient_id`我的外键。

```
class ActivityIngredients extends AppModel{
        public $name = 'ActivityIngredients'; 
        public $useTable = 'activity_ingredients';

        public $belongsTo = array(
            'IngredientAlias' => array(
                'className'     => 'IngredientAlias',
                'conditions'    => '',
                'order'         => '',
                'foreignKey'    => 'ingredient_id'
            )
        );

    }

class IngredientAlias extends AppModel {
    public $name = 'IngredientAlias';
    public $useTable = 'ingredient_aliases';
    public $belongsTo = array(
        'Ingredient' => array(
            'className'    => 'Ingredient',
            'foreignKey'   => 'ingredient_id'
        ),
         'User' => array(
            'className'    => 'User',
            'foreignKey'   => 'user_id'
        )
    );

    public $hasMany = array (
        'ActivityIngredients' => array (
            'className'     => 'ActivityIngredients',
            'dependent' => true,
            'foreignKey'   => false,
            'associatedKey'   => 'ingredient_id'            
        )
    ); 
```

当我在其中创建变量的 var_dump 时，`IngredientAlias`什么都没有，是空的，就像它不使用外键一样。为什么？问题出在关系上？我试着写

```
'foreignKey'   => 'ingredient_id' 
```

但没什么..一样

该查询是一个带有 3 个递归的简单查询，我认为全选不是问题，而是与表的关系..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T10:53:10.843

hasMany/belongsTo 关系不是这样运作的。

您当前的代码描述了一种关系，其中：

*   `ActiveIngredient` *属于* `IngredientAlias`
*   `IngredientAlias` *有很多* `ActiveIngredient`

这是从到**的一对多**关系。`IngredientAlias``ActiveIngredient`

但是您的数据库架构描述了以下表关系：

*   `ActiveIngredient` *属于* `Ingredient`
*   `Ingredient` *有很多* `ActiveIngredient`
*   `IngredientAlias` *属于* `Ingredient`
*   `Ingredient` *有很多* `IngredientAlias`

换句话说，一个从to**的一对多**关系，和另一个从to**的一对多**关系。`Ingredient``ActiveIngredient`**`Ingredient``IngredientAlias`**

 **所以你的模型关系应该正是数据库模式所描述的。（此外，您的外键应该引用候选键。MySQL 允许您创建不引用候选键的外键约束，但我认为大多数其他数据库不允许这样做；因此 CakePHP 可能也不允许这样做.)

最后，`recursive`CakePHP 中的级别范围从`-1`到`2`（含）。没有`recursive`水平`3`。如果您只是设置`recursive`为`2`，则 a `findAll`on`ActiveIngredient`将返回其父级`Ingredient`和该父`Ingredient`级的子级`IngredientAliases`。

* * *

**编辑：**
`recursive`在后台使用多个查询。然而，大多数时候，它会从你不需要的模型中获取大量不必要的数据。最好的做法是使用[`unbindModel()`](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#dynamic-associations)删除不需要的关联，或者在可能的情况下设置`recursive`并`-1`使用[获取`joins`](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#joining-tables)关联数据。

第一个选项的另一个变体是使用[Containable 行为](http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html)。这使您可以定义要返回的确切关系和字段。这通常是优化需要递归查询的查找的最简单方法。**

# javascript - jQuery 表单验证 validate() 验证后提交不起作用

> ID：11599450
> 
> 赞同：0
> 
> 时间：2012-07-22T10:21:04.233
> 
> 标签：javascript, jquery

> **可能重复：**
> [javascripit 中的表单验证无法正常工作](https://stackoverflow.com/questions/11598702/form-validation-in-javascripit-does-not-work-propably)

我用`validate()`来验证表格。

这是html：

```
 <form  id="form3" name="form3"   method="post" action="changepassExcution.php">
           <ul>  <li id="foli1" class="notranslate">

                    <label class="desc" id="title1" for="oldpass">
            old password:
           </label>
                <div>
                   <input id="oldpass" name="oldpass" type="password" class="field text medium    required" maxlength="255" tabindex="1"/> </div></li>
 <li id="foli2" class="notranslat">
                <label class="desc" id="title2" for="newpass">
                              new password:
                         </label>
                           <div>
               <input id="newpass" name="newpass" type="password" class="field text medium  required" maxlength="255" tabindex="2" />
            </div></li>
       <li id="foli3" class="notranslate">
       <label class="desc" id="title3" for="retypenewpass">
      repeat new password:</label>
          <div><input id="retypenewpass" name="retypenewpass" type="password" class="field text medium required"  maxlength="255" tabindex="3" /></div></li>
        <li class="buttons "><div>
            <input  id="saveForm" name="saveForm" class="button" type="submit" value="change password"/></div></li>

            </ul>
             </form> 
```

这是javascript：

```
 <script>
    $(document).ready(function(){
    $("#form3").validate();
       });
       </script> 
```

问题是：当我正确提交表单（有效）时，它会被提交，但是当表单无效时，我更正它提交不起作用。

* * *

更新：该功能现在正在使用 Horraaay :) 使用以下代码：

```
 <script>
      $(document).ready(function(){
      $("#form3").validate();
     });
     </script> 
```

唯一的问题是输入表单名称..我使用“提交”作为输入表单的名称但是之前是不同的名称..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T10:22:16.760

尝试：

```
<script>
    $(document).ready(function(){
       $("#form3").validate();
    });
</script> 
```

**编辑**

尝试：

```
<script>
    $(document).ready(function(){
       $("#form3").submit(function(){
            $(this).validate();
       });
    });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T12:54:41.760

它是否可能有效，但没有验证规则 - 所以它总是通过？

如何设置一些这样的规则：

```
<script>
$(document).ready(function(){
    $("#form3").validate({
        rules: {
            oldpass: { required: true },
            newpass: { required: true },                
        }
    });
}); 
```

阅读更多[jQuery 文档](http://docs.jquery.com/Plugins/Validation/validate)

# c# - 修改序列化的 ASP.NET WebAPI 对象中的 xml 数组元素名称

> ID：11599455
> 
> 赞同：14
> 
> 时间：2012-07-22T10:21:33.483
> 
> 标签：c#, asp.net, xml-serialization, asp.net-web-api, netdatacontractserializer

在我的 WebAPI 控制器中返回对象列表时，我一直在努力输出自定义根 xml 元素。

我的控制器方法如下所示：

```
 public List<Product> Get()
    {
        return repository.GetProducts();
    } 
```

它呈现这样的 xml 输出：

```
<ArrayOfProduct>
  <Product>
    <Name>Product1</Name>
  </Product>
  <Product>
    <Name>Product2</Name>
  </Product>
</ArrayOfProduct> 
```

我想改成`<ArrayOfProduct>`，`<Products>`但还没有找到这样做的方法。

我尝试了`DataContract`和`DataMember`属性的不同变体，但无济于事。

有谁知道是否有一种方法可以做我想做的事`List<Product>`，而不是将我的对象包装在一个新类中并返回它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-03-14T19:36:25.257

我知道您不喜欢包装器的想法，但是有一个解决方案在某种程度上使用了包装器，但也使用了非常易于使用的 xml 属性。我拒绝使用以下方法是使用旧的序列化程序。

```
public class Product
{
    [XmlAttribute( "id" )]
    public int Id
    {
        get;
        set;
    }
    [XmlAttribute( "name" )]
    public string Name
    {
        get;
        set;
    }
    [XmlAttribute( "quantity" )]
    public int Quantity
    {
        get;
        set;
    }
}
[XmlRoot( "Products" )]
public class Products
{
    [XmlAttribute( "nid" )]
    public int Id
    {
        get;
        set;
    }
    [XmlElement(ElementName = "Product")]
    public List<Product> AllProducts { get; set; }
} 
```

现在您的控制器可以返回以下产品：

```
 public Products Get()
    {
        return new Products
        {
            AllProducts = new List<Product>
            {
                new Product {Id = 1, Name = "Product1", Quantity = 20},
                new Product {Id = 2, Name = "Product2", Quantity = 37},
                new Product {Id = 3, Name = "Product3", Quantity = 6},
                new Product {Id = 4, Name = "Product4", Quantity = 2},
                new Product {Id = 5, Name = "Product5", Quantity = 50},
            }
        };
    } 
```

现在您可以像这样在启动时指定序列化程序：

```
 var productssXmlFormatter = GlobalConfiguration.Configuration.Formatters.XmlFormatter;
    productssXmlFormatter.SetSerializer<Products>( new XmlSerializer( typeof( Products ) ) ); 
```

我知道这不是必须指定序列化程序并失去 EF 和 Linq 的灵活性和便利性的最理想方式。或者至少必须进行干预，而不仅仅是返回 IEnumerable<>。

当我第一次从以下站点了解到这种方式时，我必须感谢以下站点：http: [//justthisguy.co.uk/outputting-custom-xml-net-web-api/](http://justthisguy.co.uk/outputting-custom-xml-net-web-api/)

这将产生以下 xml：

```
<Products nid="0">
    <Product id="1" name="Product1" quantity="20"/>
    <Product id="2" name="Product2" quantity="37"/>
    <Product id="3" name="Product3" quantity="6"/>
    <Product id="4" name="Product4" quantity="2"/>
    <Product id="5" name="Product5" quantity="50"/>
 </Products> 
```

请不要忘记查看列出的站点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T21:25:33.957

```
class Program
{
    static void Main(string[] args)
    {
        HttpConfiguration config = new HttpConfiguration();

        DataContractSerializer productsSerializer = new DataContractSerializer(typeof(List<Product>), "Products", String.Empty);
        config.Formatters.XmlFormatter.SetSerializer(typeof(List<Product>), productsSerializer);

        config.Formatters.XmlFormatter.Indent = true;

        config.Formatters.XmlFormatter.WriteToStreamAsync(
            typeof(List<Product>),
            new List<Product> { new Product { Name = "Product1" }, new Product { Name = "Product2" } },
            Console.OpenStandardOutput(),
            null,
            null).Wait();

        Console.WriteLine();
    }
}

[DataContract(Namespace = "")]
public class Product
{
    [DataMember]
    public string Name { get; set; }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-20T01:30:40.757

就像难以捉摸的那样......

```
[XmlArray("Products")]
public List<Product> Get()
{
    return repository.GetProducts();
} 
```

如果您因为它是一种方法而遇到问题，请尝试将其重新定义为属性，因为它不带参数，并且可能更有意义。

```
[XmlArray("Products")]
public List<Product> Products { 
  get {
    return repository.GetProducts();
  }
} 
```

这将列出`Product`名为“产品”的元素元素内的所有项目。

```
<Products>
  <Product>
    <Name>Product1</Name>
  </Product>
  <Product>
    <Name>Product2</Name>
  </Product>
</Products> 
```

PS 要重命名`Product`项目标签，您可以使用该`[XmlArrayItem("Product")]`属性来执行此操作。如果您想要一个平面列表（不要将它们包装在“产品”中），您可以使用`[XmlElement("Product")]`and 将它们列出而不分组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-06T23:43:39.580

请检查一下。有一些关于如何以 xml 格式配置类的输出的信息。

[https://msdn.microsoft.com/en-us/library/system.runtime.serialization.datamemberattribute%28v=vs.110%29.aspx](https://msdn.microsoft.com/en-us/library/system.runtime.serialization.datamemberattribute%28v=vs.110%29.aspx)

在我看来，这不是关于 wep api 而是关于类的配置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-27T15:15:29.787

我猜您正在使用`NetDataContractSerializer`
您可以在序列化程序的构造函数中指定根元素名称：

```
NetDataContractSerializer serializer = new NetDataContractSerializer("Products", "Your.Namespace"); 
```

看看不同的重载：

[http://msdn.microsoft.com/en-us/library/system.runtime.serialization.netdatacontractserializer.aspx](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.netdatacontractserializer.aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-16T15:46:01.483

我已经做过很多次了，自定义 xml 序列化输出。在我的类定义中使用属性：

```
[XmlArray("Products")]
public List<Product> Products
{
    get { return repository.GetProducts(); }
} 
```

这应该会给你你正在寻找的输出......

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-16T20:52:46.070

您应该能够使用[此处概述的 Xml 序列化属性](http://msdn.microsoft.com/en-us/library/2baksw0z%28v=vs.80%29.aspx)

自从我和他们一起工作已经有一段时间了，但他们学习起来又快又容易。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-29T05:59:57.900

我遇到了同样的问题并进行了搜索，但找不到任何合适的解决方案，因此最终决定将字符串“ArrayOfProduct”替换为“Products”，并且运行顺利。

我知道这样做是不好的，但它很快。

# wpf - 添加相对路径连接字符串 app.config

> ID：11599456
> 
> 赞同：1
> 
> 时间：2012-07-22T10:21:40.843
> 
> 标签：wpf, configuration

我想添加相对路径而不是下面的代码：

```
<connectionStrings>
<add name="dataEntities" 
 connectionString="datasource=&qout;C:/Project/Sqlite.db'"/>
</connectionStrings> 
```

# mysql - MYSQL 自动增量按字段分类

> ID：11599458
> 
> 赞同：0
> 
> 时间：2012-07-22T10:22:09.307
> 
> 标签：mysql, sql, auto-increment

无论如何我可以在MYSQL中设置自动增量值以通过字段ID对自身进行分组来增加自身？如

```
Shop_id | AI_Value
-------------------
1       | 1
1       | 2
2       | 1
3       | 1
1       | 3 
```

目前，我正在运行查询以获取最后一行，然后通过向值添加 +1 来插入，我认为这是非常低效的，并且会有潜在的缺陷，例如重复值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T10:27:12.460

您可以使用仅用于存储一个累进数字的实用程序表。当您检索下一个累进号码时，您必须锁定表格，获取号码，添加 +1 并存储它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T10:38:19.747

MyISAM 表支持[这一点](http://dev.mysql.com/doc/refman/5.0/en/example-auto-increment.html)。您可以`AUTO_INCREMENT`在索引的第二列上添加 ，并且它只会随着对第一列的更改而增加。

唉，这意味着你将不得不使用`MyISAM`，这本身就是一个缺点......

# c++ - 在声明点按值捕获 C++11 lambda 捕获

> ID：11599461
> 
> 赞同：32
> 
> 时间：2012-07-22T10:22:46.993
> 
> 标签：c++, lambda, c++11

下面的代码打印了 0，但我希望看到 1。我的结论是 lambda 函数不是通过实际将捕获的参数传递给函数来调用的，这样更直观。我是对的还是我错过了什么？

```
#include <iostream>
int main(int argc, char **argv){
  int value = 0;
  auto incr_value  = [&value]() { value++; };
  auto print_value = [ value]() { std::cout << value << std::endl; };
  incr_value();
  print_value();
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-07-22T10:41:40.943

通过将捕获的参数实际传递给函数**来**调用Lambda函数。

`value``value`在定义（并捕获）lambda 的点处等于 0 。由于您是按价值捕获，因此捕获后您要做什么并不重要`value`。

如果您`value`通过引用捕获，那么您会看到打印的 1，因为即使捕获点仍然相同（lambda 定义），您将打印捕获对象的当前值，而不是它创建时创建的副本被抓获。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-07-22T12:32:46.197

是的，捕获是在声明 lambda 时完成的，而不是在调用它时完成的。将 lambda 视为一个函数对象，其构造函数将捕获的变量作为参数并将它们分配给其相应的成员变量（值或引用，取决于捕获模式。） lambda 的实际调用没有任何魔力，它只是一个底层函数对象的常规`operator()`调用。

在调用点捕获东西没有多大意义 - 如果 lambda 被返回或作为参数传递给另一个函数并在那里调用，会捕获什么？实际上有些语言确实以这种方式表现 - 如果您`x`在函数中引用变量，则假定它引用`x`当前在调用点范围内调用的任何变量。这称为动态范围。大多数语言都使用另一种方法，因为它使对程序的推理更加简单，称为词法作用域。

[http://en.wikipedia.org/wiki/Lexical_scoping#Lexical_scoping_and_dynamic_scoping](http://en.wikipedia.org/wiki/Lexical_scoping#Lexical_scoping_and_dynamic_scoping)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-22T21:44:53.010

问题是您的 print 函数是按值而不是按引用捕获的。

```
#include <iostream>
int main(int argc, char **argv){
  int value = 0;
  auto incr_value  = [&value]() { value++; };
  auto print_value = [ value]() { std::cout << value << std::endl; };
  auto print_valueref = [ &value]() { std::cout << value << std::endl; };

  incr_value();
  print_value();
  print_valueref();
  return 0;
} 
```

Outputs 0 and 1 as expected. The first one is captured by value and prints the value at the point of capture; the second one captures the reference and then prints its value.

# c - 如果子进程在读取时不关闭管道写入，会发生什么？

> ID：11599462
> 
> 赞同：6
> 
> 时间：2012-07-22T10:22:48.993
> 
> 标签：c, linux, ubuntu, fork, pipe

给定以下代码：

```
int main(int argc, char *argv[])
{
    int pipefd[2];
    pid_t cpid;
    char buf;

    if (argc != 2) {
        fprintf(stderr, "Usage: %s \n", argv[0]);
        exit(EXIT_FAILURE);
    }

    if (pipe(pipefd) == -1) {
        perror("pipe");
        exit(EXIT_FAILURE);
    }

    cpid = fork();
    if (cpid == -1) {
        perror("fork");
        exit(EXIT_FAILURE);
    }

    if (cpid == 0) {    /* Child reads from pipe */
        close(pipefd[1]);          /* Close unused write end */

        while (read(pipefd[0], &buf, 1) > 0)
            write(STDOUT_FILENO, &buf, 1);

        write(STDOUT_FILENO, "\n", 1);
        close(pipefd[0]);
        _exit(EXIT_SUCCESS);

    } else {            /* Parent writes argv[1] to pipe */
        close(pipefd[0]);          /* Close unused read end */
        write(pipefd[1], argv[1], strlen(argv[1]));
        close(pipefd[1]);          /* Reader will see EOF */
        wait(NULL);                /* Wait for child */
        exit(EXIT_SUCCESS);
    }
return 0;

} 
```

每当子进程想要从管道中读取数据时，它必须首先关闭管道一侧的写入。当我`close(pipefd[1]);`从子进程中删除该行时`if`，我基本上是在说“好的，子进程可以从管道中读取，但我允许父进程同时写入管道”？

如果是这样，当管道为读写打开时会发生什么？没有互斥？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-22T15:28:22.993

> 每当子进程想要从管道中读取数据时，它必须首先关闭管道一侧的写入。

如果进程——父进程或子进程——不打算使用管道的写端，它应该关闭那个文件描述符。对于管道的读取端也是如此。系统将假定在任何进程的写入端打开时都可能发生写入，即使唯一的此类进程是当前正在尝试从管道读取的进程，因此系统不会报告 EOF。此外，如果您过度填充管道并且仍然有一个读取端打开的进程（即使该进程是试图写入的进程），那么写入将挂起，等待读者为写入腾出空间来完成。

> 当我删除该行时 close(pipefd[1]); 从孩子的进程如果，我基本上是在说“好吧，孩子可以从管道中读取，但我允许父母同时写入管道”？

不; 你是说孩子可以和父母一样*写信给管道。*任何具有管道写入文件描述符的进程都可以写入管道。

> 如果是这样，当管道对读写都打开时会发生什么——没有互斥？

从来没有任何互斥。任何打开管道写入描述符的进程都可以随时写入管道；内核确保两个并发的写操作实际上是序列化的。任何打开管道读取描述符的进程都可以随时从管道中读取；内核确保两个并发读取操作获得不同的数据字节。

通过确保只有一个进程将其打开以进行写入并且只有一个进程将其打开以进行读取，从而确保单向使用管道。然而，这是一个编程决定。您可以有 N 个写入端打开的进程和 M 个读取端打开的进程（并且，别想了，N 组和 M 组进程之间可能有共同的进程），它们都能够出奇地理智地工作。但是你不能轻易地预测数据包在写入后会被读取到哪里。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-22T10:31:12.630

fork() 复制文件句柄，因此管道的每一端都有两个句柄。

现在，考虑一下。如果父级没有关闭管道的未使用端，那么它仍然会有两个句柄。如果子进程死了，子进程的句柄就会消失，但父进程仍然持有打开的句柄——因此，永远不会有“断管”或“EOF”到达，因为管道仍然完全有效。只是没有人再将数据放入其中。

当然，另一个方向也是如此。

是的，父/子仍然可以使用句柄写入自己的管道；不过，我不记得有一个用例，它仍然会给你带来同步问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T13:55:23.827

创建管道时，它有两个端，即读端和写端。这些是用户文件描述符表中的条目。

同样，文件表中将有两个条目，其中 1 作为读取端和写入端的引用计数。

现在，当您分叉时，会创建一个子文件，即文件描述符重复，因此文件表两端的引用计数变为 2。

现在“当我删除该行时关闭（pipefd [1]）”-> 在这种情况下，即使父级已完成写入，此行下方的 while 循环将永远阻塞，以便读取返回 0（即 EOF）。发生这种情况是因为即使 parent 完成了写入并关闭了管道的写入端，File 表中写入端的引用计数仍然为 1（最初为 2），因此读取函数仍在等待一些数据到达，这永远不会发生。

现在如果你还没有写“close(pipefd[0]);” 在父级中，此当前代码可能不会显示任何问题，因为您在父级中编写过一次。

但是如果你写了不止一次，那么理想情况下你会想要得到一个错误（如果孩子不再阅读），但是由于父级中的读取端没有关闭，你不会得到错误（即使孩子不再在那里阅读）。

因此，当我们不断地读/写数据时，不关闭未使用端的问题就变得很明显了。如果我们只是读/写一次数据，这可能并不明显。

就像如果您只使用下面的行而不是子级中的读取循环，您可以一次性获取所有数据，并且不关心检查 EOF，即使您不写，您的程序也可以工作“关闭（管道[1]）；“ 在孩子。

```
read(pipefd[0], buf, sizeof(buf));//buf is a character array sufficiently large 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-15T20:54:35.863

SunOS 的 pipe() 手册页：- 只有一端（所有写入文件描述符关闭）的空管道（无缓冲数据）上的读取调用返回 EOF（文件结束）。

```
 A SIGPIPE signal is generated if a write on a pipe with only
 one end is attempted. 
```

# javascript - 在 iPhone 上重新打开 Safari 时如何检测焦点？

> ID：11599463
> 
> 赞同：1
> 
> 时间：2012-07-22T10:23:01.867
> 
> 标签：javascript, jquery, iphone, focus, mobile-safari

我有一个适用于 iPhone 的网络应用程序，我需要在网页处于焦点时触发 Javascript 函数，换句话说，当 Safari 打开时。

我想要完成的是在用户单击电话链接并开始通话时以某种方式启动计时器。通话结束时，Safari 再次弹出，计时器结束。

有没有办法做到这一点？

最好的祝福

莱纳斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T12:21:10.463

试试这个：

如果您触发呼叫的链接，请在 localStorage-item 中设置实际时间。

```
$("#yourButton").click(function() {

  var actualTime = new Date().getTime();
  window.localStorage.setItem('callStart', actualTime);

}) 
```

之后，您需要在用户结束通话后读取存储。您可以在打开页面的 document.ready 中进行设置。

在 $(document).ready(function() {})

```
// check for the localStorageItem
if (window.localStorage.getItem('callStart')) {

  // get it
  var timeStart = window.localStorage.getItem('callStart');

  var now = new Date().getTime();

  /*
   Now calculate here the difference now - timeStart
   and you will get seconds, minutes or whatever you want
  */

  // !!! Dont forget to clear the localStorageItem
  window.localStorage.removeItem('callStart');

} 
```

这就是我会尝试的。HTML5-localStorage 的使用使您可以存储键/值，并且如果用户停止应用程序或设备被自动锁定，数据不会丢失。

希望这个对你有帮助。

添加：您甚至可以将 JSON 作为值存储在 localStorageItem 中。因此，您可以为您的用户设置一个 callID 并实现一个呼叫历史。

# html - 一个 XMLHTTPRequest 中的多个响应

> ID：11599474
> 
> 赞同：0
> 
> 时间：2012-07-22T10:25:29.037
> 
> 标签：html, json, xmlhttprequest

我希望在一个 XMLHttpRequest 调用中返回 3 个项目。这些项目是一个 HTML 格式的表格和两个用于谷歌图表的 JSON 数据。原因是无法生成图表数据，除非先生成表格，并且我希望立即更新页面中的所有内容。

我在网上找不到任何相关的东西。我想在返回的 HTML 中使用隐藏变量来包含所有信息或带有分隔符的文本。

如果有更好的想法，我会欢迎它，并提前非常感谢。西里尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T10:28:02.520

一个请求 == 一个响应

如果您想在该响应中包含多条数据，那么您需要对它们进行编码。

最简单的选择，特别是因为您已经在处理 JSON，可能是使用 JSON 文本。

```
{
    "html": "<...",
    "chart": { "foo": "..." }, 
    "otherchart": { "foo": "..." }
} 
```

# crystal-reports - 如果在 Crystal Reports 中重复，则用于抑制字段的公式

> ID：11599476
> 
> 赞同：9
> 
> 时间：2012-07-22T10:25:39.633
> 
> 标签：crystal-reports

我有一个视图，它显示水晶报表上的数据，其中我有关税、租金、股票、毛额和净额等字段。我的问题是，如果有人更改数据库中的关税，它将显示 2 行相同记录的不同关税，这是正常的从数据库的角度来看的行为，但如果相同的 id 具有不同的关税或租金在新记录中重复，我想将每月租金字段抑制为 0。

```
ID  Tariff  Rental
1    20       390
1    15       390 
```

如果基于 id 重复，我希望报表上的“租赁”字段被抑制。目前我在水晶报表中使用这个公式来检查以前的字段数据并在重复时抑制。

{DatabaseField}=上一个（{DatabaseField}）

它工作正常，但如果 id 不同并且重复租赁，那么它也会抑制我不想要的。我希望它只抑制相同的 id。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-21T12:43:49.227

您必须将公式写入字段抑制。（如果重复则无需压制）

在租赁场 `{ID} = previous({ID})`和`{rental} = previous({rental})`

如果 ID 和 Rental 相同，则只有 Report 会抑制 Rental。

我想这对你有用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-10-13T10:35:41.537

1.  在 Crystal Reports 中，右键单击 Details 部分并选择 Section Expert。

    2.  在 Section Expert 对话框中，选择 Suppress 命令旁边的 X + 2 按钮。该复选框必须保持未选中状态才能使该公式起作用。
    3.  在“公式编辑器”对话框中，创建一个包含“下一个”函数的条件公式，以评估重复值的记录并隐藏“详细信息”行

    例如：{Table.Databasefield}=Previous({Table.Databasefield})

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T21:14:49.333

我不得不通过添加括号对 Janarthanan 解决方案中的公式进行轻微更改，以使其与 Crystal XI 一起使用。

我用了：

```
{ID}=previous({ID}) and {rental}=previous({rental}) 
```

编辑后的问题中提出的这种格式变化帮助我解决了类似的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-21T15:49:11.410

把它放在抑制字段的公式中隐藏。

如果 {myTable.ID} = previous({myTable.ID}) 则为 true 否则为 false

# c++ - 使用 win32 TabItem 包含数据

> ID：11599477
> 
> 赞同：0
> 
> 时间：2012-07-22T10:25:43.877
> 
> 标签：c++, winapi, tabcontrol, win32gui

我正在为我的 GUI 使用 Win32。

我有 TabControl 和 TabItem 类。TabItem 类只包含一个 TCITEM 结构，而 TabControl->AddTab 方法将 TabItem 作为参数并访问该结构。

```
class TabItem {
public:
    TabItem(LPWSTR lpszText);
    ~TabItem();
public:
    TCITEM* GetItem();
private: (... there is more data here, related to the actual page contents)
    TCITEM* m_pItem;
};

class TabControl {
public:
    TabControl(HWND hWnd, INT iX, INT iY, DWORD dwWidth, DWORD dwHeight);
    ~TabControl();
public:
    VOID AddTab(TabItem* tiTab);
    VOID RemoveTab(INT nIndex);
    VOID ClearTabs();
    VOID SetSelectedItem(INT nIndex);
    INT GetSelectedItem();
    INT GetFocusedItem();
    VOID SetPadding(INT iPaddingX, INT iPaddingY);
private:
    HWND m_hWnd;
}; 
```

添加标签页：

```
TCITEM* TabItem::GetItem()
{
    return this->m_pItem;
} 
```

...

```
TabCtrl_InsertItem(this->m_hWnd, TabCtrl_GetItemCount(this->m_hWnd), tiTab->GetItem()); 
```

添加选项卡后，它们可以重新排列、向左/向右移动等。我遇到的问题是我需要根据选项卡索引（即：由 TabCtrl_GetSelected 返回的）获取 TabItem 类的句柄，如TabItem 类包含有关标签页实际内容的附加信息。我不确定该怎么做。

# jquery - ajax请求后隐藏字段的值

> ID：11599485
> 
> 赞同：1
> 
> 时间：2012-07-22T10:26:51.260
> 
> 标签：jquery, ajax

我正在使用一个 ajax 函数，在该函数中我传递一个隐藏字段值，并根据该值传递到下一个文件，并运行一个查询重新调整一个值（html），我稍后将其更新到该隐藏字段，但问题是当我使用隐藏字段的更新值通过变量传递时，它会采用更新的新值而不是采用隐藏字段的旧值？谁能帮我这个

```
var pre_prod_id = $('.prod_id').val(); //old hidden field value
$.ajax({
    type: "GET",
    url: "eg",
    cache: false,
    success: function(html) {
        $('.prod_id').val(html); // got updated value via ajax and updated
    }
});
var prod_id = $('.prod_id').val(); // getting new value of hidden field
alert(prod_id); // alert gives still the old value ???
$target = 'egab=' + abd + '&& abc=' + abc + '&& action=' + action + '&& prod_id=' + prod_id; 
```

我已经在步骤中提到了我想要做什么？希望有人找到解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T10:30:18.217

对 $.ajax 的调用是异步的，因此您的代码不会等到从服务器收到响应后才执行第二条`var prod_id = $('.prod_id').val();`语句。

确保一段代码在收到 Ajax 调用的响应之后而不是之前运行的唯一方法是将其放在“成功”函数中。

另一种方法（但不是我推荐的方法）是通过设置[async 使 ajax 调用同步： false](http://api.jquery.com/jQuery.ajax/)。然而，这是不好的做法，因为它会使浏览器无响应 - 我建议如上所述重构代码。

# ruby-on-rails - “用于..的未定义方法‘元数据’”

> ID：11599488
> 
> 赞同：1
> 
> 时间：2012-07-22T10:27:08.483
> 
> 标签：ruby-on-rails, methods, undefined, mass-assignment

嗨，我在运行规范文件时遇到了这个问题。这是修复模型：

```
class Reparator < User
  include Mongoid::Document
  include Mongoid::Timestamps
  field :private_reparator, :type => Boolean, :default => true
  field :brand_name, :type => String
  field :year_of_experience, :type => Integer, :default => 1

  has_many :reparations
  has_many :skills

  validates_presence_of :skills, :year_of_experience
  validates :year_of_experience, :numericality => {:greater_than_or_equal_to => 0}
end 
```

这是技能模型：

```
class Skill
  include Mongoid::Document

  field :name, :type => String

  belongs_to :reparator

  validates_presence_of :name
  validates_uniqueness_of :name

end 
```

这是控制器：

```
class ReparatorsController < ApplicationController
  respond_to :json

  def index
    @reparators = Reparator.all
    respond_with @reparators
  end

  def show
    @reparator = Reparator.find(params[:id])
    respond_with @reparator
  end

  def create
    @reparator = Reparator.new(params[:reparator])
    @reparator.skills = params[:skills]
    if @reparator.save
      respond_with @reparator
    else
      respond_with @reparator.errors
    end
  end

  def update
    @reparator = Reparator.find(params[:id])

    if @reparator.update_attributes(params[:reparator])
      respond_with @reparator
    else
      respond_with @reparator.errors
    end
  end

  def destroy
    @reparator = Reparator.find(params[:id])
    @reparator.destroy
    respond_with "Correctly destroyed"
  end

end 
```

这是此控制器的规范文件（我将只放置未通过的测试）：

```
it "Should create an reparator" do
      valid_skills = [FactoryGirl.create(:skill).id, FactoryGirl.create(:skill).id]
      valid_attributes = {:name => "Vianello",
                          :email => "maremma@gmail.com",
                          :address => "viale ciccio",
                          :private_reparator => true
                          }
      post :create, :reparator => valid_attributes, :skills => valid_skills
      assigns(:reparator).should be_a Reparator
      assigns(:reparator).should be_persisted
    end 
```

这是技能工厂女孩：

```
FactoryGirl.define do
  factory :skill do
    sequence(:name) {|n| "skill#{n}"}
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T14:04:32.620

坏线是这个

```
@reparator.skills = params[:skills] 
```

`params[:skills]`是一个字符串数组（已传递的 id），但该`skills=`方法期望得到实际的实例，`Skill`因此会爆炸。

除了`skills=`， mongoid 还为您提供了一种`skill_ids=`方法，该方法允许您通过分配一个 id 数组来更改关联的对象。或者，加载你自己的技能对象，然后`@reparator.skills = skills`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T11:14:04.713

我认为您的规范中有错字。`post :create, :reparator => valid_attributes, :skills => skills_ttributes`应该`post :create, :reparator => valid_attributes, :skills => skills_attributes`改为。

# ruby - 使用 Ruby、REST 获取对 twitter API 的请求

> ID：11599491
> 
> 赞同：0
> 
> 时间：2012-07-22T10:27:30.557
> 
> 标签：ruby, json, api, rest, twitter

我尝试使用 Twitter API 在 Ruby 中学习 REST。

根据[https://dev.twitter.com/docs/api/1/get/trends](https://dev.twitter.com/docs/api/1/get/trends)我必须将 GET 请求写入[http://api.twitter.com/1/trends.json](http://api.twitter.com/1/trends.json)。

我的 Ruby 代码是：

```
 require 'rubygems'
 require 'rest-client'
 require 'json'

 url = 'http://api.twitter.com/1/trends.json'
 response = RestClient.get(url)

 puts response.body 
```

但是我遇到了下一个错误：

```
/home/danik/.rvm/gems/ruby-1.9.3-p194/gems/rest-client-1.6.7/lib/restclient  /abstract_response.rb:48:in `return!': 404 Resource Not Found (RestClient::ResourceNotFound)

from /home/danik/.rvm/gems/ruby-1.9.3-p194/gems/rest-client-1.6.7/lib/restclient/request.rb:230:in `process_result'

from /home/danik/.rvm/gems/ruby-1.9.3-p194/gems/rest-client-1.6.7/lib/restclient/request.rb:178:in `block in transmit'

from /home/danik/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/http.rb:745:in `start'

from /home/danik/.rvm/gems/ruby-1.9.3-p194/gems/rest-client-1.6.7/lib/restclient/request.rb:172:in `transmit'

from /home/danik/.rvm/gems/ruby-1.9.3-p194/gems/rest-client-1.6.7/lib/restclient/request.rb:64:in `execute'

from /home/danik/.rvm/gems/ruby-1.9.3-p194/gems/rest-client-1.6.7/lib/restclient/request.rb:33:in `execute'

from /home/danik/.rvm/gems/ruby-1.9.3-p194/gems/rest-client-1.6.7/lib/restclient.rb:68:in `get'

from TwitterTrends.rb:5:in `<main>' 
```

怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T10:33:05.080

您收到该错误是因为您尝试获取的资源`http://api.twitter.com/1/trends.json`不存在，如本文档[趋势文档中所述](https://dev.twitter.com/docs/api/1/get/trends)

> 此方法已弃用，并已被 GET trends/:woeid 取代。请使用新端点更新您的应用程序。

您想获取这样的 URL `https://api.twitter.com/1/trends/1.json`。因此，在您的代码中，尝试执行以下操作：

```
 require 'rubygems'
 require 'rest-client'
 require 'json'

 url = 'https://api.twitter.com/1/trends/1.json'
 response = RestClient.get(url)

 puts response.body 
```

你应该得到回应。

# algorithm - 如何计算沿由两点创建的线的镜像点？

> ID：11599496
> 
> 赞同：0
> 
> 时间：2012-07-22T10:28:21.617
> 
> 标签：algorithm, math, graphics, geometry

> **可能重复：**
> [如何计算沿线的镜像点？](https://stackoverflow.com/questions/8954326/how-to-calculate-the-mirror-point-along-a-line)

在二维平面中，我有一个点和一条线的起点和终点。
如何沿着这条线获得镜像点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T10:55:50.410

您可以使用镜像矩阵：

![在此处输入图像描述](../Images/c49c173c8d8e677ecbc8a1e55252c74a.png)

该矩阵仅适用于经过坐标系 0.0 的向量。因此，您必须平移点矢量拳头。然后将向量翻译回来。

![在此处输入图像描述](../Images/8c05ffc521fd876b9a5a5c8485fdbba5.png)

参见维基百科： [维基百科 Spiegelungsmatrix](http://de.wikipedia.org/wiki/Spiegelungsmatrix)

英文版本可以在这里找到：[维基百科坐标旋转和反射](https://en.wikipedia.org/wiki/Coordinate_rotations_and_reflections)

# mysql - 通过比较保持 id 相同的多行来选择行值

> ID：11599502
> 
> 赞同：0
> 
> 时间：2012-07-22T10:29:12.427
> 
> 标签：mysql

这是我的表数据，我想通过比较多行从中找到特定的 id..

```
onetsoc_code    element_id   data_value

11-1011.00      1.B.1.a      1.33
11-1011.00      1.B.1.b      2.00
11-1011.00      1.B.1.c      2.67
11-1011.00      1.B.1.d      3.67
11-1011.00      1.B.1.e      7.00
11-1011.00      1.B.1.f      5.33
11-1011.00      1.B.1.g      5.00
11-1011.00      1.B.1.h      6.00
11-1011.00      1.B.1.i      0.00
11-1021.00      1.B.1.a      1.33
11-1021.00      1.B.1.b      1.33
11-1021.00      1.B.1.c      1.00
11-1021.00      1.B.1.d      3.33
11-1021.00      1.B.1.e      7.00
11-1021.00      1.B.1.f      3.67
11-1021.00      1.B.1.g      5.00
11-1021.00      1.B.1.h      6.00
11-1021.00      1.B.1.i      4.00
11-1031.00      1.B.1.a      1.00
11-1031.00      1.B.1.b      3.67
11-1031.00      1.B.1.c      3.67
11-1031.00      1.B.1.d      4.67
11-1031.00      1.B.1.e      7.00 
```

这是我的表，所以我想要那些**onetsoc_code**

```
1.B.1.g      5.00
1.B.1.h      6.00
1.B.1.i      4.00 
```

如果您查看表格，您会发现**11-1021.00**是我想要的结果。

所以这就是我希望你得到 1.B.1.a 到 1.B.1.f 的逻辑。我只想一次比较三行，并且想要与这些数据关联的单个**onetsoc_code 。**

具有 1.B.1.g、1.B.1.h、1.B.1.i 的行可用于所有**onetsoc_code**，所以我只需要那些具有上述给定条件的**onetsoc_code**，就像再次一样，

```
1.B.1.g      5.00
1.B.1.h      6.00
1.B.1.i      4.00 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T10:34:52.703

您可以`onetsoc_code`对包含三个`DISTINCT`记录的组进行分组和过滤：

```
SELECT   onetsoc_code
FROM     mytable
WHERE    (element_id = '1.B.1.g' AND data_value = 5.00)
      OR (element_id = '1.B.1.h' AND data_value = 6.00)
      OR (element_id = '1.B.1.i' AND data_value = 4.00)
GROUP BY onetsoc_code
HAVING   COUNT(DISTINCT element_id, data_value) = 3 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/e65b7/1/0)上查看。

当然，如果保证唯一性，则可以节省`DISTINCT`操作费用，而只需使用普通旧的`COUNT(*)`。

# asp.net - 如何使用表单身份验证 asp.net 获得 enableCrossAppRedirects 工作？

> ID：11599503
> 
> 赞同：-2
> 
> 时间：2012-07-22T10:29:22.973
> 
> 标签：asp.net, c#-3.0, single-sign-on

有人遇到过这个楼盘吗？我实际上正在尝试为不同域中的 2 个 asp.net 网站实现单点登录。正在为此寻找示例代码？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T10:32:00.590

如果您使用跨域，请查看[此页面](http://msdn.microsoft.com/en-us/library/system.web.security.formsauthentication.enablecrossappredirects.aspx)，您需要确保您也使用无 cookie 身份验证，因为 cookie 不会是跨域的。

[这里有另一个 Stack Question](https://stackoverflow.com/questions/7153851/enablecrossappredirects-where-is-the-cross-domain-feature-documented)的作者提供的不错的代码示例。

```
if (FormsAuthentication.EnableCrossAppRedirects)
{
text = context.Request.QueryString[name];
if (text != null && text.Length > 1)
{
    if (!cookielessTicket && FormsAuthentication.CookieMode == HttpCookieMode.AutoDetect)
    {
        cookielessTicket = CookielessHelperClass.UseCookieless(context, true, FormsAuthentication.CookieMode);
    }
    try
    {
        formsAuthenticationTicket = FormsAuthentication.Decrypt(text);
    }
    catch
    {
        flag2 = true;
    }
    if (formsAuthenticationTicket == null)
    {
        flag2 = true;
    }
}
if (formsAuthenticationTicket == null || formsAuthenticationTicket.Expired)
{
    text = context.Request.Form[name];
    if (text != null && text.Length > 1)
    {
        if (!cookielessTicket && FormsAuthentication.CookieMode == HttpCookieMode.AutoDetect)
        {
            cookielessTicket = CookielessHelperClass.UseCookieless(context, true, FormsAuthentication.CookieMode);
        }
        try
        {
            formsAuthenticationTicket = FormsAuthentication.Decrypt(text);
        }
        catch
        {
            flag2 = true;
        }
        if (formsAuthenticationTicket == null)
        {
            flag2 = true;
        }
    }
}
} 
```

# iphone - 我无法导航到 (didSelectedRowAtIndexPath) 中的其他视图

> ID：11599504
> 
> 赞同：0
> 
> 时间：2012-07-22T10:29:31.227
> 
> 标签：iphone, xcode

当我单击行导航到另一个视图时，它让我崩溃

```
"Terminating app due to uncaught exception 'NSUnknownKeyException', reason: '[<detailInfo 0x6b503d0> setValue:forUndefinedKey:]: this class is not key value coding-compliant for the key lblText.'
*** First throw call stack:
" 
```

这是我的代码：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{   
    _vcontroler = [ urls objectAtIndex:indexPath.row];

    if (!self.detailViewController)
    {
         self.detailViewController = [[[detailInfo alloc] initWithNibName:@"detailInfo" bundle:nil] autorelease];

    }
      detailViewController.vcontroler =_vcontroler; 

    [self.navigationController pushViewController:self.detailViewController animated:YES];

    [detailViewController release];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T10:52:31.757

问题是您从视图的框架中删除了一个图形对象，而没有删除出口连接。选择您的视图控制器`.xib`，然后选择`File's Owner`（左键单击它）并删除`lblText`对象的出口连接。构建并运行。应该没问题。

# perl - Carp：sassign 中 ARRAY 的奇异副本。有什么修复吗？

> ID：11599506
> 
> 赞同：1
> 
> 时间：2012-07-22T10:29:33.617
> 
> 标签：perl, die, carp

尝试`die`从`eval`.

代码如下；

```
$status = eval { $self->$func( @{$y->{args}} ); }; 
```

在这种情况下`$self->$func`，指向一个处理程序，该处理程序在错误时分离到某个页面，如下所示：

```
sub detach
{
    my $self   = shift;
    my $url    = shift;
    my @params = @_;

    if( $url !~ /^\// )
    {
        $url = '/' . $self->namespace . '/' . $url;
    }
    $url =~ s/\sat.*$//;
    print STDERR $self->uri . ": Detaching to " . $url . "\n";

    die "REDIR:$url";
} 
```

这*应该*放入`"REDIR:$url"`，`$@`以便在`eval`退出时可用。

然而，相反 Carp.pm 死了，我假设在`die`with内部的某个地方

> ```
> Bizarre copy of ARRAY in sassign at /usr/share/perl/5.10/Carp.pm line 182 
> ```

环顾四周，有一些建议表明 perl 中存在与死期间堆栈相关的错误（例如[http://code.activestate.com/lists/perl5-porters/149248/](http://code.activestate.com/lists/perl5-porters/149248/)），但是我担心在这个点我对perl的了解有限，我不确定这是否相关，或者如果是的话该怎么办。`:(`

有谁知道是否有解决此问题的方法或另一种方法可以将错误字符串从 传回`eval`，或者我是否读错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T20:06:20.883

这听起来像[#52610](https://rt.perl.org/rt3//Ticket/Display.html?id=52610)。您是否使用任何可能成为罪魁祸首的挂接到调试器的模块？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T22:51:50.947

结果证明这是我使用的 Perl 版本的问题。升级到 5.16.1 解决了这个问题。

# wpf - WPF MultiBinding 具有不同绑定路径的相同转换器

> ID：11599508
> 
> 赞同：1
> 
> 时间：2012-07-22T10:29:39.290
> 
> 标签：wpf, multibinding

我在 UI 中有十个相同类型的 UI 控件，并且都将使用相同的多绑定转换器。

问题是我无法为多重绑定创建一个通用样式，我可以将其应用于所有 UI 控件以避免重复代码，因为每个控件将使用不同的绑定属性作为绑定传递给转换器。

WPF中有什么方法可以避免这种情况下的重复代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T16:47:45.297

您可以[扩展 MarkupExtension](http://www.switchonthecode.com/tutorials/wpf-tutorial-fun-with-markup-extensions)，它允许您定义一个自定义转换器包装器，然后只需使用 2 个路径调用它。

编辑：在您的情况下，最好直接从 MultiBinding 继承并在构造函数中设置合理的默认值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T15:50:45.053

I assume you have something like this:

```
<Button>
  <Button.Content>
     <MultiBinding Converter="{StaticResource conv}">
       <Binding Path="COMMON" />
       <Binding Path="SPECIFIC1" />
     </MultiBinding>
  </Button.Content>
</Button>    
<Button>
  <Button.Content>
     <MultiBinding Converter="{StaticResource conv}">
       <Binding Path="COMMON" />
       <Binding Path="SPECIFIC2" />
     </MultiBinding>
  </Button.Content>
</Button>
<Button>
  <Button.Content>
     <MultiBinding Converter="{StaticResource conv}">
       <Binding Path="COMMON" />
       <Binding Path="SPECIFIC3" />
     </MultiBinding>
  </Button.Content>
</Button> 
```

and so on... this looks ugly, I agree. I am not aware of any alternatives, however by thinking a little, you could create(imo) a little better solution:

just create new CommonMultiBindings.xaml; which includes:

```
<MultiBinding Converter="{StaticResource conv}">
 </MultiBinding> 
```

and voila, done. Now just reference it as CommonMultiBindings object and use it as:

```
<Button.Content>
  <CommonMultiBindings>
      <!--Actual bindings here-->
  </CommonMultiBindings>
</Button.Content> 
```

you can take it further by factoring "" into the CommonMultiBindings and adding new property(UserBindings) which will be used to synchronize between Bindings property.

Ideally, you would want to create a custom MultiBinding class which has style property. Then you could do something like this + combined with "custom" default bindings which are automatically added to "Bindings" collection

```
<Grid.Resources>
  <Style TargetType="MultiBinding">
    <Setter Property="Converter" Value="{StaticResource conv}" />
  </Style>
</Grid.Resources> 
```

# android - 夏洛克动作栏不工作

> ID：11599512
> 
> 赞同：0
> 
> 时间：2012-07-22T10:30:16.333
> 
> 标签：android, actionbarsherlock

我正在使用 sherlock 操作栏制作一个操作栏，但在我运行它时它没有显示。这是代码：

```
public class NaseebactionbarActivity extends SherlockActivity{
@Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.main);
        ActionBar actionbar = getSupportActionBar();
        actionbar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

        ActionBar.Tab PlayerTab = actionbar.newTab().setText("Fragment A");
        ActionBar.Tab StationsTab = actionbar.newTab().setText("Fragment B");

        actionbar.addTab(PlayerTab);
        actionbar.addTab(StationsTab);

        actionbar.show();
    } 
```

请告诉我问题是什么以及如何解决。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T18:19:53.683

扩展您的`Activity`from`SherlockFragmentActivity`而不是`SherlockActivity`：

```
public class MyActivity extends SherlockFragmentActivity {
    // ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T13:14:06.227

在您的 AndroidManifest 中，请务必将应用程序的主题设置为： `android:theme="@style/Theme.Sherlock"`

# php - 使用 PHP 会话发送 PHP 消息

> ID：11599515
> 
> 赞同：0
> 
> 时间：2012-07-22T10:30:29.277
> 
> 标签：php, session-cookies, phpmailer

此脚本的目的是发送一封电子邮件，但它不会包含您的姓名和电子邮件，而是将其包含在消息中，因为该网站已经从 PHP 会话中获得了有关此内容的详细信息。目前“2Email”工作..它可以向收件人的邮箱发送消息，并包含用户输入的消息。但它不遵循模板。IE 它不包括文本“通过仪表板发送”

```
<?php

session_start();
if(!isset($_SESSION["USER"])){
    header("Location: ../login.php?NotAuth");
}

 $to = $_POST['2Email'];
 $name = $_SESSION["USER"]["FullName"]; 
 $email = $_SESSION["USER"]["Email"];
 $subject = $_POST['regarding'];
 $message = $_POST['msg'];
 $Cc= $_SESSION["USER"]["Email"];
 $headers = "From: $email";
 $tracker = "This message was sent via the TrackerSystem dashboard";

$message = "Hi, "."\n".$message. "\n". "Regards, ".$name. "\n".$tracker. 
 $sent = mail($to, $subject, $message, $headers) ; 
 if($sent) {
     print "Sent successfully! XD "; 
    } else {
         print "The server made a booboo, the email didn't send :'( "; 
    } 

    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T10:48:27.720

是不是第 19 行的错字：`"\n".$tracker.`？如果是这样，这就是阻止您`tracker`被附加到消息的原因。

实际发生了什么：第 19-20 行的整个表达式（这个）：

```
$message = "Hi, "."\n".$message. "\n". "Regards, ".$name. "\n".$tracker. 
   $sent = mail($to, $subject, $message, $headers) ; 
```

正在从右到左进行评估（如果它甚至有效，我对此表示怀疑）。因此（第一）发送邮件并将结果分配给`$sent`（第二）将整个连接字符串分配给`$message`。

要修复它，请制作`"\n".$tracker.` `"\n".$tracker;`.

# css - LESS.css 变量取决于类

> ID：11599520
> 
> 赞同：4
> 
> 时间：2012-07-22T10:31:14.770
> 
> 标签：css, variables, themes, less

我想创建一个主题选择器之类的东西。我使用 LESS.css。

LESS.css 有一个包含主要颜色的变量：

```
@colorOne: #222;
@colorTwo: #fff;
@darkGradientStart: lighten(@colorOne, 10%);
@darkGradientStop: lighten(@colorOne, 5%);
@lightGradientStart: @colorTwo;
@lightradientStop: darken(@colorTwo, 7%); 
```

如果标签具有这样的颜色类，我想更改它们：

```
<body class='theme-blue'> 
```

然后我在我的less.css中写了这个（在默认变量之后）

```
.theme-blue{
    @colorOne: blue;
} 
```

但它仍然使用默认的#222。它不会被覆盖。

我怎么解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-25T00:56:18.203

您不能覆盖 LESS 中的变量（在同一范围内）。[该文档](http://lesscss.org/#-variables)特别指出：

> 请注意，LESS 中的变量实际上是“常量”，因为它们只能定义一次。

对于你想要的，你需要做一个 mixin：

**示例 LESS 代码**

```
.colorDefs(@c1: #222, @c2: #fff) {
    @colorOne: @c1;
    @colorTwo: @c2;
    @darkGradientStart: lighten(@colorOne, 10%);
    @darkGradientStop: lighten(@colorOne, 5%);
    @lightGradientStart: @colorTwo;
    @lightGradientStop: darken(@colorTwo, 7%);
}

.theme-blue {
    //import color definitions 
    .colorDefs(blue, yellow);

    // use them 
    color: @colorOne;
    background-color: @colorTwo;

    .gradient1 {
        background-image: linear-gradient(top, @darkGradientStart, @darkGradientStop);
    }

    .gradient1 {
        background-image: linear-gradient(top, @lightGradientStart, @lightGradientStop);
    }
}

.theme-green {
    //import different color definitions
    .colorDefs(green, red);

    // use them 
    color: @colorOne;
    background-color: @colorTwo;

    .gradient1 {
        background-image: linear-gradient(top, @darkGradientStart, @darkGradientStop);
    }

    .gradient1 {
        background-image: linear-gradient(top, @lightGradientStart, @lightGradientStop);
    }
} 
```

**示例 CSS 输出**

```
.theme-blue {
  color: #0000ff;
  background-color: #ffff00;
}
.theme-blue .gradient1 {
  background-image: linear-gradient(top, #3333ff, #1a1aff);
}
.theme-blue .gradient1 {
  background-image: linear-gradient(top, #ffff00, #dbdb00);
}
.theme-green {
  color: #008000;
  background-color: #ff0000;
}
.theme-green .gradient1 {
  background-image: linear-gradient(top, #00b300, #009a00);
}
.theme-green .gradient1 {
  background-image: linear-gradient(top, #ff0000, #db0000);
} 
```

## 解决 4K（即很多）代码行

**ed1nh0**评论说使用颜色变量有 4K 行代码，并且无法“将其放入 mixin”。让我对此发表一些评论：

1.  如果 4K 行代码依赖于 body 类来定义颜色，那么最好将每种颜色拆分为自己的 css 文件，并仅根据需要加载该文件（即，不要将每种代码颜色分组到一个文件中）。这会让人怀疑你是否真的想通过身体等级来控制颜色。
2.  无论是否按照 1\. 中的建议进行操作，我相信仍然可以使用使用颜色的 4K 线条来处理这个问题。我相信问题不在于使用 mixin 来定义颜色值本身（即不是 4K 行颜色变量定义），而在于需要*重复*使用颜色的 4K 行属性、类等。但是这种重复也可以通过将其全部包装在一个 mixin 中来轻松处理。所以我上面的原始答案可以进一步抽象为这个（注意`.colorDefs`与上面相同，这里不再重复）：

**较少的**

```
.themeProperties() { // Imagine inside here the 4K lines of code
    // use them 
    color: @colorOne;
    background-color: @colorTwo;

    .gradient1 {
        background-image: linear-gradient(top, @darkGradientStart, @darkGradientStop);
    }

    .gradient1 {
        background-image: linear-gradient(top, @lightGradientStart, @lightGradientStop);
    }
}

.theme-blue {
    //import color definitions 
    .colorDefs(blue, yellow);
    .themeProperties(); //4K lines repeated here
}

.theme-green {
    //import different color definitions
    .colorDefs(green, red);
    .themeProperties(); //4K lines repeated here
} 
```

上面确实假设属性使用变量的方式没有差异，只是这些属性的值是什么。如果有任何“差异”，那么在某些情况下可能需要对 mixin 进行一些调整，但这个概念应该仍然成立。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T10:54:00.210

```
@blue:#0000FF;
@green:#00FF00;

.theme-blue {
    color:@blue;
}
.theme-green {
    color:@green;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T10:49:09.533

你正在做的事情会在 css 中像这样编译：

```
.theme-blue{
    #222: blue;
} 
```

看看为什么它现在不起作用？:)

如果你试图覆盖颜色样式，你应该用通常的 css 方式来做：

```
.theme-blue{
    color: blue;
} 
```

# linux - gdb - 目标中没有硬件断点支持

> ID：11599521
> 
> 赞同：2
> 
> 时间：2012-07-22T10:31:22.787
> 
> 标签：linux, debugging, ubuntu, gdb

我正在尝试使用 gdb hbreak 命令设置硬件断点

```
hbreak *address 
```

但我收到以下错误：“目标中没有硬件断点支持”。

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-12-21T05:16:25.820

首先尝试启动命令。GDB 经常说，当程序尚未启动时，即使有硬件支持（在这种情况下，这是一个非常具有误导性的信息）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T10:51:29.053

您的硬件可能不支持硬件断点，或者您可能没有可用的硬件断点寄存器。您仍然可以使用软件断点作为修复。

# solr - solr 优化命令和并发

> ID：11599523
> 
> 赞同：1
> 
> 时间：2012-07-22T10:31:47.147
> 
> 标签：solr

我知道当 Solr 执行优化时，无论是通过优化命令显式执行，还是由于 mergeFactor 由 Lucene 隐式执行，读取器都不会被阻塞。也就是说，服务器仍然可以搜索

它也可用于更新吗？我的应用程序中的其他线程可以将文档更新发送到 solr，并且可能还发送提交吗？这些更新会传递到索引中，还是会被阻止？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-14T12:24:26.857

但是，这是一个老问题，更多信息可以在这里提供帮助。

solr 中的优化命令是对 IndexWriter 的 forceMerge() 方法的调用。此方法确实对 IndexWriter 实例本身进行了锁定。但是，重点是添加文档不需要对 IW 实例进行任何锁定，也不需要任何 commitLock 或 fullFlushLock。此外，即使使用 forceMerge()，它也是 ConcurrentMergeScheduler 拾取合并过程并完全在不同的线程中执行。

通常合并过程（不是forceMerge，反正不推荐）只需要在准备合并信息时锁定IndexWriter实例，当它需要知道要合并哪些段，以及新的合并段名称是什么等。一次它有这个信息，合并同时发生。

所以，是的，即使在优化过程中，您也可以继续添加文档——它们将在 RAM 中缓冲，直到 IndexWriter 的下一次提交/优化或 close()。

话虽如此，还不如补充一点，您不能对不同的段进行并发提交 - 也就是说 Lucene 一次只会执行一次提交。添加文档根本不会将它们刷新到任何段 - 只是将它们放在缓冲区中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T17:45:02.297

答案是“是”。`commit`服务器将响应搜索请求，但在您发送命令之前，更新的文档不会显示在搜索结果中。每当客户端/线程向服务器发出`commit`命令时，更新的文档就会堆积起来并提交。如果您有多个客户端/线程发出`updates`并且`commits`它们不会相互阻塞，并且`commit`命令完成后将立即显示更新。

# c# - 可以将图形与 ObjectContext 分离并重新附加到另一个图形吗？

> ID：11599526
> 
> 赞同：5
> 
> 时间：2012-07-22T10:32:06.223
> 
> 标签：c#, entity-framework

我尝试了以下方法来分离实体对象图，然后将其附加到新上下文：

```
// create a context
var ctx = new TestEntities();
var parents = ctx.Parents;

// populate the graph
var newParent = new Parent {Nb = 1, Title = "Parent1"};
parents.AddObject(newParent);
newParent.Children.Add(new Child {Nb = 1, Title = "Child1"});

// put all entity objects in Unchanged state before detaching
ctx.SaveChanges(); 

// detach all entity objects
foreach (var objectStateEntry in ctx.ObjectStateManager.GetObjectStateEntries(~EntityState.Detached))
    ctx.Detach(objectStateEntry.Entity);

// create a new context
ctx = new TestEntities(); 

// attach graphs to new context
foreach (var p in parents)
    ctx.Attach(p); 
```

这种方法有两个问题：

1.  分离所有实体对象后，`newParent.Children`变为空
2.  当重新附加说“一个实体对象不能被多个 IEntityChangeTracker 实例引用”时，会引发 InvalidOperationException。

有谁知道如何正确地将图形从 ObjectContext 中分离出来，并将其重新附加到另一个图形上？

**更新：**

好的，对我来说是个好消息，我想出了如何在同一个 ObjectContext 中更改底层数据库连接，所以我不再需要分离/附加。如果有人感兴趣，这就是我的做法（这里我使用 SQLite 并更改数据库文件）：

```
var sc = ((EntityConnection)ctx.Connection).StoreConnection;
sc.ConnectionString = @"Data Source=" + newFile + ";"; 
```

我会接受 Ladislav 的回答，因为它似乎是正确的，并按照我的要求回答我的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T10:59:49.843

您必须创建整个图形的深层克隆并将其附加到另一个上下文。深度克隆是通过序列化创建的。常见的方法是使用`DataContractSerializer`：

```
var serializer = new DataContractSerializer(typeof(Parent));
serializer.WriteObject(stream, attachedEntity);
stream.Seek(0, SeekOrgin.Begin);
detachedEntity = (Parent)serializer.ReadObject(stream); 
```

要完成这项工作，您的实体不得包含循环引用（父项对子项具有导航属性，子项对父项具有导航属性），或者您必须在实体上使用`DataContract(IsReference=true)`和`DataMember`属性来通知序列化程序它必须跟踪引用以解决循环引用问题。

# iphone - iOS UI导航栏到uitableviewcontroller不是appdelegate中的rootviewcontroller

> ID：11599528
> 
> 赞同：0
> 
> 时间：2012-07-22T10:32:20.100
> 
> 标签：iphone, ios, xcode, uitableview, uinavigationcontroller

我通过按下视图控制器中的按钮来加载表格视图控件。我的 Viewcontroller.m 中的代码是

```
-(IBAction)go:(id)sender{

TableViewController *sec=[[TableViewController alloc]init];

sec.modalTransitionStyle=UIModalTransitionStyleCrossDissolve;
[self presentModalViewController:sec animated:YES];
} 
```

现在我的表视图控制器加载..现在我需要添加一个导航栏，它有标题和加载视图控制器的后退按钮。我还想知道如何将操作分配给我可以加载视图控制器的后退按钮

我在 google 中进行了尝试，所有这些都将 tableviewcontroller 作为根视图控制器，而在我的应用程序中，rootviewcontroller 是视图控制器。有没有办法在我的 xib 中或以编程方式添加它。

请帮助..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T13:38:57.023

You can do this:

```
-(IBAction)go:(id)sender{

    TableViewController *sec=[[TableViewController alloc]init];

    UINavgationController *nav = [[UINavgationController alloc] initWithRootViewController:sec];
    nav.modalTransitionStyle=UIModalTransitionStyleCrossDissolve;
    [self presentModalViewController:nav animated:YES]; 
```

}

# php - DISTINCT 关键字在我的查询中不起作用

> ID：11599530
> 
> 赞同：0
> 
> 时间：2012-07-22T10:32:34.817
> 
> 标签：php, mysql, sql

在此查询中，DISTINCT 关键字不起作用。显示主题表中的重复主题..谁能告诉我我在哪里犯了错误？

```
SELECT DISTINCT
  tutor_category_subject.subject_id,
  GROUP_CONCAT(subject.subjects SEPARATOR ', ') AS subjects  
FROM       tutor_category_subject
INNER JOIN subject ON tutor_category_subject.subject_id = subject.subject_id
WHERE tutor_category_subject.tutor_id = 3; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T13:31:13.923

I think you need a group by statement:

```
SELECT tutor_category_subject.subject_id,
       GROUP_CONCAT(subject.subjects SEPARATOR ', ') AS subjects  
FROM tutor_category_subject INNER JOIN
     subject
     ON tutor_category_subject.subject_id = subject.subject_id
WHERE tutor_category_subject.tutor_id = 3
group by tutor_category_subject.subject_id 
```

# java - java : ipconfig 的正则表达式

> ID：11599532
> 
> 赞同：0
> 
> 时间：2012-07-22T10:32:42.790
> 
> 标签：java, regex, ipconfig

**ipconfig 的输出在所有 Windows 机器中都相同吗？**. 我想从 ipconfig 的输出中捕获 ip-address 、默认网关、子网掩码。

目前我正在这样做：

```
String[] arr = s.split("IPv4 Address. . . . . . . . . . . : ");
            ipAddress = (arr[1].split("\\n"))[0];
            String[] arr1 = s.split("Subnet Mask . . . . . . . . . . . : ");
            subnetMask = (arr1[1].split("\\n"))[0];
            String[] arr2 = s.split("Default Gateway . . . . . . . . . : ");
            defaultGateway = (arr2[1].split("\\n"))[0]; 
```

任何人都有更好的想法来使用一些正则表达式？？？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T10:39:16.143

您可能不应该依赖始终相同的命令格式（例如，如果非英语国家的某人使用您的代码，则各种值的名称将不同 - 这可能很重要，也可能不重要给你）。

[您可以使用java.net](http://docs.oracle.com/javase/tutorial/networking/nifs/retrieving.html)包检索相同的信息。此外，[这个问题](https://stackoverflow.com/questions/1221517/how-to-get-subnet-mask-using-java)可能会给你一个有用的例子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T15:05:09.167

使用正则表达式模式：

```
Pattern pattern = Pattern.compile(
  "[\\n\\r]\\s*IP\\s+Address[^\\d]+(\\d\\S+).*Mask[^\\d]+(\\d\\S+).*Gateway[^\\d]+(\\d\\S+)",
  Pattern.DOTALL); 
```

# postgresql - PostgreSQL 8.4 将所有表的 DML 权限授予一个角色

> ID：11599533
> 
> 赞同：10
> 
> 时间：2012-07-22T10:32:49.980
> 
> 标签：postgresql, grant, dml

如何在 PostgreSQL 8.4 的模式中的所有表上授予 DML（SELECT、INSERT、UPDATE、DELETE）？我还希望这笔赠款在将来也能持续创建新表。

我已经看到了 9.0 的解决方案，但我坚持使用 8.4，因为它与 Debian stable 一起提供。

我尝试了以下作为基线，但它不起作用，导致不可避免的“访问关系 X 被拒绝”：

```
GRANT ALL PRIVILEGES ON DATABASE testdb TO testuser; 
```

我已经翻阅了文档，但似乎找不到合适的解决方案。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-22T14:08:12.740

> 我还希望这笔赠款在将来也能持续创建新表。[...] 我已经翻阅了文档，但似乎找不到合适的解决方案。

因为在 9.0 之前没有。您所能得到的只是为*现有*表设置权限。你必须为每张桌子做一个`GRANT`，因为在 9.0 之前没有“批量”模式。请参阅[8.4](http://www.postgresql.org/docs/8.4/interactive/sql-grant.html)和[9.0](http://www.postgresql.org/docs/9.0/interactive/sql-grant.html)的 SQL 语法：

```
GRANT { { SELECT | INSERT | UPDATE | DELETE | TRUNCATE | REFERENCES | TRIGGER }
    [,...] | ALL [ PRIVILEGES ] }
    ON [ TABLE ] tablename [, ...]
    TO { [ GROUP ] rolename | PUBLIC } [, ...] [ WITH GRANT OPTION ] 
```

和 9.0 这里：

```
GRANT { { SELECT | INSERT | UPDATE | DELETE | TRUNCATE | REFERENCES | TRIGGER }
    [,...] | ALL [ PRIVILEGES ] }
    ON { [ TABLE ] table_name [, ...]
         | ALL TABLES IN SCHEMA schema_name [, ...] }
    TO { [ GROUP ] role_name | PUBLIC } [, ...] [ WITH GRANT OPTION ] 
```

新的`ALL TABLES IN SCHEMA`部分是你缺少的部分。

另外：在您的问题中设置数据库级别的权限对您没有帮助：您将“仅”设置数据库的权限，而不是任何“包含”的东西，如表。相关部分：

```
GRANT { { CREATE | CONNECT | TEMPORARY | TEMP } [,...] | ALL [ PRIVILEGES ] }
    ON DATABASE dbname [, ...]
    TO { [ GROUP ] rolename | PUBLIC } [, ...] [ WITH GRANT OPTION ] 
```

这意味着您只能设置`CREATE`,`CONNECT`和`TEMP`数据库本身的权限，但不能设置`SELECT`,`INSERT`等等。

* * *

到目前为止，坏的东西。您*可以做*以下事情：

*   通过授予角色而不是用户的权限来减少权限管理的数量。然后将角色添加到各个用户。创建新表时，您只需要调整一两个角色，而不需要调整数百个用户。

*   查询系统目录并创建适当的`GRANT`命令。将它们保存到文件中并执行该文件。这应该让你更容易启动。

这样的查询可能如下所示：

```
select 'GRANT ALL ON ' || table_schema || '.' || table_name ||' to my_group;' 
from information_schema.tables 
where 
    table_type = 'BASE TABLE' and 
    table_schema not in ('pg_catalog', 'information_schema'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T14:08:27.727

PostgreSQL 中的授权不是递归的；数据库上的a`GRANT`设置对数据库对象的权限，但不影响包含的模式或其表、视图、函数等。

授予`ALL PRIVELEGES`数据库 grants和`CREATE`权限。`CONNECT``TEMPORARY`

请参阅`\h GRANT`psql 或[8.4](http://www.postgresql.org/docs/8.4/static/sql-grant.html)[中的文档`GRANT`](http://www.postgresql.org/docs/8.4/static/sql-grant.html)，以了解以下内容`ALL PRIVILEGES`的含义`DATABASE`：

```
GRANT { { CREATE | CONNECT | TEMPORARY | TEMP } [, ...] | ALL [ PRIVILEGES ] }
    ON DATABASE database_name [, ...]
    TO { [ GROUP ] role_name | PUBLIC } [, ...] [ WITH GRANT OPTION ] 
```

有可用的 plpgsql 函数和各种 3rd 方脚本，可`pg_catalog`用于`information_schema`动态构建`GRANT`和递归设置权限。搜索“postgresql 递归授权”。

这些不会帮助您设置*新*表的默认访问权限。PostgreSQL 确实有[ALTER DEFAULT PRIVILEGES](http://www.postgresql.org/docs/current/static/sql-alterdefaultprivileges.html)允许您为新表设置默认表权限，但它仅在 Pg 9.1 和更高版本中受支持。`GRANT`在旧版本中或在创建表后设置权限时，每个表都需要显式s。

正如您所指出的，较新的版本具有通过 进行多次授权的功能[`GRANT ... ALL TABLES`](http://www.postgresql.org/docs/current/static/sql-grant.html)，但是您的问题特定于 8.4。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T14:09:26.887

我相信你不能那样做。但是您可以使用信息模式来生成授权，因此您不必为 10,000 个表手动执行此操作。请参阅下面的链接以获取相关示例，并且该站点链接到 easy 非常有用的信息。

[http://www.postgresonline.com/journal/archives/30-DML-to-generate-DDL-and-DCL-Making-structural-and-Permission-changes-to-multiple-tables.html](http://www.postgresonline.com/journal/archives/30-DML-to-generate-DDL-and-DCL-Making-structural-and-Permission-changes-to-multiple-tables.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-30T08:02:29.373

如果您有另一个拥有 DML 权限的用户，它可以在 postgresql 8.x/9.x 中使用：

```
grant <userWithDMLPrivileges> to testuser; 
```

希望能帮助到你。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-14T22:36:50.810

在所有表上添加所有特权：

```
GRANT ALL PRIVILEGES ON ALL TABLES IN SCHEMA public TO [username]; 
```

# facebook - 我想知道Facebook的算法语言是什么

> ID：11599539
> 
> 赞同：-1
> 
> 时间：2012-07-22T10:32:56.250
> 
> 标签：facebook

facebook 使用哪种语言作为他们的朋友推荐系统？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-22T10:50:59.830

我不会说这有什么特别的。可能 PHP 是用他们的[Hip-Hop](http://developers.facebook.com/blog/post/2010/02/02/hiphop-for-php--move-fast/)编译器编译的。然后，当您访问 Facebook 时，他们会向您展示他们的一些最新计算，并启动一个新的后台任务来生成新的计算。

# ruby-on-rails - 从 Rails 中的关联中删除对象

> ID：11599541
> 
> 赞同：1
> 
> 时间：2012-07-22T10:33:05.797
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在学习 Rails，并且正在阅读《Beginning Rails 3》一书。当你有一个`has_many`关联时，你会自动接收方法。

假设用户有很多文章。

```
user.articles.delete(article) 
```

现在该行仅将文章的外键设置为“NULL”。如果您希望文章从数据库中消失，您还必须销毁/删除文章是否正确，或者是否有一种方法可以同时做到这一点？

如果您在删除关联之前销毁与用户有关系的文章会发生什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T10:54:14.357

`delete`和之间有一些区别`destroy`。

删除方法本质上是删除一行..就是这样..

另一方面，`destroy`允许您有更多选择：

*   它将检查任何回调，例如 before_delete，或模型上指定的任何依赖项。
*   它还将把刚刚被删除的对象保留在内存中；因此，它允许您留言，例如：“Article #{article.id} 已删除！！”</li>
*   以及您问题的答案：它将删除与该对象关联的所有子对象。

所以，而不是

```
user.articles.delete(article) 
```

您可以使用

```
user.articles.destroy(article) 
```

这样，您将防止数据库上出现任何孤立行。

# pthreads - 如何将程序的openmp版本转换为pthreads版本？

> ID：11599542
> 
> 赞同：0
> 
> 时间：2012-07-22T10:33:59.400
> 
> 标签：pthreads, openmp

是否有任何工具或应用程序可以将 openmp 转换为 pthreads 程序？请告诉我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T09:06:20.690

有[玫瑰编译器](http://rosecompiler.org/)。

它可以工作，但编译起来相当复杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T11:45:06.007

我不知道并且我不相信这是可能的，因为为了产生一个工作和可扩展的并行程序所必需的东西是无限的可能性。

由于每种编程模型（如 pthread 和 OpenMP）都有其特殊的功能和缺陷，因此几乎不可能自动化此过程。

利用这个机会在手动转换程序的同时增强您的程序！

# php - CodeIgniter App 受损，目录中出现奇怪的 dat 文件

> ID：11599546
> 
> 赞同：1
> 
> 时间：2012-07-22T10:34:35.543
> 
> 标签：php, security, codeigniter

为客户解决网站入侵问题。Guy 有一个 CodeIgniter 应用程序，我起初以为它会重定向到一个制药垃圾邮件站点。进一步调查显示，在处理网站的搜索功能后，该应用程序以某种方式创建了一个 quickstart.dat 文件并将其放置在服务器的顶级目录中，甚至不是 webroot 目录。

此 dat 文件填充了导致该站点呈现 pharma 垃圾邮件内容的确切 html。不幸的是，我对 CodeIgniter 应用程序的了解还不够，无法确定这是如何发生的。我查看了 /application/controllers/search.php 文件和 /application/views/search.php 文件，如果我正确解释 CodeIgniter 文档，它们负责处理 URL 中带有“搜索”的任何请求?

这两个文件都没有任何可疑之处。所以我开始 grepping 整个目录，但仍然没有骰子。

谁能指出我正确的方向？我错过了什么？CodeIgniter 的哪个部分负责将 dat 文件放在主目录中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T19:54:52.230

有很多事情可能发生。我将尝试列出我对可能发生的事情的所有想法。

**您可以尝试以下方法：**

*   检查 .htaccess 文件是否包含任何内容
*   检查处理重定向的 codeigniter 中的路由文件，它位于 /application/config/routes.php 并检查那里是否有任何重定向。
*   使用命令行搜索所有 php 文件并查找“base64_decode(”
*   也许删除 .dat 文件？

您还可以尝试搜索具有通常用于混淆代码的大哈希字符串的文件

```
find ./ -name "*.php" -type f -print0 | xargs -0 grep '[a-zA-Z0-9]\{400\}' 
```

# ios - iOS >> 如何安排与用户操作无关的基于时间的事件

> ID：11599548
> 
> 赞同：0
> 
> 时间：2012-07-22T10:35:06.187
> 
> 标签：ios, benchmarking

在我的应用程序中，我希望在某个视图中有一个在 UIImageView 上更改的图像列表；类似于自动“演示”的东西。

我正在寻找一种方法来执行这种“自动化”。这个想法是我将有一个图像列表，每个图像还将有一个时间属性>>类似于“Image_1”+“00:00”、“Image_2”+“00:27”、“Image_3”+“01” :04" 等...我想我应该使用 NSDictionary 来保存文件名和时间。

我唯一不清楚的是**，我应该使用哪种方法来“捕获”来自 NSDictionary 的时间属性并将它们作为“事件”关联起来，这些“事件”**运行我的代码来处理图像更改。

任何人？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T10:57:19.207

您可以设置 a[`NSTimer`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nstimer_Class/Reference/NSTimer.html)在所需时间后触发，或者您可以使用[`– performSelector:withObject:afterDelay:`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/nsobject_Class/Reference/Reference.html#//apple_ref/occ/instm/NSObject/performSelector%3awithObject%3aafterDelay%3a). `NSTimer`可能是最好的选择，因为如果视图消失，您可以取消它们。

1.  创建一个计时器以在第一次延迟后触发。
2.  当计时器触发时，更改图像（如果您愿意，可以使用漂亮的过渡）并为下一次延迟设置计时器。
3.  如果视图被移除，则取消当前计时器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T10:56:47.977

我会使用`NSTimer`您可以使用当前日期将其设置为在设定的时间或间隔触发。Id 让 NSTimer 调用一个更改图像的方法。

```
- (id)initWithFireDate:(NSDate *)date interval:(NSTimeInterval)seconds target:(id)target selector:(SEL)aSelector userInfo:(id)userInfo repeats:(BOOL)repeats 
```

这种声明方法应该可以解决问题

[NSTimer 开发者文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nstimer_Class/Reference/NSTimer.html)

希望这可以帮助

# prolog - 分层无向图表示

> ID：11599549
> 
> 赞同：1
> 
> 时间：2012-07-22T10:35:45.723
> 
> 标签：prolog, graph-theory

我需要像这样表示图表：

```
Graph = graph([Object1,Object2,Object3,Object4],
              [arc(Object1,Object2,connected),
               arc(Object2,Object4,connected),
               arc(Object3,Object4,connected),
               arc(Object1,Object3,connected),
               arc(Object2,Object3,parallel),
               arc(Object1,Object4,parallel),
               arc(Object2,Object3,similar_size),
               arc(Object1,Object4,similar_size)]) 
```

我对代码没有限制，但是我会坚持这种表示，因为它适合我已经编码的所有其他结构。

我的意思是无向图，其中顶点是一些对象，而边表示它们之间的无向关系。为了在这个特定示例中为您提供更多背景知识，我试图表示一个矩形，因此对象是它的四个边（段）。这些线段的表示方式与使用顶点等相同。关键是构建图形的层次结构，该层次结构将表示同一级别上的对象之间的约束。

问题在于边缘的表示。表示弧 (a,b) 的最明显方法是将 (a,b) 和 (b,a) 同时放入程序中。然而，这使我的程序以指数级的冗余数据淹没了我的程序。例如，如果我有顶点 a、b、c、d。我可以构建段 (a,b),(a,c),(a,d),(b,c),(b,d),(c,d)。但我也得到（b，a），（c，a）等等。在这一点上它不是问题。但后来我建立了一个矩形。它可以由段 (a,b),(b,c),(c,d),(a,d) 构建。我想得到答案——有一个矩形。但是，您可以计算我得到了这个矩形的多少组合。计算也需要太多时间，显然我不想在矩形级别完成。

我考虑过对元素进行排序。我可以对段中的顶点进行排序。但是，如果我想对矩形中的段进行排序，则约束不再有效。图变为有向图。例如，考虑到前两个关系，假设我们有弧 (a,b) 和 (a,c)。如果弧没有按我的意愿排序，程序会回答：arc(b,a,connected),arc(a,c,connected) 匹配：Object1=b,Object2=a,Object4=c。如果我对元素进行排序，它将不再有效，因为我无法尝试 arc(b,a,connected) 和 arc(a,b,connected)。只有第二个。我会坚持排序，但我不知道如何解决最后一个问题。

希望我把这一切都说得很清楚。我更愿意尽可能接近我已有的代表和想法。但也非常欢迎全新的。我不期望有任何确切的答案，而是将我指向正确的方向或建议一些特定的阅读内容，因为我对 Prolog 还是很陌生，也许这个问题并不像我想的那么罕见。

从昨天开始，我一直在尝试解决这个问题，但找不到任何简单的答案。我查看了一些离散数学和常见的无向图表示，例如邻接表。如果有任何不清楚的地方，请告诉我——我会尽力提供更多细节。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T12:21:30.557

有趣的问题虽然有点宽泛，因为它没有说明你真正想用弧线、矩形等做什么；只有在某些用途下，表示可能是有效的（时间/空间/优雅）。无论如何，这里有一些想法：

排序
明显的问题是您提到的问题；如果排序对存在，您可以通过引入一个成功的子句来解决它：

```
arc(X,Y):-
    arc_data(X,Y)
  ; arc_data(Y,X). 
```

请注意，您不应**执行**以下操作：

```
arc(a,b).
arc(b,c).
arc(X,Y):-
   arc(Y,X) 
```

因为如果弧不存在，这将导致无限循环。但是，您只能检查第一个 arg 是否大于第二个：

```
arc(a,b).
arc(b,c).
arc(X,Y):-
   compare(>,X,Y),
   arc(Y,X) 
```

这种方法无法解决由于以两种方式表示弧而可能出现的多种解决方案。简单的解决方法是只检查一种解决方案，其中预计只有一种解决方案使用`once/1`：

```
3 ?- arc(X,Y).
X = a,
Y = b ;
X = b,
Y = a.

4 ?- once(arc(X,Y)).
X = a,
Y = b. 
```

当然，当可能有多种解决方案时，您不能这样做。

另一种方法是强制进一步抽象：目前，当您有两个点 ( `a`, ) 时，您可以在检查这些点是否连接后`b`创建弧 (`arc(a,b)`或)。`arc(b,a)`取而代之的是，您应该通过谓词创建弧（也可以检查点是否连接）。好处是您不再直接参与弧的表示，因此可以强制排序（是的，它基本上是面向对象的）：

```
cv_arc(X,Y,Arc):-
      ( arc(X,Y),
        Arc = arc(X,Y))
    ; ( arc(Y,X),
        Arc = arc(Y,X)). 
```

（假设为数据库`arc(a,b)`）：

```
 6 ?- cv_arc(a,b,A).
    A = arc(a, b).

    7 ?- cv_arc(b,a,A).
    A = arc(a, b).

    8 ?- cv_arc(b,c,A).
    false. 
```

当然，您需要对其余对象遵循类似的原则；我假设你正在做这样的事情来找到一个矩形：

```
rectangle(A,B,C,D):-
    arc(A,B),
    arc(B,C),
    arc(C,D),
    arc(D,A). 
```

除了由于弧（已解决）导致的重复之外，这会将 ABCD、DABC 等识别为不同的矩形：

```
28 ?- rectangle(A,B,C,D).
A = a,
B = b,
C = c,
D = d ;
A = b,
B = c,
C = d,
D = a ;
A = c,
B = d,
C = a,
D = b ;
A = d,
B = a,
C = b,
D = c. 
```

我们将再次这样做：

```
rectangle(rectangle(A,B,C,D)):-
    cv_arc(A,B,AB),
    cv_arc(B,C,BC),
    compare(<,AB,BC),
    cv_arc(C,D,CD),
    compare(<,BC,CD),
    cv_arc(D,A,DA),
    compare(<,CD,DA). 
```

并运行`arc(a,b). arc(b,c). arc(c,d). arc(a,d).`：

```
27 ?- rectangle(R).
R = rectangle(a, b, c, d) ;
false. 
```

请注意，如果弧的顺序错误，我们不会重新排序矩形；我们只是失败了。通过这种方式，我们避免了重复的解决方案（如果我们对它们进行排序并将其作为有效矩形接受，我们将有四次相同的矩形），但查找矩形所花费的时间会增加。我们通过在第一个无序的弧处停止搜索而不是创建整个矩形来减少开销。此外，如果对弧进行排序（因为将排序第一个匹配项），开销也会减少。另一方面，如果我们考虑以这种方式搜索所有矩形的复杂性，那么开销并没有那么大。此外，它仅适用于我们只想要第一个矩形的情况；如果我们想要获得更多的解决方案或确保没有其他解决方案，prolog 将搜索整个树，

# android - Android，如何将图像存储在内部存储中？

> ID：11599556
> 
> 赞同：2
> 
> 时间：2012-07-22T10:37:05.963
> 
> 标签：android, bitmap

我想将位图图像存储在内部存储（而不是外部存储）上。我已经编写了这段代码，但似乎有问题。因为当我从 DDMS 下载图像时，我无法打开它。

```
public String writeFileToInternalStorage(Context context, Bitmap outputImage) {

        String fileName = Long.toString(System.currentTimeMillis()) + ".png";

        try {
            OutputStreamWriter osw = new OutputStreamWriter(context.openFileOutput(fileName, Context.MODE_PRIVATE));
            osw.write(outputImage.toString());
            Log.i(TAG, "Image stored at: " + fileName);
        } catch (Exception e) {
            Log.w(TAG, e.toString()); 
            fileName = null;
        } 

        return fileName;
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-22T10:47:51.827

outputImage.toString() 不是图像:) 你放在文件上的不是二进制数据，而是一些字符串！

一种方法是这样的：

```
public String writeFileToInternalStorage(Context context, Bitmap outputImage) {
    String fileName = Long.toString(System.currentTimeMillis()) + ".png";

    final FileOutputStream fos = openFileOutput(fileName, Context.MODE_PRIVATE);
    outputImage.compress(CompressFormat.PNG, 90, fos);
} 
```

我直接在浏览器中编码，可能会有一些语法错误，但代码应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T10:47:23.907

问题是您使用 .toString() 而不是将位图压缩到 FileOutputStream 中：

```
FileOutputStream out = new FileOutputStream(filename);
outputImage.compress(Bitmap.CompressFormat.PNG, 90, out); 
```

内部存储也可以通过上下文检索。

```
File cacheDir = context.getCacheDir(); 
```

# css - CSS3 过渡改变另一个元素的边距

> ID：11599557
> 
> 赞同：1
> 
> 时间：2012-07-22T10:37:43.197
> 
> 标签：css, css-transitions

我有这个 HTML 文档：

```
<div id="c">
    <div class="base">
        <div class="cb" id="red" data-color="Red">
        </div>
    </div>
    <div class="base">
        <div class="cb" id="green" data-color="Green">
        </div>
    </div>
    <div class="base">
        <div class="cb" id="blue" data-color="Blue">
        </div>
    </div>
</div> 
```

这是我的CSS：

```
<style type="text/css">
.cb {
    display: inline-block;
    background-color: #56a100;
    width: 70%;
    height: 70%;
    margin-top: 15%;
    filter: alpha(opacity=50);
    -moz-opacity: 0.5;
    opacity: 0.5;
    -ms-transition: all 0.5s ease;
    -moz-transition: all 0.5s ease;
    -o-transition: all 0.5s ease;
    -webkit-transition: all 0.5s ease;
    transition: all 0.5s ease;
}
.cb:hover {
    display: inline-block;
    filter: alpha(opacity=100);
    -moz-opacity: 1;
    opacity: 1;
    width: 100%;
    height: 100%;
    margin-top: auto;
    -ms-transition: all 0.5s ease;
    -moz-transition: all 0.5s ease;
    -o-transition: all 0.5s ease;
    -webkit-transition: all 0.5s ease;
    transition: all 0.5s ease;
}
.base {
    display: inline-block;
    width: 50px;
    height: 50px;
    margin-left: 5px;
    margin-top: 20px;
    border-style: ridge;
    text-align: center;
    vertical-align: central;
}
</style> 
```

​ 但是当我将鼠标放在其中一个`.cb`元素上时，其他元素就会下降！[你可以在这里](http://jsfiddle.net/ahmadalli/pTCFL/1/)看到演示。有人如何阻止其他元素下降吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T10:55:10.680

`display: inline-block;`从**.base**类中删除并使其浮动到左侧`float: left;`。这是固定的演示[http://jsfiddle.net/pTCFL/2/](http://jsfiddle.net/pTCFL/2/)

# scala - 过滤 Scala Multimap 并输出为元组列表

> ID：11599564
> 
> 赞同：2
> 
> 时间：2012-07-22T10:39:22.510
> 
> 标签：scala, functional-programming, tuples, multimap

我有一个使用 multimap 特征的地图，所以
`val multiMap = new HashMap[Foo, Set[Bar]] with MultiMap[Foo, Bar]`
我想结合过滤特定值的地图
`multiMap.values.filter(bar => barCondition)`
与将匹配结果展平为形式的元组列表
`val fooBarPairs: List[(Foo, Bar)]`
什么是这样做的惯用方式？我希望 Scala 可以提供类似变形的东西来做到这一点而无需循环，但作为一个完整的新手，我不确定我的选择是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T11:13:58.353

这是一个例子：

```
import collection.mutable.{HashMap, MultiMap, Set}

val mm = new HashMap[String, Set[Int]] with MultiMap[String, Int]
mm.addBinding("One", 1).addBinding("One",11).addBinding("Two",22).
  addBinding("Two",222)
  // mm.type = Map(Two -> Set(22, 222), One -> Set(1, 11)) 
```

我认为获得所需内容的最简单方法是使用 for 表达式：

```
for {
  (str, xs) <- mm.toSeq
  x         <- xs
  if x > 10
} yield (str, x)      // = ArrayBuffer((Two,222), (Two,22), (One,11)) 
```

您需要`.toSeq`or 输出类型将是 a `Map`，这意味着每个映射都被后续元素覆盖。`toList`如果您特别需要，请在此输出上使用`List`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T11:18:49.427

这是我认为你想要做的一个例子：

```
scala> mm
res21: scala.collection.mutable.HashMap[String,scala.collection.mutable.Set[Int]] with scala.collection.mutable.MultiMap[String,Int]
= Map(two -> Set(6, 4, 5), one -> Set(2, 1, 3))

scala> mm.toList.flatMap(pair =>
         pair._2.toList.flatMap(bar =>
           if (bar%2==0)
             Some((pair._1, bar))
           else
             None))

res22: List[(String, Int)] = List((two,6), (two,4), (one,2)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T12:23:17.357

这是另一个更简洁的解决方案：

```
import collection.mutable.{HashMap, MultiMap, Set}

val mm = new HashMap[String, Set[Int]] with MultiMap[String, Int]
val f = (i: Int) => i > 10

mm.addBinding("One", 1)
  .addBinding("One",11)
  .addBinding("Two",22)
  .addBinding("Two",222)
  /* Map(Two -> Set(22, 222), One -> Set(1, 11)) */

mm.map{case (k, vs) => vs.filter(f).map((k, _))}.flatten
  /* ArrayBuffer((Two,222), (Two,22), (One,11)) */ 
```

# sql - 读取表中的 XML

> ID：11599565
> 
> 赞同：2
> 
> 时间：2012-07-22T10:39:26.530
> 
> 标签：sql, xml, tsql, xpath, xquery

我有一个存储过程，它作为参数传递 XML，然后我必须读取该 XML 并进行一些更新。XML的格式是

```
<Requests>
    <RequestReference>R12345</RequestReference>
    <Inventory InventoryId="1" InventoryName="I1">
        <RequestCodes>
            <Code>AAA</Code>
        </RequestCodes>
    </Inventory>
    <Inventory InventoryId="2" InventoryName="I2">
        <RequestCodes>
            <Code>BBB</Code>
            <Code>CCC</Code>
        </RequestCodes>
    </Inventory>
    <Inventory InventoryId="3" InventoryName="I3">
        <RequestCodes>
            <Code>DDD</Code>
            <Code>EEE</Code>
            <Code>FFF</Code>
        </RequestCodes>
    </Inventory>
</Requests> 
```

现在我需要在表中读取 XML

```
RequestReference    InventoryId InventoryName           Code
R12345                    1           I1            AAA
R12345                    2           I2            BBB
R12345                    2           I2            CCC
R12345                    3           I3            DDD
R12345                    3           I3            EEE
R12345                    3           I3            FFF 
```

我正在尝试类似的东西

```
SELECT 
    T.Item.value('@InventoryId', 'VARCHAR(3)')  AS InventoryId,
    T.Item.value('@InventoryName', 'VARCHAR(3)')    AS InventoryName,
    T.Item.value('RequestCodes[1]/Code[1]', 'VARCHAR(5)')   AS Code
FROM   
   @xmlDoc.nodes('Requests/Inventory') 
   AS T(Item) 
```

它产生的结果是

```
InventoryId InventoryName   Code
1                 I1    AAA
2                 I2    BBB
3                 I3    DDD 
```

所以这似乎有效，但没有完全产生预期的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T11:16:41.467

利用：

```
select *
from
(
SELECT
    T.Item.value('../../../RequestReference[1]', 'VARCHAR(20)')  AS RequestReference,
    T.Item.value('../../@InventoryId', 'VARCHAR(3)')  AS InventoryId,
    T.Item.value('../../@InventoryName', 'VARCHAR(3)')    AS InventoryName,
    T.Item.value('.', 'VARCHAR(5)')   AS Code
FROM   
   @xmlDoc.nodes('//Code') 
   AS T(Item)
)t
order by InventoryId, InventoryName, Code 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T11:22:58.167

试试这个。你可以使用外部或交叉应用

```
select
--ref.query('.'),
rr.rr.value('(.)[1]','varchar(20)') as RequestReference,
--inv.inv.query('.'),
inv.inv.value('(./@InventoryId)[1]','int') as InventoryId ,
inv.inv.value('(./@InventoryName)[1]','Varchar(20)') as InventoryName ,
rc.rc.value('(.)[1]','varchar(20)') as Codes
from 
@xml.nodes('Requests') rq(ref)
cross apply rq.ref.nodes('./Inventory') inv(inv)
cross apply inv.inv.nodes('./RequestCodes/Code') rc(rc)
cross apply rq.ref.nodes('./RequestReference') rr(rr) 
```

# javascript - 用于循环通过 JSON 格式的字符串与 JSON.parse

> ID：11599570
> 
> 赞同：0
> 
> 时间：2012-07-22T10:40:04.533
> 
> 标签：javascript, json, node.js

我有一个有效的 JSON 字符串存储在大约 1MB 的 cassandra 列中，但可以增长到（最坏的情况）50MB，并且可以随时被 1000 多人检索。检索字符串时，调用 JSON.parse 将字符串转换为 JSON 对象，然后在节点中执行任何操作

大多数时候，操作是拉出单个键：值。

必须首先将“整个”字符串转换为对象似乎效率低下，只提取一个键：值，所以我认为最好只循环遍历字符串，直到找到所需的键.

然而，这带来了挑战，例如嵌套对象、转义字符等

> 1) 是否有一个简单的 JSON 字符串解析器可以遍历 JSON 字符串？
> 
> 2）另一种方法是将JSON对象存储在memcache中，它确实意味着重复数据（cassandra和memcache）但格式不同（分别为字符串和对象），这是更有效还是有点多？
> 
> 3）我看到了[clarinet](http://writings.nunojob.com/2011/12/clarinet-sax-based-evented-streaming-json-parser-in-javascript-for-the-browser-and-nodejs.html)，但作者的测试表明 JSON.parse 仍然在大文件上执行 clarinet
> 
> 4）还有其他想法吗？

# php - Access-Control-Allow-Origin 未显示在 codeigniter 的响应标头中

> ID：11599573
> 
> 赞同：3
> 
> 时间：2012-07-22T10:40:19.067
> 
> 标签：php, ajax, codeigniter, xmlhttprequest

我的 Codeigniter 文件说

```
$CI->output->set_header("Access-Control-Allow-Origin: *");
$CI->output->set_header("Access-Control-Expose-Headers: Access-Control-Allow-Origin");
$CI->output->set_status_header(200);
$CI->output->set_content_type('application/json');
echo json_encode(array("city" => "dhaka")); 
```

但我得到的http响应是：

```
Request URL:http://localhost/index.php/location/city
Request Method:POST
Status Code:200 OK

Connection:Keep-Alive
Content-Length:16
Content-Type:text/html
Date:Sun, 22 Jul 2012 10:27:32 GMT
Keep-Alive:timeout=5, max=100
Server:Apache/2.2.21 (Unix) mod_ssl/2.2.21 OpenSSL/0.9.8r DAV/2 PHP/5.3.6
X-Powered-By:PHP/5.3.6 
```

即使`Access-Control-Allow-Origin`包含`Access-Control-Expose-Headers: Access-Control-Allow-Origin`. 我有关此标头的信息来源来自[Mozilla 开发者网站](https://developer.mozilla.org/en/http_access_control#Access-Control-Allow-Origin)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T02:03:55.837

事实证明，只有当我通过 PHP 语法`header()`而不是 codeigniter 语法设置标头时，它才对我有用`$CI->output->set_header()`。这很可悲。

感谢[@Yan](https://stackoverflow.com/questions/11599573/access-control-allow-origin-is-not-showing-up-in-response-headers-from-codeignit/13537626#comment15353383_11599573)在本主题***问题上的第一条评论***

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T20:47:18.730

如果您仔细观察，您还会注意到内容类型不同：它是`text/html`，而您正在请求`application/json`。发生这种情况是因为当您正确准备标题时，您从未真正输出它们。据我所知，您至少可以通过两种方式做到这一点：

1.  使用输出库的 set_output 函数一次输出所有内容。

    ```
    $json = json_encode(array("city" => "dhaka"));

    $this->output->set_header("Access-Control-Allow-Origin: *");
    $this->output->set_header("Access-Control-Expose-Headers: Access-Control-Allow-Origin");
    $this->output->set_status_header(200);
    $this->output->set_content_type('application/json');

    $this->output->set_output($json); 
    ```

2.  调用 output-library 的 _display() 函数，首先输出正确的标头，然后将您的 json 对象附加到 echo。

    ```
    $this->output->set_header("Access-Control-Allow-Origin: *");
    $this->output->set_header("Access-Control-Expose-Headers: Access-Control-Allow-Origin");
    $this->output->set_status_header(200);
    $this->output->set_content_type('application/json');
    $this->output->_display();

    echo json_encode(array("city" => "dhaka")); 
    ```

    > 此函数将最终的输出数据连同任何服务器标头和配置文件数据一起发送到浏览器。（来自 CI/system/core/Output.php 第 316 行）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T09:52:45.020

after some digging around, i found that $CI->output->set_header() does work - **when there isn't an error or exception**.

When there is an error or exception that CI can catch, the output & view classes are bypassed completely and the appropriate error pages are rendered with `include(VIEWPATH.'errors/'.$template.'.php')` and headers sent with `set_status_header($status_code)` (located at `<CI System Dir>/core/Common.php`)

see `<CI System Dir>/core/Exceptions.php`

here's a sample:

```
 /**
     * General Error Page
     *
     * Takes an error message as input (either as a string or an array)
     * and displays it using the specified template.
     *
     * @param   string      $heading    Page heading
     * @param   string|string[] $message    Error message
     * @param   string      $template   Template name
     * @param   int     $status_code    (default: 500)
     *
     * @return  string  Error page output
     */
    public function show_error($heading, $message, $template = 'error_general', $status_code = 500)
    {
        set_status_header($status_code);

        $message = '<p>'.implode('</p><p>', is_array($message) ? $message : array($message)).'</p>';

        if (ob_get_level() > $this->ob_level + 1)
        {
            ob_end_flush();
        }
        ob_start();
        include(VIEWPATH.'errors/'.$template.'.php');
        $buffer = ob_get_contents();
        ob_end_clean();
        return $buffer;
    } 
```

it's annoying in that it makes DRY less straight forward. to work around it, i suggest you create a helper function, for example (untested):

```
function my_generate_headers($headers=array(),$useOutputClass=true)
{
    if(is_array($headers) && count($headers)<1) return false;

    foreach($headers AS $eHeader)
    {
        ($useOutputClass) ? 
                    get_instance()->output->set_header('X-Powered-By: C-C-C-Cocaine') : 
                    @header('X-Powered-By: Errors',true);
    }

    return true;
} 
```

use that function in your different error pages at `<CI Views>/errors/error_*.php` as well as in your controllers.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-26T18:18:15.177

对我有用的是：

```
$this->output
  ->set_header('Access-Control-Allow-Origin: http://localhost:4567')
  ->set_header('Content-type: application/json')
  ->set_status_header(200)
  ->set_output( json_encode($to_encode) )
  ->_display(); 
```

# iphone - Cocos2d，需要在我的实现文件中包含协议

> ID：11599575
> 
> 赞同：-1
> 
> 时间：2012-07-22T10:40:24.420
> 
> 标签：iphone, objective-c, ios, xcode, cocos2d-iphone

所以基本上我的接口中有一个协议，我需要将其包含在我的实现中，因为我收到了一个不完整的错误，因此无法继续。

. h 文件

```
@interface waveLayer1 : CCLayer <GameKitHelperProtocol>
{
    ...
} 
```

.m 文件

```
@implementation waveLayer1 
```

GameKitHelper.h 文件

```
#import "cocos2d.h"
#import <GameKit/GameKit.h>
@protocol GameKitHelperProtocol
-(void) onLocalPlayerAuthenticationChanged;
-(void) onFriendListReceived:   (NSArray*)friends;
-(void) onPlayerInfoReceived:(NSArray*)players;
@end

@interface GameKitHelper : NSObject {
    id<GameKitHelperProtocol> delegate; bool isGameCenterAvailable; NSError* lastError;
}
@property (nonatomic, retain) id<GameKitHelperProtocol> delegate;
@property (nonatomic, readonly) bool isGameCenterAvailable; @property (nonatomic,    readonly) NSError* lastError;

+(GameKitHelper*) sharedGameKitHelper;
// Player authentication, info
-(void) authenticateLocalPlayer;
-(void) getLocalPlayerFriends;
-(void) getPlayerInfo:(NSArray*)players; 
@end 
```

错误是“协议中的方法未实现”我有更多文件可以显示，但为了节省空间，我决定看看你是否可以用这些代码帮助我解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T10:45:01.270

```
@interface waveLayer1 : CCLayer <GameKitHelperProtocol> 
```

这表示“wavelayer1”实现了协议“GameKitHelperProtocol”。

```
Method in protocol not implemented 
```

表示协议中声明的方法尚未实现。您可能忘记实现“GameKitHelperProtocol”方法之一，这会使您的类不实现该协议，这违反了您所做的声明，从而导致编译器输出错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T10:45:28.093

当您声明一个类采用协议时，您必须为该协议中定义的所有必需方法编写实现。所以在这种情况下，您需要添加在`GameKitHelperProtocol`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T10:45:52.523

在您的 waveLayer1 类中实现这 3 个方法。

```
-(void) onLocalPlayerAuthenticationChanged;
-(void) onFriendListReceived:(NSArray*)friends;
-(void) onPlayerInfoReceived:(NSArray*)players; 
```

# javascript - 查看 jQuery 文件完全加载然后执行相关函数的方法

> ID：11599577
> 
> 赞同：0
> 
> 时间：2012-07-22T10:40:43.720
> 
> 标签：javascript, jquery

查看 jQuery 文件完全加载然后执行相关函数的方法

我只想在加载了与该 div 相关的所有 jQuery 文件时才显示我的 div。

文档准备和窗口加载功能不起作用。

如何编写一个条件函数，您可以在其中检查是否所有 jQuery 都已加载，然后显示 div .... 我在外部 js 文件中调用所有 jQuery 文件，（基本上我正在尝试为我的客户端创建一个插件我的 external.js 文件将在我的服务器上远程工作）。

我的 external.js 文件是这样的：

```
 if (typeof jQuery === "undefined") {
  var script = document.createElement('script');
  script.src = 'js/jquery-1.7.1.min.js';
  script.type = 'text/javascript';
  document.getElementsByTagName('head')[0].appendChild(script);

  }

  if (typeof jQuery === "undefined") {
  var script = document.createElement('script');
  script.src = 'js/fancybox.js';
  script.type = 'text/javascript';
  document.getElementsByTagName('head')[0].appendChild(script);
 }

 document.ready = function() {
 $(document).ready(function(){

 $("#addimage").html("<a id='fancybox' href='large"+clientID+".jpg'><img border=0 src='thumb"+clientID+".jpg'/></a>");

 }
 }); 
```

所以我希望这个 addimage div 只工作我的 jquery 文件完全加载

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T10:47:15.787

利用

```
if (jQuery) {  
  // jQuery is loaded  
} else {
  // jQuery is not loaded
} 
```

# objective-c - 更改显示的窗口 (Mac - Cocoa)

> ID：11599580
> 
> 赞同：1
> 
> 时间：2012-07-22T10:41:06.130
> 
> 标签：objective-c, xcode, macos, cocoa

抱歉，如果这是一个非常基本的问题，但我一般是 XCode 和 Mac 开发的新手。我想知道如何让一个窗口更改其内容，而不必关闭并打开一个新窗口。例如：

```
- (IBAction)handlelock:(id)sender {
  [_window orderOut:sender];
  [_loginwindow makeKeyAndOrderFront:sender];
} 
```

但是不是关闭_window并打开_login窗口，有没有办法让_window在我单击按钮时显示_login的内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T15:51:01.420

Or, just swap the window's content views:

```
- (IBAction)handlelock:(id)sender {
     NSView *previousContentView = _window.contentView;
     _window.contentView = _loginwindow.contentView;
     _loginwindow.contentView = previousContentView; // just store it in the other window
} 
```

Usually you wouldn't need multiple windows for this though, you would just have another view and swap it in.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T15:31:22.797

有几种方法可以做到这一点。您可以在 xib 文件中有一个单独的视图，其中包含您在登录窗口中想要的内容，然后在您的窗口上调用 setContentView:loginView ，这会将旧视图换成新视图。如果您希望能够切换回原始视图，您可能希望拥有一个指向原始视图的属性。

另一种方法是使用选项卡视图——如果你不喜欢选项卡视图的外观，有一个看起来不像有选项卡的表格选项卡视图——你可以在一个选项卡中有一个视图，并且在另一个登录视图。

# database - 连接.执行

> ID：11599583
> 
> 赞同：0
> 
> 时间：2012-07-22T10:41:49.073
> 
> 标签：database, vb.net, connection

```
`Dim con1 As New ADODB.Connection
Dim rs1 As New ADODB.Recordset
Dim sql1 As String
sql1 = "Update Balance set Balance_Amt = (Balance_Amt + " & a & ") where Company = " & Combo3.Text
con1.Execute (sql1) 
```

“谁能说出为什么这段代码不起作用？它说一个或多个必需参数没有值”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T10:54:49.820

我猜直接的问题是 SQL 片段

```
where Company = value 
```

是无效的 SQL。应该引用：

```
where Company = 'value' 
```

但是你真的应该使用 SQL 参数。

1.  我会避免这个问题，因为参数会在必要时自动引用。
2.  它会使代码更容易阅读。
3.  它不会受到 SQL 注入攻击。

例如

```
Using cmd = new SqlCommand("UPDATE Balance SET Balance_Amt = (Balance_Amt + @a) WHERE Company=@company", con1)
    cmd.Parameters.AddWithValue("@a", a)
    cmd.Parameters.AddWithValue("@company", company)
    cmd.ExecuteNonQuery()
End Using 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T10:54:02.533

打印出sql语句，看看是否ok，复制/粘贴到sql管理工作室。我认为您在字符串 Combo3.Text 周围缺少撇号。

还要考虑如果 Combo3.Text 包含它会导致什么 sql

```
'a'; delete from Balance 
```

# android - 在 Android 中的屏幕上打印内容

> ID：11599586
> 
> 赞同：0
> 
> 时间：2012-07-22T10:42:13.217
> 
> 标签：android, system.printing

好的，我正在开发牛和公牛游戏，我很困惑如何向用户打印消息，我不想使用对话框或敬酒！据我所知，唯一的方法是更新 textviews ，这是唯一的其他选择吗？或者我可以用别的东西在屏幕上显示东西吗？我的代码到现在：

```
public class Play extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.play);
    CowsNBulls();
}

private void CowsNBulls() {
    // TODO Auto-generated method stub
    int target=0;
    final String targetStr = target +"";
    boolean guessed= false;
    final int guess;
    final String Sguess;
        System.out.print("Guess a 4-digit number with no duplicate digits");
        EditText guess1 = (EditText)findViewById(R.id.etGuess);
        Sguess=guess1.getText().toString();
        Button ent = (Button) findViewById(R.id.bEnter);
        guess= Integer.parseInt(Sguess);
        ent.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                int guesses=0;
                int bulls=0;
                int cows=0;
                if(hasDupes(guess)||guess < 1000){
                    guesses++;
                    String guessStr = guess + "";
                    for(int i= 0;i < 4;i++){
                        if(guessStr.charAt(i) ==   targetStr.charAt(i)){
                            bulls++;
                        }else if(targetStr.contains(guessStr.charAt(i)+"")){
                            cows++;
                        }}}}}); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T10:44:34.873

TextView 或 EditText 将是您唯一的选择。您必须将其附加到布局，甚至可能将其包装在 ScrollView 中，以便为足够的语句腾出空间。

# ruby-on-rails - Ruby on Rails ActiveRecord，其中属性不为空

> ID：11599587
> 
> 赞同：22
> 
> 时间：2012-07-22T10:42:45.527
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我正在尝试查找指定属性不为空或空白的记录。由于它是一个字符串，它在数据库中不是零。

```
Post.where(:sourceurl != '') 
```

以上似乎应该可以工作，但我仍然会在 source_url 属性为空的地方返回记录。这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2015-11-06T22:24:19.800

ActiveRecord（我认为在 Rails 3 和 4 中）允许通过将数组作为参数传递来检查多个条件。因此，如果您想同时检查`nil`和`''`，您可以使用：

```
where(sourceurl: [nil, '']) 
```

这将生成一个 SQL 条件，如：

```
(sourceurl IS NULL OR sourceurl = '') 
```

在 Rails 4 中，您可以使用 .not 检查否定条件，因此对于原始问题，您可以这样做：

```
Post.where.not(sourceurl: [nil, '']) 
```

.not 有一点魔力，使它有利于纯 SQL 查询，因为它可以跨数据库工作，不会自动执行 NOT NULL 查询，还有一些其他事情，如下所述：[where.not explain](https://robots.thoughtbot.com/activerecords-wherenot)

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-07-22T12:27:04.747

试试这个

```
Post.where("sourceurl <> ''") 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2014-09-19T02:44:33.760

**导轨 4**

活动记录条件：

```
where.not(value: '') 
```

范围：

```
scope :myscope, -> { where.not(value: '') } 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-22T14:12:51.633

您的代码不起作用的原因是您的参数`#where`是

```
:sourceurl != '' 
```

计算结果为`true`，因为`:sourceurl`（符号）不等于`''`（空字符串）。因此您的代码与

```
Post.where(true) 
```

为了详细说明 abhas 的答案，MySQL 和 PostgreSQL 都将接受`!=`并`<>`作为等效项。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-22T12:20:34.817

如果该字段在您的数据库中默认为 NULL，我认为解决它的更好方法是使用普通 SQL：

```
Post.where("sourceurl is not null") 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-06-11T11:12:55.450

在 postgresql 中捕捉空字符串和 nil 你可以这样做：

```
where("coalesce(sourceurl, '') != ''") 
```

# cocos2d-iphone - cocos2d v2.0 升级&RootViewController

> ID：11599588
> 
> 赞同：4
> 
> 时间：2012-07-22T10:42:50.127
> 
> 标签：cocos2d-iphone

我目前正在将我的 cocos2d 应用程序从 0.99 升级到 2.0。该应用程序使用 ZBarSDK 进行二维码扫描，集成如下：

```
// present and release the controller
[[RootViewController sharedInstance] presentModalViewController: reader animated: YES]; 
```

但是，这不适用于新版本的 cocos2d。我应该改变什么才能使它与 cocos2d 2.0 一起工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T10:48:07.593

使用此代码：

```
AppController *app = (AppController*) [[UIApplication sharedApplication] delegate];

[app.navController presentModalViewController: reader animated:YES]; 
```

# java - 如何通过 GreenDAO 建立双向的一对一关系？

> ID：11599589
> 
> 赞同：4
> 
> 时间：2012-07-22T10:42:56.427
> 
> 标签：java, android, orm, greendao

我将 ORM GreenDAO 用于我的 Android 应用程序的 DAL 层。我在两个表之间存在一对一关系的问题。例如：

```
Entity page = schema.addEntity("Page");
Entity bookmark = schema.addEntity("Bookmark");

Property pageIdProperty = bookmark.addLongProperty("pageId").getProperty();

bookmark.addToOne(page, pageIdProperty); // any bookmark related to a page
page.addToOne(bookmark, pageIdProperty); // any page can has a bookmark 
```

这种关系是错误的吗？

当我定义它时，我无法`page.getBookmark()`在**页面类中调用**

如果这是真的，有什么办法可以使它成为一对一关系的双向？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T12:22:34.483

首先，一对一关系的良好用例很少见。你确定这不是一对多吗？如果您仍然认为这是一对一的：将两个实体合并为一个是否有意义？

除此之外，bookmark.addToOne(page, pageIdProperty) 很好，而 page.addToOne(bookmark, pageIdProperty) 不起作用。一对一关系要求 id 属性位于同一实体中。许多人会以这种方式工作，请查看[有关关系的文档以](http://greendao-orm.com/documentation/relations/)获取详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-25T16:44:21.990

到目前为止，最好的解决方法是在存在外键的实体上使用 addToOne，在另一边使用 addToMany。这并不是非常不方便，因为您只需确保将一个对象添加到列表中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-19T19:24:11.370

你有几个错误。首先，您需要在书签上的 FK 属性之前创建一个 PK。

尝试这个：

```
Entity page = schema.addEntity("Page"); 
Entity bookmark = schema.addEntity("Bookmark");

bookmark.addLongProperty("bookmarkId").primaryKey().autoincrement();
Property fkPage = bookmark.addLongProperty("pageId").getProperty();

bookmark.addToOne(page, fkPage).setName("page"); 
```

对 Page 实体执行相同的步骤。

# sql - 如何在 SQL Server 中的多个表上链接触发器？

> ID：11599590
> 
> 赞同：1
> 
> 时间：2012-07-22T10:43:03.947
> 
> 标签：sql, sql-server-2008, tsql, triggers

是否可以在多个表上链接触发器？

主表：**问题**

```
 id     int 
```

辅助表：**答案**

```
 id          int
  id_parent   int 
```

附加表

**答案投票**

```
 id_answer   int 
```

**答案视图**

```
 id_answer   int 
```

如果我从表中删除一行，我需要创建动作链`questions`

是否可以在表上创建触发器，`question`该触发器将删除行，并`answers`在表上添加另一个触发器，该触发器`answers`还将删除行？`answersvotes``answerviews`

还是我需要在第一个触发器中添加所有删除调用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T12:27:57.697

您可以通过任何一种方式执行此操作 - 使用从所有三个表中删除的 Questions 触发器，或者通过 Questions 和 Answers 上的单独触发器，其中 Answer 触发器被 Questions 中的删除触发。我建议拥有单独的触发器更有意义，以防从问题中删除一个答案。

或者您可以在关系上设置级联删除。

# java - 从String java中提取日期

> ID：11599591
> 
> 赞同：1
> 
> 时间：2012-07-22T10:43:32.630
> 
> 标签：java, date, simpledateformat, date-parsing

我有一个包含多个日期的字符串，例如：

```
[20-Jul-2012 5:11:36,670 UTC PM, 20-Jul-2012 5:11:36,683 UTC PM] 
```

如何读取此字符串并提取每个日期？我正在使用`SimpleDateFormat`该类来创建一个正则表达式。

```
SimpleDateFormat format2 = new SimpleDateFormat("dd-MMM-yyyy HH:mm:ss,SSS z a"); 
```

我试过了 ：

我刚刚做了，得到第一个，它改变了格式和时区：

```
ParsePosition parsePos = new ParsePosition(1);
SimpleDateFormat format2 = new SimpleDateFormat("dd-MMM-yyyy HH:mm:ss,SSS z a");
System.out.println(format2.parse(entry.getValue().toString(), parsePos)) ; 
```

输出：2012 年 7 月 20 日星期五 06:11:36 BST

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T10:51:08.890

你可以试试：

```
 parsePos = new ParsePosition(1);
 while((date = format2.parse(yourString, parsePos)!=null){
      //use date
 } 
```

# sencha-touch - 提交后不显示表单+嵌套列表

> ID：11599593
> 
> 赞同：0
> 
> 时间：2012-07-22T10:43:55.880
> 
> 标签：sencha-touch, extjs

我只是在学习煎茶触摸 2，MVC。我会制作一个简单的表单来获取值，传递给 PHP 文件（用于对 Web 服务的 API 调用），移动到嵌套列表并显示结果。但是，我的应用程序在提交后没有显示任何内容......值被正确捕获（我在控制台日志中看到它）。请问有人可以帮我吗？

考虑测试一下，我现在不传递值，并且我的 API 调用直接使用硬编码值调用。将来我会努力传递表单价值......

先感谢您！

这是“app.js”

```
Ext.application({
  name:                     'Appre',
  icon:                     'resources/icons/icon.png',
  phoneStartupScreen:   'resources/images/phone_startup.png',
  //tabletStartupScreen: 'tablet_startup.png',
  glossOnIcon:          false,
  //profiles:           ['Phone', 'Tablet'],
  views :       ['Viewport','SearchCap','ElencoRistoranti'],
  models:           ['ElencoRistoranti'],
  stores:           ['RistorantiCap'],
  controllers:  ['SearchCap'],
  viewport: {
    layout: {
        type: 'card',
        animation: {
            type: 'slide',
            direction: 'left',
            duration: 300
        }
    }
},
launch: function() {
    Ext.create('Appre.view.Viewport')
} // launch: function() {
}) // Ext.application 
```

这是表格“搜索帽”

```
Ext.define('Appre.view.SearchCap', {
extend: 'Ext.form.Panel',
xtype: 'appre-searchCap',
config: {
    items: [{
        xtype: 'fieldset',
        layout: 'vbox',
            items: [{
                xtype: 'textfield',
                name: 'cap',
                placeHolder: 'Cap' 
            },
            {
                xtype: 'button',
                text: 'Cerca',
                action :'searchCap',
                id:'btnSubmitLogin'
            }] // items
    }] // items
}, // config
initialize: function() {
    this.callParent(arguments);
    console.log('loginform:initialize');
}
}); 
```

这是控制器

```
Ext.define('Appre.controller.SearchCap', {
extend : "Ext.app.Controller",
config : {
    refs : {
        btnSubmitLogin: 'button[action=searchCap]',
        form : 'appre-searchCap'
    },
    control : {
        btnSubmitLogin : {
            tap : "onSubmitLogin"
        }
    }
},
onSubmitLogin : function() {
    console.log("onSubmitLogin");
    var values = this.getForm().getValues();
    console.log(values);
    var $this=this;
    Ext.Ajax.request({
        url: 'cerca-ristoranti-cap.php',
        method: 'POST',
        params: {
            values: Ext.encode({form_fields: values})
        },
        success: function(response, opts) {
            var obj = Ext.decode(response.responseText);
            //Ext.Msg.alert('Contact Complete!', obj.responseText);
            $this.resetForm();
            Ext.Viewport.add(Ext.create('Appre.view.ElencoRistoranti'));
            Ext.Viewport.setActiveItem(Ext.create('Appre.view.ElencoRistoranti'));
        },
        failure: function(response, opts) {
            console.log('server-side failure with status code ' + response.status);
        }
    });
},
resetForm: function() {
this.getForm().reset();
},
    launch : function() {
        this.callParent();
        console.log("LoginForm launch");
    },
    init : function() {
        this.callParent();
        console.log("LoginForm init");
    }
}); 
```

这是嵌套列表

```
Ext.define('Appre.view.ElencoRistoranti', {
extend: 'Ext.Panel',
xtype: 'appre-elencoristoranti',
config: {
    xtype: 'nestedlist',
    title: 'Cap',
    displayField: 'name',
    store: {
        type: 'tree',
        fields: [
            'id_restaurant', 'name',
            {name: 'leaf', defaultValue: true}
        ],
        root: {
            leaf: false
        },
        proxy: {
            type: 'ajax',
            url: 'cerca-ristoranti-cap.php',
            reader: {
                type: 'json',
                rootProperty: 'restaurants'
            } //reader
        } // proxy
    },
    detailCard: {
        xtype: 'panel',
        scrollable: true,
        styleHtmlContent: true
    },
    listeners: {
        itemtap: function(nestedList, list, index, element, post) {
            this.getDetailCard().setHtml(post.get('name'));
        }
    }
} // config
}); 
```

cerca-ristoranti-cap.php 它是一个简单的函数，它返回如下数组：

```
{
"restaurants":[{
    "id_restaurant":"40",
    "name":"La Saliera",
    "zip":"00128",
    "lat":"41.7900229",
    "lgt":"12.4513128"
}, {
    "id_restaurant":"64",
    "name":"Osteria del Borgo",
    "zip":"00128",
    "lat":"41.7887363",
    "lgt":"12.5149867"
}] 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T21:26:13.447

嗨@sineverba 抱歉回复有点晚了，但这里有一些你想要展示的东西，

**视口.js**

```
Ext.define('myapp.view.Viewport' , {
  extend : 'Ext.viewport.Default',
  xtype : "viewport",
  config: {
    fullscreen: true,
    styleHtmlContent: true,
    style: 'background:#ffffff;',
    layout : 'card',
    autoDestroy : false,
    cardSwitchAnimation : 'slide',

    items: [
       {
          xtype: 'appre-searchCap'
       },
    ],
  }
}) 
```

**应用程序.js**

```
Ext.Loader.setConfig({
  enabled: true
})

Ext.application({
    name: 'myapp',
    requires: [
         'myapp.view.SearchCap',
         'myapp.view.ElencoRistoranti',
         'myapp.view.SearchElenco',
    ],
    controllers: ['SearchCap'],
    models: ['myapp.model.SearchCapModel'],
    launch: function() {
         Ext.create('myapp.view.Viewport')
    }
}); 
```

**SearchCapModel.js**

```
Ext.define('myapp.model.SearchCapModel', {
    extend: 'Ext.data.Model',
    config: {
         idProperty: 'id_restaurant',
         fields: [
             { name: 'id_restaurant', type: 'string' },
             { name: 'name', type: 'string'},
             { name: 'zip', type: 'string' },
             { name: 'lat', type: 'string'},
             { name: 'lgt', type: 'string'}
        ],
   }
}) 
```

**SearchCapStore.js**

```
Ext.define('myapp.store.SearchCapStore', {
    extend: 'Ext.data.Store',
    config: {
         model: 'myapp.model.SearchCapModel',
         autoLoad: true,
         proxy: {
             type: 'ajax',
             url : 'cerca-ristoranti-cap.json',
             reader: {
                   type: 'json',
                   rootProperty: 'restaurants'
             } //reader
         },
   }
}); 
```

**SearchCap.js**

```
Ext.define('myapp.controller.SearchCap', {
    extend : "Ext.app.Controller",

    views: ['SearchElenco'],

    config : {
         refs : {
             elencoListContainer: 'elencolistcontainer',
             btnSubmitLogin: 'button[action=searchCap]',
             form : 'appre-searchCap',
         },
         control : {
               btnSubmitLogin : {
                      tap : "onSubmitLogin"
               }
         }
    },
    onSubmitLogin : function() {
            console.log("onSubmitLogin");
            var values = this.getForm().getValues();
            console.log(values);

            Ext.Ajax.request({
                    url: 'cerca-ristoranti-cap.json',
                    method: 'POST',
                    params: {
                         values: Ext.encode({form_fields: values})
                    },
                    success: function(response, opts) {
                            var obj = response.responseText;
                            Ext.Msg.alert('Contact Complete!', obj);
                            Ext.Viewport.add(Ext.create('myapp.view.SearchElenco'));
                            Ext.Viewport.setActiveItem(1);
                    },
                    failure: function(response, opts) {
                          console.log('server-side failure with status code ' + response.status);
                    }
            });
    },
    resetForm: function() {
            this.getForm().reset();
    },
    launch : function() {
            this.callParent();
            console.log("LoginForm launch");
    },
    init : function() {
            this.callParent();
            console.log("LoginForm init");
    }
}); 
```

**搜索Elenco.js**

```
Ext.define('myapp.view.SearchElenco', {
    extend: 'Ext.Container',
    xtype: 'elencolistcontainer',

    requires: ['myapp.store.SearchCapStore'],

    initialize: function() {
            this.callParent(arguments);

            var s = Ext.create('myapp.store.SearchCapStore')
            var notesList = {
                    xtype: 'appre-elencoristoranti',
                    store: Ext.getStore(s).setAutoLoad(true),
                    listeners: {
                           disclose: {
                                    fn: this.onNotesListDisclose,
                                    scope: this
                           }
                    }
            };
            this.add([notesList])
    },
    onNotesListDisclose: function(list, record, target, index, event, options) {
            console.log('editNoteCommand');
            this.fireEvent('editNoteCommand', this, record);
    },

     config: {
           layout: {
                 type: 'fit'
           }
     }
}); 
```

**ElencoRistoranti.js**

```
Ext.define('myapp.view.ElencoRistoranti', {
    extend: 'Ext.dataview.List',
    xtype: 'appre-elencoristoranti',
    id: 'appreElenco',

    config: {
       emptyText: '<pre><div class="notes-list-empty-text">No list found.</div></pre>',
       onItemDisclosure: false,
       itemTpl: '<pre><div class="list-item-title">{id_restaurant}</div><div class="list-item-narrative">{name}</div></pre>',
    }
}); 
```

**SearchCap.js** - 查看

```
Ext.define('myapp.view.SearchCap', {
    extend: 'Ext.form.Panel',
    xtype: 'appre-searchCap',
    id: 'appreSearchCap',

    config: {
          layout: {
                type: 'vbox',
          },
          items: [
               {
                 xtype: 'fieldset',
                 title: 'Cap',
                 instructions: 'Enter Cap',
                 items: [
                     {
                        xtype: 'textfield',
                        name: 'cap',
                        placeHolder: 'Cap' 
                     },
                     {
                        xtype: 'button',
                        text: 'Cerca',
                        ui: 'confirm',
                        action :'searchCap',
                        id:'btnSubmitLogin'
                     }
                 ] // items
              }
         ] // items
    }, // config
    initialize: function() {
            this.callParent(arguments);
            console.log('loginform:initialize');
    }
}); 
```

![在此处输入图像描述](../Images/1cd9ab0174ff4e99809ab6f66fd12dbc.png)

**希望对你有帮助，如果你有朋友请告诉我。:)**

# jquery - 如何使lightbox2响应

> ID：11599594
> 
> 赞同：3
> 
> 时间：2012-07-22T10:44:13.777
> 
> 标签：jquery, responsive-design, lightbox2

我在这里查看：http: [//drupal.org/node/1630630](http://drupal.org/node/1630630)但这仅适用于 Drupal 站点。有人知道如何调整常规的[lightbox2](http://lokeshdhakar.com/projects/lightbox2/)库以使其响应并显示在小型移动屏幕上吗？

“响应式”是指图片应根据屏幕尺寸显示。现在，它始终具有相同的大小，并且在小屏幕上需要滚动。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T20:53:05.623

好吧，这已经很晚了，但我也遇到了这种需要帮助的情况。答案中的两个代码片段“有点”工作，但它们看起来很糟糕！

这工作得更好，IMO：

```
.lb-image, .lb-dataContainer {
 max-width: 100%;
 height: auto !important;
 width: 100%;
}

.lb-outerContainer {
 max-width: 100%;
 height: auto !important;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T14:16:22.037

您应该能够`max-width:100%`在图像上进行设置（使用 CSS）。这就是使图像具有响应性所需的全部内容。如果 lightbox2 在图像上设置样式，只需查看选择器特异性并覆盖它

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T23:19:53.170

我用了： `.lb-image, .lb-dataContainer, .lb-outerContainer { max-width: 100%; height: auto !important; width: auto !important; }`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-04-27T13:59:14.930

感谢您的指点...使用以前的一些建议作为起点，然后有一个小提琴。

我正在一个现有安装 LightBox2 v2.0 的网站上工作，而不是新安装（并且必须重新编码图像等）我决定只是有一个小提琴......

我的 CSS 在下面。它现在完全响应。

要点是改变宽度、最大宽度、高度和最大高度 & !important。我发现一旦我得到响应视口的宽度，#outerImagecontainer 就会变得很长，因此是最大高度或固定高度。我还将宽度限制为 768 像素，即站点的宽度以及图像的宽度，放大它们显然是有损的。

# lightbox、#lightbox img、#outerImageContainer、#hovernav、#imageDataContainer 和#overlay 都进行了一些修改。

```
 #lightbox{  position: absolute; max-height:700px; left: 0; width: 100%; z-index: 100; text-

align: center; line-height: 0;}
#lightbox img{ width:100%; height: auto;}
#lightbox a img{ border: none; }

#outerImageContainer{ position: relative; background-color: #fff; max-width: 760px; width:80% !

important; max-height:50%; height: auto !important; margin: 0 auto;font-size:11px !important; }
#imageContainer{ padding: 10px; }

#loading{ position: absolute; top: 40%; left: 0%; height: 25%; width: 25%; text-align: center; 

line-height: 0; }
#hoverNav{ position: absolute; top: 0; left: 0; max-height:50%; width: 100%; z-index: 10; }
#imageContainer>#hoverNav{ left: 0;}
#hoverNav a{ outline: none;}

#prevLink, #nextLink{ width: 49%; height: 100%; background-image: url(data:image/gif;base64,AAAA); 

/* Trick IE into showing hover */ display: block; }
#prevLink { left: 0; float: left;}
#nextLink { right: 0; float: right;}
#prevLink:hover, #prevLink:visited:hover { background: url(/assets/lightbox2/images/prevlabel.gif) 

left 15% no-repeat; }
#nextLink:hover, #nextLink:visited:hover { background: url(/assets/lightbox2/images/nextlabel.gif) 

right 15% no-repeat; }

#imageDataContainer{ font: 85% arial, sans-serif; background-color: #fff; margin: 0 auto; line-

height: 1.4em; overflow: auto; max-width: 760px; width: 80% !important; max-height:50px;}

#imageData{ padding:0 10px; color: #666; }
#imageData #imageDetails{ width: 70%; float: left; text-align: left; }  
#imageData #caption{ font-weight: bold; }
#imageData #numberDisplay{ display: block; clear: left; padding-bottom: 1.0em;  }           
#imageData #bottomNavClose{ width: 66px; float: right;  padding-bottom: 0.7em; outline: none;}      

#overlay{ position: absolute; top: 0; left: 0; z-index: 90; width: 100%; height: auto; background-

color: #000; } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-24T04:32:33.370

对我来说，正如 NickW 所说的那样（谢谢你帮助我找到这个解决方案的方式）它只需要一点改变：

```
@media only screen and (max-width: 680px) {.lb-dataContainer{
max-width: 80%; 
height: auto !important; 
width: auto !important; }.lb-outerContainer { 
max-width: 80%; 
height: auto !important; 
width: auto !important;}} 
```

灯箱在特定屏幕尺寸之前没有问题，所以我使用媒体查询来查找图像开始不适合较小屏幕尺寸的部分（在我的情况下是 680 像素）。当容器没有占用屏幕的所有空闲宽度时，它对我来说效果最好（它对我来说看起来更好），但这只是一个选择，所以只需检查它是如何为你工作的。对于 .lb-image，只需使用上面帖子中编写的代码。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-02-17T17:35:47.353

我尝试了此页面上的所有建议，但发现它们都不起作用。因此，几个小时后，我根据捕获窗口调整大小事件编写了自己的代码。

这是我的解决方案，它可能看起来很费力，但是当调整窗口大小时它会很好地缩放图像（这主要是基于 JavaScript）：

在 lightbox.js 中执行以下操作：

创建两个全局变量：

```
var preloader_Height;
var preloader_Width; 
```

在 preloader.onload 函数中填充它们，如下所示

```
 preloader_Height = preloader.height;
 preloader_Width = preloader.width; 
```

然后在脚本的底部（就在 return 语句之前）：

```
//Hack is here, modifying scaling when window resize event handler is fired
$( window ).resize(function() {

//Grabbing the padding (if there is any)
containerTopPadding = parseInt($('.lb-container').css('padding-top'), 10);
containerRightPadding = parseInt($('.lb-container').css('padding-right'), 10);
containerBottomPadding = parseInt($('.lb-container').css('padding-bottom'), 10);
containerLeftPadding = parseInt($('.lb-container').css('padding-left'), 10);

//Calculating max image width and height to prevent the image going outside of screen
windowWidth    = window.innerWidth;
windowHeight   = window.innerHeight;
maxImageWidth  = windowWidth - containerLeftPadding - containerRightPadding - 20;
maxImageHeight = windowHeight - containerTopPadding - containerBottomPadding - 120;

//Checking for a fitting issue and also defining imageHeight and imageWidth
if ((preloader_Width > maxImageWidth) || (preloader_Height > maxImageHeight)) {
if ((preloader_Width / maxImageWidth) > (preloader_Height / maxImageHeight)) {
      imageWidth  = maxImageWidth;
      imageHeight = parseInt(preloader_Height / (preloader_Width / imageWidth), 10);
    } else {
      imageHeight = maxImageHeight;
      imageWidth = parseInt(preloader_Width / (preloader_Height / imageHeight), 10);
    }
}

  //Forcing internal image to be 100% so it scales with its external container
$(".lb-image").css("width", "100%");
$(".lb-image").css("height", "100%"); 

//Forcing the external container to match the new required image width and height
$(".lb-outerContainer").css("width", imageWidth);
$(".lb-outerContainer").css("height", imageHeight); 

//Scaling the information at the bottom showing image number and little cross
$(".lb-dataContainer").css("width", imageWidth);

//Defining width for the navigation buttons
 $(".lb-nav").css("width", imageWidth);

//Centering vertically
var center_offset = (maxImageHeight - imageHeight) / 2.0;
var top  = $(window).scrollTop() + 10 + center_offset;
$(".lightbox").css("top",top);

}); 
```

此外，在 lightbox.css 添加：

```
left:50%;
transform: translateX(-50%); 
```

到.lb-nav。

最后，添加

```
$(".lb-nav").css("width", imageWidth);  //Setting image width for the lb-nav

var center_offset = (maxImageHeight - imageHeight) / 2.0;
var top  = $(window).scrollTop() + 10 + center_offset;
$(".lightbox").css("top",top); 
```

到 lightbox.js 中的 sizeContainer 函数。

现在您应该能够实时随意缩放窗口，并且您的图像将相应缩放。

# java - java中将GSON字符串从客户端发送到服务器设计问题

> ID：11599595
> 
> 赞同：0
> 
> 时间：2012-07-22T10:44:18.400
> 
> 标签：java, json, gson

我正在构建一个应用程序，允许餐厅客人订购食物并发送到服务器。

我考虑的是

1）创建类Order.java类

```
public class Order
{

private Intger  tableId;
private Integer restaurantId;
private Integer foodId;
private Integer foodQuantity;

getter and setters
} 
```

2) 此类对象将填充客人订单，并且该类对象的 ArrayList 将作为 Gson 字符串发送到服务器。

现在如果一个订单包含一些 7 个项目，那么 arraylist 将有 7 个对象，但 tableId 和 restaurantId 将相同 7 次。

你能建议一个更好的设计吗？我可以将 restaurantId 和 tableId 与整个数组列表关联起来。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T11:14:25.233

没有***正确的***解决方案，这取决于您的需求，一种可能的解决方案是：

```
public class Order {

    private int tableId;
    private int restaurant;
    private List<OrderItem> items;

    // setters and getters

}

public class OrderItem {

    private int itemId; // foodId
    private int quatity; // foodQuantity

    // setters and getters

} 
```

但是，如果您处于信息未标准化的情况，就像您建议的那样（其中 tableId 对订购的每一种食物都重复），我会考虑实施一个标准化过程，该过程将返回一个包含我在上面草拟的类的结构。*但是*，如果您正在实施它，请考虑使其尽可能规范化。

# coldfusion - Railo PDF 生成问题

> ID：11599597
> 
> 赞同：3
> 
> 时间：2012-07-22T10:44:33.663
> 
> 标签：coldfusion, pdf-generation, railo, cfml, openbd

我对 Railo 比较陌生。尝试在“Railo”上设置应用程序时遇到了 PDF 生成问题。请注意，我在 Adob​​e CFML Server 上运行该应用程序没有问题。

**问题：**在我的应用程序的某个地方，我有一个按钮，可以从数据库中获取数据并提供可下载的 PDF 文件。在 Railo 服务器上，PDF 内容以“有趣的字符”返回。输出语言是**希腊语**。希腊语有许多重音字符。这就是问题发生的地方（重音字符以“有趣”的格式返回，例如 Ÿ 表示ή 或 Š 表示 O 或 OΕ' 表示 Ά）。我认为这个问题与 Railo 的字体集合有关。openBD 服务器上的清单相同！我已经尝试在 cfm 文件中添加**cfprocessingdirective pageEncoding="utf-8"**但没有结果。我试图在 fonts.jar 中添加字体（这是在 \WEB-INF\lib 文件夹下），但也没有结果（并且在 PDF css 中调用字体）。

我不想再使用 Adob​​e CFML Server。

这个问题有什么解决办法吗？

提前谢谢了，

汤姆

希腊

cfc 只提供数据库中的数据

**我正在使用的代码：**

```
<cfprocessingdirective pageEncoding="utf-8">
<cfif not IsDefined("URL.id")>
    <cfelseif not IsDefined("URL.model")>
    <cfelseif not IsDefined("URL.title")>
    <cfelseif not IsDefined("URL.id_tree")>
</cfif>
<cfheader name="Content-Disposition" value="attachment; filename=#URL.id_tree#.pdf">
<cfcontent type="application/unknown; charset=utf-8">
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<!---<link rel="stylesheet" type="text/css" href="resources/fonts/MinionProRegular/MinionProRegular.css" charset="utf-8" />--->
<title>Print</title>

</head>

<body>

  <!---<cfif not IsDefined("URL.id")>
      <cfelseif not IsDefined("URL.model")>
  </cfif>--->

  <!--- Get print details --->
  <cfinvoke
    component="Print"
    method="myPrint"
    returnvariable="getContent"
    id="#URL.id#" 
    model="#URL.model#">

  <!---<cfdump var="#getMember#">--->

  <!--- Output the PDF --->
  <cfdocument 
    format="pdf"
    pagetype="a4"
    <!---pageheight="5"
    pagewidth="6.5"--->
    margintop="0.6"
    marginbottom="0.8"
    marginright="1.3"
    marginleft="1"
    scale="90"
    unit="in"
    fontembed="true"
    backgroundvisible="true">

    <cfoutput query="getContent" >
    <style type="text/css">
      .logo {
          background-image:url(../../images/app-specific/ithemis_logo_NEW.png);
          background-repeat: no-repeat;
          display: inline-block;
          float: left;
          clear: right;
      }
      .name {
          font-family: Georgia, "Times New Roman", Times, serif;
          font-size: 12px;
          color: ##5a5a5a;
          <!---float: left;
          clear: right;--->
          <!---margin-top: 5px;--->
      }
      .body {
          font-family: "Times New Roman", Times, serif;

          <!---font-family: Bodoni;--->
          <!---font-family: Didot;--->
          <!---font-family: Greek;--->
          <!---font-family: Geosanslight;--->
          <!---font-family: Minionpro_regular;--->
          <!---font-family: Philosopher;--->
          <!---font-family: Russian;--->

          font-size: 11px;
          color: ##323232;
          line-height: 17px;
          <!---float: left;
          clear: right;--->
      }
      .line {
          font-size:1px;
          border-bottom-width: 1px;
          border-bottom-style: solid;
          border-bottom-color: ##202020;
          padding-bottom: 5px;
      }
      .point {
          font-family: Georgia, "Times New Roman", Times, serif;
          font-size: 11px;
          padding: 5px 5px 5px 5px;
          color: ##373737;
          background-color: ##eeeeee;
          /*width: 100% !important;*/
          display: block !important;
          text-align: justify;
      }
    </style>

      <!---<cfprocessingdirective pageencoding="utf-8">--->
      <cfdocumentitem type="header">
            <img src="../../images/app-specific/ithemis_logo_print_pdf.png" alt="iThemis logo" width="80" height="30" style="float:left;" border="0"/>
      </cfdocumentitem>
       <!---Use a footer with current page of totalpages format. --->
      <cfdocumentitem type="footer">
        <cfoutput><span style="font-family:Georgia, 'Times New Roman', Times, serif;font-size:10px;color: ##5a5a5a;float:right;">Σελίδα #cfdocument.currentpagenumber# από #cfdocument.totalpagecount#</span></cfoutput>
      </cfdocumentitem>

      <table border="0"> 

        <tr> 
            <td><span class="name">#Title#</span></td> 
        </tr>

        <tr> 
            <td><span class="body">#Body#</span></td>
        </tr> 

    </table>

    </cfoutput>
  </cfdocument>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-18T18:52:00.627

确保您还在您的 CFC中`<cfprocessingdirective pageencoding="utf-8">`立即添加 。`<cfcomponent>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T14:15:02.287

Railo 在某些方面有所不同。生成 PDF 的 CFC / CFM 文件也以 unicode 格式保存，这一点非常重要。

我建议在编辑器中转到文件 > 新建，并确保编辑器允许您在创建文件之前定义 BOM 和编码。

然后将代码复制/粘贴到新文件中并用它覆盖文件。

如果你这样做，它应该工作。

听起来很奇怪……但试一试。它多次修复了我在 Railo 上的 UTF-8 应用程序。

Dreamweaver，虽然我不再使用它 - 允许在文件创建时定义这些设置。您还可以在所有未来文档的首选项中设置它们。 ![Dreamweaver 首选项窗格](../Images/71dce39731bf47e4e8e067d8d9e79851.png)

在 SublimeText 2 上，您可以保存带有编码和 BOM 的文件。 ![sublimetext 另存为编码](../Images/58f6ec07f32e288cee6583b8188db46b.png)

在 ColdFusion Builder 中，不确定 BOM 设置的确切位置，但这是确保默认编码设置为 UTF-8 的首选项。 ![Coldfusion Builder 首选项窗格](../Images/221c8152c18b1a850b1ab9c0261439b5.png)

我希望这对您和其他有类似问题的人有所帮助。请记住：如果您使用的是 UTF-8 / Railo，则必须确保交互的每个方面也都使用 UTF-8 保存。包括 cfc/cfm 文件本身。

祝你好运！

# ios - 在 IOS 中从 pdf 或 uiwebview 复制图像？

> ID：11599599
> 
> 赞同：0
> 
> 时间：2012-07-22T10:44:41.810
> 
> 标签：ios, image, uiimageview, uipasteboard

用户单击复制后如何从 UIPasteboard 获取图像实际上我可以从 UIPasteboard 获取 Nsdata 但我认为需要将特定编码分配给 uiimageview 我该怎么做？感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T10:49:51.447

```
NSData *data = // however you obtain the data
UIImage *image = [[UIImage alloc] initWithData:data];
UIImageView *imageView = [[UIImageView alloc] initWithImage:image];
[self.view addSubview:imageView]; 
```

更好的是：

```
UIImage *image = [[UIPasteboard generalPasteboard] image];
UIImageView *imageView = [[UIImageView alloc] initWithImage:image];
[self.view addSubview:imageView]; 
```

# canvas - 2D 减去 3D 对象，使背景可见？

> ID：11599601
> 
> 赞同：1
> 
> 时间：2012-07-22T10:44:47.847
> 
> 标签：canvas, webgl, augmented-reality, three.js

对于 AR 类型的应用程序，我想知道：

> 是否可以将一个 WebGL 3D 渲染从另一个*中减去 2D*，以使背景显示出来？

示例，截至 2012 年 7 月 22 日，CEST 完全使用 2D 画布实现：[Reality Builder](http://www.RealityBuilder.com)（[来源](http://code.google.com/p/realitybuilder)）

请注意，您可以将红色块移动到照片中显示的块*后面*。这是按如下方式完成的：

1.  绘制了红色块。

2.  `globalCompositeOperation`设置为`destination-out`。

3.  块的绘制位置与照片中红色块前面的块完全相同。从而将它们从红色块中减去。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T23:48:12.160

`material.opacity`如果您将阻止器对象设置为`0`并首先渲染它，您应该能够做一些棘手的事情。

# php - 带有 JSON 的 Highcharts

> ID：11599602
> 
> 赞同：1
> 
> 时间：2012-07-22T10:44:55.150
> 
> 标签：php, ajax, json, highcharts

我正在尝试使用来自我的数据库调用 json 的数据创建一个图表，但它没有在图表中显示结果。到目前为止，这是我的代码：

```
$(document).ready(function() {
function requestData() {
$.ajax({
        url: 'data.php',
        datatype: 'json',
        success: function(data) {
        alert(data);
        chart.series[0].setData(data[0]);
        },
        cache: false
    });
}
var chart;
chart = new Highcharts.Chart({
    chart: {
            renderTo: 'container',
            type: 'line',
            events: {
               load: requestData
            }
            },
    xAxis: {
  },
  yAxis: {
     title: {
        text: 'Value'
     }
  },

series: [{
         name: 'Random data',
         data: []
            }]
});

}); 
```

这是我的 data.php 代码

```
$query = "SELECT tiempo,Fp1Ref 
        FROM GraficaEEG limit 10";
$data = mysqli_query($dbc, $query);
$i=0;
while($row = mysqli_fetch_array($data)) {
    $row['tiempo'] = (float) $row['tiempo'];
    $rows[$i]=array($row['tiempo'],(float)$row['Fp1Ref']); 
    $i++;
}
echo json_encode($rows); 
```

我收到的数据是这样的：

```
[[0,3001],[0.005,4937.22],[0.01,4130.55],[0.015,4213.15],[0.02,4010.61],[0.025,3914.34],[0.03,3785.33],[0.035,3666.13],[0.04,3555.25],[0.045,3447.77]] 
```

所以我认为是为图表传递数据的正确方法，所以我不太明白有什么问题，提前谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T11:50:31.110

我认为问题在于，当您的*requestData()*函数被触发时，*图表*变量仍未完全构建并且不知道它具有*系列*属性。
要解决此问题，请参考*this*（表示该上下文中的图表对象*）* ，而不是您的*requestData()*函数中的图表。我在 jsfiddle 中尝试了这个[http://jsfiddle.net/elcabo/p2r6g/](http://jsfiddle.net/elcabo/p2r6g/)。 还贴出下面的js代码。

 *```
$(function () {
    $(document).ready(function() {

        //Function bits
        function requestData(event) {
            var tiemposAlAzar = [[10,20],[20,50]];
            //The 'this' will refer to the chart when fired
            this.series[0].setData(tiemposAlAzar);
        };

        var chart;

        //Chart bits
        chart = new Highcharts.Chart({
            chart: {
                renderTo: 'container',
                type: 'line',
                events:{
                    load: requestData                           
                }
            },
            xAxis: {},
            yAxis: {
                title: {
                text: 'Value'
            }
        },
        series: [{
            name: 'Random data',
            data: []
        }]
      });
    });
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-22T09:51:57.850

此 url 可以帮助您创建需要从数据库中提取数据的动态高图。

在 json.php 代码中，您可以放置​​ sql 查询并将静态数组替换为动态数组

```
http://www.kliptu.com/free-script/dynamic-highchart-example-with-jquery-php-json 
```

该示例还展示了如何使用 json 管理多个系列。以及鼠标点处所有系列数据的工具提示。

您可以根据脚本要求修改示例。*

# java - Eclipse @deprecated 不工作，但 @Deprecated 工作

> ID：11599604
> 
> 赞同：2
> 
> 时间：2012-07-22T10:45:01.407
> 
> 标签：java, eclipse

在我的 Eclipse Indigo 中，只能`@Deprecated`工作但不能`@deprecated`发表评论，知道吗？

例如

```
// @deprecated <-- not work
@Deprecated    <-- work
public String getName()
{
    return name;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-22T10:47:32.550

@Deprecated 是一个标记接口，而 deprecated 不是。[@deprecated](http://docs.oracle.com/javase/1.5.0/docs/guide/javadoc/deprecation/deprecation.html#javadoc_tag)是一个 Javadoc 标签。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-22T10:47:53.147

我相信`@deprecated`仅用于解释弃用的 Javadoc 注释，它本身并不是可用于方法的注释。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-22T10:59:07.367

**1.**注解类型其实是**一种接口形式**。

**2.**`@Deprecated`注释表明标记的**元素已被弃用，不应再使用。**

**3.**当一个元素被弃用时，它也应该使用Javadoc标签来**记录**`@deprecated`，这意味着`@deprecated` **它只用于Javadoc文档中，而不是用于方法上**。

有关更多详细信息，请参见：

[http://docs.oracle.com/javase/tutorial/java/javaOO/annotations.html](http://docs.oracle.com/javase/tutorial/java/javaOO/annotations.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-22T11:48:24.440

您的评论不是 javadoc 评论，因此 Eclipse 会忽略它。如果你会使用

```
/**
 * @deprecated
 */ 
```

`@Deprecated`那么 Eclipse 会以与您指定注释时完全相同的方式处理它。

# java - 如何在 SWT/Java 中将数据附加到 TreeItem？

> ID：11599606
> 
> 赞同：2
> 
> 时间：2012-07-22T10:45:13.300
> 
> 标签：java, tree, swt

我开始在 Java 中使用 SWT GUI 工具包。我需要将一些数据附加到 TreeItems。我以前使用的每个工具包都有一个树项，它包含一个原始指针或一个基本对象引用以提供基本数据包含，但我在 SWT 的 TreeItem 中找不到一个。

如何将数据附加到 TreeItem？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T10:34:38.123

这很简单。

```
TreeItem treeItem = new TreeItem(tree, SWT.NONE);

treeItem.setData("key", obj); 
```

获取数据时：

```
Object obj = treeItem.getData("key"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T16:00:35.367

答案是：使用纯 SWT 你不能。*标准小部件工具包*
只处理小部件、它们的层次结构和视觉表示。将数据绑定到小部件是构建在 SWT 之上的更高级的 JFace 框架（尤其是它的数据绑定工具）的主题。您需要一些时间来掌握它，但因此您获得了 Eclipse 平台的强大功能。它使您能够将模型绑定到视图，即使是双向 （→ 对模型对象的更改会立即反映在 UI 上，反之亦然）。 目前，您必须保留一个单独的项目列表，并且需要使用索引。

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T17:20:22.037

在 SWT 4.2 中，可能在更早的版本中（尽管我没有检查），该类`TreeItem`是 , 的子类`Widget`，并且`Widget`有`setData(Object o)`和`getData()`. 您可以使用它将任意的、特定于应用程序的数据附加到`TreeItem`实例。*

# android - 从资产中读取文本文件时的奇怪行为

> ID：11599608
> 
> 赞同：2
> 
> 时间：2012-07-22T10:45:29.590
> 
> 标签：android, c++, c, android-ndk

我目前正在使用本机活动的东西和 GLES 2.0，我正在使用 ndk 从资产中加载 GLES 的着色器。

这是简单着色器的来源：

顶点着色器：simple.vsh

```
attribute vec4 vPosition;
void main()
{
    gl_Position = vPosition;
} 
```

片段着色器：simple.fsh

```
precision mediump float;
void main()
{
    gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);
} 
```

这是我用来加载着色器文件的代码

```
AAsset *shaderAsset= AAssetManager_open(app->activity->assetManager, path, AASSET_MODE_BUFFER);
size_t length = AAsset_getLength(shaderAsset);

LOGI("Shader source size: %d\n", length);

char* buffer = (char*) malloc(length);

AAsset_read(shaderAsset, buffer, length);   

LOGI("Shader source : %s\n", buffer);

AAsset_close(shaderAsset);
free(buffer); 
```

当我运行应用程序时，我在 android logcat 中看到了这个：

```
 Shader source size: 71
 07-22 13:23:52.683 11135 11146 I native-activity: Shader source : attribute vec4 vPosition;
 07-22 13:23:52.683 11135 11146 I native-activity: void main()
 07-22 13:23:52.683 11135 11146 I native-activity: {
 07-22 13:23:52.683 11135 11146 I native-activity:     gl_Position = vPosition;
 07-22 13:23:52.683 11135 11146 I native-activity: }
 07-22 13:23:52.683 11135 11146 I native-activity: sP
 07-22 13:23:52.683 11135 11146 I native-activity: Shader source size: 86
 07-22 13:23:52.683 11135 11146 I native-activity: Shader source : precision mediump float;
 07-22 13:23:52.683 11135 11146 I native-activity: void main()
 07-22 13:23:52.683 11135 11146 I native-activity: {
 07-22 13:23:52.683 11135 11146 I native-activity:     gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);
 07-22 13:23:52.683 11135 11146 I native-activity: }
 07-22 13:23:52.683 11135 11146 I native-activity: fs` 
```

注意文件末尾的“sP”和“fs'”。

我还在构建 xml 文件中为文件扩展名添加了“无压缩”，以防万一出现问题，但问题仍然存在。

有谁知道可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T11:43:16.897

不知何故，尾随零不会进入资产。

尝试使用

```
// one extra char for the trailing zero
char* buffer = (char*) malloc(length + 1);

AAsset_read(shaderAsset, buffer, length);   

// fix the string to be zero-terminated
buffer[length] = 0; 
```

# ruby-on-rails - 在 to_json 方法中，Rails“参数数量错误（1 代表 0）”

> ID：11599610
> 
> 赞同：5
> 
> 时间：2012-07-22T10:46:21.157
> 
> 标签：ruby-on-rails, ruby, json

> **可能重复：**
> [在 Rails 2.3.5 中覆盖 to_json](https://stackoverflow.com/questions/2572284/override-to-json-in-rails-2-3-5)

lib/responses.rb

```
module Responses
class Response
    def to_json
       JSON.pretty_generate(self)
    end
end

class ErrorResponse < Response
    def initialize(cause)
        self[:type]="Error"
        self[:casue]=cause

    end
end
class DataResponse < Response
    attr_accessor :data

end
end 
```

这由控制器使用：

```
 response=Responses::DataResponse.new
 response.data=someData

 render :json => response 
```

现在我`wrong number of arguments (1 for 0)`在`lib/responses.rb:3:in to_json`. 为什么？没有参数传递给`to_json`隐式调用的`render :json`。那么我的错误在哪里？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-22T11:35:48.707

这是因为在 Rails 中，当您使用 json 进行渲染时，to_json 方法将接收选项。

你可能想做这样的事情：

```
def to_json(options = {})
   JSON.pretty_generate(self, options)
end 
```

# c# - 安装后与只读数据库文件相关的问题

> ID：11599611
> 
> 赞同：1
> 
> 时间：2012-07-22T10:46:22.273
> 
> 标签：c#, .net, winforms

我在 WinForms 中有一个应用程序，我创建了 SetupDevelopment 项目，然后使用 Setup.exe 文件安装应用程序我已将 MSAcceess db 文件添加到应用程序文件夹文件中，当我安装应用程序时，数据库文件变为只读。安装后如何使文件可写？

我在互联网上找到了一些解决方案，发现当我尝试在“C:\ProgramFile\”以外的不同路径中安装应用程序并使应用程序可供所有用户使用时，它解决了我的问题，但我只想在“ C:\ProgramFile\" 并希望仅对“当前用户”可用我如何解决我的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T11:58:43.150

在现代 Windows 操作系统中，文件夹“程序文件”或“程序文件 (x86)”对于普通用户是只读的。出于安全原因，已完成此选择，您不能轻易绕过此规则。仅用于当前用户的推荐文件夹 由`C:\users\username\AppData\Roaming`或`C:\users\username\AppData\Local`标识。在此基础文件夹中添加另一个标识您的应用程序或公司的子文件夹，并在那里安装您的数据库。`Environment.SpecialFolder.ApplicationData``Environment.SpecialFolder.LocalApplicationData`

如果您希望您的数据库可供当前 PC 的所有用户使用，您可以将其安装在`Environment.SpecialFolder.CommonApplicationData`解析为 C:\programdata 的目录中。（再次，添加特定于您的应用程序或公司的子文件夹）

同样，不要试图强迫操作系统违反其规则。你会发现自己经常遇到麻烦。

# c# - IL反汇编器可以显示嵌入式资源里面的数据吗

> ID：11599614
> 
> 赞同：1
> 
> 时间：2012-07-22T10:47:03.877
> 
> 标签：c#, embedded-resource, il

我正在使用 C# 进行一些加密。我想隐藏我的密钥并想到嵌入式资源。我不确定黑客是否可以使用 IL 反汇编程序获得它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-22T10:50:40.927

是的，他们当然可以。这并不特定于 .Net 资源，同样适用于非托管应用程序中的资源。资源是为了方便存储，而不是为了安全。

如果您还不了解这些基本概念，我认为您不应该认真实施意味着加密。正确地进行加密是很**困难**的。

一般来说，如果您的程序可以访问某些数据（例如密钥）并且该程序可以在攻击者的机器上运行，那么您应该期望攻击者也可以访问它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T10:50:28.907

黑客也会检索资源。您可以做的最好的选择是使用像 Dotfuscator Community Edition 这样的混淆器。它仅在 VS Professional 中可用。

![间谍](../Images/ff741a43143bb98da5b0f9fe7d79ff06.png)

# ios - ios viewDidLoad 以纵向模式启动 - 但正在开发横向应用程序

> ID：11599615
> 
> 赞同：1
> 
> 时间：2012-07-22T10:47:12.467
> 
> 标签：ios

拥有 ViewController 是为了拥有良好的 MVC 结构。

但是当你在开发横向模式的应用程序时，你需要将 ui 逻辑下移到一个子 UIView。

原因：当以编程方式添加 UIViews （子视图）时，您必须等待 didRotateFromInterfaceOrientation 获得正确的边界。

或者我错过了什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T11:28:56.113

I have the same problem. The only solution that i found is overriding

```
- (void)viewWillLayoutSubviews 
```

method of the view controller. And layout subviews here.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-22T10:52:49.767

如果不是我误解了您的问题，您希望在启动时直接以横向模式启动应用程序。尝试将命令放在您的文件 app.plist

```
<key>UISupportedInterfaceOrientations~iphone</key>
<array>
    <string>UIInterfaceOrientationLandscapeLeft</string>
    <string>UIInterfaceOrientationLandscapeRight</string>
</array> 
```

# php - 正则表达式匹配特定单词，除非它是句子中的最后一个单词（titleize）

> ID：11599621
> 
> 赞同：1
> 
> 时间：2012-07-22T10:47:40.540
> 
> 标签：php, regex

我将所有单词大写，然后将**a 、 of 和****之**类**的**单词小写。第一个词和最后一个词应保持大写。我尝试使用而不是 \b，这导致了一些奇怪的问题。我也尝试过，但这似乎并不意味着“不是字符串结尾”**`\s``[^$]`**

 **```
function titleize($string){
  return ucfirst(
     preg_replace("/\b(A|Of|An|At|The|With|In|To|And|But|Is|For)\b/uie",
     "strtolower('$1')", 
     ucwords($string))
  );
} 
```

这是我试图修复的唯一失败的测试。最后的“in”应保持大写。

```
titleize("gotta give up, gotta give in");
//Gotta Give Up, Gotta Give In 
```

这些测试通过：

```
titleize('if i told you this was killing me, would you stop?');
//If I Told You This Was Killing Me, Would You Stop?

titleize("we're at the top of the world (to the simple two)");
//We're at the Top of the World (to the Simple Two)

titleize("and keep reaching for those stars");
//And Keep Reaching for Those Stars 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T14:36:02.653

您`ucwords()`在将字符串发送到 regex-replace 之前申请，然后`ucfirst`在从 regex 返回后再次申请（对于出现在字符串开头的单词）。这可以通过以下**约定**来缩短：字符串开头和结尾的每个单词**都没有被空格包围**。使用这个约定，我们可以使用像`'/(?<=\s)( ... )(?=\s)/'`. 这将以某种方式简化您的功能：

```
function titleize2($str) {
 $NoUc = Array('A','Of','An','At','The','With','In','To','And','But','Is','For');
 $reg = '/(?<=\s)('      # set lowercase only if surrounded by whitespace
      . join('|', $NoUc) # add OR'ed list of words
      . ')(?=\s)/e';     # set regex-eval mode
 return preg_replace( $reg, 'strtolower("\\1")', ucwords($str) );
} 
```

如果测试：

```
...
$Strings = Array('gotta give up, gotta give in',
                 'if i told you this was killing me, would you stop?',
                 'we\'re at the top of the world (to the simple two)',
                 'and keep reaching for those stars');

foreach ($Strings as $s)
   print titleize2($s) . "\n";
... 
```

...这将返回正确的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T11:31:57.820

试试这个正则表达式：

```
/\b(A|Of|An|At|The|With|In|To|And|But|Is|For)(?!$)\b/uie 
```

负前瞻`(?!$)`排除了 endofline 之后的匹配项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T11:32:17.833

为行尾添加负前瞻`(?!$)`应该可以满足您的要求

```
function titleize($string){
  return ucfirst(
     preg_replace("/\b(A|Of|An|At|The|With|In|To|And|But|Is|For)\b(?!$)/uie",
     "strtolower('$1')", 
     ucwords(inflector::humanize($string)))
  );
} 
```**

# ios - 核心动画立即调用完成函数

> ID：11599631
> 
> 赞同：0
> 
> 时间：2012-07-22T10:49:07.620
> 
> 标签：ios, animation, core-animation, objective-c-blocks, icarousel

我正在尝试使用通常的 UIView 类方法为一些东西制作动画。我在流行的[iCarousel](https://github.com/nicklockwood/iCarousel)库调用的方法中调用这些动画方法。当我滚动轮播时，动画立即进入完成状态并调用完成函数（忽略动画的持续时间）。BOOL 是真的，`finished`所以看起来动画没有被打断。

当我在 iCarousel 的委托方法之外触发这些动画时，它们会起作用。我不打算修复 iCarousel，也不认为它有什么问题。我更好奇里面的代码可能会导致我的动画立即完成。我可以做些什么来避免这个问题。

这是一个例子：

```
- (void)carouselCurrentItemIndexDidChange:(iCarousel *)carousel {
    [UIView
     animateWithDuration:5.0f
     delay:0
     options:
        UIViewAnimationOptionCurveEaseOut |
        UIViewAnimationOptionOverrideInheritedDuration |
        UIViewAnimationOptionOverrideInheritedCurve
     animations:^{
        myView.alpha = 0;
     }
     completion:^(BOOL finished){
         NSLog(@"Completed. Did it finish? %i", finished);
     }];
} 
```

最后一个细节：
iCarousel 的文档中提到可以更改轮播的 useDisplayLink 属性，以避免与动画发生一些冲突。这似乎没有任何区别。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T19:01:08.873

我在 iCarousel 的源头深处发现了问题。出于某种原因，在他们的库中，他们使用 禁用动画`[CATransaction setDisableActions:YES];`，然后稍后在许多不同的地方重新启用它。一个这样的地方跨越了一堆他们的回调，这阻止了我的动画正确触发。

从 iCarousel 代码来看，这是非常有意的，所以我认为我必须在自己的代码中解决这个问题。

编辑：这是避免此问题的更新代码：

```
- (void)carouselDidEndScrollingAnimation:(iCarousel *)carousel {
    BOOL previousDisableActions = [CATransaction disableActions];
    [CATransaction setDisableActions:NO];

    // Begin animation here.

    [CATransaction setDisableActions:previousDisableActions];
} 
```

**更新：** iCarousel 的作者通过在每个委托调用内部添加我上面建议的代码来修复此错误。看起来这是固定的。

# asp.net - 版权内容删除和隐私政策

> ID：11599634
> 
> 赞同：0
> 
> 时间：2012-07-22T10:49:31.717
> 
> 标签：asp.net, html, web-crawler, privacy

在我发现的大多数音乐网站中，他们习惯在政策中写下以下内容：

在此网站 (www.Indiamp3.com) 上，您可以找到指向音频文件的链接。这些文件存储在互联网上的其他地方，不是本网站的一部分。Indiamp3.com 不对它们承担任何责任，Indiamp3.com 仅收集链接和索引其他网站内容。我们的网站是完全自动化的。这意味着我们正在抓取其他 mp3 网站和目录，将它们编入索引，然后链接到它们提供的那些 mp3 文件。**Indiamp3.com 尊重美国 DMCA 法律。**

如果您的受版权保护的材料已被 Indiamp3.com 编入索引，并且您希望删除此材料，则您必须提供一份书面通讯，并准确提及您声称拥有所有权的内容。此消息必须包含以下内容：

*   您受版权保护的材料的名称和确切 URL。
*   联系信息，以便我们与您联系（街道地址、电话和电子邮件）。
*   明确证明您拥有所述内容的版权或证明您是拥有该内容的个人/公司的代表。

* * *

如果我在其他网站上有文件的链接，如何进行此类索引？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T18:54:50.497

如果我理解正确，您可能正在寻找这个 - [http://en.wikipedia.org/wiki/Web_crawler](http://en.wikipedia.org/wiki/Web_crawler)

# ios - 恢复状态导航控制器后后退按钮标题被截断

> ID：11599635
> 
> 赞同：1
> 
> 时间：2012-07-22T10:49:41.263
> 
> 标签：ios, uinavigationcontroller, uinavigationbar

当我尝试在启动之间恢复 UINavigationController 的状态时，我遇到了 UIBarButtonItem/UINavigationBar 的一些奇怪行为。

下面的代码片段显示了我如何恢复导航控制器的状态。此代码片段在**viewDidLoad**方法中执行。

```
NSUserDefaults *ud = [NSUserDefaults standardUserDefaults];
if ([ud objectForKey:HBStateRestorationQuoteSelection]) {
    NSInteger index = [ud integerForKey:HBStateRestorationQuoteSelection];

    // Fetch Quote
    NSDictionary *quote = [self.quotes objectAtIndex:index];

    // Initialize Quote View Controller
    HBQuoteViewController *vc = [[HBQuoteViewController alloc] initWithNibName:@"HBQuoteViewController" bundle:[NSBundle mainBundle]];
    vc.quote = quote;

    // Push Quote View Controller Onto Navigation Stack
    [self.navigationController pushViewController:vc animated:NO];
} 
```

结果是后退按钮标题由于某种原因被截断。当以正常方式使用导航控制器时，此行为不存在。

请注意，截断不是由于导航栏中标题的大小。如前所述，我不使用此状态恢复逻辑时，后栏按钮的标题显示正常。

我还尝试将恢复代码放在**viewWillAppear**方法中，或者通过创建自定义后退栏按钮来更改后退栏按钮的标题，但这些方法都没有解决问题。

![在此处输入图像描述](../Images/48cca17d43051ca0e5260a6a6027f564.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T14:08:02.740

我怀疑问题是由于在父级显示视图之前推动控制器。我相信您可能会在以下方面取得一些成功，尽管它有点工作。

*   当您要恢复状态时，然后在根视图控制器中隐藏导航栏，并显示启动图像而不是您的正常内容。

*   当根视图控制器获得“viewDidAppear”时，然后在主队列上使用调度块，并推送其他控制器，也配置为隐藏导航栏并显示启动图像。

*   当您到达应该显示的视图控制器时，此时显示真实视图并启用显示导航栏。

这是一种或多或少地做系统正在做的事情的压缩方式，总是让父视图在推送另一个视图之前至少到达“viewDidAppear”。

# mysql - 显示余额最高的 10 条记录

> ID：11599636
> 
> 赞同：0
> 
> 时间：2012-07-22T10:49:47.980
> 
> 标签：mysql, select, where

我有记录表`'username'`和`'balance'`. 如何显示余额最高的 10 个用户名？

额外：如何显示，但只有当他们有超过 1.000.000 美元时？

我的表：

![在此处输入图像描述](../Images/07c9ca777e4d7bed4fb058ce7725994a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T10:56:46.807

您只需要先对余额进行**排序**并将结果限制为 10：

```
SELECT   `username`, `balance` 
  FROM   `table_name` 
ORDER BY `balance` DESC 
 LIMIT    10 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T10:50:21.320

这些是*非常*基本的 SQL 语句。您可能应该找到一个很好的 SQL 教程并花一些时间玩各种`SELECT`子句。在你的情况下：

*   只需按降序排列结果`balance`并限制为 10 条记录？

    ```
    SELECT username FROM mytable ORDER BY balance DESC LIMIT 10 
    ```

*   添加`WHERE`条件以仅过滤余额超过指定阈值的记录：

    ```
    SELECT username FROM mytable WHERE balance >= 1000000 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T10:56:45.293

```
 SELECT username FROM mytable WHERE balance>1000000 ORDER BY balance DESC LIMIT 10 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-22T10:52:24.563

试试这个：

```
 select username, balance from table_name where balance >= 1000000 order by balance DESC LIMIT 10 
```

# java - 生命周期配置未涵盖 Maven 插件执行

> ID：11599638
> 
> 赞同：1
> 
> 时间：2012-07-22T10:49:54.633
> 
> 标签：java, eclipse, maven, m2e

我在下面的链接中遇到了同样的问题，并且那里的解决方案有效，但我很难理解它是什么原因造成的以及它如何影响项目。

[生命周期配置未涵盖插件执行（JBossas 7 EAR 原型）](https://stackoverflow.com/questions/9142533/plugin-execution-not-covered-by-lifecycle-configuration-jbossas-7-ear-archetype)

我开始阅读 m2e

[http://wiki.eclipse.org/M2E_plugin_execution_not_covered](http://wiki.eclipse.org/M2E_plugin_execution_not_covered)

'eclipse build' 和 maven one 有什么区别？

仍然不清楚“有趣”和“不有趣”的 mojo 处决是什么意思：

[https://docs.sonatype.org/display/M2ECLIPSE/Project+build+lifecycle+mapping](https://docs.sonatype.org/display/M2ECLIPSE/Project+build+lifecycle+mapping)

所以有解决方案，但不是对问题的理解。

感谢您帮助我理解问题... :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-25T19:21:55.573

一般来说，m2e 用于解析/映射插件目标执行到 Eclipse 构建生命周期的方式在 0.12 版之后已经被重新发明。现在 m2e 需要明确说明如何处理绑定到项目构建生命周期的“有趣”阶段的所有 Maven 插件。通过在项目的 pom 中配置生命周期映射，或者使用特定的 m2e 配置器 Eclipse 插件（如果有人为社区创建了它）。

“有趣”是指通常在 IDE 内编写和调试代码期间发生的阶段，主要不包括打包和部署步骤。

另请注意（来自此[博客文章](http://grumpyapache.blogspot.com.ar/2011/08/mess-that-is-m2e-connectors.html)）：

> M2E 允许您手动运行 Maven。您可以从 Eclipse 中调用诸如“mvn install”之类的目标，就像从命令行执行它一样。这工作（并且总是工作）很好。不幸的是，每当 Eclipse 构建项目时，例如在清理之后，Maven 也会从 M2E 自动调用。在这种情况下，M2E 充当“Eclipse Builder”。人们一直遇到问题的正是这些后面的调用，连接器应该处理得更好。

# objective-c - 接口变量声明：合成和未知选择器

> ID：11599639
> 
> 赞同：0
> 
> 时间：2012-07-22T10:50:05.450
> 
> 标签：objective-c

我有一个令人困惑的问题。我对Objective-C的理解只有脚踝，所以我会尽力解释。我有一个类，它是一个控制器，它简单地声明一个位于 nib 文件中的 NSTextField。

这是它在接口文件中的声明：

```
@property (nonatomic, retain) IBOutlet NSTextField *textField; 
```

并在实施中：

```
@synthesize textField; 
```

简单吧？但是，如果我`[textField stringValue]`稍后通过单击提交按钮来调用它，那么它会失败并显示一个未知的选择器消息（如果它认为它不能在该对象类型上调用该消息，则通常是这样）。这看起来像这样：

```
-(IBAction)send:(id)sender {
    NSString* txt = [textField stringValue];
    [server send:txt];
} 
```

为了解决这个问题，我做了以下事情：

```
@interface MyController : NSObject {
    NSTextField *textField;
} 
```

我还没有看到任何显示这一点的教程/示例。他们没有在界面的这一部分声明 NSTextField 就这样做了。

我的问题是，为什么在我的情况下我必须在界面中声明它才能工作？

# javascript - Backbone：单例视图？

> ID：11599645
> 
> 赞同：0
> 
> 时间：2012-07-22T10:50:51.670
> 
> 标签：javascript, backbone.js, singleton, backbone-views

我有几个不同的视图，它们主要是建立起来的（布局组件、布局、主视图）。

当我现在在不同的视图之间切换时，必须重新渲染整个页面。

至少在“窗口”中缓存布局视图并重新加载它们不是更好吗？

类似于主干视图的单例模式？

我该怎么做呢？很简单：

```
window.MainLayoutView || window.MainLayoutView = new MainLayoutView({ el: 'div.main' }); 
```

足够的？

还有什么我需要考虑的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T19:41:46.023

是的，还有更多需要担心的。如果你做这样的事情：

```
window.MainLayoutView.render();
$(x).html(window.MainLayout.el);
// And later...
$(x).html(someOtherView.el);
// And later still...
$(x).html(window.MainLayout.el); 
```

你会发现你里面的所有事件`window.MainLayout`都消失了。如果您想缓存实例化的视图并将其换入和换出，您将不得不安排[`delegateEvents`](http://backbonejs.org/#View-delegateEvents)调用以重新绑定视图层次结构中的所有事件。

比较这两个示例的行为，您会发现问题：

*   [http://jsfiddle.net/ambiguous/Mrt3C/](http://jsfiddle.net/ambiguous/Mrt3C/)（没有`delegateEvents`电话）。
*   [http://jsfiddle.net/ambiguous/Mrt3C/1/](http://jsfiddle.net/ambiguous/Mrt3C/1/)（有`delegateEvents`电话）。

通常，您不必费心尝试缓存视图，只需缓存[`remove`](http://backbonejs.org/#View-remove)它们并根据需要重新创建它们。

# c# - 下一个字母作为 char 变量

> ID：11599647
> 
> 赞同：3
> 
> 时间：2012-07-22T10:51:01.090
> 
> 标签：c#, wpf, char

我的 C# 应用程序中有一个`char`变量*c*和一个`TextBox` *textbox1*。我想做这个：

```
textbox1.Text = (c + 2).ToString(); //this doesn't work, sure 
```

例如：

```
c = 'b';
textbox1.Text = "d"; 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-22T11:02:17.207

不知道为什么每个人都选择int ...

```
textbox1.Text = ((char)(c + 2)).ToString(); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-22T10:53:18.830

```
textbox1.Text = ((char)(((int)c) + 2)).ToString(); 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-07-22T10:52:18.337

尝试这个 -

```
textbox1.Text = Convert.ToChar((int)c +2).ToString() 
```

# python - 可迭代为 sorted() 中的比较键？

> ID：11599661
> 
> 赞同：-1
> 
> 时间：2012-07-22T10:53:22.907
> 
> 标签：python, sorting

假设我想对行进行排序，并且我想解决与下一列的任何联系、与下一列的后续联系等。

在 python 中，相当于**sorted(rows, key=itemgetter(1, 2, 3, 4, ...))**。

我尝试编写自己的生成器，但 sorted 不会像元组 itemgetter 返回那样遍历我的生成器。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T11:24:28.297

由于评论中提到的原因，您无法对尚未创建的事物列表进行排序。生成器的存在是为了在被要求时产生结果，因此您无法对尚未迭代的可迭代对象进行排序（如`list(generator())`.

用更普通的话来说，我在想十个名字，但还没有告诉你它们是什么，请按字母顺序排列它们。你应该回答“当你没有把它们给我时，我该如何分类它们？” 你是对的：你不能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T11:40:36.407

好的，这就是你说你想做的事情：

> 我想对行进行排序，并且我想解决与下一列的任何联系，与下一列的后续联系等。

请注意，首先，该`key`参数的文档执行以下操作：

> *key*指定一个参数的函数，用于从每个列表元素中提取比较键

所以你的`itemgetter`想法并不完全正确，因为你只想在比较相等时才在列表中移动。

*然而*，事情实际上比你想象的要容易得多。查看[Python 文档](http://docs.python.org/library/stdtypes.html#sequence-types-str-unicode-list-tuple-bytearray-buffer-xrange)（另请参阅[此 SO 问题](https://stackoverflow.com/questions/5292303/python-tuple-comparison)。）：

> 序列类型也支持比较。特别是，元组和列表通过比较相应的元素来按字典顺序进行比较。这意味着要比较相等，每个元素必须比较相等，并且两个序列必须是相同的类型并且具有相同的长度。（有关详细信息，请参阅语言参考中的[比较](http://docs.python.org/reference/expressions.html#comparisons)。）

我认为，如果您只是确保每一行都是等长序列（列表或元组），那么这**正是您想要的。**

（啊哈，我刚刚阅读了有关`die-roll`生成密钥的功能的评论。令人困惑 - 不确定上述内容在这种情况下是否有帮助，但我不确定你的要求实际上是否有意义......）

# asp.net-mvc-3 - MVC 3 Ajax.BeginForm 提交问题

> ID：11599662
> 
> 赞同：0
> 
> 时间：2012-07-22T10:53:23.550
> 
> 标签：asp.net-mvc-3, asp.net-ajax, unobtrusive-ajax

我试图通过按下最终会刷新表格的按钮来提交表单

这是表格：

```
@{
AjaxOptions ajaxOpts = new AjaxOptions
{
    Confirm = "start ???",
    UpdateTargetId = "MainTable",
    InsertionMode = InsertionMode.Replace,
    Url = Url.Action("Refresh","MainScreen"),
    LoadingElementId = "loading",
    LoadingElementDuration = 2000,

};}
@using (Ajax.BeginForm(ajaxOpts)){

<div id="loading" style="display: none; color: Red; font-weight: bold">
    <p>
        Loading Data...</p>
</div>

<div id="header">

    <input type="button" value="Submit Form" />

</div>
<table id="MainTable">
    <tr>
        <th>
            ServiceId
        </th>
        <th>
            ServiceInstanceId
        </th>
        <th>
            MessageRole
        </th>
        <th>
            Datetime
        </th>
        <th>
            Message
        </th>
        <th>
            Status
        </th>
        <th>
            ESBErrorCode
        </th>
        <th>
            ESBTecnicalErrorCode
        </th>
        <th>
            ErrorDescription
        </th>
        <th>
            PortName
        </th>
        <th>
            MachineName
        </th>
        <th>
            ConsumerId
        </th>
        <th>
            ExternalId
        </th>
        <th>
            ConsumerMachineName
        </th>
        <th>
            ServiceBehavior
        </th>
        <th>
            RouterConsumerId
        </th>
        <th>
        </th>
    </tr>
    @foreach (var item in Model)
    {
        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.ServiceId)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.ServiceInstanceId)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.MessageRole)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Datetime)
            </td>
            <td>
                \
                @Html.DisplayFor(modelItem => item.Message.Context)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Status)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.ESBErrorCode)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.ESBTecnicalErrorCode)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.ErrorDescription)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.PortName)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.MachineName)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.ConsumerId)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.ExternalId)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.ConsumerMachineName)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.ServiceBehavior)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.RouterConsumerId)
            </td>
        </tr>
    }
</table>
} 
```

这是控制器：

> 公共视图结果刷新（）{

```
 var tracks = db.Tracks.Include(t => t.Message);
        return View(tracks.ToList());
    } 
```

出于某种原因，当我提交按钮时没有任何反应

我已经添加了

```
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.min.js")" type="text/javascript"></script> 
```

谢谢三木

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T11:35:30.207

不显眼的 js 助手监听提交事件

```
$("form[data-ajax=true]").live("submit"... 
```

但是您的“提交”按钮是“只是一个按钮”而不是提交按钮：

```
<input type="button" value="Submit Form" /> 
```

将其更改为`type="submit"`，它应该可以工作：

```
<input type="submit" value="Submit Form" /> 
```

# javascript - 获取选中复选框的值？

> ID：11599666
> 
> 赞同：226
> 
> 时间：2012-07-22T10:54:07.680
> 
> 标签：javascript, checkbox

所以我有如下代码：

```
<input class="messageCheckbox" type="checkbox" value="3" name="mailId[]">
<input class="messageCheckbox" type="checkbox" value="1" name="mailId[]"> 
```

我只需要 Javascript 来获取当前选中的任何复选框的值。

**编辑**：要添加，只有一个复选框。

* * *

## 回答 #1

> 赞同：310
> 
> 时间：2015-03-27T13:19:40.117

以上都不适合我，但只需使用这个：

```
document.querySelector('.messageCheckbox').checked; 
```

* * *

## 回答 #2

> 赞同：301
> 
> 时间：2012-07-22T11:06:03.337

*对于现代浏览器*：

```
var checkedValue = document.querySelector('.messageCheckbox:checked').value; 
```

*通过使用`jQuery`*：

```
var checkedValue = $('.messageCheckbox:checked').val(); 
```

*纯 javascript 没有`jQuery`*：

```
var checkedValue = null; 
var inputElements = document.getElementsByClassName('messageCheckbox');
for(var i=0; inputElements[i]; ++i){
      if(inputElements[i].checked){
           checkedValue = inputElements[i].value;
           break;
      }
} 
```

* * *

## 回答 #3

> 赞同：131
> 
> 时间：2013-09-02T13:01:44.440

我在我的代码中使用它。试试这个

```
var x=$("#checkbox").is(":checked"); 
```

如果复选框被选中，则为`x`真，否则为假。

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2012-07-22T11:02:44.330

在普通的javascript中：

```
function test() {
    var cboxes = document.getElementsByName('mailId[]');
    var len = cboxes.length;
    for (var i=0; i<len; i++) {
        alert(i + (cboxes[i].checked?' checked ':' unchecked ') + cboxes[i].value);
    }
} 
```

```
function selectOnlyOne(current_clicked) {
    var cboxes = document.getElementsByName('mailId[]');
    var len = cboxes.length;
    for (var i=0; i<len; i++) {
        cboxes[i].checked = (cboxes[i] == current);
    }
} 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2018-04-08T08:52:21.277

*这并不能直接回答问题，但可能会对未来的访问者有所帮助。*

* * *

如果您希望变量始终是复选框的当前状态（而不是必须不断检查其状态），您可以修改`onchange`事件以设置该变量。

这可以在 HTML 中完成：

```
<input class='messageCheckbox' type='checkbox' onchange='some_var=this.checked;'> 
```

或使用 JavaScript：

```
cb = document.getElementsByClassName('messageCheckbox')[0]
cb.addEventListener('change', function(){some_var = this.checked}) 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2016-08-10T15:16:59.040

```
$(document).ready(function() {
  var ckbox = $("input[name='ips']");
  var chkId = '';
  $('input').on('click', function() {

    if (ckbox.is(':checked')) {
      $("input[name='ips']:checked").each ( function() {
   			chkId = $(this).val() + ",";
        chkId = chkId.slice(0, -1);
 	  });

       alert ( $(this).val() ); // return all values of checkboxes checked
       alert(chkId); // return value of checkbox checked
    }     
  });
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<input type="checkbox" name="ips" value="12520">
<input type="checkbox" name="ips" value="12521">
<input type="checkbox" name="ips" value="12522">
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-07-22T10:57:42.393

用这个：

```
alert($(".messageCheckbox").is(":checked").val()) 
```

这假设要检查的复选框具有“messageCheckbox”类，否则您必须检查输入是否为复选框类型等。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2019-02-17T19:45:03.633

```
<input class="messageCheckbox" type="checkbox" onchange="getValue(this.value)" value="3" name="mailId[]">

<input class="messageCheckbox" type="checkbox" onchange="getValue(this.value)" value="1" name="mailId[]"> 
```

```
function getValue(value){
    alert(value);
} 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2020-01-07T07:47:53.080

当未选中该框时，以上所有方法都对我不起作用，而不会在控制台中引发错误，因此我按照这些思路做了一些事情（onclick 和复选框功能仅用于演示目的，在我的用例中，它是一部分更大的表单提交功能）：

```
function checkbox() {
  var checked = false;
  if (document.querySelector('#opt1:checked')) {
     checked = true;
  }
  document.getElementById('msg').innerText = checked;
}
```

```
<input type="checkbox" onclick="checkbox()" id="opt1"> <span id="msg">Click The Box</span>
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-04-19T14:11:52.680

如果您使用[Semantic UI React](https://react.semantic-ui.com)，`data`则作为第二个参数传递给`onChange`事件。

因此，您可以`checked`按如下方式访问该属性：

```
<Checkbox label="Conference" onChange={(e, d) => console.log(d.checked)} /> 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-12-08T22:35:16.937

如果您想使用 jQuery 获取所有复选框的值，这可能会对您有所帮助。这将解析列表，并根据所需的结果，您可以执行其他代码。顺便说一句，为此，不需要用括号 [] 命名输入。我离开了他们。

```
 $(document).on("change", ".messageCheckbox", function(evnt){
    var data = $(".messageCheckbox");
    data.each(function(){
      console.log(this.defaultValue, this.checked);
      // Do something... 
    });
  }); /* END LISTENER messageCheckbox */ 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-11-10T03:58:18.543

*纯 JavaScript 和现代浏览器*

```
// for boolean
document.querySelector(`#isDebugMode`).checked

// checked means specific values
document.querySelector(`#size:checked`)?.value ?? defaultSize 
```

## 例子

```
<form>
  <input type="checkbox" id="isDebugMode"><br>
  <input type="checkbox" value="3" id="size"><br>
  <input type="submit">
</form>

<script>
  document.querySelector(`form`).onsubmit = () => {
    const isDebugMode = document.querySelector(`#isDebugMode`).checked
    const defaultSize = "10"
    const size = document.querySelector(`#size:checked`)?.value ?? defaultSize
    //  for defaultSize is undefined or null
    // const size = document.querySelector(`#size:checked`)?.value
    console.log({isDebugMode, size})
    return false
  }
</script>
```

*   [Optional_chaining (?.)](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Optional_chaining)

* * *

## 回答 #13

> 赞同：-5
> 
> 时间：2016-08-03T02:18:27.187

在我的项目中，我通常使用这个片段：

```
var type[];
$("input[name='messageCheckbox']:checked").each(function (i) {
                type[i] = $(this).val();
            }); 
```

而且效果很好。

# vba - 如何将多列从文本转换为日期？

> ID：11599672
> 
> 赞同：1
> 
> 时间：2012-07-22T10:54:51.423
> 
> 标签：vba, excel, excel-2007

在我的 excel 文件中，有一百列。我想将一些列（例如列 A、C、F、G..）从文本转换为日期。如果手动逐列更改每一列，确实需要时间。我该怎么做 ？通过使用 VBA？

原始文本列格式就像 '31-Dec-2011 00:00:00'。我想转换为 'dd/mm/yyyy' 31/12/2011

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T11:38:11.187

如果您真的想在每个单元格中缩短时间，那么这可能是一种方法：

如果目标时间在名为“target”的工作表的 A 列中，并且 A1 中的列标题为“StartTime”

您可以修改以下内容并添加一个参数，以便它采用列地址。然后可以多次调用它来对多个列执行此操作。

```
Sub ChopOffTime()

dim mySheetName as string
mysheetname = "target" '<<<<change to your sheet name

myLstRow = Excel.ActiveWorkbook.Sheets(mysheetname ).Cells(Excel.ActiveWorkbook.Sheets(mysheetname ).Rows.Count, Excel.ActiveWorkbook.Sheets(mysheetname).Range("A2").Column).End(Excel.xlUp).Row
With Excel.ActiveWorkbook.Sheets(mysheetname)

            .Columns("B:B").Insert Excel.xlToRight
            .Range("B2:B" & myLstRow).FormulaR1C1 = "=TIME(HOUR(RC[-1]),MINUTE(RC[-1]), SECOND(RC[-1]))"
            .Range("B1") = "StartTime" '<<<<<change to appropriate header
            .Columns("B:B").Copy
            .Columns("A:A").PasteSpecial Excel.xlPasteValues
            .Columns("B:B").Delete Excel.xlToLeft

End With

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T13:37:04.723

对有问题的列使用以下内容：

```
Columns("A:A").Select
    Selection.NumberFormat = "m/d/yyyy" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T03:59:44.583

谢谢大家。

为了简化程序，我只是开发了一些宏供用户运行以更改列格式，然后他们可以将excel导入mdb而不会出错。

# javascript - 有没有一种存储图像变量的捷径？

> ID：11599673
> 
> 赞同：0
> 
> 时间：2012-07-22T10:55:02.997
> 
> 标签：javascript

我想找到一种将图像及其源存储在变量中的更短方法。

看起来像：

```
ctx = document.getElementById("canvas").getContext('2d'); 
```

但对于：

```
var img = new Image();
img.src = "image.png"; 
```

这可以像第一个例子一样在一条干净的线上完成吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T11:03:16.120

听起来您基本上是在询问`Image`构造函数是否可以接受 URL 作为参数。答案是不。当然，你可以写一个函数：

```
function createImage(src) {
    var img = new Image();
    img.src = src;
    return img;
} 
```

...然后使用它：

```
var img = createImage("image.png"); 
```

如果你想`load`在这些图像上使用事件，你的函数必须支持它，因为挂钩`load`返回`Image`是不可靠的。（有一个竞争条件，浏览器可以在设置`load`之后触发事件，`src`但在您挂钩事件之前 - 是的，即使 JavaScript 本身在浏览器上是单线程的。）可能看起来像这样：

```
function createImage(src, loadHandler) {
    var img = new Image();
    if (loadHandler) {
        img.load = loadHandler;
    }
    img.src = src;
    return img;
} 
```

...然后使用它：

```
var img = createImage("image.png");             // No `load` handler
// or
var img = createImage("image.png", handler);    // Using a `load` handler
// or
var img = createImage("image.png", function() { // Using an inline `load` handler
    // ...the image loaded...
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T11:12:04.077

您也可以使用[Object.create](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/create/)而不是新建一个对象`new`，然后您可以这样做：

```
var img = Object.create(Image.prototype, {src: {value: "image.png"}}); 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2019-07-30T11:00:04.000

或者你可以简单地写`var myImage = "<img src='../images/myImage.jpg'>";`

# http - 需要JS文本！插件和加载超时

> ID：11599676
> 
> 赞同：6
> 
> 时间：2012-07-22T10:55:33.990
> 
> 标签：http, firefox, requirejs

我正在使用文本！RequireJS 和 Firefox 的插件似乎讨厌我的文本模板。我的代码似乎在 Chrome 和 Safari 中运行良好。这是我得到的错误。

```
Error: Load timeout for modules: text!templates/a.html_unnormalized2,
       text!templates/b.html_unnormalized3,
       text!templates/c.html_unnormalized4,    // _unnormalized# <- What is this?
       ...
       text!templates/n.html,    // I don't see _unnormalized here... why?
       text!templates/o.html,
       text!templates/p.html,
       ...
       http://requirejs.org/docs/errors.html#timeout 
```

首先，_unnormalized# 是什么意思？它似乎将自己附加到我的一些模板的文件名中，但不是全部。但是，我的所有模板都列在错误消息中。

查看网络检查器，它似乎正在下载必要的模板文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T12:36:28.780

我想我已经弄清楚了其中的一部分，尽管我不确定细节。我注意到当我使用 Firebug 并且在控制台选项中打开了 ShowXMLHttpRequests 时会发生此错误。通过关闭此选项，页面加载顺利。

你觉得伙计们，这是一个 Firebug 问题吗？还是 requireJS 问题？我很想了解为什么会发生这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-24T10:32:05.970

就我而言，如果我只是禁用 FireBug 的“脚本”选项卡，就不会再出现冻结或超时错误。

火狐 27.0.1 火狐 1.12.7

# html - 说“JSP 是 HTML”是否有效？

> ID：11599677
> 
> 赞同：0
> 
> 时间：2012-07-22T10:55:44.843
> 
> 标签：html, jsp

听起来可能很愚蠢，但令我惊讶的是，它来自一个受过良好教育的 Java 专业人士。他辩称：

> “JSP 是 HTML。看看一些不错的 jsp/servlet 应用程序，你会发现超过 90% 的 jsp 文件是 html。”

据他介绍，由于JSP页面包含很多HTML，所以JSP就是HTML。然后他继续

> “体面的 jsp 文件是基本的 html 扩展，带有一些额外的标签和 el 函数。”

我对这些陈述感到敬畏。我错过了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T12:07:33.907

恕我直言，“JSP 是 HTML”的概括有点过头了。

我同意，在大多数情况下，JSP**文件**中会有很多 html，但这只是因为用户发出的大多数 http 请求都是针对 html 文件的（然后它们自己对图像、脚本等发出请求）。 .)。

如果每个人都开始请求 lisp 文件，那么大多数 JSP 文件将充满括号，但 JSP 技术本身将保持不变。

当然，大多数附加标签和 el 函数都处理与 HTML 相关的内容，因为这对大多数开发人员最有用。

理论上，无论浏览器在请求的接受标头中设置什么内容类型，您都应该能够使用 JSP 进行响应。看看这个例子：[http ://code.google.com/p/json-simple/wiki/JSPAndAJAXExamples](http://code.google.com/p/json-simple/wiki/JSPAndAJAXExamples)

此外，必须认识到一个事实：在运行时，没有 JSP。然后您会看到将 HTML 写入响应的不是 JSP，而是 Java。

这是因为所有 JSP 都被编译（或理想情况下是预编译）成 Java servlet，它们反转您在 JSP 文件中编写的内容并将该内容写入流中。所以在这方面，JSP 与其说是 HTML 文件，不如说是一段 Java 代码......

至于剩下的关于什么是有效的 html、css 和验证的讨论，这只是一个大红鲱鱼。

我的两分钱。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T10:58:40.453

好吧，如果文件中包含 PHP，则整个文件不会是 HTML，而是包含 HTML 的 PHP 脚本。一旦 PHP 处理它并返回您的响应，它就会变成 HTML。（显然，只有当您的 PHP 返回 HTML 时才会出现这种情况，它可能会返回其他内容）。

我不确定我是否理解：

> 甚至不是所有的 html 都是 html 一个有效的声明:)

如果他试图说并非所有 HTML 都是有效的 HTML，那么他是正确的，有某些标准、某些标签、某些地方可以使用 HTML 规范中所有可用的某些属性。

**阅读对话后编辑：**

好的，所以我刚刚阅读了对话，我所说的就是，他说所有 html 都不是有效的 html，这是真的。仅仅因为它有 html 标签和一些文本并不意味着它有效，你可以通过[这里检查它是否有效。](http://validator.w3.org/)

至于 JSP 等不是有效的 html，这是正确的，但它们确实/可以产生有效的 html。JSP/PHP/ASP 页面不是 HTML，但其中有/可以有 html。当向服务器发出请求时，该文件在服务器端进行处理并在 http 响应中返回您的 HTML，这又可能是也可能不是有效的 HTML。

此外，他们告诉您的有关 HTML 的内容是正确的，它本身不是样式，它是一种标记，可以告诉浏览器您的文档结构。浏览器对这些特定元素有自己的默认样式，您可以通过在 CSS 中实现自己的样式来覆盖这些样式。

# iphone - 如何清除所有旧保存数据并仅显示核心数据 xcode 中的最后一个数据？

> ID：11599680
> 
> 赞同：0
> 
> 时间：2012-07-22T10:56:01.623
> 
> 标签：iphone, ios5, xcode4.3

我是 xcode 的新手。这是我的调试说：

```
2012-07-22 18:40:51.787 TestSaveData[2329:fb03] Saved for number one
2012-07-22 18:40:55.159 TestSaveData[2329:fb03] Successfully load for test nombre one
2012-07-22 18:40:55.160 TestSaveData[2329:fb03] Successfully load for test number 2
2012-07-22 18:40:55.161 TestSaveData[2329:fb03] Successfully load for test number two
2012-07-22 18:40:55.161 TestSaveData[2329:fb03] Successfully load for test one
2012-07-22 18:40:55.162 TestSaveData[2329:fb03] Successfully load for test again
2012-07-22 18:40:55.163 TestSaveData[2329:fb03] Successfully load for 
2012-07-22 18:40:55.164 TestSaveData[2329:fb03] Successfully load for test one
2012-07-22 18:40:55.165 TestSaveData[2329:fb03] Successfully load for test one again
2012-07-22 18:40:55.166 TestSaveData[2329:fb03] Successfully load for test one again
2012-07-22 18:40:55.166 TestSaveData[2329:fb03] Successfully load for 1
2012-07-22 18:40:55.167 TestSaveData[2329:fb03] Successfully load for (null)
2012-07-22 18:40:55.170 TestSaveData[2329:fb03] Successfully load for number one 
```

第一行是我使用 UITextField 的输入，我写了“第一”并使用此代码使用保存按钮 1 保存它，并在我按下按钮 1 时显示它

`2012-07-22 18:40:51.787 TestSaveData[2329:fb03] Saved for number one`

```
- (IBAction)button1:(id)sender
{
    TestSaveDataAppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];
    NSManagedObjectContext *context = [appDelegate managedObjectContext];
    Highscore *record = [NSEntityDescription insertNewObjectForEntityForName:@"Highscore" inManagedObjectContext:context];
    record.highscore1 = textField.text;
    NSLog(@"Saved for %@", textField.text);
    NSError *error;
    if (![context save:&error])
    {
        NSLog(@"Error");
    }
} 
```

当我单击 button2 时，我的调试视图会查看我所有的旧输入数据。但在我的 UILabel 中，使用下面的这个按钮 2 只显示我的最后一个输入是“第一”

```
- (IBAction)button2:(id)sender
{
    TestSaveDataAppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];
    NSManagedObjectContext *context = [appDelegate managedObjectContext];
    NSFetchRequest *request = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"Highscore" inManagedObjectContext:context];
    [request setEntity:entity];
    NSError *error;
    if (![context save:&error])
    {
        NSLog(@"Error");
    }
    NSArray *array = [context executeFetchRequest:request error:&error];
    for (Highscore *record in array)
    {
        label.text = record.highscore1;
        NSLog(@"Successfully load for %@", record.highscore1);
    }
} 
```

我的问题是，我有没有可能只显示最后一个输入？在这种情况下，如果我保存“第一”并且调试只显示“第一”而不显示我的旧数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T11:59:18.397

您可以在您的`Highscore`实体中包含一个日期/时间字段，按该字段排序，然后将其设置`fetchLimit`为 1。您将保存分数的历史记录，但仅检索最新的。

# jquery - 组合多个jquery代码实例

> ID：11599681
> 
> 赞同：2
> 
> 时间：2012-07-22T10:56:04.637
> 
> 标签：jquery, instances

我目前正在使用以下来切换多个 div，但我想知道我是否可以将所有这些组合成一个？

```
<script type="text/javascript">
$(document).ready(function() {
    $("#tvehicle").click(function() {
        $("#div7").toggle();
    });
});
</script>

<script type="text/javascript">
$(document).ready(function() {
    $("#tvehicle2").click(function() {
        $("#vehicle2").toggle();
    });
});
</script>

<script type="text/javascript">
$(document).ready(function() {
    $("#tproperty").click(function() {
        $("#div8").toggle();
    });
});
</script>

<script type="text/javascript">
$(document).ready(function() {
    $("#thproperty1").click(function() {
        $("#hproperty1").toggle();
    });
});
</script>

<script type="text/javascript">
$(document).ready(function() {
    $("#thproperty2").click(function() {
        $("#hproperty2").toggle();
    });
});
</script>

<script type="text/javascript">
$(document).ready(function() {
    $("#thproperty3").click(function() {
        $("#hproperty3").toggle();
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T11:00:52.687

```
 <script type="text/javascript">
$(document).ready(function(){
 $("#tvehicle").click(function(){
  $("#div7").toggle();
 });

$("#tvehicle2").click(function(){
 $("#vehicle2").toggle();
});

//AND SO ON...

});
</script> 
```

您可以将所有函数放在一个 document.ready 函数中。像上面一样:)...而且你不必`<script>`为每个功能都有新的标签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T11:08:46.450

为所有 div 添加一个类，例如：

```
<div id="tvehicle2" class="toggleable"> ... </div> 
```

那么你可以这样做：

```
$(".toggleable").click(function () {
    $(this).toggle();
}); 
```

如果您不想（或不能）为所有可切换项目添加一个类，您还可以在选择器中组合多个 id-references：

```
$('#tvehicle1, #tvehicle2, #tv3').click(function () {
    $(this).toggle();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T11:30:48.100

您可以使用数据属性来指定要切换的元素。 [例子](http://jsfiddle.net/9tEF7/6/)

```
$(document).ready(function(){
var toggler = function() {
   var toToggle = $(this).data().toggleId; //Id of an element to toggle

   $("#" + toToggle).toggle();        
};

$(".togglers").on("click", ".toggler", toggler);
}); 
```

HTML结构

```
<div class="togglers">
<div class="toggler" data-toggle-id="to-toggle-1">Click to toggle 1</div>

<div class="to-toggle" id="to-toggle-1">I will be toggled #1</div>

<div class="toggler" data-toggle-id="to-toggle-2">Click to toggle 2</div>

<div class="to-toggle" id="to-toggle-2">I will be toggled #2</div>

<div class="toggler" data-toggle-id="to-toggle-3">Click to toggle 3</div>

<div class="to-toggle" id="to-toggle-3">I will be toggled #3</div>
</div>​ 
```

​</p>

# haskell - 受限单子的当前状态是什么？

> ID：11599685
> 
> 赞同：24
> 
> 时间：2012-07-22T10:56:50.380
> 
> 标签：haskell, monads

至少可以追溯到 1990 年代后期，有人希望以友好的方式将[受限单子集成到 Haskell 中。](http://okmij.org/ftp/Haskell/types.html#restricted-datatypes)

例如，如果没有受限制的 monad，您将无法从 或概率分布中创建`Set`有效`Map`的[monad](http://hackage.haskell.org/packages/archive/probability/0.2.2/doc/html/Numeric-Probability-Distribution.html)。这是几年前的一个 SO[问题，其他人遇到了这个问题。](https://stackoverflow.com/questions/379546/restricting-a-monad-to-a-type-class)

人们提出了各种解决方法，包括：

*   为每个可能的限制创建一个[新的类型类。](http://hsenag.livejournal.com/11803.html)

*   使用[模板 Haskell](http://www.randomhacks.net/articles/2007/03/15/data-set-monad-haskell-macros)。

*   使用[约束种类](http://blog.omega-prime.co.uk/?p=127)。

然而，这些方法似乎都不是“规范的”。[我在 2007 年的这篇博文](http://blog.sigfpe.com/2007/06/how-to-write-tolerably-efficient.html)中找到了来自 Don Stewart 的评论，他在其中暗示我们“非常接近”拥有带[索引类型](http://www.haskell.org/haskellwiki/GHC/Indexed_types)的受限 monad 。

目前的状态是什么？现在有一种“规范”的方式来做受限制的单子吗？还是我们仍然生活在变通方法中？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-22T18:48:06.787

Anders Persson、Emil Axelsson 和 Josef Svenningson 最近发表了一篇论文，展示了一种编码受限单子的方法。我忘记了细节，但我记得那是一篇不错的论文。

> 佩尔松，A。阿克塞尔森，E。斯文宁森，J. (2011)。[*嵌入式语言的通用单子结构*](http://www.cse.chalmers.se/~josefs/publications/paper21_cameraready.pdf)。IFL 2011，第 23 届函数式语言实现与应用研讨会。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-07-26T06:26:26.677

实际上，有可能获得一个有效的 Set monad 作为常规 monad，没有任何限制。以两种不同的方式。以下文章解释了这两种情况：

[http://okmij.org/ftp/Haskell/set-monad.html](http://okmij.org/ftp/Haskell/set-monad.html)

该文章还指出，受限制的单子实际上非常受限制，并且排除了许多单子成语。我猜想实现方法是通用的，任何受限制的monad都可以变成通常的monad，而不会损失效率。所以，看起来我们根本不需要受限单子。

# asp.net - 当 ~/plugin 目录的内容更改时触发 ASP.NET 网站的重新编译（类似于 ~/bin）

> ID：11599692
> 
> 赞同：0
> 
> 时间：2012-07-22T10:59:17.443
> 
> 标签：asp.net, asp.net-mvc, iis, web-config

我的（MVC4-）网站根目录中有一个插件目录，并希望 IIS 以与处理 ~/bin 目录相同的方式处理该目录：更改应立即触发重新编译。这可以通过 web.config 或任何其他方法实现吗？

我试图避免使用巧妙的批处理文件接触 web.config 以触发重新加载或类似的解决方法。

# r - 如何绘制有界的数据

> ID：11599693
> 
> 赞同：0
> 
> 时间：2012-07-22T10:59:18.263
> 
> 标签：r, data-visualization

我有这样的数据：

```
 yr      X  lower  upper
1 2004 0.2852 0.3927 0.1888
2 2005 0.3710 0.2385 0.5093
3 2006 0.3297 0.2177 0.4557
4 2007 0.2230 0.1424 0.3138
5 2008 0.3028 0.1952 0.4237
6 2009 0.3906 0.2798 0.5226
7 2010 0.3382 0.2343 0.4467 
```

以下是一些可重现的数据：

```
dt <- structure(list(yr = 2004:2010, X = c(0.2852, 0.371, 0.3297, 0.223, 0.3028, 0.3906, 0.3382), lower = c(0.3927, 0.2385, 0.2177, 0.1424, 0.1952, 0.2798, 0.2343), upper = c(0.1888, 0.5093, 0.4557, 0.3138, 0.4237, 0.5226, 0.4467)), .Names = c("yr", "X", "lower", "upper"), class = "data.frame", row.names = c(NA, -7L)) 
```

我想绘制这个，结果将在演示文稿中显示，所以我想让它看起来尽可能好 - 很抱歉使用主观的“好”，但我不知道该怎么说它 ！我试过这个：

```
library(ggplot2)

ggplot(dt, aes(x=yr, y=X, group=1)) +
    geom_line() +
    geom_errorbar(width=.1, aes(ymin=lower, ymax=upper)) +
    geom_point(shape=21, size=3, fill="blue") +
    ylim(0,0.6) 
```

但我不喜欢结果——它看起来简单而无聊： ![在此处输入图像描述](../Images/564461f3f50181a682b9aeb7c06ba265.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T11:30:37.257

您可以使用功能区而不是错误栏

```
dt <- structure(list(yr = 2004:2010, 
    X = c(0.2852, 0.371, 0.3297, 0.223, 0.3028, 0.3906, 0.3382), 
    lower = c(0.3927, 0.2385, 0.2177, 0.1424, 0.1952, 0.2798, 0.2343), 
    upper = c(0.1888, 0.5093, 0.4557, 0.3138, 0.4237, 0.5226, 0.4467)),
  .Names = c("yr", "X", "lower", "upper"), class = "data.frame", 
    row.names = c(NA, -7L))
library(ggplot2)
ggplot(dt, aes(x=yr, y=X, group=1, ymin = lower, ymax = upper)) +
    geom_ribbon(alpha = 0.2) +
    geom_line() +
    geom_point(shape=21, size=3, fill="blue") +
    ylim(0,0.6) 
```

![在此处输入图像描述](../Images/514c7fcacbd72156ab234cc2603b7002.png)

# css - 添加自定义主题 - scss

> ID：11599695
> 
> 赞同：1
> 
> 时间：2012-07-22T10:59:52.267
> 
> 标签：css, extjs4, sass, extjs4.1

我收到此错误；

```
Syntax error: File to import not found or unreadable: ext4/default/all.
              Load paths:
                C:/xampp/htdocs/proj/app/resources/sass
                E:/Ruby193/lib/ruby/gems/1.9.1/gems/compass-0.12.2/frameworks/blueprint/stylesheets
                E:/Ruby193/lib/ruby/gems/1.9.1/gems/compass-0.12.2/frameworks/compass/stylesheets
                Compass::SpriteImporter
        on line 8 of C:/xampp/htdocs/proj/app/resources/sass/my-ext-theme.scss 
```

在`C:/xampp/htdocs/proj/app/resources/sass/my-ext-theme.scss`文件中，我的第 8 行看起来像；

```
@import 'ext4/default/all'; 
```

我不知道是什么导致了这个问题。有人可以指导我做错什么吗？

**更新**

EXTJS 文件放在**app/extjs**

然后 ; **SASS** 应用程序/资源/sass/my-ext-theme.scss 应用程序/资源/sass/config.rb

**CSS** 应用程序/资源/css/my-ext-theme.css

**我用来编译的命令**

\app\resources >**指南针编译**

# xml - 无法理解如何在格式编号 XML 中使用逗号

> ID：11599696
> 
> 赞同：2
> 
> 时间：2012-07-22T10:59:51.530
> 
> 标签：xml, xslt

我在理解如何在 XML 格式编号中使用逗号时遇到了一些困难。例如， `<xsl:value-of select="format-number(123456,'####,##')"/>`

给我 12,34,56 但从我读到的，逗号是组分隔符，所以我认为它应该是 1234,56。显然，我理解错了。有人可以向我解释一下吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T15:09:51.673

我可以理解为什么你会期望 1234,56，这也是我所期望的，直到我仔细查看了规范。它会拍摄您的照片####,## 并计算“整数部分分组位置”作为您的图片中包含分组分隔符的位置列表：此列表很简单 (2)。然后它说“如果这些整数部分分组位置是定期的（也就是说，如果它们形成一个序列 N，2N，3N，......对于某个整数值 N，包括只有一个数字的情况在列表中），那么[分组位置的]序列包含 N 的所有整数倍，以容纳最大可能的数字。”

所以这里的分组位置序列最终是 (2,4,6,8,...)。您的图片在位置 4 没有分组分隔符这一事实不符合规则 - 它可能应该，但它没有。您必须使用像 #,################,## 这样的图片来实现这种格式。

顺便说一下，这是来自 XSLT 2.0。XSLT 1.0 规范参考了 JDK 1.1.8 规范的 DecimalFormat 定义了 format-number，现在很难掌握；如果我没记错的话，它会留下许多未回答的详细问题。

# apache - .htaccess 规则：删除参数

> ID：11599712
> 
> 赞同：0
> 
> 时间：2012-07-22T11:03:20.317
> 
> 标签：apache, mod-rewrite

我需要为对我的站点的所有 GET 请求创建一个规则，以便：

获取 /articles/topic1.html?showall=1

改写为：

获取 /articles/topic1.html

我的 Joomla 网站上有以下 .htaccess 文件：

```
RewriteEngine On

RewriteCond %{QUERY_STRING} mosConfig_[a-zA-Z_]{1,21}(=|%3D) [OR]
RewriteCond %{QUERY_STRING} base64_encode.*(.*) [OR]
RewriteCond %{QUERY_STRING} (<|%3C).*script.*(>|%3E) [NC,OR]
RewriteCond %{QUERY_STRING} GLOBALS(=|[|%[0-9A-Z]{0,2}) [OR]
RewriteCond %{QUERY_STRING} _REQUEST(=|[|%[0-9A-Z]{0,2})
RewriteRule ^(.*)$ index.php [F,L]

########## This is the Rule I have added ################
RewriteRule ^(.*)$ /$showall=1 [R=301,L]

RewriteBase / 
```

我在我添加的行上添加了评论。不幸的是它不起作用，浏览器警告我我已经生成了一个循环......

知道如何解决吗？谢谢弗兰克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T20:01:08.337

尝试将其替换为：

```
RewriteCond %{QUERY_STRING} ^showall=([0-9])+$
RewriteRule ^articles/topic[0-9]*\.html /articles/topic%1.html? [L] 
```

或者如果它是真的`topic1.html`，那么你想要这个：

```
RewriteCond %{QUERY_STRING} ^showall=1$
RewriteRule ^articles/topic1\.html /articles/topic1.html? [L] 
```

# php - 检索 exec() 输出时出错

> ID：11599714
> 
> 赞同：0
> 
> 时间：2012-07-22T11:03:50.527
> 
> 标签：php, linux, curl

我正在使用 exec 来获取 curl 输出（我需要使用 curl 作为 linux 命令）。

当我使用 php_cli 启动文件时，我看到一个 curl 输出：

```
 % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100 75480  100 75480    0     0  55411      0  0:00:01  0:00:01 --:--:-- 60432 
```

这意味着所有文件都已正确下载（~ 75 KB）。

我有这个代码：

```
$page = exec('curl http://www.example.com/test.html'); 
```

我得到一个非常奇怪的输出，我只得到：`</html>`

（这是我的**test.html**文件的结尾）

我真的不明白原因，CURL 似乎下载了所有文件，但在 $page 我只得到 7 个字符（最新的 7 个字符）。

为什么？

PS我知道我可以使用其他php函数下载源代码，但我必须使用curl（作为linux命令）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T11:12:01.270

[RTM 为`exec()`](http://www.php.net/manual/en/function.exec.php)

它返回

> 命令结果的最后一行。

您必须将第二个参数设置为`exec()`包含执行命令的所有输出。

例子：

```
<?php
$allOutputLines = array();
$returnCode = 0;
$lastOutputLine = exec(
    'curl http://www.example.com/test.html',
    $allOutputLines,
    $returnCode
);

echo 'The command was executed and with return code: ' . $returnCode . "\n";
echo 'The last line outputted by the command was: ' . $lastOutputLine . "\n";
echo 'The full command output was: ' . "\n";
echo implode("\n", $allOutputLines) . "\n";

?> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-22T11:18:20.187

除非这是一个非常奇怪的要求，否则为什么不使用 PHP cURL 库呢？您可以更好地控制发生的事情以及调用参数（超时等）。

如果你真的**必须**使用 PHP 中的 curl 命令行二进制文件：

```
1) Use shell_exec() (this solves your problem)
2) Use 2>&1 at end of command (you might need stderr output as well as stdout)
3) Use the full path to curl utility: do not rely on PATH setting. 
```

# javascript - Javascript/JQuery 样式 - #button:hover 在单击全屏后保持活动状态

> ID：11599715
> 
> 赞同：0
> 
> 时间：2012-07-22T11:04:16.510
> 
> 标签：javascript, jquery, hover

我知道Javascript的全屏功能还是比较新的，所以我不确定这是否是一个尚未解决的错误，是否有一个简单的解决方案，或者我只是犯了一个愚蠢的错误.. .

我在 div 中有一个输入按钮。单击时，输入按钮使 div 全屏显示。这个输入按钮有一个 CSS 背景图像，和一个使用相同背景图像的悬停状态，但改变了背景位置（以消除对多个图像的需要）。再次单击按钮时，div 退出全屏。

当 div 进入全屏时，问题就来了。该按钮在点击时处于悬停状态，当 div 变为全屏时保持悬停状态。div 将屏幕上的按钮重新定位到它不再位于光标下方的位置（就像它应该的那样），但由于某种原因，按钮仍然认为它应该处于悬停状态。直到我将光标移回到按钮上或离开按钮，按钮才会“取消悬停”并恢复其正常的悬停/取消悬停行为。我需要的是让按钮在 div 更改为全屏后不保持悬停状态。

下面是一些简化的代码，但我省略了 RunPrefixMethod 函数，因为它是通用的，我认为没有必要解决这个问题。如果有必要，请告诉我。

哦，我使用的是最新版本的 Firefox，还没有在任何其他浏览器中测试过。我知道全屏功能仅限于更新的浏览器，并且支持它的浏览器存在问题。感谢您的任何帮助，您可以提供。

**HTML**：

```
<div id="fullBox">
    <input type="submit" value="" id="fullbtn" class="btn" onclick="fullscreen();"/>
</div> 
```

**CSS**：

```
#fullBox {
    width:900px;
    height:440px;
    position:absolute;
}
#fullbtn {
    width:44px;
    height:31px;
    background: url(btn_full.png) no-repeat top left;
}
.btn:hover {
    background-position: bottom;
} 
```

**JavaScript**：

```
function fullscreen() {
    var e = document.getElementById("fullBox");
    if (RunPrefixMethod(document, "FullScreen") || 
        RunPrefixMethod(document, "IsFullScreen")) {
        RunPrefixMethod(document, "CancelFullScreen");
    }
    else {
        RunPrefixMethod(e, "RequestFullScreen");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T13:41:56.960

尝试这个：

**HTML**：

```
<div id="fullBox">
    <input type="submit" value="" onmouseover="this.className='btn hover'" onmouseout="this.className='btn'" id="fullbtn" class="btn" onclick="fullscreen();"/>
</div> 
```

**CSS**：

```
#fullBox {
    width:900px;
    height:440px;
    position:absolute;
}
#fullbtn {
    width:44px;
    height:31px;
    background: url(btn_full.png) no-repeat top left;
}
.btn.hover {
    background-position: bottom;
} 
```

**JavaScript**：

```
function fullscreen() {
    document.getElementById("fullbtn").className="btn";
    var e = document.getElementById("fullBox");
    if (RunPrefixMethod(document, "FullScreen") || 
        RunPrefixMethod(document, "IsFullScreen")) {
        RunPrefixMethod(document, "CancelFullScreen");
    }
    else {
        RunPrefixMethod(e, "RequestFullScreen");
    }
} 
```

# android - 如何保存和重新创建 android 活动

> ID：11599716
> 
> 赞同：1
> 
> 时间：2012-07-22T11:04:43.063
> 
> 标签：android

我正在尝试自学一些 android 编程，但我无法让我的应用程序保存和加载用户进度。

目前我在我的活动中初始化我的变量级别和分数。然后从我的 onCreate 方法调用它：

```
 if (savedInstanceState != null) {
        // Restore value of members from saved state
        playersScore = savedInstanceState.getInt(STATE_SCORE);
        level = savedInstanceState.getInt(STATE_LEVEL);
    } else {
        playersScore = 0;
        level = 0;
    } 
```

最后我有一个保存包的方法：

```
@Override
public void onSaveInstanceState(Bundle savedInstanceState) {
    savedInstanceState.putInt(STATE_SCORE, playersScore);
    savedInstanceState.putInt(STATE_LEVEL, level);

    super.onSaveInstanceState(savedInstanceState);
} 
```

出于某种原因，我的捆绑包无法保存，关于我缺少什么的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T11:14:36.757

你看过：

```
@Override
public void onRestoreInstanceState(Bundle savedInstanceState) {
    super.onRestoreInstanceState(savedInstanceState);
    playersScore = savedInstanceState.getInt(STATE_SCORE);
    level = savedInstanceState.getInt(STATE_LEVEL);
} 
```

也不应该：

```
savedInstanceState.putInt(STATE_SCORE, playersScore);
savedInstanceState.putInt(STATE_LEVEL, level); 
```

是：

```
savedInstanceState.putInt("STATE_SCORE", playersScore);
savedInstanceState.putInt("STATE_LEVEL", level); 
```

因为 putInt() 需要一个字符串和一个 int。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T11:15:28.880

从文档：

> 请注意，将持久数据保存在 onPause() 而不是 onSaveInstanceState(Bundle) 中很重要，因为后者不是生命周期回调的一部分，因此不会在其文档中描述的所有情况下都被调用。

# javascript - Jquery UI 按钮问题

> ID：11599721
> 
> 赞同：0
> 
> 时间：2012-07-22T11:05:21.183
> 
> 标签：javascript, jquery, jquery-ui, button, jquery-ui-button

请看看这个

[http://jsfiddle.net/WAre9/4/](http://jsfiddle.net/WAre9/4/)

问题是，更改链接文本后，`.button()`无法正常工作。

这是之前的截图：

![在此处输入图像描述](../Images/b46345b00f6b5acb2b39c8e905373dc0.png)

鼠标点击后：

![在此处输入图像描述](../Images/720149109d1cf4ba9faec33ab67e2d49.png)

正如您看到的所有填充一样，字体样式已经消失。有什么建议吗？如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T11:10:59.350

这是来自[如何替换 jQueryUI 按钮文本？](https://stackoverflow.com/questions/2665937/how-do-i-replace-jqueryui-button-text)

> 也许您现在可以使用`label`jQuery UI 按钮选项？
> 
> ```
> $("#mybutton").button().toggle(function() {
>   $(this).button('option', 'label', 'Stop');
> }, function() {
>   $(this).button('option', 'label', 'Start');
> }); 
> ```
> 
> [jsbin 在这里预览](http://jsbin.com/iwina)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T11:15:34.160

这是因为在设置看到这个小提琴`span`后标签被删除：`element.text`

[http://jsfiddle.net/WAre9/8/](http://jsfiddle.net/WAre9/8/)

或者您可以只更改 span 元素的文本：

[http://jsfiddle.net/WAre9/10/](http://jsfiddle.net/WAre9/10/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T11:16:14.607

[http://jsfiddle.net/Bue3B/](http://jsfiddle.net/Bue3B/)

使用 children('span').text...

# database - Django，自动生成一对多表和数据库结构

> ID：11599722
> 
> 赞同：0
> 
> 时间：2012-07-22T11:05:21.097
> 
> 标签：database, django, one-to-many

我正在将 django 用于一个网站，其中我有一个包含用户、人员、位置、项目等的数据库。知道我发现我需要一些额外的信息，这些信息需要像别名这样的一对多关系来处理这些表中的大多数。

我应该（1）使用内容类型框架为所有这些创建一个通用别名表（最终可能会有数十亿行），还是应该（2）为每个创建一个别名表。如果是后者，我如何通过像这样添加一行来自动创建这样的一对多表

“别名 = Ailias()”

在每个模型中。我敢肯定，不久前我看到一个应用程序在做类似的事情，我认为这是某种类型的回归应用程序。即使第二种方法不适合，我也很想知道该怎么做。我不知道要搜索什么才能找到对此的解释。

我计划为此添加带有 Solr 的 Haystack，因此方法 2 可能会在那里增加很多额外的工作。但我对它没有太多经验，所以我可能错了。

PS：以方法一结束。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T13:38:05.837

设法在方法 2 中做我想做的事，轻松生成一对多字段。不确定这是最简单的方法，还是最好的方法。如果有人有更好的方法，我很想学习它。我距离 django 专家还有很长的路要走，所以我可能会插手一些不必要的复杂的东西来做我想做的事。

此示例创建了一种添加一对多别名关系的简单方法。

别名管理器

```
class AliasManagerDescriptor(object):
def __init__(self, model,fkName):
    self.model = model
    self.fkName = fkName

def __get__(self, instance, owner):
    if instance is None:
        return AliasManager(self.model,self.fkName)
    return AliasManager(self.model, self.fkName, instance)

class AliasManager(models.Manager):
def __init__(self, model,fkName, instance=None):
    super(AliasManager, self).__init__()
    self.model = model
    self.instance = instance
    #Name of FK linking this model to linked model
    self.fkName=fkName

def get_query_set(self):
    """
    Get query set, or only get instances from this model that is linked
    to the chosen instance from the linked model if one is chosen
    """
    if self.instance is None:
        return super(AliasManager, self).get_query_set()

    if isinstance(self.instance._meta.pk, models.OneToOneField):
        #TODO: Checkif this part works, not checked
        filter = {self.instance._meta.pk.name+"_id":self.instance.pk}
    else:
        filter = {self.fkName: self.instance.pk}
    return super(AliasManager, self).get_query_set().filter(**filter)

def create(self,**kwargs):
    """
    Create alias instances. If FK is not given then it is automatically set
    to the chosen instance from the linked model
    """
    if self.fkName not in kwargs:
        kwargs[self.fkName]=self.instance
    print kwargs
    super(AliasManager, self).create(**kwargs) 
```

别名模型

```
class Alias(object):

def contribute_to_class(self, cls, name):
    self.manager_name = name
    aliasModel = self.create_alias_model(cls)
    descriptor = AliasManagerDescriptor(aliasModel,cls._meta.object_name.lower())
    setattr(cls, self.manager_name, descriptor)

def create_alias_model(self, model):
    """
    Creates a alias model to associate with the model provided.
    """
    attrs = {
             #'id': models.AutoField(primary_key=True),
             "name": models.CharField(max_length=255),

             #Not sure which to use of the two next methods
             model._meta.object_name.lower(): models.ForeignKey(model),
             #model._meta.object_name.lower(): AliasObjectDescriptor(model),

             '__unicode__': lambda self: u'%s' % self.name,
             '__module__': model.__module__
             }
    attrs.update(Meta=type('Meta', (), self.get_meta_options(model)))
    name = '%s_alias' % model._meta.object_name
    return type(name, (models.Model,), attrs)

def get_meta_options(self, model):
    """
    Returns a dictionary of fields that will be added to
    the Meta inner class.
    """
    return {
    }

"""class AliasObjectDescriptor(object):
def __init__(self, model):
    self.model = model

def __get__(self, instance, owner):
    values = (getattr(instance, f.attname) for f in self.model._meta.fields)
    return self.model(*values)""" 
```

人物模型 - 只需在模型中添加“alias = Alias()”即可添加一对多别名字段。

```
class Person(models.Model):
name = models.CharField(max_length=30,blank=True,null=True)
age = models.IntegerField(blank=True,null=True)

alias = Alias() 
```

现在你我可以做这样的事情：

```
per = Person(name="Per",age=99)
per.save()
per.alias.create(name="Mr.P")
per_alias = per.alias.all().values_list("name",flat=True) 
```

# winapi - 自动调整静态控件大小的正确方法是什么？

> ID：11599723
> 
> 赞同：10
> 
> 时间：2012-07-22T11:05:35.663
> 
> 标签：winapi, user-interface, controls

我想将静态控件的大小调整为其内容大小，因此我需要先计算其文本内容的大小。我找到了一种用于`GetTextExtentPoint32`计算大小的方法，但我需要先将 DC 的字体设置为与控件的字体相同。有一个更好的方法吗？我已经设置了一次静态控件的字体，我想也许我不需要第二次设置 DC 的字体。

计算静态控件文本内容大小的最佳方法是什么？有没有更好的方法来自动调整静态控件的大小？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-22T11:45:20.470

在我看来，您已经找到了正确的方法。调用[`GetTextExtentPoint32`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd144938.aspx)以根据控件包含的文本确定控件的理想大小，然后将控件的大小调整为计算出的大小。

这是很多工作，但是当您使用原始 Win32 API 时会发生这种情况。您没有一个方便的包装库，可以在一个`Control.AutoSize()`函数中为您抽象出所有这些。您可以轻松编写自己的函数并重新使用它，但 Win32 标准控件不公开“自动调整大小”API。

至于字体，您*肯定*需要确保设备上下文使用与控件相同的字体，否则您将计算错误的大小。但是您不必创建新的设备上下文、请求处理静态控件的字体并将其选择到新的 DC 中。相反，您可以使用该[`GetDC`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd144871.aspx)函数使用静态控件的 DC，并将句柄传递给您的静态控件窗口。确保如果你打电话，你总是在你完成后`GetDC`跟进一个电话！[`ReleaseDC`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd162920.aspx)

但是，请注意该函数的一些注意事项，这些注意事项`GetTextExtentPoint32`可能会干扰您计算的大小的准确性：

*   它忽略剪辑。
*   在计算高度时，它不考虑换行符 ( `\n`) 或回车符 ( )。`\r\n`
*   它不考虑前缀字符（在字符串中以 & 符号开头的字符），如果您的静态控件没有[`SS_NOPREFIX`样式](http://msdn.microsoft.com/en-us/library/windows/desktop/bb760773.aspx)，则用于表示键盘助记符。
*   根据某些设备可能自动实现的字距调整，它可能无法返回准确的结果。

^(（这在链接的文档中都提到了，但有人真的读过吗？）)

也许更简单的替代方法是用静态控件已经在做的相同方式绘制文本。除非您有`SS_SIMPLE`样式集（它使用[`TextOut`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd145133.aspx)或[`ExtTextOut`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd162713.aspx)绘制文本作为优化），静态控件通过调用[`DrawText`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd162498.aspx)具有适当参数的函数来绘制它们的文本，给定设置的其他控件样式（[参考](http://msdn.microsoft.com/en-us/library/ms997560.aspx)）。

您可以执行完全相同的操作，并`DT_CALCRECT`在对函数的调用中添加标志`DrawText`，这会导致它确定绘制指定文本所需的矩形的宽度和高度，*而无需*实际绘制文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T11:21:04.293

大多数使用静态文本控件的窗口都是对话框，其中静态控件的大小以对话框单位 (DLU) 表示，它大致说明了字体的大小。通过这种方式，对话框控件往往具有合理的大小。

如果您不使用对话框，您可以尝试使用[`MapDialogRect`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645502.aspx).

否则是的，您必须使用`GetTextExtentPoint32`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T11:33:41.510

据我所知，静态控制没有自动调整大小。你做得对。

1.  使用 GetWinDowText 获取静态窗口的文本
2.  使用 GetDC 获取窗口的 dc
3.  使用 WM_GETFONT 获取窗口的字体并将字体选择到 dc
4.  使用其中一种文字大小计算功能来计算文字大小
5.  恢复原来的dc字体
6.  释放直流

您将始终必须在 dc 中选择正确的字体才能获得准确的结果。此外，我个人更喜欢使用 DT_CALCRECT 的 DrawText 来计算文本的大小。参考[http://msdn.microsoft.com/en-us/library/windows/desktop/dd162498%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd162498%28v=vs.85%29.aspx)

使用 DrawText，如果文本以 NULL 结尾，则不必提供字符数。另外，您可以结合各种格式选项来调整计算。例如，静态控件文本中的 & 字符为下一个字符加下划线。使用 Drawtext，您将能够正确计算大小，但在 GetTextExtentPoint32 中没有规定指定这一点。

# entity-framework-4 - 实体框架和自引用表

> ID：11599726
> 
> 赞同：2
> 
> 时间：2012-07-22T11:05:57.050
> 
> 标签：entity-framework-4, linq-to-entities, guid

我有一个自引用以创建层次结构的表。

```
CREATE TABLE [dbo].[Topics](
    [ID] [uniqueidentifier] NOT NULL,
    [ParentTopicID] [uniqueidentifier] NULL,
    [Name] [nvarchar](50) NOT NULL,
    CONSTRAINT [PK_Topics] PRIMARY KEY CLUSTERED 
    ([ID] ASC)
    WITH (
        PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF,       ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY] 
    ON [PRIMARY]

GO

ALTER TABLE [dbo].[Topics]  WITH CHECK ADD  CONSTRAINT [FK_Topics_Topics] 
FOREIGN KEY([ParentTopicID]) REFERENCES [dbo].[Topics] ([ID]) 
```

对于“根”节点，`ParentTopicID`将为空，子节点将指向适当`TopicID`的 。

此结构在 SQL 中有效，但 Entity Framework 似乎对此有问题。即使我尝试一个简单的枚举，例如：

```
foreach(var t in container.Topics) {
    Console.WriteLine(t);
} 
```

我收到一个错误：

> 'Topic' 上的 'ParentTopicID' 属性无法设置为 'null' 值。您必须将此属性设置为“Guid”类型的非空值。

第二个问题是查询该表以查找特定主题的根节点或子节点。

在 SQL 中，这很简单，`Where ParentTopicID is null`但由于 Guid 在 .Net 中不为空，Linq 语法会抱怨并且找不到任何匹配项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T11:10:03.813

是的，这里的问题是您的问题为 ParentTopicID 指定了 NULL，但在 EF 设计器中，您可能将 ParentTopicID 设置为可为空的 false。首先改变它，如果它不能修复它，我们可以从那里开始。

在设计器中，选择类，选择 ParentTopicID，按 F4 获取属性。

# php - 如何从json响应重定向？

> ID：11599729
> 
> 赞同：1
> 
> 时间：2012-07-22T11:06:16.090
> 
> 标签：php, jquery, ajax, json

我有一个 ajax 调用（来自 jquery）到 login.php 并收到一个 json 响应，如-{“response”：{“error”：“false”，“user_id”：“141”，“name”：“as”} }。现在我想将用户重定向到 home.php，但不知道如何。任何建议或示例代码将不胜感激。

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T11:13:08.507

在使用 JSON 输入的函数中，简单检查响应值（或您想要的任何其他条件），如果匹配，则执行重定向：

```
$.post("action.php", { email: email, password:pass, action:action }, function(json)
{
    if (json.response.error)
        $(window.location).attr('href', 'home.php?id=' + json.response.user_id);
}, 'json'); 
```

在更一般的情况下，您还需要检查 login.php 是否确实返回，即您提供了成功和失败处理程序；成功处理程序，如果 JSON 存在，如果响应格式正确，则执行其操作；所有其他情况将重定向到 home.php。

考虑添加一个对话框来向用户解释到底发生了什么，并将位置重定向放在对话框关闭处理程序中。

**考虑一下**：您的整个响应似乎都在一个名为“响应”的字典中。这不是必需的，并且强制编写类似`json.response.error`and`json.response.user_id`而不是`json.user_id`.

另外，我假设登录也在会话中保存登录信息；我不会相信重定向的 id。如果您这样做了，任何使用 FireBug 的用户都可以使用相同的密码以任何其他用户身份登录。

```
// action.php
// receive parameters
if ($login_ok)
{
    $_SESSION['user_id'] = $user_id;
    Header('Content-Type: application/json');
    die(json_encode(array(
        'user_id' => $user_id,
        ...
    )));
}
// Send along the error 
```

然后你重定向到没有 user_id 的 home.php，home.php 从会话中恢复 user_id。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T11:09:58.180

如果您的代码运行良好并且您只需将用户重定向到新的 URL。使用此 JavaScript 代码：

```
window.location.href = "http://www.google.com.pk"; //whichever URL you want 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T11:11:56.170

你需要检查响应，看看是否有错误？尝试这样的事情：

```
$.ajax({
  url: 'ajax/test.html',
  dataType: json,
  success: function(data) {
      //login success
      if(!data.response.error){
         windown.location='/home.php';
      }else{
         ...
      }
   } 
```

});

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-22T11:12:33.920

如果您想使用 Javascript 进行重定向，可以使用以下代码

```
window.location = "http://www.google.com/"; 
```

如果要使用 php 进行重定向，可以使用以下代码

```
header('Location: http://www.example.com/'); 
```

# javascript - HTML5 表单验证

> ID：11599730
> 
> 赞同：2
> 
> 时间：2012-07-22T11:06:25.273
> 
> 标签：javascript, forms, html, validation, css

关于 HTML5 表单验证，我有两个主要问题。

**1-**我使用此代码更改输入的验证消息

```
$$('INPUT').each(function(input) 
{    
  input.oninvalid = function(event) 
  {
     event.target.setCustomValidity('');
     if (!event.target.validity.valid) event.target.setCustomValidity('Please Fill');
  };
} 
```

这种方法有很大的问题。如果输入无效，则提交表单时，会附加一条错误消息。所以**它不会验证新的输入**。即使在更正并再次提交后，它也不会让表单被提交，因为消息仍然是附加的。所以 event.target.setCustomValidity('') 将删除消息并且表单需要再次提交。**二更正后提交。**

我找不到纠正这种行为的方法。

**2-如何完全隐藏或禁用这些工具提示但仍使用表单验证。有时候想用css无效和有效的伪类，但是还是显示这些提示。**

我在提交按钮上找到**了 formnovalidate**，然后我可以在提交之前手动检查每个输入的**有效性**。有更好的主意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2022-01-17T19:58:54.463

（有点晚了）但解决方案可能就在那里！

会发生什么：由于您自定义了错误消息`event.target.setCustomValidity("...")`，因此中的属性`element.validity.customError`是`true`; 总是返回的[reportValidity](https://developer.mozilla.org/en-US/docs/Web/API/HTMLFormElement/reportValidity)`false`并且提交无效

我做了什么？当用户更改输入 ( `event.on Change`) - 我设置了默认错误消息`event.target.setCustomValidity('');`，这将告诉浏览器继续工作而不会出现自定义错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-26T11:47:33.237

就问题1而言：

我有一个输入

```
<input name="VoucherCode"  id="VoucherCode"  type="text" pattern="(1[0-9]{9})|(2[0-9]{9})" value=""> 
```

并改进了默认消息

```
$("#VoucherCode").on("invalid", function (event) {
    event.target.setCustomValidity('The format of Voucher Code is not correct.')
}); 
```

但这与您遇到的问题相同：如果用户第一次尝试错误，则正确的响应仍会显示无效模式消息。

我根据@Pointy 的建议解决了这个问题：

```
$("#VoucherCode").on("invalid", function (event) {
    event.target.setCustomValidity('The format of Voucher Code is not correct.')
}).bind('blur', function (event) {
    event.target.setCustomValidity('');                
}); 
```

# php - 简单的购物车

> ID：11599732
> 
> 赞同：0
> 
> 时间：2012-07-22T11:06:34.017
> 
> 标签：php, ajax, jquery

我有 2 个下拉框来选择产品和一个用于购物车的 div。

```
<select id="RAM">
  <option value="1">4 GB</option>
  <option value="2">8 GB</option>
</select>

<select id="HDD">
  <option value="1">300 GB</option>
  <option value="2">500 GB</option>
</select>

<ul id="cart">
  <li>PRODUCT NAME (PRICE)</li>
  <li>PRODUCT NAME (PRICE)</li>
</ul> 
```

我想将此下拉值传递给使用 AJAX 的 PHP 文件并返回产品名称和产品价格等，`#cart`作为`<li>`不刷新页面。并且不重复相同的产品。请建议我一个好的/安全的方法来做到这一点。

*   客户可以随时更改他选择的内容 例如：4 GB RAM 到 8GB RAM。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T11:27:30.590

首先，创建表单：

```
<form id="form">
  <select name="RAM">
    <option value="0">4 GB</option>
    <option value="1">8 GB</option>
  </select>

  <select name="HDD">
    <option value="0">300 GB</option>
    <option value="1">500 GB</option>
  </select>
</form>

<ul id="cart">
  <li>PRODUCT NAME (PRICE)</li>
  <li>PRODUCT NAME (PRICE)</li>
</ul> 
```

和 ajax 代码（我使用 jQuery 库，因为它与所有浏览器兼容）：

```
$(document).ready(function() {
        $('#form').change(function() {
            $.ajax({
                url: 'script.php',
                type: 'post',
                data: $(this).serialize(),
                dataType: 'json',
                success: function(data) {
                    $('#cart').empty();
                    $.each(data, function(index, value) {
                        var $li = $('<li></li>')
                            .text(value['product'] + ' (price: ' + value['price'] + ')')
                            .appendTo($('#cart'));
                    });
                }
            });
        });
    }); 
```

现在你必须编写 PHP 脚本：

```
<?php

$prices = array(
    'HDD' => array(30, 50),
    'RAM' => array(100, 200)
);

$data = array();
foreach ($_POST as $product => $index)
    $data[] = array('product' => $product, 'price' => $prices[$product][$index]);

print json_encode($data);
exit; 
```

我认为您想保存用户的选择。如果我是对的，请将保存产品添加到 cookie 或数据库中。饼干示例：

```
setcookie('cart',$data,time()+24*3600*5,'/'); // save cookie for 5 days 
```

我希望它对你有用:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T11:12:08.053

您可以使用 jquery get 或 post 进行 ajax。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T11:12:40.973

使用[`.change()`](http://api.jquery.com/change/)和[AJAX](http://api.jquery.com/jQuery.ajax/)。

* * *

## 例子：

```
$('#RAM').change(function() {
    var value = $('#RAM option:selected').text();
    $.ajax(
    {
        type: 'POST', // Request method
        url: 'yourFile.php?value='+ value, // URL
        dataType: 'html',
        success: function(result)
        {
            // do something here when PHP return result (or nothing?)
        }
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-22T11:19:47.820

```
$('#RAM').change(function() {
    var value = $('#RAM').val();
    $.ajax(
    {
    type: 'POST',
    url: 'service.php?value='+ value,
    dataType: 'html',
    success: function(response)
    {
       $('#price').html(response.price);
       $('#name').html(response.name);
    }
    });
}); 
```

# java - 将值从差异列表传递给嵌套活动

> ID：11599733
> 
> 赞同：0
> 
> 时间：2012-07-22T11:06:52.580
> 
> 标签：java, android

我在不同`ArrayList`的 s 中传递两个值时遇到问题。

我制作了一个 listView 并获取了 list2 元素。当单击 listView 项目时，希望将所选项目和 list1 中的元素传递到同一位置。下一个代码中的问题是它只传递 listView 中的选定项目？我怎样才能将这两个值都传递给下一个活动？

```
lv = getListView();
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
        android.R.layout.simple_list_item_1, names);
setListAdapter(adapter); 

lv.setOnItemClickListener(new OnItemClickListener(){
    public void onItemClick(AdapterView<?> parent, View view,
    int position, long id)
    {
         //int c=parent.getSelectedItemPosition();
           String bb=parent.getItemAtPosition(position).toString();
           Intent i = new Intent(LastActivity.this, Details.class);
          String ur=links.get(position).toString();
           //  String x=edt.getText().toString();
            i.putExtra("name",bb);
            i.putExtra("link",ur);
            // starting new activity
            startActivity(i);

    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T12:55:25.427

```
i.putExtra("name",bb);
i.putExtra("link",ur); 
```

在第二个活动

```
Intent i-getIntent();
i.getExtra("name");
i.getExtra("link"); 
```

# android - 我怎样才能杀死应用程序？

> ID：11599734
> 
> 赞同：0
> 
> 时间：2012-07-22T11:07:05.280
> 
> 标签：android, android-activity

我有一个问题：我无法杀死应用程序，我已经尝试过`finish();`等等`ActivityManager`，但它们没有工作（应用程序再次启动）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T15:34:48.850

在 Android 中不建议这样做，因为它违反了 Android 可用性模式。最主要的是，您不需要`System.exit(0)`像@parag 向您建议的那样通过一行代码来停止/杀死/关闭您的应用程序。这样做表明你错过了 Android 开发中的一些重要点。如果出于某种奇怪的原因你必须这样做，你需要`finish()`all `Activities`， stop all`Services`并禁用所有`BroadcastReceivers`声明`AndroidManifest.xml`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T18:10:57.210

看看 Android 活动生命周期，它可能会为您提供如何实现您的需求的线索。无论如何，如果您需要**KILL**应用程序，您将不得不重新考虑。它很奇怪，而且它反对 Android 的建议。

[http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T13:04:32.637

将此用于杀死应用程序

```
System.exit(0) 
```

# jquery - 在 Jquery 中设置会话变量

> ID：11599737
> 
> 赞同：-2
> 
> 时间：2012-07-22T11:07:18.673
> 
> 标签：jquery, session, redirect

我正在开发一个登录表单。我想使用 JQuery（和 PHP）验证用户名/密码。

1) 如果 usr/pwd 不正确，则相应地显示消息（不刷新页面）

2) 如果 usr/pwd 正确 i) 设置会话变量 ii) 重定向页面

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T12:24:12.430

不确定 php，但在 asp.net 中，我使用 jQuery ajax 访问服务器方法，该方法将登录用户、设置会话变量并返回响应。根据响应，jQuery 将显示适当的消息。

下面是一个简单的 jQuery 函数示例：

```
$("#btnLogin").click(function(){
        $.ajax({
            type: "POST",
            url: "login.aspx/getDetails",
            data: "{uid:" + $("#txtUsername").val() + ", pass:"+$("#txtpassword").val()+"}",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (data) {
                var response = eval("(" + data + ")");
                if (response.msg == "success") {
                    $("#message").text("Login successful");
                } else {
                   $("#message").text("Login failed");
                }
            }                
        });
    }; 
```

# node.js - 如何通过 express 使用 Node.js 0.8.x 域？

> ID：11599739
> 
> 赞同：21
> 
> 时间：2012-07-22T11:07:27.870
> 
> 标签：node.js, express, node.js-domains

如何创建将每个请求包装在自己的域中的 Express/Connect 中间件？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-05-06T18:08:51.760

**更新：**下面描述的方法已在[连接域](https://github.com/baryshev/connect-domain)NodeJS 模块中实现，可用于 Connect 或 Express 应用程序。

从 Express 3 开始，`express.createServer`已弃用，其回调应转换为中间件。在中间件中，将请求和结果对象添加到请求域中很重要，以便它们触发的错误由域错误处理程序处理。

我的中间件看起来像这样：

```
var domain = require('domain');

app.use(function(req, res, next) {
    var requestDomain = domain.create();
    requestDomain.add(req);
    requestDomain.add(res);
    requestDomain.on('error', next);
    requestDomain.run(next);
}); 
```

如果您`http.createServer`从顶级域中调用，则可以避免将请求和响应添加到请求域，但域文档似乎表明按请求域是最佳实践。

请注意，上面的代码不会执行任何域清理操作，例如强制释放请求域。我的中间件选择再次通过中间件堆栈传递错误，以便稍后由特定的错误处理中间件处理。YMMV。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-22T12:04:27.343

Speaker Deck 上的这组幻灯片提供了简洁的概述：

*   [节点 0.8 中的域](https://speakerdeck.com/u/felixge/p/domains-in-node-08)

幻灯片中的 Express 中间件代码：

```
var createDomain = require('domain').create;

app.use(function(req, res, next) {
  var domain = createDomain();

  domain.on('error', function(err) {
    // alternative: next(err)
    res.statusCode = 500;
    res.end(err.message + '\n');

    domain.dispose();
  });

  domain.enter();
  next();
}); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-05T06:27:36.520

我很幸运能更换库存

```
var app = express.createServer(); 
```

和：

```
var domainCreate = require('domain').create;
var app = express.createServer(function (req, res, next) {
    var domain = domainCreate();
    domain.run(next);
}); 
```

然后在您的中间件中，您可以将属性添加到 process.domain 或添加额外的错误处理。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-07-24T03:11:06.233

这是一个较晚的答案，但请查看[express-domain-moddleware](https://www.npmjs.org/package/express-domain-middleware)模块。它会自动为每个请求创建一个新域。活动域可以由您的路由中的 process.domain 引用。这是一个例子：

```
//with domain-middleware
app.use(require('express-domain-middleware'));
app.use(app.router);

app.use(function errorHandler(err, req, res, next) {
  console.log('error on request %d %s %s: %j', process.domain.id, req.method, req.url, err);
  res.send(500, "Something bad happened. :(");
  if(err.domain) {
    //you should think about gracefully stopping & respawning your server
    //since an unhandled error might put your application into an unknown state
  }
});

app.get('/error', function(req, res, next) {
  db.query('SELECT happiness()', process.domain.intercept(function(rows) {
    fs.readFile('asldkfjasdf', process.domain.intercept(function(contents) {
      process.nextTick(process.domain.intercept(function() {
        throw new Error("The individual request will be passed to the express error handler, and your application will keep running.");
      }));
    }));
  }));
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-26T10:35:49.973

这些域目前在节点中已弃用：

[https://nodejs.org/api/domain.html](https://nodejs.org/api/domain.html)

出于“分区错误”的目的，我创建了一个库，它允许您以一种很好的方式编写异步代码：[https](https://github.com/vacuumlabs/yacol) ://github.com/vacuumlabs/yacol 。它的好处之一是您可以拥有具有非常好的语义的类似域的行为；一探究竟！

# javascript - 获取容器的内容，包括 Javascript 中的父级

> ID：11599742
> 
> 赞同：1
> 
> 时间：2012-07-22T11:08:33.377
> 
> 标签：javascript

我想用父元素本身获取元素的 innerHTML。由于我使用的是 element.innerHTML，因此它返回的是元素内部存在的值，而不是父元素。那么有没有办法在 JavaScript 中做到这一点？

**注意：**请注意，我不想为此使用任何 jQuery。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T11:12:46.713

试试 - [http://jsfiddle.net/PF68B/](http://jsfiddle.net/PF68B/)

```
var content = document.getElementById("elem").parentNode.innerHTML; 
```

如果您想要带有父标签的内容 - [http://jsfiddle.net/PF68B/1/](http://jsfiddle.net/PF68B/1/)

```
var content   = document.getElementById("elem").parentNode.innerHTML;
var parentTag = document.getElementById("elem").parentNode.tagName.toLowerCase(); 
```

...

**更新**

如果您需要具有所有属性的父节点 - [http://jsfiddle.net/PF68B/4/](http://jsfiddle.net/PF68B/4/)

```
var content   = document.getElementById("elem").parentNode.innerHTML;
var parentTag = document.getElementById("elem").parentNode.tagName.toLowerCase();

var el = document.getElementById("elem").parentNode;
var nodes=[], values=[];
for (var attr, i=0, attrs=el.attributes, l=attrs.length; i<l; i++){
    attr = attrs.item(i)
    nodes.push(attr.nodeName);
    values.push(attr.nodeValue);
}

var parentAttr  = '<' + parentTag;
for ( var i = 0; i < nodes.length; i++ ) {
    parentAttr += ' ' + nodes[i] + '="' + values[i] + '"';
}
parentAttr += '>' + content + '</' + parentTag + '>'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T11:29:32.553

我认为您正在寻找[.outerHTML](https://developer.mozilla.org/en/DOM/element.outerHTML)属性。但由于旧的`Firefox`（版本 < `11.0`）不支持它，您可以改用此脚本：

```
var tmpParent = document.createElement('div');
//Appending moves elements from its parents.
//For safety, clone was used instead of original node.
var cloneElem = yourDomElement.cloneNode();
cloneElem.innerHTML = yourDomElement.innerHTML;
tmpParent.appendChild( cloneElem );
//Markup
var elementMarkup = tmpParent.innerHTML;
console.log( elementMarkup ); 
```

[现场演示](http://jsfiddle.net/zx4PD/)

# c# - 使用椭圆曲线加密消息时出错

> ID：11599744
> 
> 赞同：-1
> 
> 时间：2012-07-22T11:08:52.550
> 
> 标签：c#, encryption

当我通过单击 button1 多次（超过 10 次）使用椭圆曲线加密消息时，出现以下错误

> 指数数组的边界之外。

代码如下：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Text;
using System.Windows.Forms;
using DiffieHellmanMerkle;
using System.Security.Cryptography;
using System.IO;

namespace TestEllipticCurveDiffieHellman
{
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        byte[] SecretA = null;
        byte[] SecretB = null;
        try
        {
            ECDiffieHellmanMerkle A = new ECDiffieHellmanMerkle(ECDHAlgorithm.ECDH_384);
            ECDiffieHellmanMerkle B = new ECDiffieHellmanMerkle(ECDHAlgorithm.ECDH_384);
            A.KeyDerivationFunction = ECDHKeyDerivationFunction.HASH;
            B.KeyDerivationFunction = ECDHKeyDerivationFunction.HASH;
            A.HashAlgorithm = DerivedKeyHashAlgorithm.SHA256_ALGORITHM;
            B.HashAlgorithm = DerivedKeyHashAlgorithm.SHA256_ALGORITHM;
            SecretA = A.RetrieveSecretKey(B.PublicKey);
            SecretB = B.RetrieveSecretKey(A.PublicKey);
        }
        catch(Exception ex)
        {
            MessageBox.Show(ex.Message,"Win32 Error Message");
        }

        //Alice encrypts the message with her secret key
        string SecretMessage = plain.Text;// "The owl of Minerva only flies at dusk.";
        byte[] SecretMessageByteArray = Encoding.Unicode.GetBytes(SecretMessage);
        string IVString = "initialV";
        byte[] IVByteArray = Encoding.Unicode.GetBytes(IVString);
        RijndaelManaged rijndael = new RijndaelManaged();
        ICryptoTransform encryptor = rijndael.CreateEncryptor(SecretA, IVByteArray);
        MemoryStream memoryStream = new MemoryStream();
        CryptoStream cryptoStream = new CryptoStream(memoryStream, Encryptor,CryptoStreamMode.Write);
        cryptoStream.Write(SecretMessageByteArray, 0, SecretMessageByteArray.Length);
        cryptoStream.FlushFinalBlock();
        byte[] cipherText = memoryStream.ToArray();
        memoryStream.Close();
        cryptoStream.Close();

        Encrypted.Text = Encoding.Unicode.GetString(cipherText);

        /* string strcipherTextUni = Encoding.Unicode.GetString(cipherText);
        MessageBox.Show("Encrypted Unicode = " + strcipherTextUni.ToString());*/

        //Bob decrypts the message with his secret key
        ICryptoTransform decryptor = rijndael.CreateDecryptor(SecretB, IVByteArray);
        memoryStream = new MemoryStream(cipherText);
        cryptoStream = new CryptoStream(memoryStream, decryptor, CryptoStreamMode.Read);
        byte[] clearText = new byte[cipherText.Length];
        int clearTextByteSize = cryptoStream.Read(clearText, 0, clearText.Length);
        memoryStream.Close();
        cryptoStream.Close();
        this.Decrypted.Text = Encoding.Unicode.GetString(clearText, 0, clearTextByteSize);
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T22:55:37.903

`Encrypted.Text = Encoding.Unicode.GetString(cipherText);`很可能是罪魁祸首。

随机字节不是字符编码。可能是未知编码在这里被转换为替换字符或根本没有字符。这会不时发生（因为加密文本与随机文本无法区分）。

改为使用密文的 base 64 编码，在 stackoverflow 上有大量示例说明如何执行此操作。幸运的是，base 64 编码/解码内置在 .net API 中（你收到了吗，Oracle？）。

# image - AddThis Pinterest 小部件正在提供我不想提供的图像，例如导航按钮、广告。

> ID：11599747
> 
> 赞同：8
> 
> 时间：2012-07-22T11:09:15.920
> 
> 标签：image, pinterest

当我单击 AddThis Pinterest 按钮时，该框会在屏幕中间打开，提供来自我页面的各种图像。凉爽的。但是，其中提供的有导航按钮、横幅广告和其他相关图像的颗粒状、放大部分。同样，收藏夹栏 PinIt 按钮（来自 Pinterest 本身）的页面“正确”，这意味着它只提供有意义的图像；不包括导航按钮。

如何从 AddThis Pinterest 小部件框中排除选定的图像？

提前感谢任何可以提供帮助的人。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T06:06:50.137

强制图像的实际方法是“媒体”选项，而不是“网址”选项：

```
<a... pi:pinit:media='http://path/to/my/image.jpg'>...</a> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-22T20:21:31.177

AddThis Pinterest 支持图像的“at_include”和“at_exclude”类。

全文在这里：http: [//support.addthis.com/customer/portal/articles/1300322-pinterest-image-sharing#.UuAnmrvTm2x](http://support.addthis.com/customer/portal/articles/1300322-pinterest-image-sharing#.UuAnmrvTm2x)

> **包括图像**
> 
> 您可以使用“image_include”配置选项指示共享预览仅从页面中抓取特定图像。首先，将 image_include 设置为您想要的类名（不允许使用 id 选择器，只能使用类选择器），然后将相同的类名添加到页面上应该抓取的每个图像中。对于 image_include，不要添加 '.' 选择器。这是一个例子：
> 
> ```
> <script type="text/javascript">
> var addthis_config = {
> image_include: "at_include"
> } 
> ```
> 
> 使用类定义 image_include 后，将该类添加到页面上所需的图像中。在此示例中，页面上将被抓取的唯一图像将是具有 at_include 类的图像（img1.jpg 和 img3.jpg）。
> 
> ```
> <img src="http://www.example.com/img1.jpg" class="at_include" />
> <img src="http://www.example.com/img2.jpg" />
> <img src="http://www.example.com/img3.jpg" class="at_include" /> 
> ```
> 
> **排除图像**
> 
> 您可以使用 image_exclude 配置选项指示共享预览忽略页面中的特定图像。首先，将 image_exclude 设置为您想要的类名（不允许使用 id 选择器，只能使用类选择器），然后将相同的类名添加到页面上应忽略的每个图像中。对于 image_exclude，不要添加 '.' 选择器。这是一个例子：
> 
> ```
> <script type="text/javascript">
> var addthis_config = {
> image_exclude: "at_exclude"
> } 
> ```
> 
> 使用类定义 image_exclude 后，将该类添加到页面上所需的图像中。在此示例中，页面上唯一将被抓取的图像将是没有 at_exclude 类 (img2.jpg) 的图像。
> 
> ```
> <img src="http://www.example.com/img1.jpg" class="at_exclude" />
> <img src="http://www.example.com/img2.jpg" />
> <img src="http://www.example.com/img3.jpg" class="at_exclude" /> 
> ```
> 
> **图像容器**
> 
> 您还可以指示共享预览从特定容器中抓取图像，例如包含在类或具有 Pinterest 共享按钮的 ID 中的所有图像。如果页面上有多个 Pinterest 分享按钮，这将非常有用。请记住，Pinterest 共享按钮必须位于图像所在的同一容器中。另外，请注意 image_container 需要有 '.' 或“#”选择器。这是一个例子：
> 
> ```
> <script type="text/javascript">
> var addthis_config = {
> image_container: ".shared_content"
> } 
> ```
> 
> 使用类定义 image_container 后，将该类添加到页面上所需的类。在此示例中，页面上将被抓取的唯一图像将是包含在 shared_content 中的图像。
> 
> ```
> <div class="shared_content">
> Here's some example text. Images in this div will be grabbed.
> <img src="http://www.example.com/img1.jpg" />
> <img src="http://www.example.com/img2.jpg" />
> <a class="addthis_button_pinterest_share"></a>
> </div>
> 
> <div class="another_div">
> Here's some more example text. Images in this div will not be grabbed.
> <img src="http://www.example.com/img3.jpg" />
> <img src="http://www.example.com/img4.jpg" />
> </div> 
> ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T20:58:06.677

如果要指定单个图像供 Pinterest 使用，则必须将该图像的路径指定为`pi:pinit:url`属性值。

```
<a... pi:pinit:url='http://path/to/my/image.jpg'>...</a> 
```

# lotus-notes - 来自 Teamroom 的邮件具有 http 链接而不是 https

> ID：11599749
> 
> 赞同：1
> 
> 时间：2012-07-22T11:09:19.240
> 
> 标签：lotus-notes, xpages, lotus-domino, agents

设置团队房间时，来自 openntf 的 extlib 的 8.5.3，其中一个配置项是用于 URL。

因此，当从团队室发送提醒等时，它将有一个注释文档链接和一个网络链接。

在我们的测试/开发环境中，它就像一个魅力。用户在使用 webclient 时感到困惑。(xpages)

在 prod 环境中升级我们的一个团队房间后。我们接到电话说电子邮件中的链接不起作用。

生成的链接是 http 而不是 https。我的意思是为审阅者创建的电子邮件中的链接或项目过期的提醒。

怎么会？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T11:09:19.240

在我们内部的多米诺生产环境中，我们只使用 https。但是在我们的测试/开发环境中，我们目前只能使用 http。

在设计器中打开模板并查看我发现的代理：

用于服务器

```
wMail = "  http://" + serverName +"/"+ dbpath +"/topicThread.xsp?action=openDocument&documentId="+doc.universalid 
```

对于本地：

```
wMail = "  http://"+ getWebAddress +"/"+ dbpath+"/$All/"+doc.universalid 
```

所以http协议是硬编码的。

在这些代理中可以找到代码字符串。

*   发送通讯
*   发送提醒
*   (wSendLink)

一个快速的解决方法是将 http 替换为 https。

更好的解决方案是在 teamroomsetup 表单的高级选项选项卡中添加一个复选框。并更改代理中的代码以根据值生成 http 或 https url 获取值。

我还没有时间。但这并不难做到。

要考虑：无论您做什么，都在模板中更改它，而不是在团队空间 nsf 中。第二天发现您更改了默认模板覆盖的位置会很遗憾。

希望能节省时间

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T17:18:53.680

为什么不更改数据库的属性以强制使用 HTTPS 打开它？

# entity-framework - 实体框架中的事务

> ID：11599752
> 
> 赞同：1
> 
> 时间：2012-07-22T11:09:31.680
> 
> 标签：entity-framework, transactions

我需要一些想法来处理实体框架中的事务。

让我们考虑一个小例子。

在我的数据库中，我有一个`A`带有自动生成的标识列`id`的表，并且我有一个`B`带有引用键的表`A(id)`。

在我需要将数据插入到两个表中的情况下`A`，`B`我想启动一个事务。假设一个新行被插入到`A`. 我需要用于插入的新插入的标识 ( `id`) 值`B`。

有人可以指导我处理这种情况吗？在这种情况下，我们是否需要真正利用交易？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T11:16:19.333

当您调用 SaveChanges 时，更新是在事务中进行的。如果一个失败，它会全部回滚。在 msdn 上查看[此处。](http://msdn.microsoft.com/en-us/library/bb336792.aspx)特别是“备注”部分。

# java - Android应用程序强制关闭错误

> ID：11599753
> 
> 赞同：1
> 
> 时间：2012-07-22T11:09:35.527
> 
> 标签：java, android, eclipse

我编写了以下代码并编译了它，但是当我运行该应用程序时，我收到错误**android the application has stopped unexpectedly force close eclipse**。我认为这是因为我没有初始化 Button 和 TextView 对象，但是当我初始化它们时，我丢失了令牌“;” 错误。这个错误的原因是什么。

```
package com.umer.first.project;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;

public class StartingPoint extends Activity {

int counter;
TextView display;
Button add, sub;
//add= new Button(this);
//sub=new Button(this);
//display=new TextView();
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_starting_point);

    add= (Button) findViewById(R.id.aButton);
    sub = (Button) findViewById(R.id.sButton);
    display= (Button) findViewById(R.id.tvButton);

    add.setOnClickListener(new View.OnClickListener() {

        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            counter++;
            display.setText("The total is " + counter);
        }
    });

    sub.setOnClickListener(new View.OnClickListener() {

        public void onClick(View arg0) {
            // TODO Auto-generated method stub

            counter--;
            display.setText("You counter is " + counter);

        }
    });
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_starting_point, menu);
    return true;
}
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-22T11:12:13.943

`Display`是 a `TextView`，您不能将其转换为按钮。

```
display= (Button) findViewById(R.id.tvButton); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T11:18:32.780

**2.**您已**声明** `display` **为 TextView**，但**初始化为** `Button`，**这是一个 Casting Exception**。

`display= (Button) findViewById(R.id.tvButton);` ///// 错误的。

一定是。

`display= (TextView) findViewById(R.id.tvButton);`

**1.**在onCreate()方法**之前将 View 声明为实例变量，然后****在 onCreate() 中对其进行初始化。**

# cocoa - 自定义 NSTableViewCell

> ID：11599755
> 
> 赞同：1
> 
> 时间：2012-07-22T11:09:47.373
> 
> 标签：cocoa, nstableview, nstableviewcell

我自定义 NSTableView 就像我在 UITableView 中所做的一样。我实现了数据源和委托。在代码中，我这样做：

```
 - (NSView *)tableView:(NSTableView *)tableView viewForTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row
{
    ZJCellView *cellView = [tableView makeViewWithIdentifier:cellIdentifier owner:self];
    //this is a custom view
    if (cellView == nil)
    {
        CGRect rect = CGRectMake(0, 0, tableView.frame.size.width, kTableViewCellHeight);
        cellView = [[[ZJCellView alloc] initWithFrame:NSRectFromCGRect(rect)] autorelease];
        cellView.identifier = cellIdentifier;

      // some other controls

    }
    return cellView; 
```

我像在 iOS 中一样进行自定义。问题是左右边框都有一条线，例如： ![在此处输入图像描述](../Images/e54beb6d1cffadca04968a4ddcf933c6.png)

我尝试更改单元格视图的框架，它似乎没有用。由于这是在 iOS 中自定义单元格的正确方法，我想知道在 Cocoa 中哪里错了。

有谁能够帮助我？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T02:27:53.507

最后，我发现它是`Cell Space`可以在笔尖中设置的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T11:39:01.560

在 iOS 中：

Tableviewcells 与 Tableview 相同。它们是自动调整大小的。如果您在 cellForRowAtIndexPath: 方法中为单元格设置框架，则不会更改任何内容。

对于宽度，您需要更改表格视图的宽度。对于高度，您需要实现 tableview 的委托方法 heightForRowAtIndexPath: 或设置 rowHeight 属性。

但是我不知道NSTableView怎么样，我觉得是差不多的。

# javascript - 如何检查列表是否可排序？

> ID：11599758
> 
> 赞同：24
> 
> 时间：2012-07-22T11:10:07.307
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-sortable

如何检查特定列表是否可排序？比如`$('#list').is(':sortable')`……？

如果我们将使用

```
if ($('#list').sortable()) 
```

然后列表将再次可排序，而不检查它是否实际上是可排序的。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-07-22T11:37:50.967

如果列表已经是可排序的，那么它应该有 class `ui-sortable`。

你可以`if ($('#list').hasClass('ui-sortable'))`用来检查它。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-21T00:27:31.043

我刚刚发现，它的数据接口也可以工作：

```
if ($( '#sortable' ).data( 'sortable' )) {
    // sortable instance exists
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-07-16T07:01:37.357

2012 年之后 jQuery 版本发生了变化，所以现在你可以写：

```
if ($( '#sortable' ).data( 'ui-sortable' )) {
    // sortable instance exists
} 
```

或者

```
if ($( '#sortable' ).is(':ui-sortable')) {
    // sortable instance exists
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-22T11:41:20.453

应用排序时，只需像这样向该元素添加一个虚拟类，

```
$( "#sortable" ).sortable();
$( "#sortable" ).addClass("antguider"); 
```

然后，如果要检查元素是否可排序，请像这样检查，

```
if($( "#sortable" ).hasClass("antguider")){
    alert("Already Sort Applied");
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-11-21T16:17:39.287

我在 Safari（也许是其他人）中发现这些类不可靠。'ui-sortable' 保留在任何已被排序的项目上，即使你禁用它，这会导致类 'ui-sortable ui-sortable-disabled' 都被使用。

我发现自己添加和删除类只是为了确保它们符合我的预期。

```
if ($(this).hasClass("ui-sortable")) {
  $(this).removeClass("ui-sortable");
  $(this).sortable({ disabled: true });
}
else {
  $(this).addClass("ui-sortable");
  $(this).sortable({ disabled: false });
} 
```

- 编辑

好的，所以这些类是可靠的，但我所追求的不是禁用，而是 .sortable("destroy") 它将元素返回到初始化之前的状态（即删除所有辅助类）。

所以对于我的可排序切换（这是我正在创建的）：

```
if ($(this).hasClass("ui-sortable")) $(this).sortable("destroy");
else $(this).sortable(); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-08-19T00:39:41.453

你可以在这里查看我的答案[https://stackoverflow.com/a/57549308/4175975](https://stackoverflow.com/a/57549308/4175975)

只调用一个sortable的实例，如果返回undefined，则不加载

```
if (typeof $("ul.sortable").sortable('instance') != 'undefined') {
    //$.ui.sortable is loaded and called
} else {
    //call sortable
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-05-19T21:42:35.743

您还可以使用：

```
Sortable.get(element) 
```

[https://github.com/SortableJS/Sortable#sortablegetelementhtmlelementsortable](https://github.com/SortableJS/Sortable#sortablegetelementhtmlelementsortable)

`undefined`如果没有附加可排序的实例，它会解析。

# python - 在 Django 中管理静态文件

> ID：11599761
> 
> 赞同：2
> 
> 时间：2012-07-22T11:10:31.910
> 
> 标签：python, django

```
STATIC_ROOT = '%s/site_media' % PROJECT_DIR
STATIC_URL = '/static/'
STATICFILES_DIRS = (os.path.join(STATIC_ROOT, 'images'),) 
```

当我运行 127.0.0.1:8000/static/something.jpg 时，一切正常。但我想得到这样的东西.jpg 127.0.0.1:8000/static/ **images** /something.jpg

当我更改 STATICFILES_DIRS 时：

```
STATICFILES_DIRS = ('',) 
```

127.0.0.1:8000/static/ **images** /something.jpg 不起作用，为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T11:16:57.223

采用

```
STATICFILES_DIRS = (os.path.join(STATIC_ROOT, ''),) 
```

您的 STATIC_DIR 应该指向项目`site_media`目录。添加`images'`到它时，然后`127.0.0.1:8000/static/images/something.jpg`正在搜索`.../site_media/images/images/something.jpg`

# git - 如何让 git show 使用格式化？

> ID：11599762
> 
> 赞同：2
> 
> 时间：2012-07-22T11:10:41.783
> 
> 标签：git, formatting

`git show --oneline 0.1`（0.1 是轻量级标签名称）对我不起作用。该功能本身运行良好，但它总是显示完整的描述，包括差异。

我怎样才能使它使用格式化？

我正在使用 Mac OS X。

```
git version
git version 1.7.10.2 (Apple Git-33) 
```

* * *

## 编辑

我再次检查它，我发现结果打印为单行样式。但它仍然包括完整的差异结果。

```
e14b982 Downgraded to Xcode 4.2 from Xcode 4.5 DP3.
diff --git a/EonilSQLite.xcodeproj/project.pbxproj b/EonilSQLite.xcodeproj/project.pbxpro
index 54ab6bc..75e4e78 100644
--- a/EonilSQLite.xcodeproj/project.pbxproj
+++ b/EonilSQLite.xcodeproj/project.pbxproj
@@ -656,6 +656,7 @@
                                ARCHS = "$(ARCHS_STANDARD_32_BIT)";
                                GCC_PRECOMPILE_PREFIX_HEADER = YES;
                                GCC_PREFIX_HEADER = Targets/iOS/Prefix.pch;
+                               MACH_O_TYPE = staticlib;
                                OTHER_LDFLAGS = "-ObjC";
                                PRODUCT_NAME = EonilSQLite;
                                SDKROOT = iphoneos;
@@ -670,6 +671,7 @@

....(more and more) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T11:13:16.870

尝试

```
git show --oneline 0.1 
```

;-)

并且只打印输出的第一行，执行

```
git show --oneline 0.1 | head -1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T11:25:39.590

重读您的问题，我认为您使用了错误的命令。

如果你想查看你的历史，`git log`是你想要的命令。另一方面，如果您只想查看特定的提交，那么您的使用`git show`是正确的。但是，它将始终与消息一起显示提交差异。两个命令都接受`--oneline`命令行参数。但是它标志只影响提交消息的格式。

# java - Java 进程使用的 RAM 多于分配的 RAM？

> ID：11599764
> 
> 赞同：3
> 
> 时间：2012-07-22T11:11:11.330
> 
> 标签：java, linux, memory, centos, minecraft

基本上我在 Centos 6.2 16GB 系统上运行我的世界服务器

我通过 rtoolkit 启动以启动我的服务器，现在我将其分配为使用 12GB，但是它使用的 muc 不止于此，我不知道为什么。我运行这个命令来运行 jar 文件：

```
java -Xmx30M -Xms30M -XX:MaxPermSize=40M -jar Minecraft_RKit.jar USER:PASS 
```

然后使用以下命令运行该过程：

```
java -Xms12288M -Xmx12288M -Djline.terminal=jline.UnsupportedTerminal -jar /home/craftbukkit.jar nogui 
```

现在，如果我查看我的 Webmin 模块，我可以看到它正在使用 18025792 kB 的 RAM。比我分配的要多得多。这随后导致进程使用太多内存，以至于系统崩溃。

我可能在这里犯了一个愚蠢的错误，但如果有人能对这种情况有所了解，我将不胜感激。

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T11:26:06.767

JVM 中很少有其他内存消费者：

*   在 64 位操作系统[上，每个线程至少需要一个 MiB 的内存](http://www.oracle.com/technetwork/java/hotspotfaq-138619.html#threads_oom)。5000 个线程（不太可能，但如果这是一个服务器）可以填补 12 GiB 的分配堆和 17 GiB 的已用内存之间的差距

*   本机代码有自己的堆

*   您的第二个命令行中未提及 PermGen 设置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T11:26:19.390

您正在设置最大堆大小，这通常是最大的但不是所有的内存使用量。

你有线程本地堆栈（如果你有很多，这可以加起来 GB）、共享库代码和 C 库使用的任何内存。

顺便说一句，16 GB 是 17,179,000,000 字节。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T12:19:09.403

另一个可能的解释（除了线程堆栈、permgen 和本机堆）是 Minecraft 服务器可能正在使用大型内存映射文件或类似的东西。

# cmake - Cmake 和正则表达式不能按预期工作

> ID：11599766
> 
> 赞同：0
> 
> 时间：2012-07-22T11:11:30.847
> 
> 标签：cmake

我想交换一个文本文件中有两个变量。[V1] 和 [V2]。当我运行我的程序时，它只会更改其中一个。为什么？

```
 #Read up into variable
    file (STRINGS "myfile.txt" v1)
    #Store text to replace in variable (we need to escape the '[' and ']' since we will use a regexp later on)
    set(v1_placeholder "\\[v1\\]")
    set(v2_placeholder "\\[v2\\]")
    #New reading of documents to process
    set(doc_files [v1]_Hello_Documentation.txt myfile.txt)
    #Lets iterate over each documentation file
    foreach(doc_file ${doc_files})
      message(STATUS "Proccessing document file: " ${doc_file})
      #Read up content of documentation file
      file(READ ${doc_file} FILE_CONTENT)

      #Remove occurences of [v2] with nothing
      string(REGEX REPLACE "${v2_placeholder}" "" MODIFIED_FILE_CONTENT "${FILE_CONTENT}")

      #Replace occurences of [v1] with the real variable in the content
      string(REGEX REPLACE "${v1_placeholder}" "${V1}" MODIFIED_FILE_CONTENT "${FILE_CONTENT}")
      #Replace occurences of [v1] with the real variable in the file name
      string(REGEX REPLACE "${v1_placeholder}" "${V1}" MODIFIED_FILE_NAME "${doc_file}")

      #Write modified content back into modifed file name
      file(WRITE ${MODIFIED_FILE_NAME} "${MODIFIED_FILE_CONTENT}")
      #Add the files to the package in dir /doc
      install (FILES ${MODIFIED_FILE_NAME} DESTINATION doc)
    endforeach(doc_file) 
```

* * *

运行此文件后，我的文件将如下所示：（它永远不会删除 v2。）

该应用程序当前是 r。

主要特点 当运行 Hello r 时，用户会在标准输出上看到文本“Hello World”。

```
History
[v2]
r
a
b
c 
d 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T15:35:11.830

您可能需要传递`MODIFIED_FILE_CONTENT`而不是`FILE_CONTENT`第二次调用`string(REGEX REPLACE`，即：

```
 #Remove occurences of [v2] with nothing
  string(REGEX REPLACE "${v2_placeholder}" "" MODIFIED_FILE_CONTENT "${FILE_CONTENT}")

  #Replace occurences of [v1] with the real variable in the content
  string(REGEX REPLACE "${v1_placeholder}" "${V1}" MODIFIED_FILE_CONTENT "${MODIFIED_FILE_CONTENT}") 
```

# c# - 如何声明对名称很长的静态类的速记引用？

> ID：11599778
> 
> 赞同：3
> 
> 时间：2012-07-22T11:12:34.923
> 
> 标签：c#

例如：

```
public static class aVeryVeryVeryVeryVeryVeryVeryVeryVeryLongName { public static void methodOne() } 
```

然后在我的代码中就可以写出类似的东西：

```
x = aVeryVeryVeryVeryVeryVeryVeryVeryVeryLongName

x.methodOne 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-22T11:13:27.400

您*可以*使用[`using`指令](http://msdn.microsoft.com/en-us/library/sf0df423.aspx)来创建别名：

```
using Foo = SomeVeryLongNameIndeed;

...

Foo.MethodOne(); 
```

我会更想看看你是否可以把这个名字改成更可口的东西，如果它在你的控制之下:)

# android - 语义网：填充可从我的 Android 应用程序访问的三重存储

> ID：11599781
> 
> 赞同：0
> 
> 时间：2012-07-22T11:12:48.210
> 
> 标签：android, api, semantic-web, triplestore, triples

故事在这里：我正在为我的理学硕士项目开发一个移动应用程序。该应用程序依赖于 www.kasabi.com 网站上的一个开放数据集，该网站是一个开放数据市场。一切都很完美，直到他们最终说“我们要关闭网站”。你可以理解，现在我很……好吧，我让你想象。

数据集仍然可用且可下载，所以我现在拥有的是：亚马逊上的服务器、kasabi 数据集（三元组）的备份文件，等等。

我四处寻找有关如何开发语义 Web 应用程序的教程，但我仍然不知道如何使用此备份文件来设置三重存储并使其可以从我的 android 应用程序访问。

建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T12:48:29.960

您可以尝试在您的服务器上使用 Apache Jena（如果亚马逊允许这样做）：http: [//jena.apache.org/index.html](http://jena.apache.org/index.html)

然后，您可以以与您在 kasabi 中习惯的方式类似的方式访问数据。

但是您可能想看看[哪个 Triplestore 用于快速语义 Web 开发？](https://stackoverflow.com/questions/304920/which-triplestore-for-rapid-semantic-web-development?rq=1)，也许芝麻更适合你（[http://www.openrdf.org/](http://www.openrdf.org/)）

# playframework - play 2 框架编译错误

> ID：11599782
> 
> 赞同：2
> 
> 时间：2012-07-22T11:12:54.813
> 
> 标签：playframework, playframework-2.0

我正在尝试学习游戏框架，在练习示例代码时出现错误：“非法开始简单表达式”

```
 @main("TODO list")
4{
5   <h1>@tasks.size() task(s)</h1>
6   <ul>
7       @for(task <- tasks) 
```

错误显示在第 7 行，我不知道为什么会这样

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T15:11:12.143

您忘记了以下行中的“{”字符：

```
@for(task <- tasks){ 
```

Scala 模板引擎需要在同一行上确保 '{' 来自模板语言，并且它不是 HTML 字符。

# c# - 使用 process.start 运行应用程序返回的值与手动运行它不同

> ID：11599786
> 
> 赞同：1
> 
> 时间：2012-07-22T11:13:42.040
> 
> 标签：c#, .net, process.start

我正在运行一个工具，它对硬件 PCI 进行采样以获得特定值（我没有写它）。

当我从命令提示符运行它时，它会返回一个退出代码（正确的），但是当我使用从另一个应用程序运行它时`Process.Start`，它会返回另一个退出代码。

直接运行应用程序还是通过运行应用程序有区别`Process.Start`吗？您知道此问题的简单解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T15:40:06.237

As stated in Hassan's answer (which solved my similar issue), the exit code returned from Process.Start() is affected by the location of the executable, in particular which directory it is located in. Here's the code I used:

```
 string yourExe = "C\\Program Files\\Your Directory\\YourExe.exe";
    string currentDir = Directory.GetCurrentDirectory();
    string yourExeDir = "C\\Program Files\\Your Directory";

    try
    {
        Directory.SetCurrentDirectory(yourExeDir);
    }
    catch (DirectoryNotFoundExeption dnfe)
    {
        MessageBox.Show("The specified directory does not exist. " + dnfe.Message);
    }

    if (!File.Exists(yourExe))
    {
        MessageBox.Show("Can't find yourExe");
    }
    else
    {
        Process.Start(yourExe);
    }

    try
    {
        //Set the current directory.
        Directory.SetCurrentDirectory(currentDir);
    }
    catch (DirectoryNotFoundException dnfe)
    {
        MessageBox.Show("The specified directory does not exist. " + dnfe.Message);
    } 
```

This switches the current working directory to the directory where the .exe is located, runs it, and then switches back to whatever your previous working directory was.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T11:34:20.517

如果您想获得相同的结果`Process.Start()`，您必须在与命令行相同的工作目录中执行您的应用程序。

# javascript - 从 jQuery 选择中访问插件方法

> ID：11599790
> 
> 赞同：1
> 
> 时间：2012-07-22T11:14:08.317
> 
> 标签：javascript, jquery, jquery-plugins

# 背景

我创建了一个 jQuery 插件，该插件获取页面上的所有表并通过发出远程请求来加载行。

# 代码示例

这是一个简单的例子，它提高了插件使用的结构。在实际示例中，加载函数发出 AJAX 请求并处理结果，将行添加到表中。

**JavaScript**

```
(function($) {

    $.table = function(el, options) {
        // To avoid scope issues, use 'base' instead of 'this'
        // to reference this class from internal events and functions.
        var base = this;

        // Access to jQuery and DOM versions of element
        base.$el = $(el);
        base.el = el;

        base.load = function() {
            base.$el.find('tbody:last').append("<tr><td>...</td><td>...</td></tr>");
        };

        base.load();
    };

    $.fn.table = function(options) {
        options = options || {};
        return this.find(options.selector)
            .each(function(index) {
                new $.table(this, options);
        })
    };
})(jQuery);; 
```

**HTML**

```
<table id="table1" data-role="table">
    <thead id="tour-table">
        <tr>
            <th data-id="id" width="20px">col1</th>
            <th data-id="given_name">col2</th>
        </tr>
    </thead>
    <tbody>

    </tbody>
</table>

<table id="table2" data-role="table">
    <thead id="tour-table">
        <tr>
            <th data-id="id" width="20px">col1</th>
            <th data-id="given_name">col2</th>
        </tr>
    </thead>
    <tbody>

    </tbody>
</table> 
```

我像这样初始化页面上的所有表格。

```
$('body').table({selector:'[data-role="table"]'}); 
```

**jsfiddle**

你可以看到一个例子[http://jsfiddle.net/RWy5r/1/](http://jsfiddle.net/RWy5r/1/)

# 问题

是否可以将加载函数暴露给 dom，以便我可以像这样针对对象调用它？

```
$("#table1").load(); 
```

或者

```
$("#table1").table.load(); 
```

使用上面的简单示例，结果将是 ID 为“table1”的表将`<td>`附加，而包括 ID 为“table2”的表在内的所有其他表将保持不变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T03:34:08.670

这花了我一点时间来解决，但是解决方案非常简单。我们需要做的就是将插件创建的对象添加到 dom 中，以便我们以后可以访问它，jQuery 已经提供了一种通过 .data() 函数执行此操作的方法。

# 解决方案

```
(function($) {

    $.table = function(el, options) {
        var id = $(el).attr("id");
        $.data($(el).get(0), "table", this);//add the new object to the dom so we can access it later

        // To avoid scope issues, use 'base' instead of 'this'
        // to reference this class from internal events and functions.
        var base = this;

        // Access to jQuery and DOM versions of element
        base.$el = $(el);

        base.load = function() {

            base.$el.find('tbody:last').append("<tr><td>...</td><td>...</td></tr>");
        };

        base.load();
    };

    $.fn.table = function(options) {
        options = options || {};
        return this.find(options.selector).each(function(index) {
                new $.table(this, options);
        })
    };

    //public method to provide access to the plugin object from the dom
    $.fn.table.load = function(selection) {
        $.data($(selection).get(0), "table").load();
    } 

    $('body').table({selector:'[data-role="table"]'});

    $('#btn1').click(function(){
        $.data($("#table1").get(0), "table").load();
    });

    $('#btn2').click(function(){
        $("#table2").table.load("#table2");
    });
})(jQuery);​ 
```

看看一个工作示例[http://jsfiddle.net/leviputna/RWy5r/5/](http://jsfiddle.net/leviputna/RWy5r/5/)

# 解释

初始化插件后，我将存储针对 dom 对象创建的对象，以便以后可以访问它。`$.data($(el).get(0), "table", this);`

然后我公开一个公共函数，它将根据选择找到对象并调用加载方法。

```
$.fn.table.load = function(selection) {
    $.data($(selection).get(0), "table").load();
} 
```

最后我添加了两个点击函数来说明这个过程。

```
$('#btn1').click(function(){
    $.data($("#table1").get(0), "table").load();
}); 
```

我希望这个解决方案在未来对某人有所帮助。

# mysql - 在 mysql 中插入 ...SELECT 查询

> ID：11599794
> 
> 赞同：0
> 
> 时间：2012-07-22T11:14:44.440
> 
> 标签：mysql, sql

我有两张桌子：

```
`user1`
- full_name
- headline # this is empty

`user2`
- full_name
- headline # this has content 
```

我想将表插入`headline`到表中。这是我到目前为止所拥有的：`user2``user1`

```
insert into user1 set headline = (select headline from user2 where headline=headline) 
```

但是，我收到一条错误消息，说选择返回不止一行。我将如何正确发出这个插入语句？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T11:16:44.900

你想做什么并不完全清楚。特别是当每个表中有多个记录时会发生什么？如果要将标题从匹配的位置复制`user2`到匹配的位置，可以使用多表语法来连接表并更新：`user1``full_name``UPDATE``user1`

```
UPDATE user1 JOIN user2 USING (full_name) SET user1.headline = user2.headline 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T11:21:15.867

如果你真的想要一个 INSERT 那么你想要

```
INSERT INTO user1 SELECT full_name, headline 
```

如果您实际上是在尝试更新，那么您想要

```
UPDATE user1 SET headline = (SELECT headline FROM user2 WHERE user1.full_name = user2.full_name) 
```

# javascript - 如何将对象参数传递给事件处理程序？

> ID：11599795
> 
> 赞同：2
> 
> 时间：2012-07-22T11:15:02.967
> 
> 标签：javascript, events

例如：

```
function getInfo(record){    //  record is an object
    ...
} 
```

这个函数可以被 onclick 事件使用。但是，当浏览器解析它时，它会被解析为一个字符串。所以 Firebug 在元素列表之后显示“缺少 ]”。

有人可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T11:29:30.160

you mean something like this:

```
somefunction = function(record)
{
    console.log('record: ' + record);
}

this.onclick = somefunction.bind(this, 100); 
```

here 100 is argument you are passing to "somefunction", and it will print 100 on console.

I hope this will help.

html code can be something like:

```
<html>
    <head>
        <title> test page </title>
        <script>
            somefunction = function(record)
            {
                alert("record: " + record);
                var obj = eval('(' + record + ')');
                alert(" a:" + obj.a + " b: " + obj.b);
            }
        </script>
    </head>
    <body>
        <input type="button" name="btn1" value="Button1" 
               onclick="somefunction('{ a: 100, b: 200 }')">
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T11:33:36.790

If Your's onclick is in HTML then try like this,

```
<input type="button"  onclick="getInfo(this)"  value="Click" /> 
```

You get the DOM Object

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T12:55:12.130

或者，如果您对对象类型非常好奇，您可以将对象存储在单独的变量中。

```
<html>
<head>
    <title> test page </title>
    <script>
        somefunction = function(record)
        {
            alert("record: " + record);
            var obj = eval('(' + record + ')');
            alert(" name:" + obj.name + " mail: " + obj.mail);
        }
    </script>
</head>
<body>
    <script>
        var myJSON = "{name:'john', mail:'aa@aa.com'}";
    </script>
    <input type="button" name="btn1" value="Button1" 
           onclick="somefunction(myJSON)">
</body> 
```

# iphone - 使用 initWithCustomView 创建的 UIBarButtonItem 不会触发操作

> ID：11599797
> 
> 赞同：8
> 
> 时间：2012-07-22T11:15:25.393
> 
> 标签：iphone, ios, xcode, uibarbuttonitem

我正在更新一些旧代码，为了在工具栏中腾出更多空间，我将按钮从测试转换为图像。loadView 中的新旧代码示例如下：

```
// New code, doesn't work.
UIButton *toggleKeyboardBtn = [UIButton buttonWithType:UIButtonTypeCustom];
toggleKeyboardBtn.bounds = CGRectMake( 0, 0, showKeyboardImage.size.width, showKeyboardImage.size.height );
[toggleKeyboardBtn setImage:showKeyboardImage forState:UIControlStateNormal];
UIBarButtonItem *toggleKeyboardItem = [[UIBarButtonItem alloc] initWithCustomView:toggleKeyboardBtn];
[toggleKeyboardItem setTarget:self];
[toggleKeyboardItem setAction:@selector(toggleKeyboard:)];

// Original code, works jut fine.
UIBarButtonItem *setupItem = [[[UIBarButtonItem alloc] initWithTitle:@"Setup" style:UIBarButtonItemStyleBordered target:[UIApplication sharedApplication].delegate action:@selector(showSetupView:)] autorelease]; 
```

我的新代码是从[Cannot set action on UIBarButtonItem](https://stackoverflow.com/questions/8373656/cannot-set-action-on-uibarbuttonitem)复制的，我很确定我没有犯他们的错误，因为我的文本按钮工作得很好。

showSetupView() 在我的 AppController.m 文件中，按下按钮时设置屏幕出现和消失。

toggleKeyboard()，OTOH，与 loadView() 例程在同一个文件中，当前包含以下代码：

```
//- (void)toggleKeyboard {
- (IBAction)toggleKeyboard:(id)sender {
    NSLog(@"Entering toggleKeyboard()...");
    hiddenKeyboard = !hiddenKeyboard;
    [self prepareToolbarsAndStatusbar];
} 
```

不用说，虽然我看到了按钮按下动画，但我从来没有看到 NSLog 消息。最后一次观察，是偶然的。将 setAction 选择器更改为：

```
[toggleKeyboardItem setAction:@selector(noSuchRoutine:)]; 
```

编译干净，可能表明我的例程名称由于某种原因被忽略。

有人有想法么？谢谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-23T02:56:32.270

我找到了答案！在[button action notresponsive iphone](https://stackoverflow.com/questions/11360548/button-action-not-responding-iphone)中，据说动作和目标需要设置在 上`UIButton`，而不是`UIBarButtonItem`. 我不知道这对于最新版本的 Xcode 是否是新的，但我想这是因为其他问题（例如我上面提到的问题）使用了不同的技术。这是我的新代码：

```
UIButton *toggleKeyboardButton = [UIButton buttonWithType:UIButtonTypeCustom];
toggleKeyboardButton.bounds = CGRectMake( 0, 0, keyboardAddImage.size.width, keyboardAddImage.size.height );
[toggleKeyboardButton setImage:keyboardAddImage forState:UIControlStateNormal];
[toggleKeyboardButton addTarget:self action:@selector(toggleKeyboard) forControlEvents:UIControlEventTouchUpInside];

UIBarButtonItem *toggleKeyboardItem = [[UIBarButtonItem alloc] initWithCustomView:toggleKeyboardButton];
//[toggleKeyboardItem setTarget:self];
//[toggleKeyboardItem setAction:@selector(toggleKeyboard:)]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-08-08T08:09:12.413

虽然为时已晚，但为了将来的参考，我想引用[苹果文档](https://developer.apple.com/documentation/uikit/uibarbuttonitem/1617151-initwithcustomview?language=objc)的方法，

```
- (instancetype)initWithCustomView:(UIView *)customView; 
```

> 此方法创建的条形按钮项不会调用其目标的操作方法来响应用户交互。相反，条形按钮项期望指定的自定义视图来处理任何用户交互并提供适当的响应。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T12:02:19.510

你试过了吗

`-(void)toggleKeyboard`

和

`[toggleKeyboardItem setAction:@selector(toggleKeyboard)];`没有`:`

它有什么不同吗？方法是否在接口文件中声明？

# android - PreferencesScreen 单击时崩溃

> ID：11599800
> 
> 赞同：0
> 
> 时间：2012-07-22T11:15:38.037
> 
> 标签：android, android-intent, key, preferences

我已将其放入我的 PreferencesActivity

偏好活动：

```
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    addPreferencesFromResource(R.xml.preferences); 
    Preference preferences = findPreference("key"); 
    preferences.setIntent(new Intent(getApplicationContext(), RegisterActivity.class));
} 
```

首选项.xml

```
<PreferenceScreen
        xmlns:android="http://schemas.android.com/apk/res/android">
<PreferenceCategory android:title="Preferences">

<Preference android:key="Pssword" android:title="Set SMS Notification Password"></Preference>
</PreferenceCategory>
</PreferenceScreen> 
```

我尝试进入首选项屏幕的那一刻它崩溃了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T11:23:10.183

你的偏好叫做`Pssword`，不是`key`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T11:54:06.507

您有 NullPointException 因为您的`key`偏好不存在。

将您的行替换`Preference preferences = findPreference("key");`为`Preference preferences = findPreference("Pssword");`

这应该可以解决您的问题。

# objective-c - performSelector: 方法出现无法识别的选择器错误

> ID：11599801
> 
> 赞同：0
> 
> 时间：2012-07-22T11:15:41.343
> 
> 标签：objective-c, selector, unrecognized-selector, performselector

我打电话

`[delegate addText:button.titleLabel.text withSelector:@selector(addElement:) fromKeyboard:self.name]`

对应于

```
- (void)addText:(NSString *)text withSelector:(SEL)selectorName fromKeyboard:(NSString *)name {

   [tempData performSelector:@selector(selectorName) withObject:text];

} 
```

但是，当我在 tempData 上调用执行选择器方法时，出现错误。当我用 (addElement:) 替换 selectorName 时，它​​工作正常。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T11:21:06.623

你只会这样写

```
[tempData performSelector:selectorName withObject:text]; 
```

它已经是一个选择器，所以你不需要写 @selectr(...)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-22T11:20:36.107

@selector(selectorName) 你忘记了：@selector(selectorName:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T11:26:21.627

`@selector()`这里的构造似乎有点混乱：

在这种情况下（很像引号`@selector(selectorName)`内 的 C 字符串的文字。这意味着您正在尝试将命名选择器发送 给对象，但失败了。`selectorName``"selectorName"``selectorName``tempData`

如果要传入选择器以按名称发送，请使用以下`NSSelectorFromString()`函数：

```
- (void)addText:(NSString *)text withSelector:(NSString *)selectorName fromKeyboard:(NSString *)name {
 [tempData performSelector:NSSelectorFromString(selectorName) withObject:text];
} 
```

在这种情况下，通过使用确保接收器响应选择器可能是个好主意`-respondsToSelector:`

# android - 登录 - sqlite 问题

> ID：11599802
> 
> 赞同：0
> 
> 时间：2012-07-22T11:16:11.407
> 
> 标签：android, sqlite

我正在尝试使用 where 子句选择成员 ID 和密码来验证用户凭据。但据说这个专栏不存在...我尝试在互联网上搜索各种方法但没有帮助...请帮助我..这是我的代码

```
public boolean memberlogin(String member_id,String password)throws SQLException{
String[] result=new String[]{member_id,password};
String whereclause="member_id=? AND password=?";
Cursor cur=sdb.query(DB_TABLE, result, whereclause, null, null, null, null);
if(cur!=null)
{
    if(cur.getCount()>0)
    {
        return true;
    }
}
return false;

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T11:28:40.963

Well you seem to be using the the arguments in wrong place
Try This,

```
 String[] columns =new String[]{ COLUMN_ID_NAME ,COLUMN_PASSWORD_NAME};
  String[] result=new String[]{member_id,password};
  String whereclause="member_id=? AND password=?";
  Cursor cur=sdb.query(DB_TABLE, columns , whereclause, result, null, null, null); 
```

# c# - 内存中连续对象的C#数组？

> ID：11599804
> 
> 赞同：3
> 
> 时间：2012-07-22T11:16:15.360
> 
> 标签：c#, arrays

所以我对 C# 的理解是，在处理对象数组（而不是简单类型）时，数组将只是对对象的引用的连续数组，因此需要在每个元素上调用“new”来实际创建对象它。

```
Block[] blocks = new Block[10];

foreach(Block block in blocks)
{
    block = new Block();
} 
```

我想这会将`'Block'`实例分布在整个内存中。

我希望我的实际对象连续存储在内存中，有什么方法可以在 C# 中执行此操作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T11:19:11.390

如果您将对象设为*值类型*（即`structs`），它们将彼此相邻地存储在一个数组中，与存储基元实例（ 、 等）的方式`int`相同`double`。例如，如果您声明

```
DateTime d[] = new DateTime[10]; 
```

您的`DateTime`对象将连续存储在内存块中，因为[`DateTime`它是一个值类型](http://msdn.microsoft.com/en-us/library/system.datetime.aspx)。请注意，您也不需要调用构造函数：`struct`数组中的所有 s 都将被初始化并准备好使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T11:19:30.140

您可能担心 L1 缓存未命中，对吧？

你运气不好。一个接一个地分配多个对象很可能会导致这些对象在内存中是连续的。不幸的是，当 GC 完成它的工作时，您最终可能会发现对象到处都是。

编辑：一个建议

如果您确实必须将它们全部放在一个区域中，则可以将它们设为值类型并创建一个数组，或者使用不安全的代码并将`fix`它们放在内存中。

# java - 使用休眠加载对象

> ID：11599806
> 
> 赞同：0
> 
> 时间：2012-07-22T11:16:19.533
> 
> 标签：java, hibernate

我是hibernate的新手。我有一个对象的主键值，需要从数据库加载一个对象。我读到可以使用 get() 或 load() 或使用标准 API 加载对象。

我有点困惑在哪种情况下哪个更好用。有人可以指导我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T11:32:40.210

`Session.get()`检查对象是否已经在会话中。如果是，则返回它。如果不是，它执行一个 select 语句来加载会话中对象的状态，并返回它。这是您应该默认使用的方法。

`Session.load()`检查对象是否已经在会话中。如果是，则返回它。如果不是，它会创建一个未初始化的代理并返回该代理。它甚至没有命中数据库。在代理上调用的第一个方法将使 Hibernate 从数据库中加载对象的状态，并初始化代理。当您只需要对现有对象的引用时，通常会使用此方法，例如初始化一对一关联。

条件查询或 HQL 查询将始终查询数据库。你不会用它来做同样的事情`Session.get()`。通过主键加载对象以及初始化关联会很有用，否则这些关联会使用`Session.get()`. 如果您知道您需要一个学生及其所有课程，最好在一个查询中加载所有内容，而不是在一个查询中加载学生，然后在第二个查询中加载课程。

# bash - Bash 文件测试条件

> ID：11599816
> 
> 赞同：1
> 
> 时间：2012-07-22T11:17:38.160
> 
> 标签：bash, conditional

我正在使用 Hugin 工具集的命令行版本生成全景图。在执行脚本时，所有图像都被分类到包含单个全景图的 n 个图像的文件夹中。根据混合过程的执行，可能会产生两个文件名之一：`pano.tif`和`pano_blended_fused.tif`.

无论生成哪个文件，我都想将该文件转换为 jpg 并调整大小。我目前的代码是

```
dirlist=$(find . -mindepth 1 -maxdepth 1 -type d \( ! -name completed \) | sort -n)
for dir in $dirlist
do
    #pano generating gode goes here

  #Downsize and convert panorama
  #######################################################################
  tifImage=
  jpgImage=

  if [ -e "pano.tif" ]; then
    tifImage="pano.tif"
    jpgImage="pano.jpg"
    echo "Working on pano.tif"
    echo ""

  elif [ -e "pano_blended_fused" ]; then
    tifImage="pano_blended_fused.tif"
    jpgImage="pano_blended_fused.jpg"
    echo "Working on pano_blended_fused.tif"
    echo ""
  fi

  #convert pano to jpg and get count of images in photo folder
  echo ""
  echo "Converting $image to jpg and creating two versions"
  echo ""
  mogrify -format jpg $tifImage >> "$imagePath/$dir/log.txt"

  num=$(ls -l "$webPath/photos" | wc -l) 
  prefix=$((num+1))

  #convert full size pano to 1000 pixels high and rename with prefix number
  #move to /photos folder
  convert $jpgImage -geometry x1000 "$prefix-pano.jpg" >> "$imagePath/$dir/log.txt"
  mv "$prefix-pano.jpg" "$webPath/photos" >> "$imagePath/$dir/log.txt"

  #convert full size pano to 600 pixels wide and rename with prefix number
  #move to /thumbs folder
  convert $jpgImage -geometry 600x "$prefix-pano.jpg" >> "$imagePath/$dir/log.txt"
  mv "$prefix-pano.jpg" "$webPath/thumbs"  >> "$imagePath/$dir/log.txt"

done 
```

我昨晚刚做了一批照片，在要生成的 15 张全景图中，只有 9 张进入了目标文件夹。所有其他人在第一个`convert`命令中抛出一个错误，指出它缺少图像文件名`n-pano.tif`，而该`$tifImage`变量应该是`pano_blended_fused.tif`

我需要做什么才能使`pano_blended_fused`图像通过转换过程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T11:23:32.060

您忘记包含完整的文件名，缺少扩展名：

```
elif [ -e "pano_blended_fused" ]; then 
```

对比

```
elif [ -e "pano_blended_fused.tif" ]; then 
```

因此，变量从未改变，`convert`也没有得到它想要的。

# visual-studio-2010 - .dll 可以与主可执行文件一起自动释放吗？

> ID：11599818
> 
> 赞同：0
> 
> 时间：2012-07-22T11:17:48.787
> 
> 标签：visual-studio-2010, dll, deployment, release, dynamic-library

在 Visual Studio 或其他东西中是否有任何方法允许程序员使用动态库导出主可执行文件，而无需从 system32 或其他地方手动复制一些重要的 .dll？例如，OpenGL 程序需要（除了 glut32.dll 和 opengl32.dll）msvcr100.dll 来运行。

是否有任何**有效**或**专业**的方式来部署使用动态库的应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T11:42:25.053

在 Visual Studio 安装和部署项目中有两种方法可以做到这一点：

1.  项目 - 属性 - 先决条件。

2.  项目 - 添加 - 合并模块。

第二种方式更灵活，可用于第三方合并模块，未包含在先决条件对话框中。

当然，如果您还没有安装和部署项目，请为您的应用程序创建一个。

# css - CSS中带有图像+文本的水平导航栏

> ID：11599819
> 
> 赞同：0
> 
> 时间：2012-07-22T11:17:54.080
> 
> 标签：css, html, navigation, navbar, whmcs

我觉得不得不问这个问题是个白痴，但我总是不惜一切代价回避 CSS，而且我现在发现自己又需要它了，我一直在寻找谷歌的例子，但没有运气。

基本上我有特定于每个类别的图标，并希望使用这些图标在 CSS/HTML 中创建一个水平导航栏，但也在它们下方显示一个文本链接。我找到了做其中一个或另一个的片段，但每次我尝试将两者结合在一起时，整个页面似乎都崩溃了。

谁能提供一个如何做到这一点的例子？如果它有帮助，它基本上看起来像......

```
[-IMAGE-]     [-IMAGE-]     [-IMAGE-]
[-TEXT-]      [-TEXT-]      [-TEXT-] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T11:46:43.413

通过适当地应用于元素，可以`background-position`在 CSS 中轻松实现效果：`padding-top``li`

```
background-position: top;
padding-top: 50px; /* Height of image */ 
```

这是一个[示例小提琴](http://jsfiddle.net/yU2fL/)。

**更新：**

这是在不同元素上使用不同图像[的更具描述性的小提琴。](http://jsfiddle.net/yU2fL/2/)`li`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T11:21:04.807

[http://jsfiddle.net/LajUZ/2/](http://jsfiddle.net/LajUZ/2/)

HTML：

```
<ul class="nav">
    <li class="navitem">
         <div class="icon">
              [icon]
         </div>
         <div class="text">
               [text]
         </div>
    </li>
    <li class="navitem">
         <div class="icon">
              [icon]
         </div>
         <div class="text">
               [text]
         </div>
    </li>
</ul>​ 
```

CSS：

```
.navitem
{
    float: left;
}​ 
```

# java - 将用户名和页面名持久化到数据库

> ID：11599827
> 
> 赞同：0
> 
> 时间：2012-07-22T11:18:51.350
> 
> 标签：java, jsf, jdbc

我有一个小`JSF`应用程序，页面的范围是`request`. 我想在我的 JSF 的托管 bean 中有一个用于记录`user_id`和`page name`数据库的方法。当我将此方法添加到 bean 的构造函数时，由于页面范围为`request`.

当用户在登录我的应用程序后首次访问页面时，只记录一次上述详细信息的最佳方式是什么？想法是用户为每个日志记录访问的所有页面。实现这一目标的最佳方法是什么？

我的 JSF 版本是 1.1。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T06:27:58.283

您可以向 bean 添加一个方法，并在页面加载时从页面调用它。例如

将此添加到页面中：

```
<h:outputText value="#{fooBean.logUser}"/> 
```

豆方法：

```
public void logUser(){
    //log user and page
} 
```

这样，只有在页面加载后才会调用该方法。如果您收到方法未找到错误，那么另一种选择是使用隐藏表单破解。例如：

```
<body onload="document.getElementById('formId:buttonId').click()">
    <h:form id="formId" style="display: none;">
        <h:commandButton id="buttonId" value="submit" action="#{fooBean.logUser()}" />
    </h:form>
    ...
</body> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T08:39:28.457

因此，您希望将所有用户对站点不同页面的所有访问都登录到数据库表中，但要避免记录回发，对吗？（当用户在您的一个页面中执行操作并且接收操作的 URL 与启动操作的 URL 相同时，就会发生回发 - 这在 JSF 中很常见，特别是在 2.0 之前的版本中。 X）

因此，基本上，您需要识别回发发生的时间并避免在这种情况下进行记录。[ResponseStateManager](http://docs.oracle.com/javaee/5/api/javax/faces/render/ResponseStateManager.html)将为您提供一个在处理回发请求时返回的`isPostback(...)`方法：`true`

```
FacesContext context = FacesContext.getCurrentInstance();
ResponseStateManager rsm = context.getRenderKit().getResponseStateManager();
if (!rsm.isPostback(context)) {
   // do whatever you need here
} 
```

顺便说一句，我根本不建议将该代码放在 bean 构造函数中，因为不同的 JSF 实现可能会在调用 bean 的构造函数后立即执行一些 bean 生命周期管理任务。如果您认为逻辑应该是“bean 初始化过程”的一部分，我建议将该代码放在一个单独的公共方法中，并使用[@PostConstruct](http://docs.oracle.com/javaee/5/api/javax/annotation/PostConstruct.html)注释进行注释。

但是，如果您希望在对给定页面的每次访问中都运行该逻辑，则使用托管 bean 将迫使您在每个 bean 中复制并粘贴该逻辑，或者使用该逻辑定义一个抽象/基类，并使您的所有bean 扩展了那个。我喜欢让我的所有托管 bean 尽可能接近 POJO 概念，因此，作为替代方案，我会考虑实现相同的逻辑，但使用绑定到阶段的[PhaseListener 。](http://docs.oracle.com/javaee/5/api/javax/faces/event/PhaseListener.html)`RENDER_RESPONSE`它将为您提供一种*底层*（更清洁）和通用的方法：如果有一天您想要记录***动作***而不是***渲染***，那么您将侦听器与`INVOKE_APPLICATION`阶段联系起来，等等。

PD：我希望您使用某种缓存或“*批处理*”技术将这些记录记录到您的数据库中，否则当有太多用户浏览您的网站时，您将有明显的性能影响。此外，在我自己看来，您应该将您的 JSF 版本至少更新到 1.2，并且您将避免一些烦人的错误或意外行为......

# php - 如何为我的代码使用 html 选择标签

> ID：11599830
> 
> 赞同：1
> 
> 时间：2012-07-22T11:19:25.107
> 
> 标签：php, html, html-select

我有这个 php 代码

```
 <div id="offers-menu">      
   <?php
   function custom_get_categories_options($rootid = 0,$selected = false,$ident = 0) {
    $db = Bux::getDbInstance();
    $q = $db->query("SELECT * FROM ".clix_offers::$table['categories']." WHERE parent_id = ".(int)$rootid);
    $str = '';
    $ident++;
    while($row = $db->fetchAll($q)) {

      $str .= '<li '.(($_GET['cat_id'] == $row['id']) ? ' class="selected"':'' ).' ><a href="?cat_id='.$row['id'].'">'.$row['name'].'</a>';
      $str .= custom_get_categories_options($row['id'],$selected,$ident);
      $str .= '</li>';
    }

    if($str != "") return $ident>0?"<ol>{$str}</ol>":"{$str}";
   }
   ?>       

        <ul>
            <li <?php echo (!isset($_GET['cat_id']) || $_GET['cat_id'] == "all")?' class="selected" ':'';?>><a href="?cat_id=all">All Admin Offers</a></li>
                <?=custom_get_categories_options();?>

        </ul>

    </div> 
```

输出将是这样的

![在此处输入图像描述](../Images/b7114e93fadbeefb6771c2d85861d255.png)

我想为此菜单使用 HTML 选择标签

就像是

```
<select>
  <option value="1">Advertisers</option>
  <option value="2" selected="selected">All Admin Offers</option>
  <option value="3">CPC/CPM</option>
  <option value="4">ect...</option>
</select> 
```

我自己无法正确完成

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T11:30:25.157

```
 <div id="offers-menu">      
   <?php
   function custom_get_categories_options($rootid = 0,$selected = false,$ident = 0) {
    $db = Bux::getDbInstance();
    $q = $db->query("SELECT * FROM ".clix_offers::$table['categories']." WHERE parent_id = ".(int)$rootid);
    $str = '';
    $ident++;
    while($row = $db->fetchAll($q)) {

      $str .= '<option value="'.$row['id'].'" '.'onClick="window.location = \'?cat_id='.$row['id'].'\'"';
      (($_GET['cat_id'] == $row['id']) ? $str .= 'selected="selected">' : $str .= '>');
      $str .= $row['name'].'</option>';
    }

    if($str != "") return $ident>0?"<ol>{$str}</ol>":"{$str}";
   }
   ?>       

        <select>
            <option onClick="window.location = '?cat_id=all'">All Admin Offers</option>
                <?=custom_get_categories_options();?>
        </select>

    </div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T11:26:27.313

Perhaps you could have a look at [HTML `<optgroup />` tag](http://www.w3schools.com/tags/tag_optgroup.asp).

Unfortunately it does not allow nested groups or multi-level.

# linux - 如何进行持续部署 - AWS 上的 C++

> ID：11599831
> 
> 赞同：1
> 
> 时间：2012-07-22T11:19:26.850
> 
> 标签：linux, amazon-web-services, continuous-deployment

我在存储库服务器上有一个源。该应用程序在 AWS 实例上运行。我可以制作一个脚本来记录、提取、编译并将新的二进制文件复制到它的目的地。

但是如果应用程序正在运行，我如何复制新的二进制文件？这样做的通常方法是什么？我是否必须停止应用程序才能进行更新？那么持续部署是如何工作的呢？

我正在使用linux，应用程序是C++。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T11:49:13.543

复制二进制文件后，您必须重新启动应用程序。我强烈建议您使用其中一种框架进行持续构建/集成，以减轻痛苦，例如[Jenkins](http://jenkins-ci.org/)。

它不仅有助于实际的部署过程，还可以为您运行测试，并且只有在测试成功时才进行部署。还有一个用于 AWS 集成的插件。

# php - 网页的访问目录

> ID：11599833
> 
> 赞同：-1
> 
> 时间：2012-07-22T11:19:36.210
> 
> 标签：php, html, .htaccess

我正在寻找一种方法来访问包含 index.html 或 index.php 的站点中的文件夹。但是当我删除索引文件时，当我尝试从 url 访问内容列表时，我得到

```
404 page not found 
```

错误 ;

这是否可以查看具有我所说的功能的文件夹的内容，如果可以，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T11:43:04.037

您可以在`.htaccess`文件中启用目录列表，将其放入要浏览的目录中：

```
Options +Indexes 
```

但是您收到 404 错误这一事实也可能意味着该目录在服务器上根本不存在。所以确保它存在并且`.htaccess`里面有一个允许目录浏览的文件。

# asp.net-mvc-3 - 上传完成后修改valuems文件上传插件中的内容

> ID：11599837
> 
> 赞同：1
> 
> 时间：2012-07-22T11:20:06.617
> 
> 标签：asp.net-mvc-3, file-upload, razor

我正在使用 Valums ajax 文件上传插件使用 asp.net mvc 3 进行多文件上传。

**意见**

```
@using (Html.BeginForm("Upload", "AjaxUpload", FormMethod.Post, new { name = "form1", @id="form1" }))
{
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>Upload Wav File</legend>
         <div class="editor-label">
           @Html.Label("Select Active Date Time")
        </div>
        <div>

        <input type="text" id="active" value="@DateTime.Now" />
      </div>

         <div class="editor-label">
           @Html.Label("Select Language")
        </div>
        <div>
           @Html.DropDownList("Language1", (SelectList)ViewBag.lang)
        </div>
         <div class="editor-label">
           @Html.Label("Select Category")
        </div>
        <div>
           @Html.DropDownList("ParentCategoryID", ViewBag.ParentCategoryID as SelectList) 
        </div>
      <br />
      <div id="file-uploader">
            <noscript>
                <p>Please enable JavaScript to use file uploader.</p>
            </noscript>
        </div>
    </fieldset>
} 
```

**脚本**

```
<script type="text/javascript">
    var uploader = new qq.FileUploader
    ({
        element: document.getElementById('file-uploader'),
        onSubmit: function () {
            uploader.setParams({
                param1: document.getElementById("Language1").value,
                param2: document.getElementById("ParentCategoryID").value,
                param3: document.getElementById("active").value
            });
        },

        action: '@Url.Action("upload")', // put here a path to your page to handle uploading
        allowedExtensions: ['jpg', 'jpeg', 'png', 'gif'], // user this if you want to upload only pictures
        sizeLimit: 4000000, // max size, about 4MB
        minSizeLimit: 0, // min size
        debug: true
    });

</script> 
```

**控制器动作**

```
 [HttpPost]
        public ActionResult Upload(HttpPostedFileBase qqfile, string param1, string param2, string param3)
        {
            var filenam = DateTime.Now.ToString("yyyyMMddhhmmss") + param1 + param2 + Request["qqfile"];
            var filename = filenam.Replace(" ", "_");

           var filepath = Path.Combine(Server.MapPath("~/App_Data/Uploads"), Path.GetFileName(filename));

           if (param2 != null || param2 != "")
           {
               var wav = new PlayWav
               {
                   Name = filename,
                   CategoryID = int.Parse(param2),
                   UserID = repository.GetUserID(HttpContext.User.Identity.Name),
                   LanguageID = int.Parse(param1),
                   UploadDateTime = DateTime.Now,
                   ActiveDateTime = DateTime.Parse(param3),
                   FilePath = filepath
               };

               db.AddToPlayWavs(wav);

               if (qqfile != null)
               {
                   qqfile.SaveAs(filepath);

                   db.SaveChanges();

                   return Json(new { success = true }, "text/html");
               }
               else
               {
                   if (!string.IsNullOrEmpty(filepath))
                   {

                       using (var output = System.IO.File.Create(filepath))
                       {
                           Request.InputStream.CopyTo(output);
                       }

                       db.SaveChanges();

                       return Json(new { success = true });
                   }
               }
           }
            return Json(new { success = false });
        } 
```

**问题** 说明 我有上传控制器操作，我已重命名上传文件的文件名，它工作正常。这里的问题是文件上传后，文件名显示原始文件名的名称，还显示文件大小。但我想显示重命名的文件名和下拉框列表中选择的值以及从表单字段提交的日期时间值，它的文件大小还可以。我不知道如何修改文件上传完成后显示的那些内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T17:50:46.597

首先，新文件名将返回给客户端，

假设要显示的文件名已经在以下行中产生，

```
var filenam = DateTime.Now.ToString("yyyyMMddhhmmss") 
              + param1 + param2 + Request["qqfile"]; 
```

这需要发送到客户端，

```
return Json(new { success = true, filename }); 
```

客户端代码更改，注意 onCompleted 事件处理程序，它的工作是将原始文件名替换为从服务器接收到的新文件名。

```
<script type="text/javascript">
    var uploader = new qq.FileUploader
    ({
        element: document.getElementById('file-uploader'),
        onSubmit: function () {
            uploader.setParams({
                param1: document.getElementById("Language1").value,
                param2: document.getElementById("ParentCategoryID").value,
                param3: document.getElementById("active").value
            });
        },
        onComplete: function (id, fileName, responseJson) {
            $(this.element).find('.qq-upload-list li[qqFileId=' + id + ']').find('.qq-upload-file').html(responseJson.filename);
        },
        action: '@Url.Action("upload")', // put here a path to your page to handle uploading
        allowedExtensions: ['jpg', 'jpeg', 'png', 'gif'], // user this if you want to upload only pictures
        sizeLimit: 4000000, // max size, about 4MB
        minSizeLimit: 0, // min size
        debug: true
    });

</script> 
```

希望这可以帮助。

编辑：

li 元素中的 qqFileId 属性是信息 li 项和上传文件之间的唯一关联链接。虽然 qqFileId 在 firebug dom 结构中不可见，但在控制台中执行以下命令会显示 id，

```
$('.qq-upload-list li:last').attr('qqFileId') 
```

如果 ie 浏览器导致您出现问题，则可能是因为，

```
find('.qq-upload-list li[qqFileId=' + id + ']') 
```

并且可以更改为

```
onComplete: function (id, fileName, responseJson) {
    $(this.element).find('.qq-upload-list li').each(function () {
        if($(this).attr('qqFileId')==id)
            $(this).find('.qq-upload-file').html(responseJson.filename);
    });
} 
```

# asp.net - 我无法将多个 div 控件添加到父 div 控件

> ID：11599838
> 
> 赞同：0
> 
> 时间：2012-07-22T11:20:26.147
> 
> 标签：asp.net

```
protected void lbChatFriend_Click(object sender, EventArgs e)
        {
            ChatDivContent.Visible = true;
            System.Web.UI.HtmlControls.HtmlGenericControl createDiv = new System.Web.UI.HtmlControls.HtmlGenericControl("DIV");
            createDiv.ID = "div";
            createDiv.Style.Add(HtmlTextWriterStyle.BackgroundColor, "Yellow");
            createDiv.Style.Add(HtmlTextWriterStyle.Position, "relative");
            createDiv.Style.Add(HtmlTextWriterStyle.Color, "Red");
            createDiv.Style.Add(HtmlTextWriterStyle.Height, "50px");
            createDiv.Style.Add(HtmlTextWriterStyle.Width, "50px");
            createDiv.InnerHtml = " I'm a div ";
            string chatFriend = ((LinkButton)sender).Text;
            createDiv.Attributes["title"] = chatFriend;
            ChatDivContent.Controls.Add(createDiv);
        }
 <div id="ChatDivContent">
     <DIV id="div" style="background-color:Yellow;position:relative;color:Red;height:50px;width:50px;"
 title="dinesh"> I'm a div </DIV></div> 
```

<----这是我每次回发的输出

我做错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T11:27:37.320

I assume that you're not recreating the old controls on postback(f.e. when the user clicks on that `LinkButton`). Therefor only the recently created div is displayed.

You have to recreate all dynamically created controls on every postback(in load event at the latest). You also have to ensure that they get the same ID as before to trigger events and maintain ViewState.

If you know the number of controls to create(which could be stored in `ViewState`) you can derive the ID from the counter variable by appending it to the control-id. Then you can recreate them with the correct ID in page's `init` event.

Recommandable readings:

*   [TRULY Understanding Dynamic Controls](http://weblogs.asp.net/infinitiesloop/archive/2006/08/25/TRULY-Understanding-Dynamic-Controls-_2800_Part-1_2900_.aspx)
*   [Page-Lifecycle](http://msdn.microsoft.com/en-us/library/ms178472.aspx)

Or you use one of the builtin [Data-Bound Control](http://msdn.microsoft.com/en-us/library/ms228214.aspx) like [Repeater](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.repeater.aspx) that do this automatically. You only have to set their `DataSource` and call `DataBind()`.

[**Here**](https://stackoverflow.com/a/9276160/284240) is an answer of me on a similar question with implementation.

# opengl - 保持原色

> ID：11599839
> 
> 赞同：1
> 
> 时间：2012-07-22T11:20:27.913
> 
> 标签：opengl, textures, glut, alpha, blending

我正在尝试在*OpenGL*中的另一个纹理上放置一个纹理（带有 alpha） 。我这样做没有任何问题，但这不是我想要的：我*最近的 image*的颜色受到*背景图像*（最远的纹理）的强烈影响，导致尽管是红色，但仍显示为橙色。

任何人都知道可以解决此问题的混合（或摆脱 alpha）方法吗？

混合初始化：

```
glEnable(GL_BLEND);
glBlendFunc(GL_SRC_ALPHA, GL_ONE); 
```

绘图场景：

```
glClear(GL_COLOR_BUFFER_BIT);
glLoadIdentity();

//furthest image (background)
glBindTexture(GL_TEXTURE_2D, texture[1]);
glBegin(GL_QUADS);
    glTexCoord2f(0, 0); glVertex2f(0, 0);
    glTexCoord2f(1, 0); glVertex2f(500, 0);
    glTexCoord2f(1, 1); glVertex2f(500, 500);
    glTexCoord2f(0, 1); glVertex2f(0, 500);
glEnd();

//nearest image (appears orange, should be red) 
glBindTexture(GL_TEXTURE_2D, texture[0]);
glBegin(GL_QUADS);
    glTexCoord2f(0, 0); glVertex2f(100, 100);
    glTexCoord2f(1, 0); glVertex2f(300, 100);
    glTexCoord2f(1, 1); glVertex2f(300, 300);
    glTexCoord2f(0, 1); glVertex2f(100, 300);
glEnd();

glutSwapBuffers(); 
```

编辑。这是一张描述其外观的图像： ![问题](../Images/7730eb23ed7f12d6a4c8c2075d56f98b.png)

这是它的外观图像： ![目标](../Images/6bbe633b65917cf1745180929332db86.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T15:53:10.487

I believe what you want is 'alpha testing', not blending. See

```
glEnable(GL_ALPHA_TEST)
glAlphaFunc() 
```

If you want to leave blending enabled, you should use

```
glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA); 
```

This will only use the source color in places where the source alpha is 1\. Currently your function adds the source color to the background color.

If you don't want any mixing of colors, then using alpha test is the better way to go, as it uses less resources then blending.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T16:13:23.330

这种混合功能

```
glBlendFunc(GL_SRC_ALPHA, GL_ONE); 
```

是你的问题的原因。`GL_ONE`for 目标意味着，无论 alpha 值如何，帧缓冲区中已经存在的任何内容都将添加到传入的颜色中。

在您的情况下，您的红色纹理会添加绿色背景。由于*红色+绿色=橙色*，这就是你得到的。

你想要的是用你的 alpha 通道屏蔽目标帧缓冲区中的先前内容，这是使用

```
glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA); 
```

还要记住，OpenGL 状态是根据需要设置和重置的，因此在绘制其他纹理时，您可能需要其他设置来进行混合和混合功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T16:25:48.300

在大家的帮助下，我设法通过以下方式解决了这个问题：

*   将我的纹理重新保存为 PNG（尽管有 BMP）
*   将混合功能更改为`glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);`

感谢所有贡献者:)

# python - 如何从 Jinja 模板调用方法？

> ID：11599842
> 
> 赞同：2
> 
> 时间：2012-07-22T11:20:37.590
> 
> 标签：python, template-engine, jinja2

我在一个路径中有几个 jinja 模板文件，我想渲染它们并将它们写入一个文件，我的问题是它们的输出文件名，

是否可以在 jinja 模板中定义一个函数来返回和准备模板输出文件名，并从 python 代码中调用它并检索它的值？

这是我的代码：

```
#in here inputPath is jinja templates path
for root, dirs, files in os.walk(inputPath):
    for file in files:
        fPath = root[len(inputPath) + 1:]
        newPath = (fPath + "/" if fPath else '') + file
        template = env.get_template(newPath)
        oPath = os.path.join(outputPath, fPath)
        try:
            os.makedirs(oPath)
        except:
            pass
        oPath=os.path.join(oPath,file)
        with codecs.open(oPath,'w', "utf-8") as f:
            f.write(template.render(projectname=projectName, mainxmlpath=mainXamlPath)) 
```

在此代码中输出文件名正是 jinja 模板文件名。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T12:21:29.917

我已经解决了

模板类具有包含所有模板方法和定义变量的模块属性

例如在 jinja 模板中`template.module.foo()`调用你的宏。`foo`

# php - 如何使用 PHP 检查域名的大量可用性？

> ID：11599858
> 
> 赞同：-2
> 
> 时间：2012-07-22T11:23:37.010
> 
> 标签：php

如何检查长列表中每个域的域可用性？例如，我想选择一个基本词，例如“overflow”并检查该词后所有 3 个字母组合的域可用性，例如“overflowabc”

有为此编写的脚本吗？像这样进行大规模搜索是否合法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T11:27:06.167

您可以使用该`checkdnsrr`功能执行域名查找：

```
if (checkdnsrr($domain, 'A')) {
    ...
} 
```

在某些国家/地区抓取 DNS 注册表是非法的，但您并不是真的在抓取，只是在寻找可用性。所以应该没问题。

[http://php.net/manual/en/function.checkdnsrr.php](http://php.net/manual/en/function.checkdnsrr.php)

# css - 使用CSS根据父容器静态宽度强制一长行文本（不带空格）换行

> ID：11599859
> 
> 赞同：75
> 
> 时间：2012-07-22T11:23:52.087
> 
> 标签：css

> **可能重复：**
> [CSS：如何强制将长字符串（没有任何空白）包装在 XUL 和/或 HTML 中](https://stackoverflow.com/questions/499137/css-how-can-i-force-a-long-string-without-any-blank-to-be-wrapped-in-xul-and)

可以说一个有以下代码：

```
<div style="width:100px;height:1000px">This-is-a-long-line-of-text-without-any-spaces-This-is-a-long-line-of-text-without-any-spaces-This-is-a-long-line-of-text-without-any-spaces-This-is-a-long-line-of-text-without-any-spaces</div> 
```

我很抱歉，但堆栈溢出（根据预览）不会换行代码片段。

在大多数 (?) 情况下，以下情况将导致包含长文本行的容器拉伸到其中包含的文本的全宽。

我们想根据父容器的css指定宽度（宽度：100px）强制它换行（甚至是中间字）。

这可以通过我不知道的css标签实现吗？

IE6+ 可比性，请加上 gecko/webkit/opera。

* * *

## 回答 #1

> 赞同：120
> 
> 时间：2012-07-22T11:32:24.213

您可以使用它来包装：

```
.wrap { 
   white-space: pre-wrap;      /* CSS3 */   
   white-space: -moz-pre-wrap; /* Firefox */    
   white-space: -pre-wrap;     /* Opera <7 */   
   white-space: -o-pre-wrap;   /* Opera 7 */    
   word-wrap: break-word;      /* IE */
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-22T11:28:25.907

`word-wrap`和的组合`word-break`可以为您解决这个问题。请参阅[如何在 DIV 中的 loooooong 单词中强制换行？](https://stackoverflow.com/questions/3058866/how-to-force-a-line-break-in-a-loooooong-word-in-a-div)（可能是骗人的）

# objective-c - 鼠标事件“点击过滤器”

> ID：11599864
> 
> 赞同：0
> 
> 时间：2012-07-22T11:24:38.283
> 
> 标签：objective-c, xcode, macos, cocoa

我在桌面上放置了一个透明覆盖层。
现在我只需要在我的桌面覆盖层上捕获双击事件，并“传递”或模拟左键单击和右键单击到下面的桌面。

我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T12:46:36.243

您可能对[这个关于在 OS X 中拦截事件的答案](https://stackoverflow.com/a/11476219/1071136)感兴趣。您可以建立点击，拦截点击，并根据点击时间决定是否传递它们。

# jekyll - Jekyll for 循环 - 多个数组

> ID：11599865
> 
> 赞同：3
> 
> 时间：2012-07-22T11:25:20.693
> 
> 标签：jekyll

在 Jekyll 中，我有一个小型博客系统，分为两类：`blog`和`portfolio`. 我有两个页面将呈现这些类别的帖子，`for`循环看起来像这样：

```
{% for post in site.categories['blog'] %}
…
{% endfor %} 
```

在我的主页上，我想显示该`blog`类别中的最新帖子。但是，我希望我的博客也包含我的一些摄影作品——这些照片将作为帖子存在，但大多数时候它们没有标题或正文内容——它们只是一张图片。我不希望这些帖子出现在主页上。

实际上，我只想在主页上显示最新的博客文章，不包括所有摄影文章。我正在考虑我的选择：

1.  使用两个类别：`blog`和`photos`。但是，我如何让我的博客页面显示这两个类别的帖子？我实际上需要合并数组`site.categories['blog']`and `site.categories['photos']`，并将它们放入一个`for`循环中-但这可能吗？
2.  保留一个类别：`blog`，但以其他方式排除没有标题的帖子出现在主页上。但是，你是怎么做的？

这可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-10T11:27:57.040

在博客页面上，您可以使用：

```
{% for post in site.posts %}
…
{% endfor %} 
```

检索所有帖子并全部显示。如果您想过滤更多（例如，您不想在此页面上显示第三个类别：

```
{% for post in site.posts %}
    {% if post.categories contains 'post' or post.categories contains 'photos' %}
       ...
    {% endif %}
{% endfor %} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-01T08:30:22.973

这里一个直接的方法是使用[Jekyll 类别](https://jekyllrb.com/docs/frontmatter/#predefined-variables-for-posts)。

将您的帖子放入 _posts 文件夹的子目录中：

```
_posts/
    blog/
        post.md
    photos/
        photo.md 
```

然后在您的 index.html 或其他任何地方，您可以参考以下单独的类别：

```
<h1>Blog</h1>

{% for post in site.categories.blog %}
    {{ post.title }}
{% endfor %}

<h2>Photos</h2>

{% for photo in site.categories.photos %}
    {{ photo.title }}
{% endfor %} 
```

您可以使用 访问所有帖子`site.posts`。

有关相关的 github 问题“多个 _posts 目录”，请参阅 [https://github.com/jekyll/jekyll/issues/1819#issuecomment-30441840](https://github.com/jekyll/jekyll/issues/1819#issuecomment-30441840)。

# windows-installer - 微星。在卸载软件时运行已安装的应用程序

> ID：11599866
> 
> 赞同：2
> 
> 时间：2012-07-22T11:25:32.100
> 
> 标签：windows-installer

有什么方法可以运行已安装的应用程序并带有卸载软件的参数？例如：**[INSTALLDIR]\xxx.exe -uninstall** 我有一个 MSI 表。据我所知，我必须将数据添加到表中或创建自定义脚本......但我找不到任何简单的例子......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T17:11:45.537

您可以使用[自定义操作](http://www.codeproject.com/Articles/1747/MSI-Custom-Action-DLL)来做到这一点。链接的示例可以帮助您，您需要做的就是修改它，以便它根据需要启动您的可执行文件。

# java - 这个混淆的 Java 函数块有什么作用？

> ID：11599869
> 
> 赞同：-1
> 
> 时间：2012-07-22T11:25:46.697
> 
> 标签：java, security, function, encryption

首先，这不是家庭作业或其他人给予的任何其他任务。这是来自游戏小程序的功能，我希望它更安全。使用此功能，您可以为游戏的握手部分生成密码。但是为每个玩家使用相同的编码密码，这只是一件愚蠢的事情。你真的很容易受到攻击，这就是我所处的情况。这就是为什么我想分析这个函数的作用并想出一种为每个唯一连接生成密码的方法。所以，请试着理解我。

这是功能：

```
public String g(String paramString)
  {
    boolean bool = d.r;
    try
    {
      if (!bool)
      {
        if (paramString.length() < 3)
        {
          a(tc[2]);
          return "";
        }
        if (bool);
      }
      else
      {
        if (paramString.length() > 200)
        {
          a(tc[3]);
          return "";
        }
        paramString = paramString.toLowerCase();
      }
      String str1 = "";
      String str2 = paramString;
      paramString = paramString.toLowerCase();
      char[] arrayOfChar1 = { 'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z', '0', '1', '2', '3', '4', '5', '6', '7', '8', '9', ' ' };
      char[] arrayOfChar2 = { 'x', 'f', 'n', 'g', 'd', '9', 's', 'j', 'o', 'q', '5', 'a', 'z', 'w', '6', '0', 'e', '4', 'c', 'r', '1', 'v', 't', '3', 'b', 'y', 'h', '2', 'u', '7', 'm', 'i', 'k', '8', 'l', 'p', '?' };
      char[] arrayOfChar3 = { 'f', 'e', '8', 'r', 'k', 't', '7', 'b', 'c', 'm', 'o', 'q', '2', '3', 'g', 's', 'n', 'x', '0', 'p' };
      char[] arrayOfChar4 = paramString.toCharArray();
      char[] arrayOfChar5 = str2.toCharArray();
      int i1 = 0;
      if (bool);
      do
      {
        int i2 = 0;
        int i3 = 0;
        if (bool);
        do
          do
          {
            if (!bool)
            {
              if (arrayOfChar4[i1] == arrayOfChar1[i3])
                i2 = 1;
            }
            else
            {
              int i4 = paramString.length();
              int i5 = (int)Math.round(Math.random() * 19.0D);
              int i6 = i3 + i5 + i4;
              if (bool);
              String str3;
              do
              {
                do
                  i6 -= arrayOfChar2.length;
                while (i6 >= arrayOfChar2.length);
                str1 = str1 + "" + arrayOfChar3[i5];
                str3 = String.valueOf(arrayOfChar2[i6]);
              }
              while (bool);
              if (arrayOfChar4[i1] != arrayOfChar5[i1])
                str3 = str3.toUpperCase();
              str1 = str1 + "" + str3;
            }
            i3++;
          }
          while (i3 < arrayOfChar1.length);
        while (bool);
        if (i2 == 0)
          str1 = str1 + "\\" + arrayOfChar4[i1];
        i1++;
      }
      while (i1 < arrayOfChar4.length);
      return str1;
    }
    catch (Exception localException)
    {
    }
    return "";
  } 
```

这是它生成的一些示例：

```
 aaa -> cafg89  
    aaa -> ca3eca  
    aaa -> q6fged  
    aaa -> fgg4ow  
    aaaa -> tqp3srmw  
    aaaa -> 75e9rjcz  
    bbb -> o6q00t  
    bbb -> 0tczcz  
    bbbb -> 03o0bzo0  
    bbbb -> rogrt5kq 
```

但这里是最可疑的例子：

```
1111111 -> 00000000000000  
222222 -> 000000000000  
33333 -> 0000000000  
5555555 -> m5m5m5m5m5m5m5  
666666 -> m5m5m5m5m5m5  
77777 -> m5m5m5m5m5  
8888 -> m5m5m5m5  
999 -> m5m5m5 
```

我现在有点绝望，这就是我推运气的原因。谢谢你的每一句话。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T11:34:09.047

There some doubt that the decompiler has succeeded in generating code that matches the behaviour of the bytecodes. For instance, the code says `if (bool);` in a couple of places, and it is hard to see why the bytecodes would ever do that. If we can't trust the decompiled code, then there has to be some doubt in any conclusions that we draw from the code.

* * *

The other point to make is that your assumption here:

> With this function you generate a password for the game's handshake part. But using the same encoded password for every player, its just a stupid thing to do.

It is clear from the output that you provide that this code does not generate the same output for a given input. And it would be rather surprising if it did, given that it appears to be repeatedly calling `Random` as part of the scrambling algorithm.

In short, you are attempting to fix a problem that does not exist ... or at least not in the form that you describe.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T12:09:57.437

要为每个唯一连接生成唯一密码，您可以使用以下内容：

```
SHA256(secret + connectionNumber + dateAndTime) 
```

`secret`是一个固定的秘密密码，您可以根据需要经常更改。

`connectionNumber`是当天迄今为止建立的连接的计数。

`dateAndTime`是标准格式的当前数据和时间。

将所有三个转换为字符串，连接并应用 SHA-256。这将为您提供一个字节数组。如果您需要文本而不是字节，请使用 Base64 进行转换。

例如：

```
String password = Base64(SHA256("myBIGsecret52012-07-23T13:06:25.254Z")); 
```

# javascript - 取消除最后一个之外的所有事件，

> ID：11599870
> 
> 赞同：1
> 
> 时间：2012-07-22T11:25:49.213
> 
> 标签：javascript, javascript-events

是否有可能这样做..假设在一段时间内有很多相同的事件触发了很多时间。我们将取消所有以前的事件，只使用最后一个。

只有当 3 秒内没有更多事件时，最后一个事件才会持续一次。

例如。有一个按钮。我们将让用户根据需要多次单击此按钮，并且我们不会禁用此按钮。无论用户点击了多少次，我们都将其视为最后一次点击。当 3 秒内没有更多点击时，将执行点击事件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T12:09:51.153

您正在寻找的东西被称为[去抖动](http://ajaxian.com/archives/debounce-your-javascript-functions)。[对于这个任务，Ben Alman](http://benalman.com/projects/jquery-throttle-debounce-plugin/)已经有一个很棒的插件/库。

```
(function() {
    var button = document.getElementsByTagName("button")[0],
        func = Cowboy.debounce(1000, function() { console.log("click fired!"); });

    button.addEventListener("click", func);
}())​ 
```

[小提琴](http://jsfiddle.net/Ngwzj/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T12:06:51.663

```
var domButton = document.getElementById('some-button'),
    timeOut;
domButton.addEventListener('click', function(e) {
    if (e.clientX && e.clientY) {
        e.preventDefault();
        clearTimeout(timeOut);
        timeOut=setTimeout(function({document.getElementById('somebutton').click()},3000);
    }
},false) 
```

# c++ - bittorrent 客户端的良好多线程模型？

> ID：11599872
> 
> 赞同：2
> 
> 时间：2012-07-22T11:26:06.497
> 
> 标签：c++, multithreading, bittorrent

我目前正在编写一个 bittorrent 客户端。我正在进入我的程序阶段，我需要开始考虑多个线程是否会改进我的程序以及我需要多少线程。

我假设我会分配一个线程来处理跟踪器，因为程序可能一次与其中几个（大约 1-5 个）联系，但只需要在跟踪器分配的时间间隔内联系它们（大约 20分钟），因此不会对程序非常密集。

该程序将定期与众多同行联系，以从他们那里下载文件。以下内容来自[Bittorrent 规范 Wiki](http://wiki.theory.org/BitTorrentSpecification)：

*实现者注意：即使30个peer也足够了，官方客户端版本3实际上只有在peer少于30个时才主动建立新连接，如果达到55个则拒绝连接。这个值对性能很重要。当一个新片段完成下载时，需要将 HAVE 消息（见下文）发送给大多数活跃的对等点。结果，广播流量的成本与对等点的数量成正比增长。超过 25 岁的新同行极不可能提高下载速度。强烈建议 UI 设计人员将其变得晦涩难懂且难以更改，因为这样做非常有用。*

这表明我应该与大约 30 个同行联系。什么是用于我的 Bittorrent 客户端的好的线程模型？显然我不想为每个对等点和每个跟踪器分配一个线程，但我可能需要的不仅仅是主线程。你有什么建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T12:08:36.770

我认为这里不需要多线程。线程过多也意味着在这些线程之间进行大量通信，以确保每个人都在正确的时间做正确的事情。

对于网络，将所有内容保持在一个线程上，并使用非阻塞 I/O 进行多路复用。在 Unix 系统上，这将是一个带有 select/poll（或特定于平台的扩展，例如 epoll）的设置；在 Windows 上，这将是完成端口。

您甚至可以将磁盘 I/O 添加到其中，这将使线程之间的通信变得微不足道，因为没有任何 :-)

如果您想将线程视为单独组件的容器，则磁盘 I/O 可以进入另一个线程。在这种情况下，您可以使用阻塞 I/O，因为无论如何都没有很多多路复用。

同样，在这种情况下，跟踪器处理也可能进入不同的线程，因为它是与对等处理不同的组件。DHT 也是如此。

您可能希望将校验和检查卸载到单独的线程。不太确定这会变得多么复杂，但如果涉及大量 CPU 使用，那么将其从 I/O 东西中移除听起来并没有那么糟糕。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T11:39:05.757

当您标记您的问题 [C++] 时，我建议[std:thread](http://en.cppreference.com/w/cpp/thread/thread) of C++11 。[您可以在此处](http://www.justsoftwaresolutions.co.uk/threading/multithreading-in-c++0x-part-1-starting-threads.html)找到一个不错的教程（以及许多其他教程）。

关于线程数：您可以毫无问题地使用 30 个线程，并让它们检查是否有事情要做，并在检查之间让它们休眠一段合理的时间。操作系统将负责其余的工作。

# apache-flex - how em embed font and bold fonts in Flex?

> ID：11599877
> 
> 赞同：0
> 
> 时间：2012-07-22T11:26:57.577
> 
> 标签：apache-flex, flex4

I use flex4.5 I have this simple question: I need to embed normal and Bold Arial fonts to my application: I tried that:

```
@namespace s "library://ns.adobe.com/flex/spark";    
@namespace mx "library://ns.adobe.com/flex/mx";

@font-face {
    src:url("assets/arial.ttf");
    fontFamily: arial;
}

global
{
    font-size: 12;
    color: #000000;
    font-weight: normal;
    font-family: arial;

} 
```

This works fine, except the BOLD fonts were still aliased.

Then I tried that:

```
@namespace s "library://ns.adobe.com/flex/spark";    
@namespace mx "library://ns.adobe.com/flex/mx";

@font-face {
    src:url("assets/arial.ttf");
    fontFamily: arial;
}

@font-face {
    src:url("assets/arial.ttf");
    fontFamily: arial;
    fontWeight:bold;
}

global
{
    font-size: 12;
    color: #000000;
    font-weight: normal;
    font-family: arial;

} 
```

Bold fonts are not aliased any more, but they are displayed as normal fonts !

My question is : how to embed BOLD and Not BOLD fonts in Flex4.5 Css so both are displayed anti aliased ?

regards

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T12:21:32.363

尝试使用粗体变体`arial-bold`或类似名称命名字体，然后将其用作样式声明中的字体系列。您还需要将`font-weight`样式设置为`bold`.

# android - 无法加载新的空白活动 - android 教程

> ID：11599878
> 
> 赞同：2
> 
> 时间：2012-07-22T11:27:02.237
> 
> 标签：android, android-intent, android-activity

我是一名新的 android 开发人员，在遵循 Android 网站上的教程时遇到了问题 - [http://developer.android.com/training/basics/firstapp/starting-activity.html](http://developer.android.com/training/basics/firstapp/starting-activity.html)

我的程序可以很好地加载到模拟器上，但是当您在 EditText 中输入内容然后点击发送按钮时，会弹出一个窗口，显示“应用程序已停止工作”。好像我的新活动没有被创建，我不确定为什么。我已经搜索了网络（和我的代码）以查看是否可以找到解决方案，但这样做无济于事。任何帮助，将不胜感激。

我的第一个活动的代码：

```
package com.example.appli;
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.widget.EditText;

public class MainActivity extends Activity {
public final static String EXTRA_MESSAGE = "com.example.myapp.MESSAGE";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.testlayout);

   //////Button myButton = (Button) findViewById(R.id.my_button); //Told in tutorial to put this in onCreate
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

/** Called when the user selects the Send button */
public void sendMessage(View view) {
    // Do something in response to button
    Intent intent = new Intent(this, DisplayMessageActivity.class);
    EditText editText = (EditText) findViewById(R.id.edit_message);
    String message = editText.getText().toString();
    intent.putExtra(EXTRA_MESSAGE, message);
    startActivity(intent);
}

} 
```

我的第二个活动的代码（被调用的那个）

```
 package com.example.appli;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.widget.TextView;

    public class DisplayMessageActivity extends Activity{

@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        //get message from intent
        Intent intent = getIntent();
        String message = intent.getStringExtra(MainActivity.EXTRA_MESSAGE);

        // Create the text view
        TextView textView = new TextView(this);
        textView.setTextSize(40);
        textView.setText(message);

        setContentView(textView);
    }
} 
```

清单

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.appli"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<application

    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >

    <activity android:name="com.example.myapp.DisplayMessageActivity" />

    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T11:34:15.720

在 AndroidManifest 文件中，您声明了不正确的包

改变

```
 <activity android:name="com.example.myapp.DisplayMessageActivity" /> 
```

到

```
 <activity android:name="com.example.appli.DisplayMessageActivity" /> 
```

要不就

```
 <activity android:name=".DisplayMessageActivity" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T11:40:25.833

试试这个

```
 <activity android:name=".DisplayMessageActivity"/> 
```

代替

```
 <activity android:name="com.example.myapp.DisplayMessageActivity" /> 
```

在你的`Manifest.xml`文件中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T11:42:27.470

您只声明了一个 Activity 也是错误的包名称

你的清单已经有包名

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.appli" 
```

所以就这样声明

```
<activity android:name=".DisplayMessageActivity" /> 
```

您还需要在清单中添加它

```
 <activity android:name=".MainActivity /> 
```

删除您提到的目标 SDK 版本

```
android:targetSdkVersion="15" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-22T11:43:14.737

您已在活动中定义包`package com.example.appli;`。

你为什么在清单中定义你的活动`<activity android:name="com.example.myapp.DisplayMessageActivity" />`？

将此行替换为

`<activity android:name=".DisplayMessageActivity" />`.

# sql - 如何从列中删除重复值？

> ID：11599882
> 
> 赞同：2
> 
> 时间：2012-07-22T11:27:27.453
> 
> 标签：sql, sqlite

我有一个数据库。id - 是一个主键。

```
id color
1 green
2 red
3 pink
4 pink
5 red 
```

如何删除 SQL 中的重复颜色？结果将是：

```
id color
1 green
2 red
3 pink 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T12:03:42.757

为了从您的表中删除重复项，请尝试如下语句：

```
DELETE FROM my_table 
WHERE EXISTS (
  SELECT 1 FROM my_table t2
  WHERE my_table.color = t2.color
  AND my_table.id > t2.id
) 
```

英文：删除所有`my_table`有另一条`my_table`相同颜色但ID较低的记录的记录。这将保留每个重复颜色具有最低 ID 的记录。

我建议在删除重复项后，您应该添加一个唯一约束，如[LolCoder 此处所示](https://stackoverflow.com/a/11599905/521799)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T11:30:54.310

您必须使用`DISTINCT`以下方式查找不同的项目：

```
SELECT DISTINCT(color) FROM colors 
```

如果要从表中删除重复的颜色，

```
ALTER IGNORE TABLE colors ADD UNIQUE KEY idx1(color); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T11:28:29.573

您可以使用`DISTINCT()`-statement 来实现这一点。例如：

```
$sql = "SELECT DISTINCT(color) FROM colors"; 
```

**更多信息**

DISTINCT 子句允许您从结果集中删除重复项。DISTINCT 子句只能与 select 语句一起使用。

资料来源：[网络科技](http://www.techonthenet.com/sql/distinct.php)

# perl - Joining two files based on two fields

> ID：11599886
> 
> 赞同：1
> 
> 时间：2012-07-22T11:27:53.690
> 
> 标签：perl, join, awk

I posted a question before a week and the answer was simply (use join):

```
join <(sort file1) <(sort file2) >output 
```

to join files that have something common which is usually the first field.

I have the following two files:

genes.txt

```
ENSG001 ENSG002
ENSG002 ENSG001
ENSG003 ENSG004 
```

features.txt

```
ENSG001 400
ENSG002 350
ENSG003 210
ENSG004 100 
```

I need to join these two files to be like this:

output.txt

```
ENSG001 400 ENSG002 350
ENSG002 350 ENSG001 400
ENSG003 210 ENSG004 100 
```

I know the answer is in join command but I can't figure out how to join based on two fields. I tried

`join -j 1 <(sort genes.txt) <(sort features.txt) >attempt1.txt`

but the result will looks like this:

attempt1.txt

```
ENSG001 ENSG002 400
ENSG002 ENSG001 350
ENSG003 ENSG004 210 
```

I then tried

`join -j 2 <(sort -k 2 genes.txt) <(sort -k 2 features.txt) >attempt2.txt`

attempt2.txt is empty

Does (join) have the ability to join two files based on two fields ? If no then how can I do it ?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T12:27:24.770

```
%features;
open $fd, '<', 'features.txt' or die $!;
while (<$fd>) {
    ($k, $v) = split;
    $features{$k} = $v;
}
close $fd or die $!;

open $fd, '<', 'genes.txt' or die $!;
while (<$fd>) {
    s/(\w+)/$1 $features{$1}/g;
    print;
}
close $fd or die $!; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-22T13:54:15.573

据我所知，join 不支持这一点。见[`join manpage`](http://www.manpagez.com/man/1/join/)。

但是，您可以通过 2 种方式完成此操作：

*   将文件中的第一个空格/制表符转换为插入符号（或您在文件中永远不会看到的其他字符），然后像以前一样使用 join 它将前 2 个字段视为 1 个字段：

    ```
    perl -pi -e 's/^(\S+)\s+/$1#/' file1
    perl -pi -e 's/^(\S+)\s+/$1#/' file2
    join <(sort file1) <(sort file2) >output
    tr "#" " " output > output.final 
    ```

*   在 Perl 中进行。你可以做

    *   直率的方法（perreal 的回答：一次在 2 个文件中啜饮）；如果两个文件都很大，这会占用大量内存

    *   更节省内存的方法（cdtits 的回答：在一个较小的文件中啜饮，存储在哈希中，然后将查找应用于第二个文件的逐行读取）

    *   对于非常庞大的文件，请采用线性方法：

        对两个文件进行排序，读取每个文件的 1 行；如果它们匹配，则打印匹配；如果不; 跳过 ID 较小的文件中的 1 行。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-22T20:40:58.713

谢谢大家，我已经设法通过欺骗问题来回答它。

首先我正常加入文件，然后我改变了第一个和第二个字段的位置，然后我再次加入了修改后的输出文件与特征，最后我再次切换了字段的位置。

```
join <(sort genes.txt) <(sort features.txt) >tmp

cat tmp | awk '{ print $2, $1, $3 }' >tmp2

join <(sort tmp2) <(sort features.txt) >tmp3

cat tmp3 | awk '{ print $2, $3, $1, $4 }' >output.txt 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-22T17:47:15.250

您的方法通常是正确的。它应该可以通过类似的东西来实现

```
join -o '1.1 2.2 1.2 1.3' <(
    join -o '1.1 1.2 2.2' -1 2 <(sort -k 2 genes.txt) <(sort features.txt) |
    sort
) <(sort features.txt) 
```

如果我放置`ENSG004`而不是`ENST004`放入，`features.txt`我将得到您正在寻找的东西：

```
$ join -o '1.1 2.2 1.2 1.3' <(
      join -o '1.1 1.2 2.2' -1 2 <(sort -k 2 genes.txt) <(sort features.txt) |
      sort
  ) <(sort features.txt)
ENSG001 400 ENSG002 350
ENSG002 350 ENSG001 400
ENSG003 210 ENSG004 100 
```

没有那么冗长的版本，但更难跟踪字段：

```
join -o '1.2 2.2 1.1 1.3' -1 2 <(
    join -1 2 <(sort -k 2 genes.txt) <(sort features.txt) |
    sort -k 2
) <(sort features.txt) 
```

`features.txt`如果您要处理非常大的数据，它应该对数十 GB 的数据非常有效（如果并且`genes.txt`大小相当的话，也应该比大多数 RDBMS 更好）：

```
TMP=`mktemp`
sort features.txt > "$TMP"
sort -k 2 genes.txt | join -o '1.1 1.2 2.2' -1 2 - "$TMP" | sort |
    join -o '1.1 2.2 1.2 1.3' - "$TMP"
rm "$TMP" 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-22T11:42:00.923

如果 features.txt 中的“ENST”是“ENSG”，这里有一个适用于给定示例的**awk解决方案：**

```
awk 'BEGIN {while(getline <"features.txt") f[$1]=$2} {print $1,f[$1],$2,f[$2]}' < genes.txt 
```

如果需要，我可以详细解释。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-22T11:49:53.503

使用 perl：

```
use strict;
use warnings;
open GIN, "<genes.txt"    or die("genes");
open FIN, "<features.txt" or die("features");
my %relations;
my %values;
while (<GIN>) {
  my ($r1, $r2) = split;
  $relations{$r1} = $r2;
}
while (<FIN>) {
  my ($k, $v) = split;
  $values{$k} = $v;
}
for my $r1 (sort keys %relations) {
  my $r2 = $relations{$r1};
  print "$r1 $values{$r1} $r2 $values{$r2}\n"; 
}
close FIN; close GIN; 
```

# java - How can I cast generic type to generic type with generic parameter?

> ID：11599887
> 
> 赞同：1
> 
> 时间：2012-07-22T11:28:02.117
> 
> 标签：java, generics

I have a method in one of my utility classes that takes a collection and a class object, and returns an Iterable instance that can iterate over all members of the collection that are instances of the specified class. Its signature is:

```
public static <T> Iterable<T> iterable (
      Iterable<? super T> source, Class<T> requiredClass); 
```

This works very well for most use cases, but now I need to use it with a generic class, `Item<PROTOTYPE>`. I understand that I cannot be certain that the items returned by the resulting iterator cannot be guaranteed to have any particular prototype, so I tried to cast its return as follows:

```
Iterable<Item<?>> allItems = (Iterable<Item<?>>) 
                            TypeCheckingIterator.iterable(source, Item.class); 
```

Unfortunately this returns a compiler error "Cannot cast from `Iterable<Item>` to `Iterable<Item<?>>`"

Why can it not perform this cast when I can cast `Item` to `Item<?>` quite happily? Is there a way I can force it to make this cast, without having to cast the items returned by the iterators explicitly?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T11:32:20.960

You can use type erasure if you are sure its safe

```
Iterable<Item<?>> allItems = (Iterable<Item<?>>) (Iterable)
                        TypeCheckingIterator.iterable(source, Item.class); 
```

or

```
Iterable<Item<?>> allItems =
                     TypeCheckingIterator.<Item<?>>iterable(source, Item.class); 
```

# android - How to cancel the execution of a method when the "back" button is click in android

> ID：11599889
> 
> 赞同：0
> 
> 时间：2012-07-22T11:28:26.563
> 
> 标签：android, button, android-asynctask, progressdialog

my data is load from the internet, so I use the AsynTask(). execute() method to open a progressDialog first, then load the data in the background. it works, however, sometimes it takes too long to load the data so I want to cancel loading, and here is the problem: when I click back button the dialog dismiss but after it finish loading at the background, it start to do whatever it supposed to do after loading, e.g. start a new intent. is there any way I can cancel the loading properly???

```
new GridViewAsyncTask().execute();
public class GridViewAsyncTask extends AsyncTask<Void, Void, Void> {
    private ProgressDialog myDialog;

    @Override
    protected void onPreExecute() {
        // show your dialog here
        myDialog = ProgressDialog.show(ScrollingTab.this, "Checking data",
                "Please wait...", true, true);

    }

    @Override
    protected Void doInBackground(Void... params) {
        // update your DB - it will run in a different thread
        loadingData();

        return null;
    }

    @Override
    protected void onPostExecute(Void result) {
        // hide your dialog here
        myDialog.dismiss();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T11:36:09.390

`mAsycntask.cancel();`当您想停止任务时调用。

然后

```
@Override
protected Void doInBackground(Void... params) {
    // update your DB - it will run in a different thread

    /* load data  */
    ....
    if (isCancelled()) 
       return;
    /* continue loading data. */

    return null;
} 
```

文档： http: [//developer.android.com/reference/android/os/AsyncTask.html#isCancelled](http://developer.android.com/reference/android/os/AsyncTask.html#isCancelled) ()

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T11:51:50.767

像这样声明你的 AsyncTask`asyncTask = new GridViewAsyncTask();`

然后像以前一样执行它 (asyncTask.execute();) 并取消它：

```
asyncTask.cancel(); 
```

将该方法添加`onCanceled`到您的 AsyncTask 类并覆盖它。也许显示一个日志或其他东西！

```
@Override
protected Void onCancelled () {
    // Your Log here. Will be triggered when you hit cancell.
} 
```

# android - [Android]min3d -collision detection and some stuff

> ID：11599893
> 
> 赞同：1
> 
> 时间：2012-07-22T11:29:10.550
> 
> 标签：android, 3d, detection

I,m using min3d framework on my device to make some car game, so i created some simple car model and simple and its moving, but i want to create ''physics'' and i need the collision detection which isn't provided in min3d (i won't change framework because i have android 2.1 without possibility to upgrade) i want to create it by my self but the problem is that i don,t know how to check if the plane collides with anything what i want to do is: -create simple flat rectangle (not cube) and i want to place it in front of ''car'' and check if something gets inside of this rectangle and something does i want the car to bounce of it in reversed direction (the problem isn't to bounce but: how to check if something gets through my rectangle)

I have some other problem too:/

When i enclose my ''game''(haha) with a LinearLayout in xml everythong is going fine till i use the command to set the text with the value of rotation of a car for example -then is force close:/ I'm doing it form my class from which i load my objects (i'm providing my classes too)

I was searching for tutorials on the web but none of them was tlaking about 3d collision and even if it was about 3d there was too much code that wasnt need and i was loast in it so i dont get anything

I ask you royal users from stackoverflow to provide me example for creating the rectangle(if needed, because i can laod model from .3ds and .obj)and check if something gets through it(intersects?) not for entire code but just for the method how to do that, and how to refrsh the value of a car, in layout without a crash

By the way: my ''game'' is using qwerty keyboard as input (i,o,p,l keys)

Wanted to post my class here but its to much of lines and was getting erros so grab it on free hosting site, its scanned by avast already on my pc, it contains my entire project with min3d too.

My sources ready to compile and run are(with min3d -which isn't mine): [http://odsiebie.pl/ax1v1p5tam8i/KRL044.7z.html](http://odsiebie.pl/ax1v1p5tam8i/KRL044.7z.html)

thanks in advice:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T12:05:25.387

一种方法是将其分解为两个维度（xy）。想象你的汽车是二维矩形。在您想检查碰撞的那一刻，只需检查“汽车”的四个角中的任何一个是否在另一辆车的矩形内。可能不是最佳实践，但对我有用。

而不是这个，你可以使用 r-tree sqlite 来检查碰撞。

# jquery - creating smooth scrolling div with slot machine animation for it's images

> ID：11599894
> 
> 赞同：2
> 
> 时间：2012-07-22T11:29:12.553
> 
> 标签：jquery, html, scroll, jquery-animate

![select image with slot machine animation](../Images/df299b3cca1bd3e116bc938b8a922033.png)

I want to create something like a slot machine (something like the picture) that when i click on an image all the images scroll and stop on the selected one (EX. in the picture i clicked on image number 2). I tried to write and use some jQuery samples but i cant do that. Can some body guide me, how to do that?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-20T09:17:26.543

请检查以下解决方案，这是 Diaco 在 GSAP 论坛上向我建议的，也许这可能会对您有所帮助。

**HTML：**

```
<div class="box">END</div>
<div class="box">Slide 4</div>
<div class="box">Slide 3</div>
<div class="box">Slide 2</div>
<div class="box">Slide 1</div> 
```

**CSS：**

```
body {
  background-color: #333;
  padding: 0px;
  margin: 0px;
  overflow: hidden;
}

.bullets {
  position: absolute;
  left: 10px;
  top: 10px;
  background-color: rgba(0, 0, 0, 0.3);
}

.bullet {
  width: 10px;
  height: 10px;
  margin: 2px;
  background-color: white;
  display: inline-block;
}

.box {
  width: 100%;
  height: 100%;
  position: absolute;
  text-align: center;
  font-size: 70px;
  color: white;
  font-family:'Oswald', arial; 
  padding-top: 50px;
}

.box:nth-child(1) {
  background-color: #ff002f;
}

.box:nth-child(2) {
  background-color: #00718b;
}

.box:nth-child(3) {
  background-color: #4a5619;
}

.box:nth-child(4) {
  background-color: #444;
}

.box:nth-child(5) {
  background-color: #ff002f;
} 
```

**Javascript：**

```
/* a Pen by DIACO : twitter.com/Diaco_ml || codepen.io/MAW
powered by GSAP : http://www.greensock.com/
*/

var box = $(".box") , indx = 0 , Anim ;

box.each(function(){ this.anim = TweenMax.to($(this),1,{yPercent:-100,paused:true,ease:Power4.easeIn}) });

$(window).on("mousewheel DOMMouseScroll", function(event){
  event.stopPropagation();  event.preventDefault(); 

  var Del = event.originalEvent.wheelDelta/120 || -event.originalEvent.detail/3;
  turn(Del);
});

var D = document.createElement('div');

var Dragger = Draggable.create(D,{trigger:".box",type:'y',minimumMovement:30,cursor:'n-resize',
onDrag:function(){ Del=this.getDirection("start")=='up'?-1:1;  turn(Del);}
});

function turn(Del){
  if(Del==1 && indx>0 ){
    if(Anim == undefined){  Anim = box[box.length-indx].anim.reverse(); indx--; }
    else if(!Anim.isActive()){  Anim = box[box.length-indx].anim.reverse(); indx--; }
    }
    else if(Del==-1 && indx<box.length-1){
    if(Anim == undefined){  Anim = box[(box.length-1)-indx].anim.play();    indx++; }
    else if(!Anim.isActive()){  Anim = box[(box.length-1)-indx].anim.play();    indx++; }
  }
};

/* a Pen by DIACO : twitter.com/Diaco_ml || codepen.io/MAW */ 
```

要运行上述 javascript，您必须包含 Greensock GSAP，它提供了一种有效的动画处理方式。

[http://cdnjs.cloudflare.com/ajax/libs/gsap/1.17.0/TweenMax.min.js](http://cdnjs.cloudflare.com/ajax/libs/gsap/1.17.0/TweenMax.min.js)

谢谢！

# javascript - Magento 1.4.2 中 HelloSlide 主页块中显示的产品数量

> ID：11599900
> 
> 赞同：0
> 
> 时间：2012-07-22T11:30:37.087
> 
> 标签：javascript, magento

[http://bit.ly/bsydBA](http://bit.ly/bsydBA)

我已将显示靴子的产品滑块加宽为全页宽度，但我没有看到如何扩展显示的产品数量，既不是通过 CSS 也不是 feature.phtml 中的代码（下）。我也没有在管理员中找到任何可以让我设置任何参数的东西。

该网站是在许多先前的开发人员了解情况后才来找我的，所以我只是围绕对核心文件所做的任何更改（是的，他们没有使用 /app/code/local/）。

有没有人使用过主题或看到我可以在哪里进行所需的调整？

提前致谢。

```
<?php $_productCollection=$this->getLoadedProductCollection() ?>
<?php if(!$_productCollection->count()): ?>
<div class="note-msg">
    <?php echo $this->__('There are no products matching the selection. Please provide a category ID.') ?>
 </div>
<?php else: ?>
<?php // Grid Mode ?>
 <ul id="featured" class="jcarousel-skin-tango">

<?php $_collectionSize = $_productCollection->count() ?>
<?php $i=0; foreach ($_productCollection as $_product): ?>
    <?php if($i++%4==0): ?>

            <?php endif ?>

         <li><a class="preview" rel="<?php echo $this->helper('catalog/image')->init($_product, 'small_image')->resize(300, 300); ?>" href="<?php echo $_product->getProductUrl() ?>" title="<?php echo $this->htmlEscape($_product->getName()) ?>">
                    <img src="<?php echo $this->helper('catalog/image')->init($_product, 'small_image')->resize(105, 105); ?>" width="105" height="105" alt="<?php echo $this->htmlEscape($_product->getName()) ?>" />
                </a> </li>

        <?php if ($i%4==0 && $i!=$_collectionSize): ?>

        <?php endif ?>

<?php endforeach ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T15:16:49.483

我解决了这个问题。原来该站点使用 GTSpeed 来缩小 JS 和 CSS 并缓存它们，因此我在 Firebug 中所做的更改没有出现。

一旦我弄清楚了这一点并将其禁用，这很容易，只需要更改

.jcarousel-skin-tango .jcarousel-container-horizo​​ntal 用于外部容器 .jcarousel-skin-tango .jcarousel-clip-horizo​​ntal 用于内部容器

# transactions - 2 阶段提交 - 提交步骤失败

> ID：11599908
> 
> 赞同：1
> 
> 时间：2012-07-22T11:31:49.323
> 
> 标签：transactions, distributed-transactions

在 2 Phase Commit 中，在所有参与事务的组件都投票“是”之后，事务协调器发出“提交”命令。然后每个参与者提交自己的事务。

如果任何参与者在“提交”步骤失败会发生什么？虽然这个组件失败了，但其他组件可能已经提交了他们的事务。如果发生这种情况，事务协调器是否能够向所有参与者发出回滚命令。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T16:51:25.427

第一阶段的全部目的是确保在提交阶段没有任何失败。至少由于数据完整性或业务流程的观点。因此，如果提交的准备阶段很好，那么可以假设提交将起作用，但网络/通信失败除外。

所有参与系统必须就处理情况的一种或另一种方式达成一致

1.自动提交。如果协调器没有显式调用回滚，（在给定时间内）事务将被视为由相应的参与系统提交。

2.Transaction Coordinator 为每个失败的组件重试。在网络故障的情况下，重试可能仍然有效。

3.补偿。在指定次数的重试之后，事务协调器假定事务已经以不一致的状态结束。然后它可以尝试补偿。（注意：这不一定是回滚，这就像事务失败时要采取的行动）。

现在想想这个。补偿本身可能不会在所有资源管理器中都成功。

一些业务流程可能也需要人工补偿！因此，您需要记录、发出警报，并且可能需要手动补偿才能使系统恢复到原始状态。

# r - 按 r 中的列对数据帧进行排序

> ID：11599910
> 
> 赞同：3
> 
> 时间：2012-07-22T11:32:05.880
> 
> 标签：r

> **可能重复：**
> [如何在 R 中按列对数据框进行排序](https://stackoverflow.com/questions/1296646/how-to-sort-a-dataframe-by-columns-in-r)

我正在尝试按几列对 data.frame 进行排序

```
df<-data.frame("Sp1"=c(7,4,2),"Sp2"=c(6,2,1))
row.names(df)<-c("A01","A02","A03")

    Sp1 Sp2
A01   7   6
A02   4   2
A03   2   1

#I am using    

df[with(df, order("Sp1"))] 
```

然而，这没有任何作用。任何想法为什么？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-22T11:48:20.960

`Sp1`使用时不应引用`with`. 这总是会返回`1`，因此只会返回您的第一行。试试这个：

```
> df[order(df$Sp1),] 
    Sp1 Sp2
A03   2   1
A02   4   2
A01   7   6
> df[with(df, order(Sp1)), ]
    Sp1 Sp2
A03   2   1
A02   4   2
A01   7   6 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T17:25:06.887

您还可以尝试在包中使用另一个内置函数`doBy`：

```
# install.packages('doBy')
library(doBy)
orderBy(Sp1~Sp2, data=df)
    Sp1 Sp2
A03   2   1
A02   4   2
A01   7   6 
```

# html - 如何在选择输入中表示分层数据？

> ID：11599911
> 
> 赞同：3
> 
> 时间：2012-07-22T11:32:07.273
> 
> 标签：html, css

我不是在问如何生成它，而是在问如何格式化它。是否有任何一组用于此目的的字符？我直观的方法是使用具有以下值的选项：

```
master
    |-- foo 1
    |-- foo 2
        |-- bar 1 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T11:41:23.697

如果你想用一个 select 元素来做，并且你不需要超过两个级别，那么你可以使用[**`optgroup`**](http://reference.sitepoint.com/html/optgroup).

CSS 样式是有限的。据我所知，对于它`select`本身，您可以更改诸如`color`, `background`, `border`, `font`,之类的东西`text-align`。

对于`optgroup`and `option`，你可以改变......好吧，同样的事情。您还可以使用不同的样式设置所选选项`[selected] {/*styles*/}`。你不能改变`padding`或`margin`......这样的事情。并且尝试嵌套`optgroup`s 也不起作用。

你可以做什么：你可以对不同`optgroup`的 s 和`option`s 设置不同的样式（使用类、nth-child、属性选择器）。

[**演示**](http://dabblet.com/gist/3159673)

如果您需要很多级别，那么使用嵌套列表可能会更好。

```
<ul>
    <li>master
        <ul>
            <li>foo 1</li>
            <li>foo 2
                <ul>
                    <li>bar 1</li>
                </ul>
            </li>    
        </ul>
    </li>
</ul> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-22T12:51:47.440

如果您想使用 javascript 或 jQuery 来操作`select`列表，这是我的解决方案

```
<select name="hierarchies">
<option class="level_1">Computer Science</option>
   <option class="level_2">Java</option>
      <option class="level_3">Martin Fowler</option>
      <option class="level_3">Ian Galloway</option>
<option class="level_1">Computer Engr</option>
   <option class="level_2">C#</option>
      <option class="level_3">John Skeet</option>
      <option class="level_3">Phil Haack</option>
      <option class="level_3">Marc Garvel</option>
<option class="level_1">C</option>
</select> 
```

然后使用 jQuery 或 JavaScript 根据关卡重新格式化内容

```
$(document).ready(
 function(){

   $('.level_2').each(
        function(){
            $(this).text('------'+$(this).text());
        }
   );

   $('.level_3').each(
        function(){
            $(this).text('---------'+$(this).text());
        }
   );

  }
); 
```

结果屏幕

![在此处输入图像描述](../Images/a8a3d47102df7da9fb3b6f17cf5b57e7.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-22T18:24:04.093

方框图字符或多或少是出于这样的目的。至少，你会使用 U+251C BOX DRAWINGS LIGHT VERTICAL 和 RIGHT “├” 和 U+2500 BOX DRAWINGS LIGHT HORIZONTAL“─”。例如，

```
<select>
<option>master
<option>&nbsp;&nbsp;&nbsp;&#x251c;&#x2500; foo 1
<option>&nbsp;&nbsp;&nbsp;&#x251c;&#x2500; foo 2
<option>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#x251c;&#x2500; bar 1
</select> 
```

但是，很难使符号很好地对齐。使用上面的不间断空格是一个粗略的工具，最重要的是，字符宽度会有所不同——所以你可以考虑使用类似的 CSS 规则

```
 select, option { font-family: Consolas, monospace } 
```

以获得更可预测的渲染。

# ruby-on-rails-3 - Rails application takes up all of the server memory

> ID：11599913
> 
> 赞同：3
> 
> 时间：2012-07-22T11:32:16.743
> 
> 标签：ruby-on-rails-3, memory-leaks, nginx, passenger

I am running a rails app (Passenger and nginx with mongodb and memcached) app on a ubuntu VPS (1GB RAM)- from a couple of days, I see that after starting nginx, ruby process slowly takes up all the memory of the box even though there are no requests on the server. new_relic shows the following ![enter image description here](../Images/30f59b93b9bb881cef5482b018a6d5f4.png)

top Output

```
top - 12:02:23 up  2:47,  1 user,  load average: 0.03, 0.02, 0.00
Tasks:  16 total,   1 running,  15 sleeping,   0 stopped,   0 zombie
Cpu(s):  0.1%us,  0.0%sy,  0.0%ni, 99.9%id,  0.0%wa,  0.0%hi,  0.0%si,  0.0%st
Mem:   1048576k total,  1048576k used,        0k free,        0k buffers
Swap:        0k total,        0k used,        0k free,        0k cached

9993 mongodb   18   0  128m  29m  21m S    0  2.9   0:17.06 mongod                                                                                      
1135 nobody    18   0 71664  18m  856 S    0  1.8   0:00.55 memcached                              
14310 passenge  15   0  500m 434m 4660 S    0 42.5   0:13.59 ruby
15496 passenge  15   0  425m 360m 4648 S    0 35.3   0:13.06 ruby 
```

I think there is some code leaking memory - or I need to somehow kill costly ruby processes on passenger whenever they reach some threshold. Please share some thoughts on both these issues.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-19T08:04:12.890

很难回答，因为没有太多信息可以继续，所以我会相当笼统地回答这个问题。显示内存使用量随时间变化的图表或显示响应时间下降的图表会很有帮助。

无论如何，我有一个类似的设置（Rails/Passenger/Nginx/MongoDB/VPS-1GB）。

*   首先通过检查日志以确认没有请求来确认您假设没有请求（并确保在 Nginx 中打开了足够的日志记录）

*   尝试禁用 New Relic（因为随着时间的推移，这会影响到他们的服务器）并查看您拥有的任何其他监控软件（例如 Nagios）。

*   尝试一个免费的负载测试应用程序（例如[http://loadimpact.com](http://loadimpact.com)）并在主动负载测试时观察内存/GC 和处理器图表。如果您看到内存使用量逐渐上升并超过了健康的数量，您可以打赌您在某个地方存在内存泄漏。

如果你发现你这样做了，这实际上只是消除变量的问题——我会在 Nginx 上暂停 Rails，但你可以在没有前端的情况下运行 Rails，或者关闭乘客并点击 Nginx 中的所有静态资产来尝试找到原因。

希望这可以帮助。

# php - 将数组内爆为来自 mysql 查询的逗号分隔字符串

> ID：11599917
> 
> 赞同：11
> 
> 时间：2012-07-22T11:32:28.553
> 
> 标签：php, mysql, arrays, string, implode

在过去的 1 1/2 天里，我一直在尝试将 16 行 ID 存储到一个字符串中，并用逗号分隔每个 ID。我得到的数组来自 MySQL。我得到的错误是

> implode() 函数：传递了无效的参数

```
$str=array();
$string="";
while($row = mysql_fetch_row($result)) 
{
    $user_id=$row;
    $str=$user_id;
    foreach($str as $p=>$v){
        comma($v);
    }
}

function comma($v){
    $string= implode(",",$v); echo $string;
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-22T11:40:59.907

尝试这样的事情：

```
$ids = array(); 
while ($row = mysql_fetch_assoc($result))  
{
    $ids[] = $row["UserID"]; 
} 
echo implode(", ", $ids); 
```

替换`"UserID"`为表中 id 的列名。

所以：首先构建数组，然后将数组内爆成字符串。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-08-05T22:26:41.570

有我的解决方案：

```
SELECT GROUP_CONCAT(UserID) as string  FROM Users; 
```

对于此函数，分隔符默认为“,”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-11T12:17:11.737

```
$query = 'SELECT id FROM your_table';
$rs = mysql_query($query);

$row = mysql_fetch_array($result);
return implode(',', $row); 
```

结果 1,2,3...

# java - eclipse javascript的Aptana插件 - 错误识别和自动完成

> ID：11599921
> 
> 赞同：0
> 
> 时间：2012-07-22T11:32:42.857
> 
> 标签：java, javascript, eclipse, aptana

我为 Eclipse IDE For javascript 安装了 Aptana 插件 3.2.0，但它所承诺的功能并不明显。即使是最简单的语法错误（代码中的随机字符串）也不会触发它。此外，它不执行自动完成。我知道它已正确安装到 Eclipse 上，因为我可以在 Preferences 选项卡中更改它的设置。

有什么帮助吗？我希望它像 Eclipse Java 编辑器一样顺畅地工作......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T21:07:35.997

您应该将与 .js 文件关联的编辑器更改为*JavaScript 源编辑器*，而不是在安装时设置为默认值的*JavaScript 编辑器，以使代码完成工作（我遇到了同样的问题*[https://stackoverflow.com/a/11603944/1038266](https://stackoverflow.com/a/11603944/1038266)） . 转到*Window->Preferences->General->Editors->File Associations*找到 .js 并将编辑器更改为 JavaScript Source Editor（默认按钮）。

# java - SalesForce login request packet data size

> ID：11599923
> 
> 赞同：1
> 
> 时间：2012-07-22T11:33:22.193
> 
> 标签：java, android, salesforce, packet

I am developing an android application which is very much sensitive on the **data packet size**.

I noticed that when I login SalesForce using the following code:

```
ConnectorConfig parameters = new ConnectorConfig("username@server.com",
                "password", null);
        try {
          Salesforce.login(parameters, new SForceLoginResponseListener());
        } catch (Exception e) {
          e.printStackTrace();      
        } 
```

the size of the data packet used is near **40KB**. I would like to know why the usage of data packet is so high during simple login ?

# android - 在 Android 应用中实现轮播（无 RenderScript）

> ID：11599925
> 
> 赞同：2
> 
> 时间：2012-07-22T11:33:34.167
> 
> 标签：android, carousel

我想在我的 Android 应用程序中实现一个轮播。但我希望它适用于“旧”版本的 Android（自 2.2 起）。所以我不能使用 RenderScript。

有没有办法做到这一点 ？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T08:35:53.640

[最后，我在 Google 的 Android 支持库 ( http://developer.android.com/tools/extras/support-library.html](http://developer.android.com/tools/extras/support-library.html) )中使用了 ViewPager 小部件

希望它会有所帮助！

# matlab - 使用 Matlab 对给定数据集应用离散小波变换 (DWT)

> ID：11599926
> 
> 赞同：1
> 
> 时间：2012-07-22T11:33:34.817
> 
> 标签：matlab, math, graph, dwt

我有一个包含以下两个字段的股票市场数据集：

*   日期
*   收盘价

我想在这个数据集上应用 DWT 并使用 Matlab 绘制图表。有人可以指导我如何做到这一点..

谢谢

**编辑**

这是一组示例数据

日期、开盘价、最高价、最低价、收盘价、成交量

24-Oct-03,29.12,29.2,28.93,29.16,3069600

23-Oct-03,29.5,29.69,29.34,29.55,3414200

22-Oct-03,29.95,29.95,29.49,29.65,6659700

它是 CSV。

我需要绘制一个 DWT 图，其中 x 轴是日期，y 轴是任何一个或所有变量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T12:51:48.347

## 计算 DWT

这实际上很简单。用于[`dwt`](http://www.mathworks.com/help/toolbox/wavelet/ref/dwt.html)获取近似系数和细节系数。例如，使用 daubechies 4-tap 小波的 DWT 将是：

```
[cA, cD] = dwt(X, 'db4') 
```

`X`你的数据在哪里。

如果每个样本`X`都有多个字段，并且您想仅在某个字段上应用 DWT，例如`X.closing_price`，添加方括号：

```
[cA, cD] = dwt([X.closing_price], 'db4') 
```

请注意，此解决方案假定数据样本是按**固定时间间隔**采集的。
要绘制数据，您需要准备另一个向量，它对应于天数：

```
t = 1:2:length(X); 
```

x 轴值每隔一天跳过一次，因为近似和细节系数向量每个都有一半的样本`X`。

## 演示代码

以下代码生成随机数据并将其放入结构数组中，每个元素都有两个字段：`date`和`closing_price`：

```
%# Generate some random data
C = cell(31, 2);
C(:, 1) = arrayfun(@(z)[num2str(z), '-Oct-03'], 1:length(C), 'Un', 0);
C(:, 2) = num2cell(100 * randn(1, length(C)));
X = cell2struct(C, {'date', 'closing_price'}, 2); 
```

现在，做生意：

```
%# Apply DWT
[cA, cD] = dwt([X.closing_price], 'db4');

%# Prepare x-axis values
t = 1:2:length(X);

%# Plot result with respect to date
figure
subplot(2, 1, 1), plot(t, cA)
title('Approximation coefficients'), xlabel('day'), ylabel('C_A')
subplot(2, 1, 2), plot(t, cD)
title('Detail coefficients'), xlabel('day'), ylabel('C_D') 
```

这是你应该得到的：

![预期结果](../Images/0ebadc4ebf8eb5c9002f1b92147bf1f3.png)

希望有帮助！

# seo - 页面内动态显示（基于 js）选项卡内的 Googlebot 和“隐藏”内容 - 对 SERPS 的影响？

> ID：11599933
> 
> 赞同：6
> 
> 时间：2012-07-22T11:34:08.720
> 
> 标签：seo, googlebot

假设某人在页面中具有“合法”隐藏的内容。

为了进一步解释这一点，想象一下：

```
<div id="tab-one">This is the content inside tab one</div>
<div id="tab-two">This is the content inside tab two</div>
<a href="javascript:void(0);" onclick="document.getElementById('tab-one').style.display='block';document.getElementById('tab-two').style.display='none';">Tab one</a>
<a href="javascript:void(0);" onclick="document.getElementById('tab-one').style.display='none';document.getElementById('tab-two').style.display='block';">Tab two</a> 
```

从 seo 的角度来看，假设这些都不是为了操纵 google。事实上，“标签二”包含无垃圾邮件的相关数据，这对 seo 有何影响？

googlebot 会将“隐藏”内容编入索引并将其精简为页面内容的一部分吗？

它会以与不使用 javascript 的情况下在页面上“可见”内容相同的方式使用此内容吗？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T17:01:40.370

我不相信过去 Google 对此主题有官方回应，但是，根据经验，我可以告诉您，Google 会很好地索引选项卡式内容。您甚至可以从内容中看到 SEO 流量。如果您的网站相当干净，我不会担心被标记为具有“隐藏内容”，只要内容可以通过用户操作（例如点击）访问，并且显然是可点击的。

但是，您需要考虑这一点。例如，隐藏选项卡中的某些内容是产品描述，例如“儿童安全”。如果用户正在寻找“儿童安全产品”，并且他们通过搜索引擎到达您的网站，他们可能不会立即看到该信息，因为他们不知道它隐藏在标签后面。

大多数用户不会花费大量时间进行搜索，因此对于用户来说，他们可能找不到内容并跳出，因为他们觉得自己没有找到他们正在寻找的相关信息。如果您同意 Google 和 Bing 使用搜索查询优化作为搜索信号的想法，这可能会“损害”您的 SEO。

就个人而言，除非它是真正的第三信息，否则除非对 Ux 至关重要，否则我不会将其放在选项卡后面。根据我的经验，如果信息相关，用户不介意滚动……但他们往往有“标签”盲目性，或者只有在导航的一部分或已经在事务流中时才真正与“隐藏”元素交互。

ps 另一种方法是使用可抓取的 AJAX 或 pushState() 让各个选项卡在其自己的 URL 上单独编入索引。但是您要小心……如果您在“页面”选项卡上渲染主要内容，您可能会遇到重复的内容问题。如果有意义，您可以使用 Google 发布的 rel="next" 和 rel="prev" 规范（但目前仅受 Google 支持）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T15:13:32.473

在网站管理员工具中，您将找到[Fetch as Google](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=158587)的选项。在那里你可以看到谷歌是如何抓取页面的。我注意到一些 JavaScript 轮播库被抓取，而其他的则没有。这只是 Google 如何读取 JavaScript 代码的问题。

就影响而言，并不是所有隐藏的内容都是不好的。内容仍在被爬取（正如您将在 fetch 中看到的那样）。现在，如果有大量的关键字填充内容，那将很容易受到惩罚。

使用得当，肯定还是有益的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T15:20:48.803

隐藏的内容会被抓取，这对谷歌来说不是问题，很多网站都有这种菜单。我想隐藏的标签不是填充的关键字，对用户有用，所以你不应该担心这个 - 它对用户和 googlebot 很有用！

# wpf - DataGrid 在 Expression Blend 中更改选择项颜色

> ID：11599938
> 
> 赞同：0
> 
> 时间：2012-07-22T11:34:45.930
> 
> 标签：wpf, wpfdatagrid, expression-blend

我有一个包含多个项目的 DataGrid。

在 Expression Blend 中，如何更改所选项目的行的颜色？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T12:42:09.553

这只能在您的 xaml 中完成，您需要做的就是将`HighlightBrush`您的 Datagrid 覆盖为您的选择颜色。只需在 DataGrid 标记内的代码中添加它 -

```
<DataGrid>
   .
   .
   <DataGrid.Resources>
      <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}"
                                Color="Red"/>
   </DataGrid.Resources>
   .
   .
</DataGrid> 
```

`Snapshpot`使用您的代码和资源（注意网格是空的，因为绑定对我不起作用，但红色选择边框非常明显） - ![红色选择边框](../Images/31943869128e42e50e2d3cd18309ee7b.png)

# matlab - matlab：通过单击在绘图上选择点的界面

> ID：11599940
> 
> 赞同：1
> 
> 时间：2012-07-22T11:35:15.947
> 
> 标签：matlab, user-interface, click, point

我有一个`2XN`点向量。我想绘制它，然后使用户能够通过单击该点来选择其中一个点。我想我可以通过获取鼠标坐标并选择离它们最近的点等来自己完成。我想知道matlab是否提供了即插即用的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T11:42:05.993

据我所知，没有简单的方法可以做到这一点。您可以执行以下操作之一：

1.  检查距离并选择最近的点（正如你自己所说的）
2.  调用绘图命令`N`时间，并为每个绘图分配不同的回调。

在这种情况下，您可以通过以下方式创建图形：

```
 for i=1:N 
      plot( X(i),Y(i), 'o', 'ButtonDownFcn', @(x)CallBack(x,i));
   end 
```

回调看起来像这样：

```
 function CallBack(x,i)
       fprintf(1,'A callback on P[%d] was called');
   end 
```

* * *

如果您想要`2xN`点的特殊情况：可拖动的多边形，您可以使用该`impoly`命令。

# python - 当值发生变化时，如何让单元格在 wx.grid 中闪烁一段可配置的时间？

> ID：11599942
> 
> 赞同：0
> 
> 时间：2012-07-22T11:35:33.260
> 
> 标签：python, wxpython

我在 Python 中使用 wx.grid 来显示股票价格。单元格的值更改后，我想在短时间内更改背景和字体颜色，例如 0.5 秒，然后将其更改回原来的颜色。如果我以直接的方式执行此操作，我只需更改两种颜色，执行 time.sleep(0.5) 并将其更改回原来的颜色。但是，这种方式每个单元格的更新时间太长了。有人知道这样做的聪明方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T20:57:08.253

更改颜色并使用 wxTimerEvent 设置延迟，直到您在事件处理程序中将其更改回。

# parameters - antlr 传递参数和语义谓词

> ID：11599943
> 
> 赞同：2
> 
> 时间：2012-07-22T11:35:39.410
> 
> 标签：parameters, antlr, predicates

我在 Eclipse 环境中使用 ANTLR。我想将一个属性 ( `n.text`) 传递给另一个规则 ( `description`)，并在后一个规则中使用语义谓词来验证与`n.text`. 这是我的代码：

```
useCaseSpecification 
    :   n=useCase '='
        description[$n.text]
    ;

useCase
    : ucID=('UC' INTEGER)? ucName
    ;

ucName
    :   caren io
    ;

caren
    :   'create' | 'creates' | alter | read | 'erase' | 'erases' | notify
    ;

/* ..more code */

description[String str]
    :   'Description' ':' primaryActor (useCase {str==$useCase.text}?) /* more grammar */
    ; 
```

我尝试了语义谓词表达式的许多替代方案，例如`{str.equals($useCase.text)}`，但没有。解析器似乎没有进行验证。

当我使用示例运行解释器时，它允许 useCase 类型的每个输入。例如，如果输入是：

```
创建处方 =
描述：医生开处方 /* ... */

```

那应该是正确的。

如果输入，是：

```
创建处方 =
描述：一个医生创建一个Rrrrescription /* ... */

```

那应该是错误的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T09:31:03.693

不要依赖解释器（ANTLRWorks 的解释器或 Eclipse 的插件之一）。解释器不考虑任何谓词。

此外，不确定您使用的是什么目标，但`{str==$useCase.text}?`如果您使用 Java，请意识到这是错误的（`==`比较对象的身份，`equals(...)`改为使用）。

例如，解析两个相同的字母可以如下完成：

```
grammar T;

parse
 : Letter same[$Letter.text] EOF
 ;

same [String s]
 : Letter {$Letter.text.equals(s)}?
 ;

Letter : 'a'..'z' | 'A'..'Z'; 
```

解析`"AB"`会导致异常：

![在此处输入图像描述](../Images/21a146fb5802568d6808eab02da2b32d.png)

而解析`"AA"`不会：

![在此处输入图像描述](../Images/edd43dc03013ec3875fd80ccc5ea49cc.png)

上面的树是使用 ANTLRWorks 的调试器生成的，它的工作原理就像一个魅力。请注意，调试器会忽略该`language=XYZ`选项：它将以 Java 作为目标语言来调试您的语法。因此，除 Java 之外的任何嵌入式代码都会导致问题！

请注意，在语法中塞入过多的这些语义检查将导致难以维护混合语法规则和代码的混乱。这些检查通常在解析器创建（抽象）解析树之后执行：这意味着自由匹配`useCase`s，然后在遍历解析器创建的树时验证它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T04:40:49.827

由于您使用的是 Eclipse，我可能应该将其发布为答案而不是评论。查看[如何配置 ANTLR IDE](https://stackoverflow.com/questions/8343488/antlr-ide-in-eclipse-doesnt-work/10887515#10887515)，然后[使用 ANTLR IDE 进行调试/测试](https://stackoverflow.com/questions/10838068/testing-antlr-grammar/10886842#10886842)。如果您已经发现这些有用，请感谢支持。

# java - Calendar.MINUTE 给出不带前导零的分钟

> ID：11599947
> 
> 赞同：29
> 
> 时间：2012-07-22T11:36:13.463
> 
> 标签：java, android

大家好，我正在使用下面的代码来获取 android 手机时间，但如果分钟在 1 到 9 之间，它会给我分钟而不是零。

例如：现在我有时间在我的设备上 12:09 但它给我的时间是 12:9

```
Calendar c = Calendar.getInstance();
int hrs = c.get(Calendar.HOUR);
int mnts = c.get(Calendar.MINUTE);
String curTime = "" + hrs + ":" + mnts;
return curTime; 
```

在上面的代码之后，我还尝试下面的代码，它给出与上面相同的东西，在没有零的分钟之前将它编号为 1 到 9 之间的分钟。.

```
final Calendar cal = Calendar.getInstance();
cal.setTimeInMillis(System.currentTimeMillis());
Date date = cal.getTime();
int mHour = date.getHours();
int mMinute = date.getMinutes(); 
```

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2012-07-22T11:54:18.677

正如 Egor 所说，an`int`只是一个整数。整数没有前导零。当您将它们转换为对象时，它们只能以前导零*显示。*`String`一种方法是这样的：

```
String curTime = String.format("%02d:%02d", hrs, mnts); 
```

格式字符串`%02d`格式化带有前导零的整数（即`0`in `%02d`），始终占用 2 位宽度（即`2`in `%02d`）。

这将产生`String`

> 12:09

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-07-22T11:59:36.500

都是关于整数的。但是处理日期和日历以显示该信息应该像这样使用：

```
Date date = new Date();
SimpleDateFormat sdf = new SimpleDateFormat("yourpattern"); //like "HH:mm" or just "mm", whatever you want
String stringRepresentation = sdf.format(date); 
```

如果模式“mm”在 0 到 9 之间，它将有一个前导零。如果你使用“mmmm”，你会得到 0009，这看起来没有多大意义，但这一切都取决于你想。:)

如果您使用模式`HH:mm`，您将获得`12:09`（您的日期实例的当前时间）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-03-20T15:01:56.827

您可以使用 SimpleDateFormat 类格式化日期

如果您从日历实例获取日期和时间：-

```
final Calendar c = Calendar.getInstance();

SimpleDateFormat timeFormat = new SimpleDateFormat("hh:mm");
SimpleDateFormat dateFormat = new SimpleDateFormat("dd-MM-yyyy");

timeEdittext.setText(timeFormat.format(c.getTime()));
dateEdittext.setText(dateFormat.format(c.getTime())); 
```

如果你有日、月、年、小时、分钟作为整数（通常发生在日期选择器和时间选择器对话框中）

```
Calendar calendar = Calendar.getInstance();

calendar.set(year, month, dayOfMonth);
String date = new SimpleDateFormat("dd-MM-yyyy").format(calendar.getTime()); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-03-06T14:55:23.523

使用以下方法以`Hour:Minute`双格式转换。

```
/*
* make double format hour:minute string
* @hour : 1
* @minute : 2
* return : 01:02
* */

public static String hourMinuteZero(int hour,int mnts){
    String hourZero = (hour >=10)? Integer.toString(hour):String.format("0%s",Integer.toString(hour));
    String minuteZero = (mnts >=10)? Integer.toString(mnts):String.format("0%s",Integer.toString(mnts));
    return hourZero+":"+minuteZero;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-02-26T04:57:15.173

```
function time()
{
  var time = new Date();
  var hh = time.getHours();
  var mmm = time.getMinutes();

  if(mmm<10) 
  {
    mmm='0'+mmm
  } 

  time = 'T'+hh+':'+mmm;
  return time;
} 
```

# java - 为什么要在实体类中实现可序列化

> ID：11599948
> 
> 赞同：1
> 
> 时间：2012-07-22T11:36:27.497
> 
> 标签：java, hibernate, serialization

> **可能重复：**
> [Hibernate 表类是否需要可序列化？](https://stackoverflow.com/questions/2726300/do-hibernate-table-classes-need-to-be-serializable)

我可以在 Java 中使用 Hibernate 执行任何 CRUD 操作，并且我的实体类不需要实现 Serializable 接口。

但我读过实体类必须实现可序列化。是否存在我的实体类必须是可序列化的特定场景？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T11:41:34.683

如果您的缓存提供程序配置为溢出到磁盘，则您的类将需要可序列化，至少对于 ehcache 而言。

# java - ConcurrentHashMap：我们可以信任它吗？

> ID：11599949
> 
> 赞同：0
> 
> 时间：2012-07-22T11:37:25.137
> 
> 标签：java, multithreading, arraylist

来自 ConcurrentHashMap 的文档：

> 支持检索的完全并发和可调整的预期更新并发的哈希表。

我们可以完全相信`ConcurrentHashMap`线程安全操作吗？

我正在使用 ConcurrentHashMap 将键与它们的值进行映射。我的键值对是：

```
Map<Integer,ArrayList<Double>> map1 = new ConcurrentHashMap(); 
```

键的大小范围为 [0,1000000]。我有 20 个线程可以一次访问/修改与键对应的值。这不是那么频繁，但这种情况是可能的。我从以下方法中得到无穷大：

```
Double sum =0.0; 
sum = sum + Math.exp(getScore(contextFeatureVector,entry.getValue())+constant); 
```

`contextFeatureVector`并且 `entry.getValue()`是与键关联的arraylist。

[编辑]

```
 constant =0.0001

private double getScore(List<Double> featureVector,List<Double>weightVector) throws NullPointerException    
{
    double score =0.0;
    int length = featureVector.size();
    for (int i =0 ; i< length ; i++){
    score = score + (featureVector.get(i)*weightVector.get(i)); 
    }

    return score;
} 
```

两个都`featureVector<> and `weightVector` looks like`

```
[-0.005554038592516575, 0.0048966974158881175, -0.05315976588195846, -0.030837804373964654, 0.014483064988148562, -0.018962129117649, -0.015221386014208877, 0.015825702365331477, -0.11363620479662287, 0.00802609847263844, -0.062106636476812194, 0.008108854471293185, -0.03193255218671684, 0.04949650992670292, -0.0545583154094599, -0.04873314092706468, 0.013534731656877033, 0.08433117163682455, 0.050310355477044114, -0.002420513353516017, -0.02708299928442614, -0.023489187394176294, -0.1277699782685597, -0.10071004855129333, 0.08649040730064464, -0.04940329664431305, -0.027481729446035053, -0.0571846057609884, -0.036738550618481455, -0.035608113682344365] 
```

因此从 getScore 返回的值不会特别大。会有几千人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T11:44:57.890

它是线程安全的，但可以以非线程安全的方式使用它。

我怀疑您没有对问题进行足够的调查，无法确定 JDK 库中存在已使用十多年的错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-22T11:46:54.447

您使用的数据结构让我相信您的代码中一定存在一些错误。您很可能正在从地图中获取列表并对其进行更新：

```
map1.get(42).add(5); 
```

请注意，`add(5)`它**不是**线程安全的，因为它在普通`ArrayList`. 您要么需要线程安全`ArrayList`，要么需要[`replace(K key, V oldValue, V newValue)`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ConcurrentHashMap.html#replace%28K,%20V,%20V%29)方法。

如果您仔细阅读所提供的保证`ConcurrentHashMap`，您可以有效地使用它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-22T11:52:31.970

如果你调用`Math.exp(...)`一个太大的输入，你会得到一个 Infinity。这可能是您的问题的原因......不是线程安全的一些想象问题。

我建议您添加一些跟踪代码以查看

```
 getScore(contextFeatureVector, entry.getValue()) 
```

`sum`成为 Infinity时正在返回。除此之外，我认为如果不看到您的更多代码，我们将无法提供帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-22T12:10:53.637

Java 中可以存储的最大数`double`约为`exp(709)`. 因此，如果您将任何大于 709 的值传递给`exp()`，您应该期望得到算术溢出。

# php - 使用 curl 命令行将多个文件上传到 php 服务器

> ID：11599957
> 
> 赞同：29
> 
> 时间：2012-07-22T11:38:22.120
> 
> 标签：php, curl

我需要使用 curl 命令行实用程序将多个文件上传到服务器。对于单个文件，我可以毫无问题地使用：

```
curl -F "image=@file1.gif"   http://localhost:8888/web/Upload.php 
```

我将如何使用多个文件执行此操作，以便 php 变量 $_FILES["image"]["error"] 返回一个数组？

我试过了

```
curl -F "image=@file1.gif" -F "image=@file2.gif"  http://localhost:8888/web/Upload.php
curl -F "image=@file1.gif,image=@file2.gif"  http://localhost:8888/web/Upload.php 
```

但这些都是在黑暗中刺伤。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-07-22T15:00:25.113

诀窍是将文件上传参数命名为唯一。

```
curl -F "image=@file1.gif" -F "image2=@file2.gif"  http://localhost:8888/web/Upload.php 
```

这将在`$_FILES`超全局中显示为`$_FILES['image']`和`$_FILES['image2']`。

要将文件分组在一个`$_FILES`索引下，您需要将参数命名为数组：

```
curl -F "image[]=@file1.gif" -F "image[]=@file2.gif"  http://localhost:8888/web/Upload.php 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-30T14:50:36.393

您可以使用`curl_multi_init()`. 我正在做一个项目，由于我是新手，可能甚至不到一年，这对我来说太难了。我需要使用 api (anonfiles.com) 上传到服务器

**注意：我的脚本基于用户输入的多个文件。代码如下。**

```
<?php
if (isset($_POST['btnUpload'])){
    $total = count($_FILES['file']['name']);
    for( $i=0 ; $i < $total ; $i++ ) {
      $filename = $_FILES['file']['name'][$i];
      $filedata = $_FILES['file']['tmp_name'][$i];
      $filetype = $_FILES['file']['type'][$i];
      $chfile = new CURLFile($filedata, $filetype, $filename); //creating a CURL object
      $request[]=['file'=>$chfile]; //making an asscoiative array with [1]=>['file'=>'curlobject'] and so on
      $urls[] = "https://api.anonfiles.com/upload?token=ced2abXXXXXXX";//added this each time because this was the only one url
    }

    print_r($request);//just for verification
    echo "<br>";
    print_r($urls);//verification
    echo "<br>";
    echo "<br>";
    $mh = curl_multi_init(); //initialise multi curl
    foreach ($urls as $key => $url) {
        $chs[$key] = curl_init($url);
        //set your own opts, these are the minimum required
        curl_setopt($chs[$key], CURLOPT_RETURNTRANSFER, true);
        curl_setopt($chs[$key], CURLOPT_POST, true);
        curl_setopt($chs[$key], CURLOPT_POSTFIELDS, $request[$key]);//adding file data
        curl_setopt($chs[$key], CURLOPT_HTTPHEADER, array('Content-Type: multipart/form-data'));//make sure this header is there for it to act like data

        curl_multi_add_handle($mh, $chs[$key]);//add them to the handle that we initialised
    }

    //running the requests
    $running = null;
    do {
      curl_multi_exec($mh, $running);
    } while ($running);

    //getting the responses
    $responsearray = array();//Just to store the responses
    foreach(array_keys($chs) as $key){
        $error = curl_error($chs[$key]);
        $last_effective_URL = curl_getinfo($chs[$key], CURLINFO_EFFECTIVE_URL); 
        $time = curl_getinfo($chs[$key], CURLINFO_TOTAL_TIME);//response time
        $response = curl_multi_getcontent($chs[$key]);  // get results
        array_push($responsearray, $response);
        curl_multi_remove_handle($mh, $chs[$key]);//removing it as a handle
    }
    // close current handler
    curl_multi_close($mh);
    echo "<br>";
    echo "<br>";
    echo "<br>";
    echo "<br>";
    print_r($responsearray);
} 
```

# python - 如何禁用 Django 内部函数缓存？

> ID：11599959
> 
> 赞同：0
> 
> 时间：2012-07-22T11:38:40.263
> 
> 标签：python, django, caching, runtime, redis

我正在使用 Redis 作为后端缓存 [1] 制作一些 Django 项目，但我不能确定 Redis 服务器是否会一直打开，然后我尝试使用 Redis “如果”它可用，否则使用一些其他后端，如 LocMem 等。

我使用的 Redis 后端 [1] 完全兼容，因此我可以使用 Django 装饰。

我想创建一个这样调用的函数：

```
from django.views.decorators.cache import cache_page
from utils import PingBackend
from time import time

@cache_page(60, cache=PingBackend(time()))
def index(request):

    artigos = Artigo.objects.filter(ativo=1)

    return render_to_response('index.html', {'artigos':artigos}, RequestContext(request)) 
```

问题是 Django（我猜是内部的）缓存 PingBackend() 的响应并在第一次调用它，即使我删除了 RedisServer Django 告诉 ping 过程成功。

即使 DEBUG=True 和 'default' CacheBackend 为虚拟，它也会发生。

```
def PingBackend(time):
    print time

    response = None

    try:
        con = StrictRedis(host=settings.REDIS_HOST, port=settings.REDIS_PORT, db=0)

        # Execute some action
        con.ping()

        # If not give an exception, use redis
        response = 'redis'

    except:
        response = 'default' #dummy

    return last_response 
```

我传递 time() 只是为了创建一些差异化作为尝试解决缓存问题。

大局是函数 PingBackend() 没有为每个请求执行，只是第一次我无法监控 Redis 服务器。

谢谢！

[1] - [https://github.com/niwibe/django-redis](https://github.com/niwibe/django-redis)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T11:46:09.503

这不是关于 Django 内部，而是关于装饰器的工作方式。当您像这样定义视图时：

```
@cache_page(60, cache=PingBackend(time()))
def index(request):
    blah blah 
```

它完全等同于：

```
def index(request):
    blah blah
index = cache_page(60, cache=PingBackend(time()))(index) 
```

你只调用`cache_page`一个，传递一个`cache`你通过调用`PingBackend`一次得到的参数。它甚至不仅仅针对第一个请求执行，它在定义视图函数时执行一次。

如果 Redis 可用，您应该编写自己的缓存后端，如果不可用，则使用其他东西。

# html - 文本应该在 textarea 的行上

> ID：11599963
> 
> 赞同：0
> 
> 时间：2012-07-22T11:39:34.480
> 
> 标签：html, css

这是我的[网址](http://caremerge.us/quater/form1.html)，您将在其中看到带有虚线的文本区域，如下所示：

* * *

* * *

* * *

我要做的就是，每当我写的时候，在文本区域的行上写的文本和在输入文本时应该从第二行输入，依此类推。目前，文本写在第一行，但其他行却搞砸了。以下是我的文本区域的 CSS。请让我知道如何实现此功能，即每行都应写入文本。

谢谢！

```
.textdash
{
border:1px; border-style:solid; background-image:url(images/text.jpg);  background-repeat:repeat; font-family:"Times New Roman", Times, serif; font-size:18px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T11:42:03.217

将此添加到`.textdash { }`

`line-height: 23px;`

我什至建议将背景图像调整为短或高几个像素，然后调整`line-height`直到正确为止。

# latency - x264 线程延迟

> ID：11599967
> 
> 赞同：4
> 
> 时间：2012-07-22T11:40:03.400
> 
> 标签：latency, x264

我想知道为什么 x264 中的无切片线程（[http://akuvian.org/src/x264/sliceless_threads.txt](http://akuvian.org/src/x264/sliceless_threads.txt)）会导致延迟？例如，如果我有 2 个线程，则第一个线程编码一帧，第二个线程编码一帧。在某些情况下，秒必须等待第一个。但它们可以并行编码。

所以两个线程应该比一个线程快，对吧？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T11:43:10.363

帧线程增加了帧的延迟而不是几秒钟，因为在开始获取输出帧（以填充管道）之前，您需要为编码器提供更多的输入帧。编码一帧本身将花费与使用一个线程几乎相同的处理器时间，但线程允许通过**并行编码不同帧**来进行流水线处理。另一方面，切片线程减少了延迟，因为所有线程**并行编码一个帧**，因此它比使用一个线程编码它完成得更快（切片线程也不需要帧中的延迟来进行流水线处理）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T20:02:25.900

我花了很长时间来推理它，但答案是排队论。

当前一帧的一半已被编码时，可以开始每一帧。但是，如果并行化要提供任何好处，那么大多数（最好是所有）线程都应该有一个可以工作的框架。5 个线程意味着 5 个帧。那就是管道。每当管道未完全填满时，并行化给您带来的好处就会减少。如果管道仅包含一帧，则只有一个线程在工作，因此您无法从并行化中获益。但是，如果您的管道通常是满的，那么它充满的是什么？未编码的帧。未编码的帧是必须被捕获的帧，因此它们代表了许多帧的延迟。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-08T13:35:39.343

使用更多线程增加延迟的一个原因是连续帧相互使用以进行运动预测和补偿。这意味着为了压缩帧，您需要来自先前运动估计细节的信息。这意味着这些帧是相互依赖的，有时它们也必须至少等待来自其他线程的一些数据。这与当线程对帧进行切片时的切片线程形成对比，每个线程都在一个切片上工作，并且都在同一帧上工作，并且它们具有来自前一帧的所有所需信息，或者在 B 帧的情况下是下一个。

# ruby - HAML layout.haml 和 Sinatra 不使用 url 参数

> ID：11599972
> 
> 赞同：1
> 
> 时间：2012-07-22T11:40:38.920
> 
> 标签：ruby, sinatra, haml

我的 index.haml 可以正常工作，例如：

```
get '/about' do
  haml :about
end 
```

但是，如果我尝试使用如下用户参数：

```
get ':user/add' do
  haml :add_item
end 
```

layout.haml 被忽略。

我试图让这个工作使用我的视图文件夹中的子目录，如：

/view/contact/add.haml

当它插入 =yield 内容时，它不会显示 layout.haml css 样式等。

所以我认为使用子目录是问题所在，并将我所有的 hamls 放在基本视图目录中。但是，似乎任何使用 url 参数（如 get ':user/add' ）的东西都不会包含 layout.haml 。目前这是我做的一个测试：

**我的应用程序.rb**

```
require "rubygems"
require "sinatra"
require "haml"
require "data_mapper"
require "pony"

get '/' do #works fine
  haml :index
end

get '/:user_id/dashboard' do #recognizes the content but ignores layout.haml                                                                        
  haml :dashboard                                                                                        
end 
```

我的**layout.haml**看起来像这样：

**视图/layout.haml**

```
!!!
%html
  %head
    %title Testing haml and sinatra
    %link(rel="stylesheet" href="css/style.css")  
  %body
    #wrapper
      #header
        %h1 HAML Test Template
        %h2 Made with Sinatra and HAML!

      #navigation
        %h1 Navigation

      #sidebar
        %h1 Sidebar

      #content
        =yield

      #footer
        %p
          This is the footer. 
```

任何帮助将非常感激。谢谢。

*我不知道这是否重要，但我正在使用霰弹枪进行开发*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T12:00:12.040

我通过在 layout.haml 中使用以下内容解决了这个问题：

**布局.haml**

代替：

```
%link(rel="stylesheet" href="css/style.css") 
```

替换（固定版本）：

```
%link(rel="stylesheet" href="/css/style.css") 
```

工作正常！希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T11:55:27.673

如果有帮助，当我查看源代码时，它似乎正试图根据 url 参数“：user_id”在错误的位置访问我的 style.css，如下所示：

```
http://127.0.0.1:4567/test/myapp/css/style.css 
```

因此，我需要让它从与 127.0.0.1/about 相同的位置获取样式表，这在 html 源代码中看起来像这样：

```
http://127.0.0.1:4567/css/style.css 
```

在实际代码中，两个样式表链接是相同的，但由于我在一个子目录中，它找不到样式表**style.css**

```
http://127.0.0.1:4567/css/style.css *(exists in public/css/style.css)* 
```

-对-

```
http://127.0.0.1:4567/test/myapp/css/style.css *(doesn't exist)* 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T13:27:39.093

我现在仍然看到使用 url 路径中带有 sinatra 和 Haml 的变量的 url 参数的问题。

使用这些时，我看到 css 嵌入到后处理的 html 中，而不是创建指向 style.css 文件的链接。处理后的 html 如下（即使是 doctype 乱七八糟，也不包括 title）：

我现在在路径中看到 url 参数（例如 localhost:4567/user/add）：

```
<!DOCTYPE html>
<html>
<head>
  <style type="text/css">
  body { text-align:center;font-family:helvetica,arial;font-size:22px;
    color:#888;margin:20px}
  #c {margin:0 auto;width:500px;text-align:left}
  </style>
</head> 
```

而不是这个（例如 localhost:4567/about）：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
 <html>
  <head>
    <title>Test app</title>
    <link href='/css/style.css' rel='stylesheet' />
  </head> 
```

**我在这里想念什么？**

# django - Django重定向快捷方式更改request.user

> ID：11599974
> 
> 赞同：0
> 
> 时间：2012-07-22T11:41:00.343
> 
> 标签：django, django-users

我有一个应用程序，我们将 Django 'User' 对象细分为具有附加属性的 'AppAccount' 对象。现在我有一个视图，我可以在其中执行以下操作：

```
appAccountObject.backend = 'django.contrib.auth.backends.ModelBackend'
login(request, appAccountObject) 
redirect(someOtherView) 
```

现在根据`pdb`,`request.user`是调用`AppAccount`后的一个实例，但在 的第一行是一个 Django User 实例。`login()``request.user``someOtherView`

为什么重定向调用将用户对象更改回普通的 Django 用户？我怎样才能避免这种情况？

另外，上面的代码正确吗？添加`backend`属性是否可以绕过对 的调用`authenticate`？如果不是，那么正确的方法应该是什么：我想自动登录用户，没有他们的凭据，然后重定向到另一个由`@login_required`装饰器包装的视图。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T11:50:08.573

重定向会导致来自用户浏览器的全新请求，因此必须根据会话 cookie 再次从数据库中获取用户对象并分配给`request.user`. 这发生在身份验证中间件中。除非您编写了自己的版本，否则它将始终使用默认用户类。

这只是对 User 进行子类化是个坏主意的原因之一。相反，使用与 User 具有 OneToOne 关系的 UserProfile 类对其进行扩展。

# php - 阿加维设置饼干

> ID：11599978
> 
> 赞同：0
> 
> 时间：2012-07-22T11:41:44.117
> 
> 标签：php, agavi

我对 agavi 一无所知，这可能有很多错误。

我想设置一个 cookie：

```
$this->getResponse()->setCookie( ID, 'ID=2342&amp;ClickBannerID=634&amp;SubID=&amp;ClickDateTime=' + time(), mixed $lifetime = time() * 2, string $path = '/', string $domain = 'mydomain', bool $secure = null) 
```

我得到：解析错误：语法错误，意外的 T_VARIABLE

它的形式：[http](http://www.agavi.org/apidocs/index.html) ://www.agavi.org/apidocs/index.html 我在做什么错

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T21:05:30.393

通常在 Agavi 中，您通过其*setCookie*方法在*AgaviWebResponse对象上的**AgaviView*上设置 cookie。方法签名如下：

 **```
public function setCookie($name, $value, $lifetime = null, $path = null, $domain = null, $secure = null, $httponly = null) 
```

这意味着，您可以使用以下语法设置一个简单的 cookie：

```
$this->getResponse()->setCookie('cookieName', $cookieValue); 
```

如果您想要一个仅在一定时间内有效的 cookie， 您可以使用[PHP 的 strtotime 函数为 cookie 设置一个易于阅读的生命周期：](http://php.net/strtotime)

```
$this->getResponse()->setCookie('cookieName', $cookieValue, '+14 days'); 
```

正如您的问题所述，您可能还想使用其他参数（域等）。阅读您的问题，您也可能希望设置多个 cookie，而不是一个由包含*ID*、*ClickBannerId*等的字符串组成的 cookie，但只有您和您的应用程序（或您的开发人员）可以说出来。

请注意，您可以为每个 cookie 设置附加参数，或者在每个*环境的**app/config/factories.xml*文件中为您的应用程序配置一些合理的默认值（通常用于*上下文*_web_），以节省在视图中输入的时间：

 **```
<response class="AgaviWebResponse">
    <ae:parameters name="cookie_httponly">true</ae:parameters>
</response> 
```

有效的参数名称是：

*   cookie_lifetime（以秒为单位的生命周期）
*   cookie_path（cookie 应该可用的服务器上的路径）
*   cookie_domain（cookie 可用的域）
*   cookie_secure（如果 cookie 只能通过 HTTPS 使用，则将此设置为*true ）*
*   cookie_httponly（确定是否只允许通过 HTTP 而不是客户端脚本使用 cookie）

请注意，在较旧的 Agavi 版本中不需要*ae*命名空间，因此您可能需要使用*parameter*而不是*ae:parameter*。

要删除 cookie，您只需调用*unsetCookie*并使用与设置 cookie 相同的所有参数。要获取 cookie 值，只需调用*getCookie($name)*。由于 cookie 是不受信任的用户提供的信息，因此 Agavi 通常要求您验证所有传入的参数、文件、标题和 cookie，然后才能在您的*操作*和*视图*中访问它们。这意味着，您可能需要在访问其值之前验证您的 cookie。您可以通过*validate.xml*文件执行此操作：

```
<validator class="string" source="cookie" required="false">
    <argument>cookieName</argument>
</validator> 
```

此示例已简化，不应在生产中使用。使用*source* _cookie_ 和 cookie 的名称作为*参数*，然后根据您的规则（格式等）验证您的 cookie 值。*如果内置AgaviValidator*类（如字符串、正则表达式等）不够用，则可能需要编写自定义验证器，但这是另一天的话题。您可能会发现[Agavi 用户常见问题解答](http://mivesto.de/agavi/agavi-faq.html)有些帮助。对不起，无耻的插头，祝你手头的问题好运。:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T11:46:26.040

您将函数声明与其运行混合在一起

```
$this->getResponse()->setCookie( 'your-cookie-id','ID=2342&ClickBannerID=634&SubID=&ClickDateTime=' . time(),  time() * 2,  '/',  
'mydomain', null) 
```

正如 OcuS 在评论中所说 - 可能聘请 PHP 开发人员****

# filenames - boost build - 具有相同名称的源

> ID：11599986
> 
> 赞同：2
> 
> 时间：2012-07-22T11:42:55.823
> 
> 标签：filenames, boost-build

```
src
  |--Manager.cpp
  |--Specializations
  |    |--Manager.cpp 
```

构建这个 Boost.Build 试图创建

```
/bin/...
  |--Manager.o
  |--Manager.o 
```

但失败了。如何自动解决这个问题？我阅读了[FAQ item](http://www.boost.org/doc/libs/1_50_0/doc/html/bbv2/faq.html#bbv2.faq.duplicate)，但我不喜欢这个解决方案，因为当我有相同的类名但不同的命名空间时，我必须手动修复。是否可以使 Boost.Build 自动为对象文件名添加目录前缀？

```
/bin/...
  |--Manager.o
  |--Specializations.Manager.o 
```

或者复制源目录树？

```
/bin/...
  |--Manager.o
  |--Specializations
  |    |--Manager.o 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-17T14:45:06.703

这种行为很久以前就已经改变了，应该可以正常工作。Boost.Build 现在模仿源代码结构，即你应该同时得到`bin/Manager.o`和`bin/Specializations/Manager.o`。

# ruby-on-rails-3.2 - rails 3.2.3 doesn't work on https using webrick in ubuntu 12.0.4

> ID：11599992
> 
> 赞同：7
> 
> 时间：2012-07-22T11:43:21.913
> 
> 标签：ruby-on-rails-3.2, webrick, ubuntu-12.04

Have been trying to get a fresh, just created rails application to work on ssl using webrick in ubuntu 12.0.4.

Have tried all possible methods that I'm aware of. Tried using **config.force_ssl = true** in **application.rb**, also **force_ssl** in **application controller**.

For some reasons, when I use https:// loacalhost:3000 on firefox I get an error message saying,

```
###An error occurred during a connection to localhost:3000.###
###SSL received a record that exceeded the maximum permissible length.###
###(Error code: ssl_error_rx_record_too_long)### 
```

In google chrome the error message is,

```
SSL connection error### ###Unable to make a secure connection to the server. This may be a problem with the server.or it may be requiring a client authentication certificate that you don't have. 
```

The server log shows,

```
[2012-07-22 16:26:04] ERROR bad URI `�D/i�b���\\��)�F6��ѡ���c���"�\e\x00\x00H\x00��'.
[2012-07-22 16:26:47] ERROR bad Request-Line `\x16\x03\x01\x00�\x01\x00\x00�\x03\x01P\v�onC��\x1D��\x16\x16R!NU�����\r'�\x05���
w��\x00\x00H\x00��'. 
```

Have also tried running the application on production mode with webrick and also with passenger. No help.

Looks like something to do with the public key not being delivered to the client. I might be wrong though.

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-23T14:08:46.700

The servers which you have used in dev mode doesn't seem to provide an ssl certificate to the client.

For dev purposes you can use "Thin" as it provides a ssl certificate if you start the server with the following command:

"thin start --ssl" instead of the usual:

"rails s/rails server"

# c# - 自定义二进制除法？

> ID：11599993
> 
> 赞同：2
> 
> 时间：2012-07-22T11:43:29.610
> 
> 标签：c#, binary, integer-division

您好我正在尝试使用自定义二进制整数除法：来源：[http ://www.informit.com/guides/content.aspx?g=dotnet&seqNum=642](http://www.informit.com/guides/content.aspx?g=dotnet&seqNum=642)

```
public static void DivMod (Int128 dividend, Int128 divisor, out Int128 quotient, out  Int128 remainder)
{
// Determine the sign of the results and make the operands positive.
int remainderSign = 1;
int quotientSign = 1;
if (dividend < 0)
{
    dividend = -dividend;
    remainderSign = -1;
}
if (divisor < 0)
{
    divisor = -divisor;
    quotientSign = -1;
}
quotientSign *= remainderSign;

quotient = dividend;
remainder = 0;
for (int i = 0; i < 128; i++)
{
    // Left shift Remainder:Quotient by 1
    remainder <<= 1;
    if (quotient < 0)
        remainder._lo |= 1;
    quotient <<= 1;

    if (remainder >= divisor)
    {
        remainder -= divisor;
        quotient++;
    }
}

// Adjust sign of the results.
quotient *= quotientSign;
remainder *= remainderSign;
} 
```

*   但是我有两个问题：

**1）我想将它用于 32 位整数而不是 Int128**。所以我假设*Int128*应该替换为*int*，并且 (int i = 0; **i < 128** ; i++) 应该替换为**i < 32;** . 正确的？

**2) 余数._lo |= 1** -> 这一行在 C# 中根本不起作用。我想这与他们使用的自定义 128 位 int 结构有关，我不知道它是什么意思。有人可以帮我解决这个问题，并翻译它以使其与 int32 一起使用吗？

**编辑：**只是为了澄清我知道按位运算符的作用，问题部分是： **remainder._lo**。我不知道这个属性指的是什么，也不确定这一行的用途，以及如何将其转换为 int32？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T12:19:42.257

1.  要将其与 32 位整数 ( `System.Int32`) 一起使用，您可以将 Int128 替换为 int 并将 for 循环中的 128 替换为 32 - 所以这是正确的。

2.  该`_lo`属性只是 128 位数字的低 64 位。使用它是因为 .NET 中最大的整数类型是 64 位 ( `System.Int64`) - 所以对于 32 位，您可以省略以下属性：
    `remainder |= 1;`

如果您按照您在问题中提供的链接并返回几页，您会发现该`Int128`结构的实际实现。它从[这里](http://www.informit.com/guides/content.aspx?g=dotnet&seqNum=636)开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T12:21:29.737

指南的[此页面对此](http://www.informit.com/guides/content.aspx?g=dotnet&seqNum=637)进行了说明：

```
public struct Int128 : IComparable, IFormattable, IConvertible, IComparable<Int128_done>, IEquatable<Int128_done>

{
  private ulong _lo;
  private long _hi;

  public Int128(UInt64 low, Int64 high)
  {
    _lo = low;
    _hi = high;
  }
} 
```

您可以使用 32 位整数忽略它，然后执行`some32int |= 1`.

他说每个位循环一次，所以对于一个 32 位整数，你只能循环 32 次。

# javascript - 剃刀视图中的 Javascript url 操作

> ID：11599995
> 
> 赞同：18
> 
> 时间：2012-07-22T11:44:06.557
> 
> 标签：javascript, asp.net-mvc-3, razor

我有一个 javascript 方法`onRowSelected`wchich 获取 rowid。如何在控制器的某些操作中传递 rowid `HttpGet`？

```
function onRowSelected(rowid, status) {
        alert('This row has id: ' + rowid);
        //url: @Action.Url("Action","Controller")
        //post:"GET"
        // Something like this?
    } 
```

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-07-22T11:46:05.033

如果您的控制器操作需要一个 id 查询字符串参数：

```
var url = '@Url.Action("Action", "Controller")?id=' + rowid; 
```

或者，如果您想将其作为路线的一部分传递，您可以使用替换：

```
var url = '@Url.Action("Action", "Controller", new { id = "_id_" })'
    .replace('_id_', rowid); 
```

如果您要发送 AJAX 请求，另一种可能性是将其作为 POST 正文的一部分传递：

```
$.ajax({
    url: '@Url.Action("Action", "Controller")',
    type: 'POST',
    data: { id: rowid },
    success: function(result) {

    }
}); 
```

或者如果您使用 GET，则作为查询字符串参数：

```
$.ajax({
    url: '@Url.Action("Action", "Controller")',
    type: 'GET',
    data: { id: rowid },
    success: function(result) {

    }
}); 
```

所有这些都假设您的控制器操作当然需要一个 id 参数：

```
public ActionResult Action(string id)
{
    ...
} 
```

因此，您可以看到许多实现相同目标的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-24T07:42:42.763

Darin 的方法可以很好地工作。

`@Html.actionlink`我会建议 Razor 视图在 jsp中使用模型值的另一种方法

```
var URLvalue='@Html.ActionLink("UserString", "action", new { routeValueName1 = "__value1__", routeValueName2="__value2__" }, htmlAttributes: new { @class = "btn btn-default", @role = "button" })'
     .replace('__value1__', Model.somevalue).replace('__value2__',  Model.somevalue); 
```

您可以在 jsp 或 jquery 中的任何地方使用 URLvalue。

# business-process-management - Joget 业务流程与 Activiti 业务流程管理

> ID：11599997
> 
> 赞同：0
> 
> 时间：2012-07-22T11:44:19.200
> 
> 标签：business-process-management, activiti

有人知道我在哪里可以找到 Activiti 和 Joget 开源 BPM 之间的比较吗？包含每个软件与其他软件相比的优点和缺点？？？

BR

# html - HTML可以被认为是样式吗？

> ID：11599998
> 
> 赞同：1
> 
> 时间：2012-07-22T11:44:26.487
> 
> 标签：html

样式的定义是：

> “以特定形式设计或制造”

由于 HTML 会为内容设置样式，就像我们有`<i>`, `we can display content in lists`,一样`make content bold`，通过使用 . 来使用标题`<h1>,<h2>...so on`。对我来说，所有这些都可以称为造型。那么，可以将 HTML 视为样式吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T11:49:45.580

HTML 具有用于描述语义和样式的元素。然而，混合样式和语义的 HTML 通常变得难以维护。例如，在整个站点中一致地更改某些元素的样式可能涉及在多个文档中进行搜索和替换。引入 CSS 来解决这个问题，明确区分内容和样式，并使其易于应用站点范围的样式。

虽然 HTML 中的样式元素仍然存在并且可以使用，但最好使用 CSS 代替。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T11:48:25.860

不，HTML 是标记（结构）。CSS是样式。这`<i>`只是一个标记标签，最常用于使文本斜体，但可以在样式表中声明为完全不同的东西。列表项也是如此。这是简单的结构，您可以在样式表中设置它的样式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T11:48:52.520

非常主观，但你真的可以称之为造型，是不是有点牵强？它看起来与纯文本不同的唯一原因是浏览器为各种元素添加了一些默认样式。这可以很容易地重置，只留下标记，没有任何样式。

该`i`标签早期用于斜体文本，但它仍然只是样式问题。例如，Twitter bootstrap 将其用于完全不同的目的。

# windows-8 - Windows 8 主题

> ID：11599999
> 
> 赞同：1
> 
> 时间：2012-07-22T11:44:28.280
> 
> 标签：windows-8, microsoft-metro, windows-runtime, winrt-xaml

在寻找一种方法来确定 Windows 8 当前正在使用哪个主题时，我遇到了[这篇](http://www.michielpost.nl/PostDetail_61.aspx)文章。它指出主题是按应用程序设置的，不能更改。我没有意识到情况是这样的，我也没有做任何事情来将我的主题设置为“黑暗”（尽管看起来是这样）。如果这是正确的，那么应用程序主题是如何设置的，或者如果不是，我如何确定当前正在使用哪个主题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T12:10:57.987

默认情况下，新应用程序使用“深色”主题，这是由 Application 对象上名为 RequestedTheme 的属性设置的。要更改为“Light”主题，您可以在 Application 元素的 App.xaml 文件中设置属性。您可以读取相同的属性来确定未使用哪个主题，但由于用户无法更改它，因此它的值只会是您设置的值。