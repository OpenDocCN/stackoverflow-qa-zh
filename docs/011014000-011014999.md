# StackOverflow 问答 11014000-11014999

# android - 安卓app：成功发送apprequests后，好友没有收到Notifications

> ID：11014002
> 
> 赞同：2
> 
> 时间：2012-06-13T11:33:58.223
> 
> 标签：android, facebook

我通过我的测试 Android 应用程序发送了一个**apprequests**`onComplete()`并且在方法中我收到了这样的消息

> 捆绑[{to[0]=1460762087，请求=425924150781914}]

但是在朋友那边，他们没有收到任何通知。仅在左侧，我可以在“应用程序和游戏”旁边看到一个“1”，但单击后，我没有看到任何应用程序请求。

这是我的代码

```
Bundle params = new Bundle();
        params.putString("message", "Join us!");

        context.facebook.dialog(context, "apprequests", params, new DialogListener(){
            @Override
            public void onComplete(Bundle values){
                Log.d("send request response", values.toString());
            }

            @Override
            public void onFacebookError(FacebookError e){
                Log.d("facebook error", e.toString());
            }

            @Override
            public void onError(DialogError e){
                Log.d("dialog error", e.toString());
            }

            @Override
            public void onCancel(){}
        }); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T06:25:50.577

I had the same issue, solved it yesterday:

1.  Log in to your edit app page on Facebook - [https://developers.facebook.com/apps](https://developers.facebook.com/apps)

2.  Fill the fields for `Canvas URL` and `Secure Canvas URL`, even if you add bogus URLs the notifications should start appearing properly (as long as the URLs end with a '/')

3.  Now you'll see that if you click on those notifications on a mobile device you'll either get your app opened if it's already installed or get to the google play page of your app.

4.  If you click on the notification on a desktop browser, you'll get to a facebook page which except for a top header is empty, you can fill that page with the `Secure Canvas URL`, you'll need a site that supports https for that.

# eclipse - Eclipse 没有正确标记事件

> ID：11014008
> 
> 赞同：1
> 
> 时间：2012-06-13T11:34:20.230
> 
> 标签：eclipse, eclipse-pdt

我不知道为什么 Eclipse 会错误地标记我的代码中出现的变量，例如变量。这是一个屏幕截图：

![在此处输入图像描述](../Images/4e96db8cc093ca169225fae120ce360d.png)

Eclipse 选择什么？？？而且，如果我将光标放在没有任何变量的任何部分上，它会在屏幕上显示很多突出显示：

![在此处输入图像描述](../Images/733b0fb6483246a641e44ff078c0f5c4.png)

任何想法 ？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T14:51:22.793

这种情况每隔一段时间就会在 JDT（Java 代码）中发生在我身上。尝试完成这些步骤（按严重性递增的顺序），直到问题消失：

1.  清理项目或整个工作区（项目 -> 清理...）
2.  关闭该文件的编辑器选项卡（文件 -> 关闭或 Ctrl-W），然后再次打开它
3.  右键单击资源管理器中的 PDT 项目并关闭项目（这应该具有关闭与该 PDT 项目关联的所有编辑器选项卡的副作用），然后再次打开该项目
4.  关闭项目（如第 3 步）但退出 Eclipse，然后重新启动它，然后再次打开项目

通常第 1 步或第 2 步会解决问题，但有时我不得不一直走到第 4 步才能让 JDT 正常运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T04:00:27.770

这是我切换到 NetBeans 进行 PHP 开发的主要原因，一旦我修改了源代码，我必须关闭并重新打开它才能使标记出现正常工作，太无聊了。只发生在 PHP 编辑器中，对于 Java 编辑器，一切正常

# ios - 缩放后在 UIImageView 内的位置查找 RGB 值

> ID：11014010
> 
> 赞同：2
> 
> 时间：2012-06-13T11:34:26.150
> 
> 标签：ios, ipad, uiimageview, orientation

我在 iPad 上有一个 png 图像，尺寸为 1214x1214（对于视网膜来说是两倍），并将其设置为位于屏幕坐标 (0,-20) 处的 UIImageView。为了在设备旋转/方向更改期间适合屏幕，我将其设置为 Aspect Fit 类型。

我想做的是能够触摸屏幕并读取我触摸下方像素的 RGB 值。我已经实现了一个 UIGestureRecognizer 并将其绑定到 UIImage 并且成功地恢复了触摸坐标。

给我带来麻烦的是我已经尝试实现几种检索 RGB 值的方法（例如 [如何获取 iphone 上图像上像素的 RGB 值]）[1](https://stackoverflow.com/questions/144250/how-to-get-the-rgb-values-for-a-pixel-on-an-image-on-the-iphone) 但我的 RGB 值看起来好像图像倾斜并映射到 UIView 上的不同位置。

我的问题是，我如何才能满足我已将 UIImageView 设置为 Aspect Fit 的事实以及设备可能处于横向或纵向（倒置或正向上）的事实？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T19:49:47.143

好的，所以我解决了，这可能对尝试做类似事情的人有所帮助。

我使用这个函数从另一个答案计算了图像的缩放大小

```
-(CGRect)frameForImage:(UIImage*)image inImageViewAspectFit:(UIImageView*)imageView
{
    float imageRatio = image.size.width / image.size.height;

    float viewRatio = imageView.frame.size.width / imageView.frame.size.height;

    if(imageRatio < viewRatio)
    {
        float scale = imageView.frame.size.height / image.size.height;

        float width = scale * image.size.width;

        float topLeftX = (imageView.frame.size.width - width) * 0.5;

        return CGRectMake(topLeftX, 0, width, imageView.frame.size.height);
    }
    else
    {
        float scale = imageView.frame.size.width / image.size.width;

        float height = scale * image.size.height;

        float topLeftY = (imageView.frame.size.height - height) * 0.5;

        return CGRectMake(0, topLeftY, imageView.frame.size.width, height);
    }
} 
```

从将函数注册为侦听器中获取接触点

```
CGPoint tapPoint = [sender locationInView:imageMap]; 
```

根据我的图像通过 iPad 的旋转移动到的位置改变了接触点

```
if([UIApplication sharedApplication].statusBarOrientation == UIInterfaceOrientationPortrait ||
   [UIApplication sharedApplication].statusBarOrientation == UIInterfaceOrientationPortraitUpsideDown )
  {
  // portrait (y has increased, x has stayed the same)
  tapPoint.y -= rectScaleSize.origin.y;
  }
else  
  {
  // landscape (x has increased, y has stayed the same)
  tapPoint.x -= rectScaleSize.origin.x;
  } 
```

然后根据图像的原始大小及其 Aspect Fit 大小重新缩放

```
tapPoint.x = (tapPoint.x * imageMap.image.size.width) / rectScaleSize.size.width;
tapPoint.y = (tapPoint.y * imageMap.image.size.height) / rectScaleSize.size.height; 
```

其中 imageMap.image 是我的原始图像， rectScaleSize 是 frameForImage 函数的返回值

并且，最后得到了 RGB 值

```
CGImageRef image  = [imageMap.image CGImage];
NSUInteger width  = CGImageGetWidth(image);
NSUInteger height = CGImageGetHeight(image);
// NSLog(@"RGB Image is %d x %d",width,height);

CGColorSpaceRef colorSpace  = CGColorSpaceCreateDeviceRGB();
unsigned char *rawData      = malloc(height * width * 4);
NSUInteger bytesPerPixel    = 4;
NSUInteger bytesPerRow      = bytesPerPixel * width;
NSUInteger bitsPerComponent = 8;

CGContextRef context = CGBitmapContextCreate(rawData, width, height, bitsPerComponent, bytesPerRow, colorSpace,
                                             kCGImageAlphaPremultipliedLast | kCGBitmapByteOrder32Big);
CGColorSpaceRelease(colorSpace);

CGContextDrawImage(context, CGRectMake(0, 0, width, height),image);
CGContextRelease(context);

int byteIndex = (bytesPerRow * (int)tapPoint.y) + (int)tapPoint.x * bytesPerPixel;
int red = rawData[byteIndex];
int green = rawData[byteIndex + 1];
int blue = rawData[byteIndex + 2];
//int alpha = rawData[byteIndex + 3];

NSLog(@"RGB is %d,%d,%d",red,green,blue); 
```

似乎工作得很好，希望它有用。如果我做错了什么，欢迎评论！

# mocking - 如何断言没有在 Unitils Mock 上调用其他方法

> ID：11014011
> 
> 赞同：1
> 
> 时间：2012-06-13T11:34:29.140
> 
> 标签：mocking, unitils

我知道`MockUnitils.assertNoMoreInvocations();`，但是如何仅对一个 Mock 对象实现类似的效果？

我正在对某些方法进行某种黑盒测试。我知道他们*可能*在模拟上调用的方法列表，但我必须确保他们绝对不会调用其他方法。

看来我需要类似`assertOptionallyInvoked()`或`assertNoOtherInovations()`模拟的东西。Unitils可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T11:52:22.200

通过实现我自己的场景类解决了这个问题。

# windows - 使用 NSIS 复制目录。

> ID：11014013
> 
> 赞同：25
> 
> 时间：2012-06-13T11:34:43.707
> 
> 标签：windows, installation, nsis

我似乎找不到任何关于如何使用 NSIS 复制目录的信息？，我知道有一个文件命令，但是有没有复制目录的命令。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-07-23T16:40:07.320

目录和文件的语法相同，只是您需要通过`\`在末尾提供 a 来指定目录。`File`如果指定的参数是目录，则命令复制目录。例如，您可以这样做：

```
SetOutPath "outputPath"
File "myDirectory\" #note back slash at the end 
```

但这仅复制顶级目录。要递归地做到这一点，你有`/r`switch

```
SetOutPath "outputPath"
File /nonfatal /a /r "myDirectory\" #note back slash at the end 
```

它复制`myDirectory`（但不是`myDirectory`文件夹本身）的内容。`/nonfatal`如果没有特定目录，则忽略而不会出错。`/a`也复制文件属性。`/x`开关用于排除文件。

否则，

```
SetOutPath "outputPath\myDirectory"
File /nonfatal /a /r "myDirectory\" #note back slash at the end 
```

`myDirectory`将包含`myDirectory`文件夹的所有内容复制到`outputPath`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-13T11:39:18.603

我找到了怎么做，抱歉给你添麻烦了。

**将文件提取到事先不存在的目录中**

```
CreateDirectory $Installdir\extracting

SetOutPath $Installdir\extracting

File Directory\* 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-13T12:19:57.447

该`File`指令从您的安装程序中提取文件并[`CopyFiles`](http://anders_k.users.sourceforge.net/public/NSIS/2.46/Manual.html#copyfiles)复制最终用户系统上已经存在的文件和/或目录（如果您需要从安装程序所在的 DVD 复制文件，您可以使用 $EXEDIR...）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-04T15:22:42.433

反斜杠后与整个内容匹配的星号是强制性的。语法如下。

请参阅[手册](https://nsis.sourceforge.io/Docs/Chapter4.html#file)第 4.9.1.6 节

```
SetOutPath "outputPath\myDirectory"
File /nonfatal /a /r "myDirectory\*" 
```

# nosql - 获取列位置

> ID：11014014
> 
> 赞同：0
> 
> 时间：2012-06-13T11:34:47.763
> 
> 标签：nosql, cassandra

在 CassandraDB 中，使用有序列族。我知道你可以得到切片，但你能得到位置。例如，在这个数据模型中，我保存这样的分数：

```
"Scores":
{
   "1000": "bob, lucas",
   "900": "tim"
   "800": "mario"
} 
```

知道用户的得分为“900”并且他的昵称是“tim”，是否有可能知道他位于有序列族的第 2 位？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T16:52:25.250

Cassandra 没有开箱即用地提供此功能，但您可以使用三个单独的 CF 自己实现此功能。考虑这种情况：

```
"Scores":
{
   "1000": "bob, lucas"
   "900": "tim"
   "800": "mario"
}

"PlayerScores":
{
   "bob": "1000"
   "lucas": "1000"
   "tim": "900"
   "mario": "800"
}

"ScoreTotals":
{
   "1000": 
   {
      "1000":2
   }
   "900": 
   {
      "900":1
   }
   "800": 
   {
      "800":1
   }
} 
```

ScoreTotals CF 将与计数器列一起使用，以在用户每次达到该分数时增加/减少值。如果您的分数有额外的粒度（例如 910 与偶数 900），您可以将键视为存储桶，列名作为特定分数。PlayerScores 显然存在，因此您可以查询玩家的分数。

然后，您可以通过简单地将所有得分高于玩家得分的总和来确定排名。由于分数存储在列名中，因此您可以使用标准切片查询来获取您的范围，而无需使用保留顺序的分区器（这有一些负面影响）。

# git - git发现工作文件夹中的冲突数量/冲突列表

> ID：11014016
> 
> 赞同：10
> 
> 时间：2012-06-13T11:35:02.000
> 
> 标签：git, dvcs

有没有办法查看冲突列表（冲突文件的名称和其中的冲突数量）？

我发现的唯一一件事就是查看预先创建的`.git/MERGE_MSG`文件……但这不是我真正要寻找的……

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-13T12:08:32.300

**Edit**: Of course, the easy, obvious and over-engineering free answer is `git status`, as [kostix](https://stackoverflow.com/users/720999/kostix) [notes](https://stackoverflow.com/a/11015036/220155). The disadvantage of this is that `git status` checks the status of the index compared to the working copy, which is slow, whereas the below only checks the index, a much faster operation.

To get the names of the files that are conflicted, use `git ls-files --unmerged`.

```
$ git ls-files --unmerged
100755 f50c20668c7221fa6f8beea26b7a8eb9c0ae36e4 1       path/to/conflicted_file
100755 d0f6000e67d81ad1909500a4abca6138d18139fa 2       path/to/conflicted_file
100755 4cb5ada73fbe1c314f68c905a62180c8e93af3ba 3       path/to/conflicted_file 
```

For ease, I have the following in my `~/.gitconfig` file (I can't claim credit, but I can't remember the original source):

```
[alias]
    conflicts = !git ls-files --unmerged | cut -f2 | sort -u 
```

This gives me:

```
$ git conflicts
path/to/conflicted_file 
```

To work out the number of conflicts in a single file, I'd just use `grep` for the `=======` part of the conflict marker:

```
$ grep -c '^=======$' path/to/conflicted_file
2 
```

You could add the following to your `~/.gitconfig` as well as the `conflicts` line above:

```
[alias]
    count-conflicts = !grep -c '^=======$'
    count-all-conflicts = !grep -c '^=======$' $(git conflicts) 
```

This will give you:

```
$ git conflicts
path/to/a/conflicted_file
path/to/another/different_conflicted_file

$ git count-conflicts path/to/a/conflicted_file
2

$ git count-all-conflicts
5 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T12:41:06.153

`git status`显示自动合并失败且有冲突的文件，并提示如何记录此类文件的已解决状态。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-08-16T17:18:24.910

# TL;博士：

此命令将为您提供所有有冲突的文件的列表 + 每个文件的冲突数：

```
git --no-pager diff --name-only --diff-filter=U |xargs grep -c '^=======$' 
```

* * *

* * *

### 列出所有受冲突影响的文件：

```
git --no-pager diff --name-only --diff-filter=U 
```

这将为您提供一个包含所有未合并文件的列表（[源](https://superuser.com/a/1052417/1019262)）

### 获取受冲突影响的文件数：

```
git --no-pager diff --name-only --diff-filter=U | wc -l 
```

### 列出所有受冲突影响的文件 + 每个文件中的冲突数：

```
git --no-pager diff --name-only --diff-filter=U |xargs grep -c '^=======$' 
```

这将为您提供类似于以下的输出（其中 foo.txt 有 2 个冲突，而 bar.txt 有 5 个冲突）：

```
path/to/foo.txt:2
path/to/bar.txt:5 
```

* * *

* * *

此外，正如@me_and 在他的回答中所建议的那样，[创建别名](https://stackoverflow.com/questions/2553786/how-do-i-alias-commands-in-git)也很有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-27T16:16:15.923

这是适用于 bash 4 的一些有用的东西。您可以在其中添加各种单个文件统计信息，例如代表冲突数量的代码行数。

```
#!/usr/bin/env bash

shopt -s globstar
for theFile in ./**/*; do
   if [ -f "$theFile" ]
     then
        conflicts=`grep -c '^=======$' "$theFile"`
        if [ "$conflicts" != "0" ]
          then
            echo "$theFile $conflicts"
        fi
   fi
done 
```

# c# - C# 中的动态 where 子句 lambda 或查询

> ID：11014017
> 
> 赞同：1
> 
> 时间：2012-06-13T11:35:07.357
> 
> 标签：c#, entity-framework, dynamic, lambda

我正在尝试编写动态 lambda 或查询，但它发生错误..

对于拉姆达；我创建了一个函数

```
 public IEnumerable<musteriler>  GetCustomers<musteriler>(Expression<Func<musteriler, bool>> where)
   {
    IEnumerable<musteriler> _musteriler = market.musteriler.Where(where).Select(m => m);

     return _musteriler;

    } 
```

我就这样打电话

```
 IEnumerable<musteriler> _musteriler  = helper.GetCustomers<musteriler>(m => m.MAktif == true); 
```

我在 Where( **where** ) 中得到两个错误，它们是

```
 The best overloaded method match for System.Data.Objects.ObjectQuery<AkilliMarket.musteriler>.Where(string, params System.Data.Objects.ObjectParameter[])' has some invalid arguments 
```

和

```
 Argument 1: cannot convert from 'System.Linq.Expressions.Expression<System.Func<musteriler,bool>>' to 'string' 
```

在我尝试了一个字符串查询之后

```
 IEnumerable<musteriler> _musteriler=  market.musteriler.Where("MAktif = true").Select(m => m) as IEnumerable<musteriler>; 
```

是的，它有效，但我不能使用 _musteriler.. 例如当我写 _musteriler.Count(); 我收到这个错误

```
 'MAktif' could not be resolved in the current scope or context. Make sure that all referenced variables are in scope, that required schemas are loaded, and that namespaces are referenced correctly. Near simple identifier, line 6, column 1. 
```

MAktif 是我在 db 中的 musteriler 表的列名。我尝试了另一列，但结果相同..

我的错误在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T11:58:59.557

问题是`IQueryable<T>.Where`扩展方法，`ObjectQuery.Where`在考虑扩展方法之前被选为“最佳重载方法匹配”。

尝试：

```
public IEnumerable<AkilliMarket.musteriler> GetCustomers<AkilliMarket.musteriler>(Expression<Func<AkilliMarket.musteriler, bool>> predicate)
{
   return market.musteriler.AsQueryable().Where(predicate);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T12:00:56.637

```
public IEnumerable<musteriler>  GetCustomers<musteriler>(Expression<Func<musteriler, bool>> predicate)
       {
        return market.musteriler.AsQueryable().Where(predicate).AsEnumerable();

        } 
```

如果它不起作用

你能试试吗

```
 var _musteriler=  market.musteriler.Where("it.MAktif = @val", new ObjectParameter("val", true)).AsEnumerable().Count(); 
```

如果它有效，你的方法应该是（如果仍然有意义的话）

```
public IEnumerable<musteriler> GetCustomers(string whereClause, params ObjectParameter[] parameters) {
   return market.musteriler.Where(whereClause, parameters).AsEnumerable(); 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T12:05:48.900

我想你需要在代码的开头添加这个：

```
using System.Linq; 
```

看起来您的市场是`ObjectContext`，而 musteriler 是，它不提供接受 lambda 的地方 - 您需要扩展接受 lambda 表达式`ObjectSet`的 Where 方法。`IQueryable`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-12-22T17:47:10.133

在我尝试的示例中，我收到了错误，

> 方法“Where”没有重载需要 3 个参数

与我使用 SQLParametera 的 where 子句表达式。

我发现我需要

> 使用 System.Linq.Dynamic；一旦我发现它，DUH

# jquery - jQuery 设置容器和页脚高度

> ID：11014018
> 
> 赞同：1
> 
> 时间：2012-06-13T11:35:14.307
> 
> 标签：jquery, height, twitter-bootstrap, containers, footer

我`$(".container").height($(document).height());`用来设置我的容器`100% height`，但我想知道有没有办法调整上面的行，以便将我`footer`的放在底部？

我正在尝试与 TBS 一起工作

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T12:08:55.357

诀窍是让页脚粘在底部是创建一个`.wrapper`类来包含您的主要内容区域，从而将主容器和页脚分开。像这样的东西：

**HTML**

```
<div class="navbar navbar-fixed-top">
  ... fixed navbar ...
</div>

<div class="wrapper">
    <div class="container">
      ... main content area ...
    </div> <!-- /container -->
</div>

<footer class="container">
    <div class="row">
        ... footer area ...
    </div>
</footer> 
```

通过这种方式，我们可以使用`.wrapper`该类将页脚向下推，但是我们也希望使用 CSS，我们使用[Ryan Fait Sticky Footer](http://ryanfait.com/resources/footer-stick-to-bottom-of-page/)方法来做到这一点。在引导程序的情况下，为了适应顶部固定导航栏，我们必须首先将主容器而不是主体向下推，根据引导程序默认设置。所以我们这样做：

**CSS**

```
.wrapper > .container {
    padding-top: 60px;
} 
```

这样我们就可以很好地放置顶部导航栏。`.wrapper`之后我们只给我们的页脚一个高度，然后从容器中以负边距消除相同的宽度，如下所示：

```
.wrapper {
    min-height: 100%;
    height: auto !important; /* ie7 fix */
    height: 100%;
    margin: 0 auto -40px;
}

footer {
    height: 40px;
} 
```

请记住，尽管页脚高度必须与您从`.wrapper`容器中删除的内容完全匹配，因此如果您向页脚添加任何额外的边距或填充或边框，您必须相应地补偿添加到`.wrapper`容器中的负边距。

为了扩展这种方法以支持引导响应样式表，我添加了以下媒体查询：（它们与固定导航栏内联）

```
@media (max-width: 979px) {
    .wrapper > .container {
        padding-top:0;
    }

   .wrapper {
        height:auto;
        margin:auto;
        min-height:0;
   }
} 
```

这是此方法的简短演示，此方法应适用于引导程序中的流体和固定容器。

[演示](http://jsfiddle.net/andresilich/FdZys/1/show/)，[在这里](http://jsfiddle.net/andresilich/FdZys/1/)编辑。

# file-upload - Yii 框架，CException 属性“Image.path”是只读的

> ID：11014024
> 
> 赞同：0
> 
> 时间：2012-06-13T11:36:01.647
> 
> 标签：file-upload, yii

我正在尝试将 CUploadedFile 对象保存在本地文件夹中，我正在为 yii 使用 img 模块。我收到此错误：

```
CException Property "Image.path" is read only. 
```

在堆栈跟踪中，它显示这是导致错误的原因：

```
CActiveRecord->__set("path", "show_gallery"):

public function save($file,$name=null,$path=null)
{
 ....
if($path!==null)
      $image->path=trim($path,'/');
 ... 
```

它是由以下原因引起的：

```
ImgManager->save(CUploadedFile, "some_name", "show_gallery"):

Yii::app()->image->save($modelPhoto->content,'some_name','show_gallery'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T12:58:01.163

这表明 Image 类的属性是只读的，这也意味着该属性没有名为 path 的 setter 方法。它与文件系统无关，而与代码有关。

您使用的是第 3 方扩展程序吗？你能提供整个图像模型代码吗？

# c# - 第一次使用 AJAX，示例不适合我

> ID：11014027
> 
> 赞同：1
> 
> 时间：2012-06-13T11:36:07.347
> 
> 标签：c#, jquery, html, ajax

我试图使用 HTML 按钮调用 ac# 类方法。在另一个主题中，人们建议我使用 AJAX。我查看了不同的教程并尝试实现它，但到目前为止它对我不起作用。

现在我只想让按钮给我一个弹出窗口（只是让我知道正在调用该方法）我要调用的方法是来自 HomeController 类的 setLang(string lang)

这就是我的 onclick 事件

```
<input type="submit" onclick="setLanguage();" value="submit"> 
```

这是脚本部分，我在同一页面中有这个

```
<script type="text/javascript">
function setLanguage() {
var lang = "en";
$.post('@Url.Action("setLang","HomeController")/' + lang,function(){
//i'm not expecting a result to process
});
}
</script> 
```

但是当我点击我的按钮时没有任何反应。

我在这里错过了什么吗？

编辑：函数被调用，但回调不是

更新：仍然无法正常工作，这是我当前的代码（根据要求）

按钮 (index.aspx)

```
<input type="button" onclick="setLanguage();" value="submit"> 
```

函数（index.aspx）

```
<script type="text/javascript">
function setLanguage() { 
alert("this message shows");       
    $.post('Url.Action("setLang","Home")/?lang=' + lang,
        function (data) {
            alert("this message does not");
        });
 }
</script> 
```

在 HomeController.cs

```
 public JsonResult setLang(string lang)
    {       
        Thread.CurrentThread.CurrentUICulture = CultureInfo.GetCultureInfo(lang);
        .....//a lot more code, until it reaches
        return Json("Language: " + lang);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T12:17:36.473

将以下内容添加到 HomeController 的 Index 视图中：

```
<input type="button" onclick="setLanguage();" value="submit">

<script type="text/javascript">
    function setLanguage() {
        var lang = "en";
        $.post('@Url.Action("setLang","Home")/?lang=' + lang,
            function (data) {
                alert(data);
        });
    }
</script> 
```

与您的代码相比，我更改了一些内容：

*   输入类型 = 按钮
*   控制器名称应该是“Home”，而不是“HomeController”。ASP.NET MVC 默认添加“控制器”部分
*   您的成功函数采用数据参数并在客户端计算机上执行 javascript 警报。
*   因为您没有为此特定方法设置路由，所以我已将 lang 参数更改为您的查询字符串的一部分。

然后在服务器上将以下操作方法添加到您的 HomeController

```
public JsonResult setLang(string lang)
{
    return Json("Language: " + lang);
} 
```

该函数采用您的 lang 参数，然后返回一个仅包含简单字符串值的 JsonResult。Json 是在浏览器和服务器之间发送数据的首选方式。

您可以扩展此示例并将更复杂的数据返回到您的浏览器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T12:22:51.557

由于您通过**POST** Http 类型调用 action 方法，因此请确保您的 Action 方法也准备好响应 HTTPPostType 请求。您可能需要将`HttpPost`注释添加到您的操作方法中。

```
[HttpPost]
public ActionResult setLang(string id)
{
  return Content("MVC is awesome");
} 
```

要处理来自操作方法的响应，请使用带有参数的回调方法。在下面的示例中，您将从变量中的操作方法获得响应`data`。

```
<input type="submit" value="submit">
<script type="text/javascript">
 $(function(){

   $("form").submit(function(e){

    e.preventDefault();  // preventing the default form submit behaviour
       var lang="en"
       $.post("@Url.Action("setLang","Home")/" + lang,function(data){
           alert(data);
       });

   });

 });
</script> 
```

# regex - 带有正则表达式的 grep 范围

> ID：11014032
> 
> 赞同：7
> 
> 时间：2012-06-13T11:36:19.970
> 
> 标签：regex, linux, grep

我正在尝试将正则表达式与 Linux 的 grep 命令一起使用

```
(^\s*\*\s*\[ \][^\*]+?(\w*\:[^\*]+\d$)|([^\*]+[.]com[.]au$)) 
```

当我在[https://www.regextester.com](https://www.regextester.com)上尝试使用文件内容时，我得到了所需的结果，即所需的字段正在匹配，但是当我尝试将其用作

```
grep '(^\s*\*\s*\[ \][^\*]+?(\w*\:[^\*]+\d$)|([^\*]+[.]com[.]au$))' file1 
```

它给我的只是一个空值！

这里有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T11:41:50.640

我不认为理解像and之`grep`类的字符类。尝试使用或。(相当于,只是更短的类型。)`\w``\s``grep -E``egrep``grep -E``egrep``egrep`

所以你的命令是：

```
egrep '(^\s*\*\s*\[ \][^\*]+?(\w*\:[^\*]+\d$)|([^\*]+[.]com[.]au$))' file1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T18:37:21.283

```
pcregrep -M  '(^\s*\*\s*\[ \][^\*]+?(\w*\:[^\*]+\d$)|([^\*]+[.]com[.]au$))' 
```

成功了:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-27T23:11:52.907

[`grep(1)`](http://pubs.opengroup.org/onlinepubs/9699919799/utilities/grep.html)默认情况下使用[POSIX 基本正则表达式](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap09.html#tag_09_03)，与 选项一起使用时使用[POSIX 扩展正则表达式。](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap09.html#tag_09_0)`-E`

在[POSIX 正则表达式](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap09.html)中，非特殊字符在转义时具有未定义的行为，例如。`\s`，并且没有非贪婪匹配的语法，例如。`+?`. 此外，在 BRE 中，`+`and`|`运算符不可用，必须对括号进行转义才能执行分组。

[POSIX 字符类](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap09.html#tag_09_03_05) `[[:space:]]`和分别是和的`[[:alnum:]_]`可移植替代品。`\s``\w`

从重复中排除下一个匹配字符可用于模拟非贪婪匹配，例如。`[^*]+?\w*:`相当于`[^*[:alnum:]_:]+[[:alnum:]_]*:`。

给定的正则表达式可以表示为多个 BRE：

```
grep -e '^[[:space:]]*\*[[:space:]]\{1,\}\[ \][^*[:alnum:]_+]\{1,\}[[:alnum:]_]*:[^*]\{1,\}[[:digit:]]$' \
    -e '[^*]\{1,\}\.com\.au$' file1 
```

或 ERE：

```
grep -E '^[[:space:]]*\*[[:space:]]*\[ \][^*[:alnum:]_:]+[[:alnum:]_]*:[^*]+[[:digit:]]$|[^*]+\.com\.au$' \
    file1 
```

请注意，GNU 实现`grep(1)`允许将短字符类（`\s`和`\w`）和非贪婪重复（`+?`）作为不可移植的扩展。

# arm - Media Foundation 转换是否支持 Windows 8 中的 ARM？

> ID：11014034
> 
> 赞同：2
> 
> 时间：2012-06-13T11:36:25.933
> 
> 标签：arm, windows-8, ms-media-foundation

Media Foundation 转换是否支持 Windows 8 中的 ARM？如何为arm加载一个decdoer.dll？我写了一个解码器，它可以在x86版本中使用，并且被Media extensions sample调用。但是应用程序（arm Metro 应用程序）无法加载 arm 版本的 dll。

非常感谢！

# ajax - cakephp中的ajax整个网站

> ID：11014038
> 
> 赞同：0
> 
> 时间：2012-06-13T11:36:39.183
> 
> 标签：ajax, cakephp

我想用 cakephp 框架做一个网站。但重要的是我必须用 ajax 开发整个网站（没有页面刷新）。虽然我在开源magento，drupal等方面有很好的经验。但是我是cakephp的新手。我想知道，我应该注意什么来提高网站的效率。在我的布局中有页眉部分、右面板和页脚部分。当用户单击标题部分右侧面板时，一些中间内容将重新加载。我想知道我应该发送一个单 Ajax 请求还是多个 Ajax 请求。请指导我或为此提供一些大纲。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T13:59:33.943

CakePHP 中的 ajax 没有什么特别之处，但是您可以为 ajax 响应定义另一个布局和视图，而不是为常规请求定义。

如果你想返回 json 或 html 取决于你。有关 json 响应，请参阅本书的[这一部分](http://book.cakephp.org/2.0/en/views/json-and-xml-views.html)。

如果您想在一个 ajax 调用中更新两个部分，我认为您必须返回包含两个值的 json，您可以访问它们以在它们之间产生差异，并且您的服务器端代码必须以它知道的方式编写它应该返回第 1 节和第 2 节。你如何做到这一点取决于你，有几种方法。

# jsf - 登录时索引页面上的 JSF ServletFilter 限制

> ID：11014039
> 
> 赞同：0
> 
> 时间：2012-06-13T11:36:41.677
> 
> 标签：jsf, servlets, web.xml

每次调用“Restricted”文件夹中的文件时，我都会调用这个 servlet 过滤器 servlet。

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package com.shadibandhan.ControllerLayer;

import java.io.IOException;
import java.util.ArrayList;
import java.util.StringTokenizer;
import javax.servlet.*;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;

/**
 *
 * @author MUDASSIR
 */
public class SessionFilter implements Filter {

    private ArrayList<String> urlList;

    @Override
    public void init(FilterConfig config) throws ServletException {

        System.out.println("****************************************");
        System.out.println("***Session Filter Servlet initialized***");
        System.out.println("****************************************");
        String urls = config.getInitParameter("avoid-urls");
        System.out.println("The urls to avoid are = " + urls);
        StringTokenizer token = new StringTokenizer(urls, ",");

        urlList = new ArrayList<String>();

        while (token.hasMoreTokens()) {
            urlList.add(token.nextToken());

        }
    }

    @Override
    public void doFilter(ServletRequest req, ServletResponse res,
            FilterChain chain) throws IOException, ServletException {

        System.out.println("This is the doFilter method");

        HttpServletRequest request = (HttpServletRequest) req;
        HttpServletResponse response = (HttpServletResponse) res;
        String servletPath = request.getServletPath();
        String contextPath = request.getContextPath();
        String remoteHost = request.getRemoteHost();
        String url = contextPath + servletPath;
        System.out.println("-----------------> Servlet path is = " + servletPath);
        System.out.println("-----------------> Context path is " + contextPath);
        System.out.println("-----------------> URL is " + url);
        System.out.println("-----------------> Remote Host is " + remoteHost);
        boolean allowedRequest = false;

        if (urlList.contains(servletPath)) {
            allowedRequest = true;
        }

        if (!allowedRequest) {
            HttpSession session = request.getSession(false);
            if (null == session) {

                System.out.println("Session is not present");
                response.sendRedirect(contextPath);
                return;

            }
            if (null != session) {
                //String loggedIn = (String) session.getAttribute("sb_logged_in");
                System.out.println("Session is present");
                System.out.println("\nSession no. is = " + session.getId());

                if (session.getAttribute("logged-in") == "true") {
                    System.out.println("Session logged-in attribute is true, " + session.getAttribute("sessionUsername") + " is logged in.");

                    RequestDispatcher dispatcher = request.getRequestDispatcher(servletPath);
                    dispatcher.forward(request, response);

                } else {
                    System.out.println("Session logged-in attribute is not true");
                    response.sendRedirect(contextPath);
                    return;
                }
            }
        }

        chain.doFilter(req, res);
    }

    @Override
    public void destroy() {
    }
} 
```

当用户登录时，后台 bean 中的已登录属性设置为 true。现在，我希望当用户尝试访问具有用户名和密码字段的表单的“index.xhtml”页面时，他在登录时被重定向到 home.xhtml 页面，否则不会。

还请查看我的 web.xml 文件，以使 faces servlet 与我的 url 一起工作。

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
    <context-param>
        <param-name>javax.faces.PROJECT_STAGE</param-name>
        <param-value>Production</param-value>
    </context-param>
    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet>
        <servlet-name>SbServlet</servlet-name>
        <servlet-class>com.shadibandhan.ControllerLayer.SbServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>    
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>/faces/*</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.xhtml</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>SbServlet</servlet-name>
        <url-pattern>/SbServlet</url-pattern>
    </servlet-mapping>
    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>
    <welcome-file-list>
        <welcome-file>faces/index.xhtml</welcome-file>
    </welcome-file-list>
    <listener>
        <listener-class>com.sun.faces.config.ConfigureListener</listener-class>
    </listener>
    <filter>
        <filter-name>SessionFilter</filter-name>
        <filter-class>
            com.shadibandhan.ControllerLayer.SessionFilter
        </filter-class>
        <init-param>
            <param-name>avoid-urls</param-name>
            <param-value></param-value>
        </init-param>
    </filter>
    <filter-mapping>
        <filter-name>SessionFilter</filter-name>
        <url-pattern>/com.shadibandhan.Restricted/*</url-pattern>
    </filter-mapping>
    <filter-mapping>
        <filter-name>SessionFilter</filter-name>
        <url-pattern>/index.xhtml</url-pattern>
    </filter-mapping>
</web-app> 
```

像文件一样仅在路径像时打开

*   本地主机：8080/ShadiBandhan/faces/index.xhtml 或
*   本地主机：8080/ShadiBandhan/faces/com.shadibandhan.Restricted/home.xhtml

并不是

*   本地主机：8080/ShadiBandhan/index.xhtml 或
*   本地主机：8080/ShadiBandhan/com.shadibandhan.Restricted/home.xhtml

有什么建议么 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T11:53:29.300

只需删除

```
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>/faces/*</url-pattern>
</servlet-mapping> 
```

从你的`web.xml`. 你已经有了一个`*.xhtml`非常好的映射。

另一种方法是添加另一个过滤器映射，以便它也覆盖`/faces/com.shadibandhan.Restricted/*`.

```
<filter-mapping>
    <filter-name>SessionFilter</filter-name>
    <url-pattern>/faces/com.shadibandhan.Restricted/*</url-pattern>
</filter-mapping> 
```

但这很笨拙。

# java - 在基于 Java 的多线程应用程序中报告错误

> ID：11014042
> 
> 赞同：2
> 
> 时间：2012-06-13T11:36:47.673
> 
> 标签：java, multithreading, error-handling

我目前正在开发一个基于 Java 的多线程应用程序，它提供 GUI 并通过网络访问服务。

是否有任何模式、最佳实践、库、框架或 API 用于报告基于 Java 的系统中的错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T11:43:51.747

你有`Thread.UncaughtExceptionHandler`which 用于处理线程中的错误。

```
Thread t = new Thread(task);

// add exception handler
t.setUncaughtExceptionHandler(new Thread.UncaughtExceptionHandler(){
  @Override
  public void uncaughtException(Thread t, Throwable e) {
    // do exception handling
  }
});

t.start(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T11:49:49.433

您可以编写您的`Task Tracker`这不是 Observer DesignPatter 的实现。

```
public class TaskTracker {
private final List<ErrorListener> listeners = new ArrayList<ErrorListener>();

public Runnable wrap(final Runnable r) {
    return new Runnable() {
        public void run() {
            try { r.run(); }
            catch (Throwable t) {
                for (ErrorListener el : listeners)
                    el.error(t, this);
            }
        }
    };
}

public void addListener(ErrorListener el) { listeners.add(el); }

public void removeListener(ErrorListener el) { listeners.remove(el); }

public static interface ErrorListener {
    void error(Throwable t, Runnable r);
}
} 
```

# iphone - 取消选择表格视图中先前选择的单元格

> ID：11014045
> 
> 赞同：1
> 
> 时间：2012-06-13T11:36:55.453
> 
> 标签：iphone, uitableview

我有包含多个部分的表格视图。我只想选择一行...我的 tableview 的选择属性设置为：SingleSelectioin

现在我这样做是为了设置选定行的复选标记

```
if([tableView cellForRowAtIndexPath:indexPath].accessoryType == UITableViewCellAccessoryCheckmark)

{
       [tableView cellForRowAtIndexPath:indexPath].accessoryType = UITableViewCellAccessoryNone;
}

else
{
     [tableView cellForRowAtIndexPath:indexPath].accessoryType = UITableViewCellAccessoryCheckmark;
} 
```

现在我想要的是，当我选择任何其他单元格时，之前选择的单元格应该设置回未选中状态。

我试过这个

```
lastIndexpath=indexPath; 
```

接着

```
[tableView deselectRowAtIndexPath:lastIndexpath animated:YES]; 
```

但它让我无法访问 lasIndexPath

```
EXC_BAD_ACCESS (code=1,address= 0xfe000008) 
```

请帮我解决这个问题

也欢迎任何新的建议

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T11:49:10.677

您想标记您选择的单元格，然后在 didSelectRowAtIndexPath 中您可以编写如下代码：

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
    {
       UITableViewCell *cell = (UITableViewCell*)[tableView cellForRowAtIndexPath:indexPath];
        [cell setAccessoryType:UITableViewCellAccessoryCheckmark];

      cell = (UITableViewCell*)[tableView cellForRowAtIndexPath:previousSelectedIndexPath];
        [cell setAccessoryType: UITableViewCellAccessoryNone];

     if(previousSelectedIndexPath!=nil)
    {
       [previousSelectedIndexPath release];
       previousSelectedIndexPath = nil;
    }
     previousSelectedIndexPath = [indexPath retain];
} 
```

其中 previousSelectedIndexPath 是先前选择的索引；

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T11:57:57.420

在控制器的 .h 中声明**NSIndexPath *lastIndexpath ：**

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{  
  if( lastIndexpath){
  if([tableView cellForRowAtIndexPath:lastIndexpath].accessoryType == UITableViewCellAccessoryCheckmark)

 {

  [tableView cellForRowAtIndexPath:lastIndexpath].accessoryType = UITableViewCellAccessoryNone;
 }
 else
 {
   [tableView cellForRowAtIndexPath:lastIndexpath].accessoryType = UITableViewCellAccessoryCheckmark;

 }}
  lastIndexpath=[indexPath retain]
 if([tableView cellForRowAtIndexPath:indexPath].accessoryType == UITableViewCellAccessoryCheckmark)
 {
   [tableView cellForRowAtIndexPath:indexPath].accessoryType = UITableViewCellAccessoryNone;
 }
 else
 {
  [tableView cellForRowAtIndexPath:indexPath].accessoryType = UITableViewCellAccessoryCheckmark;
 }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T12:27:32.590

```
//Take a variable of type indexpath in .h   

NSIndexPath    *myIndexPath

//Now check it in your cellForRowAtIndexPath: delegate method ..

if(indexPath == myIndexPath)
     cell.accessoryType = UITableViewCellAccessoryCheckmark;
else 
     cell.accessoryType = UITableViewCellAccessoryNone;

//and in your didSelect: Delegate method ...

[tableView cellForRowAtIndexPath:indexPath].accessoryType == UITableViewCellAccessoryCheckmark
myIndexPath = indexPath;
[tableView reloadData]; 
```

希望这会帮助你。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-13T12:41:01.843

在委托方法 willSelectRowAtIndexPath 中，获取当前选择的索引路径，将 accerroryType 设置为 none。

```
- (NSIndexPath *)tableView:(UITableView *)tableView willSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSIndexPath *currentSelectedIndexPath = [tableView indexPathForSelectedRow];

    [tableView cellForRowAtIndexPath:currentSelectedIndexPath].accessoryType = UITableViewCellAccessoryNone;

    if ([indexPath isEqualTo: currentSelectedIndexPath])
    {
        return nil;
    }
    return indexPath;
} 
```

# xsl-fo - XSL-FO 工作台固定高度

> ID：11014047
> 
> 赞同：4
> 
> 时间：2012-06-13T11:37:03.840
> 
> 标签：xsl-fo, apache-fop

我正在尝试通过将 XSL-FO 与 FOP 结合使用来生成 pdf 文件。

我想显示一个固定高度的表格。该表可以放在几页上，我希望它在每一页上都具有相同的高度。

我什至无法在单个页面上为表格定义固定高度。

我已经尝试在桌子和桌子主体上设置高度、最小高度、最大高度，但似乎没有考虑任何内容。我也尝试过使用不同的 XSL-FO 处理器，但没有任何运气。

小样本：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.1" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:fo="http://www.w3.org/1999/XSL/Format">
    <xsl:template match="/">
        <fo:root xmlns:fo="http://www.w3.org/1999/XSL/Format">
            <fo:layout-master-set>
                <fo:simple-page-master master-name="simpleA4" page-height="29.7cm" page-width="21cm" margin-top="1cm" margin-bottom="1cm" margin-left="2cm" margin-right="2cm">
                    <fo:region-body margin-bottom="20mm"/>
                    <fo:region-after extent="10mm"/>
                </fo:simple-page-master>
            </fo:layout-master-set>
            <fo:page-sequence master-reference="simpleA4">
                <fo:flow flow-name="xsl-region-body">
                    <fo:block>
                        <fo:table table-layout="fixed" width="100%" height="10cm" border-style="solid" border-width="0.02cm">
                            <fo:table-column column-width="20%"/>
                            <fo:table-column column-width="20%"/>
                            <fo:table-column column-width="60%"/>
                            <fo:table-body>
                                <fo:table-row>
                                    <fo:table-cell>
                                        <fo:block>Col1</fo:block>
                                    </fo:table-cell>
                                    <fo:table-cell>
                                        <fo:block>Col2</fo:block>
                                    </fo:table-cell>
                                    <fo:table-cell>
                                        <fo:block>Col3</fo:block>
                                    </fo:table-cell>
                                </fo:table-row>
                            </fo:table-body>
                        </fo:table>
                    </fo:block>
                </fo:flow>
            </fo:page-sequence>
        </fo:root>
    </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T12:26:11.363

在`FOP`你需要`<fo:table-cell`单独工作，高度，字体大小......等。您需要执行以下操作：

1.  记下您将为每一页的表格提供的空间
2.  计算在那个空间可以装的表格行数
3.  在循环中为每个页面创建一个新表，提供每个页面将包含的行数
4.  请记住，表格的标题只会为第一页构建，其他页面的表格必须无头构建

# ios - iAd 在 4.3 模拟器上崩溃，但在 5.1 上运行良好

> ID：11014048
> 
> 赞同：1
> 
> 时间：2012-06-13T11:37:07.330
> 
> 标签：ios, iad, dealloc

在崩溃之前，我在 4.3 模拟器上收到此错误。它在 5.1 上运行良好。当我完全取出 iAd 代码时，它在 4.3 上运行良好。应用程序是在 5.1 上使用 arc 设计的。

```
[LinkViewController bannerView:didFailToReceiveAdWithError:]: message sent to deallocated instance 
```

我在所有异常上都设置了断点。我已经启用了 NSZombie、NSDebug 和 NSMallocStackLogging 来运行它。我怎样才能找到被释放的东西？

这是线程：

```
Thread 1, Queue : com.apple.main-thread
#0  0x0018e657 in ___forwarding___ ()
#1  0x0018e522 in _CF_forwarding_prep_0 ()
#2  0x005ef0f0 in -[ADBannerView _sanitizeAndForwardErrorToDelegate:] ()
#3  0x0018dc7d in __invoking___ ()
#4  0x0018db51 in -[NSInvocation invoke] ()
#5  0x0018ea04 in ___forwarding___ ()
#6  0x0018e522 in _CF_forwarding_prep_0 ()
#7  0x005f59f9 in -[ADDistributedMessagingCenter messagePort:receivedMessage:withData:] ()
#8  0x005f6012 in ADMessagePortCallBack ()
#9  0x001d4f4c in __CFMessagePortPerform ()
#10 0x001fe944 in __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ ()
#11 0x0015ecf7 in __CFRunLoopDoSource1 ()
#12 0x0015bf83 in __CFRunLoopRun ()
#13 0x0015b840 in CFRunLoopRunSpecific ()
#14 0x0015b761 in CFRunLoopRunInMode ()
#15 0x020331c4 in GSEventRunModal ()
#16 0x02033289 in GSEventRun ()
#17 0x009bbc93 in UIApplicationMain ()
#18 0x00003125 in main at /Developer/Cecilia's Programs/Story/Story/main.m:17
#19 0x000029b5 in start () 
```

这是我的代码：

```
- (void) createAdBannerView
{
    Class classAdBannerView = NSClassFromString (@"ADBannerView"); 
    if (classAdBannerView != nil)
    {
        self.adBannerView = [[classAdBannerView alloc] initWithFrame:CGRectZero];
        [_adBannerView setRequiredContentSizeIdentifiers:[NSSet setWithObjects: ADBannerContentSizeIdentifierLandscape, nil]];
        [_adBannerView setCurrentContentSizeIdentifier: ADBannerContentSizeIdentifierLandscape];
    }

    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone)     
    {
        [_adBannerView setFrame:CGRectOffset([_adBannerView frame], 0, -32)];
    }       

    else 
    {
        [_adBannerView setFrame:CGRectOffset([_adBannerView frame], 0, -66)];
    }

    [_adBannerView setDelegate:self];
    [self.view addSubview:_adBannerView];  
}

- (void)fixupAdView
{
    if (_adBannerView != nil) 
    {        
        [_adBannerView setCurrentContentSizeIdentifier: ADBannerContentSizeIdentifierLandscape];
        [UIView beginAnimations:@"fixupViews" context:nil];
        if (_adBannerViewIsVisible) 
        {
            CGRect adBannerViewFrame = [_adBannerView frame];
            adBannerViewFrame.origin.x = 0;
            adBannerViewFrame.origin.y = 20;
            [_adBannerView setFrame:adBannerViewFrame];
            CGRect iAdViewFrame = _iAdView.frame;

            if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone)
            {
                iAdViewFrame.origin.y = 20;
                iAdViewFrame.size.height = self.view.frame.size.height - 32;
                _iAdView.frame = iAdViewFrame;
            }

            else
            {
                iAdViewFrame.origin.y = 20;
                iAdViewFrame.size.height = self.view.frame.size.height - 66;
                _iAdView.frame = iAdViewFrame;
            }
        }

        else
        {
            CGRect adBannerViewFrame = [_adBannerView frame];
            adBannerViewFrame.origin.x = 0;

            if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone)
            {
                adBannerViewFrame.origin.y = -52;
            }

            else
            {
                adBannerViewFrame.origin.y = -86;
            }

            [_adBannerView setFrame:adBannerViewFrame];
            CGRect iAdViewFrame = _iAdView.frame;
            iAdViewFrame.origin.y = 0;
            iAdViewFrame.size.height = self.view.frame.size.height;
            _iAdView.frame = iAdViewFrame; 
            }

        [UIView commitAnimations];
    }
}

- (void)bannerViewDidLoadAd:(ADBannerView *)banner 
{   
    if (!_adBannerViewIsVisible)
    {                
        _adBannerViewIsVisible = YES;
        [self fixupAdView];
    }
 }

- (void)bannerView:(ADBannerView *)banner didFailToReceiveAdWithError:(NSError *)error
{   
    if (_adBannerViewIsVisible)
    {       
         _adBannerViewIsVisible = NO;
        [self fixupAdView];
    }
}

- (void) viewWillAppear:(BOOL)animated
{
    [self fixupAdView];
}

- (void)viewDidLoad
{
[self createAdBannerView];
} 
```

提前感谢您能给我的任何帮助！

# ruby - Rails：MassAssignmentSecurity::Error

> ID：11014049
> 
> 赞同：2
> 
> 时间：2012-06-13T11:37:08.137
> 
> 标签：ruby, ruby-on-rails-3, exception, mass-assignment

遵循[ruby​​ on rails 指南](http://guides.rubyonrails.org/security.html#countermeasures)，开发人员无法批量分配受保护的字段，但尝试执行此操作时不会出现异常，对吗？`new`但在我的情况下，通过应用程序中的方法批量分配不同的参数`rails`：

```
@edition = Edition.new params[:edition] 
```

引发以下异常：

```
ActiveModel::MassAssignmentSecurity::Error: Can't mass-assign protected attributes: price 
```

为什么？我理解错了吗？这是一种不获得批量分配例外的方法吗？我认为在分配之前从哈希中删除受保护的属性并不方便。

**更新：**版本型号：

```
class Edition < ActiveRecord::Base
  attr_accessible :title, :description
  attr_protected :price
end 
```

`params[:edition].inspect`：

```
{"title"=>"t", "description"=>"d", "price"=>"123"} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T17:35:56.993

您正在尝试通过放置在批量分配中分配受保护的属性价格

```
@edition = Edition.new params[:edition] 
```

这是变量的批量分配，根据您的编辑，在 params[:edition] 中，根据您的代码无法批量分配可变价格。

要解决此问题，您要么必须删除我认为您不想做的价格保护，要么只用 new 批量分配未受保护的变量，然后分配受保护的变量。所以：

```
 @edition = Edition.new params[:edition].except("price")
    @edition.price = params[:edition]['price'] 
```

或者`@edition = Edition.new params[:edition], :without_protection => true`

编辑：news.ycombinator.com/item?id=3780963 Rails 3.23 现在默认使验证严格，这会引发该异常。文档已过期。

# mysql - 使用计数表优化 SQL 查询多个连接

> ID：11014050
> 
> 赞同：1
> 
> 时间：2012-06-13T11:37:12.400
> 
> 标签：mysql, sql

如果我不向您展示表格，您是否可以帮助优化此查询？

派生所有这些查询的原始表具有以下列，该表名为 laterec-students

```
--------------------------------------------------------------
| studentid | name  | class | latetime             | waived |
--------------------------------------------------------------
| ID1111STU  | Stu 1 | 1A   |2012-01-09 08:09:00   |Waived  |

SELECT A.class, NoStudentsLate, 1xLATE, 2xLATE FROM (

  SELECT 
         class, 
         count(DISTINCT studentid) AS NoStudentsLate
    FROM `laterec-students` 
   WHERE waived!="Waived" 
   GROUP BY class

) AS A 
LEFT JOIN (

  SELECT class, count(distinct studentid) AS 1xLATE from (
       SELECT `laterec-students`.class, `laterec-students`.studentid
         FROM `laterec-students` 
        WHERE waived!="Waived"
        GROUP BY studentid
       HAVING count(studentid)=1) as temp 
  GROUP BY class
) AS B ON A.class=B.class

LEFT JOIN (
  SELECT class, count(distinct studentid) AS 2xLATE from (
    SELECT `laterec-students`.class, `laterec-students`.studentid
      FROM `laterec-students` 
     WHERE waived!="Waived"
     GROUP BY studentid
    HAVING count(studentid)=2) as temp 
  GROUP BY class
) AS C ON A.class=C.class 
```

这就是我想要完成的

```
---------------------------------------------------------------------
| Class | Total # of students late | # late 1 times | # late 2 times |
---------------------------------------------------------------------
| 1A    |    5                     |     3          |     2          |
| 1B    |    3                     |     3          |     0          |
--------------------------------------------------------------------- 
```

那么这意味着，在 1A 班中，使用学生 ID 计算总共有 5 名学生迟到。在这 5 名学生中，有 3 名学生迟到了一次，2 名学生迟到了 2 次。

又是 1B 班，共有 3 个学生迟到，而且他们都只迟到了一次。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T12:07:10.120

我希望我理解您的查询，但以下适用于我的[SQL Fiddle 示例](http://sqlfiddle.com/#!2/4113c/1)。

```
SELECT
  class,
  SUM(cnt > 0) AS NoStudentsLate,
  SUM(cnt = 1) AS 1xLate,
  SUM(cnt = 2) AS 2xLate
FROM
(
  SELECT class, studentid, COUNT(*) AS cnt
  FROM `laterec-students`
  WHERE waived!='Waived'
  GROUP BY class, studentid
) t
GROUP BY class; 
```

# http - 为什么从缓存中检索页面？

> ID：11014052
> 
> 赞同：0
> 
> 时间：2012-06-13T11:37:15.763
> 
> 标签：http, header, request, response, etag

当我们网站上的页面更新并且我们将它们加载到浏览器中时，它们永远不会重新加载（直到我明确刷新）。

我第一次加载 Chrome 开发者工具时只是说“（来自缓存）”并且没有显示任何标题，但我认为他们应该总是发送一个请求来验证 ETag。或者，服务器可能会`304 Not Modified`错误地发送响应状态，但这不会显示在“网络”选项卡中。

当我刷新时，这些是标题。有人看到有什么问题吗？

**要求**

```
GET /home/index.html HTTP/1.1
Host: *******.be
Connection: keep-alive
Cache-Control: max-age=0
User-Agent: Mozilla/5.0 (Windows NT 6.1) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.56 Safari/536.5
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Referer: http://*****.be/home/index.html
Accept-Encoding: gzip,deflate,sdch
Accept-Language: nl-NL,nl;q=0.8,en-US;q=0.6,en;q=0.4
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3
If-None-Match: "c38f300d-114d-4c2565b57b420"
If-Modified-Since: Wed, 13 Jun 2012 08:27:42 GMT 
```

**回复**

```
HTTP/1.1 304 Not Modified
Date: Wed, 13 Jun 2012 11:24:52 GMT
Server: Apache
Connection: close
ETag: "c38f300d-114d-4c2565b57b420" 
```

我已经用 Chrome 19 和 IE9 对此进行了测试。

# spring - 如何使用@ExceptionHandler 处理绑定异常

> ID：11014055
> 
> 赞同：3
> 
> 时间：2012-06-13T11:37:23.533
> 
> 标签：spring, spring-mvc

我的要求是使用 Spring 3.0 和 Hibernate Validator 对表单执行服务器端验证。请记住，我正在使用 AJAX 调用提交表单。我的控制器类代码如下所示。

```
public ModelAndView generatePdfReport(@ModelAttribute("reports") @Valid ReportsCommand model, BindingResult result, ModelAndView modelAndView,
            HttpServletRequest request, HttpServletResponse response) throws Exception {

        if (result.hasErrors()) {

            throw new BindException(result);
        } 
        else{
           ...
           } 
```

更新...

```
 @ExceptionHandler(BindException.class)
   public @ResponseBody String handleException(BindException e,HttpServletRequest request, HttpServletResponse response) 
   {
        response.setStatus(HttpServletResponse.SC_BAD_REQUEST);
        return e.getMessage();

   } 
```

这是我放置在控制器中的处理程序方法。我使用了@ResponseBody 注释，但它仍然以 html 格式而不是 JSON 格式显示响应......我的代码有什么问题......下面是我的字段我正在验证

```
@Size(min = 2, max = 3, message = "calltype must between 2 to 3 Characters.")
    private String callType; 
```

如果我给出的大小超过三个，它就会进入 if 并抛出异常。我想要的是，我想处理这个异常并返回 json 响应。也许我可以使用 @ExceptionHandler 但不要这样做不知道如何。或解决此问题的任何其他解决方案也将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T12:17:11.817

没有自动方法将绑定错误转换为 JSON。您应该手动执行此操作。您可以在两个地方执行此操作：

*   内联 - 生成 JSON 并返回它，而不是抛出 BindException（使用与 JSON 一起使用的自定义 ModelAndView，或通过写入响应）
*   在声明为处理的异常处理程序中`BindException`。`@EXceptionHandler(BindException.class)`您使用和执行与上面相同的转换错误 -> json注释某些（基本）控制器的方法

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-01-19T02:46:30.157

### 导入这个包

```
import org.springframework.validation.BindException 
```

### 不是这个

```
import java.net.BindException 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-09-20T10:03:17.323

只是为了提供有关 Spring 的当前版本的更新：如果您只是简单地从您的控制器方法中抛出 BindException(bindingResult)，那么 spring 将返回一个详细的 JSON 回复，其中包含有关所有验证错误的信息：

@RestController 中的方法

```
@RequestMapping(value = "/ballot", method = POST)
public BallotModel postBallot(@Valid @RequestBody BallotModel newBallot, BindingResult bindingResult) throws BindException {
    log.trace("=> POST /ballot "+newBallot);
    log.debug("ballotService="+ballotService);

    if (bindingResult.hasErrors()) {
        log.trace("   ballot is invalid: "+bindingResult.getAllErrors());
        throw new BindException(bindingResult);  // this generates a cool error message. But it should be documented :-)
    }

    return newBallot;
} 
```

HTTP 回复

```
{
  "timestamp": "Sep 20, 2016 11:57:07 AM",
  "status": 400,
  "error": "Bad Request",
  "exception": "org.springframework.validation.BindException",
  "errors": [
    {
      "field": "voteOrder",
      "bindingFailure": false,
      "objectName": "ballotModel",
      "codes": [
        "NotNull.ballotModel.voteOrder",
        "NotNull.voteOrder",
        "NotNull"
      ],
      "arguments": [
        {
          "codes": [
            "ballotModel.voteOrder",
            "voteOrder"
          ],
          "defaultMessage": "voteOrder"
        }
      ],
      "defaultMessage": "may not be null"
    }
  ],
  "message": "Validation failed for object='ballotModel'. Error count: 1",
  "path": "/ballot"
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-07-06T21:24:07.803

在我的 Spring Boot 版本（2.2.4.RELEASE）中，有一个方法可以在扩展的类（MyCustomExceptionHandler）下覆盖`ResponseEntityExceptionHandler`。

您可以这样使用的方法：

```
@Override
protected ResponseEntity<Object> handleBindException(BindException ex, HttpHeaders headers, HttpStatus status, WebRequest request) {
    logger.info(ex.getMessage());
    return super.handleBindException(ex, headers, status, request);
} 
```

您可以返回包含相关对象的 ResponseEntity。我只是在日志中打印了异常消息作为示例。

# c - 在 C 应用程序中嵌入 JavascriptCore

> ID：11014056
> 
> 赞同：4
> 
> 时间：2012-06-13T11:37:31.623
> 
> 标签：c, javascriptcore

我正在尝试查找有关如何在 C 项目中嵌入 JavascriptCore 的信息。很容易找到 V8 和 SpiderMonkey 的指南，但几乎不可能找到 JSC。有谁知道在哪里看？

我宁愿不嵌入 V8，因为它是 C++，而且我听说 SpiderMonkey 的 API 很糟糕。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T18:23:54.707

[JavaScriptCore 网页](http://trac.webkit.org/wiki/JavaScriptCore)的此链接表明 JavaScriptCore 是 WebKit 的一部分。这是[WebKit 站点中 JavaScriptCore 页面](http://webkit.org/projects/javascript/index.html)的链接。

这个[关于 webkit 的维基百科主题](http://en.wikipedia.org/wiki/WebKit)提到了历史，包括一些关于 JavaScriptCore 的信息。

以下是[有关 Apple 的 web kit 的一些信息](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DisplayWebContent/DisplayWebContent.html)。这是一篇关于[WebKit Javascript 新开发](http://www.appleinsider.com/articles/12/03/01/new_low_level_javascript_interpreter_to_boost_webkit_performance_more_than_200.html)的文章。

这看起来像是[带有 Android 的 webkit 的信息](http://developer.android.com/reference/android/webkit/package-summary.html)。

这是一个测试引擎[SunSpider JavaScript benchmark](http://www.webkit.org/perf/sunspider/sunspider.html)。

您可能会发现这个幻灯片放映，[Hacking Webkit & its JavaScript Engines](http://www.slideshare.net/senchainc/hacking-webkit-its-javascript-engines)很有帮助。

# wordpress - 试图访问没有 www 的 URL。导致 WordPress 尝试加载不存在的 /defaultsite 页面

> ID：11014057
> 
> 赞同：1
> 
> 时间：2012-06-13T11:37:32.457
> 
> 标签：wordpress

如果我尝试导航到[http://vequityintelligence.co.uk](http://vequityintelligence.co.uk)，那么 WordPress 会将浏览器（301 永久移动）重定向到不存在的[http://www.vequityintelligence.co.uk/defaultsite](http://www.vequityintelligence.co.uk/defaultsite) ，所以我得到一个 404未找到错误。

*   htaccess 文件是 WordPress 附带的文件。
*   我通过更改永久链接格式刷新了我的永久链接。
*   网站首页设置为“最近的帖子”选项，但更改它不会影响它。

我明白为什么我会被重定向，但我不明白“/defaultsite”的添加是从哪里来的。

我搜索了谷歌和 SO，结果很少，更不用说任何答案了。我想不出还有什么可能导致这种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-11T19:21:13.823

我想你不再需要这个答案了，但是为了后代添加它：听起来很奇怪，我认为这是一个缓存问题。

我刚刚在我正在开发的一个客户网站上遇到了这个问题，并且我束手无策，但后来发现一些参考资料说它在一个浏览器中运行良好但在另一个浏览器中运行良好，并且清除缓存修复了它。

一个简单的测试：如果您在从未使用过的浏览器中访问该 URL，您还有问题吗？如果没有，可能只是清除浏览器中的缓存给您带来麻烦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T12:53:17.803

在 Wordpress 仪表板 > 常规设置中，检查您的 Wordpress 地址 (URL) 和站点地址 (URL) 设置。

这是我确定“www”的地方。我的 URL 不需要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T11:43:30.713

我会说这是htaccess文件的问题。也许将以下代码添加到 htaccess 将解决问题。

```
RewriteEngine On
RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L] 
```

这会将非 www 重定向到 www。将其放在顶部附近，以便在其他规则之前对其进行处理。

代码在[这里找到](http://dense13.com/blog/2008/02/27/redirecting-non-www-to-www-with-htaccess/)

# mysql - 如何检索 MySQL 表中更新的列

> ID：11014059
> 
> 赞同：0
> 
> 时间：2012-06-13T11:37:41.760
> 
> 标签：mysql

我有一张包含 30 个字段（列）的表。我想在 5 分钟内获得更新了哪些字段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T11:39:00.680

您必须将更新详细信息记录到另一个表并在更新表时运行触发器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T12:06:43.403

您可以编写触发器并检查哪些列已使用

```
 FOR EACH ROW BEGIN

SET @Cols = 'Updated Columns: ';

IF OLD.col1 <> NEW.col1 THEN
 @Cols = CONCAT(@Cols, 'col1, ');
END IF;

IF OLD.col2 <> NEW.col2 THEN
 @Cols = CONCAT(@Cols, 'col2, ');
END IF;

END 
```

@cols 将包含所有更新的字段

# objective-c - Objective C - OBShapedButton 和 LongpressGestureRecognizer

> ID：11014060
> 
> 赞同：0
> 
> 时间：2012-06-13T11:37:43.403
> 
> 标签：objective-c, uibutton, uigesturerecognizer

我的视图上有一些特殊的按钮（使用子类型 OBShapedButton 实现，按钮可以有一个透明的图像，并且只能在图像的大小上单击）。现在我有了触摸屏幕并四处走动的想法。每次当我移动我的一个按钮时，我都想做点什么。我怎样才能做到这一点？我尝试使用 LongpressGestureRecognizer，但我不知道如何在手指移动期间获取我触摸的对象。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T14:40:08.760

去看看[文档](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIControl_Class/Reference/Reference.html)`UIControlEventTouchDragEnter`。

# iphone - iOS：在视图之间导航

> ID：11014063
> 
> 赞同：-1
> 
> 时间：2012-06-13T11:37:56.467
> 
> 标签：iphone, ios, uiviewcontroller, xcode4.3

我正在寻找一个可以找到教程/文档的好地方，其中包含有关在视图（视图控制器）之间切换的不同方式的示例，而且我对我们可以执行的动画的不同可能性感兴趣。

那么任何机构都有一些链接吗？

电子书非常感谢:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T12:31:16.923

嘿，伙计，您可以简单地参考 Apple Document 的[uinavigationcontroller 类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationController_Class/Reference/Reference.html)。

# c# - C#，System.Timers.Timer，每分钟运行一次，与系统时钟同步

> ID：11014070
> 
> 赞同：3
> 
> 时间：2012-06-13T11:38:40.813
> 
> 标签：c#, timer, system, sync, clock

我试图让计时器每分钟运行一次，与系统时钟（00:01:00、00:02:00、00:03:00 等）同步。下面的代码会产生一个稳定的计时器吗？我试过运行它。计时器确实每分钟精确运行一次。但问题是它会在几个月后开始徘徊吗？

```
private System.Timers.Timer timer;

public frmMain()
{
            timer = new System.Timers.Timer();
            timer.AutoReset = false;
            timer.Elapsed += new System.Timers.ElapsedEventHandler(timer_Elapsed);
            timer.Interval = GetInterval();
            timer.Start();
}

private void timer_Elapsed(object sender, System.Timers.ElapsedEventArgs e)
{
            //Do processing

            timer.Interval = GetInterval();
            timer.Start();

}
private double GetInterval()
{
            DateTime now = DateTime.Now;
            return ((60 - now.Second) * 1000 - now.Millisecond);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T11:46:48.703

它不会。

`DateTime.Now`使用系统时钟作为参考计时器，因此您的计时器将*始终*与它保持同步，以系统时钟分辨率的几毫秒为模。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T11:58:59.883

大图看起来不错，`GetInterval`总是会返回一个正值，等等。我只看到一些警告：

1.  如果发生待机/恢复，那么您可能会在非回合时间运行一次
2.  如果 timer_Elapsed 需要超过一分钟才能完成，那么您将错过一个节拍
3.  如果系统过载以至于 timer_Elapsed 计划延迟 40/50 秒并且 timer_Elapsed 花费超过`60 - delay`几秒，您将错过一个节拍

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T11:54:18.027

您的代码不会漂​​移，但会（不可避免地）出现抖动，因为 Timer 回调很少会在请求的时间间隔内发生。

我可以看到此代码的唯一*潜在*`ThreadPool`问题是，如果您的计时器回调没有出队并在一分钟间隔内执行，从而导致跳过一分钟。

这似乎不太可能，但并非完全超出可能性范围。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T11:47:36.667

我看不出它是如何消失的，每次计时器滴答作响时，它都会确定到下一分钟的确切时间并相应地设置间隔。理论上它实际上是相当巧妙的，因为我自己的计时器会跑掉。当然，唯一可以确定的方法是对其进行测试，因此只要您的 UI 不冻结超过 60 秒（为了安全起见，可能需要 50 秒），就不会有问题。请记住，笔记本电脑通常会在放置一段时间后进入睡眠状态，或者盖上盖子，这会导致故障。

但是，根据您尝试执行的操作，为什么不使用系统时间在每次分钟更改时发送事件？

# vb.net - 如何根据 JSON 填充字典中定义的对象变量？

> ID：11014073
> 
> 赞同：1
> 
> 时间：2012-06-13T11:39:00.103
> 
> 标签：vb.net, json

好的，这个问题听起来可能有点令人困惑，所以我将尝试用一个例子来解释它。

假设你有这样的对象：

```
Class Something
    Private varX As New Integer
    Private varY As New String

'[..with the associated property definitions..]

    Public Sub New()
    End Sub

End Class 
```

还有一个：

```
Class JsonObject
    Inherits Dictionary(Of String, String)

    Public Function MakeObject() As Object 'or maybe even somethingObject 
        Dim somethingObject As New Something()

        For Each kvp As KeyValuePair(Of String, String) In Me
            'Here should happen something to use the Key as varX or varY and the Value as value for the varX or varY
            somethingObject.CallByName(Me, kvp.Key, vbGet) = kpv.Value

        Next

        return somethingObject
    End Function

End Class 
```

我从我自己的[上一个问题中获得了“CallByMe()”函数](https://stackoverflow.com/questions/10119957/return-a-variable-based-on-the-input-of-a-function-net-c-sharp-or-vb)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T12:05:29.987

[`CallByName`](http://msdn.microsoft.com/en-us/library/chsc1tx6%28v=vs.80%29.aspx)工作方式与您尝试使用它的方式不同。查看文档，它会告诉您在这种特殊情况下正确的用法是

```
CallByName(Me, kvp.Key, vbSet, kpv.Value) 
```

但是，该函数`CallByName`是 VB 库的一部分，并非所有设备都支持（特别是它不包含在 .NET Mobile 框架中），因此最好不要使用它。

使用适当的反射稍微复杂一些，但保证可以在所有平台上工作。

```
Dim t = GetType(Something)
Dim field = t.GetField(kvp.Key, BindingFlags.NonPublic Or BindingFlags.Instance)
field.SetValue(Me, kvp.Value) 
```

# mpi - 探测 MPI_Bcast 或 MPI_Send

> ID：11014085
> 
> 赞同：3
> 
> 时间：2012-06-13T11:39:39.773
> 
> 标签：mpi, hpc

我有一个程序，其中有一个主/从设置，并且我为主实现了一些功能，这些功能向从属发送不同类型的数据。一些功能发送到单个从站，但一些通过 MPI_Bcast 向所有从站广播信息。

我想在从站中只有一个接收功能，所以我想知道我是否可以探测一条消息并知道它是作为正常阻塞消息广播还是发送，因为有不同的方法来接收广播的内容和接收的内容已正常发送。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T11:55:54.930

不，您无法根据探测调用决定是调用 Bcast 还是 Recv。

MPI_Bcast 调用是一个集体操作——所有 MPI 任务都必须参与。结果，这些不像点对点通信；他们利用所有进程都参与的事实来进行高阶优化。

因为集体操作意味着如此多的同步，所以让其他任务检查它们是否应该开始参与集体是没有意义的；这是必须内置到程序逻辑中的东西。

*   根进程在广播中的角色与发送不同；一般来说，它不能只调用 MPI_Bcast 然后继续。实现几乎肯定会阻塞，直到一些其他数量的进程参与广播；和

*   另一个进程在广播中的作用与接收消息不同；一般来说，它将同时接收和发送信息。所以参与广播不同于进行简单的 Recv 调用。

所以探针不起作用；[MPI_Probe 的文档](http://www.mpi-forum.org/docs/mpi-11-html/node50.html)非常清楚，它返回有关下一次 MPI_Recv 会发生什么的信息，并且 Recv 是与 Bcast 不同的操作。

您可能能够在 MPI 3.0 中获得一些您想要的东西，它现在正在最终确定，它允许非阻塞集合体——例如，MPI_Ibcast。在这种情况下，您可以启动广播并调用 MPI_Test 来检查请求的状态。然而，即使在这里，每个人都需要先调用 MPI_Ibcast；这只是允许更容易地交错集体和点对点通信。

# android - 我们如何设置警报管理器服务

> ID：11014090
> 
> 赞同：0
> 
> 时间：2012-06-13T11:40:06.233
> 
> 标签：android

> **可能重复：**
> [AlarmManager - 如何在每小时的顶部重复警报？](https://stackoverflow.com/questions/3127351/alarmmanager-how-to-repeat-an-alarm-at-the-top-of-every-hour)

有人可以指导我如何在android中设置多个AlarmManager。

我想使用 AlamManager 服务运行 rest api。

我有两次运行重复服务。第一次之后每两分钟。第二次结束（例如 12.00）。

我们如何设置 MutlialarmManager 服务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T14:30:35.410

此示例是每 10 秒更新一次。所以你必须让它适应你的工作。

```
new Thread(){
@Override
public void run(){
   autoUpdate = new Timer();
   autoUpdate.schedule(new TimerTask() {
      @Override
      public void run() {
           runOnUiThread(new Runnable() {
              public void run() {
                  // TODO
              }
           });
      }
    },0,10000);//updates each 10 sec.
 }
 }.start(); 
```

希望这会有所帮助。

# javascript - 使用 requirejs 的多个脚本

> ID：11014091
> 
> 赞同：6
> 
> 时间：2012-06-13T11:40:13.043
> 
> 标签：javascript, requirejs

我对requirejs有疑问。也许我真的不明白它应该如何工作，但对我来说，requirejs 不允许我将代码拆分成不同的独立脚本似乎适得其反。由于我使用 Play 及其模板语言来构建页面结构，因此我尝试将不同的 javascript 逻辑插入到页面组件的不同部分中。例如：我有一个 main.scala.html，其中包含每个页面需要的组件，以及它们的 js 逻辑。当另一个页面需要导航栏时，我将其与相应的逻辑一起插入。所以我有一个 main.js 和一个 navigation.js。因为它们只依赖于 Jquery mobile 而不是彼此依赖，所以我想用不同的标签加载它们。

所以我的问题是：是否可以使用 requirejs 在一个页面中拥有多个独立的脚本？如果不是，为什么？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T12:02:10.223

这个想法是你只有一个`data-main`加载 的属性`main.js`，然后在里面`main.js`你可以有条件地加载其他脚本

```
if (something) {
  require(["this"], function(this) { ... });
} else {
  require(["that"], function(that) { ... });
} 
```

请参阅：[http ://requirejs.org/docs/start.html](http://requirejs.org/docs/start.html)

还是我误解了这个问题？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-21T15:06:36.437

data-main 适用于当您的页面只有一个 requirejs 应用程序时。如果您有多个，请不要使用 data-main。这很简单，这是一个使用 main.js 和 navigation.js 的示例

```
<script src='require.js'></script>
<script>
   require(['main']);
   require(['navigation']);
</script> 
```

尽管我认为您的页面确实需要navigation.js。将每个页面视为一个应用程序。所以 data-main 像往常一样进入你的 main.js。

然后在 main.js 中：

```
// start independent load of navigation.js
require(['navigation']);
// load modules required for main
require(['moduleA', 'moduleB'], function(moduleA, moduleB){
    // inside main.js
}); 
```

# javascript - 嵌入谷歌地图

> ID：11014092
> 
> 赞同：2
> 
> 时间：2012-06-13T11:40:27.223
> 
> 标签：javascript, jquery, google-maps, iframe

我在我的网站中嵌入了谷歌地图。我想根据用户输入更改其位置。我怎样才能做到这一点？

我试图复制该位置的链接并将其分配给`iframe` `src`：

```
 $("iframe").attr("src", "https://maps.google.co.in/maps?q=USA&hl=en&ll=37.09024,-95.712891&spn=131.016476,346.289063&sll=23.259933,77.412615&sspn=0.178842,0.338173&oq=usa&doflg=ptm&hnear=United+States&t=m&z=2"); 
```

但`iframe`没有加载地图。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T11:54:17.253

尝试使用[GoogleMaps JavaScript API](https://developers.google.com/maps/documentation/javascript/tutorial)。提供对地图的更多控制（地理编码、搜索、自定义标记等），然后仅嵌入 iframe。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T18:27:10.147

看看这个 ：）

```
<!DOCTYPE html>  
<html>  
<head>  
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" /> 
<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>  
<link href="http://code.google.com/apis/maps/documentation/javascript/examples/default.css" rel="stylesheet" type="text/css" />  
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>  
<script type="text/javascript"> 
// Initiate map 
function initialize(data) { 
  // Make position for center map 
  var myLatLng = new google.maps.LatLng(data.lng, data.lat); 

  // Map options  
  var myOptions = { 
    zoom: 10, 
    center: myLatLng, 
    mapTypeId: google.maps.MapTypeId.HYBRID 
  }; 

  // Initiate map 
  map = new google.maps.Map(document.getElementById("map_canvas"), myOptions); 

  // Info window element 
  infowindow = new google.maps.InfoWindow(); 

  // Set pin 
  setPin(data); 
} 
// Show position 
function setPin(data) { 
  var pinLatLng = new google.maps.LatLng(data.lng, data.lat); 
  var pinMarker = new google.maps.Marker({ 
    position: pinLatLng, 
    map: map, 
    data: data 
  }); 

  // Listen for click event  
  google.maps.event.addListener(pinMarker, 'click', function() { 
    map.setCenter(new google.maps.LatLng(pinMarker.position.lat(), pinMarker.position.lng())); 
    map.setZoom(18); 
    onItemClick(event, pinMarker); 
  }); 
} 
// Info window trigger function 
function onItemClick(event, pin) { 
  // Create content  
  var contentString = pin.data.text + "<br /><br /><hr />Coordinate: " + pin.data.lng +"," + pin.data.lat; 

  // Replace our Info Window's content and position 
  infowindow.setContent(contentString); 
  infowindow.setPosition(pin.position); 
  infowindow.open(map) 
} 
</script>  
</head>  
<body onload="initialize({lat:-3.19332,lng:55.952366,text:'<h2>Edinburgh</h2><i>Nice city!</i>'})"> 
  <div id="map_canvas">  
</div>  
</body>  
</html> 
```

# android - 活动链接选项卡

> ID：11014100
> 
> 赞同：0
> 
> 时间：2012-06-13T11:41:01.287
> 
> 标签：android, android-layout

我会创建一个 tabhost 并确保您按下一个选项卡，它会显示一个具有从 xml 设置的布局的活动。怎么做？

我想到了这样的命令：

```
tabHost.addTab(tabHost.newTabSpec("Factory").setContent(
new MyTabContentFactory(this)).setIndicator("Factory")); 
```

我可以在 MyTabContentFactory 类中正常加载布局吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T12:44:33.557

```
TabSpec spec3 = tabhost.newTabSpec("Mention");
spec3.setIndicator("Menti", getResources().getDrawable(R.drawable.ic_launcher));
spec3.setContent(new Intent().setClass(this,Mention.class)); 
```

# jsf - 无法从 Servlet 过滤器中的 FacesContext 检索 Session

> ID：11014105
> 
> 赞同：4
> 
> 时间：2012-06-13T11:41:23.487
> 
> 标签：jsf, session, servlet-filters, facescontext

在对我的用户进行身份验证后，我想在会话中引用当前登录的用户。

这里我如何在`setCurrentUser`方法中做到这一点：

```
FacesContext facesContext = FacesContext.getCurrentInstance();
HttpSession session = (HttpSession) facesContext.getExternalContext().getSession(true);
session.setAttribute("CURRENT_USER", currentUser); 
```

不幸的是，`session`引用总是 null ！

或者，我尝试使用 sessionMap

```
FacesContext facesContext = FacesContext.getCurrentInstance();
Map<String, Object> sessionMap = facesContext.getExternalContext().getSessionMap();
sessionMap.put("CURRENT_USER", currentUser); 
```

它因这个例外而惨遭失败：

```
java.lang.UnsupportedOperationException
    at java.util.AbstractMap.put(AbstractMap.java:186)
    (...) 
```

我究竟做错了什么 ？

我的控制器的完整代码

**用户控制器.java**

```
public class UserController implements Filter {
    private FilterConfig fc;
    private static final String CURRENT_USER = "CURRENT_USER";

    public void init(FilterConfig filterConfig) throws ServletException {
        fc = filterConfig;
        log(">> Filter initialized");
    }

    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {
        // Authenticate user
        // ...

        // Save refernce in Session
        setCurrentUser(currentUser);

        //(...)
    }

    public static void setCurrentUser(User u) {
        FacesContext facesContext = FacesContext.getCurrentInstance();
        HttpSession session = (HttpSession) facesContext.getExternalContext().getSession(true);
        session.setAttribute(CURRENT_USER, u);// session is always NULL
    }

    public static User getCurrentUser() {
        FacesContext facesContext = FacesContext.getCurrentInstance();
        HttpSession session = (HttpSession) facesContext.getExternalContext().getSession(true);       
        return (User)session.getAttribute(CURRENT_USER);
    }

    //...   
} 
```

**JSF 2.0**
**JBoss 5.1.0.GA**

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-13T11:57:29.890

在`FacesContext`a 中不可用，`Filter`因为在*之前*`Filter`调用了。*`FacesServlet`*

 *您应该`request`改为从参数中获取会话。

```
HttpSession session = ((HttpServletRequest) request).getSession();
session.setAttribute("user", currentUser);
// ... 
```

一旦您在 JSF 上下文中（例如，在 JSF 托管 bean 或 JSF 视图中），那么这将在`getSessionMap()`相同的属性名称上可用

```
User user = (User) externalContext.getSessionMap().get("user"); 
```

或者只是`#{user}`在 EL 中：

```
@ManagedProperty("#{user}")
private User user; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-08-22T16:11:57.643

这是我所做的：

```
public class SesionUtil implements Serializable {

    private static final long serialVersionUID = 1L;

    public void setSesionUsuario(String key, Object value) {
        FacesContext.getCurrentInstance().getExternalContext().getSessionMap().put(key, value);
    }

    public String getSesionUsuario(String key) {
        return FacesContext.getCurrentInstance().getExternalContext().getSessionMap().get(key).toString();
    }
} 
```

然后，为了初始化会话，我简单地执行了：

```
@Inject // Inject dependency
private SesionUtil sessionUtil;

...

sessionUtil.setSesionUsuario("nombreUsuario",nombre); 
```*

# c# - 无法通过实体框架中的导航集合将记录添加到数据库

> ID：11014108
> 
> 赞同：0
> 
> 时间：2012-06-13T11:41:37.840
> 
> 标签：c#, entity-framework, entity-framework-4

你好，我喜欢这 2 张桌子

```
class User
public int UserId{get;set;}
{
....
public virtual ICollection<Product> Products{ get; set; }
...
}
class Product
{
public int ProductId{get;set}
..
public virtual User User;
...
} 
```

我已经这样设置了 Fluent Api

```
 modelBuilder.Entity<User>().HasMany(x => x.Products).WithOptional(); 
```

我尝试将创建的产品添加到导航集合中，如下所示：

```
 if (user.Products == null)
        user.Products = new Collection<Product>();
    user.Products.Add(product);
    crud.Update(user.UserId, user); 
```

当我调试时，我看到该产品已添加到集合中但没有添加到数据库中请帮助我！如果需要我有更多关于它的信息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T11:47:50.210

```
//...
user.Products.Add(product);
modelBuilder.SaveChanges();  //modelBuilder is the dbcontext 
```

# java - 将zip文件转换为war文件

> ID：11014111
> 
> 赞同：1
> 
> 时间：2012-06-13T11:41:58.050
> 
> 标签：java, zip, war, rename

我将战争文件转换为 zip 文件以进行一些自定义。重命名它会将其显示为战争文件，但在属性中带有一个 zip 图标和 zip 扩展名。如何将 zip 文件转换回 war 文件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-13T11:56:00.087

在窗户里。您可以使用命令提示符重命名文件。

```
rename sample.zip sample.war 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-13T11:48:13.210

我的猜测是你实际上没有将它重命名回war文件。在 Windows 中，可以选择`Hide extensions for known file types`.

如果选中，您可能只是重命名为 `fileName.war.zip`

在 Windows XP 中修复的步骤 - [http://www.wikihow.com/Disable-Hidden-File-Extensions-in-Windows-XP](http://www.wikihow.com/Disable-Hidden-File-Extensions-in-Windows-XP)

在 Windows 7/Vista 中修复的步骤 - [http://windows.microsoft.com/en-us/windows-vista/show-or-hide-file-name-extensions](http://windows.microsoft.com/en-us/windows-vista/show-or-hide-file-name-extensions)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-25T06:19:49.333

您可以使用命令提示符将文件名从 .zip 更改为 .war。

1.转到文件位置（cd filelocation）

1.  使用以下命令。

    **任文件.zip 文件.war**

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2019-11-22T10:33:21.300

1 您可以使用命令提示符将文件名从 .zip 更改为 .war。

使用命令**mv abc.zip abc.war**

# php - 如何开始允许自定义框架的插件？

> ID：11014116
> 
> 赞同：3
> 
> 时间：2012-06-13T11:42:06.763
> 
> 标签：php

首先，这不是一个真正的编程问题，而是一个编程概念问题。基本上，我已经构建了一个定制的 PHP 框架来加速我的最终部署，我想要某种插件系统，允许我向框架的基础添加特定的功能（比如 SQL 类或 Twitter package），这将允许我将它们放入一个文件夹中，而不必为每个新项目实际编辑基础。

关于解决此问题的最佳方法的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T11:48:49.057

这是[@ircmaxell](https://stackoverflow.com/users/338665/ircmaxell)写的一篇关于如何做到这一点以及有哪些选择的文章：

*   [在 PHP 中处理插件](http://blog.ircmaxell.com/2012/03/handling-plugins-in-php.html)

另请查看：

*   [允许 PHP 应用程序插件的最佳方式](https://stackoverflow.com/questions/42/best-way-to-allow-plugins-for-a-php-application)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T11:57:08.137

我在我的 cms 中做什么：

*   对于每个插件，我都会创建一个以该插件名称命名的文件夹。
*   我也在那里创建了一个**/translations文件夹。**[在这里](https://stackoverflow.com/questions/10971363/php-localization/10971942#10971942)检查。
*   有一个具有**2 个基本功能**的 php 文件，**plugin_install**和**plugin_uninstall**（你知道，安装/卸载时会发生的事情，例如表创建/删除）
*   创建一个系统的*特殊页面*来读取这些插件，安装和未安装，并提供一个**开/关开关**，以便用户可以安装/卸载它们。
*   通过在您的索引页面（或管理页面）顶部调用一次 include_once 来加载上面提到的这些单个文件，以便`include whatever functionality they offer`.
*   启用的插件将从您的主页加载 (include_once) 以及它们的功能，因此每个插件也可以相互调用。

# android - 如何将应用程序集成到手机设置中？

> ID：11014118
> 
> 赞同：0
> 
> 时间：2012-06-13T11:42:11.950
> 
> 标签：android, xml

Nova Launcher 集成了 cm9 设置，例如 settings-->launcher

现在我想通过设置访问应用程序并且我不希望应用程序抽屉中有任何图标..这可能吗..有人可以指点我教程或示例..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T11:50:29.937

我不认为它可能。因为系统设置本身是一个应用程序，除非有任何可用的界面，否则您不能将您的内容推送到另一个应用程序中，在这种情况下不是。

cm9之所以拥有它，是因为它是一个自定义ROM，并且开发人员已经自定义了其设置部分，以便将其支持的软件包中的选项集成到一个地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T11:49:52.357

正如你所说的 Nova Launcher 在 Cyanogen 上做的那样，我认为你不能用股票 ROM 做到这一点。类似的问题：[Integration into android's settings](https://stackoverflow.com/questions/7444156/integration-into-androids-settings)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T11:53:39.277

我不确定 CM9 特定的 API（可能存在也可能不存在）。

在现有的 Android 中，如果您实施[`AccountManager`](http://developer.android.com/reference/android/accounts/AccountManager.html). 如果您的应用程序不需要登录，您将需要创建一个模拟帐户。我记得 HTC Sense 在某些时候使用他们的一些应用程序（例如天气）这样做，但不确定最新版本。

# ruby - 这是没有以root身份登录的问题吗？

> ID：11014120
> 
> 赞同：-1
> 
> 时间：2012-06-13T11:42:20.040
> 
> 标签：ruby, linux, ubuntu, root, pry

据我记得在安装 ubuntu 时，安装程​​序并没有要求我输入 root 密码。它要求我在准备第一次使用之前创建一个帐户。在那里我指定了用户名和密码。我使用这个密码登录到我的 ubuntu 机器。我必须安装一些给出以下错误的东西：

![在此处输入图像描述](../Images/f2b364290b88db4fa0f98813028a59d0.png)

可能是什么问题呢 ？当我以root身份输入密码时，它说`auth failure`。如何

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T11:47:16.463

也许更适合超级用户...

来自[ubuntu-help 的文本](https://help.ubuntu.com/community/RootSudo)

默认情况下，Root 帐户密码在 Ubuntu 中是锁定的。这意味着您不能直接以 Root 身份登录或使用 su 命令成为 Root 用户。但是，由于 Root 帐户实际存在，因此仍然可以使用 root 级权限运行程序。这就是 sudo 的用武之地——它允许授权用户（通常是“管理”用户；有关更多信息，请参阅 AddUsersHowto）以 Root 身份运行某些程序，而无需知道 root 密码。

这意味着在终端中，您应该对需要 root 权限的命令使用 sudo

因此，在您的情况下，请`sudo gem install`改用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T11:48:04.707

是的。这是一个根本问题。

您尝试使用什么命令来获取 root 权限？

你刚刚输入了吗`su <username>`

输入`sudo su`

然后使用用户名/密码组合进入 root。

宝石将起作用。

# .net - 显示从会话到标签的数据

> ID：11014121
> 
> 赞同：-2
> 
> 时间：2012-06-13T11:42:21.060
> 
> 标签：.net

我用了

```
Session["EmpName"] = Convert.ToString(Request.QueryString[1]);
lblEmployeeName.Text = Session["EmpName"].ToString; 
```

从会话中显示标签中的数据，但显示以下错误：

> 无法将方法组“ToString”转换为非委托类型“字符串”。

告诉我任何解决方案...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T12:05:54.370

```
lblEmployeeName.Text = Session["EmpName"].ToString; 
```

应该：

```
lblEmployeeName.Text = Session["EmpName"].ToString(); 
```

更好的是，（如果 Session["EmpName"] 为空，这不会崩溃）：

```
string empName= Session["EmpName"] as string;
if (empName != null)
{
    lblEmployeeName.Text = empName;
}
else
{
    // Session expired?
} 
```

额外说明：

```
Convert.ToString(Request.QueryString[1]); 
```

你应该寻找一个特定的值，你不能确定 QueryString 值的顺序！Request.QueryString[1] 返回一个字符串。无需转换。

```
Request.QueryString["Value"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T12:21:20.590

试试这个

会话["EmpName"] = Convert.ToString(Request.QueryString["1"]);

lblEmployeeName.Text =Convert.ToString(Session["EmpName"]);

# c# - 需要 nHibernate 方法委托或事件

> ID：11014123
> 
> 赞同：0
> 
> 时间：2012-06-13T11:42:27.160
> 
> 标签：c#, asp.net, nhibernate, queryover

```
Client clientAlias = null;
Note noteAlias = null;
Comment commentAlias = null;

query.JoinAlias(() => noteAlias.Client, () => clientAlias)
.JoinAlias(() => noteAlias.Comments, () => commentAlias);
query.Where(() => clientAlias.Id == clientId);
query.OrderBy(() => clientAlias.Id).Desc(); 
```

这条线是错误的。任何猜测为什么？

```
query.OrderBy(() => clientAlias.Id).Desc(); 
```

错误说

```
Method Delegate or Event is Expected 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T13:07:07.443

我没有使用

```
using NHibernate;
using NHibernate.Criterion; 
```

有趣的是，resharper 并没有这么建议。

# web-services - 是否有一种安全的方法来实现我的客户将嵌入的客户端代码片段

> ID：11014124
> 
> 赞同：3
> 
> 时间：2012-06-13T11:42:36.723
> 
> 标签：web-services, security, oauth-2.0, oauth-provider

我公司为其他网站提供服务。我希望能够给他们一个简单的代码片段以嵌入他们的网站（如小部件），它将向我正在实施的服务发送查询，接收响应并在页面中呈现结果。我想尽量减少他们的努力，只给他们尽可能小的片段。这也是为什么我想把它全部保留在客户端。

问题是我想确保调用实际上是由我的客户发出的，而不是由从网站复制代码的任何其他人发出的。我查看了 Web 客户端 oauth2 流程，但似乎无法对客户端进行身份验证。它确实说有一种方法可以通过将回调 URL 与客户端向我的服务注册的 URL 进行比较来验证客户端。

我的问题：

1.  有没有更好的方法？
2.  oauth2 客户端方法（包括所描述的验证客户端的方法）是否足够安全？
3.  如果我去建议的实施，我应该注意什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T07:22:57.767

您可以使用 OAuth-2.0 中定义的客户端凭据授予授权。这将允许您为每个单独的客户端分配一个单独的客户端令牌和客户端密钥，并且他们发送令牌以获取访问令牌并使用访问令牌来请求数据。

或者您可以一起跳过 OAuth，并使用[SOAP WS-Security](http://en.wikipedia.org/wiki/WS-Security)和分配给每个客户端的证书来授权 Web 服务。

# objective-c - Objective-C OOP 初始化函数

> ID：11014126
> 
> 赞同：1
> 
> 时间：2012-06-13T11:42:41.690
> 
> 标签：objective-c, oop

我正在阅读的书说，在分配对象后，我需要在实例上调用 init 函数。但是，当我不调用 init 方法时，我没有看到类的功能有任何差异。那么 init 函数到底在做什么呢？下面是简单类的接口：

```
@interface Fraction: NSObject
{
   int numerator;

   int denominator;
}
-(void) print;

-(void) setNumerator: (int) num;

-(void) setDenominator:(int) den ;

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T11:49:41.150

> 分配一个对象我需要在实例上调用init函数

可以视为

> 分配一个对象我应该在实例上调用init函数

**Init 一般用于初始化类中的实例变量。**

在 NSObject 类的 init 方法中，没有进行初始化，它只是返回 self 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T11:46:45.200

`init`旨在初始化所有必要的实例变量，以便对象处于定义的状态。之后`alloc`，所有 ivars 都设置为`0`// `nil`，`NULL`这可能不是您的对象允许的状态（例如，`denominator`不应该是`0`）。

`init`你的类继承的方法`NSObject`什么都不做，所以如果你的类不需要初始化任何 ivars，你就不必实现你自己的。但是*总是*`init`在 之后调用是一个很好的习惯`alloc`，即使您知道该方法什么都不做（谁说这将永远保持正确？）。

# performance - Matlab计算向量的反射

> ID：11014127
> 
> 赞同：2
> 
> 时间：2012-06-13T11:42:44.940
> 
> 标签：performance, matlab, vector, specular, phong

我必须计算图像的镜面高光（phong）。给出了法线向量和“光向量”。现在我必须计算光反射 - 是否有一个有效的 matlab 函数可以将光矢量翻转到法线矢量上以获得反射光矢量？

I[规格]= k [s] * I * (r * v) ^p

其中： `l`是光向量
`n`是表面的法线向量
`r`是反射向量
`v`是从反射点到观察者的向量
`p`是光泽度

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T12:04:32.280

我会用数学方法解决这个问题：

设`N`为法线向量。设`V`为光向量。设`O`为反射向量。

1.  `O`与 位于同一平面`N`，`V`
2.  和之间的角度的余弦与`V`和之间的`N`角度的余弦相同（带减号）。`V``O`
3.  `O`具有相同的长度`V`

这产生了 3 个方程：

1.  点（O，交叉（N，V））= 0
2.  点（N,V）/范数（N）/范数（V）=-点（N,O）/范数（N）/范数（O）
3.  范数(O) = 范数(V)

处理完这些方程后，您将获得一个 3x3 方程系统。剩下的就是解决它。

* * *

**编辑**我的同事刚刚告诉我一个更简单的方法：

`V`可以分成2部分，`V = Vp + Vn`

1.  `Vp`- 平行`N`
2.  `Vn`- 有直角`N`

`O`有相同的平行部分`Vp`，但正好相反`Vn`

因此, `O = Vp - Vn`, 但是`V = Vp + Vn`然后`O = V - 2 * Vn` Where `Vn = dot(V,N) * N`(假设`N`范数为 1)

所以最后的答案是：

```
 function O = FindReflected(V,N)
     N = N / norm(N);
     O = V - 2 * dot(V,N) * N;
 end 
```

**编辑 2** 我刚刚找到了一个更好的解释`Math.stackexchange`： [https ://math.stackexchange.com/questions/13261/how-to-get-a-reflection-vector](https://math.stackexchange.com/questions/13261/how-to-get-a-reflection-vector)

# sql-server - SQL Server 查询以生成动态列

> ID：11014132
> 
> 赞同：-1
> 
> 时间：2012-06-13T11:42:57.250
> 
> 标签：sql-server, pivot

我有两张表 - 一张是州，另一张是职称。

我想写一个查询，它会输出如下内容：-

```
Job titles  State name1  State name2
Job title1      200         300
Job title2      500         600 
```

如何在 SQL Server 中编写此查询。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T13:09:22.750

我不知道您的架构是什么样的，但听起来您想将其更改为具有三个表：JobTitle、State 和 JobTitle_State_Salary。这样，您就不会为了与薪水挂钩而重复职位或州。

但是，按照书面形式解决问题（并假设薪水随州而变化），这样的事情应该可以解决问题：

```
WITH [CTE] AS
(
    SELECT [Title], [State], [Salary]
    FROM [JobTitle]
         INNER JOIN [StateSalary]
             ON [JobTitle].[ID] = [StateSalary].[JobTitleID]
)
SELECT
    [Title], [State name1], [State name2]
FROM
    [CTE]
    PIVOT
    (
        MAX([Salary])
            FOR [State] IN ([State name1], [State name2])
    ) AS [P] 
```

SQLFiddle 示例[在这里](http://sqlfiddle.com/#!3/520d0/1)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T03:19:07.453

正如 zimdanen 所说，如果不知道确切的表结构，就很难编写查询。

我假设*JobTitle*表具有*JobTitleId*和*JobTitle*字段，并且 *state_salary* 表具有*JobTitleId*、*State*和*Salary*作为字段。

**使用数据透视表**

```
SELECT * FROM (
SELECT A.JOB_TITLE,B.STATE,B.SALARY FROM dbo.JOB_TITLE A INNER JOIN dbo.STATE_SALARY B 
ON A.JOB_TITLE_ID = B.JOB_TITLE_ID)AS SOURCE_TABLE PIVOT 
(SUM(SALARY) FOR STATE IN (STATE1,STATE2)) AS PivotTable 
```

**没有数据透视表**

```
SELECT A.JOB_TITLE,SUM(CASE WHEN B.STATE = 'State1' THEN B.SALARY ELSE 0 END) STATE1,      SUM(CASE WHEN B.STATE = 'State2' THEN B.SALARY ELSE 0 END) STATE2
FROM dbo.JOB_TITLE A INNER JOIN dbo.STATE_SALARY B 
ON A.JOB_TITLE_ID = B.JOB_TITLE_ID
GROUP BY A.JOB_TITLE 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T11:59:02.067

如果您使用的是 sqlserver 2005 或更高版本，您可以尝试使用数据透视表

# mysql - 生成 16M 唯一随机数

> ID：11014135
> 
> 赞同：1
> 
> 时间：2012-06-13T11:43:26.193
> 
> 标签：mysql, performance

我正在尝试生成 16 000 000 个唯一的随机数（10 位：范围 1 000 000 000 - 9 999 999 999）并将它们插入到一个空表中（或者如果不为空，则填写此表）。

桌子：

```
CREATE TABLE `codes` (
`code_id` bigint(20) UNSIGNED NOT NULL AUTO_INCREMENT,
`code` bigint(20) UNSIGNED NOT NULL,
`is_used` tinyint(1) NOT NULL DEFAULT '0',
PRIMARY KEY (`code_id`),
UNIQUE KEY `code` (`code`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ; 
```

...和功能：

```
DELIMITER $$

CREATE DEFINER=`root`@`localhost` FUNCTION `codes`(`minRange` BIGINT UNSIGNED, `maxRange` BIGINT UNSIGNED, `_amount` BIGINT UNSIGNED) RETURNS tinyint(1)
MODIFIES SQL DATA
BEGIN
DECLARE pick BIGINT;

while (SELECT count(*) FROM codes) < _amount do
begin
SET pick = minRange + FLOOR(RAND() * (maxRange - minRange + 1));
INSERT IGNORE INTO codes (code) VALUES (pick);

end;
end while;

RETURN 1;
END$$

DELIMITER ;

-- call: SELECT codes(1000000000,9999999999,16000000); 
```

该功能非常慢：生成 20k 行需要 2.5 分钟，所以 16M - 大约 33 小时......有没有办法优化它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T18:01:43.233

你要的是一个矛盾的说法。如果这 16M 个数字是唯一的，那么它们就不是随机的。想一想：一个真正的 10 位随机数有 1/9E9 的概率是任何给定的数字。然而，您的第 16M 号数字有 0 概率是 15,999,999 个数字之一，有 1/983,000,001 概率是其余数字之一。你应该总是期待重复。1B 中的 16M 大约有 1%。

所以我的建议是生成（16M +一点）随机数，做一个唯一的排序；截断到 16M 然后随机排序。我的问答：

```
php -r 'for( $i=0;$i<16500000;$i++) echo mt_rand(100000000, 999999999),"\n";'\
  | sort -u | head -16000000 | sort -R > /tmp/loadfile.lst 
```

在我 4 岁的笔记本电脑上花了 7 多分钟。在现代四核桌面上它会快*很多。*我使用 PHP-CLI 是因为我的笔记本电脑上有它，而且 mt_rand 例程是一个很好的例程。您可以将其作为 3 liner-C prog 或任何可用的语言来执行。正如 Zercms 所说，只要在加载之前禁用索引并在之后重新启用，加载就会很快。您也只需要加载列`code`。

享受。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T11:49:14.343

您正在`SELECT count(*)`为*每个*插入的随机数运行一个。一个简单的优化是尝试在不检查的情况下填充 16000000 个随机数，*然后*查看实际插入了多少个，从头开始重复要添加的剩余数字的数量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T11:45:43.757

我能想到的最快方法是生成具有唯一编号的纯文本文件并使用[`LOAD DATA INFILE`](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)

您还需要[`ALTER TABLE`](http://dev.mysql.com/doc/refman/5.1/en/alter-table.html)在开始加载数据之前禁用密钥，然后再启用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T11:48:26.050

如果您安装了 PHP，也许您应该尝试不通过 MySQL 而是通过 PHP 来生成您的号码。PHP`mt_rand()`确实会生成更好的随机值，您可以将值填充到数组中，并通过`in_array()`.

此外，由于每次都必须更新表索引，因此您的 MySQL 速度变慢了很多，如果您需要在 MySQL 中执行此操作，也许您应该在生成数字时禁用它。

# python - Django 模型和 Python 属性

> ID：11014138
> 
> 赞同：12
> 
> 时间：2012-06-13T11:43:44.063
> 
> 标签：python, django, django-models

我尝试使用 python 属性设置 Django 模型，如下所示：

```
class Post(models.Model):
    _summary = models.TextField(blank=True)
    body = models.TextField()

    @property
    def summary(self):
        if self._summary:
            return self._summary
        else:
            return self.body

    @summary.setter
    def summary(self, value):
        self._summary = value

    @summary.deleter
    def summary(self):
        self._summary = '' 
```

到目前为止一切顺利，在控制台中我可以很好地与摘要属性交互。但是当我尝试用这个来做任何 Django-y 的事情时，比如`Post(title="foo", summary="bar")`，它会抛出一个合适的。有什么方法可以让 Django 很好地使用 Python 属性？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-14T01:00:16.357

不幸的是，Django 模型不能很好地处理 Python 属性。它的工作方式是，ORM 仅识别 QuerySet 过滤器中字段实例的名称。

您将无法`summary`在过滤器中引用，而是必须使用`_summary`. 这会很快变得混乱，例如要在多表查询中引用此字段，您必须使用类似

```
User.objects.filter(post___summary__contains="some string") 
```

有关属性支持的更多详细信息，请参阅[https://code.djangoproject.com/ticket/3148 。](https://code.djangoproject.com/ticket/3148)

# asp.net - 如何使用 SSMS 在 sql server 2005 中存储多行文本？

> ID：11014145
> 
> 赞同：1
> 
> 时间：2012-06-13T11:44:09.513
> 
> 标签：asp.net, sql-server-2005, database-connection, ssms

我有类似的问题，但没有得到满意的答案。我想将段落存储在 sql server 2005 的表中。我尝试了所有数据类型（nvarchar、varchar、文本等），但是当我复制内容时，它只存储第一行。帮我。

我正在使用 Sql Server Management Studio 并直接将内容复制粘贴到表中。对于检索，我使用此代码。

```
String query2 = String.Format("select data from try where roll=55");
SqlCommand cmd2 = new SqlCommand(query2, conn);
SqlDataReader reader2 = cmd2.ExecuteReader();
if (reader2.Read())
    {
        Label1.Text = reader2.GetValue(0).ToString();

    } 
```

其中“数据”是多行内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T12:37:51.223

我使用 Sql Server 2008-R2 做了一个小测试（所以在 2005 年可能会有所不同）：

```
insert into Test1 (Col1) VALUES('THIS
INSERTS

A

Multiline

String') 
```

选择时，结果看起来确实没有换行符，但是如果您检查 char(10) 和 char(13) - (CRLF) 它们确实存在于字符串中...

```
select col1, REPLACE(REPLACE(col1,CHAR(10), 'X'),CHAR(13), 'Y') as LineBreaks from Test1 
```

结果： ![在此处输入图像描述](../Images/965fdacb3bc0ba5e0143119536073c18.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T12:51:05.053

如果您将 SSMS 设置为以文本而不是网格（工具栏上的按钮）的形式返回值，您可以在文本中看到换行符，它们不会显示在网格视图中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T12:52:38.437

我有一个我帮助维护的 Web 应用程序，我们将数据存储在 SQL Server 2008 R2 中的多行文本框中——使用 ADO.Net 插入并使用 ADO.net 拉取 乍一看，“段落”中的中断似乎是失踪。为了恢复数据的可打印版本的换行符，我使用快速正则表达式将换行符放回 Web 应用程序中。用于执行此操作的方法如下：

```
 public static string lineBreakCharsToHTMLBreak(string sourceString)
    {
        // This regex says look for any tab, carriage return or linefeed
        Regex rexNewLine = new Regex("[\\t\\n\\r]");
        sourceString = rexNewLine.Replace(sourceString, "<br>");
        Regex rexDoppleBreak = new Regex("(<br>){2,}");

        sourceString = rexDoppleBreak.Replace(sourceString, "<br>");

        return sourceString;
     } 
```

# spring - Bean 创建失败（春季）

> ID：11014147
> 
> 赞同：0
> 
> 时间：2012-06-13T11:44:27.870
> 
> 标签：spring, spring-mvc

我正在尝试创建一个 bean，而不是尝试在我的 Controller 中注入它，但我收到 bean 创建失败错误。这是我的代码

```
@Service("springSecurityLoginServiceImpl")
public class SpringSecurityLoginServiceImpl implements SpringSecurityLoginService
{
  //impl
} 
```

这就是我试图将它注入我的控制器的方式

```
@Controller
@RequestMapping("springSecurity/login.json")
public class SpringSecurityLoginController
{
    @Autowired
    @Qualifier("springSecurityLoginServiceImpl")
    SpringSecurityLoginService springSecurityLoginService;

} 
```

除了这些注释之外，Spring-MVC-config xml 文件中没有条目，但是当我启动服务器时遇到以下异常

```
org.springframework.beans.factory.BeanCreationException: 
Error creating bean with name 'org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping#0'
 defined in ServletContext resource [/WEB-INF/config/spring-mvc-config.xml]: 
 Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: 
 Error creating bean with name 'springSecurityLoginController': 
 Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: 
 Could not autowire field: com.core.servicelayer.user.SpringSecurityLoginService com.storefront.controllers.pages.SpringSecurityLoginController.springSecurityLoginService; 
 nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: 
 No matching bean of type [com.core.servicelayer.user.SpringSecurityLoginService] found for dependency: 
 expected at least 1 bean which qualifies as autowire candidate for this dependency.
 Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true),
 @org.springframework.beans.factory.annotation.Qualifier(value=springSecurityLoginServiceImpl)} 
```

我不确定我做错了什么或我必须做些什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T11:57:52.317

`SpringSecurityLoginController`class 指`SpringSecurityLoginService`的是没有定义 bean 的类。错误就是这么说的。

这是真的，因为您只为 class 定义了一个 bean `LoginServiceImpl`，它似乎没有以`SpringSecurityLoginService`任何方式扩展。

Spring 的 bean 查找算法首先搜索类型为 或扩展的 bean `SpringSecurityLoginService`。然后，它使用`Qualifier`. 在这种情况下，首先没有找到bean......

请参阅[Spring 文档](http://static.springsource.org/spring/docs/3.0.0.M3/spring-framework-reference/html/ch04s11.html#beans-autowired-annotation-qualifiers)：

> **4.11.3 使用限定符微调基于注释的自动装配**
> 
> 由于按类型自动装配可能会导致多个候选者，因此通常需要对选择过程进行更多控制。实现此目的的一种方法是使用 Spring 的 @Qualifier 注释。这允许将限定符值与特定参数相关联，缩小类型匹配集，以便为每个参数选择特定的 bean。

例如，您需要它`LoginServiceImpl`来实现`SpringSecurityLoginService`。

**编辑**

因为这只是一个错字，你可能没有在你的 spring 配置文件中包含`SpringSecurityLoginService`' 包中的包`component-scan`（正如 gkamal 已经提到的那样）。你应该有类似的东西：

```
<context:component-scan base-package="org.example"/> 
```

where`org.example`应该替换为`SpringSecurityLoginService`'s 包。

# c# - 如何通过使用 c# 提供文件的密码作为参数来解密 pdf 文件？

> ID：11014148
> 
> 赞同：0
> 
> 时间：2012-06-13T11:44:37.563
> 
> 标签：c#, itextsharp

我使用以下代码生成了一个带有密码保护的 pdf 文件：

```
using (Stream input = new FileStream(InputFile, FileMode.Open, FileAccess.Read, FileShare.Read))
{
    using (Stream output = new FileStream(OutputFile, FileMode.Create, FileAccess.Write, FileShare.None))
    {
        PdfReader reader = new PdfReader(input);
        PdfEncryptor.Encrypt(reader, output, true, strDob, "secret", PdfWriter.ALLOW_SCREENREADERS);
    }
} 
```

我想根据我的某些条件通过代码删除使用上述代码生成的 PDF 文件的密码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T11:07:01.240

```
string WorkingFolder = Environment.GetFolderPath(Environment.SpecialFolder.Desktop);
string InputFile = Path.Combine(WorkingFolder, "test.pdf");
string OutputFile = Path.Combine(WorkingFolder, "test_dec.pdf");//will be created automatically
//You must provide owner password but not the user password .
private void DecryptFile(string inputFile, string outputFile)
{

    string password = @"secret"; // Your Key Here           
    try
    {
        PdfReader reader = new PdfReader(inputFile, new System.Text.ASCIIEncoding().GetBytes(password));

            using (MemoryStream memoryStream = new MemoryStream())
            {
                PdfStamper stamper = new PdfStamper(reader, memoryStream);
                stamper.Close();
                reader.Close();
                File.WriteAllBytes(outputFile, memoryStream.ToArray());
            }

    }
    catch (Exception err)
    {
        Console.WriteLine(err.Message);
    }
} 
```

# sql-server-2008 - SQL Management Studio 中的断点

> ID：11014154
> 
> 赞同：0
> 
> 时间：2012-06-13T11:45:09.267
> 
> 标签：sql-server-2008

SQL存储过程中的断点有什么用？它与 Visual Studio 中的用途不同。它不会破坏执行？那么添加它有什么用？ELECT COUNT(P).ID) FROM #TempGetTable AS P WHERE P.Status IN ('v','c')

```
AND COALESCE(P.ID,'') <> ''
AND NOT EXISTS (SELECT 1 FROM CERT TGR WHERE TGR.ProcessID = P.ID AND TGR.Type='Take')
AND P.ProcessName = 'Take' 
```

我在上面的代码中添加了一个断点。即使没有断点，它也运行相同。那我们为什么要给那个？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T11:52:34.040

假设您从管理工作室运行：要使用断点，您必须在调试模式下运行它而不是执行，它应该在断点处停止。（绿色箭头或通过调试菜单）

# ios - 在后台模式上传图片

> ID：11014158
> 
> 赞同：2
> 
> 时间：2012-06-13T11:45:24.353
> 
> 标签：ios, background, grand-central-dispatch, nsoperation

我有我想用来将图像上传到服务器的 Web 服务，由 wsdl2objc 生成的 Web 服务代理类，它使用 NSOperation 来执行肥皂调用。假设在上传过程中我按下主页按钮并且应用程序进入后台模式，那会是什么情况？上传过程会终止吗？否则过程将完成。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T11:49:51.943

默认情况下，操作系统会在后台冻结您的应用程序。发生这种情况时，远程服务器可能会在一段时间后关闭连接，因为您的应用程序没有响应。

您可以通过将上传代码包装在后台任务中（使用方法`beginBackgroundTaskWithExpirationHandler:`和`endBackgroundTask:`）来避免这种情况，在这种情况下，操作系统会让您的应用程序在后台再运行 10 分钟以完成其工作。

# linux - 不同 rsyslog 设施上的多个 apache 虚拟主机

> ID：11014159
> 
> 赞同：0
> 
> 时间：2012-06-13T11:45:32.617
> 
> 标签：linux, apache, centos, syslog, rsyslog

使用 CentOS（特别是 Amazon EC2 Linux AMI）。我的 apache 上有 2 个虚拟主机，我希望它们登录不同的 rsyslog 设施，所以我这样配置我的主机：

```
<VirtualHost *:80>
        DocumentRoot /var/www/site1
        ServerName www.site1.com
        ServerAlias alias1

        ErrorLog syslog:local1
</VirtualHost>

<VirtualHost *:80>
        DocumentRoot /var/www/site3
        ServerName www.site3.com
        ServerAlias alias3

        ErrorLog syslog:local3
</VirtualHost> 
```

在我的 rsyslog conf 中，我设置了 2 个转发规则：

```
local1.*    /logFile1
local3.*    /logFile3 
```

但是一切都进入 logFile1，就好像 2 个虚拟主机正在共享 syslog 设施。我不明白发生了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T12:00:34.640

我自己发现，关于 apache 文档（http://httpd.apache.org/docs/current/mod/core.html#errorlog）的注释说：

*该设施实际上是全球性的，如果在单个虚拟主机中更改它，则指定的最终设施会影响整个服务器。*

可悲的是。

# codeigniter - 如何在 CodeIgniter 中我自己的控制器中调用 Tank Auth 哈希函数？

> ID：11014160
> 
> 赞同：0
> 
> 时间：2012-06-13T11:45:38.763
> 
> 标签：codeigniter

我在我的网站上使用 Tank Auth 库，它在前端工作得很好。

但是我希望能够从我的网站的管理员端管理用户，所以我需要能够通过管理员创建一个新用户。

我想使用 Tank auth 的功能来创建与 tank auth 中使用的 phpass 格式相同的密码。

因此，在成功验证后，我需要使用 Tank Auth 函数 PasswordHash 对 $_POST['password'] 进行散列。

所以，现在我的控制器中有这段代码：

```
$this->load->helper(array('form', 'url'));
$this->load->library('form_validation');
$this->load->library('security');
$this->load->library('tank_auth');
$this->lang->load('tank_auth');

$password_original = $_POST['password'];

$hasher = new PasswordHash(
    $this->ci->config->item('phpass_hash_strength', 'tank_auth'),
    $this->ci->config->item('phpass_hash_portable', 'tank_auth')
);
$hashed_password = $hasher->HashPassword($password); 
```

但是我收到此错误消息： **消息：未定义属性：Admin::$ci**

我想我必须用 &ci 初始化新实例，但我不知道怎么做。

提前感谢您提供任何帮助或建议如何以不同的方式进行操作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T12:29:21.183

尝试删除`->ci`

```
$password_original = $_POST['password'];

$hasher = new PasswordHash(
    $this->config->item('phpass_hash_strength', 'tank_auth'),
    $this->config->item('phpass_hash_portable', 'tank_auth')
);

$hashed_password = $hasher->HashPassword($password); 
```

# html - 删除图像标签的“高度”和“宽度”属性

> ID：11014165
> 
> 赞同：10
> 
> 时间：2012-06-13T11:46:03.683
> 
> 标签：html, content-management-system, typo3, responsive-design, typoscript

为了使用[Typo3](http://www.typo3.org)和[Twitter Bootstrap](http://twitter.github.com/bootstrap/)创建一个响应式网站，我想删除图像的*高度*和*宽度*属性

*这是通过文本和图像*和*图像*类型的内容元素在前端生成图像的方式

 *```
<img src="typo3temp/pics/a625b79f89.jpg" width="300" height="226" alt="blabla" /> 
```

我想删除维度属性并得到这个：

```
<img src="typo3temp/pics/a625b79f89.jpg" alt="blaba" /> 
```

谁能帮我 ？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-13T12:56:43.893

在 document.ready 函数中调用图像标签。

```
$('img').removeAttr('width').removeAttr('height'); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-13T15:00:33.660

仅供参考：没有办法用打字稿删除它。`width`and`height`属性在`sysext/cms/tslib/class.tslib_content.php`function中是硬编码的`cImage`。（Typo3 4.7）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-13T11:49:43.240

使用 jQuery

为您的图像对象设置一个 id：

```
<img src="typo3temp/pics/a625b79f89.jpg" width="300" height="226" alt="blabla" id="myimage" />

$('#myimage').removeAttr("height").removeAttr("width"); 
```

这是替代的javascript代码：

```
var myImage= document.getElementById("myimage");
myImage.removeAttribute("heigth");
myImage.removeAttribute("width"); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-02-01T19:18:15.853

无法使用打字稿删除高度或宽度图像属性。

但是您可以使用 CSS 覆盖它以创建响应式网站。

`img { height:100% !important; width:100% !important; }`

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-09-12T18:03:15.690

这将在 TYPO3 6.2 LTS 中实现。结帐[http://forge.typo3.org/issues/49723](http://forge.typo3.org/issues/49723)。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-10-02T17:45:07.310

要删除固定宽度和/或高度属性的效果而不实际删除这些属性，您可以在 CSS 定义中将它们设置回“自动”：

```
img {
    height: auto !important;
    width: auto !important;
} 
```

我建议只对真正需要图片流畅的 img 标签执行此操作。这可以通过将 id 或 class 添加到 img 标签或任何周围标签来完成。

例如，如果您的流体图像位于具有“fluid_pics”类的包装器 div 中，您可以使用：

```
.fluid_pics img {
    height: auto !important;
    width: auto !important;
} 
```

通常你只需要将高度设置回自动，因为宽度已经被你的框架覆盖为 100%（例如 Twitter Bootstrap）。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-04-06T03:47:52.843

TypoScript 从源代码中删除“宽度”和“高度”属性。TYPO3 CMS 6.1+。

```
tt_content.image.20.stdWrap.parseFunc.nonTypoTagStdWrap.HTMLparser.tags.img.fixAttrib {
width.unset = 1
height.unset = 1
border.unset = 1
}

tt_content.textpic.20.stdWrap.parseFunc.nonTypoTagStdWrap.HTMLparser.tags.img.fixAttrib {
width.unset = 1
height.unset = 1
border.unset = 1
}

lib.parseFunc_RTE.nonTypoTagStdWrap.HTMLparser.tags.img.fixAttrib {
width.unset = 1
height.unset = 1
border.unset = 1
} 
```

tt_news 示例：新闻列表

```
plugin.tt_news.displayList.image.stdWrap.parseFunc.nonTypoTagStdWrap.HTMLparser.tags.img.fixAttrib {
width.unset = 1
height.unset = 1
border.unset = 1
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-06-13T12:22:06.150

如果您的图像`id`分配了一个或另一个唯一属性，您可以轻松地做到这一点：

```
var myImg=document.getElementById('myImage');
myImg && myImg.removeAttribute('height') && myImg.removeAttribute('width'); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-09-14T07:36:28.803

对于 Typo3 6.2 以上，您可以设置自定义图像渲染布局（片段属于 TS 设置）：

```
tt_content.image.20.1 {
    layout {
        mylayout {
            # equals default rendering, except width and height removed
            element = <img src="###SRC###" ###PARAMS### ###ALTPARAMS### ###BORDER### ###SELFCLOSINGTAGSLASH###>
        }
    }
} 
```

启用 css_styled_content 的自定义布局（片段属于 TS 常量）：

```
styles.content.imgtext.layoutKey = mylayout 
```

有关 IMAGE cObject 的详细信息，请参阅[https://docs.typo3.org/typo3cms/TyposcriptReference/ContentObjects/Image/Index.html#cobj-image-layoutkey](https://docs.typo3.org/typo3cms/TyposcriptReference/ContentObjects/Image/Index.html#cobj-image-layoutkey) 。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-10-04T12:51:22.813

使用 TYPOSCRIPT 对旧的 TYPO3 有一个解决方案：

```
stdWrap {
    replacement {
        10 {
            search = /\s+(width|height)="[^"]+"/
            useRegExp = 1
            replace =
        }
    }
} 
```

在渲染图像的地方使用这个 stdWrap-TS。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-04-07T13:51:36.977

它在 6.1 中不起作用：/ 但你可以使用 CSS：

```
img {
    display: block;
    max-width: 100%;
    height: auto;
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-03-11T14:32:26.580

这是一个非常简单的 jQuery 解决方案。我在 wpwizard.net 找到了答案。

这是网址： [http ://wpwizard.net/jquery/remove-img-height-and-width-with-jquery/](http://wpwizard.net/jquery/remove-img-height-and-width-with-jquery/)

这是jQuery：

```
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script type="text/javascript">
jQuery.noConflict();
jQuery(document).ready(function($){

    $('img').each(function(){ 
        $(this).removeAttr('width')
        $(this).removeAttr('height');
    });

});
</script> 
```*

# nhibernate - 我可以在 NHibernates 二级缓存中缓存具有非映射属性的实体吗？

> ID：11014167
> 
> 赞同：0
> 
> 时间：2012-06-13T11:46:26.057
> 
> 标签：nhibernate, caching, active-directory, entity

您好我已经设置了我的 SessionFactory 来缓存实体和查询：

```
private ISessionFactory CreateSessionFactory()
{
    var cfg = new Configuration().Proxy(
        properties => properties.ProxyFactoryFactory<DefaultProxyFactoryFactory>()).DataBaseIntegration(
            properties =>
            {
                properties.Driver<SqlClientDriver>();
                properties.ConnectionStringName = this.namedConnection;
                properties.Dialect<MsSql2005Dialect>();
            }).AddAssembly(this.resourceAssembly).Cache(
                properties =>
                {
                    properties.UseQueryCache = true;
                    properties.Provider<SysCacheProvider>();
                    properties.DefaultExpiration = 3600;
                });
    cfg.AddMapping(this.DomainMapping);

    new SchemaUpdate(cfg).Execute(true, true);
    return cfg.BuildSessionFactory();
} 
```

这是我的用户映射

```
public class UserMapping : EntityMapping<Guid, User>
{
    public UserMapping()
    {
        this.Table("USERS");
        this.Property(
            x => x.CorpId,
            mapper => mapper.Column(
                c =>
                {
                    c.Name("CorporateId");
                    c.UniqueKey("UKUserCorporateId");
                    c.NotNullable(true);
                }));
        this.Set(
            x => x.Desks,
            mapper =>
            {
                mapper.Table("DESKS2USERS");
                mapper.Key(km => km.Column("UserId"));
                mapper.Inverse(false);
                mapper.Cascade(Cascade.All | Cascade.DeleteOrphans | Cascade.Remove);
            },
            rel => rel.ManyToMany(mapper => mapper.Column("DeskId")));
        this.Cache(
            mapper =>
            {
                mapper.Usage(CacheUsage.ReadWrite);
                mapper.Include(CacheInclude.All);
            });
    }
} 
```

我想要做的是获取用户或查询一些用户并将信息添加到域对象并缓存更新的对象。

```
public class User : Entity<Guid>, IUser
{
    public virtual string CorpId { get; set; }

    public virtual ISet<Desk> Desks { get; set; }

    public virtual MailAddress EmailAddress { get; set; }

    public virtual string Name
    {
        get
        {
            return string.Format(CultureInfo.CurrentCulture, "{0}, {1}", this.SurName, this.GivenName);
        }
    }

    public virtual string GivenName { get; set; }

    public virtual string SurName { get; set; }
} 
```

像这样的东西：

```
var users = this.session.Query<User>().Cacheable().ToList();

if (users.Any(user => user.EmailAddress == null))
{
    UserEditor.UpdateThroughActiveDirectoryData(users);
}

return this.View(new UserViewModel { Users = users.OrderBy(entity => entity.Name) }); 
```

或这个：

```
var user = this.session.Get<User>(id);

if (user.EmailAddress == null)
{
    UserEditor.UpdateThroughActiveDirectoryData(user);
}

return this.View(user); 
```

UpdateThroughActiveDirectory 方法有效，但每次我从缓存中获取数据时都会执行，更新的实体不会保留额外的数据。有没有办法将此数据也存储在 nhibernates 二级缓存中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T14:44:33.063

NHibernate 不会在二级缓存中缓存整个实体。它仅缓存映射属性中的状态/数据。你可以在这里阅读更多信息：http: [//ayende.com/blog/3112/nhibernate-and-the-second-level-cache-tips](http://ayende.com/blog/3112/nhibernate-and-the-second-level-cache-tips)

该帖子的评论中有一个有趣的讨论，进一步解释了这一点：

> **Frans Bouma：** 对象需要可序列化，不是吗？当我们谈论多个应用程序域时。我想知道什么更有效：依靠数据库服务器的缓存或使用序列化层来回传输对象。
> 
> **Ayende Rahien：** 不，他们不需要那个。这是因为 NHibernate 不会将实体保存在缓存中。这样做会让你面临竞争条件。NHibernate 单独保存实体数据，实体数据通常由原始数据组成（毕竟这是 DB 可以存储的）。一般来说，命中缓存服务器效率更高，因为它们很容易高度扩展，并且不涉及 I/O。

# java - 从货币代码中检索货币符号

> ID：11014172
> 
> 赞同：2
> 
> 时间：2012-06-13T11:46:47.703
> 
> 标签：java

在我的一个应用程序中，使用了 Web 服务调用，它返回了 20 多种货币，例如

美元、日元、印度卢比、英镑、ESP、EGP等。

现在我需要将每种货币转换为相关的符号。请建议我如何在我的应用程序中实现相同的功能。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T11:49:48.827

尝试

```
Currency.getInstance("GBP").getSymbol(); 
```

它为我打印`£`。

但它可能不会打印 INR、ESP 等的值。使用自定义地图方法更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T11:50:59.247

我会用；

*   像这样的地图`Map<Current, String>`
*   有你自己的货币枚举类型，它有这个硬编码
*   使用从磁盘加载的属性

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T11:54:11.943

您可以使用 Currency 对象的 getSymbol 方法。

使用什么符号取决于所使用的语言环境 请参阅此和此。

```
Locale.setDefault(new Locale("lv","LV"));
Currency c  = Currency.getInstance("EUR");
System.out.println(c.getSymbol()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T11:49:55.070

您可以使用哈希图，其中名称 (USD, JPY, ...) 是键，符号 ($, €, ...) 是值。

# css - SASS：在mixin中从父级继承集合变量

> ID：11014174
> 
> 赞同：2
> 
> 时间：2012-06-13T11:46:48.360
> 
> 标签：css, variables, inheritance, sass

我创建了一个[jsFiddle](http://jsfiddle.net/northproject/Cm7NR/)来演示这个问题。这只是一个例子。

**我在做什么**

假设我正在制作一个灵活的网格。我的 HTML 如下所示：

```
<div>
    <p>a</p>
    <p>b</p>
    <p>c</p>
    <p>d</p>
</div> 
```

四列。我有两个 mixins 和一个名为**$** gutter 的全局变量。在我的 mixin 中，我调用这个变量来添加排水沟并改变宽度。

```
$gutter: 1%;

@mixin col($width){
    float: left;
    width: $width - ($gutter * 2);
    margin: 0 $gutter;
}
@mixin row(){
    width: 100%;
    overflow: hidden;
} 
```

我像这样使用它：

```
div { @include row(); }
p { @include col(25%); } 
```

**我想做的事**

现在假设我想向页面添加第二个不同的网格。我创建了这个 HTML 并给出了每个网格和 ID 来区分它们：

```
<div id="one">
    <p>a</p>
    <p>b</p>
    <p>c</p>
    <p>d</p>
</div>

<div id="two">
    <p>a</p>
    <p>b</p>
    <p>c</p>
    <p>d</p>
</div>​ 
```

*我希望第二个网格具有不同的装订线宽度。或者，或者，没有排水沟。*

```
#one { @include row(); }
#two { @include row($gutter: 0); } 
```

这显然是行不通的。因为列数是可变的，所以我不能将这个 $gutter:0 声明添加到 @include col() 的每个实例中。它打破了 DRY 原则，最终（在复杂的布局中）变得无法维护。

**问题**

如何允许在一个 mixin 中设置的变量过滤到另一个（在子元素上）？我知道我可以简单地这样做：

```
@mixin row(){
    width: 100%;
    overflow: hidden;
    .col { etc etc etc }
} 
```

但是类名可能并不总是*.col*。这有意义吗？**我希望 col() mixin 继承我传递给 row() mixin 的变量。**如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T09:03:43.153

我从 Sófka 分叉了 jsfiddle，并使用 CSS 子选择器 (">") 对其进行了扩展，以定位行中的任何标签。

```
// Inside the row mixin
& > * {
    @include col($columnWidth, $gutter);
} 
```

此外，我将列宽属性添加到 mixin 并设置默认装订线。

```
$defaultGutter: 1% !default; // Make sure the variable is set
@mixin col($width, $gutter: $defaultGutter){
    ...
} 
```

见：http: [//jsfiddle.net/N44LW/12/](http://jsfiddle.net/N44LW/12/)

PS.：我不确定我是否完全理解你的问题，但希望这会有所帮助。

# salesforce - 在 Salesforce 的潜在客户页面布局上隐藏电子邮件

> ID：11014178
> 
> 赞同：0
> 
> 时间：2012-06-13T11:47:14.613
> 
> 标签：salesforce, visualforce, force.com

我正在寻找在潜在客户页面布局上隐藏电子邮件。

我已经将它包含在一个带有 visualforce 页面的部分中，但是 PageLayout 没有检测到它并且仍然需要它在布局上。

有没有办法从 PageLayout 中删除它？

我读过你可以编辑一个选项列表，但没有找到任何可靠的例子。我还阅读了有关字段级别可访问性的信息，但我不认为这是要走的路，因为每个人都是同一个角色的一部分，如果您是所有者，我只会根据您排除细节。我也尝试过 javascript，但由于我的 visualforce 页面加载在 iframe 中，因此我无法访问 iframe 的父文档，以便能够在不以所有者身份查看时隐藏或删除电子邮件中的值。

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T15:58:26.417

尝试使用存储在自定义按钮中的 JavaScript 隐藏该字段。在按钮的 On-Click JavaScript 中，您可以包含将在页面加载时由隐藏电子邮件字段的 jQuery 运行的代码。然后，您也可以隐藏实际按钮。非常黑客的方法，但它应该工作。

这里有一些代码可以放入 On-Click JavaScript 按钮（根据[Daniel Llewellyn 的博客文章](http://iwritecrappycode.wordpress.com/2011/10/05/salesforce-pushing-custom-buttons-to-the-limit-with-jquery-and-apex/) 和[mgsmith 的 force2b 博客文章](http://www.force2b.net/index.php/2009/10/hiding-custom-buttons-on-a-visualforce-page)修改）。希望这能让你快速入门。我没有包含有关如何隐藏电子邮件字段的任何代码，但您说您已经通过 Visualforce 页面尝试过，所以我想我会把这部分留给您。干杯!

```
var interval;
//The main function that does all the work
function appendScript() {
    // Include core jQuery library by injecting it into the DOM
    var script= document.createElement('script');
    script.type= 'text/javascript';
    script.src= 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js';
    head.appendChild(script);

    // It takes a second to load, so put in a delay
    // (we don't want to try and reference the script
    // before it is actually loaded, so we store the interval
    // in a global variable, and set up an interval.
    // this interval dealio. This will keep running 
    // until jQuery has been found to be loaded and then
    //clears the interval so it doesn't keep running.

    interval=self.setInterval(function(){

        //Check to see if jQuery has loaded                           
        if(jQuery) {
            //if jQuery has loaded, clear the interval
            window.clearInterval(interval);

            // Hide the Email field

            // Hide the custom button
            var btnName = 'buttonName';
            try{
                var buttons = parent.document.getElementsByName(btnName);
                for (var i=0; i < buttons.length; i++) {
                    buttons[i].className="btnDisabled ";
                    buttons[i].disabled=true;
                    buttons[i].type='hidden';
                }
            } catch(e) {
                // var ee = e.message || 0; alert('Error: \n\n'+e+'\n'+ee);
             }
        }
    }, 300);    
}

appendScript(); 
```

# javascript - 有没有一种简单的方法可以从您购买的模板中复制“滑块”并在另一个 wordpress 网站中使用？

> ID：11014179
> 
> 赞同：-1
> 
> 时间：2012-06-13T11:47:16.200
> 
> 标签：javascript, wordpress

有没有一种简单的方法可以从您购买的模板中复制“滑块”并在另一个 wordpress 网站中使用？

喜欢这个模板， [http://www.missbee.se/eliteRehab/](http://www.missbee.se/eliteRehab/)

或者有谁知道一个看起来与示例相似的“滑块”插件（带有大文本字段）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T12:41:36.773

是的，这是可能的，它只取决于编码技能。

对于 WP 中的滑块，我建议使用[http://www.woothemes.com/flexslider/](http://www.woothemes.com/flexslider/)或[http://cssglobe.com/post/4004/easy-slider-15-the-easyest-jquery-plugin-for-滑动](http://cssglobe.com/post/4004/easy-slider-15-the-easiest-jquery-plugin-for-sliding)，但对于他们两个，你当然知道一点 wordpress 模板、html、jquery 和 css。将滑块从专业主题移动到自定义新主题的条件也相同。

祝你好运！:)

# android - 在Android下选择具有计算的列时丢失精度

> ID：11014181
> 
> 赞同：3
> 
> 时间：2012-06-13T11:47:27.720
> 
> 标签：android, sql, ormlite

我在数据库中有不同的列。我使用 ormlite 并使用`genericRawResults`. 我的代码是这样的：

```
GenericRawResults<Total> rawResults =
    dao.queryRaw("select items*3 from Items", new RawRowMapper<Total>() {
        public Total mapRow(String[] columnNames,
            String[] resultColumns) throws SQLException {
                   return new Total(new BigDecimal(resultColumns[0]));
        }
        }); 
```

结果是一个丢失小数的数字。为什么？

我尝试使用 cast(columnname as REAL) 但结果是一样的。我能做些什么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T18:53:20.777

如果没有看到 Sqlite 模式并且没有看到`String`.`item*3`

我怀疑这不是[ORMLite](http://ormlite.com/)的问题。我怀疑这是 Sqlite 的限制，因为它使用小精度来进行内部计算。以下是 Sqlite 命令行的示例：

```
select 11312541243231.01*3;
33937623729693.0  // << note the missing .03 
```

我建议您不要*在*查询中执行`*3`，而是在将*其*转换为`BigDecimal`. 我猜是这样的：

```
BigDecimal big = new BigDecimal(resultColumns[0]);
big.multiply(new BigDecimal(3)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T14:55:52.300

我找到了解决办法！！！！！！我像这样将 Real 转换为 Varchar：

`select id, factory, cast( SUM(Round((cast(Round((cast(price as REAL))*(cast((100-d1)/cast(100 as REAL) as REAL)),3) as REAL))* (cast((100-2)/cast(100 as REAL) as REAL)),3)* cast(units as REAL)) as VARCHAR) from Items group by id, factory`

而且我不会丢失小数！！！！

# .net - 在图像上绘制矩形

> ID：11014182
> 
> 赞同：8
> 
> 时间：2012-06-13T11:47:31.533
> 
> 标签：.net, wpf, image

我想在单个[Image上绘制一些](http://msdn.microsoft.com/en-us/library/system.windows.controls.image)[Rectangle](http://msdn.microsoft.com/en-us/library/system.windows.shapes.rectangle)。

例如，我有以下（白色和黑色）船舶配置文件，我想在此配置文件的特定位置添加一些（黄色和红色）矩形：

![在此处输入图像描述](../Images/4929fcb1f8d91c31771f8bd7707fab16.png)

是否可以？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-13T11:52:16.897

很有可能，如果您已经知道要突出显示的区域的 x、y、宽度和高度，您可以将所有控件放入画布中。

您可以在后面的代码中设置矩形的属性，如下所示：

```
Rectangle rectangle = new Rectangle();
rectangle.SetValue(Canvas.LeftProperty, 10);
rectangle.SetValue(Canvas.TopProperty, 10);
rectangle.Width = 1000;
rectangle.Height = 50;
rectangle.Fill = new SolidColorBrush() { Color = Colors.Red, Opacity = 0.75f };

canvas.Children.Add(rectangle); 
```

如果你想在 xaml 中添加它们，你可以这样。

```
<Canvas>
    <Image Source="..."/>
    <Rectangle Canvas.Left="10" Canvas.Top="10" Width="1000" Height="50">
        <Rectangle.Fill>
           <SolidColorBrush Color="Red" Opacity="0.75"/>
        </Rectangle.Fill>
    </Rectangle>                        
</Canvas> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T03:33:28.500

试试这个它也会帮助你。

```
<Window
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
x:Class="Multi_Textbox.Window1"
x:Name="Window"
Title="Window1"
Width="640" Height="480">

<Grid x:Name="LayoutRoot">
    <Image Margin="104,50,75,99" Source="barkship.jpg"/>
    <Rectangle Fill="#FF28B0DE" HorizontalAlignment="Left" Height="17.334" Margin="212,0,0,111.333" Stroke="Black" VerticalAlignment="Bottom" Width="99.667"/>
    <TextBlock HorizontalAlignment="Left" Height="11" Margin="230.667,0,0,115" TextWrapping="Wrap" Text="CHANDRU" VerticalAlignment="Bottom" Width="63.333" Foreground="White"/>
</Grid> 
```

是这样的输出

![结果](../Images/26cae93f382bdfa6017056f19813033d.png)

# c# - 调试会话中断，没有断点

> ID：11014183
> 
> 赞同：0
> 
> 时间：2012-06-13T11:47:33.583
> 
> 标签：c#, debugging, breakpoints, visual-studio-2012, ccr

我有一个大型项目，在不调试时（即使在运行调试版本时）也可以毫无问题地执行。

如果我尝试调试项目，当执行遇到某个 MS CCR 依赖库时，调试器会暂停执行：

![源码拆解](../Images/1216f12ae069b77c766f79f59dbde79b.png)

此时的调用堆栈如下所示：

![堆栈跟踪](../Images/5429677fbe9d80378a73829e71da7982.png)

即使“调试”->“异常...”->“CLR 异常”*抛出* **和** *用户未处理都未*选中，也会发生这种情况。

自从我将项目升级到 .net4.5 并添加了最新版本的(4.0.261.0)后，问题似乎就发生了`Microsoft.Core.Ccr.dll`。`Microsoft.Ccr.Core.TaskExecutionWorker.ExecuteTaskHelper(Microsoft.Ccr.Core.ITask currentTask) + 0x94 bytes``Microsoft.Ccr.Core`

这给我的调试工作带来了很大的不便，因为遇到这些不存在的断点意味着我的项目的其他与时间相关的部分几乎不可能正确调试。

什么可能导致这种行为，是否有任何我错过的选项可能允许 VS 忽略该问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T12:13:07.847

在对[dotPeek 进行](http://www.jetbrains.com/decompiler/)反编译后，`TaskExecutionWorker.ExecuteTaskHelper`我看到以下内容：

```
 if (!CausalityThreadContext.IsEmpty(threadCausalities) && 
         CausalityThreadContext.RequiresDebugBreak(threadCausalities))
      Debugger.Break(); 
```

我可以看到他们为什么这样做（我在某处有未处理的异常），但现在它们已被 CCR 吞噬，而我在调试器中看到的信息使这个代码定义的断点变得毫无意义。

编辑

看来我已经`BreakOnReceive = true`在 Dispatcher 中添加了带有属性的因果关系。因此，这是预期的行为。我看不出此设置有任何可能的用途，因为异常已被吞噬。当然，这里更好的决定是抛出异常而不是破坏调试器。嗯……

# tridion - 内容交付错误 - Smarttarget

> ID：11014186
> 
> 赞同：1
> 
> 时间：2012-06-13T11:47:39.280
> 
> 标签：tridion, tridion-2011, tridion-content-delivery, smarttarget

我最近使用 Tridion 2011 SP1（带有修补程序 SP1）安装并配置了 Smarttarget 2011。

1.  我能够成功启动 QServer 和 Loaders。
2.  我的内容交付是按照手册配置的 .NET Web 应用程序。
3.  我最初尝试从站点发布现有页面，稍后我将对其进行修改以使其启用 Smarttarget。
4.  在发布页面时，我在部署期间收到错误消息。

    这是我在部署程序日志中看到的部分错误。

> 2012-06-13 16:44:29,781 信息模块 - 未配置 TransformProcessor，在部署模块 com.tridion.deployer.modules.SchemaDeploy 之前不会转换文件 2012-06-13 16:44:29,781 调试 TCDLEngine - TCDL：使用内置标签注册表 2012-06-13 16:44:29,781 调试 TCDLEngine - 加载 TCDL 标签包 com/tridion/smarttarget/tcdl/tagbundle.xml 2012-06-13 16:44:29,781 错误 ModuleFactory - 无法创建模块com.tridion.util.TridionReflectionException：目标类的构造函数抛出了异常，null，在com.tridion.util.ReflectionUtil.loadClassInstanceWithTypes(ReflectionUtil.java:74) [cd_core.jar:na] at com.tridion处为null .deployer.ModuleFactory.createModule(ModuleFactory.java:109) ~[cd_deployer.jar:na] at com.tridion.deployer.Processor.configure(Processor.java:81) [cd_deployer.jar:na] 在 com.tridion.deployer.Processor.(Processor.java:65) [cd_deployer.jar:na] 在 sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) [na:1.6.0_11] 在 sun.reflect.NativeConstructorAccessorImpl .newInstance(Unknown Source) [na:1.6.0_11] at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source) [na:1.6.0_11] at java.lang.reflect.Constructor.newInstance(Unknown Source) [na:1.6 .0_11] 在 com.tridion.util.ReflectionUtil.loadClassInstanceWithTypes(ReflectionUtil.java:63) [cd_core.jar:na] 在 com.tridion.util.ReflectionUtil.loadClassInstance(ReflectionUtil.java:106) [cd_core.jar:na ] 在 com.tridion.deployer.ProcessorFactory.createProcessor(ProcessorFactory.java:130) [cd_deployer.jar:na] 在 com.tridion.deployer.ProcessorFactory.createProcessors(ProcessorFactory.java:114) [cd_deployer.jar:na] 在 com.tridion.deployer.workers.ProcessorWorker.doWork(ProcessorWorker.java:61) [cd_deployer.jar:na] 在 com.tridion.deployer.phases.ProcessingPhase.execute(ProcessingPhase. java:73) [cd_deployer.jar:na] at com.tridion.deployer.phases.DeployPipelineExecutor.runMainExecutePhase(DeployPipelineExecutor.java:186) [cd_deployer.jar:na] at com.tridion.deployer.phases.DeployPipelineExecutor.doExecute( DeployPipelineExecutor.java:97) [cd_deployer.jar:na] 在 com.tridion.deployer.phases.DeployPipelineExecutor.execute(DeployPipelineExecutor.java:61) [cd_deployer.jar:na] 在 com.tridion.deployer.TransactionManager.handleDeployPackage( TransactionManager.java:80) [cd_deployer.jar:na] 在 com.tridion.deployer.queue.QueueLocationHandler$1.run(QueueLocationHandler.java:176) [cd_deployer.jar:na] 在 java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source) [na:1.6.0_11] 在 java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source) [na:1.6.0_11] 在 java .util.concurrent.FutureTask.run(Unknown Source) [na:1.6.0_11] at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source) [na:1.6.0_11] at java.util.concurrent.ThreadPoolExecutor $Worker.run(Unknown Source) [na:1.6.0_11] at java.lang.Thread.run(Unknown Source) [na:1.6.0_11] 2012-06-13 16:44:29,781 错误 ProcessorFactory - 无法加载Processor com.tridion.util.TridionReflectionException: 目标类的构造函数抛出了异常，null，null at com.tridion.util.ReflectionUtil.loadClassInstanceWithTypes(ReflectionUtil.java:74) ~[cd_core.jar:na] at com .tridion.util.ReflectionUtil。loadClassInstance(ReflectionUtil.java:106) ~[cd_core.jar:na] at com.tridion.deployer.ProcessorFactory.createProcessor(ProcessorFactory.java:130) [cd_deployer.jar:na] at com.tridion.deployer.ProcessorFactory.createProcessors (ProcessorFactory.java:114) [cd_deployer.jar:na] 在 com.tridion.deployer.workers.ProcessorWorker.doWork(ProcessorWorker.java:61) [cd_deployer.jar:na] 在 com.tridion.deployer.phases.ProcessingPhase .execute(ProcessingPhase.java:73) [cd_deployer.jar:na] 在 com.tridion.deployer.phases.DeployPipelineExecutor.runMainExecutePhase(DeployPipelineExecutor.java:186) [cd_deployer.jar:na] 在 com.tridion.deployer.phases .DeployPipelineExecutor.doExecute(DeployPipelineExecutor.java:97) [cd_deployer.jar:na] at com.tridion.deployer.phases.DeployPipelineExecutor.execute(DeployPipelineExecutor.java:61) [cd_deployer.jar:na] 在 com.tridion.deployer.TransactionManager.handleDeployPackage(TransactionManager.java:80) [cd_deployer.jar:na] 在 com.tridion.deployer.queue.QueueLocationHandler$1.run(QueueLocationHandler.java :176) [cd_deployer.jar:na] at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source) [na:1.6.0_11] at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source) [ na:1.6.0_11] 在 java.util.concurrent.FutureTask.run(Unknown Source) [na:1.6.0_11] at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source) [na:1.6.0_11]在 java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) [na:1.6.0_11] at java.lang.Thread.run(Unknown Source) [na:1.6.0_11] 2012-06-13 16:44 :29,781 错误 ProcessorWorker - 无法配置处理器 com.tridion。configuration.ConfigurationException: Unable to load Processor，目标类的构造函数抛出异常，null，null，目标类的构造函数抛出异常，null，null at com.tridion.deployer.ProcessorFactory.createProcessor(ProcessorFactory .java:133) ~[cd_deployer.jar:na] at com.tridion.deployer.ProcessorFactory.createProcessors(ProcessorFactory.java:114) ~[cd_deployer.jar:na] at com.tridion.deployer.workers.ProcessorWorker.doWork (ProcessorWorker.java:61) ~[cd_deployer.jar:na] 在 com.tridion.deployer.phases.ProcessingPhase.execute(ProcessingPhase.java:73) [cd_deployer.jar:na] 在 com.tridion.deployer.phases。 DeployPipelineExecutor.runMainExecutePhase(DeployPipelineExecutor.java:186) [cd_deployer.jar:na] 在 com.tridion.deployer.phases.DeployPipelineExecutor。doExecute(DeployPipelineExecutor.java:97) [cd_deployer.jar:na] 在 com.tridion.deployer.phases.DeployPipelineExecutor.execute(DeployPipelineExecutor.java:61) [cd_deployer.jar:na] 在 com.tridion.deployer.TransactionManager。 handleDeployPackage(TransactionManager.java:80) [cd_deployer.jar:na] at com.tridion.deployer.queue.QueueLocationHandler$1.run(QueueLocationHandler.java:176) [cd_deployer.jar:na] at java.util.concurrent.Executors $RunnableAdapter.call(Unknown Source) [na:1.6.0_11] at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source) [na:1.6.0_11] at java.util.concurrent.FutureTask.run(Unknown来源）[na:1.6.0_11] 在 java.util.concurrent.ThreadPoolExecutor$Worker.runTask（未知来源）[na:1.6.0_11] 在 java.util.concurrent.ThreadPoolExecutor$Worker.run（未知来源）[na ：1.6。0_11] 在 java.lang.Thread.run（未知来源）[na:1.6.0_11]

更新了部署器配置。

```
<Processors> 
<!-- A Processor is triggered by the Deployer to process an incoming
           TransportPackage based on the 'Action' command in the
           ProcessorInstructions. The default Processor triggers modules
           sequentially as they are defined in a Processor section. The 'Class'
           attribute defines the Processor class that will be used for processing an action.
           'Phase' attribute is optional and it defines in which processing phase this processor is active. 'Phase'
           attribute can have following values: pre-processing, processing, post-processing, pre-transaction and post-transaction-->  
<!-- <Processor Action="Deploy" Class="com.tridion.deployer.Processor" Phase="post-transaction"> -->  
<Processor Action="Deploy" Class="com.tridion.deployer.Processor"> 
  <!-- A Module is triggered by a Processor to process incoming instructions.
                The 'Type' attribute needs to be unique within a Processor and serves
                as a symbolic identifier. The 'Class' attribute defines the
                implementation used for any type of Module. Replace or add modules to
                implement custom Deployer behavior. -->  
  <Module Type="SchemaDeploy" Class="com.tridion.deployer.modules.SchemaDeploy"/>  
  <Module Type="PageDeploy" Class="com.tridion.deployer.modules.PageDeploy"> 
    <!-- The transformer enables the TCDL Engine -->  
    <Transformer Class="com.tridion.deployer.TCDLTransformer"/> 
  </Module>  
  <Module Type="BinaryDeploy" Class="com.tridion.deployer.modules.BinaryDeploy"/>  
  <Module Type="ComponentDeploy" Class="com.tridion.deployer.modules.ComponentDeploy"/>  
  <Module Type="TemplateDeploy" Class="com.tridion.deployer.modules.TemplateDeploy"/>  
  <Module Type="PublicationDeploy" Class="com.tridion.deployer.modules.PublicationDeploy"/>  
  <!-- This module enables deployment of taxonomies -->  
  <Module Type="TaxonomyDeploy" Class="com.tridion.deployer.modules.TaxonomyDeploy"/>  
  <Module Type="ComponentPresentationDeploy" Class="com.tridion.deployer.modules.ComponentPresentationDeploy"> 
    <!-- The transformer enables the TCDL Engine -->  
    <Transformer Class="com.tridion.deployer.TCDLTransformer"/> 
  </Module>  
  <!-- This module enables deployment of structure groups -->  
  <Module Type="StructureGroupDeploy" Class="com.tridion.deployer.modules.StructureGroupDeploy"/> 
</Processor>  
<Processor Action="Undeploy" Class="com.tridion.deployer.Processor"> 
  <Module Type="PageUndeploy" Class="com.tridion.deployer.modules.PageUndeploy"/>  
  <Module Type="ComponentPresentationUndeploy" Class="com.tridion.deployer.modules.ComponentPresentationUndeploy"/>  
  <!-- This module enables the undeploy of taxonomies -->  
  <Module Type="TaxonomyUndeploy" Class="com.tridion.deployer.modules.TaxonomyUndeploy"/>  
  <!-- This module enables the undeploy of structure groups -->  
  <Module Type="StructureGroupUndeploy" Class="com.tridion.deployer.modules.StructureGroupUndeploy"/> 
</Processor>  
<Processor Action="Deploy" Class="com.tridion.deployer.Processor" Phase="post-transaction">
  <Module Type="SmartTargetDeploy" Class="com.tridion.smarttarget.deployer.FredhopperDeployerModule">
    <Transformer Class="com.tridion.deployer.TCDLTransformer"/>
  </Module>
</Processor>
<Processor Action="Undeploy" Class="com.tridion.deployer.Processor" Phase="post-transaction">
  <Module Type="SmartTargetUndeploy" Class="com.tridion.smarttarget.deployer.FredhopperUndeployModule"/>
</Processor> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T06:55:42.717

Bukubapi 解释说这是一个缺少 SmartTarget jar 的特定案例。以下是一些额外的安装细节和步骤，它们对我最近的一些 SmartTarget 安装有所帮助。

安装 SmartTarget SP1 for Content Delivery`Install SDL SmartTarget 2011 SP2.bat`提供 3 个选项：

*   Java 服务器页面 (JSP)
*   活动服务器页面 (ASP.NET)
*   复制文件（用于手册）

此外，它还允许您选择`Webapp root path`、`Deployer config location`和 32 与 64 位选项。

通过选择更新部署程序的选项，它更新了以下内容（此特定设置适用于带有 ASP.NET 的 Windows Server 2008 R2 上的 httpupload 站点）。

*   %TRIDION_HOME%\config\ 中的一些 .xml
*   %TRIDION_HOME%\lib\ 中的一些 jar
*   dll、jar、卸载文件和 .log 文件

*我可能不应该选择部署程序更新，因为我使用的是 httpupload。*

由于 Tridion 内容交付错误（除了代码）通常涉及 dll、jar 或配置，因此通过执行以下操作（对于 SmartTarget 或任何类型的 CD 安装）了解发生了什么变化是有帮助的。

*   如果可以，请跳过安装程序（对 Nuno 的手动安装偏好 +1）
*   **备份您的原始站点或在*副本上应用安装程序***
*   **使用差异工具检查差异**

`dir/l/b > files.txt`在`cmd`提示符中是另一种快速而肮脏的方法来解决 CD jar、dll 或配置问题。

# c# - 从 HTML 源下载并保存图像

> ID：11014189
> 
> 赞同：2
> 
> 时间：2012-06-13T11:47:53.173
> 
> 标签：c#, asp.net

在我们的应用程序中，基于一些输入数据，将呈现图像。图片是一些图表。作为我们测试自动化的一部分，我需要下载这些图表。

我只有图像源网址。如何从源下载图像并将其保存到磁盘。

我尝试使用不同的方法并能够下载文件。但是当我尝试打开文件时，收到一条消息说“不是有效的位图文件，或者它的格式目前不受支持。”

这是我的html

```
<div id="chart">
    <img id="c_12" src="Bonus/ModelChartImage?keys%5B0%5D=UKIrelandEBIT&values%5B0%5D=100&privacyModeServer=False&modelId=Bonus" alt="" usemap="#c_12ImageMap" style="height:300px;width:450px;border-width:0px;" />
<map name="c_12ImageMap" id="c_12ImageMap">

    <area shape="rect" coords="255,265,357,266" class="area-map-section" share="Core Bonus" alt="" />
    <area shape="rect" coords="128,43,229,265" class="area-map-section" share="Core Bonus" alt="" />
</map>    
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T15:10:29.577

找到了答案。我们必须根据您的请求从网站设置 cookie 容器。

```
public static Stream DownloadImageData(CookieContainer cookies, string siteURL)
{
    HttpWebRequest httpRequest = null;
    HttpWebResponse httpResponse = null;

    httpRequest = (HttpWebRequest)WebRequest.Create(siteURL);

    httpRequest.CookieContainer = cookies;
    httpRequest.AllowAutoRedirect = true;

    try
    {
        httpResponse = (HttpWebResponse)httpRequest.GetResponse();
        if (httpResponse.StatusCode == HttpStatusCode.OK)
        {
            var httpContentData = httpResponse.GetResponseStream();

            return httpContentData;
        }
        return null;
    }
    catch (WebException we)
    {
        return null;
    }
    finally
    {
        if (httpResponse != null)
        {
            httpResponse.Close();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T12:14:09.010

从网站下载图像有很多方法（WebClient 类、HttpWebRequest、HttpClient 类，顺便说一句，其中新的[HttpClient](http://nuget.org/packages/HttpClient)是最简单的方法）。

这是类 HttpClient 的示例：

```
HttpClient httpClient = new HttpClient();
Task<Stream> streamAsync = httpClient.GetStreamAsync("http://www.simedarby.com.au/images/SD.Corp.3D.4C.Pos.jpg");

Stream result = streamAsync.Result;
using (Stream fileStream = File.Create("downloaded.jpg"))
{
    result.CopyTo(fileStream);
} 
```

# php - Laravel 模型渴望加载和订购

> ID：11014190
> 
> 赞同：8
> 
> 时间：2012-06-13T11:47:55.217
> 
> 标签：php, laravel, laravel-3

我是 Laravel 的新手，我认为购买 Dayle Rees 的 Codehappy 电子书很酷。

我刚刚完成了博客教程，并思考了一下他是如何从 Post 模型中检索帖子的。来自 .net (ASP.NET MVC) 背景，我认为在急切加载作者的同时订购帖子很重要。

他渴望像这样加载模型。

```
$posts = Post::with('author')->get(); 
```

我的问题是在哪里可以使用“order_by”子句？order_by 本身在我使用时起作用：

```
$posts = Post::order_by('id', 'desc')->get(); 
```

问候乌鸦

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-13T12:35:58.660

我设法通过以下方式解决它：

```
$posts = Post::with('author')->order_by('id', 'desc')->get(); 
```

# javascript - setinterval/settimeout 的问题

> ID：11014191
> 
> 赞同：0
> 
> 时间：2012-06-13T11:47:57.220
> 
> 标签：javascript, dom-events, dhtml

我试图在 Javascript 中使用`settimeout`.

```
function ThreadManager(timer){
var threadID=1;
if(timer)
    this.frequency=timer;
else
    this.frequency=10;
}
ThreadManager.prototype.frequency;
ThreadManager.prototype.process;
ThreadManager.prototype.kill;
ThreadManager.prototype.add=function(thread)
{
        this.process=new Process(thread,this.threadID++);

}
ThreadManager.prototype.run=function(parent)
{
    if(!parent)
        parent=this;
    try{
        var st=parent.process.getNextStatement();
        if(st==null){
            if(parent.kill)
                clearInterval(parent.kill)
            return;
        }
        else
            eval(st.trim());
    }
    catch(err)
    {
        console.error(err);
    }
    if(st!=null&&!parent.kill)
    {
        parent.kill=setInterval(function(){parent.run(parent)},parent.frequency);
    }
}
function Process(fun,id)
{
    statements=getStatements(fun);
    var threadID=id;
    function getStatements(fun)
    {
        if(!fun)
        {
            return statements;
        }
        var functionString=(""+fun).trim();
        var start=functionString.indexOf("{");
        functionString=functionString.substring(start,functionString.length-1);
        var regx=new RegExp("[\n;]");
        return functionString.split(regx);
    }

}
Process.prototype.statements;
Process.prototype.getNextStatement=function()
{
        var cursor=statements.pop();;
        while(cursor==null||cursor==""||cursor=='}'||cursor=="{")
            cursor=statements.pop();
        return cursor;
}
function write(text)
{
    doc=document.getElementById("note");
    note.innerHTML+=text+"<br\>"
}
function f1()
{
    write("a");
    write("a");
    write("a");
}
function f2()
{
    write("b");
    write("b");
    write("b");
    write("b");
}
function test()
{
    write("hii");
    var thread=new ThreadManager(500);
    thread.add(f1);
    thread.run();
    var thread2=new ThreadManager(500);
    thread2.add(f2);
    thread2.run()

} 
```

该函数的入口点`test()`将从`onload`具有 id 为“note”的 div 的 html 文件的正文中调用。我希望得到像`a b a b a b b`. 但是 Mozilla 提供 `a b b b`（然后挂起），而 Chrome 提供`b b b b`（并挂起）。任何人都可以找出我的代码的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T23:29:04.910

`parent.run(parent)`是循环引用，会导致栈溢出。定时器是[异步](http://ejohn.org/blog/how-javascript-timers-work/)的，不会按顺序运行，除非为此目的构建了一个[队列。](https://github.com/caolan/async#queueworker-concurrency)

# c++ - 朋友/用自己的班级重载'<'

> ID：11014197
> 
> 赞同：-3
> 
> 时间：2012-06-13T11:48:17.850
> 
> 标签：c++, operator-overloading

> **可能重复：**
> [与自己的班级交友“>>”](https://stackoverflow.com/questions/11012630/friending-with-own-class)

我正在尝试将 '<' 运算符与我自己的类交朋友，但它没有注意到我的语法错误，但我得到了以下编译错误：

错误：

```
**** Internal Builder is used for build               ****
g++ -O0 -g3 -Wall -c -fmessage-length=0 -o main.o ..\main.cpp
In file included from c:\mingw\bin\../lib/gcc/mingw32/4.6.1/include/c++/algorithm:63:0,
                 from ..\main.cpp:8:
c:\mingw\bin\../lib/gcc/mingw32/4.6.1/include/c++/bits/stl_algo.h: In function '_RandomAccessIterator std::__unguarded_partition(_RandomAccessIterator, _RandomAccessIterator, const _Tp&) [with _RandomAccessIterator = __gnu_cxx::__normal_iterator<RAngle*, std::vector<RAngle> >, _Tp = RAngle]':
c:\mingw\bin\../lib/gcc/mingw32/4.6.1/include/c++/bits/stl_algo.h:2253:70:   instantiated from '_RandomAccessIterator std::__unguarded_partition_pivot(_RandomAccessIterator, _RandomAccessIterator) [with _RandomAccessIterator = __gnu_cxx::__normal_iterator<RAngle*, std::vector<RAngle> >]'
c:\mingw\bin\../lib/gcc/mingw32/4.6.1/include/c++/bits/stl_algo.h:2284:54:   instantiated from 'void std::__introsort_loop(_RandomAccessIterator, _RandomAccessIterator, _Size) [with _RandomAccessIterator = __gnu_cxx::__normal_iterator<RAngle*, std::vector<RAngle> >, _Size = int]'
c:\mingw\bin\../lib/gcc/mingw32/4.6.1/include/c++/bits/stl_algo.h:5330:4:   instantiated from 'void std::sort(_RAIter, _RAIter) [with _RAIter = __gnu_cxx::__normal_iterator<RAngle*, std::vector<RAngle> >]'
..\main.cpp:13:24:   instantiated from here
c:\mingw\bin\../lib/gcc/mingw32/4.6.1/include/c++/bits/stl_algo.h:2215:4: error: passing 'const RAngle' as 'this' argument of 'bool RAngle::operator<(RAngle)' discards qualifiers [-fpermissive] 
```

类和重载函数：

```
class RAngle
{
public:
    int x,y,l; 
    int solution,prec;
    RAngle(){
    }

    RAngle(int i,int j,int k){
        x=i,y=j,l=k;
    }

    bool operator<(const RAngle rhs)
    {
        if(l < rhs.l){
            return true;
        }
    return 0;
    }
}; 
```

是否出现错误（main.cpp）：

```
void descrSort(vector <RAngle> &l){
    sort(l.begin(),l.end());
    reverse(l.begin(),l.end());

    for(unsigned i=0; i<l.size();i++){
        cout<<l[i]<<endl;
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T11:55:43.050

这不能被添加到你关于这个主题的最后一个问题中吗？

```
bool operator<(const RAngle rhs) 
```

应该

```
bool operator<(const RAngle& rhs) const 
```

这应该修复错误。将不修改状态的方法标记为 是一个好习惯`const`。

# c - c语言和指针的一些疑惑

> ID：11014203
> 
> 赞同：1
> 
> 时间：2012-06-13T11:48:46.487
> 
> 标签：c, pointers

```
#include<stdio.h>
#include<stdlib.h>
char* re()
{
    char *p = "hello";
    return p;      
}
int main()
{
    char* tem = re();
    printf("%s", tem);
    return 0;
} 
```

我的编译器是 Dev-C++。我认为当're'的功能完成时，'p'的指针将被删除，'p'指向的堆栈空间也将被删除。所以'tem'的指针不能访问'p'指向的栈空间。在我看来，这段代码会出现一些错误。但为什么不呢？

这个问题让我扭曲了很长时间。如果你能告诉我原因，我会感激你的好心。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T11:51:45.330

`p`不指向堆栈空间。它指向字符串字面量`"hello"`。由于保证字符串文字在整个程序中都有效，因此您的程序是可以的。

（我不了解 Dev-C++，但在大多数编译器中，字符串文字在程序加载时分配在一些只读内存中，并一直留在那里直到它结束）

编辑：请注意，即使字符串在堆栈上，并且代码确实存在错误，语言保证中的任何内容都不会起作用。无效内存可以（但不是必须）仍然包含它在无效之前包含的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T12:01:33.547

字符串“hello”不是堆栈分配的（但`char *p`指针是）。
它位于“数据段”中，因为它是一个常量值（只读存储器）。
来自 C 常见问题解答：[http ://c-faq.com/decl/strlitinit.html](http://c-faq.com/decl/strlitinit.html)

# actionscript-3 - 在手动拖放中将 ItemRenderer 列为 Draginitiator

> ID：11014208
> 
> 赞同：0
> 
> 时间：2012-06-13T11:49:06.960
> 
> 标签：actionscript-3, apache-flex, drag-and-drop, flex4

在实现手动拖放功能时，我正在尝试将火花列表 ItemRenderer 添加为 DragInitiator。下面的示例将整个列表作为一个 dragInitiator。问题是在这种情况下如何使用 Itemrenderer？

```
protected function myList_dragStartHandler(event:DragEvent):void
{
    var dragInitiator:List = event.currentTarget as List;
    var selectedQuery:Object = List(event.dragInitiator).selectedItem;
    var ds:DragSource = new DragSource();
    ds.addData(selectedQuery, "query");
    DragManager.doDrag(dragInitiator, ds, event);
}

<s:List id="myList" y="10" height="273" dataProvider="{sqList}" labelField="desc" itemRenderer="SqItemRenderer"
    dragEnabled="true" dragStart="myList_dragStartHandler(event)"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T07:10:52.303

解决了为我的 itemrenderer 设置 mouseMove 处理程序的问题。

```
override public function set data(value:Object):void
{
     if (value != null)
     {
        super.data = value; 
     }
}

protected function itemrenderer1_mouseMoveHandler(event:MouseEvent):void
{
    var dragInitiator:IUIComponent = event.currentTarget as IUIComponent;
    var ds:DragSource = new DragSource();
    ds.addData(this.data, "foo");
    DragManager.doDrag(dragInitiator, ds, event);
} 
```

# java - 让 HtmlUnit 在 Android 下运行

> ID：11014212
> 
> 赞同：3
> 
> 时间：2012-06-13T11:49:20.767
> 
> 标签：java, android, htmlunit

我想知道是否有人能够让 HtmlUnit 在 Android 下运行？

我有一个使用 Jsoup 抓取的网站（效果很好）。但是，其中一个部分包含超过 2 页。该站点使用 ASP.NET，并且他们使用 Javascript 回发作为指向下一页的链接。因此，我需要以某种方式执行该 Javascript 来获取下一页的内容。这就是我尝试 HtmlUnit 的地方。

以下代码在 Java 上完美运行：

```
WebClient webClient = new WebClient();
webClient.setJavaScriptEnabled(true);
HtmlPage page = null;
webClient.setThrowExceptionOnFailingStatusCode(false);
webClient.setThrowExceptionOnScriptError(false);

            try {
                page = webClient.getPage(URLOne.toString());
            } catch (FailingHttpStatusCodeException e1) {
                e1.printStackTrace();
            } catch (MalformedURLException e1) {
                e1.printStackTrace();
            } catch (IOException e1) {
                e1.printStackTrace();
            }

HtmlAnchor anchor = (HtmlAnchor) page.getAnchorByHref("javascript:__doPostBack('lb_next','')");

            try {
                page = (HtmlPage) anchor.click();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

webClient.closeAllWindows();

Document doc1 = Jsoup.parse(page.asXml()); 
```

当我在 Android 中设置必要的库时，我必须删除：xalan、xerces 和 xml-apis（[Android 上的 HtmlUnit](https://stackoverflow.com/questions/4882280/htmlunit-on-android)）。如果我保留它们，我会转换为 Dalvik 错误。

没有它们，应用程序将在 Android 中运行，但是当涉及到需要 HtmlUnit 的部分时，我在 logcat 中收到以下几个错误：

```
Could not find method org.apache.http.conn.scheme.Scheme.<init>, referenced from method com.gargoylesoftware.htmlunit.HttpWebConnection.createHttpClient
Could not find method org.w3c.dom.css.CSSStyleDeclaration.getLength, referenced from method com.gargoylesoftware.htmlunit.javascript.host.css.ComputedCSSStyleDeclaration.applyStyleFromSelector
VFY: unable to find class referenced in signature (Lorg/w3c/dom/css/CSSStyleSheet;
VFY: unable to find class referenced in signature (Lorg/w3c/dom/css/CSSStyleDeclaration; 
```

然后应用力关闭。这个问题与此类似：[How do I get HtmlUnit to work under Android?](https://stackoverflow.com/questions/8017874/how-do-i-get-htmlunit-to-work-under-android) 和[WebClient 的 HtmlUnit Android 问题](https://stackoverflow.com/questions/7266160/htmlunit-android-problem-with-webclient)

我使用 HtmlUnit 的唯一原因是能够在该页面上运行 Javascript。我愿意接受任何可能让我做类似事情的替代方案。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-20T16:50:34.140

不要使用 htmlUnit。

你会认为你只需要几个核心罐子。不，您可能需要所有这些，否则您可能会遇到一些未找到的类错误。

看看在运行 Eclipse 之前必须加载多少个 jar！一共21个罐子，超过10mb！请记住，您还可以为 Android Market 打包最多 50mb。它只会减慢 Eclipse 的速度，并且您可能必须在调试时增加内存。

改用 Jsoup！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-19T12:34:31.997

HtmlUnit（使用HttpClient）和部分集成在android jdk中的HttpClient版本之间存在类版本冲突。

要解决此问题，您可以使用[https://github.com/HtmlUnit/htmlunit-android](https://github.com/HtmlUnit/htmlunit-android)项目中的分发。

请尝试并报告任何问题。

# c++ - 基于 X.XX 版内核构建的 C++ Linux 应用程序是否可以在早期版本上运行？

> ID：11014215
> 
> 赞同：1
> 
> 时间：2012-06-13T11:49:31.040
> 
> 标签：c++, linux, ubuntu

这个问题可能看起来非常明显，我意识到我正在为大量的反对票投反对票，但我对 Linux 开发人员非常陌生，并且只研究了一段时间。

我一直在用 C++ 在 ubuntu 12.04（内核 3.2.0）上编写应用程序，然后通过 scp 将其复制到另一台设备上的 ubuntu 8.04（内核 2.6.30）安装。我一直注意到一些我根本无法解释的非常奇怪的行为。我天真地假设我可以在以前的版本上运行这个可执行文件，但我开始意识到事实可能并非如此。将来我必须确保我构建应用程序的 Linux 版本与它将在现场运行的版本相同吗？还是我必须直接在将要运行的设备上直接从源代码构建应用程序？？？我对 Linux 开发人员非常陌生，但对 C++ 并不陌生，所以我意识到这个问题可能看起来很简单，但这是我在书籍/教程等中根本没有看到的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T11:53:09.743

大多数时候，阻止你的不是内核，而是 glibc。

glibc 是向后兼容的，这意味着编译和链接到旧版本的程序将在运行时与新版本完全相同。反之则不兼容。

最好的当然是建立在你想要运行它的发行版上。如果您不能这样做，请在具有最旧 glibc 安装的那个上构建。

构建和链接到比系统 glibc 更旧的 glibc 也非常困难，安装/构建 glibc 往往会使您的系统更加混乱，超出其价值。使用旧 Linux 设置 VM，然后改用它。

# php - 列出用户的电子邮件获取

> ID：11014217
> 
> 赞同：2
> 
> 时间：2012-06-13T11:49:32.873
> 
> 标签：php, email, gmail

我正在获取我`INBOX`在 gmail 的电子邮件。我只想获取我将提供的那些 ID 的电子邮件。我不明白如何实现这一点。

当我尝试这样做时，`imap_search`我没有取得任何成功，就像 -

```
$emails = imap_search($inbox,'rajeev@gmail.com'); 
```

但它给了我收件箱的所有电子邮件。

有什么建议可以实现我想要的吗？

我的代码是 -

```
function connect_mail(){

    $hostname = '{imap.gmail.com:993/imap/ssl}INBOX';
    $username = '***@gmail.com';
    $password = 'password'; 
    $inbox = imap_open($hostname,$username,$password) or die(t('Cannot connect to Gmail: ' . imap_last_error()));   
    $emails = imap_search($inbox,'UNREAD');     
    $Msgcount = count($emails); 
        for ($x = 1; $x <= $Msgcount; $x++)         
        {   
            $overview = imap_fetch_overview($inbox, $x);            
            $title = $overview[0]->subject;
                        $struct = imap_fetchstructure($inbox,$x);
            $contentParts = count($struct->parts);
            if ($contentParts >= 2) {
                for ($i=2;$i<=$contentParts;$i++) {
                    $att[$i-2] = imap_bodystruct($inbox,$x,$i);
                }
                for ($k=0;$k<sizeof($att);$k++) {
                    if ($att[$k]->parameters[0]->value == "us-ascii" || $att[$k]->parameters[0]->value    == "US-ASCII") {
                        if ($att[$k]->parameters[1]->value != "") {
                            $selectBoxDisplay[$k] = $att[$k]->parameters[1]->value;
                        }
                    } 
                    elseif ($att[$k]->parameters[0]->value != "iso-8859-1" &&    $att[$k]->parameters[0]->value != "ISO-8859-1") {
                        $selectBoxDisplay[$k] = $att[$k]->parameters[0]->value;
                    }
                }
            }

            if (sizeof($selectBoxDisplay) > 0) {
                echo "<select name=\"attachments\" size=\"3\" class=\"tblContent\"    onChange=\"handleFile(this.value)\" style=\"width:170;\">";
                for ($j=0;$j<sizeof($selectBoxDisplay);$j++) {
                    $filename = $selectBoxDisplay[$j];
                    echo "\n<option value=\"$j\">". $selectBoxDisplay[$j]    ."</option>";

                }
                echo "</select>";
             }
            $strFileName = $att[$file]->parameters[0]->value;
            $strFileType = strrev(substr(strrev($filename),0,4));
            $fileContent = imap_fetchbody($inbox, $x, $file+2);
            $ContentType = "application/octet-stream";

            list($file_first_name, $extension) = explode('. ', $filename);

            if ($extension == ".jpg" || $extension == "jpeg" || $extension == ".JPG")
                $ContentType = "image/jpeg";
            if ($extension == ".doc")
                $ContentType = "application/msword";
            header ("Content-Type: $ContentType"); 
            header ("Content-Disposition: attachment; filename=$strFileName; size=$fileSize;"); 

            if (substr($ContentType,0,4) == "text") {
                echo imap_qprint($fileContent);
            } 
            else {
                echo base64_decode($fileContent);
            }           
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T12:15:56.020

我看到您想搜索来自某些未读用户的电子邮件。在你的试试这个[`imap_search()`](http://php.net/manual/en/function.imap-search.php)：

```
$emails = imap_search ( $mailbox, 'FROM "user@email.com" UNSEEN' ); 
```

上面的代码将循环查找来自`user@email.com`具有`UNSEEN`标志的用户的电子邮件。

**更新，基于评论聊天**

就在你这样做之前：

```
for ($x = 1; $x <= $Msgcount; $x++)         
{
    //long process here
} 
```

你用另一个检查来包装它：

```
$emails = imap_search ( $mailbox, 'FROM "user@email.com" UNSEEN' );
if(false !== $emails){

} 
```

最终结果将是这样的：

```
$emails = imap_search ( $mailbox, 'FROM "user@email.com" UNSEEN' );
if(false !== $emails){
    for ($x = 1; $x <= $Msgcount; $x++)         
    {
        //long process here
    }
} 
```

# sql - SQL连接和服务器连接

> ID：11014219
> 
> 赞同：0
> 
> 时间：2012-06-13T11:49:39.400
> 
> 标签：sql

谁能告诉我 SQL 连接类和服务器连接类有什么区别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T11:53:51.363

ServerConnection 可用于与 SQL Server 实例建立连接。但是，它不能与 ADO.NET 组件一起使用，因为它不公开 DBCommand 的后代。

ServerConnection 专为数据库维护和管理任务而设计，与 MS SQL Server 一起部署，而 SQLConnection 专为通过 ADO.NET 进行的一般 CRUD 操作而设计，并作为标准 .NET 框架的一部分进行部署。

来自： [http ://social.msdn.microsoft.com/Forums/pl-PL/csharpgeneral/thread/d4e1305b-3c6b-4504-bcfa-1e3e999d1267](http://social.msdn.microsoft.com/Forums/pl-PL/csharpgeneral/thread/d4e1305b-3c6b-4504-bcfa-1e3e999d1267)

# android - 使用 Android.mk 加载共享库

> ID：11014222
> 
> 赞同：0
> 
> 时间：2012-06-13T11:49:45.280
> 
> 标签：android, c, android-ndk

使用 ndk-build 编译时，如何指定要在 Android.mk 中加载的共享库？

**编辑：**这是我的 Android.mk

```
LOCAL_PATH := $(call my-dir)
include $(CLEAR_VARS)
LOCAL_MODULE := lib-crypto
LOCAL_SRC_FILES := libcrypto.so
include $(PREBUILT_SHARED_LIBRARY)

include $(CLEAR_VARS)
LOCAL_MODULE := tema1
LOCAL_SRC_FILES := tema1.c
LOCAL_SHARED_LIBRARIES := lib-crypto
LOCAL_C_INCLUDES := /home/aleksei/openSSL0.9.8/include
include $(BUILD_EXECUTABLE) 
```

libcrypto.so 是我为 android 构建的库。我想用它制作一个程序。现在它给了我这个错误：

```
Install        : libcrypto.so => libs/armeabi/libcrypto.so
Executable     : tema1
./obj/local/armeabi/libcrypto.so: undefined reference to `dladdr'
collect2: ld returned 1 exit status
make: *** [obj/local/armeabi/tema1] Error 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T11:55:31.243

```
PREBUILT_SHARED_LIBRARY
    Points to a build script used to specify a prebuilt shared library.
    Unlike BUILD_SHARED_LIBRARY and BUILD_STATIC_LIBRARY, the value
    of LOCAL_SRC_FILES must be a single path to a prebuilt shared
    library (e.g. foo/libfoo.so), instead of a source file.

    You can reference the prebuilt library in another module using
    the LOCAL_PREBUILTS variable (see docs/PREBUILTS.html for more
    information). 
```

[从http://source-android.frandroid.com/ndk/docs/ANDROID-MK.html](http://source-android.frandroid.com/ndk/docs/ANDROID-MK.html)阅读更多内容

告诉我你到目前为止做了什么以及你在哪里遇到问题。？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T22:33:01.633

我有同样的问题。为了解决这个问题，我做了以下事情：

1.  在与您的 Android.mk 文件相同的目录中，创建一个名为 Application.mk 的文件
2.  将以下代码行添加到 Application.mk 中： `"APP_PLATFORM := android-8"`

如果您已有 Application.mk 文件，只需将步骤 2 中的代码添加到现有文件中即可。现在调用 ndk-build 并查看它是否链接。ndk-build 可能正在使用没有 dladdr() 的旧版本 libdl 进行编译。步骤 2 中的代码将导致 ndk-build 使用具有 dladdr() 的更新 libdl。

# javascript - 无法从 Safari 中另一个 JavaScript 文件的函数调用一个 JavaScript 文件的函数

> ID：11014235
> 
> 赞同：1
> 
> 时间：2012-06-13T11:50:30.727
> 
> 标签：javascript, html, function, safari

在我的网络应用程序中，我有一个 index.html 文件，两个外部 .js 文件 file1.js、file2.js，我想从 file2.js 文件的函数中调用 file1.js 文件的函数。我尝试了很多东西。但是我不能从function1调用function2。这是我的代码..

索引.html

```
<head>
    <script type = "text/javascript" src = "file1.js"/>
    <script type = "text/javascript" src = "file2.js"/>
</head>
<body>
      <input type = "button" name = "clickButton" onClick = "javascript:function1()"/>
</body> 
```

文件1.js

```
 function function1()
        {
            var newScript = document.createElement("script");
            newScript.type = "text/javascript";
            newScript.scr = "file2.js";
            document.head.appendChild(newScript);
            function2(a);
        } 
```

文件2.js

```
 window.function2 = function(a)
        {
            alert("a value : "+a);
            alert("Function2");
        } 
```

我正在尝试在 Safari 浏览器中运行它。如果有人知道解决方案，请告诉我..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T11:53:21.163

```
<script type = "text/javascript" src = "file1.js"/>
<script type = "text/javascript" src = "file1.js"/> 
```

你把同一个文件放了2次。将其更改为：

```
<script type = "text/javascript" src = "file2.js"/>
<script type = "text/javascript" src = "file1.js"/> 
```

（我之前放了function2，因为file1.js似乎依赖于file1.js，但这取决于你在哪里以及如何调用这一切）

但是你为什么要尝试在 function1 中包含 file2.js 呢？只需将其放在 html 文件的头脚本元素中，然后删除 function1 的前 4 行。

而且`a`似乎不知从何而来。

* * *

所以我建议你这样做：

index.html 标头

```
 <script type = "text/javascript" src = "file2.js"/>
    <script type = "text/javascript" src = "file1.js"/> 
```

index.html 正文：

```
 <script>function1();</script> 
```

文件 1.js：

```
 function function1() {
        var a = "hu ?"; // what you want
        function2(a);
    } 
```

文件 2.js：

```
 function function2(a) {
        alert("a value : "+a);
        alert("function2:"+ function2);
    } 
```

# spring - 用tomcat和spring模拟http 503状态

> ID：11014238
> 
> 赞同：1
> 
> 时间：2012-06-13T11:50:44.293
> 
> 标签：spring, http, tomcat

我正在尝试在我的 spring 应用程序和 tomcat 中模拟 http 503 状态。所以我创建了一个控制器：

```
@RequestMapping(value = "/503", method = RequestMethod.GET)
public String error(final HttpServletRequest request, final HttpServletResponse response, final ModelMap model)
{

    response.setStatus(503);
    return null;
} 
```

在 web xml 中我设置了过滤器：

```
<error-page>
    <error-code>503</error-code>
    <location>/WEB-INF/views/errorpages/simple503.jsp</location>
</error-page> 
```

当我调用 /503 控制器时，会显示典型的 503 tomcat 页面（没有我想显示的页面）并称为我的 404 控制器。

我想这是由 503 控制器中的 return null 引起的......那么我该怎么做才能返回我的错误页面？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T12:12:54.110

您可以（假设您的视图处理程序识别字符串）：

```
return "errorpages/simple503"; 
```

并使用注释您的控制器方法`@ResponseStatus(HttpStatus.SERVICE_UNAVAILABLE)`

# jquery - MVC 3.0 JQUERY 部分页面更新

> ID：11014239
> 
> 赞同：6
> 
> 时间：2012-06-13T11:50:47.650
> 
> 标签：jquery, asp.net, jquery-ui

我有一个 JQuery UI 日期选择器。选择日期后，图表上的数据会发生变化。

问题是当我在日期选择器上选择日期时，整个页面都会刷新并且数据会被填充。

无论如何，我可以更新标签上的图表吗？请注意，在选择日期后，jquery 会发布到服务器并获取所选日期的新数据。

我 `$.ajax({ });`用来打电话给服务器。我原以为这会起到作用，但事实并非如此。

任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T08:07:59.333

我不知道您的方法的名称，div，如果有帮助，请相应地更改。尝试如下操作：

```
 $("#DateDiv").datepicker({
        showOtherMonths: true,
        selectOtherMonths: true,
        dateFormat: "yy/mm/dd",
        onSelect: function (dateText, inst)
        {
            UpdateGraph(dateText);
        },
        onChangeMonthYear: function(year, month, inst) 
        { 
            $.ajax({
                async: false,
                cache: false,
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                url: "@Url.Action("LoadGraph", "YourController")",
                data:
                {
                    date: new Date(year, month - 1, 1).toString("yyyy/MM/dd")
                },
                success: function (data)
                {
$("#UpdateGraphDataDiv").html(data);
                                   },
                error: function (request, status, error)
                {
                    DisplayErrorMessageBox(ParseErrorFromResponse(request.responseText, "Unknown error"), true);
                }
            });
        } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T17:15:57.393

你需要类似的东西

```
$('button').click(function(event){ 
   event.preventDefault();
   $.ajax({ ... } );
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T18:19:39.313

试试这个

```
$('#datepickerid').datepicker({
   onSelect: function(dateText, inst) { 
     $.ajax({ ... } );
     return false;
   }
}); 
```

# javascript - 带有 :not 的 jQuery 点击事件

> ID：11014240
> 
> 赞同：-1
> 
> 时间：2012-06-13T11:50:53.490
> 
> 标签：javascript, jquery, jquery-selectors

我试图在一些 li 上使用 click 事件，除了那些有 class 的`.title`。这是我尝试过但无法正常工作的方法：

```
$('.order_list li:not(.title)').click(function() { 
```

根据jQuery api`not-selector`手册，它应该可以工作......但它没有[http://api.jquery.com/not-selector/](http://api.jquery.com/not-selector/)

## 更新

好的，确实它接缝的代码正在工作......这是一个html问题。感谢任何方式的精彩答案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T11:52:31.017

您的代码应该可以工作（[Demo](http://jsfiddle.net/ycnP5/)）。你在`.title`打开和关闭课程吗？在这种情况下，您需要使用实时委托。在 jQuery 1.7+ 中，使用`.on`：

```
$('.order_list').on('click', 'li:not(.title)', function() {
}); 
```

[演示](http://jsfiddle.net/ycnP5/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T11:52:55.773

你可以试试：

```
$('.order_list li').not('.title').click(function() { 
```

* * *

你的代码应该可以工作，我认为标记是罪魁祸首：

[http://jsbin.com/ajegog/2/](http://jsbin.com/ajegog/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T11:55:12.747

**工作演示** [http://jsfiddle.net/bK3Wa/](http://jsfiddle.net/bK3Wa/)

[http://jsfiddle.net/bK3Wa/1/](http://jsfiddle.net/bK3Wa/1/)的另一个演示`on`

代码工作正常，

希望这会有所帮助，请随时使用小提琴重新创建:)问题我可以尝试帮助你，干杯

**代码**

```
$('.order_list li:not(.title)').click(function() {
    alert('clicked');
});
​ 
```

**或**与`on`

```
$('.order_list li:not(.title)').on('click', function() {
    alert('clicked');
});
​ 
```

# asp.net - CheckBoxList.Selected 不断返回 False 值

> ID：11014241
> 
> 赞同：0
> 
> 时间：2012-06-13T11:50:53.530
> 
> 标签：asp.net, vb.net, checkboxlist

我的页面上有一个 CheckBoxList 表现不佳。

这个想法是，一旦单击表单上的提交按钮，应用程序应该清除与特定用户相关的所有行的数据库表，然后根据用户的 CheckBoxList 选择重新插入新行。

问题是，无论是否选择了 CheckBoxList 中的任何（或所有）项目，应用程序都会不断获取`Selected = False`.

这是我的代码：

```
Protected Sub Page_Load(sender As Object, e As System.EventArgs) Handles Me.Load

    loadRegions()
End Sub

Private Sub loadRegions()

    Dim db As New Database

    Dim sql As String = "select * from regions"

    Dim dr As MySqlDataReader = db.execDB(sql, "Text", Nothing, "DataReader", False)

    If dr.HasRows Then

        cblRegion.DataSource = dr
        cblRegion.DataTextField = "regionname"
        cblRegion.DataValueField = "regionid"
        cblRegion.DataBind()
    End If

    dr.Close()
End Sub

Protected Sub btnRegister_Click(sender As Object, e As System.EventArgs) Handles btnRegister.Click
        ' ============================================================
        ' There's more code in here, but it's irrelevant to this paste
        ' ============================================================

        Dim sql As String = "delete from userregions where userid = " & lblUserID.Text & ";"

        For i As Integer = 0 To cblRegion.Items.Count - 1
            If cblRegion.Items(i).Selected Then
                sql &= "insert into userregions (userid, regionid)" & _
                    "values(" & UserID & ", " & cblRegion.Items(i).Value & ")"

                db.execDB(sql, "Text", Nothing, "None", False)
            End If
        Next
End Sub 
```

**作为记录**
，我知道这里有 SQL 注入的可能性。一旦循环工作，我将继续使用参数。

谢谢你的时间。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T11:53:39.103

您只需要调用`loadRegions`初始加载而不是回发：

```
Protected Sub Page_Load(sender As Object, e As System.EventArgs) Handles Me.Load
    If Not Page.IsPostBack Then
        loadRegions()
    End If
End Sub 
```

否则，您将丢失更改的值并且不会触发事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T11:54:03.113

在加载的页面中，编写以下内容：

```
If Not IsPostBack
    loadRegions()
End If 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T11:58:02.600

在 Page_Load 方法中添加这行 copde "If IsPostBack Then Return"。

```
Protected Sub Page_Load(sender As Object, e As System.EventArgs) Handles Me.Load
    If IsPostBack Then Return
    loadRegions()
End Sub 
```

# sql-server - 在 SQL Server 中使用 SQL 查询获取不带扩展名的文件名

> ID：11014243
> 
> 赞同：2
> 
> 时间：2012-06-13T11:50:58.397
> 
> 标签：sql-server, tsql

从这样的 SQL 表中的列中获取不带扩展名的文件名时遇到问题。

列名`[image]`在`dbo.emp`表中，值为：

```
temp.jpg
test1.jpg
test1.jpeg
sample.jpg
sample1.gif 
```

现在我只想得到`temp`, `test1`, `sample`,`sample1`不带扩展名`.jpg`,`.jpeg`等等……</p>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T11:53:20.877

```
DECLARE @x VARCHAR(32);
SET @x = 'temp.jpg';
SELECT SUBSTRING(@x, 1, CHARINDEX('.', @x)-1);
-- or SELECT LEFT(@x, CHARINDEX('.', @x)-1); 
```

结果：

```
temp 
```

`.`但是，这并没有指定如果找不到a 该怎么做。如果您想处理它并在`.`找到 no 时返回整个字符串：

```
DECLARE @x TABLE([image] VARCHAR(32));
INSERT @x SELECT 'temp.jpg' UNION ALL SELECT 'sample1.gif' UNION ALL SELECT 'foo';
SELECT SUBSTRING([image], 1, COALESCE(NULLIF(CHARINDEX('.', [image]),0)-1, 32)) FROM @x; 
```

结果：

```
temp
x
foo 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T12:01:28.383

另一种方式：

```
left(fn, len(fn) - charindex('.', reverse(fn))) 
```

例如

```
;with T (fn) as (
    select ''            union
    select 'aaa'         union
    select 'aaa.bbb'     union
    select 'aaa.bbb.ccc'
)
select left(fn, len(fn) - charindex('.', reverse(fn))) from T 
```

为了

```
(No column name)

aaa
aaa
aaa.bbb 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T11:53:29.213

```
select 
    SUBSTRING([image], 0, charindex('.', [image], 0)) 
from 
    [table] 
```

# java - 在谷歌内部搜索并准确回复的应用程序

> ID：11014255
> 
> 赞同：-1
> 
> 时间：2012-06-13T11:51:40.587
> 
> 标签：java, jakarta-ee, struts, artificial-intelligence, chat

我正在用 Java 开发一个聊天应用程序，用户可以在其中与机器人机器等软件聊天。我的问题是，如果用户编写任何查询或任何输入消息，它必须在谷歌中搜索然后检索它解析它等等。我可以使用的所有内容。但问题是我如何根据用户输入从谷歌获取数据。并且用户也不应该觉得这是一个简单的搜索，它是一个聊天。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T11:58:37.527

那里可能有更简单和更简单的方法 - 但这是我要做的：

我建议首先通过一个简单的应用程序查询谷歌，并有效地解决这部分问题。这里有几个链接：

[如何通过桌面java应用程序查询谷歌？](https://stackoverflow.com/questions/1866921/how-to-query-google-through-desktop-java-app)

[如何在不使用 API 的情况下以编程方式执行搜索？](https://stackoverflow.com/questions/1141136/how-can-i-programmatically-perform-a-search-without-using-an-api)

[有没有办法以编程方式访问 Google 的搜索引擎结果？](https://stackoverflow.com/questions/2445308/is-there-a-way-to-programmatically-access-googles-search-engine-results)

[您如何以编程方式搜索 Google 的 Java API](https://stackoverflow.com/questions/3727662/how-can-you-search-google-programmatically-java-api)

一旦你完成了这部分，为了实现你的聊天机器人，我建议你去[AIML](http://en.wikipedia.org/wiki/AIML)。我个人使用 AIML 开发了一个聊天机器人，它非常好且准确。

所以要安排你的任务 - 首先学习如何通过 Java 程序查询 Google，然后从中获取结果并尝试动态创建 AIML 文件。完成后，使用 AIML 解释器来解释那些 AIML 文件并繁荣！- 你的机器人准备好了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T11:55:55.517

您看过 Google 自定义搜索 API 吗？

[https://developers.google.com/custom-search/v1/overview](https://developers.google.com/custom-search/v1/overview)

值得注意的成本：

> 免费配额
> 
> 所有用户均可免费使用，每天最多 100 个查询。
> 
> 付费使用
> 
> 如果您未注册计费，超出免费使用配额的任何使用都将失败。启用计费后，您将继续每天收到 100 次免费查询。但是，对于所有额外的请求，您将按每 1000 次查询 5 美元的费率付费，每天最多 10,000 次查询。如果您需要额外配额，请从控制台申请额外配额。

截至 2012 年 6 月正确

# oauth - Google docs API：无法下载文件，下载文件有效

> ID：11014257
> 
> 赞同：1
> 
> 时间：2012-06-13T11:51:50.923
> 
> 标签：oauth, google-docs, google-docs-api, google-drive-api

我正在尝试使用 google 文档列表 API 和 OAuth 1.0**从 google docs 下载 pdf 文件的http 请求。**我没有为 oauth 或 google docs 使用任何外部 api。

根据文档，我获得了 pdf 的下载 URL，该 URL 在放置在浏览器中时可以正常工作。

根据文档，我应该发送一个如下所示的请求：

```
GET https://doc-04-20-docs.googleusercontent.com/docs/secure/m7an0emtau/WJm12345/YzI2Y2ExYWVm?h=16655626&e=download&gd=true 
```

但是，下载 URL 的参数有一些有趣的地方，它看起来像这样：

```
https://doc-00-00-docs.googleusercontent.com/docs/securesc/5ud8e...tMzQ?h=15287211447292764666&amp\;e=download&amp\;gd=true 
```

（在 url '&\;' 中实际上没有 '\' 但我将其放在帖子中以避免将其转义为 '&'）。

那么这里的情况是什么？我有 3 个参数 h,e,gd 还是我有一个带 value 的参数 h `15287211447292764666&ae=download&gd=true`，或者我有以下 3 个参数值对：`h = 15287211447292764666`​​ , `amp;e = download`, `amp;gd = true`（我认为是这种情况，它似乎是一个错误）？

为了形成正确的 http 请求，我需要确切地知道参数名称和值是什么，但是我拥有的下载 URL 令人困惑。此外，如果参数名称是 h、amp;e 和 amp;gd，那么包含这些参数的请求是否对获取文件内容有效（如果不是，它看起来像一个错误）。

我下载和上传文档（msword 文档）没有问题，我下载文件的范围是正确的。

我尝试了很多不同的请求。当我单独处理 3 个参数 (h,e,gd) 时，我得到`Unauthorized 401`. 如果我假设我只有一个参数 - h`15287211447292764666&ae=download&gd=true`我得到 的值`500 Internal Server Error`（谷歌 api 状态：'API 中发生了意外错误。'，'如果问题仍然存在，请在论坛中发帖。'）。

如果我根本不放任何参数或者我放了 3 个参数 -h、amp;e、amp;gd，我得到`302 Found`. 我尝试按照重定向发送更多请求，但我仍然无法获得实际的 pdf 内容。我还在 OAuth Playground 中进行了实验，但它似乎没有像预期的那样工作。在 OAuth 中使用下载 URL 发送获取请求会响应`302 Found`而不是响应 PDF 内容。

这里发生了什么？如何在响应中获取 pdf 内容？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T16:13:40.313

我用 oAuth2 试验了同样的问题（错误 401）。

通过在请求标头中而不是在 URL 中插入 oAuth2 令牌来解决。

我已将`&access_token=&lt;token&gt;`URL替换为`setRequestHeader("Authorization", "Bearer &lt;token&gt;" )`

# android - Android ListView：光标适配器使用不正确的项目类型

> ID：11014258
> 
> 赞同：0
> 
> 时间：2012-06-13T11:51:53.113
> 
> 标签：android

我在项目中为列表项使用不同的布局时遇到了问题。

下面是我的代码：

```
private class ChatAdapter extends CursorAdapter {
    private LayoutInflater mInflater;

    private static final int OWN_MESSAGE = 0;
    private static final int INTERLOCUTOR_MESSAGE = 1;

    public ChatAdapter(Context context, Cursor c) {
        super(context, c, false);
        mInflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    }

    @Override
    public void bindView(View view, Context context, Cursor cursor) {
        final TextView text = (TextView) view.findViewById(R.id.chat_message_text);
        final String message = cursor.getString(MessagesQuery.MESSAGE_TEXT);
        text.setText(message);
    }

    @Override
    public View newView(Context context, Cursor cursor, ViewGroup group) {

        View view = null;
        final int sender_id = cursor.getInt(MessagesQuery.SENDER_ID);
        final int messageType = getItemViewType(sender_id);
        switch (messageType) {
            case OWN_MESSAGE:
                view = (View) mInflater.inflate(R.layout.list_item_message_own, null);
                break;
            case INTERLOCUTOR_MESSAGE:
                view = (View) mInflater.inflate(R.layout.list_item_message_interlocutor, null);
                break;

        }
        return view;
    }

    @Override
    public int getItemViewType(int sender_id) {
        return (sender_id == Prefs.getIntProperty(mContext, R.string.key_user_id)) ? OWN_MESSAGE
                : INTERLOCUTOR_MESSAGE;
    }

    @Override
    public int getViewTypeCount() {
        return 2;
    }

} 
```

一切正常，直到我开始滚动。有时数据推送到错误布局的问题。我知道这可能是因为重用了列表项的视图。但我不明白如何强制适配器在 bindView() 中使用正确的视图？可能这不是很难理解，但我不能:-(谁能告诉我我的问题在哪里？

PS对不起我不完美的英语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T11:58:09.527

您对这种方法的看法是错误的：

```
@Override
public int getItemViewType(int sender_id /* it is position not sender id*/)   
{

} 
```

它不是向您发送`sender_id`. 而是向您发送位置 0、1、2、3 等等。

并且您必须决定在位置 0、1 等时要做什么。

一个技巧是您可以`Cursor`在构造函数中保存类级别提供，然后获取该特定位置的数据并`sender_id`执行剩余步骤。

# python - 如何在python中创建不可变字典？

> ID：11014262
> 
> 赞同：7
> 
> 时间：2012-06-13T11:52:11.787
> 
> 标签：python, class, subclass, immutability

我想`subclass` `dict`在 python 中使子类的所有字典都是不可变的。

我不明白它是如何`__hash__`影响不变性的，因为在我的理解中它只是表示对象的**相等**或**不相等**！

那么，可以`__hash__`用来实现不变性吗？如何 ？

**更新**：

目标是来自 API 的公共响应可用作 dict，它必须作为全局变量共享。那么，无论如何，它都需要完好无损？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-14T04:42:00.510

我找到了~~官方参考：~~被拒绝的 PEP 中包含的建议。

```
class imdict(dict):
    def __hash__(self):
        return id(self)

    def _immutable(self, *args, **kws):
        raise TypeError('object is immutable')

    __setitem__ = _immutable
    __delitem__ = _immutable
    clear       = _immutable
    update      = _immutable
    setdefault  = _immutable
    pop         = _immutable
    popitem     = _immutable 
```

归属： http: [//www.python.org/dev/peps/pep-0351/](http://www.python.org/dev/peps/pep-0351/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-13T11:55:29.040

> 那么，可以`__hash__`用来实现不变性吗？

不，它不能。无论其`__hash__`方法做什么，都可以使对象可变（或不可变）。

不可变对象 和 之间的关系`__hash__`是，由于不可变对象无法更改，因此返回的值在`__hash__`构造后保持不变。对于可变对象，这可能是也可能不是（推荐的做法是这些对象根本无法散列）。

如需进一步讨论，请参阅[问题 13707：澄清`hash()`选区](http://bugs.python.org/issue13707)。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-13T12:34:43.563

关于哈希性和可变性之间的关系：

为了有用，哈希实现需要满足以下属性：

1.  比较相等的两个对象的哈希值`==`必须相等。

2.  哈希值可能不会随时间变化。

这两个属性意味着可散列的类在比较实例时不能考虑可变属性，并且相反，在比较实例时确实考虑了可变属性的类是不可散列的。不可变类可以在不影响比较的情况下进行哈希处理。

所有内置的可变类型都不是可散列的，所有不可变的内置类型都是可散列的。这主要是上述观察的结果。

默认情况下，用户定义的类定义基于对象标识的比较，并使用`id()`as hash。它们是可变的，但在比较实例时不考虑可变数据，因此可以将它们设为可散列的。

使一个类可散列并不会以某种神奇的方式使其不可变。相反，要在保持原始比较运算符的同时以合理的方式使字典可散列，您首先需要使其不可变。

**编辑**：关于您的更新：

有几种方法可以提供等效的全局不可变字典：

1.  请改用`collections.namedtuple()`实例。

2.  使用具有只读属性的用户定义类。

3.  我通常会这样做：

    ```
    _my_global_dict = {"a": 42, "b": 7}

    def request_value(key):
        return _my_global_dict[key] 
    ```

    通过前导下划线，您可以清楚地表明这`_my_global_dict`是应用程序代码不涉及的实现细节。*请注意，如果字典值*恰好是可变对象，则此代码仍允许修改它们。如有必要，您可以通过返回`copy.copy()`s 或s 个值来解决此问题。`copy.deepcopy()`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2022-01-15T21:09:33.300

在[frozendict](https://pypi.org/project/frozendict/)中，hash 在被拒绝的[PEP 416](https://www.python.org/dev/peps/pep-0416/)之后简单地实现：

```
def __hash__(self):
    try:
        fs = frozenset(self.items())
    except TypeError:
        hash = -1
    else:
        hash = hash(fs)

    if hash == -1:
        raise TypeError("Not all values are hashable.")

    return hash 
```

PS：我是包的新维护者。

# twitter-bootstrap - 不要对页面部分使用 Bootstrap 样式

> ID：11014264
> 
> 赞同：1
> 
> 时间：2012-06-13T11:52:18.200
> 
> 标签：twitter-bootstrap

我有一个页面，目前有多个表单。我对其中一些表单使用了标准的 Bootstrap 表单样式。

问题是 Bootstrap CSS 被应用到它不应该应用的表单上。

有没有办法添加一个类或`data-*`属性来强制 Bootstrap 不适用于该表单？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T14:14:38.407

[命名空间从你的 CSS](http://www.starrhorne.com/2012/02/16/building-front-ends-that-dont-suck-five-tips-for-rails-developers.html)中消失，这是我对每个项目都遵循的建议，我没有做错。

阅读 LESS 文档中的命名空间，并在对 Bootstrap LESS 文件进行适当修改后从[LESS 文件](http://lesscss.org/#-namespaces)重新生成 CSS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T14:08:34.523

不可以。您必须编写一组新规则来应用于您不希望被 Bootstrap 样式化的表单。例如，给表单一个类名“someClass”并使用以下选择器：

```
form.someClass {
    /* Your form styles */
} 
```

您可以将它放在一个新的样式表中，并在 Bootstrap 样式表*之后*包含该样式表以覆盖您想要的任何 Bootstap 样式。

# vb.net - 获取 System.__ComObject 而不是数据，如何获取数据？

> ID：11014266
> 
> 赞同：0
> 
> 时间：2012-06-13T11:52:24.223
> 
> 标签：vb.net

我将应用程序从 vb 迁移到 vb.net 我面临一个问题。也就是说，我的应用程序从 vc++ dll 代码中获取数据是

```
With mobjReply
  str =Trim(.GetRecord(0)(0))
  str2= Trim(.GetRecord(0)(1))
End With 
```

VB 应用程序提供正确的数据，如姓名和电话，但 vb.net 提供`{System.__ComObject}`

请建议我如何获取数据？

# c - 采用 const 2d 数组的 C 函数

> ID：11014267
> 
> 赞同：4
> 
> 时间：2012-06-13T11:52:26.327
> 
> 标签：c, arrays, 2d, constants

我想编写一个将动态二维数组作为输入但不改变数组的 C 函数。

我试图使 const 正确，不仅是为了使我的代码更清晰，而且因为我的函数将从 C++ 代码中调用，而 C++ 对这些事情非常挑剔。

如何声明一个函数以将“const”指针指向一个指针，即如何指示该函数不会改变二维数组的内容？

下面是一个具体的、超级简单的例子。我正在使用一个二维的双精度数组，即 double** 来表示一个大小为 nxn 的 C 方阵，我想编写一个函数来计算这些矩阵之一的轨迹：

```
#include <stdlib.h>
#include <stdio.h>

double **sqr_matrix_new(int n)
{
  double **a = calloc(n, sizeof(double*));
  int i;
  for (i=0; i < n; ++i) a[i] = calloc(n, sizeof(double));
  return a;
}

void sqr_matrix_free(double **a, int n)
{
  int i;
  for (i=0; i < n; ++i) free(a[i]);
  free(a);
}

double sqr_matrix_trace(double **a, int n)
{
  double trace;
  int i;
  for (i=0, trace=0.0; i < n; ++i) trace += a[i][i];
  return trace;
}

double sqr_matrix_trace_const(const double * const *a, int n)
{
  double trace;
  int i;
  for (i=0, trace=0.0; i < n; ++i) trace += a[i][i];
  return trace;
}

int main(int argc, char *argv[])
{
  int n = 10;
  double **a = sqr_matrix_new(n);
  int i, j, k;
  for (i=0, k=0; i < n; ++i){
    for (j=0; j < n; ++j) a[i][j] = k++;
  }
  printf("trace is %g\n", sqr_matrix_trace(a, n));
  printf("trace is %g\n", sqr_matrix_trace_const(a, n));
  printf("trace is %g\n", sqr_matrix_trace_const((const double * const *)a, n));
  sqr_matrix_free(a, n);
} 
```

在上面，跟踪函数的两个版本 sqr_matrix_trace() 和 sqr_matrix_trace_const() 都可以干净地编译（后者是我更喜欢的版本，因为它清楚地表明它给出的矩阵不会改变），但是调用

```
sqr_matrix_trace_const(a, n) 
```

产生以下警告：

```
sqr_matrix.c: In function 'main':
sqr_matrix.c:44: warning: passing argument 1 of 'sqr_matrix_trace_const' from incompatible pointer type
sqr_matrix.c:27: note: expected 'const double * const*' but argument is of type 'double **' 
```

演员克服了这一点：

```
sqr_matrix_trace_const((const double * const *)a, n) 
```

但是使用强制转换来克服编译器的不便感觉是错误的。

或者，我可以禁止编译器警告，但这是一种逃避。

因此，我希望我的代码能够干净地编译，并且我想传达给函数的动态二维数组的 const 特性，而无需借助强制转换。这似乎是一个合法的目标。这可能吗？如果没有，这样做的标准/公认做法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T12:35:07.087

C`const`升级规则不允许从`T **`to升级`const T const *`。根据 6.5.16.1 1（适用于函数调用以及根据 6.5.2.2 2 的赋值），指针的转换只能将限定符添加到指向的类型。

这是为了防止类似代码（6.5.16.1 6 中的示例）：

```
const char **cpp;
char *p;
const char c = 'A';
cpp = &p; // constraint violation
*cpp = &c; // valid
*p = 0; // valid 
```

观察到它是安全的是正确的，`const *const *cpp = &p`因为 then`*cpp = &c`被阻止了，但这是一个足够模糊的情况，标准中没有涵盖它。

结论：你可以而且应该投给`const double *const *`自己。

请注意，使用`double *`具有长度的单个数组`n * n`并自己进行任何必要的数组索引会更有效：`d[i][j]`变得`d[i * n + j]`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T12:34:24.227

C++ 编译器会允许这样做。

至于 C，[合格的指针类型不会被递归应用](http://c-faq.com/ansi/constmismatch.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T12:38:11.983

如果您的矩阵数据确实是二维和矩形的（没有“参差不齐的右边缘”），我不明白为什么您不将它表示为`double *`第一个元素的单个元素，以及给出宽度和高度的整数。这将使您既可以减少初始化矩阵所需的分配数量，又可以使其可以表示为普通的 old `const double *`。

# java - 替换 DropEvent#getDragType

> ID：11014268
> 
> 赞同：0
> 
> 时间：2012-06-13T11:52:28.480
> 
> 标签：java, richfaces

我正在从 RichFaces 3.3 迁移到 RichFaces 4.1。在 RichFaces 3.3 中，DropEvent 类上有一个名为 getDragType 的方法，现在在 4.1 中它已经消失了。有替代方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T10:48:39.427

由于这个问题似乎没有一个干净简单的解决方案，我正在使用 hack 来达到相同的结果：

```
<rich:dragSource id="selectedField" type="selectedField" dragValue="#{elem.position}" dragIndicator="indicator" />

e.getDragSource().getId() 
```

# java - 从 java 连接 MS Dynamics CRM 2011

> ID：11014275
> 
> 赞同：0
> 
> 时间：2012-06-13T11:52:59.180
> 
> 标签：java, web-services, dynamics-crm-2011

我正在尝试从 Java 连接到 MS Dynamics CRM 2011。经过大量搜索后，我在 MS 论坛中发现了一个链接，该链接提供了一个代码片段，可以从 Java 调用 MS Dynamics CRM 2011 WS。

[从 Java 使用 CRM REST 服务](http://code.msdn.microsoft.com/Consuming-CRM-REST-Service-ae24a15e)

但是，除了帐户创建步骤之外，它没有提供太多详细信息。使用此代码段，我可以创建帐户。但是，我还想使用相同的 REST Web 服务来检索帐户、创建新案例请求、将案例请求添加到帐户等。基于在线可用的 .NET 示例，我正在尝试使用**service.createAccountQuery()**方法来检索帐户。但是，虽然所有 .NET 示例都使用 LINQ 来设置搜索条件，但我不知道如何在 java 中指定子路径字符串以通过名称/城市/国家等检索现有帐户。

感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-13T14:12:39.757

不确定您是否仍在寻找，但其他人正在寻找。我遇到过同样的问题。

它正在使用 odata 查询 url，因此子路径是 entitySet（例如，对于帐户，它将是 AccountSet）

然后，您可以使用 .filter 方法设置过滤器，并通过 .select 方法进行选择。

我确实注意到您似乎无法在单独的行上执行这些操作

例如你不能做

`Query<microsoft.crm.sdk.data.services.Account> q = service.createAccountQuery("AccountSet"); q.filter("substringof('Test',Name)"); q.select("AccountId,Name"); q.execute();`

你必须做 `Query<microsoft.crm.sdk.data.services.Account> q = service.createAccountQuery("AccountSet").filter("substringof('Test',Name)").select("AccountId,Name"); q.execute();`

克里斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T06:30:01.103

而不是“帐户行为...”行和下面，使用类似的东西：

```
// Retrieve all accounts that the user has read access to.
string fetch1 = @"<fetch mapping=""logical"">
                     <entity name=""account"">
                        <all-attributes/>
                     </entity>
                  </fetch>";

// Fetch the results.
ExecuteFetchRequest req = new ExecuteFetchRequest();
req.FetchXml = fetch1;
ExecuteFetchResponse result1 = (ExecuteFetchResponse)service.Execute(req); 
```

我不熟悉此代理，但您想调用 service.X，其中 X 是 Execute 或 RetrieveMultiple（基于代理提供的内容）。

# c# - C#获取调用程序集的父程序集名称

> ID：11014280
> 
> 赞同：39
> 
> 时间：2012-06-13T11:53:15.237
> 
> 标签：c#, .net, reflection, system.reflection

我有一个正在开发的 C# 单元测试应用程序。涉及三个程序集 - C# 应用程序本身的程序集、应用程序使用的第二个程序集和第二个程序使用的第三个程序集。

所以电话是这样的：

```
First Assembly ------> Second Assembly---------> Third Assembly. 
```

在第三个程序集中我需要做的是获取称为第二个程序集的拳头程序集的名称。

```
Assembly.GetExecutingAssembly().ManifestModule.Name
Assembly.GetCallingAssembly().ManifestModule.Name 
```

返回第二个程序集的名称。和

```
Assembly.GetEntryAssembly().ManifestModule.Name 
```

返回 NULL

有人知道是否有办法获得第一届大会的大会名称吗？

根据其他用户的要求，我把代码放在这里。这不是 100% 的代码，而是遵循这样的代码。

```
namespace FirstAssembly{
public static xcass A
{
        public static Stream OpenResource(string name)
        {
            return Reader.OpenResource(Assembly.GetCallingAssembly(), ".Resources." + name);
        }
}
}

using FirstAssembly;
namespace SecondAssembly{
public static class B 

{
public static Stream FileNameFromType(string Name)

{
return = A.OpenResource(string name);
}
}
} 
```

和测试项目方法

```
using SecondAssembly;
namespace ThirdAssembly{
public class TestC
{

 [TestMethod()]
        public void StremSizTest()
        {
            // ARRANGE
            var Stream = B.FileNameFromType("ValidMetaData.xml");
            // ASSERT
            Assert.IsNotNull(Stream , "The Stream  object should not be null.");
        }
}
} 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-06-21T15:14:08.877

我想你应该可以这样做：

```
using System.Diagnostics;
using System.Linq;

...

StackFrame[] frames = new StackTrace().GetFrames();
string initialAssembly = (from f in frames 
                          select f.GetMethod().ReflectedType.AssemblyQualifiedName
                         ).Distinct().Last(); 
```

这将为您提供包含第一个方法的程序集，该方法首先在当前线程中启动。因此，如果您不在主线程中，这可能与 EntryAssembly 不同，如果我正确理解您的情况，这应该是您正在寻找的程序集。

您还可以获得实际的程序集而不是这样的名称：

```
Assembly initialAssembly = (from f in frames 
                          select f.GetMethod().ReflectedType.Assembly
                         ).Distinct().Last(); 
```

编辑 - 截至 2015 年 9 月 23 日

请注意

```
GetMethod().ReflectedType 
```

可以为 null，因此检索其 AssemblyQualifiedName 可能会引发异常。例如，如果想要检查一个仅用于 ORM（如 linq2db 等）POCO 类的 vanilla c.tor，那就很有趣了。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-01-28T19:32:12.600

这将返回引用您 currentAssembly 的初始程序集。

```
var currentAssembly = Assembly.GetExecutingAssembly();
var callerAssemblies = new StackTrace().GetFrames()
            .Select(x => x.GetMethod().ReflectedType.Assembly).Distinct()
            .Where(x => x.GetReferencedAssemblies().Any(y => y.FullName == currentAssembly.FullName));
var initialAssembly = callerAssemblies.Last(); 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2016-12-19T18:48:50.017

它对我有用：

```
System.Reflection.Assembly.GetEntryAssembly().GetName() 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-06-22T05:05:15.873

**如果您也从nunit-console*运行测试，则*Assembly.GetEntryAssembly()*为 null 。*

 *如果您只想要正在执行的应用程序的名称，请使用：

```
 System.Diagnostics.Process.GetCurrentProcess().ProcessName 
```

或者

```
 Environment.GetCommandLineArgs()[0]; 
```

对于*nunit-console*，您将分别获得“nunit-console”和“C:\Program Files\NUnit 2.5.10\bin\net-2.0\nunit-console.exe”。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-13T11:56:14.360

尝试：

```
Assembly.GetEntryAssembly().ManifestModule.Name 
```

这应该是实际执行以启动您的流程的程序集。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-22T11:12:17.900

如果您知道堆栈中的帧数，则可以使用 StackFrame 对象并跳过前一帧的数量。

```
// You skip 2 frames
System.Diagnostics.StackFrame stack = new System.Diagnostics.StackFrame(2, false);
string assemblyName = stack.GetMethod().DeclaringType.AssemblyQualifiedName; 
```

但是，如果您想要第一次调用，则需要获取所有帧并获取第一个。（参见 AVee 解决方案）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-21T08:47:23.170

不完全确定您在寻找什么，尤其是在单元测试的上下文中运行时，您最终会得到：

```
mscorlib.dll
Microsoft.VisualStudio.TestPlatform.Extensions.VSTestIntegration.dll 
```

（或类似的东西，取决于你的测试运行器）在导致任何方法被调用的程序集中。

下面的代码打印调用中涉及的每个程序集的名称。

```
var trace = new StackTrace();
var assemblies = new List<Assembly>();
var frames = trace.GetFrames();

if(frames == null)
{
    throw new Exception("Couldn't get the stack trace");
}

foreach(var frame in frames)
{
    var method = frame.GetMethod();
    var declaringType = method.DeclaringType;

    if(declaringType == null)
    {
        continue;
    }

    var assembly = declaringType.Assembly;
    var lastAssembly = assemblies.LastOrDefault();

    if(assembly != lastAssembly)
    {
        assemblies.Add(assembly);
    }
}

foreach(var assembly in assemblies)
{
    Debug.WriteLine(assembly.ManifestModule.Name);
} 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-06-13T11:56:13.800

怎么样[`Assembly.GetEntryAssembly()`](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.getentryassembly.aspx)？它返回进程的主要可执行文件。

`Process.GetCurrentProcess().MainModule.ModuleName`还应该返回与 ManifestModule 名称（“yourapp.exe”）大致相同的值。

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2015-04-15T19:52:41.180

这适用于在 NUnit 测试中使用两个程序集时获取原始程序集，而不返回 NULL。希望这可以帮助。

```
var currentAssembly = Assembly.GetExecutingAssembly();
var callerAssemblies = new StackTrace().GetFrames()
        .Select(x => x.GetMethod().ReflectedType.Assembly).Distinct()
        .Where(x => x.GetReferencedAssemblies().Any(y => y.FullName ==     currentAssembly.FullName));
var initialAssembly = callerAssemblies.Last(); 
```*

# c - Gstreamer 音频输入到 mp3

> ID：11014283
> 
> 赞同：0
> 
> 时间：2012-06-13T11:53:24.447
> 
> 标签：c, audio, mp3, gstreamer, microphone

我正在尝试创建一个简单的程序，`Gstreamer`用于从麦克风获取输入并将其保存到 mp3 文件中。我不断得到

> 内部数据流错误

并且似乎找不到问题（我是新手`Gstreamer`）。这是我的代码的链接：

[http://pastebin.com/QDexe8Fz](http://pastebin.com/QDexe8Fz)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T14:05:35.257

您的代码未处理函数的返回代码。结果，当它失败时，你就在黑暗中。无论如何，在您的代码中，您忘记链接元素。在第 70 行之后，也执行 gst_element_link_many(....);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T14:12:18.453

传统上，**GStreamer 包不包括对 MP3 的支持**。但是，您可以使用编解码器和插件来支持它。

# php - PHP - C2DM 应用服务器实现

> ID：11014284
> 
> 赞同：0
> 
> 时间：2012-06-13T11:53:27.880
> 
> 标签：php, android-c2dm

我正在尝试使用此代码 - [https://github.com/lytsing/c2dm-php](https://github.com/lytsing/c2dm-php)设置 C2DM 推送消息的应用程序服务器部分。

我已经完成了应用程序方面的工作，并在 Google 注册了一个电子邮件地址 - 每次我运行代码（在安装了 php/cURL 的服务器上）我都会收到错误“获取身份验证令牌错误”。它让我发疯，因为我不知道从哪里开始解决问题。

我在代码中更改的唯一行是 - 在 s2dm.php 文件中 -

```
 'source'        => 'com.phonegap.chillimusicapp', 
```

我将我的电子邮件/密码添加到 post.php 文件中 -

```
 $result = $c2dm->getAuthToken("email@googlemail.com", "password"); 
```

任何建议都会很棒！干杯保罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T12:03:52.567

尝试使用下面的示例代码，它工作正常。

```
<?php
define("C2DM_ACCOUNT_EMAIL","[C2DM_EMAIL]");
define("C2DM_ACCOUNT_PASSWORD","[C2DM_PASSWORD]");
define("C2DM_CLIENT_LOGIN_URL","https://www.google.com/accounts/ClientLogin");
define("C2DM_MSG_SEND_URL","https://android.apis.google.com/c2dm/send");

function sendPushNotification($device_reg_id,$msg){

    $auth_id=get_auth_id(); // To get Auth ID

    $post_fields=array(
        'collapse_key=ck_1',
        'registration_id='. trim($device_reg_id),
        'data.payload='. trim($msg),
    );

    $data_str=implode('&', $post_fields);

    $headers = array(
    'Authorization: GoogleLogin auth='.trim($auth_id),
    'Content-Type: application/x-www-form-urlencoded',
    'Content-Length: '.trim(strlen($data_str)),
    'Connection: close'
    );

    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL,C2DM_MSG_SEND_URL);
    curl_setopt($ch,CURLOPT_HTTPHEADER,$headers);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $data_str);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    $server_output = curl_exec ($ch);
    curl_close ($ch);
//  print_r($server_output);
}

function get_auth_id(){
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL,C2DM_CLIENT_LOGIN_URL);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
    curl_setopt($ch, CURLOPT_POST, 1);
    curl_setopt($ch, CURLOPT_POSTFIELDS, "Email=".C2DM_ACCOUNT_EMAIL."&Passwd=".C2DM_ACCOUNT_PASSWORD."&accountType=GOOGLE&source=Google-cURL-Example&service=ac2dm");
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    $server_output = curl_exec ($ch);
    curl_close ($ch);
//  print_r($server_output);
    $parts=explode("Auth=",$server_output);
    $auth_id=$parts[1];
//  echo $auth_id;
    return $auth_id;
}

$reg_id = "[DEVICE_REG_ID]";
sendPushNotification($reg_id,"Hello World...!! Jay is testing C2DM..."); 
```

**FYI!** No need to call get_auth_id() every time you send notification, You can call once and store auth_id somewhere in config file also.

# common-lisp - 如何告诉 asdf 使用 .asd 文件的目录作为项目的根目录

> ID：11014292
> 
> 赞同：3
> 
> 时间：2012-06-13T11:53:57.140
> 
> 标签：common-lisp, asdf

我正在尝试使用自制的 .asd 文件加载我的项目，但不知何故 asdf 无法识别 .asd 文件也应该是项目的根目录，因此导致出现错误，例如路径在`failed to find the TRUENAME of /home/$USER/rel-path-to-file`哪里`rel-path-to-file`对应的文件，相对于加载的 .asd 文件。

这就是我所做的：

```
(push "path-to-project-directory-of-asd-file" asdf:*central-registry*) 
```

然后

```
(asdf:load-system 'project-name) 
```

它确实找到了我的 .asd 文件，但不知何故找不到它应该加载的 .lisp 文件。

asdf 已由 quicklisp 配置和安装。因此，我还使用符号链接将项目“安装”到 quicklisp 中，这也很有效。它确实找到了 .asd 文件，`ql:quickload :name`但仍然不使用包含 .asd 文件的目录作为项目根目录。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T11:04:32.003

Lisp 路径名在历史上是这样的，它们要求你在目录名之后添加一个斜杠（有人告诉我这是因为我出生之前创建的操作系统），所以为了告诉 Lisp 你的目标是一个目录必须以斜杠结束名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T07:20:58.963

请参阅 asdf:system-relative-pathname。

# size - Vaadin - 如何为动态增长的面板设置最大尺寸？

> ID：11014294
> 
> 赞同：0
> 
> 时间：2012-06-13T11:54:08.200
> 
> 标签：size, panel, max, vaadin

问题如下：我必须在 Vaadin 中创建一个具有未定义高度的面板，但也有一个约束，它应该只扩展直到它达到最大尺寸（高度）。有谁知道这个的解决方案？它尚未作为 Vaadin 的内置功能实现，请参阅：

[http://dev.vaadin.com/ticket/6137](http://dev.vaadin.com/ticket/6137)

可以做些什么呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T12:46:31.130

我能想到的唯一可能值得尝试的方法 - 我不知道它是否会工作 - 是尝试使用包含[CSSLayout](https://vaadin.com/book/-/page/layout.csslayout.html)，并在 CSS 中使用 max-height: 为控制板。

# jquery - 使用 Jquery 在块 UI 中回发

> ID：11014300
> 
> 赞同：2
> 
> 时间：2012-06-13T11:54:18.980
> 
> 标签：jquery, asp.net, postback, blockui

我在我的网页中使用了一个 blockui jquery。
问题是它在回发时没有使用 settimeout 函数。
它只会阻塞几秒钟。我从 d 站点尝试过。 [http://malsup.com/jquery/block/#page](http://malsup.com/jquery/block/#page)
并尝试了许多替代方法，例如 ajaxStart 和 ajaxstop 事件。
页面回发不需要时间。我的代码为

```
<script type="text/javascript">
        $(document).ready(function () {
            $('#demo10').click(function () {
                $.blockUI({
                    message: '<h1>Auto-Unblock!</h1>'
                });
                setTimeout($.unblockUI, 8000); 
            });
        }); </script>

    <div>
    <asp:Button ID="demo10" runat="server" Text="Run" />
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T13:10:26.713

您的问题可能是因为您让点击返回。在单击事件上返回 false 以防止其为：

```
 $(document).ready(function () {
            $('#demo10').click(function () {
                $.blockUI({
                    message: '<h1>Auto-Unblock!</h1>'
                });
                setTimeout($.unblockUI, 8000); 

                return false;
            });
        }); 
```

在带有示例的页面中，按钮不是输入控件，也不是产品回发，这就是示例代码中未使用此按钮的原因。`return false;`在您的情况下，您的按钮呈现为输入控件，这将进行回发。

# c# - 处理器 ID 可以用于 AES 加密密钥吗？

> ID：11014301
> 
> 赞同：0
> 
> 时间：2012-06-13T11:54:19.730
> 
> 标签：c#, aes, mac-address

我正在使用下面的代码来获取处理器 ID：

```
System.Management.ManagementClass theClass = new System.Management.ManagementClass("Win32_Processor");
System.Management.ManagementObjectCollection theCollectionOfResults = theClass.GetInstances();

foreach (System.Management.ManagementObject currentResult in theCollectionOfResults)
{
    MessageBox.Show(currentResult["ProcessorID"].ToString());
} 
```

处理器 ID 是每台计算机的唯一 ID 吗？我想为每台计算机生成一个随机唯一编号，以用作 AES 加密密钥。我不想使用 MAC 地址，因为我知道 MAC 地址可以更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T13:43:30.760

这是不好的解决方案，因为 CPU 必须支持 CPUID 指令，并且系统可能包含多个 CPU。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T13:45:37.693

1.  处理器 ID 不保证对每个 cpu 都是唯一的，也不保证完全存在。
2.  硬件可以更换——你无法改变这一事实。

建议：
如果您需要唯一标识一台机器 - 可以使用处理器 ID 或 MAC 地址或两者都用于唯一性。（或任何其他硬件相关编号）。但是您必须记住，您识别的是硬件 - 而不是用户，因此如果硬件发生了变化，这就像您认识的人做了整容但现在您不认识他一样。

如果您需要识别用户（我认为这更好），只需让他选择用户名和密码即可。

如果您需要确保只有一个先前确定的用户正在使用您的应用程序，并且您担心他会盗版您的应用程序..唯一的方法是拥有一个服务器/中心点。

# c# - 如何断言字符串列表中的任何字符串是否包含在实际字符串中

> ID：11014302
> 
> 赞同：2
> 
> 时间：2012-06-13T11:54:22.957
> 
> 标签：c#, visual-studio-2010, mstest

我有以下字符串：

```
 Actual       |   Expected
"The Actual String" | "The"
                    | "Actual"
                    | "String"
                    | "Other string"
                    |    ... 
```

我需要创建一个方法，将`Assert`任何`Expected`字符串包含在实际字符串中，如下所示：

```
[TestClass]
public class UnitTest
{
    [TestMethod]
    public void TestMethod()
    {
        //Assertion Passed
        AssertContainsString("The Actual String", "The"); 

        //Assertion Passed
        AssertContainsString("The Actual String", "Something", "Actual"); 

        //Assertion Failed
        AssertContainsString("The Actual String", "Something", "Something Else"); 
    }

    public void AssertContainsString(string actual, params string[] expected)
    {

    }
} 
```

我尝试了该`CollectionAssert.Contains`方法，但没有奏效。有没有一种快速的方法可以在不迭代`expected`字符串的情况下使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-28T14:39:36.293

我认为可以使用这个“StringAssert.Contains(actualString,containsubstring);” 在所有框架 .NET

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T11:56:27.010

如果在实际变量中找到预期数组的所有值，则返回 true：

```
bool foundall = expected.Except(actual.Split(' ')).Count()==0; 
```

即使实际字符串中只包含一个值，也返回 true：

```
bool ans = expected.Except(actual.Split(' ')).Count() != expected.Length; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T11:59:17.823

字符串类的扩展方法？

```
 public static bool AnyIn(this string s, params string[] values)
    {
        return values.Any(x => s.Contains(x));
    } 
```

可以这样调用：

```
 string test = "The actual string";
    if(test.AnyIn("The") == true)   // success
    ...
    if(test.AnyIn("The", "actual", "string") == true)   // success
    ...
    if(test.AnyIn("The", "actual", "value") == true)   // success
    ...
    if(test.AnyIn("some", "value") == true)   // fail 
```

或者也

```
 System.Diagnostics.Debug.Assert(test.AnyIn("some", "value"), "No expected string found"); // fail 
```

当然将扩展方法放在静态类
中也在 Visual Studio 2010 控制台应用程序中尝试过

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace ConsoleApplication2
{
    class Program
    {
        static void Main()
        {
            string test = "The actual string";

            // Prints False
            bool result = test.AnyIn("other", "value");
            Console.WriteLine(result.ToString()); 

            // Prints True
            result = test.AnyIn("other", "The");
            Console.WriteLine(result.ToString()); 

            //  No Assert dialog here 
            System.Diagnostics.Debug.Assert(test.AnyIn("other", "The"), "No expected values found");

            //  Big Assert dialog here with message "No expected values found"
            System.Diagnostics.Debug.Assert(test.AnyIn("other", "The"), "No expected values found");

        }

    }

    static class ext
    {
        public static bool AnyIn(this string s, params string[] values)
        {
            return values.Any(x => s.Contains(x));
        }
    }
} 
```

编辑：

可以通过这种方式更改扩展名来解决不同大小写的问题

```
public static bool AllIn(this string s, params string[] values)     
{         
     return values.Any(x => s.IndexOf(x + " ", StringComparison.CurrentCultureIgnoreCase) >= 0);     
} 
```

但是，为了防止在预期字符串之一嵌入实际字符串时出现误报，您需要在实际字符串的末尾添加一个空格

```
string test = "The actual string ";  // notice the extra space added at the end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-13T12:02:40.493

如果你这样做了

```
if (actual.Split(' ').Contains(expected)) return true; 
```

但我认为你仍然需要迭代预期的

```
foreach (string ex in expected)
{
    if (actual.Split(' ').Contains(ex)) return true;
} 
```

**根据 Gene S 评论**编辑****

 **```
expected.Any(ex => actual.Split(' ').Contains(ex)) 
```

如果你愿意，可以使用糖，但没有节省处理器，它只会让它更难阅读。**

# ios - 代码签名错误：分发 iphone 应用程序

> ID：11014310
> 
> 赞同：0
> 
> 时间：2012-06-13T11:54:51.780
> 
> 标签：ios, iphone, macos

我有一个 iOS 项目要打开，当我打开它时出现错误 -

```
Code Sign error: The identity 'iPhone Distribution: x' doesn't match any valid, non-expired certificate/private key pair in the default keychain 
```

我现在拥有的是项目所有者给我的一个名为的文件-

```
CertificateSigningRequest.certSigningRequest 
```

但我不知道该怎么做。我创建了一个 CA 和所有这些，但我无法让它工作。谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T12:06:56.617

好的，这里是有关如何分发的详细步骤。你似乎对这个话题很陌生：

1.  您想在 Keychain Access 中申请开发和**分发**证书（我看到您已经这样做了）并将其上传到 developer.apple.com（您是开发人员会员计划的一部分，对吗？）

2.  创建应用 ID（在配置文件中）

3.  创建分发证书 - 确保此和第 2 步遵循您的捆绑 ID

4.  下载配置文件并拖动到 Xcode

5.  转到您的 Xcode 项目，在目标或项目构建设置中将您的代码签名选项设置为分发证书（它必须与您的 Bundle ID 以及您的分发和开发证书匹配）

6.  现在去编辑方案->然后从调试更改为发布

7.  设置为 iOS 设备构建（或根本没有）

8.  转到产品 -> 构建 -> 构建存档

9.  在侧面（您的课程选项卡等）向下滚动到应命名的产品（AppName.app）并在查找器中显示它。

    在 iTunes Connect 上创建应用程序

    压缩 .app 并将其加载到 Application Loader

    送出去！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T12:02:37.447

您需要为正在使用的配置文件提供公钥和私钥。创建用于签署配置文件的证书的人必须向您提供它们。

# xml - 如何批量解析xml文件（CMD）

> ID：11014319
> 
> 赞同：5
> 
> 时间：2012-06-13T11:55:32.633
> 
> 标签：xml, batch-file, cmd

你能帮我从这个文件 [http://techpatterns.com/downloads/firefox/useragentswitcher.xml](http://techpatterns.com/downloads/firefox/useragentswitcher.xml)列出浏览器 到 txt 文件，用 %tab% 分隔符分隔吗？

应该有 3 或 4 列：

1）来自示例数据的文件夹描述： `<folder description="Browsers - Windows">`

2）来自示例数据的浏览器类型：`<folder description="Legacy Browsers">`

3）来自示例数据的用户代理：`<useragent description="Avant Browser 1.2" useragent="Avant Browser/1.2.789rel1 (http://www.avantbrowser.com)" app`

在这里我看到了第一个问题，因为有些浏览器不在文件夹中`<folder description="Legacy Browsers">"`，而是在`<separator/>`

所以第一列应该定义系统，第二列是类型，第三列是浏览器。

下一个问题是 Devises 文件夹包含一个文件夹。

```
@echo off 
Setlocal EnableDelayedExpansion
SET file=useragentswitcher.xml
SET delim="

FOR /F "tokens=* skip=1" %%F IN (!file!) DO (
  REM echo %%F
  call :parse "%%F" > temp.txt
  FOR /F "tokens=1,2,3,4,5,6,7 skip=1 delims=" %%A IN (temp.txt) DO (
    IF "%%A"=="folder" (
      SET /A level=!level!+1
      echo Level:!level!
      ) ELSE IF "%%A"=="/folder" (
          SET /A level=!level!-1
          echo Level:!level!
        )

   echo A:%%A
  )
  pause
)

exit /b

:parse
Setlocal EnableDelayedExpansion
  SET A=%*
  REM REMOVE double paranthesis and <> 
  SET A=!A:~2,-2!
  REM replace double qoutes
  SET A=!A:"=µ!
  FOR /F "tokens=1,2 delims=µ=" %%A IN ("!A!") DO (
    SET first=%%A
    SET second=%%B
    echo !first!
    FOR /F "tokens=1,2 delims= " %%A IN ("!first!") DO (
      echo %%A
      echo %%B
    )
    echo !second!
  )
endlocal
exit /b 
```

这会解析该行的一个标签，我现在将使用它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T16:06:50.817

看来您应该能够找到比批处理更好的工具来解析 XML...

但我相信下面的代码就是你要找的。

因为文件夹的数量不同，我交换了输出中列的顺序。我将浏览器描述放在首位，然后是文件夹，每列一个。这允许固定每列的定义。

我使用了 jeb 的答案中的信息`"`作为 FOR 分隔符。

*编辑 - 我简化了代码*

***注意 - 第一次尝试是为了处理使用 Internet Explorer 检索到的 XML 副本而编写的。从那以后，我发现 IE 改变了文件的格式。此代码高度依赖于文件的确切格式，因此它不适用于原始 XML。它还作为一个例子说明为什么批处理是解析 XML 的糟糕选择***

```
@echo off
setlocal enableDelayedExpansion

::Define the files to use - change as needed
set input="test.xml"
set output="result.txt"

::The assignment below should have exactly one TAB character between = and "
set "TAB=   "

set cnt=0
set "folder0="
>%output% (
  for /f usebackq^ tokens^=1^,2^ delims^=^=^" %%A in (%input%) do (
    for %%N in (!cnt!) do (
      if "%%A"=="- <folder description" (
        set /a cnt+=1
        for %%M in (!cnt!) do set "folder%%M=!folder%%N!%TAB%%%B"
      )
      if "%%A"=="  </folder>" (
        set /a cnt-=1
      )
      if "%%A"=="  <useragent description" (
        echo %%B!folder%%N!
      )
    )
  )
) 
```

如果出现在任何描述中，代码将失败`!`，因为延迟扩展会破坏包含`!`. 我检查了，您的文件不包含`!`任何描述。

可以修改代码以`!`在描述中处理，但它会变得更加复杂。它需要打开和关闭延迟扩展，并在 ENDLOCAL 屏障上保存变量值。

上面的代码高度依赖于 XML 的格式。如果非标准破折号被删除，或者空白排列发生变化，它将失败。

下面的变体更健壮一些，但它仍然要求每一行都只包含一个 XML 标记。

```
@echo off
setlocal enableDelayedExpansion

::Define the files to use - change as needed
set input="test.xml"
set output="result.txt"

::The assignment below should have exactly one TAB character between = and "
set "TAB=   "

set cnt=0
set "folder0="
>%output% (
  for /f usebackq^ tokens^=1^,2^ delims^=^=^" %%A in (%input%) do (
    for %%N in (!cnt!) do (
      set "test=%%A"
      if "!test:<folder description=!" neq "!test!" (
        set /a cnt+=1
        for %%M in (!cnt!) do set "folder%%M=!folder%%N!%TAB%%%B"
      )
      if "!test:</folder>=!" neq "!test!" (
        set /a cnt-=1
      )
      if "!test:<useragent description=!" neq "!test!" (
        echo %%B!folder%%N!
      )
    )
  )
) 
```

***编辑 - 最后一个版本***

这是一个可以`!`在数据中处理的版本。我在输出中添加了一个附加列。第一列仍然是浏览器描述。第二列是用户代理字符串。其余列是文件夹。该解决方案使用延迟扩展切换技术。它还使用额外的 FOR /F 来跨 ENDLOCAL 屏障保留变量值。

```
@echo off
setlocal disableDelayedExpansion

::Define the files to use - change as needed
set input="test.xml"
set output="result.txt"

::The assignment below should have exactly one TAB character between = and "
set "TAB=   "

set cnt=0
set folder0=""
>%output% (
  for /f usebackq^ tokens^=1-4^ delims^=^=^" %%A in (%input%) do (
    set "test=%%A"
    set "desc=%%B"
    set "agent=%%D"
    setlocal enableDelayedExpansion
    for %%N in (!cnt!) do (
      if "!test:<folder description=!" neq "!test!" (
        set /a cnt+=1
        for %%M in (!cnt!) do for /f "delims=" %%E in ("!folder%%N!") do (
          endlocal
          set "folder%%M=%%~E%TAB%%%B"
          set "cnt=%%M"
        )
      ) else if "!test:</folder>=!" neq "!test!" (
        endlocal
        set /a cnt-=1
      ) else if "!test:<useragent description=!" neq "!test!" (
        echo !desc!%TAB%!agent!!folder%%N!
        endlocal
      ) else endlocal
    )
  )
) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-02-07T13:55:42.967

检查[xpath.bat](https://github.com/npocmaka/batch.scripts/blob/master/hybrids/jscript/xpath.bat) - 可以通过给定的 xpath 表达式从 xml 获取值的脚本：

```
call xpath.bat "useragentswitcher.xml" "//folder/@description" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T13:47:53.410

回答您的评论`How should I use double quotes as delimiter?`

只需使用表格

```
FOR /F tokens^=1^,2^ delims^=^" %%B IN ("%%A") DO 
```

这是如何工作的？
通常，您不能将引号字符用作分隔符。
这是唯一已知的解决方法，重要的是缺少 FOR/F 选项周围的*正常引号。*
但必须将选项仅解析为一个标记，因此您需要转义所有标准批处理解析器分隔符（空格制表符 =,;）。
引号不是批处理分隔符，但也需要对其进行转义，以避免行的其余部分被引用，然后解析器将失败。
但是您可以更改`^"`with `""`，因为第二个引号将被忽略。

```
FOR /F tokens^=1^,2^ delims^="" %%B IN ("%%A") DO ... 
```

# wpf - 如何在 WPF 中绘制矩形和圆形/椭圆，就像我们通过拖动鼠标在绘画中一样

> ID：11014321
> 
> 赞同：1
> 
> 时间：2012-06-13T11:55:46.283
> 
> 标签：wpf, canvas, drawing, mouse, whiteboard

我正在 WPF 中开发一个白板应用程序。

如何像在 Paint 中通过拖动鼠标指针一样通过拖动鼠标来绘制矩形和圆形/椭圆？

我正在使用 WPF 画布进行绘图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T12:00:45.530

看看下面的链接

[http://www.codeproject.com/Articles/22776/WPF-DrawTools](http://www.codeproject.com/Articles/22776/WPF-DrawTools)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T15:28:54.347

要运行 WPF-DrawTools，您必须：

1.  让VS来转换项目。
2.  设置适当的 NetFramework 版本（例如，Net 4.5）。
3.  如果 VS 自己找不到对应的库（例如 PresentationCore），请添加对它们的引用。

# c# - 出现错误：SQL 中的“将数据类型 nvarchar 转换为数字时出错”

> ID：11014322
> 
> 赞同：3
> 
> 时间：2012-06-13T11:55:53.673
> 
> 标签：c#, sql, web-services, sql-server-2008

我将 4 个参数传递给 asp.net Web 服务。到目前为止，这是我的代码：

网络方法：

```
 [ScriptMethod(ResponseFormat = ResponseFormat.Json)]
    [WebMethod]
    public List<RaumHelper.RAUM> Raum(string RAUMKLASSE_ID, string STADT_ID, string GEBAEUDE_ID, string REGION_ID)
    {
        return RaumHelper.Raum(RAUMKLASSE_ID, STADT_ID, GEBAEUDE_ID, REGION_ID);
    } 
```

助手类：

```
 public class RaumHelper
            {
                public class RAUM
                {
                    public string RaumName { get; set; }
                    public string RaumID { get; set; }

                }

                internal static List<RAUM> Raum( string RAUMKLASSE_ID, string STADT_ID, string GEBAEUDE_ID, string REGION_ID)
                {
                    List<RAUM> strasseObject = new List<RAUM>();

                    using (SqlConnection con = new SqlConnection(@"Data Source=Localhost\SQLEXPRESS;Initial Catalog=BOOK-IT-V2;Integrated Security=true;"))
                    using (SqlCommand cmd = new SqlCommand(@"SELECT r.BEZEICHNUNG AS BEZEICHNUNG, r.ID AS ID FROM RAUM r WHERE RAUMKLASSE_ID = @Raumklasse_ID OR STADT_ID = @Stadt_ID OR GEBAEUDE_ID = @Gebaeude_ID OR REGION_ID = @Region_ID", con)) 
                    {

                        con.Open();
                        cmd.Parameters.AddWithValue("@Raumklasse_ID", RAUMKLASSE_ID);
                        cmd.Parameters.AddWithValue("@Stadt_ID", STADT_ID);
                        cmd.Parameters.AddWithValue("@Gebaeude_ID", GEBAEUDE_ID);
                        cmd.Parameters.AddWithValue("@Region_ID", REGION_ID);

                        using (SqlDataReader rdr = cmd.ExecuteReader())
                        {

                            while (rdr.Read())
                            {

                                if (rdr["BEZEICHNUNG"] != DBNull.Value && rdr["ID"] != DBNull.Value)
                                {

                                    strasseObject.Add(new RAUM()
                                    {
                                        RaumName = rdr["BEZEICHNUNG"].ToString(),
                                        RaumID = rdr["ID"].ToString()

                                    });
                                }

                            }
                        }
                    }
                    return strasseObject;
                }

            } 
```

如果我使用 4 个参数调用该 Web 方法，则该方法工作正常，我得到一个 RaumName 和 RaumID 的列表。但是，如果我只输入一个参数，则会出现错误：

```
 System.Data.SqlClient.SqlException: Error converting data type nvarchar to numeric.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj)
   at System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at System.Data.SqlClient.SqlDataReader.HasMoreRows()
   at System.Data.SqlClient.SqlDataReader.ReadInternal(Boolean setTimeout)
   at System.Data.SqlClient.SqlDataReader.Read() 
```

数据库中的 ID 存储为数字，我传递字符串。我认为这就是问题所在。但我不知道如何解决这个问题。

我还希望我的查询也只使用两个或三个输入的参数。

预先感谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-13T12:06:37.087

通常，将 a 传递`string`给数字参数不是问题，只要 SQL Server 能够将字符串的内容本身转换为数值即可。如果这不起作用，您会收到此错误。

例如：传递`"Hello"`给一个数字参数，你会得到一个错误。通过`"1234"`你没有。请注意，空字符串或包含空格的字符串不能转换为数值！

但是，应该说这样做不是很好的作风。您应该确保您在应用程序中使用的类型与数据库中的类型匹配以避免出现问题。也许有关为什么您需要`string`在应用程序中包含类型的更多详细信息可能会有所帮助。

**编辑 1**
要使查询的参数可选，方法如下：

1.  更改您的 SQL 语句以允许可选参数，例如`WHERE RAUMKLASSE_ID = ISNULL(@Raumklasse_ID, RAUMKLASSE_ID)`.
2.  `@Raumklasse_ID`如果它应该是可选的，请不要添加参数或添加值`DBNull.Value`

您真的应该考虑将您的`string`属性更改为可空类型，例如`int?`.

**编辑 2**
这是您的代码在执行我在编辑 1 中建议的更改时的样子：

```
using (SqlCommand cmd = new SqlCommand(@"SELECT r.BEZEICHNUNG AS BEZEICHNUNG, r.ID AS ID FROM RAUM r WHERE RAUMKLASSE_ID = ISNULL(@Raumklasse_ID, RAUMKLASSE_ID) OR STADT_ID = ISNULL(@Stadt_ID, STADT_ID) OR GEBAEUDE_ID = ISNULL(@Gebaeude_ID, GEBAEUDE_ID) OR REGION_ID = ISNULL(@Region_ID, REGION_ID)", con)) 
{
    con.Open();
    if (!String.IsNullOrWhitespace(RAUMKLASSE_ID))
        cmd.Parameters.AddWithValue("@Raumklasse_ID", RAUMKLASSE_ID);
    else
        cmd.Parameters.AddWithValue("@Raumklasse_ID", DBNull.Value);
    if (!String.IsNullOrWhitespace(STADT_ID))
        cmd.Parameters.AddWithValue("@Stadt_ID", STADT_ID);
    else
        cmd.Parameters.AddWithValue("@Stadt_ID", DBNull.Value);
    if (!String.IsNullOrWhitespace(GEBAEUDE_ID))
        cmd.Parameters.AddWithValue("@Gebaeude_ID", GEBAEUDE_ID);
    else
        cmd.Parameters.AddWithValue("@Gebaeude_ID", DBNull.Value);
    if (!String.IsNullOrWhitespace(REGION_ID))
        cmd.Parameters.AddWithValue("@Region_ID", REGION_ID);
    else
        cmd.Parameters.AddWithValue("@Region_ID", DBNull.Value);
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T12:04:15.637

问题可能是您没有提供任何东西来推断数据类型，因为您没有设置参数的值。

尝试使用 Add 方法设置参数，如下所示：

```
cmd.Parameters.Add("@Raumklasse_ID", SqlDbType.Int).Value = RAUMKLASSE_ID; 
```

这样，如果您不想设置该值，您仍然可以定义参数。

请参阅此处了解更多信息：http: [//msdn.microsoft.com/en-us/library/wbys3e9s](http://msdn.microsoft.com/en-us/library/wbys3e9s)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T12:05:50.940

将您的字符串转换为整数类型

```
 cmd.Parameters.AddWithValue("@Raumklasse_ID", Convert.ToInt32(RAUMKLASSE_ID));
 cmd.Parameters.AddWithValue("@Stadt_ID", Convert.ToInt32(STADT_ID));
 cmd.Parameters.AddWithValue("@Gebaeude_ID", Convert.ToInt32(GEBAEUDE_ID));
 cmd.Parameters.AddWithValue("@Region_ID", Convert.ToInt32(REGION_ID)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T12:07:40.097

这样做

```
cmd.Parameters.Add("@Raumklasse_ID", SqlDbType.Int);// use here your SQL DataType, if it is numberic than use Numeric.
cmd.Parameters[0].value = Convert.ToInt32(RAUMKLASSE_ID); 
```

# c++ - 在 Netbeans 的 c/c++ 工具选项中添加 Qmake 命令选项

> ID：11014328
> 
> 赞同：0
> 
> 时间：2012-06-13T11:56:12.223
> 
> 标签：c++, compilation, qmake

我想知道从哪里可以在 Netbeans 的工具选项中添加 Qmake 命令选项，在添加 Qmake 命令之前是否需要工具包，或者它是否像在 msys/bin 目录中一样。

我使用的是 Netbeans 7.1.1，gcc 版本是 4.6.1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T13:07:52.890

您需要安装 Qt。你可以在[这里](http://qt.nokia.com/)找到它。

# python - 使用 matplotlib 的非连续图表

> ID：11014334
> 
> 赞同：0
> 
> 时间：2012-06-13T11:56:24.853
> 
> 标签：python, matplotlib, pyqt

我想显示一个应该绘制为非连续的图表。图表示例如下；

![在此处输入图像描述](../Images/bf87524a3850040e33b3755770fe3370.png)

怎么画？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T12:43:12.657

broken_barh [()](http://matplotlib.sourceforge.net/api/pyplot_api.html#matplotlib.pyplot.broken_barh)函数呢？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T12:33:21.913

在 pyplot 中使用 scatter() 函数。

[http://matplotlib.sourceforge.net/api/pyplot_api.html#matplotlib.pyplot.scatter](http://matplotlib.sourceforge.net/api/pyplot_api.html#matplotlib.pyplot.scatter)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T12:50:47.453

我认为**[hlines](http://matplotlib.sourceforge.net/api/pyplot_api.html?highlight=hlines#matplotlib.pyplot.hlines)**是你所追求的。

# knockout.js - 如何使用 knockoutjs 有条件地渲染 css 类

> ID：11014336
> 
> 赞同：24
> 
> 时间：2012-06-13T11:56:31.910
> 
> 标签：knockout.js

我有一些像下面这样的html：

```
<div class="control-group">
    <input type="text" data-bind="value: $data.DealCode" name="DealCode" class="input-mini" />
</div> 
```

但是，`ifnot: $data.DealCodeIsValid`我需要呈现以下内容：

```
<div class="control-group error">
    <input type="text" data-bind="value: $data.DealCode" name="DealCode" class="input-mini" />
</div> 
```

请注意 div 中的附加类“错误”。有没有办法用 knockoutjs 做到这一点？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-06-13T12:04:21.710

就像是

```
<div data-bind="css: {'control-group': true, error: (!$data.DealCodeIsValid)}"> 
```

[在这里查看更多信息](http://knockoutjs.com/documentation/css-binding.html)

# watin - WatiN 多文件上传

> ID：11014340
> 
> 赞同：0
> 
> 时间：2012-06-13T11:56:39.277
> 
> 标签：watin

我正在尝试 WatiN 进行一些规范测试。当我试图弄清楚如何设置包含多个文件的文件上传时，我遇到了一个障碍（我只用一个文件进行的测试工作正常）。是否可以使用 WatiN 在上传输入中设置多个文件？

# sql-server-2008 - 如何在多用户模式下重命名数据库

> ID：11014343
> 
> 赞同：14
> 
> 时间：2012-06-13T11:57:00.233
> 
> 标签：sql-server-2008, sql-server-2008-r2

我正在研究 SQL SERVER 2008 和 2008 R2。如何在多用户模式下重命名数据库？我正在使用 sp_rename 但它返回此错误：

> 消息 15225，级别 11，状态 1，过程 sp_rename，第 338 行

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-06-13T12:05:16.203

您不能在使用数据库时重命名它。要么等待维护窗口，要么强制数据库进入单用户模式（这将把所有人踢出去）：

```
USE [master];
GO
ALTER DATABASE foo SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
GO
--EXEC sys.sp_renamedb @dbname = N'foo', @newname = N'bar';
ALTER DATABASE foo MODIFY NAME = bar; -- preferred way
GO
ALTER DATABASE bar SET MULTI_USER; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-13T12:07:10.063

您不能使用 sp_rename 重命名数据库 - 有问题的 sp 将是 sp_renamedb。但是，这将在 SQL Server 的未来版本中删除，首选方法是：

```
ALTER DATABASE dbname MODIFY NAME = newdbname; 
```

但是，如果没有数据库上的排他锁，无论如何您都无法做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-12T06:54:13.013

您可以打开 sql server 配置管理器并停止和启动服务，这对我来说适用于 sql server 2008 和 2012 就好了。

然后在 sql server management studio 中重命名数据库。

“为我工作”

不是真正的“警告”，而是说您想恢复完全相同的数据库，您进入选项并更改 mdf 和 ldf 的名称

# blackberry-playbook - 黑莓 PlayBook 调试问题

> ID：11014344
> 
> 赞同：1
> 
> 时间：2012-06-13T11:57:08.010
> 
> 标签：blackberry-playbook

我已经编译了我的应用程序，当我尝试调试时它给了我以下错误，有人可以帮助我如何解决这个错误

最终启动序列中的错误无法准备和下载二进制打包失败：1错误：无法解析路径变量“workspace_loc”，这是异常的堆栈跟踪

```
at com.qnx.tools.ide.bbt.debug.core.internal.launch.BBTLaunchUtils.prepareAndDownloadBinaries(BBTLaunchUtils.java:305)
at com.qnx.tools.ide.bbt.debug.ui.internal.launch.BBTDSFFinalLaunchSequence.stepPrepareAndDownloadBinariesRemote(BBTDSFFinalLaunchSequence.java:93)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.eclipse.cdt.dsf.concurrent.ReflectionSequence$ReflectionStep.execute(ReflectionSequence.java:155)
at org.eclipse.cdt.dsf.concurrent.Sequence.executeStep(Sequence.java:452)
at org.eclipse.cdt.dsf.concurrent.Sequence.access$2(Sequence.java:366)
at org.eclipse.cdt.dsf.concurrent.Sequence$2.handleSuccess(Sequence.java:413)
at org.eclipse.cdt.dsf.concurrent.RequestMonitor.handleCompleted(RequestMonitor.java:353)
at org.eclipse.cdt.dsf.concurrent.RequestMonitor$2.run(RequestMonitor.java:298)
at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source)
at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
at java.util.concurrent.FutureTask.run(Unknown Source)
at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(Unknown Source)
at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
at java.lang.Thread.run(Unknown Source) 
```

问候阿山

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T11:07:53.090

在 Flash Builder 中右键单击您的项目，然后单击**Resource -> Linked Resources -> Path Variables**：那里是否有**WORKSPACE_LOC**变量，它是否指向有效且可写的路径？

# gwt - 为什么 SimpleBeanEditorDriver 返回空值

> ID：11014346
> 
> 赞同：0
> 
> 时间：2012-06-13T11:57:10.040
> 
> 标签：gwt, uibinder

我有一个 SimpleBeanEditorDriver 来编辑我的帐户 bean，但是当我编辑和调用 flush() 时，我总是得到空值。我检查了所有内容，谷歌文档，stackoverflow，谷歌群组，但没有发现任何问题。我错过了什么 ？

这是我的看法

```
public class AccountCreatorViewImpl extends Composite {

  interface Driver extends SimpleBeanEditorDriver<Account, AccountEditor> {
  }

  interface AccountCreatorViewImplUiBinder extends UiBinder<HTMLPanel, AccountCreatorViewImpl> {
  }

  Driver driver = GWT.create(Driver.class);

  private static AccountCreatorViewImplUiBinder ourUiBinder = GWT.create(AccountCreatorViewImplUiBinder.class);

  private AccountCreatorPresenter presenter;

  @UiField
  AccountEditor accountEditor;

  @UiField
  Button create;

  public AccountCreatorViewImpl() {

    HTMLPanel rootElement = ourUiBinder.createAndBindUi(this);

    initWidget(rootElement);

    Account account = new Account();

    driver.initialize(accountEditor);

    driver.edit(account);

  }

  @UiHandler("create")
  public void onCreate(ClickEvent event) {

    Account editedAccount = driver.flush();
    if (driver.hasErrors()) {

      Window.alert("Has errors! ->"+driver.getErrors().toString());
    }

    Window.alert(editedAccount.getEmail() + "/" + editedAccount.getPassword());

//    presenter.create(editedAccount);
  }

} 
```

这是我的简单编辑器

```
public class AccountEditor extends Composite implements Editor<Account> {

  interface AccountEditorUiBinder extends UiBinder<HTMLPanel, AccountEditor> {
  }

  private static AccountEditorUiBinder ourUiBinder = GWT.create(AccountEditorUiBinder.class);

  @UiField
  TextBox email;

  @UiField
  PasswordTextBox password;

  public AccountEditor() {

    HTMLPanel rootElement = ourUiBinder.createAndBindUi(this);

    initWidget(rootElement);

  }

} 
```

这是我的帐户类帐户

```
public class Account implements Serializable {

  private String email;

  private String password;

  public Account(String email) {
    this.email = email;
  }

  public Account() {

  }

  public Account(String email, String password) {

    this.email = email;
    this.password = password;
  }

  public String getEmail() {
    return email;
  }

  public String getPassword() {
    return password;
  }
} 
```

我的应用程序中的另一个编辑器也有同样的问题。实际上两者都不起作用。当我按下保存或创建时，我得到实体的空值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T12:08:20.063

Try adding setEmail() and setPassword() methods to your account class

# javascript - 如何在 html 中获得运行时控制？

> ID：11014347
> 
> 赞同：-2
> 
> 时间：2012-06-13T11:57:20.937
> 
> 标签：javascript, html, ajax

我正在创建一个项目。在这个我想通过下拉列表获取地址，如果我从下拉列表中选择国家，那么另一个下拉列表将出现，其中包含对应国家的状态。与状态相同，依此类推，直到 requerement？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T12:04:05.120

您正在寻找“级联下拉菜单”。实际上，您的第一个下拉列表在选择时会进行 ajax 调用，成功后会填充第二个下拉列表，依此类推。

这是一个非常常见的功能（可能与 ajax 自动完成一起最常见），一两个谷歌会为您找到一些非常可靠的示例。

我强烈建议使用 jQuery 进行这样的努力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T12:10:39.313

```
 <select name="country" onchange="showstate(this.value);">

//script code
 function showstate(ctr)
  {
if (ctr==" ")
{
    document.getElementById("txtHint").innerHTML="";
    return;
}
if (window.XMLHttpRequest)
{
    xmlhttp=new XMLHttpRequest();
}
else
{
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
}
xmlhttp.onreadystatechange=function()
{
    if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
        var x=xmlhttp.responseText;
        var arr = new Array();
        var v=new Array();
        arr=x.split(",");
        // Create an Option object        
        document.getElementById("DropDownList").innerHTML='<option value="select">Select university</option>';
        for (var i=0;i<arr.length-1;i=i+2)
        {
            v[i]=arr[i];
            v[i+1]=arr[i+1];
            document.getElementById("DropDownList").innerHTML+="<option value="+v[i]+">"+v[i+1]+"</option>";
        }
       }
      }
   xmlhttp.open("GET","getstate.php?q="+ctr,true);
   xmlhttp.send();
  } 
```

// getstate.php

```
 <?php

     $q=$_GET["q"];
     $sql="SELECT DISTINCT `state` FROM `tbname` WHERE `country` = '$q'";
     $result=mysql_query($sql);
     $str='';
     while($row = mysql_fetch_array($result))
   {
    $str.=$row['country'].",";
   }
     echo $str;
?> 
```

# google-chrome - 谷歌浏览器要求更改搜索国家

> ID：11014349
> 
> 赞同：0
> 
> 时间：2012-06-13T11:57:26.280
> 
> 标签：google-chrome

我使用 VPN 连接到互联网，并且正在使用 google chrome 浏览器。

令人讨厌的是，我经常收到一条弹出消息，询问我是否要继续使用 google.se 而不是使用 google.de 进行搜索。在再次询问之前按 no 只会满足它一小段时间，并且没有选项可以关闭它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T12:05:25.797

我剪切并粘贴但为我工作：

或者您可以将“/ncr”添加到您想要的 google 网站的 URL 中，它会让您留在那里 -[例如](http://www.google.co.uk/ncr)

NCR 代表无国家重定向。

# udp - 一般网络问题

> ID：11014351
> 
> 赞同：1
> 
> 时间：2012-06-13T11:57:38.670
> 
> 标签：udp, ip, baseline

我目前正在为网络考试做准备，我有一些问题：

```
Are both UDP and IP unreliable to the same degree? Why or Why not?

What is DC component and baseline wandering in digital transmission? 
```

我实际上在物理学方面不是很好 - 所以如果有人可以用“简单的英语”给我第二个问题的答案，那就太好了

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T12:20:18.053

关于 UDP/IP 问题：两者的不可靠性程度不同。

UDP比较不可靠，因为它的头部简单，没有错误检测机制。

但是 IP 使用伪标头和纠错和检测工具。IPv4 不可靠，但不如 UDP。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T12:43:10.127

至于数字传输：

基线漂移：在解码数字信号时，接收器计算接收信号功率的移动平均值。这个平均值称为基线。现在，当我们有一长串 0 或 1 时，它会导致基线漂移（基线漂移）。

直流分量：当数字信号在一段时间内保持恒定时，频谱会产生非常低的频率，这些零附近的频率称为直流分量。

# php - TCPDF 是否支持字距调整？

> ID：11014355
> 
> 赞同：3
> 
> 时间：2012-06-13T11:58:01.647
> 
> 标签：php, pdf, tcpdf, typography, kerning

我的意思是成对的间距可以防止像[这里描述](http://en.wikipedia.org/wiki/Kerning)的 AV 这样的对之间的奇怪空间。[维基百科页面](https://en.wikipedia.org/wiki/TCPDF)声称确实如此，但我的测试根本没有显示任何字距调整。

我正在运行版本 5.9.156。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T12:00:13.830

不。我测试了像“AV”、“AW”和“T”这样的典型对，它们应该用几种不同的字体减少间距，但不幸的是看不到任何字距调整。

TCPDF 版本：5.9.156

# iphone - 如何从 iphone 中的 url 快速显示图像

> ID：11014359
> 
> 赞同：-2
> 
> 时间：2012-06-13T11:58:08.993
> 
> 标签：iphone, ios5

我的项目基于评级图片。我想知道从链接中快速在 imageview 中显示图像的最佳方法，而不会出现内存泄漏和任何崩溃。因为，将来图像可能会达到数十万个，我将不得不显示这些图像。需要先下载图片吗？？？如果有人对此有所了解，请为我提供一些解决方案。

提前感谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T12:08:54.503

You can download the pictures asynchronously from the internet, which keeps the App responsive. There is already a solution for that, for example by calling the method

> [yourAsynchronousImageView loadImageFromURLString:@"http://your.url/image.jpg"];

in

```
#import <UIKit/UIKit.h>

@interface AsynchronousImageView : UIImageView {
    NSURLConnection *connection;    
    NSMutableData *data;
    bool loading;
}  

@property bool loading;

- (void)loadImageFromURLString:(NSString *)theUrlString;

@end 
```

and

```
#import "AsynchronousImageView.h"

@implementation AsynchronousImageView
@synthesize loading;

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
    }
    return self;
}

- (void)loadImageFromURLString:(NSString *)theUrlString{ 
    self.image = nil;
    NSURLRequest *request = [NSURLRequest requestWithURL:
                             [NSURL URLWithString:theUrlString]
                                             cachePolicy:NSURLRequestReturnCacheDataElseLoad
                                         timeoutInterval:30.0];                          
    connection = [[NSURLConnection alloc]
                  initWithRequest:request delegate:self];
    loading=true;
}

- (void)connection:(NSURLConnection *)theConnection
    didReceiveData:(NSData *)incrementalData {    if (data == nil)
        data = [[NSMutableData alloc] initWithCapacity:2048];                 

    [data appendData:incrementalData];}

- (void)connectionDidFinishLoading:(NSURLConnection *)theConnection {    
    self.image = [UIImage imageWithData:data];
    data = nil; 
    connection = nil;
    loading=false;
}

/*
// Only override drawRect: if you perform custom drawing.
// An empty implementation adversely affects performance during animation.
- (void)drawRect:(CGRect)rect
{
    // Drawing code
}
*/

@end 
```

# spring - 如何使 async=false 和 alwaysSessionAsync=false 在 vm 传输上工作？

> ID：11014361
> 
> 赞同：1
> 
> 时间：2012-06-13T11:58:09.803
> 
> 标签：spring, activemq

我需要实现一个消息传递场景，该场景使用来自多个目的地（主题）的消息。由于这些主题的吞吐量非常低，我正在使用弹簧`simplemessagelistenercontainer`让 activemq 将消息推送到适当的侦听器中。

alwaysSessionAsync=false 确保我与嵌入式代理的 vm 连接不会为每个会话创建一个线程（因为我每个侦听器有一个会话和数千个侦听器）。

像这样，我的配置在内部 activemq 任务线程中启动 simplemessagelistenercontainer，容器将其调度到线程池中。不幸的是，activemq 任务线程非常慢。

所以我想使用 async=false (NOT jms.sendAsync) 来使用消息发送线程来处理消息并将其推送到侦听器中，并将其调度到处理程序线程池中。

不幸的是，这会导致死锁（根据 yourkit）。

我怎样才能使这两个属性起作用？或者：我怎样才能加快异步发送的嵌入式activemq？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T12:16:46.657

`async=false&amp;jms.copyMessageOnSend=false&amp;jms.useAsyncSend=false&amp;jms.alwaysSessionAsync=false&amp;jms.dispatchAsync=false`

做我想做的事。但是，如果您在使用消息的同时发送消息，则会造成死锁。

# jsf-2 - 无法在 p:graphicImage 中显示图像

> ID：11014362
> 
> 赞同：1
> 
> 时间：2012-06-13T11:58:14.377
> 
> 标签：jsf-2, primefaces

我有以下代码，我可以在 ui:repeat 部分看到图像，但是当我单击图像时，命令链接和 setPropertyActionListener 工作正常，但图像没有显示在所需的面板网格中。

```
<p:layoutUnit id="centre" position="center"  >
    <h:panelGrid id="test" columns="2" cellpadding="2" >
        <h:panelGroup>
            <div id="imageWrap" style="width:600px; height:400px; margin:auto; overflow:scroll; position:relative;">
                <p:graphicImage id="prodImage" value="#{imageController.image}" alt="unable to load image #{imageController.imageID}" />
            </div>
        </h:panelGroup>
    </h:panelGrid>
</p:layoutUnit>

<p:layoutUnit id="left" position="west" >
    <h:panelGrid  id="panelGrid3" columns="2" cellspacing="2" cellpadding="2">
        <ui:repeat id="repeat5" value="#{getData.imageThumbnail1}" var="imagesLst" varStatus="loop">
            <h:panelGroup>
                <p:commandLink update=":form:tabView:test" >
                    <f:setPropertyActionListener target="#{imageController.imageID}" value="#{imagesLst.imageID}" />
                    <p:graphicImage id="gi5" value="#{imagesStreamer.image}" alt="image not available" >
                        <f:param name="id" value="#{imagesLst.imageID}" />
                    </p:graphicImage>
                </p:commandLink>
            </h:panelGroup>
        </ui:repeat>
    </h:panelGrid>
</p:layoutUnit> 
```

支持豆

```
@ManagedBean
@SessionScoped
public class imageController implements Serializable {

    private String imageID;
    private StreamedContent sc;

    /** Creates a new instance of imageController */
    public imageController() {
    }

    public void setImageID(String imageID) {
        this.imageID = imageID;
        System.out.println("ImageController set == "+ this.imageID);
    }

    public String getImageID(){
        return imageID;
    }

    public StreamedContent getImage() {
        System.out.println("ImageController get == "+ this.imageID);
        if (imageID != null) {
            ByteArrayInputStream image = GetData.findImages(imageID);
            System.out.println("Passing Default Streamed Content");
            return new DefaultStreamedContent(image);
        }
        return sc;

    }
} 
```

“无法加载图像 #{imageController.imageID}”与所选图像 ID 一起显示，但我在图形面板中看不到图像。在日志中我也没有看到任何错误消息，它返回流式内容。

更新代码：1

```
<p:layoutUnit id="centre" position="center"  >
    <h:panelGrid id="test" columns="2" cellpadding="2" >
        <h:panelGroup>
            <div id="imageWrapper" style="width:600px; height:400px; margin:auto; overflow:scroll; position:relative;">
                <p:graphicImage id="Img1" value="#{imagesStreamer.image}" alt="image id to be displayed #{imagesLst.imageID}" >
                    <f:param name="id5" value="#{imagesLst.imageID}" />
                </p:graphicImage>
            </div>
        </h:panelGroup>
    </h:panelGrid>
</p:layoutUnit>

<p:layoutUnit id="right" position="east" >
    <h:panelGrid  id="panelGrid3" columns="2" cellspacing="2" cellpadding="2">
        <ui:repeat id="repeat5" value="#{getData.imageThumbnail1}" var="imagesLst" varStatus="loop">
            <h:panelGroup>
                <p:commandLink id="cl5" update=":form:tabView:test">
                    <p:graphicImage id="gi5" value="#{imagesStreamer.image}" alt="image not available3" >
                        <f:param name="id5" value="#{imagesLst.imageID}" />
                    </p:graphicImage>
                </p:commandLink>
            </h:panelGroup>
        </ui:repeat>
    </h:panelGrid>
</p:layoutUnit> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T12:02:39.420

代替

```
<p:graphicImage id="prodImage" value="#{imageController.image}" alt="unable to load image #{imageController.imageID}" /> 
```

经过

```
<p:graphicImage id="prodImage" value="#{imagesStreamer.image}" alt="unable to load image #{imageController.imageID}">
    <f:param name="id" value="#{imageController.imageID}" />
</p:graphicImage> 
```

并**删除**该`ImageController#getImage()`方法。继续使用`ImageStreamer`所有动态图像（假设您使用了[之前问题](https://stackoverflow.com/questions/10944673/how-to-use-pgraphicimage-with-defaultstreamedcontent-in-an-uirepeat)之一中提供的图像）。

# progress-4gl - 如何在 cgi-wrapper 代码文件中管理 websession？

> ID：11014365
> 
> 赞同：0
> 
> 时间：2012-06-13T11:58:31.257
> 
> 标签：progress-4gl, openedge, webspeed

我正在使用 webspeed 开发一个 Web 应用程序。我的代码仅用 cgi-wrappers 编写。目前我正在管理wesession（所有案例）。现在的问题是，当我使用 F5 键刷新页面时，我的 .p 总是在创建一个新的会话 ID。我该如何处理.p中的这种情况？当代码写在 .html 文件中，但是当代码完全写在 .p 文件中时，这个问题不会出现

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T08:44:03.033

OpenEdge 世界中的大多数人都编写自己的会话处理程序（包括我自己），尽管有一些替代方案。

正如 Tim 提到的，有一个 Free Framework，它已经存在 12 年了，但我不知道它是否仍在积极开发中。

[eScript](http://www.proaxima.com/escript.shtml)框架是 WebSpeed的绝佳替代品，允许您拆分业务逻辑和 UI。您将意识到使用 cgi-wrappers 对您的字符串处理来说是一种痛苦（4GL 字符串中 JavaScript 代码的引号和双引号是一场噩梦）。完整的框架（我相信使用完整框架的持续许可）内置了完整的会话处理。

我相信在接下来的 12 个月内，eScript 开发人员将会发布一个全新的框架来替代 eScript；[欲了解更多信息，请在规则六](http://rulesix.co.uk/)注册 eScript 开发人员的邮件列表（他的名字是 Matt Verrinder，我与他没有任何关系）。

我自己使用基本的 eScript Web 对象。这没有持续的许可（您只需要从 Matt 那里获得一些前期咨询），并以便宜的方式为您提供业务逻辑/UI 拆分的好处。当然，您仍然必须编写自己的会话处理。

对于 OpenEdge 开发人员来说，一个很好的资源是[www.progrestalk.com](http://www.progresstalk.com)：与 Stackoverflow 相比，您更有可能在那里获得有用的答案。如果您在他们的论坛上进行搜索，您会发现大量有关会话处理的信息。

OpenEdge 确实内置了会话处理。这是Progresstalk 上的一个[线程](http://www.progresstalk.com/showthread.php?116545-WebSpeed-Session-Handling)的摘录：

> 在信使上，您需要在 webspeed 代理的环境部分中设置 $DLC/properties/ubroker.porperties：useConnID=1，您需要设置 SESSION_PATH。这应该指向您想要存储会话变量的目录。如果你已经这样做了，那么你可以使用 setSession("VarName","VarValue") 来设置变量和 getSession("Varname") 来检索值。会话变量存储在文件名 ENCODE(SESSION:SERVER-CONNECTION-ID).tmp 中。
> 
> 这种方法有其缺陷，例如：值始终存储为字符，文件的最大大小为 32K（至少它曾经是）等等。但如果你要做的事情不是太复杂，那么它是一个很好的起点。人们总是可以通过开始实现自己的 sessionManager 来扩展它。

希望里面有一些有用的信息你可以使用！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T13:45:39.517

您需要一种更好的方法来识别会话。看看这里，看看有没有什么有用的：http: [//freeframework.sourceforge.net/](http://freeframework.sourceforge.net/)

# asp.net - 如何在 html/ASP.net 中设置即使网站移动也能正常工作的背景图片？

> ID：11014368
> 
> 赞同：0
> 
> 时间：2012-06-13T11:58:39.780
> 
> 标签：asp.net, html, visual-web-developer-2010

我正在尝试将图像设置为背景图像。从我所读到的 - 我需要在地址之前有一个波浪号（〜），否则如果放在文件夹中，该网站将无法运行。但是，尽管这在我执行以下操作时有效（因为它不是*背景*图像，所以没有得到我想要的结果）：

```
<asp:Image ID="MyImage" runat="server" ImageUrl="~/images/Image1.png"/> 
```

它在我需要它工作的地方不起作用：

```
<body style="background-image: url(~/images/Image1.png) ; background-position: left top; background-repeat: no-repeat"> 
```

在那里添加波浪号会导致图像消失。

那么如何将波浪号添加到背景图像中呢？（为什么它在那里不起作用？）

编辑：我尝试过：

```
background-image: url(images/topleft.png) 
```

（没有第一个正斜杠）但是从该页面（这是母版页）继承的任何页面都没有“找到”图像。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T12:11:37.913

如果您将所有样式都移到 css 中，事情会变得更容易，这样您在解析 URL 时就不会遇到任何问题，因为它们都与样式表的位置相关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T12:18:31.620

您的css文件在根文件夹中吗？可能是您的页面没有找到 css 文件或所有页面的 url 不同（保存在不同文件夹中的页面）？请确保您具有正确的目录结构：

```
+--Root folder

  +--Css (folder)
     \--Stylesheet.css

  +--Images (folder)
    \--image.jpg

  +--Pages (folder)
    \--mypage.aspx

 \--Default.aspx 
```

# jquery - jQuery 选择所有 SVG 路径并应用动画填充

> ID：11014375
> 
> 赞同：3
> 
> 时间：2012-06-13T11:59:12.300
> 
> 标签：jquery, path, svg, selector

我有一个工作国家地图，其中包含在单击和悬停时填充动画的区域。每条路径单独工作。

我想添加一个 Select All/Clear All 选项，它将点击效果应用于所有路径。我创建了一个新的 div

```
<div id="selectAll">Click to Select All</div> 
```

然后用一些 jQuery

```
$('#selectAll').click(function(){
  $("[id^=Co]").animate({
         fill: '#698B22'
         }, 300);
}); 
```

选择器`"[id^=Co]"`可以访问所有路径，因为它们的所有 id 都以“Co”开头。这个选择器还可以完美地与我的每个区域的 qtip 配合使用。

我不确定我在这里做错了什么。任何指导都会有很大帮助。蒂亚

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-27T06:59:11.580

添加 jquery.color 插件，然后在您的代码之前添加：

```
 jQuery.Color.hook( "fill stroke" ); 
```

那么您的原始动画功能将起作用

```
$('#selectAll').click(function(){
  $("[id^=Co]").animate({
         fill: '#698B22'
         }, 300);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T09:33:21.050

在您的选择操作中，您必须以某种方式获取 raphaël 对象才能使用 raphaël 的动画功能。不确定这是否可能。

但是您可以创建一个稍后[`set`](http://raphaeljs.com/reference.html#Paper.set)需要更改的路径的 raphaël，然后`set`在单击时更改填充。

# c# - MEF 用于流程定义的动态加载

> ID：11014381
> 
> 赞同：0
> 
> 时间：2012-06-13T11:59:26.967
> 
> 标签：c#, mef, extensibility

MEF 用于流程定义的动态加载

我们有一个由几个部分组成的应用程序：

*   ModelBuilder：允许构建 ProcessDefinition（活动、网关、事件等）和任务的域模型。
*   具体的 ProcessDefinitions：解决特定业务的 ProcessDefinitions 的集合。每个程序集都包含一组具体的 ProcessDefinitions、Tasks 等。
*   运行时：我们希望它动态加载包含 Concrete ProcessDefinitions 的程序集，并能够通过一个简单的服务 FindProcessDefinition(proceedingId,versionPolicy) 找到它们，该服务将查看所有 Concrete ProcessDefinition 部分。ProcessDefinition 必须被缓存/单例。

你认为 MEF 可以解决这个问题吗？我见过 MEF 的示例，但它们用于实现接口，而不是用于这种“构建”模式。

任何提示如何做到这一点？还有其他选择吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T12:51:37.287

如果您的具体流程定义和实例化这些类的构建器没有通用接口，那么 MEF 似乎不是正确的工具 (imo)。

也许您可以让每个构建器实现一个通用接口。但是每个具体的流程定义也需要一个公共接口。情况似乎并非如此。在您的代码中，您不这样做：

```
new ConcreteProcessDefinition1.run() 
```

和

```
new ConcreteProcessDefinition2.run(), 
```

在您的代码中，您执行类似的操作

```
ConcreteProcessDefinition1.doXYZ(input1, input2) 
```

和

```
ConcreteProcessDefinition2.doSomethingTotallyDifferent(input3) 
```

为什么需要动态加载流程定义？您的客户（无法访问您的源代码）会创建流程定义吗？

# android - 使用 sharedpreferences 在 android 中存储和检索数字

> ID：11014382
> 
> 赞同：1
> 
> 时间：2012-06-13T11:59:32.020
> 
> 标签：android, sharedpreferences

我正在尝试在 android 中存储和检索数字，以便稍后我可以对结果进行计算。我正在设法存储和获取字符串，但由于某种原因似乎无法让它适用于整数

这是我测试的字符串代码

节省...

```
getSharedPreferences("words", 0).edit().putString("YAS", wordString).commit(); 
```

收到...

```
String words= getSharedPreferences("words", 0).getString("YAS", "");
t.setText(words); 
```

但是当我用整数尝试类似的事情时它不起作用。

节省...

```
getSharedPreferences("number", 0).edit().putInt("numbers", 1).commit(); 
```

收到...

```
int test2 = getSharedPreferences("number", 0).getInt("numbers",0); 
```

基本上我需要在按下按钮之前将保存的变量设置为 0（我猜它会是因为它当时不存在），然后在按下按钮时更改为 1。无论按钮被按下多少次，它只会等于 1 为任何帮助而欢呼

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T12:16:33.937

根据您的评论，我假设您正在做这样的事情：

```
int test2 = getSharedPreferences("number", 0).getInt("numbers",0);
t.setText(test2); 
```

这将使系统在您的 xml 资源文件中查找资源 id 值为 test2（在您的情况下为 0）的资源。此资源将不存在，您会遇到异常。

利用

```
int test2 = getSharedPreferences("number", 0).getInt("numbers",0);
t.setText(Integer.toString(test2)); 
```

反而。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T12:06:00.777

你错了，在按下按钮之前 SharedPrefereces 不存在。第一次 - 是的，它不存在。但是，当您保存您的价值时，无论您重新启动应用程序多少次，它都会在那里。但是，如果您删除您的应用程序，那么 SharedPrefereces 也将被删除。

看起来您应该使用一个简单的整数变量（例如，类字段）。

# javascript - 取消文件上传 - 监听器？

> ID：11014384
> 
> 赞同：7
> 
> 时间：2012-06-13T11:59:35.577
> 
> 标签：javascript, jquery

> **可能重复：**
> [JavaScript 中的“文件对话框取消”事件](https://stackoverflow.com/questions/9285937/on-file-dialog-cancel-event-in-javascript)

当用户单击取消而不是在文件上传对话框上完成时，是否有监听器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T12:04:37.793

不，没有办法确定用户是否使用 input="file" html 元素单击了“取消”。

如果您需要对网页上的文件上传进行更多控制，您可以[像 Gmail 一样使用 Flash](http://googlesystem.blogspot.co.uk/2009/02/better-interface-for-uploading-gmail.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T12:14:25.560

不，但是您可以使用事件的侦听器检查值是否已更改（例如，用户选择了文件）`change`。

简单的例子：

**HTML：**

```
<input id=f type=file> 
```

**JavaScript：**

```
function picked(){
    alert("Picked");                
}

$('#f').focus(function(evt){
    $(this).change(picked);   
}); 
```

↪[在 jsFiddle 查看这个例子](http://jsfiddle.net/Xnmjw/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-13T12:21:12.877

正如其他人所提到的，输入上传标签不能这样做。

我在使用[这个 3rd 方 JS 上传](https://github.com/bencolon/file-uploader)器时有过很好的体验。它不使用 Flash，因此也适用于移动设备。

您可以设置：

```
onCancel: function(id, fileName){} 
```

在初始设置调用中。有关更多详细信息，请参阅 Github 页面上的说明。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-06-13T12:02:39.233

很可能取决于浏览器。某些浏览器可能允许您捕捉到这一点。其他浏览器可能不会。这是因为 HTML 标准没有明确说明文件上传控件的外观或必须如何实现文件选择。它[只是说](http://www.w3.org/TR/html401/interact/forms.html#file-select)：

> 此控件类型允许用户选择文件，以便可以将其内容与表单一起提交。INPUT 元素用于创建文件选择控件。

浏览器开发人员可以选择他们允许您选择文件的方式。它可能是一个弹出窗口，也可能是您必须从中选择的计算机/设备中所有文件的列表。

[HTML5](http://www.whatwg.org/specs/web-apps/current-work/multipage/states-of-the-type-attribute.html#file-upload-state-%28type=file%29)对行为的定义要好一些，但同样没有涉及文件选择过程。

# xml - 来自 XML 的 Sencha Touch 2 TreeStore

> ID：11014387
> 
> 赞同：0
> 
> 时间：2012-06-13T12:00:07.307
> 
> 标签：xml, tree, sencha-touch

我需要帮助，因为从 xml 创建 TreeStore 时遇到问题（存储用于 NestedList）。查看Javascript代码如下。

```
{
            xtype: 'nestedlist',
            title: 'Журнал',
            iconCls: 'bookmarks',
            displayField: 'title',
            store: {
                type: 'tree',
                model: 'App.model.magazineNumber',
                root: {
                    leaf: false
                },
                proxy: {
                    type: 'ajax',
                    url: 'http://localhost:57648/repo/dataMocks/contentListItems.xml',
                    reader: {
                        type: 'xml',
                        rootProperty: 'items',
                        record: 'magazineNumber'
                    }
                }
            }
} 
```

模型定义

```
Ext.define('App.model.magazineNumber', {
extend: 'Ext.data.Model',
config: {
    fields:
        [
            'title',
            'description',
            {
                name: 'leaf',
                defaultValue: false
            }]
//this doesn't help
//        , hasMany: [{
//            model: 'App.model.magazineNumber',
//            name: 'items'
//        }]
//        , belongsTo: 'App.model.magazineNumber'
    }
}); 
```

和xml文件

```
<?xml version="1.0" encoding="utf-8" ?>
<items>
  <magazineNumber>
    <title>Первый номер</title>
    <description>Описание первого номера</description>
    <items>
      <magazineNumber>
        <title>Статья один</title>
        <description>Описание cтатьи один</description>
        <contentItemId>1</contentItemId>
      </magazineNumber>
      <magazineNumber>
        <title>Статья два</title>
        <description>Описание cтатьи два</description>
        <contentItemId>2</contentItemId>
      </magazineNumber>
      <magazineNumber>
        <title>Статья три</title>
        <description>Описание cтатьи три</description>
        <contentItemId>3</contentItemId>
      </magazineNumber>
    </items>
  </magazineNumber>
  <magazineNumber>
    <id>5</id>
    <title>Второй номер</title>
    <description>Описание второго номера</description>
    <items>
      <magazineNumber>
        <title>Статья один</title>
        <description>Описание cтатьи один</description>
        <contentItemId>4</contentItemId>
      </magazineNumber>
      <magazineNumber>
        <title>Статья два</title>
        <description>Описание cтатьи два</description>
        <contentItemId>5</contentItemId>
      </magazineNumber>
    </items>
  </magazineNumber>
</items> 
```

并且 Nestedlist 显示平面结构（所有项目一次 - 1-st top-level magazineNumber, 3 - children, 2-nd top-level magazineNumber, 3 childred ），但是如果我点击顶级项目（就 xml 文件数据而言) 它显示了 3 个项目的孩子。如果点击子项 - 嵌套列表将返回“平面”视图。

我应该将自关联模型与其他关联配置或嵌套模型一起使用，我应该将“项目”字段添加到模型还是以某种方式更改存储\代理配置？

一些代码示例将不胜感激。

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T18:13:47.870

你能试试这个

```
proxy: {
    type: 'ajax',
    url: 'http://localhost:57648/repo/dataMocks/contentListItems.xml',
    reader: {
       type: 'xml',
       record: 'magazineNumber'
    }
} 
```

并进入`store: { ..., autoLoad: true }`

我希望这有帮助。：） 再见。

# jquery - 更改选择标签标题的颜色

> ID：11014389
> 
> 赞同：2
> 
> 时间：2012-06-13T12:00:25.403
> 
> 标签：jquery, html, css

我有以下代码

CSS

```
select.select { 
    color:#FFFFFF; 
    height: 15px; 
    width: 105px; 
    background:#996633
} 
```

HTML

```
<select class="select" title="Select A Value">
    <option></option>
    <option>1</option>
    <option>2</option>
    <option>3</option>
    <option>4</option>
</select> 
```

在下面的代码中，我可以更改`select`框的字体颜色，但我不知道如何更改标签`title`中的颜色。`<select>`谁能帮我这个？

我从 [http://cssglobe.com/post/8802/custom-styling-of-the-select-elements获得的参考资料](http://cssglobe.com/post/8802/custom-styling-of-the-select-elements)

以上网站

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T12:33:51.083

做一件事。我已经检查了您提供的网站。你可以`span.select`在 CSS 上找到。只需添加

你需要的颜色

例如

```
span.select 
{ 
//Other Codes
color: #FFFFFF; 
} 
```

我想你的问题会解决的。。

这不是 CSS 或 HTML 问题。标题标签来自 jquery。感谢您提供链接。您的 JSFiddle 示例没有显示您的实际查询，因为您没有提供那里的所有信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T12:03:21.073

使用这个简单的自定义选择框 - [http://code.google.com/p/select-box/](http://code.google.com/p/select-box/)

# java - 使用身份验证的 Java ProcessBuilder

> ID：11014398
> 
> 赞同：1
> 
> 时间：2012-06-13T12:00:59.617
> 
> 标签：java, processbuilder

我正在使用 java process builder 执行外部应用程序。

例如

```
./appl -file user@host:/tmp/out.log 
```

此应用程序首先`out.log`从外部主机检索文件，然后执行。此外，一旦执行上述命令提示符，它会提示输入主机密码。

如何使用 java process builder 实现这一目标？我尝试以下面提到的方式输入命令。但是它会引发找不到主机的错误。

```
List<String> command = new ArrayList<String>();
command.add("./appl");
command.add("-file");
command.add("user@host:/tmp/out.log"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T12:10:29.767

As you have explicitly mentioned: *Also, once the above command prompt is executed, it prompts for the host password.*

I believe the reason that the command is not being executed because the sub-process that you have triggered needs an input(host password),which you are not providing. Hence, you need to make an `OutputStream` to provide an input to your sub-process. For starters, [read this question](https://stackoverflow.com/questions/10810943/executing-shell-scripts-from-java-shell-scipts-having-read-operation/10811038#10811038).

# java - 具有不同名称的相同 XmlElements

> ID：11014403
> 
> 赞同：1
> 
> 时间：2012-06-13T12:01:12.457
> 
> 标签：java, jaxb

我有这样的 XML 结构：

```
<page>
  <lang>
    <fr>La météo de la semaine</fr>
    <en>This week’s weather</en>
    <l code="de">Wetter Woche</l>
  </lang>
</page> 
```

消息以各种语言重复。每个备选方案都包含在一个标有 ISO-639 语言代码的元素中。为方便起见，`<da>, <de>` 可以用来代替`<l code="da">, <l code="de">`. 当然，我不想在 lang 类中为每种语言定义一个字段。可能吗？注意：我不想使用任何 jaxb 扩展，例如 EclipseLink JAXB (MOXy)，但我将不胜感激任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T14:23:13.663

我相信我知道你在问什么。您希望将此 XML 转换为一个 Java 类对象，其中填充了每种语言和语言内容。但是，您不想拥有一百万个不同的成员变量，每种语言都有一个。

我推荐的是一个 Map 对象，它将语言前缀与每种语言的内容配对。如果您不熟悉地图， 请查看[http://docs.oracle.com/javase/6/docs/api/java/util/Map.html 。](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html)

使用这种方法，您可以使用正在使用的任何解析策略来为 XML 中的每个标记-内容对创建一个新的键值对。

# php - 警告：PDOStatement::execute() [pdostatement.execute]: SQLSTATE[HY093]: 无效参数号：

> ID：11014405
> 
> 赞同：0
> 
> 时间：2012-06-13T12:01:18.070
> 
> 标签：php, binding, pdo

我正在尝试使用以下代码在搜索字段中使用单词来搜索数据库。

出于某种原因，我收到以下错误

> 警告：PDOStatement::bindValue() [pdostatement.bindvalue]: SQLSTATE[HY093]: 参数号无效：列/参数从 1 开始。

这是功能代码：

```
// Retrieve search results
    function retrieve_search_posts($searchfield){
        //test the connection
        try{
            //connect to the database
            $dbh = new PDO("mysql:host=localhost;dbname=mjbox","root", "usbw");
        //if there is an error catch it here
        } catch( PDOException $e ) {
            //display the error
            echo $e->getMessage();

        }

        $where = array();

        $words = preg_split('/[\s]+/',$searchfield);

        $total_words = count($searchfield);

        for($i = 0; $i < count($words); $i++){

            $where[] .= "`post_title` LIKE ?";

        }

        $where_string = implode(" OR ", $where);

        $query = "
                                SELECT  p.post_id, post_year, post_desc, post_title, post_date, img_file_name, p.cat_id
                                FROM    mjbox_posts p
                                JOIN    mjbox_images i
                                ON      i.post_id = p.post_id
                                        AND i.cat_id = p.cat_id
                                        AND i.img_is_thumb = 1
                                        AND post_active = 1
                                WHERE post_title LIKE ?
                                ORDER BY post_date
                                DESC";

        $stmt = $dbh->prepare($query);

        foreach($words AS $index => $word){
            $stmt->bindValue($index, $word, PDO::PARAM_STR);
        }

        $stmt->execute();

        $searcharray = $stmt->fetchAll(PDO::FETCH_ASSOC);

        return $searcharray;
    } 
```

我做错了什么导致输出的错误消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T12:11:13.940

首先，您没有*使用*`...OR LIKE`您在循环中仔细构建的子句字符串。

其次，正如错误所说，准备好的语句参数是 1-indexed，而您的数组是 0-indexed。您需要将数组中的所有索引向上移动 1 以使其与您的 current 一起使用`foreach`，或者在循环期间向它们添加 1。

试试这个：

```
function retrieve_search_posts($searchfield){
    //test the connection
    try{
        //connect to the database
        $dbh = new PDO("mysql:host=localhost;dbname=mjbox","root", "usbw");
    //if there is an error catch it here
    } catch( PDOException $e ) {
        //display the error
        echo $e->getMessage();

    }

    $words = preg_split('/[\s]+/',$searchfield);

    // Easy way to 1-index a 0-indexed array
    array_unshift($words, '');
    unset($words[0]);

    // Never used and meaningless - $searchfield is a string
    // $total_words = count($searchfield);

    // Tidier and more resilient than the loop
    $where_string = implode(" OR ", array_fill(0, count($words), "`post_title` LIKE ?"));

    $query = "
       SELECT  p.post_id, post_year, post_desc, post_title, post_date, img_file_name, p.cat_id
       FROM    mjbox_posts p
       JOIN    mjbox_images i
       ON      i.post_id = p.post_id
               AND i.cat_id = p.cat_id
               AND i.img_is_thumb = 1
               AND post_active = 1
       WHERE $where_string
       ORDER BY post_date
       DESC
    ";

    $stmt = $dbh->prepare($query);

    foreach ($words AS $index => $word){
        // You may want to use "%$word%" or similar below, as it is the LIKE
        // keyword in your query is doing nothing and you might as well use =
        $stmt->bindValue($index, $word, PDO::PARAM_STR);
    }

    // Handle the potential error here!
    $stmt->execute();

    return $stmt->fetchAll(PDO::FETCH_ASSOC);

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T12:16:48.027

“1-based”不是一个非常友好的错误信息

维基百科：[http ://en.wikipedia.org/wiki/Array_data_type#Index_origin](http://en.wikipedia.org/wiki/Array_data_type#Index_origin)

基于 1 = 最小值为 1，因此 0（php/c 数组中的第一个值）无效

```
 foreach($words AS $index => $word){
        $stmt->bindValue($index+1, $word, PDO::PARAM_STR);
    } 
```

# c# - 无法在 System.DirectoryServices.AccountManagement.GroupPrincipal 中投射类型的对象

> ID：11014406
> 
> 赞同：25
> 
> 时间：2012-06-13T12:01:26.027
> 
> 标签：c#, iis

我正在使用`UserPrincipal.Current.ToString()`域中的方法获取具有有效域的当前登录域用户。但是当我在一个字符串中显示它时，它在 IIS 服务器中托管时给出错误：

```
Unable to cast object of type 'System.DirectoryServices.AccountManagement.GroupPrincipal'
           to type 'System.DirectoryServices.AccountManagement.UserPrincipal'. 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2015-08-04T21:46:37.827

我有同样的问题。它在我的本地机器上运行良好，但是当将它部署到服务器上的 IIS 时它失败了。最后，我必须更改两件事才能使其正常工作：

1.  将身份验证更改为“Windows 身份验证”（[操作方法](http://www.iis.net/configreference/system.webserver/security/authentication/windowsauthentication)）

2.  不要使用当前，而是分两步进行：（[来源](https://stackoverflow.com/questions/4961073/getting-active-directory-info-when-using-windows-authentication)）

`PrincipalContext ctx = new PrincipalContext(ContextType.Domain);`

`UserPrincipal user = UserPrincipal.FindByIdentity(ctx, User.Identity.Name);`

为了最终获得名称（或任何其他信息），我使用了`user.DisplayName`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-13T12:28:28.177

在 Windows 7 上的 IIS 7 下运行时，我看到了这个异常。

> System.Security.Principal.WindowsIdentity.GetCurrent().Name 返回“IIS APPPOOL\ASP.NET v4.0”。

这[不是一个真实的用户帐户](http://learn.iis.net/page.aspx/624/application-pool-identities/)，这部分解释了正在发生的事情，尽管恕我直言`UserPrincipal.Current`应该更优雅地处理这种情况。

我认为这是一个错误，并在 Connect 上创建了一个错误：

[http://connect.microsoft.com/VisualStudio/feedback/details/748790/userprincipal-current-throws-invalidcastexception](http://connect.microsoft.com/VisualStudio/feedback/details/748790/userprincipal-current-throws-invalidcastexception)

作为一种解决方法，用于`System.Security.Principal.WindowsIdentity.GetCurrent()`获取 IIS AppPool 的标识。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-18T16:13:01.867

这里的问题是该`UserPrincipal.Current`属性将尝试访问当前线程的上下文。但是，如果没有 ASP.NET 模拟，这意味着该标识将是应用程序池的配置标识。即使使用 ASP.NET 模拟，它也必须以某种方式访问​​ Active Directory，因此需要针对域控制器进行身份验证。如果 IIS 中选择的身份验证方法未提供此功能，则可能会出现类似错误。

根据我的经验，只有“BASIC”身份验证和 100% 正确实施的“KERBEROS”版本才能工作。请记住，Kerberos 与处理应用程序池和 SPN 的方式并不真正兼容，并且很可能会失败。NTLM - 这是 IIS 中 Windows 身份验证的后备 - 由于服务器上缺少密码而无法工作。

有关 HTTP/Kerberos 问题的好读物是：http: [//blogs.msdn.com/b/friis/archive/2009/12/31/things-to-check-when-kerberos-authentication-fails-using-iis -ie.aspx](http://blogs.msdn.com/b/friis/archive/2009/12/31/things-to-check-when-kerberos-authentication-fails-using-iis-ie.aspx)

# php - 当我从其他模型调用数据时，为什么我在 yii 管理用户中缺少搜索框？

> ID：11014408
> 
> 赞同：1
> 
> 时间：2012-06-13T12:01:31.673
> 
> 标签：php, frameworks, yii

`Created By`当我从其他模型（管理员）关系中调用值时，为什么文本框会在下面消失。无论模型关系如何，如何让文本框显示？

有关该问题的更多信息，请参阅屏幕截图：

![截屏](../Images/dcc4f043e8323d56caf23689619d8d44.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T12:56:58.300

Yii CGridView 不会为那些不属于所示表格的列创建 inputFiled（与关系一样）。如果要显示过滤器框（下拉菜单或任何您想要的，一种简单的方法是创建一个自定义 CDataColumn 并在您的网格中使用它：

```
array(
    'name'=>'customer.createdBy.name',
    'header' => 'Created by',
    'class' => 'application.modules.mine.components.DataColumnCreatedBy',
), 
```

现在定义您的扩展列以呈现过滤器：

```
class DataColumnCreatedBy extends CDataColumn
{
    public function renderFilterCell()
    {
        echo "<td>";
        echo CHtml::inputField('createdBy');
        echo "</td>";
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T13:11:28.097

最好的解决方案是添加下拉列表，因为您必须在 createdBy 字段中有 ID，并且不希望用户使用数字 ID 进行搜索。下面的文章可以帮助你

[http://help.discretelogix.com/php/yii/replace-text-box-with-drop-down-list-in-filter-of-cgridview.htm](http://help.discretelogix.com/php/yii/replace-text-box-with-drop-down-list-in-filter-of-cgridview.htm)

如果您仍想添加文本框，则只需将文本框 html 分配给`<input type="text" name="ModelName[createdBy]">`CDataColumn 的“过滤器”属性

```
'column_id'=> array(
        'name' => 'createdBy',
        'value' => '$data->relatedModel->createdBy',
        'filter'=> '<input type="text" name="ModelName[createdBy]">' 
```

),

希望这可以帮助

# flash - Flash CS5.5 - 赢投影仪

> ID：11014415
> 
> 赞同：0
> 
> 时间：2012-06-13T12:01:55.170
> 
> 标签：flash

我使用 win-projector 将 flash 文件保存为 .exe。我导出的应用程序使用了一些包含在名为“媒体”的文件夹中的音频文件。

当我运行 .exe 时，只有当 .exe 本身与“媒体”文件夹位于同一文件夹中时，它才会重现声音。那么，如何在最终的 .exe 中包含该文件夹，以便它可以在我移动的任何地方运行？

（对不起，我的英语不好...）

# ruby-on-rails - Thinking Sphinx 通配符搜索和模糊运算符未找到

> ID：11014420
> 
> 赞同：1
> 
> 时间：2012-06-13T12:02:18.700
> 
> 标签：ruby-on-rails, full-text-search, thinking-sphinx

我正在尝试为一组模型实现全文。我在索引速度和搜索时间方面听说了 sphinx 的强大功能。但是通配符搜索和最近的单词匹配（Levenshtein 距离）在这方面不起作用。

```
 Post.search 'kar' 
returns no results while 
    Post.search 'karthik' 
returns 10 results matching the exact string. I even tried with star parameter
    Post.search 'kar' , :star => true
 which returns zero results. 
```

我在 lucene 风格的全文搜索引擎中尝试了所有组合，如 ' `kar*`' 、 ' ' 等，效果很好。`krathik~`我是否缺少任何可选参数或者 sphinx 仍然缺少此功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T22:13:42.757

您是否在 config/sphinx.yml 文件中添加了类似以下内容？

```
development:
min_infix_len: 2
sql_host: localhost
sql_user: root 
```

# android - 如何让 Rotate3dAnimation 更流畅？

> ID：11014423
> 
> 赞同：13
> 
> 时间：2012-06-13T12:02:26.827
> 
> 标签：android, android-layout

在我的应用程序中，我使用[Rotate3dAnimation](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/animation/Rotate3dAnimation.html) 来显示 Google 地图。代码工作正常，但动画不流畅，旋转视图时也可以看到一些线条。请看一下我的代码并建议我如何使这个动画更流畅？高度赞赏以任何其他有效方式实现此类动画的建议。![在此处输入图像描述](../Images/f53bcaf249d8e7eda386ec5701e40870.png)

```
public class EventsActivity extends MapActivity implements DialogInterface.OnDismissListener {

        private EventsItemModel     eventsItemModel;
        private Integer             eventItemId;
        private Integer             eventCategoryId;
        private static MapOverlay   mapOverlay;
        Drawable                    marker;
        Context                     context;
        private static String       MY_LOCATION = "My Location";
        private ViewGroup           mContainer;
        private ImageView           mImageView;
        private MapView             mMapView;
        private static boolean      isFlipped   = false;

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.event_item_detail);
            mContainer = (ViewGroup) findViewById(R.id.event_container);
            // Since we are caching large views, we want to keep their cache
            // between each animation
            mContainer.setPersistentDrawingCache(ViewGroup.PERSISTENT_ANIMATION_CACHE);
            mMapView = (MapView) findViewById(R.id.mapview);
            mImageView = (ImageView) findViewById(R.id.mapPreview);

            mImageView.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    isFlipped = true;
                    applyRotation(1, 0, 90);
                }
            });

            try {
                eventCategoryId = getIntent().getIntExtra(AppConstants.EVENT_CATEGORY, 0);
                eventItemId = getIntent().getIntExtra(AppConstants.EVENT_ID, 0);
            }
            catch (Exception e) {
                e.printStackTrace();
            }

        }

        public void onResume() {
            super.onResume();
            WeakReference<EventsActivity> weakContext = new WeakReference<EventsActivity>(this);
            EventsAsyncTask task = new EventsAsyncTask(weakContext);
            task.execute(eventItemId, eventCategoryId);
        }

        public void onTaskComplete(EventsItemModel eiModel) {
            this.eventsItemModel = eiModel;
            TextView calTitle = (TextView) findViewById(R.id.news_title);
            TextView eventTitle = (TextView) findViewById(R.id.cal_event_title);
            TextView calDate = (TextView) findViewById(R.id.cal_date);
            TextView calTime = (TextView) findViewById(R.id.cal_time);
            TextView calAddress = (TextView) findViewById(R.id.cal_address);
            TextView calDescription = (TextView) findViewById(R.id.cal_description);

            try {
                calTitle.setText(eventsItemModel.getEventsCategory().getTitle());
                calTitle.setVisibility(View.VISIBLE);
                eventTitle.setText(eventsItemModel.getEventTitle());
                calDate.setText(eventsItemModel.getFormattedDateRange());
                // TODO:Format start and end time
                calTime.setText("Time: " + eventsItemModel.getFormattedStartTime() + " - " + eventsItemModel.getFormattedEndTime());
                calAddress.setText(eventsItemModel.getAddress());
                calDescription.setText(eventsItemModel.getDescription());
                System.out.println("<<<<<<<<< EventsActivity >>>>>>>>> isRead? " + eventsItemModel.getReadUnread());
                eventsItemModel.setReadUnread(true);
                System.out.println("<<<<<<<<<< EventsActivity >>>>>>>>>> isRead? " + eventsItemModel.getReadUnread());
            }
            catch (Exception e) {
                e.printStackTrace();
            }

            mMapView.setBuiltInZoomControls(true);
            setMapParameters();
            createItemizedOverlay();
            setLocationMarker(createMarker(R.drawable.location_marker));
            showLocationPointOnMap();
        }

        @Override
        public void onDismiss(DialogInterface dialog) {

        }

        @Override
        protected boolean isRouteDisplayed() {
            return false;
        }

        public void createItemizedOverlay() {
            mapOverlay = new MapOverlay(this);
        }

        public void setLocationMarker(Drawable marker) {
            mapOverlay.setLocationMarker(marker);
        }

        public void showLocationPointOnMap() {

            GeoPoint geoPoint = new GeoPoint(0, 0);
            if (eventsItemModel != null && eventsItemModel.getLatitude() != null && eventsItemModel.getLatitude().length() > 0 && eventsItemModel.getLongitude() != null
                    && eventsItemModel.getLongitude().length() > 0) {
                try {
                    geoPoint = new GeoPoint((int) (Double.parseDouble(eventsItemModel.getLatitude()) * 1E6), (int) (Double.parseDouble(eventsItemModel.getLongitude()) * 1E6));
                }
                catch (NumberFormatException e) {
                    e.printStackTrace();
                }
                OverlayItem item = new OverlayItem(geoPoint, MY_LOCATION, null);
                mapOverlay.addItem(item);
                mMapView.getOverlays().add(mapOverlay);

                // move to location
                mMapView.getController().animateTo(geoPoint);
                // redraw map
                mMapView.postInvalidate();
            }

        }

        public void setStreetView(boolean isStreetView) {
            mMapView.setStreetView(isStreetView);
        }

        public void setSatelliteView(boolean isSatelliteView) {
            mMapView.setSatellite(isSatelliteView);
        }

        public void setZoom(int zoomLevel) {
            mMapView.getController().setZoom(zoomLevel);
        }

        private void setMapParameters() {
            // setStreetView(true);
            // setSatelliteView(false);
            setZoom(17);
        }

        private Drawable createMarker(int iconID) {
            // Initialize icon
            Drawable icon = getResources().getDrawable(iconID);
            icon.setBounds(0, 0, icon.getIntrinsicWidth(), icon.getIntrinsicHeight());
            return icon;
        }

        @Override
        protected void onStop() {
            // TODO Auto-generated method stub
            super.onStop();
        }

        @Override
        protected void onPause() {
            // TODO Auto-generated method stub
            super.onPause();
        }

        /**
         * Setup a new 3D rotation on the container view.
         * 
         * @param position
         *            the item that was clicked to show a picture, or -1 to show the list
         * @param start
         *            the start angle at which the rotation must begin
         * @param end
         *            the end angle of the rotation
         */
        private void applyRotation(int position, float start, float end) {
            // Find the center of the container
            final float centerX = mContainer.getWidth() / 2.0f;
            final float centerY = mContainer.getHeight() / 2.0f;

            // Create a new 3D rotation with the supplied parameter
            // The animation listener is used to trigger the next animation
            final Rotate3dAnimation rotation = new Rotate3dAnimation(start, end, centerX, centerY, 310.0f, true);
            rotation.setDuration(500);
            rotation.setFillAfter(true);
            rotation.setInterpolator(new AccelerateInterpolator());
            rotation.setAnimationListener(new DisplayNextView(position));

            mContainer.startAnimation(rotation);
        }

        /**
         * This class listens for the end of the first half of the animation. It then posts a new action that effectively swaps the views when the container is rotated 90 degrees and thus invisible.
         */
        private final class DisplayNextView implements Animation.AnimationListener {
            private final int   mPosition;

            private DisplayNextView(int position) {
                mPosition = position;
            }

            public void onAnimationStart(Animation animation) {
            }

            public void onAnimationEnd(Animation animation) {
                mContainer.post(new SwapViews(mPosition));
            }

            public void onAnimationRepeat(Animation animation) {
                // Do nothing!!
            }
        }

        /**
         * This class is responsible for swapping the views and start the second half of the animation.
         */
        private final class SwapViews implements Runnable {
            private final int   mPosition;

            public SwapViews(int position) {
                mPosition = position;
            }

            public void run() {
                final float centerX = mContainer.getWidth() / 2.0f;
                final float centerY = mContainer.getHeight() / 2.0f;
                Rotate3dAnimation rotation;

                if (mPosition > -1) {
                    mImageView.setVisibility(View.GONE);
                    mMapView.setVisibility(View.VISIBLE);
                    mMapView.requestFocus();

                    rotation = new Rotate3dAnimation(-90, 180, centerX, centerY, 310.0f, false);
                    rotation.reset();
                }
                else {
                    mMapView.setVisibility(View.GONE);
                    mImageView.setVisibility(View.VISIBLE);
                    mImageView.requestFocus();

                    rotation = new Rotate3dAnimation(90, 0, centerX, centerY, 310.0f, false);
                }

                rotation.setDuration(100);
                rotation.setFillAfter(true);
                rotation.setInterpolator(new DecelerateInterpolator());

                mContainer.startAnimation(rotation);
            }
        }

        @Override
        public void onBackPressed() {
            if (isFlipped) {
                applyRotation(-1, 0, -90);
                isFlipped = false;
            }
            else {
                super.onBackPressed();
            }
        }

    } 
```

我的xml布局如下：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/event_container"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#426773" >

    <include
        android:id="@+id/news_header"
        layout="@layout/news_header" />

    <TextView
        android:id="@+id/cal_event_title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@id/news_header"
        android:padding="5dp"
        android:textColor="@android:color/white"
        android:textSize="22sp"
        android:textStyle="bold"
        android:typeface="sans" />

    <RelativeLayout 
        android:id="@+id/date_time_container"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@id/cal_event_title">

    <TextView
        android:id="@+id/cal_date"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:padding="5dp"
        android:textColor="@android:color/white" />

    <TextView
        android:id="@+id/cal_time"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@id/cal_date"
        android:padding="5dp"
        android:textColor="@android:color/white" />
    </RelativeLayout>

    <ImageView
        android:id="@+id/mapPreview"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/cal_event_title"
        android:layout_alignParentRight="true"
        android:paddingRight="5dp"       
        android:clickable="true"
        android:src="@drawable/ic_event_map"
        android:onClick="showMap"
        android:background="@drawable/textview_border"
        android:layout_marginRight="5dp"/>

    <TextView
        android:id="@+id/cal_address"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@id/date_time_container"
        android:padding="5dp"
        android:textColor="@android:color/white"
        android:textSize="16sp"
        android:textStyle="bold"
        android:typeface="sans" />

    <ScrollView
        android:id="@+id/scroll_description"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/cal_address"
        android:padding="5dp"
        android:scrollbars="vertical" >

        <RelativeLayout
            android:id="@+id/map_container"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >

            <TextView
                android:id="@+id/cal_description"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:textColor="@android:color/white"/>
        </RelativeLayout>

    </ScrollView>

    <com.google.android.maps.MapView
        android:id="@+id/mapview"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_centerInParent="true"
        android:apiKey="your_google_api_key"
        android:clickable="true"
        android:visibility="gone" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T14:47:00.610

我只是给出一个小提示；但是现在我工作太忙了，我无法实现这一点。

步骤是

*   获取你的绘图缓存位图
*   仅使用此位图将您的内容设置为图像视图
*   将动画应用到这个 imageview
*   在动画结束时重新设置您的内容

* * *

我相信这将使性能最大化。

稍后我将尝试编写一些代码。

***代码***

```
View longLivingReference; //keep a reference
private void applyRotation(int position, float start, float end) {
    longLivingReference = findViewById(R.id.event_container);
    longLivingReference .setDrawingCacheEnabled(true);
    Bitmap bitmapForAnimation = Bitmap.createBitmap(longLivingReference.getDrawingCache());
    ImageView iv = new ImageView(mContext);
    iv = new ImageView(mContext);
    iv.setImageBitmap(bitmapForAnimation);
    setContentView(iv);

    final float centerX = mContainer.getWidth() / 2.0f;
    final float centerY = mContainer.getHeight() / 2.0f;
    final Rotate3dAnimation rotation = new Rotate3dAnimation(start, end, centerX, centerY, 310.0f, true);
    rotation.setDuration(500);
    rotation.setFillAfter(true);
    rotation.setInterpolator(new AccelerateInterpolator());
    rotation.setAnimationListener(yourAnimationListener {
        //whatever your AnimationListener is, you can call super.onAnimationEnd if needed
        @Override
        public void onAnimationEnd(Animation animation) {
            setContentView(longLivingReference);
        }
    });
    iv.startAnimation(rotation);
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-15T15:43:20.507

我做了这样的动画。我有同样的问题。所以，建议：

*   使 xml 布局尽可能简单，您可以使用 android 中的 Hierarchy View 工具对其进行测试。它工具显示了建造和绘制老鹰的时间；

*   布局上的图像应具有尽可能低的权重；

*   如果您的设备支持（在清单中），请使用硬件加速：

*   我注意到另一种有趣的行为。如果我在 onAnimationEnd(Animation animation) 方法中调用一些代码，动画会冻结一小段时间。我使用下一个构造解决了这个问题：

    私有静态最终 int DELAY_AFTER_ANIMATION = 10;

    public void onAnimationEnd(Animation animation) { new Handler().postDelayed(new Runnable() { @Override public void run() { setData(); // 在这里做繁重的代码 } }, DELAY_AFTER_ANIMATION); }

为了构建动画，我使用了相同的代码 ( [Rotate3dAnimation](https://android.googlesource.com/platform/development/+/master/samples/ApiDemos/src/com/example/android/apis/animation/Rotate3dAnimation.java) )。对于调用动画（主要区别是使用 isReverse 参数）：

```
public void apply3dRotation(float start, float end, AnimationListener listener, boolean isReverse) {
    View view = getRotateView();
    if(view == null){
        return;
    }

    if (isHardwareAcceleartionNotSupported()){
        AndroidHelper.disableHardwareAccelerationOnView(view, this.getClass());
    }

    final float centerX = view.getWidth() / 2.0f;
    final float centerY = view.getHeight() / 2.0f;

    Flip3dAnimation rotation;

    rotation = new Flip3dAnimation(start, end, centerX, centerY, 310.0f, isReverse);
    rotation.setDuration(ANIMATION_DURATION);
    rotation.setFillAfter(true);
    rotation.setInterpolator(new AccelerateInterpolator());

    if(listener != null){
        rotation.setAnimationListener(listener);
    }

    view.startAnimation(rotation);
} 
```

isHardwareAcceleartionNotSupported() 方法检查操作系统版本。在我的项目中，我禁用了智能手机的加速功能。在 AndroidHelper 类中：

```
public static void disableHardwareAccelerationOnView(View view, Class c){
    try {
        view.setLayerType(View.LAYER_TYPE_SOFTWARE, null);
    } catch (Error e) {
        Log.i(c.getSimpleName(), e.getMessage());
    }
} 
```

还有一个问题。如果屏幕旋转到 90 度时动画隐藏，则为相机问题。在这种情况下，我们应该将图像放置在离观众更远的地方。

*   还有一个技巧 - 有时我会在动画开始之前设置暂停：

    ```
     animation.setStartOffset(100); 
    ```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-20T05:41:47.297

Android 上（非 OpenGL）3d 动画效果的一种选择是使用和类在 ViewGroup 的`getChildStaticTransform`方法中实现动画。[`graphics.Camera`](http://developer.android.com/reference/android/graphics/Camera.html)[`Matrix`](http://developer.android.com/reference/android/graphics/Matrix.html)

从广义上讲，它是这样完成的：

*   扩展[ViewGroup](http://developer.android.com/reference/android/view/ViewGroup.html)或其子类。

*   在构造函数中，将 staticTransformationEnabled 设置为 true：

    ```
     setStaticTransformationsEnabled(true); 
    ```

*   覆盖受保护的方法 getChildStaticTransformation(View view, Transformation t)。

*   在 getChildStaticTransformation 中，用于根据您的图片`graphics.Camera`旋转。`View`

*   获取相机的矩阵并调整它以使相机位置在视图上居中。

例如，这是Igor Kushnarev在[3d 轮播中完成 3d 平移效果的方式：](http://www.codeproject.com/Articles/146145/Android-3D-Carousel)

```
protected boolean getChildStaticTransformation(View child, Transformation transformation) {
   //...
    // Center of the item
    float centerX = (float)child.getWidth()/2, centerY = (float)child.getHeight()/2;

    // Save camera
    mCamera.save();

    // Translate the item to it's coordinates
    final Matrix matrix = transformation.getMatrix();
    mCamera.translate(((CarouselImageView)child).getX(), 
            ((CarouselImageView)child).getY(), 
            ((CarouselImageView)child).getZ());

    // Get the camera's matric and position the item
    mCamera.getMatrix(matrix);
    matrix.preTranslate(-centerX, -centerY);
    matrix.postTranslate(centerX, centerY);

    // Restore camera
    mCamera.restore();      

    return true;
 } 
```

以下是有关如何使用`graphics.Camera`和`Matrix`in的更多代码示例`getChildStaticTransformation`：

*   [Inovex](https://github.com/inovex/ViewPager3D/blob/master/src/de/inovex/android/widgets/ViewPager3D.java)的 ViewPager3d。这个项目很有趣，因为如果按原样运行，3d 动画会不流畅（在 Galaxy S2 上）。悬停，如果你去掉非相机/矩阵过度滚动动画，但保持 getChildStaticTransformation 3d 效果与相机和矩阵一起完成，3d 效果是平滑的。

*   [尼尔](http://www.inter-fuser.com/2010/02/android-coverflow-widget-v2.html)戴维斯的封面流。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-31T07:34:46.813

我不能完全理解你的问题，但据我所知，

平滑滚动的 Rotate3dAnimation 的关键是使应用程序的主线程（UI 线程）免于繁重的处理。确保您在单独的线程中执行任何磁盘访问、网络访问或 SQL 访问。

[此](http://developer.android.com/training/improving-layouts/smooth-scrolling.html)链接适用于列表视图 Rotate3dAnimation...

# nhibernate - 具有接口类型的 Fluent Nhibernate CheckReference

> ID：11014425
> 
> 赞同：0
> 
> 时间：2012-06-13T12:02:34.627
> 
> 标签：nhibernate, fluent-nhibernate

我有两个实体 Visita 和 Cliente，它们分别实现了两个接口 IVisita 和 ICliente。IVisita 包含对 ICliente 的引用，我如何配置此地图？

```
public class Visita : IVisita
{
    public virtual int Id { get; protected set; }

    public virtual ICliente Cliente { get; set; }
}

public class VisiteMap : ClassMap<Domain.Visita>
{
    public VisiteMap()
    {
        Table("Visite");
        Id(x => x.Id);

        References(x => x.Cliente)
            .Class(typeof(Domain.Cliente))
            .Not.Nullable();
    }
} 
```

测试失败，出现异常“对于属性 'Cliente' 预期类型 'Vendor.Domain.Cliente' 但得到了 'Vendor.Domain.ICliente'”

```
 [TestMethod]
    public void VisitePersistence()
    {
        var sessionFactory = Vendor.Persistenza.Database.CreateSessionFactory(true);
        using (var session = sessionFactory.OpenSession())
        {
            var cliente = new Cliente() { ... };

            using (var tran = session.BeginTransaction())
            {
                session.SaveOrUpdate(cliente);
                tran.Commit();
            }

            new PersistenceSpecification<Visita>(session)
                .CheckReference(x=> x.Cliente, cliente)
                .VerifyTheMappings();
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T14:33:07.513

关于使用 FluentNHibernate 映射接口，已经有一个类似的[问题。](https://stackoverflow.com/questions/845536/programming-to-interfaces-while-mapping-with-fluent-nhibernate)

此外，詹姆斯格雷戈里在[他的回答](https://stackoverflow.com/a/845714/119230)中提出了一个很好的观点。领域模型中的接口是否真的提供了任何价值？

# sql-server - 组合查询时的 SQL-server 语法错误（传递查询）

> ID：11014430
> 
> 赞同：0
> 
> 时间：2012-06-13T12:02:40.903
> 
> 标签：sql-server, ms-access, pass-through

我正在尝试将 2 个查询组合到一个 sql-server 直通查询 (PTQ)。当在 Access 中单独编码时，这两个查询都可以工作。将这些访问代码组合到一个查询时，它仍然可以在 Access 中使用。但是，当我将字段名称格式化为 T-sql 并尝试作为 PTQ 运行时，我在“GROUP”附近收到语法错误。当我删除此“GROUP BY”行时，在“;”附近出现语法错误。

```
SELECT jaar, 
       maand, 
       wicode, 
       pg_intern_code, 
       pg_kriss_code, 
       pg_kriss_naam, 
       Count(pc0517.dbo.resul.klavnr) AS AantalVanKLAVNR 
FROM   (SELECT Year(pc0517.dbo.resul.created)  AS JAAR, 
               Month(pc0517.dbo.resul.created) AS MAAND, 
               pc0517.dbo.resul.wicode, 
               dbo.tblproductgroep_intern.pg_intern_code, 
               dbo.tblproductgroep_kriss.pg_kriss_code, 
               dbo.tblproductgroep_kriss.pg_kriss_naam, 
               pc0517.dbo.resul.klavnr 
        FROM   (dbo.tblproductgroep_kriss 
                INNER JOIN (dbo.tblproductgroep_intern 
                            INNER JOIN dbo.tblrobbe_pg 
                                    ON dbo.tblproductgroep_intern.pg_intern_id = 
                                       dbo.tblrobbe_pg.pg_code_intern_id) 
                        ON dbo.tblproductgroep_kriss.pg_kriss_id = 
                           dbo.tblrobbe_pg.pg_code_kriss_id) 
               INNER JOIN pc0517.dbo.resul 
                       ON dbo.tblrobbe_pg.robbe_pg_naam = 
                          pc0517.dbo.resul.prcode 
        WHERE  ( ( Year(pc0517.dbo.resul.created) = 2012 ) 
                 AND ( pc0517.dbo.resul.kanaal = "gg" ) )) 
GROUP  BY jaar, 
          maand, 
          wicode, 
          pg_intern_code, 
          pg_kriss_code, 
          pg_kriss_naam; 
```

同一数据库上的其他 PTQ（甚至与 PC0517 数据库结合使用），工作没有任何故障，但我对 SQL-server 完全陌生，所以我还不知道所有的约定，并且可能忽略了一些基本的东西。 .

TIA

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T12:14:21.223

我更正了很多事情：（1）以正确的顺序放置连接（2）删除放错位置的括号（3）添加表别名以提高可读性（4）删除双引号`"gg"`（5）对 r.created 进行查询- 结束范围，以便可以使用索引（如果存在）。我还`jaar`从分组中的内部查询中删除了 - 基于 where 子句，这永远不会是`2012`.

我不知道如果您将 Access 粘贴回那里，Access 会对此做什么，但您应该能够确认这是一个比直接针对 SQL Server 运行它为您生成的垃圾 Access 更正确的查询。如果 Access 仍然破坏了这一点，我会将它放在 SQL Server 中的存储过程或视图中，然后将 Access 指向那个。

```
SELECT 
   jaar = 2012, 
   maand, 
   wicode, 
   pg_intern_code, 
   pg_kriss_code, 
   pg_kriss_naam, 
   COUNT(klavnr) AS AantalVanKLAVNR 
FROM   
(
    SELECT 
       maand = MONTH(r.created), 
       r.wicode, 
       i.pg_intern_code, 
       k.pg_kriss_code, 
       k.pg_kriss_naam, 
       r.klavnr 
    FROM 
       dbo.tblproductgroep_kriss AS k
    INNER JOIN dbo.tblrobbe_pg AS tr 
       ON k.pg_kriss_id = tr.pg_code_kriss_id
    INNER JOIN dbo.tblproductgroep_intern AS i 
       ON i.pg_intern_id = tr.pg_code_intern_id
    INNER JOIN pc0517.dbo.resul AS r 
       ON tr.robbe_pg_naam = r.prcode 
    WHERE 
       r.created >= '20120101' AND r.created < '20130101'
       AND r.kanaal = 'gg'
) AS x 
GROUP BY 
   maand, 
   wicode, 
   pg_intern_code, 
   pg_kriss_code, 
   pg_kriss_naam; 
```

也可以简化为：

```
 SELECT 
       jaar = 2012,
       maand = MONTH(r.created), 
       r.wicode, 
       i.pg_intern_code, 
       k.pg_kriss_code, 
       k.pg_kriss_naam, 
       r.klavnr 
    FROM 
       dbo.tblproductgroep_kriss AS k
    INNER JOIN dbo.tblrobbe_pg AS tr 
       ON k.pg_kriss_id = tr.pg_code_kriss_id
    INNER JOIN dbo.tblproductgroep_intern AS i 
       ON i.pg_intern_id = tr.pg_code_intern_id
    INNER JOIN pc0517.dbo.resul AS r 
       ON tr.robbe_pg_naam = r.prcode 
    WHERE 
       r.created >= '20120101' AND r.created < '20130101'
       AND r.kanaal = 'gg'
    GROUP BY 
       MONTH(r.created), 
       r.wicode, 
       i.pg_intern_code, 
       k.pg_kriss_code, 
       k.pg_kriss_naam; 
```

（换句话说，子查询似乎没有必要。）

# php - 在 PHP 上启用 SOAP

> ID：11014431
> 
> 赞同：10
> 
> 时间：2012-06-13T12:02:45.000
> 
> 标签：php, soap

我想在我的 PHP5/Centos/Apache 服务器上启用 SOAP。我拥有对服务器的完全访问权限。我的 php.ini 文件包括以下内容。当我查看 phpinfo() 时，它没有引用 SOAP。有什么建议么？谢谢

```
[soap]
; Enables or disables WSDL caching feature.
soap.wsdl_cache_enabled=1
; Sets the directory name where SOAP extension will put cache files.
soap.wsdl_cache_dir="/tmp"
; (time to live) Sets the number of second while cached file will be used 
; instead of original one.
soap.wsdl_cache_ttl=86400 
```

编辑 - 获取以下内容。在两个不同的服务器上尝试过。

```
[root@localhost ~]# yum install php-soap
Loaded plugins: fastestmirror
Loading mirror speeds from cached hostfile
 * base: mirrors.ecvps.com
 * extras: mirror.spro.net
 * rpmforge: mirror.hmc.edu
 * updates: centos.mirror.facebook.net
Setting up Install Process
Resolving Dependencies
--> Running transaction check
---> Package php-soap.x86_64 0:5.1.6-34.el5_8 set to be updated
--> Processing Dependency: php-common = 5.1.6-34.el5_8 for package: php-soap
--> Finished Dependency Resolution
php-soap-5.1.6-34.el5_8.x86_64 from updates has depsolving problems
  --> Missing Dependency: php-common = 5.1.6-34.el5_8 is needed by package php-soap-5.1.6-34.el5_8.x86_64 (updates)
Error: Missing Dependency: php-common = 5.1.6-34.el5_8 is needed by package php-soap-5.1.6-34.el5_8.x86_64 (updates)
 You could try using --skip-broken to work around the problem
 You could try running: package-cleanup --problems
                        package-cleanup --dupes
                        rpm -Va --nofiles --nodigest 
```

第二编辑第 1 部分

```
[root@localhost ~]# yum --enablerepo=webtatic install php-soap
Loaded plugins: fastestmirror
Loading mirror speeds from cached hostfile
 * base: mirrors.ecvps.com
 * extras: mirrors.ecvps.com
 * rpmforge: mirror.hmc.edu
 * updates: mirror.5ninesolutions.com
adobe-linux-x86_64                                       |  951 B     00:00
base                                                     | 1.1 kB     00:00
extras                                                   | 2.1 kB     00:00
rpmforge                                                 | 1.9 kB     00:00
updates                                                  | 1.9 kB     00:00
webtatic                                                 |  951 B     00:00
webtatic/primary                                         |  40 kB     00:00
webtatic                                                                182/182
Setting up Install Process
Resolving Dependencies
--> Running transaction check
---> Package php-soap.x86_64 0:5.3.13-1.w5 set to be updated
--> Processing Dependency: php-common = 5.3.13-1.w5 for package: php-soap
--> Running transaction check
--> Processing Dependency: php-common = 5.3.4-1.w5 for package: php
--> Processing Dependency: php-common = 5.3.4-1.w5 for package: php-cli
--> Processing Dependency: php-common = 5.3.4-1.w5 for package: php-mysql
--> Processing Dependency: php-common = 5.3.4-1.w5 for package: php-xml
--> Processing Dependency: php-common = 5.3.4-1.w5 for package: php-imap
--> Processing Dependency: php-common = 5.3.4-1.w5 for package: php-odbc
--> Processing Dependency: php-common = 5.3.4-1.w5 for package: php-xmlrpc
--> Processing Dependency: php-common = 5.3.4-1.w5 for package: php-ldap
--> Processing Dependency: php-common = 5.3.4-1.w5 for package: php-pdo
--> Processing Dependency: php-common = 5.3.4-1.w5 for package: php-gd
--> Processing Dependency: php-common = 5.3.4-1.w5 for package: php-mbstring
--> Processing Dependency: php-common = 5.3.4-1.w5 for package: php-mcrypt
---> Package php-common.x86_64 0:5.3.13-1.w5 set to be updated
--> Running transaction check
--> Processing Dependency: php = 5.3.4-1.w5 for package: php-devel
---> Package php.x86_64 0:5.3.13-1.w5 set to be updated
---> Package php-cli.x86_64 0:5.3.13-1.w5 set to be updated
---> Package php-gd.x86_64 0:5.3.13-1.w5 set to be updated
---> Package php-imap.x86_64 0:5.3.13-1.w5 set to be updated
---> Package php-ldap.x86_64 0:5.3.13-1.w5 set to be updated
---> Package php-mbstring.x86_64 0:5.3.13-1.w5 set to be updated
---> Package php-mcrypt.x86_64 0:5.3.13-1.w5 set to be updated
---> Package php-mysql.x86_64 0:5.3.13-1.w5 set to be updated
---> Package php-odbc.x86_64 0:5.3.13-1.w5 set to be updated
---> Package php-pdo.x86_64 0:5.3.13-1.w5 set to be updated
---> Package php-xml.x86_64 0:5.3.13-1.w5 set to be updated
---> Package php-xmlrpc.x86_64 0:5.3.13-1.w5 set to be updated
--> Running transaction check
---> Package php-devel.x86_64 0:5.3.13-1.w5 set to be updated
--> Finished Dependency Resolution

Dependencies Resolved

================================================================================
 Package              Arch           Version             Repository        Size
================================================================================
Installing:
 php-soap             x86_64         5.3.13-1.w5         webtatic         144 k
Updating for dependencies:
 php                  x86_64         5.3.13-1.w5         webtatic         1.4 M
 php-cli              x86_64         5.3.13-1.w5         webtatic         2.6 M
 php-common           x86_64         5.3.13-1.w5         webtatic         653 k
 php-devel            x86_64         5.3.13-1.w5         webtatic         622 k
 php-gd               x86_64         5.3.13-1.w5         webtatic         107 k
 php-imap             x86_64         5.3.13-1.w5         webtatic          50 k
 php-ldap             x86_64         5.3.13-1.w5         webtatic          35 k
 php-mbstring         x86_64         5.3.13-1.w5         webtatic         1.2 M
 php-mcrypt           x86_64         5.3.13-1.w5         webtatic          30 k
 php-mysql            x86_64         5.3.13-1.w5         webtatic          91 k
 php-odbc             x86_64         5.3.13-1.w5         webtatic          50 k
 php-pdo              x86_64         5.3.13-1.w5         webtatic          66 k
 php-xml              x86_64         5.3.13-1.w5         webtatic         118 k
 php-xmlrpc           x86_64         5.3.13-1.w5         webtatic          50 k

Transaction Summary
================================================================================
Install       1 Package(s)
Upgrade      14 Package(s)

Total download size: 7.1 M
Is this ok [y/N]: y
Downloading Packages:
(1/15): php-mcrypt-5.3.13-1.w5.x86_64.rpm                |  30 kB     00:00
(2/15): php-ldap-5.3.13-1.w5.x86_64.rpm                  |  35 kB     00:00
(3/15): php-xmlrpc-5.3.13-1.w5.x86_64.rpm                |  50 kB     00:00
(4/15): php-imap-5.3.13-1.w5.x86_64.rpm                  |  50 kB     00:00
(5/15): php-odbc-5.3.13-1.w5.x86_64.rpm                  |  50 kB     00:00
(6/15): php-pdo-5.3.13-1.w5.x86_64.rpm                   |  66 kB     00:00
(7/15): php-mysql-5.3.13-1.w5.x86_64.rpm                 |  91 kB     00:00
(8/15): php-gd-5.3.13-1.w5.x86_64.rpm                    | 107 kB     00:00
(9/15): php-xml-5.3.13-1.w5.x86_64.rpm                   | 118 kB     00:00
(10/15): php-soap-5.3.13-1.w5.x86_64.rpm                 | 144 kB     00:00
(11/15): php-devel-5.3.13-1.w5.x86_64.rpm                | 622 kB     00:00
(12/15): php-common-5.3.13-1.w5.x86_64.rpm               | 653 kB     00:01
(13/15): php-mbstring-5.3.13-1.w5.x86_64.rpm             | 1.2 MB     00:00
(14/15): php-5.3.13-1.w5.x86_64.rpm                      | 1.4 MB     00:02
(15/15): php-cli-5.3.13-1.w5.x86_64.rpm                  | 2.6 MB     00:02
--------------------------------------------------------------------------------
Total                                           604 kB/s | 7.1 MB     00:12
warning: rpmts_HdrFromFdno: Header V3 DSA signature: NOKEY, key ID cf4c4ff9
webtatic/gpgkey                                          | 1.6 kB     00:00

Public key for php-mbstring-5.3.13-1.w5.x86_64.rpm is not installed 
```

第二编辑第 2 部分

```
[root@localhost ~]# yum --enablerepo=webtatic install  webtatic-release
Loaded plugins: fastestmirror
Loading mirror speeds from cached hostfile
 * base: mirrors.ecvps.com
 * extras: mirrors.ecvps.com
 * rpmforge: mirror.hmc.edu
 * updates: centos.mirror.facebook.net
Setting up Install Process
Resolving Dependencies
--> Running transaction check
---> Package webtatic-release.noarch 0:5-2 set to be updated
--> Finished Dependency Resolution

Dependencies Resolved

================================================================================
 Package                   Arch            Version      Repository         Size
================================================================================
Updating:
 webtatic-release          noarch          5-2          webtatic           11 k

Transaction Summary
================================================================================
Install       0 Package(s)
Upgrade       1 Package(s)

Total download size: 11 k
Is this ok [y/N]: y
Downloading Packages:
webtatic-release-5-2.noarch.rpm                          |  11 kB     00:00
warning: rpmts_HdrFromFdno: Header V3 DSA signature: NOKEY, key ID cf4c4ff9
webtatic/gpgkey                                          | 1.6 kB     00:00

Public key for webtatic-release-5-2.noarch.rpm is not installed 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-13T12:15:28.783

您可能需要确保安装了 PHP SOAP 包。尝试`yum install php-soap`以 root 身份运行。

**编辑：**改编自对类似问题的[出色回答：](https://stackoverflow.com/questions/9350101/php-mysql-connect-failing-with-no-error-message)

运行这个：

```
yum --enablerepo=webtatic install php-soap 
```

这告诉 yum 从 webtatic 存储库中获取包（除了系统配置的存储库）。如果您想在系统启用的存储库中使用 webtatic，请运行：

```
rpm --import http://repo.webtatic.com/yum/RPM-GPG-KEY-webtatic-andy
yum --enablerepo=webtatic install  webtatic-release 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-06T12:11:36.623

如果您的机器中有 Ubuntu，请在终端中尝试以下操作：

1.  sudo apt-get install php-soap
2.  服务 apache2 重启

要检查其中的使用 php 测试文件，只需使用以下函数`phpinfo();` 并在包含以下模块的浏览器中检查结果，如该图像： [![在此处输入图像描述](../Images/e928f65cdab36e8e79ac645fa1a9df6e.png)](https://i.stack.imgur.com/pQl1t.png)

# c# - 启用 Internet Explorer 内容顾问并以编程方式添加已批准的站点

> ID：11014434
> 
> 赞同：0
> 
> 时间：2012-06-13T12:03:01.413
> 
> 标签：c#, .net, internet-explorer, browser

我需要允许用户浏览几个指定的域。可以在 Internet Explorer 中打开 Content Advisor 并添加 Approved Sites，但是否可以从 C# 以编程方式进行？

注意：以前我写了一个 BrowserView UserControl 包装 WebBrowser 控件。我使用[stackoverflow 的解决方案](https://stackoverflow.com/a/9739066/725116)来抑制 js 错误并绑定站点源。这是一个很好的解决方案 - 我的应用程序中的浏览器，没有地址栏。不幸的是，它有一个很大的缺点——在某些网站上，抑制 javascript 错误使它们无法使用。当我关闭抑制错误时，它们工作正常，但用户必须在每次页面加载时接受 3-4 次错误。不可接受。

也许还有另一种方法可以让用户只使用指定的网站？

# javascript - Cookie 值是 IE 中的乱码

> ID：11014436
> 
> 赞同：0
> 
> 时间：2012-06-13T12:03:10.957
> 
> 标签：javascript, asp.net-mvc-2

我使用 ASP.NET MVC2 开发了一个网站。在后台创建 cookie。然后我想通过使用javaScript在IE中获取cookie值，但是当我用中文设置时，该值是混乱的代码。

```
document.cookie:

userID=1017030057 userName=涓浗 
```

然后我检查了我电脑里的cookie。这是正常的：

**用户ID 1017030057 LocalHost** / 1536 3361761792 30304298 1345470592 30230873 * 用户名**中国** localhost/ 1536 3361761792 30304298

这种情况只发生在 IE 中。在其他浏览器中，cookie 值是正常的。我的IE是IE8。页眉符合 IE 字符集问题，除 cookie 值外，中文显示正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T05:27:26.293

尝试在服务器端对 cookie 进行编码并`decodeURIComponent(cookieValue)`在 JS 中使用。让我知道这是否有效

# xml - Jsp 中的 Ajax 响应说明

> ID：11014444
> 
> 赞同：0
> 
> 时间：2012-06-13T12:03:51.870
> 
> 标签：xml, ajax, jsp

我正在评估 jsp 页面发送的某些条件，并以如下所示的格式发送 ajax 响应。

```
 //Part of the response 
 response.setContentType("text/xml");
 response.setHeader("Cache-Control", "no-cache");
 response.getWriter().write("<valid>true</valid>"); 
```

在上面显示的代码部分中，我在 xml 标记中返回值 true 有效我如何在同一响应中的另一个 xml 标记中返回多个信息。

我尝试添加一个新的 xml 标记，但它不起作用。

```
response.getWriter().write("<valid>true</valid><name>dave</name>"); 
```

我怎样才能以这种格式返回多条信息。目前，如果我使用有效标签返回一条信息，它的工作正常，其值在 javascript 代码中使用如下。

```
var msg = responseXML.getElementsByTagName("valid")[0].firstChild.nodeValue; 
```

如果我想访问第二个 xml 标记中返回的第二条信息，我需要在此处进行哪些更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T13:09:37.437

一个 XML 文档只能有一个根元素，但您正在尝试编写多个根元素。您需要发明一种通用的根元素并将其用于所有 XML 文档。例如，`<data>`或`<response>`任何你喜欢的。

```
response.getWriter().write("<data><valid>true</valid><name>dave</name></data>"); 
```

### 也可以看看：

*   [一个随机的 XML 教程](http://www.freewebmasterhelp.com/tutorials/xml/2)

# dns - 在谷歌分析中合并多个域

> ID：11014446
> 
> 赞同：0
> 
> 时间：2012-06-13T12:04:04.497
> 
> 标签：dns, google-analytics

如果我的谷歌分析中有 2 个单独的域，有人可以告诉我吗

例如：

```
abc.com
xyz.abc.com 
```

第二个域是第三方购物车。

现在有两个单独的报告，但我想把它们放在一起，这样我最终可以设置目标和转化跟踪。

问候， 高拉夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T23:10:11.000

据我了解，如果您为 abc.com 设置了谷歌分析，您的 3rd 方购物车将被跟踪。这是因为 xyz.abc.com 是 abc.com 的子域。

您应该阅读 GA 文档的此页面以了解：[https ://developers.google.com/analytics/devguides/collection/gajs/gaTrackingSite](https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingSite)

# php - 将固定电话连接到电脑并检索来电号码

> ID：11014458
> 
> 赞同：0
> 
> 时间：2012-06-13T12:04:49.160
> 
> 标签：php, e-commerce, telephony

我制作了一个简单的 php 应用程序，它通过在应用程序中输入他们的电话号码来搜索人们的详细信息。现在我想扩展它的功能，即我的固定电话连接到我的电脑，每当有电话来电时，php 应用程序应该从数据库中获取相关传入号码的详细信息并显示它。现在要实现这一点，我需要获取来电的号码。

如何将固定电话连接到我的电脑？（我认为需要一个电话调制解调器，但我不确定。）我怎样才能得到那个来电的号码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T12:10:15.873

PHP doesn't have access to hardware for security issues. So you can't know if there's an incoming call.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T13:18:50.050

如果座机连接到 PHP 所在的服务器，则要求 PHP 读取由 asterisk 生成的日志文件（如果您在 Linux 服务器上使用 Asterisk 来处理传入呼叫）。不知道其他操作系统或解决方案。

# image - 如何使用 PHP 获取以兆字节 (MB) 为单位的图像大小（不是文件大小）？

> ID：11014459
> 
> 赞同：0
> 
> 时间：2012-06-13T12:04:58.367
> 
> 标签：image, image-size

有没有办法以 MB 或 KB 为单位获取图像大小。其实我可以得到任何图像的文件大小，但没有找到任何函数来获取图像大小。我为此尝试了 Imagick，但没有成功。

getImageSize() 函数只返回图像的分辨率，我想我需要从那里计算它但不知道计算方法。请帮我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T13:09:44.747

没有办法得到它。

像素和字节/位是用于测量不同事物的完全不同的单位。它们之间没有简单的关系。你不能说*X 像素是 Y 字节*。不同文件格式的相同图像作为文件的权重不同，无论其图像大小如何。即使在一种文件格式中，两个 100x100 像素的图像也会由于其内容的压缩效果而在文件大小上有所不同。

这就像试图计算一升（或如果你愿意的话，一加仑；））任何未知液体的重量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T13:19:20.657

有一种方法。您可以使用来自 的 identify 推荐`imagemagick`。就像是

```
exec("identify -format "%[fx:w/72] by %[fx:h/72] inches" {$_FILES['image']['tmp_name']}", $result); 
```

或 `Imagick::identifyImage()` 与imagick。

这将为您*提供 72DPI 的图像大小*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-14T01:37:51.000

`get_headers()`您可以使用获取“Content-Length”的函数来获取文件大小。大小将以字节为单位。要将字节转换为兆字节，只需将其除以 (1024 * 1024)。

**例子：**

```
$url = 'http://www.lyreka.com/images/lyreka-logo.png';
$image = get_headers($url, 1);
$bytes = $image ["Content-Length"];
echo $bytes/(1024 * 1024) . 'MB'; 
```

希望对某人有所帮助。

# android - 带有 aSmack 库的 XMPP 出现错误？

> ID：11014462
> 
> 赞同：2
> 
> 时间：2012-06-13T12:05:12.470
> 
> 标签：android, client, xmpp

我正在尝试让 aSmack 在我的项目中工作。在 Eclipse 中创建了一个标准项目，将 jars（smack.jar、smackx-debug.jar、smackx-jingle.jar、smackx.jar）添加到 libs 文件夹。开始使用 XMPP 类，但我不确定是否应该做其他事情来正确设置项目（稍后），因为它不起作用。当我运行应用程序时出现此错误`Could not find class 'java.beans.PropertyDescriptor', referenced from method org.jivesoftware.smack.util.PacketParserUtils.parseWithIntrospection`，当我尝试发送消息时出现此错误`java.lang.IllegalStateException: Not connected to server.`并且`at org.jivesoftware.smack.XMPPConnection.sendPacket(XMPPConnection.java:445)`

这是我正在使用的代码

```
public  class ClientJabberActivity extends Activity {

   private  final  static String server_host =  "aaaaa.com" ;
   private  final  static  int SERVER_PORT =  5222 ;
   private  final  static String SERVICE_NAME =  "gmail.com" ;  
   private  final  static String LOGIN =  "xxxx@name.com" ;
   private  final  static String PASSWORD =  "yyyy";

   ArrayList<String> m_discussionThread;
   ArrayAdapter<String> m_discussionThreadAdapter;
   XMPPConnection m_connection;
   private Handler m_handler;   

   @ Override 
   public  void  onCreate (Bundle savedInstanceState) { 
   super . onCreate (savedInstanceState);
   setContentView (R.layout.main);
   m_handler =  new  Handler ();
     try  { 
        initConnection ();
     }  catch (XMPPException e) { 
        e. printStackTrace ();
     }

    final EditText recipient = (EditText) this . findViewById (R.id.recipient);
    final EditText message = (EditText) this . findViewById (R.id.message);     
    ListView list = (ListView) this . findViewById (R.id.thread);

    m_discussionThread =  new ArrayList<String>();
    m_discussionThreadAdapter =  new ArrayAdapter<String>  ( this ,
            R.layout.multi_line_list_item,  m_discussionThread);
    list.setAdapter(m_discussionThreadAdapter);

    Button send = (Button) this . findViewById (R.id.send);
    send. setOnClickListener ( new View. OnClickListener () { 
        public  void  onClick (View view) {                 

            String to = recipient.getText().toString ();
            String text = message.getText().toString ();

            Message msg =  new  Message(to, Message.Type.chat);
            msg.setBody(text);
            m_connection.sendPacket (msg);
            m_discussionThread. add ( " Me  : " );
            m_discussionThread. add (text);
            m_discussionThreadAdapter. notifyDataSetChanged ();
         } 
    } );
 }

private  void  initConnection () throws XMPPException { 

    ConnectionConfiguration config = new  ConnectionConfiguration (server_host, SERVER_PORT, SERVICE_NAME);
    m_connection =  new  XMPPConnection (config);
    m_connection.connect ();
    m_connection.login(LOGIN, PASSWORD);
    Presence presence =  new  Presence(Presence.Type.available);
    Log.i("ID", ""+presence);
    m_connection.sendPacket (presence);       

    PacketFilter filter =  new  MessageTypeFilter(Message.Type.chat);

    m_connection.addPacketListener(new PacketListener() {
        public void processPacket(Packet packet) {
            Message message = (Message) packet;
                if (message.getBody() != null) {
                String fromName = StringUtils.parseBareAddress(message.getFrom());
                m_discussionThread.add(fromName + ":");
                m_discussionThread.add(message.getBody());

                m_handler.post(new Runnable() {
                public void run() {
                m_discussionThreadAdapter.notifyDataSetChanged();
                }
                });
            }
        }
    }, filter);

ChatManager chatmanager = m_connection.getChatManager();
  chatmanager.addChatListener(new ChatManagerListener()
  {
    public void chatCreated(final Chat chat, final boolean createdLocally)
    {
      chat.addMessageListener(new MessageListener()
      {
        public void processMessage(Chat chat, Message message)
        {
          System.out.println("Received message: " 
            + (message != null ? message.getBody() : "NULL"));
          Log.i("CHAT USER", "Received message is: "+message.getBody());
        }
      });
    }
  });
}
} 
```

任何人都在您的 XMPP 客户端中遇到过这个问题。是 jar 文件中的问题还是我必须更改代码中的任何内容...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T12:38:19.777

你确定你使用的是 asmack jars 而不是 smack jars？因为如果您使用普通的 smack，此错误看起来会出现。

# python - 在存储之前在 python 中捕获 FFmpeg 输出

> ID：11014465
> 
> 赞同：1
> 
> 时间：2012-06-13T12:05:18.193
> 
> 标签：python, memory, ffmpeg

我正在尝试从 ffmpeg 捕获输出并将其存储在内存中，稍后再决定是否要将其写入磁盘。

是否可以在将 ffmpeg 的输出写入硬盘之前对其进行分析？

由于我真的不知道如何处理这件事，所以我还不能提供代码示例。

编辑：是的，我正在尝试将捕获的 avi/mp4 的小块写入 RAM 并在写入磁盘之前对其进行分析。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T06:01:40.650

要将 ffmpeg 的输出重定向为进程的输入，请使用以下命令：

```
ffmpeg -i inputfile [ ... options ... ] 2>&1 | your-process 
```

您的进程会将数据获取到标准输入的位置。

例子：

```
ffmpeg -y -i inputfile -acodec copy -vcodec copy outputfile 2>&1 | cat 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T12:11:10.657

如果您的意思是捕获视频输出，我认为不是，因为它需要大量内存，最好使用临时文件并跟踪它。

如果您的意思是从输出文件中捕获信息，请尝试在不使用`ffmpeg -i /some/file.avi`任何其他参数的情况下使用，这将转储有关视频文件的大量信息。

例子：

```
dorkbot:~ lamer1$ ffmpeg -i ~/Downloads/Dead\ Gerhardsens\ -\ They\ dont\ know.mp4 
ffmpeg version 0.7.8, Copyright (c) 2000-2011 the FFmpeg developers
  built on Nov 24 2011 14:31:00 with gcc 4.2.1 (Apple Inc. build 5666) (dot 3)
  configuration: --prefix=/opt/local --enable-gpl --enable-postproc --enable-swscale --enable-avfilter --enable-libmp3lame --enable-libvorbis --enable-libtheora --enable-libdirac --enable-libschroedinger --enable-libopenjpeg --enable-libxvid --enable-libx264 --enable-libvpx --enable-libspeex --mandir=/opt/local/share/man --enable-shared --enable-pthreads --cc=/usr/bin/gcc-4.2 --arch=x86_64 --enable-yasm
  libavutil    50\. 43\. 0 / 50\. 43\. 0
  libavcodec   52.123\. 0 / 52.123\. 0
  libavformat  52.111\. 0 / 52.111\. 0
  libavdevice  52\.  5\. 0 / 52\.  5\. 0
  libavfilter   1\. 80\. 0 /  1\. 80\. 0
  libswscale    0\. 14\. 1 /  0\. 14\. 1
  libpostproc  51\.  2\. 0 / 51\.  2\. 0

Seems stream 1 codec frame rate differs from container frame rate: 50000.00 (50000/1) -> 25.00 (25/1)
Input #0, mov,mp4,m4a,3gp,3g2,mj2, from '/Users/lamer1/Downloads/Dead Gerhardsens - They dont know.mp4':
  Metadata:
    major_brand     : mp42
    minor_version   : 0
    compatible_brands: isomavc1mp42
    creation_time   : 2008-07-01 00:53:26
  Duration: 00:01:37.76, start: 0.000000, bitrate: 303 kb/s
    Stream #0.0(und): Audio: aac, 44100 Hz, stereo, s16, 125 kb/s
    Metadata:
      creation_time   : 2008-07-01 00:53:26
    Stream #0.1(und): Video: h264 (Baseline), yuv420p, 384x288 [PAR 1:1 DAR 4:3], 175 kb/s, 25 fps, 25 tbr, 25k tbn, 50k tbc
    Metadata:
      creation_time   : 2008-07-01 00:53:26
At least one output file must be specified 
```

它不是一个完美的解决方案，但您可以解析该输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T13:13:16.227

您可以使用[Pyffmpeg](http://code.google.com/p/pyffmpeg/)库从 python 中直接调用 ffmpeg。

# wordpress - 使用 the_title() 函数不会在循环中显示

> ID：11014468
> 
> 赞同：0
> 
> 时间：2012-06-13T12:05:28.153
> 
> 标签：wordpress

我不知道我是不是在这里呆着，但我对 Wordpress 的 WP_Query 有疑问。我有以下代码：

```
$the_query = new WP_Query();
$the_query->query('post_type=property');

// The Loop
while ( $the_query->have_posts() ) : $the_query->the_post();
    ?>

    <div class="featured">
        <h1><?php the_title()  ?>d</h1>
        <!--<ul>
            <li>3 Bedrooms</li>
            <li>Large Garden</li>
            <li>Walking distance to shops</li>
            <li>Semi-Detached</li>                                
        </ul>-->
        <a href="#" class="more-info">More details</a>
    </div>

    <?php
endwhile; 
```

它正确地找到了 3 个帖子，但它没有显示`the_title()`。任何人都可以看到原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T12:35:52.017

你试过了`**<?php the_title(); ?>**`吗？我想你错过了“ **;** ”:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T15:39:53.360

就像*匈奴*说的，你只是忘记了**；**

[如果您在Wp Title](http://codex.wordpress.org/Function_Reference/the_title)上寻找更多资源，请查看此处

# multithreading - 相当于 waitUntilAllOperationsAreFinished

> ID：11014471
> 
> 赞同：1
> 
> 时间：2012-06-13T12:05:37.187
> 
> 标签：multithreading, asynchronous, uialertview, nsoperationqueue, dispatch

我想在其他线程（在其他线程中有文本到语音）时显示警报视图。简而言之，我想同时调用两种方法，并希望它们同时“工作”。

但就我而言，我正在启动alertView，屏幕变暗并且没有alertview，另一个线程启动。其他线程准备好后，我得到蓝色警报视图：

这是代码，我的问题是：**waitUntilAllOperationsAreFinished**的等价物是什么？

```
dispatch_async(dispatch_get_main_queue(), ^{
        [self alertWhileTTS];
    });

    [[self view] setNeedsDisplay];
    [self synthesizeInBackground];
    [queue waitUntilAllOperationsAreFinished];
    [self setIsSpeaking: false];
    [[self view] setNeedsDisplay]; 
```

另见这篇文章：[如何正确地进行多线程？UIAlertView 不显示，只有灰屏](https://stackoverflow.com/questions/10899330/how-to-multithred-correctly-uialertview-is-not-displayed-only-gray-screen)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T14:26:21.690

这解决了我的问题：

```
[self performSelectorOnMainThread:@selector(alertWhileTTS) withObject:nil waitUntilDone:YES];

    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, (unsigned long)NULL), ^(void) {
        [[self view] setNeedsDisplay];
        [self synthesizeInBackground];
        [queue waitUntilAllOperationsAreFinished];
        [self setIsSpeaking: false];
        [[self view] setNeedsDisplay];

    }); 
```

# javascript - 如何在 jquery 中删除 UI 选择菜单？

> ID：11014474
> 
> 赞同：0
> 
> 时间：2012-06-13T12:05:45.153
> 
> 标签：javascript, jquery, jquery-ui

下面的代码通过 UI 选择菜单设置了一个选择菜单

```
$('.anyclass').selectmenu(); 
```

但这里的问题是如何**删除****.anyclass**的 UI 选择菜单

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T12:09:50.537

您可以通过以下方式删除元素：

```
$('.anyclass').remove(); 
```

要删除特定类：

```
$('.anyclass').removeClass('addedClass');  // where addedClass is something a plugin would add 
```

要更改 css 属性：

```
$('.anyclass').css('color', 'blue'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T12:59:18.190

如果你在谈论这个[插件](http://filamentgroup.com/lab/jquery_ui_selectmenu_an_aria_accessible_plugin_for_styling_a_html_select/)，你可以简单地做到这一点

```
$('.anyclass').selectmenu('destroy'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T12:53:38.490

UI Selectmenu 为选择框创建了一个按钮和菜单的模仿，并隐藏了实际的选择标签。在这种情况下，没有删除样式这样的事情。您所能做的就是摆脱模仿的选择框并显示实际的选择标签。

如果选择标签的 id 为`foo`，则仿制按钮和菜单的 id 分别为`foo-button`和`foo-menu`。

```
$('#foo-button').remove();   // or .hide()
$('#foo-menu').remove();     // or .hide()
$('#foo').show(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T08:11:26.150

请不要使用上面链接的插件版本，因为它完全过时并且有很多（！）问题。

请使用[https://github.com/fnagel/jquery-ui/tree/selectmenu/ui](https://github.com/fnagel/jquery-ui/tree/selectmenu/ui) (jQuery UI stable) 或[https://github.com/jquery/jquery-ui/tree/selectmenu](https://github.com/jquery/jquery-ui/tree/selectmenu) (jQuery UI dev)**

# javascript - JQuery ajax返回值到其他函数

> ID：11014478
> 
> 赞同：0
> 
> 时间：2012-06-13T12:05:50.180
> 
> 标签：javascript, jquery

您好，我有下一个函数，总是返回 null 作为结果，但是服务调用成功分支出现任何错误，我想修复它：1\. 删除异步属性，2\. 其他调用 GetStore 函数的函数应该处理这个结果功能。我怎样才能以正确的方式做到这一点？()

谢谢。

```
 function GetStore() {
        $.ajax({
            url: serviceurl + 'GetSometing',
            type: 'POST',
            contentType: 'application/json',
            dataType: "json",
            async: false,
            success: function (result) {
                return result;
            },
            error: function (xhr, description, error) {
                return null;
            }
        });
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T12:23:26.907

如果你想让它异步你不能等待它返回一个值，你必须实现回调函数。

```
function GetStore(success, error) {
    $.ajax({
        url: serviceurl + 'GetSometing',
        type: 'POST',
        contentType: 'application/json',
        dataType: "json",
        success: success,
        error: error
    });
}

GetStore(function(result) {
    // successful result
}, function(xhr, description, error) {
    // an error occurred
}); 
```

# java - 如何从自动热键脚本运行 java .class 文件？

> ID：11014479
> 
> 赞同：3
> 
> 时间：2012-06-13T12:05:50.167
> 
> 标签：java, autohotkey

如何从提供一些命令行参数的脚本运行 java .class 文件？该脚本是使用 autohotkey 框架构建的。我们可以从脚本触发 .class 文件的执行吗？如果我错了，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T12:11:03.330

我不熟悉自动热键，但如果你的命令行类似于

```
java -cp <yourclasspath> <yourclassname> <yourarguments> 
```

你可以走了，我猜。

**添加：**

在我看来，[运行](http://www.autohotkey.com/docs/commands/Run.htm)指令允许你这样做。假设您的`MyClass.class`文件（默认包中包含 MyClass）`C:\mypath`，我希望您必须发出类似

```
Run,java -cp . MyClass,C:\mypath 
```

我无法验证上述行，因为我手头没有 Windows 安装。

# iis-7.5 - 为什么 MVC4 会在 customErrors 开启的情况下返回 500？

> ID：11014484
> 
> 赞同：1
> 
> 时间：2012-06-13T12:06:04.713
> 
> 标签：iis-7.5, asp.net-mvc-4

我有一个 MVC4 站点，它有一个不错的 customError 页面，如果您在 IE 中关闭了友好错误但不显示您是否打开了友好错误，该页面效果很好。我不知道为什么 MVC4 在应该只显示我的错误页面时会返回 500，但它确实存在。这是一个示例（我不得不将其编写为代码，因为 SO 在 IP 号处翻转）：

```
http://192.52.51.45/web/Trip/Index/f32e4bc5-9e06-4bb8-8d43-d43b8c9a014c 
```

为了让网站返回 200 并只显示我的错误页面，我需要进行哪些配置更改？不是我从默认 Web.config 中获得的唯一更改是 customErrors：

```
<customErrors mode="On" /> 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T12:39:26.163

这就是`[HandleError]`全局属性的实现方式：

```
public virtual void OnException(ExceptionContext filterContext)
{
    if (filterContext == null)
    {
        throw new ArgumentNullException("filterContext");
    }
    if (!filterContext.IsChildAction && (!filterContext.ExceptionHandled && filterContext.HttpContext.IsCustomErrorEnabled))
    {
        Exception innerException = filterContext.Exception;
        if ((new HttpException(null, innerException).GetHttpCode() == 500) && this.ExceptionType.IsInstanceOfType(innerException))
        {
            string controllerName = (string) filterContext.RouteData.Values["controller"];
            string actionName = (string) filterContext.RouteData.Values["action"];
            HandleErrorInfo model = new HandleErrorInfo(filterContext.Exception, controllerName, actionName);
            ViewResult result = new ViewResult {
                ViewName = this.View,
                MasterName = this.Master,
                ViewData = new ViewDataDictionary<HandleErrorInfo>(model),
                TempData = filterContext.Controller.TempData
            };
            filterContext.Result = result;
            filterContext.ExceptionHandled = true;
            filterContext.HttpContext.Response.Clear();
            filterContext.HttpContext.Response.StatusCode = 500;
            filterContext.HttpContext.Response.TrySkipIisCustomErrors = true;
        }
    }
} 
```

请注意它如何将状态代码设置为 500 并呈现`~/Views/Shared/Error.cshtml`视图。当启用自定义错误时，所有这些都会发生。

顺便说一下，这是在这种特殊情况下使用的语义正确的 HTTP 状态代码。如果您没有找到请求的资源，则为 404。仅当服务器成功处理用户请求时才应使用 200。

如果由于某种原因你不喜欢这种行为，你总是可以编写一个自定义的全局错误处理属性并替换默认的（在`~/App_Start/FilterConfig.cs`->内部注册的`filters.Add(new HandleErrorAttribute());`）。

# architecture - 如何集成来自另一个系统的域实体

> ID：11014485
> 
> 赞同：0
> 
> 时间：2012-06-13T12:06:37.150
> 
> 标签：architecture, system-integration

给定系统 A 和 B，我如何在系统 B 的数据库中引用系统 A 中的域实体，我的工作中有这种情况，我们正在将数据从系统 A 复制到 B，但它正在成为一场噩梦

例如：系统 A 管理 PRODUCT 的信息。系统 B 管理产品的销售，所以我在系统 B 中有这种关系：销售“有很多”“有一个”产品的 SALEITEM。

进行此类集成的方法有哪些？SOA 是否与这种情况有关？有什么推荐的读物吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T05:03:55.423

你在处理什么问题？如果这两个领域没有交叉点，那么您就不应该有一些事情需要解决，这是集成任务的正常情况。但是，如果域相交，那么您将进行某种转换。这是噩梦来玩的地方。您可以重新设计一个或两个域，但要付出代价！它通常不值得，尤其是对于遗留系统。为此，我建议在中间件层包含一个透明的转换引擎。

# java - Maven 构建失败 - MyEclipse

> ID：11014487
> 
> 赞同：1
> 
> 时间：2012-06-13T12:06:43.387
> 
> 标签：java, maven, build, myeclipse

当我尝试构建我的项目时，我收到以下错误：

```
 BUILD FAILURE
    [INFO] ------------------------------------------------------------------------
    [INFO] Total time: 45.435s
    [INFO] Finished at: Wed Jun 13 17:25:47 GMT+05:30 2012
    [INFO] Final Memory: 10M/76M
    [INFO] ------------------------------------------------------------------------
    [ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:2.0.2:compile (default-compile) on project DPCommons: Compilation failure: Compilation failure:
C:\MyEclipseWorkspace\Workspace_MayMU24\DPCommons\src\com\afunds\lang\ResourceClassLoader.java:[13,15] sun.misc.Resource is Sun proprietary API and may be removed in a future release 
```

项目名称将出现在下方。

我该如何克服这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T12:11:52.067

执行以下步骤来解决该问题：

> 窗口 -> 首选项 -> Java -> 已安装的 JRE -> 我有一个来自 JDK 位置的 JRE，我的位置看起来像 C:\Program Files\Java\jdk1.6.0_26
> 
> Window -> Preferences -> Java -> installed JREs -> Execution Enviroments -> 选择 JavaSE-1.6 并选择一个兼容的 JRE，它应该是上一步中设置的一个。

看看这个链接——

[每当 POM 更改时，Eclipse 中的 Maven 都会抱怨“无法找到 Javac 编译器”](https://stackoverflow.com/questions/5163021/how-to-resolve-this-maven-issue)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T12:55:17.110

看起来你有一个 JDK 版本，根据[这个讨论](http://maven.40175.n5.nabble.com/compile-compile-failure-on-sun-proprietary-implementation-API-usage-td115960.html)有这个问题。升级并重试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T12:45:39.160

通过在我的项目的 pom.xml 中提供以下参数解决了这个问题。

```
<compilerArguments>
<bootclasspath>${java.home}\lib\rt.jar</bootclasspath>
</compilerArguments> 
```

但仍然不清楚为什么会这样？

# python - 使用 python 从 C 代码中提取函数名称及其注释（以了解 Linux 内核）

> ID：11014490
> 
> 赞同：3
> 
> 时间：2012-06-13T12:06:45.687
> 
> 标签：python, c, linux, kernel, ftrace

## 背景信息

我刚刚开始学习有关驱动程序和 linux 内核的知识。我想了解用户`write()`和`read()`工作方式。所以我开始使用[ftrace](http://lwn.net/Articles/322666/)来希望看到函数的路径。但是像下面这样的单个程序的跟踪是“巨大的”。

```
int main() {
    int w;
    char buffer[] = "test string mit 512 byte";
    int fd = open("/dev/sdd",O_DIRECT | O_RDWR | O_SYNC);
    w = write(fd,buffer,sizeof(buffer));
} 
```

我也不知道我可以过滤哪些函数，因为我不了解 Linux 内核并且我不想丢掉一些重要的东西。

所以我开始研究 function_graph 跟踪。这是一个片段。

```
 [...]
 12)   0.468 us    |            .down_write();
 12)   0.548 us    |            .do_brk();
 12)   0.472 us    |            .up_write();
 12)   0.762 us    |            .kfree();
 12)   0.472 us    |            .fput();
 [...] 
```

我看到了这些`.down_write()`，`.up_write()`我想，这正是我要搜索的。所以我查了一下。[down_write() 源代码](http://lxr.oss.org.cn/source/kernel/rwsem.c#L46)：

```
 /*
 * lock for writing
 */
 void __sched down_write(struct rw_semaphore *sem)
 {
       might_sleep();
       rwsem_acquire(&sem->dep_map, 0, 0, _RET_IP_);

       LOCK_CONTENDED(sem, __down_write_trylock, __down_write);
 } 
```

但事实证明，这只是锁定和释放锁定。然后我开始为我写一个小参考，所以我不必总是查找这些东西，因为它好像有超过 9000 个。然后我有了想法，为什么不，解析这些函数和它们的注释并将它们写在跟踪文件中的函数后面？像这样：

```
 [...]
 12)   0.468 us    |            .down_write(); lock for writing
 12)   0.548 us    |            .do_brk(); 
 12)   0.472 us    |            .up_write(); release a write lock
 12)   0.762 us    |            .kfree();
 12)   0.472 us    |            .fput();
 [...] 
```

## 主要问题

所以我开始思考如何才能做到这一点。我想用 python 来做，因为我觉得它最舒服。

**1.问题**
为了匹配C函数和注释，我必须定义和实现一个递归匹配语法:(

**2\. 问题**
有些函数只是包装器，没有注释。例如`do_brk()`换`__do_brk()`行，评论仅在`__do_brk()`

所以我想，也许还有其他的评论来源。也许是文档？也有可能，这个使用 python 的“文档生成”已经有人实现了。

还是我理解系统的方式`read()` `write()`非常不智能？你能给我提示我应该如何深入挖掘吗？

非常感谢您阅读，
费边

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T12:26:54.890

在实践中解析注释是相当困难的。解析内核代码并不是特别容易。

首先，您应该*准确*了解[linux 内核中的](http://en.wikipedia.org/wiki/Linux_kernel)[系统调用](http://en.wikipedia.org/wiki/System_call)是什么，以及应用程序如何使用它们。[Linux Assembly HowTo](http://tldp.org/HOWTO/Assembly-HOWTO/)有很好的解释。

然后，您应该了解 Linux 内核的组织结构。我强烈建议阅读一些关于这方面的好书。

使用自动工具探索内核源代码需要大量工作（几个月，而不是几天）。您可以考虑使用[coccinelle](http://coccinelle.lip6.fr/)工具（用于所谓的“语义补丁”）。您还可以考虑使用插件自定义 GCC 编译器，或者更好的是使用[MELT](http://gcc-melt.org/)扩展

^(（MELT 是一种扩展 GCC 的高级领域特定语言；我是它的主要设计者和实现者）。)

如果使用 GCC，您将在中端获得 GCC 内部表示和处理的所有功能（但在此阶段注释会丢失）。

你想做的事情可能比你最初想的要雄心勃勃得多。另请参阅 Alexandre Lissy 的工作，例如[模型检查 linux 内核](http://blip.tv/opensuse/model-checking-the-linux-kernel-alexandre-lissy-4764861)以及他将在[2012 年 Linux 研讨会](http://www.linuxsymposium.org/2012/)（2012 年7 月）上发表的论文

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-02T14:00:15.730

是的，你的方法是对的：学习内核，总是从系统调用开始。内核代码 = 以比普通代码更高的权限执行的代码。英特尔有大约 18 个（？？不确定）特权指令集。

[http://duartes.org/gustavo/blog/post/cpu-rings-privilege-and-protection/](http://duartes.org/gustavo/blog/post/cpu-rings-privilege-and-protection/)

[http://en.wikipedia.org/wiki/Privilege_level](http://en.wikipedia.org/wiki/Privilege_level)

并且当用户代码从较低权限级别转换到较高权限以执行这些特殊指令时，它通过标准的系统调用机制。

执行一个简单的“strace ls”，您可以看到许多系统调用正在执行：每个系统调用都必须转换到内核以执行某些任务。

编写一个简单的脚本，例如（取决于内核版本，对于您的特定内核，请参阅 /sys/kernel/debug/tracing/README）：

```
echo function > /sys/kernel/debug/tracing/current_tracer
cat /sys/kernel/debug/tracing/current_tracer

echo 1 > /sys/kernel/debug/tracing/tracing_on
ls /tmp
cat /sys/kernel/debug/tracing/trace 
echo 0 > /sys/kernel/debug/tracing/tracing_on 
```

我们将得到以下输出（删除所有非 ls ftrace 输出后）：

[http://pastebin.com/vEk2NrDQ](http://pastebin.com/vEk2NrDQ)

现在上面的 ftrace 输出显示了从用户空间执行“ls”时执行的实际内核函数。并非每个功能都需要理解或很重要。也不是关于学习内核 API 本身。但更重要的是很多概念：如何在不同的 CPU、不同的进程、不同类型的同步原语等之间共享资源。

享受每一个小小的步骤......一次一个。

# file - Hadoop MapReduce：适当的输入文件大小？

> ID：11014493
> 
> 赞同：11
> 
> 时间：2012-06-13T12:06:58.193
> 
> 标签：file, hadoop, size, mapreduce

我有 3 位数 GB 甚至 1 或 2 位数 TB 的数据集。因此，输入文件是一个文件列表，每个文件大小为 10GB。我在 hadoop 中的 map reduce 作业处理所有这些文件，然后只提供一个输出文件（带有汇总信息）。

我的问题是：

1.  从 Apache 调整 hadoop/mapreduce 框架的合适文件大小是多少？我听说大文件比小文件更受欢迎。有什么想法吗？我唯一确定的是 hadoop 读取块，每个块默认为 64MB。因此，如果文件大小是 64MB 的乘数，那就太好了。

2.  目前，我的应用程序只将输出文件写入一个文件。文件大小当然是 3 位千兆位。我想知道如何有效地对文件进行分区。当然，我可以只使用一些 unix 工具来完成这项工作。但是最好直接在hadoop中执行此操作吗？

谢谢你的评论！

PS：我没有压缩文件。输入文件的文件格式为 text/csv。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-13T13:07:36.973

如果您不压缩文件，那么 hadoop 将处理您的大文件（比如 10G），其中包含许多与文件块大小相关的映射器。

假设您的块大小为 64M，那么您将有 ~160 个映射器处理这个 10G 文件（160*64 ~= 10G）。根据您的映射器逻辑的 CPU 密集程度，这可能是一个可接受的块大小，但如果您发现您的映射器在亚分钟时间内执行，那么您可能希望增加每个映射器完成的工作（通过增加块大小到 128、256、512m - 实际大小取决于您打算如何处理数据）。

较大的块大小将减少用于处理 10G 文件的映射器数量。当然，您可以增加 TextInputFormat 使用的最小拆分大小，但是您很可能会遇到较低的数据局部性，因为映射器可能正在处理 2 个或更多块，这些块可能并不都驻留在该节点上。

至于输出，这又取决于你的处理逻辑在做什么——你能通过引入更多的 reducer 来进行分区吗？这将创建更多输出文件，但是您需要对这些文件进行哪些分区逻辑（默认情况下，它们将由您的密钥进行哈希分区）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-13T13:11:00.417

**输入文件的大小：**

调整它的一种方法是查看您的地图任务完成的速度。每个映射任务将接收 1 个文件作为输入，如果它们在 30-40 秒内完成，那么您应该考虑增加每个文件的大小，以便每个映射器有更多的工作要做。这是因为地图任务在执行任何实际工作之前需要大约 30 秒来初始化。

它还取决于您的集群一次可以运行多少个地图任务。您可以尝试调整文件和块大小，以便尽可能多地利用地图任务。有关更多想法，请参阅此博客文章：http: [//www.cloudera.com/blog/2009/12/7-tips-for-improving-mapreduce-performance/](http://www.cloudera.com/blog/2009/12/7-tips-for-improving-mapreduce-performance/)

**输出文件的大小：**

执行此操作的简单方法是指定多个减速器（每个减速器将生成一个输出文件）。如果您想按某个键（例如，年月）对结果进行分区，您可以将其包含在 map 任务的输出键中，它们将被排序到同一个 reducer。然后你只需要检查每个文件，看看它有什么年月键。

**压缩：**

我建议您查看压缩文件。这样做会使输入文件“更大”，因为每个文件都将包含更多数据供单个地图任务操作。它还将减少您在集群中使用的磁盘数量。如果有的话，它也可能会提高集群上 mapreduce 的性能，因为读取和移动文件会减少磁盘 I/O 和网络流量。

此外，压缩 map 任务的中间输出（map 任务在进入 reducer 之前的输出）。它将以类似的方式提高性能。这是通过设置来完成的`mapred.compress.map.output=true`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-13T13:05:44.133

Hadoop 根据输入拆分大小划分工作。它将您的总数据大小除以您的拆分大小，这就是它确定将发生多少地图作业的方式。一般的共识是每台机器需要 10-100 张地图；来自[http://hadoop.apache.org/common/docs/r0.18.3/mapred_tutorial.html](http://hadoop.apache.org/common/docs/r0.18.3/mapred_tutorial.html)

> 映射的数量通常由输入的总大小驱动，即输入文件的总块数。地图的正确并行度似乎是每个节点大约 10-100 个地图，尽管对于非常 cpu-light 的地图任务，它已设置为 300 个地图。任务设置需要一段时间，因此最好至少花费一分钟来执行地图。

使用某些输入格式，您可以设置拆分大小，默认情况下，大多数（包括 TextInputFormat）为每个块创建一个映射。所以，如果你有几个不同的文件，你最终会得到更多不完整的 64mb 块，这是对地图的浪费。

处理一个巨大的文件比处理多个文件要高效得多。当必须考虑多个文件时，作业的设置需要更长的时间。hadoop 的核心实际上是以少量大文件为中心的。此外，HDFS 设置为处理少量大文件，并且您拥有的文件越多，namenode 将占用更多内存以跟踪它们。

# php - javascript 包括相对来自哪里？

> ID：11014494
> 
> 赞同：1
> 
> 时间：2012-06-13T12:06:59.970
> 
> 标签：php, javascript, jquery, ajax

我正在尝试使用 Jquery 执行 AJAX 请求。

JS 文件位于此处：

```
root/templates/wooden_tpl/scripts/script.js 
```

我尝试使用这个函数从这个文件中请求数据：

```
$.post('ajax/get_blog_info.php',function(data){
    alert(data);
}); 
```

该文件位于此目录中：

```
root/templates/wooden_tpl/scripts/ajax/get_blog_info.php 
```

由于某种原因，这不起作用。

包含 script.js 的文件包含在根目录中。

我的假设是 javascript 不包括相对于它的当前通行证。真的？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T12:10:25.243

Important is the context where the javascript is executed. And this is the context of the including file, thus you have to use the including page's path.

# php - SQLSTATE[HY000]：一般错误：1366 整数值不正确：

> ID：11014496
> 
> 赞同：0
> 
> 时间：2012-06-13T12:07:04.067
> 
> 标签：php, mysql, pdo

我在使用 PDO 时遇到了一些问题。一切似乎都是正确的，但我收到了这个错误

```
SQLSTATE[HY000]: General error: 1366 Incorrect integer value: ':permissao' for column 'permissao' at row 1\n 
```

这是打印输出的代码

```
$this->nome = $nome;
    $this->email = $email;

    $salt = $this->generateSalt();
    $permissao = 10;
            $activo = 0;
    #encripta chama a funcao para encriptar a password do utilizador
    $this->password = $this->pwdEncript($password, $salt);

 $params = array('nome'=>$this->nome,
                            'email'=>  $this->email, 
                            'password'=>  $this->password,
                            'salt'=>$salt,
                            'permissao'=>$permissao,
                            'activo'=>$activo);

    $sql = "INSERT INTO sys_users(nome,email,password,salt,permissao,activo)
                VALUES(':nome',':email',':password',':salt',':permissao',':activo')";       

    try
    {   
        $sth = $this->db->prepare($sql); 
                    $sth->execute($params);
    }
    catch(PDOException $e)
    {
        echo 'Erro ao inserir na base de dados'.$e->getMessage().'\n';
    } 
```

Permissao 是 mysql 表上的一个 INT。

很高兴在这方面提供任何帮助；）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T12:34:14.250

已经在评论中说过，但看起来你不需要占位符周围的引号。只需依靠 Prepared Statement 机制为您完成。

注意：对于 MySQL，PDO 默认模拟准备好的语句。为了获得额外的安全性，您可能希望将其设置为使用真正的准备好的语句。

```
$pdo -> setAttribute (PDO::ATTR_EMULATE_PREPARES, false); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T12:25:26.180

尝试这个：

```
$sql = "INSERT INTO sys_users(nome,email,password,salt,permissao,activo)
        VALUES(:nome,:email,:password,:salt,:permissao,:activo)"; 
```

# ruby-on-rails-3 - 是否有从 SCSS 文件生成图表的 gem？

> ID：11014497
> 
> 赞同：2
> 
> 时间：2012-06-13T12:07:09.363
> 
> 标签：ruby-on-rails-3, rubygems, sass, diagram

我们的应用程序使用一个非常非常复杂的 .scss 文件系统来进行样式设置。我们有多个导入和包含，分布在多个文件夹中。现在我们想简化它。但在我们开始之前，有一个工具可以将当前结构生成为图表，这将非常方便。

就像可以用来从 Rails 模型生成 ERD 的 gems 一样。

有什么已知的工具吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T20:26:59.903

如果我误解了您的问题，请原谅我，但是您可以使用 Windows/Unix 中的命令快速查看目录结构（根据您的发行版，`tree`您可能需要使用您喜欢的包管理器进行安装。Mac os X 用户可以使用[自制软件](http://mxcl.github.com/homebrew/)安装.`tree``tree`

示例输出

`cd path/to/project`

`tree`

```
├── test
│   ├── 1
│   │   └── file$.scss
│   ├── 2
│   │   └── file$.scss
│   ├── 3
│   │   └── file$.scss
│   ├── 4
│   │   └── file$.scss
│   └── 5
│       └── file$.scss
└── test.txt 
```

显然，这不是特定于 Rails 的解决方案；如果我错过了这一点，希望其他人能够提供更多的rubyesque选项。

# c# - DTO classes vs. struct

> ID：11014501
> 
> 赞同：25
> 
> 时间：2012-06-13T12:07:10.423
> 
> 标签：c#, struct, dto, n-tier-architecture

So, this is actually this question is my current keystone. I'm working on refactoring of my personal project, trying increase performance, optimize memory usage, make code easy and clear. I have a different application layers (actually, DAL, BLL, ServiceAgents which is WCF services). I'm using Entities/Models/DTOs to pass data between those layers, which is stateless (don't have any logic at all). Currently they're objects like this:

```
public class Person
{
  public ComplexId Id { get; set; }
  public string Name { get; set; }
  // ...
} 
```

I used to use such approach, it's like a "best practice", is it? Is this best way to store transferred data? What if I change it for **struct** like this:

```
public struct Person
{
    public ComplexIdentifier ComplexId;
    public string Name;
}

public struct ComplexIdentifier
{
    public int LocalId;
    public int GlobalId;
} 
```

Is this would be better way from performance/memory usage perspective? Or maybe there is some kind of traps acting that way?

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-13T12:11:46.007

对于标准 DTO 实体，您需要坚持使用该类。

与类相比， A的潜在用例范围`struct`要*有限得多。*`struct`当类型变得太大时也会出现效率问题（不要忘记，它们是值类型，并且在传递时会被*复制），如*[MSDN 关于值类型的指南](http://msdn.microsoft.com/en-us/library/y23b5415%28v=vs.71%29.aspx)中所述。更不用说当您开始通过属性公开类型时的**大量**陷阱，或者在引用接口时意外地将其装箱，或者使它们可变......`struct`

我并不是[说](https://stackoverflow.com/questions/441309/why-are-mutable-structs-evil) `struct`在相关时不使用，但我*很少*发现自己需要`struct`在我们的主桌面应用程序中使用类型——它是分层的并具有 DTO 类型。

* * *

性能问题不能像`struct`vs.那样简单地回答`class`。您将需要使用[dotTrace](http://www.jetbrains.com/profiler/)或[ANTS](http://www.red-gate.com/products/dotnet-development/)等分析工具来找到热点并从那里开始。性能问题并非微不足道，好的工具通常是答案的开始。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-14T05:19:53.493

数据传输对象的两个最佳选择通常应该是深度不可变的类对象，或者具有适合用作数据传输对象的类型的暴露字段的结构。其他类型的结构有时也可以使用，但暴露字段结构是迄今为止最简单的，简单是一大优点。

可变结构是邪恶的概念可以追溯到一些早期的 C# 编译器，其中

```
  SomeReadonlyStruct.SomeProperty = 5;

```

编译器会默默地将其转换为：

```
  var temp = SomeReadonlyStruct;
  temp.SomeProperty = 5;

```

将结构字段隐藏在只读属性后面是为了确保前一条语句拒绝编译而不是产生损坏的代码。由于较新的编译器将拒绝改变只读结构的可写字段，因此不再需要将字段包装在只读属性中。

与其他类型的数据传输对象相比，具有公开字段的结构具有巨大的优势：每个结构都具有适合数据传输的类型的公开字段并且除了构造函数之外没有其他成员的行为方式相同，这不足为奇。从未使用过结构的人可能会对它们的行为不像类这一事实感到有些惊讶，但了解任何此类结构如何工作的人会理解它们是如何工作的。

考虑以下代码：

```
  customerPhone = someDataSource.GetPhoneNumber(customerID);
  customerPhone.Extention = "5309"

```

有些人不喜欢 if`customerPhone`是一个暴露字段结构，设置`Extension`属性不会影响`someDataSource`. 虽然编写 struct 字段确实不会更新任何其他内容，但这种情况比`customerPhone`可变类类型要好得多。任何了解这`customerPhone`是暴露字段结构类型的人都会知道对其成员的更改不会影响其他任何内容。相比之下， if`customerPhone`是一个可变类类型，像上面这样的代码可能会`someDataSource`通过更改与它关联的电话号码来更新`customerID`。或者它可能不会。或者，如果一个电话号码与两个相关联`customerID`值，上面的代码可能会改变它们。为了准确确定上述代码可能产生的影响和副作用，可能需要研究的代码量非常大。更糟糕的是，可能很难确定一个人没有错过任何东西。

肯定有一些地方传递类对象引用比传递结构更有效。还有一些情况，可变类对象可以成为类中有用的数据持有者。然而，一些通用包装器可以方便地将结构包装在可变或不可变类中，*并在这些类型的类之间交换信息*。

```
接口 IReadableHolder<T> { T 值 {get;} }

类 MutableHolder<T> : IReadableHolder<T>
{
  公共 T 值；
  IReadableHolder.Value {get {return Value;} }
  公共 MutableHolder(T newValue) { Value = newValue; }
  公共 MutableHolder(IReadableHolder<T> it) { Value = it.Value; }
}
类 ImmutableHolder<T> : IReadableHolder<T>
{
  T_值；
  公共价值 {get {return _Value;} }
  公共 ImmutableHolder(T newValue) { _Value = newValue; }
}

```

如果没有可变结构，这样的构造会更加尴尬。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-13T12:12:28.370

> 从性能/内存使用的角度来看，这会更好吗？

不，结构是值类型，因此它们是按值复制的。这意味着您将始终复制整个对象，而不是仅复制一个引用。如果有的话，它可能会稍微慢一些并使用更多内存（因为对象将被复制）。

不应该这样做的另一个原因是：应始终避免使用可变结构，因为如果您不小心，它们可能会导致意外行为。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-13T12:15:07.253

A`struct`可能更危险的是，值类型的处理方式更加不同，`CLR`如果写得不好（例如可变结构），可能会让人头疼。*此外，如果您的类型包含许多字段，然后从一个方法传递到另一个方法，那么您将在每个方法调用上复制每个字段的值，*从而比您一开始使用类时使用更多的内存。

使用 [DTO](http://en.wikipedia.org/wiki/Data_Transfer_Object)（数据传输对象）将鼓励状态和行为的分离。如果做得好，这可能是一个很好的设计（在大多数情况下，您将使用类而不是结构来实现此模式）。

此外，使用 a`struct`作为 the的具体情况`DTO object`似乎有缺陷，因为它引入了不必要`redundancy`的 . 因为`structs cannot inherit other structs`，你不能表达 is-a 关系。当你拥有`Customer`which 继承自`Person`. 你重复所有的`Person properties in the Customer`结构吗？您是否将 Person 结构嵌套在 Customer 结构中？这两种方法都不理想。如果您至少使用了类，**则可以让 Customer 扩展 Person**。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-13T12:16:36.807

您应该使用类方法，结构方法甚至可能会更慢，因为结构是值类型，并且无论您将它们作为函数参数传递到哪里，都会制作副本。因此，对于您的 DTO，请坚持使用课堂方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-13T12:44:13.557

我的意见是：课程更好。

使用类，您可以实现 INotifyPropertyChanged 接口，如果您进行数据绑定，这将非常有帮助。

你也可以有一些私有字段，比如“ID”，只有“get”-property，你可以向你的类添加一些方法，你可以使你的实体可序列化。
我只想说，你对类更灵活，我认为在这种情况下结构和类之间没有很大的性能差异。

这是一本非常好的书，它通过设计 nTier 应用程序帮助了我很多：http: [//msdn.microsoft.com/en-us/library/ee817644.aspx](http://msdn.microsoft.com/en-us/library/ee817644.aspx)

看看那里。它说：“在结构和类之间进行选择。对于不包含分层数据或集合的简单业务实体，请考虑定义一个结构来表示业务实体。对于复杂的业务实体，或者对于需要继承的业务实体，将实体定义为而是一堂课。”

# c# - 使用 Linq to C# 获取特定属性值

> ID：11014502
> 
> 赞同：1
> 
> 时间：2012-06-13T12:07:12.427
> 
> 标签：c#, linq

我创建了一个具有这样属性的类

```
public class Dependencies
{
    public string issueID { get; set; }
    public string status { get; set; }
    public int dependencyCheck { get; set; }
} 
```

现在我创建了一个可以使用这些属性的方法。

```
private static void prepareIssuesList(string IssueKey, string JIRAtoken)
{
    Dependencies dpObj = new Dependencies();
    List<Dependencies> listObj = new List<Dependencies>();
    dpObj.issueID = IssueKey;
    dpObj.status = "open";
    dpObj.dependencyCheck = 0;
    listObj.Add(dpObj);

} 
```

现在我的问题是，如何更改`dependencyCheck`属性值。`prepareIssuesList()`可以多次调用。所以我将多个对象添加到 Dependencies 类。在某个时间点，我想更改dependencyCheck 属性值。这该怎么做。我认为需要使用 Linq to C#。ICan任何人对此有任何解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T12:28:53.080

我会按照这些思路做一些事情：

```
public class Dependency
{
     public string IssueId { get; set; }
     public string Status { get; set; }
     public int DependencyCheck { get; set; }
}

public class DependencyManager
{
     public DependencyManager()
     {
          this.Dependencies = new List<Dependency>();
     }         

     public List<Dependency> Dependencies { get; private set; }

     public void AddDependency(string issueId)
     {
         var dep = new Dependency();
         dep.IssueId = issueId;
         dep.Status = "open";
         dep.DependencyCheck = 0;

         this.Dependencies.Add(dep);
     }

     public void SetDependencyCheck(string issueId, int value)
     {
         var dep = this.FindDependencyByIssueId(issueId);
         dep.DependencyCheck = value;
     }

     public Dependency FindDependencyByIssueId(string issueId)
     {
         var dep = this.Dependencies.FirstOrDefault(d => d.IssueId.Equals(issueId));
         if(dep == null) throw new ArgumentException("Dependency not found", "issueId");
         return dep;
     }
} 
```

然后在你的代码中的某个地方你可以做：

```
var mgr = new DependencyManager();
mgr.AddDependency("ABC123");
mgr.AddDependency("ABC456");

//... some other stuff that makes sense

mgr.SetDependecyCheck("ABC123", 42); 
```

# javascript - 通过 id-Extjs 将数据加载到模型中

> ID：11014503
> 
> 赞同：2
> 
> 时间：2012-06-13T12:07:19.190
> 
> 标签：javascript, extjs, extjs4

我试图在 Extjs 中使用直接存储
将代码传给我的存储

```
Ext.define('IDE.store.Files', {
    extend: 'Ext.data.Store',
    proxy: {
        type: 'direct',
        api: {
            create:Files.AddNew,
            read:Files.GetFile,
            update:Files.Update,
            destroy:Files.Delete,
            //load:Files.GetFile
        },
        paramOrder:'Path'
    },
    model:'IDE.model.File'
}) 
```

模型的代码是

```
Ext.define('IDE.model.File', {
    extend: 'Ext.data.Model',
    fields: [
        { name: 'Path', type: 'string' },
        { name: 'Name', type: 'string' },
        { name: 'Extention', type: 'string' },
        { name: 'Content', type: 'string' }
    ],
    idProperty:'Path',
    store:'IDE.store.Files'
}) 
```

如您所见，`idProperty`以下`Path`
代码段给出错误

```
//this.getStore('IDE.store.Files').load(path, { sucess: function (file) {
//                console.log(file.get('Content'));           
//            } });
this.getStore('IDE.store.Files').load(path); 
```

在这里我`path`从某处得到并试图从错误的特定路径加载文件

```
 Ext.data.proxy.Direct.doRequest(): No direct function specified for this proxy 
```

现在的问题是 extjs 的文档还不够，在我搜索的所有地方，我只能`api`在`proxy`. 1.create
2.read
3.update
4.destroy 我缺少哪个 api
？

或者
我需要在哪里提供直接功能`load()`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T07:25:59.963

我可以用我的代码解决多个问题，所以只是放在这里寻求社区的帮助。
1.我调用加载函数的方式是正确的..它只是不接受参数，而是一个具有范围和回调的整个对象，所以可能是错误说 [http://docs.sencha.com/ext-js/ 4-0/#!/api/Ext.data.Store-method-load](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.data.Store-method-load)
2\. 如果我只是删除`api`.. 并使用`directFn`配置选项，那么它似乎可以工作..

**代码：**

```
Ext.define('IDE.store.Files', {
    extend: 'Ext.data.Store',
    proxy: {
        type: 'direct',
        directFn: Files.GetFile, // <--- new line of code
        api: {
            create:Files.AddNew,
            //read:Files.GetFile, // <--- old line of code
            update:Files.Update,
            destroy:Files.Delete
        },
        paramOrder:'Path'
    },
    model:'IDE.model.File'
}) 
```

# c++ - Determine the argument and result Type of a functor

> ID：11014505
> 
> 赞同：4
> 
> 时间：2012-06-13T12:07:35.233
> 
> 标签：c++, functor, sfinae

How can I test whether functor is a callable object which takes a reference to an int and returns a bool?

```
template<typename functor>
void foo(functor f)
{
    static_assert('functor == bool (int&)', "error message");

    int x = -1;
    if (f(x))
        std::cout << x << std::endl;
}

bool bar(int& x)
{
    x = 4711;
    return true;
}

struct other
{
    bool operator()(int& x)
    {
        x = 815;
        return true;
    }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T12:43:12.437

在我看来，您并不想检查函子的签名，而是首先要限制用户可以传入的内容：

如果您有权访问，`std::function`您可以这样做：

```
void foo(const std::function<bool(int&)>& f) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-27T17:22:33.273

我假设不排除 C++11 解决方案。

我也会假设 OP 认为他希望检测具有签名的函数或函子是正确的`bool(int &)`。Dave 建议的使用 `std::function`:

```
void foo(const std::function<bool(int&)>& f); 
```

确实会确保任何可接受的参数`f`都包含一个类似一元函数的对象，该对象的参数是可以绑定到的类型，`int&`并且其返回类型可以隐式转换为`bool`. 但：

```
double bar(bool b) {
    return b ? DBL_MAX : DBL_MIN;
} 
```

就是这样一个对象，将其视为“可调用对象，它接受对 int 的引用并返回 bool”似乎有些牵强。

我们希望测试类类型的函数和对象的事实意味着 SFINAE 类模板在脉络中：

```
template<typename T>
struct is_predicate_of_ref_to_int_type { ... }; 
```

并不完全符合 itelf 的要求，因为虽然我们可以用仿 `typename T`函数类型实例化，但我们不能用函数实例化`typename T`。

对于一个函数`func`，我们应该用`T`=实例化`decltype(func)`；但是不对称仍然存在，因为对于仿函数类型`Functor`，我们不能用`T`=实例化`decltype(Functor)`，因为`Functor`它不是表达式。

一旦我们获得了所讨论对象的类型，这样的 SFINAE 类模板就可以达到目的，但是为了使用统一的习惯用法，我们可以使用重载函数，它的参数同样可以是函数或仿函数对象。这是一个这样的解决方案，附加了一个测试程序：

```
#include <type_traits>

template<class T>
struct is_predicate_of_ref_to_int_type {
    // SFINAE operator-has-correct-sig- :)
    template<class A>
    static auto test(bool (A::*)(int &)) -> std::true_type;

    // SFINAE operator-exists :)
    template <class A> 
    static auto test(decltype(&A::operator()),void *) ->
        // So the operator exists. Has it the correct sig? 
        decltype(test(&A::operator()));

    // SFINAE failure :(
    template<class A>
    static auto test(...) -> std::false_type;

    // This will be either `std::true_type` or `std::false_type`
    typedef decltype(test<T>(0,0)) type;

    static const bool value = type::value;

};

template<typename T>
bool is_predicate_of_ref_to_int(T const & t) {
    return is_predicate_of_ref_to_int_type<T>::value;
}

bool is_predicate_of_ref_to_int(bool (function)(int &)) {
    return true;
}

// Testing...

struct passing_class_0
{
    bool operator()(int & i) {
        return i > 0;
    }
};

struct failing_class_0
{
    bool operator()(int i) {
        return i > 0;
    }
};

struct failing_class_1
{
    bool operator()(int & i, int & j) {
        return i > j;
    }
}   

struct failing_class_2{};

bool passing_function_0(int & i) {
    return i > 0;
}

bool failing_function_0(int i) {
    return i > 0;
}

int failing_function_1(int & i) {
    return i;
}

void failing_function_2(){}

#include <iostream>

using namespace std;

int main()
{
    passing_class_0 pc0;
    failing_class_0 fc0;
    failing_class_1 fc1;
    failing_class_2 fc2;

    cout << "Expecting pass..." << endl;
    cout << is_predicate_of_ref_to_int(pc0) << endl;
    cout << is_predicate_of_ref_to_int(passing_function_0) << endl;
    cout << "Expecting fail..." << endl;
    cout << is_predicate_of_ref_to_int(fc0) << endl;
    cout << is_predicate_of_ref_to_int(fc1) << endl;
    cout << is_predicate_of_ref_to_int(fc2) << endl;
    cout << is_predicate_of_ref_to_int(failing_function_0) << endl;
    cout << is_predicate_of_ref_to_int(failing_function_1) << endl;
    cout << is_predicate_of_ref_to_int(failing_function_2) << endl;
    cout << is_predicate_of_ref_to_int(failing_function_2) << endl;
    cout << is_predicate_of_ref_to_int(1L) << endl; 
    return 0; 
} 
```

使用 GCC 4.7.2 或 clang 3.2 构建，具有预期的输出。

有一个警告。任何*重载* `operator()`的函子类型都将无法通过测试，例如

```
struct bar
{
    bool operator()(int & i) { ... }
    bool operator()(int & i, int & j) { ... }
}; 
```

即使其中一个重载是令人满意的，由于标准对获取重载成员函数的地址的限制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T12:15:38.837

如果您的编译器支持它，您可以使用标头`<type_traits>`和`is_function`.

# php - 转移网站后wordpress无法正常工作

> ID：11014507
> 
> 赞同：0
> 
> 时间：2012-06-13T12:07:52.903
> 
> 标签：php, mysql, wordpress

我已将网站转移到新主机...好吧，我已经更改了`wp-config`必要的后记...该网站没有出现...它显示

`Oops! This link appears to be broken`.

```
Suggestions:
Search on Google: 
```

好吧，我尝试将 url 前缀更改为[http://example.com/](http://example.com/)形式 demo.example.net/example 但仍然没有任何变化...当我尝试通过键入[http://armeniantradenetwork 来访问 wp-admin 时。 com/wp-admin](http://armeniantradenetwork.com/wp-admin)它会将我重定向到链接[http://demo.softty.net/atn/wp-admin](http://demo.softty.net/atn/wp-admin) 请帮助 meeeeeeeeeee ！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T12:11:12.347

您需要进入 wp_options 表并将引用从旧位置更新到新位置。如果你使用类似 phpMyAdmin 的东西，你可以这样做

```
SELECT * FROM `wp_options` WHERE `option_value` LIKE '%demo.softty.net%' 
```

您至少应该获得“siteurl”和“home”选项。更新这些，它应该再次工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T12:14:02.013

如果域有变化，您需要编辑`/wp-content/themes/*theme name*/functions.php`并添加这个

```
update_option('siteurl','http://armeniantradenetwork.com/');
update_option('home','http://armeniantradenetwork.com/'); 
```

*更新*
下次登录到管理面板，转到*设置*->*永久链接*，然后单击*保存更改*- 它会重建所有永久链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T12:32:32.517

@miszczu 在上面提供了一个很好的解决方案。

如果您有权访问 phpmyadmin，还有另一种解决方案：

**wp_options**或**yourprefix_options**表 -> **siteurl**字段和**home**字段。将它们编辑为您当前的域名，完整的域。

祝你好运！:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T12:36:08.870

请确认两件事

1.  正如 miszczu 所说：更新数据库中的“siteurl”和“home”选项。
2.  确保您有正确的 .htaccess 文件或从 wp-admin->Settings->Permalink 生成新文件。

如果没有 htaccess，常规 url（类似于 ?p=1 的 url）应该可以工作。

# mysql - Cannot load data to MySQL database with LOAD DATA INFILE

> ID：11014508
> 
> 赞同：3
> 
> 时间：2012-06-13T12:07:54.713
> 
> 标签：mysql, load-data-infile

I am using LAMP in Ubuntu 12.04\. I created a new user in MySQL (myserver@localhost) and granted ALL on a database to that user. There is a text file the permission of which is set to read for everyone. But when I try to load the data from that text file to the database, it says "Access denied for user 'myserver'@'localhost' (using password: YES)"

The query I used is:

```
LOAD DATA INFILE "~/text/member_info.txt" INTO TABLE member FIELDS TERMINATED BY '|'; 
```

I can think of a workaround with some loops in PHP but why doesn't the 'LOAD DATA INFILE' work?

Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T18:45:51.503

这是由于您在 Ubuntu LTS 12.04 中使用的 MYSQL 5.5 版本：[mysql doc](http://dev.mysql.com/doc/refman/5.0/en/load-data-local.html)

来自 mysql 文档评论：

> 您可以将 LOAD DATA LOCAL 与最新版本的 PHP 一起使用，而无需重新编译 PHP。
> 
> 将 128（CLIENT_LOCAL_FILES 常量的值）作为第五个参数传递给 mysql_connect() 可以在客户端启用 LOAD DATA LOCAL。
> 
> 示例：$dbh = mysql_connect($server, $user, $pass, false, 128);
> 
> 适用于 PHP 4.3 及更高版本。

但其实mysql_connect()已经过时了，用mysqli也找不到解决办法。

这就是为什么我最终使用[这个](http://forums.mysql.com/read.php?30,12298,266964#msg-266964)解决问题的人。

```
grant file on *.* to mydatabase@localhost identified by 'myuser'; 
```

现在 $mysqli->query("LOAD DATA INFILE '".$proxy_file_name_path."' IGNORE INTO TABLE `mytable`(myfield)"

# json - Ext JS 4 存储加载回调

> ID：11014509
> 
> 赞同：3
> 
> 时间：2012-06-13T12:07:57.757
> 
> 标签：json, extjs4, extjs4.1

我正在尝试为我的学校项目构建一个简单的用户设置功能。
我创建了一个像这样的数据模型：

```
Ext.define('Urlopy.Model.UserPreferences', {
        extend : 'Ext.data.Model',
        idProperty : 'userID',
        fields : [{
                    name : 'userID',
                    type : 'string'
                }, {
                    name : 'admin',
                    type : 'bool'
                }]
    }); 
```

和这样的商店：

```
Ext.define('Urlopy.Store.UserPreferences', {
        extend : "Ext.data.Store",
        autoLoad : false,
        autoSync : true,
        batch : false,
        proxy : {
            type : 'ajax',
            sortParam : undefined,
            startParam : undefined,
            pageParam : undefined,
            limitParam : undefined,
            noCache : false,
            headers : {
                "Content-Type" : "application/json; charset=utf-8"
            },
            api : {
                read : 'services/UserPreferences.asmx/Get',
                update : 'services/UserPreferences.asmx/Update'
            },
            reader : {
                type : 'json',
                root : 'd.data'
            },
            writer : {
                type : 'json',
                encode : false,
                writeAllFields : true,
                root : 'data'
            }
        },
        model : 'Urlopy.Model.UserPreferences'
    }); 
```

在我的应用程序中，当用户登录时，我想获得他的偏好。

我有这样的功能：

```
onLogin : function() {

            this.createGlobalStores();

            this.userPreferenceStore.load({

                        callback : function(r, options, success) {
                            console.log(r.data)
                        }

                    });

        },
        createGlobalStores : function() {
            this.userPreferenceStore = Ext.create("Urlopy.Store.UserPreferences");
        }, 
```

我想在回调中做的是获取用户 ID 并显示它，即使使用简单的警报。

现在我得到的只是在萤火虫中显示的未定义。

我来自服务器的 json 数据如下所示：

```
{"d":{"__type":"Urlopy.services.UserPreference","userID":"12445","admin":true}} 
```

我需要能够在该商店上调用加载方法，并在回调中从模型中获取特定属性。我的商店将永远有 1 件商品！（还有其他方法可以做到这一点吗？）

欢迎任何关于为什么这不起作用的想法！

**编辑** 我已经更改了我的服务器脚本以返回这样的 json：

```
{"d":{"data":{"userID":"12-44-55","admin":true}}} 
```

这很好用，不需要在对象周围添加额外的 []。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-13T12:26:21.397

首先，商店的负载需要一个数组，其次您将代理的根设置错误。因为您的 json 中没有 d.data 对象。简单的解决方法是将您的 json 数据编码为具有一个元素的数组，并且该数组的标记为“数据”...

```
{"d":[{"__type":"Urlopy.services.UserPreference","userID":"12445","admin":true}]} 
```

并将根设置为 d

```
reader : {
    type : 'json',
    root : 'd'
} 
```

在回调之后，您将拥有一个包含一个元素的记录数组，您可以使用索引 0 轻松访问

```
callback : function(records, options, success) {
    console.log(records[0].data.userID +" " + records[0].data.admin);
} 
```

**编辑**

其他不涉及门店的方法

执行一个简单的 ajax 请求，例如：

```
Ext.Ajax.request({
            url: 'services/UserPreferences.asmx/Get',
            params: {/*if you want any extra params to be sent*/},
            scope: this,
            success: function (result) {
                var response = Ext.decode(result.responseText);
                //this is for your initial json
                alert(response.d.userID);
            },
            failure: function (result) {
                alert('something failed')    
            }
        }); 
```

我不知道您对数据做了什么，但例如您可以将其加载到表单中，对于更新方法，您将拥有表单的提交选项。可以配置发送数据的 url。

# javascript - 带有phonegap和android的javascript警报中的特殊字符

> ID：11014510
> 
> 赞同：1
> 
> 时间：2012-06-13T12:07:58.123
> 
> 标签：javascript, android, cordova, special-characters, alert

我正在使用phonegap开发一个android“应用程序”。我无法在 javascript 警报框中显示德语中使用的特殊字符（如 ö ä ü）...

我的 index.html 的 Header 看起来像这样：

```
<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" charset="utf-8" /> 
```

有没有办法在警告框中正确显示特殊字符？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T14:00:22.277

您必须对字符进行 HTML 转义：

```
alert('&ouml; &auml; &uuml;'); 
```

为我产生正确的输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T15:42:49.283

我通过使用解码编码字符串的 javascript unescape() 函数让它工作。

示例： http: [//jsfiddle.net/CFgWN/3/上的第三个警报](http://jsfiddle.net/CFgWN/3/)

# ios - How to use existing .db file in xCode4 for iOS

> ID：11014511
> 
> 赞同：0
> 
> 时间：2012-06-13T12:08:15.807
> 
> 标签：ios, cordova

I have a phoneGap application and i am using existing .db file to use data. i used below given link [http://gauravstomar.blogspot.ca/2011/08/prepopulate-sqlite-in-phonegap.html?utm_source=feedburner&utm_medium=feed&utm_campaign=Feed:+GauravSTomarBootstrappingIntelligence+(Gaurav+S+Tomar+:+Bootstrapping+Intelligence](http://gauravstomar.blogspot.ca/2011/08/prepopulate-sqlite-in-phonegap.html?utm_source=feedburner&utm_medium=feed&utm_campaign=Feed:+GauravSTomarBootstrappingIntelligence+(Gaurav+S+Tomar+:+Bootstrapping+Intelligence) to use my db file in android app and it was successfully done. and now i am trying same thing in iOS, i used code given in above link to copy db file but i don`t know whether db file is copied at the proper location or not because when i fire select query i am getting error. plz help me. thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T06:18:48.010

您可以在路径中检查复制的数据库`/Library/Application Support/iPhone Simulator/6.1`

# html - 任何人都可以建议使用 JQuery Mobile 选择下拉框的替代方法吗？

> ID：11014513
> 
> 赞同：-1
> 
> 时间：2012-06-13T12:08:17.793
> 
> 标签：html, jquery-mobile, appmobi

我已经构建了一个基于 JQuery Mobile 的应用程序，该应用程序包含在 AppMobi 中，适用于 iOS 和 Android。到目前为止，我还没有听说过任何重大问题。今天我听说使用 Android ICS 的用户在访问任何下拉选择框时都会出现可重复的崩溃——我无法用我的旧测试单元重现该问题。我也让他们尝试了我的原始 html 网站——它不会产生相同的行为，但 AppMobi 的人似乎对 JQuery Mobile 的使用持暗淡的态度，所以不要指望那个季度会有太多帮助。

我的主要替代方案可能是用一些替代方案替换标准选择下拉选择框。

任何人都可以提出一个替代方案（越简单越好），它会产生与下面的代码相同的功能？

```
<select id="punits">
    <option value="in_H2O">in H2O</option>
    <option value="in_HG">in Hg</option>
    <option value="psi">psi</option>
    <option value="cm_H2O">cm H2O</option>
    <option value="cm_HG">cm Hg</option>
    <option value="kPa">kPa</option>
  </select> 
```

提前谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T06:41:30.757

为了越简单越好 - 这是一个单行修复：我可以建议使用 jQuery Mobile 内置的自定义选择菜单吗？文档@ [http://view.jquerymobile.com/master/demos/selectmenu-custom](http://view.jquerymobile.com/master/demos/selectmenu-custom)

基本上使用相同的 html，但将此行添加到您的 mobileinit

```
$.mobile.selectmenu.prototype.options.nativeMenu = false; 
```

这将产生由 jQuery Mobile 呈现的所有选择菜单，而不是原生控件

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T05:59:30.820

我做了一个快速而肮脏的例子，此时它没有样式，但这样的东西可以工作。

JsFiddle 运行示例：http: [//jsfiddle.net/29vBZ/3/](http://jsfiddle.net/29vBZ/3/)

您可以相应地用 slideDown() 和 slideUp() 替换 show() 和 hide() 以创建某种眼睛糖果，就像我在这里所做的那样：http: [//jsfiddle.net/29vBZ/6/](http://jsfiddle.net/29vBZ/6/)

HTML：

```
<div id="customSelect"> 
    <div id="customSelectCaption"></div>
    <div class="customSelectItem" identifier="in_H2O">in H2O</div> 
    <div class="customSelectItem" identifier="in_HG">in Hg</div> 
    <div class="customSelectItem" identifier="psi">psi</div> 
    <div class="customSelectItem" identifier="cm_H2O">cm H2O</div> 
    <div class="customSelectItem" identifier="cm_HG">cm Hg</div> 
    <div class="customSelectItem" identifier="kPa">kPa</div> 
</div> 
```

JavaScript/jQuery：

```
$(document).ready(function(){
//hide the options on load
$('#customSelect').children('.customSelectItem').hide();

//give it the caption of the first option as default.
var firstChild = $('#customSelect .customSelectItem');
$('#customSelect').attr('identifier', firstChild.attr('identifier'));
$('#customSelectCaption').html(firstChild.html());

//set a variable so we know in which state it is.
$('#customSelect').data('customSelectState', false);

//bind the click event so you can take action on click.
$('#customSelect').click(function(event){
    if($('#customSelect').data('customSelectState') == false)
    {
        //hide the caption, show the items.
        $('#customSelectCaption').hide();
        $('.customSelectItem').show();

        //set the variable so we know the state is now 'open'.
        $('#customSelect').data('customSelectState', true);
    }
    else
    {
        //set the new identifier.
        $('#customSelect').attr('identifier', $(event.target).attr('identifier'));

        //set the new caption.
        var newCaption = $(event.target).html();
        $('#customSelectCaption').html(newCaption);

        //show the caption, hide the items.
        $('#customSelectCaption').show();
        $('.customSelectItem').hide();

        //set the variable so we know the state is now 'closed'.
        $('#customSelect').data('customSelectState', false);
    }
});
}); 
```

要检索当前值，您可以简单地执行以下操作：

```
var currentSelection = $('#customSelect').attr('identifier'); 
```

Ofcource 这仅适用于一个“假”下拉列表，但可以扩展到一个完整的 jQuery 插件，它对多个做同样的事情。我希望这对您有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T10:04:09.667

我最终使用了带有堆叠单选按钮的新 (1.2) JQuery Mobile 弹出功能 ( [http://jquerymobile.com/demos/1.2.0/docs/pages/popup/](http://jquerymobile.com/demos/1.2.0/docs/pages/popup/) )。比简单的下拉选择菜单复杂一点，但在 IOS 和 Android 上都可以正常工作

# c++ - 当我有这么多可用内存时，为什么我会得到 std::bad_alloc

> ID：11014514
> 
> 赞同：0
> 
> 时间：2012-06-13T12:08:18.200
> 
> 标签：c++, memory-management, memory-leaks, operating-system

我的一个进程显然是因为日志文件中的以下消息而一遍又一遍地重新启动：

```
Wed Jun 13 10:07:32 2012: terminate called after throwing an instance of 'std::bad_alloc'

Wed Jun 13 10:07:32 2012:   what():  St9bad_alloc 
```

我知道这是因为它无法为“新”请求分配内存。我不明白的是'free -m'告诉我有很多可用内存可以丢弃缓存：

-bash-3.00$ 免费 -m

```
 total       used       free     shared    buffers     cached

Mem:         32175      32113         61          0        412      24021

-/+ buffers/cache:       7679      24495

Swap:        12287          0      12287 
```

是否因为可用内存（具有当前缓存）非常少而导致内存不足，但我猜想为了迎合“新”请求，可以释放此缓存。或者我是否需要打开某些东西来强制释放缓存或者这里出了什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T12:15:42.993

这可能有几个原因，一个好的开始是知道你请求了多少内存。

我可以想到发生这种情况的两个原因，即分配负大小或大大小（超过 4GB 的 32 位机器）。或碎片问题（可能发生在大量无分配调用后，但并不常见。）

要查看内存碎片，您可以使用神奇的 SysRq 键。只需执行以下命令：

echo m > /proc/sysrq-trigger 该命令会将当前内存信息转储到 /var/log/messages。以下是 RHEL3 32 位系统的示例：

> 7 月 23 日 20:19:30 本地主机内核：0*4kB 0*8kB 0*16kB 1*32kB 0*64kB 1*128kB 1*256kB 1*512kB 1*1024kB 0*2048kB 0*4096kB = 1952kB)

==EDIT== 如何读取结果：当系统启动时，它会将内存分成 4Mb (4096Kb) 的连续内存块。当您的系统分配内存时，这些块被分成更小的大小，并且操作系统将分配两个内存块中最接近的功率。

所以“1*1024kB”意味着你在系统中有一块 1 Mb 的连续内存。

在这种情况下：“4*1024kB 0*2048kB 0*4096kB”虽然您确实有 4Mb 空闲空间，但仍分为 4 个 1Mb 块。如果您要求操作系统分配 1 次 4 Mb，它将失败，因为 1 次分配必须返回连续内存。

我希望这对你有意义（-;

# jquery - jquery按键事件触发几次

> ID：11014515
> 
> 赞同：8
> 
> 时间：2012-06-13T12:08:20.040
> 
> 标签：jquery, keypress

嗨，我已经设置了一个自动完成输入文本。我正在尝试通过单击 btn 和输入按键来触发重新打印表格的事件。btn click 工作正常，但 enter 按键似乎在停止之前触发了几次（意味着表格闪烁）

```
$('body').bind('keypress', function(e) {
        if(e.keyCode==13){
             var str = $('#Filter').val();
            $('#Table').fadeOut("slow").load('printShorts.server.php?Sortby=<?echo $sort;?>&dir=<?echo $direction;?>&filter='+encodeURIComponent(str)+'&usergroup=<?=$usergroup?>&no-cache=' + (new Date()).getTime() ).fadeIn("slow");
        }

}); 
```

它不会一直发生，并且在不同的浏览器中表现不同..

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-12T14:10:50.450

结合 html 文本框的 keydown 事件不足以防止它被多次触发。您可以在 keydown 事件的 jquery 演示部分看到此行为：http: [//api.jquery.com/keydown/](http://api.jquery.com/keydown/)

一种可能的解决方案是使用事件处理程序“one”（请参阅[​​ http://api.jquery.com/one/](http://api.jquery.com/one/)）。这确保事件只被处理一次：

```
jQuery("#createNewProduct").one("keydown", function (e) {
    //Do Stuff
}); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-13T12:12:59.250

这是按键事件的正确行为。只要按键按下，按键事件就会一直触发（例如，如果您在文本区域中按住某个字符键，则会多次添加字符，这与按键有关）。对于一次性处理条件，根据您的要求使用 key-down 或 key-up 事件。key-up 和 key-down 都只触发一次。它是这样的：

```
{Key-Down} {Key-Press} {Key-Press} ..(as long as key is down).. {Key-Press} {Key-Up} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-13T12:11:20.757

[http://api.jquery.com/keypress/](http://api.jquery.com/keypress/)

> 当浏览器注册键盘输入时，keypress 事件被发送到元素。这类似于 keydown 事件，除了键重复的情况。如果用户按住某个键，则会触发一次 keydown 事件，但会为每个插入的字符触发单独的 keypress 事件。此外，修饰键（如 Shift）会触发 keydown 事件，但不会触发 keypress 事件。

改用 keydown 。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-05-19T09:27:39.947

keypress 的文档说明：

> 由于 .keypress() 方法只是 .on( "keypress", handler ) 的简写，因此可以使用 .off( "keypress" ) 进行分离。

因此，您可以通过在绑定之前添加 .off() 来分离处理程序。我也会用 .on() 替换 .bind() 函数，因为 bind 现在已弃用。像这样的东西应该工作：

```
$('body').off().on('keypress', function(e) { 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-13T12:13:23.237

尝试将“keypress”更改为“keydown”。

> 当浏览器注册键盘输入时，keypress 事件被发送到元素。这类似于 keydown 事件，除了键重复的情况。如果用户按住某个键，则会触发一次 keydown 事件，但会为每个插入的字符触发单独的 keypress 事件。

来自[http://api.jquery.com/keypress/](http://api.jquery.com/keypress/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-03-26T07:59:13.580

只需解绑并绑定即可。

```
$('body').unbind().bind('keypress', function(e) {
....
} 
```

# jquery - jQuery Datepicker Calendar - Allowing only 1 day in calendar based on previous dropdown form value

> ID：11014521
> 
> 赞同：0
> 
> 时间：2012-06-13T12:08:42.757
> 
> 标签：jquery

Im trying to create a webform that allows a user to select entries from multiple drop down boxes for a party booking.

In summary, i need the user to be able to choose a day for their party, which then gives them options in terms of different times for their booking based on what day is chosen etc.

The first dropdown box allows them to choose one of the available days, either: Tuesday, Friday, Saturday or Sunday. then the next lists all the available dates for the given day.

The last input in in the form is a jQuery datepicker calendar which should only allow them to choose any day in the future but only the chosen day from the previous drop down box. ie for example if they chose Saturday from dropdown box 1, then only Saturdays should appear in the calendar

So far i have got the dependent drop down boxes working but i cant seem to work out how to pass the value from the dropdown list to the datepicker calendar.

I am aware of the function beforeShowDay, but am not sure how to use a variable from the previous form input rather than a static assignment of excluded dates in the code.

if anyone has any advice on this it would be greatly appreciated.

Thanks

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T10:48:39.240

这是将说明的示例

[如何将日期选择限制在下拉列表中的特定工作日？](http://jqfaq.com/how-to-restrict-date-selection-to-specifc-week-days-in-the-dropdown/)

# jsf-2 - How to sort by JSF label in sortable datatable

> ID：11014522
> 
> 赞同：5
> 
> 时间：2012-06-13T12:08:43.667
> 
> 标签：jsf-2, primefaces, jpa-2.0

I am showing a (language specific) label for values in a column. The column is sortable and the JSF label is different from the database value. I am using a primefaces datatable with pagination.

How can I sort by label and not by the database value? Is there any kind of translation possible so my JPA criteria knows about the different value?

Sorting it in-memory is not an option since the dataset might be huge and I only want to display a subset (pagination size is e.g. 10 items per page)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T21:22:53.597

我相信不可能实现您正在寻找的东西。

除非它知道值是什么，否则您的数据库无法排序。您可以在从数据库加载后翻译标签和排序，但由于资源限制，您不希望在内存中排序。

最好的解决方案是在数据库中实施本地化解决方案。然后您的数据库可以查找每个标签的翻译并应用排序。我个人认为这是本地化任何应用程序时要走的路，因为它允许最终用户轻松翻译。您甚至可以编写进行数据库查找而不是引用文件系统包的 Java 资源包提供程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T03:41:18.767

这里有一个延迟加载的例子：

*   [第 4 部分 – 使用 JSF 2.1 / Primefaces 3.5 数据表和表单验证的延迟加载和分页](http://www.simtay.com/part-4-lazy-loading-and-pagination-with-jsf-2-1-primefaces-3-5-datatable-and-form-validation/)。

您可以按照该链接中的方法编写自定义排序。

# asp.net - ASP.NET 的 SQL 计算

> ID：11014524
> 
> 赞同：0
> 
> 时间：2012-06-13T12:09:03.470
> 
> 标签：asp.net, sql, data-retrieval

在我的 SQL 数据库中，我有一列包含会计年度值。会计年度从 10 月 1 日开始至次年的 9 月 30 日。例如，当前会计年度是 2011-2012 或“2011”。我需要一个计算来从我的数据库中提取日期。

我的表中有一个包含日期的列（即 2012 年 5 月 4 日），我需要一个计算来提取所选会计年度的日期吗？因此，当我需要查看 02/14/2003 日期的数据时，我需要 2002 财年。

这一切都与我的 ASP.NET 页面相关联，用户在该页面中选择他们想要查看的会计年度，并显示一个带有请求信息的网格视图。因此，如果我选择 2010 财年，则拉入 gridview 的数据应该是从 10/01/2010 到 09/30/2011 的所有记录。感谢您的帮助，我还没有尝试任何东西，因为我不确定从哪里开始（sql新手）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T12:13:45.960

您可以通过添加三个月来找到会计年度：

```
year(dateadd(month,3,'2011-09-30')) 
```

因此，要选择 2011 财年的所有条目，请尝试：

```
select  *
from    YourTable as yt
where   year(dateadd(month,3,yt.TransactionDt)) = 2011 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T12:17:26.667

我假设您正在使用 SqlParameters 将数据发送到 SQL Server。然后：

```
int fiscal_year = 2002;

SqlParameter fyStart = new SqlParameter("@FiscalYearStart", 
    SqlDbType.DateTime);
fyStart.Value = new SqlDateTime(fiscalYear, 10, 01);

SqlParameter fyEnd = new SqlParameter("@FiscalYearEnd", 
    SqlDbType.DateTime);
fyEnd.Value = new SqlDateTime(fiscalYear+1, 10, 01); 
```

然后你可以将这两个参数传递给一个存储过程，例如，查询表

```
WHERE date BETWEEN @FiscalYearStart AND @FiscalYearEnd 
```

NB FiscalYearEnd 应该是 10-Oct-YEAR+1，因为它将表示为 YYYY-10-01T00:00:00，或者将包括整个 9 月 30 日。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T12:18:06.577

你可以查询它：

```
SELECT *
FROM YourTable
WHERE YourTableDate >= CAST(@FiscalYear AS CHAR(4)) + '-10-01'
AND   YourTableDate <  CAST(@FiscalYear + 1 AS CHAR(4)) + '-10-01'; 
```

或者，如果您需要灵活性，您也可以有一个加入财政年度的日期范围表。这使您能够为多个租户或公司定义多个会计年度，或者允许在不更改查询的情况下更改定义。然后，您可以根据需要加入此表以过滤您的结果。

```
CompanyID FiscalYear StartDate  EndDate
1         2010       2010-10-01 2011-09-30
1         2011       2011-10-01 2012-09-30
2         2010       2010-01-01 2011-12-31
2         2011       2011-01-01 2012-12-31

SELECT *
FROM YourTable t
INNER JOIN FiscalYear y
    ON y.FiscalYear = t.FiscalYear
WHERE t.YourTableDate >= y.StartDate AND t.YourTableDate < DATEADD(d, 1, y.EndDate); 
```

# sharepoint-2007 - Workflow does not execute through code but does execute otherwise + sharepoint 2007

> ID：11014525
> 
> 赞同：0
> 
> 时间：2012-06-13T12:09:19.540
> 
> 标签：sharepoint-2007, sharepoint-designer

I created a workflow through Sharepoint Designer 2007 that simply updates a list item when a change is made to a particular list item.

But the workflow executes when I make changes to the list item through Browser. But when same changes are made through code, it does not execute.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T08:47:30.653

我正在访问具有提升权限的链接，即通过系统帐户。由于安全原因，工作流不在系统帐户下运行。

我必须冒充用户才能访问和修改列表。并执行工作流程。

# ios - iOS: connectionDidFinishLoading

> ID：11014528
> 
> 赞同：0
> 
> 时间：2012-06-13T12:09:41.763
> 
> 标签：ios, xcode4, ios4

I need some help. I am calling the login function from another class,

```
// Login on server
- (BOOL) login:(NSString*) username password:(NSString*)password
{
  NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:subscribedAppsURL]];
  NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request delegate:self];
  [connectionDict setObject:connection forKey:@"login"];
  [connection release];
  return true;
}

// delegate
- (void)connectionDidFinishLoading:(NSURLConnection *)connection 
{
  NSLog(@"Finished Loading");

    if (connection == [connectionDict objectForKey:@"login"]) {
    [connection release];
    //@TODO Here I want to function login to return true.
  }

} 
```

At the end of connectionDidFinishLoading I want to return the TRUE/ FALSE value in the function login. Does anyone have some suggestions? Thanks!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T12:17:06.373

您可以像这样同步发送请求：

```
NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:subscribedAppsURL]];
NSURLResponse *response = nil;
NSError *error = nil;
NSData *responseData = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];

if (error != nil)
{
    NSString *stringResponse = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];
    NSLog(@"Reponse:%@", response);

    //Handle the response, possible just return true here:
}
else
{
    NSLog(@"Error:%@", error.localizedDescription);
} 
```

* * *

使用代表的意图：

```
//In Header
@protocol LoginCompletionDelegate
-(void) didCompleteAndIsLoggedIn:(BOOL) loggedIn;
@end

@property (nonatomic, assign) id<LoginCompletionDelegate> delegate;

//In implementation
- (BOOL) loginWithDelegate:(id<LoginCompletionDelegate>)target username:(NSString*) username password:(NSString*)password
{
   delegate = target;
  NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:subscribedAppsURL]];
  NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request delegate:self];
  [connectionDict setObject:connection forKey:@"login"];
  [connection release];
  return true;
}

// delegate
- (void)connectionDidFinishLoading:(NSURLConnection *)connection 
{
  NSLog(@"Finished Loading");

    if (connection == [connectionDict objectForKey:@"login"]) {
    [connection release];
    //@TODO Here I want to function login to return true.
    [delegate didCompleteAndIsLoggedIn:YES];
  }

}

//There is another method that looks like this. I might have the signature a bit wrong
-(void) connection:(NSURLConnection*) connection didFailWithError:(NSError*) error
{
    [delegate didCompleteAndIsLoggedIn:NO];
} 
```

# actionscript-3 - actionscript 3 remove or stop for loop

> ID：11014529
> 
> 赞同：1
> 
> 时间：2012-06-13T12:09:42.513
> 
> 标签：actionscript-3, actionscript, for-loop

this is a part of my code:

```
private var sun:Sun;
private var aantalSun:int = 5;
private var counter:int;

for (counter = 0; counter < aantalSun; counter++)
{
    sun = new Sun();
    addChild(sun);
} 
```

when the whole code is running, there is a button called 'menu' on the stage. when i click that button, i want to go back to my main menu, but there are still 5 sun on my stage. how can i remove the 5 sun (like, stop the loop?) when i click the menu button? i already tried removeChild(sun);, but then only one sun goes away.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T12:14:10.333

实际上 5 次迭代的循环完成得非常快，以至于按下按钮时您无法退出循环。

我的理解是您想在按下按钮时删除添加的 5 个太阳。

我的建议是创建您的 5 个太阳的父级并将其添加到该父级并删除您的父级，以便删除所有 5 个子级。无需维护 5 个子引用，您只需维护一个父引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T13:00:12.433

将“太阳”存储在一个数组中并循环遍历以删除所有太阳：

```
private var sun:Sun;   
private var aantalSun:int = 5;   
private var counter:int;
private var sunArray:Array = new Array();

for (counter = 0; counter < aantalSun; counter++) { 
    sun = new Sun();
    sunArray.push(sun);
    addChild(sun); 
} 

function RemoveSuns() {
    for (var i:int = 0; i < sunArray.length; i++) { 
        removeChild(sunArray[i]);
    } 
} 
```

**或者**你删除所有：

```
function RemoveAll() {
    for(var i:int = 0; i < this.numChildren; i++) {
        this.removeChildAt(i);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T18:36:20.910

这是您需要的（底部的函数）以及对原始发布代码的小改动。

```
private var sun:Sun;
private var aantalSun:int = 5;
private var counter:int;

private var sunContainer:Sprite = new Sprite();
addChild(sunContainer);

for (counter = 0; counter < aantalSun; counter++)
{
    sun = new Sun();
    sunContainer.addChild(sun);
}

//function for clearing all suns
function clearSuns(e:Event = null):void {
    var i:int = sunContainer.numChildren;
    while(i--){
        sunContainer.removeChildAt(i);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T12:12:53.580

停止循环并使用 break 命令退出；因此，如果您有一个可以像 var menuClicked 一样检查的条件，您可以这样做：

```
for (counter = 0; counter < aantalSun; counter++)
{
 if(menuClicked) break;
 sun = new Sun();
 addChild(sun);
} 
```

# java - 如何从 xsd 生成具有持久性映射的 bean？

> ID：11014533
> 
> 赞同：2
> 
> 时间：2012-06-13T12:09:57.590
> 
> 标签：java, xsd, persistence, maven-jaxb2-plugin, hyperjaxb

我想问这样的问题，我有 XML xsd`s，它使用 org.jvnet.jaxb2.maven2 生成 bean，但现在我需要将 java.persistence 映射添加到这些 bean 中。

哪个是最好的方法？

这是 xsd 的示例：

```
...
<xs:element name="incomeCheck" type="xs:boolean"/>
<xs:element name="incomeAmount" type="xs:decimal"/>
<xs:element name="outcomeCheck" type="xs:boolean"/>
... 
```

以及它生成的内容：

```
public class serviceData
    implements Serializable, Equals
{
...
protected boolean incomeCheck;
@XmlElement(required = true)
protected BigDecimal incomeAmount;
protected boolean outcomeCheck;
@XmlElement(required = true)
... 
```

我需要它会产生这样的东西：

```
@Entity
@Table(name="serviceData")
public class serviceData
    implements Serializable, Equals
{
...
@Column(name="incomeCheck")
protected boolean incomeCheck;
@XmlElement(required = true)
@Column(name="incomeAmount")
protected BigDecimal incomeAmount;
@Column(name="outcomeCheck")
protected boolean outcomeCheck;
@XmlElement(required = true)
... 
```

扩展我的问题：正如我们所知道的，我们可以使用 HyperJaxb，但是有人可以告诉如何配置 pom 文件，所以它会生成这些注释吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T12:30:29.757

您可以使用 hyperjaxb：

*   [http://java.net/projects/hyperjaxb](http://java.net/projects/hyperjaxb)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T12:23:27.367

我不认为你能做到这一点。我认为唯一的方法是生成你的bean，然后对它们进行注释以保持持久性，但是这样你就必须手动维护你的bean和你的xsd。

# android - 在 Android 上使用 XML

> ID：11014534
> 
> 赞同：1
> 
> 时间：2012-06-13T12:09:58.647
> 
> 标签：android, xml, dom

我是 Android 新手（移植 iOS/Objective C 应用程序），我必须读取 WebService 返回的 XML（在 JSON 中有一些节点）文件

响应如下所示：

```
<SOAP-ENV:Envelope><SOAP-ENV:Body><ns1:TPLoginResponse><TPLoginResult>[{"content": "some json content...."]</TPLoginResult></ns1:TPLoginResponse></SOAP-ENV:Body></SOAP-ENV:Envelope> 
```

我怎样才能简单地获取 TPLoginResult 的内容？

我试过 ：

```
 httpTransport.call(SOAP_ACTION, envelope);

            Object response = envelope.getResponse();

            SoapObject SoapResponse = (SoapObject)envelope.bodyIn;

            Log.e("Info",  "response : " + SoapResponse.toString() ); // content is successfully received here 

            String SResponse =  SoapResponse.toString();

            Log.e("Info",  "DocumentBuilderFactory" );

            // parse the XML as a W3C Document
            DocumentBuilderFactory builderFactory = DocumentBuilderFactory.newInstance();
            builderFactory.setNamespaceAware(true);
            DocumentBuilder builder = builderFactory.newDocumentBuilder();

            Document document = builder.parse( new InputSource(new StringReader(SResponse)) );

             NodeList nList = document.getElementsByTagName("TPLoginResult");

             Log.e("info","nList length : " + nList.getLength()); 
```

但我需要一个长度为 0 的 nList ...

我也试过：

```
 NodeList nList = document.getElementsByTagName("ns1:TPLoginResponse"); 
```

但相同的 0 长度结果..

有什么建议么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T12:17:58.063

我认为关键在这一行：

```
builderFactory.setNamespaceAware(true); 
```

如果您评论该行，您将能够获得该元素

```
document.getElementsByTagName("TPLoginResponse"); 
```

否则，您可能需要使用：

```
document.getElementsByTagNameNS(namespaceURI,tag); 
```

但我从未使用过最后一行，所以我无法帮助你。

请让我知道这对你有用，我很感兴趣。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T12:20:38.833

[KSOAP Android](http://code.google.com/p/ksoap2-android/)是一个非常有用的使用 SOAP Web 服务的工具。我在我所有的 Android 应用程序中都使用了这个工具。我可以说它运作良好。

[您可以在他们的wiki](http://code.google.com/p/ksoap2-android/wiki/HowToUse)和整个互联网上找到示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T13:26:34.490

最后我发现使用 ksoap 方法更容易

```
String LoginResponse = SoapResponse.getProperty(0).toString(); 
```

# gwt - Separate GWT UIBinder files

> ID：11014536
> 
> 赞同：4
> 
> 时间：2012-06-13T12:10:11.017
> 
> 标签：gwt, uibinder

When GWT UIBinder being used by default, a pair of java source and UI template files are created under the same directory.

What are required to keep them under separate directories. e.g client/MyApp.java and client/ui/xml/MyApp.ui.xml?

**@EDIT**

Below is based on`@jonasr`'s answer, but the annotaion should be valued with rather the `file path` of the UI template than the package prefix.

```
@UiTemplate("ui/xml/MyApp.ui.xml")
interface MyAppUiBinder extends UiBinder<Widget, MyApp>
{} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T12:18:29.873

尝试在接口声明中使用带有完整路径的 @UiTemplate 注释来为您的 ui.xml 文件添加注释

```
@UiTemplate("com.company.ui.xml.MyApp.ui.xml")
interface MyAppUiBinder extends UiBinder<Widget, MyApp>
{} 
```

# facebook - Facebook 没有看到我的 opengraph 元标记

> ID：11014540
> 
> 赞同：0
> 
> 时间：2012-06-13T12:10:23.237
> 
> 标签：facebook, facebook-opengraph

如果您在[http://seeitornot.co/prometheus/771228969](http://seeitornot.co/prometheus/771228969)查看源代码，您将看到 html 包括以下内容：

```
<meta property='og:title' content='Prometheus' />
<meta property='og:image' content='http://content9.flixster.com/movie/11/16/28/11162851_det.jpg' /> 
```

但是，如果您使用 facebook 提供的 OpenGraph 调试器， http: [//developers.facebook.com/tools/debug/og/object](http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fseeitornot.co%2Fprometheus%2F771228969)`The 'og:title' property should be explicitly provided, even if a value can be inferred from other tags.` ?q=http%3A%2F%2Fseeitornot.co%2Fprometheus% 2F771228969 ，它会说所有标签的类似消息。

注意：我有以下作为我的标签，`<html xmlns:fb="http://ogp.me/ns/fb#">`

我错过了什么吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T12:23:05.510

出于某种原因，您似乎正在向 Facebook 提供网站的移动版本，而您的移动版本没有元标记。尝试将元标记也添加到移动布局中。

您可以测试 Facebook 在[http://developers.facebook.com/tools/debug/og/echo?q=http%3A%2F%2Fseeitornot.co%2Fprometheus%2F771228969上看到的内容](http://developers.facebook.com/tools/debug/og/echo?q=http%3A%2F%2Fseeitornot.co%2Fprometheus%2F771228969)

# asp.net - ASP：文本框 onchange 不起作用

> ID：11014545
> 
> 赞同：-1
> 
> 时间：2012-06-13T12:10:49.517
> 
> 标签：asp.net

我将简单的代码放在带有两个文本框的 ASP.net 中。文本框在 Chrome 上不起作用，但在 IE 上起作用。RequestValidator 在两个浏览器上都可以正常工作。当我尝试输入内容时，两个文本框（txtUserName/txtPassword）似乎在 Chrome 中被禁用，但它在 IE 上工作。

```
<tr>
            <td>User Name</td>
            <td style="padding-left:20px">  <asp:TextBox id="txtUserName"  AutoPostBack=true runat="server" Width="80px"  Enabled="true"  /></td>
            <td style="padding-left:20px"><asp:RequiredFieldValidator ForeColor="Red"  Enabled="true"  ID="RequiredFieldValidator2" runat="server" ControlToValidate="txtUserName"
                ErrorMessage="User Name is Mandatory">User Name is Mandatory</asp:RequiredFieldValidator>
            </td>
        </tr>
        <tr>
             <td>Password</td>
             <td style="padding-left:20px">  <asp:TextBox id="txtPassword" runat="server" Width="80px" TextMode="Password" /></td>
             <td style="padding-left:20px">  <asp:RequiredFieldValidator ForeColor="Red" ID="RequiredFieldValidator3" runat="server" ControlToValidate="txtPassword"
                ErrorMessage="Password is Mandatory">Password is Mandatory</asp:RequiredFieldValidator>
            </td>
        </tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T15:37:31.027

问题出在css以下行

```
* {
-webkit-user-select: none;
-khtml-user-select: none;
-moz-user-select: -moz-none;
-o-user-select: none;
user-select: none;
} 
```

我知道从我的问题不可能知道

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-13T12:57:22.333

如果必填字段验证器消息没有消失，请尝试以下操作：

1.  从开始和结束验证器标记之间删除文本。
2.  将该文本添加到
3.  添加属性 Display="Dynamic" - 仅在出现错误时才应显示错误消息。

# java - TAB key in Java Applets

> ID：11014547
> 
> 赞同：0
> 
> 时间：2012-06-13T12:11:06.557
> 
> 标签：java, applet

I'm seeing two problems with Java code which expects user to press TAB key, when the code is running as an applet

Firstly in Chrome, the press is seemingly not being detected.

More nastily in IE9 pressing TAB loses focus on the applet altogether.

I've seen these reported before but my searching so far didn't suggest a neat solution, or even a quick answer if a solution exists... does it?

Running as a desktop or WebStart/JNLP app TAB works well, only in applets does it get messy.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T09:48:12.673

我知道现在回答这个问题已经很晚了，但如果其他人面临同样的问题，那么希望这会有所帮助。下面的链接解决了我的问题。 [http://dogfeathers.com/mark/java7issue.html](http://dogfeathers.com/mark/java7issue.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-04T15:32:47.220

```
 public void init()
  {
      Container topParent = null;
      Container parent = this;
      // The natural thing would be to call getParent() until it returns
      //   null, but then you would be looping for a long time, since
      //   PluginEmbeddedFrame's getParent() returns itself.
      for (int k=0; k < 10; k++) {
          topParent = parent;
          parent = parent.getParent();
          if (parent == null) break;
      }

      // If topParent isn't a KeyEventDispatcher then we must be in some
      //   Plugin version that doesn't need the workaround.
      try {
          KeyEventDispatcher ked = (KeyEventDispatcher)topParent;
          KeyboardFocusManager kfm = KeyboardFocusManager.getCurrentKeyboardFocusManager();
          // You have to remove it twice, otherwise the problem isn't fixed
          kfm.removeKeyEventDispatcher(ked);
          kfm.removeKeyEventDispatcher(ked);
      } catch (ClassCastException e) {}
    } 
```

# gcc - 使用队列切换任务

> ID：11014558
> 
> 赞同：1
> 
> 时间：2012-06-13T12:11:38.657
> 
> 标签：gcc, x86, scheduling, multitasking, osdev

我正在开发自己的爱好操作系统，现在我遇到了调度程序/任务切换的问题。

我计划使用 FIFO 队列作为结构来保存进程。我使用链表实现了它。

我还决定使用 iret 方法从一个任务切换到另一个（因此，当操作系统在 iret 之前提供中断请求时，我更改了 ESP 寄存器以转移到新任务）。

但我有一个问题。当操作系统启动时，它会启动两个任务：

*   闲置的
*   壳

有了这两个我没有问题。但是，如果我尝试启动另外两个任务（里面有一个简单的 printf），则任务队列已损坏。

如果在那之后我尝试打印队列它只打印两个刚刚创建的任务并且空闲和shell消失了，但是操作系统继续工作（我认为在特定时刻新任务的esp字段被替换了带有外壳的 esp 内容）。

任务数据结构为：

```
typedef struct task_t{
    pid_t pid;  
    char name[NAME_LENGTH];
    void (*start_function)();
    task_state status;
    task_register_t *registers;
    unsigned int cur_quants;
    unsigned int eip;
    long int esp;
    unsigned int pdir;
    unsigned int ptable;
    struct task_t *next;
}task_t; 
```

和 tss 是：

```
typedef struct {    
        unsigned int edi;   //+0
        unsigned int esi;   //+1
        unsigned int ebp;  //+2
        unsigned int esp;  //+3 (can be null)
        unsigned int ebx;  //+4
        unsigned int edx;  //+5
        unsigned int ecx;  //+6
        unsigned int eax;  //+7       
        unsigned int eip;  //+8
        unsigned int cs;   //+9
        unsigned int eflags;  //+10
        unsigned int end;           
} task_register_t; 
```

调度器函数如下：

```
void schedule(unsigned int *stack){
    asm("cli");
    if(active == TRUE){
      task_t* cur_task = dequeue_task();      
      if(cur_task != NULL){
        cur_pid = cur_task->pid;
        dbg_bochs_print("@@@@@@@");
        dbg_bochs_print(cur_task->name);
        if(cur_task->status!=NEW){
          cur_task->esp=*stack;
        } else {
          cur_task->status=READY;         
          ((task_register_t *)(cur_task->esp))->eip = cur_task->eip;                  
        }
        enqueue_task(cur_task->pid, cur_task);
        cur_task=get_task();
        if(cur_task->status==NEW){
          cur_task->status=READY;
        }
        dbg_bochs_print(" -- ");
        dbg_bochs_print(cur_task->name);
        dbg_bochs_print("\n");        
        //load_pdbr(cur_taskp->pdir);
        *stack = cur_task->esp;
      } else {
        enqueue_task(cur_task->pid, cur_task);
      }
    }
    active = FALSE;
    return;
    asm("sti");
} 
```

tss 使用以下值初始化：

```
void new_tss(task_register_t* tss, void (*func)()){
    tss->eax=0;    
    tss->ebx=0;
    tss->ecx=0;
    tss->edx=0;
    tss->edi =0;
    tss->esi =0;
    tss->cs = 8;
    tss->eip = (unsigned)func;
    tss->eflags = 0x202;
    tss->end = (unsigned) suicide;
    //tss->fine = (unsigned)end; //per metterci il suicide  
    return;
} 
```

创建新任务的函数如下：

```
pid_t new_task(char *task_name, void (*start_function)()){
    asm("cli"); 
    task_t *new_task;
    table_address_t local_table;
    unsigned int new_pid = request_pid();   
    new_task = (task_t*)kmalloc(sizeof(task_t));    
    strcpy(new_task->name, task_name);
    new_task->next = NULL;
    new_task->start_function = start_function;
    new_task->cur_quants=0;
    new_task->pid = new_pid;
    new_task->eip = (unsigned int)start_function;
    new_task->esp = (unsigned int)kmalloc(STACK_SIZE) + STACK_SIZE-100;
    new_task->status = NEW;
    new_task->registers = (task_register_t*)new_task->esp;
    new_tss(new_task->registers, start_function);
    local_table = map_kernel();
    new_task->pdir = local_table.page_dir;
    new_task->ptable = local_table.page_table;
    //new_task->pdir = 0;
    //new_task->ptable = 0;
    enqueue_task(new_task->pid, new_task);
    //(task_list.current)->cur_quants = MAX_TICKS;          
    asm("sti");
    return new_pid;
} 
```

我确定我只是忘记了一些东西，或者我错过了一些考虑。但我无法弄清楚我错过了什么。

实际上我只在内核模式下工作，并且在相同的地址空间内（启用分页，但实际上我对所有任务使用相同的 pagedir）。

ISR 宏在这里定义： [https ://github.com/inuyasha82/DreamOs/blob/master/include/processore/handlers.h](https://github.com/inuyasha82/DreamOs/blob/master/include/processore/handlers.h)

为了处理 ISR，我声明了四种函数：

1.  例外
2.  EXCEPTION_EC（带有错误代码的异常）
3.  中断请求
4.  系统调用

显然调度程序是由一个 IRQ 例程调用的，所以宏看起来像：

```
__asm__("INT_"#n":"\
        "pushad;" \
        "movl %esp, %eax;"\
    "pushl %eax;"\
        "call _irqinterrupt;"\
        "popl %eax;"\
        "movl %eax, %esp;"\
        "popad;"\
        "iret;") 
```

中断处理函数是：

```
void _irqinterrupt(unsigned int esp){
    asm("cli;");
    int irqn;
    irqn = get_current_irq();  
    IRQ_s* tmpHandler; 
    if(irqn>=0) {               
        tmpHandler = shareHandler[irqn];        
        if(tmpHandler!=0) {
            tmpHandler->IRQ_func();         
            #ifdef DEBUG
                printf("2 - IRQ_func: %d, %d\n", tmpHandler->IRQ_func, tmpHandler);
            #endif
            while(tmpHandler->next!=NULL) {
                tmpHandler = tmpHandler->next;                           
                #ifdef DEBUG
                    printf("1 - IRQ_func (_prova): %d, %d\n", tmpHandler->IRQ_func, tmpHandler);
                #endif
                if(tmpHandler!=0) tmpHandler->IRQ_func();
            }
      } else printf("irqn: %d\n", irqn);
    }
    else printf("IRQ N: %d E' arrivato qualcosa che non so gestire ", irqn);
    if(irqn<=8 && irqn!=2) outportb(MASTER_PORT, EOI);
    else if(irqn<=16 || irqn==2){     
      outportb(SLAVE_PORT, EOI);
      outportb(MASTER_PORT, EOI);
    }

    schedule(&esp);
    asm("sti;");
    return;
} 
```

这些是 enqueue_task 和 dequeue_task 函数：

```
void enqueue_task(pid_t pid, task_t* n_task){
  n_task->next=NULL;
  if(task_list.tail == NULL){
    task_list.head = n_task;
    task_list.tail = task_list.head;    
  } else {
    task_list.head->next=n_task;    
    task_list.head = n_task;    
  }
}

task_t* dequeue_task(){
    if(task_list.head==NULL){
      return NULL;
    } else {
      task_t* _task;
      _task = task_list.tail; 
      task_list.tail=_task->next;
      return _task;
    }
    return;
} 
```

提前致谢，如果您需要更多详细信息，请告诉我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T02:39:31.397

很难说。你的 isr 的装配部分是什么样子的？让我想到的是问题（因为您可以保存和恢复两个任务但不能更多）是您没有正确推送和弹出所有寄存器。您确实使用 pusha 和 popa 作为 isr 对吗？

我还想补充一点，像你那样拥有 cli 和 sti 可能很危险。在您的 isrs 中，将 cli 设置为第一个操作码。然后你根本不需要使用 sti 因为 iret 会自动为你打开它（它实际上是在 eflags 寄存器中的一点）。

祝你好运！

# mysql - MySQL - 有效地选择多行

> ID：11014560
> 
> 赞同：2
> 
> 时间：2012-06-13T12:11:44.547
> 
> 标签：mysql

假设我有一张这样的桌子

WEB_LIST_TABLE

```
 KEY             Value
----------------------------------------
     134             google.com
     187             yahoo.com
     353             facebook.com 
```

等等可能是一百万行

键是主键，如果我想选择 50 行，使用键，例如

```
Select * from WEB_LIST_TABLE where KEY in (134,187,...); 
```

我`where KEY in`用于选择行，它是否有效，基于性能..？

有没有其他有效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T12:18:06.857

这是有效的，因为字段`key`是索引的。MySQL 将使用索引来获取所需的行。

```
mysql>FLUSH STATUS;
mysql>SELECT * FROM WEB_LIST_TABLE WHERE KEY IN (134,187,192,241,10);
...
mysql>SHOW STATUS LIKE 'Handler_%';
+----------------------------+-------+
| Variable_name              | Value |
+----------------------------+-------+
| Handler_read_first         | 0     |
| Handler_read_key           | 5     |
| Handler_read_next          | 0     |
| Handler_read_prev          | 0     |
| Handler_read_rnd           | 0     |
| Handler_read_rnd_next      | 0     |
+----------------------------+-------+ 
```

如您所见，`Handler_read_key`是 5。

根据[文档](http://dev.mysql.com/doc/refman/5.0/en/server-status-variables.html#statvar_Handler_read_key)，这意味着它根据键读取所有五行。

# c# - 通过环回在 C# 中发送 UDP 数据包。为什么我无法追踪它们？

> ID：11014567
> 
> 赞同：3
> 
> 时间：2012-06-13T12:12:23.297
> 
> 标签：c#, udp, client-server, packet-sniffers

我已经用谷歌搜索并搜索了 stackoverflow，但我找不到与我的问题相关的任何内容。

首先，让我简单描述一下场景。

想象一台摄像机通过 UDP 通过网络发送所有时间片段（从现在起我将称它们为“块”）。使用 UDP 是一种约束，我无法改变它，所以请不要回答“你为什么不使用 TCP？”，因为你知道我的意思：“因为我不能”。

另一方面，客户端接收 cam 发送的块。为了构建一种流控制，我在数据报的开头设置了三个字段（三个字节用于存储 JPEG 编号、块索引、块数量），然后是块本身。

到目前为止，我正在测试我自己的笔记本电脑中通过环回（127.0.0.1）发送和接收的双方，但问题是虽然相机（发件人）说它已经正确发送了所有块（我正在使用单个 JPEG 进行测试图片被分成 161 个块）客户端收到随机数量的块（有时接近 70 个，其他一些 100 个，并且有几次全部）。我尝试使用 rawcap (http://www.netresec.com/?page=RawCap) 嗅探我的环回，它检测到另一数量的 UDP“数据报”，不同于 161（应该发送），并且来自客户声称已收到的金额。

那么，发送语句是否可能没有按预期工作？还有其他建议继续调查吗？

这是我的发送方法。

```
 private void startSendingData(IPEndPoint target)
    {
        fatherForm.writeMessage("START command received. Sending data to " + target.Address.ToString() + " port " + target.Port.ToString() + "...");

        //Get chunks prepared
        List<byte[]> listOfChunks = getChunksInAList(collectFiles());
        List<uint> chunksSucces = new List<uint>();
        List<uint> chunksFailed = new List<uint>();

        byte[] stopDatagram = getStopDatagram();

        //Initialise the socket
        Socket s = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp);

        Stopwatch sw = Stopwatch.StartNew();                       

        foreach (byte[] chunk in listOfChunks)
        {
            if (s.SendTo(chunk, target) == chunk.Length)
                chunksSucces.Add(BitConverter.ToUInt32(chunk,sizeof(uint)));
            else
                chunksFailed.Add(BitConverter.ToUInt32(chunk, sizeof(uint)));
        }

        Debug.WriteLine(chunksSucces.Count + " sent successfully");

        //Tell the receiver not to continue receiving
        s.SendTo(stopDatagram, target);

        long ellapsedMs = sw.ElapsedMilliseconds;
        sw.Stop();

        writeTransmissionRate(listOfChunks.Count, ellapsedMs);

        Debug.WriteLine(sw.ElapsedMilliseconds + "ms ellapsed");
        sw.Stop();

        s.Close();
    } 
```

输出是：

```
161 chunks to be sent
161 sent successfully
6ms ellapsed
Transmission rate: 37000.65KB/s 36.13MB/s 
```

但另一方面，我在这个测试中只收到 22 个数据报。

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T12:17:10.257

不保证 UDP。如果您的接收函数处理数据包的速度不够快，网络堆栈可能会丢弃数据包。

尝试更慢地发送它们，或增加您的 UDP 接收缓冲区：

# javascript - 是否可以确定用户是否完成了使用 api 观看嵌入的 youtube 视频？

> ID：11014582
> 
> 赞同：1
> 
> 时间：2012-06-13T12:13:32.027
> 
> 标签：javascript, youtube, youtube-javascript-api

我需要检查用户是否真的看过嵌入的 youtube 视频（这意味着他按下播放键并看到直到结束）。是否可以使用 youtube api (javascript) 做到这一点？

非常感谢

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T01:31:32.530

使用 Youtube API 是确定用户是否点击播放按钮的最简单方法。

*   对于初学者，请查看 Google Youtube Api： [https ://developers.google.com/youtube/js_api_reference](https://developers.google.com/youtube/js_api_reference)

*   您将需要使用 Swfobject.js 加载视频以使用 Youtube API 控件

*   在加载视频时不要忘记添加监听器 (addListener)
*   加载 API 或视频后，您将能够看到视频的状态，这些是：
    *   “-1” - 视频已准备好播放
    *   "1" - 视频正在播放（它点击了播放按钮）
    *   "2" - 视频暂停
    *   “0” - 视频结束

检查加载视频当前状态的示例编码： [https ://developers.google.com/youtube/js_api_reference#SubscribingEvents](https://developers.google.com/youtube/js_api_reference#SubscribingEvents)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T17:33:24.760

如果它是无铬 YouTube 播放器，或者您通过 JW Player 嵌入了视频，那么它是可能的。

> chromeless 播放器将去除编码并允许您像 javascript 一样嵌入 YouTube 视频，一旦完成，您就可以将 Google Analytics 扩展片段/代码嵌入到视频的地址并以这种方式跟踪点击量。另一种方法是安装 JW Player，它允许您通过合并 Google Analytics UPI 轻松跟踪 YouTube 视频的分析。

# amazon-ec2 - EC2 增加大小后无法调整卷大小

> ID：11014584
> 
> 赞同：108
> 
> 时间：2012-06-13T12:13:39.563
> 
> 标签：amazon-ec2, centos, volume, image-resizing, snapshot

我已按照调整 EC2 卷大小的步骤进行操作

1.  停止实例
2.  拍摄当前卷的快照
3.  在同一区域中从以前的快照创建一个更大的新卷
4.  从实例中分离旧卷
5.  将新卷附加到同一挂载点的实例

旧卷是 5GB，我创建的卷是 100GB 现在，当我重新启动实例并运行时`df -h I`仍然看到这个

```
Filesystem            Size  Used Avail Use% Mounted on
/dev/xvde1            4.7G  3.5G 1021M  78% /
tmpfs                 296M     0  296M   0% /dev/shm 
```

这是我跑步时得到的

```
sudo resize2fs /dev/xvde1

The filesystem is already 1247037 blocks long.  Nothing to do! 
```

如果我跑`cat /proc/partitions`我会看到

```
 202       64  104857600 xvde
 202       65    4988151 xvde1
 202       66     249007 xvde2 
```

据我了解，如果我遵循了正确的步骤，xvde 应该具有与 xvde1 相同的数据，但我不知道如何使用它

如何使用新卷或 umount xvde1 并改为 mount xvde？

我无法理解我做错了什么

我也试过`sudo ifs_growfs /dev/xvde1`

```
xfs_growfs: /dev/xvde1 is not a mounted XFS filesystem 
```

顺便说一句，这是一个带有 centos 6.2 x86_64 的 linux 机器

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：356
> 
> 时间：2017-03-14T16:10:20.453

**不再需要停止实例并分离 EBS 卷来调整它的大小！**

2017 年 2 月 13 日亚马逊宣布：“[亚马逊 EBS 更新 – 新的弹性卷改变一切](https://aws.amazon.com/blogs/aws/amazon-ebs-update-new-elastic-volumes-change-everything/)”

即使要扩展的卷是正在运行的实例的根卷，该过程也能正常工作！

* * *

假设我们想“即时”将 Ubuntu 的启动驱动器从 8G 增加到 16G。

步骤 1) 登录 AWS Web 控制台 -> EBS -> 鼠标右键单击要调整大小的那个 -> “修改音量” -> 更改“大小”字段并单击 [修改] 按钮

> [![在此处输入图像描述](../Images/d6db96d1d4df3f93977afc3171faa76a.png)](https://i.stack.imgur.com/XAClb.png)

> [![在此处输入图像描述](../Images/0356c68438e62e3961a845243554f76a.png)](https://i.stack.imgur.com/8bGHs.png)

> [![在此处输入图像描述](../Images/6849d2f9046be7868bf95c25ef9639c1.png)](https://i.stack.imgur.com/0OXMA.png)

* * *

step-2) ssh 进入实例并调整分区大小：

让我们列出连接到我们盒子的块设备：

```
lsblk
NAME    MAJ:MIN RM SIZE RO TYPE MOUNTPOINT
xvda    202:0    0  16G  0 disk
└─xvda1 202:1    0   8G  0 part / 
```

如您所见，/dev/xvda1 仍然是 16 GiB 设备上的 8 GiB 分区，并且该卷上没有其他分区。让我们使用“growpart”将 8G 分区调整为 16G：

```
# install "cloud-guest-utils" if it is not installed already
apt install cloud-guest-utils

# resize partition
growpart /dev/xvda 1 
```

让我们检查一下结果（可以看到 /dev/xvda1 现在是 16G）：

```
lsblk
NAME    MAJ:MIN RM SIZE RO TYPE MOUNTPOINT
xvda    202:0    0  16G  0 disk
└─xvda1 202:1    0  16G  0 part / 
```

许多 SO 答案建议将 fdisk 与删除/重新创建分区一起使用，这是一个讨厌的、有风险的、容易出错的过程，尤其是在我们更改引导驱动器时。

* * *

step-3) 调整文件系统的大小以一直增长以充分利用新的分区空间

```
# Check before resizing ("Avail" shows 1.1G):
df -h
Filesystem      Size  Used Avail Use% Mounted on
/dev/xvda1      7.8G  6.3G  1.1G  86% /

# resize filesystem
resize2fs /dev/xvda1

# Check after resizing ("Avail" now shows 8.7G!-):
df -h
Filesystem      Size  Used Avail Use% Mounted on
/dev/xvda1       16G  6.3G  8.7G  42% / 
```

所以我们有零停机时间和大量新空间可供使用。
享受！

更新：更新：在 XFS 文件系统时使用 sudo xfs_growfs /dev/xvda1 而不是 resize2fs。

* * *

## 回答 #2

> 赞同：72
> 
> 时间：2013-02-18T06:15:42.870

谢谢威尔曼，您的命令正常运行，如果我们将 EBS 增加到更大的尺寸，则需要考虑小的改进

1.  停止实例
2.  从卷创建快照
3.  根据快照增加大小创建新卷
4.  检查并记住当前的卷挂载点（即`/dev/sda1`）
5.  分离当前音量
6.  将最近创建的卷附加到实例，设置确切的挂载点
7.  重启实例
8.  通过 SSH 访问实例并运行`fdisk /dev/xvde`

    **警告：不推荐使用 DOS 兼容模式。强烈建议关闭模式（命令'c'）并将显示单位更改为扇区（命令'u'）**

9.  点击`p`以显示当前分区

10.  点击`d`删除当前分区（如果有多个，您必须一次删除一个）注意：不要担心数据不会丢失
11.  点击`n`创建新分区
12.  点击`p`将其设置为主要
13.  点击`1`设置第一个气缸
14.  设置所需的新空间（如果为空则保留整个空间）
15.  点击`a`使其可启动
16.  点击`1`并`w`写入更改
17.  重启实例或使用`partprobe`（从`parted`包中）告诉内核新的分区表
18.  通过 SSH 登录并运行 resize2fs /dev/xvde1
19.  最后检查运行 df -h 的新空间

* * *

## 回答 #3

> 赞同：46
> 
> 时间：2017-06-04T13:16:29.553

上面 jperelli 的完美评论。

我今天面临同样的问题。AWS 文档没有明确提到 growpart。我想出了艰难的方法，确实这两个命令在 M4.large 和 M4.xlarge 上与 Ubuntu 完美配合

```
sudo growpart /dev/xvda 1
sudo resize2fs /dev/xvda1 
```

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2012-07-03T20:52:02.257

[解决了]

这是必须要做的

1.  停止实例
2.  从卷创建快照
3.  根据快照增加大小创建新卷
4.  检查并记住当前的卷挂载点（即 /dev/sda1）
5.  分离当前音量
6.  将最近创建的卷附加到实例，设置确切的挂载点
7.  重启实例
8.  通过 SSH 访问实例并运行`fdisk /dev/xvde`
9.  点击`p`以显示当前分区
10.  点击`d`删除当前分区（如果有多个，您必须一次删除一个）注意：不要担心数据不会丢失
11.  点击`n`创建新分区
12.  点击`p`将其设置为主要
13.  点击`1`设置第一个气缸
14.  设置所需的新空间（如果为空则保留整个空间）
15.  点击`a`使其可启动
16.  点击`1`并`w`写入更改
17.  重启实例
18.  通过 SSH 登录并运行`resize2fs /dev/xvde1`
19.  最后检查新空间运行`df -h`

就是这个

祝你好运！

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2018-05-17T22:19:46.280

1.  sudo growpart /dev/xvda 1
2.  须藤 resize2fs /dev/xvda1

以上两个命令为我节省了 AWS ubuntu ec2 实例的时间。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2013-02-04T08:15:02.577

这将适用于 xfs 文件系统只需运行此命令

```
xfs_growfs / 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2017-05-24T11:39:32.820

1.  登录 AWS Web 控制台 -> EBS -> 鼠标右键单击要调整大小的那个 -> “修改卷” -> 更改“大小”字段并单击 [修改] 按钮

2.  `growpart /dev/xvda 1`

3.  `resize2fs /dev/xvda1`

这是 Dmitry Shevkoplyas 回答的最简单的版本。AWS 文档未显示该`growpart`命令。这适用于 ubuntu AMI。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2019-01-18T10:07:37.677

以防万一有人在这里使用 GCP 谷歌云平台，
试试这个：

```
sudo growpart /dev/sdb 1
sudo resize2fs /dev/sdb1 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2018-05-29T22:03:42.610

因此，以防万一有人遇到 100% use 遇到这个问题，甚至没有空间运行 growpart 命令（因为它在 /tmp 中创建了一个文件）

这是我发现即使在使用 EBS 卷时也会绕过的命令，并且如果您的 ec2 上没有剩余空间，并且您处于 100%

```
/sbin/parted ---pretend-input-tty /dev/xvda resizepart 1 yes 100% 
```

在这里看到这个网站：

[https://www.elastic.co/blog/autoresize-ebs-root-volume-on-aws-amis](https://www.elastic.co/blog/autoresize-ebs-root-volume-on-aws-amis)

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2021-02-11T06:47:36.367

修改 EBS 的大小后，

### 列出块设备

`sudo lsblk`

```
NAME        MAJ:MIN RM SIZE RO TYPE MOUNTPOINT
nvme0n1     259:2    0  10G  0 disk
|-nvme0n1p1 259:3    0   1M  0 part
`-nvme0n1p2 259:4    0  10G  0 part / 
```

### 展开分区

假设您要扩展安装在 上的第二个分区`/`，

`sudo growpart /dev/nvme0n1 2`

如果根卷中的所有空间都用完了，并且基本上您无法访问`/tmp`ie 并显示错误消息`Unable to growpart because no space left`，

1.  临时挂载一个`/tmp`卷：`sudo mount -o size=10M,rw,nodev,nosuid -t tmpfs tmpfs /tmp`
2.  完全调整大小完成后卸载：`sudo umount -l /tmp`

验证新尺寸

```
NAME        MAJ:MIN RM SIZE RO TYPE MOUNTPOINT
nvme0n1     259:2    0  20G  0 disk
|-nvme0n1p1 259:3    0   1M  0 part
`-nvme0n1p2 259:4    0  10G  0 part / 
```

### 调整文件系统的大小

对于 XFS（使用挂载点作为参数）

`sudo xfs_growfs /`

对于 EXT4（使用分区名称作为参数）

`sudo resize2fs /dev/nvme0n1p2`

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2012-06-13T15:41:53.440

你在这个卷上做了一个分区吗？如果你这样做了，你将需要首先扩大分区。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2014-02-17T16:04:57.803

可引导标志 (a) 在我的情况下不起作用（EC2，centos6.5），所以我不得不从快照重新创建卷。重复所有步骤后，除了可启动标志 - 一切都完美无缺，所以我能够在之后调整 2fs 大小。谢谢！

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2017-04-17T19:28:41.687

谢谢@Dimitry，它就像一个魅力，只需稍加改动即可匹配我的文件系统。

来源：[http ://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ebs-expand-volume.html#recognize-expanded-volume-linux](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ebs-expand-volume.html#recognize-expanded-volume-linux)

然后使用以下命令，替换文件系统的挂载点（必须挂载 XFS 文件系统以调整它们的大小）：

```
[ec2-user ~]$ sudo xfs_growfs -d /mnt
meta-data=/dev/xvdf              isize=256    agcount=4, agsize=65536 blks
         =                       sectsz=512   attr=2
data     =                       bsize=4096   blocks=262144, imaxpct=25
         =                       sunit=0      swidth=0 blks
naming   =version 2              bsize=4096   ascii-ci=0
log      =internal               bsize=4096   blocks=2560, version=2
         =                       sectsz=512   sunit=0 blks, lazy-count=1
realtime =none                   extsz=4096   blocks=0, rtextents=0
data blocks changed from 262144 to 26214400 
```

注意 如果您收到 xfsctl failed: Cannot allocate memory 错误，您可能需要更新实例上的 Linux 内核。有关详细信息，请参阅您的特定操作系统文档。如果您收到一个 The filesystem is already nnnnnnn blocks long。没事做！错误，请参阅扩展 Linux 分区。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2015-03-26T20:57:10.197

没有足够的代表在上面发表评论；但还请注意，如果您从 1 开始，您可能会破坏您的实例；如果您在启动 fdisk 之后在使用“p”列出分区之前点击“u”，这实际上会为您提供正确的开始编号，这样您就不会损坏您的卷。对于centos 6.5 AMI，同样如上所述，2048 对我来说是正确的。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-04-05T09:19:25.133

在名称和数字之间放置空格，例如：

```
sudo growpart /dev/xvda 1 
```

**请注意，设备名称和分区号之间有一个空格。**

> 要扩展每个卷上的分区，请使用以下 growpart 命令。请注意，设备名称和分区号之间有一个空格。

[https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/recognize-expanded-volume-linux.html](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/recognize-expanded-volume-linux.html)

# c# - 在 EntityFramework 和 SQL Anywhere 中将字符串更新为 PK 作为提供者

> ID：11014587
> 
> 赞同：2
> 
> 时间：2012-06-13T12:13:48.650
> 
> 标签：c#, entity-framework, sqlanywhere

我在 Sybase 中有简单的表

```
-- Creating table 'SimpleText'
CREATE TABLE [dbo].[SimpleText] (
    [Id] nvarchar(10)  NOT NULL,
    [SimpleValue] nvarchar(120)  NULL
);
GO
-- Creating primary key on [Id] in table 'SimpleText'
ALTER TABLE [dbo].[SimpleText]
ADD CONSTRAINT [PK_SimpleText]
    PRIMARY KEY CLUSTERED ([Id] ASC);
GO 
```

基于此表，它在实体框架中创建了一个模型（使用 4.3）。插入和删除不是问题。

但是，在更新表时，当主键为“[char][number]”即 a1 时，它会生成错误，它表示未找到该列 a1。通过使用一个简单的跟踪工具，这是生成的 sql：

```
update [dbo].[SimpleText]
set [SimpleValue] = :p0
where ([Id] = :p1)
 and (Id = a1)
p0 = simpleTextValueUpdateda1
p1 = a1 
```

在 C# 中更新代码如下：

```
 using (var model = new Entities())
  {
    var entString = model.SimpleText.Select(t => t);
    foreach (var simpleText in entString)
    {
      simpleText.SimpleValue = "simpleTextValueUpdated" + simpleText.Id;
    }
    model.SaveChanges();
  } 
```

如果同一个键只是一个数字，则没有问题。在 .NET 4 上使用 SqlAnywhere12、EF4.3、C#

有没有人有同样的经历？是否有确保文本在 sql 中正确撇号的修复程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T13:30:52.043

已确认此问题与我使用的 sybase sql/ef 提供程序的版本有关。版本 12.0.1.3726 产生了这个问题。从 sybase 下载新的 EBF，12.0.1.3742 应该解决这个特定问题。

# maven - 从 databasechangelog 读取 Liquibase 需要很长时间

> ID：11014591
> 
> 赞同：6
> 
> 时间：2012-06-13T12:14:00.920
> 
> 标签：maven, liquibase

有什么方法可以加快 liquibase 回滚和更新操作的 maven 任务？

我现在在数据库中有大约 280 个变更集，当我进行更新时，仅从 databasechangelog 中读取就需要很长时间。

我正在使用 liquibase 2 和许多 sql 格式的文件来进行变更集。谢谢

编辑：在执行中添加更具体的时间范围

```
INFO 11/16/12 10:46 AM:liquibase: Reading from databasechangelog
INFO 11/16/12 10:54 AM:liquibase: Successfully released change log lock 
```

在此示例中，它在 MBP 上本地运行（具有 8 gig ram 的核心 i7）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T18:06:20.300

我注意到了同样的事情。通过 Maven 使用它时，我看到以下内容：

```
[INFO] Executing on Database: jdbc:postgresql://localhost/mydb
INFO 11/5/12 1:01 PM:liquibase: Successfully acquired change log lock
INFO 11/5/12 1:01 PM:liquibase: Reading from databasechangelog
INFO 11/5/12 1:01 PM:liquibase: Reading from databasechangelog
INFO 11/5/12 1:02 PM:liquibase: ChangeSet mydb/db.changelog-006.sql::55::ebridges ran successfully in 41ms
INFO 11/5/12 1:02 PM:liquibase: Successfully released change log lock
INFO 11/5/12 1:02 PM:liquibase: Successfully released change log lock 
```

请注意，总体而言，运行需要两分钟来执行单个变更集，而该变更集本身只需要 41 毫秒的执行时间。那很慢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-08T14:42:35.350

在我的机器上，我复制了这个问题，并且主线程被卡在了本机方法上：

```
java.lang.Class.getGenericSignature() 
```

这表明问题出在 JDK 实现上。考虑升级或切换实施。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-07T12:49:49.980

在我的场景中，使用`loadData`.csv 文件是 liquibase 需要很长时间才能执行的原因（我正在使用 liquibase `2.0.5`）。

例如，这是一个导致 liquibase 变慢的变更集：

```
<changeSet id="foo" author="bar">
    <comment>Baz</comment>
    <loadData encoding="UTF-8"
              separator=";"
              file="some-file.csv"
              tableName="TableName"/>
    <rollback>
        <sqlFile path="rollback.sql" relativeToChangelogFile="true" splitStatements="false" />
    </rollback>
</changeSet> 
```

# php - url中的Codeigniter问号

> ID：11014593
> 
> 赞同：0
> 
> 时间：2012-06-13T12:14:07.900
> 
> 标签：php, codeigniter

我一直在使用codeigniter，并面临一个url问题，实际上我正在尝试通过url提交控制器函数参数。一切正常，但唯一的问题是问号？特点。当我在网址中插入问号时，它会自动删除，有人可以帮助我吗

我的网址是

```
http://localhost/codeigniter/site/myfunction/parameter1/parameter2?/parameter3 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T12:19:01.527

`$config[‘enable_query_strings’] = TRUE;`在配置文件中

试试这个不带分段的网址，我希望它对你有用

```
http://localhost/codeigniter/site/myfunction/?p1=parameter1&p2=parameter2&p3=parameter3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T12:25:26.267

如果您尝试`?`作为常规角色传递，这很可能会对您有所帮助

```
$link = urlencode("http://localhost/codeigniter/site/myfunction/parameter1/parameter2?/parameter3"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T12:30:33.023

确保 ”？” 位于 codeignitor 的配置文件中允许的 url 字符中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-06T11:09:43.767

**在config.php**文件中启用查询字符串，例如

```
$config[‘enable_query_strings’] = TRUE; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-10T12:09:08.483

*无法在codeigniter中将参数作为查询字符串传递，因此请尝试在下面定义代码

**测试视图.php：**

```
$id = '123';

<a  href="<?php echo base_url();?>'YourControllerName/YourFunctionName/<?php echo $id;?>'"> 
```

**控制器**

```
public function YourFunctionName($id)
    {
        if(empty($id))
        {
            echo "Success";
        }
        else{
            echo "Fail";
        }
    } 
```

# javascript - Cookie 在 IE 中总是返回 null

> ID：11014610
> 
> 赞同：1
> 
> 时间：2012-06-13T12:14:50.490
> 
> 标签：javascript, cookies

我正在调试一个脚本，它基本上读取一个 cookie 并返回一些东西。它在所有浏览器中都能正常工作，除了 IE。经过一些测试，我发现它永远不会进入`for`循环。

```
function readCookie(name) {
var nameEQ = name + "=";
var ca = document.cookie.split(';');

  for(var i=0;i < ca.length;i++) {
    var c = ca[i];
    while (c.charAt(0)==' ') c = c.substring(1,c.length);

    if (c.indexOf(nameEQ) == 0) {   
        return c.substring(nameEQ.length,c.length);
    }

  }
  return null;
} 
```

经过更多测试，我意识到`ca`存储 cookie 的变量甚至从未被定义。看着它，我不明白为什么应该这样做，因为没有对 cookiename 的引用。所以在我的逻辑中，它甚至不应该工作，但它在除 IE 之外的所有东西中都能完美**运行**。

```
var ca = document.cookie.split(';'); 
```

**1：为什么这甚至可以在 Fx、Webkit 和 Opera 中使用？
2：我怎样才能让它在IE中也能工作？**

我尝试将其定义如下，但这似乎不起作用：

```
document.cookie = name; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T12:18:39.583

看来 IE 中没有设置 cookie。尝试使用

```
alert('d.cookie:\t'+document.cookie+'\n\n'+'d.cookie.length:\t'+document.cookie.length); 
```

检查是否有任何 cookie。

↪[书签](http://pastehtml.com/raw/c1ckidb3a.html)

如果没有，请尝试使用设置一个

```
document.cookie='mycookie=foo; path=/'; 
```

↪[书签](http://pastehtml.com/raw/c1cl43mo6.html)

# javascript - 我试图在这段代码中找到错误，测试我的 javascript 代码

> ID：11014611
> 
> 赞同：1
> 
> 时间：2012-06-13T12:14:56.653
> 
> 标签：javascript

**哟社区！**这里可能需要一些见解.. :) 我正在学习一些更高级的 js 概念。我正在运行这段代码，但结果没有像我预期的那样显示出来……我看不到错误……知道吗？谢谢！

```
<script type="text/javascript">

    (function() {
        var results, queue = [];
        this.assert = function(pass, msg) {
            var type = pass ? "PASS" : "FAIL";
            var str = "<li class='" + type + "'><b>" +
                      type + "</b> " + msg + "</li>";
            if ( queue )
                queue.push( str );
            else    
                results.innerHTML += str;
        };

        window.addEventListener("load", function() {
            results = document.getElementById("results");
            results.innerHTML = queue.join('');
            queue = null;
        });

        // calling assert but it's not showing up the <li> with the message....( why? ) 
        assert( true, "I always pass!" );
    })();
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T21:30:23.657

> *“。有没有可能使用 else 语句？为什么会有 else 语句的想法？”*

此`assert()`函数的工作方式是，如果在文档加载事件发生*之前*`queue`调用它，则任何结果都存储在数组中：条件`if (queue)`为真，因为`queue`引用了数组。

然后，当负载处理程序运行时，它会将所有内容都放入`queue`其中并将其输出到`results`元素，然后再设置`queue`为 null：

```
results.innerHTML = queue.join('');
queue = null; 
```

`assert()` *文档加载后*的任何调用都会发现它`if (queue)`是 false，因为`queue`它是 null，因此`else`将执行 并且任何结果都将直接输出到`results`元素。

如图所示，在您的代码中，只有一次调用`assert()`，它将在文档加载处理程序运行之前发生。

（这是一个笨拙的演示 - 按下按钮将在加载事件之后：http: [//jsfiddle.net/JDFuR/1/](http://jsfiddle.net/JDFuR/1/)）

# sql - 遍历一个临时表并插入到另一个表

> ID：11014612
> 
> 赞同：2
> 
> 时间：2012-06-13T12:14:58.790
> 
> 标签：sql, sql-server, sql-server-2008

我需要将 csv 文件中的数据插入到一个临时表中，并为另一个表中的相应 id 值插入一些数据。我已经创建并将数据插入到 csv 文件中。对于 csv 文件中的所有记录，我如何循环并插入另一个表中相应记录的圆顶数据。

```
CREATE TABLE #tbcompanies
(ID INT)
GO

BULK
INSERT #tbcompanies
FROM 'd:\ids.csv'
WITH
(
ROWTERMINATOR = '\n'
)

select * from #tbcompanies

drop table #tbcompanies 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T12:18:29.170

假设两个表都有一个 ID 列，您可以像这样更新另一个表：

```
update  ot
set     col1 = tmp.col1
.       col2 = tmp.col2
from    @tbcompanies tmp
join    OtherTable ot
on      ot.ID = tmp.ID 
```

如果除了更新之外，您还想要不`insert`存在的行，请考虑[合并语句](http://technet.microsoft.com/en-us/library/bb510625.aspx)：

```
; merge OtherTable as target
using   #tmpcompanies as source
on      target.id = source.id 
when    not matched by target then
        insert (id, col1, col2) values (source.id, source.col1, source.col2)
when    matched then
        update set col1 = source.col1, col2 = source.col2; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T12:19:55.700

您不需要遍历任何内容，因为您使用的是 SQL Server 2008，并且此版本支持该`MERGE`语句。

看看[这里](http://www.mssqltips.com/sqlservertip/1704/using-merge-in-sql-server-to-insert-update-and-delete-at-the-same-time/)。

或者简单地使用带有 from 子句的 update 并连接两个表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T12:21:05.433

如果您需要的是 upsert 功能，我强烈推荐[Merge](http://technet.microsoft.com/en-us/library/bb510625.aspx)功能。

伪代码

```
 merge TargetTableName target
   using #tbcompanies tmp on tmp.idfield=target.idfield
   when matched then update......
   when not matched then insert........... 
```

# c# - 读取 mp3 标签时出现 C# 错误

> ID：11014616
> 
> 赞同：0
> 
> 时间：2012-06-13T12:15:16.147
> 
> 标签：c#, datagridview, mp3, id3

我正在编写一个读取 MP3 ID3v1 标签的程序。我的问题：`DataGridView`我得到一个标签值和不必要的符号“\0”。然而它不写流派！

这是我的代码：

```
 public class MusicID3Tag
        {

            public byte[] TAGID = new byte[3];      //  3
            public byte[] Title = new byte[30];     //  30
            public byte[] Artist = new byte[30];    //  30 
            public byte[] Album = new byte[30];     //  30 
            public byte[] Year = new byte[4];       //  4 
            public byte[] Comment = new byte[30];   //  30 
            public byte[] Genre = new byte[1];      //  1
        }

string[] fullfilesPath=Directory.GetFiles(folderBrowserDialog1.SelectedPath,"*.mp3*",SearchOption.AllDirectories);
int capacity = Directory.GetFiles(folderBrowserDialog1.SelectedPath, "*.mp3*", SearchOption.AllDirectories).Length;
                        GlobalVariables.Var1 = capacity;
                        for (int i = 1; i <= capacity-1; i++)
                       {
                        string filePath = fullfilesPath[i];
                        using (FileStream fs = File.OpenRead(filePath))
                        {
                            if (fs.Length >= 128)
                            {
                            MusicID3Tag tag = new MusicID3Tag();

                            fs.Seek(-128, SeekOrigin.End);
                            fs.Read(tag.TAGID, 0, tag.TAGID.Length);
                            fs.Read(tag.Title, 0, tag.Title.Length);
                            fs.Read(tag.Artist, 0, tag.Artist.Length);
                            fs.Read(tag.Album, 0, tag.Album.Length);
                            fs.Read(tag.Year, 0, tag.Year.Length);
                            fs.Read(tag.Comment, 0, tag.Comment.Length);
                            fs.Read(tag.Genre, 0, tag.Genre.Length);
                            string theTAGID = Encoding.Default.GetString(tag.TAGID);

                            if (theTAGID.Equals("TAG"))
                            {

                                string Title = Encoding.Default.GetString(tag.Title);
                                string Artist = Encoding.Default.GetString(tag.Artist);
                                string Album = Encoding.Default.GetString(tag.Album);
                                string Year = Encoding.Default.GetString(tag.Year);
                                string Comment = Encoding.Default.GetString(tag.Comment);
                                string Genre = Encoding.Default.GetString(tag.Genre);
                                dt.Rows.Add(Artist, Title, Album, Year, Genre);
                                dataGridView1.DataSource = dt; 
```

# java - 如何从我放入 JTextField 的文件中更新一行

> ID：11014618
> 
> 赞同：0
> 
> 时间：2012-06-13T12:15:22.440
> 
> 标签：java, swing, file, user-interface

也许我的标题不是最好的，但这是我真正想要的。我有一个文件，其中有一些行。我已将每一行放在`JTextField`. 这是一个例子。假设这是文本字段中的一行

```
mary peterson teacher 
```

现在我想要的是在文本字段中修改这一行并在我关闭文件中的框架时保存它

```
mary ruble teacher piano . 
```

有人可以给我一个关于如何做到这一点的想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T12:30:21.927

基本上，您将问题分解为越来越小的步骤，直到您知道如何编写每个步骤。

您首先必须创建一个包含 a`JTextField`和 a的 Java Swing GUI `JButton`，告诉您的 Java 代码显示下一行文本。

这是解决问题的一种方法。

*   打开输入文件
*   打开输出文件
*   显示第一行`JTextField`
*   `JButton`左键单击，从输出文件写入行，从`JTextField`输入文件读取下一行，在`JTextField`.
*   在输入文件结束时，关闭输入文件，关闭输出文件。

# xml - 使用 javascript 将 XML 发送到 flash，仅在 IE 中解析错误

> ID：11014619
> 
> 赞同：0
> 
> 时间：2012-06-13T12:15:22.687
> 
> 标签：xml, actionscript-3

我正在将一段 HTML 从我的页面传递到一个 Flash 电影，我想在其中将其解析为 XML。

我使用 jQuery 从页面中获取数据；

```
var htmlForFlash = escape($("#prodlinksWrap").html()); 
```

我传递的 HMTL 看起来有点像这样：

```
 <div id="prodlinks" class="noscript">
    <a href="/products/Quadrant.aspx">Quadrant</a> 
    <a href="/products/CampFire.aspx">CampFire</a>
   </div> 
```

这在 FireFox、Chrome 和 Safari 中运行良好，但 IE 会抛出错误：

```
TypeError: Error #1090: XML parser failure: element is malformed. 
```

在这条线上：

```
var myXML : XML = new XML(data); 
```

当我删除 xml 中的所有属性时，错误消失了，但当然这不是我想要的。我已经尝试更改引号，添加`<?xml ..>`标签，但到目前为止没有结果。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T07:56:42.113

我发现了，当你在 IE 中获取一个 DOM 节点的 innerHTML 时，如果属性值中没有空格或斜线，IE 会删除它周围的引号。

感谢奥古斯都和 Coolnic！有关解决方案，请参阅此问题：

[innerHTML 删除 Internet Explorer 中的属性引号](https://stackoverflow.com/questions/1231770/innerhtml-removes-attribute-quotes-in-internet-explorer)

# iphone - 我必须扩展哪个课程？

> ID：11014622
> 
> 赞同：0
> 
> 时间：2012-06-13T12:15:36.050
> 
> 标签：iphone, ios, uitableview

（我正在开发一个在表格中显示聊天消息的应用程序。但是，用户无法启动此聊天，当用户收到消息时，聊天视图会打开。所以，我编写了以下代码：

```
- (void) newMessageReceived:(NSMutableDictionary *)message
{
   General *general = [General sharedManager];
   NSString *firstmessage=[message objectForKey:@"msg"];
   NSString *from=[message objectForKey:@"sender"];    
   NSArray *listItems = [from componentsSeparatedByString:@"@"];
   NSString *fromsplit=[listItems objectAtIndex:0];
   general.firstmess=firstmessage;
   general.firstfrom=fromsplit;
   NSLog(@"Mensaje recibido: %@ de %@", [message objectForKey:@"msg"], fromsplit);

   ChatViewController *cvc=[[ChatViewController alloc]initWithNibName:@"Chat" bundle:nil];

   [[self navigationController]pushViewController:cvc animated:YES];
} 
```

一切都很好，直到这里。ChatViewController 扩展了 UITableViewController。但是，当收到一条消息时，我得到以下异常：

```
Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: '-[UITableViewController loadView] loaded the "Chat" nib but didn't get a UITableView. 
```

然后，我尝试更改扩展为 UIViewController 的类（这样做是为了检查程序是否输入了 numberOfRowsInSection 方法），然后我收到：

```
Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[ChatViewController setTableViewStyle:]: unrecognized selector sent to instance 0x9863200' 
```

我认为解决第一个异常可以解决我的问题。有什么帮助吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T14:46:44.107

```
In the second exception i think you have called [self setTableViewStyle:] method, while   

you have made it UIViewController.

So try to call this method by tableViewOutlet.

[tableView setTableViewStyle:]; 
```

希望对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T13:00:01.663

解决了。我单击 .xib 文件，在“对象”下，单击“查看”。然后，在 Identity Inspector（第三个，从左边开始）中，在 Custom Class 中，将其设置为 UITableView。以前只是“查看”。然后，一切正常。

# ruby - Ruby csv：在单列导入文件中找不到行

> ID：11014629
> 
> 赞同：0
> 
> 时间：2012-06-13T12:15:50.000
> 
> 标签：ruby, csv

我很高兴使用 Ruby 1.9.3 CSV 库来导入 CSV 文件 ( [csv/rdoc](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/csv/rdoc/index.html) )

但是当文件只有一列时，即使可以找到标题字段，也找不到数据行。

```
require 'csv'
csv = CSV.new(File.open(import_dir + "#{table}.csv"), :headers => true, :col_sep => ';')
csv.each do |row| 
```

each 不返回单个列文件的任何元素。此代码适用于所有其他文件

该文件很简单：

```
name
sample account 
```

代码找到标题“名称”但看不到数据行。我尝试引用该值并添加额外的行。如果我在之前或之后添加第二列，则可以看到数据行。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:58:09.810

这是由应用程序代码中的错误引起的，与 ruby​​ CSV 库无关

# .net - 如何知道使用 mysql 和 .Net 仍然打开的连接数？

> ID：11014635
> 
> 赞同：1
> 
> 时间：2012-06-13T12:16:13.663
> 
> 标签：.net, mysql, connection-pooling

我将 Asp.Net 与 MySql 一起使用，我正在尝试解决错误：

```
Timeout expired. The timeout period elapsed prior to obtaining a connection from the pool. This may have occurred because all pooled connections were in use and max pool size was reached. 
```

我正在努力确保我没有泄漏任何连接。我需要知道连接池的状态（现在打开了多少个连接）？在这个[线程](http://msdn.microsoft.com/en-us/library/aa175863%28v=sql.80%29.aspx) 中，我了解到我可以使用性能监视器来了解池数。但是当使用 MySql 而不是 Sql Server 时，我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T12:30:11.647

下面讨论的上述代码的原始参考在[这里](https://kr.forums.oracle.com/forums/thread.jspa?threadID=279444)：

`OracleConnection`我已经使用 Oracle 完成了以下操作，我认为它可以通过一些小的修改（例如 change等）与 MySQL 一起使用。您可以创建一个名为 ConnectionSpy 的类（见下文）。这是在 VB.Net 中，如果您愿意，您可以将代码转换为 C#。

```
Imports System
Imports System.Data
Imports Oracle.DataAccess.Client
Imports System.Diagnostics
Imports System.IO

Public Class ConnectionSpy
    Dim con As OracleConnection
    Dim st As StackTrace
    Dim handler As StateChangeEventHandler
    Dim logfileName As String

    Public Sub New(ByVal con As OracleConnection, ByVal st As StackTrace, ByVal logfileName As String)
        If (logfileName Is Nothing Or logfileName.Trim().Length() = 0) Then
            Throw New ArgumentException("The logfileName cannot be null or empty", logfileName)
        End If

        Me.logfileName = logfileName
        Me.st = st
        'latch on to the connection
        Me.con = con
        handler = AddressOf StateChange
        AddHandler con.StateChange, handler
        'substitute the spy's finalizer for the 
        'connection's
        GC.SuppressFinalize(con)
    End Sub
    Public Sub StateChange(ByVal sender As Object, ByVal args As System.Data.StateChangeEventArgs)
        If args.CurrentState = ConnectionState.Closed Then
            'detach the spy object and let it float away into space
            'if the connection and the spy are already in the FReachable queue
            'GC.SuppressFinalize doesn't do anyting.
            GC.SuppressFinalize(Me)
            RemoveHandler con.StateChange, handler
            con = Nothing
            st = Nothing
        End If
    End Sub
    Protected Overrides Sub Finalize()
        'if we got here then the connection was not closed.
        Using stream As FileStream = New FileStream( _
                    logfileName, _
                    FileMode.Append, _
                    FileAccess.Write, _
                    FileShare.Write)

            Using sw As StreamWriter = New StreamWriter(stream)
                Dim text As String = _
                    DateTime.Now.ToString("yyyy-MM-dd HH:mm:ss") & _
                    ": WARNING: Open Connection is being Garbage Collected" & _
                    Environment.NewLine & "The connection was initially opened " & st.ToString()
                sw.WriteLine(text)
                sw.Flush()
                RemoveHandler con.StateChange, handler
                'clean up the connection
                con.Dispose()
            End Using

        End Using
    End Sub
End Class 
```

然后，在您的 web.config/app.config 中，您可以添加如下部分：

```
<configuration>
    <appSettings>
        <!--
          if you need to track connections that are not being closed, set
          UseConnectionSpy to "true". If you use the connection spy, a log
          will be created (the logfile can be specified with the ConnectionSpyLog
          parameter) which will give you a stack trace of each code location
          where a connection was not closed        
        -->
    <add key="UseConnectionSpy" value="true"/>
    <add key="ConnectionSpyLog" value="c:\\log\\connectionspy.log"/>
    </appSettings>
</configuration> 
```

然后，无论您在代码中创建数据库连接的何处，都可以执行此操作（见下文）。该`mConnection`变量将代表您的 MySQL 连接，当您到达这一点时，您已经创建了该连接。

```
 If ConfigurationManager.AppSettings("UseConnectionSpy") = "true" Then
        Dim st As StackTrace = New StackTrace(True)
        Dim sl As ConnectionSpy = New ConnectionSpy(mConnection, st, _
                                                    ConfigurationManager.AppSettings("ConnectionSpyLog"))
    End If 
```

因此，如果您有任何连接在关闭之前被垃圾回收，则会在日志文件中报告。我在一些应用程序中使用了这种技术并且效果很好。

您需要做的是为您的 MySQL 数据库连接创建一个包装类，您可以将上述代码放在适当的位置以跟踪连接。或者，您可以将上述调用添加到您创建连接的任何位置。包装类虽然有点干净（这就是我们所做的）

# jquery - iPod 上的 Safari 窗口尺寸

> ID：11014638
> 
> 赞同：0
> 
> 时间：2012-06-13T12:16:23.937
> 
> 标签：jquery, mobile-safari, ipod

我正在为需要有关窗口尺寸的精确信息的 iOS 开发一个 webapp。

在 iPad 和 iPhone 上，使用 jQuery in 查询的窗口尺寸是正确的。

```
$(self.top).resize(function(e) {
  $(window).width();
  $(window).height();
} 
```

但是在 iPod (4g) 上，纵向模式下报告的尺寸是 320 x 306，这显然是错误的。

有人知道为什么吗？是有意的吗？所有的 iPod 都是这样吗？

iPod 是否有可能报告旋转之前的尺寸而不是新的方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T12:20:11.533

尝试这个：

```
if (window.innerWidth)
    return window.innerWidth;
else if (document.all) 
    return document.body.clientWidth; 
```

# c# - 关闭控制台时调用方法

> ID：11014642
> 
> 赞同：6
> 
> 时间：2012-06-13T12:16:43.657
> 
> 标签：c#, console

有没有办法强制 C# 编译器 Visual Studio 2010 在用户关闭控制台时调用方法？我知道这可以通过某种事件处理或使用 dispose 方法在 Windows 窗体中完成，但是控制台呢，有没有类似的方法可以在关闭它时调用方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T12:22:28.897

在大多数情况下，您不需要特殊的技术……只需将您正在考虑的例程添加到程序的末尾即可；好吧，您可以以这种方式编写程序。但是，如果您仍然需要处理它，则会触发 Ctrl+C 机制或所谓的 CancekKeyPress 事件。

检查[这个](https://stackoverflow.com/q/177856/145682)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T12:18:48.563

不 ！这是不可能的，因为您没有为控制台窗口编写代码并且您没有任何要覆盖的事件

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-13T12:41:00.443

使用汇编语言编程来做到这一点。

要使用汇编语言构造，请在 c# 中使用 _asm {} //进一步搜索

要阻止某人关闭控制台窗口，请覆盖在 ctrl+c 上调用的中断，或者在程序退出时调用另一个中断。覆盖它..

# php - 跟踪用户 - 自定义 PHP/MySQL 网站分析

> ID：11014643
> 
> 赞同：7
> 
> 时间：2012-06-13T12:16:46.473
> 
> 标签：php, mysql, analytics, tracking

我经营一个本地目录网站（想想 yelp/yell.com 等），需要向网站上列出的企业提供分析数据。

我需要跟踪以下内容：

1) 特定页面的访问者数量（即：Jim 的小部件被查看了 65 次）

2) 用户点击链接的次数（即：25 位用户点击访问您的网站）

我可以通过在每次发生动作时简单地在相关数字上加一来做到这一点。

**我希望能够将其拆分为日期范围，例如，过去 30 天、过去 12 个月、所有时间。**

如何将这些数据存储在数据库中？我只需要理论，不需要代码！如果有人可以解释存储此信息的最佳方式，我将不胜感激。

例如，我是否将一张表用于日期，一张用于页面/链接，另一张用于用户数据（点击的链接/访问的页面）？到目前为止，我唯一的解决方案是每次发生其中一个操作时向数据库添加一个新行，这不会很好地扩展。

感谢任何可以提供帮助的人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T12:29:43.063

我不会重新发明轮子并使用已经可用的解决方案，例如[Piwik](http://piwik.org)。它实际上可以阅读您的普通博客以提供您要求的所有信息。

如果由于某种原因您仍然需要自定义解决方案，我不会将跟踪数据保存在范围内，而是为每个单独的页面调用使用准确的时间和 url 数据（您的普通博客提供的内容）。累积的数据应在您的逻辑部分即时生成，例如通过 SQL 视图：

```
SELECT count(url),url
FROM   calllog
WHERE  calldate > NOW()-30days 
```

# java - Java中泛型的魔力

> ID：11014646
> 
> 赞同：0
> 
> 时间：2012-06-13T12:16:48.510
> 
> 标签：java, generics

我正在使用 jdk 1.6
我的主要方法：

```
exmp3<String , Integer> exmp3 = new exmp3( "ravi" , new ArrayList<String>());
                exmp3.put(5);
                exmp3.put(15);
                exmp3.put(20);
                ArrayList<Integer> a =  exmp3.getObject();
                System.out.println(a.size()); 
```

类 exmp3 ：

```
public class exmp3<ABC , XYZ>
{
    private ABC abc ;
    private ArrayList<XYZ> xyz;

        public exmp3(ABC abc , ArrayList<XYZ> xyz)
        {
            this.xyz =  xyz;
        }

        public void put(int i)
        {
            ArrayList<Integer> a =  (ArrayList<Integer>) this.xyz;
            a.add(i);
        }

        public ArrayList<XYZ> getObject()
        {
            return xyz;
        }
    } 
```

我的查询是在创建`exmp3`in`main`方法的实例时为什么`String`被接受为`ArrayList`where 的参数类型，正如我`exmp3<String , Integer> exmp3`在`main`方法中提到的那样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T12:19:42.360

因为您没有为构造函数调用指定类型参数。要么明确指定它们（`new exmp3<String, Integer>(...)`），要么让编译器找出它们（`new exmp3<>(...)`需要 JDK7+）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T12:18:57.337

因为您使用的是原始类型。`new exmp3(..)`表示忽略任何类型信息。将其更改为：`new Exmp3<String, Integer>`（Java 5-6）或`new Exmp3<>`（Java 7）

在这种情况下，编译器通常会向您显示一个警告，即您不应使用原始类型。简而言之 - 当使用原始类型时，它可以作为 Java 1.5 之前的版本 - 即没有泛型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T12:28:50.267

因为你正在使用这个：

```
new exmp3( "ravi" , new ArrayList<String>()); 
```

这几乎是一样的

```
new exmp3<Object,Object>( "ravi" , new ArrayList<String>()); 
```

方法或构造函数中的参数在实例化时从不定义类型。编译器只看到（如果你不考虑擦除）：

```
new exmp3( String , ArrayList); 
```

虽然您的实例被声明为使用此定义：

```
public class exmp3<Object, Object>
{
    private Object abc ;
    private ArrayList<Object> xyz;

        public exmp3(Object abc , ArrayList<Object> xyz)
        {
            this.xyz =  xyz;
        }

        public void put(int i)
        {
            ArrayList<Integer> a =  (ArrayList<Integer>) this.xyz;
            a.add(i);
        }

        public ArrayList<Object> getObject()
        {
            return xyz;
        }
    } 
```

# android - 如何在等待接收短信 5 分钟时在 android 中显示进度条？

> ID：11014653
> 
> 赞同：2
> 
> 时间：2012-06-13T12:17:35.067
> 
> 标签：android, android-asynctask, android-dialog

**我的问题**

如何在等待接收短信时在android中显示进度条？

对话框应满足以下条件

*   对话最多应关闭 5 分钟。
*   如果在 5 分钟之前收到 SMS，则应关闭该对话框。

**我试过的**

```
public class GetSMS extends Activity {
   ...
   ...
   private boolean progressDialogFlag;
   private ProgressDialog progressDialog;
   ...
   ...
   new SMSReceiver().execute();
}

public class SMSReceiver extends AsyncTask<Void, Integer, Void> {
    protected void onPreExecute() {
        // start a progressdialog box
        super.onPreExecute();
        progressDialogFlag = true;
        progressDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
        progressDialog.setMessage("Waiting to Receive SMS...");
        progressDialog.setCancelable(false);
        progressDialog.show();

    }

    protected void onProgressUpdate(Integer... progress) {
        super.onProgressUpdate(progress);
        if (progressDialogFlag == true) {
            progressDialog.setProgress(progress[0]);
        }
        if (progress[0] == 100 || progressDialogFlag == false) {
            progressDialog.dismiss();
        }
    }

    protected void onPostExecute(Void result) {

    }

    @Override
    protected Void doInBackground(Void... params) {
        int interval = 2;
        int totalDuration = 5 * 60 * 1000; // 5 min
        int sleepPeriod = (totalDuration / 100) * interval;
        for (int i = 2; i <= 100; i += 2) {
            publishProgress(i);
            try {
                Thread.sleep(sleepPeriod);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
        return null;
    }
}

smsReceiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
              progressdialog = false;
   }
} 
```

**我有什么疑问**

*   我认为在 5 分钟前收到短信时，使用`progressDialogFlag`取消会导致问题。`progressDialog`
*   在 UI 和工作线程中使用变量`progressDialogFlag`会导致某种竞争条件。

感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T19:32:03.933

Do like this:

```
private ProgressDialog p;

private void sendSMS(){
     p = new ProgressDialog(Context);
     registerReceiver(broadcastReceiver, SMSINTENT);
}

private BroadcastReceiver broadcastReceiver = new BroadcastReceiver() {

    @Override
    public void onReceive(Context context, Intent intent) {

        p.dismiss();
        getActivity().unregisterReceiver(this);

    }
}; 
```

Don't know if it is the best solution, but it works!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T12:24:17.030

当您启动 progressDialog 时，可以尝试以下类似的操作

```
 new Handler().postDelayed(new Runnable() {

            @Override
            public void run() {
               if(null!=progressDialog && progressDialog.isShowing()){
                  // try{
                   progressDialog.dismiss();
               }

            }
        }, 5*60*1000); 
```

但需要更多检查......

# mysql - 项目中的 SQL 行之间的差异

> ID：11014660
> 
> 赞同：1
> 
> 时间：2012-06-13T12:17:52.097
> 
> 标签：mysql, rows

我有一个这样的表，并使用 MYSQL 5.5

```
id
---
2
3
6
7
8
9
13
15
16
17
18
.
.
. 
```

我想得到 numbers `3 6 9 13 15`，更准确的每个满足条件的数字：

`id[i+1] - id[i] > 1 or id[i] - id[i-1] > 1`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T15:49:08.587

在这里（假设您的 id 列确实已排序）：

```
/*
create table asdf (id int);
insert into asdf values 
(2),
(3),
(6),
(7),
(8),
(9),
(13),
(15),
(16),
(17),
(18);
*/
select
*
from
asdf a1 
where 
(select min(id) from asdf a2 where a2.id > a1.id) - id > 1
OR
id - (select max(id) from asdf a3 where a3.id < a1.id) > 1 
```

询问，如果您有任何问题。不过，应该很自我解释。

# javascript - jquery - 字段选择所有文本然后在焦点上取消选择它

> ID：11014661
> 
> 赞同：0
> 
> 时间：2012-06-13T12:17:52.487
> 
> 标签：javascript, jquery, focus

试图弄清楚为什么会发生这种情况 - 我有一个输入文本字段，我希望在该字段获得焦点时突出显示所有文本。这种情况发生得非常快，然后所有文本都被取消选择。知道为什么会发生这种情况吗？这是我正在使用的代码：

```
$("#permalink").focus(function(){
    this.select();
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T12:24:27.480

您需要覆盖输入元素上的 mouseup 事件（如[本文](https://stackoverflow.com/questions/1269722/selecting-text-on-focus-using-jquery-not-working-in-safari-and-chrome/1269767#1269767)所述- 感谢 MrSlayer！）

例如见这里：http: [//jsfiddle.net/f8TdX/](http://jsfiddle.net/f8TdX/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T14:03:34.157

这是 WebKit 中的一个问题。最好的选择是结合使用`focus`和`mouseup`事件。以下来自对类似问题的[另一个答案。](https://stackoverflow.com/a/6201757/96100)

```
$("#permalink").focus(function() {
    var $this = $(this);

    $this.select();

    window.setTimeout(function() {
        $this.select();
    }, 1);

    // Work around WebKit's little problem
    $this.mouseup(function() {
        // Prevent further mouseup intervention
        $this.unbind("mouseup");
        return false;
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T12:23:07.273

试一试

```
$(document).ready(function() {
    $("input:text").focus(function() { $(this).select(); } );
}); 
```

[获得焦点时选择文本框的所有内容（JavaScript 或 jQuery）](https://stackoverflow.com/questions/480735/select-all-contents-of-textbox-when-it-receives-focus-javascript-or-jquery)

# ruby-on-rails - 根据 created_at 过滤器从数据库中查询活动记录对象

> ID：11014663
> 
> 赞同：0
> 
> 时间：2012-06-13T12:18:03.413
> 
> 标签：ruby-on-rails, activerecord, timezone

我知道 Ruby on rails 始终以 UTC 存储时间（对于 created_at 和 updated_at 字段），当您从数据库中获取活动记录对象并询问 RoR 它的日期时，它会将其转换为您配置的（在 environment.rb 中）时区并给你看。

但我的情况不同。我正在构建一个自定义查询。我正在手动添加一个 where 子句。Where 子句是这样的：`select * where created_at > [user entered date].`

现在出现的问题是用户输入的日期是UTC - 7，而created_at 是UTC。所以我真的不能让它工作。我可以像硬编码一样`select * where created_at > [user-entered-date] 07:00:00`- 但这会因为夏令时而产生问题，而且似乎也不是一个好的解决方案。

这不是唯一的问题，第二个问题是当我打印出 record.created_at 时，我得到了 UTC 日期（可能是因为我构建了一个自定义查询？），我也不想手动（硬编码）转换到当地时间。

这是我的查询代码：

```
cond = EZ::Where::Condition.new

if !start_date.empty?
  start_date = params[:filter][:start_date].to_date.to_s(:db)
  cond.append "(registrations.created_at) >= '#{start_date} 07:00:00'" #Here!
end

if !end_date.empty?
  end_date = params[:filter][:end_date].to_date
  end_date = end_date + 1.day;
  end_date = end_date.to_s(:db)
  cond.append "(registrations.created_at) <= '#{end_date} 07:00:00'" #Here!
end

registrations = Registration.all(
:joins => [:event],
:select => 'registrations.id, registrations.first_name, registrations.last_name, registrations.company_name,
(registrations.created_at) AS reg_date, events.name AS evt_name, sum(fees) AS fees, code, events.id AS event_id',
:group => 'registrations.id',
:order => 'evt_name, events.id',
:conditions=> cond.to_sql
)
unless registrations.empty?

  registrations.each_with_index do |registration, i|
    sheet[ i, 3 ] = (DateTime.strptime(registration.reg_date, "%Y-%m-%d %H:%M:%S") - 7.hours).to_date #Here! 
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T13:50:51.800

尝试使用[TimeWithZone](http://api.rubyonrails.org/classes/ActiveSupport/TimeWithZone.html)和[TimeZone](http://api.rubyonrails.org/classes/ActiveSupport/TimeZone.html)

```
tz = ActiveSupport::TimeZone.new("Mountain Time (US & Canada)")
...
start_date = tz.local_to_utc(params[:filter][:start_date].to_time).to_s(:db)
...
sheet[ i, 3 ] = registration.reg_date.in_time_zone("Mountain Time (US & Canada)").to_date 
```

# r - 如何删除数据框中的第 n 行和第 n+1 行？

> ID：11014666
> 
> 赞同：3
> 
> 时间：2012-06-13T12:18:12.463
> 
> 标签：r, row, dataframe

我有几个数据框，我想删除与某个字符串匹配的每一行。我使用以下代码来做到这一点：

```
 df[!(regexpr("abc", df$V4) ==1),] 
```

如何删除后面的行，例如，如果我删除上面代码指定的第 n 行，我怎样才能另外删除第 n+1 行？

我的第一次尝试是简单地找出所需行的索引，但这不起作用，因为我需要删除不同数据帧中长度不同的行。所以指数不一样。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T12:26:43.220

我建议直接取出并操作逻辑向量。假设我们有向量：

```
x = c(5,0,1, 4, 3) 
```

我们想做：

```
x[x > 3] 
```

首先，请注意：

```
R> (s_n = x>3)
[1]  TRUE FALSE FALSE  TRUE FALSE 
```

所以

```
R> (s_n1 = as.logical(s_n + c(F, l[1:(length(s_n)-1)])))
[1]  TRUE  TRUE FALSE  TRUE  TRUE 
```

因此，

```
x[s_n1] 
```

给你你想要的。

* * *

在您的特定示例中，例如：

```
s_n = !(regexpr("abc", df$V4) == 1)
s_n1 = as.logical(s_n + c(F, l[1:(length(s_n)-1)])))
df[s_n1, ] 
```

应该管用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T14:45:10.510

在您的逻辑表达式上使用 which() ，然后您可以将 1 添加到结果中。

```
sel <- which(grep("abc", df$V4))
sel <- c(sel, sel+1)
df[-sel,] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T15:06:35.167

```
df[which(!(regexpr("abc", df$V4) ==1))+c(0,1),] 
```

# java - 当 icalendar (ical) 更新时，java 是否可以获取新的事件详细信息并执行某些操作？

> ID：11014667
> 
> 赞同：0
> 
> 时间：2012-06-13T12:18:20.927
> 
> 标签：java, icalendar, ical4j

在现有的 java 应用程序中，我问我是否可以执行以下操作：

*   例如，用户使用 Google 日历（议程）在他的 ical 中创建一个新事件

*   Java 程序检测到日历已更新，新事件/集合点已创建

*   例如，java 程序获取新的事件详细信息并将此详细信息存储在 mysql 数据库中

你知道这是否可能吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T18:01:10.260

是的，这是可能的，您唯一需要跟踪的是事件的 uid：新的 uid 表示新事件，您还需要跟踪序列属性以检测事件的变化。

# javascript - 如何确定是否在 iPhone 浏览器上到达了网站底部？

> ID：11014673
> 
> 赞同：1
> 
> 时间：2012-06-13T12:18:48.280
> 
> 标签：javascript, iphone, scroll

如果 iPhone 用户垂直向下滚动到网站底部，我需要知道这一点（通过 JavaScript 事件）。

我已经对此进行了检查，[您如何知道滚动条已到达页面底部，](https://stackoverflow.com/questions/5060389/how-do-you-know-the-scroll-bar-has-reached-bottom-of-a-page)并且该解决方案似乎在桌面浏览器上运行良好（在 Google Chrome 上测试）。

在 iPhone 上虽然它不起作用。

有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T13:42:55.947

也许这是由于这个 JQuery deffect，你检查过这个吗？

[bugs.jquery.com/ticket/6724](http://bugs.jquery.com/ticket/6724)

他们提供了一种解决方法。

rgds。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T12:27:57.537

您可以使用名为 iosScript 的 jquery 插件。有关详细信息，请参阅[此位置。](https://github.com/iosscripts/iosSlider)

# c# - 什么是单元测试以及如何在 Visual Studio 中使用 C# .Net 进行单元测试

> ID：11014676
> 
> 赞同：-2
> 
> 时间：2012-06-13T12:18:49.040
> 
> 标签：c#, visual-studio-2010, unit-testing

好的，所以我在 C# 中有以下类：

```
class Program
{
    static void Main(string[] args)
    {
        MyClass myClass = new MyClass("Hello World");
        myClass.WriteToConsole();
    }
}

class MyClass
{
    private string MyProperty { get; set; }

    public MyClass(string textToEncapsulate)
    {
        MyProperty = textToEncapsulate;
    }

    public void WriteToConsole()
    {
        Console.WriteLine(MyProperty);
    }
} 
```

三个问题：

1.  什么是单元测试？
2.  在上面的示例中，单元测试是否有益？
3.  我将如何进行上述示例的“单元测试”？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T12:32:39.820

*1.什么是单元测试？*

手动测试非常耗时。每次手动运行完全相同的一组测试以确保代码的所有部分都按预期运行可能很困难。在手动测试一个完整的产品时，测试所有代码路径也非常困难。

当数据库不可用时，您将如何测试代码的反应？或者当存储了一些错误的数据时？这需要相当长的时间才能正确。

单元测试意味着我们开始测试代码中尽可能小的部分。为了确保我们可以轻松地做到这一点，我们将流程自动化。这意味着我们编写测试代码来测试我们的生产代码。

例如：

```
int a = 3;
int b = 5;

Calculator c = new Calculator();
int sum = c.Sum(a, b);

Assert.AreEqual(8, sum); 
```

此测试可确保您的 Calculator 类上的 Sum 函数正常工作。

现在，假设您要优化 Calculator 类的内部工作。您开始更改和优化代码。每次更改后，您都运行单元测试，当它们都成功时，您就知道您没有破坏任何代码。

假设在生产中，用户为您的计算器提交了错误报告。您的第一步将是编写一个显示此错误的单元测试。在新测试失败后（因为 bug 仍然存在！）你修复了 bug，单元测试成功了，你可以确定这个 bug 永远不会再出现。

这种安全带是单元测试的最大好处之一。

*2 在上面的例子中，单元测试是否有益？3 我将如何进行上述示例的“单元测试”？*

单元测试是一个很好的实践。它可以帮助您证明您的代码正在运行。但是，在您的示例中，很难测试代码。

控制台的输出不是可以轻松测试的。但是，如果您将 Console.WriteLine 的概念抽象出来，那么您的代码将变得更好的可测试性。

编写单元测试实际上非常简单。问题是编写可以实际测试的代码。

您的代码的更好的可测试版本是：

```
class Program
{
    static void Main(string[] args)
    {
        MyClass myClass = new MyClass(new ConsoleOutputService(), "Hello World");
        myClass.WriteToConsole();
    }
}

public interface IOutputService
{

    void WriteLine(string MyProperty);
}

public class ConsoleOutputService : IOutputService
{
    public void WriteLine(string MyProperty)
    {
        Console.WriteLine(MyProperty);
    }
}

class MyClass
{
    private IOutputService _outputService;
    private string MyProperty { get; set; }

    public MyClass(IOutputService outputService, string textToEncapsulate)
    {
        _outputService = outputService;
        MyProperty = textToEncapsulate;
    }

    public void WriteToConsole()
    {
        _outputService.WriteLine(MyProperty);

    }
} 
```

您已经用接口替换了对控制台的直接依赖。在对该代码进行单元测试时，您可以为您的 IOutputService 提供一个假的并检查结果。

一本非常好的书是[xUnit 测试模式](http://xunitpatterns.com/)。它显示了编写单元测试和模式来避免/修复它们的常见缺陷。

几个月前，我自己也[写了一篇关于可测试代码的博客。](http://wouterdekort.blogspot.nl/2012/03/unit-testing-hell-or-heaven.html)它有点先进，但也许你可以从中得到一些东西。如果您有任何问题随时问。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T12:32:06.477

您提出的课程不太可测试，因为它直接在控制台上运行。换个方法就不一样了`WriteToConsole(TextWriter out)`;. 在这种情况下，您可以模拟 TextWriter 并断言该类输出到控制台正是您所期望的。这个想法是，如果您编写可测试的代码，您就会编写更好的代码，因为为可测试性工作会使您的代码更易于重用。即使在您的情况下进行单元测试似乎有点傻，但有一个测试证明简单的行为有效，可以让您在您或其他人进行进一步修改时更安全，这可能会作为副作用改变您定义的期望. 请注意，我建议您使用一个简单的 TextWriter 作为附加参数来使您的类可测试：我认为您必须做最简单的努力才能使您的类可测试，并且由于 TextWriter 是可模拟的，因此您可以获得测试的好处无需重写整个代码，这通常很好。

# mysql - MySQL 无重复加入

> ID：11014677
> 
> 赞同：4
> 
> 时间：2012-06-13T12:18:49.210
> 
> 标签：mysql, join, left-join, groupwise-maximum

我有一个客户表和一个订单表。每个客户可以有许多订单。

我想从订单表中选择每个客户以及他们最早的订单号（重要的是我选择最早的订单号，而不仅仅是任何订单）。我想列出是否有订单的客户，如果他们有多个订单，我不想将客户包括两次。

我正在使用这个：

```
 SELECT *
    FROM customers
    LEFT JOIN orders
    ON customers.id = orders.customer_id 
    GROUP BY customers.id 
```

这*几乎*给了我我想要的东西，除了它会从表中选择它喜欢的任何订单 ID。我需要能够排序，并选择最小的订单 ID。

请问有什么想法吗？

我很确定它在盯着我的脸...

**编辑：**根据要求的表格结构

*   顾客：

    * * *

    ```
    | ID | Name | Address            | Etc |
    ----------------------------------------
    | 1  | Joe  | 123 Fake Street    |     |
    | 2  | Mike | 1600 Fake Road     |     |
    | 3  | Bill | Red Square, Moscow |     |
    ---------------------------------------- 
    ```

*   订单：

    * * *

    ```
    | ID | Customer_ID | Date |
    ---------------------------
    | 1  | 1           |  ... |
    | 2  | 2           |  ... |
    | 3  | 2           |  ... |
    | 4  | 1           |  ... |
    --------------------------- 
    ```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-13T12:23:53.887

为每个客户创建具有最低数字订单 ID 的虚拟表（a/k/a 子查询）。

```
SELECT customer_id, min(order_id)
  FROM orders
 GROUP BY customer_id 
```

然后将该表与客户表连接起来，就像这样。

```
SELECT C.customer_id, firstorder.order_id
  FROM CUSTOMERS as C
  LEFT JOIN (
    SELECT customer_id, min(order_id)
      FROM orders
     GROUP BY customer_id
  ) AS firstorder ON c.customer_id = firstorder.customer_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T12:22:45.807

试试这个

```
Select customer.*,Order.OrderNo As EarilerORderNo
From Customers Left Join 
(Select customer_id,orderid from orders order by customer_id,orderid desc) As Orders 
ON Customers.Id=Orders.OrderID 
```

# typo3 - 如何在 Typo3 中获取多个后端用户组访问列表

> ID：11014678
> 
> 赞同：0
> 
> 时间：2012-06-13T12:18:50.287
> 
> 标签：typo3

Typo3 中是否可以有多个后端用户组访问列表？例如，我想在根级别有一个访问列表（这似乎是正常情况），

![用户组的根级访问列表](../Images/1e26d39931e93ec0fd201e0e24460baa.png)

另一个在页面树的下方。后端的标题将类似于：

**在文件夹级别编辑后端用户组“作者”**

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T14:20:53.757

访问列表分配给组。所以这对于股票 TYPO3 是不可能的。但是，您可能想尝试扩展[`be_acl`](https://extensions.typo3.org/extension/be_acl/)。

# iphone - 如何设置按钮不可编辑

> ID：11014691
> 
> 赞同：0
> 
> 时间：2012-06-13T12:19:44.443
> 
> 标签：iphone, objective-c, image

我对 XCode 比较陌生，我正在开发照片拼贴应用程序，当我选择模板创建拼贴时，当我单击按钮选择图像时选择基于模板的拼贴之后，它从照片库中选择图像，然后单击该按钮再次打开照片库，但我想在选择一张照片后然后按钮操作被禁用......所以帮我解决我的问题

`

```
 - (IBAction)choosepic:(id)sender {

        UIAlertView *alert1=[[UIAlertView alloc]initWithTitle:@"Select Image from..." message:@"" delegate:self cancelButtonTitle:@"Image Gallary" otherButtonTitles:@"cancel", nil];
        alert1.alertViewStyle=UIAlertViewStyleDefault;
        alert1.tag=1;
        [alert1 show];
        [alert1 release];
    }

    - (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
    {
        if (alertView.tag==1)
        {  

        if(buttonIndex == 0)
            imagepicker=[[UIImagePickerController alloc]init];
            imagepicker.delegate=self;
            imagepicker.sourceType=UIImagePickerControllerSourceTypePhotoLibrary;
            [self presentModalViewController:imagepicker animated:YES];

        }

} 

-(IBAction)imagepickMethod1:(id)sender
{
    imagepicker=[[UIImagePickerController alloc]init];
    imagepicker.delegate=self;

    imagepicker.sourceType=UIImagePickerControllerSourceTypePhotoLibrary;
    [self presentModalViewController:imagepicker animated:YES];
     button1.tag=100;

}
-(IBAction)imagepickMethod2:(id)sender
{
    imagepicker=[[UIImagePickerController alloc]init];
    imagepicker.delegate=self;
    imagepicker.sourceType=UIImagePickerControllerSourceTypePhotoLibrary;
    [self presentModalViewController:imagepicker animated:YES];

    button1.tag=101;
}

-(IBAction)imagepickMethod3:(id)sender
{
    imagepicker=[[UIImagePickerController alloc]init];
    imagepicker.delegate=self;
    imagepicker.sourceType=UIImagePickerControllerSourceTypePhotoLibrary;
    [self presentModalViewController:imagepicker animated:YES];
    button1.tag=102;
}

-(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingImage:(UIImage *)image editingInfo:(NSDictionary *)editingInfo
{

    [picker dismissModalViewControllerAnimated:YES];

    if (button1.tag==100)
    {

        photoPreviewImageView1.image=image;
    }

    else
        if (button1.tag==101) 
        {

        photoPreviewImageView2.image=image;
    }
    else
    {

        photoPreviewImageView3.image=image;
    }

        } 
```

`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T12:24:33.813

你可以在你的

```
- (IBAction)choosepic:(id)sender:
{
    UIButton *btn = sender;
    btn.enabled = FALSE;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T12:26:14.110

`userInteractionEnabled`您可以通过将属性值设置为来禁用按钮上的用户交互`NO`。

```
-(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingImage:(UIImage *)image editingInfo:(NSDictionary *)editingInfo
{
    picker dismissModalViewControllerAnimated:YES];

    if (button1.tag==100)
    {
        photoPreviewImageView1.image=image;
        [button1 setUserInteractionEnabled:NO];
    }
    else if (button1.tag==101) 
    {
        photoPreviewImageView2.image=image;
    }
    else
    {
        photoPreviewImageView3.image=image;
    }
} 
```

# linux - 在 linux 中以详细的方式启动 tomcat

> ID：11014702
> 
> 赞同：4
> 
> 时间：2012-06-13T12:20:31.353
> 
> 标签：linux, unix, tomcat

当我想启动我写的tomcat服务时

```
/etc/rc.d/init.d/tomcat start 
```

然而，它并没有给出任何迹象表明正在发生什么，有时服务完全启动需要时间。

是否有用于 tomcat 启动的详细命令

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T12:43:53.157

您可以启动另一个窗口并键入：

```
tail -f /var/log/tomcat6/catalina.out 
```

或者无论您的日志在哪里，这都会告诉您正在发生的事情。

# tfsbuild - 未生成 Team Foundation Server 中的自动生成

> ID：11014704
> 
> 赞同：1
> 
> 时间：2012-06-13T12:20:36.917
> 
> 标签：tfsbuild

我正在尝试使用 TFS 内置触发器调度程序设置为 VS2010 中的项目设置自动构建。TFS-->Builds-->my_Build-->右键，Edit Build Definition。在“触发器”选项卡中，我在接下来的几天每周安排构建，并给定时间，例如上午 6:00。

当时我没有看到任何构建排队。是否还有其他设置要做，请您指出任何具有设置的链接。

谢谢

阿尔文德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T13:24:12.137

只是一个疯狂的猜测：

![在此处输入图像描述](../Images/935cd297a0a51de834a731a0e93a1f32.png)

如果您没有检查这一点，那么只有在工作区中映射的源发生更改时，您的计划构建才会开始。

# android - 在 Android 源代码中添加预构建的二进制文件

> ID：11014706
> 
> 赞同：9
> 
> 时间：2012-06-13T12:20:50.160
> 
> 标签：android, android-source, android-build

我有一个本机二进制文件，我想将它包含到 Android 的源代码中，这样当我编译它时，我的二进制文件就会包含在 /system/bin 中。

我已将二进制文件复制到文件夹 /prebuilt/android-arm/my-binary 中，并创建了一个新的 Android.mk，其中包含以下内容：

```
LOCAL_PATH := $(call my-dir)
include $(CLEAR_VARS)

LOCAL_SRC_FILES := my-binary
LOCAL_MODULE := my-binary
LOCAL_MODULE_CLASS := EXECUTABLES
LOCAL_MODULE_TAGS := optional
include $(BUILD_PREBUILT) 
```

但是当我运行*make*时，我在日志中得到的唯一参考如下：

```
target Prebuilt: my-binary (out/target/product/generic/obj/EXECUTABLES/my-binary_intermediates/my-binary) 
```

并且二进制文件根本没有安装到 system.img 中。[在 Android 上安装预构建的二进制文件](https://stackoverflow.com/questions/1043257/installing-a-prebuilt-binary-on-android-not-found)中有一个几乎相同的问题：“未找到” ，但提问者已经知道基本过程，根本没有解释。如果我运行*make my-binary*，我会得到我发布的同一行。

我也尝试运行*make out/target/product/generic/system.img my-binary*但它也不起作用。我的二进制文件显示在*out*子文件夹中，但不会包含在 system.imng 中

我错过了什么吗？有什么办法可以让只运行*make -j#*我的二进制文件包含在 /system/bin 中？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-13T14:33:23.557

刚刚在我的模拟器上测试过，它正在工作。我在此文件夹中用作示例 gdbserver。我有一个为 android 交叉编译的 strace 并使用它嵌入到图像中。因此，说明将针对此可执行文件。

1.  在 prebuilt/android-arm/strace 下创建一个文件夹
2.  把你的二进制文件放在那里（在我的例子中是 strace）

添加具有以下内容的 Android.mk 文件：

```
LOCAL_PATH := $(call my-dir)
include $(CLEAR_VARS)

LOCAL_SRC_FILES := strace
LOCAL_MODULE := strace
LOCAL_MODULE_CLASS := EXECUTABLES
LOCAL_MODULE_TAGS := optional
include $(BUILD_PREBUILT)

prebuilt_files :=

$(call add-prebuilt-files, EXECUTABLES, $(prebuilt_files)) 
```

使用说明构建：（`mmm prebuilt snod -j4`如果您已经构建了图像）或者您当然也可以使用`make -j4`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-06-03T19:05:09.767

如果您的二进制文件最终在 out 目录中但不在图像中，那是因为您没有将二进制文件包含在图像中的规则。

在`device/<vendorname>/<devicename>/device.mk`（或包含在某些 makefile 中`device.mk`）中，您需要具有以下两个条目之一：

```
PRODUCT_PACKAGES += my-binary 
```

或者：

```
PRODUCT_COPY_FILES += path/to/my-binary:/root/target/path/to/my-binary 
```

...我会建议这种`PRODUCT_PACKAGES`方法；`PRODUCT_COPY_FILES`更适合脚本和配置文件。

注意：`PRODUCT_PACKAGES`使用模块名称，其中`PRODUCT_COPY_FILES`使用二进制文件的实际名称/位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-28T07:36:26.880

您还可以执行以下对我有用的操作..... LOCAL_MDULE_PATH := $(TARGET_OUT_OPTIONAL_EXECUTABLES) ... 包括 $(BUILD_EXECUTABLE)

# vb.net - 使用 VB.NET 在 LDAP 中搜索用户权限

> ID：11014711
> 
> 赞同：0
> 
> 时间：2012-06-13T12:21:08.273
> 
> 标签：vb.net, active-directory, ldap

我正在尝试使用 VB.NET 从 Active Directory 中获取一些信息。我有一个用户的“primaryGroupID”，在这种情况下是 2096。 **我怎样才能用VB.NET 得到这个组的CN？**

最终，我需要做的是找到一个用户所属的组列表（包括属于另一个组的组）。我已经有一个函数可以获取除主要组之外的主要组，以及另一个返回主要组 ID 的函数。两者都在下面详细说明。

```
Public Function getUserGroups(ByVal Username)
    Dim grupos As New ArrayList()
    Try
        Dim Entry As New System.DirectoryServices.DirectoryEntry(ldapPath, ldapAdminUser, ldapAdminPass)
        Dim Searcher As New System.DirectoryServices.DirectorySearcher(Entry)
        Searcher.SearchScope = DirectoryServices.SearchScope.Subtree
        Searcher.Filter = "(&(objectcategory=user)(SAMAccountName=" & Username & "))"
        Dim res As SearchResult = Searcher.FindOne

        For i = 0 To res.Properties("memberOf").Count() - 1
            grupos.Add(res.Properties("memberOf")(i).ToString)
        Next
    Catch ex As Exception
    End Try
    Return grupos
End Function

Public Function GetUserPrimaryGroupID(ByVal user As String) As String
    Dim grupoID As String = ""
    Try
        Dim Entry As New System.DirectoryServices.DirectoryEntry(ldapPath, ldapAdminUser, ldapAdminPass)
        Dim Searcher As New System.DirectoryServices.DirectorySearcher(Entry)
        Searcher.SearchScope = DirectoryServices.SearchScope.Subtree
        Searcher.Filter = "(&(objectcategory=user)(SAMAccountName=" & user & "))"
        Dim res As SearchResult = Searcher.FindOne

        For i = 0 To res.Properties("primaryGroupID").Count() - 1
            grupoID = (res.Properties("primaryGroupID")(i).ToString) 'Esto devuelve la ruta "CN" del grupo
            'grupoID = (res.Properties("primaryGroupID")(i).ToString)
            'Dim de As DirectoryEntry = New DirectoryEntry("LDAP://" + res.Properties("primaryGroupID")(i).ToString())
        Next
    Catch ex As Exception
    End Try
    Return grupoID
End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T13:49:55.733

这里有一个 VBScript 示例 - [http://support.microsoft.com/kb/297951](http://support.microsoft.com/kb/297951)。

本质上，主要组 ID 是组的 RID（SID 的最后一个组成部分）。因此，要查找组，请将域 SID 和主组 ID 连接在一起。

# spring - 非 JSR303 等效于 Spring 3.x 中的 @Valid 注释？

> ID：11014713
> 
> 赞同：2
> 
> 时间：2012-06-13T12:21:11.080
> 
> 标签：spring, validation, spring-mvc

简单明了的问题：

*   我想用某种可以**触发常规弹簧验证机制的注释来****注释我的方法参数**（基于接口）**`Validator`**
***   **我不想**包含 JSR303 依赖项**

 **有任何想法吗？我看了看，`@Validated`但似乎它不是为此目的而创建的。

现在我这样做：

```
public String req(@ModelAttribute SomeRequest request, BindingResult errors) {
        validator.validate(request, errors); // This can be avoided
        if (!errors.hasErrors()) {
            // Valid request
            return ...
        } else {
            // There were errors 
            return ...
        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T12:35:29.660

在这种情况下，您需要使用**@interface**创建自定义注释，然后使用它而不是标准的 @Valid 注释，并在运行时识别它并相应地验证您的字段。希望这对您有所帮助。干杯。**

# windows-phone-7 - 在页面之间导航时传递数据 onNavigatedTo 在 Windows Phone 7 中找不到合适的方法来覆盖

> ID：11014715
> 
> 赞同：3
> 
> 时间：2012-06-13T12:21:17.460
> 
> 标签：windows-phone-7, navigation, parameter-passing, overriding

我试图在页面之间导航时传递一个参数..在我拥有的第一页中：

```
private void companyGrid_Tap(object sender, GestureEventArgs e)
    {
        String tempVal = "";
        tempVal = "PassVal";
        NavigationService.Navigate(new Uri("/ComPage.xaml?comID=" + tempVal, UriKind.Relative));
    } 
```

在下一页我有：

```
protected override void onNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)
    {
        base.OnNavigatedTo(e);
        String strId = NavigationContext.QueryString["comID"];

    } 
```

但我收到一个关于覆盖“onNavigatedTo”的错误，mathod 说：“没有找到合适的方法来覆盖”

我检查并且所有示例都显示了传递参数的相同方式...也许有人知道它不起作用的原因是什么？？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T12:25:15.593

我现在不在我的桌面上，所以不能 100% 确定，但它不应该是 OnNavigatedTo （开头的大写 O）吗？

所以你会有：

```
protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)
{
    base.OnNavigatedTo(e);
    String strId = NavigationContext.QueryString["comID"];
} 
```

# verilog - 在verilog中实现定点乘法器

> ID：11014718
> 
> 赞同：-1
> 
> 时间：2012-06-13T12:21:21.830
> 
> 标签：verilog, fixed-point

我需要设计一个在verilog中计算相关性的系统，我只能使用有限位数的定点计算。所以我需要实现一个定点乘法器，它的位数少于输入的总和（输入的长度和小数位数相同）。

关键是我不能只是将它们正常相乘然后减少位。那么有什么特别的方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T10:01:58.243

`A=B*C`工作得很好——你必须在整个计算过程中跟踪二进制点的位置。但这只是预订。

如果您希望编译器为您记账，请使用 VHDL 和标准（自 VHDL-2008 起）[fixed_point 包](http://www.eda.org/fphdl/)

# javascript - 当我将 html 添加到我的模板时，Mustache 停止显示数据。关于如何解决的任何想法？

> ID：11014719
> 
> 赞同：0
> 
> 时间：2012-06-13T12:21:25.043
> 
> 标签：javascript, jquery, cordova, mustache

这是我的模板，只要我删除它的 html 标签，它就可以工作，但我需要 html 标签进行样式设置。

```
<p>{{username}}</p> 
```

这就是我加载/显示模板的方式

```
 $.get('app/templates/login.htm', function(template) {
            var templateData = {
                username: "eelke"
            };
            $('#container').append(Mustache.render(template, templateData));
            alert('Load was performed.');
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T13:20:04.663

`dataType: 'html'`在 ajax 调用中添加一个选项

```
$.ajax({
    url: 'app/templates/login.htm',
    dataType: 'html',
    success: function(template) {
        var templateData = {
            username: "eelke"
        };
        $('#container').append(Mustache.render(template, templateData));
        alert('Load was performed.');
    }
); 
```

# php - 在 Facebook 群组的墙上发布消息

> ID：11014722
> 
> 赞同：0
> 
> 时间：2012-06-13T12:21:49.410
> 
> 标签：php, facebook, facebook-graph-api

是否可以使用图形 API 在群组的墙上发布消息？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T12:25:58.760

是的，前提是您的用户是成员并且已允许您的应用具有 publish_stream 权限。

[https://developers.facebook.com/docs/reference/api/group/#posts](https://developers.facebook.com/docs/reference/api/group/#posts)

# wpf - 如何在 WPF XAML 中的多重绑定中使用 stringformat

> ID：11014723
> 
> 赞同：17
> 
> 时间：2012-06-13T12:22:00.197
> 
> 标签：wpf, xaml, binding, wpf-controls

如您所知，StringFormat 对于 WPF 中的数据表示非常重要。我的问题是如何在 WPF 中进行多重绑定时使用 StringFormat？

如果我举一个非常简单的例子：

我们有变量，它们是 A 和 B，其值为 10.255555 和 25.6999999

我们想向他们展示`10.2,25.6`？

如何使用多重绑定来做到这一点？通常使用 ValueConverter 是小菜一碟

任何有关此主题的帮助和想法将不胜感激

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-06-13T12:25:47.957

只需在;上设置`StringFormat`属性 `MultiBinding`为多重绑定中的每个绑定使用占位符（{0}、{1}...），并在必要时包含格式说明符（例如，F1 表示具有 1 个十进制数字的十进制数）

```
<TextBlock>
    <TextBlock.Text>
        <MultiBinding StringFormat="{}{0:F1}{1:F1}">
            <Binding Path="A" />
            <Binding Path="B" />
        </MultiBinding>
    </TextBlock.Text>
</TextBlock> 
```

`{}`开头的部分是格式字符串是转义序列（否则 XAML 解析器会认为`{`是标记扩展的开头）

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-09-24T06:45:35.710

如果有人正在寻找“时间格式”，这是 24 小时制，这就是我来这篇文章的方式：

```
<TextBlock TextAlignment="Center">
    <TextBlock.Text>
        <MultiBinding StringFormat="{}{0:HH:mm} - {1:HH:mm}">
             <Binding Path="StartTime" />
             <Binding Path="EndTime" />
        </MultiBinding>
    </TextBlock.Text>
</TextBlock> 
```

前导 0: 和 1: 是对 Bindings 的引用

[0:hh:mm tt] 显示 AM/PM

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-13T15:40:18.747

为简化起见，您可以使用两个 TextBlock/Labels 来显示值。

如果您使用的是 .Net4，则可以在 TextBlock 的 Run Inline 元素中绑定

```
<TextBlock>
    <Run Text="{Binding A, StringFormat={}{0:F1}}"/>
    <Run Text="{Binding B, StringFormat={}{0:F1}}"/>
</TextBlock> 
```

# html - 两个div之间的空间

> ID：11014724
> 
> 赞同：20
> 
> 时间：2012-06-13T12:22:02.890
> 
> 标签：html, css, space

我的问题是我有两个（或更多）同一类的 div，它们需要彼此隔开。但是，我不能直接使用边距，因为最后一个或第一个元素也会应用边距，这是我不想要的。

![例子](../Images/8117a487a981d6a1782c58fc4d329977.png)
-绿色是我想要的空间
-红色是我不想要的地方

由于我能想到的唯一解决方案很复杂/涉及对值进行硬编码，我希望有人能想到一个聪明、简单的解决方案来解决这个问题。

**详细信息**：有时这些 div 会单独出现，并且在极少数情况下会浮动。

任何关于上述想法如何更好的建议、任何新想法或只是一般的帮助将不胜感激；）

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-06-13T12:25:27.967

您可以尝试以下方法：

```
h1{
   margin-bottom:<x>px;
}
div{
   margin-bottom:<y>px;
}
div:last-of-type{
   margin-bottom:0;
} 
```

或者代替第一条`h1`规则：

```
div:first-of-type{
   margin-top:<x>px;
} 
```

甚至更好地使用[相邻的兄弟选择器](http://www.w3.org/TR/CSS2/selector.html#adjacent-selectors)。使用以下选择器，您可以在一条规则中涵盖您的情况：

```
div + div{
   margin-bottom:<y>px;
} 
```

分别`h1 + div`控制标题后的第一个 div，为您提供额外的样式选项。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-13T12:33:36.557

如果您不需要支持 IE6：

```
h1 {margin-bottom:20px;}
div + div {margin-top:10px;} 
```

第二行在 div 之间添加间距，但不会在第一个 div 之前或最后一个 div 之后添加任何间距。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-13T12:29:33.050

为什么不使用保证金？您可以将所有类型的边距应用于元素。不仅仅是它周围的整个边距。

您应该使用 css 类，因为它引用了多个元素，并且您可以将 id 用于那些您想要特别不同的元素

IE：

```
<style>
.box { height: 50px; background: #0F0; width: 100%; margin-top: 10px; }
#first { margin-top: 20px; }
#second { background: #00F; }
h1.box { background: #F00; margin-bottom: 50px;  }
</style>

<h1 class="box">Hello World</h1>
<div class="box" id="first"></div>
<div class="box" id="second"></div>​ 
```

这是一个jsfiddle示例：

*   [http://jsfiddle.net/baXmu/2/](http://jsfiddle.net/baXmu/2/)

参考：

*   [http://www.html.net/tutorials/css/lesson10.php](http://www.html.net/tutorials/css/lesson10.php)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-13T12:41:53.287

DIV 本质上没有任何有用的意义，当然，除了分割。

最好的做法是为它们添加一个有意义的类名，并在 CSS 中设置它们各自的边距。

```
<h1>Important Title</h1>
<div class="testimonials">...</div>
<div class="footer">...</div>

h1 {margin-bottom: 0.1em;}
div.testimonials {margin-bottom: 0.2em;}
div.footer {margin-bottom: 0;} 
```

# android - Android Imageswitcher：定期切换图像？

> ID：11014729
> 
> 赞同：4
> 
> 时间：2012-06-13T12:22:18.463
> 
> 标签：android, loops, timer, imageswitcher

我正在使用带有 TouchListener 的 ImageSwitcher 来更改数组中的图像。它工作正常，但我希望它每隔 x 秒左右切换一次图像，以便我可以添加`imageSwitcher.setImageResource(imageList[curIndex]);`它。

有什么建议么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-13T12:30:34.717

试试这个，

```
 imageSwitcher.postDelayed(new Runnable() {
            int i = 0;
            public void run() {
                imageSwitcher.setImageResource(
                    i++ % 2 == 0 ?
                        R.drawable.image1 :
                        R.drawable.mage2);
                imageSwitcher.postDelayed(this, 1000);
            }
        }, 1000); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-13T12:29:43.440

我认为可以通过 TimerTask 和 Timer。请尝试此代码。我认为它可以帮助你。

```
 private Handler mHandler;
    private Runnable mUpdateResults;
         private Timer timerAnimate;
        private TimerTask timerTask;
        mHandler = new Handler();
        mUpdateResults = new Runnable() {
            public void run() {
                AnimateandSlideShow();
            }
        };

        int delay = 0;
        int period = 15000;
        timerAnimate = new Timer();
        timerTask = new TimerTask() {
            public void run() {
                mHandler.post(mUpdateResults);
            }
        };
        timerAnimate.scheduleAtFixedRate(timerTask, delay, period);

         Public void AnimateandSlideShow()
               {
                imageSwitcher.setImageResource(imageList[curIndex]);
               ///Here You need To handle curIndex position.
                } 
```

# javascript - 如何解决 JSCallback Server Closed: Stopping callbacks

> ID：11014732
> 
> 赞同：2
> 
> 时间：2012-06-13T12:22:35.433
> 
> 标签：javascript, android, jquery-mobile, callback, cordova

嗨，我收到错误消息

当我调用 HTML 文件时，我正在使用这种方法

```
url:'http://abcccc/'+data.userId,
success:function(userInfo){
$.cookie('iTouchUser', JSON.stringify(userInfo));
// window.location='list.html';    (i've try this method also)
window.location.replace('file:///android_asset/www/list.html'); 
```

我得到的错误信息是

```
 DroidGap(991): DroidGap.loadUrl(file:///android_asset/www/list.html)
 DroidGap(991): DroidGap: url=file:///android_asset/www/list.html baseUrl=file:///android_asset/www/
 PluginManager(991): init()
 CordovaLog(991): JSCallback Server Closed: Stopping callbacks.
 CordovaLog(991): file:///android_asset/www/cordova-1.8.0.js: Line 3708 : JSCallback Server Closed: Stopping callbacks.
 Web Console(991): JSCallback Server Closed: Stopping callbacks. at file:///android_asset/www/cordova-1.8.0.js:3708 
```

我已经在它的 cordova-1.8.0.js:3708 中检查了它

```
// If server is stopping
          else if (xmlhttp.status === 503) {
              console.log("JSCallback Server Closed: Stopping callbacks.");
          } 
```

任何人都知道如何解决这个错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T12:40:53.857

对于 Android，请尝试使用`navigator.app.loadUrl('url')`而不是`window.location`

# jakarta-ee - “暂时移动”错误 Google Latitude API

> ID：11014734
> 
> 赞同：0
> 
> 时间：2012-06-13T12:22:37.547
> 
> 标签：jakarta-ee, post, oauth-2.0

所以这似乎是人们看到的常见错误，但我不知道如何解决它！我正在尝试在 Eclipse 中编写一个简单的 Java EE 应用程序（使用 JBoss v7.1），并且遇到了似乎没有尽头的麻烦！我终于明白了似乎是最后的障碍；获取访问令牌。

我正在“手动”编程它；自己设置http帖子：

```
 @WebServlet("/callback") //user has accepted the authentication, and the auth code is sent to this url
    public class CallBackServlet extends HttpServlet {

            //my vars
            private static final String clientId = "123.apps.googleusercontent.com";
            private static final String clientSecret = "123abc";
            private static final String redirectUri = "http://localhost:8080/WebProjectA/callback";

        protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

                String code = request.getParameter("code"); //grabs the auth code

                //set up http post
                HttpClient client = new HttpClient( );
                String postUrl = "/o/oauth2/token"; 
                HostConfiguration hf=new HostConfiguration();
                hf.setHost("accounts.google.com"); //problems start here. Anything other than "accounts.google.com" results in an 'unknown host' exception

        PostMethod postData = new PostMethod(postUrl);      
        postData.setHostConfiguration(hf);

                //add post message parameters
        postData.addParameter(URLEncoder.encode("code"), URLEncoder.encode(code));
        postData.addParameter(URLEncoder.encode("client_id"), URLEncoder.encode(clientId));
        postData.addParameter(URLEncoder.encode("client_secret"), URLEncoder.encode(clientSecret));
        postData.addParameter(URLEncoder.encode("redirect_uri"), URLEncoder.encode(redirectUri));
        postData.addParameter(URLEncoder.encode("grant_type"), URLEncoder.encode("authorization_code"));

        client.executeMethod(postData);
        String postResponseb = postData.getResponseBodyAsString( );
        out.println(postResponseb); //print the info to the browser
        postData.releaseConnection( );
            }
    } 
```

重定向消息希望我使用“https://accounts.google.com”主机，但是当我将“accounts.google.com”以外的任何内容作为主机时，我得到一个未知主机异常。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T04:33:52.277

`hf.setHost("accounts.google.com",-1,"HTTPS");`您可以在调用方法时传递协议。请参阅 Java 文档。http中的默认协议。

# c# - 自动重新排列aspx页面中的布局

> ID：11014736
> 
> 赞同：0
> 
> 时间：2012-06-13T12:22:45.620
> 
> 标签：c#, asp.net, html, css, silverlight

我有一个 aspx 页面，最初我将在其中定义布局（比如 3x3 的表格）和每个包含内容的单元格中的相应 div。

这是由管理员配置的。所以当管理员登录时，我会显示所有配置的项目。但是如果登录的用户不是管理员（比如其他角色），那么这个用户可能没有查看所有内容的权限（例如单元格4和7中的内容不应该显示）。

在这种情况下，我如何使页面由其他单元格内容占据单元格 4 和单元格 7 的空白空间？是否有任何 CSS 样式/asp 控件可以自动处理这种场景？

我可以在 Silverlight/WPF 中使用主 StackPanel 并将每一行定义为子 StackPanel 并将面板和控件的垂直/水平对齐属性设置为“拉伸”。但是我怎样才能在asp.net中实现这一点？

# c# - 使用 C# 将 PPS/PPT 文件另存为 SWF

> ID：11014738
> 
> 赞同：0
> 
> 时间：2012-06-13T12:22:51.290
> 
> 标签：c#, flash, save, powerpoint

我想构建一个将 pps\ppt 文件保存为 SWF 的 C# 应用程序。为了将 pps\ppt 保存为图像，我使用以下代码：

```
Application apps = new Application();
Presentations pps = apps.Presentations;

    foreach (string file in Directory.GetFiles("[here is a path]", "*.ppt"))
    {
          try
          {
          Presentation p = pps.Open(file, MsoTriState.msoFalse, MsoTriState.msoFalse, MsoTriState.msoFalse);
          p.SaveAs("[here is a path]" + p.Name, PpSaveAsFileType.ppSaveAsJPG); //It saves the slides as images in a folder.
          Console.WriteLine(id.ToString() + ". " + p.Name);
          p.Close();
          id++;
          }
          catch{ }
    } 
```

**那么，如何将文件夹中的 pps\ppt 文件保存为 SWF？** 没有这个：`PpSaveAsFileType.ppSaveAsSWF`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T17:57:36.830

不，您不能使用 PowerPoint API。

要将 PowerPoint 文件转换为 Flash，您必须寻找销售特定 API 的软件供应商。

无论如何，并非所有 PowerPoint 对象/功能都受支持，因此您可能会丢失某些内容。

当然，如果你自己开发一个应用程序也可以做到，但你需要强大的 PowerPoint API 和 Flash 知识，从 Flash 访问 pptx (openxml) 文件......这是一项工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-21T16:02:53.060

您需要使用一些具有 C# API 的第三方软件来转换 PPT 文件。为此，我使用 print2flash。如果我从我的真实 C# 应用程序中省略一些选项，我使用的核心转换代码非常简单

```
Print2Flash4.Server2 serv = new Print2Flash4.Server2();
Print2Flash4.Profile2 prof = new Print2Flash4.Profile2();
prof.DocumentType = Print2Flash4.DOCUMENT_TYPE.FLASH;
serv.ConvertFile(inputfile, swf_file, prof, null, null); 
```

要使用此代码，您还需要获取 Interop.Print2Flash4.dll。[您可以从可从http://print2flash.com/download.php](http://print2flash.com/download.php)下载的 sdk 获取 dll 和进一步说明

# xtk - XTK 可以渲染的最大点数？

> ID：11014742
> 
> 赞同：0
> 
> 时间：2012-06-13T12:23:00.333
> 
> 标签：xtk

根据 [http://lessons.goxtk.com/09/][1]

[1]：[http](http://lessons.goxtk.com/09/) : //lessons.goxtk.com/09/ 我需要使用 .vtk 文件，分数为 15,000。加载点花了太长时间，最后firefox崩溃了。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T13:55:27.987

您可以尝试只显示点而不将它们转换为球体，所以基本上只需这样做：

```
var ren = new X.renderer3D();
ren.init();

var points = new X.mesh();
points.file = 'yourfile.vtk';

ren.add(points);
ren.render(); 
```

如果可行，您可以调整点大小以使点看起来更大[http://api.goxtk.com/mesh.html#pointsize_get](http://api.goxtk.com/mesh.html#pointsize_get)

另外，你能在 JSFiddle 中展示你的问题吗？

# c - 在C中输入文件双指针

> ID：11014750
> 
> 赞同：-1
> 
> 时间：2012-06-13T12:23:34.233
> 
> 标签：c, file, pointers, file-io

我在我的代码中遇到了一些问题，我无法修复它。任何人都可以发现 mycode 中的缺陷吗？我想从输入文件中获取城市距离并在地图中复制城市名称而不重复。我的问题是分段错误。输入文件由几行两个城市名称和它们之间的距离组成，我尝试获取城市名称并将它们复制到名为 map 的双指针。PS对不起英语不好

```
city1[0]  = (char*)malloc(sizeof(char)*10);                     
city2[0]  = (char*)malloc(sizeof(char)*10);
map[0] = (char*)malloc(sizeof(char)*10);
map[1] = (char*) malloc(sizeof(char)*10);
map[2] = (char*) malloc(sizeof(char));
map[2] = NULL;
fscanf(data, "%s %s %d", city1[0], city2[0], &distance);
strcpy(map[0],city1[0]);
strcpy(map[1],city2[0]);                  
j=2,i=1;
while(fscanf(data, "%s %s %d",city1[i],city2[i], &distance)!=EOF){
    city1[i+1] = (char*)malloc(sizeof(char) *10);
    city2[i+1] = (char*)malloc(sizeof(char)*10);
    if(checker(map,city1[i])==1){
        map = realloc(map, sizeof(char*)*(j));
        map[j] = (char*) malloc(sizeof(char));
        strcpy(map[j], city1[i]);
        map[j+1] = (char*) malloc(sizeof(char));
        map[j+1] != NULL;
        j++;
    }
    if(checker(map,city2[i])==1){
        map = realloc(map, sizeof(char*)*(j));
        map[j] = (char*) malloc(sizeof(char));
        map[j+1] = (char*) malloc(sizeof(char));
        strcpy(map[j], city2[i]); 
        map[j+1] = NULL;   j++;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T12:25:40.023

显示您正在使用的变量的定义。

我认为您对使用`malloc()`动态分配字符串空间有一些误解。您正在为单个字符分配空间，使用多次调用`malloc()`. 这似乎很混乱。

另外，请尝试更清楚地了解您的代码应该做什么。

# asp.net - 输出缓存动态生成的 CSS

> ID：11014751
> 
> 赞同：4
> 
> 时间：2012-06-13T12:23:45.580
> 
> 标签：asp.net, asp.net-mvc, http-caching

在我的应用程序中，用户可以选择修改其站点的 CSS。

这不太可能经常改变，但是当它发生时，我们需要确保他们和他们的网站访问者能够立即看到结果。

我们确实记录了用户更新 CSS 的日期和时间，因此一个简单的解决方案就是在 url 上附加一个时间戳。

但是，我想知道是否可以以编程方式设置缓存标头以强制浏览器在 CSS 文件更改时重新请求它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T12:27:48.410

如果您在网址中包含哈希，即

```
http://server.example.com/styles/css.css?hash 
```

它会在哈希更改时重新加载，因为浏览器将从新的 url 获取它：

版本 1：

```
<style type="text/css" link="styles/css.css?hash=v1" /> 
```

版本 2：

```
<style type="text/css" link="styles/css.css?hash=v2" /> 
```

客户端缓存是客户端的事情，让他们按照他们认为合适的方式进行操作：新的 URL 意味着资源已更改，因此需要重新加载。由于不同的客户端实现，使用缓存控制标头保持相同的 URL 可能会让您陷入痛苦的境地。

如果您放置缓存控制标头（last-modified、expires、ETAG），您无法确定 CSS 在更改时是否会刷新：

*   因为激进的浏览器（或代理）缓存可能会忽略这些。
*   因为您可能在 5 月 1 日提供 V1，到期日期为 6 月 1 日，在 5 月 15 日更新到 V2，您的客户将需要等待 15 天才能获得新版本。

使用 url 哈希，最坏的情况是客户端不会将您的 css 放入缓存中，但不会改变用户体验，因为他们总是获得最新版本。

对于到期日期或最后修改日期，最坏的情况是客户端获得旧版本，这将改变用户体验:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T13:06:18.913

感谢 Mathieu 的回复，我正在使用输出缓存和版本号的组合来处理缓存失效。

输出缓存配置文件：

我创建了以下用于附加时间戳的扩展方法：

```
 public static string AppendTimeStamp(this string src, DateTime lastModified)
    {
        if (string.IsNullOrEmpty(src))
            return src;

        return string.Format("{0}?v={1}", src, lastModified.ToString("yyyyMMddHHmmss"));
    } 
```

用法：

```
<link rel="stylesheet" href="@Url.Content("~/assets/usercss").AppendTimeStamp(CustomizationSettings.LastModified)"/> 
```

如果您不想缓存文件，您可以将`DateTime.UtcNow`其作为最后修改日期传递。

# java - 当浏览器/选项卡获得焦点时，将焦点恢复到 Java Applet

> ID：11014753
> 
> 赞同：1
> 
> 时间：2012-06-13T12:23:54.030
> 
> 标签：java, javascript, html, dom, applet

我有一个在浏览器选项卡中运行的小程序。当我在同一个浏览器中切换到不同的选项卡，或 ALT-TAB 完全切换到另一个应用程序时，小程序失去焦点。当我返回浏览器选项卡时，小程序不再获得焦点。有没有很好的方法来实现这一点？

我认为这是需要的 JavaScript 更改，而不是小程序本身？也许是一些 onFocus 处理程序？如果相关，我们的小程序是使用 HTML`<applet>`标记创建的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T14:13:40.043

我相信java有`requestFocus()`方法。它在 Component 类中，因此您的 JPanel 或您正在使用的任何东西都可以使用它。

对于 javascript 部分，这是快速谷歌搜索所揭示的内容：[http](http://www.raditha.com/java/javascript.php) ://www.raditha.com/java/javascript.php 。我希望它对你有帮助！

# ruby - 创建一个受红宝石保护的环境

> ID：11014756
> 
> 赞同：3
> 
> 时间：2012-06-13T12:24:01.693
> 
> 标签：ruby

虽然 ruby​​ 确实允许在代码中的任何位置修改任何类，但我想知道是否有可能创建一个类似于受保护环境的沙箱来运行一些第三方代码，以便将其余应用程序代码与对预定义类/标准库类。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T12:54:27.757

您可以使用 Ruby 的安全级别：

[http://www.ruby-doc.org/docs/ProgrammingRuby/html/taint.html](http://www.ruby-doc.org/docs/ProgrammingRuby/html/taint.html)

以下是安全级别 4 及以上的说明：

> Ruby 有效地将正在运行的程序一分为二。不得修改未污染的对象。通常，这将用于创建沙箱：程序使用较低的 $SAFE 级别设置环境，然后将 $SAFE 重置为 4 以防止对该环境进行后续更改。

# android - Android，函数 sms.sendMultipartTextMessage 无法在日本发送消息

> ID：11014758
> 
> 赞同：3
> 
> 时间：2012-06-13T12:24:14.050
> 
> 标签：android, sms

我用这个功能发短信，在国内可以正常使用，但是在日本，3G电信网络就不行了。有谁知道这两个问题？请帮我

# jquery - 在呈现的 HTML 中标记复选框

> ID：11014759
> 
> 赞同：1
> 
> 时间：2012-06-13T12:24:14.410
> 
> 标签：jquery, python, django

我有以下场景：

*   用户加载`home.html`，选择五个复选框中的一个子集，然后单击提交。
*   用户登陆`stats.html`，这将显示与所选复选框相关的值，并将特定复选框标记为 CHECKED。

我将一个名为“itemsToCheck”的变量传递给`stats.html`模板，其中包含以下内容：

```
[(u'8', u'on'), (u'7', u'on')] 
```

这些值应该可以帮助我选择这样的特定复选框：

```
<input type="checkbox" checked="yes" name="{{ MyModel.id }}"/> 
```

你将如何实现这一点（使用模板语法，比如`checked={% something %}`jQuery 或者可能是 jQuery）？

我是 Django/web 开发初学者，所以如果我的方法完全错误以及是否有更清洁/更优雅的解决方案，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T12:28:29.677

如果您传递 a dict 而不是列表，这将起作用：

```
itemsToCheck = {7: 'on', 8: 'on'}

<input type="checkbox" {% if MyModel.id in itemsToCheck.keys %}checked="checked"{% endif %} name="{{ MyModel.id }}"/> 
```

对于描述的列表：

```
[(8, 'on'), (9, 'on')] 
```

你将不得不做更多的处理。

编辑：或者如果dict键是字符串：

```
{% if MyModel.id|stringformat:"s" in itemsToCheck.keys %} 
```

或者只是准备 itemsToCheck 格式以跳过转换......

编辑2：实际上，我会在这里使用标签：

```
@register.inclusion_tag('checkbox.html')
def my_checkboxes(request, items):
    return {"items": [{'id': i.id, 'checked': request.POST[str(i.id)] == 'on'} for i in items]} 
```

然后在 checkbox.html 中：

```
{% for i in items %}
<input type="checkbox" {% if i.checked %}checked="checked"{% endif %} name="{{ i.id }}"/>
{% endfor %} 
```

# javascript - self.el 与 this.el

> ID：11014761
> 
> 赞同：1
> 
> 时间：2012-06-13T12:24:17.873
> 
> 标签：javascript, jquery, backbone.js

我正在关注一个[主干.js 教程](http://coenraets.org/blog/2011/12/backbone-js-wine-cellar-tutorial-part-2-crud/)，遇到了 2 个函数`initialize()`和`render()`. `initialize()`在使用`$(self.el).append()`时附加一些 html 时`render()`使用`$(this.el).append()`。我对差异感到困惑，希望得到解释，谢谢！

**JS代码**

```
// Views
window.WineListView = Backbone.View.extend({

    tagName:'ul',

    initialize:function () {
        this.model.bind("reset", this.render, this);
        var self = this;
        this.model.bind("add", function (wine) {
            $(self.el).append(new WineListItemView({model:wine}).render().el);
        });
    },

    render:function (eventName) {
        _.each(this.model.models, function (wine) {
            $(this.el).append(new WineListItemView({model:wine}).render().el);
        }, this);
        return this;
    }
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T12:26:06.040

第一个用于在事件触发时`self`保留`this`对范围何时更改的引用。在匿名函数内部（对于事件处理程序），`this`将引用触发事件的元素，而不是您的 Backbone 控制器。

在第二种情况下不需要引用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T12:38:44.853

原因在于 JavaScript 如何处理作用域。

在他们做的初始化函数中

```
var self = this; 
```

因此，当他们将引用绑定到已初始化的 WineListView 实例时

```
this.model.bind("add", function (wine) {
    $(self.el).append(new WineListItemView({model:wine}).render().el);
 }); 
```

但是，如果您将“this”作为第三个参数发送，则可以在没有 self 变量的情况下完成。第三个参数应指示应在其中调用回调的范围

```
this.model.bind("add", function (wine) {
    $(this.el).append(new WineListItemView({model:wine}).render().el);
 }, this); 
```

如果你看那里的render is bind，它也使用了第三个参数

```
this.model.bind("reset", this.render, this); 
```

Disclamer 我没有尝试过代码，但是通过阅读骨干网 [http://backbonejs.org/#FAQ-this上的文档得到了这个](http://backbonejs.org/#FAQ-this)

# php - 如何使用 php 在 mysql 的字幕中显示多个新闻

> ID：11014769
> 
> 赞同：0
> 
> 时间：2012-06-13T12:24:47.150
> 
> 标签：php, mysql

我在从 mysql 检索数据以显示在 marquee 中时遇到问题，当我转到我的网页时，它仅显示 marquee 中数据库中的一个数据。我的问题是如何检索所有存储的数据。谢谢下面是代码部分：

```
$select="SELECT newsid, headlines from news WHERE uploaddate order by uploaddate desc limit 4";
$rsd=mysql_query($select);

while($row = mysql_fetch_array($rsd))
{
    $newsid=$row['newsid'];
    $tittle=$row['headlines'];
    $uploaddate=$rowdata['uploaddate'];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T12:28:35.117

“只有一个数据”是什么意思？

也许问题就在这里

```
while($row = mysql_fetch_array($rsd))
{
    $newsid=$row['newsid'];
    $tittle=$row['headlines'];
    $uploaddate=$rowdata['uploaddate'];
} 
```

这样，您将一遍又一遍地覆盖变量，因此在循环结束时，您将仅获得最后一条记录值。

一种可能的解决方案是制作一个（数组）数组并将数据存储到其中。

所以

```
$result = array()
while($row = mysql_fetch_array($rsd))
{
    $result[] = array('news_id' => $row['newsid'],
                      'title' => $row['headlines'],
                      'upload_date' => $rowdata['uploaddate']);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T12:36:42.000

你试试这个..

```
 while($row = mysql_fetch_array($rsd))
    {
        $newsid=$row['newsid'];
        $tittle=$row['headlines'];
        $uploaddate=$rowdata['uploaddate'];
        $cont.="<a href='newpage.php?$newsid'>$title - $uploaddate</a>";
    }
    echo "<marquee>$cont</marquee>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T12:30:55.200

最有可能的问题是您一遍又一遍地写入相同的变量

```
while($row = mysql_fetch_array($rsd))
{
    $newsid=$row['newsid'];
    $tittle=$row['headlines'];
    $uploaddate=$rowdata['uploaddate'];
} 
```

你最终会得到最后一个值newsid、标题和上传日期，所以我建议你在循环中回显数据。例子：

```
while($row = mysql_fetch_array($rsd))
{
    $newsid=$row['newsid'];
    $tittle=$row['headlines'];
    $uploaddate=$rowdata['uploaddate'];
    printf('<a href="/news.php?story=%d">%s</a> - on %s',$newsid,$title,$uploaddate);
} 
```

或者将数据存储到数组中

```
$stories = array();
while($row = mysql_fetch_array($rsd))
{
    $stories[] = $row;
} 
```

# c# - ContentControl 在应用程序通过 UI 自动化测试启动时不可见，但在用户启动应用程序时可见

> ID：11014771
> 
> 赞同：11
> 
> 时间：2012-06-13T12:25:03.033
> 
> 标签：c#, wpf, xaml, devexpress, ui-automation

我们正在使用 prism 和 WPF 来构建应用程序。最近我们开始使用 UI 自动化 (UIA) 来测试我们的应用程序。但是当我们运行 UIA 测试时发生了一些奇怪的行为。这是简化的外壳：

```
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*"/>
    </Grid.ColumnDefinitions>    
    <Grid.RowDefinitions>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>

    <TextBlock 
        Grid.Row="0" Grid.Column="0"
        Name="loadingProgressText"
        VerticalAlignment="Center" HorizontalAlignment="Center"
        Text="Loading, please wait..."/>

    <Border
        Grid.Row="0" 
        x:Name="MainViewArea">
        <Grid>
            ...
        </Grid>
    </Border>

    <!-- Popup -->
    <ContentControl 
        x:Name="PopupContentControl"
        Grid.Row="0" 
        prism:RegionManager.RegionName="PopupRegion"
        Focusable="False">
    </ContentControl>

    <!-- ErrorPopup -->
    <ContentControl 
        x:Name="ErrorContentControl"
        Grid.Row="0" 
        prism:RegionManager.RegionName="ErrorRegion"
        Focusable="False">
    </ContentControl>
</Grid> 
```

在我们的应用程序中，我们使用图层 (`Popup`和`ErrorPopup`) 来隐藏**MainViewArea**，以拒绝对控件的访问。为了显示`Popup`，我们使用下一个方法：

```
 //In constructor of current ViewModel we store _popupRegion instance to the local variable:
    _popupRegion = _regionManager.Regions["PopupRegion"];
    //---

    private readonly Stack<UserControl> _popups = new Stack<UserControl>();
    public void ShowPopup(UserControl popup)
    {
        _popups.Push(popup);

        _popupRegion.Add(PopupView);
        _popupRegion.Activate(PopupView);
    }

    public UserControl PopupView
    {
        get
        {
            if (_popups.Any())
                return _popups.Peek();
            return null;
        }
    } 
```

与此类似，我们展示`ErrorPopup`了应用程序的所有元素：

```
 // In constructor we store _errorRegion:
    _errorRegion = _regionManager.Regions["ErrorRegion"]
    // --- 

    private UserControl _error_popup;

    public void ShowError(UserControl popup)
    {
        if (_error_popup == null)
        {
            _error_popup = popup;
            _errorRegion.Add(_error_popup);
            _errorRegion.Activate(_error_popup);
        }
    } 
```

**微信...**

当我们像用户一样运行它时（双击应用程序图标），我们可以看到两个自定义控件（使用`AutomationElement.FindFirst`方法，或通过[Visual UI 自动化验证](http://uiautomationverify.codeplex.com/)）。但是当我们使用 UI 自动化测试启动它时 -`ErrorPopup`从控件树中消失。我们尝试像这样启动应用程序：

```
System.Diagnostics.Process.Start(pathToExeFile); 
```

我认为我们错过了一些东西。但是什么？

**编辑#1**

正如@chrismead 所说，我们尝试在`UseShellExecute`标志设置为 true 的情况下运行我们的应用程序，但这无济于事。但是，如果我们从**cmd**行启动应用程序，并手动单击按钮，`Popup`并且`ErrorPopup`在自动化控件树中可见。

```
 Thread appThread = new Thread(delegate()
        {
            _userAppProcess = new Process();
            _userAppProcess.StartInfo.FileName = pathToExeFile;
            _userAppProcess.StartInfo.WorkingDirectory = System.IO.Directory.GetCurrentDirectory();
            _userAppProcess.StartInfo.UseShellExecute = true;
            _userAppProcess.Start();

        });
        appThread.SetApartmentState(ApartmentState.STA);
        appThread.Start(); 
```

我们的建议之一是当我们使用方法`FindAll`或`FindFirst`搜索要单击的按钮时，窗口以某种方式缓存其 UI 自动化状态，并且不更新它。

**编辑#2** 我们发现，prism 库的扩展方法`IRegionManager.RegisterViewWithRegion(RegionNames.OurRegion, typeof(Views.OurView))`有一些奇怪的行为。如果我们停止使用它，这将特别解决我们的问题。现在我们可以看到 ErrorView 和任何类型的视图`PopupContentControl`，并且应用程序更新 UIA 元素树结构。但这不是答案——“停止使用此功能”！

在`MainViewArea`我们有一个`ContentControl`，它根据用户操作更新它的内容，我们只能看到第一个加载`UserControl`到该`ContentControl.Content`属性。这是这样执行的：

```
IRegionManager regionManager = Container.Resolve<IRegionManager>();
regionManager.RequestNavigate(RegionNames.MainContentRegion, this.Uri); 
```

如果我们更改视图，UI 自动化树中不会执行任何更新 - 第一个加载的视图将在其中。但是在视觉上我们观察到另一个`View`，并且[WPFInspector](http://wpfinspector.codeplex.com/releases/view/64045)正确显示它（它显示不是 UI 自动化树），但 Inspect.exe - 不是。

此外，我们关于窗口使用某种缓存的建议是错误的——在 UI 自动化客户端中的缓存我们必须显式打开，但我们不这样做。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-22T06:26:16.240

很抱歉我错过了一些细节，这是答案的关键。我认为这不是重要的事情。反正。

我们使用`NavBar`了来自**DevExpress的****WPF**控件库。事实证明，当`NavBar`存在时，动态创建的视图不会出现在 UI 自动化树上。当从窗口中移除它时，可以看到所有动态加载的视图。`NavBar`- 对我来说仍然是什么。

这是一个明亮的例子，看看发生了什么，如果窗口上存在或不存在 NavBar（需要 DevExpress）。

MainWindow.xaml：

```
<Window xmlns:dxn="http://schemas.devexpress.com/winfx/2008/xaml/navbar"
        x:Class="Test.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525"
        >
    <Grid Name="ContentGrid">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition/>
        </Grid.ColumnDefinitions>

        <Grid.RowDefinitions>
            <RowDefinition></RowDefinition>
            <RowDefinition></RowDefinition>
        </Grid.RowDefinitions>
        <!--Comment NavBar to see dynamic control in UI Automation tree-->
        <dxn:NavBarControl Name="asdasd">
            <dxn:NavBarControl.Groups>
                <dxn:NavBarGroup Header="asdasdasdasd" />
            </dxn:NavBarControl.Groups>
        </dxn:NavBarControl>
        <TextBox Grid.Column="1" Name="Statictb" Text="static is visible in ui automation tree" />
        <Button Grid.Row="1" Content="Create controls" Height="25"  Click="Button_Click"/>
    </Grid>
</Window> 
```

主窗口.xaml.cs

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
    }

    private void Button_Click(object sender, RoutedEventArgs e)
    {
        TextBox tb = new TextBox();
        Grid.SetRow(tb, 1);
        Grid.SetColumn(tb, 1);
        tb.Text = "dynamic is not visible, if NavBar here...";
        ContentGrid.Children.Add(tb);
    }
} 
```

**编辑**

根据他们支持网站上的[DevExpress 回答：](http://www.devexpress.com/Support/Center/p/Q411045.aspx)

> 创建对等点后，监听自动化事件可能会导致性能问题。我们决定清除自动化事件的调用列表来解决它。在您的具体情况下，您需要禁用清除。为此，请在 Window 构造函数中将静态 DevExpress.Xpf.Core.ClearAutomationEventsHelper.IsEnabled 属性设置为 False。

这解决了问题。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-20T13:23:09.367

我的猜测是，的自动化对等应在视图更改后`ContentControl`更新其子级。[`AutomationPeer.ResetChildrenCache()`](http://msdn.microsoft.com/en-us/library/system.windows.automation.peers.automationpeer.resetchildrencache.aspx)

[`AutomationPeer.InvalidatePeer()`](http://msdn.microsoft.com/en-us/library/system.windows.automation.peers.automationpeer.invalidatepeer.aspx)应该具有相同的效果（除了其他副作用）并且应该自动调用它以响应[LayoutUpdated](http://msdn.microsoft.com/en-us/library/system.windows.uielement.layoutupdated.aspx)事件。您可能希望检查视图更改时是否引发了 LayoutUpdated 事件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-14T14:35:56.857

stukselbax，尝试查找一系列击键（TAB 和最有可能的 ENTER）以单击使您能够查看项目的按钮。发送击键非常容易，如果这对您有用，我可以在这里添加更多信息。您始终可以在应用程序中建立对用户最有意义的跳位顺序。

------ 2012 年 6 月 20 日更新 --------

您是否尝试过使用 PInvoke 在桌面上双击应用程序的快捷方式以查看以这种方式打开时是否可以看到控件？这是指向 stackoverflow 上的示例的链接：

[引导鼠标事件[DllImport("user32.dll")]点击、双击](https://stackoverflow.com/questions/8739523/directing-mouse-events-dllimportuser32-dll-click-double-click)

另一个想法：我目前正在自动化的应用程序上的某些控件不会显示在树中，直到鼠标单击它们。为了在不使用任何硬编码坐标的情况下完成此操作，我在树中找到了一些东西，这正是我需要单击以显示控件的位置（上方/下方/等）。然后，我获取该项目的鼠标坐标，并将鼠标放在距离那里一个小的偏移处并单击。然后我可以在树中找到我的控件。如果应用程序被调整大小、移动等。这仍然有效，因为小偏移量仍然有效。

# tomcat - 对 web.xml 进行更改

> ID：11014773
> 
> 赞同：0
> 
> 时间：2012-06-13T12:25:14.527
> 
> 标签：tomcat, tomcat6

我想更改 web.xml 中的 checkInterval 设置。

它在我当前的 web.xml 中被注释掉了。我在 web.xml dpo 的哪个部分进行更新以使其被 tomcat 识别？

所以在 web.xml 我有：

```
<!--   checkInterval       If development is false and checkInterval is   -->
  <!--                       greater than zero, background compilations are -->
  <!--                       enabled. checkInterval is the time in seconds  -->
  <!--                       between checks to see if a JSP page (and its   -->
  <!--                       dependent files) needs to  be recompiled. [0]  --> 
```

如何取消注释 checkInterval 参数以便它被 tomcat 识别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T14:32:26.050

下面是一个例子。请考虑默认值为 60。

```
<init-param>
        <param-name>checkInterval</param-name>
        <param-value>30</param-value>
</init-param> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-28T19:00:54.817

您还必须将参数“development”设置为“true”才能正常工作。我在这里从 web.xml 复制了整个 servlet 条目。可能还有其他标签，但“development”和“checkInterval”是您问题中最重要的标签。在这些条目更改后，我还将重新启动 tomcat。checkInterval 是网络服务器检查 jsp 页面是否已更改所用的时间（以秒为单位）。如果只有您和其他一些开发人员，将其设置为 1 或 2 是完全可以的，随便玩玩。

```
<servlet>
    <servlet-name>jsp</servlet-name>
    <servlet-class>org.apache.jasper.servlet.JspServlet</servlet-class>
    <init-param>
        <param-name>development</param-name>
        <param-value>true</param-value>
    </init-param>
    <init-param>
        <param-name>checkInterval</param-name>
        <param-value>2</param-value>
    </init-param>
    <load-on-startup>3</load-on-startup>
</servlet> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T14:48:23.910

是的，在另一个答案的 init-param 中，在注释下的 servlet 部分中（因为这是注释适用的内容），所以：

```
<servlet>
  <servlet-name>jsp</servlet-name>
  <servlet-class>org.apache.jasper.servlet.JspServlet</servlet-class>
  <init-param>
    <param-name>checkInterval</param-name>
    <param-value>120</param-value>
  </init-param>
  .... 
```

# java - 返回迭代器而不是集合

> ID：11014780
> 
> 赞同：2
> 
> 时间：2012-06-13T12:25:39.540
> 
> 标签：java, collections, iterator, synchronize, iterable

与数据访问层方法中的集合相比，返回迭代器是否有任何优势或在哪里更可取？

我在哪里见过，不记得为什么。

PS：可能与实时获取一些数据有关，而未完成

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T12:38:52.860

Iterator 的接口比 Collection 简单得多，并且应该更容易实现自定义包装器，以按照您想要的方式做事。

正如您所提到的，您可以实现它，以便 next() 方法阻塞，直到数据可用。此外，您可以选择不实现 remove() 操作，因此不允许调用者更改底层集合。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T12:47:04.917

JDBC`ResultSet`基本上就是这样工作的，尽管它是一个不同且更复杂的接口。是的，这样做的原因是它允许处理巨大的数据集，而无需先将它们完全提取到内存中。

此外，其他一些语言（我相信 C++ 和 Python）习惯性地使用迭代器作为要传递的数据项。在 Java 中，通常不会这样做并且应该避免这样做（除非有令人信服的理由），因为 Java 的迭代器缺少一些重要的功能，这使得它们的用处远不如 Collection —— 即，您不能复制它们或重置它们的位置。

# java - 在 Spring MVC 中将 ContextLoaderListener 添加到 web.xml

> ID：11014782
> 
> 赞同：18
> 
> 时间：2012-06-13T12:25:42.263
> 
> 标签：java, spring, spring-mvc

我是*Spring MVC*的新手。我有一个网络应用程序。我有以下配置：

```
<welcome-file-list>
    <welcome-file>list.html</welcome-file>
</welcome-file-list>
<servlet>
    <servlet-name>spring</servlet-name>
    <servlet-class>
        org.springframework.web.servlet.DispatcherServlet
    </servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>spring</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping> 
```

我是否需要将以下行添加到*web.xml*文件中？

```
<listener>
    <listener-class>
        org.springframework.web.context.ContextLoaderListener
    </listener-class>
</listener> 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-13T12:26:27.927

是的，您需要添加`ContextLoaderListener`，`web.xml`仅**当**您想在加载应用程序时加载其他 Spring 上下文 xml 文件并且您可以将它们指定为

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
        /WEB-INF/spring-security.xml
    </param-value>
</context-param> 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-06-13T12:30:19.697

仅当您有两个配置 xml 文件时。一个带有服务/DAO，另一个带有控制器。如果您在一个 spring 配置文件中配置了所有内容，则不需要`ContextLoaderListener`，只需调度程序 servlet 就足够了。

建议将配置拆分为两部分，并使用`ContextLoaderListener`来创建根应用程序上下文，并使用调度程序 servlet 来创建 Web 层应用程序上下文。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-08-08T19:30:56.707

它是可选的，你真的不需要它只是为了 Spring MVC（`DispatcherServlet`会做）。但是必须在 Spring MVC 中添加 Spring 安全性

```
<listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener> 
```

仅此一句，如果使用，`ContextLoaderListener`您将必须添加`DelegatingFilterProxy`：

```
<listener>
    <listener-class>
        org.springframework.web.context.ContextLoaderListener
    </listener-class>
</listener>

<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>
<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/admin</url-pattern>
</filter-mapping>

<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>     
    /WEB-INF/spring-security.xml
    </param-value>
</context-param> 
```

在你的 web.xml 中也是如此。抱歉晚了四年。干杯

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-23T13:06:45.320

这可能有点高级，在我的企业应用程序中，他们构建了自己的侦听器类并放入 web.xml。在启动时，这个定制的监听器将扫描应用程序以收集所有信息，包括资源、外部连接、服务器信息 ip、jar 等。这些信息可以在网页中访问。

# bash - sed -e 字符串的引用方式有什么不同吗？

> ID：11014786
> 
> 赞同：3
> 
> 时间：2012-06-13T12:26:05.517
> 
> 标签：bash, shell, sed

每当我看到使用 -e 的 sed 示例时，命令字符串通常由单引号而不是双引号分隔，如下所示：

```
sed -e ' <command>' <input>
sed -e 's/CSV/csv/g' csv-instructions 
```

使用双引号和单引号之间有区别吗？如果有，它们是什么？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T13:22:31.730

问题实际上与 sed 无关。

引用是一个*shell*问题，因此取决于您使用的 shell。

例如，在*bash*中，双引号允许解释特殊字符，例如 $（变量扩展）或 *（通配符），而单引号则不允许。

您可以查阅此页面以获取有关该主题的详细说明：

[http://www.grymoire.com/Unix/Quote.html](http://www.grymoire.com/Unix/Quote.html)

[而且您可能会在 SO 上找到其他相关帖子，其中包含更合适的关键字 :-) ]

# php - 检查事件是在其他事件之前、之后还是期间

> ID：11014789
> 
> 赞同：1
> 
> 时间：2012-06-13T12:26:11.297
> 
> 标签：php, mysql, date, time

我被代码困住了。我想查看来自 MySQL 数据库的女巫事件是在输入事件之前、之后和期间。

我有一个包含以下字段的表：

*   `Event_id`(int AUTO_INCREMENT)
*   `start_date`（日期）
*   `start_time`(varchar)
*   `end_date`（日期）
*   `end_time`(varchar)

开始时间和结束时间为 24 小时制，存储时不带冒号分隔符`:`（所以 23:50 存储为 2350，1:00 存储为 0100）

输入事件的日期和时间将采用相同的格式。

如何进行查询（或脚本）以获取最接近输入事件的事件、检查在输入事件期间是否存在事件的查询以及在输入事件之后获取最接近事件的查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T12:44:23.883

首先，从改变你的方案开始，所以你有

```
event_id (int AUTO_INCREMENT),
start_date (timestamp), 
end_date (timestamp) 
```

对于您的查询，您现在可以使用`TIMEDIFF`.

**最近的事件**

```
SELECT *, TIMEDIFF(input_date, start_date) diff
FROM events ORDER BY diff LIMIT 1 
```

这将为您提供下一个活动。

**活动期间的活动**

```
SELECT * FROM events
WHERE
  TIMEDIFF(input_date, start_date) > 0 AND
  TIMEDIFF(input_date, end_date) < 0
FROM events 
```

这将为您提供正在进行的事件。

在进行比较之前，您可能需要将`TIMEDIFF`s包装起来。`SECONDS()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T12:45:13.033

要实现这一点，您确实需要将 DATE + VARCHAR 字段转换为更合适的内容，例如 DATETIME（我更喜欢日期时间，它在查询时更具可读性，并且在内部与时间戳一样快）

然后，在您将 4 个字段合并为 2 个字段后，您可以使用两种类型的查询：

```
SELECT
    CASE 
        WHEN startDateTime <= "targetDate" AND endDateTime > "targetDate" THEN "while"
        WHEN startDateTime > "targetDate" THEN "before"
        WHEN endDateTime <= "targetDate" THEN "after"
    END AS timeframe,
    events.*
FROM
    events 
```

或者你也可以使用联合，两者都会产生相似的结果，选择你喜欢的一个：

```
SELECT "before" AS timeframe, events.* FROM events
WHERE startDateTime > "targetDate"
UNION
SELECT "while" AS timeframe, events.* FROM events
WHERE startDateTime <= "targetDate" AND endDateTime > "targetDate"
UNION
SELECT "after" AS timeframe, events.* FROM events
WHERE endDateTime <= "targetDate" 
```

PS：我没有测试它，但这个想法是正确的，你可能需要适应它。

祝你好运

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T12:45:57.743

之前最近的：

```
Select * from Event_table where start_date<=[imputed start_date] and start_time<[imputed start_time] order by start_date DESC, start_time DESC LIMIT 1 
```

这条sql获取插补事件之前的事件列表，按天后裔和开始时间后裔排序，使第一个结果最接近，LIMIT 1只恢复1条记录，得到最接近的前一个。

也许您更喜欢按 end_date 和 end_time（而不是 start_date 和开始时间）过滤以获得事件的最近结束。

将 [imputed start_date] 和 [imputed start_time] 更改为 end_date 和 end_time 以及 '<' for '>' 后获得最接近的值

要获取插补事件期间的事件数量，请使用以下之间的简单查询：

```
Select count(event_id) from event_table where ( start_date between ([imputed start_date] and [imputed end_date]) or end_date between ([imputed start_date] and [imputed end_date]) ) AND (start_time between ([imputed start_time] and [imputed end_time]) OR (end_time between ([imputed start_time] and [imputed end_time])) 
```

# svn - 有没有办法让 TortoiseSVN 显示补丁的上下文而不将其应用于本地结帐？

> ID：11014790
> 
> 赞同：1
> 
> 时间：2012-06-13T12:26:12.107
> 
> 标签：svn, tortoisesvn, diff, patch

我过去使用过 Starteam 等其他系统，使用该系统创建的补丁会显示整个源文件。在分析补丁时查看整个源代码通常有助于识别补丁的潜在问题。

所以我的问题是：有没有一种简单的方法可以让 TortoiseSVN 差异工具在上下文中显示补丁（无需手动将补丁应用于本地结帐）？..或者是否有一个外部工具可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T07:35:28.180

[Maarten-sander](https://stackoverflow.com/users/4210/maarten-sander)在[另一个关于堆栈溢出](https://stackoverflow.com/questions/50371/better-merge-tool-for-subversion)的问题中的回答建议使用[Beyond Compare](http://www.scootersoftware.com/)。这提供了创建具有完整上下文的补丁文件的选项。

# java - Java NIO 文件通道写入文件

> ID：11014791
> 
> 赞同：0
> 
> 时间：2012-06-13T12:26:12.130
> 
> 标签：java, io, nio

我正在通过互联网发送文件，接收器接收到它发送的文件的位置，当然还有数据，我应该从发送的位置开始将接收到的数据写入文件，但看起来 NIO 喜欢重写位置之前的任何数据。

所以我正在做的是

```
fc = new FileOutputStream(new File(file)).getChannel(); 
```

然后我在上面写上从前面定义的 pos 开始的缓冲区

```
fc.write(buffer, pos); 
```

当我发送被分割为多个的文件并将数据写入文件时，就像我展示的那样，由于某种原因，之前写入的数据被零覆盖

我还尝试过调试，例如检查它是否实际开始从该位置写入并且它工作正常并且在传输之间存在延迟，因此他们无法并发写入文件，这无论如何都不应该成为问题。

我也关闭频道

```
fc.close(); 
```

因为我将文件分段发送，所以我无法将 fc 保存在内存中。

我的代码有什么问题，或者我怎么可能从 x 位置开始写入文件而不清空该位置之前的数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T22:43:12.543

在通道之间复制的规范方法如下：

```
while (in.read(buffer) > 0 || buffer.hasRemaining())
{
  buffer.flip();
  out.write(buffer);
  buffer.compact();
} 
```

如果您要关闭并重新打开文件，则需要在第一次之后以附加模式打开它。

# php - xampp sendmail 使用 gmail 帐户，来自 ubuntu

> ID：11014797
> 
> 赞同：1
> 
> 时间：2012-06-13T12:26:42.357
> 
> 标签：php, email, xampp, sendmail, lampp

我已经为 ubuntu 安装了 Xampp。它位于 /opt/lampp。我想配置 php.ini 和 sendmail.ini 文件，以便能够使用 gmail smtp 服务器发送邮件。php.ini 位于 /opt/lampp/etc，但我找不到 sendmail.ini 文件。此外，stackoverflow 上的大部分资源都是针对 Windows 的。有人可以指出 ubuntu 和 xampp 服务器的配置。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T12:51:30.703

使用 zend_mail 代替使用 gmail 配置发送邮件

```
$settings = array('ssl'=>'ssl',
                                'port'=>465,
                                'auth' => 'login',
                                'username' => 'youremail@gmail.com',
                                'password' => 'YOUR_PASSWORD');
                $transport = new Zend_Mail_Transport_Smtp('smtp.gmail.com', $settings);
                $email_from = "YOUR_EMAIL";
                $name_from = "YOUR NAME";
                $email_to = "TO_EMAIL";
                $name_to = "TO NAME";

                $mail = new Zend_Mail ();
                $mail->setReplyTo($email_from, $name_from);
                $mail->setFrom ($email_from, $name_from);
                $mail->addTo ($email_to, $name_to);
                $mail->setSubject ('Testing email using google accounts and Zend_Mail');
                $mail->setBodyText ("Email body");
                $mail->send($transport); 
```

[http://blog.josedasilva.net/zend-framework-sending-emails-using-zend_mail-and-google-smtp/](http://blog.josedasilva.net/zend-framework-sending-emails-using-zend_mail-and-google-smtp/)

# php - 如何使用 API？

> ID：11014801
> 
> 赞同：2
> 
> 时间：2012-06-13T12:26:59.663
> 
> 标签：php, json, api, web

我不是一个程序员，但我想通过提取故事并显示它来将[http://storify.com/集成到我的网站中。](http://storify.com/)

我一直在阅读[http://dev.storify.com/api/summary](http://dev.storify.com/api/summary)但这对我来说没有多大意义。

我猜这个 - “使用 POST 执行写入，使用 GET 执行读取。所有数据都以 JSON 格式发送：”

...我需要使用 GET 或 POST 发送 HTTP 请求，然后将 JSON 响应解析为可读的内容？

我不知道从这里做什么。请帮忙。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T12:29:42.207

这是示例：

```
$data = json_decode(file_get_contents('http://api.storify.com/v1'));

print_r($data); 
```

产生以下结果：

```
stdClass Object
(
    [content] => stdClass Object
        (
            [status] => up
            [version] => 1.6.33
            [sha] => 93689c7b
            [uptime] => 1277
            [started_at] => 2012-06-13T12:07:54.496Z
            [memoryUsage] => 47M
            [env] => production
            [host] => storify-api02
        )

    [code] => 200
) 
```

您可以像这样使用 $data 对象：

```
echo $data->content->host; 
```

# wordpress - 排除元值空wordpress的帖子

> ID：11014802
> 
> 赞同：0
> 
> 时间：2012-06-13T12:27:05.040
> 
> 标签：wordpress

我制作了一个自定义字段“复选框”。我只想排除选中复选框的帖子。我不能这样做。这是我正在使用的代码

```
$args = array(
                'posts_per_page'=> -1,
                 'post_type' => 'latestnews',
                 'orderby'=> 'id',
                 'meta_key'=>'',
                 'meta_value'=>'',
                 'order'=> 'asc',
                );
            query_posts($args);
    $my_posts = new WP_Query($args); 
```

所以基本上我只想要那些没有设置元键“粘性”并且元值不存在的帖子。在这里，我的元键是一个复选框，如果我选中复选框，则值 yes 存储在数据库中，如果我不选中该选项，则数据库中不会存储任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T14:36:55.453

```
<?php
$check_metakey = get_post_meta($post->ID, "sticky", true);
if($check_metakey !== '') :
?>
your article's template
<?php
endif;
?> 
```

注意：所有这些都在 while 循环中。

祝你好运！:)

# php - 如何为每个 div 做自己的触发器

> ID：11014803
> 
> 赞同：1
> 
> 时间：2012-06-13T12:27:09.283
> 
> 标签：php, javascript, codeigniter

例如我有：

```
<?php foreach($query as $q): ?>
        <div class="item">
        <?php echo img($q->images); ?>
        </div>
<?php endforeach; ?> 
```

所以这段代码在一行中呈现 5 个 div，每行 5 个 div，这段代码：

```
<?php foreach($url->result() as $u): ?>

<script>
$(document).ready(function(){
    $('div.item').click(function(){

        setTimeout(function(){

                    window.open('<?php echo $u->url; ?>');

        }, 500)

    })
})
</script>
<?php break; ?>
<?php endforeach; ?> 
```

无论我们点击什么 div，它都会打开一个具有相同 url 的新窗口，但是如果我的数据库中有 5 个不同的 url，我希望当我们点击每行的第一个 div 时，它会打开一个窗口第一个网址，当我们单击第二个网址时，它将打开第二个网址

我认为这可以通过使用类来实现，例如 class="item1"、item2、item3、item4、item5，但是如果我们只有 3 个 url，而不是 5 个，在这种情况下，我怎样才能使前三个 div将打开前 3 个 url，但剩下 2 个，将打开最后一个，它是 3 div

对不起我的英语不好，也许你知道如何做到这一点，谢谢！

ps：我正在使用codeigniter

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T12:41:44.840

除了类，您可以为每个部门设置像 item_1、item_2 等的 ID，在 JavaScript 中，您可以分别在每个 div 中设置侦听器。

```
<?php $index = 0;?>
<?php foreach($query as $q): ?>
        <div id="item_<?php echo $index++;?>">
        <?php echo img($q->images); ?>
        </div>
<?php endforeach; ?> 
```

对于 Javascript，代码如下：

```
<?php $index = 0;?>
<?php foreach($url->result() as $u): ?>

<script>
$(document).ready(function(){
    $('#item_<?php echo $index++;?>').click(function(){

        setTimeout(function(){

                window.open('<?php echo $u->url; ?>');

    }, 500)

})
})
</script>
<?php break; ?>
<?php endforeach; ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T12:33:41.143

我能想到的2个选项。首先是将 url 添加为 div 的数据属性，这样`data-url="url here"`您就可以使用`$(this).attr('data-url')`在 javascript 操作中获取链接（甚至可以使用`data()`但不确定 IE 兼容性）。

第二种选择是在 div 中隐藏一个锚点，然后在 javascript 操作中，您只需选择单击的 div 中的锚点即可获取 URL

# r - 从数据框中绘制多条平滑线

> ID：11014804
> 
> 赞同：4
> 
> 时间：2012-06-13T12:27:14.187
> 
> 标签：r, graph, plot

我对 R 比较陌生。我正在尝试绘制从 csv 文件加载的数据框。数据由 6 列组成，如下所示：

```
xval,col1,col2,col3,col4,col5 
```

第一列 (xval) 由一系列单调递增的正整数（例如 10、40、60 等）组成，其他列 1 到 5 列由浮点数组成。

我想在 R 中创建一个绘图，如下所示：

*   在 x 轴上绘制 xval 项
*   绘制剩余的列 (col1 ... col5) 行
*   用 col2 创建一个图例图例，... col5 重命名

要绘制的数据（col1，... col5）是“快照”值，因此虽然我想将它们绘制为线条，但我希望线条被平滑（即插值）。

我正在寻找一个片段来帮助我在将数据读入数据帧后创建绘图。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-13T13:20:38.283

看看ggplot2

```
#create dummy data
n <- 200
dataset <- data.frame(xval = runif(n), col1 = rnorm(n), col2 = rnorm(n, sd = 2), col3 = rnorm(n, mean = seq(0, 2, length = n)), col4 = rnorm(n, sd = seq(0, 1, length = n)), col5 = rnorm(n, mean = 1))
#convert data to long format
library(reshape)
Molten <- melt(dataset, id.vars = "xval")
#plot it
library(ggplot2)
ggplot(Molten, aes(x = xval, y = value, colour = variable)) + 
    geom_smooth() + geom_point()
#some tweaking
ggplot(Molten, aes(x = xval, y = value, colour = variable)) + 
    geom_smooth(se = FALSE) + geom_point() + theme_bw() + 
    scale_x_continuous("the x label") + scale_x_continuous("the y label") +
    scale_colour_discrete("") 
```

![在此处输入图像描述](../Images/21322bdfd96d28ad2bf1fbff9f936c32.png)

# java - 在 pattern.compile 上使用 REGEX 删除特定的 HTML 标记

> ID：11014806
> 
> 赞同：0
> 
> 时间：2012-06-13T12:27:27.207
> 
> 标签：java, regex

我如何使用正则表达式来获得以下内容。标签中的内容可能是字母、数字和元字符。

输入字符串：`"<p>Hi </p><p>there</p>"`

预期输出：`"Hi<p>there</p>.`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T16:12:03.223

在进一步的规范到来之前，请使用以下内容：

`<p>(.)*?</p>`并使用第一个（也是唯一的）组 (.)*？

这个匹配`<p> Hi </p>`然后使用 \1 来引用 ' Hi '

# java - Play framework 1.2.4 战争环境具体配置文件

> ID：11014817
> 
> 赞同：0
> 
> 时间：2012-06-13T12:28:07.333
> 
> 标签：java, playframework

有没有办法在构建战争时包含特定于环境的属性或配置文件。

# 质量保证

entity.url=http://qa.test..

# 产品

entity.url=http://prod...

我需要进行大约 5 到 6 次 REST 调用。每个环境的 URL 都不同。因此有什么方法可以配置环境特定的 conf 文件吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T12:04:38.117

Play 框架具有可用于不同模式的“ids”概念，请参见此处： [http ://www.playframework.org/documentation/1.2.4/ids](http://www.playframework.org/documentation/1.2.4/ids)

这允许您执行以下操作：

```
%qa.entity.url=http://qa.test..
%prod.entity.url=http://qa.test.. 
```

他们的文档可能不清楚的一件事是如何在战争中设置它。当作为 .war 文件运行时，播放 ID 默认设置为“war”。这可以在 .war 文件的 web.xml 中更改。您可以这样做，也可以在创建战争时指定 ID：

```
play war -o PATH --%prod 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T12:57:10.600

不是我知道的（并且阅读用于构建战争的 python 源代码并不表明这是可用的）。war 文件按原样简单地构建您的 Play 应用程序。如果您想拥有不同的配置，那么这可能只需要从外部资源（位于 WAR 之外的属性文件，您随 WAR 文件一起提供）加载它。

或者，您可以修改构建 WAR 文件的 python 脚本以自定义向您的文件添加其他属性。查看目录`framework/pym/commands/`并查看`war.py`以读取 python war 命令的源代码。

# java - Ehcache 作为 Spring 中配置的 JCache 实现

> ID：11014822
> 
> 赞同：1
> 
> 时间：2012-06-13T12:28:36.587
> 
> 标签：java, spring, ehcache, jcache

我正在尝试使用以下 jcache-ehcache 库作为包装器，以便我可以使用 Ecache 作为我的 JCache 实现。

这些是我的 Maven 依赖项：

```
 <dependency>
        <groupId>net.sf.ehcache</groupId>
        <artifactId>ehcache</artifactId>
        <version>2.1.0</version>
        <type>pom</type>
    </dependency>

    <dependency>
        <groupId>net.sf.ehcache</groupId>
        <artifactId>ehcache-jcache</artifactId>
        <version>1.4.0-beta1</version>
    </dependency> 
```

在我的 Spring 配置文件中，我有以下 bean：

```
<bean id="cacheManager" class="org.springframework.cache.ehcache.EhCacheManagerFactoryBean">
    <property name="shared" value="true"/>
</bean>

<bean id="userCache" class="org.springframework.cache.ehcache.EhCacheFactoryBean">
    <property name="cacheName" value="userCache"/>
    <property name="cacheManager" ref="cacheManager"/>
    <property name="diskPersistent" value="false"/>
</bean>

<bean id="jcacheUserCache" class="net.sf.ehcache.jcache.JCache">
    <constructor-arg index="0" ref="userCache"/>
</bean> 
```

我的 Ehcache.xml（在类路径根目录上）文件包含 userCache 区域定义：

```
 <cache name="userCache" maxElementsInMemory="10000"
  maxElementsOnDisk="0" eternal="false" overflowToDisk="false"
  diskSpoolBufferSizeMB="20" timeToIdleSeconds="0"
  timeToLiveSeconds="0" memoryStoreEvictionPolicy="LFU"
  statistics = "true">
  </cache> 
```

在初始化时，我收到以下错误：

```
Exception in thread "main" org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'jcacheUserCache' defined in class path resource [application-context.xml]: Unsatisfied dependency expressed through constructor argument with index 1 of type [net.sf.ehcache.jcache.JCacheManager]: Ambiguous constructor argument types - did you specify the correct bean references as constructor arguments? 
```

任何人都可以提供有关如何正确初始化此`jCacheUserCache`bean 的任何帮助吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T21:55:48.530

的构造函数`net.sf.ehcache.jcache.JCache`有三个参数，但是您在创建`jcacheUserCache`bean 时只提供了第一个参数。您得到的错误是关于缺少第二个参数（类型`net.sf.ehcache.jcache.JCacheManager`）。

的构造函数`JCache`如下所示：

```
public JCache(Ehcache ehcache, JCacheManager cacheManager, ClassLoader classLoader) {
    // ...
} 
```

因此，您还需要提供 a`JCacheManager`和 a`ClassLoader`作为构造函数参数。

（见[`JCache.java`这里](http://grepcode.com/file/repo1.maven.org/maven2/net.sf.ehcache/ehcache-jcache/1.4.0-beta1/net/sf/ehcache/jcache/JCache.java?av=f)）

# powershell-2.0 - Powershell - 查询导出到 csv 的服务器的防火墙列表

> ID：11014824
> 
> 赞同：0
> 
> 时间：2012-06-13T12:28:41.573
> 
> 标签：powershell-2.0, firewall, export-to-csv, comobject

我正在使用以下内容来查询服务器列表的防火墙规则。

```
$servers = Get-Content fw_servers.txt

foreach($serv in $servers) {
$fw = New-Object -ComObject hnetcfg.fwpolicy2 

$fw.rules | 

Where-Object { $_.enabled -and $_.LocalPorts -like 3389 } | 

Select-Object -Property direction,protocol, localports,name 
} 
```

我想将此信息导出到 csv 文件。有人可以告诉我如何使用 Export-CSV 吗？我试过把它做成一个数组，但它不适合我。我正在使用 2.0

我还希望导出的数据如下所示

```
Server    Direction   Protocol   LocalPorts    Name
testsrv1  1           6          3389          Remote Desktop (TCP-In)
testsrv2  1           6          3389          Research Remote Desktop Policy 
```

谢谢您的帮助。

阿米莉亚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T02:26:46.953

我顿悟了，不知何故想通了。以下虽然不漂亮，但对我有用。

```
$servers = Import-CSV fw_servers.csv
$servers | Foreach {
$serv = $_.serv
foreach-object { 
       $name = $_."Server"
       $fw = New-Object -ComObject hnetcfg.fwpolicy2 
       $fw.rules | 
       Where-Object { $_.enabled -and $_.LocalPorts -like 3389 } | 

       Select-Object @{Name="Server"; Expression={$name}}, direction, protocol, localports, name 
               }
} | Export-CSV C:\Users\trankaa\desktop\fw_res.csv -NoTypeInformation -Force 
```

# c# - 如何在 Visual Studio 2010 中添加非英文命名文件来设置项目？

> ID：11014825
> 
> 赞同：4
> 
> 时间：2012-06-13T12:28:44.993
> 
> 标签：c#, wpf, visual-studio-2010, installation

我已经构建了一个 wpf 应用程序，我想通过制作安装项目来部署它。我的应用程序包含非英语（非 Unicode）命名文件。现在在构建设置时，它会因抛出异常而失败：

```
Could not find file 'D:\ ... \ایران' 'Not enough storage is available to complete this operation.' 
```

请注意，无论如何我都无法重命名文件，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T06:43:23.277

Visual Studio 仅支持单一语言包。因此，您的 MSI 有一个预先确定的语言（默认为英语）来设置[包代码页](http://msdn.microsoft.com/en-us/library/windows/desktop/aa369769%28v=vs.85%29.aspx)。

MSI 代码页不支持的任何字符都将被转换或触发某种错误。

因此，如果您的文件名使用非英语语言的字符，则需要[更改包代码页](http://msdn.microsoft.com/en-us/library/kcx25hzz%28VS.80%29.aspx)以支持这些字符。这也会改变你的包 UI 语言。

另一种方法是重命名您的文件以使其受英文代码页支持。

# sql - 将 SQL 查询转换为 Dynamics CRM FetchXML 查询的工具

> ID：11014829
> 
> 赞同：2
> 
> 时间：2012-06-13T12:28:50.690
> 
> 标签：sql, dynamics-crm, fetchxml

我们需要一个工具，可以将给定的定义良好的 SQL 查询转换为其组成的 xml 形式。任何人都可以提出任何此类建议，免费工具会提供很大帮助。另外，您能否建议是否可以使用 MS 的 FetchXML 来实现这一点？

我们可以考虑这个简单的例子来说明需求......输入：

```
select emp_name, emp_id from employee_table where emp_sal > 5000 
```

输出：

```
<query>
    <entity name=”employee_table”&gt;
        <attribute name=”emp_name” />
        <attribute name=”emp_id”/>
        <filter>
          <condition attribute=”emp_sal” operator =”&amp;gt;” value=”5000”/>
        </filter>
    </entity>
</query> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T20:26:32.880

我们最近推出了一个免费的在线转换器，可用于将 SQL 脚本转换为 CRM FetchXML。该转换器可在[http://www.sql2fetchxml.com/](http://www.sql2fetchxml.com/)获得。如果您对转换器有任何疑问，请查看并告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T12:51:20.137

阅读此内容：[SQL 来获取 xml...如何 ??](http://social.microsoft.com/Forums/en/crmdevelopment/thread/92acf2d2-57e3-43af-a283-79ded0dd55c7)

# xslt - 输出中的 XSLT 元素对齐

> ID：11014837
> 
> 赞同：1
> 
> 时间：2012-06-13T12:29:21.783
> 
> 标签：xslt, format

试图为其他人解决问题，却遇到了我自己的奇怪问题，我确信这很简单，但答案却让我难以捉摸！

我拥有的 XML：

```
<xml>
  <head>
    <info>
      <content>
        <source attribute1="RSC1985s5c1" attribute2="6(17)">
          data1
        </source>
        <cite/>
        <case/>
        (
        <target attribute1="LRC1985s5c1" attribute2="6(17)1">
          3e/191
        </target>
        )
      </content>
      <content>
        <source attribute1="RSC1985s5c1" attribute2="6(17)">
          data2
        </source>
        <cite/>
        <case/>
        (
        <target attribute1="LRC1985s5c4" attribute2="6(17)1">
          4e/54
        </target>
        )
      </content>
    </info>
  </head>
</xml> 
```

用 XSLT 来组合两个内容元素：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">

  <xsl:template match="node() | @*">
    <xsl:copy>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="info">
    <xsl:copy>
      <xsl:element name="content">
        <xsl:for-each select="content">
          <xsl:apply-templates select="@*"/>
          <xsl:apply-templates select="node()"/>
        </xsl:for-each>
      </xsl:element>
    </xsl:copy>
  </xsl:template>

</xsl:stylesheet> 
```

这将创建：

```
<?xml version="1.0" encoding="utf-8"?><xml> //Just noticed here too!
  <head>
    <info><content> //Why no new line here?
        <source attribute1="RSC1985s5c1" attribute2="6(17)">
          data1
        </source>
        <cite />
        <case />
        (
        <target attribute1="LRC1985s5c1" attribute2="6(17)1">
          3e/191
        </target>
        )

        <source attribute1="RSC1985s5c1" attribute2="6(17)">
          data2
        </source>
        <cite />
        <case />
        (
        <target attribute1="LRC1985s5c4" attribute2="6(17)1">
          4e/54
        </target>
        )
      </content></info> //And again here?
  </head>
</xml> 
```

使用评论突出显示的问题是我无法弄清楚的，为什么元素之间没有新线。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T12:48:21.870

**对提供的转换稍作修改**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

  <xsl:template match="node() | @*">
    <xsl:copy>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="info">
    <xsl:copy>
      <xsl:element name="content">
        <xsl:for-each select="content">
          <xsl:apply-templates select="@*"/>
          <xsl:apply-templates select="node()"/>
        </xsl:for-each>
      </xsl:element>
    </xsl:copy>
  </xsl:template>
</xsl:stylesheet> 
```

**我得到了 Saxon 6.5.5 和许多其他 XSLT 1.0 处理器的良好缩进输出：**

```
<xml>
   <head>
      <info>
         <content>
            <source attribute1="RSC1985s5c1" attribute2="6(17)">
          data1
        </source>
            <cite/>
            <case/>
        (
        <target attribute1="LRC1985s5c1" attribute2="6(17)1">
          3e/191
        </target>
        )
      <source attribute1="RSC1985s5c1" attribute2="6(17)">
          data2
        </source>
            <cite/>
            <case/>
        (
        <target attribute1="LRC1985s5c4" attribute2="6(17)1">
          4e/54
        </target>
        )
      </content>
      </info>
   </head>
</xml> 
```

**一些 XSLT 处理器可能仍然会产生不需要的缩进**——在 W3C XSLT 1.0 建议中没有严格的标准应该如何执行缩进。

# javascript - 网格中的 ExtJS 进度条

> ID：11014839
> 
> 赞同：0
> 
> 时间：2012-06-13T12:29:26.997
> 
> 标签：javascript, extjs

有没有办法在网格的页脚 (fbar) 中添加进度条？我已经成功地将按钮添加到网格面板，但进度条没有运气。

我在 fbar 中试过这个：

```
fbar: [{
                type: 'progress',
                text: 'updating...'
      }] 
```

但结果是一个带有文本“更新”的按钮被添加到页脚。

有人知道我在做什么错吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T12:49:20.590

假设 Ext4

```
Ext.require(['Ext.data.*', 'Ext.grid.*']);

Ext.define('Restaurant', {
    extend: 'Ext.data.Model',
    fields: ['name', 'cuisine']
});

Ext.onReady(function() {
    var restaurants = Ext.create('Ext.data.Store', {
        storeId: 'restaraunts',
        model: 'Restaurant',
        data: [{
            name: 'Cheesecake Factory',
            cuisine: 'American'
        }]
    });

    var grid = Ext.create('Ext.grid.Panel', {
        renderTo: Ext.getBody(),
        store: restaurants,
        width: 600,
        height: 400,
        frame: true,
        columns: [{
            text: 'Name',
            flex: 1,
            dataIndex: 'name'
        }, {
            text: 'Cuisine',
            flex: 1,
            dataIndex: 'cuisine'
        }],
        fbar: [{
            xtype: 'progressbar',
            text: 'Foo',
            width: 200
        }]
    });
}); 
```

# objective-c - NSArray 动态初始化并填充块

> ID：11014840
> 
> 赞同：0
> 
> 时间：2012-06-13T12:29:27.317
> 
> 标签：objective-c, nsarray, objective-c-blocks

我问过类似的问题，但他们都关心使用一个块来表示数组的特定值。这有点不同，我想在初始化时使用块填充数组的值。除了子类化 NSArray 来做到这一点之外，还有另一种类似的方法：在这种情况下，我用一周中的几天填充一个数组，今天总是在中间。我这样做的“经典”方式是：

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];  
[dateFormatter setDateFormat:@"EEEE"];   
NSMutableArray *test = [[NSMutableArray alloc] init];
for (int i = -3; i < 4; i++) {
    [test addObject:[dateFormatter stringFromDate:[[NSDate date] dateByAddingTimeInterval:60*60*24*i]]];
} 
```

理想情况下，我想做的是初始化一个数组并用使用块动态分配的值填充它，如下所示：

```
NSArray *array = [[NSArray alloc] initWithObjects:^(){  for (int i = -3; i < 4; i++) {
    return [dateFormatter stringFromDate:[[NSDate date] dateByAddingTimeInterval:60*60*24*i]];
}}, nil]; 
```

现在上面的代码什么都没有创建，这是正确的，因为方法 initWithObjects 需要对象而不是块，此外，块将执行一次，只返回一个对象。那么这是可能/可行的，还是我需要继承 NSArray 来创建类似 initWithBlock 的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T12:38:54.607

你不需要继承 NSArray 来给它添加一个方法。一个类别就可以了。

当前的任何 NSArray 方法都无法实现您想要的。而且它不会像您在问题中起草的那样完全有效，因为该语言不支持来自块（或函数或方法）的多个返回值。因此，您必须编写一个实际创建 NSArray 并返回它的块。但是，如果您这样做，您不妨忽略该块并立即创建数组。

# c++ - 如何托管无窗口 Flash Player？

> ID：11014843
> 
> 赞同：1
> 
> 时间：2012-06-13T12:29:40.013
> 
> 标签：c++, flash, com, activex

我想对 Flash Player 控件使用无窗口激活。不幸的是，即使在 MSDN 上，关于此的文档也很少。我发现的大多数文章都描述了相关问题，或者如何使您自己的 AX 控件支持无窗口激活。我发现一些文章描述了**托管**过程（我想要的），但是使用 ATL。但是，我已经有一个应用程序，使用 Qt 并使用 mingw-gcc 编译器，可能不容易在其中合并。

我想学习在某处（在 DC 上？）绘制无窗口 ActiveX 控件并向其发送键盘/鼠标事件的最可能的基本方法。链接或详细的建议表示赞赏。

# python - Python和瓶子 - 如何获取协议缓冲区的发布数据

> ID：11014849
> 
> 赞同：3
> 
> 时间：2012-06-13T12:29:46.773
> 
> 标签：python, bottle

我需要使用瓶子解析通过帖子发送的协议缓冲区。

如何让 PB 解析？

我尝试了以下但没有工作：

```
@post('/test')
def test():
    br = test_pb2.MyRequest()
    br.ParseFromString(request.files.data) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T12:35:11.363

原始正文数据可通过`request.body`类文件对象（根据其大小可以是真实文件或 BytesIO）获得。`request.body.read()`应该为你做这项工作。

# configuration - CCmake 可用变量

> ID：11014850
> 
> 赞同：2
> 
> 时间：2012-06-13T12:29:47.363
> 
> 标签：configuration, cmake

我想在 CMakeList.txt 中为我的项目设置配置变量（特别是路径），用户可以在 CCmake 中覆盖该变量。
但是，如果我只是使用 `set(VAR <value>)` `VAR`不能在 CCMAKE 中进行更改，我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T14:28:30.447

如果您将`CACHE`部件添加到`set`命令中，它将在 CCMake 中可见。所以，例如

```
set(VAR <value> CACHE PATH "Some details about VAR") 
```

CCMake 中出现的变量类型有`FILEPATH`, `PATH`,`STRING`和`BOOL`.

有关完整详细信息，请运行：

```
cmake --help-command set 
```

# asp.net-mvc-3 - ASP.NET 4.3 脚手架：添加控制器与添加视图 - 不同的行为？

> ID：11014851
> 
> 赞同：4
> 
> 时间：2012-06-13T12:29:53.213
> 
> 标签：asp.net-mvc-3, foreign-key-relationship, scaffolding, html.dropdownlistfor

我正在尝试使用网络上的标准教程深入研究 ASP.NET MVC 3，但遇到了一个严重的问题。

目前，我正在关注书中的示例，使用“电影”类，将电影类型存储在一个单独的实体中，并与外键连接（好吧，我来自德国，所以我的类以德语命名）。我在这里只显示相关的属性。这是使用 DbContext 的数据库优先方法，我的模型是使用 EF 4.x DbContext Generator 从 edmx 创建的，edmx 是从数据库自动创建的。

```
public partial class Film
{
    public Film() { }

    public int ID { get; set; }
    public string Titel { get; set; }
    public int GenreID { get; set; }
    public virtual Genre Genre { get; set; }
}

public partial class Genre
{
    public Genre() { }
    public int GenreID { get; set; }
    public string Name { get; set; }
} 
```

当我使用提供 DBSet 的 DBContext 为 Film 类创建一个带有 CRUD 视图的新控制器时，我得到一个使用 DropdownList 编辑 GenreID 的 Edit 视图，标记为“Genre”。美好的。这就是我想要的。

但是后来，我尝试单独创建另一个编辑视图。所以我右键单击我的 Edit Action-Method，选择“Add View”，将其命名为“Edit2”，使用 Film 作为模型，使用“Edit”作为脚手架模板。在这个视图中，我得到了一个简单的“EditorFor(m->m.GenreID)”，标记为 GenreID。那不是我想要的。

当然，我可以手动更改它。当然，我可以下载大量声称做得更好的脚手架工具。

但我想了解这是否是 EF 模板中的错误，或者我的模型是否构建错误，从而导致 Genre / GenreID 混淆。当我一次创建所有内容时，脚手架会创建一个 DropDown，因此必须“只是”缺少一些细节。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-18T16:33:04.103

您需要在控制器“Edit2”中调用您的操作。

# android - expandablelistview 组中的 2 行

> ID：11014852
> 
> 赞同：1
> 
> 时间：2012-06-13T12:29:58.277
> 
> 标签：android, expandablelistview

我想用 2 行向下显示我的 groupview，但只显示一行：

我有这个 linear_group.xml 的代码

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="center_vertical"
    android:orientation="horizontal" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_marginTop="3dp"
        android:orientation="horizontal" >

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <ImageView
                android:id="@+id/primerIcono"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="2dp"
                android:src="@drawable/img_transparente"
                android:visibility="visible" />

            <ImageView
                android:id="@+id/segundoIcono"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="2dp"
                android:src="@drawable/img_transparente"
                android:visibility="visible" />
        </LinearLayout>

        <TextView
            android:id="@+id/tvRowCodigo"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginBottom="2dp"
            android:layout_marginLeft="10dp"
            android:layout_marginTop="7dp"
            android:singleLine="true"
            android:text="12345"
            android:textSize="12dp"
            android:textStyle="bold" />

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_marginLeft="5dp"
            android:layout_marginTop="3dp"
            android:layout_weight="3"
            android:orientation="horizontal"
            android:weightSum="3" >

            <TextView
                android:id="@+id/tvRowDireccion"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:text="Medium Text"
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <TextView
                android:id="@+id/tvRowGremio"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:text="Medium Text"
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <TextView
                android:id="@+id/tvRowFechaCad"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:text="Medium Text"
                android:textAppearance="?android:attr/textAppearanceMedium" />
        </LinearLayout>
    </LinearLayout>
</LinearLayout> 
```

第 3 个图像视图是图标，但接下来的文本视图是我想以更多行显示的，但只显示第一个。我附上截图 [http://desmond.imageshack.us/Himg846/scaled.php?server=846&filename=fotonl.png&res=landing](http://desmond.imageshack.us/Himg846/scaled.php?server=846&filename=fotonl.png&res=landing)

**编辑：**

expandablelistview 不显示所有文本视图，第二个和第三个文本视图是“direccion del **servicio** ”和 gremio **del estudiandte y profesion** “但只显示 direccion del 和 gremio del。我想在第二行显示 te rest

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T13:02:57.247

您需要更改 XML 以同时使用水平和垂直 LinearLayout 标注。基本上，您创建一个包含两个水平 LinearLayout 的垂直 LinearLayout。

像这样在伪代码中：

```
<LinearLayout Vertical>
    <LinearLayout Horizontal> (row 1)
        Widgets for Row 1
    </LinearLayout>
    <LinearLayout Horizontal> (row 2)
        Widgets for Row 2
    </LinearLayout>
</LinerLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T13:09:51.483

好的，所以问题的描述有点难以阅读，但我会尽力为您指出正确的方向。我假设您试图在不同的行上列出专业、方向和日期 TextView。

尝试更改 xml 这个：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="center_vertical"
    android:orientation="vertical" >      <-make this one vertical

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_marginTop="3dp"
    android:orientation="horizontal" >

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <ImageView
            android:id="@+id/primerIcono"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="2dp"
            android:src="@drawable/img_transparente"
            android:visibility="visible" />

        <ImageView
            android:id="@+id/segundoIcono"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="2dp"
            android:src="@drawable/img_transparente"
            android:visibility="visible" />
    </LinearLayout>

    <TextView
        android:id="@+id/tvRowCodigo"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginBottom="2dp"
        android:layout_marginLeft="10dp"
        android:layout_marginTop="7dp"
        android:singleLine="true"
        android:text="12345"
        android:textSize="12dp"
        android:textStyle="bold" />

  <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_marginLeft="5dp"
        android:layout_marginTop="3dp"
        android:layout_weight="3"
        android:orientation="horizontal"
        android:weightSum="3" >

       <TextView
            android:id="@+id/tvRowDireccion"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"              <- instead of fill_parent
            android:layout_weight="1"
            android:text="Medium Text"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <TextView
            android:id="@+id/tvRowGremio"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"              <- instead of fill_parent
            android:layout_weight="1"
            android:text="Medium Text"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <TextView
            android:id="@+id/tvRowFechaCad"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"              <- instead of fill_parent
            android:layout_weight="1"
            android:text="Medium Text"
            android:textAppearance="?android:attr/textAppearanceMedium" />
    </LinearLayout>
  </LinearLayout>
</LinearLayout> 
```

# c# - 如何通过异步连接获取完整消息，而不仅仅是其中的一部分

> ID：11014856
> 
> 赞同：0
> 
> 时间：2012-06-13T12:30:21.400
> 
> 标签：c#, sockets, asynchronous, client-server, socketasynceventargs

我已经实现了这个 C# 客户端，它与我在 Java 中创建的另一台服务器的异步连接进行通信。这是客户端：

```
public class NetworkTransaction
{
    private GenericRequest request;
    private const string serverName = "192.168.1.101";
    private const int serverPort = 7777;
    private const int TIMEOUT_MILLISECONDS = 3000;
    private Delegate method;

    public NetworkTransaction(GenericRequest request, Delegate method)
    {
        this.request = request;
        this.method = method;
    }

    public void SendRequest()
    {
        SocketAsyncEventArgs connectionOperation = new SocketAsyncEventArgs();
        DnsEndPoint hostEntry = new DnsEndPoint(serverName, serverPort);
        Socket socket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
        connectionOperation.Completed += new EventHandler<SocketAsyncEventArgs>(SocketEventArg_Completed);
        connectionOperation.RemoteEndPoint = hostEntry;
        connectionOperation.UserToken = socket;

        try
        {
            socket.ConnectAsync(connectionOperation);
        }
        catch (SocketException ex)
        {
            throw new SocketException((int)ex.ErrorCode);
        }
    }

    private void SocketEventArg_Completed(object sender, SocketAsyncEventArgs e)
    {
        switch (e.LastOperation)
        {
            case SocketAsyncOperation.Connect:
                ProcessConnectCompleted(e);
                break;
            case SocketAsyncOperation.Receive:
                ProcessReceiveCompleted(e);
                break;
            case SocketAsyncOperation.Send:
                ProcessSendCompleted(e);
                break;
            default:
                throw new Exception("Invalid operation completed");
        }
    }

    private void ProcessConnectCompleted(SocketAsyncEventArgs e)
    {
        if (e.SocketError == SocketError.Success)
        {
            byte[] buffer = Encoding.UTF8.GetBytes(request.ToJson() + "\n\r");
            e.SetBuffer(buffer, 0, buffer.Length);
            Socket sock = e.UserToken as Socket;
            sock.SendAsync(e);
        }
    }

    private void ProcessSendCompleted(SocketAsyncEventArgs e)
    {
        if (e.SocketError == SocketError.Success)
        {
            Socket sock = e.UserToken as Socket;
            sock.ReceiveAsync(e);
        }
    }

    private void ProcessReceiveCompleted(SocketAsyncEventArgs e)
    {
        if (e.SocketError == SocketError.Success)
        {
            string dataFromServer = Encoding.UTF8.GetString(e.Buffer, 0, e.BytesTransferred);
            Socket sock = e.UserToken as Socket;
            sock.Shutdown(SocketShutdown.Send);
            sock.Close();

            method.DynamicInvoke(dataFromServer);
        }
    }
} 
```

如何从服务器获取长消息？为了让客户端尝试读取更多数据以查看我是否真的阅读了整个消息，我需要更改什么？因为这条线可能有问题：`string dataFromServer = Encoding.UTF8.GetString(e.Buffer, 0, e.BytesTransferred);`它只接收消息的一部分而不是整个消息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T16:01:52.920

给我的关于创建协议的答案对我帮助最大。我最终所做的是在消息中附加一个“标题”，说明它的大小。客户端然后解析头部，并根据消息大小头部和实际接收的字节数检查是否还有更多数据要发送。如果还有更多数据要读取，那么我会这样做：

```
if (messageSizeRemaining > 0)
{
      sock.ReceiveAsync(e);
      return;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T12:31:36.230

> 为了让客户端尝试阅读更多数据以查看我是否真的阅读了整个消息，我需要更改什么？

你必须实现一个协议，上面写着*“Here come 50 bytes”*或*“This is all data, goodbye”*。

`ProcessReceiveCompleted()`每当收到一条数据时都会调用它，这可以是一个字节到很多字节之间的任何内容。套接字不保证将“消息”作为一个整体发送，因为该级别不存在消息。接收的数据量取决于 CPU 和网络利用率等因素。

这就是您的协议的用武之地。这必须在服务器和客户端中定义。例如，HTTP 使用两个`CRLF`'s 让客户端说*“这是我的请求，请立即响应”*。另一方面，服务器（默认情况下）在发送所有数据时关闭连接，但也会发送一个`Content-length`标头，因此客户端可以验证它是否已收到所有数据。

因此，`ProcessReceiveCompleted()`当您收到整条消息时，您必须将数据存储并开始处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T12:36:36.743

如果您使用 Web 服务，则可以使用双工通道。客户端使用以下方式在服务器上注册数据流：

```
[OperationContract(IsOneWay = true)]
void RequestData(); 
```

服务器会将调用 OneWay 操作的数据发送回客户端，例如：

```
[OperationContract(IsOneWay = true)]
void SendNewData(byte[] data, bool completed) 
```

客户端会将所有数据组合在一起，并在收到完成标志时从服务器注销。

要了解有关 DuplexChannels 的更多信息，请查看此处：[Duplex Services](http://msdn.microsoft.com/en-us/library/ms731064.aspx)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T12:44:48.190

我已经同步使用了以下方法（我知道你想要异步）从 HTTP 获取数据

```
 public static Stream getDataFromHttp(string strUrl)
    {
        Stream strmOutput = null;
        try
        {
            HttpWebRequest request;
            Uri targetUri = new Uri(strUrl);
            request = (HttpWebRequest)HttpWebRequest.Create(targetUri);
            request.Timeout = 5000;
            request.ReadWriteTimeout = 20000;
            request.Method = "Get";

            request.UserAgent = "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1)";
            if (request != null)
            {
                request.GetResponse();
                if (request.HaveResponse)
                {
                    HttpWebResponse response = (HttpWebResponse)request.GetResponse();
                    strmOutput = response.GetResponseStream();
                }
            }

        }
        catch (WebException wex)
        {

        }
        catch (Exception ex)
        {

        }
        return strmOutput;
    } 
```

现在要将流转换为文本，请使用以下命令：

```
 Public Static String StreamToString(Stream stream)
    {
            StreamReader SR = new StreamReader(stream);
            try
            {
               String strOutput = SR.ReadToEnd();
               Return strOutput;
             }
             catch(Exception ex)
             {
                  return ex.message
             }
   } 
```

希望这有效

# object - 将对象传递给 sql server 存储过程（作为 TVP）

> ID：11014861
> 
> 赞同：1
> 
> 时间：2012-06-13T12:30:38.353
> 
> 标签：object, stored-procedures, table-valued-parameters

我有一个场景，我将实体（对象）与其他依赖子实体一起传递给存储过程，并且 SP 应该在数据库中为该实体创建/删除/更新相应的表。

例如 - 实体 - 人员 ChildEntity - 技能、职位详情。

所以我将只传递包含所有其他对象集合的 Person 对象，并且存储过程将接受该参数并执行相应的 CRUD 操作。

是否有任何选项可以让我将整个对象传递给 DB，然后使用 DB 中的对象。（我不想使用 XML 方法也想传递整个对象而不是将对象分成单个实体）

需要你的建议，谢谢。

亲切的问候

# ruby-on-rails-3 - 设计 gem 和自定义控制器

> ID：11014862
> 
> 赞同：0
> 
> 时间：2012-06-13T12:30:48.463
> 
> 标签：ruby-on-rails-3, devise

我有一个为 Devise 创建的控制器，我想用它在 /devise/registration/ 中添加更多页面

```
class RegistrationsController < Devise::RegistrationsController
  skip_before_filter :detect_account_ended

  def import
    @title = "Import customers from Quickbooks"
  end

  def categories
    @title = "Edit Categories"
    @categories = current_user.categories

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @categories }
    end
  end

  protected

    def after_update_path_for(resource)
      edit_user_registration_path
    end
end 
```

我创建了路线

```
 devise_for :users, 
    :path_names => { 
      :sign_up => "register", 
      :destroy => "logout" },
    :controllers => { 
      :registrations => :registrations } do
        get '/users/sign_out' => 'devise/sessions#destroy'
        get '/users/import' => 'devise/registrations#import'
        get '/users/categories' => 'devise/registrations#categories'
  end 
```

和意见。视图正确显示，但我从注册控制器传递的对象不会进入视图。我该如何解决这个问题，以便将这些对象传递给我的视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T06:54:58.393

尝试像这样直接访问它们：

```
current_user.categories 
```

在视图中也可用，至于`current_user`@title，您不必将其作为变量传递，因为您也可以将所需的文本直接添加到视图中。

# java - Haskell 中的语法高亮

> ID：11014872
> 
> 赞同：-1
> 
> 时间：2012-06-13T12:31:44.077
> 
> 标签：java, html, haskell, syntax-highlighting

> **可能重复：**
> [如何在 Haskell 中为 Java 进行语法突出显示？](https://stackoverflow.com/questions/10785171/how-to-make-a-syntax-highlighting-for-java-in-haskell)

我之前问过如何在 Haskell 中为 Java 语言制作一个语法高亮器，并以 HTML 格式输出。关于几个图书馆，我收到的答案很少。我无法安装和运行其中的任何一个，所以我不得不再次询问。我怎样才能开始在 Haskell 中制作这个语法荧光笔？一段代码或一个教程对我的帮助比提到一个包要多得多。我重复自己告诉我无法安装和运行照明或突出显示凯特。非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T14:53:13.183

trifecta 可用于为您在其中定义的任何语法构建荧光笔。默认解析器捕获标记被识别位置的间隔映射并在语义上标记它们，并且有一个模块可以获取该映射并生成突出显示的 HTML 流。

我犹豫推荐这个，但主要是因为你明确要求人们不要给你包名。但是，如果不这样做，我看不到任何人如何帮助您解决问题。

# java - JAVA：了解调用静态方法的方法/类

> ID：11014877
> 
> 赞同：4
> 
> 时间：2012-06-13T12:32:19.897
> 
> 标签：java

我想知道java中是否有办法找出调用某个静态方法的类/对象。

例子：

```
public class Util{
 ...
 public static void method(){}
 ...
}

public class Caller{
 ...
 public void callStatic(){
   Util.method();
 }
 ...
} 
```

我可以查出是否`Util.method`是从`Caller`课堂上调用的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T12:34:43.933

您可以`Thread.currentThread().getStackTrace()`在`Util.method`.

`Util.method`在你可以做这样的事情之前得到最后一个电话：

```
public class Util {
 ...
 public static void method() {
    StackTraceElement[] st = Thread.currentThread().getStackTrace();
    //st[0] is the call of getStackTrace, st[1] is the call to Util.method, so the method before is st[2]
    System.out.println(st[2].getClassName() + "." + st[2].getMethodName());
 }
 ...
} 
```

# c# - 如何使用 NumberFormatInfo 删除负值的括号

> ID：11014878
> 
> 赞同：11
> 
> 时间：2012-06-13T12:32:19.997
> 
> 标签：c#, .net, globalization, iformatprovider

我们目前正在使用以下内容在我们的 Web 应用程序中创建美元值：

```
string.Format("{0:C0}", dollarValue ); 
```

在此示例中，如果 DollarValue 为 145，那么我们将看到：$145。如果是 -145，那么我们将看到 ($145) 而不是 -$145。请注意，对我们来说，dollarValue 是一个 double，但它可以是任何数字类型。我认为。

无论如何，我想要的是 145 美元或 -145 美元。

现在，根据我的研究，可以使用 NumberFormatInfo 类来做到这一点。我不知道如何使用它，也找不到任何有效的例子。我确实在这里看到了这个问题：[C# Creating a custom NumberFormatInfo to display "Free" when a currency value is $0.00](https://stackoverflow.com/questions/3866796/c-sharp-creating-a-custom-numberformatinfo-to-display-free-when-a-currency-val)但是来自这个问题的 MSDN 示例似乎与我真正想做的有点不同。

我意识到，我需要做以下事情：

```
double dollarValue = -145d;
string myMoney = dollarValue.ToString( "C0", someIFormatProvider ); 
```

其中 someIFormatProvider 可能是 NumberFormatInfo 类型。现在，我所做的是：

```
NumberFormatInfo ni = new NumberformatInfo();
ni.CurrencyNegativePattern = 1; // The value 1 should mean not to use parenthesis
string myMoney = dollarValue.ToString( "C0", ni ); 
```

...我得到一个“实例是只读的”异常。虽然 CurrencyNegativePattern 属性的“文档”说您可以设置和获取值，但显然您不能。此外，NumberFormatInfo 是一个密封类。我不能轻松地基于它创建一个新类并覆盖该值。

我不知道如何处理这个问题。现在，我的解决方法是否定我的负值并获得我`string.Format(...)`再次做的积极结果。是的，我意识到这前面没有负号，但是，当然，这很容易通过根据需要在结果前面添加“-”来解决。

有人可以为我提供一个工作示例，说明如何在这种情况下正确有效地使用 NumbefFormatInfo 类吗？谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-13T12:51:27.273

您可以复制 中的`NumberFormat`属性`CurrentCulture`（如果您全球化应用程序，这将确保您保持正确的货币符号）。之后，只需将[`CurrencyNegativePattern`](http://msdn.microsoft.com/en-us/library/system.globalization.numberformatinfo.currencynegativepattern.aspx)属性设置为所需的值并传入你`NumberFormatInfo`的`double.ToString()`函数，如下所示：

```
NumberFormatInfo noParens = (NumberFormatInfo)CultureInfo.CurrentCulture.NumberFormat.Clone();
noParens.CurrencyNegativePattern = 1;
double dollarValue = -145d;
string output = dollarValue.ToString("C0", noParens); // outputs -$145 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T12:38:04.963

试试这个...

```
string.Format( "{0:$#.;-$#.}", -145 ) 
```

或者

```
dollarValue.ToString("$#.;-$#.") 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-13T12:41:56.820

```
double dollarValue = -145d;
 System.Globalization.CultureInfo modCulture = new System.Globalization.CultureInfo("en-US");
 string mymoney = dollarValue.ToString("C", modCulture);
          MessageBox.Show(mymoney); 
```

如果您的操作系统当前文化是 en-US，那么您不需要以下行

```
System.Globalization.CultureInfo modCulture = new System.Globalization.CultureInfo("en-US"); 
```

代码将是

```
double dollarValue = -145d;
string mymoney = dollarValue.ToString("C"); 
```

如果你想使用 NumberFormatInfo

```
double dollarValue = -145d; 
System.Globalization.CultureInfo modCulture = new System.Globalization.CultureInfo("en-US");
     NumberFormatInfo number = modCulture.NumberFormat;
     string mymoney = dollarValue.ToString("C", number); 
```

其他方式

```
double dollarValue = -145d;
System.Globalization.CultureInfo modCulture = new System.Globalization.CultureInfo("en-US");
NumberFormatInfo number = modCulture.NumberFormat;
string mymoney = dollarValue.ToString(String.Format("C",number));
Console.WriteLine(mymoney); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-13T12:43:20.850

'instance is ReadOnly' 表示您有一个`NumberFormatInfo`. 您可以通过克隆只读实例来获取可写实例：

```
NumberFormatInfo writeable = (NumberFormatInfo) ni.Clone(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-13T12:43:52.963

您确定不能分配 CurrencyNegativePattern 吗？我试过这段代码：

```
double dollarValue = -145d;
System.Globalization.NumberFormatInfo ni = new System.Globalization.NumberFormatInfo();
ni.CurrencyNegativePattern = 1;
dropDownList.Items.Add(new ListItem(dollarValue.ToString("C0", ni))); 
```

这就是成功。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-13T12:51:32.237

为了确保你保持在“美国背景”中，我会做这样的事情：

```
double val = -145d;
NumberFormatInfo nfi = new CultureInfo("en-US").NumberFormat;
nfi.CurrencyNegativePattern = 1;
val.ToString("C0", nfi).Dump(); 
```

来自`Dump`LinqPad，`-$145`结果显示。

你得到的错误感觉就像它来自你得到这样的`NumberFormatInfo`东西：

```
NumberFormatInfo nfi = Thread.CurrentThread.CurrentCulture.NumberFormat; 
```

在这种情况下，我会用这样的东西代替：

```
NumberFormatInfo nfi = (NumberFormatInfo)Thread.CurrentThread.CurrentCulture.NumberFormat.Clone(); 
```

# linux - 在emacs中取消设置键向上和向下翻页

> ID：11014881
> 
> 赞同：3
> 
> 时间：2012-06-13T12:32:27.243
> 
> 标签：linux, emacs, elisp

我可以使用以下功能取消设置左右键。

```
(global-unset-key [left])
(global-unset-key [up])
(global-unset-key [right])
(global-unset-key [down]) 
```

但是为什么我不能使用 global-unset-key 取消向上和向下翻页？下面的代码不起作用。

```
(global-unset-key [pgup])
(global-unset-key [pgdn]) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T13:30:44.843

您可以使用`C-h k *key-you-want-to-look*`.

```
;;; from *help* buffer, after C-h k pagedown
;; <next> runs the command scroll-up, which is an interactive built-in
;; function in `C source code'.

;;; from *help* buffer, after C-h k pageup
;; <prior> runs the command scroll-down, which is an interactive built-in
;; function in `C source code'.

(define-key (current-global-map) (kbd "<next>") nil) ; use whatever
(global-unset-key (kbd "<prior>"))                   ; you like 
```

# java - 没有结果时，executeQuery(String sql) 返回什么？

> ID：11014886
> 
> 赞同：8
> 
> 时间：2012-06-13T12:32:49.870
> 
> 标签：java, sql, jdbc

> **可能重复：**
> [如何检查结果集是否有一行或多行？](https://stackoverflow.com/questions/2591732/how-to-check-if-resultset-has-one-row-or-more)

`executeQuery(String sql)`当 SQL Query 的结果为零行> 时会返回什么？如果它返回一个`ResultSet`对象，我们将如何检测 SQL 查询没有返回任何内容。

假设 SQL 查询是一个`SELECT`语句。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-13T12:36:46.200

你检查[过 ResultSet 的下一个方法](http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/ResultSet.html#next%28%29)吗？最初 ResultSet 的光标指向第一行之前，第一次调用 next() 返回 false 意味着 ResultSet 中没有数据。请参阅[如何获取 ResultSet 的大小？](https://stackoverflow.com/questions/192078/how-do-i-get-the-size-of-a-java-sql-resultset)，因为 Java 中的结果集没有直接的 size() 或 length() 方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-13T12:37:47.973

resultSet 的 next() 方法将光标移动到下一行并返回一个布尔值，指示是否已读取数据。通常它与while循环一起使用

`while (myresultset.next()){ //some statement; }` 在您的情况下，如果没有数据与查询匹配，则 next 方法的第一次调用将返回 false。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-13T12:38:05.120

它将返回一个结果集。采用

> boolean hasResult = rs.next();

找出是否有结果行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-13T12:36:52.033

零行的空结果集，`resultSet.next()`即将返回 false。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-13T12:38:30.313

如果`ResultSet`返回为空，则`next()`在此 ResultSet 上第一次调用方法的输出将返回 false。

基本上，通常的程序是其中的一些东西

```
ResultSet rs = executeQuery("select ....");
while(rs.next()) {
    //do something with the results
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-13T12:51:23.717

`ResultSet`如果查询获取 0 条记录，它将返回空。最初游标指向结果集之前，当我们调用`resultset.next()`游标移动到下一个`resultset`（迭代器模式）并返回`true`如果有任何结果存在，否则它只是返回`false`。在这种情况下，第一次调用`next()`方法返回`false`。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-06-13T12:44:13.247

您可以使用该`rs.getRow()`方法。

```
 if(rs.getRow() >= 1){
      //Has at least 1 result
    } 
```

[来源：](http://www.docjar.com/html/api/java/sql/ResultSet.java.html)

```
/**
    * Retrieves the current row number.  The first row is number 1, the
    * second number 2, and so on.
    * <p>
    * <strong>Note:</strong>Support for the <code>getRow</code> method
    * is optional for <code>ResultSet</code>s with a result
    * set type of <code>TYPE_FORWARD_ONLY</code>
    *
    * @return the current row number; <code>0</code> if there is no current row
    * @exception SQLException if a database access error occurs
    * or this method is called on a closed result set
    * @exception SQLFeatureNotSupportedException if the JDBC driver does not support
    * this method
    * @since 1.2
 */
      int getRow() throws SQLException; 
```

# jdbc - Glassfish 上的 JDBC 缓存

> ID：11014887
> 
> 赞同：1
> 
> 时间：2012-06-13T12:32:52.703
> 
> 标签：jdbc, glassfish

我`OutOfMemoryError`在 Glassfish 上运行了一个长时间运行的后台进程。内存分析表明，在抛出错误时，50% 的堆专用于`com.mysql.JDBC4ResultSet`(28.1%) 和`com.mysql.jdbc.StatementImpl`(22.1%) 的实例。

我的代码的结构是假设我的 JDBC 对象一旦失去范围就会被垃圾收集，但显然情况并非如此。我最初使用 JPA 执行此操作，但内存负载爆炸式增长，因此我恢复为 JDBC，但仍然出现大量内存泄漏，包括对 JDBC 语句和结果集的引用。

所以我想知道 Glassfish 是否正在缓存这些查询以及如何禁用它，数据对象非常大，我真的不需要缓存它们。

我在下面包含了由一个类和两个方法组成的代码结构（为简洁起见进行了修改）。

```
@Stateless
public class WSDFileCollector implements Collector {

    @PersistenceContext
    private EntityManager em;

    @Override
    @Asynchronous
    public void run(final CollectorEntity collector) throws SQLException {

        final Connection connection = em.unwrap(Connection.class);
        final String table = "tmp_sat_" + collector.getSite().getId();
        final String column = "filename";
        try {
            // Create temporary table
            // Scan files & folders under a given directory.
            // Load filenames into MySQL Temporary table.

            final Statement statement = connection.createStatement();
            final ResultSet results = statement.executeQuery("SELECT filename FROM temporary_table WHERE filename NOT IN (SELECT filename FROM existing_files");
            while (results.next()) {
                final File file = new File(collector.getPath(), results.getString("filename"));
                if (file.isFile()) {
                    extractAndSave(file, collector);
                }
            }
        } finally {
            // Delete temporary table
        }
    }

    @TransactionAttribute(TransactionAttributeType.REQUIRES_NEW)
    private void extractAndSave(final File file, final CollectorEntity collector) {
        final Connection connection = em.unwrap(Connection.class);
        try {
            // Begin a transaction
            // INSERT new file into existing_files

            // Scan the file, extract data and insert into multiple database tables.

            // Commit transaction
        } catch (final SQLException | FileNotFoundException ex) {
            // Rollback transaction
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T12:51:53.937

当您从实体管理器中解开连接并因此完全接管了对您自己手中资源的控制时，您应该在与获取它们的位置相同的块中*自己*明确地关闭它们遵循标准的 JDBC 习惯用法。`finally``try`

```
// Declare resources.
Connection connection = null;
Statement statement = null;
ResultSet resultSet = null;

try {
    // Acquire resources.
    connection = getConnectionSomehow();
    statement = connection.createStatement();
    resultSet = statement.executeQuery(sql);

    // ...
} finally {
    // Close resources in reversed order.
    if (resultSet != null) try { resultSet.close(); } catch (SQLException logOrIgnore) {}
    if (statement != null) try { statement.close(); } catch (SQLException logOrIgnore) {}
    if (connection != null) try { connection.close(); } catch (SQLException logOrIgnore) {}
} 
```

否则，它们将保持打开状态，并且确实会在服务器和数据库中泄漏。

# mapping - 如何使用 TFS 集成工具将 TFS 2010 工作项的链接映射到另一个工作项？

> ID：11014888
> 
> 赞同：1
> 
> 时间：2012-06-13T12:32:57.213
> 
> 标签：mapping, tfs-workitem, tfsintegrationplatform

不幸的是，我们遇到了一个问题，即我们必须在 TFS 2010 安装的同一团队项目中将“用户故事”类型的工作项“迁移”到另一个自定义工作项类型。

我设法使用 TFS 集成工具和[IntegrationPlatformMappingTool](http://tfsintegrationmapper.codeplex.com/releases/view/59309)（可以在 Codeplex 上找到）使大部分字段映射工作。但是，我确实不知道如何将有关链接工作项的信息迁移到新的工作项类型。在用户故事的工作项类型定义中，我通常为关联表单中的每个控件都有一个“字段名称”，例如 System.AreaPath 或类似的东西。对于我没有该信息的链接，工作项类型设计器仅显示类型为“LinkControl”且字段名称为空的控件。

使用 TFS 集成工具时，有没有办法迁移现有链接？我将如何在映射文件中执行此操作？

谢谢，

G。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T19:50:38.307

我并不是说这是一个“可接受的答案”，但链接不是工作项中的字段，这就是为什么你找不到它们的映射。

这篇[文章](http://blogs.msdn.com/b/willy-peter_schaub/archive/2011/10/20/tfs-integration-tools-can-i-migrate-all-work-items-from-one-team-project-collection-to-another.aspx)倾向于确认您不会在迁移的工作项之间建立链接，而只会在变更集和工作项之间建立链接。

我无法进一步帮助您，但这是一个开始（总比没有好！:)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T00:54:34.150

如果您使用的是 TFS 集成平台 ( [http://tfsintegration.codeplex.com/](http://tfsintegration.codeplex.com/) )，则有一个特定部分用于迁移链接。这是一个例子

```
<Linking>
  <LinkTypeMappings>
    <LinkTypeMapping LeftMigrationSourceUniqueId="{GUID for Left Migration Source}" LeftLinkType="System.LinkTypes.Dependency" RightLinkType="System.LinkTypes.Dependency" RightMigrationSourceUniqueId="{GUID for Right Migration Source" />
  </LinkTypeMappings>
</Linking> 
```

这些定义不是配置 XML 的字段映射部分的一部分，而是与`Sessions`元素处于同一级别。

# backbone.js - 如何即时修改 Backbone View 的“el”键？

> ID：11014892
> 
> 赞同：0
> 
> 时间：2012-06-13T12:33:07.947
> 
> 标签：backbone.js

我创建了一个主干视图`A`并且`B`：

```
var App = {
    run: function () {
        this.aview = new aView();
        this.bview = new bView();
    }
};

// First View
var aView = Backbone.View.extend({
    el: '#a', 
    render: function () {
       this.$el.html('foobar A');
    }        
});

// Second View
var bView = Backbone.View.extend({
    el: '#b', 
    render: function () {
       this.$el.html('foobar B');

       // want to put `foobar A` content into #c which is inside #b 
       // but aView's el lets it be into #a.
       // One Possible solution would be to create a new instance of aView 
       // and change its `el` 
       var tempaView = new aView({ el: '#c' });
       tempaView.render();  // Now it puts `foobar A` into #c 
       // Or another solution would be to pass a new element as a param to 
       // App.aview.render('#c'); and check whether param is undefined, otherwise
       // the content will be added into #param (in this case #c). 
    }
});

App.aview.render(); // Puts `foobar A` into <body>        
App.bview.render(); // Puts `foobar B` into #b and `foobar A` into #c 
```

所以，我的问题是哪一个是正确的方法？除了这个，还有人有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T12:54:45.963

[http://backbonejs.org/#View-setElement](http://backbonejs.org/#View-setElement)

# tomcat - Tomcat 7 无法启动

> ID：11014893
> 
> 赞同：4
> 
> 时间：2012-06-13T12:33:17.670
> 
> 标签：tomcat, tomcat7

我有 Tomcat 7 作为服务在 win 7 服务器上运行一年多，没有任何问题
服务器有足够的硬盘或内存，
今天服务器关闭，试图启动它我收到错误：

```
2012-06-13 15:15:22 
Commons Daemon procrun stdout initialized
Error occurred during initialization of VM
Unable to load native library: Can't find dependent libraries 
```

我将服务属性的 java 选项卡上的 vm 参数从：
`C:\Program Files\Java\jre6\bin\client\jvm.dll`
切换到：
`C:\Program Files\Java\jdk1.6.0_23\jre\bin\client\jvm.dll`

现在它似乎工作正常。
突然出现此错误的原因可能是什么？
谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T14:31:07.367

我将 JRE 重新安装到版本[6u25](http://www.oracle.com/technetwork/java/javase/downloads/jre-6u25-download-346243.html)并且 Tomcat 能够重新启动。

我想一定有什么东西弄乱了 JRE 的依赖关系。服务器上最近的唯一安装是几天前。在那之前，它自年初以来就没有改变过。我在这里列出了最近的安装以供参考，但我并不声称知道它们是问题的原因：

*   Microsoft SQL Server 2008 R2 管理对象 (x64)
*   Microsoft Web 平台安装程序 3.0
*   Microsoft SQL Server 系统 CLR 类型 (x64)
*   微软网络部署 2.0
*   谷歌浏览器

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T21:08:57.533

I just had this problem occur after allowing the automatic update to Java JRE 7u15\. After checking all the obvious and the Tomcat settings, I noticed that the files in the JRE bin folder did not have any with names after 'm'. So, I uninstalled the Java JRE and did a fresh install. Tomcat started without any problem. Thus, in my case it appears the culprit was a bad update even though it said it installed everything fine.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-10T09:05:26.360

AFAIK，

Windows 上的 Sun/Oracle Java 6 SDK 安装程序会在其 JDK 文件夹中安装另一个 JRE。

显然，在您的服务器的“正常”JRE 安装中“发生”了一些事情，可能是更新失败，或者有人卸载了似乎是 JRE 的冗余副本。

JRE 安装程序存在/曾经存在一个已知问题：

[http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7114143](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7114143)

有两种不同的 JVM，即“客户端”虚拟机和“服务器”虚拟机，在某些系统上，您只能找到服务器或客户端 vm 版本，而在某些系统上两者都有。

C:\Program Files\Java\jre6\bin\client\jvm.dll 和/或 C:\Program Files\Java\jre6\bin\server\jvm.dll

Java 6 在 Windows 上的预期行为是始终安装客户端 jvm：

[http://docs.oracle.com/javase/6/docs/technotes/guides/vm/server-class.html](http://docs.oracle.com/javase/6/docs/technotes/guides/vm/server-class.html)

[http://www.oracle.com/technetwork/java/hotspotfaq-138619.html#compiler_types](http://www.oracle.com/technetwork/java/hotspotfaq-138619.html#compiler_types)

# netty - Netty 架构——再次关于 NioWorker 循环的问题

> ID：11014897
> 
> 赞同：0
> 
> 时间：2012-06-13T12:33:25.123
> 
> 标签：netty

呃，这里有一个关于netty nioWorker [Netty架构的问题——关于NioWorker循环的问题](https://stackoverflow.com/questions/10189603/netty-architecture-questions-about-nioworker-loop)

但我有不同的关注点，我发现

```
processRegisterTaskQueue();
processEventQueue();
processWriteTaskQueue(); 
```

虽然这三个队列包含 Runnable 类型，但是调用了 run() 方法

```
private void processWriteTaskQueue() throws IOException {
        for (;;) {
        final Runnable task = writeTaskQueue.poll();
        if (task == null) {
            break;
        }

        task.run();
        cleanUpCancelledKeys();
    }
} 
```

表示handle queues同步，可能handler queues太长，无法及时处理processSelectedKeys？</p>

顺便说一下，当我写数据的时候，netty把数据推到writeBufferQueue，然后把一个写任务推到writeTaskQueue，然后在执行processWriteTaskQueue的时候处理这​​个任务

```
 if (channel.writeTaskInTaskQueue.compareAndSet(false, true)) {
            // "add" the channels writeTask to the writeTaskQueue.
            boolean offered = writeTaskQueue.offer(channel.writeTask);
            assert offered;
 } 
```

为什么不直接在 Niowork 循环中处理数据？比如 processWriteBufferQueue()？

有人可以解释一下吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T01:51:56.033

这篇文章有两个问题。

第一个问题是：是否有可能处理程序队列太长而无法及时执行`process SelectKeys()`？

是的。但是，除非您的处理程序实现故意滥用，否则它似乎不会发生。

第二个问题是：为什么写操作总是在I/O循环线程中进行？

否则 1）如果您从不同线程写入，您将看到写入器线程之间的大量争用，2）由于可能的竞争条件（连接重置等），您将看到各种套接字异常，以及 3）Netty 内部将变得更加复杂处理这样的条件。

请注意，在 Netty 4 中，线程模型变得更加严格，事件循环实现变得更加简单，所以你可能也想看看那里。

# postgresql - 两列上的 Postgres 唯一约束：整数和布尔值

> ID：11014898
> 
> 赞同：9
> 
> 时间：2012-06-13T12:33:25.200
> 
> 标签：postgresql, constraints, unique

我想找到一种方法在我的数据库中存储一个主题的多个地址，每个主题只有一个默认地址。

长话短说，假设我们有一张桌子：

```
CREATE TABLE test
(
  id integer NOT NULL,
  active boolean NOT NULL,
  CONSTRAINT pk_id PRIMARY KEY (id)
) 
```

对于表中的每个 id，最多只能有 1 个真正的活动值。

我怎么能做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-13T12:37:53.240

[部分索引](https://www.postgresql.org/docs/10/static/indexes-partial.html)是你想要的：

```
create unique index some_index on test (id) where active; 
```

正如@ThiefMaster 所说，应该删除主索引。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-09-09T21:41:47.483

在这个问题的情况下，不需要如前所述。

但仅供参考，您*可以*将约束设置为 2 个或更多（非主键）具有不同类型的列。例如：

```
ALTER TABLE table_name ADD CONSTRAINT constraint_name UNIQUE (integer_column, boolean_column); 
```

有关详细信息，请参阅 Postgres 文档的[Constraints](http://www.postgresql.org/docs/current/static/ddl-constraints.html)，“唯一约束”部分。去引用：

> 如果唯一约束引用一组列，则列以逗号分隔…</p>
> 
> 这指定指定列中的值组合在整个表中是唯一的，尽管任何一列不必是（并且通常不是）唯一的。

**注意：** 部分[索引](http://www.postgresql.org/docs/current/static/indexes-partial.html)设置建立在表子集上的索引，其用途完全不同。

# maven - 带有类卸载的 Maven exec

> ID：11014902
> 
> 赞同：0
> 
> 时间：2012-06-13T12:33:41.130
> 
> 标签：maven

如何将 classunloading 参数传递给 mvn？

mvn -XX:+CMSClassUnloadingEnabled exec:java -Dexec.mainClass="Test"

什么是让它工作的正确格式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T12:44:08.737

`exec:java`目标执行**[当前 JVM](http://mojo.codehaus.org/exec-maven-plugin/java-mojo.html)**中的主类。这意味着您需要使用所需的 JVM 参数运行 Maven 本身。将 JVM 参数传递给 Maven 的一个好方法是通过`MAVEN_OPTS`环境变量：

```
$ export MAVEN_OPTS=-XX:+CMSClassUnloadingEnabled
$ mvn exec:java -Dexec.mainClass="Test" 
```

# .htaccess - 在 htaccess 中 URL 重写查询字符串

> ID：11014904
> 
> 赞同：0
> 
> 时间：2012-06-13T12:33:50.257
> 
> 标签：.htaccess, url, mod-rewrite, rewrite, query-string

我花了几个小时试图实现我认为很容易的事情。我有`domain.tld/index.php?site=Page`并且想要打开它`domain.tld/Page`。这`?site=Page`是相对于它从 MySQL 数据库中获得的。

在某些时候，我让它无限循环，但其他一切都没有影响。这可能与我不理解 RewriteRule 和 Cond 中的 ^ 有关。但结构是`/var/www/whine/skovtrup`——`whine`是域，`skovtrup`是一个文件夹，我在其中使用需要重写的网站。 `<Directory>`在启用站点的文件中设置为`/var/www/whine`。

我真的希望你们能帮助我。

简单总结一下：

*   将 ?site=Page 替换为 /Page/
*   页面是相对的。
*   放置在 /var/www/whine/skovtrup

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T13:10:07.430

这段代码对你有帮助吗？

```
RewriteEngine On
RewriteBase /skovtrup/
RewriteRule ^index\.php$ %{QUERY_STRING} [C]
RewriteRule site=(.*) /skovtrup/$1? [R=301,L] 
```

`^`char 代表 url 开始和`$`结束。

对于我的代码，请在此处查看一些说明：[在 .htaccess url rewriting 之后重定向旧页面 url](https://stackoverflow.com/questions/11011526/redirect-old-page-url-after-htaccess-url-rewriting)

# cakephp - cakephp 2.0 分页器问题

> ID：11014906
> 
> 赞同：0
> 
> 时间：2012-06-13T12:33:55.247
> 
> 标签：cakephp, pagination, cakephp-2.0, paginator

我目前正在尝试在两种不同的模型上设置分页。在 Controller 类中，我正在执行以下操作：

```
 var $paginate = array(
        'Model1' => array('limit' => 10, 'recursive' => 0, 'model' => 'Model1, 'order' => array('field1' => 'ASC'), 'paramType' => 'querystring'),
        'Model2' => array('limit' => 10, 'recursive' => 0, 'model' => 'Model2', 'order' => array('field2' => 'ASC'), 'paramType' => 'querystring')
    );

    function view($id = null) {

        // ...

        $models1 = $this->paginate('Model1', array('Model1.model_id => $id));        
        if ($models1) {
            $this->set('models1', $models1);
        }
        $models2 = $this->paginate('Model2', array('Model2.model_id => $id));
        if ($models2) {
            $this->set('models2', $models2);
        }
    } 
```

在视图中，链接是使用生成的

```
 <?php echo $this->Paginator->numbers(array('model' => 'Model1')); ?>
    <?php echo $this->Paginator->numbers(array('model' => 'Model2')); ?> 
```

结果，我得到了正确的页数，但链接错误。

1.  被`id`忽略，即代替`controller/action/id?page= ...`，我得到`controller/action?page= ...`。
2.  这部分链接`sort=Model1.field1&direction=ASC`也不起作用。我可以用`sort=field1&direction=ASC`. 但是如何区分第一个或第二个模型排序呢？

顺便说一句，所有这些在使用 CakePHP 1.3 时都运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T17:36:50.233

您已经`Model1`对这两个电话进行了分页，当然第二个电话应该是：

```
$models2 = $this->paginate('Model2', ... 
```

# javascript - Javascript：更改元素节点

> ID：11014907
> 
> 赞同：0
> 
> 时间：2012-06-13T12:33:58.993
> 
> 标签：javascript, xml, nodes

所以我在 JavaScript 变量中加载了一个 xml 文档。

XML 看起来像这样：

```
<root>  
    <pp>test<ii>sample italic</ii> text after italic</pp>  
</root> 
```

然后我有一个输入框，其中`<pp>`元素的内容被写出。

像这样：`test<ii>sample italic</ii> text after italic`

请注意，输入框中的文本包含 Xml 标记。

然后用户可以更改输入框中的文本。像这样：`test<ii>sample BB italic</ii> and <bb>bold </bb> text after`

现在我需要将此修改后的文本保存回 Xml 变量。

我怎么做？

**编辑 1**
问题与保存到实际文件无关。我只需要将修改后的数据保存/更改回 Xml 变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T12:43:29.243

也许您可以查看此链接，它可能会对您有所帮助：[http ://www.ehow.com/how_5933380_change-values-xml-javascript.html](http://www.ehow.com/how_5933380_change-values-xml-javascript.html)

或者在这里，这是两个粘性教程： http: [//www.devguru.com/features/tutorials/xml_javascript/xml_javascript.asp](http://www.devguru.com/features/tutorials/xml_javascript/xml_javascript.asp)

你是从文件中读取你的xml吗？

**创建节点：**

var theNewParagraph = document.createElement('p'); var theTextOfTheParagraph = document.createTextNode('一些内容。'); theNewParagraph.appendChild(theTextOfTheParagraph); document.getElementById('someElementId').appendChild(theNewParagraph);

取自： http: [//www.howtocreate.co.uk/tutorials/javascript/dombasics](http://www.howtocreate.co.uk/tutorials/javascript/dombasics)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T12:37:50.853

您需要通过 Ajax 将数据发送到服务器端脚本，该脚本处理文件的重写。客户端 Javascript 无法解决此问题。

# vpn - 3G 动态 DNS

> ID：11014908
> 
> 赞同：2
> 
> 时间：2012-06-13T12:34:05.883
> 
> 标签：vpn, dyndns, 3g-network

我正在做一个项目，我们必须从位于远程位置（不同国家/地区）的 DVR 盒子下载视频。问题是客户端使用 3G 路由器和 Cisco vpn 客户端与他们在不同商店的数据中心和应用程序进行通信。他们使用 IPSec 进行通信。还有一件事，DVR盒子和商店的应用程序没有直接连接。对于 DVR 设备，他们使用动态 DNS。问题是我在互联网上找不到任何有用的东西来了解动态 DNS 如何与 3G 一起工作，这可能吗？我是否还需要 vpn 连接才能与 DVR 盒通信？我很困惑，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T18:45:21.730

使用 3G，您很可能通过您的移动运营商 NAT 进行连接。要检查这一点 - 查看分配给 3G 路由器的**外部**IP 地址，它很可能以 10\. 或 172.16.....172.31 或 192.168 开头。在这样的设置中，动态 DNS 将不会结冰 - 在这种情况下，DNS 将反映移动提供商 NAT 的 IP，并且您不能在这些上转发端口。

移动运营商可能会为您分配一个真实 IP，甚至是静态 IP，有时只需支付少量费用。要么 - 这个，要么 VPN。

# dynamics-crm-4 - 如何使用 CRM 5 SDK 调用 CRM 4 网络服务？

> ID：11014912
> 
> 赞同：0
> 
> 时间：2012-06-13T12:34:14.983
> 
> 标签：dynamics-crm-4

是否可以使用 CRM 5 sdk 调用 CRM 4 网络服务。我有一个项目正在访问 CRM 2011 网络服务，现在我们必须访问 CRM 4 网络服务以获得相同的逻辑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T18:19:22.677

是的，如果您在 CRM 2011 平台上进行开发，则可以调用 V4 Web 服务。

使用端点 URL 是 http:///MSCrmServices/2007/CrmService.asmx

Office 365 或 Microsoft 的托管解决方案存在一些“问题”：“Microsoft Office 365 组织不支持 2007 服务端点。2007 发现服务 (CrmDiscoveryService.asmx) 不返回 Office 365 组织，您不能使用 CrmService。 asmx 和 MetadataService.asmx 为 Office 365 组织提供服务。”

对于 2007 端点上的整个 MSDN 文章，请使用以下链接。[http://msdn.microsoft.com/en-us/library/gg334316.aspx](http://msdn.microsoft.com/en-us/library/gg334316.aspx)

我个人还没有尝试过，它仍然在待办事项列表中:)

# java - 使用invokedynamic实现多重dispatch

> ID：11014917
> 
> 赞同：8
> 
> 时间：2012-06-13T12:34:24.327
> 
> 标签：java, dynamic, overloading, dispatch, multiple-dispatch

我想知道是否可以使用 Java7 的新`invokedynamic`字节码指令来实现Java 语言的[多重分派](http://en.wikipedia.org/wiki/Multiple_dispatch)。java.lang.invoke 下的新 API 是否有助于执行这样的事情？

我正在考虑的场景如下所示。（这看起来像是访问者设计模式的一个应用案例，但可能有一些原因表明这不是一个可行的选择。）

```
class A {} 
class A1 extends A {}
class A2 extends A {}

class SomeHandler {
    private void doHandle(A1 a1) { ... }
    private void doHandle(A2 a2) { ... }
    private void doHandle(A a) { ... }

    public void handle(A a) {
        MultipleDispatch.call(this, "doHandle", a);
    }
} 
```

然后库类`MultipleDispatch`会做一些类似的事情：

```
class MultipleDispatch {

    public static Object call(Object receiver, String method, Object...arg) {
        // something like that in byte code
        #invokeDynamic "doHandle" "someBootstrap"
    }

    static CallSite someBootstrap {
        // resolve that dynamic method call.
    }
} 
```

（我知道[MultiJava](http://multijava.sourceforge.net)，但这可以以纯 Java 的方式实现吗？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T09:19:48.027

由于我没有使用invokedynamic的经验，我不知道性能和类型安全性有多好，但只能给出**一些指示**：

*   [达芬奇机器项目](http://openjdk.java.net/projects/mlvm/)通过invokedynamic 提供多重调度（参见Multiple Dispatch/src/invokedynamicmultipledispatch/）；
*   Charles Oliver Natter[谈到了在 JAX2012 上的 invokedynamic 应用程序](http://markmail.org/message/w2lli2cigtly67pa)。幻灯片根本没有详细介绍，但我想我在视频或播客中看到了更多关于 JAX2012 的详细信息，我现在找不到。
*   [Christopher Dutchyn 的 JVM Multiple Dispatch](http://static.usenix.org/events/coots01/dutchyn/dutchyn_html/)是一种没有调用动态的替代方法。[他的 COOTS '01 论文](http://static.usenix.org/events/coots01/dutchyn/dutchyn_html/)和[这些幻灯片](http://wiki.jvmlangsummit.com/pdf/17_Dutchyn_mdj.pdf)有很多性能信息/基准测试（在你完成论文后很好阅读；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-12T03:45:20.480

指令invokedynamic是纯粹的JVM指令，它与动态调度无关。调度由包含多个方法句柄实例的方法句柄（方法句柄图和方法句柄树也可以）完成。图（树）中的一条路径代表一个调度路径。

对于您给定的示例，我可能会构建一个图表（不同的人可能有不同的图表结果）。在这个图中，图中方法句柄的遍历就是disptach完成的方式。

![示例方法句柄树](../Images/2721b9414d47c68a9ebf9c5d732f84cd.png)

# boost - boost::asio 无限循环

> ID：11014918
> 
> 赞同：0
> 
> 时间：2012-06-13T12:34:29.693
> 
> 标签：boost, boost-asio, tcpserver

这是我的`boost::asio`服务器

```
class Server: public boost::enable_shared_from_this<Server>, private boost::noncopyable{
  private:
    boost::asio::ip::tcp::acceptor _acceptor;
    boost::asio::ip::tcp::socket   _socket;
  public:
    explicit Server(boost::asio::io_service& ios, boost::asio::ip::tcp::endpoint& endpoint):_acceptor(ios, endpoint), _socket(ios){

    }
    void start(){
       accept();
    }
    void accept(){
       std::cout << "accepting " << std::endl;;
      _acceptor.async_accept(_socket, boost::bind(&Server::handler, this, boost::asio::placeholders::error));
    }
    void handler(const boost::system::error_code &ec){
       const std::string message = "HTTP/1.1 200 OK\r\nContent-Length: 13\r\n\r\nHello, world!";
       if(!ec){
         boost::asio::async_write(_socket, boost::asio::buffer(message), boost::bind(&Server::write_handler, this));
       }else{
         std::cout << ec << std::endl;
       }
       accept();
    }
    void write_handler(){

    }
    boost::asio::ip::tcp::socket& socket(){
      return _socket;
    }
};

int main(){
  boost::asio::io_service ios;
  const unsigned int port = 5050;
  boost::asio::ip::tcp::endpoint endpoint(boost::asio::ip::tcp::v4(), port);

  Server server(ios, endpoint);
  server.start();

  ios.run();
  return 0;
} 
```

它第一次以“你好世界”回应；然后它只是在`accept`<-->`handler`循环中循环并且不写欢迎消息。`ec`印刷

```
asio.misc:1
accepting 
asio.misc:1
accepting 
asio.misc:1
accepting 
asio.misc:1
accepting 
asio.misc:1
accepting 
asio.misc:1
accepting 
...... 
```

并且永不停止

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T13:06:13.180

无限循环是`_socket`被使用的结果。第一个`async_accept()`有效，因为`_socket`未使用。但是，永远不会关闭，因此对with的`_socket`其他调用将失败。的*peer*参数预计套接字未在使用中，因为它将使用套接字进行新连接。这可以通过以下任一方式解决：`async_accept()``_socket``async_accept()`

 **   为每个连接分配一个新的套接字。考虑通过`boost::shared_ptr`. 这允许服务器处理多个并发连接。
*   关闭`_socket`in `write_handler`，然后调用`accept()`. 这将服务器一次限制为一个连接。

另外，要小心`async_write()`. 底层缓冲存储器的所有权由调用者保留，调用者必须保证它在调用处理程序之前保持有效。在这种情况下，`message`将在调用之前从堆栈中弹出`write_handler()`。随着`message`存在`const`，考虑使其`static`保证其持续时间。

在将对象传递给调用的实例时使用`shared_from_this()`而不是。否则，可能会删除 指向的实例，因为引用计数仅在使用时正确发生。`this``bind``this``shared_from_this()`

最后，在打印时`boost::system::error_code`，使用`error_code.message()`方法得到更有意义的消息。在无限循环的情况下，它会打印“已经打开”。

这是一次支持一个连接的修改`handler()`和`write_handler()`代码：

```
void accept(){
   std::cout << "accepting " << std::endl;;
  _acceptor.async_accept(_socket, boost::bind(&Server::handler, shared_from_this(), boost::asio::placeholders::error));
}
void handler(const boost::system::error_code &ec){
   // Guarantee message will remain valid throughout the duration of async_write.
   static const std::string message = "HTTP/1.1 200 OK\r\nContent-Length: 13\r\n\r\nHello, world!";
   if(!ec){
     // write_handler will accept the next connection once it is done with the socket.
     boost::asio::async_write(_socket, boost::asio::buffer(message), boost::bind(&Server::write_handler, shared_from_this()));
   }else{
     std::cout << ec.message() << std::endl;
     // Try accepting on error.
     accept();
   }
}
void write_handler(){
   _socket.close();
   // Now that the socket is closed, new connectiosn can be accepted.
   accept();
} 
```*

# c++ - 从文件中删除特定行

> ID：11014929
> 
> 赞同：3
> 
> 时间：2012-06-13T12:35:11.597
> 
> 标签：c++, line, fstream

我正在尝试通过 id 从 C++ 中的文件中删除特定行，这是我的代码：

```
void deleteRow()
{
    ifstream inDb("files/students.dat", ios::in);
    if(!inDb)
    {
        cerr << "File could no be opened!\n";
    }

    cout << countRowsOfDb() << " records." << endl;

    Student *studentsArray[countRowsOfDb()];

    int n = 0;

    while(inDb >> id >> name >> grade >> points >> type)
    {
        studentsArray[n] = new Student(id, name, grade, points, type);
        n++;
    }

    inDb.close();

    for(int i = 0; i < countRowsOfDb(); i++)
    {
        cout << studentsArray[i]->id << " " << studentsArray[i]->name << " " << studentsArray[i]->grade << " "
             << studentsArray[i]->points << " " << studentsArray[i]->type << "\n";
    }

    cout << "\nWhich one you would like to delete? Enter an id: ";

    string term;
    cin >> term;

    ofstream outDb("files/students.dat", ios::out);
    if(!outDb)
    {
        cerr << "File could no be opened!\n";
    }

    for(int i = 0; i < countRowsOfDb(); i++)
    {
        if(studentsArray[i]->id != term)
        {
                outDb << studentsArray[i]->id << " " << studentsArray[i]->name << " " << studentsArray[i]->grade << " "
                      << studentsArray[i]->points << " " << studentsArray[i]->type << "\n";
        }
    }

    outDb.close();

    cout << "\nObject deleted!\n";
} 
```

我创建了一个输入文件流，然后获取所有行，使其成为对象数组并在屏幕上显示它们，然后通过输入 id 询问要删除哪个，当我输入 id 时，我试图把所有这些数组的元素只有没有具有相同 id 的元素，但它不起作用，之后文件中没有任何内容。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T13:00:21.377

里面有什么`countRowsOfDb()`？如果它打开文件并计算其中的行数（我不知道它还能做什么），那么它不会在最终循环中找到很多，因为创建具有相同名称的 ostream 将具有清空了文件。

更一般地说，这是一种非常低效的做事方式（如果文件格式出现错误，很容易失败）。处理此问题的最佳方法是使用`std::vector<Student>`, ：

```
studentVector.push_back( Student( id, name, grade, points, type ) ); 
```

在输入循环中。在所有后续循环中，`studentVector.size()`给出条目数，或者您可以使用迭代器。

更好的是`std::getline`在输入上使用，然后初始化一个`std::istringstream`来解析每一行。这将更可靠地捕获输入格式错误。就像是：

```
std::string line;
int lineNumber = 0;
while ( std::getline( inDb, line ) ) {
    ++ lineNumber;
    std::istringstream data( line );
    if ( data >> id >> name >> grade >> points >> type ) {
        studentVector.push_back( Student( id, name, grade, points, type ) );
    } else {
        std::cerr << "Format error in lne " << lineNumber << std::endl;
    }
} 
```

此外，写入单独的文件通常是一个更好的主意，然后在验证写入工作*后重命名它，即：*

```
std::ofstream outDb( "files/students.dat.new" );
//  Do output...
outDb.close();
if ( outDb ) {
    remove( "files/students.dat" );
    rename( "files/students.dat.new", "files/students.dat" );
} else {
    std::cerr << "Write error on output" << std::endl;
} 
```

当然，任何写入错误都应该导致 `EXIT_FAILURE`from的返回`main`。（这是全局变量或单例合理的一种情况——跟踪返回码。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T12:58:28.027

我通过添加一个重播内容的新函数使其工作，所以现在代码是：

```
void deleteRow()
{
    ifstream inDb("files/students.dat", ios::in);
    if(!inDb)
    {
        cerr << "File could no be opened!\n";
    }

    cout << countRowsOfDb() << " records." << endl;

    Student *studentsArray[countRowsOfDb()];

    int n = 0;

    while(inDb >> id >> name >> grade >> points >> type)
    {
        studentsArray[n] = new Student(id, name, grade, points, type);
        n++;
    }

    inDb.close();

    for(int i = 0; i < countRowsOfDb(); i++)
    {
        cout << studentsArray[i]->id << " " << studentsArray[i]->name << " " << studentsArray[i]->grade << " "
             << studentsArray[i]->points << " " << studentsArray[i]->type << "\n";
    }

    cout << "\nWhich one you would like to delete? Enter an id: ";

    string term;
    cin >> term;

    for(int i = 0; i < countRowsOfDb(); i++)
    {
        if(studentsArray[i]->id != term)
        {
            Student studentTemp(studentsArray[i]->id, studentsArray[i]->name, studentsArray[i]->grade, studentsArray[i]->points, studentsArray[i]->type);
            replaceRow(studentTemp);
        }
    }

    cout << "\nObject deleted!\n";
} 
```

并且替换功能是：

```
void replaceRow(Student student)
{
    ofstream outDb("files/students.dat", ios::out);
    if(!outDb)
    {
        cerr << "File could no be opened!\n";
    }

    outDb << student.getId() << ' ' << student.getName() << ' ' << student.getGrade()
          << ' ' << student.getPoints() << ' ' << student.getType() << endl;

    outDb.close();
} 
```

# regex - perl 相当于我的正则表达式来处理多行搜索

> ID：11014930
> 
> 赞同：1
> 
> 时间：2012-06-13T12:35:17.853
> 
> 标签：regex, linux, perl, unix, awk

我是正则表达式的新手，我无法使用 grep 处理正则表达式搜索 .. 所以想尝试 perl

你能给出一个相当于正则表达式的perl吗

```
^\s*\*\s*\[ \][^\*]+?(\w*\:[^\*]+\d$)|([^\*]+[.]com[.]au$) 
```

我想在linux中的文件上执行它..多行搜索...有人可以帮我吗？

甚至可以处理我的操作的 awk 命令也可以。

并且已经在以下链接中进行此工作

[带有正则表达式的 grep 范围](https://stackoverflow.com/questions/11014032/scope-of-grep-with-regular-expressions/11014110#11014110)

[用于 grep 文件特定段落的正则表达式](https://stackoverflow.com/questions/11009386/a-regular-expression-to-grep-specific-paragraphs-of-a-file/11010001#11010001)

当我按原样使用表达式时，它给了我：`syntax error near "^"`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T18:16:00.557

您正在寻找如何在命令行（单行）中将上述正则表达式与 perl 一起使用？尝试：

```
perl -nle 'print if /regex_here/' < file 
```

例如

```
perl -nle 'print if /bin/' < /etc/passwd 
```

将打印出所有带有“bin”的行，并且

```
perl -nle 'print if /^\s*\*\s*\[ \][^\*]+?(\w*\:[^\*]+\d$)|([^\*]+[.]com[.]au$)/' < file 
```

应该做你想做的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T12:53:06.830

我设法使用 PCREGREP 实用程序解决了这个问题

```
pcregrep -M '(^\s*\*\s*\[ \][^\*]+?(\w*\:[^\*]+\d$)|([^\*]+[.]com[.]au$))' file1 
```

做到了:) 谢谢@Damian @jack

# ios - ARC - 实例消息未声明带有选择器的方法

> ID：11014933
> 
> 赞同：0
> 
> 时间：2012-06-13T12:35:36.030
> 
> 标签：ios, automatic-ref-counting, selector

我使用这行代码：

`[self parseXMLFileAtURL:url];`

我得到这个错误：

> 自动引用计数问题，接收器类型“xmlParser”例如消息未声明具有选择器“parseXMLFileAtUrl”的方法

任何想法这是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T12:47:32.323

你有这样的事情：

```
 -(void)myMethod{
     [self parseXMLFileAtURL:url];
   }

  -(void)parseXMLFileAtURL:(NSURL*)myURL{
      // Some stuff
   } 
```

像这样放：

```
 -(void)parseXMLFileAtURL:(NSURL*)myURL{
      // Some stuff
   }

 -(void)myMethod{
     [self parseXMLFileAtURL:url];
  } 
```

**如果可行**，则意味着您需要转到 .h 文件并声明该方法：

```
 -(void)parseXMLFileAtURL:(NSURL*)myURL; 
```

或者在 .m 文件中创建一个私有接口并在那里声明它。

# java - 如何通过java为给定域生成站点地图有哪些可用的API或源代码

> ID：11014934
> 
> 赞同：1
> 
> 时间：2012-06-13T12:35:36.420
> 
> 标签：java, web-crawler, sitemap

嗨 Um 对 java 很陌生，并且希望在用户进入域时构建站点地图生成器。Um 正在寻找源代码和 API 来执行此操作。如果有人能提供帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T04:02:33.907

你需要下载

```
JDK 6
sitemapgen4j-1.0.1.jar 
```

例子 ：

```
import java.io.File;
import java.net.MalformedURLException;
import java.util.Date;

import com.redfin.sitemapgenerator.ChangeFreq;
import com.redfin.sitemapgenerator.WebSitemapGenerator;
import com.redfin.sitemapgenerator.WebSitemapUrl;

public class SitemapGenerator {

  public static void main(String[] args) throws MalformedURLException {

    WebSitemapGenerator webSitemapGenerator = WebSitemapGenerator.builder("http://www.example.com", new File("C:\\sitemap"))
    .gzip(true).build();

    WebSitemapUrl webSitemapUrl = new WebSitemapUrl.Options("http://www.example.com/test1.html")
      .lastMod(new Date()).priority(1.0).changeFreq(ChangeFreq.HOURLY).build();

    webSitemapGenerator.addUrl(webSitemapUrl);
    webSitemapGenerator.addUrl("http://www.example.com/test2.html");
    webSitemapGenerator.write();
  }
} 
```

更多信息：[http ://code.google.com/p/sitemapgen4j/](http://code.google.com/p/sitemapgen4j/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T13:10:38.543

您可以查看 Heritrix，这是一个用 Java 编写的开源网络爬虫。它支持解释“robots.txt”文件等高级功能，并带有一堆非常有用的命令行工具。

[维基百科条目](http://en.wikipedia.org/wiki/Heritrix)

[Heritrix 主页](https://webarchive.jira.com/wiki/display/Heritrix/Heritrix)

# mysql - 我需要更改 MySQL 数据库的默认字符集吗？

> ID：11014935
> 
> 赞同：1
> 
> 时间：2012-06-13T12:35:36.637
> 
> 标签：mysql, character-encoding

**我正在**使用将数据存储在我的 MySQL 数据库表中，`htmlentities()`但我发现这是[不可取](https://stackoverflow.com/a/1970897)的，所以我正在更改它。

我现在以原始格式存储数据（使用 PDO 准备好的语句），并在输出时根据需要对其进行转换。在某些情况下，我希望将数据输出为 HTML。

我所有采用 HTML 输出的网页的字符集都设置为 utf-8。但是我在[这篇文章](https://stackoverflow.com/a/8430761)中注意到，该海报 Mythli 评论说，“*没有必要 [使用] htmlspecialchars() 输入到数据库，因为你想显示 html 并且不需要 [使用] htmlentities() 输入到数据库**如果您网站的字符集与您在数据库中使用的字符集相同**。* "

我注意到我的数据库表似乎将“默认字符集”设置为 latin1。

我应该将其更改为 "utf8" 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T13:16:21.047

是的，如果您在数据库中存储 UTF-8 数据，您应该将它们存储在 UTF-8 表/列中。否则，有两种情况：

1.  您通知数据库您将插入以 UTF-8 编码的数据（请参阅 参考资料`SET NAMES utf8`）。如果应该存储数据的列设置为存储 latin1，MySQL 将正确处理编码并将您的输入从 UTF-8 转换为 latin1。这会导致所有无法用 latin1 表示的字符丢失。
2.  您没有通知数据库您要插入 UTF-8 数据，数据库需要 latin1 编码的数据。在这种情况下，数据库会将传入的数据误解为单个字节，这恰好可以工作，因为 MySQL 将简单地存储单个字节。它们在数据库中看起来像垃圾，但到 PHP 的往返将透明地工作。

因此，最好告诉您的数据库您要将 UTF-8 存储在 UTF-8 列中，这样您的数据就可以干净地往返。另请参阅[在 Web 应用程序中从前到后处理 Unicode](http://kunststube.net/frontback/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T13:16:11.613

是的，但是 MySql 有几个级别的字符集可能不同，而排序规则实际上并不是最重要的

确保一切正常运行的清单：

1) 表*列*排序规则（存储 html 的字段）应使用 utf-8

2）您与数据库的连接。以下处理不止一个问题：

```
mysqli_query("SET NAMES 'utf8'"); 
```

3）正如你所说，改变数据库和表的默认字符集也是一个好主意。您可能希望排序规则不区分大小写 (utf8_unicode_ci)

4) 在插入非拉丁字符的那一天之前，这一切都无关紧要，因此在没有测试的情况下这样做几乎没有意义。

这是一个很好的细分，哪些值是一致的，以及一个要测试的字符串： http: [//adviesenzo.nl/examples/php_mysql_charset_fix/](http://adviesenzo.nl/examples/php_mysql_charset_fix/)

当*Iñtërnâtiônàlizætiøn*以它进入的方式出现时，你得到了它。

# vb.net - 如何从活动 Word 文档中获取带下划线的文本？

> ID：11014936
> 
> 赞同：-1
> 
> 时间：2012-06-13T12:35:39.670
> 
> 标签：vb.net, ms-word

我在一个目录中有一些word文档。我正在 vb.net 中开发一个代码，用于从 word 文档中提取任何带下划线的文本之后的文本。

有没有办法使用 vb.net 从活动 Word 文档中获取带下划线的文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-03-30T07:20:09.247

是的，你可以使用

```
pWordApp.Selection.Font.Underline = Microsoft.Office.Interop.Word.WdUnderline.wdUnderlineSingle 
```

# autocomplete - 按下向下箭头键时自动完成文本框

> ID：11014939
> 
> 赞同：0
> 
> 时间：2012-06-13T12:35:52.560
> 
> 标签：autocomplete

我以前使用过自动完成文本框。只有当我按下字符键时，该自动完成才有效。像 ：

```
$('#<%= txtSiteName.ClientID %>').autocomplete({
        source: function(request, response) {
            $.ajax({
                type: "POST",
                contentType: "application/json; charset=utf-8",
                url: "WebService.asmx/GetAllSites",
                data: "{'keywords':'"+ + "'}",
                dataType: "json",
                async: true,
                success: function(data) {
                    response(data.d);
                },
                error: function(result) {
                    //alert("Error");
                }
            });
        }
    }); 
```

但是现在我想在按下向下箭头键时下拉自动完成。请帮助我:)并提前感谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T12:47:39.850

你可以像这样绑定它

```
$('input').keydown(function(e){
    if (e.keyCode == 40) {
      $('#search').catcomplete('search', $('#search').val());
    }
}); 
```

假设您的搜索框的 ID 为“搜索”。

尽管可能有一种方法可以使用可能值得研究的焦点方法来处理现有绑定。

# android - 如何在主屏幕中创建和删除应用程序快捷方式？

> ID：11014940
> 
> 赞同：1
> 
> 时间：2012-06-13T12:35:52.780
> 
> 标签：android

我正在创建一个应用程序快捷方式。它工作正常。但我无法删除此快捷方式。如何删除我的应用程序快捷方式。在我的主屏幕中包含很多应用程序快捷方式。如何删除..
如果可能，请发送有关如何删除应用程序快捷方式的信息。否则，如果不可能发送原因。请回复您的答案和意见对我很有价值。谢谢。
我的示例代码在这里...

```
 Button btnShortcut = (Button) findViewById(R.id.btnCreateShortcut);
    btnShortcut.setOnClickListener(new View.OnClickListener()
    {
        public void onClick(View arg0) 
        {
            Intent shortcutintent = new Intent("com.android.launcher.action.INSTALL_SHORTCUT");
            shortcutintent.putExtra("duplicate", false);
            shortcutintent.putExtra(Intent.EXTRA_SHORTCUT_NAME, getString(R.string.app_name));
            Parcelable icon = Intent.ShortcutIconResource.fromContext(getApplicationContext(), R.drawable.ic_launcher);
            shortcutintent.putExtra(Intent.EXTRA_SHORTCUT_ICON_RESOURCE, icon);
            shortcutintent.putExtra(Intent.EXTRA_SHORTCUT_INTENT, new Intent(getApplicationContext() , MyActivity.class));
            sendBroadcast(shortcutintent);
        }
    }); 
```

我的 Android Manifest.xml 代码在这里...

```
<uses-permission android:name="com.android.launcher.permission.INSTALL_SHORTCUT"/>
<uses-permission android:name="com.android.launcher.permission.UNINSTALL_SHORTCUT"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T12:44:24.510

干得好

```
private void deleteShortCut(Context context) {

    Intent shortcutIntent = new Intent(Intent.ACTION_MAIN);
    shortcutIntent.setClassName("com.example.androidapp", "SampleIntent");
    shortcutIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    shortcutIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    shortcutIntent.putExtra("someParameter", "HelloWorld");

    Intent removeIntent = new Intent();
    removeIntent.putExtra(Intent.EXTRA_SHORTCUT_INTENT, shortcutIntent);
    removeIntent.putExtra(Intent.EXTRA_SHORTCUT_NAME, "ShortcutName");
    removeIntent.putExtra("duplicate", false);

    removeIntent
            .setAction("com.android.launcher.action.UNINSTALL_SHORTCUT");       
    context.sendBroadcast(removeIntent);
} 
```

# c++ - Glut 游戏，自定义循环 = glutTimerFunc？

> ID：11014944
> 
> 赞同：0
> 
> 时间：2012-06-13T12:36:09.833
> 
> 标签：c++, glut

我正在修改使用 GLUT 的 C++ 中的现有应用程序（所以我无法摆脱 GLUT，这似乎是共识）。我正试图把它变成一个类似游戏的东西，所以我想在循环中添加一些东西。似乎这样做的方法是使用`glutTimerFunc()`，对吗？（我找不到关于它的所有信息）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T19:29:56.610

这是一个很好的链接，描述了过剩回调、它们的作用以及参数是什么：[http ://www.opengl.org/resources/libraries/glut/spec3/node113.html](http://www.opengl.org/resources/libraries/glut/spec3/node113.html)

我已经有几年没有开发过 glut 应用程序了，但据我所知，我使用 glutTimerFunc 来调用我的游戏更新逻辑，正如你所建议的那样。

# sql-server - 在sql server 2005中将多列合并为一列

> ID：11014949
> 
> 赞同：1
> 
> 时间：2012-06-13T12:36:28.007
> 
> 标签：sql-server, tsql, sql-server-2005

我有一个如下表：

```
Table A
----------
ID   Field1 Field2 Field3
1     A     NULL   B
2     B     NULL   NULL 
3     C     A      NULL 
4     A     D      NULL 
```

要求是将所有字段（ID除外）合并为一个，以便表​​格如下所示：

```
Table A
-------
ID   Field
1     A   
2     B    
3     C   
4     D 
```

尽管值必须不同，但任何顺序都可以。这意味着 Field1 到 Field3 需要是一列（在任何临时表中）并且具有不同的值。我使用 ID 列只是为了澄清结果，但不需要 ID。目前我正在使用联合来获得所需的输出，例如

```
select distinct Field
from
(Select Field1 as Field from TableA
where Field1 is not null
union
Select Field2 from TableA
where Field2 is not null
union
Select Field3 from TableA
where Field3 is not null
) 
```

我确信有更好的方法可以用更少的代码行来实现相同的输出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T17:12:08.377

我认为您的`UNION`解决方案尽可能接近您想要的。不过我会清理一下，像这样：

```
SELECT Field FROM (
    SELECT Field1 AS Field  FROM TableA UNION
    SELECT Field2           FROM TableA UNION
    SELECT Field3           FROM TableA
) a
WHERE Field IS NOT NULL; 
```

我通过将`WHERE`子句移到外部来收紧子查询。此外，您不需要`DISTINCT`在外部，因为`UNION`已经提供了不同的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T21:33:29.803

我用这个更新了我最初拥有的东西。它似乎适用于您提供的测试数据。

```
Create Table #temp
(
ID Int,
Field varchar(100)
)

Create Table #a
(
ID Int,
Field1 varchar(5) Null,
Field2 varchar(5) Null,
Field3 varchar(5) Null
)

Insert Into #a Values (1, 'A', null, 'B')
Insert Into #a Values (1, 'B', null, null)
Insert Into #a Values (1, 'C', 'A', null)
Insert Into #a Values (1, 'A', 'D', null)

Select * From #a

Insert Into #temp
Select  ID,
    Field = 
    (
        Case When Field1 IS NOT NULL Then Field1 + ' ' Else '' End +
        Case When Field2 IS NOT NULL Then Field2 + ' ' Else '' End +
        Case When Field3 IS NOT NULL Then Field3 + ' ' Else '' End
    )
From #a

Select * From #temp

--Rename your new consolidated table to the real table name that you want

Drop Table #a
Drop Table #temp 
```

# tridion - 我们如何将 Microsoft FAST 与 SDL Tridion 2011 SP1 集成？

> ID：11014950
> 
> 赞同：5
> 
> 时间：2012-06-13T12:36:29.800
> 
> 标签：tridion

现在我们正在使用 SDL Tridion 5.3，很快我们将升级到 Tridion 2011 SP1。在升级到 Tridion 2011 SP1 的同时，我们还希望使用 FAST FISE (SP 4) 搜索引擎在已发布的网站上实现搜索。

任何人都可以帮助我们了解如何在 Deployer 扩展以及内容交付方面的变化（我们有 .NET 实现）方面做到这一点。是否有任何 API 参考或实现文档可用？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-13T12:52:02.727

我没有 FAST 的具体经验，但就集成作品而言，与许多其他搜索引擎没有什么不同。

最简单的方法： - 什么都不做，让 FAST 抓取您的网站并收集它需要的所有信息。这是进行搜索集成的最具成本效益的方式，许多人忘记了在一天结束时这通常可以满足他们约 98% 的需求。

实时方式：编写一个 Deployer 模块，该模块在每次（未）发布某些内容时通知 FAST，以便可以更新索引（请参阅末尾的示例模块，该模块可能可以帮助您入门）。

过度设计的方式：为 Tridion 编写符合 JPA 的存储扩展：[http ://www.sdltridionworld.com/articles/sdltridion2011/tutorials/extending-content-delivery-storage-sdltridion-2011-1.aspx](http://www.sdltridionworld.com/articles/sdltridion2011/tutorials/extending-content-delivery-storage-sdltridion-2011-1.aspx)

部署程序扩展的示例代码：

```
import java.util.Iterator;

import com.tridion.configuration.Configuration;
import com.tridion.configuration.ConfigurationException;
import com.tridion.deployer.Module;
import com.tridion.deployer.ProcessingException;
import com.tridion.deployer.Processor;

import com.tridion.transport.transportpackage.Binary;
import com.tridion.transport.transportpackage.BinaryKey;
import com.tridion.transport.transportpackage.Component;
import com.tridion.transport.transportpackage.ComponentKey;
import com.tridion.transport.transportpackage.MetaData;
import com.tridion.transport.transportpackage.MetaDataFile;
import com.tridion.transport.transportpackage.Page;
import com.tridion.transport.transportpackage.PageKey;
import com.tridion.transport.transportpackage.ProcessorInstructions;
import com.tridion.transport.transportpackage.Section;
import com.tridion.transport.transportpackage.TransportPackage;

import org.slf4j.LoggerFactory;
import org.slf4j.Logger;

public class CustomCacheNotificationDeploy extends Module {

    String action = null;
    Logger log = null;
    MetaDataFile pageMeta = null;
    MetaDataFile componentMeta = null;
    MetaDataFile binaryMeta = null;
    public CustomCacheNotificationDeploy(Configuration config, Processor processor)
            throws ConfigurationException {
        super(config, processor);
        log = LoggerFactory.getLogger(getClass());
        // TODO Auto-generated constructor stub
    }

    @SuppressWarnings("deprecation")
    public void process(TransportPackage data) throws ProcessingException{
        ProcessorInstructions instructions = data.getProcessorInstructions();
        action = instructions.getAction();
        MetaData pageMetaInfo = instructions.getMetaData("Pages");
        MetaData componentMetaInfo = instructions.getMetaData("Components");
        MetaData binaryMetaInfo = instructions.getMetaData("Binaries");
        pageMeta = data.getMetaData("Pages", pageMetaInfo.getName());
        componentMeta = data.getMetaData("Components", componentMetaInfo.getName());
        binaryMeta = data.getMetaData("Binaries", binaryMetaInfo.getName());

        log.debug("Action " + action + " started for publication " + instructions.getPublicationId());

        Section section = null;
        Iterator<Section> Sections = instructions.getSections();
        for(; Sections.hasNext(); processSection(section))
        {
            section = Sections.next();
        }

    }

    protected void processSection(Section section)
    {
        log.debug("Processing Section " + section.getName());
        Iterator iterator = section.getFileItems();
        Object item;
        for(; iterator.hasNext(); processItem(item, section))
        {
            item = iterator.next();
        }
        Section subSection;
        for(Iterator i$ = section.getSubSections().iterator(); i$.hasNext(); processSection(subSection))
            subSection = (Section)i$.next();
    }

    protected void processItem(Object obj, Section section)
    {
        if(obj instanceof PageKey)
        {
            log.debug("Object is Page");
            PageKey key = (PageKey) obj;
            Page page = (Page)pageMeta.getMetaData(key);
            log.debug("Page being deployed is " + page.getId() + " with URL " + page.getURLPath());
        }
        if(obj instanceof ComponentKey)
        {
            log.debug("Object is Component");
            ComponentKey key = (ComponentKey) obj;
            Component component = (Component)componentMeta.getMetaData(key);
            log.debug("Component being deployed is " + component.getId());
        }
        if(obj instanceof BinaryKey)
        {
            log.debug("Object is Binary");
            BinaryKey key = (BinaryKey) obj;
            Binary binary = (Binary)binaryMeta.getMetaData(key);
            log.debug("Binary being deployed is " + binary.getId() + " with URL " + binary.getURLPath());
        }
    }
} 
```

# android - ASP.NET Web API 身份验证

> ID：11014953
> 
> 赞同：122
> 
> 时间：2012-06-13T12:36:36.420
> 
> 标签：android, .net, authentication, asp.net-web-api

我希望在使用[ASP.NET Web API](http://www.asp.net/web-api)时从客户端应用程序对用户进行身份验证。我已经观看了网站上的所有视频，还阅读[了这个论坛帖子](http://askamoeba.com/Answer/145/ASP-NET-MVC-4-WebAPI-authorization-Authorize-attribute-not-working-)。

正确放置`[Authorize]`属性会返回一个`401 Unauthorized`状态。但是，我需要知道如何允许用户登录 API。

我想从 Android 应用程序向 API 提供用户凭据，让用户登录，然后对所有后续 API 调用进行预身份验证。

* * *

## 回答 #1

> 赞同：137
> 
> 时间：2012-06-13T12:41:58.380

> 允许用户登录 API

您需要随请求一起发送有效的表单身份验证 cookie。此 cookie 通常由服务器在`LogOn`通过调用`[FormsAuthentication.SetAuthCookie`方法进行身份验证（操作）时发送（参见[MSDN](http://msdn.microsoft.com/en-us/library/system.web.security.formsauthentication.setauthcookie.aspx)）。

所以客户端需要执行2个步骤：

1.  `LogOn`通过发送用户名和密码向操作发送 HTTP 请求。反过来，此操作将调用该`FormsAuthentication.SetAuthCookie`方法（如果凭据有效），该方法又将在响应中设置表单身份验证 cookie。
2.  `[Authorize]`通过发送在第一个请求中检索到的表单身份验证 cookie，将HTTP 请求发送到受保护的操作。

让我们举个例子。假设您在 Web 应用程序中定义了 2 个 API 控制器：

第一个负责处理身份验证：

```
public class AccountController : ApiController
{
    public bool Post(LogOnModel model)
    {
        if (model.Username == "john" && model.Password == "secret")
        {
            FormsAuthentication.SetAuthCookie(model.Username, false);
            return true;
        }

        return false;
    }
} 
```

第二个包含只有授权用户才能看到的受保护操作：

```
[Authorize]
public class UsersController : ApiController
{
    public string Get()
    {
        return "This is a top secret material that only authorized users can see";
    }
} 
```

现在我们可以编写一个使用这个 API 的客户端应用程序。这是一个简单的控制台应用程序示例（确保您已安装`Microsoft.AspNet.WebApi.Client`和`Microsoft.Net.Http`NuGet 包）：

```
using System;
using System.Net.Http;
using System.Threading;

class Program
{
    static void Main()
    {
        using (var httpClient = new HttpClient())
        {
            var response = httpClient.PostAsJsonAsync(
                "http://localhost:26845/api/account", 
                new { username = "john", password = "secret" }, 
                CancellationToken.None
            ).Result;
            response.EnsureSuccessStatusCode();

            bool success = response.Content.ReadAsAsync<bool>().Result;
            if (success)
            {
                var secret = httpClient.GetStringAsync("http://localhost:26845/api/users");
                Console.WriteLine(secret.Result);
            }
            else
            {
                Console.WriteLine("Sorry you provided wrong credentials");
            }
        }
    }
} 
```

以下是 2 个 HTTP 请求在网络上的样子：

认证请求：

```
POST /api/account HTTP/1.1
Content-Type: application/json; charset=utf-8
Host: localhost:26845
Content-Length: 39
Connection: Keep-Alive

{"username":"john","password":"secret"} 
```

认证响应：

```
HTTP/1.1 200 OK
Server: ASP.NET Development Server/10.0.0.0
Date: Wed, 13 Jun 2012 13:24:41 GMT
X-AspNet-Version: 4.0.30319
Set-Cookie: .ASPXAUTH=REMOVED FOR BREVITY; path=/; HttpOnly
Cache-Control: no-cache
Pragma: no-cache
Expires: -1
Content-Type: application/json; charset=utf-8
Content-Length: 4
Connection: Close

true 
```

请求受保护的数据：

```
GET /api/users HTTP/1.1
Host: localhost:26845
Cookie: .ASPXAUTH=REMOVED FOR BREVITY 
```

对受保护数据的响应：

```
HTTP/1.1 200 OK
Server: ASP.NET Development Server/10.0.0.0
Date: Wed, 13 Jun 2012 13:24:41 GMT
X-AspNet-Version: 4.0.30319
Cache-Control: no-cache
Pragma: no-cache
Expires: -1
Content-Type: application/json; charset=utf-8
Content-Length: 66
Connection: Close

"This is a top secret material that only authorized users can see" 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-26T13:52:58.553

我以安卓为例。

```
public abstract class HttpHelper {

private final static String TAG = "HttpHelper";
private final static String API_URL = "http://your.url/api/";

private static CookieStore sCookieStore;

public static String invokePost(String action, List<NameValuePair> params) {
    try {
        String url = API_URL + action + "/";
        Log.d(TAG, "url is" + url);
        HttpPost httpPost = new HttpPost(url);
        if (params != null && params.size() > 0) {
            HttpEntity entity = new UrlEncodedFormEntity(params, "UTF-8");
            httpPost.setEntity(entity);
        }
        return invoke(httpPost);
    } catch (Exception e) {
        Log.e(TAG, e.toString());
    }

    return null;
}

public static String invokePost(String action) {
    return invokePost(action, null);
}

public static String invokeGet(String action, List<NameValuePair> params) {
    try {
        StringBuilder sb = new StringBuilder(API_URL);
        sb.append(action);
        if (params != null) {
            for (NameValuePair param : params) {
                sb.append("?");
                sb.append(param.getName());
                sb.append("=");
                sb.append(param.getValue());
            }
        }
        Log.d(TAG, "url is" + sb.toString());
        HttpGet httpGet = new HttpGet(sb.toString());
        return invoke(httpGet);
    } catch (Exception e) {
        Log.e(TAG, e.toString());
    }

    return null;
}

public static String invokeGet(String action) {
    return invokeGet(action, null);
}

private static String invoke(HttpUriRequest request)
        throws ClientProtocolException, IOException {
    String result = null;
    DefaultHttpClient httpClient = new DefaultHttpClient();

    // restore cookie
    if (sCookieStore != null) {
        httpClient.setCookieStore(sCookieStore);
    }

    HttpResponse response = httpClient.execute(request);

    StringBuilder builder = new StringBuilder();
    BufferedReader reader = new BufferedReader(new InputStreamReader(
            response.getEntity().getContent()));
    for (String s = reader.readLine(); s != null; s = reader.readLine()) {
        builder.append(s);
    }
    result = builder.toString();
    Log.d(TAG, "result is ( " + result + " )");

    // store cookie
    sCookieStore = ((AbstractHttpClient) httpClient).getCookieStore();
    return result;
} 
```

请注意： i.localhost 不能使用。Android 设备将 localhost 视为自己的主机。ii.如果在 IIS 中部署 Web API，则必须打开 Form 身份验证。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-05T09:46:20.633

使用此代码并访问数据库

```
[HttpPost]
[Route("login")]
public IHttpActionResult Login(LoginRequest request)
{
       CheckModelState();
       ApiResponse<LoginApiResponse> response = new ApiResponse<LoginApiResponse>();
       LoginResponse user;
       var count = 0;
       RoleName roleName = new RoleName();
       using (var authManager = InspectorBusinessFacade.GetAuthManagerInstance())
       {
           user = authManager.Authenticate(request); 
       } reponse(ok) 
} 
```

# mysql - MySQL 搜索自动完成功能，如 Amazon

> ID：11014959
> 
> 赞同：1
> 
> 时间：2012-06-13T12:36:48.883
> 
> 标签：mysql, database

这个问题可能看起来很幼稚。**我不想一个人**接触这家大公司的势力。

问题：当您访问[http://www.amazon.com](http://www.amazon.com)时，尝试搜索“harry potter”，但输入：“harry poter”。

您将看到如下结果：

*   哈利波特
*   哈利波特在书中
*   电影和电视中的哈利波特

问题是，我有一个包含产品的庞大 MySQL 数据库。如何实现这样的搜索结果呢？

我知道 Apache Lucene，但我想知道是否有更简单的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T15:03:54.870

1）记录提交的搜索词/使用您当前的数据库 - 重构数据以优化关键字搜索

2) 添加一个 onkeyup 处理程序以在服务器端发送 Ajax 请求（但使用互斥体，因此您一次只有一个未完成的调用）

3）服务器端对来自 1 的数据进行关键字查找并返回 matchnig 数据

4) 当 ajax 调用返回时，将行作为可点击条目添加到新层中的 div 中

这有什么难的？您可以使用您喜欢的任何类型的数据库。你可以使用任何你喜欢的服务器端编程语言。浏览器端你可能应该坚持使用 javascript。

（如果您希望有人为您编写代码，那么您可能需要付钱给他们）

# ajax - 实时 jQuery 增加 Ajax 请求的数量

> ID：11014963
> 
> 赞同：6
> 
> 时间：2012-06-13T12:36:57.973
> 
> 标签：ajax, jquery-ui-dialog, jquery

我有下面的代码，我使用`clone()`和`live()`. 代码正在一个带有链接的 jQuery UI 对话框中加载。每当我单击链接时，它都会转到服务器并用下面的代码填充对话框。第一次加载页面时它工作正常，但如果我关闭对话框并再次单击链接以获取对话框，正在发送的 Ajax 请求的数量会增加。

第一次发送触发更改我只发送一个请求，我关闭对话框并再次加载它然后触发更改，它同时发送两个 Ajax 请求，第三次同时发送三个请求，依此类推。

你觉得我的问题在哪里？

```
<input id="TaskId" name="TaskId" type="hidden" value="18" />
<div id="MainDiv">
    <div id="toClone">
        <div style="display: inline;">
            <select id="Tasksess">
                <option value="">لطفاً کار را انتخاب کنيد</option>
                <optgroup label="کار های جديد">
                        <option value="16"style="">q3fe</option>
                        <option value="18"style="">fjhv j</option>
                        <option value="19"style="">wref</option>
                        <option value="25"style="">ff</option>
                </optgroup>
                <optgroup label="کار های در دست اقدام">
                        <option value="13"style="">rr</option>
                        <option value="15"style="">yy</option>
                </optgroup>
                <optgroup label="کار های تمام شده">
                        <option value="14"style="">tt</option>
                        <option value="18"style="">fjhv j</option>
                </optgroup>
            </select>
        </div>
        <div style="display: inline;">
            <select id="Statusess" name="Statusess"><option value="">لطفاً وابستگی را انتخاب کنيد</option>
<option value="1">پيشنياز</option>
<option value="2">همنياز</option>
</select>
        </div>
        <div style="display: none;" id="Ok">
            ok
        </div>
        <div style="display: none;" id="noOk">
            تکراری
        </div>
        <div id="loadingGif" style="display: none;">
            <img src="/Content/Images/ajax-loader/253L.gif" alt=""/>
        </div>
    </div>
</div>
<script type="text/javascript">
    $(document).ready(function () {

        var Maindiv = $("#MainDiv");
        var toClone = $("#toClone");

        //$("#Statusess").each(function () {
            $("#Statusess").live('change', function () {
                if ($(this).find(":selected").val() != "") {                    
                    if ($(this).parent().prev().find(":selected").val() != "") {
                        $(this).parent().parent().find("#loadingGif").attr("style", "display: inline;");
                        $.ajax({
                            url: '/ProjectAdmin/Project/AddTaskDependency?MainTaskId=' + $("#TaskId").val() + '&DependentTaskId=' + $(this).parent().prev().find(":selected").val() + '&Status=' + $(this).find(":selected").val(),
                            type: 'GET',
                            success: function (data, status) {
                                if (data != "0") {
                                    $(this).parent().parent().find("#Ok").attr("style", "display: inline;");
                                    $(this).parent().parent().find("#noOk").attr("style", "display: none;");
                                }
                                else if (data == "0") {
                                    $(this).parent().parent().find("#Ok").attr("style", "display: none;");
                                    $(this).parent().parent().find("#noOk").attr("style", "display: inline;");
                                }
                                var div = $('div:eq(0)', Maindiv).clone();
                                Maindiv.append(div);
                            }
                        });
                        $(this).parent().parent().find("#loadingGif").attr("style", "display: none;");

                    }
                }
            });
        //});

    });
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T12:41:47.210

你应该试试：

```
$("#Statusess").off('change').on('change', function() {

}); 
```

PS：仅适用于 jQuery 1.7+。如果无法升级：

```
$("#Statusess").die('change').live('change', function() {

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T12:39:27.733

在这种情况下，您不应使用 live，因为每次打开对话框时都会“记住”绑定。如果我正确理解您的问题，您应该使用“点击”而不是“实时”绑定。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T13:32:27.960

您的服务器代码是否也响应底部的 javascript？

如果是这样，您的问题是每次加载ui对话框时都会执行一次javascript，从而导致额外的绑定，因此每次执行代码时，您都会添加一个额外的请求。

这种情况下的修复很简单，将 javascript 代码移动到正在加载 ui 对话框的页面。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-17T05:56:26.837

直接绑定事件处理程序，不使用`live()`任何其他委托方法，或者将代码移动到外部脚本文件，这样您就不会在每个 ajax 调用上加载相同的代码。使用`die()`只是对不需要存在并且可以简单修复的问题的创可贴。

如果将代码留在原处，可以简单地使用：

```
 $("#Statusess").change(function () {... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-17T19:01:49.103

也许您可以尝试：

```
 jQuery(function ($) {

            var Maindiv = $("#MainDiv");
            var toClone = $("#toClone");

                $("#Statusess").on('change', function () {
                    if ($(this).find(":selected").val() != "") {                    
                        if ($(this).parent().prev().find(":selected").val() != "") {
                            $(this).parent().parent().find("#loadingGif").css("display", "inline");
                            $.ajax({
                                url: '/ProjectAdmin/Project/AddTaskDependency?MainTaskId=' + $("#TaskId").val() + '&DependentTaskId=' + $(this).parent().prev().find(":selected").val() + '&Status=' + $(this).find(":selected").val(),
                                type: 'GET',
                                success: function (data, status) {
                                    if (data != 0) {
                                        $(this).parent().parent().find("#Ok").css("display", "inline");
                                        $(this).parent().parent().find("#noOk").css("display", "none");
                                    }
                                    else if (data == 0) {
                                        $(this).parent().parent().find("#Ok").css("display", "none");
                                        $(this).parent().parent().find("#noOk").css("display", "inline");
                                    }
                                    var div = $('div:eq(0)', Maindiv).clone();
                                    Maindiv.append(div);
                                    div.empty();
                                }
                            });
                            $(this).parent().parent().find("#loadingGif").css("display", "none");

                        }
                    }
                });

        }); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-23T12:01:32.800

如上所述，您应该使用`.delegate()`而不是`.live()`.

为了使用`delegate`所有你需要做的就是指定一个你将要监听的父对象和一个它将起作用的选择器。

试试这个：

```
<script>
$(function(){
var Maindiv = $("#MainDiv");
var toClone = $("#toClone");

$("#MainDiv").delegate('#Statusess','change', function () {
    if ($(this).find(":selected").val() != "") {                    
      if ($(this).parent().prev().find(":selected").val() != "") {
        $(this).parent().parent().find("#loadingGif").attr("style", "display: inline;");
        $.ajax({
            url: '/echo/html/',
            type: 'POST',
            success: function (data, status) {
                data = "1";
                if (data != "0") {
                    $(this).parent().parent().find("#Ok").attr("style", "display: inline;");
                    $(this).parent().parent().find("#noOk").attr("style", "display: none;");
                }
                else if (data == "0") {
                    $(this).parent().parent().find("#Ok").attr("style", "display: none;");
                    $(this).parent().parent().find("#noOk").attr("style", "display: inline;");
                }
                var div = $('div:eq(0)', Maindiv).clone();
                Maindiv.append(div);
            }
        });
        $(this).parent().parent().find("#loadingGif").attr("style", "display: none;");

    }
  }
});
});
</script> 
```

在这里你有一个工作的[jsfiddle](http://jsfiddle.net/p93gu/8/)，这里也是一个参考[.delegate()](http://api.jquery.com/delegate/)函数的链接。

# c# - 无法从 ACCDB 中的填充表中检索数据

> ID：11014965
> 
> 赞同：0
> 
> 时间：2012-06-13T12:37:12.040
> 
> 标签：c#, database, ms-access, integration

我创建了一个 C# 应用程序并集成了一个 Access DB（带有 3 个填充表）。

现在我尝试从 Access DB 表中获取数据以将其显示在 TextBox 中，但什么都看不到。

先感谢您。

更新：命名空间-->`using System.Data.OleDb;`

这是代码：

```
 OleDbDataReader myReader;
    OleDbConnection myCon;
    OleDbCommand myQuery;

    public Form1()
    {
        InitializeComponent();
        myCon = new OleDbConnection("Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\\Users\\UserName\\Desktop\\MyClubAdministration\\MyClubAdministrationDB.accdb;Persist Security Info=False;");
        myCon.Open();
        myQuery = new OleDbCommand("select * from Lid, Lidgeld, Lidmaatschap", myCon);
        myReader = myQuery.ExecuteReader();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        textBox1.Text = myReader.GetInt32(0).ToString();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T12:40:01.937

您需要在 OleDBDataReader 上的 GetInt32 之前阅读

```
private void Form1_Load(object sender, EventArgs e)     
{         
    myReader.Read();
    textBox1.Text = myReader.GetInt32(0).ToString();     
} 
```

然而，这段代码很容易出错。
尝试将数据库操作隔离在私有方法中，并仅从一个点调用，而无需在构造函数和 form_load 之间进行拆分。

```
private void ReadFromDB()
{
    using(OleDbConnection myCon = new OleDbConnection("Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\\Users\\UserName\\Desktop\\MyClubAdministration\\MyClubAdministrationDB.accdb;Persist Security Info=False;"))
    {
         myCon.Open();             
         OleDbCommand myQuery = new OleDbCommand("select * from Lid, Lidgeld, Lidmaatschap", myCon);
         OleDbDataReader myReader = myQuery.ExecuteReader();
         if(myReader.HasRows)
         {
              myReader.Read();
              textBox1.Text = myReader.GetInt32(0).ToString();
         }
    }
} 
```

在 InitializeComponent() 之后调用该方法；

作为旁注，我将避免数据库操作的全局变量。使用连接池，打开和重新打开连接的性能成本非常低，而清理房屋的复杂性呈指数级增长。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T12:46:34.650

类的`ExecuteReader()`方法`OleDbCommand`返回一个类的对象`OleDbDataReader`。当`OleDbDataReader`对象第一次返回给您时，它处于“未定位”状态——也就是说，它没有定位到数据集中的任何记录。您必须调用`Read()`ob 对象以将其定位到集合中的下一条记录。你的`Load()`方法应该如下：

```
private void Form1_Load(object sender, EventArgs e)
{
    if(myReader.HasRows == true)
    {
        myReader.Read();
        textBox1.Text = myReader.GetInt32(0).ToString();
    }
} 
```

调用 的`HasRows`属性`OleDbDataReader`是为了确保在进行定位之前，数据集中实际上有记录。

为了更加小心，您可以`null`在尝试使用数据库值之前检查您感兴趣的字段：

```
private void Form1_Load(object sender, EventArgs e)
{
    if(myReader.HasRows == true)
    {
        myReader.Read();
        if(myReader.IsDBNull(0) == false)
            textBox1.Text = myReader.GetInt32(0).ToString();
    }
} 
```

# java - 如何在 Eclipse 中查看文件和包浏览器

> ID：11014967
> 
> 赞同：1
> 
> 时间：2012-06-13T12:37:35.260
> 
> 标签：java, eclipse

我刚开始使用 Eclipse，但我已经遇到了一个小问题。起初在 Eclipse 中，我看到一个浏览器，它在左侧显示了包、文件夹和文件。现在它已经不存在了。我已经经历了我认为曾经的菜单项，但我仍然找不到将其纳入视野的方法。

一些有经验的 Eclipse（最新下载）用户能否为我指明正确的方向。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T12:44:51.577

尝试：窗口 -> 显示视图... -> 包资源管理器（默认快捷键：Alt+Shift+Q、P）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T12:50:50.783

您可以尝试 Eclipse 窗口左下角的按钮。如果您的视图不在弹出菜单中，请尝试“*其他*”并选择您喜欢的任何内容。在您的情况下，它是 eiser ' *Project explorer* ' 或 ' *Package explorer* '

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T03:25:52.200

由于您是 eclipse 的新手，我建议使用默认的透视布局。透视图是视图及其布局的集合。要重置透视图，请使用窗口 -> 重置透视图。

# actionscript-3 - 检测调整大小事件何时完成

> ID：11014968
> 
> 赞同：1
> 
> 时间：2012-06-13T12:37:36.793
> 
> 标签：actionscript-3, resize

有什么方法可以检测到 resizeHandlers 的完成时刻吗？像这样的东西：

```
this.addEventListener(Event.RESIZE_COMPLETE, resizeHandler); 
```

我希望有人有办法让这成为可能，所以我可以删除我的 enterframehandler :)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T12:57:23.063

基本上你需要做的是设置一个计时器，它会在 last 之后计算时间`Event.RESIZE`。一旦经过了足够长的时间（例如 50 毫秒左右），您就可以假设用户已经停止连续调整舞台大小。此代码可以模拟您需要的内容：

```
private var timer:Timer;
private var resizeInterval:Number = 50; //amount of time you believe is enough to say that continuous resizing is ended after last discrete Event.RESIZE

private function init():void
{
  timer = new Timer(resizeInterval);
  timer.addEventListener(TimerEvent.TIMER, timerHandler);
  stage.addEventListener(Event.RESIZE, resizeHandler);
}

private function resizeHandler(e:Event):void
{
  if (timer.running) {
    timer.reset();
  }
  timer.start();
}
private function timerHandler(e:Event):void
{
  timer.stop();
  resizeCompletehandler();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T12:41:44.300

`Event.RESIZE`根据浏览器/操作系统调度。

在某些情况下，每次用户更改浏览器窗口大小时都会触发它，有时会间隔调度，有时会在用户释放鼠标按钮时调度。

没有办法知道调整大小已经完成......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-16T17:13:05.833

在 Adob​​e AIR for Desktop 中，此 Timer 模式不适用于示例 timerInterval，因为调整大小事件在 100 毫秒到 150 毫秒之间触发。timerInterval 必须大于最大的典型调整大小事件间隔，才能可靠地检测调整大小过程的结束。

这是用户调整舞台大小时的跟踪输出：

```
[trace] 15:02:27:128 onResize() - nativeWindows.width: 911
[trace] 15:02:27:239 onResize() - nativeWindows.width: 884
[trace] 15:02:27:358 onResize() - nativeWindows.width: 866
[trace] 15:02:27:475 onResize() - nativeWindows.width: 844
[trace] 15:02:27:593 onResize() - nativeWindows.width: 820
[trace] 15:02:27:677 onResize() - nativeWindows.width: 805
[trace] 15:02:27:762 onResize() - nativeWindows.width: 799
[trace] 15:02:27:842 onResize() - nativeWindows.width: 788
[trace] 15:02:27:935 onResize() - nativeWindows.width: 778
... 
```

但是，跟踪输出处理过程本身可能会稍微污染测量。

我想 RESIZE 事件间隔在 Flash Player 和 AIR 运行时之间可能会有所不同，因此请确保在选择 resizeInterval 之前进行测试。我在我们的 AIR 桌面应用程序中确定了 250 毫秒，它运行良好。

但是，如果 AIR 只是在用户拖动窗口后释放鼠标时触发 MOUSE_UP 事件，我们根本不必这样做。然后可以在第一个 RESIZE 事件中为 MOUSE_UP 添加事件侦听器，并等待用户释放鼠标捕获，但 Adob​​e AIR 运行时不会在用户调整窗口大小后触发阶段 MOUSE_UP 事件。我希望在 Flash Player 中有相同的行为。

谢谢，包为您的回答。它确实有效。我只是希望有更好的方法。

# javascript - 控制视差网站上文本的移动？

> ID：11014972
> 
> 赞同：0
> 
> 时间：2012-06-13T12:37:41.750
> 
> 标签：javascript, jquery, html, css, parallax

我正在开发视差网站。视差依赖于作为背景图像的一切 - 将以不同速度移动的图像。

有没有办法控制文本，而不把它变成图像？通过控制，我的意思是在视差图像移动时将其固定到位？如果没有固定定位，它只会以默认页面速度飞过图像 - 这比视差更快。

我一直在玩 position:fixed 和 z-index - 这很有效：http: [//jsfiddle.net/bf8Zh/1/](http://jsfiddle.net/bf8Zh/1/)。问题是，在您浏览的页面越往下，一切都会出错的一切 - 重叠等

上面的 jsfiddle 是使用 position:fixed/z-index 来尝试解决问题的示例。

CSS示例：

```
#intro,
#two,
#three,
#four {width: 100%; margin: 0 auto; height: 800px; overflow: hidden; background-position: 50% 50% !important;}

#intro {background:url(../img/bg_1.jpg) 50% 50% no-repeat fixed #000;}
#two {background:url(../img/bg_7.jpg) 50% 50% no-repeat fixed; z-index: 25; position: relative;}
#three {background:url(../img/bg_8.jpg) 50% 50% no-repeat fixed #ccc; z-index: 9999; position:relative}
#four {background:url(../img/bg_7.jpg) 50% 50% no-repeat fixed;}

#two .content {width: 300px; margin: 300px 0 0 200px; float: left; z-index: 50; position: fixed; top: 0; left: 0}
#two .content .sectionTitle {font-size: 36px; margin: 10px 0; z-index: 50;}
#two .content .sectionText {font-size: 12px; margin: 10px 0; z-index: 50;}
#two .content .sectionTags {font-size: 12px; margin: 10px 0; z-index: 50;}

#three .content {width: 300px; margin: 300px 200px 0 0; float: right; z-index: 100;}
#three .content .sectionTitle {font-size: 36px; margin: 10px 0; z-index: 100;}
#three .content .sectionText {font-size: 12px; margin: 10px 0; z-index: 100;}
#three .content .sectionTags {font-size: 12px; margin: 10px 0; z-index: 100;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T12:45:44.460

> 有没有办法控制文本速度，而不把它变成图像？

您可以以您喜欢的任何速度为文本设置动画。你的小提琴对我不起作用（只是输出的黑框），但这是基本的：

```
jQuery(function($) {

  $("button").click(function() {
    $("#sometext").animate({
          left: "+500"
        },
        500 // This is the duration, in milliseconds
    );
  });
}); 
```

您可以为`animate`函数提供动画应采用的持续时间。

[实例](http://jsbin.com/iseqes)| [来源](http://jsbin.com/iseqes/edit)- 该示例的时间从 250 毫秒到 750 毫秒不等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T15:36:11.020

似乎可行的解决方案是使用 jQuery inview 插件 - [http://remysharp.com/downloads/jquery.inview.js](http://remysharp.com/downloads/jquery.inview.js)

```
$('#seven, #three').bind('inview', function (event, visible) {
        if (visible == true) {
            $(this).addClass("active");
        }else{
            $(this).removeClass("active");
        }
    }); 
```

一旦滚动到视图中，使用上面的代码向页面添加一个活动类，然后希望之后删除该类。更改相关页面的 z-index 的活动类。到目前为止似乎工作 - 文本使用位置：固定。

```
#three {background:url(../img/bg_grey.jpg) 50% 50% no-repeat fixed;height: 2800px; position: relative; z-index: 800;}
#three.active {background:url(../img/bg_grey.jpg) 50% 50% no-repeat fixed;height: 2800px; position: relative; z-index: 850;} 
```

# perl - PostgreSQL 数据库将我的字符从 perl 转换为奇怪的格式

> ID：11014973
> 
> 赞同：0
> 
> 时间：2012-06-13T12:37:46.960
> 
> 标签：perl, postgresql, encoding

当我更新我的 postgresql 数据库中的条目时遇到问题，它将我的字符转换为错误的格式。我更新的方式是：

```
use Encode;
...
$user_name = escapeSql($user_name); # a statement that to doese this: line 1: $s =~ s/\?/_/g; and line 2: $s =~ s/\*/%/g;
$user_name = decode("utf-8", $user_name);
...
$statement = "UPDATE person SET name='".$user_name."', email='".$user_email."' WHERE id='".$user_id."'"; # The real statement have some more attributes, buts its the name that errors.
print STDERR "Statement: ". $statement;
$sth = $dbh->prepare($statement);
$result = $sth->execute(); 
```

如您所见，我打印出语句来检查 user_name 看起来应该是这样的，下面是它的样子： ![在此处输入图像描述](../Images/d71fbb6fd85ba9e39c1dd24e2bace800.png)

正如你所看到的，它说“Thør Åstrüp Pédersen”这是我的名字，我用我试图插入/更新我的条目的特殊字符替换了一些字符。现在，我已经调试了几天的最大问题是，当我在数据库上创建一个 select 语句并获取我的 user_name 以查看新名称（使用 dojo 在 web-GUI 中输入）是否已正确更改和更新时。 .但它看起来像：

![在此处输入图像描述](../Images/a8a042e56cb37574257d7d00e3cd2f21.png)

我根本无法弄清楚为什么我的数据库会这样做，或者我如何以任何方式检查数据库设置的字符编码并进行正确的转换。但话又说回来，它在 PERL 中看起来不错，因为错误日志正确输出它（如上面第一个 img 所示），但 PostgreSQL 数据库讨厌它并出于某种原因将其转换为蹩脚的字符。

我真的希望有人能提供帮助，即使这不是我第一次遇到编码问题.. 但我第一次想不通，因为它看起来像是 PostgreSQL 的东西，而不是 Perl 或 PHP 的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T12:44:14.657

您可以通过在 psql 提示符中发出 \l 来检查您的数据库编码。您还可以使用“show client_encoding;”检查您的客户端编码；

用 UTF8 重新创建数据库可能会更好。[手册](http://www.postgresql.org/docs/9.1/static/multibyte.html)中解释了有关 PostgreSQL 中编码的所有内容。

# hibernate - Hibernate：为什么 Session.load 方法存在于 Hibernate 中，因为如果找不到对象，它会抛出不可恢复的异常

> ID：11014978
> 
> 赞同：1
> 
> 时间：2012-06-13T12:37:57.587
> 
> 标签：hibernate

Hibernate中的方法`load`和`get`方法有什么区别？`Session`

> 如果没有匹配的数据库行，load() 将抛出一个不可恢复的异常。
> 
> 如果没有匹配的数据库行，get() 将返回 null。

为什么 Hibernate Creators 在 API 中保留这个 Method 负载？（因为如果找不到对象，它会引发不可恢复的异常）。还`get()`不够吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T13:20:35.307

如果未找到实体，则仅返回异常 vs null 返回。

Load 也可能会返回一个代理而不是实体的持久实例。然后，该代理将在首次访问属性时触发该实体的加载。

[这在此处](https://forum.hibernate.org/viewtopic.php?p=2387456)的 Hibernate 论坛上进行了详细讨论，之前在[此处](https://stackoverflow.com/questions/608947/hibernate-difference-between-session-get-and-session-load)的 SO和许多其他地方进行了讨论。

# mysql - Mysql查询，检查同一日期出生的两个用户

> ID：11014980
> 
> 赞同：0
> 
> 时间：2012-06-13T12:37:59.060
> 
> 标签：mysql

我需要一个 mysql 查询来从一个表中提取两个住在同一地址的用户，其中我有这些字段（id、username、date_of_birth、address）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T13:14:34.570

由于我的评论有帮助，因此答案相同：)

```
SELECT u.* FROM (
    SELECT address
    FROM users
    GROUP BY address
    HAVING COUNT(*) > 1
) addresses
INNER JOIN users AS u USING (address); 
```

或者，如果您想要使用逗号分隔的用户名的地址：

```
SELECT address, GROUP_CONCAT(username)
FROM users
GROUP BY address
HAVING COUNT(*) > 1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T12:47:43.320

你可以试试这个来获取地址重复

```
SELECT * FROM `Table` AS t1 WHERE EXISTS (SELECT * FROM `Table` AS t2 WHERE t1.address = t2.address AND t1.id != t2.id) 
```

# c# - 在 LINQ 中分组

> ID：11014985
> 
> 赞同：0
> 
> 时间：2012-06-13T12:38:06.930
> 
> 标签：c#, linq

我正在运行以下 LINQ 查询以进行分组`CategoryID`

```
var test = from x in ent.Products  
           group x by x.CategoryID into g
           select new  
           {
               x.EntityKey
           }; 
```

但我收到以下错误：

> 当前上下文中不存在名称“x”

知道为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T12:49:45.800

我发现方法语法更容易遵循：

如果您想`test`成为您的产品所属的 CategoryId 列表，请尝试：

```
var test = ent.Products.GroupBy(p => p.CategoryId)
                       .Select(g => g.Key) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T12:39:47.963

那是因为 after`group`语句`x`不再可用。你只能`g`在那里使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T12:40:05.633

你必须：

```
...
from something in g
select new {
  something.EntityKey
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-13T13:37:31.813

一旦您将一组数据分组到一个组中，您用于查询数据的变量（在您的情况下是）对于语句`x`变得不可用。`select`

分组后，您可以做的是使用组（在您的情况下是`g`），您可以在下面的语句中访问`g.Key`或查询`g`并访问它：`from``select`

```
var test = from x in ent.Products  
           group x by x.CategoryID into g
           from b in g
           select b.EntityKey; 
```

这是可能的，尽管我不能说这是最好的做法。（不是我说它不好，只是我很少看到这样的 LINQ 查询。我自己做过几次。）

# ios - 如何知道文件是否会在 iCloud 中备份？

> ID：11014986
> 
> 赞同：4
> 
> 时间：2012-06-13T12:38:10.223
> 
> 标签：ios, icloud

我的应用程序被拒绝，因为我使用 Documents 目录来存储我从服务器下载的一些文件。

我从 Apple 的文档中读到了这个：[https](https://developer.apple.com/library/ios/#qa/qa1719/_index.html) ://developer.apple.com/library/ios/#qa/qa1719/_index.html我发现了这个代码：[addSkipBackupAttributeToItemAtURL -> NSString 参数？](https://stackoverflow.com/questions/10591087/addskipbackupattributetoitematurl-nsstring-parameter)

我还读到这段代码对 iOS 版本 >= 5.0.1 很有用。并且 iOS 版本 < 5 不使用 iCloud 备份用户数据。但是那个 iOS == 5.0 使用 iCloud 来备份数据，但是这个标志不起作用。

所以，我有两个问题：

首先，我需要我的应用程序中的文件才能工作（如数据库）。如果我在 iOS 想要的任何时候将这些文件存储在 Caches 目录中，就可以删除我的文件。所以我将文件存储在 Documents 目录中，即：

```
/Documents/db.db
/Documents/my.plist 
```

之后，我将文件存储在该目录中，我为放入该目录中的每个文件调用方法 addSkipBackupAttributeToItemAtURL。但我不知道如何测试这种方法是否有效。

我在这里读过[iOS 5.0.1：如何验证该文件夹是否被标记为 iCloud 的“不备份”？](https://stackoverflow.com/questions/8117284/ios-5-0-1-how-to-verify-that-the-folder-is-marked-as-do-not-back-up-for-iclo)如果我使用模拟器，我可以转到应用程序的目录并运行此命令

```
xattr -plxv com.apple.MobileBackup <file name> 
```

了解文件是否已标记为不备份。

但是，如果我在命令行中运行该命令，我会为每个文件得到以下结果：

xattr：my.plist：没有这样的 xattr：com.apple.MobileBackup

所以，第一个问题是：**如何确定 Documents 目录下的文件被正确标记为不备份。我不想再次将我的应用程序上传到 AppStore 并且 Apple 的人再次将其丢弃。**

其次，我的应用程序在 iOS 5 上运行。如果用户有 iOS 5.0，我不想检查每个文件并将其存储在 Caches 目录中，并且每次我需要使用文件时检查是否“静止”。我有一个 500mb 的数据库，我不能每次都下载。

所以，第二个问题是：**如果在“iOS 部署目标”中我选择了 5.1，并且在 Build Settings > Base SDK 我也选择了 5.1，这意味着 iOS 版本 < 5.1 的用户将无法下载我的应用程序，对吗？**所以我不需要担心与使用 iOS 5.0 的用户一起获取我的数据，对吧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T12:49:38.047

我相信答案很简单：不要使用文档目录。

如果您不使用文档目录并且不弄乱 iCloud 配置，则不会备份该数据。

我相信你可以使用这个问题的答案中描述的库文件夹：[如何在 iPhone 上获得可写路径？](https://stackoverflow.com/questions/1567134/how-can-i-get-a-writable-path-on-the-iphone)

编辑：为了回答评论，我错误地认为只有文档数据被备份，根据[http://developer.apple.com/library/ios/DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/PerformanceTuning/PerformanceTuning上的苹果文档.html](http://developer.apple.com/library/ios/DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/PerformanceTuning/PerformanceTuning.html)但我仍然认为 Library 文件夹是非备份数据库的最佳位置。

但是，您应该使用 setResourceValue:forKey:error: 方法设置一个非备份标志，如同一文档中所述。

文档中不清楚如何不在 iOS 版本 == 5.0 上备份数据，除非您愿意重新创建已删除的缓存数据（我相信您不会，因此您的问题）。

如果不是问题，请将您的应用程序锁定为仅在 iOS 5.1 或更高版本上运行（将您的应用程序设置为在 XCode 上的最低 iOS 版本上运行，记得清理您的整个构建并重新构建它）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-24T08:44:08.680

如果您的目标是 >= iOS 5.1，下面的代码将对您有所帮助。使用以下方法将项目排除在 iCloud 上的备份之外。您甚至可以使用此代码排除整个文件夹

```
 - (BOOL)addSkipBackupAttributeToItemAtPath:(NSString *)filePathString {
        NSURL *fileURL =
        [NSURL fileURLWithPath:filePathString];

        assert([[NSFileManager defaultManager] 
        fileExistsAtPath: [fileURL path]]);

        NSError *error = nil;

        BOOL success = [fileURL setResourceValue:[NSNumber numberWithBool:YES]
                                      forKey:NSURLIsExcludedFromBackupKey
                                     error:&error];
        return success;
    } 
```

# javascript - 支持格式化程序的模板引擎

> ID：11014989
> 
> 赞同：0
> 
> 时间：2012-06-13T12:38:12.913
> 
> 标签：javascript, templates, template-engine

是否有支持格式化程序的 javascript 模板引擎？

也就是说，我可以告诉模板引擎它应该使用自定义格式化程序（使用干净的语法）。

类似的东西（借用 jsrender 语法）：

```
<td>{{:DateOfBirth, 'PrettyDate'}}</td> 
```

Where`'PrettyDate'`映射到以某种方式格式化日期的函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T12:45:20.333

Mustache 支持 lambda，你可以得到同样的效果。

[http://mustache.github.com/mustache.5.html](http://mustache.github.com/mustache.5.html)

[https://github.com/janl/mustache.js](https://github.com/janl/mustache.js)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T12:46:33.097

[`jinjs`](https://github.com/Ravelsoft/node-jinjs)，[Jinja2](http://jinja.pocoo.org/)的 JavaScript 版本支持过滤器，几乎可以满足您的需求。在你的情况下，语法是`{{ DAteOfBirth | PrettyDate }}`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T12:48:20.717

查看[**Underscore.js**](http://underscorejs.org/)，它支持格式化程序，请参阅：[如何使用 underscore.js 作为模板引擎？](https://stackoverflow.com/questions/4778881/how-to-use-underscore-js-as-a-template-engine)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T03:59:59.270

[远端](http://code.google.com/p/distal)模板支持格式化程序，请参阅[http://code.google.com/p/distal/wiki/Syntax#Formatting_data_into_numerical_form](http://code.google.com/p/distal/wiki/Syntax#Formatting_data_into_numerical_form)

看起来像：

```
<input data-qattr="value total_cost ,."> 
```

“，”在哪里 表示带有千位分隔符的数字 (1,000,000.00)

# ios - ios 以预定义尺寸打印

> ID：11014992
> 
> 赞同：0
> 
> 时间：2012-06-13T12:38:23.310
> 
> 标签：ios, printing

我制作了一个必须打印图像的应用程序。我需要打印具有预定义尺寸的图像。

例如，我有一些 50 x 50 像素的图像，我想将其调整为一些新尺寸的像素，在打印后我得到尺寸为 5 x 5 厘米的图像。

请看附件：

![在此处输入图像描述](../Images/a48dad9ddb570cb1ec8dac1fb96c1c5a.png)

感谢帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T12:56:05.903

嘿，我使用下面的代码来调整我的应用程序中的图像大小

根据需要设置大小

```
 UIImage *image = [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:[result objectForKey:@"pic"]]]];
        // Resize, crop the image to make sure it is square and renders
        // well on Retina display
        float ratio;
        float delta;
        float px = 100; // Double the pixels of the UIImageView (to render on Retina)
        CGPoint offset;
        CGSize size = image.size;
        if (size.width > size.height) {
            ratio = px / size.width;
            delta = (ratio*size.width - ratio*size.height);
            offset = CGPointMake(delta/2, 0);
        } else {
            ratio = px / size.height;
            delta = (ratio*size.height - ratio*size.width);
            offset = CGPointMake(0, delta/2);
        }
        CGRect clipRect = CGRectMake(-offset.x, -offset.y,
                                     (ratio * size.width) + delta,
                                     (ratio * size.height) + delta);
        UIGraphicsBeginImageContext(CGSizeMake(px, px));
        UIRectClip(clipRect);
        [image drawInRect:clipRect];
        UIImage *imgThumb = UIGraphicsGetImageFromCurrentImageContext();

        UIGraphicsEndImageContext();
        [img setImage:imgThumb]; 
```

# java - XMemcached 客户端的多线程使用

> ID：11014993
> 
> 赞同：2
> 
> 时间：2012-06-13T12:38:29.570
> 
> 标签：java, multithreading, performance, memcached, xmemcached

给定

```
client = new XMemcachedClient(server, port); 
```

如果我有几个线程这样做会发生什么：

```
object = client.get(key); 
```

在（相当空的）[xmemcached javadoc](http://xmemcached.googlecode.com/svn/trunk/apidocs/net/rubyeye/xmemcached/MemcachedClient.html)中，我看不到同步。

1.  是`MemcachedClient.get`同步的吗？如果没有，我必须自己同步吗？
2.  可以并行调用 memcached 以避免我的线程被阻塞吗？我是否需要为`MemcachedClient`每个线程实例化一个，或者当前的代码是否已经能够做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T13:02:27.753

*XMemcachedClient*可以被多个线程并行使用。无需同步对*XMemcachedClient*实例的调用。这是一个示例[代码](http://xmemcached.googlecode.com/svn/trunk/benchmark/)，有多少线程可以使用单个客户端。

在 xmemcached 页面上，有一个[基准测试](http://xmemcached.googlecode.com/svn/trunk/benchmark/benchmark.html)显示性能取决于使用单个*XMemcachedClient*实例的线程数。

# java - 验证后不显示表单错误 - Struts2

> ID：11014995
> 
> 赞同：0
> 
> 时间：2012-06-13T12:38:36.637
> 
> 标签：java, struts2

我有一个简单的 HTML 表单，不使用 strut 标签。当它通过验证并出现错误时，该操作会执行类似的操作

```
 addFieldError( ""st_enroll.roll"", "Already taken" ); 
```

问题出在错误上，用户按预期返回表单，但未显示错误。是因为我没有使用 struts 标签吗？我的表单内容是这样的

```
 <label>Student Roll:</label>    <input type="text" name="st_enroll.roll"/> <br> 
```

有什么建议么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T12:44:44.233

`<s:fielderror/>`在您的 jsp 中使用 以显示错误。将其放在您要显示的位置（可能在页面顶部）并使用`<s:textfield>`标签

*   [阅读有关如何使用字段错误的文档。](http://struts.apache.org/2.0.8/struts2-core/apidocs/org/apache/struts2/components/FieldError.html)
*   [阅读有关字段错误的示例](http://www.roseindia.net/struts/struts/struts2.2.1/tags/fielderror_tag.html)

# android - 如何从可绘制的图像（包括图像规格）中检索图像并将其显示到 ListView

> ID：11014997
> 
> 赞同：0
> 
> 时间：2012-06-13T12:38:51.817
> 
> 标签：android, sqlite

我有可绘制的图像和一个具有列名（例如价格和图像名称）的数据库...所以我想检索所有图像名称列表并在 listView 上显示相应的图像以及数据库中的其他字段...所以这里是什么我已经试过了。。

```
//getting a list of names from database

public List<String> populateList(){
        List<String> ItemsList = new ArrayList<String>();
        DatabaseHelper openHelper = new DatabaseHelper(this);
        SQLiteDatabase sqliteDatabase = openHelper.getReadableDatabase();

        // We need a a guy to read the database query. Cursor interface will do it for us
                //(String table, String[] columns, String selection, String[] selectionArgs, String groupBy, String having, String orderBy)
                Cursor cursor = sqliteDatabase.query(DBAdapter.ITEMS_TABLE, null, null, null, null, null, null);
                // Above given query, read all the columns and fields of the table

                startManagingCursor(cursor);

                while (cursor.moveToNext()) {
                    // In one loop, cursor read one undergraduate all details
                    // Assume, we also need to see all the details of each and every undergraduate
                    // What we have to do is in each loop, read all the values, pass them to the POJO class
                    //and create a ArrayList of undergraduates

                    String BName = cursor.getString(cursor.getColumnIndex(DBAdapter.COLUMN_BOOK_NAME));
                    String Bauthor = cursor.getString(cursor.getColumnIndex(DBAdapter.COLUMN_BOOK_AUTHOR));
                    String Bgenre = cursor.getString(cursor.getColumnIndex(DBAdapter.COLUMN_BOOK_GENRE));
                    String Bpublisher = cursor.getString(cursor.getColumnIndex(DBAdapter.COLUMN_BOOK_PUBLISHER));
                    String Bcover = cursor.getString(cursor.getColumnIndex(DBAdapter.COLUMN_BOOK_COVER_TYPE));
                    int Bpages = cursor.getInt(cursor.getColumnIndex(DBAdapter.COLUMN_BOOK_NUM_PAGES));
                    int Bage = cursor.getInt(cursor.getColumnIndex(DBAdapter.COLUMN_BOOK_AGE_RESTRICTION));
                    int Bqty = cursor.getInt(cursor.getColumnIndex(DBAdapter.COLUMN_BOOK_QUANTITY));
                    double Bprice = cursor.getDouble(cursor.getColumnIndex(DBAdapter.COLUMN_BOOK_PRICE));
                    String Bimage = cursor.getString(cursor.getColumnIndex(DBAdapter.COLUMN_BOOK_IMAGE));
                    //String uHaddress = cursor.getString(cursor.getColumnIndex(DBAdapter.COLUMN_ADDRESS));
                    //double ugGpa = cursor.getDouble(cursor.getColumnIndex(AndroidOpenDbHelper.COLLUMN_NAME_UNDERGRADUATE_GPA));

                    // Finish reading one raw, now we have to pass them to the POJO
                    BooksPojo uPojoClass = new BooksPojo(BName, Bauthor, Bgenre, Bpublisher, Bcover, Bpages, Bage, Bqty, Bprice, Bimage);

                    // Lets pass that POJO to our ArrayList which contains undergraduates as type
                    pojoArrayList.add(uPojoClass);

                    // But we need a List of String to display in the ListView also.
                    //That is why we create "uGraduateNamesList"
                    ItemsList.add(Bimage);
                }

                // If you don't close the database, you will get an error
                sqliteDatabase.close();
    return ItemsList;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T12:52:49.263

如果您将drawable的名称存储在数据库中，则可以使用[getIdentifier](http://developer.android.com/reference/android/content/res/Resources.html#getIdentifier%28java.lang.String,%20java.lang.String,%20java.lang.String%29)检索ID ，然后将ID传递给[getDrawable](http://developer.android.com/reference/android/content/res/Resources.html#getDrawable%28int%29)，这将使drawable与ImageView一起使用。

要将所有这些数据放入您的 ListView 中，您应该使用[ListAdapter](http://developer.android.com/reference/android/widget/ListAdapter.html)。SimpleCursorAdapter[可能](http://developer.android.com/reference/android/support/v4/widget/SimpleCursorAdapter.html)最适合您的需求。