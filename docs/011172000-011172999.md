# StackOverflow 问答 11172000-11172999

# java - 使用 JavaFX 在 Eclipse 中导出 Jar 文件

> ID：11172003
> 
> 赞同：1
> 
> 时间：2012-06-23T18:37:13.893
> 
> 标签：java, eclipse, javafx

我使用 JavaFX 2.1 创建了一个应用程序并希望将其导出以进行测试。这是我制作的第一个“真正的”应用程序，所以我以前从未这样做过。在带有 Eclipse 的 Windows 7 中，我导出了一个可运行的 jar，单击它，没有任何反应。有人可以告诉我为什么会这样吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T23:02:56.417

**包装信息**

下面的应用程序是使用命令行[javafxpackager](http://docs.oracle.com/javafx/2/deployment/packager001.htm)工具打包的。JavaFX 还提供了用于打包的[ant 任务。](http://docs.oracle.com/javafx/2/deployment/javafx_ant_task_reference.htm#CIACDJHC)我相信您可以创建一个用于打包的 ant 脚本，并从 Eclipse 内部运行它的任务。

[e(fx)clipse](http://efxclipse.org/)插件通过包装 JavaFX ant 任务来提供集成的 JavaFX 打包功能。使用 Eclipse 开发 JavaFX 应用程序时，强烈建议使用 e(fx)clipse。

**验证您的 JavaFX 打包**

*   `jar xf <jarfile>`从 jar ( ) 中提取 jar 文件。
*   查看提取的清单 ( `META-INF\MANIFEST.MF`)。
*   如果清单中的主类不是 com/javafx/main/Main，那么您将应用程序打包错误。

* * *

```
C:\dev\javafx\willow\dist>jar xf willow.jar

C:\dev\javafx\willow\dist>type MANIFEST.MF
Manifest-Version: 1.0
JavaFX-Version: 2.1
JavaFX-Application-Class: org.jewelsea.willow.Willow
JavaFX-Class-Path: lib\image4j.jar lib\PDFRenderer-0.9.1.jar
Created-By: JavaFX Packager
Main-Class: com/javafx/main/Main

C:\dev\javafx\willow\dist>java -jar willow.jar 
```

对于您的清单，`JavaFX-Application-Class`条目会有所不同，并且`JavaFX-Class-Path`可能不需要该属性。

我使用的示例 jar 然后可以使用`java -jar <jarfile>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T06:35:31.103

Like mentioned by the jewelsea [e(fx)clipse](http://www.efxclipse.org) provides you an export wizard which uses the ant tasks provided by JavaFX. You can find a step by step tutorial at [https://wiki.eclipse.org/Efxclipse/Tutorials/Tutorial1](https://wiki.eclipse.org/Efxclipse/Tutorials/Tutorial1)

# c# - c# foreach 循环写得不好

> ID：11172009
> 
> 赞同：2
> 
> 时间：2012-06-23T18:37:39.150
> 
> 标签：c#, asp.net, sqlcommand

这个 foreach 循环在测试时工作正常，只返回 5 行数据，但我很清楚它的编写方式有多糟糕，有没有更好的方法，可能使用 stringbuilder 更有效地重写它？

```
 SqlConnection conn = new SqlConnection(ConfigurationManager.ConnectionStrings["connstring"].ConnectionString);
    SqlCommand comm = new SqlCommand("SELECT Title, StartDate FROM tblEvents JOIN eo_UserEventWatch ON eo_UserEventWatch.EventID=tblEvents.ID WHERE eo_UserEventWatch.UserID = @GUID ;", conn);
    comm.Parameters.AddWithValue("GUID", userID);
    conn.Open();
    SqlDataAdapter da = new SqlDataAdapter(comm);
    DataTable dt = new DataTable();
    da.Fill(dt);
    string result ="{ \"event\" :[";
    foreach (DataRow dr in dt.Rows)
    {
        result += "{\"title\" : \"" + dr[0].ToString() + "\" , \"start\" : \"" + dr[1].ToString() +"\"} ,";
    }
    result = result.TrimEnd(',');
    result += "] }";
    return result; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T18:41:16.290

是的，使用它会更有效`StringBuilder`：

```
StringBuilder builder = new StringBuilder("{ \"event\" :[");
foreach (DataRow row in dt.Rows)
{
    // Alternatively, use AppendFormat
    builder.Append("{\"title\" :\"");
           .Append(row[0])
           .Append("\", \"start\" : \"")
           .Append(row[1])
           .Append("\"} ,");
}
if (builder[builder.Length - 1] == ',')
{
    builder.Length -= 1;
}
builder.Append("] }");
string result = builder.ToString(); 
```

然而，它仍然不是*很好的*代码——因为你已经得到了所有可怕的文字 JSON。我建议使用[Json.NET](http://json.codeplex.com)或其他 JSON 库。那时您可能可以使用 LINQ，例如

```
var result = new { event = dt.AsEnumerable()
                             .Select(r => new { 
                                 title = r.Field<string>(0),
                                 start = r.Field<DateTime>(1))
                             .ToArray() };
// Or whatever, depending on the library you use
var json = JsonSerializer.ToJson(result); 
```

除了其他，现在您无需担心起始值的格式，或者标题是否包含引号等。

（编辑：如前所述，您绝对应该有`using`SQL 连接等语句。这超出了问题的重点，这就是为什么我在这里没有提到它。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T18:45:39.660

以下是您将如何使用 StringBuilder

```
StringBuilder sb = new StringBuilder();
sb.Append("{ \"event\" :[");

foreach(DataRow dr in dt.Rows)
{
    sb.Append("{\"title\" : \"");
    sb.Append(dr[0].ToString());
    sb.Append("\" , \"start\" : \"");
    sb.Append(dr[1].ToString());
    sb.Append("\"} ,");
}

sb.Remove(sb.ToString().Length - 1, 1);
sb.Append("] }");

return sb.ToString(); 
```

为了完全做到这一点，我会使用[JavaScriptSerializer](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx)之类的东西（只是一个示例）：

```
var stuff= (from DataRow dr in dt.AsEnumerable()
            select new {
                 DataItem1 = (string)dr[0];
                 DataItem2 = (string)dr[1];
            });

JavaScriptSerializer serializer = new JavaScriptSerializer();
return serializer.Serialize(stuff); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T18:57:39.047

**string.format 在内部使用 StringBuilder。**

[String.Format 是否与 StringBuilder 一样高效](https://stackoverflow.com/questions/6785/is-string-format-as-efficient-as-stringbuilder)

```
public static string GetResult()
        {
            int userId = 0;
            string connectionString = ConfigurationManager.ConnectionStrings["connstring"].ConnectionString;
            string statement = "SELECT Title, StartDate FROM tblEvents JOIN eo_UserEventWatch ON eo_UserEventWatch.EventID=tblEvents.ID WHERE eo_UserEventWatch.UserID = @GUID";

            using (var con = new SqlConnection(connectionString))          
            using (var cmd = new SqlCommand(statement, con))
            {
                con.Open();
                cmd.Parameters.AddWithValue("GUID", userId);
                using (var dataAdapter = new SqlDataAdapter(cmd))
                {
                    DataTable dt = new DataTable();
                    dataAdapter.Fill(dt);
                    string result = "{ \"event\" :[";
                    foreach (DataRow dr in dt.Rows)
                    {
                        result += string.Format(@"{\title\ : \{0}\ , \start\ : \{1}\} ,", dr[0].ToString(), dr[1].ToString());
                    }
                    result = result.TrimEnd(',');
                    result += "] }";
                    return result;
                }
            }          
        } 
```

# ios - 在 dropbox(ios) 中获取上传进度

> ID：11172017
> 
> 赞同：2
> 
> 时间：2012-06-23T18:39:04.610
> 
> 标签：ios, dropbox

在保管箱中，我可以轻松上传文件，但是当我尝试获取上传进度（上传文件的百分比）时失败了，我使用的是我在

> 休息客户端，h

它应该可以工作，但什么也没发生：

```
- (void)restClient:(DBRestClient*)client uploadProgress:(CGFloat)progress forFile:(NSString *)destPath from:(NSString *)srcPath {

    NSLog(@"%0.00f",progress);

} 
```

我也已将我的班级设置为 restclient 的代表，并且在其他方​​面工作正常。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T18:58:54.030

```
- (void)restClient:(DBRestClient*)client uploadProgress:(CGFloat)progress forFile:(NSString *)destPath from:(NSString *)srcPath 
{

    NSLog(@"%.2f",progress); //Correct way to visualice the float

} 
```

# html - 如何使用 CSS3 过渡使 IMAGE 移动独立于其周围的元素？

> ID：11172019
> 
> 赞同：0
> 
> 时间：2012-06-23T18:39:31.317
> 
> 标签：html, css, css-transitions

我正在尝试使用 CSS3 过渡来使其中的图像在悬停`<div>`时向上移动 10 个像素。`<div>`它在 Firefox 中运行良好，但是当我在 Chrome 和 Safari 中查看它时，`<h3>`和`<p>`元素会上下抖动。

这是我的 CSS：

```
.feature-table #box {
    width: 325px;
    height: 372px;
    margin-right: 20px;
    float: left;
}

.feature-table a {
    display: block;
    width: 325px;
    height: 372px;
}

.feature-table a img {
    display: block;
    margin-left: auto;
    margin-right: auto;
    padding-top: 54px;
    padding-bottom: 40px;
    -moz-transition: all 0.3s linear;
    -webkit-transition: all 0.3s linear;
    transition: all 0.3s linear;
}

.feature-table a: hover img {
    padding-top: 44px;
    padding-bottom: 50px;
}

.feature-table a h3 {
    font-family: 'GothamBold', sans-serif;
    font-size: 30px;
    color: #3d3d3d;
    text-align: center;
    text-decoration: none;
    margin: 0;
    padding: 0 25px;
}

.feature-table a: hover h3 {
    color: #f6ce4f;
}

.feature-table a {
    text-decoration: none;
}

.feature-table p {
    font-family: 'GothamLight', sans-serif;
    font-size: 14.5px;
    color: #949494;
    text-align: center;
    padding: 10px 28px;
}

.feature-table .caret {
    border-top: 5px solid #fff;
    border-bottom: 5px solid #fff;
    border-left: 5px solid #ffc235;
    content: "";
    display: inline-block;
    height: 0;
    width: 0;
    margin-left: 10px;
} 
```

这是我的 HTML 的一部分：

```
<div id="box">
    <a href="#">
        <img src="images/payment_icon.png" width="114" height="115" border="0" />
        <h3>Customizable Campaign Pages</h3>
        <p>Tell your story with images, video, rich text and social updates<b class="caret"></b></p>
    </a>
</div> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T18:51:09.907

这可能是一个性能问题，因为您正在为影响当前布局的 2 个不同属性设置动画。
理想的解决方案是使用不影响其他元素的特定道具。在您的情况下，可以`top`在将图像的位置设置为之后使用属性来完成`relative`：

```
a img{
    position : relative;
    top : 0;
}
a:hover img{
    top : -4px;
} 
```

这是一个工作演示：http: [//jsfiddle.net/p7Lxz/](http://jsfiddle.net/p7Lxz/)

# ubuntu - 如何将文件从 VirtualBox 复制到主机操作系统？

> ID：11172028
> 
> 赞同：16
> 
> 时间：2012-06-23T18:40:10.983
> 
> 标签：ubuntu, virtual-machine

我正在使用**VirtualBox**，我的客户操作系统是**Ubuntu**。我已经安装了**来宾添加**并创建了一个共享文件夹。我的主机操作系统是**Windows 7**。

我在 Ubuntu 操作系统中有一个文件`Documents/myfolder`，我想将此文件复制到 Win 7 中的任何分区。谁能给我步骤？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-23T18:52:41.530

检查您`/mnt`在 Ubuntu 上的目录。在那里您应该看到已安装的共享文件夹。预先在 VM 首选项中验证共享文件夹是否仍处于活动状态。

如果共享文件夹在 下不可见`/mnt`，则您必须手动安装它，如此[处](https://serverfault.com/questions/674974/how-to-mount-a-virtualbox-shared-folder)所述。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-08-13T08:52:06.850

最简单的方法：

1.  在主机上打开 netcat 接收器：

> nc -l -p 1234 > 文件.zip

2.  从客人那里发送您的文件

> NC 10.0.2.2 1234 < 文件.zip

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2020-01-14T04:15:30.893

虚拟机停止后，在设置共享文件夹下创建类似这样的内容。文件夹路径是您的主机路径，挂载点位于虚拟机中。 [![在此处输入图像描述](../Images/d87f835a1210ee1354c34e19be513d0b.png)](https://i.stack.imgur.com/ngFVa.png)

然后启动虚拟机，打开一个终端（这是一个 Ubuntu 虚拟机）并运行 `sudo mount -t vboxsf vbox_share /mnt`匹配`vbox_share`上图中的文件夹名称字段。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2020-09-13T18:30:40.167

只需以一种方式（来宾到主机或主机到来宾）或两种方式启用“拖放”。然后只需从主机拖放到访客，反之亦然。

[![在此处输入图像描述](../Images/b6353e9b25cdd9fc5421a96bdc6b8e0f.png)](https://i.stack.imgur.com/1hk6U.png)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-02-10T22:50:45.577

您可以使用[WinSCP](http://winscp.net/eng/index.php)从您的 Windows 计算机进行连接。无需在您的 Linux 机器上设置任何东西，除了 SSH。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-10-27T06:11:18.307

如果您正在运行不支持来宾添加的来宾，另一种选择是使用连接到主机的 USB 驱动器，并将其共享给来宾。在 Virtualbox 来宾窗口中，Devices->USB Devices，选择 USB 驱动器。这不需要客人添加。这通常会使设备在主机中无法使用，因此基本上您将 USB 连接到来宾，将文件添加到其中，然后分离。在我的情况下，我正在运行 ubuntu 服务器，提示符上出现一条消息，表明它已添加为 /dev/sdb，但在我的情况下 sdb 不可挂载，但 sdb1 是：

```
cd /mnt
mkdir somename
mount /dev/sdb1 /mnt/somename 
```

这是来自记忆，但希望如果您有一个无法设置来宾添加设置的客人，这将使像我这样的其他菜鸟走上正轨。

请注意，对闪存驱动器进行大量写入确实会磨损它。

# database - 数据集 - 车辆品牌/型号/年份（免费）

> ID：11172031
> 
> 赞同：70
> 
> 时间：2012-06-23T18:40:42.720
> 
> 标签：database

我正在创建一个每年需要所有可用的美国汽车品牌/型号的应用程序。我已经阅读了其他帖子的一些建议，例如使用 Freebase 或 DbPedia 或 EPA，但这些数据集都显得相当不完整且不一致。我检查了像 Edmond 之类的开放 API，但它们限制存储数据 - 我需要在我的数据库中，所以这不起作用。有什么建议可以让我在不花钱的情况下获得这些数据？

* * *

## 回答 #1

> 赞同：180
> 
> 时间：2012-06-26T13:09:36.143

显然那里没有太多东西。很多人怀疑有人愿意提供这样的存储库。所以我自己解决了这个问题，并与其他发现自己面临同样问题的人共享我的数据集。

[https://github.com/n8barr/automotive-model-year-data](https://github.com/n8barr/automotive-model-year-data)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-01-24T13:56:50.107

这些人有一个可以给出结果的 API。它也是免费使用的。

[http://www.carqueryapi.com](http://www.carqueryapi.com)

注意：他们还以高价提供 xls 或 sql 格式的数据源下载。但这些数据还提供了所有品牌型号和装饰选项的技术规格。

* * *

## 回答 #3

> 赞同：-6
> 
> 时间：2013-03-05T20:51:36.063

自由基地怎么样？我认为他们也有可用的 API。

[http://www.freebase.com/](http://www.freebase.com/)

# android - as3 AIR 中的类 iOS Scrollview

> ID：11172033
> 
> 赞同：-3
> 
> 时间：2012-06-23T18:41:12.190
> 
> 标签：android, ios, actionscript-3, mobile, air

我正在尝试`UIScrollView`在 ActionScript 3 中为我的 Adob​​e AIR 应用程序创建一个类似 iOS 的程序，但它不是很顺利。

为什么 Adob​​e 没有实现原生滚动视图？有没有人已经使用电影剪辑或类似的东西实现了平滑滚动？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T06:21:34.567

看看这个。它应该给你一些想法/帮助你开始。

[http://www.infin8iphone.co.uk/?p=57](http://www.infin8iphone.co.uk/?p=57)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-25T02:18:46.857

我为 AS3 创建了一个功能非常齐全的类似 iOS 的 ScrollView/ListView 组件，你可以试试： [https ://github.com/albert-zhang/AZASScroll](https://github.com/albert-zhang/AZASScroll)

# ios - phonegap 到达 iphone 目录

> ID：11172041
> 
> 赞同：0
> 
> 时间：2012-06-23T18:42:38.587
> 
> 标签：ios, xcode, ios5, cordova

我开始在 xcode 中编写 phonegap 应用程序。我正在使用服务器编写更新检查器应用程序。首先，我使用服务器中的 json 文件检索应用程序内容。然后我需要到达 iphone 目录以便与服务器比较这个应用程序是否存在。那么，如何到达phonegap 中的iphone 目录。谢谢 ps：对不起我的英语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T18:46:58.287

使用 File api：[http](http://docs.phonegap.com/en/1.8.1/cordova_file_file.md.html#File) ://docs.phonegap.com/en/1.8.1/cordova_file_file.md.html#File 您需要更新 Cordova.plist 文件：

```
<key>Plugins</key>
<dict>
    <key>File</key>
    <string>CDVFile</string>
</dict>

<key>Plugins</key>
<dict>
    <key>FileTransfer</key>
    <string>CDVFileTransfer</string>
</dict> 
```

然后，您可以使用 DirectoryReader/FileReader API 检查您的文件。请注意，iOS 沙盒应用程序意味着您只能看到与您的应用程序隔离的文件系统的一部分。

# javascript - 使用 jQuery 的 .serialize() 时获取输入字段类型

> ID：11172048
> 
> 赞同：0
> 
> 时间：2012-06-23T18:44:09.270
> 
> 标签：javascript, jquery, javascriptserializer

是否有可能使用 jQuery`$.serialize()`或`$.serializeArray()`获取正在序列化的输入字段的类型（它们的属性）？显然它在标题中发送输入名称，但我想知道我是否可以抓住：`textarea`, `input type="text"`, `input type="radio"`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T19:05:53.817

这个怎么样？

```
var allInputs = $("#myform *:input").map(function (i,e)
                     {
                         return {id: $(e).attr("id"),
                                 name: $(e).attr("name"),
                                 type: $(e).attr("type"),
                                 tag: $(e).get(0).tagName
                                };
                     }
                     ); 
```

见[http://jsfiddle.net/cranio/6uBLQ/](http://jsfiddle.net/cranio/6uBLQ/)

它给出了一个具有这种形式的对象：

```
[{id: "c", name: "x" tag: "TEXTAREA" type: undefined},
{id: "a", name: "z", tag: "INPUT", type: "text"}, 
{id: "b", name: "y", tag: "INPUT", type: "hidden"},
...] 
```

从中您可以使用其 id 引用输入，根据标签和/或类型采取不同的操作，序列化和发送此对象，等等。适用于隐藏、SELECT、TEXTAREA ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T19:24:33.860

可以轻松地将表单输入属性操作到您想要的任何结构。这里有2种口味

演示：http: [//jsfiddle.net/zd3Pc/](http://jsfiddle.net/zd3Pc/)

```
/* array of element objects */
var formMap = $.map($('form :input'), function(el, idx) {
    return {
        type: el.type,
        value: el.value,
        name: el.name
    };
});

/* object with arrays of name and value properties within type property */

var formObj = {}
$('form :input').each(function() {
    if (!formObj[this.type]) {
        formObj[this.type] = [];
    }
    formObj[this.type].push({
        name: this.name,
        value: this.value
    })
}) 
```

# sockets - 为什么源欺骗数据包不能通过互联网传输？

> ID：11172050
> 
> 赞同：-3
> 
> 时间：2012-06-23T18:44:32.547
> 
> 标签：sockets

我使用原始套接字来欺骗源 IP 数据包，但我无法在目标中接收欺骗数据包。

如果我的ip是：`44.44.44.44`

我无法接收带有源 IP:的数据包`44.44.44.45`。

有两台计算机（A和B）我欺骗数据包的源IP并将它们发送到B中的B我看不到源欺骗数据包......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T18:47:03.640

当然不是。接收方使用源 IP 字段来确定向谁发送响应。因此，如果您在发送的数据包中欺骗该字段，则不会将响应发送给您。

# .net - SlaarToolkit - 仅支持 32 位 ARGB 像素格式，不支持 Format32bppArgb

> ID：11172055
> 
> 赞同：1
> 
> 时间：2012-06-23T18:45:51.360
> 
> 标签：.net, windows-phone-7

有没有办法将 Format32bppArgb 转换为 32 位 argb 以及如何？

编辑：好的，我正在加载一个默认`SlaarToolkit`标记：

```
var marker = Marker.LoadFromResource("/Content/Marker_SLAR_16x16segments_80width.pat", 16, 16, 80); 
```

当我运行应用程序时，我收到 InvalidOperationException 消息：

```
Only 32 Bit ARGB pixel format is supported, not Format32bppArgb 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T19:01:18.520

这听起来像是该库、您尝试加载的内容文件或 Windows Phone CLR 本身有问题。

这是引发该异常的库中的代码：

```
/// <summary>
/// Invoked when a video device reports a  video format change.
/// </summary>
/// <param name="videoFormat">The new video format.</param>
protected override void OnFormatChange(VideoFormat videoFormat)
{
    if (videoFormat.PixelFormat != PixelFormatType.Format32bppArgb)
    {
        throw new InvalidOperationException(String.Format("Only 32 Bit ARGB pixel format is supported, not {0}.", videoFormat.PixelFormat));
    }

    detector.ChangeFormat(videoFormat.PixelWidth, videoFormat.PixelHeight);
    vidFormat = videoFormat;
} 
```

这是一个非常简单的比较，让我相信 videoFormat 参数的 PixelFormat 属性实际上不是 PixelFormatType.Format32bppArgb。

如果没有更多细节和更大的代码示例，以及导致问题的文件，几乎不可能知道这里发生了什么。

我真的无法想象这是怎么发生的，因为 VideoFormat 和 PixelFormatType 都是 Windows Phone 的内置 CLR 类型。PixelFormatType 是一个简单的枚举，甚至没有位标记，因此重叠位字段不会成为问题。VideoFormat 的 PixelFormat 属性属于 PixelFormatType 类型，因此您不可能使用此值引发此异常。

我会向图书馆的开发人员和 Microsoft 报告这一点，因为这似乎是以一种无形的方式出现了非常大的问题。

当您尝试使用其他内容文件时会发生这种情况吗？

# python - Python 会话、cookie 和网络

> ID：11172056
> 
> 赞同：1
> 
> 时间：2012-06-23T18:46:05.243
> 
> 标签：python, forms, session, cookies, mechanize

****经过短暂的思考后编辑，我只是​​想我根本不需要使用 mechanize，但我不知道我应该使用哪个 Python 库来与 cookie 和会话数据进行交互，任何人都可以提示我 ？****

我想执行一个简单的登录并使用某些站点的凭据（以及 cookie、会话数据）。

我使用 mechanize 来执行基本的表单使用，因为表单是使用 Javascript 构建的

```
import cookielib
br = mechanize.Browser()
cj = cookielib.LWPCookieJar()
br.set_cookiejar(cj)
br.set_handle_equiv(True)
br.set_handle_gzip(True)
br.set_handle_redirect(True)
br.set_handle_referer(True)
br.set_handle_robots(False)

br.set_handle_refresh(mechanize._http.HTTPRefreshProcessor(), max_time=1)

br.set_debug_http(True)
br.set_debug_redirects(True)
br.set_debug_responses(True)

br.addheaders = [('User-agent', 'Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.0.1) Gecko/2008071615 Fedora/3.0.1-1.fc9 Firefox/3.0.1')]

parameters = { 'username' : 'w00t',
               'password' : 't00w'
            }
data = urllib.urlencode(parameters)
resp = br.open(url,data) 
```

但是由于某种原因，我似乎无法从服务器获得任何积极响应，我没有看到任何迹象（用于重定向到所需页面），也不知道一旦我拥有 cookie 和会话后如何继续继续使用这些 cookie 和会话数据

我想知道是否有人可以提示我或让我参考正确的文档，因为我发现的似乎并不能解决我的问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T19:07:08.653

我以前在 Python 中使用过 Requests 库 (http://docs.python-requests.org/en/latest/index.html) 来处理这类事情。我发现它非常直接并且有很好的文档。这是一个在请求中包含 cookie 的示例：

```
>>> url = 'http://httpbin.org/cookies'
>>> cookies = dict(cookies_are='working')

>>> r = requests.get(url, cookies=cookies)
>>> r.text
'{"cookies": {"cookies_are": "working"}}' 
```

我使用过 Mechanize，如果我记得，它会为您跟踪 cookie。相反，该库将要求您根据请求不断地重新发布 cookie。

# php - 如何使用php从数据库中删除图像

> ID：11172057
> 
> 赞同：-2
> 
> 时间：2012-06-23T18:46:07.070
> 
> 标签：php, mysql

我正在尝试使用 PHP 从数据库中删除图像。

我使用以下代码：

```
$del=$_GET['picid'];
$ins="delete from photos where photo_id='$del'";
$result=mysql_query($ins); 
```

但图像仅在 MySQL 表中被删除，而不是在服务器中

我需要从 MySQL 表和服务器中删除图像

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T18:48:43.840

Mysql DB > 表 > 字段

你的问题真的没有意义。如果您要做的是从文件系统中删除文件（即从磁盘上删除），那么您将需要使用[unlink](http://php.net/manual/en/function.unlink.php)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T18:48:30.107

要从服务器中删除图像，请使用[`unlink()`](http://php.net/unlink)：

```
unlink("images/myImage.png"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T18:52:17.353

如果您要从服务器上删除文件，那么您必须使用`unlink($image_path);`PHP 中的函数才能删除该文件。

# scala - 搞砸了特征线性化？

> ID：11172062
> 
> 赞同：4
> 
> 时间：2012-06-23T18:46:54.597
> 
> 标签：scala, multiple-inheritance, traits, linearization

这是一个让我头疼的特征线性化谜题。我基本上有类型`Node`，它定义`equals`并`hashCode`与其他`Node`s 进行比较。而且我有一个`Selector`类型，可以将 a`Node`与额外的数据一起包装，因此有自己的类型`equals`，`hashCode`可以与其他`Selector`s 进行比较。

现在我有一个`Standalone`结合`Node`and的类型`Selector`，但是我得到不一致的（？）关于`equals`and的线性化`hashCode`：

```
trait Selector { override def hashCode = 1 }
trait Event extends Selector

trait Node { override def hashCode = 2 }
trait Standalone extends Node with Event 
```

现在一切都很好（更具体的 hashCode 1 被称为）当我从`Event`or扩展时`Standalone`：

```
object Single1 extends Event
Single1.hashCode // 1 -- ok

object Single2 extends Standalone
Single2.hashCode // 1 -- ok 
```

如果我按以下顺序从两者扩展也很好：

```
object Compound1 extends Standalone with Event
Compound1.hashCode // 1 -- Ok 
```

但是当我这样做时它搞砸了：

```
object Compound2 extends Event with Standalone
Compound2.hashCode  // 2 -- no!!!!!!!! 
```

我做了一个小点图（mixin 从左到右排序）：

![在此处输入图像描述](../Images/d4ea75ac52bd1b3240e79790b8b7c4d4.png)

所以，如果我正确理解[线性化规则](http://jim-mcbeath.blogspot.co.uk/2009/08/scala-class-linearization.html)，我应该总是`hashCode`以`Selector`. 这种行为的唯一解释是涉及某种贪婪/深度优先的事情......？

此外，如果我可以使用一种技术来确保无论何时`Standalone`混入，都可以确保`Selector`否决`Node`（复制`equals`和`hashCode`from `Selector`to`Standalone`除外），这将非常感激。

这是 Scala 2.9.2。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T22:17:37.097

这种事情最好去规范。该算法描述于`5.1.2 Class Linearization`

解释它，类 C 的线性化是 C，然后是从最右边的项目开始扩展的事物的线性化。然后是在线性化中删除重复项的最后一步，只保留最右边的。

所以在你的例子中`Compound1`（忽略像 AnyRef 这样的内置插件）：
`L(Compound1) = Compound1 + L(Event) + L(Standalone)`
`L(Event) = Event + L(Selector)`
`L(Selector) = Selector`
`L(Standalone) = Standalone + L(Event) + L(Node)`
`L(Node) = Node`
把它放在一起：
`L(Compound1) = Compound1 Event Selector Standalone Event Selector Node`
删除重复项：
`Compound1 Standalone Event Selector Node`

因为`Compound2`它最终是：
`Compound2 Standalone Node Event Selector`

* * *

至于另一个问题，我认为最简单的方法是重写方法`Standalone`并在超类中调用所需的方法。

```
trait Standalone extends Node with Event { override def hashCode = super[Event].hashCode } 
```

假设这不是您所说的“复制”。

# python - 直接运行 python GUI 脚本 (wxpython)

> ID：11172073
> 
> 赞同：1
> 
> 时间：2012-06-23T18:48:20.570
> 
> 标签：python, wxpython

大家好！我开始学习 python GUI 开发。假设我有这个脚本：

```
import wx

app = wx.App()

win = wx.Frame(None, title="Simple Editor", size=(410, 335))
bkg = wx.Panel(win)

loadButton = wx.Button(bkg, label="Open")
saveButton = wx.Button(bkg, label="Save")
fileName = wx.TextCtrl(bkg)
contents = wx.TextCtrl(bkg, style=wx.TE_MULTILINE | wx.HSCROLL)

hbox = wx.BoxSizer()
hbox.Add(fileName, proportion=1, flag=wx.EXPAND)
hbox.Add(loadButton, proportion=0, flag=wx.LEFT, border=5)
hbox.Add(saveButton, proportion=0, flag=wx.LEFT, border=5)

vbox = wx.BoxSizer(wx.VERTICAL)
vbox.Add(hbox, proportion=0, flag=wx.EXPAND | wx.ALL, border=5)
vbox.Add(contents, proportion=1, flag=wx.EXPAND | wx.LEFT |wx.BOTTOM | wx.RIGHT, border=5) 

bkg.SetSizer(vbox)
win.Centre()
win.Show()
app.MainLoop() 
```

这个脚本什么都不做，只显示窗口等。要运行这个脚本，基本上我从终端通过：

```
python gui_test.py 
```

如何在不调用终端的情况下直接运行它，我的意思是只用鼠标点击运行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T18:51:28.817

1.  重命名`gui_test.py`->`gui_test.pyw`
2.  双击

[.pyw](http://filext.com/file-extension/PYW)是在不打开控制台的情况下告诉 python 脚本执行的花哨的 windows 方式

* * *

对于 linux 系统，使脚本可执行：

```
chmod a+x gui_test.py 
```

另外，不要忘记在任何可执行脚本的顶部包含“shebang”行。这允许您运行脚本而无需指定解释器：

```
#!/usr/bin/env python 
```

然后从终端：

```
./gui_test.py 
```

# asp.net-mvc-3 - MVC4 Ajax.ActionLink 将 UpdateTargetId 发送到服务器

> ID：11172074
> 
> 赞同：0
> 
> 时间：2012-06-23T18:48:27.273
> 
> 标签：asp.net-mvc-3, asp.net-mvc-4

我正在使用 Ajax.ActionLink 发出严重的 asp.net mvc ajax 请求。

但是从服务器请求相同的 url 我可能会填充不同的 html 容器（UpdateTargetId）。一切都很好，但我需要知道服务器端我应该返回什么视图。

我看了 fiddler 并没有找到任何关于 UpdateTargetId 值的信息。然后我意识到我可以在 OnBegin javascript 方法中添加一些数据，但我也不知道那里的 UpdateTargetId。

所以现在我正在使用具有不同 http 方法（如 post 和 get）的 hack，但我想找到不那么 hacky 的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T16:01:46.293

如果我正确理解了这个问题，您可能希望在您的视图中执行以下操作：

```
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.min.js")" type="text/javascript"></script>
<div id="testid" class='blah'></div>
@Ajax.ActionLink("Show Test Options", "ShowTestOptions", "Test", new { theVariableIWant = "Test" }, new AjaxOptions { UpdateTargetId = "testid", HttpMethod = "GET" }) 
```

然后在你的控制器中有类似的东西：

```
public class TestController : Controller
{
   [HttpGet]
   public PartialViewResult ShowTestOptions(string theVariableIWant)
   {
        ///Perform whatever operations you need to here.
        return PartialView();
   }
} 
```

更多细节将不胜感激。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T14:37:58.863

它不完整，仍然很hacky，但也许是唯一的方法

在 jquery.unobtrusive-ajax.js 刚刚改变

```
$("a[data-ajax=true]").live("click", function (evt) {
        evt.preventDefault();
        asyncRequest(this, {
            url: this.href,
            type: "GET",
            data: []
        });
    }); 
```

到

```
$("a[data-ajax=true]").live("click", function (evt) {
        evt.preventDefault();
        asyncRequest(this, {
            url: this.href,
            type: "GET",
            data: [{ name: "targerId", value: this.getAttribute("data-ajax-update") }]
        });
    }); 
```

或在 asyncRequest 方法中添加另一个推送：

```
...
options.data.push({ name: "X-Requested-With", value: "XMLHttpRequest" });
options.data.push({ name: "targerId", value: element.getAttribute("data-ajax-update") });
... 
```

我不想更改不显眼的代码并将 Ajax.ActionLink 更改为自定义 ActionLink 使用不同的标志来触发 ajax 请求（例如 a[data-customajax=true]"）来分隔它们。如果有人对这些答案有疑问我很乐意帮助你！

# css - CSS 表单 - 输入宽度不起作用

> ID：11172081
> 
> 赞同：10
> 
> 时间：2012-06-23T18:49:40.137
> 
> 标签：css

以下CSS：

```
#contactform {
    width: 400px;
    height: 215px;
}

.webform {
}

.webform input .name {
    width: 50px;
}

.webform input .email {
    width: 70px;
}

.webform input .comments {
    width: 200px;
} 
```

当在 html 中用作

```
 <div id="contactform">
        <div class="webform">
            <input class="name" name="Name" type="text" id="senderName" placeholder="Enter your name here">
            <input class="email" name="Email" type="text" id="senderEmail" placeholder="Enter a valid email adress here">
            <br>
            <input class="comments" name="Comments" type="text" id="senderComments" placeholder="Comments...">
        </div>
    </div> 
```

生成相同宽度的所有三个输入字段（50px = 即 的宽度`webform input`）。我不确定我做错了什么。帮助？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-23T18:51:01.647

您的课程在您`input`的 s 上，而不是在 s 的子元素上`input`。所以改变`input .name`，等等，`input.name`或者只是`.name`，对所有三个重复。:)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-23T18:51:52.513

删除输入和类名之间的空格

```
.webform input.name {
    width: 50px;
}

.webform input.email {
    width: 70px;
}

.webform input.comments {
    width: 200px;
} 
```

试试这个[小提琴](http://jsfiddle.net/tFQJe/)

# objective-c - 子视图的 CGAffineTransformMakeRotation

> ID：11172082
> 
> 赞同：0
> 
> 时间：2012-06-23T18:49:41.500
> 
> 标签：objective-c, view, rotation, transform, subview

这是场景。我有一个主视图，我想将其方向与真北对齐。

在这个视图中，我有 7 个子视图围绕主视图的中心以七边形图案排列。这些子视图中的每一个都与其他子视图基本相同，因此相对于它们的局部坐标进行绘制是最有意义的。

我想我会使用 CGAffineTransformMakeRotation 将子视图旋转 2*M_PI/7 的整数倍，以便正确排列它们。到目前为止，一切都很好。

我还想我会使用 CGAffineTransformMakeRotation 根据罗盘值旋转主视图。为了测试这一点，到目前为止，我只是对值进行了硬编码。那也很好。

问题是，我得到的行为与我的预期不同。我认为子视图的旋转将相对于主视图，但它似乎是相对于包含主视图的窗口。我有错误的期望吗？我需要为子视图旋转组合两个转换吗？如果我必须这样做，那很好，但它与我的预期不同，所以也许我做错了什么。

这是旋转主视图的代码。我目前将它作为主视图的 m 文件的 drawRect 中的最后一件事。

```
 float angleFromNorth = 2*43.0 / M_PI;
  //      angleFromNorth = 0.;
  CGAffineTransform transform = CGAffineTransformMakeRotation(angleFromNorth);
  [self setTransform:transform]; 
```

这是旋转每个子视图的代码。此代码在子视图的 drawRect 方法中。子视图在主视图的 m 文件中创建。

```
 float angle = 2 * M_PI * self.tag / self.NumPlatforms;
  CGAffineTransform transform = CGAffineTransformMakeRotation(angle);
  [self setTransform:transform];

    (lldb) po [[UIApp keyWindow] recursiveDescription]
(id) $1 = 0x06c78ff0 <UIWindow: 0x6c80370; frame = (0 0; 768 1024); layer = <UIWindowLayer: 0x6c80450>>
   | <CircusView: 0x6c807a0; frame = (0 0; 768 1024); layer = <CALayer: 0x6c80a40>>
   | <PlatformView: 0x8880cd0; frame = (234 362; 300 300); layer = <CALayer: 0x887d310>>
   | <PlatformView: 0x6c805f0; frame = (173.202 301.202; 421.596 421.596); transform = [0.62349, 0.781832, -0.781832, 0.62349, 0, 0]; tag = 1; layer = <CALayer: 0x6c80820>>
   | <PlatformView: 0x6c81870; frame = (204.383 332.383; 359.235 359.235); transform = [-0.222521, 0.974928, -0.974928, -0.222521, 0, 0]; tag = 2; layer = <CALayer: 0x6c80630>>
   | <PlatformView: 0x8884710; frame = (183.772 311.772; 400.456 400.456); transform = [-0.900969, 0.433884, -0.433884, -0.900969, 0, 0]; tag = 3; layer = <CALayer: 0x887cd80>>
   | <PlatformView: 0x6a91a60; frame = (183.772 311.772; 400.456 400.456); transform = [-0.900969, -0.433884, 0.433884, -0.900969, 0, 0]; tag = 4; layer = <CALayer: 0x6a8a200>>
   | <PlatformView: 0x688f970; frame = (204.383 332.383; 359.235 359.235); transform = [-0.222521, -0.974928, 0.974928, -0.222521, 0, 0]; tag = 5; layer = <CALayer: 0x688a710>>
   | <PlatformView: 0x8884750; frame = (173.202 301.202; 421.596 421.596); transform = [0.62349, -0.781832, 0.781832, 0.62349, 0, 0]; tag = 6; layer = <CALayer: 0x887e290>>
(lldb) 
```

PS现在我遇到了另一个障碍。我认为已经解决了上述情况，下一步会很简单，但事实证明这是一个挑战。您可能希望在评论部分关注我的链接，以查看模型在纸/铅笔和/或 Google Sketchup 渲染时的样子。无论如何，下一步就是在平台上放塔。我创建了一个名为 Tower 的新子类 UIView，目的是在每个平台上放置三个塔。棘手的部分是方向需要匹配真北，即circusView 方向，但放置需要与平台对齐。

为此，我在平台实现文件中创建了子视图（self.window）。我认为通过在此文件中执行此操作，坐标将与此视图相关。他们可能在轮换之前就想到了。但他们需要保持相对于旋转平台的位置，但方向与真北对齐。结果将是在每个平台上以这种方式绘制的矩形应该在每个平台上以相同的方式放置在平台上，但是矩形应该相对于平台旋转，即，根本不相对于 circusView（不要问我为什么叫马戏团——从另一个项目转换而来的）。

有什么建议么？我现在在想，我必须像我最终让平台正常工作一样初始化塔，然后通过平台旋转的倒数旋转它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T20:23:27.107

不要在`drawRect:`. 在`layoutSubviews`父母身上做。

```
static CGFloat radiansForDegrees(CGFloat degrees) {
    return degrees * 2 * M_PI / 360;
}

- (void)layoutSubviews {
    self.transform = CGAffineTransformMakeRotation(radiansForDegrees(43));

    CGFloat count = self.platformViews.count;
    for (UIView *platformView in self.platformViews) {
        platformView.transform = CGAffineTransformMakeRotation(platformView.tag * 2 * M_PI / count);
    }
} 
```

`layoutSubviews`您可以通过发送到视图来触发`setNeedsLayout`，但您可能不需要。系统还会`layoutSubviews`在其他时间自动安排调用，例如视图大小发生变化或获得或失去子视图时。

# ios - 批量创建应用内购买或替代方法？

> ID：11172086
> 
> 赞同：5
> 
> 时间：2012-06-23T18:49:55.977
> 
> 标签：ios, in-app-purchase

我一直在寻找一个问题的解决方案，但没有任何真正的运气。有没有办法通过 iTunes Connect 批量创建非消耗性应用内购买？我的应用程序中有大约 20,000 个可以通过应用程序内购买解锁的单独项目。

如果没有批量上传选项，我怀疑没有，有没有办法只放置一个通用的应用内购买来解锁选定的项目？例如，我将呈现一个表格视图，其中包含可根据用户搜索条件解锁的项目，每个项目都有一个唯一的 ID，以及一个可以购买所选项目的按钮。所有的物品都是相同的价格和相同的类型。似乎这应该可行，但我不知道如何通过应用内购买限制来实现它。

有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-05-19T08:07:44.440

实际上有一种方法：上传包含产品元数据的 csv（逗号分隔值）文本文件，然后通过 Application Loader 上传。

[检查这篇文章](https://stackoverflow.com/questions/24451309/ios-how-i-can-load-multiple-in-app-items)

报价：

> 您可以使用应用程序加载器在应用程序购买中大量导入：[https ://itunesconnect.apple.com/docs/UsingApplicationLoader.pdf](https://itunesconnect.apple.com/docs/UsingApplicationLoader.pdf)
> 
> 阅读第 15 页的“从文件创建包”部分：
> 
> 您可以通过从 Application Loader 文件导入详细信息并添加和编辑元数据来创建包含要提交到 iTunes 的应用内购买的包。从文件创建包时，请务必使用 Application Loader 模板。要获取模板的副本，请在 Application Loader 2.9 中选择文件 > 打开应用程序导入模板。Application Loader 创建包含 AppMassImportTemplate.txt 模板的 AppFileImportTemplates 文件夹。要始终拥有模板文件的原始版本，请务必在编辑前制作模板副本。

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T07:52:19.953

我认为，在 iTunes Connect 中制作 20.000 个项目对您来说不是一个正确的选择，您可以尝试将 Apple 的 iAP 与您的服务器结合起来——只需制作几层 IAP(1$,2$,3$)，每层负责价格相同的各种商品，并在您的服务器上跟踪用户购买了哪些特定商品。

因为苹果没有提供默认的解决方案来制作这种商店。

# javascript - 画布图像和点击事件

> ID：11172087
> 
> 赞同：1
> 
> 时间：2012-06-23T18:50:05.223
> 
> 标签：javascript, html, canvas, dom-events

我目前在`<canvas>`HTML5 和 JavaScript 的标签中有两个圆圈。

现在我正在尝试添加一个基于鼠标悬停和单击而更改的图像（完成）。

它基本上是一个播放/暂停按钮的实现，当用户将鼠标悬停在按钮上时会发生额外的颜色变化。

我似乎无法弄清楚事件如何在 HTML5 中的形状上起作用，因为它们不是对象......这是我目前的代码：

```
window.onload = function() {

      var canvas = document.getElementsByTagName('canvas')[0];
      var context = canvas.getContext('2d');
      var centerX = canvas.width / 2;
      var centerY = canvas.height / 2;

      //Outer circle
      context.beginPath();  
      context.arc(centerX, centerY, 150, 0, Math.PI * 2, false);
      context.fillStyle = "#000";
      context.fill();
      context.stroke();

      //Inner cicle
      context.beginPath();
      context.arc(centerX, centerY, 75, 0, Math.PI * 2, false);
      context.fillStyle = "#fff";
      context.fill();
      context.stroke();

      //Play / Pause button
      var imagePlay = new Image();
      var imageHeight = 48/2;
      imagePlay.onload = function() {
        context.drawImage(imagePlay, centerX - imageHeight, centerY - imageHeight);
      };
      imagePlay.src = "images/play.gif";

} 
```

1.  如何处理使用创建的形状上的事件`<canvas>`？

2.  `<canvas>`用另一个替换图像时如何清理/删除图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T18:55:03.290

从技术上讲，无法在画布绘制的形状上注册鼠标事件。但是，如果您使用像 Raphael (http://raphaeljs.com/) 这样的库，它可以跟踪形状位置，从而找出接收鼠标事件的形状。这是一个例子：

```
var circle = r.circle(50, 50, 40);

circle.attr({fill: "red"});

circle.mouseover(function (event) {
    this.attr({fill: "red"});
}); 
```

如您所见，这种方式非常简单。对于修改形状，这个库也会派上用场。如果没有它，您将需要记住每次进行更改时如何重绘所有内容

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T18:56:31.317

那么简单的答案是你不能。您要么必须找到单击事件的坐标并计算是否要执行选项，要么您可以使用区域和地图标签并用它覆盖画布元素。要更改画布，请使用 clearRect 函数在所有内容上绘制一个矩形，然后重新绘制您想要的内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T19:00:13.763

1.  没有“内置”方式来跟踪画布上绘制的形状。它们不被视为对象，而只是区域中的像素。如果要处理画布上绘制的形状上的事件，则需要跟踪每个形状覆盖的区域，然后根据鼠标位置确定触发事件的形状。

2.  如果您想用某些东西替换它，您可以在其他形状上绘制。您可能想看看[globalCompositeOperation](https://developer.mozilla.org/samples/canvas-tutorial/6_1_canvas_composite.html)。

如果您想将绘图视为对象，我建议您使用[SVG](http://www.w3schools.com/svg/svg_inhtml.asp)而不是画布。

另一种选择是使用[按钮](http://www.w3schools.com/tags/tag_button.asp)，然后使用 CSS 设置样式。

基本上，您现在所做的实际上并不是画布的预期目的或用途。这就像用铅笔敲钉子一样——你使用了错误的工具来完成这项工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T17:30:33.600

虽然您确实无法为画布上绘制的对象创建单击事件，但有一种解决方法：将画布包裹在 DIV 标记中，然后在 CANVAS 标记上方的 DIV 标记中添加图像。

```
<div id="wrapper">
    <img src="img1.jpg" id="img1"></img>
    <canvas id="thecanvas"></canvas>
</div> 
```

然后使用 CSS 使图像 position:absolute 并使用 left:*px 和 top:*px 属性将图像放置在您通常绘制它的画布上。

```
#img1{
position:absolute;
left: 10px;
top: 10px;
 } 
```

然后，您可以将单击事件添加到放置在画布上的图像，给人一种您正在单击画布的印象（下面的示例使用 jQuery click() 函数）

```
$( "#img1" ).click(function(){
    alert("Thanks for clicking me");
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-23T18:02:51.183

您可以将光线投射到画布中并手动测试图像是否与光线相交。你应该看着它，就像你按下一样，然后向屏幕发送一束光线。你应该写一个

```
objectsUnderPoint( x, y ); 
```

函数返回与射线在 x、y 处相交的所有图像的数组。

这是唯一真正正确的答案，通常在 3D 引擎中也是如此。

# iphone - 如何将 Youtube 内容从 Wordpress 传送到 iOS 应用程序中？

> ID：11172088
> 
> 赞同：0
> 
> 时间：2012-06-23T18:50:13.387
> 
> 标签：iphone, objective-c, wordpress, api

我有个问题。我的一个客户想要创建一个 iOS 应用程序。他的网站是一个 Wordpress 博客，有很多来自 Youtube、Vimeo 之类的视频内容。

应用需要下载内容并在应用中显示。

为此，我将使用 JSON API 以 JSON 格式获取所有最新的帖子内容。

这有一个潜在的问题，是我的问题的主题；

几乎所有的视频内容都在 Flash 中。是的，这正在慢慢改变；但与此同时，我正在从 Wordpress 博客中提取 HTML/flash 内容，并需要将其显示在应用程序中。

因此，显然在应用程序中显示 Flash 内容是行不通的，因为它要么需要 HTML5/webview，要么因为它需要实际的 Flash 播放器；或者也许我错了？

我唯一担心的是该应用程序最终会成为一堆 HTML5/webviews 并最终被拒绝；但我相信我可以解决这个问题。

无论如何，我的问题是：你如何提供来自 Wordpress 博客的 Youtube/Flash 内容并将其显示在 iOS 应用程序中，或者如果没有一些严重的 API 黑客攻击，这是不可能的？

## 步骤

1.  使用 JSON API 插件从 Wordpress 博客中提取 JSON
2.  阅读 Objective C 中的 JSON
3.  在 web 视图中显示 HTML

问题：当视频内容为 Flash 时，我该如何处理？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T20:54:57.713

您可以解析 youtube 和 vimeo 链接并将其替换为正确嵌入其 ios/html5 版本的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T19:02:31.873

要显示 Web 视频，只需使用 WebView 和对象标签（la）就可以了：

```
<object width="300" height="200" classid="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B" codebase="http://www.apple.com/qtactivex/qtplugin.cab">
  <param name="source" value="kua_bay.png">
  <param name="href" value="kua_bay.mp4">
  <param name="target" value="myself">
  <param name="controller" value="false">
  <param name="autoplay" value="false">
  <param name="scale" value="aspect">
  <embed width="300" height="200" type="video/quicktime" pluginspage="http://www.apple.com/quicktime/download/" src="kua_bay.png" href="kua_bay.mp4" target="myself" controller="false" autoplay="false" scale="aspect" title="QuickTime">
</object> 
```

# c# - Action<> 多参数语法说明

> ID：11172089
> 
> 赞同：10
> 
> 时间：2012-06-23T18:50:16.513
> 
> 标签：c#, action, notifyicon

有时我无法理解最简单的事情，我确定它在我的脸上，我只是看不到它。我试图在这个简单的类中为一个方法创建一个委托：

```
public static class BalloonTip
{
    public static BalloonType BalType
    { 
        get; 
        set; 
    }

    public static void ShowBalloon(string message, BalloonType bType)
    {
        // notify user
    }
} 
```

现在，这个 Action<> 应该创建委托而不用关键字“委托”实际声明一个委托，我理解正确吗？然后：

```
private void NotifyUser(string message, BalloonTip.BalloonType ballType)
    {
        Action<string, BalloonTip.BalloonType> act; 
        act((message, ballType) => BalloonTip.ShowBalloon(message,  ballType));
    } 
```

这无法编译。为什么？

（顺便说一句，我需要这个委托而不是直接调用 ShowBalloon() 的原因是必须从另一个线程而不是 UI 线程进行调用，所以我认为我需要 Action<>）

谢谢，

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-23T18:57:56.807

您需要首先将您的匿名方法分配给`Action`变量，然后使用传递给该方法的参数调用它：

```
private void NotifyUser(string message, BalloonTip.BalloonType ballType)
{
    Action<string, BalloonTip.BalloonType> act = 
        (m, b) => BalloonTip.ShowBalloon(m, b);

    act(message, ballType);
} 
```

在这种情况下，由于您的`Action`变量期望的参数与封装方法的参数相同，您也可以直接引用该方法：

```
private void NotifyUser(string message, BalloonTip.BalloonType ballType)
{
    Action<string, BalloonTip.BalloonType> act = BalloonTip.ShowBalloon;

    act(message, ballType);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T19:00:38.360

你不应该分配给`act`变量吗？类似的东西：

```
Action<string, BalloonTip.BalloonType> act = BalloonTip.ShowBalloon; 
```

您不仅没有为 分配方法`act`，而且您似乎正在尝试调用 act 并将匿名方法作为参数传递给它，同时它接收字符串和 BalloonTip.BalloonType。
最后，您应该 return `act`，因此您获取通知方法委托的方法应该是：

```
public Action<string, BalloonTip.BalloonType> GetNotificationMethod() {
   Action<string, BalloonTip.BalloonType> act = BalloonTip.ShowBalloon;
   return act;
} 
```

您还可以使其更简单：

```
public Action<string, BalloonTip.BalloonType> GetNotificationMethod() {
   return BalloonTip.ShowBalloon;
} 
```

希望我能理解你的问题。祝你好运。

# java - Java LWJGL FPS 越来越差

> ID：11172091
> 
> 赞同：3
> 
> 时间：2012-06-23T18:50:29.457
> 
> 标签：java, performance, render, lwjgl, frame-rate

我正在编写一个自上而下的 2D 游戏。我正在使用 128x128px 的图块集，并提供四个缩放级别，128、64、32 和 16 像素。我在我的图像上使用 slick-utils draw 方法来渲染它们，循环通过二维 FOR 循环，并在混合中添加了一个“渲染范围”，以确保只为可见的内容渲染必要数量的图块在屏幕上。延迟显然来自渲染过程，虽然我在最高缩放级别 128x128 下获得了稳定的 FPS，但它在 16x16px 处稳步下降到 10FPS。我确信这是代码效率问题，但是作为一个新手，我不知道从哪里开始解决它。

感谢所有帮助，谢谢！

代码：

```
for(int x=xPos-1;x<=xPos+renderRange;x++){
    for(int y=yPos-1;y<=yPos+renderRange;y++){

        /**Render Terrain*/
        Image texture = getTerrainTexture(map.tiles[x][y]);
        texture.rotate(map.tiles[x][y].imageRotate);
        texture.draw(x*128,y*128);

        /**Render Objects*/
        if(map.tiles[x][y].object != 0){
            Image object = getObjectTexture(map.tiles[x][y]);
            object.draw(x*128,y*128);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-29T15:14:16.923

您应该使用另一种渲染方法。您现在使用的渲染方法称为立即渲染。说它很慢就足够了。您应该使用另一种渲染方法，例如[显示列表](http://www.lighthouse3d.com/opengl/displaylists/)（仅限静态几何）或[顶点缓冲区对象](http://www.opengl.org/wiki/Vertex_Buffer_Object)（更难学习，但它们不是静态的）。

# android - 菜单项未添加到 ics 中的操作栏

> ID：11172092
> 
> 赞同：1
> 
> 时间：2012-06-23T18:50:38.020
> 
> 标签：android, android-actionbar

我已通过以下方式将菜单项添加到我的代码中：

```
 public boolean onCreateOptionsMenu(Menu menu) {
    //Used to put dark icons on light action bar

    menu.add("Save")
        .setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM);
    return true;
} 
```

问题是我可以通过单击模拟器上的菜单按钮来查看菜单项，但为什么它没有像预期的那样出现在操作栏上。

我的应用程序中有 3 个选项卡，我使用 tabactivity 实现了这些选项卡。我正在使用 actionbrsherlock 。我可以在 android 2.3.3 的操作栏上查看菜单项，但不能在 android 4.0.3 中查看。在 4.0.3 中，它只是在我单击菜单按钮时出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T19:08:37.177

按照这个[链接试试](https://stackoverflow.com/questions/9863403/how-to-use-actionbarsherlock-for-google-maps-menu)

在 pre-Honeycomb 上，ActionBarSherlock 的溢出菜单（即不适合操作栏的项目）将默认放置在普通选项菜单中。

并且可以尝试

```
 menu.add("Save")
        .setIcon(R.drawable.save)
        .setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM | MenuItem.SHOW_AS_ACTION_WITH_TEXT); 
```

# mysql - INT 列值加扰超过 10 个字符

> ID：11172093
> 
> 赞同：2
> 
> 时间：2012-06-23T18:50:47.027
> 
> 标签：mysql, sql, database, drupal, phpmyadmin

我正在创建一个包含 INT(20) 列的表。每当我提交大于 10 个字符的值时，该值就会被打乱。任何 10 个或更少的字符作为值被正确存储，我不知道为什么。我已将长度设置为 20，但它似乎忽略了这一点。

[字符长度 +10]
例如：( 1234567890123 ---**变成**---> 2147483647 )

[字符长度 <= 10]
例如：（1234567890 ---*仍然存在*---> 1234567890）

我想我可能需要以某种方式改变表格的结构，但到目前为止没有任何效果。我将不胜感激任何有用的智慧之言，以使我的数值大于 10 正确存储在我的表中。

谢谢。

注意：我正在使用 MySQL、PhpMyAdmin、Drupal

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T18:52:07.847

溢出来了

an 的最大值`INT`是 2147483647。您应该使用 a`BIGINT`而不是`INT`。

```
 size    min                         max
INT              4       -2147483648                 2147483647
UNSIGNED INT     4       0                           4294967295
BIGINT           8       -9223372036854775808        9223372036854775807
UNSIGNED BIGINT  8       0                           18446744073709551615 
```

请参阅文档：

*   [整数类型（精确值） - INTEGER、INT、SMALLINT、TINYINT、MEDIUMINT、BIGINT](http://dev.mysql.com/doc/refman/5.6/en/integer-types.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T18:54:29.283

`INT(20)`只是意味着可以显示20个数字。如果数字更大，这将作为截止值，或者在`ZEROFILL`指定时作为焊盘尺寸。

由于可以存储的最大整数是 2 ^(32) -1（假设`UNSIGNED`），并且您超出了该值，因此您会得到“打乱”的数字。

要解决这个问题，请使用`BIGINT`，它可以让您达到 2 ^(64) -1，或者`FLOAT`以某些精度为代价获得巨大数字的潜力。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T19:21:55.993

实际上，您应该使用 DECIMAL 而不是 INT 或 BIGINT。这是 SQL 中的数据类型，旨在保存具有指定精度的数字，这就是您似乎拥有的。

# eclipse - 如何在 Eclipse 中集成 Karaf

> ID：11172094
> 
> 赞同：3
> 
> 时间：2012-06-23T18:50:52.733
> 
> 标签：eclipse, installation, apache-karaf

好的，我正在尝试让 EIK 在 Eclipse 中工作。我在 YouTube 上播放了这个视频（它假设我还没有完成一个步骤），用谷歌搜索了一段时间，然后试图破解它。没有骰子。以下是相关信息：

*   我已经下载并安装了 Karaf。控制台工作正常。

*   我已经下载了EIK。

*   我有 Eclipse 靛蓝

    我将不胜感激这两个问题的帮助：

*   在此视频[EIK 教程](http://www.youtube.com/watch?v=Z1zVLDwd02Q)中，他们向用户展示了从 OSGi 框架菜单中选择 Apache Karaf OSGi 框架。我不知道如何让 Karafe 进去，这是第一个拦截器。

*   我已经下载了 EIK，快速浏览一下似乎表明我应该复制到主 Eclipse 安装文件夹中。我复制了我的eclipse文件夹并试了一下。Karaf Perspective 不存在，我找不到任何迹象表明它已正确安装。这是我的第二个障碍，在 Eclipse 中获取 EIK。在这发生之前，我可能需要完成第一步。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T07:18:04.317

EIK 项目作为一个单独的子项目转移到 Apache Karaf 空间。Karaf 团队也在为此努力，以便更好地与 Karaf 集成。尽管现在您可能必须检查代码并在您的机器上构建它。为了获得更好的支持，我建议使用 Karaf 项目的用户邮件列表。

# c# - Visual c# Express 安装程序？

> ID：11172095
> 
> 赞同：1
> 
> 时间：2012-06-23T18:50:53.840
> 
> 标签：c#, .net, installation, visual-c#-express-2010

我正在使用 Visual c# express 2010。我需要一个安装程序，它允许人们选择安装应用程序的位置，以及安装 .Net 框架。我还需要自定义 nstaller 的外观。有没有我可以使用易于使用的安装程序？我今年 16 岁，所以我不擅长安装程序和其他东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T18:52:06.903

维克斯是你的朋友。[您可以在http://wix.sourceforge.net/](http://wix.sourceforge.net/)找到它和教程

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T19:17:45.607

看到你有多年轻，我猜这应该是免费的或尽可能接近免费。不过，使用免费软件制作安装程序有多种选择。

Wix (http://wix.sourceforge.net/) 是一个基于 xml 的解决方案，它可以让您非常快速地安装一个简单的安装程序，并且得到 Microsoft 的支持（或者甚至可以运行？）。我已经尝试过几次，但从未真正尝试过通过切换徽标来定制它。

我个人更喜欢 NSIS (http://nsis.sourceforge.net/)，因为它为您提供了完整的脚本语言（尽管从一开始它可能看起来并不多），但它允许您以极好的方式自定义安装程序。下面是一个基本安装程序需要多少的快速示例（从[Wikipedia](http://en.wikipedia.org/wiki/Nullsoft_Scriptable_Install_System#Modern_user_interface)借来）

```
!include MUI.nsh
Name "My installer"
OutFile "setup.exe"
!insertmacro MUI_PAGE_WELCOME
!insertmacro MUI_PAGE_LICENSE "license.rtf"
!insertmacro MUI_PAGE_DIRECTORY
!insertmacro MUI_PAGE_COMPONENTS
!insertmacro MUI_PAGE_INSTFILES
!insertmacro MUI_PAGE_FINISH
!insertmacro MUI_LANGUAGE "English"
!insertmacro MUI_LANGUAGE "German"
!insertmacro MUI_LANGUAGE "French"
Section "Extract makensis"
  SetOutPath $INSTDIR
  File ..\makensis.exe
SectionEnd 
```

另一个我听到很多好消息的选择是 InnoSetup (http://www.jrsoftware.org/isinfo.php)，尽管我自己没有测试过它，也不能真正保证它的任何东西。

# java - AsyncTask 永远不会结束

> ID：11172099
> 
> 赞同：0
> 
> 时间：2012-06-23T18:51:18.193
> 
> 标签：java, android, android-asynctask

我试图在 AsyncTask 上获取 xml 文件并在 ListActivity 上显示结果。

问题是，通过调试，当我到达“doc = db.parse(xml);”行时 系统挂起，永远不会回来。

在 Activity Thread 上做了一个“暂停”，并显示了以下堆栈跟踪

堆栈跟踪

```
OSNetworkSystem.read(FileDescriptor, byte[], int, int) line: not available [native method]  
BlockGuard$WrappedNetworkSystem.read(FileDescriptor, byte[], int, int) line: 273    
PlainSocketImpl.read(byte[], int, int) line: 458    
SocketInputStream.read(byte[], int, int) line: 85   
SocketInputBuffer(AbstractSessionInputBuffer).fillBuffer() line: 103    
SocketInputBuffer(AbstractSessionInputBuffer).read() line: 120  
ChunkedInputStream.getChunkSize() line: 211 
ChunkedInputStream.nextChunk() line: 183    
ChunkedInputStream.read(byte[], int, int) line: 155 
EofSensorInputStream.read(byte[], int, int) line: 159   
InputStreamReader.read(char[], int, int) line: 255  
KXmlParser.peek(int) line: 925  
KXmlParser.pushText(int, boolean, boolean) line: 875    
KXmlParser.nextImpl() line: 354 
KXmlParser.nextToken() line: 1399   
DocumentBuilderImpl.parse(XmlPullParser, DocumentImpl, Node, int) line: 359 
```

我的 android 模拟器正在使用代理运行，并且工作正常（在浏览器上测试）。尝试了一个很小的xml，但也不起作用...

以上，我的文件。

我的基本.java

```
public class Basic {

    public InputStream getmyPStXML(String url)
    {
        InputStream xml = null;

        String dstUrl = "http://mypst.com.br" + url;

        try
        {
            // defaultHttpClient
            HttpParams params = new BasicHttpParams();
            params.setParameter(CoreProtocolPNames.PROTOCOL_VERSION, HttpVersion.HTTP_1_1);

            DefaultHttpClient httpClient = new DefaultHttpClient();         
            HttpGet request = new HttpGet(dstUrl);
            request.setHeader("User-Agent", "set your desired User-Agent");

            HttpResponse httpResponse = httpClient.execute(request);

            xml = httpResponse.getEntity().getContent();

        }
        catch (UnsupportedEncodingException e)
        {
            e.printStackTrace();
        }
        catch (ClientProtocolException e)
        {
            e.printStackTrace();
        }
        catch (IOException e) {
            e.printStackTrace();
        }
        // return XML
        return xml;     
    }  

    public Document getDomElement(InputStream xml)
    {
        Document doc = null;
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        try
        {
            DocumentBuilder db = dbf.newDocumentBuilder();
            doc = db.parse(xml); 

        }
        catch (ParserConfigurationException e)
        {
            Log.e("Error: ", e.getMessage());
            return null;
        }
        catch (SAXException e)
        {
            Log.e("Error: ", e.getMessage());
            return null;
        }
        catch (IOException e)
        {
            Log.e("Error: ", e.getMessage());
            return null;
        }
        return doc;
    }
} 
```

我的 GetUserGames.java

```
public class GetUserGames extends ListActivity {

    static final String KEY_JOGOS   = "jogos";
    static final String KEY_JOGO    = "jogo";
    static final String KEY_PIC     = "pic";
    static final String KEY_PIC_BIG = "pic_big";
    static final String KEY_NAME    = "name";

    private ProgressDialog m_ProgressDialog = null; 

    public class getUserGamesASYNC extends AsyncTask<String, Void, Document>
    {

        public Document getUserGames(String username)
        {
            Basic b = new Basic();
            InputStream xml = b.getmyPStXML("/rank/" + username + "/xml/");
            return b.getDomElement(xml);
        }

        protected Document doInBackground(String... username) {
            return getUserGames(username[0]);   
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T07:37:16.450

您可以尝试将以下内容放入`getmyPStXML()`：

```
Log.i(TAG, EntityUtils.toString( httpResponse.getEntity(), "UTF-8" ) ); 
```

代替

```
xml = httpResponse.getEntity().getContent(); 
```

并查看您的服务器返回的内容，因为根据您的堆栈跟踪，没有足够的数据可以从服务器读取。

它还有助于设置连接/数据接收超时，因为否则您的应用程序将等待服务器的回复很长时间，并且可能看起来像停止或挂起。

# c# - 在 C#（全屏游戏）中获取中间屏幕像素（颜色）？

> ID：11172106
> 
> 赞同：2
> 
> 时间：2012-06-23T18:52:18.097
> 
> 标签：c#, colors, fullscreen, pixel, intptr

我正在运行全屏游戏，并试图找出中间像素的颜色。然而，我正在使用的代码似乎只适用于窗口应用程序/游戏/等。这是我的代码：

```
public static Color GetPixelColor(int x, int y) 
{
    IntPtr hdc = GetDC(IntPtr.Zero);
    uint pixel = GetPixel(hdc, x, y);
    ReleaseDC(IntPtr.Zero, hdc);
    Color color = Color.FromArgb((int)(pixel & 0x000000FF),
            (int)(pixel & 0x0000FF00) >> 8,
            (int)(pixel & 0x00FF0000) >> 16);

    return color;
} 
```

我得到这样的中间屏幕像素：

```
int ScreenWidth = System.Windows.Forms.Screen.PrimaryScreen.Bounds.Width;
int ScreenHeight = System.Windows.Forms.Screen.PrimaryScreen.Bounds.Height; 
```

那么如何让这段代码兼容全屏游戏呢？它给了我一个 ARGB 值`A = 255, R = 0, G = 0, B = 0`，即使我 100% 肯定中间屏幕像素是红色的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T19:56:47.017

这是关于什么的：

```
//using System.Windows.Forms;
public static Color GetPixelColor(int x, int y) 
{
    Bitmap snapshot = new Bitmap(Screen.PrimaryScreen.Bounds.Width, Screen.PrimaryScreen.Bounds.Height, PixelFormat.Format32bppArgb);

    using(Graphics gph = Graphics.FromImage(snapshot))  
    {
        gph.CopyFromScreen(Screen.PrimaryScreen.Bounds.X, Screen.PrimaryScreen.Bounds.Y, 0, 0, Screen.PrimaryScreen.Bounds.Size, CopyPixelOperation.SourceCopy);
    }

    return snapshot.GetPixel(x, y);
} 
```

然后：

```
Color middleScreenPixelColor = GetPixelColor(Screen.PrimaryScreen.Bounds.Width/2, Screen.PrimaryScreen.Bounds.Height/2); 
```

# android - Android：applicationInfo.loadDescription() 总是返回 null

> ID：11172107
> 
> 赞同：0
> 
> 时间：2012-06-23T18:52:22.303
> 
> 标签：android, package, android-applicationinfo

我可以使用下面的代码成功获取应用程序的标题、版本和图标，但由于某种原因，描述始终返回为 null。任何帮助表示赞赏。

相关代码：-

```
List<PackageInfo> packs = packageManager.getInstalledPackages(0);

  for(int i=0; i < packs.size(); i++) {
     PackageInfo p = packs.get(i);
     // skip system apps if they shall not be included
     if ((!includeSysApps) && ((a.flags & ApplicationInfo.FLAG_SYSTEM) == 1)) {
        continue;
     }
     App app = new App();
     app.setTitle(p.applicationInfo.loadLabel(packageManager).toString());
     app.setPackageName(p.packageName);
     app.setVersionName(p.versionName);
     app.setVersionCode(p.versionCode);
     CharSequence description = p.applicationInfo.loadDescription(packageManager); //error here?
     app.setDescription(description != null ? description.toString() : "");
     apps.add(app);
  } 
```

App 类只是一个 bean 类，它只是设置给它的值，仅此而已。错误不可能在那里，因为我确实得到了一个“”作为描述。即描述由于某种原因出现为空。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T19:29:05.863

您的代码似乎没有问题。在这种情况下，您假设任何应用程序都有描述似乎是“错误”。从应用程序的`PackageManager`清单中读取任何内容。任何应用程序的开发者都可以自由地对其进行描述。似乎他们中的大多数人（包括我）没有理由这样做，因为我不知道在任何地方使用了这个描述（除了可以通过 PackageManager 查询它的事实之外）。

要做到这一点，您可以在手机或模拟器上安装 HelloWorld 应用程序，并在其清单中提供描述。你应该用你的代码得到它。

# mysql - 建议用户可能想要关注的社区

> ID：11172110
> 
> 赞同：1
> 
> 时间：2012-06-23T18:52:44.620
> 
> 标签：mysql, select, join

我想建议用户可能想要关注的社区，例如 Facebook 上的“您可能认识的人”或 Twitter 上的“要关注的人”。

例如：

社区：1,2,3,4,5,6,7,8,9,10,11,12,13,14

用户 A 如下：1,2,3,10,11,12,13,14

用户 B 跟随：1,2,4,10,11,12,13,14

用户 H 关注：1,4,8

用户 C 关注：5,6,7

用户 D 关注：5,6,7

用户 E 关注：5,6,7

用户 F 关注：5,6,7

用户 G 关注：5,6,7

用户 I 关注：5,6,7

用户 J 关注：5,6,7

让我们向用户 A 推荐他可能想要关注的社区：

4,8,5,6,7,9

用户 A 可能比其他人更可能想要关注社区 4，因为用户 B 关注它并且他们有非常相似的兴趣。

问题是我的查询不会返回至少没有一个用户作为用户 A 关注另一个社区的社区。在这种情况下，只会返回：

4,8

我的查询 - SQL Fiddle： [http ://bit.ly/MF9Lve](http://bit.ly/MF9Lve)

我该如何解决？

# android - 会话 cookie 似乎未使用 android/phonegap 设置

> ID：11172111
> 
> 赞同：4
> 
> 时间：2012-06-23T18:52:45.407
> 
> 标签：android, cordova

我正在尝试让我的 Android 4.0 应用程序接受来自 Node.Js express 服务器的 cookie，使用 mongoose-auth 进行身份验证。当我向我的登录 api 发帖时，我可以看到使用 Poster 发送的 set-cookie 标头，但我认为它没有被存储。我尝试使用 jquery cookie 插件，但在尝试读取它时收到 null。但是当我在 api 中检查请求时，我能够访问会话数据。有没有人有任何示例代码说明他们如何使用 phonegap 在 android 中存储 cookie 并检查 cookie 是否存储在应用程序中？

下面是我的端点，我可以从另一个端点会话数据。

```
app.post('/api/login', function(request, response){
User.authenticate(request.body.email, request.body.password, function(err, userdoc)     {
    if (userdoc){
        //console.log(request.session);

        request.session.test = "hope this works";
        User.findOne({email : request.body['email']}, ['name'], function (err, user){
            if(!err){
                console.log("name %s", user);
                request.session.user = user;
                response.json({success:true});
            } else{
                console.log(err);
            }

        });
    }
    else {
        response.json({success:false});
    }
});
}); 
```

但是当我尝试使用 jquery 插件读取 cookie 时，我得到了 null。

```
alert($.cookie('connect.sid')); 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T12:02:17.093

我相信您的*document.cookie*为*空*的原因是它具有远程域名，而您来自 PhoneGap/Cordova 应用程序的 javascript 位于*file:///android_asset/www/*

您的 ajax 请求符合跨域请求。

这是默认的 cookie 行为。

您可能可以通过 XHR 对象和响应的标头从 ajax 请求访问 cookie，或者您可以在服务器上编写代理页面，将 cookie 呈现到页面正文中，然后可以通过 PhoneGap/Cordova javascript 读取。

还要检查[这个](https://stackoverflow.com/questions/11083160/how-to-enable-cookies-for-android-phonegap-1-8-0-app "启用 PhoneGap 应用程序以接受本地 cookie")

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-08T08:47:27.673

服务器端 Cookie（如安全令牌）具有 HttpOnly 标志。出于安全原因，JavaScript (document.cookie) 无法访问带有此标志的 Cookie。

# php - 如何在 PHP 中使用 Stack Overflow API

> ID：11172112
> 
> 赞同：1
> 
> 时间：2012-06-23T18:52:48.503
> 
> 标签：php, json

我有以下网址：

> [https://api.stackexchange.com/2.0/questions?page=1&pagesize=30&order=desc&sort=activity&site=stackoverflow](https://api.stackexchange.com/2.0/questions?page=1&pagesize=30&order=desc&sort=activity&site=stackoverflow)

当我在浏览器的地址栏中键入此 URL 时，它会给我一个 JSON 响应，这是我在 PHP 中需要的。我尝试使用 cURL 来获取它（请参见下面的代码），但它不起作用——页面上没有打印任何响应。

```
function get_json($url) {
    $ch = curl_init();

    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_URL, $url);

    $data = curl_exec($ch);
    $resultCode = curl_getinfo($ch, CURLINFO_HTTP_CODE);
    curl_close($ch);

    if ($resultCode == 200) {
        return json_decode($data);
    } else {
        return false;
    }
}

$json = get_json('https://api.stackexchange.com/2.0/questions?page=1&pagesize=30&
  key=VVq3kJHSjQ*7qgpiRaVoLA%28%28&site=stackoverflow');
echo '<pre>';
print_r($json); 
```

如何获取此 URL 并以正确的方式将其转换为 PHP 数组？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T18:59:58.937

最后我检查了一下，来自 API 的**所有**响应都是 gzip 压缩的：

```
$ch = curl_init();
curl_setopt_array($ch, array(
    CURLOPT_URL => $url
  , CURLOPT_HEADER => 0
  , CURLOPT_RETURNTRANSFER => 1
  , CURLOPT_ENCODING => 'gzip'
));
$data = curl_exec($ch);
var_dump($data);
var_dump(json_decode($data)); 
```

设置`CURLOPT_ENCODING`会启用响应的自动解压缩，除了`Accept-Encoding: gzip`在 http 请求中发送一个，尽管发送该标头并不是严格要求的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T18:57:25.243

要返回一个数组，请使用 in 的第二个参数[`json_decode`](http://php.net/manual/en/function.json-decode.php)并将其设置为`true`.

```
if ($resultCode == 200) {
    return json_decode($data, true);
} else {
    return false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T18:56:44.447

尝试这个：

```
$json = json_decode(file_get_contents("https://api.stackexchange.com/.............."));
echo "<pre>";
print_r($json); 
```

# html - 表格列标题中的杂散边框

> ID：11172113
> 
> 赞同：2
> 
> 时间：2012-06-23T18:52:56.390
> 
> 标签：html, css

我的标题中有以下 CSS：

```
 <style type="text/css">
    table, td
    {
        border-color: #600;
        border-style: solid;
    }

    table
    {
        border-width: 0 0 1px 1px;
        border-spacing: 0;
        border-collapse: collapse;
    }

    td
    {
        margin: 0;
        padding: 4px;
        border-width: 1px 1px 0 0;
        background-color: #FFC;
    }
</style> 
```

以及我的页面正文中的下表：

```
<table>
    <tr>
        <th style="width: 100px;">column</th><th style="width: 180px;">column</th><th style="width: 100px;">column</th><th style="width: 100px;">column</th>
        <th style="width: 180px;">column</th><th style="width: 180px;">column</th> <th>column</th>
    </tr>
    <tr>
        <td>text</td><td>text</td><td>text</td><td>text</td><td>text</td><td>text</td><td><a href="">text</a></td>
    </tr>
</table> 
```

结果如下：

![在此处输入图像描述](../Images/7724cf1fff1a822bae89dd4a6b946826.png)

看看第一列标题上的左边框如何？什么会导致这种情况，我怎样才能让它消失？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T19:06:07.107

将此添加到您的CSS：

```
tr{border-left:1px solid #000;}
tr:first-child{border-left:none;} 
```

否则你将不会得到左边的边框

检查这个小提琴：http: [//jsfiddle.net/surendraVsingh/KNNeZ/](http://jsfiddle.net/surendraVsingh/KNNeZ/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T18:58:02.467

请更新你的`table`风格

```
 table
    {
        border-width: 0 0 1px 0px;
        border-spacing: 0;
        border-collapse: collapse;
    } 
```

还要为 TD 标签添加左边框，以便在 td 上而不是在 th 上存在左顺序。

```
td
    {
        margin: 0;
        padding: 4px;
        border-width: 1px 1px 0 1px;
        background-color: #FFC;
    }​ 
```

试试这个[小提琴](http://jsfiddle.net/tFQJe/6/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T19:04:50.517

**演示**：为清楚起见， 我添加了[边界更正](http://jsfiddle.net/tFQJe/4/)，您可以稍后将其删除`margin:20px;``table`

# vb.net - VB.NET 表单透明背景

> ID：11172115
> 
> 赞同：0
> 
> 时间：2012-06-23T18:53:16.133
> 
> 标签：vb.net, winforms, picturebox

我得到了图片框，
当我将表单添加到图片框时，背景颜色为**argb(152, 0, 136)**
并且我尝试使用`TransparencyKey`并且背景颜色仍然为 152, 0, 136
代码：

```
Dim frm As New Form
frm.BackgroundImage = Image.FromFile(open.FileName)
frm.BackColor = Color.FromArgb(152, 0, 136)
frm.TransparencyKey = Color.FromArgb(152, 0, 136)
frm.TopLevel = False

PictureBox1.Controls.Add(frm)
frm.show() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T13:44:26.620

下面的代码是经过测试和功能的。我制作了一个新的 WindowsApplication，它添加了基本表单和`.vb`代码隐藏。我在表单中添加了一个按钮。这是整个代码隐藏：

```
Public Class Form1
    Public Sub AddTransparentImage()
        Dim pb As PictureBox = New PictureBox
        Dim bmp As Bitmap = Image.FromFile("C:\Users\Pete\Documents\test.bmp")

        bmp.MakeTransparent(Color.Black)
        pb.Image = bmp
        pb.Width = bmp.Width
        pb.Height = bmp.Height

        Me.Controls.Add(pb)
    End Sub

    Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
        AddTransparentImage()
    End Sub
End Class 
```

这`.bmp`是在黑色背景上带有彩色文本的图像。在表单中加载时，图像的背景将变为透明。

# django - 创建一个按外键排序的嵌套列表

> ID：11172116
> 
> 赞同：2
> 
> 时间：2012-06-23T18:53:20.937
> 
> 标签：django, django-views

我正在尝试创建由计划提供者订购的医生接受的保险计划列表。如何构造一个查询，使我能够生成如下结果列表：

```
Provider 1
  Plan A
  Plan B
  Plan C
Provider 2
  Plan D
Provider 3
  Plan E
  Plan F 
```

给定以下（简化的）模型：

```
class Provider(models.Model):
    name = models.CharField(_('Name'), max_length=50)

class Plan(models.Model):
    name = models.CharField(_('Name'), max_length=50)
    provider = models.ForeignKey(Provider)

class DoctorProfile(UserProfile):
    accepted_insurance_plans = models.ManyToManyField(Plan, blank=True) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T04:05:58.657

假设您正在寻求为给定的 DoctorProfile 生成此列表，dp：

```
import itertools
import operator

plans = Plan.objects.filter(doctorprofile=dp).\
           order_by("provider").select_related("provider")
provider_plans = itertools.groupby(plans, operator.attrgetter("provider")) 
```

然后，您可以遍历按提供者分组的计划，如下所示：

```
for provider, plan_group in provider_plans:
    print provider.name
    for plan in plan_group
        print "  %s"%plan.name 
```

免责声明：我没有测试过这段代码

# svn - 如何更改要提交的 SVN URL？

> ID：11172119
> 
> 赞同：11
> 
> 时间：2012-06-23T18:53:59.360
> 
> 标签：svn, intellij-idea

我以某种方式设法更改了 SVN 存储库的远程 URL。因此，Idea/svn 现在尝试将我的项目提交到存储库的根目录，而不是我实际具有写入权限的子文件夹。我怎样才能把它改回来？（该 URL 最初是正确的，并且之前设法正确提交）

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-23T20:37:34.833

存储库 URL 存储在工作副本元数据中，IDEA 不会自动更改它。`VCS`您可以使用|从 IntelliJ IDEA 手动更改它。`Subversion`| **重新定位**菜单。

[也可以使用svn relocate](http://svnbook.red-bean.com/en/1.7/svn.ref.svn.c.relocate.html)或 Tortoise SVN`Relocate...`菜单从命令行完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-11-02T15:14:55.470

如果您的项目未存储在存储库的根目录中（例如：）`my-svn-repo/my-project/trunk`，例如，您重命名为`my-project`，`my-awesome-project`则重定位功能将不起作用，因为它与存储库相关，而不是与它的子文件夹相关。在这种情况下，您必须使用以下命令进行“切换”：

*   IntelliJ Idea：VCS > 更新项目 > 选择新重命名的文件夹或；
*   Tortoise SVN：切换>选择新文件夹

# java - Java 将参数化的 .xml 屏幕文件转换为可摄取的 .xml 格式

> ID：11172122
> 
> 赞同：0
> 
> 时间：2012-06-23T18:54:27.803
> 
> 标签：java, xml, dom

将参数化的 .xml 屏幕文件转换为可摄取的 .xml 格式的标题

我又回到了 java 和 xml 的主导地位；环境是JDK 1.6，需要做如下：

以如下格式读取 .xml 屏幕转储：

```
<?xml version="1.0" encoding="UTF-8"?>
<d: param = “root _tags” type = “string” value ="test Value">
    <d: param = “child1 tag” type = “string” value = “data 2” > 
    </d: param > 
    <d: param = “child2 tag” type = “string” value = “data 2” > 
    </d: param >
</d: param> 
```

将参数转换为 interCap 格式的实际选项卡：

```
<?xml version="1.0" encoding="UTF-8"?>
<rootTag type “string” value ="test Value">
    <child1Tag type = “string” value = “data 2” > </child1Tag > 
    <child2Tag type = “string” value = “data 2” > </child1Tag>
</rootTag > 
```

将新标签和类型写入数据字典的文件中：

```
rootTag string
child1Tag string
child2Tag string 
```

删除类型并写出一个新的 .xml，这样我就可以以这种格式将它们带入我的数据库：

```
<?xml version="1.0" encoding="UTF-8"?>
<rootTag>test Value
    <child1Tag data="1" > </child1Tag> 
    <child2Tag data="2" > </child2Tag>
</rootTag > 
```

我对 Java 很生疏，对 xml 解析（2004）也很生疏，而且我在枪下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T16:40:51.347

你需要在这里做几件事：

1.  如果 xml 具有统一的格式（它们都具有相同的结构），您可以获得 XSD 或编写一个（[XSD 教程](http://www.w3schools.com/schema/schema_intro.asp)），然后您可以使用[XmlBeans 之](http://xmlbeans.apache.org/)类的框架从模式生成 java 对象并使用它们。那将是最简单的方法。

2.  另一种选择是使用 java [DOM API](http://docs.oracle.com/javase/tutorial/jaxp/intro/dom.html)。API 有点难看，但是一旦你习惯了它就不会那么难了。问题是您需要手动处理每个 xml 结构。

3.  另一种选择是使用[XSLT](http://www.w3schools.com/xsl/default.asp)，我从未尝试过使用 java，但您可以轻松找到资源。

4.  至于写入常规文件，看[这里](http://www.roseindia.net/java/beginners/java-write-to-file.shtml)，这很容易。

# javascript - Google Chrome 扩展中的触发 Keydown 事件

> ID：11172128
> 
> 赞同：4
> 
> 时间：2012-06-23T18:55:07.260
> 
> 标签：javascript, google-chrome-extension, dom-events, keydown

我正在做一个与 Gmail 聊天交互的谷歌浏览器扩展，可以向所有打开的聊天发送相同的消息，功能部分已完成，但我无法将`keydown`事件发送到 textareas。

我正在做的是`page_action`在用户访问 Gmail 时使用 a 来显示扩展图标。当用户点击扩展图标时，会弹出一个带有 textarea 的弹出窗口，当用户打开聊天并在 textarea 中写入内容然后`Enter`按键时，每个打开的聊天的 textarea 将填充相同的消息和应该触发`keydown`事件。

这是基本代码：

**popup.js**

```
chrome.tabs.executeScript(null, {file: 'send.js'}, function () {
  // 'message' is the textarea inside the popup.html
  var message = document.getElementById('message');

  message.onkeydown = function (e) {
    if (13 == e.keyCode) {
      chrome.tabs.executeScript(null, {code: 'send("' + message.value + '");'}, function () {
        message.value = '';
      });
      return false;
    }
  };
}); 
```

**发送.js**

```
function send(message) {
  if (message) {
    for (var i = 0, textareas = document.getElementsByTagName("TEXTAREA"), length = textareas.length; i < length; ++i) {
      textarea = textareas[i];
      textarea.value = message;

      var evt = document.createEvent('KeyboardEvent');

      evt.initKeyboardEvent('keydown', true, true, null, false, false, false, false, 13, 13);

      Object.defineProperty(evt, 'keyCode', {
        get : function() {
            return 13;
        }
      });

      Object.defineProperty(evt, 'which', {
        get : function() {
            return 13;
        }
      });

      Object.defineProperty(evt, 'keyIdentifier', {
        get : function() {
            return 'Enter';
        }
      });

      Object.defineProperty(evt, 'shiftKey', {
        get : function() {
            return false;
        }
      });

      textarea.dispatchEvent(evt);
    }
  }
} 
```

代码在填充 textareas 时没有问题，因此重新调整了所有 textareas，但`keydown`在脚本填充 textareas 后事件没有触发。奇怪的是，当我在 Google Chrome 控制台中尝试*send.js*`keydown`代码时，事件正常触发并且消息已发送，但我无法对扩展程序做同样的事情。

那么，如何将`keydown`事件触发到扩展中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T20:13:48.933

Gmail 由框架组成。
默认情况下，[`chrome.tabs.executeScript`](http://code.google.com/chrome/extensions/tabs.html#method-executeScript)仅在主（顶部窗口）框架中注入代码。要在子帧中也注入代码，请添加`allFrames: true`到您的详细信息。

另外，不要**用来**触发`'send("' + USER_INPUT_HERE + '");'`你的功能。这使您的应用程序**容易受到脚本注入的攻击。**用于[`JSON.stringify(USER_INPUT_HERE)`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/JSON/stringify)正确转义字符串。

```
chrome.tabs.executeScript(null, {
    file: 'send.js',
    allFrames: true
}, function () {
    chrome.tabs.executeScript(null, {
        code: 'send(' + JSON.stringify(message.value) + ');',
        allFrames: true
    });
    message.value = '';
}); 
```

[漏洞示例：
用户输入：`" + (function(){while(1)chrome.tabs.create({url:"http://evil.com"})}()) + "`]

* * *

扩展创建的对象永远不会传递给页面。添加到事件的属性和属性描述符在传递到页面时会丢失。我建议不要使用内容脚本，而是使用[注入脚本](https://stackoverflow.com/a/9517879/938089?building-a-chrome-extension-inject-code-in-a-page-using-a-content-script) ^([注入脚本、内容脚本和扩展代码有什么区别？](https://stackoverflow.com/a/9916089/938089?chrome-extension-auto-run-a-function))获得预期的效果：

```
// Script to be injected
var code = '(' + function(message) {
    /* .. "function send"'s body from send.js .. */
} + ')(' + JSON.stringify(message.value) + ');';
// Content script which *injects* the script
chrome.tabs.executeScript(null, {
    code: 'var s = document.createElement("script");' +
          's.textContent = ' + JSON.stringify(code) + ';' + 
          '(document.head||document.documentElement).appendChild(s);' + 
          's.parentNode.removeChild(s);' /*<--Clean-up*/
}); 
```

为澄清起见，前面的代码片段导致将以下代码[**注入**](https://stackoverflow.com/a/9517879/938089?building-a-chrome-extension-inject-code-in-a-page-using-a-content-script)页面：

```
(function(message) { /* logic of send */ })("user input"); 
```

Event 对象在 Gmail 页面中构建和传递，因此所有属性都被保留，就像您使用控制台执行脚本一样。**它不再在您的扩展的上下文中运行**。

# android - 我可以在 30 天试用期后启动新的 Android 订阅功能吗？

> ID：11172141
> 
> 赞同：0
> 
> 时间：2012-06-23T18:57:09.553
> 
> 标签：android

我正在考虑在 Android 中使用新的订阅功能。我的问题是：我可以在试用 30 次后开始订阅吗？

这是我希望它的工作方式：

1.  用户下载应用程序
2.  该应用程序表示订阅将在 30 天内开始，除非您取消订阅
3.  从他们下载应用程序起 30 天后，它会自动开始使用新的 Android 订阅服务向他们收费。

任何人？？？？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T12:57:39.407

没有什么能阻止您随时开始订阅过程。

我正在开发一个具有类似功能的应用程序，但不是 30 天的试用期，我必须在某个操作重复一定次数后要求订阅。

“问题”是您必须自己处理时间流逝，无论是在本地还是在应用程序的服务器端，当时机成熟时，会弹出一个问题：您想继续使用这个应用程序吗？然后让我看看现金；并根据答案，向用户交付或不交付内容

[http://developer.android.com/guide/google/play/billing/billing_subscriptions.html](http://developer.android.com/guide/google/play/billing/billing_subscriptions.html)上的实现基础知识

# c++ - 为什么在 C++ 中使用“vector.at(x)”比使用“vector[x]”更好？

> ID：11172144
> 
> 赞同：29
> 
> 时间：2012-06-23T18:57:27.220
> 
> 标签：c++, exception, vector

如果我想获得向量中的一个值，我可以使用两个选项：使用 [] 运算符。或者我可以使用函数 .at 示例来使用：

```
vector<int> ivec;
ivec.push_back(1); 
```

现在我可以做这两件事

```
int x1 = ivec[0];
int x2 = ivec.at(0); // or 
```

我听说使用 at 是一个更好的选择，因为当我使用该选项时，我可以将其抛出异常。

有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-06-23T19:00:23.107

`c[i]`和之间的区别在于，如果超出向量的范围，则会引发异常，而`c.at(i)`只是[`at()`](http://en.cppreference.com/w/cpp/container/vector/at)调用`std::out_of_range`未定义的行为，这意味着任何事情都可能发生。`i`[`operator[]`](http://en.cppreference.com/w/cpp/container/vector/operator_at)

没有人说`at()`比`operator[]`。这取决于情况。在`at()`执行范围检查时，它可能并不总是可取的，尤其是当您的代码本身确保索引永远不会超出范围时。在这种情况下，`operator[]`更好。

考虑以下循环：

```
for(size_t i = 0 ; i < v.size(); ++i)
{
   //Should I use v[i] or v.at(i)?
} 
```

在这样的循环中，与成员函数`operator[]`相比，它总是一个更好的选择。`at()`

我`at()`希望它在索引无效的情况下抛出异常，以便我可以在`catch{ ...}`块中进行替代工作。*异常可帮助您将正常代码与异常/替代代码分开*：

```
try
{
   size_t i = get_index(); //I'm not sure if it returns a valid index!

   T item = v.at(i); //let it throw exception if i falls outside range

   //normal flow of code
   //...
}
catch(std::out_of_range const & e)
{
   //alternative code
} 
```

在这里您可以检查`i`自己，以确保它是一个有效的索引，然后调用`operator[]`而不是调用`at()`，但它会将普通代码与使用`if-else`块的替代代码混合在一起，这使得难以阅读*正常的代码流*。如果您在上面看到，`try-catch`提高了代码的可读性，因为它*真正将*普通代码与替代代码分开，从而产生整洁干净的代码。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-23T19:00:40.360

`at`和之间的唯一区别`[]`是`at`执行范围检查，`[]`而不执行。如果您已经检查了范围，或者已经以不会超出范围的方式构建了索引，并且需要重复访问一个项目，那么您可以通过选择`[]`而不是`at`.

单次检查和多次访问的示例：

```
size_t index = get_index(vect);
if (index < 0 || index >= vect.size()) return;
if (vect[index] > 0) {
    // ....
} else if (vect[index] > 5) {
    // ....
} else .... 
```

将索引构造为在限制范围内的情况示例：

```
for (size_t i = 0 ; i != vect.size() ; i++) {
    if (vect[i] > 42) {
        // ....
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T10:50:18.083

其他答案是完全正确的，但可能给人的印象是`at()`在编写仍将调试的代码时使用它是一个好主意，因为这会导致发出错误信号。这通常是这种情况，但不适用于最广泛使用的编译器——gcc 可以设置为通过[将其置于调试模式](http://gcc.gnu.org/onlinedocs/libstdc++/manual/bk01pt03ch17s03.html)来执行（致命）范围检查，并且可能在 Visual Studio 中完成类似的操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-26T06:50:12.673

`.at`因此，当向量中不存在元素并`out_of_range`抛出异常时，向量方法 C++会检查边界。

当`[]`对向量不使用边界检查时，因此如果元素不存在，则不会引发异常，结果是未定义的行为，例如向量中没有现有元素的随机值。

使用`[]`比`at`安全方面要好，但这将需要更多时间，并且会影响程序的性能。

# c# - 管理枚举字段

> ID：11172145
> 
> 赞同：4
> 
> 时间：2012-06-23T18:57:36.823
> 
> 标签：c#, enums

我有一个`enum`：

```
public enum Enumeration
{
    A,
    B,
    C
} 
```

以及一个接受一个类型参数的方法`Enumeration`：

```
public void method(Enumeration e)
{
} 
```

我希望它`method`只能接受`A`并且`B`（`C`被认为是错误的值），但我需要`C`在我的`Enumeration`因为其他方法可以接受它作为正确的值。做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-23T19:04:17.067

我不会拒绝*只是* `C`。我会拒绝除*and**以外的任何值`A``B`*：

```
if (e != Enumeration.A && e != Enumeration.B)
{
    throw new ArgumentOutOfRangeException("e");
} 
```

这很重要，否则人们可以调用：

```
Method((Enumeration) -1); 
```

它会通过你的验证。您始终需要注意，枚举实际上只是一组命名整数 - 但*任何*正确基础类型的整数都可以转换为枚举类型。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-23T19:01:22.853

抛出异常：

```
public void method(Enumeration e)
{
    if (e != Enumeration.A && e != Enumeration.B) {
        throw new ArgumentOutOfRangeException("e");
    }
    // ...
} 
```

如果您使用的是 .NET 4.0 或更高版本，那么您可以使用[代码协定](http://msdn.microsoft.com/en-us/library/dd264808.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T19:07:04.367

正如 paulsm4 提到的，您可以定义：

```
public enum EnumSubset
{
    A = Enumeration.A,
    B = Enumeration.B,
} 
```

并使用：

```
public void method(EnumSubset e)
{
} 
```

# c# - 从列表构建缩进结构的想法？

> ID：11172160
> 
> 赞同：1
> 
> 时间：2012-06-23T19:00:18.253
> 
> 标签：c#, .net, list, recursion

我有一个列表（.NET），需要构建一个缩进的树结构。列表中的每个项目都有一个指示缩进级别的 Position 属性。最终结构应如下所示：

```
// (1) 1
//      (2) 1-1
//      (2) 1-2
//      (2) 1-3
// (1) 2
//      (2) 2-1
//          (3) 2-1-1
// (1) 3 
```

括号内的数字是 Position 属性。给定级别的每个后续项目都应该有一个标签，表明它在该级别的项目列表中的计数。如示例所示，较低的职位级别将具有某种大纲格式标签。请记住，我必须正确生成这些标签。

老实说，我已经有一段时间没有做过递归工作了，虽然我认为这将是最好的解决方案，但我只是坚持如何完成工作。我可能过于复杂了。我的想法是，当我到达“叶子”时，我应该从列表中删除该项目并返回，但我不确定。只是稍微转动一下我的轮子。

谢谢，杰

**更新：**

这是接近的东西，但我无法弄清楚最后一个案例。到目前为止，如果下一个项目落在同一级别或缩进一个级别，它会很好，但我需要一个案例来说明列表中的下一个项目位于小于当前位置的位置（即缩进更远左边）。另外，我不确定方法顶部的基本情况：

```
var sb = new StringBuilder();
BuildTree(sb, list, 0, 1, string.Empty);
return sb.ToString();

private void BuildTree(StringBuilder sb, List<Item> list, int currIndex, int count, string parentId)
{
    if (list.Count == currIndex)
    {
        return;
    }

    // Build my item.
    string currId = parentId == string.Empty ? count.ToString() : parentId + "-" + count;
    sb.Append(currId + "<br />");

    if (list[currIndex + 1].Position == list[currIndex].Position)
    {
        BuildTree(sb, list, currIndex + 1, count + 1, parentId);
    }

    if (list[currIndex + 1].Position > list[currIndex].Position)
    {
        BuildTree(sb, list, currIndex + 1, 1, currId);
    }
} 
```

**更新：**

另一种实现，但对于缩进较少的行仍然失败：

```
private void BuildTree(StringBuilder sb, List<Item> list, int currIndex, int count, string parentId)
{
    if (list.Count == 0)
    {
        return;
    }

    // Build my item.
    string currId = parentId == string.Empty ? count.ToString() : parentId + "-" + count;
    sb.Append(currId + "<br />");

    if (list[currIndex + 1].Position == list[currIndex].Position)
    {
        BuildTree(sb, list, currIndex + 1, count + 1, parentId);
    }

    if (list[currIndex + 1].Position > list[currIndex].Position)
    {
        BuildTree(sb, list, currIndex + 1, 1, currId);
    }

    list.RemoveAt(currIndex);
} 
```

**更新：**

这是一个黑客，但它有效。我基本上是在根目录下构建多个子树。我更喜欢适当的解决方案而不是 hack，但这是我迄今为止最好的尝试。欢迎替代品：

```
var sb = new StringBuilder();
List<Person> list = GetTheList();
int cnt = 0;
while (list.Count > 0)
{
    BuildTree(sb, list, 0, ++cnt, string.Empty);
}

return sb.ToString();

private void BuildTree(StringBuilder sb, List<Person> list, int currIndex, int count, string parentId)
{
    // Build my item.
    string currId = parentId == string.Empty ? count.ToString() : parentId + "-" + count;
    sb.Append(currId + "<br />");

    if (list.Count > 1)
    {
        if (list[currIndex + 1].Position == list[currIndex].Position)
        {
            BuildTree(sb, list, currIndex + 1, count + 1, parentId);
        }

        if (list[currIndex + 1].Position > list[currIndex].Position)
        {
            BuildTree(sb, list, currIndex + 1, 1, currId);
        }
    }

    list.RemoveAt(currIndex);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T20:19:56.880

```
var sb = new StringBuilder();
List<Person> list = GetTheList();
int cnt = 0;
// The loop is necessary to iterate over the root elements.
while (list.Count > 0)
{
    BuildTree(sb, list, 0, ++cnt, string.Empty);
}

return sb.ToString();

private void BuildTree(StringBuilder sb, List<Person> list, int currIndex, int count, string parentId)
{
    string currId = parentId == string.Empty ? count.ToString() : parentId + "-" + count;
    sb.Append(currId + "<br />");

    if (list.Count > 1)
    {
        if (list[currIndex + 1].Position == list[currIndex].Position)
        {
            BuildTree(sb, list, currIndex + 1, count + 1, parentId);
        }

        if (list[currIndex + 1].Position > list[currIndex].Position)
        {
            BuildTree(sb, list, currIndex + 1, 1, currId);
        }
    }

    list.RemoveAt(currIndex);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T20:47:46.297

这是一种选择。它没有什么花哨的，甚至可能不漂亮，并且肯定没有任何健全性检查或错误处理逻辑，但它支持您说明的结构。

输出应该与您在问题顶部的内容相似，它有望引导您朝着正确的方向前进。

```
using System;
using System.Collections.Generic;

namespace ConsoleApplication1
{
    public class Program
    {
        private static readonly IndentedList indentedList = new IndentedList();

        static void Main()
        {
            Fill();
            indentedList.Items.ForEach(Print);
        }

        private static void Fill()
        {
            indentedList.Add(new Node()); // 1
            indentedList.Add(new Node()); // 2
            indentedList.Add(new Node()); // 3

            indentedList.Items[0].Add(new Node()); // 1-1
            indentedList.Items[0].Add(new Node()); // 1-2
            indentedList.Items[0].Add(new Node()); // 1-3

            indentedList.Items[1].Add(new Node()); // 2-1
            indentedList.Items[1].Children[0].Add(new Node()); // 2-1-1
        }

        private static void Print(Node node)
        {
            var indentation = new String('\t', node.IndentationLevel - 1);
            Console.WriteLine("{0}({1}) {2}", indentation, node.IndentationLevel, node);
            node.Children.ForEach(Print);
        }
    }

    public class IndentedList
    {
        private readonly Node superNode = new Node();

        public List<Node> Items { get { return superNode.Children; } }

        public void Add(Node node)
        {
            superNode.Add(node);
        }
    }

    public class Node
    {
        public int IndentationLevel { get { return parent == null ? 0 : parent.IndentationLevel + 1; } }
        public int Position { get { return parent.Children.IndexOf(this) + 1; } }
        public List<Node> Children { get; private set; }

        private Node parent;
        private bool IsRootNode { get { return parent.parent == null; } }

        public Node()
        {
            Children = new List<Node>();
        }

        public void Add(Node child)
        {
            child.parent = this;
            Children.Add(child);
        }

        public override string ToString()
        {
            return IsRootNode ? Position.ToString() : String.Format("{0}-{1}", parent, Position);
        }
    }
} 
```

# uiscrollview - 获取 UIScrollView 中最后一个 UIButton 的原点 x

> ID：11172166
> 
> 赞同：0
> 
> 时间：2012-06-23T19:00:39.580
> 
> 标签：uiscrollview, uibutton, frame, subview

我想知道是否可以获得最后一个 UIButton 的原点 x，它是 UIScrollView 的子视图。

我试过这段代码，但它不起作用，因为如果我 NSLog 它的帧它返回 0：

```
-(void)myMethod 
{
    UIButton *lastButton = [[toggleScroll subviews]lastObject];

    NSLog(@"Button frame %f", lastButton.frame.size.width);
    NSLog(@"Button origin %f", lastButton.frame.origin.x);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T19:08:59.963

这实际上取决于您所说的“最后”是什么意思。数组的顺序`subviews`与屏幕上每个子视图的 X/Y 位置无关。我假设您实际上想要所有按钮原点 X 坐标的最大 X 坐标：

```
CGFloat xMax = -HUGE_VALF;
for (UIView *subview in toggleScroll.subviews) {
    if ([subview isKindOfClass:[UIButton class]]) {
        xMax = MAX(xMax, subview.frame.origin.x);
    }
} 
```

# django - inline_formset 缺少字段

> ID：11172169
> 
> 赞同：0
> 
> 时间：2012-06-23T19:00:41.930
> 
> 标签：django

我添加了 inline_formset。但`{{ form.name }}`它没有显示在模板中。我错过了什么吗？谢谢

```
class Album(models.Model):
    name = models.CharField(('album name'), max_length=100)
    owner = models.ForeignKey(User, verbose_name=('user'), related_name=('users'))

class Song(models.Model):
    album = models.ForeignKey(Album, verbose_name=('album'), related_name=('songs'))
    title = models.CharField(('song name'), max_length=100)
    artist = models.CharField(('artist name'), max_length=100) 
```

inline_formset

```
AlbumFormSet = inlineformset_factory(Album, Song) 
```

在模板中

```
 <tr>
      <td>{{ form.name }}</td> <-- its not showing
      <td>{{ form.title }} </td>
      <td>{{ form.artist }} </td>
    </tr>
{% endfor %}

{{ formset.management_form }} 
```

更新

```
 {% for form in formset %}
                    <tr>

                      <td>{{ form.title }} </td>
                      <td>{{ form.artist }} </td>
                      <td>{{album_form.name}}</td>
                      <td>{{ form.errors }}</td>
                    </tr>
                {% endfor %} 
```

我为专辑添加了单独的 ModelForm，然后在 forloop 中添加。现在它的重复输入标签名称。`<input id="id_name" type="text" name="name" maxlength="100">`

最新更新

我添加了以下数据。数据已保存。但是有一个奇怪的问题。只是`Last Album`存不`Test 1`和`Test 2`。

![在此处输入图像描述](../Images/457a5e35cbea79e2c38dea9af172851d.png)

![在此处输入图像描述](../Images/610045ebcada4a9b3a10ff89e06b5924.png) ![在此处输入图像描述](../Images/33bd8c0836de1e88d2d15b82543f62c7.png)

![在此处输入图像描述](../Images/5af2e72a43ec479c83567ebd4b89e779.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T20:34:28.907

我认为 inlineformset 不包含专辑模型的表格。您必须为 Album 创建一个单独的 ModelForm，然后执行类似`{{album_form.name}}`.

您可以在您的视图中将您的表单集与专辑的 ForeignKey 相关联，类似这样的东西 -

```
# validation and other code
# ---------------------------
new_album = Album()
new_album_form = AlbumModelForm(request.POST,instance=new_album)
song_formset = AlbumFormset(request.POST)
new_album_form.save()
songs = song_formset.save(comit=False)
for song in songs:
    song.album = new_album
    song.save() 
```

**编辑：**

如果您想创建一个专辑和多首带有该专辑外键的歌曲，上述解决方案可能会起作用。为了得到你想要的，即`{{form.name}}`使用带有名称、标题`{{form.title}}`和`{{form.artist}}`艺术家字段的普通表单集，而不是模型表单集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T20:14:16.983

表单中没有`name`字段。表格用于歌曲，它们有`album`,`title`和`artist`.

# regex - 编写用于识别整数的正则表达式

> ID：11172171
> 
> 赞同：0
> 
> 时间：2012-06-23T19:01:16.757
> 
> 标签：regex

我希望它检测正整数和负整数，但如果它用于减法，我希望它不包括减号。

前任

*   "29 --24 + 4" 应该返回 29、-24 和 4

*   "29 -24 + 4" 应该返回 29、24，最后是 4

我目前使用这个表达式 "([0-9] *-)?[0-9]+" 来测试减号后面的字符是否不是数字。然后我可以用另一个正则表达式找到实际数字。上面的问题是，如果我的号码在字符串的开头，它就不起作用。像“-4 + 2”。这将输出 4 和 2。

**编辑：语言是actionscript 3。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T19:26:45.373

一种使用`perl`风味的方法`regexp`：

内容`script.pl`：

```
use warnings;
use strict;

while ( <DATA> ) { 
    chomp;
    printf qq|%s = |, $_; 
    printf qq|%s |, $1 while m/(-?\d+)\s*(?:-|\+|$)/g;
    print qq|\n|;
}

__DATA__
29 --24 + 4
29 -24 + 4
-4 + 2 
```

像这样运行它：

```
perl script.pl 
```

具有以下输出：

```
29 --24 + 4 = 29 -24 4 
29 -24 + 4 = 29 24 4 
-4 + 2 = -4 2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T20:09:00.260

***动作脚本：***

```
var pattern:RegExp = new RegExp("([+-]?\d+)","ig"); 
var element:Array = ut.match(pattern); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T19:24:32.230

```
(?:^|[-+]) *?(-?\d+) 
```

[http://rubular.com/r/E8WObP7HEW](http://rubular.com/r/E8WObP7HEW)

# google-app-engine - 如何对 AppEngine 渠道服务进行单元测试？

> ID：11172174
> 
> 赞同：3
> 
> 时间：2012-06-23T19:01:38.363
> 
> 标签：google-app-engine

我已经阅读了 AppEngine[单元测试指南](https://developers.google.com/appengine/docs/java/tools/localunittesting)，并且我得到了 Java 数据存储服务测试，但我对 Channel 服务没有任何运气。该指南没有提供任何有关通道测试的具体示例，javadocs 也没有太大帮助，但是我的 IDE 向我展示了一些似乎用于对本地通道服务进行单元测试的类；我只是不知道如何使用它们。

有没有人有任何测试 GAE 渠道服务的经验或示例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T16:02:34.203

以下对我有用：

```
import unittest

from google.appengine.api import channel
from google.appengine.ext import testbed

class TestCase(unittest.TestCase):

  def setUp(self):
    self.testbed = testbed.Testbed()
    self.testbed.activate()
    self.testbed.init_channel_stub()

  def test_send(self):
    channel_stub = self.testbed.get_stub('channel')
    token = channel.create_channel('ClientID1')
    channel_stub.connect_channel(token)
    channel.send_message('ClientID1', 'hello')
    channel_messages = channel_stub.get_channel_messages(token)
    channel_stub.clear_channel_messages(token)
    self.assertEquals(['hello'], channel_messages)

if __name__ == '__main__':
  unittest.main() 
```

您还可以查看[通道服务存根的源代码](http://code.google.com/p/googleappengine/source/browse/trunk/python/google/appengine/api/channel/channel_service_stub.py?r=155)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-22T14:57:35.567

Ivan 提供了简洁的 Python 示例，这是 Java 的解决方案。

假设这是我们要测试的代码

```
public class ClientChannelService {

    private ChannelService channelService = ChannelServiceFactory.getChannelService();

    public String createToken(){
        return channelService.createChannel(UUID.randomUUID().toString());
    }

    public void sendMessage(String token, String message){
        channelService.sendMessage(new ChannelMessage(token, message));
    }
} 
```

首先，添加`appengine-testing.jar`到类路径：

```
<dependency>
   <groupId>com.google.appengine</groupId>
   <artifactId>appengine-testing</artifactId>
   <version>${appengine.version}</version>
   <scope>test</scope>
</dependency> 
```

接下来，创建一个测试，如下所示。我在这里假设 JUnit，但通常你可以自由使用任何测试框架，这对 GAE 没关系。

```
private ClientChannelService service;
private LocalServiceTestHelper helper = new LocalServiceTestHelper(
                                            new LocalChannelServiceTestConfig());
private ChannelManager channelManager;

@Before
public void setUp() {
    helper.setUp();
    channelManager = LocalChannelServiceTestConfig.getLocalChannelService()
                                                  .getChannelManager();
    service = new ClientChannelService();
}

@After
public void tearDown() {
    helper.tearDown();
}

@Test
public void testSendMessage() {
    String token = service.createToken();
    connectionId = channelManager.connectClient(token); //emulate client connection

    service.sendMessage(token, "message");

    String message = channelManager.getNextClientMessage(token, connectionId);
    assertEquals("message", message);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T22:00:54.153

您是否在[http://code.google.com/p/googleappengine/source/browse/trunk/java/src/main/com/google/appengine/tools/development/testing/LocalChannelServiceTestConfig.java?r= 182](http://code.google.com/p/googleappengine/source/browse/trunk/java/src/main/com/google/appengine/tools/development/testing/LocalChannelServiceTestConfig.java?r=182)

哎呀对不起上一篇文章，我意识到你没有做能力......

# javascript - jquery移动加载事件等于时间轴上的window.load事件

> ID：11172176
> 
> 赞同：0
> 
> 时间：2012-06-23T19:02:06.703
> 
> 标签：javascript, jquery, ajax, events, jquery-mobile

使用 jquery mobile 1.1.0 许多设备可以有不同的屏幕高度，以填补我正在做的空白空间： content_height = screen_height - header_height - footer_height

唯一真正等到所有内容都加载完毕才能计算实际高度的事件是

```
$(window).load 
```

我的问题：因为我使用 ajax 导航系统，window.load 只会触发一次，并且我测试了许多负载分段事件：

```
$(document).bind('pagechange', func..)
$(document).bind('pageload', func..) 
```

等等..

我的问题：是否有一个 jquery 移动事件会在每个页面加载时触发并且足够晚以加载大小？或在加载内容时触发方法的任何其他方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T07:34:01.083

*小提琴*：http: [//jsfiddle.net/ca11111/CAtWG/](http://jsfiddle.net/ca11111/CAtWG/)

如果你想在页面完全加载时做一些事情：
在你的 html 中：

```
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>

<script type="text/javascript">
$(document).bind("mobileinit", function(){
    //$.mobile.loadingMessageTextVisible = true;
    // set global config of jquery mobile here
});
</script>
<script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>
<script type="text/javascript"  src='test.js'></script> 
```

然后放入你的 test.js 文件：

```
$("#Mypage1").live("pagecreate", function() {
     //do stuff when Mypage1 is created 
     // happens once if you don't explicitly refresh
      alert("Mypage1 created");
     $("#mydiv").height($("body").height() - 50);
});

$("#Mypage1").live("pageshow", function() {
     //do stuff when Mypage1 is shown
     // happens multiple times, as soon as you go to Mypage1 from other pages
     alert("Mypage1 visible");
}); 
```

您可能还在寻找方向更改事件，因此添加：

```
$(window).bind('orientationchange', _orientationHandler);

if(event.orientation){
    if(event.orientation == 'portrait'){
              //do something
    }
    else if(event.orientation == 'landscape') {
                //do something
    }
} 
```

如果您触发了自己的 ajax 请求，并且想要修改 html，只需在回调中执行：

```
$("#Mypage1").trigger("pagecreate"); 
```

# spring - 检索推文时出现 java.lang.NoSuchMethodError 异常

> ID：11172178
> 
> 赞同：1
> 
> 时间：2012-06-23T19:02:11.280
> 
> 标签：spring, spring-social

我正在开发一个使用 Spring Social API 访问 Twitter 帐户的应用程序。与 Twitter 的连接已成功建立。我能够检索关注者的数量、个人资料名称和朋友。当我尝试检索用户的推文时，我得到 java.lang.NoSuchMethodError 异常。

完整的堆栈跟踪是：

```
java.lang.NoSuchMethodError: org.codehaus.jackson.JsonNode.asLong()J
    at org.springframework.social.twitter.api.impl.TweetDeserializer.deserialize(TweetDeserializer.java:42)
    at org.springframework.social.twitter.api.impl.TweetDeserializer.deserialize(TweetDeserializer.java:37)
    at org.codehaus.jackson.map.deser.CollectionDeserializer.deserialize(CollectionDeserializer.java:116)
    at org.codehaus.jackson.map.deser.CollectionDeserializer.deserialize(CollectionDeserializer.java:93)
    at org.codehaus.jackson.map.deser.CollectionDeserializer.deserialize(CollectionDeserializer.java:25)
    at org.codehaus.jackson.map.ObjectMapper._readMapAndClose(ObjectMapper.java:2131)
    at org.codehaus.jackson.map.ObjectMapper.readValue(ObjectMapper.java:1455)
    at org.springframework.http.converter.json.MappingJacksonHttpMessageConverter.readInternal(MappingJacksonHttpMessageConverter.java:136)
    at org.springframework.http.converter.AbstractHttpMessageConverter.read(AbstractHttpMessageConverter.java:154)
    at org.springframework.web.client.HttpMessageConverterExtractor.extractData(HttpMessageConverterExtractor.java:74)
    at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:446)
    at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:415)
    at org.springframework.web.client.RestTemplate.getForObject(RestTemplate.java:213)
    at org.springframework.social.twitter.api.impl.TimelineTemplate.getHomeTimeline(TimelineTemplate.java:58)
    at org.springframework.social.twitter.api.impl.TimelineTemplate.getHomeTimeline(TimelineTemplate.java:48)
    at com.mindtree.web.controller.SimpleContoller.handleRequest(SimpleContoller.java:68)
    at org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter.handle(SimpleControllerHandlerAdapter.java:48)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:863)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:792)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:851)
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:756)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:857)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Unknown Source) 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T02:18:56.413

看来Spring Social使用的是Jackson的最新版本，即1.9版本，方法`JsonNode.asLong()`是1.9版本的新方法

[比较1.8](http://jackson.codehaus.org/1.8.8/javadoc/org/codehaus/jackson/JsonNode.html)和[1.9](http://jackson.codehaus.org/1.9.4/javadoc/org/codehaus/jackson/JsonNode.html)的 JavaDoc

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T09:13:26.520

spring-social 1.0.1 和 jackson 1.9.2 没有问题。最新的 spring-social 包支持 jackson 1.9。

```
spring-social-core-1.0.1.RELEASE.jar
spring-social-twitter-1.0.1.RELEASE.jar
jackson-all-1.9.2.jar 
```

询问 ：

```
List<Tweet> tweets = twitterApi.timelineOperations().getHomeTimeline(); 
```

您可以从以下网址获取最新版本：[http ://www.springsource.org/spring-social](http://www.springsource.org/spring-social)

# java - 查询Java中的接口

> ID：11172179
> 
> 赞同：9
> 
> 时间：2012-06-23T19:02:31.623
> 
> 标签：java, interface, object-oriented-analysis, overriding

假设我有两个接口接口 A 和接口 B：

```
public interface A {
  public int data();
}

public interface B {
  public char data();
} 
```

接口 A 有一个方法`public int data()`，接口 B 有一个方法`public char data()`。

当我在某个类 C 中同时实现接口 A 和 B 时，编译器会给我一个错误。这是java中的缺陷吗？我认为这是不允许我们扩展多个类的主要原因之一，那么当这个问题仍然存在时，为什么我们允许实现多个接口？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-23T19:07:46.923

[Java 教程：定义方法 - 重载方法](http://docs.oracle.com/javase/tutorial/java/javaOO/methods.html)状态，

> Java 编程语言支持重载方法，Java 可以区分具有不同方法签名的方法。这意味着如果类中的方法具有不同的参数列表，则它们可以具有相同的名称。

还，

> 您不能声明多个具有相同名称和相同数量和类型的参数的方法，因为编译器无法区分它们。
> 
> 编译器在区分方法时不考虑返回类型，因此即使它们具有不同的返回类型，也不能声明具有相同签名的两个方法。

这两个实现的方法共享一个共同的*方法签名*（即`data()`），因此，编译器无法区分两者，并使该单一方法满足两个接口契约。

* * *

# 编辑：

例如，

```
public class Foo implements IFoo, IBar{

    public static void main(String[] args) {
        Foo foo = new Foo();
        ((IFoo) foo).print();
        ((IBar) foo).print();
    }

    @Override
    public void print() {
        System.out.println("Hello, World!");
    }
}

public interface IBar {
    void print();
}

public interface IFoo {
    void print();
} 
```

这将输出，

```
Hello, World! 
Hello, World! 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-23T19:44:48.047

Java 编译器（我认为也是 C#）不会通过返回值来区分方法。在您的情况下，尽管返回类型不同，编译器仍认为这两种方法相同

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-23T19:08:22.963

您提出的问题与多重继承无关。实现多个接口的类实现也不是。

当你定义一个接口时，你只是说这个接口的实现者应该同意一个契约并实现该接口上定义的所有方法。

一个类实现可以毫无问题地实现多个接口，但接口不能冲突。在**您的情况下**，您正在尝试**实现两个接口，它们声明一个具有相同签名的方法**。

方法签名由 java 中的名称和参数类型组成。

> 定义：方法声明的两个组成部分包括方法签名——方法的名称和参数类型。

[http://docs.oracle.com/javase/tutorial/java/javaOO/methods.html](http://docs.oracle.com/javase/tutorial/java/javaOO/methods.html)

为了重载一个方法，你需要有不同的签名。

Java中的多重继承是不允许的，因为存在复杂的问题，例如当方法由两个或多个超类实现时定义应该执行哪个实现。对于这个主题，我建议看看[钻石问题](http://en.wikipedia.org/wiki/Diamond_problem)

事实上，在某些情况下使用接口来模拟多重继承，允许类呈现一组合并的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-23T19:13:31.707

一种解决方案是使用内部类：

1.  您的“C 类”实现接口“A”

2.  您还有一个实现接口“C”的内部类“D”：

    公共类 C 实现 A { ...私有类 D 实现 B {

如果你真的需要同一个类中的两个接口，这可能会让你吃到蛋糕也吃掉它:)

# c - 这是 C 中未定义的行为吗？(c=x) + (c==y)

> ID：11172182
> 
> 赞同：4
> 
> 时间：2012-06-23T19:02:42.493
> 
> 标签：c, undefined-behavior

我有一些示例代码会引发此警告：

```
main.c: In function ‘getline_’:
main.c:30:32: warning: operation on ‘c’ may be undefined [-Wsequence-point] 
```

在这个特定的练习中，我要避免使用`||`and`&&`运算符，但这似乎不会产生未定义的行为。编译器消息*只是*一个警告，但我想知道以了解情况。这段代码实际上会产生未定义的行为吗？

```
 24 int getline_( char s[], int limit)
 25 {
 26     int i, c;
 27     i=0;
 28     for( i=0; (i<limit-1) + ((c=getchar())!='\n') + (c!=EOF) == 3; i++){
 29            s[i]=c;
 30     }
 31     if( c == '\n' ){
 32         s[i]=c;
 33         i++;
 34     }
 35     s[i]='\0';
 36     return i;
 37 } 
```

在我的基本测试中似乎工作正常。

编辑：根据评论更新标题，谢谢 pst。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-23T19:05:03.993

这是未指定的行为：

`(i<limit-1) + ((c=getchar())!='\n') + (c!=EOF) == 3`

序列点之间表达式的求值顺序在 C 中未指定。如果赋值`c`发生在与 的相等性检查之前，则未指定`EOF`。

除了未指定的行为之外，它也是未定义的行为，因为它违反了序列点规则，尤其是这个：

> （C99, 6.5p2）“此外，应仅读取先验值以确定要存储的值。”

# c++ - C++ const struct &variable 产生缺少的标签名称

> ID：11172187
> 
> 赞同：0
> 
> 时间：2012-06-23T19:03:21.557
> 
> 标签：c++, struct, constants

尝试为一个类初始化和设置如下：

```
class Accel
{
public:
    Accel(const struct &F, const struct &m, const struct &M, const struct &I);

    etc...
} 
```

当我尝试编译时，我得到“'struct': missing tag name”。我正在使用其他人（我信任的人）的编码“约定”，这是“const struct &...”的来源，但如果有人知道更好的方法，请告诉我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-23T19:07:25.820

`struct`是 C++ 中的关键字；它不能用作类型名称。改用别的东西：

```
class Dennis;
struct Janet;  // "struct" is pretty much identical to "class"

class Accel
{ 
public:
    Accel(const Dennis & F, const Dennis & m, const Janet & j) { /* ... */ }
    // ...
}; 
```

（C++ 中的类型命名与其他语言中的不同，例如 C。在 C++ 中你说，，`class Dennis; Dennis x;`而在 C 中你必须说`struct Janet; struct Janet y;`，或者使用 typedef 来创建一个你可以使用的类型名，而不用说“struct”。 )

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T19:06:17.237

```
const struct &F 
```

这里的类型是`F`什么？ `struct`不是类型（在 C++ 中也不需要该限定符）。我相信您想要以下内容：

```
struct Foo {};

class Accel
{
public:
    Accel(const Foo &f, ...);
}; 
```

C`struct`在声明`struct`类型的变量时需要关键字，但即便如此，您也不能简单地省略类型名称。通常（在 C 中）你会`typedef`避免`struct`到处打字`struct`。

```
typedef struct {
    char *whatever;
} my_struct;

int main() {
    my_struct s;
} 
```

# c# - 实体框架抛出无法为表中的标识列插入显式值

> ID：11172188
> 
> 赞同：2
> 
> 时间：2012-06-23T19:03:24.223
> 
> 标签：c#, entity-framework

我是 EF 的新手，在尝试将更改保存到我的上下文时，我收到以下错误：

> 当 IDENTITY_INSERT 设置为 OFF 时，无法在表“GroupMembers_New”中插入标识列的显式值。

数据库上的列是具有自动增量的身份，在 edmx 上，id StoreGeneratedPattern 是身份，默认值是无，不知道为什么每次我尝试保存组时它总是尝试插入 0，有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T11:39:20.637

`StoreGeneratedPattern`注释必须出现在EDMX 文件中的两个位置 - SSDL部分*...*

```
<edmx:StorageModels>
  ...
  <EntityType Name="MyEntity">
    ...
    <Property Name="MyEntityID" Type="int" Nullable="false"
              StoreGeneratedPattern="Identity" />
    ...
  </EntityType>
  ...
</edmx:StorageModels> 
```

...以及在 CSDL 部分中：

```
<edmx:ConceptualModels>
  ...
  <EntityType Name="MyEntity">
    ...
    <Property Name="MyEntityID" Type="Int32" Nullable="false"
              annotation:StoreGeneratedPattern="Identity" />
    ...
  </EntityType>
  ...
</edmx:ConceptualModels> 
```

也许您的问题的原因是两个地方之一缺少注释。

# android - Android MotionEvent：找出运动是否发生在视图之外

> ID：11172191
> 
> 赞同：11
> 
> 时间：2012-06-23T19:03:29.543
> 
> 标签：android, motion-detection

我有一个按钮和 OnTouchListener 附加到它。我怎样才能找到运动（当用户按下按钮时）发生在它内部还是外部？event.getAction() 和 event.getActionMasked() 都只返回 0、1 或 2，分别是 ActionDown、ActionUp、ActionMove。有一个常量 MotionEvent.ACTION_OUTSIDE，即 4，但不知何故，即使我将触摸拖到按钮外，我也没有收到它 - 我仍然从两种方法中收到 2。有什么问题？

**UPD：**我找到了很好的解决方案 - 只需在 ACTION_UP 之后检查视图中的聚焦状态。如果它没有聚焦，则意味着运动发生在视图之外。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2016-09-10T17:21:21.033

MotionEvent.ACTION_OUTSIDE 不适用于 View。

一种解决方案是获取 X 和 Y 触摸位置并验证它是否在视图的边界内。可以这样做：

```
@Override
public boolean onTouchEvent(MotionEvent e) {
    if (isInside())
        Log.i(TAG, "TOUCH INSIDE");
    else
        Log.i(TAG, "TOUCH OUTSIDE");
    return true;
}

private boolean isInside(View v, MotionEvent e) {
    return !(e.getX() < 0 || e.getY() < 0
            || e.getX() > v.getMeasuredWidth()
            || e.getY() > v.getMeasuredHeight());
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-23T19:15:07.807

该标志仅适用于 Windows，不适用于视图。`ACTION_MOVE`当您将手指从视图上移开时，您会得到，事件将保留在它起源的视图中。如果您需要澄清，请查看源代码`SeekBar`：即使您将手指从栏上移开，拇指仍然会拖动！

对于在窗口级别使用执行此操作[`FLAG_WATCH_OUTSIDE_TOUCH`](http://developer.android.com/reference/android/view/WindowManager.LayoutParams.html#FLAG_WATCH_OUTSIDE_TOUCH)，它工作得很好。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-04-10T12:38:09.693

`case MotionEvent.ACTION_CANCEL`为我工作。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-23T19:16:12.557

如果 位于`OnTouchListener`中`Button`，您将仅接收来自 中的运动事件`Button`。`MotionEvent.ACTION_OUTSIDE`只会在运动事件第一次超出 的范围时调用，`View`您应该像对待它一样对待它`ACTION_UP`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-11-03T12:06:26.053

```
public static boolean touchWithinBounds(MotionEvent event, View view) {
    if (event == null || view == null || view.getWidth() == 0 || view.getHeight() == 0)
        return false;

    int[] viewLocation = new int[2];
    view.getLocationOnScreen(viewLocation);
    int viewMaxX = viewLocation[0] + view.getWidth() - 1;
    int viewMaxY = viewLocation[1] + view.getHeight() - 1;
    return (event.getRawX() <= viewMaxX && event.getRawX() >= viewLocation[0]
        && event.getRawY() <= viewMaxY && event.getRawY() >= viewLocation[1]);
} 
```

当您从不同视图转发触摸事件时的解决方案

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-01-30T17:20:55.927

试试这个

```
private View.OnTouchListener handleTouch = new View.OnTouchListener() {

@Override
public boolean onTouch(View v, MotionEvent event) {

    int x = (int) event.getX();
    int y = (int) event.getY();

    switch (event.getAction()) {
        case MotionEvent.ACTION_DOWN:
            Log.i("TAG", "touched down");
            break;
        case MotionEvent.ACTION_MOVE:
            Log.i("TAG", "moving: (" + x + ", " + y + ")");
            break;
        case MotionEvent.ACTION_UP:
            Log.i("TAG", "touched up");
            // do what you want when touch active
            break;
        case MotionEvent.ACTION_CANCEL:
            Log.if("TAG","touched canceled")
            // outside of the view 
            //ACTION_MOVE present 
            break:

    }

    return true;
} 
```

};

# objective-c - 如何将数据从 UITableView 传递到父类？

> ID：11172196
> 
> 赞同：0
> 
> 时间：2012-06-23T19:04:23.880
> 
> 标签：objective-c, uitableview, delegates

我有 2 节课：`List <UITableViewDelegate`和`TableView <UITableViewDelegate, UITableViewDataSource`.

类`TableView`是 UITableView 的自定义类，它通过 Core Data 获取数据到应用程序并且它的工作。对象在Class`tableView`中初始化，并且该对象具有和。`List``delegate``dataSource = self`

问题是：如何通过使用我自己的函数或类似功能`tableView`选择行到`List`类来从对象发送数据？

在`tableView`我使用委托功能： `-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T20:31:09.547

好的，我解决了。

我是 obj-c 开发人员的初学者，所以我不知道我可以为我的班级创建第二个委托，但使用其他名称（“委托”除外）。当我创建它并添加一些方法时，它工作得很好。

# python - 我正在尝试编写一个程序来告知在 python 中计数到 googol 需要多长时间

> ID：11172201
> 
> 赞同：0
> 
> 时间：2012-06-23T19:05:39.313
> 
> 标签：python, time, count

我正在尝试编写一个程序来跟踪计数到 googol 的时间，即 10 的 100 次方。我这样做的方式是让人们计数，“一，零”，10 等......所以它更容易。这是我正在使用的代码，

```
 from math import *

x = 10
y = 100
num = 0
up = 1
counter = 0
upper = 9
googol = pow(x, y)

while googol > 0:
    num += up
    counter += 1
    googol -= 1
    if counter == upper:
        up += 1
        upper *= 10 + 9
 print num 
```

这很难运行，因为它需要很长时间，这值得离开运行一段时间还是会因为时间太长而无法得到答案？你知道代码或语言的替代品吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T19:11:05.593

您永远无法在台式计算机上执行此操作。假设您每秒可以进行 30 亿次迭代（对于大多数或所有台式计算机来说，这是一个*很大的高估）。*即使以这样的速度，您也需要大约[10^83*年*](https://www.google.se/search?q=googol%20/%203GHz%20in%20years)！

# iphone - 获取在 iOS UIFont 中追踪字符的路径

> ID：11172207
> 
> 赞同：21
> 
> 时间：2012-06-23T19:06:15.053
> 
> 标签：iphone, ios, core-graphics, uifont, cgpath

假设我有一个在我的 iOS 应用程序中使用的自定义字体“Foo”。我已经将它添加到我的项目、plist 等中，并且我能够很好地渲染`UILabel`s 等。

现在，如果我想找出可以“追踪”该字体中字母“P”的点序列，我将如何获得该点序列？例如，假设我想使用 a`CGPath`像绘图仪一样缓慢地绘制字母“P”......

我只需要一个`CGPoints`数组中的序列，如果将其绘制为路径将绘制一个“P”。

我意识到对于像“T”这样的一些字母，这可能没有意义，因为必须抬起笔才能越过“T”。所以也许我需要一个序列`CGPath`...

关于如何做到这一点的任何提示？

谢谢！

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-06-23T20:00:33.180

从字母“P”到一系列点涉及几个步骤。您需要使用核心文本。

1.  创建一个`CTFont`. 从 iOS 7 开始，您可以在需要 a 的`UIFont`地方使用 a `CTFont`（它们是“免费桥接”）。您还可以使用函数`CTFont`直接从 a创建一个，或者使用名称使用（或使用其他一些方法）。`CGFont``CTFontCreateWithGraphicsFont``CTFontCreateWithName`

2.  `CTFontGetGlyphsForCharacters`使用该函数获取字母的字形。对于字母“P”，应该只有一个字形。对于非英语脚本中的某些字符，您可能会获得多个（组合）字形。

3.  使用该`CTFontCreatePathForGlyph`函数获取`CGPath`字形的 a。

4.  用于`CGPathApply`枚举路径的元素。

5.  将路径的每条直线、四边形曲线和三次曲线元素转换为点序列。Apple 没有为此提供任何公共 API。你需要自己做。对于直线元素，这很容易。对于曲线元素，如果您还不知道如何渲染贝塞尔曲线，则需要进行一些研究。例如，请参阅[将贝塞尔曲线转换为多边形链？](https://stackoverflow.com/questions/9247564/convert-bezier-curve-to-polygonal-chain).

我们可以在 Swift Playground 中轻松地进行实验：

```
import UIKit
import CoreText
import XCPlayground

let font = UIFont(name: "HelveticaNeue", size: 64)!

var unichars = [UniChar]("P".utf16)
var glyphs = [CGGlyph](count: unichars.count, repeatedValue: 0)
let gotGlyphs = CTFontGetGlyphsForCharacters(font, &unichars, &glyphs, unichars.count)
if gotGlyphs {
    let cgpath = CTFontCreatePathForGlyph(font, glyphs[0], nil)!
    let path = UIBezierPath(CGPath: cgpath)
    print(path)
    XCPlaygroundPage.currentPage.captureValue(path, withIdentifier: "glyph \(glyphs[0])")
} 
```

结果：

```
<UIBezierPath: 0x7fbc89e0d370; <MoveTo {11.072000000000001, 23.808}>,
 <LineTo {11.072000000000001, 40.576000000000001}>,
 <LineTo {22.975999999999999, 40.576000000000001}>,
 <QuadCurveTo {30.560000000000002, 38.432000000000002} - {28.16, 40.576000000000001}>,
 <QuadCurveTo {32.960000000000001, 32.192} - {32.960000000000001, 36.288000000000004}>,
 <QuadCurveTo {30.560000000000002, 25.920000000000002} - {32.960000000000001, 28.096}>,
 <QuadCurveTo {22.975999999999999, 23.808} - {28.16, 23.744}>,
 <Close>,
 <MoveTo {4.992, 45.695999999999998}>,
 <LineTo {4.992, 0}>,
 <LineTo {11.072000000000001, 0}>,
 <LineTo {11.072000000000001, 18.687999999999999}>,
 <LineTo {25.024000000000001, 18.687999999999999}>,
 <QuadCurveTo {35.488, 22.208000000000002} - {31.936, 18.623999999999999}>,
 <QuadCurveTo {39.039999999999999, 32.192} - {39.039999999999999, 25.792000000000002}>,
 <QuadCurveTo {35.488, 42.143999999999998} - {39.039999999999999, 38.591999999999999}>,
 <QuadCurveTo {25.024000000000001, 45.695999999999998} - {31.936, 45.695999999999998}>,
 <Close> 
```

![P字形路径](../Images/050da3afb563881388bc6740083d9881.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-03-01T15:02:15.833

rob 的答案更新为 swift 4 + CoreGraphics 的垂直翻转使用倒置坐标系：

```
 var unichars = [UniChar]("P".utf16)
    var glyphs = [CGGlyph](repeating: 0, count: unichars.count)
    let gotGlyphs = CTFontGetGlyphsForCharacters(font, &unichars, &glyphs, unichars.count)
    if gotGlyphs {
        let cgpath = CTFontCreatePathForGlyph(font, glyphs[0], nil)!
        var inverse = CGAffineTransform(scaleX: 1, y: -1).translatedBy(x: 0, y: -cgpath.boundingBox.height - 1)
        let path = UIBezierPath(cgPath: cgpath.copy(using: &inverse)!)
        print(path) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-09-27T11:43:19.223

对于那些在 Objective C 中寻找相同解决方案的人

```
 UIFont *font = [UIFont fontWithName:@"HelveticaNeue" size:64];
    CGFontRef fontref = CGFontCreateWithFontName((__bridge CFStringRef)font.fontName);
    NSString *unichars = @"I";
    CFStringRef yourFriendlyCFString = (__bridge CFStringRef)unichars;
    CGGlyph glyphs = CGFontGetGlyphWithGlyphName(fontref, yourFriendlyCFString);
    CTFontRef fontCT = CTFontCreateWithName((__bridge CFStringRef)font.fontName, font.pointSize, NULL);
    CGPathRef cgpath = CTFontCreatePathForGlyph(fontCT, glyphs, nil);
    UIBezierPath *path = [UIBezierPath bezierPathWithCGPath:cgpath];
    NSLog(@"Complete path For p is %@", path);
    CGPathApply(cgpath, (__bridge void * _Nullable)(bezierPoints), MyCGPathApplierFunc);
    NSLog(@"Points on path %@", bezierPoints);
    for(NSValue *point in bezierPoints){

       //Do your work
    } 
```

# spreadsheet - 最好的公制与英制转换表？

> ID：11172209
> 
> 赞同：-1
> 
> 时间：2012-06-23T19:06:26.553
> 
> 标签：spreadsheet, metrics, economics, logistics

有没有比下面的更好、更智能的方式来构建公制与英制转换表？

即用于计算供应商使用不同单位系统的产品的存储/运输成本的电子表格。

提前致谢！

**长度**

```
Metric                Imperial

1 mm                  0.03937 in
1 cm        10 mm     0.3937 in
1 m         100 cm    1.0936 yd

Imperial              Metric

1 in                  2.54 cm
1 ft        12 in     0.3048 m
1 yd        3 ft      0.9144 m 
```

**体积**

```
Metric                Imperial

1 cm3                 0.0610 in3
1 dm3     1,000 cm3   0.0353 ft3
1 m3      1,000 dm3   1.3080 yd3
1 l       1 dm3       1.76 pt

Imperial              Metric

1 in3                 16.387 cm3
1 ft3     1,728 in3   0.0283 m3
1 fl oz               28.413 ml
1 pt      20 fl oz    0.5683 l

USA measure                               Metric

1 fl oz               1.0408 uk fl oz     29.574 ml
1 pint (16 fl oz)     0.8327 uk pt        0.4731 l
1 gallon              0.8327 uk gal       3.7854 l 
```

**大量的**

```
Metric                Imperial

1 mg                  0.0154 grain
1 g      1,000 mg     0.0353 oz
1 kg     1,000 g      2.2046 lb

Imperial              Metric

1 oz     437.5 grain  28.35 g
1 lb     16 oz        0.4536 kg
1 stone  14 lb        6.3503 kg
1 cwt    112 lb       50.802 kg 
```

**编辑**

```
Length:  1 m = N in / N ft / N yd
Volume:  1 m3 = N in3 / N ft3 / N yd3
Weight:  1 kg = N oz / N lb 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T19:11:22.003

如果 1g = .0353 oz，则 2g = 2 * 1g = 2 * .0353 oz。您需要做的就是对比率进行编程，然后乘以实际单位数。

示例 1lb = .4536 kg

因此每磅有 0.4536 公斤

编辑

为了简化表格，只需将所有内容都基于一个单位，然后在要转换的每个其他单位中找到该单位的数量。然后在转换时始终使用该基本单位作为转换的中间单位。

# asp.net - 如何更改asp.net web api中的默认路由

> ID：11172212
> 
> 赞同：12
> 
> 时间：2012-06-23T19:06:53.837
> 
> 标签：asp.net, asp.net-mvc, asp.net-web-api

我正在研究 asp.net web api。我正在尝试在 global.asax 文件中为我的项目设置默认路由，例如，

```
localhost:45678/api/Products 
```

但我没有找到任何类似于 asp.net mvc 路由模型的格式

```
url: "{controller}/{action}/{id}",
                defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional } 
```

它总是将我重定向到主页（HomeController）。请指导我。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-23T19:47:17.983

在您的文件夹中检查您的`RouteConfig`班级。`App_Start`您应该会看到可以更改的默认路由。

```
 routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional }
        ); 
```

**编辑**

阅读您的评论后，我认为问题不在于您的路线。我不确定您为什么*要这样做*，但您只需要为您的项目指定起始 URL。右键单击您的 Web 项目 - 单击**属性**- 单击**Web**选项卡 - 在开始操作下选择**开始 URL**并`http://localhost:45678/api/Products`在框中输入。保存您的项目并再次运行。它应该从新位置开始。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-23T21:54:49.120

这个问题可能是几乎很多人都会犯的常见错误。

这里的事实是，`System.Web.Routing.RouteTable.Routes`无论您使用什么框架，所有路由都会在 collection 下收集。因此，如果您将 ASP.NET MVC 默认路由放在 ASP.NET Web API 路由之前，则永远不会扫描 ASP.NET Web API 路由，因为 MVC 路由将匹配。

通过查看您迄今为止提供的内容，我假设这里就是这种情况。如果不是这种情况，请将完整的解决方案上传到某个地方，人们可以全面了解。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-26T00:08:26.010

实际上，如果我们可以在 properties->web->start location 中设置默认路由。那么在 global.asax 文件中需要什么路由表、自定义路由、RegisterRoutes。我试过这种方式

起初似乎，

```
routes.MapHttpRoute(
    name: "Default Api",
    routeTemplate: "api/{controller}/{id}",
    defaults: new { id = RouteParameter.Optional }
); 
```

现在我想`localhost:xxxx/api/products`为我的 web api 作为默认路由，

```
routes.MapHttpRoute(
    name: "DefaultApi",
    routeTemplate: "api/Products/{id}",
    defaults: new { controller = "Products", id = RouteParameter.Optional }
); 
```

但是没有用的结果。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-05-20T10:14:09.740

在 Visual Studio 中开发时，您可以通过展开项目的**Properties**文件夹进行设置。然后打开***launchSettings.json***文件并在此文件中查找**“launchUrl”**属性

您可以更改正在处理的配置文件的默认启动路线。

> “launchUrl”：“api/产品”

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-24T18:06:37.500

[编辑：我的答案与凯文的相同]

你是说当你从 Visual Studio 运行项目时，它会打开一个浏览器到项目主页？

Web API 项目模板包含一个 MVC 控制器和一个 Web API 控制器。

URI“http://localhost:xxxx/”进入 MVC 控制器，而“http://localhost:xxx/api/products”进入 API 控制器。

在 Visual Studio 中运行项目时，默认情况下它将导航到“http://localhost:xxxx”。在正常操作中，客户端会请求它想要的任何 URI。

您可以在 Project Properties / Web / Start Action 下更改 Visual Studio 设置。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-18T21:24:29.217

您需要添加：

```
Response.Redirect("Products.aspx"); 
```

`index()`类中的方法`HomeController`。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-10-09T06:02:15.213

在我的 ASP .NET Core Web API 项目中，每当您调试项目时，它都会将浏览器启动到预定义的 URL。这可以通过右键单击项目并转到属性然后调试选项卡来配置，如下所示。 [![在此处输入图像描述](../Images/b988099c27e6d09f2d78c794e4ecabef.png)](https://i.stack.imgur.com/CABzH.png)

**也就是说，不确定这与上面之前的答案中描述的launchsettings.json**有什么区别。

[![在此处输入图像描述](../Images/e1471dbd8c35e06df8442a1dd50e1c38.png)](https://i.stack.imgur.com/NxxQp.png)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-05-28T23:45:09.467

我认为您已经围绕解决方案跳舞，但只是错过了目标。尝试这个：

1.  确保您正在调用 GlobalConfiguration.Configure(WebApiConfig.Register); 在您的 Global.asax.cs 中。

2.  在`WebApiConfig.Register()`将默认路由设置为：

    routes.MapHttpRoute(name: "DefaultApi", routeTemplate: "api/ **{Controller}** /{id}",defaults: new { controller = "Products", id = RouteParameter.Optional });

3.  在您的 Web 项目设置中，确保您将“Start Url”属性设置为：

    本地主机:45678

祝你好运。

# python-c-extension - 是否可以在 Python C 扩展中包含 socketmodule.h？

> ID：11172215
> 
> 赞同：1
> 
> 时间：2012-06-23T19:07:10.103
> 
> 标签：python-c-extension, python-extensions

我想在我的 Python C 扩展中调用 socketmodule.h 中定义的 PySocketModule_ImportModuleAndAPI 函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-20T00:30:28.177

我遇到了类似的问题并通过以下方式解决了它：

1.  将 Modules\ 目录（来自您的 Python 源代码）添加到 C/C++ 附加包含目录。
2.  #include "socketmodule.h"

不知道这是否是最好的解决方案，但它对我有用！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T06:15:21.670

当然。[socketmodule.h](http://hg.python.org/cpython/file/2.7/Modules/socketmodule.h)中甚至还有一些关于如何操作的文档：

# c++ - 计算一个简单的字符串数学表达式

> ID：11172217
> 
> 赞同：3
> 
> 时间：2012-06-23T19:07:20.967
> 
> 标签：c++

我刚刚通过以下问题为研究生 C++ 开发人员进行了测试。它并不顺利，因为我无法确定完成任务的明确方式。时间限制也没有帮助。我对经验丰富的开发人员如何解决以下问题感兴趣 - 在伪代码或示例代码中：

```
Evaluate

Write a function in C or C++ that evaluates the result of a simple expression.
The function should ignore whitespace, but stop at the first non valid character.
Valid tokens are listed in the table below:

0-9 - Only integers are allowed in expressions

() - Nested expressions should be evaluated first.

+, -, *, / - Basic operators are addition, subtraction, multiplication and division.

The expression should be parsed from left to right. It is not necessary to consider operator precedence in your solution (e.g. 1 + 3 * 4 = 16). If there is an error in the expression, the function should return false.

Suggested prototype for function:

Example:

bool evaluate(const char *expression, int &result)
{
...
}

**Input**
1+3
(1 + (12 * 2)

**Result**
4
N/A

**Return code**
true
false (missing bracket) 
```

此外，这是我未能成功完成的第二个 C++。有 1 年的实习经验和 1 年的 C++ 学术经验，但我还没有为其中一些测试做好准备。是否有任何推荐的资源可以让我尝试解决诸如此类的问题以获得更多的“测试”经验？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T19:50:11.943

这里的问题主要是解析，这可能会在第二年或第三年的编译器课程中涵盖。一旦您可以解析表达式以构建表示输入的递归数据结构（称为语法树），评估此类表达式就非常简单了。一个像样的递归解析器也可以在不实际构建语法树的情况下评估表达式。

要获得完整的治疗，您需要一本关于编译器的书，例如 Dragon book。IIRC 的《*Programming: Principals and Practice using C++* 》一书涵盖了这样的示例。

您也可以等待*《计算机编程艺术》*第十章出版，其中将介绍解析。它计划在 2020 年左右推出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T20:12:39.153

这是我最短的尝试。打字花了大约 40 分钟，你可以在 ideone 上玩它（[链接](http://ideone.com/fvV8C)）。

代码非常简单，假设您至少粗略熟悉基本的[*递归下降解析*](http://en.wikipedia.org/wiki/Recursive_descent_parser)技术。

```
#include <iostream>
#include <cctype>
using namespace std;
bool eval_expr(const char **pe, int &lhs, bool inside = false);
// gets the next char after skipping optional whitespace
char skip_ws(const char **pe) {
    while (**pe == ' ') ++(*pe);
    return **pe;
}
// evaluates a parenthesized expression or a number
bool eval_prim(const char **pe, int &res) {
    char c = skip_ws(pe);
    if (c == '(') {
        ++(*pe);
        if (!eval_expr(pe, res, true)) return false;
        ++(*pe);
        return true;
    }
    if (isdigit(c)) {
        res = 0;
        while (isdigit(c)) {
            res = 10*res + c - '0';
            c = *(++(*pe));
        }
        return true;
    }
    return false;
}
// evaluates a chain of + - * / operations
bool eval_expr(const char **pe, int &lhs, bool inside) {
    if (!eval_prim(pe, lhs)) return false;
    char op;
    while ((op = skip_ws(pe)) && (op == '+' || op == '-' || op == '*' || op == '/')) {
        ++(*pe);
        int rhs;
        if (!eval_prim(pe, rhs)) return false;
        switch (op) {
            case '+': lhs += rhs; break;
            case '-': lhs -= rhs; break;
            case '*': lhs *= rhs; break;
            case '/': lhs /= rhs; break;
        }
    }
    return inside ? op == ')' : !op;
}
// wrapper API to hide an extra level of indirection
bool evaluate(const char *e, int &result) {
    return eval_expr(&e, result);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T23:55:07.540

从一个简单的语法开始：

```
expr: n-expr {o-expr} | p-expr {o-expr}
n-expr: [0-9]n-expr
p-expr: ( expr )
o-expr: op expr
op: + | - | * | / 
```

这可能是这个问题的最大障碍。您希望能够编写一个简单的自顶向下递归下降解析器，因此您的语法需要以允许这种情况发生的方式编写。

然后，从那里的实现相当简单：

```
bool expr (const char *&s, int &result, int eos = 0) {
    while (isspace(*s)) ++s;
    if (*s == eos) return false;
    if (isdigit(*s)) {
        if (!n_expr(s, result)) return false;
    } else if (*s == '(') {
        if (!p_expr(s, result)) return false;
    } else return false;
    while (isspace(*s)) ++s;
    if (*s == eos) return true;
    return o_expr(s, result, eos);
}

bool n_expr (const char *&s, int &result) {
    int n = 0;
    while (isdigit(*s)) n = 10 * n + (*s++ - '0');
    result = n;
    return true;
}

bool p_expr (const char *&s, int &result) {
    if (expr(++s, result, ')')) {
        ++s;
        return true;
    }
    return false;
}

bool o_expr (const char *&s, int &result, int eos) {
    int oresult = 0;
    const char *op = strchr("+-*/", *s);
    if (op == 0) return false;
    if (!expr(++s, oresult, eos)) return false;
    switch (*op) {
    case '+': result += oresult; break;
    case '-': result -= oresult; break;
    case '*': result *= oresult; break;
    case '/': result /= oresult; break;
    default: return false;
    }
    return true;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-23T21:14:57.733

这是一个简单的扫描推送应用（扭曲是大括号）。

1.  寻找一个数字：
    *   如果你看到一个数字压入堆栈
    *   如果你看到一个 '(' 将它推入堆栈并**转到 1**
    *   否则出错。
2.  寻找一个操作：
    *   如果你看到一个操作将它推入堆栈
    *   否则报错
3.  寻找一个数字：
    *   如果你看到一个数字压入堆栈
    *   如果你看到一个 '(' 推入堆栈并**转到 1**
    *   否则报错
4.  从堆栈中弹出最后三个项目（应该是数字操作号）

    *   执行操作并将结果压入堆栈。
5.  现在复杂一点：
    *   如果下一个字符转到下面的“PopCode” ，请查看下一个字符是否为**')' 。**
6.  如果没有更多输入**转到 7**。
    *   否则**转到 2**
7.  如果堆栈上只有一个项目，您就有了结果。
    *   否则出错。

流行代码

1.  从堆栈中弹出最后两个值。应该是'（数字'
    *   如果不是，则错误
2.  扔掉'（'
3.  如果栈顶是一个 op push 值**goto 4（上图）**
4.  否则将值压入堆栈**goto 5（上图）**

完成后，堆栈上应该有一个数字。

例子：

```
1+3
Rule 1: push 1             stack = '1'
Rule 2: push +             stack = '1 +'
Rule 3: push 3             stack = '1 + 3'
Rule 4: pop and do:        stack = '4'
Rule 5: Nothing            stack = '4'
Rule 6: goto 7             stack = '4'
Rule 7:                    stack = '4'

(1 + (12 * 2)
Rule 1: push ( goto 1      stack = '('
Rule 1: push 1             stack = '( 1'
Rule 2: push +             stack = '( 1 +'
Rule 3: push ( goto 1      stack = '( 1 + ('
Rule 1: push 12            stack = '( 1 + ( 12'
Rule 2: push *             stack = '( 1 + ( 12 *'
Rule 3: push 2             stack = '( 1 + ( 12 * 2'
Rule 4: Pop and do:        stack = '( 1 + ( 24'
Rule 5: Do 'PopCode'       stack = '( 1 + ( 24'
Pop  1: Pop 2              stack = '( 1 +'
Pop  2: Holding 24         stack = '( 1 +'
Pop  3: push 24 goto 4     stack = '( 1 + 24'
Rule 4: Pop and do         stack = '( 25'
Rule 5: Nothing            stack = '( 25'
Rule 6: goto 7             stacj = '( 25'
Rule 7: More than 1 item error

Re-Doing with correct formula
(1 + (12 * 2))
Rule 1: push ( goto 1      stack = '('
Rule 1: push 1             stack = '( 1'
Rule 2: push +             stack = '( 1 +'
Rule 3: push ( goto 1      stack = '( 1 + ('
Rule 1: push 12            stack = '( 1 + ( 12'
Rule 2: push *             stack = '( 1 + ( 12 *'
Rule 3: push 2             stack = '( 1 + ( 12 * 2'
Rule 4: Pop and do:        stack = '( 1 + ( 24'
Rule 5: Do 'PopCode'       stack = '( 1 + ( 24'
Pop  1: Pop 2              stack = '( 1 +'
Pop  2: Holding 24         stack = '( 1 +'
Pop  3: push 24 goto 4     stack = '( 1 + 24'
Rule 4: Pop and do         stack = '( 25'
Rule 5: Do 'PopCode'       stack = '( 25'
Pop  1: Pop 2              stack = ''
Pop  2: holding 25         stack = ''
Pop  3: Nothing.           stack = ''
Pop  4: push 25 goto 5     stack = '25'
Rule 5: Nothing            stack = '25'
Rule 6: goto 7             stack = '25'
Rule 7: Result = 25 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-23T20:06:12.163

解决（不一定）简单数学表达式的最简单方法是使用[Shunting Yard 算法](http://en.wikipedia.org/wiki/Shunting-yard_algorithm)将其转换为[Reverse Polish Notation](http://mathworld.wolfram.com/ReversePolishNotation.html)，这对于使用堆栈进行解析几乎是微不足道的。当然，对于作业或面试可能不可行（也许除非有 SY 算法参考）。

# c# - 在 xna 中生成纹理的 Mipmapping

> ID：11172218
> 
> 赞同：0
> 
> 时间：2012-06-23T19:07:21.663
> 
> 标签：c#, xna-4.0, mipmaps, dynamic-content

我正在我的游戏中生成一些纹理，但我需要它们的 mipmap。为什么即使我在构造函数中将 mipMap 设置为 true 也没有生成 mipmap，如何生成 mipmap？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T00:26:30.517

您必须自己执行缩减，然后自己填充每个 mipmap 级别。

您可以使用[此版本](http://msdn.microsoft.com/en-us/library/ff434430)来`SetData`指定要设置的 mipmap 级别。

使用该`LevelCount`属性来确定构造函数创建了多少 mipmap 级别。

# bash - 如何在 bash 的别名中包含环境变量？

> ID：11172221
> 
> 赞同：34
> 
> 时间：2012-06-23T19:07:36.100
> 
> 标签：bash

我对 bash 很陌生，我想为 bash 别名包含一个环境。我想做类似以下的事情

```
alias foo="bar $(baz)" 
```

这样我就可以执行以下操作

```
> baz=40
> foo 
```

并且 foo 将扩展为 command `bar 40`。目前上述方法不起作用，因为在制作别名时会扩展 $(baz) 。我是否必须将其包装在一个函数或其他东西中？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-06-23T19:11:29.250

您需要使用单引号 ( `'`) 来防止 bash 在创建别名时扩展变量：

```
$ alias foo='echo "$bar"'
$ bar="hello"
$ foo
hello 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-23T19:32:20.560

别名没有“环境”。别名只是一个“愚蠢的”文本替换。在这个问题中，没有使用环境变量 - 只有一个 shell 变量。如果要使用环境，请使用函数。在这种情况下，别名对函数没有任何优势。

```
$ alias foo='echo "$bar"'
$ bar=hi foo 
```

这不会产生任何输出，因为为简单命令设置的环境不适用于扩展。

```
$ alias foo=$'eval \'echo "$bar"\''
$ bar=hi foo
hi 
```

如果用一个函数代替，就不会有问题。

```
$ foo() { echo "$bar"; }
$ bar=hi foo
hi 
```

如有疑问，请始终使用函数。

**编辑**

从技术上讲，以上内容仅适用于 bash。以完全可移植的方式做到这一点几乎是不可能的。

在 dash、mksh、bash POSIX 模式和其他 POSIX shell 中，您可以执行以下操作：

```
foo() { echo "$bar"; }
bar=hi command eval foo 
```

但是，这在 ksh93 或 zsh 中不起作用。（我已经报告了 ksh93 的错误，但它可能永远不会被修复。）在 mksh 和 ksh93 中，您应该使用`function`关键字定义函数，但这不是 POSIX。我不知道任何可以在任何地方都有效的解决方案。

更糟糕的是，POSIX 2008-TC1 添加了额外的例外，因此环境分配的工作方式将更加复杂。我建议不要使用它们，除非你真的知道你在做什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-09-24T19:01:14.827

我执行以下操作以延迟别名中环境变量的扩展，直到它们运行，

```
alias foo="ls \${FOO_DIR}" 
```

例如显示动态定义的值的内容`FOO_DIR`。

# mysql - 在所需的分钟数后更新列

> ID：11172222
> 
> 赞同：-1
> 
> 时间：2012-06-23T19:07:38.797
> 
> 标签：mysql, intervals

我想每 20 分钟更新一次专栏，但它不会像我想的那样工作。我使用这个 SQL：

```
UPDATE visitors SET
is_online = '0'
WHERE is_online = '1'
AND DATE_ADD(date_lastactive, INTERVAL 20 MINUTE) < NOW() 
```

数据库如下所示：

```
CREATE TABLE IF NOT EXISTS `visitors` (
  `id` int(10) NOT NULL AUTO_INCREMENT,
  `ipaddress` text NOT NULL,
  `page` text NOT NULL,
  `page_get` text NOT NULL,
  `date_visited` datetime NOT NULL,
  `date_lastactive` datetime NOT NULL,
  `date_revisited` datetime NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `id` (`id`)
) 
```

我试图将其更改为`<`，`>`但在每个页面用该箭头刷新后它都会更新。

我该如何解决我的问题？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T19:13:19.797

如果您需要每 20 分钟对站点访问者和页面加载独立运行一次此查询，则必须使用系统调度程序：Unix 上的 cron 和 Windows 上的任务调度程序。只需编写一个简单的 shell 脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T19:19:19.930

您不能进行每 20 分钟重复一次的 sql 查询。没有这样的mysql语句组合。

# php - PHP 全局关键字解决方法

> ID：11172224
> 
> 赞同：2
> 
> 时间：2012-06-23T19:07:47.177
> 
> 标签：php, global-variables

在不使用关键字的情况下，是否有另一种在 PHP 中以 Java stlye 方式使用全局变量的方法`global`？

下面的例子是非常常见和简单的。我会用`define`关键字来做，但正如你所看到的，变量是相互依赖的，我相信你不能用`define`.

当然，在下面的示例中，我遇到了错误。

真的很期待这个问题的解决方案。在我看来，必须`global`为要使用全局变量的函数编写定义似乎是一种无效的解决方案，应该是一个更好的解决方案。

```
$BASE_URL = "mysite.com";
$PRODUCTS_URL = $BASE_URL . "/products";
$ABOUT_URL = $BASE_URL . "/about";

function foo() {
    echo $BASE_URL;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T19:17:46.000

> 我会用define关键字来做，但正如你所看到的，变量是相互依赖的，我相信你不能用define来实现。

不完全正确，这会很好 - 这就是我可能会处理这个的方式：

```
define('BASE_URL', "mysite.com");
define('PRODUCTS_URL', BASE_URL . "/products");
define('ABOUT_URL', BASE_URL . "/about"); 
```

小心吃掉常量命名空间，你可能想写一个函数，也许是这样的（可以使用调整，只是一个例子）：

```
function get_url($item = NULL, $include_base = TRUE)
{
    $urls = array(
        'base'  =>  'mysite.com',
        'products'  =>  '/products',
        'about' =>  '/about',
    );
    $output = $include_base ? $urls['base'] : '';
    if (isset($urls[$item])) $output .= $urls[$item];
    return $output;
} 
```

然后将其称为`echo get_url('products');`. 只要在`foo()`调用时定义了它，它就会起作用。我会一直努力避免`global`或`$GLOBALS`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T19:09:35.803

您可以按如下方式使用 $GLOBALS 超全局...

```
function foo() {
    echo $GLOBALS['BASE_URL'];
} 
```

但是 - 请参阅下面的 Kolink 评论。从[PHP 5.4.0](http://php.net/ChangeLog-5.php#5.4.0)开始，$GLOBALS superglobal 仅在首次使用时初始化，因此不使用它并坚持使用[global](http://uk.php.net/manual/en/language.variables.scope.php#language.variables.scope.global)关键字会带来边际性能优势。

对于您正在做的事情，您可以简单地定义一个全局数组，例如

```
 $CONF['BASE_URL']='foo'; 
```

然后你只需要`global $CONF`在任何需要它的函数中使用，或者更好的是，将它包装到某种配置类中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T19:14:52.197

您甚至可以使用`$_SESSION`但不是非常优雅的解决方案。为什么你打字这么难`global`？这不是很着急。

`define()`也很好。

# javascript - FB.login 限制弹出窗口被阻止

> ID：11172230
> 
> 赞同：2
> 
> 时间：2012-06-23T19:09:05.843
> 
> 标签：javascript, facebook, actionscript, login

在我的 Flex/Actionscript 应用程序上，我使用的是 FB.login，它在插入凭据后开始给我一个空白弹出窗口。在 IE 上它仍然有效，但根据我的阅读，这是原因：

> 调用 FB.login 会导致 JS SDK 尝试打开一个弹出窗口。因此，该方法只能在用户点击事件后调用，否则弹出窗口将被大多数浏览器阻止。

我正在考虑显示一个 Javascript 弹出窗口，并在用户单击它后执行 FB.login 并将数据发送回 Actionsript。这行得通吗？在 Actionscript 上，我只是在执行： `Facebook.login(onLoginHandler,{perms:'friends_work_history'});`

现在，我如何调用 JS，然后在 Actionscript 上获取登录数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T23:19:34.357

如果阻止程序是罪魁祸首，我认为您根本不会看到弹出窗口。

获取登录状态然后调用 FB.login 的代码的结构是什么？

我有一个类似的问题。结果是导致问题的 FB.login 回调中/周围的代码。

这是有效的东西（javascript）的一个很好的例子：http: [//developers.facebook.com/blog/post/2012/05/08/how-to--improve-the-experience-for-returning-users/](http://developers.facebook.com/blog/post/2012/05/08/how-to--improve-the-experience-for-returning-users/)

# xcode - 使用以前版本的 Xcode 在不受支持的 iOS 版本上构建

> ID：11172231
> 
> 赞同：2
> 
> 时间：2012-06-23T19:09:20.763
> 
> 标签：xcode, ios6

在升级到 iOS 6 后，我不得不使用非常有问题的 XCode 4.5 来构建我的设备，这让我感到很沮丧。

不幸的是，由于某种原因，这个版本的 Xcode 不允许我的应用推送或弹出视图控制器......当我切换回 XCode 4.3.2 时，这个问题完全消失了。

我希望能够使用 XCode 4.3.2 构建到我的 iOS 6 设备，但 4.3.2 正式不支持此功能，因为它不支持高于 5.x 的任何内容。

有解决方法或解决方法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-23T19:09:21.623

这是该问题的修复：

1) 当您安装最新的 XCode 开发者版本时，请在您的计算机上保留以前的版本

2) 确保之前版本的 XCode 已退出，然后打开开发者发布版本并打开 Organizer 窗口

3）打开旧版XCode，打开Organizer窗口

4) 单击旧版本的 XCode，您的设备现在应该显示在运行方案下拉菜单下。您现在应该能够在“不受支持”的设备上构建和运行。

注意：这适用于我在 iOS 6 上为 iPhone 4S 构建的 XCode 4.3.2 和 XCode 4.5。它可能适用于 XCode 或 iOS 的未来版本，也可能不适用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-04T01:01:48.210

我几乎从来没有离开过 Xcode。我收到此错误“不支持的设备（空）”，我尝试清理、切换 USB 端口、切换设备无济于事。

我退出并重新进入 Xcode，甚至没有拔掉我的设备，它解决了这个问题。当给出“不支持的设备”时，我注意到我的设备名称旁边没有显示任何图标（如小 iPhone）。重新启动 Xcode 后，我看到了这个图标，就知道我的问题已经解决了。

# postgresql - SQLAlchemy：从 SQLite 迁移到 PostgreSQL 的问题（例如 sqlalchemy.exc.ProgrammingError :)

> ID：11172238
> 
> 赞同：0
> 
> 时间：2012-06-23T19:10:10.530
> 
> 标签：postgresql, sqlalchemy

我在将工作脚本从 SQLite 迁移到 PGSQL 时遇到困难。我正在使用 SQLalchemy。当我运行脚本时，它会引发以下错误：

```
raise exc.DBAPIError.instance(statement, parameters, e, connection_invalidated=is_disconnect)

sqlalchemy.exc.ProgrammingError: (ProgrammingError) can't adapt 'INSERT INTO cnn_hot_stocks (datetime, list, ticker, price, change, "pctChange") VALUES (%(datetime)s, %(list)s, %(ticker)s, %(price)s, %(change)s, %(pctChange)s)' {'price': Decimal('7.94'), 'list': 'active', 'datetime': datetime.datetime(2012, 6, 23, 11, 45, 1, 544361), 'pctChange': u'+1.53%', 'ticker': u'BAC', 'change': Decimal('0.12')} 
```

使用 sqlite 引擎时插入调用效果很好，但我想使用 pgsql 来利用本机 Decimal 类型来保持财务数据正确。我复制了脚本，只是将数据库引擎更改为我的 postgresql 服务器。对于这个 SQLalchemy 新手来说，任何关于如何解决这个错误的建议都将不胜感激......我想我对这个问题很感兴趣！提前致谢！

以下是我的相关代码段和表格说明：

```
dbstring = "postgresql://postgres:postgres@localhost:5432/algo"
db = create_engine(dbstring)
db.echo = True  # Try changing this to True and see what happens
metadata = MetaData(db)

cnn_hot_stocks = Table('cnn_hot_stocks', metadata, autoload=True)

i = cnn_hot_stocks.insert() # running log from cnn hot stocks web-site

def scrape_data():
    try:
            html = urllib2.urlopen('http://money.cnn.com/data/hotstocks/').read()
            markup, errors = tidy_document(html)
            soup = BeautifulSoup(markup,)
    except Exception as e:
            pass
    list_map = { 2 : 'active',
                 3 : 'gainer',
                 4 : 'loser'
               }
    # Iterate over 3 tables on CNN hot stock web-site
    for x in range(2, 5):
            table = soup('table')[x]
            for row in table.findAll('tr')[1:]:
                    timestamp = datetime.now()
                    col = row.findAll('td')
                    ticker = col[0].a.string
                    price = Decimal(col[1].span.string)
                    change = Decimal(col[2].span.span.string)
                    pctChange = col[3].span.span.string
                    log_data = {'datetime'  : timestamp,
                                'list'      : list_map[x],
                                'ticker'    : ticker,
                                'price'     : price,
                                'change'    : change,
                                'pctChange' : pctChange
                               }
                    print log_data
                    # Commit to DB
                    i.execute(log_data) 
```

桌子：

```
cnn_hot_stocks = Table('cnn_hot_stocks', metadata, # log of stocks data on cnn hot stocks lists
            Column('datetime', DateTime, primary_key=True),
            Column('list', String), # loser/gainer/active
            Column('ticker', String),
            Column('price', Numeric),
            Column('change', Numeric),
            Column('pctChange', String),
            ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T03:54:03.097

我对文档的阅读是您必须使用`numeric`而不是`decimal.`

PostgreSQL 没有命名类型`decimal`（它是数字的别名，但不是一个功能非常全面的类型），并且 SQL Alchemy 似乎期望`numeric`它可以用作抽象目的的类型。

# c# - OutOfMemoryException with big collection and OrderBy?

> ID：11172242
> 
> 赞同：1
> 
> 时间：2012-06-23T19:11:05.017
> 
> 标签：c#, .net, out-of-memory

i have a collection `trends` with about 30kk elements. When i am trying execute following code in linqpad

```
trends.Take(count).Dump(); 
```

it works ok.

But if i add sort:

```
 trends.OrderByDescending(x => x.Item2).Take(count).Dump(); 
```

I get System.OutOfMemoryException

What i am doing wrong?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T19:13:48.423

`OrderByDescending` (or `OrderBy`) materializes the whole sequence when you try to fetch the first element - it has to, as otherwise you can't possibly know the first element. It has to make a *copy* of the sequence (typically just a bunch of references, of course) in order to sort, so if the original sequence is an in-memory collection, you end up with two copies of it. Presumably you don't have enough memory for that.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-23T19:26:30.280

You don't have to sort the whole collection just take top `count` elements from it. Here is a solution for this [https://codereview.stackexchange.com/a/9777/11651](https://codereview.stackexchange.com/a/9777/11651).

The key point from this answer is `It doesn't require all items to be kept in memory(for sorting)`

Again from comments of the answer in the link:

> The idea is: You can find the Max(or Min) item of a List in O(n) time. if you extend this idea to m item(5 in the question), you can get top(or buttom) m items faster then sorting the list(just in one pass on the list + the cost of keeping 5 sorted items)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T20:05:55.940

Here is another extension method that may work better than the original LINQ (e.g. it shouldn't blow up for a small number of selected items). Like L.B.'s solution it should be O(n) and doesn't keep all items in memory:

```
public static class Enumerables
{
    public static IEnumerable<T> TopN<T, TV>(this IEnumerable<T> value, Func<T, TV> selector, Int32 count, IComparer<TV> comparer)
    {
        var qCount = 0;
        var queue = new SortedList<TV, List<T>>(count, comparer);
        foreach (var val in value)
        {
            var currTv = selector(val);
            if (qCount >= count && comparer.Compare(currTv, queue.Keys[0]) <= 0) continue;
            if (qCount == count)
            {
                var list = queue.Values[0];
                if (list.Count == 1)
                    queue.RemoveAt(0);
                else
                    list.RemoveAt(0);
                qCount--;
            }
            if (queue.ContainsKey(currTv))
                queue[currTv].Add(val);
            else
                queue.Add(currTv, new List<T> {val});
            qCount++;
        }
        return queue.SelectMany(kvp => kvp.Value);
    }

    public static IEnumerable<T> TopN<T, TV>(this IEnumerable<T> value, Func<T, TV> selector, Int32 count)
    {
        return value.TopN(selector, count, Comparer<TV>.Default);
    }

    public static IEnumerable<T> BottomN<T, TV>(this IEnumerable<T> value, Func<T, TV> selector, Int32 count, IComparer<TV> comparer)
    {
        return value.TopN(selector, count, new ReverseComparer<TV>(comparer));
    }

    public static IEnumerable<T> BottomN<T, TV>(this IEnumerable<T> value, Func<T, TV> selector, Int32 count)
    {
        return value.BottomN(selector, count, Comparer<TV>.Default);
    }
}

// Helper class
public class ReverseComparer<T> : IComparer<T>
{
    private readonly IComparer<T> _comparer;

    public int Compare(T x, T y)
    {
        return -1*_comparer.Compare(x, y);
    }

    public ReverseComparer()
        : this(Comparer<T>.Default)
    { }

    public ReverseComparer(IComparer<T> comparer)
    {
        if (comparer == null) throw new ArgumentNullException("comparer");
        _comparer = comparer;
    }
} 
```

And some tests:

```
[TestFixture]
public class EnumerablesTests
{
    [Test]
    public void TestTopN()
    {
        var input = new[] { 1, 2, 8, 3, 6 };
        var output = input.TopN(n => n, 3).ToList();
        Assert.AreEqual(3, output.Count);
        Assert.IsTrue(output.Contains(8));
        Assert.IsTrue(output.Contains(6));
        Assert.IsTrue(output.Contains(3));
    }

    [Test]
    public void TestBottomN()
    {
        var input = new[] { 1, 2, 8, 3, 6 };
        var output = input.BottomN(n => n, 3).ToList();
        Assert.AreEqual(3, output.Count);
        Assert.IsTrue(output.Contains(1));
        Assert.IsTrue(output.Contains(2));
        Assert.IsTrue(output.Contains(3));
    }

    [Test]
    public void TestTopNDupes()
    {
        var input = new[] { 1, 2, 8, 8, 3, 6 };
        var output = input.TopN(n => n, 3).ToList();
        Assert.AreEqual(3, output.Count);
        Assert.IsTrue(output.Contains(8));
        Assert.IsTrue(output.Contains(6));
        Assert.IsFalse(output.Contains(3));
    }

    [Test]
    public void TestBottomNDupes()
    {
        var input = new[] { 1, 1, 2, 8, 3, 6 };
        var output = input.BottomN(n => n, 3).ToList();
        Assert.AreEqual(3, output.Count);
        Assert.IsTrue(output.Contains(1));
        Assert.IsTrue(output.Contains(2));
        Assert.IsFalse(output.Contains(3));
    }
} 
```

# python - 在python中复制数组并操作一个

> ID：11172250
> 
> 赞同：0
> 
> 时间：2012-06-23T19:12:43.377
> 
> 标签：python, multidimensional-array, python-2.7

我正在加载一个文件“data.imputation”，它是 2 维变量`'x'`。变量`'y'`是`'x'`. `'y'`我从（y 是 2D）弹出第一个数组。为什么变化反映在`x`? （第一个数组 from`'x'`也被弹出）

```
ip = open('data.meanimputation','r')
x = pickle.load(ip)
y = x
y.pop(0) 
```

一开始，`len(x) == len(y)`. 即使在之后`y.pop(0)`，`len(x) == len(y)`。这是为什么？我该如何避免呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T19:19:27.187

使用`y = x[:]`而不是`y = x`. `y = x`表示两者`y`，`x`现在都指向同一个对象。

看看这个例子：

```
>>> x=[1,2,3,4]
>>> y=x
>>> y is x
True          # it means both y and x are just references to a same object [1,2,3,4], so changing either of y or x will affect [1,2,3,4]
>>> y=x[:]     # this makes a copy of x and assigns that copy to y,
>>> y is x     # y & x now point to different object, so changing one will not affect the other.
False 
```

如果 x 是一个列表是列表的列表，那么`[:]`是没有用的：

```
>>> x= [[1,2],[4,5]]
>>> y=x[:]   #it makes a shallow copy,i.e if the objects inside it are mutable then it just copies their reference to the y
>>> y is x
False         # now though y and x are not same object but the object contained in them are same 
>>> y[0].append(99)
>>> x
[[1, 2, 99], [4, 5]]
>>> y
[[1, 2, 99], [4, 5]]
>>> y[0] is x[0]
True  #see both point to the same object 
```

在这种情况下，您应该使用`copy`模块的`deepcopy()`功能，它会制作对象的非浅拷贝。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T19:15:08.987

`y = x`不复制任何东西。它将名称绑定`y`到 已引用的同一对象`x`。对裸名的赋值永远不会在 Python 中复制任何内容。

如果你想复制一个对象，你需要明确地复制它，使用你试图复制的对象可用的任何方法。你不说对象`x`是什么类型的，所以没有办法说你可以如何复制它，但是该`copy`模块提供了一些适用于多种类型的功能。另请参阅[此答案](https://stackoverflow.com/questions/10844493/dataframe-apply-in-python-pandas-alters-both-original-and-duplicate-dataframes/10844760#10844760)。

# php - XML 与 mySQL 和 DOM

> ID：11172251
> 
> 赞同：1
> 
> 时间：2012-06-23T19:12:52.220
> 
> 标签：php, mysql, xml, dom

如何获取下面的代码以输出我定义的节点名称？截至目前，它基于 SQL 表的列名创建节点。我想同时定义列和节点。另外，我如何对其进行编码，以便当有人将数据插入我的表时，它将该数据附加到插入的数据中？例如：

```
Input data: "davidjmorin"
Data inserted: "http://someurl.com/davidjmorin" 
```

这是我原始问题的代码：

```
<?
//header('Content-type: text/xml');

$link = mysql_connect('localhost','root','IhaveAlLthEanSwers2012!');
mysql_select_db('bb_links');

$sql = "Select * from `links`";
$run = mysql_query($sql, $link);

if( $run && mysql_num_rows( $run ) ) {
$doc = new DOMDocument( '1.0' );
$doc->formatOutput = true;
$doc->preserveWhiteSpace = true;

$root = $doc->createElement( 'data' );
$doc->appendChild( $root );

while( ( $fetch = mysql_fetch_assoc( $run ) )!== false ) {
    $node = $doc->createElement( 'channel' );
    $root->appendChild( $node );

    foreach( $fetch as $key => $value ) {
        createNodes( $key, $value, $doc, $node );
    }
}
$doc->save("thelinks.xml");
}
//$node = "channel";
function createNodes( $key, $value, $doc, $node ) {
$key = $doc->createElement( $key );
$node->appendChild( $key );
$key->appendChild( $doc->createTextNode( $value ) );
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T19:22:12.270

我不完全确定您在第一个问题中要问什么，但是对于您的第二个问题（实际上应该在这里拆分为第二个问题），我认为您要问的只是基本的[string concatenation](http://php.net/manual/en/language.operators.string.php)。例如，

```
<?php
    $url_name = "http://www.example.com/";
    $data = $_POST['name']; //davidjmorin
    $data_to_insert = $url_name . $data;
    //Insert data into database
?> 
```

另外，请不要将`mysql_*`函数用于新代码。它们不再被维护，社区已经开始[弃用过程](http://news.php.net/php.internals/53799)（见[红框](http://uk.php.net/manual/en/function.mysql-connect.php)）。相反，您应该了解[准备好的语句](http://en.wikipedia.org/wiki/Prepared_statement)并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli)。如果你不能决定哪个，[这篇文章](http://php.net/manual/en/mysqlinfo.api.choosing.php)会帮助你。如果您想学习，[这是一个很好的 PDO 教程](http://www.php.net/manual/en/pdo.connections.php)。

我是认真的。不要使用这些功能。*完全没有。*

# java - 窗口不显示文件中的文本

> ID：11172253
> 
> 赞同：0
> 
> 时间：2012-06-23T19:13:26.187
> 
> 标签：java

我正在尝试打开一个窗口并让它显示文件中的文本。但是，当我运行它时，我只是得到一个空白窗口。这是窗口的代码 - 我完全没有从 eclipse 中得到任何错误。

```
package presentation;

import java.awt.BorderLayout;
import java.awt.EventQueue;

import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.border.EmptyBorder;

import domain.Items;
import services.exceptions.ItemNotFoundException;
import services.itemservice.*;

public class ShowAllInventory extends JFrame {

    /**
     * 
     */
    private static final long serialVersionUID = -4498395613773129897L;
    private JPanel contentPane;

    /**
     * Launch the application.
     */
    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            public void run() {
                try {
                    ShowAllInventory frame = new ShowAllInventory();
                    frame.setVisible(true);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
    }

    /**
     * Create the window frame.
     */
    public ShowAllInventory() throws ItemNotFoundException {
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setBounds(100, 100, 450, 300);
        contentPane = new JPanel();
        contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
        contentPane.setLayout(new BorderLayout(0, 0));
        setContentPane(contentPane);

        /**
         * Load the inventory
         */

        IItemsService service = new ItemsServiceImpl();
        try {
            Items items = service.getItems();
        } catch (ItemNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            System.out.println ("Items Not Found");
        }

    }

} 
```

这是代码正在调用的接口的代码 -

```
 public Items getItems () throws ItemNotFoundException;

} 
```

这是实现...

```
/**
 * Getting Items from the database
 * @return 
 * @throws ItemNotFoundException
 */
@Override
public Items getItems() throws ItemNotFoundException {

    Items items = (Items) null;
    try {
        ObjectInputStream input = new
                ObjectInputStream (new FileInputStream("itemdatabase"));
        items = (Items)input.readObject();
        input.close();
    } catch (IOException ioe) {
        System.out.println ("IOException");
    } catch (ClassNotFoundException e) {
        e.printStackTrace();
    }       
    return items;       
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T19:40:52.240

我不知道您是否`IItemsService`可以正确加载文件。但很可能您会得到一个空白窗口，因为在您的代码中，我认为您忘记添加一个组件来显示项目。如果您的`Items`作品是`List`. 您可以使用 a`JList`来显示它们。

```
Item[] items = ...// use your Items to populate Item to an array
JList itemList = new JList(items);

JScrollPane scrollPane = new JScrollPane(itemList);
scrollPane.setPreferredSize(new Dimension(300, 100)); //put your preferred size here

contentPane.add(scrollPane); 
```

恕我直言，我认为您不应该扔`ItemNotFoundException`，因为找不到任何物品应该是正常情况。`FileNotFoundException`应该是被扔到这里的那个。

* * *

**更新** 如果你想使用`JTextField`或者`JTextArea`你必须这样：

```
...
Items items = service.getItems();
...

String itemContent = items.toString(); // you have to put meaningful information from class Items to this String
JTextArea itemDisplay = new JTextArea(itemContent);
// JTextField itemDisplay = new JTextField(itemContent);

JScrollPane scrollPane = new JScrollPane(textArea);
scrollPane.setPreferredSize(new Dimension(300, 100)); //put your preferred size here

contentPane.add(scrollPane); 
```

# .net - 是否可以从它的进程二进制转储中恢复可执行文件，它有多难？

> ID：11172255
> 
> 赞同：0
> 
> 时间：2012-06-23T19:13:41.533
> 
> 标签：.net, protection

我想为我的服务器提供某种保护，以防有人访问服务器并试图窃取服务器可执行文件。因此，如果黑客未能找到真正的服务器可执行文件，他将转储服务器进程。

保护 像这样：
我将有一个服务器加载器应用程序，服务器本身编译为 .net 程序集
服务器机器几乎不会有这个程序集，我会将它写入 CD-R 并在加载程序应用程序启动时插入它，它读取程序集字节从 CD-R，然后从该程序集加载并创建所需的类，这将导致主服务器应用程序启动。
然后我从驱动器中取出 CD-R。

```
byte[] raw_assembly = File.ReadAllBytes("E:\\server.dll");
Assembly ass = Assembly.Load(raw_assembly);
Type myclass = ass.GetType("Server.Form1");
object o = Activator.CreateInstance(myclass);
Application.Run((Form)o);
raw_assembly.Clear(); //pseudo Clear... no matter how, just delete from memory 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T16:39:52.597

尽管这是一个奇怪的问题，但您现有的代码几乎没问题。您只需将程序集从`byte[]`. 但是，一旦它们被加载，这些字节必须存在于内存中，这样应用程序才能运行。您始终可以将程序集`byte[]`从 AppDomain 中取出。您不能从 RAM 中删除程序集的字节。然而，将 byte[] 加载到内存中并且文件系统上没有实际的 .dll 确实更安全。有人仍然可以从 RAM 中取出字节，但这会更困难、更复杂。没有什么是 100% 安全的，但你当然可以让黑客很难做到。

如果您的程序集中的业务逻辑非常敏感，以至于您不希望任何人掌握它，您可以考虑将它放在公司 LAN 内的一台机器上，在防火墙后面，并在DMZ 接收来自外界的请求，然后将他的请求转发到局域网中的逻辑服务器。这将是黑客必须访问的另外一台机器，并且在 LAN 内要困难一些（假设知道他们在做什么的人设置了防火墙）。

# flash-builder - Flash Builder：在 Flex Mobile App 中使用 AS3 获取 HTTPService 请求的结果

> ID：11172262
> 
> 赞同：0
> 
> 时间：2012-06-23T19:14:10.810
> 
> 标签：flash-builder, httpservice, resultevent

真的让我发疯以获得 HTTPService 对象的结果。当对服务器的调用完成时，将触发一个结果事件。一切正常，服务器可以无错误地提供 XML 数据或 JSON 数据。但是如何处理事件对象“ResultEvent”，我不清楚。

让我给你看一些代码：

```
<fx:Declarations>
    <s:HTTPService id="hsConfig"
       url="{IR_BASE_URL}/getconfig.json"
       result="onGetConfig(event)"
       fault="onGetConfigError(event)"
       method="POST" 
       showBusyCursor="false" 
       resultFormat="array"
       makeObjectsBindable="true"
      >
    <s:request xmlns="">
        <post1>Hello</post1>
        <post2>World</post2>
    </s:request>    
    </s:HTTPService>
</fx:Declarations> 
```

然后是一些动作脚本：

```
protected function onGetConfig(e:ResultEvent):void
    {
        //var adata:XMLList = XML.(e.result);
        var data:Object = e.result,
        oo : HTTPService = (e.currentTarget as HTTPService);            

    trace( oo.lastResult );
        trace( e.result.lastResult );
        trace( data.cfg );
        trace( e.result.length );
        if( e.result.length )
        {
            trace( e.result[0].length );
        }

} 
```

服务器返回的xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<cfg>
    <param1>Hello</param1>
    <param2>World</param2>
</cfg> 
```

例如`trace( e.result.cfg )`引发名称不存在的错误。尝试了几件事并使用调试器查看属性 e.result 中的内容。我可以看到结果是一个带有一个元素 [0] 的 ArrayCollection，并且该元素是一个 ObjectProxy。

我在互联网上看到了一些“解决方案”，但所有这些都使用数据网格来显示结果，但这不是我想要的。我想像一个简单的数组或对象一样访问它。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T20:44:47.033

尝试更改`resultFormat="array"`为`resultFormat="e4x"`

现在`e.result.param1`应该返回“Hello”并且`e.result.param2`应该返回“World” 您可以将它们粘贴在数组、自定义类中或将其绑定到视图

# c - void** 作为函数中的参数有什么用？

> ID：11172263
> 
> 赞同：0
> 
> 时间：2012-06-23T19:14:11.073
> 
> 标签：c, pointers, malloc

我必须使用以下签名为`malloc`调用实现一个包装器：`mymalloc`

```
void mymalloc(int size, void ** ptr) 
```

是`void**`必需的，以便在主程序中不需要类型转换，并且正确指针（没有类型转换）的所有权保留在`main()`.

```
void mymalloc(int size, void ** ptr)
{
    *ptr = malloc(size) ;
}
main()
{
    int *x;
    mymalloc(4,&x); // do we need to type-cast it again?
                    // How does the pointer mechanism work here?
} 
```

现在，传递的指针是否需要再次进行类型转换，还是会隐式地进行类型转换？

我不明白这是如何工作的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T19:22:53.617

`malloc`返回一个`void*`。对于你的函数，用户应该首先创建他们自己的局部`void*`变量，然后给你一个*指向*它的指针；然后预计您的函数将填充该变量。因此，您在签名中有一个额外的指针，在您的函数中有一个取消引用，在客户端代码中有一个地址运算符。

原型模式是这样的：

```
void do_work_and_populate(T * result)
{
     *result = the_fruits_of_my_labour;
}

int main()
{
    T data;                      // uninitialized!
    do_work_and_populate(&data); // pass address of destination
    // now "data" is ready
} 
```

对于您的使用示例，替代品`T = void *`，您的劳动成果是`malloc`（加上检查）的结果。

但是，请注意 an`int*`与 a 不同`void*`，因此您不能仅将`x`off 的地址作为 void 指针的地址传递。相反，您需要：

```
void * p;
my_malloc(&p);
int * x = p;  // conversion is OK 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T19:20:04.677

与 相反`void *`，该类型`void **`不是通用指针类型，因此如果类型不同，则需要在赋值之前进行强制转换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T19:23:29.700

```
void ** ptr
```

这里，“ptr”是指向指针的指针，可以被视为指向指针数组的指针。由于您的结果存储在那里（mymalloc 没有返回任何内容），您需要澄清您希望分配到“ptr”中的内容。参数“大小”不是一个充分的描述。

# ruby-on-rails - Postgres - “pg” gem 的最新版本 0.14.0 给出错误

> ID：11172264
> 
> 赞同：7
> 
> 时间：2012-06-23T19:14:22.703
> 
> 标签：ruby-on-rails, postgresql, pg

我更新了包含**pg** gem 的捆绑程序，但出现错误

```
An error occured while installing pg (0.14.0), and Bundler cannot continue.
Make sure that `gem install pg -v '0.14.0'` succeeds before bundling. 
```

我在**ruby​​gems.org**上查看了这个 gem ，今天（6 月 23 日）发布了这个版本。我不知道为什么，但该版本无法正常工作并返回上面的错误。

解决方案是设置特定版本 - 在这种情况下

**宝石“pg”，“〜> 0.13.2”**

有同样问题的人吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-06T13:54:03.280

您需要安装 postgresql-server-dev-XY 来构建服务器端扩展或 libpq-dev 来构建客户端应用程序。

**您不需要在 Gemfile 中指定特定版本的 PG**

**所以 ：**

```
sudo apt install ruby-dev libpq-dev build-essential 
```

# jquery - 使用 selected.js 进行“全选”和“全部删除”

> ID：11172269
> 
> 赞同：28
> 
> 时间：2012-06-23T19:15:32.323
> 
> 标签：jquery, jquery-chosen

对于选择菜单插件[selected.js](http://github.com/harvesthq/chosen)，是否有一种既定方法可以将“选择列表中的所有项目”或“删除列表中的所有项目”功能添加到多选输入？在主分支中还是在其中一个分支中？或者以前有人做过这个有一些提示吗？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-06-23T19:36:02.170

它应该很简单，首先以“正常”的方式进行：

```
$('.my-select-all').click(function(){
    $('#my_select option').prop('selected', true); // Selects all options
}); 
```

然后触发`liszt:updated`事件来更新选择的小部件，所以整个事情看起来像这样：

* * *

**更新**：对于那些不[向下滚动并检查其他答案](https://stackoverflow.com/a/18376240/398242)的人，该事件称为`chosen:updated`2013 年 8 月发布的版本。如有疑问，请参阅[文档。](http://harvesthq.github.io/chosen/)

* * *

```
<select multiple>
  <option value="1">1</option>
  <option value="2">2</option>
  <option value="3">3</option>
</select>
<button class="select">Select all</button>
<button class="deselect">Deselect all</button> 
```

```
$('select').chosen();
$('.select').click(function(){
    $('option').prop('selected', true);
    $('select').trigger('liszt:updated');
});
$('.deselect').click(function(){
    $('option').prop('selected', false);
    $('select').trigger('liszt:updated');
});​ 
```

工作演示（js代码在底部）：http: [//jsfiddle.net/C7LnL/1/](http://jsfiddle.net/C7LnL/1/)

更紧凑的版本：http: [//jsfiddle.net/C7LnL/2/](http://jsfiddle.net/C7LnL/2/)

更严格的版本：http: [//jsfiddle.net/C7LnL/3/](http://jsfiddle.net/C7LnL/3/)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-01-14T05:36:31.770

试试这个代码，它将 100% 工作

```
// Deselect All
$('#my_select_box option:selected').removeAttr('selected');
$('#my_select_box').trigger('chosen:updated');

// Select All
$('#my_select_box option').prop('selected', true);  
$('#my_select_box').trigger('chosen:updated'); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-09-13T11:31:56.897

我错过了类似的功能。这会在弹出列表的顶部添加两个链接 All 和 None（可通过选项 uncheck_all_text 和 select_all_text 自定义的文本）。如果您使用分组，您可能需要编辑它。

```
$("select").on("chosen:showing_dropdown", function(evnt, params) {
    var chosen = params.chosen,
        $dropdown = $(chosen.dropdown),
        $field = $(chosen.form_field);
    if( !chosen.__customButtonsInitilized ) {
        chosen.__customButtonsInitilized = true;
        var contained = function( el ) {
            var container = document.createElement("div");
            container.appendChild(el);
            return container;
        }
        var width = $dropdown.width();
        var opts = chosen.options || {},
            showBtnsTresshold = opts.disable_select_all_none_buttons_tresshold || 0;
            optionsCount = $field.children().length,
            selectAllText = opts.select_all_text || 'All',
            selectNoneText = opts.uncheck_all_text || 'None';
        if( chosen.is_multiple && optionsCount >= showBtnsTresshold ) {
            var selectAllEl = document.createElement("a"),
                selectAllElContainer = contained(selectAllEl),
                selectNoneEl = document.createElement("a"),
                selectNoneElContainer = contained(selectNoneEl);
            selectAllEl.appendChild( document.createTextNode( selectAllText ) );
            selectNoneEl.appendChild( document.createTextNode( selectNoneText ) );
            $dropdown.prepend("<div class='ui-chosen-spcialbuttons-foot' style='clear:both;border-bottom: 1px solid black;'></div>");
            $dropdown.prepend(selectNoneElContainer);
            $dropdown.prepend(selectAllElContainer);
            var $selectAllEl = $(selectAllEl),
                $selectAllElContainer = $(selectAllElContainer),
                $selectNoneEl = $(selectNoneEl),
                $selectNoneElContainer = $(selectNoneElContainer);
            var reservedSpacePerComp = (width - 25) / 2;
            $selectNoneElContainer.addClass("ui-chosen-selectNoneBtnContainer")
                .css("float", "right").css("padding", "5px 8px 5px 0px")
                .css("max-width", reservedSpacePerComp+"px")
                .css("max-height", "15px").css("overflow", "hidden");
            $selectAllElContainer.addClass("ui-chosen-selectAllBtnContainer")
                .css("float", "left").css("padding", "5px 5px 5px 7px")
                .css("max-width", reservedSpacePerComp+"px")
                .css("max-height", "15px").css("overflow", "hidden");
            $selectAllEl.on("click", function(e) {
                e.preventDefault();
                $field.children().prop('selected', true);
                $field.trigger('chosen:updated');
                return false;
            });
            $selectNoneEl.on("click", function(e) {
                e.preventDefault();
                $field.children().prop('selected', false);
                $field.trigger('chosen:updated');
                return false;
            });
        }
    }
}); 
```

我还使用 CSS 来限制所选选择的高度，以防有几十个：

```
 .chosen-choices {
        max-height: 150px;
    } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-06-19T05:09:30.093

直接清除选择的方式：

```
$('select').val('');
$('select').val('').trigger("chosen:updated"); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-02-28T20:58:01.530

我意识到这个问题已经很老了，但是我遇到了一个类似的问题并想分享我的结果，因为我喜欢它的简单性：

我创建了两个按钮（全部和无）并将它们左右浮动在包含我的选择下拉列表的 div 中。按钮看起来像这样：

```
<button style="float:left;" class="btn" id="iAll">All</button>
<button style="float:right;" class="btn" id="iNone">None</button> 
```

然后我添加了一些 Jquery 来处理按钮操作：

```
$('#iAll').on('click', function(e){
  e.preventDefault();
  $('#iSelect option').prop('selected', true).trigger('chosen:updated');
});

$('#iNone').on('click', function(e){
  e.preventDefault();
  $("#iSelect option:selected").removeAttr("selected").trigger('chosen:updated');
}); 
```

可能需要在布局方面进行一些清理，但它的功能非常强大，我想我会分享。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-02-25T10:56:17.260

```
$("#ctrlName option:selected").removeAttr("selected").trigger('liszt:updated'); 
```

清除所有

```
$("#ctrlName option").attr("selected","selected").trigger('liszt:updated'); 
```

全选

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2014-05-09T13:11:56.970

你应该试试这个：

```
$('#drpdwn').empty();
$('#drpdwn').trigger('chosen:updated'); 
```

# java - 哈希映射存储。打印方法未显示正确的输出

> ID：11172271
> 
> 赞同：1
> 
> 时间：2012-06-23T19:15:47.740
> 
> 标签：java, hashmap

我在网上查看过，但我无法解决我遇到的问题。我正在使用 hashMap 创建员工商店，但我不确定是否应该像当前版本一样打印 toString() 或 theEntry.getKey()。使用 getKey() 方法时，我得到错误的输出，即：

********员工在公司。********** 员工姓名：James O' Carroll 员工 ID：James O' Carroll 电子邮件：James O' Carroll****

 ****正如您在 MainApp 中看到的，我想要 Store.add(new Employee ("James O' Carroll", 18,"hotmail.com")); 成为输出。

我将粘贴我的代码：

```
//MainApp.
public class MainApp
{

    public static void main(String[] args)
    {
        new MainApp().start();

    }
    public void start()
    {
        EmployeeStore Store = new EmployeeStore();
        Store.add(new Employee ("James O' Carroll", 18,"hotmail.com"));
        Store.print();

    }

}

//Employee
//Imports:

//********************************************************************
//Employee Class.
public class Employee
{
//Variables.
    private String employeeName;
    private int employeeId;
    private String employeeEmail;
//********************************************************************  
//Constructor.
    public Employee(String employeeName, int employeeId, String employeeEmail) 
    {
        this.employeeName = employeeName;
        this.employeeId = employeeId;
        this.employeeEmail = employeeEmail;
    }
//********************************************************************
//Getters.
    public String getEmployeeEmail() {
        return employeeEmail;
    }
    public void setEmployeeEmail(String employeeEmail) {
        this.employeeEmail = employeeEmail;
    }
    public String getEmployeeName() {
        return employeeName;
    }
    public int getEmployeeId() {
        return employeeId;
    }
//********************************************************************
//toString method.
    public String toString() {
        return "Employee [employeeName=" + employeeName + ", employeeId="
                + employeeId + ", employeeEmail=" + employeeEmail + "]";
    }
//********************************************************************

}

//EmployeeStore.
//Imports.
import java.util.HashMap;
//********************************************************************
import java.util.Map;

public class EmployeeStore 
{
    HashMap<String, Employee> map;

//Constructor.  
    public EmployeeStore()
    {
        map = new HashMap<String,Employee>();
    }
//********************************************************************
//Hashmap Methods.
//Add to the Hashmap : Employee.
    public void add(Employee obj)
    {

        map.put(obj.getEmployeeName(), obj);
    }
//********************************************************************
//Remove from the Hashmap : Employee.
    public void remove(String key)
    {
      //Remove the Employee by name.
        map.remove(key);
    }
//********************************************************************
//Print the Hashmap : Employee. 
    public void print()
    {
        System.out.println("\n********Employee's in the Company.********");
        for(Map.Entry<String, Employee> theEntry : map.entrySet())
        {
            System.out.println("Employee Name:\t" + theEntry.getKey());
            System.out.println("Employee Id:\t" + theEntry.getKey());
            System.out.println("E-mail:\t "+ theEntry.getKey());

        }
    }

//********************************************************************  
//********************************************************************

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T19:19:47.373

这显然是错误的：

```
for(Map.Entry<String, Employee> theEntry : map.entrySet())
{
    System.out.println("Employee Name:\t" + theEntry.getKey());
    System.out.println("Employee Id:\t" + theEntry.getKey());
    System.out.println("E-mail:\t "+ theEntry.getKey());
} 
```

您打印了 3 次相同的值 - 怎么可能是姓名、ID*和*电子邮件地址？您正在从条目中打印*密钥*，该密钥始终是名称。您想要条目的*值*。

你要这个：

```
// This assumes you've renamed all the properties in Employee to be more
// sensible - there's no point in including the "employee" part - we already
// know we're calling a method on Employee
for (Employee employee : map.values())
{
    System.out.println("Employee Name:\t" + employee.getName());
    System.out.println("Employee Id:\t" + employee.getId());
    System.out.println("E-mail:\t "+ employee.getEmail());
} 
```

（或者当然只是打印`employee`。这取决于您希望输出是什么。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T19:20:44.463

您需要遍历地图的值。通过这样做，您将获得`Employee`实例作为回报，并且可以简单地定义您的`print()`方法，如下所示，

```
public void print(){
    for(Employee e : map.values()){
        System.out.println(e);
    }
} 
```

请注意，您不需要显式调用`toString()`，因为`println`会自动为您执行此操作。****

# seo - 替代数据而不是闪存

> ID：11172272
> 
> 赞同：0
> 
> 时间：2012-06-23T19:15:55.270
> 
> 标签：seo, swfobject

我有一个 Flash 文件，它将 PDF 文件显示为杂志，因为该杂志是希伯来语的，谷歌读得不好。

为什么要为搜索引擎爬虫显示原始文本而不是 Flash？我听说你可以使用 SWFObject 来做到这一点，对吗？如果是这样，如何？

我需要它对 SEO 友好...

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T19:24:24.080

SWFObject 仍然是 flash，所以你并没有真正通过使用它来改变情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T19:24:24.593

在 html 中重新创建 pdf 文件；将 .html 文件替换为 .pdf 文件。如果您只是通过 Ajax 加载内容，虽然有非常好的方法可以做到这一点。

# java - android中的SOAP地址

> ID：11172276
> 
> 赞同：0
> 
> 时间：2012-06-23T19:16:28.897
> 
> 标签：java, android, web-services

我正在使用 java 开发一个 android 移动应用程序。我正在尝试使用 Web 服务从位于我的台式计算机上的 SQL 服务器检索信息到移动应用程序。我在 Visual Studio 中创建了 Web 服务。运行移动应用程序时出现以下错误。

```
java.net.UnknownHostException 
```

我知道我指定的 SOAP 地址有问题。我知道 SOAP 地址是我在 Visual Studio 中运行 Web 服务时获得的 URL。因此，当我运行 Web 服务时，URL 是：

```
 http://localhost:54714/WebSite1/Service.asmx 
```

如何指定 SOAP 地址？这是一些代码：

```
private static final String SOAP_ACTION = "http://tempuri.org/findContact";

private static final String OPERATION_NAME = "findContact";// your webservice web metod name

private static final String WSDL_TARGET_NAMESPACE = "http://tempuri.org/";

//What do I have to change in the URL here?

private static final String SOAP_ADDRESS = "http://localhost:54714/WebSite1/Service.asmx"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T19:19:23.863

http://loacl host:54714 不适用于设备应该是有效的 IP 地址

如果服务器在您运行模拟器的系统上，则可以使用

IP 地址 10.0.2.2 见[链接](http://developer.android.com/tools/devices/emulator.html#networkaddresses)

# c - 在不同的线程中制作了多少静态变量/函数的副本？

> ID：11172277
> 
> 赞同：0
> 
> 时间：2012-06-23T19:16:34.957
> 
> 标签：c, static

线程/进程的堆栈是静态函数/方法的单独副本还是共享的。如果它在保存/存储的位置共享，以及该机制在 C 中如何工作。

Rgds，软软的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T19:24:45.363

静态函数用于限制文件内函数的范围。因为它是一个函数（代码），所以它进入文本（代码）段。

您可以从以下文章中详细了解

[http://duartes.org/gustavo/blog/post/anatomy-of-a-program-in-memory](http://duartes.org/gustavo/blog/post/anatomy-of-a-program-in-memory)

# javascript - jquery 手风琴在关闭后仍然处于选中状态

> ID：11172278
> 
> 赞同：1
> 
> 时间：2012-06-23T19:16:57.853
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-accordion

我有一个 jQuery 可排序手风琴。当我将鼠标悬停在每个手风琴标题上时，它们都会适当地切换到突出显示/选定的颜色状态。当我单击标题以打开手风琴的该部分然后再次单击以关闭手风琴的该部分时，突出显示/选定的颜色状态仍然存在。

所以如果手风琴有 10 个部分，然后我打开和关闭其中的 3 个，这 3 个的颜色与手风琴的其余部分不同。这提供了一个糟糕的用户界面。任何人都知道为什么会发生这种情况以及如何解决它？

编辑：

很抱歉没有提供一个开始的例子，我在 NDA 下工作，所以我不能直接提供它们。我整理了一个可分享的例子来说明正在发生的事情。

你可以在这里看到它发生：http: [//inadaydevelopment.com/StackOverflow/AccordionStateProblem/jqueryexample.html](http://inadaydevelopment.com/StackOverflow/AccordionStateProblem/jqueryexample.html)

如果您将鼠标悬停在它们上方，它们会变为橙色（正确）。如果您单击一个将其打开，它仍为橙色（正确）。如果您关闭它并且不再悬停，它仍然保持橙色而不是回到蓝色（错误）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T21:35:13.890

以下将清除导致问题的“ui-state-focus”类：

```
$('.ui-accordion .group > h3').mouseleave(function(){
    $(this).removeClass('ui-state-focus')
}) 
```

这是在浏览器控制台中针对演示测试的。

编辑：选择器可以简单地缩小到：

```
$('.ui-accordion-header') 
```

# multithreading - 限制多线程上的对象分配

> ID：11172282
> 
> 赞同：4
> 
> 时间：2012-06-23T19:17:54.433
> 
> 标签：multithreading, concurrency

我有一个应用程序，它检索和缓存客户端查询的结果，并将结果从缓存发送到客户端。

我对可以在任何时候缓存的项目数量进行了限制，并且跟踪此限制已大大降低了处理大量并发请求时的应用程序性能。有没有更好的方法来解决这个问题而不会经常锁定，这可能会提高性能？

编辑：我已经采用了 CAS 方法，它似乎工作得很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T00:33:18.220

首先，不要使用锁，而是使用原子递减和比较和交换来操作您的计数器。语法因您的编译器而异；在 GCC 中，您可能会执行以下操作：

```
long remaining_cache_slots;

void release() {
  __sync_add_and_fetch(&remaining_cache_slots, 1);
}

// Returns false if we've hit our cache limit
bool acquire() {
  long prev_value, new_value;
  do {
    prev_value = remaining_cache_slots;
    if (prev_value <= 0) return false;
    new_value = prev_value - 1;
  } while(!__sync_bool_compare_and_swap(&remaining_cache_slots, prev_value, new_value));
  return true;
} 
```

这应该有助于减少争用的窗口。但是，您仍然会在整个地方弹跳该缓存行，这在高请求率下会严重损害您的性能。

如果您愿意接受一定量的浪费（即，允许缓存结果的数量 - 或者更确切地说，待处理的响应 - 略低于限制），您还有其他一些选择。一种是使缓存线程本地化（如果可能在您的设计中）。另一个是让每个线程保留一个“缓存令牌”池以供使用。

我保留缓存令牌池的意思是每个线程可以提前保留将 N 个条目插入缓存的权利。当该线程从缓存中删除一个条目时，它会将其添加到其令牌集中；如果它用完了令牌，它会尝试从全局池中获取它们，如果它有太多，它会放回一些。代码可能看起来有点像这样：

```
long global_cache_token_pool;
__thread long thread_local_token_pool = 0;

// Release 10 tokens to the global pool when we go over 20
// The maximum waste for this scheme is 20 * nthreads
#define THREAD_TOKEN_POOL_HIGHWATER 20
#define THREAD_TOKEN_POOL_RELEASECT 10

// If we run out, acquire 5 tokens from the global pool
#define THREAD_TOKEN_POOL_ACQUIRECT 5

void release() {
  thread_local_token_pool++;

  if (thread_local_token_pool > THREAD_TOKEN_POOL_HIGHWATER) {
    thread_local_token_pool -= THREAD_TOKEN_POOL_RELEASECT;
    __sync_fetch_and_add(&global_token_pool, THREAD_TOKEN_POOL_RELEASECT);
  }
}

bool acquire() {
  if (thread_local_token_pool > 0) {
    thread_local_token_pool--;
    return true;
  }

  long prev_val, new_val, acquired;
  do {
    prev_val = global_token_pool;
    acquired = std::min(THREAD_TOKEN_POOL_ACQUIRECT, prev_val);
    if (acquired <= 0) return false;

    new_val = prev_val - acquired;
  } while (!__sync_bool_compare_and_swap(&remaining_cache_slots, prev_value, new_value));

  thread_local_token_pool = acquired - 1;

  return true;
} 
```

像这样对请求进行批处理会降低线程访问共享数据的频率，从而减少争用和缓存流失的数量。但是，如前所述，它会使您的限制不太精确，因此需要仔细调整以获得正确的平衡。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T20:58:49.877

在`SendResults`中，处理结果后仅尝试更新`totalResultsCached`一次。这将最大限度地减少获取/释放锁所花费的时间。

```
void SendResults( int resultsToSend, Request *request )
{
    for (int i=0; i<resultsToSend; ++i)
    {
        send(request.remove())
    }

    lock totalResultsCached 
    totalResultsCached -= resultsToSend;
    unlock totalResultsCached 
} 
```

如果`resultsToSend`通常是 1，那么我的建议不会有太大的不同。

此外，在达到缓存限制后，可能会丢弃一些额外的请求`ResultCallback`，因为在发送每个请求后`SendResults`不会立即更新。`totalResultsCached`

# android - 尝试在 Android 4.0 设备上调试时应用程序失败并获得许可

> ID：11172285
> 
> 赞同：0
> 
> 时间：2012-06-23T19:18:16.633
> 
> 标签：android, debugging, versioning, remote-debugging

我已经为 Android 2.2（目标版本）编写了应用程序，我尝试在具有 Android 4.0.3 的设备上运行它，但它未能授予互联网连接权限。它在 Android 2.3 上运行没有问题。有没有办法在 A4.0 上运行该应用程序而不更改目标 SDK 版本？

我的`AndroidManifest.xml`：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="pl.niemier.allegro"
    android:versionCode="1"
    android:versionName="1.0" android:installLocation="auto">

    <uses-sdk android:minSdkVersion="8" android:targetSdkVersion="10"/>
    <uses-permission android:name="android.permission.INTERNET"/>

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" android:debuggable="true">
        <activity
            android:name=".MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name=".ShowAuctionActivity"></activity>
        <activity android:name=".SearchFormActivity"></activity>
        <activity android:name=".UserInfoActivity"></activity>
        <activity android:name=".ConfigPanelActivity"></activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T19:25:02.910

尝试在清单文件中添加 SDK 目标版本：

```
<uses-sdk android:minSdkVersion="8" /> 
```

请检查版本号是否正确。

我假设您已添加`<uses-permission android:name="android.permission.INTERNET" />`，因为它适用于 Android 2.3。

# c - C Compiler编译过程中的词法和句法分析是什么？

> ID：11172287
> 
> 赞同：5
> 
> 时间：2012-06-23T19:18:29.590
> 
> 标签：c, parsing, compilation, preprocessor, lexical-analysis

什么是编译过程中的词法和句法分析。预处理是否发生在词法和句法分析之后？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-23T20:03:05.660

考虑这段代码：

```
 int a = 10;
     if (a < 4)
     {
          printf("%d", a);
     } 
```

在**词法分析**阶段：您识别每个单词/标记并为其分配含义。在上面的代码中，您首先确定**i**后跟**n**后跟**t**，然后一个空格是单词**int**，它是一个语言关键字；**1**后跟**0**，空格是数字**10**，依此类推。

在**句法分析**阶段：您验证代码是否遵循语言语法（语法规则）。例如，您检查运算符的 LHS 上是否只有一个变量（考虑 C 语言），每条语句是否以**;结尾。**, **if**后跟一个条件/布尔语句等。

就像其他人提到的那样，通常预处理发生在词法分析或句法分析之前。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T19:32:37.110

词法分析发生在句法分析**之前。**这是合乎逻辑的，因为当需要调用宏时，必须首先识别标识符的边界。这是通过词法分析完成的。在句法分析开始之后。请注意，编译器通常不会在开始句法分析之前生成完整的预处理源。他们读取源代码，一次选择一个词法，如果需要进行预处理，并将结果提供给句法分析。

在一种情况下，词法分析发生两次。这是粘贴缓冲。看代码：

```
#define En(x) Abcd ## x ## x

enum En(5)
{
    a, b = 20, c, d
}; 
```

此代码使用名称定义枚举`Abcd55`。在`##`宏扩展期间处理这些数据时，会将数据放入内部缓冲区。之后，这个缓冲区就像一个小的#include 一样被扫描。在扫描期间，编译器会将缓冲区的内容分解为词法。可能会发生扫描词法的边界与放置在缓冲区中的原始词法的边界不匹配的情况。在上面的示例中，3 个词法被放入缓冲区，但只有一个被检索。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T19:28:25.193

预处理发生在词法分析 iirc 注释被过滤掉之前，#define，... 之后，编译器使用扫描仪/词法分析器生成标记（词法分析）。之后编译器生成分析树，用于语法分析

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-23T19:32:21.293

也有例外，但通常是这样爆发的：

*   预处理 - 将程序文本转换为程序文本
*   词法分析 - 将程序文本转换为“标记”，它们本质上是带有属性的小整数
*   句法分析 - 将程序文本转换为抽象句法

“抽象语法”的定义可能会有所不同。在一次性编译器中，抽象语法相当于目标代码。但是这些天，它通常是一棵树或 DAG，它在逻辑上代表了程序的结构。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-23T20:43:46.967

当我们谈论 C 编程语言时，我们应该注意该语言有一个 ISO (ANSI) 标准。这是 C99 (ISO/IEC 9899:1999) 的最新公开草案：www.open-std.org/jtc1/sc22/wg14/www/docs/n1124.pdf

有一节“5.1.1.2 翻译阶段”说明了如何解析 C 程序。有几个阶段：

...多字节、三元组和反斜杠处理的一些步骤...

> 3）。源文件被分解为预处理标记和空白字符序列（包括注释）。

这是预处理的词法分析。只有预处理器指令、标点符号、字符串常量、标识符、注释在这里被使用。

> 4）。执行预处理指令，扩展宏调用

这本身就是预处理。此阶段还将包含来自的文件`#include`，然后它将删除预处理指令（如`#define`or`#ifdef`和其他）

...处理字符串文字...

> 7）。分隔标记的空白字符不再重要。每个预处理令牌都被转换为一个令牌。生成的标记在句法和语义上进行分析，并作为翻译单元进行翻译。

转换为token意味着语言关键字检测和常量检测。这是最终词法分析的步骤；句法和语义分析。

所以，你的问题是：

> 预处理是否发生在词法和句法分析之后？

做预处理需要一些词法分析，所以顺序是：lexical_for_preprocessor，preprocessing，true_lexical，other_analysis。

PS：Real C 编译器的组织方式可能略有不同，但它的行为方式*必须*与标准编写的方式相同。

# objective-c - 将数据作为原始数据读取和写入流？

> ID：11172299
> 
> 赞同：0
> 
> 时间：2012-06-23T19:21:18.177
> 
> 标签：objective-c, ios5, stream, xcode4.3, external-accessory

我通过外部附件框架打开了以下输入和输出流：

```
session = [[EASession alloc] initWithAccessory:acc forProtocol:protocol];

        if (session){
            [[session inputStream] setDelegate:self];
            [[session inputStream] scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
            [[session inputStream] open];

            [[session outputStream] setDelegate:self];
            [[session outputStream] scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
            [[session outputStream] open];
        } 
```

现在我有一个非常愚蠢的问题，就像我的大多数新手问题一样。如何将原始的 1 字节数据发送到流中？说，我想发送 0x06。我怎么做？

然后......我如何从流中读取数据？我将被发送回数据以逐字节处理......字节将是字节范围（0x00 - 0xFF）内的数字。

感谢您的耐心和帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T19:46:49.117

逐字节写入数据不是最有效的方法，但如果你坚持：

```
uint8_t aByte = 0x06;
if ([[session outputStream] write:&aByte maxLength:1] < 0)
    /* handle error */; 
```

同样，要逐字节读取：

```
uint8_t aByte;
NSInteger result = [[session inputStream] read:&aByte maxLength:1];
if (result > 0)
    /* handle received byte */;
else if (result == 0)
    /* handle end-of-stream */;
else
    /* handle error */; 
```

如果要读取或写入更大的数据块，请将指针传递给大于一字节的缓冲区并指定长度。一定要处理短读和写，返回码是正数但小于你指定的。您需要等待流准备好更多内容并从中断处继续。对于阅读，您也可以使用`-getBuffer:length:`，其中框架分配一个其选择长度的缓冲区。

# python - PySide + QGraphicsScene 只是显示为黑色

> ID：11172307
> 
> 赞同：1
> 
> 时间：2012-06-23T19:22:25.947
> 
> 标签：python, pyqt, pyside, qgraphicsview

我想做的就是将“hello world”写入 a`QGraphicsScene`中的 a `QGraphicsView`。我究竟做错了什么？我`QGraphicsView`在 Designer 中创建了一个，然后在我的中`__init__`创建了一个`QGraphicsScene`并添加了一些文本......但我得到的只是一个黑色窗口。

```
import sys
from PySide import QtCore, QtGui
from PySide.QtGui import *

class MyDialog(QDialog):
    def __init__(self):
        super(MyDialog, self).__init__()
        self.ui = Ui_Dialog()
        self.ui.setupUi(self)
        self.scene = QGraphicsScene()
        self.ui.graphicsView.setScene(self.scene)
        self.scene.setSceneRect(0,0,100,100)
        self.scene.addText('hello')

def main(argv):
    app = QApplication(sys.argv)
    myapp = MyDialog()
    myapp.show()
    app.exec_()
    sys.exit()

if __name__ == "__main__":
    main(sys.argv) 
```

以下是 Designer 的 UI 代码：

```
# everything from here down was created by Designer
class Ui_Dialog(object):
    def setupUi(self, Dialog):
        Dialog.setObjectName("Dialog")
        Dialog.resize(400, 300)
        self.buttonBox = QtGui.QDialogButtonBox(Dialog)
        self.buttonBox.setGeometry(QtCore.QRect(30, 240, 341, 32))
        self.buttonBox.setOrientation(QtCore.Qt.Horizontal)
        self.buttonBox.setStandardButtons(QtGui.QDialogButtonBox.Cancel|QtGui.QDialogButtonBox.Ok)
        self.buttonBox.setObjectName("buttonBox")
        self.graphicsView = QtGui.QGraphicsView(Dialog)
        self.graphicsView.setGeometry(QtCore.QRect(50, 30, 256, 192))
        self.graphicsView.setMouseTracking(False)
        self.graphicsView.setFrameShadow(QtGui.QFrame.Sunken)
        brush = QtGui.QBrush(QtGui.QColor(0, 0, 0))
        brush.setStyle(QtCore.Qt.SolidPattern)
        self.graphicsView.setForegroundBrush(brush)
        self.graphicsView.setObjectName("graphicsView")

        self.retranslateUi(Dialog)
        QtCore.QObject.connect(self.buttonBox, QtCore.SIGNAL("accepted()"), Dialog.accept)
        QtCore.QObject.connect(self.buttonBox, QtCore.SIGNAL("rejected()"), Dialog.reject)
        QtCore.QMetaObject.connectSlotsByName(Dialog)

    def retranslateUi(self, Dialog):
        Dialog.setWindowTitle(QtGui.QApplication.translate("Dialog", "Dialog", None, QtGui.QApplication.UnicodeUTF8)) 
```

我得到的就是这个，有一张空白的黑色画布：

![截屏](../Images/fd66ff3f7690fdbce4100aad131a2fd9.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T19:34:56.160

有两个问题...

首先，在 QGraphicsView 中将前景画笔设置为黑色。这意味着所有孩子都将继承它，除非他们另有说明。

*用户界面*

```
 brush = QtGui.QBrush(QtGui.QColor(0, 0, 0))
    brush.setStyle(QtCore.Qt.SolidPattern)
    #self.graphicsView.setForegroundBrush(brush)
    self.graphicsView.setBackgroundBrush(brush) 
```

此外，由于您将背景更改为黑色，因此您应该将文本设置为您可以看到的颜色。因为默认情况下它将是黑色的：

*主要的*

```
 text = self.scene.addText('hello')
    text.setDefaultTextColor(QtGui.QColor(QtCore.Qt.red)) 
```

如果您不关心黑色背景，只是想看看它是否正常工作，只需在您的 UI 中注释掉这一行（或在 Designer 中取消设置画笔设置），不要进行其他任何更改：

```
 # self.graphicsView.setForegroundBrush(brush) 
```

# android - 在android中使用linkify链接地图地址

> ID：11172309
> 
> 赞同：0
> 
> 时间：2012-06-23T19:23:00.610
> 
> 标签：android, linkify

以下代码不起作用 -

```
 TextView myLocation = new TextView(this);
   myLocation.setText("Sodala, Jaipur, Rajasthan, IN");
   Linkify.addLinks(myLocation , Linkify.MAP_ADDRESSES);
   mainLayout.addView(myLocation); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T19:29:08.940

看来您的地址对于 Linkify 来说太模糊了。我不知道印度的地址是什么样的（如果它们完全不同的话），所以考虑一下美国的纽约：

```
myLocation.setText("New York, NY   34 Maint St New York, NY"); 
```

仅“纽约，纽约”不是 Linkify 的有效地图地址。

您可以尝试设置自己的模式，按照[此处的示例](http://www.aviyehuda.com/2011/01/android-creating-links-using-linkfy/)来匹配任何带有“，IN”的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-29T11:05:52.200

这是带有自定义模式的*addLinks*的简化版本：

```
Pattern pattern = Pattern.compile(".*", Pattern.DOTALL);
addressTextView.setText(address);
Linkify.addLinks(addressTextView, pattern, "geo:0,0?q="); 
```

我将它用于德国和美国地址，因为 google-maps 在搜索其他地方也应该可以找到的地址时非常聪明。

这个亮点是适合我用例的*TextView的所有内容。*如果地址位于字符串内部的某个位置，则需要在此处应用更智能的模式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T19:36:23.557

你试试

[http://www.aviyehuda.com/2011/01/android-creating-links-using-linkfy/](http://www.aviyehuda.com/2011/01/android-creating-links-using-linkfy/)

```
// Recognize all of the default link text patterns 
    Linkify.addLinks(text, Linkify.ALL); 
```

或 [http://www.aviyehuda.com/2011/01/android-creating-links-using-linkfy/](http://www.aviyehuda.com/2011/01/android-creating-links-using-linkfy/)

```
TextView myCustomLink2 = new TextView(this);
Pattern pattern2 = Pattern.compile("[a-zA-Z]+");
myCustomLink2.setText("press one of these words to search it on google: Android Linkify dzone");
Linkify.addLinks(myCustomLink2,pattern2, "http://www.google.ie/search?q=", myMatchFilter, null); 
```

# f# - 在 F# 中记录方法

> ID：11172310
> 
> 赞同：6
> 
> 时间：2012-06-23T19:23:06.397
> 
> 标签：f#, records

我为我的场景写了一个简单的例子。我创建了一个记录类型`Switch`

```
type State =
    | On
    | Off
    with
        member this.flip =
            match this with
            | On -> Off
            | Off -> On

type Switch = { State : State } 
```

然后我编写了一个函数来创建一个记录的副本，其中一个元素发生了变化

```
let flip switch = { switch with State = switch.State.flip } 
```

我连续`flip`多次写

```
let flipMany times switch =
    [1 .. times]
    |> List.fold (fun (sw : Switch) _ -> flip sw) switch 
```

如果我想把这两个函数作为方法记录下来，我会写

```
type Switch =
    { State : State }
    member this.flip = 
        { this with State = this.State.flip }
    member this.flipMany times =
        [1 .. times]
        |> List.fold (fun (sw : Switch) _ -> sw.flip) this 
```

这样做有什么问题吗？是否同样有效？`sw.flip`每次在不同的对象上调用函数感觉有点不舒服。

编辑：这只是一个简单的例子来解释我的问题。我的问题是如何将函数`flipMany`与`flipMany`记录中的方法进行比较。实现可能很幼稚，但在这两种情况下都是一样的。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-23T20:51:13.393

您的意图可以简单地实现

```
let flipMany times switch =
    match (times % 2) with
    | 1 -> { switch with State = switch.State.flip }
    | _ -> switch

type Switch =
    { State : State } 
    member this.Flip = { this with State = this.State.flip }
    member this.FlipMany times =
        match (times % 2) with | 1 -> this.Flip | _ -> this 
```

在比较静态函数与对象方法的更广泛背景下，惯用的方式将坚持使用函数选项。一个函数具有显式参数，并且不能依赖于任何边状态，而是参数的状态，以产生一个幂等的结果值。相反，对象方法隐式地获取类的一个实例作为参数，并且可能不仅从参数中获取结果值，还可以基于其他类字段的状态，这不符合纯函数的幂等性.

为了更好地感受这种差异，阅读[F# 组件设计指南](http://research.microsoft.com/en-us/um/cambridge/projects/fsharp/manual/fsharp-component-design-guidelines.pdf)和探索[F# 核心库设计](http://msdn.microsoft.com/en-us/library/ee353567.aspx)可能会有所帮助。

# javascript-events - 为什么要创建循环来获取事件的元素？

> ID：11172315
> 
> 赞同：2
> 
> 时间：2012-06-23T19:24:18.283
> 
> 标签：javascript-events, javascript

我用来学习 Javascript 的教科书使用以下代码在用户单击段落时显示警告对话框：

```
var paras = document.getElementsByTagName("p");
for (var i=0; i<paras.length; i++) {
 paras[i].onclick = function() {
  alert("You clicked on a paragraph.");
 }
} 
```

我看不出循环遍历所有`p`元素的原因，而是识别它们并简单地将`onclick`事件处理程序附加到它。像这样：

```
var paras = document.getElementByTagName('p');
paras.onclick = alert("You clicked on a paragraph."); 
```

这不是做同样的事情吗？为什么需要循环遍历`p`元素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T19:25:34.963

不，那绝对不会做同样的事情：

1.  您根本无法将事件处理程序附加到 HTML 节点列表（嗯，您*可以*，但什么都不会发生）；
2.  您正在尝试将“onclick”设置为语句的*结果*`alert()`，而不是您示例中的函数。（没关系，因为它无论如何都行不通。）

现在有一种方法可以只用一个事件处理程序来处理点击，但我会让你继续阅读你的书:-)

*编辑*-详细说明第2点，这：

```
alert("hi"); 
```

是一个**函数调用**。它的值将是调用该函数返回的任何值。因此，

```
paras.onclick = alert("You clicked on a paragraph."); 
```

设置“paras”所指对象的“onclick”属性，并将其设置为从返回的值`alert()`（可能始终为`undefined`）。

正如您书中的示例代码一样，“onclick”处理程序之类的东西需要是**functions**。这就是您的示例代码中间发生的情况：每个单独的`<p>`DOM 元素的“onclick”属性都被设置为一个函数。*该函数内部*是对`alert()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T19:49:37.653

假设你有

```
​&lt;p>​First Paragraph</p>
<p>Second Paragraph</p>
<p>Third Paragraph</p> 
```

所以会返回一个like`var paras = document.getElementsByTagName("p");`的集合`p`

```
[<p>​First Paragraph​&lt;/p>​, <p>​Second Paragraph​&lt;/p>​, <p>​Third Paragraph​&lt;/p>​] 
```

如果您编写`paras.onclick = alert("You clicked on a paragraph.");`，那么它将不起作用，因为`paras`是一些`p`元素的数组而不是`p`元素本身，并且只有一个`html`元素有一个事件，因此您必须遍历集合并分别为每个`p`元素添加事件处理程序。

即使你只有一个`p`，它也会返回一个包含一个`p`元素的数组，即

```
​&lt;p>​First Paragraph</p> 
```

并且`var paras=document.getElementsByTagName("p");`会回来`[<p>​First Paragraph​&lt;/p>​]`

因此，要添加事件处理程序，您可以简单地编写

```
paras[0].onclick = function() { // 0 is the first element in the collection
     alert(this.innerHTML);
 } 
```

[**这**](http://jsfiddle.net/heera/AM97T/)是一个例子，我希望它能帮助你理解这个过程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T19:34:58.173

不，那是行不通的。

该函数`document.getElementsByTagName`将为您返回一个节点数组，因为多个节点可以具有相同的名称（因此“元素”的复数形式）：您的页面中可以有多个段落，此函数将全部返回。即使你只有一个段落，你也会得到一个包含一个元素的数组。

另一方面，您可以使用该`document.getElementById`函数选择具有其 ID 的节点。在这种情况下，结果将是单个节点，因为 ID 在文档中应该是唯一的。

```
var para = document.getElementByTagId('myParagraph');
paras.onclick = function(){ alert("You clicked on a paragraph.") }; 
```

# php - 使用 php 创建 JSON 对象 - 嵌套查询

> ID：11172324
> 
> 赞同：1
> 
> 时间：2012-06-23T19:25:02.743
> 
> 标签：php, ajax, json

我想在 PHP 中使用 tow 查询创建 JSON 对象，然后使用 ajax 检索该对象。第一个将返回所有用户。第二个嵌套查询将返回与特定用户关联的所有任务。结构必须是这样的：

```
{
[
user1 : { "name" : "name1"
          "task" : [ { "taskname":"taskname1.1" , "date":"1-1" } ,

                 { "taskname":"taskname1.2" , "date":"1-1"  }
        }
} ,

user2: { "name" : "name2"
      "task" : [ { "taskname":"taskname2.1" , "date":"2-2" } ,

                 { "taskname":"taskname2.2" , "date":"2-2"  }
               ]
  }
...
]
} 
```

我的问题是：

当我尝试解析每个用户的任务时，我发现：

每个用户的任务都与先前用户的任务合并。

那么使用 php 创建与我的结构相同的 JSON 对象的最佳方法是什么？

- - 更新 - -

感谢所有回答我的人。但我需要知道如何动态创建它，我知道如何在静态中执行此操作，并且我之前正确使用过 json_encode()，这不是我的问题。我非常感谢您的回答，但这不是我需要的，我认为问题出在我的问题上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T19:33:39.283

```
$array=array(
    'user1'=>array(
                      'tasks'=>array(
                               'task1'=>'whatever',
                               'task2'=>'whatever',
                               'task3'=>'whatever'
                               ),
                      'date'=>'whatever'
                  ),

    'user2'=>array(
                      'tasks'=>array(
                               'task1'=>'whatever',
                               'task2'=>'whatever',
                               'task3'=>'whatever'
                               ),
                      'date'=>'whatever'
                  ),
    'user3'=>array(
                      'tasks'=>array(
                               'task1'=>'whatever',
                               'task2'=>'whatever',
                               'task3'=>'whatever'
                               ),
                      'date'=>'whatever'
                  )    
); 
```

然后使用 JSON 编码发送 JSON 字符串。

```
echo json_encode($array); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T19:35:26.517

我同意 powerbuoy 只是在 php 中创建一个带有键值对的数组：

```
$obj = array( 
             "User 1" => array( 
                 "name" => "name1", 
                 "tasks" => array(
                     array("taskname" => "t1", "date" => "1-1"),
                     array("taskname" => "t2", "date" => "1-1")
                 )
             ),
             "User 2" => array(...........) 
```

然后运行`json_encode($obj);`

我认为这样的事情应该适合你

# wpf - 枚举依赖属性不适用于智能感知

> ID：11172327
> 
> 赞同：1
> 
> 时间：2012-06-23T19:25:17.457
> 
> 标签：wpf, xaml

我有以下用户控件

```
public partial class TestCtrl : UserControl
{
    public enum Alignments
    {
        HORIZONTAL,
        VERTICAL
    }

    public TestCtrl()
    {
        InitializeComponent();
    }

    public static DependencyProperty AlignmentProperty = DependencyProperty.Register(
    "Alignment",
    typeof(Alignments),
    typeof(TestCtrl),
    new PropertyMetadata(Alignments.HORIZONTAL));

    public Alignments Alignment
    {
        get
        {
            return (Alignments)GetValue(AlignmentProperty);
        }
        set
        {
            SetValue(AlignmentProperty, value);
        }
    }
} 
```

该属性有效，但在 xaml 中使用该属性时，自动完成不会检测该属性的可能值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T22:55:23.537

找到了答案，结果根据[这个howto](http://timdams.wordpress.com/2012/05/30/creating-an-intellisense-compatible-enum-based-dependency-property/)你需要使用依赖属性在类之外声明枚举

# javascript - Django 中的 Django 压缩器和模板标签

> ID：11172329
> 
> 赞同：1
> 
> 时间：2012-06-23T19:25:36.137
> 
> 标签：javascript, django, templates, compression, django-compressor

最近我尝试了 Django-Compressor。它太棒了，我太喜欢它了，但是我在离线压缩（`COMPRESS_OFFLINE = True`）和模板标签方面遇到了一些麻烦。

我有`{{ django_vars }}`并且`{% django_tags %}`在我的 JS 代码中，我猜 Google Clousure 编译器（我与 Django-Compressor 一起使用的过滤器）不知道识别它们。事实上，我认为 Django 模板结构之类`{% if something %}`的都被删除了。

压缩后如何将所有这些模板变量/标签保留在我的代码 JS 中？

谢谢小伙伴。

**编辑**：最后，我发现了我使用的所有问题`COMPRESS_OFFLINE`，它们都是由于错误而发生的。它们与 JS 代码中的 Django 语法无关。当您尝试将 JS 代码压缩到文件 .html 中时，该错误总是出现，而不是外部 JS。所有解析器和所有编译器/压缩器都失败了。

现在，虽然我比 django-pipeline 更喜欢 django-compressor，但我正在使用最后一个。目前，没有报告压缩问题。

感谢所有试图帮助我的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T16:04:38.790

你试过吗？Django Compressor 的 JS 编译器在模板节点渲染*后开始工作，IMO。*因此`{{ django_vars }}`or`{% django_tags %}`在被压缩之前已经被模板中的输出替换。

如果按视图/模板更改`{{ django_vars }}`或更改。`{% django_tags %}`它不能被压缩成一段代码。您最好将这些部分从主要的 JS 代码块移动到 JS 块并单独压缩。

# asp.net - ValidationSummary 控件的 HeaderText 属性中的内容呈现不正确

> ID：11172336
> 
> 赞同：0
> 
> 时间：2012-06-23T19:27:08.890
> 
> 标签：asp.net, html

我在标记中有以下验证摘要控件：

```
<asp:ValidationSummary ID="vsValErrs" CssClass="errors" HeaderText="<div><%# TranslatedMessage%></div>" runat="server" /> 
```

其中 TranslatedMessage 是在后面的代码中定义的属性。问题是验证摘要控件被呈现为

```
<div id="vsValErrs" class="errors" style="color:Red;">
    <div>
        <!--[CDATA[<%# TranslatedMessage%-->
        ]]&gt;
    </div>
</div> 
```

这会导致内容呈现不正确，可能是因为**]]>**部分位于注释块之外。为什么会这样？

对于那些想知道的人，在 HeaderText 属性中有一个 div 的原因是因为我正在使用它来设置标题文本的样式（使用一个 CSS 选择器来选择错误类中的第一个 div）；这可能不是最佳做法，但这是我想出的唯一方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T19:34:02.710

您是否尝试通过在 pageload 事件中设置 headertext 属性值，例如

```
protected void Page_Load(..)
{
..
ValidationSummury1.HeaderText="<div>"+TranslatedMessage+"</div>";
} 
```

如果翻译的消息不可用，则将其放入会话变量并将其设置为 HeaderText 属性。

# nhibernate - NHibernate QueryOver 获取不超过 N 天的记录

> ID：11172339
> 
> 赞同：0
> 
> 时间：2012-06-23T19:27:41.463
> 
> 标签：nhibernate, linq-to-nhibernate, queryover

我在检索不超过 30 天的记录时遇到问题。由于今天是 6 月 24 日，我想选择不超过 5 月 23 日的记录。那就是我需要 5 月 23 日到今天之间的所有记录。为此，正在实施以下查询

```
session.QueryOver<Property>().WhereRestrictionOn(x => x.DateUpdated).IsBetween(DateTime.Now).And(DateTime.Now.AddDays(-30)).List(); 
```

查询运行没有任何错误，但列表为空。

当通过视觉工作室调试器看到时，它是说

> session.QueryOver().WhereRestrictionOn(x => x.DateUpdated).IsBetween(DateTime.Now).And(DateTime.Now.AddDays(-30)).List() 表达式不能包含 lambda 表达式

[我根据从这里](http://nhforge.org/blogs/nhibernate/archive/2009/12/17/queryover-in-nh-3-0.aspx)看到的模型编写了查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T19:39:15.523

尝试翻转“介于”子句的顺序-`IsBetween(DateTime.Now.AddDays(-30)).And(DateTime.Now)`

# css - Webkit 输入：检查列表可见性

> ID：11172343
> 
> 赞同：1
> 
> 时间：2012-06-23T19:28:16.927
> 
> 标签：css, webkit, css-selectors

我在一个站点上有这个文件夹树，我尝试仅通过 CSS 进行交互（打开和关闭文件夹等）。

我这样做的方式在 Firefox 中完美运行，但在任何基于 webkit 的浏览器（Chrome、Safari）中都不起作用。当我尝试调试它时，它正确地更改了调试器中的显示属性，但是为了看到预期的效果，我不得不关闭显示属性，然后再次打开。

CSS：

```
ul.tree
{
   text-align: left;
}

ul.tree li
{
   position: relative;  
   list-style: none;
}

li.file
{
   background: url(images/icons/default_document.png) 0 0 no-repeat;
   background-size: 1.5em 1.5em;
}

li.file a
{
   display: block;
   text-decoration: none;
}

ul.tree li input
{   
   position: absolute;
   top: 0;
   left: 0;

   cursor: pointer; 

   opacity: 0;
   z-index: 2;
}

ul.tree li input + label + ul
{   
   margin: 1em 0 1em 2em;
}

ul.tree li input + label + ul > li
{
   display: none;
}

ul.tree li label
{   
   background: url(images/icons/Closed_32x32x32.png) 0 0 no-repeat;
   background-size: 1.3em 1.3em; 

   cursor: pointer;

   display: block;
}

ul.tree li input:checked + label
{
   background-image: url(images/icons/Open_32x32x32.png);
}

ul.tree li input:checked + label + ul
{
   margin: 0 0 0 3em;
}

ul.tree li input[type=checkbox]:checked + label + ul > li.file
{
   display: list-item;

   margin: 0;
} 
```

HTML：

```
<ul class="tree">
   <li>
      <input type="checkbox" id="subfolder1" /><label for="subfolder1">Some Label</label>
      <ul>
         <li class="file"><a href="path/to/file1">file1</a></li>
         <li class="file"><a href="path/to/file2">file2</a></li>
      </ul>
   </li>
</ul> 
```

如果您需要查看完整的站点（我省略了不重要的 CSS 属性等），可以在[http://perpartes.cz/novy_PPC/publikace](http://perpartes.cz/novy_PPC/publikace)找到它……只需在表单中写一些假电子邮件即可。

# ruby-on-rails - 图像处理轨 + iOS 核心数据

> ID：11172344
> 
> 赞同：0
> 
> 时间：2012-06-23T19:28:19.467
> 
> 标签：ruby-on-rails, ios, image, core-data, image-caching

我正在开发一个包含许多图像的 iOS 应用程序。这些图像与 Show 对象和 Band 对象相关联。我对 iOS 开发相当陌生

在服务器上，节目和乐队与图像列表相关联。目前我正在使用以下信息存储图像：

```
height:integer width:integer imageType:string imageData:binary 
```

第一个问题是：应该有更多吗？

其次，我使用 Core Data 持久化 Show 和 Band 对象。我不想保留图像，因为我会很快耗尽内存。我会将它们存储在缓存目录中。我的第二个问题是：Show 和 Band 对象应该如何跟踪图像？我是否应该在模型中有一个与 Shows 和 Bands 有很多关系的 Image 对象。但是这些 Image 对象可能只包含高度、宽度、imageType 和缓存图像应该所在的路径。我的想法是，如果在缓存目录中找不到它，它会从服务器获取 imageData。

这样做的正确方法是什么？

更新

我还计划在获取缓存版本之前使用 HEAD ping 服务器以检查 imageData 是否已更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T22:21:16.940

实际上，您可以直接使用 Core Data 存储图像，而根本不必弄乱文档。

这已经在其他地方得到了回答，但无论如何我都会把代码放在这里：

保存：

```
NSData *imageData = UIImagePNGRepresentation(yourUIImage);
[newManagedObject setValue:imageData forKey:@"image"]; 
```

并加载：

```
NSManagedObject *selectedObject = [[self fetchedResultsController] objectAtIndexPath:indexPath];
UIImage *image = [UIImage imageWithData:[selectedObject valueForKey:@"image"]];
[[newCustomer yourImageView] setImage:image]; 
```

您应该对数据进行建模的方式取决于图像与乐队/节目之间的关系。

节目和乐队是否都与多个图像相关？一个节目可以有与多个乐队相关的图像吗？

最终，您可能希望拥有一个`Image`与乐队/节目具有一对一或一对多关系的核心数据实体，具体取决于您对这些问题的回答。您还需要添加反向关系，例如，当您查找节目时，您还可以访问与其关联的图像集。

如果您提供有关对象之间关系的更多详细信息，可能会更容易为您提供帮助。

# java - 文档类型“externalapp” - 它是什么？

> ID：11172346
> 
> 赞同：0
> 
> 时间：2012-06-23T19:28:26.003
> 
> 标签：java, google-docs, google-docs-api

尝试使用 Java 客户端库从 Google Docs 下载文档并获取一些类型为“externalapp”的文档。

这种类型是什么？处理此类文件的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T23:03:30.433

这些可以是第三方应用程序创建的快捷方式，这些应用程序使用 Drive SDK 与 Google Drive 集成，但将其数据存储在不同的存储系统中：[https ://developers.google.com/drive/apps_overview](https://developers.google.com/drive/apps_overview)

# php - SQL 在字符串中搜索字符串

> ID：11172347
> 
> 赞同：0
> 
> 时间：2012-06-23T19:28:29.263
> 
> 标签：php, mysql, sql

我想在我的网站上创建一个搜索功能，它将在字符串中返回字符串。例如：如果 SQL 数据库中有一条记录，其中列的值为“我的名字是哈利波特”，那么用户可以搜索“哈利 P”或“奥特”或“我的名字”，记录就会出现在搜索结果中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T19:30:33.757

在你的 SQL 中使用它：

```
SELECT * FROM `table` WHERE title LIKE '%$search_word%' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T19:30:13.807

使用**[LIKE](http://dev.mysql.com/doc/refman/5.0/en/string-comparison-functions.html#operator_like)**功能。

```
SELECT * FROM myTable WHERE myName LIKE '%Harry P%'

SELECT * FROM myTable WHERE myName LIKE '%ott%'

SELECT * FROM myTable WHERE myName LIKE '%My Name%' 
```

在这里，我假设`myName`您的数据库中的字段名称`myTable`是表名。

在 PHP 中，您的查询应该是

```
SELECT * FROM myTable WHERE myName LIKE '%$yourWord%' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T19:33:54.520

如果表 / 会很小，那么带有的语句`LIKE '%word%'`就可以了。

尽管您可能很想使用 MyISAM 表来使用全文索引，[但这在 InnoDB 中也是可能的](http://www.drdobbs.com/database/231902587)。以这种方式实现它会有点困难，但它会将 MyISAM 提供的高性能文本搜索与 InnoDB 的所有优点（事务、行级锁定等）结合起来。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-23T19:35:28.670

```
select * from your_table
where instr(some_column, 'string_to_search') > 0 
```

# apache - 如何将nodejs和apache放在同一个80端口

> ID：11172351
> 
> 赞同：27
> 
> 时间：2012-06-23T19:28:51.917
> 
> 标签：apache, node.js, redirect, port

我必须将 nodejs 放在端口 80 中，但 apache 已经在使用它。如何将两者（nodejs 和 apache）放在同一个端口 80 上？我需要它，因为在我的大学里，除了 PORT 80 之外的所有端口都被阻塞了。（这是一个带有 nodejs 和 socket.io（websockets）的实时应用程序，而另一方面是一个 php 应用程序）。非常感谢

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-24T00:15:37.323

我通过 node.js 代理做到这一点..

`http-proxy`使用`npm`或[官方页面](https://github.com/nodejitsu/node-http-proxy "节点-http-代理")安装

例子：

```
var http = require('http'),
httpProxy = require('http-proxy'),
proxyServer = httpProxy.createServer ({
    hostnameOnly: true,
    router: {
        'domain.com':       '127.0.0.1:81',
        'domain.co.uk':     '127.0.0.1:82',
        '127.0.0.1':        '127.0.0.1:83'
    }
});

proxyServer.listen(80); 
```

这将创建一个节点进程，侦听端口 80，并转发对去往：81、82、83 等的域的请求。我建议运行它`forever`并添加一个条目，`init.d`以便您的代理启动，以防系统关闭。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-09-07T01:59:57.703

您还可以使用 Apache 2 的 mod_proxy 和 mod_proxy_http，它们可能更可靠或性能更好，具体取决于您的系统。

这是一个例子：

首先运行下面的命令来代理以允许

```
sudo a2enmod proxy
sudo a2enmod proxy_http
sudo a2enmod proxy_balancer
sudo a2enmod proxy_balancer
sudo a2enmod lbmethod_byrequests

# Use Apache for requests to http://example.com/
# but use Node.js for requests to http://example.com/node/
<VirtualHost *:80>
    ServerName example.com
    DocumentRoot /var/www/example/
    <Location /node>
        ProxyPass http://127.0.0.1:8124/
        ProxyPassReverse http://127.0.0.1:8124/
    </Location>
</VirtualHost> 
```

当然，您可以根据需要修改指令，例如为您的虚拟主机使用不同的端口（例如，443），为 Node.js 使用不同的端口，或者在不同的块下设置代理，例如子域（例如，node.example.com）。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-06-23T22:41:55.103

我个人从@liammclennan 以相反的方式做到了这一点。[一些人认为](http://eastmond.org/blog/?p=45)通过 Apache 代理会破坏 Node 的一些性能和可扩展性优势（我自己没有经验，因为我的服务器没有获得那么多流量，但是来自@liammclennan 的链接：*“通过 Apache 传入的每个请求都会导致一个 Apache 线程等待/阻塞，直到从您的 Node.js 进程返回响应。"*，这显然与 Node 的架构不太吻合。）

我使用[node-http-proxy](https://github.com/nodejitsu/node-http-proxy)大致按照第一个链接中的描述设置了一个 Node 代理服务器（我的 Node 代理在端口 80 上运行；Apache 和我的其他 Node 服务没有）。到目前为止似乎运行良好，尽管我偶尔会遇到稳定性问题，通过检查代理是否仍在运行 cron 作业（**编辑：**这些天似乎更加稳定），我已经“解决”了这些问题。代理非常轻巧，占用大约 30MB 内存。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-23T22:26:40.200

你不能。您必须在另一个端口上运行 node.js，然后通过 apache 代理请求。您可以使用 mod_proxy 执行此操作

[http://davybrion.com/blog/2012/01/hosting-a-node-js-site-through-apache/](http://davybrion.com/blog/2012/01/hosting-a-node-js-site-through-apache/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-24T04:07:11.853

在这种情况下，我通常使用[haproxy](http://haproxy.1wt.eu/)作为前端，并将代理连接到适当的后端服务器。（尽管根据您的需要使您的 node.js 进程成为代理服务器也是一种有效的方法）。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2014-02-11T04:32:18.197

我发现了一个很酷的要点[Run apache and nodejs on port 80](https://gist.github.com/stagas/754303)。还没有尝试，但当然会

> ### 第1步
> 
> 获取提供**2 个**或更多 IP 地址的 VPS。
> 
> ### 第2步
> 
> 在 WHM cPanel 中，找到菜单项`Service Configuration`，选择`Apache Configuration`然后单击`Reserved IPs Editor`。
> 
> ### 第 3 步
> 
> 勾选您不想让 Apache 收听的 IP 地址**，**并将其写下来，以便在下一步中使用它。单击`Save`。
> 
> ### 第4步
> 
> 安装 Node.js，并像这样创建一个服务器：
> 
> ```
> var http = require('http');
> 
> var server = http.createServer(function(req, res) {
>   res.writeHead(200);
>   res.end('Hello, world!');
> });
> 
> server.listen(80, '111.111.111.111'); 
> ```
> 
> 替换`111.111.111.111`为您之前从 WHM cPanel 保留的 IP 地址。
> 
> ### 第 5 步
> 
> 不要再浪费你的时间了，永远不要听那些告诉你 `mod_rewrite`再次使用代理 Node.js 的人。

**更新：**

我们可以通过许多不同的方式解决问题，恕我直言，我们至少应该知道每种可能的方式。我们可以在不购买新 IP 的情况下做到这一点，当然在 Apache 和 NodeJS 服务器前面放置一个代理，每个服务器都运行除 80 之外的其他端口。

# .net - 为什么 WPF 控件的滚动条样式不同？

> ID：11172354
> 
> 赞同：0
> 
> 时间：2012-06-23T19:29:10.607
> 
> 标签：.net, c#-4.0, wpf-controls, styles, scrollbar

我在 WPF TreeView 控件旁边有一个 WPF WebBrowser 控件。两者都有默认样式和默认属性。除了将它们放在我的 WPF 窗口中之外，我没有更改任何内容。如果您查看下面的屏幕截图，您可以看到这两个控件有两个不同的滚动条。我不知道为什么会这样。

有没有办法让一个控件的滚动条看起来像另一个，或者只是将它们都默认为 windows 样式？

谢谢

![在此处输入图像描述](../Images/82f63e3272f883256670832f74084a37.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T19:56:04.450

要回答您的评论：

> 有没有办法将该主题保留在我的资源中（我的功能区控件使用它）并从该树视图控件中删除滚动条主题？– Landin Martens 6 月 23 日 19:49

是的。

# 选项1

您可以像这样覆盖控件的默认样式：

```
<Style TargetType="{x:Type TreeView}">
  ...
</Style> 
```

这将更改每个 TreeView 控件的样式（假设样式是在 App.xaml 字典中定义的）。如果只想覆盖少数控件的样式，可以命名：

```
<Style x:Key="XTreeViewStyle"
       TargetType="{x:Type TreeView}">
  ...
</Style> 
```

并为这些控件显式设置样式 ( `<TreeView Style="{StaticResource XTreeViewStyle}"/>`)。或者，您可以在特定上下文中创建样式，例如 Grid（因此仅影响 Grid 中的那些控件）：

```
<Grid>
  <Grid.Resources>
    <Style TargetType="{x:Type TreeView}">
    </Style>
  </Grid.Resources>
</Grid> 
```

我的猜测是，覆盖滚动条的样式并不是专门针对 TreeViews 的……它可能针对的是 TreeView 继承自的控件。因此，请寻找针对 TreeView、ItemsControl、Control、FrameworkElement 或 UIElement 的默认样式。当你找到它时，你可以给它一个名字，或者将样式移动到一个更有限的上下文中。

例如，您的样式可能设置如下：

```
<Style TargetType="{x:Type ItemsControl}">
  ...
</Style>

<Style TargetType="{x:Type Ribbon}">
  <Style.Template>
    <ControlTemplate>
      <ItemsControl>
        ...
      </ItemsControl>
    </ControlTemplate>
  </Style.Template>
</Style> 
```

要让 ItemsControl 样式只影响 Ribbon，您可以将 ItemsControl 样式移到 Ribbon 的模板中：

```
<Style TargetType="{x:Type Ribbon}">
  <Style.Template>
    <ControlTemplate>
      <ControlTemplate.Resources>
        <Style TargetType="{x:Type ItemsControl}">
          ...
        </Style>
      </ControlTemplate.Resources>
      <ItemsControl>
        ...
      </ItemsControl>
    </ControlTemplate>
  </Style.Template>
</Style> 
```

然而，确切的方法将取决于您的样式设置的准确程度，这可能比我建议的要复杂得多。例如，如果您有几种不同的样式都需要使用该 ItemsControl 样式，则可以像这样使用命名和继承：

```
<Style TargetType="{x:Type ItemsControl}"
       x:Key="XItemsControlStyle">
  ...
</Style>

<Style TargetType="{x:Type Ribbon}">
  <Style.Template>
    <ControlTemplate>
      <ControlTemplate.Resources>
        <Style TargetType="{x:Type ItemsControl}"
               BasedOn="{StaticResource XItemsControlStyle}">
          ...
        </Style>
      </ControlTemplate.Resources>
      <ItemsControl>
        ...
      </ItemsControl>
    </ControlTemplate>
  </Style.Template>
</Style>

<Style TargetType="{x:Type RibbonItem}">
  <Style.Template>
    <ControlTemplate>
      <ControlTemplate.Resources>
        <Style TargetType="{x:Type ItemsControl}"
               BasedOn="{StaticResource XItemsControlStyle}">
          ...
        </Style>
      </ControlTemplate.Resources>
      <ItemsControl>
        ...
      </ItemsControl>
    </ControlTemplate>
  </Style.Template>
</Style> 
```

# 选项 2

显式设置 TreeView 的样式。这将意味着确定 TreeView 的原始样式（或至少是您想要使用的样式），为其命名，然后在您想要设置样式的 TreeView 上显式设置。（有关如何执行此操作，请参见选项 2）

我相信这些链接将为您提供默认样式：

*   [树视图](http://msdn.microsoft.com/en-us/library/dd728671.aspx)
*   [滚动条](http://msdn.microsoft.com/en-us/library/ms742173.aspx)
*   [滚动查看器](http://msdn.microsoft.com/en-us/library/aa970847.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T20:05:09.013

`WebBrowser`只是原生组件的包装器，在 WPF 中很难处理它。我在项目中遇到了很多痛苦。

因此，从 CodePlex尝试[Chromium for WPF可能是个好主意。](http://wpfchromium.codeplex.com/)它更加灵活。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T19:36:14.150

看起来您的应用程序资源中有一个自定义主题。`WebBrowser`不使用主题中的样式，因为它不是 WPF 控件，它只是 Win32 控件的包装器。所以你不能让 WebBrowser 滚动条看起来像左边的那个。如果您想摆脱自定义样式，则应将其从资源中删除。

# xcode - iOS 项目中 Settings.bundle 缺少 Root.plist 等项；

> ID：11172356
> 
> 赞同：3
> 
> 时间：2012-06-23T19:29:31.247
> 
> 标签：xcode, settings.bundle, root.plist

我在 iOS 5.0 中使用 xcode 版本 4.2 (Build 4C199)。

我正在关注 Apple 的文档：http: [//developer.apple.com/library/ios/#documentation/cocoa/Conceptual/UserDefaults/Preferences/Preferences.html](http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/UserDefaults/Preferences/Preferences.html)

当我尝试添加 Settings.bundle（在“添加设置包”部分中描述）时，我没有获得此包下的所有文件；就像添加这个包之后一样，我的项目根目录下只有 Settings.bundle 并且没有任何 Root.plist 和 en.lproj 等；

我的项目截图： ![项目截图](../Images/25681581754441e4ea80b7697aa32b46.png)

所以在这里阅读了一些其他问题后，我发现我必须右键单击设置捆绑图标->在查找器中显示->右键单击查找器项目->显示包内容；现在我可以查看 Root.plist 和其他项目；但我的问题是有没有办法在 xcode 项目导航器中查看 Settings.bundle 的层次结构？

下一个查询是如何在 Settings.bundle 下添加子 plist？现在我无法在我的项目导航器中展开 Settings.bundle；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T20:49:16.107

在 Finder 中打开包。将文件拖到项目文件列表中（但请确保将它们从所有构建阶段中删除）

# python - 为什么“i, j = 1”会导致“int .. is not iterable”？

> ID：11172357
> 
> 赞同：3
> 
> 时间：2012-06-23T19:29:31.543
> 
> 标签：python

我正在尝试在 Python 中实现快速排序的分区函数。

```
def partition(ls):
  if len(ls) == 0:
    return
  pivot = ls[0]
  i, j = 1
  while j < len(ls):
    if ls[j] <= pivot:
      i += 1
      temp = ls[i]
      ls[i] = ls[j]
      ls[j] = temp
    j += 1
  ls[0] = ls[i]
  ls[i] = pivot 
```

但是，当我调用`quicksort.partition([1,2,3])`.

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "quicksort.py", line 5, in partition
    i, j = 1
TypeError: 'int' object is not iterable 
```

这个错误在说什么？当然，int 对象是不可迭代的，但是我什么时候迭代过 int 对象呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-23T19:31:12.527

当您在作业左侧列出多个用逗号分隔的目标时，它会尝试遍历右侧并将片段分配给左侧的片段。因此，如果您这样做，`x, y = (1, 2)`则 x 将为 1，y 将为 2。

如果您想让 i 和 j 都为 1，请执行`i = j = 1`.

（请注意，这会将两个变量绑定到同一个对象。在这种情况下很好，但是如果您要分配一个可变对象（如`x = y = []`），您应该记住 x 和 y 都将指向同一个列表，因此突变会影响两者`x`和`y`。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-23T19:33:21.493

```
i, j = 1 
```

这段代码（功能上）等同于：

```
i = None
for a in 1:
    if i != None and j != None:
        break
    if i == None:
        i = a
    else
        j = a 
```

这当然是非法的，因为`1`它是不可迭代的，这就是解释器告诉你的。

你想要的是：

```
i = j = 1 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-23T19:42:20.530

```
>>> i,j=1,2
>>> i,j=[1,2]
>>> i,j=(1,2)
>>> i,j='12'
>>> i,j={1,2}
>>> i,j={'x':1,'y':1} 
```

适用于所有这些

因此`i,j`，只有在您的右侧`=`提供两个逗号分隔的值或`iterable`具有两个值的 an 时，分配类型才有效。

# php - symfony2 基于注解的表单创建器

> ID：11172359
> 
> 赞同：3
> 
> 时间：2012-06-23T19:30:02.080
> 
> 标签：php, forms, symfony, annotations

我正在研究允许我从类注释自动创建表单的机制。例如，有一个名为“News”的类，带有一些自定义注释。

```
/**
 * @Admin\Form(name="news")
 */
class News
{
    /**
     *
     * @Admin\Field(name="title", type="text")
     */
    private $title;

} 
```

我的目标是编写一种机制来检查是否存在带有“表单”注释的类并基于此类字段创建表单。

我应该把这个机制放在哪里？首先我在考虑写FormFactory，但我相信有一个更好的地方来做这样的事情，也许是Extension？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T01:17:20.437

已经有一个包可以满足您的要求：http: [//knpbundles.com/FlintLabs/FormMetadataBundle](http://knpbundles.com/FlintLabs/FormMetadataBundle)

但是，如果您想自己创建它，您应该创建一个包并在其中创建一个基于doctrine2规范的自定义注释驱动程序（因为Symfony使用Doctrine来读取注释）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T21:04:31.697

[在 Symfony2 中，您可以通过使用“表单类型扩展”](http://symfony.com/doc/2.1/cookbook/form/create_form_type_extension.html)向现有表单字段添加功能。

要将扩展应用于所有字段类型，请将`getExtendedType()`方法的返回值设置为“form”，即：

```
public function getExtendedType()
{
    return 'form';
} 
```

我还没有弄清楚如何从表单扩展中获取注释。

# android - 增加图像视图的大小（android）

> ID：11172361
> 
> 赞同：1
> 
> 时间：2012-06-23T19:30:29.927
> 
> 标签：android

我有一个在 xml 中加载和图像的图像视图。

我想知道，如何以编程方式将图像大小（或缩小）2 倍？（所以加倍或减半）

请帮忙谢谢

# postgresql - 在 Windows Server 2008 上安装 PostgreSQL

> ID：11172365
> 
> 赞同：0
> 
> 时间：2012-06-23T19:31:26.253
> 
> 标签：postgresql, windows-server-2008, windows-server

尝试在 Windows Server 2008 SP2（不是 R2）x86_32 上安装**PGSQL 。**出现“**运行安装后步骤出现问题。安装可能无法正确完成。无法启动数据库服务器**”之类的错误。而且安装不会填充数据目录 - 它是空的。我尝试通过**pg_ctl**（注册并启动）和**initdb**手动启动**PGSQL**，但没有任何效果。通过计算机管理和他的文件夹删除 postgres 用户多次重新安装。再次，没有结果。

 ****伙计们，也许您有关于在 Server 2008 上部署 PGSQL 的良好手册或经验？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T06:13:19.313

任何其他运行问题的人都应该阅读[常见的安装错误](http://wiki.postgresql.org/wiki/Running_%26_Installing_PostgreSQL_On_Native_Windows#Common_installation_errors)、[安装疑难解答](http://wiki.postgresql.org/wiki/Troubleshooting_Installation)和[问题报告指南](http://wiki.postgresql.org/wiki/Guide_to_reporting_problems)。

那里记录了某些 Windows 系统的这个已知问题，并且还提供了有关如何使用足够的信息报告问题以获得答案的建议（包括安装程序日志等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T19:52:33.357

我有解决办法。 [http://forums.enterprisedb.com/posts/list/2448.page](http://forums.enterprisedb.com/posts/list/2448.page) 只需注册 vbscript.dll 并将 VBS 文件与脚本引擎相关联。****

# java - 从属性文件（空格）中读取问题

> ID：11172368
> 
> 赞同：1
> 
> 时间：2012-06-23T19:32:10.107
> 
> 标签：java, html, jsp, internationalization, struts

我在我的网络应用程序中使用 i18n。从 .properties 中读取它。一切都好，但是当我阅读按钮的文本时（type="submit"），它只在第一个空格之前阅读。

jsp文件中的代码：

```
<input type="submit" value=<fmt:message key="button.ok" /> style="width:100"/> 
```

.properties 文件中的代码：

```
button.ok=Sign in 
```

但是，当我从属性读取文本到其他文本字段（不是按钮）时 - 一切正常。例如。

```
<fmt:message key="login.password" /> 
```

并且 login.password=输入您的密码：

PS对不起我的英语:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T01:51:00.933

像这样读

```
<input type="submit" value="<fmt:message key='button.ok'/>" style="width:100"/> 
```

# actionscript-3 - AS3，FlashDevelop：布尔值。你如何 GC 他们？

> ID：11172371
> 
> 赞同：0
> 
> 时间：2012-06-23T19:32:26.740
> 
> 标签：actionscript-3, garbage-collection, boolean, flashdevelop

我正在使用 AS3 和 FlashDevelop，但我似乎无法说服我的 FlashPlayer/AVM 对它进行 GC。

我尝试了非常标准的选项：

```
myboolean = null;
delete(myboolean); 
```

但是对于空值，它表示“col：14 警告：在预期布尔值的地方使用了空值”。并删除我得到“col：11错误：尝试删除固定属性allDone。只能删除动态定义的属性。”

这是考虑到布尔值是在这样的方法中定义的：

```
var myBoolean:Boolean = false; 
```

我很感激，因为它在方法中，当它运行时，它当然应该被垃圾收集，但我想确定，当我对 int、Array 和 Point 做了同样的事情时，为什么我不能 GC 布尔值在同一类的另一个方法中？布尔值不也是一个对象吗？

因此，如果有人知道如何对布尔值进行 GC，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T20:46:16.740

基本上就像 Jonatan Hedborg 所说的，你不能直接控制垃圾收集的内容。

我的猜测是您来自 ac/c++ 背景或类似的背景，您负责更严格和直接地维护内存，AS3 和 Java 并非完全如此；尽管内存管理仍然非常重要，但它更多的是在对象级别处理。虽然 Boolean 是从 Object 扩展而来的，但这里关于原始类型：

> Null 数据类型 Null 数据类型仅包含一个值 null 。这是 String 数据类型和定义复杂数据类型的所有类（包括 Object 类）的默认值。其他基本数据类型（例如 Boolean、Number、int 和 uint）都不包含值 null 。如果您尝试将 null 分配给 Boolean、Number、int 或 uint 类型的变量，Flash Player 和 Adob​​e AIR 会将 null 值转换为适当的默认值。您不能将此数据类型用作类型注释。

[http://help.adobe.com/en_US/ActionScript/3.0_ProgrammingAS3/WS5b3ccc516d4fbf351e63e3d118a9b90204-7f88.html#WS5b3ccc516d4fbf351e63e3d118a9b90204-7f82](http://help.adobe.com/en_US/ActionScript/3.0_ProgrammingAS3/WS5b3ccc516d4fbf351e63e3d118a9b90204-7f88.html#WS5b3ccc516d4fbf351e63e3d118a9b90204-7f82)

在这两种情况下，您确实有一些机制，例如将对象从所有活动对象的图表中分离出来的引用归零，这意味着它们将在垃圾收集器的下一次计划运行时被垃圾收集（可以强制但不是真的推荐，在这种情况下，JVM 或 AVM 的配置将根据它正在运行/执行的系统来处理它）。

清空一个对象将允许它被垃圾收集，但你不应该真正关心单个原始属性。这里有一篇很好的文章解释了 AS3 中垃圾收集的一些细节（我会留下一个摘要，但整个页面都很好，我认为垃圾收集的要点不一定是 100% 直截了当的，但可以通过一些努力托管）： [http ://tomgabob.blogspot.com/2009/11/as3-memory-management.html](http://tomgabob.blogspot.com/2009/11/as3-memory-management.html)

基本上，它的工作方式是 FlashPlayer 或任何正在运行您的（字节）代码的虚拟机，其中包含已创建的所有对象以及当前引用的图形。

它还根据环境（配置等）对可以使用的内存进行了限制，因此 GC 设置了算法来确定何时应该尝试进行垃圾收集。您应该主要关注对不再需要的对象的引用置空，如果您的应用程序不是相当复杂，或者您的硬件在 RAM 方面没有非常严格的限制，这真的没什么大不了的。

因此，关注点不应该是让 GC 运行得太少或太多，而是创建永远不会删除的引用（添加侦听器而不是从应该收集的对象中删除，或者只是在集合中引用它们等等。需要更长的时间）。上面的文章再次更深入地解释了这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T19:36:15.587

你在哪里使用布尔值？确保原语被 GC 处理的唯一方法是确保收集它所使用的类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T09:37:27.153

你的推理有两个错误：

*   'delete' 只能应用于动态对象，不能应用于类成员或局部变量；在这些情况下，只需将成员/变量设置为 null，
*   值类型（布尔值、数字、字符串）不需要进行 GC；在某些情况下，Flash 会创建临时的“装箱对象”，这些对象会被自动收集，因此您不必担心这些。

# objective-c - Big Nerd Ranch 回答，我是否正确声明了这个初始化程序？

> ID：11172374
> 
> 赞同：0
> 
> 时间：2012-06-23T19:32:50.300
> 
> 标签：objective-c, ios

Big Nerd Ranch Guide 中的作业说：

```
Silver Challenge: Another initializer

Create another initializer method for BNRItem. 
This initializer is not the designated initializer of BNRItem. 
It takes an NSString that identifies the itemName of the item and an 
NSString that identifies the serialNumber. 
```

我不确定我是否正确实施了它。它是否正确？

BNRItem.h

```
- (id)initWithItemName:(NSString *)name
        valueInDollars:(int)value
          serialNumber:(NSString *)aNumber;

// I added this for new initializer
- (id)initWithItemName:(NSString *)name serialNumber:(NSString *)aNumber; 
```

BNR项目.m

```
- (id)initWithItemName:(NSString *)name valueInDollars:(int)value serialNumber:(NSString *)aNumber
{
    self = [super init];

    if (self)
    {
        [self setItemName:name];
        [self setSerialNumber:aNumber];
        [self setValueInDollars:value];
        dateCreated = [[NSDate alloc] init];
    }

    return self;
}

// Added the implementation for the new initializer
- (id) initWithItemName:(NSString *)name serialNumber:(NSString *)aNumber
{
    return [self initWithItemName:name valueInDollars:0 serialNumber:aNumber];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T19:34:09.380

是的，你明白了。做得好！

关键点是初始化器的链接，如[Cocoa Fundamentals Guide](http://developer.apple.com/library/mac/#documentation/General/Conceptual/DevPedia-CocoaCore/MultipleInitializers.html)中所述（可能在 BNR 书中）。类中的每个非指定初始化程序都应该调用类的指定初始化程序*，它应该调用超类的 DI。

* * *

旁白：有些人（我就是其中之一）会告诉你[不要在 中使用访问器方法`init`](https://stackoverflow.com/questions/192721/why-shouldnt-i-use-objective-c-2-0-accessors-in-init-dealloc)，但既然你只是在学习，那就按照书上的指示去做。我仅提供此作为进一步阅读材料。

* * *

*除了`initWithCoder:`, 对于任何在看的精确主义者。

# magento - 删除一个magento主题 - 回滚到默认值

> ID：11172377
> 
> 赞同：2
> 
> 时间：2012-06-23T19:33:15.647
> 
> 标签：magento

这是我第一次使用 Magento，发生的事情是这样的：我花了两天时间阅读文档并调整设置以满足我的需要。然后我安装了这个主题：

[http://themeforest.net/item/decostore-magento-theme/1876494?WT.ac=category_thumb&WT.seg_1=category_thumb&WT.z_author=8theme](http://themeforest.net/item/decostore-magento-theme/1876494?WT.ac=category_thumb&WT.seg_1=category_thumb&WT.z_author=8theme)

问题是主题没有按我预期的方式工作，现在我想回滚到默认主题并完全删除这个主题添加到我的安装中的所有内容。

不幸的是，我在安装新主题之前没有备份安装和数据库，我不知道从哪里开始。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T20:03:20.447

**1.切换回默认主题**

转到管理区域，然后`system > configuration > design`

将“当前包名称”更改为“默认”，并确保“主题”部分下的所有输入均为空。这将使您返回默认主题。

**2\. 完全删除该主题添加的所有内容**

我从您的问题中得知您没有使用任何形式的源代码控制。可能是一个考虑未来的想法:)

Magento 1.7 引入了备份和回滚功能，因此您可能还想检查一下。

**如果是这种情况，请在开始删除文件和目录之前备份所有内容，如下所述**

无论如何，要完全删除安装模块时添加的所有文件和目录，不幸的是，这只是手动查找文件和目录删除的情况。

最简单的方法是找到您在购买主题时收到的原始源代码，并从您的站点中删除相应的文件。 **删除目录时要小心，只删除那些特定于主题的目录** - 它会以结构化的方式发送给您，以便您可以轻松地直接拖入您的 Web 根目录 - 因此将包含 Magento 所需的其他一些目录，只是为了给它正确的层次结构。

至少会有特定于主题的文件和文件夹位于以下目录中：

*   应用程序/设计/前端
*   皮肤/前端
*   js

并且很可能还有以下内容：

*   应用程序/等/模块
*   应用程序/设计/adminhtml
*   应用程序/语言环境

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-25T22:43:22.653

我知道每个人的结果可能不同，但如果其他人遇到我的具体情况，是 app/code/community/N98 下的 N98 文件夹导致了问题。特别是他们的 CustomerGroupCheckout 插件，如下所示：[https ://github.com/amenk/N98_CustomerGroupCheckout](https://github.com/amenk/N98_CustomerGroupCheckout)

删除 N98 文件夹会返回配置页面。

# virtualenv - python 和 bpython 在 Virtualenv 中使用不同的 PYTHONPATH

> ID：11172379
> 
> 赞同：2
> 
> 时间：2012-06-23T19:33:20.807
> 
> 标签：virtualenv, pythonpath

我设置的任何虚拟环境的 sys.path 都发生了一些奇怪和意想不到的事情。例如，一个干净的环境：

```
$ virtualenv test
$ source test/bin/activate
(test) $ 
```

这是预期的 PYTHONPATH：

```
(test) $ python
>>> import sys
>>> print '\n'.join(sys.path)

/home/user/test/local/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg
/home/user/test/local/lib/python2.7/site-packages/pip-1.1-py2.7.egg
/home/user/test/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg
/home/user/test/lib/python2.7/site-packages/pip-1.1-py2.7.egg
/home/user/test/lib/python2.7
/home/user/test/lib/python2.7/plat-linux2
/home/user/test/lib/python2.7/lib-tk
/home/user/test/lib/python2.7/lib-old
/home/user/test/lib/python2.7/lib-dynload
/usr/lib/python2.7
/usr/lib/python2.7/plat-linux2
/usr/lib/python2.7/lib-tk
/home/user/test/local/lib/python2.7/site-packages
/home/user/test/lib/python2.7/site-packages 
```

但这是我真正得到的：

```
(test) $ bpython
>>> import sys
>>> print '\n'.join(sys.path)

/usr/bin
/usr/lib/python2.7
/usr/lib/python2.7/plat-linux2
/usr/lib/python2.7/lib-tk
/usr/lib/python2.7/lib-old
/usr/lib/python2.7/lib-dynload
/usr/local/lib/python2.7/dist-packages
/usr/lib/python2.7/dist-packages 
```

我无法弄清楚这两个不同 sys.paths 的原因。因此，没有 pip 安装工作！我正在使用 Virtualenv 1.7.2、Ubuntu 12.04、Python 2.7.3。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-03-04T20:33:46.193

我没有为每个 virtualenv 安装一个 bpython 副本，而是将此函数添加到我的 shell 配置文件中（例如`~/.bashrc`或`~/.zshrc`）。它使用一些逻辑包装 bpython 命令以加载虚拟环境的 python 路径（如果您有一个活动的虚拟环境）。

```
bpython() {
    if test -n "$VIRTUAL_ENV"
    then
        PYTHONPATH="$(python -c 'import sys; print ":".join(sys.path)')" \
        command bpython "$@"
    else
        command bpython "$@"
    fi
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-07-09T17:43:04.107

我发现我需要在安装 bpython 后停用并重新激活我的 virtualenv 才能使其工作。

1.  `pip install bpython`
2.  `deactivate`
3.  `. bin/activate`# 或等效的激活命令

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-23T19:51:03.393

**我的假设是您在激活新的 virtualenv 后还没有安装 bpython。**

我完全按照您提到的方式跟进了它：

```
mkvirtualenv bpython
(bpython)~ $ pip install bpython
(bpython)~ $bpython 
```

然后运行命令：

```
>>> import sys
>>> print '\n'.join(sys.path)

/Users/xxxx/.virtualenvs/bpython/bin
/Users/xxxx/.virtualenvs/bpython/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg
/Users/xxxx/.virtualenvs/bpython/lib/python2.7/site-packages/pip-1.1-py2.7.egg
/Users/xxxx/.virtualenvs/bpython/lib/python27.zip
/Users/xxxx/.virtualenvs/bpython/lib/python2.7
/Users/xxxx/.virtualenvs/bpython/lib/python2.7/plat-darwin
/Users/xxxx/.virtualenvs/bpython/lib/python2.7/plat-mac
/Users/xxxx/.virtualenvs/bpython/lib/python2.7/plat-mac/lib-scriptpackages
/Users/xxxx/.virtualenvs/bpython/lib/python2.7/lib-tk
/Users/xxxx/.virtualenvs/bpython/lib/python2.7/lib-old
/Users/xxxx/.virtualenvs/bpython/lib/python2.7/lib-dynload
/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7
/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-darwin
/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-tk
/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac
/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac/lib-scriptpackages
/Users/xxxx/.virtualenvs/bpython/lib/python2.7/site-packages 
```

并通过在激活的 virtualenv 下运行 python 再次做同样的事情

```
(bpython)~ $ python
.....
>>> import sys
>>> print '\n'.join(sys.path)

/Users/xxxx/.virtualenvs/bpython/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg
/Users/xxxx/.virtualenvs/bpython/lib/python2.7/site-packages/pip-1.1-py2.7.egg
/Users/xxxx/.virtualenvs/bpython/lib/python27.zip
/Users/xxxx/.virtualenvs/bpython/lib/python2.7
/Users/xxxx/.virtualenvs/bpython/lib/python2.7/plat-darwin
/Users/xxxx/.virtualenvs/bpython/lib/python2.7/plat-mac
/Users/xxxx/.virtualenvs/bpython/lib/python2.7/plat-mac/lib-scriptpackages
/Users/xxxx/.virtualenvs/bpython/lib/python2.7/lib-tk
/Users/xxxx/.virtualenvs/bpython/lib/python2.7/lib-old
/Users/xxxx/.virtualenvs/bpython/lib/python2.7/lib-dynload
/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7
/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-darwin
/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-tk
/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac
/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac/lib-scriptpackages
/Users/xxxx/.virtualenvs/bpython/lib/python2.7/site-packages 
```

**我发现这两个结果没有区别**

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-07-25T15:59:51.037

我还发现，如果您在本地安装了 bpython，则需要创建您的 virtualenv 以`--no-site-packages`使其正常工作。如果您在没有该标志的情况下创建了 virtualenv，则可以创建一个名为`no-global-site-packages.txt`in的空文件，`~/.virtualenvs/<env-name>/lib/python2.7/`如[Stack Exchange answer](https://stackoverflow.com/questions/3873294/can-i-change-an-an-existing-virtualenv-to-ignore-global-site-packages-like-n)中所述。

# android - 安卓，wifi唤醒

> ID：11172386
> 
> 赞同：0
> 
> 时间：2012-06-23T19:34:04.383
> 
> 标签：android, widget, wifi

当平板电脑通过电线（充电器/usb）连接时，wifi 不睡眠，当设备拔出时，wifi 进入睡眠状态，当我解锁屏幕时，wifi 的图标为蓝色但我没有互联网连接，有时图标是灰色的，我也没有互联网。

我已经编程，如果没有连接和连接到服务器超时我得到错误，这些功能在图标为灰色时工作，但如果图标为蓝色，小部件挂起，当我关闭 wifi 时它再次工作， 怎么了？我认为如果有蓝色图标，它认为我已经连接到互联网，但我接下来检查服务器是否响应（3 秒）并且它应该可以工作。但它会思考和思考，直到关闭 wifi。

在手机上我有 2.2，我没有任何问题，在平板电脑上我有 4.0.3

```
wifi = conn.getNetworkInfo(ConnectivityManager.TYPE_WIFI);      
mobile = conn.getNetworkInfo(ConnectivityManager.TYPE_MOBILE);
        if (wifi.isConnected() || mobile.isConnected()) {
            try {
                URL url = new URL(uri);
                HttpURLConnection urlc = (HttpURLConnection) url.openConnection();
                urlc.setConnectTimeout(3000);
                urlc.connect();
                if (urlc.getResponseCode() == 200) { 
                    return true;
                } else { 
                    return false;
                }
            } catch (IOException e) {

                return false;
            }
        } else {
            return false;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T06:41:37.237

Android 4.0 使用更激进的节能方法，可能会咬你。我只是重新启用 wifi... 连接设置需要 3 到 5 秒才能获得新的 DHCP 租约。如果它已经知道你是谁（即 IP），它会更快。可能是 Android 休眠和您的 AP 设置过于激进地释放租约 (TTL) 的组合。您在什么平板电脑和 wifi 路由器上遇到此问题？

```
 WifiManager wifi;
 wifi = (WifiManager) this.getSystemService(Context.WIFI_SERVICE);
 WifiInfo wifiInfo = wifi.getConnectionInfo();  // extra if you want connection info
 wifi.setWifiEnabled(true);  // turn it on , if its already on no harm. 
```

# c++ - C++ 错误 C2801：'operator =' 必须是非静态成员

> ID：11172389
> 
> 赞同：2
> 
> 时间：2012-06-23T19:34:28.800
> 
> 标签：c++, class, templates, overloading, operator-keyword

我正在尝试`operator=`在模板类中重载。

我有这个模板类：

```
template <class T>
class Matrice
{
    T m,n;
public:
    template <class V>
    friend Matrice<V>& operator=(const Matrice<V> &);
};

template <class T>
Matrice<T>& Matrice<T>::operator=(const Matrice<T> &M)
{
    /*...*/
    return *this;
} 
```

我也试过：

```
template <class T>
class Matrice
{
    T m,n;
public:
    template <class V>
    Matrice<V>& operator=(Matrice<V> &);
};

template <class T>
Matrice<T>& operator=(Matrice<T> &M)
{
    /*...*/
    return *this;
} 
```

但我仍然收到此错误：

```
error C2801: 'operator =' must be a non-static member 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T19:38:38.233

> 错误 C2801：'operator =' 必须是非静态**成员**

粗体字是这里的关键。`friend`不是会员；这是一个朋友。删除该`friend`关键字并将`operator=`其视为成员：

语法正确的版本是：

```
template <class T>
class Matrice
{
    T m,n;
public:
    template <class V>
    Matrice<V>& operator=(const Matrice<V> &);
};

template <class T>
template <class V>
Matrice<V>& Matrice<T>::operator=(const Matrice<V> &M)
{
    /*...*/
    return *this;
} 
```

虽然我认为在`template <class V>`那里使用它是错误的；*语义上*正确的版本是

```
template <class T>
class Matrice
{
    T m,n;
public:
    Matrice<T>& operator=(const Matrice<T> &);
};

template <class T>
Matrice<T>& Matrice<T>::operator=(const Matrice<T> &M)
{
    /*...*/
    return *this;
} 
```

说明：你一般不希望这样**赋值** ；如果你必须这样做，那么它可能是糟糕设计的标志。`Type<V>``Type<T>`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-23T19:44:01.183

标准说

> **12.8 复制和移动类对象**[class.copy]
> 
> ...
> 
> *17*用户声明的复制赋值运算符`X::operator=`是类 X 的非静态非模板成员函数，只有一个类型为 X、X&、const X&、volatile X& 或 const volatile X& 的参数。

友元函数不能满足这些要求。它必须是成员函数。

* * *

为了解决这只是“普通”分配而不是复制分配的评论，让我们从标准中添加另一个引用：

> **13.5.3 赋值**[over.ass]
> 
> 赋值运算符应该由一个只有一个参数的非静态成员函数来实现。

在标准语中，“shall”不会留下任何选项来做任何其他事情。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-23T19:48:59.740

您混合了*朋友*和*成员*的声明和定义：在第一个示例中，您声明`operator=`为*朋友*，但将其定义为类成员。在第二个示例中，您声明`operator=`为成员，但尝试将其定义为非成员。您`operator=`必须是会员（请参阅[此问题](https://stackoverflow.com/questions/3933637/why-friend-function-cant-be-used-for-overloading-assignment-operator)为什么），您可以执行以下操作：

```
template <class T>
class Matrice
{
    T m,n;
public:
    Matrice<T>& operator=(Matrice<T> &);
};

template <class T>
Matrice<T>& Matrice<T>::operator=(Matrice<T> &M)
{
    /*...*/
    return *this;
} 
```

# php - 团队环境设置和远程工作

> ID：11172391
> 
> 赞同：1
> 
> 时间：2012-06-23T19:34:45.423
> 
> 标签：php, vim

我们正在做一个越来越大的项目。到目前为止，我们的工作是这样的：

*   我有一个 Web 服务器，我直接通过 SSH 使用 VIM 进行编码
*   另一个程序员向我发送新文件，我添加它们并集成它们（他有一个项目和本地服务器的副本）
*   设计师发给我设计我也整合它。

这几乎是浪费时间，因为每次他们做出改变我都必须整合它。

现在我们有一个不支持 SSH 的主机（我现在不能使用 vim）。我们应该如何处理这样的项目？我应该如何设置我的 VIM 来处理远程项目（我不想每次要更改文件时都下载和上传）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T19:40:07.450

我建议使用版本管理软件`git`，例如 SSH 挂钩，它会自动将更改上传到您的服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T21:49:08.033

你没有提到你的操作系统。如果您想要一个准确的答案，那肯定会很高兴。

第一件事是找到一个更好的主人。您可以以低至 40 或 50 欧元或更低的价格租用非常不错的专用服务器。如果您的项目很大且很严肃，50 欧元/月或 100 欧元或 200 欧元是完全可以接受的，您可以安装/启用任何您需要的东西。根据项目的大小，一个 VPS 就足够了。不管价格如何，没有 SSH 访问权限的网络主机比狗屎还要糟糕。

但是你可能在那个区域没有任何权力。

由于您的服务器不支持 SSH，因此不能选择合适的 VCS。我看到的唯一实用的解决方案是相当“老派”，但它们有效：

**解决方案 A：**

1.  使用 FTP 客户端在本地计算机上下载整个站点。
2.  在本地编辑。
3.  使用本地 Web 服务器测试您的更改。
4.  当您的测试正常时上传更改的文件。

**解决方案 B：**

1.  使用 FTP 客户端连接到您的服务器。
2.  使用其“本地编辑”功能在 Vim 中打开文件。
3.  写入您的更改，文件会在服务器上自动更新。

**解决方案 C：**

使用 Vim 的捆绑`netrw`插件：`:e ftp://host/path/to/file`. 见`:h netrw`。

请注意，无论您是否注意到，该过程将**始终**是。`download -> edit -> save -> upload`根据您选择的解决方案，该过程可能非常重复且效率低下或几乎完全不可见。

但是，说真的，获得另一台服务器并使用 VCS*和*本地服务器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T19:39:35.507

您可以使用版本管理器，如 git，并在每次有稳定版本时在 Web 服务器中进行 git pull。

您的合作者可以推送新内容，您不需要自己管理文件。

# .net - .NET 对象的默认 XML 序列化模式

> ID：11172394
> 
> 赞同：0
> 
> 时间：2012-06-23T19:35:02.107
> 
> 标签：.net, visual-studio-2010, xml-serialization, application-settings

我一直在努力将名称/值或字典条目添加到 VS2010 项目的 Settings.settings 文件中。不幸的是，由于某种原因，内置设计器不允许您轻松输入这些类型的数据（命名空间是 System.Collections.Specialized）。

我想手动添加其中一种数据类型（例如 ListDictionary 或 StringDicitonary），但我找不到参考 XSD 来描述用于序列化数据的 XML 模式。

在哪里可以找到这些信息？理想情况下，它应该是一个包含所有 .NET 类型或子类型的 XSD。我认为这应该很容易找到，但到目前为止它一直令人生畏。

我意识到我可以编写一个小程序来序列化这些数据类型中的每一个，并创建一个示例列表，但这似乎应该已经存在于某个地方。

# mysql - LIMIT 在 JOIN 之前还是之后有效？

> ID：11172397
> 
> 赞同：6
> 
> 时间：2012-06-23T19:35:12.450
> 
> 标签：mysql, performance, join, limit

这是一个简单的问题——我只是找到了不同的答案，所以我不确定。让我描述一下：

如果你有一个查询，像这样：

```
SELECT logins.timestamp, users.name
FROM logins 
LEFT JOIN users 
ON users.id = logins.user_id
LIMIT 10 
```

这基本上将列出表的最后 10 个条目，用JOIN`logins`替换。`user_id``username`

现在我的问题是，LIMIT 是在 JOIN 发生时生效（因此它只加入前 10 个条目）还是在 JOIN 之后生效？（它将加入整个表格，然后删除前 10 个条目）。

我问这个是因为示例表`logins`会有很多条目——而且我不确定 JOIN 是否在性能方面过于昂贵。如果 LIMIT 只会发生 10 次 JOIN，那将不是问题。

提出的第二个问题：如果添加了 DISTINCT，功能是否相同？它还会在 10 个条目时停止吗？不，这不会由 ORDER BY 订购。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-23T19:38:31.980

不用担心。LIMIT 将与 join 同时发生：MySQL 不会读取整个 logins 表，而是逐行获取（每次加入用户），直到找到 10 行。

请注意，如果 users.id 在表中出现两次，则 JOIN 将复制登录行并添加每个用户行。总行数仍为 10，但您将有 9 次登录。

# wpf - 更改列表框中的 TextBlock 文本

> ID：11172402
> 
> 赞同：0
> 
> 时间：2012-06-23T19:35:36.540
> 
> 标签：wpf, xaml, text, textblock, listboxitem

我有一个`ListBox`由这样的项目组成：

```
<ListBoxItem>
    <ListBoxItem.ContentTemplate>
        <DataTemplate>
            <TextBlock Text="{Binding Path=department}"></TextBlock>
        </DataTemplate>
    </ListBoxItem.ContentTemplate>
</ListBoxItem> 
```

部门是一个字符串属性：text="dept1\dept2\dept3\dept4\dept5\dept6" 我的问题是，当`ListBox`大小改变时，我想以`TextBlock`这种方式更改文本： text= dept1\dept2\...\dept6 .

(dept1\dept2\...\dept6) 的长度等于或小于`ListBoxItem`实际大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T19:45:09.133

您需要像这样将 TextBlock 的 TextTrimming 属性设置为 CharacterEllipsis -

```
<TextBlock Text="{Binding Path=department}" TextTrimming="CharacterEllipsis"/> 
```

但是，如果它大于列表框的大小，这将在文本末尾显示省略号。像这样的东西 - “dept1\dept2\dept3\dept4\dept5...”

但是，如果您希望它位于中心，您可能必须使用它`ValueConverter`来格式化字符串。这可能会有所帮助[-WPF ListView 中字符串开头的省略号](https://stackoverflow.com/questions/612774/ellipsis-at-start-of-string-in-wpf-listview)

# iphone - 解析 (MediaWiki) API 入门

> ID：11172407
> 
> 赞同：0
> 
> 时间：2012-06-23T19:36:41.697
> 
> 标签：iphone, asihttprequest, mediawiki-api

我想创建一个可以解析 MediaWiki API 的 iOS 应用程序，这样我就可以显示文章等。

我找到[了 ASIHTTPRequest](http://allseeing-i.com/ASIHTTPRequest/)但开发人员不再处理它。我应该用什么来代替这个？或者我应该阅读哪些文档来开始这个主题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T04:14:34.413

如果您没有在 iOS 上编写过异步网络代码，那么我将首先[从 Apple 的 URL 加载系统编程指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html)开始。如果您更喜欢另一个抽象级别，您可以使用另一个包装库，如[AFNetworking](https://github.com/AFNetworking/AFNetworking)，但我仍然建议作为第一步学习 URL 加载系统。

# algorithm - SURF vs SIFT，SURF真的更快吗？

> ID：11172408
> 
> 赞同：31
> 
> 时间：2012-06-23T19:36:58.640
> 
> 标签：algorithm, opencv, sift, surf

我正在使用[SURF](http://docs.opencv.org/3.0-beta/doc/py_tutorials/py_feature2d/py_surf_intro/py_surf_intro.html)和[SIFT](http://docs.opencv.org/3.1.0/da/df5/tutorial_py_sift_intro.html#gsc.tab=0)测试一些对象检测。

SURF 声称比 SIFT 更快、更健壮，但我在测试中发现**这不是真的**。中等图像 (600*400) 的 SIFT 与 SURF 的速度相同，并且可以很好地识别物体（甚至可能比 SURF 更好）。

难道我做错了什么？

**[编辑]**

请注意，有[一篇文章](http://computer-vision-talks.com/2011-06-07-a-few-thoughts-about-cvround/)解释了如何通过对 opencv 代码进行一些更改来更快地实现 SURF。

如果你认识一些活跃的 opencv 开发者，请让他看看。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-07-02T21:02:28.887

当它被设计时，它的目的是更快，但实际上，这些差异与标准相机的实时应用无关。顺便说一句，FAST 检测器速度更快，而且相当稳健。我正在为手机上的实时增强现实编程，我们在应用程序执行期间结合使用 SIFT（初始化）和 FAST（用于实时特征检测的金字塔 FAST）。FAST 速度更快，而且它是在 OpenCV 中实现的，所以如果您不想坚持使用 SURF，可以尝试一下。我还没有看到最近使用 SURF 进行实时的论文，但我看到了 SIFT 的修改版本，描述符和其他类型的修改的像素更少，所以看起来 SURF 是一个没有得到的好主意据认为。无论如何，这只是我的意见。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-12-02T18:21:38.187

OpenCV 在速度或稳定性方面没有最好的 SURF 实现。如果要计算两个编写良好的实现的 FLOPS，SURF 基本上比 SIFT 快得多。SIFT 通过使用大的高斯核对图像进行多次卷积来计算图像金字塔，而 SURF 使用积分图像来完成近似。

要查看几种 SURF 实现的比较，请查看我的页面：

[http://boofcv.org/index.php?title=性能：冲浪](http://boofcv.org/index.php?title=Performance:SURF)

不幸的是，OpenCV 由于跨平台问题拒绝了与舍入相关的补丁。也许补丁会被调整并重新提交。在我自己的工作中，我注意到通用的 round() 非常慢，并用自定义函数代替了它。

至于 Jav_Rock 提到的 FAST 检测器，我只将其用作最后的手段。它的检测器比其他任何东西都不稳定，但它确实很快。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-23T19:45:53.790

SURF 应该更快，而 SIFT 更健壮。Astor 说 600*400 在今天的标准下是一个小图像是正确的；尽管。

也就是说，SURF 应该比 SIFT 快很多数量级。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-04-12T21:36:46.717

请使用[SURF 的原始实现](https://github.com/herbertbay/SURF)进行测试。打开 CV 速度较慢。

在比较 SIFT 和 SURF 的原始实现时，[您将使用 SURF 获得更快的结果](http://www.vision.ee.ethz.ch/~surf/eccv06.pdf)。通过调整参数，您可以更快地提高一个数量级。但是，稳健性可能会受到影响。这一切都取决于您的用例。

一般来说，SURF 和 SIFT 一样健壮。根据数据集的不同，您可能会得到不同的结果，但*总体而言*，它们在鲁棒性方面是相同的。

还有一些[SURF 的 GPU 实现](http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.192.2630&rep=rep1&type=pdf)比我原来的实现要快得多。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-12-10T10:06:54.310

没有任何改变，如果你在 OPENCV 中应用 SIFT 和 SURF，SIFT 似乎比 SURF 快，但事实并非如此。为了证明我已经在 393*387 像素的图像上测试了它们。在运行相同的特征提取 100 次并获得它们的平均时间后，结果是

***SIFT: 0.0983946(s)***

***冲浪：0.183372(s)***

但是关键点的个数有很大的区别， ***SIFT：kpsize = 671 d-row = 671 d-col = 128***

***冲浪：kpsize = 1156 d-row = 1156 d-col = 64***

SURF 返回的关键点数几乎是 SIFT 的两倍，因此说 SIFT 比 SURF 快是不公平的。

当我们使用 Fast 作为检测器时，然后应用 SIFT，SURF：

***SIFT: 0.199448(s)*** ***SURF: 0.0613682(s)***

***SIFT：kpsize = 2362 d-row = 2362 d-col = 64***

***冲浪：kpsize = 2362 d-row = 2362 d-col = 64***

在这里，SURF 比 SIFT 快三倍。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-08-14T14:48:46.577

我提高了我的 Surf 特征检测器的速度，不是在每一帧上都应用它，而是在每 6 帧上应用它，这对我的应用程序来说没问题。做一个计数器i，做一个if语句if(i%6==0)，把你的代码放在这个if语句下面，速度会提高

# java - 应用程序架构 - 如何将 Swing 应用程序连接到后端？

> ID：11172412
> 
> 赞同：1
> 
> 时间：2012-06-23T19:38:00.137
> 
> 标签：java, swing, jakarta-ee, jmx, javadb

我们正在开发一个通过 SSL 提供 Web 服务的 java 应用程序。此应用程序在 Tomcat 服务器中运行。
Web 服务的目的是插入、更新和选择数据。因此，在 Web 服务层下实现了后端层，它提供对数据库的访问。

突然，我们被要求构建一个 Swing 应用程序，它也将访问数据库中的数据。我们希望使用用于 Web 服务应用程序的相同后端（完全相同的运行时）。如何达到这个目标？

我看到以下可能性：

1.  使用 web 应用程序而不是 swing 应用程序，它将与 web 服务应用程序一样属于同一个项目的一部分，然后它将能够连接后端

2.  仅为 Swing 应用程序提供一些额外的 Web 服务。

3.  使用 JMX。可以在 Tomcat 上运行 JMX。后端可以通过 JMX 提供功能，而 Swing 应用程序可以连接它。

这些可能性中的每一种都有优点和缺点。我们遵循解决方案 3，我认为这不是一个聪明的选择。JMX 有泛型问题，你只能在 tomcat 等上运行一个 JMX。

Java 世界很丰富，应该有一些针对这种情况的最佳解决方案。你能帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T19:44:50.863

向 Swing 应用程序添加一个 Web 服务客户端，让它对 Web 服务进行与基于浏览器的 UI 完全相同的调用。

如果您愿意，您当然可以自由添加额外的、仅限 Swing 的 Web 服务。

我认为 JMX 只不过是一种允许您使用 JConsole 监视 MBean 的方法。这和Swing有什么关系？

# dictionary - 在 python 中有一个嵌套字典，并希望以一种有效的方式附加到它

> ID：11172414
> 
> 赞同：0
> 
> 时间：2012-06-23T19:38:14.770
> 
> 标签：dictionary, nested, python

我正在寻找最好的pythonic方法来做到这一点。

嵌套字典看起来像这样（主脚本）：

```
my_dict = { test: { 
                   test_a: 'true',
                   test_b: 'true
                  } 
```

我正在导入一个具有返回数值的函数的模块。

我正在寻找一种从模块返回的字典中附加到 my_dict 字典的方法。

即来自模块的功能：

```
def testResults1():
  results = 3129282
  return results

def testResults2():
  results = 33920230
  return results

def combineResults():
  Would like to combine results, and return a dictionary. Dictionary returned is:
  # Looking for best way to do this.

  test_results = { 'testresults1': 3129282, 
                   'testresults2': 33920230
                  } 
```

然后我想将 test_results 字典附加到 my_dict。也在寻找最好的方法来做到这一点。

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T00:25:50.607

```
my_dict = {}

def testResults1():
  results = 3129282
  return results

def testResults2():
  results = 33920230
  return results

def combineResults():
  suite = [testResults1, testResults2]

  return dict((test.__name__, test()) for test in suite)  

my_dict.update(combineResults())
print my_dict 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T01:52:59.090

```
import collections
my_dict = collections.defaultdict(lambda: {})

def add_values(key, inner_dict):
    my_dict[key].update(inner_dict) 
```

[你可以在这里](http://docs.python.org/library/collections.html#collections.defaultdict)阅读`collections.defaultdict`图书馆文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T19:39:52.963

你在找`dict.update()`方法吗？

```
>>> d = {'a': 1, 'b': 2}
>>> d2 = {'c': 3}
>>> d.update(d2)
>>> d
{'a': 1, 'b': 2, 'c': 3} 
```

# php - PHP嵌套While循环不适用于mysql_fetch_assoc

> ID：11172416
> 
> 赞同：4
> 
> 时间：2012-06-23T19:38:37.550
> 
> 标签：php, mysql, while-loop

我测试了循环嵌套的 While 语句，所以：

```
$count1 = 0;

while ($count1 < 3) {
 $count1++;
 $count2 = 0;
 echo "count1: ".$count1."<br />";

    while ($count2 < 3) {
    $count2++;
    echo "count2: ".$count2."<br />";
    }
} 
```

这完美地工作（每个循环三次），结果：

```
count1: 1
 count2: 1
 count2: 2
 count2: 3
count1: 2
 count2: 1
 count2: 2
 count2: 3
count1: 3
 count2: 1
 count2: 2
 count2: 3 
```

然后我尝试了使用 mysql_fetch_assoc 的循环（$ContactsInterests 是一个两行关联数组，$LatestNews 有 50 行），即

```
$CI_count = 0;

while ($CI_Row = mysql_fetch_assoc($ContactsInterests)) { //loop thru interests
$CI_count++;
$LN_count = 0;
echo "CI_count: ".$CI_count."<br />";

while ($LN_Row = mysql_fetch_assoc($LatestNews)) { //loop thru news
    $LN_count++;
    echo "LN_count: ".$LN_count."<br />";

}
} 
```

结果是：

```
CI_count: 1
 LN_count: 1
 LN_count: 2
 ...
 LN_count: 50
 LN_count: 51
CI_count: 2 
```

但是 LN_count 的第二次迭代在哪里？我不明白为什么 LN_count 没有第二次增加。

帮助表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T19:47:12.220

[mysql_fetch_assoc](http://us.php.net/mysql_fetch_assoc)对“mysql 结果”类型进行迭代。为每次提取寻找索引。你必须使用[mysql_data_seek](http://us.php.net/manual/en/function.mysql-data-seek.php)去第一个结果，比如；

```
<?php

    $CI_count = 0;

    while ($CI_Row = mysql_fetch_assoc($ContactsInterests)) { //loop thru interests
        $CI_count++;
        $LN_count = 0;
        echo "CI_count: ".$CI_count."<br />";

        mysql_data_seek($LatestNews,0);
        while ($LN_Row = mysql_fetch_assoc($LatestNews)) { //loop thru news
            $LN_count++;
            echo "LN_count: ".$LN_count."<br />";

        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T19:43:27.683

因为结果已经用尽了。您已经遍历了所有这些...如果您想再次循环，您必须重新填充 $LatestNews 变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T19:43:29.997

`mysql_fetch_assoc()` 一个接一个地取出源的行，当您进入第一个循环的第二步时，源变量中不会有任何行。

您需要将第二个查询的结果放入一个数组中，然后循环该数组，而不是使用 mysql_fetch_assoc。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-23T19:43:59.850

您需要重置mysql内部指针：

见[http://php.net/mysql_data_seek](http://php.net/mysql_data_seek)

# qt - 用鼠标移动物体

> ID：11172420
> 
> 赞同：6
> 
> 时间：2012-06-23T19:39:01.413
> 
> 标签：qt, drag, qlabel

我使用 Qt，我想用鼠标移动一些对象。例如，用户单击对象并将该对象拖到窗口的另一个位置。我该怎么做？

我试过mouseMoveEvent：

```
void QDropLabel::mouseMoveEvent(QMouseEvent *ev)
{
    this->move(ev->pos());
} 
```

但不幸的是，物体的移动方式很奇怪。它从一个地方跳到另一个地方。

QDropLabel 继承 QLabel。它还提供了一个像素图。我试图用不同的对象来做，但结果是一样的。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-25T07:20:51.890

您的可移动小部件必须有一个`QPoint offset`成员。它将存储光标单击相对于小部件左上角的位置：

```
void DropLabel::mousePressEvent(QMouseEvent *event)
{
    offset = event->pos();
} 
```

在鼠标移动事件中，您只需在其父坐标系中移动小部件。请注意，如果您不`offset`从光标位置减去，您的小部件将“跳跃”，因此其左上角将位于光标下方。

```
void DropLabel::mouseMoveEvent(QMouseEvent *event)
{
    if(event->buttons() & Qt::LeftButton)
    {
        this->move(mapToParent(event->pos() - offset));
    }
} 
```

# ios - 如何在 iPhone 上自动安装应用程序？

> ID：11172424
> 
> 赞同：-3
> 
> 时间：2012-06-23T19:39:30.953
> 
> 标签：ios, installation

我正在寻找一种在 iPhone 上自动安装应用程序的方法。一个例子是：

我有一个名为 my.app 的应用程序。它位于我的 Mac 桌面上。

当我将 iphone 插入计算机时，它会自动将 my.app 安装到我的 iphone 上。

这可能吗？关于我如何做到这一点或获得解决方法的任何想法？

或者，它需要提示用户安装它。该应用程序不需要自动安装；它只需要在 iPhone 上自动提示用户询问他们是否要安装它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T19:45:33.663

从法律上讲，你不能。Apple（可能还有一些授权的第三方）负责使用 App Store 交付包裹。

但是，如果您不“关心”法律部分，请尝试越狱手机。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T03:11:06.680

如果您使用苹果配置器（您可以在 Mac 应用商店中找到它）将您的设备设置为受监督设备，您可以编辑它的配置文件以包含您想要的所有应用程序。如果您更新配置文件（添加、删除、更新应用程序），当您在 Apple 配置器运行时插入设备时，设备将会更新。

如果您的意图只是绕过应用商店，您可以使用 Web 部署（需要有效的临时或企业分发配置文件，就像苹果配置器 - 或越狱设备）。请参阅本指南：[http ://help.apple.com/iosdeployment-apps/#app43ad871e](http://help.apple.com/iosdeployment-apps/#app43ad871e)

# c++ - 移植的 Qt 程序（Windows 到 linux）分段错误

> ID：11172429
> 
> 赞同：2
> 
> 时间：2012-06-23T19:40:07.130
> 
> 标签：c++, linux, qt, segmentation-fault

我目前正在将我的一个 Qt 程序从 Windows 移植到 Linux。使用 Qt 的有用宏我设法编译了程序，但还没有成功地使它工作。

它是一个存在于 2 个库和一个主应用程序中的程序。在 Windows 上它工作正常并且没有 Windows 本地调用。但是当我运行我的应用程序时，我不断地遇到分段错误。

调试我的程序后，我得到以下结果：

```
#0  0x00fb098a in ?? () from /usr/lib/i386-linux-gnu/libQtCore.so.4
#1  0x00fc115d in QObject::connect(QObject const*, char const*, QObject const*, char const*, Qt::ConnectionType) () from /usr/lib/i386-linux-gnu/libQtCore.so.4
#2  0x001355d3 in Communicator::init(int) () from ~/QtWorkspace/App/Communication/libCommunication.so.1
#3  0x0013f7c3 in Updater::Updater(QWidget*) () from ~/QtWorkspace/App/Updater/libUpdater.so.1
#4  0x0806a2f9 in Controller::Controller(QObject*, int, char**) ()
#5  0x08051a26 in main () 
```

控制器是我的主应用程序的一部分，它调用第一个库（更新器），它调用第二个库（通信器）。在 Communicator 中发生了很多连接，但与 Windows 应用程序没有什么不同。

我使用 LD_LIBRARY_PATH 来确保库的加载正确，并使用 Qt Creator 编译我的应用程序。这一切都是在 Ubuntu 12.04 和 Windows 7 操作系统上完成的。

提前致谢 ！

吉列尔

**编辑：**

感谢您的快速回复，我在调试模式下编译时遇到了问题，但现在已经解决了。所以我运行了 QtCreator 的调试器，发现它出了问题，问题是我没有看到原因。这是出错的代码：

```
fSocket = new QUdpSocket(this);
fSocket->bind(QHostAddress::Any, 0, QUdpSocket::DontShareAddress);
connect(fSocket, SIGNAL(readyRead()), this, SLOT(readPendingDatagrams())); 
```

正如我已经说过的，段错误发生在连接中。

多个版本的库的问题是一个合理的问题，但我认为至少 QtCreator 在那里是安全的。此外，如果我与*ldd*检查，我看不到任何问题。

**编辑2：**

根据请求将 Qt 源添加到 gdb 后的调试结果（尽管 .gdbinit 在启动时读取，但似乎在 QtCreator 中不起作用？）：

```
#0  indexOfMethodRelative<8> (normalizeStringData=false, method=0x139efd "readPendingDatagrams()", 
    baseObject=0xbfffeff4) at kernel/qmetaobject.cpp:530
#1  QMetaObjectPrivate::indexOfSlotRelative (m=0xbfffeff4, slot=0x139efd "readPendingDatagrams()", 
    normalizeStringData=false) at kernel/qmetaobject.cpp:665
#2  0x00fc915d in QObject::connect (sender=0x825b2d0, signal=0x139f44 "2readyRead()", receiver=0xbffff160, 
    method=0x139efc "1readPendingDatagrams()", type=Qt::AutoConnection) at kernel/qobject.cpp:2592
#3  0x00137622 in Communicator::init (this=0xbffff160, timeOut=5000)
    at ../../App/Communication/communicator.cpp:25
#4  0x00143dcc in Updater::Updater (this=0xbffff148, parent=0x0) at ../../App/Updater/updater.cpp:10
#5  0x0806b2ae in Controller::Controller (this=0xbffff120, parent=0x0, argc=1, argv=0xbffff2b4)
    at ../../App/App/controller.cpp:4
#6  0x08054bbe in main (argc=1, argv=0xbffff2b4) at ../../App/App/main.cpp:18 
```

也许这会有所帮助？readPendingDatagrams() 是一个私有插槽。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T20:18:22.727

首先，`QObject::connect`调用可能是某些回调未能绑定到信号的指标（回调/信号是 Qt 机制）。这可能是由于在 Linux 上使用的 Qt 版本与在 Windows 上使用的不同。

其次，你可能想在 Qt Creator 下调试它，它是一个很好的调试工具。

在 上设置断点`Communicator::init()`，并找出失败的`connect()`调用。然后将传递给此`connect()`调用的参数与安装在 Ubuntu 机器上的 Qt 版本所需的参数进行比较。如果您可以在 `Communicator::init()`此处发布您的代码，那也很好，因此人们可以查看它并帮助您。

另一个原因可能是您正在使用一个版本的 Qt 进行编译，而安装的共享库在该框中是另一个版本......这只是一个疯狂的猜测，但值得仔细检查。

即使不是 Qt 版本问题，通过查看失败的调用来开始调查总是好的。也可能是它找不到 Windows 上存在的某些系统变量，并且正在传递一些空字符串 / NULL 字符串，其中需要一个实际的有效值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T20:15:56.457

我通过创建一个完整的新项目并复制每个文件自己解决了这个问题。因此，我认为错误必须存在于用户文件中。

谢谢大家的建议！

# sql-server - 是时候在 asp.net MVC 中向 Sql Server 发送查询了

> ID：11172442
> 
> 赞同：0
> 
> 时间：2012-06-23T19:41:50.590
> 
> 标签：sql-server, entity-framework-4

假设我有一个简单的 ASP.NET MVC Web 应用程序和一个（本地）Sql Server。作为 ORM，我使用的是 Entity Framework 4.3.1

为了弄清楚 ORM 端需要多长时间，我准备了一个简单的选择查询并打印出时间戳，比如

```
 ...
 using (var context = Entities()) 
 {
     (1) timestamp1
     var list = context.Database.SqlQuery<Entity>("select * from entities").ToList();
     (2) timestamp2
 }
 ... 
```

同时，我查看了 Sql Server Profiler 以查看查询开始/结束时间。

结果如下（注意只显示毫秒，因为查询处理时间小于1sec）

1.  时间戳 1：149 毫秒
2.  查询开始时间：197 毫秒
3.  查询结束时间：198 毫秒
4.  时间戳2：199毫秒

问题）为什么在开始查询之前花了这么多时间（48 毫秒，197-149 毫秒）？有什么办法可以减少这种情况吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T20:06:00.370

ADO.NET EF 需要自行初始化，您会发现将来的查询执行时不会有太多延迟。另外不要忘记 SQL Server Profiler 只记录查询的执行时间，而不是与网络传输和其他开销相关的时间。

与激活 SQL Server 相关的速度也可能会变慢 - 您说它在您的计算机上是本地的，因此 SQL Server 的组件可能被调出到磁盘。在专用 SQL Server 机器上运行时性能如何？

# c# - 如何使用 MVVM 在双击列表框项上触发命令？

> ID：11172443
> 
> 赞同：9
> 
> 时间：2012-06-23T19:41:57.690
> 
> 标签：c#, wpf, mvvm, dependency-properties

当用户双击列表框项目时，我正在尝试启动 ICommand。另外，我正在尝试使用 MVVM 模式来做到这一点。

在这个 XAML 中，按键“p”可以正常工作。当我双击列表框时，该命令永远不会启动。我设置了一个断点来确认“PlayVideoCommand”不是通过双击调用的。我错过了什么还是我必须使用 Setter（我不熟悉）？

```
<ListBox Name="SmallVideoPreviews" Grid.Column="1" MaxHeight="965"
    ItemsSource="{Binding BrowseVideos}" 
    ItemTemplate="{StaticResource BrowseTemplate}">
    <ListBox.InputBindings>
        <KeyBinding Key="p" 
            Command="{Binding PlayVideoCommand}"
            CommandParameter="{Binding ElementName=SmallVideoPreviews, Path=SelectedItem}"/>
        <MouseBinding Gesture="LeftDoubleClick"
            Command="{Binding PlayVideoCommand}"
            CommandParameter="{Binding ElementName=SmallVideoPreviews, Path=SelectedItem}"/>
    </ListBox.InputBindings>
</ListBox> 
```

双击和“p”都应该执行相同的命令。使用鼠标时，我可以看到 listboxitem 被选中。我有一种预感，MouseBinding Command 属性不是依赖属性，但我不知道如何确认这一点。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-23T20:30:17.793

您的示例中发生的情况是列表框本身对双击做出反应，但仅在列表框项目未覆盖的部分区域中。

您需要将事件处理程序绑定到列表框项。

一些方法在这里： [双击列表框项目以打开浏览器](https://stackoverflow.com/questions/821564/double-click-a-listbox-item-to-open-a-browser)

还有一些关于为什么 MVVM 中的一些代码隐藏不一定是可怕的事情的讨论： [使用 MVVM 从 WPF ListView 项目中触发双击事件](https://stackoverflow.com/questions/1035023/firing-a-double-click-event-from-a-wpf-listview-item-using-mvvm)

更多讨论： [http ://social.msdn.microsoft.com/Forums/en-US/wpf/thread/9fb566a2-0bd6-48a7-8db3-312cd3e93340/](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/9fb566a2-0bd6-48a7-8db3-312cd3e93340/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T20:31:42.440

似乎 ListBox 不处理对 ListBoxItem 的双击。这是一个很好的答案： [Can't bind Command to ListBox](https://stackoverflow.com/questions/5545187/wpf-how-to-bind-a-command-to-the-listboxitem-using-mvvm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-02T08:39:20.887

有人可能会争论天气或不代码隐藏是可怕的，但它可能使用命令。像这样将 LeftDoubleClick 手势添加到 ItemTemplate：

```
<UserControl.Resources>
    <DataTemplate x:Key="BrowseTemplate" >
        <StackPanel >
            <StackPanel.InputBindings>
                <MouseBinding Gesture="LeftDoubleClick"
                              Command="{Binding DataContext.PlayVideoCommand, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type UserControl}}, Mode=OneWay}" 
                              CommandParameter="{Binding }" />
            </StackPanel.InputBindings>
            <TextBlock Text="{Binding }" Width="50" />
        </StackPanel>
    </DataTemplate>
</UserControl.Resources> 
```

# python - 在Python中的循环下访问迭代列表中的所有元素

> ID：11172444
> 
> 赞同：1
> 
> 时间：2012-06-23T19:42:12.393
> 
> 标签：python, list, drawing, pygame, geometry

> **可能重复：**
> [Python 和 Pygame：在迭代期间更新循环下列表中的所有元素](https://stackoverflow.com/questions/11172711/python-pygame-updating-all-elements-in-a-list-under-a-loop-during-iteration)

我正在使用 Python 编写程序并使用 Pygame。这是基本代码的样子：

```
import pygame ---and other stuff necessary

Class_name():

        draw_circle()

        --some other functions--- 

i = 0 

clicks = 0

object_list = []

while 1:

    screen.blit(background, (0,0))

    for event in pygame.event.get():

        if event.type == QUIT:
            pygame.quit()
            sys.exit()

        if event.type == KEYDOWN and event.key == K_c:
            circle_create = True
            circle_list.append(Circle())

        if event.type == MOUSEBUTTONDOWN and circle_create == True:
            if clicks == 0:
                circle_list[i].center()
            clicks += 1

        if event.type == MOUSEMOTION and clicks == 1 and circle_create == True:
            circle_list[i].stretch()

    #circle.circle_computation()
    if circle_create == True:
        circle_list[i].draw_circle()

    if clicks == 2:
        clicks = 0
        i += 1
        circle_create = False

    pygame.display.update() 
```

所以基本上，当按下“c”键时，会从类中创建一个对象。这个对象被添加到一个列表中并且列表被迭代。然后用户按下鼠标和其他东西来绘制一个圆圈并创建任意数量的圆圈。

我想要做的是让对象的draw_circle（）函数通过循环不断更新，以便为列表中的所有对象显示绘制的圆圈，但是由于列表是迭代的，它会更新添加的新对象和对象已经附加的不更新。

该程序有效，它根据用户输入绘制圆圈，但更新问题是我需要解决的唯一问题。有没有办法让while循环更新对象列表中的所有元素？我已经尝试了很多天，但我无法找到一个好的解决方案。任何想法表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T07:26:05.283

根据您现有的代码和您声明的绘制所有圆圈的愿望，而不仅仅是最近的一个，我认为以下代码更改应该为您提供您正在寻找的行为：

```
#circle.circle_computation()
if circle_create == True:
    #circle_list[i].draw_circle()
    for j in xrange(i):
        circle_list[j].draw_circle() 
```

# java - 这个函数具体做了什么？

> ID：11172445
> 
> 赞同：-2
> 
> 时间：2012-06-23T19:42:13.290
> 
> 标签：java, model, playframework, playframework-2.0, ebean

```
public static Finder<Long,Task> find = new Finder<Long,Task>(
       Long.class, Task.class
); 
```

这是 Playframework 中使用 EBean 模型超类的模型的功能。我不详细了解此功能，它实际上是做什么的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T19:55:04.320

Finder用于通过主键查找实体。Task就是这里的实体，它的主键是Long，它是Id

Finder 文档： [http ://www.playframework.org/documentation/api/2.0.1/java/play/db/ebean/Model.Finder.html](http://www.playframework.org/documentation/api/2.0.1/java/play/db/ebean/Model.Finder.html)

你的片段，解释： [http ://www.playframework.org/documentation/2.0/JavaEbean](http://www.playframework.org/documentation/2.0/JavaEbean)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T19:53:24.387

它的通用代码。是通用变量的占位符，因此您也可以将其用于其他类。Long.class 的意思是，他得到了类并且可以使用通用代码生成类的新实例。因此，该函数需要创建您使用的类的实例，但不要问我为什么：P 如果您想知道该函数的实际作用，总会有一个 API

# javascript - 如何在同一个元素上使用 .hover 和 .click

> ID：11172446
> 
> 赞同：1
> 
> 时间：2012-06-23T19:42:18.307
> 
> 标签：javascript, jquery, html, css

这个想法是在悬停时稍微向下移动 div 并单击以进一步向下移动以显示内容。问题是，当您单击 div 并且它向下移动时，您不再将鼠标悬停在其上，因此它会执行“未悬停时关闭”功能。

```
$(function () {
    $('.more').hover(function () { //Open on hover 
        $('#pull_down_content').animate({
            'top': '-360px'
        }, 1000);
    }, function () { //Close when not hovered
        $('#pull_down_content').animate({
            'top': '-380px'
        }, 1000);
    });
});
$('.more').click(function () { //Move down when clicked
    $('#pull_down_content').animate({
        'top': '0px'
    }, 1000);
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T19:45:37.797

在元素上放置一个类以表示它已被单击，如果它具有该类，则不要关闭它：

```
$(function() {        
    $('.more').hover(function(){    //Open on hover 
           $('#pull_down_content').animate({'top':'-360px'},1000);
        },    
        function(){   //Close when not hovered
           if (!$('#pull_down_content').hasClass("expanded"))
               $('#pull_down_content').animate({'top':'-380px'},1000);    
        });
    });
    $('.more').click(function(){    //Move down when clicked
        $('#pull_down_content').addClass("expanded").animate({'top':'0px'},1000);
    }); 
```

当然，您现在需要另一个触发器来确定在单击项目后何时撤消悬停动画；如何做到这一点完全取决于您想要达到的效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T20:16:47.890

> 问题是，当您单击 div 并且它向下移动时，您不再将鼠标悬停在其上，因此它会执行“未悬停时关闭”功能。

我不确定我明白了吗？您知道带有绑定事件的元素与您制作动画的元素不同吗？

无论如何，可能是这样的：

```
$(function() {
    $('.more').on('mouseenter mouseleave click', function(e) {
        if (!$(this).data('clicked')) {
            var Top = e.type==='mouseenter' ? '-360px' : e.type==='click' ? '0px' : '-380px';
            $('#pull_down_content').stop().animate({'top': Top}, 1000);
            if (e.type==='click') $(this).data('clicked', true);
        }else{
            if (e.type==='click') {
                $(this).data('clicked', false);
                $('#pull_down_content').stop().animate({'top': '-380px'}, 1000);
            }
        }
    });
}); 
```

[小提琴](http://jsfiddle.net/GAbJv/)

# python - 为 python 烧瓶应用程序配置 nginx 和 uwsgi

> ID：11172448
> 
> 赞同：9
> 
> 时间：2012-06-23T19:42:24.113
> 
> 标签：python, uwsgi

我正在尝试配置 uwsgi，并且在此过程中它在我必须运行的教程中说

uwsgi -s /tmp/uwsgi.sock -w myapp:app

问题是 -w 是一个无效的选项。谁能帮我指出为什么或我应该做什么？

谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-23T19:49:13.290

也许您正在使用 debian 提供的软件包。它们是完全模块化的，因此您需要安装/加载所需的插件：

[http://projects.unbit.it/uwsgi/wiki/Quickstart](http://projects.unbit.it/uwsgi/wiki/Quickstart)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T20:35:13.040

我的 uwsgi 应用程序配置看起来像这样

*/etc/uwsgi/apps-enabled/mysite.ini*

```
[uwsgi]
socket=/tmp/uwsgi_mysite.sock
chmod-socket=666
abstract-socket=false

master=true
workers=2

uid=altera
gid=altera

chdir=/home/altera/www/mysite   ; Current dir
pp=/home/altera/www/mysite      ; Python Path (to your application)
pyhome=/home/altera/vpy/mysite  ; Path to virtual environment
plugins=python3  
module=main                     ; *.py file name application starting from 

post-buffering=8192 
```

*/etc/nginx/sites-available/mysite*

```
 server {
        server_name     mysite;

        root /home/altera/www/mysite;

        location / {
                include        uwsgi_params;
                uwsgi_pass     unix:/tmp/uwsgi_mysite.sock;
        }
} 
```

# regex - Groovy with replaceAll 和通配符

> ID：11172449
> 
> 赞同：3
> 
> 时间：2012-06-23T19:42:47.903
> 
> 标签：regex, groovy

处理将解析我的一些 java 文件的脚本。我正在尝试使用 replaceAll() 来摆脱一些我不需要的东西。所以它是静态的东西，很容易，但有些更难。

```
MyWebsiteTests extends MYbaseTest { 
```

因此，对于这一行，我想删除该行之后的扩展和任何内容。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T19:49:29.103

这会做到：

```
line.replaceAll( /(.+)\sextends.*$/, '$1' ) 
```

不过，用正则表达式解析源代码似乎总是以泪水告终......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T19:49:09.917

***时髦的：***

```
assert expected == before.replaceFirst(/\s+extends\s.*/, '') 
```

或者

```
assert expected == before.replaceAll(/\s+extends\s.*/, '') 
```

# java - 多接口机中的MulticastSocket.setInterface——如何使用？

> ID：11172455
> 
> 赞同：1
> 
> 时间：2012-06-23T19:43:38.837
> 
> 标签：java, multicast

我有一台带有两个网络接口卡的机器。我想知道是否要向其中一个 LAN 发送多播消息 - 是否必须在该 LAN 中使用机器的 ip，或者可以从 LAN 输入 ant ip？

也就是说，假设机器的 IP 是：190.20.20.20，而该 LAN 中的另一台机器是：190.20.20.1

1.  我可以输入：multcastiScoket.setInterface("190.20.20.1");

2.  如果是这样 - 那台机器是否必须打开？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-07-27T16:31:08.993

虽然多播有其自己的路由特性，但重要的是要了解明确选择 NIC（对于发送方和接收方）很重要并且确实会产生影响（除非您想依赖特定操作系统的“自动”实现，这在生产中会变得非常棘手）。

首先，让我们澄清一下，它`java.net.MulticastSocket`可以并且用于：发送和接收消息（这并不意味着发送 MC 和接收 MC 是相似的；接收者必须执行`IGMP`连接等，在等上可见`ip maddr`等）。

通常，在创建这些套接字时指定的越多越好（否则您将受制于操作系统，并且必然会发生不太容易调试的情况）。

对于接收器套接字，您应该：

*   指定端口（在构造函数中）；防火墙应该`udp`对该端口上的入站流量打开，
*   指定接口（通过`socket.setNetworkInterface`）；否则操作系统将采用可用接口之一（通过检查`ip maddr`），
*   指定 MC 组（例如 via `socket.joinGroup(InetAddress.getByName("230.0.0.0")`）（这会触发 IGMP 机制，通过 可见`tcpdump -i your_interface -n ether multicast`）

对于 Sender 套接字，您应该类似地，

*   指定 MC 组（相同的命令），
*   指定接口（相同的命令）

如果赞成上述观点，我会提出两个论点，

1.  在 CentOS 7 上使用两个 NIC（`enp0s3`和`enp0s8`）测试了简单的发送器和接收器[（此处为代码）](https://github.com/pmarecki/mc/tree/master/src/main/java/multicast)。只有通过在接收器上设置 NIC 显式性，我才能自信地判断 IGMP 加入将在哪个 NIC 上发出，以及程序将在哪个 NIC 上列出（通过`ip maddr`）加入 MC 组；通过将 Sender 设置到特定的 NIC 上，很容易验证，发送`enp0s3`只会到达接收者`enp0s3`，而不是`enp0s8`（类似地，`tcpdump`将数据包显示为所选接口上的出站）。当然，在没有开始在 OS 上使用 MC 路由的情况下就是这样，它可以根据需要路由数据包，
2.  您可能会想象像您这样的设置，其中两个不同的 NIC 将导致完全分离的 LAN，这可能进一步具有 MC 路由的所有/完整元素（指定的路由器，可能是集合点等）。因此，为 IGMP 连接选择合适的 NIC 至关重要，它决定了*一切*；如果这些发给了错误的网卡，您可能无法接收到 MC 流量；如果将它们发给两个 NIC，您可能会得到比您想要的更多的东西。

我希望这会有所帮助（即使问题到现在已经 6 岁了）；

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T01:36:37.633

IIRC`MulticastSocket`用于*接收*多播消息，您需要对其进行配置`setGroup`以侦听绑定到特定多播 IP 地址的多播消息。如果您想发送多播消息，事情要简单得多：您只需将消息发送到特定的多播 IP 地址，路由器/网关将为您处理实际的多播逻辑。（因此，您确实需要一个能够正确支持多播的路由器/网关。）

编辑：Java 教程也涵盖了这个主题：[http ://docs.oracle.com/javase/tutorial/networking/datagrams/broadcasting.html](http://docs.oracle.com/javase/tutorial/networking/datagrams/broadcasting.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T01:30:13.493

setInterface() 方法中的 IP 地址是您*自己的*接口之一的地址。这用于您有多个 NIC，全部连接到不同子网的情况，并且您希望多播加入和离开组消息发送到不是 IP 路由表的默认路由的子网。

在您提到的情况下，根本不需要调用 setInterface() 。

如果您希望机器接收消息，则必须打开它。

# ios - iOS SDK AVPlayer - 如何检测音频流是否可搜索？

> ID：11172460
> 
> 赞同：2
> 
> 时间：2012-06-23T19:44:02.850
> 
> 标签：ios, audio, audio-streaming, avplayer

我正在使用 AVPlayer 播放不同的音频文件。其中一些是静态远程 mp3，一些是实时流。有什么方法可以判断音频流是否可搜索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-14T10:35:01.977

根据 Apple iOS 开发人员库，您可以等到 AVPlayerItem 的状态等于 AVPlayerItemStatusReadyToPlay 然后查询持续时间属性。如果返回的值等于 kCMTimeIndefined，那么这很可能是正在播放的直播流。如果是这样，那么您将知道该流不可搜索。

[iOS 开发者库 - AVPlayer 类参考](https://developer.apple.com/library/ios/documentation/AVFoundation/Reference/AVPlayerItem_Class/Reference/Reference.html)

# c# - 如何从模板内部设置超链接命令？

> ID：11172461
> 
> 赞同：1
> 
> 时间：2012-06-23T19:44:11.787
> 
> 标签：c#, wpf, xaml

我有一个模板，其中包含另一个模板，其中包含以下代码：

```
<DataGridHyperlinkColumn Header="Website" Binding="{Binding Website}" 
    IsReadOnly="True" SortMemberPath="Input.OriginalUri.AbsoluteUri" >
<DataGridHyperlinkColumn.ElementStyle>
    <Style TargetType="TextBlock">
        <EventSetter Event="Hyperlink.Click" Handler="OnHyperlinkClick" />
        <Setter Property="Tag" Value="{Binding Website}"/>
    </Style>
</DataGridHyperlinkColumn.ElementStyle>
</DataGridHyperlinkColumn> 
```

但是因为它在模板中，所以当我运行代码时，我遇到了异常。

处理它的常用方法是使用命令，例如

```
<Hyperlink CommandParameter="{Binding Website.Uri.AbsoluteUri}" Command="{Binding Navigate, ElementName=UserControl}">
<TextBlock Text= "{Binding Website.Uri.AbsoluteUri}" />
</Hyperlink> 
```

我试过了：

```
<DataGridHyperlinkColumn Header="Website" Binding="{Binding Website}" 
        IsReadOnly="True" SortMemberPath="Input.OriginalUri.AbsoluteUri" >
    <DataGridHyperlinkColumn.ElementStyle>
        <Style TargetType="TextBlock">
            <Setter Property="Hyperlink.Command" Value="{Binding Navigate, ElementName=userControl}"/>
            <Setter Property="Hyperlink.CommandParameter" Value="{Binding Website}"/>               
        </Style>
    </DataGridHyperlinkColumn.ElementStyle>
</DataGridHyperlinkColumn> 
```

但我收到以下错误：

```
Cannot find source for binding with reference 'ElementName=userControl'. 
BindingExpression:Path=Navigate; DataItem=null; target element is 'TextBlock' 
(Name=''); target property is 'Command' (type 'ICommand') 
```

UserControl 声明如下：

```
<UserControl x:Name="userControl" .... 
```

如何自定义`DataGridHyperlinkColumn.ElementStyle`而不是设置事件处理程序，而是设置命令？

**更新**

命令代码如下所示：

```
 public class NavigateCommand : ICommand
    {
        #region ICommand Members

        public bool CanExecute(object parameter)
        {
            return true;
        }

        public event EventHandler CanExecuteChanged;

        public void Execute(object parameter)
        {
            Process.Start(parameter.ToString());
        }

        #endregion
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T21:29:12.750

不是您问题的真正答案，但也许是一种解决方法：将您的 Column 变成模板列并在其中显示一个样式按钮，类似于：

```
<DataGridTemplateColumn Header="Website" 
        IsReadOnly="True" SortMemberPath="Input.OriginalUri.AbsoluteUri" >
    <DataGridTemplateColumn.CellTemplate>
        <DataTemplate>
           <Button Content="{Binding Website}" Command="{StaticResource NavigateCommand}" CommandParameter="{Binding Website}" Style={StaticResource LinkStyle}"/>
        </DataTemplate>
    </DataGridTemplateColumn.CellTemplate>
</DataGridTemplateColumn> 
```

# php - 使用 MYSQL 提交的发布日期/时间表单

> ID：11172466
> 
> 赞同：1
> 
> 时间：2012-06-23T19:45:32.540
> 
> 标签：php, mysql, forms

我四处寻找答案，但没有找到任何有用的东西。

您如何获取表单提交的时间/日期（SQL 和 PHP）。

谢谢，菲尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T19:52:16.620

```
$date = date('Y-m-d H:i:s'); 
```

这会以指定的格式获取当前服务器时间，然后您可以使用该格式将其存储在数据库中。

然后，您可以将其存储在您的数据库中。否则，您可以查看 MySQL 数据库的[TimeStamp](http://dev.mysql.com/doc/refman/5.5/en/datetime.html)字段。

```
$mysqldate = date( 'Y-m-d H:i:s');
$phpdate = strtotime( $mysqldate ); 
```

这是在 PHP 和 MySQL 中的 dateTime 之间引入互操作性的好方法。[这里](http://www.richardlord.net/blog/dates-in-php-and-mysql)有一个精彩的页面，详细介绍了三种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T19:47:39.387

很简单，`time()`以 unix 时间戳格式返回当前日期，它不必是用户输入。在您需要的时候使用`time()`（例如保存到数据库）。

您也可以使用`date()`任何您想要的方式对其进行格式化（例如存储在数据库中）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T19:49:16.287

提交表单时，只需确保使用该`time()`函数将时间戳添加到数据库中。

# vb.net - Vb.net 将像素颜色更改为透明

> ID：11172470
> 
> 赞同：0
> 
> 时间：2012-06-23T19:46:10.933
> 
> 标签：vb.net, winforms, pixel

我想用透明像素替换“file.bmp”中的每个黑色像素

```
 Dim b As Bitmap = New Bitmap(64, 64)

    b = image.fromfile("c:/file.bmp")

        For y = 0 To 63
            For x = 0 To 63
             Dim c As New Color
              c = Color.Transparent
               If b.Getpixel(x,y) = color.Black Then
                b.SetPixel(x, y, c)
               End if
            Next

     Next
        PictureBox1.Image = b 
```

例外：

> 由于此评估可能会导致副作用，因此在用户启用之前不会执行。System.Drawing.Color

没有断点，图片框看起来像空的。

如何用透明像素替换黑色像素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T19:59:00.447

如果它是位图，您可以使用 LockBits ，操作像素，然后使用 UnlockBits。见这里`a sample where it sets every third value to 255`。24bpp 位图看起来是红色的。- [http://msdn.microsoft.com/en-us/library/5ey6h79d.aspx#Y1085](http://msdn.microsoft.com/en-us/library/5ey6h79d.aspx#Y1085)

# emacs - 如何更改/删除 Emacs 菜单项？

> ID：11172472
> 
> 赞同：1
> 
> 时间：2012-06-23T19:46:34.500
> 
> 标签：emacs, lisp, elisp, emacs23

我打算更改 Emacs 中的某些特性/功能。我熟悉不同的模式，但我的问题是如何从图形界面中删除某些功能 - 例如从菜单栏中的工具项中删除游戏或向其中添加新项目？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T23:43:51.880

`define-key`您可以使用或添加菜单项`define-key-after`。例如，要在子菜单`Forward char`的开头添加一个菜单项`Go To`，您可以编写：

```
(define-key (lookup-key global-map [menu-bar edit goto])
  [go-to-forward] '("Forward-char" . forward-char)) 
```

...并将其放在`Goto Line...`项目之后：

```
(define-key-after (lookup-key global-map [menu-bar edit goto])
  [go-to-forward] '("Forward char" . forward-char) 'go-to-line) 
```

有了这个，以及参考帖子中的信息，您应该能够根据需要更改菜单。

一如既往，一切都记录在案：[http ://www.gnu.org/software/emacs/manual/html_node/elisp/Menu-Keymaps.html](http://www.gnu.org/software/emacs/manual/html_node/elisp/Menu-Keymaps.html)

# java - 在浏览器中运行在 Eclipse 中制作的小程序时遇到问题

> ID：11172473
> 
> 赞同：1
> 
> 时间：2012-06-23T19:46:34.333
> 
> 标签：java, eclipse, browser, jar, applet

我在 Eclipse 中制作了一个 Java 小程序游戏，其中有许多与之相关的类和媒体。我现在一直在尝试最终在浏览器中测试游戏，但我很难让它工作。

我已经导出了一个 .jar 文件（一个不可运行的文件，这可能是个问题吗？）并尝试了许多不同的加载小程序的方法。我也阅读了oracle网站上的材料。

我的前两个基本问题是：

1.  我的小程序没有`static void main(String args[]){`一行，因为我的印象是对于小程序，您使用`init()`and`start()`方法。这可能是问题吗？

    如果没有，我的包含 init 和 start 以及其他基本方法的类被调用`Start.class`并位于一个`bin/`目录中。我是否能够编辑从 eclipse 导出的 .jar 中包含的清单，但这是`Start.class`使用的主类`Main-Class: Game.Start`？
2.  另一个非常基本的问题是，当涉及到 java 中的目录或特别是 .jar 档案中的目录时，路径名中的文件夹是否总是用 ? 分隔`.`？或者也可以`/`工作？

我的项目名称只是 Game，我有一个`src`包含 .java 文件的`bin`文件夹和一个包含 .class 的文件夹如何将清单定向到`bin/start.class`文件？

抱歉，这很令人沮丧，尤其是因为我真的很想能够分享这个小程序。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T19:48:36.987

> 1）我的小程序没有`static void main (args[]){`一行，因为我的印象是，对于小程序，您使用`init()`and`start()`方法。这可能是问题吗？

不，这不是问题，因为 Applets 和 JApplets 不使用 main 方法来运行。请注意，有些可能具有可用于允许编码人员在非小程序环境中测试代码的主要方法，但是当作为小程序运行时，主要方法将被忽略。

> 2) 另一个非常基本的问题，当涉及到 Java 中的目录或特别是 .jar 档案中的目录时，路径名中的文件夹是否总是用“。”分隔？或者也做“/”的工作？

jar 文件中的目录使用“/”。请检查您是否尝试将资源用作*文件*，因为 jar 文件不包含文件（而是资源）。

> 我的项目名称只是 Game，我有一个包含 .java 文件的 src 文件夹和一个包含 .class 的 bin 文件夹如何将清单定向到 bin/start.class 文件？

考虑显示您的 jar 文件的结构以及您尝试运行小程序的一个小的测试 html 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T11:29:55.563

> Start.class 位于 bin/ 目录中

我同意 Hovercratft 关于缺少 main（不是缺少），关于可运行 jar（不是必需的）的观点。

可能存在的一个问题是文件的确切位置和类的命名。

如果你的类名是bin.Start，因为你定义了一个包bin（非常少见），所以需要将bin目录放入jar中。

如果你没有声明一个包，你就没有一个目录可以放入 jar 中。也许 Eclipse 会自动为您处理这个问题。

要测试您的applet，您需要一个html 文件，并在appletviewer 中启动该html 文件。如果这有效，您可以在浏览器中对其进行测试。否则，请验证您是否可以在浏览器中启动外部小程序，以确保它以正确的方式安装。

由于您在案例问题上表现出草率的习惯： Start.class 或 start.class：这对 Java 很重要。在任何地方使用初始大写名称。

# python - 将字符串从 feedparser 转换为 datetime

> ID：11172484
> 
> 赞同：1
> 
> 时间：2012-06-23T19:47:51.697
> 
> 标签：python, datetime, feedparser

我想将如下获得的字符串转换为`datetime`：

```
d = feedparser.parse(xmlUrl)
t = datetime.strptime(d.feed.updated, "%Y-%m-%dT%H:%M:%SZ") 
```

注意掩码中的`T`和`Z`字母。它们可能会丢失，我不确定这种格式还有什么以及如何创建掩码以涵盖所有可能性。

这里的问题是掩码有时匹配，有时不匹配。是否可以进行匹配以始终匹配？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T09:47:29.653

You should use the parsed forms of the date fields: `feed.updated_parsed` contains a [`struct_time`](http://docs.python.org/library/time.html#time.struct_time) like the one returned by `time.gmtime()`.

# javascript - RequireJS：相互递归模块的问题

> ID：11172487
> 
> 赞同：2
> 
> 时间：2012-06-23T19:48:38.850
> 
> 标签：javascript, backbone.js, requirejs, parse-platform

我有一个`Workout`对象和一个`WorkoutSection`对象。两者都将另一个用于各种属性。在加载期间`Workout`不使用`WorkoutSection`，但在加载期间`WorkoutSection`使用`Workout`。

锻炼节.js

```
define(['require',
    // post-load
    'models/Workout'
], 
function(require) {
    // must require Workout because of mutual dependency
    var Workout = require('models/Workout'); 
```

锻炼.js

```
define([
    'require','models/WorkoutSection'
], 

    function(require) {
        // must re-require Workout because of mutual dependency
        var WorkoutSection;

        var Workout = Parse.Object.extend("Workout",
        {
            initialize : function() {
                WorkoutSection = require('models/WorkoutSection');
            }, 
```

错误：

> 未捕获的错误：尚未为上下文加载模块名称“models/Workout”：_ [http://requirejs.org/docs/errors.html#notloaded](http://requirejs.org/docs/errors.html#notloaded) require.js:2 H require.js:2 ksnewContext.j.require require.js:2 requirejs require.js:2（匿名函数） WorkoutSection.js:20

我正在遵循链接中描述的解决方案，但仍然收到错误 =S 任何可以解决此问题的想法？

这是我的 main.js：

```
// Filename: main.js

// Require.js allows us to configure shortcut alias
// Their usage will become more apparent futher along in the tutorial.
require.config( {
    paths : {
        jQuery : 'libs/jquery/jquery-min',
        Underscore : 'libs/underscore/underscore-min',
        Backbone : 'libs/backbone/backbone-min',
        Parse : 'libs/parse/parse-min',
        templates : '../templates'
    }
});

require( [
    // Load our app module and pass it to our definition function
    'app',
],
function(App) {
    // The "app" dependency is passed in as "App"
    // Again, the other dependencies passed in are not "AMD" therefore
    // don't pass a parameter to this function
    App.initialize();
}); 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T20:58:51.780

我建议你：

1.  尝试改写`WorkoutSection.js`为此处记录的`CommonJS`格式：[http ://requirejs.org/docs/api.html#cjsmodule](http://requirejs.org/docs/api.html#cjsmodule)

2.  完全排除`models/WorkoutSection`为依赖项`Workout.js`

# python - 从python中的while循环内部返回值

> ID：11172496
> 
> 赞同：3
> 
> 时间：2012-06-23T19:49:17.180
> 
> 标签：python, while-loop, real-time

我不知道这是一个简单的问题还是不可能的问题，但我在上面找不到任何东西，所以我想我会问它。

是否可以在循环仍在运行时从 while 循环返回值？基本上我想要做的是让一个向量在一个while循环中不断更新，但能够在不停止while循环的情况下在被询问时返回值。这可能吗？我只需要分解程序并将while循环放在一个单独的线程中，还是可以在一个函数中完成？

此外，我更喜欢一种计算量不密集的方法（显然），并且与速率限制的 while 循环兼容，因为这个方法肯定是速率限制的。

同样，如果这是一个愚蠢的问题，请告诉我，我将删除它，但我无法找到有关此的文档。

我正在尝试使用以下代码实现此代码：

```
def update(self, x_motion, y_motion, z_motion):
        self.x_pos += self.x_veloc
        self.y_pos += self.y_veloc
        self.z_pos += self.z_veloc
        self.x_veloc += self.x_accel
        self.y_veloc += self.y_accel
        self.z_veloc += self.z_accel
        self.x_accel = x_motion[2]
        self.y_accel = y_motion[2]
        self.z_accel = z_motion[2]
while True:
self.update(x_motion, y_motion, z_motion)

print vector.x_accel 
```

至少在这些方面。重要的是这些返回在 while 循环之外，以便 while 循环在后台运行，但它只在被询问时给出结果，或者类似的东西。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-23T19:52:18.763

而是创建一个生成器。

```
def triangle():
  res = 0
  inc = 1
  while True:
    res += inc
    inc += 1
    yield res

t = triangle()
print next(t)
print next(t)
print next(t)
print next(t) 
```

**编辑：**

或者也许是一个协程。

```
def summer():
  res = 0
  inc = 0
  while True:
    res += inc
    inc = (yield res)

s = summer()
print s.send(None)
print s.send(3)
print s.send(5)
print s.send(2)
print s.send(4) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-23T19:52:07.867

您正在寻找的是`yield`：

```
def func():
    while True:
        yield "hello"

for x in func():
    print(x) 
```

生成器也可以写成列表推导式：

看看这个问题：

[“yield”关键字有什么作用？](https://stackoverflow.com/questions/231767/the-python-yield-keyword-explained)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T23:18:44.227

如果我理解你和你想做的代码。

我可能会考虑尝试找到关于时间的位置、速度和加速度方程。

所以你不需要保持，while循环运行，你需要将它转换为一个函数，并使用2个函数调用之间的时间差，你可以执行你想要的计算，只有当你调用函数时，而不是一直运行 while 循环。

# mod-rewrite - Mod_rewrite 似乎不适用于此重写规则

> ID：11172498
> 
> 赞同：0
> 
> 时间：2012-06-23T19:49:29.367
> 
> 标签：mod-rewrite, apache2

我正在尝试设置一个简单的重写规则，以便类似

```
mysite.com/admin 
```

变成

```
mysite.com/new/admin 
```

我尝试了以下方法：

```
RewriteEngine On
RewriteRule ^admin.*  new/admin [L] 
```

但这似乎不起作用。它只会导致 404 错误，这与我之前得到的相同。我的日志似乎没有显示任何内容。这是我的配置文件：

```
<VirtualHost *:80>
  ServerAdmin webmaster@localhost
  ServerName mysite.com
  DocumentRoot /var/www

  <Directory />

   Options FollowSymLinks
   AllowOverride None
  </Directory>
  <Directory /var/www/>
    Options Indexes FollowSymLinks MultiViews
    AllowOverride None
    Order allow,deny
    allow from all
  </Directory> 
```

如果有人知道正确的重写规则来解决这个问题，那将是最好的！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T20:37:53.733

试试这个：

```
RewriteEngine On
RewriteBase /
RewriteRule ^admin(.*) new/admin$1 [L,R,QSA] 
```

标志解释：

*   `L`- 最后一条规则（处理将在该点停止）
*   `R`- 重定向（没有此标志，apache 将执行*子请求*，并且仍将原始 URL 显示给浏览器）
*   `QSA`- 附加原始查询字符串

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T20:15:11.140

你能用斜线试试下面的..

RewriteRule ^admin.* /new/admin [L]

# c# - 禁止扩展方法

> ID：11172500
> 
> 赞同：0
> 
> 时间：2012-06-23T19:49:40.387
> 
> 标签：c#

我正在发布一个公共类作为我的 C# 框架的一部分，以便用户能够在我的应用程序中注册。我不希望用户扩展我的课程，所以我标记了它`sealed`。现在我有一些用户报告说他们在该类中看到的方法比我提供的方法多。经过一番调查，这些用户似乎已经定义了扩展方法（通过智能感知），就像它们是在我的公共密封类中定义的一样。

**问题** 有没有办法禁止用户在我的公共密封类上定义扩展方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-23T19:51:12.277

不，你不能。老实说，我不明白你为什么要这么做。如果您有*想要*使用扩展方法的用户，请让他们这样做。没有人会*强迫*他们这样做，这可能会让他们的生活更轻松。至少由于您的类型是密封的，您知道如果有人报告意外可用的方法，它们*一定*是扩展方法。

请注意，任何人都可以在 上定义扩展方法`object`，并且*始终*可用，即使有一种方法可以仅在您的类上禁止扩展方法。

# php - 检查数组子键是否有空值

> ID：11172501
> 
> 赞同：3
> 
> 时间：2012-06-23T19:49:41.650
> 
> 标签：php, arrays

我有一个看起来像这样的数组：

```
$arr = array(

  'abc' => array(
             'subkey1' => '',
             'subkey2' => false,             
             'subkey3' => 0,  
             ...                          
           ),

  'def' => array(
             'subkey1' => '',
             'subkey2' => 555,             
             'subkey3' => 0,  
             ...                          
           ),

  ...

); 
```

我想取消设置所有子键都具有空值的所有父元素，例如`0`, `''`, `false`, `null`。在我的示例`abc`中需要取消设置。

目前我在foreach循环中手动检查每个子键是否为空，但if条件很大，因为我有8个子键:)

有更好的选择吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-23T19:54:20.457

```
$array = array_filter($array, 'array_filter'); 
```

^([在键盘上查看输出](http://codepad.org/bFe22vZj))

```
Array
(
    [def] => Array
        (
            [subkey1] => 
            [subkey2] => 555
            [subkey3] => 0
        )

) 
```

* * *

外部[array_filter()](http://au2.php.net/manual/en/function.array-filter.php)将遍历数组并在每个子数组上调用内部[array_filter()](http://au2.php.net/manual/en/function.array-filter.php)，这将删除所有为空的子键。如果每个子键为空，则外部[array_filter()](http://au2.php.net/manual/en/function.array-filter.php)应删除整个子数组。

> 如果没有提供回调，则所有等于 FALSE 的输入条目（请参阅转换为布尔值）都将被删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T20:12:44.503

这个怎么样：

```
foreach ($arr as $index=>$element)
{
  if (in_array(0, $element))
  {
    unset($arr[$index]);
  }
} 
```

# wix - 修改 Wix_Advanced UI 时在 InstallScopeDlg 中出现 WiX 错误 LGHT0130

> ID：11172502
> 
> 赞同：0
> 
> 时间：2012-06-23T19:49:48.840
> 
> 标签：wix, linker-errors

我正在使用 WiX 3.6。
我正在使用 WIX_Advanced 用户界面，我想用我自己的版本（称为 InstallScopeDlgDsktp）替换 InstallScopeDlg，其中包括一个用于添加桌面快捷方式的复选框。

当我这样做时，我会在 WixUI_Advanced.wxs 文件中获取对旧 InstallScopeDlg 的所有引用，并在我的主文件中覆盖它们以引用我的自定义 InstallScopeDlgDsktp 模块。

但是，当我尝试编译时，我收到一个错误，这似乎表明 RadioButton 表存在冲突，这意味着我的 InstallScopeDlgDsktp 和原始 InstallScopeDlg 都必须基于相同的属性 (WixAppFolder) 添加 RadioButton。

```
light Cryptobot.wixobj InstallScopeDlgDsktp.wixobj -ext WixUIExtension -out Cryptobot.msi
Microsoft (R) Windows Installer Xml Linker version 3.6.2221.0

<snip>wixlib\InstallScopeDlg.wxs(24): error LGHT0130 : 
The primary key 'WixAppFolder/1' is duplicated in table 'RadioButton'.  Please remove one of the entries or rename a part of the primary key to avoid the collision. 
```

我似乎无法解决这个问题。我的问题是，当我不再引用它时，为什么它甚至会链接到原始的 InstallScopeDlg 模块中？如何阻止原始 InstallScopeDlg 添加 RadioButton？

提供的代码供参考：主 WXS 文件（UI 内容位于底部 - 可以看到我用 InstallScopeDlgDsktp 替换了所有 InstallScopeDlg 实例）：

```
<?xml version="1.0" encoding="windows-1252"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">

   <!-- Defines -->
   <?define ProductName="Cryptobot" ?>
   <?define ProductVersion="1.1.1" ?>

   <Product Name="$(var.ProductName) $(var.ProductVersion)" Id="*"  
      UpgradeCode="MY-UPGRADE-GUID"  
      Language="1033" Codepage="1252" Version="$(var.ProductVersion)" Manufacturer="Crafted From Code">
  <!-- The Package GUID must be changed EVERY timeyou build a new .msi.  The asterisk makes this happen automatically. -->
  <Package Id="*" Keywords="Installer" 
     Description="$(var.ProductName) $(var.ProductVersion) Setup"
     Manufacturer="Crafted From Code"
     InstallerVersion="200" Languages="1033" Compressed="yes" />

  <Media Id="1" Cabinet="$(var.ProductName).cab" EmbedCab="yes" />

  <!-- Components to install -->
  <Directory Id="TARGETDIR" Name="SourceDir">
     <Directory Id="ProgramFilesFolder">
        <Directory Id="CraftedFromCode" Name="Crafted From Code">
           <Directory Id="APPLICATIONFOLDER" Name="$(var.ProductName)">
              <Component Id="MainExecutable" Guid="MY-GUID">
                 <File Id="CryptobotEXE" Name="Cryptobot.exe" Source="..\Cryptobot\bin\Release\Cryptobot.exe" KeyPath="yes">
                    <Shortcut Id="CryptobotProgramMenuShortcut" Directory="ProgramMenuDir" 
                       Name="$(var.ProductName)" Icon="Cryptobot.ico" IconIndex="0" Advertise="yes" />
                    <Shortcut Id="CryptobotDesktopShortcut" Directory="DesktopFolder" 
                       Name="$(var.ProductName)" Icon="Cryptobot.ico" IconIndex="0" Advertise="yes" />
                 </File>
                 <RemoveFolder Id="APPLICATIONFOLDER" On="uninstall" />
              </Component>
           </Directory>
        </Directory>
     </Directory>

     <!-- Start Menu Shortcut(s) -->
     <Directory Id="ProgramMenuFolder" Name="Programs">
        <Directory Id="ProgramMenuDir" Name="$(var.ProductName)">
           <Component Id="ProgramMenuShortcut" Guid="MY-GUID" >
              <RegistryValue Root="HKCU" Key="Software\Crafted From Code\Cryptobot" Name="installed" Type="integer" Value="1" KeyPath="yes" />
              <RemoveFolder Id="ProgramMenuDir" On="uninstall" />
           </Component>
        </Directory>
     </Directory>

     <!-- Desktop Shortcut -->
     <Directory Id="DesktopFolder">
        <Component Id="DesktopShortcut" Guid="MY-GUID">
           <Condition>INSTALLDESKTOPSHORTCUT</Condition>
           <RegistryValue Root="HKCU" Key="Software\Crafted From Code\Cryptobot" Name="installed" Type="integer" Value="1" KeyPath="yes" />
        </Component>
     </Directory>

  </Directory> <!-- End of TARGETDIR root directory -->

  <Icon Id="Cryptobot.ico" SourceFile="Cryptobot.ico" />

  <Feature Id="Complete" Level="1" Title="$(var.ProductName)" 
     Description="The complete package." Display="expand" 
     ConfigurableDirectory="APPLICATIONFOLDER">
     <ComponentRef Id="MainExecutable" />
     <ComponentRef Id="ProgramMenuShortcut" />
     <ComponentRef Id="DesktopShortcut" />
  </Feature>

  <!-- Upgrade rules: If a newer version is found, don't allow installation of an older version (downgrading).
  Otherwise, if an older version is already installed, remove it before installing the current version -->
  <Upgrade Id="MY-UPGRADE-GUID">
     <UpgradeVersion OnlyDetect="yes" Property="NEWERPRODUCTFOUND" Minimum="$(var.ProductVersion)" IncludeMinimum="no" />
     <!-- Setting IncludeMaximum to yes generates a linker warning, but it means that we can install over the
     same version without necessarily having to change the version number. -->
     <UpgradeVersion OnlyDetect="no" Property="PREVIOUSVERSIONINSTALLED" Minimum="1.0.0" IncludeMinimum="yes" Maximum="$(var.ProductVersion)" IncludeMaximum="yes" />
  </Upgrade>

  <CustomAction Id='PreventDowngrading' Error='A newer version of $(var.ProductName) is already installed.' />

  <InstallExecuteSequence>
     <Custom Action='PreventDowngrading' After='FindRelatedProducts'>NEWERPRODUCTFOUND</Custom>
     <RemoveExistingProducts After="InstallFinalize" />
  </InstallExecuteSequence>

  <InstallUISequence>
     <Custom Action='PreventDowngrading' After='FindRelatedProducts'>NEWERPRODUCTFOUND</Custom>
  </InstallUISequence>

  <!-- User Interface: Use the Advanced WiX interface, which will allow 1-click installation or 
  per user/per machine installation & install directory to be specified -->
  <UIRef Id="WixUI_Advanced" />
  <UIRef Id="WixUI_ErrorProgressText" />
  <Property Id="ApplicationFolderName" Value="Crafted From Code\Cryptobot" />  
  <Property Id="WixAppFolder" Value="WixPerUserFolder" /> <!-- Defaults to install for all users -->
  <Property Id="INSTALLDESKTOPSHORTCUT" Value="1" /> <!-- Support for a desktop shortcut -->

  <!-- Add a checkbox to launch the application when the installer exits -->
  <Property Id="WIXUI_EXITDIALOGOPTIONALCHECKBOXTEXT" Value="Launch $(var.ProductName) when setup exits." />
  <!-- Have it ticked by default -->
  <Property Id="WIXUI_EXITDIALOGOPTIONALCHECKBOX" Value="1" />
  <CustomAction Id="StartAppOnExit" FileKey="CryptobotEXE" ExeCommand="" Execute="immediate" Impersonate="yes" Return="asyncNoWait" />

  <UI Id="WixUI_AdvancedCrypto">
     <UIRef Id="WixUI_Advanced" />

     <DialogRef Id="InstallScopeDlgDsktp" />

     <Publish Dialog="AdvancedWelcomeEulaDlg" Control="Advanced" Event="NewDialog" Value="InstallScopeDlgDsktp" Order="1">!(wix.WixUISupportPerMachine) AND !(wix.WixUISupportPerUser)</Publish>

     <Publish Dialog="InstallScopeDlgDsktp" Control="Back" Event="NewDialog" Value="AdvancedWelcomeEulaDlg">1</Publish>
     <!-- override default WixAppFolder of WixPerMachineFolder as standard user won't be shown the radio group to set WixAppFolder -->
     <Publish Dialog="InstallScopeDlgDsktp" Control="Next" Property="WixAppFolder" Value="WixPerUserFolder" Order="1">!(wix.WixUISupportPerUser) AND NOT Privileged</Publish>
     <Publish Dialog="InstallScopeDlgDsktp" Control="Next" Property="ALLUSERS" Value="{}" Order="2">WixAppFolder = "WixPerUserFolder"</Publish>
     <Publish Dialog="InstallScopeDlgDsktp" Control="Next" Property="ALLUSERS" Value="1" Order="3">WixAppFolder = "WixPerMachineFolder"</Publish>
     <Publish Dialog="InstallScopeDlgDsktp" Control="Next" Property="APPLICATIONFOLDER" Value="[WixPerUserFolder]" Order="4">WixAppFolder = "WixPerUserFolder"</Publish>
     <Publish Dialog="InstallScopeDlgDsktp" Control="Next" Property="APPLICATIONFOLDER" Value="[WixPerMachineFolder]" Order="5">WixAppFolder = "WixPerMachineFolder"</Publish>
     <Publish Dialog="InstallScopeDlgDsktp" Control="Next" Event="NewDialog" Value="FeaturesDlg" Order="6">WixAppFolder = "WixPerUserFolder"</Publish>
     <Publish Dialog="InstallScopeDlgDsktp" Control="Next" Event="NewDialog" Value="InstallDirDlg" Order="7">WixAppFolder = "WixPerMachineFolder"</Publish>

     <Publish Dialog="FeaturesDlg" Control="Back" Event="NewDialog" Value="InstallScopeDlgDsktp">NOT Installed AND WixAppFolder = "WixPerUserFolder"</Publish>
     <Publish Dialog="InstallDirDlg" Control="Back" Event="NewDialog" Value="InstallScopeDlgDsktp">!(wix.WixUISupportPerUser)</Publish>         

     <!-- Add the check box for launching the app on completion -->
     <Publish Dialog="ExitDialog" Control="Finish" Order="1" Event="DoAction" Value="StartAppOnExit">WIXUI_EXITDIALOGOPTIONALCHECKBOX = 1 AND NOT Installed</Publish>
  </UI>

</Product>
</Wix> 
```

InstallScopeDlgDsktp 文件只是 InstallScopeDlg 的副本，添加了一个复选框并且名称已更改：

```
<snip>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
    <Fragment>
        <UI>
            <Dialog Id="InstallScopeDlgDsktp" Width="370" Height="270" Title="!(loc.InstallScopeDlg_Title)" KeepModeless="yes">
                <Control Id="BannerBitmap" Type="Bitmap" X="0" Y="0" Width="370" Height="44" TabSkip="no" Text="!(loc.InstallScopeDlgBannerBitmap)" />
                <Control Id="BannerLine" Type="Line" X="0" Y="44" Width="370" Height="0" />
                <Control Id="BottomLine" Type="Line" X="0" Y="234" Width="370" Height="0" />
                <Control Id="Description" Type="Text" X="25" Y="23" Width="280" Height="20" Transparent="yes" NoPrefix="yes" Text="!(loc.InstallScopeDlgDescription)" />
                <Control Id="Title" Type="Text" X="15" Y="6" Width="200" Height="15" Transparent="yes" NoPrefix="yes" Text="!(loc.InstallScopeDlgTitle)" />
                <Control Id="BothScopes" Type="RadioButtonGroup" X="20" Y="55" Width="330" Height="120" Property="WixAppFolder" Hidden="yes">
                    <RadioButtonGroup Property="WixAppFolder">
                        <RadioButton Value="WixPerUserFolder" X="0" Y="0" Width="295" Height="16" Text="!(loc.InstallScopeDlgPerUser)" />
                        <RadioButton Value="WixPerMachineFolder" X="0" Y="60" Width="295" Height="16" Text="!(loc.InstallScopeDlgPerMachine)" />
                    </RadioButtonGroup>
                    <Condition Action="show">Privileged AND (!(wix.WixUISupportPerUser) AND !(wix.WixUISupportPerMachine))</Condition>
                </Control>
                <Control Id="PerUserDescription" Type="Text" X="33" Y="70" Width="300" Height="36" Hidden="yes" NoPrefix="yes" Text="!(loc.InstallScopeDlgPerUserDescription)">
                    <Condition Action="show">!(wix.WixUISupportPerUser)</Condition>
                </Control>
                <Control Id="NoPerUserDescription" Type="Text" X="33" Y="70" Width="300" Height="36" Hidden="yes" NoPrefix="yes" Text="!(loc.InstallScopeDlgNoPerUserDescription)">
                    <Condition Action="show">NOT !(wix.WixUISupportPerUser)</Condition>
                </Control>
                <Control Id="PerMachineDescription" Type="Text" X="33" Y="131" Width="300" Height="36" Hidden="yes" NoPrefix="yes" Text="!(loc.InstallScopeDlgPerMachineDescription)">
                    <Condition Action="show">Privileged</Condition>
                </Control>
                <Control Id="DesktopShortcutCheckBox" Type="CheckBox" X="20" Y="160" Width="290" Height="17" Property="INSTALLDESKTOPSHORTCUT" CheckBoxValue="1" Text="Create a shortcut on the desktop." />

                <Control Id="Back" Type="PushButton" X="180" Y="243" Width="56" Height="17" Text="!(loc.WixUIBack)" />
                <Control Id="Next" Type="PushButton" X="236" Y="243" Width="56" Height="17" Default="yes" Text="!(loc.WixUINext)" />
                <Control Id="Cancel" Type="PushButton" X="304" Y="243" Width="56" Height="17" Cancel="yes" Text="!(loc.WixUICancel)">
                    <Publish Event="SpawnDialog" Value="CancelDlg">1</Publish>
                </Control>
            </Dialog>
        </UI>
    </Fragment>
</Wix> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T15:33:37.120

You are still referencing the original WixUI_Advanced UI.

```
<UI Id="WixUI_AdvancedCrypto">
    <UIRef Id="WixUI_Advanced" />
    <DialogRef Id="InstallScopeDlgDsktp" /> 
```

This pulls in the InstallScopeDlg and will be causing your conflict. Take a copy of the WixUI_Advanced wxs from the wix sources and include in your project renaming it so that it doesn't conflict and then modify it to use your new InstallScopeDlgDsktop.

# javascript - 比较 DOM 节点和 DOM 元素

> ID：11172506
> 
> 赞同：3
> 
> 时间：2012-06-23T19:50:53.123
> 
> 标签：javascript, dom

我在解决这个问题时遇到了一些麻烦。我知道 DOM 中的所有内容都是一个节点，而 DOM 元素也是一个节点。但是，我的问题是：我有一个 DOM 节点和一个 DOM 元素，我需要比较它们以查看它们是否指的是同一个元素。这甚至可能吗？我认为我的问题存在根本性的问题，但无法弄清楚它是什么。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T19:54:05.183

做个`===`对比吧。由于它们都是对象，因此比较将基于身份。

```
if (my_node === my_element) {
    // they're the same thing
} 
```

# php - 如何避免 PHP MVP 架构中的全局状态

> ID：11172512
> 
> 赞同：2
> 
> 时间：2012-06-23T19:52:12.017
> 
> 标签：php, global-variables, mvp

我需要一些帮助来理解依赖注入。我试图避免使用全局状态（对象、属性等）并尝试实现依赖注入。我的问题特别如下：假设我从 uri 获取请求，并且知道这一点，我调用了演示者和方法。当我在处理 uri 请求时实际上不知道它需要什么时，我无法理解如何仅将其需要的东西发送给特定的演示者。我可能会对事情感到困惑和误解，这就是我在这里写的原因。

如果我使用注册表，那么我将可以使用存储在其中的所有对象，但这就是我们试图避免的，对吧？另一方面，如果我使用依赖注入，我将需要通过构造函数或通过 mutator 方法发送我需要的对象，但正如我已经说过的，我不知道演示者在处理时需要什么请求。真的有可能在不使用某种全局的情况下完成这项工作吗？

如果有人能向我解释如何处理这个问题，我将不胜感激，或者向我指出一些我可以更好地理解它的资源。

# iphone - 选择正确的减速率以获得零速度

> ID：11172514
> 
> 赞同：-1
> 
> 时间：2012-06-23T19:52:16.640
> 
> 标签：iphone, cocos2d-iphone

您能否帮我找出以下情况的正确减速率：汽车必须停在 A 点。假设汽车距离 A 200 像素，它以 50 的速度行驶。现在我怎样才能实现正确的减速，使汽车逐渐降低速度并最终停在 A 点？在现实世界中这很容易，但在计算机世界中，我们必须考虑到汽车不动的事实，实际上它只是屏幕每次在更新的位置重新绘制它。顺便提一下，有一个时间表可以触发以给定速度使汽车前进的方法。所以我认为在计算时还必须考虑调度间隔。我不认为语言、设备或平台很重要，但以防万一

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T20:18:57.267

别担心，你不需要特殊的数学，你可以使用你的“真实世界数学”就好了。调度程序和帧率的问题也不是真正的问题，而是与帧率相关的运动有关。假设你有这个函数来移动你的对象（半伪代码）：

```
- (void)move
{
    if(velocity.x < 5)
        return;

    car.x += velocity.x;
    velocity.x -= 5;
} 
```

此代码取决于帧速率，例如，如果您以 30 FPS 渲染并从`velocity.x`150 开始，则对象减速到 0 将需要一秒钟。但是，如果您以 60 FPS 运行相同的方法, 物体减速到 0 只需要半秒。

因此，您真正想要的是一种独立于帧速率移动汽车的方法，这样无论您运行代码的帧速率如何，它都能在一秒钟内移动 n 点。实现这一点的方法是使用帧将用于渲染的时间，并将这个增量时间与您的移动相乘。而且由于您无法预测在渲染之前或渲染时帧需要多长时间，因此您通常使用前一帧的增量时间。然后你最终得到如下代码：

```
- (void)move
{
    if(velocity.x < 5 * delta)
        return;

    car.x += velocity.x * delta;
    velocity.x -= 5 * delta;
} 
```

（如果你真的使用它，你会发现你的移动突然变得慢了很多，因为之前你每帧移动 5 个点，现在你每秒移动 5 个点！）

我不是 Cocos 2D 专业人士，但看起来（通过快速的 google 搜索）您可以通过几种方法获得 delta 时间（我无法命名它们，类引用似乎没有提及它们，但是如果你在某个地方有一个方法可以让`ccTime`每一帧都通过，那可能就是其中之一）

# python - 如何将命令列表分组以将它们作为一个单元计时？

> ID：11172518
> 
> 赞同：0
> 
> 时间：2012-06-23T19:52:41.063
> 
> 标签：python

我有一个长命令保存在一个文件中。
我还有一个输入文件列表，我想将其传递给同一个命令，
所以我`%s`在两个地方都有一个说明符。

```
$ cat https-tcp-session.txt

rm -f /tmp/A.raw /tmp/B.raw /tmp/result.raw; \
rwfilter --sport=443 --proto=6 --pass=stdout %s | \
rwsort --fields=sIP,dIP | \
rwgroup --id-fields=sIP,dIP --summarize | \
rwfilter --input-pipe=stdin --pass=/tmp/A.raw --packets=200-; \
rwfilter --dport=443 --proto=6 --pass=stdout %s | \
rwsort --fields=sIP,dIP | \
rwgroup --id-fields=sIP,dIP --summarize | \
rwfilter --input-pipe=stdin --pass=/tmp/B.raw --packets=200-; \
rwmatch --relate=1,2 --relate=2,1 \
/tmp/A.raw /tmp/B.raw /tmp/result.raw; 
```

接下来我在 python REPL 上尝试一下。

```
>>> cmd = open('https-tcp-session.txt').read()
>>> cmd = cmd.replace('%s', 'trace.rwf.gz')
>>> time = '/usr/bin/time -f "%e"'
>>> stmt = '%s %s'%(time, cmd)
>>> os.system(stmt)
0.01 
0 
```

这似乎不对。出于好奇，我放入了一个输入文件，并尝试从 shell 运行它

```
$ /usr/bin/time -f "%e" bash https-tcp-session.txt
17.73 
```

我有一种感觉时间只是计时块中的第一个命令（rm）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T21:30:21.300

最简单的方法：

```
import time
startTime = time.time()
# Do something
elapsed = time.time() - startTime
print("Elapsed time: %.3f" % elapsed) 
```

在为基准测试目的运行计时函数时，最好多次运行程序/命令并取平均值。所以：

```
import time
elapsed = []
for i in range(NUMBER_OF_TRIALS):
    startTime = time.time()
    # Do something
    elapsed.append(time.time() - startTime)
print("Average elapsed time: %.3f" % (sum(elapsed) / float(len(elapsed)))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T21:53:27.993

正如您可能已经怀疑的那样，您似乎只`time`在文件中的第一个命令上运行`https-tcp-session.txt`。您在 Python REPL 中的代码正在向`bash`（或您正在使用的任何 shell）发送类似以下内容：

```
/usr/bin/time -f "%e" rm -f /tmp/A.raw /tmp/B.raw /tmp/result.raw; \
rwfilter --sport=443 --proto=6 --pass=stdout %s | \
rwsort --fields=sIP,dIP | \
# rest omitted 
```

第一行末尾的分号结束命令，因此 shell 仅在其`time`上运行`rm`。

一种可能的解决方法是将您的命令块包装在一个[组](http://www.gnu.org/software/bash/manual/bashref.html#Command-Grouping)中。这样，`time`在整个组中运行。

或者，您可以使用[位置参数](http://www.gnu.org/software/bash/manual/bashref.html#Positional-Parameters)。您可以将命令`%s`中的符号替换为，它解释为第一个命令行参数。然后，您可以作为 shell 脚本运行，将要使用的值作为命令行参数传递，例如：`https-tcp-session.txt``$1``bash``https-tcp-session.txt``$1`

```
$ bash https-tcp-session.txt trace.rwf.gz 
```

（请注意，我没有测试过这两种方法。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T21:03:41.157

始终检查 bash 命令的返回值，它应该是 0。使用子进程模块而不是 os.system [http://docs.python.org/library/subprocess.html](http://docs.python.org/library/subprocess.html)

在执行之前打印命令并在 shell 中尝试。

您可以使用以下方法检查时间：

```
>>> a = datetime.datetime.now()
>>> some crazy comands
>>> b = datetime.datetime.now()
>>> c = b - a 
```

# java - 如何中断执行线程

> ID：11172523
> 
> 赞同：1
> 
> 时间：2012-06-23T19:54:19.050
> 
> 标签：java, concurrency, executor

中断执行者线程的正确方法是什么？我有这个：名称为Worker的线程类和方法：

```
public void run() {
    while(!(Thread.currentThread().isInterrupted()){
        System.out.println("work " + Thread.currentThread().getName() + ":" + Thread.currentThread().isInterrupted());
    }
} 
```

主要课程：

```
ExecutorService executorService = Executors.newFixedThreadPool(threadCount);
Worker worker = new Worker();                   
executorService.execute(worker); 
```

我尝试打电话`worker.interrupt();`，或者`executorService.shutdownNow();`但我的线程继续并且 isInterrupted() 是错误的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T08:59:50.490

您可以发布所有相关代码吗？根据您提供的信息，我无法重现您描述的行为。请参阅下面按预期工作的[SSCCE - 输出：](http://sscce.org)

> work pool-1-thread-1:false
> work pool-1-thread-1:false
> work pool-1-thread-1:false
> ....
> 线程已中断

代码：

```
public class Test {

    public static void main(String[] args) throws InterruptedException {
        ExecutorService executorService = Executors.newFixedThreadPool(1);
        Worker worker = new Worker();
        executorService.execute(worker);
        executorService.shutdownNow();
    }

    public static class Worker extends Thread {

        public void run() {
            while (!Thread.currentThread().isInterrupted()) {
                System.out.println("work " + Thread.currentThread().getName() + ":" + Thread.currentThread().isInterrupted());
            }
            System.out.println("Thread has been interrupted");
        }
    }
} 
```

# mysql - 查询关注者数量

> ID：11172525
> 
> 赞同：-4
> 
> 时间：2012-06-23T19:54:26.673
> 
> 标签：mysql

我有一个 MySQL 表，我将在其中存储`email_id`用户的信息以及用户的关注者信息`email_id`。它的列是：

```
ID, USER_EMAIL, FOLLWING_EMAIL 
```

现在，当用户登录到他的帐户时，我想计算：

1.  他关注的人数
2.  他的追随者数量

计算他关注的人数很简单：

```
select count(*) from list where user_email = <logged-in email> 
```

但是我如何计算一个查询中有多少人在关​​注他？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T20:01:00.620

我认为您只需要更改 WHERE 子句中的字段：

```
SELECT count(*) FROM list WHERE following_email = '...' 
```

要在一个查询中计算两者，请使用子选择：

```
SELECT
    (SELECT count(*) FROM list WHERE user_email = '...') AS following,
    (SELECT count(*) FROM list WHERE following_email = '...') AS followers 
```

* * *

> 是否有任何优化来存储数据以实现此功能？

是的。添加一个索引 on`USER_EMAIL`和另一个 on `FOLLOWING_EMAIL`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T20:31:52.673

```
SELECT
    COUNT(CASE WHEN user_email = '<email>' THEN 1 ELSE NULL END) AS following_cnt,
    COUNT(CASE WHEN following_email = '<email>' THEN 1 ELSE NULL END) AS follower_cnt
FROM
    list
WHERE 
    '<email>' IN (user_email, following_email) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T20:01:38.157

那么 FOLLOWING_EMAIL 是该用户关注的人的电子邮件地址吗？还是另一个表的索引？如果是前者，那么：

```
SELECT COUNT(*) from list where FOLLOWING_EMAIL="test@test.com" 
```

# flash - 如何检查 H264/AVC ISO/IEC 14496-15 AVCDecoderConfigurationRecord？

> ID：11172534
> 
> 赞同：10
> 
> 时间：2012-06-23T19:55:23.210
> 
> 标签：flash, h.264, codec, wowza

一些历史背景：我目前正在使用 Wowza 并尝试解码来自*IMediaStream的**AMFPackets*。视频数据包将有一个 5 字节的标头，第一个数据包是编解码器配置。

到目前为止，在我检查编解码器配置时，它与**ISO/IEC 14496-15 AVCDecoderConfigurationRecord**布局相匹配。但是，我在解码**SPS**和**PPS**单元时遇到了问题。

## 包含 5 字节标头的编解码器配置数据包：

> 17 00 00 00 00 01 4D 00 15 03 01 00 2F 67 4D 40 15 96 52 02 83 F6 02 A1 00 00 03 00 01 00 00 03 00 28 E0 60 03 0D 40 16 00 49 3E 0 1 8 A 403 3E 7 F 02 49 F3 F8 C7 0E D0 B1 68 90 01 00 04 68 EB 73 52

## Flash/Wowza 特定的首先是标题：

> 17 00 00 00 00

*   17 = 10111 = H.264 K 帧
*   00 = 0 = 编解码器配置包
*   000000 = 0 = 开始时间 0

## 接下来是 AVCDecoderConfigurationRecord（十六进制 = 十进制）：

*   配置版本：01 = 1
*   AVCProfileIndication：4D = 77（主要）
*   profile_compatibility: 00 = 0
*   AVCLevelIndication：15 = 21 (2.1)
*   6 位保留 + lengthSizeMinusOne：03 = 00000011 = 3（4 字节）
*   3 位保留 + numOfSequenceParameterSets：01 = 0001 = 1
*   序列参数集长度：002F =（47 字节）
*   （SPS 记录 47 字节长）
*   numOfPictureParameterSets：01 = 1
*   图片参数集长度：0004 =（4字节）
*   （PPS 记录 4 字节长）
*   （结尾）

## SPS 记录（47 字节）：

> 67 4D 40 15 96 52 02 83 F6 02 A1 00 00 03 00 01 00 00 03 00 28 E0 60 03 0D 40 00 49 3E 7F 18 E3 03 00 18 6A 00 02 49 F3 F8 C7 0E D0 B1

假设这是一个包含 SPS 类型的 NAL 单元：（使用**ITU-T H.264 06/2011 7.3.1 NAL 单元语法**）

*   第一个字节：67 = 1100111
*   禁止零位：1（糟糕，禁止 0 位设置为 1？）
*   nal_ref_idc：2
*   nal_unit_type: 0111 = 7 (SPS)

假设 SPS 有效载荷如下：（使用**ITU-T H.264 06/2011 7.3.2.1.1 序列参数集数据语法**）

*   profile_idc：4D = 77（主要，匹配）
*   约束 + 2 位保留（等于 0）：40 = 1000000（看起来不错）
*   level_idc：15（2.1，匹配）

假设这只是一个 SPS：（使用**ITU-T H.264 06/2011 7.3.2.1.1 序列参数集数据语法**）

*   profile_idc: 67 = 103 （我认为这应该是像 AVCProfileIndication 一样的 77？）
*   约束 + 2 位保留（等于 0）：4D = 1001101 （呃哦，保留位设置？）
*   level_idc: 77（这不应该像 AVCLevelIndication 一样是 21 吗？）

**看起来它是以前的 NAL 单元头 + SPS 记录，我怀疑它是坏数据，因为每个捕获的配置数据包都是相同的，但让我失望的是为什么禁止的 0 位设置为 1？**

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T08:17:58.167

我发现了问题…… 盯着 1 和 0 太多，你会错过一个（双关语）。

> 67 4D 40 15...
> 
> 假设这是一个包含 SPS 类型的 NAL 单元：（使用 ITU-T H.264 06/2011 7.3.1 NAL 单元语法）
> 
> 第一个字节：67 = 1100111

这是错误的，因为**1100111**只有 7 位。我使用 MS Calculator 进行了转换，它去掉了前导 0。正确的二进制是**01100111**，并且有禁止的零位。

感谢那些试图解决这个问题的人。

# c# - 将属性添加到继承的 ListBox 并覆盖一个方法来更改它

> ID：11172536
> 
> 赞同：0
> 
> 时间：2012-06-23T19:55:27.917
> 
> 标签：c#, winforms, inheritance, listbox

我正在尝试创建一个从**ListBox**继承的类并将属性**PreviousSelectedIndex**添加到它。到目前为止一切都很好。

接下来，我试图在**SelectedIndex**更改之前设置该属性。

问题是我找不到属性**SelectedIndex**更改的方法，因此我可以捕获它。我总是可以在对象本身上手动更改它，但这只是一种解决方法。这是我得到的：

```
public class MyListBox : System.Windows.Forms.ListBox
{
    public int PreviousSelectedIndex { get; set; }

    public MyListBox() : base()
    {
        this.PreviousSelectedIndex = -1;
    }

    protected override void OnClick(EventArgs e)
    {
        this.PreviousSelectedIndex = base.SelectedIndex;
        base.OnClick(e);
    }
} 
```

当我尝试时：

```
MessageBox.Show(
            "Previous Index = " + listBox4.PreviousSelectedIndex +
            "\nCurrent Index = " + listBox4.SelectedIndex
            ); 
```

我总是得到相同的值。

我也尝试了**OnMouseDown()**和**OnSelectedIndexChanged()**，但没有成功。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T20:03:41.230

对于 Winform，您可以执行以下操作：

```
public class MyListBox : System.Windows.Forms.ListBox
{
    private int _selectedIndex = -1;
    public int PreviousSelectedIndex { get; set; }

    public MyListBox() : base()
    {
        this.PreviousSelectedIndex = -1;
        this.SelectedIndexChanged += OnSelectedIndexChanged;
    }

    private void OnSelectedIndexChanged(object sender, System.EventArgs e)
    {
        PreviousSelectedIndex = _selectedIndex;
        _selectedIndex = this.SelectedIndex;
    }
} 
```

如果要改成WPF，可以从ListBox的SelectedChanged事件中获取上一项

```
public MyListBox() : base()
{
    this.SelectionChanged += OnSelectionChanged;
    this.PreviousSelectedIndex = -1;
}

private void OnSelectionChanged(object sender, SelectionChangedEventArgs e)
{
    if(e.RemovedItems.Count == 0)
    {
        this.PreviousSelectedIndex = -1;
    }
    else
    {
        this.PreviousSelectedIndex = this.Items.IndexOf(e.RemovedItems[0]);
    }
} 
```

# loops - 下拉菜单的类别/子类别循环

> ID：11172537
> 
> 赞同：0
> 
> 时间：2012-06-23T19:55:42.013
> 
> 标签：loops, drop-down-menu, menu

我正在尝试使用数据库表中的类别和子类别动态填充下拉菜单。我的问题是我想不出一种方法来遍历子类别，以便它们显示在正确的类别下。

在我的 SQL 数据库中，我有一个名为“类别”的表，其中包含 3 列：id、类别、子类别。子类别列中的子类别由 3 个冒号分隔（Artists:::Childcare:::Classes:::Event）。

我在 html 中使用无序列表来填充下拉菜单。

```
<ul id="menu">
<li><a href="#">button</a>
<ul>

<?php 

while($allCategories=mysql_fetch_assoc($resultre1)){ ?>

<li><a href="#"><div class="whatever"<?php print      
$relanguage_tags[$allCategories['category']];?> 
<?php if(in_array($relanguage_tags[$allCategories['category']],$reCategory)) 
print "selected='selected'"; ?> >
<?php print $relanguage_tags[$allCategories['category']]; ?></div></a> 

<?php } ?>

<ul>

<?php 
 if($ptype=="showOnMap" || $ptype=="viewFullListing" || $ptype=="home" || $ptype==""){
$reCategoryString=getCommaStringFromArray($reCategory);
$reqr2="select * from $categoryTable where id like '%' ".getRealValue($reCategoryString,"reCategory");
$resultre2=mysql_query($reqr2);
?>

<?php 

while($allSubCategories=mysql_fetch_assoc($resultre2)){ 
$subCatList=explode(":::",$allSubCategories['subcategories']);
$subCatSize=sizeof($subCatList);
for($i=0;$i<$subCatSize;$i++){

?>

<li><a href="#"><div class="whatever"<?php print $relanguage_tags[$subCatList[$i]];?>' 
<?php if(in_array($relanguage_tags[$subCatList[$i]],$reSubcategory)) print   "selected='selected'"; ?> ><?php print $relanguage_tags[$subCatList[$i]]; ?></div></a></li>
<?php }

} ?>

<?php } ?>

         </ul>
        </li> 
 </ul>
</li>

</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T20:09:23.063

```
$subCatList=explode(":::",$allSubCategories['subcategories']);
$subCatSize=count($subCatList);
for($i=0;$i<$subCatSize;$i++){
      echo "<li>".$subCatList[$i]."</li>";
?> 
```

如果这不是答案，则表示我没有很好地理解您的问题。

**编辑**

创建一个显示类别表中所有子类别的函数：

```
function subCategories($category){ 
     $subCategories="";
      while($r=mysql_fetch_assoc(mysql_query("select * from ".$category.""))){
         $subCategories.="<li>".$r['subCategory']."</li>";
      }
     return $subCategories;
} 
```

`echo subCategories("Housing");`并在每个类别标签中像这样调用这个函数。希望它有所帮助！

# drupal-7 - Drupal 7：检查数据库条目是否存在的最快方法

> ID：11172539
> 
> 赞同：6
> 
> 时间：2012-06-23T19:55:57.957
> 
> 标签：drupal-7

如果数据库条目存在，我怎样才能最快地检查？我使用这个代码：

```
$exists = db_query('SELECT tid FROM {taxonomy_index} WHERE tid = 1 AND nid = 1 LIMIT 1');
        if($exists->rowCount() > 0){
          drupal_set_message("exists");
         } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-23T20:44:19.697

我会做：

```
$result = db_select('taxonomy_index', 'ti')
  ->fields('ti', array('tid'))
  ->condition('tid', 1)
  ->condition('nid', 1)
  ->range(0, 1)
  ->execute()
  ->rowCount();

if ($result) {
  drupal_set_message(t('Exists'));
} 
```

与您的问题无关，但您应该始终使用占位符来防止 SQL 注入 - 尽管如果您使用上面的查询构建器，那么它会为您处理。此外，在将文本写入屏幕时，您应该始终使用 t() 函数。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-01-31T14:03:42.773

`db_select()`比`db_query()`. 请参阅[此线程](https://drupal.stackexchange.com/questions/1200/given-that-db-select-is-much-slower-than-db-query-why-would-i-want-to-use-it)`db_select()`以了解更适合的场景`db_query()`。

`db_query()->fetchField()`是最简单的方法。请参阅以下代码段：

```
// Returns string(5) "admin"
var_dump(db_query('select name from {users} where uid = 1')->fetchField());

// Returns bool(false)
var_dump(db_query('select name from {users} where uid = -1')->fetchField()); 
```

# c# - 如何将函数传递给方法？

> ID：11172540
> 
> 赞同：1
> 
> 时间：2012-06-23T19:56:00.737
> 
> 标签：c#, asp.net-mvc-3

在我的控制器中，我总是得到类似的结果：

```
[HttpPost]
public ActionResult General(GeneralSettingsInfo model)
{
    try
    {
        if (ModelState.IsValid)
        {
            // Upload database
            db.UpdateSettingsGeneral(model, currentUser.UserId);
            this.GlobalErrorMessage.Type = ErrorMessageToViewType.success;
        }
        else
        {
            this.GlobalErrorMessage.Type = ErrorMessageToViewType.alert;
            this.GlobalErrorMessage.Message = "Invalid data, please try again.";
        }
    }
    catch (Exception ex)
    {
        if (ex.InnerException != null)
            while (ex.InnerException != null)
                ex = ex.InnerException;

        this.GlobalErrorMessage.Type = ErrorMessageToViewType.error;
        this.GlobalErrorMessage.Message = this.ParseExceptionMessage(ex.Message);
    }

    this.GlobalErrorMessage.ShowInView = true;
    TempData["Post-data"] = this.GlobalErrorMessage;

    return RedirectToAction("General");
} 
```

我想做的是：

```
[HttpPost]
public ActionResult General(GeneralSettingsInfo model)
{
    saveModelIntoDatabase(
        ModelState, 
        db.UpdateSettingsGeneral(model, currentUser.UserId)
    );

    return RedirectToAction("General");
} 
```

我如何将函数作为参数传递？就像我们在 javascript 中做的那样：

```
saveModelIntoDatabase(ModelState, function() {
    db.UpdateSettingsGeneral(model, currentUser.UserId)
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T19:58:53.290

听起来你想要一个*delegate*。对我来说，您的委托类型应该在这里不是很明显 - 可能只是`Action`：

```
SaveModelIntoDatabase(ModelState, 
    () => db.UpdateSettingsGeneral(model, currentUser.UserId)); 
```

会在哪里`SaveModelIntoDatabase`：

```
public void SaveModelIntoDatabase(ModelState state, Action action)
{
    // Do stuff...

    // Call the action
    action();
} 
```

如果您希望函数返回某些内容，请使用`Func`; 如果您需要额外的参数，只需将它们添加为类型参数 - 有`Action`,`Action<T>`等`Action<T1, T2>`。

如果您不熟悉代表，我强烈建议您在深入了解 C# 之前先熟悉它们 - 它们非常方便，并且是现代惯用 C# 的重要组成部分。网络上有很多关于它们的信息，包括：

*   [MSDN 代表介绍（链接到其他文章）](http://msdn.microsoft.com/en-us/library/ms173171.aspx)
*   [我关于代表和活动的文章](http://csharpindepth.com/Articles/Chapter2/Events.aspx)

# javascript - JsViews：数据链接中帮助函数之前的转换器

> ID：11172541
> 
> 赞同：2
> 
> 时间：2012-06-23T19:56:01.687
> 
> 标签：javascript, jquery, jsrender, jsviews

使用[JsViews](https://github.com/BorisMoore/jsviews)是否可以在数据链接属性中的辅助函数之前有一个转换器？好歹是这样的。。

```
<div data-link="{myConverter:~myFunction('param1'):}"></div> 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T00:48:57.497

如果您的意思是您希望转换器转换`param1`数据对象的字段的值，然后将其传递给`myConverter`函数，那么不。转换器将处理表达式的结果`~myFunction(...)`。

但是您可以为转换器创建等效的辅助函数，然后链接辅助函数：

```
<div data-link="~myFunction(~myConvert(param1))></div>" 
```

顺便说一句，这将是数据链接，以便在 param1 字段更改时更新。- 我不确定你是否打算在'param1'周围加上引号。如果 'param1' 是您传入的字符串文字，那么与它的数据链接将没有任何更新的理由，因此您可以只写：

```
<div>{{:~myFunction(~myConvert('param1'))}}</div> 
```

# java - Crontab 更改 jar 执行时的字符编码

> ID：11172545
> 
> 赞同：2
> 
> 时间：2012-06-23T19:56:38.527
> 
> 标签：java, character-encoding, jsoup, crontab

我有一个用 Java 编写的网络爬虫软件，它可以通过任何给定的网站并收集数据。到现在为止还挺好。我使用 JSoup API 是为了方便，但这无关紧要。我的问题在于编码。

当我在服务器上运行 Jar 文件时（使用 java -jar Crawler.jar），它完美地捕获了数据——包括国际重音，如 á、é 等等。但是...当我通过 crontab 安排它时，它只会搞砸每个非基本字符！这里可能是什么问题？我真的很茫然，一个答案真的会拯救我的皮肤。

编辑 - 一位朋友建议我使用以下代码检查 Cron 上运行的语言环境：

```
 */1 * * * * locale > /home/user/locale.ouput 
```

我做到了，似乎 crontab 使用的是 POSIX 语言环境，而不是系统设置，即 UTF-8。我将看看如何将其更改为 UTF-8。任何提示将不胜感激！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-23T20:31:45.737

每当您将字节转换为字符或从字符转换为字符时，显式设置字符编码。例如在String构造函数中，String.getBytes()、InputStreamReader构造函数等。

如果这还不够，请在启动 Java 之前尝试在 crontab 中将 LANG 环境变量设置为不同的值。例如，您可以使用

```
LANG=en_US.UTF-8 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T20:19:31.787

好的，所以我假设如果你在生产服务器上测试这个，你正在使用 ssh 或类似的东西来远程运行它，并在终端模拟器上查看结果。

Java 显然是 unicode，所以这听起来像是一个 unicode-ascii 问题。如果服务器将这些写入文本文件，则输出编码与在终端上呈现的方式之间可能存在某种差异。

如果您将其设置为写入文件，我首先要做的是尝试使用不同的终端仿真器，以确保文本不会被非 unicode 仿真器弄乱。如果这不是问题，您可能需要仔细检查文件本身的字符编码，并确保软件没有某种隐藏问题。

理想情况下，您只需在物理服务器上打开一个 tty 并以这种方式查看输出和字符编码，但这并不总是方便或可能的。

我遇到过类似的乱码文本问题，而且几乎总是归结为终端模拟器的问题。

# java - Android - 未使用移动数据/3G 下载数据

> ID：11172548
> 
> 赞同：0
> 
> 时间：2012-06-23T19:57:01.320
> 
> 标签：java, android, http

我有一个`android`用户可以通过按下“更新”按钮来更新的应用程序。这在**wifi**上完美运行。但是，在**移动数据**上，它有一个问题。UPDATE 过程连接到我的 REST 服务器，实际上连接到 3 个不同数据的 URL。在移动数据上，第一个和最后一个 URL 工作正常，但第二个返回空白数据。就像我说的，在 WIFI 上，所有 3 个 URL 都可以正常工作，但在 3G 上，它们却不行。总是只有第二个 URL 会导致问题。

这是我的代码。这是非常标准的：

```
//FIRST
URL url = new URL(Constants.firstURL); 
String line = null; 
InputStream is = (InputStream) url.getContent(); 
StringBuilder sb = new StringBuilder(); 
BufferedReader reader = new BufferedReader(new InputStreamReader(is)); 
while((line = reader.readLine()) != null)
{ 
    sb.append(line); 
} 
firstRawData = sb.toString().replace(" ", "").replace("\n", ""); 
is.close(); 

//SECOND
url = new URL(Constants.secondURL); 
line = null; 
is = (InputStream) url.getContent(); 
sb = new StringBuilder(); 
reader = new BufferedReader(new InputStreamReader(is)); 
while((line = reader.readLine()) != null)
{ 
    sb.append(line); 
} 
secondRawData = sb.toString().replace(" ", "").replace("\n", ""); 
is.close();

//THIRD
url = new URL(Constants.thirdURL); 
line = null; 
is = (InputStream) url.getContent(); 
sb = new StringBuilder(); 
reader = new BufferedReader(new InputStreamReader(is)); 
while((line = reader.readLine()) != null)
{ 
    sb.append(line); 
} 
thirdRawData = sb.toString().replace(" ", "").replace("\n", ""); 
is.close(); 
```

我将不胜感激任何帮助，因为我以前从未遇到过这个问题。

谢谢你。

编辑：我可以看到的任何地方都没有错误，并且我在`try/catch`which catch `MalformedURLException`,中有 URL 内容`IOException`，`NullPointerException`并且没有抛出异常。Logcat 也没有告诉我任何事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T15:19:53.137

好的，所以我过了一会儿自己回答了这个问题，但忘了回复。

问题是我是从一个线程中调用这个方法的。线程开始工作，而其余代码正在向前推进。当它向前移动时，第二个 URL 还没有完成。

当我将调用移到线程外并使其按顺序运行时，一切都很好！

我在想我必须在一个线程中运行任何互联网检索的东西，但我认为这些调用已经在线程中，所以不需要它。

# android - Android：如何从 ContentResolver 查询中排除 Facebook 联系人

> ID：11172550
> 
> 赞同：2
> 
> 时间：2012-06-23T19:57:33.620
> 
> 标签：android, facebook, contacts, android-contentresolver, contract

我正在使用此查询提取所有手机的联系人：

```
 Cursor c = cr.query(ContactsContract.Data.CONTENT_URI, new String[] { ContactsContract.Contacts.PHOTO_ID, ContactsContract.Data.DISPLAY_NAME, ContactsContract.Contacts.LOOKUP_KEY }, null, null, ContactsContract.Data.LOOKUP_KEY + " ASC"); 
```

如果用户已经同步了他们的 Facebook 联系人，那么我会在此查询中获取这些联系人以及其他所有内容。但是，我已经通过异步 API 调用拉取用户的 Facebook 联系人，因此我想从该查询中排除 Facebook 联系人以避免重复。

有人可以指出我需要包含的 WHERE 子句（选择参数），这将允许我从该查询返回的内容中排除 Facebook 联系人吗？

谢谢！

编辑：或者至少只是一个可以从 ContentResolver 中选择的字段，它允许我手动过滤 Facebook 联系人？那也一样好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T16:34:24.737

嗯，只是一个想法。也许您可以过滤查询以查找有电话号码的联系人。我认为 Facebook 联系人将被排除在外。不过我可能是错的。没试过：）

# android - 具有全高清分辨率的 Android SDK 模拟器

> ID：11172551
> 
> 赞同：9
> 
> 时间：2012-06-23T19:58:07.200
> 
> 标签：android, android-3.0-honeycomb, android-4.0-ice-cream-sandwich

因此，我今天刚刚收到第四封电子邮件，内容是在我的一个应用程序中支持具有 10 英寸屏幕和 1920 x 1200 像素分辨率的最新版本的平板电脑。我的应用程序中的布局是为每种设备类型量身定制的，但我无法启动具有 1920 x 1200 像素分辨率的 SDK 模拟器，因此我无法为这个屏幕尺寸。

我已经多次在 Android 开发人员团队的每周 Google+ 视频群聊中提到了这个问题（他们并不真正关心），我在 Stack Overflow 和一般网络上看到了很多其他关于它的问题，我已经还向 Android 工具网站提交了关于此问题的两个错误。我仍然有一个无法在这些高分辨率下工作的模拟器。

市场上有一些具有这些高分辨率的设备，而且我知道 Android 操作系统支持它，所以我被模拟器的限制绊倒了。

我的 PC 是一匹马力十足的动力马，运行它的动力十足，而且以前分辨率较低的模拟器从未出现过问题。如果有人能提供帮助，我会非常高兴，因为这让我发疯了。

# c# - C# 应用程序部署、安全、复制保护？

> ID：11172558
> 
> 赞同：3
> 
> 时间：2012-06-23T19:59:38.700
> 
> 标签：c#, security, deployment, copy-protection

我已经完成了使用 setup 项目部署我的 c# 应用程序。安装应用程序时，它会在“程序文件”（或任何用户选择的）文件夹中创建文件和文件夹。

问题在于此应用程序的安全性。如果有人复制安装的文件夹，然后在他的机器上运行应用程序，它运行良好。该应用程序只有在使用安装文件安装在 PC 上时才能运行。但即使将已安装的文件复制到新 PC 上，然后运行“exe”也会导致应用程序执行。

我想防止这种情况发生。对此主题的任何帮助将不胜感激。我知道有很多方法可以实现这一点，请指出一些。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T20:09:41.147

好的。仔细听！

当您使用 setup 项目安装时，在 cutsom 操作中添加一个程序集，这将在 regedit 中创建注册条目。

并在您的项目代码中包含检查注册表的初始行，如果找到注册表，它将进一步继续操作，如果没有，它将显示一条错误消息，请安装应用程序。这肯定会奏效；。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T20:27:05.563

就像所有其他应用程序一样，运行设置将在注册表中留下一个键。无需创建其他密钥。

遍历已安装的应用程序以查找您的应用程序，如果不存在，请通知用户运行设置。

您应该查看注册表信息。这是一个很好的实现，如果未安装、仅为用户安装或为所有人安装，它将返回：

[http://mdb-blog.blogspot.com.ar/2010/12/c-check-if-app-is-installed-for-all.html](http://mdb-blog.blogspot.com.ar/2010/12/c-check-if-app-is-installed-for-all.html)

**注意**：这不是实现复制保护的方法，它只是为了验证您的设置过程是否相应地运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T04:22:52.083

您可能希望对您的应用程序进行机器锁定，以便它仅在一台特定机器上运行。这通常通过使用机器锁定或激活的许可证来实现。

查看提供此功能的[CryptoLicensing 。](http://www.ssware.com/cryptolicensing/cryptolicensing_net.htm)

免责声明：我为 CryptoLicensing 的开发商 LogicNP Software 工作。

# asp.net-mvc - 当我添加自定义路由时，Ajax 调用不起作用。为什么会这样？

> ID：11172563
> 
> 赞同：0
> 
> 时间：2012-06-23T20:00:20.697
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-routing

我有这个控制器：

```
public class StandingsController : Controller
{
    public ViewResult Index(int id)
    {

    }

    [HttpPost]
    public JsonResult GetStage(int stage, int leagueid)
    {

    }
} 
```

阿贾克斯调用：

```
 $.ajax({
            url: '@Url.Action("GetStage", "Standings")',
            type: 'POST',
            data: { stage: currentStage, leagueid:leagueid },
            success: function (data) {
                    ............. 
```

我在页面加载后发出 ajax 请求。我想要的只是将 url 从更改`http://localhost/MyApp/Standings/Index/3`为`http://localhost/MyApp/Standings/3`. 我添加了一条自定义路线，如下所示：

```
 routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
 routes.RouteExistingFiles = false;
            routes.MapRoute(null, "Standings/{id}", new { controller = "Standings", action = "Index" });
 routes.MapRoute("Default", "{controller}/{action}/{id}", new { controller = "Home", action = "Index", id = UrlParameter.Optional }); 
```

但现在我在进行 ajax 调用时出现异常：

```
 The parameters dictionary contains a null entry for parameter 'id' of non-nullable type 'System.Int32' for method 'System.Web.Mvc.ViewResult Index(Int32)' in 'MyApp.Controllers.StandingsController'. An optional parameter must be a reference type, a nullable type, or be declared as an optional parameter. 
```

我不明白 ajax 调用与 ViewResult 中的 id 参数有什么关系。我真的需要一些帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T21:46:07.450

它期待一个ID。试试这个：

```
url: '@Url.Action("GetStage", "Standings", new { id = 1 })', 
```

...或这个：

```
routes.MapRoute(null, "Standings/{id}", 
    new { controller = "Standings", action = "Index" }
    new { id = UrlParameter.Optional, }); 
```

# c# - 使用 Buffer 有什么好处 在反向方法中

> ID：11172564
> 
> 赞同：2
> 
> 时间：2012-06-23T20:00:33.210
> 
> 标签：c#, buffer

查看一些代码`System.Linq`，我遇到了一些`Buffer<TSource>`使用示例。

在示例中`Enumemerable.ReverseIterator`，使用 Buffer 有什么好处？

```
private static IEnumerable<TSource> ReverseIterator<TSource>(
                                                        IEnumerable<TSource> source)
    {
      Buffer<TSource> buffer = new Buffer<TSource>(source);
      for (int i = buffer.count - 1; i >= 0; --i)
        yield return buffer.items[i];
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T20:02:52.587

好吧*，有些东西*需要读取整个序列，以便它可以以相反的顺序返回它们。`Buffer<TSource>`在这里是一种选择，也是一种有效的选择——但它*可以*用`ToArray()`or来实现`ToList()`。缓冲区允许创建“超大”数组（与创建列表的方式相同，但版本控制较少等），而无需在`ToArray`.

您可能会发现我的一些[Edulinq](http://msmvps.com/blogs/jon_skeet/archive/tags/Edulinq/default.aspx)（我对 LINQ to Objects 的娱乐和教育的重新实现）文章很有趣，包括：

*   [`ToArray`](http://msmvps.com/blogs/jon_skeet/archive/2011/01/02/reimplementing-linq-to-objects-part-24-toarray.aspx)
*   [实施订购的一部分](http://msmvps.com/blogs/jon_skeet/archive/2011/01/06/reimplementing-linq-to-objects-part-26c-optimizing-orderedenumerable.aspx)
*   [`Reverse`](http://msmvps.com/blogs/jon_skeet/archive/2011/01/08/reimplementing-linq-to-objects-part-27-reverse.aspx)

（故意按照这个顺序，因为它们显示了一个导致类似“缓冲”想法的演变。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T20:07:23.597

缓冲区比`ToList`由于`List<T>`迭代器的验证和版本控制而具有一些内部开销更有效。`ToArray`需要到最终的副本通行证。

此外， Buffer 是一种结构，避免了一次分配。

`Buffer<T>`是一个没有这些开销的内部类。这纯粹是性能优化。

# javascript - Javascript将人类时间转换为时间戳

> ID：11172568
> 
> 赞同：13
> 
> 时间：2012-06-23T20:00:55.410
> 
> 标签：javascript, date

使用javascript，如何将“Wed Jun 20 19:20:44 +0000 2012”之类的“人类时间”字符串转换为“1338821992”之类的时间戳值？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-23T20:11:40.570

只需从中创建一个[`Date`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date)对象并执行[`.getTime()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/getTime)或使用[`Date.parse()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/parse)：

```
var d = new Date("Wed Jun 20 19:20:44 +0000 2012");
d.getTime(); //returns 1340220044000

//OR

Date.parse("Wed Jun 20 19:20:44 +0000 2012"); //returns 1340220044000 
```

如果您的“人类时间”字符串采用 Date 构造函数可以理解的格式（您发布的示例就是这种格式），则效果很好。

* * *

**编辑**

意识到你可能指的是一个 Unix 时间戳，它是自纪元以来经过的秒数（而不是像 JS 时间戳那样的毫秒）。在这种情况下，只需将 JS 时间戳除以`1000`：

```
//if you want to truncate ms instead of rounding just use Math.floor()
Math.round(Date.parse("Wed Jun 20 19:20:44 +0000 2012") / 1000); //returns 1340220044 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-23T20:12:10.713

理论上，与`Date.parse()`. 然而，在实践中，使用数千种不同的方式来表示日期和时间（其中最少的是不同语言中的天/月名称），在其组成部分中获取日期要容易得多，而不是尝试阅读细绳。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T20:15:58.143

看起来您提供的日期/时间以秒为单位而不是毫秒。因此，您需要除以 1000 才能获得以秒为单位的日期/时间。

```
//Gets date in seconds 
var d1 = Date.parse('Wed Jun 20 19:20:44 +0000 2012')/1000;
alert(d1); 
```

示例：http: [//jsfiddle.net/AUt9K/](http://jsfiddle.net/AUt9K/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-28T13:09:26.133

只需添加以下内容： `new Date().getTime()`

这应该为您提供当前时间的时间戳。例子： `var url = "http://abc.xyz.com/my-script.js?v=" + new Date().getTime();`

# vb.net - mongodb 有 VB.NET 驱动程序吗？

> ID：11172572
> 
> 赞同：0
> 
> 时间：2012-06-23T20:01:58.173
> 
> 标签：vb.net, mongodb

是否有关于如何将 VB.NET 与 mongodb 一起使用的教程？

它使用 C#。但是，我习惯了 VB.NET。C# 驱动程序可以与 VB.NET 交互吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T04:55:11.540

C# 驱动程序将编译为 .NET DLL。

您应该能够将此 DLL 添加为引用（与任何其他 DLL 一样）并在 VB.NET 中使用它。

# ms-access - OleDB 到 ODBC 的桥——不是其他方式

> ID：11172573
> 
> 赞同：1
> 
> 时间：2012-06-23T20:02:01.153
> 
> 标签：ms-access, odbc, oledb

由于 Sql Server CE 4 没有 ODBC 驱动程序，但支持 oledb，这意味着我们无法将 MS Access 之类的东西连接到它。但这让我想知道 - 那里没有 OLEDB 到 ODBC 的桥接器吗？我知道存在相反的方向，但我找不到朝这个方向发展的方向。还有，创造这样的动物会不会有不可逾越的困难？

# jquery - 单个大html数据的无限滚动模式？

> ID：11172575
> 
> 赞同：1
> 
> 时间：2012-06-23T20:02:24.053
> 
> 标签：jquery, asp.net, infinite-scroll

我知道如何检测用户何时滚动，然后我们可以将下一个数据加载到 div 中，如下所示。

```
$( "body").scroll( function() { 
if ($(window).scrollTop() > $(document).height() - ($(window).height()*2)) {
$( "#myDiv").load( "test.html");
}
} 
```

我的情况不同。我将在页面中显示单个数据 html 数据，这本身就很大。当我从我的数据库中显示单个数据时，用户必须滚动很多，因为我的单个数据涵盖 3-4 页。所以如果用户需要阅读整个数据，那么他必须滚动 3-4 页。那么有什么方法可以在页面中显示部分巨大的 html 数据，当用户滚动时，我将再次将部分数据加载到页面中，这样我可以以用户向下滚动的方式加载数据。我试图提取部分 html 数据并显示在页面中，但页面 html 看起来很糟糕。所以建议我如何为我的页面部分加载带有 html 标签的数据。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T22:03:32.763

将数据附加到您的主要内容 div。提取要拆分的文本部分，使用正确的类等进行 css 标记。将它们拆分为单独的文件或提供所需内容的 php 文件。

然后使用页眉、页脚、侧边栏等制作您的原始页面，使其看起来更漂亮。然后给你的内容 div 一个像“mycontent”这样的 id</p>

然后使用 ajax 加载下一部分，而不是示例中的 div 加载方法。

```
 $.ajax("nextpart.php?which=whoweare").done(function (data) {
     $("#mycontent").append(data)
 }); 
```

# java - R.drawable 无法解析图像

> ID：11172582
> 
> 赞同：7
> 
> 时间：2012-06-23T20:04:28.547
> 
> 标签：java, android, drawable

我检查了很多关于 stackoverflow 的问题，我似乎拥有所有正确的东西，但我的 R.drawable 不会检测到我的图像。它位于 /res/drawable 和所有其他文件夹（mdpi、hdpi 等）中

```
ShipImage = context.getResources().getDrawable(R.drawable.player); 
```

这是我的 R.java

```
 public static final class drawable {
        public static final int background=0x7f020000;
        public static final int buttons=0x7f020001;
        public static final int dead=0x7f020002;
        public static final int enemy=0x7f020003;
        public static final int ic_launcher=0x7f020004;
        public static final int play_btn=0x7f020005;
        public static final int player=0x7f020006;
    } 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-06-23T20:13:52.910

你确定你进口`import com.yourcompanyname.product.R`？

**代替**

`import android.R;`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-12T10:48:04.027

`import com.yourcompanyname.product.R`不同于`import android.R`

首先是您的项目 R 文件，它由 SDK 生成。

`import android.R`是内置的 R 文件，由 Android 提供。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-12T11:07:57.833

确保您的图像是 png 格式。还要检查您是否已保存必须为图像充气的布局。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-03T19:30:58.517

检查`AndroidManifest.xml`模块文件的包并确保它已正确定义。

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="app.mobius.featureWelcome">
</manifest> 
```

最后将包用作类中的导入：

```
import app.mobius.featureWelcome.R 
```

# python - 新手 Python：输出 NULL 字节的打印函数

> ID：11172584
> 
> 赞同：1
> 
> 时间：2012-06-23T20:04:47.983
> 
> 标签：python, printing

我根本不会用 Python 编程，所以请原谅我的代码。我正在尝试编写一个在一定数量的字节后终止的打印函数。这是我到目前为止所做的：

```
 def print_stuff(stuff, size):
    i = 0
    data = ""
    while i < size:
            if stuff[i]=='\0':
                    data += " "
            else:
                    data += stuff[i]
    print data 
```

但是当我尝试做 printf_stuff(data, 5050) Python 不打印任何东西并且似乎冻结时。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-23T20:05:58.153

您没有增加`i`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-23T20:14:26.197

您可以使用字符串切片和替换来执行此操作。

```
def print_stuff(stuff, size):
    data = stuff[:size]             # Slice it up to the size that you want.
    data = data.replace('\0', ' ')  # Replace all occurrences of \0 with a space.
    print data 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T20:13:19.687

是的，您可能需要在条件语句之后将 i += 1 放在那里：

```
def print_stuff(stuff, size):
  i = 0
  data = ""
  while i < size:
    if stuff[i]=='\0':
      data += " "
    else:
      data += stuff[i]
    i += 1                        # Here's your missing line.
  print data 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-23T20:06:33.243

你没有增加`i`变量

# database - 两阶段提交是否可以防止最终提交失败？

> ID：11172588
> 
> 赞同：7
> 
> 时间：2012-06-23T20:05:14.287
> 
> 标签：database, transactions, distributed-transactions, 2phase-commit

假设分布式事务中涉及的所有数据库都使用两阶段提交信号实现了它们已准备好提交并拥有必要的锁。协调器发出提交信号，所有数据库都执行它们的事务部分，但是一个 SQL 数据库遇到被零除的错误，这是由于编程疏忽而没有考虑到这种可能性。既然协调员已经向每个人发出了承诺信号，那么除以零会发生什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-23T20:19:00.403

第二个提交阶段通常不包含可能失败的用户代码。参与的资源管理器需要保证不会发生故障。如果违反此保证，则协议无法提供任何保证。

两阶段提交试图解决[两个将军问题](http://en.wikipedia.org/wiki/Two_Generals%27_Problem)。这个问题没有完整的解决方案。TPC 是一个近似值。

TPC 可能失败的另一种方式是在网络分区的情况下。一些资源管理器可能会执行最终提交，但有些可能不会收到该消息。同样，这个问题是无法解决的。即使重试也无法解决。

您甚至可以在现实条件下触发此问题：在压力测试中运行所有参与节点并在任意点拉网线。很有可能您的分布式数据库现在不一致，因为一些提交消息在非常不方便的时候丢失了。

# linux - 如何通过vim从多个文件中添加/删除相同的文本行？

> ID：11172589
> 
> 赞同：0
> 
> 时间：2012-06-23T20:05:16.267
> 
> 标签：linux, vim, debian

我在许多不同的目录中有数百个 [大部分不同的] 文件，它们都有相同的 5 行文本，我需要经常编辑。例子：

```
/home/blah.txt
/home/hello/superman.txt
/home/hello/dreams.txt
/home/55/instruct.txt
and so on... 
```

5 行文本按顺序排列，但在所有 .txt 文件中的不同位置开始。例子：

在 /home/blah.txt 中：

```
line 400 this is line 1
line 401 this is line 2
line 402 this is line 3
line 403 this is line 4
line 404 this is line 5 
```

/home/hello/superman.txt：

```
line 23 this is line 1
line 24 this is line 2
line 25 this is line 3
line 26 this is line 4
line 27 this is line 5 
```

如何在所有 .txt 文件中查找和替换这 5 行文本？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T01:18:06.587

第 1 步：使用所有相关文件打开 vim。例如，使用 zshell，您可以执行以下操作：

```
vim **/*.txt 
```

假设您想要的文件是当前树下任何位置的 .txt 文件。或者创建一个单行脚本来打开你需要的所有文件（看起来像：“vim dir1/file1 dir2/file2 ...”）

第 2 步：在 vim 中，执行：

```
:bufdo %s/this is line 1/this is the replacement for line 1/g | w 
:bufdo %s/this is line 2/this is the replacement for line 2/g | w 
... 
```

bufdo 命令在所有打开的缓冲区中重复您的命令。在这里，执行查找和替换，然后执行写入。:help bufdo 获取更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T16:15:43.007

如果您想编写脚本，特别是如果您的数字发生变化但必须保留在新行中：

```
for i in */*txt
do
    DIR=`dirname $i` # keep directory name somewhere
    FILE=`basename $i .txt` # remove .txt
    cat $i | sed 's/line \(.*\) this is line \(.*\)/NEW LINE with number \1 this is NEW LINE \2/' > $DIR/$FILE.new # replace line XX this is line YYY => NEW LINE XX this is NEW LINE YY, keeping the values XX and YY
    #mv -f $DIR/$FILE.new $i # uncomment this when you're sure you want to replace orig file
done 
```

问候，

# django - 包含、合并和压缩目录中的所有 JavaScript 文件？

> ID：11172590
> 
> 赞同：0
> 
> 时间：2012-06-23T20:05:37.547
> 
> 标签：django

我正在制作一个相当重的 JavaScript 网站，我想将我的 JavaScript 拆分为多个文件（每个类一个文件）。但是，我需要包含整个模块（目录）才能使我的站点正常工作。

是否有任何模板标签可以将所有这些文件合二为一？也需要使用静态文件应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T20:12:30.870

[django-pipeline](http://django-pipeline.readthedocs.org/en/latest/index.html)允许您定义可以组合成单个缩小文件的组。它在您的模板中有大量选项和集成。

settings.py 中的配置条目示例

```
PIPELINE_JS = {
    'stats': {
        'source_filenames': (
          'js/jquery.js',
          'js/d3.js',
          'js/collections/*.js',
          'js/application.js',
        ),
        'output_filename': 'js/stats.js',
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T20:23:30.987

[Django 压缩](https://github.com/jezdez/django_compressor/)器可用于将链接和内联 javascript 或 CSS 压缩到单个缓存文件中。它有一些模板标签可以帮助您有效地提供静态文件。

您可以`python manage.py collectstatic`将所有静态文件收集到`STATIC_ROOT`文件夹中。

# html - 将anchor和li放在相同大小

> ID：11172591
> 
> 赞同：0
> 
> 时间：2012-06-23T20:05:41.273
> 
> 标签：html, css

我需要在我的 li 中放置一个锚点，使用相同的空间，就好像它只是一个元素一样。其实我想搭建这个画面： http: [//postimage.org/image/w2q9ei21r/](http://postimage.org/image/w2q9ei21r/) 我已经有一个代码我刚开始，但是我遇到了一些问题，因为锚没有占用相同的空间 li。我很感激任何帮助。 [http://jsfiddle.net/Br9Km/2/](http://jsfiddle.net/Br9Km/2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T20:18:18.017

您可以将`<a>`标签样式设置为`display:block`.

默认情况下，块元素，如`li`或`div`将填充整个可用宽度。然后您还可以设置`height`of`<a>`标签以正确填写高度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T20:50:20.190

您可以使用以下结构实现图像上呈现的内容：

*   请参阅这个[有效的 Fiddle](http://jsfiddle.net/BfB95/)示例，让访问者**点击月份名称**！

    *在此打印屏幕上，您可以看到鼠标悬停在“Fevereiro”月份上。*

    ![菜单打印屏幕](../Images/60e8f0d0718136928ee6607470c010a7.png)

**CSS**

```
/* rounded corners */
#ConteudoMeses li, #ConteudoMeses li a, #ConteudoMeses li span {
    border-radius: 10px 10px 10px 10px;
    -webkit-border-radius: 10px 10px 10px 10px;
    -moz-border-radius: 10px 10px 10px 10px;
    behavior: url(/Themes/Default/Scripts/PIE.htc);
}

/* LI element format */
#ConteudoMeses li {
    display: inline-block;
    width: 140px;
    height: 76px;
    margin: 0 0 8px 0;
}

/* link format */
#ConteudoMeses li a {
    display: inline-block;
    font-weight: bold;
    text-decoration: none;
    line-height: 74px;
    width: 110px;
    color: white;
}

/* arrow holder format */
#ConteudoMeses li span {
    float: right;
    display: block;
    height: 74px;
    width: 20px;
} 
```

* * *

*   请参阅此[工作小提琴](http://jsfiddle.net/BfB95/2/)示例，让访问者**单击月份名称和对应的箭头**！

    *在此打印屏幕上，您可以看到鼠标悬停在“Fevereiro”月份上。*

    ![菜单打印屏幕](../Images/293d114e5a94494b49b9e4dd278e9ba1.png)

**CSS**

```
#ConteudoMeses li, #ConteudoMeses li a, #ConteudoMeses li span {
    border-radius: 10px 10px 10px 10px;
    -webkit-border-radius: 10px 10px 10px 10px;
    -moz-border-radius: 10px 10px 10px 10px;
    behavior: url(/Themes/Default/Scripts/PIE.htc);
}
#ConteudoMeses li {
    display: inline-block;
    width: 140px;
    height: 76px;
    margin: 0 0 8px 0;
}

#ConteudoMeses li a {
    display: block;
}
#ConteudoMeses li .label {
    display: inline-block;
    font-weight: bold;
    text-decoration: none;
    line-height: 74px;
    width: 110px;
    color: white;
}

#ConteudoMeses .arrow {
    float: right;
    display: block;
    height: 74px;
    width: 20px;
} 
```

# php - .htaccess 重写为 https

> ID：11172598
> 
> 赞同：0
> 
> 时间：2012-06-23T20:06:10.260
> 
> 标签：php, ssl

所以我想做以下事情：

1.  如果用户尝试访问 index.php 以外的站点的 ypart，他们会被重定向到 https 版本。

2.  因此，如果他们尝试访问 example.com/index.php，他们不会被重定向到 https 版本

3.  但如果他们访问除 index.php 之外的站点的任何部分（如 welcome.php），他们将被重定向到 https 版本。

这是我之前进行全站点 https 重定向的方法（我不确定如何将全站点重定向到 index.php 上的 https 示例）

```
RewriteBase /
RewriteCond %{HTTP_HOST} ^www.example.com [NC]
RewriteRule ^(.*)$ https://www.handybook.com/$1 [L,R=301]

RewriteCond %{HTTP_HOST} !^www.example.com [NC]
RewriteRule ^(.*)$ https://www.example.com/$1 [L,R=301]

# if a directory or a file exists, use it directly
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# otherwise forward it to index.php
RewriteRule . index.php 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T21:42:07.583

为了使除索引以外的所有页面都重定向到 https，请将以下内容添加到您的 .htaccess 文件中：

```
RewriteCond %{HTTPS} !on
RewriteRule !^(index)\.php$ https://%{HTTP_HOST}%{REQUEST_URI} 
```

您可以使用括号内的管道字符添加其他异常，如下所示：

```
RewriteRule !^(index|about|contact)\.php$ https://%{HTTP_HOST}%{REQUEST_URI} 
```

# python - 正则表达式解析 CSS 选择器

> ID：11172600
> 
> 赞同：2
> 
> 时间：2012-06-23T20:06:21.337
> 
> 标签：python, regex, css-selectors

我想解析这个 CSS 选择器（以及其他类似形式的）： `div.class1#myid.class2[key=value]`

并让它匹配“.class1”和“.class2”，但我不知道要使用什么正则表达式..

示例：[http ://www.rubular.com/r/3dxpzyJLeK](http://www.rubular.com/r/3dxpzyJLeK)

在理想的世界中，我还想提取：

*   类型（即 div）
*   类（即类列表）
*   id（即 myid）
*   钥匙（即钥匙）
*   运算符（即 =）
*   价值（即价值）

但我无法掌握基础知识！

任何帮助将不胜感激:)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T11:17:41.683

非常感谢大家的建议和帮助。我将它们绑定到以下两个正则表达式模式中：

这个解析 CSS 选择器字符串（例如 div#myid.myclass[attr=1,fred=3]） [http://www.rubular.com/r/2L0N5iWPEJ](http://www.rubular.com/r/2L0N5iWPEJ)

```
cssSelector = re.compile(r'^(?P<type>[\*|\w|\-]+)?(?P<id>#[\w|\-]+)?(?P<classes>\.[\w|\-|\.]+)*(?P<data>\[.+\])*$')

>>> cssSelector.match("table#john.test.test2[hello]").groups()
('table', '#john', '.test.test2', '[hello]')
>>> cssSelector.match("table").groups()
('table', None, None, None)
>>> cssSelector.match("table#john").groups()
('table', '#john', None, None)
>>> cssSelector.match("table.test.test2[hello]").groups()
('table', None, '.test.test2', '[hello]')
>>> cssSelector.match("table#john.test.test2").groups()
('table', '#john', '.test.test2', None)
>>> cssSelector.match("*#john.test.test2[hello]").groups()
('*', '#john', '.test.test2', '[hello]')
>>> cssSelector.match("*").groups()
('*', None, None, None) 
```

而这个属性（例如 [link,key~=value]）[http://www.rubular.com/r/2L0N5iWPEJ](http://www.rubular.com/r/2L0N5iWPEJ)：

```
attribSelector = re.compile(r'(?P<word>\w+)\s*(?P<operator>[^\w\,]{0,2})\s*(?P<value>\w+)?\s*[\,|\]]')

>>> a = attribSelector.findall("[link, ds9 != test, bsdfsdf]")
>>> for x in a: print x
('link', '', '')
('ds9', '!=', 'test')
('bsdfsdf', '', '') 
```

需要注意的几点：1）这使用逗号分隔符解析属性（因为我没有使用严格的 CSS）。2) 这要求模式采用以下格式：标签、ID、类、属性

第一个正则表达式执行标记，因此空格和“>”分隔选择器字符串的部分。这是因为我想用它来检查我自己的对象图:)

再次感谢！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T20:26:36.570

我想你需要这样的东西。

```
(?P<tag>[a-zA-Z]+)?(\.(?P<class>[a-zA-Z0-9_-]+)?)?(#(?P<id>[a-zA-Z0-9_-])?)?\W*\{((?P<name>[a-zA-Z0-9-_]+?)=(?P<value>[a-zA-Z0-9-_]+?))*\} 
```

对不起，如果它不起作用，我还没有测试它

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T20:29:02.957

绝对不要尝试使用单个正则表达式来执行此操作。正则表达式是出了名的难以阅读和调试，所以当你完成了这个任务的前 80% 并回去尝试修复错误时，代码将是一场噩梦。

相反，尝试编写函数，甚至是一个类，让你可以做你想做的事情。然后，您可以为每个特定任务使用相对简单的正则表达式，并在您的实现中使用更直观的语法。

```
class css_parser:

  def __init__(self):
    self.class_regexp = re.compile('\.[\w\-]*') # This is insufficient, but it's a start...

  def get_class(self, str):
    m = self.class_regexp.match(str)
    return m.group(0) 
```

您需要查阅[W3C CSS 规范，](http://www.w3.org/TR/CSS2/)特别是第 4 节。

# c# - 结合 DirectoryServices.AccountManagement 和角色提供者

> ID：11172601
> 
> 赞同：1
> 
> 时间：2012-06-23T20:06:27.180
> 
> 标签：c#, asp.net, directoryservices, roleprovider, account-management

是否可以通过 System.DirectoryServices.AccountManagement 使用自定义角色提供程序或 Windows/SQL？我以这种方式验证用户，如果我可以使用角色提供者来管理网站内容，那就太好了。这甚至可能吗？

# java - 在屏幕解锁时启动 android 应用

> ID：11172605
> 
> 赞同：5
> 
> 时间：2012-06-23T20:07:18.417
> 
> 标签：java, android

我想构建一个锁屏替换应用程序。有没有办法创建一个监听器/服务，只要用户唤醒/解锁屏幕，它就会启动我的应用程序？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-23T20:10:27.253

我相信您正在寻找[`ACTION_USER_PRESENT`](http://developer.android.com/reference/android/content/Intent.html#ACTION_USER_PRESENT)意图操作。

> 公共静态最终字符串 ACTION_USER_PRESENT
> 
> 自：API 级别 3 广播操作：在设备唤醒后用户在场时发送（例如，当键盘保护消失时）。

也就是说，Android 目前不支持更换锁屏。市场上声称这样做的任何应用程序都利用了安全漏洞并且不安全。[**您可以阅读此线程以获取更多信息。**](https://groups.google.com/forum/?fromgroups#!topic/android-developers/9m36tsMA628)（特别是，您应该阅读 Mark Murphy 的帖子）。对不起。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-23T20:15:55.860

[查看mylockforandroid](http://code.google.com/p/mylockforandroid/source/browse/)的源代码， 您将需要使用[DeviceAdminReceiver](http://developer.android.com/reference/android/app/admin/DeviceAdminReceiver.html)来禁用默认的 android 屏幕锁定。

用于在用户解锁屏幕注册时启动您的活动，`Intent.ACTION_SCREEN_ON`并且注册`Intent.ACTION_SCREEN_OFF`为：

在 manifast.xml 中添加此代码，将 ScreenReceiver 注册为：

```
<receiver android:name=".ScreenReceiver">
 <intent-filter>
 <action android:name="android.intent.action.SCREEN_OFF"/>
 <action android:name="android.intent.action.SCREEN_ON"/>
 </intent-filter>
 </receiver> 
```

并将 ScreenReceiver.java 添加为：

```
 public class ScreenReceiver extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {
         if (intent.getAction().equals(Intent.ACTION_SCREEN_ON))
         {
            Intent intent = new Intent();  
            intent.setClass(context, ScreenLockActivity.class);
            startActivity(intent);          
         }
    }
} 
```

# google-app-engine - 将 CSV 上传到 GAE 数据存储

> ID：11172609
> 
> 赞同：1
> 
> 时间：2012-06-23T20:07:45.393
> 
> 标签：google-app-engine, csv, google-cloud-datastore, export-to-csv

我正在使用 GAE 的高复制数据存储。我之前使用这个下载了csv中的表格：

```
appcfg.py download_data --application=<your_app_id> --kind=<kind> --url=http://your_app_id.appspot.com/[remote_api_path] --filename=<data-filename> 
```

现在我对该 CSV 文件进行了一些修改，我想上传它以替换在线数据。所以我用了这个：

```
appcfg.py upload_data --config_file=bulkloader.yaml --filename=<data-filename> --kind=<kind> --url=http://your_app_id.appspot.com/[remote_api_path] 
```

这成功上传了数据，但问题是现在所有新上传的键（包括引用）看起来像这样：`name=99764`而不是`id=99764`

GAE 没有认识到两者是同一个东西，所以它没有替换现有的，而是添加了新的。但是现在引用现在被破坏了。

在中`bulkloader.yaml`，我有这个：

```
- kind: Kind
  connector: csv
  connector_options:
    # TODO: Add connector options here--these are specific to each connector.
  property_map:
    - property: __key__
      external_name: key
      export_transform: transform.key_id_or_name_as_string 
```

是这部分：`transform.key_id_or_name_as_string`导致问题吗？如果是这样，那么我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T04:34:54.647

我不确定，但也许这可以帮助你。我仅将其用于*链接*ReferenceProperty，而不用于替换数据

```
- property: __key__
      external_name: key
      import_transform: transform.create_foreign_key('key', key_is_id=True)
      export_transform: transform.key_id_or_name_as_string 
```

编辑：

```
- property: category
  external_name: category
  import_transform: transform.create_foreign_key('Category', key_is_id=True) 
```

大写的“类别”是从属性“类别”引用的模型。在 csv 文件中，我有一个类似“123456”的字符串，而在数据存储中，类别种类的 ID 是“123456”。通过这种方式，GAE 将引用属性与相对 Kind 相关联，否则它将是一个简单的字符串。现在在您的情况下有所不同，因为您使用 Key 来替换数据，而我没有这方面的经验。

# javascript - 如何在 raphael js 中动态定位？

> ID：11172611
> 
> 赞同：1
> 
> 时间：2012-06-23T20:07:58.890
> 
> 标签：javascript, css, graph, raphael, graphael

我设计了这样的东西[http://jsfiddle.net/suchitadoshi1987/dfNB8/](http://jsfiddle.net/suchitadoshi1987/dfNB8/)，

现在我想动态地将这三个圆圈放在不同的位置。它基本上是一个图表，图表内的圆圈是统计数据。那么任何人都可以帮助我动态定位圆圈吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T20:19:08.730

您可以在没有动画时间的情况下使用[动画](http://raphaeljs.com/reference.html#Element.animate)Raphael 函数。我在这里叉了你的小提琴：http: [//jsfiddle.net/UTsLJ/3/](http://jsfiddle.net/UTsLJ/3/)

# ios5 - 无法链接 ALAssetsLibrary

> ID：11172620
> 
> 赞同：19
> 
> 时间：2012-06-23T20:10:06.367
> 
> 标签：ios5, alassetslibrary

我正在努力在我的代码中链接 ALAssetsLibrary。

我在这方面搜索了很多，并遵循了不止一个教程到最后一个点，但我仍然在我开始的地方。

```
Ld /Users/vedprakash/Library/Developer/Xcode/DerivedData/PickThumb-gmvprlkgmgexedeojbaoeidbadnw/Build/Products/Debug-iphonesimulator/PickThumb.app/PickThumb normal i386
    cd "/Users/vedprakash/Documents/XCode Projects/PickThumb"
    setenv MACOSX_DEPLOYMENT_TARGET 10.6
    setenv PATH "/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
    /Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin/clang -arch i386 -isysroot /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk -L/Users/vedprakash/Library/Developer/Xcode/DerivedData/PickThumb-gmvprlkgmgexedeojbaoeidbadnw/Build/Products/Debug-iphonesimulator -F/Users/vedprakash/Library/Developer/Xcode/DerivedData/PickThumb-gmvprlkgmgexedeojbaoeidbadnw/Build/Products/Debug-iphonesimulator -filelist /Users/vedprakash/Library/Developer/Xcode/DerivedData/PickThumb-gmvprlkgmgexedeojbaoeidbadnw/Build/Intermediates/PickThumb.build/Debug-iphonesimulator/PickThumb.build/Objects-normal/i386/PickThumb.LinkFileList -mmacosx-version-min=10.6 -Xlinker -objc_abi_version -Xlinker 2 -Xlinker -no_implicit_dylibs -D__IPHONE_OS_VERSION_MIN_REQUIRED=50000 -framework UIKit -framework Foundation -framework CoreGraphics -o /Users/vedprakash/Library/Developer/Xcode/DerivedData/PickThumb-gmvprlkgmgexedeojbaoeidbadnw/Build/Products/Debug-iphonesimulator/PickThumb.app/PickThumb

Undefined symbols for architecture i386:
  "_OBJC_CLASS_$_ALAssetsLibrary", referenced from:
      objc-class-ref in PickThumbViewController.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-06-23T20:13:29.333

您需要将`AssetsLibrary`框架添加到目标的“Link Binary With Libraries”构建阶段`PickThumb`。

[如何在 Xcode 4 中“添加现有框架”？](https://stackoverflow.com/questions/3352664/how-to-add-existing-frameworks-in-xcode-4)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2019-06-21T01:12:01.907

在 Xcode 10.2 中，我刚刚添加了

```
AssetsLibrary.framework 
```

在 Target>Build Phases> Link Binary With Libraries 部分

# php - 链接到与页面一起加载并在编辑时保存的mysql db的输入字段字符串？

> ID：11172622
> 
> 赞同：0
> 
> 时间：2012-06-23T20:10:29.907
> 
> 标签：php, mysql, html

我正在尝试在我的网站上创建一个收藏夹部分，用户可以选择在他们收藏的项目附近添加注释。注释将输入到输入字段中，我希望数据与网页一起加载并更新更改。笔记将存储在存储所有收藏项目的数据库中。

我想知道实现这一目标的最佳方法是什么？

这就是我的想法：从数据库中提取“注释”字符串并将其设置为输入字段的“值”。

关于更改：我并不是识别更改并更新数据库的最佳方法，这就是我希望获得帮助的方法。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T20:14:10.320

您可以使用方法提交 PHP 表单`POST`并使用 PHP 脚本处理添加，也可以通过 AJAX 帖子发送注释。**我向不熟悉 AJAX 的人推荐 jQuery**。这是一个例子：

```
$.post("save-note.php", { note: $("#note").val() }) 
```

如果您想在他们完成输入时保存，它可以像这样工作：

```
$(".note").blur(function() {
    var edited_note = $(this);
    $.post("script-to-add.php", { note: edited_note.val() })
}); 
```

# python - scipy.io 的导入问题

> ID：11172623
> 
> 赞同：26
> 
> 时间：2012-06-23T20:10:33.450
> 
> 标签：python, import, scipy

我一直在尝试开始使用 scipy，但是这个包给了我一些问题。本教程很大程度上依赖于 scipy.io，但是当我导入 scypi 并尝试使用 scipy.io 时，出现错误：

```
In [1]: import scipy

In [2]: help(scipy.io)
---------------------------------------------------------------------------
AttributeError                            Traceback (most recent call last)
/home/chris/dev/scipy/<ipython-input-2-ef060398b31c> in <module>()
----> 1 help(scipy.io)

AttributeError: 'module' object has no attribute 'io' 
```

我已经运行了系统更新并卸载了 scipy 然后再次安装它。

有趣的是，我可以这样导入模块：

```
In [1]: import scipy.io 
```

但是当我尝试使用它时，我一使用方法就会出错：

```
In [2]: arr = scipy.array([[1.0,2.0],[3.0,4.0],[5.0,6.0]])
In [3]: outFile = file('tmpdata1.txt', 'w')
In [4]: scipy.io.write_array(outFile, arr)
---------------------------------------------------------------------------
AttributeError                            Traceback (most recent call last)
/home/chris/dev/scipy/<ipython-input-4-46d22e4ff485> in <module>()
----> 1 scipy.io.write_array(outFile, arr)

AttributeError: 'module' object has no attribute 'write_array' 
```

我确定我错过了一些令人尴尬的基本内容，但我无法在 Google 或 stackoverflow 档案中找到这个问题的答案。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-06-23T20:20:28.140

这里有两件事。首先，您通常不能通过执行`import package`然后尝试访问来访问包中的模块`package.module`。你经常不得不做你所做的`import package.module`，或者（如果你不想一直打字`package.module`，你可以做`from package import module`。所以你也可以做`from scipy import io`。

二是`scipy.io`模块不提供`write_array`功能。看起来也许它曾经是，但他们摆脱了它。您可能正在查看过时的教程。（你在用什么教程？）谷歌搜索，似乎他们建议使用 numpy 的`savetxt`函数，所以你可能想研究一下。

# python - 如何获取二进制掩码的位置真实位

> ID：11172625
> 
> 赞同：1
> 
> 时间：2012-06-23T20:11:00.920
> 
> 标签：python, numpy

我知道我可以通过简单的循环获得真正的位，但循环速度非常慢

```
 locations = []
   width, height = mask.shape[0], mask.shape[1]
   for x in range(len(0,width)):
      for y in range(len(0,height):
        if mask[x][y] is 1:
          location.append([x,y]) 
```

我开玩笑说要避免循环开销。我正在学习 python，但我不明白这个数组 [:] 的东西

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T20:27:50.660

您可以使用`nonzero`. 它返回按轴分组的索引——换句话说，一个元组的形式`(array([x1, x2, x3,...]), array([y1, y2, y3,...]), array([z1, z2, z3,...]),...)`：

```
>>> a = numpy.array([[0, 0], [0, 1], [1, 0]], dtype=numpy.bool)
>>> numpy.nonzero(a)
(array([1, 2]), array([1, 0])) 
```

您可以使用结果作为索引来获取非零值：

```
>>> a[numpy.nonzero(a)]
array([ True,  True], dtype=bool) 
```

# android - Android - 无法打开模拟器窗口

> ID：11172626
> 
> 赞同：1
> 
> 时间：2012-06-23T20:11:18.077
> 
> 标签：android, eclipse, emulation

每当我从 Eclipse 启动我的模拟器时，它都会加载，但我无法打开窗口来实际查看模拟器并与之交互？

我只能从任务栏查看它，但实际上无法打开它。当我在任务栏中单击它时，没有任何反应。它不在我的窗户或任何东西后面。

这就是我能做的一切[http://i.imgur.com/7X8VH.png](http://i.imgur.com/7X8VH.png)

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T21:03:28.960

遵循**[以下步骤](http://androidbook.blogspot.co.il/2011/03/tip-speeding-up-your-android-emulator.html)**：

尝试创建一个新的 AVD 并**确保 SD 卡足够大**，200mb 应该没问题。
还要**检查快照选项**（保存模拟器的状态，并使其加载更快）。

有时模拟器不会运行，除非您选中**擦除用户数据**或取消选中**从快照启动**选项。

尝试不同的配置。模拟器加载也需要相当长的时间，具体取决于您的硬件功能，所以请耐心等待（给它 10 分钟看看它是否真的死机）。

# javascript - 显示边框的 JQuery 生日选择器

> ID：11172627
> 
> 赞同：1
> 
> 时间：2012-06-23T20:11:26.803
> 
> 标签：javascript, jquery, css

我正在使用生日选择器 JQuery 插件，它工作正常。问题是我周围有一个讨厌的边框`<div>`，宽度`<div>`是 100%。有什么办法可以改变吗？
我尝试了这段代码，但没有结果：
`<div class="birthdaypicker" id="birthdate" style="border:none; width:200px;"></div>`
`$(document).ready(function(){ $("#birthdate").birthdaypicker({}); });`

这是插件的链接：[生日选择器](https://github.com/abecoffman/birthdaypicker/blob/master/index.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:36:58.867

[生日选择器插件](https://github.com/abecoffman/birthdaypicker)在您的 .birthdaypicker div 中生成以下标记：

```
<fieldset class='birthday-picker'>
    <select class='birth-year' name='birth[year]'></select>
    <select class='birth-month' name='birth[month]'></select>
    <select class='birth-day' name='birth[day]'></select>
    <input type='hidden' name='birthdate' />
</fieldset> 
```

您可以通过添加以下 css 从生成的 fieldset 元素中删除边框：

```
.birthday-picker {
    border: none;
} 
```

# .htaccess - htaccess 从 url 中删除子目录

> ID：11172630
> 
> 赞同：0
> 
> 时间：2012-06-23T20:11:57.410
> 
> 标签：.htaccess, url, rewrite, subdirectory

我已经阅读了基于这个主题的多个线程，但没有任何规则有效，所以我确定我做错了什么。

我的 /var/www 中有以下结构

```
main domain folders that redirects to domain.com
folder1 that redirects to domain1.com
folder2 that redirects to domain2.com 
```

在文件夹 2 中，我还有 3 个子目录

```
folder2/subdirectory1
folder2/subdirectory2
folder2/subdirectory3 
```

这些应该重定向到：

```
www.domain2.com/subdirectory1
www.domain2.com/subdirectory2
www.domain2.com/subdirectory3 
```

但不是那样，它还会在 url 中显示 folder2 所以它是列表

```
www.domain2.com/folder2/subdirectory1
www.domain2.com/folder2/subdirectory2
www.domain2.com/folder2/subdirectory3 
```

我有两个 .htaccess：一个在根文件夹内，一个在文件夹 2 内

htaccess 从根文件夹

```
Options +FollowSymLinks 
RewriteEngine On
RewriteBase /

ReWriteCond %{HTTP_HOST} domain1.com
ReWriteCond %{REQUEST_URI} !folder1/
ReWriteRule ^(.*)$ folder1/$1 [L] 

ReWriteCond %{HTTP_HOST} domain2.com
ReWriteCond %{REQUEST_URI} !folder2/
ReWriteRule ^(.*)$ folder2/$1 [L] 
```

来自文件夹 2 的 htaccess

```
RewriteEngine On
RewriteBase / 

ReWriteCond %{HTTP_HOST} domain2.com/subdirectory1
ReWriteCond %{REQUEST_URI} !subdirectory1/
ReWriteRule ^(.*)$ subdirectory1/$1 [L] 

ReWriteCond %{HTTP_HOST} domain2.com/subdirectory2
ReWriteCond %{REQUEST_URI} !subdirectory2/
ReWriteRule ^(.*)$ subdirectory2/$1 [L] 

ReWriteCond %{HTTP_HOST} domain2.com/subdirectory3
ReWriteCond %{REQUEST_URI} !subdirectory3/
ReWriteRule ^(.*)$ subdirectory3/$1 [L] 
```

希望我终于可以解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T21:06:01.717

`[R]`我认为您应该在 folder2中使用重定向标签`.htaccess` `RewriteRule`。

这边走：

```
RewriteEngine On
RewriteBase / 

ReWriteCond %{HTTP_HOST} domain2.com/subdirectory1
ReWriteCond %{REQUEST_URI} !subdirectory1/
ReWriteRule ^(.*)$ subdirectory1/$1 [R] 

ReWriteCond %{HTTP_HOST} domain2.com/subdirectory2
ReWriteCond %{REQUEST_URI} !subdirectory2/
ReWriteRule ^(.*)$ subdirectory2/$1 [R] 

ReWriteCond %{HTTP_HOST} domain2.com/subdirectory3
ReWriteCond %{REQUEST_URI} !subdirectory3/
ReWriteRule ^(.*)$ subdirectory3/$1 [R] 
```

# emacs - 如何在 Emacs 上显示弹出窗口？

> ID：11172633
> 
> 赞同：11
> 
> 时间：2012-06-23T20:12:25.140
> 
> 标签：emacs, lisp, elisp, emacs23

我打算更改 Emacs 中的某些特性/功能。我想知道 Emacs 中是否有任何功能可以弹出窗口以显示警告消息？此外，如果此功能不可用，我将不胜感激任何替代想法。

祝大家欢呼。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-23T23:00:49.373

（消息框“世界着火了”）

您可能还想`M-x apropos RET ^x-`了解 emacs 支持的其他 GUI 功能。

如果你想要更复杂的东西，你必须使用/编写单独的程序。
Emacs GUI 支持有限，但它与其他进程的交互非常好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T08:02:37.893

您可能想查看以下内容。这些是自动完成使用的弹出窗口。

[https://github.com/m2ym/popup-el/tree/v0.4](https://github.com/m2ym/popup-el/tree/v0.4)

# xslt - xslt 删除标点符号

> ID：11172639
> 
> 赞同：2
> 
> 时间：2012-06-23T20:12:50.217
> 
> 标签：xslt, translate

谁能告诉我为什么下面的代码行不是使用 xslt 1.0 为段落元素的文本节点删除句点和逗号的合法方法？这是我目前拥有的模板：

```
<xsl:template match="tei:p">
    <p id="{@xml:id}" class="plaoulparagraph" style="margin-left: 3em;"><xsl:apply-templates select="./translate(current(), '.,', '')"/></p>
</xsl:template> 
```

当我尝试执行此操作时，我的编辑器当前给了我一个错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T21:01:54.780

> ```
> <xsl:apply-templates select="./translate(current(), '.,', '')"/> 
> ```

**在 XSLT 1.0 和 2.0 中，`select`属性中的表达式`xsl:apply-templates`必须计算为 node-set**。

上述指令的`select`属性在 XPath 1.0 中在语法上无效，因为在 XPath 1.0 中不允许将函数调用作为`/`运算符的 RHS（感谢@MichaelKay 指出这一点），而在 XPath 2.0 中它的计算结果为字符串，而不是节点集——这是错误的原因。

**你想做这样的事情**：

```
<xsl:template match="tei:p//text()">
 <xsl:value-of select="translate(., '.,', '')"/>
</xsl:template> 
```

**并将上面引用的指令替换为**：

```
 <xsl:apply-templates/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T20:26:58.677

用这个

```
<p class="plaoulparagraph" style="margin-left: 3em;"><xsl:value-of select="translate(current(), '.,', '')"/></p> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-12T19:10:01.493

如果你正在处理一个数字的逗号，你可以这样翻译它：

```
<xsl:variable name="string_value">
   <xsl:value-of select="'123,456,789.01'"/>
</xsl:variable>

<Number>
    <xsl:value-of select="number(translate($string_value,',',''))"/>
<Number> 
```

# asp.net-mvc-3 - 如何获取标识列的主键

> ID：11172640
> 
> 赞同：1
> 
> 时间：2012-06-23T20:12:57.623
> 
> 标签：asp.net-mvc-3, entity-framework

我正在使用以下代码在 MVC3 应用程序中创建审计跟踪。

[http://jmdority.wordpress.com/2011/07/20/using-entity-framework-4-1-dbcontext-change-tracking-for-audit-logging/](http://jmdority.wordpress.com/2011/07/20/using-entity-framework-4-1-dbcontext-change-tracking-for-audit-logging/)

在代码示例中，他们使用 GUID 作为主键。就我而言，我使用的是自动递增的标识列。上面链接中的代码效果很好，除了在“添加”上调用 dbentry.current 值时我无法获取主键（返回 0，因为 for 不提交此数据）。

我正在尝试找到一种获取主键的方法，以便可以正确地将其添加到我的事务表中。我知道您以后可以检索它，但我不确定获得它然后使用正确的主键更新表的最佳方法。

任何想法，将不胜感激。我不想将我的主键更改为 GUID。

我对有效的 dbcontext 进行了以下修改。

```
if (ent.State == System.Data.EntityState.Added)
            {
                base.SaveChanges();
                ent.State = System.Data.EntityState.Added;
            } 
```

然后在 GetAuditRecordsForChange 函数中，我再次分离，因此不会创建两次记录。

```
if (dbEntry.State == System.Data.EntityState.Added)
        {
            // For Inserts, just add the whole record
            // If the entity implements IDescribableEntity, use the description from Describe(), otherwise use ToString()                   
            result.Add(new TransactionHistory()
            {
                TransactionTypeID = 1,
                TableName = tableName,
                FieldName = "ALL",
                RecordPK = dbEntry.CurrentValues.GetValue<object>(keyName).ToString(),
                OldValue = null,
                NewValue = (dbEntry.CurrentValues.ToObject() is IDescribableEntity) ? (dbEntry.CurrentValues.ToObject() as IDescribableEntity).Describe() : dbEntry.CurrentValues.ToObject().ToString(),
                TransactionBy = userId,
                TransactionDate = changeTime,
                TransactionApplication = "Galactus"
            });
            dbEntry.State = System.Data.EntityState.Detached;
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T23:04:30.823

您不能使用数据库生成的 PK 在单次运行中执行此操作。这就是帖子使用 GUID 的原因。要插入的记录的 PK 只有在插入之后才知道 = 在您执行之后`SaveChanges`。因此，您需要在此之后`SaveChanges`一次又一次地构建您的插入日志。

# regex - 重写规则从正则表达式中的 (.*) 中排除某些字符串

> ID：11172642
> 
> 赞同：2
> 
> 时间：2012-06-23T20:13:18.127
> 
> 标签：regex, .htaccess

我目前有以下 htaccess 重写规则：

```
RewriteRule    (.*) index.php/$1 [L] 
```

如何使它排除 2 个特定字符串，例如：“模板”和“图像”？

我读了其他帖子，但我不清楚。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T20:18:43.413

你可以做一个否定的重写条件

像这样：

```
RewriteCond %{REQUEST_URI} !^/(template|image)
RewriteRule (.*) index.php/$1 [L] 
```

这实际上不会重写任何指向图像和模板文件夹中事物的 url。

*   [关于文档`RewriteCond`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritecond)
*   [关于htaccess的非常好的教程，也深入到了url重写，值得一读](http://corz.org/serv/tricks/htaccess2.php)

# php - 将 FULL Excel 日期序列格式转换为 Unix 时间戳

> ID：11172644
> 
> 赞同：16
> 
> 时间：2012-06-23T20:13:21.973
> 
> 标签：php, import-from-excel

我已经看到很多关于转换 Excel 序列日期格式的“日期”部分的参考资料，但似乎每个人都跳过了它的“时间”部分。

这是我需要做的：

我有一个要导入的 Excel 文件。使用中的 PHP。

我遇到了 Excel 日期序列格式 (dddddd.tttttt)，需要将其转换为整个 Unix 时间戳。

我尝试了一些不同的事情，但我对如何以流畅的动作做到这一点感到困惑。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-02-28T13:44:30.043

请使用此公式从 Excel 日期更改为 Unix 日期，然后您可以使用“gmdate”获取 PHP 中的真实日期：

```
UNIX_DATE = (EXCEL_DATE - 25569) * 86400 
```

并将 Unix 日期转换为 Excel 日期，请使用以下公式：

```
EXCEL_DATE = 25569 + (UNIX_DATE / 86400) 
```

将此公式转换为变量后，您可以使用以下示例在 PHP 中获取实际日期：

```
$UNIX_DATE = ($EXCEL_DATE - 25569) * 86400;
echo gmdate("d-m-Y H:i:s", $UNIX_DATE); 
```

谢谢。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-06-12T19:59:44.383

This oneliner worked for me, using PHPExcel of course.

```
$date_formated = date('Y-m-d', PHPExcel_Shared_Date::ExcelToPHP($date_int_val)); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-23T20:20:49.417

你显然看起来不是很努力：

直接取自 PHPExcel 日期处理代码：

```
public static function ExcelToPHP($dateValue = 0) {
    if (self::$ExcelBaseDate == self::CALENDAR_WINDOWS_1900) {
        $myExcelBaseDate = 25569;
        //    Adjust for the spurious 29-Feb-1900 (Day 60)
        if ($dateValue < 60) {
            --$myExcelBaseDate;
        }
    } else {
        $myExcelBaseDate = 24107;
    }

    // Perform conversion
    if ($dateValue >= 1) {
        $utcDays = $dateValue - $myExcelBaseDate;
        $returnValue = round($utcDays * 86400);
        if (($returnValue <= PHP_INT_MAX) && ($returnValue >= -PHP_INT_MAX)) {
            $returnValue = (integer) $returnValue;
        }
    } else {
        $hours = round($dateValue * 24);
        $mins = round($dateValue * 1440) - round($hours * 60);
        $secs = round($dateValue * 86400) - round($hours * 3600) - round($mins * 60);
        $returnValue = (integer) gmmktime($hours, $mins, $secs);
    }

    // Return
    return $returnValue;
}    //    function ExcelToPHP() 
```

根据需要设置 self::$ExcelBaseDate == self::CALENDAR_WINDOWS_1900 以指示您正在使用的 Excel 基准日历：Windows 1900 或 Mac 1904

如果你想要一个 PHP DateTime 对象：

```
public static function ExcelToPHPObject($dateValue = 0) {
    $dateTime = self::ExcelToPHP($dateValue);
    $days = floor($dateTime / 86400);
    $time = round((($dateTime / 86400) - $days) * 86400);
    $hours = round($time / 3600);
    $minutes = round($time / 60) - ($hours * 60);
    $seconds = round($time) - ($hours * 3600) - ($minutes * 60);

    $dateObj = date_create('1-Jan-1970+'.$days.' days');
    $dateObj->setTime($hours,$minutes,$seconds);

    return $dateObj;
}    //    function ExcelToPHPObject() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-08T17:10:49.653

我在一个项目上遇到了同样的问题，我正在寻找一个**`PHP Class to Read Excel as PHP Array`**. 我很幸运找到了**`'SimpleXLSX' Class`**. 它可以很好地处理excel数据，但是……但是……哦！！但是.... :(我已经意识到**`Date Reading From Excel`**字段存在一些问题。在 excel 中的值看起来很好，但是当我们尝试导入它们时，日期值变得不同。有时我们得到正确的值有时只是一个数字，有时是浮点值。我们正在寻找解决方案'

> **为什么会发生，为什么 PHP 没有从 EXCEL 中获取正确的日期**

' 然后经过大量的观察，我们找到了原因：

**@Source：[在 php 中读取 xls 日期](https://stackoverflow.com/questions/17808750/reading-xls-date-in-php)**

> 根据 excel 格式 41397 是 2013-05-03 Excel 将日期和时间存储为一个数字，表示自 1900 年 1 月 0 日以来的天数，加上 24 小时日的小数部分：ddddd.tttttt。这称为序列日期或序列日期时间。

**@Source：[使用 PHP Excel 进行 Excel 日期转换](https://stackoverflow.com/questions/11119631/excel-date-conversion-using-php-excel)**

> 将 Excel 日期转换为 Unix 日期，然后将 Unix 日期转换为 PHP 日期

所以，我做了一个小助手类来读取 Excel 日期以便在 PHP 中使用。我希望它会帮助某人，并会减少护目镜和努力。

`Read Excel as PHP Array()`这是我的代码`Parse Excel Date as PHP Date`

> 给菜鸟的：

1.  `SimpleXLSX.php`从给定的示例代码下载
2.  在 PHP array() 中转换 excel 数据（字段/值）
3.  将excel日期转换为PHP
4.  现在..是的！Excel 数据已准备好作为 PHP 数组移入 MySQL 表...

> 这是PHP代码：

```
<?php   
/*
  EXCEL DATA EXAMPLE:
  ----------------------------
  ID      Consumer_Date  Delivery_Date   Date_of_Dispatch    Gift_Date_Created   Active_Date              Approved_Date
  536     -No-Data-      9-Nov-15        7-Nov-15            -No-Data-           10/31/2015 12:00:00 AM   4/11/2015 10:21
  537     -No-Data-      -No-Data-       7-Nov-15            -No-Data-           10/23/2015 12:00:00 AM   3/11/2015 16:24

*/

/*
  EXCEL DATA IN PHP ARRAY FORMAT
  -------------------------------
  Array
  (
      [0] => Array
          (
              [ID] => 536
              [Consumer_Date] => -No-Data-
              [Delivery_Date] => 42317
              [Date_of_Dispatch] => 42315
              [Gift_Date_Created] => -No-Data-
              [Active_Date] => 10/31/2015 12:00:00 AM
              [Approved_Date] => 42105.431574074
          )
      [1] => Array
          (
              [ID] => 537
              [Consumer_Date] => -No-Data-
              [Delivery_Date] => -No-Data-
              [Date_of_Dispatch] => 42315
              [Gift_Date_Created] => -No-Data-
              [Active_Date] => 10/23/2015 12:00:00 AM
              [Approved_Date] => 42074.683958333
          )
  )

*/

/* ----------------- */
/* Excel_Date_Parser.php */
/* ----------------- */

// Numbers of days between January 1, 1900 and 1970 (including 19 leap years)
define("MIN_DATES_DIFF", 25569);

// Numbers of second in a day:
define("SEC_IN_DAY", 86400);

/** Set default timezone (will throw a notice otherwise) */
date_default_timezone_set('Asia/Kolkata');

/**
 * Class Excel_Date_Parser
 *
 * SetDateString($excel_date_value) : send excel date column value
 * GetDateString(): get your php date in Y-m-d format (MySQL)
 */
class Excel_Date_Parser
{

  /**
   * Send Excel Date String Value Here
   * @param [type] $date_from_excel [description]
   * @return instance Excel_Date_Parser
   */
  public function SetDateString($date_from_excel) {
    $this->date_from_excel = $date_from_excel;
    return $this;
  }

  /**
   * Set Date Format Here, default is "Y-m-d"
   * @param string $set_format_date [description]
   */
  public function SetDateFormat($set_format_date = "Y-m-d") {
    $this->set_format_date = $set_format_date;
  }

  /**
   * Get what format is set
   */
  public function GetDateFormat() {
    return $this->set_format_date;
  }

  /**
   * Return PHP date according to Set Format from Excel Date
   * @return string php date
   */
  public function GetDateString() {

    // if value is valid date string
    if (strtotime($this->date_from_excel)) {

      /**
       * Excel stores dates and times as a number representing the number of days since 1900-Jan-0,
       * plus a fractional portion of a 24 hour day: ddddd.tttttt.
       * This is called a serial date, or serial date-time.
       *
       * @source: https://stackoverflow.com/questions/17808750/reading-xls-date-in-php
       */
      if (is_float($this->date_from_excel)) {

        // date format 2015-25-12
        $this->SetDateFormat("Y-d-m");
        $this->date_from_excel = date($this->GetDateFormat() , (mktime(0, 0, -1, 1, $this->date_from_excel, 1900)));
      } 
      else {

        // date format 2015-12-25
        $this->SetDateFormat();

        // return converted date string in php format date format 2015-12-25
        $this->date_from_excel = date($this->GetDateFormat() , strtotime($this->date_from_excel));
      }
    }

    /**
     * Excel stores dates and times as a number representing the number of days since 1900-Jan-0,
     * plus a fractional portion of a 24 hour day: ddddd.tttttt .
     * This is called a serial date, or serial date-time.
     *
     * According to excel format 41397 is 2013-05-03
     * @source: https://stackoverflow.com/questions/17808750/reading-xls-date-in-php
     */
    else if (is_integer($this->date_from_excel)) {
      $this->SetDateFormat();
      $this->date_from_excel = gmdate($this->GetDateFormat() , (($this->date_from_excel - MIN_DATES_DIFF) * SEC_IN_DAY));
    }

    // return real value
    else {
      $this->date_from_excel = $this->date_from_excel;
    }

    // return date
    return $this->date_from_excel;
  }
}

/* ----------------- */
/* Excel_Reader.php */
/* ----------------- */

/* Show errors */
error_reporting(1);

/* display error */
ini_set('display_errors', 1);

/**
* Using class SimpleXLSX 
* 
* Big Thanks!!!! to Sergey Shuchkin, Who made Excel Reader Class
* 
* This class can be used to parse and retrieve data from Excel XLS spreadsheet files.
* It can parse a given Excel XLS file by extracting its contents files and parsing the 
* contained XML spreadsheet file.
*
* The class provides functions to retrieve data for the spreadsheet worksheets, rows and cells.
*
* @link: http://www.phpclasses.org/package/6279-PHP-Parse-and-retrieve-data-from-Excel-XLS-files.html
* @author: Sergey Shuchkin
* @download: http://www.phpclasses.org/browse/download/zip/package/6279/name/simple-xlsx-2013-10-13.zip
*/
require_once 'SimpleXLSX.php';

/* Adding my class Excel_Date_Parser */
require_once 'Excel_Date_Parser.php';

/**
 * [toPhpDate description]
 * @param [type] $array [description]
 */
function toPhpDate($array) {

  // create class object
  $ed = new Excel_Date_Parser();

  // parse array and set
  $array['Consumer_Date'] = $ed->SetDateString($array['Consumer_Date'])->GetDateString();
  $array['Delivery_Date'] = $ed->SetDateString($array['Delivery_Date'])->GetDateString();
  $array['Date_of_Dispatch'] = $ed->SetDateString($array['Date_of_Dispatch'])->GetDateString();
  $array['Gift_Date_Created'] = $ed->SetDateString($array['Gift_Date_Created'])->GetDateString();
  $array['Active_Date'] = $ed->SetDateString($array['Active_Date'])->GetDateString();
  $array['Approved_Date'] = $ed->SetDateString($array['Approved_Date'])->GetDateString();

  // return php array
  return $array;
}

// make xls object
$xlsx = new SimpleXLSX('Sony_RedemptionFormat 8-Dec-15.xlsx');

// get excel data as array
$Excel_Array_Data = $xlsx->rows();

// Get Column Name
$Excel_Column = $Excel_Array_Data[0];

// Remove Column Name From Array
unset($Excel_Array_Data[0]);

// Rest Data is Excel Data without Column
$Excel_Data = $Excel_Array_Data;

// Combine array for inserting in database
foreach ($Excel_Array_Data as $key => $Excel_Data) {
  $insert_data[] = array_combine($Excel_Column, $Excel_Data);
}

// show array data
echo "<pre>", print_r($insert_data, true);

// update array excel date
$insert_data = array_map('toPhpDate', $insert_data);

// show array data after update date
echo "<pre>", print_r($insert_data, true); 
```

希望这段代码对某人有所帮助。我正在努力解决同样的问题所以我制作了这个小脚本来节省其他人的时间。

> PHPING 快乐！！！！:)

# .net - JustDecompile / dotPeek 向我展示程序集的源代码。我该如何修改它？

> ID：11172648
> 
> 赞同：7
> 
> 时间：2012-06-23T20:14:07.970
> 
> 标签：.net, decompiling

我可以使用反编译器看到原始源代码，但是如何修改源代码并在之后重新编译 .DLL？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-23T20:20:57.920

首先，你看不到原始源代码；你会看到逆向工程的源代码。

如果您对以编程方式修改程序集感兴趣，请查看以下项目： * CodePlex 上的[**通用编译器基础结构 (CCI) 元数据**](http://ccimetadata.codeplex.com/)和[CCI AST](http://cciast.codeplex.com/)项目。这正是他们的目的。

> “ *[CCI] 允许应用程序有效地分析或修改 .NET 程序集、模块和调试 (PDB) 文件。”* ——来自项目的网站

IIRC，CCI 元数据在相当低的抽象级别上工作。如果要使用它修改或插入代码，则必须处理中间语言 (IL)。CCI AST 提供更高级别的抽象（抽象语法树）。

（顺便说一句。我想 CCI 不会允许你篡改强命名（签名）程序集，因为这会破坏他们的目的。）

*   [**单声道塞西尔**](http://www.mono-project.com/Cecil)。它是为 Mono 开发的，但也适用于 .NET：

    > *“用简单的英语，使用 Cecil，您可以加载现有的托管程序集，浏览所有包含的类型，即时修改它们并将修改后的程序集保存回磁盘。”* ——来自项目的网站

顺便说一句，Stack Overflow 上有一个问题，要求对[两者进行比较](https://stackoverflow.com/questions/6727715/cci-vs-mono-cecil-advantages-and-disadvantages)。

## **其他相关库/框架：**

*   [**罗斯林**](http://msdn.microsoft.com/en-US/roslyn)。该项目的重点是将源代码表示为抽象语法/解析树，并允许您进行例如源代码分析和操作。它还应该能够为您编译源代码。但是，Roslyn*并不*擅长装配操作。（总而言之，您可以将 Roslyn 视为 System.CodeDom 和 System.Linq.Expressions 的混合体，但比其中任何一个都强大得多。）

*   [Kevin Montrose](https://stackoverflow.com/users/80572/kevin-montrose)编写了一个名为**[Sigil](https://github.com/kevin-montrose/sigil)**的 IL 发射库，它是“DynamicMethod 和 ILGenerator 的快速失败、验证助手”。

*   您可以使用`ildasm`(IL disassembler) 和`ilasm`(IL assembler) 来做一些称为“往返”的事情（例如阅读[Mike Stall 的博客](https://blogs.msdn.microsoft.com/jmstall/2006/01/13/debugabbility-with-roundtripping-assemblies/)）：

    > 往返是您反编译应用程序（可能通过 ILDasm），可能编辑 IL，然后重新编译它（可能通过 ILAsm）的地方。这是重写程序集的主干[...]。

*   最后一个选项是.NET 基类库 (BCL) 中的[**System.Reflection**](http://msdn.microsoft.com/de-de/library/system.reflection.aspx)和[**System.Reflection.Emit功能。**](http://msdn.microsoft.com/de-de/library/system.reflection.emit)前者允许您检查程序集。后者提供了生成新程序集并将其保存到磁盘的功能。与 CCI 一样，您必须处理原始 IL。另外，我认为它们不允许您轻松修改现有程序集。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T08:52:11.013

[JustDecompile](http://www.telerik.com/products/decompiler/extensions.aspx)的插件允许您编辑程序集。转到**程序集编辑器插件**部分。

# python - 当您使用 cronjob 运行 Python 脚本时，是 __name__ '__main__' 吗？

> ID：11172655
> 
> 赞同：-2
> 
> 时间：2012-06-23T20:15:10.530
> 
> 标签：python, linux, cron

`__name__ == '__main__'`当您使用 cronjob 运行 Python 脚本时？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T20:19:58.327

如果它是 python 进程的入口点，那么是的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T20:19:32.347

是的，只要你不导入它，它就是`'__main__'`.

# user-interface - 如何提高 UI 开发技能（对于 Java 开发人员）？

> ID：11172664
> 
> 赞同：3
> 
> 时间：2012-06-23T20:17:18.697
> 
> 标签：user-interface

我主要使用 Java 进行后端开发。在过去的 6 个月里，我一直致力于 UI 方面的工作，我想提高我的技能。我知道 HTML、CSS 和 JavaScript（还有 jQuery 和 YUI），但我从未能够掌握它们，因此我可以比现在更快地开发出高效且可维护的解决方案。其他 UI 开发人员可以给我任何提示/资源吗？我还想了解 UI 开发的模式和最佳实践。

# eclipse - Tomcat 从 Eclipse 和 startup.sh 启动

> ID：11172665
> 
> 赞同：0
> 
> 时间：2012-06-23T20:17:54.003
> 
> 标签：eclipse, tomcat, ubuntu

奇怪的事情发生了。我可以从 Eclipse 和 startup.sh 启动 Tomcat。从 Eclipse 运行我可以在从 startup.sh 运行时访问 localhost:8080 我不能。可能是什么问题呢？Ubuntu 11.10。从 Eclipse netstat 将 127.0.0.1:8080 显示为 ESTABLISHED，从 startup.sh 显示为 CLOSE_WAIT。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T21:52:52.467

该问题是由不正确的安装引起的。一切都解决了。关闭。

# java - 如何为 HashMap 创建删除方法

> ID：11172670
> 
> 赞同：0
> 
> 时间：2012-06-23T20:18:27.547
> 
> 标签：java, hashmap

我目前正在写一个员工商店，我需要能够删除商店的内容。

我该怎么做？

我已经有一个使用密钥删除它的删除方法。但是当我在互联网上找到这段代码时，我不知道如何使用它。

这是我的代码：

**主应用**

```
public class MainApp
{

    public static void main(String[] args)
    {
        new MainApp().start();

    }
    public void start()
    {
        EmployeeStore Store = new EmployeeStore();
        Store.add(new Employee ("James O' Carroll", 18,"hotmail.com"));

        Store.add(new Employee ("Andy Carroll", 1171,"yahoo.com"));

        Store.add(new Employee ("Luis Suarez", 7,"gmail.com"));
        Store.print();
        Store.clear();
        Store.print();

        Store.add(new Employee ("James O' Carroll", 18,"hotmail.com"));

        Store.add(new Employee ("Andy Carroll", 1171,"yahoo.com"));

        Store.add(new Employee ("Luis Suarez", 7,"gmail.com"));

        Store.print();
        Store.remove();

    }

} 
```

**员工商店**

```
//Imports.
import java.util.HashMap;
//********************************************************************
import java.util.Map;

public class EmployeeStore 
{
    HashMap<String, Employee> map;

//Constructor.  
    public EmployeeStore()
    {
        map = new HashMap<String,Employee>();
    }
//********************************************************************
//Hashmap Methods.
//Add to the Hashmap : Employee.
    public void add(Employee obj)
    {

        map.put(obj.getEmployeeName(), obj);
    }
//********************************************************************
//Remove from the Hashmap : Employee.
    public void remove(String key)
    {
      //Remove the Employee by name.
        map.remove(key);
    }
//********************************************************************
//Clear the Hashmap : Employee.
    public void clear()
    {
        map.clear();
    }
    //********************************************************************
//Print the Hashmap : Employee. 
    public void print()
    {
        System.out.println("\n********Employee's in the Company.********");
        for (Employee employee : map.values())
        {
            System.out.println("Employee Name:\t" + employee.getEmployeeName());
            System.out.println("Employee Id:\t" + employee.getEmployeeId());
            System.out.println("E-mail:\t"+ employee.getEmployeeEmail());
        }

    }

//********************************************************************  
//********************************************************************

} 
```

**员工**

```
//Imports:

//********************************************************************
//Employee Class.
public class Employee
{
//Variables.
    private String employeeName;
    private int employeeId;
    private String employeeEmail;
//********************************************************************  
//Constructor.
    public Employee(String employeeName, int employeeId, String employeeEmail) 
    {
        this.employeeName = employeeName;
        this.employeeId = employeeId;
        this.employeeEmail = employeeEmail;
    }
//********************************************************************
//Getters.
    public String getEmployeeEmail() {
        return employeeEmail;
    }
    public void setEmployeeEmail(String employeeEmail) {
        this.employeeEmail = employeeEmail;
    }
    public String getEmployeeName() {
        return employeeName;
    }
    public int getEmployeeId() {
        return employeeId;
    }
//********************************************************************
//toString method.
    public String toString() {
        return "Employee [employeeName=" + employeeName + ", employeeId="
                + employeeId + ", employeeEmail=" + employeeEmail + "]";
    }
//********************************************************************

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T20:25:42.253

您`EmployeeStore`使用 a`HashMap`来存储员工。每个员工在地图中都由其名称标识。要删除员工，您只需调用`EmployeeStore.remove(String employeeName)`。

```
EmployeeStore employeeStore = new EmployeeStore();
employeeStore.add(new Employee ("James O' Carroll", 18,"hotmail.com"));
employeeStore.add(new Employee ("Andy Carroll", 1171,"yahoo.com"));
employeeStore.add(new Employee ("Luis Suarez", 7,"gmail.com"));

// Remove a certain employee
employeeStore.remove("Andy Carroll");

// Remove all employees
employeeStore.clear(); 
```

您应该注意两点：

1 - 当前的实现不允许两个或多个员工有相同的名字，因为这些名字被用作映射中的键。

2 - 当您调用该`remove`方法时，您必须提供确切的名称，因为`String`Java 中的相等是区分大小写的。

您可能还想看看[`Map`](http://docs.oracle.com/javase/tutorial/collections/interfaces/map.html).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T20:26:35.207

A. 为什么不使用 HashMap 的 remove 方法来解决这个问题？
B. 此外，也许您希望通过某些标准执行删除 - 为此您必须在地图上进行迭代，找到相关条目，获取其键，并按照 A 部分所述调用删除

# php - php 评分系统评分全部而不是一篇文章

> ID：11172675
> 
> 赞同：0
> 
> 时间：2012-06-23T20:18:58.123
> 
> 标签：php, mysql, vote

这是我的一些代码：

```
if(isset($_GET['nyaste'])) {
$query = mysql_query("SELECT * FROM jokes ORDER BY id DESC LIMIT 0, 12") or die(mysql_error());
while ( $result = mysql_fetch_assoc($query) ) { 
$id = $result["id"];  
if(isset($_POST['voteup'])) {
mysql_query("UPDATE jokes SET ranking = ranking + 1 WHERE id = $id ") or die(mysql_error());  
}  
if(isset($_POST['votedown'])) {
mysql_query("UPDATE jokes SET ranking = ranking - 1 WHERE id = $id ") or die(mysql_error());  
} 
```

现在，我的问题是，当我赞成/反对某件事时，它会在所有帖子上添加/删除 1 个评分，而不仅仅是您要评分的那个。您如何使选票独一无二或其他什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T20:27:28.857

这条线

```
$query = mysql_query("SELECT * FROM jokes ORDER BY id DESC LIMIT 0, 12")  ... 
```

从桌子上拿了一些笑话。然后脚本更改所有通过

```
while ( $result = mysql_fetch_assoc($query) ) 
```

这意味着如果您的 _POST 中有“voteup”或“votedown”，则循环将修改所有获取的笑话。

要解决此问题，您必须知道投票的笑话的 ID。您可以使用一些请求变量来指示它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T21:08:36.320

不要在查询的 while() 语句中包含 _POST 检查。

例如：

```
if(isset($_GET['nyaste'])) {

$add_to_vote = 0;

if(isset($_POST['voteup'])) {

$add_to_vote++;

}

else if(isset($_POST['votedown'])) {

$add_to_vote--;

}

$query = mysql_query("SELECT * FROM jokes ORDER BY id DESC LIMIT 0, 12") or die(mysql_error());
while ( $result = mysql_fetch_assoc($query) ) { 

$id = $result["id"];  

if($add_to_vote != 0){

// update the current ID
$query = mysql_query("UPDATE jokes SET ranking = ranking + $add_to_vote WHERE id = '$id'") or die(mysql_error());

}

} 
```

但是您一次只能更新一个排名。您的脚本正在抓取 0-12 个笑话并根据一个 _POST 变量（投票或投票）更新它们。

# php - Magento - 如何使用 customer_save_after 事件更新送货地址？

> ID：11172683
> 
> 赞同：0
> 
> 时间：2012-06-23T20:19:54.300
> 
> 标签：php, magento

当客户尝试创建新帐户或编辑他的帐户时，我正在尝试使用`customer_save_after`事件（基于一些自定义注册字段）为客户创建或更新默认送货地址。

下面是 Observer 模型代码的一部分：

```
...
$customer   = $observer->getEvent()->getCustomer();
if ($customer->getId() && $otherConditionIsValid){
    $dataShipping = array(
        'firstname' => $someFixedFirstName,
        'lastname'  => $someFixedLastName,
        'street'    => array($someFixedStreetLine),
        'city'      => $someFixedCity,
        'region'    => $someFixedState,
        'region_id' => '',
        'postcode'  => $someFixedZipcode,
        'country_id' => $someFixedCountry,
        'telephone' => $someFixedTelephone,
    );
    $customerAddress = Mage::getModel('customer/address');
    if($defaultShippingId = $customer->getDefaultShipping()){ //if customer already has default shipping address
        $customerAddress->load($defaultShippingId);
    }
    $customerAddress->setData($dataShipping)
                    ->setCustomerId($customer->getId())
                    ->setIsDefaultShipping('1')
                    ->setSaveInAddressBook('1');
    $customer->addAddress($customerAddress); #setting Shipping Address to be added/updated
    //When i try to use below commented code, script gets called for infinite times, finally running out of memory
    /*try{
        $customerAddress->save();
    }catch(Exception $e){
        Mage::log('Address Save Error::' . $e->getMessage());
    }*/
}
... 
```

当客户创建新帐户时，上面的代码可以正常工作。但是，当客户尝试从以下位置编辑自定义注册字段时，默认送货地址不会更新`My Account > Account Information`

所以我主要关心的是如何使用`$customer`对象或任何其他使用`customer_save_after`事件的代码来更新送货地址。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T23:33:15.500

如果我理解正确，您希望在`customer_save_after`事件被触发时执行以下操作：

1.  如果客户没有默认送货地址，则使用 $dataShipping 数组中的值创建一个。

2.  如果客户确实有默认送货地址，则使用 $dataShipping 数组中的值更新它的值。

如果这确实是您正在寻找的，那么请尝试下面的代码（显然您需要注意 $otherConditionIsValid 和 $dataShipping 变量的值）：

```
$customer = $observer->getEvent()->getCustomer();
if (! $customer->getId() || ! $otherConditionIsValid){
    return $this;                
}

$dataShipping = array(
    'firstname'  => $someFixedFirstName,
    'lastname'   => $someFixedLastName,
    'street'     => array($someFixedStreetLine),
    'city'       => $someFixedCity,
    'region'     => $someFixedState,
    'region_id'  => '',
    'postcode'   => $someFixedZipcode,
    'country_id' => $someFixedCountry,
    'telephone'  => $someFixedTelephone,
);

$customerAddress = Mage::getModel('customer/address');

if ($defaultShippingId = $customer->getDefaultShipping()){
     $customerAddress->load($defaultShippingId); 
} else {   
     $customerAddress
        ->setCustomerId($customer->getId())
        ->setIsDefaultShipping('1')
        ->setSaveInAddressBook('1')
     ;   

     $customer->addAddress($customerAddress);
}            

try {
    $customerAddress
        ->addData($dataShipping)
        ->save()
    ;           
} catch(Exception $e){
    Mage::log('Address Save Error::' . $e->getMessage());
}

return $this; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-02T13:32:49.853

```
$address = Mage::getModel("customer/address");              
   $address->setCustomerId($this->customerID());
   $address->setFirstname(Mage::app()->getRequest()->getPost("event_firstname"));
   $address->setLastname(Mage::app()->getRequest()->getPost("event_lastname"));
   $address->setCountryId('AE');
   $address->setCity(Mage::app()->getRequest()->getPost("event_city"));
   $address->setStreet(Mage::app()->getRequest()->getPost("event_address"));
   $address->setTelephone(Mage::app()->getRequest()->getPost("event_mobile"));
   $address->save(); 
```

# javascript - 使用 $ 为 jquery 自动完成结果映射 json

> ID：11172690
> 
> 赞同：0
> 
> 时间：2012-06-23T20:21:04.857
> 
> 标签：javascript, jquery, json

我试图让一些自动完成工作。我有这个 URL 我应该从以下位置读取我的 JSON：

```
http://openscan.addi.dk/2.0/?action=openScan&field=phrase.title&lower=hest&limit=10&outputType=json 
```

当我收到结果时，我尝试将其映射到我的 jquery 自动完成中，我使用以下 jquery：

```
<script type="text/javascript">
        $(function () {
            function log(message) {
                $("<div/>").text(message).prependTo("#log");
                $("#log").scrollTop(0);
            }

            $("#search").autocomplete({
                source: function (request, response) {
                    $.ajax({
                        url: "http://openscan.addi.dk/2.0/?action=openScan&field=phrase.title&lower=hest&limit=10&outputType=json",
                        dataType: "jsonp",

                        success: function (data) {
                            response($.map(data.scanResponse.term, function (item) {
                                return {
                                    label: item.name+' ( '+item.hitCount+')',
                                    value: item.name
                                }
                            }));
                        }
                    });
                },
                minLength: 2,
                select: function (event, ui) {
                    log(ui.item ?
                    "Selected: " + ui.item.label :
                    "Nothing selected, input was " + this.value);
                },
                open: function () {
                    $(this).removeClass("ui-corner-all").addClass("ui-corner-top");
                },
                close: function () {
                    $(this).removeClass("ui-corner-top").addClass("ui-corner-all");
                }
            });
        });
    </script>
    <h2>
        Demo of autocomplete using OpenScan
    </h2>
    Start typing below.<br />
    <input id="search" /> 
```

我的问题是结果它不像我以前见过的有限数量的 JSON，它包含 $ 和 @ 属性，我如何索引它们？

**编辑** 将 data.scanResponse 更改为 data.scanResponse.term

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T20:30:14.127

不确定要显示的确切值是什么，但您可以使用数组语法访问属性，如下所示：

```
label: item.name["@"]+' ( '+item.hitCount["$"]+')' 
```

# python - 为什么我的快速排序实现的边界是错误的？

> ID：11172694
> 
> 赞同：0
> 
> 时间：2012-06-23T20:21:35.643
> 
> 标签：python, algorithm

我正在尝试在 python 中实现快速排序：

```
def partition(ls):
  if len(ls) == 0:
    return 0
  pivot = ls[0]
  i = 0
  j = 1
  while j < len(ls):
    if ls[j] <= pivot:
      i += 1
      temp = ls[i]
      ls[i] = ls[j]
      ls[j] = temp
    j += 1
  ls[0] = ls[i]
  ls[i] = pivot
  return i

assert(partition([1,2]) == 0)
assert(partition([3,2]) == 1)
assert(partition([3,2,1,4,5]) == 2)
assert(partition([]) == 0)
assert(partition([45]) == 0)

def sort(ls):
  if len(ls) == 0:
    return
  pivotIndex = partition(ls)
  sort(ls[0:pivotIndex])
  sort(ls[(pivotIndex + 1):len(ls)])

ls = [54,1,3,2,4,3,5,4]
sort(ls)
print ls 
```

根据我的断言，我知道我的分区算法工作正常。

但是，我的排序函数返回错误的结果。这段代码打印

```
[4, 1, 3, 2, 4, 3, 5, 54] 
```

递归调用排序的边界应该是什么？我的目标是将子列表分区到枢轴左侧，将子列表分区到枢轴右侧，两者都不包括枢轴本身。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T23:54:27.417

Python 中一些已知良好的排序，带有可选的 Cython，包括 Quicksort。顺便说一句，查看性能比较；您可能会发现 Quicksort 不如内置的 Timsort 有吸引力： [http ://stromberg.dnsalias.org/~strombrg/sort-comparison/](http://stromberg.dnsalias.org/~strombrg/sort-comparison/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T22:27:47.690

```
sort(ls[0:pivotIndex])
sort(ls[(pivotIndex + 1):len(ls)]) 
```

切片复制列表的一部分，因此在递归调用中，您不会修改原始列表。因此只有第一个`partition`修改列表。

# android - Android：如何在不显示预览的情况下捕获图像

> ID：11172705
> 
> 赞同：4
> 
> 时间：2012-06-23T20:24:41.470
> 
> 标签：android, camera, android-camera, android-camera-intent, image-capture

我正在使用以下代码在 Android 中捕获图像

`Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE); startActivityForResult(cameraIntent, 100);`

捕获图像后，它会显示预览并询问是否保存或丢弃图像。

无论如何我可以避免这个预览吗？

Android 中的相机应用程序显示预览。所以我猜应该有一种方法。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T05:23:29.943

即使相机应用程序本身不显示确认屏幕，相机应用程序也不会为其他应用程序提供禁用确认屏幕的选项。

因此，不显示确认画面是不可能的。

但是，我们可以通过使用 android 中的 Camera 库编写自定义应用程序来实现这一点。（见[这个](http://developer.android.com/guide/topics/media/camera.html#custom-camera)和[这个](https://stackoverflow.com/questions/9744790/android-possible-to-camera-capture-without-a-preview)）

# ruby-on-rails - has_secure_password 和电子邮件验证

> ID：11172706
> 
> 赞同：2
> 
> 时间：2012-06-23T20:25:12.780
> 
> 标签：ruby-on-rails, ruby, verification

`has_secure_password`在 Rails 中，通过检查然后记录数据库中的字段来注册用户`:password`非常`:password_confirmation`有效`:password_digest`。但是，如果我希望能够验证电子邮件地址（通过发送电子邮件确认），我将如何使用 rails 来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T20:36:06.147

通常要验证电子邮件地址，您向相关电子邮件地址发送电子邮件（带有链接），用户单击链接/验证它。该链接通常包含一个用于唯一标识该电子邮件地址的令牌。因此，您可以在模型中添加**verify_token**字段，也可以添加**verify_email_sent_at**和**verify_at**字段，以跟踪和使用控制器操作

```
   def verify_email
     @user = User.find_by_verification_token(params[:verification_token])
     如果@用户
        @user.verification_token = nil
        @user.verification_email_sent_at = nil
        @user.verified_at = Time.now
        @user.save
        # 以上行可以是@user.verify 等方法的一部分！
        重定向到“/”
     别的
        ...
     结尾
   结尾

```

**另外，我强烈建议不要构建您的身份验证解决方案，而是看看**

[https://github.com/plataformatec/devise](https://github.com/plataformatec/devise)

它的使用非常简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-14T19:46:22.953

要添加到[Rishav Rastogi](https://stackoverflow.com/users/66945/rishav-rastogi "里沙夫·拉斯托吉")的响应中，请确保添加适当的检查以确保验证参数既已清理且不为空（否则，传入空验证令牌的人可以访问其`verification_token`列的用户的帐户一片空白。

您还应该`verified_at`在安全检查中使用该列。

（由于缺乏声誉，我无法评论他的[回答）](https://stackoverflow.com/a/11172781/4241192 "回答")

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T20:30:54.027

这是一个很大的问题，我不确定它与`has_secure_password`. 要点是您将需要用户模型上的一个字段，例如`confirmed`，并制作一个发送确认电子邮件的邮件程序，该邮件具有指向控制器的链接，该控制器会将用户标记为已确认。

我建议您查看[`ActionMailer guide`](http://guides.rubyonrails.org/action_mailer_basics.html)开始。

# php - 使用 PHP 接收来自某人到 localhost 的电子邮件

> ID：11172710
> 
> 赞同：0
> 
> 时间：2012-06-23T20:26:18.760
> 
> 标签：php, apache, ubuntu, mail-server

我有一个关于接收电子邮件的问题。

使用 Ubuntu 作为服务器，我使用以下命令行设置了简单的邮件发送功能：

```
sudo tasksel mail-server 
```

这允许我使用命令行发送电子邮件：

```
echo 'body' | sendmail recipient@example.net 
```

或 PHP 中的以下内容：

```
mail($to, $subj, $msg) 
```

然后`recipient@example.net`收到邮件没问题。

邮件来自`oshirowanen@desktop`

如果`recipient@example.net`将电子邮件发送回`oshirowanen@desktop`，我如何`localhost`从命令提示符或 php 接收它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T21:14:39.590

oshirowanen@desktop 不是一个完整的电子邮件地址，互联网上的任何人都无法回复。为了接收到域的电子邮件，您通常需要注册一个域，然后您可以将其设置为将您的 ubuntu 服务器用作邮件交换器或 smtp 客户端（如果您愿意）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T20:42:23.520

好吧，localhost 是本地的，因此您需要为您的计算机提供一个固定 IP 和一个名称服务器，并将该域传播到您的计算机，以便它可以通过 Internet 接收电子邮件。

# python - Python和Pygame：在迭代期间更新循环下列表中的所有元素

> ID：11172711
> 
> 赞同：0
> 
> 时间：2012-06-23T20:26:31.703
> 
> 标签：python, list, dynamic, pygame, draw

我正在使用 Python 编写程序并使用 Pygame。这是基本代码的样子：

```
while 1:

   screen.blit(background, (0,0))
   for event in pygame.event.get():

      if event.type == QUIT:
        pygame.quit()
        sys.exit()

      if event.type == KEYDOWN and event.key == K_c:
        circle_create = True
        circle_list.append(Circle())

      if event.type == MOUSEBUTTONDOWN and circle_create == True:
        if clicks == 0:
            circle_list[i].center()
        clicks += 1

      if event.type == MOUSEMOTION and clicks == 1 and circle_create == True:
        circle_list[i].stretch()

   if circle_create == True:
     circle_list[i].draw_circle()

   if clicks == 2:
     clicks = 0
     i += 1
     circle_create = False    

 pygame.display.update() 
```

我想要做的是让对象的draw_circle（）函数通过循环不断更新，以便为列表中的所有对象显示绘制的圆圈，但是由于列表是迭代的，它会更新添加的新对象和对象已经附加的不更新。

该程序有效，它根据用户输入绘制圆圈，但更新问题是我需要解决的唯一问题。有没有办法让while循环更新对象列表中的所有元素？我已经尝试了很多天，但我无法找到一个好的解决方案。任何想法表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T20:51:32.400

要绘制列表中的所有圆圈，只需遍历它们并在每次调用更新之前绘制它们：

```
for circle in circle_list:
    circle.draw_circle() 
```

编辑：OP发布了格式不正确的代码，但说实际代码很好，所以删除了这个建议

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T21:09:56.260

您需要在 blit 之后重新绘制整个列表（它用表面“背景”覆盖整个屏幕并“擦除”它），它不是有条件的，您需要遍历整个列表并绘制它。他们在活动部分决定谁进入和谁离开列表。

```
Loop:
  Blit,starting new

  Event, here you decide who moves, who begin or cease to exist(append/remove)

  Redraw whole list, everyone in the circle_list. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T21:13:43.303

编辑：我以为你已经尝试过：[https ://stackoverflow.com/a/11172885/341744](https://stackoverflow.com/a/11172885/341744)

> 该程序有效，它根据用户输入绘制圆圈，但更新问题是我需要解决的唯一问题。有没有办法让while循环更新对象列表中的所有元素？

您可以在临时列表上进行迭代，例如，如果您在迭代时杀死演员。

```
for circle in circles[:]:
    circle.update() 
```

# mysql - 从链接表中获取元素

> ID：11172714
> 
> 赞同：0
> 
> 时间：2012-06-23T20:26:37.713
> 
> 标签：mysql

我有一个将元素分配给组的表。每个元素可以存在于多个组中，并且可以多次分配给同一组

看起来像：

```
element | group
      1 | 1
      1 | 2 
      1 | 3
      2 | 1
      2 | 3
      3 | 2 
```

我正在寻找一个简单的查询，它可以返回分配给第 1 组但不能返回第 2 组的元素。

根据上面提供的数据，这将是元素 2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T20:28:34.853

```
select distinct element 
from  your_table
where element not in (select element 
                      from your_table 
                      where `group` = 2)
and `group` = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T20:28:12.130

```
SELECT *
FROM `table` t1
LEFT OUTER JOIN `table` t2
   ON t1.element = t2.element
   AND t2.`group` = 2
WHERE t1.`group` = 1
   AND t2.`group` IS NULL 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T20:31:15.237

像那样：

```
select element from table 
where group = 1 and not exists 
(select element from table t 
 where t.element=table.element and t.group = 2) 
```

# java - em.createQuery 不断返回 null

> ID：11172717
> 
> 赞同：2
> 
> 时间：2012-06-23T20:27:24.827
> 
> 标签：java, jpa, entitymanager

我有这个应用程序，我使用 JSF 2.0 和 EclipseLink，我为 MySQL 创建的数据库创建了实体，使用 netbeans 7.1.2 创建了这些实体，它是自动创建的。

然后我使用会话 bean 来处理这些实体，问题是`em.createQuery`总是返回 null，尽管我在实体中检查了 NamedQueries 并且它们完全匹配

来自名为查询的实体的样本：-

```
@NamedQueries({
    @NamedQuery(name = "Users.findAll", query = "SELECT u FROM Users u"),
    @NamedQuery(name = "Users.findByUserId", query = "SELECT u FROM Users u WHERE u.userId = :userId"),
    @NamedQuery(name = "Users.findByUsername", query = "SELECT u FROM Users u WHERE u.username = :username"),
    @NamedQuery(name = "Users.findByEmail", query = "SELECT u FROM Users u WHERE u.email = :email"), 
```

注意我如何在会话 bean 中使用这个 findByEmail 查询：-

```
public Users findByEmail(String email){
        em.getTransaction().begin();
        String find = "Users.findByEmail";
        Query query = em.createNamedQuery(find);
        query.setParameter("email", email);
        Users user = (Users) query.getSingleResult(); 
```

但它总是从这个 em.createNamedQuery 返回 null，我首先尝试使用 .createQuery，但它也不好。

异常的堆栈跟踪

```
Caused by: java.lang.NullPointerException
    at com.readme.entities.sessionBeans.UsersFacade.findByEmail(UsersFacade.java:48)
    at com.readme.user.signup.SignupBean.checkAvailability(SignupBean.java:137)
    at com.readme.user.signup.SignupBean.save(SignupBean.java:146)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601) 
```

这里的问题似乎是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T21:07:39.187

如果`em.createNamedQuery(find)`确实是在您的情况下引发 NullPointerException 的语句，那么正在发生一些相当奇怪的事情。

当您第一次`em`使用`em.getTransaction().begin()`. 如果是这种情况，那么一个很常见的原因是您的实体管理器没有被注入，因为注入只在托管类中起作用（有关详细信息，请参阅[此问题](https://stackoverflow.com/questions/10536483/entitymanagerfactory-not-being-injected-using-persistenceunit/10537076#10537076)）。如果您通过新操作创建了会话 bean，那么它是不受管理的。

其他常见原因是缺少 @Persistenceontext 注释。

# c - Windows 上的数据目录

> ID：11172726
> 
> 赞同：3
> 
> 时间：2012-06-23T20:28:13.487
> 
> 标签：c, installation

在编写游戏时，您总是会添加一些数据（图像、声音……）。在类 Unix 系统上，我通常将它们安装到**${PREFIX}** /share/ **project** /data ，其中**${PREFIX}**可能由 CMake 或 autotools 等构建系统控制。

在这种情况下，很容易使用构建系统自动生成的一些**#define**直接设置数据目录。

在 Windows 上，我完全不知道如何找到数据目录，因为应用程序安装程序总是询问在哪里安装项目，并且代码已经编译，无法通过一些**#define**来控制它。

对于这个问题，我有两个想法：

1.  使用 .bat 脚本启动二进制文件并将开关添加到数据目录。然后用户将只启动这个 .bat 文件。

2.  由应用程序安装程序生成一个包含数据目录路径的新文件，并将其安装在 Common App Data 文件夹中的某个位置。

你建议我怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T06:44:37.583

如果您专门针对 win32，那么您应该使用[Resource Compiler](http://msdn.microsoft.com/en-us/library/windows/desktop/aa381042%28v=vs.85%29.aspx)。它允许您在可执行文件本身中包含任意文件，并自动生成引用它们的宏，您可以使用 win32 API 加载它们。用户定义的[资源](http://msdn.microsoft.com/en-us/library/windows/desktop/aa381054%28v=vs.85%29.aspx)允许您在构建中存储任意 blob。

缺点是它根本不便携，你需要有一些适度的 Microsoft fu 才能让它工作。

# javascript - 动态导航链接

> ID：11172728
> 
> 赞同：0
> 
> 时间：2012-06-23T20:28:40.647
> 
> 标签：javascript, jquery, css, navigation, hyperlink

我正在做一个项目，我有一个带有 6 个链接的水平导航栏，其中 3 个是同一水平栏中子导航的一部分。链接用图标表示。我正在寻找在单击主导航图标之一时动态更改子导航的最简单方法。

```
[ Home - Search ]{ home1 - home2 - home3 }[ Add ] 
```

选择搜索时，它变为：

```
[ Home - Search ]{ search1 - search2 - search3 }[ Add ] 
```

这是当前栏的 HTML。替换图标的链接尚未生成，因为它目前破坏了结构。

```
<nav id="navBar">
    <ul>
        <div id="mainNav">
            <li><a id="activeLink" class="homeLink" href="#">Home<a/></li>
            <li><a class="searchLink" href=#>Search<a/></li>
        </div>
        <div id="subNav">
            <li><a class="feedLink" href=#>Feed<a/></li>            
            <li><a class="messagesLink" href=#>Messages<a/></li>
            <li><a class="connectionsLink" href=#>Connections<a/></li>
        </div>
        <div id="mainNav">
            <li><a class="addLink" href=#>Add<a/></li>
        </div>
    </ul>
</nav>
<nav id="searchBar"></nav> 
```

对此的任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T20:56:40.847

我不知道你需要变得非常聪明。只需将它们放在一起并切换一个`.hidden`类：

**CSS**

```
.hidden {
    display: none;
} 
```

**HTML**

```
<nav id="navBar">
    <ul>
        <li id="mainNav">
            <ul>
                <li><a id="activeLink" class="homeLink" href="#">Home</a></li>
                <li><a class="searchLink" href="#">Search</a></li>
            </ul>
        </li>
        <li id="subNav">
            <ul>
                <li><a class="feedLink" href="#">Feed</a></li>            
                <li><a class="messagesLink" href="#">Messages</a></li>
                <li><a class="connectionsLink" href="#">Connections</a></li>
            </ul>
        </li>
        <li id="searchNav" class="hidden">
            <ul>
                <li><a href="#">Search 1</a></li>            
                <li><a href="#">Search 2</a></li>
                <li><a href="#">Search 3</a></li>
            </ul>
        </li>
        <li id="mainNav">
            <ul>
                <li><a class="addLink" href="#">Add</a></li>
            </ul>
        </li>
    </ul>
</nav> 
```

**jQuery**

```
$(document).ready(function(){
    var $subnavs = $('#subNav, #searchNav'),
        $search = $('#mainNav .searchLink');

    $search.click(function(){
        $subnavs.toggleClass('hidden');

        return false;
    });
}); 
```

[http://jsfiddle.net/userdude/eJm2z/1](http://jsfiddle.net/userdude/eJm2z/1)

请注意，丑陋的菜单样式仅用于演示...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T20:36:33.897

此代码根据传入的标题使用新类和新文本修改每个链接`responder`：

```
var responder = function(components) {
    return function() {
        $.each($("#subNav a"), function(index, element) {
            $(element).text(components[index]);
            $(element).attr("class", components[index]+"Link");
        });
    }
};
$(".homeLink").click(responder(["home1", "home2", "home3"]))
$(".searchLink").click(responder(["search1", "search2", "search3"])) 
```

添加更多选项就像附加`responder([titles...])`到`click`事件一样容易；

# bash - 覆盖下载 url 命令的标志

> ID：11172732
> 
> 赞同：1
> 
> 时间：2012-06-23T20:29:03.807
> 
> 标签：bash, shell, command-line-arguments, flags, getopts

我对 shell 脚本很陌生，我必须在`getopts`我的脚本中添加一个标志 ()，如果脚本由于任何原因无法到达 url，我可以在其中覆盖下载 url 命令。例如，如果我添加我的标志，那么它不会终止我的脚本，如果无法访问 url，我可以选择继续。

目前，我有

```
if "$?" -ne "0" then
echo "can't reach the url, n\ aborting"
exit 
```

现在我需要添加一个`getopts`可以选择忽略`"$?' - ne "0"`命令的标志，

我不知道 getopts 是如何工作的，我对它很陌生。有人可以帮我解决一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T20:44:38.930

如果您只有一种选择，有时只需检查一下会更简单`$1`：

```
# put download command here
if (( $? != 0 )) && [[ $1 != -c ]]; then
    echo -e "can't reach the url, \n aborting"
    exit
fi
# put stuff to do if continuing here 
```

如果您要接受其他选项，有些可能带有参数，则`getopts`应该使用：

```
#!/bin/bash
usage () { echo "Here is how to use this program"; }

cont=false

# g and m require arguments, c and h do not, the initial colon is for silent error handling
options=':cg:hm:' # additional option characters go here
while getopts $options option
do
    case $option in
        c  ) cont=true;;
        g  ) echo "The argument for -g is $OPTARG"; g_option=$OPTARG;; #placeholder example
        h  ) usage; exit;;
        m  ) echo "The argument for -m is $OPTARG"; m_option=$OPTARG;; #placeholder example
        # more option processing can go here
        \? ) echo "Unknown option: -$OPTARG"
        :  ) echo "Missing option argument for -$OPTARG";;
        *  ) echo "Unimplimented option: -$OPTARG";;
    esac
done

shift $(($OPTIND - 1))

# put download command here
if (( $? != 0 )) && ! $cont; then
    echo -e "can't reach the url, \n aborting"
    exit
fi
# put stuff to do if continuing here 
```

# java - ffmpeg 什么时候终止？

> ID：11172733
> 
> 赞同：4
> 
> 时间：2012-06-23T20:29:09.477
> 
> 标签：java, video, encoding, ffmpeg, xuggle

我正在运行`ffmpeg.exe`Java 代码来编码视频文件。我的程序如何知道 ffmpeg 何时终止（即视频文件已编码）？

这是代码：

```
Runtime.getRuntime().exec("ffmpeg -ac 2 -i audio.wav -i video.flv -sameq out.flv"); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T21:12:49.363

您可以使用以下`waitFor()`方法[`java.lang.Process`](http://docs.oracle.com/javase/6/docs/api/java/lang/Process.html#waitFor%28%29)：

```
Process p = Runtime.getRuntime().exec("ffmpeg...");
int exitValue = p.waitFor() 
```

有了这个，当前线程等待直到`Process p`终止。

编辑：

您可以尝试查看 ffmpeg 的输出：

```
class StreamDump implements Runnable {

    private InputStream stream;

    StreamDump(InputStream input) {
        this.stream = input;
    }

    public void run() {
        try {
            int c;
            while ((c = stream.read()) != -1) {
                System.out.write(c);
            }
        } catch (Throwable t) {
            t.printStackTrace();
        }
    }
} 
```

和

```
Process p = Runtime.getRuntime().exec("ffmpeg.exe...");
new Thread(new StreamDump(p.getErrorStream()), "error stream").start();
new Thread(new StreamDump(p.getInputStream()), "output stream").start();
try {
    p.waitFor();
} catch (InterruptedException e) {
    e.printStackTrace();
}
System.out.println("Exit value: " + p.exitValue()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T22:29:11.467

我找到了一个解决方法，如果文件 out.flv 在编码时尝试重命名它是不允许的，它只能在编码结束后重命名：

```
Runtime.getRuntime().exec("ffmpeg -ac 2 -i audio.wav -i video.flv -sameq out.flv");

File tempFile=new File("out.flv");
File renamedFile=new File("renamed.flv");
while(!tempFile.renameTo(renamedFile)); //try re-naming the file which is being encoded by ffmpeg

System.out.println("Encoding done"); 
```

# objective-c - 将目标 c 对象和原始类型传递到 void *

> ID：11172737
> 
> 赞同：3
> 
> 时间：2012-06-23T20:29:49.283
> 
> 标签：objective-c, ios

我想传递 2 个变量：

```
UIImage * img
int i 
```

进入另一种只需要 (void *) 的方法

我尝试制作一个包含 img 和 i 的 C 结构

```
struct MyStruct {
    UIImage *img;
    int i;
} 
```

但是 xcode 给了我一个错误，说“ARC 禁止在结构或联合中使用 Objective-C 对象”

接下来我尝试编写一个包含 img 和 i 的 Objective-c 类 MyStruct2，分配初始化它的一个实例并将其类型转换为 (__bridge void*)，然后将其传递给方法。我的用例似乎很少涉及。似乎应该有更好的方法。

实现这一目标的最简单方法是什么？

谢谢你。

根据评论进行编辑：我必须使用 void *，因为它是 UIView API 的要求。我创建了 UIVIew API 提到的选择器

```
+ (void)setAnimationDidStopSelector:(SEL)selector 
```

请参阅[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIView_Class/UIView/UIView.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIView_Class/UIView/UIView.html)上的 setAnimationDidStopSelector 文档。它说...选择器应采用以下形式：

```
 - (void)animationDidStop:(NSString *)animationID finished:(NSNumber *)finished context:(void *)context 
```

我想将 img 和 i 都传递给 (void *)context 参数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T20:35:43.883

你可以这样做：

```
struct MyStruct {
    __unsafe_unretained UIImage *img;
    int i;
} 
```

但是，如果您这样做，您必须记住该`img`字段不会自动保留和释放其`UIImage`.

如果您发布有关“仅需要 (void *) 的方法”的更多详细信息，我们也许可以为您提供更好的建议。

## 编辑

您已经更新了您的问题，说您需要将 a 传递`void *`给`animationDidStop:finished:context:`选择器。由于您使用的是 ARC，我知道您的目标是 iOS 4.0 或更高版本，因此您应该 `animateWithDuration:animations:completion:`改用。然后你不需要传递一个`void *`.

```
UIImage *img = someImage();
int i = someInt();

[UIView animateWithDuration:2.0 animations:^{
    // set the animatable properties here
} completion:^(BOOL finished) {
    doSomethingWithImageAndInteger(img, i);
}]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-23T20:45:49.180

ARC 不能在普通的旧 C 结构中跟随 ObjC 对象。它跟踪堆栈上的指针，或者 ObjC 和 C++ 对象中的指针，这些指针是使用显式或隐式方法复制的，但无论如何都在编译器控制之下。

所以......使用一个类。如果你喜欢 C++，或者：

```
@interface MyNotSoPlainStruct

@property ( nonatomic, strong ) UImage* image;
@property ( nonatomic ) int i;

@end

@implementation MyNotSoPlainStruct
@end

MyNotSoPlainStruct* foo = [MyNotSoPlainStruct new];
foo.image = …
foo.i = … 
```

你去吧。

解决方案需要更多行，这是真的，但您可以更好地控制事情的完成方式，包括图像生命周期。如果它更适合您的需要，您可以使用强指针或弱指针。

当然，您也可以使用字典或数组。文字使这变得特别容易：

```
NSDictionary* arguments = @{ @"image" : <image>, @"i" : @( <int> ) };
arguments[@"i"].intValue returns the int you need. 
```

相当容易。

**编辑**

忘了转移部分，哎呀:)。那么：

您必须使用以下注释：

```
void* argumentsPointer = (__bridge_retained void*) arguments; 
```

参数被保留，并且该引用不再由 ARC 管理。

当您收到指针返回时，您必须将其转换：

```
NSDictionary* arguments = (__bridge_transfer NSDictionary*) argumentsPointer; 
```

如果最后一个已知引用消失，仅使用 __bridge 可能会导致指针悬空。如果您希望 void* 保留字典，则必须先使用 __bridge_retained，然后再使用 __bridge_transfer。

# microsoft-metro - WinJS.strictProcessing() 做什么？

> ID：11172741
> 
> 赞同：0
> 
> 时间：2012-06-23T20:30:45.403
> 
> 标签：microsoft-metro, winjs

WinJS.strictProcessing() 做什么？

MSDN 的解释不是很有帮助 - [http://msdn.microsoft.com/en-us/library/windows/apps/hh987021.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh987021.aspx)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T06:24:18.233

它打开了一个安全功能。场景是这样的：

1.  应用程序从 Web（例如通过 XHR）下载包含 data-win-control、data-win-options 或 data-win-bind 属性的 HTML
2.  HTML 被添加到 DOM
3.  在该 HTML 上调用 WinJS.UI.processAll 或 WinJS.Binding.processAll
4.  data-win-* 属性指定被欺骗调用 eval （或同样邪恶的东西）的函数
5.  用户的应用程序已拥有

当 strictProcessing 模式打开时，只有明确标记为可安全进行声明性处理的函数才能从标记中调用。这大大减少了可以调用的函数的表面积，并减少了您的应用程序需要进行安全审查的区域。

最重要的是，没有一个 WinRT 或 eval 函数被如此标记，所以你不能下载 HTML 来直接调用 WinRT（以前，你可以）。

此模式在 RC 中默认未打开，以便应用程序开发人员有时间在代码被破坏之前调整其代码，但此行为很可能在 RTM 中默认打开。

# mysql-workbench - 无法设置外键关系

> ID：11172742
> 
> 赞同：35
> 
> 时间：2012-06-23T20:30:48.817
> 
> 标签：mysql-workbench

我对 MySQL Workbench 有一些问题，因为我有时在创建表时无法设置外键。我说有时因为它并不总是这样。问题是当我输入 FK 并选择参考表时，我无法选择参考列。我无法单击复选框并且下拉列表为空。我无法真正弄清楚问题是什么，因为我看不出与正在工作的 FK 没有真正的区别。我检查了数据类型、名称等，它们是正确的。我会提供一个SS来详细说明。绿色标记的键（id_hem）工作正常，红色标记是那些不工作的。

![WB截图](../Images/2fc2f2f4a93bd91e43d518ce600fa06b.png)

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2015-03-03T12:28:44.863

我知道这很旧，但通常的罪魁祸首是`Non Null`flag 和`Unsigned`. 如果引用的列确实启用了它们，请确保在外键列上匹配它们。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-09-22T11:30:27.677

这也可能是因为不同的排序规则。只需检查这 2 列是否具有相同的排序规则。

就我而言，一个是

> 表默认（使用utf8通用）

另一个与

> utf8_unicode_ci

我已经用 utf8_unicode_ci 设置了这 2 列，它可以工作。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-08-17T05:22:48.680

我有同样的问题..然后我检查了这两个表..问题是类型，它应该在两个表中都匹配。

如果在 foralda 表列**id_familjer 是 (INT)**
在 fkblixten 表列**id_familjer 也应该是 (INT)**。如果这两种数据类型不匹配，MySQL Workbench 将不允许选择该列作为外键。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-01-22T14:55:17.240

在接受的答案中手动更正：首先为引用表中的引用键创建索引。（您可以在每个表的可用索引选项卡中执行此操作）。然后，单击应用后（即使没有选择引用的列）相应地更改应用中的代码。

例子：

```
ALTER TABLE `SCHEMA_NAME`.`SECOND_TABLE_NAME` (we are creating foreign key in this second table)
ADD CONSTRAINT `FOREIGN_KEY_NAME`
  FOREIGN KEY (`COLUMN_IN_SECOND_TABLE`)
  REFERENCES `SCHEMA_NAME`.`FIRST_TABLE_NAME` (`COLUMN_IN_FIRST_TABLE`)
  ON DELETE NO ACTION
  ON UPDATE NO ACTION; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-23T20:38:08.653

我遇到了同样的问题，问题出在外键索引中。MySQL 工作台有时会为 fk 索引生成太长的名称。手动校正有帮助。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-24T01:19:23.493

id_familjer 是主键吗？设置它。
Referenced Column 仅显示 familjer 表主键。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-12-18T21:05:54.697

外键应具有与主键类似的相同常量。你可以忽略AI，Primary Key。如果 Primary key 有 UI ， foreign 也应该有 UI

UI-> 无符号整数 AI-> 自动增量

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-12-22T04:18:56.137

就我而言，我更改了要设置外键的每一列中的“排序规则”。

例如，我的 FK 列排序规则是 'utf8'，我也将我的引用表更改为 'utf8'。它解决了我的问题。

我希望它会有所帮助。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-01-26T06:53:32.473

另外补充一下我的两分钱，如果您在同一个数据库命名空间中制作 EER 图并且两个或多个图包含同名的表，也会发生这种情况。

因此，如果您尝试与一个表（也存在于另一个同名的图表中）建立关系，它将在参考表中显示为两次，两者都引用您当前的图表模式，并且不允许您设置一种关系。

解决方案是重命名另一个图中的表。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-08-16T14:20:18.760

确保两个表中的数据类型相同，就好像一张表说`int`的那样，另一张表`int(6)`说它不会工作，因为一个表有限制。我遇到了这个问题，这就是我解决它的方法。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-12-23T15:02:38.977

他们都没有工作......所以我自己编写了sql查询来设置外键。它没有任何问题。之后，我可以在右侧的“引用列”中选择属性（我在查询中使用）。

奇怪的

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-02-05T15:04:10.097

即使从表属性我没有设法改变`foreign key`值，我尝试使用`SQL`代码并且我做到了。

代码：

```
ALTER TABLE Table2
ADD FOREIGN KEY (Table2_fk_field) REFERENCES Table1(Table1_pk_field); 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-02-09T19:17:55.547

在我的例子中，使用现有数据设置约束，我忘记首先检查并删除子表中违反约束的行（在父表中找不到外键）！

# c# - 用 XML 解析 Ienumerable？

> ID：11172744
> 
> 赞同：0
> 
> 时间：2012-06-23T20:30:54.467
> 
> 标签：c#, xml, linq

我无法弄清楚如何解析具有多个同名元素的 xml 并将它们写出或将它们分配给字符串数组，以便我可以在我的 Web 应用程序中使用它们。我一直被告知 Ienumerable 不能转换为字符串。我真的想简单地从 XML 中获取每个项目，以便我可以使用它。

```
if (Request.QueryString["Keywords"] != null)
        {
            string keywords = Request.QueryString["Keywords"];
            string myAppID = "HIDDEN FROM STACKOVERFLOW";
            var xml = XDocument.Load("http://svcs.ebay.com/services/search/FindingService/v1?OPERATION-NAME=findItemsByKeywords&SERVICE-VERSION=1.0.0&SECURITY-APPNAME=" + myAppID + "&RESPONSE-DATA-FORMAT=XML&REST-PAYLOAD&keywords=" + keywords + "&paginationInput.entriesPerPage=10");
            XNamespace ns = "http://www.ebay.com/marketplace/search/v1/services";

 var titles = from item in xml.Root.Descendants(ns + "title")
                              select new
                              {
                                  title = item.Parent.Element("title").Value,
                              };
            Label1.Text = titles.ToString();
        } 
```

我拥有的示例 XML 是：

```
This XML file does not appear to have any style information associated with it. The document tree is shown below.
<findItemsByKeywordsResponse xmlns="http://www.ebay.com/marketplace/search/v1/services">
<ack>Success</ack>
<version>1.12.0</version>
<timestamp>2012-06-23T19:54:46.019Z</timestamp>
<searchResult count="10">
<item>
<itemId>120933737016</itemId>
<title>
Apple MacBook Pro 13.3" Laptop - MC700LL/A (February, 2011) 8GB 320GB *GEM MINT*
</title>
<globalId>EBAY-US</globalId>
<subtitle>
* GEM MINT, LION, 8GB RAM, ALWAYS stored in Speck Case
</subtitle>
<primaryCategory>
<categoryId>111422</categoryId>
<categoryName>Apple Laptops</categoryName>
</primaryCategory>
<galleryURL>
http://thumbs1.ebaystatic.com/pict/1209337370164040_1.jpg
</galleryURL>
<viewItemURL>
http://www.ebay.com/itm/Apple-MacBook-Pro-13-3-Laptop-MC700LL-A-February-2011-8GB-320GB-GEM-MINT-/120933737016?pt=Apple_Laptops
</viewItemURL>
<productId type="ReferenceID">99741550</productId>
<paymentMethod>PayPal</paymentMethod>
<autoPay>false</autoPay>
<postalCode>98296</postalCode>
<location>Snohomish,WA,USA</location>
<country>US</country>
<shippingInfo>
<shippingServiceCost currencyId="USD">17.0</shippingServiceCost>
<shippingType>Flat</shippingType>
<shipToLocations>US</shipToLocations>
<expeditedShipping>false</expeditedShipping>
<oneDayShippingAvailable>false</oneDayShippingAvailable>
<handlingTime>1</handlingTime>
</shippingInfo>
<sellingStatus>
<currentPrice currencyId="USD">811.99</currentPrice>
<convertedCurrentPrice currencyId="USD">811.99</convertedCurrentPrice>
<bidCount>14</bidCount>
<sellingState>Active</sellingState>
<timeLeft>P0DT0H5M24S</timeLeft>
</sellingStatus>
<listingInfo>
<bestOfferEnabled>false</bestOfferEnabled>
<buyItNowAvailable>false</buyItNowAvailable>
<startTime>2012-06-16T20:00:10.000Z</startTime>
<endTime>2012-06-23T20:00:10.000Z</endTime>
<listingType>Auction</listingType>
<gift>false</gift>
</listingInfo>
<returnsAccepted>false</returnsAccepted>
<galleryPlusPictureURL>
http://galleryplus.ebayimg.com/ws/web/120933737016_1_0_1.jpg
</galleryPlusPictureURL>
<condition>
<conditionId>3000</conditionId>
<conditionDisplayName>Used</conditionDisplayName>
</condition>
<isMultiVariationListing>false</isMultiVariationListing>
</item>
<item>
<itemId>261037967463</itemId>
<title>
2009 Apple MACBOOK 2.13GHz Core 2 Duo / 160GB HDD / 2GB RAM / 1 YEAR WARRANTY!
</title>
<globalId>EBAY-US</globalId>
<primaryCategory>
<categoryId>111422</categoryId>
<categoryName>Apple Laptops</categoryName>
</primaryCategory>
<galleryURL>
http://thumbs4.ebaystatic.com/pict/2610379674634040_1.jpg
</galleryURL>
<viewItemURL>
http://www.ebay.com/itm/2009-Apple-MACBOOK-2-13GHz-Core-2-Duo-160GB-HDD-2GB-RAM-1-YEAR-WARRANTY-/261037967463?pt=Apple_Laptops
</viewItemURL>
<productId type="ReferenceID">85150888</productId>
<paymentMethod>PayPal</paymentMethod>
<autoPay>true</autoPay>
<postalCode>92101</postalCode>
<location>San Diego,CA,USA</location>
<country>US</country>
<shippingInfo>
<shippingServiceCost currencyId="USD">0.0</shippingServiceCost>
<shippingType>Free</shippingType>
<shipToLocations>US</shipToLocations>
<expeditedShipping>false</expeditedShipping>
<oneDayShippingAvailable>false</oneDayShippingAvailable>
<handlingTime>1</handlingTime>
</shippingInfo>
<sellingStatus>
<currentPrice currencyId="USD">498.0</currentPrice>
<convertedCurrentPrice currencyId="USD">498.0</convertedCurrentPrice>
<sellingState>Active</sellingState>
<timeLeft>P10DT6H30M15S</timeLeft>
</sellingStatus>
<listingInfo>
<bestOfferEnabled>false</bestOfferEnabled>
<buyItNowAvailable>false</buyItNowAvailable>
<startTime>2012-06-04T02:20:01.000Z</startTime>
<endTime>2012-07-04T02:25:01.000Z</endTime>
<listingType>StoreInventory</listingType>
<gift>false</gift>
</listingInfo>
<returnsAccepted>true</returnsAccepted>
<condition>
<conditionId>2500</conditionId>
<conditionDisplayName>Seller refurbished</conditionDisplayName>
</condition>
<isMultiVariationListing>false</isMultiVariationListing>
</item>
<item>
<itemId>271003897097</itemId>
<title>
Apple MacBook Pro 15.4" Laptop (February, 2011) - Customized
</title>
<globalId>EBAY-US</globalId>
<subtitle>Apple Care till June 2014 - Like NEW!</subtitle>
<primaryCategory>
<categoryId>111422</categoryId>
<categoryName>Apple Laptops</categoryName>
</primaryCategory>
<galleryURL>
http://thumbs2.ebaystatic.com/pict/2710038970974040_1.jpg
</galleryURL>
<viewItemURL>
http://www.ebay.com/itm/Apple-MacBook-Pro-15-4-Laptop-February-2011-Customized-/271003897097?pt=Apple_Laptops
</viewItemURL>
<productId type="ReferenceID">108789851</productId>
<paymentMethod>PayPal</paymentMethod>
<autoPay>true</autoPay>
<postalCode>94536</postalCode>
<location>Fremont,CA,USA</location>
<country>US</country>
<shippingInfo>
<shippingServiceCost currencyId="USD">35.0</shippingServiceCost>
<shippingType>Flat</shippingType>
<shipToLocations>US</shipToLocations>
<expeditedShipping>true</expeditedShipping>
<oneDayShippingAvailable>false</oneDayShippingAvailable>
<handlingTime>2</handlingTime>
</shippingInfo>
<sellingStatus>
<currentPrice currencyId="USD">1399.99</currentPrice>
<convertedCurrentPrice currencyId="USD">1399.99</convertedCurrentPrice>
<bidCount>0</bidCount>
<sellingState>Active</sellingState>
<timeLeft>P0DT0H10M50S</timeLeft>
</sellingStatus>
<listingInfo>
<bestOfferEnabled>false</bestOfferEnabled>
<buyItNowAvailable>true</buyItNowAvailable>
<buyItNowPrice currencyId="USD">1750.0</buyItNowPrice>
<convertedBuyItNowPrice currencyId="USD">1750.0</convertedBuyItNowPrice>
<startTime>2012-06-22T20:05:36.000Z</startTime>
<endTime>2012-06-23T20:05:36.000Z</endTime>
<listingType>AuctionWithBIN</listingType>
<gift>false</gift>
</listingInfo>
<returnsAccepted>false</returnsAccepted>
<galleryPlusPictureURL>
http://galleryplus.ebayimg.com/ws/web/271003897097_1_0_1.jpg
</galleryPlusPictureURL>
<condition>
<conditionId>3000</conditionId>
<conditionDisplayName>Used</conditionDisplayName>
</condition>
<isMultiVariationListing>false</isMultiVariationListing>
</item>
<item>
<itemId>221050903140</itemId>
<title>Apple MacBook 13.3" Laptop - MB062LL/A (2006)</title>
<globalId>EBAY-US</globalId>
<primaryCategory>
<categoryId>111422</categoryId>
<categoryName>Apple Laptops</categoryName>
</primaryCategory>
<galleryURL>
http://thumbs1.ebaystatic.com/pict/2210509031404040_1.jpg
</galleryURL>
<viewItemURL>
http://www.ebay.com/itm/Apple-MacBook-13-3-Laptop-MB062LL-A-2006-/221050903140?pt=Apple_Laptops
</viewItemURL>
<productId type="ReferenceID">78092354</productId>
<paymentMethod>PayPal</paymentMethod>
<autoPay>false</autoPay>
<postalCode>80524</postalCode>
<location>Fort Collins,CO,USA</location>
<country>US</country>
<shippingInfo>
<shippingServiceCost currencyId="USD">20.0</shippingServiceCost>
<shippingType>Flat</shippingType>
<shipToLocations>US</shipToLocations>
<expeditedShipping>true</expeditedShipping>
<oneDayShippingAvailable>false</oneDayShippingAvailable>
<handlingTime>3</handlingTime>
</shippingInfo>
<sellingStatus>
<currentPrice currencyId="USD">250.0</currentPrice>
<convertedCurrentPrice currencyId="USD">250.0</convertedCurrentPrice>
<bidCount>0</bidCount>
<sellingState>Active</sellingState>
<timeLeft>P0DT0H13M21S</timeLeft>
</sellingStatus>
<listingInfo>
<bestOfferEnabled>false</bestOfferEnabled>
<buyItNowAvailable>false</buyItNowAvailable>
<startTime>2012-06-18T20:08:07.000Z</startTime>
<endTime>2012-06-23T20:08:07.000Z</endTime>
<listingType>Auction</listingType>
<gift>false</gift>
</listingInfo>
<returnsAccepted>false</returnsAccepted>
<condition>
<conditionId>3000</conditionId>
<conditionDisplayName>Used</conditionDisplayName>
</condition>
<isMultiVariationListing>false</isMultiVariationListing>
</item>
<item>...</item>
<item>...</item>
<item>...</item>
<item>...</item>
<item>...</item>
<item>...</item>
</searchResult>
<paginationOutput>
<pageNumber>1</pageNumber>
<entriesPerPage>10</entriesPerPage>
<totalPages>11900</totalPages>
<totalEntries>118994</totalEntries>
</paginationOutput>
<itemSearchURL>
http://www.ebay.com/sch/i.html?_nkw=%22macbook%22&_ddo=1&_ipg=10&_pgn=1
</itemSearchURL>
</findItemsByKeywordsResponse> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T20:33:37.793

IEnumerable 的返回值可以通过 转换为数组（或列表）`titles.ToArray()`，之后，您可以[加入](http://msdn.microsoft.com/en-us/library/57a79xd0.aspx)数组字符串，如下所示：

```
label1.Text = String.Join(",", titles .ToArray()); 
```

此外，如果您想在没有任何分隔符的情况下连接所有这些，只需使用简单的 for 循环将它们相加：

```
foreach(var item in titles)
{
    label1.Text += item;
} 
```

[PS：我认为您需要多个标签而不是所有标签]

# java - Google docs java api entry.getContent() 在 pdf 文件上返回 null

> ID：11172745
> 
> 赞同：0
> 
> 时间：2012-06-23T20:31:01.013
> 
> 标签：java, google-docs, google-docs-api

尝试从 google docs 下载文档并且大多数文件都可以，但是在某些 pdf 上 entry.getContent() 返回 null。

看不到对该行为的任何解释，如果 getContent 返回 null ，我如何获取 uri 以进行文档下载？

感谢你并致以真诚的问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T11:40:47.383

这些 PDF 文件很可能已被标记为不可从 Google Docs UI 下载。

# c# - 在尊重偏好的同时将人员分配到建筑物？

> ID：11172756
> 
> 赞同：18
> 
> 时间：2012-06-23T20:32:02.937
> 
> 标签：c#, algorithm, optimization, complexity-theory, combinatorics

今天有个朋友问我一个关于作业问题的问题。我找到了一个非常简单的解决方案，但我觉得它可以变得更简单和更快。您的帮助将不胜感激。

问题：假设我有**N**个人，我需要将他们分配到**M**个建筑物中，每个建筑物可以容纳**K**个人。不是所有的人都愿意住在一起，所以我有一个 N*N 单元格的矩阵和一个 1 来标记愿意住在一起的人。如果一个单元格包含 1，则意味着 I 和 J 可以住在一起。显然，矩阵围绕主对角线对称。

我的解决方案如下（伪代码）：

```
int[] Match(int[] people, int[][] pairs, int numBuildings, int buildingsSize)
{
    int[] freePeople = findFreePeople(people);
    if(freePeople) = 0 
    {
        return people;
    }

    foreach(int person in freePeople)
    {
        for(int buildingIndex=0 to numBuildings)
        {
            if( CheckIfPersonFitsInBuilding(...) )
            {
                int[] tempPeople = people.Copy();
                tempPeople[person] = buildingIndex;
                int[] result = Match(tempPeople,pairs,numBuildings,buildingsSize);
                if(result != null)
                {
                    return result;
                }
            }
        }
    }
    return null;
} 
```

我只是使用递归涵盖了所有可能的安排。我觉得这可以大大优化，我不是在谈论启发式方法，而是一种复杂性要低得多的解决方案。

1.  是否存在与此类似的正式众所周知的问题？
2.  有更好的算法吗？

我认为这可能与[稳定的婚姻问题](http://en.wikipedia.org/wiki/Stable_marriage_problem#Similar_problems)有关，但我不确定。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-23T20:45:57.777

[通过将图分解为](http://en.wikipedia.org/wiki/Clique_cover)团的 NP 完全问题（*团覆盖问题*）的简化，这个问题被称为 NP-hard 。

首先，一些术语和讨论。图中的[集团](http://en.wikipedia.org/wiki/Clique_%28graph_theory%29)是一组 k 个不同的节点，使得每个节点都连接到集团中的其他节点。图中的[独立集](http://en.wikipedia.org/wiki/Independent_set_%28graph_theory%29)是一组 k 个不同的节点，使得没有两个节点相互连接。如果您获取任何图 G，然后在缺少一条边时引入边并删除以前存在的所有边，您将获得原始图的[补](http://en.wikipedia.org/wiki/Complement_graph)图。这意味着在初始图中找到一个团的问题等价于在补图中找到一个独立集。

这很有趣的原因是，在你描述的问题中，你得到了一张人的图表，其中每条边都表示“这两个人不能住在一起”。因此，您可以将您描述的问题视为试图找到一种方法将图分解为 k 个子图，每个子图都是一个独立的集合。如果你构建这个图的补集，你会得到所有可以被放在一起的人的图。在这种情况下，您希望将组分解为 k 个组，这些组都是派系。

已知以下问题是 NP 完全问题：

> 给定一个图和一个数 k，你能把图中的节点分成 k 个团吗？

我们可以在多项式时间内将此问题简化为您的问题，表明您的问题是 NP 难的。构造很简单——给定初始图 G 和数 k，首先构造 G 的补集。这意味着如果你可以将补集分解为 k 个独立集合，那么原始图 G 可以分解为 k 个团（因为派系和独立集之间的对偶性）。现在，获取这个新图并将其转换为一组人，每个节点一个人，如果他们的节点在原始图中连接，则两个人不能被放置在同一个房间中。现在，有一种方法可以将这些人分配到 k 个房子中，如果 G 的补集可以分解为 k 个独立集，如果 G 可以分解为 k 个派系。最后，集团覆盖的已知 NP 完全问题可以在多项式时间内简化为您的问题，因此您的问题是 NP 难的。为了确保任何独立的集合都可以放入一个房子，只需将每个房间的最大容量设置为 n，即图中的节点数。这允许任何独立的装置被安置在任何房间中。

由于您的问题是 NP 难题，因此除非 P = NP，否则不能有多项式时间解决方案。因此，众所周知，它没有多项式时间算法，您的回溯递归很可能是最佳解决方案。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-06-27T20:25:11.953

templatetypedef[很好地证明](https://stackoverflow.com/a/11172847/811001)了为什么这个问题是 NP-hard 并且没有（已知的）多项式时间解。

然而，与许多 NP-hard 问题一样，这并不意味着您无法在实践中有效地解决它，或者您无法改进暴力解决方案。

特别是，您应该研究[**约束满足问题**](http://en.wikipedia.org/wiki/Constraint_satisfaction_problem)。它们是一类更一般的问题，准确地描述了您要解决的问题：给定一组约束，满足所有约束的值是什么？

**AIMA**一书有[一个非常好的章节](http://aima.cs.berkeley.edu/newchap05.pdf)，介绍了如何解决这些类型的问题。我建议你阅读一下，因为那里有很多很好的信息，而且很容易获得，因为这本书是为本科生设计的。我会在这里给你一些重要的想法：

主要问题是：

*   在你的递归中下一个应该分配哪个学生？
*   应该以什么顺序为该学生考虑建筑物？

这里有两个启发式方法：

*   **最小剩余值**(MRV) 启发式：在递归中选择下一个分配给建筑物的学生时，选择剩下的选择最少的学生。
*   **最小约束值**(LCV) 启发式：在决定要看什么学生后，分配排除其余学生选择最少的建筑物

对于 MRV 启发式，通过选择对其他学生有最大限制的学生来打破联系。这些启发式方法背后的想法是您希望选择最有可能成功的搜索路径 (LCV)。但是给定一个特定的搜索路径，您希望尽早失败，以减少在该路径上花费的时间 (MRV)。

[**此外，您应该使用更高级的搜索算法（如AC-3**](http://en.wikipedia.org/wiki/AC-3_algorithm)），而不是使用基本的前向检查来进行简单递归。

鉴于约束满足问题在许多软件工程应用程序中如此普遍，因此已经有大量的开放库可以有效地解决这些问题。当然，这是因为您要解决的问题是针对现实世界的应用程序，而不是某种家庭作业。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-24T00:41:29.627

解决这些问题的一个好方法是使用有限域的约束求解器。

例如，使用 GNU-Prolog：

```
solve(Out):-
    People = [Jon, Mary, Alice, Smith, Dick, George, Betty, Lucy],
    fd_domain(People, 0, 3),    % people lives in buildings 0 to 3.
    fd_atmost(4, People, 0),    % at most, 4 people may live in building 0
    fd_atmost(3, People, 1),    % at most, 3 people may live in building 1
    fd_atmost(2, People, 2),    % etc.
    fd_atmost(1, People, 3),
    Jon   #\= Mary,             % Jon hates Mary
    Alice #\= Smith,            % etc.
    Betty #\= Lucy,
    Jon   #\= Alice,
    Dick  #\= George,
    fd_labeling(People),        % iterate until an acceptable combination is found.
    People = Out.

:- solve(O), write(O), nl. 
```

从复杂性的角度来看，这仍然是 NP 完全的。但是约束求解器可能会重新排序在标记步骤上执行分配的方式，以便尽早发现死角，从而导致更小的搜索树。

# c# - 如何在 HttpModule 中识别 UNC 访问

> ID：11172759
> 
> 赞同：2
> 
> 时间：2012-06-23T20:32:49.203
> 
> 标签：c#, http, sharepoint

我有一个用于我使用的 Web 应用程序 (SharePoint) 的 HttpModule。我希望能够识别何时通过 UNC (\Server\Something) 查看文件。Request.Url.IsUnc 始终返回 false，并且调用始终显示“http://”，即使用户尝试通过 UNC 浏览目录。

有什么方法可以识别 UNC 访问权限？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T02:15:22.740

每：http: [//msdn.microsoft.com/en-us/library/system.uri.isunc.aspx](http://msdn.microsoft.com/en-us/library/system.uri.isunc.aspx)

如果指定的 Uri 实例是 UNC 路径（例如 \server\folder 或 file://server/folder），则 IsUnc 属性为 true。如果 URI 具有 file:// 方案并指定主机组件，则此属性始终返回 true。

因此，如果调用始终显示“http://”，IsUnc 将无法识别它。

如果这没有帮助，这篇文章中定义了一些替代方法：
[在 C# 中找出应用程序是否从网络驱动器运行的最简单方法？](https://stackoverflow.com/questions/8633680/easiest-way-in-c-sharp-to-find-out-if-an-app-is-running-from-a-network-drive)

# php - 基本 AJAX 请求 Javascript/PHP 不起作用

> ID：11172760
> 
> 赞同：1
> 
> 时间：2012-06-23T20:32:55.430
> 
> 标签：php, javascript, ajax

我正在尝试一个基本的 AJAX 调用，我将地址“www.google.com”发送到，`urlpost.php`但当前代码似乎无法检测到响应（没有任何反应）。我试图寻找错误，但我不知道我哪里出错了。

谢谢大家！

*免责声明：这是 Robin Nixon 的Learning PHP, MySQL & Javascript*示例的变体

 *索引.html

```
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Ajax Example</title>
    </head>
    <body>

    <h1 align='center'>Loading a web page into a DIV</h1>
    <div id='info' align='center'>This Sentence will be replaced </div>
    <script>
        request = new ajaxRequest()
        request.open("POST", "urlpost.php", true) //also tried 'test/urlpost.php' (test is the folder of the file)
        request.setRequestHeader("Content-type", "application/x-www-form-urlencoded")
        request.setRequestHeader("Content-length", params.length)
        request.setRequestHeader("Connection", "close")                

        request.send("url=www.google.com")

        request.onreadystatechange = ajaxCallback

        function ajaxCallback()
        {
            alert("Reponse received") //just letting me know I got a reponse
            if(this.readyState==4) //ready
            {
                if (this.status==200) //no idea
                    {
                        if (this.responseText != null)
                            {
                                document.getElementById('info').innerHTML = this.responseText
                            }
                        else alert("AJAX ERROR: NO DATA RECEIVED")
                    }
                    else alert("Ajax error: "+this.statusText);
            }
        }

        function ajaxRequest()
        {
            try //non IE browser
            {
                var request = new XMLHttpRequest();
            }
            catch(e1)
            {
                try // IE6+?
                {
                    request = new ActiveXObject("Msxml2.XMLHTTP")
                }
                catch(e2)
                {
                    try // IE5?
                    {
                        request = new ActiveXObject("Microsoft.XMLHTTP")                   
                    }
                    catch(e3) //No Ajax support
                    {
                        request = false
                    }
                }
            }   
            return request
        }

    </script> 
```

urlpost.php

```
<?php
if (isset($_POST['url'])){
    echo file_get_contents("http://".$_POST['url']);
}

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T21:15:09.210

使用 jQuery 重写它，更容易。

```
$(document).ready(function(){

        $.ajax({
            type: "post",
            url: "urlpost.php",
            data: "url=www.google.com",

            success: function(msg){
                $('#replace').html(msg);

            }
        });
    return false;

});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T21:33:56.000

`request.setRequestHeader("Content-length", params.length)`

`params.length`未定义。您需要将其替换为您发送的数据的长度

`request.send("url=www.google.com")`在您的情况下，这是 18 个字符。*

# ruby-on-rails - 用于写出此值的 Sass 语法

> ID：11172762
> 
> 赞同：0
> 
> 时间：2012-06-23T20:32:59.337
> 
> 标签：ruby-on-rails, sass

我只是在最近的一个项目中采用 Sass，并试图让以下代码适用于不起作用的圆角。我将如何指定这个以便每个圆角设置为 8px？

```
$radius_size:8px;
.rounded-corners {
  -moz-border-radius-topleft: #{$radius_size}px;
  -webkit-border-top-left-radius: #{$radius_size}px;
  border-top-left-radius: #{$radius_size}px;
  -moz-border-radius-topright: #{$radius_size}px;
  -webkit-border-top-right-radius: #{$radius_size}px;
  border-top-right-radius: #{$radius_size}px;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T20:35:11.747

你只是把它复杂化了！

```
$radius_size: 8px;
.rounded-corners {
  -moz-border-radius-topleft: $radius_size;
  //... and so on ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T20:38:37.687

1.  好像您插入了双“px”部分。
2.  您可以不使用变量`#{}`

    `$radius_size: 8px;`

`.rounded-corners {`

```
 -moz-border-radius-topleft: $radius_size;
    -webkit-border-top-left-radius: $radius_size;
    border-top-left-radius: $radius_size;
    -moz-border-radius-topright: $radius_size;
    -webkit-border-top-right-radius: $radius_size;
    border-top-right-radius: $radius_size;
} 
```

另外，请查看[此站点](http://sass-lang.com/try.html)以在线测试 sass

# c++ - 从相关类访问私有成员数据

> ID：11172763
> 
> 赞同：1
> 
> 时间：2012-06-23T20:33:15.953
> 
> 标签：c++, inheritance

我正在尝试为我的 OO 课程编写两个课程，Sale 和 Register。这是两个标题。

销售标头：

```
enum ItemType {BOOK, DVD, SOFTWARE, CREDIT};

class Sale
{
public:
Sale();         // default constructor, 
            // sets numerical member data to 0

void MakeSale(ItemType x, double amt);  

ItemType Item();        // Returns the type of item in the sale
double Price();     // Returns the price of the sale
double Tax();       // Returns the amount of tax on the sale
double Total();     // Returns the total price of the sale
void Display();     // outputs sale info (described below)

private:
double price;   // price of item or amount of credit
double tax;     // amount of sales tax (does not apply to credit)
double total;   // final price once tax is added in.
ItemType item;  // transaction type
}; 
```

注册头：

```
class Register{
public:

Register(int ident, int amount);
~Register();
int GetID(){return identification;}
int GetAmount(){return amountMoney;}
void RingUpSale(ItemType item, int basePrice);
void ShowLast();
void ShowAll();
void Cancel();
int SalesTax(int n);

private:

int identification;
int amountMoney;
int listSize;
int numSales;
Sale* sale;
}; 
```

在 Register 类中，我需要保存 Sale 对象的动态数组。我能够做到这一点。我的问题是“注册”中的 RingUpSale() 函数。我需要能够从该功能访问和修改“销售”的私有成员数据。例如：

```
sale[numSales]->item = item;
    sale[numSales]->total = basePrice; // Gets an error
    if(item == CREDIT){
            sale[numSales]->tax = 0; // Gets an error
            sale[numSales]->total = basePrice; // Gets an error
            amountMoney -= basePrice;
    }
    else {
        sale[numSales]->tax = 0.07*basePrice; // Gets an error
        sale[numSales]->total = (0.07*basePrice)+basePrice; // Gets an error
        amountMoney += basePrice;
    } 
```

我不知道如何使这种访问成为可能。也许通过继承或朋友结构？

在你对这个设计大发雷霆之前，请记住这是为了家庭作业，所以有一些愚蠢的限制。其中之一是我无法修改我所写的“Sale.h”。而且我只能在“Register.h”中添加更多私有函数。

RingUpSale() 函数说明：

*   RingUpSale 此函数允许将销售的商品类型和基本价格作为参数传入。这个函数应该将销售存储在销售列表中，并且应该适当地更新收银机中的金额。购买的物品会在收银机上加钱。请记住，销售税必须添加到任何已售商品的基本价格中。如果销售类型是 CREDIT，那么您应该从登记册中扣除金额。

还有这个：

-(提示：请记住，在寄存器内部，您保留了一个 Sale 对象的动态数组。这意味着这些函数中的大多数将使用这个数组来完成它们的工作——它们还可以调用 Sale 类的成员函数）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T20:34:54.807

制作 getter 和 setter：

`int getX() { return _x; } void setX(int x_) { _x = x_; } private: int _x; };`

x 是你想要的变量吗

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T20:39:27.640

看起来该`Sale::MakeSale()`功能旨在处理这些税收计算细节。给定一个项目和一个基本价格，它会计算税收（如果需要）并更新`total`价值。

^(（我假设虽然你不能修改`Sale.h`，但你*可以*实现`Sale.cpp`。）)

# c# - 网络 PC 的 DirectoryInfo 引发 ArgumentException

> ID：11172768
> 
> 赞同：2
> 
> 时间：2012-06-23T20:34:03.337
> 
> 标签：c#, directory, smb

我正在尝试将[TreeView](http://msdn.microsoft.com/en-us/library/system.windows.forms.treeview.aspx)控件绑定到LAN 上的机器**ASUS-PC**的公共文件夹。

![ASUS-PC 外形图](../Images/1cb057d1ea79e7db38b749c4c81503b5.png)

但是，我无法弄清楚如何解析“ASUS-PC”目录，因为我无法从路径创建[DirectoryInfo](http://msdn.microsoft.com/en-us/library/system.io.directoryinfo.aspx)`"\\\\ASUS-PC"`对象。

```
DirectoryInfo dir = new DirectoryInfo("\\\\ASUS-PC"); 
```

上面的行抛出带有消息的[ArgumentException](http://msdn.microsoft.com/en-us/library/system.argumentexception.aspx)`The UNC path should be of the form \\server\share.`

下面的代码只为根创建了一个哑节点，因此我无法显示该 PC 上的所有公用文件夹。

**如何拉取路径“\\ASUS-PC”的目录列表？**

```
public void BindDirectoryToTreeView(string directoryPathToBind) {
  if (!String.IsNullOrEmpty(directoryPathToBind) && Directory.Exists(directoryPathToBind)) {
    treeView1.Nodes.Clear();
    TreeNode rootNode = null;
    char[] ps = treeView1.PathSeparator.ToCharArray();
    string[] split = directoryPathToBind.Split(ps);
    var folders = split.Where(str => !String.IsNullOrEmpty(str));
    for (int i = 0; i < folders.Count(); i++) {
      var folder = folders.ElementAt(i);
      int index = directoryPathToBind.IndexOf(folder);
      int length = index + folder.Length;
      string path = directoryPathToBind.Substring(0, length);
      if (rootNode != null) {
        DirectoryInfo dir = new DirectoryInfo(path);
        TreeNode node = new TreeNode(dir.Name, 0, 0);
        RecurseFolders(dir, node);
      } else {
        //DirectoryInfo dir = new DirectoryInfo(path); <= Throws the Error
        rootNode = new TreeNode(folder, 0, 0);
        //RecurseFolders(dir, rootNode);
      }
    }
    treeView1.Nodes.Add(rootNode);
    if (0 < rootNode.Nodes.Count) {
      rootNode.Expand();
    }
  }
} 
```

我知道这是可以做到的。那么，我需要做什么呢？

![Windows 做到了](../Images/06527d3f1fd4036f2915f7303e0f22b7.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T20:38:17.393

`\\ASUS-PC`不是目录，这`DirectoryInfo`就是抱怨的原因。您应该找到一种枚举共享的方法

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-23T20:39:25.660

您正在寻找的是[一种枚举给定主机上的网络共享的方法](https://stackoverflow.com/questions/2091126/enumerating-network-shares-with-c-sharp)。使用 DirectoryInfo 无法做到这一点。

# python - couchapp push 给出 [Errno 22] 无效参数

> ID：11172772
> 
> 赞同：4
> 
> 时间：2012-06-23T20:35:01.237
> 
> 标签：python, couchdb, couchapp

我刚刚`couchapp`按照说明安装并完成了入门教程。当我运行时，`couchapp push`我收到这样的错误：

```
 2012-06-23 14:05:08 [CRITICAL] unknown error [[Errno 22] Invalid argument]
Traceback (most recent call last):
  File "/Library/Python/2.6/site-packages/couchapp/dispatch.py", line 48, in dispatch
    return _dispatch(args)
  File "/Library/Python/2.6/site-packages/couchapp/dispatch.py", line 92, in _dispatch
    return fun(conf, conf.app_dir, *args, **opts)
  File "/Library/Python/2.6/site-packages/couchapp/commands.py", line 76, in push
    dbs = conf.get_dbs(dest)
  File "/Library/Python/2.6/site-packages/couchapp/config.py", line 146, in get_dbs
    return [Database(dburl, use_proxy=use_proxy) for dburl in dburls]
  File "/Library/Python/2.6/site-packages/couchapp/client.py", line 223, in __init__
    self.res.head()
  File "/Library/Python/2.6/site-packages/restkit/resource.py", line 122, in head
    params_dict=params_dict, **params)
  File "/Library/Python/2.6/site-packages/couchapp/client.py", line 143, in request
    raise RequestFailed("unknown error [%s]" % str(e))
RequestFailed: unknown error [[Errno 22] Invalid argument] 
```

我在 OS X 10.6.8 上，CouchDB 已经由管理员设置，并且`.couchapprc`文件的默认数据库设置为`http://user:pass@localhost:5984/mydb`. 我已按照[couchapp.org](http://couchapp.org)的说明进行 Homebrew 安装。我唯一能想到的是这是一个与 Python 相关的问题，但我不了解 Python，似乎无法弄清楚为什么这件事会失败。任何帮助追踪此问题并解决它将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T16:41:35.283

我遇到了同样的问题并通过降级到其他版本解决了它。

[https://github.com/downloads/couchapp/couchapp/couchapp-0.8.1-macosx.zip](https://github.com/downloads/couchapp/couchapp/couchapp-0.8.1-macosx.zip)

目前看来是最好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T21:44:09.103

当这种情况发生在我身上时，它通常意味着在某处....不知何故，_doc 文件夹中的一些 JSON 格式错误，并且可能处于奇怪的水平。所以就像两个 _ids 或一个不应该出现的 _rev 一样。

# php - 使 pdo::query 静态化

> ID：11172777
> 
> 赞同：3
> 
> 时间：2012-06-23T20:35:27.930
> 
> 标签：php, mysql, pdo

运行下面的代码时出现此错误。我通常使用 msql 函数，但我试图改用 PDO。怎么了 ？

致命错误：不能在第 14 行静态调用非静态方法 PDO::query()

```
<?php 

if(isset($_POST['username']) AND isset($_POST['password'])) {

$username = $_POST['username'];
$password = $_POST['password'];
$password_hash = md5($password);

if (!empty($username) AND !empty($password) ) {

$query = "SELECT 'id' FROM `userdatabase` WHERE 'email'='$username' AND      'password'='$password_hash'";

if($query_run = PDO::query($query)){

$query_num_rows = PDO::rowcount($query_run);
if ($query_num_rows==0){
echo 'invalid password/username';

} else {
echo 'Username/password  = correct';
}

}

} else {
echo 'You must enter a password..';
}

} 

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T20:42:35.437

`::`符号用于调用定义为静态的方法，这意味着您无需创建对象的实例即可调用此方法。`query()`方法不是静态的，这意味着您需要先创建`PDO`对象，然后`query()`在该对象上调用方法。

这应该是这样的：

```
$dsn = 'mysql:dbname=testdb;host=127.0.0.1';
$user = 'dbuser';
$password = 'dbpass';
$pdo = new  PDO($dsn, $user, $password);
$result = $pdo->query('SELECT * FROM table');  //here $result is a set of results that can be accessed like arrays; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-23T20:50:12.643

首先，如果你可以使用静态方法，你想如何连接到你的数据库？

PDO 需要是一个实例，因为构造函数 ( `__construct()`) 将连接到数据库。如果你有静态方法，你不能这样做`PDO::__construct($params)`，因为 PHP 没有静态构造函数。

因此，实例化 PDO：

```
$pdo = new  PDO('mysql:dbname=testdb;host=localhost', 'root', 'password'); 
```

并进行查询：

```
$result = $pdo->query('SELECT * FROM table WHERE 1=1'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-23T20:50:12.317

错误消息说明了一切。您将该`query`方法称为静态方法（不需要实例化类的方法），而它不是静态方法。

只是为了提供更多背景信息，说明为什么不能将其设为静态函数（因为您的问题让我相信这就是您想要解决此错误的方式）。

*   实例化 PDO 对象时，将数据库主机、用户名、密码、数据库类型和默认数据库传递给其构造函数。（这些不是所有必需的参数）。与数据库服务器的连接已建立，因此您可以查询数据。

*   如果您的查询方法是静态的，则对于要运行的每个查询，您要么必须连接、查询、断开连接并返回结果。显然这*不是*一个好方法。

*   PDO 对象允许您做很多事情，而不仅仅是执行查询：假设您的数据库正在 InnoDB 引擎上运行。静态查询方法只会尝试执行`DELETE`查询，但在出现问题时不会为安全网留下空间。PDO 提供`$db->commit();`和`$db->rollBack();`方法，以防止数据损坏。

您甚至不应该考虑扩展 PDO 类和制作静态成员函数的原因有很多很多，但是您可以自己阅读[文档](http://www.php.net/pdo)找到答案。

在您的示例中，您希望在执行查询后获取行数。想想这意味着什么：没有实例可以将此值分配给它的属性之一，也没有与您刚刚运行查询的数据库的连接。在您的情况下获得行数的唯一方法是重新运行查询和计数。海事组织，这太愚蠢了

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-23T20:42:39.523

您的查询必须在数据库连接上执行。

您不能`query`用作静态函数，而是使用`$con->query()`代替。

如果没有指定任何 PDO 对象，PDO 怎么知道使用哪个连接？（你可以有多个）

# java - java generics - 指定泛型类型

> ID：11172780
> 
> 赞同：0
> 
> 时间：2012-06-23T20:35:55.670
> 
> 标签：java, generics

好的，这就是我想要做的.. opencsv 有以下构造函数..

```
CsvToBean<T> csv2Bean=new CsvToBean<T>(); 
```

在它的当前形式中，它将接受任何对象。所以以下对我来说很好。

```
CsvToBean<HoldbackModel> holdbackModelCsv=new CsvToBean<HoldbackModel>(); 
```

我想编写一个通用助手来包装 opencsv 调用。我想将其限制为扩展我的标记类 CsvRecord 的类的任何对象。

```
public static <T extends CsvRecord> List<T> readCsvRecords(InputStream srcRecords,     InputStream templateCsv, Class<? extends T> clazz) {
    // here i want to pass the class clazz to the CsvBean.. but don't know how!!
    CsvToBean<T> csv2Bean=new CsvToBean<T>();
} 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T20:39:41.750

你走对了路，只需要一点点调整。

```
public static <T extends CsvRecord> List<T> readCsvRecords(InputStream srcRecords, InputStream templateCsv) {
    CsvToBean<T> csv2Bean = new CsvToBean<T>();
} 
```

# c# - 处理 UserControl 子事件

> ID：11172791
> 
> 赞同：0
> 
> 时间：2012-06-23T20:37:47.820
> 
> 标签：c#, wpf, events

我有一个`UserControl`包含一个`Button`：

```
<UserControl>
   <Button>
</UserControl> 
```

我想处理[`Button`事件](http://msdn.microsoft.com/en-us/library/system.windows.controls.button_events)（如 Click、Loaded、...），例如使用：

```
MyUCtrl.Click += new RoutedEventHandler(MyUCtrl_Click); 
```

这相当于：

```
MyButton.Click += new RoutedEventHandler(MyUCtrl_Click); 
```

我能怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T20:40:12.443

在 UserControl 上重新声明事件，在内部订阅 Button 的事件并在处理程序中引发 UserControl 的事件。

# asp.net - 在 asp .net 中保留行空间不起作用

> ID：11172795
> 
> 赞同：0
> 
> 时间：2012-06-23T20:38:15.197
> 
> 标签：asp.net, razor

我这样做是为了替换空格和换行符。空格部分有效，但换行符无效。

如果我从 br 中删除标签 < >，它会起作用。在这种情况下，换行符确实被 'br' 取代

我正在使用 Antixss 和 sanitize.GetSafeHtmlFragment？

这会导致问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T20:49:06.060

这可能有效：

> [http://wpl.codeplex.com/workitem/14053](http://wpl.codeplex.com/workitem/14053)

```
AntiXss.GetSafeHtmlFragment(strMessage.Replace(ControlChars.Lf.ToString(),"<br>")) 
```

> strMessage 是您调用 AntiXss 的带有换行符的字符串。

这也可能有帮助：

*   [http://eksith.wordpress.com/2012/02/13/antixss-4-2-breaks-everything/](http://eksith.wordpress.com/2012/02/13/antixss-4-2-breaks-everything/)

*   [.NET AntiXSS 与多行文本框](https://stackoverflow.com/questions/9263311/net-antixss-with-multiline-textboxes)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T20:54:16.797

也许是一些代码......以及您当前问题的描述

听起来您对模型字段执行此操作。在编辑或创建视图中这是正确的吗？如果您使用的是 texteditorfor(model => model.property) 并且属性是字符串类型，那么换行符将被自动删除。

如果是由于 HTML 导致的验证错误，则应在错误页面上指出。如果是这种情况，那么在模型中，您必须允许具有 [AllowHtml] 属性的 html 到属性。你必须包括 system.mvc

# c# - 使用实体框架的复杂关系映射

> ID：11172798
> 
> 赞同：0
> 
> 时间：2012-06-23T20:38:40.043
> 
> 标签：c#, database, entity-framework

我有这个数据库

```
Packages (packageID, package_name , .... )
PackageVariant (packageID, variantID)
Variant (variantID, variant_name, .... )
VariantProduct (variantID, productID, quantity)
Product (productID, product_name, .... ) 
```

我已经在实体框架中对其进行了建模，我不知道多重性，但它们应该基于以下：

一个包可以有无或多个变体
一个变体只能与一个包关联（不能是无或多个）
一个变体可以有一个或多个产品
产品与无或多个变体相关联

删除包时，必须删除该包的所有变体。
当一个变体被删除时，不需要删除其他任何东西。
删除产品时，需要删除与变体的所有关联。

如果您可以就多重性以及需要设置 OnDelete:Cascade 的位置提供帮助，那就太好了！

我还需要能够做到这一点：

```
var ptx = new MyEntities();
Variant newVariant = new Variant()
{
    setRelevantProperty = value
};
Product selectedProduct = ptx.Products.First(o => o.productID == productID);
newVariant.Products.Add(selectedProduct);
Package packageToAddVariantTo = ptx.Packages.First(o => o.packageID == packageID);
packageToAddVariantTo.Variants.Add(newVariant);
ptx.SaveChanges(); 
```

不会因为“没有插入、更新集”或其他任何依赖映射而出现错误。那么如何正确映射这个复杂的数据库会很好:)

我已经阅读了一些帖子，书籍，但似乎找不到答案。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T09:52:12.840

Lee O 得到了答案，为了读者清楚，我将把它作为答案而不是评论重新发布：

我不确定您的问题的答案，但我会提出 1 条建议，摆脱 PackageVariant 表。当您具有多对多关系时，您只需要这样的表。只需在变量表中添加一个名为 packageId 的列，并将其设置为包表的外键而不是 null。这将严格执行每个变体 1 个包的规则。但是每个包都没有多个变体。

谢谢李

# javascript - 使用 John Resig 的简单类模式的静态变量？

> ID：11172801
> 
> 赞同：6
> 
> 时间：2012-06-23T20:38:52.633
> 
> 标签：javascript, design-patterns

我指的是[这篇文章](http://ejohn.org/blog/simple-class-instantiation/)。

在其中，他定义了一个看起来像这样的函数：

```
function makeClass() {
    return function _class() {
        if(this instanceof _class) {
            if(typeof this.init === 'function') {
                this.init.apply(this, arguments);
            }
        } else {
            throw new Error('Constructor called as a function');
        }
    };
} 
```

然后你可以用它来做这样的事情：

```
var MyClass = makeClass();

MyClass.prototype = {
    init: function(width, height) { ... },
    clear: function(ctx) {... },
    draw: function(ctx) { ... }
} 
```

但现在我想初始化一些应该在所有实例之间共享的静态变量。我怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T21:06:36.137

好吧，最简单的方法是将静态变量定义为原型属性：

```
MyClass.prototype.xxx: 3, // ...
var t1 = new MyClass();
console.log(t1.xxx); // 3 
```

...但它不会像其他语言中的静态属性通常那样：

```
var t2 = new MyClass();
t2.xxx = 5;
console.log(t1.xxx); // still 3 :( 
```

另一种方法是利用属性也可能附加到函数的事实：

```
MyClass.xxx = 3; 
```

...但这会缩小我们使用此属性的方式（不能`t1.xxx`从前面的示例中调用它）。

不过，还有另一种方式。可以将静态属性定义为变量、方法的局部变量、`init`方法可访问的、定义的……在这个 init 方法中也是如此。） 像这样。

```
 init: function() {
      var xxx = 3;
      MyClass.prototype.getXXX = function() {
         return xxx;
      };
      MyClass.prototype.setXXX = function(newXXX) {
         xxx = newXXX;
      }
   } 
```

然后所有人都可以通过以下方式使用此属性：

```
 var t1 = new MyClass();
  var t2 = new MyClass();
  console.log(t1.getXXX()); // 3
  console.log(t2.getXXX()); // 3
  t1.setXXX(5);
  console.log(t1.getXXX()); // 5 now
  console.log(t2.getXXX()); // 5 as well, behold the power of closures! 
```

这是[一个使用的小提琴](http://jsfiddle.net/72Fm8/)。

更新：我想，当我们需要使用静态类数据的（某种）容器时，最好使用这种方法，该容器将由所有对象共享 - 但我们并不确切知道实际上可以是什么存放在这个容器中。然后我们只使用两个函数 -`getStatic`和`setStatic`- 通过字符串键或其他标识符来存储和检索数据。这似乎有点令人困惑，确实如此，但我认为这可能值得努力。)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-23T20:59:30.943

只需将其添加到`MyClass`自身。

```
MyClass.myVariable = 42; 
```

在 Java/C# 意义上，它并不是真正的静态，但会给您相同的效果。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-04T16:48:57.830

我通过使用命名约定“解决”了这个问题。

我想要`Class.extend({ })`语法的便利，但也想要一种在其中声明“静态”属性的方法。

我选择了一个前导下划线来声明一个静态属性，尽管你可以做任何你喜欢的事情。

用法：

```
var myClass = Class.extend({

    _staticProperty: 1337

    , instanceProperty: 'foo'
    , instanceMethod: function() { }

    , ctor: function() {
        this.base();
    }
}); 
```

注意我已经重命名`init`并`this._super()`来自原始代码

和代码：

```
/* Simple JavaScript Inheritance
 * Modified by Andrew Bullock http://blog.muonlab.com to add static properties
 * By John Resig http://ejohn.org/
 * MIT Licensed.
 */
// Inspired by base2 and Prototype
(function () {
    var initializing = false, fnTest = /xyz/.test(function () { xyz; }) ? /\bbase\b/ : /.*/;

    // The base Class implementation (does nothing)
    this.Class = function () { };

    // Create a new Class that inherits from this class
    Class.extend = function (prop) {
        var base = this.prototype;

        // Instantiate a base class (but only create the instance,
        // don't run the init constructor)
        initializing = true;
        var prototype = new this();
        initializing = false;

        // The dummy class constructor
        function Class() {
            // All construction is actually done in the ctor method
            if (!initializing && this.ctor)
                this.ctor.apply(this, arguments);
        }

        // Copy static properties from base
        for (var name in this) {
            if (name.substr(0, 1) == '_')
                Class[name] = this[name];
        }

        // Copy the properties over onto the new prototype
        for (name in prop) {
            // Check if we're overwriting an existing function
            if (typeof prop[name] == "function" && typeof base[name] == "function" && fnTest.test(prop[name])) {
                prototype[name] = (function(name, fn) {
                    return function() {
                        var tmp = this.base;

                        // Add a new .base() method that is the same method
                        // but on the super-class
                        this.base = base[name];

                        // The method only need to be bound temporarily, so we
                        // remove it when we're done executing
                        var ret = fn.apply(this, arguments);
                        this.base = tmp;

                        return ret;
                    };
                })(name, prop[name]);
            } else if (name.substr(0, 1) == '_') {
                Class[name] = prop[name];
            } else {
                prototype[name] = prop[name];
            }
        }

        // Populate our constructed prototype object
        Class.prototype = prototype;

        // Enforce the constructor to be what we expect
        Class.prototype.constructor = Class;

        // And make this class extendable
        Class.extend = arguments.callee;

        return Class;
    };
})(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-23T21:16:30.570

如果您不关心浏览器支持，您还可以使用`WeakMap`构造函数/静态属性对。这是想法：http: [//jsfiddle.net/DfNNU/2/](http://jsfiddle.net/DfNNU/2/)。这需要`MyClass.prototype.constructor`，您**不应该**丢弃它。因此，您需要添加回`constructor: MyClass`原型。

```
var statics = (function() {
    var map = new WeakMap;
    return function(inst) {
        var ctor = inst.constructor;
        return map.get(ctor) || map.set(ctor, {});
    };
})(); 
```

像这样使用它：

```
var a = function() {};
var b = function() {};

var inst1 = new a;
var inst2 = new a;
var inst3 = new b;

statics(inst1).foo = 123;
statics(inst3).foo = 456;

console.log( statics(inst1).foo );  // 123
console.log( statics(inst2).foo );  // 123
console.log( statics(inst3).foo );  // 456 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-03-29T00:11:43.127

我已经修改了 John Resig 的类，将父类的静态成员复制到新类中，它添加了以下内容：

```
 for (var name in this) {
        if (!Class[name]) {
            Class[name] = this[name];
        }
    } 
```

这是一个[小提琴](https://jsfiddle.net/mikehedman/0zzx33na/4)。

```
// This is a modified version of John Resig's simple inheritence class to add copying of static methods
// The new code is the for loop commented with "add in the static members"

/* Simple JavaScript Inheritance
 * By John Resig http://ejohn.org/
 * MIT Licensed.
 */
// Inspired by base2 and Prototype
(function(){
  var initializing = false, fnTest = /xyz/.test(function(){xyz;}) ? /\b_super\b/ : /.*/;

  // The base Class implementation (does nothing)
  this.Class = function(){};

  // Create a new Class that inherits from this class
  Class.extend = function(prop) {
    var _super = this.prototype;

    // Instantiate a base class (but only create the instance,
    // don't run the init constructor)
    initializing = true;
    var prototype = new this();
    initializing = false;

    // Copy the properties over onto the new prototype
    for (var name in prop) {
      // Check if we're overwriting an existing function
      prototype[name] = typeof prop[name] == "function" &&
        typeof _super[name] == "function" && fnTest.test(prop[name]) ?
        (function(name, fn){
          return function() {
            var tmp = this._super;

            // Add a new ._super() method that is the same method
            // but on the super-class
            this._super = _super[name];

            // The method only need to be bound temporarily, so we
            // remove it when we're done executing
            var ret = fn.apply(this, arguments);        
            this._super = tmp;

            return ret;
          };
        })(name, prop[name]) :
        prop[name];
    }

    // The dummy class constructor
    function Class() {
      // All construction is actually done in the init method
      if ( !initializing && this.init )
        this.init.apply(this, arguments);
    }

    // Populate our constructed prototype object
    Class.prototype = prototype;

    // Enforce the constructor to be what we expect
    Class.prototype.constructor = Class;

    //add in the static members
    for (var name in this) {
    		if (!Class[name]) {
		        Class[name] = this[name];
        }
    }

    // And make this class extendable
    Class.extend = arguments.callee;

    return Class;
  };
})();

function addText(text) {
    document.getElementById('greetings').innerHTML = document.getElementById("greetings").innerHTML + '<br>' + text;
}

//parent class with a prototype method and two static methods
var Parent = Class.extend({
  hello: function () {
    addText('parent.hello');
  }
});  
Parent.static = function() {
  addText('Parent.static');
}
Parent.overrideStatic = function() {
  addText('Parent.overrideStatic');
}

//child class that overrides one of the parent's static methods
var Child = Parent.extend();
Child.overrideStatic = function() {
  addText('Child.overrideStatic');
}

var parent = new Parent();
parent.hello();
Parent.static();

var child = new Child();
child.hello();   //should output parent.hello
Child.static();  //should output Parent.static
Child.overrideStatic();
```

```
<div id="greetings"></div>
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-08-01T23:51:07.283

在对“扩展”的调用中传入一个可选的静态成员列表。此方法将静态属性（如果有）添加到构造函数的“静态”属性。

**代码更改**

变化如下。这些行在“虚拟类构造函数”代码之后添加：

```
 if(staticProp) {
        Class.statics = [];
        for (var name in staticProp) {
            !Class.statics[name] && (Class.statics[name] = staticProp[name]);
        }
    } 
```

声明类型时添加了一个附加参数“staticProp”，以便在此阶段引入静态成员：

```
Class.extend = function(prop,staticProp) { 
```

可以在[这里](https://jsfiddle.net/moikaturns/xbx7q95a/ "这里")找到小提琴，包括一些测试。

**使用示例**

可以在类型声明时定义静态，就像使用第二个可选的构造函数参数一样：

```
var A = Class.extend({},{myStatic:1}); 
```

可以在实例方法中访问/定义静态：

```
var B = Class.extend({test:function(){B.statics.myStatic=2;}}); 
```

或从实例外部：

```
A.statics.myStatic=3; 
```

使用 requirejs 的示例：

将 Class.js 放在 baseUrl 文件夹中。示例新类定义。不必将新类的文件命名为与“var C”（即 C.js）相同的名称，但可能更好地提高可读性，因此类方法中对 C 名称的引用与对其静态成员的任何外部引用保持一致：

```
define(['Class'],function($) {
    var C = Class.extend({
        init: function(params){
            C.statics.myStatic++; // access static data
        }
    },{
        myStatic: 123
    });
    return C;
}); 
```

D.js 中的另一个类是指 C 类中的静态数据：

```
define(['Class', 'C'],function($,C) {
    var D = Class.extend({
        init: function(params){
            C.statics.myStatic++; // static data of another class
        }
    },{});
    return D;
}); 
```

# cassandra - 线性空间数据的 Cassandra 数据模型

> ID：11172802
> 
> 赞同：1
> 
> 时间：2012-06-23T20:38:53.750
> 
> 标签：cassandra, data-modeling, bioinformatics

我对 cassandra 及其数据模型比较陌生。我有一大组数据，这些数据由染色体上的位置（染色体：开始-结束）描述，我们有 24 条染色体，开始和结束是整数。我想支持的查询是查找基因组中与一组其他位置重叠的所有位置。如果没有其他想法，我可以创建一个简单的基于 R-tree 的“索引”方案，但我认为有人可能遇到了这个问题并想出了一个解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T21:49:33.400

由于您需要在 2 维上进行查询，因此您可以使用其他数据库（例如 mongodb）支持此类[地理空间索引/查询](http://www.mongodb.org/display/DOCS/Geospatial+Indexing)， 请参阅 Bounds Queries

在 Cassandra 中，我认为您能做的最好的事情是使用[geocell](http://code.google.com/p/javageomodel/) ( [doc](http://code.google.com/p/javageomodel/source/browse/trunk/geocell/src/test/java/com/beoui/utils/HowToUseGeocell.java) ) 或其他空间填充曲线

您将 start 和 end 转换为 geohash，对于您的每个数据，然后您将能够通过搜索 geohash 之间的地理单元来搜索边界框，从 [s1,s2] 开始并以 [e1,e2] 结束(s1, e1) 和 geohash(s2, e2) 给出边界框中的连续位置

# python - PyGObject Gtk.Entry 更改进度条颜色

> ID：11172804
> 
> 赞同：0
> 
> 时间：2012-06-23T20:39:18.590
> 
> 标签：python, gtk, pygobject

我想更改`Gtk.Entry`小部件进度条的颜色，但无法使用`Gtk.Widget.override_color()`. 我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T15:04:23.577

在 pygtk 中，您必须覆盖`GtkStyle`小部件的 。在这种情况下，`GtkProgressBar`条的颜色由其样式组件的`bg`属性决定。[来源](http://www.mail-archive.com/gtk-list@gnome.org/msg13864.html)`Gtk.STATE_PRELIGHT`

因此，您可以执行以下操作：

```
progress_bar.modify_bg(gtk.STATE_PRELIGHT, gtk.gdk.color_parse("blue")) 
```

我确信可以在 PyGObject 中应用类似的东西。

注意：您正在覆盖 Gtk 中的样式设置，这应该避免。样式和主题应留给最终用户，以满足他们自己的个人喜好。

# arrays - 通过成对递增整数的渐进循环

> ID：11172807
> 
> 赞同：0
> 
> 时间：2012-06-23T20:39:27.653
> 
> 标签：arrays

假设一个人想要搜索满足某个等式的整数对 x 和 ya，例如（在我的脑海中）7 x^2 + xy - 3 y^2 = 5

（我知道有非常有效的方法可以找到这样的二次方程的整数解；但这与本问题的目的无关。）

显而易见的方法是使用一个简单的双循环“for x = -max to max; for y = -max to max { blah}” 但是为了允许停止和恢复搜索，更方便的方法是描绘可能的整数x 和 y 作为平面中点的方格，是从原点向外围绕“方形螺旋”工作，在（例如）右上角开始和停止。

所以基本上，我要求一个简单而合理的“伪代码”用于循环分别在点 (m, m) 和 (n, n) 开始和停止这个过程。

对于额外的荣誉，如果读者倾向于，我建议如果 x 之一可以假设为非负数，或者两者都可以假设为非负数，我建议也提供循环。这可能更容易一些，尤其是第二个。

我可以毫不费力地自己解决这个问题，但我有兴趣看到其他人的巧妙想法。

对于那些喜欢用白板折磨候选人的可怕面试官来说，这将是一个很好的“建设性”面试挑战；-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T20:51:50.033

```
def enumerateIntegerPairs(fromRadius, toRadius):
    for radius in range(fromRadius, toRadius + 1):
        if radius == 0: yield (0, 0)
        for x in range(-radius, radius): yield (x, radius)
        for y in range(-radius, radius): yield (radius, -y)
        for x in range(-radius, radius): yield (-x, -radius)
        for y in range(-radius, radius): yield (-radius, y) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T21:22:16.090

这是一个简单的实现（也在[ideone](http://ideone.com/iuVaJ)上）：

```
void turn(int *dr, int *dc) {
    int tmp = *dc;
    *dc = -*dr;
    *dr = tmp;
}
int main(void) {
    int N = 3;
    int r = 0, c = 0;
    int sz = 0;
    int dr = 1, dc = 0, cnt = 0;
    while (r != N+1 && c != N+1) {
        printf("%d %d\n", r, c);
        if (cnt == sz) {
            turn(&dr, &dc);
            cnt = 0;
            if (dr == 0 && dc == -1) {
                r++;
                c++;
                sz += 2;
            }
        }
        cnt++;
        r += dr;
        c += dc;
    }
    return 0;
} 
```

实现中的关键是`turn`函数，它在给定一对`{delta-Row, delta-Col}`. 剩下的就是简单的算术。

# android - SherlockActivity 中的 MapView

> ID：11172809
> 
> 赞同：3
> 
> 时间：2012-06-23T20:39:38.123
> 
> 标签：android, android-mapview, actionbarsherlock

我的`MainActivity`扩展`SherlockActivity`以在 Android 版本较低的设备上实现操作栏。我想在 中显示一点`MapView`，`MainActivity`但显然我需要`MainActivity`扩展`MapActivity`：

> E/AndroidRuntime(2955)：原因：java.lang.IllegalArgumentException：MapViews 只能在 MapActivity 的实例中创建。

`MapView`是从 xml 文件中膨胀而来的。

我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T20:53:32.293

您可能会为 ActionBarSherlock 安装地图插件并使用它。[请参阅http://actionbarsherlock.com/download.html](http://actionbarsherlock.com/download.html)的“Google 地图”部分。

# jquery - JQuery：提交时不起作用

> ID：11172811
> 
> 赞同：10
> 
> 时间：2012-06-23T20:39:42.837
> 
> 标签：jquery

我正在尝试捕获所有表单提交事件，从 action 属性获取 url 并使用它使用 AJAX 将表单的内容发送到该地址。所以我需要的只是一个提交事件处理程序。但是我很快就遇到了麻烦，因为它似乎无法在 IE 中工作。

```
$(document).submit(function(e) {
        alert('clicked');
        e.preventDefault();
    }); 
```

这是我用于跨浏览器测试目的的代码。它可以在 Chrome、Firefox 中完美运行，但在 IE 中却不行。我不允许在文档上设置事件侦听器吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-23T20:46:05.000

看看 jQuery API：

> JavaScript 提交事件不会在 Internet Explorer 中冒泡。但是，从 jQuery 1.4 开始，依赖事件委托和 submit 事件的脚本将在浏览器中一致地工作，这已经规范了事件的行为。( [api.jquery.com/submit](http://api.jquery.com/submit/) )

该`submit`事件不会在 Internet Explorer 中冒泡，因此该`document`元素永远不会收到`submit`事件通知。jQuery 会为您标准化，但前提是您使用事件委托。这并不难做到，实际上可能会使您的代码更好，如果它有更多的复杂性：

```
$(document).on('submit', 'form', function(e) {
    alert('clicked');
    e.preventDefault();
}); 
```

这保留了绑定到的优势`document`（例如捕获尚不存在的元素上的事件），同时使其在 IE 中成为可能。请注意`this`，在事件处理程序中，现在是`form`元素，而不是`document`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-23T20:42:08.793

将侦听器附加到您的表单

```
$("form").submit(function(e) {
        alert('clicked');
        e.preventDefault();
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-23T20:42:16.933

关于什么：

```
$("form").submit(function(e) {
    alert('clicked');
    e.preventDefault();
}); 
```

# windows - 套接字 - 从服务器接收到答案后发送更多数据

> ID：11172813
> 
> 赞同：0
> 
> 时间：2012-06-23T20:40:09.737
> 
> 标签：windows, winapi, sockets, winsock

我有一个客户端/服务器应用程序。客户端向服务器发送一个问题并接收一个答案。

这很好用——但是当我再次尝试使用同一个套接字发送另一个问题时（不关闭套接字——在收到答案后），服务器没有得到第二个问题。

这是发送和接收答案的代码（这应该在某种循环中工作）：

```
char* buf = "GET /count.htm HTTP/1.1\r\nHost: 127.0.0.1:666\r\nAccept: text/html,application/xhtml+xml\r\nAccept-Language: en-us\r\nAccept-Encoding: gzip, deflate\r\nUser-Agent: Mozilla/5.0\r\n\r\n";

int nBytesToSend= strlen(buf);
int iPos=0;

while(nBytesToSend)
{
    int nSent=send(hClientSocket,buf,nBytesToSend,0);
    assert(nSent!=SOCKET_ERROR);

    nBytesToSend-=nSent;
    iPos+=nSent;
}

//prepare buffer for incoming data
char serverBuff[256];
int nLeft=sizeof(serverBuff);
iPos=0;

do //loop till there are no more data
{
    int nNumBytes=recv(hClientSocket,serverBuff+iPos,nLeft,0);

    //check if cleint closed connection
    if(!nNumBytes)
        break;

    assert(nNumBytes!=SOCKET_ERROR);

    //update free space and pointer to next byte
    nLeft-=nNumBytes;
    iPos+=nNumBytes;

}while(1); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T01:10:17.550

使用此代码，您不可能*发送*第二个问题，因为您永远无法退出读取回复的循环（除非您因为偏移量溢出缓冲区而导致分段违规，或者当对等方关闭连接时，在这种情况下你不能发送，他也不能接收）。

仅仅断言没有错误是不够的。如果您遇到错误，您需要查看错误并做出相应的反应。至少你需要打印它。

# apple-touch-icon - 苹果触摸icon.png

> ID：11172815
> 
> 赞同：1
> 
> 时间：2012-06-23T20:40:24.767
> 
> 标签：apple-touch-icon

我无法让我的 iphone 4s 使用我为正在开发的移动网站制作的 apple-touch-icon。

```
<link rel="apple-touch-icon-precomposed" sizes="150x150" href="apple-touch-icon.png"> 
```

那是在我的标题中。

# javascript - 一个人停止打字后如何调用函数？

> ID：11172816
> 
> 赞同：5
> 
> 时间：2012-06-23T20:40:47.327
> 
> 标签：javascript, html

我在一个 HTML 页面上有一个输入，一个人会在其中输入一些东西，而我想要的是每次他们停止输入时调用一个函数。我知道 onkeypress 事件，但每次输入字符时都会调用它。这是我想要的一个例子：

1.  人员在输入中键入“这是一个测试”
2.  该人停止打字后，应调用函数 foo()
3.  人员在输入中键入其他内容
4.  该人停止打字后，应调用函数 foo()
5.  重复....

这可能吗？

非常感谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-23T20:45:06.030

听 onkeyupevent。开始超时（您必须将“停止”定义为某个时间量，否则它将在每次按键时调用），并在超时时执行您的函数。

如果在计时器运行时调用 onkeydown，请停止它。

就像是...

```
var timer;

function onKeyUpHandler(e){
    timer = setTimeout("foo()", 500)    
}

function onKeyDownHandler(e) {
    clearTimeout(timer);
} 
```

这段代码的具体外观取决于您在何处以及如何使用它......只是为了展示如何做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T20:48:24.257

首先，捕获“key up”事件，并将“stoppedTyping”变量设置为 true。然后设置一个计时器（在将其视为“停止输入”事件之前要等待多长时间）。

如果在计时器关闭之前，您捕获了“按键按下”事件，请设置“stoppedTyping=false”

当计时器到期时，您的计时器回调可以检查“stoppedTyping”的值。如果它是真的，那么用户已经停止输入（或者更准确地说，在你的计时器期间没有输入任何新字符）。如果它是假的，那么他们并没有停止输入——当你的计时器运行时，他们必须至少再输入一个字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T20:49:10.833

如果我理解得很好，“停止打字”的意思是“在一定时间内没有击键”。在这种情况下，您必须使用计时器：http: [//jsfiddle.net/xnghR/1/](http://jsfiddle.net/xnghR/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-23T20:45:09.477

只需设置一个 javascript 计时器即可在 onKeyPress 上启动/重新启动。然后只需定义多长时间定义“停止输入”并运行您的脚本。

# jquery - 有没有办法为 Scrollorama 添加缓动？

> ID：11172820
> 
> 赞同：0
> 
> 时间：2012-06-23T20:41:43.907
> 
> 标签：jquery, easing

有没有办法为下面的 Scrollorama 效果添加缓动，这样它就不会在屏幕上上下晃动？

谢谢

```
 $().ready(function() {
                var scrollorama = $.scrollorama({ blocks:'#wrapper' });
            scrollorama.animate('.work_dots',{ delay: 200, duration: 1100, property:'top', start:-700, end:100 });
            }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T10:21:48.673

是的。它有一个`easing`属性，可以添加到传递给的配置对象`.animate()`

# ios - 如何将 UITableView 静态单元格设置为自定义高度？

> ID：11172827
> 
> 赞同：9
> 
> 时间：2012-06-23T20:42:39.353
> 
> 标签：ios, xcode, uitableview, row-height

我有一个带有静态单元格的 UITableView，我试图在满足条件时更改单元格的高度。条件得到满足，但单元格高度不会改变。

我正在使用的代码是

```
[self.tableView setRowHeight:10]; 
```

和

```
self.tableView rowHeight = 10; 
```

这些都不会改变单元格的行高是否有另一种方法来改变它们？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-23T20:46:18.977

您需要在 tableview 的 .m 中实现以下委托方法：

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    return customTableCellHeight;
} 
```

然后改变customTableCellHeight的值：

```
if (condition) {
    customTableCellHeight = 80; // or whatever
} 
```

当您的表格单元格高度需要更改时（例如条件更改时，您需要调用

```
 [self.tableView reloadData]; //This calls heightForRowAtIndexPath for all cells 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-09T03:05:23.823

你可以将它用于tableview的所有行

```
override func tableView(tableView: UITableView, estimatedHeightForRowAtIndexPath indexPath: NSIndexPath) -> CGFloat {
      return 100
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-19T09:42:26.353

您可以创建具有文本高度的动态单元格，然后您可以在表格视图中设置静态和动态单元格

这是带有文本的动态单元格的链接 [如何在 UITableView 静态单元格中动态更改单元格高度](https://stackoverflow.com/questions/25420980/how-to-change-cell-height-dynamically-in-uitableview-static-cell)

# perl - 如何在 Perl 中使用 HTTP::Async 一次发出 25 个请求？

> ID：11172831
> 
> 赞同：6
> 
> 时间：2012-06-23T20:43:11.570
> 
> 标签：perl, http, asynchronous

我正在做很多 HTTP 请求，我选择了 HTTP::Async 来完成这项工作。我有超过 1000 个请求要发出，如果我只是执行以下操作（请参见下面的代码），很多请求在处理时就会超时，因为处理到达它们可能需要数十分钟：

```
for my $url (@urls) {
    $async->add(HTTP::Request->new(GET => $url));
}
while (my $resp = $async->wait_for_next_response) {
    # use $resp
} 
```

所以我决定每次做 25 个请求，但是我想不出用代码来表达它的方法。

我尝试了以下方法：

```
while (1) {
    L25:
    for (1..25) {
        my $url = shift @urls;
        if (!defined($url)) {
            last L25;
        }
        $async->add(HTTP::Request->new(GET => $url));
    }
    while (my $resp = $async->wait_for_next_response) {
        # use $resp
    }
} 
```

然而，这并不能很好地工作，因为它现在太慢了。现在它一直等到所有 25 个请求都已处理完毕，直到它添加另外 25 个请求。因此，如果还剩下 2 个请求，它什么也不做。我必须等待处理所有请求以添加下一批 25。

在处理记录的同时，我如何改进这个逻辑`$async`来做一些事情，同时还要确保它们不会超时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T21:33:40.763

如果`wait_for_next_response`由于正在执行其他代码而不能足够快地调用，最简单的解决方案是通过将代码移动到单独的执行线程来使代码可中断。但是，如果您要开始使用线程，为什么要使用 HTTP::Async？

```
use threads;
use Thread::Queue::Any 1.03;

use constant NUM_WORKERS => 25;

my $req_q = Thread::Queue::Any->new();
my $res_q = Thread::Queue::Any->new();

my @workers;
for (1..NUM_WORKERS) {
   push @workers, async {
      my $ua = LWP::UserAgent->new();
      while (my $req = $req_q->dequeue()) {
         $res_q->enqueue( $ua->request($req) );
      }
   };    
}

for my $url (@urls) {
   $req_q->enqueue( HTTP::Request->new( GET => $url ) );
}

$req_q->enqueue(undef) for @workers;

for (1..@urls) {
   my $res = $res_q->dequeue();
   ...
}

$_->join() for @workers; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T04:02:20.687

你很接近，你只需要结合这两种方法！:-)

未经测试，因此将其视为伪代码。特别是我不确定是否`total_count`是正确的使用方法，文档没有说。您也可以在添加请求和收到响应时设置一个`$active_requests`计数器。`++``--`

```
while (1) {

   # if there aren't already 25 requests "active", then add more
   while (@urls and $async->total_count < 25) {
       my $url = shift @urls;
       $async->add( ... );
   }

   # deal with any finished requests right away, we wait for a
   # second just so we don't spin in the main loop too fast.
   while (my $response = $async->wait_for_next_response(1)) {
      # use $response
   }

   # finish the main loop when there's no more work
   last unless ($async->total_count or @urls);

} 
```

# windows-phone-7 - 增加后台应用程序的内存限制

> ID：11172832
> 
> 赞同：0
> 
> 时间：2012-06-23T20:43:15.300
> 
> 标签：windows-phone-7

Windows Phone 7 为后台应用程序提供 6 MB 内存。我怎样才能增加这个限制？

我正在使用带有最新更新的 WP 7.1.1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T20:47:36.650

Windows Phone 对后台代理有非常严格的规定。因此，除非您在互操作解锁后修改注册表，否则无法超越此限制。

# bash - 在循环中使用 ssh 执行脚本

> ID：11172836
> 
> 赞同：3
> 
> 时间：2012-06-23T20:44:01.810
> 
> 标签：bash, ssh

我正在尝试编写一个脚本，其中我有一个循环来登录到多台远程机器并在每台机器内执行一个脚本。这是一个例子：

```
for ((j=1; j < 2; j++)); do 

  mchname="n"$j

  ssh -T $mchname <<'ENDSSH'    
    ./run_script < input > output &    
  ENDSSH

done 
```

每当我尝试执行上述脚本时，我都会得到：“警告：第 37 行的此处文档由文件结尾分隔（需要 `ENDSSH'）”

我是 ssh 的新手，所以我确信我犯了一个愚蠢的错误。谁能建议我一个解决方案？谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-23T20:46:44.140

你的 bash 脚本有问题。heredoc 结束标记（脚本中的 ENDSSH）不能缩进。

试试这个：

```
 ssh -T $mchname <<'ENDSSH'    
    ./run_script < input > output &    
ENDSSH
# ^ no indentation for that line 
```

**编辑：**

此外，您可以通过将命令作为参数传递给 ssh 在远程系统上运行命令，而不是将其作为标准输入提供。该命令将由用户的远程 shell 执行：

```
ssh -T $mchname './run_script < input > output &' 
```

# eclipse - Subversive Eclipse 根本无法提交；可能已经完成了整个项目

> ID：11172837
> 
> 赞同：1
> 
> 时间：2012-06-23T20:44:03.003
> 
> 标签：eclipse, svn, commit, subversive

我的 Java 项目在 Eclipse Indigo 中使用 SVN 时遇到了可怕的问题。

我不是业余爱好者，也不是专业程序员，但我听说版本控制系统对于严肃的项目有多么重要，我认为是时候学习如何使用它了。

现在我发现我无法承诺，无论我尝试什么。根据我所做的事情，我会遇到不同的错误。

我怀疑问题是由于我在“项目”>“属性”>“重构历史”中检查了“在项目文件夹而不是工作区中保留项目重构历史”框引起的，但我不确定。但是自从我这样做后，我收到一条错误消息，提示“svn: Path '.settings' not present”错误。我再次尝试，取消选中 .settings/org.eclipse.ltk.core.refactoring.prefs 框。这次我在尝试提交时遇到了另一个错误，“路径'gamecore'不存在”。（'gamecore' 是项目中的一个根级包，我将大部分类放在其中，直到它们可以移动到更合适的地方。）

我尝试了几种摆弄我已更改的项目首选项的排列方式，并在尝试提交时取消选中某些文件。都失败了。

无奈之下，我将我更改为文本文件的源文件剪切 n' 粘贴，恢复到我以前的版本，然后将新版本剪切 n' 粘贴到旧版本之上。这次我得到“svn: File '/Space Game/.refactorings' is out of date”。

所以我处于一个位置，无论我做什么，我都无法承诺。在这一点上，我正在考虑删除整个存储库并从我的工作区导入（我之前不小心删除了项目时所做的事情，认为存储库中有重复项。）

我在网上搜索了我遇到的错误，我发现的所有线程似乎都假设比我拥有更多的版本控制知识。大多数包括我无权访问的 bash shell 命令。

我的问题是：1）这是最好的行动方案吗？2）还有另一种不那么激烈的恢复方式吗？3）如何防止此错误再次发生？

我将 Eclipse Indigo 与 Subversive SVN Connectors 2.2.2、Subversive SVN Team Provider 0.7.9 和 SVNKit 1.3.5 Implementation 2.2.2 一起使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T20:53:15.293

这是因为您将 eclipse 元数据检查到源代码管理中，然后通过更改这些设置来移动它。

1.  因此，首先进行更新以获取元文件。如果您观看 svn 控制台，您会看到如下内容：`Restoring FILENAME`
2.  在您将它们取回并假设您的项目仍设置为将元数据放在单独的文件夹中之后，您可以对它们执行 svn delete 并提交删除。
3.  在所有 Eclipse 元数据上设置 svn:ignore，即：
    *   。项目
    *   .settings
    *   .buildpath
    *   .重构

如果我是你，我会关闭 eclipse 并从命令行执行所有这些操作，这样它就不会混淆。：

```
cd /path/to/project/root
svn up
svn rm .project .settings .buildpath .refactorings
svn commit .project .settings .buildpath .refactorings -m "Deleting eclipse metadata."
svn propedit svn:ignore .
# this will open an editor ignored files are one per line  so your file should look like
# the following without the "#" signs
#
# .project
# .settings
# .buildpath
# .refactorings

svn commit . -m "Adding ignores to eclipse metadata files." 
```

# c# - 在多线程环境中回收内存 - 并行任务

> ID：11172840
> 
> 赞同：0
> 
> 时间：2012-06-23T20:45:01.227
> 
> 标签：c#, multithreading, memory-leaks, garbage-collection, task

我目前正在开发一个小型模拟实用程序，使用任务并行库来提高生成结果的速度。模拟本身是一项长期的、cpu 密集型的工作，它基本上由数千个运行具有不同变量的模拟的较小工作组成。

但是，每个任务使用的资源直到一切都完成后才会释放，如果使用了足够多的变量，就会导致内存泄漏和内存不足异常。在每个任务结束时强制 GC 会释放资源，但我的理解是这需要中断所有线程才能执行，因此导致接近单线程性能！

如何在这样的长时间操作中释放资源？

在这种情况下，“资源”指的是双打数组……其中很多。

```
public List<AnalysisTask> Questions; //Each variable combination is added as a Q

//Create a task for each simulation
Task<SimulationResults>[] tasks = new Task<SimulationResults>[Questions.Count]; 
foreach(var q in Questions)
{
    AnalysisTask temp = q
    tasks[taskCount] = Task.Factory.StartNew((t) =>
             {
                var result = EvaluateRules(temp);
                if(reults.Value > Leader[0].Value)
                    Leader[0] = result;
                else
                {
                    result.Dispose();
                    //This releases resources but interrupts threads
                    //GC.Collect(2, GCCollectionMode.Forced); 
                    return null;
                }
                return result;

             }
}

//Completion task
Task.Factory.ContinueWhenAll(tasks, (ant) =>
       {
          DoSomethingWithAnswer(Leader[0]);
       } 
```

也许我在设置任务时采取了错误的方法？我将不胜感激任何建议或方向:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T22:07:36.420

您当前的实现有几个问题。一个是当与 进行交换时`Leader[0]`，前一个领导者的引用丢失并且永远不会被释放。这可能是您的内存泄漏的根源。第二个是比较和赋值`Leader[0]`不是原子完成的。有可能有这样的事件序列：线程 1`Leader[0]`与 a`result.Value`的 1 比较并为真，线程 2 与 a 的 2 比较`Leader[0]`并为真`result.Value`，线程 2 写入`Leader[0]`，线程 1 写入`Leader[0]`。结果是`Leader[0]`最大值为 2 时的值为 1。

因此，如果我们正确处理引用，您可能不需要强制进行垃圾收集。`Leader`下面的代码通过在修改和存储对前一个的引用时锁定来解决这些问题`Leader[0]`。然后处置未使用的结果或先前的领导者。大概`EvaluateRules`需要一些时间，所以不应该有太多的锁争用。

```
tasks[taskCount] = Task.Factory.StartNew(() =>
     {
        var result = EvaluateRules(temp);

        var toBeDisposed = result;
        lock(Leader) // should be locking on a private object
        {
           if (result.Value > Leader[0].Value)
           {
             toBeDisposed = Leader[0];
             Leader[0] = result;
           }
        }

        toBeDisposed.Dispose();       

     }); 
```

此外，您是否需要`result`从每项任务中返回？你似乎只需要`Leader[0]`你的延续任务。通过返回`result`，您将存储一个在任务本身被 gc'd 之前无法 gc'd 的引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T20:56:23.813

垃圾收集不会停止您的整个过程。请参阅[此处](https://stackoverflow.com/questions/2583644/difference-between-background-and-concurrent-garbage-collection)了解更多信息。

如果您必须调用 GC（或您的进程终止），并且如果 GC 确实会损害您的性能（您不太可能一直执行 GC *）*，您总是可以将模拟分成几个进程（不要使用进程当然，每个线程，但每个 X 线程可以属于一个进程）。

不过，我不得不承认，您的内存管理可能有问题，但您需要提供更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T20:56:48.007

如果数组是恒定大小，或者可以定义最大大小，或者可以定义一组大小范围，您可以在启动时创建这些数组的池，或者在运行期间建立一个大小数组列表池. 然后就不需要解除分配数组 - 只需将它们重新池化以供以后重复使用。一组 BlockingCollection[sizeRange] 队列将作为池。

# java - 使用 SimpleXML 序列化时如何保留列表中元素的顺序？

> ID：11172842
> 
> 赞同：3
> 
> 时间：2012-06-23T20:45:09.257
> 
> 标签：java, serialization, android-2.3-gingerbread, preserve, simple-framework

我想使用 SimpleXML 序列化一个列表，以便以后可以再次反序列化它。我需要保留元素的顺序，或者至少每次序列化它时都达到相同的顺序，这样我就可以对它进行排序，比如简单地保留反序列化的列表。

顺序很重要，因为它是一个地理点列表，用于在地图上绘制路径，并作为实际行进的路径。如果不保留顺序，路径将毫无意义。

我不需要使用 SimpleXML，但我已经在使用它来反序列化其他东西，并且除了保留顺序之外的所有内容都已经工作，所以我想避免学习使用另一个序列化程序执行此操作的开销。此外，SimpleXML 适用于 Android 2.3.3，这是必须的，因为它适用于 Android 应用程序。

我知道Android附带的解析器和序列化器，我实际上使用了解析器，但我还没有对序列化器做任何事情，所以如果有一种简单的方法可以实现我需要的东西，那将再次产生相当大的开销使用 SimpleXML。

请注意，我说的是保留**列表中元素的顺序**，而不是保留有标签的类的元素，与我的相比，这似乎是一个相当普遍的问题。

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T21:00:43.517

订单被保留（您只需用 注释它`@ElementList`），如以下示例所示：

```
import java.util.Arrays;
import java.util.List;

import org.simpleframework.xml.ElementList;
import org.simpleframework.xml.Root;
import org.simpleframework.xml.core.Persister;

public class SimpleXMLTest {

    public static void main(final String[] args) throws Exception {
        Persister persister = new Persister();

        ModelClass model = new ModelClass(Arrays.asList("Item1", "Item2", "Item3"));

        persister.write(model, System.out);
    }
}

@Root
class ModelClass {

    @ElementList
    private List<String> list;

    public ModelClass() {
    }

    public ModelClass(final List<String> list) {
        super();
        this.list = list;
    }

    public List<String> getList() {
        return list;
    }

} 
```

输出将是：

```
<modelClass>
   <list class="java.util.Arrays$ArrayList">
      <string>Item1</string>
      <string>Item2</string>
      <string>Item3</string>
   </list>
</modelClass> 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-10T14:00:34.093

使用 org.simpleframework.xml.Order 注解，在这里可以指定元素和属性的顺序。

# java - 为什么这段代码不能运行？

> ID：11172845
> 
> 赞同：0
> 
> 时间：2012-06-23T20:45:44.203
> 
> 标签：java

Ultra java noob 在这里，我敢肯定它可能是一个愚蠢的错误。有人关心纠正我吗？

```
public class Test1 {

/**
 * @param args the command line arguments
 */
public static void main(String[] args) {
    // TODO code application logic here
int n = 4;

public void f(int n){
 System.out.print(n);
 if(n<=1)
  return;
  else{
      f(n/2);
      f(n/2);
      }
   }
 } 
```

我收到此错误：

```
Exception in thread "main" java.lang.RuntimeException:
Uncompilable source code - illegal start of expression at the
public void f(int n) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T20:48:47.220

结构需要有点不同，试试这个方法：

```
public class Test {

    public static void main(final String[] args) {
        f(4);
    }

    public static void f(final int n) {
        System.out.print(n);
        if (n <= 1) {
            return;
        } else {
            f(n / 2);
            f(n / 2);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-23T20:47:17.673

您不能在 Java 的方法中声明方法。你`}`之前错过了某个地方`public void f(int n)`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T20:47:28.907

做这个：

```
public static void main(String[] args)
{
    // TODO code application logic here
    int n = 4;

    f(n);  
}

public void f(int n)
{
    System.out.print(n);

    if( n <= 1)
    {
      return;
    }
    else
    {
        f(n/2);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-23T20:53:29.553

因为对于编译器，您的代码看起来像这样

```
public class Test1 {

    public static void main(String[] args) {
        int n = 4;

        public void f(int n) {
            System.out.print(n);
            if (n <= 1)
                return;
            else {
                f(n / 2);
                f(n / 2);
            }
        }
    } 
```

所以它有2个错误

1）您正在尝试在方法（`f`内部`main`）中创建方法

2)`}`下课时不

# c# - 我需要读取一个 CSV 文件并将它们拆分为每列的不同数组

> ID：11172857
> 
> 赞同：0
> 
> 时间：2012-06-23T20:47:00.597
> 
> 标签：c#, windows, csv

我有一个非常大的数据文件，大约有 60000 行。我需要将基于列的 CSV 文件拆分为每列的不同数组。

我有 5 列；`State, County, Zipcode, Latitude, Longitude`.

当我读取文件时，我将如何拆分它并将它们按顺序添加到每个数组中？

我会有一个`State, County, Zipcode, Latitude`, 和的数组`Longitude`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T20:48:57.887

使用 CSV 解析器 - .NET 有很多，甚至是命名空间中的内置解析器`VisualBasic`。

看[`TextFieldParser`](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.fileio.textfieldparser.aspx)- 虽然在`VisualBasic`命名空间中，它是一个常规的 .NET 库，可以被任何 .NET 语言使用。

还有[很多](http://www.codeproject.com/Articles/9258/A-Fast-CSV-Reader) [其他](http://www.codeproject.com/Articles/86973/C-CSV-Reader-and-Writer) [选择](http://www.filehelpers.com/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T21:16:07.280

如果您想手动执行（我也建议使用`TextFieldParser`），您可以使用 a`StreamReader`循环所有行并使用`String.Split`分隔符拆分（假设逗号）：

```
var stateList = new List<String>();
var countyList = new List<String>();
var zipCodeList = new List<String>();
var latitudeList = new List<String>();
var longitudeList = new List<String>();

using (var reader = new System.IO.StreamReader(@"C:\Temp\csv.txt"))
{
    string line;
    while ((line = r.ReadLine()) != null)
    {
        var fields = line.Split(new Char[] { ',' }, StringSplitOptions.RemoveEmptyEntries);
        stateList.Add(fields[0]);
        if (fields.Length > 1)
            countyList.Add(fields[1]);
        if (fields.Length > 2)
            zipCodeList.Add(fields[2]);
        if (fields.Length > 3)
            latitudeList.Add(fields[3]);
        if (fields.Length > 4)
            longitudeList.Add(fields[4]);
    }
} 
```

如果你真的需要一个数组而不是一个列表：

```
String[] states = stateList.ToArray();
String[] counties = countyList.ToArray();
String[] zipCodes = zipCodeList.ToArray();
String[] latitudes = latitudeList.ToArray();
String[] longitudes = longitudeList.ToArray(); 
```

# java - 我如何在java play中检索通过post传递的数据

> ID：11172861
> 
> 赞同：2
> 
> 时间：2012-06-23T20:47:27.363
> 
> 标签：java, playframework, playframework-2.0

这是我需要检索在 POST 中发送的数据的代码：

```
@play.db.jpa.Transactional
public static Result registered(String fullname, String email, String password, String username) {
    if(fullname.isEmpty()){
        return badRequest("<p>fehlerhafte eingabe!</p>").as("text/html");
    } else {
    User user = new User();
        user.fullname = fullname;
        user.email = email;
        user.password = password;
        user.username = username;
        user.save();

    }

    String success = "Successful registered!";
    return ok(register.render(success));

} 
```

这是我的用户类：

```
public class User extends Model {
private static final long serialVersionUID = 1L;
public String fullname;
@Email
public String email;
@Required(message="Username erforderlich!")
public String username;
@Transient @Required
public String password;

public User(){}

public User(String username, String password, String fullname, String email) {
    this.username = username;
    this.password = password;
    this.email = email;
    this.fullname = fullname;
    } 
```

这是我的html：

```
 <form method="post" action="@routes.Application.registered()">
            <p id="login_panel">@success</p>
            fullname: <input type="text" name="fullname" id="fullname" value=""/>
            email: <input type="text" name="email" id="email" value=""/>
            username: <input type="text" name="username" id="username" value=""/>
            password: <input type="password" name="password" id="password" value=""/>
            <button type="submit">Register</button>
   </form> 
```

这是我的路线：

```
POST     /registered                controllers.Application.registered() 
```

什么是 WSRequest？这可以成为我问题的线索吗？

我很感激任何帮助！谢谢，谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T20:55:05.980

您“注册”的操作不需要任何参数。

这些参数在请求中提供，您将使用[内置的表单绑定](http://www.playframework.org/documentation/2.0.1/JavaForms)来获取它们：

```
public static Result registered(String fullname, String email, String password, String   username) {

    User user =  form(User.class).bindFromRequest().get();
    ....
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T20:55:17.633

您需要检查控制器类代码。您应该在调用的控制器方法中将所有字段名称作为参数。然后你可以在你的申请中使用这些文件。

# linux - 在 linux 任务调度程序中，sheduler_tick() 在哪里调用？

> ID：11172867
> 
> 赞同：0
> 
> 时间：2012-06-23T20:48:12.010
> 
> 标签：linux, load-balancing, scheduling

最近我在玩 linux 任务调度程序。

现在想了解一下任务调度器和CFS算法的负载均衡机制。首先，我在调用`__schedule()`函数`idle_balance(cpu, rq)`中发现如果当前运行队列为空，它会尝试做一些负载平衡。

然后我还在`core.c`文件中发现了一个`scheduler_tick()`似乎定期调用的函数，更新 rq 和其他数据结构并进行负载平衡（调用函数`trigger_load_balance(rq, cpu)`）。我对吗？但如何`scheduler_tick()`工作？计时器在哪里？我知道 CFS 不是基于刻度的。所以可能在启动后创建了一个计时器，它会`scheduler_tick()`定期调用？

这似乎是一个幼稚的问题，但我现在是 linux 系统的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T20:51:23.547

它由系统计时器每隔一段时间生成的中断请求触发。[1](http://www.informit.com/articles/article.aspx?p=414983&seqNum=2)

# prolog - 处理序言中的错误

> ID：11172869
> 
> 赞同：1
> 
> 时间：2012-06-23T20:48:36.753
> 
> 标签：prolog, visual-prolog

```
/**************************
Assignment Statment Module
**************************/
assgnStmnt(Clist) :-
        Clist = [H|T], id(H), conc(Exp, [';'|AnotherStmnt], T), Exp = [Op|Rem], Op = '=', expr(Rem), assgnStmnt(AnotherStmnt),!
        ;
        Clist = [], !. 
```

此代码用于解析编译器中的赋值语句。但是我需要向用户输出他的代码中的语法错误在哪里。

比如：如果他输入：x = x + 1，我想输出预期的';' 未找到。

我怎样才能做到这一点 ？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T08:12:36.760

从技术上讲取决于您的*语法*，但如果我们假设您已经知道*错误产生*的位置，您可以这样编码：

```
assgnStmnt(Clist) :-
    Clist = [H|T],
    id(H),
    conc(Exp, [StmntSep|AnotherStmnt], T),
    Exp = [Op|Rem],
    Op = '=',
    expr(Rem),
    expected(StmntSep, ';'), % the right position depends on grammar
    assgnStmnt(AnotherStmnt),
    !
    ; Clist = [].

expected(Token, Token) :- !.
expected(Wrong, Token) :-
    format('expected ~w, found ~w~n', [Token, Wrong]),
    fail. % fail here depends on error recovery strategy 
```

测试：

```
?- assgnStmnt([x,=,x+1,';',x,=,x+1,';']).
true.

?- assgnStmnt([x,=,x+1,';',x,=,x+1]).
expected ;, found x
expected ;, found =
expected ;, found x+1
false. 
```

# python - Pymedia 视频编码失败

> ID：11172871
> 
> 赞同：1
> 
> 时间：2012-06-23T20:48:50.607
> 
> 标签：python, video, pygame, codec

我在 Windows XP 中使用 Python 2.5。我正在尝试使用此功能将 pygame 图像列表制作成视频文件。我在互联网上找到了该功能并对其进行了编辑。它起初工作，然后停止工作。这是它打印出来的：

```
Making video...
Formating 114 Frames...
starting loop
making encoder
Frame 1 process 1
Frame 1 process 2
Frame 1 process 2.5 
```

这是错误：

```
Traceback (most recent call last):
  File "ScreenCapture.py", line 202, in <module>
    makeVideoUpdated(record_files, video_file)
  File "ScreenCapture.py", line 151, in makeVideoUpdated
    d = enc.encode(da)
pymedia.video.vcodec.VCodecError: Failed to encode frame( error code is 0 ) 
```

这是我的代码：

```
def makeVideoUpdated(files, outFile, outCodec='mpeg1video', info1=0.1):
    fw = open(outFile, 'wb')
    if (fw == None) :
        print "Cannot open file " + outFile
        return
    if outCodec == 'mpeg1video' :
        bitrate= 2700000
    else:
        bitrate= 9800000
    start = time.time()
    enc = None
    frame  = 1
    print "Formating "+str(len(files))+" Frames..."
    print "starting loop"
    for img in files:
        if enc == None:
            print "making encoder"
            params= {'type': 0,
          'gop_size': 12,
          'frame_rate_base': 125,
          'max_b_frames': 90,
          'height': img.get_height(),
          'width': img.get_width(),
          'frame_rate': 90,
          'deinterlace': 0,
          'bitrate': bitrate,
          'id': vcodec.getCodecID(outCodec)
        }
            enc = vcodec.Encoder(params)
            # Create VFrame
            print "Frame "+str(frame)+" process 1"
            bmpFrame= vcodec.VFrame(vcodec.formats.PIX_FMT_RGB24,
                                img.get_size(), 
                                # Covert image to 24bit RGB
                                (pygame.image.tostring(img, "RGB"), None, None)
                                )
        print "Frame "+str(frame)+" process 2"
        # Convert to YUV, then codec
        da = bmpFrame.convert(vcodec.formats.PIX_FMT_YUV420P)
        print "Frame "+str(frame)+" process 2.5"
        d = enc.encode(da) #THIS IS WHERE IT STOPS
        print "Frame "+str(frame)+" process 3"
        fw.write(d.data)
        print "Frame "+str(frame)+" process 4"
        frame += 1
    print "savng file"
    fw.close() 
```

有人能告诉我为什么我有这个错误以及如何解决它吗？files 参数是 pygame 图像列表，outFile 是路径，outCodec 是默认值，info1 不再使用。

**更新 1** 这是我用来制作 pygame 图像列表的代码。

```
from PIL import ImageGrab
import time, pygame
pygame.init()
f = [] #This is the list that contains the images
fps = 1
for n in range(1, 100):
    info = ImageGrab.grab()
    size = info.size
    mode = info.mode
    data = info.tostring()
    info = pygame.image.fromstring(data, size, mode)
    f.append(info)
    time.sleep(fps) 
```

# c++ - 使用 ffmpeg 编码为 .MP4 的问题

> ID：11172876
> 
> 赞同：1
> 
> 时间：2012-06-23T20:49:34.247
> 
> 标签：c++, ffmpeg, libavcodec, mpeg-4, libavformat

所以我对此有点陌生，我正在编写一个将视频录制为 .AVI 的 WIN32 应用程序，然后我计划使用 ffmpeg 编码为 .MP4。根据我找到的样本，我做到了这一点。它编译并说它对文件进行了编码和编写，但输出文件无法打开和播放。我尝试像原始样本一样使用 MPEG1 编码，但它只会给我奇怪的颜色几秒钟。

我是否遗漏了应该对文件执行的操作？

任何在编码/ffmpeg 方面有经验的人，一些指示、建议或帮助都会让我非常感激。提前致谢！

```
int _tmain(int argc, _TCHAR* argv[])
{

    AVFormatContext *pFormatCtx;
    int codec_id = CODEC_ID_MPEG4;
    char filename [] ="C:\\wav\\test2.flv";
// Open video file
     AVCodec *codec;
     AVCodecContext *c= NULL;
     int i, out_size, x, y, outbuf_size;
    FILE *f;
     AVFrame *picture;
    uint8_t *outbuf;
     int had_output=0;

    av_register_all();
   printf("Encode video file %s\n", filename);

    codec = avcodec_find_encoder(CODEC_ID_H264);
    if (!codec) {
         fprintf(stderr, "codec not found\n");
        exit(1);
    }

    c = avcodec_alloc_context3(codec);
    picture= avcodec_alloc_frame();

   /* put sample parameters */
   c->bit_rate = 40000;
   //c->bit_rate_tolerance=30;
     /* resolution must be a multiple of two */
    c->width = 352;
    c->height = 288;
    /* frames per second */

    c->time_base.den=  25;
    c->time_base.num= 1;
     c->gop_size = 10; /* emit one intra frame every ten frames */
   c->max_b_frames=1;
     c->pix_fmt = PIX_FMT_YUV420P;

    if(codec_id == CODEC_ID_H264)
        av_opt_set(c->priv_data, "preset", "slow", 0);
/* open it */
    if (avcodec_open2(c, codec, NULL) < 0) {
        fprintf(stderr, "could not open codec\n");
       exit(1);
    }

     f = fopen(filename, "wb");
     if (!f) {
        fprintf(stderr, "could not open %s\n", filename);
         exit(1);
     }

    /* alloc image and output buffer */
    outbuf_size = 100000 + 12*c->width*c->height;
     outbuf = (uint8_t*)malloc(outbuf_size); //CHANGED

     /* the image can be allocated by any means and av_image_alloc() is
      * just the most convenient way if av_malloc() is to be used */
    av_image_alloc(picture->data, picture->linesize,
                   c->width, c->height, c->pix_fmt, 1);

     /* encode 1 second of video */
     for(i=0;i<25;i++) {
         fflush(stdout);
         /* prepare a dummy image */
        /* Y */
         for(y=0;y<c->height;y++) {
            for(x=0;x<c->width;x++) {
                picture->data[0][y * picture->linesize[0] + x] = x + y + i * 3;
            }
         }

        /* Cb and Cr */
        for(y=0;y<c->height/2;y++) {
            for(x=0;x<c->width/2;x++) {
                picture->data[1][y * picture->linesize[1] + x] = 128 + y + i * 2;
                picture->data[2][y * picture->linesize[2] + x] = 64 + x + i * 5;
            }
        }

         /* encode the image */
        out_size = avcodec_encode_video(c, outbuf, outbuf_size, picture);
         had_output |= out_size;
        printf("encoding frame %3d (size=%5d)\n", i, out_size);
        fwrite(outbuf, 1, out_size, f);
     }

     /* get the delayed frames */
     for(; out_size || !had_output; i++) {
         fflush(stdout);

        out_size = avcodec_encode_video(c, outbuf, outbuf_size, NULL);
        had_output |= out_size;
         printf("write frame %3d (size=%5d)\n", i, out_size);
       fwrite(outbuf, 1, out_size, f);
     }

     /* add sequence end code to have a real mpeg file */
     outbuf[0] = 0x00;
     outbuf[1] = 0x00;
     outbuf[2] = 0x01;
   outbuf[3] = 0xb7;
     fwrite(outbuf, 1, 4, f);
     fclose(f);
        fclose(p);
    free(outbuf);

     avcodec_close(c);
     av_free(c);
     av_free(picture->data[0]);
    av_free(picture);
     printf("\n");

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T21:39:33.213

你不是在写`.MP4`，`.flv`也不是`AVI`文件。您正在编写没有任何容器的原始 H.264 视频流。大多数玩家无法播放它，但它适用于 ffplay 和 mplayer。

它似乎按预期工作。它编码了 25 帧奇怪的颜色渐变。虽然，由于比特率低，它可能看起来像一些垃圾。

您需要做的就是将此流放入某个容器中，使用`libavformat`. 并且，提供一些真实的视频帧进行编码。

# ios - 将数组附加到文本视图的文本字段时，Objective-C 崩溃

> ID：11172877
> 
> 赞同：0
> 
> 时间：2012-06-23T20:50:07.710
> 
> 标签：ios, objective-c, nsstring, uitextview

虽然我曾在 Java、C 和 C++ 中工作过，但我对 Objective-C 还是比较陌生，而且我还在学习 Objective-C。

我有一个套接字、一个接收数据函数和一个文本视图。当数据进来时，我想将它附加到文本视图中。现在我的 textview 在开始时有一些预填充的文本。如果在每次调用接收数据的数据中，我只获取文本视图的当前文本，将其附加到自身中`nsstring`：

```
 NSString *oldtext = [mTextViewAlias text];
 NSString *toSend = [oldtext stringByAppendingString: oldtext]; 
```

然后将文本视图设置为`toSend`，它工作正常，我看到数据在我的文本视图中增长。

问题是，我想附加：

```
 UInt8 buffer[len]; // which has data from the socket. len is set to amount of data on each call of receive data as follows
 int len = CFDataGetLength(df); 
```

我一直在尝试做的是将缓冲区转换为 a`nsstring`并追加。例如：

```
NSString *newdata = [NSString stringWithUTF8String: buffer]; 
```

我突然想到缓冲区可能不会以`'\0'`字符终止，所以我什至创建了一个名为 char 的新缓冲区`newbuffer[len+1];`并将缓冲区复制到其中并添加 a`\0`作为最后一个字符。

我可以在第一次传递新数据时追加第一次，但第二次追加，追加到之前总是崩溃之前将缓冲区中的字符追加到文本的内容。

我在哪里做了一个小技巧`if len > 10 assign buffer[10]='\0'`。它实际上让我在第三次崩溃之前抓取了两次数据。

看来我有两个问题之一，我不知道如何解决它。一个是我只能抓取缓冲区中的数据，并且这些`nsstring`数据取决于它，当我在接收数据时更改缓冲区时，再次调用它会导致崩溃。或者也许它仍然是一个问题，`'\0'`虽然我不知道如何仍然不在那里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T21:21:07.480

尝试这样的事情：

```
NSMutableData *buffer = [[NSMutableData alloc] init];
[buffer appendBytes:aCArray length:lengthOfaCArray];
NSString *newdata = [[NSString alloc] initWithData: buffer encoding:NSASCIIStringEncoding];

//When your finished with newdata and buffer, dont forget to release it
//This might be done automatically if you have Automatic Reference Counting (ARC) on
[newdata release];
[buffer release]; 
```

[此处](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/doc/uid/20000154-BAJJAICE)编码类型的完整参考。不能保证这会有效，因为我是从 Windows 机器上编写这段代码的，并且在 Apple 的开发人员网站上打开了几个选项卡。但应该可以帮助您朝着正确的方向前进。

# android - 如何找出在 Eclipse (Android) 中抛出异常的行

> ID：11172891
> 
> 赞同：0
> 
> 时间：2012-06-23T20:52:47.587
> 
> 标签：android, eclipse, exception, line

我有一个 ClassCastException 被抛出，说我正在尝试将 SeekBar 转换为 Button，但我已经查看了 50 次代码，并且没有一次尝试将 SeekBar 转换为 Button。我怎样才能找出这个明显的类误投在哪一行？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T20:56:48.053

该信息在 LogCat 中可用。有关如何使用它的详细信息，请参阅[此链接。](http://www.appaholics.in/using-the-logcat/)

如果你确定你没有做这样的演员，然后通过运行`ant clean`（命令行）清理项目，或者去`Project -> Build -> Clean`（eclipse）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T20:57:42.820

插入一个断点并简单地单步执行，直到我遇到触发异常的行。

# java - java - 如何阻止语句执行直到previuos在java中完成？

> ID：11172892
> 
> 赞同：0
> 
> 时间：2012-06-23T20:53:01.923
> 
> 标签：java, multithreading, logging

我有两行：

```
 display.print(x); // outputs a collection contenet
   LOG.info("Total word count is completed."); 
```

第一行中的方法调用从集合中打印出一堆数据。但是在它的打印和完成之前，日志语句被执行。所以输出看起来像：

```
...   
a : 6
as : 6
23/06/2012 09:38:01 م sample.testing
INFO: Processing... 0 thread(s) has/have finished
book : 6
had : 6
... 
```

但是只有在打印完所有数据后才能打印日志。为什么会这样？以及如何解决？

那是打印方法：

```
 public void print(Map<String, Integer> map)
{
    for (Map.Entry<String, Integer> current : map.entrySet())
    {
        System.out.println(String.format("%s : %d", current.getKey(), current.getValue()));
    }
    System.out.println();
} 
```

编辑 2：我传递 `ThreadClass.getCol()` 给 print 方法。`ThreadClass.getCol()`从 ThreadClass 返回一个集合，其中许多线程更新此集合。它是同步的，我正在返回它的副本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T20:54:57.260

大概`outputter.print`会触发一个线程（或者可能是多个线程），该线程/正在异步写入`System.out`（或您的文本输出要去的任何地方）。

解决这个问题的方法是等到这些线程完成所有工作。由于您尚未向我们展示该方法的代码，因此我无法真正帮助您！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T21:04:42.293

如果@Oli Charlesworth 是正确的，并且`outputter.print()`触发了一个线程，我们将需要查看该代码并找出如何等待它返回。

另一种可能性是它`outputter.print()`没有做任何花哨的事情，但是两个不同的线程同时调用此代码。在这种情况下，最简单的解决方法是同步此代码。例如，如果它在一个方法中：

```
public **synchronized** void outputterPrint() {
   outputter.print(x); // outputs a collection contenet
   // you might want to add some sort of flush here
   outputter.flush();

   LOG.info("Total word count is completed.");
} 
```

如果此代码被称为技能次，则存在性能问题。但是对于不频繁的呼叫，这是安全且简单的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T21:05:07.893

outputter.print 触发启动进程或线程。如果 outputter.print(x) 返回一个进程，您可以使用 .waitFor() 等待结束。但它没有足够的信息来回答你的问题。如果准备好了，也许有一种方法可以告诉您。如果你想做一个肮脏的把戏，使用 `Thread.currentThread().sleep(1000)`

但这不是一个好的解决方案

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-23T21:06:27.980

在您的打印语句之后尝试对输出器执行刷新操作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-24T10:16:48.243

有一个多线程问题，虽然我不确定为什么你没有放置你的整个代码。您可以通过“获取”适当的线程并添加 NotifyAll() 然后通过等待此通知来执行另一个线程来弄脏您的手。

**或者**你可以把你的

```
LOG.info("Total word count is completed."); 
```

在您的 print (...) 方法结束时。

**如果您想为您的原始问题*“如何阻止语句执行直到 previuos 在 java 中完成？”，请发表***评论。****

# wcf - 您如何实现应该为所有方法调用的基本方法？

> ID：11172897
> 
> 赞同：2
> 
> 时间：2012-06-23T20:54:10.320
> 
> 标签：wcf, oop, c#-4.0

我有产品服务。在每次调用服务时，我都想调用一个方法。在这种情况下，我正在记录。我正在寻找一种方法，而不是在每个方法中都写 using 语句。但我仍然希望在每次通话时都进行日志记录。我该怎么做呢？

```
 public class ProductService : IProductService
{
    public IList<Product> GetProductsByBrand(int BrandID)
    {
        using (new Logging())
        {
            // Get a list of products By Brand
        }
        return new List<Product>();
    }

    public IList<Product> Search(string ProductName)
    {
        using (new Logging())
        {
            // Search
        }
        return new List<Product>();
    }

    public static string OrderProducts(IList<Order> Orders, Payment paymentDetials)
    {
        string AuthCode;
        using (new Logging())
        {
            // Order and get the AuthCode
        }
        AuthCode = "";
        return AuthCode;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T21:19:48.303

你听说过 AOP（面向方面​​编程）吗？这是一种将横切关注点实现为可重用方面的方法，这些方面围绕目标类型进行包装，并在它们包装的方法之前或之后执行额外的处理。

[http://en.wikipedia.org/wiki/Decorator_pattern](http://en.wikipedia.org/wiki/Decorator_pattern)

在 WCF 环境中，这通常通过将“行为”应用于您的服务类来完成。在这种情况下，我建议使用实现 IParameterInspector 的属性的 IOperationBehavior 接口，以便在创建和调用服务实例之前查看参数。这是一篇有用文章的链接，该文章更深入地介绍了扩展 wcf 消息管道的选项。

[http://msdn.microsoft.com/en-us/magazine/cc163302.aspx](http://msdn.microsoft.com/en-us/magazine/cc163302.aspx)

```
//Attribute class
public class LogOperationBehavior : Attribute, IOperationBehavior, IParameterInspector {

public void AddBindingParameters(OperationDescription operationDescription, System.ServiceModel.Channels.BindingParameterCollection bindingParameters) {
    return;
}

public void ApplyClientBehavior(OperationDescription operationDescription, System.ServiceModel.Dispatcher.ClientOperation clientOperation) {
    //clientOperation.ParameterInspectors.Add(new ClientParameterInspector());            
}

public void ApplyDispatchBehavior(OperationDescription operationDescription, System.ServiceModel.Dispatcher.DispatchOperation dispatchOperation) {
    dispatchOperation.ParameterInspectors.Add(this);
}

public void Validate(OperationDescription operationDescription) {
    return;
}

#region IParameterInspector Members

public void AfterCall(string operationName, object[] outputs, object returnValue, object correlationState) {
   //perform logging after
}

public object BeforeCall(string operationName, object[] inputs) {
    //perform logging before
    return null;
}

#endregion 
```

}

```
 public class BusinessOperation : IBusinessOperation {

    //Apply to your service via an attribute
    [LogOperationBehavior]
    public DivideResponse DivideTwoNumbers(DivideRequest dr) {            
        return new DivideResponse() {
            Answer = dr.Numerator/ dr.Demoninator2,              
        };
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T22:53:02.607

您是否考虑过创建日志代理？它看起来像这样：

```
public class LoggingProductService : IProductService
{
    private readonly IProductService _core;

    public LoggingProductService(IProductService core)
    {
        _core = core;
    }

    public IList<Product> GetProductsByBrand(int BrandID)
    {
        Log("Getting products for brand " + BrandId);
        return _core.GetProductsByBrand(BrandId);
    }

    //other IProductService methods here, all logging and delegating to _core

    private void Log(string message)
    {
        using (var log = new Logging())
        {
            log.Write(message);
        }
    }
} 
```

当然，我并不完全理解你的 Logging 界面，所以用正确的代码填写适当的猜测。你也可能不想经常创建和处理日志，我不知道。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T03:29:28.943

您可以创建动态代理。有关说明，请参阅本文。 [http://www.drdobbs.com/windows/184405378](http://www.drdobbs.com/windows/184405378)

# c# - 学习使用数据库 - 从 Web 到桌面应用程序

> ID：11172901
> 
> 赞同：1
> 
> 时间：2012-06-23T20:54:53.877
> 
> 标签：c#, database, visual-studio-2010

作为 Web 开发人员，我有使用 MySQL 的经验。我也有一些桌面应用程序的经验，但我从来不需要一个数据库。现在我想为我创建一个简单的桌面应用程序，我想在 Visual Studio C# 中制作它。我知道我可以在 C# 中使用数据库，但是我有一些菜鸟问题，到目前为止我浏览过的教程都没有回答这些问题。

显然有更多的解决方案，对于旨在使用词汇学习新语言的简单应用程序，您会推荐什么？

数据库对于应用程序安装意味着什么？我可以保持简单，这样我就可以在其他计算机上运行应用程序而无需安装更多的东西来让数据库工作吗？

我将不胜感激一些教程或开始时的建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T20:59:09.260

如果它是一个简单的应用程序，您可以使用[Microsoft SQL CE](http://en.wikipedia.org/wiki/SQL_Server_Compact)数据库 - CE 意味着精简版。然后，您可以在任何计算机上安装该应用程序，只需将随附的数据库文件放在您选择的目录中，就可以了。不涉及数据库服务器，因此在部署应用程序时它非常轻巧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T20:58:54.797

找到一个问题有点困难，但我想我找到了一个 - 你问的是如何使用应用程序安装数据库。

如果您的应用程序的每个用户都看到她自己的数据副本，并且没有共享，那么 MySQL 可能是一个矫枉过正的做法。你应该看看[SQLite](http://code.google.com/p/csharp-sqlite/)。根本没有安装。

# iphone - iPhone Dev - 在 Temple Run 中创建一次性 UIAlertView

> ID：11172904
> 
> 赞同：2
> 
> 时间：2012-06-23T20:55:00.433
> 
> 标签：iphone, real-time, uialertview

您知道即使您不更新应用程序，当您打开应用程序时，Temple Run 有时也会出现警报？我知道如果您要向您的应用程序提交更新，您将如何实现这一点，但是 Imangi 如何在不发布应用程序新版本的情况下实现新警报？（我假设他们是从某个服务器上传的，但我是所有这些东西的业余爱好者，所以有人可以含糊地解释我该怎么做吗？我需要学习互联网编程语言吗：O？）

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T22:10:46.600

我同意乔纳森的观点。我会在您的服务器上设置一个带有参考号的 plist。它看起来像这样。我使用的是概念，而不是代码。就像将它托管在您的服务器上一样简单。或者它可能像您在您的网站上创建一个用户界面一样复杂，该界面允许您插入信息，它会为您创建 plist。

```
-(void)checkanddisplaynotificationbasedonupdatedplistontheserver{

  int currentnotificationnumber = userprefs preference for item "notification"

  get and parse notification.plist from your server
  notificationnumber = object at index 0
  if notificationnumber > currentnotificationnumber{
  display your notification with parsed plist
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T21:28:46.073

您可以在线托管一个 plist，将一系列警报存储为字典，并具有“标题”、“正文”等属性。然后应用程序将解析它并创建一个警报。然后，您可以设置一个方法，在每次应用打开并连接时搜索此文件的更新。

这不是唯一的方法 - 可能还有数百种其他文件类型/自动化系统可供使用，但这是一种简单的方法，以及它们大致如何工作，我已经在我的一些应用程序中实现了类似的东西。希望这会有所帮助，如果您对编码没有任何帮助，我将很乐意提供帮助！

乔纳森

# django - 如何摆脱 django-social-auth 的 facebook 重定向中的#_=_？

> ID：11172910
> 
> 赞同：14
> 
> 时间：2012-06-23T20:55:39.117
> 
> 标签：django, facebook, django-socialauth

django-social-auth`/mypage#_=_`在使用 Facebook 后端时将我重定向到。

当我在前端使用 jquery mobile 时，我不能接受。

我在 facebook 开发者网站上找到： [https ://developers.facebook.com/blog/post/552/。](https://developers.facebook.com/blog/post/552/)

> 会话重定向行为的变化
> 
> 本周，当该字段留空时，我们开始向 redirect_uri 添加片段#_=_。请确保您的应用可以处理此行为。

所以我尝试`SOCIAL_AUTH_LOGIN_REDIRECT_URL`在 django-social-auth 设置中设置为“非空白”。没运气

那么，如何摆脱散列呢？

非常感谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-24T06:16:32.547

好吧，这可能不是确切的解决方案，但是将以下脚本添加到您的头部将有助于解决问题：

```
<script type="text/javascript">
   if (window.location.hash == '#_=_') {
      window.location.hash = '';
   }
</script> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-01-20T00:26:38.433

看起来 Facebook 总是附加“#_=_”，即使提供了 redirect_uri。由于此行为与 Facebook 的[博客文章](https://developers.facebook.com/blog/post/552/)相反，因此此功能已作为[错误](https://developers.facebook.com/x/bugs/318390728250352/)提交给 Facebook 。Facebook 已对此错误提供了官方回应，声称附加“#_=_”是一项防止潜在安全漏洞的设计功能。

Facebook 为处理不需要的 uri 片段提供了以下建议，“如果担心生成的 URL 的美学或客户端行为，则可以使用 window.location.hash（甚至是服务器端您自己的重定向）以删除有问题的字符。”

上面提供的 javascript 似乎是一个有效的解决方案，即使它有点 hacky。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-12T14:05:25.953

```
<script type="text/javascript">
    if (window.location.href.indexOf('#') > -1) {
        window.location.href = '/';
    }
</script> 
```

# iphone - jQuery 在移动 Safari/iOS 上检测页面底部

> ID：11172917
> 
> 赞同：6
> 
> 时间：2012-06-23T20:56:35.623
> 
> 标签：iphone, scroll, detect

我基本上想要与 facebook、twitter 和所有其他“无限”滚动网站相同的功能，我目前使用的代码是

```
jQuery(document).ready(function(){
    $ = jQuery;
        $(window).scroll(function(){
            if ($('.iosSlider').is(':visible'))
            {
                if($(window).scrollTop() + $(window).height() == $(document).height())
                {
                $.get('/our-work/fakework.php', function(data) {
                $('#mobile-thumbs').append(data);
                });
                }
             }
        });
}); 
```

这在所有桌面浏览器上都可以完美运行，甚至在我的黑莓上，有时它在发送向下滚动按钮后也可以正常工作。

然而，它在 iphone 或 ipad 上都没有被检测到，我认为这与它的视口有关，但谁知道呢。

我尝试使用视口高度方法

```
<meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0"> 
```

但这似乎也没有解决它！

所以请有人分享一些关于如何检测iDevices页面底部的信息！

谢谢！！

欧文

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-23T21:33:34.903

经过多年的调试，我发现

```
if($(window).scrollTop() + $(window).height() == $(document).height()) 
```

从来没有真正遇到过，好吧，它已经遇到过，但是移动 safari 似乎没有运行任何 javascript，而视口正在移动。

这意味着，除非您完全在文档高度上停止滚动（没有弹性底部），否则它很不可能等于相同的高度。

所以我只是将代码更改为而不是等于相同的高度，以检查它是否相等或更高，这样即使它已经滚动过去，它也会触发！

所以修复在下面

```
if($(window).scrollTop() + $(window).height() >= $(document).height()){ 
```

所以修改后的代码现在看起来像

```
jQuery(document).ready(function(){
    $ = jQuery;
        $(window).scroll(function(){
            if ($('.iosSlider').is(':visible'))
            {
                if($(window).scrollTop() + $(window).height() >= $(document).height())
                {
                $.get('/our-work/fakework.php', function(data) {
                $('#mobile-thumbs').append(data);
                });
                }
             }
        });
}); 
```

它现在就像一个魅力！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-07-02T08:50:21.427

完全工作的多浏览器和多设备兼容的解决方案：

```
function getDocumentHeight() {
return Math.max(
    Math.max(document.body.scrollHeight, document.documentElement.scrollHeight),
    Math.max(document.body.offsetHeight, document.documentElement.offsetHeight),
    Math.max(document.body.clientHeight, document.documentElement.clientHeight)
);
} 
```

进而....

```
$(window).scroll(function() {
     var docHeight = getDocumentHeight();
     if($(window).scrollTop() + window.innerHeight == docHeight)
                 {
                      // enter your code here
                 }
        }); 
```

也不要忘记视口元数据：

```
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1"> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-28T01:50:08.990

我遇到过同样的问题。该代码片段在桌面上运行良好，但在 iOS 移动设备上运行良好。更换后`document`问题`body`就解决了。此外，最好检查您是否靠近屏幕底部：

```
if($(window).scrollTop() + $(window).height() > $('body').height() - 200) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-09T08:51:31.847

此解决方案适用于所有设备：

```
window.onscroll = function() {
  var d = document.documentElement;
  var offset = d.scrollTop + window.innerHeight;
  var height = d.offsetHeight;

  console.log('offset = ' + offset);
  console.log('height = ' + height);

  if (offset >= height) {
    console.log('at the bottom');
  }
} 
```

# javascript - 将击键事件保存到电子表格+计时

> ID：11172918
> 
> 赞同：1
> 
> 时间：2012-06-23T20:56:39.870
> 
> 标签：javascript, keycode

作为我大学论文的一部分，我正在尝试测试几种不同类型的数字输入键盘界面的可用性。为此，我需要记录我的参与者所做的每次按键以及每次按键的时间。仅仅记录他们在表单上提交的内容是不够的，因为我需要监控他们看到并纠正了多少错误。我希望以某种方式将此信息写入 .csv/电子表格，以便在实验后进行分析。

我的主管建议为此创建一个网页并使用 javascript，但不幸的是我是一个初学者。我的知识仅限于 HTML。有人可以帮助我或建议一个我可以找到有关此主题的更多信息的地方吗？在过去的几天里，我一直在网上搜索，但运气不佳。本质上，我想在此示例中执行类似[http://javascript.info/tutorial/keyboard-events#test-stand-test-stand](http://javascript.info/tutorial/keyboard-events#test-stand-test-stand)的操作，只是将其写入计算机上的外部文件并包含时间按键。

非常感谢，

一个绝望的学生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T21:01:52.437

您不能将 JavaScript 直接写入文件。您可以改为将数据发送到服务器，以将`.csv`格式的文件保存到指定位置。或者，您可以以易于复制到 Excel 的格式输出数据。

我建议设置一个`Node.js`服务器并使用`jQuery`+`AJAX`通过`POST`请求将数据发送到您的服务器，然后在服务器上保存一个`.csv`文件。

# c++ - std::mutex 会创建栅栏吗？

> ID：11172922
> 
> 赞同：31
> 
> 时间：2012-06-23T20:56:49.217
> 
> 标签：c++, multithreading, mutex, memory-barriers, memory-model

如果我锁定一个`std::mutex`，我总是会得到一个内存围栏吗？我不确定它是否暗示或强制您获得围栏。

更新：

在 RMF 的评论之后找到此参考资料。

[多线程编程和内存可见性](http://en.wikipedia.org/wiki/Memory_barrier#Multithreaded_programming_and_memory_visibility)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-23T21:10:11.533

据我了解，这包括在：

**1.10 多线程执行和数据竞争**

**第 5 段：**

> 该库定义了许多原子操作（第 29 条）和互斥体上的操作（第 30 条），它们被特别标识​​为同步操作。这些操作在使一个线程中的分配对另一个线程可见方面起着特殊的作用。一个或多个内存位置上的同步操作是消耗操作、获取操作、释放操作或获取和释放操作。没有关联内存位置的同步操作是栅栏，可以是获取栅栏、释放栅栏，或者同时是获取栅栏和释放栅栏。此外，还有非同步操作的宽松原子操作，以及具有特殊特性的原子读-修改-写操作。[注：例如，获取互斥锁的调用将对包含互斥锁的位置执行获取操作。相应地，释放相同互斥锁的调用将对这些相同位置执行释放操作。非正式地，在 A 上执行释放操作会强制其他内存位置上的先前副作用对稍后在 A 上执行消费或获取操作的其他线程可见。“放松”原子操作不是同步操作，尽管，像同步操作一样，他们不能为数据竞赛做出贡献。——尾注] 在 A 上执行释放操作会强制其他内存位置上的先前副作用对稍后在 A 上执行消费或获取操作的其他线程可见。“宽松”原子操作不是同步操作，尽管与同步操作一样，它们不能有助于数据竞赛。——尾注] 在 A 上执行释放操作会强制其他内存位置上的先前副作用对稍后在 A 上执行消费或获取操作的其他线程可见。“宽松”原子操作不是同步操作，尽管与同步操作一样，它们不能有助于数据竞赛。——尾注]

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-23T21:02:56.327

解锁互斥锁与锁定互斥锁*同步。*我不知道编译器有哪些实现选项，但你会得到与栅栏相同的效果。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-05-25T13:22:35.243

如果 M 由不同的线程共享并且它们执行这些操作，则对特定互斥锁 M 的互斥锁操作（锁定或解锁）仅对与同步或内存可见性相关的任何目的有用。**本地定义且仅由一个线程使用的互斥锁不提供任何有意义的同步。**

[注意：我在这里描述的优化可能不是由许多编译器完成的，它们可能会将这些互斥锁和原子同步操作视为无法优化（甚至不应该优化以保持代码生成的可预测性）的“黑匣子” ，以及一些特定的模式，这是一个虚假的论点）。如果零编译器在更简单的情况下进行优化，我不会感到惊讶，但毫无疑问它们是合法的。]

编译器可以很容易地确定某些变量从未被多个线程（或任何异步执行）使用，特别是对于未获取地址的自动变量（也未对其进行引用）。这样的对象在这里被称为“线程私有”。（所有用于寄存器分配的自动变量候选者都是线程私有的。）

对于线程私有互斥体，不需要为锁定/解锁操作生成有意义的代码：没有原子比较和交换，没有围栏，并且通常根本不需要保持状态，除了“安全互斥体”的情况，其中递归锁定的行为是明确定义的并且应该失败（要使序列`m.lock(); bool locked = m.try_lock();`工作，您需要至少保持一个布尔状态）。

对于任何线程私有原子对象也是如此：只需要裸非原子类型并且可以执行正常操作（因此 fetch-add 1 成为常规后增量）。

这些转换是合法的原因：

*   显而易见的观察结果是，如果仅通过线程或并行执行访问对象（它们甚至不被异步信号处理程序访问），那么在汇编中使用非原子操作无论如何都无法检测到
*   不太明显的评论**是，任何使用线程私有同步对象都暗示没有排序/内存可见性**。

所有同步对象都被指定为线程间通信的工具：它们可以保证一个线程中的副作用在另一个线程中是可见的；它们导致明确定义的操作顺序不仅存在于一个线程中（一个线程的操作执行顺序），而且存在于多个线程中。

一个常见的例子是发布具有原子指针类型的信息：

共享数据为：

```
atomic<T*> shared; // null pointer by default 
```

发布线程执行以下操作：

```
T *p = new T;
*p = load_info();
shared.store(p, memory_order_release); 
```

消费线程可以通过加载原子对象值来检查数据是否可用，作为消费者：

```
T *p = shared.load(memory_order_acquire);
if (p) use *p; 
```

（这里没有定义等待可用性的方法，这是一个简单的例子来说明发布值的发布和消费。）

发布线程只需要在完成所有字段的初始化后设置原子变量即可；内存顺序是一个释放，以传达内存操作已完成的事实。

其他线程只需要一个获取内存命令来“连接”释放操作（如果有的话）。如果该值仍然为零，则线程对世界一无所知，获取无意义；它无法对其采取行动。（当线程检查指针并看到一个空值时，共享变量可能已经被更改了。这并不重要，因为设计者认为该线程中没有值是可管理的，或者它会执行操作按顺序排列。）

所有原子操作都旨在减少锁定，也就是说，无论其他线程正在做什么，即使它们被卡住，也可以在很短的有限时间内完成。这意味着您不能依赖另一个线程完成工作。

在线程通信原语谱的另一端，互斥锁不包含可用于在线程之间传输信息的值 (*)，但它们确保一个线程只能在另一个线程之后进入 lock-ops-unlock 序列已经完成了他自己的锁定-操作-解锁序列。

(*) 甚至不是布尔值，因为特别禁止在线程之间使用互斥体作为一般布尔信号（= 二进制信号量）

互斥锁总是与一组共享变量一起使用：受保护的变量或对象 V；这些 V 用于在线程之间传递信息，互斥体使线程之间对这些信息的访问有序（或序列化）。用技术术语来说，除了第一个互斥锁（在 M 上）操作对之外的所有操作对与 M 上的先前解锁操作：

*   M 的锁是对 M 的获取操作
*   M 的解锁是对 M 的释放操作

锁定/解锁的语义是在单个 M 上定义的，所以让我们停止重复“on M”；我们有线程 A 和 B。B 的锁定是与 A 的解锁配对的获取。这两个操作一起形成线程间同步。

[如果一个线程经常锁定 M 并且经常重新锁定 M 而同时没有任何其他线程作用于 M 呢？没什么有趣的，获取仍然与发布配对，但是 A = B 所以什么都没有完成。解锁是在同一个执行线程中排序的，因此在这种特殊情况下它是没有意义的，但一般来说，一个线程无法判断它是没有意义的。它甚至不是语言语义的特殊情况。]

同步发生在作用于互斥体的线程集 T 之间：保证没有其他线程能够查看这些 T 执行的任何内存操作。请注意，实际上在大多数真实计算机上，一旦内存修改命中缓存，如果所有CPU检查相同的地址，所有CPU都会通过缓存一致性的力量查看它。但是 C/C++ 线程 (#) 不是根据全局一致的缓存来指定的，也不是根据在 CPU 上可见的顺序来指定的，*因为编译器本身可以假设非原子对象不会被程序以任意方式改变，而无需同步*（CPU 不能假设任何这样的事情，因为它没有原子与非原子内存位置的概念）。**这意味着您所针对的 CPU/内存系统提供的保证通常不适用于 C/C++ 高级模型。**您绝对不能将普通的 C/C++ 代码用作高级程序集；只有在你的代码中加入 volatile （几乎无处不在），你才能模糊地接近高级汇编（但不完全）。

(#) “C/C++ 线程/语义”*不是*“C/C++ 编程语言线程语义”：C 和 C++ 基于相同的同步原语规范，这并不意味着存在 C/C++ 语言）

由于互斥操作对 M 的影响**只是**序列化了使用 M 的线程对某些数据的访问，因此很明显其他线程看不到任何影响。**用技术术语来说，*同步*关系是在使用相同同步对象**（该上下文中的互斥体，原子使用上下文中的相同原子对象）的线程之间。

即使编译器以汇编语言发出内存栅栏，它也不必假设解锁操作会在解锁之前对集合 T 之外的线程进行更改。

这允许分解线程集以进行程序分析：如果程序并行运行两组线程 U 和 V，并且创建 U 和 V 使得 U 和 V 无法访问任何公共同步对象（但它们可以访问常见的非原子对象），那么您可以从线程语义的角度分别分析 U 和 V 的交互，因为 U 和 V 不能以明确定义的线程间方式交换信息（它们仍然可以通过系统交换信息，例如通过磁盘文件、套接字，用于系统特定的共享内存）。

（该观察结果可能允许编译器在不进行完整程序分析的情况下优化某些线程，即使某些常见的可变对象是通过具有静态成员的第三方类“拉取”的。）

另一种解释方式是说这些原语的语义没有泄漏：只有那些参与的线程才能获得定义的结果。

请注意，这仅适用于获取和释放操作的规范级别，而不是顺序一致的操作（这是对原子对象的操作的默认顺序，您没有指定内存顺序）：所有顺序一致的操作（在原子对象或栅栏）以明确定义的全局顺序出现。然而，对于没有共同原子对象的独立线程来说，这并不意味着什么。

操作顺序与容器中元素的顺序不同，您可以真正在容器中导航，或者说文件按名称排序。**只有对象是可观察的，操作的顺序不是。**说有一个明确定义的顺序仅意味着值似乎没有向后改变（相对于一些抽象顺序）。

如果您有两个排序的不相关集合，例如具有通常顺序的整数和具有字典顺序的单词），您可以将这些集合的总和定义为具有与这两种顺序兼容的顺序。您可以将数字放在单词之前、之后或与单词交替。你可以自由地做你想做的事，因为当两个集合之和中的元素不来自同一个集合时，它们之间没有任何关系。

你可以说所有互斥操作都有一个全局顺序，它只是没有用，就像定义不相关集合之和的顺序一样。

# python - 错误：Mac 上没有名为 psycopg2.extensions 的模块

> ID：11172924
> 
> 赞同：5
> 
> 时间：2012-06-23T20:57:09.403
> 
> 标签：python, database, django, postgresql, psycopg2

当我尝试运行 django 时，这就是我得到的：

```
 /System/Library/Frameworks/Python.framework/Versions/2.7/bin/python manage.py runserver 8000
Error: No module named psycopg2.extensions

Process finished with exit code 1 
```

我发现了其他类似问题的问题，但在 Mac 上没有，也没有解决方案有帮助。我没有收到其他错误，我安装了 psycopg2。我在 PyCharm 工作。这是我的设置文件（或至少它的顶部）。

```
ADMINS = (
    # ('Your Name', 'your_email@example.com'),
)

MANAGERS = ADMINS

DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.postgresql_psycopg2', # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.
        'NAME': '---',                      # Or path to database file if using sqlite3.
        'USER': '---',                      # Not used with sqlite3.
        'PASSWORD': '---',                  # Not used with sqlite3.
        'HOST': 'www.-----.com',                      # Set to empty string for localhost. Not used with sqlite3.
        'PORT': '',                      # Set to empty string for default. Not used with sqlite3.
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T05:49:19.620

正如您在[源代码](https://github.com/django/django/blob/master/django/db/backends/postgresql_psycopg2/base.py#L22)中看到的，Django 大量使用了 psycopg2.extensions 模块。此外，扩展模块[正式包含](https://dndg.it/cgi-bin/gitweb.cgi?p=public/psycopg2.git;a=blob;f=lib/extensions.py;h=bb8e3dd68009d6e2dc61c4df213736943ea4cb7c;hb=HEAD)在 psycopg2 中。所以，我认为你以错误的方式安装了 psycopg。

这是安装页面的正确位置：http: [//initd.org/psycopg/install/](http://initd.org/psycopg/install/)

我建议你使用[virtualenv](http://pypi.python.org/pypi/virtualenv)

# ios - ios - UISegmentedControl 和 NSString

> ID：11172926
> 
> 赞同：0
> 
> 时间：2012-06-23T20:57:28.507
> 
> 标签：ios, nsstring, uisegmentedcontrol

您好，我有以下代码：

```
if(_deviceSegmentCntrl.selectedSegmentIndex == 0)
{
    deviceOne = [[NSString alloc] initWithFormat:@"string01"];
}
if(_deviceSegmentCntrl.selectedSegmentIndex == 1)
{
    deviceOne = [[NSString alloc] initWithFormat:@"string02"];
}
if(_deviceSegmentCntrl.selectedSegmentIndex == 2)
{
    deviceOne = [[NSString alloc] initWithFormat:@"string03"];
}

NSString *deviceType = [[NSString alloc] initWithFormat:_deviceSegmentCntrl]; 
```

我想让 NSString 输出用户在分段控件中选择的字符串。

**如何附加 initWithFormat: 以便它反映所选索引？**

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T21:08:01.597

Firstly, NSString's are so common that there is a shorthand to greatly simplify your instantiations:

```
deviceOne = @"string01"; 
```

is has an identical result to

```
deviceOne = [[NSString alloc] initWithFormat:@"string01"]; 
```

Now, I'm not sure *exactly* what you are wanting to achieve, so I'll mention a few things that I think are in the ballpark.

If you just want a string that is exactly what is displayed on the control, use

```
NSString deviceType = [_deviceSegmentCntrl titleForSegmentAtIndex:_deviceSegmentCn.selectedSegmentIndex]; 
```

When you want a more complex string, you can use the class method `stringWithFormat`, perhaps like this:

```
NSString *deviceType = [NSString stringWithFormat:@"%@ - %@", deviceOne, [_deviceSegmentCntrl titleForSegmentAtIndex:_deviceSegmentCn.selectedSegmentIndex]]; 
```

Where deviceOne is from your posted code.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T21:05:20.943

听起来您想要以下内容：

```
int myIndex = _deviceSegmentCntrl.selectedSegmentIndex;
NSString *deviceType = [[NSString alloc] initWithFormat:@"%d",myIndex]; 
```

假设您的分段控件只有三个选项 - 根据所选索引，deviceType 将是字符串“0”、“1”或“2”的 NSString 变量。

确保在使用完 deviceType 后释放它。

根据您的评论进行编辑-

如果要在 deviceType 字符串中包含 deviceOne 字符串，则可以执行以下操作：

```
NSString *deviceType = [[NSString alloc] initWithFormat:@"%@",deviceOne]; 
```

或者，如果您想要选择的分段控制按钮中的文本，那么以下内容将对您有所帮助。

```
int myIndex = _deviceSegmentCntrl.selectedSegmentIndex;
NSString *segmentString = [_deviceSegmentCntrl titleForSegmentAtIndex:myIndex];
NSString *deviceType = [[NSString alloc] initWithFormat:@"%@",segmentString]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T21:12:10.203

```
if(_deviceSegmentCntrl.selectedSegmentIndex == 0)
{
    deviceOne = [[NSString alloc] initWithFormat:@"string01"];
}
if(_deviceSegmentCntrl.selectedSegmentIndex == 1)
{
    deviceOne = [[NSString alloc] initWithFormat:@"string02"];
}
if(_deviceSegmentCntrl.selectedSegmentIndex == 2)
{
    deviceOne = [[NSString alloc] initWithFormat:@"string03"];
}

NSString *deviceType = deviceOne; 
```

is this what you're trying to do? Just display the string you created? Why do you even need the deviceType string if that is the case?

# macports - 如何使用附加的 ./configure 标志重新编译 macport？

> ID：11172928
> 
> 赞同：0
> 
> 时间：2012-06-23T20:57:39.553
> 
> 标签：macports

我安装了一个 py27-tkinter macport，它似乎是在没有“--enable-threads”标志的情况下编译的，这使得它无法使用。无需手动修改端口文件即可使用添加`./configure`标志重新编译此端口有什么简单的方法吗？简短的互联网搜索显示`configure.args`，但这个命令：

```
sudo port upgrade --force py27-tkinter configure.args="--enable-threads" 
```

没有任何改变。是我做错了什么还是手动修改端口文件是唯一的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T21:48:26.117

找到的解决方案：需要重新安装`tcl`带有变体的macport `+threads`。

# python - 你能用 Cython 创建一个 PIL 图像而不冗余复制内存吗？

> ID：11172929
> 
> 赞同：4
> 
> 时间：2012-06-23T20:57:42.233
> 
> 标签：python, camera, usb, python-imaging-library, cython

我正在使用 Cython 从 USB 摄像头抓取图像并将它们转换为返回给调用者的 PIL 图像。

图像的数据位于图像抓取函数返回的结构的“convert_buffer”成员所指向的字符数组中：

```
struct FlyCaptureImage:
   /// stuff
  char * convert_buffer
   /// more stuff 
```

现在，我这样做是为了把它变成一个 PIL 图像：

```
cdef unsigned char *convert_buffer
cdef Py_ssize_t byte_length
cdef bytes py_string

// get the number of bytes into a Py_ssize_t type
byte_length = count

// slice the char array so it looks like a Python str type
py_string = convert_buffer[:byte_length]

// create the PIL image from the python string
pil_image = PILImage.fromstring('RGB', (width, height), py_string) 
```

将数据转换为 python 字符串的过程需要 2 毫秒，这听起来像是一个零拷贝事件。是否可以让 PIL 仅从相机 API 提供的 char * 图像数据指针创建我的图像？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T14:26:39.993

从 PIL 1.1.4 开始，该[`Image.frombuffer`](http://www.pythonware.com/library/pil/handbook/image.htm)方法支持零拷贝：

> 使用标准“原始”解码器从字符串或缓冲区对象中的像素数据创建图像内存。对于某些模式，图像内存将与原始缓冲区共享内存（这意味着对原始缓冲区对象的更改会反映在图像中）。并非所有模式都可以共享内存；支持的模式包括“L”、“RGBX”、“RGBA”和“CMYK”。

问题是您的相机数据似乎是 24 位 RGB，而 PIL 需要 32 位 RGBA/RGBX。你能控制来自相机 API 的像素格式吗？

~~如果没有，使用 仍然可能有优势`Image.frombuffer`，因为它将接受 a`buffer`而不是要求您从像素数据构建 python 字符串。~~

编辑：查看 的来源`frombuffer`，它是 上的轻包装`fromstring`，并且零拷贝需要`Image._MAPMODES`列表中的像素格式（即 RGBX）。至少，您必须将 RGB 数据复制/转换为 RGBX 缓冲区，以获得零复制兼容的像素格式。

我没有更好的方法将原始字节放入 PIL，但这里有一些有趣的参考资料：

*   [Cython 自动类型转换](http://docs.cython.org/src/userguide/language_basics.html#automatic-type-conversions)
*   [支持 Python 缓冲区接口的对象的高效索引](http://wiki.cython.org/enhancements/buffer)（用于 numpy/PIL）
*   [使用 Cython 将 malloc 的缓冲区从 C 转换为 Python 而不进行复制？](https://stackoverflow.com/questions/10284260/converting-malloced-buffers-from-c-to-python-without-copy-using-cython)
*   [PyMemoryView_FromMemory (python 3.3)](http://docs.python.org/dev/c-api/memoryview.html#PyMemoryView_FromMemory)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T14:00:37.540

也许，要走的路是手动组装一个 Python 字符串或 array.array 对象 - 使用 C 结构，并将缓冲区指向您的数据。因为我根本不需要它，所以我没有为它编写代码。

刚刚检查过 - 字符串不可能 - 字符串主体必须与字符串对象标头一起分配（没有指向另一块内存的指针）。

# c# - 如何解析和解密数据输出

> ID：11172932
> 
> 赞同：0
> 
> 时间：2012-06-23T20:58:28.467
> 
> 标签：c#, wpf

我有个问题。我将如何构建一个方法 (dataCapture()) 来收集我从应用程序中的 PowerShell 命令输出的数据，然后解析数据并破译逗号分隔，以便它可以使用 Oledb 将数据输入到 Excel 中的正确行下和列？下面我附上了我的 PowerShell 应用程序的方法。这里的任何帮助或想法将不胜感激！我已经构建了 Excel OleDB，我不需要任何帮助。

```
public void runPS()
{
    //Run query
    PowerShell.Create().AddScript(diskInfo()).AddCommand("Out-String").Invoke<string>();

    foreach (string str in PowerShell.Create().AddScript(diskInfo()).AddCommand("Out-String").Invoke<string>())
    {
        dataCapture(str);
    }
}

public void dataCapture(string input)
{
    //Do some code using the input
    excelWrite(id, volId, idSpc, idTy)
}
 private void excelWrite(string id, string volId, int idSpc, int idTy)
{
    //Does the OleDb for excel
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T21:56:59.567

这就是我要找的东西：http: [//msdn.microsoft.com/en-us/library/ms228388 (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms228388(v=vs.80).aspx)

```
static void Main()
{
    char[] delimiterChars = { ' ', ',', '.', ':', '\t' };

    string text = "one\ttwo three:four,five six seven";
    System.Console.WriteLine("Original text: '{0}'", text);

    string[] words = text.Split(delimiterChars);
    System.Console.WriteLine("{0} words in text:", words.Length);

    foreach (string s in words)
    {
        System.Console.WriteLine(s);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T21:23:53.643

您可以直接从 powershell 使用几乎任何东西。我在 powershell 中进行了一些数据库查询，所以我很确定您可以直接从 powershell 使用 JET 或 OleDB，而无需在 .NET 中解析数据。

快速谷歌搜索，本文使用 COM 自动化：[http](http://www.petri.co.il/export-to-excel-with-powershell.htm) ://www.petri.co.il/export-to-excel-with-powershell.htm，如果您需要移动大量数据，这可能不是最佳解决方案，但应该工作几百行。

Powershell 非常强大，因此您可以从中调用您的代码，并将数据传递给它。不仅是字符串，还有模式复杂对象。

### 编辑：

[这个 Powershell 脚本](http://poshcode.org/1591)谈论从 Excel 读取，但很可能您可以对 OleDB 执行任何命令，因此它也可以插入到 Excel 中。

### 编辑2：

只需直接从 Powershell 调用您的代码 :)

`Powershell code:`

```
Add-Type -Path "CallMeFromPowershell.dll"

$result = [CallMeFromPowershell.CallFromPS]::DoSomething("hello", 123)
$result 
```

`C# code:`

```
using System;

namespace CallMeFromPowershell
{
    public static class CallFromPS
    {
        public static string DoSomething(string imAString, int imAnInt)
        {
            return String.Format(@"The string: '{0}', the integer: '{1}'", imAString, imAnInt);
        }
    }
} 
```

输出应该是`The string: 'hello', the integer: '123'`

# ios - 无法访问 NSDictionary

> ID：11172933
> 
> 赞同：0
> 
> 时间：2012-06-23T20:58:28.997
> 
> 标签：ios, json, object, dictionary, key

我使用 PHP 脚本创建了一个 JSON。我正在阅读 JSON，可以看到数据已被正确读取。但是，在访问对象时，我将无法识别的选择器发送到实例...

似乎无法找到为什么在太多小时之后。任何帮助都会很棒！

我的代码如下所示：

```
NSDictionary *json = [[NSDictionary alloc] init];
json = [NSJSONSerialization JSONObjectWithData:receivedData options:kNilOptions error:&error];

NSLog(@"raw json = %@,%@",json,error);  

NSMutableArray *name = [[NSMutableArray alloc] init];

[name addObjectsFromArray: [json objectForKey:@"name"]]; 
```

到达上面的最后一行时，代码会崩溃。

输出如下：

```
raw json = (
        {
        category = vacancies;
        link = "http://blablabla.com";
        name = "name 111111";
        tagline = "tagline 111111";
    },
        {
        category = vacancies;
        link = "http://blobloblo.com";
        name = "name 222222222";
        tagline = "tagline 222222222";
    }
),(null)
2012-06-23 21:46:57.539 Wind expert[4302:15203] -[__NSCFArray objectForKey:]: unrecognized selector sent to instance 0xdcfb970 
```

帮助 ！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T21:13:53.483

`json`是您显示的数组，而不是字典。我可以告诉这一点，因为括号围绕着整个日志输出`json`。数组内部是字典，我可以通过它们被大括号包围的事实来判断。

所以，看起来你想要这样的东西：

```
NSError *error = nil;
NSArray *json = [NSJSONSerialization JSONObjectWithData:receivedData options:kNilOptions error:&error];

NSLog(@"raw json = %@,%@",json,error);  

NSMutableArray *name = [[NSMutableArray alloc] init];
for (NSDictionary *obj in json) {
    [name addObject:[obj objectForKey:@"name"]];
} 
```

顺便说一句，您会注意到我已经删除了`json`对对象的不必要初始化，然后在下一行用`JSONObjectWithData:options:error:`. 在 ARC 世界中，它不会是泄漏，但仍然完全没有必要分配一个对象只是为了稍后再次摆脱它。我还添加了该`NSError *error = nil;`行，因为那不存在并且显然是编译所必需的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T21:12:14.217

问题似乎是您的 JSON 的根级别是一个数组，而不是一个字典（注意括号而不是大括号作为记录输出中的第一个字符）。数组没有`objectForKey`选择器。也许您打算先使用 objectAtIndex:0，或者遍历所有项目？

顺便说一句，代码的第一行完全浪费了 NSDictionary 的初始化。它只是在下一行被覆盖和释放。

# jquery - 结束日期大于开始日期验证 javascript 无法正常工作

> ID：11172938
> 
> 赞同：1
> 
> 时间：2012-06-23T20:58:55.733
> 
> 标签：jquery, asp.net-mvc-3, validation, unobtrusive-javascript

我正在尝试验证我的日期，以便结束日期大于开始日期但不起作用。我做错了什么？

```
 <head>
 <script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
 <script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
  <link href="@Url.Content("~/Content/Site.css")" rel="stylesheet" type="text/css" />       
  <script src="@Url.Content("~/Scripts/jquery-ui-1.8.19.min.js")" type="text/javascript"></script>
  <script src="@Url.Content("~/Scripts/jquery-ui.unobtrusive.min.js")" type="text/javascript"></script>   
  <script src="@Url.Content("~/Scripts/jquery-ui.unobtrusive-0.5.0.min.js")" type="text/javascript"></script>
  <script src="@Url.Content("~/Scripts/gen_validatorv4.js")" type="text/javascript"></script>

  </head>
     @using (Html.BeginForm("SearchFree", "Reservation", FormMethod.Get,new {id = "form" }))
   {                    

  <h7>Introduceti perioada Rezervarii</h7>
<div class="editor-label">
<label id="cautare" for="StartDate">Data Intrare:   </label>@(Html.JQueryUI().Datepicker("StartDate").DateFormat("mm-dd-yy").MinDate(DateTime.Today).ShowButtonPanel(true).ChangeYear(true).ChangeMonth(true).NumberOfMonths(2))
</div>
<div class="editor-label">
<label  id="cautare"  for="EndDate">Data Iesire:</label>@(Html.JQueryUI().Datepicker("EndDate").DateFormat("mm-dd-yy").MinDate(DateTime.Today).ShowButtonPanel(true).ChangeYear(true).ChangeMonth(true).NumberOfMonths(2))

</div>

<p>
    <input id="buton1" type="submit" value="Cauta camere libere" />
</p>

      }
      <script type="text/javascript">
         $(document).ready(function () {
    $.validator.addMethod("EndDate", function (value, element) {
        var startDate = $('.StartDate').val();
        return Date.parse(startDate) <= Date.parse(value);
    }
      , "* End date must be after start date");
     $('.form').validate();
    });
      </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T21:20:47.737

试试这个：

```
jQuery.validator.addMethod("greaterThan", 
function(value, element, params) {

    if (!/Invalid|NaN/.test(new Date(value))) {
        return new Date(value) > new Date($(params).val());
    }

    return isNaN(value) && isNaN($(params).val()) 
        || (Number(value) > Number($(params).val())); 
},'Must be greater than {0}.'); 
```

以这种方式使用它：

```
$(".EndDate").rules('add', { greaterThan: ".StartDate" }); 
```

**或者**

```
$("form").validate({
    rules: {
        EndDate: { greaterThan: ".StartDate" }
    }
}); 
```

# jquery - jQuery 插件，imagesLoaded() '正在加载 .gif'

> ID：11172944
> 
> 赞同：0
> 
> 时间：2012-06-23T20:59:34.187
> 
> 标签：jquery, jquery-plugins

晚上！

目前我正在使用 imagesLoaded() 插件，并且我有一个“loading.gif”图像，在进行 ajax 调用时显示，但是，当 imagesLoaded() 函数对图像发挥作用时，没有“加载” .gif' 这显然意味着它没有使用 ajax。但这看起来有点欺骗页面，因为加载标志消失了，但页面仍然没有完全加载。

我想我在问如何在 imagesLoaded() 工作时让 loading.gif 出现？

[http://newgameplus.nikuai.net/TEST/](http://newgameplus.nikuai.net/TEST/) （如果你想知道我的意思，第二个搜索栏。）

```
///////This is the code I used to make a loading bar when ajax is called. 
$("#spinner").bind("ajaxSend", function() {
    $(this).show();
}).bind("ajaxStop", function() {
    $(this).hide();
}).bind("ajaxError", function() {
    $(this).hide();
});

///////Where the plugin is called:
var $items = $( items.join('') );
$items.imagesLoaded(function(){
$container
.append( $items ).masonry( 'appended', $items, true );
});
} 
```

# android - Eclipse 无法识别 Fedora 16 上的 Galaxy Nexus

> ID：11172949
> 
> 赞同：0
> 
> 时间：2012-06-23T21:01:17.177
> 
> 标签：android, eclipse, fedora, galaxy-nexus

我已经在 Fedora 16 上成功安装了 Eclipse 和 Android SDK。但是，当我连接我的 Galaxy Nexus（启用调试）并单击在 Eclipse 中运行时，设备管理器找不到我的手机。

在 Windows 上，我必须为手机安装 USB 驱动程序，但我不相信 Fedora 16 有任何驱动程序。

是否可以在 Fedora 16 上安装我的手机并进行测试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T22:52:35.770

如果您单击 DDMS，您的设备是否显示在“**设备**”窗口中？如果没有，以下是要检查的问题列表：

您与设备的 USB 线连接太松。

如果它是旧的 USB 线，则电线内部可能存在断裂。

设备内用于 USB 线的插座可能弯曲。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T23:04:59.273

我安装了 mtpfs，经过几次尝试并重新启动后它就可以工作了。

# hadoop - Hadoop MapReduce 作业输入文件 ClassNotFound

> ID：11172951
> 
> 赞同：1
> 
> 时间：2012-06-23T21:01:36.257
> 
> 标签：hadoop, mapreduce, hadoop-streaming

我正在一个包含两个节点（主/从和从）的 hadoop 集群上构建示例 Map/Reduce 任务。以下是我的规格：

```
$HADOOP_HOME = /usr/local/hadoop
My M/R classfiles path = $HADOOP_HOME/MyMapRed_classes
My Mapper classfile = $HADOOP_HOME/MyMapRed_classes/MyMapper
My Reducer classfile = $HADOOP_HOME/MyMapRed_classes/MyReducer
My Jar path = $HADOOP_HOME/MyMapred/MyMapRed.jar
My HDFS Input Path = /user/hadoop/MyMapRed/inputfile
My HDFS Output Path = /user/hadoop/MyMapRed_output 
```

我正在运行 M/R 任务如下

```
<myusername>@localhost:/usr/local/hadoop$ bin/hadoop jar $HADOOP_HOME/MyMapRed/MyMapRed.jar -input /user/hadoop/MyMapRed/inputfile -output /user/hadoop/MyMapRed_output/ -mapper $HADOOP_HOME/MyMapRed_classes/MyMapper -reducer $HADOOP_HOME/MyMapRed_classes/MyReducer 
```

但似乎无法从下面的消息中找到输入文件

```
Exception in thread "main" java.lang.ClassNotFoundException: -input
at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Class.java:264)
at org.apache.hadoop.util.RunJar.main(RunJar.java:149) 
```

下面是我正在使用的 MyMapRed 类。它有一个对列表作为输入。减速器应该给出每组的平均 Val。

```
import java.io.IOException;
import java.util.Iterator;
import org.apache.hadoop.fs.Path;
import org.apache.hadoop.io.DoubleWritable;
import org.apache.hadoop.io.Text;

import org.apache.hadoop.mapred.FileInputFormat;
import org.apache.hadoop.mapred.FileOutputFormat;
import org.apache.hadoop.mapred.MapReduceBase;
import org.apache.hadoop.mapred.Mapper;
import org.apache.hadoop.mapred.OutputCollector;
import org.apache.hadoop.mapred.Reducer;
import org.apache.hadoop.mapred.Reporter;
import org.apache.hadoop.mapred.JobClient;
import org.apache.hadoop.mapred.JobConf;
import org.apache.hadoop.mapred.TextInputFormat;
import org.apache.hadoop.mapred.TextOutputFormat;

public class MyMapRed {

public static class MyMapper extends MapReduceBase 
implements Mapper<Text, Text, Text, DoubleWritable> {

    private final static Text Group = new Text();
    private final static DoubleWritable Val = new DoubleWritable();

    public void map(Text key, Text value, OutputCollector<Text, DoubleWritable> output, Reporter reporter) 
        throws IOException {
        String line = value.toString();
        String[] KeyAndVal = line.split("\t",2);
        Group.set(KeyAndVal[0]);
        Val.set(Double.valueOf(KeyAndVal[1]));
        output.collect(Group, Val);
    }
}

public static class MyReducer extends MapReduceBase 
implements Reducer<Text, DoubleWritable, Text, DoubleWritable> {
    public void reduce(Text key, Iterator<DoubleWritable> values,
            OutputCollector<Text, DoubleWritable> output, Reporter reporter)
            throws IOException {
        DoubleWritable val = new DoubleWritable();
        double valSum = 0.0;
        int valCnt = 0;
        while (values.hasNext()) {
            val = values.next();
            valSum += val.get();
            valCnt++;
        }
        if (valCnt>0)
            valSum = valSum/valCnt;
        output.collect(key, new DoubleWritable(valSum));
    }
}

public static void main(String[] args) {
    JobClient client = new JobClient();
    JobConf conf = new JobConf(MyMapRed.class);
    conf.setJobName("MyMapRed");

    conf.setOutputKeyClass(Text.class);
    conf.setOutputValueClass(DoubleWritable.class);

    conf.setMapperClass(MyMapper.class);
    conf.setReducerClass(MyReducer.class);

    conf.setInputFormat(TextInputFormat.class);
    conf.setOutputFormat(TextOutputFormat.class);

    FileInputFormat.addInputPath(conf, new Path("input"));
    FileOutputFormat.setOutputPath(conf, new Path("output"));

    client.setConf(conf);

    try {
        JobClient.runJob(conf);
    } catch (Exception e) {
        e.printStackTrace();
    }

}
} 
```

任何人都可以提出我错过的 ClassNotFoundException 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T21:07:06.010

如果您的 MapRed.jar 文件没有在 jar 清单中定义主类，则 hadoop 期望 jar 之后的参数是包含静态 main 方法的类。

您需要命名您的主类（包含`public static void main(String args[])`方法并通过 JobConf 或 Job 类配置作业的类）。

如果看起来您也在尝试使用流式传输，如果您的映射器和化简器是用 Java 编写的，那么这不是必需的

# twitter - 我如何知道特定的 Twitter 用户是否在线？

> ID：11172956
> 
> 赞同：2
> 
> 时间：2012-06-23T21:01:59.570
> 
> 标签：twitter

我如何通过编写程序知道特定的 Twitter 用户当前是否在线？网页中是否有任何 API 或数据字段显示此信息？浏览 Twitter 网页和使用 Twitter 应用程序都被视为“在线”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T21:05:01.233

不清楚您所说的“在线”是什么意思（浏览 twitter.com？使用 Twitter 应用程序？），但无论如何 Twitter 都没有提供此类信息，谢天谢地。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T22:25:26.410

尽管此信息不容易获得，但您可以做一个解决方法。使用 Twitter 的 Streaming API：[https](https://dev.twitter.com/docs/streaming-apis/streams/public) ://dev.twitter.com/docs/streaming-apis/streams/public （阅读本文档）。

您很可能会使用该`POST Statuses/filter`功能（在此处阅读文档：[https](https://dev.twitter.com/docs/api/1/post/statuses/filter) ://dev.twitter.com/docs/api/1/post/statuses/filter ），它将根据您的推文为您提供一个 JSON 对象过滤器。

使用您需要在 URL 中指定的参数来过滤流（查看此文档以了解更多信息：[https](https://dev.twitter.com/docs/streaming-apis/parameters) ://dev.twitter.com/docs/streaming-apis/parameters ），在您的情况下，它将是`follow`参数。您基本上指定了您想要关注的用户的 twitter ID。这是流式 API 的 JSON 结果示例[https://stream.twitter.com/1/statuses/filter.json?follow=25365536](https://stream.twitter.com/1/statuses/filter.json?follow=25365536) - 特别关注 Kim Kardashian。请记住，这将为您提供：

*   用户创建的推文。
*   用户转发的推文。
*   回复用户创建的任何推文。
*   用户创建的任何推文的转推。

因此，为了只流式传输所需用户的推文，您必须使用您选择的编程语言来解析 JSON 对象以找到`user`实际发送推文的对象（这有点棘手，您将拥有查看 JSON 对象的属性以找出答案）。但是，一旦您将流式推文缩小到仅来自用户的推文，您就可以在该用户发布新推文时发出警报，这将告诉您用户目前是否在线/使用推特。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T21:15:30.383

恐怕此类信息受到 Twitter 的限制，无法获得。但是，您可以在[https://dev.twitter.com/discussions](https://dev.twitter.com/discussions)上提出您的问题并询问其开发人员。祝你好运

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-21T19:15:26.217

*   you need get user state first
*   then filter if around current time
*   then get ids
*   they are online
*   use twitter developer api
*   I do it for my website

# python - Django 自定义包含模板

> ID：11172958
> 
> 赞同：0
> 
> 时间：2012-06-23T21:02:17.273
> 
> 标签：python, django, templates, include

我知道这不完全是 Django 模板哲学，但我希望能够根据我在 http 响应上下文中指定的插件列表包含不同的模板。例如，如果我配置了以下插件：

```
 context['plugins'] = ['weather'] 
```

我尝试将每个模板包含在基本模板文件中：

```
{% for custom_plugin in custom_plugins %}
    {% include "map/plugins/custom/{{ plugin }}/includes.html" %}
{% endfor %} 
```

我也试过：

```
{% for plugin in plugins %}
    @register.inclusion_tag("map/plugins/custom/{{ plugin }}/includes.html", takes_context=True)
{% endfor %} 
```

目前，每个插件将仅在其 include.html 文件中包含脚本引用和 css 类：

```
<script type="text/javascript" src="{{ MEDIA_URL }}map/js/plugins/custom/weather/weatherStation.js?ver={{ version }}"></script> 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T21:20:01.317

你的第一种方法似乎是最好的，这个答案可能会提供一些关于你如何去做的指示：[How to concatenate strings in django templates？](https://stackoverflow.com/questions/4386168/how-to-concatenate-strings-in-django-templates)

您基本上想构建一个模板字符串以包含在带有 with 标记的变量中，然后包含它。

# html - 如何在悬停时动态设置表格列背景颜色？

> ID：11172959
> 
> 赞同：1
> 
> 时间：2012-06-23T21:02:31.280
> 
> 标签：html, css, background, html-table, hover

> **可能重复：**
> [cols、colgroups 和 css :hover psuedoclass](https://stackoverflow.com/questions/848840/cols-colgroups-and-css-hover-psuedoclass)

当 HTML 表格列中的单元格 (td) 悬停在该列上时，如何设置该列的背景颜色？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T21:07:13.280

也许您可以将鼠标悬停在桌子上而不是悬停在：http `td`: [//jsfiddle.net/DkN2R/](http://jsfiddle.net/DkN2R/)

如果您`td`的 s 没有间距/边距，您可以摆脱它。

否则你将不得不求助于 javascript，因为 CSS 无法处理祖先选择器。我听说一些关于它们的传言可能会在遥远的将来实施，但这可能需要一段时间。如果我没记错的话，原因是性能。

# c# - 如何定义一个必须继承的类

> ID：11172964
> 
> 赞同：22
> 
> 时间：2012-06-23T21:02:56.667
> 
> 标签：c#, oop

如何定义一个必须继承的类？在 C# 中

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-06-23T21:04:31.770

您将类标记为[`abstract`](http://msdn.microsoft.com/en-us/library/sf985hc5.aspx)（这是 VB.NET 的 C# 类似物`Must Inherit`）。

这将确保它不能被直接实例化。

从链接的 MSDN 文章：

> abstract 修饰符表示被修改的事物有一个缺失或不完整的实现。abstract 修饰符可以与类、方法、属性、索引器和事件一起使用。**在类声明中使用 abstract 修饰符来指示一个类仅作为其他类的基类**。标记为抽象或包含在抽象类中的成员必须由派生自抽象类的类实现。

（强调我的）

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-23T21:04:49.507

使用`abstract`修饰符。

```
public abstract class MyClass()
{
    ...
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-23T21:04:39.493

您可以将一个类定义为`abstract`，或者给它一个仅受保护的构造函数。`abstract`更好。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-10-01T11:35:45.383

如果你想创建一个必须被继承的类，你需要用`abstract`修饰符标记它。

```
public abstract MyClass
{
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-23T21:06:39.047

*如果这*是一个问题，那么不可能在代码中强制执行派生或实现的必要性。

但：

您可以定义一个`interface`强制消费者*实现*它。

或者您可以`abstract class`只定义抽象成员以强制消费者覆盖**所有**这些成员。

希望这可以帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-11-04T02:27:16.800

最好有界面。

如果您需要模拟功能，并且不要求它在编译时失败......

1.  在基类中定义一个方法。抛出异常作为实现中的唯一行。您可能想让消息非常清楚地说明问题所在。

2.  覆盖超类中的方法并实现它们。如果您未能在超类中实现，您将得到异常。

不完美，但假设您正在尝试从 vb.net 移植代码......这可能会奏效。

# android - Theme_HoloEverywhereLight_Sherlock 显示深色背景

> ID：11172965
> 
> 赞同：0
> 
> 时间：2012-06-23T21:02:58.557
> 
> 标签：android, android-theme, android-holo-everywhere

我正在使用 Christophe Versiuex 的[HoloEverywhere](https://github.com/ChristopheVersieux/HoloEverywhere)库与[ActionBarSherlock](http://actionbarsherlock.com/)一起在 Gingerbread 手机上显示一个 ICS 外观的应用程序。Theme.HoloEverywhereDark.Sherlock 主题效果很好。但是当我尝试将主题更改为 Theme.HoloEverywhereLight.Sherlock 时，所有文本都变为深色文本，但 Activity 背景保持深色。

我正在做的就是：

```
 setTheme(R.style.Theme_HoloEverywhereLight_Sherlock);
  setContentView(R.layout.mylayout); 
```

在 Activity.onCreate() 方法中。

在查看代码时，它定义了：

```
<style name="Theme.HoloEverywhereLight.Sherlock" parent="Theme.Sherlock.Light">
    <item name="android:windowBackground">@drawable/background_holo_light</item>
    .
    .
    . 
```

所以看起来它应该可以工作。

有没有其他人使用过 Light 主题并获得了浅色背景？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T13:12:33.677

我想通了。我在做：

```
super.onCreate(savedInstanceState);
setTheme(R.style.Theme_HoloEverywhereLight_Sherlock);
setContentView(R.layout.mylayout); 
```

当我应该做的时候：

```
setTheme(R.style.Theme_HoloEverywhereLight_Sherlock);
super.onCreate(savedInstanceState);
setContentView(R.layout.mylayout); 
```

setTheme() 需要在 super.onCreate() 之前调用。现在，轻主题就像一个魅力。

# ios - iOS 中使用原生功能的 HTML 列表

> ID：11172969
> 
> 赞同：0
> 
> 时间：2012-06-23T21:04:27.503
> 
> 标签：ios, uiwebview, uikit, core-text

是否可以在不使用 UIWebView 的情况下创建 HTML 列表，例如有序列表和无序列表？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T21:08:34.010

您需要一个`UIWebView`来显示/解释 html，除非您当然想编写自己的实现来解析 html 并显示它（但您为什么要这样做？）。另一方面，如果您只是想在不需要 html 的情况下显示列表，则可以使用`UITableView`.

# c# - 使用实体框架和 MVVM 将数据库信息从一个 ViewModel 传递到另一个 ViewModel

> ID：11172975
> 
> 赞同：2
> 
> 时间：2012-06-23T21:04:54.093
> 
> 标签：c#, wpf, xaml, entity-framework-4.1

我有一个使用 Entity Framework 4.1、WPF 和 C# 的 MVVM 应用程序。我正在尝试获取它，以便当我在名为 LoanListingView 的视图中双击数据网格中的一行（网格绑定到我的数据库中名为 LoanComparisons 的实体集）时，它会切换到我的另一个视图（名为LoanCalculatorView）通过所选行中给出的信息传递我的数据库（名为 Loans 的实体集）中的信息。

到目前为止，我已经连接了应用程序，因此双击 LoanListingView DataGrid 中的一行会打开 LoanCalculatorView，该视图具有已输入到其字段中的默认值。

现在来看一些代码。这是绑定到名为 LoanComparisons 的数据库实体集的 DataGrid：

```
 <DataGrid MouseDoubleClick="OnDoubleClick"  ItemsSource="{Binding Path=LoanComparisons}" 
                  AutoGenerateColumns="False" SelectionChanged="DataGrid_SelectionChanged">

            <DataGrid.Columns>
                <DataGridTextColumn IsReadOnly="True" Header="Customer Name" Binding="{Binding Path=Name}" />
                <DataGridTextColumn IsReadOnly="True" Header="Home Value" Binding="{Binding Path=HomeValue}" />
                <DataGridTextColumn IsReadOnly="True" Header="Monthly Income" Binding="{Binding Path=MonthlyIncome}" />
                <DataGridTextColumn IsReadOnly="True" Header="First Payment" Binding="{Binding Path=FirstPaymentDate}" />
            </DataGrid.Columns>
        </DataGrid> 
```

双击任何一行会打开我的 LoanCalculatorView 并带有预设值。当前 DoubleClick 事件运行此代码：

```
 /// Handles double-clicks on datagrid rows
    private void OnDoubleClick(object sender, MouseButtonEventArgs e)
    {
        if (sender != null)
        {
            DataGrid grid = sender as DataGrid;
            if (grid != null && grid.SelectedItems != null && grid.SelectedItems.Count == 1)
            {
                DataGridRow dgr = grid.ItemContainerGenerator.ContainerFromItem(grid.SelectedItem) as DataGridRow;
              _viewModel.Open(null);

              //The DataContext will be set to dgr but since "DataGridRow"
              //does not contain the Open method I cant do this:
              //  DataContext = dgr;
              //dgr.Open(dgr);
              //
              //I think this is where I am lost at

            }
        }
    } 
```

目前，Open 方法将一个空值传递给它的方法，因为我不确定如何从我的另一个名为“Loans”的 EntitySet 传递信息。打开方法如下：

```
//Creates a new LoanCalculatorViewModel that calls the SetComparisonDataRecord method
//passing it an argument comparison and changes the DataContext to LoanCalculatorView.
  public void Open(LoanComparison comparison)
  {
     var loanCalculatorViewModel = new LoanCalculatorViewModel();

     loanCalculatorViewModel.SetComparisonDataRecord(comparison);

     var loanCalculatorView = new LoanCalculatorView {DataContext = loanCalculatorViewModel};

     loanCalculatorView.Show();
  } 
```

最后，现在的 SetComparisonDataRecord 只是空的，但我对其中应该包含的内容以及我想如何设置值进行了评论：

```
 public void SetComparisonDataRecord(LoanComparison comparison)
  {

     //SharedValues.HomeValue = comparison.HomeValue;

  } 
```

要记住的另一件事是，我的两个 EntitySet 具有一对多的关系。一笔贷款和一组 LoanComparisons。是否可以向我展示如何将所选行中的信息（代表我的 LoanComparisons EntitySet 中的实体）传递给 LoanCalculatorView？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T18:35:32.340

避免头疼的一个建议是将属性绑定到数据网格的 SelectedItem 属性，这样您在触发 Double-Click 事件时就不必担心“当前选择”。

对于你正在做的事情，我会这样分解电话：

1.  为初始网格视图执行对 EF 的第一次调用，以便可以填充列表。
2.  假设每个项目由于主键或某些唯一标识符而具有 Id，则仅将该值作为弹出窗口的参数传递。
3.  在弹出窗口加载的初始化期间加载视图模型期间，使用 LINQ 调用 ID 为“passed id”的记录的实体。
4.  获取返回的实体 POCO，将其存储在您的视图模型中的属性中并在您的视图中访问它。
5.  注意：确保您在所有视图模型属性上使用 INotifyPropertyChanged，以便视图正确刷新。

这基本上是您正在寻找的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T07:42:25.163

像这样更改了我的 OnDoubleClick 方法，其中 DataContext 在 Open 方法中设置：

```
 private void OnDoubleClick(object sender, MouseButtonEventArgs e)
    {
        if (sender != null)
        {
            DataGrid grid = sender as DataGrid;
            if (grid != null && grid.SelectedItems != null && grid.SelectedItems.Count == 1)
            {           
                var lc = grid.SelectedItem as LoanComparison;
                if (lc != null) _viewModel.Open(lc);

            }
        }
    } 
```

简单的打开方法：

```
public void Open(LoanComparison comparison)
  {
     var loanCalculatorViewModel = new LoanCalculatorViewModel();

     loanCalculatorViewModel.SetComparisonDataRecord(comparison);

     var loanCalculatorView = new LoanCalculatorView {DataContext = loanCalculatorViewModel};

     loanCalculatorView.Show();
  } 
```

从那里我写了一个基本查询，询问我的数据库中的“贷款”实体：

```
public void SetComparisonDataRecord(LoanComparison comparison)
           {

     var calcEntities = new LoanCalcEntities();

     var currentLoan = from loan in calcEntities.Loans
                       where loan.LoanId == comparison.CurrentLoanId
                       select loan;

     var proposedLoan = from loan in calcEntities.Loans
                       where loan.LoanId == comparison.ProposedLoanId
                       select loan;

     //SharedValues.HomeValue = comparison.HomeValue;

  } 
```

抱歉，添麻烦了！谢谢您的帮助 ：）

# c# - 连接运算符中的 INSERT INTO ...SELECT 语法错误

> ID：11172992
> 
> 赞同：0
> 
> 时间：2012-06-23T21:06:51.207
> 
> 标签：c#, asp.net, sql

我正在尝试将购物篮写入来自 C# asp.net 的 sql 数据库中的订单 + 订单行。订单行将包含购物篮中每件商品的订单编号、总价、产品编号、数量等。订单本身将包含订单号作为主键，并将通过它链接到不同的行。昨天一切正常，但是现在当我尝试在 insert into 语句中使用 SELECT 命令以使事情变得更加动态时，我遇到了上述语法错误。

有谁知道这句话有什么问题：

```
INSERT INTO [order] 
        (klant_id,totaalprijs,btw,subtotaal,verzendkosten)
SELECT  klant.id
,       SUM(orderregel.totaalprijs)
,       SUM(orderregel.btw)
,       SUM(orderregel.totaalprijs) - SUM(orderregel.btw)
,       7.50 
FROM    orderregel
INNER JOIN  
        klant 
ON      [order].klant_id = klant.id  
WHERE   klant.username = 'jerry' 
GROUP BY 
        id; 
```

“订单”表中的订单号在自动编号上，在 asp 代码隐藏中，有一个 for each 用于处理为每个产品编写的行，在此循环之外在 0 上设置了一个索引，并且在它的每一端都增加了 1 . 订单的 executenonquery 仅在第一个循环开始时执行一次，并在后面添加行，以 MAX(ordernumber) 作为订单号。

我希望我提供了足够的信息，并且有人能够帮助我。提前致谢！

编辑：谢谢大家，使用这个查询做到了！

> 插入 [order] (klant_id,totaalprijs,btw,subtotaal,verzendkosten) SELECT (SELECT klant.id FROM klant WHERE klant.username = 'jerry') ,
> SUM(orderregel.totaalprijs) , SUM(orderregel.btw) ,
> SUM( orderregel.totaalprijs) - SUM(orderregel.btw) , 7.50 FROM
> orderregel;

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T21:11:13.810

您已经在 J​​OIN 中使用过，我猜`[order]`应该是什么时候。`orderregel`

```
FROM    orderregel
    INNER JOIN klant ON [order].klant_id = klant.id 
```

应该：

```
FROM    orderregel
    INNER JOIN klant ON orderregel.klant_id = klant.id 
```

**编辑：**

为什么不直接使用：

```
INSERT INTO [order] 
        (klant_id,totaalprijs,btw,subtotaal,verzendkosten)
SELECT  (SELECT klant.id FROM klant WHERE klant.username = 'jerry')
,       SUM(orderregel.totaalprijs)
,... 
```

...并避免使用 klant 表加入？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T21:12:18.687

您不能引用要插入的表。毕竟，在插入完成之前这些行还不存在！

阅读您的查询，很明显您正在尝试插入被`klant`调用的`Jerry`. 但是您如何指定插入使用哪些订单行？

一个可能的解决方案：

1.  先写下订单，加上klant id
2.  创建订单行。您从第一个查询中知道 orderid（fe 使用`select SCOPE_IDENTITY()`
3.  使用总计更新订单

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T09:54:08.820

试试这个： INSERT INTO [order] (klant_id,totaalprijs,btw,subtotaal,verzendkosten) SELECT klant.id , SUM(orderregel.totaalprijs) , SUM(orderregel.btw) , SUM(orderregel.totaalprijs) - SUM(orderregel.btw ) , 7.50 FROM orderregel INNER JOIN klant ON orderregel.id = klant.id
INNER JOIN [order] ON [order].klant_id = klant.id
WHERE klant.username = 'jerry' GROUP BY id;

# python - 分析 Python 代码：模运算符

> ID：11172993
> 
> 赞同：0
> 
> 时间：2012-06-23T21:06:51.980
> 
> 标签：python, networking

我正在查看 Python 中的一些代码（我对 Python 一无所知），我遇到了这部分：

```
def do_req(body):
    global host, req
    data = ""
    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    s.connect((host, 80))
    s.sendall(req % (len(body), body))
    tmpdata = s.recv(8192)
    while len(tmpdata) > 0:
        data += tmpdata
        tmpdata = s.recv(8192)
    s.close()
    return data 
```

然后稍后使用巨大的主体调用它，如超过 500,000 字节。这将发送到 Apache 服务器，该服务器的最大请求大小默认为 8190 字节。

我的问题是“ `s.sendall()`”部分发生了什么？显然整个身体不能一次发送，我猜它是通过模运算符减少的。不过，我不知道它在 Python 中是如何工作的。谁能解释一下？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-23T21:08:16.987

它不是真正的模运算符（从技术上讲，它是因为字符串只是实现[`__mod__`](http://docs.python.org/reference/datamodel.html#object.__mod__)），而是[python2 样式的字符串格式化运算符](http://docs.python.org/library/stdtypes.html#string-formatting-operations)。

> 给定`format % values`（其中*format*是字符串或 Unicode 对象），*格式*`%`中的转换规范被替换为*values*的零个或多个元素。效果类似于C语言中的使用。**`sprintf()`**

 **> 显然不能一次发送整个身体

虽然它确实不适合单个数据包，但它是内部处理的低级事物（很可能甚至不是由 python 而是由写入套接字的底层系统调用）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T22:38:48.393

不，这里没有减少正文，因为 % 是格式运算符，当对字符串进行操作时。

[http://docs.python.org/release/2.5.2/lib/typesseq-strings.html](http://docs.python.org/release/2.5.2/lib/typesseq-strings.html)

所有的数据都是通过 sendall 方法分部分发送的。

socket.sendall 是这样工作的：

```
do {
        n = sendsegmented(s->sock_fd, buf, len, flags);
        len -= n;
} while (len > 0); 
```

其中 sendegmented 发送数据并返回 len 或 SEGMENT_SIZE**

# javascript - 从 Wordpress 循环中单击链接时添加一个类

> ID：11172995
> 
> 赞同：0
> 
> 时间：2012-06-23T21:07:01.953
> 
> 标签：javascript, jquery, wordpress, hyperlink

我正在尝试隔离并将一个类添加到单击的锚标记。标签是从 Wordpress 循环中提取的。我可以编写 JQuery 来删除“静态”类，但它正在从 div 中的所有标签中删除该类，而不仅仅是单击一次，在瞬间添加活动类，然后在页面重新加载时删除所有类新的项目集。

**这是WP循环**

```
<div class="more">
    <a class="static" href="<?php bloginfo('template_url'); ?>/work/">ALL</a>           
    <?php
    foreach ($tax_terms as $tax_term) {
    echo '<a class="static" href="' . esc_attr(get_term_link($tax_term, $taxonomy)) . '" title="' . sprintf( __( "View all posts in %s" ), $tax_term->name ) . '" ' . '>' . $tax_term->name.'</a>';
    } ?>
</div> 
```

**生成这个 html：**

```
<div class="more">
    <a class="static" href="#">ALL</a>
    <a class="static" href="#">Things</a>
    <a class="static" href="#"> More Things</a>
    <a class="static" href="#">Objects</a>
    <a class="static" href="#">Goals</a>
    <a class="static" href="#">Books</a>
    <a class="static" href="#">Drawings</a>
    <a class="static" href="#">Thoughts</a>
</div> 
```

**查询：**

```
$("div.more a").on("click", function () {
    $("a.static").removeClass("static");
    $(this).addClass("active");
}); 
```

我已经在[这里](https://stackoverflow.com/questions/2037501/javascript-add-class-when-link-is-clicked)和[这里](https://stackoverflow.com/questions/9659077/jquery-adding-class-to-link-if-its-clicked)复习了其他类似的问题，但是这两种解决方案都不适合我。这可以用 JQuery 完成还是应该在 html 内联锚点中放置一个点击事件？

看起来它只工作了一秒钟，直到页面重新加载。

我正在使用 Chrome 开发工具查看源代码。看起来它工作正常，但是当页面重新加载时，“静态”类会从 div 中的所有锚标记中删除。**页面加载后新添加的类名被删除是否有原因？**

它通过 url 传递一个变量来加载一组项目。因此，例如，当您单击**Things**时，它会传入`?type=airports`url 以获取特定的相关帖子。

**更新：**

也许有更好的方法来实现这一点。总体目标是向用户显示他们在查看结果集时单击了哪个链接。所以当点击“THings”时，链接有绿色背景和白色类型等。由于JQuery正在删除页面重新加载时添加的类，php会是更好的解决方案吗？

**更新 2**

所有建议的代码都有效。由于链接正在重新加载页面并通过 url 参数进行过滤，因此问题未解决，但答案完全正确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T21:09:47.883

```
$("div.more a").on("click", function () {
    $(this).removeClass("static").addClass("active");
}); 
```

`$(this)`在这种情况下表示当前单击的对象。

我无法解释添加类不起作用的事情。我刚刚用最新的 jquery 试了一下，它正在工作。你确定它没有添加活动？

### 编辑

```
$(function(){
    $("div.more a").forEach(function(i){
        var active = window.location.hash;

        if($(this).text() == active){
            $(this).trigger('click');
        }
    });
}); 
```

然后无耻地从亚历山大下面的答案中窃取：P：

```
$("div.more a").on("click", function (event) {
   event.preventDefault();
  // Revert all to original state
  $("a.static")
    .removeClass("active")
    .addClass("static");
  // Set classes to clicked anchor
  $(this)
    .removeClass("static")
    .addClass("active");

  window.location.hash = $(this).text();
}); 
```

有这样的尝试。它可能有几个错误，但我相信通过一些阅读你可以修复它们。

再次编辑：

注意：

```
 event.preventDefault(); 
```

这意味着不要点击链接，因此当您单击此链接时它不会重新加载页面。我认为这实际上解决了你的问题。

注意记得使用：

```
$("div.more a").on("click", function (event) { 
```

否则就不行了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T21:20:01.940

我会这样做：

```
$("div.more a").on("click", function () {
  // Revert all to original state
  $("a.static")
    .removeClass("active")
    .addClass("static");
  // Set classes to clicked anchor
  $(this)
    .removeClass("static")
    .addClass("active");
}); 
```

*   `active`从所有锚点中删除类。
*   将类添加`static`到所有锚点。
*   `static`从单击的锚点中删除类。
*   将类添加`active`到单击的锚点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T21:27:23.740

如果您正在谈论动态生成的元素，则需要使用该`.on()`方法（ok），但将单击侦听器绑定到以下`a`元素：

```
$("div.more").on('click', 'a:not(.active)', function () {
    $(this).addClass('active').siblings('.active').removeClass('active').addClass('static');
}); 
```

使用`a:not(.active)`您附加单击 ev。到未来的元素，并确保单击的元素还没有该类`active`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-23T21:27:50.890

尝试：

```
$("div.more a").on("click", function () {
    $("a.active").removeClass("active").addClass("static");
    $(this).removeClass("static").addClass("active");
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-23T21:38:11.340

您只需将 onclick 函数包装在

```
$(document).ready(function() {}); 
```

这样它就会在文档准备好后进行侦听。无论您选择哪种答案或格式：

```
$(document).ready(function() {
    $("div.more a").click(function () {
        $("a.static").removeClass("static");
        $(this).addClass("active");
    });
}); 
```

真的很简单

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-18T17:22:37.033

我尝试了以上所有方法，但以上都没有解决我的问题。不是因为他们不是很好的例子，而是因为我不理解那些。但是我编辑了@Duncanmoo 解决方案，它对我有用。这也可能对您有用。

```
$(document).ready(function() {
$("ul.arbetstagare a").click(function () {
    $("a").removeClass("active");
    $("a.active").removeClass("static");
    $(this).addClass("active");
});}); 
```

# android - Android - 在模拟器中同时使用两个不同的程序

> ID：11172998
> 
> 赞同：3
> 
> 时间：2012-06-23T21:07:29.177
> 
> 标签：android, command-line, emulation

我是 Android 开发的新手。我的操作系统是 WinXP。

我正在尝试**在命令行中**的 Android Device Emulator 上安装两个不同的应用程序。

*   我有两个 Android 项目“ap1”和“ap2”。

*   在“ap1”项目目录中，我运行了“ant debug”。我有一个“ap1.apk”可执行文件。

*   在“ap2”项目目录中，我运行了“ant debug”。我有一个“ap2.apk”可执行文件。

*   我创建了一个 Android 虚拟设备：

    cmd_line> android 创建 avd -n avd1 -t 1 --abi x86

*   我启动了模拟器：

    cmd_line> 模拟器 -avd avd1 -verbose

*   “adb devices”命令返回：

    附加设备列表

    模拟器 5554 设备

*   我在模拟器上安装了第一个程序：

    cmd_line> adb -s emulator-5554 安装“ap1.apk”

*   我运行了程序：

    cmd_line> adb shell am start -a android.intent.action.MAIN -n my.pkg.android/.Activity1

    => 它奏效了。

*   我在模拟器上安装了第二个程序：

    cmd_line> adb -s emulator-5554 安装“ap2.apk”

*   我运行了程序：

    cmd_line> adb shell am start -a android.intent.action.MAIN -n my.pkg2.android/.AnotherActivity1

    => 它奏效了。

除了第二个可执行文件“替换”了第一个可执行文件之外，所有这些都有效。

如果我尝试运行第一个可执行文件，则会收到错误消息：

cmd_line> adb shell am start -a android.intent.action.MAIN -n my.pkg.android/.Activity1

开始： Intent { act=android.intent.action.MAIN cmp=my.pkg.android/.Activity1 }

错误类型 3

错误：活动类 {my.pkg.android/my.pkg.android.Activity1} 不存在。

看起来我不能在模拟器中同时拥有这两个应用程序。

你怎么看？

我必须做什么才能在模拟器中（同时）使用这两个应用程序？

谢谢你的帮忙。

最好的祝福。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T21:12:55.710

> 除了第二个可执行文件“替换”了第一个可执行文件之外，所有这些都有效。

大概，你给了他们相同的包名。包名称在设备上必须是唯一的，并且在 Play 商店中是唯一的（对于您计划发布的应用程序）。如果您希望同时在模拟器上安装两个应用程序，请为它们提供单独的包名称。