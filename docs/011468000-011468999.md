# StackOverflow 问答 11468000-11468999

# ruby - Array.reject!，它是如何工作的？

> ID：11468001
> 
> 赞同：5
> 
> 时间：2012-07-13T09:45:26.450
> 
> 标签：ruby, arrays, object, iteration

我今天制作了一个非常小的 ruby​​ 脚本，它使用正则表达式来跟踪具有特定名称的文件中的某些内容，并在添加替换之前删除该内容。（否则在迭代过程中会出错）。

我不太习惯 ruby​​（自从我的假期工作开始，即 1-2 周前才开始使用它），但我的一个习惯是在迭代列表时避免接触列表（或大多数其他 ADT 使用索引）（删除某些内容），无论我使用哪种语言。

经过一番搜索，我发现了一些`Array`可以提供帮助的功能。现在，我正在使用`Array.reject!`并且脚本的工作方式就像我希望它工作一样，但老实说，我无法弄清楚为什么`Array.reject! {|line| line =~ regex }`跳过数组中的对象没有问题。这些来源，[ruby​​-docs](http://www.ruby-doc.org/core-1.9.3/Array.html)和[一些随机网站](http://apidock.com/ruby/Array/reject!)，确认更改在迭代时**立即**应用，这让我想知道它是如何不搞砸的......被删除的行之间没有空格/单词，只会`\n`带来下一个当然是它自己的行（但这只是字符串结尾的一部分）。

有人对此有很好的解释吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-13T10:47:43.807

`Array#reject!`使用`for`循环遍历数组的元素。这是C代码：

```
for (i = 0; i < RARRAY_LEN(ary); ) {
  VALUE v = RARRAY_PTR(ary)[i];
  if (RTEST(rb_yield(v))) {
    rb_ary_delete_at(ary, i);
    result = ary;
  } 
  else {
    i++;
  }
} 
```

有趣的部分是在语句`i`中没有增加。`for`如果给定的块`reject!`评估`true`当前元素被删除并`ary[i]`自动指向下一个元素。只有当它评估为 时`false`，`i`才会递增。

```
[a b c d].reject! {|x| x == b}

 0 <------- i # doesn't match => i++
[a b c d]

   1 <----- i # matches => delete ary[i]
[a b c d]

   1 <----- i # doesn't match => i++
[a c d]

     2 <--- i # doesn't match => finished
[a c d] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T10:31:03.270

这是 的源代码`ary_reject_bang`，是 的 C 实现的核心`reject!`。

```
static VALUE
ary_reject_bang(VALUE ary)
{
    long i;
    VALUE result = Qnil;

    rb_ary_modify_check(ary);
    for (i = 0; i < RARRAY_LEN(ary); ) {
        VALUE v = RARRAY_PTR(ary)[i];
        if (RTEST(rb_yield(v))) {
            rb_ary_delete_at(ary, i);
            result = ary;
        }
        else {
            i++;
        }
    }
    return result;
} 
```

`RARRAY_PTR`是定义在 中的宏`ruby.h`，它使您可以访问 Ruby 数组的底层 C 数组。实际删除是用 完成的`rb_ary_delete_at`，它使用一些其他宏来保持数组的顺序：

```
VALUE
rb_ary_delete_at(VALUE ary, long pos)
{
    long len = RARRAY_LEN(ary);
    VALUE del;

    if (pos >= len) return Qnil;
    if (pos < 0) {
        pos += len;
        if (pos < 0) return Qnil;
    }

    rb_ary_modify(ary);
    del = RARRAY_PTR(ary)[pos];
    MEMMOVE(RARRAY_PTR(ary)+pos, RARRAY_PTR(ary)+pos+1, VALUE,
        RARRAY_LEN(ary)-pos-1);
    ARY_INCREASE_LEN(ary, -1);

    return del;
} 
```

# java - 使用 Eclipse 研究 Java 中的数据结构

> ID：11468011
> 
> 赞同：-1
> 
> 时间：2012-07-13T09:45:52.190
> 
> 标签：java, eclipse, data-structures

我在java中有一个对象，我知道这个对象包含对我有用的信息，问题是我不知道字段的名称，我不知道这个对象是否包含真实数据或只是引用，考虑到这一点和事实上我只知道这个对象的标签，我有什么选项来调试这个数据结构并从中获取信息？

可以列出与特定类型对应的每个对象吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T10:07:59.117

要打印（和搜索）类中的字段：

```
static Object fieldOdClass(final String className,
        final String valeurRecherche1) {
        try {
            final Field[] f = Class.forName(className).getFields();
            for (int i = f.length - 1; i >= 0; i--) {
                System.out.println(f[i].toString());
                if (f[i].toString().endsWith(valeurRecherche1)) {
                    return f[i].toString();
                }
            }
        } catch (final ClassNotFoundException e) {
            // manage errors;
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T09:49:53.220

打开源文件，然后查看大纲视图：

如果它在您的透视图中不可见，请转到：*Window* > *Show View* > *Outline*

这应该让您对对象提供的数据/方法有一个很好的概述。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T09:55:04.527

解决此问题的最佳方法是让该对象处于调试模式，您可以在该模式下轻松地在 Watch View 中发现对象字段及其值。但是，如果您无法在调试中运行，这将变得很棘手。我建议的其他方法是`toString()`使用一些通用逻辑覆盖方法，该逻辑使用反射递归地输出所有内容。您可以在不使用任何 JSON/XML 序列化库实现的样板代码的情况下完成相同的操作。剩下的就是让它在这个地方工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-13T12:26:42.617

您可以使用 Eclipse 中的 Debug 在运行时查看对象的所有属性。它非常有用，您无需创建任何代码。只需在读取对象的行处放置一个断点。此外，当您的应用程序在调试模式下运行并且读取对象的行被突出显示时，您可以按 CTRL+SHIFT+I 来查看详细信息。

# jquery - .submit() 是否丢失了提交类型的输入的名称

> ID：11468017
> 
> 赞同：1
> 
> 时间：2012-07-13T09:46:21.753
> 
> 标签：jquery, forms

我想知道，我的表单上有一个 2 输入提交。一个有名字：

```
<input name="_close" type="submit" id="myId" value="close"> 
```

当我点击它时，我通过（在 JS 中做事之后）提交表单

```
$('#myForm').submit(); 
```

然后在我的服务器代码中，我测试`Request`它是否具有`query`“_close”，但似乎并非如此。

我的问题是： **有没有办法让`jQuery`方法`.submit()`保留单击的输入按钮的名称，或者`.submit()`在下一个请求中手动指定函数我想要的额外参数？**

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T09:49:56.373

我不确定提交按钮以及如何/如果它们被传递但是如果它们不是你可以在你的预提交javascript中将值分配给同名的隐藏输入。

我刚刚为您运行了一个示例。

**测试.html**

```
<form action="test.php" action="POST" >
    <input type="submit" name="submitButton" value="Click me to submit" />
</form> 
```

**测试.php**

```
<?php
    echo $_POST['submitButton'];
?> 
```

这确实回声**点击我提交**

然后我使用 jquery 中的提交函数进行了另一次测试，该函数没有传递值。

原因是您可以测试服务器端按下了哪个提交按钮，因为表单上可能有多个提交按钮。检查该值允许您测试用于提交表单的具体是哪一个。

为了允许您将外部输入用作特定的提交按钮，以便在请求中传递其名称/值对而不是`submit()`在 jquery 中调用表单，请选择提交按钮本身并调用`click()`它。这将告诉表单该特定提交按钮已被使用，因此在请求中设置其值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T10:11:04.043

代替

```
$('#myForm').submit() 
```

尝试

```
$('#myId').click(); 
```

这将使您的表单提交同时您可以识别哪个按钮触发了表单提交。

# php - 在 Zend 中没有得到正确的当前时间

> ID：11468018
> 
> 赞同：1
> 
> 时间：2012-07-13T09:46:22.957
> 
> 标签：php, zend-framework, datetime

我尝试使用获取当前日期和时间

```
$date = new Zend_Date();
echo $date; 
```

这给了我正确的日期，但时间不正确。应该是**Jul 13, 2012 3:14:42 PM**，但它显示**Jul 13, 2012 9:32:42 AM**。

为什么是这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T09:57:59.777

正如您的评论暗示您将时区设置为`ASIA`. 从您在问题中发布的日期/时间开始，我想您需要将其设置为。

```
date_default_timezone_set('Asia/Calcutta'); 
```

试一试或直接在 php.ini 中设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T09:49:22.727

将您的时区设置为默认时区。

// eg: 德国人在德国的时区

`date_default_timezone_set('Europe/Berlin');`

# linq - 如何从 DateTime 获取 ToString()

> ID：11468020
> 
> 赞同：0
> 
> 时间：2012-07-13T09:46:26.217
> 
> 标签：linq

我尝试使用以下代码获取字符串的 ToLower() 方法。

```
 var tolowerMethod = typeof(string).GetMethods().Where(m => m.Name == "ToLower").FirstOrDefault(); 
```

我正在尝试获取 DateTime 的 ToString() 方法。我使用了下面的代码

```
var formatMethod = typeof(DateTime).GetMethods().Where(m => m.Name == "ToString").ElementAt(1); 
```

这不是唯一的。我尝试过类似下面的方法，但没有成功。

```
var formatMethod2 = typeof(DateTime).GetMethods().Where(m => m.Name == "ToString").Where(x=>x.GetParameters().Select(t=>t.ParameterType).Equals(typeof(string))).FirstOrDefault(); 
```

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T10:09:09.717

它必须是linq吗？你可能想要这样的东西：

```
 var x = typeof(DateTime).GetMethod("ToString", new Type[] { typeof(string) }); 
```

或者

```
 var x = typeof(DateTime).GetMethod("ToString", new Type[] { }); 
```

或者 ...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T10:09:17.300

这取决于您想要的 ToString( ) 方法的哪个重载：

```
var method = typeof( DateTime ).GetMethods( )
                               .Where ( item => item.Name == "ToString" && 
                                                item.GetParameters( ).Count () == 0 );

// this is the DateTime.Now.ToString( ) method without any parameter 
```

# python - 从列表中填充字典值

> ID：11468027
> 
> 赞同：7
> 
> 时间：2012-07-13T09:46:41.893
> 
> 标签：python, list, dictionary

我正在尝试在 python 中构建一个字典。代码如下所示：

```
dicti = {}
keys = [1, 2, 3, 4, 5, 6, 7, 8, 9]
dicti = dicti.fromkeys(keys)

values = [2, 3, 4, 5, 6, 7, 8, 9] 
```

如何使用列表填充字典的值？有一些内置功能吗？

结果应该是这样的：

```
dicti = {1:2,2:3,3:4,4:5,5:6,6:7,7:8,8:9} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-13T09:48:24.703

如果您有两个列表`keys`和**相应** `values`的：

```
keys = [1, 2, 3, 4, 5, 6, 7, 8, 9]
values = [2, 3, 4, 5, 6, 7, 8, 9]
dicti = dict(zip(keys, values)) 
```

`dicti`就是现在`{1: 2, 2: 3, 3: 4, 4: 5, 5: 6, 6: 7, 7: 8, 8: 9}`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-09-15T07:04:57.713

**针对您的具体情况的**另一种衬里是：

```
dicti = {k:v for k, v in enumerate(values, start=1)} 
```

结果是：

```
print(dicti)
{1:2,2:3,3:4,4:5,5:6,6:7,7:8,8:9} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-17T19:12:44.240

这将起作用，但列表必须具有相同的大小（将 9 放在键列表中）

```
keys = [1, 2, 3, 4, 5, 6, 7, 8]
values = [2, 3, 4, 5, 6, 7, 8, 9]
dicti = {}

for x in range(len(keys)):
     dicti[keys[x]] = values[x] 
```

# sql-server-2008 - 在查看表结构时按列名对结果进行排序

> ID：11468035
> 
> 赞同：0
> 
> 时间：2012-07-13T09:47:07.543
> 
> 标签：sql-server-2008

使用该命令**查看 Sql Server 2008**中表的结构时`alt+F1`，结果窗口中的列顺序与创建表时的顺序相同。我们不能更改以按字母顺序排列结果吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T09:53:22.297

你可以看看[信息架构视图（Transact-SQL）](http://msdn.microsoft.com/en-us/library/ms186778.aspx)

您可能还想看看这篇有用的文章

[SQL Server 故障排除提示和技巧](http://sqlserverpedia.com/wiki/SQL_Server_Troubleshooting_Tips_and_Tricks)

# java - 在 Windows 中使用 Java 处理在 UNIX 环境中创建的文本文件

> ID：11468036
> 
> 赞同：0
> 
> 时间：2012-07-13T09:47:12.503
> 
> 标签：java, unix, carriage-return, linefeed

我有一个在 Unix 环境中创建的文本文件。现在我想在 java 中但在 Windows 环境中处理这个文件。那么无论如何我可以摆脱换行符的问题，因为 Unix 换行十六进制代码是“0A”，但在 Windows 中它是“0D”和“0A”（回车和换行）。

注意：我不建议文件创建者更改它。所以我必须找到解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T10:11:00.760

有很多方法可以将文件转换为 windows 格式。在让 java 程序处理它之前先转换它。

如何在 Unix 和 Windows 文本文件之间进行转换：

[http://kb.iu.edu/data/acux.html](http://kb.iu.edu/data/acux.html)

# iphone - iPhone：如何重新创建 XCode 内置的 git 存储库？

> ID：11468041
> 
> 赞同：1
> 
> 时间：2012-07-13T09:47:31.973
> 
> 标签：iphone, xcode, git, repository

我想在 XCode 中使用 git 进行 iPhone 应用程序开发。
我从几天前开始使用它。

但是重命名 XCode 项目名称后，提交不再起作用。

所以我尝试重新创建 git 存储库。
我可以删除旧的存储库，并可以使用 XCode 的 Organizer 创建新的存储库。

但我不知道如何使用项目中的新存储库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T10:27:26.073

刚刚重命名我的项目，这是一个有趣的问题:)

我调用了提交对话框，一切看起来都很好，但是在提交时，我遇到了同样的问题。看起来项目名称没有将新项目目录添加到 git。（您确实通过 Xcode 更改了项目名称，不是吗，如果您没有，我会重命名它，然后通过 Xcode 更改它。）

首先，既然你已经重建了存储库，我会解决你的问题。

问题可能是项目未添加到存储库中。如果你有 '？' 标记旁边的文件，你只需要做一个源代码管理 | 在文件浏览器中添加文件（和项目）。

如果这不能解决它，您可能会将旧项目名称签入存储库（我不知道从 Xcode 中删除是否真的删除旧存储库或只是取消注册它。我遇到了这个问题并从命令行修复了它

```
cd <project directory>
PATH=$PATH:/Applications/Xcode.app/Contents/Developer/usr/bin/
git rm <old project name>.xcodeproj 
```

最后一个命令给了我一个错误，但似乎确实从存储库中删除了有问题的条目。

希望您现在可以启动并运行。

我通过在旧存储库上工作解决了这个问题，所以我所做的是为处于类似位置的其他人。

（这主要是命令行的东西） // 在 Xcode 中，将项目添加到 git：在文件浏览器中右键单击项目并源代码控制|添加。这应该使 ? 离开。

```
// Add the git directory to your path
PATH=$PATH:/Applications/Xcode.app/Contents/Developer/usr/bin/
// go to your project directory, for me that was something like
cd ~/Projects/<project name>

git rm <old name>.xcodeproj

git commit -m "<commit message" 
```

有几个源文件没有提交，所以我通过右键单击文件并自行提交它们来提交它们。一旦我有了一个干净的项目，我对一个文件进行了更改，然后通过文件菜单进行了提交，以检查整个项目是否正在提交。

# javascript - 使用 jQuery 验证单选按钮

> ID：11468043
> 
> 赞同：0
> 
> 时间：2012-07-13T09:47:32.753
> 
> 标签：javascript, jquery, validation

我有一个包含多个问题的表格（动态创建的问卷）。我使用 jQuery 将收音机样式设置为按钮（http://jqueryui.com/demos/button/#radio），但我在这里稍微减少了代码......

```
<div class="yesnoradios">
    <input type="radio" name="section<%= section %>_question<%= question %>" id="section<%= section %>_question<%= question %>_Y" value="Y" />Yes
    <input type="radio" name="section<%= section %>_question<%= question %>" id="section<%= section %>_question<%= question %>_N" value="N" />No
    <input type="radio" name="section<%= section %>_question<%= question %>" id="section<%= section %>_question<%= question %>_NA" value="NA" />N/A
</div> 
```

所以，我有上面的多个实例，动态命名`id`的。

我正在努力在客户端验证提交时的表单。我需要做的是确保为每个问题选择一个答案。我没有很多 jQuery 经验，所以到目前为止我所做的只是围绕每个问题进行循环。

```
$('.yesnoradios').each(function(index) {
    alert($(this).attr("id"));
}); 
```

我想我会提到，在查看英文页面时，它使用`select`的是 's 而不是单选按钮，我可以很好地验证，但在这种情况下我不能使用它的原因是用户正在查看页面中的“是”或“否”的等价物根据您如何构建问题而有所不同，因此我使用的是勾号和叉号。

提前感谢您的帮助。

**编辑：**我试图做的是使用 .children() 函数来检查一个是否被选中，如果没有设置一个标志，表明表单无效。但是我无法正确使用语法，并且还没有找到一个好的代码示例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T10:07:58.390

假设您有很多以下...

```
<div class="yesnoradios">
    <input type="radio" name="section<%= section %>_question<%= question %>" id="section<%= section %>_question<%= question %>_Y" value="Y" />Yes
    <input type="radio" name="section<%= section %>_question<%= question %>" id="section<%= section %>_question<%= question %>_N" value="N" />No
    <input type="radio" name="section<%= section %>_question<%= question %>" id="section<%= section %>_question<%= question %>_NA" value="NA" />N/A
</div> 
```

您可以使用以下代码查看是否至少选择了所有组中的一个

```
$('.yesnoradios input[type=radio]:checked').length 
```

这将为您提供已检查的组的确切编号。使用 no 进行检查，`class="yesnoradios"`如果您的 no 相同，则每个 yesnoradio div 中至少有一个收音机已被检查

```
if($('.yesnoradios').length == $('.yesnoradios input[type=radio]:checked').length){
    //all groups have at least one radio checked
}else{
    //not all are chedked and you can loop your else logic here
} 
```

**注意：**一组中的所有收音机都应该具有相同的名称......并且由于您在此处发布了未渲染的 html，因此我假设它确实如此。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T09:50:31.333

```
if ($('input[name='+ radioName +']:checked').length) {
           // at least one of the radio buttons was checked
           return true; // allow whatever action would normally happen to continue
      }
      else {
           // no radio button was checked
           return false; // stop whatever action would normally happen
      } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T10:03:36.407

试试这个。你的 html 应该像

```
radio buttons with class "optionCls" in a div with id question1
radio buttons with class "optionCls" in a div with id question2
.
. 
```

现在你可以像这样引用它

```
if($('#question1.optionCls :checked').length() > 0) 
     alert('valid'); //will tell you for question1 whether answer is selected or not 
```

构建您的逻辑以使其具有动态性

# entity-framework - 断开模式下的实体框架更新

> ID：11468045
> 
> 赞同：0
> 
> 时间：2012-07-13T09:47:39.920
> 
> 标签：entity-framework

我正在尝试使用从 UI 发送的对象（即订单）更新实体订单。

我的方法中有以下内容

```
Order neworder = new Order
        {
            ID = order.ID,
            FirstName = order.FirstName,
            LastName = order.LastName,
        };
        _bentities.Order.ApplyCurrentValues(neworder);

        _bentities.SaveChanges(); 
```

如果我填写实体 Order 的所有不可为空的值，这将正常工作。但是我只有很少的属性被修改。我只想更新这些修改后的属性（不是所有未修改的不可为空的值）

我该怎么做？

我已阅读我可以将修改后的属性设置为：

```
var entry = _bentities.ObjectStateManager.GetObjectStateEntry(((IEntityWithKey)neworder).EntityKey);
        entry.SetModifiedProperty("FirstName");
        entry.SetModifiedProperty("LastName"); 
```

但是，由于某种原因，这不起作用。我收到一个异常，即 EntityKey 不能为空。如何为 neworder 设置 entitykey，然后这会起作用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T12:28:45.443

如果您尝试*更新*和实体，则必须先从数据库中获取它，然后调用`ApplkyCurrentValues`.

```
order originalOrder = _bentities.Orders.FirstOrDefault(o => o.ID == updatedOrder.ID);
_bentities.Orders.ApplyCurrentValues(updatedOrder); 
```

# playframework - Play 中漂亮的输出格式！框架 1.2.5？

> ID：11468049
> 
> 赞同：0
> 
> 时间：2012-07-13T09:47:53.720
> 
> 标签：playframework, output-formatting

我想玩！漂亮地格式化我的 XML 响应。我的目标是创建干净的、人类可读的 XML 服务。

默认播放！我手工制作的 XML 格式中的缩进混乱，即如果另一个循环中有一个循环。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T10:28:10.580

我假设您`renderXml()`在控制器操作中使用该功能。

RenderXml 有几个重载方法，但我假设您使用的是传入 an`Object`或 a 的方法`Document`。如果传入一个对象，它会使用 XStream 将对象转换为 XML。如果你传入一个 Document 对象，它会使用 apache 的 XMLSerializer。

该方法还可以接收一个`CharSequence`（如 String 或 StringBuffer），因此如果您手动创建自己的 XML，并将其作为 String 或 StringBuffer 传递，它应该以您发送它的确切格式输出。

# android - android seekbar 句柄 - 长按键

> ID：11468055
> 
> 赞同：0
> 
> 时间：2012-07-13T09:48:18.010
> 
> 标签：android, seekbar

我正在尝试在 android seekbar 拇指手柄上实现长按键事件触发。

有谁知道是否可以识别搜索栏手柄上的长按键（拇指图片）？

谢谢，里奥

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T10:02:02.007

我认为没有任何方法可以支持长按事件，特别是在拇指可绘制对象上。[但是，您可以使用此](https://stackoverflow.com/questions/10641779/register-longclick-listener-on-a-seekbar)答案中建议的一些自定义逻辑来实现此目的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T09:54:25.813

我没有尝试过，但它应该可以工作。

```
SeekBar seek = new SeekBar(Activity.this);
        seek.setOnLongClickListener(new OnLongClickListener() {

            @Override
            public boolean onLongClick(View v) {
                // TODO Auto-generated method stub
                return false;
            }
        }); 
```

# c# - 使用 EF 和 MVVM 从 UI 拦截属性更新的更好方法

> ID：11468059
> 
> 赞同：0
> 
> 时间：2012-07-13T09:48:38.290
> 
> 标签：c#, .net, wpf, entity-framework, mvvm

我有一个具有撤消重做功能的 WPF 应用程序。我使用 EF 与数据库进行交互。

我想知道当 UI 更改某些属性时是否有更好的方法或模式来通知。

这是我目前使用的方法：

*   让 EF 生成类。例如：

    ```
    public partial class Page: IObjectWithChangeTracker, INotifyPropertyChanged
    {
    #region Primitive Properties

    [DataMember]
    public string title
    {
        get { return _title; }
        set
        {
            if (_title != value)
            {
                _title = value;
                OnPropertyChanged("title");
            }
        }
    }
    private string _title;

    ... 
    ```

*   然后在类的非生成部分，我为 UI 添加另一个属性。在这种特殊情况下，该属性绑定到 WPF 文本框：

    ```
    public partial class Page
    {
    public Page()
    {
        ((INotifyPropertyChanged)this).PropertyChanged += Page_PropertyChanged;
    }

    void Page_PropertyChanged(object sender, PropertyChangedEventArgs e)
    {
        switch (e.PropertyName) {
        case "title":
            OnPropertyChanged("titleUI");
            break;
        }
    }

    public string titleUI
    {
        get { return title; }
        set
        {
            if (value == title)
                return;
            string oldValue = title;
            title = value;
            UndoRedo.PushAtomic(
                () => title = oldValue, 
                () => title = value,
                "change page title");
        }
    }

    ... 
    ```

为此，我曾经听过 FrameworkElement.SourceUpdated，但我放弃了这种方法来更紧密地遵循 MVVM 设计模式。

有没有更好或更简单的方法？

**编辑：**我不直接将TextBox绑定到`title`属性的原因是我不想在属性被TextBox以外的其他东西更新时添加到撤消重做堆栈。此外，当 EF ObjectContext 实现实体时，值由设置器分配，我也不想将其添加到撤消重做堆栈中。

**编辑2：**对于这个问题，我有点放弃了。如果可以，我会删除它。例如，我无法理解关于我的代码不是真正的 MVVM 的评论与手头的问题有什么关系。无论我是否将实体类与所谓的 ViewModel 类严格分开，我仍然必须找到一种方法来“拦截”来自 UI 的更新。我投票关闭。如果你和我一样觉得这无济于事，请做同样的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T10:35:59.943

wpf 文本框有一个内置的撤消/重做 - 所以如果你只是将你的 viewmodel 属性与 mode=twoway 绑定，你的 viewmodel 和你的视图总是同步的，你的文本框处理重做撤消。我想念什么吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T10:05:35.310

不是你想要的答案，但我会看看 Unity 之类的东西：

[http://blogs.msdn.com/b/agile/archive/2011/03/21/interception-in-silverlight-demo.aspx](http://blogs.msdn.com/b/agile/archive/2011/03/21/interception-in-silverlight-demo.aspx)

这是一篇 silverlight 帖子（但它也适用于 WPF 等）。基本上，您可以为您的模型创建一个拦截器并将代码注入属性 getter/setter。这样您就可以调用您的 N 级撤消/重做处理代码，而无需重新实现属性。

您所做的仍然看起来更像是一个富模型而不是视图模型，因为标准视图模型会封装模型

我不想为模型上的每个属性编写一个带有该代码的附加属性 getter/setter

（他们展示了一个虚拟方法拦截器，但可以使用实例拦截器，我认为这会起作用，但听听他们对拦截器的看法以及他们“监听”的范围）

编辑：

抱歉没有真正回答问题

以下是一些建议：

我不确定 EF 是否让您的实体类派生自基类，但这将是一件事 - 您只需在基类中挂钩 PropertyChanged 事件并进行相应处理。您可以`Dictionary<string, object>`在基础上保留 a 以跟踪“旧”值并处理撤消

我了解有关 EF 物化对象的一点 - 你能不能在 UndoRedo 堆栈上添加一个标志，告诉它在物化对象时忽略任何属性更改？

必须有一些方法可以在部分实体类中覆盖，以告诉堆栈绕过任何撤消/重做信息

# c# - 忽略 zip 中的树状结构并使用 DotNetZip 在根中提取

> ID：11468060
> 
> 赞同：0
> 
> 时间：2012-07-13T09:48:39.233
> 
> 标签：c#, dotnetzip

我有一个受密码保护的压缩文件，其中包含另一个 pw 压缩文件，我想在第二个 zip 内的文件夹 0 下检索 xml 文件。但我想在根文件夹（args [0]）中有这个 xml，你有什么想法吗？

它总是在 root/0/project.xml 中提取，我想要 root/project.xml 实际上我希望 xml 在与第一个 zip 相同的文件夹中。

```
using (ZipFile zip = ZipFile.Read(args[0])) {

     zip.Password = "pass1";
     zip.ExtractAll(".",ExtractExistingFileAction.OverwriteSilently);
     using (ZipFile zip2 = ZipFile.Read("0.xtz"))
     {
          ZipEntry e = zip2["0/project.xml"];
          e.ExtractWithPassword(".", ExtractExistingFileAction.OverwriteSilently, "pass2");

     }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T09:55:35.570

将`FlattenFoldersOnExtract`属性设置`true`为 ZipFile

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T09:59:56.013

我在我的案例中找到了一个特定的答案。如果您知道文件名，诀窍是只保留文件名

```
ZipEntry e = zip2["0/project.xml"];
e.Filename="project.xml"
e.ExtractWithPassword(".", ExtractExistingFileAction.OverwriteSilently, "pass2"); 
```

如果您有多个条目来删除任何包含“/”的文件夹并仅保留文件名，您也可以进行循环。

# properties - 通过 Liferay API 创建/使用用户特定属性

> ID：11468061
> 
> 赞同：1
> 
> 时间：2012-07-13T09:48:42.347
> 
> 标签：properties, liferay

我正在寻找可以让我管理用户特定属性的类。

在我的门户中，不同的用户有不同的属性，所以我如何使用 Liferay API 来实现它。

例如，我可以向您展示它在 JBoss Portal 中是如何工作的：

```
Map<String, Object> properties = this.userProfileModule.getProperties(portalUser); 
```

从另一方面我们可以添加一些新属性，如下所示：

```
this.userProfileModule.setProperty(user, name, value); 
```

我需要这样的机制。我会很感激任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T18:28:49.373

您可以在 ControlPanel 中找到“自定义字段”。用于此的 API 是 Expando*（在 google 上搜索`liferay expando`，您会找到关于其使用的各种文档、博客、wiki）

# c - 未找到 GDK 函数

> ID：11468063
> 
> 赞同：2
> 
> 时间：2012-07-13T09:48:45.623
> 
> 标签：c, gtk, gdk

我有一个 gtk 程序，我在其中调用了一个 gdk 函数。我正在使用以下方法编译程序：

```
 gcc `pkg-config --cflags --libs gtk+-2.0 cairo glib-2.0` ... 
```

我已经包括

```
#include <gdk/gdk.h> 
```

它给了我错误：

```
undefined reference to `gdk_device_ungrab' 
```

有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T10:31:29.397

您正在针对 gtk 2.x 进行编译和链接，并且`gdk_device_ungrab`仅从 gtk 3.0 开始可用。

请参阅：http: [//developer.gnome.org/gdk3/3.4/GdkDevice.html#gdk-device-ungrab](http://developer.gnome.org/gdk3/3.4/GdkDevice.html#gdk-device-ungrab)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-13T10:25:34.480

您必须将源文件或目标文件放在命令行中的库*之前*，即在开头，在 pkg-config 部分之前。

链接器按照命令行中指定的顺序添加对象和库；如果 gdk 库列在您的源文件之前，则链接器不知道您的代码需要该库，直到为时已晚。

# sql - OLE DB 提供程序“MSDASQL”报告错误

> ID：11468065
> 
> 赞同：2
> 
> 时间：2012-07-13T09:48:59.680
> 
> 标签：sql, asp-classic

我正在尝试运行此代码：

```
<%
Dim rsSelectOrder
Dim rsSelectOrder_numRows

Set rsSelectOrder = Server.CreateObject("ADODB.Recordset")
rsSelectOrder.ActiveConnection = MM_conn_to_mhwebdb_STRING
rsSelectOrder.Source = "SELECT * from " & ActinicPersons &" p, " &ActinicOrders&" o WHERE p.    [Contact ID] = o.[Invoice Contact ID] AND o.[Order Number] NOT IN ( SELECT OrderNumber from    dbo.tbl_OrdersEntered )"
rsSelectOrder.CursorType = 0
rsSelectOrder.CursorLocation = 2
rsSelectOrder.LockType = 1
rsSelectOrder.Open()

rsSelectOrder_numRows = 0
%> 
```

使用以下连接：

```
<%
' FileName="Connection_odbc_conn_dsn.htm"
' Type="ADO" 
' DesigntimeType="ADO"
' HTTP="true"
' Catalog=""
' Schema=""

Dim ActinicPersons, ActinicOrders, ActinicOrderLines, ActinicPayments
ActinicPersons = "OpenRowset('MSDASQL', 'Driver={Microsoft Text Driver (*.txt; *.csv)};          DefaultDir=C:\inetpub\ActinicOrderFiles\;','select *  FROM persons.csv')"
ActinicOrders = "OpenRowset('MSDASQL', 'Driver={Microsoft Text Driver (*.txt; *.csv)};      DefaultDir=C:\inetpub\ActinicOrderFiles\;','select *  FROM orders.csv')"
ActinicOrderLines = "OpenRowset('MSDASQL', 'Driver={Microsoft Text Driver (*.txt; *.csv)};      DefaultDir=C:\inetpub\ActinicOrderFiles\;','select *  FROM orderlines.csv')"
ActinicPayments = "OpenRowset('MSDASQL', 'Driver={Microsoft Text Driver (*.txt; *.csv)};      DefaultDir=C:\inetpub\ActinicOrderFiles\;','select *  FROM payments.csv')"
%> 
```

不幸的是，即使在服务器管理中运行此代码，我也会看到以下错误消息：

链接服务器“（null）”的 OLE DB 提供程序“MSDASQL”返回消息“[Microsoft][ODBC Driver Manager] Data source name not found and no default driver specified”。消息 7303，级别 16，状态 1，行 1 无法初始化链接服务器“（null）”的 OLE DB 提供程序“MSDASQL”的数据源对象。

关于如何解决它的任何想法？我已经为连接设置了 DSN

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T13:54:39.283

这可能是 x32 和 x64 驱动程序之间的问题，这将引发“找不到驱动程序”错误。

试试这个：[找不到数据源名称并且没有指定默认驱动程序](https://stackoverflow.com/questions/6490543/data-source-name-not-found-and-no-default-driver-specified)

# php - PHP 函数错误不能在写入上下文中使用函数返回值 - 函数返回一个数组。大脑慢慢崩溃

> ID：11468071
> 
> 赞同：0
> 
> 时间：2012-07-13T09:49:29.483
> 
> 标签：php, function, switch-statement, case-statement

我正在调用一个返回数组的函数，但我遇到了这个错误：Can't use function return value in write context

很多人得到这个错误，但我看不出我做错了什么。

这是功能：

```
function select_image_styles_from_category($category)
{
$image_details();
switch($category)
{
    case 'twine':
            $image_details[0] = get_bloginfo('template_directory') . '/images/titles/blog-twine.png';
            $image_details[1] = 'on-top';
            break;
    case 'scrapbook':
            $image_details[0] = get_bloginfo('template_directory') . '/images/blog/papers.png';
            $image_details[1] = 'on-top';
            break;
    default:
            $image_details[0] = 'stuff';
            $image_details[1] = 'things';
}

return $image_details;

} 
```

然后我从另一个函数调用这个函数，这是它出错的那一行（这个函数中有更多，但它对问题的其余部分来说是多余的）：

```
function add_img_styles_to_special_categories($the_content_string, $category)
{
        //erroring line
    $image_details() = select_image_styles_from_category($category);
} 
```

我错过了演员表吗？我需要显式构造一个数组吗？我把案件陈述作废了吗？我真的看不出我错过了什么。你们中的任何漂亮可爱的人有任何指示吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T09:50:58.323

`$image_details()`是一个函数调用，您不能写入函数。您只想将其返回给调用者吗？

```
return select_image_styles_from_category($category); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T09:52:57.167

当您只想分配一个变量时，您编写的代码看起来像是在调用一个函数。

这

```
$image_details(); 
```

表示“取 的值`$image_details`，将其解释为函数的名称并调用该函数”。

因此，当您（显然错误地）放置额外的括号并写下

```
$image_details() = select_image_styles_from_category($category); 
```

编译器将其读取为“获取 的值`$image_details`，将其解释为函数的名称，调用该函数*并将结果分配`select_image_styles_from_category()`给它*”。但是您不能将任何内容分配给函数的结果（您只能将其存储在某处），因此会出现错误。

# r - 控制空晶格面板的放置

> ID：11468072
> 
> 赞同：6
> 
> 时间：2012-07-13T09:49:32.563
> 
> 标签：r, lattice

当绘制比完整网格更少的面板时，您会得到一个没有面板的间隙。大多数格子函数将间隙放在右上角，但我希望它在右下角，就像`marginal.plot`那样（见图）。有没有办法让其他晶格函数做同样的事情？

![marignal.plot 帮助页面中的示例](../Images/b89975d00032b7a906c05b4a9d14f628.png)

我知道面板顺序是由条件变量的因子水平的顺序决定的，或者通过使用`index.cond`参数来决定，但这对我没有帮助。我试图破译的代码`marginal.plot`，但一直无法弄清楚，所以任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-14T02:03:20.167

真正的`as.table=`论点是让用户指定开始放置面板的角落（即左上角或左下角）。因此，它只能让您有限和偶然地控制面板的位置和不绘制的位置。

为了更好地控制面板放置，请使用`skip=`参数（可能与 一致`as.table=TRUE`）：

```
# 'skip' plotting of the central panel.
# Note: skip <- c(0,0,0,0,1,0,0,0,0) or even 'skip <- 1:9 %in% 5' would also work
skip <- c(F,F,F,F,T,F,F,F,F) 
xyplot(lat ~ long | Depth, data = quakes, skip = skip, layout = c(3,3)) 
```

![在此处输入图像描述](../Images/ff8cf5dc5808d1946a42b1ebb9f3355c.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T12:17:07.773

对于大多数格子图，该`as.table=TRUE`选项应该通过首先填充顶行而不是底行来执行此操作。

# wcf - Tridion 2011 SP1：使用核心服务创建客户端应用程序时面临问题

> ID：11468074
> 
> 赞同：3
> 
> 时间：2012-07-13T09:49:39.460
> 
> 标签：wcf, web-services, tridion, tridion-2011

我使用核心服务创建了一个小型应用程序，当我们在 CMS 服务器上运行它时它运行良好。但是当我将它托管在我的客户端机器上并运行时，它无法正常工作。

我检查了网络服务客户端是否能够连接网络服务。Web 服务的 URl - IP:5001/webservices/CoreService2011.svc 这个 url 向我显示了一个页面，其内容如下

> 您已经创建了一个服务。
> 
> 要测试此服务，您需要创建一个客户端并使用它来调用该服务。您可以使用命令行中的 svcutil.exe 工具执行此操作，语法如下：
> 
> svcutil.exe [http://vmadtridiecmesx.ecmlab.com:5001/webservices/CoreService2011.svc?wsdl](http://vmadtridiecmesx.ecmlab.com:5001/webservices/CoreService2011.svc?wsdl)
> 
> 这将生成一个配置文件和一个包含客户端类的代码文件。将这两个文件添加到您的客户端应用程序并使用生成的客户端类来调用服务。例如：

如果我从这里点击链接“http://vmadtridiecmesx.ecmlab.com:5001/webservices/CoreService2011.svc?wsdl”。它让我出错。

> 未知主机
> 
> * * *
> 
> ## 说明：无法找到名为“vmadtridiecmesx.ecmlab.com”的服务器 --- 该服务器没有 DNS 条目。可能服务器名称拼写错误，或者服务器不再存在。仔细检查名称并重试。

这是问题吗？如果没有，有人可以帮助我知道确切的问题是什么。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T10:03:38.697

实际上，您似乎无法联系那台机器，因为它没有 DNS 条目（因此它无法查找 IP）。

如果您访问 CoreService2011.svc?wsdl URL，您应该得到 WSDL XML - 而不是错误。

您是否在配置中使用 IP？还是机器名称？

无论哪种方式，我都建议修复 DNS 问题，以便您的客户可以使用 CM 机器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T12:07:45.593

检查是否可以使用 TELNET 连接到指定端口的主机。我怀疑端口已关闭，这可能是防火墙问题。

# ruby-on-rails - Mongoid : IPv6 地址存储

> ID：11468075
> 
> 赞同：2
> 
> 时间：2012-07-13T09:49:41.583
> 
> 标签：ruby-on-rails, mongodb, mongoid, ipv6

我需要使用 Rails3 + Mongoid 将 IPv6 地址存储在 Mongodb 数据库中。

集合中还将（大部分）有 IPv4 地址。

我需要将地址存储为小数，因为我必须查询属于网络的地址（我会将网络和地址存储在不同的集合中）。

我使用 BigDecimals 来存储这些地址（因为 IPv6 地址的长度为 128 位），但是当我尝试查找哪些地址属于网络（具体而言：在网络地址和广播地址之间）时，我找不到任何可行的解决方案。

Mongoid "gte" 和 "lte" 似乎只适用于整数（BigDecimals 实际上是字符串）并返回一个空列表，我没有找到一种方法来查询我的 mongoid 模型的字符串范围。

MongoDB 似乎允许这样做（[http://www.mongodb.org/display/DOCS/min+and+max+Query+Specifiers](http://www.mongodb.org/display/DOCS/min+and+max+Query+Specifiers)），但我在 mongoid doc 中找不到相应的语法。

像下面这样的查询会引发可怕的“db assertion failure”：

```
Network.min(address: ip.network.to_i.to_s).max(address: ip.broadcast.to_i.to_s) 
```

“ip.to_i.to_s” 提供十进制地址的字符串表示，因为我使用的是 IPAddress gem。

仅“to_i”或“BigDecimal.new(ip.network.to_i)”出现相同的错误

另一种解决方案是将 v6 地址存储在 2 个 64 位整数中，但对于范围查询来说要复杂得多，我想对 v6 和 v4 地址使用相同的行为。

有没有人有处理数据库中 IPv6 地址查询的干净方法的经验？

这是我当前的网络模型：

```
class Network

  # INCLUSIONS

    include Mongoid::Document
    include Mongoid::Timestamps

  # RELATIONS

    belongs_to :vlan

  # FIELDS

    field :description
    field :address, type: BigDecimal
    field :prefix,  type: Integer
    field :v6,      type: Boolean
    field :routed,  type: Boolean

  # VALIDATIONS

    validates :ip,
      presence: true

    # Address must be a valid IP address
    validate :ip do
      errors.add(:ip, :invalid) unless ip? && ip == ip.network
    end

  # INSTANCE METHODS

    # Returns string representation of the address
    def address
      ip.to_s if ip
    end

    def address= value
      raise NoMethodError, 'address can not be set directly'
    end

    # Provides the IPAddress object
    def ip
      unless @ip.is_a?(IPAddress) || self[:address].blank?
        # Generate IP address
        if self[:v6]
          @ip = IPAddress::IPv6.parse_u128 self[:address].to_i
        else
          @ip = IPAddress::IPv4.parse_u32 self[:address].to_i
        end
        # Set IP prefix
        @ip.prefix = self[:prefix] if self[:prefix]
      end
      @ip
    end

    # Sets network IP
    def ip= value
      value          = value.to_s
      @ip            = value
      self[:address] = nil
      self[:prefix]  = nil
      self[:v6]      = nil
      begin
        @ip            = IPAddress value
        self[:address] = @ip.to_i
        self[:prefix]  = @ip.prefix
        self[:v6]      = @ip.ipv6?
      rescue
      end
    end

    # Whether IP is a IPAddress object
    def ip?
      ip.is_a? IPAddress
    end

    # Provides network prefix
    def prefix
      return ip.prefix if ip?
      self[:prefix]
    end

    def prefix= value
      raise NoMethodError, 'prefix can not be set directly'
    end

    # Provides string representation of the network
    def to_s
      ip? ? ip.to_string : @ip.to_s
    end

    def subnets
      networks = Network.min(address: ip.network.to_i.to_s).max(address: ip.broadcast.to_i.to_s)
      return networks
    end

end 
```

子网方法是我正在研究的一种方法，用于检测嵌套在当前网络中的网络。

请注意，我想避免网络/子网和即将到来的主机地址之间的“强”数据库关系，以保持它们动态。

**更新：**

这是我的最后一堂课，可以很好地管理嵌套 IP 网络。

地址以十六进制形式存储为固定长度的字符串。它们可以以 32 为基数存储以匹配实际地址大小，但十六进制更便于阅读。

Subnets 方法提供当前网络的所有子网的列表。

```
class Network

  # INCLUSIONS

    include Mongoid::Document
    include Mongoid::Timestamps

  # RELATIONS

    belongs_to :vlan

  # FIELDS

    field :description
    field :address, type: String
    field :prefix,  type: Integer
    field :routed,  type: Boolean
    field :v6,      type: Boolean

  # VALIDATIONS

    validates :ip,
      presence: true

    # Address must be a valid IP address
    validate do
      errors.add(:ip, :invalid) unless ip? && ip == ip.network
    end

    validate do
        errors.add(:ip, :prefix_invalid_v6) if ip && ip.ipv6? && (self[:prefix] < 0 || self[:prefix] > 64)
    end

  # INSTANCE METHODS

    # Returns string representation of the address
    def address
      ip.to_s if ip
    end

    def address= value
      raise NoMethodError, 'address can not be set directly'
    end

    # Provides the IPAddress object
    def ip
      unless @ip.is_a?(IPAddress) || self[:address].blank?
        # Generate IP address
        if v6
          @ip = IPAddress::IPv6.parse_u128 self[:address].to_i(16)
        else
          @ip = IPAddress::IPv4.parse_u32 self[:address].to_i(16)
        end
        # Set IP prefix
        @ip.prefix = self[:prefix] if self[:prefix]
      end
      @ip
    end

    # Sets network IP
    def ip= value
      value          = value.to_s
      @ip            = value
      self[:address] = nil
      self[:prefix]  = nil
      self[:v6]      = nil
      begin
        @ip            = IPAddress value
        self[:address] = @ip.to_i.to_s(16).rjust((@ip.ipv4? ? 8 : 32), '0')
        self[:prefix]  = @ip.prefix
        self[:v6]      = @ip.ipv6?
      rescue
      end
    end

    # Whether IP is a IPAddress object
    def ip?
      ip.is_a? IPAddress
    end

    # Provides network prefix
    def prefix
      return ip.prefix if ip?
      self[:prefix]
    end

    def prefix= value
      raise NoMethodError, 'prefix can not be set directly'
    end

    # Provides string representation of the network
    def to_s
      ip? ? ip.to_string : @ip.to_s
    end

    # Provides nested subnets list
    def subnets
      length= ip.ipv4? ? 8 : 32
      networks = Network.where(
        v6: v6,
        :address.gte => (ip.network.to_i.to_s(16)).rjust(length, '0'),
        :address.lte => (ip.broadcast.to_i.to_s(16).rjust(length, '0')),
        :prefix.gte  => ip.prefix
      ).asc(:address).asc(:prefix)
    end

end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T22:17:04.707

一种可能的方法是将网络存储为表示为字符串的二进制文件。并且不包括无意义的尾随零（对于 /12，您保留前 12 位）。

示例：网络 192.168.1.0 在现实中`11000000101010000000000100000000`。让我们清除尾随的零：`110000001010100000000001`你可以数数，它是 /24。

您可以找到它的所有子网：

```
Network.where(:address_bin => /^110000001010100000000001/, :v6 => false) 
```

如果有的话，它会使用一个索引`:address_bin`。`:v6 => false`是匹配相同类型的子网。

回到源头:)

* * *

其他方式，更简单，您的问题是 ipv6，但在 ipv6 中，地址的最后 64 位**保留**给子网中的主机。例如，如果您有一个 /40，那么您只剩下 64-40 = 24 位来处理子网（如果有的话）。

所以可以将网络地址存储为64bit的整数，即128bit地址的前64bit；最后 64 位强制为零。

# javascript - 当屏幕上没有足够空间时打开下拉菜单 - HTML/CSS/Javascript

> ID：11468077
> 
> 赞同：-1
> 
> 时间：2012-07-13T09:49:45.763
> 
> 标签：javascript, jquery, html, css

我在文档中间有一个下拉菜单。当下拉菜单显示在屏幕底部时，我希望下拉菜单向上而不是向下。当下拉菜单出现在屏幕顶部时，我希望下拉菜单向下。

下拉菜单是用 HTML/CSS 设计的。我需要 Javascript/jQuery 代码来完成这项工作。

任何帮助都感激不尽。

谢谢！——</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T09:58:31.633

首先，您必须找到下拉组件的顶部和左侧坐标。让坐标是 x1,y1。然后通过 screenX 和 screenY 找到屏幕的宽度和高度。然后您可以分别将 x1,y1 与 screenX 和 screenY 进行比较。

你可以这样[做](https://stackoverflow.com/questions/7814186/drop-down-menu-that-opens-up-upward-with-pure-css)

# android - 创建android项目的问题

> ID：11468085
> 
> 赞同：0
> 
> 时间：2012-07-13T09:50:05.660
> 
> 标签：android, eclipse

我下载了 eclipse、android ADT 和 SDK 并做了所有事情，但是当我按照以下步骤创建项目时：

安卓应用项目

项目名称

包裹名字

创建活动

新建空白活动

然后点击下一步，我得到下面显示的这个错误。是什么导致了这个问题。![在此处输入图像描述](../Images/6141f49198c9043fd0e16acc1e48ecce.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T09:52:17.150

看来您需要安装 ASL。尝试单击`Install/Upgrade`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T09:52:51.720

有两个按钮**安装/更新** 并**再次检查**正确

您必须单击**安装/更新**才能完成设置

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T09:53:58.193

您需要进入 Android SDK 管理器并下载/安装“Android 支持”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T09:56:51.637

你需要做的是，

> 正确的解决方法是使用 SDK 管理器并删除任何现有的支持或兼容性库，然后从 SDK 管理器重新安装它。

签出[这个](https://stackoverflow.com/a/11262706/726863)答案已经回答。

# android - Android Actionbar 组件下方的菜单

> ID：11468088
> 
> 赞同：0
> 
> 时间：2012-07-13T09:50:26.857
> 
> 标签：android, android-layout, android-emulator, android-widget

我想制作这样的用户界面[http://d.pr/i/ZQxO](http://d.pr/i/ZQxO)但我不认为 android ActionBar 组件可以添加这样的菜单布局。可能的解决方法是什么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T10:41:55.070

您可以使用简单的选项菜单来做到这一点。看看[官方样品](http://developer.android.com/guide/topics/ui/menus.html)，甚至更好地做面包屑

# objective-c - 如何在应用程序中捕获警告以进行崩溃报告：收到内存警告

> ID：11468090
> 
> 赞同：0
> 
> 时间：2012-07-13T09:50:35.177
> 
> 标签：objective-c, ios, warnings, crash-reports

有时我在控制台中面临“收到内存警告”。看这里：

```
2012-07-13 11:39:54.344 PROJ42 [25255:707] Received memory warning. 
```

该应用程序不会崩溃。但我想解决这个警告。
有没有办法找出我收到此警告并发送报告的原因？如果是，我该怎么做？

**信息：**我知道我可以使用仪器运行以找到此类警告。但我想知道是否有可能在最终用户的设备上捕捉到这个警告？

我怎样才能捕捉到这样的警告？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T09:59:31.413

有`UIViewController`一种方法可以覆盖，称为：

```
- (void)didReceiveMemoryWarning 
```

这是被调用的方法，您可以在其中编写自定义代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T10:27:44.567

由于在应用程序中使用了大量内存，会出现内存警告。尝试释放内存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T10:27:50.963

我认为没有内置的方法可以知道发生了什么......

您可以尝试为分配新对象/打开新资源的每个位置（如“ *mainView::createNewImage => alloc* ”或“ *mainView::createNewImage => loading resource ”）保存一些**指示* ，然后制作内容的 NSLog里面的那根弦`NSString`

 **```
- (void)didReceiveMemoryWarning 
```

这可能需要一些时间，但可以向您指出问题所在。**

# keyboard-shortcuts - TextMate：键盘快捷键有时不起作用，然后重新启动后再次起作用

> ID：11468092
> 
> 赞同：1
> 
> 时间：2012-07-13T09:50:42.127
> 
> 标签：keyboard-shortcuts, textmate

我在 2 个月前搬到了 Lion，从那时起我有时会遇到 TextMate 键盘快捷键不再起作用（这意味着：没有任何反应），然后，在重新启动 TextMate 后，它又可以工作了。

这次是`CTRL`++ ，应该会触发 Cucumber的`ALT`命令。重新启动TM后，它再次工作。我也用++ （这导致我的瑞士布局）来注释行。`SHIFT``DOWN``Go to current step``CMD``SHIFT``7``Cmd-/`

关于有什么问题的任何想法？[正如我在上一篇文章](https://stackoverflow.com/questions/11447283/textmate-comment-line-shortcut-does-not-work-anymore-cmd-or-cmd-shift-7-on-m)中提到的，对于注释掉快捷方式，它最终碰巧是应用程序 Skitch 有时会阻止此推荐并阻止它被发送到 TM。但这与我现在的重启场景无关。

无论如何，每当按下键盘快捷键时，让 OSX 显示一些信息框会很好，这会告诉您确切执行了什么，例如，当按下`CMD`+时`S`，它会告诉“保存文档”，或`CMD`+ `SHIFT`+ `3`“截屏”等，所以你总是知道触发了什么，不必认为捷径最终会在 Nirvana 中结束......也许有一些应用程序或 OSX 扩展可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-23T04:23:13.913

我发现发生这种情况时，有一个后台进程正在进行，由于某种原因，禁用了部分或全部键盘快捷键。我还发现它很容易通过键入 Command- 来解决。（句点）告诉 TextMate 取消正在运行的后台任务。

下次发生这种情况时尝试一下，看看这是否至少不能改善问题。修复它需要弄清楚什么后台任务被卡住，然后修复或消除它。

# spring-mvc - 如何在 JBoss 中设置应用程序的上下文根？

> ID：11468093
> 
> 赞同：2
> 
> 时间：2012-07-13T09:50:42.327
> 
> 标签：spring-mvc, jboss, spring-security, jboss-4.2.x

大家好，我是 Jboss 服务器的新手，我在 JBoss-4.2.2.GA 服务器中设置应用程序的上下文根时遇到问题。我的应用程序是使用 Spring MVC + Spring 安全性完成的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T09:59:51.043

如果您使用 pom.xml，请尝试将项目的名称更改`artifactId`为您的项目名称，希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T21:42:16.807

您可能还需要删除 $JBOSS_HOME/server/default/deploy/jboss-web.deployer/ROOT.war/ 目录，然后将上面的 jboss-web.xml 添加到 Web 应用程序的 WEB-INF 目录中。

也可以看看：

*   [http://docs.redhat.com/docs/en-US/JBoss_Enterprise_Portal_Platform/4.3/html/Reference_Guide/configuration-contextroot.html](http://docs.redhat.com/docs/en-US/JBoss_Enterprise_Portal_Platform/4.3/html/Reference_Guide/configuration-contextroot.html)

# x++ - 如何保护 x++ 源代码

> ID：11468096
> 
> 赞同：0
> 
> 时间：2012-07-13T09:50:59.647
> 
> 标签：x++, axapta, dynamics-ax-2012

有没有办法保护或隐藏用 X++ 编写的用于 AX 自定义的自定义代码。我在 AX 上制作了一些新的自定义表单、表格等，我想隐藏我的自定义的源代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T15:06:55.900

这是不可能的。您只能通过使用正确的层来保护您的代码。

你总是可以打乱/混淆你的代码，有这样的工具可以做到这一点： [http ://www.aximprove.co.uk/](http://www.aximprove.co.uk/)

但是，隐藏您的代码或对其进行加扰是一个坏主意。它与 AX 所代表的一切背道而驰。当您将产品创建为 ISV 时，您的合作伙伴有权为其客户扩展该功能。当客户想要定制合作伙伴提供的解决方案时，他们也应该能够在拥有正确许可证的情况下做到这一点。当代码被加扰时，这是不可能的。另外，想象一下调试该代码......没有客户/合作伙伴应该接受用 X++ 编写的解决方案是乱码的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T13:51:54.617

我不相信这是可能的。你想向谁隐藏代码？

隐藏代码的一种解决方案是完全删除您在其上创建自定义的层（.aod 文件）。但是，这会将您的所有修改连同代码一起从应用程序中删除。

对其他用户隐藏源代码的唯一方法是确保他们的应用程序没有 X++ 源代码安全许可证。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T16:44:06.277

不，你只能混淆你的代码。如果要保持功能私有，可以将代码放在 .NET 程序集中。

正如 Klaas 所说，几乎没有客户会接受这一点。我个人不会接受代码，我为一个大客户工作。我需要能够立即调试。如果您的代码导致问题停止我们的生产，那就是 15 万美元/小时……这就是我在现场并 24/7 可用的原因。我怀疑你也能提供这种保证。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T10:40:22.127

绝对不能。Dynamics AX 中的 X++ 代码根据定义是开放的，如果用户或其他合作伙伴拥有开发许可证，则无法混淆或锁定源代码。

您的代码受层保护，但根据定义，隐藏它是不可能的。

# php - PHP 命名空间和导入

> ID：11468097
> 
> 赞同：0
> 
> 时间：2012-07-13T09:50:59.840
> 
> 标签：php, namespaces

我对 PHP 中的命名空间有疑问。

此代码不起作用：

```
<?php
namespace My\Functions\Printing;

class A {
    public function __construct() {
        echo __NAMESPACE__;
    }
}

namespace My;
use My\Functions\Printing\A as A;

$obj=new namespace\A(); 
```

但这一项工作：

```
<?php
namespace My\Functions\Printing;

class A {
    public function __construct() {
        echo __NAMESPACE__;
    }
}

namespace My;
use My\Functions\Printing\A as A;

$obj=new A(); 
```

我想获得有关命名空间导入行为的更多信息。为什么导入的类在导入的命名空间中无法访问？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T10:31:54.963

可能您对使用“使用”有一个困惑的想法。关键字 'namespace' 指的是当前的命名空间

```
namespace My\Functions\Printing;

class A {
    public function __construct() {
        echo __NAMESPACE__;
    }
}

namespace My;
use My\Functions\Printing\A;
use My\Functions\Printing\A as myAlias;

$obj=new namespace\A(); // instance of  \My\A (doesn't exist)
$obj2=new A(); // instance of  \My\Functions\Printing\A
$obj3=new myAlias(); // instance of  \My\Functions\Printing\A 
```

像往常一样，请参阅文档以获取完整的详细信息：[php doc](http://www.php.net/manual/en/language.namespaces.importing.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T15:58:26.793

My\Functions\Printing 命名空间看起来像

-- 我的\功能\打印

*   一个

导入前的“我的”命名空间如下所示：

- 我的

导入后的“我的”命名空间应该看起来像（我认为）

- 我的

*   一个

那么为什么我不能访问 My\A ？

我认为命名空间的结构并没有改变 PHP 编译器在“命名空间结构”之前的“命名空间导入区”中检查。

文档指定名称空间看起来像文件系统，这是错误的。

如果其他类的导入是“创建符号链接”，我必须能够从当前命名空间访问它。我们可以从创建它的目录或从绝对路径访问符号链接，但无法使用新路径访问导入的类。(\我的\A)

为什么 ？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T10:11:52.263

我不确定，但我认为问题在于使用命名空间关键字。

[http://www.php.net/manual/pl/language.namespaces.nsconstants.php](http://www.php.net/manual/pl/language.namespaces.nsconstants.php)

在第一个示例中，您位于我的命名空间中，所以`namespace\A()`==`My\My\Functions\Printing\A()`

# c# - 使用 itextsharp 在 pdfcell 中添加值

> ID：11468102
> 
> 赞同：0
> 
> 时间：2012-07-13T09:51:22.920
> 
> 标签：c#, asp.net, itextsharp

我想使用列表在 cell3 中添加值：`lstMMVat15SaleDetail`

```
 PdfPTable myTable = new PdfPTable(3);
 myTable.DefaultCell.Padding = 1;`
 myTable.DefaultCell.BorderColor = new Color(123, 123, 163);   
 myTable.DefaultCell.Padding = 1;
 myTable.SetWidths(new int[] { 10, 60, 30 });
 myTable.TotalWidth = 100;`

    PdfPCell header1 = new PdfPCell(new Phrase("1."));
    PdfPCell header2 = new PdfPCell(new Phrase("SALE DETAILS"));
    PdfPCell header3 = new PdfPCell(new Phrase("AMOUNT"));
    header1.BackgroundColor = iTextSharp.text.Color.GRAY;
    header2.BackgroundColor = iTextSharp.text.Color.GRAY;
    header3.BackgroundColor = iTextSharp.text.Color.GRAY;
    myTable.AddCell(header1);
    myTable.AddCell(header2);
    myTable.AddCell(header3);

    for (int i = 0; i < lstMMVat15SaleDetail.Count; i++)
    {
        PdfPCell cell1 = new PdfPCell(new Phrase(lstMMVat15SaleDetail[i].SlNo));
        PdfPCell cell2 = new PdfPCell(new Phrase(lstMMVat15SaleDetail[i].Name));
        PdfPCell cell3 = new PdfPCell(new Phrase());
        myTable.AddCell(cell1);
        myTable.AddCell(cell2);
        myTable.AddCell(cell3);
    }
    for (int i = 0; i < lstMMVat15SaleDetail.Count; i++)
    {
        PdfPCell cell3 = new PdfPCell(new Phrase());
        cell3.Phrase = new Phrase(lstMainVat15Detail[0].SalesA.ToString());
        cell3.Phrase = new Phrase(lstMainVat15Detail[0].SalesB.ToString());
        cell3.Phrase = new Phrase(lstMainVat15Detail[0].SalesC.ToString());
        cell3.Phrase = new Phrase(lstMainVat15Detail[0].SalesD.ToString());
        cell3.Phrase = new Phrase(lstMainVat15Detail[0].SalesE.ToString());
        cell3.Phrase = new Phrase(lstMainVat15Detail[0].SalesF.ToString());
        cell3.Phrase = new Phrase(lstMainVat15Detail[0].SalesG.ToString());
        cell3.Phrase = new Phrase(lstMainVat15Detail[0].SalesH.ToString());
        myTable.AddCell(cell3);
    }
 pdfDoc.Add(myTable); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T10:59:58.997

```
PdfPTable myTable = new PdfPTable(3);
myTable.DefaultCell.Padding = 1;
myTable.DefaultCell.BorderColor = new Color(123, 123, 163);   
myTable.DefaultCell.Padding = 1;
myTable.SetWidths(new int[] { 10, 60, 30 });
myTable.TotalWidth = 100;

PdfPCell header1 = new PdfPCell(new Phrase("1."));
PdfPCell header2 = new PdfPCell(new Phrase("SALE DETAILS"));
PdfPCell header3 = new PdfPCell(new Phrase("AMOUNT"));
header1.BackgroundColor = iTextSharp.text.Color.GRAY;
header2.BackgroundColor = iTextSharp.text.Color.GRAY;
header3.BackgroundColor = iTextSharp.text.Color.GRAY;
myTable.AddCell(header1);
myTable.AddCell(header2);
myTable.AddCell(header3);

for (int i = 0; i < lstMMVat15SaleDetail.Count; i++)
{
    PdfPCell cell1 = new PdfPCell(new Phrase(lstMMVat15SaleDetail[i].SlNo));
    // or:   
    // PdfPCell cell1 = new PdfPCell(new Phrase((i + 1).ToString() + "."));
    PdfPCell cell2 = new PdfPCell(new Phrase(lstMMVat15SaleDetail[i].Name));
    PdfPCell cell3 = new PdfPCell(new Phrase(lstMainVat15Detail[0][i].ToString()));
    myTable.AddCell(cell1);
    myTable.AddCell(cell2);
    myTable.AddCell(cell3);
}
pdfDoc.Add(myTable); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T11:01:46.130

如何使用块

```
for (int i = 0; i < lstMMVat15SaleDetail.Count; i++) 
{ 
    PdfPCell cell1 = new PdfPCell(new Phrase(lstMMVat15SaleDetail[i].SlNo)); 
    PdfPCell cell2 = new PdfPCell(new Phrase(lstMMVat15SaleDetail[i].Name)); 
    PdfPCell cell3 = new PdfPCell(new Phrase()); 

    cell3.Phrase.Add(new Chunk(lstMainVat15Detail[0].SalesA.ToString())); 
    cell3.Phrase.Add(new Chunk(lstMainVat15Detail[0].SalesB.ToString())); 
    cell3.Phrase.Add(new Chunk(lstMainVat15Detail[0].SalesC.ToString())); 
    cell3.Phrase.Add(new Chunk(lstMainVat15Detail[0].SalesD.ToString())); 
    cell3.Phrase.Add(new Chunk(lstMainVat15Detail[0].SalesE.ToString())); 
    cell3.Phrase.Add(new Chunk(lstMainVat15Detail[0].SalesF.ToString())); 
    cell3.Phrase.Add(new Chunk(lstMainVat15Detail[0].SalesG.ToString())); 
    cell3.Phrase.Add(new Chunk(lstMainVat15Detail[0].SalesH.ToString()));

    myTable.AddCell(cell1); 
    myTable.AddCell(cell2); 
    myTable.AddCell(cell3); 
} 
```

# php - 根据用户计算机日期显示的名称

> ID：11468107
> 
> 赞同：1
> 
> 时间：2012-07-13T09:51:56.370
> 
> 标签：php, javascript, date

我有一个与一年中的日子相关的捷克名字列表 - 所有捷克人都有他们的生日以及“命名日”。我想根据用户的计算机日期显示与每一天相关的适当名称（有一个很长的列表）。在我自己研究编码之前，我想问一下你是否已经知道这种类型的应用程序的 Javascript 脚本，或者知道我应该如何去做。这个网站是PHP。

您可以在此处查看捷克名称日列表：[http ://en.wikipedia.org/wiki/Name_days_in_the_Czech_Republic](http://en.wikipedia.org/wiki/Name_days_in_the_Czech_Republic)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T09:55:39.620

是的，有一个。不幸的是，该页面是德语：[http ://www.web-toolbox.net/webtoolbox/datum/datum-tagestipp365.htm](http://www.web-toolbox.net/webtoolbox/datum/datum-tagestipp365.htm)

您可以使用[谷歌翻译](http://translate.google.de/)来翻译描述。

# java - 无法读取 Java Servlet 中 Ajax 发送的 JQuery 数据

> ID：11468110
> 
> 赞同：1
> 
> 时间：2012-07-13T09:51:58.880
> 
> 标签：java, ajax, jquery

这是我的 Ajax 代码：

```
var email="abc@abc.com";    

    $.ajax({
        url : "ships",
        data : "{email" + email.toString() + "}",
        success : function(data){
            alert(data)
        },
        error : function(data) {
            console.log("error:", data);
        },

        type : "post"
    }); 
```

这是我的 Java Servlet 代码：

```
protected void doPost(HttpServletRequest request,
        HttpServletResponse response) throws ServletException, IOException {

    System.out.println(request.getParameter("email"));

} 
```

我无法在 Java Servlet 中读取数据控制台打印出以下电子邮件值：

空值

我正在使用 Tomcat 7

谁能告诉我我做错了什么以及为什么我无法在 Java Servlet 中读取数据_

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T09:56:26.127

param 对象的属性`data`是一个 JavaScript 对象，因此要发送一个名为`EmailAddress`您的参数，您可以：

```
...
url : "ships",
data : {
    EmailAddress: email.toString()
},
success : function(data){
    ... 
```

# java - Java中的双面打印

> ID：11468115
> 
> 赞同：1
> 
> 时间：2012-07-13T09:52:13.637
> 
> 标签：java, printing, duplex

如何在java中打印双面打印！？

这是我的代码，但它不起作用 - 它只适用于 microsoft word（所以打印机可以做到）

```
PrintRequestAttributeSet pras = new HashPrintRequestAttributeSet();
    pras.add(new Copies(2));
    pras.add(Sides.DUPLEX);

PrinterJob pj = PrinterJob.getPrinterJob();
    PageFormat pf = pj.defaultPage();
    Paper temp = pf.getPaper();

    temp.setImageableArea(1, 3, temp.getWidth(), temp.getHeight());
    pf.setPaper(temp);

    if (pj.printDialog(pras)) {
        try {
            pj.setPrintable(this, pf);
            pj.print(pras); //  Drucken
            return true;
        } catch (Exception PrintException) {
            .....
        } 
```

我试图只给出要打印的属性，只给对话框等等等等。它打印了2次文档，但不是双面打印的！（也试过 Sides.TWO_SIDED_LONG_EDGE ..）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T17:13:39.053

问题是我的打印机，...它总是将双面打印选项禁用。

# javascript - 在 mvc3 中使用 Jquery 创建一个弹出窗口？

> ID：11468119
> 
> 赞同：1
> 
> 时间：2012-07-13T09:52:18.573
> 
> 标签：javascript, jquery, asp.net-mvc-3

大家好，当我单击编辑或详细信息或删除时，我想使用 jquery 创建一个弹出窗口

这就是我的cshtml的样子

```
@model  IEnumerable<BugTracker.Models.ProjetModel>
@{
    ViewBag.Title = "Projects";
 }
<p>
 @Html.ActionLink("Create New", "Create")
</p>
<table>
    <tr>
        <th>
            ProjectName
        </th>
        <th>
            Description     
        </th>
        <th>
            Status
        </th>  
    </tr>

    @foreach (var item in Model)
    {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.projectName)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Description)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.status)
        </td>
        <td>
            @Html.ActionLink("Edit", "Edit", new { id = item.projectName }) |
            @Html.ActionLink("Details", "Details", new { id = item.Description }) |
            @Html.ActionLink("Delete", "Delete", new { id = item.status })
        </td>
    </tr>
    }
</table>

<div class="main_a">
    <h1>Edit</h1>
    <div class="lable">
        <span>User Name</span>
        <input type="text" />
        <label>User Name</label>
        <input type="text" />
        <label>User Name</label>
        <input type="text" />
        <a href="#"><input type="submit" value="save" /></a>
        <input type="button" value="Cancel" />
    </div>
</div> 
```

当我单击弹出窗口上的编辑时，我想获得一个弹出窗口应该是`<div class="main_a">`

任何人都可以在这里帮助我吗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T10:29:03.397

使用局部视图，您可以将 html 内容放入其中。并使用您可以在成功处理程序上调用的 Jquery Ajax 方法，您可以呈现您的部分视图。这里是示例代码，可能会让您抢先一步。

```
@Ajax.ActionLink("openPopup", "SomeAction", new AjaxOptions { HttpMethod = "GET", UpdateTargetId = "result", InsertionMode = InsertionMode.Replace, OnSuccess="openPopup" })<br />

<div id="result" style="display:none;"></div>

<script type="text/javascript">
$(document).ready(function() {
    $("#result").dialog({
        autoOpen: false,
        title: 'Title',
        width: 500,
        height: 'auto',
        modal: true
    });
});
function openPopup() {
    $("#result").dialog("open");
}
</script> 
```

添加返回局部视图的操作。

```
[HttpGet]
 public PartialViewResult SomeAction()
 {
      return PartialView();
 } 
```

注释：AjaxOptions ( // 参数 )

```
UpdateTargetId : which will be the DIV, which is set to display "none" 
InsertionMode = InsertionMode.Replace  
OnSuccess="openPopup" // which will call the function and open up the dialogue 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T09:57:55.777

您可以使用[jQuery UI 对话框](http://jqueryui.com/demos/dialog/)。它允许您轻松创建可用于编辑信息的[模式表单。](http://jqueryui.com/demos/dialog/#modal-form)[`I wrote a sample`](https://stackoverflow.com/a/8922646/29407)在您可以用作起点的类似问题中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T11:27:15.473

我看到您正在尝试自己创建一个网格。我建议您使用像[jqGrid](http://www.trirand.com/blog/?page_id=6)这样的网格。

jqGrid 为您提供用于添加、编辑、查看等的弹出表单，并且是免费的。

[演示](http://www.trirand.com/blog/jqgrid/jqgrid.html)

[文档](http://www.trirand.com/jqgridwiki/doku.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T10:20:25.630

你可以找到一些很好的例子[@http://jqueryui.com/demos/dialog/](http://jqueryui.com/demos/dialog/)

Jsfiddle 示例：http: [//jsfiddle.net/dwaddell/J6CWM/](http://jsfiddle.net/dwaddell/J6CWM/)

谢谢，-纳伦

# mysql - 在本地 mysql 数据库中拉取 mysql 数据库时出错

> ID：11468120
> 
> 赞同：5
> 
> 时间：2012-07-13T09:52:22.237
> 
> 标签：mysql, ruby-on-rails, heroku

我试图将 heroku mysql 数据库拉到我的本地 mysql 数据库中，但它给了我一些错误。

我已经在 github 上发布了这个问题。[这](https://github.com/heroku/heroku/issues/457)是我在github上发布的问题。我还发布了错误日志。

请帮我解决这个问题。

有没有其他方法可以将heroku数据库导入我的本地数据库..？

我也试图通过 chunksize 获取数据，但它只获取了 60% 到 70% 的数据，之后它给出了同样的错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T10:10:57.110

MySQL 在运行期间很可能已经达到`net_read_timeout`- 默认为 30 秒（它发生在 heroku 中）。

添加你的 MySQL 配置文件：

```
net_read_timeout = 300
net_write_timeout = 300 
```

重新启动 MySQL 并重试。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-22T11:42:29.547

您可以使用命令提示符导入数据库，否则存在大小限制。

同样使用 mysql 命令。参考：[http ://www.cyberciti.biz/faq/mysql-import-command/](http://www.cyberciti.biz/faq/mysql-import-command/)

# javascript - Jquery在DIV内获取子DIV

> ID：11468122
> 
> 赞同：6
> 
> 时间：2012-07-13T09:52:31.393
> 
> 标签：javascript, jquery, html, jquery-selectors

我在正文中有以下 HTML 代码：

```
<div id="hidden">

</div>

<div id="mainContianer">
    <div id="firstChildDiv">

    </div>
</div> 
```

我正在使用以下代码来获取孩子

```
$("div:first-child").attr('id') 
```

但是，当我希望它返回 firstChildDiv 时，它会返回“隐藏”，我尝试过类似...

```
$("div[mainContainer ] div:first-child").attr('id') 
$("div[id=mainContainer ] :first-child").attr('id') 
$("#mainContainer :first-child").attr('id') 
```

我知道这是一件简单的事情，但似乎看不出我哪里出错了......

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-13T09:57:38.843

你的最后一个选择器

```
$("#mainContainer :first-child").attr('id') 
```

如果您更正 HTML 中的错字（请参阅此[小提琴](http://jsfiddle.net/bDByd/)），则可以正常工作。它说`mainContianer`而不是`mainContainer`。

`id`但是，无论如何，如果该元素具有，为什么不简单地通过 选择`id`？

```
$( '#firstChildDiv' ) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-13T09:54:59.853

```
$('#mainContainer > div:first-child').attr('id'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-13T09:56:14.597

试试这个，

```
$("#mainContianer:first-child").attr("id") 
```

检查'：'之前没有空格

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-13T09:59:20.073

实际上，您的 html 中有错字

```
<div id="mainContianer"> 
```

应该

```
<div id="mainContainer"> 
```

然后你可以做

```
$("#mainContainer div:first-child").prop('id') 
```

这使用[`prop`](http://api.jquery.com/prop/)而不是[`attr`](http://api.jquery.com/attr/)，这是较慢和旧的 jQuery 语法

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-13T09:55:10.710

这一切都返回你父母的第一个孩子——**在你的情况下，用 mainContianer 替换父母**

```
$('#parent').children(":first") 

$('#parent').children(":first-child") 

$( $('#parent').children()[0] ) 

$('#parent').find(":first") 

$('#parent').find(":nth-child(1)") 
```

尝试 -[子选择器（“父>子”）](http://api.jquery.com/child-selector/)

```
$("div > div").attr('id') 
```

也试试

```
$("div div:first-child") 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-13T09:57:31.140

这对我有用....

```
$(document).ready(function(){
    var a =$("#mainContainer div:first-child").attr('id');
    alert(a);
}); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-13T09:58:18.293

```
 <html>
        <head>
            <script>
                function getDiv(){
                alert("answer = "+$('#mainContianer div:first-child').attr('id'));

                }
            </script>
        </head>
        <body>

            <div id="hidden"></div>

                 <div id="mainContianer">
                    <div id="firstChildDiv">
                    </div>
                 </div>

                <button onclick="getDiv()">click</button>
    </body>
<html> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-05-16T09:37:36.240

# 脚本

```
<script language="JavaScript">
    jQuery(document).ready(function($) { 
    $("#MY_BUTTON").click(function(event) {
                 $("div#PARENT_DIV").find("#CHILD_DIV").hide();
             });    
});
</script> 
```

# 代码

```
<div id="PARENT_DIV">
        <h1 class="Heading">MY HTML PAGE TEST</h1>
        <br />
        <div id="CHILD_DIV">THIS IS MY CHILD DIV</div>
 </div>

    <div class="MY_BUTTONS"> 
        <a class="MySubmitButton" id="MY_BUTTON">
            <span>Test it!</span>
        </a>
     </div> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-09-11T18:20:43.360

**现在在 2020 年**使用 jquery 可以是这样的：

```
 function myClickOnDiv(divPrm) {
        let div=$(divPrm);
        let targetElement=div.find('#my_id')
    } 
```

如果说你的 div 看起来像这样：

```
<div onclick=myClickOnDiv(this)><label id="my_id"></label></div> 
```

# maven - 使用 maven 的 liquibase 插件错误

> ID：11468124
> 
> 赞同：9
> 
> 时间：2012-07-13T09:52:43.313
> 
> 标签：maven, liquibase

嗨，我是 liquibase 的新手，我在编译后导入现有项目我得到这个构建失败，我无法理解原因和解决方案我试图理解代码但我真的发现问题要做它 。

这是运行后的结果`mvn compile`

```
[INFO] Scanning for projects...
[WARNING] 
[WARNING] Some problems were encountered while building the effective model for org.squashtest.tm:squashtest-csp-distribution:pom:1.2.0.RELEASE
[WARNING] 'dependencies.dependency.(groupId:artifactId:type:classifier)' must be unique: ${project.groupId}:org.squashtest.csp.core.log4j:jar -> duplicate declaration of version ${project.version} @ line 419, column 17
[WARNING] 'dependencies.dependency.(groupId:artifactId:type:classifier)' must be unique: ${project.groupId}:org.squashtest.csp.core.jetty.start.osgi:jar -> duplicate declaration of version ${project.version} @ line 424, column 17
[WARNING] 'dependencies.dependency.(groupId:artifactId:type:classifier)' must be unique: ${project.groupId}:org.squashtest.csp.core.service:jar -> duplicate declaration of version ${project.version} @ line 450, column 17
[WARNING] 'dependencies.dependency.(groupId:artifactId:type:classifier)' must be unique: ${project.groupId}:squashtest-csp-launcher:jar -> duplicate declaration of version ${project.version} @ line 455, column 17
[WARNING] 'dependencies.dependency.(groupId:artifactId:type:classifier)' must be unique: ${project.groupId}:org.squashtest.csp.tm.web:war -> duplicate declaration of version ${project.version} @ line 461, column 17
[WARNING] 'dependencies.dependency.(groupId:artifactId:type:classifier)' must be unique: ${project.groupId}:org.squashtest.csp.tm.service:jar -> duplicate declaration of version ${project.version} @ line 467, column 17
[WARNING] 'profiles.profile[build-mysql].plugins.plugin.(groupId:artifactId)' must be unique but found duplicate declaration of plugin org.codehaus.mojo:sql-maven-plugin @ line 682, column 15
[WARNING] 'profiles.profile[build-mysql].plugins.plugin.(groupId:artifactId)' must be unique but found duplicate declaration of plugin org.liquibase:liquibase-maven-plugin @ line 724, column 15
[WARNING] 
[WARNING] It is highly recommended to fix these problems because they threaten the stability of your build.
[WARNING] 
[WARNING] For this reason, future Maven versions might no longer support building such malformed projects.
[WARNING] 
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building squashtest-tm-distribution 1.2.0.RELEASE
[INFO] ------------------------------------------------------------------------
[WARNING] Failed to retrieve plugin descriptor for org.codehaus.izpack:izpack-maven-plugin:1.0-alpha-5: Plugin org.codehaus.izpack:izpack-maven-plugin:1.0-alpha-5 or one of its dependencies could not be resolved: Failed to read artifact descriptor for org.codehaus.izpack:izpack-maven-plugin:jar:1.0-alpha-5
[INFO] 
[INFO] --- liquibase-maven-plugin:2.0.1:update (default-cli) @ squashtest-csp-distribution ---
[INFO] ------------------------------------------------------------------------
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 2:12.500s
[INFO] Finished at: Fri Jul 13 10:25:08 GMT+01:00 2012
[INFO] Final Memory: 8M/19M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.liquibase:liquibase-maven-plugin:2.0.1:update (default-cli) on project squashtest-csp-distribution: The driver has not been specified either as a parameter or in a properties file. -> [Help 1]**
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException 
```

这是 pom.xml liquibase 部分：

```
 <!-- We first run a full install against MySQL -->
  <plugin>
    <groupId>org.liquibase</groupId>
    <artifactId>liquibase-maven-plugin</artifactId>
    <configuration>
      <skip>${mysql.distro.skip}</skip>
    </configuration>
    <executions>
      <execution>
        <id>generate-mysql-full-install-script</id>
        <phase>process-resources</phase>
        <goals>
          <goal>updateSQL</goal>
        </goals>
        <configuration>
          <dropFirst>true</dropFirst>
          <changeLogFile>${master.changelog}</changeLogFile>
          <driver>com.mysql.jdbc.Driver</driver>
          <url>${liquibase.mysql.url}</url>
          <username>${liquibase.mysql.username}</username>
          <password>${liquibase.mysql.password}</password>
          <migrationSqlOutputFile>${database.script.directory}/mysql-full-install-

        version-${project.version}.sql</migrationSqlOutputFile>
        </configuration>
      </execution>
    </executions>
  </plugin>

        <!-- We now run an incremental install against MySQL -->
  <plugin>
    <groupId>org.liquibase</groupId>
    <artifactId>liquibase-maven-plugin</artifactId>
    <configuration>
      <skip>${mysql.distro.skip}</skip>
    </configuration>
    <executions>
      <execution>
        <id>generate-mysql-0.15.0-script</id>
        <phase>prepare-package</phase>
        <goals>
          <goal>updateSQL</goal>
        </goals>
        <configuration>
          <dropFirst>true</dropFirst>
          <changeLogFile>${upgrade.0.15.0.changelog}</changeLogFile>
          <driver>com.mysql.jdbc.Driver</driver>
          <url>${liquibase.mysql.url}</url>
          <username>${liquibase.mysql.username}</username>
          <password>${liquibase.mysql.password}</password>
          <migrationSqlOutputFile>${database.script.directory}/mysql-upgrade-
           to-0.15.0.sql</migrationSqlOutputFile>
        </configuration>
      </execution>

      <execution>
        <id>generate-mysql-0.17.0-script</id>
        <phase>prepare-package</phase>
        <goals>
          <goal>updateSQL</goal>
        </goals>
        <configuration>
          <dropFirst>false</dropFirst>
          <changeLogFile>${upgrade.0.17.0.changelog}</changeLogFile>
          <driver>com.mysql.jdbc.Driver</driver>
          <url>${liquibase.mysql.url}</url>
          <username>${liquibase.mysql.username}</username>
          <password>${liquibase.mysql.password}</password>
          <migrationSqlOutputFile>${database.script.directory}/mysql-upgrade-
           to-0.17.0.sql</migrationSqlOutputFile>
        </configuration>
      </execution>

      <execution>
        <id>generate-mysql-0.20.0-script</id>
        <phase>prepare-package</phase>
        <goals>
          <goal>updateSQL</goal>
        </goals>
        <configuration>
          <dropFirst>false</dropFirst>
          <changeLogFile>${upgrade.0.20.0.changelog}</changeLogFile>
          <driver>com.mysql.jdbc.Driver</driver>
          <url>${liquibase.mysql.url}</url>
          <username>${liquibase.mysql.username}</username>
          <password>${liquibase.mysql.password}</password>
          <migrationSqlOutputFile>${database.script.directory}/mysql-upgrade-
           to-0.20.0.sql</migrationSqlOutputFile>
        </configuration>
      </execution>

      <execution>
        <id>generate-mysql-0.23.0-script</id>
        <phase>prepare-package</phase>
        <goals>
          <goal>updateSQL</goal>
        </goals>
        <configuration>
          <dropFirst>false</dropFirst>
          <changeLogFile>${upgrade.0.23.0.changelog}</changeLogFile>
          <driver>com.mysql.jdbc.Driver</driver>
          <url>${liquibase.mysql.url}</url>
          <username>${liquibase.mysql.username}</username>
          <password>${liquibase.mysql.password}</password>
          <migrationSqlOutputFile>${database.script.directory}/mysql-upgrade-
          to-0.23.0.sql</migrationSqlOutputFile>
        </configuration>
      </execution>

      <execution>
        <id>generate-mysql-1.1.0-script</id>
        <phase>prepare-package</phase>
        <goals>
          <goal>updateSQL</goal>
        </goals>
        <configuration>
          <dropFirst>false</dropFirst>
          <changeLogFile>${upgrade.1.1.0.changelog}</changeLogFile>
          <driver>com.mysql.jdbc.Driver</driver>
          <url>${liquibase.mysql.url}</url>
          <username>${liquibase.mysql.username}</username>
          <password>${liquibase.mysql.password}</password>
          <migrationSqlOutputFile>${database.script.directory}/mysql-upgrade-
           to-1.1.0.sql</migrationSqlOutputFile>
        </configuration>
      </execution>

      <execution>
        <id>generate-mysql-1.1.1-script</id>
        <phase>prepare-package</phase>
        <goals>
          <goal>updateSQL</goal>
        </goals>
        <configuration>
          <dropFirst>false</dropFirst>
          <changeLogFile>${upgrade.1.1.1.changelog}</changeLogFile>
          <driver>com.mysql.jdbc.Driver</driver>
          <url>${liquibase.mysql.url}</url>
          <username>${liquibase.mysql.username}</username>
          <password>${liquibase.mysql.password}</password>
          <migrationSqlOutputFile>${database.script.directory}/mysql-upgrade- 

           to-1.1.1.sql</migrationSqlOutputFile>
        </configuration>
      </execution>
      <execution>
        <id>generate-mysql-1.2.0-script</id>
        <phase>prepare-package</phase>
        <goals>
          <goal>updateSQL</goal>
        </goals>
        <configuration>
          <dropFirst>false</dropFirst>
          <changeLogFile>${upgrade.1.2.0.changelog}</changeLogFile>
          <driver>com.mysql.jdbc.Driver</driver>
          <url>${liquibase.mysql.url}</url>
          <username>${liquibase.mysql.username}</username>
          <password>${liquibase.mysql.password}</password>
          <migrationSqlOutputFile>${database.script.directory}/mysql-upgrade-
          to-${squashTmVersion}.sql</migrationSqlOutputFile>
        </configuration>
      </execution>
    </executions>
   </plugin> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-20T18:05:50.527

您收到此错误是因为 url 的值由 maven 属性提供，称为 ${liquibase.mysql.url}

您可以在 pom 中设置 maven 属性的值，例如：

```
 <project>
    [...]
    <properties>
      <liquibase.mysql.url>jdbc:mysql://127.0.0.1:3306</liquibase.mysql.url>
      <liquibase.mysql.username>someuser</liquibase.mysql.username>
      [...]
    </properties>
    [...] 
```

liquibase 插件还提供了从属性文件中读取配置属性的可能性，例如 src/main/resources/liquibase.properties 如果选择此选项，则需要通过替换 pom 中的配置部分来配置 liquibase maven 插件，例如：

```
[...]
 <configuration>
    <propertyFile>src/main/resources/liquibase.properties</propertyFile>
 </configuration>
[...] 
```

然后 liquibase 属性应该看起来像

```
url=jdbc:mysql://127.0.0.1:3306      
username=someuser
dropFirst=true
changeLogFile=yourfile
[...] 
```

更多信息在这里：[http ://www.liquibase.org/documentation/maven/index.html#using_configuration_property_files](http://www.liquibase.org/documentation/maven/index.html#using_configuration_property_files)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-20T09:27:41.967

您需要在 .m2/settings.xml 中设置变量 ${liquabase.mysql.url} 等。此处有更多详细信息：[缺少 maven .m2 文件夹](https://stackoverflow.com/questions/6081617/missing-maven-m2-folder)

您还需要运行 mvn liquibase:update

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-30T10:43:40.043

首先，您使用的是阶段进程资源，当您想从输出目标目录处理 changeLog 时，以及如果您尝试使用 maven 资源过滤插件在资源文件中使用过滤时，基本上会使用它。

而且我不知道您实际上出于什么目的多次使用 prepare-package 或任何此类阶段，带有 liquibase 的 maven 不是这样设置的，您应该有一个主变更日志，其中应该包括您的其他升级，并带有一些先决条件检查您的每个升级。

如果您想使用您的流程资源阶段，并且打算在资源文件中进行某种过滤，您的目录结构应该如下所示。

```
src/
`-- main
    |-- java
    `-- resources
        |-- changelog-1.0.0.xml
        |-- changelog-1.1.0.xml
        |-- changelog-install.xml
        |-- com
        |   `-- obolus
        |       `-- database
        |           `-- changelog
        |               |-- v000
        |               |   |-- cst
        |               |   |   |-- entity_extra_data.xml
        |               |   |   `-- entity.xml
        |               |   |-- master.xml
        |               |   `-- tab
        |               |       |-- company.xml
        |               |       |-- entity_extra_data.xml
        |               |       |-- entity.xml
        |               |       `-- anothertable.xml
        |               `-- v001
        |                   |-- master.xml
        |                   `-- tab
        |                       `-- sample.xml
        |-- lib
        |   |-- ojdbc6-11.2.0.3.jar
        `-- liquibase.properties 
```

POM 文件示例

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.obolus</groupId>
    <artifactId>database</artifactId>
    <version>1.0.0-SNAPSHOT</version>
    <packaging>jar</packaging>
    <build>
        <plugins>
            <plugin>
                <groupId>org.liquibase</groupId>
                <artifactId>liquibase-maven-plugin</artifactId>
                <version>${liquibase.maven.plugin}</version>
                <configuration>
                    <changeLogFile>target/classes/changelog-install.xml</changeLogFile
                    <propertyFile>target/classes/liquibase.properties</propertyFile>
                    <logging>${logLevel}</logging>
                </configuration>
                <executions>
                    <execution>
                        <goals>
                            <goal>status</goal>
                        </goals>
                    </execution>
                </executions>            
            </plugin>
        </plugins>
        <!-- resource filtering -->
        <resources>
            <resource>
                <directory>src/main/resources</directory>
                <filtering>true</filtering>
            </resource>
        </resources>
    </build>
    <dependencies>
        <dependency>
            <groupId>com.oracle</groupId>
            <artifactId>ojdbc6</artifactId>
            <version>${ojdbc.driver.version}</version>
        </dependency>
    </dependencies>
    <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        <maven.compiler.source>1.8</maven.compiler.source>
        <maven.compiler.target>1.8</maven.compiler.target>
        <ojdbc.driver.version>11.2.0.3</ojdbc.driver.version>
        <liquibase.maven.plugin>3.3.2</liquibase.maven.plugin>
        <logLevel>severe</logLevel>
    </properties>
</project> 
```

希望有帮助。

# css - 将 Twitter 引导验证样式和消息应用于 ASP.NET MVC 验证

> ID：11468130
> 
> 赞同：34
> 
> 时间：2012-07-13T09:52:56.390
> 
> 标签：css, asp.net-mvc, validation, twitter-bootstrap, jquery-validate

如何集成 ASP.NET MVC 不显眼的验证和 Twitter Bootstrap？我想适当地拥有所有这些验证**消息**和**样式**。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-02-01T16:49:57.720

如果您使用 Bootstrap 2，一个很好的处理方法是......

将此添加到您的`_Layout.cshtml`：

```
<script type="text/javascript">

jQuery.validator.setDefaults({
    highlight: function (element, errorClass, validClass) {
        if (element.type === 'radio') {
            this.findByName(element.name).addClass(errorClass).removeClass(validClass);
        } else {
            $(element).addClass(errorClass).removeClass(validClass);
            $(element).closest('.control-group').removeClass('success').addClass('error');
        }
    },
    unhighlight: function (element, errorClass, validClass) {
        if (element.type === 'radio') {
            this.findByName(element.name).removeClass(errorClass).addClass(validClass);
        } else {
            $(element).removeClass(errorClass).addClass(validClass);
            $(element).closest('.control-group').removeClass('error').addClass('success');
        }
    }
});

$(function () {

    $("span.field-validation-valid, span.field-validation-error").addClass('help-inline');
    $("div.control-group").has("span.field-validation-error").addClass('error');
    $("div.validation-summary-errors").has("li:visible").addClass("alert alert-block alert-error");

});

</script> 
```

这些是我在上面找到代码片段的帖子：

[将 Bootstrap 错误样式与 MVC 的不显眼的错误验证集成](http://www.braindonor.net/blog/integrating-bootstrap-error-styling-with-mvcs-unobtrusive-error-validation)

[使用 ASP.NET MVC 的 Twitter Bootstrap 验证样式](http://www.joe-stevens.com/2013/01/23/twitter-bootstrap-validation-styles-with-asp-net-mvc)

[MVC Twitter Bootstrap 不显眼的错误处理](https://stackoverflow.com/a/18135224/114029)

* * *

**更新**

现在我需要在使用[Bootstrap 3](http://getbootstrap.com/css/#forms-control-states)时做同样的事情。这是由于类名更改后所需的修改：

```
<script type="text/javascript">

    jQuery.validator.setDefaults({
        highlight: function (element, errorClass, validClass)
        {
            if (element.type === 'radio')
            {
                this.findByName(element.name).addClass(errorClass).removeClass(validClass);
            } else
            {
                $(element).addClass(errorClass).removeClass(validClass);
                $(element).closest('.form-group').removeClass('has-success').addClass('has-error');
            }
        },
        unhighlight: function (element, errorClass, validClass)
        {
            if (element.type === 'radio')
            {
                this.findByName(element.name).removeClass(errorClass).addClass(validClass);
            } else
            {
                $(element).removeClass(errorClass).addClass(validClass);
                $(element).closest('.form-group').removeClass('has-error').addClass('has-success');
            }
        }
    });

$(function () {

    $("span.field-validation-valid, span.field-validation-error").addClass('help-block');
    $("div.form-group").has("span.field-validation-error").addClass('has-error');
    $("div.validation-summary-errors").has("li:visible").addClass("alert alert-block alert-danger");

});

</script> 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-07-13T10:13:42.047

在您的 css 文件中复制验证器的 css 并相应地更改颜色。这样的事情应该做

```
.field-validation-error {
    color: #b94a48;
    display: inline-block;
    *display: inline;
    padding-left: 5px;
    vertical-align: middle;
    *zoom: 1;
}

.field-validation-valid {
    display: none;
}

.input-validation-error {
    /*
    border: 1px solid #ff0000;
    background-color: #ffeeee;
    */
    color: #b94a48;
    border-color: #b94a48;
}

.input-validation-error:focus {
  border-color: #953b39;
  -webkit-box-shadow: 0 0 6px #d59392;
  -moz-box-shadow: 0 0 6px #d59392;
  box-shadow: 0 0 6px #d59392;
}

.validation-summary-errors {
    /*font-weight: bold;*/
    color: #b94a48;
}

.validation-summary-valid {
    display: none;
} 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-07-13T16:18:33.317

我建议以较少的格式包含 Bootstrapper，并做与 Iridio 建议的相同的事情，但在 .less 中。这样你就可以有类似的东西：

```
.validation-summary-errors
{
    .alert();
    .alert-error();
}
.field-validation-error 
{
    .label();
    .label-important();
} 
```

因此，当引导程序发生更改时，您将自动获取更改。从 MVC 默认处理可见性的常规样式`Site.css`将保留在原地并处理可见性。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-06-07T21:41:13.480

为什么不直接使用 css !important 并收工：

```
/* Styles for validation helpers
-----------------------------------------------------------*/
.field-validation-error {
    color: #f00 !important;
}

.field-validation-valid {
    display: none;
}

.input-validation-error {
    border: 1px solid #f00 !important;
    background-color: #fee !important;
}

.validation-summary-errors {
    font-weight: bold;
    color: #f00;
}

.validation-summary-valid {
    display: none;
} 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2013-08-24T06:07:51.863

在 Bootstrap ***3***上，您必须添加：

```
.validation-summary-errors
{
    .alert();
    .alert-danger();
}
.field-validation-error 
{
    .label();
    .label-danger();
} 
```

你会看到类似的东西：

![验证错误演示](../Images/29219488fa7e4d4310f5faed3ef71711.png)

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2014-01-16T16:53:28.560

对于`ValidationSummary`，您可以使用允许您指定的重载`htmlAttributes`。这允许您将其设置为使用 Twitter Bootstrap 警报 css 样式。

```
@Html.ValidationSummary(string.Empty, new { @class = "alert alert-danger" }) 
```

`ValidationMessage`和`ValidationMessageFor`辅助方法存在类似的重载。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2012-12-14T14:39:27.293

您可以通过将以下 javascript 添加到您的页面（查看）来将 MVC3 验证与 Bootstrap 框架集成

```
<script>
$(document).ready(function () {
/* Bootstrap Fix */
$.validator.setDefaults({
    highlight: function (element) {
        $(element).closest("div.control-group").addClass("error");
    },
    unhighlight: function (element) {
        $(element).closest("div.control-group").removeClass("error");
    }
});
var current_div;
$(".editor-label, .editor-field").each(function () {
    var $this = $(this);
    if ($this.hasClass("editor-label")) {
        current_div = $('<div class="control-group"></div>').insertBefore(this);
    }
    current_div.append(this);
});
$(".editor-label").each(function () {
    $(this).contents().unwrap();
});
$(".editor-field").each(function () {
    $(this).addClass("controls");
    $(this).removeClass("editor-field");
});
$("label").each(function () {
    $(this).addClass("control-label");
});
$("span.field-validation-valid, span.field-validation-error").each(function () {
    $(this).addClass("help-inline");
});
$("form").each(function () {
    $(this).addClass("form-horizontal");
    $(this).find("div.control-group").each(function () {
        if ($(this).find("span.field-validation-error").length > 0) {
            $(this).addClass("error");
        }
    });
});
});
</script> 
```

此外，在视图（例如“Create.cshtml”）上，确保表单中的字段格式如下...

```
 <div class="editor-label">
        @Html.LabelFor(Function(model) model.Name)
    </div>
    <div class="editor-field">
        @Html.EditorFor(Function(model) model.Name)
        @Html.ValidationMessageFor(Function(model) model.Name)
    </div> 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-12-09T14:08:01.513

对于那些使用 Bootstrap 3 的人，css 类已经改变，上面的解决方案需要修改才能与 Bootstrap 3 一起使用。我在 MVC 4 和 Bootstrap 3 上成功使用了以下内容。有关更多信息，请参阅[此](https://stackoverflow.com/questions/18320483/validation-mvc4-razor-and-bootstrap/20341881#20341881)SO 线程：

```
$(function () {
 // any validation summary items should be encapsulated by a class alert and alert-danger
    $('.validation-summary-errors').each(function () {
        $(this).addClass('alert');
        $(this).addClass('alert-danger');
    });

    // update validation fields on submission of form
    $('form').submit(function () {
        if ($(this).valid()) {
            $(this).find('div.control-group').each(function () {
                if ($(this).find('span.field-validation-error').length == 0) {
                    $(this).removeClass('has-error');
                    $(this).addClass('has-success');
                }
            });
        }
        else {
            $(this).find('div.control-group').each(function () {
                if ($(this).find('span.field-validation-error').length > 0) {
                    $(this).removeClass('has-success');
                    $(this).addClass('has-error');
                }
            });
            $('.validation-summary-errors').each(function () {
                if ($(this).hasClass('alert-danger') == false) {
                    $(this).addClass('alert');
                    $(this).addClass('alert-danger');
                }
            });
        }
    });

    // check each form-group for errors on ready
    $('form').each(function () {
        $(this).find('div.form-group').each(function () {
            if ($(this).find('span.field-validation-error').length > 0) {
                $(this).addClass('has-error');
            }
        });
    });
});

var page = function () {
    //Update the validator
    $.validator.setDefaults({
        highlight: function (element) {
            $(element).closest(".form-group").addClass("has-error");
            $(element).closest(".form-group").removeClass("has-success");
        },
        unhighlight: function (element) {
            $(element).closest(".form-group").removeClass("has-error");
            $(element).closest(".form-group").addClass("has-success");
        }
    });
}(); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-12-22T07:49:16.510

您可以在 Site.css 文件中添加一些类：

```
/* styles for validation helpers */
.field-validation-error {
    color: #b94a48;
}

.field-validation-valid {
    display: none;
}

input.input-validation-error {
    border: 1px solid #b94a48;
}

select.input-validation-error {
    border: 1px solid #b94a48;
}

input[type="checkbox"].input-validation-error {
    border: 0 none;
}

.validation-summary-errors {
    color: #b94a48;
}

.validation-summary-valid {
    display: none;
} 
```

仅供参考：[http ://weblogs.asp.net/jdanforth/form-validation-formatting-in-asp-net-mvc-5-and-bootstrap-3](http://weblogs.asp.net/jdanforth/form-validation-formatting-in-asp-net-mvc-5-and-bootstrap-3)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-09-03T17:04:31.987

这将转换`ValidationSummary()`为自举警报。您可以包含一个小脚本来删除不必要的类并突出显示有问题的字段。

```
@if (ViewData.ModelState.Any(x => x.Value.Errors.Any())) {
   <div class="alert alert-danger">
      <a href="#" class="close" data-dismiss="alert">&times;</a>
      <h4>Validation Errors</h4>
      @Html.ValidationSummary()
   </div>
}

<script>
$(".validation-summary-errors").removeClass("validation-summary-errors");
$(".input-validation-error").removeClass("input-validation-error").parent().addClass("has-error");
</script> 
```

[在http://chadkuehn.com/convert-razor-validation-summary-into-bootstrap-alert/](http://chadkuehn.com/convert-razor-validation-summary-into-bootstrap-alert/)上查看更多信息

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-07-25T03:30:02.133

这是一个简洁的解决方案，可以让您更好地控制 ValidationSummary 如何将错误呈现给视图。它生成的无序列表在警报中看起来并不正确。因此，我只是简单地遍历错误并按照我想要的方式呈现它们 - 在这种情况下使用段落。例如：

```
@if (ViewData.ModelState.Any(x => x.Value.Errors.Any()))
{
    <div class="alert alert-danger" role="alert">
        <a class="close" data-dismiss="alert">×</a>
        @foreach (var modelError in Html.ViewData.ModelState.SelectMany(keyValuePair => keyValuePair.Value.Errors))
        {
            <p>@modelError.ErrorMessage</p>
        }
    </div>
} 
```

这会产生一个简洁的验证摘要警报： [![在此处输入图像描述](../Images/a35e972752a44143a44aa1d381da87e4.png)](https://i.stack.imgur.com/lvhvG.png)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-09-21T09:45:38.693

以下对我有用：

```
$(function () {
    // any validation summary items should be encapsulated by a class alert and alert-danger
    $('.validation-summary-errors').each(function () {
        $(this).addClass('alert');
        $(this).addClass('alert-danger');
    });

    // update validation fields on submission of form
    $('form').submit(function () {
        if ($(this).valid()) {
            $(this).find('div.control-group').each(function () {
                if ($(this).find('span.field-validation-error').length == 0) {
                    $(this).removeClass('has-error');
                    $(this).addClass('has-success');
                }
            });
        }
        else {
            $(this).find('div.control-group').each(function () {
                if ($(this).find('span.field-validation-error').length > 0) {
                    $(this).removeClass('has-success');
                    $(this).addClass('has-error');
                }
            });
            $('.validation-summary-errors').each(function () {
                if ($(this).hasClass('alert-danger') == false) {
                    $(this).addClass('alert');
                    $(this).addClass('alert-danger');
                }
            });
        }
    });

    // check each form-group for errors on ready
    $('form').each(function () {
        $(this).find('div.form-group').each(function () {
            if ($(this).find('span.field-validation-error').length > 0) {
                $(this).addClass('has-error');
            }
        });
    });
});

var page = function () {
    //Update the validator
    $.validator.setDefaults({
        highlight: function (element) {
            $(element).closest(".form-group").addClass("has-error");
            $(element).closest(".form-group").removeClass("has-success");
        },
        unhighlight: function (element) {
            $(element).closest(".form-group").removeClass("has-error");
            $(element).closest(".form-group").addClass("has-success");
        }
    });
}(); 
```

取自[http://www.benripley.com/development/javascript/asp-mvc-4-validation-with-bootstrap-3](http://www.benripley.com/development/javascript/asp-mvc-4-validation-with-bootstrap-3)。

# powershell - vbscript 中的对象需要错误

> ID：11468139
> 
> 赞同：1
> 
> 时间：2012-07-13T09:53:23.297
> 
> 标签：powershell, vbscript

我收到此错误： [图片](http://img822.imageshack.us/img822/2613/greenshot20120713114555.jpg)

当我尝试运行此代码时：

```
strComputer = "server01"
strCommand = "powershell.exe -NoLogo -Command Start-Service -InputObject $(Get-Service -Computer " & strComputer & " -Name " & strService & ")"

Set WshShell = WScript.CreateObject("WScript.Shell") 
Set objExec = WshShell.Run(strCommand,0,True) 
```

我想在隐藏窗口中运行 strCommand 。这可以使代码运行并执行它应该执行的操作，但是会发生此错误，这真的很糟糕。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T10:04:54.500

.Run() - 与 .Exec() 相反 - 返回错误代码（不是对象）。所以你不能使用

```
Set objExec = WshShell.Run(strCommand,0,True) 
```

但

```
nErrorCode = WshShell.Run(strCommand,0,True) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T10:10:33.577

您需要在命令之前和末尾添加双引号：

```
strCommand = "powershell.exe -NoExit -NoLogo -Command ""Start-Service -PassThru -InputObject (Get-Service -Computer " & strComputer & " -Name " & strService & ")""" 
```

# perl - 无法为模块 XML::LibXML 加载“C:/strawberry/perl/site/lib/auto/XML/LibXML/LibXML.dll”

> ID：11468141
> 
> 赞同：7
> 
> 时间：2012-07-13T09:53:30.583
> 
> 标签：perl, perl-module, cgi-bin, windows-xp-sp3, xml-libxml

我已经下载了草莓 PERL 并在 Winxp sp3 上使用 CGI Perl Apache 编写了一个应用程序）。我使用的库之一（由其他人编写）使用 XML::LibXML。当我加载页面时，它会给出内部服务器错误。从 Apache 错误日志我可以看到这个错误：
**Can't load 'C:/strawberry/perl/site/lib/auto/XML/LibXML/LibXML.dll' for module XML::LibXML: load_file:The specified module could not可以在 C:/strawberry/perl/lib/DynaLoader.pm 第 190 行找到。 C:/strawberry/perl/site/lib/auto/XML/LibXML/LibXML.dll**
具有所有权限。这个库也可以在 Linux 上正常工作。如果我删除所有需要 LibXML 的代码，我的应用程序也可以正常工作。
谁能告诉我这里什么时候可能出现问题。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-12-12T16:12:15.263

如果您查看 DynaLoader 的源代码，您会发现

> 许多动态扩展加载问题似乎来自这部分代码：XYZ 在 DynaLoader.pm 的第 123 行失败。通常这些错误实际上发生在扩展 XS 文件的初始化 C 代码中。Perl 将错误报告为在此 perl 代码中，因为这是它执行的最后一个 perl 代码。

您还应该得到（但可能没有注意到）以下对话框，它提供了更准确的错误消息：

![libxml2.dll 丢失](../Images/d3d89486610d99a9ae78322363f78427.png)

问题不在于 perl 找不到 LibXML.dll；就是LibXML.dll找不到真正的libxml。（前者只是为后者提供 Perl 绑定的包装器。）要解决这个问题，您需要确保 Strawberry Perl 的`c\bin`文件夹在您的 PATH 中。在你的情况下，那将是`C:\strawberry\c\bin`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-13T18:44:09.440

您可能需要检查 windows 中的环境变量设置，确保模块的安装路径存在于 PATH 变量中。它在 linux 中工作的原因是 make 文件通常在 windows 中为你设置环境变量，它可能没有正确设置。例如；转到控制面板\系统和安全\系统单击更改设置，然后在用户变量部分中单击高级选项卡，查看是否有一个名为 perl5lib 的变量。如果不创建一个新的 perl5lib 变量并添加库的路径（通常是 C:\Perl\site\lib，但在您的情况下可能会有所不同）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-23T08:44:34.047

我最近遇到了同样的问题，在我的情况下它与 PATH 变量无关（它已经是正确的）。问题是我正在从 Git Bash 控制台执行我的脚本，结果发现使用的是 git-bash perl 而不是 Strawberry（请参阅[git-bash perl should not be first in path](https://github.com/actions/virtual-environments/issues/123)）。切换到标准 Windows CMD 终端有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-11T11:33:10.207

安装 Strawberry perl 后我遇到了同样的问题。当我从服务器运行脚本时它工作正常，但不是从自动化工具远程运行。问题是因为我们远程运行它时没有更新环境变量。所以我做了服务器重启，这解决了这个问题。

# android - Android，ImageView 优于 ImageView

> ID：11468146
> 
> 赞同：12
> 
> 时间：2012-07-13T09:53:41.290
> 
> 标签：android, android-layout, imageview

我有一个非常简单的问题要问：我需要在 ImageView 上放一个小标志，整个屏幕都很大，在屏幕的右下角区域，但我不知道如何设置坐标或如何说ImageViews 处于相对位置。

像这样的东西：

![在此处输入图像描述](../Images/2383a3b75bda3c73aff4b27970134305.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-13T10:02:18.607

试试这个

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:src="@drawable/ic_launcher" />

    <ImageView
        android:id="@+id/imageView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"
        android:src="@drawable/ic_launcher" />

</RelativeLayout> 
```

**输出**

![在此处输入图像描述](../Images/3bdb910b6984f19fd8d437ed0117773e.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-13T10:02:34.197

使用框架布局。

**根据 Google Blogspot 示例**

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <ImageView  
        android:layout_width="fill_parent" 
        android:layout_height="fill_parent" 

        android:scaleType="center"
        android:src="@drawable/golden_gate" />

    <TextView
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content" 
        android:layout_marginBottom="20dip"
        android:layout_gravity="center_horizontal|bottom"

        android:padding="12dip"

        android:background="#AA000000"
        android:textColor="#ffffffff"

        android:text="Golden Gate" />

</FrameLayout> 
```

**这将为您提供以下输出**

![在此处输入图像描述](../Images/8c00f26858ff9e5462dd991460654a67.png)

只需调整它以满足您的需求。

# ios - 将自定义符号/图标添加到字体

> ID：11468149
> 
> 赞同：1
> 
> 时间：2012-07-13T09:53:47.867
> 
> 标签：ios, icons, symbols, uifont

我想知道是否可以在启动期间将小图标（以 png 文件形式提供）添加到我在应用程序中使用的自定义字体？该代码应适用于 iOS5 及更高版本。这将有几个用例。例如，您可以在不使用图像视图和标签的情况下添加带有图标的标签，并根据文本对内容进行布局。我知道我在某处读过，苹果在他们自己的应用程序中使用了这种技术，但我不知道他们是在启动时添加图标还是已经在设计过程中添加到字体中。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T14:12:11.680

我通过使用具有字符串和字体属性以及一个或多个图像的自定义视图来模拟这一点。在特殊字符值和图像之间创建映射。在 drawrect 中使用 NSString 上的 uikit 类别，可以让您绘制字符或字符串。当你到达你的特殊字符时，你会跳过它并绘制图像。这些绘图方法返回字符串/字符的大小，因此您可以知道绘制时要移动多少。

你可以在 github 上看到这个技术，寻找 CreditCard ObjectiveC。它用于在 PlaceHolder 类中绘制占位符或字符

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-13T15:01:36.943

我认为不可能将 png 添加到设备中的字体。字体文件使用矢量图形来表示每个字形。您可以将字体文件转换为 SVG。但 PNG 不是矢量图形。

我在一些项目中使用图标字体。我已经创建了一个项目来轻松使用图标字体。[https://github.com/JohnWong/IconFont](https://github.com/JohnWong/IconFont)。图标字体总是通过设置文本在 UILabel 中使用。但我认为从字体创建 UIImage 更灵活。UIImage 可用于 Buttons、TabBar Items、Bar Button Items 等。这就是我创建这个项目的原因。这个项目的 README 是用中文写的。但是演示项目会清楚地显示一切。

# c# - 检查当前用户是否处于活动状态？

> ID：11468150
> 
> 赞同：3
> 
> 时间：2012-07-13T09:53:55.457
> 
> 标签：c#

Windows Live Messenger、Skype、Windows 中的索引服务和 Windows 中的屏幕保护程序功能都可以检测用户何时移动鼠标，或使用他/她的键盘检测它们何时处于活动状态，何时不活动.

是否有用于检测用户是否在他的 PC 上的 Windows API？Windows 8 中的接近传感器 API 怎么样？或者我是否需要通过现有的 Windows API 实际检测用户是否移动鼠标或使用键盘？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T10:18:42.323

我找到了使用此 API 的解决方案。

[http://www.pinvoke.net/default.aspx/user32.GetLastInputInfo](http://www.pinvoke.net/default.aspx/user32.GetLastInputInfo)

它提供了我所需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T10:07:43.023

我想您将不得不深入研究 WIN32 API 和 Windows 消息队列。

特别看一下 WM_MOUSEMOVE 消息。查看; [http://msdn.microsoft.com/en-us/library/ms645616(VS.85).aspx](http://msdn.microsoft.com/en-us/library/ms645616(VS.85).aspx)

使用您的应用程序查看该消息并构建超时机制。

另请查看此链接以获取 C++ 变体：[http ://www.cplusplus.com/forum/beginner/11226/](http://www.cplusplus.com/forum/beginner/11226/)

# jquery - 如何找到div的第一个直接子元素

> ID：11468152
> 
> 赞同：21
> 
> 时间：2012-07-13T09:53:59.417
> 
> 标签：jquery

这应该很容易，但我做不到。

我有一个 id 为“LeftScrollableDiv”的 div 元素，我试图在它下面找到第一个子元素：

```
$("#LeftScrollableDiv:first-child");

<div id="LeftScrollableDiv:first">
   <table></table>
</div> 
```

但结果为空。有什么帮助吗？？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-07-13T09:55:23.577

```
$('#LeftScrollableDiv').children().first(); 
```

[API](http://api.jquery.com/first//)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-13T09:55:49.033

```
$("#LeftScrollableDiv > :first-child"); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-13T10:07:24.560

`:first-child`检查其主题**是否**是其父级的第一个子级。在这种情况下，您尝试选择 id`#LeftScrollableDiv`是其父级的第一个子级的元素。所有的`:`选择器只是过滤之前的选择，他们不选择任何新的元素。

遗憾的是，jQuery 中没有`.firstChild`方法，因此您必须始终先选择所有子项，然后取出第一个。

一个可能的选择器是：

```
"#LeftScrollableDiv > :first" 
```

[这比`> :first-child`](http://jsperf.com/fristfirstfirst).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-06T13:17:25.140

以下对我不起作用：

```
$('#LeftScrollableDiv').children().first(); 
```

如果发现相同，则可以将 children() 方法返回的对象视为数组。

获取第一个元素：

```
$('#LeftScrollableDiv').children()[0] 
```

获取最后一个元素：

```
$('#LeftScrollableDiv').children()[$('#LeftScrollableDiv').children().length-1] 
```

# php - PHP中的五边形图

> ID：11468153
> 
> 赞同：0
> 
> 时间：2012-07-13T09:54:02.527
> 
> 标签：php, cakephp, charts, google-visualization, cakephp-2.1

我想根据我保存在 PHP 数据库中的历史数据来实现一个五角形的图表。事实上，我想在 CakePHP 中使用它。通过提供任何图表 api 链接或任何在线可用的库来需要您的帮助。提前致谢。

![图表应该以某种方式看起来像](../Images/f615be01b04acacbbffc0f63eb2eaad9.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T09:59:20.183

这些被称为雷达图，而不是五边形图。

您可以使用这个 Javascript 库：[http ://www.amcharts.com/javascript/radar-chart/](http://www.amcharts.com/javascript/radar-chart/)

或者使用 pChart PHP 库：[http ://pchart.sourceforge.net/documentation.php?topic=exemple8](http://pchart.sourceforge.net/documentation.php?topic=exemple8)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T10:04:16.167

您可以使用[JPGraph](http://jpgraph.net/features/gallery.php#rader1)轻松（或高级）执行此操作。该图书馆可免费用于非商业、开源或教育用途。可以在[此处](http://jpgraph.net/download/manuals/chunkhtml/ch16s02.html)找到有关如何使用它设置雷达图的示例。

# apache - 使用 apache 隧道安全 websocket 连接

> ID：11468154
> 
> 赞同：22
> 
> 时间：2012-07-13T09:54:03.403
> 
> 标签：apache, ssl, websocket, mod-proxy

我有一个只能通过 HTTPS 访问的 Apache。我想从在同一台机器上运行的其他服务器应用程序提供 websockets，但由于客户端无法通过 443 以外的其他端口连接到我们的服务器，因此这些 websocket 连接需要通过 Apache 代理。

现在，我已经安装了 mod_proxy 并配置如下：

```
SSLProxyEngine on
ProxyPass /ws https://127.0.0.1:9001 
```

但是，这不起作用。我现在可以在浏览器中连接到*https://server/ws*，但是 apache 似乎吞下了部分 websockets 标头，因此真正的 websocket 连接不起作用。

如何通过 Apache 服务器完成我的 websocket 连接隧道？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2014-04-04T21:58:28.900

我已经让它工作了。

## 设想

```
-------------       ----------------       ----------
| Browser   |<----->| Apache httpd |<----->| Tomcat |
|           |  SSL  |    2.4.9     |  SSL  | 7.0.52 |
-------------       ----------------       ---------- 
```

通过 Apache httpd 的浏览器 WebSocket，反向代理到 Tomcat 中的 Web 应用程序。所有 SSL 从前到后。

以下是每个部分的配置：

## 浏览器客户端

请注意 url: 中的尾随“/” **`wss://host/app/ws/`**。必须匹配正确的 wss ProxyPass 指令（在 Apache 配置部分进一步显示）并防止 301 重定向到`https://host/app/ws`. 也就是说，它使用 https 方案而不是后端的 wss 方案进行重定向。

测试页

```
<!doctype html>
<body>

<script type="text/javascript">
    var connection = new WebSocket("wss://host/app/ws/");

    connection.onopen = function () {
        console.log("connected");
    };

    connection.onclose = function () {
        console.log("onclose");
    };

    connection.onerror = function (error) {
        console.log(error);
    };
</script>

</body>
</html> 
```

## 阿帕奇 httpd

我正在使用 Apache httpd 2.4.9，它开箱即用地提供了**mod_proxy_wstunnel**。但是，使用 wss:// 方案时，提供的*mod_proxy_wstunnel.so*不支持 SSL。它最终尝试以纯文本形式连接到后端（Tomcat），这导致 SSL 握手失败。[请参阅此处](https://issues.apache.org/bugzilla/show_bug.cgi?id=55320)的错误。因此，您必须按照错误报告中建议的更正自行修补*mod_proxy_wstunnel.c 。*这是一个简单的 3 行更改。

```
Suggested correction,
314a315
>     int is_ssl = 0;
320a322
>         is_ssl = 1;
344c346
<     backend->is_ssl = 0;
---
>     backend->is_ssl = is_ssl; 
```

然后重建模块并用旧的 mod_proxy_wstunnel.so 替换新的*mod_proxy_wstunnel.so*。

### 构建 Apache httpd

这是我用来在我想要的模块中构建的 (2.4.9) 命令。您可能不需要全部。

```
./configure --prefix=/usr/local/apache --with-included-apr --enable-alias=shared
--enable-authz_host=shared --enable-authz_user=shared 
--enable-deflate=shared --enable-negotiation=shared 
--enable-proxy=shared --enable-ssl=shared --enable-reqtimeout=shared
--enable-status=shared --enable-auth_basic=shared
--enable-dir=shared --enable-authn_file=shared
--enable-autoindex=shared --enable-env=shared --enable-php5=shared
--enable-authz_default=shared --enable-cgi=shared
--enable-setenvif=shared --enable-authz_groupfile=shared
--enable-mime=shared --enable-proxy_http=shared
--enable-proxy_wstunnel=shared 
```

请注意最后一个开关：**`--enable-proxy_wstunnel=shared`** 起初，我错误地使用**`--enable-proxy-wstunnel=shared`**了 .so 文件，这似乎构建得很好，但当我使用生成的 .so 文件时最终无法正常工作。看到不同？您要确保在中使用下划线**`"proxy_wstunnel"`**而不是破折号。

### Apache httpd 配置

httpd.conf

```
...
LoadModule proxy_module modules/mod_proxy.so
...
LoadModule proxy_wstunnel_module modules/mod_proxy_wstunnel.so
...
LoadModule ssl_module modules/mod_ssl.so
...
Include conf/extra/httpd-ssl.conf
...
LogLevel debug
ProxyRequests off

# Note, this is the preferred ProxyPass configuration, and *should* be equivalent
# to the same inline version below, but it does NOT WORK!
#<Location /app/ws/>
#        ProxyPass wss://localhost:8443/app/ws
#        ProxyPassReverse wss://localhost:8443/app/ws
#</Location>
#<Location /app/>
#        ProxyPass https://localhost:8443/app/
#        ProxyPassReverse https://localhost:8443/app/
#</Location>

# NOTE: Pay strict attention to the slashes "/" or lack thereof!
# WebSocket url endpoint
ProxyPass /app/ws/ wss://localhost:8443/app/ws
ProxyPassReverse /app/ws/ wss://localhost:8443/app/ws

# Everything else
ProxyPass /app/ https://localhost:8443/app/
ProxyPassReverse /app/ https://localhost:8443/app/ 
```

如果您在上面的配置中没有看到我的注释，这里又是：请**严格注意斜杠“/”或缺少斜杠！**

此外，如果您在 apache 日志中看到调试日志语句说 wss 连接已建立然后关闭，那么您可能像我一样启用了 mod_reqtimeout，因此请确保未加载它：

```
#LoadModule reqtimeout_module modules/mod_reqtimeout.so 
```

## 雄猫

假设您的 HTTP 连接器设置正确，则在 tomcat 中无需配置太多。尽管为了帮助调试，我发现创建一个如下所示的内容很有用`$CATALINA_HOME/bin/setenv.sh`：

设置环境文件

```
CATALINA_OPTS=$CATALINA_OPTS" -Djavax.net.debug=all -Djavax.net.debug=ssl:handshake:verbose" 
```

这让我可以查看我修改的 mod_proxy_wstunnel.so 是否适用于 wss://。当它不工作时，我的 catalina.out 日志文件会显示：

```
javax.net.ssl.SSLException: Unrecognized SSL message, plaintext connection?
http-nio-8443-exec-1, SEND TLSv1 ALERT:  fatal, description = internal_error
http-nio-8443-exec-1, WRITE: TLSv1 Alert, length = 2
http-nio-8443-exec-1, called closeOutbound()
http-nio-8443-exec-1, closeOutboundInternal() 
```

## 最后的想法

虽然我使用的是 Apache httpd 2.4.9，[但我已经看到 mod_proxy_wstunnel 的反向移植可以应用于 2.2.x 版本](http://www.amoss.me.uk/2013/06/apache-2-2-websocket-proxying-ubuntu-mod_proxy_wstunnel/)。希望我上面的笔记可以应用于那些旧版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T10:40:45.127

如果您不希望 Apache 终止 SSL 连接（并转发未加密的 WebSocket 流量），但在最终目标 WebSocket 服务器上终止 SSL**并且**专门希望在进入 Apache 的 WebSocket 流量上使用 WSS，那么**mod_proxy_connect**可能能够只是通过原始流量连接。没有把握。如果可行，我也会感兴趣。

如果以上不成立，这里有更多信息：

*   [https://serverfault.com/questions/290121/configuring-apache2-to-proxy-websocket](https://serverfault.com/questions/290121/configuring-apache2-to-proxy-websocket)
*   [https://issues.apache.org/bugzilla/show_bug.cgi?id=47485](https://issues.apache.org/bugzilla/show_bug.cgi?id=47485)
*   [http://blog.alex.org.uk/2012/02/16/using-apache-websocket-to-proxy-tcp-connection/](http://blog.alex.org.uk/2012/02/16/using-apache-websocket-to-proxy-tcp-connection/)

无论如何，使用 Apache 将严重限制并发服务的 WebSocket 连接数量的可伸缩性，因为每个 WS 连接将消耗 Apache 上的 1 个进程/线程。

# android - Android localDB 和 serverDB 同步

> ID：11468155
> 
> 赞同：1
> 
> 时间：2012-07-13T09:54:10.277
> 
> 标签：android, sqlite

我正在开发一个应用程序，当互联网不可用时，它也可以在离线模式下工作。在离线模式下，用户将他的数据保存在 android localDB(sqlite) 中。一旦互联网可用，我将开始将 android localDB(sqlite) 与我的 serverDB 同步。有什么最好的方法来实现这种功能？先谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T11:16:06.497

我在我的一个应用程序中具有相同的同步。

我首先通过网络服务将数据发送到服务器，然后重置我的数据库并通过网络服务从服务器获取最新数据..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T11:45:06.407

我将服务器上保存的高核数据与一些 5K 移动设备同步。每个高分条目从设备到达时都有服务器生成的时间戳。移动设备知道它已经看到的高分条目的最新时间戳，并且仅从具有更大时间戳的服务器请求条目。

# jquery - qTip2 在 Chrome 中的定位

> ID：11468158
> 
> 赞同：2
> 
> 时间：2012-07-13T09:54:23.670
> 
> 标签：jquery, google-chrome, qtip, qtip2

以下代码使用 jQuery qTip2 插件创建工具提示。它在 Firefox 中正常工作，但在 chrome 中，工具提示绑定到视口的左上角。在ie8中它根本不起作用，但假设这是一个不同的问题......

```
$("option").qtip({
            content: {
                text: function() {

                    return $(this).attr('title');
                            }
                },
            position: {
                my: 'right center',
                at: 'left center',
                target: this,
                viewport: $(window)
            },
            show: {
                solo:true
            }

      }); 
```

这是一个显示行为的[jsfiddle](http://jsfiddle.net/VQ2c6/6/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T02:43:10.853

似乎选项在 Chrome 中没有偏移，可能是因为它被视为文本字段的内侧。

您可以做的是使用 target: mouse 并调整 {mouse: false} 这更容易且有意义。或者你可以解决这个问题：

```
$("option").each(function(){
              origin=this;
              $(origin).qtip({
                    content: {
                        text: function() {                                               
                            return $(this).attr('title');
                                    }
                        },
                    position: {
                        my: 'right center',
                        at: 'left center',
                        target: [$(".dropDown select").offset().left,$(".dropDown select").offset().top+14+parseInt($(".dropDown select option").index($(origin))*14)],//"mouse",//Causing problems in chrome? 
                        viewport: $(window),
                        adjust: {mouse:false}
                    },
                    show: {
                        solo:true
                    }                              
          });
}); 
```

​ 您可以根据您的字体大小调整值 14。也可能为了提高性能，您可以将 $(".dropDown select").offset().left 和 $(".dropDown select").offset().top 存储在每个函数之外的变量中。

# qt - 在 Qt 中删除 QLabel 周围的边框

> ID：11468159
> 
> 赞同：2
> 
> 时间：2012-07-13T09:54:24.597
> 
> 标签：qt, qt4

我在应用程序的 statusbar 中添加了一个 qlabel。现在我一直在尝试删除 QLabel 周围的边框。

```
label->setFrameShape(QFrame::HLine);
label->setFrameStyle(QFrame::NoFrame);
// label->setLineWidth(0);
//label->setMidLineWidth(0); 
```

我尝试了上面的所有方法，它们都不起作用，感谢任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T11:00:07.780

我们可以使用样式表来做到这一点。在您声明`QApplication app`变量的地方添加如下一行：

```
QApplication app(argc, argv);
app.setStyleSheet("QStatusBar::item { border: 0px solid black }; "); 
```

那些讨厌的盒子就会消失。

# java - 列出 .zip 目录而不解压缩

> ID：11468163
> 
> 赞同：12
> 
> 时间：2012-07-13T09:54:32.290
> 
> 标签：java, zip

我正在用 Java 构建文件资源管理器，并在 JTrees 中列出文件/文件夹。我现在要做的是，当我到达一个压缩文件夹时，我想列出它的内容，但没有先提取它。

如果有人有想法，请分享。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-13T09:57:38.820

我建议你看看[`ZipFile.entries()`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/zip/ZipFile.html#entries%28%29)。

这是一些代码：

```
try (ZipFile zipFile = new ZipFile("test.zip")) {
    Enumeration zipEntries = zipFile.entries();
    while (zipEntries.hasMoreElements()) {
        String fileName = ((ZipEntry) zipEntries.nextElement()).getName();
        System.out.println(fileName);
    }
} 
```

如果您使用的是**Java 8**，则可以避免使用几乎不推荐使用的`Enumeration`类`ZipFile::stream`，如下所示：

```
zipFile.stream()
       .map(ZipEntry::getName)
       .forEach(System.out::println); 
```

* * *

如果你需要知道一个条目是否是一个目录，你可以使用[`ZipEntry.isDirectory`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/zip/ZipEntry.html#isDirectory%28%29). 与不提取文件相比（出于显而易见的原因），您无法获得更多信息。

* * *

如果要**避免提取*所有*文件，**可以使用[`ZipFile.getInputStream`](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/zip/ZipFile.html#getInputStream%28java.util.zip.ZipEntry%29)for each一次提取一个文件`ZipEntry`。（请注意，您不需要将解压后的数据存储在磁盘上，您只需读取输入流并随时丢弃字节。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-13T09:59:10.463

使用`java.util.zip.ZipFile`类，特别是它的`entries`方法。

你会有这样的东西：

```
ZipFile zipFile = new ZipFile("testfile.zip");
Enumeration zipEntries = zipFile.entries();
String fname;
while (zipEntries.hasMoreElements()) {
    fname = ((ZipEntry)zipEntries.nextElement()).getName();
    ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T09:58:22.297

要处理 ZIP 文件，您可以使用[ZipFile](http://docs.oracle.com/javase/7/docs/api/java/util/zip/ZipFile.html)类。它有方法[entries()](http://docs.oracle.com/javase/7/docs/api/java/util/zip/ZipFile.html#entries%28%29)，它返回 ZIP 文件中包含的条目列表。此信息包含在 ZIP 标头中，不需要提取。

# ruby-on-rails - Rails 在 Json 对象中包含过滤后的模型

> ID：11468164
> 
> 赞同：0
> 
> 时间：2012-07-13T09:54:43.567
> 
> 标签：ruby-on-rails, ruby-on-rails-3, json

我有以下控制器代码

```
respond_with(@employees) do |format|
    format.json { render :json => @employees.to_json(:include => :shifts) }
end 
```

如果我想过滤包含的班次，我该怎么办？例如按日期。我必须能够在控制器中设置过滤器参数。

编辑：我考虑过使用 :method 但它在 json 对象中创建了另一个变量。它必须被称为“转变”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T09:59:25.310

```
format.json { render :json => @employees.includes(:shifts).where("shifts.date > ?", your_date_here).to_json(:include => :shifts) } 
```

# c# - DateTime 需要转换为字符串 wpf

> ID：11468165
> 
> 赞同：1
> 
> 时间：2012-07-13T09:54:53.243
> 
> 标签：c#, wpf

```
<DataGrid....
<DataGrid.Resources>
  <DataTemplate DataType="{x:Type DateTime}">
        <TextBlock Text="{Binding StringFormat={}{0:d}}"  />
  </DataTemplate>
</DataGrid.Resources>
...
 <DataGridTemplateColumn Header="Время оплаты">
    <DataGridTemplateColumn.CellTemplate>
          <DataTemplate>
                <TextBlock VerticalAlignment="Center" Text="{Binding date_payment}"  Width="Auto" Height="Auto" />
           </DataTemplate>
     </DataGridTemplateColumn.CellTemplate>
 </DataGridTemplateColumn> 
```

但是此列具有类型`DateTime`...我需要在此类型（字符串）上转换此列，因为我需要在此列上重命名值行，`LoadingRow`所以我使用事件

```
DataRowView item = e.Row.Item as DataRowView;
DataRow row = item.Row;
var time = row[4];
if (Convert.ToString(time) == "01.01.0001 0:00:00")
{
   row[4] = "No payment";
} 
```

但它错了，行没有转换为字符串，请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T10:23:14.573

首先，您有一个单元格模板和一个数据模板。选一个。其次，既然你有一个数据模板，就没有理由创建转换器，更不用说创建代码隐藏事件处理程序了。您可以使用触发器将所有相关代码和文本字符串（如果需要本地化怎么办？）很好地保存在一个地方：

```
<DataTemplate TargetType="{x:Type DateTime}">
  <TextBlock x:Name="text" Text="{Binding StringFormat={}{0:d}}"/>
  <DataTemplate.Triggers>
    <DataTrigger Binding="{Binding}" Value="{x:Static DateTime.MinValue}">
      <Setter TargetName="text" Property="Text" Value="No payment"/>
    </DataTrigger>
  </DataTemplate.Triggers>
</DataTemplate> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T10:08:59.160

如果它是 Nullable 值，您可以使用

```
Binding="{Binding date_payment, TargetNullValue={}Дата отсутствует}" 
```

如果不是，请使用 IValueConverter 来检查 MinDate。这是一个如何使用转换器的[示例，以及为您提供的转换器](https://stackoverflow.com/questions/7136410/wpf-datagrid-displaying-image-in-column-using-converter-based-on-numerical-valu)

```
public class DateConverter:IValueConverter
{
    private const string NoDate = "Дата отсутствует";
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        if(value is DateTime)
        {
            var date = (DateTime) value;
            if(date==DateTime.MinValue)
                return NoDate;
            return date.ToString();
        }
        return NoDate;
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T10:01:33.083

你应该为此使用转换器：

```
public class MyConverter : IValueConverter {
        public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture) {
            if (value == DateTime.MinValue) {
                return "No payment";
            }
            return value.ToString();
        }

        public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture) {
            throw new NotImplementedException();
        }
    } 
```

不仅仅是将转换器添加到您的绑定中。

# spring - Spring：在jsp页面中打印变量

> ID：11468166
> 
> 赞同：1
> 
> 时间：2012-07-13T09:54:54.273
> 
> 标签：spring, jsp, jakarta-ee

我一直在尝试 Spring 框架，并在尝试在 jsp 文件中打印 java-class 属性时遇到了一些问题。在尝试将日期打印到我的页面时，我什么也没得到。我知道变量中有一个值，因为我可以在控制台中看到它，但在页面上什么都没有。这是我的 index.jsp，其中应该显示值：

```
 <!-- contains taglibraries -->
<%@ include file="/WEB-INF/jsp/include.jsp" %>
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
    "http://www.w3.org/TR/html4/loose.dtd">

<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Hello :: Spring Application</title>
    </head>

 <body>
        <h1>Hello - Spring Application</h1>
        <h2>Testing tags</h2>
        <p> <c:out value="If you see this then C-tag works."/> </p>

        <h2>Testing values brought from controller.  One should see a date after "now".</h2>
        <p>Greetings, it is now <c:out value="${now}"/></p>
    </body>
</html> 
```

这是我的 indexController.java：

```
import java.util.Date;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;
import org.springframework.web.servlet.ModelAndView;
import org.springframework.web.servlet.mvc.Controller;

public class IndexController implements Controller{

    protected Log logger = LogFactory.getLog(getClass());

    @Override
    public ModelAndView handleRequest(HttpServletRequest hsr, HttpServletResponse hsr1) throws Exception {

        String now = (new Date()).toString();
        logger.info("Returning hello view and " + now);

        return new ModelAndView("WEB-INF/jsp/index.jsp" , "now" , now);        

    }  
} 
```

有人可以指出我做错了什么吗？哦，只是澄清一下：“include.jsp”包含我所有的标签库，所以缺少这样的标签库：

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%> 
```

不是问题，因为 index.jsp 上的第一个 c-tag 有效。问题是带有变量“now”的第二个 c-tag 拒绝显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T10:02:59.447

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%> 
```

不包括在你的jsp中

# java - 如何在订阅者端的现有文件中附加已发布的 DDS 内容？

> ID：11468167
> 
> 赞同：1
> 
> 时间：2012-07-13T09:54:55.593
> 
> 标签：java, data-distribution-service

我创建了使用 java 实现的普通发布者和订阅者，它按大小读取内容，总大小为 5MB，每 1MB 发布一次给订阅者。数据正在成功发布**。现在正面临附加问题内容到现有文件**。最后我只能在文件中找到最后 1MB 的数据。所以请让我知道如何解决这个问题？我还附上了发布者和订阅者的源代码。

```
Publisher:

public class MessageDataPublisher {
    static StringBuffer fileContent;
    static RandomAccessFile randomAccessFile ;

    public static void main(String[] args) throws IOException {
        MessageDataPublisher msgObj=new MessageDataPublisher();

        String fileToWrite="test.txt";
        msgObj.towriteDDS(fileToWrite);
    }

    public void towriteDDS(String fileName) throws IOException{

        DDSEntityManager mgr=new DDSEntityManager();
        String partitionName="PARTICIPANT";

        // create Domain Participant
        mgr.createParticipant(partitionName);

        // create Type
        BinaryFileTypeSupport binary=new BinaryFileTypeSupport();
        mgr.registerType(binary);

        // create Topic
        mgr.createTopic("Serials");

        // create Publisher
        mgr.createPublisher();

        // create DataWriter
        mgr.createWriter();

        // Publish Events

        DataWriter dwriter = mgr.getWriter();
        BinaryFileDataWriter binaryWriter=BinaryFileDataWriterHelper.narrow(dwriter);

        int bufferSize=1024*1024;

        File readfile=new File(fileName);
        FileInputStream is = new FileInputStream(readfile);
        byte[] totalbytes = new byte[is.available()];
        is.read(totalbytes);
        byte[] readbyte = new byte[bufferSize];
        BinaryFile binaryInstance;

        int k=0;
        for(int i=0;i<totalbytes.length;i++){
            readbyte[k]=totalbytes[i];
            k++;
            if(k>(bufferSize-1)){
                binaryInstance=new BinaryFile();
                binaryInstance.name="sendpublisher.txt";
                binaryInstance.contents=readbyte;
                int status = binaryWriter.write(binaryInstance, HANDLE_NIL.value);
                ErrorHandler.checkStatus(status, "MsgDataWriter.write");

                ErrorHandler.checkStatus(status, "MsgDataWriter.write");

                k=0;
                }

        }
        if(k < (bufferSize-1)){
            byte[] remaingbyte = new byte[k];                   
            for(int j=0;j<(k-1);j++){
                remaingbyte[j]=readbyte[j];
            }
            binaryInstance=new BinaryFile();
            binaryInstance.name="sendpublisher.txt";
            binaryInstance.contents=remaingbyte;
            int status = binaryWriter.write(binaryInstance, HANDLE_NIL.value);
            ErrorHandler.checkStatus(status, "MsgDataWriter.write");

        }       
        is.close();

        try {
            Thread.sleep(4000);

        } catch (InterruptedException e) {
            e.printStackTrace();
        }

        // clean up
        mgr.getPublisher().delete_datawriter(binaryWriter);
        mgr.deletePublisher();
        mgr.deleteTopic();
        mgr.deleteParticipant();

    }

}

Subscriber:

public class MessageDataSubscriber {
    static RandomAccessFile randomAccessFile ;
    public static void main(String[] args) throws IOException {
        DDSEntityManager mgr = new DDSEntityManager();
        String partitionName = "PARTICIPANT";

        // create Domain Participant
        mgr.createParticipant(partitionName);

        // create Type
        BinaryFileTypeSupport msgTS = new BinaryFileTypeSupport();
        mgr.registerType(msgTS);

        // create Topic
        mgr.createTopic("Serials");

        // create Subscriber
        mgr.createSubscriber();

        // create DataReader
        mgr.createReader();

        // Read Events
        DataReader dreader = mgr.getReader();
        BinaryFileDataReader binaryReader=BinaryFileDataReaderHelper.narrow(dreader);
        BinaryFileSeqHolder binaryseq=new BinaryFileSeqHolder();
        SampleInfoSeqHolder infoSeq = new SampleInfoSeqHolder();
        boolean terminate = false;
        int count = 0;

        while (!terminate && count < 1500) {
             // To run undefinitely
            binaryReader.take(binaryseq, infoSeq, 10,
                    ANY_SAMPLE_STATE.value, ANY_VIEW_STATE.value,ANY_INSTANCE_STATE.value);
                for (int i = 0; i < binaryseq.value.length; i++) {
                    toWrtieXML(binaryseq.value[i].contents);
                    terminate = true;
            }

            try
            {
                Thread.sleep(200);
            }
            catch(InterruptedException ie)
            {
            }
            ++count;

        }
            binaryReader.return_loan(binaryseq,infoSeq);

        // clean up

        mgr.getSubscriber().delete_datareader(binaryReader);
        mgr.deleteSubscriber();
        mgr.deleteTopic();
        mgr.deleteParticipant();

    }

    private static void toWrtieXML(byte[] bytes) throws IOException {
        // TODO Auto-generated method stub
        File Writefile=new File("samplesubscriber.txt");
        if(!Writefile.exists()){
            randomAccessFile = new RandomAccessFile(Writefile, "rw");
            randomAccessFile.write(bytes, 0, bytes.length);
            randomAccessFile.close();
            }
            else{
                randomAccessFile = new RandomAccessFile(Writefile, "rw");
                long i=Writefile.length();
                randomAccessFile.seek(i);
                randomAccessFile.write(bytes, 0, bytes.length);
                randomAccessFile.close();
            }

    }
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T03:31:10.147

很难对您的问题给出结论性的答案，因为您的问题可能是多种不同原因造成的。此外，一旦确定了问题的原因，您可能会有多种选择来缓解它。

首先要看的地方是读者方面。代码`take()`循环执行，每次拍摄之间有 200 毫秒的暂停。根据您在 DataReader 上的 QoS 设置，您可能会遇到这样的情况：当您的应用程序休眠 200 毫秒时，您的样本在 DataReader 中被覆盖。如果您通过千兆以太网执行此操作，那么典型的 DDS 产品将能够在该睡眠期间执行这 5 个 1 兆字节的块，这意味着您的默认单一缓冲区将在您的睡眠期间被覆盖 4 次。

如果您使用默认的历史 QoS 设置，则可能会出现这种情况`BinaryFileDataReader`，这意味着`history.kind = KEEP_LAST`和`history.depth = 1`。将后者增加到更大的值，例如增加到 20，将导致队列能够在您睡觉时保存 20 个文件块。现在应该足够了。

如果这不能解决您的问题，则可以探索其他可能的原因。

# jquery - 移除元素集中相同的元素

> ID：11468169
> 
> 赞同：0
> 
> 时间：2012-07-13T09:55:03.140
> 
> 标签：jquery, arrays

在我的例子中，我选择了一些基于 $('a,form,[onclick]') 的元素，但是，由于有些元素包含 onclick 属性，它会被获取两次。我想从此元素集中删除相同的元素对象。我所做的是使用下面的代码，但是，它不起作用：

```
total = $('a,form,[onclick]')
$(total).each(function(index, element) {
         for(var i=index;i<total.length;i++){
        if($(this)[0] == $(total[i])[0]){
            $(total[i]).remove();
        }
    }
}); 
```

这个问题应该怎么解决，求大神帮忙，谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T09:58:38.370

尝试使用[独特的](http://api.jquery.com/jQuery.unique/)功能：

```
$.unique(total); 
```

# android - 如何在 Ruby 中提取 Android APK 详细信息？

> ID：11468172
> 
> 赞同：0
> 
> 时间：2012-07-13T09:55:10.277
> 
> 标签：android, ruby, apk

我正在寻找一种类/工具/任何方式来从 ruby​​ 中的 .apk 文件中提取 Android APK 的包、名称和相关信息。

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T08:39:17.103

更稳定可用[https://github.com/abitno/ruby-apk](https://github.com/abitno/ruby-apk)

更好的文档[https://github.com/devunwired/apktools](https://github.com/devunwired/apktools)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T10:00:37.203

Android apk 文件只是 zip 文件，因此您需要使用[libarchive](http://libarchive.rubyforge.org/)或其他 zip 库之一来提取文件（如果解压缩不起作用，您可能需要将其重命名为 .zip）。那么您需要的所有信息都在`AndroidManifest.xml`.

# android - android中自定义对话框中的空指针异常？

> ID：11468176
> 
> 赞同：0
> 
> 时间：2012-07-13T09:55:26.453
> 
> 标签：android, customdialog

我正在创建警报应用程序，我创建了一个带有编辑文本和保存按钮的自定义对话框，当我单击保存按钮时，这些数据将保存在 DB 中，但我得到 NULL POINTER EXCEPTION

```
Savebutton.setOnClickListener(new OnClickListener() {

                    @Override
                    public void onClick(View v) {

                        if (v.equals(Savebutton)) {
                            String nameToInsert = (String) uname_ET.getText().toString();
                            String drugnameToInsert = (String) dname_ET.getText().toString();

                            Log.i("Onclick",""+nameToInsert);
                            Log.i("Onclick",""+drugnameToInsert);

                            if (position == 0) 
                            { Log.i("Onclick",""+position); }
                            }
                    }
                }); 
```

`Savebutton.setOnClickListener(new OnClickListener()` 我力不从心的异常

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T10:13:47.390

我认为问题是你已经设置了按钮，edittext等......这样的对象

```
 Button Savebutton=(Button)findViewById(R.id.savebutton); 
```

对于客户对话框，您必须设置对象，如下所示

```
 Button Savebutton=(Button)dialog.findViewById(R.id.savebutton); 
```

其中对话框是一个对象

```
 Dialog dialog = new Dialog(YourActivity.this); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T09:58:16.767

可能您应该在调用之前检查编辑文本是否为空`getText().toString()`..

```
 if(uname_ET.getText() != null) String nameToInsert = (String) uname_ET.getText().toString();
 if(dname_ET.getText() != null) String drugnameToInsert = (String) dname_ET.getText().toString(); 
```

# macos - 触发 Mac 应用程序从声音或其他物理（现实世界）事件开始

> ID：11468181
> 
> 赞同：4
> 
> 时间：2012-07-13T09:55:43.203
> 
> 标签：macos, audio, arduino, javascript

任何人都可以提供有关获取真实世界事件（即声音、视觉、运动）以在 Mac 上触发事件的选项的任何建议吗？

我认为最简单的事件可能是合理的。

我只需要一定音量的声音，就可以在桌面上启动应用程序，

该应用程序将是基于 Web 的（即 javascript）或可能是独立的。

很可能是前者。

首先想到的是 Arduino，但我想知道，因为我是 Arduino 编码的新手，是否还有其他 3rd 方应用程序可以使这成为可能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T13:44:46.010

是的你可以 ：）

1）首先，您需要 Arduino 来“监听”传感器。这可以通过 digitalRead 或analogRead 方法来实现，具体取决于您要使用的传感器类型。

2) 当您要检查的情况发生时，您需要向您的 Mac 发送一些内容。这涉及使用串行端口将某种消息从 Arduino 发送到您的 mac。

3）在你的mac上，你需要检查串口上的消息。我经常使用Processing来监听串口。你很幸运，你在 Mac 上，你有 AppleScript :) 这意味着 Processing 必须启动一个简单的 Applescript 来告诉你选择的应用程序打开

而已。有关更多详细信息，请查看谷歌以了解如何将消息从 arduino 发送到处理，以及如何通过处理触发 Applescript

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T14:00:17.167

这里的 arduino 站点提供了许多预构建的应用程序：

*   [http://arduino.cc/en/Tutorial/HomePage](http://arduino.cc/en/Tutorial/HomePage)

他们总是需要一些定制，但嘿，这只是一半的乐趣，对吧？这是一个似乎与您所描述的类似的示例。您只需要在计算机上编写一个应用程序来监听正确的串行输出。

*   [http://arduino.cc/en/Tutorial/DigitalReadSerial](http://arduino.cc/en/Tutorial/DigitalReadSerial)

或者

*   [http://arduino.cc/en/Tutorial/AnalogReadSerial](http://arduino.cc/en/Tutorial/AnalogReadSerial)

请记住，如果遇到问题，您可以随时在 SO 上提出更多问题。

# php - 安装 Django-python 后 Apache-PHP 无法正常工作

> ID：11468186
> 
> 赞同：1
> 
> 时间：2012-07-13T09:55:59.137
> 
> 标签：php, django, apache, ubuntu

我想安装`Django Framework`在我的 Ubuntu（12.04）笔记本电脑上，已经运行了一个`Apache-Php-MySQL`环境。

我遵循了本教程： http: [//www.lennu.net/2012/05/14/django-deployement-installation-to-ubuntu-12-dot-04-server/](http://www.lennu.net/2012/05/14/django-deployement-installation-to-ubuntu-12-dot-04-server/)

我在 mod_WSGI 安装处停下来检查我的旧 php 项目是否不会受到新 apache 配置的影响……嗯，它们是！当我尝试运行它们时，浏览器不显示站点，而是让我下载项目的文件（ex index.php）并且什么都不显示！

这里发生了什么？？

# java - netbeans 中相同 Swing 代码的异常行为

> ID：11468187
> 
> 赞同：0
> 
> 时间：2012-07-13T09:56:02.260
> 
> 标签：java, swing, netbeans

我有两个几乎相似的代码。

**代码一**

```
 JFrame pFrame=new NetBeansFrame();
   JPanel myPanel=new myPanel();
   pFrame.add(myPanel);
   Dimension windowDim=myPanel.getSize();

   pFrame.pack();
   pFrame.getContentPane().setSize(windowDim.width-100,windowDim.height-50);
   pFrame.setVisible(true); 
```

**代码二**

```
 JFrame pFrame=new JFrame();
   JPanel myPanel=new myPanel();
   pFrame.add(myPanel);
   Dimension windowDim=myPanel.getSize();

   pFrame.pack();
   pFrame.getContentPane().setSize(windowDim.width-100,windowDim.height-50);
   pFrame.setVisible(true); 
```

在代码 I 中，NetBeansFrame 是我使用 netbeans->Jframe 创建并命名为 NetBeansFrame 的框架。它不包含任何内容。我使用 codeI 将面板添加到其中。

**NetBeansFrame.java**

```
public class NetBeansFrame extends javax.swing.JFrame {

public NetBeansFrame() {
    initComponents();

}

/** This method is called from within the constructor to
 * initialize the form.
 * WARNING: Do NOT modify this code. The content of this method is
 * always regenerated by the Form Editor.
 */
@SuppressWarnings("unchecked")
// <editor-fold defaultstate="collapsed" desc="Generated Code">
private void initComponents() {

    setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

    javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
    getContentPane().setLayout(layout);
    layout.setHorizontalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGap(0, 407, Short.MAX_VALUE)
    );
    layout.setVerticalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGap(0, 429, Short.MAX_VALUE)
    );

    pack();
}// </editor-fold>

/**
 * @param args the command line arguments
 */
public static void main(String args[]) {
    /* Set the Nimbus look and feel */
    //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
    /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
     * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
     */
    try {
        for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
            if ("Nimbus".equals(info.getName())) {
                javax.swing.UIManager.setLookAndFeel(info.getClassName());
                break;
            }
        }
    } catch (ClassNotFoundException ex) {
        java.util.logging.Logger.getLogger(NetBeansFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (InstantiationException ex) {
        java.util.logging.Logger.getLogger(NetBeansFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (IllegalAccessException ex) {
        java.util.logging.Logger.getLogger(NetBeansFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (javax.swing.UnsupportedLookAndFeelException ex) {
        java.util.logging.Logger.getLogger(NetBeansFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    }
    //</editor-fold>

    /* Create and display the form */
    java.awt.EventQueue.invokeLater(new Runnable() {

        public void run() {
            new NetBeansFrame().setVisible(true);
        }
    });
}
// Variables declaration - do not modify
// End of variables declaration 
```

}

在代码 II 中，我从 JFrame 创建一个框架。从逻辑上讲，这两个代码是等效的。

*但是在执行代码 I 时，面板不会出现在 netbeansFrame 中，而代码 II 会出现面板。*

所以，我想知道几乎相同的代码出现这种异常行为的原因可能是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T10:12:51.860

1.  `Dimension windowDim=myPanel.getSize();`只返回`Dimension[0, 0]`，因为`Dimension`从

    *   已经可见的容器（在您的情况下为 components `JPanel`）

    *   打电话后`pack();`

2.  然后`pFrame.getContentPane().setSize(windowDim.width-100,windowDim.height-50);`返回`Dimension[-100, -50]`

3.  你可以

    *   如果`JPanel`为空则返回其`PreferredSize`

    *   如果`JPanel`不是空的，那么它的`JComponents`返回`PreferredSize`你可以尝试删除/禁用代码行`pFrame.getContentPane().setSize(windowDim.width-100,windowDim.height-50);`

# groovy - 使用 object."${property}" 访问属性

> ID：11468189
> 
> 赞同：1
> 
> 时间：2012-07-13T09:56:11.753
> 
> 标签：groovy

我正在做一些动态过滤，并且有这个：

```
class Filterable {
    def statusId
    def secondaryFilterable
}
...
def filter = new Filter(validIds: [1], fieldName: 'statusId')
...
class Filter {

    def validIds = [] as Set
    def fieldName
    private boolean containsFieldValue(input) {
        def fieldValue = input."${fieldName}"
        return fieldValue in validIds
    }
} 
```

这适用于一个属性。但是，现在我需要通过辅助过滤器进行过滤 - 比如

```
def filter = new Filter(validIds: [1], fieldName: 'secondaryFilterable.statusId') 
```

抛出一个`groovy.lang.MissingPropertyException`. 有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T10:16:50.110

带引号的属性假定点是属性名称的一部分。

一个简单的解决方案是：

```
...
def fieldValue = fieldName.split(/\./).inject(input){ parent, property -> parent?."$property" }
... 
```

这将使用点符号递归查找子属性的字段值。

我在 Groovy Web 控制台上[建立了一个工作示例。](http://groovyconsole.appspot.com/script/708001)

# c++ - 正则表达式与否（获取不满足正则表达式的所有文本）

> ID：11468192
> 
> 赞同：1
> 
> 时间：2012-07-13T09:56:18.700
> 
> 标签：c++, regex, qt

我想使用正则表达式在字符串（或 QString）中查找“（引号）之间的内容。

我的简单字符串：x="20.51167" 我想要 20.51167。

正则表达式可以吗？

一开始我有这样的字符串：

`<S id="1109" s5="1" nr="1183" n="Some text" test=" " x="20.53843" y="50.84443">`

使用正则表达式，例如：`(nr=\"[0-9]+\")` `(y=\"[0-9 .^\"]+\")"` `etc`我得到了像 x="20.51167" 这样的简单字符串。也许这是错误的方式，我可以一次获得报价之间的价值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T10:02:52.070

试试这个作品。**未经测试**

```
="([^"]+)" 
```

以上捕获了介于两者之间的任何内容`="` `"`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T10:15:42.407

对于您的特定示例，这将起作用：

```
#include <QRegExp>
#include <QString>
#include <iostream>
int main()
{
    //Here's your regexp.
    QRegExp re("\"[^\"^=]+\"");
    //Here's your sample string:
    QString test ="<S id=\"1109\" s5=\"1\" nr=\"1183\" n=\"Some text\" test=\" \" x=\"20.53843\" y=\"50.84443\">";
    int offset = 0;
    while( offset = re.indexIn( test, offset + 1 ) )
    {
        if(offset == -1)
            break;
        QString res = re.cap().replace("\"", "");
        bool ok;
        int iRes;
        float fRes;
        if( res.toInt( &ok ) && ok )
        {
            iRes = res.toInt();
            std::cout << "int: " << iRes << std::endl;
        }
        else if ( res.toFloat( &ok ) && ok )
        {
            fRes = res.toFloat();
            std::cout << "float: " << fRes << std::endl;
        }
        else
            std::cout << "string: " << res.toStdString() << std::endl;
    }
} 
```

输出将是；

```
int: 1109
int: 1
int: 1183
string: Some text
string:  
float: 20.5384
float: 50.8444 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T10:08:04.297

在这个表达式中： (nr=\"[0-9]+\") (y=\"[0-9 .^\"]+\")" 删除后面的最后一个引号）
对于您的正则表达式，请尝试：

x=^[0-9]+.[0-9]{5}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T10:03:59.693

如果你想在引号中找到任何东西，我猜正则表达式应该是：

```
"([^"]*)" 
```

（任何不是引号之间的引号）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-13T10:04:09.240

您只需将捕获组移动*到*引号内：

```
x=\"([0-9.]+)\" 
```

# xml - 我需要从 XML 文档中提取数据

> ID：11468194
> 
> 赞同：1
> 
> 时间：2012-07-13T09:56:24.207
> 
> 标签：xml, vb.net, xml-parsing

您好我无法从此 XML 文档中提取数据。

```
 <messages messageCount="6">
  <message messageID="9999" orderNumber="1234" model="TESTMODEL" val="490" status="8" timestamp="2012-07-12 13:12:50Z">
  <attributes>
  <attribute name="ATT1" value="1234" /> 
  <attribute name="ATT2" value="5678" /> 
  </attributes>
  </message>
  </messages> 
```

我需要递归循环每条消息并获取消息节点的值。然后，如果状态为某个值，我需要遍历属性并获取属性节点的值。我有点麻烦。到目前为止我有这个

```
 Dim strStream As New MemoryStream(System.Text.Encoding.UTF8.GetBytes(strMessage))

        Dim XmlDoc As XmlDocument = New XmlDocument

        XmlDoc.Load(strStream)

        Dim nlNodeList As XmlNodeList = XmlDoc.SelectNodes("//messages/message")
        Dim a As XmlAttribute

        For Each nNode As XmlNode In nlNodeList
            Dim strmessageID As String = String.Empty
            For Each a In nNode.Attributes
                If a.Name = "messageID" Then
                    strmessageID = a.Value
                End If
            Next
            For Each nChildNode As XmlNode In nNode.ChildNodes
                For Each b In nChildNode.ChildNodes
                    For Each a In b.Attributes
                        If a.Name = "ATT1" Then

                        End If
                    Next
                Next
            Next
        Next 
```

但我无法获取属性值。我敢肯定也必须有一种更清洁的方法。我以前使用数据集并且很好，直到我尝试获取属性值

```
 For Each dr As DataRow In dsmyDS.Tables("message").Rows
        Dim strMessageID As String = dr.Item("messageid").ToString
        Select Case CStr(dr.Item("model").ToString)
            Case "TESTMODEL"
                Select Case dr.Item("status").ToString
                    Case "8"
                        Dim strval As String = dr.Item("val").ToString
                        'Don't know how to get at the attributes node list once I'm here
                    Case Else

                End Select
            Case Else

        End Select
    Next 
```

如果有人能告诉我我做错了什么，那就太好了。哪个是最好的使用方法？XMLDocument 还是数据集？有没有比我冗长的方法更简单的方法？

任何帮助都会非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T10:15:37.320

您应该尝试`LINQ-XML`导入 System.Data.Xml。

```
 Dim doc As XDocument = XDocument.Load(file)
'Or
'Dim doc As XDocument = XDocument.Parse(strMessage)
 Dim Result = doc.Root.Descendants("message")
                      .Where(Function(p)
                                Return p.Attribute("status").Value = "8"
                             End Function)
 For Each ele In Result
     MsgBox(ele.Attribute("messageID").Value)
     MsgBox(ele.Element("attributes").Element("attribute").Attribute("name").Value)

     'List children of attributes tag
     For Each v In ele.Element("attributes").Elements()
          MsgBox(v.Attribute("name").Value & " " & v.Attribute("value").Value)
     Next
 Next 
```

# sql - 需要有关动态 SQL 表的基于 JPA 的事务的信息

> ID：11468197
> 
> 赞同：0
> 
> 时间：2012-07-13T09:56:27.077
> 
> 标签：hibernate, sql, jpa, sql, hibernate

首先，我想说明我们的环境细节。

我们正在尝试使用 EJB- [hibernate](/questions/tagged/hibernate "显示标记为“休眠”的问题")和[sql](/questions/tagged/sql "显示标记为“sql”的问题") Azure 来使用 Eclipse 在 Azure 云上创建应用程序。

我们需要动态地创建和处理数据库。我们能够动态地创建数据库。但是，在尝试对这些进行交易时，我们遇到了错误：

> “java.sql.SQLException：没有找到适合连接 url 的驱动程序”

当我们尝试使用[jpa](/questions/tagged/jpa "显示标记为“jpa”的问题")进行静态交易时，这不是问题。但是，不能进行动态事务。entitymanager 对象已创建但无法连接数据库。

有人可以帮助我们并解释我们如何使用 JPA 为动态创建的数据库处理事务。

谢谢，萨加塔

[编辑] 我们正在使用以下 persistence.xml：

> >org.hibernate.ejb.HibernatePersistence java:jboss/EDS</jta-data-source> --> net.oauth.database.Co net.oauth.database.Cr
> 
> value="org.hibernate.transaction.JTATransactionFactory" /> value="org.hibernate.transaction.JBossTransactionManagerLookup" />

我们连接数据库的代码如下： Map configOverrides = new HashMap(); configOverrides.put("hibernate.connection.password", ""); configOverrides.put("hibernate.connection.username", ""); configOverrides.put("hibernate.connection.driver_class","com.microsoft.sqlserver.jdbc.SQLServerDriver");
configOverrides.put("hibernate.connection.url", "jdbc:sqlsever://;" + "databaseName=;user=;password="); EntityManagerFactory 工厂 = Persistence.createEntityManagerFactory(ENTERPRISE_UNIT_NAME, configOverrides);

请注意，我们正在尝试动态创建和连接数据库，因此不要静态创建数据库。为此，我们收到错误：

> “java.sql.SQLException：没有找到适合连接 url 的驱动程序”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T10:05:06.583

创建一个带有持久性单元的 persistence.xml 并将所有静态的东西（例如数据库方言、日志记录参数等）放在那里

然后使用以下方法创建实体管理器：

```
javax.persistence.Persistence.createEntityManagerFactory(String persistenceUnitName, Map properties); 
```

在地图中提供可变参数，如下所示：

```
properties.put("hibernate.connection.url", "jdbc:postgresql://127.0.0.1/test");
properties.put("hibernate.connection.username", "joe");
properties.put("hibernate.connection.password", "pass"); 
```

# php - 去除 HTML 标记范围中的属性

> ID：11468198
> 
> 赞同：0
> 
> 时间：2012-07-13T09:56:38.893
> 
> 标签：php, parsing, attributes, strip-tags, dom

我正在通过 CURL 请求获取数据，并且在解析 HTML 时，我的一些具有属性的跨度没有被整齐地解析。

HTML 代码片段

```
<div class="ftlt" style="width:250px;">
    <div class="tdiv"><span class="prop_price_img"></span><span class="property_price">PROPERTY_PRICE</span></div>
    <p class="adPrice">AREA</p>
    <h4>
      <p style="float:left;width:251px;font-family:Arial, Helvetica, sans-serif;font-size:13px;padding:2px 10px 10px 0px;"><a href="some link" title="title">TITLE</a>,
                  <span style="color:#666;"> CITY_NAME.</span> 

                <a title="title, Sale" style="color:#3266CC;font-size:12px;text-decoration:underline;">View on map</a></p>
    </h4>
    <p style="font-weight:bold;color:#666;">
           Premium
          </p>
    <div class="clr"></div>
  </div> 
```

我必须巧妙地访问 CITY_NAME 元素。我已经能够通过 HTML DOM 获取该节点

```
$spans = $html->find(div.ftlt span);
$city_value=strip_tags($spans[2]); 
```

这`$city_value`正在变形。我试过 removeAttribute 方法。也许我做得不对。

如果可以应用正则表达式，我想知道如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T10:04:45.117

```
$spans = $html->find(div.ftlt span);
$city_value=$spans[2]->nodeValue; 
```

为什么不使用[nodeValue](http://www.php.net/manual/en/class.domnode.php#domnode.props.nodevalue)？

# git - Git 分支在本地 repo 上合并，但在 Github 上仍然可见

> ID：11468200
> 
> 赞同：1
> 
> 时间：2012-07-13T09:56:44.503
> 
> 标签：git, github, git-flow

我正在为我的项目使用[Git Flow](http://nvie.com/posts/a-successful-git-branching-model/)，并且已经完成了`git flow feature finish`将我的功能分支合并到我的`develop`分支中的步骤。

然后我执行`git push`到 GitHub，但在 GitHub 上我仍然看到功能分支以及`develop`.

当我在`git branch`本地运行时，我只看到`develop`and `master`，这是我所期望的。

如何从 GitHub 中删除分支？我可以应付这个，但如果每个功能都发生这种情况，我最终会得到大量旧分支。

提前谢谢了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T09:59:31.157

假设`origin`远程指的是您的 GitHub 存储库，您可以使用以下命令删除合并的分支：

```
git push origin :name-of-now-merged-branch 
```

为了进一步解释该语法，当您这样做时：

```
git push origin some-branch 
```

...`some-branch`参数实际上是一个“ [refspec](http://git-scm.com/docs/git-push#OPTIONS) ”，它定义了源名称和目标名称之间的映射，通常格式为`<source-name>:<destination-name>`. 如果`:`refspec 中没有，则假定您的意思是`some-branch:some-branch`. 说“我只想删除远程分支”的方式是`<source-name>`完全错过，只是最后`:`跟远程分支名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T10:00:08.340

检查哪些远程分支可用

```
git branch -r 
```

然后您可以使用以下命令删除远程分支：

```
git push origin :branchname 
```

删除本地分支

```
git branch -d branchname 
```

编辑：

[http://gitready.com/beginner/2009/02/02/push-and-delete-branches.html](http://gitready.com/beginner/2009/02/02/push-and-delete-branches.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-07T13:16:26.633

[根据此答案，](https://stackoverflow.com/questions/16406458/remove-merged-branches-from-github)如果您这样做`git push --all --prune`，它将自动删除所有这些合并的分支，而无需您手动进入并删除每个分支。

# silverlight - 当有 DataGridTemplateColumn 时，SILVERLIGHT 如何在列标题数据网格中显示图像

> ID：11468204
> 
> 赞同：0
> 
> 时间：2012-07-13T09:56:58.857
> 
> 标签：silverlight

我试图在 datagrid 的列中显示图像，但我不知道该怎么做。有人可以帮助我吗？

这是我的数据网格的 .xaml。

提前致谢。

```
 <sdk:DataGrid  IsReadOnly="True" Height="150" Grid.ColumnSpan="7" 
                           x:Name="dgElementosAfectados" 
                           ItemsSource="{Binding ElementosAfectados, Mode=TwoWay}" 
                           Grid.Row="0" AutoGenerateColumns="False" 
                           SelectionMode="Single" ColumnWidth="Auto" SelectionChanged="dgElementosAfectados_SelectionChanged">                            

                <sdk:DataGrid.Columns>

                    <sdk:DataGridTemplateColumn>

                        <sdk:DataGridTemplateColumn.Header>

                            <DataTemplate>                                
                                <Image Source="/MonitorizacionIncidencias;component/CustomResources/body_bg.png"  />
                            </DataTemplate>
                        </sdk:DataGridTemplateColumn.Header>

                            <!--<DataTemplate>
                                <Image Source="/MonitorizacionIncidencias;component/CustomResources/body_bg.png" Stretch="None" />
                            </DataTemplate>-->                                                                                                                    

                        <sdk:DataGridTemplateColumn.CellEditingTemplate >
                            <DataTemplate>
                                <Image Source="{Binding Estado.ID, Converter={StaticResource statusConv}}" Width="17" Height="17"></Image>
                            </DataTemplate>
                        </sdk:DataGridTemplateColumn.CellEditingTemplate>
                    </sdk:DataGridTemplateColumn> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T22:46:24.187

将图像添加到 Silverlight DataGrid 列标题的最简单方法可能是设置`ContentTemplate`使用标题样式：

```
<sdk:DataGridTemplateColumn.HeaderStyle>
    <Style TargetType="dataprimitives:DataGridColumnHeader">
        <Setter Property="ContentTemplate">
            <Setter.Value>
                <DataTemplate>
                    <Image Source="/MonitorizacionIncidencias;component/CustomResources/body_bg.png" Stretch="None" />
                </DataTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</sdk:DataGridTemplateColumn.HeaderStyle> 
```

您需要添加以下命名空间声明才能使上述内容生效：

```
xmlns:dataprimitives="clr-namespace:System.Windows.Controls.Primitives;assembly=System.Windows.Controls.Data" 
```

请参阅 Adam Kinney 和 Lars Holm Jensen[对此问题](https://stackoverflow.com/questions/151682/dynamically-setting-the-header-text-of-a-silverlight-datagrid-column/3627372#3627372)的回答。

# python-2.7 - 在使用 Oauth2 的 tweepy 中使用 api.update_status 方法时出错

> ID：11468205
> 
> 赞同：1
> 
> 时间：2012-07-13T09:57:02.953
> 
> 标签：python-2.7, tweepy

这是我的代码：- 我已经仔细检查了所有的身份验证参数。

```
import tweepy

CONSUMER_KEY ='#Omitted - you should not publish your actual key'
CONSUMER_SECRET ='#Omitted - you should not publish your actual secret'
ACCESS_KEY='#Omitted - you should not publish your access key'
ACCESS_SECRET = '#Omitted - you should not publish your access secret'

auth = tweepy.OAuthHandler(CONSUMER_KEY, CONSUMER_SECRET)
auth.set_access_token(ACCESS_KEY, ACCESS_SECRET)
api = tweepy.API(auth)

api.update_status('Tweeting from command line') 
```

运行 python status.py 后，将主文件夹中的文件另存为 status.py，出现以下错误：-

```
Traceback (most recent call last):
  File "status.py", line 14, in <module>
    api.update_status('Tweeting from command line')
  File "/usr/local/lib/python2.7/dist-packages/tweepy-1.10-py2.7.egg/tweepy/binder.py", line 185, in _call
    return method.execute()
  File "/usr/local/lib/python2.7/dist-packages/tweepy-1.10-py2.7.egg/tweepy/binder.py", line 168, in execute
    raise TweepError(error_msg, resp)
tweepy.error.TweepError: Could not authenticate with OAuth. 
```

请帮帮我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-27T22:29:46.663

我在相同条件下收到此错误 - 使用 tweepy，我的所有密钥/秘密都被正确复制和粘贴。问题是我服务器上的时间。运行后，`ntpdate -b pool.ntp.org`我使用 tweepy 就好了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T14:30:54.093

我可以使用 tweepy 进行身份验证，但我的代码中有一行额外的代码，它可能有助于您将代码更改为：

```
import tweepy
from tweepy import OAuthHandler 
```

然后继续你的其余代码。还要在代码中添加一行以打印到 shell 以显示您的连接，如下所示：

`print api.me().name`

确保你在上面看到的那行就在后面`api = tweepy.API(auth)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-02T21:31:30.423

试试`api.update_status(status='Tweeting from command line')`。它帮助了我。

# eclipse - 在没有 Eclipse 的情况下运行 JET 模板

> ID：11468208
> 
> 赞同：3
> 
> 时间：2012-07-13T09:57:15.063
> 
> 标签：eclipse, maven, eclipse-m2t-jet

我需要使用 maven 项目从 jet 模板生成 java 代码，它应该在 eclipse 环境之外完成，但到目前为止我还没有弄清楚如何做到这一点。

我正在使用 maven 3x 和 jet 1.1.x。

我尝试了几种方法，但似乎都没有奏效：

*   调用库 org.eclipse.emf.codegen.jet.JETCompiler。这个库似乎与 eclipse 的环境有很强的依赖关系，因此它失败了。
*   maven 的 jet 插件之一也不起作用，我使用的是官方网站 ([tikal-maven-jet-plugin][1]) 中提供的相同示例，如下所示：

    [http://network.tikalk.com/release/tikal-maven-jet-plugin/usage.html](http://network.tikalk.com/release/tikal-maven-jet-plugin/usage.html)

有谁知道如何做到这一点？

非常感谢，卡洛斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T13:47:46.787

由于 JET 的工作方式，它实际上只能在 eclipse 环境中运行。但是，实际上可以无头启动 eclipse 以运行 ant 构建脚本，因此您可以在没有 UI 的情况下运行所需的 eclipse 部分。为此，您需要启动 org.eclipse.ant.core.antRunner 应用程序。这里有一些关于如何做到这一点的文档：http: //help.eclipse.org/juno/index.jsp?topic= [%2Forg.eclipse.platform.doc.user%2Ftasks%2FantRunner.htm](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.platform.doc.user%2Ftasks%2FantRunner.htm)

启动 antRunner 应用程序后，您可以使用 JET ant 任务编译模板并运行转换：[http://help.eclipse.org/helios/index.jsp?topic=%2Forg.eclipse.jet。 doc%2Freferences%2Fant%2FantTasks.xhtml](http://help.eclipse.org/helios/index.jsp?topic=%2Forg.eclipse.jet.doc%2Freferences%2Fant%2FantTasks.xhtml)

如果您正在无头编译 Eclipse 插件，则有一些关于无头模板编译的重要警告，记录在这里：[http ://wiki.eclipse.org/JET_FAQ_How_to_I_compile_JET_templates_in_a_headless_build](http://wiki.eclipse.org/JET_FAQ_How_to_I_compile_JET_templates_in_a_headless_build)

我不确定这与 Maven 的集成程度如何，但这似乎是 ant 的最佳方法。如果您想从 Java 运行转换，这里有一些信息：http: [//wiki.eclipse.org/JET_FAQ_How_do_I_run_a_JET_transformation_from_Java%3F](http://wiki.eclipse.org/JET_FAQ_How_do_I_run_a_JET_transformation_from_Java%3F)。不过，您仍然需要在 Eclipse 环境中才能正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-21T10:49:47.000

tikal-maven-jet-plugin 为我工作。

这是我在 中使用的 JET 文件示例`src/main/templates/generator.jet`，我不使用 EMF 类，只使用标准 Map。

```
<%@ jet class="TableModelGenerator" package="net.trajano.framework.tool" %>
<% java.util.Map meta = (java.util.Map)argument; %> 
package <%=meta.get("PackageName")%>;
public class <%=meta.get("ClassName")%> {
} 
```

我使用的插件配置是

```
<plugin>
    <groupId>com.tikal</groupId>
    <artifactId>tikal-maven-jet-plugin</artifactId>
    <version>0.4.0</version>
    <executions>
        <execution>
            <phase>generate-sources</phase>
            <goals>
                <goal>generate</goal>
            </goals>
        </execution>
    </executions>
    <configuration>
        <includeTemplates>
            <include>**/*.jet</include>
        </includeTemplates>
    </configuration>
</plugin> 
```

# ffmpeg - 用 libmp3lame 重新编译 ffmpeg

> ID：11468210
> 
> 赞同：2
> 
> 时间：2012-07-13T09:57:28.980
> 
> 标签：ffmpeg

我已经在我的centos 中使用yum install 安装了ffmpeg。现在我想用'libmp3lame'重新编译它。是否可以重新编译已安装的ffmpeg，或者我想删除ffmpeg 并重新安装。

建议是非常可观的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T18:17:03.767

与 AAC 和其他一些音频格式不同，FFmpeg 没有原生 MP3 编码器，因此您必须使用受支持的外部编码库，例如 libmp3lame。如果您`ffmpeg`未配置以下选项，您有多种选择`--enable-libmp3lame`：

## 下载已编译的二进制文件

[`ffmpeg`为 Linux下载](http://johnvansickle.com/ffmpeg/)。这是一个已经编译好的二进制文件。这是最简单的解决方案。

有关 Windows 和 OS X 构建的链接，请参阅[FFmpeg 下载](https://ffmpeg.org/download.html)页面。

## 编译`ffmpeg`

按照非侵入式分步指南[在 CentOS 上编译 FFmpeg](https://trac.ffmpeg.org/wiki/CompilationGuide/Centos)。如果您可以复制和粘贴，则可以编译。

## 管道到`lame`

```
ffmpeg -i input -f wav - | lame - output.mp3 
```

我不认为这是一个实用的解决方案，但它可能对某些人有用。

## 使用不同的格式

如果您不需要 MP3，您可以使用 AAC 或其他支持本机编码的音频格式。

# ajax - ajax 和 json 的黄瓜测试问题，即使使用 ajax-wait-workaround

> ID：11468220
> 
> 赞同：1
> 
> 时间：2012-07-13T09:57:57.947
> 
> 标签：ajax, json, cucumber

在 Rails 咖啡脚本中，我有这个点击处理程序：

```
addProductToCartHandler = ()->
    $('#add_to_cart').click((event)->

        $.ajax({
            type: 'POST',
            url: '/line_items.json'
            data: {product_id:product_id}

            success: (data)->
                $('.carts_number_of_items').html(data.number_of_items)
                $('#carts_explanation').effect("pulsate",{times:2}, 200)

            error: ()->
        });

     event.preventDefault()
     return false
   ) 
```

此脚本通过 $.ajax 调用以下操作：

```
def create
    [...]

    format.json{

         @cart.save ? 
               ( render json: {number_of_items:@cart.line_items.sum('quantity') } ) :
               ( render json: { error: t("line_items.error") } )

       } 
```

这会计算购物车中的商品数量，并返回 json-result。**这在浏览器中运行良好，但不适用于黄瓜测试：**

```
@javascript
Scenario: Add a product to a cart via ajax control
  And I follow "Cucumbers"
  When I follow "Add To Cart"
  And I wait for the ajax request to finish
  Then I should see "1 item in your cart" 
```

此报告失败：

然后我应该看到“您的购物车中有 1 件商品”#features/step_definitions/web_steps.rb:24 预计会有内容“您的购物车中有 1 件商品”在 [...] 您的购物车中有**0 件商品\n 查看您的购物车 [ ...]**
(RSpec::Expectations::ExpectationNotMetError)

步骤“我等待 ajax 请求完成”是：

```
When(/^I wait for the ajax request to finish$/) do
    start_time = Time.now
    page.evaluate_script( 'jQuery.isReady&&jQuery.active==0' ).
      class.should_not eql(String) 

    until page.evaluate_script('jQuery.isReady&&jQuery.active==0') or 
          (start_time + 5.seconds) < Time.now do
            sleep 1
    end
end 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-03T21:01:43.230

I'm sure you already figured this out since it was 18 months ago, thoughts for peeps having a similar problem::

*   Errored out for some reason (in which case you could use 'save_and_open_page' to check the content or look at page.driver.console_messages to see if there was a JS error)
*   Took more than 5 seconds (in which case you could change your 5.seconds to something much larger to see if it works)
*   jQuery alias not working? (I see you're using $ - does jQuery.isReady&&jQuery.active==0 return in your console?)

Do you remember what it was?

# java - 在Java中获取随机布尔值

> ID：11468221
> 
> 赞同：80
> 
> 时间：2012-07-13T09:57:58.507
> 
> 标签：java, random, boolean

好的，我在我的代码中实现了这个 SO 问题：[Return True or False Randomly](https://stackoverflow.com/questions/8878015/return-true-or-false-randomly)

但是，我有奇怪的行为：我需要同时运行十个实例，每个实例每次运行只返回一次 true 或 false。令人惊讶的是，无论我做什么，每次我得到的只是`false`

有什么可以改进的方法，所以我至少有大约 50% 的机会得到`true`吗？

* * *

为了使它更容易理解：我将我的应用程序构建为 JAR 文件，然后通过批处理命令运行

```
 java -jar my-program.jar
 pause 
```

程序的内容 - 使其尽可能简单：

```
public class myProgram{

    public static boolean getRandomBoolean() {
        return Math.random() < 0.5;
        // I tried another approaches here, still the same result
    }

    public static void main(String[] args) {
        System.out.println(getRandomBoolean());  
    }
} 
```

如果我打开 10 个命令行并运行它，我`false`每次都会得到结果......

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2012-07-13T10:04:51.237

我建议使用[`Random.nextBoolean()`](https://docs.oracle.com/javase/7/docs/api/java/util/Random.html#nextBoolean%28%29)

话虽如此，`Math.random() < 0.5`因为您也使用过作品。这是我机器上的行为：

```
$ cat myProgram.java 
public class myProgram{

   public static boolean getRandomBoolean() {
       return Math.random() < 0.5;
       //I tried another approaches here, still the same result
   }

   public static void main(String[] args) {
       System.out.println(getRandomBoolean());  
   }
}

$ javac myProgram.java
$ java myProgram ; java myProgram; java myProgram; java myProgram
true
false
false
true 
```

不用说，**不能保证**每次都能得到不同的值。但是，在您的情况下，我怀疑

A）您没有使用您认为的代码，（例如编辑错误的文件）

B）您在测试时没有编译您的不同尝试，或者

C）您正在使用一些非标准的损坏实现。

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2012-07-13T10:04:14.460

您是否尝试过查看[Java 文档](https://docs.oracle.com/javase/8/docs/api/java/util/Random.html#nextBoolean--)？

> 从这个随机数生成器的序列中返回下一个伪随机、均匀分布的布尔值……这些值`true`和`false`以（大约）相等的概率产生。

例如：

```
import java.util.Random;

Random random = new Random();
random.nextBoolean(); 
```

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2012-07-13T10:02:51.697

您也可以尝试`nextBoolean()`-Method

这是一个示例：[http ://www.tutorialspoint.com/java/util/random_nextboolean.htm](http://www.tutorialspoint.com/java/util/random_nextboolean.htm)

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2017-12-19T00:47:57.117

**Java 8**：使用与当前线程隔离的随机生成器：[ThreadLocalRandom nextBoolean()](https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ThreadLocalRandom.html#nextBoolean--)

> 与 Math 类使用的全局随机生成器一样，ThreadLocalRandom 使用内部生成的种子进行初始化，否则该种子可能不会被修改。如果适用，在并发程序中使用 ThreadLocalRandom 而不是共享的 Random 对象通常会遇到更少的开销和争用。

```
java.util.concurrent.ThreadLocalRandom.current().nextBoolean(); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-13T10:09:08.983

为什么不使用[`Random`](http://docs.oracle.com/javase/6/docs/api/java/util/Random.html)具有方法的类`nextBoolean`：

```
import java.util.Random;

/** Generate 10 random booleans. */
public final class MyProgram {

  public static final void main(String... args){

    Random randomGenerator = new Random();
    for (int idx = 1; idx <= 10; ++idx){
      boolean randomBool = randomGenerator.nextBoolean();
      System.out.println("Generated : " + randomBool);
    }
  }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-04-07T16:37:47.780

您可以使用以下内容来获得公正的结果：

```
Random random = new Random();
//For 50% chance of true
boolean chance50oftrue = (random.nextInt(2) == 0) ? true : false; 
```

**注意：** random.nextInt(2) 表示数字 2 是界限。计数从 0 开始。所以我们有 2 个可能的数字（0 和 1），因此概率是 50%！

如果你想让你的结果更有可能是真（或假），你可以调整上面的如下！

```
Random random = new Random();

//For 50% chance of true
boolean chance50oftrue = (random.nextInt(2) == 0) ? true : false;

//For 25% chance of true
boolean chance25oftrue = (random.nextInt(4) == 0) ? true : false;

//For 40% chance of true
boolean chance40oftrue = (random.nextInt(5) < 2) ? true : false; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-13T10:05:21.097

初始化随机数生成器的最简单方法是使用无参数构造函数，例如

```
Random generator = new Random(); 
```

但是，在使用此构造函数时，您应该认识到算法随机数生成器并不是真正随机的，它们实际上是生成固定但看起来随机的数字序列的算法。

您可以通过为 Random 构造函数提供 'seed' 参数来使其看起来更“随机”，您可以通过例如使用系统时间（以毫秒为单位）动态构建该参数（始终不同）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-13T10:14:27.680

你可以得到你的clock（）值并检查它是奇数还是偶数。不知道是不是真的%50

您可以自定义创建随机函数：

```
static double  s=System.nanoTime();//in the instantiating of main applet
public static double randoom()
{

s=(double)(((555555555* s+ 444444)%100000)/(double)100000);

    return s;
} 
```

数字 55555.. 和 444.. 是获得广泛功能的大数字，请忽略该 Skype 图标：D

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-10-13T00:21:26.310

# 对于灵活的布尔随机化器：

```
public static rbin(bias){
    bias = bias || 50;
    return(Math.random() * 100 <= bias);
    /*The bias argument is optional but will allow you to put some weight
      on the TRUE side. The higher the bias number, the more likely it is
      true.*/
} 
```

确保使用数字`0`-`100`否则您可能会降低偏差并获得更常见的`false`值。

###### PS：我对Java一无所知，除了它与JavaScript有一些共同的特性。我使用我的 JavaScript 知识和我的推理能力来构建这段代码。期望我的回答不起作用。你们都可以编辑这个答案来解决我不知道的任何问题。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-05-02T12:49:59.350

文本中的单词总是随机性的来源。给定一个单词，无法推断出下一个单词。对于每个单词，我们可以取其字母的 ASCII 码，将这些码相加形成一个数字。这个数字的奇偶性是随机布尔值的一个很好的候选者。

可能的缺点：

1.  该策略基于使用文本文件作为词源。在某些时候，将到达文件的末尾。但是，您可以估计从您的应用程序调用 randomBoolean() 函数的次数。如果你需要调用它大约 100 万次，那么一个包含 100 万字的文本文件就足够了。作为更正，您可以使用来自在线报纸等实时来源的数据流。

2.  通过对一种语言中的常用短语和习语进行一些统计分析，可以在给定短语的第一个单词的情况下以一定程度的准确度估计短语中的下一个单词。但从统计上看，这些情况很少见，因为我们可以准确地预测下一个单词。因此，在大多数情况下，下一个单词独立于前面的单词。

    包 p01;

    导入java.io.File；导入 java.nio.file.Files；导入 java.nio.file.Paths；

    公共类主要{

    ```
    String words[];
    int currentIndex=0;

    public static String readFileAsString()throws Exception 
      { 
        String data = ""; 
        File file = new File("the_comedy_of_errors");
        //System.out.println(file.exists());
        data = new String(Files.readAllBytes(Paths.get(file.getName()))); 
        return data; 
      } 

    public void init() throws Exception
    {
        String data = readFileAsString(); 
        words = data.split("\\t| |,|\\.|'|\\r|\\n|:");
    }

    public String getNextWord() throws Exception
    {
        if(currentIndex>words.length-1)
            throw new Exception("out of words; reached end of file");

        String currentWord = words[currentIndex];
        currentIndex++;

        while(currentWord.isEmpty())
        {
            currentWord = words[currentIndex];
            currentIndex++;
        }

        return currentWord;
    }

    public boolean getNextRandom() throws Exception
    {
        String nextWord = getNextWord();
        int asciiSum = 0;

        for (int i = 0; i < nextWord.length(); i++){
            char c = nextWord.charAt(i);        
            asciiSum = asciiSum + (int) c;
        }

        System.out.println(nextWord+"-"+asciiSum);

        return (asciiSum%2==1) ;
    }

    public static void main(String args[]) throws Exception
    {
        Main m = new Main();
        m.init();
        while(true)
        {
            System.out.println(m.getNextRandom());
            Thread.sleep(100);
        }
    } 
    ```

    }

在 Eclipse 中，在我的项目的根目录中，有一个名为“the_comedy_of_errors”（无扩展名）的文件 - 使用 File> New > File 创建，我从这里粘贴了一些内容：http: [//shakespeare.mit.edu/comedy_errors /comedy_errors.1.1.html](http://shakespeare.mit.edu/comedy_errors/comedy_errors.1.1.html)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-07-20T19:19:15.837

您还可以制作两个随机整数并验证它们是否相同，这使您可以更好地控制概率。

```
Random rand = new Random(); 
```

声明一个范围来管理随机概率。在这个例子中，有 50% 的机会是真实的。

```
int range = 2; 
```

生成 2 个随机整数。

```
int a = rand.nextInt(range);
int b = rand.nextInt(range); 
```

然后简单地比较返回值。

```
return a == b; 
```

我也有你可以使用的类。 [随机范围.java](https://github.com/Fethore/Sample-Code/blob/master/RandomRange.java)

# wpf - MEF：如何将消息从模块发送到主机应用程序

> ID：11468231
> 
> 赞同：1
> 
> 时间：2012-07-13T09:58:31.353
> 
> 标签：wpf, events, mef, desktop-application

我有下一个问题。我有 3 个模块和一个主机应用程序。如何从模块发送带有参数的事件（或带有参数的命令）并在主机应用程序或另一个模块中处理它？

# mysql - 过滤掉其他表中引用的行的有效方法

> ID：11468234
> 
> 赞同：0
> 
> 时间：2012-07-13T09:58:39.000
> 
> 标签：mysql, join

我想知道是否有一种方法可以使用 JOIN 操作过滤在不同表中具有相应行的行，或者使用任何其他不涉及子查询的方法。

这是我唯一能想到的，但是它使用子查询，我担心在处理非常大的表时它会变得很慢。

```
SELECT * FROM `reports` as R WHERE (
    SELECT COUNT(*) 
    FROM `report_deletes` as RD 
    WHERE 
        RD.report_id = R.id AND
        RD.user_id = 1
) = 0; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T10:03:33.263

使用左连接并检查 NULL：

```
SELECT r.* 
FROM reports r 
LEFT JOIN report_deletes rd on r.id = rd.report_id and rd.user_id = 1 
WHERE rd.report_id IS NULL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T10:02:19.733

您可以尝试使用“LEFT JOIN”，如下所示：

```
SELECT *, COUNT(RD.*) as 'count' FROM `reports` as R 
LEFT JOIN `report_deletes` as RD ON (
RD.report_id = R.id )
WHERE 
RD.user_id = 1
AND count = 0
GROUP BY R.id 
```

# linux - systemtap 脚本的问题

> ID：11468236
> 
> 赞同：1
> 
> 时间：2012-07-13T09:58:52.080
> 
> 标签：linux, systemtap

我想编写一个小脚本来识别哪个函数正在使用 mmap 系统调用：

```
#! /usr/bin/env stap
probe syscall.mmap.return {
        if ( execname()=="java")
                printf ("%s mmap caller\n", caller())
} 
```

但它返回：

```
[root@gclimo01 stap]# stap  -v mmap_caller.stp 
Pass 1: parsed user script and 85 library script(s) using 198360virt/26732res/2944shr kb, in 210usr/50sys/264real ms.
Pass 2: analyzed script: 1 probe(s), 4 function(s), 4 embed(s), 0 global(s) using 355384virt/51680res/4048shr kb, in 650usr/350sys/1000real ms.
Pass 3: translated to C into "/tmp/stapwIxSzq/stap_a1823a5a24071fdf3118f618597b4ab6_7801_src.c" using 352824virt/54320res/6828shr kb, in 190usr/80sys/283real ms.
/tmp/stapwIxSzq/stap_a1823a5a24071fdf3118f618597b4ab6_7801_src.c: In function 'function_caller_addr':
/tmp/stapwIxSzq/stap_a1823a5a24071fdf3118f618597b4ab6_7801_src.c:646: error: dereferencing pointer to incomplete type
make[1]: *** [/tmp/stapwIxSzq/stap_a1823a5a24071fdf3118f618597b4ab6_7801_src.o] Error 1
make: *** [_module_/tmp/stapwIxSzq] Error 2
WARNING: make exited with status: 2
Pass 4: compiled C into "stap_a1823a5a24071fdf3118f618597b4ab6_7801.ko" in 1170usr/1120sys/2207real ms.
Pass 4: compilation failed.  Try again with another '--vp 0001' option. 
```

我的系统是 RHEL 6.3，Linux xxxxxxxxx 2.6.32-279.1.1.el6.x86_64 #1 SMP Wed Jun 20 11:41:22 EDT 2012 x86_64 x86_64 x86_64 GNU/Linux

任何提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T16:16:56.070

这是[http://sourceware.org/bugzilla/show_bug.cgi?id=14079](http://sourceware.org/bugzilla/show_bug.cgi?id=14079)，在 systemtap 1.8 中修复

```
commit 4107dbc2c88536c3374a68948c7344af8c8e75aa
Author: Mark Wielaard <mjw@redhat.com>
Date:   Tue May 8 19:59:07 2012 +0200

PR14079 - caller() pass-4 error if no uretprobes in script

caller() is odd in that it tries to do both kernel and user caller.
There is no ucaller(). Move it into its own tapset and include the
right uprobes related structures.

* runtime/uprobes-inc.h: New include file to be included in ...
* runtime/stack.c: here and ...
* tapset/context-caller.stp: here. New tapset, with just the caller context
  function, removed from ...
* tapset/context-unwind.stp: here.
* doc/SystemTap_Tapset_Reference/tapsets.tmpl: Also include context-caller.stp. 
```

# php - 在 WAMP 服务器上运行连续的 PHP（脚本）后台进程

> ID：11468239
> 
> 赞同：0
> 
> 时间：2012-07-13T09:59:16.143
> 
> 标签：php, twitter, process, background, wamp

我手动运行了 140dev Twitter 框架（它使用 Twitter phirehose）（通过本地 wamp 服务器上的网络浏览器），但我不知道如何将 get_tweets.php 和 parse_tweets.php 作为后台进程运行，例如SSH 命令：

```
nohup php script.php > /dev/null & 
```

你们中的一些人开始使用（相当于 Windows 的）cronjobs，但这不是正确的方法。我认为这是因为不允许创建到 Twitter 流媒体 phirehose 的多个连接（或重新连接）？如何在我的本地 WAMP 服务器（以及稍后在 VPS）上运行两个 PHP 脚本（get_tweets.php 和 parse_tweets.php）作为后台进程？

只是为了澄清：

*   我正在使用 WAMP 服务器（首先进行一点测试，然后在 VPS 上运行它）
*   **不能使用 LAMP 或任何 *nix 服务器/系统**（由于时间、经验和缺乏技能）
*   我已经搜索了解决方案（在 google 和 stackoverflow 上），但它们要么不起作用，要么对我来说不够清楚（我是新手）

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T13:01:38.630

找到它所在的`php/bin`文件夹`php.exe`。复制文件夹路径并将其添加到您的 PATH 环境变量中（例如，按照[此操作来编辑您的 PATH 变量。](https://stackoverflow.com/questions/6318156/adding-python-path-on-windows-7)

完成此操作后，您将能够从任何地方在命令行中执行 php。只需从`php script.php`正确文件夹中的命令行开始，它应该可以工作。可能需要进行一些配置，以便命令行中的 php 使用 WAMP 的 php.ini。

# php - 未选中复选框时的Jquery目标父节点

> ID：11468240
> 
> 赞同：0
> 
> 时间：2012-07-13T09:59:18.280
> 
> 标签：php, jquery, html, css

我有这个 Jquery 代码，如果未选中复选框，它将从文本中删除颜色。但是，有多个 div 带有同一个模型的复选框，当我取消选中一个复选框时，模型类的所有 div 都未选中/颜色被删除。我怎样才能改变它以仅针对复选框的父节点：

```
$(document).ready(function() {
  $('input[type="checkbox"]').click(function() {
      var togClass=$(this).attr('class');
      if($(this).attr('checked')){
     this.parentNode$('div.' + togClass ).css("display", "inline-block");
      }
      else {
         $('div.' + togClass ).css("display", "none");
      }
   });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T10:09:40.107

您应该使用一个类来为 div 的文本着色，因此您可以通过添加和删除给定的类来轻松更改它：

```
$("input[type='checkbox']").click(function() {
        if($(this).attr('checked'))
           $(this).parent('div').addClass('colorclass');
        else
            $(this).parent('div').removeClass('colorclass');
    }); 
```

# sencha-touch - 如何使用 sencha 中的视口从一个视图移动到另一个视图？

> ID：11468254
> 
> 赞同：2
> 
> 时间：2012-07-13T10:00:12.927
> 
> 标签：sencha-touch, sencha-touch-2, viewport

在我的应用程序中，我有一个带有顶栏和一些字段的视图。在此按钮中，当我单击登录按钮时，我想移动到另一个视图（仪表板），它是一个选项卡视图。所以为此我使用视口。但我无法从一种观点转移到另一种观点。这是我的代码：

**应用程序.js**

```
Ext.Loader.setConfig({
    enabled : true
});

Ext.application({
    views : ['TitlePanel', 'dashboardpanel'],
    models : [ 'MyModel', 'wishlistmodel' ],
    stores : [ 'name', 'wishlistsummarystore' ],
    name : 'MyApp',
    controllers : [ 'MyController' ],

    launch : function() {

        var Login = {
                xtype: 'login'
        }
        var Dashboard = {
                xtype: 'dashboard'
        }
        Ext.Viewport.add([Login, Dashboard]);
    }

}); 
```

**标题面板.js**

```
 Ext.define('MyApp.view.TitlePanel', {
extend: 'Ext.Panel',
alias: 'widget.login',
    config: {
        ui: 'light',
        items: [
            {
                xtype: 'panel',
                id: 'LoginScreen',
                items: [
                    {
                        xtype: 'image',
                        docked: 'left',
                        height: 130,
                        id: 'Logoimage',
                        ui: '',
                        width: 170,
                        src: 'app/images/logo.png'
                    },
                    {
                        xtype: 'titlebar',
                        cls: 'mytitlebar',
                        docked: 'top',
                        height: 100,
                        ui: 'blue',
                        items: [
                            {
                                xtype: 'label',
                                height: 36,
                                html: 'Teritree Business Portal',
                                id: 'title',
                                margin: 20,
                                style: 'font: normal Bold 20px droid sans; color:#AB3951',
                                width: 396
                            }
                        ]
                    },
                    {
                        xtype: 'panel',
                        id: 'LoginPanel',
                        layout: {
                            align: 'center',
                            type: 'vbox'
                        },
                        items: [
                            {
                                xtype: 'label',
                                html: 'Login with Teritree Business Credentials',
                                id: 'Loginlabel',
                                margin: 20,
                                style: 'font: normal Bold 30px droid sans',
                                ui: 'dark'
                            },
                            {
                                xtype: 'fieldset',
                                height: 84,
                                itemId: 'LoginField',
                                margin: '40 0 0 0',
                                width: 500,
                                items: [
                                    {
                                        xtype: 'textfield',
                                        id: 'user',
                                        style: 'font: Droid Sans',
                                        label: 'Login User id',
                                        labelWidth: '40%'
                                    },
                                    {
                                        xtype: 'textfield',
                                        height: 35,
                                        id: 'password',
                                        label: 'Password',
                                        labelWidth: '40%'
                                    }
                                ]
                            },
                            {
                                xtype: 'button',
                                height: 40,
                                id: 'LoginBtn',
                                margin: 20,
                                ui: 'orange',
                                width: 180,
                                text: 'Login'
                            },
                            {
                                xtype: 'label',
                                html: 'If you don\'t have an account yet: Signup at <a href="url">business.teritree.com</a> ',
                                id: 'signup',
                                margin: 20,
                                style: 'font: normal 24px droid sans'
                            }
                        ]
                    }
                ]
            }
          ]
        }
    }); 
```

**仪表板面板.js**

```
 Ext.define('MyApp.view.dashboardpanel', {
extend: 'Ext.Panel',
alias: 'widget.dashboard',
    id:'dashboardpanel',
    fullscreen: true,
    tabBarDock: 'bottom',
    items: [
            mainWindow   
           ]
});
    var mainWindow = new Ext.Panel({
    title:'main',
    iconCls:'home',
    layout:'fit',
    scroll: 'vertical',
    dockedItems: [toolbar,bigButton]
});

var bigButton = new Ext.Button({
    dock: 'bottom',
    text: 'I should be at the bottom'
});

var toolbar = new Ext.Toolbar({
    dock: 'top',
    title: 'Main',
    items: [
        {
            text: 'Reload',
        }
    ]
}); 
```

**我的控制器.js**

```
 Ext.define('MyApp.controller.MyController', {
    extend : 'Ext.app.Controller',
    config : {
        refs : {
            LoginScreen : '#Login',
            dashboardscreen : '#dashboardpanel'
        },

        control : {
            "#LoginBtn" : {
                tap : 'onLoginButtonTap'
            }
        }
    },

    slideLeftTransition: { type: 'slide', direction: 'left' },

    onLoginButtonTap : function(button, e, options) {
           Ext.Viewport.animateActiveItem(Dashboard, this.slideLeftTransition);
    }

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T11:37:34.853

Hey i am able to solve this problem finally. Because iwas giving wrong references in controller..here is the controller code:

```
Ext.define('MyApp.controller.MyController', {
extend : 'Ext.app.Controller',
config : {
    refs : {
        TitlePanel : 'login',
        dashboardpanel : 'dashboard'
    },

    views : [
             'TitlePanel',
             'dashboardpanel'
         ],

    control : {
        "#LoginBtn" : {
            tap : 'onLoginButtonTap'
        }
    }
},

slideLeftTransition: { type: 'slide', direction: 'left' },

onLoginButtonTap : function(button, e, options) {

    Ext.Viewport.setActiveItem(this.getDashboardpanel(), this.slideLeftTransition);
} 
```

});

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T14:13:49.357

```
Ext.Viewport.setActiveItem(1); 
```

PS：请注意视口大小写。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T06:44:33.047

嘿@Arindam 就像这样放入您的 MyController 文件中，

```
Ext.define('myapp.controller.MyController', {
    extend : 'Ext.app.Controller',

    config : {
       refs : {
           LoginScreen: '#Login',
           dashboardscreen : '#Dashboard'
       },

       control : {
            "#LoginBtn": {
                tap : 'onLoginButtonTap'
            }
       }
    },

    onLoginButtonTap: function(button, e, options) {
         Ext.getCmp('dashboardpanel').show('slide', true)
         Ext.getCmp('loginpanel').hide()
    }
}); 
```

而且你在dashboardpanel.js 文件中有一些错误。

**I hope this helps :)**

![enter image description here](../Images/80ab5d6461ec505fec0ebb4ebb0b1e4c.png)

![enter image description here](../Images/ec05f67a05170413277e3b49daef57e9.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T10:25:51.843

我建议你使用`Ext.navigation.View`这个。您可以在 app.js 中添加视口，然后在视口中添加导航视图，在该导航视图上您可以推送 TitlePanel，然后在 TitlePanel 中单击表单按钮，只需推送您的仪表板面板。

# php - 功能超时

> ID：11468255
> 
> 赞同：0
> 
> 时间：2012-07-13T10:00:15.267
> 
> 标签：php

错误输出：致命错误：超过 30 秒的最大执行时间

我认为那里没有任何错误。怎么了？

```
 function advancedSearchAgeOption($selectName, $selectID, $firstValue, $lastValue) {
    $selectBox.='<select name="'.$selectName.'" id="'.$selectID.'">';
    for ($i=$firstValue; $i=$lastValue; $i++) {
        $selectBox.='<option value="'.$i.'">'.$i.'</option>';
    }
    $selectBox.='</select>';
    return $selectBox;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T10:01:06.377

替换这一行：

```
for ($i=$firstValue; $i=$lastValue; $i++) { 
```

有了这个：

```
for ($i=$firstValue; $i<=$lastValue; $i++) { 
```

第二个表达式应该计算`true`为每个`$i`直到结束。

# django - 请求后在列表中添加 Manytomany 项

> ID：11468259
> 
> 赞同：0
> 
> 时间：2012-07-13T10:00:31.997
> 
> 标签：django, many-to-many

我需要在 ManyToMany 字段中进行自动添加。我的课 ：

```
class UserProfile(models.Model):
user = models.OneToOneField(User, unique=True)
status = models.CharField(max_length=10, choices=STATUS_CHOICES, default='student')
courses_list = models.ManyToManyField(Course, blank=True) 
```

保存新课程后，我想将其添加到用户的 course_list 中：

```
def newcourse(request):
if not request.user.is_authenticated():
    return render_to_response('login.html')
form = CourseForm()
if request.method == 'POST':
    form = CourseForm(request.POST)
    if form.is_valid():
        obj = form.save(commit=False)
        obj.owner = request.user
        obj = form.save()
        course_list = request.user.userprofile.courses_list.all()
        course_list += form
        course_list.save()
        return render(request, 'mycourses.html')
return render(request, 'newcourse.html', locals()) 
```

但它不起作用：`+=不支持的操作数类型：'ManyRelatedManager'和'CourseForm'``

也许我需要提出新的要求？

如果你有一个想法.. :D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T10:04:41.883

您需要执行以下操作：

```
request.user.userprofile.courses_list.add(obj) 
```

有关更多详细信息，请参阅有关 ManyToMany 关系的文档：

[https://docs.djangoproject.com/en/dev/topics/db/examples/many_to_many/](https://docs.djangoproject.com/en/dev/topics/db/examples/many_to_many/)

当然，您可能也应该以“正确”的方式处理获取配置文件：

```
try:
    profile = request.user.get_profile()
    profile.courses_list.add(obj)
except UserProfile.DoesNotExist:
    messages.error(request, "Couldn't find profile") 
```

# ruby-on-rails - 没有特殊字符的基本编码（Rails）

> ID：11468261
> 
> 赞同：1
> 
> 时间：2012-07-13T10:00:38.717
> 
> 标签：ruby-on-rails

我正在使用如下所示的基本编码

> enc = Base64.encode64('mystring')
> 
> 输出：“U2VuZCByZWluZm9yY2VtZW50cw==\n”

但是当我使用这个输出在 html 页面中设置一些 div id 时，没有显示实际的加密。正如您在上面的示例中看到的那样，`'\n'`在 html 页面中使用时原来是换行符。而 div 的 id 现在变成`id="U2VuZCByZWluZm9yY2VtZW50cw=="` 但预期的是`U2VuZCByZWluZm9yY2VtZW50cw==\n`

是否有任何解决方案或任何替代方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T10:09:42.000

尝试

```
Base64.urlsafe_encode64 
```

它删除新行并使用 - 而不是 + 和 _ 而不是 /

你当然必须使用`Base64.urlsafe_decode64`它来解码它。

# javascript - 检查 iframe 是否存在，然后使用 jquery 创建 HTML 标记

> ID：11468262
> 
> 赞同：0
> 
> 时间：2012-07-13T10:00:40.290
> 
> 标签：javascript, jquery

我正在尝试使用 jquery 创建 HTML 标记：

```
<div class="icon"></div> 
```

如果页面上存在 youtube 视频，则创建上述标记：

```
if ($('div.container iframe').length) {
  alert('frame exists');
  $('<div class="icon"></div>');
} 
```

但是它不会创建标记。我希望用户粘贴一个 youtube 视频，然后我的 Jquery 应该自动为他们创建图标。请看我的实现：

```
var $video = $('div.container iframe');  //location of video
var $productImage = $('.product-image'); //location of main prod img
var $icon = $('.icon');                  //location of icon

//check if video exists
if ($('div.container iframe').length) {
    alert('frame exists');
  $('<div class="icon"></div>');

}

$('.product-image').append($video);      //append the video to the main prod img

$icon.on('click', function() {           //click
    $video.toggle();                     //toggle the video based on click
}); 
```

**JSFIDDLE： http:** [//jsfiddle.net/t7qMF/7/](http://jsfiddle.net/t7qMF/7/) **解决方案：http:** [//jsfiddle.net/t7qMF/13/](http://jsfiddle.net/t7qMF/13/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-13T10:07:24.763

首先检查 iframe 是否存在，如果存在则`append`图标 div -

```
if ($('div.container iframe').length > 0) {
    alert('frame exists');
    $('.container').append('<div class="icon">Icon</div>');
} 
```

更新小提琴 - [http://jsfiddle.net/t7qMF/11/](http://jsfiddle.net/t7qMF/11/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T10:04:32.283

`$('<div class="icon"></div>');`创建标记，但不把它放在任何地方。将其附加到某些东西上，它应该可以工作。

# asp-classic - 更新查询：未终止的字符串常量错误 asp

> ID：11468268
> 
> 赞同：0
> 
> 时间：2012-07-13T10:01:22.087
> 
> 标签：asp-classic

我正在使用 asp 经典。我是 asp 新手，它的语法对我来说似乎很困惑。

我有这段代码来更新名为 jeanmeasure 的表中的数据。

这个查询有什么问题？它给出了以下错误：

现在我的代码是

```
Dim m1,m2,m3,m4,m5,m6,m7,m8,m9,m1d,m2d,m3d,m4d,m5d,m6d,m7d,m8d,m9d 
m1 = Request.QueryString("m1")
m2 = Request.QueryString("m2")
m3 = Request.QueryString("m3")
m4 = Request.QueryString("m4")
m5 = Request.QueryString("m5")
m6 = Request.QueryString("m6")
m7 = Request.QueryString("m7")
m8 = Request.QueryString("m8")
m9 = Request.QueryString("m9")

m1d = Request.QueryString("m1d")
m2d = Request.QueryString("m2d")
m3d = Request.QueryString("m3d")
m4d = Request.QueryString("m4d")
m5d = Request.QueryString("m5d")
m6d = Request.QueryString("m6d")
m7d = Request.QueryString("m7d")
m8d = Request.QueryString("m8d")
m9d = Request.QueryString("m9d")

sql =" UPDATE jeanmeasure SET m1 = "&m1&" , m2 = ,"&m2&", m3 = "&m3&", m4 = "&m4&", m5 = "&m5&",m6 = "&m6&",m7 = "&m7&",m8 = "&m8&",m9 = "&m9&",m1d = "&m1d&", m2d = "&m2d&", m3d = "&m3d&", m4d = "&m4d&",m5d = "&m5d&",m6d = "&m6d&",m7d = "&m7d&", m8d = "&m8d&", m9d = "&m9d&" WHERE id = 1 "
    Response.Write(sql)
     dbobj.execute(sql) 
```

错误是第 1 行 '' = 'm1, m2 = ,m2, m3 = m3, m4 = , m5 = m5,m6 = m6,m7 = m7,m8 = m8,m9 = m9,m1d ' 附近的语法错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T12:13:58.527

看着

```
m2 = ,"&m2&" 
```

逗号在错误的位置必须是

```
m2 = "&m2&", 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T23:19:16.570

你的语法应该是： m1 = '"&m1&"', m2 = '"&m2&"', ...

# eclipse - Eclipse 团队同步视图中的默认编辑器

> ID：11468272
> 
> 赞同：0
> 
> 时间：2012-07-13T10:01:41.313
> 
> 标签：eclipse, ide, editor, eclipse-cdt

有谁知道如何在 Eclipse Team 同步视图中更改文本比较的默认编辑器？

# javascript - 为一个 javascript 幻灯片添加延迟，以便每个幻灯片播放不同

> ID：11468289
> 
> 赞同：0
> 
> 时间：2012-07-13T10:02:52.627
> 
> 标签：javascript, jquery, gallery, slideshow, delay

我在同一页面上有两个查询幻灯片，它们同时播放。我想为其中一个幻灯片添加延迟，以便它们不会同时更改。例如，我希望幻灯片 1 在开始时有 1000 毫秒的延迟，因此幻灯片 2 首先更改。我试图用我的幻灯片将延迟功能添加到 jquery 文件中，但它不起作用。你能看看我下面的代码，如果你有任何想法，请告诉我？太感谢了！

[http://pastebin.com/aaGFLD26](http://pastebin.com/aaGFLD26)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T10:06:50.100

你只需要在初始化时创建一个延迟。启动第一个，等待延迟，启动第二个

[编辑]

```
 jQuery('div.slideshow').fadeGallery({
            ...
 });

jQuery('div.slideshow2').delay(DURATION).fadeGallery({ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T10:11:56.953

使用 setTimeout 来延迟第二个画廊。

```
jQuery('div.slideshow').fadeGallery();

setTimeout(function() {
    jQuery('div.slideshow2').fadeGallery();
}, DELAY_VALUE); 
```

# c# - 使用 GridView 控件时是否需要显式关闭连接

> ID：11468290
> 
> 赞同：0
> 
> 时间：2012-07-13T10:02:58.803
> 
> 标签：c#, asp.net, sql-server, database-connection

在 asp.net 中使用数据绑定控件时，是否有一个很好的模式来确保正确处理所有内容？

这是我到目前为止所拥有的：

```
 using (var conn = New SqlConnection("connectionString"))
        using (var cmd = conn.CreateCommand())
        {
            cmd.Connection = conn;
            cmd.CommandType = CommandType.StoredProcedure;
            cmd.CommandText = "myProc";

            conn.Open();
            using (var rdr = cmd.ExecuteReader())
            {
                gridview1.DataSource = rdr;
                gridview1.DataBind();
            }
        } 
```

我需要关闭数据读取器/命令/连接吗？还是 using 语句会自动处理这个问题？或者在使用数据绑定控件时可能有更好的模式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T10:11:16.617

`using`使用语句时，您不需要关心对象的处置。`using`语句调用`dispose()`finally 块中的方法，这会导致对象本身在调用 Dispose 后立即超出范围

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T10:14:03.613

您的代码似乎正确。唯一可能的变化是：

1.  使用 CreateCommand 时无需将连接关联到命令
2.  向 ExecuteReader添加一个（对于语句`CommandBehavior.CloseConnection`流来说没有必要）`using`

但它们真的是小事。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T10:22:43.923

使用`'using'`语句调用 dispose 方法本身，因此您不需要照顾它。但是，您可以使用以下方法之一：

1.  如果要启用分页和排序，则需要先将数据加载到 DataTable，然后关闭连接和阅读器，如下所示：

    ```
     var rdr=cmd.ExecuteReader();
        DataTable dt = new DataTable();
        dt.Load(rdr);
        rdr.Close();
        gridview1.DataSource = dt;
        gridview1.DataBind(); 
    ```

2.  如果您不想启用分页和排序，则可以将数据绑定到 gridview，然后在将阅读器加载到 gridview 后关闭阅读器，例如：

    ```
     gridview1.DataSource = rdr;
         gridview1.DataBind();
         rdr.Close(); 
    ```

# mysql - mysql UNION 命名表属性

> ID：11468295
> 
> 赞同：2
> 
> 时间：2012-07-13T10:03:11.783
> 
> 标签：mysql, sql, union

当我执行此查询时：

```
select id as current from events where date = '{$result['date']}'
union all
(select id as previous from events where date < '{$result['date']}' order by date desc limit 1)
union all
(select id as next from events where date > '{$result['date']}' order by date asc limit 1) 
```

它选择日期所在的 ID、`$result['date]`低于该日期的日期和高于该日期的日期。

所以在我的 php 代码中，我需要一个像这样的数组：

```
Array
(
    [0] => Array
    (
        [current] => 6
    )

    [1] => Array
    (
        [previous] => 5
    )

    [2] => Array
    (
        [next] => 7
    )

) 
```

但是，数组的结果如下：

```
Array
(
    [0] => Array
    (
        [current] => 6
    )

    [1] => Array
    (
        [current] => 5
    )

    [2] => Array
    (
        [current] => 7
    )

) 
```

我需要 assoc 数组来描述正确的键！

即使在我的 SQL 中我做

`select id as current` `select id as previous` `select id as next`

他们都出来了`current`？？？

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T10:13:06.383

列同名的原因是因为当你进行`UNION`两个或多个查询时，最顶层查询中的列名始终是最终结果中显示的名称，而不管后续查询中的列名（它们基本上被忽略了）。

## [MySQL 联合语法](http://dev.mysql.com/doc/refman/5.0/en/union.html)

> > *“第一个 SELECT 语句中的列名用作返回结果的列名。”*

* * *

相反，为什么不在一个查询的不同列中获取 id？

```
SELECT a.id AS current, prev.id AS previous, next.id AS next
FROM events a
CROSS JOIN 
(
    SELECT id FROM events 
    WHERE date < '{$result['date']}' 
    ORDER BY date DESC 
    LIMIT 1
) prev
CROSS JOIN 
(
    SELECT id
    FROM events 
    WHERE date > '{$result['date']}' 
    ORDER BY date 
    LIMIT 1
) next
WHERE a.date = '{$result['date']}' 
```

这会给你类似的东西：

```
Array
(
    [0] => Array
    (
        [current] => 6
        [previous] => 5
        [next] => 7
    )
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T10:11:29.840

工会不是这样工作的。它们返回一组 id，并且列名对所有人都是相同的。

在您的具体情况下，运行 3 个单独的查询会更清楚。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T15:38:41.137

正如其他答案所指出的那样，不可能得到这个结果。

当我需要像你展示的那样的东西时，我将包含一个文字作为标识符，显示哪个查询返回了该值：

```
select 'current' as source, id from events where date = '{$result['date']}'
union all
(select 'previous', id from events 
  where date < '{$result['date']}' order by date desc limit 1)
union all
(select 'next', id from events 
  where date > '{$result['date']}' order by date asc limit 1) 
```

返回的结果集与您的规范不匹配，但这种方法确实返回了我可以使用的结果。

这种方法避免了对数据库的三个单独查询（语句解析、语句执行、语句提取）往返的（不必要的）开销。

这将为您提供类似这样的结构，您可以将其转换为所需的结构：

```
Array
(
  [0] => Array
  (
     ["source"] => "current"
     ["id"]     => 6
  )
  [1] => Array
  (
     ["source"] => "previous"
     ["id"]     => 5
  )
  [2] => Array
  (
     ["source"] => "next"
     ["id"]     => 7
  )
) 
```

# c++ - 使用 openmp 时出现奇怪的减速

> ID：11468297
> 
> 赞同：3
> 
> 时间：2012-07-13T10:03:19.017
> 
> 标签：c++, visual-studio-2010, openmp

我试图通过并行化矩阵乘法来提高相当复杂的迭代算法的性能，每次迭代都会调用矩阵乘法。该算法需要 500 次迭代和大约 10 秒。但是在并行化矩阵乘法之后，它会减慢到 13 秒。但是，当我单独测试相同维度的矩阵乘法时，速度有所提高。（我说的是 100x100 矩阵。）

最后，我关闭了算法内部的任何并行化，并在每次迭代中添加了以下代码，它完全没有任何作用，而且可能不会花费很长时间：

```
int j;

#pragma omp parallel for private(j)

for (int i = 0; i < 10; i++)
j = i; 
```

同样，与没有这段代码的相同算法相比，速度降低了 30%。

因此，在主算法中使用 openmp 调用任何并行化 500 次会以某种方式减慢速度。这种行为对我来说看起来很奇怪，有人知道问题是什么吗？

主要算法由桌面应用程序调用，由 VS2010，Win32 版本编译。我在 Intel Core i3（并行化创建 4 个线程）、64 位 Windows 7 上工作。

这是一个程序的结构：

```
int internal_method(..)

{
...//no openmp here

 // the following code does nothing, has nothing to do with the rest of the program  and shouldn't take long,
 // but somehow adding of this code caused a 3 sec slowdown of the Huge_algorithm()
 double sum;
 #pragma omp parallel for private(sum)
 for (int i = 0; i < 10; i++)
    sum = i*i*i / (1.0 + i*i*i*i);

...//no openmp here
}

int Huge_algorithm(..)
{

 ...//no openmp here

    for (int i = 0; i < 500; i++)
    {
     .....// no openmp

     internal_method(..);

     ......//no openmp
    }

...//no openmp here
} 
```

所以，最后一点是：单独调用并行代码 500 次（当算法的其余部分被省略时）需要不到 0.01 秒，但是当你在一个巨大的算法中调用它 500 次时，它会导致 3 秒的延迟整个算法。而我不明白的是小的并行部分如何影响算法的其余部分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T10:35:21.597

对于 10 次迭代和一个简单的分配，我想与计算本身相比，OpenMP 开销太大了。这里看起来轻量级的东西实际上是管理和同步多个线程，这些线程甚至可能不是来自线程池。可能涉及一些锁定，我不知道 MSVC 在估计是否要并行化方面有多好。

尝试使用更大的循环体或更大数量的迭代（比如 1024*1024 迭代，仅用于初学者）。

* * *

示例 OpenMP Magick：

```
#pragma omp parallel for private(j)
for (int i = 0; i < 10; i++)
    j = i; 
```

这可能会被编译器*大致*扩展为：

```
const unsigned __cpu_count = __get_cpu_count();
const unsigned __j  = alloca (sizeof (unsigned) * __cpu_count);
__thread *__threads = alloca (sizeof (__thread) * __cpu_count);
for (unsigned u=0; u!=__cpu_count; ++u) {
    __init_thread (__threads+u);
    __run_thread ([u]{for (int i=u; i<10; i+=__cpu_count)
                          __j[u] = __i;}); // assume lambdas
}

for (unsigned u=0; u!=__cpu_count; ++u)
    __join (__threads+u); 
```

with `__init_thread()`,`__run_thread()`并且`__join()`是调用某些系统调用的非平凡函数。

如果使用线程池，您可以用`alloca()`类似的东西替换第一个`__pick_from_pool()`。

（请注意，名称和发出的代码都是虚构的，实际实现会有所不同）

* * *

关于您更新的问题：

您似乎以错误的粒度进行并行化。将尽可能多的工作量放在一个线程中，所以而不是

```
 for (...) {
     #omp parallel ...
     for (...) {} 
 } 
```

尝试

```
 #omp parallel ...
 for (...) {
     for (...) {} 
 } 
```

经验法则：保持每个线程的工作负载足够大，以减少相对开销。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T10:07:01.470

也许只是 j=i 对于 core-cpu 带宽来说不是高收益。也许你应该尝试一些更有效的计算。（例如取 i*i*i*i*i*i 并除以 i+i+i）

你是在多核 cpu 还是 gpu 上运行它？

# xml - J2ME Web 服务响应解析

> ID：11468305
> 
> 赞同：1
> 
> 时间：2012-07-13T10:03:40.130
> 
> 标签：xml, soap, java-me

我使用 Netbeans 为 SOAP Web 服务生成存根。

如何解析 rss 提要的 xml 或 html 格式的 Web 响应？解析 SOAP 响应或 html 响应中的任何链接都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T14:39:06.820

如果您的目标设备支持 JSR 172 中的 SAX，您应该使用此解析器。它将减少您的应用程序的最终 jar 大小（不导入库）。[在http://www.developer.nokia.com/Community/Wiki/JSR_172:_XML_Parsing_Example](http://www.developer.nokia.com/Community/Wiki/JSR_172:_XML_Parsing_Example)有一个很好的示例它实际上将 XML 解组为 Java 对象。

在您有信心之后，您可以在[http://smallandadaptive.blogspot.com.br/2010/11/xml-data-binding.html尝试我在 Java ME 中解组的通用方法](http://smallandadaptive.blogspot.com.br/2010/11/xml-data-binding.html)

# jquery - jQuery中的每个函数

> ID：11468308
> 
> 赞同：3
> 
> 时间：2012-07-13T10:03:48.553
> 
> 标签：jquery

我在一个父级中有四个 div，每个 div 包含一个图像。我想在相应的 div 中显示该特定图像的宽度。但我的函数返回所有容器中的最后一个图像宽度。

```
<head>
  <script type="text/javascript" src="jquery-1.7.2.js"></script>
  <script type="text/javascript">
  $(function () {
    $('.box').each(function () {
      var height = $(this).find('img').height();
      var width = $(this).find('img').width();
      $('.width').text(width)
    })
  })
  </script>
  <style>
  .box {
    float:left;
    margin-left:20px;
    position:relative
  }
  .width {
    position:absolute;
    left:0;
    top:0;
    color:#FFF;
    font-size:20px;
  }
  </style>
</head>
<body>
  <div class="container">
    <div class="box">
      <div class="width"></div>
      <img src="img/sample1.jpg" height="200" width="300" />
    </div>
    <div class="box">
      <div class="width"></div>
      <img src="img/sample2.jpg" height="200" width="350" />
    </div>
    <div class="box">
      <div class="width"></div>
      <img src="img/sample3.jpg" height="200" width="150" />
    </div>
    <div class="box">
      <div class="width"></div>
      <img src="img/sample4.jpg" height="200" width="100" />
    </div>
  </div>
</body> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-13T10:06:43.750

您需要定位作为`.width`的子元素的元素`this`，就像您为找到该`img`元素所做的那样：

```
$(function (){
    $('.box').each(function (){
        var $this = $(this); //Cache jQuery-wrapped `this` (more efficient)
        var height= $this.find('img').height();
        var width=  $this.find('img').width();
        $this.find('.width').text(width); //Find the descendant `.width` element
    });
}); //You missed these 2 semicolons. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T10:07:35.947

`$(this).find('.width').text(width)`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-13T10:10:00.043

```
$('.width').text(width);  // bad 
```

'.width' 匹配所有 4 个 .width 元素，然后 text() 仅作用于其中一个

你要

```
$(this).find('.width').text(width); 
```

这里我们指定我们只想要在 (this) 下找到的 .width 元素

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-13T10:07:30.513

使用`$(this).parent().children('.width')`而不是`$('.width')`

# logic - 为什么大多数“主流”语言不支持区间比较（例如：x < variable < y）？

> ID：11468317
> 
> 赞同：0
> 
> 时间：2012-07-13T10:04:10.290
> 
> 标签：logic, theory

这可能是一个非常简单的问题，或者之前可能已经被问过，但在此处和通过谷歌进行简短搜索后，我无法真正找到答案。

因此，冒着错过类似情况的风险，这是我的问题。为什么通常不支持检查间隔的条件语句，而是实现为 block`if`或使用`&&`运算符将​​两个单独的条件绑定在一起？

承认如果​​我必须多写两行代码并不是全世界，但是从数学背景来看，我发现现代编译器无法对这个相对简单的语句施以巫术真的很奇怪。

从技术或理论角度来看，是否有特殊原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T10:22:40.507

我在这里的两分钱：如果您用`a < b < c`多种语言编写，则意味着（考虑到比较运算符通常是关联的）`((a < b) < c)`。但是`a < b`返回一个布尔值，因此（例如，如果`a < b`返回`true`）连续减少是`(true < c)`除了极端罕见的情况之外的所有情况，这不是您想要做的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T12:15:33.317

我想说从技术角度来看没有任何障碍，因为有些语言确实支持这种比较：

*   Python ([文档](http://docs.python.org/reference/expressions.html#not-in))
*   Clojure ( [docs](http://clojure.github.com/clojure/clojure.core-api.html#clojure.core/%3C) ) - 以及几乎所有其他 lispy 语言
*   Perl 6 ([文档](http://perlcabal.org/syn/S03.html#Chained_comparisons))

如果我没记错的话，还有 Mathematica。

可以肯定的是，它使语言的解析变得更加复杂，如果语言设计者不将其视为经常使用的功能，他们可能会也可能不会付出代价。

附言。我个人喜欢它，但发现自己很少在 Python 中使用它。

# android - 发生碰撞时如何停止声音重新启动

> ID：11468331
> 
> 赞同：0
> 
> 时间：2012-07-13T10:05:06.153
> 
> 标签：android, andengine, audio, soundpool

目前，当我的游戏中使用 andEngine 和 Box2D 的任何对象与墙壁接触时，我的代码会播放声音，我遇到的问题是，当与任何对象接触时，它会再次开始，我明白为什么会发生这种情况。如果可能的话，我想做的是继续播放声音，同时也播放它以进行另一次碰撞。我想我可能需要使用线程，但我不确定如何在 java for android 中执行此操作。

```
@Override
public void beginContact(Contact contact)
{
    Rattle.this.mExplosionSound.play();
} 
```

更新：我似乎无法解决这个问题，但我知道我需要做的是同时多次播放这个声音，我尝试过线程和 soundPool 但都没有运气，但仍然不确定要做什么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T14:01:28.220

看来您只有一个声音实例。然后你两次调用相同的声音播放，因此它停止播放并从头开始。

想象一下拥有一台 CD 播放器 - 您按下播放键，音乐开始播放。您再次按下播放键，播放器将从头开始阅读曲目。您需要的是两个播放器，因此您可能需要两个相同声音的实例。

（我对Android上的声音没有太多经验，所以我可能是错的，请谨慎接受建议。）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-13T10:13:14.643

即使我前段时间正在开发游戏，我也发现了类似的问题。您应该使用 SoundPool 播放短促的声音，例如碰撞和碰撞。这里有一些很好的链接对我有帮助。[链接1](http://www.droidnova.com/creating-sound-effects-in-android-part-1,570.html)，[链接2](http://www.vogella.com/articles/AndroidMedia/article.html)。

# c - Linux 线程暂停/恢复

> ID：11468333
> 
> 赞同：14
> 
> 时间：2012-07-13T10:05:12.267
> 
> 标签：c, linux, multithreading, pthreads

我正在编写一个代码，其中有两个并行运行的线程。

第一个是启动第二个线程的主线程。第二个线程只是一个执行空while循环的简单线程。

现在我想暂停/暂停创建它的第一个线程执行第二个线程。一段时间后，我想从暂停/暂停的位置恢复执行第二个线程（通过发出一些命令或函数）。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-15T14:29:50.003

这个问题不是关于如何使用互斥锁，而是如何挂起线程。

在 Unix 规范中有一个叫 pthread_suspend 的线程函数，还有一个叫 pthread_resume_np 的线程函数，但由于某种原因，制作 Linux、FreeBSD、NetBSD 等的人并没有实现这些函数。

所以要理解它，功能根本不存在。有一些解决方法，但不幸的是它与在 Windows 上调用 SuspendThread 不同。您必须做各种不可移植的事情才能使线程停止并开始使用信号。

停止和恢复线程对于调试器和垃圾收集器至关重要。例如，我见过一个无法正确实现“SuspendThread”功能的 Wine 版本。因此，任何使用它的 Windows 程序都无法正常工作。

我认为可以根据 JVM 为垃圾收集器使用这种信号技术这一事实正确地使用信号来做到这一点，但我也刚刚在网上看到一些文章，人们注意到 JVM 出现死锁等问题，有时不可重现。

所以为了回答这个问题，除非你有一个很好的 Unix 来实现 pthread_suspend_np，否则你不能用 Unix 正确地挂起和恢复线程。否则你会被信号卡住。

Signals 的最大问题是当你有大约五个不同的库都链接到同一个程序并且都试图同时使用相同的信号时。出于这个原因，我相信您实际上不能在一个程序中使用 ValGrind 之类的东西，例如 Boehm GC。至少在用户空间的最低级别没有主要编码。

这个问题的另一个答案可能是。像 Linuz Torvalds 对 NVidia 所做的那样，向他指指点点，让他实现 Linux 中缺少的两个最关键的部分。首先，pthread_suspend，其次，内存页面上的脏位，以便可以实现适当的垃圾收集器。在网上发起一个大型请愿书，并不断地动动手指。也许到 Windows 20 出来的时候，他们会意识到暂停和恢复线程，还有脏位实际上是 Windows 和 Mac 优于 Linux 或任何不实现 pthread_suspend 的 Unix 的根本原因之一，也是脏位在虚拟页面上，就像在 Windows 中的 VirtualAlloc 一样。

我不活在希望中。实际上，对我来说，我花了数年时间围绕为 Linux 构建东西来规划我的未来，但放弃了希望作为可靠的东西，这一切似乎都取决于虚拟内存的脏位的可用性，以及干净地挂起线程。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-13T10:13:33.137

据我所知，你不能真的只是使用 pthreads 暂停一些其他线程。你必须在你的第二个线程中有一些东西来检查它应该使用条件变量之类的东西暂停的时间。这是做这类事情的标准方法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-06-15T04:13:53.230

我尝试使用信号暂停和恢复线程，这是我的解决方案。请用-pthread 编译和链接。

信号 SIGUSR1 通过调用挂起线程，`pause()`而 SIGUSR2 恢复线程。

从暂停的手册页：

> pause() 导致调用进程（或线程）休眠，直到发出终止进程或导致调用信号捕获函数的信号。

```
#include <stdio.h>
#include <unistd.h>
#include <pthread.h>
#include <signal.h>

// Since I have only 2 threads so using two variables, 
// array of bools will be more useful for `n` number of threads.
static int is_th1_ready = 0;
static int is_th2_ready = 0;

static void cb_sig(int signal)
{
        switch(signal) {
        case SIGUSR1:
                pause();
                break;
        case SIGUSR2:
                break;
        }
}

static void *thread_job(void *t_id)
{
        int i = 0;
        struct sigaction act;

        pthread_detach(pthread_self());
        sigemptyset(&act.sa_mask);
        act.sa_flags = 0;
        act.sa_handler = cb_sig;

        if (sigaction(SIGUSR1, &act, NULL) == -1) 
                printf("unable to handle siguser1\n");
        if (sigaction(SIGUSR2, &act, NULL) == -1) 
                printf("unable to handle siguser2\n");

        if (t_id == (void *)1)
            is_th1_ready = 1;
        if (t_id == (void *)2)
            is_th2_ready = 1;

        while (1) {
                printf("thread id: %p, counter: %d\n", t_id, i++);
                sleep(1);
        }

        return NULL;
}

int main()
{
        int terminate = 0;
        int user_input;
        pthread_t thread1, thread2;

        pthread_create(&thread1, NULL, thread_job, (void *)1);
        // Spawned thread2 just to make sure it isn't suspended/paused 
        // when thread1 received SIGUSR1/SIGUSR2 signal
        pthread_create(&thread2, NULL, thread_job, (void *)2);

        while (!is_th1_ready && !is_th2_ready);

        while (!terminate) {
                // to test, I am sensing signals depending on input from STDIN
                printf("0: pause thread1, 1: resume thread1, -1: exit\n");
                scanf("%d", &user_input);

                switch(user_input) {
                case -1: 
                        printf("terminating\n");
                        terminate = 1;
                        break;
                case 0:
                        printf("raising SIGUSR1 to thread1\n");
                        pthread_kill(thread1, SIGUSR1);
                        break;
                case 1:
                        printf("raising SIGUSR2 to thread1\n");
                        pthread_kill(thread1, SIGUSR2);
                        break;
                }
        }

        pthread_kill(thread1, SIGKILL);
        pthread_kill(thread2, SIGKILL);

        return 0;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-13T10:36:56.420

POSIX 中没有 pthread_suspend()、pthread_resume() 类型的 API。
大多数条件变量可用于控制其他线程的执行。

> 条件变量机制允许线程暂停执行并放弃处理器，直到某个条件为真。条件变量必须始终与互斥锁相关联，以避免由一个准备等待的线程和另一个线程创建的竞争条件，该线程可能在第一个线程实际等待它之前发出条件信号，从而导致死锁。

欲了解更多信息

[线程](https://computing.llnl.gov/tutorials/pthreads/)

[Linux 教程 Posix 线程](http://www.yolinux.com/TUTORIALS/LinuxTutorialPosixThreads.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-13T10:58:05.977

如果您可以改用进程，则可以将作业控制信号（SIGSTOP / SIGCONT）发送到第二个进程。如果您仍想在这些进程之间共享内存，您可以使用 SysV 共享内存（shmop、shmget、shmctl...）。

即使我自己没有尝试过，也可以使用较低级别的 clone() 系统调用来生成不共享信号的线程。有了它，您也许可以将 SIGSTOP 和 SIGCONT 发送到另一个线程。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-13T11:27:40.277

不知道你是否会喜欢我的回答。但是您可以通过这种方式实现它。

**如果它是一个单独的进程而不是线程**，**我有一个****使用信号**的解决方案（这甚至可能适用于线程，也许有人可以分享你的想法）。

**当前没有系统**可以暂停或恢复进程的执行。**但你肯定可以建造一个。**

**如果我想在我的项目中使用它，我会做的步骤：**

*   为第二个进程注册一个信号处理程序。
*   在信号处理程序中，等待一个信号量。
*   每当您想暂停另一个进程时，只需发送一个
    您注册另一个进程的信号即可。程序将进入睡眠状态。
*   当您想恢复该过程时，您可以再次发送不同的信号。在该信号处理程序中，您将检查信号量是否被锁定。如果它被锁定，您将释放信号量。所以
    进程 2 将继续执行。

如果您可以实现这一点，请分享您的反馈，无论它是否适合您。谢谢。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-13T10:13:37.310

您可以使用互斥锁来做到这一点，伪代码将是：

```
While (true) {
    /* pause resume */
    lock(my_lock); /* if this is locked by thread1, thread2 will wait until thread1 */
                   /* unlocks it */
    unlock(my_lock); /* unlock so that next iteration thread2 could lock */

    /* do actual work here */
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-14T19:05:21.523

为了在线程上实现暂停，您需要让它等待某个事件发生。等待自旋锁互斥体是在浪费 CPU 周期。恕我直言，不应遵循此方法，因为 CPU 周期可能已被其他进程/线程用完。等待非阻塞描述符（管道、套接字或其他）。使用[管道进行线程间通信的示例代码](http://ashishgrover.com/linux-multi-threading-fifos-or-named-pipes/)可以在这里看到上述解决方案很有用，如果您的第二个线程具有来自多个来源的更多信息，而不仅仅是暂停和恢复信号。顶级 select/poll/epoll 可用于非阻塞描述符。您可以指定 select/poll/epoll 系统调用的等待时间，只会浪费那么多微秒的 CPU 周期。我以前瞻性的方式提到了这个解决方案，即您的第二个线程将处理更多的事情或事件，而不仅仅是暂停和恢复。对不起，如果它比你问的更详细。

另一种更简单的方法是在这些线程之间有一个共享的布尔变量。主线程是变量的写入者，0 - 表示停止。1 - 表示恢复第二个线程只读取变量的值。要实现“0”状态，请使用 usleep 几微秒，然后再次检查该值。假设您的设计可以接受几微秒的延迟。要实现'1' - 在执行一定数量的操作后检查变量的值。否则，您还可以实现从“1”状态移动到“0”状态的信号。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-09-05T15:24:14.887

您可以简单地通过信号暂停线程

```
pthread_mutex_t mutex;
static void thread_control_handler(int n, siginfo_t* siginfo, void* sigcontext) {
    // wait time out
    pthread_mutex_lock(&mutex);
    pthread_mutex_unlock(&mutex);
}
// suspend a thread for some time
void thread_suspend(int tid, int time) {
    struct sigaction act;
    struct sigaction oact;
    memset(&act, 0, sizeof(act));
    act.sa_sigaction = thread_control_handler;
    act.sa_flags = SA_RESTART | SA_SIGINFO | SA_ONSTACK;
    sigemptyset(&act.sa_mask);
    pthread_mutex_init(&mutex, 0);
    if (!sigaction(SIGURG, &act, &oact)) {
        pthread_mutex_lock(&mutex);
        kill(tid, SIGURG);
        sleep(time);
        pthread_mutex_unlock(&mutex);
    }
} 
```

# ios - “恢复事务”按钮行为，当没有什么可以恢复

> ID：11468338
> 
> 赞同：20
> 
> 时间：2012-07-13T10:05:25.193
> 
> 标签：ios, itunes, in-app-purchase

正如[在这个问题](https://stackoverflow.com/questions/11021932/in-app-purchases-restore-button)和其他地方所讨论的那样，Apple 现在要求应用程序包含一种方法，供用户恢复已完成的应用内购买交易。

我完全赞成这个。我的应用程序的第一个版本在没有它的情况下通过了审查（当时我不知道这条规则，和/或它还没有被强制执行），但后来我开始收到很多来自用户的电子邮件询问丢失的内容（也有数据存储指南，并且没有备份大量可下载的内容）。

因此，假设我在 UI 中的某处包含一个“恢复”按钮，当点击该按钮时：

```
[[SKPaymentQueue defaultQueue] restoreCompletedTransactions]; 
```

到现在为止还挺好。系统会提示用户他的 AppleID 和/或密码，然后恢复过程开始。

我遇到的问题是：如果没有要恢复的事务，则在 AppleID 提示之后，我的应用程序中基本上**没有任何**反应，这可能会使用户感到困惑或使应用程序看起来无响应或损坏。

我希望能够显示“所有购买都是最新的”或其他内容的警报视图。

我可以在我的 Transaction Observer 代码中做些什么来检测这种情况吗？

有没有人认为这将是一个糟糕的设计，UX 方面？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2016-09-26T13:29:39.183

这在最新的 SDK / xCode 8.0, Swift 3 中仍然是一个问题 - 如果尚未购买任何商品的用户尝试“恢复”，请使用以下方法：

```
SKPaymentQueue.default().restoreCompletedTransactions() 
```

不会触发处理购买/恢复的常用委托方法：

```
paymentQueue(_ queue: SKPaymentQueue, updatedTransactions transactions: [SKPaymentTransaction]) {...} 
```

有趣的是，可能应该捕获错误的方法也没有被调用：

```
func paymentQueue(_ queue: SKPaymentQueue, restoreCompletedTransactionsFailedWithError error: Error){...} 
```

相反，触发了可选方法，就好像恢复工作正常：

```
func paymentQueueRestoreCompletedTransactionsFinished() 
```

这可能会导致应用看起来像是挂起/不做任何事情。

正如其他答案中所讨论的，其原因是 SKPaymentQueue 不包含任何交易。

在 Swift 中，可以通过以下方式解决这个问题：

```
//Optional Method.
func paymentQueueRestoreCompletedTransactionsFinished(_ queue: SKPaymentQueue)
{

    let transactionCount = queue.transactions.count

    if transactionCount == 0
    {
        print("No previous transactions found")

        //You can add some method to update your UI, indicating this is the problem e.g. use notification centre:
        NotificationCenter.default.post(name: "restoreFailedNoPrevIAP", object: nil)

    }

} 
```

重要的是，如果用户之前进行过购买，则交易队列不会为空，因此会调用 updateTransaction 委托方法，并正常处理恢复请求。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-10T21:35:42.317

您还可以实现以下委托函数：

```
-(void)paymentQueueRestoreCompletedTransactionsFinished:(SKPaymentQueue *)queue
-(void)paymentQueue:(SKPaymentQueue *)queue restoreCompletedTransactionsFailedWithError:(NSError *)error 
```

然后您会知道恢复过程何时完成或是否失败。您可以在 paymentQueueRestoreCompletedTransactionsFinished 中混合使用 queue.transactions.count 以查看是否恢复了任何交易。

记得在 SKPaymentTransactionStateRestored 中处理

```
-(void)paymentQueue:(SKPaymentQueue *)queue updatedTransactions:(NSArray *)transactions 
```

您可能还希望以与 SKPaymentTransactionStatePurchased 交易相同的方式处理恢复的交易。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-12-05T23:25:02.683

我对恢复购买的正确/最佳*措辞感兴趣。*

我已经看到了足够多的“未知错误”警报，只是使用`[error localizedDescription]`inside `-(void)paymentQueue:restoreCompletedTransactionsFailedWithError:`。（待办事项：填充雷达）

所以我看了一下Apple是如何做到的。Apple 目前唯一具有非消耗性应用内购买的应用是 GarageBand（2014 年 12 月）。

而不是“恢复购买”，“恢复以前的购买”或......他们去`"Already Purchased?"`。

![购买画面 1](../Images/4927a0f2d7fd409c47f2ee0b214685cd.png)

但是这里是我比较感兴趣的画面， `"Already Purchased?"`没有什么可以恢复的时候按下的结果：

![购买画面 2](../Images/c77c2f711ebf190adbed8fffa4bb5b02.png)

`"There are no items available to restore at this time."`不是革命性的，但击败了“未知错误”

所以让我们看看`-(void)paymentQueue:restoreCompletedTransactionsFailedWithError:`。

**IOS**：

```
- (void)paymentQueue:(SKPaymentQueue *)queue restoreCompletedTransactionsFailedWithError:(NSError *)error
{
    if ([error.domain isEqual:SKErrorDomain] && error.code == SKErrorPaymentCancelled)
    {
        return;
    }

    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:NSLocalizedString(@"There are no items available to restore at this time.", @"")
                                                    message:nil
                                                   delegate:nil
                                          cancelButtonTitle:NSLocalizedString(@"OK", @"")
                                          otherButtonTitles:nil];
    [alert show];
} 
```

**操作系统**：

我对 OS X 上的相同文本不满意。只有 messageText 而没有 informationativeText 的 NSAlert 看起来很空洞和错误。

我的一个选择是让用户知道他需要购买它，比如`"To use it, you need to buy “%@”."`.

我想出的另一个选择是让他们浏览[Purchase History](http://support.apple.com/en-us/ht2727)。我发现你可以直接用`itms://phobos.apple.com/purchaseHistory`. 老实说，iTunes Store 中的购买历史是一团糟，它会带你永远找到一些东西。

但也许它有助于向人们重新保证我们不会试图让他们重新购买某些东西。始终假设您的客户不知道或无法区分非消耗品和消耗品之间的区别。而且不知道他们不能为非消耗品收取两次费用。

```
- (void)paymentQueue:(SKPaymentQueue *)queue restoreCompletedTransactionsFailedWithError:(NSError *)error
    {
    if ([error.domain isEqual:SKErrorDomain] && error.code == SKErrorPaymentCancelled)
    {
        return;
    }

    NSAlert *alert = nil;
    alert = [NSAlert alertWithMessageText:NSLocalizedString(@"There are no items available to restore at this time.", @"")
                            defaultButton:NSLocalizedString(@"OK", @"")
                          alternateButton:NSLocalizedString(@"Purchase History", @"")
                              otherButton:nil
                informativeTextWithFormat:@"You can see your purchase history in the iTunes Store."];
    NSModalResponse returnCode = [alert runModal];
    if (returnCode == NSAlertAlternateReturn)
    {
        NSURL *purchaseHistory = [NSURL URLWithString:@"itms://phobos.apple.com/purchaseHistory"];
        [[NSWorkspace sharedWorkspace] openURL:purchaseHistory];
    }
} 
```

OS X 上的示例

![OS X 上的示例](../Images/34f8a590b7e35e01681099259bb215ed.png)

测试笔记（OS X，itunesconnect沙盒用户）：

当用户点击取消时：

```
- (void)paymentQueue:(SKPaymentQueue *)queue restoreCompletedTransactionsFailedWithError:(NSError *)error
Error Domain=SKErrorDomain Code=2 "The payment was canceled by the user" UserInfo=0x600000470a40 {NSLocalizedDescription=The payment was canceled by the user} 
```

当没有什么可以恢复时：

```
- (void)paymentQueue:(SKPaymentQueue *)queue restoreCompletedTransactionsFailedWithError:(NSError *)error
Error Domain=SKErrorDomain Code=0 "Unknown Error." UserInfo=0x60800007fb80 {NSLocalizedDescription=Unknown Error.} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T07:40:52.283

我在我现在正在开发的应用程序中遇到了同样的问题。我的解决方法是使用 X 秒计时器。当您点击“恢复购买”按钮时它开始，如果恢复的交易事件进入，它会重新启动。一旦它达到 X 秒标记，我会弹出一个显示“已恢复购买”的弹出窗口。因此，如果您没有交易，您应该只需要等待 X 秒。希望有帮助。

# android - 创建所有可能的本地 Intent 操作的单个类/枚举是一种糟糕的做法吗？

> ID：11468339
> 
> 赞同：0
> 
> 时间：2012-07-13T10:05:29.833
> 
> 标签：android, android-intent

我想知道创建单个 java`class`或`enum`包含我的应用程序的所有不同`Intent`操作是否被认为是不好的做法。如果不在 a `class`or`enum`中，那么可能是其中一个`XML`文件？我计划使用[LocalBroadcastManager](http://developer.android.com/reference/android/support/v4/content/LocalBroadcastManager.html)来处理事件以减少耦合。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T10:07:59.880

我想说将所有 Intent Action 放在一个 Java ***Class***中是很好的，或者您可以为它使用***Interface***。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T10:13:50.807

我没有看到任何特别“好”的东西，但肯定可以有一个由`public static final Strings`代表你的行为组成的实用程序类。然后它应该有一个`private`构造函数，并且您不想从该类继承。

我不会将常量放入其中，`interface`因为`implement`那时您将不得不使用该接口，但是您想要的是使用而不是实现。

[在“Effective Java”](http://java.sun.com/docs/books/effective/)中有一条建议避免纯粹的常量接口。

# objective-c - NSRegularExpression 的多个匹配项

> ID：11468342
> 
> 赞同：0
> 
> 时间：2012-07-13T10:05:33.983
> 
> 标签：objective-c, regex, ios5, xcode4.3, nsregularexpression

我有以下正则表达式模式要匹配：

```
NSString *pattern=[NSString stringWithFormat:@"%@(.*)%@", key, key2]; 
```

所以让我说`if key=\\\\[\\\\\[ and key2=\\\\]\\\\]`我得到包含键的字符串以及包含的文本。但问题是，如果有多个匹配项，那么它只需要 key 的出现和 key2 的最后出现，并为我提供包含在这些与键之间的文本。例如：这是 [[some]] [[text]]。这给了我：`[[some]] [[text]]`作为我想要的一场比赛`[[some]]`和`[[text]]`单独的比赛。我应该如何修改它以分别给出所有匹配项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T10:13:13.310

同样的事情困扰着想要解析引号之间的字符串的新手解析器制造商，并认为

```
\\".*\\" 
```

就足够了，但是当它匹配之间的所有文本时会感到惊讶

```
"a string" and also "another string" 
```

这背后的原因是 * 运算符是*贪婪*的。您必须使用字符集否定来达到预期的结果：

```
\\[\\[[^\\[\\]]*\\]\\] 
```

希望这可以帮助。

# c# - 如何将对话框置于所有打开的表单之上

> ID：11468348
> 
> 赞同：6
> 
> 时间：2012-07-13T10:05:42.307
> 
> 标签：c#

我有三种主要形式，销售和登录。

在主窗体中，我有一个计时器，例如 5 分钟后登录窗体将被启动。

我可以在不关闭主窗体的情况下打开主窗体的销售窗体，因此将启动登录窗体。

问题是登录表单不关注销售表单，因此用户必须登录才能使用销售表单。

主窗体上的一些代码：

```
public void timer_Tick(object sender, EventArgs e)
        {
            timer.Stop();
    LoginDialog loginForm = new LoginDialog();
                loginForm.TopLevel = true;
                loginForm.ShowDialog();
timer.Start()
}

 private void pbSales_Click(object sender, EventArgs e)
        {
            Sales salesForm = new Sales();
            salesForm .ShowDialog(this);
        } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-13T10:08:14.833

**编辑**

尝试将两者结合起来可能对您有用..

```
private void frmMain_Shown(object sender, EventArgs e)
{
// Make this form the active form and make it TopMost
this.ShowInTaskbar = false;
this.TopMost = true;
this.Focus();
this.BringToFront();
this.TopMost = false;
} 
```

* * *

试试这个

```
yourForm.TopMost = true; 
```

或者

[Control.BringToFront 方法](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.bringtofront.aspx)

```
yourform.BringToFront() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T10:22:50.133

我认为问题是你`ShowDialog`从那里打电话`MainForm`并且你也打开了销售表格。

Dialog 的父对象恰好是`MainForm`，所以也许你可以尝试使用

`loginForm.ShowDialog(saleform1);`

salesform1 是您从主窗体打开的销售窗体的实例名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T10:09:05.007

摆弄`TopMost`和`BringToFront()`

# php - 为 PHP 编译 pdo 和 pdo_mysql

> ID：11468350
> 
> 赞同：1
> 
> 时间：2012-07-13T10:05:53.880
> 
> 标签：php, pdo

我正在尝试编译 pdo.so 和 pdo_mysql.so 以在我的 PHP5 安装中获得 pdo 支持。我尝试了以下方法：

```
./configure --prefix=/thedirectory --with-mysql --with-pdo-mysql --enable-pdo 
```

编译成功，但没有生成 .so。我应该有/指定一个mysql安装？

pdo 支持是否应该在 php core 中编译？如果我运行 php -m 我可以看到 PDO 和 pdo_mysql 已注册，但是**phpinfo()**声明不支持 pdo_mysql。我猜 php -m 只是告诉我 php 支持 pdo 但仍然需要 .so？

有人可以建议吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-10-31T16:34:59.507

使用以下配置选项：

```
./configure \
--with-mysqli=/home/user/programs/mysql/install/bin/mysql_config \
--with-pdo-mysql=/home/user/programs/mysql/install 
```

该`/home/user/programs/mysql/install`目录是安装 MySQL 的位置。

您应该`pdo_mysql`会在 phpinfo() 输出中看到显示以下内容的部分：

```
PDO Driver for MySQL    enabled
Client API version  5.7.16 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-07-13T10:42:03.163

最新版本的 PHP 带有用于 MySQL、Oracle、PgSQL、ODBC、SQLite 和 Firebird/Interbase 的 PDO 驱动程序。您所要做的就是在您的`php.ini`：

```
;extension=php_pdo_firebird.dll
extension=php_pdo_mysql.dll
;extension=php_pdo_oci.dll
;extension=php_pdo_odbc.dll
extension=php_pdo_pgsql.dll
;extension=php_pdo_sqlite.dll 
```

在这里，我启用了 MySQL 和 PgSQL，而所有其他都被禁用。

（这是来自 Windows 的 php.ini 文件，但在 linux 上看起来几乎相同，只是扩展名为`pdo_mysql.so`,`pdo_pgsql.so`等）

# php - mysql_query 有效，但错误检查返回错误

> ID：11468352
> 
> 赞同：0
> 
> 时间：2012-07-13T10:06:01.893
> 
> 标签：php, mysql

此代码有效并将所有正确信息输入数据库，但错误检查返回错误。我可以删除错误检查，但我害怕制造一些噩梦，这些噩梦会在以后困扰我，或者我错过了一个基本问题：

```
 $sql5a = mysql_query("SELECT id FROM categories WHERE category='$category'");
        $categoryresult = mysql_fetch_array($sql5a);
        $oldcategoryid = $categoryresult['id'];
        $sql6a = "INSERT INTO lookupcategory SET
        fbid='$fbid2',
        categoryid='$oldcategoryid'";
            if ( @mysql_query($sql5b) ) { 
                                echo('sql5b updated successfully<br>'); 
                            } else { 
                                echo('Error: sql5b not updated<br>'.mysql_error() );
                        }
                            if ( @mysql_query($sql6b) ) { 
                                echo('sql6b updated successfully<br>'); 
                            } else { 
                                echo('Error: sql6b not updated<br>'.mysql_error() );
                        } 
```

输出为：“错误：sql5b 未更新您的 SQL 语法有错误；请检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“资源 id #7”附近使用正确的语法”“sql6b 已成功更新"

当我检查数据库时，所有条目都是正确的。如果 sql5a 不起作用，则 sql6b 无法工作，因此我对错误感到困惑。

示例类别为：旅游/休闲 该类别最初是根据表单响应创建的：$category = htmlentities($fbdetail['category'], ENT_QUOTES); 并成功进入数据库。使用 AUTO_INCREMENT 分配了一个 ID 号。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T10:08:22.563

插入的语法是：

```
INSERT INTO table(col1, col2 ...) VALUES(val1, val2 ...) 
```

在您的具体情况下：

```
$sql6a = "INSERT INTO table(fbid, categoryid) VALUES('{$fbid2}','{$oldcategoryid}')" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T10:32:53.307

您将查询分配给变量`$sql5a`，但调用`@mysql_query($sql5b)`. `$sql5b`不存在（至少在此示例中）。与`$sql6a`...相同

您可以使用`INSERT`没有 的语法`VALUES`，但您需要省略`INTO`关键字。

```
$sql5a = mysql_query("SELECT id FROM categories WHERE category='$category'");
if ( $res5a = @mysql_query($sql5a) ) { // first execute query and store resource in variable
    echo('sql5a selected successfully<br>'); 
} else { 
    echo('Error: sql5a failed<br>'.mysql_error() );
}
$categoryresult = mysql_fetch_array($res5a); // fetch array passing the RESOURCE var, NOT query string
$oldcategoryid = $categoryresult['id'];
$sql6a = "INSERT lookupcategory SET
fbid='$fbid2',
categoryid='$oldcategoryid'";

if ( @mysql_query($sql6a) ) { 
    echo('sql6a inserted successfully<br>'); 
} else { 
    echo('Error: sql6a failed<br>'.mysql_error() );
} 
```

我不知道你从哪里得到`$fbid2`或`$category`从哪里得到，因为它不在这段代码中。

# xslt - 如何基于两个不同的标签合并xml标签？

> ID：11468354
> 
> 赞同：0
> 
> 时间：2012-07-13T10:06:15.840
> 
> 标签：xslt, merge, sum, xslt-1.0

在下面的示例 xml 中，ASNOutDesc 可以有多个 ASNOutDistro，每个 ASNOutDistro 可以有多个 ASNOutCtn，每个 ASNOutCtn 下可以有多个 ASNOutItem，每个 ASNOutCtn 下的所有项目必须合并，并且必须添加 unit_qty。我正在尝试使用下面的 xslt，但它是 merg

**输入 XML：**

```
<ASNoutDesc>
  <ASNOutDesc>
    <to_location>14</to_location>
    <from_location>777</from_location>
    <asn_nbr>Bol1</asn_nbr>
    <container_qty>3</container_qty>
    <shipment_date>2012-04-20T15:37:30.757</shipment_date>
    <ASNOutDistro>
      <distro_nbr>101</distro_nbr>
      <distro_doc_type>A</distro_doc_type>
      <ASNOutCtn>
        <container_id>1</container_id>
        <ASNOutItem>
          <item_id>item-1</item_id>
          <unit_qty>2</unit_qty>
        </ASNOutItem>
        <ASNOutItem>
          <item_id>item-1</item_id>
          <unit_qty>2</unit_qty>
        </ASNOutItem>
      </ASNOutCtn>
    </ASNOutDistro>
    <ASNOutDistro>
      <distro_nbr>102</distro_nbr>
      <distro_doc_type>A</distro_doc_type>
      <ASNOutCtn>
        <container_id>2</container_id>
        <ASNOutItem>
          <item_id>item-1</item_id>
          <unit_qty>2</unit_qty>
        </ASNOutItem>
        <ASNOutItem>
          <item_id>item-2</item_id>
          <unit_qty>2</unit_qty>
        </ASNOutItem>
        <ASNOutItem>
          <item_id>item-2</item_id>
          <unit_qty>2</unit_qty>
        </ASNOutItem>
      </ASNOutCtn>
      <ASNOutCtn>
        <container_id>3</container_id>
        <ASNOutItem>
          <item_id>item-1</item_id>
          <unit_qty>2</unit_qty>
        </ASNOutItem>
        <ASNOutItem>
          <item_id>item-2</item_id>
          <unit_qty>2</unit_qty>
        </ASNOutItem>
      </ASNOutCtn>
    </ASNOutDistro>
  </ASNOutDesc>
</ASNoutDesc> 
```

**所需输出：**

```
<ASNoutDesc>
  <ASNOutDesc>
    <to_location>14</to_location>
    <from_location>777</from_location>
    <asn_nbr>Bol1</asn_nbr>
    <container_qty>3</container_qty>
    <shipment_date>2012-04-20T15:37:30.757</shipment_date>
    <ASNOutDistro>
      <distro_nbr>101</distro_nbr>
      <distro_doc_type>A</distro_doc_type>
      <ASNOutCtn>
        <container_id>1</container_id>
        <ASNOutItem>
          <item_id>item-1</item_id>
          <unit_qty>4</unit_qty>
        </ASNOutItem>
      </ASNOutCtn>
    </ASNOutDistro>
    <ASNOutDistro>
      <distro_nbr>102</distro_nbr>
      <distro_doc_type>A</distro_doc_type>
      <ASNOutCtn>
        <container_id>2</container_id>
        <ASNOutItem>
          <item_id>item-1</item_id>
          <unit_qty>2</unit_qty>
        </ASNOutItem>
        <ASNOutItem>
          <item_id>item-2</item_id>
          <unit_qty>4</unit_qty>
        </ASNOutItem>
      </ASNOutCtn>
      <ASNOutCtn>
        <container_id>3</container_id>
        <ASNOutItem>
          <item_id>item-1</item_id>
          <unit_qty>2</unit_qty>
        </ASNOutItem>
        <ASNOutItem>
          <item_id>item-2</item_id>
          <unit_qty>2</unit_qty>
        </ASNOutItem>
      </ASNOutCtn>
    </ASNOutDistro>
  </ASNOutDesc>
</ASNoutDesc> 
```

如上所示，它必须在每个 ASNOutDistro 下合并每个 ASNOutCtn 中的项目。

**XSLT 我正在使用：**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output omit-xml-declaration="yes" indent="yes"/>
  <xsl:strip-space elements="*"/>
  <xsl:key name="kByI" match="ASNOutItem" use="item_id"/>
  <xsl:template match="node()|@*">
    <xsl:param name="pNewValueQty"/>
    <xsl:copy>
      <xsl:apply-templates select="node()|@*">
        <xsl:with-param name="pNewValueQty" select="$pNewValueQty"/>
      </xsl:apply-templates>
    </xsl:copy>
  </xsl:template>
  <xsl:template match="ASNOutItem[generate-id()=generate-id(key('kByI',item_id)[1])]">
    <xsl:copy>
      <xsl:apply-templates select="node()|@*">
        <xsl:with-param name="pNewValueQty" select="sum(key('kByI',item_id)/unit_qty)"/>
      </xsl:apply-templates>
    </xsl:copy>
  </xsl:template>
  <xsl:template match="ASNOutItem"/>
  <xsl:template match="unit_qty/text()">
    <xsl:param name="pNewValueQty"/>
    <xsl:value-of select="$pNewValueQty"/>
  </xsl:template>
</xsl:stylesheet> 
```

**我得到的输出：**

```
<ASNoutDesc>
  <ASNOutDesc>
    <to_location>14</to_location>
    <from_location>777</from_location>
    <asn_nbr>Bol1</asn_nbr>
    <container_qty>3</container_qty>
    <shipment_date>2012-04-20T15:37:30.757</shipment_date>
    <ASNOutDistro>
      <distro_nbr>101</distro_nbr>
      <distro_doc_type>A</distro_doc_type>
      <ASNOutCtn>
        <container_id>1</container_id>
        <ASNOutItem>
          <item_id>item-1</item_id>
          <unit_qty>8</unit_qty>
        </ASNOutItem>
      </ASNOutCtn>
    </ASNOutDistro>
    <ASNOutDistro>
      <distro_nbr>102</distro_nbr>
      <distro_doc_type>A</distro_doc_type>
      <ASNOutCtn>
        <container_id>2</container_id>
        <ASNOutItem>
          <item_id>item-2</item_id>
          <unit_qty>6</unit_qty>
        </ASNOutItem>
      </ASNOutCtn>
      <ASNOutCtn>
        <container_id>3</container_id>
      </ASNOutCtn>
    </ASNOutDistro>
  </ASNOutDesc>
</ASNoutDesc> 
```

- 我的代码正在合并 xml 中的所有项目。请帮助我获得所需的输出。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T17:56:53.620

您出错的地方是忘记在 ASNOutItem 节点的分组中考虑父节点。您的键定义应在 item_id 和 ASNOutCtn 节点的联合上键入，该节点是 ASNOutItem 的父节点，因为分组不跨越 ASNOutCtn 边界。

这个样式表是你想要的......

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" indent="yes"/>
<xsl:strip-space elements="*"/>

<xsl:key name="kByI" match="ASNOutItem" use="concat(item_id,'+',generate-id(parent::*))"/>

<xsl:template match="@*|node()">
 <xsl:copy>
  <xsl:apply-templates select="@*|node()"/>
 </xsl:copy>
</xsl:template>

<xsl:template match="ASNOutCtn">
 <xsl:copy>
  <xsl:apply-templates select="@*"/>
  <xsl:apply-templates select="node()[not(self::ASNOutItem)]"/>
  <xsl:apply-templates
    select="ASNOutItem[
     generate-id(.) =
     generate-id( key('kByI',concat(item_id,'+',generate-id(parent::*)))[1])]"
    mode="merge"/>
 </xsl:copy>
</xsl:template>

<xsl:template match="ASNOutItem" mode="merge">
 <xsl:copy>
  <xsl:apply-templates select="@*"/>
  <xsl:apply-templates select="node()[not(self::unit_qty)]"/>
  <unit_qty>
    <xsl:value-of select="sum(
      key('kByI',concat(item_id,'+',generate-id(parent::*)))/unit_qty)" />
  </unit_qty>
 </xsl:copy>
</xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-03-03T08:45:53.593

为什么不使用`sum(ASNOutItem/item_id)`?

对不起，如果我问，但在我看来，如果我在一年内查看该代码，将需要大量时间来理解我做了什么以及它在做什么。我宁愿做这样的事情：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
<ASNoutDesc>
    <ASNOutDesc>
        <xsl:copy-of select="*[name() != 'ASNOutDistro']"/>
        <xsl:for-each select="ASNOutDistro">
            <xsl:copy-of select="*[name() != 'ASNOutCtn']"/>
            <xsl:for-each select="ASNOutCtn">
                <ASNOutCtn>
                    <xsl:copy-of select="*[name() != 'ASNOutItem']"/>
                    <ASNOutItem>
                        <xsl:copy-of select="ASNOutItem[1]/*[name() != 'unit_qty']"/>
                        <unit_qty>
                            <xsl:value-of select="sum(ASNOutItem/*/unit_qty)"/>
                        </unit_qty>
                    </ASNOutItem>
                </ASNOutCtn>
            </xsl:for-each>
        </xsl:for-each>
    </ASNOutDesc>
</ASNoutDesc> 
```

# c# - 如何通过 COM 将长数组从 VB6 传递到 C#

> ID：11468355
> 
> 赞同：5
> 
> 时间：2012-07-13T10:06:19.763
> 
> 标签：c#, .net, vb6, interop, com-interop

我需要将一个 int 或 long 数组（没关系）从 VB6 应用程序传递给 C# COM Visible 类。我试过在 C# 中声明接口，如下所示：

```
void Subscribe([MarshalAs(UnmanagedType.SafeArray, SafeArraySubType = VarEnum.VT_I4)]int[] notificationTypes)

void Subscribe(int[] notificationTypes) 
```

但他们俩都提出了一个`Function or interface markes as restricted, or the function uses an Automation type not supported in Visual Basic`。

我应该如何声明 C# 方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T15:47:11.100

如果您感到绝望，请在虚拟 VB6 ActiveX dll 项目中编写签名。然后通过 Visual Studio 或命令行工具生成 .NET Interop 版本的 vb6 组件。然后使用 Reflector 或 dotPeek 将代码拉出互操作程序集。这是很长的路要走，但它确实有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-18T23:24:43.083

9年后我遇到了这个问题。我想出的解决方案是将指针传递给数组的第一个元素，以及上限（VB6 中的 UBound）。然后迭代指向上限的指针并将每个元素放入一个列表中。

在 vb6 端使用

```
 Dim myarray(3) As float
    Dim ptr As integer
    Dim upperbound as integer

    myarray(0) = 0.1
    myarray(1) = 0.2
    myarray(2) = 0.3
    myarray(3) = 0.4

    ptr = VarPtr(myarray(0))
    upperbound = UBound(myarray)

    SetMyFloat(ptr, upperbound) 
```

C# 代码

```
 public float MyFloat {get; set;}

    public unsafe void SetMyFloat(float* ptr, int ubound)
    {
        MyFloat = PointerToFloatArray(ptr, ubound);
    }

    public unsafe float[] PointerToFloatArray(float* ptr, int ubound)
    //this is to deal with not being able to pass an array from vb6 to .NET
    //ptr is a pointer to the first element of the array
    //ubound is the index of the last element of the array
    {
        List<float> li = new List<float>();
        float element;
        for (int i = 0; i <= ubound; i++)
        {
            element = *(ptr + i);
            li.Add(element);
        }
        return li.ToArray();
    } 
```

# .net - 使用表单身份验证的 MVC3 应用程序在其他解决方案中使用 WCF

> ID：11468356
> 
> 赞同：1
> 
> 时间：2012-07-13T10:06:23.207
> 
> 标签：.net, asp.net-mvc-3, wcf, security, forms-authentication

这是我们的场景：

*   我们在解决方案 S1 中有一个 MVC3 应用程序“MVC3ABC”，它使用表单身份验证进行保护（目前用户详细信息仅在 web.config 中用于早期开发，但它们很快就会在 SQL Server 数据库中）。

*   MVC 控制器 C1 调用 WCF 服务 W1，该服务在解决方案 S1 中的单独 ASP.NET Web 项目下具有 .svc 文件。在这种情况下，WCF 服务*不需要*知道登录的特定用户，只需知道它是经过身份验证的用户访问。

*   MVC View V1 托管一个 Silverlight4 应用程序 SLV1，它调用 WCF 服务 W2，该服务在*不同*的解决方案 S2 中的一个单独的 AST.NET Web 项目下具有 .svc 文件。在这种情况下，WCF 服务*确实*需要知道登录的特定用户，因为它会根据登录到 MVC 站点的用户从不同的数据库中获取数据。

所以本质上，我们需要的是，已经通过 MVC 应用程序进行身份验证的用户可以从 MVC 站点访问这两个 WCF 服务，对于 W2 服务，我们需要知道它是哪个用户。对 MVC 站点之外的 WCF 服务的任何访问也需要进行身份验证或不应该工作（不允许匿名访问 WCF 服务）。

有解决这个问题的标准方法吗？有谁知道我可以在其中看到这种事情的任何示例项目？

一些额外的细节 - 我们使用 Visual Studio 2012 RC、.NET 4.5 和 IIS7。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T12:51:16.837

我猜你想要实现的是跨 MVC 应用程序和 WCF 服务共享表单身份验证。你可以这样做:)

这个想法是您必须将 cookie 从 MVC 应用程序共享到 WCF 服务。

以下是您在执行此操作时必须注意的事项。

1.  MVC 和 WCF 服务应该在 web.config 中使用相同的表单和 machineKey 部分。见[这里](http://msdn.microsoft.com/en-us/library/eb0zx8fc.aspx)。意味着 WCF 服务也应该使用表单身份验证，并且它们三个应该共享相同的机器密钥以共享 cookie。

2.  当然，WCF 服务应该在 asp.net 兼容模式下运行。

3.  在调用 WCF 服务时，您应该手动将表单身份验证 cookie 添加到传出消息标头。见[这里](http://zamd.net/2009/03/05/flowing-forms-authentication-cookie-to-wcf/)。

**编辑：**

根据 OP 的评论，我正在更新我的答案。

**当 WCF 服务必须仅由 MVC 使用**而不由其他客户端使用时，上述解决方案似乎很好。但是，如果 WCF 服务还希望被 MVC 项目以外的不同客户端使用，那么客户端将面临艰难的时期，因为他们必须构造 cookie 并附加到请求中（我不确定这是否可能！）。

因此，更优雅的解决方案是使 WCF 服务自包含，这意味着将身份验证/授权机制单独集成到它。一种方法是您可以轻松地将 ASP.NET 成员资格提供程序集成到 WCF 服务。通过这种方式，身份验证将在 WCF 服务端单独进行。其他优点是第三方客户端或其他应用程序可以轻松使用通过代理传递凭据的 WCF 服务。

所以这里有一个[链接](http://msdn.microsoft.com/en-us/library/ms731049.aspx)，说明如何在 WCF 服务中配置 asp.net 成员资格提供程序，

# php - 从字符串中获取数字字符

> ID：11468357
> 
> 赞同：0
> 
> 时间：2012-07-13T10:06:29.770
> 
> 标签：php, string

我有一个字符串（电话号码），例如`+1(234)567-89-01`or `+12345678901`。删除非数字字符的最简单方法是什么？

先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T10:07:25.730

我认为您的意思是*删除*，而不是*逃避*。为此，您可以简单地使用正则表达式：

```
$numbers = preg_replace('/\D/', '', $string); 
```

`\D`匹配所有非数字字符，因此通过将它们替换为空字符串，您将获得一个包含非数字的字符串。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T10:23:45.180

这将在开始时返回带有“+”的数字：

```
$str = "+1(234)567-89-01";

$number = preg_replace('/[^+\d]/', '', $str);

echo $number; 
```

# php - PHP mod_rewire 整个站点，并重写图像 URL？

> ID：11468363
> 
> 赞同：0
> 
> 时间：2012-07-13T10:06:57.227
> 
> 标签：php, mod-rewrite

我几乎已经开发了一个完整的网站，不实现 mod_rewrite 是愚蠢的。我现在想这样做，并做了一个测试页。mod_Rewrite 完美运行，但我遇到了所有图像都链接到新页面 URL 的问题，例如：

```
www.mysite.com/county/Kent.html 
```

从

```
www.mysite.com/sector.php?county=kent 
```

它工作得很好，但是当我在新链接上时，图像的 URL 会更改为此。

```
mysite.com/county/images/widMot.png 
```

好像“图像”文件夹位于实际上不存在的“县”文件夹中。是否有重写规则会忽略此图像链接更改？或者我错过了什么？

编辑：根据要求：

```
...
RewriteEngine On
RewriteRule ^county/([^/]*)\.html$ /sector.php?county=$1 [L]
... 
```

编辑：答案发布的解决方案非常好，解决了图像问题，但后来我遇到了一个问题，即我的 css 文件被放在 /images/ 目录之后。Ofc 一个简单的修复方法就是将它们放在那里，但没有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T10:10:33.573

请查看`<base>`HTML 标记。

[http://www.w3schools.com/tags/tag_base.asp](http://www.w3schools.com/tags/tag_base.asp)

它允许您定义站点的基本 URL，之后，任何构建的链接`/images/someimage.png`都会将您定向到根目录的`images/`.

*编辑：* 更具体地说，所有以正斜杠`/`开头的相对 URL 都将在域名之后立即开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T10:10:28.287

尝试类似：

```
<IfModule mod_rewrite.c>
   RewriteEngine on
   RewriteCond %{REQUEST_FILENAME} !-f
   RewriteCond %{REQUEST_FILENAME} !-d
   RewriteRule YOUR REWRITE RULE
</IfModule> 
```

应该将所有内容传递给您的重写规则，除非请求的 URL 是服务器上的实际文件。

# xmpp - 使用 XMPP 在聊天应用程序中添加联系人。

> ID：11468366
> 
> 赞同：-2
> 
> 时间：2012-07-13T10:07:11.107
> 
> 标签：xmpp, chat

如何使用 XMPP 使用 Open Fire 作为服务器在我的聊天应用程序中添加联系人？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T15:44:14.260

使用[Smack api](http://www.igniterealtime.org/projects/smack/)。

```
Connection conn = new Connection();
conn.getRoster(); 
```

# python - interp2(X, Y, Z, XI, YI) 从 Matlab 到 Python

> ID：11468367
> 
> 赞同：5
> 
> 时间：2012-07-13T10:07:17.143
> 
> 标签：python, matlab, scipy, interpolation

我需要这个[Matlab 函数](http://www.mathworks.it/help/techdoc/ref/interp2.html)的精确 Python 等效函数来插值矩阵。

在 Matlab 中，我有：

```
interp2(X, Y, Z, XI, YI) 
```

在 Scipy 中，我有：

```
interp2d(X, Y, Z). 
```

在 Scipy XI 和 YI 中丢失了。我该如何解决这个问题？我在 Matlab 中使用所有参数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T10:54:06.800

正确的语法是`ip = interp2d(x, y, z); zi = ip(xi, yi)`.

另外，`interp2d`不完全一样`interp2`。[RectBivariateSpline](http://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.RectBivariateSpline.html)更接近。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-07-09T19:53:10.037

对于 interp2(v,xq,yq)

```
ip = scipy.interpolate.griddata((y.ravel(),x.ravel()),distorted.ravel(),(yq.ravel(),xq.ravel())) 
```

请注意，返回的结果需要调整大小。即 ( `ip.resize(img.shape)`)

这里`y,x`是

```
x,y = np.meshgrid(np.arange(w),np.arange(h)) 
```

其中`w,h`分别是图像的宽度和高度。

有关更多信息，您可以阅读 griddata 文档。 [https://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.griddata.html](https://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.griddata.html)

> 对于 interp2(X,Y,V,Xq,Yq)，只需替换`x,y`为`X,Y`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-08T14:40:41.453

我遇到了同样的问题，并发现`scipy.ndimage.map_coordinates`它与`Vq = interp2(V,Xq,Yq)`. 请阅读这些命令的文档以找出适合您情况的解决方案。

试试这个 Matlab 的`Vq = interp2(V,Xq,Yq)`：

```
Vq = scipy.ndimage.map_coordinates(V, [Xq.ravel(), Yq.ravel()], order=3, mode='nearest').reshape(V.shape) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-01T22:30:52.357

Interp2d 输出另一个函数，允许您调用 Xi 和 Yi。但是，当心！它将它们评估为矩阵，而不是标量。您必须使用 for 循环来分别评估 Xi 和 Yi 的每对值，并获得与 MATLAB 相同的行为。

```
F=interpolate.interp2d(X,Y,Z)
Zi=[]
for i, j in zip(Xi,Yi)
   Zi.append(F(i,j)) 
```

# javascript - 对于 HTML、CSS 和 JavaScript 开发的理想 Sublime Text 2 配置，您有什么建议？

> ID：11468368
> 
> 赞同：11
> 
> 时间：2012-07-13T10:07:18.767
> 
> 标签：javascript, html, css, configuration, sublimetext2

Sublime Text 2 从一开始就不是一个功能齐全的编辑器，但似乎在幕后拥有巨大的力量。虽然网上有很多博客文章为您提供乍一看似乎都很有用的软件包列表，但您在编码过程中会发现，您每天只使用少数必要的插件，而其余的一些甚至产生性能问题。

在 Sublime Text 2 中，几乎所有的配置都是通过创建和编辑配置文件来完成的。也许你们中的一些人已经设置了用于 HTML、CSS 和 JavaScript 开发的编辑器，这样就可以共享配置文件和关于安装什么（以及要阅读哪些文档）的分步说明。所以我的问题是：

您如何自定义 Sublime Text 2 以使用 HTML、CSS 和 JavaScript 进行编码以提高您的工作效率？

子问题：

*   您认为哪些特定设置更改必不可少（例如，选项卡未开箱即用）？
*   您认为哪些软件包必不可少？
*   您如何设置验证、实时语法检查和代码提示等功能？
*   你如何在两台机器上同步编辑器（设置和包）（使用 Dropbox 或类似的东西）？

随意添加更多子问题。谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-13T11:57:33.830

我看不出这个问题怎么会有一个单一的答案，因为它在很大程度上取决于你当时在做什么。

就个人而言，我喜欢 Sublime，因为它的灵活性和跨平台支持。它对于许多任务来说已经足够了，无需任何更改。虽然我发现使用英国键盘，但您必须更改默认组合键才能打开和关闭控制台 - ctrl-\ 对我有用， ctrl-` 是死键组合。

不知道你对标签的意思是什么？是因为您打开了无干扰（全屏）设置吗？这让我很困惑，我更喜欢它。否则，您肯定会默认获得标签。我喜欢分屏功能。

我最喜欢的事情是你可以关闭 Sublime 而无需保存东西！我倾向于将 3 或 4 个未保存的“文档”作为暂存器打开——我永远不必担心丢失数据。

说了这么多，我想补充几点：

*   [Sublime Linter](https://github.com/SublimeLinter/SublimeLinter) - 包括 JS 和 CSS 在内的多种语言的 linting。虽然默认设置需要稍微调整。
*   [支架荧光笔](https://github.com/facelessuser/BracketHighlighter)
*   [ChangeTracker](https://github.com/alek-sys/ChangeTracker) - 查看文件的哪些部分已更改
*   一个 shell 实用程序（有几个可用的）
*   [Sublime v8](https://github.com/akira-cn/sublime-v8) & [Node](https://github.com/tanepiper/SublimeText-Nodejs) - 直接访问运行和 lint 代码
*   SFTP 用于直接远程访问文件
*   一些 Markdown 插件 - 更好地使用 Markdown
*   [DocBlockr](https://github.com/spadgos/sublime-jsdocs) - 文档块的助手
*   一个差异插件
*   自动备份
*   咖啡脚本

所有这些（以及更多）都可以使用[Sublime 包安装和管理](http://wbond.net/sublime_packages/community)

我还有一些用于 Jade 和 Apache conf 文件之类的 TextMate 捆绑插件。

对于您的子问题：

您认为哪些特定设置更改必不可少（例如，选项卡未开箱即用）？

> 如上所述更改控制台开关。更改 JS linting 的默认设置以允许更现代的样式。

您认为哪些软件包必不可少？

> 如上所示

您如何设置验证、实时语法检查和代码提示等功能？

> 只需安装插件！JS linting 对我来说有点过于激进，请参阅帖子末尾的设置。

你如何将编辑器（设置和包）同步到机器上（使用 Dropbox 或类似的东西）？

> 我不。我真的不需要这个。我将它安装在两台机器上，一台是 Windows，一台是 Linux。每个都有稍微不同的用途，所以我不担心同步，如果我想要的话，我只是复制设置。Dropbox 同步会很容易，但如果那是你想要的。只需`link`将 Sublime 设置文件夹放入 Dropbox 文件夹即可。不过，可能并不总是跨平台工作。

* * *

以下是更改后的 Sublime Linter 设置：

```
"sublimelinter_fill_outlines": true,
"jshint_options":
{
    "evil": true,
    "regexdash": true,
    "browser": true,
    "wsh": true,
    "trailing": false,
    "sub": true,
    "latedef": true,
    "newcap": true,
    "regexp": true,
    "laxcomma": true
}, 
```

这是控制台开关的用户键盘映射更改：

```
[
    { "keys": ["ctrl+\\"], "command": "show_panel", "args": {"panel": "console", "toggle": true} }
] 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-13T10:13:06.460

添加禅编码。（现在叫艾米特）

它使您有机会以非常快速且结构清晰的方式编写 HTML 代码。

[http://code.google.com/p/zen-coding/](http://code.google.com/p/zen-coding/)

在这里，您可以获得有关它可以做什么以及下载它的链接的更多信息。

它使用短标签来编写 HTML 结构，因此您无需自己编写每个元素。

例如（链接中的示例）：

```
div#page>div.logo+ul#navigation>li*5>a 
```

扩展为：

```
<div id="page">
        <div class="logo"></div>
        <ul id="navigation">
                <li><a href=""></a></li>
                <li><a href=""></a></li>
                <li><a href=""></a></li>
                <li><a href=""></a></li>
                <li><a href=""></a></li>
        </ul>
</div> 
```

# javascript - 单击事件和 MouseOut 事件在 chrome 中不起作用

> ID：11468376
> 
> 赞同：2
> 
> 时间：2012-07-13T10:07:36.083
> 
> 标签：javascript, events, cross-browser, onclick, cross-platform

无法进入 Chrome 和 Firefox 中的 onclick 和 onmouseout/over 事件的功能。任何不在 Chrome 和 FF 中工作的原因都可以解决这个问题。这些在 IE9 和 Opera 中运行良好。

html页面中的代码如下所示：

```
 <script language="JavaScript" for="SmartGridCell" event="onclick()">
    sg_CellClick(event.srcElement);
</script>

<script language="JavaScript" for="SmartGridCell" event="onmouseover()">
    sg_MouseOverCell(event.srcElement);
</script> 
```

更多点击事件...

```
 <script language="javascript" for="optSet" event="onclick()">
    mc_SelectAnElement(this, document.getElementsByName('optSet'));
</script>

<script language="javascript" for="answerChoice" event="onclick()">
    mc_SelectAnElement(this, document.getElementsByName('answerChoice'));
</script> 
```

这是我到目前为止所做的，但我无法在 Chrome 中触发事件......

```
 <script language="JavaScript">

  var s1=document.getElementsByName('optSet');

  for (var i=0;i<s1.length;i++)
  {
    s1[i].addEventListener("click",mc_SelectAnElement(this, document.getElementsByName('answerChoice')),false);
  }

</script> 
```

也试过这个，这个片段让我进入函数，但选择的值永远不会持续......

```
 if (document.addEventListener) 
{
    document.addEventListener("click",function (e){
    var srcElement= e.target;
    var tagName= srcElement.tagName;
    if(tagName="optSet")
    {
        mc_SelectAnElement(srcElement, document.getElementsByName('optSet'));
    }
    //mc_SelectAnElement(this, document.getElementsByName('optSet'));
    },true);
} 
```

谢谢-

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T10:32:32.123

在现代 JavaScript 中，它会是这样的：

```
if (document.addEventListener) {
    document.addEventListener('click', function (e) {
        var el = e.target;
        var id = el.id;

        // the "for" attribute refers to an ID
        if (id == 'SmartGridCell' || id == 'SmartGridHeaderCell') {
            sg_CellClick(el);
        }
    }, true);

    /* repeat the same for "mouseover" and "mouseout" */
} 
```

您也可以保留旧脚本，它们不会发生冲突。

[为什么这在 IE 中有效](http://msdn.microsoft.com/en-us/library/ie/ms533746%28v=vs.85%29.aspx)——因为他们在 20 年前发明了自己丑陋的 KnockoutJS。它当然是非标准的（DOM 2 表示`Reserved for future use`and`for`属性`event`）。

# keyboard - Android：无法从键盘输入文本

> ID：11468377
> 
> 赞同：4
> 
> 时间：2012-07-13T10:07:36.243
> 
> 标签：keyboard, android-4.0-ice-cream-sandwich

当我的 android sdk 更新到最新版本时，我遇到的问题是：我无法使用电脑键盘在 Android Emulator 中输入文本，也无法使用 Android Emulator 键盘（屏幕旁边的键盘）。

如果我想输入一些文本，我必须使用这个：单击到我想输入的文本字段。它将使用虚拟键盘（作为真正的手机）进入屏幕，然后单击我想要的字符。

这让我很恼火，因为在调试应用程序时让我变慢了。请帮助我，如何使用键盘直接输入。

谢谢 ：）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-16T05:00:24.637

将“键盘支持”添加到您的模拟器硬件：

*   在 Eclipse 上，转到 Window > AVD Manager
*   选择您的模拟器 > 编辑
*   单击“硬件”部分中的“新建”按钮
*   选择“键盘支持”并将值更改为“是”
*   最后，单击“编辑 AVD”按钮。

然后，您可以从键盘向模拟器输入文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T23:02:36.627

仅供参考 - 自从我升级到 sdk v14 后，我在模拟器上遇到了设置问题。Leap 的解决方案确实有效，但您可能需要多次启动和停止模拟器*，*然后这些设置才会生效。不知道为什么会这样...

# java - 如何从另一个 GUI 访问元素？

> ID：11468378
> 
> 赞同：0
> 
> 时间：2012-07-13T10:07:38.133
> 
> 标签：java, swing, user-interface

首先我有一个 GUI (gui1)，当我按下一个按钮时，会创建一个不同的 GUI (gui2)。我的问题是：如何使用 gui1 中的方法访问 gui2 中的元素？

示例：当我按下 gui1 中的按钮时，我想要的 `QuesHandText.setText(myVector[0]);` `QuesHandText`是 gui1 中的一个`JTextField`和 gui2中`myVector[0]`的一个 var。结果错误消息：线程“AWT-EventQueue-0”中的异常 java.lang.NullPointerException

当我从 Gui2 按 Ok 时，我想为 Gui1 上的 JTextField 设置文本 [http://img72.imageshack.us/img72/2822/36185233.png](http://img72.imageshack.us/img72/2822/36185233.png)

```
 //imports
  public class Gui extends JFrame{

  public JButton Simulate, Particular, Start, HandSelection;
  public JTextField QuesHandText, FlopTurnRiverText, RezultatText; 
  public Gui g;

  public Gui()
    {
      QuesHandText = new JTextField(4);
      //instruct
      ClassParticular handler1 = new ClassParticular();
      Particular.addActionListener(handler1);
    }

  public Gui(String t)
    {

      //instruct
      myVector[0]="some_string";
      myVector[1]="some_string2";
    }

  public class ClassParticular implements ActionListener{

    public void actionPerformed(ActionEvent event){

        //instruc

        HandSelection hs = new HandSelection();
        HandSelection.addActionListener(hs);

        StartClass hndlr = new StartClass();
        Start.addActionListener(hndlr);
        add(HandSelection);
        add(Start);

    }
}

   public class HandSelection implements ActionListener{
    public void actionPerformed(ActionEvent e){
        g = new Gui("Hand selection");
        g.setVisible(true);
        g.setSize(1135,535);
        g.setDefaultCloseOperation(HIDE_ON_CLOSE);
        g.setResizable(false);

    }
}

   public class StartClass implements ActionListener{
    public void actionPerformed(ActionEvent event){

        QuesHandText.setText(myVector[0]); // THE PROBLEM IS HERE, I KNOW IT !!

    }
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T11:05:55.053

您有两个`Gui`.

```
public Gui() 
```

和

```
public Gui(String t) 
```

您已经在第一个中初始化`QuesHandText`，但在第二个中没有。

如果你使用第二个来初始化`Gui`你应该得到一个`NullPointerException`.

我认为你应该在构造函数中这样做：

*[按照 Kleopetra 的建议编辑]*

```
public Gui(){
   this("");
}

public Gui(String t){
   //instruct (I am not sure what it means)

   quesHandText = new JTextField(4);
   classParticular handler1 = new ClassParticular();
   particular.addActionListener(handler1);

   myVector = new String[2]; // or some other size you need.
   myVector[0]="some_string";
   myVector[1]="some_string2";
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T10:54:04.803

1.你的问题是

```
public class Gui extends Jframe{ 
```

那应该是

```
public class Gui extends JFrame{ 
```

2.另一个问题是

```
public JButton Simulate, Particular, Start, HandSelection;
public JTextField QuesHandText, FlopTurnRiverText, RezultatText; 
public Gui g; 
```

*   删除`JButton`并且`JTextField`因为它们是`JComponents and API`名称

*   或声明`JButton`并`JTextField`正确

.

```
public JButton myButton, ...
public JTextField myTextField, ... 
```

3.不要扩展`JFrame`创建为局部变量

4.don't re_create a new GUI from `ActionPerformed`use`CardLayout`

# javascript - IE-7 中的 XMLHttpRequest

> ID：11468379
> 
> 赞同：2
> 
> 时间：2012-07-13T10:07:40.090
> 
> 标签：javascript, xml, internet-explorer-7, xmlhttprequest

我正在创建 XMLHttpRequest 如下：

```
function checkDependencyFormFilledStatus(appName,formName){
    var xmlhttp;
    xmlhttp=new XMLHttpRequest();
    xmlhttp.open("GET","checkFormDependency.action formName="+formName+"&applicationName="+appName,false);
    xmlhttp.send();
    var dependentFormEmptyStatus = Ext.JSON.decode(xmlhttp.responseText);
    alert(xmlhttp.responseText);
    return dependentFormEmptyStatus;
} 
```

对象返回的响应取决于操作类使用的数据库。

这在 Firefox 10.0 中运行良好。

但是对于 IE7，它只在第一次返回正确的响应。对于其余的函数调用，它返回相同的响应（无论我们在数据库中进行什么更改）。仅当我关闭选项卡并打开它时（甚至在重新加载页面时），它才会更新其响应。

如何让它在 IE 7 中工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T10:11:38.770

听起来响应正在被缓存。

在 URI 的末尾添加一个伪随机字符串（例如时间戳）以缓存突发。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T10:45:15.230

您只是在使用 IE7 时遇到了缓存问题，因为它在创建 XMLHttpRequest() 并将其存储在内存中之后对其进行了缓存。即使有后续`xmlhttp=new XMLHttpRequest();`变量，也不会得到任何赋值，因为**它已经有一个实例**（从你的第一个`xmlhttp=new XMLHttpRequest();`）。

您需要做的是在每次使用后使您的 XMLHttpRequest 请求*无效*并*销毁。*

您首先像这样创建您的 XMLHttpRequest（对于 msie 7）：

```
function createXMLHttpRequest(){
    var xmlHttp = null;
    if(typeof XMLHttpRequest != "undefined"){
        xmlHttp = new XMLHttpRequest();
    }
    else if(typeof window.ActiveXObject != "undefined"){
        try {
            xmlHttp = new ActiveXObject("Msxml2.XMLHTTP.4.0");
        }
        catch(e){
            try {
                xmlHttp = new ActiveXObject("MSXML2.XMLHTTP");
            }
            catch(e){
                try {
                    xmlHttp = new ActiveXObject("Microsoft.XMLHTTP");
                }
                catch(e){
                    xmlHttp = null;
                }
            }
        }
    }
    return xmlHttp;
} 
```

所以每次在您要使用的功能中创建它。

```
function checkDependencyFormFilledStatus(appName,formName){
    if(xmlHttp_global){
        xmlHttp_global.abort(); // abort the current request if there's one 
    }
    // Create the object each time a call is about to be made
    xmlHttp_global = createXMLHttpRequest();
    if(xmlHttp_global){
    xmlHttp_global.onreadystatechange = myCallbackFunction; // make you callback thing here
    xmlHttp_global.open("GET","checkFormDependency.action formName="+formName+"&applicationName="+appName,false);
    xmlHttp_global.send(null);
    }
} 
```

在您的回调（“onreadystatechange”函数）中，您在使用它后将其**删除**

```
function myCallbackFunction()
{
 if(xmlHttp_global && xmlHttp_global.readyState == 4){
 //do your thing here and ... or nothing 

var dependentFormEmptyStatus = Ext.JSON.decode(xmlhttp.responseText);
    alert(xmlhttp.responseText); // like this for example?

  xmlHttp_global = null; //delete your XMLHTTPRequest
 }

} 
```

因此 IE 7 每次都会找到一个空引用，并且每次使用都需要重新创建它。

如果您不想每次都创建和删除它，您只需在 XMLHTTPRequest 中使用一些 HTTP-Headers

```
xmlHttp_global.setRequestHeader("If-Modified-Since", "Thu, 1 Jan 1970 00:00:00 GMT");
xmlHttp_global.setRequestHeader("Cache-Control", "no-cache"); 
```

喜欢[这里的建议](http://ajaxian.com/archives/ajax-ie-caching-issue)

另一种选择包括：

*   在 GET 方法上使用 POST 方法

    xmlHttp_global.open("POST","checkFormDependency.action",false); xmlHttp_global.setRequestHeader("内容类型","application/x-www-form-urlencoded"); // 或其他内容类型，由您决定 xmlHttp_global.send("formName="+formName+"&applicationName="+appName);

*   在查询字符串中使用“虚拟”变量来爆出 IE(7,6) 的缓存器

    xmlHttp_global.open("GET","checkFormDependency.action formName="+formName+"&applicationName="+appName+"randomVar="+Math.Random(),false);

链接

*   [IE 7 和 6 中的 XMLHTTPRequest 缓存](http://robertnyman.com/2007/04/04/weird-xmlhttprequest-error-in-ie-just-one-call-allowed/)

# tsql - 为什么列名“源”在 SSMS 和 VS T-SQL 编辑器中呈现灰色？

> ID：11468388
> 
> 赞同：10
> 
> 时间：2012-07-13T10:08:11.313
> 
> 标签：tsql, ssms, pretty-print, visual-studio-2012

我有以下简单的 tSQL 来创建表

```
CREATE TABLE NewsArticles
(id INT NOT NULL IDENTITY(1, 1) PRIMARY KEY,
lastCrawl DATETIME NULL,
snippet NVARCHAR(2083) NULL,
source NVARCHAR(2083) NULL,
title NVARCHAR(2083) NULL,
url NVARCHAR(2083) NULL) 
```

在 Visual Studio 2012 和 SQL Server 2012 Management Studio 中，“源”呈现为灰色，而其他列名称在 SSMS 中呈现为绿色，在 VS 中呈现为黑色。为什么？[在SQL 保留关键字列表中，](http://msdn.microsoft.com/en-us/library/ms189822(v=sql.105)) “source”一词似乎不是保留字

![在此处输入图像描述](../Images/4e2f38332264082f051dab7055a9f649.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-13T10:28:13.753

它是 中使用的关键字[`MERGE`](http://technet.microsoft.com/en-us/library/bb510625.aspx)。即`WHEN NOT MATCHED BY SOURCE`。

该词`MATCHED`也表现出相同的行为，因为它在编辑器中以灰色突出显示。

这些都不是[**保留**关键字](https://docs.microsoft.com/en-us/sql/t-sql/language-elements/reserved-keywords-transact-sql)，因此如果用作标识符，它们不需要分隔（除非您发现突出显示的语法会分散注意力）。

# ios - 提交 Open Graph 操作：不真实的 Open Graph 故事

> ID：11468393
> 
> 赞同：0
> 
> 时间：2012-07-13T10:08:21.107
> 
> 标签：ios, facebook-opengraph

我正在尝试提交带有对象（'post'）的 Open Graph 操作（'share'），并被要求在测试用户的时间轴上提供已发布故事的屏幕截图。

执行操作时，这将发布到时间轴： ![时间线活动视图](../Images/886e42773e3a6596e602a732d5898364.png)

当点击时间（“2 分钟前”等）时，这个视图：

![活动视图](../Images/a9dfbb0d863853e7d5229d0aae0f5c3b.png)

提交团队告诉我，这不是一个真实的开放图表故事，除了将我推荐到这里之外，他们不愿意提供帮助。所以我不知道他们所说的“不真实”到底是什么意思，或者到底有什么问题。

任何人都可以对此有所了解吗？

（标记 iOS，因为我正在从 iOS 应用程序执行操作 - 但同样的事情通过 JS 发生 - 但我需要使用非 fb 标记）

非常感谢，

乔恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T11:35:11.553

我认为这里的问题是 Facebook 已经使用“共享”动词来表示特定事物，因此它被禁止作为开放图动词。也许你可以想出一个不同的动词？您是在 Facebook 上分享它还是只在您的应用范围内分享？如果您通过 API 或对话框分享到 Facebook，那么 Facebook 将自动创建分享故事。

# php - 从选择框Jquery中获取最大值，最小值

> ID：11468399
> 
> 赞同：0
> 
> 时间：2012-07-13T10:08:52.557
> 
> 标签：php, jquery-ui, jquery-ui-slider

嘿朋友们。我从选择框（html）中获取最大值和最小值时遇到问题。我想使用 jquery 或 javascript 从选择框中获取 MAX AND MIN 值。

这是标记，简单的范围滑块。

```
$('#slider').slider({
        range: true,
        min: 0,//HERE I WANT TO GET VALUES
        max: 40,
        step: 10, // Use this determine the amount of each interval
        values: [ 20, 40 ], // The default range
        slide: function( event, ui ) {
          // for input text box
          $( "#amount" ).val( ui.values[ 0 ] + " - " + ui.values[ 1 ] );
          // Display and selected the min Price
          $( "#my_min" ).val(ui.values[ 0 ]);
          // Display and selected the max Price 
          $( "#my_max" ).val(ui.values[ 1 ]); 
    }
}); 
```

我想从选择框中获取它们，选择框将由 PHP 动态填充。这是代码：

```
<select id="my_min" class="price_range">
<?php //dynamicly filled options 

         while($row=mysql_fetch_array($query))
            {echo "<option>".$row['values']."</option>";}

?>
</select> 
```

感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T10:17:37.030

你的问题模棱两可。两种解读方式：

**1.你想让javascript知道选择框的最小值和最大值。**

您可以使用：

```
 var options = document.getElementById('yourselectbox').childNodes;
 var min = 999999999;
 var max = 0;
 for(var i = 0; i < options.length; i++) {
     if(options[i].value > max) max = options[i].value;
     if(options[i].value < min) min = options[i].value;
 } 
```

**2\. 你希望服务器知道 javascripts 的最大值和最小值。**

DOM 由服务器构建，即它构建 HTML。HTML 包括定义最小值和最大值的 javascript。当通过 POST 将数据发送回服务器时，只会发送 SET 值。通常，最小值和最大值对服务器无关紧要。如果要发送最小值和最大值，则必须创建包含这些值的隐藏输入字段。然而，你为什么要？您定义了最小值和最大值，不是吗？

- 编辑 -

```
var options = document.getElementById('yourselectbox').childNodes;
var min = 999999999;
var max = 0;
for(var i = 0; i < options.length; i++) {
    if(options[i].value > max) max = options[i].value;
    if(options[i].value < min) min = options[i].value;
}
$('#slider').slider({
        range: true,
        min: min,
        max: max,
        step: 10, // Use this determine the amount of each interval
        values: [ 20, 40 ], // The default range
        slide: function( event, ui ) {
          // for input text box
          $( "#amount" ).val( ui.values[ 0 ] + " - " + ui.values[ 1 ] );
          // Display and selected the min Price
          $( "#my_min" ).val(ui.values[ 0 ]);
          // Display and selected the max Price 
          $( "#my_max" ).val(ui.values[ 1 ]); 
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T10:56:45.077

根据 $row["values"] 格式，您可以像这样获得最大值和最小值，首先将所有选项文本放入一个数组中，然后使用**parseInt()**作为 Int 传递，然后执行

```
OptionsArray.maximum = function(ArrayParameter){
 return Math.max.apply( Math, ArrayParameter);
};

OptionsArray.minimum = function(ArrayParameter){
 return Math.min.apply( Math, ArrayParameter);
};

console.log('Maximum is '+OptionsArray.maximum);
console.log('Minimum is '+OptionsArray.minimum); 
```

希望它有所帮助

# javascript - 用 EaselJS 理解动画/物理/数学实现

> ID：11468400
> 
> 赞同：2
> 
> 时间：2012-07-13T10:08:57.393
> 
> 标签：javascript, animation, physics, game-physics, easeljs

这部分是 EaselJS 问题，部分是物理/动画编程问题。

我正在尝试通过研究 EaselJS zip 文件中包含的示例来学习 EaselJS。现在，我正在查看 SimpleTransform 示例（http://bit.ly/LebvtV），其中机器人旋转并淡入背景并向前景扩展。我觉得这个效果真的很酷，并且想学习如何实现它。但是，当我来到这组代码时，我迷失了：

```
function tick() {
angle += 0.025;
var value = (Math.sin(angle) * 360);
bmp.setTransform (bmp.x , bmp.y , bmp.scaleX , bmp.scaleY , value/2 , bmp.skewX, bmp.skewY , bmp.regX , bmp.regY );
bmp.scaleX = bmp.scaleY = ((value)/360) + 0.25;
stage.update();
} 
```

（对于那些不熟悉 EaselJS 的人，tick() 是一个函数，它指示每个刻度上的动作，其间隔由 setFPS 设置。因此，如果我将 FPS 设置为 20，那么 tick() 将执行其语句 20 次一秒钟。我相信。这里的*bmp*是一个指向机器人图像的 Bitmap 对象。）

我从来不是数学方面的巫师，但我确实了解基础知识。我可以看到它`angle += 0.025;`用于增加*角度*变量，以便传递给*setTransform*的值可以随时间变化。但是，我不明白为什么使用 a) 0.025。b) **(Math.sin(angle) * 360)**和**((value)/360) + 0.25**是什么意思，以及 c) 为什么*value*不只是传递给*setTransform*，而是除以 2 ( *value/2* )。

我知道在这里解释这一点可能是一个挑战，但感谢任何帮助。事实上，如果有人认为我是菜鸟并且需要先学习一些物理学，如果有人能指出我的资源（书/网址）供我参考，我将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T12:01:36.863

我能理解你为什么感到困惑。代码效率不高，这使得弄清楚发生了什么变得更加困难。但这里是它的要点：

a)`0.025`被使用是因为它大约是 π/125。对于 25FPS 的 Ticker 速度，这意味着角度值将从 0 开始并在大约 5 秒内达到 π。使用 π 是因为 Math.sin 使用弧度，而不是度数（π 弧度 == 180 度）

b)`Math.sin(angle)`将基本上从 0 开始，增加直到达到 1，减少直到达到 -1，然后再增加回 0——在 10 秒的时间内以[正弦节奏](http://www.trentu.ca/org/trentradio/audiosoup/as_cfrc040131/mm/sine-cosine-animation1.gif)进行。

`(Math.sin(angle) * 360)`具有与 相同的行为`Math.sin(angle)`，只是范围为 -360 到 360。

`((value)/360) + 0.25)`具有与 相同的行为`Math.sin(angle)`，只是范围为 -0.75 到 1.25。

c)`value/2`在那里，机器人只旋转 180 度而不是 360 度。我知道你在想什么——为什么乘以 360 只在一行之后除以 2？好吧，真的没有理由。

这是一个更清晰的刻度版本：

```
 function tick() {
        angle += Math.PI/125;
        var sineValue = Math.sin(angle);

        bmp.rotation = sineValue * 180;
        bmp.scaleX = bmp.scaleY = sineValue + 0.25;

        stage.update();
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T11:54:31.643

b) Math.sin(angle)*360 似乎是度数和弧度之间的转换。

```
Math.sin( x ) always evaluates to -1>=x>=1, 
```

因此

```
Math.sin( angle ) is  also always -1>=angle>=1 
```

（我们只是替换了 x），并且

```
var value = Math.sin( angle ) * 360 is always -360>=value>=360. 
```

（在旋转度数的上下文中，因此向左旋转一整圈或向右旋转一整圈）。

我们可以看到setTransform函数存在如下：

```
p.setTransform = function(x, y, scaleX, scaleY, rotation, skewX, skewY, regX, regY) {} 
```

显然，我们可以看到价值和角度之间存在直接联系。我们进一步看到的是，transform 和 scaleX 都再次取决于值。我们可以得出这样的结论，即每个刻度都会有 - 经过一些计算 - 变化的变换和 scaleX。

因此，当变量“value”作为参数传递时，这意味着我们希望旋转“this”，就像 value 告诉我们的一样多 (-360>=x>=360)。也就是说，/2 和 0.025 就是这样配置的。

希望这会有所帮助:-)

# android - Gingerbread 中的 Google Play 应用操作栏

> ID：11468402
> 
> 赞同：1
> 
> 时间：2012-07-13T10:09:00.847
> 
> 标签：android, android-3.0-honeycomb, android-actionbar, android-2.3-gingerbread

尽管从 Honeycomb 开始支持 Action Bar，但 Google Play 应用程序如何在 GingerBread 中拥有 ActionBar。

# android - 片段、方向改变和片段后栈

> ID：11468403
> 
> 赞同：3
> 
> 时间：2012-07-13T10:09:04.153
> 
> 标签：android, android-fragments, android-orientation, back-stack

我目前有一个由 ContentPane 和 ActionBarPane 组成的布局，每个都是`Fragment`.

每个 ContentPane 都`Fragment`使用 Factory 方法来实例化它自己的 ActionBarPane `Fragment`，这导致复杂`ActionBar`的一些非常简单和快速的开发。

```
public void setFragment(Fragment fragment, String fragmentName) {
    transaction = getSupportFragmentManager().beginTransaction();
    transaction.add(R.id.dualPaneActionBar, fragment.getActionBar(this));
    transaction.addToBackStack(null);
    transaction.commit();

    transaction = getSupportFragmentManager().beginTransaction();
    transaction.add(R.id.dualPane, fragment);
    transaction.addToBackStack(fragmentName);
    transaction.commit();
} 
```

虽然这工作得非常好，但我遇到了一个关于在方向更改后遍历 backstack 的错误。

我的“后退”实现如下所示：

```
public void goBack() {
    if(getSupportFragmentManager().getBackStackEntryCount() > 2){
        getSupportFragmentManager().popBackStackImmediate();
        getSupportFragmentManager().popBackStackImmediate();            
    } else {
        // Actually Exit
    }
} 
```

其中，`onBack()`剥离了 ContentPane 和 ActionBar。

**问题：**当您达到`Fragment Backstack`4 个或更多（2 个 ContentPanes 及其 ActionBars）并更改方向**时** `goBack()`，第二个 ActionBar 仍然存在（第 3 个`Fragment`在 中`Backstack`）。

如预期的那样，如果没有方向更改，您最终会显示正确的 ActionBar ( `Fragment`1)。

记录显示，`onBack()`从 4`Fragment`秒开始`Backstack`，每个“pop”都被成功调用，最终只剩下 2 个`Fragments`（原始的 ContentPane 和它的 ActionBar）。

向前和向后导航正确使用原始的 ActionBar 而不是弹出的那个。

有没有人知道发生在方向变化上的附加片段的过程以及为什么这会导致这种奇怪的行为？

**编辑**

```
for(int i =0; i < getSupportFragmentManager().getBackStackEntryCount(); i++) {
    Log.w("DualPaneActivity", getSupportFragmentManager().getBackStackEntryAt(i).getName());    
}

getSupportFragmentManager().popBackStack();
getSupportFragmentManager().popBackStack();
getSupportFragmentManager().executePendingTransactions();

for(int i =0; i < getSupportFragmentManager().getBackStackEntryCount(); i++) {
    Log.w("DualPaneActivity", getSupportFragmentManager().getBackStackEntryAt(i).getName());    
} 
```

提供与以下内容同义的输出：

```
Fragment1_actionbar, 
Fragment1, 
Fragment2_actionbar, 
Fragment2,

Fragment1_actionbar, 
Fragment1, 
```

当出现正常行为以及出现不正确行为时，此输出是相同的......

# r - 通过循环运行正常且有效的代码不起作用

> ID：11468407
> 
> 赞同：0
> 
> 时间：2012-07-13T10:09:14.527
> 
> 标签：r, regex, loops

从字符串：

```
"((VBD)(((JJ))(CC)((RB)(JJ)))((IN)((DT)(JJ)(NNP)(NNPS))))" 
```

我需要以下内容：

```
"JJ", "RBJJ", "DTJJNNPNNPS", "JJCCRBJJ", "INDTJJNNPNNPS" "VBDJJCCRBJJINDTJJNNPNNPS" 
```

（这是我之前对 SO 的查询，由@Brian Diggs 解决。如有必要，请参阅“R：如何使用正则表达式区分内括号和最内括号”）

所以我使用了以下代码：

```
library("plotrix")
library("plyr")
strr<-c("((VBD)(((JJ))(CC)((RB)(JJ)))((IN)((DT)(JJ)(NNP)(NNPS))))")
tmp <- gsub("\\(([^\\(\\)]*)\\)",  '("\\1")', strr)
tmp <- gsub("\\(", "list(", tmp)
tmp <- gsub("\\)list", "),list", tmp)
tmp <- eval(parse(text=tmp))
atdepth <- function(l, d) {
if (d > 0 & !is.list(l)) {
 return(NULL)
}
 if (d == 0) {
 return(unlist(l))
 }
if (is.list(l)) {
 llply(l, atdepth, d-1)
 }
 }

 pastelist <- function(l) {paste(unlist(l), collapse="", sep="")}
 down <- llply(1:listDepth(tmp), atdepth, l=tmp)
 out <- if (length(down) > 2) {
 c(unlist(llply(length(down):3, function(i) {
 unlist(do.call(llply, c(list(down[[i]]), replicate(i-3, llply), pastelist)))
 })), unlist(pastelist(down[[2]]))) 
 } else {
 unlist(pastelist(down[[2]]))
 }
 out <- out[out != ""] 
```

我得到了我想要的，但是不能通过循环使用上面的代码同时处理多个字符串（strr等）吗？我大致需要在一个文件中处理和收集一堆字符串。我正在尝试包含一个循环，但最终总是只有输出文件中字符串集中的最后一个字符串。我应该如何通过循环运行代码？下面设置的字符串。

```
strr<-c("(((((NNS))((IN)((NNS)(CC)(NNS))))((VBD)((PRP))((IN)((NN))))))", 

"((((NNS))((VBD)((TO)(((NNP))((NNP))))((TO)((DT)(NNP))))))", 

"((((IN)(((NNP))((NNP))))((NNP)(NNP)(NNPW)(NNP))((VBD)((IN)((DT)(JJ)(NN)(NN))))))"
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T11:38:05.730

可能它可以以更聪明的方式进行修改，但直接的方式是定义一个新函数并使用`sapply()`

```
### Nothing new
library("plotrix")
library("plyr")
strr<-c("(((((NNS))((IN)((NNS)(CC)(NNS))))((VBD)((PRP))((IN)((NN))))))", 
        "((((NNS))((VBD)((TO)(((NNP))((NNP))))((TO)((DT)(NNP))))))",   
        "((((IN)(((NNP))((NNP))))((NNP)(NNP)(NNPW)(NNP))((VBD)((IN)((DT)(JJ)(NN)(NN))))))")

strrr <- strr[rep(1:3,200)]

atdepth <- function(l, d) {
  if (d > 0 & !is.list(l)) {
    return(NULL)
  }
  if (d == 0) {
    return(unlist(l))
  }
  if (is.list(l)) {
    llply(l, atdepth, d-1)
  }
}
pastelist <- function(l) {paste(unlist(l), collapse="", sep="")}
###
### New function here
fun <- function(strr){
tmp <- gsub("\\(([^\\(\\)]*)\\)",  '("\\1")', strr)
tmp <- gsub("\\(", "list(", tmp)
tmp <- gsub("\\)list", "),list", tmp)
tmp <- eval(parse(text=tmp))

down <- llply(1:listDepth(tmp), atdepth, l=tmp)
out <- if (length(down) > 2) {
  c(unlist(llply(length(down):3, function(i) {
    unlist(do.call(llply, c(list(down[[i]]), replicate(i-3, llply), pastelist)))
  })), unlist(pastelist(down[[2]]))) 
} else {
  unlist(pastelist(down[[2]]))
}
out <- out[out != ""]
out
}

sapply(strr, fun) 
```

# .net - 扩展 WCF 通道以在失败时自动重新创建（/重新连接）自身

> ID：11468411
> 
> 赞同：2
> 
> 时间：2012-07-13T10:09:59.950
> 
> 标签：.net, wcf, nettcpbinding, channelfactory

我很难使用 NetTcpBinding 和超时。我知道这可以通过在每个服务调用周围编写 Try-Catch-block 来解决，并且在失败时使用 ChannelFactory 创建一个新通道并再次进行相同的调用。唯一的问题是，有数百个地方我不得不做这个丑陋的措施。

我知道必须有更好的解决方案。不幸的是，继承不是我的情况。方面会起作用，但在.net中没有对它们的真正支持..

我想知道是否可以扩展 WCF（通道模型？），如果抛出超时异常，通道会自动重新生成（或它尝试重新连接）并再次进行相同的调用。都在幕后。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T08:26:56.520

在我们的一个项目中，我们使用了一个代理，它包装了真正的 ServiceClient 并在对通道的调用周围放置了一个 try-catch。
当引发异常并且通道出现故障时，我们重新打开连接并再次调用。
我们设置了一个阈值，在 3 次超时后我们不会再次调用相同的方法。

您可以使用 DynamicProxy 或 Unity Interceptor 来创建这种机制。
这个链接可能有用[http://kozmic.pl/2009/05/03/wcf-client-proxy-with-castle-dynamic-proxy/](http://kozmic.pl/2009/05/03/wcf-client-proxy-with-castle-dynamic-proxy/)

# c++ - 使用 Auto 和 Lambda 处理信号？

> ID：11468414
> 
> 赞同：24
> 
> 时间：2012-07-13T10:10:02.907
> 
> 标签：c++, lambda, c++11, signals, posix

我编写了这个具有 main 函数的程序，在其中，我创建了两个套接字，如下所示：

```
int sockfd1 = socket(AF_INET, SOCK_STREAM, 0);
int sockfd2 = socket(AF_INET, SOCK_STREAM, 0); 
```

现在我用它们做一些事情，当用户按下 Ctrl+C 来终止进程时，我想确保套接字正确关闭，所以我这样做：

```
auto sigTermHandler = [&] (int param) { close(sockfd1); close(sockfd2); };
signal(SIGTERM, sigTermHandler); 
```

但这在编译为时会引发以下编译错误`g++ -std=gnu++0x <filename>.cpp`：

```
error: cannot convert ‘main(int, char**)::<lambda(int)>’ to ‘__sighandler_t {aka void (*)(int)}’ for argument ‘2’ to ‘void (* signal(int, __sighandler_t))(int)’ 
```

不能以这种方式使用 lambda 来处理信号吗？请指教。

PS我知道我可以把它放在析构函数中，如果我做了正确的OOP，但我很想知道这是否有效。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-13T10:15:36.460

调用简单函数指针时，不能使用 lambda 的捕获功能。标准规定，没有捕获的 lambda 函数可以转换为函数指针，但是：

> 5.1.2 (6) 没有 lambda-capture 的 lambda 表达式的闭包类型有一个公共的非虚非显式 const 转换函数，指向具有与闭包类型的函数调用运算符相同的参数和返回类型的函数的指针。这个转换函数的返回值应该是一个函数的地址，当被调用时，它与调用闭包类型的函数调用运算符具有相同的效果。

例如，这有效：

```
signal(SIGTERM, [](int signum) { /* ... */ }); 
```

但不是这个：

```
signal(SIGTERM, [foo](int signum) { /* use foo here */ }); 
```

您实际上可以将`sockfd1`and保留`sockfd2`为全局变量，然后您可以在 lambda 函数中使用它们。但这显然不是一个好的设计。所以最好使用[RAII](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization)设计。而且，如果程序终止，则无论如何都会关闭套接字（正如@Dani 指出的那样）。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2018-01-09T08:39:04.883

有点晚了，但是如果有人需要这样的解决方案，可以将`std::function`其用作包装器来保存能够捕获变量的 lambda：

```
#include <functional>
#include <iostream>

namespace {
std::function<void(int)> shutdown_handler;
void signal_handler(int signal) { shutdown_handler(signal); }
} // namespace

int main(int argc, char *argv[]) {
  std::signal(SIGINT, signal_handler);
  MyTCPServer server;
  shutdown_handler = [&](int signal) {
    std::cout << "Server shutdown...\n";
    server.shutdown();
  };
  server.do_work_for_ever();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T10:18:58.920

当程序关闭时，套接字将始终关闭，无需担心。
如果您担心逻辑资源处理，请将其放入析构函数中，但当用户按下 CTRL-C 时不会调用这些析构函数

# bash - BASH - 如何将它们发送到仅对话标准输出和文件 /root/sh/sh.log 标准输出 + 输出错误

> ID：11468415
> 
> 赞同：1
> 
> 时间：2012-07-13T10:10:04.787
> 
> 标签：bash, shell

再会

如何将它们发送到仅对话标准输出和文件 /root/sh/sh.log 标准输出 + 输出错误

```
# I need
dialog          == standard output
/root/sh/sh.log == standard output + error output 

# My experimental
start 2>&1 /root/sh/menu.log | dialog --stdout --progressbox 20 200; 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T11:06:02.857

我会尝试类似 start 2>> /root/sh/sh.log | tee -a /root/sh/sh.log | 对话

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T12:36:56.450

您可以尝试使用`tee`命令和进程替换

```
{ start | tee >( dialog --stdout --progressbox 20 200) ; } > /root/sh/menu.log 2>&1 
```

在命令组中，标准输出被传递给`tee`，它写入一个“文件”，该文件实际上是一个进程替换构造，它将其输入传递给`dialog`命令。将其视为标准输出的分叉管道。

因为标准错误没有被重定向，`tee`并将其输入传递回标准输出，所以两者都被传递出命令组。首先，我们将标准输出重定向到所需的日志文件，然后将标准错误复制到标准输出所在的任何位置。

# javascript - jQuery jqplot 日期未正确显示

> ID：11468420
> 
> 赞同：1
> 
> 时间：2012-07-13T10:10:34.980
> 
> 标签：javascript, jquery, jqplot

我的 jqplot 图有问题。

```
<script type="text/javascript" src="/js/jplot/jquery.jqplot.min.js"></script> 
<script type="text/javascript" src="/js/jplot/plugins/jqplot.dateAxisRenderer.min.js"></script> 

<script type="text/javascript" > 
$(document).ready(function(){
    var data = [["25 August 2002", 299.75],["02 September 2002", 1511.22],["02 October 2002", 1967.00],["01 November 2002", 2335.80],["02 December 2002", 2008.15],["02 January 2003", 4579.52],["02 February 2003", 5253.98],["07 March 2003", 5491.12],["01 April 2003", 8937.26],["08 May 2003", 16520.95],["01 June 2003", 13725.03],["01 July 2003", 22800.12],["11 August 2003", 34828.20],["01 September 2003", 48176.53],["01 October 2003", 57216.98],["01 November 2003", 45644.96],["01 December 2003", 50927.94],["01 January 2004", 51279.52],["01 February 2004", 41711.34],["01 March 2004", 49790.00],["01 April 2004", 49686.61],["01 May 2004", 40634.78],["22 August 2004", 16889.98],["01 September 2004", 41684.68],["29 June 2006", 151.55],["25 March 2008", 469.75],["17 July 2008", 159.90],["04 August 2008", 719.55],["11 December 2009", 94.00],["01 December 2010", 449.95],["01 April 2011", 449.95],["01 June 2012", 4529.40]];
    var plot1 = $.jqplot('chartdiv', [data],
        {
            axes:{
                yaxis:{
                    label: 'Subs. Revenue',
                    tickOptions:{
                        formatString:'R%.2f'
                    },
                    min: 0

                },
                xaxis:{
                    label: 'Period',
                    renderer:$.jqplot.DateAxisRenderer,
                    tickOptions:{
                        formatString:'%b-%y'
                    },
                    pad: 1.2
                }
            }
        }
)
});
</script> 
<div id="chartdiv" style="height:600px;width:1000px; "></div> 
```

当我查看图表时，它只是将 xaxis 点显示为“Jan 01”、“Jan 02”、“Jan 03”等。为什么会发生这种情况？

*编辑*附上一个 img 来显示什么是错的。 ![每件事都是 x 轴上的 Jan](../Images/ab00e02a0d1f10646442b78cf3435aef.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T10:50:28.690

以下是根据要求支持的日期轴渲染格式

```
 %Y      2008                Four-digit year
  %y      08                  Two-digit year
              == Months ==
  %m      09                  Two-digit month
  %#m     9                   One or two-digit month
  %B      September           Full month name
  %b      Sep                 Abbreviated month name
              == Days ==
  %d      05                  Two-digit day of month
  %#d     5                   One or two-digit day of month
  %e      5                   One or two-digit day of month
  %A      Sunday              Full name of the day of the week
  %a      Sun                 Abbreviated name of the day of the week
  %w      0                   Number of the day of the week (0 = Sunday, 6 = Saturday)
  %o      th                  The ordinal suffix string following the day of the month
              == Hours ==
  %H      23                  Hours in 24-hour format (two digits)
  %#H     3                   Hours in 24-hour integer format (one or two digits)
  %I      11                  Hours in 12-hour format (two digits)
  %#I     3                   Hours in 12-hour integer format (one or two digits)
  %p      PM                  AM or PM
              == Minutes ==
  %M      09                  Minutes (two digits)
  %#M     9                   Minutes (one or two digits)
              == Seconds ==
  %S      02                  Seconds (two digits)
  %#S     2                   Seconds (one or two digits)
  %s      1206567625723       Unix timestamp (Seconds past 1970-01-01 00:00:00)
              == Milliseconds ==
  %N      008                 Milliseconds (three digits)
  %#N     8                   Milliseconds (one to three digits)
              == Timezone ==
  %O      360                 difference in minutes between local time and GMT
  %Z      Mountain Standard Time  Name of timezone as reported by browser
  %G      -06:00              Hours and minutes between GMT
              == Shortcuts ==
  %F      2008-03-26          %Y-%m-%d
  %T      05:06:30            %H:%M:%S
  %X      05:06:30            %H:%M:%S
  %x      03/26/08            %m/%d/%y
  %D      03/26/08            %m/%d/%y
  %#c     Wed Mar 26 15:31:00 2008  %a %b %e %H:%M:%S %Y
  %v      3-Sep-2008          %e-%b-%Y
  %R      15:31               %H:%M
  %r      3:31:00 PM          %I:%M:%S %p 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T10:44:39.270

考虑到您的评论，我认为您想要`%b-%Y`而不是`%b-%y`.

[显示使用 '%b-%Y' 的代码示例。](http://jsfiddle.net/Boro/xJdkJ/11/)

[此外，对于所有支持的格式类型，请参阅。](http://www.jqplot.com/docs/files/plugins/jqplot-dateAxisRenderer-js.html)您还可以注意到，提供的代码示例显示了如何添加您的自定义日期格式，只需使用“%Q”`formatString`来查看它是如何工作的。

# arrays - Powershell：创建自定义 DataGridView

> ID：11468423
> 
> 赞同：2
> 
> 时间：2012-07-13T10:10:50.393
> 
> 标签：arrays, powershell, datagridview

因此，我正在尝试创建一个自定义 Datagridview 以放入我制作的 GUI 程序中，但我遇到了一些麻烦。

到目前为止，我有这个：

```
$form = New-Object System.Windows.Forms.Form
$form.Size = New-Object System.Drawing.Size(900,600)
$dataGridView = New-Object System.Windows.Forms.DataGridView
$dataGridView.Size=New-Object System.Drawing.Size(800,400)

$form.Controls.Add($dataGridView)
$dataGridView.ColumnCount = 4
$dataGridView.ColumnHeadersVisible = $true
$dataGridView.Columns[0].Name = "Process"
$dataGridView.Columns[1].Name = "ID"
$dataGridView.Columns[2].Name = "Description"
$dataGridView.Columns[3].Name = "Memory"

$row1 = get-process -property name | select Name

$rows = @($row1)
foreach ($row in $rows)
{    
$dataGridView.Rows.Add($row.name)}
$form.ShowDialog() 
```

我的问题是这样的：

如何将不同的列分配给不同的属性，因此列“进程”将用于进程名称，列“id”将用于进程 ID，依此类推。

到目前为止，我所做的只是为一列分配一个输入范围：进程名称。

请帮忙！

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-13T10:24:07.600

循环所有进程，并按照您定义列的顺序添加每个进程属性：

```
get-process | foreach{
    $dataGridView.Rows.Add($_.Name,$_.ID,$_.Description,$_.WorkingSet)
} 
```

您还可以通过选择要显示的属性动态生成列，每个属性都成为列名，并使用网格的 DataSource 属性和数组列表将对象添加到网格：

```
$form = New-Object System.Windows.Forms.Form
$form.Size = New-Object System.Drawing.Size(900,600)

$gps = get-process | select Name,ID,Description,@{n='Memory';e={$_.WorkingSet}}
$list = New-Object System.collections.ArrayList
$list.AddRange($gps)

$dataGridView = New-Object System.Windows.Forms.DataGridView -Property @{
    Size=New-Object System.Drawing.Size(800,400)
    ColumnHeadersVisible = $true
    DataSource = $list
}

$form.Controls.Add($dataGridView)
$form.ShowDialog() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T10:25:28.013

但是为什么不`Out-GridView`拒绝 PoSH的用户呢？：

`get-process | select name, process, id, description, workingSet | Out-GridView`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T12:48:42.897

Akim - 脚本编写者尝试使用您可以看到但很少做的输出的单行代码，而程序员考虑用户界面并将输出控制权交到用户手中，因此 System.Windows.Forms.Form 是 powershell 程序员最好的朋友。

Shay - 我一直在做一些编程来使用 DataGridView，到目前为止我的经验告诉我，我必须控制定义 DataGridView 属性，而不是使用 .DataSource，如上面的一个示例所示。尽管它很方便，但是除了在表单上显示它之外，您不需要对 DataGridView 做太多事情。

我首先将 .ColCount 设置为我想要的列数。然后命名列。此后，我可以通过编号位置或名称调整每列的属性。我选择让用户对选定的列进行排序。截至 2013 年 3 月 23 日，我仍在研究如何设置要突出显示的单元格的背景颜色。对于那些想要做同样的事情的人来说，应该很快就会得到这个答案。我发现的一个示例使用单元格中的值，而不是位置。

```
$datagridview = New-Object System.Windows.Forms.DataGridView
$datagridview.ColumnCount = 8
$datagridview.Columns[0].Name = "#ID"
$datagridview.Columns[1].Name = "Name"
...[snip]...
$datagridview.Columns[7].Name = "Company"
$datagridview.Columns["Name"].SortMode = "Automatic"
$datagridview.Columns[8].SortMode = "Automatic"
$datagridview.Columns[0].Width = 50
$datagridview.Columns["Description"].Width = 350
...[snip]...
foreach ($_ in $arraylist){[void]$datagridview.Rows.Add($($_.ID), $($_.Name),$($_.Path), $($_.Description), $($_.VM), $($_.WS), $($_.CPU), $($_.Company))} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T14:25:51.990

我尝试了几种方法来摆弄单元格背景颜色，并且只在 Add_CellPainting 方面取得了成功。注意 MSDN 警告不要在特定位置设置单元格样式，除非您真的希望无论用户做什么都更改该位置。在下面的代码中，无论您如何对 datagridview 进行排序，第 2 行第 4 列都是红色的。那可能是一个 OOPS，或者你真的想要那个。嗯....按值设置会执行所有匹配的值，因此如果您有非唯一值，那么您可能需要额外的逻辑来仅更改您想要的值并在内容更改时重新绘制。

```
$datagridview.Add_CellPainting(
{
param($Null, $EventArgs)
if ($([String]$EventArgs.Value).ToLower().Contains("ms") -eq $True) { $EventArgs.CellStyle.BackColor = "Blue" ; $EventArgs.CellStyle.ForeColor = "White" }
if ($([String]$EventArgs.Value).ToLower().Contains("windows") -eq $True) { $EventArgs.CellStyle.BackColor = "Yellow" }
if ($([String]$EventArgs.Value).ToLower().Contains("windows powershell") -eq $True) { $EventArgs.CellStyle.BackColor = "Green" }
if (($EventArgs.RowIndex -eq 2) -and ($EventArgs.ColumnIndex -eq 4)) {$EventArgs.CellStyle.BackColor = "Red" }
}
) # End of Add_CellPainting 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-08T03:18:09.833

此后找到了另一种突出显示我选择的单元格的方法：

```
$Script:PS_Log_Viewer_Form_row = $PS_Log_Viewer_Form_dataGridView1.Rows.Add("$($PS_Log_Viewer_total_records_ctr)", "$($PS_Log_Viewer_Form_line_date_time_sub)","$($PS_Log_Viewer_Form_line_acct)","$($PS_Log_Viewer_Form_line_msg)", "$($PS_Log_Viewer_Form_full_filename)-$($PS_Log_Viewer_file_records)")

$PS_Log_Viewer_Form_dataGridView1.Rows[$PS_Log_Viewer_Form_row].Cells[1].Style.BackColor = "BlanchedAlmond" 
```

并搜索所有行和设置（认为找到所有）：

```
for ($i = ($PS_Log_Viewer_Form_dataGridView1.FirstDisplayedScrollingRowIndex - 1) ; $i -gt 0 ; $i-- )
{
if ($PS_Log_Viewer_Form_dataGridView1.Rows[$i].Cells[3].Value.Contains("$($find_form_middle_flp_textbox_1.Text)") )
{
$PS_Log_Viewer_Form_dataGridView1.Rows[$i].Cells[3].Style.BackColor = $find_form_middle_flp_color_combobox_dropdownlist.SelectedItem
$PS_Log_Viewer_Form_dataGridView1.FirstDisplayedScrollingRowIndex = $i
$find_form_bottom_remarks = "Previous found at $($i)."
$i = 0
} # End of if ($PS_Log_Viewer_Form_dataGridView1.Rows[$i].Cells[3].Value.Contains("$($Script:PS_Log_Viewer_search_string)") )
} # End of for ($i = 0 ; $i -lt $PS_Log_Viewer_Form_dataGridView1.RowCount ; $i++ ) 
```

# telerik - Telerik MVC Grid：HtmlAttributes 中的行特定内容

> ID：11468425
> 
> 赞同：2
> 
> 时间：2012-07-13T10:10:56.273
> 
> 标签：telerik, telerik-grid, telerik-mvc, html, html-title

是否可以在 HtmlAttributes 中使用特定于行的内容？

我得到了这个带有内容的单元格`(o.ArrivalTime)`，当我将鼠标移到它上面时，我希望它`(o.Note)`在工具提示中显示来自其他元素的内容

我试过这个，但它不会接受`o.Note`

```
columns.Bound(o => o.ArrivalTime)
  .Title("Arrival Time")
  .Template(o =>
        {%><%=(o.ArrivalTime < Convert.ToDateTime("2000-01-01")) ? "?" : o.ArrivalTime.ToString()%><%})
  .Width(140)
  .HtmlAttributes(new {title = o.Note })
  ; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T13:54:21.240

您可以在 Template 中执行此操作，而不是使用 HtmlAttributes。

```
columns.Bound(o => o.ArrivalTime)
  .Title("Arrival Time")
  .Template(o =>
    {%><div title="<%= o.Note %>"><%=(o.ArrivalTime < Convert.ToDateTime("2000-01-01")) ? "?" : o.ArrivalTime.ToString()%></div><%})
  .Width(140)
  ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T08:28:41.493

请看下面的例子。

[网格 - 服务器模板](http://demos.telerik.com/aspnet-mvc/grid/templatesserverside)

在此示例中，第一列使用模板机制来创建列。以类似的方式，您可以为列创建模板，然后在定义模板时使用不同的列。这是演示中的代码片段：

```
<% Html.Telerik().Grid(Model)
    .Name("Grid")
    .Columns(columns => 
    {
        //Template column. The grid displays the HTML defined by the argument.
        columns.Template(c => {
        %>
            <img 
                alt="<%= c.CustomerID %>" 
                src="<%= Url.Content("~/Content/Grid/Customers/" + c.CustomerID + ".jpg") %>" 
              />
        <%
        });
        //Regular databound column. The grid displays the value of the CustomerID property.
        columns.Bound(c => c.CustomerID);
    })
    .Render(); 
```

%>

希望这对您的问题有所帮助。

Lohith (Tech Evangelist, Telerik India)

# android - 列表视图中每个项目的可扩展列表视图

> ID：11468431
> 
> 赞同：4
> 
> 时间：2012-07-13T10:11:16.660
> 
> 标签：android, expandablelistview

我怎样才能完成这样的可扩展列表视图：

![在此处输入图像描述](../Images/34f035d33c07ef5a1a0a645f9cfb97be.png)

![在此处输入图像描述](../Images/8081b3bc542060cdbbfba5584eb4127c.png)

只是忽略每个项目的内容不同，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T10:17:01.690

您可以设置图层的可见性（VIEW.Visible）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T10:33:16.803

```
onItemSingleClick(View v) {
    View dropdown = v.findViewbyId(R.id.dropdown);
    dropdown.setVisibility(View.VISIBLE);
    if(mCurrentVisibleDropdown != null)
        mCurrentVisibleDropdown.setVisibility(View.GONE);
    mCurrentVisibleDropdown = dropdown;
} 
```

# html - CSS - 如何将子菜单推到左侧？

> ID：11468435
> 
> 赞同：1
> 
> 时间：2012-07-13T10:11:29.267
> 
> 标签：html, css, submenu

我创建了一个带有水平子菜单的水平菜单。虽然我希望所有子菜单都被推到左边，就像第一个子菜单一样。我怎样才能做到这一点？我对 CSS 非常（非常）陌生。

我有这个 HTML 代码：

```
<div id="menu">
        <ul>
            <li><a href="#nogo">Link 1</a>
                <ul>
                    <li><a href="#nogo">Link 1-1</a></li>
                    <li><a href="#nogo">Link 1-2</a></li>
                    <li><a href="#nogo">Link 1-3</a></li>
                </ul>
            </li>
            <li><a href="#nogo">Link 2</a>
                <ul>
                    <li><a href="#nogo">Link 2-1</a></li>
                    <li><a href="#nogo">Link 2-2</a></li>
                    <li><a href="#nogo">Link 2-3</a></li>
                </ul>
            </li>
            <li><a href="#nogo">Link 3</a>
                <ul>
                    <li><a href="#nogo">Link 3-1</a></li>
                    <li><a href="#nogo">Link 3-2</a></li>
                    <li><a href="#nogo">Link 3-3</a></li>
                </ul>
            </li>
        </ul>
    </div> 
```

我有这个 CSS 代码：

```
 #menu{
padding:0;
margin:0;
overflow:hidden;
height:60px;
}
#menu ul{
padding:0;
margin:0;
}
#menu li{
position: relative;
float: left;
list-style: none;
margin: 0;
padding:0;
}

#menu li a{
width:100px;
height: 30px;
display: block;
text-decoration:none;
text-align: center;
line-height: 30px;
background-color: black;
color: white;
}

#menu li a:hover{
background-color: red;
}

#menu ul ul{
position: absolute;
top: 30px;
visibility: hidden;
width: 600px;
}

#menu ul li:hover ul{
visibility:visible;
display: inline;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T10:19:01.433

`position: relative`从中删除`#menu li`并将其添加到`#menu ul`。还添加`left: 0`到`#menu ul ul`：

```
#menu ul{
    padding:0;
    margin:0;
    position: relative;   /* add this */
}

#menu li{
    /* position: relative;   //remove this */
    float: left;
    list-style: none;
    margin: 0;
    padding:0;
}

#menu ul ul{
    position: absolute;
    left: 0;              /* add this */
    top: 30px;
    visibility: hidden;
    width: 600px;
} 
```

**工作示例：http: [//jsfiddle.net/WJN4G/](http://jsfiddle.net/WJN4G/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T10:19:45.560

将定位从`#menu li`to移动`#menu ul`并添加`left:0;`到`#menu ul ul`

这`left:0;`会导致元素 ( `#menu ul ul`) 与它的第一个父元素对齐，该元素的位置不是那么`static`（这是默认值）。这就是为什么您需要将`position:relative`on 元素向上移动到`#menu ul`，因此所有子元素都`ul`与父元素的左边缘对齐`ul`。

```
#menu ul{
padding:0;
margin:0;
position: relative; /* <- moved */
}
#menu li{
position: relative; /* <- deleted */
float: left;
list-style: none;
margin: 0;
padding:0;
}

#menu ul ul{
position: absolute;
    left:0;         /* <- added */
top: 30px;
visibility: hidden;
width: 600px;
} 
```

这是你修改过的**[小提琴](http://jsfiddle.net/poikl/Z7Y2P/)**

# ruby-on-rails - 使用 RSpec 2.10 和 Rails 3.2 测试 Authlogic 3.1

> ID：11468440
> 
> 赞同：0
> 
> 时间：2012-07-13T10:11:41.917
> 
> 标签：ruby-on-rails, rspec, authlogic

我最近刚刚更新了我的 Rails 应用程序以使用 Authlogic。身份验证在开发模式下工作正常，但测试不再工作。每次我使用 rspec 启动时`bundle exec rake spec`，应用程序都会抛出以下错误消息（已修剪）：

```
/home/user/.rvm/gems/ruby-1.9.3-p194/gems/authlogic-3.1.3/lib/authlogic/acts_as_authentic/base.rb:31:in `acts_as_authentic': You must establish a database connection before using acts_as_authentic (StandardError)
    from /home/user/Documents/projects/rails_demo/app/models/user.rb:6:in `<class:User>'
    from /home/user/Documents/projects/rails_demo/app/models/user.rb:2:in `<top (required)>'
    from /home/user/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:251:in `require' 
```

我知道这与未建立数据库连接有关，但我不知道我该怎么做才能修复它。它在开发中工作。

顺便说一下，这是我的数据库配置：

```
test:
  adapter: sqlite3
  database: ":memory:"

production:
  adapter: sqlite3
  database: db/production.sqlite3
  pool: 5
  timeout: 5000 
```

任何人都可以为我提供有关解决问题的方法的指导吗？任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T10:35:13.950

对不起，回答我自己的问题。我应该早点发现这一点。更改测试环境的数据库配置以解决此问题：

```
test:
  adapter: sqlite3
  database: db/test.sqlite3
  pool: 5
  timeout: 5000 
```

不过，我不知道为什么 Authlogic 不能在内存 sqlite3 数据库中使用。

# tinymce - TinyMCE插入图像不起作用

> ID：11468442
> 
> 赞同：1
> 
> 时间：2012-07-13T10:11:53.350
> 
> 标签：tinymce

SO上有一些类似的问题，但没有一个可以解释我遇到的问题。

我正在使用托管在 1and1 上的[TomatoCMS 。](http://www.tomatocms.com/)

我遇到的问题是：

```
tinyMCE.getInstanceById('content').execCommand('mceInsertContent', false, '<img src="' + url + '" alt="" />'); 
```

`url`可能在哪里`http://example.com/uploads/123.jpg`

图像*已*正确插入到 tinymce 预览区域，但原始`textarea`内容设置为：

```
<img src="%5C" alt="\"\"" /> 
```

因此，这将保存到数据库中。

有人对此有解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T10:56:39.070

这是由[PHP Magic Quotes](http://uk3.php.net/magic_quotes)引起的。

要解决此问题，`php.ini`请在网站根目录中放置一个文件，其中包含：

```
magic_quotes_gpc = Off
magic_quotes_runtime = Off
magic_quotes_sybase = Off 
```

我在一篇关于 1and1 托管的另一个软件包的帖子中找到了这个解决方案。[如何在 1and1 服务器上安装 Precurio](http://www.precurio.com/forums/showthread.php?tid=490)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T10:27:38.210

我不太确定，这里出了什么问题，但我想这可能与编码有关。您可以尝试为此提供的配置设置：[http ://www.tinymce.com/wiki.php/Configuration:entity_encoding](http://www.tinymce.com/wiki.php/Configuration:entity_encoding)

# ffmpeg - 如何使用 ffmpeg 向 avi 视频添加文本？

> ID：11468448
> 
> 赞同：3
> 
> 时间：2012-07-13T10:12:04.637
> 
> 标签：ffmpeg, drawtext

我正在尝试在 Ubuntu 12.04 上使用 ffmpeg 在视频底部放置一个简单的文本。我试过这个，这是在几个地方建议的：

```
ffmpeg -i input.avi -vf drawtext="fontfile=/usr/share/fonts/truetype/ttf-dejavu/DejaVuSerif.ttf:text='Text to write':fontsize=20:fontcolor=black:x=100:y=100" output.avi 
```

但我每次都会收到这个错误：

```
ffmpeg version 0.8.3-4:0.8.3-0ubuntu0.12.04.1, Copyright (c) 2000-2012 the Libav developers
  built on Jun 12 2012 16:37:58 with gcc 4.6.3
*** THIS PROGRAM IS DEPRECATED ***
This program is only provided for compatibility and will be removed in a future release. Please use avconv instead.
Input #0, avi, from 'input.avi':
  Duration: 04:09:09.66, start: 0.000000, bitrate: 480 kb/s
    Stream #0.0: Video: mpeg4 (Advanced Simple Profile), yuv420p, 320x240 [PAR 1:1 DAR 4:3], 45 tbr, 45 tbn, 45 tbc
    Stream #0.1: Audio: mp3, 48000 Hz, stereo, s16, 64 kb/s
[buffer @ 0x860d5a0] w:320 h:240 pixfmt:yuv420p
Incompatible sample format 's16' for codec 'ac3', auto-selecting format 'flt'
[ac3 @ 0x8607a00] invalid bit rate
Output #0, avi, to 'output.avi':
    Stream #0.0: Video: mpeg4, yuv420p, 320x240 [PAR 1:1 DAR 4:3], q=2-31, 200 kb/s, 90k tbn, 45 tbc
    Stream #0.1: Audio: ac3, 48000 Hz, stereo, flt, 200 kb/s
Stream mapping:
  Stream #0.0 -> #0.0
  Stream #0.1 -> #0.1
Error while opening encoder for output stream #0.1 - maybe incorrect parameters such as bit_rate, rate, width or height 
```

感谢你的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T19:34:39.490

该文档显示您可以使用其他参数，`x`例如`y`输入视频高度和宽度以及文本宽度和高度。将文本放在底部的一种方法是`y=main_h-text_h`. 如果你想在底部有一点填充，你可以使用`y=main_h-(text_h*2)`水平居中使用`x=(main_w/2-text_w/2)`.

# html - 我的 HR 风格不像预期的那样工作

> ID：11468450
> 
> 赞同：1
> 
> 时间：2012-07-13T10:12:11.050
> 
> 标签：html, css, styles, css-float, margin

JSFIDDLE：http: [//jsfiddle.net/V7wUv/2/](http://jsfiddle.net/V7wUv/2/)

这是我的 HR 风格：

```
.page-content hr {
    background-color: #DCDCDC;
    border: 0 none;
    clear: both;
    display: block;
    float: left; <-- take a close look at this
    height: 1px;
    margin: 50px auto; <-- take a close look at this
    max-width: 1120px;
    width: 100%;
} 
```

当我添加时，`float:left;`我最终可以正常工作，但不能正常工作（它只是一直向左浮动）。`margin-top: 50px;``margin-bottom: 50px;``margin-left: auto;``margin-right: auto;`

当我删除`float:left;`左右边距工作（它正确居中）但`margin-top: 50px;`重叠它上面的元素并且有`0px`边距。

如果您需要，上面的元素具有这种样式：

```
.grid_1, .grid_2, .grid_3, .grid_4, .grid_5, .grid_6, .grid_7, .grid_8, .grid_9, .grid_10, .grid_11, .grid_12 {
    display: inline;
    float: left;
    margin-left: 1%;
    margin-right: 1%;
    position: relative;
    width: 98%;
} 
```

我希望我的 HR 居中，上下边距为 50px。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T10:30:33.467

```
hr {
    border: 0;
    border-bottom: 1px solid #DCDCDC;
    clear: both;
    display: block;
    height: 0;
    margin: 0 auto 50px auto;
    padding-top: 50px;
    max-width: 220px;
    width: 100%;
} 
```

# javascript - 如何使用子窗口上下文执行父窗口中定义的函数

> ID：11468457
> 
> 赞同：0
> 
> 时间：2012-07-13T10:12:30.733
> 
> 标签：javascript

我有两个窗口：父窗口和子窗口（html 页面和 iframe）。

我有一个脚本库加载到父窗口。

我想从子窗口重用这个库而不将相同的脚本加载到子窗口中。

像这样调用父窗口的函数很容易：

```
 top.LibraryMethod(); 
```

但是这里有一个问题：LibraryMethod 将与父窗口的执行上下文一起执行。这意味着脚本中使用的全局变量将从父窗口而不是子窗口收集。例如，如果 LibraryMethod 声明如下：

```
 function LibraryMethod(){ alert(document.location.href); } 
```

它将显示从父窗口或子窗口调用的相同值，但我需要在此处访问子窗口的文档。

有一个明显的解决方案 - 将子窗口作为函数参数传递，但这需要更改库代码，这是不可接受的。

所以，问题是如何从父窗口中声明的函数访问子窗口对象，如果这个函数是从子窗口调用的，而不引入额外的函数参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T10:17:17.663

> 所以，问题是如何从父窗口中声明的函数访问子窗口对象，如果这个函数是从子窗口调用的，而不引入额外的函数参数。

你不能。您要么必须传入函数参数，要么必须控制在父窗口中加载库函数的上下文（即使您这样做，第二个选项也是狡猾的）。如果您没有这些东西，则无法更改全局变量在父窗口函数中的解析方式。这两件事都需要更改库的脚本文件（我假设它位于单独的脚本文件中，而不仅仅是`script`标签中的内联内容）。

# iphone - 从越狱设备上的应用程序获取 NSString 值

> ID：11468465
> 
> 赞同：0
> 
> 时间：2012-07-13T10:13:11.657
> 
> 标签：iphone, xcode, nsstring, jailbreak

是否可以从越狱设备上的应用程序中获取硬编码 NSString 的值（例如使用*逆向工程*）：

```
NSString *mySecretString = [NSString stringWithFormat:@"stringValue"]; 
```

有人可以获得价值“stringValue”吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T10:15:33.900

在应用程序二进制文件上使用 binutils 中的“字符串”实用程序。 [http://sourceware.org/binutils/docs-2.18/binutils/strings.html](http://sourceware.org/binutils/docs-2.18/binutils/strings.html)

例子：

```
root@jailbroken-iPhone:~# strings HelloWorld
Hello, World!
root@jailbroken-iPhone:~# _ 
```

# algorithm - 如何计算从一个地点到另一个地点的总距离和总时间

> ID：11468469
> 
> 赞同：-2
> 
> 时间：2012-07-13T10:13:19.387
> 
> 标签：algorithm, geometry, cartography

这个问题非常新，需要在从一个位置到另一个位置时计算总行驶距离，还需要计算到该旅行所花费的总时间。我认为使用两个位置的纬度和经度查找距离并不能给出正确的结果，因为纬度和纬度距离给了我们直线距离，即使我们有很多转折点等......当我们旅行时。

[如何使用 kml 文件在地图上绘制路径？](https://stackoverflow.com/questions/3109158/how-to-draw-a-path-on-a-map-using-kml-file/3109723#3109723)

我看到了这个问题，那里已经给出了很好的例子，我也实现了，但它很复杂，我不需要绘制路由路径，我只需要计算总距离和总时间。

所以希望有人能帮助我

在此先感谢 Aamirkhan I。

**错误已解决** 我找到了我的答案我使用了这个 google api

[http://maps.googleapis.com/maps/api/distancematrix/json?origins=ahmedab​​ad&destinations=mumbai&mode=car&sensor=false](http://maps.googleapis.com/maps/api/distancematrix/json?origins=ahmedabad&destinations=mumbai&mode=car&sensor=false)

它提供了从一个位置到另一个位置的所有旅行信息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T11:30:52.037

> 当您的旅行开始时，您需要获取当前位置的纬度和经度以及您想在哪里结束旅行，然后您需要获取该位置的纬度和经度，然后计算距离。

[计算距离](http://iamvijayakumar.blogspot.in/2012/03/androidcalculate-distance-between-two.html?showComment=1342177097384#c1364983639040302502)

> 然后关于计算时间当您当时获得当前位置时，您只需要获得当前时间以及您在哪里结束旅行，您需要获得该特定时间，然后现在计算两个位置之间的时间间隔。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T12:01:17.043

谷歌有一个应用程序基本上可以做到这一点——[谷歌我的足迹](http://www.google.com/mobile/mytracks/)。您可以将应用程序中的数据导出到 Google 地图或 KML 文件中。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-13T11:30:48.513

找到 2 个转折点（按经度和纬度）之间路径的每一部分的距离并将它们相加。要找到旅行时间，请将总距离除以计划的平均速度。这是解决您的问题的唯一方法。

# notifications - 使用 Google Cloud Messaging 发送广播通知

> ID：11468470
> 
> 赞同：3
> 
> 时间：2012-07-13T10:13:22.073
> 
> 标签：notifications, cloud, messaging, broadcast

我正在使用 Google Cloud Messaging 提供推送通知。我可能需要向大约 10.000 个用户发送广播通知。但是，我读到多播消息可以包含一个具有 1000 个注册 ID 的列表，最大值。

那么，我需要发送十个多播消息吗？有没有办法向所有客户端发送广播而不生成具有所有 ID 的列表？

提前感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-15T15:26:44.003

从 Play Services 7.5 开始，现在也可以通过主题来实现：

[https://developers.google.com/cloud-messaging/topic-messaging](https://developers.google.com/cloud-messaging/topic-messaging)

注册后，您必须通过 HTTP 向 GCM 服务器发送一条消息：

```
https://gcm-http.googleapis.com/gcm/send
Content-Type:application/json
Authorization:key=AIzaSyZ-1u...0GBYzPu7Udno5aA
{
  "to": "/topics/foo-bar",
  "data": {
  "message": "This is a GCM Topic Message!",
  }
} 
```

例如：

```
JSONObject jGcmData = new JSONObject();
JSONObject jData = new JSONObject();
jData.put("message", "This is a GCM Topic Message!");
// Where to send GCM message.
jGcmData.put("to", "/topics/foo-bar");

// What to send in GCM message.
jGcmData.put("data", jData);

// Create connection to send GCM Message request.
URL url = new URL("https://android.googleapis.com/gcm/send");
HttpURLConnection conn = (HttpURLConnection) url.openConnection();
conn.setRequestProperty("Authorization", "key=" + API_KEY);
conn.setRequestProperty("Content-Type", "application/json");
conn.setRequestMethod("POST");
conn.setDoOutput(true);

// Send GCM message content.
OutputStream outputStream = conn.getOutputStream();
outputStream.write(jGcmData.toString().getBytes()); 
```

您的客户应该订阅 /topics/foo-bar ：

```
public void subscribe() {
   GcmPubSub pubSub = GcmPubSub.getInstance(this);
   pubSub.subscribe(token, "/topics/foo-bar", null);
}

@Override
public void onMessageReceived(String from, Bundle data) {
   String message = data.getString("message");
   Log.d(TAG, "From: " + from);
   Log.d(TAG, "Message: " + message);
   // Handle received message here.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T15:47:38.350

您别无选择，只能将广播分成最多 1000 个 regId 的块。

然后，您可以在单独的线程中发送多播消息。

```
 //regIdList max size is 1000
        MulticastResult multicastResult;
        try {
            multicastResult = sender.send(message, regIdList, retryTimes);
        } catch (IOException e) {
            logger.error("Error posting messages", e);
            return;
        } 
```

# android - Android等待线程结束

> ID：11468471
> 
> 赞同：0
> 
> 时间：2012-07-13T10:13:26.583
> 
> 标签：android, multithreading

我的函数必须在我的线程结束后返回数据，我在我的线程`wait()`之后使用该方法`start()`但它不起作用：

```
private class getDataThread extends Thread {
    @Override
    public void run() {
        super.run();
        while (true) {
            try {
                // ...
                Thread.sleep(100);
            } catch (InterruptedException e) {
                // ...
            }
        }
    }
}

public void getSensorValues(Bundle bundle) {
    // ...
    getDataThread gdt = new getDataThread();
    gdt.start();
    try {
        gdt.wait();
    } catch (InterruptedException e) {
        // ...
    }
} 
```

在 LogCat 中：

```
: An exception occurred during execution !
: Exception caught: java.lang.reflect.InvocationTargetException
: Exception cause: (SYSTEM) java.lang.IllegalMonitorStateException: object not locked by thread before wait() in getSensorValues
: status::FAILURE - output:: Possible errors: (SYSTEM) java.lang.IllegalMonitorStateException: object not locked by thread before wait() in getSensorValues. 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T10:26:41.907

您正在寻找`join`，而不是`wait`：

```
public void getSensorValues(Bundle bundle) {
    // ...
    getDataThread gdt = new getDataThread();
    gdt.start();
    try {
        gdt.join();
    } catch (InterruptedException e) {
        // ...
    }
} 
```

`wait`有不同的目的，即向另一个线程发出事件已发生的信号。它需要对`notify`. 此外，您需要获取正在使用的对象上的锁`wait/notify`，这就是您遇到该异常的原因。

还有一件事：启动一个线程然后立即加入它是多余的。您不妨在主线程上执行所有操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T10:16:58.363

`wait()`不等待线程完成。它等待另一个线程调用`notify()`or `notifyAll()`。

相反，您需要使用`join()`以便其他线程加入当前线程。当前线程将阻塞，直到另一个线程完成。

也就是说，两者`wait()`和都`notify()`需要在`synchronized`正在使用的对象的块内。例子：

```
synchronized (lock) {
    lock.wait();
} 
```

# html - 保持表头（标签）不变

> ID：11468474
> 
> 赞同：0
> 
> 时间：2012-07-13T10:13:37.640
> 
> 标签：html

> **可能重复：**
> [我需要我的 html 表格的主体滚动并且它的头部保持不动](https://stackoverflow.com/questions/130564/i-need-my-html-tables-body-to-scroll-and-its-head-to-stay-put)

我有一个表格，希望标签之间的标题在屏幕上保持不变，而其余部分是可滚动的。我怎样才能做到这一点？我尝试使用 iframe，没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T10:34:40.140

您可以尝试下面提到的链接

[http://encolpe.wordpress.com/2008/05/01/how-to-add-a-fixed-table-header-with-a-vertical-scrollbar-in-content/](http://encolpe.wordpress.com/2008/05/01/how-to-add-a-fixed-table-header-with-a-vertical-scrollbar-in-content/)

这将为您提供在表中创建修复标题的想法

# crash-reports - 带有 atos 的符号给出了错误的崩溃原因

> ID：11468475
> 
> 赞同：3
> 
> 时间：2012-07-13T10:13:37.857
> 
> 标签：crash-reports

在我当前的项目中，我遇到了随机崩溃，可能是由于内存超调。但我实际上想弄清楚是哪个类导致了崩溃。所以我使用符号化方法来查找崩溃的原因。这是我所做的：

首先，XCode Build 设置是这样的：

复制期间剥离调试 Sysbols：否部署后处理：是剥离链接产品：是生成调试符号：是调试信息格式：带有 dSYM 文件的 DWARF 使用单独的剥离：是

我正在使用带有 4.3.2 版本的 XCode 的 iOS 5.1。我已经使用“symbolicatecrash”和“atos”方法来揭示崩溃的原因。但我无法找到崩溃的原因。

所以我尝试了这个。我通过访问数组中的越界索引使应用程序崩溃。我用它来验证符号化的崩溃结果输出与我的实际崩溃。

这是崩溃报告输出：

```
Incident Identifier: 93678EE5-ED10-4502-A59B-5C7526640C4D
CrashReporter Key:   5a79e41767bd1988a9b4080ee5641f63ed42feb8
Hardware Model:      iPad2,1
Process:         MyAppName [887]
Path:            /var/mobile/Applications/EF2C944B-4C26-4EB6-B41E-F89CF2232ADB/JAYPORE.app/MyAppName
Identifier:      MyAppName
Version:         ??? (???)
Code Type:       ARM (Native)
Parent Process:  launchd [1]

Date/Time:       2012-07-13 13:37:18.642 +0530
OS Version:      iPhone OS 5.0.1 (9A405)
Report Version:  104

Exception Type:  EXC_CRASH (SIGABRT)
Exception Codes: 0x00000000, 0x00000000
Crashed Thread:  0

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   libsystem_kernel.dylib          0x3028432c __pthread_kill + 8
1   libsystem_c.dylib               0x37725f54 pthread_kill + 48
2   libsystem_c.dylib               0x3771efe4 abort + 88
3   MyAppName                           0x00104aa0 0x5e000 + 682656
4   Foundation                      0x34ebc1b0 -[NSObject(NSThreadPerformAdditions) performSelector:onThread:withObject:waitUntilDone:modes:] + 260
5   Foundation                      0x34ebbe42 -[NSObject(NSThreadPerformAdditions) performSelectorOnMainThread:withObject:waitUntilDone:] + 130
6   MyAppName                           0x00104924 0x5e000 + 682276
7   MyAppName                           0x00118634 0x5e000 + 763444
8   MyAppName                           0x00116b36 0x5e000 + 756534
9   libsystem_c.dylib               0x37730532 _sigtramp + 42
10  libsystem_c.dylib               0x37725f54 pthread_kill + 48
11  libsystem_c.dylib               0x3771efe4 abort + 88
12  MyAppName                           0x00118658 0x5e000 + 763480
13  CoreFoundation                  0x37c23980 __handleUncaughtException + 68
14  libobjc.A.dylib                 0x3776f2ca _objc_terminate + 122
15  libc++abi.dylib                 0x3017e3be _ZL19safe_handler_callerPFvvE + 70
16  libc++abi.dylib                 0x3017e44a std::terminate() + 14
17  libc++abi.dylib                 0x3017f81e __cxa_rethrow + 82
18  libobjc.A.dylib                 0x3776f22e objc_exception_rethrow + 6
19  CoreFoundation                  0x37b7953e CFRunLoopRunSpecific + 398
20  CoreFoundation                  0x37b7939e CFRunLoopRunInMode + 98
21  GraphicsServices                0x37950fc6 GSEventRunModal + 150
22  UIKit                           0x316f973c UIApplicationMain + 1084
23  MyAppName                           0x0005ffc8 0x5e000 + 8136
24  MyAppName                           0x0005ff6c 0x5e000 + 8044

Thread 1 name:  Dispatch queue: com.apple.libdispatch-manager
Thread 1:
0   libsystem_kernel.dylib          0x302743b4 kevent + 24
1   libdispatch.dylib               0x307dff74 _dispatch_mgr_invoke + 708
2   libdispatch.dylib               0x307dfc92 _dispatch_mgr_thread + 30

Thread 2 name:  WebThread
Thread 2:
0   libsystem_kernel.dylib          0x30274010 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x30274206 mach_msg + 50
2   CoreFoundation                  0x37bf741c __CFRunLoopServiceMachPort + 120
3   CoreFoundation                  0x37bf6154 __CFRunLoopRun + 876
4   CoreFoundation                  0x37b794d6 CFRunLoopRunSpecific + 294
5   CoreFoundation                  0x37b7939e CFRunLoopRunInMode + 98
6   WebCore                         0x32650128 _ZL12RunWebThreadPv + 396
7   libsystem_c.dylib               0x376e7c16 _pthread_start + 314
8   libsystem_c.dylib               0x376e7ad0 thread_start + 0

Thread 3 name:  com.apple.NSURLConnectionLoader
Thread 3:
0   libsystem_kernel.dylib          0x30274010 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x30274206 mach_msg + 50
2   CoreFoundation                  0x37bf741c __CFRunLoopServiceMachPort + 120
3   CoreFoundation                  0x37bf6154 __CFRunLoopRun + 876
4   CoreFoundation                  0x37b794d6 CFRunLoopRunSpecific + 294
5   CoreFoundation                  0x37b7939e CFRunLoopRunInMode + 98
6   Foundation                      0x34ec8bc2 +[NSURLConnection(Loader) _resourceLoadLoop:] + 302
7   Foundation                      0x34ec8a8a -[NSThread main] + 66
8   Foundation                      0x34f5c59a __NSThread__main__ + 1042
9   libsystem_c.dylib               0x376e7c16 _pthread_start + 314
10  libsystem_c.dylib               0x376e7ad0 thread_start + 0

Thread 4 name:  com.apple.CFSocket.private
Thread 4:
0   libsystem_kernel.dylib          0x30284570 __select + 20
1   CoreFoundation                  0x37bfb66a __CFSocketManager + 726
2   libsystem_c.dylib               0x376e7c16 _pthread_start + 314
3   libsystem_c.dylib               0x376e7ad0 thread_start + 0

Thread 5 name:  Dispatch queue: com.apple.CFURLCACHE_work_queue
Thread 5:
0   libsystem_kernel.dylib          0x30275ac4 fsync + 8
1   libsqlite3.dylib                0x30741656 0x30704000 + 251478
2   libsqlite3.dylib                0x30746434 0x30704000 + 271412
3   libsqlite3.dylib                0x30741394 0x30704000 + 250772
4   libsqlite3.dylib                0x30737350 0x30704000 + 209744
5   libsqlite3.dylib                0x30719a6c 0x30704000 + 88684
6   libsqlite3.dylib                0x3072ccb4 0x30704000 + 167092
7   libsqlite3.dylib                0x3072b6ce sqlite3_step + 2098
8   libsqlite3.dylib                0x3070a732 sqlite3_exec + 366
9   CFNetwork                       0x33a3cedc __CFURLCache::ExecSQLStatement_NoLock(sqlite3*, char const*, int (*)(void*, int, char**, char**), void*, long) + 32
10  CFNetwork                       0x33a3fc7c _ZL24_CFURLCacheTimerCallbackPv + 320
11  libdispatch.dylib               0x307e133e _dispatch_source_invoke + 510
12  libdispatch.dylib               0x307dec60 _dispatch_queue_invoke$VARIANT$mp + 44
13  libdispatch.dylib               0x307ded9e _dispatch_queue_drain + 198
14  libdispatch.dylib               0x307dec56 _dispatch_queue_invoke$VARIANT$mp + 34
15  libdispatch.dylib               0x307df860 _dispatch_worker_thread2 + 204
16  libsystem_c.dylib               0x376e21c8 _pthread_wqthread + 288
17  libsystem_c.dylib               0x376e209c start_wqthread + 0

Thread 6:
0   libsystem_kernel.dylib          0x30284cd4 __workq_kernreturn + 8
1   libsystem_c.dylib               0x376e230a _pthread_wqthread + 610
2   libsystem_c.dylib               0x376e209c start_wqthread + 0

Thread 7:
0   libsystem_kernel.dylib          0x30284cd4 __workq_kernreturn + 8
1   libsystem_c.dylib               0x376e230a _pthread_wqthread + 610
2   libsystem_c.dylib               0x376e209c start_wqthread + 0

Thread 8:
0   libsystem_kernel.dylib          0x30274010 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x30274206 mach_msg + 50
2   CoreFoundation                  0x37bf741c __CFRunLoopServiceMachPort + 120
3   CoreFoundation                  0x37bf6154 __CFRunLoopRun + 876
4   CoreFoundation                  0x37b794d6 CFRunLoopRunSpecific + 294
5   CoreFoundation                  0x37b7939e CFRunLoopRunInMode + 98
6   Foundation                      0x34ebcb7e -[NSRunLoop(NSRunLoop) runMode:beforeDate:] + 250
7   Foundation                      0x34ed652c -[NSRunLoop(NSRunLoop) run] + 72
8   JAYPORE                         0x00108a9a 0x5e000 + 699034
9   Foundation                      0x34ec8a8a -[NSThread main] + 66
10  Foundation                      0x34f5c59a __NSThread__main__ + 1042
11  libsystem_c.dylib               0x376e7c16 _pthread_start + 314
12  libsystem_c.dylib               0x376e7ad0 thread_start + 0

Thread 9:
0   libsystem_kernel.dylib          0x30284cd4 __workq_kernreturn + 8
1   libsystem_c.dylib               0x376e230a _pthread_wqthread + 610
2   libsystem_c.dylib               0x376e209c start_wqthread + 0

Thread 10:
0   libsystem_kernel.dylib          0x30284cd4 __workq_kernreturn + 8
1   libsystem_c.dylib               0x376e230a _pthread_wqthread + 610
2   libsystem_c.dylib               0x376e209c start_wqthread + 0

Thread 11:
0   libsystem_kernel.dylib          0x30284cd4 __workq_kernreturn + 8
1   libsystem_c.dylib               0x376e230a _pthread_wqthread + 610
2   libsystem_c.dylib               0x376e209c start_wqthread + 0

Thread 0 crashed with ARM Thread State:
    r0: 0x00000000    r1: 0x00000000      r2: 0x00000001      r3: 0x00000000
    r4: 0x00000006    r5: 0x3f504ce8      r6: 0x30caec02      r7: 0x2fe5c4ec
    r8: 0x00000006    r9: 0x00000000     r10: 0x00000005     r11: 0x2fe5c558
    ip: 0x00000148    sp: 0x2fe5c4e0      lr: 0x37725f5b      pc: 0x3028432c
  cpsr: 0x00000010

Binary Images:
   0x5e000 -   0x14efff +JAYPORE armv7  <a9b02230373d3b4aba282d21f94fb780> /var/mobile/Applications/EF2C944B-4C26-4EB6-B41E-F89CF2232ADB/JAYPORE.app/JAYPORE
 0x1178000 -  0x1182fff  AccessibilitySettingsLoader armv7  <45d7c264810c364b976dba254572d73d> /System/Library/AccessibilityBundles/AccessibilitySettingsLoader.bundle/AccessibilitySettingsLoader
0x2fe5d000 - 0x2fe7efff  dyld armv7  <be7c0b491a943054ad12eb5060f1da06> /usr/lib/dyld
0x3001c000 - 0x30179fff  libmecabra.dylib armv7  <170c82a3c716372abe7ae0aae96d4805> /usr/lib/libmecabra.dylib 
```

...一长串二进制图像。

现在，当我使用“atos”从线程 0（导致崩溃）获取崩溃原因时

```
3   MyAppName                           0x00104aa0 0x5e000 + 682656 
```

使用上面的地址，它给了我这个输出：

```
MAC66:Resources sourabhbhardwaj$ atos -arch arm -o /Users/myPath/MyAppName.app.dSYM/Contents/Resources/DWARF/MyAppName 0x00079f6c 0x78000 + 8044
-[FirstViewController setUIAndText] (in MyAppName) (FirstViewController.m:85)
-[SecondViewController DeleteByID:] (in MyAppName) (SecondViewController.m:415)
+
-[MyController viewWillAppear:] (in MyAppName) (MyController.m:137) 
```

这不是我所做的实际崩溃线。我在其他视图控制器上崩溃了，输出完全不同。这怎么可能？是的，我已经交叉检查了我对该二进制文件使用完全相同的 dSYM 文件。

需要快速帮助。

谢谢苏拉布

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-04T00:52:10.597

我确信这为时已晚，但以防万一：您可能没有为 atos 提供它需要的所有参数。特别是，确保您指定（使用 -l）应用程序的加载地址，以及（使用 -arch）架构。您可以在上面引用的二进制图像行中找到它（它随每个故障转储而变化）：

```
0x5e000 -   0x14efff +JAYPORE armv7  <a9b02230373d3b4aba282d21f94fb780> /var/mobile/Applications/EF2C944B-4C26-4EB6-B41E-F89CF2232ADB/JAYPORE.app/JAYPORE 
```

0x5e000 是加载地址。所以尝试运行类似`xcrun atos -l 0x5e000 -arch armv7 -o YourArchive.xcarchive/Products/Applications/YourApp.app/YourApp 0x00104aa0`.

[您可以在Kerni 对这个类似问题的回答](https://stackoverflow.com/a/13576028/225176)中找到有关加载地址是什么以及为什么每次都更改的更多详细信息。（虽然知道它是如何工作的很好，但使用 -l 参数到 atos 通常更方便，而不是自己做数学。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T01:31:12.567

在符号化之前，确保你有相同`.app`的和`.dSYM`崩溃的构建，否则它不会被正确地符号化。

# hadoop - Hadoop排序输入顺序

> ID：11468482
> 
> 赞同：2
> 
> 时间：2012-07-13T10:14:02.013
> 
> 标签：hadoop

如果我的工作的输入是文件集 [a, b, c, d]，那么严格排序的输入是 [map(a.0), map(a.1), map(b.0), map( b.1)、地图(c.0)、地图(c.1)、地图(d.0)、地图(d.1)]？

我的动机是拥有一系列文件（当然会被分成块），其行是 [key, value]; 其中每个键和值都是一个简单的字符串。尽管没有明确的顺序定义字段，但我希望按照它们在输入中出现的顺序在每个键的 reducer 中将这些值连接在一起。

非常感谢任何建议；事实证明，这对谷歌来说是一个困难的查询。

### 例子

输入格式

```
A First
A Another
A Third
B First
C First
C Another 
```

期望的输出

```
A First,Another,Third
B First
C First,Another 
```

重申一下，鉴于文件存储在单独的块中，我不确定是否可以依靠正确的顺序获得 First-Third。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T16:15:41.593

解决此问题的一种方法是使用文件中 TextInputFormat 的字节偏移量作为复合键的一部分，并使用辅助排序来确保将值按顺序发送到 reducer。这样，您可以确保减速器看到输入按您想要的键按照它在文件中出现的顺序进行分区。如果您有多个输入文件，那么这种方法将不起作用，因为每个新文件都会重置字节计数器。

使用流式 API，您需要将其传递`-inputformat TextInputFormat -D stream.map.input.ignoreKey=false`给作业，以便您实际上将字节偏移量作为键（[默认情况下](http://svn.apache.org/repos/asf/hadoop/common/trunk/hadoop-tools/hadoop-streaming/src/main/java/org/apache/hadoop/streaming/PipeMapper.java)，如果 inputformat 是 TextInputFormat，PipeMapper 不会给您键。即使您明确设置了 TextInputFormat 标志[所以你需要设置额外的 ignoreKey 标志](http://mail-archives.apache.org/mod_mbox/hadoop-mapreduce-commits/201006.mbox/%3C20100602074544.8078D23888FE@eris.apache.org%3E)）。

如果您从映射器发出多个键，请确保设置以下标志，以便您的输出在第一个键上进行分区，并在减速器中的第一个和第二个键上排序：

```
-partitioner org.apache.hadoop.mapred.lib.KeyFieldBasedPartitioner
-D stream.num.map.output.key.fields=2
-D mapred.text.key.partitioner.options="-k1,1"
-D mapred.output.key.comparator.class="org.apache.hadoop.mapred.lib.KeyFieldBasedComparator"
-D mapreduce.partition.keycomparator.options="-k1 -k2n" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T10:22:39.280

不，您无法保证使用 Hadoop 中的标准数据流（即标准排序器、分区器、分组器）时这些值将按该顺序排列。唯一可以保证的是键的顺序（A、B、C）。

为了实现您想要的，您必须编写自己的排序器并在键中包含值（第一、第二、第三）=> 新键将是：

```
 "A First"
  "A Second"
  ... 
```

但是，在这种情况下，问题是这些键最终会出现在不同的分区中（标准哈希分区器很可能会将“A first”分配给一个分区，将“A second”分配给另一个分区）所以，为了避免这个问题您还应该插入您自己的分区程序，它将仅使用密钥的第一部分（即 A）来进行分区。您还应该定义分组器，否则“A first”、“A second”将不会一起传递给同一个 reduce 调用。

所以你的地图功能的输出应该是：

```
 "A First"    First
 "A Second"   Second
 ... 
```

换句话说，映射器输出的值应该保持原样。否则你将无法获得减速器中的值。

# .net - 编码的 UI 测试和负载测试

> ID：11468484
> 
> 赞同：2
> 
> 时间：2012-07-13T10:14:16.750
> 
> 标签：.net, visual-studio, unit-testing, mstest, coded-ui-tests

我一直在搜索互联网，但未能找到任何真实信息，是否可以在 VS 中记录编码 UI 测试并在 VS 中运行负载测试？

如果可以指出如何将编码的 UI 测试连接到负载测试的步骤，因为我无法找到如何执行此操作。

我正在尝试加载测试我希望采用特定路线的 UI。我正在使用 VS 2012，但如果需要，可以使用 VS 2010。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T11:28:12.430

首先阅读[在负载测试中使用编码的 UI 测试](https://msdn.microsoft.com/library/dn250793.aspx)。然后

*   创建编码的 UI 测试并确保它正常工作
*   创建负载测试并在负载测试向导的测试混合步骤中，添加您创建的编码 UI 测试并根据需要配置负载测试的其余部分。

请注意，编码 UI 测试驱动鼠标和键盘，因此每个测试代理一次只能运行一个虚拟用户。您还需要确保将测试代理配置为在[交互式进程](http://msdn.microsoft.com/en-us/library/ee291332.aspx)模式下运行。

# c++ - C++中的字符串操作

> ID：11468486
> 
> 赞同：0
> 
> 时间：2012-07-13T10:14:17.690
> 
> 标签：c++

我有一个需要操作的字符串接口（const char* 值，uint32_t 长度）。

1）我必须全部小写

2）我必须删除在';'之后找到的所有字符 分号

谁能帮我指出任何可以做到这一点的 C/C++ 库？无需我遍历 char 数组。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T10:18:47.020

1)

```
std::transform(str.begin(), str.end(), str.begin(), ::tolower); 
```

2)

```
str = str.substr(0, str.find(";")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T10:30:50.557

见这里： http: **[//ideone.com/fwJx5](http://ideone.com/fwJx5)**：

```
#include <string>
#include <iostream>
#include <algorithm>

std::string interface(const char* value, uint32_t length)
{
    std::string s(value, length);
    std::transform(s.begin(), s.end(), s.begin(), [] (char ch) { return std::tolower(ch); });
    return s.substr(0, s.find(";"));
}

int main()
{
     std::cout << interface("Test Case Number 1; ignored text", 32) << '\n';
} 
```

输出：

```
test case number 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T10:22:41.707

我建议你先做（2），因为它可能会减少（1）要做的工作。

如果您坚持使用传统的 C 函数，您可以使用`strchr()`查找第一个 ';' 并将其替换为 '\0' （如果字符串是可变的）或使用指针算法复制到另一个缓冲区。

您可以使用`tolower()`将 ASCII（我假设您使用的是 ASCII）转换为小写，但您必须遍历剩余的循环才能执行此操作。

例如：

```
const char* str = "HELLO;WORLD";

// Make a mutable string - you might not need to do this
int strLen = strlen( str );
char mStr[ strLen + 1];
strncpy( mStr, str, strLen );

cout << mStr << endl; // Prints "HELLO;WORLD"

// Get rid of the ';' onwards.
char* e = strchr( mStr, ';' );
*e = '\0';

cout << mStr << endl; // Prints "HELLO"

for ( char* p = mStr; p != e; *p = tolower(*p), p++ );

cout << mStr << endl; // Prints "hello" 
```

# ios - 通过蓝牙或 Wifi 连接到 IDevices

> ID：11468493
> 
> 赞同：1
> 
> 时间：2012-07-13T10:14:47.097
> 
> 标签：ios, cocoa-touch

是否有任何 api 可以让我们通过 wifi/蓝牙在两个 iPad/Iphone 之间建立连接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T10:32:20.290

这取决于你想做什么。如果它用于游戏，那么 GameKit API 允许这样做。检查下面的游戏套件编程指南 -

[GameKit 编程指南 - Apple](http://developer.apple.com/library/ios/#DOCUMENTATION/NetworkingInternet/Conceptual/GameKit_Guide/Introduction/Introduction.html)

# wpf - 组合框到静态属性的双向绑定

> ID：11468502
> 
> 赞同：2
> 
> 时间：2012-07-13T10:15:38.690
> 
> 标签：wpf, xaml, data-binding, combobox, two-way-binding

**- - - -编辑 - - -**

所以，我认为**我的代码是正确的，你所有答案的代码片段也是正确的**。感谢那。我的问题是我的开发机器运行的 .NET4.5 行为不同！相同的程序（针对 .NET4.0 编译）在 .NET4.0 的机器上运行正确，但在 .NET4.5 的机器上运行不正确！

所以这是我修改后的[问题](https://stackoverflow.com/questions/11473256/twoway-binding-of-a-combobox-to-a-static-property-in-net-4-5)。

**- - - -编辑 - - -**

**首先，我如何将组合框双向绑定到数据上下文的简单示例：**

查看型号：

```
public class MainWindowViewModel
{
    public List<String> MyElements { get; set; }
    public string SelectedElement { get; set; }

    public MainWindowViewModel()
    {
        MyElements = new List<string>() {"a", "b", "c"};
        SelectedElement = "a";
    }
} 
```

和代码隐藏

```
private readonly MainWindowViewModel _viewModel = new MainWindowViewModel();
public MainWindow()
{
    InitializeComponent();
    DataContext = _viewModel;
} 
```

和我的 XAML

```
<ComboBox
        ItemsSource="{Binding MyElements, Mode=OneWay}"
        SelectedItem="{Binding SelectedElement}" /> 
```

这很好用，如果我选择一个带有组合框的项目，它就会绑定到我的视图模型。

**好的，现在我想让我的 viewModel 静态但仍然双向绑定 selectedItem。我试试这个：**

```
public class MainWindowViewModel
{
    public static List<String> MyElements { get; set; }
    public static string SelectedElement { get; set; }

    static MainWindowViewModel()
    {
        MyElements = new List<string>() {"a", "b", "c"};
        SelectedElement = "a";
    }
} 
```

我不再需要在代码隐藏中设置数据上下文，而且我知道，xaml 需要一个用于双向绑定的实例，所以我仍然有默认构造函数。然后我绑定组合框

```
<Window.Resources>
    <me:MainWindowViewModel x:Key="model"/>
</Window.Resources>

<StackPanel>
    <ComboBox
        ItemsSource="{Binding Source={x:Static me:MainWindowViewModel.MyElements}, Mode=OneWay}"
        SelectedItem="{Binding Source={StaticResource model}, Path=SelectedElement}" />
</StackPanel> 
```

初始值已正确绑定，但如果我使用组合框选择另一个项目，它不会反映在我的 viewModel 中。我究竟做错了什么？

**编辑：**

如果我对 TextBox 使用完全相同的绑定字符串并更改框中的文本，它会反映在属性中。

```
<TextBox Text="{Binding Source={StaticResource model}, Path=SelectedElement}"/> 
```

所以显然我的绑定字符串是正确的，但我使用组合框的方式似乎是错误的。我也尝试绑定`SelectedValue`......也没有改变。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T11:46:56.400

仅在示例项目中检查，工作正常

```
public class ViewModel
{
    static ViewModel()
    {
        Items=new ObservableCollection<string>();
        SelectedItem = "222";
        Items.Add("111");
        Items.Add("222");
        Items.Add("333");
        Items.Add("444");
        Items.Add("555");
    }
    private static string _selectedItem;
    public static string SelectedItem
    {
        get { return _selectedItem; }
        set { _selectedItem = value;
            MessageBox.Show("Item " + value + " was selected");
        }
    }

    private static ObservableCollection<string> _items;
    public static ObservableCollection<string> Items
    {
        get { return _items; }
        set { _items = value; }
    }
} 
```

和 xml

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:my="clr-namespace:WpfApplication1"
    Title="MainWindow" Height="200" Width="300">
<Grid>
    <Grid.Resources>
        <my:ViewModel x:Key="viewM"/>
    </Grid.Resources>
    <ComboBox Height="23" HorizontalAlignment="Left" Margin="101,12,0,0" Name="comboBox1" VerticalAlignment="Top" Width="146" 
               ItemsSource="{Binding Source={x:Static my:ViewModel.Items}, Mode=OneWay}"
              SelectedItem="{Binding Source={StaticResource viewM}, Path=SelectedItem}" />
    </Grid>
</Window> 
```

我已经上传了[样本](http://dl.dropbox.com/u/62983561/Pro/StaticBind.7z)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T10:54:15.423

您在实例和静态属性之间感到困惑：您不需要绑定静态对象。

```
<ComboBox
        ItemsSource="{x:Static me:MainWindowViewModel.MyElements}"
        SelectedItem="{x:Static me:MainWindowViewModel.SelectedElement}" /> 
```

不过，您应该实施`INotifyPropertyChanged`。

绑定是关于解析要从中获取数据的正确实例。
如果没有实例的意义，就不需要绑定。

# objective-c - MasterViewController中的UITableView和UIView，UIView不可见

> ID：11468505
> 
> 赞同：-1
> 
> 时间：2012-07-13T10:15:48.657
> 
> 标签：objective-c, xcode, ipad, master-detail

我将在 MasterView 的顶部使用 UITableView，在 MasterView 的底部使用 UIView。这是我的临时应用程序：[http](http://www.file-upload.net/download-4547664/MDA_protocol-8.zip.html) ://www.file-upload.net/download-4547664/MDA_protocol-8.zip.html 。不幸的是 UIView 是不可见的，并且 UITableView 发生在 MasterView 中。也许有些设置是错误的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T15:30:27.447

可能是因为您的 MasterView 是 UITableViewController 类型，它仅用于保存 UITableView。我建议让你的 MasterView 只是一个 UIViewController 并在顶部添加一个 TableView 对象，在底部添加一个 UIView。

# vb.net - 如何从 COM-AddIn 中找出安装目录/路径

> ID：11468509
> 
> 赞同：1
> 
> 时间：2012-07-13T10:16:13.347
> 
> 标签：vb.net, excel, ms-office, add-in, comaddin

我有一个来自 Excel 的 COM-AddIns 列表，并想找出 AddIns 的安装路径，但对象“Microsoft.Office.Core.COMAddIn”只有以下属性：

```
Application
Connect
Creator
Description
Guid
Object
Parent
ProgId 
```

并且属性对象是“Nothing/Null”。

有没有办法使用互操作？还是我使用 guid 并在注册表中搜索？

# java - java 引用占用多少堆空间？

> ID：11468510
> 
> 赞同：1
> 
> 时间：2012-07-13T10:16:13.763
> 
> 标签：java, memory, jvm

对于几乎所有平台，一个 int 占用 4 个字节。Java参考怎么样？

```
Map<String, String> m = null; 
```

变量 m 占用 32bit/64bit JVM 多少空间？

```
byte[] b = new byte[10]; 
```

上面的字节数组占用了 10 个字节，但是对 b 的引用又占用了多少额外的空间呢？我认为 b 至少包括一个地址和一个长度，谁能给我详细信息？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-13T10:21:01.160

对象中的引用在大多数 JVM（无论是 32 位还是 64 位）上使用 4 个字节，因为最近的 64 位 JVM 使用[Compressed Oops](http://docs.oracle.com/javase/7/docs/technotes/guides/vm/performance-enhancements-7.html#compressedOop)来获得高达 32 GB 的堆在某些 64 位 JVM 上它需要 8 个字节。

但是，堆栈上的大小通常不计算在内，只有堆大小很重要，在这种情况下，它不需要堆上的大小。

实际上使用约 24 字节，`byte[10]`因为它包括 8-12 字节的标头，并且在 8 字节边界上分配了一个对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T10:20:43.600

从字面上看，在大多数 JVM 上，32 位 JVM 上的所有引用占用 4 个字节，一个 64 位 JVM，一个引用占用 8 个字节。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T10:30:52.693

根据给出的规范，引用变量的内存没有限制，这取决于 JVM 的开发人员，他们可以在 32 位计算机上使用 32 位，在 64 位计算机上使用 32 或 64 位，这完全取决于 jvm 程序员

# twitter-bootstrap - Twitter Bootstrap 模式在 IE7 中不起作用

> ID：11468514
> 
> 赞同：3
> 
> 时间：2012-07-13T10:16:27.817
> 
> 标签：twitter-bootstrap, modal-dialog

```
<div class="modal hide" id="modalId">
  <div class="modal-header" style="padding:30px 10px">
    <h3 style="float:left">Some text here</h3>
    <input type="image" src="image_path" alt="loading..." class="pull-right" />
  </div>
  <div class="modal-body" style="clear:both">
    <!-- I have a table here-->   
  </div>
  <div class="modal-footer">
     <!-- I have a button here -->
  </div>
</div> 
```

将在按钮单击时调用的模态代码

```
$('#modalId').modal({
    backdrop: 'static',
    keyboard: false,
    show: true
}); 
```

在这里，我面临的问题是，在模态弹出窗口中，即将出现一个黑色窗口。

这在 Firefox、IE 8 中完美运行，但在 IE7 中却不行。

我尝试了很多，但在这里找不到问题。:( 有人可以看看吗。thubjsdaps14

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-17T11:03:47.907

我在 bootstrap.js 中评论了以下行

`appendTo(document.body)`

并添加

`.insertAfter(this.$element)`

有关更多详细信息，请参阅[https://github.com/twitter/bootstrap/issues/3217](https://github.com/twitter/bootstrap/issues/3217)

现在它在 IE7 中可以正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T13:00:20.367

我建议先让基本模式工作，你有一些 CSS 可能会导致问题（`clear: both`突出）。

试试这个，看看它是否有效：

```
<div class="modal" id="modalId">
  <div class="modal-header">
    <h3>Test header</h3>
  </div>
  <div class="modal-body" style="clear:both">
    Test body 
  </div>
  <div class="modal-footer">
     Test footer
  </div>
</div>

$('#modalId').modal(); 
```

# actionscript-3 - 通过 ActionScript 发布到 Facebook Wall

> ID：11468523
> 
> 赞同：0
> 
> 时间：2012-07-13T10:17:04.500
> 
> 标签：actionscript-3, facebook-graph-api, actionscript

我正在尝试将某些内容发布到用户的墙上。但是我不断收到此错误。

> TypeError：错误 #1006：值不是函数。
> 在 com.facebook.graph.core::AbstractFacebook/handleRequestLoad()
> 在 com.facebook.graph.net::AbstractFacebookRequest/dispatchComplete()
> 在 com.facebook.graph.net::AbstractFacebookRequest/handleDataLoad()
> 在 com.facebook。 graph.net::AbstractFacebookRequest/handleURLLoaderComplete()
> 在 flash.events::EventDispatcher/dispatchEventFunction()
> 在 flash.events::EventDispatcher/dispatchEvent()
> 在 flash.net::URLLoader/onComplete()

这是代码：

```
public function PostToUserWall(userId:String, message:String, name:String, caption:String, description:String, link:String):void
    {
        var params: Object = new Object;
        params.message = message;
        params.name = name;
        params.caption = caption;
        params.description = description;
        params.link = link;
        params.picture = "www.something.com/something.png";
        Facebook.api("/"+userId+"/feed", null, params, "POST");
    } 
```

我试图了解这个问题是什么。但不知何故无法弄清楚。这里有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T10:29:18.910

只有堆栈跟踪才能继续进行调试，这有点挑战。发布代码将提高有人能够帮助您的可能性。但是，在我看来`parameter`，您调用 Facebook API 的回调不是一个函数。我建议您仔细检查您在 API 调用中传递的参数。

**编辑：**

facebook API 调用的第二个参数应该是返回结果时 API 将执行的函数。尝试按如下方式更新您的代码：

```
public function PostToUserWall(userId:String, message:String, name:String, caption:String, description:String, link:String):void
{
        var params: Object = new Object;
        params.message = message;
        params.name = name;
        params.caption = caption;
        params.description = description;
        params.link = link;
        params.picture = "www.something.com/something.png";
        Facebook.api("/"+userId+"/feed", resultHandler, params, "POST");
}

private function resultHandler():void
{
    trace("Result!");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T01:09:15.757

以下是两种应该有效的方法：

这个从您的 swf 发布位图。

```
public function postImageToUserWall(bmp:Bitmap, caption:String):void
{
    Facebook.api(_userID +'/photos', onPicPostedToUserWall, {message:caption, image:bmp, fileName:'file.png'}, URLRequestMethod.POST);
}

private function onPicPostedToUserWall(result:Object, fail:Object):void
{
    if (result)
    {
        //result.id is id of photo that was just posted - used to link to pic when posting to recipient's wall
    }
    else if (fail)
    {
        //
    }
} 
```

这个发布了来自链接的图片：

```
public function postLinkToFeed(params:Object)
{
    Facebook.ui('feed', {   
                            name: params.name, 
                            caption: params.caption, 
                            description: params.description, 
                            picture: params.imageURL, 
                            link: params.link,
                            to: params.toID,
                            from: params.fromID
                        }, onPostToFeedComplete, 'iframe');
    }

private function onPostToFeedComplete(result:Object)
{
    //
} 
```

# c - 没有多线程套接字的多个连接

> ID：11468530
> 
> 赞同：0
> 
> 时间：2012-07-13T10:17:51.103
> 
> 标签：c, sockets, tcp, addressbook

我的客户端/服务器地址簿有问题。当我连接第一个客户端时一切正常。之后，服务器接受来自其他客户端的其他连接，但它不响应任何请求（添加数字等......）我该怎么办？谢谢你

```
int optval;
socklen_t optlen = sizeof(optval);
char choice[MAX];
char buff[MAX]; /* dati di invio e ricezione */
char buff1[MAX];
char buffNome[MAX];
char buffCognome[MAX];
char buffTelefono[MAX];
char buffMail[MAX];
struct sockaddr_in server_addr; /* indirizzo del server */
struct sockaddr_in client_addr; /* indirizzo del client */
int sd_server, sd_client; /* i socket descriptor usati per identificare server e client */

if((sd_server = socket(AF_INET, SOCK_STREAM, 0)) < 0)
    printf("Errore nella creazione del server\n");

optval = 1;
optlen = sizeof(optval);
if(setsockopt(sd_server, SOL_SOCKET, SO_REUSEADDR, &optval, optlen) < 0) {
  perror("setsockopt()");
  close(sd_server);
  exit(EXIT_FAILURE);
}

server_addr.sin_family = AF_INET; /* la famiglia dei protocolli */
server_addr.sin_port = htons(1745); /* la porta in ascolto */
server_addr.sin_addr.s_addr = INADDR_ANY; /* dato che è un server bisogna associargli l'indirizzo della macchina su cui sta girando */

if(bind(sd_server, (struct sockaddr *)&server_addr, sizeof(server_addr)) < 0)
    printf("Errore di binding\n");

listen (sd_server, 20);

int address_size = sizeof(client_addr); 

struct elemento *lista = NULL;
struct elementoutente *listautente = NULL;

  while (1) {
if((sd_client = accept(sd_server, (struct sockaddr *)&client_addr, &address_size)) < 0)
    printf("Errore nella chiamata accept\n");

while(1){

.... CODE.....

}
close(sd_server); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T10:24:09.893

如果您只处理一个客户端请求然后返回接受循环，那么您可以不用线程/分叉而侥幸逃脱。换句话说，摆脱内部的 while(1) 循环。确保您的客户端打开套接字，发出一个请求，然后关闭套接字（这是 HTTP 1.0 的正常操作）。

这是非常低效的，但它会让你继续前进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T19:37:04.780

使您在其上调用接受的侦听套接字为非阻塞。使所有连接的客户端套接字也非阻塞。在所有这些套接字上使用顶级 select/poll/epoll。每当连接的套接字上发生事件，或者客户端在侦听套接字上等待连接时，您都会收到通知。处理该通知。这是一种仅使用一个进程而无需为单独的客户端处理程序进入 fork 或多线程的有效方法。

# iphone - 解析响应值

> ID：11468535
> 
> 赞同：-1
> 
> 时间：2012-07-13T10:18:18.720
> 
> 标签：iphone, objective-c, ios, xml

我需要在 iPhone 中解析以下内容，我该怎么做？有谁知道请帮帮我

```
<boolean xmlns="http://schemas.microsoft.com/2003/10/Serialization/">true</boolean> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T10:19:13.243

这就是我们有[NSXMLParser 类的原因。](https://developer.apple.com/library/mac/ipad/#documentation/Cocoa/Reference/Foundation/Classes/NSXMLParser_Class/Reference/Reference.html)

# android - Android 图库放大/缩小

> ID：11468536
> 
> 赞同：7
> 
> 时间：2012-07-13T10:18:23.820
> 
> 标签：android, image, listview, zooming

您好我正在使用图库小部件来显示从 Internet 下载的图像。

显示几张图像，我希望在人们在屏幕上上下滑动时进行逐渐缩放。我知道如何实现触摸事件唯一我不知道如何使整个画廊视图逐渐增长。我不想放大一张图像我希望整个画廊逐渐放大/缩小。

EDIT3：我设法缩放画廊的可见部分，但问题是我需要找到一种方法让画廊了解它并更新它的其他孩子。

发生的情况是，如果 3 个图像可见，然后您开始缩放并且图库确实变小了，图像也是如此，但**在这种情况下我想要更多图像可见**，但我不知道如何达到所需的效果。这是整个代码：

```
public class Gallery1 extends Activity implements OnTouchListener {

private static final String TAG = "GalleryTest";
private float zoom=0.0f;
// Remember some things for zooming
PointF start = new PointF();
PointF mid = new PointF();
Gallery g;
LinearLayout layout2;
private ImageAdapter ad;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.gallery_1);
    layout2=(LinearLayout) findViewById(R.id.layout2);

    // Reference the Gallery view
    g = (Gallery) findViewById(R.id.gallery);
    // Set the adapter to our custom adapter (below)
    ad=new ImageAdapter(this);
    g.setAdapter(ad);

    layout2.setOnTouchListener(this);

}

public void zoomList(boolean increase) {
    Log.i(TAG, "startig animation");

    AnimatorSet set = new AnimatorSet();
    set.playTogether(

        ObjectAnimator.ofFloat(g, "scaleX", zoom),
        ObjectAnimator.ofFloat(g, "scaleY", zoom)

    );
    set.addListener(new AnimatorListener() {

        @Override
        public void onAnimationStart(Animator animation) {

        }

        @Override
        public void onAnimationRepeat(Animator animation) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onAnimationEnd(Animator animation) {

        }

        @Override
        public void onAnimationCancel(Animator animation) {
            // TODO Auto-generated method stub

        }
    });
    set.setDuration(100).start();

}

public class ImageAdapter extends BaseAdapter {
    private static final int ITEM_WIDTH = 136;
    private static final int ITEM_HEIGHT = 88;

    private final int mGalleryItemBackground;
    private final Context mContext;

    private final Integer[] mImageIds = {
            R.drawable.gallery_photo_1,
            R.drawable.gallery_photo_2,
            R.drawable.gallery_photo_3,
            R.drawable.gallery_photo_4,
            R.drawable.gallery_photo_5,
            R.drawable.gallery_photo_6,
            R.drawable.gallery_photo_7,
            R.drawable.gallery_photo_8
    };

    private final float mDensity;

    public ImageAdapter(Context c) {
        mContext = c;
        // See res/values/attrs.xml for the <declare-styleable> that defines
        // Gallery1.
        TypedArray a = obtainStyledAttributes(R.styleable.Gallery1);
        mGalleryItemBackground = a.getResourceId(
                R.styleable.Gallery1_android_galleryItemBackground, 1);
        a.recycle();

        mDensity = c.getResources().getDisplayMetrics().density;
    }

    public int getCount() {
        return mImageIds.length;
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        ImageView imageView;
        if (convertView == null) {
            convertView = new ImageView(mContext);

            imageView = (ImageView) convertView;
            imageView.setScaleType(ImageView.ScaleType.FIT_XY);
            imageView.setLayoutParams(new Gallery.LayoutParams(
                    (int) (ITEM_WIDTH * mDensity + 0.5f),
                    (int) (ITEM_HEIGHT * mDensity + 0.5f)));

        } else {
            imageView = (ImageView) convertView;
        }

        imageView.setImageResource(mImageIds[position]);

        return imageView;
    }
}

public boolean onTouch(View v, MotionEvent event) {

    if (event.getAction() == MotionEvent.ACTION_MOVE
            && event.getPointerCount() > 1) {
        midPoint(mid, event);

        if(mid.y > start.y){

            Log.i(TAG, "Going down (Math.abs(mid.y - start.y)= "+(Math.abs(mid.y - start.y))+" and zoom="+zoom); // going down so increase
            if ((Math.abs(mid.y - start.y) > 10) && (zoom<2.5f)){

                zoom=zoom+0.1f;
                midPoint(start, event);
                zoomList(true);

            }
            return true;
        }else if(mid.y < start.y){

            Log.i(TAG, "Going up (Math.abs(mid.y - start.y)= "+(Math.abs(mid.y - start.y))+" and zoom="+zoom); //smaller
            if ((Math.abs(mid.y - start.y) > 10) &&(zoom>0.1)){

                midPoint(start, event);
                zoom=zoom-0.1f;
                zoomList(false);

            }
            return true;
        }

    }

    else if (event.getAction() == MotionEvent.ACTION_POINTER_DOWN) {
        Log.e(TAG, "Pointer went down: " + event.getPointerCount());
        return true;
    }
    else if (event.getAction() == MotionEvent.ACTION_UP) {
        Log.i(TAG, "Pointer going up");
        return true;
    }
    else if (event.getAction() == MotionEvent.ACTION_DOWN) {
        Log.i(TAG, "Pointer going down");
        start.set(event.getX(), event.getY());
        return true;
    }

     return false;
       // indicate event was handled or not
   }

private void midPoint(PointF point, MotionEvent event) {
    float x = event.getX(0) + event.getX(1);
    float y = event.getY(0) + event.getY(1);
    point.set(x / 2, y / 2);
 } 
```

我意识到我可能不得不扩展 Gallery 甚至另一个 View 组或创建我自己的类，但我不知道从哪里开始：哪种方法使用负责缩放的方法......

EDIT4：我不知道他的问题是否足够清楚。以下是状态示例：

状态一：初始状态，我们有 3 张图像在视图中

状态 2：我们检测到 2 个手指向上的垂直触摸 = 我们必须缩小

状态3：我们开始缩放=在画廊或孩子上的动画？？？

状态 4：画廊检测到它的 3 个孩子更小

状态 5：画廊根据新的可用空间添加 1 个/多个孩子

最后更新：感谢所有发布的内容，但我终于得出了一个结论，那就是根本不使用 Gallery：1\. 它已被弃用 2\. 对于我的情况，它的可定制性不够

如果您想一次为多个图像设置动画，您可能需要考虑使用 OpenGl，我正在使用 libgdx 库： [https ://github.com/libgdx/libgdx](https://github.com/libgdx/libgdx)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T17:42:16.253

以下***ScalingGallery***实现可能会有所帮助。
此图库子类覆盖执行缩放的***getChildStaticTransformation(View child, Transformation t)***方法。您可以进一步自定义缩放参数以满足您自己的需要。

请注意***ScalingGalleryItemLayout.java***类。这是必要的，因为在您对子视图执行缩放操作后，它们的命中框不再有效，因此必须使用***getChildStaticTransformation(View child, Transformation t)***方法对其进行更新。

这是通过将每个画廊项目包装在扩展*LinearLayout的**ScalingGalleryItemLayout*中来完成的。同样，如果*LinearLayout*不能满足您对画廊项目进行布局的需求，您可以对其进行自定义以满足您自己的需求。

 **> ***文件：/src/com/example/ScalingGallery.java***

```
/**
 * A Customized Gallery component which alters the size and position of its items based on their position in the Gallery.
 */
public class ScalingGallery extends Gallery {

    public static final int ITEM_SPACING = -20;

    private static final float SIZE_SCALE_MULTIPLIER = 0.25f;
    private static final float ALPHA_SCALE_MULTIPLIER = 0.5f;
    private static final float X_OFFSET = 20.0f;

    /**
     * Implemented by child view to adjust the boundaries after it has been matrix transformed. 
     */
    public interface SetHitRectInterface {
        public void setHitRect(RectF newRect); 
    }

    /**
     * @param context
     *            Context that this Gallery will be used in.
     * @param attrs
     *            Attributes for this Gallery (via either xml or in-code)
     */
    public ScalingGallery(Context context, AttributeSet attrs) {
        super(context, attrs);
        setStaticTransformationsEnabled(true);
        setChildrenDrawingOrderEnabled(true);
    }

    /**
     * {@inheritDoc}
     * 
     * @see #setStaticTransformationsEnabled(boolean)
     *
     * This is where the scaling happens.
     */
    protected boolean getChildStaticTransformation(View child, Transformation t) {

        child.invalidate();

        t.clear();
        t.setTransformationType(Transformation.TYPE_BOTH);

        // Position of the child in the Gallery (... +2  +1  0  -1  -2 ... 0 being the middle)
        final int childPosition = getSelectedItemPosition() - getPositionForView(child);
        final int childPositionAbs = (int) Math.abs(childPosition);

        final float left = child.getLeft();
        final float top = child.getTop();
        final float right = child.getRight();
        final float bottom = child.getBottom();

        Matrix matrix = t.getMatrix();
        RectF modifiedHitBox = new RectF();

        // Change alpha, scale and translate non-middle child views.
        if (childPosition != 0) {

            final int height = child.getMeasuredHeight();
            final int width = child.getMeasuredWidth();

            // Scale the size.
            float scaledSize = 1.0f - (childPositionAbs * SIZE_SCALE_MULTIPLIER);
            if (scaledSize < 0) {
                scaledSize = 0;
            }
            matrix.setScale(scaledSize, scaledSize);

            float moveX = 0;
            float moveY = 0;

            // Moving from right to left -- linear move since the scaling is done with respect to top-left corner of the view.
            if (childPosition < 0) {
                moveX = ((childPositionAbs - 1) * SIZE_SCALE_MULTIPLIER * width) + X_OFFSET;
                moveX *= -1;

            } else { // Moving from left to right -- sum of the previous positions' x displacements.

                // X(n) = X(0) + X(1) + X(2) + ... + X(n-1)
                for (int i = childPositionAbs; i > 0; i--) {
                    moveX += (i * SIZE_SCALE_MULTIPLIER * width);
                }
                moveX += X_OFFSET;
            }

            // Moving down y-axis is linear.
            moveY = ((childPositionAbs * SIZE_SCALE_MULTIPLIER * height) / 2);

            matrix.postTranslate(moveX, moveY);

            // Scale alpha value.
            final float alpha = (1.0f / childPositionAbs) * ALPHA_SCALE_MULTIPLIER;
            t.setAlpha(alpha);

            // Calculate new hit box.  Since we moved the child, the hitbox is no longer lined up with the new child position.
            final float newLeft = left + moveX;
            final float newTop = top + moveY;
            final float newRight = newLeft + (width * scaledSize);
            final float newBottom = newTop + (height * scaledSize);
            modifiedHitBox = new RectF(newLeft, newTop, newRight, newBottom);
        } else {
            modifiedHitBox = new RectF(left, top, right, bottom);
        }

        // update child hit box so you can tap within the child's boundary
        ((SetHitRectInterface) child).setHitRect(modifiedHitBox);

        return true;
    }

    @Override
    protected void onLayout(boolean changed, int l, int t, int r, int b) {

        // Helps to smooth out jittering during scrolling.
        // read more - http://www.unwesen.de/2011/04/17/android-jittery-scrolling-gallery/
        final int viewsOnScreen = getLastVisiblePosition() - getFirstVisiblePosition();
        if (viewsOnScreen <= 0) {
            super.onLayout(changed, l, t, r, b);
        }
    }

    private int mLastDrawnPosition;

    @Override
    protected int getChildDrawingOrder(int childCount, int i) {

        //Reset the last position variable every time we are starting a new drawing loop
        if (i == 0) {
            mLastDrawnPosition = 0;
        }

        final int centerPosition = getSelectedItemPosition() - getFirstVisiblePosition();

        if (i == childCount - 1) {
            return centerPosition;
        } else if (i >= centerPosition) {
            mLastDrawnPosition++;
            return childCount - mLastDrawnPosition;
        } else {
            return i;
        }
    }
} 
```

> ***文件：/src/com/example/ScalingGalleryItemLayout.java***

```
public class ScalingGalleryItemLayout extends LinearLayout implements SetHitRectInterface {

    public ScalingGalleryItemLayout(Context context) {
        super(context);
    }

    public ScalingGalleryItemLayout(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public ScalingGalleryItemLayout(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    private Rect mTransformedRect;

    @Override
    public void setHitRect(RectF newRect) {

        if (newRect == null) {
            return;
        }

        if (mTransformedRect == null) {
            mTransformedRect = new Rect();
        }

        newRect.round(mTransformedRect);
    }

    @Override
    public void getHitRect(Rect outRect) {

        if (mTransformedRect == null) {
            super.getHitRect(outRect);
        } else {
            outRect.set(mTransformedRect);
        }
    }
} 
```

> ***文件：/res/layout/ScaledGalleryItemLayout.xml***

```
<?xml version="1.0" encoding="utf-8"?>
<com.example.ScalingGalleryItemLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/gallery_item_layout"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:gravity="center"
    android:orientation="vertical"
    android:padding="5dp" >

    <ImageView
        android:id="@+id/gallery_item_image"
        android:layout_width="360px"
        android:layout_height="210px"
        android:layout_gravity="center"
        android:antialias="true"
        android:background="@drawable/gallery_item_button_selector"
        android:cropToPadding="true"
        android:padding="35dp"
        android:scaleType="centerInside" />

    <TextView
        android:id="@+id/gallery_item_text"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:textColor="@drawable/white"
        android:textSize="30sp" />

</com.example.ScalingGalleryItemLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T10:58:19.033

要在动画完成后保持动画状态，只需对动画执行以下操作：

```
youranim.setFillAfter(true); 
```

编辑 ：

在我的项目中，我使用这种方法，我认为它对你有帮助：

[http://developer.sonymobile.com/wp/2011/04/12/how-to-take-advantage-of-the-pinch-to-zoom-feature-in-your-xperia%E2%84%A2- 10-apps-part-1/](http://developer.sonymobile.com/wp/2011/04/12/how-to-take-advantage-of-the-pinch-to-zoom-feature-in-your-xperia%E2%84%A2-10-apps-part-1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T07:08:22.213

你也可以为画廊做图像缩放捏选项。通过使用以下代码行：

您可以下载示例。

[https://github.com/alvinsj/android-image-gallery/downloads](https://github.com/alvinsj/android-image-gallery/downloads)

我希望这个例子对你有帮助..如果你有任何疑问可以问我.....

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T15:12:44.950

这是将android中的画廊组件与手势图像库 [gesture-imageView集成的解决方案](https://github.com/jasonpolites/gesture-imageview)

这是完整的示例代码 [SampleCode](http://www.mediafire.com/?w3f7j8ds8qik6av)**

# c# - 如何使用直方图获得白色像素强度？

> ID：11468537
> 
> 赞同：0
> 
> 时间：2012-07-13T10:18:24.180
> 
> 标签：c#, image-processing, histogram, aforge

![在此处输入图像描述](../Images/91d531c6806bc5efc0ccf6521e23cbe7.png)我正在开发一个车牌识别系统，我已经成功地找到了车牌区域。但我需要从图像中过滤掉错误的车牌区域。我在想是使用直方图并可能检查水平像素强度。

这是一个正确的方法吗？还是有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T19:12:38.367

印版是高对比度区域，您应该利用这一点。还有很多边缘，尤其是 90 度边缘。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T19:26:55.670

看看这个在 C# 中使用 EmguCV 的例子，也许你能找到一些有用的东西，它是识别停车标志的例子：[停车标志检测](http://www.emgu.com/wiki/index.php/Traffic_Sign_Detection_in_CSharp)

# sql-server - 在 SQL Server 中分组

> ID：11468538
> 
> 赞同：0
> 
> 时间：2012-07-13T10:18:30.137
> 
> 标签：sql-server, group-by

我在 SQL Server 中有一个查询

```
SELECT
    k12_dms_contacts_master.prefix_id AS prefix,
    k12_dms_contacts_master.first_name,
    k12_dms_contacts_master.last_name,
    k12_dms_contacts_master.email,
    k12_dms_institution_master.inst_name,
    k12_dms_institution_master.address,
    k12_dms_cities.name AS city_name,
    k12_dms_zip_codes.zip_code,
    k12_dms_institution_master.type_id,
    k12_dms_contacts_institution_jobtitles.glevel_id,
    k12_dms_districts.name AS district_name,
    k12_dms_counties.name AS county_name,
    k12_dms_institution_master.state_id,
    k12_dms_institution_master.phone,
    k12_dms_contacts_institution_jobtitles.job_title_id
FROM
    k12_dms_institution_master
INNER JOIN k12_dms_contacts_institution_jobtitles ON k12_dms_contacts_institution_jobtitles.inst_id = k12_dms_institution_master.id
INNER JOIN k12_dms_contacts_master ON k12_dms_contacts_institution_jobtitles.contact_id = k12_dms_contacts_master.id
INNER JOIN k12_dms_cities ON k12_dms_cities.id = k12_dms_institution_master.city_id
INNER JOIN k12_dms_districts ON k12_dms_districts.id = k12_dms_institution_master.district_id
INNER JOIN k12_dms_counties ON k12_dms_counties.id = k12_dms_institution_master.county_id
INNER JOIN k12_dms_zip_codes ON k12_dms_zip_codes.id = k12_dms_institution_master.zip_code_id
WHERE
    k12_dms_zip_codes.zip_code IN ('92678', '92679', '92688', '92690', '92691', '92692', '92693', '92694', '92877',
                                   '92879', '92881', '92883')
ORDER BY
    k12_dms_institution_master.state_id,
    k12_dms_institution_master.inst_name ASC 
```

现在我想`GROUP BY`对电子邮件地址和机构名称执行，但我收到此错误：

> 列 'k12_dms_contacts_master.prefix_id' 在选择列表中无效，因为它不包含在聚合函数或 GROUP BY 子句中。

任何帮助都将是非常可观的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T10:24:43.027

错误消息说明了一切。

您已经创建了一个组，并且由于该列不是“分组依据”的一部分，也不是所有组列（如 sum 或 count）的聚合，因此您不能在 select 子句中使用它。

请注意，group by 的返回是每组一行。从逻辑上讲，该列对于任何组成员都会有所不同，因此它不能容纳一行！

# jquery - jQuery GoMap 将标记添加到街景

> ID：11468544
> 
> 赞同：0
> 
> 时间：2012-07-13T10:18:54.143
> 
> 标签：jquery, google-maps

首先，对不起，如果这是一个愚蠢的问题，但我是一个非常大的初学者。我试用了 jQuery GoMap，它适合我的需要。我只有一个问题，我正在使用 streetViewControl，但我无法在我的地图上添加标记。实际上我是从数据库中选择一个城市名称和街道地址，我认为这是问题所在。之后我硬编码了一个值，看看是否有问题，但还是一样。

这是我的代码：

```
//grab google map location
var city = $('.city').text();
var street = $('.street').text();
var getLocation = city + " " + street;
$("#map").goMap({
  address: getLocation,
  streetViewControl: true,
  zoom: 16,
  maptype: 'roadmap',
  addMarker: true,
  icon: 'http://googlemaps.googlermania.com/google_maps_api_v3/en/Google_Maps_Marker.png',
}); 
```

请有人指出我做错了什么？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T18:15:35.533

```
icon: 'http://googlemaps[...]Google_Maps_Marker.png',
}); 
```

后面的逗号`Marker.png'`可能是问题的一部分。

# android - Android 中的 Spinner 数据排序

> ID：11468547
> 
> 赞同：1
> 
> 时间：2012-07-13T10:18:59.273
> 
> 标签：android

我有带有数组列表的微调器，它工作正常，但我想整理从 a 到 z 的数据（例如：苹果、球、猫、狗......）顺序。我在下面提交我的代码

```
 ArrayList<String> SourceArray = new ArrayList<String>();
    Spinner Sourcespinner;// = new Spinner(this);
    Sourcespinner = (Spinner)findViewById(R.id.Spinner1);
    ArrayAdapter<String> SourceArrayAdapter = new ArrayAdapter<String>(this,
     android.R.layout.simple_spinner_item,SourceArray);
    SourceArrayAdapter.add("Chennai");
    SourceArrayAdapter.add("Mumbai");
    SourceArrayAdapter.add("Kolkatta");
    SourceArrayAdapter.add("Delhi");
    Sourcespinner.setAdapter(SourceArrayAdapter);` 
```

我不知道如何对此进行排序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T10:22:06.513

您可以使用它对数据进行排序

```
Collections.sort(SourceArray); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T10:23:30.813

尝试将数据添加到 ArrayList 并使用[Collections](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html)类为您排序：

```
Collections.sort(SourceArray); 
```

如果您需要添加自己的对象，他们需要实现[Comparable](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html)接口并实现方法[compareTo()](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html#compareTo%28T%29)。更改 ArrayList 的数据时，请确保使用以下代码通知适配器可能已添加新数据：

```
SourceArrayAdapter.notifyDataSetChanged(); 
```

# objective-c - 使 NSOpenPanel 打开一个自定义目录

> ID：11468550
> 
> 赞同：8
> 
> 时间：2012-07-13T10:19:06.367
> 
> 标签：objective-c, cocoa, nsopenpanel

有什么方法可以将 URL 传递到系统上的文件夹，该文件夹应该是 NSOpenPanel 打开的默认窗口？谢谢！

更新：

```
NSOpenPanel *ads_open = [[NSOpenPanel openPanel] retain];
[ads_open setDirectoryURL:"file://localhost/System/Library/CoreServices/prndrv"]; 
```

我正在使用上面的代码，这是我希望默认打开的目录。但是，我得到的默认窗口仍然是我访问的最后一个窗口，而不是我指定的窗口。如何访问 URL 目录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T11:24:02.933

```
NSOpenPanel *ads_open = [NSOpenPanel openPanel];
[ads_open setDirectoryURL:[NSURL URLWithString:@"file://localhost/System/Library/CoreServices/prndrv"]]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-16T14:00:38.240

小心使用，`[NSURL fileURLWithPath:someStringPath]`否则它不是有效的文件 url：

```
 NSOpenPanel *panel = [NSOpenPanel openPanel];

// changes promt to Select
[panel setPrompt:@"Select"];

// Enable the selection of files in the dialog.
[panel setCanChooseFiles:NO];

// Enable the selection of directories in the dialog.
[panel setCanChooseDirectories:YES];

//allows multi select
[panel setAllowsMultipleSelection:NO];
if(exists){
    [panel setDirectoryURL:[NSURL fileURLWithPath:lastPath]];
}

[panel beginSheetModalForWindow:self.window
              completionHandler:^(NSInteger returnCode) {
                  if (returnCode == NSOKButton)
                  {
                      .....

              }}]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-11-02T19:17:22.920

对于斯威夫特 3：

```
let panel = NSOpenPanel()
panel.directoryURL = URL(fileURLWithPath: "smb://servername/path", isDirectory: true) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T11:23:24.417

工作示例：

```
NSOpenPanel *panel = [NSOpenPanel openPanel];
[panel setDirectoryURL:[NSURL URLWithString:@"file://localhost/System/Library/CoreServices/"]];

[panel beginSheetModalForWindow:self.window
              completionHandler:^(NSInteger returnCode) {
                  if (returnCode == NSOKButton)
                  {
                      NSURL *theURL = [[panel URLs] objectAtIndex:0];
                  }
              }]; 
```

# sql - 获取日期范围之间的小时间隔

> ID：11468551
> 
> 赞同：0
> 
> 时间：2012-07-13T10:19:08.210
> 
> 标签：sql, sql-server, tsql, time

请有人可以在这里帮助我，我正在尝试获取日期范围之间的小时表。

例如：

```
if starttime == 2012-02-06 23:59:00'
then endtime = '2012-02-29 10:26:17' 
```

我应该有一个表（变量表），内容如下：

```
Start                    End                      Seconds
2012-02-06 23:59:00.000  2012-02-06 23:59:00.000  0
2012-02-29 09:00:00.000  2012-02-29 09:59:00.000  3540
2012-02-29 10:00:00.000  2012-02-29 10:26:17.000  1577 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T10:21:59.353

`second`通过查看您的预期表，您在两次之间得到了差异。

`SELECT DATEDIFF(SECOND, '2012-02-29 09:00:00.000', '2012-02-29 09:59:00.000')`只给出 3540 秒的差异。

要获得小时差，您可以尝试以下代码：

```
SELECT  DATEDIFF(hour, '2012-02-06 23:59:00.000', '2012-02-06 23:59:00.000') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T11:04:09.640

感谢大家的建议和意见。我终于得到了一个解决可能问题的方法。

以下是我提出的解决方案的脚本：

```
DECLARE @start_date datetime = CONVERT(DATETIME,'2012-02-06 23:59:01.000',20);
DECLARE @end_date datetime = CONVERT(DATETIME,'2012-12-08 23:59:17.000',20);
DECLARE @org datetime  ;
DECLARE @end datetime  ;
DECLARE @datetable TABLE (h_start datetime, h_end datetime,h_sesc int);

WHILE (dateadd(second, -1, dateadd(hour, datediff(hour, 0, @start_date)+1, 0))) < @end_date
BEGIN
SET @org = null;
SET @org = @start_date;
SET @end = (dateadd(second, -1, dateadd(hour, datediff(hour, 0, @org)+1, 0)));
INSERT INTO @datetable (h_start, h_end,h_sesc)
VALUES(dateadd(second, 0,@org), @end,DATEDIFF(second, @org,@end));

SET @start_date = dateadd(second, 1,@end);

END;

INSERT INTO @datetable (h_start, h_end,h_sesc)
VALUES(dateadd(second, 0,@start_date), @end_date,DATEDIFF(second, dateadd(second, 0,@start_date),@end_date));

SELECT * FROM @datetable; 
```

以上将给出以下结果：

```
h_start                 h_end                   h_sesc
2012-02-06 23:59:01.000 2012-02-06 23:59:59.000 58
2012-02-07 00:00:00.000 2012-02-07 00:59:59.000 3599
2012-02-07 01:00:00.000 2012-02-07 01:59:59.000 3599
2012-02-07 02:00:00.000 2012-02-07 02:59:59.000 3599
2012-02-07 03:00:00.000 2012-02-07 03:59:59.000 3599
2012-02-07 04:00:00.000 2012-02-07 04:59:59.000 3599
2012-02-07 05:00:00.000 2012-02-07 05:59:59.000 3599 
```

......

```
2012-12-08 18:00:00.000 2012-12-08 18:59:59.000 3599
2012-12-08 19:00:00.000 2012-12-08 19:59:59.000 3599
2012-12-08 20:00:00.000 2012-12-08 20:59:59.000 3599
2012-12-08 21:00:00.000 2012-12-08 21:59:59.000 3599
2012-12-08 22:00:00.000 2012-12-08 22:59:59.000 3599
2012-12-08 23:00:00.000 2012-12-08 23:59:17.000 3557 
```

希望有人会发现它有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-12T09:46:25.010

```
DECLARE @start_date datetime = CONVERT(DATETIME,'2012-02-06 23:59:01.000', 20);
DECLARE @end_date datetime = CONVERT(DATETIME,'2012-12-08 23:59:17.000', 20);

-- Using a recursive query after round down to full hours avoids a loop. The resulting intervals should be easier to use that way, e.g. you can but don't have to insert them into a table variable.
SET @start_date = DATEADD(HOUR, DATEPART(HOUR, @start_date), CAST(FLOOR(CAST(@start_date AS float)) AS datetime));
SET @end_date = DATEADD(HOUR, DATEPART(HOUR, @end_date), CAST(FLOOR(CAST(@end_date AS float)) AS datetime));
WITH RecursiveTimeIntervals AS
(SELECT @start_date Interval
UNION ALL SELECT DATEADD(HOUR, 1, r.Interval)
FROM RecursiveTimeIntervals r
WHERE r.Interval < @end_date)
SELECT * 
FROM RecursiveTimeIntervals
ORDER BY 1
OPTION (MAXRECURSION 0) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-13T10:23:16.663

```
DATEDIFF(hour, [start], [end]) 
```

请参阅[w3schools 上的说明](http://www.w3schools.com/sql/func_datediff.asp)。

# php - php上传系统的安全隐患

> ID：11468554
> 
> 赞同：0
> 
> 时间：2012-07-13T10:19:27.330
> 
> 标签：php, file-upload, file-permissions

我已经做了一个基本的 PHP 文件加载系统，到目前为止我可以上传任何文件类型，我还没有添加任何参数。

但是我想知道的是我使用的方法，我应该采取哪些步骤来使系统安全？是否有另一种更安全的做事方式，以及任何可能有助于该系统的指南、提示或建议？

到目前为止，这是我的代码：

```
$upload_to = "img/company_logos/";

if($_POST)
{
    if(!empty($_POST['upload']))
    {
        $upload_to = $upload_to . $_FILES['file']['name'];
        move_uploaded_file($_FILES['file']['tmp_name'], $upload_to);
        echo "Uploaded!";
    }
}

?>

<html>
<body>      
    <form method="post" enctype="multipart/form-data">

        <input type="hidden" id="upload" name="upload" value="1" />
        <input type="file" id="file" name="file" />
        <input type="submit" value="Submit" />

    </form>
</body>
</html> 
```

我看到的主要内容之一是将上传目录权限设置为 777，这意味着任何人都可以读取/写入/执行此目录。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T10:23:21.837

1.  检查推荐人
2.  限制文件类型
3.  重命名文件
4.  更改权限
5.  登录和审核

[http://php.about.com/od/advancedphp/qt/upload_security.htm](http://php.about.com/od/advancedphp/qt/upload_security.htm)

并看到这个 [PHP Upload 文件增强安全性](https://stackoverflow.com/questions/2751384/php-upload-file-enhance-security)

# javascript - 如何使用 WebGL 在运行时更新立方体的材质？

> ID：11468558
> 
> 赞同：4
> 
> 时间：2012-07-13T10:19:53.440
> 
> 标签：javascript, three.js

我正在使用three.js 来制作动画。我想动态更新立方体网格的材质。这是示例：

```
// create cube geometry 
var material1 = [new THREE.MeshBasicMaterial({color:0xBEE2FF}),.....];
var geometry = new THREE.CubeGeometry(50, 50, 50,0,0,0,material1 );
var cube = new THREE.Mesh(geometry, new THREE.MeshFaceMaterial());

// ...

var material2 = [new THREE.MeshBasicMaterial({color:0xFFFFFF}), ...];
cube.geometry.materials = material2; 
```

如果我使用 CanvasRenderer，它可以工作。但是当我更改为 WebGL Renderer 时，它会抛出错误： Uncaught TypeError: Cannot read property 'map' of undefined

如何使用 WebGL 在运行时更新立方体的材质？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T13:44:37.360

使用代码片段，很难知道导致错误的原因，但您无法更改涉及纹理存在与否的材质。尽量保持所有材料的类型相同。此外，您可能需要将`material.needsUpdate`标志设置为`true`.

您可以在 Three.js wiki 中找到更多关于如何使用 .js 更新内容的详细信息和示例`WebGLRenderer`。

[https://github.com/mrdoob/three.js/wiki/Updates](https://github.com/mrdoob/three.js/wiki/Updates)

此外，这是一个类似于您似乎正在尝试做的事情的小提琴：http: [//jsfiddle.net/2FZU7/51/](http://jsfiddle.net/2FZU7/51/)

编辑：小提琴更新为three.js r.58

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-01-26T23:39:15.897

我认为问题在于您在立方体上设置“材料”而不是“材料”。

```
cube.material = material2;
material.map = texture;
material.needsUpdate = true; 
```

# mysql - 在开始和结束时间内计数具有时间瞬间的记录

> ID：11468561
> 
> 赞同：4
> 
> 时间：2012-07-13T10:20:24.330
> 
> 标签：mysql, sql

假设我有一个这样的表：

```
CREATE TABLE foo (
    gid BIGINT PRIMARY KEY,
    starttime BIGINT,
    endtime BIGINT
); 
```

此表存储一系列游戏的开始和结束时间（以“从纪元开始的秒数”格式）。现在，我想知道某个时刻有多少游戏正在运行。这是自然查询：

```
SET @t = UNIX_TIMESTAMP('2012-07-12 12:00:00');
SELECT COUNT(f.gid) FROM foo f WHERE @t BETWEEN f.starttime AND f.endtime; 
```

复杂的是我需要每五分钟做一次（每场比赛只持续几分钟，我们每小时有几千场），并且可能持续六个月。我确实有循环遍历我感兴趣的日期范围并每隔五分钟生成@t 的程序。问题是查询太慢了。我目前将所有@t 存储在我已编制索引的单独表中，如下所示：

```
CREATE TABLE bar (
    interval BIGINT PRIMARY KEY
); 
```

所以我现在的查询是：

```
SELECT b.interval, COUNT(f.gid)
FROM bar b LEFT JOIN foo f
    ON b.interval BETWEEN f.starttime AND f.endtime
GROUP BY b.interval; 
```

这太慢了，对表“foo”的索引似乎没有任何帮助。我觉得这可能是一个标准查询模式的标准问题，因此在此不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T11:02:52.827

让我感到震惊的是，一旦间隔过去，您真的不需要再次计算正在运行的游戏数量。

那么为什么不添加另一列`bar`呢？

```
CREATE TABLE bar (
    interval BIGINT PRIMARY KEY,
    runningGames INT) 
```

这样，您只需将计划任务设置为每五分钟运行一次

```
INSERT into bar 
SELECT  UNIX_TIMESTAMP(NOW()),
        COUNT(*) 
FROM    foo
WHERE   endtime is null 
```

然后你不应该一次又一次地重新创建六个月的数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T13:48:12.463

唉，这使用 Windows/分析功能要容易得多。

在mysql中，可以使用下面的策略来解决问题。

创建一个临时的开始时间表。在启动临时表中，有一个自动递增的 id 来跟踪行号。然后按顺序插入开始时间。

创建一个结束时间的临时表。在最后的临时表中，有一个自动递增的 id 来跟踪行号。然后按顺序插入结束时间。

这些表具有自时间开始以来的累计启动和停止次数。

假设每个 5 分钟间隔至少有一个开始和停止，我们可以使用以下方法查询该表：

```
select t.time, s.seqnum - e.seqnum
from (select <cast datetime to 5-minute interval> as time, seqnum
      from starts
     ) s full outer join
     (select <cast datetime to 5-minute interval> as time, seqnum
      from ends
     ) e
     on s.time = e.time 
```

这是对每个间隔取累计开始次数并减去累计停止次数。我猜你比我更了解如何在 mysql 中将时间截断/舍入到最近的 5 分钟。

# ios - 如何使用异步请求下载文件？

> ID：11468563
> 
> 赞同：0
> 
> 时间：2012-07-13T10:20:25.630
> 
> 标签：ios, xcode, asynchronous, download, request

现在，当我的应用程序检测到该文件已在服务器上更新时，它会下载文件并且用户界面会因下载时间而卡住。我的应用程序中有 ASIHTTPRequest 包装器，但我不知道如何将下载请求更改为异步。

我的代码：

```
- (void)downloadFileIfUpdated 
{
    NSString *urlString = @"http://www.mysite.com/data.plist";  
    NSLog(@"Downloading HTTP header from: %@", urlString);  
    NSURL *url = [NSURL URLWithString:urlString];  

    NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES);
    NSString *cachedPath = [[documentPaths lastObject] stringByAppendingPathComponent:@"data.plist"];

    NSFileManager *fileManager = [NSFileManager defaultManager];  

    BOOL downloadFromServer = NO;  

    NSString *lastModifiedString = nil;
    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];
    [request setHTTPMethod:@"HEAD"];
    NSHTTPURLResponse *response;
    [NSURLConnection sendSynchronousRequest:request returningResponse:&response error: NULL];
    if ([response respondsToSelector:@selector(allHeaderFields)]) {
        lastModifiedString = [[response allHeaderFields] objectForKey:@"Last-Modified"];
    }

    NSDate *lastModifiedServer = nil;
    @try {
        NSDateFormatter *df = [[NSDateFormatter alloc] init];
        df.dateFormat = @"EEE',' dd MMM yyyy HH':'mm':'ss 'GMT'";
        df.locale = [[NSLocale alloc] initWithLocaleIdentifier:@"en_US"];
        df.timeZone = [NSTimeZone timeZoneWithAbbreviation:@"GMT"];
        lastModifiedServer = [df dateFromString:lastModifiedString];

    }
    @catch (NSException * e) {
    NSLog(@"Error parsing last modified date: %@ - %@", lastModifiedString, [e description]);
    }
  NSLog(@"lastModifiedServer: %@", lastModifiedServer);

    NSDate *lastModifiedLocal = nil;
    if ([fileManager fileExistsAtPath:cachedPath]) {
        NSError *error = nil;
        NSDictionary *fileAttributes = [fileManager attributesOfItemAtPath:cachedPath error:&error];
        if (error) {
            NSLog(@"Error reading file attributes for: %@ - %@", cachedPath, [error localizedDescription]);
        }
        lastModifiedLocal = [fileAttributes fileModificationDate];
         NSLog(@"lastModifiedLocal : %@", lastModifiedLocal);

        [activityIndicator stopAnimating];
    }

    // Download file from server if we don't have a local file
    if (!lastModifiedLocal) {
        downloadFromServer = YES;
    }
    // Download file from server if the server modified timestamp is later than the local modified timestamp
    if ([lastModifiedLocal laterDate:lastModifiedServer] == lastModifiedServer) {

        [activityIndicator startAnimating];

        downloadFromServer = YES;
    }

    if (downloadFromServer) {

        NSLog(@"Downloading new file from server");
        NSData *data = [NSData dataWithContentsOfURL:url];
        if (data) {
            // Save the data
            if ([data writeToFile:cachedPath atomically:YES]) {
                NSLog(@"Downloaded file saved to: %@", cachedPath);
            }

            // Set the file modification date to the timestamp from the server
            if (lastModifiedServer) {
                NSDictionary *fileAttributes = [NSDictionary dictionaryWithObject:lastModifiedServer forKey:NSFileModificationDate];
                NSError *error = nil;
                if ([fileManager setAttributes:fileAttributes ofItemAtPath:cachedPath error:&error]) {
                    NSLog(@"File modification date updated");
                    [NSThread detachNewThreadSelector:@selector(loadPList) toTarget:self withObject:nil];

                    [activityIndicator stopAnimating];

                }
                if (error) {
                NSLog(@"Error setting file attributes for: %@ - %@", cachedPath, [error localizedDescription]);
                }
            }
        }   

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T10:26:45.463

```
 NSURL *url = [NSURL URLWithString:@"http://allseeing-i.com"];
 __block ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];
 [request setCompletionBlock:^{
    // Use when fetching text data
    NSString *responseString = [request responseString];

    // Use when fetching binary data
    NSData *responseData = [request responseData];
 }];
 [request setFailedBlock:^{
    NSError *error = [request error];
 }];
 [request startAsynchronous]; 
```

有关更多详细信息，请查看[http://allseeing-i.com/ASIHTTPRequest/How-to-use#using_blocks](http://allseeing-i.com/ASIHTTPRequest/How-to-use#using_blocks)

# cakephp - Cakephp Countercache 问题

> ID：11468567
> 
> 赞同：1
> 
> 时间：2012-07-13T10:20:34.290
> 
> 标签：cakephp, cakephp-2.0, cakephp-model

嗨，我在 2.0 中使用 Countercache，我需要添加一些条件，如下所示。但它不起作用..如果'counterCache'=> true，它会增加字段，它不考虑我添加的条件。

**Post hasMany WallPost**

**WallPost 属于 Post**

```
 public $belongsTo = array(
    'WallPost' => array(
        'className' => 'WallPost',
        'foreignKey' => 'wallpost_id',
         'counterScope' =>array(
             'WallPost.post_id' =>3,
         ),
        'fields' => '',
        'order' => '',
        'counterCache' => true
    ), 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T14:35:27.960

你想要的是：

```
public $belongsTo = array(
'WallPost' => array(
    'className' => 'WallPost',
    'foreignKey' => 'wallpost_id',
    'fields' => '',
    'order' => '',
    'counterCache' => array('WallPost.post_id' =>3)
), 
```

尽管文档对此感到困惑，但您是对的。

# scala - 如何在运行时访问在案例类字段上定义的注释

> ID：11468571
> 
> 赞同：12
> 
> 时间：2012-07-13T10:21:04.873
> 
> 标签：scala, reflection, parameters, constructor

我定义了以下java注释

```
 @Target({ElementType.METHOD, ElementType.PARAMETER, ElementType.CONSTRUCTOR, ElementType.FIELD})
   @Retention(RetentionPolicy.RUNTIME)
   public @interface MyAnnotation { 
     String value() default "";
   } 
```

我定义了以下 scala 案例类：

```
@Prefer("xyz")
case class TestAnno(arg1 : String, @Prefer("abc") agr2 : String) 
```

我可以看到使用反射在案例类级别定义的注释，但我无法访问为`arg2`case class 的成员定义的注释`TestAnno`。反编译代码我发现变量声明或它的 scala 访问器似乎都没有注释。只有构造函数定义和`copy`方法似乎保留了案例类声明中定义的参数注释。

是否有其他方法可以强制scala编译器为case类中声明的字段生成注释，或者我必须阅读构造函数并使用诸如[ASM ByteCode Library](http://asm.ow2.org/)或[ParaNamer](http://paranamer.codehaus.org/)之类的库来查找哪些参数具有哪些注释？需要一个主要适用于 Scala 案例类的解决方案。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-04T21:48:56.710

您只需要执行以下操作：

```
case class TestAnno(arg1 : String, @(Prefer @field)("abc") agr2 : String) 
```

更多信息在这里[http://www.scala-lang.org/api/current/#scala.annotation.meta.package](http://www.scala-lang.org/api/current/#scala.annotation.meta.package)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-02-02T14:13:51.907

Quentin 的解决方案奏效了，但恕我直言，这对用户来说太繁琐了。

您可以使用标准反射 API 读取构造函数参数的注释。我需要这个来实现宏。

```
scala> :paste
// Entering paste mode (ctrl-D to finish)

import scala.annotation.StaticAnnotation
final class min(i: Long) extends StaticAnnotation

case class Foo(@min(1) c: String)
import scala.reflect.runtime.universe._
symbolOf[Foo].asClass.primaryConstructor.typeSignature.paramLists.head.head.annotations

// Exiting paste mode, now interpreting.

import scala.annotation.StaticAnnotation
defined class min
defined class Foo
import scala.reflect.runtime.universe._
res0: List[reflect.runtime.universe.Annotation] = List(min(1L)) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-14T04:29:50.160

我做了一些搜索，并提出了两种解决方案。欢迎发表评论、建议和改进，我已将此答案标记为 wiki。第一个基于[ScalaBeans](http://code.google.com/p/scalabeans/)和[ParaNamer](http://paranamer.codehaus.org/)。

```
 def valNamesWithAnnotations[T <: AnyRef](obj : T)(implicit m : Manifest[T]) : List[(String, List[java.lang.annotation.Annotation])] = {
    val descriptor = descriptorOf(obj.getClass)

    val c = descriptor.beanType.erasure

    val constructor: Option[Constructor[_]] = {
      if (c.getConstructors().isEmpty) None
      else Some(c.getConstructors()(0).asInstanceOf[Constructor[_]])
    }

    val paranamer = new BytecodeReadingParanamer
    val ctorParameterNames = constructor.map(paranamer.lookupParameterNames(_)).getOrElse(scala.Array[String]()).toList
    val ctorParamAnnos = constructor.getOrElse(sys.error("Cannot find constructor entry for class " + c.getName)).getParameterAnnotations

    val builder = List.newBuilder[(String, List[java.lang.annotation.Annotation])]
    val paramIter = ctorParameterNames.iterator
    val annoIter = ctorParamAnnos.iterator

    while(paramIter.hasNext && annoIter.hasNext ) {
      builder += ((paramIter.next, annoIter.next.toList))
    }

    builder.result
  } 
```

第二种方法使用 ScalaSignatures 并基于此[SO 答案](https://stackoverflow.com/a/6282483/188524)：

```
 def valNamesWithAnnotations[C: ClassManifest] : List[(String, List[java.lang.annotation.Annotation])] = {
    val cls = classManifest[C].erasure
    val ctors = cls.getConstructors

    assert(ctors.size == 1, "Class " + cls.getName + " should have only one constructor")
    val sig = ScalaSigParser.parse(cls).getOrElse(sys.error("No ScalaSig for class " + cls.getName + ", make sure it is a top-level case class"))

    val classSymbol = sig.parseEntry(0).asInstanceOf[ClassSymbol]
    assert(classSymbol.isCase, "Class " + cls.getName + " is not a case class")

    val tableSize = sig.table.size
    val ctorIndex = (1 until tableSize).find { i =>
      sig.parseEntry(i) match {
        case m @ MethodSymbol(SymbolInfo("<init>", owner, _, _, _, _), _) => owner match {
          case sym: SymbolInfoSymbol if sym.index == 0 => true
          case _ => false
        }
        case _ => false
      }
    }.getOrElse(sys.error("Cannot find constructor entry in ScalaSig for class " + cls.getName))

    val paramsListBuilder = List.newBuilder[String]
    for (i <- (ctorIndex + 1) until tableSize) {
      sig.parseEntry(i) match {
        case MethodSymbol(SymbolInfo(name, owner, _, _, _, _), _) => owner match {
          case sym: SymbolInfoSymbol if sym.index == ctorIndex => paramsListBuilder += name
          case _ =>
        }
        case _ =>
      }
    }

    val paramAnnoArr = ctors(0).getParameterAnnotations
    val builder = List.newBuilder[(String, List[java.lang.annotation.Annotation])]

    val paramIter = paramsListBuilder.result.iterator
    val annoIter = paramAnnoArr.iterator

    while(paramIter.hasNext && annoIter.hasNext ) {
      builder += ((paramIter.next, annoIter.next.toList))
    }

    builder.result
  } 
```

# sql - PostgreSQL 全部在数组中

> ID：11468572
> 
> 赞同：26
> 
> 时间：2012-07-13T10:21:22.197
> 
> 标签：sql, ruby-on-rails, postgresql, activerecord, relational-division

实现数组中所有元素必须匹配的子句的最简单和最快的方法是什么 - 使用时不仅仅是一个`IN`？毕竟它应该表现得像[mongodb 的 $all](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-$all)。

考虑到其中 conversation_users 是 conversation_id 和 user_id 之间的连接表的组对话，我想到了这样的事情：

```
WHERE (conversations_users.user_id ALL IN (1,2)) 
```

* * *

**更新**16.07.12

添加有关架构和案例的更多信息：

1.  连接表相当简单：

    ```
     Table "public.conversations_users"
         Column      |  Type   | Modifiers | Storage | Description 
    -----------------+---------+-----------+---------+-------------
     conversation_id | integer |           | plain   | 
     user_id         | integer |           | plain   | 
    ```

2.  一个对话有很多用户，一个用户属于很多对话。为了找到对话中的所有用户，我正在使用这个连接表。

3.  最后，我试图找出一个 ruby​​ on rails `scope`，它会根据参与者的情况找到我的对话 - 例如：

    ```
    scope :between, ->(*users) {
      joins(:users).where('conversations_users.user_id all in (?)', users.map(&:id))
    } 
    ```

**更新**23.07.12

我的问题是要找到完全匹配的人。所以：

如果查询之间的对话`(1,2,3)`将不匹配`(1,2)`

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-07-21T05:28:20.697

Assuming the join table follows good practice and has a unique compound key defined, i.e. a constraint to prevent duplicate rows, then something like the following simple query should do.

```
select conversation_id from conversations_users where user_id in (1, 2)
group by conversation_id having count(*) = 2 
```

It's important to note that the number 2 at the end is the length of the list of user_ids. That obviously needs to change if the user_id list changes length. If you can't assume your join table doesn't contain duplicates, change "count(*)" to "count(distinct user_id)" at some possible cost in performance.

This query finds all conversations that include all the specified users **even if** the conversation also includes additional users.

If you want only conversations with **exactly** the specified set of users, one approach is to use a nested subquery in the where clause as below. Note, first and last lines are the same as the original query, only the middle two lines are new.

```
select conversation_id from conversations_users where user_id in (1, 2)
   and conversation_id not in
   (select conversation_id from conversations_users where user_id not in (1,2))
group by conversation_id having count(*) = 2 
```

Equivalently, you can use a set difference operator if your database supports it. Here is an example in Oracle syntax. (For Postgres or DB2, change the keyword "minus" to "except.)

```
select conversation_id from conversations_users where user_id in (1, 2)
  group by conversation_id having count(*) = 2
minus
  select conversation_id from conversations_users where user_id not in (1,2) 
```

A good query optimizer *should* treat the last two variations identically, but check with your particular database to be sure. For example, the Oracle 11GR2 query plan sorts the two sets of conversation ids before applying the minus operator, but skips the sort step for the last query. So either query plan could be faster depending on multiple factors such as the number of rows, cores, cache, indices etc.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-16T21:34:48.303

我将这些用户折叠成一个数组。我还使用 CTE（WITH 子句中的东西）来使其更具可读性。

```
=> select * from conversations_users ;
 conversation_id | user_id
-----------------+---------
               1 |       1
               1 |       2
               2 |       1
               2 |       3
               3 |       1
               3 |       2
(6 rows)       

=> WITH users_on_conversation AS (
  SELECT conversation_id, array_agg(user_id) as users
  FROM conversations_users
  WHERE user_id in (1, 2) --filter here for performance                                                                                      
  GROUP BY conversation_id
)
SELECT * FROM users_on_conversation
WHERE users @> array[1, 2];
 conversation_id | users
-----------------+-------
               1 | {1,2}
               3 | {1,2}
(2 rows) 
```

*编辑*（一些资源）

*   数组函数：[http ://www.postgresql.org/docs/9.1/static/functions-array.html](http://www.postgresql.org/docs/9.1/static/functions-array.html)
*   CTE：[http ://www.postgresql.org/docs/9.1/static/queries-with.html](http://www.postgresql.org/docs/9.1/static/queries-with.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-05-15T17:13:48.110

这会保留`ActiveRecord`对象。

在下面的示例中，我想知道与数组中所有代码相关联的时间表。

```
codes = [8,9]

Timesheet.joins(:codes).select('count(*) as count, timesheets.*').
           where('codes.id': codes).
           group('timesheets.id').
           having('count(*) = ?', codes.length) 
```

您应该有完整的`ActiveRecord`对象可以使用。如果您希望它是一个真正的范围，您可以使用上面的示例并使用`.pluck(:id)`.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-21T12:54:10.113

虽然@Alex' 回答`IN`and`count()`可能是最简单的解决方案，但我希望这个 PL/pgSQL 函数更快：

```
CREATE OR REPLACE FUNCTION f_conversations_among_users(_user_arr int[])
  RETURNS SETOF conversations AS
$BODY$
DECLARE
    _sql text := '
    SELECT c.*
    FROM   conversations c';
    i int;
BEGIN

FOREACH i IN ARRAY _user_arr LOOP
    _sql  := _sql  || '
    JOIN   conversations_users x' || i || ' USING (conversation_id)';
END LOOP;

_sql  := _sql  || '
    WHERE  TRUE';

FOREACH i IN ARRAY _user_arr LOOP
    _sql  := _sql  || '
    AND    x' || i || '.user_id = ' || i;
END LOOP;

/* uncomment for conversations with exact list of users and no more
_sql  := _sql  || '
    AND    NOT EXISTS (
        SELECT 1
        FROM   conversations_users u
        WHERE  u.conversation_id = c.conversation_id
        AND    u.user_id <> ALL (_user_arr)
        )
*/

-- RAISE NOTICE '%', _sql;
RETURN QUERY EXECUTE _sql;

END;
$BODY$ LANGUAGE plpgsql VOLATILE; 
```

称呼：

```
SELECT * FROM f_conversations_among_users('{1,2}') 
```

该函数动态构建执行以下形式的查询：

```
SELECT c.*
FROM   conversations c
JOIN   conversations_users x1 USING (conversation_id)
JOIN   conversations_users x2 USING (conversation_id)
...
WHERE  TRUE
AND    x1.user_id = 1
AND    x2.user_id = 2
... 
```

这种形式在[关系除法查询的广泛测试中](https://stackoverflow.com/q/7364969/939860)表现最好。

您也可以在您的应用程序中构建查询，但我假设您想使用一个数组参数。此外，无论如何这可能是最快的。

任一查询都需要如下**索引**才能快速：

```
CREATE INDEX conversations_users_user_id_idx ON conversations_users (user_id); 
```

一个多列的主（或唯一）键`(user_id, conversation_id)`也是一样的，但是一个`(conversation_id, user_id)`（就像你可能拥有的那样！）会**很差**。您可以在上面的链接中找到一个简短的理由，或者[在 dba.SE 上的这个相关问题下找到一个综合评估](https://dba.stackexchange.com/q/6115/3684)

我还假设您在`conversations.conversation_id`.

您可以使用@Alex' 查询和此功能运行性能测试`EXPLAIN ANALYZE`并报告您的发现吗？

请注意，这两种解决方案都可以找到*至少*阵列中的用户参与的对话——包括与其他用户的对话。
如果您想排除这些，请取消注释我的函数中的附加子句（或将其添加到任何其他查询中）。

如果您需要有关该功能的更多说明，请告诉我。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-18T12:40:52.053

```
select id from conversations where not exists(
    select * from conversations_users cu 
    where cu.conversation_id=conversations.id 
    and cu.user_id not in(1,2,3)        
) 
```

这可以很容易地制成一个轨道范围。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-20T01:23:21.370

我猜你真的不想开始弄乱临时表。

您的问题不清楚您是想要与用户组进行对话，还是与超集进行对话。以下是超集：

```
with users as (select user_id from users where user_id in (<list>)
              ),
     conv  as (select conversation_id, user_id
               from conversations_users
               where user_id in (<list>)
              )
select distinct conversation_id
from users u left outer join
     conv c
     on u.user_id = c.user_id
where c.conversation_id is not null 
```

为了使该查询正常工作，它假定您在用户和会话用户中都有关于用户 ID 的索引。

对于确切的集合。. .

```
with users as (select user_id from users where user_id in (<list>)
              ),
     conv  as (select conversation_id, user_id
               from conversations_users
               where user_id in (<list>)
              )
select distinct conversation_id
from users u full outer join
     conv c
     on u.user_id = c.user_id
where c.conversation_id is not null and u.user_id is not null 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-13T10:40:42.733

创建一个包含所有可能值的映射表并使用它

```
select 
    t1.col from conversations_users as t1 
    inner join mapping_table as map on t1.user_id=map.user_id
group by 
    t1.col  
having  
    count(distinct conversations_users.user_id)=
    (select count(distinct user_id) from mapping) 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-06-24T20:26:05.377

根据@Alex Blakemore 的回答，您`Conversation`班级的等效 Rails 4 范围将是：

```
# Conversations exactly with users array
scope :by_users, -> (users) { 
                           self.by_any_of_users(users)
                             .group("conversations.id")
                             .having("COUNT(*) = ?", users.length) -
                           joins(:conversations_users)
                             .where("conversations_users.user_id NOT IN (?)", users)
}
# generates an IN clause
scope :by_any_of_users, -> (users) { joins(:conversations_users).where(conversations_users: { user_id: users }).distinct } 
```

请注意，您可以优化它而不是执行 Rails `-`（减号），您可以执行 a`.where("NOT IN")`但这会非常难以阅读。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-10-31T21:11:04.473

基于 Alex Blakemore 的回答

```
select conversation_id
from conversations_users cu
where user_id in (1, 2)
group by conversation_id 
having count(distinct user_id) = 2 
```

我找到了一个具有相同目标的替代查询，找到包含 user_1 和 user_2 的对话的对话 ID（忽略其他用户）

```
select *
from conversations_users cu1
where 2 = (
    select count(distinct user_id)
    from conversations_users cu2
    where user_id in (1, 2) and cu1.conversation_id = cu2.conversation_id
) 
```

根据 postgres 通过解释查询语句执行的分析，它比较慢，我猜这是真的，因为有更多的条件被评估，至少，`conversations_users`子查询的每一行都会被执行，因为它是相关的子查询。此查询的积极点是您没有分组，因此您可以选择 conversations_users 表的附加字段。在某些情况下（比如我的）它可能很方便。

# entity-framework - 具有使用定义查询的存储过程的实体框架

> ID：11468574
> 
> 赞同：1
> 
> 时间：2012-07-13T10:21:27.983
> 
> 标签：entity-framework

我写了一个定义查询

```
 <EntitySet Name="EntityFramework" EntityType="SEOAnalysisModel.Store.EntityFramework">
     <DefiningQuery>
         SELECT Keyword, ResultHead ,Year from SeoAnalysis where Year = 2005
     </DefiningQuery>
 </EntitySet> 
```

和自定义实体的实体类型

```
 <EntityType Name="EntityFramework">
     <Key>
         <PropertyRef Name="Year" />
     </Key>
     <Property Name="Year" Nullable="false" Type="int" />
     <Property Name="Keyword" Nullable="false" MaxLength="1000" Type="varchar" />
     <Property Name="ResultHead" Nullable="false" MaxLength="2000" Type="varchar" />
 </EntityType> 
```

但是当我调用存储过程时，它只返回列的 1 个值

```
// Stored procedure
public void SelectValue() {
    using (MyConnection ctx = new MyConnection()) {
        foreach (var p in ctx.EntityFramework(2005)) {
            Response.Write(p.Keyword);
        }
    }
} 
```

并且此列值是重复的。

现在如何获取所有列值？

实际上我得到相同的关键字重复。

如果我有像 Apple 这样的关键字，那么这个关键字会重复，直到循环运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T11:30:59.857

您已将年份标记为实体的键。键在定义查询的所有记录中必须是唯一的，否则它不是键。如果密钥不是唯一的，EF 将完全按照您的要求执行 - 它只会将第一条记录具体化为实体，并将其用于所有其他记录。EF 使用 key 来识别实体——如果你得到两条 key 值相同的记录，EF 认为它是同一个实体！

# android - 具有不同本机代码的多个 APK

> ID：11468578
> 
> 赞同：1
> 
> 时间：2012-07-13T10:21:40.177
> 
> 标签：android, java-native-interface, arm, apk, android-ndk

我正在开发一个使用一些本机代码的 Android 应用程序。我使用的本机库有两种变体，一种用于 ARM v6 架构，一种用于 v7。因此，在我的 libs 文件夹中，我有两个文件夹，用于 v6 库的“armeabi”和用于 v7 库的“armeabi-v7a”。这里的主要问题是这个库大约是 8mb，所以当根据设备只需要这些库中的一个时，我有 16mb 的库 - 我有 8mb 的膨胀，这使得我的 apk 相当大。

如果我创建 2 个具有不同版本代码的单独 apk，一个带有 v6 lib，一个带有不同版本代码的 v7 lib，Google Play 无法识别这两个 apk 在设备支持方面的任何差异，并尝试用另一个替换一个.

我在讨论这个问题的地方看到[了这个](https://stackoverflow.com/questions/7028859/android-market-multiple-apk-how-about-different-cpu-architectures)问题，但没有提供解决方案。

如何让 Google Play 让这两个 APK 一起发布？

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T12:23:59.933

这（还）不可能。请参阅[http://developer.android.com/guide/google/play/publishing/multiple-apks.html#SupportedFilters](http://developer.android.com/guide/google/play/publishing/multiple-apks.html#SupportedFilters)

> 支持的过滤器 [...]
> 
> *   OpenGL 纹理压缩格式 [...]
> *   屏幕尺寸（以及，可选的，屏幕密度）[...]
> *   API 级别 [...]
> 
> 其他启用 Google Play 过滤器的清单元素（但未在上面列出）仍照常应用于每个 APK。**但是，Google Play 不允许您基于它们的变体发布多个 APK。**因此，如果每个 APK 的上述过滤器相同（但 APK 会根据清单文件中的其他特征而有所不同），则您无法发布多个 APK。例如，您不能提供仅在特性上有所不同的不同 APK。

编辑：我想到的一种解决方案是基于插件的：您部署一个具有核心逻辑、UI 和所有这些东西的应用程序，并提供几个不同的“应用程序”，这些“应用程序”使用相同的证书签名，但只包含本机库。MXPlayer 使用这种方法来支持不同的架构，而不会使单个 APK 臃肿：[https](https://sites.google.com/site/mxvpen/download) ://sites.google.com/site/mxvpen/download （参见“编解码器”部分）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T12:23:29.277

就我而言，我在同一个 APK 中编译了不同的库并对其进行了 Proguard，这有助于减小大小。但是同样的差异并不大，但它有所帮助。

此外，我不确定它是否适合您的需求，但如果您想拥有不同的 APK，我认为不同的包名称可以，但再次推荐将使用单个 APK。

那是我的一小部分信息，有关更多信息和帮助，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-04T06:04:51.023

请参阅此链接 [Options for Releaving Native Android* Apps for Intel® Architecture (x86)](https://software.intel.com/en-us/android/articles/google-play-supports-cpu-architecture-filtering-for-multiple-apk)

[Google Play 支持多个 APK 的 CPU 架构](https://software.intel.com/en-us/android/articles/google-play-supports-cpu-architecture-filtering-for-multiple-apk)过滤

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-06-29T07:23:25.397

现在可以了，请参阅此链接。

[https://developer.android.com/studio/build/configure-apk-splits.html](https://developer.android.com/studio/build/configure-apk-splits.html)

更新 ：

您需要在 android 标签内的模块级 build.gradle 中添加以下代码：

```
splits
{

        // Configures multiple APKs based on ABI.
        abi {

          // Enables building multiple APKs per ABI.
          enable true

          // By default all ABIs are included, so use reset() and include to specify that we only
          // want APKs for x86, armeabi-v7a, and mips.

          // Resets the list of ABIs that Gradle should create APKs for to none.
          reset()

          // Specifies a list of ABIs that Gradle should create APKs for.
          include "x86", "armeabi-v7a", "mips"

          // Specifies that we do not want to also generate a universal APK that includes all ABIs.
          universalApk false
        }
} 
```

这将为您提供多个 apk 以针对不同的架构上传。根据安卓：

> 不同的 Android 手机使用不同的 CPU，这反过来又支持不同的指令集。CPU 和指令集的每种组合都有其自己的应用程序二进制接口或 ABI。ABI 非常精确地定义了应用程序的机器代码在运行时应该如何与系统交互。

另外，请记住使用不同的 versionCode 推送两个 apk。一种方便的方法是使用以下脚本，稍后在同一网址上提供：

```
// Map for the version code that gives each ABI a value.
ext.abiCodes = ['armeabi-v7a':1, mips:2, x86:3]

// For per-density APKs, create a similar map like this:
// ext.densityCodes = ['mdpi': 1, 'hdpi': 2, 'xhdpi': 3]

import com.android.build.OutputFile

// For each APK output variant, override versionCode with a combination of
// ext.abiCodes * 1000 + variant.versionCode. In this example, variant.versionCode
// is equal to defaultConfig.versionCode. If you configure product flavors that
// define their own versionCode, variant.versionCode uses that value instead.
android.applicationVariants.all { variant ->

  // Assigns a different version code for each output APK
  // other than the universal APK.
  variant.outputs.each { output ->

    // Stores the value of ext.abiCodes that is associated with the ABI for this variant.
    def baseAbiVersionCode =
            // Determines the ABI for this variant and returns the mapped value.
            project.ext.abiCodes.get(output.getFilter(OutputFile.ABI))

    // Because abiCodes.get() returns null for ABIs that are not mapped by ext.abiCodes,
    // the following code does not override the version code for universal APKs.
    // However, because we want universal APKs to have the lowest version code,
    // this outcome is desirable.
    if (baseAbiVersionCode != null) {

      // Assigns the new version code to versionCodeOverride, which changes the version code
      // for only the output APK, not for the variant itself. Skipping this step simply
      // causes Gradle to use the value of variant.versionCode for the APK.
      output.versionCodeOverride =
              baseAbiVersionCode * 1000 + variant.versionCode
    }
  }
} 
```

This goes below the splits code. This gives you multiple apks with your orignal version code multiplied by the architecture code given in abiCodes array in the script above. Eg : if your version code is 5, the mips builds code would be 2005\. A universal apk will also be created if you universalApk is true in splits code. The can be a fallover apk in case no architecture build apk is found for a certain device.

# php - 在 foreach 循环中调用 require_once()，代码在每次迭代中都不可用

> ID：11468579
> 
> 赞同：0
> 
> 时间：2012-07-13T10:21:51.117
> 
> 标签：php, arrays, email, loops, foreach

我有一组电子邮件，想为数组中的每个条目发送一封电子邮件，但目前它只将其发送到第一个地址。我环顾四周，看不出我做错了什么。

```
//This is the array
$emails = array($teamleademail, $coleademail, $sponsoremail, $facilitatoremail, $cisupportemail);

//Now the foreach statment    
foreach ($emails as $value) {
    //pulls in email sending code
    require_once ("Mail.php");
    //variables required to send the email 
     $from = "Scope Sheet Process Database (no reply)<scopesheetprocess@goodrich.com>";
     //Make the $to variable that of the email in the array
     $to = "$value";
     $subject = "Scope Sheet $scopesheetid Closed";
     $body = "Scope Sheet $scopesheetid has been closed and can no longer be edited.";
     //send email code
     require_once ("sendemail.php");
} 
```

由于 IT 问题，我正在使用 pear php 发送电子邮件，但这无关紧要，因为它应该每次都运行脚本并发送单独的电子邮件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T10:26:06.813

问题是这一行：

```
require_once ("sendemail.php"); 
```

...应该只是

```
require ("sendemail.php"); 
```

事实上，它只会包含在循环的第一次迭代中，因此只会发送第一封电子邮件。

这本身可能无法解决您的问题 - 如果没有，我们需要查看`sendemail.php`.

# iphone - 如何显示特定选定的人联系表地址簿 Ui Iphone？

> ID：11468582
> 
> 赞同：0
> 
> 时间：2012-07-13T10:22:01.033
> 
> 标签：iphone, addressbook, abpeoplepickerview

我正在我的应用程序中实现地址簿 Ui。我遇到了一些问题。

我有一个记录 ID，我想显示该联系人表单地址簿 UI 框架的详细信息。

为此，我使用了以下代码：-

> ```
>  ABPeoplePickerNavigationController *picker = [[ABPeoplePickerNavigationController alloc] init];
>         picker.peoplePickerDelegate = self;
>         ABAddressBookRef addressBook = ABAddressBookCreate( ); 
>         NSNumber *recordId = [NSNumber numberWithInteger:[record_str integerValue]];
>         ABRecordRef person = ABAddressBookGetPersonWithRecordID(addressBook,recordId.integerValue);
>         [self peoplePickerNavigationController:picker shouldContinueAfterSelectingPerson:person];
>         [self presentModalViewController:picker animated:YES];
>         [picker release];   
> - (BOOL)peoplePickerNavigationController:(ABPeoplePickerNavigationController *)peoplePicker shouldContinueAfterSelectingPerson:(ABRecordRef)person{
> return YES;} 
> ```

当我运行代码时，它会显示所有联系人列表，而我只显示给定的记录。

如何显示我从选择器中选择的人的地址？

提前致谢....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T12:04:53.237

我犯了一个错误，即我调用的是 ABPeoplePickerNavigationController 而不是 ABPersonViewController。以便它显示整个联系人列表而不是特定联系人。

感谢大家访问这个问题。

# amazon-mws - 服务状态

> ID：11468584
> 
> 赞同：0
> 
> 时间：2012-07-13T10:22:07.130
> 
> 标签：amazon-mws

有谁知道API中订单部分的服务状态是否与卖家和产品中的服务状态相同？

还是返回每个部分的状态？如果是这种情况，Feeds API 是否也没有服务状态？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T13:39:23.720

看起来是一样的。我找不到其他信息可以显示。那好吧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T14:11:24.220

同样的，我遇到了各种各样的 API 问题，因为我没有意识到 Feeds API 和 Reports API 是同一个 API，而且不仅仅是服务状态，所以请密切关注。

# php - 使用 dom 从 HTML 中删除所有内联样式标记

> ID：11468585
> 
> 赞同：3
> 
> 时间：2012-07-13T10:22:14.547
> 
> 标签：php, css, dom

我有一个 dom，在这我已经加载了整个网页 html。我想从此页面中的所有元素中删除所有内联样式。我怎样才能做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T10:26:46.740

```
var all = document.getElementsByTagName("*");

for (var i=0, max=all.length; i < max; i++) {
     // Do something with the element here
     all[i].removeAttribute("style","")
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T10:28:37.147

使用[DOM](http://php.net/manual/en/book.dom.php)是最简单的方法。

这就是我要做的。

1.  [使用loadHTML()](http://www.php.net/manual/en/domdocument.loadhtml.php)加载您的标记。
2.  [使用DOMXPath](http://www.php.net/manual/en/class.domxpath.php)`styles`选择具有该属性的所有元素。
3.  在每个 DOMElement 上使用[removeAttribute()](http://www.php.net/manual/en/domelement.removeattribute.php)删除样式属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T10:25:45.257

您需要浏览页面上的每个元素并调用`element.removeAttribute("style")`您可以使用 javascript 递归遍历 dom，网上有很多这样的示例。

# java - java中的哈希码桶分布

> ID：11468589
> 
> 赞同：6
> 
> 时间：2012-07-13T10:22:24.647
> 
> 标签：java, collections, hash, bucket

假设我需要在 Hashset 中存储 1000 个对象，我有 1000 个包含每个对象的存储桶（通过为每个对象生成唯一值的哈希码）还是有 10 个存储桶大约包含 100 个对象更好？

拥有唯一存储桶的 1 个优点是我可以在调用 equals() 方法时节省执行周期？

为什么设置桶的数量并尽可能均匀地分配对象很重要？

理想的对象与桶的比率应该是多少？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-13T10:26:03.983

> 为什么设置桶的数量并尽可能均匀地分配对象很重要？

A`HashSet`应该能够平均在 O(1) 时间内确定成员资格。从[文档](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/HashSet.html)中：

> 此类为基本操作（添加、删除、包含和大小）提供恒定的时间性能，假设哈希函数将元素正确地分散在桶中。

`Hashset`用于实现此目的的算法是检索对象的哈希码并使用它来找到正确的存储桶。然后它遍历桶中的所有项目，直到找到一个相等的项目。如果桶中的项目数大于 O(1)，则查找将花费比 O(1) 更长的时间。

在最坏的情况下 - 如果所有项目散列到同一个桶 - 将花费 O(n) 时间来确定对象是否在集合中。

> 理想的对象与桶的比率应该是多少？

这里有一个时空权衡。增加桶的数量会减少碰撞的机会。然而，它也增加了内存需求。哈希集有两个参数`initialCapacity`，允许您调整应该创建`loadFactor`多少桶。`HashSet`默认负载系数为 0.75，这对于大多数用途来说都很好，但如果您有特殊要求，您可以选择其他值。

有关这些参数的更多信息可以在以下文档中找到[`HashMap`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/HashMap.html)：

> 此实现为基本操作（get 和 put）提供恒定时间性能，假设哈希函数将元素正确地分散在桶中。集合视图的迭代需要的时间与 HashMap 实例的“容量”（桶的数量）加上它的大小（键值映射的数量）成正比。因此，如果迭代性能很重要，则不要将初始容量设置得太高（或负载因子太低），这一点非常重要。
> 
> HashMap 的实例有两个影响其性能的参数：初始容量和负载因子。容量是哈希表中的桶数，初始容量只是哈希表创建时的容量。负载因子是哈希表在其容量自动增加之前允许达到的程度的度量。当哈希表中的条目数超过负载因子与当前容量的乘积时，通过调用rehash方法，容量大致翻倍。
> 
> 作为一般规则，默认负载因子 (.75) 在时间和空间成本之间提供了良好的折衷。较高的值会减少空间开销，但会增加查找成本（反映在 HashMap 类的大多数操作中，包括 get 和 put）。在设置其初始容量时，应考虑映射中的预期条目数及其负载因子，以尽量减少重新哈希操作的次数。如果初始容量大于最大条目数除以负载因子，则不会发生重新哈希操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T10:28:43.730

每个元素大约一个桶对处理器来说更好，太多的桶对内存不利。Java 将从少量存储桶开始，一旦开始填满，就会自动增加 HashSet 的容量，因此除非您的应用程序出现性能问题并且您已确定原因是哈希集，否则您实际上不需要关心。

如果每个存储桶中有多个元素，则查找开始花费更长的时间。如果您有很多空桶，则您使用的内存超出了您的需要，并且迭代元素需要更长的时间。

不过，这似乎是一个等待发生的过早优化——默认构造函数在大多数情况下都很好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T10:29:13.620

`Object.hashCode()`是 type `int`，你只能有**2^32 个**不同的值，这就是你创建存储桶并在它们之间分配对象的原因。

**编辑：**如果您使用`2^32`存储桶来存储 2^32 对象，那么绝对的 get 操作会给您带来恒定的复杂性，但是当您一个一个地插入元素来存储`2^32`对象时，重新散列将比我们使用`Object[]`存储桶时执行的操作那么每次它超过它的长度`array`将创建**更大大小**的新数组并将元素复制到其中。这个过程会增加复杂性。这就是我们使用`equals`and `hashcode`in ratio 的原因，这是`Hashsets`通过提供更好的`hashing algorithm`.

# spring-mvc - RequestMapping 未将 ?（问号）标识为通过 java REST 调用传递的参数的一部分

> ID：11468600
> 
> 赞同：3
> 
> 时间：2012-07-13T10:23:20.560
> 
> 标签：spring-mvc

按照这个：

```
@RequestMapping(value = {"/abcd/id={id}","/abcd?id={id}"}, method = RequestMethod.GET) 
```

公共 ModelAndView 测试（@PathVariable（“id”）字符串 id）{

我在我的代码中指定了上述两种类型的值。前者在我们调用 uri 时工作正常，但后来没有被识别（即）`@RequestMapping`没有识别 ?（问号）作为传递参数的一部分。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-13T10:45:00.377

您应该使用`@RequestParam`方法参数获取 URL 上的参数。

```
@RequestMapping(value = "/abcd", method = RequestMethod.GET)
public void test(@RequestParam String id) {
    // your code here
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T10:44:17.600

urls（和 uris）中的问号用于将参数与路径分开。

`@RequestMapping`将路径作为它的`value`属性。因此它不应该包含问号。

所以基本上你的第一个案例被解释为一条路径（虽然是一个奇怪的路径），而第二个是完全错误的。

# java - 在异步任务前/后执行方法中使用 ProgressDialog

> ID：11468603
> 
> 赞同：0
> 
> 时间：2012-07-13T10:23:24.037
> 
> 标签：java, android, android-asynctask, progressdialog

编辑：问题解决了。使其全球化。我现在正在做面部护理，伙计们。谢谢！

下面是扩展 AsyncTask 的类的一些片段。我想在 preExecute() 方法中启动一个 progressDialog 并执行一个 progressDialog.dismiss(); 在 postExecute() 方法中。我发现的所有例子都说要像下面那样做。我遇到的问题是对话框超出了 onPostExecute 的范围。这是意料之中的，但所有的例子似乎都是这样做的。我还注意到，在导入处有一个小警告标志，说明导入未使用。这个 ProgressDialog 应该工作吗？我需要传递它吗？

```
import android.app.ProgressDialog;
...

protected void onPostExecute(Bitmap image){//error when doing this in resetDisplay.... onPostExecute is invoked by the ui thread so this may be why it works here and not in resetDisplay
                    ImageView imageView=(ImageView) parent.findViewById(R.id.imageDisplay);
                    imageView.setImageBitmap(image);

                    dialog.dismiss();

                }
protected void onPreExecute(){
                    ProgressDialog dialog=ProgressDialog.show(parent, "Loading", "Loading the image of the day");
                } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T10:36:49.833

请参阅下面的代码

```
private class ProgressTask extends AsyncTask<String, Void, Boolean> {

    private ProgressDialog dialog = new ProgressDialog(HomeActivity.this);

    /** progress dialog to show user that the backup is processing. */
    /** application context. */

    protected void onPreExecute() {
        this.dialog.setMessage("Please wait");
        this.dialog.show();
    }

    protected Boolean doInBackground(final String... args) {
        try {

            /**
             * Fetch the RSS Feeds from URL
             */
            Utilities.arrayRSS = objRSSFeed
                    .FetchRSSFeeds(Constants.Feed_URL);
            return true;
        } catch (Exception e) {
            Log.e("tag", "error", e);
            return false;
        }
    }

    @Override
    protected void onPostExecute(final Boolean success) {

        if (dialog.isShowing()) {
            dialog.dismiss();
        }

        if (success) {
            // display UI
            UpdateDisplay();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T10:26:14.767

```
class YourClass extends AsyncTask<...>
{
    ProgressDialog dialog;
    Protected void onPreExecute(){
        // create dialog here
       dialog= new ProgressDialog (...);
    }
    protected void onPostExecute(Bitmap image){
        //
        dialog.dismiss();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T10:25:35.963

您需要在活动`ProgressDialog dialog`中声明对话框的外部`onPreExecute()` ，然后在 preExecute() 和 postExecute() 方法中使用。
在活动或异步任务中这样声明

```
ProgressDialog dialog=new Progress Dialog(YourActivity.this); 
```

然后使用 onPreExecute() 中的对话框作为

```
 dialog.setMessage("Your Messgae");
 dialog.show(); 
```

并在 onPostExecute() 作为

```
dialog.dismiss(); 
```

# css - 具有不同背景大小的多个背景

> ID：11468604
> 
> 赞同：59
> 
> 时间：2012-07-13T10:23:24.303
> 
> 标签：我正在尝试使用css3, 背景大小, css

[我正在尝试使用css3](/questions/tagged/css3 "显示标记为“css3”的问题")的多背景支持创建带有叠加层的页面背景；

```
html, body {
  background: url('https://github.com/jaysalvat/vegas/raw/master/overlays/01.png') repeat,
              url('http://farm8.staticflickr.com/7260/7502004958_595bf03fbf_z.jpg') top left no-repeat;
  background-size: cover;
}​ 
```

我希望照片背景图像“覆盖”页面，并且覆盖层很小（3 * 3px）在孔页上重复。

上面的例子给了我[http://jsfiddle.net/tpmD4/](http://jsfiddle.net/tpmD4/)（也是覆盖页面的覆盖）。

我该如何解决？

当我尝试为两个图像（ ）指定[背景大小](/questions/tagged/background-size "显示标记为“背景大小”的问题")`background-size: 3px 3px, cover;`时；然后图像背景不覆盖，但覆盖有效。

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2012-07-13T10:40:09.107

干得好：

```
html, body {
    background-image: url(01.png), url(z.jpg);
    background-repeat: repeat, no-repeat;
    background-position: 0 0;
    background-size: 3px 3px, cover;
} 
```

[http://jsfiddle.net/tpmD4/6/](http://jsfiddle.net/tpmD4/6/)

# php - PHPExcel setCellValueByColumnAndRow 不将数据写入电子表格

> ID：11468606
> 
> 赞同：4
> 
> 时间：2012-07-13T10:23:41.223
> 
> 标签：php, phpexcel

我正在使用 PHPExcel 将数据从 mysql 数据库输出到 excel 工作簿。我的工作簿有 3 张纸，其中大部分工作正常。我在输出到第三张纸的最后一部分时遇到问题。我要做的是输出一个带有行标题和列标题的表，其值取自 mysql 表，然后根据行/列标题的内容从 mysql 表中获取每行/列组合的数字. 行和列标题按应有的方式写入文件，但内部表格的数字不是。当我将输出回显到屏幕时，所有数据都出现了，并且行/列迭代正在增加，因为它们应该只是 setCellValueByColumnAndRow 似乎没有设置工作表中的值。我遇到问题的代码部分如下。

```
$objPHPExcel->setActiveSheetIndex(2);

while($srow = mysql_fetch_assoc($query_company))
{
$newarray[] = $srow['entity'];
}
$row4 = 2;
$col4 = 1;
while($trow = mysql_fetch_row($query_ctry))
{
$country = $trow[0];

while($comp = each($newarray))
{
$company = $comp[1];
$total = mysql_query("SELECT noparts FROM totalslist WHERE country = '$country' AND entity = '$company'") or die (mysql_error());
if ($numrows = mysql_num_rows($total) == 0)
{
$totalres = 0;
}
else
{
$result3 = mysql_fetch_row($total);
$totalres = $result3[0];
}

$objPHPExcel->getActiveSheet()->setCellValueByColumnAndRow($col4, $row4, $totalres); 
$col4++;

}
reset($newarray);
$row4++;
$col4 = 1;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T17:51:31.687

**解决方案！实际上我通过稍微更改代码解决了这个问题。我先写行标题和列标题，然后再添加内部表值。我更改了它，以便在增加行和列时添加标题和数据，如下面的代码所示。可能会帮助别人。

```
$objPHPExcel->createSheet(2);
$objPHPExcel->setActiveSheetIndex(2);
$objPHPExcel->getActiveSheet()->setTitle('PivotTable');
$query_ctry = mysql_query("SELECT DISTINCT country FROM totalslist ORDER BY country");
$numctry = mysql_num_rows($query_ctry);
$query_company = mysql_query("SELECT DISTINCT entity FROM totalslist ORDER BY entity");
$numcomp = mysql_num_rows($query_company);

while($srow = mysql_fetch_assoc($query_company))
{
    $newarray[] = $srow['entity'];
}
$row3 = 2;
$col3 = 1;
while($trow = mysql_fetch_row($query_ctry))
{
    $country = $trow[0];

    while($comp = each($newarray))
    {
        $company = $comp[1];
        $total = mysql_query("SELECT noparts FROM totalslist WHERE country = '$country' AND entity = '$company'");
    if ($numrows = mysql_num_rows($total) == 0)
    {
        $totalres = 0;
    }
    else
    {
        $result3 = mysql_fetch_row($total);
        $totalres = $result3[0];
    }
    $objPHPExcel->getActiveSheet()->setCellValueByColumnAndRow(0, $row3, $country);
    $objPHPExcel->getActiveSheet()->setCellValueByColumnAndRow($col3, 1, $company);
    $objPHPExcel->getActiveSheet()->setCellValueByColumnAndRow($col3, $row3, $totalres); 
    $col3++;

    }
        reset($newarray);
        $row3++;
        $col3 = 1;
}
        // Save Excel file
        $objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, 'Excel2007');
        $objWriter->save('php://output');
        exit(); 
```

# php - PHP Exec() 或 System() 导致 500 错误

> ID：11468610
> 
> 赞同：0
> 
> 时间：2012-07-13T10:24:02.830
> 
> 标签：php, system, exec

一个相当简单的问题，我想。这是我的测试代码（显然，当我真正编写此代码时，我会添加安全预防措施） -

```
<?php
    if (isset($_POST['url']) && !empty($_POST['url'])) {
        system('wget --no-parent --timestamping --convert-links --page-requisites --no-directories --no-host-directories -erobots=off '.$_POST['url']);
} else {
    echo '<form method="post"><input type="url" name="url"><input type="submit"></form>';
}

?> 
```

我需要启用/安装 PHP 或 Apache2 中的某些模块才能使其正常工作吗？如果有帮助，我正在通过浏览器访问此页面。即使尚未调用命令（该部分`if`语句未运行），也会发生这种情况，如果我注释掉 system() 或 exec() 行，500 错误就会消失。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T10:45:15.413

您提供的代码中有错误；最后你把点放在错误的地方：

```
 '.$_POST['url']); 
```

代替

```
 .'$_POST['url']); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T05:28:33.003

您的代码对我有用，请检查`system`功能是否为您禁用。您可以使用`ini_get('disable_functions')`它来检查它是否被禁用。

# javascript - 使用数组的随机子集生成表

> ID：11468611
> 
> 赞同：0
> 
> 时间：2012-07-13T10:24:03.917
> 
> 标签：javascript, jquery

目前这个脚本从列表中获取单词并生成一个网格，每次给单词随机位置。生成单词后，我希望将它们拆分为单独的字符，彼此相邻的单元格-我该怎么做？

```
 var listOfWords = ["mat", "cat", "dog", "pit", "pot", "fog", "log", "pan", "can",  "man", ];
  var shuffledWords = listOfWords.slice(0, 12);
  shuffledWords.sort(function() {
  return 0.5 - Math.random();
});

 var table = $('<table class="tablestyle">');
 var rows = 6;
 var cols = 2;
 var tr;
 var index;

for (var row = 0; row < rows; row++) {
tr = $('<tr>');
for (var col = 0; col < cols; col++) {
    index = (row * cols) + col;
    $('<td>').text(shuffledWords[index]).appendTo(tr);
}
tr.appendTo(table);
}

 table.appendTo('body');

 $('<table>' + innerTable + '</table>').appendTo('body'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T10:26:53.200

在切片之前尝试随机排序列表。像这样

```
listOfWords.sort(function() {
  return 0.5 - Math.random();
});
var shuffledWords = listOfWords.slice(0, 12); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T11:46:02.523

```
<script type="text/javascript">
var html = "<table border='0' width='100%'>";
html += "<tr> <td> Search ID </td> <td> Name </td> <td>Location</> <td> Reason </td></tr>"
html += "<tr> <td> 1 </td> <td> Bob </td> <td>Glasgow</> <td> Hello </td></tr>"
html+="</table>";

$('#outputID').append(html);
</script> 
```

它说的地方

```
<td> Bob </td> 
```

将其替换为

```
"<td>" + varibleName + "</td>" 
```

变量名可以是每个字符吗？只是把它放在一个适合的循环中？

希望这可以帮助

# c++ - 如何修改不同类型列表中的元素？

> ID：11468615
> 
> 赞同：1
> 
> 时间：2012-07-13T10:24:10.227
> 
> 标签：c++, algorithm, c++11, stl

如何使用 stl 算法有效地修改这两个列表的元素：

```
std::list<std::pair<double, string> > listPair(10);
std::list<double> listA(10); 
```

并且以这样一种方式，第一个对元素从 listA 中获取相应的双精度值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T10:30:09.667

尝试使用 C++11 lambda

```
#include <algorithm>
#include <list>
#include <string>
#include <utility>

int main()
{
    std::list<std::pair<double, std::string> > listPair(10);
    std::list<double> listA(10);

    // original question: assign double of listA to listPair
    std::transform(
        listA.begin(), listA.end(), listPair.begin(), listPair.begin(), 
        [](double d, std::pair<double, std::string> const& p) {
            return std::make_pair(d, p.second);
        }
    ); 

    // other way around: assign double from listPair to listA
    std::transform(
        listPair.begin(), listPair.end(), back_inserter(listA), 
        [](std::pair<double, std::string> const& p) {
            return p.first;
        }
    );

    return 0;
 } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T10:33:13.217

在这里，我假设`listPair`已经填满，因为否则无法获取该字符串。

* * *

您可以直接遍历集合。

```
auto a_cur = listA.begin(), a_end = listA.end();
auto pair_cur = listPair.begin();
for (; a_cur != a_end; ++ a_cur, ++ pair_cur) {
    pair_cur->first = *a_cur;
} 
```

或使用“二进制”版本`std::transform`，但这将涉及复制字符串：

```
std::transform(listA.begin(), listA.end(), listPair.begin(), listPair.begin(),
               [](double a, std::pair<double, string> b) {
                   return std::make_pair(a, b.second);
               }); 
```

# ruby-on-rails - Rails 3 嵌套表单和 jQuery UI 日期选择器仅更新第一个元素

> ID：11468617
> 
> 赞同：0
> 
> 时间：2012-07-13T10:24:24.893
> 
> 标签：ruby-on-rails, ruby-on-rails-3, jquery-ui, jquery-ui-datepicker

这不像我想要的那样工作。

我有一份**新**工作的报名表，它由多个步骤组成。默认情况下，每个作业填充4 个**新的和未保存的步骤。**

使用下面视图中的代码，我可以将 jQuery UI datepicker 控件附加到文本字段，当我单击它们时，它们会出现在正确的输入字段中。

但是，当我从选择器中选择一个日期时，它只会进入代表第一步开始日期的字段。

```
<%= form_for @job, :url => jobs_path do |f| %>
    <%= f.label :name %>
    <%= f.text_field :name %>

    <% @job.steps.each do |step| %>
        <%= fields_for "job[step_attributes][]", step do |s| %>
            <%= s.label :name %>
            <%= s.text_field :name %>

            <%= s.label :start_date %>
            <%= s.text_field :start_date, :class => :datepicker %>
        <%= end %>
<% end %>

<script type="text/javascript">
    $(function() {
        $('.datepicker').datepicker({ dateFormat: "dd/mm/yy"});
    });
</script> 
```

我知道最终这与`id`输入元素的生成属性相同有关，想知道是否有人成功克服了这个问题？

这个小提琴： http: [//jsfiddle.net/twilson/u9m9L/](http://jsfiddle.net/twilson/u9m9L/)演示了我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T10:37:04.580

首先，`fields_for`改为在您的表单构建器上调用：

```
<%= f.fields_for :steps do |s| %> 
```

其次，`@job.steps`如果将关联名称指定为`fields_for`. [这里](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-fields_for)有一个关于如何将其与一对多关联一起使用的示例。

如果还是有这个问题，把你生成的 HTML 贴上去，这样更容易找到原因。

**编辑**

好的，所以问题是因为 Rails 表单构建器不会生成子索引来为嵌套字段集提供唯一 ID。这很可能是因为关联已建立但尚未保存到数据库。我看到的一种方法是手动分配子索引，如下所示：

```
<% @job.steps.each_with_index do |step,i| %>
  <%= f.fields_for :steps, step, :child_index => i do |s| %> 
```

看看是否有帮助。

这是一个有点做作的场景，因为您只有新对象。为了能够动态添加/删除嵌套项，这会有点棘手。[您可以在嵌套模型 Railscasts](http://railscasts.com/episodes/196-nested-model-form-part-1)中看到如何处理这个问题。

# asp.net - JavaScript ASp.net .. 从 JavaScript 在 HiddenField 中存储值时出错 .. 检查下面的代码

> ID：11468618
> 
> 赞同：0
> 
> 时间：2012-07-13T10:24:25.050
> 
> 标签：asp.net

我的尝试1：

```
var a=confirm('Do You Really want to Save this Record?') ;
document.getElementById('Hidden.ClientID') = a; 
```

我的尝试2：

```
var a=confirm('Do You Really want to Save this Record?') ;
document.getElementById('Hidden.ClientID').value = a; 
```

代码背后：

```
Response.Write(Hidden.Value);
Response.End(); 
```

///////// 为什么值没有存储在隐藏字段中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T10:35:40.170

工作代码见

```
document.getElementById('<%=Hidden.ClientID%>').value="a";

    Code Behind :        
    Response.Write(Hidden.Value);
    Response.End(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T10:27:32.420

尝试，

```
var ele=document.getElementById('<%=Hidden.ClientID%>');
ele.value=a; 
```

# javascript - 当点击输入附近的元素时，会触发输入的点击事件

> ID：11468619
> 
> 赞同：0
> 
> 时间：2012-07-13T10:24:24.933
> 
> 标签：javascript, html

```
<label  onclick="alert('label')">
    <input type="text"  onclick="alert('input')" >
    <label  onclick="alert('innerLabel-1')">abc</label>
    <label  onclick="alert('innerLabel-2')">cde</label>
</label> 
```

单击“abc”和单击“cde”时

谁知道结果？为什么会有不同的结果？

# codeigniter - 使用变量重定向

> ID：11468620
> 
> 赞同：3
> 
> 时间：2012-07-13T10:24:28.983
> 
> 标签：codeigniter, redirect

如果我问了一个愚蠢的问题，我很抱歉。

如果在视图`$this->load->view('some_view', $data);`中，我可以像这样在重定向上使用它`redirect('some_controller', $data)`吗？

再次抱歉，如果我问了一个愚蠢的问题，谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T10:50:11.683

不幸的是，不，你不能那样做——但你也许可以使用会话“ [flashdata](http://codeigniter.com/user_guide/libraries/sessions.html) ”。

```
$this->session->set_flashdata('my_data', $data);
redirect('some_controller'); 
```

然后在“some_controller”中：

```
$flash_data = $this->session->flashdata('my_data');
if ($flash_data)
{
    $this->load->vars($flash_data);
} 
```

大量数据可能存在问题，因此我建议尽可能寻找另一种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-01T10:55:00.593

```
echo "<script type='text/javascript'>
    window.location.href='http://localhost/some_controller/$data';
    </SCRIPT>"; 
```

# algorithm - 为什么 DFS 和 BFS 的时间复杂度都是 O( V + E )

> ID：11468621
> 
> 赞同：168
> 
> 时间：2012-07-13T10:24:33.923
> 
> 标签：algorithm, time-complexity, graph-theory, breadth-first-search

BFS的基本算法：

```
set start vertex to visited

load it into queue

while queue not empty

   for each edge incident to vertex

        if its not visited

            load into queue

            mark vertex 
```

所以我认为时间复杂度是：

```
v1 + (incident edges) + v2 + (incident edges) + .... + vn + (incident edges) 
```

`v`顶点`1`在哪里`n`

首先，我说的对吗？其次，这是怎么回事`O(N + E)`，以及为什么会非常好的直觉。谢谢

* * *

## 回答 #1

> 赞同：313
> 
> 时间：2012-07-13T10:29:30.750

你的总和

```
v1 + (incident edges) + v2 + (incident edges) + .... + vn + (incident edges) 
```

可以改写为

```
(v1 + v2 + ... + vn) + [(incident_edges v1) + (incident_edges v2) + ... + (incident_edges vn)] 
```

第一组是`O(N)`，而另一组是`O(E)`。

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2012-07-13T10:28:47.380

DFS（分析）：

*   设置/获取顶点/边标签需要`O(1)`时间
*   每个顶点被标记两次
    *   曾经作为 UNEXPLORED
    *   曾经访问过
*   每条边被标记两次
    *   曾经作为 UNEXPLORED
    *   一次作为 DISCOVERY 或 BACK
*   对每个顶点调用一次方法incidentEdges
*   `O(n + m)`如果图形由邻接表结构表示，DFS 会及时运行
*   回顾`Σv deg(v) = 2m`

BFS（分析）：

*   设置/获取顶点/边标签需要 O(1) 时间
*   每个顶点被标记两次
    *   曾经作为 UNEXPLORED
    *   曾经访问过
*   每条边被标记两次
    *   曾经作为 UNEXPLORED
    *   一次作为 DISCOVERY 或 CROSS
*   每个顶点被插入一次序列中`Li`
*   对每个顶点调用一次方法incidentEdges
*   `O(n + m)`如果图形由邻接表结构表示，BFS 会及时运行
*   回顾`Σv deg(v) = 2m`

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2014-12-17T06:04:35.303

非常简化，没有太多形式：每条边都被认为是两次，每个节点只被处理一次，所以复杂度必须是边数和顶点数的常数倍。

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2017-08-07T09:27:56.877

对此的直观解释是通过简单地分析单个循环：

1.  访问一个顶点 -> O(1)
2.  在所有入射边上的 for 循环 -> O(e) 其中 e 是在给定顶点 v 上入射的边数。

所以单次循环的总时间是O(1)+O(e)。现在对每个顶点求和，因为每个顶点都被访问一次。这给

```
For every V
=> 

    O(1)
    +

    O(e)

=> O(V) + O(E) 
```

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2015-09-10T15:39:03.750

时间复杂度`O(E+V)`不是`O(2E+V)`因为如果时间复杂度是 n^2+2n+7 那么它被写成 O(n^2)。

因此，O(2E+V) 写成 O(E+V)

因为 n^2 和 n 之间的差异很重要，但 n 和 2n 之间的差异不重要。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2015-07-21T08:23:36.493

我认为每条边都被考虑了两次，每个节点都被访问过一次，所以总时间复杂度应该是 O(2E+V)。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-07-27T04:17:21.767

简短而简单的解释：

> 在最坏的情况下，您需要访问所有顶点和边，因此最坏情况下的时间复杂度是 O(V+E)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-11-30T16:39:47.367

在 Bfs 中，每个相邻顶点都会被插入一次队列中。这是通过查看顶点的边缘来完成的。每个访问过的顶点都被标记，因此不能再次访问：每个顶点只访问一次，并且检查每个顶点的所有边。所以BFS的复杂度是V+E。在 DFS 中，每个节点维护其所有相邻边的列表，然后，对于每个节点，您需要通过线性时间遍历其邻接列表一次来发现其所有邻居。对于有向图，所有节点的邻接表大小之和为 E（总边数）。因此，DFS 的复杂度为 O(V + E)。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2020-09-26T06:53:32.817

这是 O(V+E) 因为每次访问 V 的 v 必须访问 E 的每个 e 其中 |e| <= V-1。由于对 V 的 v 有 V 次访问，因此这是 O(V)。现在你必须添加 V * |e| = E => O(E)。所以总时间复杂度是 O(V + E)。

# java - 包含整数值的 2 个 ArrayList 的 INTERSECT 结果

> ID：11468624
> 
> 赞同：0
> 
> 时间：2012-07-13T10:24:50.410
> 
> 标签：java, performance, arraylist, intersection

我有两个*ArrayList*都包含*整*数值。我的目标是获得比较这两个列表的相同/共同/重复值。换句话说（用 SQL 的说法），我需要两个列表的[INTERSECT](http://en.wikipedia.org/wiki/Intersect_%28SQL%29 "相交 (SQL)")结果，即出现在两个列表中的值。

**例子：**

```
ArrayList<Integer> list1 = new ArrayList<Integer>();
list1.add(100);
list1.add(200);
list1.add(300);
list1.add(400);
list1.add(500);

ArrayList<Integer> list2 = new ArrayList<Integer>();
list2.add(300);
list2.add(600); 
```

我可以想到的一种实现/解决方案是循环列表中的一个，例如：

```
ArrayList<Integer> intersectList = new ArrayList<Integer>();

for (Integer intValue : list1) 
{
    if(list2.contains(intValue))
        intersectList.add(intValue);
} 
```

在这种情况下，`intersectList`将只包含 1 个要添加的*整数*项，即`300`，它同时出现在两个列表中。

我的问题是，有没有更好/最快/有效的方法来实现这个逻辑？[Apache Commons](http://commons.apache.org/ "阿帕奇公地")库中有任何可用的选项吗？任何其他想法/建议/意见表示赞赏。

**注意：**出于说明目的，我在这里只显示了 5 个项目和 2 个项目被添加到列表中。在我的实时实现中，每个列表中会有超过 1000 个元素。因此，性能也是一个需要考虑的*关键因素。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T10:29:21.547

如果您可以覆盖 list1 的结果：

`list1.retainAll(list2);`

否则首先克隆/复制 list1。

虽然不确定性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T10:31:19.190

```
list1.retainAll(list2)//for intersection 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-22T09:08:32.410

如果您不想修改现有列表，请使用 org.apache.commons.collections 中的 ListUtils。

`ListUtils.intersection(list1, list2)`

# mysql - JSP、MySQL 和 UTF-8

> ID：11468625
> 
> 赞同：2
> 
> 时间：2012-07-13T10:25:02.507
> 
> 标签：mysql, jsp, tomcat, utf-8, internationalization

我正在精神上，我通过表格输入的国际字符没有完全按照输入的方式存储，并且存储的数据没有按照存储在数据库中的方式返回。

如果我输入“çanak çömlek patladı”并在我使用的表单上单击“保存”，页面会显示“çanak çömlek patladı”，但数据库已存储“çanak çömlek patlad? 如果我再次访问该页面，我会得到 '￧anak ￧�mlek patlad?'' 如果我单击表单上的保存而不更改数据库存储的任何内容 '?anak ??mlek patlad?' 并且浏览器显示“？anak ??mlek patlad?”

我的 MySQL 服务器具有以下配置：

```
default-collation=utf8
collation_server=utf8_unicode_ci
character_set_server=utf8
default-character-set=utf8 
```

数据库字符集是 utf8，数据库排序规则是 utf8_unicode_ci，我使用的表设置为相同。

我的 JSP 文件的第一行是：

```
<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8" %> 
```

html头是这样的：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Test</title>
</head> 
```

我编译了一个 EncodingFilter 类，它是：

```
import java.io.IOException;
import javax.servlet.*;

public class EncodingFilter
    implements Filter
{

    public EncodingFilter()
    {
    }

    public void init(FilterConfig filterconfig)
        throws ServletException
    {
        filterConfig = filterconfig;
        encoding = filterConfig.getInitParameter("encoding");
    }

    public void doFilter(ServletRequest servletrequest, ServletResponse servletresponse, FilterChain filterchain)
        throws IOException, ServletException
    {
        servletrequest.setCharacterEncoding(encoding);
        filterchain.doFilter(servletrequest, servletresponse);
    }

    public void destroy()
    {
    }

    private String encoding;
    private FilterConfig filterConfig;
} 
```

这个类在我的 web.xml 文件中被引用如下：

```
<filter>
<filter-name>EncodingFilter</filter-name>
<filter-class>EncodingFilter</filter-class>
<init-param>
<param-name>encoding</param-name>
<param-value>UTF-8</param-value>
</init-param>
</filter>

<filter-mapping>
<filter-name>EncodingFilter</filter-name>
<url-pattern>/*</url-pattern>
</filter-mapping> 
```

我重新启动了我的系统，因此重新启动了 Tomcat 和 MySQL 服务器，检查了日志并且上述任何配置都没有错误。

谁能帮帮忙，不然我头发就没有了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T14:20:12.477

解决了它，我放弃了以前的 db java 类并编写了一个新的 db 函数，因为以前开发的类似乎导致了双重编码问题。

我得到的错误是手动输入“çanak çömlek patladı”直接到数据库，这与 MySQL 没有真正在 varchar 字段上处理 UTF-8 的问题有关。一旦我将该字段更新为 varbinary，一切正常。

我希望这对某人有所帮助，我相信我的头发会重新长出来，感谢所有提供建议的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T10:29:43.890

在从数据库中检索任何内容之前，先执行`SET NAMES UTF8`查询，然后执行所有查询。然后，您将按照它们的外观获得字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T10:32:01.993

当您连接到数据库时，您可以确保将“characterEncoding”设置为“utf8”吗？此外，如果您在浏览器（例如 fox）中打开您的页面，显示的字符编码是什么？

我认为你应该尝试一下“divide et impera”。了解 MYSQL 是否是问题很重要（我怀疑不是）。为此，您可以在应用程序中插入 UTF 字符串并将其保存到数据库中。如果这不起作用，我们知道问题出在 mysql 上。如果它有效，它可能是 servlet。

在 servlet 级别添加它不会有什么坏处：

```
request.setCharacterEncoding("UTF-8");
response.setCharacterEncoding("UTF-8"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T10:38:53.073

您需要检查以下事项：

1.  您的数据库应该支持多语言（如果是 MySQL，在安装时它会要求您提供此选项）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-16T01:20:59.990

[从http://wiki.apache.org/tomcat/FAQ/CharacterEncoding#Q8](http://wiki.apache.org/tomcat/FAQ/CharacterEncoding#Q8)开始

MySQL 中的字符保存列必须能够接受 UTF-8 字符。大多数 MySQL 默认值是针对`latin1`字符集的，除非您的 DDL 脚本为列设置了字符集。

如果要将表从一种编码更改为另一种编码，可以这样做：

```
mysql> ALTER TABLE t CONCERT TO CHARACTER SET 'utf8' 
```

如果你真的想这样做，我认为你也可以逐列执行此操作。请注意，对于具有大量数据、大量索引等的表，ALTER 可能需要很长时间。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-06T22:43:46.503

我遇到了字符编码问题（JSP-Mysql）。我写了 String URL = "jdbc:mysql://localhost/deneme?useUnicode=true&characterEncoding= **ISO-8859-1** "; 并解决了问题。但是，数据库的表必须是**UTF-8**。

# objective-c - 当 iPad 旋转时，UIPopovercontroller 不会保持在其位置

> ID：11468630
> 
> 赞同：0
> 
> 时间：2012-07-13T10:25:06.417
> 
> 标签：objective-c, ios, xcode, ipad

我正在创建一个这样的弹出窗口。

```
-(void)showPop{

    if (self.popoverController2 == nil) {

        RootViewController *iap = 
        [[RootViewController alloc]initWithNibName:@"RootViewController" bundle:[NSBundle mainBundle]];
        [iap setDelegate:self];

        UIPopoverController *popover = 
        [[UIPopoverController alloc] initWithContentViewController:iap]; 

        popover.delegate = self;

        popover.popoverContentSize = CGSizeMake(320, 300);  

        self.popoverController2 = popover;

    }

    CGRect popoverRect = [self.view convertRect:[shopButton frame] fromView:[shopButton superview]];

    [self.popoverController2 presentPopoverFromRect:shopButton.bounds inView:shopButton 
                           permittedArrowDirections:UIPopoverArrowDirectionAny 
                                           animated:YES];

} 
```

ShopButton 是弹出弹出框的按钮。现在的问题是，当我旋转我的设备时，弹出框保持在它绘制的位置，而视图的其余部分会根据旋转进行调整。简单来说，当设备旋转并绘制弹出框（从 UIButton 弹出）时，弹出框不会随 UIButton 一起移动。如果我关闭弹出框并再次从按钮绘制它，它会在按钮上方正确绘制。只有在弹出弹出框的情况下旋转时才会出现问题。

请尽快帮助。谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T10:31:25.647

您可以在方向改变之前隐藏弹出框，然后立即使用新坐标再次显示它。

# selenium - 在 PHPUnit 中为报告记录额外的自定义信息

> ID：11468631
> 
> 赞同：1
> 
> 时间：2012-07-13T10:25:18.000
> 
> 标签：selenium, report, reporting, phpunit

我正在使用 PHPUnit Selenium 对我的项目进行功能测试。我正在使用 junit 进行日志记录并使用日志文件来生成报告。以下是 phpunit.xml 中的日志标签

```
<phpunit>
 <logging>
  <log type="junit" target="reports/logfile.xml" logIncompleteSkipped="false" />
 </logging>
</phpunit> 
```

然后我使用 logfile.xml 生成报告。

我正在寻找的是记录附加信息的能力（说明在断言中究竟测试了什么的信息，在这两种情况下，即在断言的通过/失败中）。

基本上在报告中，我想说明正在断言的内容。并且该信息将由测试编写者在测试用例中与断言一起手动写入。

`assert`函数带有第三个可选参数作为消息，但仅在失​​败时显示。

例如：

```
<?php
// $accountExists is the dummy variable which wil probably checking in database for the existence of the record
$this->assertEquals(true, $accountExists, 'Expecting for accountExists to be true');
?> 
```

以上将在失败时返回消息，但在测试通过时不会返回。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T06:43:48.133

你必须使用

--printer 命令行参数指向自定义打印机类

[http://www.phpunit.de/manual/3.6/en/extending-phpunit.html#extending-phpunit.PHPUnit_Framework_TestListener](http://www.phpunit.de/manual/3.6/en/extending-phpunit.html#extending-phpunit.PHPUnit_Framework_TestListener)

在您的 endTest 函数中，您在 printf 中输入的任何内容都会显示在您的日志文件中。

# c# - 将文件复制或移动到文件夹时，FileSystemWatcher 未引发

> ID：11468637
> 
> 赞同：3
> 
> 时间：2012-07-13T10:25:42.680
> 
> 标签：c#, .net, filesystemwatcher

> **可能重复：**
> [使用 FileSystemWatcher 检测移动的文件](https://stackoverflow.com/questions/1286114/detecting-moved-files-using-filesystemwatcher)

我正在寻找一种解决方案来监视目录并在新文件移入目录时通知我的应用程序。显而易见的解决方案是使用 .NET 的 FileSystemWatcher 类。

但问题是，它会引发一个事件，即在文件夹中创建/删除一个新文件，但在将文件移动/复制到文件夹中时不会引发事件。

谁能告诉我这种行为的原因是什么。

我的代码是

```
static void Main(string[] args)
    {
        Run();
    }

    [PermissionSet(SecurityAction.Demand, Name = "FullTrust")]
    public static void Run()
    {
        // Create a new FileSystemWatcher and set its properties.
        FileSystemWatcher watcher = new FileSystemWatcher();
        watcher.Path = @"D:\New folder";
        /* Watch for changes in LastAccess and LastWrite times, and
           the renaming of files or directories. */
        watcher.NotifyFilter = NotifyFilters.LastAccess | NotifyFilters.LastWrite
           | NotifyFilters.FileName | NotifyFilters.DirectoryName;
        // Only watch text files.
        watcher.Filter = "*.txt";

        // Add event handlers.
        watcher.Changed += new FileSystemEventHandler(OnChanged);
        watcher.Created += new FileSystemEventHandler(OnChanged);
        watcher.Deleted += new FileSystemEventHandler(OnChanged);
        watcher.Renamed += new RenamedEventHandler(OnRenamed);

        // Begin watching.
        watcher.EnableRaisingEvents = true;

        // Wait for the user to quit the program.
        Console.WriteLine("Press \'q\' to quit the sample.");
        while (Console.Read() != 'q') ;
    }

    // Define the event handlers.
    private static void OnChanged(object source, FileSystemEventArgs e)
    {
        // Specify what is done when a file is changed, created, or deleted.
        Console.WriteLine("File: " + e.FullPath + " " + e.ChangeType);
    }

    private static void OnRenamed(object source, RenamedEventArgs e)
    {
        // Specify what is done when a file is renamed.
        Console.WriteLine("File: {0} renamed to {1}", e.OldFullPath, e.FullPath);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T10:37:54.250

我在我的一个 Home 应用程序中使用了 FileSystemWatcher。但据我所知，FileSystemWatcher 没有任何移动或复制检测事件。

根据 MSDN

> **复制和移动文件夹**
> 
> 操作系统和 FileSystemWatcher 对象将剪切和粘贴操作或移动操作解释为文件夹及其内容的重命名操作。如果您将包含文件的文件夹剪切并粘贴到正在监视的文件夹中，则 FileSystemWatcher 对象仅将文件夹报告为新文件夹，而不报告其内容，因为它们实际上只是被重命名。

欲了解更多信息，请单击[此处](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx)。

我所做的是监视父文件夹和子文件夹并记录其中的所有更改。为了包含子目录，我使用了以下属性。

```
watcher.IncludeSubdirectories=true; 
```

一些谷歌搜索建议使用计时器来检测更改。但不知道效果如何。

# database - 删除数千个表会使数据库变慢

> ID：11468639
> 
> 赞同：1
> 
> 时间：2012-07-13T10:25:46.667
> 
> 标签：database, oracle, oracle11g

我正在处理一些问题，我正在创建数千个表并进行一些测试。

在下一次迭代中，我将删除这些表并再次重新生成它。但是通过这些步骤，我的数据库变得非常慢。

甚至它是我只工作的本地数据库，所以它的唯一效果是多次删除表。

任何人都知道在这种情况下提高数据库性能。我正在使用 UI 从 PL/SQL 开发人员那里删除这些表。

我正在使用 Oracle 11g。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T06:54:57.443

主要瓶颈可能是 PL/SQL Developer GUI。处理大量对象或窗口时可能会很慢。

例如，当我创建 1000 个表时：

```
begin
    for i in 1 .. 1000 loop
        execute immediate 'create table table'||lpad(i,4,'0')||'(a number)';
    end loop;
end;
/ 
```

从 GUI 中删除它们需要 70 秒，但使用此脚本只需 20 秒：

```
begin
    for i in 1 .. 1000 loop
        execute immediate 'drop table table'||lpad(i,4,'0');
    end loop;
end;
/ 
```

# iphone - Objective-C：将浮点值调整为0-1的方法的名称

> ID：11468641
> 
> 赞同：0
> 
> 时间：2012-07-13T10:25:50.770
> 
> 标签：iphone, objective-c, naming-conventions, method-names

我创建了以下方法来安全地使用费率。
（有时速率会变成无效值，例如 INFINITY、NAN 或 0-1）

```
-(double)XXXX:(double)rate
    if (rate >= 1) {
         return 1;
    } else if (rate <= 0) {
        return 0;
    } else if (0 <= rate && rate <= 1) {
        return rate;
    } else {
        return 0;
    }
} 
```

我应该给这个方法取什么名字？

**编辑：**
我使用速率来显示 UISlider、UIProgress 或仅 NString(XX %) 的时间进度。

该方法的用法是：

```
rate = [objectOrClass XXXX: currentTime / totalTime];
rate = [objectOrClass XXXX:(currentTime + additionalTime) / totalTime]; 
```

我还用它来计算来自 rate 的 currentTime：

```
currentTime = [objectOrClass XXXX:rate] * totalTime; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T10:35:59.990

```
static inline float RateAligned(float rate) {
    return MAX(.0f, MIN(1.0f, rate));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T10:34:35.177

```
-(double) adjustRate:(double)rate; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T12:13:16.823

```
When totalTime is zero  you will get INFINITY.

When totalTime and currentTime both are zeros you will get NAN.

When (currentTime + additionalTime) and currentTime both are zeros you will get NAN. 
```

我想这会对你有所帮助。

# keyboard - 单击以替换值，shift + 单击以使用 jquery 附加值

> ID：11468644
> 
> 赞同：0
> 
> 时间：2012-07-13T10:25:53.770
> 
> 标签：keyboard, click, append, jquery

我有一个物品清单。
当我单击这些项目中的任何一个时，我会将其-value*复制*`id`到 form `text`-field 中。
每次单击时，它都会替换该值，默认情况下是正确的。但是我想补充的是，用户可以按住键盘上的一个键，然后当他们点击时，他们`.append`只是点击了相同的表单字段。

这是我用于第一个/默认场景的 jQuery 代码：

```
$(function(){
    $('ul#filter-results li').click(function(){  
        var from = $(this).attr('id');  //  get the list ID and
        $('input#search').val(from+' ').keyup();  //  insert into text-field then trigger the search and
        $('input#search').focus();  //  make sure the field is focused so the user can start typing immediately
    });
}); 
```

有没有办法实现某种键盘按键监听器？
就像是：

```
if (e.shiftKey){
    .append('this text instead')
} 
```

还没试过看看`shiftKey`这里是否有任何有效的名字

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T10:41:14.753

```
$('ul#filter-results').on('click', 'li', function(e) {
  if(e.shiftKey) {
    do something;
  } else {
    do something else;
  }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T10:51:13.197

[`shiftKey`](https://developer.mozilla.org/en/DOM/event.shiftKey)是事件对象的属性之一，可以使用。试试这个：

```
$(document).on('keyup click', function(e){
   if (e.shiftKey) {
       $('input#search').focus()
       $('input#search').val(e.target.id)
   }
}) 
```

[演示](http://jsfiddle.net/gkFxT/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T10:32:39.393

有一个用于扩展点击的 jQuery 插件。

您可以尝试一下，或者看看他们是如何做到的并自己实施。

[ExtendedClick 插件](http://archive.plugins.jquery.com/project/extendedclick)

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T12:25:14.417

这就是我最终得到的结果：
*我切换到`altKey`是因为`shiftKey`我点击时标记了很多文本。
除了不好看，什么都没做……*

```
$(function(){
    $('ul#filter-results li').click(function(e){

        var text = $(this).attr('id');  //  get the ID
        var input = $('#search');  //  form field to insert text into

        if (e.altKey){  input.val(input.val()+', '+text+' ').keyup();  }  //  fetch whatever is already there, and add some more
        else {  input.val(text+' ').keyup();  }  //  just replace whatever is already there

        $('#search').focus();

    });
}); 
```

谢谢你的好建议...

# unit-testing - 在对象中模拟对象

> ID：11468657
> 
> 赞同：0
> 
> 时间：2012-07-13T10:26:37.320
> 
> 标签：unit-testing, mocking, rhino-mocks, rhino-mocks-3.5

我已经开始学习 Rhino Mocks 并且能够按照在线 wiki 中的示例进行操作。我以为我会将这些知识应用到我的一个家庭项目中，但在与技术抗争了数小时后，我陷入了困境。这是我正在尝试做的事情（如果我没有提供足够的信息，请告诉我——我不想只是做一个巨大的代码转储）：

我有一个名为**DataSurface**的类。

它有一个名为**unitOfWork**的成员，它又包含三个存储库**TaskRepository**、**WorkRepository**和**ProjectRepository**。每个都作为 Getter 属性公开。

在 DataSurface 中，有一个**InsertNewWorkItem**方法调用 TaskRepository 上的 Find 方法，**如下**所示：

```
public void InsertNewWorkItem(Entities.Work workItem)
{
    var taskForWorkItem = this.unitOfWork.TaskRepositoryInstance.Find(t => t.ID == workItem.TaskId).First();

    Work newWorkItem = new Work
    {
       DateOfWork = workItem.DateOfWork,
       Description = workItem.Description,
       Duration = workItem.Duration,           
       Task1 = taskForWorkItem,
       Week = workItem.WeekNumber,
    };

        this.unitOfWork.WorkRepositoryInstance.Add(newWorkItem);
        this.unitOfWork.WorkRepositoryInstance.SaveChanges();
} 
```

我希望验证的是**TaskRepository的****Find**方法被调用了。

 ****因为存储库是“2 类深度”，即相对于InsertNewWorkItem**方法的成员内部的成员，我似乎根本无法创建存储库模拟对象。

我觉得我正在尝试做的是一种反模式。

我也意识到，也许代码不是可模拟的。我尝试了在 unitofwork 中实例化存储库的每一种组合（例如构造函数 DI），但每次，Rhino Mocks 都会抛出错误。

有没有测试专家可以让我直截了当。

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T12:04:58.770

您需要通过接口抽象所有类，然后才能模拟任何东西，是的，您可以深入模拟 N 级。

顺便说一句，你是以某种方式`unitOfWork`注入到`DataStructure`类中还是在类中显式地实例化它？为了能够模拟它，您需要将其注入，通常这是经验法则 - 注入依赖项而不是在类中实例化它。**

# c# - 异步日志方法

> ID：11468666
> 
> 赞同：-3
> 
> 时间：2012-07-13T10:27:02.800
> 
> 标签：c#, silverlight, async-await

我想创建一个自定义记录器，它可以在 Silverlight 客户端和 WCF 服务中使用。

我们在 VS2012RC 中使用 ASync 框架。

我正在努力创建一个主要**是 void**的方法，但必须返回一个 Task。

```
public Task Log(string message, LogCategory logCategory, LogType logType)
{

} 
```

在此空白内，将执行日志记录代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T11:40:13.370

```
public async Task LogASync(string message, LogCategory logCategory, LogType logType) 
```

作品

# javascript - 使用 & 的表达式的意外结果

> ID：11468667
> 
> 赞同：1
> 
> 时间：2012-07-13T10:27:06.853
> 
> 标签：javascript

这里如果

```
document.write(eval("(2 == 2)")); 
```

它打印**正确**

和

```
document.write(eval("(2 == 2)&(5<10)")); 
```

它打印**1**
为什么它不总是返回 true 或 false。如果字符串中的条件增加，它会给出 0 或 1。获得相同类型结果的方法是什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T10:28:13.730

因为`&`不是逻辑运算符，所以它是[*按位*（数字）运算符](http://ecma-international.org/ecma-262/5.1/#sec-11.10)。您可能是指`&&`逻辑[AND 运算符](http://ecma-international.org/ecma-262/5.1/#sec-11.11)。

请注意，没有理由`eval`在您的代码示例中使用。（几乎*没有*任何理由使用`eval`，几乎总是有更好的替代方案 - 在这种情况下，您甚至不需要替代方案。）删除它会得到完全相同的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T10:28:32.757

`&`是位运算符并返回一个数字。尝试`"(2 == 2)&&(5<10)"`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T10:28:34.653

它打印`1`是因为您使用了按位与运算符 ( `&`) 而不是逻辑与运算符 ( `&&`)。

由于 JavaScript 是松散类型的，它会将布尔值`true`视为 int 值`1`，您可以通过调用来检查

```
document.write(eval("(2 == 2)+(5<10)")); 
```

结果将是

```
2 
```

# nhibernate - NHibernate 在插入后仍然会更新

> ID：11468668
> 
> 赞同：11
> 
> 时间：2012-07-13T10:27:11.803
> 
> 标签：nhibernate, fluent-nhibernate, mapping

我有一个非常简单的单向映射。见下文：

```
 public ContactMap()
    {
        Id(x => x.Id).GeneratedBy.Assigned();
        Map(x => x.Name);
        References(x => x.Device);
        HasMany(x => x.Numbers)
            .Not.Inverse()
            .Not.KeyNullable()
            .Cascade.AllDeleteOrphan()
            .Not.LazyLoad()
            .Fetch.Subselect();
        Table("Contacts");
    }

    public PhoneNumberMap()
    {
        Id(x => x.Id).GeneratedBy.Native();
        Map(x => x.Number);
        Table("ContactNumbers");
    } 
```

根据nhibernate 3及更高版本之后的这篇[文章](https://stackoverflow.com/a/7601312/379079)，将键设置为不可为空应该可以解决插入更新问题（当NHibernate发出插入外键设置为null然后更新以将外键更新为正确值时的问题） ，但对我来说不是这样。当我将键设置为不可为空时，NHibernate 会发出正确的插入语句

```
INSERT INTO ContactNumbers
            (Number,
             ContactId)
VALUES      ('(212) 121-212' /* @p0 */,
             10 /* @p1 */); 
```

如您所见，它插入了 ContactId 字段，但之后仍然发出更新语句

```
UPDATE ContactNumbers
SET    ContactId = 10 /* @p0 */
WHERE  Id = 34 /* @p1 */ 
```

所以要澄清问题。NHibernate 插入具有正确分配外键的联系人行，然后发出更新语句来更新冗余的外键（ContactId）。

我怎样才能摆脱这个多余的更新语句？谢谢。

顺便说一句，我正在使用最新版本的 NHibernate 和 Fluent NHibernate。数据库是 SQLite

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-20T08:55:10.637

您必须设置`"updatable"=false`您的密钥以防止更新。

```
public ContactMap()
{
    Id(x => x.Id).GeneratedBy.Assigned();
    Map(x => x.Name);
    References(x => x.Device);
    HasMany(x => x.Numbers)
        .Not.Inverse()
        .Not.KeyNullable()
        .Not.KeyUpdate() // HERE IT IS
        .Cascade.AllDeleteOrphan()
        .Not.LazyLoad()
        .Fetch.Subselect();
    Table("Contacts");
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-13T11:54:49.757

> 你不能从 3.2.0 BETA 开始。

在 v3.2.0 BETA 中，对一对多的改进将这种异常引入了单向一对多关系（实际上我不确定异常是否是你所说的）。

在 3.2 之前，您需要设置外键以允许空值才能使这种类型的关系起作用。因此，我会忽略发生这种情况的事实，并顺其自然。否则，您需要将其更改为完全双向的关系。

> *   [NH-941] - 一对多需要可空外键

[发行说明](https://github.com/nhibernate/nhibernate-core/blob/master/releasenotes.txt)或[JIRA 问题](https://nhibernate.jira.com/browse/NH-941)

**编辑**您指向的帖子的答案也是修复`save null-save-update`而不是修复附加更新

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-13T11:54:34.097

我不知道你是否真的可以摆脱它。

尝试使用另一个 id 生成器作为本机。它强制 NH 插入记录只是为了获取 id。id 用于会话中的每个实体，因此它不能在以后进行插入。它可能会导致后续更新。使用 hi-lo 或类似的东西。

**编辑**

在这种情况下，您为什么不使用组件？如果电话号码仅包含一个号码，则无需单独映射电话号码。像这样的东西（我不是 FNH 用户，所以可能是错误的）：

```
 public ContactMap()
 {
    Id(x => x.Id).GeneratedBy.Assigned();
    Map(x => x.Name);
    References(x => x.Device);
    HasMany(x => x.Numbers)
        .Not.Inverse()
        .Not.KeyNullable()
        .Cascade.AllDeleteOrphan()
        .Not.LazyLoad()
        .Fetch.Subselect()
        .Component(c =>
        {
          Map(x => x.Number);
        })
        .Table("ContactNumbers");
    Table("Contacts");
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-13T13:13:22.413

尝试在映射上设置为并在代码中分配关系`inverse`。`true`

`Inverse`表示孩子负责持有父母的ID。

例如

```
var contact = new Contact();
var phoneNumber = new PhoneNumber();
phoneNumber.Contact = contact; 
```

这样，当您插入 PhoneNumber 记录时，NH 可以插入 ContactId 而无需单独更新。

这就是我以前在 NH 2 中所做的事情，我认为这种行为在 3 中仍然有效。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-17T12:49:43.877

这是特雷弗·皮利所说的。使用`inverse="true"`. 如果您选择不拥有`inverse="true"`，这就是该选择的结果。你不能两全其美。

# loops - 循环多个 div 函数

> ID：11468669
> 
> 赞同：0
> 
> 时间：2012-07-13T10:27:13.783
> 
> 标签：loops, html

我正在尝试制作一个包含多个 div 的 html 页面，当单击某些链接时将显示这些 div。这是一个例子

主页：第 1 页，第 2 页

当我单击第 1 页时，它转到.. 第 1 页：

第 3 页，首页

当我点击主页时，它转到..主页：

第 1 页，第 2 页

但是，当我然后单击第 1 页或第 2 页时，什么也没有发生，它保持在同一个 div 上。是否有一个脚本不仅可以在点击时显示不同的 div，而且可以让循环永远持续下去？

谢谢。

下面的代码

```
var $prehashval = "";
function loop()
{
if (location.hash.slice(1)!=$prehashval)
    hashChanged();

$prehashval = location.hash.slice(1);
setTimeout("loop()");
}
function hashChanged()
{
var $output;
switch (location.hash.slice(1))

 {
     default:
        $output = location.hash.slice(1);
}
}
 loop(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T10:32:51.530

Javascript + HTML5？您可以使用“隐藏”属性来隐藏/显示标签。看看这里：[HTML5 全局属性](http://www.w3schools.com/html5/html5_ref_globalattributes.asp)

或者使用带有隐藏/显示功能甚至隐藏属性的 JQuery。

# android - 重新安装具有相同数字签名的应用程序无法访问用户数据

> ID：11468671
> 
> 赞同：0
> 
> 时间：2012-07-13T10:27:16.953
> 
> 标签：android, android-intent, google-play

我有一个应用程序使用此处描述的签名过程进行签名[http://developer.android.com/tools/publishing/app-signing.html](http://developer.android.com/tools/publishing/app-signing.html)。此应用程序将其数据存储在文件夹 /data/data/mystorage/ 中。在我安装了使用相同密钥签名的应用程序的新版本后，新版本无法访问文件夹 /data/data/mystorage。我在这里想念什么？据我所知，使用相同证书签名的应用程序应该提供相同的应用程序 ID，因此可以访问用户以前存储的数据。如何确保应用程序即使在重新安装后也可以访问数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T10:47:56.477

确保两个应用在清单中具有相同的共享用户 ID：

```
android:sharedUserId="com.your.app" 
```

# linq - 初学者到 linq 到实体 sql：我如何编写这个 linq 到实体查询

> ID：11468677
> 
> 赞同：1
> 
> 时间：2012-07-13T10:27:35.173
> 
> 标签：linq, entity-framework, linq-to-entities

```
@Parameter = (some_value)
select * from C1
where C1.number = 
(select number from C2
where id = @Parameter) 
```

指向学习 linq to entity 概念的良好资源的指针也将有所帮助。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T10:31:30.907

您可以使用以下格式：

```
var p = parameter;

from c in C1
where C.number == ( from x in C2
                   where x.id == p
                   select x).FirstOrDefault()
select c; 
```

[这](http://msdn.microsoft.com/en-us/library/bb399367.aspx)是带有 Linq To 实体示例的官方 MSDN 文档。

# c# - C# ADO.NET 确定新的自动增量主键的值？

> ID：11468691
> 
> 赞同：0
> 
> 时间：2012-07-13T10:28:25.080
> 
> 标签：c#, .net, ado.net, auto-increment

我现在只是在设计一个 Web 服务，所以我没有实际的代码，但这可能会影响数据库和应用程序的设计。

我计划有一个数据库表（在 SQL Server 中），它将有一个 bigint 类型的主键，它是自动递增的。现在我假设在 ADO.NET 中我不会在向表中添加新记录时设置此字段。我需要知道的是我如何知道刚刚添加的 ID 是什么。当然，然后我可以在该字段上执行选择 MAX，但 ADO.NET 实际上是否返回新 ID 的值，从而节省了我的开销？

例如，如果我有一些这样的代码：

```
using (MyEntities context = new MyEntities())
{
    context.Table1.AddObject(new Table1()
    {
        StringColumn1 = "some value",
        StringColumn2 = "some value"
    });

    context.SaveChanges();
} 
```

如果 Table1 中有一个名为 ID 的自动增量 PK，我如何知道刚刚添加的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T10:33:20.920

使用 Entity Framework，这一切都会自动为您完成：

```
using (MyEntities context = new MyEntities())
{
    var myNewObject = new Table1()
    {
        StringColumn1 = "some value",
        StringColumn2 = "some value"
    });

    context.Table1.AddObject(myNewObject);

    context.SaveChanges();

    // get the new ID
    var newID = myNewObject.ID;
} 
```

在实体框架中保存将自动更新“自动增量”`ID`列，您只需在调用`.SaveChanges()`...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T10:34:56.070

如果没记错的话，我是通过这种方式实现的，因为 EF 为您获取了 ID

```
using (MyEntities context = new MyEntities())
{
var table1 =  new Table1()
{
      StringColumn1 = "some value",
      StringColumn2 = "some value"
};

    context.Table1.AddObject(table1);

    context.SaveChanges();

int id = table1.Id;
} 
```

# ios4 - 升级到 ARC 后的委托指针问题

> ID：11468700
> 
> 赞同：0
> 
> 时间：2012-07-13T10:28:38.473
> 
> 标签：ios4, delegates, automatic-ref-counting, memory-management, unsafe-unretained

我刚刚将我的应用程序升级到 ARC，但我在处理带委托的类时遇到了问题。因为我的目标是 iOS 4.0 及更高版本，所以我使用`__unsafe_unretained`并`@property (unsafe_unretained)`存储委托指针。

但是，我现在发现的是，我在视图控制器中创建的服务（包括委托）在我删除该视图控制器后现在仍然存在，这导致在它之后尝试与视图控制器（委托）进行通信已被释放...因此在启用 Zombies 时出现错误。

如何在视图控制器或服务中更新我的代码，以便当视图控制器被删除（从导航控制器堆栈中弹出）时，带有委托指针的服务也会从内存中删除？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T12:58:38.107

事实证明，做错事的不是我……

有问题的 NSZombie 原来是由于`MKMapViewDelegate`，它在它所属的 View Controller 被释放后不断发送“mapView:didUpdateUserLocation:”。我知道。

我通过拦截 View Controller 中的 Back 按钮来解决它，并在弹出之前将委托设置为 nil：

```
- (void)backButtonTapped
{
    self.mapView.delegate = nil;
    [self.navigationController popViewControllerAnimated:YES];
} 
```

我不知道为什么 MapKit 在解除分配后会保留委托。如果有人知道我会很感激了解更多。

# vba - 无法设置 PivotItem 类 (VBA) 的 Visible 属性

> ID：11468705
> 
> 赞同：4
> 
> 时间：2012-07-13T10:28:50.470
> 
> 标签：vba, excel, pivot-table

我正在尝试通过 VBA 操作 Excel 2007 数据透视表，这样我就可以遍历数据透视表的类别，将所有内容设置为不可见，但将工作表另存为 pdf 并继续下一个类别。为此，我使用以下代码。

```
Dim pf As PivotField
Set pf = ActiveSheet.PivotTables("PivotTable1").PivotFields("NAME")

Dim pi as PivotItem
For Each pi In pf.PivotItems

    If pi.Visible = False Then
        pi.Visible = True 'Error here
    End If

    Dim pi2 As PivotItem
    For Each pi2 In pf.PivotItems
        If pi2 <> pi Then
            pi2.Visible = False
        End If
    Next pi2

    'Saving to PDF goes here
Next pi 
```

循环似乎是第一次工作。每个类别都会被取消选择，但第一个类别会输出一个不错的 PDF 文件。下次它进入循环时，它会在指示的行出现“无法设置 PivotItem 类的 Visible 属性”错误。我知道在数据透视表中必须至少选择一个项目，但这不是问题，因为我试图将可见性设置为 TRUE 而不是 FALSE。

我尝试通过检查它来修复它，因为也许您不允许将已经可见的 PivotItem 设置为可见，但这似乎不起作用。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-07-11T14:11:31.333

这是由于 Pivot 表使用缓存的数据透视项目而不是当前数据。确保桌子没有保留任何旧物品。为此，请右键单击您的数据透视表，单击“数据”选项卡并将“每个字段保留的项目数”设置为“无”。在 VBA 中执行此操作的代码是：

```
Dim pt As PivotTable

pt.PivotCache.MissingItemsLimit = xlMissingItemsNone 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-09T15:07:36.810

我意识到这是旧的，但想为那些在未来寻找解决方案的人做出贡献。

我遇到了同样的错误，我想出的解决方案是在开始您的 pivotitem 循环之前刷新数据透视表。

尝试以下代码行：

```
ActiveSheet.PivotTables("PivotTable1").RefreshTable 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-09-04T11:16:40.897

如果没有其他可见的 PivotItem，则不能使 PivotItem 不可见。

即你不能隐藏最后一个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T16:49:23.643

检查 PivotItem 的方向。如果方向为 xlHidden，我相信您无法将 Visible 设置为 True。如果是这样，那么只需先将方向更改为其他内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-19T13:13:56.120

可能存在以下情况之一：

*   您至少需要一个可见的 PivotItem 并且您将它们全部设置为不可见
*   PivotField 的方向 == XlPivotFieldOrientation.xlHidden (0)
*   PivotField 的 AutoSortOrder ！= Constants.xlManual (-4135)

您可以在下面找到 C# 中用于通过特定透视项过滤透视字段的帮助函数示例：

```
public static void FilterPivotItems(PivotField pf, List<string> pivotItemNames)
{
    PivotItems pis = pf.ChildItems;

    // Orientation != XlPivotFieldOrientation.xlHidden and we need to filter by at least one value (as Excel implies)
    if (pf.Orientation != 0 && pivotItemNames.Count > 0)
    {
        int oldAutoSortOrder = 0;

        if (pf.AutoSortOrder != (int)Constants.xlManual)
        {
            oldAutoSortOrder = pf.AutoSortOrder;
            pf.AutoSort((int)Constants.xlManual, pf.Name);
        }

        int pivotItemsCount = pf.PivotItems().Count;
        List<int> pivotItemsToHide = new List<int>();

        for (int i = 1; i <= pivotItemsCount; i++)
        {
            PivotItem pi = pf.PivotItems(i);

            // check if current pivot item needs to be hidden (if it exists in pivotItemNames)
            var match = pivotItemNames.FirstOrDefault(stringToCheck => stringToCheck.Equals(pi.Value));

            if (match == null)
            {
                // hide these pivot items later because we can hit exception "Unable to set the Visible property of the PivotItem class"
                // (this happens because all pivot items get hidden and we need to have at least one visible)
                pivotItemsToHide.Add(i);
            }
            else
            {
                TryFilterPivotItems(pi, true, true);
            }
        }

        for (int i = 0; i < pivotItemsToHide.Count; i++)
        {
            PivotItem pi = pf.PivotItems(pivotItemsToHide[i]);
            TryFilterPivotItems(pi, false, true);
        }

        if (oldAutoSortOrder != 0)
        {
            pf.AutoSort(oldAutoSortOrder, pf.Name);
        }

        PivotTable pt = pf.Parent as PivotTable;
        if (pt != null)
        {
            pt.Update();
        }
    }
}

public static void TryFilterPivotItems(PivotItem currentPI, bool filterValue, bool deferLayoutUpdate = false)
{
    try
    {
        PivotField pf = currentPI.Parent;
        PivotTable pt = pf.Parent as PivotTable;

        if (currentPI.Visible != filterValue)
        {
            if (deferLayoutUpdate == true && pt != null)
            {
                // just keep these three lines stick together, no if, no nothing (otherwise ManualUpdate will reset back to false)
                pt.ManualUpdate = true;
                currentPI.Visible = filterValue;

                // this may be redundant since setting Visible property of pivot item, resets ManualUpdate to false
                pt.ManualUpdate = false;
            }
            else
            {
                currentPI.Visible = filterValue;
            }
        }
    }
    catch (Exception ex)
    {

    }
}

public static void TryFilterPivotItems(PivotField pf, string itemValue, bool filterValue, bool deferLayoutUpdate = false)
{
    try
    {
        PivotItem currentPI = pf.PivotItems(itemValue);
        TryFilterPivotItems(currentPI, filterValue, deferLayoutUpdate);
    }
    catch (Exception ex)
    {

    }
} 
```

# google-app-engine - 如何在谷歌应用引擎中创建受密码保护的网页

> ID：11468706
> 
> 赞同：0
> 
> 时间：2012-07-13T10:28:51.000
> 
> 标签：google-app-engine, .htaccess, jsp, servlets

我正在谷歌应用引擎中使用 jsp-servlet 开发一个网站。我想保护访问我网站的所有用户的某些网页。那么有什么方法可以密码保护我的网页。我知道这很容易通过 apache 中的 htaccess 完成。htaccess 可以在谷歌应用引擎中工作吗？如果是，请说明流程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T11:41:57.893

您可以利用[App Engine 用户 API](https://developers.google.com/appengine/docs/java/users/overview)。这允许用户使用他们的 Google 帐户登录到您的应用程序。如果您想控制谁可以进入您的应用程序的哪些部分，您可以在他们向您的 servlet 发出请求时将登录用户的 ID 与您的数据存储中允许的用户列表进行比较。

**编辑：**
您不会找到与使用`.htaccess`文件完全相同的方法——这不是 App Engine 的工作方式。您的 servlet 中有负责呈现页面的代码。在此代码中，您需要添加检查以查看用户是否具有访问权限，但仅限于您要检查的页面。

这是一个代码示例，我希望它可以澄清一些事情。这是我发送给您的链接中代码的略微修改版本。

```
public class MySecretServlet extends HttpServlet {
    public void doGet(HttpServletRequest req, HttpServletResponse resp)
            throws IOException {
        UserService userService = UserServiceFactory.getUserService();
        resp.setContentType("text/html");

        if (req.getPathInfo().equals("/secret_page") {
            if (req.getUserPrincipal() != null && 
                req.getUserPrincipal().getUserId().equals("admin-id")) {
                // render your protected page here
            } else {
                resp.getWriter().println("<p>Please <a href=\"" +
                                         userService.createLoginURL(thisURL) +
                                         "\">sign in</a>.</p>");
            }
        } else {
            // render your unprotected content here
        }
    }
} 
```

或者，您可以使用`web.xml`文件中的安全约束功能。[您可以在此处找到这些文档](https://developers.google.com/appengine/docs/java/config/webxml#Security_and_Authentication)。但是，这不太灵活，因为您只能在“所有人”和“仅限管理员”之间更改访问权限。

# mainframe - 使用 JCL 将多个输入文件中的数字添加到 1 个文件中

> ID：11468707
> 
> 赞同：0
> 
> 时间：2012-07-13T10:28:57.193
> 
> 标签：mainframe, jcl

我有 n 个具有特定计数的文件。我现在想将所有这些计数值添加到另一个文件中。

它会像

```
//SORTIN   DD file1
//         DD file2
              .
           DD filen
//SORTOUT  DD output file 
```

需要一种方法来仅使用 JCL 来做同样的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T12:25:35.873

关于您的“仅使用 JCL”要求，请阅读[此](https://stackoverflow.com/questions/11076078/jcl-get-count-of-non-space-chars-in-a-given-area-mainframe/11076336#11076336)内容。

如果您的文件是 GDG，那么在您的 SORTIN 中只需指定 GDG 基本名称而不指定代号。系统会自动为您连接您的文件。

# php - 使用标签 xmlns:soapenv 时将字符串转换为数组

> ID：11468715
> 
> 赞同：0
> 
> 时间：2012-07-13T10:29:23.683
> 
> 标签：php, soap

我有以下字符串：

```
$string='<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"  xmlns:bac="http://backupbank.com/">      <soapenv:Header/>    <soapenv:Body>
           <bac:CreateUser>
            <bac:request>
            <!--Optional:-->
            <bac:username>anandneema</bac:username>
            <bac:product>Workstation</bac:product>
            <bac:credentials>
               <bac:server>serveripaddress</bac:server>
               <bac:user>username</bac:user>
               <bac:password>password</bac:password>
            </bac:credentials>
         </bac:request>
      </bac:CreateUser>    </soapenv:Body> </soapenv:Envelope>';

$xmldata=simplexml_load_string($string);

echo "<pre>"; print_r($xmldata); 
```

它不解析数据。

但是当我使用：

```
 $string='<soapenv:Envelope>    <soapenv:Header/>    <soapenv:Body>
      <bac:CreateUser>
         <bac:request>
            <!--Optional:-->
            <bac:username>anandneema</bac:username>
            <bac:product>Workstation</bac:product>
            <bac:credentials>
               <bac:server>serveripaddress</bac:server>
               <bac:user>username</bac:user>
               <bac:password>password</bac:password>
            </bac:credentials>
         </bac:request>
      </bac:CreateUser>    </soapenv:Body> </soapenv:Envelope>';

$xmldata=simplexml_load_string($string); echo "<pre>"; print_r($xmldata); 
```

实际上，当我删除属性时：`xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"` `xmlns:bac="http://backupbank.com/"`

然后解析数据

任何人都可以向我建议可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T11:17:57.600

对此没有太多想法，但尝试通过将 xml 正确格式化为字符串来调用服务，然后使用 CURL 可能类似于这个问题

[在 PHP 中处理 Web 服务错误](https://stackoverflow.com/questions/7172109/handling-web-service-errors-within-php)

# android - 用户评论不会显示在 Google Play 上

> ID：11468716
> 
> 赞同：9
> 
> 时间：2012-07-13T10:29:27.460
> 
> 标签：android, google-play

几天前，我在 Google Play 上发布了一个应用程序。当我登录 Google Play 开发者控制台时，我可以看到用户对我的应用的评论。但是，当我在 Google Play 上访问我的应用程序网站时，这些评论是不可见的。

有谁知道我怎样才能让这些评论在我的应用程序网站上显示在 Google Play 上？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-16T12:18:25.597

此时您不需要使用代理。

您可以简单地添加到在[ISO 639-1](http://en.wikipedia.org/wiki/List_of_ISO_639-1_codes "list of ISO 639-1 language codes")`&hl=en`中`en`定义的两字母语言代码的URL

例如：

*   [https://play.google.com/store/apps/details?id=com.adobe.reader&hl=en](https://play.google.com/store/apps/details?id=com.adobe.reader&hl=en) （英文）
*   [https://play.google.com/store/apps/details?id=com.adobe.reader&hl=pl](https://play.google.com/store/apps/details?id=com.adobe.reader&hl=pl) （波兰语）
*   [https://play.google.com/store/apps/details?id=com.adobe.reader&hl=it](https://play.google.com/store/apps/details?id=com.adobe.reader&hl=it) （意大利语）
*   [https://play.google.com/store/apps/details?id=com.adobe.reader&hl=fr](https://play.google.com/store/apps/details?id=com.adobe.reader&hl=fr) （法语）
*   [https://play.google.com/store/apps/details?id=com.adobe.reader&hl=es](https://play.google.com/store/apps/details?id=com.adobe.reader&hl=es) （西班牙语）

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-13T10:34:54.153

针对不同国家/地区分别在 Google Play 商店中发表评论。可能这就是你看不到它的原因。尝试使用代理。您无法更改此行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-11-19T17:50:08.227

如果您的语言适合应用程序语言，Google play 会显示评论。要显示评论，请将 &hl= apps_language like (ru 或 en) 添加到 url 的末尾。

# google-apps-script - 如何使用 Google Apps 脚本将 Google 小工具嵌入到 Google 站点中

> ID：11468718
> 
> 赞同：0
> 
> 时间：2012-07-13T10:29:43.310
> 
> 标签：google-apps-script

您好我想通过sites.CreateWebPage() 函数将Google Gadget 添加到页面中。我尝试通过将小工具的代码粘贴到函数的 html 部分来执行此操作，但这似乎不起作用。

这是我的代码：

```
 var aboutSection = '<div><img src="https://www.google.com/chart?chc=sites&amp;cht=d&amp;chdp=sites&amp;chl=%5B%5BGoogle+Apps+Script'%3D20'f%5Cv'a%5C%3D0'10'%3D499'0'dim'%5Cbox1'b%5CF6F6F6'fC%5CF6F6F6'eC%5C0'sk'%5C%5B%22Google+Script+Gadget%22'%5D'a%5CV%5C%3D12'f%5C%5DV%5Cta%5C%3D10'%3D0'%3D500'%3D297'dim'%5C%3D10'%3D10'%3D500'%3D297'vdim'%5Cbox1'b%5Cva%5CF6F6F6'fC%5CC8C8C8'eC%5C'a%5C%5Do%5CLauto'f%5C&amp;sig=6fhWXmnlPoRsJXpVKNfumRBLsmo" style="display: block; text-align: left; " data-props="align:left;showBorder:true;showBorderTitle:true;borderTitle:Google Script Gadget;height:200;objectTitle:About;libId:Mf2G3RE0TBWexGMtAO6CROH-2sYrtNBN4;restrictionMyself:false;restrictionDomain:false;restrictionAnyone:true;allowAnonymous:false" id="7206614969763905" data-type="maestro" class="sites-placeholder-maestro" data-origsrc="https://sites.google.com/a/macros/eyethu.org/exec?service=AKfycbzpyOcUFaYweehTWPn9XwERTfAOPXoBeua2RZ8NVg" width="500" height="300"></div> <div></div>';
  site.createWebPage(name + ' ' + surname, name + '_' + surname, aboutSection); 
```

我知道 (') 引号会导致问题，但我将它们全部替换为 ('') 并且它仍然无法正常工作。它只显示框架和丢失的图像图标。

在此先感谢您的帮助。

这是我在你的建议后所做的：

```
var templ = HtmlService.createTemplateFromFile('profile').evaluate();
var tem = templ.getContent();
site.createWebPage(name + ' ' + surname, name + '_' + surname, tem); 
```

我通过编辑网站、复制 html 并将其粘贴到 html 文件中获得了代码。它可以工作，但它将小工具显示为编辑页面中的图像。我显然做错了模板创建是否有另一种生成模板的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T11:49:08.433

在 Apps Scripts 中处理带有小工具和其他应用程序脚本的站点页面的最佳方法是手动创建一个“模板”页面并在您的脚本代码中复制它。

1.  手动创建一个 Google 协作平台页面并添加您需要的小工具（例如 page1），
2.  使用与此类似的代码

    var page1 = SitesApp.getPageByUrl('url_of_page1');

    var html = page1.getHtmlContent();

    var site = SitesApp.getSite(url);

    site.createWebPage(title,name,html);

# php - 在网页上获取 POST 答案的 cUrl 替代方案

> ID：11468720
> 
> 赞同：2
> 
> 时间：2012-07-13T10:29:45.383
> 
> 标签：php, javascript, html, curl

我想获取特定表单提交的结果网页。此表单使用 POST，因此我当前的目标是能够将 POST 数据发送到 url，并在变量中获取结果的 HTML 内容。

我的问题是我不能使用 cUrl（未启用），这就是为什么我要求您了解其他解决方案是否可行。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T10:31:33.710

看到这个，使用 fsockopen： [http ://www.jonasjohn.de/snippets/php/post-request.htm](http://www.jonasjohn.de/snippets/php/post-request.htm)

Fsockopen 在 php 标准库中，所以所有 php 版本 4 都有它:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T11:03:00.517

尝试 file_get_contents() 和流

```
$opts = array(  'http'=>array('method'=>"POST", 'content' => http_build_query(array('status' => $message)),));

$context = stream_context_create($opts);

// Open the file using the HTTP headers set above
$file = file_get_contents('http://www.example.com/', false, $context); 
```

# java - 如何使用 SSLEngine 在 x509 SSL/TLS 握手后验证服务器（对等）名称？

> ID：11468722
> 
> 赞同：0
> 
> 时间：2012-07-13T10:29:47.607
> 
> 标签：java, jsse, sslengine

我正在使用`SSLEngine`with`NIO`进行非阻塞 TLS 通信。

该引擎工作正常，并且能够验证 CA 信任、服务器证书的有效期。

但我缺少的是证书主题名称与我连接的服务器名称匹配的验证。

[考虑到主题替代名称](http://www.ietf.org/rfc/rfc4985.txt)等所有 SSL 扩展，实现它的最佳方法是什么？

我尝试简单地检查主题名称，但即使使用 ，它也不起作用`google.nl`，证书中的主题是`google.com`，并且`google.nl`只能在替代名称扩展中找到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T12:34:45.777

又要回答我自己的问题了……

到目前为止，我能够做到这一点。它仅限于 Sun JSSE 实现。不确定这是否是一个完整的解决方案。

```
void checkServerName(String serverName, SSLSession session) throws IOException {
    String name;
    boolean matches = false;
    X509CertImpl cert = (X509CertImpl)session.getPeerCertificates()[0];
    SubjectAlternativeNameExtension altNames = cert.getSubjectAlternativeNameExtension();
    if (altNames != null) {
        GeneralNames names = (GeneralNames) altNames.get(SubjectAlternativeNameExtension.SUBJECT_NAME);
        for (GeneralName genName : names.names()) {
            switch (genName.getType()) {
                case GeneralNameInterface.NAME_DNS:
                    name = ((DNSName)genName.getName()).getName();
                    break;
                case GeneralNameInterface.NAME_IP:
                    name = ((IPAddressName)genName.getName()).getName();
                    break;
                case GeneralNameInterface.NAME_RFC822:
                    name = ((RFC822Name)genName.getName()).getName();
                    break;
                case GeneralNameInterface.NAME_ANY:
                    DerValue derValue = new DerValue(((OtherName)genName.getName()).getNameValue()); 
                    name = derValue.getData().getUTF8String();
                    break;
                default:
                    continue;
            }
            if (name.startsWith("*"))
                matches |= serverName.endsWith(name.substring(1).toLowerCase());
            else
                matches |= serverName.equals(name.toLowerCase());
            if (matches)
                break;
        }
    }
    name = ((X500Name)cert.getSubjectDN()).getCommonName();
    if (!matches)
        matches = serverName.equals(name.toLowerCase());
    if (!matches)
        throw new SSLPeerUnverifiedException("server name mismatch, certificate issued to: " + name);
} 
```

# css - 在 iPad 上具有绝对位置的 CSS 中心元素

> ID：11468726
> 
> 赞同：1
> 
> 时间：2012-07-13T10:30:00.850
> 
> 标签：css, ipad, center, absolute

好的，所以我在将元素居中时遇到了问题。我有一个 2300px 宽的 div：

HTML

```
<div id="myDiv"></div> 
```

CSS

```
#myDiv { position: absolute; top: 0; left: 50%; margin: 0 0 0 -1150px;} 
```

这在除 iPad Safari 之外的所有浏览器中都非常有效。有谁知道如何解决这个问题？

问候，大卫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T10:34:35.137

div 是否需要绝对定位？

如果没有，您可以使用`margin: 0 auto;`

另外，尝试定义宽度。

# php - 站点地图上的 Joomla Xmap 内爆错误

> ID：11468727
> 
> 赞同：0
> 
> 时间：2012-07-13T10:30:03.950
> 
> 标签：php, joomla, implode, invalid-argument

我在 Joomla v2.5 上使用的“xmap”站点地图插件和我的一个站点上的 K2 cck 上出现以下错误，如下所示：

**警告：implode() [function.implode]：第 192 行 /home/anctest/public_html/plugins/xmap/com_k2/com_k2.php 中传递的参数无效**

它指向以下代码中的以下行：

```
$query = $baseQuery."catid in (".implode(",", $ids).") order by 1 DESC "; 
```

代码在这里：

```
 case "categories":
            if (!self::$suppressSub)
            {
                $query = $baseQuery."catid in (".implode(",", $ids).") order by 1 DESC ";
                $db->setQuery($query);
                $rows = $db->loadObjectList ();
            }
            else 
            {
                $rows = array();
                if (is_array($ids))
                {
                    foreach($ids as $id)
                    {
                        $allrows = array();
                        xmap_com_k2::collectByCat($db, $id, $allrows);
                        $rows = array_merge($rows, $allrows);
                    }       
                }
            } 
```

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T11:11:36.003

在这种情况下， $ids 不是数组
`file_put_contents('log.txt',var_export($ids,true));`或`var_dump($ids)`
$ids 从菜单中的链接参数获取。也许没有为此链接选择类别。`var_dump($parent->link)`将显示所有链接，错误之前的链接将是问题链接。

# c - 这是一个正确的 pcap 过滤器表达式吗

> ID：11468729
> 
> 赞同：1
> 
> 时间：2012-07-13T10:30:14.527
> 
> 标签：c, pcap, libpcap, wifi

```
const char *str = "wlan subtype assoc-req or wlan subtype probe-req or wlan subtype probe-resp";
struct bpf_program fp;

if((pcap_compile(pkt_handle, &fp, str, 1, PCAP_NETMASK_UNKNOWN)==-1))
{
    pcap_perror(pkt_handle, "Compile");
}
else
    printf("filter compiled\n"); 
```

运行后，程序显示“过滤器已编译”，但除了过滤器表达式中提到的三个之外，它仍然捕获Beacon帧和许多其他帧。

那么，仅捕获 assoc-req、probe-req、probe-resp 帧是否是正确的过滤器表达式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T21:27:59.200

正如interjay所说，您必须调用`pcap_setfilter()`才能使过滤器生效。（使其成为答案，以便问题显示为*有*答案。）

# api - 谷歌播放搜索 api 或合作伙伴提要？

> ID：11468734
> 
> 赞同：5
> 
> 时间：2012-07-13T10:30:37.773
> 
> 标签：api

有谁知道google play有没有搜索api。我对搜索应用程序特别感兴趣。

iTunes 有一个很棒的搜索 API，还有一个包含所有信息的企业合作伙伴源。谷歌是否提供相同的服务？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T12:42:13.297

# [安卓市场 API](http://code.google.com/p/android-market-api/)

> **Android Market 的开源 API**
> 
> 这不是官方的 api。我不以任何方式隶属于谷歌。
> 
> 该库允许您直接向谷歌的官方 android 市场服务器询问信息，搜索应用程序，...

**注意：**
2012 年 3 月 6 日，Google 更名为 Android Market，Google Music 更名为“Play”。

# django - 合并来自不同模型的查询集

> ID：11468735
> 
> 赞同：0
> 
> 时间：2012-07-13T10:30:39.190
> 
> 标签：django, django-models, django-views

我在一个应用程序和 1 个视图中有 2 个模型。我目前从 1 个模型中提取信息非常好。但是我希望从同一个应用程序中提取另一个模型并将它们都输出到同一页面。

该页面的想法是它是一个新闻中心，因此它通过不同类型的新闻帖子（来自一个模型）和来自另一个模型的不同类型的帖子。

我对 Django 还很陌生，所以放轻松！:) 无论如何这里是代码：

//视图

```
def news_home(request):

    page_context = details(request, path="news-hub", only_context=True)

    recent_posts = NewsPost.objects.filter(live=True, case_study=False).order_by("-posted")[:5]

    recent_posts_pages = Paginator(recent_posts, 100)

    current_page = request.GET.get("page", 1)

    this_page = recent_posts_pages.page(current_page)

    notes = BriefingNote.objects.filter(live=True).order_by("-posted")

    news_categories = NewsCategory.objects.all()

    news_context = {
        "recent_posts": this_page.object_list,
        "news_categories": news_categories,
        "pages": recent_posts_pages,
        "note": notes,

    }

    context = dict(page_context)
    context.update(news_context)

    return render_to_response('news_hub_REDESIGN.html', context,  context_instance=RequestContext(request)) 
```

//模型1

```
class BriefingNote(models.Model):
    title = models.CharField(max_length=300)
    thumbnail = models.ImageField(upload_to='images/briefing_notes', blank=True)
    file = models.FileField(upload_to='files/briefing_notes')
    live = models.BooleanField(help_text="The post will only show on the frontend if the 'live' box is checked")
    categories = models.ManyToManyField("NewsCategory")

    # Dates
    posted = models.DateTimeField(auto_now_add=True)
    updated = models.DateTimeField(auto_now=True)

    def __unicode__(self):
        return u"%s" % self.title 
```

// 模型 2

```
class NewsPost(models.Model):
    title = models.CharField(max_length=400)
    slug = models.SlugField(help_text="This will form the URL of the post")

    summary = models.TextField(help_text="To be used on the listings pages. Any formatting here will be ignored on the listings page.")
    post = models.TextField(blank=True)
    #TO BE REMOVED????
    thumbnail = models.ImageField(help_text="To be displayed on listings pages", upload_to="images/news", blank=True)
    remove_thumbnail = models.BooleanField() 
```

我在前端输出内容，如下所示：

```
{% for post in recent_posts %}

                    <div class='news_first'>

                        <img class="news_thumb" src="/media/{% if post.article_type %}{{post.article_type.image}}{% endif %}{% if post.news_type %}{{post.news_type.image}}{% endif%}" alt="">
                        <h3><a href='{{post.get_absolute_url}}'>{% if post.article_type.title %}{{post.title}}{% endif %} <span>{{post.posted|date:"d/m/y"}}</span></a></h3>
                        <p class='news_summary'>
                            {% if post.thumbnail %}<a href='{{post.get_absolute_url}}'><img src='{% thumbnail post.thumbnail 120x100 crop upscale %}' alt='{{post.title}}' class='news_thumbnail'/></a>{% endif %}{{post.summary|striptags}} <a href='{{post.get_absolute_url}}'>Read full story &raquo;</a>
                        </p>
                        <div class='clearboth'></div>
                    </div>

            {% endfor %} 
```

我在想也许我可以在同一个 forloop 中输出它们，但是它们需要按 -posted 排序。所以我虽然这可能会把事情搞砸。

如果您需要更多信息，请告诉我。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T12:04:28.053

我现在已经解决了这个问题。

```
news_hub = list(chain(notes, recent_posts))

news_hub = sorted(
    chain(notes, recent_posts),
    key = attrgetter('posted'), reverse=True)[:10] 
```

# android - 使用 JavaScript 在平板设备上获取网页中心坐标

> ID：11468739
> 
> 赞同：10
> 
> 时间：2012-07-13T10:30:51.757
> 
> 标签：android, jquery, zooming, center

我正在尝试计算网页上的视口几何中心，使用平板电脑设备（iOS 和 Android）呈现，*即*根据当前**翻译**和当前**缩放级别**的视口的**实际中心（你看到的）** - 不想要文档本身的中心，我想要我正在查看的屏幕中心。

 ****问题是这个计算没有考虑任何类型的缩放（然后）平移。

在 iOS 上，我尝试了其中一些答案，在[检测捏合缩放 iOS 的问题上](https://stackoverflow.com/questions/8662714/detecting-pinch-to-zoom-on-ios)，我能够捕捉到事件“OnZoom”，但没有得到任何价值。

在 Android 上，我什至无法捕捉到任何与缩放相关的事件。我知道 touchmove 和 touchstart 事件，但是如何区分然后才能获得缩放（和缩放值）

我正在使用 jQuery 1.7.2 库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T23:41:11.093

我制作了一个[演示页面](http://magicrising.de/zoom/)，该页面已确认可在 iPhone iPad、三星 Galaxy Tab 10 上运行。我只在一个巨大的 div 上附加了点击事件，因此在缩放后点击屏幕以更新显示。

计算很简单，`screen.width/window.innerWidth`用来获取缩放级别。`screen.width`将始终以设备像素为单位，并且`window.innerWidth`始终以 css 像素为单位，这也考虑了缩放。

进一步的计算是简单的数学：

```
// round the result down to avoid "half pixels" for odd zoom levels
Math.floor(window.scrollY + window.innerHeight/2);
Math.floor(window.scrollX + window.innerWidth/2); 
```

要检查用户是否在缩放，请将侦听器附加到隐藏地址栏和缩放`window.resize`后将`window.scroll`触发的侦听器。`orientationchange`

这是我的演示 JavaScript：

```
var dot = document.getElementById("dot");
document.getElementById("main").addEventListener("click", function(e) {
    var zoom = screen.width / window.innerWidth;
    alert("zoom: " + zoom + "\n" + "ScrollY: " + window.scrollY);

    dot.style.top = Math.floor(window.scrollY + window.innerHeight/2 - 5) + "px";
    dot.style.left = Math.floor(window.scrollX + window.innerWidth/2 - 5) + "px";

}, false); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T02:24:36.480

几年前，我有一个客户请求在 javascript 中使用页面缩放检测方法。

就我而言，他希望它可以在 Facebook 应用程序上运行。通过 iframe 画布/视口。

我使用了 Max 和 Min 函数

```
function getDocHeight() {
    var D = document;
    return Math.max(
        Math.max(D.body.scrollHeight, D.documentElement.scrollHeight),
        Math.max(D.body.offsetHeight, D.documentElement.offsetHeight),
        Math.max(D.body.clientHeight, D.documentElement.clientHeight)
    );
}
function getDocWidth() {
    var D = document;
    return Math.max(
        Math.max(D.body.scrollWidth, D.documentElement.scrollWidth),
        Math.max(D.body.offsetWidth, D.documentElement.offsetWidth),
        Math.max(D.body.clientWidth, D.documentElement.clientWidth)
    );
}

function getMinHeight(h) {
return Math.min(viewport.currentHeight, getDocHeight(), h);
} 
```

getMinWidth 类似，但我必须对其应用基于浏览器的调整。

我创建了一个名为 viewport 的对象，它存储了固定位置 div 的属性，具体来说 currentHeight 和 currentWidth 是 div 元素的 offsetHeight 和 offsetWidth 。

我最终初始化了一个 window.intervalTimer 来检查该 div 的状态，并与视口对象中存储的值进行比较。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T03:24:31.980

设置一个简单的 HTML 页面，我可以非常接近中心。

使用下面的代码，我只是检查固定 div 的宽度和高度，然后将其与文档偏移量和一些简单的数学运算相结合以找出中心，并在那里放置一个黑点。我可以得到它非常接近，但它在我的 iPhone 4S 上有所不同。

没有在安卓设备上试过。

我认为这不适用于 iOS <= 4，因为它们不支持固定定位。

```
<style>
#fixed{
position: fixed;
left: 0; right: 0; top: 0; bottom: 0;
background: orange; opacity: 0.25;
}
.black{
  position: absolute;
  top:0;left:0;
  width: 1px; height: 1px;
  background: black;
}
</style>

<body>
<div id="fixed"></div>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
<script>
jQuery(function($){
setInterval(function(){
var top = ($("#fixed").height()/2) + $("#fixed").offset().top;
var left = ($("#fixed").width()/2) + $("#fixed").offset().left;
$("body").append('<div class="black" style="top: '+top+'px; left: '+left+'px;" />');
}, 1500)

});
</script>
</body> 
```****

# ruby-on-rails - 用户数据不保存到数据库中

> ID：11468741
> 
> 赞同：0
> 
> 时间：2012-07-13T10:30:52.967
> 
> 标签：ruby-on-rails, ruby, database, ruby-on-rails-3

我正在编写 ruby​​ on rails 代码。我正在使用 ajax 请求将数据从客户端发送到服务器。但问题是它不会将该数据保存到数据库中。由于我对 ruby​​ on rails 完全陌生，所以我不知道为什么它不起作用。我也没有收到任何错误

这是我的代码

```
class ContactsController < ApplicationController
def contacts
name = params["name"]
company = params["company"]
email = params["email"]
phone = params["phone"]

@contacts = Contact.new(params[:post])

if @contacts.save
  redirect_to root_path, :notice => "your post is saved"
else
  render "new"
end
end
end 
```

这是我的js代码

```
$('.signupbutton').click(function(e) {
        e.preventDefault();
        var data = $('#updatesBig').serialize();
        var url = 'contacts';
        console.log(data);
        $.ajax({
            type: 'POST',
            url: url,
            data: data,
            success: function(data) {
                console.log('done');
            }
        });
    }); 
```

这是我在控制台中的输出

```
Started POST "/contacts" for 127.0.0.1 at 2012-07-13 13:25:41 +0300
Processing by ContactsController#contacts as */*
  Parameters: {"name"=>"asdsa", "company"=>"asdsa", "email"=>"asdasd", "phone"=>"asdasd"}
   (0.1ms)  begin transaction
  SQL (18.1ms)  INSERT INTO "contacts" ("company", "created_at", "email", "group", "name",  "phone", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["company", nil], ["created_at", Fri, 13 Jul 2012 10:25:41 UTC +00:00], ["email", nil], ["group", nil], ["name", nil], ["phone",  nil], ["updated_at", Fri, 13 Jul 2012 10:25:41 UTC +00:00]]
   (3.9ms)  commit transaction
Redirected to http://0.0.0.0:3000/
Completed 302 Found in 33ms (ActiveRecord: 22.5ms) 
```

**更新**

这是我的html表单。我正在使用 haml 而不是计划 html.erb

```
%form#updatesBig{:target => 'contacts', :method => 'post'}
    %div
      %label{:for => 'form_updatesBig_name'} Name
      %input{:type => "text", :id => 'form_updatesBig_name', :name => 'name', :class => 'text name required'}
      %label{:for => 'form_updatesBig_company'} Organization
      %input{:type => "text", :id => 'form_updatesBig_company', :name => 'company', :class => 'text company required'}
    %div
      %label{:for => 'form_updatesBig_email'} E-mail
      %input{:type => "text", :id => 'form_updatesBig_email', :name => 'email', :class => 'text email required'}
      %label{:for => 'form_updatesBig_phone'} Phone
      %input{:type => "text", :id => 'form_updatesBig_phone', :name => 'phone', :class => 'text phone required'}
    %div
      %input.button.signupbutton{:type => 'submit', :value => 'Sign up'} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T10:49:04.570

看起来您的 HTML 输入名称和您的控制器没有一起工作。通常在 Rails 中，当您使用[内置的表单助手](http://guides.rubyonrails.org/form_helpers.html)时，所有字段名称都使用您的模型命名：

```
<input name="contact[name]"> 
```

这就是允许您`Contact.new(params[:contact])`在控制器中执行类似操作的原因。在您的情况下，由于您没有发布表单，因此我无法判断表单发生了什么，但我假设基于您如何访问控制器中的 params 变量，这就是问题所在。我建议使用表单助手，以便您的 HTML 遵循命名空间参数的预期约定。然后，您将能够将控制器更改为：

```
@contacts = Contact.new(params[:contact])

if @contacts.save
  redirect_to root_path, :notice => "your post is saved"
else
  render "new"
end 
```

需要注意的一件事是，盲目地使用参数实例化对象可能会导致安全漏洞。请务必阅读[有关批量分配的安全指南部分](http://guides.rubyonrails.org/security.html#mass-assignment)以更好地理解这一点。

# c# - 在 C# 中读取 PDF 文本图像

> ID：11468743
> 
> 赞同：0
> 
> 时间：2012-07-13T10:31:00.680
> 
> 标签：c#, .net, image, pdf, text

我需要阅读 pdf 文件并需要转换为 HTML。目前我正在使用 iTextsharp 阅读 PDF。是否有任何带有适当文档的 dll 来**读取 pdf 文件**。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T11:06:00.783

ITextSharp 相当不错，而且很容易实现。这是一个阅读 pdf 并将文本放入字符串的小示例，然后将其打印到 webforms 页面上的标签上：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using iTextSharp.text.pdf;
using iTextSharp.text.pdf.parser;

namespace pdfreadertest
{
    public partial class _Default : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            GetTextFromPDFFile(@"c:\example.pdf", 1);
        }

        public void GetTextFromPDFFile(string pdfFile, int pageNumber)
        {
            // Call the reader to read the pdf file
            PdfReader pdfReader = new PdfReader(pdfFile);

            // Extract the text from the pdf reader and put into a string
            string pdfText = PdfTextExtractor.GetTextFromPage(pdfReader, pageNumber);

            // Try and close the reader
            try
            {
                pdfReader.Close();
            }
            catch{ }

            // Put the string (pdf text) into a label to display on page
            this.lblPdfText.Text = pdfText;
        }
    }
} 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-13T10:51:29.500

我认为 iTextSharp 是最受欢迎的库之一，尽管还有其他几个库，如 iText.Net、PDF Sharp、Sharp PDF 等谷歌它，你会发现很多。我用过 iTextSharp，我喜欢它。

# php - 使用外部 PHP 处理器从表单中获取复选框值

> ID：11468745
> 
> 赞同：0
> 
> 时间：2012-07-13T10:31:11.913
> 
> 标签：php, forms, checkbox

我有一个将其数据发送到 process.php 文件以在该文件中处理的表单我有以下代码：

```
<?php
    $name = $_GET['name'];
    $number = $_GET['number'];
    $email = $_GET['email'];
    $comment = $_GET['message'];
    $sales = $_POST['sales'];
    $lettings = $_POST['lettings'];

    $to = "me@me.com";

    $subject = "New website registration";

    $message = "Name: ".$name."\r\n";
    if(isset($number) && $number!='')
        $message.= "Number: ".$number."\r\n";
    if(isset($email) && $email!='')
        $message.= "Email: ".$email."\r\n";
    if(isset($comment) && $comment!='')
        $message.= "Comment: ".$comment."\r\n";
    if(isset($sales))
    {
        $message.= "I am Interested in Sales" . "\r\n";
    }else{
        //
    }
    if(isset($lettings))
    {
        $message.= "I am Interested in Lettings";
    }else{
        //
    }

    $headers = "From: ".$name." <".$email.">";

    $result = mail($to,$subject,$message,$headers);

    return $result;
?> 
```

表单的 HTML 如下：

```
<form id="register_form" name="register" method="post" action="/content/contact/process.php">
    <input type="text" id="name" name="name" class="regform" onFocus="if(this.value=='Name'){this.value='';}" onBlur="if(this.value==''){this.value='Name';}" value="Name" />
    <input type="text" id="number" name="number" class="regform" onFocus="if(this.value=='Phone number'){this.value='';}" onBlur="if(this.value==''){this.value='Phone number';}" value="Phone number" />
    <input type="text" id="email" name="email" class="regform" onFocus="if(this.value=='Email address'){this.value='';}" onBlur="if(this.value==''){this.value='Email address';}" value="Email address" />
    <textarea id="message" name="message" class="regtext" onFocus="if(this.value=='Message'){this.value='';}" onBlur="if(this.value==''){this.value='Message';}">Message</textarea>
    <label for"sales">Sales<input type="checkbox" name="sales" value="1" /></label>
    <label for"sales">Lettings<input type="checkbox" name="lettings" value="1"/></label>
    <input id="submit" type="submit" value="Submit" class="regsender" />
    <div class="loading"></div>
</form> 
```

选中复选框后，电子邮件中不会出现预期的消息。我在这里错过了什么吗？我已经尝试了几种不同的方法来让它工作，但都没有。任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T10:34:49.770

您正在使用 method = POST 并使用 $_GET 检索值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T10:35:18.057

我已经更新了你的代码检查它

```
<?php
    if(isset($_POST['submit'])){
        $name = $_POST['name'];
        $number = $_POST['number'];
        $email = $_POST['email'];
        $comment = $_POST['message'];
        if (isset($_POST['sales'])) 
        {
            $sales = $_POST['sales'];
        }
        else if(isset($_POST['lettings']))
        {
            $lettings =$_POST['lettings'];
        }

        $to = "me@me.com";

        $subject = "New website registration";

        $message = "Name: ".$name."\r\n";
        if(isset($number) && $number!='')
            $message.= "Number: ".$number."\r\n";
        if(isset($email) && $email!='')
            $message.= "Email: ".$email."\r\n";
        if(isset($comment) && $comment!='')
            $message.= "Comment: ".$comment."\r\n";

        if(isset($_POST['sales']))
        {
            $message.= "I am Interested in Sales" . "\r\n";
        }
        else if(isset($_POST['lettings']))
        {
            $message.= "I am Interested in Lettings";
        }
        echo $message;
        $headers = "From: ".$name." <".$email.">";

        $result = mail($to,$subject,$message,$headers);

        return $result;
      }
    ?>

<form id="register_form" name="register" method="post" action="testing_page.php">
    <input type="text" id="name" name="name" class="regform" onFocus="if(this.value=='Name'){this.value='';}" onBlur="if(this.value==''){this.value='Name';}" value="Name" />
    <input type="text" id="number" name="number" class="regform" onFocus="if(this.value=='Phone number'){this.value='';}" onBlur="if(this.value==''){this.value='Phone number';}" value="Phone number" />
    <input type="text" id="email" name="email" class="regform" onFocus="if(this.value=='Email address'){this.value='';}" onBlur="if(this.value==''){this.value='Email address';}" value="Email address" />
    <textarea id="message" name="message" class="regtext" onFocus="if(this.value=='Message'){this.value='';}" onBlur="if(this.value==''){this.value='Message';}">Message</textarea>
    <label for"sales">Sales<input type="checkbox" name="sales" value="1" /></label>
    <label for"sales">Lettings<input type="checkbox" name="lettings" value="1"/></label>
    <input id="submit" name="submit" type="submit" value="Submit" class="regsender" />
    <div class="loading"></div>
</form> 
```

# ios - 如何将 IOS 徽章通知颜色从默认红色更改为其他颜色？

> ID：11468748
> 
> 赞同：3
> 
> 时间：2012-07-13T10:31:23.700
> 
> 标签：ios, apple-push-notifications

默认的 APNS 允许在我们的应用程序图标顶部以红色背景显示一个数字（徽章），以表明有新通知。

有没有办法根据后端服务器输出将红色背景更改为任何其他颜色？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T10:34:01.410

我不相信公共 iOS SDK API 可以做到这一点

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-20T14:18:05.797

根据 Apple [iOS Human Interface Guidelines](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/TechnologyUsage/TechnologyUsage.html)，您不能更改待处理通知徽章的颜色或大小。

> 徽章是一个红色的小椭圆，显示待处理通知项目的数量（徽章出现在应用程序图标的右上角）。您无法控制徽章的大小或颜色。

但是，如果您只是对如何操作感到好奇，这里有一个示例[项目](https://github.com/ckteebe/CustomBadge)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-20T13:11:51.213

Apple 不允许访问 UILocalnotification 属性，所以我们不能更改 uilocal 通知中的任何内容，我们只能使用其默认属性

# php - PHP json/ajax 在远程主机上不起作用

> ID：11468760
> 
> 赞同：0
> 
> 时间：2012-07-13T10:32:02.920
> 
> 标签：php, ajax, json

我在我的本地机器上开发了一个站点并让它工作正常，但是在将它上传到我的远程主机后，ajax/json 调用无法运行。

我已经检查了在重定向运行之前编写的任何 html，我唯一能找到的就是我在哪里回显 json_encode($return)。

这是问题吗？如果是这样，有人知道我该如何解决这个问题。？使用回声的替代方法可能吗？

谢谢

下面的代码带有标签，说明我认为问题可能出在哪里......

```
<script type="text/javascript">

$(document).ready( function() {
    $("#addStory input[type=submit]").click(function(e) {
        e.preventDefault();
        $.post('editor.php', $("#addStory").serialize(), function(result) {
            alert(result.adminList);
        }, "json");
    });
});

</script>

<form name="addStory" action="" method="post" id="addStory">
    <input type="text" id="test_text" name="test_text" />
    <input type="submit" value="Submit" />
</form> 
```

这里是 editor.php...

```
<?php

header('application/json');

$return = array();
$return['adminList'] = "Hello World!";
echo json_encode($return);

?> 
```

“Hello World”警报没有发生......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T10:36:48.227

您确实遇到的一个问题是第二个问题`header('application/json')`位于第一个 SQL 查询的输出之后。但是，只有当`$row['column_name'] == 0`它为真时才会出现这种情况。

如果它总是要返回 json，那么只需将其设置在 php 代码的顶部，以避免以后混淆。

```
<?php
    header('application/json');

    //all your sql etc here

?> 
```

在我们的讨论中，我还注意到您的标题实际上是不正确的。它应该是

```
header('Content-type: application/json'); 
```

删除它也可以，但这可能是一个坏主意，因为这有助于告诉接收者期望什么类型的数据。

另一点是您当前的 ajax 应该真正利用`getJSON()`jQuery 中的函数，它会自动返回一个 json 对象。

```
$.getJSON('example.php', function(data) {
    //use data as a json object
}); 
```

# python - 使用 Python 在 Excel 中折叠列

> ID：11468763
> 
> 赞同：0
> 
> 时间：2012-07-13T10:32:29.483
> 
> 标签：python, excel

我正在制作一个脚本来将数据库中的结果解析为 Excel。我将行和列都分组了。我有一种折叠组的方法（使用 +/- 按钮）。我可以通过以下方式折叠我的行：

```
call: e.showLevels(1,0)
def showLevels(self, rowlevel, collevel):
    self.e.ActiveSheet.Outline.ShowLevels(rowlevel,collevel) 
```

这适用于折叠行。当我尝试 e.showLevels(0,1) fe 它不起作用。另外，当我只在分组结束时这样做时：

```
e.e.ActiveSheet.Outline.ShowLevels(1,0) //works for rows
e.e.ActiveSheet.Outline.ShowLevels(1,1) //works ONLY for rows. Not columns.
e.e.ActiveSheet.Outline.ShowLevels(0,1) //rows = 0 so not showing. Still columns not working 
```

简单说我可以折叠行但我不能折叠列。任何人都知道如何使这些列工作？

**编辑：ee 和 self.e 对 Excel 工作簿的引用。ActiveSheet 对当前工作表的引用。**

提前致谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-02-28T19:26:26.040

```
wksht.Outline.ShowLevels(ColumnLevels = 1) 
```

以上对我有用。自从提出这个问题以来，情况可能发生了变化？注意：当我对分组列执行 AutoFit() 命令时，此命令已撤消。

# visual-studio-2010 - 如何在opencv中获取灰度图像的强度指针

> ID：11468767
> 
> 赞同：1
> 
> 时间：2012-07-13T10:32:35.163
> 
> 标签：visual-studio-2010, visual-c++, opencv

我有一个 16 位图像强度的二进制文件。我已经在短数组中读取了这些数据。并使用以下代码创建 16 位灰度图像。

```
 IplImage *img=cvCreateImage( cvSize( Image_width, Image_height ), IPL_DEPTH_16S, 1 );
 cvSetData(img,Data, sizeof(short )*Image_width); 
```

其中 Data 是短数组。

然后我使用这个函数为这个图像设置 ROI

```
cvSetImageROI(img, cvRect(crop_start.x, crop_start.y, crop_width, Image_height)); 
```

并且投资回报率设置成功。

现在在设置 ROI 之后，我想访问图像的强度意味着我想要裁剪图像强度的指针。我已经尝试过这段代码来访问强度

```
short *crop_Imagedata=(short *)img->imageData; 
```

但是这个指针没有给出正确的强度，因为我已经通过调试代码进行了检查。

任何人都可以告诉我如何获得图像强度的指针。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T11:54:52.940

您好，我尝试了以下方法来查找您可能想要做的事情：

```
IplImage *img=cvCreateImage( cvSize( 15, 15 ), IPL_DEPTH_16S, 1 );
cvSet(img,cvScalar(15));//sets all values to 15

cvSetImageROI(img, cvRect(4, 0, 10, 15));
short *crop_Imagedata=(short *)img->imageData;
((*crop_Imagedata) == 15) // true 
```

您将获得的价值不在投资回报率中！IplImage 结构的 imageData 只是一个简单的指针，而不是一个函数！！！在我看来，opencv 的 rois 并没有很好的文档记录并且易于使用。也许opencv的所有算法都以某种方式使用rois。我使用它们，但标准 iplimage 结构没有这样的自动功能来简单地使用它们。如果你想要更多的魔法尝试使用新的 cv::Mat 对象......但如果你仍然想使用 rois 那么你将不得不一直使用

```
 CvRect roi = cvGetImageROI(img); 
```

方法来检查所有的时间位置。之后，您将必须添加 roi 偏移量：

```
((short*)(img->imageData + (roi.y+ypos)*img-widthStep))[roi.x+xpos] 
```

请记住标准的 Opencv 是 C 库而不是 C++！顺便说一句，混合 cv::Mat rois 时可能会有点烦人。要将 iplimage 复制到没有 roi 的 cv::Mat 我必须执行以下操作：

```
CvRect roitmp = cvGetImageROI(ilimage);
cvResetImageROI(ilimage);
cv::Mat tmp = cv::Mat(ilimage).clone();
cvSetImageROI(ilimage,roitmp); 
```

也许这里有人知道使用 rois 的正确方法......

# scala - 为什么调用错误或在 BodyParser 的 Iteratee 中完成请求会在 Play Framework 2.0 中挂起？

> ID：11468768
> 
> 赞同：5
> 
> 时间：2012-07-13T10:32:36.223
> 
> 标签：scala, playframework, playframework-2.0, iterate

我正在尝试理解 Play 2.0 框架的反应式 I/O 概念。为了从一开始就获得更好的理解，我决定跳过框架的帮助程序来构建不同类型的迭代器，并`Iteratee`从头开始编写一个自定义以供 a`BodyParser`用于解析请求正文。

[从Iteratees](http://www.playframework.org/documentation/2.0/Iteratees)和[ScalaBodyParser](https://github.com/playframework/Play20/wiki/ScalaBodyParsers)文档中提供的信息以及关于播放反应式 I/O 的两个演示文稿开始，这就是我想出的：

```
import play.api.mvc._
import play.api.mvc.Results._
import play.api.libs.iteratee.{Iteratee, Input}
import play.api.libs.concurrent.Promise
import play.api.libs.iteratee.Input.{El, EOF, Empty}

01 object Upload extends Controller {
02   def send = Action(BodyParser(rh => new SomeIteratee)) { request =>
03     Ok("Done")
04   }
05 }
06
07 case class SomeIteratee(state: Symbol = 'Cont, input: Input[Array[Byte]] = Empty, received: Int = 0) extends Iteratee[Array[Byte], Either[Result, Int]] {
08   println(state + " " + input + " " + received)
09
10   def fold[B](
11     done: (Either[Result, Int], Input[Array[Byte]]) => Promise[B],
12     cont: (Input[Array[Byte]] => Iteratee[Array[Byte], Either[Result, Int]]) => Promise[B],
13     error: (String, Input[Array[Byte]]) => Promise[B]
14   ): Promise[B] = state match {
15     case 'Done => { println("Done"); done(Right(received), Input.Empty) }
16     case 'Cont => cont(in => in match {
17       case in: El[Array[Byte]] => copy(input = in, received = received + in.e.length)
18       case Empty => copy(input = in)
19       case EOF => copy(state = 'Done, input = in)
20       case _ => copy(state = 'Error, input = in)
21     })
22     case _ => { println("Error"); error("Some error.", input) }
23   }
24 } 
```

（备注：*所有*这些东西对我来说都是新的，所以如果这完全是废话，请原谅。） Iteratee 非常愚蠢，它只是读取所有块，总结接收到的字节数并打印出一些消息。当我用一些数据调用控制器操作时，一切都按预期工作 - 我可以观察到 Iteratee 接收到所有块，当读取所有数据时，它切换到状态完成并且请求结束。

现在我开始使用代码，因为我想看看这两种情况的行为：

*   在读取所有输入之前切换到状态错误。
*   在读取所有输入之前切换到完成状态并返回 a`Result`而不是`Int`.

我对上述文档的理解是两者都应该是可能的，但实际上我无法理解观察到的行为。为了测试第一种情况，我将上述代码的第 17 行更改为：

```
17       case in: El[Array[Byte]] => copy(state = if(received + in.e.length > 10000) 'Error else 'Cont, input = in, received = received + in.e.length) 
```

所以我只是添加了一个条件，如果收到超过 10000 个字节，则切换到错误状态。我得到的输出是这样的：

```
'Cont Empty 0
'Cont El([B@38ecece6) 8192
'Error El([B@4ab50d3c) 16384
Error
Error
Error
Error
Error
Error
Error
Error
Error
Error
Error 
```

然后请求永远挂起并且永远不会结束。我对上述文档的期望是，当我在Iteratee`error`内部调用函数时`fold`，应该停止处理。这里发生的是 Iteratee 的 fold 方法在被调用后被调用了几次`error`——好吧，然后请求挂起。

当我在读取所有输入之前切换到完成状态时，行为非常相似。将第 15 行更改为：

```
15    case 'Done => { println("Done with " + input); done(if (input == EOF) Right(received) else Left(BadRequest), Input.Empty) } 
```

和第 17 行到：

```
17       case in: El[Array[Byte]] => copy(state = if(received + in.e.length > 10000) 'Done else 'Cont, input = in, received = received + in.e.length) 
```

产生以下输出：

```
'Cont Empty 0
'Cont El([B@16ce00a8) 8192
'Done El([B@2e8d214a) 16384
Done with El([B@2e8d214a)
Done with El([B@2e8d214a)
Done with El([B@2e8d214a)
Done with El([B@2e8d214a) 
```

再次请求永远挂起。

我的主要问题是为什么请求在上述情况下挂起。如果有人能阐明这一点，我将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T22:15:39.507

您的理解是完全正确的，我只是将修复推送到大师：

[https://github.com/playframework/Play20/commit/ef70e641d9114ff8225332bf18b4dd995bd39bcc](https://github.com/playframework/Play20/commit/ef70e641d9114ff8225332bf18b4dd995bd39bcc)

修复了 Iteratees 中的两种情况以及异常。

在案例类中很好地使用副本来做一个 Iteratee BTW。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T05:37:48.603

Play 2.1 一定发生了变化——Promise 不再是参数化的，这个例子不再编译。

# php - 无法从 javascript 获取文本字段值

> ID：11468769
> 
> 赞同：0
> 
> 时间：2012-07-13T10:32:36.827
> 
> 标签：php, javascript, mysql, html, textfield

我已经制作了 2 个 php 页面。一页是“doc.php”，另一页是“chkval.php”。我使用了一些 javascript 代码在“doc.php”中生成文本字段。通过使用 $POST ，我试图在“chkval.php”页面中捕获文本字段值，但文本字段值没有被错误捕获

> 使用未定义的常量 regCardRecp - 在第 3 行 regCardRecp 的 D:\wamp\www\chkval.php 中假定为“regCardRecp”

以下是我的完整代码。

**文档.php**

```
<html>
<head>
<title>Record Entry</title>

<script type="text/javascript">

        window.onload = function()
        {
            var select = document.getElementById("select");
            var texts = document.getElementById("texts");
            select.onchange = function()
            {
                var val = select.options[select.selectedIndex].value;
                texts.innerHTML = "";

                if(val==9 ){

                texts.innerHTML += '<div>Reg Card Reception Date (SSC): <input type="text" name="regCardRecp" id="regCardRecp"></div>'
                texts.innerHTML += '<div>Reg Card Issue Date (SSC):<input type="text" name="regCardIss" id="regCardIss">'

                texts.innerHTML += '<div>Roll no Slip Reception Date (SSC):<input type="text" name="rollSlipRecp" id="rollSlipRecp"></div>'
                 texts.innerHTML += '<div>Roll no Slip Issue Date (SSC):<input type="text" name="rollSlipIss" id="rollSlipIss"></div>'    

                texts.innerHTML += '<div>Marks Sheet Reception Date (SSC-I):<input type="text" name="marksheetRecpI" id="marksheetRecpI"/></div>'
                texts.innerHTML += '<div>Marks Sheet Issue Date (SSC-I):<input type="text" name="marksheetIssI" id="marksheetIssI"/></div>'

                texts.innerHTML += '<div>Result (SSC-I):<input type="radio" name="Sresult" value="pass" /> Pass<input type="radio" name="Sresult" value="fail" /> Fail</div>'

                }
                if(val==10 ){
                      texts.innerHTML += '<div>Marks Sheet Reception Date (SSC-II):<input type="text" name="marksheetRecpII" id="marksheetRecpII"></div>'
                      texts.innerHTML += '<div>Marks Sheet Issue Date (SSC-II):<input type="text" name="marksheetIssII" id="marksheetIssII"></div>'

                      texts.innerHTML += '<div>Certificate Reception Date (SSC):<input type="text" name="certRecp" id="certRecp"></div>'
                      texts.innerHTML += '<div>Certificate Issue Date (SSC):<input type="text" name="certIss" id="certIss"></div>'

                      texts.innerHTML += '<div>Result (SSC-II):<input type="radio" name="Sresult1" value="pass" /> Pass<input type="radio" name="Sresult1" value="fail" /> Fail</div>'

                      //  texts.innerHTML += '<div></div>'

                      };

                if( val==11){

                      texts.innerHTML += '<div>Reg Card Reception Date (HSSC):<input type="text" name="HhregCardRecp" id="HregCardRecp"></div>'
                      texts.innerHTML += '<div>Reg Card Issue Date (HSSC):<input type="text" name="HregCardIss" id="HregCardIss">'

                      texts.innerHTML += '<div>Roll no Slip Reception Date (HSSC):<input type="text" name="HrollSlipRecp" id="HrollSlipRecp"></div>'
                      texts.innerHTML += '<div>Roll no Slip Issue Date (HSSC):<input type="text" name="HrollSlipIss" id="HrollSlipIss"></div>'

                      texts.innerHTML += '<div>Marks Sheet Reception Date (HSSC-I):<input type="text" name="HmarksheetRecpI" id="HmarksheetRecpI"></div>'
                      texts.innerHTML += '<div>Marks Sheet Issue Date (HSSC-I):<input type="text" name="HmarksheetIssI" id="HmarksheetIssI"></div>'

                      texts.innerHTML += '<div>Result (HSSC-I):<input type="radio" name="Hresult" value="pass" /> Pass<input type="radio" name="Hresult" value="fail" /> Fail</div>'

                };

                if(val==12 ){

                      texts.innerHTML += '<div>Marks Sheet Reception Date (HSSC-II):<input type="text" name="HmarksheetRecpII" id="HmarksheetRecpII"></div>'
                      texts.innerHTML += '<div>Marks Sheet Issue Date (HSSC-II):<input type="text" name="HmarksheetIssII" id="HmarksheetIssII"></div>'

                      texts.innerHTML += '<div>Certificate Reception Date (HSSC):<input type="text" name="HcertRecp" id="HcertRecp"></div>'
                      texts.innerHTML += '<div>Certificate Issue Date (HSSC):<input type="text" name="HcertIss" id="HcertIss"></div>'

                      texts.innerHTML += '<div>Result (HSSC-II):<input type="radio" name="Hresult1" value="pass" /> Pass<input type="radio" name="Hresult1" value="fail" /> Fail</div>'

                };

            }
        }

    </script>

</head>
<body>

<form id="myform" method="post" action="chkval.php" onSubmit="chkval.php">

<h1 align="center">Documents Record Entry</h1>
<table width=50% align = 'center'>

<tr><td>Session:</td><td>
<select name="session">
<option value="19">19</option>
<option value="20">20</option>
</select>

<select name="session">
<option value="01">01</option>
<option value="02">02</option>
<option value="03">03</option>
<option value="04">04</option>
<option value="05">05</option>
<option value="06">06</option>
<option value="07">07</option>
<option value="08">08</option>
<option value="09">09</option>
<option value="10">10</option>
</select>

-

<select name="session">
<option value="01">01</option>
<option value="02">02</option>
<option value="03">03</option>
<option value="04">04</option>
<option value="05">05</option>
<option value="06">06</option>
<option value="07">07</option>
<option value="08">08</option>
<option value="09">09</option>
<option value="10">10</option>
</select>
</td></tr>

<tr>
<td>
Name:
</td>
<td>
<input type="text" name="name" id="name">
</td>

<td>
Board:
</td>
<td>
<input type="text" name="board" id="board">
</td>
</tr>

<tr><td>Class:</td><td>
<select id="select" size="1" name="class" >
<option value="1" >1</option>
<option value="2">2</option>
<option value="3">3</option>
<option value="4">4</option>
<option value="5">5</option>
<option value="6">6</option>
<option value="7">7</option>
<option value="8">8</option>
<option value="9">Matric-I</option> 
<option value="10">Matric-II</option>
<option value="11" >HSSC-I</option>
<option value="12">HSSC-II</option>
<option value="13">Bachelor</option>

</select>
<hr/>

        <div id="texts"></div></td></tr>

<td>

</td>

<br>
</td>
<tr><td>Remarks:<textarea name="remarks" cols="24" rows="3"></textarea></td></tr>
<td>
<input type="submit" name="submit" value="Submit">
</td>
</tr>
</table>
</form>
</body>
</html> 
```

**chkval.php**

```
<?php
$regCardRecp = $_POST['regCardRecp'];
echo(regCardRecp);

?> 
```

任何帮助将不胜感激..谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T10:37:26.913

你的问题在这里你只是在你的**回声（regCardRecp）上错过了一个****$**符号 ；

 **```
<?php

    $regCardRecp = $_POST['regCardRecp'];
    echo($regCardRecp);

?> 
```**

# php - 根据用户行为在侧边栏中显示不同的内容

> ID：11468779
> 
> 赞同：0
> 
> 时间：2012-07-13T10:33:17.323
> 
> 标签：php, cookies

我正在规划一个网站，我在想是否可以根据访问者的行为在侧边栏中显示替代内容？假设用户点击了页面 A 上的链接 X，如果他们点击了链接，我希望侧边栏中的替代内容显示在页面 B 上。此外，如果访问者填写表单，是否可以将跟踪 cookie 信息与提交的表单相关联，以查看访问者查看了哪些页面？这会更容易在特定的 cms 中实现吗？

如果有人至少能指出我正确的方向，我将不胜感激。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T10:46:14.963

是的，一切皆有可能，不需要 cookie（除非您想持续跟踪用户）

在您的数据库中的内容旁边有一个关系列，在创建内容时分配这个值就像一个类别或标签等。

然后，当用户在页面加载时单击链接 A 时，将其关系存储在会话中，然后当单击链接 B 时，加载与先前设置的会话值相关的内容。

# javascript - HTML 按钮即使在获得焦点并且 CSS 规则启动时也不会单击

> ID：11468780
> 
> 赞同：3
> 
> 时间：2012-07-13T10:33:19.093
> 
> 标签：javascript, jquery, html, events, button

看看这个按钮：http: [//jsfiddle.net/vtortola/Dnxpe/](http://jsfiddle.net/vtortola/Dnxpe/)

我Chrome，如果点击上边框，即使触发了“:hover”和“:active”css规则，也不会触发事件。如果您在中心单击更多，则可以正常工作。

在 IE9 中，如果你这样做，它会错过 50% 的点击。

问题是边距，当您单击边距开关时，会产生按钮被按下的效果，但是如果您单击顶部边框，这会使指针离开按钮，但是......事件应该已经被触发。 ……为什么会这样？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T10:46:14.067

这可能会发生，因为 a`click()`仅被认为完成一次，`mousedown()`并且`mouseup()`连续完成。在顶部边框附近单击的情况下，`mouseup()`永远不会触发，对于`click()`.

如果您使用 mousedown() 它每次都会起作用，但它会在整个点击完成之前发生。

```
$('button').mousedown(function(e){
    $('#clicks').append('<span>click </span>');
}); 
```

要解决此问题，您可以执行以下操作：

将容器添加到按钮，然后将`mousedown`处理程序添加到按钮和`mouseup`处理程序到容器。如果您确保它们都被调用，那么您可以确定按钮上的单击事件已被执行。

像这样：

**HTML**

```
<div id="cont"><button>Click me</button></div>
<div id="clicks">
</div>​​​​​​​​ 
```

**JavaScript**

```
var mdown = false;

$('button').mousedown(function(e){
    mdown = true;
});

$('#cont').mouseup(function(e){
    if (mdown)
    {
        $('#clicks').append('<span>click </span>');
        mdown = false;
    }
});

​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T10:51:36.893

我检查了你的代码并发现了一个有趣的错误。它是因为 CSS。即使您可以重新生成该错误。

步骤： 1\. 单击顶部边框附近的按钮，但不要松开鼠标。2.现在，看看按钮，你的按钮实际上被按下了，这就是为什么它不能触发按钮点击事件。

解决方案：

按钮处于活动状态时删除边距。

```
button:active,input[type=submit]:active
{
   box-shadow: 0px 0px 3px 3px #D8F6CE;
} 
```

我希望它有所帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-01T20:29:24.643

这是我想出的解决方案，它使用 css psudo 元素来捕获点击事件。这里的好处是您不需要 javascript。点击事件总是被 :after 捕获并冒泡到按钮。

[http://jsfiddle.net/kevinrockwood/fUuUB/1/](http://jsfiddle.net/kevinrockwood/fUuUB/1/)

主要需要注意的是css：

```
button:after{
  content: " ";
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
} 
```

# php - 从 PHPMYADMIN 导出和导入数据

> ID：11468783
> 
> 赞同：8
> 
> 时间：2012-07-13T10:33:29.440
> 
> 标签：php, mysql, sql, phpmyadmin

我使用 phpMyAdmin 导出数据，但是当我导入数据时出现此错误：

> #1452 - 无法添加或更新子行：外键约束失败

我可以相应地设置数据，然后我没有收到错误。但是有没有更好的方法来做到这一点？比如禁用 phpMyAdmin 中的某些选项或向 SQL 添加一些查询？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-13T10:41:48.983

问题是 pma 不关心插入行的顺序。所以它发生了一个表行插入了一个 FK，其中 FK 行尚未导入。

要解决此问题，请`Disable Foreign Key Checks`在从 PhpMyadmin 导出时使用该复选框。或者自己设置：

```
SET FOREIGN_KEY_CHECKS=0; 
```

最后：

```
SET FOREIGN_KEY_CHECKS=1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T10:34:52.470

[MySQL FK Doc](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)`Cannot add or update a child row: a foreign key constraint fails`中引用了该错误 ( )

要在 2 个表之间添加引用，条件必须适合现有数据。

这意味着如果你说then的`table1.id = table2.id`所有 id必须匹配在一起。`table1``table2`

要解决这个问题，您必须消除或修复那些不匹配的行。
例子：

```
table1.id  |  table2.fk
   1       |       1      ok 
   2       |     null     error
   3       |       4      error if id 4 is not in table1 
```

# javascript - JSON无效字符错误

> ID：11468784
> 
> 赞同：0
> 
> 时间：2012-07-13T10:33:51.730
> 
> 标签：javascript, jquery, vb.net, json

当从 VB.net 发送 json 时，它会作为文本发送。当我检查 ajax 成功中的数据参数时，我看到`data = [{'PageInformation':'test'}]`

但在下面我得到无效字符错误——为什么？

```
var dataObj = jQuery.parseJSON(data); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T10:34:35.480

使用双引号：`data = [{"PageInformation":"test"}]`

# javascript - Javascript：如何使用“传统 OOP”

> ID：11468787
> 
> 赞同：0
> 
> 时间：2012-07-13T10:34:14.780
> 
> 标签：javascript, oop

我正在开发一个来自 PHP 的验证器库，我想为验证提供一个类似的设置，包括验证器和约束（值、对象由验证器针对选定的约束进行验证）。

所以处理约束我有以下问题：

约束都具有相同的属性，只是实现略有不同。

例子：

```
Constraint = Validator.Constraint = {
    name: null, // contains the name of the constraint
    value: null, // contains the value which we want to validate
    options: {}, // contains options for some Constraints (e.g. range)
    message: null, // contains the error message which is getting returned
    validate: function(){}, // the validation logic
    constructor: function(value, options){ 
        this.value = value;
        this.options = options;
        this.validate(); 
    } // the constructor which can be called for stand-alone validation
}; 
```

现在我想以某种方式扩展约束并对其进行自定义：

```
RequiredConstraint = Validator.RequiredConstraint = {
    name: "required",
    message: "this property is required",
    validate: function(){
        if (this.value != "" || this.value != undefined || this.value != null) {
            return;
        }
        return this.message;
    }
    // other properties get inherited
}; 
```

然后该约束应该可用于：

```
RequiredConstraint("");
// returns false 
```

我知道想知道两件事：

1.  起初，如果完全推荐使用这种编程风格，即使 JavaScript 是另一种语言并且过于动态？
2.  如果它仍然是很好的实践，我该如何实现上述行为？我必须寻找哪些关键字？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T10:43:06.720

如果你希望它们被继承，你需要把你的函数放在原型中。

此外，在 ES3 中，最干净的继承对象是函数。

例子：

```
function Constraint() {}

Constraint.prototype = {
    constructor: Constraint,

    validate: function() {
        console.log( 'Hello!' );
    },

    message: 'Property required!'
};

var RequiredConstraint = new Constraint();

RequiredConstraint.message; // "Property required!"
RequiredConstraint.validate(); // "Hello!"

// Now let's override it
RequiredConstraint.validate = function() {
    console.log( 'Hey!' );
};
RequiredConstraint.validate(); // "Hey!" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T11:22:46.070

如果您来自 Java、.NET、C++ 背景，Javascript 可能会令人困惑。在 JS 中没有类的概念，一切都只是另一个对象。甚至函数（用于模拟类）本身也是对象。看看下面的文章，了解事情是如何在幕后工作的。

[https://developer.mozilla.org/en/JavaScript/Guide/Inheritance_Revisited](https://developer.mozilla.org/en/JavaScript/Guide/Inheritance_Revisited)

正如弗洛里安所说，您需要使用基于原型的编码来模拟继承。但就我个人而言，这种风格每次使用时都感觉很可疑。

另一方面，作为 OOP 概念的继承有时是有问题的，并且在大多数常见用例中可能被证明是反模式。我的建议是让您寻找通过组合实现相同目标的方法，这对于大多数场景来说可能是一种更好的编程风格。

# spotify - YQL 和 Spotify

> ID：11468790
> 
> 赞同：0
> 
> 时间：2012-07-13T10:34:28.413
> 
> 标签：spotify, yql

我正在尝试为 Spotify 构建一个使用 YQL 进行数据提取的应用程序。我在设置权限时遇到问题。我添加了用于 html 的 url-s，但添加权限后我什至无法启动应用程序...

没有 Spotify 的 Html 本身返回结果，所以问题不在页面本身

这是我用于权限的清单条目：

```
"RequiredPermissions": [ 
    "http://developer.yahoo.com"],
    "http://developer.yahoo.com", 
    "http://*.yahooapis.com/v1/public/yql?", 
    "http://*.datatables.org/alltables.env", 

 ] 
```

你可以帮帮我吗？任何帮助表示赞赏:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T14:48:24.933

在第一个 developer.spotify.com 列表项之后，条目中间有一个括号。

另外，我不完全确定您是否需要 yql 之后的问号。

尝试这样的事情：

```
"RequiredPermissions": [ 
    "http://developer.yahoo.com/",
    "http://*.yahooapis.com/v1/public/", 
    "http://*.datatables.org/", 

] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-06T19:28:29.380

Pompa 的答案是正确的，你有一个错字。

另外，正如 Spotify 文档所述（但一般来说这是一个 CORS 策略），您只需要在`RequiredPermissions`列表中传递所需的主机名，所以这应该足够了：

```
"RequiredPermissions": [
    "http://*.yahoo.com",
    "http://*.yahooapis.com",
    "http://*.datatables.org",
] 
```

# sql-server - SQL：如何检索月份和年份范围内的数据

> ID：11468792
> 
> 赞同：3
> 
> 时间：2012-07-13T10:34:29.267
> 
> 标签：sql-server, database

我有一个查询，我希望得到月份和年份范围内的结果，比如数据应该在 2010 年 1 月和 2012 年 3 月之间。

任何人都可以帮助我..我做过......：

```
(DATENAME(MM, c.startdate) >= 'January' and DATEPART(YEAR, c.startdate) >= 2010) and
(DATENAME(MM, c.startdate) <= 'January' and DATEPART(YEAR, c.startdate) <= 2012) 
```

bue 仍然没有得到更好的结果

提前感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T10:38:18.343

为什么不直接使用：

```
SELECT (list of columns)
FROM dbo.YourTable
WHERE c.startDate >= '20100101' AND c.startDate < '20120401' 
```

`startDate`这只会选择2010 年 1 月 1 日到 2012 年 4 月 1 日之间的所有行

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T10:40:28.747

```
Select
    ...
Where Dateadd(dd, datediff(dd, 0, c.startdate),0) between '2012-01-01' and '2012-04-01' 
```

**编辑：** 我现在假设您的月份和日期是您正在使用的输入。

```
Declare @month1 varchar(20), @year1 int
  ,@month2 varchar(20), @year2 int
  ,@realmonth1 int, @realmonth2 int
  ,@first int, @input1 datetime, @input2 datetime
Set @month1 = 'January'
Set @year1 = 2010
Set @month2 = 'January'
Set @year2 = 2012
Set @realmonth1 = Case when @month1 = 'January' then '01' when @month1 = 'February' then '02' when @month1 = 'March' then '03' when @month1 = 'April' then '04' when @month1 = 'May' then '05' when @month1 = 'June' then '06' when @month1 = 'July' then '07' when @month1 = 'August' then '08' when @month1 = 'Sepetember' then '09' when @month1 = 'October' then '10' when @month1 = 'November' then '11' when @month1 = 'December' then '12' end
Set @realmonth2 = Case when @month2 = 'January' then '01' when @month2 = 'February' then '02' when @month2 = 'March' then '03' when @month2 = 'April' then '04' when @month2 = 'May' then '05' when @month2 = 'June' then '06' when @month2 = 'July' then '07' when @month2 = 'August' then '08' when @month2 = 'Sepetember' then '09' when @month2 = 'October' then '10' when @month2 = 'November' then '11' when @month2 = 'December' then '12' end
Set @first = 1
Set @input1 = convert(datetime,(convert(nvarchar(4), @year1) + '-' + convert(nvarchar(2), @realmonth1) + '-' + convert(nvarchar(2), @first)))
Set @input2 = convert(datetime,(convert(nvarchar(4), @year2) + '-' + convert(nvarchar(2), @realmonth2) + '-' + convert(nvarchar(2), @first)))

Select
    ...
Where startdate between @input1 and @input2 
```

[Sql Fiddle](http://sqlfiddle.com/#!3/a82d5/1)显示它可以工作，也在 MS SQL Server 2005 中进行了测试

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T10:40:25.740

尝试使用包含`month(c.startdate) >= 1` and的语句`year(c.startdate) >= 2010`。这让你更容易

# php - 布局中的登录表单：是否有与布局相关的特定控制器部分？

> ID：11468797
> 
> 赞同：-1
> 
> 时间：2012-07-13T10:34:46.330
> 
> 标签：php, symfony

我想创建一个带有登录表单的布局。

我应该在哪里为该登录表单编写控制器代码？在显示布局的每个动作中？（我不这么认为..）是否有与布局相关的特定控制器部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T13:34:50.917

您应该简单地创建一个特定的操作，您将在其中处理登录表单提交，为其创建一个路由，并将登录表单指向该路由。

然后在该操作中，您可以使用`Symfony\Component\HttpFoundation\RedirectResponse`并在成功登录后将用户重定向回他来自的地方。从外部看，用户将转到另一个页面，您不必将代码放在使用布局的每个操作中。

# google-chrome-extension - 为 chrome 扩展中的每个父菜单创建两个子菜单

> ID：11468798
> 
> 赞同：2
> 
> 时间：2012-07-13T10:34:48.810
> 
> 标签：google-chrome-extension

我已经搜索过这个但没有运气。我想为 Google Chrome 扩展中的每个父菜单创建两个子菜单。但是我的代码只在上下文为“页面”时创建子菜单。这是我目前正在尝试的代码：

```
var contexts = ["page","link","image"];
        for (var i = 0; i < contexts.length; i++) {
      var context = contexts[i];
      var title = "";

      title = "Do something with this "+context;
      var id = chrome.contextMenus.create({"title": title, "contexts":[context]});
      var child1 = chrome.contextMenus.create({"title": "someThing1", "parentId": id, "onclick": onClickFunc});
      var child2 = chrome.contextMenus.create({"title": "someThing2", "parentId": id, "onclick": onClickFunc});
} 
```

任何想法？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-13T01:40:39.727

很确定这是在这里回答的：[https ://stackoverflow.com/a/18198476/1678601](https://stackoverflow.com/a/18198476/1678601)

简而言之，create 方法有一个名为“contexts”的*可选*参数，默认为“page”。

这是文档：http: [//developer.chrome.com/extensions/contextMenus.html#method-create](http://developer.chrome.com/extensions/contextMenus.html#method-create)

因此，为了演示如何将解决方案应用于您的代码（这只是上面的一部分）：

```
var child1 = chrome.contextMenus.create({"title": "someThing1", "parentId": id, "onclick": onClickFunc, "contexts": ["page","link","image"]});
var child2 = chrome.contextMenus.create({"title": "someThing2", "parentId": id, "onclick": onClickFunc, "contexts": ["page","link","image"]}); 
```

# scrollviewer - Windows Phone ScrollViewer.ScrollToVerticalOffset

> ID：11468799
> 
> 赞同：0
> 
> 时间：2012-07-13T10:34:49.023
> 
> 标签：scrollviewer

赢手机 7.1

在 ScrollViewer 中，我有一个包含大约 500 个字符串的堆栈面板。我想将堆栈面板从代码滚动到某个偏移量。我试过这个：

```
for (int i = 0; i < 500; i++)
{
  tb = new TextBlock();
  tb.Text = "String #" + i.ToString();                
  this.stackPanel1.Children.Add(tb);
}
this.scrollViewer1.ScrollToVerticalOffset(200);// scroll to offset 200
this.scrollViewer1.UpdateLayout(); 
```

但它根本不会滚动。

我究竟做错了什么？

谢谢

多内斯卡米洛

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T11:30:15.577

这将解决您的问题：

```
Dispatcher.BeginInvoke(() =>
    {
        scrollViewer1.UpdateLayout();
        scrollViewer1.ScrollToVerticalOffset(200);
    }
); 
```

# user-interface - 从其控制器中关闭一个阶段

> ID：11468800
> 
> 赞同：11
> 
> 时间：2012-07-13T10:34:49.363
> 
> 标签：user-interface, javafx, javafx-2

我需要一种`Stage`通过单击从内部关闭 a 的方法 a `Button`。

我有一个主类，我从中创建一个带有场景的主舞台。我为此使用 FXML。

```
public void start(Stage stage) throws Exception {
    Parent root = FXMLLoader.load(getClass().getResource("Builder.fxml"));
    stage.setTitle("Ring of Power - Builder");
    stage.setScene(new Scene(root));
    stage.setMinHeight(600.0);
    stage.setMinWidth(800.0);
    stage.setHeight(600);
    stage.setWidth(800);
    stage.centerOnScreen();
    stage.show();
} 
```

现在在出现的主窗口中，我拥有通​​过 FXML 和适当的控件类制作的所有控件项、菜单和内容。这就是我决定在帮助菜单中包含关于信息的部分。所以当菜单帮助 - 关于被激活时，我有一个事件正在进行，如下所示：

```
@FXML
private void menuHelpAbout(ActionEvent event) throws IOException{
    Parent root2 = FXMLLoader.load(getClass().getResource("AboutBox.fxml"));
    Stage aboutBox=new Stage();
    aboutBox.setScene(new Scene(root2));
    aboutBox.centerOnScreen();
    aboutBox.setTitle("About Box");
    aboutBox.setResizable(false);
    aboutBox.initModality(Modality.APPLICATION_MODAL); 
    aboutBox.show();
} 
```

正如所见，关于框窗口是通过带有控制器的 FXML 创建的。我想添加一个`Button`从控制器内关闭新阶段。

我发现自己能够做到这一点的唯一方法是定义一个公共静态 Stage aboutBox；在 Builder.java 类中，并从 AboutBox.java in 方法中引用该类，该方法处理关闭按钮上的操作事件。但不知何故，它感觉并不完全干净和正确。有没有更好的办法？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-13T18:23:55.550

您可以从传递给事件处理程序的事件派生要关闭的阶段。

```
new EventHandler<ActionEvent>() {
  @Override public void handle(ActionEvent actionEvent) {
    // take some action
    ...
    // close the dialog.
    Node  source = (Node)  actionEvent.getSource(); 
    Stage stage  = (Stage) source.getScene().getWindow();
    stage.close();
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T12:10:36.387

在 JavaFX 2.1 中，您几乎没有选择。像珠宝海的答案那样的方式，或者您已经完成的方式或修改版本的方式

```
public class AboutBox extends Stage {

    public AboutBox() throws Exception {
        initModality(Modality.APPLICATION_MODAL);
        Button btn = new Button("Close");
        btn.setOnAction(new EventHandler<ActionEvent>() {
            @Override
            public void handle(ActionEvent arg0) {
                close();
            }
        });

        // Load content via
        // EITHER

        Parent root = FXMLLoader.load(getClass().getResource("AboutPage.fxml"));
        setScene(new Scene(VBoxBuilder.create().children(root, btn).build()));

        // OR

        Scene aboutScene = new Scene(VBoxBuilder.create().children(new Text("About me"), btn).alignment(Pos.CENTER).padding(new Insets(10)).build());
        setScene(aboutScene);

        // If your about page is not so complex. no need FXML so its Controller class too.
    }
} 
```

像这样的用法

```
new AboutBox().show(); 
```

在菜单项操作事件处理程序中。

# java - 在单例中声明变量静态

> ID：11468805
> 
> 赞同：2
> 
> 时间：2012-07-13T10:35:06.697
> 
> 标签：java, singleton

同时将单例实现为：

```
class MyConnection {
    private static MyConnection connection = new MyConnection();

    private MyConnection() {
    }

    public  static MyConnection getConnection() {
        return connection;
    }
} 
```

1）为什么我们给`connection`静态？

这仅仅是因为它`getConnection()`是静态的，我们不能在静态上下文中引用非静态的，还是有其他原因？

2）是否有必要声明`connection`为final？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-13T10:38:12.840

> ***1）为什么我们给`connection`静态？***

如果它是非静态的，则需要有一个实例`MyConnection`来获取不`connection`符合目的的引用。:)

> ***这仅仅是因为它`getConnection()`是静态的，我们不能在静态上下文中引用非静态的，还是有其他原因？***

是的。（既然`getConnection()`需要是静态的，`connection`就需要是静态的。）

> ***2）是否有必要将连接声明为最终连接？***

不，但这是一种很好的做法，因为一旦初始化，就不应更改它。

但是，**更好的做法**是使用 an`enum`代替。

```
enum MyConnection {

    INSTANCE;

    // your methods...
} 
```

并通过`MyConnection.INSTANCE`.

**经验法则**：如果一个类应具有预定义数量的实例，请使用`enum`. 在这种情况下，实例数为 1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T10:38:47.810

**1）为什么我们将连接设为静态？**

因为你希望它是单例的。即使您不是通过静态方法访问它，您也可以访问`static variable by making it public and final`. 但是，变量必须是静态的。

**2）是否有必要将连接声明为最终连接？**

如果您通过代码中的静态方法访问，则不需要，因为它不会暴露在外部以进行修改。

*但是如果你将单例变量设为 public ，它也必须是 final 的。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T10:44:51.167

Singleton 是一个只有一个实例的类。在 Java 中，实现该模式的最常见方法是声明一个`private`构造函数以防止正常初始化，并声明一个`public static`提供单个实例的方法。（但 aioobe 的枚举答案很酷！）

可以在没有类实例的情况下调用静态方法，从而允许您执行以下操作`MySingleton.getInstance()`- 但是，由于不能保证您拥有该类的实例，因此无法访问实例变量。通过在声明变量`static`时将其声明为“类变量” - 允许以与静态方法相同的方式访问它，并且还允许静态方法访问它（同样，静态方法不能访问非静态变量，因为不能保证它们存在，而且我们也不知道要查看哪个实例）。所以回答 1) 这是因为如果你需要一个单例的实例来查找单例的实例，你就会有一个 catch 22。

至于 2) 你*不需要*声明它是最终的，但是声明任何可以是最终的、最终的都是一种很好的形式。这样你就可以明确你的意图，如果你犯了错误，编译器可以帮助你。*它至少*应该是最终的*或*私有的。

# javascript - JSON.parse 对象数组

> ID：11468806
> 
> 赞同：16
> 
> 时间：2012-07-13T10:35:06.917
> 
> 标签：javascript, json

服务器以 JSON 格式返回对象数组。看起来是这样的：

```
{"d":"[
  {\"Id\":1,\"IsGood\":true,\"name1\":\"name1dsres\",\"Name2\":\"name2fdsfd\",\"name3\":  \"name3fdsgfd\",\"wasBorn\":\"\\/Date(284011000000)\\/\"},
  {\"Id\":2,\"IsGood\":false,\"name1\":\"fdsfds\",\"name2\":\"gfd3im543\",\"name3\":\"3543gfdgfd\",\"WasBorned\":\"\\/Date(281486800000)\\/\"}
]"} 
```

我需要使用 JSON.parse 函数进行解析。我这样做是这样的：

```
 function myFunction(dataFromServer){
      var parsedJSON = JSON.parse(dataFromServer.d);
         for (var item in parsedJSON.d) {
          // how do I get the fields of current item?
      } 
```

此代码不起作用，它返回未定义

```
for (var item in parsedJSON) {
      alert(item.Id);
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-13T10:59:43.637

这完美地工作

```
 function myFunction(dataFromServer){
       var parsedJSON = JSON.parse(dataFromServer.d);
       for (var i=0;i<parsedJSON.length;i++) {
            alert(parsedJSON[i].Id);
         }
 } 
```

但这并不

```
 function myFunction(dataFromServer){
           var parsedJSON = JSON.parse(dataFromServer.d);
           for (var item in parsedJSON) {
               alert(item.Id);
         }
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T10:38:10.283

您可以像访问任何对象一样访问它们：

```
var id = item.Id;
if (item.IsGood) { ... } 
```

如果您希望枚举它们以某种方式使用，请查看[此 SO question](https://stackoverflow.com/questions/208016/how-to-list-the-properties-of-a-javascript-object)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T10:40:47.697

您可以像访问普通 javascript 对象一样访问它们，即作为`item.id`或`item['id']`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-25T04:59:03.093

```
 class Program
{
    static void Main(string[] args)
    {

        var jsonString = @"{
                              ""data"": [
                                  {
                                    ""uid"": ""100001648098091"",
                                    ""first_name"": ""Payal"",
                                    ""last_name"": ""Sinha"",
                                    ""sex"": ""female"",
                                    ""pic_big_with_logo"": ""https://m.ak.fbcdn.net/external.ak/safe_image.php?d=AQAi8VLrTMB-UUEs&bust=1&url=https%3A%2F%2Fscontent-a.xx.fbcdn.net%2Fhprofile-ash2%2Fv%2Ft1.0-1%2Fs200x200%2F10018_433988026666130_85247169_n.jpg%3Foh%3Dc2774db94dff4dc9f393070c9715ef65%26oe%3D552CF366&logo&v=5&w=200&h=150"",
                                    ""username"": ""payal.sinha.505"",
                                  },
                                ]
                              }";
        dynamic userinfo = JValue.Parse(jsonString);

        IList<FacebookUserDetail> userDeatils = new List<FacebookUserDetail>();
        // 1st method
        foreach (dynamic userinfoItr in userinfo.data)
        {
            FacebookUserDetail userdetail= userinfoItr.ToObject<FacebookUserDetail>();
            userDeatils.Add(userdetail);

        }
        // 2nd Method
        var userDeatils1 = JsonConvert.DeserializeObject<FacebookUserDetails>(jsonString);
    }
}
public class FacebookUserDetail
{
    public string username { get; set; }
    //Password = EncryptionClass.Md5Hash(Guid.NewGuid().ToString()),                        
    public string first_name { get; set; }
    public string last_name { get; set; }
    public string sex { get; set; }
    public string pic_big_with_log { get; set; }
}
enter code here
public class FacebookUserDetails
{
   public IList<FacebookUserDetail> data  { get; set; }
}
} 
```

# c++ - 在不使用 Boost 的情况下解析 C++ 中的字符串

> ID：11468810
> 
> 赞同：-4
> 
> 时间：2012-07-13T10:35:20.527
> 
> 标签：c++, string

```
const char* mystring; 
```

在上面的变量中，我将收到值为“ABCD1234”或“abcb1234”的值，我应该解析字符串并获得值 1234（即在字符之后）。如何在 C++ 中有效地做到这一点？

我总是在数字前有 4 个字。

我不应该使用Boost。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T10:42:54.433

没有错误检查：

```
const char *c = mystring;
while (*c && ('0' > *c || *c > '9')) ++c;
return atoi(c); 
```

如果您需要语法检查，请使用 strtol 而不是 atoi。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T10:43:10.610

你的字符串的确切模式是什么？

您可能会考虑做的一件事是使用字符串方法，`find_first_not_of()`例如

```
string newStr = oldStr.substr( oldStr.find_first_not_of( "ABCDabcd" ) ); 
```

另一方面，如果你知道你只需要前 4 个字符之后的内容，那真的是轻而易举：

```
string newStr = oldStr.substr( 4 ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T10:43:33.713

您可以使用以下任一方法来定位数字序列的开头，因为这两个函数都接受要搜索的多个字符：

*   [`strpbrk()`](http://en.cppreference.com/w/c/string/byte/strpbrk)搜索`char*`：

    ```
    char* first_digit = strpbrk(mystring, "0123456789");
    if (first_digit)
    {
        /* 'first_digit' now points to the first digit.
           Can be passed to atoi() or just used as a
           substring of 'mystring'. */
    } 
    ```

*   [`std::string::find_first_of()`](http://en.cppreference.com/w/cpp/string/basic_string/find_first_of)：

    ```
    size_t first_digit_idx = mystring.find_first_of("0123456789");
    if (std::string::npos != first_digit_idx)
    {
        // Use `std::string::substr()` to extract the digits.
    } 
    ```

# active-directory - 使用 Active Directory 时，可以将用户的条目拆分到多个控制器吗？

> ID：11468811
> 
> 赞同：0
> 
> 时间：2012-07-13T10:35:21.720
> 
> 标签：active-directory, domaincontroller

当我在 AD 中查找用户时，用户是否可以在 2 个不同的控制器上拥有 2 个条目？如果查找 #1 返回条目和参考，我是否需要遵循参考以获得有关用户的其他信息？或者参考是否具有相同的信息，因此可以忽略？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T05:33:50.357

`userPrincipalName`Active Directory 不强制执行唯一性。它是创建用户对象或修改`userPrincipalName`负责确保它在整个森林中唯一的应用程序。如果 Active Directory 检测到有多个具有相同`userPrincipalName`分配的用户对象，则用户将无法使用该`userPrincpialName`. 查看此[Microsoft KB](http://support.microsoft.com/kb/251359)了解详细信息。

您可以收到 LDAP 参考结果的原因有很多。一个常见的原因是父域下有一些子域，而您正试图从父域开始进行子树搜索。

来自父域的域控制器无法为您的查询提供完整的答案，因为某些目录分区正在由子域的域控制器处理。因此，它会返回一些`Subordinate References`. 它提示客户遵循参考并获得完整的结果。有关参考结果的完整列表，您可以[在此处查看](http://technet.microsoft.com/en-us/library/cc978014.aspx)

如果我正确理解了您的问题，您将运行基于 的 LDAP 查询，`userPrincipalName`并且已经从父域返回了一个条目。您是在询问是否应该停止查询，或者您应该遵循参考并继续查询。我想说您应该始终遵循参考并继续查询。如果您发现多个用户对象具有相同的`userPrincipalName`，您可能希望正确处理该案例。例如，就像 Windows 所做的那样，阻止用户登录或在某处发出警告消息。

# jquery - 如何将 Sqlalchemy 结果返回为 JSON？

> ID：11468816
> 
> 赞同：2
> 
> 时间：2012-07-13T10:35:43.323
> 
> 标签：jquery, python, sqlalchemy, pylons

Sqlalchemy 结果可以有 0 到多条记录。

结果是：

```
record = meta.Session.query(model.EmpsTable).filter(model.EmpsTable
         .firstname.like(searchQuery)) 
```

如果只有一条记录要返回，我会这样做：

```
return {'file_id':record.file_id, 'filename':
         record.filename, 'links_to' :record.url} 
```

我可以像这样在终端上打印记录：

```
for r in record:
    print r.file_id 
```

但在这种情况下，我需要将这些多条记录作为 JSON 回复发送到 JQuery ajax。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T10:40:38.973

首先，不要调用`record`查询、集合、检测序列/其他对象......然后你可以得到一个字典列表。

```
qry = meta.Session.query(model.EmpsTable).filter(model.EmpsTable
         .firstname.like(searchQuery))

return {'data': [
         {'file_id':record.file_id, 'filename':
            record.filename, 'links_to' :record.url}
        for record in qry
       ]} 
```

要将返回的对象转换为 JSON，您可能已经为此修饰了您的方法，或者只是在其上调用 json.dumps()。

[更新：出于安全原因，正如@MrGhimire](http://flask.pocoo.org/docs/security/#json-security)所指出的，最好将列表包装在字典中。

# http - node.js 0.8 中没有日期响应标头

> ID：11468823
> 
> 赞同：0
> 
> 时间：2012-07-13T10:36:38.867
> 
> 标签：http, node.js

根据[文档](http://nodejs.org/api/http.html#http_response_senddate)，默认情况下应发送 Date 响应标头。

```
var http = require('http');
http.createServer(function (req, res) {
  res.writeHead(200, {'Content-Type': 'text/plain'});
  res.end('Hello World\n');
}).listen(1337, '127.0.0.1');
console.log('Server running at http://127.0.0.1:1337/'); 
```

卷曲上面的示例我得到：

```
C:\Users\Hans>curl localhost:1337 -i
HTTP/1.1 200 OK
Content-Type: text/plain
Connection: keep-alive
Transfer-Encoding: chunked

Hello World 
```

没有日期标题。即使我设置了，`response.sendDate = true`我也没有得到 Date 标题。怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T10:54:12.977

从 0.8.1 升级到 0.8.2 现在可以使用了

```
C:\Users\Hans>curl localhost:1337 -i
HTTP/1.1 200 OK
Content-Type: text/plain
Date: Fri, 13 Jul 2012 10:52:59 GMT
Connection: keep-alive
Transfer-Encoding: chunked

Hello World 
```

# c++ - QtWebkit 是否需要从需要登录的网站获取数据？

> ID：11468827
> 
> 赞同：1
> 
> 时间：2012-07-13T10:36:49.200
> 
> 标签：c++, qt, qtwebkit, qtnetwork

正如标题所暗示的，

我需要从某些需要登录才能使用的网站获取数据。

登录过程可能需要 cookie 或会话。

我需要 QtWebkit，还是只使用 QNetworkAccessManager 就可以了？

我在这两方面都没有经验，我会边走边学。所以请节省我比较两者的时间^^

先感谢您，

埃文

编辑：阅读了一些相关答案后，我将添加一些说明：

相关网站没有 API。所以我需要自己为数据抓取网络元素。我可以只用 QNetworkAccessManager 做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T12:14:57.990

No, in most cases you don't need a full simulated web browser. In most cases, just performing the same web requests like a web browser would do is enough.

Try to record the web requests in your browser, using a plugin like "HTTP Live Headers" or "Firebug" in Firefox. I think Chrome provides a similar tool out of the box. These tools record the GET and POST requests done by the website when you send a form in the webpage.

Another option is to inspect the HTML code of the login page. Find the `<form>` tag and its fields. Put them together in a GET / POST request in your application to simulate the same form.

Remember that some pages use randomized "tokens" in their forms, some set the tokens as cookies. In such cases, you need to request the login page itself in your application first (before sending the filled in form). Both QWebView and QNetworkAccessManager have cookie support.

To sum things up, I think QWebView provides a far more elegant way to simulate user interaction with a web page. The manual way is, however, more "lightweight", as you don't need Webkit and your application might be faster (because only the HTML page is loaded, without any linked resources like images, CSS, javascript files).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T12:14:49.680

QWebView as class name states is a view, so it views something (in this case web pages). If you don't need to display loaded page, then you don't need a view. QNetworkAccessManager may do the work, but you need some knowledge about HTTP protocol, and also anything about target site: how does it hande logins, what type of request you have to send to login etc.

# c++ - 提升图的遍历显示“隐藏”节点

> ID：11468837
> 
> 赞同：4
> 
> 时间：2012-07-13T10:37:27.020
> 
> 标签：c++, boost, graph

我开始尝试增强图形类。为此，我创建了一个简单的示例，如下所示。通过深度优先搜索算法遍历图形时，我没有添加一个节点。这是代码：

```
#include <boost\graph\adjacency_list.hpp>
#include <boost\graph\depth_first_search.hpp>
#include <iostream>

typedef boost::adjacency_list<boost::listS, boost::vecS, boost::undirectedS> GraphType;
typedef boost::graph_traits<GraphType>::vertex_descriptor VertexType;

class VertexVisitor : public boost::default_dfs_visitor
{
public:
  void discover_vertex(VertexType v, GraphType g)
  {
    std::cout << v << std::endl;
  }
};

int main() 
{ 
  GraphType g;
  boost::add_edge(1,2,g);
  boost::add_edge(1,3,g);
  boost::add_edge(2,3,g);
  boost::add_edge(1,4,g);
  boost::add_edge(4,5,g);

  VertexVisitor vis;
  boost::depth_first_search(g, boost::visitor(vis));

  return 0;
} 
```

这个的输出是

```
0
1
2
3
4
5 
```

但是 0 来自哪里，我从来没有添加它？这是某种虚拟节点吗？但如果是这样，为什么在遍历时访问它，我怎样才能实现所需的行为？

**编辑 1：**在尝试了 PlasmaHH 的建议并通过我发现的 boost 代码进行调试之后， boost::add_edge 调用了图形顶点结构的调整大小。因此，搜索算法会添加和访问更多元素，尽管它们彼此没有连接。顺便说一句：我正在使用 boost 1.47。

**编辑2：**它表明，`depth_first_search`行为（除了它的本机差异）与-算法不同`breadth_first_search`，因为DFS遍历图中的所有节点，即使它们没有连接。我看不到这样做的好处，因为我只想找到从一个节点到另一个节点的路径，它连接到这个节点，但是没关系。如前所述，我的问题的解决方案是使用 BFS 算法，它不会遍历所有子图。对于那些感兴趣的人，我添加一个小例子：

```
#include <boost\graph\adjacency_list.hpp>
#include <boost\graph\depth_first_search.hpp>
#include <boost\graph\breadth_first_search.hpp>
#include <iostream>

typedef boost::adjacency_list<boost::listS, boost::vecS, boost::undirectedS>  GraphType;
typedef boost::graph_traits<GraphType>::vertex_descriptor VertexType;

class DFSVertexVisitor : public boost::default_dfs_visitor
{
public:
  void discover_vertex(GraphType::vertex_descriptor v, GraphType g)
  {
    std::cout << v << std::endl;
  }
};

class BFSVertexVisitor : public boost::default_bfs_visitor
{
public:
  void discover_vertex(GraphType::vertex_descriptor v, GraphType g)
  {
    std::cout << v << std::endl;
  }
};

int main(int argc, char *argv[])
{
  GraphType g;
  boost::add_edge(1, 2, g);
  boost::add_edge(2, 3, g);
  boost::add_edge(1, 3, g);
  boost::add_edge(4, 5, g);

  std::cout << "Performing BFS" << std::endl;
  BFSVertexVisitor bfsVisitor;
  boost::breadth_first_search(g, boost::vertex(1, g), boost::visitor(bfsVisitor));

  std::cout << "Performing DFS" << std::endl;
  DFSVertexVisitor dfsVisitor;
  boost::depth_first_search(g, boost::visitor(dfsVisitor).root_vertex(1));

  return 0;
} 
```

请注意，节点 4 和 5 未连接到节点 1、2 和 3！

输出：

```
Performing BFS
1
2
3
Performing DFS
1
2
3
0
4
5 
```

**编辑3：**我不得不重新考虑。我连接的数字`add_edge`不是节点本身，而只是它们的索引，如 nm 刚刚建议的那样。因此，仅添加边并不是我认为的最终解决方案，因为删除其中一个顶点不能按预期工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T15:01:46.647

从文档中：

> 如果图的 VertexList 是 vecS，则图具有通过 vertex_index_t 属性的属性映射访问的内置顶点索引。索引在 [0, num_vertices(g)) 范围内并且是连续的。当一个顶点被删除时，索引会被调整，以便它们保留这些属性。

我不认为文档明确说明这`vertex_descriptor`只是索引。文档中的一些示例表明情况确实如此。其他示例被`vertex_descriptor`视为黑匣子。

# watir - Watir/Cucumber 中的转义字符问题

> ID：11468838
> 
> 赞同：2
> 
> 时间：2012-07-13T10:37:39.740
> 
> 标签：watir

希望有人可以帮助我解决我在 Cucumber/Watir 中遇到的转义字符问题。

我有自动化测试设置。当我执行搜索时，我用来验证搜索是否返回正确结果的断言之一是检查页面中的文本。所以我的代码如下所示：

```
Then /^I should see the following text: "([^"]*)"$/ do |str|
  assert @browser.text.include?(str)
end 
```

这里我传入要在字符串变量中搜索的文本。例如耐克、锐步等

所以在我的功能文件中，步骤是这样的：

```
Then  I should see the following text "search results for nike" 
```

除了 1 个问题外，这工作正常。我正在测试的 1 个网站已决定将搜索词放在双引号中，即 - “nike”的搜索结果

结果，这搞砸了我的测试，因为我需要将引号作为搜索词的一部分。因此，我需要将 nike 一词放在转义引号中，否则 cucumber 会将 nike 一词周围的第一个引号识别为结束引号。（因为它之前已经有一个双引号）

我尝试了各种不同的转义字符，但似乎没有任何效果。例如，我尝试了以下方法：

```
\" – double quote
\\ – single backslash 
```

有没有人遇到过类似的问题，如果有，你是如何克服这个问题的？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T11:21:35.920

您需要更改正则表达式而不是字符串。

**问题：**您当前的正则表达式表示`"([^"]*)"`，它表示匹配引号之间的所有字符，而不是引号。考虑到您要包含引号，这并不好。

**解决方案：**将步骤更改为以下内容：

```
Then /^I should see the following text: "(.*?)"$/ do |str|
  assert @browser.text.include?(str)
end 
```

`.*`表示匹配引号之间的所有*字符。*这`?`使搜索变得懒惰（而不是贪婪）。在这种情况下，这`?`是可选的，但如果要捕获其他参数，这将很重要。[在http://www.regular-expressions.info/repeat.html](http://www.regular-expressions.info/repeat.html)可以看到贪婪与懒惰的一个很好的解释。

# c# - 从 .cs 文件中提取注释

> ID：11468839
> 
> 赞同：0
> 
> 时间：2012-07-13T10:37:48.540
> 
> 标签：c#, regex

是否可以使用正则表达式*仅从*C# 文件中提取注释？

如果是这样，你会怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T10:43:58.693

[请参考：-> 使用正则表达式在源代码中查找注释](http://ostermiller.org/findcomment.html)

阅读文章后，您的最终 RegEx 将是。

```
(/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*+/)|(//.*) 
```

对于 C#

```
^/[/|*](.+)$ (for single line comment )
(^\/\/.*?$|\/\*.*?\*\/) (for multilne comments) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T11:49:56.377

此 Regex 查找 C# 文件中的所有注释。

```
(((?<=//).+(?=\n))|((?<=/*)[^(\*/)]+(?=\*/)))+ 
```

# android - PhoneGap android：键盘与输入字段重叠

> ID：11468842
> 
> 赞同：6
> 
> 时间：2012-07-13T10:38:02.560
> 
> 标签：android, cordova

我在 webview 中有一个输入字段，当单击输入时，会显示键盘，但它会出现在输入字段上。我尝试放入`windowSoftInputMode="adjustPan"`androidManifest 但仍然相同。在设备的浏览器中打开相同的 html 页面时，一切正常。有任何想法吗 ？

问候

**更新：**

它没有 XML 布局，因为我使用 Phonegap 框架并且 Activity 扩展了 DroidGap，而且它没有`setContentView(xx.xml)`方法。

```
public class TestActivity  extends DroidGap {

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_ADJUST_RESIZE);
        setIntegerProperty("loadUrlTimeoutValue", 30000);
        super.loadUrl("file:///android_asset/www/index.html");
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T19:22:38.447

我似乎有完全相同的问题并添加

```
android:windowSoftInputMode="adjustPan" 
```

像您一样添加到 AndroidManifest.xml 文件。这不起作用，最后有人指出使用

```
android:windowSoftInputMode="adjustResize" 
```

反而。这现在对我有用。adjustPan 似乎更有意义，而 adjustResize 听起来是错误的，但它确实有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-08T14:24:39.230

在 phonegap 中有特定设备的偏好。请参阅此页面上的配置：[https://build.phonegap.com/docs/config-xml](https://build.phonegap.com/docs/config-xml)而对 config.xml 进行更改的解决方案是：

```
preference name="android-windowSoftInputMode" value="stateVisible|adjustResize" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-19T16:41:08.123

尝试将首选项全屏更改为 false

```
<preference name="fullscreen" value="false" /> 
```

我试过了，成功了！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-05-08T13:07:52.610

结合上面的答案，它对我有用：

```
<preference name="android-windowSoftInputMode" value="stateVisible|adjustResize"/> 
```

和：

```
<preference name="fullscreen" value="false"/> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-07T13:52:21.537

嗨，您可以使用 js 和 css 代码来完成。那对我有用。

JS：

```
$("form input,textarea,select").focusin(function (){

    $(".scrollablefield").animate({
        scrollTop: $(this).offset().top
    }, 600);
  }); 
```

CSS：

```
form{
    padding-bottom: 300px;
} 
```

# sql - 为什么要使用相同的表别名并进行 SELF JOIN

> ID：11468846
> 
> 赞同：1
> 
> 时间：2012-07-13T10:38:39.943
> 
> 标签：sql, sql-server, sql-server-2008

我有一个`sql script`与它`one table`一起使用`two alias`并在其上制作的`JOIN`，但我需要了解为什么以及何时需要这样做，请详细说明？

```
SELECT

             ISNULL(MarketValue,0)   
        FROM
            (                  
            SELECT TOP 5

                Delta,
                MarketValue     
            FROM
                (
                SELECT DISTINCT

                   FormatNumber(SUM([CURRENT].MarkToMarket), 0, ',', 0) AS Delta,
                    AVG([CURRENT].Mark) * SUM([CURRENT].Position) AS NumericPosition,
                    FormatNumber(AVG([CURRENT].Mark) * SUM([CURRENT].Position)* CASE WHEN [CURRENT].SecurityType IN ('Equity','Equity Option') THEN 100 ELSE 1 END, 0, ',', NULL)  AS MarketValue
                FROM
                    NAV [CURRENT]
                    LEFT JOIN
                    NAV Compare ON
                    [CURRENT].PurchaseLotId = Compare.PurchaseLotId AND
                    Compare.Date = '2012-06-06'
                WHERE

                    [CURRENT].SecurityType not in ('Equity')
                GROUP BY

                ORDER BY
                    NumericDelta DESC
            ) Movers
        FOR XML PATH ('TR'), TYPE
        ) AS VARCHAR(MAX)
    )

Why it is used like  FROM
                    NAV [CURRENT]
                    LEFT JOIN
                    NAV Compare ON
                    [CURRENT].PurchaseLotId = Compare.PurchaseLotId AND
                    Compare.Date = '2012-06-06' 
```

> NAV 只是一张表，那么取同一张表 NAV [CURRENT] 和 NAV 比较并使用 LEFT JOIN 的两个别名的目的是什么？

请详细说明。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T10:40:27.523

您正在比较表中的 2 条记录

您需要两个不同的别名来表示两个不同的记录。

例如，如果您有一个名为Employees 的表： (Id, Name, ManagerId) 其中ManagerId 是员工的直属经理的ID

```
ID    Name     ManagerId
1      CEO        null
2     YourBoss      1
3      You          2 
```

你想运行一个查询来选择你和你老板的名字：

```
SELECT emp.Name, mgr.Name
FROM Employees emp INNER JOIN Employees mgr on emp.ManagerId = mgr.Id
WHERE emp.Id = 3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T10:43:57.913

NAV 正在与自身连接，因此 nav 中的每一列实际上都有两个实例。Current 和 compare 用于区分它们。

# java - 获取文件图标会使JPanels 消失？

> ID：11468847
> 
> 赞同：-1
> 
> 时间：2012-07-13T10:38:41.507
> 
> 标签：java, swing, filesystems, icons, jpanel

所以最近我开始学习一些 Java，我有其他语言的经验（主要是面向 Web 的语言，如 PHP、HTML 等）。所以我从一些小项目开始，喜欢简单的启动器/桌面覆盖。基于`JPanel`和here，它开始出现问题。

我想用我可以固定的应用程序来实现类似于 Windows 7 任务栏的东西。所以我开始四处寻找从exe文件中寻找“提取”图标到Java的方法。在这个站点上找到了一些主题，大多数答案只是[这个站点](http://www.rgagnon.com/javadetails/java-0439.html)的 URL 。

所有这些工作，但问题是，当我调用这些功能（如`getSystemIcon`）时，它会使上面的所有面板（父母）消失。我可以通过重新粉刷将它们全部取回，但是是否有其他解决方案或者我只是做错了什么？

## 代码：

```
import java.awt.Color;
import java.awt.ComponentOrientation;
import java.awt.Dimension;
import java.awt.Graphics;
import java.io.File;
import javax.swing.Icon;
import javax.swing.JPanel;
import javax.swing.filechooser.FileSystemView;

public class Startbar extends JPanel{

private static final long serialVersionUID = 1L;
Config cfg = new Config();
public Startbar() {

    setPreferredSize(new Dimension(cfg.Resx,35));
    setBounds(0,1015,cfg.Resx,35);
    setVisible(true);

    this.setLayout(null);
    StartbarClock clock = new StartbarClock();
    clock.setBounds(cfg.Resx-135,0, 135, 35);
    this.setComponentOrientation(ComponentOrientation.RIGHT_TO_LEFT);

    add(clock);
    AddPins();
}
public void paintComponent(Graphics g) {
    super.paintComponent(g);
    g.setColor(Color.black);
    g.fillRect(0, 0, cfg.Resx, 35);
    repaint();
}
public void AddPins(){
    String filename = "C:/Program Files (x86)/Skype/Phone/Skype.exe";

    Icon ico = FileSystemView.getFileSystemView().getSystemIcon(new File(filename));
    System.out.println(ico.getIconHeight());

    }
} 
```

编辑：在函数中添加 1 秒的超时后，一切正常... wtf ？一些代码：

```
public class Startbar extends JPanel{

        ActionListener listener = new ActionListener(){
              public void actionPerformed(ActionEvent event){
                pin();
              }
        };

        Timer timer = new Timer(1000 ,listener);

        private static final long serialVersionUID = 1L;
        Config cfg = new Config();
        public Startbar() {

            setPreferredSize(new Dimension(cfg.Resx,35));
            setBounds(0,1015,cfg.Resx,35);
            setVisible(true);
            setBackground(Color.black);
            this.setLayout(null);
            StartbarClock clock = new StartbarClock();

            add(clock);

            timer.start();
            //pin();
        }

        public void pin(){
            String filename = "C:/Program Files (x86)/Skype/Phone/Skype.exe";
            FileSystemView view = FileSystemView.getFileSystemView();    
            Icon icon = view.getSystemIcon(new File(filename));
            System.out.println(icon.getIconHeight());
            timer.stop();
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T10:52:04.987

对于您正在尝试做的事情，将 StartBar 的背景设置为黑色，然后您不需要覆盖paintComponet。

不要设置 StartBar 的边界，而是使用 set/getPreferredSize。这将允许父容器有机会计算组件的最佳大小（这可能会解释您的问题）

您应该认真考虑使用布局管理器。

我有两个子面板（内容和任务）。我会将所有应用程序图标放置在内容中，可能使用流布局和时钟作为/在任务中，再次，可能使用流布局。然后我会使用网格包布局或边框布局将它们添加到任务栏面板。

它可能看起来不像，但从长远来看，这会让你的生活变得更加轻松

**更新**

好的，那么请向我解释为什么我的工作原理：

并且看，无需重写paintComponent 或重新绘制视线。

```
public class TaskBarPane extends javax.swing.JPanel {

    /**
     * Creates new form TaskBarPane
     */
    public TaskBarPane() {

        initComponents();

        setPreferredSize(new Dimension(800, 24));

        pinTask(new File("C:/Program Files/BabyCounter/BabyCounter x64.exe"));

    }

    protected void pinTask(File task) {

        pnlContent.add(new TaskPane(task));

    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {

        pnlContent = new javax.swing.JPanel();
        pnlClock = new test.ClockPane();

        setBackground(new java.awt.Color(0, 0, 0));
        setLayout(new java.awt.BorderLayout());

        pnlContent.setOpaque(false);
        java.awt.FlowLayout flowLayout1 = new java.awt.FlowLayout(java.awt.FlowLayout.LEFT);
        flowLayout1.setAlignOnBaseline(true);
        pnlContent.setLayout(flowLayout1);
        add(pnlContent, java.awt.BorderLayout.CENTER);

        pnlClock.setOpaque(false);
        add(pnlClock, java.awt.BorderLayout.EAST);
    }// </editor-fold>
    // Variables declaration - do not modify
    private test.ClockPane pnlClock;
    private javax.swing.JPanel pnlContent;
    // End of variables declaration
} 
```

..

```
public class ClockPane extends javax.swing.JPanel {

    /**
     * Creates new form ClockPane
     */
    public ClockPane() {
        initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {
        java.awt.GridBagConstraints gridBagConstraints;

        jLabel1 = new javax.swing.JLabel();

        setLayout(new java.awt.GridBagLayout());

        jLabel1.setForeground(new java.awt.Color(255, 255, 255));
        jLabel1.setText("Hello World");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 100;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.LINE_END;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(8, 8, 8, 8);
        add(jLabel1, gridBagConstraints);
    }// </editor-fold>
    // Variables declaration - do not modify
    private javax.swing.JLabel jLabel1;
    // End of variables declaration
} 
```

..

```
public class TaskPane extends javax.swing.JPanel {

    /**
     * Creates new form TaskPane
     */
    public TaskPane() {
        initComponents();
    }

    public TaskPane(File task) {

        this();

        Icon ico = FileSystemView.getFileSystemView().getSystemIcon(task);
        lblIcon.setIcon(ico);

    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {

        lblIcon = new javax.swing.JLabel();

        setOpaque(false);
        setLayout(new java.awt.GridBagLayout());

        lblIcon.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        lblIcon.setHorizontalTextPosition(javax.swing.SwingConstants.CENTER);
        lblIcon.setVerticalTextPosition(javax.swing.SwingConstants.BOTTOM);
        add(lblIcon, new java.awt.GridBagConstraints());
    }// </editor-fold>
    // Variables declaration - do not modify
    private javax.swing.JLabel lblIcon;
    // End of variables declaration
} 
```

...

```
public class TestFrame extends javax.swing.JFrame {

    /**
     * Creates new form TestFrame
     */
    public TestFrame() {
        initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {

        pnlTaskBar = new test.TaskBarPane();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        getContentPane().add(pnlTaskBar, java.awt.BorderLayout.CENTER);

        pack();
    }// </editor-fold>

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /*
         * Set the Nimbus look and feel
         */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /*
         * If Nimbus (introduced in Java SE 6) is not available, stay with the
         * default look and feel. For details see
         * http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html
         */
        try {

            UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());

        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(TestFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(TestFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(TestFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(TestFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /*
         * Create and display the form
         */
        java.awt.EventQueue.invokeLater(new Runnable() {

            public void run() {
                new TestFrame().setVisible(true);
            }
        });
    }
    // Variables declaration - do not modify
    private test.TaskBarPane pnlTaskBar;
    // End of variables declaration
} 
```

我花了 10 分钟才完成（不得不喂我 11 周大的女儿，对不起）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T12:18:54.727

我将 System.out.println("inRepaint") 添加到您的 paintComponent 方法中并运行代码...

```
16
inRepaint
inRepaint
inRepaint
inRepaint
inRepaint
inRepaint
inRepaint
inRepaint
inRepaint
inRepaint
inRepaint
inRepaint
inRepaint
inRepaint
... 
```

在我杀死它之前，我的 CPU 使用率上升到了 85%。

当我把它拿出来时，当我用大约 7% 的 cpu 调整窗口大小时，我得到了 4-5，然后它又回到了 1%

所以，是的，你的代码坏了。

# iphone - 在我的 iPhone 中哪里可以找到我的数据库？

> ID：11468856
> 
> 赞同：0
> 
> 时间：2012-07-13T10:39:16.233
> 
> 标签：iphone, ios, sqlite

我的应用程序有问题。在我正在测试的更新中，我正在修改数据库，将一列添加到表中。在模拟器中一切正常，但是当我在我的 iPhone 中运行应用程序时，当它到达新列所在的查询时，它完全跳过了 while(sqlite3_step(stmt) == SQLITE_ROW) 并且不返回任何行我的桌面视图。

我想检查我 iPhone 中的数据库是否已正确更新，但我不知道在哪里可以找到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T11:52:53.630

如果您想找到数据库，请在您的设备上按照以下步骤操作

1.转到你的x代码的组织窗口。

2.您可以在顶部栏中找到一个选项名称作为设备。

3.单击设备，您连接的设备有绿色按钮侧。

4.单击您的设备，转到应用程序，在那里您可以看到一个文件夹作为文档。在您的数据库所在的文件夹上。下载您的数据库并进行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T10:56:39.170

那么数据库的确切位置取决于你把它放在哪里。但是，使用模拟器时，所有应用程序文件都存储在此文件夹中，所以它会在这里的某个地方 -

~/图书馆/应用程序支持/iPhone模拟器/

您可以通过从 OSX 的菜单栏中转到“Go”，然后“Go To Folder”来访问它

# java - 如何确保所有线程在主线程结束之前结束？

> ID：11468863
> 
> 赞同：2
> 
> 时间：2012-07-13T10:39:42.870
> 
> 标签：java, multithreading

我有以下一段代码来使用 java 多线程。

```
 ExecutorService threadExecutor = Executors.newFixedThreadPool(10);

    while(resultSet.next()) 
       { 
          name=resultSet.getString("hName");
          MyRunnable worker = new  Myrunnable(name);
          threadExecutor.execute( worker );
          Counter++;
    }

 threadExecutor.shutdown();
 System.out.println("thread shutdown");

 // Wait until all threads are finish
 while (! threadExecutor.isTerminated()) {

 }

 System.out.println("Finished all threads");

}// end try
    catch (Exception e) {
        e.printStackTrace();
    }

    System.out.println("END MAIN");

    DBConnection.con.close(); 
```

并且运行函数如下：

```
//The constructor
MyRunnable (String name)  {
        this.name=name;
    }

public void run() 
{
        myclass Obj=new myclass();
        try {
            Obj.myFunction(name);
        } catch (Exception e) {

            System.out.println("Got an Exception: "+e.getMessage());
        }
        System.out.println(" thread exiting.");
} 
```

在之前的帖子中，有人建议使用以下代码来等待线程结束。

```
while (! threadExecutor.isTerminated()) {
   try {
       threadExecutor.awaitTermination(1, TimeUnit.SECOND);
   }
   catch (InterruptedException e) {
        // you have to determine if someone can interrupt your wait
        // for the full termination of the executor, but most likely,
        // you'll do nothing here and swallow the exception, or rethrow
        // it in a RuntimeException
   }
} 
```

现在，我在这两种情况下都面临问题。如果我使用第一种方法，我的程序会运行，但最后它会进入一个无限循环，然后所有线程都退出。END MAIN 打印输出永远不会出现。如果我使用第二种方法，我从运行程序开始就收到以下错误，并且 END MAIN 打印输出也永远不会出现：

> 出现异常：连接关闭后不允许进行任何操作。线程退出。

请以正确的方式告诉我，在我的所有子线程退出后让我的主线程退出。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T12:19:44.930

首先，为什么所有忙于旋转？最节省 CPU 的方法是只放一个非常 loooong `awaitTermination`：

```
threadExecutor.shutdown();
threadExecutor.awaitTermination(Long.MAX_VALUE, TimeUnit.DAYS); 
```

至于池未终止的原因，很可能是因为您的线程任务未正确终止。

# iphone - 使用 Web 服务的 AFNetworking 身份验证

> ID：11468869
> 
> 赞同：4
> 
> 时间：2012-07-13T10:40:22.297
> 
> 标签：iphone, ios, cocoa-touch, afnetworking

有一个比代码更多的是设计考虑的问题。

我的 iOS 应用程序与 json Web 服务接口。我正在使用 AFNetworking，我的问题基本上是我需要 init 函数（它验证 AFHTTPClient 并检索令牌）在我发出任何其他请求（需要所述令牌）之前完全完成。

从下面的代码中，我有兴趣了解实现这一目标的设计方法，我更愿意让所有请求保持异步，另一种解决方案是使 initWithHost:port:user:pass 中的请求同步（不使用 AFNetworking），我我知道这是不好的做法，并希望避免。

DCWebServiceManager.h

```
#import <Foundation/Foundation.h>
#import "AFHTTPClient.h"

@interface DCWebServiceManager : NSObject
{
    NSString *hostServer;
    NSString *hostPort;
    NSString *hostUser;
    NSString *hostPass;
    NSString *hostToken;
    AFHTTPClient *httpClient;
}

// Designated Initialiser
- (id)initWithHost:(NSString *)host port:(NSString *)port user:(NSString *)user pass:(NSString *)pass;

// Instance Methods
- (void)getFileList;
@end 
```

DCWebServiceManager.m

```
#import "DCWebServiceManager.h"
#import "AFHTTPClient.h"
#import "AFHTTPRequestOperation.h"
#import "AFJSONRequestOperation.h"

@implementation DCWebServiceManager

- (id)initWithHost:(NSString *)host port:(NSString *)port user:(NSString *)user pass:(NSString *)pass
{
    self = [super init];
    if (self)
    {
        hostServer = host;
        hostPort = port;
        hostUser = user;
        hostPass = pass;

        NSString *apiPath = [NSString stringWithFormat:@"http://%@:%@/", hostServer, hostPort];

        httpClient = [[AFHTTPClient alloc] initWithBaseURL:[NSURL URLWithString:apiPath]];
        [httpClient setAuthorizationHeaderWithUsername:hostUser password:hostPass];

        NSMutableURLRequest *request = [httpClient requestWithMethod:@"GET" path:@"authenticate.php" parameters:nil];
        AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];

        [operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject){

        // Do operations to parse request token to be used in
        // all requests going forward...
        // ...
        // ...
        // Results in setting: hostToken = '<PARSED_TOKEN>'        
            NSLog(@"HostToken: >>%@<<",  hostToken);

        } failure:^(AFHTTPRequestOperation *operation, NSError *error){
            NSLog(@"ERROR: %@",  operation.responseString);
        }];

        [operation start];
    }

    return self;
}

- (void)getFileList
{
    // *************************
    // The issue is here, getFileList gets called before the hostToken is retrieved..
    // Make the authenticate request in initWithHost:port:user:pass a synchronous request perhaps??
    // *************************
    NSLog(@"IN GETFILELIST: %@", hostToken); // Results in host token being nil!!!

    NSString *queryString = [NSString stringWithFormat:@"?list&token=%s", hostToken];
    NSMutableURLRequest *listRequest = [httpClient requestWithMethod:@"GET" path:queryString parameters:nil];

    AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:listRequest success:^(NSURLRequest *request,    NSHTTPURLResponse *response, id JSON){
        NSLog(@"SUCCESS!");
    } failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON){
        NSLog(@"ERROR!: %@", error);
    }];

    [operation start];
}
@end 
```

视图控制器.m

```
....
DCWebServiceManager *manager = [[DCWebServiceManager alloc] initWithHost:@"localhost" port:@"23312" user:@"FOO" pass:@"BAR"];
[manager getFileList];

// OUTPUTS
IN GETFILELIST: (nil)
HostToken: >>sdf5fdsfs46a6cawca6<<
....
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T13:34:32.587

我建议继承 AFHTTPClient 并`+sharedInstance`为令牌添加一个 and 属性。

```
+ (MyGClient *)sharedInstanceWithHost:(NSString *)host port:(NSString *)port user:(NSString *)user pass:(NSString *)pass {
    static MyClient *sharedInstance;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        [... your code from the init ...]
    });
    return sharedInstance;
} 
```

然后，您可以在对进一步操作进行排队之前覆盖`enqueueHTTPRequestOperationWithRequest:success:failure`以检查令牌。

此外，您可以通过覆盖属性的设置器来收集操作并在设置令牌后立即将它们排入队列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T22:21:57.997

就像@patric.schenke 所说，`AFHTTPClient`如果你想清理一些代码，你可以子类化，但真正的问题是你需要在向`getFileList`.

我建议以与`AFNetworking`使用块保持异步相同的方式使用块。将您的 HTTP 调用移动到它自己的方法中，并且仅在您`hostToken`为 nil 时调用它：

```
- (void)getFileList
{
  if (self.token == nil) {
    [self updateTokenThenWhenComplete:^(void){
      // make HTTP call to get file list
    }];
  } else {
    // make HTTP call to get file list
  }
}

- (void)updateTokenThenWhenComplete:(void (^))callback
{
  //... make HTTP request
  [operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject){
      self.token = responseObject.token;
      callback();
    } failure:^(AFHTTPRequestOperation *operation, NSError *error){
        //...
    }];

} 
```

# javascript - 有没有办法使用 javascript 将原始 html 添加为新表行？

> ID：11468870
> 
> 赞同：0
> 
> 时间：2012-07-13T10:40:22.513
> 
> 标签：javascript, html, html-table, yui

假设我有下表：

```
<table>
  <tr id="1">...</tr>
  <tr id="2">..</tr>
  ...
  <tr id="last">..</tr>
</table> 
```

我还有一个第三方服务，我可以从中获得一些**原始的 html**，还有这样的表格行：

```
<tr id="additional-1">...</tr>
<tr id="additional2">...</tr> 
```

是否有一种相对简单的javascript方法可以在id为“last”的tr之后插入这些新行？

我要求使用简单的内置方法来避免进行大量解析、替换和其他操作。

我更喜欢 YUI 3 到 jQuery 解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T10:43:23.460

存储表对象并`table.innerHTML += trs`存储附加行是什么意思。`var table``var trs`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T10:47:18.753

以下代码应该可以工作

```
$("tr #last").after("ur raw html"); 
```

它的 Jquery 虽然。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-13T10:49:20.623

将字符串包裹在`<table><tbody>..rows here...</tbody></table>`. 然后，创建一个虚拟元素，例如`<div>`，并将`innerHTML`属性设置为先前构造的字符串。最后，遍历所有行，并使用 . 将行移动到表中`insertBefore(newelem, reference)`。
此方法也适用于 IE，其中`innerHTML`在单元格上设置属性会触发错误。

```
var raw_html, prev_element, last_element_parent, rows, i;
raw_html = '<tr>....etc....</tr>';
prev_element = document.getElementById('last_element');
last_element_parent = prev_element.parentNode;

dummy = document.createElement('div');
dummy.innerHTML = '<table><tbody>' + raw_html + '</tbody></table>';
rows = dummy.firstChild.rows;

for (i=rows.length-1; i>=0; i--) {
    last_element_parent.insertBefore(rows[i], prev_element.nextSibling);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-13T13:38:28.863

在 YUI3 中你可以这样做：

```
Y.one('#last').insert(rawHTML, 'after'); 
```

# r - 使用glmulti拟合准家庭？

> ID：11468874
> 
> 赞同：2
> 
> 时间：2012-07-13T10:40:29.037
> 
> 标签：r, glm, glmulti

我使用包中的`glmulti`函数`glmulti`来获得泊松误差分布数据的最佳 glm 模型。那里没有问题。一旦我获得了最佳模型，我就使用卡方检验来获得 p 值并测试输入到模型中的每个变量的统计数据。我遇到的唯一问题是数据过度分散，Zuur book 和 Crawley 都建议使用准族函数来纠正过度分散。这本身不是问题，只是 glmulti 函数不允许拟合准函数。

我的问题是，使用具有泊松误差分布的 glmulti 获得我的最佳模型，然后将最佳模型输出拟合到准函数是否是做事的不正确方法，以及是否有任何其他人可以提供的建议。

我还为正态分布的数据运行了 glmulti（将家庭指定为高斯，将链接指定为身份），这确实有效，但如果我违反了任何主要规则，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-04-13T15:30:54.853

建议的另一个答案的问题是“ `qaic`”似乎在`glmulti`. 对我来说，这虽然有效：

```
library(bbmle)
qaicmod = function (fit) qAIC(fit, dispersion=with(fit,sum((weights * residuals^2)[weights > 0])/df.residual) ) 

glmulti.out <- glmulti(XXX model formula XXX, 
  data = mydata,crit = "qaicmod", 
   confsetsize = 5, fitfunction = "glm", 
   family = poisson) 
```

这使用常规泊松 GLM，但根据估计的色散系数计算 QAIC。在 qaicmod 函数的色散参数中，您还可以放置包含所有变量的完整准泊松 GLM 的估计色散系数（我见过的一些统计数据推荐这个），即使用

```
disp <<- summary(fullmodel)$dispersion
qaicmod = function (fit) qAIC(fit, dispersion=disp) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T17:06:17.160

glmulti 确实允许误差分布中的准族。

在您的情况下，您应该简单地使用附加参数 family=quasipoisson 调用 glmulti （它将传递给拟合函数 glm）。

请注意，对于这种类型的模型，您使用的是准似然，因此不推荐使用 AIC 或 BIC。您应该使用后者的准等效项（QAIC 或 QBIC）。这是通过将参数 crit 设置为“qaic”（例如）来实现的。您必须提供过度分散因子的估计值，通常来自饱和模型（有关更多信息，请参阅文档；或向软件包作者寻求帮助）。

否则，对于使用多模型比较与这种类型的模型没有具体的反指示。

最好的

# c - C中的字数，学习更多CS

> ID：11468876
> 
> 赞同：0
> 
> 时间：2012-07-13T10:40:36.680
> 
> 标签：c, algorithm, pointers, malloc, information-retrieval

在使用 Python 和 JS 等动态语言进行了大约 5 年的编程之后，我开始觉得我错过了幕后发生的事情。像这样的语言真的很棒，因为它们让你专注于你必须做的事情，利用指针、内存分配和许多搜索、排序、插入算法的麻烦。尽管我从不后悔使用这些语言，因为我真的觉得它们非常强大，但我觉得，为了成为一个更好的程序员，我需要退后一步，了解幕后发生的事情！

我决定通过编写一个简单的单词计数器来做到这一点：该应用程序获取所有参数并输出所有唯一单词，每个单词都有一个计数器：“Hello world Hello”将返回“Hello：2”，“world：1”（不考虑实际的输出结构）。这个程序是 Python 的等价物：

```
import sys
from collections import defaultdict

def main():
    results = defaultdict(int)
    for word in sys.argv[1:]:
        results[word] += 1
    print results 
```

用 C 语言编写它有点不同，我觉得我对指针、指针数组和所有这些东西都搞错了！我想变得更好，帮助我变得更好！！

```
#include <stdio.h>
#include <stdlib.h>

// This is what a key-value pair: <int, string>
typedef struct {
    int counter;
    unsigned char* word;
} hashmap;

// Checks if inside the array of results, hashmap->word is equals to word paramter
hashmap* get_word_from_results(hashmap* results[], int count, const char* word) {
    int i;
    hashmap* result;
    for (i = 0; i < count; i++) {
        result = results[i];
        if (result->word == (unsigned char *)word)
            return result;
    }
    return NULL;
}

int main(int argc, const char *argv[])
{
    hashmap* results;
    int results_counter = 0;

    int i;
    const char* word;
    for (i = 1; i < argc; i++) {
        word = argv[i];
        hashmap* result = get_word_from_results(&results, results_counter, word);
        // If result is NULL, means word is not inserted yet, let's create a new hashmap and insert it inside the array
        if (result == NULL) {
            hashmap h;
            h.counter = 1;
            h.word = (unsigned char *)word;

            results = realloc(NULL, (results_counter + 1) * sizeof(hashmap) );
            // NOTE: potential memory leak? would h be deallocated?
            results[results_counter] = h;
            results_counter++;
            printf("NEW\n");
        } else {
            // The word already exists in the hashmap array, let's increase it by 1
            result->counter++;
            printf("INCREMENTED\n");
        }
    }   
    return 0;
} 
```

谁能给我一些建议？我在这里做错了什么？我的指针还好吗？我还想我发现了内存泄漏（见评论），有人愿意提交他们的版本吗？

谢谢！！你们太酷了！！

丹尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T10:49:50.233

程序中的主要指针问题是当第一次`hashmap* results`传递给`realloc`时，它的值是未初始化的。这是未定义的行为。您应该初始化指向 的指针`NULL`，如下所示：

```
hashmap* results = NULL; 
```

另一个问题是比较字符串：您需要使用`strcmp`而不是`==`. 请记住，`strcmp`当字符串相等时返回零。

程序结束时也存在内存泄漏。您应该 free `results`，以及存储在其元素中的单词。

当然，您调用的东西的`hashmap`行为就像动态数组一样。然而，用 C 语言编写哈希表会带来不同程度的挑战，因此我鼓励您使用当前的方法。

# tomcat - 外部化 Tomcat 配置

> ID：11468881
> 
> 赞同：18
> 
> 时间：2012-07-13T10:40:54.770
> 
> 标签：tomcat

我在 context.xml 中有一个 DataSource 配置。是否可以不在该文件中硬编码数据库参数？例如，使用外部属性文件，并从中加载参数？

像这样的东西：

上下文.xml：

```
 <Resource
  name="jdbc/myDS" auth="Container"
  type="javax.sql.DataSource"
  driverClassName="oracle.jdbc.OracleDriver"
  url="${db.url}"
  username="${db.user}"
  password="${db.pwd}"
  maxActive="2"
  maxIdle="2"
  maxWait="-1"/> 
```

db.properties：

```
db.url=jdbc:oracle:thin:@server:1521:sid
db.user=test
db.pwd=test 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-11-14T08:45:58.433

[如此处](http://tomcat.apache.org/tomcat-7.0-doc/config/systemprops.html#Property_replacements)所述，您可以通过以下方式执行此操作。

1.下载tomcat库获取接口定义，例如定义maven依赖：

```
 <dependency>
        <groupId>org.apache.tomcat</groupId>
        <artifactId>tomcat-coyote</artifactId>
        <version>7.0.47</version>
    </dependency> 
```

2.下一步是通过以下方式创建一个com.mycompany.MyPropertyDecoder：

```
import org.apache.tomcat.util.IntrospectionUtils;
public class MyPropertyDecoder implements IntrospectionUtils.PropertySource  {
    @Override
    public String getProperty(String arg0) {
        //TODO read properties here
        return null;
    }
} 
```

3.将 MyPropertyDecoder.class 放入**tomcat7/lib**文件夹
4.定义 org.apache.tomcat.util.digester。**tomcat7/conf/catalina.properties**中的PROPERTY_SOURCE 属性如下：

```
org.apache.tomcat.util.digester.PROPERTY_SOURCE=com.mycompany.MyPropertyDecoder 
```

5.用属性变量更新你的 context.xml

```
<Resource name="jdbc/TestDB"
           auth="Container"
           type="javax.sql.DataSource"
           username="root"
           password="${db.password}"
           driverClassName="com.mysql.jdbc.Driver"
           url="jdbc:mysql://localhost:3306/mysql?autoReconnect=true"
           ... 
```

6.将**application.properties**文件放在项目/容器中的某个位置 7.
确保**MyPropertyDecoder**正确读取**application.properties**
8.享受！

[PS tc Server](http://static.springsource.com/projects/tc-server/2.0/admin/html/ch04s07.html)也有类似的方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-10-01T17:31:05.463

[使用上下文部署描述符](http://tomcat.apache.org/tomcat-7.0-doc/config/context.html)很容易，如下所示：

```
<Context docBase="${basedir}/src/main/webapp"
         reloadable="true">
    <!-- http://tomcat.apache.org/tomcat-7.0-doc/config/context.html -->
    <Resources className="org.apache.naming.resources.VirtualDirContext"
               extraResourcePaths="/WEB-INF/classes=${basedir}/target/classes,/WEB-INF/lib=${basedir}/target/${project.build.finalName}/WEB-INF/lib"/>
    <Loader className="org.apache.catalina.loader.VirtualWebappLoader"
            virtualClasspath="${basedir}/target/classes;${basedir}/target/${project.build.finalName}/WEB-INF/lib"/>
    <JarScanner scanAllDirectories="true"/>

    <Parameter name="min" value="dev"/>
    <Environment name="app.devel.ldap" value="USER" type="java.lang.String" override="true"/>
    <Environment name="app.devel.permitAll" value="true" type="java.lang.String" override="true"/>
</Context> 
```

有几个地方可以放置这个配置，我认为最好的选择是`$CATALINA_BASE/conf/[enginename]/[hostname]/$APP.xml`

在上面的 XML`Context`中可以保存自定义`Loader` [org.apache.catalina.loader.VirtualWebappLoader](http://tomcat.apache.org/tomcat-7.0-doc/config/loader.html)（在现代 Tomcat 7 中可用，您可以**为每个应用程序添加自己单独的类路径**到您的`.properties`文件），`Parameter`（通过访问`FilterConfig.getServletContext().getInitParameter(name)`）和`Environment`（通过访问`new InitialContext().lookup("java:comp/env").lookup("name")`）

见讨论：

*   [将目录添加到 tomcat 类路径](https://stackoverflow.com/questions/1300780/adding-a-directory-to-tomcat-classpath)
*   [我可以在 Tomcat 中基于每个应用程序创建自定义类路径吗](https://stackoverflow.com/questions/6345793/can-i-create-a-custom-classpath-on-a-per-application-basis-in-tomcat)
*   [如何在Tomcat中读取我的webapp上下文之外的属性文件](https://stackoverflow.com/questions/15318578/how-to-read-a-properties-file-outside-my-webapp-context-in-tomcat)
*   [配置Tomcat使用属性文件加载DB连接信息](https://stackoverflow.com/questions/1380793/configure-tomcat-to-use-properties-file-to-load-db-connection-information)
*   [您是否应该在 server.xml 或 context.xml 中设置数据库连接属性](https://stackoverflow.com/questions/15064260/tomcat-jndi-configuration-best-practice)

**更新** [Tomcat 8 更改](http://tomcat.apache.org/tomcat-8.0-doc/config/context.html) `<Resources>`和`<Loader>`元素的语法，对应的部分现在看起来像：

```
<Resources>
    <PostResources className="org.apache.catalina.webresources.DirResourceSet"
                   webAppMount="/WEB-INF/classes" base="${basedir}/target/classes" />
    <PostResources className="org.apache.catalina.webresources.DirResourceSet"
                   webAppMount="/WEB-INF/lib" base="${basedir}/target/${project.build.finalName}/WEB-INF/lib" />
</Resources> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-13T11:13:37.837

当然，这是可能的。您必须像这样注册[ServletContextListener](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContextListener.html)`web.xml`：

```
<!-- at the beginning of web.xml -->

<listener>
    <listener-class>com.mycompany.servlets.ApplicationListener</listener-class>
</listener> 
```

来源`com.mycompany.servlets.ApplicationListener`：

```
package com.mycompany.servlets;

public class ApplicationListener implements ServletContextListener {

    @Override
    public void contextInitialized(ServletContextEvent servletContextEvent) {
        // this method is invoked once when web-application is deployed (started)

        // reading properties file
        FileInputStream fis = null;
        Properties properties = new Properties();
        try {
            fis = new FileInputStream("path/to/db.properties")    
            properties.load(fis);
        } catch(IOException ex) {
            throw new RuntimeException(ex);
        } finally {
            try {
                if(fis != null) {
                    fis.close();
                }
            } catch(IOException e) {
                throw new RuntimeException(e);
            }
        }

        // creating data source instance
        SomeDataSourceImpl dataSource = new SomeDataSourceImpl();
        dataSource.setJdbcUrl(properties.getProperty("db.url"));
        dataSource.setUser(properties.getProperty("db.user"));
        dataSource.setPassword(properties.getProperty("db.pwd"));

        // storing reference to dataSource in ServletContext attributes map
        // there is only one instance of ServletContext per web-application, which can be accessed from almost anywhere in web application(servlets, filters, listeners etc)
        final ServletContext servletContext = servletContextEvent.getServletContext();
        servletContext.setAttribute("some-data-source-alias", dataSource);
    }

    @Override
    public void contextDestroyed(ServletContextEvent servletContextEvent) {
        // this method is invoked once when web-application is undeployed (stopped) - here one can (should) implement resource cleanup etc
    }

} 
```

然后，在 Web 应用程序代码中的某个地方访问`dataSource`：

```
ServletContext servletContext = ...; // as mentioned above, it should be accessible from almost anywhere
DataSource dataSource = (DataSource) servletContext.getAttribute("some-data-source-alias");
// use dataSource 
```

`SomeDataSourceImpl`是[javax.sql.DataSource](http://docs.oracle.com/javase/6/docs/api/javax/sql/DataSource.html)的一些具体实现。请告知您是否不使用特定`DataSource`的 s（例如用于连接池的[ComboPooledDataSource](http://www.mchange.com/projects/c3p0/apidocs/com/mchange/v2/c3p0/ComboPooledDataSource.html)）并且不知道如何获取它 - 我将发布如何绕过它。

`some-data-source-alias`- 只是属性映射中实例的`String`别名（键） 。好的做法是提供带有包名的别名，例如.`DataSource``ServletContext``com.mycompany.mywebapp.dataSource`

希望这可以帮助...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T01:12:49.997

如果这是 Tomcat 7，您可以编写自己的`org.apache.tomcat.util.IntrospectionUtils.PropertySource`实现读取变量，如 "${...}" in `context.xml`. 您需要将系统属性设置`org.apache.tomcat.util.digester.PROPERTY_SOURCE`为指向您的`PropertySource`实现。

# c# - IIS 下的 MEF 未加载部件

> ID：11468885
> 
> 赞同：0
> 
> 时间：2012-07-13T10:41:23.427
> 
> 标签：c#, .net, mef

我在 iis 下加载 mef 部件时遇到问题。加载方法如下所示：

```
private void LoadPlugins(string path)
{
    var aggregateCatalog = new AggregateCatalog();
    var directoryCatalogExe = new DirectoryCatalog(path, "*.exe");
    aggregateCatalog.Catalogs.Add(directoryCatalogExe);
    var container = new CompositionContainer(aggregateCatalog);
    container.ComposeParts(this);
} 
```

该方法在控制台应用程序或卡西尼中完美运行。在 iis 下，部件数为 0 - 没有错误，事件日志中没有异常，什么都没有......

我完全不知道发生了什么。路径是 100% 正确的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T11:26:28.360

我同意@stakx 评估。我使用不同的方法来创建容器，以使其与环境更加无关。我创建一个界面：

```
/// <summary>
/// Defines the required contract for implementing a composition container factory.
/// </summary>
public interface ICompositionContainerFactory
{
    #region Methods
    /// <summary>
    /// Creates an instance of <see cref="CompositionContainer"/>.
    /// </summary>
    /// <returns>An instance of <see cref="CompositionContainer"/>.</returns>
    CompositionContainer CreateCompositionContainer();
    #endregion
} 
```

使用**默认**实现（适用于控制台应用程序、服务主机）：

```
public class DefaultCompositionContainerFactory : ICompositionContainerFactory
{
    #region Methods
    /// <summary>
    /// Creates an instance of <see cref="CompositionContainer"/>.
    /// </summary>
    /// <returns>
    /// An instance of <see cref="CompositionContainer"/>.
    /// </returns>
    public CompositionContainer CreateCompositionContainer()
    {
        var domain = AppDomain.CurrentDomain;
        string path = domain.BaseDirectory;

        // Use the base directory from where the application is running.
        var catalog = new DirectoryCatalog(path);

        // Create the container.
        var container = new CompositionContainer(catalog);

        return container;
    }
    #endregion
} 
```

以及特定于**Web**的实现：

```
public class WebCompositionContainerFactory : ICompositionContainerFactory
{
    #region Methods
    /// <summary>
    /// Creates an instance of <see cref="CompositionContainer"/>.
    /// </summary>
    /// <returns>
    /// An instance of <see cref="CompositionContainer"/>.
    /// </returns>
    public CompositionContainer CreateCompositionContainer()
    {
        string path = HttpRuntime.BinDirectory;

        // Use the base directory from where the application is running.
        var catalog = new DirectoryCatalog(path);

        // Create the container.
        var container = new CompositionContainer(catalog);

        return container;
    }
    #endregion
} 
```

我通过配置连接起来。

要考虑的另一件事是您将 *.exe 作为目录过滤器传递，您是否在 Web 应用程序中使用可执行程序集？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T11:11:50.260

造成这种情况的一个可能原因是`path`.

例如，您不应该假设当前目录将是您的代码的`"bin"`目录，因此传递`"."`可能是一个坏主意。

如果这是您正在做的事情，请尝试根据以下内容指定路径`Assembly.GetExecutingAssembly().Location`：

```
// using System.IO;
// using System.Reflection;    

string binPath = Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location);
LoadPlugins(binPath); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T11:12:06.970

在控制台应用程序或 cassini 和 IIS 中运行时的区别在于安全上下文。

运行控制台应用程序或 cassini 时，安全上下文是登录用户，即您。

在 IIS 下运行时，安全上下文是应用程序池的标识，默认情况下是 NETWORK SERVICE。

您的 MEF 部件可能位于 NETWORK SERVICE 也无权访问的目录中。

# eclipse - Eclipse 插件，允许在调试时自定义变量/对象视图

> ID：11468886
> 
> 赞同：2
> 
> 时间：2012-07-13T10:41:27.467
> 
> 标签：eclipse, debugging, eclipse-plugin, eclipse-cdt

在使用 C++ 时，我必须处理具有矩阵、链表等对象的程序

调试时变量的 eclipse 默认视图不是很有用。它通常显示指针值，其值仅是数组中的第一个元素。

下面是它在eclipse中的样子： ![eclipse默认变量视图弹出](../Images/04ab0bea7ff999b0f4789d850ebb9016.png)

正如我们所见，矩阵对象具有行和列整数以及一个双 2D 数组。我无法以用户友好的方式查看数组的值。

我的问题是，在eclipse中是否有（使用插件等），通过它我可以为我感兴趣的每个对象/类定义自定义用户界面（弹出窗口）。

例如，当我将鼠标悬停在初始化的矩阵对象上时，我希望有以下（Matlab 的视图）类型的弹出窗口： ![Matlab 弹出查看矩阵对象](../Images/ce804b37662c6d78d907491f580acbd3.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T17:08:23.930

JDT 有一个称为[详细格式化程序](http://wiki.eclipse.org/Debug_FAQ#What_are_detail_formatters.3F)的功能，可以实现这一点。然而， CDT 的相应实现似乎在[第一个原型](https://bugs.eclipse.org/bugs/show_bug.cgi?id=237960)之后就停止了，并且没有进入 Eclipse。

# c# - 修复- DataBinding：“System.Data.DataRowView”不包含名称为的属性

> ID：11468889
> 
> 赞同：1
> 
> 时间：2012-07-13T10:41:41.037
> 
> 标签：c#, asp.net

```
create procedure St_Proc_GetUserReportforCurrentDayTask                  
@userID int                  
as                  
    Begin                  
        set NoCount on;                  
        DECLARE @TODAY DATE                    
        SET @TODAY = CONVERT(VARCHAR(10), GETDATE(), 111)                  
        select  CONVERT(VARCHAR,production.CalendarDate,101) + RIGHT (CONVERT(VARCHAR,production.CalendarDate , 100 ) ,7) as Date,                   
        RegionAndProjectInfo.RegionProjectName as Region ,                  
        County.CountyName as County,                  
        WorkType.WorkTypeName as WorkType,                  
        Task.TaskName as Task,      
        Production.VolumeProcessed as 'Volumes Processed',                  
        Production.TimeSpent as 'Duration(HH:MM)'                  
        from Production                   
        inner join RegionAndProjectInfo                  
        on                  
        RegionAndProjectInfo.RegionProjectID=Production.RegionProjectID                  
        inner join County                  
        on                   
        County.CountyID=Production.CountyID                  
        inner join WorkType                  
        on                  
        WorkType.WorkTypeID=Production.WorkTypeID                  
        inner join Task                  
        on                  
        Task.TaskID=Production.TaskID                  
        where Production.UserID=@userID and CalendarDate >= @TODAY                  
    End 
```

这是我的存储过程，我正在执行此存储过程并将结果保存在数据集中，然后将网格与此数据集绑定。

```
private void BindGridOnPageLoad()
    {
        _production = new EmployeeQuotientCL.Production();
        _userEcode = Convert.ToString(Session["UserID"]);
        int _userID = _production.GetUserIDFromDB(_userEcode);
        dsUserTaskDetails = _production.GetTabularUsertaskDetails(_userID);
        BindGridView(dsUserTaskDetails);
    } 
```

到这里为止，一切都很好。然后我要求在网格视图的页脚中显示 Duration(HH:MM) 总计。我在页面中添加了以下代码：-

```
<div id="gridview">
            <asp:GridView ID="GVUserEnteredDetails" runat="server" ShowFooter="true" CssClass="mGrid"  CellSpacing="2"   onselectedindexchanged="GVUserEnteredDetails_SelectedIndexChanged" onrowdatabound="GridView1_RowDataBound">                  
            </asp:GridView> 
```

```
protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            tp += Convert.ToDecimal(((DataRowView)e.Row.DataItem).Row["[Duration(HH:MM)]"]);
        }
        if (e.Row.RowType == DataControlRowType.Footer)
        {
            e.Row.Cells[0].Text = "Total Hours : ";
            e.Row.Cells[1].Text = tp.ToString("c");
            e.Row.Cells[0].HorizontalAlign = HorizontalAlign.Right;
            e.Row.Cells[1].HorizontalAlign = HorizontalAlign.Right;
            e.Row.Font.Bold = true;

        }
    } 
```

但是当我调试时，我得到了这个错误：-“DataBinding：'System.Data.DataRowView' 不包含名为'Duration'的属性。” 我在做什么错误以及如何解决它？任何建议和帮助都会对我有所帮助。

堆栈跟踪：-

> [ArgumentException: 列 '[Duration(HH:MM)]' 不属于表 Table。] System.Data.DataRow.GetDataColumn(String columnName) +2124943 System.Data.DataRow.get_Item(String columnName) +13 EQ。 Associates.Production.GridView1_RowDataBound(Object sender, GridViewRowEventArgs e) 在 C:\Users\dsingh\Documents\Visual Studio 2010\Projects\EQ\EQ\Associates\Production.aspx.cs:112 System.Web.UI.WebControls.GridView .OnRowDataBound(GridViewRowEventArgs e) +115 System.Web.UI.WebControls.GridView.CreateRow(Int32 rowIndex, Int32 dataSourceIndex, DataControlRowType rowType, DataControlRowState rowState, Boolean dataBind, Object dataItem, DataControlField[] fields, TableRowCollection rows, PagedDataSource pagedDataSource) + 181 System.Web.UI.WebControls.GridView.CreateChildControls（IEnumerable 数据源，布尔数据绑定）+3896 系统。Web.UI.WebControls.CompositeDataBoundControl.PerformDataBinding（IEnumerable 数据）+66 System.Web.UI.WebControls.GridView.PerformDataBinding（IEnumerable 数据）+14 System.Web.UI.WebControls.DataBoundControl.OnDataSourceViewSelectCallback（IEnumerable 数据）+128 系统.Web.UI.DataSourceView.Select(DataSourceSelectArguments 参数，DataSourceViewSelectCallback 回调) +33 System.Web.UI.WebControls.DataBoundControl.PerformSelect() +143 System.Web.UI.WebControls.BaseDataBoundControl.DataBind() +74 System.Web .UI.WebControls.GridView.DataBind() +4 EQ.Associates.Production.BindGridView(DataSet ds) 在 C:\Users\dsingh\Documents\Visual Studio 2010\Projects\EQ\EQ\Associates\Production.aspx.cs :603 EQ.Associates.Production.BindGridOnPageLoad() 在 C:\Users\dsingh\Documents\Visual Studio 2010\Projects\EQ\EQ\Associates\Production.aspx.cs：593 EQ.Associates.Production.Page_Load(Object sender, EventArgs e) 在 C:\Users\dsingh\Documents\Visual Studio 2010\Projects\EQ\EQ\Associates\Production.aspx.cs:78 System.Web.Util。 CalliHelper.EventArgFunctionCaller(IntPtr fp, Object o, Object t, EventArgs e) +14 System.Web.Util.CalliEventHandlerDelegateProxy.Callback(Object sender, EventArgs e) +35 System.Web.UI.Control.OnLoad(EventArgs e) + 91 System.Web.UI.Control.LoadRecursive() +74 System.Web.UI.Page.ProcessRequestMain（布尔includeStagesBeforeAsyncPoint，布尔includeStagesAfterAsyncPoint）+2207CalliEventHandlerDelegateProxy.Callback(Object sender, EventArgs e) +35 System.Web.UI.Control.OnLoad(EventArgs e) +91 System.Web.UI.Control.LoadRecursive() +74 System.Web.UI.Page.ProcessRequestMain( Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +2207CalliEventHandlerDelegateProxy.Callback(Object sender, EventArgs e) +35 System.Web.UI.Control.OnLoad(EventArgs e) +91 System.Web.UI.Control.LoadRecursive() +74 System.Web.UI.Page.ProcessRequestMain( Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +2207

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T10:42:46.927

正如您在评论中提到的，您在对您表示为 HH:mm 的数据进行十进制解析时遇到了麻烦

您应该使用 a`TimeSpan`来汇总所有这些值而不是小数。（`TimeSpan`具有解析 4.0 的确切功能，但如果您使用的是较低版本）

尝试以这种方式进行

```
TimeSpan ts = DateTime.ParseExact("02:30", "HH:mm", CultureInfo.InvariantCulture).TimeOfDay;
// instead of 02:30 you would have the string from your column passed in

// you can add up the values in this fashion
ts.Add(DateTime.ParseExact("08:30", "HH:mm", CultureInfo.InvariantCulture).TimeOfDay); 
```

您可以使用 Resultant Timespan 以您选择的格式显示它，因为它也有天数，或者您可以随时显示`ts.TotalMinutes`

希望这是您所寻找的，否则请更新相关部分

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T11:04:26.437

尝试在列名周围使用方括号，因为它包含特殊字符。像，

```
 tp += Convert.ToDecimal(DataBinder.Eval(e.Row.DataItem, "[Duration(HH:MM)]")); 
```

# xcode - xcode 项目名称

> ID：11468891
> 
> 赞同：2
> 
> 时间：2012-07-13T10:41:48.270
> 
> 标签：xcode

是否可以更改整个项目的名称，以便我可以从中制作一个不同的名称。我的意思是，例如名称是 iPhone.xcodeproj，我需要第二个来尝试附加代码，例如名称为 iPod.xcodeproj 以及所有类和框架以及其他所有内容。所以我不仅需要更改文件的名称，还需要更改整个项目的名称。感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T16:05:31.603

*   第一次复制项目文件夹

*   2nd将文件夹重命名为您想要的

*   第三次在新位置打开项目

*   4选择你的项目

    ![在此处输入图像描述](../Images/7364eae9491f3996db75bd15f8698224.png)

*   5th将您的项目重命名为您想要的

*   第 6 次按 Enter 键，您就完成了……新位置的项目已重命名为您想要的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T15:53:37.473

首先，您必须使用 Finder 复制项目目录。（不要重命名项目文件）。

然后也许[这个问题](https://stackoverflow.com/questions/11453991/iphone-changing-xcode-project-name-is-safe)会对你有所帮助。

# objective-c - indexOfObjectIdenticalTo：返回数组计数之外的值

> ID：11468893
> 
> 赞同：1
> 
> 时间：2012-07-13T10:41:52.513
> 
> 标签：objective-c, ios, uitableview, indexing, nsmutablearray

我目前正在开发一个应用程序，该应用程序`UITableView`使用来自`MPMediaItemCollection`. 我正在尝试在`UITableViewCellAccessoryCheckmark`与当前播放曲目的标题匹配的行中添加一个。

我通过创建一个可变的曲目标题数组来实现这一点，这些标题也是为我的单元格的`textLabel.text`属性设置的。（用于比较目的）

**注意：**这一切都在`- (UITableViewCell *) tableView: (UITableView *) tableView cellForRowAtIndexPath: (NSIndexPath *) indexPath`

```
MPMediaItem *mediaItem = (MPMediaItem *)[collectionMutableCopy objectAtIndex: row];

if (mediaItem) {
    cell.textLabel.text = [mediaItem valueForProperty:MPMediaItemPropertyTitle];
}

[mutArray insertObject:cell.textLabel.text atIndex:indexPath.row]; 
```

据我所知，这一切都很好，除了以下内容。此时，我正在尝试获取当前播放曲目标题的索引并将其添加`UITableViewCellAccessoryCheckmark`到该行。

```
if (indexPath.row == [mutArray indexOfObjectIdenticalTo:[mainViewController.musicPlayer.nowPlayingItem valueForProperty:MPMediaItemPropertyTitle]]) {
    cell.accessoryType = UITableViewCellAccessoryCheckmark;
} 
```

谈到我的问题，我添加了所有上述（大部分是不相关的）代码，因为我不知道哪里出错了。当我登录`indexOfObjectIdenticalTo:`时，它每次都会吐出“2147483647”，即使数组中的对象永远不会超过 5 个。但为什么？

如果有人有任何提示或指示可以帮助我解决此问题，将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T10:46:54.243

2147483647 只是表示找不到对象。

从[以下文档`-[NSArray indexOfObjectIdenticalTo:]`](https://developer.apple.com/reference/foundation/nsarray/1410847-indexofobjectidentical)：

> ### 返回值
> 
> 对应数组值与*anObject*相同的最低索引。如果数组中没有任何对象与*anObject*相同，则返回`NSNotFound`。

并[`NSNotFound`](https://developer.apple.com/reference/foundation/foundation_constants/nsnotfound)定义为：

```
enum {
   NSNotFound = NSIntegerMax
}; 
```

而 2147483647 = 0x7fffffff 是 32 位 iOS 上的最大整数。

* * *

请注意，即使两个 NSString 具有相同的内容，它们也可能不是相同的对象。如果两个对象共享相同的位置，则它们是相同的，例如

```
NSString* a = @"foo";
NSString* b = a;
NSString* c = [a copy];

assert([a isEqual:b]);   // a and b are equal.
assert([a isEqual:c]);   // a and c are equal.
assert(a == b);          // a and b are identical.
assert(a != c);          // a and c are *not* identical. 
```

我相信你只想要平等测试而不是身份测试，即

```
if (indexPath.row == [mutArray indexOfObject:[....]]) { 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T10:52:17.250

查看[NSArray的文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html)

> **返回值**
> 对应数组值与对象相同的最低索引。如果数组中没有一个对象与 anObject 相同，则返回 NSNotFound。

所以你可能应该做一个检查

```
NSInteger index = [array indexOfObjectIdenticalTo:otherObject];

if (NSNotFound == index) {
    // ... handle not being in array
} else {
    // ... do your normal stuff
} 
```

# c - 使用断言而不是使用简单的“如果”有什么好处？

> ID：11468899
> 
> 赞同：11
> 
> 时间：2012-07-13T10:42:27.657
> 
> 标签：c, if-statement, assert

鉴于此代码：

```
#include <stdio.h>
#include <assert.h>

void print_number(int* somePtr) {
  assert (somePtr!=NULL);
  printf ("%d\n",*somePtr);
}

int main ()
{
  int a=1234;
  int * b = NULL;
  int * c = NULL;

  b=&a;

  print_number (c);
  print_number (b);

  return 0;
} 
```

我可以这样做：

```
#include <stdio.h>
#include <assert.h>

void print_number(int* somePtr) {
  if (somePtr != NULL)
       printf ("%d\n",*somePtr);
  // else do something 
}

int main ()
{
  int a=1234;
  int * b = NULL;
  int * c = NULL;

  b=&a;

  print_number (c);
  print_number (b);

  return 0;
} 
```

那么，我通过使用 assert 获得了什么？

问候

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-13T10:45:53.590

assert 是在代码中记录您的假设。if 语句用于处理不同的逻辑场景。

现在，在您的特定情况下，从 print_number() 函数的开发人员的角度考虑。

例如当你写

```
void print_number(int* somePtr) {
  assert (somePtr!=NULL);
  printf ("%d\n",*somePtr);
} 
```

你的意思是说，

在我的 print_number 函数中，我假设**指针****总是**不为空。如果这是空的，我会**非常惊讶。**我根本不在乎在我的代码中处理这种情况。

但是，如果你写

```
void print_number(int* somePtr) {
  if (somePtr != NULL)
       printf ("%d\n",*somePtr);
  // else do something 
} 
```

您似乎说，在我的 print_number 函数中，我**希望**人们传递一个空指针。而且我知道如何处理这种情况，并且我确实在其他情况下处理了这种情况。

因此，有时您会知道如何处理某些情况并且您想这样做。然后，使用如果。有时，您假设某事不会发生，并且您不想处理它。您只需表达您的惊讶并使用 assert 停止您的程序执行。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-13T10:47:06.147

不同之处在于[`assert`](http://en.cppreference.com/w/cpp/error/assert)仅对**调试**构建启用；它没有为**发布**构建启用（即何时`NDEBUG`定义），这意味着在发布构建中不会有检查；`if`因此，与您使用仍保留在发布版本中的条件相比，您的代码会更快一些。

这意味着，`assert`用于在您编写代码时检查常见错误，并在开发阶段本身尽快捕获它们。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-07-13T10:50:29.930

很多原因：

1.  对于发布版本，断言通常会被删除。
2.  断言会向客户端报告失败信息。`if()`自己什么都不做。
3.  因为断言通常是宏，所以您还可以获得有关失败断言的代码信息。
4.  Assert 在语义上比`if()`.

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-07-13T10:44:59.737

如果断言失败，您将看到包含失败断言本身的输出，以及失败断言的函数和行，如下所示：

```
test: main.cpp:9: int main(): Assertion `0==1' failed. 
```

因此，如果您的程序在运行时崩溃，您将看到崩溃的确切原因和位置。[wiki](http://en.wikipedia.org/wiki/Assertion_%28computing%29)中有一篇关于断言的大文章。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-13T10:47:07.053

Assert 将通知您发生了错误，可能需要修复错误。在调试模式下，它会中断并显示可以帮助您修复错误的调用堆栈。所以它是一个很好的使用习惯。我实际上会使用 if() 和断言，因为在 Release 中你的断言应该被关闭：

```
void print_number(int* somePtr) {
  assert(somePtr != NULL);
  if (somePtr != NULL)
       printf ("%d\n",*somePtr);
  // else do something 
} 
```

在“ // else do something ”中，您可能会想到抛出异常或返回错误代码。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-04-14T09:42:13.870

如果您的 (if) 语句变为 True 或 False，请听，以便编译器执行下一条指令。但是在 assert.h 中，当您的语句变为假时，“程序立即终止”并带有断言消息。

例子 ：*

```
#include <assert.h> #include <stdio.h>

int main () {

    int a;
    printf("Enter an integer value: "); scanf("%d", &a); assert(a >= 10);
    printf("Integer entered is %d\n", a);
    return(0); } 
```

# java - 如何在 JSF 2.0 中为一键操作设置两个 ajax 事件

> ID：11468901
> 
> 赞同：1
> 
> 时间：2012-07-13T10:42:33.960
> 
> 标签：java, jsf, jstl

我必须实现一个场景，比如更改图像并相应地显示文本。意味着同时有两个 ajax ......所以我正在编写这样的代码，但图像正在改变并且它正在工作但文本没有显示。刷新该页面后出现文本，即文本被替换但未显示..... **代码为：**

```
<h:commandLink class="SampleImageCSS">
            <h:graphicImage id="sample2" alt="No iamge to display"
                value="#{carDetails.carUrl2}" height="100" width="100"
                title="Car For Beeding" />
            <f:setPropertyActionListener target="#{carDetails.rootImage}"
                value="#{carDetails.carUrl2}" />
                <f:setPropertyActionListener target="#{carDetails.view}" 
                value="#{carDetails.viewDetails['carUrl2']}" />
            <f:ajax event="action" render="rootImage">
            </f:ajax>
            <f:ajax event="action" render="ViewId">
            </f:ajax>
        </h:commandLink> 
```

如何触发ajax请求同时做两项工作？豆角：

```
public class CarDetails {

  private int id;
  private String carUrl1;
  private String carUrl2;
  private String carUrl3;
  private String carUrl4;
  private String carUrl5;
  private String carUrl6;
  private String view;
  public String getView() {
    return view;
}
public void setView(String view) {
    this.view = view;
}
  HashMap<String, String> viewDetails = new HashMap<String, String>();

  public HashMap<String, String> getViewDetails() {
    return viewDetails;
}
public void setViewDetails(HashMap<String, String> viewDetails) {
    this.viewDetails = viewDetails;
}
//other getter setter
public CarDetails(){
  carUrl1="http://www.screamingtiger.com/images/car1.jpg";
  carUrl2="http://www.allbestwallpapers.com/tagwallpaper/convertible%20car-wallpapers.jpg";
  carUrl3="http://media.treehugger.com/assets/images/2011/10/ec-rnd-005.jpg";
  carUrl4="http://www.urbadriver.com/wp-content/uploads/2010/12/car.jpg";
  carUrl5="http://www.businessfinancemag.info/wp-content/uploads/2011/01/car_loans.jpg";
  carUrl6="http://cars-wallpapers.eu/images/Old_cars/00000018.jpg";
  rootImage="http://www.screamingtiger.com/images/car1.jpg";

  viewDetails.put("carUrl1", "Front view");
  viewDetails.put("carUrl2", "Right Side View");
  viewDetails.put("carUrl3", "Top or Plan View");
  viewDetails.put("carUrl4", "Rear view");
  viewDetails.put("carUrl5", "Back view");
  viewDetails.put("carUrl6", "Bottom View");}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T11:07:57.597

一些谷歌得到它后的简单...

通过编写代码`<f:ajax event="action" render="rootImage ViewId">`而不是两个单独的ajax请求来解决它。

# json - 如何在 jQuery 中同步返回函数值？

> ID：11468903
> 
> 赞同：0
> 
> 时间：2012-07-13T10:42:46.550
> 
> 标签：json, spring, jquery

我在 jQuery 中编写了这个函数：

```
function checkAvailability(value) {
    var result = true;
    $.getJSON("registration/availability", { username: value }, function(availability) {            
        if (!availability)
            result = false; 
            alert("in getJSON: " + result);
    });
    alert(result);
    return result;
} 
```

在这一秒之后，我收到了来自“getJSON”的警报。为什么会这样？

我有检查用户名可用性的 Spring MVC 项目和 Controller 方法。控制器方法正常工作。但我收到最终结果为时已晚。如何同步它以在我的函数中正确返回值？

**编辑**

我在 jQuery 验证中使用这个函数。我`checkAvailability()`在测试期间提取了函数。

```
$.validator.addMethod("checkAvailability", function(value, element, param) {    
    var das = checkAvailability(value);
    return das;
}, jQuery.format("Someone already has that username. Please try another one.")); 
```

这是我的表单验证：

```
$(".form").validate({
    rules: {
        username: {
            checkAvailability: true
        },
        ....
    },
    messages: {
    }
}); 
```

**编辑 2**

这是我的控制器方法。它返回布尔值。如果使用用户名，它将返回错误值。

```
@RequestMapping(value="/registration/availability", method = RequestMethod.POST)
public @ResponseBody boolean getAvailability(@RequestParam String username) {       
    List<User> users = getAllUsers();           

    for (User user : users) {
        if (user.getUsername().equals(username)) {
            return false;
        }
    }

    return true;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T10:56:26.777

**为什么会这样？**

[$.getJSON](http://api.jquery.com/jQuery.getJSON/)是发出 AJAX 请求的简写。ajax 中的“A”代表异步。意思是，javascript 引擎触发 getJSON 调用，然后立即执行下一行，即`alert(result); return result;`

Web 服务返回的实际值将在稍后由您的代码接收。`success`一旦 js 引擎收到来自服务器的响应，您传递给 getJSON的函数就会被调用。如您所见，到那时为时已晚。

进一步阅读：[https ://developer.mozilla.org/en/AJAX](https://developer.mozilla.org/en/AJAX)

**我能做些什么来完成这项工作？**

这取决于你的情况。谁在呼唤`checkAvailabilty`？如果您发布一些有关如何使用此功能的代码，我可以举一些例子和我的建议。

在我的脑海中，您可以使用[jquery deferreds ，](http://api.jquery.com/category/deferred-object/)[同样的](http://addyosmani.com/blog/digging-into-deferreds-1/)好文章。或者你可以传入一个从你的成功函数内部执行的回调函数。

**编辑：**

[http://docs.jquery.com/Plugins/Validation/Methods/remote#options](http://docs.jquery.com/Plugins/Validation/Methods/remote#options)

> 服务器端资源通过 $.ajax (XMLHttpRequest) 调用并获取一个键/值对，对应于已验证元素的名称及其作为 GET 参数的值。响应被评估为 JSON 并且对于有效元素必须为 true，对于无效元素可以是任何 false、未定义或 null，

要获得真实世界的想法，请查看演示[http://jquery.bassistance.de/validate/demo/captcha/](http://jquery.bassistance.de/validate/demo/captcha/)

打开 Firebug 或您选择的开发人员工具。转到可让您查看 AJAX 请求的选项卡。输入验证码，提交。检查开发人员工具中列出的 ajax 请求。注意查询字符串参数。注意响应。它是一个简单的“真”或“假”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T15:02:52.823

不确定这是否有帮助，但您可以使用

```
var result;
$.ajax( {
        url : "registration/availability",
        data : data,
        async : false  //syhcrononous ajax request ;)
}).done(function(data) {
    result = data;
}); 
```

有关更多信息，您可以参考[JQuery AJAX 文档](http://api.jquery.com/jQuery.ajax/)

# javascript - 如何限制用户从文本框中删除带有特殊字符的单词

> ID：11468906
> 
> 赞同：0
> 
> 时间：2012-07-13T10:42:55.617
> 
> 标签：javascript, asp.net, restrict, ckeditor.net

我正在使用 ckeditor.net 在电子邮件 CMS 中工作。在运行时用户可以更改电子邮件的正文，我想限制用户删除所有以 @@ 开头的特殊单词。

这是示例-

```
Email Alert! :<br />
<br />
**@@Comments**<br />
<br />
Please do not reply to this email. 
```

我不希望用户删除其他电子邮件模板中的“@@comments”字和所有“@@”字符。你能给出任何 JavaScript 代码吗？

在运行时，我用某个段落替换“@@”字样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T13:57:37.017

我还没有测试过这段代码（只是把它自由地写进了这个响应中），但这就是我要做的。

在文本输入的 keydown 方法上，您需要[监听退格键](https://stackoverflow.com/questions/9906885/detect-backspace-and-del-on-input-event)：

```
var input = document.getElementById('myInput');

input.onkeydown = function() {
    var key = event.keyCode || event.charCode;

    // Detect Backspace (8) & Delete (46) keys
    if( key == 8 || key == 46 ){

       var caretPos = getCaretPos(input);

       // Read backward from the caret position
       // until you hit a space or index 0:
       while ( (input.value[caretPos] != " ") && (caretPos > 0)  ){
          caretPos--;
       }

       // Once you hit the space or index 0, read forward two characters 
       // to see if it === "@@".  If both chars are "@", cancel 
       // the keydown event.  You should probably do some bounds checking
       // here.  Could also be done with String.subtring
       if ( input.value[(caretPos + 1)] == "@" && 
            input.value[(caretPos + 2)] == "@" )
       {
          return false;
       }
    }

};

function getCaretPos(input) {
    // Internet Explorer Caret Position (TextArea)
    if (document.selection && document.selection.createRange) {
        var range = document.selection.createRange();
        var bookmark = range.getBookmark();
        var caret_pos = bookmark.charCodeAt(2) - 2;
    } else {
        // Firefox Caret Position (TextArea)
        if (input.setSelectionRange)
            var caret_pos = input.selectionStart;
    }

    return caret_pos;
} 
```

参考

[检测退格](https://stackoverflow.com/questions/9906885/detect-backspace-and-del-on-input-event)

[获取插入符号位置](https://stackoverflow.com/questions/4928586/get-caret-position-in-html-input)

[取消keydown事件](https://stackoverflow.com/questions/3036243/cancel-the-keydown-in-html)

# ruby-on-rails - 捷径应该 respond_to(:attribute) rspec

> ID：11468908
> 
> 赞同：0
> 
> 时间：2012-07-13T10:42:56.787
> 
> 标签：ruby-on-rails, rspec

在我的 rspec 测试中，我的模型帖子有一堆属性：

```
it { should respond_to(:title) }
it { should respond_to(:description) }
it { should respond_to(:instruction) }
.
.
. 
```

**我可以更精确，在测试中使用更少的行，例如：**

```
it { should respond_to(:title, :description, :instruction) } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T10:19:50.337

修复在[https://github.com/evansagge/mongoid-rspec](https://github.com/evansagge/mongoid-rspec)：

```
it { should have_fields(:title, :description, :instruction) } 
```

谢谢@Beerlington

# operating-system - 构建我的第一个操作系统

> ID：11468910
> 
> 赞同：0
> 
> 时间：2012-07-13T10:43:02.890
> 
> 标签：operating-system

我是一名程序员，精通 Java、C、C++ 和 Ruby。

我知道我刚刚有了构建操作系统的想法，所以我买了一个空硬盘，然后连接到我的 SATA 电缆，将它从旧硬盘上移除。我有点了解汇编语言。

现在我的问题是如何在硬盘上启动我的第一个程序，就像添加两个数字或其他东西一样。以前，我使用微处理器套件来编写我的汇编级程序（也使用 MASAMS 软件）。

请您告诉我对于没有任何内核的裸系统仅通过在主板上有一些引导启动程序如何编写程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T11:06:02.027

我建议从虚拟化方法开始，但它会更容易调试和构建。

一旦你有了更稳定的东西，你就可以在实际硬件上试用它。

除了阅读该主题（我建议购买一两本书）之外，也许您可​​以从查看[GeekOS](http://geekos.sourceforge.net/)等现有项目开始寻找灵感。

祝你的事业好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T10:53:54.913

您可能想要的是编写一个引导扇区程序。[这](http://kos.enix.org/pub/bootwrit.html)应该可以帮助你。另请注意，您将没有任何用于打印到屏幕的操作系统功能，因此您需要使用 BIOS 功能。我建议您先使用虚拟机，直到您正确使用虚拟机，然后再尝试在实际硬盘驱动器上进行操作。祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T11:56:43.183

我建议你从[MikeOS](http://mikeos.berlios.de/write-your-own-os.html)开始。它初步介绍了汇编编程和启动您自己的操作系统所需的所有工具（包括汇编程序、pc 模拟器等），还有一个非常简单的操作系统，可以帮助您深入了解。

在那之后，当你熟悉了基础知识后，你可能想看看[OSDev](http://www.osdever.net/tutorials/index)以获得更严肃的东西。里面有很多教程可以使用。

# javascript - 用 javascript 打开新窗口并发送 POST 参数

> ID：11468916
> 
> 赞同：1
> 
> 时间：2012-07-13T10:43:24.833
> 
> 标签：javascript

我想用 javascript 打开一个新窗口并将 POST 参数传递给它。我已经尝试了很多东西。

到目前为止，我的最新代码看起来像这样，但没有工作（我没有尝试传递 post 参数，但在它工作之后我只能添加隐藏输入以使其工作。我猜。）：

```
<form method="POST" name="showgraph" onsubmit="javascript:window.open('graph.php', 'Graph', 'scrollbars=yes,titlebar=no,top=300,left=400');" action="javascript:void(0)">
<a href="#" onClick="document.showgraph.submit();">Show graph</a>
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T10:51:53.070

您需要`target="_blank"`使用 javascript 创建隐藏表单并提交它。无法`POST`使用方法传递参数`window.open` 。有关更多详细信息，请访问此[链接](https://stackoverflow.com/questions/133925/javascript-post-request-like-a-form-submit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T10:54:55.797

如果您可以控制初始页面，为什么不使用 PHP 创建 JavaScript 变量呢？

```
<script type="text/javascript">
<?php

foreach ($_POST as $key => $val)
{
    echo "var php_$key = $val;";
}

?>
</script> 
```

然后，您可以在 .js 的 URL 参数的查询字符串中传递 js vars `window.open`。

# android - android layout - WRAP_CONTENT 从右到左可能吗？

> ID：11468917
> 
> 赞同：0
> 
> 时间：2012-07-13T10:43:27.180
> 
> 标签：android, layout

我在线性布局（水平）中有一个 TextView 和一个 ImageButton。我的总宽度是 300 像素。按钮图像为 50x50。我可以为文本使用的最大宽度是 250。如果文本宽度小于 250 像素（WRAP_CONTENT 很好用），下面的代码就可以完美运行。

```
 // create relative layout for the entire view
    LinearLayout layout = new LinearLayout(this);
    layout.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,
            LayoutParams.WRAP_CONTENT));
    layout.setOrientation(LinearLayout.HORIZONTAL);

    // create TextView for the title
    TextView titleView = new TextView(this);
    titleView.setText(title);
    layout.addView(titleView);

    // add the button onto the view
    bubbleBtn = new ImageButton(this);
    bubbleBtn.setLayoutParams(new LayoutParams(
            LayoutParams.WRAP_CONTENT, LayoutParams.FILL_PARENT));
    layout.addView(bubbleBtn); 
```

当文本占用超过 250 像素时，问题就来了。按钮被推出并在 300 像素空间内变得不可见。

我想要的是：为图像分配 50 像素宽度。WRAP_CONTENT 在剩余的 250 像素中。换句话说，不是从左边填写，而是从右边填写。在这种情况下使用重力是正确的吗？我应该在代码中如何以及在哪里使用它？

或者有其他更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T10:56:34.580

使用 RelativeLayout 而不是 LinearLayout。设置每个View的LayoutParams如下：

```
// add the button onto the view
bubbleBtn = new ImageButton(this);
bubbleBtn.setId(1); // should set this using a ids.xml resource really.
RelativeLayout.LayoutParams bbLP = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
bbLP.addRule(RelativeLayout.ALIGN_PARENT_RIGHT);
bbLP.addRule(RelativeLayout.CENTER_VERTICAL);
layout.addView(bubbleBtn, bbLP);

// create TextView for the title
TextView titleView = new TextView(this);
titleView.setText(title);
titleView.setGravity(Gravity.RIGHT);
RelativeLayout.LayoutParams tvLP = new RelativeLayout.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT);
tvLP.addRule(RelativeLayout.LEFT_OF, 1);
tvLP.addRule(RelativeLayout.CENTER_VERTICAL);
layout.addView(titleView, tvLP); 
```

# php - 为什么 simplexml_load_file 相对于主机文件不起作用？

> ID：11468919
> 
> 赞同：3
> 
> 时间：2012-07-13T10:43:28.813
> 
> 标签：php, simplexml, relative-path

我`simplexml_load_file`在包含的 PHP 文件中放置了指令。但是这个指令的工作取决于我从哪里包含这个文件。为什么？是否可以相对于放置的文件指令解释相对文件路径？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-13T10:47:52.260

您始终可以使用神奇的[__FILE__](http://php.net/manual/en/language.constants.predefined.php)常量访问当前文件的完整路径，因此您可以像这样编写您的 simplexml_load_file() 调用：

```
<?php
simplexml_load_file(dirname(__FILE__).'/file.xml'); 
```

### 更新

自 PHP 5.3 以来，有一个新的`__DIR__`引入，你可以使用它来代替`dirname(__FILE__)`这样的：

```
<?php
simplexml_load_file(__DIR__).'/file.xml'); 
```

# sql-server-2008 - 从嵌套子字符串我想存储内部子字符串输出

> ID：11468920
> 
> 赞同：0
> 
> 时间：2012-07-13T10:43:32.157
> 
> 标签：sql-server-2008

假设我有以下命令

```
 Declare @input as varchar(500)

  set @input = 'abce,dfg'

  select substring(substring(@input,1,charindex(',',@input)+1),1,2) 
```

如何将内部子字符串的结果保存在新变量中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T10:53:09.803

除非我错过了什么，否则你可以做...

```
declare @innersub varchar(500)
set @innersub = substring(@input,1,charindex(',',@input)+1) 
```

或者...

```
declare @innersub varchar(500)
select @innersub = substring(@input,1,charindex(',',@input)+1) 
```

然后你可以使用`@innersub`...

```
select substring(@innersub,1,2) 
```

**更新**（由于评论中来自 OP 的更多信息）

一个 SELECT语句*不能*同时设置变量**和**返回值。

以下总是会失败......

```
select field1, @var=field2 from table 
```

**编辑**

您是否看过使用返回表的用户定义函数？

```
CREATE FUNCTION dbo.GetSubString ( @input varchar(500) )
RETURNS @result TABLE ( sub1 varchar(500), sub2 varchar(500) )
AS
BEGIN
    INSERT INTO @result (sub1, sub2)
    SELECT substring(substring(@input,1,charindex(',',@input)+1),1,2),
        substring(@input,1,charindex(',',@input)+1)
    RETURN
END 
```

然后你可以称之为...

```
declare @input varchar(500)
set @input = 'abce,dfg'
select sub1, sub2 from dbo.GetSubString(@input) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T11:01:25.350

```
Declare @input as varchar(500),
 @cInnerStr varchar(500)
  set @input = 'abce,dfg'
 Set @cInnerStr = substring(@input,1,charindex(',',@input)+1)
 select @cInnerStr 
```

# wix - 浏览按钮用于 使用 wix 在自定义对话框中安装 .cer 文件

> ID：11468921
> 
> 赞同：0
> 
> 时间：2012-07-13T10:43:32.383
> 
> 标签：wix, customdialog

我没有在wix的自定义对话框中找到控制浏览器和上传文件的类型。

Type="PathEdit" 只浏览文件夹，不能选择文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T11:56:35.170

我在浏览文件和获取文件路径方面得到了很好的帮助。示例代码提供的示例，只需使用“MSBUILD”构建 dll

有关更多详细信息，请参阅链接：[WiX 托管自定义操作（OpenFileDialog 示例）](http://community.saasgrid.com/developers/b/team/archive/2011/02/17/wix-managed-custom-actions-openfiledialog-example.aspx)。

# css - 水平对齐框的CSS问题

> ID：11468923
> 
> 赞同：0
> 
> 时间：2012-07-13T10:43:37.333
> 
> 标签：css, asp-classic, crm, sage-crm

我在 Sage CRM 的 asp 页面中遇到了一些 CSS 问题。某些对齐方式不匹配。

我正在创建具有四种不同功能的 4 个块和四个表。每个块将显示总余额。现在这四个块处于垂直位置

第1块
表1；
块2
表2；等等...

每个块都是一个 div。现在我希望水平位置的所有块都在一行中，例如：

块 1 块 2 块 3 块 4

问题是这些属性（框的对齐）正在为不同的人在圣人中发生变化。对于一个人，此代码将匹配并且所有四个框都在同一行，对于第二个人，一些框在下面，对于第三人，我找不到其中一个框。

我的四个函数的 div 样式 css 如下所示：

如何链接sage中四种不同功能的div

```
function fn_main()
    {
    + '<DIV div CLASS="bx" style="width: 15%;height: 67; overflow-n: scroll; scrollbar-arrow-color: blue; scrollbar-face-color: #e7e7e7; scrollbar-3dlight-color: #a0a0a0; scrollbar-darkshadow-color:#
    888888">'
    }

    function fn_1()
    {
    + '<DIV div CLASS="bx" style="width: 20%; height: 67;margin:-225px 0 0 225px;position: absolute;overflow: hidden;scrollbar-arrow-color: blue; scrollbar-face-color: #e7e7e7; scrollbar-3dlight-color: #a0a0a0; scrollbar-darkshadow-color:#888888">'            
    }

    function fn_2()
    {
    + '<DIV div CLASS="bx" style="width: 22%; height: 67;margin:-380px 0 0 470px;position: absolute;overflow: hidden; scrollbar-arrow-color: blue; scrollbar-face-color: #e7e7e7; scrollbar-3dlight-color: #a0a0a0; scrollbar-darkshadow-color:#888888">' 
    }

    function fn_3()
    {
     + '<DIV div CLASS="bx" style="width: 25%; height: 67;margin:-425px 0 0 625px;position: absolute;overflow: hidden;scrollbar-arrow-color: blue; scrollbar-face-color: #e7e7e7; scrollbar-3dlight-color: #a0a0a0; scrollbar-darkshadow-color:#888888">'   
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T11:05:39.503

尝试这个：

```
.bx{clear: none; float: left;} 
```

这会将所有 div 对齐到左侧，使它们出现在同一行！

并将 px/em 放在高度 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T11:44:44.403

你可以尝试添加

```
display:inline-block 
```

到每个div？

# css - 多列css问题

> ID：11468924
> 
> 赞同：0
> 
> 时间：2012-07-13T10:43:40.760
> 
> 标签：css

我使用多列 css 将我的各种 ul 列表显示为三列。以下是我用过的css

```
.columnsmulti {
    -moz-column-count: 3; 
    -moz-column-gap: 10px;
    -moz-column-rule: 0px double #666;
    -webkit-column-count: 3; 
    -webkit-column-gap: 10px;
    -webkit-column-rule: 0px double #666;
    column-count: 3;
    column-gap: 10px;
    column-rule: 0px double #666;
} 
```

这是html代码。

```
<div>
  <div class="box_middle">
    <div class="box_top"></div>
    <h2><span class="arr_lft"><img src="images/arrow-new.png" alt="" /></span>5 Towns<span class="arr_rht"><img src="images/arrow-new.png" alt="" /></span></h2>
    <ul>
      <a class="thumb" href="#">
      <li class="blue">
        <div class="sec_lft"><img src="#" height="28px" width="31px"></div>
        <div class="sec_mid">Seasons - Lawrence <span class="special_red">Specials Not Updated</span></div>
        <div class="sec_rht">
          <div class="top_badge"></div>
          0 </div>
      </li>
      </a> <a class="thumb" href="#">
      <li >
        <div class="sec_lft"><img src="brachs-logo.jpg" height="28px" width="31px"></div>
        <div class="sec_mid">Brach's In Lawrence <span class="special_red">Specials Not Updated</span></div>
        <div class="sec_rht"> 2 </div>
      </li>
      </a> <a class="thumb" href="#">
      <li >
        <div class="sec_lft"><img src="gourmetglattlogo.jpg" height="28px" width="31px"></div>
        <div class="sec_mid">Gourmet Glatt Emporium <span class="special_red">Specials Not Updated</span></div>
        <div class="sec_rht"> 1 </div>
      </li>
      </a>
    </ul>
    <div class="box_bot"></div>
  </div>
</div> 
```

上面的div是一组。可以有任意数量的集合。这些集合应正确分布到三列中。

问题是列表没有正确分布到三列中。每次页面刷新看起来都不同。有些列表有时不显示。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T11:15:40.697

使用`table`非列。

表格在所有平台和显示类型上都是可靠和健壮的，并且可以很好地降级。

正如@billy-moat 所建议的那样，列用于杂志/报纸类型的布局，并且在任何情况下都不受所有浏览器的支持。

这里的问题是您试图在列表条目中嵌入列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-22T11:21:27.607

如前所述，您的代码中有一些错误。为此，您仍然可以使用列，但首先，请阅读更多关于它们的信息（例如[，此处](https://kolosek.com/css-columns/)）。

# jdo - JDOQL 正则表达式支持

> ID：11468925
> 
> 赞同：0
> 
> 时间：2012-07-13T10:43:49.563
> 
> 标签：jdo, jdoql

JDOQL 是否支持 ^ 匹配开始和 $ 匹配结束？我很难让他们工作。

^ 和 $ 可能已经暗示了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T15:51:51.807

String.matches() 支持在规范中得到了很好的定义

> 只需要支持以下正则表达式模式并且是可移植的： 全局“(?i)”，用于不区分大小写的匹配；和 ”。” 和“.*”表示通配符匹配。传递给匹配项的模式必须是文字或参数。

# xml - 有没有办法使用 vtd-xml 在 xml 中找到结束标记

> ID：11468929
> 
> 赞同：2
> 
> 时间：2012-07-13T10:44:08.967
> 
> 标签：xml, tags, vtd-xml

我已经使用令牌根据令牌计数循环所有元素，并看到在我的 xml 结构中，它只有令牌类型 = 5 和令牌类型 = 0 来自这个网络

[http://vtd-xml.sourceforge.net/userGuide/6.html](http://vtd-xml.sourceforge.net/userGuide/6.html)

那么有没有办法在 vtd-xml 中找到结束标记

因为，我的 xml 看起来像这样。

```
<ZDA>
<userdata>
    <firstname>Eak</firstname>
    <lastname>Tan</lastname>
</userdata>
<list name="employee">
    <entry>
        <first_name>firstName</first_name>
        <title>title</title>
        <empid>1</empid>
        <second_name>secondName</second_name>
        <last_name>lastName</last_name>
        <date_of_birth>dateOfBirth</date_of_birth>
        <pin>pin</pin>
        <province>province</province>
        <start_date>startDate</start_date>
        <list name="address">
            <entry>
                <addressid>1</addressid>
                <empid>1</empid>
                <sequence>1</sequence>
                <detail>address11</detail>
            </entry>
            <entry>
                <addressid>2</addressid>
                <empid>1</empid>
                <sequence>2</sequence>
                <detail>address12</detail>
            </entry>
            <entry>
                <addressid>3</addressid>
                <empid>1</empid>
                <sequence>3</sequence>
                <detail>address13</detail>
            </entry>
        </list>
    </entry>    
</list> 
```

我使用 ap.iterate() 循环遍历所有 xml 结构。

我想使用结束标记来指示何时到达 -->`</entry>`将对象添加到当前列表。当它到达 ->`</list>`如果它有外部列表，则将这些列表添加到上层对象。

我希望这个过程像一个库，所以我使用反射来调用方法和对象。

现在，我只有一个问题，程序如何知道相应地添加到哪里。

任何获取结束标记或解析 XML 以使其具有结束标记的方法也是如此。

最好的问候，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T05:18:43.013

vtd 解析器不保留结束标记，因为它与起始标记相同。您正在寻找结束标签的任何原因？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-13T11:57:02.417

我有一个类似的问题，虽然我不知道您可以将关闭标记作为另一个元素（正如可能很好命名的 @vtd-xml-author 所指出的那样），但我选择了使用导航对象的路线解析每个孩子。

首先，我得到了导航，然后进入了第一个孩子。然后，我简单地移动到下一个兄弟，注册开始标记的偏移量，然后使用当前偏移量和前一个偏移量来获取整个元素。一旦下一个兄弟移动返回false，我退出到前一个元素，移动到下一个兄弟，并且能够计算前一个兄弟的最后一个子元素的关闭位置（当没有时继续返回父元素更多的兄弟姐妹，然后在我到达最后一个元素时使用文件的长度）。

# javascript - 减去哈希后的完整网址

> ID：11468931
> 
> 赞同：0
> 
> 时间：2012-07-13T10:44:12.870
> 
> 标签：javascript, jquery, ajax, hash, location

我想用 AJAX 和 jQuery 在我的网站上加载我的页面。它工作正常，但网址看起来

***http://mywebsite.com/#mywebsite.com/thepage***

我想减去网址，所以它看起来像

***http://mywebsite.com/#thepage***

我希望有人知道该怎么做。这是代码：

```
if(window.location.hash) {

} else {
  window.location="#THE_FULL_URL";
}

var newHash      = "",
    $mainContent = $("#wrapper"),
    $pageWrap    = $("#wrapper"),
    $el;

$("a").live("click", function(event){
    window.location.hash = $(this).attr('href');
    return false;
});

$(window).bind('hashchange', function(){

    var hash = location.hash;
    document.title = ( hash.replace(/^.*#/, '') || 'blank' ) + '.';

    newHash = window.location.hash.substring(1);

    if (newHash) {
        $mainContent
            .find(".content")
            .fadeOut(200, function() {
                $mainContent.hide().load(newHash + " .content", function() {
                    $mainContent.fadeIn();
                    fix();
                });
            });
    };

});

$(window).trigger('hashchange'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T10:51:25.880

这是Java中使用正则表达式的一种简单方法：

```
String url = "http://mywebsite.com/#mywebsite.com/thepage";
String newUrl = url.replaceAll("^(http://)([^#]*)#\\2(.*)$", "$1$2#$3")); 
```

这里是 Javascript：

```
var url = "http://mywebsite.com/#mywebsite.com/thepage";
var newUrl = url.replace(/^(http:\/\/)([^#]*)#\2(.*)$/g, "$1$2#$3"); 
```

# android - 小部件应该显示实际的首选项

> ID：11468933
> 
> 赞同：2
> 
> 时间：2012-07-13T10:44:24.293
> 
> 标签：android, android-widget, sharedpreferences

我在我的应用程序中使用 DefaultSharedPreferences。我想创建一个小部件来切换我的偏好之一。我做了小部件。它正在做我想做的事，但是如果我从其他活动中更改此偏好，小部件不会更新。

```
public class WidgetReceiver extends AppWidgetProvider {
    public static String ACTION_WIDGET_TOGGLE = "ActionToggle";

    public void onUpdate( Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds ) {
        RemoteViews remoteViews = new RemoteViews( context.getPackageName(), R.layout.widget_on_off );

        boolean state = PreferenceManager.getDefaultSharedPreferences( context ).getBoolean( "serviceOn", true );
        if( state )
            remoteViews.setImageViewResource( R.id.widgetImage, R.drawable.ic_widget );
        else
            remoteViews.setImageViewResource( R.id.widgetImage, R.drawable.ic_widget_dark );

        Intent intent = new Intent( context, WidgetReceiver.class );
        intent.setAction( ACTION_WIDGET_TOGGLE );
        PendingIntent pendingIntent = PendingIntent.getBroadcast( context, 0, intent, 0 );
        remoteViews.setOnClickPendingIntent( R.id.widgetImage, pendingIntent );

        appWidgetManager.updateAppWidget( appWidgetIds, remoteViews );
    }
    @Override
    public void onReceive(Context context, Intent intent) {
        final String action = intent.getAction();
        if( AppWidgetManager.ACTION_APPWIDGET_DELETED.equals( action )) {
            final int appWidgetId = intent.getExtras().getInt( AppWidgetManager.EXTRA_APPWIDGET_ID, AppWidgetManager.INVALID_APPWIDGET_ID );
            if ( appWidgetId != AppWidgetManager.INVALID_APPWIDGET_ID ) {
                this.onDeleted( context, new int[] { appWidgetId });
            }
        } else {
            if( intent.getAction().equals( ACTION_WIDGET_TOGGLE )) {
                boolean state = !PreferenceManager.getDefaultSharedPreferences( context ).getBoolean( "serviceOn", true );
                Editor editor = PreferenceManager.getDefaultSharedPreferences( context ).edit();
                editor.putBoolean( "serviceOn", state );
                editor.commit();
                ComponentName thisAppWidget = new ComponentName( context.getPackageName(), WidgetReceiver.class.getName());
                AppWidgetManager appWidgetManager = AppWidgetManager.getInstance( context );
                int[] appWidgetIds = appWidgetManager.getAppWidgetIds(thisAppWidget);
                onUpdate( context, appWidgetManager, appWidgetIds);
            }
            super.onReceive(context, intent);
        }
    }
} 
```

怎么样，让它发挥作用？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T14:28:17.407

如果您更改某些活动的偏好，则小部件没有理由更新（因为它的 onUpdate() 函数被调用）。您应该做的是从更改偏好的活动发送意图，该意图将触发您的小部件以显示新数据。[此处](https://stackoverflow.com/questions/8304387/android-how-do-i-force-the-update-of-all-widgets-of-a-particular-kind)解释了发送此类意图。

# jquery - 重复 jQuery 动画（从左到右之后）

> ID：11468935
> 
> 赞同：0
> 
> 时间：2012-07-13T10:44:30.457
> 
> 标签：jquery, repeat

我已经在这里搜索了解决方案，但不幸的是对我没有任何帮助。

我有一些动画云彩，从我的页面的左边飞到右边，但是我怎么能重复这个动画呢？

我的代码：

(JS)

```
$(window).load(function animation() {   
  $(".big_cloud").delay(5000).animate( { marginLeft: '100%' }, speed, 'linear');
  }); 
```

(CSS)

```
.big_cloud {
background-image: url('images/big_cloud.png');
width: 272px;
height: 174px;
cursor:pointer;
position: absolute;
margin-left: -280px;
z-index: 3;
} 
```

(HTML)

```
<div class="big_cloud"></div> 
```

例如，在云位于页面中间之后，是否可以开始重复？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T12:09:00.413

这样的事情是否达到了你想要的

[http://jsfiddle.net/uxyFE/](http://jsfiddle.net/uxyFE/)

一旦动画完成并再次调用该函数，我只需将现有的云移动到负边距即可。当然，这意味着一次只有一朵云

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T10:52:53.883

像这样的东西？

```
$(".big_cloud").everyTime((speed * 2), function (){
    $(".big_cloud").animate({ marginLeft:'100%' }, speed, 'linear').animate({ marginLeft:'0%' }, speed, 'linear');
}); 
```

来源：[http ://www.irengba.com/codewell/](http://www.irengba.com/codewell/)

# php - Firefox中奇怪的文本突出显示

> ID：11468938
> 
> 赞同：0
> 
> 时间：2012-07-13T10:44:43.647
> 
> 标签：php, css, firefox

我在以下网站的 Firefox 中有一个奇怪的问题：http: [//staffroom.bytewire.co.uk/](http://staffroom.bytewire.co.uk/)

如果单击徽标右侧的小向下箭头，则 div 中的文本看起来就像已突出显示一样。

如果您单击它，然后单击它，则突出显示消失，它会按原样显示。

Firefox 是唯一发生这种情况的浏览器，任何人都可以解释为什么吗？以及如何阻止它？

谢谢

艾略特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T10:58:18.997

将以下内容添加到 **body.clearbooks #header-content #main-switcher**

```
outline-style:none; 
```

这将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T12:50:07.117

我稍微改变了元素的结构，这似乎随机解决了这个问题！

谢谢您的帮助。

# objective-c - 如何将控制台输出放到 uitextview？访问控制台日志

> ID：11468939
> 
> 赞同：5
> 
> 时间：2012-07-13T10:44:44.183
> 
> 标签：objective-c, ios, xcode, console, uitextview

我想在我的应用程序中显示一个 UITextView，它应该包含控制台的所有输出。

这可能吗？**我怎样才能做到这一点？**

我之所以这么问，是因为我想为特殊的 beta 测试人员提供“调试功能”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T10:55:45.523

您可以参考本[教程](http://www.cocoanetics.com/2011/03/accessing-the-ios-system-log/)来获取 iOS 日志。

```
aslmsg q, m;
int i;
const char *key, *val;

q = asl_new(ASL_TYPE_QUERY);

aslresponse r = asl_search(NULL, q);
while (NULL != (m = aslresponse_next(r)))
{
    NSMutableDictionary *tmpDict = [NSMutableDictionary dictionary];

    for (i = 0; (NULL != (key = asl_key(m, i))); i++)
    {
        NSString *keyString = [NSString stringWithUTF8String:(char *)key];

        val = asl_get(m, key);

        NSString *string = [NSString stringWithUTF8String:val];
        [tmpDict setObject:string forKey:keyString];
    }

    NSLog(@"%@", tmpDict);
}
aslresponse_free(r); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T10:54:35.490

您可以使用在[获取控制台输出](https://stackoverflow.com/questions/7150849/how-can-i-get-a-console-readout-at-runtime-in-an-application)并将输出输出到 UITextView时将控制台输出并给出答案

# java - 从 WEB-INF/lib 中的 Jar 中的类访问 tomcat web-app 中的文件

> ID：11468940
> 
> 赞同：0
> 
> 时间：2012-07-13T10:44:48.723
> 
> 标签：java, tomcat

我有生成碧玉报告的类，我正在使用

```
private String RESOURCE_HOME = "/reports/jasper";
getClass().getResource(RESOURCE_HOME + "/srPaySlipSalaryComp.jasper").getFile(); 
```

我将这个类打包在一个 jar 中并放入我在 tomcat @(WEB-INF/lib) 上的应用程序中。

现在在我的服务器上，我在 [tomcat]/webapp/[myapp]/reports/jasper 中有碧玉

如何从 Jar 访问这些文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T10:49:47.037

您可以使用访问 Web 应用程序中的资源

```
ServletContext.getResourceAsStream(RESOURCE_HOME + "/srPaySlipSalaryComp.jasper"); 
```

上面的代码将从以下位置查看：

*   网络应用程序文件夹
*   在`/META-INF/resources`存在的每个库中`WEB-INF/lib`

**如果您想使用您拥有的代码**

```
private String RESOURCE_HOME = "/reports/jasper";
getClass().getResource(RESOURCE_HOME + "/srPaySlipSalaryComp.jasper").getFile(); 
```

该文件应位于以下两个位置：

*   `WEB-INF/classes`
*   在任何图书馆`WEB-INF/lib`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T10:55:29.067

`getClass().getResource()`使用类加载器加载资源。所以它可以加载的资源是类路径中可以访问的资源。所以它只能从 jar`WEB-INF/lib`或 from`WEB-INF/classes`或 tomcat 的类路径中的 jar 加载。

因此，一种解决方案（可能是最好的解决方案）是也将 jasper 文件放在 jar 文件中`WEB-INF/lib`或`WEB-INF/classes`.

如果你真的想把 jasper 文件放到 webapp 中，那么你需要使用[ServletContext.getResource()](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContext.html#getResource%28java.lang.String%29)来加载资源。

在这两种解决方案中，您将获得的不是指向文件的 URL，而是指向 jar 或 war 中资源的 URL。所以你不应该打电话`getFile()`。将 URL 或 由 返回的 InputStream 传递`getResourceAsStream()`给 Jasper API。

# sql - 在 MS Access 中实现位掩码验证

> ID：11468944
> 
> 赞同：0
> 
> 时间：2012-07-13T10:44:59.020
> 
> 标签：sql, ms-access, bitmask

我有一张桌子`Watchlist`，里面有许多球员和一个标志来识别他们的进攻。我想将标志实现为`bitmask`. 但是，为了在早期阶段捕获错误输入，我想`Watchlist_Flags`在设置值之前检查表中的位掩码。

基本上，我正在寻找一个 SQL 查询来验证即将设置的位掩码标志确实由表中存在的标志 ID 组成，并且仅由表中的标志 ID 组成`Watchlist_Flags`

* * *

是否可以在 SQL 级别上实现它，或者我需要在最终软件中处理这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T15:09:08.043

我的建议是使用 Watchlist_Flags 的值填充组合框。让用户从该组合框中选择值，并在添加/更新记录时，使用在添加/更新监视列表中的数据的 SQL 语句中选择的值。

# javascript - 在 Mozilla 浏览器的文本框中捕获突出显示的文本

> ID：11468947
> 
> 赞同：1
> 
> 时间：2012-07-13T10:45:01.923
> 
> 标签：javascript, cross-browser

> **可能重复：**
> [了解使用 JavaScript选择文本区域](https://stackoverflow.com/questions/401593/understanding-what-goes-on-with-textarea-selection-with-javascript)
> [的情况 使用 JavaScript 将所选文本复制并粘贴到剪贴板](https://stackoverflow.com/questions/6987307/copy-and-paste-the-selected-text-to-the-clipboard-using-javascript)

我对如何处理这个问题有点困惑，我在这个区域有一个文本框，我希望用户能够突出显示文本框中的一个单词。我需要捕捉突出显示的单词。它适用于除 Mozilla 之外的所有浏览器。

我在这里使用 onkeydown 事件。

```
var startPos = textComponent.selectionStart;        
var endPos = textComponent.selectionEnd;

selected = textComponent.value.substring(startPos,endPos); 
```

这是我用于 Mozilla 的代码。它不工作。

请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T10:50:56.397

使用谷歌了一下，发现这个： http: [//www.codeproject.com/Articles/292159/Javascript-code-to-get-selected-text](http://www.codeproject.com/Articles/292159/Javascript-code-to-get-selected-text)不确定是否有效，但可能有帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T09:53:25.883

```
Howvever, I managed to fix this by this code. Please use this below coding for capturing the textbox selected value.

<**head>
    <script type="text/javascript">
        function GetSelectedText () {
            var selText = "";
            if (window.getSelection) {  // all browsers, except IE before version 9
                if (document.activeElement && 
                        (document.activeElement.tagName.toLowerCase () == "textarea" || 
                         document.activeElement.tagName.toLowerCase () == "input")) 
                {
                    var text = document.activeElement.value;
                    selText = text.substring (document.activeElement.selectionStart, 
                                              document.activeElement.selectionEnd);
                }
                else {
                    var selRange = window.getSelection ();
                    selText = selRange.toString ();
                }
            }
            else {
                if (document.selection.createRange) { // Internet Explorer
                    var range = document.selection.createRange ();
                    selText = range.text;
                }
            }
            if (selText !== "") {
                alert (selText);
            }
        }
    </script>
</head>
<body onmouseup="GetSelectedText ()">
    Some text for selection.
    <br /><br />
    <textarea>Some text in a textarea element.</textarea>
    <input type="text" value="Some text in an input field." size="40"/>
    <br /><br />
    Select some content on this page!
</body>** 
```

# android - div高度标签中的设计问题？

> ID：11468951
> 
> 赞同：1
> 
> 时间：2012-07-13T10:45:19.610
> 
> 标签：android, jquery, html, cordova

我需要根据标签文本的长度更改 div 的宽度。因为我的标签文字被剪掉了。这是[我的代码](http://jsfiddle.net/elakkiya/pxU55/8/)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T05:15:42.267

您可以使用`display: inline-block`和清理它们使您难以实现所需的内联样式。如果您将它们添加到您的 css 文件中，而不是内联样式会更好。[这是编辑过的小提琴](http://jsfiddle.net/pxU55/22/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T11:37:20.003

div 必须包含在 label 中，并且您必须将位置设置为相对，`position:relative;`.

# php - php中来自MySQL的纯文本电子邮件

> ID：11468952
> 
> 赞同：3
> 
> 时间：2012-07-13T10:45:20.947
> 
> 标签：php, mysql, email, plaintext, line-breaks

情况如下。我在 MySQL 中存储了一封纯文本电子邮件，其中包含换行符为`\r\n`. 当我的 php 脚本需要发送邮件时，它首先填写一些参数，`sprintf`然后使用标准`mail()`函数发送邮件。

我遇到的问题是电子邮件客户端（在我的例子中是雷鸟）显示这些换行符而不是解释它们。

为了测试我的脚本，我在邮件中硬编码了一个句子。当我这样做时，邮件被正确解释。我的第一个问题是 MySQL 转义了反斜杠，所以我尝试做 a`str_replace("\\\\", "\\", $str)`但这无济于事。

我显然做出了错误的假设或愚蠢的错误，但我没有看到。可能是什么问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T11:40:30.390

尝试像这样替换它 str_replace('\n\r', "\n\r"); 如果 \n\r 字符在您的消息中保存为四个单独的字符，它可能会解决您的问题。如果您使用例如 phpmyadmin 输入它们，它们将被保存为 4 个字符，而不是您期望的 2 个字符。

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T11:10:38.063

尝试使用 var_dump 打印消息，这可能会显示有关字符串值的更好信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T11:25:42.487

也许使用它来绑定和删除斜线：

```
stripslashes($str); 
```

# scala - 如何从 play2 mini 中的路径参数中提取值？

> ID：11468953
> 
> 赞同：0
> 
> 时间：2012-07-13T10:45:23.153
> 
> 标签：scala, playframework, play2-mini

我将使用的方法是 DELETE 请求，我有这个用于 Web 服务调用的 url：

```
http://www.localhost:9000/example/com/foo/bar 
```

我想提取 /foo 和 /bar 并将其存储在一个变量中。

有人知道怎么做这个吗？谢谢！

我将 play2-mini 用于 Web 服务，并为 scala 发送 http 请求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T12:56:05.693

Play 有一种非常复杂的参数传递方式，那就是通过 Routes 定义。在你的 conf/Routes 文件中定义一个像

```
GET  /example/com/:foo  controllers.yourcontroller.deleteAction(foo: String) 
```

你什么时候进入

```
http://www.localhost:9000/example/com/user 
```

在您的浏览器中，`deleteAction`将调用由您的控制器定义的字符串“用户”将在其参数中传递给它`foo`。在那里你可以操纵它。请注意，后跟冒号的部分 URI 是动态的。它将接受任何满足作为字符串要求的任何内容，并将通过将其存储在`foo`变量中将其转发给 deleteAction。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T08:18:23.503

您可以使用正则表达式，如以下代码所示：

```
object App extends Application { 
  def route = Routes(
    Through("/people/(.*)".r) {groups: List[String] =>
      Action{ 
        val id :: Nil = groups
        Ok(<h1>It works with regex!, id: {id}</h1>).as("text/html") 
      }
    }, 
    {
      case GET(Path("/coco")) & QueryString(qs) => Action{ request =>
        println(request.body)
        println(play.api.Play.current)
        val result = QueryString(qs,"foo").getOrElse("noh")
        Ok(<h1>It works!, query String {result}</h1>).as("text/html") }

      case GET(Path("/cocoa")) => Action{ request =>
        Ok(<h1>It works with extractors!</h1>).as("text/html") }
      },
    Through("/flowers/id/") {groups: List[String] =>
      Action{ 
        val id :: Nil = groups
        Ok(<h1>It works with simple startsWith! -  id: {id}</h1>).as("text/html") 
      }
    }
  )
} 
```

# android - BluetoothAdapter.getDefaultAdapter() 抛出异常

> ID：11468955
> 
> 赞同：0
> 
> 时间：2012-07-13T10:45:27.130
> 
> 标签：android, bluetooth, libgdx

我尝试将蓝牙添加到我的 libgdx android 项目中。我在 Android 清单中添加了以下内容：

```
 <uses-permission android:name="android.permission.BLUETOOTH_ADMIN" />
   <uses-permission android:name="android.permission.BLUETOOTH" /> 
```

我试着跑

```
 mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter(); 
```

在非活动类-异常中。我读过该课程应该是活动课程。好的。我创造了

```
 public class BluetoothServer extends Activity {
    ...
       public void GetBluetoothAdapter () {
         mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();
      }
    } 
```

我运行它如下：

```
BluetoothServer.GetBluetoothAdapter() 
```

在同一个地方再次崩溃。我尝试了两台板载蓝牙的设备。当然，这些设备上启用了蓝牙。我不知道该怎么做。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T11:21:03.140

如果您能找到崩溃的原因，那将有很大帮助。由于某种原因，您似乎无法访问堆栈跟踪，请至少尝试一下以查看崩溃原因：

```
...
try {
    mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();
} catch (Exception e) {

    Toast toast = Toast.makeText(getApplicationContext(), e.getMessage(), 1000);
    toast.show();
}
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-12T10:22:49.747

获取代表本地蓝牙适配器的BluetoothAdapter，在JELLY_BEAN_MR1及以下运行时，调用静态getDefaultAdapter()方法；在 JELLY_BEAN_MR2 及更高版本上运行时，通过 getSystemService(String) 和 BLUETOOTH_SERVICE 检索它。 [来源](http://developer.android.com/reference/android/bluetooth/BluetoothAdapter.html)

# regex - 数组上的 Powershell 正则表达式

> ID：11468958
> 
> 赞同：0
> 
> 时间：2012-07-13T10:45:34.213
> 
> 标签：regex, powershell

尝试在此 Exchange 命令上应用以下正则表达式时出现以下错误。

```
@(Get-ExchangeServer | Format-List AdminDisplayVersion) | % { [regex]::Match($_, "^\sVersion (\d+\.\d+(\.\d+)?)\s").Success } 
```

* * *

该命令`Get-ExchangeServer | Format-List AdminDisplayVersion`返回以下内容：

```
[PS] C:\Windows\system32>Get-ExchangeServer | Format-List AdminDisplayVersion

AdminDisplayVersion : Version 14.0 (Build 442.3)

AdminDisplayVersion : Version 14.0 (Build 442.3) 
```

当将正则表达式应用于它时，我得到了所有错误：

```
[PS] C:\Windows\system32>@(Get-ExchangeServer | Format-List AdminDisplayVersion) | % { [regex]::Match($_, "^\sVersion (\
d+\.\d+(\.\d+)?)\s").Success }
False
False
False
False
False
False 
```

* * *

关于我做错了什么的任何指示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T10:57:20.593

AdminDisplayVersion 是一个 Microsoft.Exchange.Data.ServerVersion 对象，它具有所有版本部分作为属性。您可以直接获取值，而无需求助于字符串操作。如果 Build 部分是您正在寻找的：

```
Get-ExchangeServer | Foreach-Object {$_.AdminDisplayVersion.Build} 
```

基于以上内容，您可以创建如下查询：

```
Get-ExchangeServer | Where-Object {$_.AdminDisplayVersion.Build -eq 123} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T10:55:55.207

您已将正则表达式限制为以“版本”( `^\sVersion`) 开头。这是正确的一个：

`% { [regex]::Match($_, "\sVersion (\d+\.\d+(\.\d+)?)\s").Success }`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T10:56:16.020

尝试改变你的模式：

```
"\sVersion (\d+\.\d+(\.\d+)?)\s" 
```

# c# - IErrorHandler 实现不处理异常

> ID：11468963
> 
> 赞同：1
> 
> 时间：2012-07-13T10:45:55.987
> 
> 标签：c#, .net, wcf, ierrorhandler

我有一个双工 WCF 服务，我正在尝试为其创建一个全局异常处理程序。

[根据这篇博](http://www.neovolve.com/post/2008/04/07/implementing-ierrorhandler.aspx)文，我已经为 IErrorHandler 实现创建了一个行为扩展

如果我在 ApplyDispatchBehavior 方法上设置断点，我可以看到我的处理程序被添加到通道调度程序 ErrorHandlers 的属性中，但如果我随后抛出异常，则不会调用 HandleError 或 ProvideFault 方法。

我的错误处理程序如下所示：

```
internal class ControlFrameworkErrorHandler : IErrorHandler, IServiceBehavior
{
    private static readonly ILog Logger = LogManager.GetLogger(typeof(ControlFrameworkWcfService));

    public bool HandleError(Exception error)
    {
        Logger.Fatal("An unhandled exception occurred:");
        Logger.Fatal(error.Message);
        Logger.Fatal(error.StackTrace);
        return true;
    }

    public void ProvideFault(Exception error, MessageVersion version, ref Message fault)
    {
    }

    public void Validate(ServiceDescription serviceDescription, ServiceHostBase serviceHostBase)
    {
    }

    public void AddBindingParameters(ServiceDescription serviceDescription, ServiceHostBase serviceHostBase, Collection<ServiceEndpoint> endpoints, BindingParameterCollection bindingParameters)
    {
    }

    public void ApplyDispatchBehavior(ServiceDescription serviceDescription, ServiceHostBase serviceHostBase)
    {
        IErrorHandler errorHandler = new ControlFrameworkErrorHandler();

        foreach (var channelDispatcherBase in serviceHostBase.ChannelDispatchers)
        {
            var channelDispatcher = channelDispatcherBase as ChannelDispatcher;
            if (channelDispatcher != null)
            {
                channelDispatcher.ErrorHandlers.Add(errorHandler);
            }
        }
    }
} 
```

我的行为实现如下所示：

```
internal class ControlFrameworkErrorHandlerElement : BehaviorExtensionElement
{
    public override Type BehaviorType
    {
        get
        {
            return typeof(ControlFrameworkErrorHandler);
        }
    }

    protected override object CreateBehavior()
    {
        return new ControlFrameworkErrorHandler();
    }
} 
```

我的 App.config 看起来像这样：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
    <system.serviceModel>
       <services>
          <service name="ControlFrameworkService.ControlFrameworkWcfService" behaviorConfiguration="ControlFrameworkServiceBehavior">
           <host>
             <baseAddresses>
              <add baseAddress="http://localhost:8080/ControlFrameworkService/service" />
             </baseAddresses>
           </host>
        <endpoint address="" binding="wsDualHttpBinding" bindingConfiguration="WSDualHttpBinding_IControlFrameworkDuplex" contract="ControlFrameworkService.IControlFrameworkDuplex" />
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
      </service>
    </services>
    <bindings>
      <wsDualHttpBinding>
        <binding name="WSDualHttpBinding_IControlFrameworkDuplex" closeTimeout="00:01:00" openTimeout="00:01:00" receiveTimeout="24.20:31:23.6470000" sendTimeout="24.20:31:23.6470000" bypassProxyOnLocal="false" transactionFlow="false" hostNameComparisonMode="StrongWildcard" maxBufferPoolSize="8388608" maxReceivedMessageSize="2147483647" messageEncoding="Mtom" textEncoding="utf-8" useDefaultWebProxy="true" clientBaseAddress="http://localhost:808/myClient/">
          <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="8388608" maxBytesPerRead="8388608" maxNameTableCharCount="8388608" />
          <reliableSession ordered="true" inactivityTimeout="24.20:31:23.6470000" />
          <security mode="None">
            <message clientCredentialType="None" />
          </security>
        </binding>
      </wsDualHttpBinding>
    </bindings>
    <extensions>
      <behaviorExtensions>
        <add name="ControlFrameworkErrorHandler" type="ControlFrameworkService.ControlFrameworkErrorHandlerElement, ControlFrameworkService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" />
      </behaviorExtensions>
    </extensions>
    <behaviors>
      <serviceBehaviors>
        <behavior name="ControlFrameworkServiceBehavior">
          <serviceMetadata httpGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="True" />
          <dataContractSerializer maxItemsInObjectGraph="2147483647" />
          <ControlFrameworkErrorHandler />
        </behavior>
      </serviceBehaviors>
    </behaviors>
    </system.serviceModel>
    <system.diagnostics>
      <trace autoflush="true">
      </trace>
      <sources>
        <source name="System.ServiceModel" switchValue="Information, ActivityTracing"      propagateActivity="true">
          <listeners>
            <add name="sdt" type="System.Diagnostics.XmlWriterTraceListener" initializeData="WcfDetailTrace.svclog" />
          </listeners>
        </source>
      </sources>
    </system.diagnostics>
</configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T01:06:12.283

您应该将方法中的代码移动`HandleError`到`ProvideFault`方法中。出于某种原因，即使文档说`HandleError`应该使用它，但似乎并非如此。我和你有同样的问题，我用这个`ProvideFault`方法解决了。

我在互联网上读过其他一些人也提出了同样的建议。

如果其他人有更好的主意，我会全神贯注。

# spring - 如何在 Spring 中不使用 maven 安装 thymeleaf？

> ID：11468964
> 
> 赞同：1
> 
> 时间：2012-07-13T10:46:01.577
> 
> 标签：spring, spring-mvc, thymeleaf

如何在 Spring 中不使用 maven安装[Thymeleaf ？](http://www.thymeleaf.org/)那里的大多数信息都是基于使用 maven 的。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T10:32:56.060

创建一个新的空项目。如官方链接中所述，使用 maven 安装 thymeleaf（和 spring），放置您的依赖项。

打开你的 pom.xml 并添加[maven 依赖插件](https://maven.apache.org/plugins/maven-dependency-plugin/examples/copying-project-dependencies.html)。

打开命令提示符/shell 并使用以下命令获取项目 jar

```
mvn dependency:copy 
```

现在你将把所有需要的罐子放在一个地方。

现在对于您的问题，将所有这些都包含在您的项目类路径中，一切都应该没问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T13:52:56.800

像任何项目一样，如果您想在没有 Maven 的情况下使用它，您必须手动下载 jar（以及任何依赖项）并将其添加到项目的类路径中。依赖项列在下载页面[http://www.thymeleaf.org/download.html](http://www.thymeleaf.org/download.html)

# algorithm - 用于检测未知周期（时间序列）中的位置的算法

> ID：11468969
> 
> 赞同：3
> 
> 时间：2012-07-13T10:46:15.110
> 
> 标签：algorithm, machine-learning, artificial-intelligence, time-series, hidden-markov-models

假设您想预测下一次船将访问的概率。您开始在船周期中的任意位置进行观察。当您进行观察时，您只能记录船是否可见（假设它是循环中的正确点，船总是可见）。在这个世界上，船的周期长度也是未知的，但具有周期性，而船的访问时间是未知的，但总是**小于**周期长度。还假设周期是一种固定的自然现象，可能不会改变。

案例 1\. 观察的第一个小时你没有看到船。因此，预测下一小时内有船的概率将是任意的。我们观察到一艘船的第二个小时，我们预测第 3 个小时的概率很高。在第 4 个小时我们没有观察到船，我们现在可以确定这艘船通常可以观察 2 个小时（第 2 和第 3 个小时）。我们继续观察，在第 7 个小时，船再次可见。只有在这一点上，我们才知道循环长度（5 小时）和可观察船的持续时间（2 小时）。

案例 2\. 第一个小时观察你看到一艘船。下一小时的预测概率很高。在第 4 小时，您没有观察到任何船只。此时船能见度至少为3小时。我们在 5、6、7、8 小时再次观察船，在 9 小时没有船。只有在 9 小时之后，我们才能有把握地说周期是 5 小时，能见度是 4 小时。

案例 3\. 看到船的第一个小时。你去睡3个小时。在第 5 小时，您看不到船。你去睡3个小时。在第 9 点，您会看到一艘船。在 10、11、12 小时看到船的概率是多少？

我可以使用什么算法来解决这个问题？我认为隐藏马尔可夫模型可能会起作用，因为存在潜在的现象，但它不是直接可观察的。但在这种情况下，这种现象并不完全清楚。在我的特殊情况下，我可以用平均循环长度初始化算法。创建此算法的真正动机是观察结果在两者之间非常少。这个程序在训练阶段最有价值，因为如果知道循环长度和我们在循环中的位置，事情就会变得微不足道。

**以下是使用8小时的平均历史周期长度和****2**小时的船持续时间给定 0、1、2 和 3*次连续*观察（X 表示看到船的观察，O 表示没有船的观察）大致可以输出的内容。仔细查看图表，您会注意到船可能返回的位置周围的概率有所增加。 ****![内部概率分布](../Images/986deeb9c20b7a586db9158b6083662f.png)****

 ***** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T17:34:07.027

我不是这种建模方面的专家，但我建议你保持*相互竞争的理论*。

**案例 1：第 1**
小时：没有船。所以“关闭”阶段的长度至少为 1，关闭阶段的长度可以是任何值。我们可以把它写成 [1+, 0+]。循环的长度为 (1+) + (0+) = 1+。
第 2 小时：船。模型现在是 [1+, 1+]，它不预测第 3 个小时，但我们经常看到船，所以我们计算 1/2 的概率。循环长度为 2+。
第 3 小时：无观察。理论分裂。如果没有船，我们将有 [1+, 1]（并预测 1/3）；如果有船，我们会有 [1+, 2+] （并预测 2/3）。所以我们的模型是 {[1+,1],[1+,2+]，我们预测 1/2。
第 4 小时：没有船。我们修改理论：{[2+,1], [1+,2]} 并预测 3/8。
第 5 小时：没有 obs。模型再次分叉：
[2+,1] -> [3+,1], [2,1]
[1+,2] -> [2+,2], [1,2]
请注意，其中两个理论声称是完整的（但在第 6 小时左右做出相反的预测）。预测为 2/5 或 40%。
第 6 小时：没有 obs。不完全理论分叉：
[3+,1] -> [4+,1], [3,1]
[2,1]
[2+,2] -> [3+,2], [2,2]
[ 1,2]
预测为 1/4。
7 小时：船。这摧毁了三种理论，证明了一种理论，完成了一种理论，并导致了一种分裂：
[4+,1] -> [4,1]
~~[3,1]
[2,1]~~
[3+,2] -> [3 ,2]
[2,2]
~~[1,2]~~
**周期为 5，能见度为 1 或 2 小时。**第 8 小时的预测是 1/3。

**案例 2：第**
1 小时：船。[0+,1+]
小时 2：无 obs。[1+,1+], [0+,2+]。预测 3/4。
第 3 小时：没有 obs。[2+,1+]、[1,1+]、[1+,2+]、[0+,3+]。概率 2/3。
第 4 小时：没有船。[3+,1+], [1,1], [2+,2+], [1+,3+]。概率 5/8。
第 5 小时：船。[3,1+]、[1,1]、[2,2+]、[1,3+]。概率 3/5。
第 6 小时：船。[3,2+]、[2,2+]、[1,3+]。概率 2/3。
7 小时：船。[3,3+]、[2,3+]、[1,3+]。概率 5/7。
8 小时：船。[3,4+]、[2,4+]、[1,4+]。概率 3/4。
9 小时：没有船。[3,4]、[2,4]、[1,4]。概率 1/3。能见度为4小时，**但时间不详。**

我不会处理案例 3，但你明白了。****

# iphone - numberOfRowsInSection：未在 reloadData 上调用

> ID：11468970
> 
> 赞同：17
> 
> 时间：2012-07-13T10:46:16.897
> 
> 标签：iphone, objective-c, uitableview

我有一个`UITableView`使用数组列出数据的。这工作正常。我也有一个`UISearchBar`for search in that `tableview`。当 tableviews 数组中的数据匹配时，这些行将添加到另一个可变数组中，并`cellForRowAtIndexPath:`改为显示来自该可变数组的数据。

但是`numberOfRowsInSection:`当我调用 reloadData 时永远不会调用它。因此`tableview`滚动时崩溃，因为它试图从可变数组中获取数据，但是对于原始数组中的行（它有更多项目）

我已经调试了一段时间，但看在上帝的份上，找不到原因。Datasource 和 Delegate 是挂钩的`tableview`，因为它可以显示原始数组中的数据。

```
 - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
    {
         NSLog(@"isSearching: %d", isSearching);
         // Return the number of rows in the section.
         if(!isSearching)
            return [originalArray count];

         NSLog(@"isSearching - Return searchCopyListOfItems");
         return [searchCopyListOfItems count];
    }

    - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
    {
         static NSString *CellIdentifier = @"Cell";
         UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

         if(cell == nil) {
             cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
         }

         if(!searching)
             cell.textLabel.text = [originalArray objectAtIndex:indexPath.row];
         else
             cell.textLabel.text = [searchCopyListOfItems objectAtIndex:indexPath.row];

         return cell;
    } 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2017-04-15T13:13:56.560

如果`numberOfSections`返回`0`，`numberOfRowsInSection`将不会被调用。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-13T10:53:41.543

确保不要`reloadData`从任何表视图的委托方法中调用。这将导致不可预测的行为。另外，请确保您之前没有调用`beginUpdates`过，并且您只`reloadData`从主线程调用您的方法。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-13T11:03:02.350

你如何重新加载你的表？做对了`[table relaodData];`吗？您的桌子是否连接到您笔尖上的 IBOutlet？在重新加载时，是否已`table`初始化？

您也可以发布崩溃信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-12-01T10:41:28.963

我今天在 XCode 6.1 上遇到了同样的问题

在我的代码中，我设置了`dataSource`and `delegate`：

```
-(void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];

    self.tableView.dataSource = self;
    self.tableView.delegate = self;
} 
```

...奇怪的是，我的代码在第一次加载时*会*填充表格...但它随后忽略了对`reloadData`.

在情节提要中，当我右键单击情节提要中的表格视图时，它的“出口”单选按钮是一个空圆圈。

我从这个空圆圈拖了一条线到 parent ，`UIView`然后*确实*`reloadData`工作正常。

![在此处输入图像描述](../Images/f966ed3fa833998b0596c90f2dca16a7.png)

不知何故，我失去了`IBOutlet`我的 UITableView 控件和用于填充它的 .h/.m 文件之间的链接。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-06-09T19:26:01.103

还要确保您在重新加载数据的过程中没有移动表，因为它可能会`cellForRowAtIndexPath:`在您仍在更新数据时调用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-10-29T14:34:17.883

对我来说，问题是被截断的节数返回 0，即使我不打算使用节，也必须为 1，因为它在对象层次结构中高于行：[https ://stackoverflow.com /a/26632808/1449799](https://stackoverflow.com/a/26632808/1449799)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-07-30T21:15:03.283

对我来说，问题是我试图增加一个值*并*从`numberOfSectionsInTableView`

IE`return someValue++`

显然这是不可能的，在我的例子中，它没有`someValue`从 0 增加到 1，因此返回 0 部分，因此没有理由`numberOfRowsInSection:`调用 ！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-01-11T10:00:31.197

对我来说，解决方案是我从另一个笔尖复制粘贴它，忘记重新连接 IB 中的`dataSource`和`delegate`插座。这曾经发生在我身上，但我想我会把它贴在这里，以防这个解决方案帮助一些遇到这个问题的人。

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2012-07-13T16:32:10.997

尝试

```
[self.tableView reloadData]; 
```

# jruby - 在 Jruby 应用程序中加载 java 类时出错

> ID：11468973
> 
> 赞同：0
> 
> 时间：2012-07-13T10:46:51.230
> 
> 标签：jruby, jrubyonrails

我已经在 Torquebox 上部署了我的 Ruby on Rails 应用程序。启动服务器后，我收到此错误

```
 10:18:06,311 ERROR [org.torquebox.core.runtime] (Thread-95) Error during execution: ENV['RAILS_ROOT']=RACK_ROOT
ENV['RAILS_ENV']=RACK_ENV
require %q(org/torquebox/web/rails/boot)
: org.jruby.exceptions.RaiseException: (NameError) cannot load Java class sun.security.tools.KeyTool
        at org.jruby.javasupport.JavaClass.for_name(org/jruby/javasupport/JavaClass.java:1205) [jruby.jar:]
        at org.jruby.javasupport.JavaUtilities.get_proxy_class(org/jruby/javasupport/JavaUtilities.java:34) [jruby.jar:]
        at Object.java_import(/opt/torquebox/current/jruby/lib/ruby/site_ruby/shared/builtin/javasupport/core_ext/object.rb:46) at Module.Tomcat(/opt/torquebox/current/jruby/lib/ruby/gems/1.8/gems/trinidad_jars-1.0.3/lib/trinidad/jars.rb:20)        at (Anonymous).Trinidad(/opt/torquebox/current/jruby/lib/ruby/gems/1.8/gems/trinidad_jars-1.0.3/lib/trinidad/jars.rb:10)        at (Anonymous).(root)(/opt/torquebox/current/jruby/lib/ruby/gems/1.8/gems/trinidad_jars-1.0.3/lib/trinidad/jars.rb:5)    at org.jruby.RubyKernel.require(org/jruby/RubyKernel.java:1033) [jruby.jar:]
        at (Anonymous).(root)(/opt/torquebox/current/jruby/lib/ruby/gems/1.8/gems/trinidad_jars-1.0.3/lib/trinidad/jars.rb:10)  at org.jruby.RubyKernel.require(org/jruby/RubyKernel.java:1033) [jruby.jar:]
        at Runtime.require(/opt/torquebox/current/jruby/lib/ruby/gems/1.8/gems/trinidad-1.3.5/lib/trinidad.rb:68)       at org.jruby.RubyArray.each(org/jruby/RubyArray.java:1615) [jruby.jar:]
        at Runtime.require(/opt/torquebox/current/jruby/lib/ruby/gems/1.8/gems/bundler-1.1.3/lib/bundler/runtime.rb:66) at org.jruby.RubyArray.each(org/jruby/RubyArray.java:1615) [jruby.jar:]
        at Runtime.require(/opt/torquebox/current/jruby/lib/ruby/gems/1.8/gems/bundler-1.1.3/lib/bundler/runtime.rb:55) at (Anonymous).require(/opt/torquebox/current/jruby/lib/ruby/gems/1.8/gems/bundler-1.1.3/lib/bundler.rb:119)     at (Anonymous).(root)(/usr/share/reposiotry/Purple-Hills/config/application.rb:18)      at org.jruby.RubyKernel.require(org/jruby/RubyKernel.java:1033) [jruby.jar:]
        at (Anonymous).(root)(/usr/share/reposiotry/Purple-Hills/config/application.rb:2)       at org.jruby.RubyKernel.load(org/jruby/RubyKernel.java:1058) [jruby.jar:]
        at (Anonymous).(root)(/usr/share/reposiotry/Purple-Hills/config/environment.rb:109)     at org.jruby.RubyKernel.require(org/jruby/RubyKernel.java:1033) [jruby.jar:]
        at (Anonymous).(root)(file:/opt/torquebox/current/jboss/modules/org/torquebox/web/main/torquebox-web.jar!/org/torquebox/web/rails/boot.rb:3)
10:18:06,362 ERROR [org.torquebox.core.runtime] (Thread-95) Failed to initialize runtime: : org.jruby.exceptions.RaiseException: (NameError) cannot load Java class sun.security.tools.KeyTool
        at org.jruby.javasupport.JavaClass.for_name(org/jruby/javasupport/JavaClass.java:1205) [jruby.jar:]
        at org.jruby.javasupport.JavaUtilities.get_proxy_class(org/jruby/javasupport/JavaUtilities.java:34) [jruby.jar:]
        at Object.java_import(/opt/torquebox/current/jruby/lib/ruby/site_ruby/shared/builtin/javasupport/core_ext/object.rb:46) at Module.Tomcat(/opt/torquebox/current/jruby/lib/ruby/gems/1.8/gems/trinidad_jars-1.0.3/lib/trinidad/jars.rb:20)        at (Anonymous).Trinidad(/opt/torquebox/current/jruby/lib/ruby/gems/1.8/gems/trinidad_jars-1.0.3/lib/trinidad/jars.rb:10)        at (Anonymous).(root)(/opt/torquebox/current/jruby/lib/ruby/gems/1.8/gems/trinidad_jars-1.0.3/lib/trinidad/jars.rb:5)    at org.jruby.RubyKernel.require(org/jruby/RubyKernel.java:1033) [jruby.jar:]
        at (Anonymous).(root)(/opt/torquebox/current/jruby/lib/ruby/gems/1.8/gems/trinidad_jars-1.0.3/lib/trinidad/jars.rb:10)  at org.jruby.RubyKernel.require(org/jruby/RubyKernel.java:1033) [jruby.jar:]
        at Runtime.require(/opt/torquebox/current/jruby/lib/ruby/gems/1.8/gems/trinidad-1.3.5/lib/trinidad.rb:68)       at org.jruby.RubyArray.each(org/jruby/RubyArray.java:1615) [jruby.jar:]
        at Runtime.require(/opt/torquebox/current/jruby/lib/ruby/gems/1.8/gems/bundler-1.1.3/lib/bundler/runtime.rb:66) at org.jruby.RubyArray.each(org/jruby/RubyArray.java:1615) [jruby.jar:]
        at Runtime.require(/opt/torquebox/current/jruby/lib/ruby/gems/1.8/gems/bundler-1.1.3/lib/bundler/runtime.rb:55) at (Anonymous).require(/opt/torquebox/current/jruby/lib/ruby/gems/1.8/gems/bundler-1.1.3/lib/bundler.rb:119)     at (Anonymous).(root)(/usr/share/reposiotry/Purple-Hills/config/application.rb:18)      at org.jruby.RubyKernel.require(org/jruby/RubyKernel.java:1033) [jruby.jar:]
        at (Anonymous).(root)(/usr/share/reposiotry/Purple-Hills/config/application.rb:2)       at org.jruby.RubyKernel.load(org/jruby/RubyKernel.java:1058) [jruby.jar:]
        at (Anonymous).(root)(/usr/share/reposiotry/Purple-Hills/config/environment.rb:109)     at org.jruby.RubyKernel.require(org/jruby/RubyKernel.java:1033) [jruby.jar:]
        at (Anonymous).(root)(file:/opt/torquebox/current/jboss/modules/org/torquebox/web/main/torquebox-web.jar!/org/torquebox/web/rails/boot.rb:3)
10:18:06,385 INFO  [org.torquebox.core.runtime] (Thread-95) Created ruby runtime (ruby_version: RUBY1_8, compile_mode: JIT, app: Purple-Hills, context: web) in 29.45s 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T20:23:37.670

看起来您的 Gemfile 中有 trinidad gem。TorqueBox 下不需要该 gem，并且可能无法正确加载。尝试将 trinidad 作为依赖项删除，看看是否有帮助。如果没有，请在 irc（freenode 上的#torquebox）或[邮件列表中](http://torquebox.org/community/mailing_lists/)与我们会面，我们将为您提供帮助。

# mysql - 来自 3 个表的 MySQL 查询

> ID：11468978
> 
> 赞同：2
> 
> 时间：2012-07-13T10:47:02.420
> 
> 标签：mysql, sql

假设我有 3 张桌子，比如..

```
____________
|pid |pname|
| 1  |  a  |
| 2  |  b  |
| 3  |  c  |
------------
product

____________
|pid | qty |
| 1  |  5  |
| 2  |  8  |
| 1  |  5  |
------------
stock

____________
|pid | qty |
| 2  |  4  |
| 1  |  3  |
| 1  |  2  |
------------
sale 
```

现在我想首先从产品表中选择快速项目（a）然后选择总数量。库存表和销售表中的项目，并从库存数量的总数和销售数量的总数中减去该值。就像这个例子——

```
________________________________
|pname |  Stock | Sale | remain |
|  A   |   10   |  5   |    5   |
|  B   |   8    |  4   |    4   |
|  C   |   0    |  0   |    0   |
--------------------------------- 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T10:58:09.087

您可以执行以下操作：参见[SQL Fiddle with Demo](http://sqlfiddle.com/#!2/101c6/4)

```
select p.pname
  , st.TotalStock
  , sl.TotalSale
  , st.TotalStock - sl.TotalSale as Remain
from product p
inner join 
(
  select pid, sum(qty) as TotalStock
  from stock 
  group by pid
) st
  on p.pid = st.pid
inner join
(
  select pid, sum(qty) as TotalSale
  from sale
  group by pid
) sl
  on p.pid = sl.pid 
```

将为您提供所有表中存在的`INNER JOIN`记录，但如果您想查看仅存在于某些表中的记录，请使用`LEFT JOIN`（请参阅[SQL Fiddle](http://sqlfiddle.com/#!2/101c6/22)）

```
select p.pname
  , ifnull(st.TotalStock, 0) as TotalStock
  , ifnull(sl.TotalSale, 0) as TotalSale
  , ifnull(st.TotalStock, 0) - ifnull(sl.TotalSale, 0) as Remain
from product p
left join 
(
  select pid, sum(qty) as TotalStock
  from stock 
  group by pid
) st
  on p.pid = st.pid
left join
(
  select pid, sum(qty) as TotalSale
  from sale
  group by pid
) sl
  on p.pid = sl.pid 
```

# jquery - jquery 通过 id 或缓存的 dom 节点和 find(id) 获取

> ID：11468979
> 
> 赞同：0
> 
> 时间：2012-07-13T10:47:05.320
> 
> 标签：jquery, performance, dom, iteration

我正在尝试对我的代码进行一些速度改进，我想知道哪种方式是访问 DOM 的更好/更快的方式。

我有一个对应于 <li> 的 id 数组，我想遍历它们并添加一个类。

我有两种方法：1）循环遍历 ids 数组，通过 id 获取元素并应用类

```
 for(var i=0; i<idArray.length i++){
       $('#'+idArray[i]).addClass('someclass')
     } 
```

2）提取DOM节点，缓存它，然后循环遍历它，所以我只迭代DOM的一部分

```
 var column=$('#my_ul');

    for(var i=0; i<idArray.length i++){
       column.find('#'+idArray[i]).addClass('someclass')
     } 
```

预先感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T10:51:15.023

您可以使用以下方法避免循环：

```
 $( "#" +idArray.join( ",#") ).addClass("someclass"); 
```

选择器将解析为：

```
"#" +["asd","dasd","daa"].join( ",#") 
//"#asd,#dasd,#daa" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T10:51:11.950

选项 1 应该更快。但是，如果这些都是一个父级的所有子级，则将类添加到父级可能是个好主意。

# bash - 如何让 sudo 访问 bash 脚本？

> ID：11468984
> 
> 赞同：13
> 
> 时间：2012-07-13T10:47:22.340
> 
> 标签：bash, sudo, sudoers

我有一个 bash 脚本（`chbr.sh`）来从终端更改我的显示亮度，因为我的亮度键不起作用。

```
`sudo setpci -s 00:02.0 F4.B=30` 
```

现在，每次我运行该脚本时，它都会要求输入我不喜欢的密码。所以，我用谷歌搜索了一下，发现可以编辑`/etc/sudoers`文件来禁用密码功能。

所以，我`sudoers`用以下内容编辑了我的文件

```
ronnie ALL = (ALL) NOPASSWD: /home/ronnie/chbr.sh 
```

现在，当我运行我的脚本时，`./chbr.sh`它再次询问我的密码。那么，这不是让 sudo 访问 bash 脚本的正确方法，还是我在这里做错了什么。

```
ronnie@ronnie:~$ ls -l chbr.sh
~rwxrwxr-x 1 ronnie ronnie 46 Jul 13 15:59 /home/ronnie/chbr.sh 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-13T10:50:50.203

您使一切正确，但使用完整路径执行脚本：

```
$ sudo /home/ronnie/chbr.sh 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T10:49:38.750

你跑`sudo /home/ronnie/chbr.sh`吗？

随着文件的内容是

```
setpci -s 00:02.0 F4.B=30 
```

或者您允许用户 ronnie 在`setpci`没有密码的情况下使用 sudo：

`ronnie ALL = (ALL) NOPASSWD: /sbin/setpci`<-- 或您的 setpci 所在的任何路径。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-02-23T07:05:03.530

对于任何偶然进入这个旧论坛的人。您不需要 sudo 来更改亮度。它可以通过“轻”程序来完成，其中

```
light -A 5 
```

增加亮度 5 和

```
light -U 5 
```

用 5 降低亮度。

# c# - 如何在 c# windows 窗体的 webbrowser 组件中播放选定的组合框项目？

> ID：11468992
> 
> 赞同：0
> 
> 时间：2012-07-13T10:48:17.287
> 
> 标签：c#

我的 WinForms 应用程序的组合框组件中列出了一些 flash 文件。现在，如果选择了文件，我希望它在 webBrowser 组件中播放，这里是代码：

将文件添加到组合框中：

```
 private void Form1_Load(object sender, EventArgs e)
    {
        string[] filePaths = Directory.GetFiles(@"c:\folder\");

          foreach (string s in filePaths)
        {
            comboBox1.Items.Add(s);
        } 
    } 
```

播放 Flash 文件：

```
 private void comboBox1_SelectedIndexChanged(object sender, EventArgs e)
    {
        this.webBrowser1.Navigate(comboBox1.SelectedText); //it doesnt work
    } 
```

我可以正常打开 Flash 文件，看起来我无法从组合框中传递选定的值。

**更新**

为了确保此事件有效，我将其更改为：

```
private void comboBox1_SelectedIndexChanged(object sender, EventArgs e)
{
        this.textBox1.Text = "adsfadsf";
        this.textBox2.Text = comboBox1.SelectedText;
} 
```

当我更改所选项目时，字符串 adsfadsf 出现在 textBox1 中，但 textBox2 保持为空。

**更新2**

**这是完整的代码：**

```
using System;
using System.IO;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace App1
{
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();

        string[] filePaths = Directory.GetFiles(@"c:\folder\");

        foreach (string s in filePaths)
        {
            comboBox1.Items.Add(s);
        } 
    }

    private void label1_Click(object sender, EventArgs e)
    {

    }

    private void button1_Click(object sender, EventArgs e)
    {

    }

    private void Form1_Load(object sender, EventArgs e)
    {

    }

    private void comboBox1_SelectedIndexChanged(object sender, EventArgs e)
    {
        this.textBox2.Text = "adsfadsf";
        this.textBox1.Text = comboBox1.SelectedText;
       // this.webBrowser1.Navigate(comboBox1.SelectedText);
    }

    private void webBrowser1_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
    {

    }

    private void textBox2_TextChanged(object sender, EventArgs e)
    {

    }

} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T11:54:17.320

快速回答您的问题 - 使用 comboBox1.Text，而不是 comboBox1.SelectedText。

这里更大的问题是，如果您正确使用调试器，您可能很快就会发现这一点。如果您不知道如何执行此操作，请参阅快速教程：

我为此使用VS2008，但在所有版本中几乎相同。

首先，在无法正常工作的代码行上设置断点。单击左边距，您将看到一个显示断点的红点。

接下来，运行您的代码。当您更改下拉菜单时，断点将触发，您将返回到 Visual Studio。您可以将鼠标指向“comboBox1.SelectedText”的“SelectedText”部分，并看到它显示任何空字符串，这就是您的应用程序无法按预期工作的原因。

Then hover over the "comboBox1" portion, and you'll see a small amount of info on the variable. Click the "+" on the left, and it will expand. You can scroll down through the properties and values, and see that the value you're looking for is in the "Text" property.

# java - Spring Web：从 HTTP 查询参数加载 ModelMap

> ID：11468993
> 
> 赞同：0
> 
> 时间：2012-07-13T10:48:55.367
> 
> 标签：java, spring-mvc

来自关于重定向的[spring doc ：](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/mvc.html#mvc-redirecting-redirect-view)

> 所有模型属性都作为 HTTP 查询参数公开

重定向后，如何从 HTTP 查询参数加载 ModelMap。我可以避免手动添加属性吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T12:35:09.810

通过通常的 Spring MVC 绑定，使用`@RequestParam("modelName")`或传入一个支持表单以被 Spring 绑定`requestMappedMethod(MyBackingForm form, Model model)`

如果您使用的是 Spring 3.1，您还可以在重定向点进行 flashmaps，然后您实际上可以直接从重定向控制器中的模型中检索它。

```
fromRedirectMethod(..., RedirectAttributes redirectAttrs){
     redirectAttrs.addFlashAttribute("myAttr1","myAttrVal1").addFlashAttribute("myAttr2", "myAttrVal2");
...perform redirect
}

inRedirectedMethod(@ModelAttribute("myAttr1") myAttr1.., Model model){
    model.asMap().get("myAttr2");.
} 
```

# android - 删除 Google 地图上的场所

> ID：11468996
> 
> 赞同：-1
> 
> 时间：2012-07-13T10:49:08.627
> 
> 标签：android, google-maps

我正在将 Google 地图集成到我的应用程序中，但我认为如果在添加我自己的设施标记（包括默认情况下不在 Google 地图上的设施）之前删除默认显示的设施会更好。

有没有办法做到这一点？我找到了一个，但它只适用于基于网络的谷歌地图。请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T14:10:37.750

如果您使用所选 SDK 的 Google API 版本中的 MapView。您可以使用地图的网格并添加您的自定义 POI :) helloMaps 示例将引导您理解我的意思： [https ://developers.google.com/maps/documentation/android/hello-mapview](https://developers.google.com/maps/documentation/android/hello-mapview)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T12:23:55.657

您无法使用 Google 地图删除它们，您需要使用 Google Maps API v3 和隐藏兴趣点 (POI) 的自定义样式地图

查看[此搜索的结果](https://groups.google.com/group/google-maps-js-api-v3/search?group=google-maps-js-api-v3&q=hide+pois&qt_g=Search+this+group)

# .htaccess - .htaccess 输出 url 取决于子域和请求的文件

> ID：11468997
> 
> 赞同：1
> 
> 时间：2012-07-13T10:49:09.640
> 
> 标签：.htaccess, mod-rewrite

我希望我的 .htaccess 具有以下输入/输出模式：

**场景#1：**

输入：http: `subdomain`//.domain.com

输出：[http ://www.domain.com/usersite/site.php?site=](http://www.domain.com/usersite/site.php?site=)`subdomain`

**场景#2：**

输入：http: `subdomain`//.domain.com/tos.html

输出：[http ://www.domain.com/usersite/tos.php?site=](http://www.domain.com/usersite/tos.php?site=)`subdomain`

* * *

我设法使用以下 .htaccess 处理场景 #1：

```
RewriteCond %{HTTP_HOST} !^www.domain.com
RewriteCond %{HTTP_HOST} ([^.]+).domain.com [NC]
RewriteRule ^(.*)$ http://www.domain.com/usersite/site.php?site=%1 [L] 
```

但我不知道如何处理场景 #2 ......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T16:34:45.077

更改您的规则，使其仅处理`^$`（例如，没有 URI，只是`/`）。然后复制条件并确保您没有重写现有资源，检查**-f**和**-d**：

第一条规则：

```
RewriteCond %{HTTP_HOST} !^www.domain.com
RewriteCond %{HTTP_HOST} ([^.]+).domain.com [NC]
RewriteRule ^$ http://www.domain.com/usersite/site.php?site=%1 [L] 
```

第二条规则：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{HTTP_HOST} !^www.domain.com
RewriteCond %{HTTP_HOST} ([^.]+).domain.com [NC]
RewriteRule ^(.*)\.html$ http://www.domain.com/usersite/$1.php?site=%1 [L] 
```

那应该处理您的第二种情况，重定向`/tos.html`到`/usersite/tos.php?site=subdomain`

# asp.net - 检测 ASP.NET 中的 Web 服务故障

> ID：11468998
> 
> 赞同：1
> 
> 时间：2012-07-13T10:49:12.497
> 
> 标签：asp.net, web-services, http-status-codes

我有一个 ASP.NET Web 应用程序，它调用远程服务器上的 Web 服务。我希望应用程序能够检测到由于远程服务器上的任何故障而无法访问 Web 服务的时间。

应用程序必须能够区分远程服务器上的故障和其他情况导致的故障。例如，它必须能够检测 Web 服务 url 已被防火墙阻止与远程服务器上的 Http 服务不可用之间的差异。

任何人都可以建议这样做的方法吗？理想情况下，该解决方案将使用 HttpWebResponse 对象上返回的 HttpStatusCode。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T23:43:46.640

在调用远程服务器的代码周围放置一个 try 子句，然后捕获 WebException。WebException 对象内部将是一个 HttpWebResponse ，其中包含状态代码和有关远程服务器响应的其他美味信息。

```
try
{
    var request = (HttpWebRequest)WebRequest.Create("https://remote.service.com/getdata");
    request.Method = "GET";
    HttpWebResponse response = request.GetResponse() as HttpWebResponse
}
catch (WebException wx)
{
    HttpWebResponse webExceptionResponse = (HttpWebResponse)wx.Response;
    var sr = new StreamReader(webExceptionResponse.GetResponseStream(), Encoding.UTF8);
    string jsonResult = sr.ReadToEnd();
    HttpStatusCode status = webExceptionResponse.StatusCode;
} 
```

# php - 如何在php中修改上传文件的内容类型？

> ID：11468999
> 
> 赞同：5
> 
> 时间：2012-07-13T10:49:12.847
> 
> 标签：php, curl, mime-types

我想使用图像上传 API。它通过 POST 接收图像文件并将我上传的图像的 URI 发送给我。但是该 API 向我发送错误如果图像的 Content-Type 不是一种图像 mime 类型（例如 image/jpeg、image/png，...）

但是当我通过 FTP 上传图像文件并使用 CURL 作为文件上传时，它会向我发送错误，因为该图像的 Content-Type 始终是“application/octet-stream”。我想修改这个 mime 类型。有没有办法修改这个？

这是代码：

```
<?php
$fileUploadPostParams = Array(
    "uploadedfile" => "@/files.jpg"
);

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, "http://uix.kr/widget/parameter.php");
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, $fileUploadPostParams);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
echo curl_exec($ch);
?> 
```

结果如下：

```
...
===== file ===== 
Array
(
    [uploadedfile] => Array
        (
            [name] => 2312.jpg
            [type] => application/octet-stream
            ^^^^ I want to change here...
            [tmp_name] => /tmp/php5bigGV
            [error] => 0
            [size] => 383441
        )
) 
```

抱歉英语不好..谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-13T11:00:12.997

您可以像这样在参数中指定类型：

```
$fileUploadPostParams = array(
    "uploadedfile" => "@/files.jpg;type=image/jpeg"
); 
```

从[curl 的手册页](http://curl.haxx.se/docs/manual.html)：

> -F 接受像 -F "name=contents" 这样的参数。如果要从文件中读取内容，请使用 <@filename> 作为内容。指定文件时，还可以通过附加 ';type=' 来指定文件内容类型