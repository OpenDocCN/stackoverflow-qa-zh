# StackOverflow 问答 11075000-11075999

# boot - 为什么 55 AA 用作 IBM PC 上的引导签名？

> ID：11075003
> 
> 赞同：13
> 
> 时间：2012-06-17T21:39:17.550
> 
> 标签：boot, signature, bootloader, bootstrapping

为什么**IBM PC**架构在引导`55 AA`扇区的最后两个字节中使用幻数作为**引导签名**？

我怀疑这与它们的位模式有关：`01010101 10101010`，但不知道是什么。

我的猜测是：

1.  BIOS 正在对这些字节进行一些按位和/或/异或操作以将它们比较在一起，例如，如果结果为 0，它可以很容易地检测到并跳转到某个地方。
2.  它可能是一些奇偶校验/完整性保护措施，如果其中一些位被破坏，它可能会被检测到或其他东西，并且即使磁盘上的这个特定位已被破坏或其他东西，仍然被认为是正确引导系统的有效签名。

也许你们中的某个人可以帮我回答这个烦人的问题？

我记得我曾经在某处读过这些位模式，但不记得在哪里。它可能在一些纸质书中，因为我在网上找不到任何关于它的信息。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-17T21:50:56.043

我认为它是任意选择的，因为 10101010 01010101 似乎是一个不错的位模式。Apple ][+ 重置向量与 $A5 异或到 (10100101) 以产生校验值。有些机器使用更“特定”的东西进行启动验证；对于 PET 衍生机器（例如 Commodore Business Machines 的 VIC-20 和 Commodore 64），位于例如地址 $8000 的可引导墨盒映像将 PETASCII 字符串“CBM80”存储在地址 $8004（购物车起始价为 $A000将在 $A004 处具有字符串“CBMA0”等），但我猜 IBM 认为不会插入任何其他机器的磁盘，并且在第一个扇区的最后两个字节中具有 $55AA。

# javascript - 在 jQuery 中处理数据

> ID：11075007
> 
> 赞同：14
> 
> 时间：2012-06-17T21:39:53.213
> 
> 标签：javascript, jquery, html

我想问更多的意见而不是一个问题：当你必须做一个包含大量数据的网页时，社区会建议做什么，例如，一个产品列表，应该有一些功能，比如购买（添加到购物车） 、排序等，如果非要操作当前商品的数据——价格、标题、图片、链接等属性？你如何在你的项目中做到这一点？

例如，我们有一个包含几十个产品的页面，每个产品都有属性：价格、标题、描述、图片（URL）、链接（URL）。您将如何存储数据以在某些用户交互中使用它？就个人而言，我只是通过在标签中插入每个属性来完成它，例如：

```
<div class="product" data-product_id="123">
  <div class="pr_title">Title</div>
  <div class="pr_body">Body</div>
  <div class="pr_img"><img src="http://www.www.www/img.png"></div>
  <div class="pr_link"><a href="http://www.stackoverflow.com/">Buy!</a></div>
</div> 
```

这样，我就有了用于演示的 html 结构，并通过以下方式在 jQuery 中处理数据：

```
var url = $('.product').find('.pr_link').find('a').attr('href'); 
```

但是当项目变大并且每个元素添加了 10-15 个以上的属性时，从当前产品中获取数据变得非常复杂，并且代码变得几乎不可读。

我想过使用相同的结构，但要将数据保存在某个对象中，例如：

```
var products = {
    1: {
        title: "abc",
        description: "lorem ipsum",
        price: 25.19,
        img: "http://www.www.www/img.png",
        link: "http://www.stackoverflow.com"
    }
} 
```

并保持标记尽可能简单，仅使用 css 设计所需的元素和样式：

```
<div class="product" data-product_id="123">
  <div class="title">Title</div>
  <div>Body</div>
  <img src="http://www.www.www/img.png">
  <a href="http://www.stackoverflow.com/">Buy!</a>
</div> 
```

所以`onClick`我需要检索产品的 id 并在我们的对象“产品”中查询它：

```
var url = products[id].title; 
```

虽然这是最方便的使用方式，但它需要一个新对象。

另一个想法是将所有数据保存在`data-`父 div 元素的属性中，例如：

```
<div class="product" data-product_id="123" data-title="abc" data-body="Body"> 
```

但据我所知，jQuery 不能很好地处理数据属性（本机）。

那么你有什么建议呢？也许你有一些更好的想法要分享。

PS我试图找到有关该主题的一些信息，但很可能未能找到很好的表述方式，因此我一无所获。如果堆栈交换站点上有链接甚至类似的问题，请随时发布。先感谢您！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T15:19:32.787

您可以使用`HTML5` `data`属性来存储产品数据，因为您有多个产品属性与每个产品块相关联，您可以`JSON encode`对象并分配给顶部元素，然后可以在该元素或任何子元素上的用户交互中访问它。

```
var product = {
    title: "abc",
    description: "lorem ipsum",
    price: 25.19,
    img: "http://www.www.www/img.png",
    link: "http://www.stackoverflow.com"
};
$(selector).data('product',JSON.stringify(product)); 
```

然后检索您可以在任何事件的回调中执行的对象

```
$product = $.parseJSON($(elem).data('product')); 
```

事实上，`facebook`和都`twitter`使用数据属性来存储与`tweets`和关联的数据`stories`。例如这里有一些 FB 故事的 html

```
<li data-ft='{"qid":"5757245005920960301","mf_story_key":"7164261693049558180"}'
 id="stream_story_4fe5d7d51bc415443080257"> 
```

您可以看到 facebook 正在将 JSON 编码数据存储到`data-ft`属性中。

同样的一个 Twitter `tweet`html的例子

```
<div data-tweet-id="216534496567230464" data-item-id="216534496567230464" 
data-screen-name="onimitch" data-user-id="123682011" data-is-reply-to=""> 
```

所以 twitter 正在将一条推文的相关数据保存到不同的属性中，比如`data-tweet-id`, `data-user-id`。

因此，由于它们都处理大量数据，我认为您也可以使用任何一种方法来保存数据，而不会出现任何性能问题。

如果您使用单个键存储数据，请注意`.data()`@nnnnnn 在评论中已经提到的自动数据转换。

**使用 .data() 进行演示：http:** [//jsfiddle.net/joycse06/vcFYj/](http://jsfiddle.net/joycse06/vcFYj/)

**使用 .attr() 进行演示：http:** [//jsfiddle.net/joycse06/vcFYj/1/](http://jsfiddle.net/joycse06/vcFYj/1/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T01:25:09.257

无需在 DOM 中使用 id 或引用。保持干净。

只需在 jquery 中使用 data() 函数并将其绑定到 html 元素。这样，当您单击每个元素时，您将能够通过在单击事件中调用它来获取对象。

```
//loop through your elements in the dom or build them dynamically. 
$.each('div.products', function(){
 $(this).data('product', <your data>);
};

//assign a handler to each element and grab the data object by using this. :)
$(container).delegate('.products', 'click' function(){
  console.log($(this).data('product'))
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-20T10:51:46.860

我不建议您将数据保存在对象中并用它填充 HTML，

这是有原因的：

*   您的数据对所有*黑客*开放，可以窃取。
*   当您的数据太大而无法获取时，您的页面最初可能会在没有数据的情况下加载 - 这是任何 Web 开发人员都不想要的。
*   同样，当您的数据太大时，旧计算机 - 大约有。512M Ram-可能会陷入僵局
*   一次又一次，当您的数据太大时，遍历或排序可能会花费太多时间。

我了解您的数据在至少 5 分钟内是静态的。我建议的是，

*   使用服务器端语言（PHP、ASP(.NET)、Python 等）放置您的数据
*   当您的脚本需要时，使用查询单独获取数据。
*   您不需要的任何东西都是您的用户的成本，用户可能在他/她的浏览器中有很多页面，这也会导致死锁。

ps任何细节都会帮助我更多地帮助你。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-17T22:04:07.793

您不需要遍历整个对象树。如何放置ID：

```
<div class="pr_link" id='id_link_123'><a href="http://www.stackoverflow.com/">Buy!</a></div> 
```

并将它们检索为：

```
// ....
var id = 123;
// ....
var url = $("#id_title_" + id + " a").attr('href'); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-20T09:18:53.910

你应该试试 AngularJS。它与 jQuery 配合得很好，而且很容易学习。AngularJS 包含两种方式的数据绑定，并通过新的属性和元素扩展 HTML。最后但并非最不重要的是谷歌的 MVC 框架。[在http://www.angularjs.com](http://www.angularjs.com)上查看更多信息

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-25T00:55:18.603

尽管有许多优秀的客户端 mvc 框架，请查看[Backbone.js](http://backbonejs.org/)，它是一个功能强大但易于使用的框架，用于管理数据源（通常是 http 服务器）和 DOM 之间的接口。简而言之，它使“[你的真相远离 DOM](http://www.infoq.com/presentations/Getting-Truth-Out-of-the-DOM/) ”

作为一个人为的例子，如果您正在创建一个简单的地址簿应用程序，您可能会有一个客户端`Contact`Backbone 模型，它会大致（或完全）反映您在服务器上的模型。

Backbone 管理从服务器（或本地存储等）请求和解析联系人数据（json、xml 等）到这些`Contact`模型对象中，并且您提供一个 js 回调以在发生更改时更新您的 DOM。这也适用于相反的情况：当模型对象发生变化时，Backbone 会更新服务器，无论是即时、延迟后还是当您显式调用该`save`函数时。

Backbone 可能不适合您。但是，在您决定推出自己的解决方案之前，请先检查它们。即使这样，您也可以创建自己的客户端 MVC 层，如果您觉得：

*   可以比现有的众多优秀 javascript MVC 框架之一做得更好，
*   有这样一个独特的问题，只有定制的解决方案才能为您工作，或者
*   发现客户端 MVC 或 javascript 框架有些可怕或令人反感。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-26T09:28:07.567

我必须同意 Enes，您不应该将数据嵌入到 jquery 代码中，否则，正如您已经提到的，您的代码将很快变得如此复杂以至于无法支持。MVC 框架将对此有所帮助。

上面的答案中提到了一些，例如[http://angularjs.com](http://angularjs.com)和[http://backbonejs.org](http://backbonejs.org)虽然我不能保证它们中的任何一个，但你应该看看它们是否有助于解决你的问题。

我目前正在将我最初用 jquery 和原始 php 开发的 scrumwall 应用程序重写到[敏捷工具包](http://agiletoolkit.org)中。使用agiletoolkit（在stackoverflow 上又名atk4），您可以定义映射到数据库表、html 模板和视图的模型，这些模型具有您希望数据去往的占位符以及您添加模型、表单和网格的页面。它提供了 javascript 和 php 之间的链接，并具有包括 ajax 刷新视图在内的功能。

您可以使用 html5 功能，但只有最新的浏览器会支持此功能，因此如果用户不在受控环境中（例如，有标准 Web 浏览器的单个公司），您可能会遇到问题。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-20T15:27:57.203

DOM 和 jQuery 的结合是 Web 拥有的最强大的东西之一。你没有把它们都拿走。

让 DOM 帮助您并为您工作。更好地组织 DOM。把它全部拿走。您的示例可以通过这种方式进行优化：

```
<div class="product" data-product_id="123">
  <div class="pr_title">Title</div>
  <div class="pr_body">Body</div>
  <img class="prodcut-image" src="http://www.www.www/img.png">
  <a class="product-link" href="http://www.stackoverflow.com/">Buy!</a>
</div> 
```

要使用 jQuery 进行选择，只需编写：

```
var url = $('.product .product-link').attr('href'); 
```

我相信您的问题是您忘记了 CSS 选择器的工作方式。没有必要深入到 DOM 的每一层。

您可以在示例中删除一些 DIV。不需要的链接必须是内联的。CSS 规则可以使它们像 DIV 一样工作。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-06-20T16:27:50.920

您可以通过 jQuery 使用（就像您已经使用的那样）HTML 中的 data- 属性。从服务器数据创建 DIV 时，可以执行以下操作：

```
$('.product').data(yourProduct); // yourProduct would be the JSON representation of the data 
```

要检索：

```
var url = $('product').data('product-link'); // if the JSON object has a product-link property that is. 
```

上面有人提到您的数据暴露给浏览器的警告当然仍然有效，所以要小心。

# jsp - 在 JSP 页面之间传递数据

> ID：11075008
> 
> 赞同：0
> 
> 时间：2012-06-17T21:40:29.747
> 
> 标签：jsp

我想从内部传递 ${ad} 变量

```
<c:forEach var="ad" items="${requestScope.advertisements}"> 
```

到另一个 JSP 页面。我怎样才能做到这一点？这是一个 bean 对象，所以简单的形式是行不通的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T21:57:09.150

如果 $ad 是您的 bean 的变量并且 bean 是会话范围的，那么您可以通过 #{userBean.myvar} 轻松访问变量，其中 myvar 将是您的 ad ，如果您在另一个 bean 中需要此变量，您可以使用豆注入。

# objective-c - 在应用退出时恢复背光级别

> ID：11075009
> 
> 赞同：0
> 
> 时间：2012-06-17T21:40:30.370
> 
> 标签：objective-c, ios, ios5

我在[这里](https://stackoverflow.com/questions/1786825/restore-backlight-to-previous-level-iphone)发现要在应用退出时恢复亮度，您必须使用事件`applicationWillTerminate`

我按以下方式进行

```
- (void)applicationWillTerminate:(UIApplication *)application
{
    [UIScreen mainScreen].brightness = initialBackLightLevel;
} 
```

它不起作用。问题可能出在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T22:21:34.690

似乎是 iOS 错误...查看 Apple 开发论坛：[https ://devforums.apple.com/message/625119](https://devforums.apple.com/message/625119)

# android - ContentProvider - 返回多个游标或自定义对象

> ID：11075017
> 
> 赞同：2
> 
> 时间：2012-06-17T21:41:27.550
> 
> 标签：android, sqlite

我有一个`ContentProvider`通过将数据加载`CursorLoader`到列表视图（带有自定义`CursorAdapter`）的工作实现。这是一个事件列表。每个项目都有一个标题、位置等，还有**一组**应显示在`LinearLayout`每个列表行内的报价。

问题是`Cursor`一行只能包含平面数据，而不是一组其他项目。

我唯一的想法是像这样对数据库进行连接查询：

`SELECT * FROM events, offers WHERE events.id=offers.event_id;`

但是，我将拥有与报价一样多的行（并且列表应该显示事件，所以这不好）并且列表会人满为患。也许有可能告诉`CursorAdapter`只填充具有唯一性`events.id`但以某种方式检索优惠数据的列表行？

最好的解决方案是在 events中放置一个`Cursor`或自定义包含 offer 。但是，这是不可能的。`Object``Cursor`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T06:56:04.720

我面临着同样的问题。事实上，我想很多人都是。URI 的整个机制——通过 contentprovider 到关系数据库，以及围绕它构建的所有内容（如各种更改侦听器、文件和流处理）——这一切都非常令人印象深刻和有用，但对于非常简单的数据模型而言。

一旦您的应用程序需要更精细的数据模型，例如 - 表的层次结构、对象关系语义 - 这个模型就会中断。我找到了一堆适用于 Android 的 ORM 工具，但它们对我来说似乎太“流血”了（另外，在我的一生中，我无法弄清楚它们是否支持数据更改通知）。

ORM 在今天非常普遍，我真的希望 Android 人同意并将 ORM 功能添加到平台中。

这就是我最终要做的：一个游标游标，带有一个前导索引游标，有助于选择正确的内部游标。这是一种临时解决方案，我只需要继续我的代码并稍后再做。希望这可以帮助。当然，如果您使用列表视图，您可能还需要创建一个自定义适配器来填充正确的视图并进行绑定。

```
public class MultiCursor implements Cursor {
private final String        TAG             = this.getClass().getSimpleName();

ArrayList<Cursor>           m_cursors       = new ArrayList<Cursor>();
Map<Long, CursorRowPair>    m_idToCursorRow = Collections.synchronizedMap(new HashMap<Long, CursorRowPair>());
Set<Long>                   m_idSet         = new HashSet<Long>();
Cursor                      m_idCursor;

/**
 * @precondition: _id column must exist on every type of cursor, and has to have index of 0 (be the first)
 * @param idCursor
 */
public MultiCursor(Cursor idCursor) {
    m_idCursor = idCursor;// this cursor binds the order (1,2,3) to ids

    // go over all the ids in id cursor and add to m_idSet
    initIdSet();

    // m_cursors.add(idCursor);
    // m_position = -1;

}

private void initIdSet() {
    m_idSet.clear();

    long id;
    m_idCursor.moveToPosition(-1);
    while (m_idCursor.moveToNext()) {
        id = m_idCursor.getLong(m_idCursor.getColumnIndex(ContentDescriptor.ShowViewItem.Cols.ID));
        m_idSet.add(id);
    }
    m_idCursor.moveToFirst();
}

public void addCursor(Cursor cursor) {
    // when something changes in the child cursor, notify parent on change, to notify subscribers
    // cursor.registerContentObserver(new SelfContentObserver(this)); // calls my onchange, which calls the ui
    m_cursors.add(cursor);
    updateIdToCursorMap(cursor);
}

private class CursorRowPair {
    public final Cursor cursor;
    public final int    row;

    public CursorRowPair(Cursor cursor, int row) {
        this.cursor = cursor;
        this.row = row;
    }
}

private void updateIdToCursorMap(Cursor cursor) {
    // get object_type
    // for each row in cursor, take id, row number
    // add id, <cursor,rowNum> to map
    long id;
    int row = 0;
    cursor.moveToPosition(-1);
    while (cursor.moveToNext()) {
        id = cursor.getLong(cursor.getColumnIndex(ContentDescriptor.ShowViewItem.Cols.ID));
        if (m_idSet.contains(id)) m_idToCursorRow.put(id, new CursorRowPair(cursor, row));
        row++;

    }
    cursor.moveToFirst();
}

private Cursor getInternalCursor() {
    if (getPosition() < 0 || getCount()==0) return m_idCursor; // todo throw a proper exception

    // get the id of the current row
    long id = m_idCursor.getLong(m_idCursor.getColumnIndex(ContentDescriptor.BaseCols.ID));

    CursorRowPair cursorRowPair = m_idToCursorRow.get(id);
    if (null == cursorRowPair) return null;

    Cursor cursor = cursorRowPair.cursor;
    int row = cursorRowPair.row;
    cursor.moveToPosition(row);
    return cursor;
}

// //////////////////////////////////////////////

@Override
public void close() {
    Log.d(TAG, "close");

    for (Cursor cursor : m_cursors) {
        cursor.close();
    }
    m_idCursor.close();
}

@Override
public void copyStringToBuffer(int columnIndex, CharArrayBuffer buffer) {
    Log.d(TAG, "copyStringToBuffer");

    getInternalCursor().copyStringToBuffer(columnIndex, buffer);
} 
```

等等等等等等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T21:54:02.170

在您的适配器中，查询所有记录的提供游标并将其设为类变量。然后在您`getView`使用事件 id 来遍历提供光标并在找到合适的匹配项时将必要的文本视图添加到您的行布局中。它并不优雅，但它应该可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T12:37:17.223

不幸的是，一个`CursorLoader`只能加载一个`Cursor`。所以解决方案是编写一个`AsyncTaskLoader`返回两个的自定义`Cursors`。

# ruby-on-rails - Rails - 如何从 www.website.com 重定向到 website.com

> ID：11075023
> 
> 赞同：1
> 
> 时间：2012-06-17T21:42:23.677
> 
> 标签：ruby-on-rails, ruby, redirect

我想将所有请求重定向到`www.website.com/whatever`没有`www`. 如何在 Rails 中做到这一点以及最好的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T21:50:18.090

有两种选择。如果您想在 Rails 中执行此操作，则以下 gem 可能有用

[https://github.com/iSabanin/www_ditcher](https://github.com/iSabanin/www_ditcher)

但是，此类任务通常是从应用服务器配置的。请查看之前在堆栈溢出上发布的这个问题

[乘客（Ruby on Rails）中的301重定向从根域到www子域？](https://stackoverflow.com/questions/4925068/301-redirect-in-passenger-ruby-on-rails-from-root-domain-to-www-sub-domain)

它可以补充您想要做的事情，但它应该让您走上正轨。谢谢！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-17T21:46:49.400

我认为最好完全保留 Rails 应用程序的逻辑，而不是在服务器配置中处理它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T20:45:40.023

gem 'rack-www' 非常适合这个。

[https://github.com/stjhimy/rack-www](https://github.com/stjhimy/rack-www)

# css - 导航链接在边框之间水平居中

> ID：11075030
> 
> 赞同：0
> 
> 时间：2012-06-17T21:43:22.930
> 
> 标签：css, html-lists, border, nav

我希望我的导航链接水平居中，中间有 1px 边框，例如：

工作 | 博客 | 关于 | 服务 | 接触

目前，我正在使用：

```
<nav>
    <ul>
    <li><a href="#">Work</a></li>
    <li><a href="#">Blog</a></li>
    <li><a href="#">Services</a></li>
    <li><a href="#">About</a></li>
    <li><a href="#">Contact</a></li>
    </ul>
</nav> 
```

和

```
nav {
    float: right;
    margin-right: 40px;
    margin-top: 40px;
}

nav ul li {
    border-right: 1px solid #202020;
    display: inline;
}

nav ul li a {
    font-family: nevis-webfont;
    font-size: 100%;
    font-weight: normal;
    letter-spacing: 1px;
    text-transform: uppercase;
    margin-right: 20px;
} 
```

如何使链接之间的边界居中并删除最终链接后不可避免地显示的边界（在本例中为 CONTACT）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T21:48:04.210

试试这个 - [http://jsfiddle.net/qt4SW/](http://jsfiddle.net/qt4SW/)

```
nav {
    float: right;
    margin-right: 40px;
    margin-top: 40px;
}

nav ul li {
    border-left: 1px solid #202020;
    display: inline;
}

nav ul li a {
    font-family: nevis-webfont;
    font-size: 100%;
    font-weight: normal;
    letter-spacing: 1px;
    text-transform: uppercase;
    margin:0 10px;
}

nav ul li:first-child {
    border: 0;
} 
```

请注意，`<li>`-s 现在有一个左边框，并且它已从第一个元素中删除。那是因为`:first-child`伪选择器比`:last-child`

# .net - 在另一个对话框将数据插入 DB 后刷新 DataGridView

> ID：11075031
> 
> 赞同：0
> 
> 时间：2012-06-17T21:43:56.623
> 
> 标签：.net, vb.net, winforms, datagridview

在我的 Winforms 应用程序中，我有一个主窗体，其中有一个绑定到数据库实体数据源的 DataGridView。

网格设置为不允许插入。相反，我的表单上有一个按钮，它会启动第二个对话框，在该对话框中进行插入（即，使用比 DataGridView 更友好的 ui）。

插入工作正常.. db 中基础表的查询表明记录已被插入。但是，我似乎无法让主窗体上的 DataGridView 来查看第二个对话框刚刚创建的新数据。

我已经阅读了许多 Stack Overflow q & a's 并尝试了各种解决方案来让 DataGridView 刷新以显示新数据。但没有任何效果。

这一定是普遍情况？？有人可以建议一些可行的 VB.NET 代码吗？

谢谢，

巴扎

```
 Dim qry = From o In mDB.tblFOMTestResults From p In mDB.tblProduct.DefaultIfEmpty _
                                              From c In mDB.tblCalibration _
                Where o.ProductID = p.ID And o.CalibrationID = c.ID _
                Order By o.RunDate, p.ProductName Select _
                o.ID, o.SampleCode, o.RunDate, o.ConditioningDays, o.ConditioningRHAndTemp, _
                o.TestArea, o.EdgeSeal, o.SealedBags, o.FaceSeal, _
                o.MoisturePercentage, o.CalibrationID, o.FYFOMH1, o.FYFOMH2, o.FYFOMH3, _
                o.FYFOMH4, p.ProductName, o.ProductID

    Me.TblFOMTestResultsDataGridView.DataSource = qry 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T22:50:48.543

尝试绑定到查询的结果而不是查询：

```
dataGridView.Source = query.Execute(MergeOption.AppendOnly); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T00:35:41.780

在尝试了很多事情之后，我终于按照以下 SO 答案中的建议完成了这项工作。[在 Windows 表单中刷新 DataGridView](https://stackoverflow.com/questions/6621615/refresh-datagridview-in-windows-form)

# linq - 实体框架 - 渴望加载 Linq 查询

> ID：11075032
> 
> 赞同：0
> 
> 时间：2012-06-17T21:44:12.820
> 
> 标签：linq, entity-framework, linq-to-sql

我需要在以下场景中急切加载 ExceptionAppointment。

我有 3 个表：Appointment、ExceptionOccurrence、ExceptionAppointment 具有以下关系

*   Appointment 与 ExceptionOccurrence 有 1:m 的关系
*   ExceptionOccurrence 与 ExceptionAppointment 是 1:1 的关系

我知道我可以使用急切加载 ExecptionOccurrence

`context.Appointments.Include(a => a.ExceptionOcurrences).ToList();`

但是如何更改表达式以包含 ExceptionAppointment 呢？

干杯腹肌

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T23:07:19.423

所以答案是（对于不阅读评论的人）：

没有 Lambda：

```
context.Appointments.Include("ExceptionOcurrences.ExceptionAppointment").ToList‌​() 
```

使用 Lambda：

```
context.Appointments.Include(a => a.ExceptionOcurrences.Select(eo => eo.ExceptionAppointment)).ToList(); 
```

# lua - Lua 表删除重复项

> ID：11075034
> 
> 赞同：2
> 
> 时间：2012-06-17T21:44:27.950
> 
> 标签：lua

任何人都可以提供一种替代方法来从数字索引
表中删除重复项，以保留重复项的记录吗？，这个可以工作，但是在
1000 个或更多条目的表上，它似乎只是吃掉了 CPU，而这反过来又给出了“无响应
”嵌入了应用程序lua。

> ```
>  local Dupes ={}  
>    local t2 = {};  
>    for i,v in pairs(t1) do   
>     Count = table.getn(t2)     
>     t2[v] = i  
>     Count1 = table.getn(t2)   
>      if Count == Count1 then  
>       table.insert(Dupes,v)  
>      end  
>    end 
> ```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T22:24:19.960

我真的不明白使用`getn`. 只需测试它是否已经存在：

```
local Dupes ={}  
local t2 = {};  
for i,v in pairs(t1) do
    if(t2[v] ~= nil) then
        table.insert(Dupes,v)
    end
    t2[v] = i
end 
```

# cakephp - 在 CakePHP 1.3 中从 $this->data 重新创建一个表单？

> ID：11075035
> 
> 赞同：0
> 
> 时间：2012-06-17T21:44:37.280
> 
> 标签：cakephp, cakephp-1.3

我有一个带有报告查询界面的 Cake 应用程序，管理员用户可以在其中通过表单中的各种输入过滤数据，然后将结果显示在屏幕上。我正在寻找添加按钮的最简单方法，该按钮允许用户将相同查询的结果下载为 CSV。

我敢肯定，如果必须的话，我可以为自己创建一个，但是是否已经有一种方法可以根据 $this->data 重新生成任何给定的表单？这样，我只需将 .csv 添加到表单操作并使用 RequestHandler 选择正确的输出格式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T09:49:39.877

[这里看看以下内容......您可以简单地将 $this->data 传递给它，而不是从 Db 中查找数据。看看以下将 [数据导出到 CSV 的 CakePHP 方式](http://bakery.cakephp.org/articles/jeroendenhaan/2010/04/23/exporting-data-to-csv-the-cakephp-way)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T08:31:50.263

我猜你必须在你的控制器上复制该函数，一个用于在屏幕上生成结果，另一个用于 csv 的相同函数，但在 csv 的函数上，它必须具有类似于 $this->data 的值的参数。使用 javascript 重定向 csv 的函数。

# iphone - 旋转时UITabBarController的子视图在下方

> ID：11075038
> 
> 赞同：0
> 
> 时间：2012-06-17T21:44:55.703
> 
> 标签：iphone, uiviewcontroller, rotation

我正在向 tabbarcontroller 添加通知/警报类型视图，这是我的应用程序 rootview 控制器，以便我获得自动旋转的好处。

但是，当旋转我的警报视图时，最终会出现在导航栏和标签栏下方。

[http://dl.dropbox.com/u/6851931/2012-06-17%2011.08.42.jpg](http://dl.dropbox.com/u/6851931/2012-06-17%2011.08.42.jpg)

[http://dl.dropbox.com/u/6851931/2012-06-17%2011.08.47.jpg](http://dl.dropbox.com/u/6851931/2012-06-17%2011.08.47.jpg)

这两张图片显示了它在旋转时的作用和不旋转时的样子。有没有办法让视图始终位于顶部并获得旋转支持？

这是我添加视图的代码。

```
[self.customImageView whenTapped:^{

        MA_MobileAppDelegate *appDelegate = (MA_MobileAppDelegate *)[[UIApplication sharedApplication] delegate];

        UAModalPanel *modalPanel = [[MSPicturePreview alloc] initWithFrame:appDelegate.tabBarController.view.bounds withimage:self.customImageView.image];

        [appDelegate.tabBarController.view addSubview:modalPanel];

        [modalPanel showFromPoint:[self.contentView convertPoint:[self.customImageView center] toView:appDelegate.tabBarController.view]];

    } ]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T22:23:30.650

当您创建`modalPanel`添加标签时，您可以手动将其带到前面

```
modalPanel.tag = 111; 
```

在您的视图控制器`willRotateToInterfaceOrientation`功能上执行以下操作

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{
    //Get the modalPanel
    UAModalPanel *modalPanel = [appDelegate.tabBarController.view viewWithTag:111];
    //Bring it to front
    [appDelegate.tabBarController.view bringSubviewToFront:modalPanel];
} 
```

# javascript - 如何通过点击 td（如战舰游戏）更改 td 颜色？

> ID：11075043
> 
> 赞同：2
> 
> 时间：2012-06-17T21:45:23.053
> 
> 标签：javascript

如何通过点击 td（如战舰游戏）更改 td 颜色？这是具有特定 id 的代码：

```
str +="<td id='" + counter + "' onclick='checkClick(" + counter + "," + i + "," + j + ")' style = 'background-color: Black; height:30px; width:30px'>"; 
```

（最后的 str 将与 innerHTML 一起使用，它将在主体内的 div 上更新它

checkClick 函数需要更改它，我尝试使用 innerHTML 或通过 ElementID 获取 td，但它不起作用

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T21:57:03.660

```
# my_markup.html
<td id="clickable">Blah</td>

# my_scripts.js
document.getElementById("clickable").addEventListener("click", tableClicked);
function tableClicked(e) {
  e.target.style.backgroundColor = '#FF0000';
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T21:56:40.443

这应该做的工作：

[更改 HTML 元素的背景和文本颜色](http://www.javascripter.net/faq/changehtmlelementcolor.htm)

或者这个，甚至更简单的方法：

[更改 HTML 元素 (DIV) 的背景颜色](http://www.opensourcevarsity.com/javascriptbasics/l2bchangebgcolorofanhtmlelement)

```
<div id="main" class="main">
  <p>hello!</p>
</div>

  <script type="text/javascript">
  function changecolor()
  {
    var mainContent = "";
    mainContent = document.getElementById("main");
    mainContent.style.backgroundColor = "#FFFF99";
  }
  </script> 
```

# facebook-apps - FB 应用程序频道文件。ChannelUrl 没有加载？

> ID：11075050
> 
> 赞同：1
> 
> 时间：2012-06-17T21:47:06.343
> 
> 标签：facebook-apps, channel

我在 Facebook 上有一个 Canvas 应用程序，它只显示托管在我们外部网站上的页面。工作得很好。

我在 Firefox 中注意到的是在 Firebug 中报告了持续加载和错误：

> 获取[http://0-68.channel.facebook.com/pull?channel=p_...1&partition=1&clientid=3744ab1f&cb=b3di&idle=287](http://0-68.channel.facebook.com/pull?channel=p_...1&partition=1&clientid=3744ab1f&cb=b3di&idle=287)
> 
> 200 中止
> 
> 39.86s

这种加载尝试总是需要大约 40 秒，并在失败后立即重试。我也尝试过自行加载上述 URL，但这只是超时并显示“连接重置”消息。

这与我在 SDK 设置中的 channelUrl 指令有关吗？我的设置如下：

```
var channel_url         = "http://mysite.com/facebook/channel/"; // Aside from the domain, this is the actual final url.
var app_id              = "blahblahblah";

// Initialize the facebook object
FB.init({
    appId: app_id, // From the globals set up at the top of this page
    channelUrl : channel_url, 
    cookie: true,
    xfbml: true,
    oauth: true
}); 
```

频道文件中只有这个：

```
<script src="//connect.facebook.net/en_US/all.js"></script> 
```

但我也尝试过异步加载js。

如果我在浏览器中加载[http://mysite.com/facebook/channel/](http://mysite.com/facebook/channel/)，一切都很好。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T09:18:26.360

Facebook 的 JS SDK 对事件更新进行长轮询。如果没有可用的更新，则连接最终会超时，您将在 Firebug 中看到它已中止。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-06-03T05:07:01.617

*从另一个位置复制和粘贴

这些请求是 HTTP 长轮询请求。我只打开了 Facebook 网站几分钟，我并没有真正监控活动，但它看起来像：

*   Facebook 正在使用 HTTP 长轮询，其中打开的连接被标记为“待处理”
*   HTTP Long-Poll 请求保持打开状态 40 秒，然后如果没有活动，则请求关闭并打开一个新请求。
*   如果在 40 秒内发送了响应（服务器到客户端），则连接关闭（嗯，这就是 HTTP 长轮询的工作方式）

# c# - 在 ASP.NET 中使用 div

> ID：11075051
> 
> 赞同：0
> 
> 时间：2012-06-17T21:47:10.373
> 
> 标签：c#, asp.net

谁能告诉我如何让 div 在 ASP.NET 中可见。我尝试使用面板，但它干扰了其他 div。好吧，为了解释我的情况，我为什么要在同一页面上显示一个带有提交按钮的表单，并在提交后感谢您的消息。

关于我该如何做的任何更好的建议？:)

那么这里是代码，

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="Default.aspx.cs" Inherits="_Default" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<script type="text/javascript">
    function Show(moreInfo) {
        document.getElementById(btnInfo).style.visibility='hidden';
        document.getElementById(moreInfo).style.visible = 'visible';
    </script>
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <style type="text/css">
        .heading
        {
            text-align: center;
            border-style: double;
            background-color:#F2A988;
            font-family:Sans-Serif;
            font-weight:bold;

        }
        #wrapper {
            margin: 0 auto;
            width: 400px; 
            text-align:left;
        }
        .style1
        {
            text-align: center;
            font-family:Sans-Serif;
        }
    </style>
</head>
<body style="height: 642px; width: 911px; " id="wrapper">
    <form id="form1" runat="server">

    <div class="heading">
        Sheridan Computer Club - Inquiry Form</div>
        <br />

    <asp:Calendar ID="Calendar1" runat="server" Font-Names="Arial"></asp:Calendar>

        <br />

    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    <asp:Button ID="btnInfo" runat="server" Font-Names="Arial" 
         style="font-weight: 700" 
        Text="I'd like to receive more information!" Width="261px" />

    <div style="position:relative; top: 0px; left: 0px; width: 463px; height: 188px;">
        Show the div</div>

    <div id="meeting" 

        style="position:relative; top: -285px; left: 320px; width: 232px; height: 64px; text-align: center; margin-top: 0px; font-family: Arial; font-weight:bold;">
        <br />
&nbsp;&nbsp;&nbsp;&nbsp;
        <asp:Label ID="lblDate" runat="server"></asp:Label>
        <br />
        </div>

    <div style="width: 308px; position:relative; top: -479px; left: 283px; margin-top: 0px;" 
        class="style1">
        Click Below to find out when
        <br />
        the club meets next</div>

    <div style="position:relative; top: -515px; left: 624px; width: 274px; height: 289px; font-family:Sans-Serif;">
        <b>View Members by Program:<br />
        <asp:ListBox ID="ListBox1" runat="server" Height="175px" Width="263px">
        </asp:ListBox>
        </b></div>

    <div style="position:relative; top: -739px; left: 346px; width: 192px; height: 32px; text-align: center; margin-top: 0px;">
        <asp:Button ID="Button1" runat="server" Text="Next Meeting" 
            onclick="Button1_Click" />
    </div>

    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T21:48:56.297

使其对 asp.net 服务器端可见

```
 <div runat="server" id="mydiv">

   </div> 
```

作为`Panel`生成 a的替代方法`div`，您可以使用`PlaceHolder`不生成`div`标签的控件

检查这个问题：

[使用面板或占位符](https://stackoverflow.com/q/483352/1268570)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T21:52:19.587

您可以`runat="server"`在该 div 上使用属性并在服务器端设置其 Visible 属性。

```
<div runat="server" ID="someDiv" >

</div> 
```

您可以决定页面是否应该在 PageLoad 或其他事件中呈现它。

```
someDiv.Visible = someCondition; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T21:52:51.827

你可以像这样使用 asp:Literal；

```
<div>
      <asp:Literal runat="server" ID="litHide" Visible="false" />
</div> 
```

然后当提交一个表单时，像这样改变这个文字的可见性；

```
if(litHide.visible==false)
{
 litHide.visible = true;
} 
```

这是最简单的方法，好处是你不会在 div 标签中得到任何东西，事实上你得到的只是文本。

# jquery - 一个 mvc 表单包含具有相同 ID 的下拉列表

> ID：11075052
> 
> 赞同：0
> 
> 时间：2012-06-17T21:47:12.383
> 
> 标签：jquery, asp.net-mvc, drop-down-menu

我的 MVC 表单有两个具有相同 ID 和名称的下拉列表。后端数据表只有一个字段取选定值。该字段与包含这些下拉列表中所有值的查找表相关联。这两个下拉列表中的每一个都仅包含基于其使用类型的值的子集。我这样做是为了我可以在客户端使用 jQuery 来排他地显示下拉菜单。例如，当在第一个下拉菜单中进行非空白选择时，脚本将隐藏第二个下拉菜单，反之亦然。如果在任一下拉菜单中选择了空白选项，则会显示两个下拉菜单。由于回发表单将包含一个包含两个项目的数组。默认绑定器会自动绑定到包含非空值的数组项吗？如果这不是正确的方法，我很感激任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T22:18:12.597

我会以两种不同的方式之一来解决这个问题：

1.  创建一个视图模型，其中包含两个可选字段，并正确命名和标识您的表单字段。拥有多个具有相同 ID 的元素是无效的，并且无论如何您都在为以后使用 jQuery 选择器打开大门。
2.  另一种选择是使用 jQuery 通过 Ajax 提交表单。同样，要获得有效的 HTML，请正确命名表单，但是当您在 Ajax 请求中传递值时，您只需分配具有您正在查找的值的那个。

作为旁注，我不确定这是否适用于您的设计，但您也可以探索*只有*一个下拉菜单并使用对上下文有效的子集结果填充下拉菜单的想法。例如，您可以让用户使用 Twitter.Bootstrap 之类的按钮组选择路径 A/B：http: [//twitter.github.com/bootstrap/javascript.html#buttons](http://twitter.github.com/bootstrap/javascript.html#buttons)

干杯。

# php - 在 PHP 中隐藏 print_r 结果

> ID：11075056
> 
> 赞同：-3
> 
> 时间：2012-06-17T21:47:49.217
> 
> 标签：php, arrays, loops

`Print_r`函数通常是输出数组结果，但我想隐藏它应该在浏览器上看到的结果有没有某种方法可以隐藏它？

我想隐藏它的原因是，因为我刚刚意识到只有在循环中使用 print_r 函数输出它然后在表中对其进行排序和排序时，才能在循环外输出和排序一个大数组在循环之外。

这是一个示例

```
$arr = array('jow', 'jack');//Big array,
$arr1 = array();
foreach($arr as $val){
    $arr1[] = $val;
    print_r($arr1); // hide it here
}
//Order it and sort it outside the loop. 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-17T21:48:56.513

```
echo "<!-- \n".print_r($value, TRUE)."\n-->\n\n"; 
```

通过右键单击在浏览器中检查您的代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-17T21:50:22.787

```
ob_start();
print_r($value);
ob_end_clean(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-17T22:40:50.893

您还可以使用**CSS**来“隐藏”浏览器的任何输出。

```
echo "<div style='display: none;'>".print_r($arr1)."</div>"; 
```

稍后您可以通过将“**显示：无**”更改为“**显示：块**”来显示。

# vb.net - 如何登录 youtube 并保存 cookie？VB.net

> ID：11075059
> 
> 赞同：0
> 
> 时间：2012-06-17T21:47:52.537
> 
> 标签：vb.net, vb.net-2010

我有这个代码

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    Dim logincookie As New CookieContainer

    Dim postData As String = "continue=http%3A%2F%2Fwww.youtube.com%2Fsignin%3Faction_handle_signin%3Dtrue%26feature%3Dheader%26nomobiletemp%3D1%26hl%3Den_US%26next%3D%252F&service=youtube&uilel=3&dsh=-5804339713411277263&ltmpl=sso&hl=en_US&GALX=kpcgpuXEK94&pstMsg=1&dnConn=&checkConnection=youtube%3A4148%3A1&checkedDomains=youtube&timeStmp=&secTok=&Email=" & user_fb.Text & "&Passwd=" & pass_fb.Text & "&signIn=Sign+in&PersistentCookie=yes&rmShown=1"
    Dim tempCookies As New CookieContainer
    Dim encoding As New UTF8Encoding
    Dim byteData As Byte() = encoding.GetBytes(postData)

    Dim postReq As HttpWebRequest = DirectCast(WebRequest.Create("https://accounts.google.com/ServiceLoginAuth"), HttpWebRequest)
    postReq.Method = "POST"
    postReq.KeepAlive = True
    postReq.CookieContainer = tempCookies
    postReq.ContentType = "application/x-www-form-urlencoded"
    postReq.Referer = "https://accounts.google.com/ServiceLoginAuth"
    postReq.UserAgent = "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.5 (KHTML, like Gecko)"
    postReq.ContentLength = byteData.Length
    Dim postreqstream As Stream = postReq.GetRequestStream()
    postreqstream.Write(byteData, 0, byteData.Length)
    postreqstream.Close()
    Dim postresponse As HttpWebResponse

    logincookie = tempCookies
    postresponse = DirectCast(postReq.GetResponse(), HttpWebResponse)
    tempCookies.Add(postresponse.Cookies)

    Dim postreqreader As New StreamReader(postresponse.GetResponseStream())

    Dim thepage As String = postreqreader.ReadToEnd
    WebBrowser1.DocumentText = thepage

End Sub 
```

试图制作一个用于 youtube 上传视频的工具，但是当我尝试登录时它似乎有一个 cookie 问题！

它说必须允许 cookie 运行此操作！如何启用 cookie？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-02T16:45:50.793

```
...

Dim galx As New Cookie
galx.Name = "GALX"
galx.Value = "something"
galx.Domain = ".google.com"
Dim postData As String = "GALX=something&continue=http%3A%2F......

...

tempCookies.Add(galx) 
```

我正在搜索这个“youtube登录”的东西。我在 webbrowser1 上使用“grudolf”的代码收到了相同的消息。然后我在登录 youtube 时查看了 firefox 的“工具/开发者控制台”。有一个包含成员“ACCOUNT_CHOOSER”、“GALX”、“GAPS”等的 cookie 集合......当我添加一个名为“GALX”的 cookie 和任何 vale 并将其添加到帖子数据中时，结果还可以。我刚刚添加了代码。我希望它会有所帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T11:23:29.893

在开始时再定义一个 Cookie 容器：

```
Dim oRequestCookie As New CookieContainer 
```

尝试添加

```
 CType(postReq, HttpWebRequest).CookieContainer = oRequestCookie 
```

当您定义 HttpWebRequest 参数时。最后，您可以像以前那样提取登录 cookie。干杯。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-05T17:53:40.640

问题是您的推荐页面应该在用户机器 [https://accounts.google.com/ServiceLoginAuth中放置一些 cookie](https://accounts.google.com/ServiceLoginAuth)

然后，当您尝试登录谷歌时，在您登录之前检查这些 cookie，现在谷歌会找到 cookie。解决方案是首先访问您的推荐页面并确保`CookieContainer`在该页面中使用，然后调用您的代码，它将 100% 工作。

尝试从逻辑上解决问题，然后考虑代码中的错误。

# actionscript-3 - Flash 本地共享对象未检测到其他 SWF 的更改

> ID：11075060
> 
> 赞同：0
> 
> 时间：2012-06-17T21:48:01.090
> 
> 标签：actionscript-3, flash, shared-objects

我使用本地共享对象作为在同时运行的两个 swf 之间传输数据的手段。

```
so = getLocal("mySO");

// set the value from a user input, and set it to 'connected'
so.setProperty(txtName.text, "connected")

// every few seconds check if the other SWF started and modified value
onTimer 
{
 var data:Object = so.data
// breakpoint and inspect the data with debugger
} 
```

最后注释的行是问题所在。在调试器中，没有检测到对数据的更改，但是在使用 .minerva 检查 .sol 文件时，我看到了两个 SWF 的更改。因此，尽管 SWF 2 修改了共享对象，但 SWF 1 看不到这些更改。这是应该的吗？

ps：我知道我可以使用 LocalConnection 在两个正在运行的 SWF 之间进行通信，但如果有某种限制，我仍然想了解 SO。

更新：

从磁盘运行编译的 Flex 应用程序两次，将“swf2”放入第二个的文本字段。两个都按开始。启动的第一个永远不会检测到第二个已连接。

```
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" 
               minWidth="955" 
               minHeight="600"
               creationComplete="application1_creationCompleteHandler(event)"
               >

    <fx:Script>
        <![CDATA[
            import mx.events.FlexEvent;

            private var timer:Timer;
            private var so:SharedObject;

            protected function application1_creationCompleteHandler(event:FlexEvent):void
            {
                so = SharedObject.getLocal("mySO");

                timer = new Timer(1000);
                timer.addEventListener(TimerEvent.TIMER, onTimer);

            }

            protected function button1_clickHandler(event:MouseEvent):void
            {
                so.setProperty(txtSwf.text, 'connected');
                so.flush();
                timer.start();

            }

            protected function onTimer(event:TimerEvent):void
            {
                so = SharedObject.getLocal("mySO");
                txtLog.text += so.data["swf1"] + "\n";
                txtLog.text += so.data["swf2"] + "\n";
                txtLog.text += "------------ \n";

            }

        ]]>
    </fx:Script>

    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>
    <s:TextInput id="txtSwf" x="10" y="50" text="swf1"/>
    <s:Button x="170" y="50" label="Start" click="button1_clickHandler(event)"/>
    <s:TextArea id="txtLog" x="10" y="154" width="279" height="112" />

</s:Application> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T07:25:29.113

您需要强制读取文件，而不是客户端已经拥有的数据：/

```
so = getLocal("mySO");

// set the value from a user input, and set it to 'connected'
so.setProperty(txtName.text, "connected")

// every few seconds check if the other SWF started and modified value
onTimer 
{
    so = getLocal("mySO"); // read the so file.

    var data:Object = so.data
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T02:48:44.773

呼，找到答案了。Jevgeenij 引导我强制重新读取共享对象，但他的代码无法正常工作。我需要补充的是这个。

```
so = getLocal("mySO");

// set the value from a user input, and set it to 'connected'
so.setProperty(txtName.text, "connected")

// every few seconds check if the other SWF started and modified value
onTimer 
{
    so = getLocal("mySO"); // read the so file.

    var data:Object = so.data;

    so = null // MAKE IT NULL AND HOPE IT'S GC'D BEFORE NEXT TIMER
} 
```

诀窍是在使用后将其设置为 null，然后才强制重新读取它并拾取从其他 SWF 实例写入的值。

# html - 边界，在单元格附近重叠

> ID：11075062
> 
> 赞同：0
> 
> 时间：2012-06-17T21:48:30.717
> 
> 标签：html, css

这就是 MS Excel 中单元格选择的外观：

![在此处输入图像描述](../Images/d241979691c012600447d3e65f0b09b2.png)

是否可以在常规 HTML 中使用类似的边框，`<table>`以便边框在单元格附近重叠（如果仔细观察，您会发现边框`1px`在附近单元格的每一侧都延伸了）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T21:55:16.733

是的，在一定程度上。我只在 Chrome 中测试过，但这有效：http: [//jsfiddle.net/q4Lcc/](http://jsfiddle.net/q4Lcc/)

```
td {
    width: 120px;
    height: 50px;
  border: 1px solid gray;  
}

td#test_td {
     border: 3px solid black;   
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T21:53:08.203

我不知道纯粹使用表格的方法，但一种方法是使用`div`绝对定位在数据表上的另一个或文本输入。

这是一个活生生的例子：http: [//jsbin.com/edehoc](http://jsbin.com/edehoc)

我个人喜欢这种方法，因为它可以让您使用熟悉的表单元素，当它获得焦点时具有预期的样式。

# jquery - jQuery 函数仅适用于重新加载

> ID：11075063
> 
> 赞同：1
> 
> 时间：2012-06-17T21:48:31.070
> 
> 标签：jquery, jquery-mobile

我有以下非常简单的代码片段，它从一个单独的文件加载到我正在构建的多页面站点中的一个 jQuery Mobile 页面中：

```
$(document).ready(function(){
    $('select[name="state_choice"]').change(function(){
        var thisState = $(this).val();
        var indexState = '#' + thisState;
        $('.state').hide();
            $(indexState).show();
      });
}) 
```

它正在工作，但现在它仅在我重新加载页面时才有效。我正在使用 Firebug 检查页面加载，它并没有始终如一地加载 jQuery 文件，因为这个链接在重新加载之前没有显示。

```
<script src="inc/jquery/belmont.custom.js"></script> 
```

通常，当在 jQuery mobile 中调用新页面时，控制台会显示，但我确实发现当单击指向它的链接时，该特定页面并不总是显示在控制台日志中。我已经在桌面模拟器（Dashcode 的 iOS 模拟器）、桌面浏览器（FF 和 Safari）和我的 iPhone 上进行了测试，结果都相同。

有没有人见过这种行为？我怎样才能确保它始终如一地工作？

编辑：我已将代码更改为使用绑定，如下所示：

```
$(document).bind('pageinit', function(){
    $('select[name="state_choice"]').change(function(){
        var thisState = $(this).val();
        var indexState = '#' + thisState;
        $('.state').hide();
        $(indexState).show();
    });
}) 
```

我已将 console.log(indexState) 添加到该函数中，但这也不会始终如一地触发。

实际上我之前说错了——这是一个由单页组成的移动网站。我是否必须将 jQuery 自定义函数脚本加载到每个页面中？或者我可以把它加载到有问题的那个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T15:09:06.217

这是我如何整理出来的。由于 jQM 使用 AJAX 加载每个后续页面，因此您需要像处理任何其他动态加载的元素一样处理这样的交互。更改`bind()`为`on()`（我正在使用 jQuery 1.7+）让一切正常工作：

```
$('body').on('pageinit', '#id_of_page_using_function', function(){
    $('select[name="state_choice"]').change(function(){
        var thisState = $(this).val();
        var indexState = '#' + thisState;
        $('.state').hide();
        $(indexState).show();
    });
}) 
```

# facebook - 即使另一个 FB 用户通过原始网站登录，我们如何使用用户访问令牌保持登录到我的 FB 画布网站？

> ID：11075064
> 
> 赞同：0
> 
> 时间：2012-06-17T21:48:41.377
> 
> 标签：facebook, facebook-graph-api, facebook-php-sdk

我的场景有点像这样：用户使用他的 FB 凭据登录我的网站。我捕获了他的 ID 和 FB 访问令牌（例如，长期访问令牌）。他退出我的网站，稍后再回来。然而，这一次，他的浏览器打开了一个不同 ID 的 FB。我可以使用存储的访问令牌加载这个旧 ID（他在我的网站上注册过的）的 Facebook 详细信息吗？有可能吗，还是会导致旧的和现有的 FB id 发生冲突？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T22:02:55.477

首先，你*为什么*要这样做？由于 Facebook 不允许同一个人拥有多个用户帐户，因此通常会出现这种情况的唯一情况是另一个用户正在使用我的计算机/浏览器 - 为什么我希望你在另一个人的时候阅读我的信息正在使用我的设备……？

其次，只要第一个用户仍然被认为是登录到您的站点，它就没有太大区别。但是，假设调用了一些客户端方法来更新 cookie 信息，那么这就是问题可能开始的地方。您可能仍然可以读取旧用户的信息，因为您拥有他的有效访问令牌 - 但您必须在请求中明确使用该令牌，并且还要专门处理该帐户，因为 Graph API 的*/me*将指向新用户。

但正如我所说，我很难想象这里有一个真实的、实际的用例……</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T21:57:12.290

如果我错了，请纠正我，但他/她应该保持登录到您的网站，不管他的 authID 是否更改。

# javascript - 如何在 jQuery 可拖动 div 上选择文本？

> ID：11075068
> 
> 赞同：31
> 
> 时间：2012-06-17T21:49:00.243
> 
> 标签：javascript, jquery, html

我使用 jQuery 制作了一个可拖动的 div。但是，该框中有一些文本，我仍然希望能够复制和粘贴文本，但是当我单击该框时使一个项目可以很好地拖动时，它会开始移动该框吗？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2013-03-01T12:04:32.120

使元素可拖动时使用[该`cancel`选项。](http://api.jqueryui.com/draggable/#option-cancel)

> 防止从指定元素开始拖动。

```
$('.selector').draggable({ cancel: '.text' }); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-06-17T22:03:10.343

允许在同一元素上拖动和选择文本是没有意义的。但是，如果您一直认为这是必要的，我会想到两件事：

### 解决方案1：

您可以添加一个“处理程序”，它将是接收鼠标向下/向上事件以拖动 div 的唯一子项。例如：

```
<div id="draggable">
  <div class="handler"></div>
  <div class="text">This is a selectable text</div>
</div> 
```

在您的 JavaScript 代码中：

```
var draggableDiv = $('#draggable');
draggableDiv.draggable({
  handle: $('.text', draggableDiv)
}); 
```

### 解决方案2：

当用户尝试选择文本时，您可以禁用可拖动的东西：

```
<div id="draggable">
  <div class="text">This is a text</div>
</div> 
```

在您的 JavaScript 代码中：

```
var draggableDiv = $('#draggable').draggable();
$('.text', draggableDiv).mousedown(function(ev) {
  draggableDiv.draggable('disable');
}).mouseup(function(ev) {
  draggableDiv.draggable('enable');
}); 
```

当有人试图在 中选择某些东西时`.text`，可拖动过程被禁用。

第一个解决方案是正确的。

# php - 在 WordPress 中按多个类别过滤

> ID：11075072
> 
> 赞同：1
> 
> 时间：2012-06-17T21:50:11.773
> 
> 标签：php, wordpress, filter

我想只显示属于 33、39 类的成员并且是后期运动员的帖子。我当前的代码显示属于 33 和 39 类的帖子和运动员：

```
<?php query_posts( 'cat=33&cat=39&post_type=athletes'); ?> 
```

我需要做哪些调整？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T22:09:26.710

您可以使用选项数组而不是查询字符串，在其中您可以使用`category__and`设置来执行您想要的操作：

```
<?php
query_posts(array(
    'category__and'  => array(33,39),
    'post_type'      => 'athletes'
));
?> 
```

# python - 带有选项的按字段排序模型

> ID：11075076
> 
> 赞同：1
> 
> 时间：2012-06-17T21:50:44.350
> 
> 标签：python, django, django-models

我正在尝试使用具有预定义选项的字段在 Django 应用程序中订购模型。我可以按字母顺序排序，但由于选择是星期几，这与我需要的不太匹配。这是模型：

```
class Slot( models.Model ):

    DAY_CHOICES = (
        ('SUN', 'Sunday'),
        ('MON', 'Monday'),
        ('TUE', 'Tuesday'),
        ('WED', 'Wednesday'),
        ('THU', 'Thursday'),
        ('FRI', 'Friday'),
        ('SAT', 'Saturday'),
    )

    day = models.CharField( max_length=3, choices=DAY_CHOICES )
    start = models.TimeField()
    end = models.TimeField()
    template = models.ForeignKey( Template ) 
```

这是将模型拉入管理视图的内联：

```
class SlotInline( admin.TabularInline ):
    model = Slot
    ordering = ('day','start',) 
```

我知道我可能可以使用一个整数作为存储值，但是有没有一种通用的方法可以在一个有选择的字段上强加自定义排序顺序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T21:53:11.257

您应该将数据存储为整数（例如 0 = 星期日），并使用选项将该整数映射到日期。然后排序很简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T16:18:37.340

引用[https://docs.djangoproject.com/en/dev/ref/models/fields/#field-choices](https://docs.djangoproject.com/en/dev/ref/models/fields/#field-choices)的最后一段：

> 但是，如果您发现自己的黑客选择是动态的，那么您最好使用带有 ForeignKey 的适当数据库表。选择适用于变化不大的静态数据（如果有的话）。

所以我会说答案是否定的，你最好使用一个单独的 Day 模型和一个用于订购的字段

```
class Day(models.Model):
    name = models.CharField(max_length=9)
    ordering = models.PositiveIntegerField()

    class Meta:
        ordering = ['ordering'] 
```

尽管感觉 7 件物品有点过头了！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T02:08:56.433

如果您正在编写自己的视图而不是使用管理视图，那么您可能会在原始 SQL 中进行排序。我以前在 Oracle 中做过类似的事情：

```
ORDER BY decode(day, 'SUN', 0, 'MON', 1 ) 
```

我不知道您如何适应它`QuerySet.order_by()`- 也许您需要使用`QuerySet.raw()`直接 SQL 进行查询。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T12:58:03.007

您可以使用`extra`，尽管实现可能不优雅并且需要针对复杂的查询和不同的选择进行调整：

```
# generate 'WHEN foo THEN bar's
switch = ' '.join("WHEN '{}' THEN {}".format(x[0],i) for i,x in enumerate(Slot.DAY_CHOICES))
# basic queryset
Slot.objects.extra(select={'day_index':'CASE day {} END'.format(switch)}).order_by('day_index', 'start') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-20T09:20:34.640

也许你应该看看这个库：[https ://github.com/bigjason/django-choices](https://github.com/bigjason/django-choices)

我不知道做这种事情的任何基本知识，与可以指定函数名称的字段不同，您不能在排序时这样做。您可以做的唯一特殊的事情是指定 get_ordering。

# jquery - 用jquery延迟背景效果？

> ID：11075078
> 
> 赞同：0
> 
> 时间：2012-06-17T21:50:55.937
> 
> 标签：jquery

我正在尝试更改某些 div 悬停时的背景，但由于某种原因，我无法使用 jquery 来实现。我想要的是从图像显示到悬停图像的效果，因为使用 css 变化太快而且看起来一点也不好看。有什么建议吗？这是我的代码

```
#siman{
    background: url(images/siman.png) left top no-repeat;
}
#vogue{
    background: url(images/vogue.png) top left no-repeat;
}
#consejo{
    background: url(images/consejodelcafe.png) top left no-repeat;
}
#digicel{
    background: url(images/digicel.png) top left no-repeat;
}
#siman:hover, #vogue:hover, #consejo:hover, #digicel:hover{
    background-position: left -96px
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T21:57:53.227

你不能使用动画功能吗？

你在图像上附加一个悬停侦听器，悬停你的函数

```
$(this).css('background-position', '0px 0px');
$(this).animate({

  'background-position-x': '-96px',
}, 10000, 'linear'); 
```

# java - 当文档大小大于 Solr 中的内存时？

> ID：11075081
> 
> 赞同：0
> 
> 时间：2012-06-17T21:51:42.753
> 
> 标签：java, memory, solr, lucene, search-engine

我有 3gb 文件大小和 1.5gb 内存。当我启动 Solr 实例时，它会自动开始消耗 1gb 内存。然后我输入从控制台更新文档的 curl 命令。几秒钟后，Solr 实例填满所有内存并开始消耗 cpu。更新过程永远不会完成，cpu 使用率会随着时间增加。有没有办法处理这个问题？

我的 Solr 架构在这里：[https ://github.com/buremba/mbslave/tree/master/solr](https://github.com/buremba/mbslave/tree/master/solr)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T02:08:22.860

你有多少文件？还是这是一份 3gb 的文件？

如果您有多个文档，则可以分批添加它们并在每批之后提交。每批可能小于 100mb。通过这种方式，您可以管理堆大小。

此外，为了解决眼前的问题，您可以增加 os 虚拟内存并使用更高的 java 堆大小（-Xmx of 4gb）。

# objective-c - 如何检查目标 C 可可中是否存在电子邮件地址

> ID：11075086
> 
> 赞同：0
> 
> 时间：2012-06-17T21:51:58.577
> 
> 标签：objective-c, email

我有一个简单的问题，那就是您如何检查电子邮件是否存在

我在最近的一篇文章中看到了这段代码：

```
- (BOOL) NSStringIsValidEmail:(NSString *)checkString{

    BOOL stricterFilter = YES; 
    NSString *stricterFilterString = @"[A-Z0-9a-z._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,4}";
    NSString *laxString = @".+@.+\\.[A-Za-z]{2}[A-Za-z]*";
    NSString *emailRegex = stricterFilter ? stricterFilterString : laxString;
    NSPredicate *emailTest = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", emailRegex];
    return [emailTest evaluateWithObject:checkString];
 } 
```

我的问题是，如果 BOOL 返回 YES 或 NO 并返回一个动作，我该如何返回`NSTextField`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T22:57:29.880

如果电子邮件正确与否，只需有一个标签并将标签的文本设置为适当的消息。

`UITextFieldDelegate`通过实现以下协议方法，您可以在每次用户在文本字段中键入新字符时运行您的检查程序：

```
- (BOOL)textField:(UITextField *)textField 
   shouldChangeCharactersInRange:(NSRange)range 
   replacementString:(NSString *)string {

   NSString *newText = [textField.text stringByAppendingString:string];
   if ([self NSStringIsValidEmail:newText]) {
      statusLabel.text = @"Valid.";
   } else {
      statusLabel.text = @"Not a valid email address.";
   }
   return YES;
} 
```

# javascript - 如何使用Javascript同时创建具有可变内容的父元素和子元素

> ID：11075087
> 
> 赞同：0
> 
> 时间：2012-06-17T21:52:07.950
> 
> 标签：javascript, variables, element, parent-child

我有一个来自 PHP assoc 数组的 JSON：

```
Array(
    [0] = > Array(
        [topicid] = > 17
        [entry] = > number 12 this one
        [belongdate] = > 2017 - 06 - 12
        [edittime] = > 2012 - 06 - 18 05: 22: 21
        [User_ID] = > 1
    )
    [1] = > Array(
        [topicid] = > 9
        [entry] = > yeah 11 now
        [belongdate] = > 2017 - 06 - 12
        [edittime] = > 2012 - 06 - 18 05: 22: 02
        [User_ID] = > 1
    )
) 
```

我不直接给你 JSON 是因为我不知道如何正确打印 JSON。

我需要创建父 div 和多个子元素：

```
 <div name='entrydiv' class='entrydiv'>          
            <h3 name='topich3' class='topich3'>
                entryjson[i]['topicid']
            </h3>
            <p name='entryp' class='entryp'>
                entryjson[i]['entry']
            </p>
            <a name='belongdatea' class='belongdatea' style='display: none;'>
                entryjson[i]['belongdate']
            </a>
            <a name='lastedittimea' class='lastedittimea'>
                entryjson[i]['edittime']
            </a>
        </div> 
```

请注意，内容是来自 JSON 的变量。我已经查看了这篇[文章](https://stackoverflow.com/questions/867916/creating-a-div-element-in-jquery)。但是 .append 方法似乎不支持将变量传递给内容。并且 .appendTo 方法不允许子元素（？）。我非常感谢您的帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T22:02:33.710

这是一个例子。要创建此 DOM 结构：

```
<div name='entrydiv' class='entrydiv'> 
    <h3 name='topich3' class='topich3'>
       entryjson[i]['topicid']
    </h3>
</div> 
```

你可以使用这个纯 JavaScript 代码：

```
var mainDiv = document.createElement("div");
mainDiv.name = mainDiv.className = "entrydiv";
document.body.appendChild(mainDiv);

var item = document.createElement("h3");
item.name = item.className = "topich3";
item.innerHTML = entryjson[i]['topicid'];
mainDiv.appendChild(item); 
```

您可以为其他部分添加代码，然后添加一个循环来遍历您的 JSON 以重复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-09T18:21:20.117

如果您想创建以下结构：

```
<div class="yourClassInHTML">
...
<div>
<img src="thePath"></img>
</div>
...
</div> 
```

那么 .js 代码将是：

```
var element1 = document.createElement("div");
var element2 = document.createElement("img");
img.src = "thePath";
element1.appendChild(element2);
document.getElementsByClassName("yourClassInHTML")[0].appendChild(element1); 
```

# jquery - 更改元视口标签

> ID：11075090
> 
> 赞同：1
> 
> 时间：2012-06-17T21:52:37.010
> 
> 标签：jquery, width, meta-tags, viewport

我需要根据视觉视口的宽度更改元视口标签。我知道该怎么做，但它不起作用，我认为这是因为该站点运行那一点 JS 为时已晚，无法生效。可能不是这个，但这是我的第一个想法。

在我的 application.js 文件中：

```
$(document).ready(function() {

  // If screen width is 480 or less then add meta viewport tag
  // (so default mobile display is used on iPads until that optimised view is added)
  if (window.innerWidth <= 480) { // This looks at the size of the visual viewport
    $('#viewport').attr('content', 'width=device-width');
  }

} 
```

在我的 index.html 中：

```
<meta id="viewport" name='viewport'><!-- content attr is added via JS --> 
```

有什么想法可以让该块尽早运行以使其真正生效吗？

谢谢尼尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-02T14:38:02.700

您可能会遇到设备的 dpi/定义问题，基本上 1 像素不等于 1 像素。这应该很容易研究。

# android - ImageView 和 touchListener

> ID：11075095
> 
> 赞同：1
> 
> 时间：2012-06-17T21:53:16.460
> 
> 标签：android, imageview, ontouchlistener

我尝试使图像视图可点击。实际上它是可点击的，因此我可以在用户触摸 imageview 后调用 Intent。但我正在努力改变触摸时的图像。

我想要以下内容：

*   默认（无触摸）：Image1
*   用户触摸 imageview：更改为 image2
*   用户用手指移出图像视图：更改回 Image1（不调用 Intent）
*   用户取消接触 imageview：调用 Intent 并切换回 Image1

其中一些事情正在使用以下代码：

```
final ImageView v = (ImageView) findViewById(R.id.profileImage);

    v.setOnTouchListener(new OnTouchListener() {
        @Override
        public boolean onTouch(View arg0, MotionEvent arg1) {
            switch (arg1.getAction()) {
            case MotionEvent.ACTION_DOWN: {
                   v.setImageResource(R.drawable.ic_contact_picture_down);

                break;
            }

            case MotionEvent.ACTION_CANCEL:{

                v.setImageResource(R.drawable.ic_contact_picture);
                break;

            }

            case MotionEvent.ACTION_UP: {

                takePhoto();

                v.setImageResource(R.drawable.ic_contact_picture);
                break;
            }

            }
            return true;
        }
    }); 
```

触摸时图像正确更改为 image2。所以 ACTION_DOWN 正在工作。如果用户未触摸图像视图，则调用 ACTION_UP。但如果 untouch 是在 imageview 之外完成的，它也会被调用。如果发生这种情况，我想切换回 image1 但不调用 takePhoto() 函数。ACTION_CANCEL 永远不会被调用，我认为它是上述情况的候选者。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T22:26:32.690

您可以尝试使用 a`Rect`来保持边界，`ImageView`然后使用[`ACTION_MOVE`](http://developer.android.com/reference/android/view/MotionEvent.html#ACTION_MOVE)

例如，声明一个`Rect`对象，

```
private Rect rect; 
```

然后在你的`setOnTouchListener()`，初始化`Rect`和检查使用`ACTION_MOVE`，

```
v.setOnTouchListener(new OnTouchListener() {
    @Override
    public boolean onTouch(View arg0, MotionEvent arg1) {
        switch (arg1.getAction()) {
          case MotionEvent.ACTION_DOWN: {
            // Declare the bounds of the rect
            rect = new Rect(v.getLeft(), v.getTop(), v.getRight(), v.getBottom());   
            v.setImageResource(R.drawable.ic_contact_picture_down);

            break;
          }

          case MotionEvent.ACTION_MOVE:{
            if(!rect.contains((int)arg1.getX(), (int)arg1.getY())) {
                // Outside the bounds
                v.setImageResource(R.drawable.ic_contact_picture);
            }
            break;        
          }

          case MotionEvent.ACTION_UP: {

            takePhoto();

            v.setImageResource(R.drawable.ic_contact_picture);
            break;
          }
        }
        return true;
    }
}); 
```

抱歉，我没有对此进行测试，但我认为您可以理解：)

# eclipse - IntelliJ Idea 社区版 - 快速文档查找

> ID：11075096
> 
> 赞同：0
> 
> 时间：2012-06-17T21:53:18.083
> 
> 标签：eclipse, ide, intellij-idea

只是测试不同的 IDE 来找到我最喜欢的 java 编程。我认为 IntelliJ Idea 很酷，但是我对快速文档查找有一点问题。

我不明白，我怎么能得到一个类的构造函数的javadoc。这是一些图片，应该可以描述我的问题：

如果我想获取一个类的构造函数的信息，我只会得到它的一些一般信息。

![1](../Images/041b8a324b7cb6d3de8536e258cb895b.png)

那么，我怎样才能获得像 Eclipse 中的构造函数的描述呢？

![2](../Images/9eef2cc885ac4df799166f43b1a31240.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T22:02:35.483

IntelliJ 显示类 JavaDoc，在这种情况下不是构造函数 JavaDoc。`BufferedImage`有几个构造函数，IntelliJ 坚持首先选择你想要的构造函数。完成整个通话后：

```
BufferedImage bufferedImage = new BufferedImage(10, 20, 0); 
```

按`Ctrl`+`Q`将显示这个特定的构造函数弹出窗口。我必须承认 Eclipse 在这里更直观一些。

# windows - cmd.exe 启动时使用什么编码/代码页？

> ID：11075102
> 
> 赞同：2
> 
> 时间：2012-06-17T21:54:25.607
> 
> 标签：windows, command-line, codepages

之前有人问过一个几乎相同的问题。回复中对代码页给出了很好的解释，但并没有回答我脑海中的问题：cmd.exe启动时使用的代码页由什么控制？在我的系统上，它以某种方式发生了变化。在注册表项 HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Nls\CodePage 中有一项 OEMCP 设置为 437。这似乎是重新启动后 cmd.exe（如 chcp 所示）使用的 CP，但是后来发生了一些变化，它在新的 cmd.exe 窗口中变为 1252。如果我用 chcp 将其更改为 437，那只会影响当前的 cmd.exe。当我退出并重新启动 cmd.exe 时，chcp 在新窗口中显示 1252。什么控制cmd时使用的默认CP。exe启动了吗？它如何从注册表中的值更改？如何防止它被更改和/或将其更改回 437 以获得新的命令窗口？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T19:54:43.333

我的 Windows 系统中的默认代码页`cmd.exe`是 437，据我所知，这是在美国 (US) 和西欧销售的大多数 PC 硬件的默认 OEM 代码页。`AutoRun`您可以通过添加在一个或两个键下命名的字符串条目来更改此默认值：

```
HKEY_CURRENT_USER\Software\Microsoft\Command Processor 
```

    和

```
HKEY_LOCAL_MACHINE\Software\Microsoft\Command Processor 
```

在 Windows 注册表中，[如此](http://technet.microsoft.com/en-us/library/cc756720%28WS.10%29.aspx)MS Windows Server 2003 支持页面中所述。它描述了如何添加一个在这些键中的一个或两个下`REG_SZ`命名的字符串条目，其值包含您希望在启动时自动运行的命令。`AutoRun``cmd.exe`

例如，要将代码页 1252 设为默认值，请创建一个以`AutoRun`导航到`regedit.exe`实用程序中的这些键之一命名的新字符串值，然后将其值设置为命令`chcp 1252`。

虽然 MS 文章仅表明它适用于 Windows Server 2003，但该技术也适用于我测试过的 Win XP 系统，因此可能也适用于 Vista 和 Win 7。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T00:52:26.660

如果`Win`+`R`并运行`cmd.exe /D`修复它，那么问题出在 cmd[自动运行](http://forum.sysinternals.com/cmdexe-autorun-points_topic546.html)值...

# android - Eclipse 保持 Building workspace... 和 Building workspace... 和 Building workspace

> ID：11075105
> 
> 赞同：26
> 
> 时间：2012-06-17T21:54:47.383
> 
> 标签：android, eclipse, debugging, adt

为什么 Eclipse 在构建 Android 项目时会陷入无限循环构建工作区...和（重新）构建工作区...和（重新）构建工作区...

这是一个已知的错误？

摆脱这个循环的正确方法是什么？

笔记：

1.  如果我取消选中`Project > Build Automatically`，它会构建得很好，甚至可以导出完美运行的签名发布 APK。
2.  此问题仅在我升级到最新的 SDK r19 后才开始。在此之前（SDK r11）我从未遇到过这个问题。
3.  [错误 160868](https://bugs.eclipse.org/bugs/show_bug.cgi?id=160868)准确描述了这个问题。但是从那以后就没有解决了吗？
4.  [在这里](https://issues.sonatype.org/browse/MECLIPSEWTP-40)找到了一个类似的问题描述，但和上一个一样，它是旧的并且与 Android 开发没有直接关系。
5.  [问题 27940](http://code.google.com/p/android/issues/detail?id=27940)表明在处理`BuildConfig.DEBUG`可能相关或不相关的 const 命名时存在错误。但它不是在 r18 中修复了吗？？？
6.  [我在 Android 构建系统中发现了这个用于自动标记/日期标记](https://stackoverflow.com/q/5096998)的很棒的技巧，但我没有使用类似的东西，除了仔细检查和验证构建器的顺序是否正确，项目构建器列表顺序（相同的顺序与其他不表现出这种无限循环构建行为的项目一样）。
7.  我的直觉告诉我，可能有一个锁定文件或标志以某种方式卡住了（只读模式？），从而混淆了构建系统。知道该布尔值可能是什么以及在哪里可以找到它吗？
8.  如果我首先在同一个工作区中打开另一个项目（没有出现这个问题），有这个问题的项目会奇迹般地停止无限重建。如果我颠倒首先打开哪个项目的顺序，则不会发生这种情况。这是否意味着 Eclipse/SDK/ADT 构建系统中的 gremlins？

请不要“盲目射击”：只有当你亲身经历过这个惊人的现象（并解决了它）或可以指出一篇经历过这个惊人的现象（并解决了它）的文章时才回答这个问题。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-27T01:30:21.330

原来[错误 27940](http://code.google.com/p/android/issues/detail?id=27940) 尚未修复。

我使用以下解决方法：

1.  禁用“项目>自动构建”
2.  项目 > 清洁
3.  项目 > 全部构建

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T01:33:45.543

您是否将工作区添加到 Windows 7 库（即 Windows Explorer 收藏夹或 Windows Explorer 库）？[另一个用户在这里](https://stackoverflow.com/a/5661959/844882)遇到了类似的问题。

如果您在其他编辑器中打开了某些内容（在项目的目标目录中），这也可能导致无限的“构建工作区”循环。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-01-28T09:56:52.063

我通过打开模块的 .project 文件解决了这个问题。有两个多余的条目，删除一个有帮助：

```
<buildCommand>
    <name>org.eclipse.m2e.core.maven2Builder</name>
    <arguments>
    </arguments>
</buildCommand>
<buildCommand>
    <name>org.eclipse.m2e.core.maven2Builder</name>
    <arguments>
    </arguments>
</buildCommand> 
```

有时它也可能是由以下两个条目引起的，您必须从中删除旧`org.maven.ide`条目

```
<buildCommand>
  <name>org.maven.ide.eclipse.maven2Builder</name>
</buildCommand>
<buildCommand>
  <name>org.eclipse.m2e.core.maven2Builder</name>
</buildCommand> 
```

也可能有两种相同的性质：

```
<natures>
    <nature>org.eclipse.m2e.core.maven2Nature</nature>
</natures>
<natures>
    <nature>org.eclipse.m2e.core.maven2Nature</nature>
</natures> 
```

或两种本性，其中一种是旧的

```
<natures>
    <nature>org.eclipse.m2e.core.maven2Nature</nature>
</natures>
<natures>
    <nature>org.maven.ide.eclipse.maven2Nature</nature>
</natures> 
```

只需删除多余的或旧的`org.maven.ide.eclipse.maven2Nature`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-09T23:26:24.657

我遇到了同样的问题，有一段时间我不知道为什么。然后我终于弄清楚是什么原因造成的（无论如何对我来说）。

事实证明，我的工作区中有一个旧项目，它使用了我的一个自定义库，但是构建路径没有正确设置以使用该库*（遗憾的是 Eclipse 不能简单地告诉我！）*。我已经从另一个硬盘驱动器复制了这个工作区，我猜现在文件路径都不同了。

因此，如果您的工作区中的任何项目使用任何外部库，请确保构建路径已定义您的库 ( `Properties -> Java Build Path -> Projects[tab]`.

我希望这对其他人有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-19T11:56:41.390

除了构建所有项目之外，您还可以关闭已完成的项目。
单击完成的项目并
转到
项目->关闭项目
希望这会起作用

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-11-12T15:23:34.133

两个项目相互引用。

转到“Project->Properties->Project References”并检查两个项目的引用，这会导致自动构建时出现无限循环。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-05-18T12:06:41.787

就我而言，这可以通过以下方式解决：

我打开了一个命令行窗口，当前目录设置为要构建的项目的目标文件夹。这导致了无限循环。关闭窗口并解决问题。

我想，如果有什么东西阻止了 eclipse 删除一些目标文件夹，它会一遍又一遍地尝试。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-04-13T08:10:44.547

我遇到了同样的问题并通过删除解决了它：项目>属性>构建器> JavaScript验证器

我的 webapp 上没有 javascript。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-06-24T12:59:26.843

加上我的两分钱：是的，现在是 2019 年，所以现在安装了 Eclipse 2019-06... *eyeroll*我的意思是我偶尔也会遇到早期版本的问题，但是在升级到 Eclipse 2019-06 之后，我突然有了三个这样的“睡眠者”并行运行，无法再做任何事情。

为了让它再次工作，我不得不在我的 Maven 存储库中删除我的项目的目录树。所以就我而言，我只需要删除目录`~/.m2/repository/com/sjngm`。

然后我重新启动了 Eclipse，在启动过程中，它似乎从我们的内部存储库下载了该目录下现在缺少的依赖项。

# mysql - Count(*) 允许按 null 分组

> ID：11075108
> 
> 赞同：0
> 
> 时间：2012-06-17T21:55:08.587
> 
> 标签：mysql, sql

我有以下查询：

```
select count(*) as memo_count, student_id from memo group by student_id 
```

它返回以下结果集：

```
memo_count        student_id
3                 0
8                 1 
```

但是，我真正希望它返回的是：

```
memo_count        student_id
3                 0
8                 1
0                 2 
```

正在发生的事情是，Group By 正在过滤掉任何返回 0 的 count(*)，这不是我想要的。有什么办法吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T22:04:17.860

你可以试试这样的东西。假设你有一张学生桌......

```
Select count(m.id), s.id from student s 
 left outer join memo m on m.student_id = s.id 
 group by s.id 
```

# magento - 产品未出现在 Magento 搜索结果中，尽管已启用搜索

> ID：11075111
> 
> 赞同：10
> 
> 时间：2012-06-17T21:55:43.920
> 
> 标签：magento

*（是的，我知道这是重复的，但其他解决方案都不适合我。）*

尽管启用了搜索，但我的产品不会出现在搜索结果中。

这是一张图片来证明这一点。 ![显示没有结果](../Images/7f1d5f856cc0d597c1697f06fb878035.png)

我正在使用最新版本的 Magento CE 版本 1.7.0

我已经多次重新索引并禁用了缓存。

请帮忙！没有这个，我无法建立我的商店。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-18T09:17:49.133

```
1\. Check product Quantity and Stock and that product is assigned to a category
2\. Clear Cache
3\. Run Re-Indexing. 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-18T07:18:27.503

尝试将搜索类型从喜欢更改为全文

配置 -> 目录 -> 目录搜索。

问候

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-08-26T09:29:19.820

检查 MySql 变量**ft min word len**。我有一个类似的问题，如果我搜索“Pad”这个词，它会返回 0 个结果，因为**ft min word len**变量设置为 4 个字符，而“pad”这个词只有 3 个。

警告：将**ft min word len**变量的值更改为 3 可能会影响您的服务器性能。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-05T08:17:54.793

我只是遇到了同样的问题，结果发现，在导入期间没有设置网站复选框（在 Magento 后端的产品选项卡“网站”上）。

尝试了以下（仍在开发站点上工作）

1.  重新索引所有数据
2.  删除缓存
3.  删除所有会话文件（`rm -rf session/*`在 var/ 中）

检查产品设置：

*   库存
*   能见度
*   地位
*   选定类别
*   网站

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-21T18:13:57.783

多年来我一直在玩这些。这是我目前的设置。

目录 目录/搜索（在管理员中） 2 25 128 组合喜欢/全文 2000

属性：可搜索名称、short_description、sku、颜色、manufacturer_part_number、manufacturer、upc

我确实有可搜索的描述，但发现它返回的结果太多..我真的希望在我的产品名称中找到搜索文本。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-07-28T08:49:09.040

我们的客户创建了一个新的根类别，并将他们的所有产品都移到了这里。他们忽略了在以下位置更新主网站商店配置：-

```
"System/Manage Stores/Main Website Store/Root Category" 
```

我们将其设置为“新根类别”，搜索重新焕发生机:)

# python - 使用 Python 从 Google App 读取本地文件

> ID：11075112
> 
> 赞同：0
> 
> 时间：2012-06-17T21:55:50.857
> 
> 标签：python, google-app-engine, file-upload

我正在尝试在不使用表单的情况下将文件上传到我的 Google App 中的 blobstore。但我被困在如何让应用程序读取我的本地文件。我对 python 和 Google Apps 还很陌生，但是经过一些剪切和粘贴后，我得到了这样的结果：

```
import webapp2
import urllib
import os

from google.appengine.api import files
from poster.encode import multipart_encode

class Upload(webapp2.RequestHandler):
  def get(self):
    # Create the file in blobstore
    file_name = files.blobstore.create(mime_type='application/octet-stream')

    # Get the local file path from an url param
    file_path = self.request.get('file')

    # Read the file
    file = open(file_path, "rb")
    datagen, headers = multipart_encode({"file": file})
    data = str().join(datagen) # this is supposedly memory intense and slow

    # Open the blobstore file and write to it
    with files.open(file_name, 'a') as f:
        f.write(data)

    # Finalize the file. Do this before attempting to read it.
    files.finalize(file_name)

    # Get the file's blob key
    blob_key = files.blobstore.get_blob_key(file_name) 
```

现在的问题是我真的不知道如何获取本地文件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T01:17:00.937

您无法从应用程序本身内部读取本地文件系统，您需要使用 http POST 将文件发送到应用程序。

您当然可以在另一个应用程序中执行此操作 - 您只需要使用文件内容创建 mime 多部分消息并将其发布到您的应用程序，发送应用程序只需创建您将手动发布到应用程序的 http 请求。您应该阅读有关如何使用 c# 创建 mime mulitpart 消息的内容。

# eclipse - 在 Eclipse 靛蓝上安装 egit

> ID：11075113
> 
> 赞同：0
> 
> 时间：2012-06-17T21:55:53.643
> 
> 标签：eclipse, egit, eclipse-indigo

在 indigo im 上安装 egit 给出以下选项：

![在此处输入图像描述](../Images/277eb9d555ba7b4d0e117aa072978e52.png)

我刚刚检查了“Eclipse Egit”，但我应该安装其他两个未检查的功能吗？它们是用来做什么的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T22:00:06.633

> Mylyn 是 Eclipse 的任务和应用程序生命周期管理 (ALM) 框架。 [http://www.eclipse.org/mylyn/](http://www.eclipse.org/mylyn/)
> 
> Mylyn 的 EGit 是 EGit 的自定义分支。它将 EGit（Eclipse 的 Git 插件）与 Mylyn（以任务为中心的框架）集成在一起。 [http://www.javaforge.com/project/EGIT](http://www.javaforge.com/project/EGIT)
> 
> EGit Mylyn GitHub 连接器支持创建任务存储库以处理 GitHub 问题和 Gists [http://wiki.eclipse.org/EGit/GitHub/UserGuide](http://wiki.eclipse.org/EGit/GitHub/UserGuide)

# css - CSS 重叠箭头

> ID：11075116
> 
> 赞同：8
> 
> 时间：2012-06-17T21:56:42.457
> 
> 标签：css

我正在尝试仅使用 CSS3 完成与下图非常非常相似的事情。

![在此处输入图像描述](../Images/1e39913a4cba98739c6166b0970e7bd8.png)

唯一的区别是最后一个 div 会有一个尖头。

在我寻找类似适应的东西时，我遇到了这个非常接近我想要做的事情的[js fiddle](http://jsfiddle.net/amkrtchyan/eju9r/14/) ，但引入了两个问题：首先，它是用画布完成的，其次，它迫使我“画画”每个箭头有效地使用两次箭头 - 一个用于 div，一个用于下一个箭头之前的空间。必须有一些更清洁的方式来做到这一点——有人可以在这里为我提供一些方向吗？

我需要知道的是如何构建上图所示的内容——一系列重叠的 div 箭头——仅使用 CSS3。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-17T22:13:37.220

试试这个 - [http://jsfiddle.net/ksNr3/8/](http://jsfiddle.net/ksNr3/8/)

```
ul {
    margin: 20px 60px;
}

ul li {
    display: inline-block;
    height: 30px;
    line-height: 30px;
    width: 100px;
    margin: 5px 1px 0 0;
    text-indent: 35px;
    position: relative;
}

ul li:before {
    content: " ";
    height: 0;
    width: 0;
    position: absolute;
    left: -2px;
    border-style: solid;
    border-width: 15px 0 15px 15px;
    border-color: transparent transparent transparent #fff;
    z-index: 0;
}

ul li:first-child:before {
    border-color: transparent;
}

ul li a:after {
    content: " ";
    height: 0;
    width: 0;
    position: absolute;
    right: -15px;
    border-style: solid;
    border-width: 15px 0 15px 15px;
    border-color: transparent transparent transparent #ccc;
    z-index: 10;
}

ul li.active a {
    background: orange;
    z-index: 100;
}

ul li.active a:after {
    border-left-color: orange;
}

ul li a {
    display: block;
    background: #ccc;
}

ul li a:hover {
    background: pink;
}

ul li a:hover:after {
    border-color: transparent transparent transparent pink; 
}
​ 
```

**更新** - 使其可点击并最小化重叠区域 - [http://jsfiddle.net/ksNr3/8/](http://jsfiddle.net/ksNr3/8/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-01T13:09:01.347

以下 CSS3 解决方案**不使用任何图像**并且易于使用。

我创建了**两个**可以进一步扩展的完整注释示例。

一个示例具有“视觉上”相互堆叠的箭头。

另一个示例*就像*您的问题中的图像一样，箭头上带有“端盖”。

每个示例都有一个简单的 jQuery`.click()`事件侦听器，因此无论您在**面包屑**中单击何处，都可以看到锚点将接收到正确的单击事件。箭尾工作正常。

**屏幕截图显示了 NavBar 面包屑的活动 CSS 悬停：**

![在此处输入图像描述](../Images/ce2a53131ffa9862166084aaa513a2e7.png)

当浏览器中禁用 CSS 时，面包屑导航会优雅地回退以满足可访问性要求。

**参考：**    [**jsFiddle**](http://jsfiddle.net/4vrys/)

# ruby - 排序哈希 Ruby

> ID：11075125
> 
> 赞同：2
> 
> 时间：2012-06-17T21:57:30.670
> 
> 标签：ruby

我有一个看起来像这样的哈希

```
h1 = {"4c09a0da6071a593f051de32"=>["4c09a0da6071a593f051de32", "Cafe Bistro", 37.78458803130115, -122.40743637084961, 215.0], "4abbb03ef964a520668420e3"=>["4abbb03ef964a520668420e3", "The Plant Cafe Organic", 37.7977805076241, -122.3957633972168, 83.0] } 
```

我想按每个哈希中的最终值对其进行排序，例如 83.0、215.0

我试过了

```
h1 = h1.sort_by{|k,v| v[4]} 
```

但是在输出中放入一个数组而不是哈希，我想保持哈希相同，只是重新排序......我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T22:03:19.650

依靠哈希排序并不是一个好主意。Ruby 在 1.8 中根本没有排序哈希。规范形式的数据结构是无序的。

当排序很重要时使用 Array 更好的样式，当需要键查找时使用 Hash 或其他东西。

编写测试时有一个灰色区域。在这种情况下，依赖 Hash 排序可能是合理的，因为您正在某些条件下测试特定的 Ruby 程序，并且毕竟，如果实现假设发生变化，您的测试可能会失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T21:58:40.853

您需要将数组转换回哈希：

```
h1 = Hash[h1.sort_by { |_,v| v[-1] }] 
```

请注意，这只适用于 Ruby 1.9 之后。在此之前，哈希*不是*有序的数据结构。

# ruby-on-rails - 是否可以在“加载”“ActiveRecord::Relation”时对检索到的每条记录运行一个方法？

> ID：11075128
> 
> 赞同：1
> 
> 时间：2012-06-17T21:58:02.267
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord

我正在使用 Ruby on Rails 3.2.2，我想知道是否可以在“运行”/“加载”时检索到的*每条记录上**运行*一个方法，以便仅“保留”/“返回”那些记录该方法返回*，直到*那些是 5。也就是说，我有：*`ActiveRecord::Relation``true`*

 **```
class Comment < ActiveRecord::Base
  def method_name
    # return 'true' or 'false'
  end
end

# The '<...>' in the below code could / should be stated to run the 'method_name'
# on each comment and keep those comments for which 'method_name' returns 'true' 
# until the count of retrieved comments is 5.
Comment.where(:published => true).<...> 
Comment.<...> 
```**

# c# - 使用 jquery ajax 请求处理数据传输和错误处理的 Http 兼容

> ID：11075137
> 
> 赞同：1
> 
> 时间：2012-06-17T21:59:37.617
> 
> 标签：c#, rest, jquery, exception-handling, http-headers

我想知道如何使用具有 http 兼容方法的最新 jquery ajax 请求来处理数据传输和处理错误的正确方法。

我注意到，当服务器端发生未处理的异常，并且我**没有**在 http 协议中指定我期望的数据类型时，**成功**方法调用并且客户端收到 200 OK 响应，好像没有发生任何错误：

```
$.ajax({
    url: action,
    type: 'POST',
    data: jsondata,
    success: function (data, textStatus, xhr) {
            // i'm here now
        },
    error: function (XMLHttpRequest, textStatus, errorThrown) {            
        }
}); 
```

![在此处输入图像描述](../Images/e20c745fd975240f4fb200c39a05afd5.png)

![在此处输入图像描述](../Images/be112373855d9bace756ea06123cd6bd.png)

如果我**指定**类型，我期望为 exaple json，调用一个 ajax**错误**函数。这是因为stack trace默认没有序列化为json，所以解析会失败：

```
$.ajax({
    url: action,
    type: 'POST',
    dataType: 'json',
    data: jsondata,
    contentType: 'application/json; charset=utf-8',
    success: function (data, textStatus, xhr) {
        },
    error: function (XMLHttpRequest, textStatus, errorThrown) {            
            // but now I'm here
        }
}); 
```

![在此处输入图像描述](../Images/b6b71f46f2c30789ba597fe0788e34e8.png)

![在此处输入图像描述](../Images/ae6e0c204133e93c84a6475d6d3253e1.png)

现在它也是 200 OK，但是调用了一个错误（不成功）。

处理异常处理的更好方法是什么。我应该指定类型，在我看来更 RESTFull，还是让它不指定，并且总是跳到成功？

我是否应该始终在服务器端将 ajax 方法包装成`try{}catch(){}`块，并传递适当类型的错误，客户端要求我返回？

```
[HttpPost]
public NJsonResult Execute()
{
    try
    {
        // do some logic if you do not mind
        if (success)
        {
             return new NJsonResult(new {status = "success"});
        }
        return new NJsonResult(new { status = "error" });
    }
    catch(Exception e)
    {
        return new NJsonResult(new { status = "error" });        
    }
}

$.ajax({
    type: 'POST',
    url: action,
    dataType: 'json',
    data: jsondata,
    contentType: 'application/json; charset=utf-8',
    success: function (data) {
        if (data.status == "success") {
        }
        else (data.status == "error") {
        }
    } 
```

Mabye 我应该总是关心可预测的错误并且不关心异常，并且没有指定任何类型吗？

```
[HttpPost]
public NJsonResult Execute()
{
    // do some logic if you do not mind
    if (success)
    {
        return new NJsonResult(new {status = "success"});
    }
    return new NJsonResult(new { status = "error" });
}

$.ajax({
    type: 'POST',
    url: action,
    data: data,
    success: function (data) {
        if (data.status == "success") {
        }
        else {
            // handle even exceptions, because content-type in not specified
        }
    }
}); 
```

错误功能和正确 http 状态代码的位置在哪里（并不总是 200 OK）

现在，我实现了一个全局钩子来拦截未处理的异常：

```
$(document).ready(function () {    
    $.ajaxSetup({
        error: function (XMLHttpRequest, textStatus, errorThrown) {            
            // handle it if you dare
        }
    });    
}); 
```

并始终使用**contentType**和**dataType** ajax 属性指定**内容类型**并**接受标头。**我不使用块 - 我不关心逻辑异常行为。我只是将它登录到**Global.asax**并将其进一步传递给响应。****`try{}catch{}`****

 ******那么，就像这个问题的第一行一样，最好的方法是什么？还有其他想法吗？******

# javascript - mootools 实现具有隐藏和受保护属性的节点类

> ID：11075138
> 
> 赞同：0
> 
> 时间：2012-06-17T21:59:44.857
> 
> 标签：javascript, mootools

我想实现如下所示的 Node 类型，但我想隐藏或保护不是函数的属性，因此不能从类外部覆盖它们。Mootools 可以隐藏和保护属性吗？Mootools 中的隐藏和保护有什么区别？

```
var Node = new Class({

    initialize : function(name){
        this.globalId = container.globalId++;
        this.name = name || 'unnamed Node';
    },

    globalId : null,

    siblingId : null,

    name : null,

    parentNode: null,

    childrenNodes : [],

    addChild : function(child){
        //ensure it is a Node object
        if(!instanceOf(child,Node)){
            throw new Exception('Not a Node',this.name+':\nNode.globalId = '+this.globalId+
            "\nAttempting to add a child node that is not a 'Node' type!");
        }
        child.parentNode = this;
        child.siblingId = this.children.length;
        this.children.push(child);
    },

    removeChild : function(child){
        //ensure the child is my child!
        if(child.parentNode !== this){
            throw new Exception('Lost Child',this.name+':\nNode.globalId = '+this.globalId+
            "\nAttempting to remove Node:\n"+child.name+":\nNode.globalId = "+child.globalId);
        }
        this.childrenNodes.splice(child.siblingId,1);
    }

});
Node.globalId = 0; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T03:56:34.073

如果你需要隐藏的属性，你可以像这样得到它们：

```
var Node = (function() { 
    var someProperty; // This variable and any others you create here are available only inside this function's scope

    return new Class({
        // You have access to those variables here
    });
}()); // call the function immediately. It returns your new class. 
```

# android - Eclipse XML 内容辅助中不需要的项目

> ID：11075140
> 
> 赞同：0
> 
> 时间：2012-06-17T21:59:49.210
> 
> 标签：android, xml, eclipse, content-assist

我已经定义了一个用于帮助输入 XML 字符串定义的模板，我将其命名为“astring”。在 Content Assist 中，我已关闭`XML Tag Proposals`：

![](../Images/d992068874b227b4796ecdfcf8459db3.png)

`Ctrl`但是当我点击+时，我仍然会得到这两个无关的选项“字符串”和“评论”`Space`

![在此处输入图像描述](../Images/d018fef375ca61f1a478d8d73dd65629.png)

难道我做错了什么？为什么取消选中“XML Tag Proposals”并更改顺序没有效果？

* * *

**更新**：

1) 似乎额外的 XML**标记建议**只出现在 Android XML 编辑器中，而不是“标准”编辑器中

2) 但是，我在两个编辑器中都收到了额外的**模板建议**，直到我输入了一些额外的字符来缩小名称。

我不确定这是错误还是设计使然。我认为是一个错误，因为我希望它像 Java 完成一样工作，只要我按下完成键，它就会考虑已经输入的字符。

因此，普通 XML 编辑器的一种解决方法是在开始键入模板名称*之前*按`Ctrl`+ 。但是您仍然可以在 Android XML 编辑器中获得标记建议。`Space`

 *我应该将其作为 Eclipse 或 Android 插件中的错误输入，还是两者兼而有之？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T22:37:49.973

是否有任何可能类似于标签提案的默认 XML 模板（XML / XML 文件 / 模板）？

您还可以检查 Windows > Preferences > General > Editors > File Associations 并切换到您喜欢的其他 XML 编辑器。

作为最后的手段，尝试暂时将语言环境更改为英语/美国以避免[已知错误](https://bugs.eclipse.org/bugs/show_bug.cgi?id=244667)并重新启动 Eclipse。访问控制面板；地区/语言，行政（或高级）；非 Unicode 程序的语言；更改系统区域设置。*

# image - 翻转图像延迟重定向到 url onmouseover 但停止 onmouseout

> ID：11075145
> 
> 赞同：0
> 
> 时间：2012-06-17T22:00:57.650
> 
> 标签：image, rollover

好的，我现在查看了所有答案，但找不到解决方案。

这就是我要创建的内容，我在 1 页上有多个翻转图像，每个翻转图像都有自己的 url，指向主页的特定部分。

我想要的是，当您将鼠标移到它上面时，它会显示第二张图像，并将重定向延迟到 url，直到达到 3000 毫秒，然后将用户重定向到 url。但是延迟必须停止 onmouseout 并且它不会重定向用户并且它再次显示第一张图像，所有翻转图像必须在同一页面上做同样的事情，但每个翻转都有自己的 url。

谁能帮我提供一些关于如何..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T23:16:54.010

我会使用 CSS 和 更改图像`:hover`，并使用 javascript 进行重定向和超时，如下所示：

```
// markup
<a id="my_image_1" class="hover_linker" href="some_link_to_the_homepage.html"></a>

// styles
.hover_linker {
    width:363px;
    height:300px;
    display:block;
}
#my_image_1 {
    background-image: url('some-image.jpg');
}
#my_image_1:hover {
    background-image: url('another-image.jpg');
}

// scripts
var redirectTimeout;
$(document).ready(function() {
    $('a.hover_linker').mouseover(function(e){
        redirectTimeout = window.setTimeout(function () {
            window.location.href = $(e.target).attr("href");
        }, 3000);
    }).mouseout(function(){
        window.clearTimeout(redirectTimeout);
    });
}); 
```

# c# - 实体框架更改列类型

> ID：11075146
> 
> 赞同：1
> 
> 时间：2012-06-17T22:01:14.897
> 
> 标签：c#, entity-framework, orm, migration, entity

我使用这个属性在我的数据库中创建了一个列：

```
public int EnteredDateTime { get; set; } 
```

但是，当我更新属性时，该列已正确创建：

```
public DateTime EnteredDateTime { get; set; } 
```

我收到以下错误：

`The conversion of a varchar data type to a datetime data type resulted in an out-of-range value.`

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T22:07:00.007

如果您忘记设置属性，就会发生这种情况。

`DateTime`a的默认值为`1/1/0001`，它在 SQL Server 日期范围之外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T22:17:03.257

我想您已经使用 CodeFirst 来生成数据库。您目前不能只更改代码并自动更改数据库（这在 EF 5 中可以通过迁移实现）。您必须手动更改数据库并将列的类型设置为 DateTime。或者您从头开始删除并重新创建数据库（如果您不需要已经存储在其中的数据）。

# javascript - 在过渡 D3 之后更改对象属性

> ID：11075148
> 
> 赞同：3
> 
> 时间：2012-06-17T22:02:05.910
> 
> 标签：javascript, attributes, transition, d3.js

一旦转换完成，我想给一个对象一个属性。我只是按如下方式更新图像位置：

```
tmp.transition().duration(1000)
                    .attr("transform", function(d) {return 'translate(' + 
                    coordinates[d].x +',' + 
                    coordinates[d].y + ')'}) 
```

一旦完成，我想给对象 tmp 一个属性“moved”，其值为“no”。我试过：

```
tmp.transition().duration(1000)
     .attr("transform", function(d) {return 'translate(' + 
            coordinates[d].x +',' + 
            coordinates[d].y + ')'}).end('moved', 'no') 
```

但没有成功。有小费吗？谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T01:52:16.070

根据[文档](https://github.com/mbostock/d3/wiki/Transitions#wiki-each)，您可以使用`.each`：

```
tmp.transition().duration(1000)
 .attr("transform", function(d) {return 'translate(' + 
        coordinates[d].x +',' + 
        coordinates[d].y + ')'}
 ).each('end', function() {
     d3.select(this).attr('moved', 'no');
     // or maybe also this.setAttribute('moved', 'no');
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T00:43:08.017

使用 window.setTimeout 后，您可以告诉 javascript 等待一段时间并运行代码。您只需使用相同的毫秒数来同步这两个事件。

```
window.setTimeout(function(){
    //Your fake "callback" code here
}, 1000); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-26T10:54:22.117

回应@user1066286（因为我不能发表评论）：你不应该在这里使用 setTimout() ！除了这是不好的做法外，您不能保证在超时停止时转换实际上会完成。

来自 d3 Transition 文档：

> 转换有四个阶段的生命周期：
> 
> 过渡已安排。过渡开始。过渡运行。过渡结束。

这四个阶段中的每一个都是异步处理的，因此无法知道转换*实际*需要多长时间。它可能比用户定义的持续时间慢一点，也可能快一点。

# real-time - 用于报告/仪表板的实时后端平台？

> ID：11075149
> 
> 赞同：3
> 
> 时间：2012-06-17T22:02:14.640
> 
> 标签：real-time, highcharts, dashboard, pusher, firebase

我将为我的应用程序构建一个仪表板系统，其中一个页面将包含几个小部件，这些小部件绘制图表、表格和代表潜在不相关数据的字形。

客户端将是 HTML5，我只能推送现代网络浏览器。

我的大问题是后端对此有何用途。我想存储“表格”以在图表中使用并实时更新小部件。

例如，发票小部件将显示今天已收取了多少 $$。在“表格”中，每张发票的总数都会有一行：

```
inv = 1; total = 50

Total: 50 
```

小部件将绘制它。推送新数据时：

```
inv = 2; total = 100

Total: 150 
```

该小部件将实时向最终用户显示总数。

数据对于用户公司是私有的。最终我将需要清除太旧的数据（即：我只需要保留尽可能多的数据，以正确评估最终用户的信息需求。例如，只保留 1 个月的发票总额）。

我正在考虑使用[http://www.firebase.com/](http://www.firebase.com/)或[http://pusher.com/](http://pusher.com/)之类的东西，但我怀疑只能解决等式的“实时通知”部分。据我了解，他们不允许我获取过去的数据（即：如果数据在周末更新并且用户打开他的仪表板以查看发生了什么）

然后我看到[http://derbyjs.com/](http://derbyjs.com/)以及使用 mongodb 的可能性。

我想知道哪个后端/平台会让我更接近这个系统的构建。我有使用 python/django/.net/postgress 的经验，但如果最好地解决这种应用程序行为，我可以接受使用其他东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T22:55:13.927

Firebase 提供您提到的“实时通知”部分以及持久数据存储。看一下[教程](http://www.firebase.com/tutorial/)，它会引导您构建一个实时持久的聊天应用程序（过去的聊天消息存储在 Firebase 中，每次重新加载时都会发送回客户端）。你也可以做更复杂的事情，比如你提到的实时图表/小部件。

Firebase 目前最大的限制是我们处于封闭测试阶段，数据目前不受保护（任何人都可以读取和写入您的数据）。不过，安全功能即将推出。

您可能想要评估的其他一些后端平台是：[Meteor](http://meteor.com/)和[Simperium](https://simperium.com/)。Firebase 和 Simperium 是云服务，您的数据存储在云中，您无需管理自己的任何服务器，而 Meteor 和 DerbyJS 是您必须在自己的服务器上安装和运行的平台。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T15:20:57.213

I would recommend signalR. It's amazing and you can literally do anything with it. Check it out: www.signalr.net and if you have any problems simply go to www.jabbr.net You will find a very helpful community there. I implemented a notification mechanism similar to facebook together with real time monitoring and a small chat in the same web site.

# python - 英镑符号在我的 SQL 数据库中保存为问号

> ID：11075155
> 
> 赞同：0
> 
> 时间：2012-06-17T22:02:50.757
> 
> 标签：python, mysql, utf

我已经搜索了一段时间，但似乎没有一个足够相关。

基本上，我有一个从程序中提取的 csv 文件。我编写了一个快速的 python 程序来将 csv 文件转换为 sql 文件，这样我就可以将它导入到数据库中。然后，我使用 Windows 命令提示符将 .sql 文件导入远程 MySQL 服务器。

我的数据库中的某些字段中有一些英镑符号 (£)。在 csv 文件中，它们显示为 £，在生成的 sql 文件中（转换后）它们显示为 \£，因为我使用了 re.escape - 我实际上认为这可能是原因（python 代码将其写入文件是：对于 csvReader 中的行：...其他内容... sqlfile.write(re.escape(row[6]))。

文件导入后，我查看表格，井号现在显示为？在表格中，当内容显示在网站上时使用 php 进行查询。数据库服务器连接排序规则是 utf8_general_ci，我正在使用以下命令连接到远程服务器： mysql --host=HOST --user=USER --password=PASS --default-character-set=utf8 DATABASENAME < filetoimport.sql

正如预期的那样，更改 firefox 上的字符编码没有任何区别 - 无论发生什么似乎都是在导入 sql 转储时发生的。

老实说，我不太确定我是否完全了解整个字符集是如何工作的，我以前从来没有真正尝试过解决这样的问题，所以我不确定还能尝试什么。任何帮助，甚至指向正确的搜索方向，因为到目前为止我的搜索似乎对我没有帮助:(

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T00:37:19.737

使用 mysql 的转义函数。mysqldb 是这样的：

```
conn.escape_string() 
```

# html - 位置的连续流式传输是否适用于 HTML5 动作密集型服务器客户端游戏？

> ID：11075162
> 
> 赞同：1
> 
> 时间：2012-06-17T22:03:24.197
> 
> 标签：html, networking, websocket, real-time, bandwidth

在为约 100 名玩家设计的动作密集型（格斗式）游戏中，考虑到当前的带宽限制，是否足以通过 websocket 将每个玩家的位置流式传输给每个玩家，还是会有点矫枉过正？如果是这样，是否有不会的选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T08:30:39.993

您可以计算一下：给定 N 个播放器、M 个事件/秒的更新速率和每个事件的 K 字节有效负载，您至少需要 N x N x M x K 字节/秒的服务器带宽。

这种幼稚的方法是否可以接受和工作取决于 N、M 和 K，以及网络条件。

我建议考虑一下这种方法：是否每个玩家都需要所有其他玩家的位置，或者只需要各自玩家“接近”（可见）的位置。

关于 WebSocket：继续吧，如果你想做基于浏览器的游戏，它是正确的技术。

像 WebRTC 这样的新兴 P2P 协议通常不适用于这样的游戏，因为服务器不再控制位置（客户端可以“伪造”他们的东西）。

# spring - 如何将用户名/密码移出 spring-security-context.xml？

> ID：11075170
> 
> 赞同：8
> 
> 时间：2012-06-17T22:03:42.670
> 
> 标签：spring, spring-mvc, spring-security

我在我的一个项目中使用 Spring Security。该网络应用程序要求用户登录。因此，我在 spring-security-context.xml 文件中添加了一些用户名和密码，如下所示：

```
<authentication-manager>
    <authentication-provider>
        <user-service>
            <user name="user_1" password="password_1" authorities="ROLE_USER" />
            <user name="user_2" password="password_2" authorities="ROLE_USER" />
        </user-service>
    </authentication-provider>
</authentication-manager> 
```

我的问题是，如何将这些用户名-密码对移动到不同的文件（如某些属性文件）而不是将它们保存在 spring-security-context.xml 中？以及如何读取该文件属性文件？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-17T23:43:40.737

您可以将用户名和密码存储在单独的 .properties 文件中。

```
<user-service id="userDetailsService" properties="users.properties"/> 
```

users.properties 应具有以下格式：

```
jimi=jimispassword,ROLE_USER,ROLE_ADMIN,enabled
bob=bobspassword,ROLE_USER,enabled 
```

如果你想将它存储在数据库中，我建议你阅读这篇文章：[http ://www.mkyong.com/spring-security/spring-security-form-login-using-database/](http://www.mkyong.com/spring-security/spring-security-form-login-using-database/)

参考：[Spring Security In-Memory Authentication](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#core-services-in-memory-service)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T23:34:21.583

您可以使用`PropertyPlaceholderConfigurer`- 将它们放在属性文件中，然后使用 EL 引用它们：

[http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/beans.html#beans-factory-placeholderconfigurer](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/beans.html#beans-factory-placeholderconfigurer)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-17T22:06:31.450

您可以找到将它们移动到数据库或 LDAP 的方法。Spring Security 肯定支持两者。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-12T10:42:56.060

我已经尝试了建议的方法最后我做了以下似乎工作得很好

在您的 web xml 中添加了这些更改

```
<filter-mapping>
<filter-name>springSecurityFilterChain</filter-name>
<url-pattern>/*</url-pattern>
</filter-mapping> 

<servlet-mapping>
<servlet-name>service</servlet-name>
<url-pattern>/*</url-pattern>
</servlet-mapping>

<filter>
<filter-name>springSecurityFilterChain</filter-name>
<filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>

<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

在您的 spring-security xml 中添加这些更改

```
<security:authentication-manager alias="authenticationManager">
<security:authentication-provider>
<security:user-service>
<security:user name="${resource.service.authentication.name}"
authorities="${resource.service.authentication.authorities}"
password="${resource.service.authentication.password}"/>
</security:user-service>
</security:authentication-provider>
</security:authentication-manager> 
```

将这些更改添加到您的应用程序上下文 xml 中，或者如果您有 property-loader xml 更好

```
<bean id="propertyConfigurer"
class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
<property name="placeholderPrefix" value="${" />
<property name="placeholderSuffix" value="}" />
<property name="locations">
<list>
<value>classpath:resourceservice.properties</value>
</list>
</property>
</bean> 
```

然后将这些更改添加到您的属性文件 resourceservice.properties

```
memberservice.authentication.name=usename
memberservice.authentication.authorities=AUTHORISED
memberservice.authentication.password=password 
```

在使用 Jersey 的资源中添加这些更改

```
@PUT
@Path("{accountId}")
@Consumes("application/xml")
@PreAuthorize("hasRole('AUTHORISED')")
public Response methodName 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-24T17:37:20.503

这适用于我使用属性文件进行 Spring 安全身份验证和授权：

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:mvc="http://www.springframework.org/schema/mvc" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:security="http://www.springframework.org/schema/security"

    xsi:schemaLocation="
        http://www.springframework.org/schema/beans     
        http://www.springframework.org/schema/beans/spring-beans-3.2.xsd
        http://www.springframework.org/schema/context 
        http://www.springframework.org/schema/context/spring-context-3.2.xsd
        http://www.springframework.org/schema/mvc
        http://www.springframework.org/schema/mvc/spring-mvc-3.2.xsd
        http://www.springframework.org/schema/security
        http://www.springframework.org/schema/security/spring-security-3.2.xsd">

    <mvc:annotation-driven />

    <bean id="webPropertyConfigurer"
        class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="ignoreResourceNotFound" value="true" />
        <property name="ignoreUnresolvablePlaceholders" value="true" />
        <property name="locations">
            <list>
                <value>classpath:abc.properties</value>
            </list>
        </property>
    </bean>

    <bean
        class="org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor" />

    <security:http auto-config="true" use-expressions="true">
        <security:intercept-url pattern="/stat/login" access="permitAll"/>
        <security:intercept-url pattern="/stat/summary" access="hasRole('ROLE_ADMIN')" />

        <security:form-login login-page="/stat/login"
            default-target-url="/stat/summary" authentication-failure-url="/stat/loginError" /> 
    </security:http>
    <!-- Username and password used from xml -->
    <!-- <security:authentication-manager>
        <security:authentication-provider>
            <security:user-service>
                <security:user name="xyz" password="xyz" authorities="ROLE_ADMIN" />
            </security:user-service>
        </security:authentication-provider>
    </security:authentication-manager> -->

    <security:authentication-manager>
        <security:authentication-provider>
             <security:user-service>
        <security:user name="${stat.user}" password="${stat.pwd}" authorities="ROLE_ADMIN" />
        </security:user-service>
        </security:authentication-provider>
    </security:authentication-manager> 
</beans> 
```

`abc.properties`文件：

```
stat.user=xyz
stat.pwd=xyz 
```

`web.xml`spring-security 实现的入口：

```
<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy
    </filter-class>
</filter>

<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-11-06T10:50:21.740

您可以简单地在**Spring Security** Configuration 中添加 Bean：

```
@Bean
public UserDetailsService userDetailsService() {
   Properties users = PropertiesLoaderUtils.loadAllProperties("users.properties");
   return new InMemoryUserDetailsManager(users);
} 
```

和**users.properties**看起来像：

```
admin={noop}password,ROLE_USER,ROLE_ADMIN,enabled
bob={noop}password,ROLE_USER,enabled
123={noop}123,ROLE_USER,enabled 
```

# android - Android Intent-filter mimetype 和主机/方案

> ID：11075179
> 
> 赞同：1
> 
> 时间：2012-06-17T22:05:22.117
> 
> 标签：android, host, intentfilter

我在某些应用程序中看到，当您单击链接时，它会询问您是否要在应用程序中打开它。我在很多帖子中看到你可以做到

```
<intent-filter>
  <action android:name="android.intent.action.VIEW" />
  <category android:name="android.intent.category.DEFAULT" />
  <category android:name="android.intent.category.BROWSABLE" />
  <data android:host="www.ex-ample.com" android:scheme="http" />
</intent-filter> 
```

我没有尝试过，但每个帖子似乎都说它有效。我尝试的是：

```
<intent-filter>
  <action android:name="android.intent.action.VIEW" />
  <category android:name="android.intent.category.DEFAULT" />
  <category android:name="android.intent.category.BROWSABLE" />
  <data android:mimeType="vnd.android.cursor.item/vnd.example.crag" />
  <data android:host="www.ex-ample.com" android:scheme="http" />
</intent-filter> 
```

它似乎不起作用，我单击了文本中的链接，该链接转到 www.ex-ample.com/test/123，它只是在浏览器中打开。

我真的很想知道两件事：

1.  你能同时使用 mineType 和 host/scheme 属性吗
2.  你能看出这还有什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T23:22:32.343

> 你能同时使用 mineType 和 host/scheme 属性吗

是的，至少[根据`<data>`](http://developer.android.com/guide/topics/manifest/data-element.html).

> 你能看出这还有什么问题吗？

如果[http://www.ex-ample.com/test/123](http://www.ex-ample.com/test/123)没有`vnd.android.cursor.item/vnd.example.crag`在 HTTP HEAD 请求上返回 MIME 类型的文档，则您`<intent-filter>`将不匹配。

# php - 需要在 PHP 中解析较大的（15k 条记录），做一些其他的操作。建议？

> ID：11075180
> 
> 赞同：1
> 
> 时间：2012-06-17T22:05:32.203
> 
> 标签：php, mysql, csv

客户有一个金融服务网站，他每天早上都会在该网站上获得充满潜在客户的 CSV 电子表格。通常每张纸大约有 10k - 15k 条记录。他想做的是上传该电子表格，让服务器对其进行解析，检查他的数据库中是否存在重复的潜在客户，将它们插入到他的数据库中，对照外部 API 检查记录，然后通过电子邮件发送合格的潜在客户。

现在我已经为他构建了一个临时实用程序来完成所有这些工作，但看起来服务器和数据库因为做了这么多而压力过大。他必须将它们切成 1000 个记录包，但这让他很恼火。它上传文件，遍历电子表格并执行上述所有操作，但一次处理不了那么多。

所以我的问题是，是否有人对你如何处理这样的事情有一些一般性的建议，你可能会为这样的事情考虑什么？特别是能够上传单个文件，然后在剩下的时间里不必担心，他的脸上会露出灿烂的笑容。

以下是我目前处理这些记录的方式（不要笑）：

```
<?php
//standard php file upload handler
include("upload.inc.php");

$conn = mysql_connect("localhost","username","password");

mysql_select_db("database",$conn);

if($_FILES['csvFile']['name']) {

$upload_dir = $_SERVER['DOCUMENT_ROOT'] . "/upload/files/";

list($file,$errMsg) = upload('csvFile',$upload_dir,'');

// clear the db table

$sql = "DELETE FROM tempTable";

$result = mysql_query($sql) or die("Error: " . mysql_error() . "<br>");

// process the file

$row = 1;

$fileName = $upload_dir . $file;

if (($handle = fopen($fileName, "r")) !== FALSE) {

while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {

$num = count($data);

// write the data to mysql duplicate checker table

$sql = "INSERT INTO tempTable (process_date,firstname,middlename,lastname,ssn,dob,dl_number,dl_state,gender,military_active,amount_requested,residence_type,residence_length,address1,address2,city, state,zip,phone_home,phone_cell,contact_time,email,ip_addr,pay_frequency,net_income,first_payday,second_payday,employment_status,employer_name,job_title,hire_date,phone_work,phone_work2, bank_name,account_type,direct_deposit,reference1_firstname,reference1_lastname,reference1_relationship,phone_reference1,reference2_firstname,reference2_lastname,reference2_relationship, phone_reference2,routing_no,account_no) VALUES

('".mysql_escape_string($data[0])."',

'".mysql_escape_string($data[1])."',

'".mysql_escape_string($data[2])."',

'".mysql_escape_string($data[3])."',

'".mysql_escape_string($data[4])."',

'".mysql_escape_string($data[5])."',

'".mysql_escape_string($data[6])."',

'".mysql_escape_string($data[7])."',

'".mysql_escape_string($data[8])."',

'".mysql_escape_string($data[9])."',

'".mysql_escape_string($data[10])."',

'".mysql_escape_string($data[11])."',

'".mysql_escape_string($data[12])."',

'".mysql_escape_string($data[13])."',

'".mysql_escape_string($data[14])."',

'".mysql_escape_string($data[15])."',

'".mysql_escape_string($data[16])."',

'".mysql_escape_string($data[17])."',

'".mysql_escape_string($data[18])."',

'".mysql_escape_string($data[19])."',

'".mysql_escape_string($data[20])."',

'".mysql_escape_string($data[21])."',

'".mysql_escape_string($data[22])."',

'".mysql_escape_string($data[23])."',

'".mysql_escape_string($data[24])."',

'".mysql_escape_string($data[25])."',

'".mysql_escape_string($data[26])."',

'".mysql_escape_string($data[27])."',

'".mysql_escape_string($data[28])."',

'".mysql_escape_string($data[29])."',

'".mysql_escape_string($data[30])."',

'".mysql_escape_string($data[31])."',

'".mysql_escape_string($data[32])."',

'".mysql_escape_string($data[33])."',

'".mysql_escape_string($data[34])."',

'".mysql_escape_string($data[35])."',

'".mysql_escape_string($data[36])."',

'".mysql_escape_string($data[37])."',

'".mysql_escape_string($data[38])."',

'".mysql_escape_string($data[39])."',

'".mysql_escape_string($data[40])."',

'".mysql_escape_string($data[41])."',

'".mysql_escape_string($data[42])."',

'".mysql_escape_string($data[43])."',

'".mysql_escape_string($data[44])."',

'".mysql_escape_string($data[45])."')";

$result = mysql_query($sql) or die("Error: " . mysql_error() . "<br>");

$numRows++;

//echo "<br>";

}

fclose($handle);

// now look for duplicates

$sql_1 = "SELECT account_no,count(*) FROM tempTable GROUP BY account_no";

$result_1 = mysql_query($sql_1) or die("Error: " . mysql_error() . "<br>");

while(list($acct,$numcount) = mysql_fetch_row($result_1)) {

// if there is more than one delete all of them

if($numcount>1) {

//echo "acct: $acct, num: $numcount<br>";

$toBeRemoved+=$numcount;

$sql_delete = "DELETE FROM tempTable WHERE(account_no = '$acct')";

$result_delete = mysql_query($sql_delete) or die("Error: " . mysql_error() . "<br>");

}

else {

//echo "acct: $acct, num: $numcount<br>";

}

}

// now remove the duplicates who are already in the customer table

$sql_2 = "SELECT account_no FROM customerTable";

$result_2 = mysql_query($sql_2) or die("Error: " . mysql_error() . "<br>");

while(list($acct) = mysql_fetch_row($result_2)) {

//echo "acct: $acct, num: $numcount<br>";

$sql_delete = "DELETE FROM tempTable WHERE(account_no = '$acct')";

$result_delete = mysql_query($sql_delete) or die("Error: " . mysql_error() . "<br>");

}

// now send the user to the new page with more options
Header("Location: finish.php");

}

}

?>

<html>
<body>
<?php 

if(!empty($_GET['msg'])) {

$msg = $_GET['msg'];

echo "<strong>$msg</strong>";

}

?>
<form method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>" enctype="multipart/form-data">
Upload CSV File: <input type="file" name="csvFile" size="30">
<input type="submit">
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T22:11:07.487

您可以使用后台作业运行器来执行此类操作。我最近经常这样做

[https://github.com/seatgeek/djjob](https://github.com/seatgeek/djjob)

[http://seatgeek.com/blog/dev/djjob-a-php-port-of-delayed_job](http://seatgeek.com/blog/dev/djjob-a-php-port-of-delayed_job)

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T23:29:24.220

1-确保两者`tempTable.account_no`都`customerTable.account_no`被索引（它们可能已经是主键）。您可能还需要`ALTER TABLE temptable ENGINE=MEMORY;`，这使 MySQL[仅在内存中工作](http://dev.mysql.com/doc/refman/5.5/en/memory-storage-engine.html)（不写入磁盘，但表内容在服务器关闭时丢失）。

2- 将 CSV 文件导入表格：

```
ALTER TABLE tempTable DISABLE KEYS; -- otherwise, MySQL recomputes indexes after each line is inserted
LOAD DATA LOCAL INFILE 'yourfile.csv' INTO TABLE tempTable
FIELDS TERMINATED BY ',' ;
ALTER TABLE tempTable ENABLE KEYS; -- recompute all indexes in one go 
```

您当然需要自定义`LOAD DATA`命令以[匹配](http://dev.mysql.com/doc/refman/5.5/en/load-data.html)输入文件的确切格式。

3-删除重复项：

```
DELETE tempTable.*
FROM tempTable

-- match with the list of duplicates
LEFT JOIN (
    SELECT account_no
    FROM tempTable
    GROUP BY account_no
    COUNT(account_no) > 1
) AS duplicates
    ON duplicates.account_no = tempTable.account_no

-- match with records in customerTable
LEFT JOIN customerTable
    ON customerTable.account_no = tempTable.account_no

-- records with either duplicates, or with a match in customerTable
WHERE duplicates.account_no IS NOT NULL OR customerTable.account_no IS NOT NULL; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T23:03:08.680

尝试对您的一些数据库查询进行计时并将它们批处理在一起。可能是其中之一正在减慢一切。

# python - 使用 scikit-learn 的顺序 k 均值聚类

> ID：11075181
> 
> 赞同：2
> 
> 时间：2012-06-17T22:05:33.743
> 
> 标签：python, machine-learning, cluster-analysis, scikit-learn

有没有办法使用 scikit-learn 执行顺序 k-means 聚类？如果不重新拟合所有数据，我似乎找不到添加新数据的正确方法。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-17T23:05:11.030

scikit-learn 的`KMeans`类有一个[`predict`](http://scikit-learn.org/stable/modules/generated/sklearn.cluster.KMeans.html#sklearn.cluster.KMeans.predict)方法，给定一些（新的）点，确定这些点属于哪个集群。调用此方法不会*更改*簇质心。

如果您*确实*希望通过添加新数据来更改质心，即您想在在线设置中进行聚类，请使用[`MiniBatchKMeans`](http://scikit-learn.org/stable/modules/clustering.html#mini-batch-kmeans)估计器及其`partial_fit`方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-17T22:55:22.413

`init`您可以使用参数为传递质心的初始值[`sklearn.cluster.kmeans`](http://scikit-learn.org/stable/modules/generated/sklearn.cluster.k_means.html)。那么你可以这样做：

```
centroids, labels, inertia = k_means(data, k)
new_data = np.append(data, extra_pts)
new_centroids, new_labels, new_inertia = k_means(new_data, k, init=centroids) 
```

假设您只是添加数据点而不更改`k`.

我认为这有时意味着你会得到一个次优的结果，但它通常应该更快。您可能希望偶尔使用 10 个随机种子重新拟合，然后选择最好的一个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-20T13:26:03.483

编写自己的函数来找出哪个质心最接近您正在考虑的点也相对容易。假设您有一些`X`可以用于 kmeans 的矩阵：

```
centroids, labels, inertia = cluster.k_means(X, 5)

def pred(arr):
    return np.argmin([np.linalg.norm(arr-b) for b in centroids]) 
```

您可以通过以下方式确认这是否有效：

```
[pred(X[i]) == labels[i] for i in range(len(X))] 
```

# java - JavaMail 使用 SSHD 端口（在开放网络上时）

> ID：11075184
> 
> 赞同：0
> 
> 时间：2012-06-17T22:05:47.560
> 
> 标签：java, jakarta-mail, wireless, sshd, port-number

我有一个（希望如此）简单的问题。当您在公共网络上时，是否可以使用 SSHD 隧道通过 JavaMail 安全地访问您的 Microsoft Exchange 服务器？我读到有人使用 SSHD 隧道安全地使用机场 wifi，我可以为我的邮件客户端做同样的事情吗？

考虑以下代码片段，它目前允许我登录到我的邮件服务器（假设用户名和密码正确）

```
1 Properties props = System.getProperties();
2 props.setProperty("mail.imap.port", "993");
3 Session session = Session.getInstance(props, null);
4 Store store = session.getStore("imaps");
5 store.connect(host, name, pass); 
```

我的问题在第 2 行，端口 993 在我的机器上还是邮件服务器上？我可以使用端口 8080 将 SSHD 简单地连接到我的办公室，并将 8080 替换为 993，从而使用我设置的安全隧道吗？

注意：据我所知，我没有加密任何网络流量，即使它通过“安全无线”自然加密，我仍然想要额外的保护层。感谢您花时间阅读

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T22:59:52.283

端口 993 在邮件服务器上。除非您可以通过 ssh 进入运行您的邮件服务器的机器，否则设置您需要的隧道并不容易。如果您只能通过 ssh 进入您的办公室机器，则您需要该机器上的一个端口，您可以从那里连接并访问您的邮件服务器。您可以使用 netcat 程序之类的东西来设置一系列隧道，但又不是那么简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T03:41:26.760

您可能阅读了 ssh 中的代理服务器支持。在这种情况下，您想要的更简单。

```
ssh -L 8080:mailserver:993 user@officepc 
```

该语句说监听本地机器的端口 8080。到端口 8080 的流量应该转到 mailserver:993。要到达 mailserver:993，流量首先通过与 officepc 的安全连接。

因此，您将修改应用程序以连接到 localhost:8080。

请注意，localhost->officepc 之间的流量受 ssh 保护，但来自 officepc->mailserver 的流量不受 ssh 保护（但如果协议是安全的，则可能是安全的）。如果 ssh 在邮件服务器上运行，您可以：

```
ssh -L 8080:mailserver:993 user@mailserver 
```

这种类型的东西对于网上冲浪比使用电子邮件更重要，因为使用电子邮件更容易确保您已经在使用 SSL/TLS。

然而，有时为了打击垃圾邮件，互联网提供商可能会阻止邮件端口（25 是最常见的）。SSH 隧道可以在这种情况下提供帮助。

# unit-testing - MVCContrib TestHelper 和 User.Identity.Name、Server.MapPath 和表单集合

> ID：11075186
> 
> 赞同：1
> 
> 时间：2012-06-17T22:05:57.620
> 
> 标签：unit-testing, rhino-mocks, mvccontrib, mvccontrib-testhelper

我是 MVCContrib Testhelper 的新手并使用 Rhino 进行模拟。

我需要帮助对依赖于 User.Identity.Name、Server.MapPath 和表单集合的控制器进行单元测试。

我从

```
var controller = new SubmitController();
var builder = new TestControllerBuilder();
builder.InitializeController(controller); 
```

我发现[这篇文章](http://www.mfranc.com/tag/mvc-contrib/)用于设置 User.Identity.Name

```
controller.ControllerContext = TestHelper.MockControllerContext(controller).WithAuthenticatedUser("domain\\username"); 
```

此时，在我的控制器中，我现在可以访问 User.Identity。然后问题变成了我如何设置表单集合变量。环境

```
builder.Form.Add("testvar","1"); 
```

不再工作。看来现在我必须通过

```
controller.HttpContext.Request.Form.Add("testvar","1) 
```

这似乎可行，但此时，我不再使用上面的 builder(TestControllerBuilder)。

然后我不得不模拟引发更多问题的服务器。我怎样才能继续使用构建器，但对 httpContext、HttpRequest、Server 等使用模拟或存根。我有点期待构建器有方法来设置 HttpRequest、Server 等的预期值。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T13:45:05.430

当您更换了`ControllerContext`删除 MVCContrib 上下文的控制器时。尝试这样的事情：

```
using MvcContrib.TestHelper;
using MvcContrib.TestHelper.Fakes;
using Rhino.Mocks;

...
var builder = new TestControllerBuilder();
builder.Form.Add("testvar", "1"); 
builder.HttpContext.User = new FakePrincipal(new FakeIdentity("UserName"), new string[] { "Role" });
builder.HttpContext.Server.Stub(x => x.MapPath(Arg<string>.Is.Anything)).Return("Value");
builder.InitializeController(controller); 
```

# java - 嵌套同步的速度

> ID：11075187
> 
> 赞同：3
> 
> 时间：2012-06-17T22:06:07.747
> 
> 标签：java, synchronized

嵌套同步块是否比普通同步块更快？或者例如，以下哪个例程更快：

```
void routine1(SyncClass a) {
  a.syncMethod1();
  a.syncmethod2();
  a.syncMethod1();
}

void routine2(SyncClass a) {
  synchronized(a) {
    a.syncMethod1();
    a.syncmethod2();
    a.syncMethod1();
  }
} 
```

这些方法是同步的。我正在考虑在不需要线程安全的情况下使用线程安全对象。因此并发级别不受影响。

另外，答案平台是否依赖？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T22:09:35.553

`synchronized`无论平台如何，在性能方面，您最好尽可能使用最小的代码元素。

将多个同步调用包装在一个`synchronized`块中会降低并发性（从而降低性能）。仅当您需要同步特定的调用序列时才这样做。

如果您担心并发性*之外*的性能影响，我不知道哪个更快。但是，我希望您描述的两种方法的性能差异是难以察觉的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-28T11:57:12.910

根据对该问题的评论，答案似乎是肯定的。但有两个警告。

1）由于并行执行的机会较少，线程可能会更频繁地相互等待。

2）编译器可以自动优化这种方式。

# ios - MECL Paypal 转换为 ARC (IOS)

> ID：11075192
> 
> 赞同：1
> 
> 时间：2012-06-17T22:07:13.753
> 
> 标签：ios, paypal, automatic-ref-counting

我目前正在尝试使用 ARC 将 Paypal 的 MECL 集成到现有的 IOS 项目中。

我相信通过手动删除代码中的所有发布/保留应该使其与 ARC 兼容。

只有一个语句我不知道如何转换：“InitAndDealloc”可以在几个类中找到，例如这里：

```
static NSString *SolutionTypeStrings[] = {@"Sole", @"Mark"};
static NSString *LandingPageTypeStrings[] = {@"LandingPage", @"Billing", @"Login"};
static NSString *ChannelTypeStrings[] = {@"Merchant", @"eBayItem"};

#define LOCALE_CODE @"LocaleCode"

@implementation SetExpressCheckoutRequestDetails

InitAndDealloc

StringAccessor(ReturnURL)
StringAccessor(CancelURL)
StringAccessor1(cppHeaderImage, @"cpp-header-image")
StringAccessor1(cppHeaderBorderColor, @"cpp-header-border-color")
StringAccessor1(cppHeaderBackColor, @"cpp-header-back-color")
StringAccessor1(cppPayflowColor, @"cpp-payflow-color")
IntAccessor(AllowNote)
IntAccessor(ReqConfirmShipping)
TypedefAccessor(NoShipping, NoShippingType)
StringAccessor(Token)
AmountAccessor(MaxAmount)
StringAccessor(CallbackURL)
IntAccessor(CallbackTimeout)
GenericAccessor1(FlatRateShippingOptions, ShippingOptions)
IntAccessor(AddressOverride)
StringAccessor(PageStyle)
StringAccessor(BuyerEmail)
StringAccessor(giropaySuccessURL)
StringAccessor(giropayCancelURL)
StringAccessor(BanktxnPendingURL)
GenericAccessor(EnhancedCheckoutData)
GenericAccessor(BuyerDetails)
StringAccessor(BrandName)
GenericAccessor(FundingSourceDetails)
StringAccessor(CustomerServiceNumber)
IntAccessor(GiftMessageEnable)
IntAccessor(GiftReceiptEnable)
IntAccessor(GiftWrapEnable)
StringAccessor(GiftWrapName)
AmountAccessor(GiftWrapAmount)
IntAccessor(BuyerEmailOptinEnable)
StringAccessor(SurveyQuestion)
StringAccessor(CallbackVersion)
IntAccessor(SurveyEnable)
MutableArrayAccessor(PaymentDetails)
MutableArrayAccessor(BillingAgreementDetails)
MutableArrayAccessor1(OtherPaymentMethods, OtherPaymentMethodDetails)
MutableArrayAccessor1(SurveyChoice, NSString)
EnumAccessor(SolutionType, SolutionType)
EnumAccessor(LandingPage, LandingPageType);
EnumAccessor(ChannelType, ChannelType); 
```

如果我删除“InitAndDealloc”行，似乎我不能再在类中设置变量了。事实上，我也有工作（非 ARC）贝宝演示。

通过做这个：

```
SetExpressCheckoutRequestDetails *sreq = [[SetExpressCheckoutRequestDetails alloc] init];
sreq.ReturnURL = @"Bob";
NSLog(@"%@  ", sreq.ReturnURL ); 
```

在这两个项目中。我的将返回 null，贝宝的将返回 Bob。

它甚至与“InitAndDealloc”有关还是我看错了？如果是我如何在 ARC 项目中替换“InitAndDealloc”？我似乎找不到带有自动完成功能的简单“Init”，通过谷歌搜索“InitAndDealloc”我绝对没有得到任何结果：/

谢谢阅读！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T22:10:25.493

我以前从未使用过 MECL，但它被称为“InitAndDealloc”的方式肯定*不是*Objective C，因此不会受到 ARC 对 Objective C 要求的相同规则的约束。最好把它留在原处，不要试图搞砸或与之斗争。

但无论如何，与其努力尝试为某些已发布且可能存在问题的 SDK 代码启用 ARC，不如为 MECL 文件*关闭ARC？*

[这是一个相关的问题](https://stackoverflow.com/questions/6646052/how-can-i-disable-arc-for-a-single-file-in-a-project)，描述了如何为单个文件关闭 ARC。

# android - Android路径复制构造函数失败？

> ID：11075193
> 
> 赞同：1
> 
> 时间：2012-06-17T22:07:24.277
> 
> 标签：android, android-emulator, android-4.0-ice-cream-sandwich

在我正在玩的玩具图形应用程序中，我有这样的东西：

```
Path p = new Path();
p.addCircle(40,40,40,Path.Direction.CW);
canvas.drawPath(p); 
```

这在模拟器和手机上都按预期工作。但现在我试试这个：

```
Path p = new Path();
p.addCircle(40,40,40,Path.Direction.CW);
Path q = new Path(p);
canvas.drawPath(q); 
```

这在模拟器上按预期工作，但在我运行 4.04 的 Nexus S 上没有任何作用。

同样，如果我尝试：

```
Path p = new Path();
p.addCircle(40,40,40,Path.Direction.CW);
Matrix m = new Matrix();
m.setTranslate(50,50);
Path q = new Path();
p.transform(m,q);
canvas.drawPath(q); 
```

同样，这只适用于模拟器，不适用于我的手机。这里有什么问题？没有例外，日志中没有任何用处，执行直接通过相关代码运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T17:19:12.273

我预计这是由于硬件加速而失败的。尝试将其关闭以进行快速测试。

我刚刚在我使用的绘图库中遇到了类似的问题。该问题似乎与它在其绘图代码中的多个 new Path() 调用有关。我已将它们拉到它们真正属于的构造函数中，现在一切正常。

# ruby-on-rails-3 - rails routes - 资源不附加_path

> ID：11075196
> 
> 赞同：0
> 
> 时间：2012-06-17T22:08:29.453
> 
> 标签：ruby-on-rails-3, routes

我正在尝试使用资源为我的资源自动生成路线。命名空间是 admin，资源是 author。以下代码似乎适用于大多数情况。

```
namespace :admin do
  resources :author
end 
```

当我跑

```
rake routes 
```

我得到以下

```
admin_author_index GET    /admin/author(.:format)          admin/author#index
                   POST   /admin/author(.:format)          admin/author#create
  new_admin_author GET    /admin/author/new(.:format)      admin/author#new
 edit_admin_author GET    /admin/author/:id/edit(.:format) admin/author#edit
      admin_author GET    /admin/author/:id(.:format)      admin/author#show
                   PUT    /admin/author/:id(.:format)      admin/author#update
                   DELETE /admin/author/:id(.:format)      admin/author#destroy 
```

据我所知，我期望命名路径具有

```
_path 
```

在最后。我在这方面很绿色。我已经搜索和搜索，但我可能只是使用错误的术语来找到答案。任何帮助表示赞赏。谢谢！

-edit- 我应该补充一点

```
<%= form_for [:admin, @author] do |f| %>
<%= f.label :first_name %>
<%= f.text_field :first_name %>

<%= f.label :last_name %>
<%= f.text_field :last_name %>
<%= f.submit %>
<% end %> 
```

给我错误说它找不到 admin_author_path

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T22:13:38.447

不，路线名称没有`_path`后缀。

有关详细信息，请参阅[从内到外的 Rails 路由](http://guides.rubyonrails.org/routing.html)。它非常详细地解释了路由。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T22:17:12.133

您可以将 _path 或 _url 附加到这些。基本上一切看起来都不错。

所以例如

```
admin_author_index GET /admin/author(.:format) admin/author#index

```

辅助方法可以是 admin_author_index_path 或 admin_author_index_url。这些助手可以在控制器和视图中使用，以指向控制器/动作或 url。阅读此链接[http://guides.rubyonrails.org/routing.html](http://guides.rubyonrails.org/routing.html)以了解更多信息。

# javascript - 添加谷歌地图标记

> ID：11075197
> 
> 赞同：0
> 
> 时间：2012-06-17T22:09:05.180
> 
> 标签：javascript, google-maps-api-3, google-maps-markers

我正在尝试向我的谷歌地图添加一个标记，但我无法让它出现。

我正在调用一个函数，`createMarkers(x, y)`并从一个 aspx 页面传入两个字符串。

这是 createMarkers 函数：

```
function createMarkers(x, y) {

var latlng = new google.maps.LatLng(x, y);
console.log(latlng);

var marker = new google.maps.Marker({
    position: latlng,
    map: map,
    title: "User location"
}); 

}; 
```

标记不会出现在地图上，并且不会将错误打印到控制台中。

我已将变量记录`latlng`到控制台以进行检查，这就是它显示的内容：

```
O
ab: 51.486091
cb: -0.05983800000001338
__proto__: O 
```

我在[这里查看](https://developers.google.com/maps/documentation/javascript/overlays?hl=nl-NL#Markers)了关于 Markers 的谷歌文档，我得到的代码看起来足够好用。

最后一件事，我还尝试将坐标直接添加到 latlng 变量，而不是使用我的 x 和 y 参数。这也不起作用。

我想我错过了一些非常明显的东西。一如既往的任何帮助将不胜感激！

JA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T23:54:53.500

该功能应该可以工作。

假设地图变量可用并指向地图对象：

向地图添加标记不会将地图的视口设置为包含标记，是否存在标记，但在视口之外？

尝试将其添加到末尾`createMarkers()`：

```
map.setCenter(latlng); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T22:19:04.920

这些是我用来渲染地图和添加标记的函数：

```
function renderMap(mapContainer) {
    var mapOptions = {
            zoom: 4,
            center: new google.maps.LatLng(43.645004, -79.380707),
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };
    window.map = new google.maps.Map(mapContainer, mapOptions);
}

function addMarkerToMap(lat, long, titleText) {
    new google.maps.Marker({
        title: titleText,
        map: map,
        position: new google.maps.LatLng(lat, long)
    });
} 
```

# c# - 如何在 Windows Azure 中部署 WCF

> ID：11075206
> 
> 赞同：1
> 
> 时间：2012-06-17T22:11:16.940
> 
> 标签：c#, wcf, deployment, azure

[这里](https://stackoverflow.com/questions/10685515/host-existing-wcf-service-on-azure) 和[这里](https://stackoverflow.com/questions/11065682/changing-existing-wcf-project-to-azure-project)写的是如何将标准 WCF 服务转换为 Windows Azure。上面写着，右键单击后，您将有一个*“添加 Windows Azure 部署项目”*选项。但是在我的项目中右键单击 WCF 应用程序项目后，我仍然没有在 Visual Studio 中看到它。

这是屏幕截图：

[![截屏](../Images/a1fe3d5a0675f228e10d3340bd7cbb8a.png "点击显示全尺寸版本")](https://i.stack.imgur.com/dKIN8.jpg)

怎么了？如何在 Windows Azure 中部署它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T22:13:20.667

正如我在另一篇文章中告诉你的那样，这通常应该有效。但由于它不建议将您的 WCF 接口、类和配置复制到一个全新的 WCF 服务角色项目。然后，您将能够直接将其发布到 Windows Azure，而不会出现任何问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T22:22:21.270

请查看以下链接[代码快速入门：在 Windows Azure 中创建和部署 WCF 服务](https://azure.microsoft.com/en-us/documentation/articles/cloud-services-how-to-create-deploy/)

# java - 泛型方法 Java

> ID：11075209
> 
> 赞同：2
> 
> 时间：2012-06-17T22:12:05.670
> 
> 标签：java, generics

我需要将此方法与三个不同的类一起使用：订单、客户、供应商

```
public void saveObjectKey(String filename, Long start) {
    Query<Orders> query = datastore.createQuery(Orders.class)
            .field("O_ORDERKEY").greaterThan(start);
    for (Orders orders : query.fetch()) {
        Util.writeFile(orders.getPrimaryKey().toString(), filename);
    }
} 
```

我曾想过一个丑陋的解决方案，一个 if else if 解决方案：

if(instanceof Orders).... else if(instanceof Customers)..... else if(instanceof Suppliers)....

现在我需要一个通用的解决方案，我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T22:47:26.610

这在您的应用程序中是否有意义：

```
public <T> void saveObjectKey(String filename, Long start, Class<T> clazz, String keyName) {
    Query<T> query = datastore.createQuery(clazz).field(keyName).greaterThan(start);
    for (T o : query.fetch()) {
        Util.writeFile(o.getPrimaryKey().toString(), filename);
    }
} 
```

然后你可以像这样使用它：

```
saveObjectKey(filename, start, Customers.class, customersKeyName);
saveObjectKey(filename, start, Suppliers.class, suppliersKeyName);
saveObjectKey(filename, start, Orders.class, ordersKeyName); 
```

# android - 记住 Android 中的全局设置

> ID：11075210
> 
> 赞同：-1
> 
> 时间：2012-06-17T22:12:25.310
> 
> 标签：android, settings, preferences

我正在使用公共静态对象来处理用户设置。第一个视图从 Android 数据库读取设置并创建设置对象。在此之后，我所有的课程都可以使用这些设置。

但是，用户可能会打开另一个视图，然后终止该应用程序。重新打开应用程序时，不会创建第一个视图，并且设置对象将为空。

我想出了一些东西，但对我来说没有一个很优雅。

现在我可以将设置对象传递给所有视图，但这需要重复很多次，如果设置以某种方式改变，这将失败。

每个视图都可以再次加载设置。可能是最好的解决方案，但它会生成许多看似愚蠢的数据库连接和事务。

有一种叫做 SharedPreferences 的东西，似乎正是为了在视图之间共享偏好。但是，它没有在任何地方记录它是否解决了我遇到的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T22:15:13.147

没有记录？您可以在 android 文档中找到一个示例：http: [//developer.android.com/guide/topics/data/data-storage.html#pref](http://developer.android.com/guide/topics/data/data-storage.html#pref)

[在 google](https://www.google.com/search?q=android%20sharedpreferences%20tutorial)上也很容易找到一些教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T22:16:16.953

SharedPreferences 记录[在这里](http://developer.android.com/reference/android/content/SharedPreferences.html)和[这里](http://developer.android.com/guide/topics/data/data-storage.html#pref)。您也可以尝试“懒惰”初始化您的静态对象。将它包装在一个 get-Method 中，该方法检查实例是否为空，如果是，则从数据库中重新填充它。

# scala - 怎么说一个类型参数必须有一个可选超类型的超类型？

> ID：11075213
> 
> 赞同：6
> 
> 时间：2012-06-17T22:13:06.487
> 
> 标签：scala

可以说类型参数 T 必须具有特定的超类型 S_1：

```
class Test[T <: S_1] 
```

有没有办法说一个类型参数必须至少有多个超类型替代的超类型？类似（伪代码）：

```
class Test[T <: S_1 || S_2] 
```

或者：这不可能吗，因为这样的构造没有意义，并且会暗示代码中的设计错误？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-17T22:18:34.143

**简短回答：**直观的解决方案是创建`S_1`并`S_2`共享一个共同特征，该特征代表您对类型参数所需的能力集`T`。使用该特征作为 的上限`T`。

更多可能性：

*   如果`S_1`和`S_2`本质上不相关，并且您对类型的要求`T`是它具有某些成员（两者都`S_1`实现`S_2`），您可以使用[结构类型](http://docs.scala-lang.org/style/types.html#structural_types)来制定它（背后的概念称为[鸭子类型](http://en.wikipedia.org/wiki/Duck_typing)）。

*   如果由于某种原因您确实需要`T`成为`S_1`or的子类`S_2`，并且您无法更改这些类型，则可以使用隐式将这两者都转换为新引入的内部类型`S_1_or_2`，然后您可以将其用作您的上限`T`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T00:49:49.173

让我扩展[Niklas](https://stackoverflow.com/users/916657/niklas-b)的第二种选择。隐式参数可用于*证明*类型的某些内容，所以这似乎就是这样。它会是这样的：

```
class ThingIWantToProve[T]
object ThingIWantToProve {
  // Here I define the proofs I need
  implicit def s1IsProvable: ThingIWantToProve[S_1] = new ThingIWantToProve[S_1]
  implicit def s2IsProvable: ThingIWantToProve[S_2] = new ThingIWantToProve[S_2]
}
class Test[T : ThingIWantToProve] // here I use a context bound 
```

# entity-framework - 实体框架中的更新

> ID：11075214
> 
> 赞同：-3
> 
> 时间：2012-06-17T22:13:11.647
> 
> 标签：entity-framework

我在我的项目中使用 Entity Framework 5，我想更新一条记录。我该怎么做呢？

这是我的基类。

```
using System;  

namespace EF_Sample09.DomainClasses  
{  
    public abstract class BaseEntity  
    {  
        public int Id { get; set; }  

        public DateTime CreatedOn { set; get; }  
        public string CreatedBy { set; get; }  

        public DateTime ModifiedOn { set; get; }  
        public string ModifiedBy { set; get; }  
    }  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T05:08:04.937

从伟大的[ADO.NET 实体框架概述](http://msdn.microsoft.com/en-us/library/aa697427%28v=vs.80%29.aspx)中获取：

```
using(AdventureWorksDB aw = new 
AdventureWorksDB(Settings.Default.AdventureWorks)) {
    // find all people hired at least 5 years ago
    Query<SalesPerson> oldSalesPeople = aw.GetQuery<SalesPerson>(
        "SELECT VALUE sp " +
        "FROM AdventureWorks.AdventureWorksDB.SalesPeople AS sp " +
        "WHERE sp.HireDate < @date",
        new QueryParameter("@date", DateTime.Today.AddYears(-5)));

    foreach(SalesPerson p in oldSalesPeople) {
        // call the HR system through a webservice to see if this
        // sales person has a promotion coming (note that this
        // entity type is XML-serializable)
        if(HRWebService.ReadyForPromotion(p)) {
            p.Bonus += 10; // give a raise of 10% in the bonus
            p.Title = "Senior Sales Representative"; // give a promotion 
        }
    }

    // push changes back to the database
    aw.SaveChanges();
} 
```

你基本上只需要：

*   创建你的`ObjectContext`（或`DbContext`）
*   获取一些记录
*   修改对象
*   调用上下文的`.SaveChanges()`方法将这些更改写回数据库

而已！

# spring-mvc - JsonMappingException：当前令牌不是 START_OBJECT（需要解开根名称“Transaction[]”），而是 START_ARRAY

> ID：11075218
> 
> 赞同：2
> 
> 时间：2012-06-17T22:13:49.543
> 
> 标签：spring-mvc, jackson, chargify

我正在使用 Spring 的[RestTemplate](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/client/RestTemplate.html)来使用[Chargify API](http://docs.chargify.com/api-transactions)，使用 JSON 作为有效负载格式。它一直很顺利，但是当我尝试获取一组对象时，它惨遭失败。例如，考虑以下情况：

```
Transaction[] transactions = restTemplate.getForObject(
        CHARGIFY_ENDPOINT + "/subscriptions/{subscription}/transactions.json",
        Transaction[].class,
        subscriptionId
    ); 
```

实际的 GET 运行良好，JSON 响应为：

```
[ { "transaction" : { "amount_in_cents" : 3006,
    "created_at" : "2012-06-17T16:32:05-04:00",
    "ending_balance_in_cents" : 0,
    "id" : 17283728,
    "kind" : null,
    "memo" : "",
    "payment_id" : null,
    "product_id" : 120387,
    "subscription_id" : 1947292,
    "success" : true,
    "transaction_type" : "payment",
    "type" : "Payment"
      } },
  { "transaction" : { "amount_in_cents" : 5900,
    "created_at" : "2012-06-17T16:32:05-04:00",
    "ending_balance_in_cents" : 3006,
    "id" : 17283727,
    "kind" : "baseline",
    "memo" : "Professional Plan (06/17/2012 - 07/17/2012)",
    "payment_id" : 17283728,
    "product_id" : 120387,
    "subscription_id" : 1947292,
    "success" : true,
    "transaction_type" : "charge",
    "type" : "Charge"
      } },
  { "transaction" : { "amount_in_cents" : -2894,
    "created_at" : "2012-06-17T16:32:03-04:00",
    "ending_balance_in_cents" : -2894,
    "id" : 17283726,
    "kind" : "prorated",
    "memo" : "",
    "payment_id" : null,
    "product_id" : 120387,
    "subscription_id" : 1947292,
    "success" : null,
    "transaction_type" : "adjustment",
    "type" : "Adjustment"
      } },
  { "transaction" : { "amount_in_cents" : 2900,
    "created_at" : "2012-06-17T15:17:07-04:00",
    "ending_balance_in_cents" : 0,
    "id" : 17281084,
    "kind" : null,
    "memo" : "",
    "payment_id" : null,
    "product_id" : 120386,
    "subscription_id" : 1947292,
    "success" : true,
    "transaction_type" : "payment",
    "type" : "Payment"
      } },
  { "transaction" : { "amount_in_cents" : 2900,
    "created_at" : "2012-06-17T15:17:06-04:00",
    "ending_balance_in_cents" : 2900,
    "id" : 17281083,
    "kind" : "baseline",
    "memo" : "Standard Plan (06/17/2012 - 07/17/2012)",
    "payment_id" : 17281084,
    "product_id" : 120386,
    "subscription_id" : 1947292,
    "success" : true,
    "transaction_type" : "charge",
    "type" : "Charge"
      } }
] 
```

但是，当杰克逊尝试反序列化 JSON 时，会导致`JsonMappingException: Current token not START_OBJECT (needed to unwrap root name 'Transaction[]'), but START_ARRAY`：

```
16:59:12.651 [http-8080-1] DEBUG org.springframework.web.client.RestTemplate - GET request for "https://foobar.chargify.com/subscriptions/1947292/transactions.json" resulted in 200 (OK)
16:59:12.651 [http-8080-1] DEBUG org.springframework.web.client.RestTemplate - Reading [[Lcom.foobar.chargify.Transaction;] as "application/json;charset=utf-8" using [org.springframework.http.converter.json.MappingJacksonHttpMessageConverter@1ea8dbd]
16:59:12.662 [http-8080-1] DEBUG org.apache.http.wire - << "[{"transaction":{"type":"Payment","amount_in_cents":3006,"payment_id":null,"memo":"","id":17283728,"created_at":"2012-06-17T16:32:05-04:00","subscription_id":1947292,"kind":null,"ending_balance_in_cents":0,"success":true,"product_id":120387,"transaction_type":"payment"}},{"transaction":{"type":"Charge","amount_in_cents":5900,"payment_id":17283728,"memo":"Professional Plan (06/17/2012 - 07/17/2012)","id":17283727,"created_at":"2012-06-17T16:32:05-04:00","subscription_id":1947292,"kind":"baseline","ending_balance_in_cents":3006,"success":true,"product_id":120387,"transaction_type":"charge"}},{"transaction":{"type":"Adjustment","amount_in_cents":-2894,"payment_id":null,"memo":"","id":17283726,"created_at":"2012-06-17T16:32:03-04:00","subscription_id":1947292,"kind":"prorated","ending_balance_in_cents":-2894,"success":null,"product_id":120387,"transaction_type":"adjustment"}},{"transaction":{"type":"Payment","amount_in_cents":2900,"payment_id":null,"memo":"","id":17281084,"created_at":"2012-06-17T15:17:07-04:00","subscription_id":1947292,"kind":null,"ending_balance_in_cents":0,"success":true,"product_id":120386,"transaction_type":"payment"}},{"transaction":{"type":"Charge","amount_in_cents":2900,"payment_id":17281084,"memo":"Standard Plan (06/17/2012 - 07/17/2012)","id":17281083,"created_at":"2012-06-17T15:17:06-04:00","subscription_id":1947292,"kind":"baseline","ending_balance_in_cents":2900,"success":true,"product_id":120386,"transaction_type":"charge"}}]"
16:59:12.683 [http-8080-1] DEBUG org.apache.http.impl.conn.SingleClientConnManager - Releasing connection org.apache.http.impl.conn.SingleClientConnManager$ConnAdapter@17ed710
16:59:12.684 [http-8080-1] DEBUG org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver - Resolving exception from handler [public void com.foobar.controllers.TestController.viewTransactions(int)]: org.springframework.http.converter.HttpMessageNotReadableException: Could not read JSON: Current token not START_OBJECT (needed to unwrap root name 'Transaction[]'), but START_ARRAY
 at [Source: org.apache.http.conn.EofSensorInputStream@598a5d; line: 1, column: 1]; nested exception is org.codehaus.jackson.map.JsonMappingException: Current token not START_OBJECT (needed to unwrap root name 'Transaction[]'), but START_ARRAY
 at [Source: org.apache.http.conn.EofSensorInputStream@598a5d; line: 1, column: 1]
16:59:12.686 [http-8080-1] DEBUG org.springframework.web.servlet.mvc.annotation.ResponseStatusExceptionResolver - Resolving exception from handler [public void com.foobar.controllers.TestController.viewTransactions(int)]: org.springframework.http.converter.HttpMessageNotReadableException: Could not read JSON: Current token not START_OBJECT (needed to unwrap root name 'Transaction[]'), but START_ARRAY
 at [Source: org.apache.http.conn.EofSensorInputStream@598a5d; line: 1, column: 1]; nested exception is org.codehaus.jackson.map.JsonMappingException: Current token not START_OBJECT (needed to unwrap root name 'Transaction[]'), but START_ARRAY
 at [Source: org.apache.http.conn.EofSensorInputStream@598a5d; line: 1, column: 1]
16:59:12.686 [http-8080-1] DEBUG org.springframework.web.servlet.mvc.support.DefaultHandlerExceptionResolver - Resolving exception from handler [public void com.foobar.controllers.TestController.viewTransactions(int)]: org.springframework.http.converter.HttpMessageNotReadableException: Could not read JSON: Current token not START_OBJECT (needed to unwrap root name 'Transaction[]'), but START_ARRAY
 at [Source: org.apache.http.conn.EofSensorInputStream@598a5d; line: 1, column: 1]; nested exception is org.codehaus.jackson.map.JsonMappingException: Current token not START_OBJECT (needed to unwrap root name 'Transaction[]'), but START_ARRAY
 at [Source: org.apache.http.conn.EofSensorInputStream@598a5d; line: 1, column: 1] 
```

我之前和杰克逊一起遇到过这个问题，经过几天的研究，我最终走上了不同的路线。这一次不是一个选择，我没有找到解决方案的运气。

有任何想法吗？我不在乎我得到一个数组还是一个`List`背部。我也没有运气。

在阅读杰克逊的文档时，我看到了你应该能够在哪里包装列表，即`new TypeReference<List<Transaction>>()`，但我在那里也没有运气。

顺便说一句，由于 Chargify 如何格式化他们的 JSON 响应，我的 RestTemplate 配置了一个自定义[`ObjectMapper`](http://jackson.codehaus.org/1.9.4/javadoc/org/codehaus/jackson/map/ObjectMapper.html)设置这些选项：

```
configure(SerializationConfig.Feature.WRAP_ROOT_VALUE, true);
configure(DeserializationConfig.Feature.UNWRAP_ROOT_VALUE, true); 
```

当我删除这些选项时，没有`JsonMappingException`抛出，但是结果对象的所有字段`Transaction`都是空的。

我也尝试添加此选项，但似乎没有帮助：

```
configure(DeserializationConfig.Feature.USE_JAVA_ARRAY_FOR_JSON_ARRAY, true); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T21:16:20.657

您只需要在 Transaction 之上使用另一种包装类型，还请删除 UNWRAP_ROOT_VALUE 选项。

这些课程将遵循以下原则：

```
public class TransactionHolder {
    private Transaction transaction;
... 
}

public class Transaction {
    private String amount_in_cents;
    private String created_at;
    private int ending_balance_in_cents;
    private int id;
    private String kind;
    private String memo;
    private int payment_id;
    private int product_id;
    private int subscription_id;
    private boolean success;
    private String transaction_type;
    private String type;
...
} 
```

使用您的示例 json，以下内容对我来说很干净：

```
ObjectMapper mapper = new ObjectMapper();
InputStream is = this.getClass().getResourceAsStream("sample.json");
TransactionHolder[] holders = mapper.readValue(is,TransactionHolder[].class); 
```

# r - r - 使用 smooth.spline 进行 dlply

> ID：11075219
> 
> 赞同：1
> 
> 时间：2012-06-17T22:13:50.873
> 
> 标签：r, plyr

当我尝试使用 smooth.spline() 函数时，dlply() 给我一个错误：“找不到对象'...'”。下面的示例创建一些数据并显示“lm”将如何工作，但“smooth.spline”不会。请注意，我在函数参数中做了一些算术运算，但这不是错误的原因。

```
#some data:
df <- data.frame(count=rep(1:5,2),VSS=runif(10,0.45,0.55), 
      TSS=runif(10,0.9,1.3),sl=c(rep("a",5),rep("b",5)))
#works:
dlply(df,.(sl),lm,formula=VSS/TSS~count)
#doesn't work:
dlply(df,.(sl),smooth.spline,x=count,y=VSS/TSS,all.knots=TRUE)
#output:
Error in xy.coords(x,y) : Object 'VSS' not found 
```

有任何想法吗？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T22:30:34.810

呃，太多纠结的评估和环境可能是问题所在。我通常不会与这些事情作斗争，我只是解决它们：

```
foo <- function(x,xvar,yvar,...){
    smooth.spline(x = x[,xvar],y = x[,yvar],...)
}
df$rat <- with(df,VSS/TSS)
dlply(df,.(sl),foo,xvar = "count",yvar = "rat",all.knots = TRUE) 
```

但可能有办法欺骗`dlply`这样做，我不知道。

# java - 如何在此类中测试此方法以查看它是否有效但其中没有主要内容

> ID：11075231
> 
> 赞同：-1
> 
> 时间：2012-06-17T22:16:15.020
> 
> 标签：java, testing, junit

所以这是类下面的链接，它没有主要方法，我正在尝试测试方法 [[1]:][1] 中的每一行是否正在处理，如果没有，它在哪里出错。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T23:17:21.277

您正在寻找的是[JUnit](http://www.junit.org/)，或者更具体地说，是那里[“入门”](http://junit.sourceforge.net/doc/cookbook/cookbook.htm)下的站点。

简而言之，如果您有一个`Dog`具有这样方法的类

```
public boolean isBrown() {
    // some hard & heavy logic
} 
```

您可能想看看它是否有效。为此，您将`test`在应用程序中创建一个包含一些测试类的包，其中一个可以命名`DogTests`并包含以下内容：

```
public class DogTests {
    @Test(expected = NullPointerException.class)
    public void nullDogShouldFailWithNpe() throws Exception {
        new Dog(3, 14, null);
    }

    @Test
    public void brownDogShouldBeBrown() throws Exception {
        Animal animal  = new Dog(3, 14, "brown");
        assertTrue(animal.isBrown());
    }

    @Test
    public void greenDogShouldNotBeBrown() throws Exception {
        Animal animal  = new Dog(3, 14, "green");
        assertTrue(animal.isBrown());
    }
} 
```

[您可以在此处](http://junit.sourceforge.net/javadoc/org/junit/Assert.html)找到有关这些`assert`方法的文档。

你能看到`@Test`方法上面的注释吗？那是一个 JUnit 4 构造，上面写着*“嘿，我是一个测试方法。当从这个类运行测试时，也运行我！”* 这里不需要`main()`方法 - 当您尝试“运行”包含类时，您的 IDE 会注意到*所有*带`@Test`注释的方法本身，运行它们，并向您显示测试结果。

您甚至可以安排多个测试套件，同时运行测试，在构建应用程序时自动运行它们以及所有其他类型的测试魔法......从这个开始，在网站上挖掘，您很快就会发现更多单元测试的优点.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T22:35:19.187

当被测试的方法是非静态的时，你首先构造对象，然后你可以调用这些方法。如果您的 JUnit 测试用例位于与被测试类同名的包中，则您可以访问公共成员和受保护成员。`HashMap`这是针对没有 main 方法的类的示例测试。

```
public void testDuplicateKey() throws Exception {
  HashMap<String,String> map=new HashMap();
  // setup
  map.put("key1", "value1");
  map.put("key2", "value2");
  map.put("key3", "value3");
  assertEquals(3, map.size());
  // overwrite an existing key
  map.put("key2", "value4");
  assertEquals(3, map.size());
  assertEquals("value4", map.get("key2"));
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-17T22:20:26.127

使用 BlueJ。它使您可以在没有任何 Main 方法的情况下使用对象。

只需将 Java 文件导入 IDE 并右键单击您获得的类的类图表示，即可创建它的对象。IDE 非常基本且用户友好，因为它在类和对象的图片表示中发挥了很大作用。

当您拥有一个或多个指定类的对象时，您会在 IDE 底部获得对象，您可以右键单击这些对象进行交互。祝你好运。

# java - Jboss6 - Web 服务客户端身份验证

> ID：11075237
> 
> 赞同：2
> 
> 时间：2012-06-17T22:17:32.117
> 
> 标签：java, security, authentication, jboss, webservice-client

我在 Jboss 6 中遇到了身份验证问题。我正在编写一个基于 SOA 范式的应用程序，并且我已经实现了一些 WebServices，例如：

```
@Stateless
@WebService(
    name="UserService",
    portName = "UserServicePort",
    targetNamespace = "http://agh.edu.pl/soa"
    )
@SOAPBinding(style = Style.RPC, use = Use.LITERAL)
@WebContext(authMethod="BASIC", secureWSDLAccess=false)
@SecurityDomain("gamepolicy")
public class UserServiceBean implements UserService {

    @EJB
    private UserDAO userDao;

    private Logger logger = Logger.getLogger("GameBooker");

    @WebMethod
    @PermitAll()
    public void registerUser(@WebParam(name = "user") User user) {
        userDao.addUser(user);

    }

    @WebMethod
    public void updateUser(@WebParam(name = "id") Long id, @WebParam(name = "user") User user) {
        userDao.updateUser(id, user);
    }

    @WebMethod
    @RolesAllowed({"admin", "manager"})
    @WebResult( name = "FindUserResponse",
    targetNamespace = "http://agh.edu.pl/soa")
    public User findUserById(@WebParam(name = "id") Long id) {
        User user = userDao.findUser(id);
        return user;
    }

} 
```

我启动了应用程序服务器并为该 Web 服务获取了 wsdl，我在 Eclipse 中使用 JBossWS 在其上生成了 Web 服务客户端。代码生成成功，这是我的客户端示例：

```
package pl.edu.agh.user.clientsample;

import javax.xml.ws.BindingProvider;

import pl.edu.agh.user.*;

public class ClientSample {

    public static void main(String[] args) {
            System.out.println("***********************");
            System.out.println("Create Web Service Client...");
            UserServiceBeanService service1 = new UserServiceBeanService();
            System.out.println("Create Web Service...");
            UserService port1 = service1.getUserServicePort();
            BindingProvider bp = (BindingProvider)port1;
//          bp.getRequestContext().put(BindingProvider.USERNAME_PROPERTY, "kermit");
//          bp.getRequestContext().put(BindingProvider.PASSWORD_PROPERTY, "ebe97bf6e9c26d55a483f19af51b1085");
            System.out.println("Call Web Service Operation...");
            User user = new User();
            user.setEmail("u@y.pl");
            user.setLogin("y");
            user.setName("michal");
            user.setSurname("kowalski");
            user.setPassword("ddd");
            user.setPhone("555");
            port1.registerUser(user);
            System.out.println("Call Over!");
    }
} 
```

这是我的问题——当我取消对绑定提供者的注释时——我的网络服务开始工作。所有方法（使用 @PermitAll 和 @RolesAllowed 的方法）都可以正常工作（如果我通过 BindingProvider 传递正确的数据）。但是，当我评论这些行并尝试仅运行具有 @PermitAll 注释的 registerUser 方法时，出现错误（客户端控制台：

```
***********************
Create Web Service Client...
log4j:WARN No appenders could be found for logger (org.apache.cxf.common.logging.LogUtils).
log4j:WARN Please initialize the log4j system properly.
log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.
Create Web Service...
Call Web Service Operation...
Exception in thread "main" javax.xml.ws.soap.SOAPFaultException: Can't find input stream in message
    at org.apache.cxf.jaxws.JaxWsClientProxy.invoke(JaxWsClientProxy.java:146)
    at $Proxy26.registerUser(Unknown Source)
    at pl.edu.agh.user.clientsample.ClientSample.main(ClientSample.java:28)
Caused by: java.lang.RuntimeException: Can't find input stream in message
    at org.apache.cxf.binding.soap.interceptor.ReadHeadersInterceptor.handleMessage(ReadHeadersInterceptor.java:116)
    at org.apache.cxf.binding.soap.interceptor.ReadHeadersInterceptor.handleMessage(ReadHeadersInterceptor.java:60)
    at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:255)
    at org.apache.cxf.endpoint.ClientImpl.onMessage(ClientImpl.java:755)
    at org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.handleResponseInternal(HTTPConduit.java:2330)
    at org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.handleResponse(HTTPConduit.java:2192)
    at org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.close(HTTPConduit.java:2036)
    at org.apache.cxf.transport.AbstractConduit.close(AbstractConduit.java:56)
    at org.apache.cxf.transport.http.HTTPConduit.close(HTTPConduit.java:696)
    at org.apache.cxf.interceptor.MessageSenderInterceptor$MessageSenderEndingInterceptor.handleMessage(MessageSenderInterceptor.java:62)
    at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:255)
    at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:516)
    at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:313)
    at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:265)
    at org.apache.cxf.frontend.ClientProxy.invokeSync(ClientProxy.java:73)
    at org.apache.cxf.jaxws.JaxWsClientProxy.invoke(JaxWsClientProxy.java:124)
    ... 2 more 
```

和 Jboss 服务器控制台：

```
23:08:02,371 TRACE [org.jboss.security.SecurityRolesAssociation] Setting threadlocal:null
23:08:02,371 TRACE [org.jboss.web.tomcat.security.JaccContextValve] MetaData:org.jboss.metadata.web.jboss.JBossWebMetaData@1f:principalToRoleSetMapnull
23:08:02,371 DEBUG [org.apache.catalina.authenticator.AuthenticatorBase] Security checking request GET /ReservationBeans/UserService
23:08:02,371 DEBUG [org.apache.catalina.realm.RealmBase]   Checking constraint 'SecurityConstraint[UserServiceBean]' against GET /UserService --> false
23:08:02,372 DEBUG [org.apache.catalina.realm.RealmBase]   Checking constraint 'SecurityConstraint[GameServiceBean]' against GET /UserService --> false
23:08:02,372 DEBUG [org.apache.catalina.authenticator.AuthenticatorBase]  Not subject to any constraint
23:08:02,372 TRACE [org.jboss.web.tomcat.security.SecurityAssociationValve] Begin invoke, caller=null
23:08:02,372 TRACE [org.jboss.web.tomcat.security.RunAsListener] UserServiceBean, runAs: null
23:08:02,372 TRACE [org.jboss.web.tomcat.security.RunAsListener] UserServiceBean, runAs: null
23:08:02,375 TRACE [org.jboss.web.tomcat.security.RunAsListener] UserServiceBean, runAs: null
23:08:02,376 TRACE [org.jboss.web.tomcat.security.RunAsListener] UserServiceBean, runAs: null
23:08:02,376 TRACE [org.jboss.web.tomcat.security.SecurityAssociationValve] End invoke, caller=null
23:08:02,376 TRACE [org.jboss.security.SecurityRolesAssociation] Setting threadlocal:null
23:08:02,793 TRACE [org.jboss.security.SecurityRolesAssociation] Setting threadlocal:null
23:08:02,793 TRACE [org.jboss.web.tomcat.security.JaccContextValve] MetaData:org.jboss.metadata.web.jboss.JBossWebMetaData@1f:principalToRoleSetMapnull
23:08:02,793 DEBUG [org.apache.catalina.authenticator.AuthenticatorBase] Security checking request POST /ReservationBeans/UserService
23:08:02,793 DEBUG [org.apache.catalina.realm.RealmBase]   Checking constraint 'SecurityConstraint[UserServiceBean]' against POST /UserService --> true
23:08:02,793 DEBUG [org.apache.catalina.realm.RealmBase]   Checking constraint 'SecurityConstraint[GameServiceBean]' against POST /UserService --> false
23:08:02,793 DEBUG [org.apache.catalina.authenticator.AuthenticatorBase]  Calling hasUserDataPermission()
23:08:02,793 DEBUG [org.apache.catalina.realm.RealmBase]   User data constraint has no restrictions
23:08:02,794 TRACE [org.jboss.security.plugins.authorization.JBossAuthorizationContext] Control flag for entry:org.jboss.security.authorization.config.AuthorizationModuleEntry{org.jboss.security.authorization.modules.DelegatingAuthorizationModule:{}REQUIRED}is:[REQUIRED]
23:08:02,794 DEBUG [org.apache.catalina.authenticator.AuthenticatorBase]  Calling authenticate()
23:08:02,794 DEBUG [org.apache.catalina.authenticator.AuthenticatorBase]  Failed authenticate() test
23:08:02,794 TRACE [org.jboss.security.SecurityRolesAssociation] Setting threadlocal:null 
```

我认为 jboss 中的 login-config.xml 文件配置正确：

```
 <application-policy name="gamepolicy">
    <authentication>
      <login-module code="org.jboss.security.auth.spi.DatabaseServerLoginModule"
        flag="required">
            <module-option name="dsJndiName">java:/MySQLGameBookerDS</module-option>
            <module-option name="principalsQuery">
            select password from users where login=?
            </module-option>
            <module-option name="rolesQuery">
            select userType,'Roles' from roles join user_roles on id=role_id join users u on u.id=user_id where login=?
            </module-option>
            <module-option name="hashAlgorithm">MD5</module-option>
            <module-option name="hashEncoding">base64</module-option>
            <module-option name="hashCharset">UTF-8</module-option>
            <module-option name="debug">true</module-option>
            <module-option name="unauthenticatedIdentity">anonymous</module-option>
      </login-module>
    </authentication>
  </application-policy> 
```

为什么即使使用@PermitAll，并将 unauthenticatedIdentity 指定为匿名，我也无法运行我的 web 方法？当我通过绑定传递正确的数据时，方法可以完美运行。我做了一个测试并使用未注释的绑定运行它，但是作为参数我传递了空字符串，客户端控制台上的结果是相同的错误，但在服务器控制台上它显示：

```
00:14:01,586 TRACE [org.jboss.security.SecurityRolesAssociation] Setting threadlocal:null
00:14:01,586 TRACE [org.jboss.web.tomcat.security.JaccContextValve] MetaData:org.jboss.metadata.web.jboss.JBossWebMetaData@1f:principalToRoleSetMapnull
00:14:01,586 DEBUG [org.apache.catalina.authenticator.AuthenticatorBase] Security checking request GET /ReservationBeans/UserService
00:14:01,586 DEBUG [org.apache.catalina.realm.RealmBase]   Checking constraint 'SecurityConstraint[UserServiceBean]' against GET /UserService --> false
00:14:01,586 DEBUG [org.apache.catalina.realm.RealmBase]   Checking constraint 'SecurityConstraint[GameServiceBean]' against GET /UserService --> false
00:14:01,587 DEBUG [org.apache.catalina.authenticator.AuthenticatorBase]  Not subject to any constraint
00:14:01,587 TRACE [org.jboss.web.tomcat.security.SecurityAssociationValve] Begin invoke, caller=null
00:14:01,587 TRACE [org.jboss.web.tomcat.security.RunAsListener] UserServiceBean, runAs: null
00:14:01,587 TRACE [org.jboss.web.tomcat.security.RunAsListener] UserServiceBean, runAs: null
00:14:01,591 TRACE [org.jboss.web.tomcat.security.RunAsListener] UserServiceBean, runAs: null
00:14:01,591 TRACE [org.jboss.web.tomcat.security.RunAsListener] UserServiceBean, runAs: null
00:14:01,591 TRACE [org.jboss.web.tomcat.security.SecurityAssociationValve] End invoke, caller=null
00:14:01,591 TRACE [org.jboss.security.SecurityRolesAssociation] Setting threadlocal:null
00:14:02,029 TRACE [org.jboss.security.SecurityRolesAssociation] Setting threadlocal:null
00:14:02,029 TRACE [org.jboss.web.tomcat.security.JaccContextValve] MetaData:org.jboss.metadata.web.jboss.JBossWebMetaData@1f:principalToRoleSetMapnull
00:14:02,029 DEBUG [org.apache.catalina.authenticator.AuthenticatorBase] Security checking request POST /ReservationBeans/UserService
00:14:02,029 DEBUG [org.apache.catalina.realm.RealmBase]   Checking constraint 'SecurityConstraint[UserServiceBean]' against POST /UserService --> true
00:14:02,029 DEBUG [org.apache.catalina.realm.RealmBase]   Checking constraint 'SecurityConstraint[GameServiceBean]' against POST /UserService --> false
00:14:02,029 DEBUG [org.apache.catalina.authenticator.AuthenticatorBase]  Calling hasUserDataPermission()
00:14:02,029 DEBUG [org.apache.catalina.realm.RealmBase]   User data constraint has no restrictions
00:14:02,029 TRACE [org.jboss.security.plugins.authorization.JBossAuthorizationContext] Control flag for entry:org.jboss.security.authorization.config.AuthorizationModuleEntry{org.jboss.security.authorization.modules.DelegatingAuthorizationModule:{}REQUIRED}is:[REQUIRED]
00:14:02,029 DEBUG [org.apache.catalina.authenticator.AuthenticatorBase]  Calling authenticate()
00:14:02,030 TRACE [org.jboss.security.plugins.auth.JaasSecurityManagerBase.gamepolicy] Begin isValid, principal:, cache info: null
00:14:02,030 TRACE [org.jboss.security.plugins.auth.JaasSecurityManagerBase.gamepolicy] defaultLogin, principal=
00:14:02,030 TRACE [org.jboss.security.auth.login.XMLLoginConfigImpl] Begin getAppConfigurationEntry(gamepolicy), size=12
00:14:02,030 TRACE [org.jboss.security.auth.login.XMLLoginConfigImpl] End getAppConfigurationEntry(gamepolicy), authInfo=AppConfigurationEntry[]:
[0]
LoginModule Class: org.jboss.security.auth.spi.DatabaseServerLoginModule
ControlFlag: LoginModuleControlFlag: required
Options:
name=hashCharset, value=UTF-8
name=hashAlgorithm, value=MD5
name=principalsQuery, value=select password from users where login=?
name=unauthenticatedIdentity, value=anonymous
name=hashEncoding, value=base64
name=debug, value=true
name=dsJndiName, value=java:/MySQLGameBookerDS
name=rolesQuery, value=select userType,'Roles' from roles join user_roles on id=role_id join users u on u.id=user_id where login=?

00:14:02,030 TRACE [org.jboss.security.auth.spi.DatabaseServerLoginModule] initialize
00:14:02,030 TRACE [org.jboss.security.auth.spi.DatabaseServerLoginModule] Security domain: gamepolicy
00:14:02,030 TRACE [org.jboss.security.auth.spi.DatabaseServerLoginModule] Saw unauthenticatedIdentity=anonymous
00:14:02,030 TRACE [org.jboss.security.auth.spi.DatabaseServerLoginModule] Password hashing activated: algorithm = MD5, encoding = base64, charset = UTF-8, callback = null, storeCallback = null
00:14:02,030 TRACE [org.jboss.security.auth.spi.DatabaseServerLoginModule] DatabaseServerLoginModule, dsJndiName=java:/MySQLGameBookerDS
00:14:02,030 TRACE [org.jboss.security.auth.spi.DatabaseServerLoginModule] principalsQuery=select password from users where login=?
00:14:02,030 TRACE [org.jboss.security.auth.spi.DatabaseServerLoginModule] rolesQuery=select userType,'Roles' from roles join user_roles on id=role_id join users u on u.id=user_id where login=?
00:14:02,030 TRACE [org.jboss.security.auth.spi.DatabaseServerLoginModule] suspendResume=true
00:14:02,031 TRACE [org.jboss.security.auth.spi.DatabaseServerLoginModule] login
00:14:02,031 TRACE [org.jboss.security.auth.spi.DatabaseServerLoginModule] suspendAnyTransaction
00:14:03,557 TRACE [org.jboss.security.auth.spi.DatabaseServerLoginModule] Excuting query: select password from users where login=?, with username: 
00:14:03,686 TRACE [org.jboss.security.auth.spi.DatabaseServerLoginModule] Query returned no matches from db
00:14:03,687 TRACE [org.jboss.security.auth.spi.DatabaseServerLoginModule] resumeAnyTransaction
00:14:03,687 TRACE [org.jboss.security.auth.spi.DatabaseServerLoginModule] abort
00:14:03,687 TRACE [org.jboss.security.plugins.auth.JaasSecurityManagerBase.gamepolicy] Login failure: javax.security.auth.login.FailedLoginException: No matching username found in Principals
    at org.jboss.security.auth.spi.DatabaseServerLoginModule.getUsersPassword(DatabaseServerLoginModule.java:184) [:3.0.0.CR2]
    at org.jboss.security.auth.spi.UsernamePasswordLoginModule.login(UsernamePasswordLoginModule.java:245) [:3.0.0.CR2]
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [:1.6.0_32]
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) [:1.6.0_32]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) [:1.6.0_32]
    at java.lang.reflect.Method.invoke(Unknown Source) [:1.6.0_32]
    at javax.security.auth.login.LoginContext.invoke(Unknown Source) [:1.6.0_32]
    at javax.security.auth.login.LoginContext.access$000(Unknown Source) [:1.6.0_32]
    at javax.security.auth.login.LoginContext$4.run(Unknown Source) [:1.6.0_32]
    at java.security.AccessController.doPrivileged(Native Method) [:1.6.0_32]
    at javax.security.auth.login.LoginContext.invokePriv(Unknown Source) [:1.6.0_32]
    at javax.security.auth.login.LoginContext.login(Unknown Source) [:1.6.0_32]
    at org.jboss.security.plugins.auth.JaasSecurityManagerBase.defaultLogin(JaasSecurityManagerBase.java:553) [:3.0.0.CR2]
    at org.jboss.security.plugins.auth.JaasSecurityManagerBase.authenticate(JaasSecurityManagerBase.java:487) [:3.0.0.CR2]
    at org.jboss.security.plugins.auth.JaasSecurityManagerBase.isValid(JaasSecurityManagerBase.java:365) [:3.0.0.CR2]
    at org.jboss.security.plugins.JaasSecurityManager.isValid(JaasSecurityManager.java:160) [:6.1.0.Final]
    at org.jboss.web.tomcat.security.JBossWebRealm.authenticate(JBossWebRealm.java:399) [:6.1.0.Final]
    at org.apache.catalina.authenticator.BasicAuthenticator.authenticate(BasicAuthenticator.java:180) [:6.1.0.Final]
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:559) [:6.1.0.Final]
    at org.jboss.modcluster.catalina.CatalinaContext$RequestListenerValve.event(CatalinaContext.java:285) [:1.1.0.Final]
    at org.jboss.modcluster.catalina.CatalinaContext$RequestListenerValve.invoke(CatalinaContext.java:261) [:1.1.0.Final]
    at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:88) [:6.1.0.Final]
    at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.invoke(SecurityContextEstablishmentValve.java:100) [:6.1.0.Final]
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:159) [:6.1.0.Final]
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [:6.1.0.Final]
    at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:158) [:6.1.0.Final]
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:567) [:6.1.0.Final]
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [:6.1.0.Final]
    at org.jboss.web.tomcat.service.request.ActiveRequestResponseCacheValve.invoke(ActiveRequestResponseCacheValve.java:53) [:6.1.0.Final]
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:362) [:6.1.0.Final]
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [:6.1.0.Final]
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:654) [:6.1.0.Final]
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:951) [:6.1.0.Final]
    at java.lang.Thread.run(Unknown Source) [:1.6.0_32]

00:14:03,688 TRACE [org.jboss.security.plugins.auth.JaasSecurityManagerBase.gamepolicy] End isValid, false
00:14:03,688 DEBUG [org.apache.catalina.authenticator.AuthenticatorBase]  Failed authenticate() test
00:14:03,688 TRACE [org.jboss.security.SecurityRolesAssociation] Setting threadlocal:null 
```

你能告诉我我做错了什么吗？

# javascript - 使用 javascript 和 jquery 获取网页中选定文本的上下文

> ID：11075242
> 
> 赞同：0
> 
> 时间：2012-06-17T22:18:38.577
> 
> 标签：javascript, jquery, html, jquery-ui

我想获取网页中选定文本的上下文，这意味着我想获取周围的 25 个单词（之前和之后）我使用 javascript 和 jquery 使用以下代码获取的选定文本，但它不起作用我的代码是：

```
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
        <title>jQuery UI Example Page</title>
        <link type="text/css" href="css/ui-lightness/jquery-ui-1.8.18.custom.css" rel="stylesheet" />   
        <script type="text/javascript" src="js/jquery-1.7.1.min.js"></script>
        <script type="text/javascript" src="js/jquery-ui-1.8.18.custom.min.js"></script>

        <style type="text/css">
            /*demo page css*/
            body{ font: 62.5% "Trebuchet MS", sans-serif; margin: 50px;}
            .demoHeaders { margin-top: 2em; }
            #dialog_link {padding: .4em 1em .4em 20px;text-decoration: none;position: relative;}
            #dialog_link span.ui-icon {margin: 0 5px 0 0;position: absolute;left: .2em;top: 50%;margin-top: -8px;}
            ul#icons {margin: 0; padding: 0;}
            ul#icons li {margin: 2px; position: relative; padding: 4px 0; cursor: pointer; float: left;  list-style: none;}
            ul#icons span.ui-icon {float: left; margin: 0 4px;}
        </style>    

        <script type="text/javascript">

            $(document).ready(function() {
                $("body :not(:button, img, script, img)").mouseup(function(e) {
                    var allText = $(this).text();
                    //alert("All existing text = "+allText);            
                    document.getElementById("allText").innerHTML = allText;

                    var selText = window.getSelection();

                    var selectedRange = selText.rangeCount ? selText.getRangeAt(0) : null;    

                    var pinPoint = selectedRange.startOffset;

                    //alert("Index of selected word = "+pinPoint);
                    document.getElementById("index").innerHTML = pinPoint;
                    document.getElementById("selectedText").innerHTML = selText;

                    var textBefore = "";
                    var textAfter = "";
                    var spacesCounter = 0;
                    var startIndex = pinPoint;
                    while(spacesCounter < 25 && startIndex >= 0)
                    {
                        startIndex--;
                        if(allText.charAt(startIndex) == " ")
                        {                
                            //if char = space
                            spacesCounter++;                
                        }
                        textBefore = allText.charAt(startIndex)+ "" + textBefore;
                    }
                    //alert("Text before: "+textBefore);
                    document.getElementById("beforeText").innerHTML = textBefore;
                    //Get text after
                    spacesCounter = 0;
                    startIndex = pinPoint + selText.toString().length;
                    while(spacesCounter < 25 && startIndex < allText.length)
                    {
                        startIndex++;
                        if(allText.charAt(startIndex) == " ")
                        {
                            //if char = space
                            spacesCounter++;
                        }
                        textAfter = textAfter + allText.charAt(startIndex);
                    }
                    //alert("Text after: "+textAfter);
                    document.getElementById("afterText").innerHTML = textAfter;
                });
            });
        </script>
    </head>
    <body>
        <h1>Helpera</h1>

        <!-- ui-dialog -->
        <h1>Index of selection</h1>
        <p id="index"></p>
        <h1>All text</h1>
        <p id="allText"></p>
        <h1>Selected text</h1>
        <p id="selectedText"></p>
        <h1>Text before</h1>
        <p id="beforeText"></p>
        <h1>Text after</h1>
        <p id="afterText"></p>

        <div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="dablink">For the histograms used in digital image processing, see <a href="/wiki/Image_histogram" title="Image histogram">Image histogram</a> and <a href="/wiki/Color_histogram" title="Color histogram">Color histogram</a>.</div>
            <table class="infobox" cellspacing="5" style="width:22em;">
                <tr>
                    <th colspan="2" class="" style="text-align:center; font-size:125%; font-weight:bold; background:LightPink;">Histogram</th>
                </tr>
                <tr class="">
                    <td colspan="2" class="" style="text-align:center;"><a href="/wiki/File:Histogram_of_arrivals_per_minute.svg" class="image"><img alt="Histogram of arrivals per minute.svg" src="//upload.wikimedia.org/wikipedia/commons/thumb/c/c3/Histogram_of_arrivals_per_minute.svg/250px-Histogram_of_arrivals_per_minute.svg.png" width="250" height="212" /></a></td>
                </tr>
                <tr>
                    <th colspan="2" class="" style="text-align:center; background:LightPink;font-size:110%;">One of the <b><a href="/wiki/Seven_Basic_Tools_of_Quality" title="Seven Basic Tools of Quality">Seven Basic Tools of Quality</a></b></th>
                </tr>
                <tr class="">
                    <th scope="row" style="text-align:left;">First described by</th>
                    <td class="" style=""><a href="/wiki/Karl_Pearson" title="Karl Pearson">Karl Pearson</a></td>
                </tr>
                <tr class="">
                    <th scope="row" style="text-align:left;">Purpose</th>
                    <td class="" style="">To roughly assess the <a href="/wiki/Probability_distribution" title="Probability distribution">probability distribution</a> of a given variable by depicting the frequencies of observations occurring in certain ranges of values</td>
                </tr>
            </table>
            <p>In <a href="/wiki/Statistics" title="Statistics">statistics</a>, a <b>histogram</b> is a graphical representation showing a visual impression of the distribution of data. It is an estimate of the <a href="/wiki/Probability_distribution" title="Probability distribution">probability distribution</a> of a continuous variable and was first introduced by <a href="/wiki/Karl_Pearson" title="Karl Pearson">Karl Pearson</a>.<sup id="cite_ref-pearson_0-0" class="reference"><a href="#cite_note-pearson-0"><span>[</span>1<span>]</span></a></sup> A histogram consists of tabular <a href="/wiki/Frequency_(statistics)" title="Frequency (statistics)">frequencies</a>, shown as adjacent <a href="/wiki/Rectangle" title="Rectangle">rectangles</a>, erected over discrete intervals (bins), with an area equal to the frequency of the observations in the interval. The height of a rectangle is also equal to the frequency density of the interval, i.e., the frequency divided by the width of the interval. The total area of the histogram is equal to the number of data. A histogram may also be <a href="/wiki/Normalization_(statistics)" title="Normalization (statistics)">normalized</a> displaying relative frequencies. It then shows the proportion of cases that fall into each of several <a href="/wiki/Categorization" title="Categorization">categories</a>, with the total area equaling 1\. The categories are usually specified as consecutive, non-overlapping <a href="/wiki/Interval_(mathematics)" title="Interval (mathematics)">intervals</a> of a variable. The categories (intervals) must be adjacent, and often are chosen to be of the same size.<sup id="cite_ref-1" class="reference"><a href="#cite_note-1"><span>[</span>2<span>]</span></a></sup> The rectangles of a histogram are drawn so that they touch each other to indicate that the original variable is continuous. <sup id="cite_ref-2" class="reference"><a href="#cite_note-2"><span>[</span>3<span>]</span></a></sup></p>
            <p>Histograms are used to plot density of data, and often for <a href="/wiki/Density_estimation" title="Density estimation">density estimation</a>: estimating the <a href="/wiki/Probability_density_function" title="Probability density function">probability density function</a> of the underlying variable. The total area of a histogram used for probability density is always normalized to 1\. If the length of the intervals on the <i>x</i>-axis are all 1, then a histogram is identical to a <a href="/wiki/Relative_frequency" title="Relative frequency" class="mw-redirect">relative frequency</a> plot.</p>
            <p>An alternative to the histogram is <a href="/wiki/Kernel_density_estimation" title="Kernel density estimation">kernel density estimation</a>, which uses a <a href="/wiki/Kernel_(statistics)" title="Kernel (statistics)">kernel</a> to smooth samples. This will construct a <a href="/wiki/Smooth_function" title="Smooth function">smooth</a> probability density function, which will in general more accurately reflect the underlying variable.</p>
            <p>The histogram is one of the <a href="/wiki/Seven_Basic_Tools_of_Quality" title="Seven Basic Tools of Quality">seven basic tools</a> of <a href="/wiki/Quality_control" title="Quality control">quality control</a>.<sup id="cite_ref-3" class="reference"><a href="#cite_note-3"><span>[</span>4<span>]</span></a></sup></p>
            <table id="toc" class="toc">
                <tr>
                    <td>
                        <div id="toctitle">
                            <h2>Contents</h2>
                        </div>
                        <ul>
                            <li class="toclevel-1 tocsection-1"><a href="#Etymology"><span class="tocnumber">1</span> <span class="toctext">Etymology</span></a></li>
                            <li class="toclevel-1 tocsection-2"><a href="#Examples"><span class="tocnumber">2</span> <span class="toctext">Examples</span></a>
                                <ul>
                                    <li class="toclevel-2 tocsection-3"><a href="#Shape_or_form_of_a_distribution"><span class="tocnumber">2.1</span> <span class="toctext">Shape or form of a distribution</span></a></li>
                                </ul>
                            </li>
                            <li class="toclevel-1 tocsection-4"><a href="#Activities_and_demonstrations"><span class="tocnumber">3</span> <span class="toctext">Activities and demonstrations</span></a></li>
                            <li class="toclevel-1 tocsection-5"><a href="#Mathematical_definition"><span class="tocnumber">4</span> <span class="toctext">Mathematical definition</span></a>
                                <ul>
                                    <li class="toclevel-2 tocsection-6"><a href="#Cumulative_histogram"><span class="tocnumber">4.1</span> <span class="toctext">Cumulative histogram</span></a></li>
                                    <li class="toclevel-2 tocsection-7"><a href="#Number_of_bins_and_width"><span class="tocnumber">4.2</span> <span class="toctext">Number of bins and width</span></a></li>
                                </ul>
                            </li>
                        </ul>
                    </td></tr></table></div>
        <br /><br />

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T23:50:17.563

您可以使用我的[Rangy 库](https://code.google.com/p/rangy/)的新[TextRange 模块](http://rangy.googlecode.com/svn/trunk/demos/textrange.html)来做到这一点。Rangy 的 Range 对象具有允许您在任一方向一次扩展一个单词的范围的方法。`moveStart()``moveEnd()`

这是一个例子。现场演示：http: [//jsfiddle.net/timdown/3p5tH/](http://jsfiddle.net/timdown/3p5tH/)

代码：

```
$(document).ready(function() {
    $("body :not(:button, img, script, img)").mouseup(function(e) {
        var sel = rangy.getSelection();
        if (sel.rangeCount > 0) {
            var range = sel.getRangeAt(0);

            // Expand the range to contain the whole word
            range.expand("word");

            // Get the 25 words preceding the selection
            var wordRange = range.cloneRange();
            wordRange.collapse(true);
            wordRange.moveStart("word", -25);
            document.getElementById("beforeText").innerHTML = wordRange.text();

            // Get the 25 words following the selection
            wordRange.collapseToPoint(range.endContainer, range.endOffset);
            wordRange.moveEnd("word", 25);
            document.getElementById("afterText").innerHTML = wordRange.text();
            wordRange.detach();
        }
    }
}); 
```

# ruby-on-rails - 在表单标签中包含链接？

> ID：11075243
> 
> 赞同：15
> 
> 时间：2012-06-17T22:18:48.857
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我希望在表单标签中包含一个链接，如下所示：

```
<%= form.check_box 'eula' %>
<%= form.label 'eula', "I agree to the <a href='#' id='eula-link'>EULA</a>", class: 'label-checkbox' %> 
```

Rails 可能会写出 HTML，但我该如何完成呢？单击 EULA 会打开一个 JS 弹出窗口。我正在考虑以某种方式在其中嵌入一个link_to？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-08-13T19:51:30.763

使用`html_safe`with parens 将呈现 html，如下所示：

```
<%= f.input :eula, :as => :boolean, label: ("I agree to the #{link_to 'Terms of Service', terms_path}.").html_safe %> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-14T08:33:58.043

假设您正在使用 vanilla rails form helpers，您可以这样做：

```
f.label :eula do
    'I agree to the #{link_to("EULA", "#")}'
end 
```

来源：[http ://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-label](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-label)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-25T12:07:14.283

尝试了 19 种方法，超链接被编码或 html_safe 替换 url 中的连字符？？？

这对我有用

```
<%= f.label :cookies do
      "Do you agree to our #{link_to('Cookies Policy', 'http://www.your-­url.co.uk/privacypolicy')}".html_safe
end %> 
```

" 和 ' 的具体使用似乎很重要。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-05-13T15:59:24.923

jenson-button-event 的答案*几乎*对我有用，但需要更改接近加载的括号位置而不会出现错误。

对我来说，下面解决了它。请注意此处“Cookies Policy”之后的右括号，而不是链接路径本身之后。

```
<%= f.label :cookies do
      "Do you agree to our #{link_to('Cookies Policy'), 'http://www.your-­ url.co.uk/privacypolicy'}".html_safe
end %> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-17T23:02:06.590

尝试“我同意 #{link_to 'EULA', #, :id => 'eula-link'}”

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-10-14T19:19:42.767

我想要一种简单的方法来在表单字段标签之后添加一个很棒的字体帮助链接按钮，这是我在我的 haml 文件中使用的：

```
 = form_for [@preplan, @structure] do |f|
      = f.label :template do
        Template
        = link_to 'https://intercom.help/blazemark/preplans-and-structures/structure-templates', target: '_blank' do
          = fa_icon 'fw info-circle' 
```

[![在此处输入图像描述](../Images/7ea8664b7995b3080a46d1b1a2b3eec9.png)](https://i.stack.imgur.com/zL9uw.png)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-01-07T06:04:31.783

从 rails 6.0.2.1（2020 年 1 月）开始，这对我有用：

```
<div class="form-group form-check">
  <%= form.check_box :accept_terms, class: "form-check-input", required: true %>
  <%= form.label :accept_terms, class: "form-check-label" do %>
    <span>
      Accept <%= link_to 'Terms and Conditions', 'https://your.url.here.com' %>
    </span>
  <% end %>
</div> 
```

# javascript - 我想在我的网站页面中包含的 javascript 库/插件是否有经验法则大小限制？

> ID：11075249
> 
> 赞同：0
> 
> 时间：2012-06-17T22:19:10.807
> 
> 标签：javascript

我的页面经常包含 jquery 库，大约 75kb 左右。最近，我正在研究是否需要添加更多我在网上找到的 javascript 库/插件，我正在考虑再添加 25kb。这样做时，我会担心添加尺寸会增加我网站的加载时间。是否有我应该考虑的“经验法则”上限，这样我就不会再添加任何不需要的加载时间了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T22:21:27.077

我的规则一直是，**只使用你需要**的东西。

如果您可以在没有任何东西的情况下实现应用程序的目标，请不要使用它。如果一个重要的特性集依赖于一个繁重的库，请使用它。

当然，无论如何，请始终确保您的 JS 文件是由您的服务器压缩的 gzip（或等效文件），并使用压缩文件。

最后，重要的是要牢记您的听众。对分析的良好使用将揭示您的用户是否容忍您的页面加载时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T22:22:12.270

除了保持它尽可能小并且不要链接到您不打算使用的库之外，我没有建议任何一般规则。

如果您使用的是通用库，请从通用第三方链接您的库，例如[Google Libraries API](https://developers.google.com/speed/libraries/)。您的许多最终用户可能已经在他们的浏览器中缓存了您从那里链接的库版本，从而缩短了加载时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T22:22:21.617

大小没有限制（如果你愿意，你可以拥有 1GB），但通常我会尽可能地保持它的小。

一些优化脚本的技巧：

*   **缩小**- 这意味着缩短变量名称、删除空格等。Dean Edwards 的[/packer/](http://dean.edwards.name/packer/)就是一个例子。我也建议使用 Google Closure Compiler，但我会将其保留用于后期制作阶段，因为它会改变代码结构。

*   **合并**- 编译您的脚本，以便它们至少只包含一个文件。这可以为您节省大量的 HTTP 请求。

*   **使用你只需要**的——例如，如果你只需要 jQuery 的几个部分，他们可以[选择推出你自己的 jQuery](https://github.com/jquery/jquery)（在文档中的某个地方）。另一个示例是 jQueryUI，您可以在其中选择加载选定的 UI 功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-17T22:22:54.173

我不太确定“经验法则”，但您当然应该问自己以下问题：

*   你的脚本被[缩小](http://en.wikipedia.org/wiki/Minification_%28programming%29)了吗？
*   外部脚本是否在外部链接？
*   这些可以从[CDN](http://en.wikipedia.org/wiki/Content_delivery_network)链接吗？

例如，您最好让[其他人托管像 jQuery 这样的库](http://encosia.com/3-reasons-why-you-should-let-google-host-jquery-for-you/)，因为这让您自己的服务器只处理为您的内容提供服务。

但最重要的是只包括您网站功能所需**的绝对最低限度。**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-17T22:25:41.940

由于我们不知道您的库提供什么功能，因此很难做出估计。但是，您可以将其与 jQuery 进行比较。它以 30 kb 的文件提供了如此多的跨浏览器功能。

您添加到页面的每个文件都需要一些时间来传输。它可以通过缓存、缩小、CDN 等来减少。还有一些方法可以将所有 JavaScript 文件捆绑为一个。这通过减少请求数显着提高了性能。

# php - 将js数组传递给PHP

> ID：11075254
> 
> 赞同：0
> 
> 时间：2012-06-17T22:20:39.323
> 
> 标签：php, javascript, jquery, ajax

> **可能重复：**
> [将 js 数组传递给 PHP](https://stackoverflow.com/questions/11071584/passing-a-js-array-to-php)

我被 jQuery $.post() 方法卡住了，我无法通过 PHP $_POST 访问我的方法，我不知道为什么。

这是js：

```
<script type="text/javascript">
var selectedValues;

$("td").click(function() {
$(this).toggleClass('selectedBox');

selectedValues = $.map($("td.selectedBox"), function(obj) {
        return $(obj).text();   
});

// $.post('/url/to/page', {'someKeyName': variableName}); //exemple
$.post('handler.php', 
      {'serializedValues' : JSON.stringify(selectedValues)}, 
      function(data) {
        //debug 
     }
);
});

</script> 
```

这是PHP文件：

```
<?php
if(isset($_POST['serializedValues'])) {

        var_dump($_POST['serializedValues']);
        $originalValues = json_decode($_POST['serializedValues'], 1);
        print_r($originalValues);

    }
?> 
```

当我在选择一些 td 元素后发出 console.log(selectedValues) 时，它会返回我这个例如：

```
 [" 3 ", " 4 "] 
```

别的，当我通过 XHR 检查发送的标头时，我得到了这个：

```
 serializedValues:[" 3 "," 4 "] 
```

最后，在 php var_dump($_POST) 中仍然没有返回任何内容:(

一些提示？提前致谢 ：）

# filter - 如何按包名称过滤已安装的应用程序？

> ID：11075257
> 
> 赞同：0
> 
> 时间：2012-06-17T22:21:01.960
> 
> 标签：filter, package

我想按特定包名称显示已安装应用程序的过滤视图（列表/网格/我选择的任何内容）。

例如，过滤以包名称“com.myapp.xxxx”开头的应用程序，其中 xxxx 在此阶段不感兴趣。

我知道 PackageManager 将用于检索所有已安装应用程序的列表，但如何从那里过滤此列表？有没有办法查询已安装的应用程序以获取特定的包名称？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T08:44:56.770

**是的，您可以，例如，我在此代码段中安装或未安装过滤器 Flash 播放器。**

```
 boolean flashInstalled = false;

 try {
      PackageManager pm = getPackageManager();

       ApplicationInfo ai = pm.getApplicationInfo("com.adobe.flashplayer", 0);
       if (ai != null)
flashInstalled = true;
    } catch (NameNotFoundException e) {
     flashInstalled = false;
   } 
```

# sparql - special characters in SPARQL variables

> ID：11075261
> 
> 赞同：3
> 
> 时间：2012-06-17T22:21:37.873
> 
> 标签：sparql

I'm trying to make a SPARQL query, that returns a variable which contains two words, separated by something.. actually, I try to get a variable like ?πληθυσμός_population (greek and english). however, I'd prefer something different than "_", for example an "/" or "-" or even a ":" so that I can do something like "?Ελλ:Πληθυσμός/Eng:Population". How can I do this in a SPARQL query?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T00:06:36.420

The [grammar for SPARQL variable names](http://www.w3.org/TR/sparql11-query/#rVARNAME) does not allow chars like /, :, or -, because these (and several others) have reserved meanings in SPARQL.

However, you have plenty of other choices. For example, a middle dot '·' is allowed, as is any combination character from the [Unicode combining diacritical range](http://orwell.ru/test/Unicode/_?6), or indeed any Unicode char in the ranges mentioned in the `PN_CHAR_BASE` grammar rule. Knock yourself out trying to find a char you fancy :)

I would point out, by the way, that using an underscore is actually a pretty well-established practice for separating two words in variables names.

# android - 与 Hibernate 和数据库的通信

> ID：11075262
> 
> 赞同：1
> 
> 时间：2012-06-17T22:22:05.487
> 
> 标签：android, hibernate

晚安，

我在 Eclipse 中使用 hibernate 与数据库通信。

我使用以下方法创建了一个外观：

```
public class UsuarioFacade {

public UsuarioFacade(){
    System.out.println("Dentro de constructor -> UsuarioFacade");
}

public void altaUsuario(Usuario per){
    try {
        System.out.println("Alta Usuario");
        Session session =  Singleton.getInstance().openSession();
        org.hibernate.Transaction tx = session.beginTransaction();
        session.save(per);
        tx.commit();
        session.close();
    } catch (Exception e) {
        e.printStackTrace();
    }   
}

public void modificacionUsuario(Usuario per){
    try {
        Session session =  Singleton.getInstance().openSession();
        org.hibernate.Transaction tx = session.beginTransaction();
        session.merge(per);
        tx.commit();
        session.close();
    } catch (Exception e) {
        e.printStackTrace();
    }   
} 
```

当我修改用户数据并调用修改用户的方法时会看到以下异常

```
 if(opcion.equals("5")){

        response.setContentType("text/html");

        String datos = request.getParameter("datos_perfil");

        System.out.println("Datos en la opcion 5 contiene "+datos);

        JSONObject json = new JSONObject();
        json = (JSONObject) JSONSerializer.toJSON(datos);

        Usuario user = new Usuario();

        user.setNombre(json.getString("name"));
        user.setNombre(json.getString("apellidos"));
        user.setNombre(json.getString("dni"));
        user.setNombre(json.getString("telefono"));
        user.setNombre(json.getString("email"));
        user.setNombre(json.getString("direccion"));
        user.setNombre(json.getString("numero"));
        user.setNombre(json.getString("poblacion"));
        user.setNombre(json.getString("cp"));
        user.setNombre(json.getString("provincia"));
        user.setNombre(json.getString("login"));

        facade.modificacionUsuario(user);
    } 
```

错误日志：

```
org.hibernate.id.IdentifierGenerationException: ids for this class must be manually assigned before calling save(): modelos.Usuario
No entre en ninguno
    at org.hibernate.id.Assigned.generate(Assigned.java:53)
    at org.hibernate.event.def.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:121)
    at org.hibernate.event.def.DefaultMergeEventListener.saveTransientEntity(DefaultMergeEventListener.java:415)
    at org.hibernate.event.def.DefaultMergeEventListener.mergeTransientEntity(DefaultMergeEventListener.java:341)
    at org.hibernate.event.def.DefaultMergeEventListener.entityIsTransient(DefaultMergeEventListener.java:303)
    at org.hibernate.event.def.DefaultMergeEventListener.onMerge(DefaultMergeEventListener.java:258)
    at org.hibernate.event.def.DefaultMergeEventListener.onMerge(DefaultMergeEventListener.java:84)
    at org.hibernate.impl.SessionImpl.fireMerge(SessionImpl.java:867)
    at org.hibernate.impl.SessionImpl.merge(SessionImpl.java:851)
    at org.hibernate.impl.SessionImpl.merge(SessionImpl.java:855)
    at facade.UsuarioFacade.modificacionUsuario(UsuarioFacade.java:51)
    at servlet.UsuarioServlet.doPost(UsuarioServlet.java:223)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:164)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:562)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:395)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:250)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:188)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:166)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

我究竟做错了什么？谢谢和最好的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T23:17:51.653

我认为您的代码中有错误。您似乎多次设置相同的字段。我假设您想使用 JSON 设置多个字段？

```
 user.setNombre(json.getString("name"));
    user.setNombre(json.getString("apellidos"));
    user.setNombre(json.getString("dni"));
    user.setNombre(json.getString("telefono"));
    user.setNombre(json.getString("email"));
    user.setNombre(json.getString("direccion"));
    user.setNombre(json.getString("numero"));
    user.setNombre(json.getString("poblacion"));
    user.setNombre(json.getString("cp"));
    user.setNombre(json.getString("provincia"));
    user.setNombre(json.getString("login")); 
```

这应该设置我假设的不同字段。

我猜想您要设置的字段之一是您的实体的@Id。

顺便说一句，我强烈建议您重新考虑在 Android 应用程序中使用 Hibernate。有许多轻量级框架几乎可以肯定满足您的要求。

# k-means - k-均值空簇

> ID：11075272
> 
> 赞同：14
> 
> 时间：2012-06-17T22:23:44.770
> 
> 标签：k-means

我尝试将[k-means](http://en.wikipedia.org/wiki/K-means_clustering)实施为家庭作业。我的练习表给了我关于空中心的以下评论：

> 在迭代过程中，如果任何聚类中心没有与之关联的数据点，则将其替换为随机数据点。

这让我有点困惑，首先维基百科或我读过的其他来源根本没有提到这一点。我进一步阅读了“为您的数据选择一个好的 k”的问题——如果我开始为空的集群设置新的中心，我的算法应该如何收敛。

如果我忽略空集群，我会在 30-40 次迭代后收敛。忽略空簇是错误的吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-11-06T20:26:52.177

看看这个空簇如何发生的例子：[http](http://www.ceng.metu.edu.tr/~tcan/ceng465_f1314/Schedule/KMeansEmpty.html) ://www.ceng.metu.edu.tr/~tcan/ceng465_f1314/Schedule/KMeansEmpty.html 它基本上意味着要么1）随机震颤，要么2 ) 簇数 k 是错误的。您应该遍历 k 的几个不同值并选择最佳值。如果在迭代过程中遇到空集群，请将随机数据点放入该集群并继续。我希望这对你去年的家庭作业有所帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-25T17:28:32.463

处理空集群不是 k-means 算法的一部分，但可能会导致更好的集群质量。谈到收敛，它从来都不是精确的，而是只有启发式保证的，因此通过包含最大迭代次数来扩展收敛的标准。

关于解决这个问题的策略，我想说随机分配一些数据点给它不是很聪明，因为我们可能会影响集群质量，因为到它当前分配的中心的距离很大或很小。这种情况的启发式方法是选择离最大集群最远的点并移动空集群，然后这样做直到没有空集群。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-02-22T06:57:11.707

声明：k-means 可以导致

[![下面是给定分布上 k-means 的执行流程](../Images/1f56c0706cb9bd8932e0b91733f274c1.png)](https://i.stack.imgur.com/ZhPny.png)

考虑上述数据点的分布。

*   重叠点意味着它们之间的距离为del。del 趋向于 0，这意味着您可以假设任意小值，例如 0.01。

*   虚线框表示集群分配

*   页脚中的图例代表数字线

N=6 点

k=3 簇（彩色）

最终集群 = 2

蓝色集群是孤立的，最终是空的。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-11-12T14:30:43.937

如果在分配步骤期间没有将点分配给集群，则可以获得空集群。如果发生这种情况，您需要选择一个替换质心，否则 SSE 会比必要的大。

*选择对SSE贡献最大的点 *从具有最高SSE的簇中选择一个点 *如果有多个空簇，上述可以重复多次。

***SSE = 平方误差之和。

检查此站点[https://chih-ling-hsu.github.io/2017/09/01/Clustering#](https://chih-ling-hsu.github.io/2017/09/01/Clustering#)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-18T20:33:36.823

您不应忽略空簇，而应替换它。k-means 是一种只能为您提供局部最小值的算法，而空簇是您不想要的局部最小值。即使你用一个随机点替换一个点，你的程序也会收敛。请记住，在算法开始时，您随机选择初始 K 个点。如果它可以收敛，为什么 K-1 收敛点与 1 个随机点不能？只需要更多的迭代。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-13T17:49:48.877

“为您的数据选择好的k”是指选择正确数量的集群的问题。由于 k-means 算法使用预定数量的聚类中心，因此必须首先选择它们的数量。选择错误的数字可能会使数据点难以划分为集群，或者集群可能变得小而无意义。

关于忽略空集群是否是一个坏主意，我无法回答您。如果这样做，您最终得到的集群数量可能比您在开始时定义的要少。这会让那些期望 k-means 以某种方式工作的人感到困惑，但这并不一定是一个坏主意。

如果您重新定位任何空的集群中心，如果这种情况发生的次数有限，您的算法可能无论如何都会收敛。但是，如果您必须经常搬迁，您的算法可能不会终止。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-12-27T16:51:54.417

对于“为您的数据选择好的 k”，Andrew Ng 给出了 T 恤制造商的示例，该制造商查看潜在客户的测量结果并进行 k-means 来决定您是要提供 S/M/L (k=3) 还是 2XS/ XS/S/M/L/XL/2XL (k=7)。有时决策是由数据驱动的（k=7 给出空集群），有时是出于业务考虑（制造成本较低，只有三种尺寸，或者市场营销表示客户需要更多选择）。

# php - Wamp、MYSQL 和 ON DUPLICATE KEY UPDATE 不影响正确的行数？

> ID：11075275
> 
> 赞同：0
> 
> 时间：2012-06-17T22:24:21.910
> 
> 标签：php, mysql, wamp

我有一个`ON DUPLICATE KEY UPDATE`运行成功的 mysql 语句。

虽然在手册中它说对于插入的行，受影响的行是 1，更新的行是 2。我想我可以通过简单地计算插入的行数；

```
$i = count($insert); // the insert array
// execute the query here
$inserted = ($i * 2) - $q -> rowCount(); 
```

等于的方程`$inserted`返回插入的行数（根据mysql）。

虽然在我的笔记本电脑上运行 wamp，但当仅插入重复值时，我得到的行数为 0！为什么会这样？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T02:23:52.187

该`rowCount()`函数将只返回 1 或 2，表示更新或插入。如果您进行多次插入/更新，使用这种`ON DUPLICATE KEY UPDATE`方法您会放弃知道有多少行受到影响。

在您的实例中，您的行数可能为 0，因为如果您使用相同的值进行更新，则返回值为 0（即没有变化）。[对 PHP 手册](http://www.php.net/manual/en/pdostatement.rowcount.php#104930)的评论建议您可以将 PDO 属性添加`PDO::MYSQL_ATTR_FOUND_ROWS`到 true 以获取更新查询实际找到/匹配的行数。

例如

```
$p = new PDO($dsn, $u, $p, array(PDO::MYSQL_ATTR_FOUND_ROWS => true)); 
```

# jquery - 使用 MVC 结构的 Jquery UI 模态对话框

> ID：11075278
> 
> 赞同：1
> 
> 时间：2012-06-17T22:25:39.257
> 
> 标签：jquery, zend-framework, jquery-ui-dialog

我正在使用 Zend 框架创建一个带有提交按钮的 Jquery UI 对话框，以向 MYSQL 数据库添加一些内容。我的代码在使用普通 URL (/index) 时有效，但在自定义路由页面 (/addpost/new) 上时，它似乎不起作用。有谁知道问题是什么？

查询对话框

```
<script>

$(function() {

$( "#dialog-form" ).dialog({
        autoOpen: false,
        height: 300,
        width: 350,
        modal: true
    });

    $( "#create-user" )
        .button()
        .click(function() {
            $( "#dialog-form" ).dialog( "open" );
        });
});
</script> 
```

按钮

```
<button id="create-user">Create new user</button> 
```

形式

```
<div id="dialog-form" title="Create new user">
<form id="form-id">
<fieldset>
<input type="text" name="text" id="text" value="" class="text ui-widget- content ui-corner-all" />
<input type="submit" value="Add to Database">
</fieldset>
</form>
</div> 
```

查询提交

```
<script type="text/javascript">
$('#form-id').submit(function() {
$.ajax(
{
    type: 'POST',
    url: '/addtodatabase',
    data: $(this).serializeArray(),
    success: function(data, textStatus, jqXHR)
    {

    },
    error: function(jqXHR, textStatus, errorThrown)
    {
      //code
      }
      });
      });
      </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T01:15:45.387

如果您可以将其保存在索引页面上，那么您的代码就可以了。

检查 firebug 中的 ajax 请求并查看请求被发送到哪里。最有可能是上下文问题。要在 firebug 中通过直接调用它来绕过这个测试：

`$.ajax({url: "/addpost/new"}, {})`

更改上面的 url 参数，直到您到达端点。那应该排序它。

:)

# gcc - gcc，开始符号并推送 $0x00

> ID：11075279
> 
> 赞同：0
> 
> 时间：2012-06-17T22:25:41.020
> 
> 标签：gcc, assembly

因此，我已经在互联网上搜索了数周，但找不到我的问题的答案。

我可以看到 gcc 添加的开始符号设置了最初的两个参数（int argc，char *argv[]），我相信第三个环境参数，但我对此有几个问题。如果 main() 函数被定义为没有参数，为什么还要添加所有这些？如果它只调用 _main 而没有任何参数，它不会节省空间（和技术上的处理时间）吗？其次 push $0x0 是做什么的？我已经完成了测试，如果您尝试像默认开始符号那样迭代命令行参数，那么您需要在开头 push $0x0，否则如果我执行以下操作，我会创建未对齐的堆栈错误：

```
push $0x00
call _main
mov %eax, %edi
call _exit 
```

同样在我的调查中，我发现链接器在链接到 crt1.10.6.o 时添加了起始符号

任何解释或文件将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T22:45:01.487

如您所见，的代码`_start`来自一个名为`crt1.o`或类似的目标文件。该目标文件通常来自作为 C 库一部分的源代码。它是在不知道您如何声明函数的情况下编译的`main`，因此它必须假设您希望使用所有三个*潜在*参数。即使`main`不使用它们，设置参数也没有害处（正如你提到的，除了微不足道的空间和时间）。

我推断`mov %eax,%edi`这是 x86-64 ELF ABI，这意味着没有帧指针，所以`push $0x00`正如您推测的那样，确实只是为了保持堆栈与 16 字节边界对齐。（在 x86-32 ELF ABI 中，它也可以作为帧指针链表的终止符。）

# php - preg_replace_callback - 我需要这个来忽略重复的 URL 中的空格

> ID：11075283
> 
> 赞同：0
> 
> 时间：2012-06-17T22:26:01.380
> 
> 标签：php

这是我用来解析 URL 的当前代码，它适用于 MySQL 中的所有查询，直到它遇到 url 中的空格。然后它就像这样把事情分开。

[http://domain.com/1.jpg](http://domain.com/1.jpg)

[http://domain.com/1](http://domain.com/1) http://(1).jpg

我需要解决这个问题。

```
<?php
$con = mysql_connect("localhost","----","----");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("----", $con);

$result = mysql_query("SELECT * FROM posts ORDER BY postid DESC");

while($row = mysql_fetch_array($result))
  {

$str = $row['post_content'];

$str = preg_replace_callback('#(?:https?://\S+)|(?:www.\S+)|(?:\S+\.\S+)#', function($arr)
{
    if(strpos($arr[0], 'http://') !== 0)
    {
        $arr[0] = 'http://' . $arr[0];
    }

    $url = parse_url($arr[0]);

    // images
    if(preg_match('#\.(png|jpg|gif)$#', $url['path']))
    {
        return '<img src="'. $arr[0] . '" />';
    }
    // youtube
    if(in_array($url['host'], array('www.youtube.com', 'youtube.com'))
      && $url['path'] == '/watch'
      && isset($url['query']))
    {
        parse_str($url['query'], $query);
        return sprintf('<iframe class="embedded-video" src="http://www.youtube.com/embed/%s" allowfullscreen></iframe>', $query['v']);
    }
    //links
    return sprintf('<a href="%1$s">%1$s</a>', $arr[0]);
}, $str);

echo $str;
echo "<br />";
}

mysql_close($con);
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T22:42:03.933

网址中不应该有空格。请参阅[URL 中的空格？](https://stackoverflow.com/a/5442701/379580). 一个简单的解决方法是在 preg_match 之前对其进行 url 编码。

您应该对内容进行 urlencode，但由于您已经存储了它，请尝试执行

```
$str = str_replace(' ', '%20', $str);

$str = preg_replace_callback('#(?:https?://\S+)|(?:www.\S+)|(?:\S+\.\S+)#', function($arr) 
```

# command-line - 如何在文件列表中搜索存在于同一行的多个值？

> ID：11075284
> 
> 赞同：0
> 
> 时间：2012-06-17T22:26:17.917
> 
> 标签：command-line, grep

我正在尝试在一个包含大量 html 文件的目录中进行搜索，以找到那些在同一行中包含确切值的文件。这应该有效：

```
grep -iwc 'word1' -sl | xargs grep -iwc 'word2' -s 
```

但这一次只能处理一个文件。我试过这样的事情：

```
find . -iname '*html' | xargs grep -iwc 'word1' -sl | xargs grep -iwc 'word2' -s 
```

但这似乎显示了包含这两个值中的任何一个的文件，所以即使是那些不在同一行的文件。

输出应该只是文件名和出现次数，例如：

```
file.html:2 
```

如果可以将这两个 grep 分组？或者另一种方法来做这个搜索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T22:47:24.320

扩展的正则表达式可能会有所帮助。大概是这样的？

```
find . -iname '*html' | xargs egrep -iwl '(word1.*word2|word2.*word1)' 
```

由于您只有两个要查找的单词，因此列出所有订购它们的方式并不难。

# asp.net-mvc-3 - MVC3 代码优先以及如何使用 LINQ2SQL

> ID：11075288
> 
> 赞同：2
> 
> 时间：2012-06-17T22:26:51.333
> 
> 标签：asp.net-mvc-3, linq

我正在使用带有 C# 的 MVC3，并且我使用的是代码优先。我认为这是 EF 4.1。我正在使用 vs 2012 RC，所以它也有自己的错误。我想使用 LINQ2SQL。如何将模型连接到数据库然后使用 LINQ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T02:12:42.200

LINQ to SQL 是一种过时的技术。检查以下帖子[Entity Framework VS LINQ to SQL](https://stackoverflow.com/questions/2698151/entity-framework-vs-linq-to-sql-vs-ado-net-with-stored-procedures)。此外，请阅读 Steven Sanderson 的脚手架教程，以获得对 MVC、EF 和脚手架的良好概述（[Scaffold your ASP.NET MVC](http://blog.stevensanderson.com/2011/01/13/scaffold-your-aspnet-mvc-3-project-with-the-mvcscaffolding-package/)）。这是一个 MVC3，但它仍然是相关的。

# collision - 圆角碰撞行为

> ID：11075292
> 
> 赞同：3
> 
> 时间：2012-06-17T22:28:20.773
> 
> 标签：collision, geometry, game-physics

我正在做一个项目，我有一个 2D 滚动的大理石。我可以检测到大理石何时撞到盒子的​​角落，但我无法弄清楚它撞到角落时应该有什么行为。我需要弄清楚如何重新定位球，以免它与盒子重叠。对于一个盒子到盒子的碰撞，就像将盒子设置在彼此旁边一样简单，但是对于一个圆圈和盒子，我不知道将大理石移动到哪里，所以它看起来很逼真。

我不是在问它是如何反弹的。我对三角有很好的理解。当您将弹珠移向盒子时，它会在某个时候与盒子重叠。我需要知道如何制作它，这样它们就不会再重叠了，但它看起来仍然很逼真。它不需要反弹（就像假设大理石的一部分有无限大的质量）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T22:39:07.307

好好看看维基百科上的这篇文章：[弹性碰撞](http://en.wikipedia.org/wiki/Elastic_collision#Two-_and_three-dimensional)。

您将需要在任何给定的表面点为您的 2D 对象创建表面法线，如果您的框是*完全*正方形的，这将是有问题的，因为锋利的边缘没有法线。您必须对拐角情况（没有双关语）进行特殊处理，并为它们提供表面法线，即在拐角处连接的两条线的法线的平均值。

基本上，使用向量。

# jquery - 切换页面后Jquery持久页脚按钮不起作用

> ID：11075293
> 
> 赞同：0
> 
> 时间：2012-06-17T22:30:03.000
> 
> 标签：jquery

我正在使用基于多页 html 文件的 Jquery/mobile 开发 Phonegap 应用程序，使用固定标题作为标题，使用固定页脚作为带有按钮的工具栏。这个想法是，通过单击页脚上的前进/后退按钮，用户移动几个步骤，刷新每个页面中的数据块，因此他们可以在该特定步骤的不同“块”之间来回滑动。

在解决了大部分松散的问题后，我一直在整理我的代码，将用于处理按钮的 JQuery 提取到单独的函数中，然后我在每个子页面显示时调用 AIUI。问题是，既然我已经这样做了，我的前进/后退按钮似乎只在第一页上工作。有什么想法我可能会出错吗？

相关html：

```
<body onload="onBodyLoad()">

<div data-role="page" id="page1" class="page">

<script type="text/javascript">
    $(document).ready(function () {
    InitRightBar();
    InitLeftBar();
    ReloadText();
    InitBackButton();
    InitForwardButton();
    });
    </script>

<div data-role="header" data-id="fixedheader" data-position="fixed" >   
    <h1>Fixed header</h1>
</div><!-- /header -->

<div data-role="content">
    <div id="contentview">
        <a href="#page2" data-transition="flip">Linky</a>
    </div>
    <div id="rightbar">
        <img src="images/Testbar.png">
    </div>
</div><!-- /content -->

<div data-role="footer" data-id="fixedfooter" data-position="fixed">
    <a id = "BackButton" href="#">Back</a>
    <a id="ForwardButton" href="#">Forward</a>
</div><!-- /footer -->
</div><!-- /page1 -->

<div data-role="page" id="page2" class="page">

<script type="text/javascript">
    $(document).ready(function () {
            InitRightBar();
            InitLeftBar();
            ReloadText();
            InitBackButton();
            InitForwardButton();
            });
    </script>        

    <div data-role="header" data-id="fixedheader" data-position="fixed" >   
        <h1>Fixed header</h1>
    </div><!-- /header -->

    <div data-role="content">
    <div id="leftbar">
        <img src="images/Testbar.png">
    </div>
    <div id="mainview">
        <blockquote id="blocktext">
            <p>Hello world</p>
            <p><a href="#page1" data-transition="flip">Linky</a></p>
        </blockquote>
    </div>
    </div><!-- /content -->

    <div data-role="footer" data-id="fixedfooter" data-position="fixed">
        <a id = "BackButton" href="#">Back</a>
        <a id = "ForwardButton" href="#">Forward</a>
    </div><!-- /footer -->
</div><!-- /page2 -->
</body> 
```

如果有帮助，我可以提供各个功能，但据我所知，使用警报，问题可能出在此处 - 第二页的按钮根本没有变得活跃/可点击......

无论如何，提前谢谢！贾尔斯

***更新回应克里斯的评论：

感谢您的建议 - 我已尝试禁用第 2 页的脚本，但没有任何区别，但我不确定这是因为它们实际上是多余的，还是因为我遇到的整体问题（我认为我需要初始化按钮，因为该页面只有在用户滑动或链接到它时才会加载到 DOM？）

我真的看不出任何东西来澄清第二页上固定页眉/页脚的元素是否实际上是从第一页保留的，或者只是在原地复制，所以我假设我必须单独编码它们他们是“新”元素，并试图相应地初始化它们......这是错的吗？

按键功能代码如下：

```
function InitBackButton (){
    $("#BackButton").click(function(event){
                           alert("triggered!")
                event.stopImmediatePropagation()
                if (counter >0)
                    {counter -=1;
                    $("#blocktext").html(pagecontent[counter][0]);
                }
    });
}         

function InitForwardButton(){
$("#ForwardButton").click(function(event){
                          event.stopImmediatePropagation()      
                          if (counter < 3)
                          {counter +=1;
                          $("#blocktext").html(pagecontent[counter][0]);
                          }
                          });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T09:17:21.270

知道了！

诀窍是使用“on”绑定事件处理程序，按钮名称位于“on”函数的“selector”字段中，而不是在开始时。这样，绑定适用于 DOM 中当前和将来出现的按钮名称......

这对大多数人来说可能是显而易见的，但对于像我这样的新手来说却不是，所以为了清楚起见，这里是代码：

这有效：

```
$("body").on("click", "#ForwardButton", function(event){
                               StepForward();
                               });
$("body").on("click", "#BackButton", function(event){
                          StepBack();
                            }); 
```

这不会（不会找到稍后创建的 ForwardButton 和 BackButton 的实例）：

```
$("#ForwardButton").on("click", function(event){
                               StepForward();
                               });
$("#BackButton").on("click", function(event){
                          StepBack();
                            }); 
```

在第一页的开头，克里斯关于冗余的观点被证明是正确的——事实上，我现在可以将“初始化”例程连同我的其余脚本一起移回我的 html 的头部......

# actionscript-3 - AIR Mobile：未加载外部类

> ID：11075297
> 
> 赞同：1
> 
> 时间：2012-06-17T22:30:41.490
> 
> 标签：actionscript-3, air, flashdevelop

我无法将普通的 as3 swf 定位到空中移动设备，因此我制作了一个简单的测试应用程序来检查并尝试了解问题所在。我正在使用 flashdevelop 4 和最新的 AIR sdk。

我导出了一个带有类名*BlackBox*的简单 MC 的 SWC 这是我的主要代码（省略了包和导入，但我什至导入了 BlackBox 类）：

```
public class Main extends Sprite 
{
    public var cajaNegra:MovieClip

    public function Main():void 
    {
        stage.scaleMode = StageScaleMode.NO_SCALE;
        stage.align = StageAlign.TOP_LEFT;
        stage.addEventListener(Event.DEACTIVATE, deactivate);

        // touch or gesture?
        Multitouch.inputMode = MultitouchInputMode.TOUCH_POINT;

        // entry point
        cajaNegra = new BlackBox();
        addChild(cajaNegra)
        cajaNegra.x = stage.stageWidth/2
        cajaNegra.y = stage.stageHeight / 2
        }
} 
```

一切正常，但是当我在 src 文件夹中创建自定义*BlackBox.as*时，该应用程序不显示任何内容。我添加了一个名为*miTexto*的文本字段。

黑盒

```
public class BlackBox extends MovieClip 
{
    public var miTexto:TextField

    public function BlackBox() 
    {
        super();
        if (stage) init();
        else addEventListener(Event.ADDED_TO_STAGE, init);

    }

    private function init(e:Event = null):void 
    {
        removeEventListener(Event.ADDED_TO_STAGE, init);
        // entry point
        miTexto.text = "changed text"
    }

} 
```

在这种情况下，调试器会在*miTexto.text = "changed text"*行中抛出：

```
 [Fault] exception, information=TypeError: Error #1009: Cannot access a property or method of a null object reference 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T22:36:10.820

你忘了做吗：addChild(miTextTo); ?

# nginx - 删除 nginx 中的索引扩展

> ID：11075298
> 
> 赞同：0
> 
> 时间：2012-06-17T22:30:45.763
> 
> 标签：nginx

使用 Apache，该指令`DirectoryIndex index`以及`DefaultType application/x-httpd-php`特定虚拟主机中的指令可以很好地从索引文件中排除文件扩展名，而无需重写。如何在 Nginx 中复制它？到目前为止，我所能找到的只是正则表达式重写解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T23:10:54.510

.conf 文件看起来像这样：

```
server {
server_name example.com;

# Set the docroot directly in the server
root /var/www;

    # Allow index.php or index.html as directory index files
    index index;

    # See if a file or directory was requested first.  If not, try the request as a php file.
    location / {
        try_files $uri $uri/;
    }
} 
```

该行`try_files $uri`应该在后端尝试没有扩展名的文件

# php - PHP在/和/之间的url上获取结束字符串

> ID：11075301
> 
> 赞同：1
> 
> 时间：2012-06-17T22:31:17.303
> 
> 标签：php

我需要在/和/之间获取url的最后一个字符串内容

例如：

```
http://mydomain.com/get_this/

or

http://mydomain.com/lists/get_this/ 
```

我需要得到 get_this 在 url 中的位置。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-17T22:33:33.227

[trim()](http://php.net/manual/en/function.trim.php)删除尾部斜杠，[strrpos()](http://php.net/manual/en/function.strrpos.php)找到最后一次出现的`/`（在修剪之后），[substr()](http://php.net/manual/en/function.substr.php)获得最后一次出现`/`.

```
$url = trim($url, '/');
echo substr($url, strrpos($url, '/')+1); 
```

^([查看输出](http://codepad.org/QLHvhhiY))

* * *

更好的是，您可以使用[basename()](http://php.net/manual/en/function.basename.php)，就像 hakre 建议的那样：

```
echo basename($url); 
```

^([查看输出](http://codepad.org/JonOCPIR))

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T22:33:22.937

假设*总是*有一个斜杠：

```
$parts = explode('/', $url);
$get_this = $parts[count($parts)-2]; // -2 since there will be an empty array element due to the trailing slash 
```

如果不：

```
$url = trim($url, '/'); // If there is a trailing slash in this URL instance get rid of it so we're always sure the last part is where we expect it
$parts = explode('/', $url);
$get_this = $parts[count($parts)-1]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-17T22:35:18.367

像这样的东西应该工作。

```
<?php
$subject = "http://mydomain.com/lists/get_this/";
$pattern = '/\/([^\/]*)\/$/';
preg_match($pattern, $subject, $matches, PREG_OFFSET_CAPTURE, 3);
print_r($matches);
?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-17T22:48:47.803

只需使用[`parse_url()`](http://php.net/manual/en/function.parse-url.php)和`explode()`：

```
<?php

$url = "http://mydomain.com/lists/get_this/";
$path = parse_url($url, PHP_URL_PATH);
$path_array = array_filter(explode('/', $path));
$last_path = $path_array[count($path_array) - 1];

echo $last_path;

?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-17T22:33:31.517

你可以试试这个：

```
preg_match("/http:\/\/([a-z0-9\.]+)\/(.+)\/(.*)\/?/", $url, $matches);
print_r($matches); 
```

# r - 如何用 R 中另一个矩阵的值填充矩阵？

> ID：11075302
> 
> 赞同：5
> 
> 时间：2012-06-17T22:31:23.937
> 
> 标签：r, matrix

**如何用另一个矩阵的值填充一个空矩阵？**

空矩阵：

```
> m1 <- matrix(ncol=8, nrow=8)
> rownames(m1) <- c('a','b','c','d','e','f','g','h')
> colnames(m1) <- c('a','b','c','d','e','f','g','h')
> m1
   a  b  c  d  e  f  g  h
a NA NA NA NA NA NA NA NA
b NA NA NA NA NA NA NA NA
c NA NA NA NA NA NA NA NA
d NA NA NA NA NA NA NA NA
e NA NA NA NA NA NA NA NA
f NA NA NA NA NA NA NA NA
g NA NA NA NA NA NA NA NA
h NA NA NA NA NA NA NA NA 
```

具有填充空矩阵的值的矩阵：

```
> m2 <- matrix(ncol=4, nrow=4)
> rownames(m2) <- c('b','e','h','x')
> colnames(m2) <- c('b','e','h','x')
> m2[,'b'] <- c(1,2,3,1)
> m2[,'e'] <- c(2,1,1,5)
> m2[,'h'] <- c(3,1,3,5)
> m2[,'x'] <- c(1,5,5,1)
> m2
  b e h x
b 1 2 3 1
e 2 1 1 5
h 3 1 3 5
x 1 5 5 1 
```

你如何合并这两个矩阵来得到这个结果：

```
 a  b  c  d  e  f  g  h
a NA NA NA NA NA NA NA NA
b NA  1 NA NA  2 NA NA  3
c NA NA NA NA NA NA NA NA
d NA NA NA NA NA NA NA NA
e NA  2 NA NA  1 NA NA  1
f NA NA NA NA NA NA NA NA
g NA NA NA NA NA NA NA NA
h NA  3 NA NA  1 NA NA  3 
```

**编辑**：在 m2 中添加了行/列`x`，而不是在 m1 中

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-17T22:36:49.707

查找两个矩阵共有的列（行）名称

```
cols <- colnames(m1)[colnames(m1) %in% colnames(m2)]
rows <- rownames(m1)[rownames(m1) %in% rownames(m2)] 
```

然后将适当的值分配`m2`给`m1`

```
m1[rows, cols] <- m2[rows, cols]
m1
#   a  b  c  d  e  f  g  h
#a NA NA NA NA NA NA NA NA
#b NA  1 NA NA  2 NA NA  3
#c NA NA NA NA NA NA NA NA
#d NA NA NA NA NA NA NA NA
#e NA  2 NA NA  1 NA NA  1
#f NA NA NA NA NA NA NA NA
#g NA NA NA NA NA NA NA NA
#h NA  3 NA NA  1 NA NA  3 
```

# c - 在 OSX 中定义“BYTE_ORDER”宏的位置？

> ID：11075303
> 
> 赞同：1
> 
> 时间：2012-06-17T22:31:26.880
> 
> 标签：c, macos, unix, endianness

我想在我的 Xcode 项目中使用“BYTE_ORDER”宏，但我不能，因为我不知道它是在哪个标头中定义的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T22:35:34.177

当我查看我的 Xcode 4.3.X 安装时，我发现 " `byte_order.h`" 文件位于几个地方：

```
[/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform]:;!fi
find . -name byte_order.h -print
./Developer/SDKs/MacOSX10.6.sdk/System/Library/Frameworks/Kernel.framework/Versions/A/Headers/architecture/byte_order.h
./Developer/SDKs/MacOSX10.6.sdk/System/Library/Frameworks/Kernel.framework/Versions/A/Headers/machine/byte_order.h
./Developer/SDKs/MacOSX10.6.sdk/usr/include/architecture/byte_order.h
./Developer/SDKs/MacOSX10.6.sdk/usr/include/architecture/i386/byte_order.h
./Developer/SDKs/MacOSX10.6.sdk/usr/include/architecture/ppc/byte_order.h
./Developer/SDKs/MacOSX10.6.sdk/usr/include/machine/byte_order.h
./Developer/SDKs/MacOSX10.7.sdk/System/Library/Frameworks/Kernel.framework/Versions/A/Headers/architecture/byte_order.h
./Developer/SDKs/MacOSX10.7.sdk/System/Library/Frameworks/Kernel.framework/Versions/A/Headers/machine/byte_order.h
./Developer/SDKs/MacOSX10.7.sdk/usr/include/architecture/byte_order.h
./Developer/SDKs/MacOSX10.7.sdk/usr/include/architecture/i386/byte_order.h
./Developer/SDKs/MacOSX10.7.sdk/usr/include/machine/byte_order.h 
```

你可能想`#include <architecture/byte_order.h>`在你的 .c 文件中做一个 "" 来获取 byte_order 宏。

对于实际的“ `BYTE_ORDER`”定义本身，它是在几个特定的​​地方定义的，但它的定义方式似乎意味着非常特定的目的。例如，这个定义：

```
#define __DARWIN_BYTE_ORDER __DARWIN_LITTLE_ENDIAN
#define BYTE_ORDER  __DARWIN_BYTE_ORDER
./Developer/SDKs/MacOSX10.7.sdk/System/Library/Frameworks/Kernel.framework/Versions/A/Headers/i386/endian.h 
```

仅适用于内核扩展（驱动程序）。

这定义：

```
#     define BYTE_ORDER LITTLE_ENDIAN
#     define BYTE_ORDER BIG_ENDIAN
#  endif /* BYTE_ORDER */
#  define X_BYTE_ORDER BYTE_ORDER
./Developer/SDKs/MacOSX10.7.sdk/usr/X11/include/X11/Xarch.h 
```

适用于 X11 的东西（ewww）。

我想说最好的办法是`NXHostByteOrder`在“”文件中使用“”内联函数`byte_order.h`，这将为您提供当前主机的字节顺序。

# c++ - 如何在“glutCreateMenu”上添加用户输入

> ID：11075304
> 
> 赞同：0
> 
> 时间：2012-06-17T22:31:45.107
> 
> 标签：c++, opengl, user-input

我想在右键单击鼠标调用菜单时添加选项，以通过用户输入更改颜色的值。我试过`cin>> RED1;`了，但无法识别`cin`。
我不知道如何进行这项工作，除非给出一个固定值来改变颜色。在这种情况下如何实现用户输入？

```
#include <stdio.h>
#include <stdlib.h>
#include <iostream>
#include <string>
#define _USE_MATH_DEFINES
#include <cmath>
#include <gl/glut.h>

GLfloat angle = 0.0;
static int RED1 = 1, GREEN1 = 3, BLUE1 = 0, RED2 = 2, GREEN2 = 2, BLUE2 = 1;
static int MENUsub, Face1, Face2, i, LINES;
static int SELECIONA = 2, f = 0, VALOR = 0, SOLID = 0, LINE = 1;
static double NoFaces = 32, ihc, cordX = 1, cordY = 1, cordZ = 1;

void init(void)
{
    glClearColor (0.0, 0.0, 0.0, 0.0);
    glShadeModel (GL_FLAT);
}

void creatMENU(void)
{
    Face1 = glutCreateMenu(MENU);

    glutAddMenuEntry("Change Colour Values", 1);

    MENUsub = glutCreateMenu(MENU);

    glutAddSubMenu("Face 1", Face1);

    glutAddMenuEntry("Sair", 0);
    glutAttachMenu(GLUT_RIGHT_BUTTON);
}

void MENU (int OPT)
{
    if(OPT == 0)
    {
        exit(0);
    }
    else
    {
        switch(OPT);
        {
        case 1 :
            //cin>> RED1;
            RED1 = 2;
            break;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T22:44:10.513

据我所知，您需要自己处理。

使用`glutKeyboardFunc`获取键盘输入，并使用`glutBitmapCharater`将文本打印到窗口。

因此，您可以保留一个全局布尔值，您可以在选择菜单项时`changingColor`切换到该值。`true`然后，您可以使用矩形或其他东西渲染输入。您可能有一个看起来有点像这样的键盘功能：

```
std::string colorInput;

void keyboard(unsigned char key, int x, int y) {
    if (changingColor) {
        colorInput += key;
    }
 } 
```

在您的渲染功能中，类似：

```
if (changingColor) {
    glRasterPos3f(x, y, z);
    for (auto it = colorInput.begin(); it != colorInput.end(); ++it) {
        glutBitmapCharacter(GLUT_BITMAP_HELVETICA_10, *it);
    }
} 
```

1.  [glutBitmapCharacter](http://www.opengl.org/documentation/specs/glut/spec3/node76.html)
2.  [glutKeyboardFunc](http://www.opengl.org/resources/libraries/glut/spec3/node49.html)

# iphone - 从iphone上的给定点绘制区域

> ID：11075306
> 
> 赞同：0
> 
> 时间：2012-06-17T22:32:11.420
> 
> 标签：iphone, objective-c, google-maps

我想在 iPhone 上使用 Google API 从地图上的给定点绘制一个区域（我总是有超过 2 个点）。如果可能的话，我希望这个区域使用 alfa 0.5（这样人们就可以看到这个区域下方的路线）。

我将不胜感激任何代码和链接。

有几个类似的问题，但我没有找到类似的东西，所以如果我错了，请纠正我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T22:50:08.053

只需使用 a`MKOverlayView`并给它一个从给定点计算的正确`frame`（类型）。`CGRect`将`alpha`视图的 设置为 0.5。注意`frame`和`alpha`是 的属性`UIView`，`MKOverlayView`是子类。

[在此处](http://developer.apple.com/library/ios/#documentation/MapKit/Reference/MKOverlayView_class/Reference/Reference.html#//apple_ref/doc/uid/TP40009715)阅读有关该课程的所有内容。

# php - php - 使用 preg_match 找到的字符串的 parentNode

> ID：11075307
> 
> 赞同：1
> 
> 时间：2012-06-17T22:32:47.557
> 
> 标签：php, preg-match, domdocument, parent-node

我正在尝试访问使用 preg_match 找到的元素的 parentNode，因为我想通过文档的 DOM 读取使用正则表达式找到的结果。我无法通过 PHP 的 DOMDocument 直接访问它，因为 div 的数量是可变的，并且它们没有实际的 ID 或任何其他能够匹配的属性。

为了说明这一点：在下面的示例中，我将`match_me`与 preg_match 匹配，然后我想访问 parentNode (div) 并将所有子元素 (p) 放入 DOMdocument 对象中，这样我就可以轻松地显示它们。

```
 <div> 
   .... variable amount of divs
   <div>
   <div>
       <p>1 match_me</p><p>2</p>
   </div>
   </div>
   </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T01:15:59.630

用于`DOMXpath`根据子节点的值查询节点：

```
$dom = new DOMDocument();
// Load your doc however necessary...

$xpath = new DOMXpath($dom);

// This query should match the parent div itself
$nodes = $xpath->query('/div[p/text() = "1 match_me"]');
$your_div = $nodes->item(0);
// Do something with the children
$p_tags = $your_div->childNodes;

// Or in this version, the query returns the `<p>` on which `parentNode` is called
$ndoes = $xpath->query('/p[text() = "1 match_me"]');
$your_div = $nodes->item(0)->parentNode; 
```

# ruby-on-rails-3 - 在rails 3.0.1中渲染json但编码的字符

> ID：11075308
> 
> 赞同：0
> 
> 时间：2012-06-17T22:32:51.690
> 
> 标签：ruby-on-rails-3, json

我正在使用 rails3.0.10

```
def districts
    @names = Node.where("name like ?", "%#{params[:term]}%").limit(5).map(&:name)
    respond_to do |format|
      format.json {render :json => @names}
      format.xml {render :xml => @names}
    end
  end 
```

渲染 xml 获得正确的名称
，但渲染 json 使名称编码为 => ["name1", "name2", "\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd"]
我想获得正确的名称用他们正确的语言

有什么帮助吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T13:26:21.400

在发送响应之前，您必须强制字符串为 UTF-8

为上面的代码添加这一行

```
@names.map{|name| name.force_encoding('UTF-8')} 
```

这将循环名称数组并强制它们从 ASCII-8BIT 编码为 UTF-8

所以我的方法是

```
def districts
  @names = Node.where("name like ?", "%#{params[:term]}%").limit(5).map(&:name)
  @names.map{|name| name.force_encoding('UTF-8')}
  respond_to do |format|
    format.json {render :json => @names}
    format.xml {render :xml => @names}
  end
end 
```

您还可以修改旅游模型**节点**，如

```
class Node < ActiveRecord::Base
 def name
  super().force_encoding('UTF-8')
 end
end 
```

我确定从这段代码中可以正常工作
感谢
M.SH

# jquery - 有点 Jquery UI Scale+ CSS 问题

> ID：11075309
> 
> 赞同：1
> 
> 时间：2012-06-17T22:33:17.790
> 
> 标签：jquery, css, jquery-ui, google-chrome

我正在尝试创建一个小滑块，其中 jquery UI Scale 带出图像 Div 并扩展第一个。我的问题是，当它在 Google Chrome 中缩放时，它在缩放过程中会有点晃动。在 IE 或 firefox 中，它就像一个魅力，完全没有振动/晃动！

现在我测试了，当我不在 css 中使用 background-position:center 时，它不再抖动，但是如果我把它拿出来，那么它看起来不再像是从图像的中心缩小了。我能做些什么来摆脱这个？这是一个例子（用 Chrome 打开）[http://jsfiddle.net/gqLZe/](http://jsfiddle.net/gqLZe/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T04:45:03.520

将动画置于慢动作（非常长的持续时间），我可以看到 div 的底部实际上偶尔会向上移动一个像素 - 这就是导致抖动的原因。在样式检查器中观察它，我可以看到 jQuery 将 div 的每个位置属性设置为小数，并且每次这些小数中的一个通过整数时，div 的位置实际上会发生变化。由于顶部和高度不一定同时通过整数，因此您会感到震惊。另一方面， left 和 width 似乎总是同时传递一个整数，尽管我不能确定是否是这种情况。在任何情况下，我都无法区分任何水平抖动。

显然 Chrome 正在截断位置属性中的任何小数，而其他浏览器正在使用浮点算法在任何舍入或截断之前以绝对坐标计算 div 的边界。我不确定这是否属于错误（必须检查规范），尽管最终可能会得到修复/改进。它可能确实是 jQuery 中的一个错误，因为 jQuery 应该可以解决这些浏览器的特性。

解决这个问题需要提供不同的缩放算法。一种解决方案是在 JavaScript 中计算其他浏览器自动计算的值，并且只向 Chrome 提供整数，如在这个 jsFiddle 中：http: [//jsfiddle.net/gqLZe/1/](http://jsfiddle.net/gqLZe/1/)

当包含元素具有非整数顶部或左侧（包括由于边框或边距）时，该方法可能会在其他浏览器中导致类似的问题，但只要您坚持整数，它应该可以正常工作。

另一种解决方案是提供您希望 div 扩展到的大小的父元素，并在`right`and`bottom`而不是 on `width`and上进行动画处理`height`。这可以使用 jQuery 非常简单地完成`animate()`：

```
var width = $(".frame").width();
var height = $(".frame").height();
$(".frame").css({
    top: height / 2 + "px",
    bottom: height / 2 + "px",
    left: width / 2 + "px",
    right: width / 2 + "px"
}).show().animate({
    top: 0,
    bottom: 0,
    left: 0,
    right: 0
}, 3000, 'linear'); 
```

jsFiddle：http: [//jsfiddle.net/gqLZe/3/](http://jsfiddle.net/gqLZe/3/)

如果您可以忍受额外的标记元素，那可能就是要走的路。

# c# - 使用 EmguCV 进行实时网络摄像头视频拼接

> ID：11075314
> 
> 赞同：1
> 
> 时间：2012-06-17T22:33:57.543
> 
> 标签：c#, webcam, emgucv, image-stitching

我正在尝试使用 EMGUCV 实时进行网络摄像头缝合。类似于 [youtube 上的此设置](http://www.youtube.com/watch?v=GH1p1HtNegY&feature=related)。问题是我没有得到拼接的视频图像。

这是我的代码`

```
 public Form1()
    {
        InitializeComponent();
        capture1 = new Emgu.CV.Capture(0);
        this.capture1.SetCaptureProperty(Emgu.CV.CvEnum.CAP_PROP.CV_CAP_PROP_FRAME_WIDTH, 1920.0f);
        this.capture1.SetCaptureProperty(Emgu.CV.CvEnum.CAP_PROP.CV_CAP_PROP_FRAME_HEIGHT, 1080.0f);
        capture2 = new Emgu.CV.Capture(1);
        this.capture2.SetCaptureProperty(Emgu.CV.CvEnum.CAP_PROP.CV_CAP_PROP_FRAME_WIDTH, 1920.0f);
        this.capture2.SetCaptureProperty(Emgu.CV.CvEnum.CAP_PROP.CV_CAP_PROP_FRAME_HEIGHT, 1080.0f);

    }
    private void button1_Click(object sender, EventArgs e)
    {
        #region if capture is not created, create it now
        if (capture1 == null)
        {
            try
            {
                capture1 = new Emgu.CV.Capture(0);
                capture2 = new Emgu.CV.Capture(1);
            }
            catch (NullReferenceException excpt)
            {
                MessageBox.Show(excpt.Message);
            }
        }
        #endregion

        if (capture1 != null)
        {
            if (captureInProgress)
            {  //if camera is getting frames then stop the capture and set button Text
                // "Start" for resuming capture
                button1.Text = "Start!"; //
                Application.Idle -= ProcessFrame;

            }
            else
            {
                //if camera is NOT getting frames then start the capture and set button
                // Text to "Stop" for pausing capture
                button1.Text = "Stop";
                Application.Idle += ProcessFrame;
            }

            captureInProgress = !captureInProgress;
        }
    }
    private void ProcessFrame(object sender, EventArgs arg)
    {
        Image<Bgr, Byte> ImageFrame = capture1.QueryFrame();
        camimageBox.Image = ImageFrame; //line 2
        Image<Bgr, Byte> ImageFrame2 = capture2.QueryFrame();
        imageBox1.Image = ImageFrame2;
    }

    private void ReleaseData()
    {
        if (capture1 != null)
            capture1.Dispose();
    }

    private void button2_Click(object sender, EventArgs e)
    {

        Image<Bgr, byte>[] frames2 = new Image<Bgr, byte>[2];
        //List<Image<Bgr, Byte>> frames2 = new List<Image<Bgr, byte>>();
        frames2[0] = capture1.QueryFrame();
        frames2[1] = capture2.QueryFrame();

        camimageBox.Image = frames2[0];
        imageBox1.Image = frames2[1];

        try
        {
            using (Stitcher stitcher = new Stitcher(true))
            //using (Stitcher stitcher = new Stitcher(true))
            {
                Image<Bgr, Byte> result = stitcher.Stitch(frames2);
                imageBox2.Image = result;
            }
        }
        finally
        {
            foreach (Image<Bgr, Byte> img in frames2)
            {
                img.Dispose();
            }

        }
    }
} 
```

我正在使用 Nvidia NVS 450 GPU。我能够将各个摄像机读取为单独的流。我想知道是否可以使用 EMGUCV 将流组合在一起以产生一个流（更像是虚拟网络摄像头中的 2 个网络摄像头）。

我将不胜感激任何帮助。请注意我的英语！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T16:57:38.090

嗨，您需要在 2 个图像帧上找到对应点（如果相机位置是单独控制的，则为 SURF 类型的算法，或者如果相机具有固定的相对位置和角度，您可以使用棋盘图案并找到相应的角），然后使用这些点的坐标来计算单应矩阵。当您有一个矩阵时，您可以将其用作“WarpPerspective”函数的参数。它会扭曲您的图像，以便可以将其放在第二台相机的框架上。

希望有帮助。

# html - 使用 nanoc 对日文文本进行编码错误

> ID：11075315
> 
> 赞同：3
> 
> 时间：2012-06-17T22:34:20.837
> 
> 标签：html, character-encoding, nanoc

我无法在使用 nanoc 编译的网站上正确显示日文文本。我在 HTML 文件中有以下标记，在编译时不会通过任何过滤器或布局：

```
<a class="push_button blue" href="./ja">
  日本語
</a> 
```

我用 UTF-8 编码保存了文件并包含`<meta charset="utf-8">`在`head`HTML 文档中。

但是 nanoc 在输出文件夹中生成的最终标记是：

```
<a class="push_button blue" href="./ja">
  µùÑµ£¼Φ¬₧
</a> 
```

我不确定这个问题是特定于 nanoc 还是一般的文本编码问题，但有人可以建议这可能出错的地方吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T14:53:46.347

我正在尝试使用巴利语的 nanoc，这对我有帮助：

```
#lib/default.rb
Encoding.default_internal = Encoding::UTF_8
Encoding.default_external = Encoding::UTF_8 
```

# multithreading - 使用 TPL 如何设置最大线程池大小

> ID：11075320
> 
> 赞同：12
> 
> 时间：2012-06-17T22:36:04.393
> 
> 标签：multithreading, c#-4.0, task-parallel-library

我正在使用 TPL 使用函数向系统线程池添加新任务`Task.Factory.StartNew()`。唯一的问题是我添加了很多线程，我认为它为我的处理器创建了太多的线程来处理。有没有办法在这个线程池中设置最大线程数？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-09T07:43:06.800

默认值`TaskScheduler`（从 获得`TaskScheduler.Default`）是类型（内部类）`ThreadPoolTaskScheduler`。此实现使用`ThreadPool`该类来对任务进行排队（如果`Task`不是使用`TaskCreationOptions.LongRunning`- 在这种情况下为每个任务创建一个新线程）。

所以，如果你想限制`Task`通过创建的对象可用的`new Task(() => Console.WriteLine("In task"))`线程数，你可以像这样限制全局线程池中的可用线程：

```
// Limit threadpool size
int workerThreads, completionPortThreads;
ThreadPool.GetMaxThreads(out workerThreads, out completionPortThreads);
workerThreads = 32;
ThreadPool.SetMaxThreads(workerThreads, completionPortThreads); 
```

调用 to`ThreadPool.GetMaxThreads()`是为了避免缩小`completionPortThreads`.

请注意，这可能是个坏主意——因为所有没有指定调度程序的任务以及任何数量的其他类都使用默认的 ThreadPool，将大小设置得太低可能会导致副作用：饥饿等。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-17T23:49:53.853

通常 TPL 确定一个好的“默认”线程池大小。如果您确实需要更少的线程，请参阅[如何：创建限制并发程度的任务计划程序](http://msdn.microsoft.com/en-us/library/ee789351)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-19T07:58:10.137

您应该首先调查您的性能问题。有多种问题可能会导致利用率降低：

*   在没有 LongRunningTask 选项的情况下安排长时间运行的任务
*   试图打开两个以上到同一个网址的并发连接
*   阻止访问同一资源
*   尝试使用 Invoke() 从多个线程访问 UI 线程

在任何情况下，您都存在无法通过减少并发任务数量来解决的可伸缩性问题。您的程序将来可能会在两核、四核或八核机器上运行。限制计划任务的数量只会导致 CPU 资源的浪费。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-06T04:26:01.277

通常 TPL 调度程序应该很好地选择同时运行多少任务，但如果你真的想控制它[我的博客文章](http://blog.danskingdom.com/limit-the-number-of-c-tasks-that-run-in-parallel/)展示了如何使用 Tasks 和 Actions 来做到这一点，并提供了一个示例项目，你可以下载并运行以查看两者的运行情况。

当您调用自己的服务并且不想使服务器超载时，您可能希望明确限制并发运行的任务数。

对于您所描述的内容，听起来您可能会从确保对任务使用 async/await 以防止不必要的线程消耗中受益更多。这将取决于您是在执行任务中的 CPU 密集型工作还是 IO 密集型工作。如果它受 IO 限制，那么您可能会从使用 async/await 中受益匪浅。

无论如何，您询问了如何限制并发运行的任务数量，所以这里有一些代码来展示如何使用 Actions 和 Tasks 来做到这一点。

# 有行动

如果使用 Actions，您可以使用内置的 .Net Parallel.Invoke 函数。在这里，我们将其限制为最多并行运行 3 个线程。

```
var listOfActions = new List<Action>();
for (int i = 0; i < 10; i++)
{
    // Note that we create the Action here, but do not start it.
    listOfActions.Add(() => DoSomething());
}

var options = new ParallelOptions {MaxDegreeOfParallelism = 3};
Parallel.Invoke(options, listOfActions.ToArray()); 
```

# 有任务

由于您在这里使用任务，因此没有内置功能。但是，您可以使用我在博客上提供的那个。

```
 /// <summary>
    /// Starts the given tasks and waits for them to complete. This will run, at most, the specified number of tasks in parallel.
    /// <para>NOTE: If one of the given tasks has already been started, an exception will be thrown.</para>
    /// </summary>
    /// <param name="tasksToRun">The tasks to run.</param>
    /// <param name="maxTasksToRunInParallel">The maximum number of tasks to run in parallel.</param>
    /// <param name="cancellationToken">The cancellation token.</param>
    public static void StartAndWaitAllThrottled(IEnumerable<Task> tasksToRun, int maxTasksToRunInParallel, CancellationToken cancellationToken = new CancellationToken())
    {
        StartAndWaitAllThrottled(tasksToRun, maxTasksToRunInParallel, -1, cancellationToken);
    }

    /// <summary>
    /// Starts the given tasks and waits for them to complete. This will run, at most, the specified number of tasks in parallel.
    /// <para>NOTE: If one of the given tasks has already been started, an exception will be thrown.</para>
    /// </summary>
    /// <param name="tasksToRun">The tasks to run.</param>
    /// <param name="maxTasksToRunInParallel">The maximum number of tasks to run in parallel.</param>
    /// <param name="timeoutInMilliseconds">The maximum milliseconds we should allow the max tasks to run in parallel before allowing another task to start. Specify -1 to wait indefinitely.</param>
    /// <param name="cancellationToken">The cancellation token.</param>
    public static void StartAndWaitAllThrottled(IEnumerable<Task> tasksToRun, int maxTasksToRunInParallel, int timeoutInMilliseconds, CancellationToken cancellationToken = new CancellationToken())
    {
        // Convert to a list of tasks so that we don&#39;t enumerate over it multiple times needlessly.
        var tasks = tasksToRun.ToList();

        using (var throttler = new SemaphoreSlim(maxTasksToRunInParallel))
        {
            var postTaskTasks = new List<Task>();

            // Have each task notify the throttler when it completes so that it decrements the number of tasks currently running.
            tasks.ForEach(t => postTaskTasks.Add(t.ContinueWith(tsk => throttler.Release())));

            // Start running each task.
            foreach (var task in tasks)
            {
                // Increment the number of tasks currently running and wait if too many are running.
                throttler.Wait(timeoutInMilliseconds, cancellationToken);

                cancellationToken.ThrowIfCancellationRequested();
                task.Start();
            }

            // Wait for all of the provided tasks to complete.
            // We wait on the list of "post" tasks instead of the original tasks, otherwise there is a potential race condition where the throttler&#39;s using block is exited before some Tasks have had their "post" action completed, which references the throttler, resulting in an exception due to accessing a disposed object.
            Task.WaitAll(postTaskTasks.ToArray(), cancellationToken);
        }
    } 
```

然后创建任务列表并调用函数让它们运行，一次最多同时运行 3 个，你可以这样做：

```
var listOfTasks = new List<Task>();
for (int i = 0; i < 10; i++)
{
    var count = i;
    // Note that we create the Task here, but do not start it.
    listOfTasks.Add(new Task(() => Something()));
}
Tasks.StartAndWaitAllThrottled(listOfTasks, 3); 
```

# php - 获取 mail.php 中从 function.js 解析为 manage.html 的信息

> ID：11075321
> 
> 赞同：1
> 
> 时间：2012-06-17T22:36:07.477
> 
> 标签：php, javascript, html, email

您在 home.html 中选择产品，然后 JS 中的 cookie 和函数会将信息解析为 manage.html 然后在 manage.html 中您可以填写您的信息并将其发送到 mail.php 然后 mail.php 将查看客户是否已经在数据库中，如果没有，它将添加。然后它将订单添加到数据库中。

其他都行，只有最后一步添加订单到数据库是不行的，因为我不知道怎么把manage.html中的JS拿到mail.php。

我正在尝试使用类似 $_GET["something"]; 在 mail.php 中，从解析为 manage.html 的 JavaScript 获取信息。

COOKIES.JS 中的代码

```
function readCookies(name){
    var nameCookie = name + "=";
    var cookieArray = document.cookie.split(';');
    for (var i=0; i < cookieArray.length; i++){
        var thisCookie = cookieArray[i]
        while (thisCookie.charAt(0) ==' '){
            thisCookie = thisCookie.substring(1,thisCookie.length);
        }
        if (thisCookie.indexOf(nameCookie) == 0){
            return thisCookie.substring(nameCookie.length,thisCookie.length);
        }
    }
    return null;
} 
```

FUNCTION.JS 中的代码：

```
function cartShow(){
    NumberOrdered = 0;
    NumberOrdered = readCookies("NumberOrdered");
    tableRow = "";
    for (i = 1; i <= NumberOrdered; i++){
        NewOrder = "Order" + i;
        thisCookie = readCookies(NewOrder);
        fields = new Array();
        fields = thisCookie.split("|");
        tableRow += "<tr>"
            + "<td>" + fields[0] + "</td>"
            + "<td>" + fields[1] + "</td>"
            + "<td>" + fields[2] + "</td>"
            + "<td>" + fields[3] + "</td>"
            + "<td>" + fields[4] + "</td>"
            + "<td>" + fields[3] * fields[4] + "</td>"
            + "<td>" + "<img src=\"includes/images/delete.png\"/ OnClick=\"DeleteItem(" + i + ")\">" + "</td>"
            + "</tr>";
    }
    document.write(tableRow);
}

    function fillInForm(){

    NumberOrdered = 0;
    NumberOrdered = readCookies("NumberOrdered");

    for (i = 1; i <= NumberOrdered; i++){
        NewOrder = "Order" + i;
        thisCookie = "";
        thisCookie = readCookies(NewOrder);;
        fields = new Array();
        fields = thisCookie.split("|");
        document.write("<input type=hidden name=\"Product ID " + "&nbsp;" + i + "\" value=\"" + "&nbsp;" + fields[0] + "\">");
        document.write("<input type=hidden name=\"Brand " + "&nbsp;" + i + "\" value=\"" + "&nbsp;" + fields[1] + "\">");
        document.write("<input type=hidden name=\"Model " + "&nbsp;" + i + "\" value=\"" + "&nbsp;" + fields[2] + "\">");
        document.write("<input type=hidden name=\"Price " + "&nbsp;" + i + "\" value=\"" + "&nbsp;" + fields[3] + "\">");
        document.write("<input type=hidden name=\"Amount products " + "&nbsp;" + i + "\" value=\"" + "&nbsp;" + fields[4] + "\">");
        document.write("<input type=hidden name=\"Total cost " + "&nbsp;" + i + "\" value=\"" + "&nbsp;" + fields[3] * fields[4] + "\">");
        document.write("<input type=hidden name=\" " + "\" value=\"" + "\">");

    }
} 
```

然后用于在 MANAGE.HTML 上显示一些产品信息：

```
<form action="mail.php" enctype="text/plain" onSubmit="return checkForm(this);" method="get">
            <table border=1 summary="">
                <tr>
                    <td bgcolor=#cccccc><b><p name="id"> id</p></b></td>
                    <td bgcolor=#cccccc><b> brand</b></td>
                    <td bgcolor=#cccccc><b> model</b></td>
                    <td bgcolor=#cccccc><b> price</b></td>
                    <td bgcolor=#cccccc><b> number</b></td>
                    <td bgcolor=#cccccc><b> total</b></td>
                    <td bgcolor=#cccccc><b> delete</b></td>
                </tr>
                <script>
                    cartShow();
                    fillInForm();
                </script>
            </table>
<input type="image" src="includes/images/checkout.png" alt="" value="send" />
            </form> 
```

在此之后，我需要获取 MAIL.PHP 中的信息。

因为`<script>cartShow(); fillInForm();</script>`在manage.html中是显示表格中的信息，不知道怎么才能把它放到MAIL.PHP中。

我希望有人可以帮助我，我在过去的 5 个小时里一直在努力解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T23:03:52.470

在您的代码中，输入字段的“名称”属性类似于`"Brand&nbsp;1"`. 要在 PHP（作为数组）中更轻松地访问它们，您可以使用`"Brand[]"`.

mail.php 中的 A`var_dump($_GET)`对于调试实际发送的数据肯定很有用。

# php - 从 IFrame 获取 URL？

> ID：11075325
> 
> 赞同：3
> 
> 时间：2012-06-17T22:36:54.560
> 
> 标签：php, iframe, embed

我想让用户能够添加视频，但我遇到了其中一个网站的问题。

我将允许来自 Youtube、Vimeo、Vevo、Daily Motion 和 MTV 的视频。

问题在于 MTV。URL 总是不同的，所以我想知道是否有办法获取 IFrame/嵌入代码的源值。

示例：MTV 嵌入代码为：

```
<div style="background-color:#000000;width:520px;">
<div style="padding:4px;">
<iframe src="http://media.mtvnservices.com/embed/mgid:uma:videolist:mtv.com:1687162/cp~instance%3Dfullepisode%26autoPlay%3Dfalse%26series%3D2211%26seriesId%3D29240%26channelId%3D1%26id%3D1687162%26instance%3Dfullepisode%26uri%3Dmgid%3Auma%3Avideolist%3Amtv.com%3A1687162" width="512" height="288" frameborder="0"></iframe>
<p style="text-align:left;background-color:#FFFFFF;padding:4px;margin-top:4px;margin-bottom:0px;font-family:Arial, Helvetica, sans-serif;font-size:12px;">Get More: 
    <a href="http://www.mtv.com/shows/teen_mom/season_4/series.jhtml" style="color:#439CD8;" target="_blank">Teen Mom (Season 4)</a>, <a href="http://www.mtv.com/videos/home.jhtml" style="color:#439CD8;" target="_blank">Full Episodes</a></p></div></div> 
```

有没有办法从该完整字符串中获取 IFrame 源值？

我只是想 ：

```
http://media.mtvnservices.com/embed/mgid:uma:videolist:mtv.com:1687162/cp~instance%3Dfullepisode%26autoPlay%3Dfalse%26series%3D2211%26seriesId%3D29240%26channelId%3D1%26id%3D1687162%26instance%3Dfullepisode%26uri%3Dmgid%3Auma%3Avideolist%3Amtv.com%3A1687162 
```

任何帮助，将不胜感激。其他视频源很简单，因为我能够使用物理 URL 本身而不是嵌入代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T22:45:27.207

[这是有效的 HTML，因此您可以使用SimpleXML](http://php.net/manual/en/book.simplexml.php)轻松解析它：

```
$root = simplexml_load_string($embed_code);
$url = (string) $root->div->iframe['src']; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T22:47:52.673

要做到这一点很容易，您只需要这一行代码。

```
document.getElementById("myFrame").src 
```

# javascript - MVC 3，Razor View-覆盖默认表单帖子

> ID：11075331
> 
> 赞同：0
> 
> 时间：2012-06-17T22:38:16.430
> 
> 标签：javascript, c#, asp.net-mvc-3, razor, dom-events

我被一个小问题困住了。例如，我在一个已经发布到控制器操作方法的表单中有这个按钮 `Edit()`。现在我想要一个取消按钮，例如，它将发布到不同的操作方法`Edit(int id)`。我正在尝试覆盖`Html.Begin`表单中指定的默认帖子，因此我附加了一个 Javascript 事件，但该事件没有命中。我知道如果我使用动作链接，它就像一个魅力，但我担心让链接看起来像一个按钮。此外，为了在表单中使用不同元素进行物理放置，我无法将链接放入不同的表单中。真的很感激任何提示。

```
@using (Html.BeginForm("Edit", "RunLogEntry", FormMethod.Post, new { enctype = "multipart/form-data" })) { 

        <input id="create" class="art-button" type="submit" value="Save" /> 
        <input id="cancel" class="art-button" type="submit" value="Cancel" />       
        }

    $("#cancel").click(function(e) { 
    e.preventDefault(); //Keep form from posting 
    window.location.href = "REDIRECT URL";

    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T00:19:58.030

`cancel`将按钮的类型更改为`button`。这样，默认不会触发表单提交。您需要使用 JavaScript 来处理它。

```
@using (Html.BeginForm("Edit", "RunLogEntry", FormMethod.Post, new { enctype = "multipart/form-data" })) { 
    <input id="create" class="art-button" type="submit" value="Save" /> 
    <input id="cancel" class="art-button" type="button" value="Cancel" />       
} 
```

此外，在这种情况下，您不需要`e.preventDefault();`线路。

```
$("#cancel").click(function(e) { 
    window.location.href = "REDIRECT URL";
}); 
```

# javascript - 具有表单域的图像。如何

> ID：11075333
> 
> 赞同：-4
> 
> 时间：2012-06-17T22:38:44.727
> 
> 标签：javascript, html, css, forms

我在这个[网站上](http://brostyro.blogspot.com)看到了一张包含表单字段的图片。

我这是通过位置和 z-index 完成的，任何人都可以给我更多信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T22:43:01.373

使用[Firebug](https://addons.mozilla.org/en-US/firefox/addon/firebug/)，您可以轻松检查适用于每个元素的[确切 CSS 。](http://getfirebug.com/css)

# android - Android 可以让 App 控制 Android 系统吗

> ID：11075338
> 
> 赞同：0
> 
> 时间：2012-06-17T22:40:45.180
> 
> 标签：android

我想创建应用程序，使我的设备与多用户“每个用户的用户名和密码”用户可以共享设备，每个用户可以打开不同的应用程序“例如相机，联系人”并阻止另一个应用程序

该应用程序必须在系统启动时运行请求您的用户名和密码，然后

该应用程序将使您运行某些应用程序并阻止您使用某些应用程序

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T22:45:07.470

不。

这将需要对 android 进行彻底修改的自定义构建，这不是使用应用程序可以完成的事情（除了以最粗糙和最容易绕过的方式）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T22:46:04.507

显然，这对于现有的 Android ROM 是不可能的——这样的安全性必须由操作系统实现，并且没有任何应用程序具有这种级别的控制。

此外，如果您不知道这是不可能的，那么您不太可能具备实现操作系统必须做的其他事情的知识，例如内存/磁盘管理、安全性等......

如果你*真的*想尝试，你需要得到一个Android ROM并开始修改它。这将需要对硬件、处理器等有低层次的了解……并且需要对目标设备进行 root

# qt4 - 如何在 QTreeView 中隐藏展开/折叠控件？

> ID：11075340
> 
> 赞同：0
> 
> 时间：2012-06-17T22:40:53.330
> 
> 标签：qt4, qtreeview

当使用 QTreeView 显示多列列表时，其中行没有子级并且底层模型是 QAbstractTableModel，如何隐藏展开/折叠控件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T07:57:52.407

尝试覆盖模型的 hasChildren() 始终返回 false，rowCount() 始终返回 0，或两者兼而有之

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T22:54:52.507

在 PyQt4 中这是可行的，但我不确定这是否是正确的方法。

```
def rowCount(self, parent):
    if parent.row() < 0:
        return self.number_of_rows
    return 0 
```

# android - Android：对话框强制在创建时关闭

> ID：11075346
> 
> 赞同：0
> 
> 时间：2012-06-17T22:42:44.273
> 
> 标签：android, android-alertdialog

目标是制作一个显示在 menu_key 上的对话框，但它会保持强制关闭。[我查阅了有关 Dialogs](http://developer.android.com/guide/topics/ui/dialogs.html)的官方常见问题解答，但没有运气。一切都按照那里的解释完成了，但是一旦按下按钮它仍然会失败。这是对话框的创建：

```
static final int Choice_ID = 0;

    protected Dialog onCreateDialog(int id) {
        Dialog dialog = null;
        switch(id) {
        case Choice_ID:
            // do the work to define the pause Dialog
            AlertDialog.Builder builder = new AlertDialog.Builder(this);
            builder.setMessage("TEST DIALOG")
                   .setCancelable(true);

            AlertDialog alert = builder.create();
            break;

        //default:
            //dialog = null;
        }
        return dialog;
    } 
```

关于显示的部分如下所示：

```
public boolean onKeyDown(int keyCode, KeyEvent event) {

        if (keyCode == KeyEvent.KEYCODE_MENU) {
            showDialog(Choice_ID);

        };
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T22:44:26.217

这不应该导致强制关闭，但如果您尝试设置以下值，您可以看到菜单`dialog`：

```
dialog = builder.create(); 
```

如：

```
protected Dialog onCreateDialog(int id) {
    Dialog dialog = null;
    switch(id) {
    case Choice_ID:
        // do the work to define the pause Dialog
        AlertDialog.Builder builder = new AlertDialog.Builder(this);
        builder.setMessage("TEST DIALOG")
               .setCancelable(true);

        dialog = builder.create();
        break;

    //default:
        //dialog = null;
    }
    return dialog;
} 
```

# mysql - 索引列仍然需要 8 秒，不使用索引（mysql 5）

> ID：11075348
> 
> 赞同：0
> 
> 时间：2012-06-17T22:43:29.330
> 
> 标签：mysql, indexing

下面是一个查询的结果，该查询耗时近 8 秒，并且有可用但未使用的索引。只有 40,000 条记录。

```
mysql> SELECT * FROM (`phppos_customers`) 
   JOIN `phppos_people` ON `phppos_customers`.`person_id`=`phppos_people`.`person_id`
   WHERE `deleted` = 0 ORDER BY `last_name` asc LIMIT 20
    -> ;
** PERSONAL DATA REMOVED **

mysql> EXPLAIN SELECT * FROM (`phppos_customers`) JOIN `phppos_people` ON `phppos_customers`.`person_id`=`phppos_people`.`person_id` WHERE `deleted` = 0 ORDER BY `last_name` asc LIMIT 20
    -> ;
+----+-------------+------------------+--------+-------------------+---------+---------+--------------------------------+-------+---------------------------------+
| id | select_type | table            | type   | possible_keys     | key     | key_len | ref                            | rows  | Extra                           |
+----+-------------+------------------+--------+-------------------+---------+---------+--------------------------------+-------+---------------------------------+
|  1 | SIMPLE      | phppos_customers | ref    | person_id,deleted | deleted | 4       | const                          | 22545 | Using temporary; Using filesort |
|  1 | SIMPLE      | phppos_people    | eq_ref | PRIMARY           | PRIMARY | 4       | pos.phppos_customers.person_id |     1 |                                 |
+----+-------------+------------------+--------+-------------------+---------+---------+--------------------------------+-------+---------------------------------+
2 rows in set (0.00 sec)

mysql> describe phppos_customers;
+----------------+--------------+------+-----+---------+-------+
| Field          | Type         | Null | Key | Default | Extra |
+----------------+--------------+------+-----+---------+-------+
| person_id      | int(10)      | NO   | MUL | NULL    |       |
| account_number | varchar(255) | YES  | UNI | NULL    |       |
| company_name   | varchar(255) | NO   |     | NULL    |       |
| taxable        | int(1)       | NO   |     | 1       |       |
| deleted        | int(1)       | NO   | MUL | 0       |       |
+----------------+--------------+------+-----+---------+-------+
5 rows in set (0.01 sec)

mysql> describe phppos_people;
+--------------+--------------+------+-----+---------+----------------+
| Field        | Type         | Null | Key | Default | Extra          |
+--------------+--------------+------+-----+---------+----------------+
| first_name   | varchar(255) | NO   | MUL | NULL    |                |
| last_name    | varchar(255) | NO   | MUL | NULL    |                |
| phone_number | varchar(255) | NO   |     | NULL    |                |
| email        | varchar(255) | NO   | MUL | NULL    |                |
| address_1    | varchar(255) | NO   |     | NULL    |                |
| address_2    | varchar(255) | NO   |     | NULL    |                |
| city         | varchar(255) | NO   |     | NULL    |                |
| state        | varchar(255) | NO   |     | NULL    |                |
| zip          | varchar(255) | NO   |     | NULL    |                |
| country      | varchar(255) | NO   |     | NULL    |                |
| comments     | text         | NO   |     | NULL    |                |
| person_id    | int(10)      | NO   | PRI | NULL    | auto_increment |
+--------------+--------------+------+-----+---------+----------------+
12 rows in set (0.00 sec) 
```

编辑：显示创建表 phppos_customers；

```
| phppos_customers | CREATE TABLE `phppos_customers` (
  `person_id` int(10) NOT NULL,
  `account_number` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `company_name` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `taxable` int(1) NOT NULL DEFAULT '1',
  `deleted` int(1) NOT NULL DEFAULT '0',
  UNIQUE KEY `account_number` (`account_number`),
  KEY `person_id` (`person_id`),
  KEY `deleted` (`deleted`),
  CONSTRAINT `phppos_customers_ibfk_1` FOREIGN KEY (`person_id`) REFERENCES `phppos_people` (`person_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci | 
```

编辑：显示创建表 phppos_people；

```
| phppos_people | CREATE TABLE `phppos_people` (
  `first_name` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `last_name` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `phone_number` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `email` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `address_1` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `address_2` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `city` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `state` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `zip` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `country` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `comments` text COLLATE utf8_unicode_ci NOT NULL,
  `person_id` int(10) NOT NULL AUTO_INCREMENT,
  PRIMARY KEY (`person_id`),
  KEY `first_name` (`first_name`),
  KEY `last_name` (`last_name`),
  KEY `email` (`email`)
) ENGINE=InnoDB AUTO_INCREMENT=45870 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci | 
```

编辑显示索引：

```
mysql> show index from phppos_customers;
+------------------+------------+----------------+--------------+----------------+-----------+-------------+----------+--------+------+------------+---------+
| Table            | Non_unique | Key_name       | Seq_in_index | Column_name    | Collation | Cardinality | Sub_part | Packed | Null | Index_type | Comment |
+------------------+------------+----------------+--------------+----------------+-----------+-------------+----------+--------+------+------------+---------+
| phppos_customers |          0 | account_number |            1 | account_number | A         |           2 |     NULL | NULL   | YES  | BTREE      |         |
| phppos_customers |          1 | person_id      |            1 | person_id      | A         |       46217 |     NULL | NULL   |      | BTREE      |         |
| phppos_customers |          1 | deleted        |            1 | deleted        | A         |           2 |     NULL | NULL   |      | BTREE      |         |
+------------------+------------+----------------+--------------+----------------+-----------+-------------+----------+--------+------+------------+---------+
3 rows in set (0.00 sec)

mysql> show index from phppos_people;
+---------------+------------+------------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+
| Table         | Non_unique | Key_name   | Seq_in_index | Column_name | Collation | Cardinality | Sub_part | Packed | Null | Index_type | Comment |
+---------------+------------+------------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+
| phppos_people |          0 | PRIMARY    |            1 | person_id   | A         |       45699 |     NULL | NULL   |      | BTREE      |         |
| phppos_people |          1 | first_name |            1 | first_name  | A         |       45699 |     NULL | NULL   |      | BTREE      |         |
| phppos_people |          1 | last_name  |            1 | last_name   | A         |       45699 |     NULL | NULL   |      | BTREE      |         |
| phppos_people |          1 | email      |            1 | email       | A         |       45699 |     NULL | NULL   |      | BTREE      |         |
+---------------+------------+------------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+
4 rows in set (0.04 sec) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T01:11:01.670

查看解释输出，这是 mysql 现在所做的：

1.  从表开始`phppos_customers`并使用索引`deleted`来查找行`deleted = 0`
2.  对于每一行（剩下的 22k 行），从`phppos_people`同一行`person_id`（加入）中查找信息。
3.  将所有内容放在一个临时表中并在`last_name`没有任何索引的情况下进行排序以帮助排序，因为它是一个已经连接的结果集，并且所有行都必须排序才能找到前 20 个。

这看起来不是运行此查询的最佳方式，由于某种原因优化器选择了错误的连接顺序。

尝试使用 STRAIGHT_JOIN 强制不同的连接顺序：

```
SELECT * FROM `phppos_people` STRAIGHT_JOIN `phppos_customers` 
  ON `phppos_customers`.`person_id`=`phppos_people`.`person_id` 
WHERE `deleted` = 0 
ORDER BY `last_name` ASC LIMIT 20; 
```

这次mysql应该：

1.  从使用该列上`phppos_people`的索引进行排序开始。`last_name`
2.  对于每一行加入`phppos_customers`并检查是否`deleted = 0`.
3.  使用极限优化，先找到 20 后停止。

# android - 在 AndroidManifest 中使用 SDK

> ID：11075350
> 
> 赞同：0
> 
> 时间：2012-06-17T22:44:08.783
> 
> 标签：android, android-emulator

我对某事有点困惑。

我编写了一个应用程序并在具有以下规格的 LG Ally 上对其进行了测试：

 **安卓版本： *2.2.2*

内核版本： *2.6.32.9*

内部编号：*FRG83G*

**现在我正在尝试在具有以下规格的 HTC 上安装它（通过 adb install AppName.apk）：**

 ****安卓版本：*2.3.3*

内核版本：*2.6.35.10-gc0a661b HTC-kernel@and 18-2#1*

内部版本号：*4.24.651.1 CL61076*

 **我收到类似“错误解析包”的错误

这就是我感到困惑的地方。我想尝试重复这个问题。所以我创建了一个具有以下规格的模拟器 AVD：

 **安卓版本：*4.0.3*

内核版本： *2.6.29-g46b05b2 vchtchetkine@vc-irv #28*

内部版本号： *google_sdk-eng 4.0.4 MR1 302030 测试密钥*

 **而且....我可以使用不会在 HTC 上安装应用程序的 adb install 命令成功安装我的应用程序。

我不明白为什么我可以使用“adb install”将它放在 LG Ally 和模拟器上，但我在 HTC 上收到解析错误。

我以为我可能需要在 AndroidManifest 中，但是为什么没有它我可以在模拟器上安装呢？

我的清单如下（为简洁起见，我删除了活动定义）：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
  package="com.mj.molepatrol"
  android:versionCode="1"
  android:versionName="1.0">

  <application android:icon="@drawable/icon" android:label="@string/app_name">

      <uses-library android:name="com.google.android.maps" />

  </application>

      <uses-permission
      android:name="android.permission.READ_CALENDAR">
      </uses-permission>

  <uses-permission
       android:name="android.permission.WRITE_CALENDAR">
  </uses-permission>

  <uses-permission
       android:name="android.permission.EDIT_CALENDAR">
  </uses-permission> 

  <uses-permission android:name="android.permission.INTERNET" />

      <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />

      <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T02:20:43.927

尝试使用

`<uses-sdk android:minSdkVersion="10">`

它会解决你的问题。因为，我阅读了有关 uses-sdk 的文档，

**注意**：*如果你不声明这个 (uses-sdk android:minSdkVersion) 属性，系统假定默认值为“1”，这表明你的应用程序兼容所有版本的 Android。如果您的应用程序不兼容所有版本（例如，它使用 API 级别 3 中引入的 API）并且您没有声明正确的 minSdkVersion，那么当安装在 API 级别低于 3 的系统上时，应用程序将在运行期间崩溃尝试访问不可用的 API 时的运行时。因此，请务必在 minSdkVersion 属性中声明适当的 API 级别。*

来源：[Android 开发者网站](http://developer.android.com/guide/topics/manifest/uses-sdk-element.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T00:38:43.630

可能的问题是您正在使用设备不可用的功能。例如相机或 NFC。

你只有设置`minSdkVersion`和`targetSdkVersion`正确吗？

清单中会有一些 htc 不喜欢的内容，请发布您的**AndroidManifest.xml**文件，以便我们查看细节并为您解决************

# r - 测试成员资格并附加到 R?

> ID：11075354
> 
> 赞同：0
> 
> 时间：2012-06-17T22:44:44.793
> 
> 标签：r

我有两个向量，v1 和 v2。我想在 v2 中找到也在 v1 中的任何字符串，然后将匹配项附加到新向量中。例如，

```
v1 <- c("foo", "bar", "baz")  
v2 <- c("zoo", "zap", "foo")  

# the code below is not remotely correct
# hopefully it demonstrates what I want to do:

matches <- c()

for(i in v2) {
   if(i %in% v1) {
       matches.append(i) }} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T22:48:56.580

你的代码非常好。您只需要将调用修复为`append`：

```
matches <- c()

for(i in v2) {
    if(i %in% v1) {
        matches <- append(matches, i)
    }
} 
```

不过，像这样的东西更好：

```
matches <- v2[v2 %in% v1] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T22:51:24.257

以下可能是您想要的

```
matches<-v1[v1%in%v2] 
```

# c# - MouseWheel 事件不以 120 的增量滚动

> ID：11075355
> 
> 赞同：4
> 
> 时间：2012-06-17T22:44:47.487
> 
> 标签：c#, winforms, events, mouseevent

我已经将 MouseWheel 事件连接到我的一个控件，但我发现它`e.Delta`并不总是 120 的倍数，尤其是当我滚动它很多时。我得到像“131”和“-394”这样的数字。

为什么？我该如何解决？它导致我的程序出现问题，其中数字（除以 120）与实际的刻度数无关。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T22:58:22.550

显然你不能再依赖 delta 为 120 了。[这是关于同一问题的帖子](http://social.msdn.microsoft.com/forums/en-US/gametechnologiesgeneral/thread/1deb5f7e-95ee-40ac-84db-58d636f601c7/)。

[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645617.aspx)说：

> 增量设置为 120，以允许 Microsoft 或其他供应商构建更高分辨率的轮子（一个没有凹口的自由旋转轮子），以在每次旋转时发送更多消息，但每条消息中的值更小。要使用此功能，您可以添加传入的增量值，直到达到 WHEEL_DELTA（因此对于增量旋转，您会得到相同的响应），或者滚动部分行以响应更频繁的消息。您还可以选择滚动粒度并累积增量直到达到。

# javascript - 可以在文档头中使用不显眼的 Javascript 事件吗？

> ID：11075360
> 
> 赞同：2
> 
> 时间：2012-06-17T22:45:28.367
> 
> 标签：javascript, onclick, dom-events, unobtrusive-javascript

有一些关于纯 JS 的不显眼事件的示例。本主题中的大多数问题实际上都是用 jQuery 解决方案来回答的。我想知道这个简单的例子是如何工作的。正如我测试的那样，文档头中的这个功能非常适合点击整个文档

```
document.onclick=function(){alert("OK");} 
```

但这不适用于点击`<div id="test">CLICK</div>`

```
document.getElementById("test").onclick=function(){alert("OK");} 
```

如何捕获对不显眼的 JS 功能的元素的点击？

**更新的问题：**按照[ascii-lime](https://stackoverflow.com/users/772035/ascii-lime)的回答，如何在文档“head”中放置不显眼的 Javascript 事件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T22:48:21.980

[它工作得很好](http://jsfiddle.net/Paulpro/tSvAE/)。

确保您的脚本在您`<div>`存在之后运行，方法是将您的脚本放在 之后，或者在事件处理程序`<div>`中运行它。`window.onload`

或者，您可以将 附加`onclick`到文档（因为在脚本运行之前文档肯定存在），然后检测单击了哪个元素，[如下所示](http://jsfiddle.net/Paulpro/S6eqG/)：

```
document.onclick = function(e){
    e = e || window.event;
    if(e.target.id == 'test')
        alert('OK');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T23:06:04.760

我已经在 J​​SFiddle.net 中测试了您的代码，它似乎正在运行。

在这里查看它的实际效果：http: [//jsfiddle.net/kNFrz/](http://jsfiddle.net/kNFrz/)

我已经使用 Chrome 19.0 和 IE 9.0 进行了测试

# php - 上传图像，显示，然后写入 SQL Server

> ID：11075361
> 
> 赞同：0
> 
> 时间：2012-06-17T22:45:52.197
> 
> 标签：php, javascript, html, image

关于上传图片有很多问题，但我找不到一个简单直接的答案；

*   浏览按钮选择本地图像
*   上传并显示在网页上
*   写入 SQL Server 数据库

当然，这一系列事件一定会在网站上经常发生 - 有没有人得到一组示例代码，使用 HTML、JS 上传和显示，以及 PHP 写入 Dbase。

非常感谢任何帮助

菲尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-23T22:43:09.410

将图像 URI 上传到 SQL 数据库的技巧包括：

1.  从浏览器获取 URI 字符串（可能是 base64）
2.  将图像分解成碎片（无论何时）
3.  为每件附加一个序列号（必须对应于表中的一列）
4.  如果没有为您完成，请务必在请求之前对每个部分进行编码URI（以处理“保留”字符）
5.  这可以通过重复提交表单（使用本地存储）、使用 AJAX 甚至可能使用 websockets 来完成。

这是因为请求有时会乱序到达服务器！

然后，要从表中检索数据片段，SELECT pieces ... order by SEQ_NO，并通常用服务器端语言（例如 PHP、CF 等）连接字符串

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T22:55:50.290

我不知道你的意思，但这里有一些例子，

像这样的东西？

PHP代码，

```
<?php
if ($_FILES["file"]["error"] > 0)
  {
  echo "Error: " . $_FILES["file"]["error"] . "<br />";
  }
else
  {
  echo "Upload: " . $_FILES["file"]["name"] . "<br />";
  echo "Type: " . $_FILES["file"]["type"] . "<br />";
  echo "Size: " . ($_FILES["file"]["size"] / 1024) . " Kb<br />";
  echo "Stored in: " . $_FILES["file"]["tmp_name"];
  }
  // and here some rest of codes to put into the db
?> 
```

HTML 代码

```
<html>
<body>

<form action="" method="post"
enctype="multipart/form-data">
<label for="file">Filename:</label>
<input type="file" name="file" id="file" /> 
<br />
<input type="submit" name="submit" value="Submit" />
</form>

</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-23T03:20:46.317

看起来您没有得到回答，尽管这是针对其他有类似问题的人。我认为更容易将图像内容上传到服务器以及数据库中的图像名称和路径，以便于检索。此外，它不会占用您的数据库并简化您的代码，使其看起来更整洁，尤其是当您需要调用多个图像时，例如在使用幻灯片时。

# c - 尝试在 Ubuntu 中打开相对路径不起作用

> ID：11075364
> 
> 赞同：1
> 
> 时间：2012-06-17T22:46:26.690
> 
> 标签：c, file, ubuntu, io

我正在尝试在 Ubuntu 中打开相对路径，但是在打开第一个文件夹（称为`14`）后，代码无法打开里面的文件夹（称为`15`：

```
int pathsCtr; // number of folders in RelativeArray

char ** RelativeArray; // the folders in the relative path, currently: 

RelativeArray[0] = "14";

RelativeArray[1] = "15";
// some code before 

if (pathsCtr > 0 && flag == TRUE) // then we have a relative path
{
    int j = 0;
    while (j < pathsCtr)  // run until the last path and open every one
    {
        printf("\n%s\n" , RelativeArray[j]);
        dirp = opendir(RelativeArray[j]);  // open all directories until the last one
        if (dirp == NULL)
                return -1;
        j++; // proceed to the next directory
    }

    flag = FALSE; // turn off the flag , we'll never go near this again
} 
```

当`j == 0`这条线：`dirp = opendir(RelativeArray[j]);`有效而`dirp`无效时`NULL`。

但是当`j == 1`那条线`dirp = opendir(RelativeArray[j]);`失败并且`dirp`是`NULL`.

我究竟做错了什么？

**编辑：**

假设我在`RelativeArray`上面的代码之前做 malloc 。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-17T22:54:06.263

opendir() 打开一个目录以读取其内容，但它不会更改进程的工作目录。

要访问子目录，您必须通过其相对于当前工作目录的完整路径（或它的绝对路径）来指定它。

您可以通过使用适当的分隔符连接您的字符串来做到这一点。

由于您似乎没有对 opendir() 返回的目录流指针做任何事情，只是检查它是否为非空，因此这很可能不是您想要使用的函数。您可能想查看 chdir() 代替（man 2 chdir），但请考虑任何不良后果。

# css - 如何将所有元素向左浮动并清除一个元素的右侧以一起显示下面的几个元素？

> ID：11075365
> 
> 赞同：0
> 
> 时间：2012-06-17T22:46:28.000
> 
> 标签：css, html, css-float

我们有四个必须显示如下的 div：

```
|--------|------|
|Big Area|div 1 |
|        |------|-------|
|        |div 2 | div 3 |
|        |------|-------|
|        |
|        |
|        |
|        |
|--------| 
```

我试试这个：

```
<html><head>
<style>
#big_area {
    float: left;
    width: 200px;
    height: 200px;
}
#div_1 {
    float: left;
    clear: right;
}
#div_2 {
    float: left;
}
#div_3 {
    float: left;
}
</style>
</head>

<body>
<div id="big_area">big area</div>
<div id="div_1">div 1</div>
<div id="div_2">div 2</div>
<div id="div_3">div 3</div>
</body>
</html> 
```

但它不起作用。当我设置`clear:left`为`div 2`我的`div 2`并`div 3`移动到下面的场景结束时，`Big Area`结果不是真的
你有什么解决方案吗？

感谢任何人，感谢 Anmuson 的 wiki。我阅读了您的[Wiki](https://stackoverflow.com/tags/css-float/info)，它描述了我不能`float:right`在我的情况下使用。然后我试着用另一种方式对你说问题。

看到我有这么多不同宽度和高度`div`的 s（N 个s）。`div`我必须`div`连续显示这个。例如如下：

```
|-----|-----|-----|-----|-----|-----|-------|-----|
|Div 1|Div 2|Div 3|Div 4|Div 5| ... |Div N-1|Div N|
|-----|-----|-----|-----|-----|-----|-------|-----| 
```

我`float`全部显示`div`，`left`然后全部显示在一行中（此行自动中断与我的窗口宽度相关）。`div`但我当然需要在某些 s之前休息。例如我需要休息之后`Div 3`。
然后我尝试添加`clear:left`到我的`div 4`，它工作得很好，我`div 4`和之后的任何数字（div 5，...，N-1，N）都显示在新行中，但如果我`div 1`的高度很大（比如`Big Area`），我不会我`div`的其他人去了下面，`Big Area`但他们选择了`clear:left`解决方案。见以下结果：

```
|-------|-----|-----|
| Big   |Div 2|Div 3|
| Area  |-----|-----|
|(div 1)|
|       |
|-------|
|-----|-----|-----|-------|-----|
|Div 4|Div 5| ... |Div N-1|Div N|
|-----|-----|-----|-------|-----| 
```

因为我尝试在`<br />`之后添加标签`div 3`，然后在移动到新行之后添加`div 4`任何其他`div`s，但遗憾的是它显示如下：

```
|-------|-----|-----|
| Big   |Div 2|Div 3|<br />
| Area  |-----|-----|
|(div 1)|Div 4|
|       |-----|
|       |Div 5|
|       |-----|
|       | ... |
|       |-----|
|       | N-1 |
|       |-----|
|       |  N  |
|       |-----|
|       |
|-------| 
```

哦，我找到了答案..!!!!!! :D :) :D/
你可以在下面看到我的答案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T22:55:22.457

CSS：

```
#big_area {
     display: inline-block;
     float: left;
     width: 200px;
     height: 200px;
    } 

​#div_2, #div_3 {
    display: inline;
   }​ 
```

HTML：

```
<div id="big_area">big area</div>
<div id="div_1">div 1</div>
<div id="div_2">div 2</div>
<div id="div_3">div 3</div> 
```

[JSFiddle 链接](http://jsfiddle.net/89Pzh/)

除非你试图用它做更多你没有说的事情，否则这应该可以正常工作。在这种情况下清除是不必要的。除非您将元素指定为`inline`or ，否则默认情况下`inline-block`该行将在之后中断。`div_1`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T23:13:37.943

如果它是一个选项，如果将 div 1、2 和 3 放在容器中，这将是一个更简单的问题。除了 div 1 之外的所有 div 都可以向左浮动。

```
<div id="big_area">big area</div>
<div id="small_area">
    <div id="div_1">div 1</div>
    <div id="div_2">div 2</div>
    <div id="div_3">div 3</div>
</div> 
```

否则，我认为您将很难找到可靠的跨浏览器解决方案。如果 div 具有固定的高度和宽度，您可能可以使用绝对定位来管理某些东西，但这不是一个理想的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T09:36:41.897

我找到了答案：D
我`<br />`在`div 3`我的`javascript`代码中使用`document.createElement`如下添加：

```
var temp = document.createElement('br');
document.getElementById('all_of_div_container').appendChild(temp); 
```

我将我的代码更改为下面，它的工作非常好：

```
document.getElementById('all_of_div_container').innerHTML += "<br />"; 
```

这种方式将相同的代码添加到我的 HTML 但我不知道为什么在新行中`appendChild(temp)`显示所有`float:left`项目（正如我所说并在我的问题中绘制）......！
无论如何`innerHTML`工作得很好。

谢谢
玩得开心；）

# xml - 如何在 XML 文档中创建 xmlns:xsi 和 xsd 信息

> ID：11075366
> 
> 赞同：4
> 
> 时间：2012-06-17T22:46:29.377
> 
> 标签：xml, delphi, delphi-xe

我有一个 Delphi XE 应用程序，它读取经过验证的 XML 文件，对其进行修改然后保存。可以验证保存的版本。我使用 SML Spy 创建文件并对其进行验证。

现在我需要在内存中创建一个文档并保存它。问题是我无法弄清楚如何为文档生成 xmlns 和 xsd 信息属性，以便对其进行验证。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T13:48:30.373

实际上，尽管我在上面发表了评论，但我发现最简单的方法不是使用`DeclareNamespace`.

这是一个甚至没有`TXMLDocument`在表单上使用 a 的示例。只需将`xmldom`, `XMLIntf`, and添加`XMLDoc` 到您的实现中使用子句（`Xml.xmldom`, `Xml.XMLIntf`, and `Xml.XMLDoc`for XE2），然后就可以了：

```
procedure TForm1.Button1Click(Sender: TObject);
var
  TheDoc: IXmlDocument;
  iNode: IXmlNode;
  xmlText: DOMString;
begin
  TheDoc := NewXMLDocument;
  TheDoc.Version := '1.0';
  TheDoc.Encoding := 'UTF-16';
  iNode := TheDoc.AddChild('test:test_file');
  iNode.SetAttributeNS('xmlns:test', '', 'http://www.foo.com' );
  iNode.SetAttributeNS('xmlns:xsi', '', 'http://www.w3.org/2001/XMLSchema');
  TheDoc.SaveToXML(xmlText);
  Memo1.Lines.Text := xmlText;
end; 
```

以上结果在以下输出中`TMemo`：

```
<?xml version="1.0" encoding="UTF-16"?>
<test:test_file xmlns:test="http://www.foo.com" xmlns:xsi="http://www.w3.org/2001/XMLSchema"/> 
```

# asp.net-mvc - 在 MVC3 中渲染 HTML 部分块

> ID：11075367
> 
> 赞同：1
> 
> 时间：2012-06-17T22:46:54.447
> 
> 标签：asp.net-mvc, asp.net-mvc-3, partials

我正在尝试在我的母版页上插入一个自定义标题（保存在数据库中）。自定义标题会因用户而异。

我对如何将控制器附加到部分有点困惑（如果我什至可以这样做）。我希望完成的是从使用某些事件调用的特定控制器呈现代码块。

```
 public ActionResult GetHeader(Guid clientID)
    {
        string szHeader = GetTheme(ThemeType.Portal, JoloTheme.ThemeArea.Header, clientID);
        return Content(szHeader, "text/html");
    } 
```

是我创建的控制器，但我不确定如何将它放到我当前正在编写的页面的子部分（不在同一个控制器中）。

抱歉，如果这完全是胡说八道，恐怕还在学习MVC。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T22:57:54.183

您应该在 _Layout.cshtml 中使用[Html.Action()助手。](http://msdn.microsoft.com/en-us/library/ee703423.aspx)我认为您应该使用 Nullable Guid 作为参数，因为您将无法始终提供有效的 clientID。

```
public ActionResult GetHeader(Guid? clientID)
{
    string szHeader = GetTheme(ThemeType.Portal, JoloTheme.ThemeArea.Header, clientID);
    return Content(szHeader, "text/html");
} 
```

这是您应该如何在 _Layout.cshtml 中调用 Html.Action 助手的方法

```
@Html.Action("GetHeader", 
             "SomeController",
             new { clientID = IsLoggedIn ? ClientID : (Guid?)null } ) 
```

# java - 8向一致的移动速度在各个方向，如何从方向键获得移动的角度？

> ID：11075378
> 
> 赞同：3
> 
> 时间：2012-06-17T22:48:59.370
> 
> 标签：java

早上到地球各个表面上的人们。

问题：如何从箭头键获得方向角度。

序言：在基本的自上而下游戏中移动的标准方法是在更新方法中添加 x 和/或 y，具体取决于方向。

```
if (moveUp)     playerY -= delta * speed;
if (moveDown)   playerY += delta * speed;
if (moveLeft)   playerX -= delta * speed;
if (moveRight)  playerX += delta * speed; 
```

这对于 4 向运动来说是优雅的（我相信），因为无论按下什么组合键，运动的方向都是一致的。例如，按 up-down-left 将向左移动，因为 up 和 down 抵消了。但是在对角线移动时，步数会太大。如果速度为 20，则向左移动每秒将向左移动 20，向上每秒将向上移动 20。但是向左上方移动每秒会移动 28.24 多一点。

这里的解决方案是使用 cos 和 sin 得到新的 x 和 y，一旦你知道了角度，这很容易：

```
playerX += Math.cos(Math.toRadians(angle)) * delta * speed;
playerY -= Math.sin(Math.toRadians(angle)) * delta * speed; //y is inverted 
```

但是，至少对我来说，这提出了一个新问题：角度是什么？在我的 KeyListener 中，我目前正在为每个箭头键设置/清除布尔值。我可以使用大量的 if 语句：

```
if (moveUp)     angle = 90;
if (moveDown)   angle = 270;
if (moveRight)  angle = 0;
if (moveLeft)   angle = 180;
if (moveUp && moveLeft)     angle = 135;
if (moveUp && moveRight)    angle = 45;
if (moveDown && moveLeft)   angle = 225;
if (moveDown && moveRight)  angle = 315;
//...etc... for all combinations 
```

对于我的生活，我找不到一种性感的方法来从按下方向键的方向获得移动角度。我觉得这应该是一个常见的问题，游戏设计 101，但激烈的谷歌搜索并没有让我找到任何东西（因为很难用语言表达这个问题，这让我变得更加困难）。在所有示例中，它们要么只是保留了对角线速度更快的功能（就像我的第一个片段一样），要么提前知道了角度（即向鼠标移动），或者是 2D 横向滚动条。

肯定有一种性感的数学方式（或其他东西）可以用几行来解决吗？还是我完全错误地接近这个？

编辑：答案后代码（由下面的 korona 发布）：

```
double x=0, y=0;
if (moveLeft) x -= 1;
if (moveRight) x += 1;
if (moveUp) y -= 1;
if (moveDown) y += 1;

double length = Math.sqrt(x * x + y * y);
if (length != 0) {
    x /= length;
    y /= length;

    x *= delta*speed;
    y *= delta*speed;

    playerX += x;
    playerY += y;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-17T23:05:31.113

使用二维向量。像这样的东西：

```
movement = new Vector2D();

if (moveLeft) movement.x += 1;
if (moveRight) movement.x -= 1;
if (moveUp) movement.y -= 1;
if (moveDown) movement.y += 1;

movement.normalize();   // Caps the movement vector at a length of one, even when it's at an odd angle
movement *= desiredMovementSpeed * frameDeltaTime;  // Plug in suitable values here
// FIXME: Do some collision detection here, probably
playerX += movement.x;
playerY += movement.y; 
```

我假设有一个合适的 2D 矢量类可供您使用。如果不是，则对向量进行归一化就像将其所有分量除以其长度一样简单，如下所示：

```
length = sqrt(this.x * this.x + this.y * this.y);
this.x /= length;
this.y /= length; 
```

# mysql - MYSQL - 周期表正常“Year-Month-00”

> ID：11075381
> 
> 赞同：0
> 
> 时间：2012-06-17T22:49:55.527
> 
> 标签：mysql

我目前正在尝试将以下信息转换为可用的日期字段。

我有以下内容：

```
Date      |Period|Product

0000-00-00|   31 |Skies

0000-00-00|  17  |Shoes

0000-00-00|   4  |Etc... 
```

期间是自四月财政年度以来的月数。

```
 Apri|May|June|July|Augu|Sept|Octo|Nove|Dece|Janu|Febu|Marc
2012   |1   |2  |3   |4   |5   |6   |7   |8   |9   |10  |11  |12    (Ends March 2013)

2011   |13  |14 |15  |16  |17  |18  |19  |20  |21  |22  |23  |24    (Ends March 2012)

2010   |25  |26 |27  |28  |29  |30  |31  |32  |33  |34  |35  |36    (Ends March 2011) 
```

我正在寻找的结果是

```
Date      |Period|Product

2010-10-00|   31 |Skies

2011-08-00|  17  |Shoes

2012-07-00|   4  |Etc... 
```

我已经尝试过 DateDiff，但是由于我正在使用的 Period 表是倒退的（也是我见过的最糟糕的事情） DateDiff 没有做我需要的事情。

它没有做我需要的原因是第 24 期（2011-03）之后的月份是第 1 期（2011-04）所以它不是连续的。它只是愚蠢的。同样适用于期间 36 (2010-03) 下一个期间是 25 (2010-04)

任何能解决这个问题的人都会立即赢得我的尊重。天哪，这很难解决。

在 MYSQL 中工作，但乐于接受任何解决方案。谢谢

（感谢为我编辑这些东西的人，我找不到如何给文本一个像样的布局。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T23:02:02.393

我不确定我是否正确理解了您的问题，但您可以简单地使用 mysql 的[DATE_ADD](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-add)函数将月份添加到日期中（并使用[其他日期/时间函数](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)来操作它们）

所以 2012 年 4 月加上 4 给你八月，这就是你要找的，对吧？

```
SELECT DATE_ADD(CONCAT(2012,'-04-01'),INTERVAL 4 MONTH),
MONTHNAME(DATE_ADD(CONCAT(2012,'-04-01'),INTERVAL 4 MONTH));

+--------------------------------------------------+-------------------------------------------------------------+
| DATE_ADD(CONCAT(2012,'-04-01'),INTERVAL 4 MONTH) | MONTHNAME(DATE_ADD(CONCAT(2012,'-04-01'),INTERVAL 4 MONTH)) |
+--------------------------------------------------+-------------------------------------------------------------+
| 2012-08-01                                       | August                                                      |
  +--------------------------------------------------+-------------------------------------------------------------+
1 row in set (0.00 sec) 
```

编辑：我的印象是，您要计算的可能是当年 4 月给出的数据 - 您表中的月份，这将使用[DATE_SUB](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-sub)完成。如您所见，您可以使用 YEAR() 和 NOW() 函数来获取当前年份。

```
SELECT DATE_SUB(CONCAT(YEAR(NOW()),'-04-01'),INTERVAL 4 MONTH),
MONTHNAME(DATE_SUB(CONCAT(YEAR(NOW()),'-04-01'),INTERVAL 4 MONTH));

+---------------------------------------------------------+--------------------------------------------------------------------+
| DATE_SUB(CONCAT(YEAR(NOW()),'-04-01'),INTERVAL 4 MONTH) | MONTHNAME(DATE_SUB(CONCAT(YEAR(NOW()),'-04-01'),INTERVAL 4 MONTH)) |
+---------------------------------------------------------+--------------------------------------------------------------------+
| 2011-12-01                                              | December                                                           |
+---------------------------------------------------------+--------------------------------------------------------------------+
1 row in set (0.02 sec) 
```

计算两个日期之间的月份是用[PERIOD_DIFF](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_period-diff)完成的，但它需要一个特定的格式，只有 1 位数字的月份需要 0 前缀。

```
SELECT 
PERIOD_DIFF(CONCAT(YEAR(NOW()),'04'),    -- year + '04' for YYYYMM
            CONCAT(YEAR('2011-08-01'),   -- year YYYY
                   IF(MONTH('2011-08-01') < 10, -- got 2 digits for month?
                       CONCAT('0',MONTH('2011-08-01')), -- no, prepend '0' 
                       MONTH('2011-08-01')) -- yes just return month
             )
) AS difference;

+------------+
| difference |
+------------+
|          8 |
+------------+ 
```

在我让我的大脑休息之后终于发现，它是那些森林 - 树的东西之一。;)

```
SET @period=15;  

SELECT DATE_ADD(  -- use date_add so we can go back and forwards in time
  CONCAT(YEAR(NOW()) - FLOOR(IF(@period < 10,0,IF(@period < 12,-1,@period/12 - IF(@period%12 = 0,2,0))) ) ,'-03-01'), -- start from march this year so +1  equals april, subtract 1 year per 12 months
INTERVAL
 IF(@period%12 < 10,@period%12,@period%12 - 12) -- ignore the full years, if rest < 10 add (APR - DEC) else subtract (rest - 12 to get negative number)
MONTH) 
AS result; 
```

我保证，这将始终一举返回正确的日期。:)

# html - 分析网站的音调

> ID：11075384
> 
> 赞同：1
> 
> 时间：2012-06-17T22:50:07.143
> 
> 标签：html, audio, web, analyzer

首先，您好！我是新手......基本上一切。

有没有办法使用任何网络编码（可能是 HTML5？）来分析歌曲的音调，特别是钢琴曲，并在每次特定音调或音符被击中时给出某种代码，然后可以进一步用于其他东西？

如果没有，你知道有什么其他方法可以完成这样的事情吗？我希望一个网页能够通过不同的音符分析一首歌曲，然后在播放不同的音符时发生一些事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T05:22:19.717

由于您是编码世界的新手，我想建议您参加[Udacity](http://www.udacity.com/)提供的这些免费在线课程，这是编码世界顶级教师之一的一项令人敬畏的倡议，旨在使教育民主化。

> Udacity 是一所数字大学，其使命是教育民主化

课程材料非常好，您可以按照自己的进度学习科目并免费获得许多其他好处，当您通过科目的期末考试时，它们也会为您提供签名证书。

我与 Udacity 没有任何关系。:) 即使在获得计算机科学学位之后，我自己也在学习一些课程。

现在回答你的问题：

HTML 是一种将结构化数据显示到网页的标记语言。它通过表单获取数据输入并将其传递到后端系统并显示它从后端系统接收到的数据。

任何网站或网络应用程序都有两个主要部分：

```
1\. Frontend
2\. Backend 
```

前端是您在网页上看到的内容以及您与网页交互的方式。后端实际上负责提供数据供前端显示。没有彼此，他们俩都什么都不是。

因此，您尝试实现的目标只能在后端完成，但输入将通过 HTML 进行。只有 HTML 是不够的。你需要一种强大的编程语言来在后端做这些事情。

我想告诉你这个项目非常先进，需要多年的编程经验（还有 CS 学位，但如果你有足够的决心，这不是强制性的）来创建这样的项目。如果它是一个商业理念，你最好让软件和网络开发领域的某人或某家公司为你构建它。

如果您有任何问题，请简单评论并问我。

欢迎来到软件和 SO 的世界。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T23:05:37.853

我自己最近才开始学习编码，但现在知道 html 和 php。我只是想我会说，对于一个对一切都不熟悉的人来说，做你想做的事绝对是不可能的。HTML 是一种标记语言，它只是组织页面上的所有内容。

要实现您想要的，您需要大量的编码知识。音调识别是您在 cubase 等极其昂贵的制作软件上看到的那种东西。我希望做这样的任务很简单，因为它对我建立的网站非常方便。然而事实并非如此。如果你真的确定了这个想法，谷歌搜索类似音调识别软件的东西，虽然我怀疑会有任何合适的东西可以很容易地实现到网站中。

我的建议是要么花大量时间学习和掌握许多前端和后端编码平台，要么花很多钱雇人为你做这件事。

如果您想以更简单但仍然复杂的方式完成相同的任务，我会放弃音调识别的概念。如果您有一个屏幕键盘，其中每个键都是表单提交按钮，那么您可以使用 if(isset([''])) 函数将一些 PHP 代码附加到每个键。当某个键被按下时，代码会输出一些东西，或者在 PHP 中回显。这需要广泛的 HTML、CSS、PHP 和 jquery 知识。可能还有一些其他人也加入了他们的行列。

您可能无法自己执行该操作，但如果您想让某人为您执行此操作，这是一种更容易且可行的方法。

# hibernate - 谷歌应用引擎——java.lang.IllegalAccessError

> ID：11075389
> 
> 赞同：0
> 
> 时间：2012-06-17T22:50:40.950
> 
> 标签：hibernate, google-app-engine, struts2

我正在将 Struts/Hibernate 应用程序转换为 Google App Engine。当我尝试启动我的应用程序的首页时，我收到以下错误消息。谁能帮我这个？

```
java.lang.IllegalAccessError
    at net.sf.cglib.core.ClassEmitter.setTarget(ClassEmitter.java:47)
    at net.sf.cglib.core.ClassEmitter.<init>(ClassEmitter.java:39)
    at net.sf.cglib.core.KeyFactory$Generator.generateClass(KeyFactory.java:165)
    at net.sf.cglib.core.DefaultGeneratorStrategy.generate(DefaultGeneratorStrategy.java:25)
    at net.sf.cglib.core.AbstractClassGenerator.create(AbstractClassGenerator.java:215)
    at net.sf.cglib.core.KeyFactory$Generator.create(KeyFactory.java:145)
    at net.sf.cglib.core.KeyFactory.create(KeyFactory.java:117)
    at net.sf.cglib.core.KeyFactory.create(KeyFactory.java:108)
    at net.sf.cglib.core.KeyFactory.create(KeyFactory.java:104)
    at org.hibernate.impl.SessionFactoryImpl.<clinit>(SessionFactoryImpl.java:321)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1005)
    at com.configuration.ConfigurationListener.contextInitialized(ConfigurationListener.java:19)
    at org.mortbay.jetty.handler.ContextHandler.startContext(ContextHandler.java:548)
    at org.mortbay.jetty.servlet.Context.startContext(Context.java:136)
    at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1250)
    at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517)
    at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:467)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
    at org.mortbay.jetty.Server.doStart(Server.java:224)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at com.google.appengine.tools.development.JettyContainerService.startContainer(JettyContainerService.java:196)
    at com.google.appengine.tools.development.AbstractContainerService.startup(AbstractContainerService.java:239)
    at com.google.appengine.tools.development.DevAppServerImpl.start(DevAppServerImpl.java:146)
    at com.google.appengine.tools.development.DevAppServerMain$StartAction.apply(DevAppServerMain.java:189)
    at com.google.appengine.tools.util.Parser$ParseResult.applyArgs(Parser.java:48)
    at com.google.appengine.tools.development.DevAppServerMain.<init>(DevAppServerMain.java:128)
    at com.google.appengine.tools.development.DevAppServerMain.main(DevAppServerMain.java:104) 
```

上述错误消息中有一个对名为 ConfigurationListener 的类的引用。这是我提供的一个类，它为应用程序获取数据库会话。这是发生错误的方法，我已经标记了哪一行是第19行。

```
public void contextInitialized(ServletContextEvent contextEvent) {
            /* The following line is line 19\. */
    this.sessionFactory = this.configuration.configure().buildSessionFactory();
    this.context = contextEvent.getServletContext();
    this.context.setAttribute("sessionFactory", sessionFactory);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T10:03:36.957

请注意，GAE 下不直接支持 Hibernate：

[http://code.google.com/p/googleappengine/wiki/WillItPlayInJava](http://code.google.com/p/googleappengine/wiki/WillItPlayInJava)

此外，如果这与您[之前的问题有关](https://stackoverflow.com/questions/11067831/google-app-engine-nosuchmethoderror)，重要的是要指出，简单地将字节码操作库替换为较旧的库，虽然它在*某些情况下**可能*有效，但几乎可以肯定是一个坏主意。库依赖项的任意混合和匹配，特别是在这样一个基础级别上运行的依赖项，不是一个好方法，IMO。

# javascript - 如何切换两个 div 并更改 div 的高度以捕获主 div 的全尺寸

> ID：11075392
> 
> 赞同：0
> 
> 时间：2012-06-17T22:50:53.880
> 
> 标签：javascript, css, html, jquery

我有两个 child`DIV`包含在 parent`DIV`中。

正常情况下，第一个孩子是父母身高的30%，第二个孩子是70%

单击某个图标时，第二个子项应展开以填充父项高度的 100%。

如何用 jQuery 实现这个？我可以用[`toggleClass`](http://api.jquery.com/toggleClass/)这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T22:56:57.810

像这样的东西：

```
$('.leftContainer .smallPicture').click(function(){
    $('.rightContainer').css('height', $('.mainDiv').height()+'px')
}); 
```

我使用了像素高度，因为使用百分比高度有时会有点问题。

# macos - 运行 Yaws 时加载 setuid_drv 失败：“使用错误版本的 erl_driver.h 编译的驱动程序”

> ID：11075393
> 
> 赞同：0
> 
> 时间：2012-06-17T22:51:01.930
> 
> 标签：macos, erlang, yaws

我从主分支安装了最新版本的 Erlang 和最新版本的 Yaws。但是，当我尝试运行 yaws 时，我收到“使用错误版本的 erl_driver.h 编译的驱动程序”的错误。我该如何解决这个问题？Yaws 不是在最新的 Erlang 版本上运行吗？我在 Mac OS X 10.6 上运行它。

```
jonas$ yaws
Erlang R15B01 (erts-5.9.1) [source] [smp:2:2] [async-threads:0] [hipe] [kernel-poll:true]

Eshell V5.9.1  (abort with ^G)
1> 
=ERROR REPORT==== 18-Jun-2012::00:43:08 ===
Failed to load setuid_drv (from "/usr/local/lib/yaws/priv/lib") : "Driver compiled with incorrect version of erl_driver.h"
=ERROR REPORT==== 18-Jun-2012::00:43:08 ===
FATAL {'EXIT',normal}

=INFO REPORT==== 18-Jun-2012::00:43:08 ===
    application: yaws
    exited: {shutdown,{yaws_app,start,[normal,[]]}}
    type: permanent
{"Kernel pid terminated",application_controller,"{application_start_failure,yaws,{shutdown,{yaws_app,start,[normal,[]]}}}"}

Crash dump was written to: erl_crash.dump
Kernel pid terminated (application_controller) ({application_start_failure,yaws,{shutdown,{yaws_app,start,[normal,[]]}}}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T05:14:16.363

更新：这个答案不再是一个答案。它在这里只是为了证明自己的无效性。

* * *

Yaws的最新版本~~（发行版）~~应该可以在 OSX 上与最新的 Erlang 发行版一起愉快地运行。~~[请尝试从http://yaws.hyber.org/download/](http://yaws.hyber.org/download/)~~~~下载 Yaws 的源代码，而不是从 GitHub 的 master 分支下载。Yaws 的主分支可能有点实验性。~~

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T14:05:51.020

我在 Erlang R15B01 下的 OS X 10.7.4 上成功地从 github master 运行了最新版本的 Yaws——它确实有效：

```
$ uname -a
Darwin bcc 11.4.0 Darwin Kernel Version 11.4.0: Mon Apr  9 19:32:15 PDT 2012; root:xnu-1699.26.8~1/RELEASE_X86_64 x86_64
$ yaws -i
Erlang R15B01 (erts-5.9.1) [source] [smp:8:8] [async-threads:0] [hipe] [kernel-poll:true]

Eshell V5.9.1  (abort with ^G)
1> 
=INFO REPORT==== 18-Jun-2012::10:01:33 ===
Yaws: Using config file /usr/local/etc/yaws/yaws.conf 
```

您是否有机会在过去使用 Erlang 的早期版本（R14Bxx 或更早版本）编译您的 Yaws 源代码，然后尝试在 R15B01 下再次构建而不先执行“make clean”？Erlang 驱动程序接口在版本 14 和 15 之间发生了变化，这可能解释了这个错误。

# c++ - 结构数组

> ID：11075394
> 
> 赞同：-1
> 
> 时间：2012-06-17T22:51:22.157
> 
> 标签：c++, arrays, struct

我只想将这些值硬编码到一个表中。当我尝试使用二维数组时，我遇到了处理字符和整数的问题。当我做一个结构时，到目前为止我有这个，但它没有将信息分成列，我不知道如何格式化它。（我一开始只做了 3 行，如果我让它们工作，其余的都是一样的）

```
#include <iostream>
#include <string>
#include <iomanip>

using namespace std;

typedef struct table
{
    std::string game;
    int year;
    float rating;
    int num_voters;
}t;

void processTab(t*);
int main()
{
t tabl[2] = {0,0};
int i;
processTab(tabl);
for(i=0; i<2; i++)
{
         std::cout << "Game: " << setw(20) << tabl[i].game;
         std::cout << "\tYear: " << setw(4) << tabl[i].year;
         std::cout << "\tRating: " << fixed << setprecision(2) << tabl[i].rating;
         std::cout << "\tVoters: " << setw(6) << tabl[i].num_voters;
 }

system("pause");
return 0;
}
void processTab(t*tab)
{
 (tab[0].game, "twilight struggles");
 tab[0].year = 2005;
 tab[0].rating = 8.226;
 tab[0].num_voters = 10690;

 (tab[1].game, "Agricloa");
 tab[1].year = 2007;
 tab[1].rating = 8.17;
 tab[1].num_voters = 23738;

(tab[2].game, "Puerto Rico");
 tab[2].year = 2002;
 tab[2].rating = 8.163;
 tab[2].num_voters = 27433;

 }

Table Data:
Game (0)            Year (1)  Rating (2)  Num Voters (3)
Twilight Struggle   2005      8.226       10690
Agricola            2007      8.17        23738
Puerto Rico         2002      8.163       27433
Through the Ages    2006      8.153       8137
Power Grid          2004      8.02        21655
Le Havre            2008      7.972       9258
Eclipse             2011      7.968       3194
Brass               2007      7.911       5814
Dominion: Intrigue  2009      7.895       10889
Caylus              2005      7.878       13878 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T23:00:19.257

我认为你正在寻找的是[`<iomanip>`](http://www.cplusplus.com/reference/iostream/manipulators/)

```
#include <iomanip>

std::cout << "Game: " << setw(20) << tabl[i].game;
std::cout << "\tYear: " << setw(4) << tabl[i].year;
std::cout << "\tRating: " << fixed << setprecision(3) << tabl[i].rating;
std::cout << "\tVoters: " << setw(6) << tabl[i].num_voters;
std::cout << std::end; 
```

注意：
[`setw`](http://www.cplusplus.com/reference/iostream/manipulators/setw/)在写出东西时添加填充，所以它总是至少有一定的宽度
[`setprecision`](http://www.cplusplus.com/reference/iostream/manipulators/setprecision/) 指定要显示多少小数位
[`fixed`](http://www.cplusplus.com/reference/iostream/manipulators/fixed/)使浮点*从不*使用科学计数法

您的`game`成员是一个字母，您正试图为其分配一个字符串。不要`strcpy`在 C++ 中使用，`std::string`而是使用类。

```
#include <string>
struct table
{
    std::string game;
    int year;
    double rating;
    int num_voters;
}; 
```

避免`using namespace std;`，当您处理具有许多名称空间的复杂代码时，这几个字母是避免混淆的小代价。
避免`endl`：它刷新缓慢的缓冲区。如果您只想要换行符，请使用`'\n'`.
此外，您可以使用新的初始化语法来初始化您的列表：

```
std::vector<table> tbal = { 
                 {"twilight struggles  ", 2005, 8.226, 10690},
                 {"Agricola            ", 2007, 8.17 , 23738},
                 {"Puerto Rico         ", 2002, 8.163, 27433}
               }; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T23:19:05.847

简短的回答：使用`std::vector`，而不是原始数组。

以下是尽可能接近您的原始代码，为您介绍最少数量的新功能：

```
#include <assert.h>         // assert
#include <iostream>         // std::cout, std::endl
#include <stddef.h>         // ptrdiff_t
#include <string>           // std::string
#include <utility>          // std::begin, std::end
#include <vector>           // std::vector
using namespace std;

typedef ptrdiff_t       Size;

template< class Container >
Size countOf( Container& c ) { return end( c ) - begin( c ); }

struct Game
{
    string  game;
    int     year;
    double  rating;
    int     num_voters;
};

void initialize( vector<Game>& games )
{
    assert( countOf( games ) == 0 );
    games.resize( 3 );

    games[0].game = "twilight struggles";
    games[0].year = 2005;
    games[0].rating = 8.226;
    games[0].num_voters = 10690;

    games[1].game = "Agricloa";
    games[1].year = 2007;
    games[1].rating = 8.17;
    games[1].num_voters = 23738;

    games[2].game = "Puerto Rico";
    games[2].year = 2002;
    games[2].rating = 8.163;
    games[2].num_voters = 27433;
}

int main()
{
    vector<Game> games;

    initialize( games );
    for( int i = 0; i < countOf( games ); ++i )
    {
        cout << i << endl;
        cout <<"\tGame: " << games[i].game << endl;
        cout<<"\tYear: " << games[i].year << endl;
        cout<<"\trating: " << games[i].rating << endl;
        cout<<"\tnum voters: " << games[i].num_voters << endl;
    }
} 
```

有一些方法可以更直接地声明数据，包括大括号初始值设定项；查看您的 C++ 教科书。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-17T23:11:59.987

首先，您需要正确定义您的`table`（顺便说一下 a 的坏名`struct`）。您正在尝试使用`game`来存储字符串，但已将其定义为仅单个`char`. 您可能想将其更改为 a `std::string`。

然后您可能希望在`operator<<`重载中进行格式化以将引用`table`作为类型。@MooingDuck 已经很好地涵盖了格式本身，因此主要取决于您如何打包：

```
std::ostream &operator<<(std::ostream &os, table const &t) { 
    os << "Game: " << setw(20) << t.game;
    os << "\tYear: " << setw(4) << t.year;
    os << "\tRating: " << fixed << setprecision(2) << t.rating;
    return os << "\tVoters: " << setw(6) << t.num_voters;    
} 
```

除此之外，您几乎肯定想`tabl`从数组更改为`std::vector<table>`：

```
std::vector<tabl> tabl; 
```

那么处理表就变成了：

```
std::copy(tabl.begin(), tabl.end(), std::ostream_iterator<table>(std::cout, "\n")); 
```

另一个小细节：您似乎有两个完全不同/独立的功能，都名为`processTab`. 您可能希望至少重命名其中一个。只是瞥了一眼他们，我可能会`initializeTable`按这个顺序打电话给一个或什么。

# iphone - 如何在播放/暂停按钮图像之间进行检查

> ID：11075397
> 
> 赞同：1
> 
> 时间：2012-06-17T22:51:43.430
> 
> 标签：iphone

假设我有 image1 as`Play Icon.png`和 image2 as `pause.png`。

我想做这样的事情，如果按钮图像是 image1 执行此操作，如果按钮图像是 image2 执行此操作。

```
[playpauseButton setImage:[UIImage imageNamed:@"Play Icon.png"] forState:UIControlStateNormal];

[playpauseButton setImage:[UIImage imageNamed:@"pause.png"] forState:UIControlStateSelected]; 
```

我怎么知道它是否`Play Icon.png or pause.png`。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T22:54:30.370

您无法轻松确定 " `UIButton`" 中的图像是什么，但由于您是按状态设置该图像，因此只需检查按钮的[*state*属性](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIControl_Class/Reference/Reference.html#//apple_ref/occ/instp/UIControl/state)。

然后你就会知道你正在使用哪个图像。

它可以很简单：

```
if( playpauseButton.state == UIControlStateSelected )
    NSLog( @"Here I am using pause.png"); 
```

或者，如果您在操作中执行此操作：

```
- (IBAction) buttonPushed: (id) sender
{
    UIButton * theButton = (UIButton *) sender;
    if(theButton)
    {
        if( theButton.state == UIControlStateSelected )
            NSLog( @"Here I am using pause.png");
    }
} 
```

# kml - 如何将locations.kml 与sitemap.xml 一起使用

> ID：11075398
> 
> 赞同：1
> 
> 时间：2012-06-17T22:51:45.870
> 
> 标签：kml, xml-sitemap

每当我的 Google Places 位置排名高时，我想确保网站排名尽可能高。

我已经看到了有关创建 locations.kml 文件并将其放在我网站的根目录中的参考资料。然后在 sitemap.xml 文件中创建行以指向此 .kml 文件。

我从地理位置页面上的这个声明中得到这个，谷歌不再支持站点地图协议的地理扩展。我们建议您通过将基于地理位置的 URL 包含在常规网站地图中来告知 Google。

有一个指向网站地图页面的链接 [http://support.google.com/webmasters/bin/answer.py?hl=en&answer=183668](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=183668)

我正在寻找如何在 sitemap.xml 文件中包含地理位置信息的示例。

有人可以指点我一个例子，以便我知道如何编写参考代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T15:55:55.773

我认为关键是您不要在站点地图中使用任何特定格式。您确保在站点地图中正常包含所有本地相关页面。（即您没有在站点地图中包含任何地理位置）

GoogleBot 将使用其常规方法来确定页面是否应本地定位。

（我认为谷歌发现站点地图协议已被滥用或误解，所以他们不需要它来告诉他们太多关于页面的信息。它只是一种查找页面的方法，可能需要很长时间才能发现虽然是传统的手段。）

# ruby-on-rails-3 - Enki 部署到 Heroku - 资产预编译问题

> ID：11075399
> 
> 赞同：1
> 
> 时间：2012-06-17T22:52:01.277
> 
> 标签：ruby-on-rails-3, heroku, asset-pipeline

我克隆了这个[https://github.com/xaviershay/enki](https://github.com/xaviershay/enki)并做了以下修改：

我的 Gemfile 现在看起来像这样：

```
source 'https://rubygems.org'

gem 'rails', '3.2.6'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
end

group :production do
  gem 'pg'
end

group :development do
  gem 'mysql2', '~> 0.3.11'
end

platforms :jruby do
  gem 'activerecord-jdbcsqlite3-adapter'
  gem 'trinidad'
  gem 'jruby-openssl'
end

gem 'jquery-rails'

# Use unicorn as the web server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
# gem 'ruby-debug'

# Bundle the extra gems:
gem 'RedCloth', '~> 4.2.9', :require => 'redcloth'
gem 'ruby-openid', :require => 'openid'
gem 'rack-openid', :require => 'rack/openid'
gem 'aaronh-chronic', :require => 'chronic' # Fixes for 1.9.2
gem 'coderay'
gem 'lesstile'
gem 'formtastic'
gem 'will_paginate', '~> 3.0.2'
gem 'exception_notification', '~> 2.5.2'
gem 'open_id_authentication'

# Bundle gems for the local environment. Make sure to
# put test-only gems in this group so their generators
# and rake tasks are available in development mode:
group :test do
  gem 'database_cleaner'
  gem 'cucumber-rails',    :require => false
  gem 'cucumber-websteps', :require => false
  gem 'factory_girl'
  gem 'rspec'
  gem 'nokogiri', '~> 1.5.0'
  gem 'webrat'
end

group :development, :test do
  gem 'rspec-rails'
end 
```

我还修改了 database.yml 文件，如下所示：

```
development:
  adapter: mysql2
  database: myblog_development
  username: root
  password: 
  host: localhost
test:
  adapter: mysql2
  database: myblog_test
  username: root
  password: 
  host: localhost 
```

我可以在本地查看该站点，但是在尝试部署到 Heroku 时，我得到以下信息：

```
-----> Writing config/database.yml to read from DATABASE_URL
-----> Preparing app for Rails asset pipeline
       Running: rake assets:precompile
       rake aborted!
       could not connect to server: Connection refused
       Is the server running on host "127.0.0.1" and accepting
       TCP/IP connections on port 5432?
       Tasks: TOP => environment
       (See full trace by running task with --trace)
       Precompiling assets failed, enabling runtime asset compilation
       Injecting rails31_enable_runtime_asset_compilation
       Please see this article for troubleshooting help:
       http://devcenter.heroku.com/articles/rails31_heroku_cedar#troubleshooting 
```

我尝试按照他们在最后一个站点中的建议进行操作，但仍然遇到相同的错误。我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T21:23:58.977

在您的 application.rb 文件中，添加以下行：

config.assets.initialize_on_precompile = false

# php - PHP：如何获取具有多个数字的字符串的数值？

> ID：11075402
> 
> 赞同：1
> 
> 时间：2012-06-17T22:52:43.490
> 
> 标签：php, string, type-conversion

假设在 PHP 中我有一个字符串变量： `"This takes between 5 and 7 days"`

我需要以整数形式存储一些有关所需时间的合理信息。

如果结果是 5，我很满意。

我尝试剥离非数字字符，但最终得到 57 个。

如何以更好的方式做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T22:56:03.033

使用[`preg_match`](http://prototype.php.net/manual/en/function.preg-match.php)正则表达式匹配第一个数字组：

```
$subject = 'This takes between 5 and 7 days';
if (preg_match('/\d+/', $subject, $matches)) {
    echo 'First number is: ' . $matches[0];
} else {
    echo 'No number found';
} 
```

使用[`preg_match_all`](http://prototype.php.net/manual/en/function.preg-match-all.php)您可以匹配所有数字组（`5`在`7`此示例中）：

```
$subject = 'This takes between 5 and 7 days';
if (preg_match_all('/\d+/', $subject, $matches)) {
    echo 'Matches found:<br />';
    print_r($matches);
} else {
    echo 'No number found';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-03T07:09:38.660

如果您想提取价格，即 7.50 欧元或 50 美元等，这是正则表达式为我提供的解决方案。

```
 preg_match('/\d+\.?\d*/',$price_str,$matches); 
 echo $matches[0]; 
```

结果 7.50 或 50

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-17T22:57:24.967

如果您想适当地量化数字，我会建议以下内容：

```
<?php
$subject = "This takes between 5 and 7 days";

$dayspattern = '/\d+(\.\d+)? ?days?/';
$hourspattern = '/\d+(\.\d+)? ?hours?/'

$hours = -1;

if (preg_match($dayspattern , $subject, $matches) > 0)
{
  preg_match($dayspattern, $matches[0], $days);
  $hours = $days * 24;
} elseif (preg_match($dayspattern , $subject, $matches) > 0) {
  preg_match($hourspattern, $matches[0], $hours);
  $hours = $hours;
}

?> 
```

您需要考虑：

*   当没有找到数字或数字以文本形式给出时会发生什么。
*   当有人说“1天5小时”时会发生什么

希望这可以为您提供足够的信息，让您自己完成剩下的工作。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-17T23:08:00.163

通过将字符串拆分为数组，将主题拆分为单词。然后，不知何故，我不知道，从数组中取出单词。也许通过循环遍历 try-catch 块内数组的所有子元素，并尝试将每个元素更改为一种`int`类型：

```
for($i=0;$i<$words->length;$i++){
    try{
        $tempNum = (int)$words[$i];
    }catch($ex){
        $words->remove($i);
    }
} 
```

或类似的东西。我不知道任何数组方法，但你明白我的意思。无论如何，`$words`数组现在只包含数字。

# wordpress - Wordpress Facebook 插件：评论太宽

> ID：11075403
> 
> 赞同：0
> 
> 时间：2012-06-17T22:52:47.173
> 
> 标签：wordpress, facebook-comments

在我的设置中，我添加了宽度：420px，但该框继续显示为宽（500px）：示例：[http ://www.amable.be/2012/06/de-onweerstaan​​bare-schoonheid-van-corsica/](http://www.amable.be/2012/06/de-onweerstaanbare-schoonheid-van-corsica/)

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T01:53:41.723

插件中有一个错误。有关如何修复它的说明，请参阅[Wordpress 支持站点上的此线程](http://wordpress.org/support/topic/plugin-facebook-comment-width-not-adjusting)，或者您可以等待插件的下一次更新推送。

# pointers - 从 (type *int) 到 int 类型的类型转换

> ID：11075408
> 
> 赞同：1
> 
> 时间：2012-06-17T22:54:06.577
> 
> 标签：pointers, int, type-conversion, go

我想用 Go 语言将指针转换`*int`为其实际值`int`。

你怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T23:01:52.203

只需使用`*`运算符。例如：

```
var i  int = 10  // `i` is an integer, with value 10
var p *int = &i  // `p` is a pointer to an integer, its value is a memory address
var n  int = *p  // `n` is again an integer, with value 10 
```

一旦你掌握了正在发生的事情，上面的代码可以像这样更惯用（和更简单）的方式编写，假设我们在一个函数中：

```
i := 10
p := &i
n := *p 
```

# iphone - 开始移动带有触摸的精灵，obj - c 中的投射和参数？

> ID：11075409
> 
> 赞同：1
> 
> 时间：2012-06-17T22:54:18.513
> 
> 标签：iphone, objective-c, cocos2d-iphone, ccsprite

这几天我一直在看一本关于 ios5 的 cocos2d 框架的书，并开发了一个小游戏，该书会引导您完成。要控制游戏中的精灵，您可以使用加速度计：

```
-(void) accelerometer:(UIAccelerometer *)accelerometer didAccelerate:(UIAcceleration *)acceleration
{

    float deceleration = 0.4f;
    float sensitivity = 6.0f;
    float maxVelocity = 100;

    // adjust velocity based on current accelerometer acceleration
    playerVelocity.x = playerVelocity.x * deceleration + acceleration.x * sensitivity;

    // we must limit the maximum velocity of the player sprite, in both directions (positive & negative values)
    if (playerVelocity.x > maxVelocity)
    {
        playerVelocity.x = maxVelocity;
    }
    else if (playerVelocity.x < -maxVelocity)
    {
        playerVelocity.x = -maxVelocity;
    }

    // Alternatively, the above if/else if block can be rewritten using fminf and fmaxf more neatly like so:
    // playerVelocity.x = fmaxf(fminf(playerVelocity.x, maxVelocity), -maxVelocity);
} 
```

现在我想知道是否可以更改此代码以允许精灵仍沿 x 轴加速/减速，但使用触摸输入而不是加速度计，并且按住触摸的时间越长越快？因此，向右触摸会将精灵缓慢移动到该点，如果释放触摸，它将停止移动到该点。按住触摸的时间越长，精灵移动的越快。

框架中有什么东西可以让我实现一个旋转机制，让我的精灵旋转到触摸所在的位置，所以它看起来像是面向被触摸的点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T03:09:49.483

好吧，afaik 没有方法可以确定触摸的角度，然后相应地旋转精灵，但是如果你有精灵的 x 和 y 坐标以及触摸，你可以很容易地自己计算它。

```
CGPoint spriteCenter; // this should represent the center position of the sprite
CGPoint touchPoint; //location of touch

float distanceX = touchPoint.x - spriteCenter.x;
float distanceY = touchPoint.y - spriteCenter.y;

float angle = atan2f(distanceY,distanceX); // returns angle in radians

// do whatever you need to with the angle 
```

一旦你有了角度，你就可以设置精灵的旋转。

# mysql - 超过 10000 列的表的最佳结构

> ID：11075412
> 
> 赞同：2
> 
> 时间：2012-06-17T22:54:47.217
> 
> 标签：mysql, sql, database, normalization

我正在将一组数据挖掘算法应用于由一组客户以及大量描述性属性组成的数据集，这些属性总结了他们过去行为的各个方面。有 10,000 多个属性，每个属性都存储为以客户 ID 作为主键的表中的一列。由于几个原因，有必要预先计算这些属性，而不是动态计算它们。我通常会尝试选择具有指定属性集的客户。这些算法可以将任意数量的这些属性组合在一个 SELECT 语句中，并连接所需的表。所有表的行数都相同（每个客户一个）。

我想知道构造这些属性表的最佳方法是什么。将属性分组到 20-30 列的表中更好吗，平均需要更多的连接，但每个 SELECT 的列更少，或者拥有具有最大列数的表以最小化连接数，但可能所有 10K 列都在一次？

我还想过使用一个巨大的 3 列 customerID-attribute-value 表并将所有信息存储在那里，但是构建一个“选择所有具有我需要的这些属性类型查询的客户”会更加困难。

我使用的是 MySQL 5.0+，但我认为这是一个一般的 SQL 问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T23:03:03.107

根据我的经验，使用具有 10,000 列的表是非常非常非常糟糕的主意。如果将来这个数字会增加怎么办？

如果有很多属性，则不应使用水平缩放表（具有大量列）。您应该创建一个新的表**属性**并将所有属性值放入其中。然后将此表以多对一关系连接到主条目表

也许第二种方法是使用无 SQL（如 MongoDB）系统

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T00:49:20.043

正如@odiszapc 所说，您必须使用元模型结构，例如：

```
CREATE TABLE customer(ID INT NOT NULL PRIMARY KEY, NAME VARCHAR(64));
CREATE TABLE customer_attribute(ID INT NOT NULL, ID_CUSTOMER INT NOT NULL, NAME VARCHAR(64), VALUE VARCHAR(1024)); 
```

返回给定客户的基本信息：

```
SELECT * FROM customers WHERE name='John'; 
```

符合特定属性的回头客：

```
SELECT c.* 
FROM customer c 
    INNER JOIN attribute a1 ON a1.id_customer = c.id 
                           AND a1.name = 'address' 
                           AND a1.value = '1078, c/ los gatos madrileños'
    INNER JOIN attribute a2 ON a2.id_customer = c.id 
                           AND a2.name = 'age' 
                           AND a2.value = '27' 
```

您的生成器应该即时生成内部连接。

表上的正确索引应该允许所有这些引擎运行得相对较快（如果我们假设每个客户有 10k 个属性和 10k 个客户，这实际上是一个挑战......）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-17T23:31:17.243

10,000 列太多了。如果您不使用`*`. 我认为您可以将属性缩小到最有用和最有意义的属性，消除其他属性

# asp.net - 在没有按钮的页面加载后执行 sqldatasource

> ID：11075418
> 
> 赞同：0
> 
> 时间：2012-06-17T22:55:33.190
> 
> 标签：asp.net, vb.net, sqldatasource, onload-event, prerender

因此，在我的 IssueRequest.aspx 页面上，我有一个表格，客户可以填写该表格，向我的公司发出工作请求。但是，我需要确保他们填写了他们的帐户信息，在创建帐户时默认情况下每个字段都等于“”。

我有以下字段

```
Customer_ID // Auto Number
Customer__First_Name // text field size 50
Customer__Last_Name  // text field size 50
Customer_Address     // text field size 50
Customer_City        // text field size 50
Customer_State       // text field size 50
Customer_Zip         // text field size 50
Customer_Phone       // text field size 50
Customer_Email       // text field size 50 
```

现在我创建了一个名为 CustomerInformationValidation 的 sqldatasource，它从我想在加载或预渲染完成时运行的会话（在登录时设置）获取用户 ID，但我似乎无法让它工作。

```
<asp:SqlDataSource ID="CustomerInformationValidation"  runat="server" 
        ConnectionString="<%$ ConnectionStrings:HandyManTaylorConnectionString %>" 
        ProviderName="<%$ ConnectionStrings:HandyManTaylorConnectionString.ProviderName %>" 
        SelectCommand="SELECT [Customer__First_Name] AS Customer_First_Name, [Customer_Last_Name], [Customer_Address], [Customer_City], [Customer_State], [Customer_Zip], [Customer_Phone], [Customer_Email] FROM [Customer] WHERE ([Customer_ID] = ?)">
        <SelectParameters>
            <asp:SessionParameter Name="Customer_ID" SessionField="userID" Type="Int32" />
        </SelectParameters>
    </asp:SqlDataSource> 
```

谁能告诉我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T23:27:42.100

目前还不清楚您到底要做什么。我假设您想用数据库中的数据填充表单字段。如果是这样，您可以在 SqlDataSource 的 Selected 事件上执行此操作

```
<asp:SqlDataSource OnSelected="CustomerInformationValidation_Selected" .... 
```

在后面的代码中处理此事件并加载数据

```
protected void CustomerInformationValidation_Selected(Object source, SqlDataSourceStatusEventArgs e) 
{

} 
```

为什么要使用 SqlDataSource？当您将其绑定到数据控件时，它有一个好处。如果您没有绑定它，您可能想要使用非常简单的标准 ADO.NET 选择。

# java - FragmentActivity 强制转换以避免静态引用

> ID：11075422
> 
> 赞同：0
> 
> 时间：2012-06-17T22:55:49.137
> 
> 标签：java, android, casting, static

我是 Java 和 Android 的初学者，我认为这更像是一个 Java 问题，因为它体现在 Android 中。

我正在使用 Android 支持包 (android.support.v4.app) 并在我的名为 MyActivity 的基类中使用 DialogFragment 创建一个对话框，该基类扩展了 FragmentActivity。

我的问题涉及从 DialogFragment 中的按钮的 OnClickListener 方法中的 OnClick 方法调用 MyActivity 类中的函数。

这是工作; 我只是想明白为什么。

如果我尝试直接引用该函数 (MyActivity.someFunction())，我会得到“无法从 MyActivity 类型对非静态方法 someFunction() 进行静态引用”。任何人都有一个很好的方法来解释静态与非静态以及为什么这个特定的参考是静态的？我认为这是因为 DialogFragment 被声明为静态的。声明子类/方法静态与非静态的目的是什么。也就是说，如果方法属于类而不是实例化对象，为什么重要？

另外，为什么以及如何在这个例子中绕过静态引用？

谢谢！

```
public static class myDialogFragment extends DialogFragment {
    static myDialogFragment newInstance(int whichDialog) {
        myDialogFragment f = new myDialogFragment();
        return f;
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View v = inflater.inflate(R.layout.invasive_edit_dialog, container, true);

        Button btn_apply_coords = (Button)v.findViewById(R.id.btn_get_coord);
        btn_apply_coords.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                    // This does not work ("Cannot make a static reference to the non-static method someFunction() from the type MyActivity").
                MyActivity.someFunction();

                    // This does not work ("The method someFunction() is undefined for the type FragmentActivity"). Eclipse suggests casting (a few lines down).
                getActivity().someFunction();

                    // This works; casted version of code above.  What is this code doing?
                ((MyActivity) getActivity()).someFunction();

                    // this works also
                MyActivity thisActivity =  (MyActivity) getActivity();
                thisActivity.someFunction();
            }
        });

        return v;
    }
}

public void someFunction() {
    // do something
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T23:00:37.963

```
 // This does not work ("Cannot make a static reference to the non-static method someFunction() from the type MyActivity").
            MyActivity.someFunction(); 
```

这不起作用，因为您试图从类（`MyActivity`）调用此方法，而不是从该类的对象（例如（`MyActivity activity`））

```
 // This works; casted version of code above.  What is this code doing?
            ((MyActivity) getActivity()).someFunction(); 
```

这确实有效，因为正如我想的那样，方法`getActivity()`返回了被强制转换为的对象，然后在该对象上调用了`MyActivity`非静态方法 from`MyActivity`

总而言之 - 如果没有可以调用它们的对象，就不能调用非静态方法。

# c# - C# 像 C++ 中一样拆分类

> ID：11075428
> 
> 赞同：0
> 
> 时间：2012-06-17T22:56:34.923
> 
> 标签：c#, class, ide

有没有可能像 C++ 那样为两个文件拆分类？我的意思是在头文件中定义并在 C++ 中的 cpp 中声明。我已经阅读了一些关于部分课程的内容，但这是我需要的吗？如果不可能，你能给我一些建议如何管理它，因为它对我来说看起来很丑陋和凌乱。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T22:59:50.273

你为什么需要这个？只是因为它看起来很乱？

如果您使用 Visual Studio，您可以使用`Ctrl+M+O`. 我用它来获得代码的概述。

部分类旨在将生成的代码从您的代码中分离出来。你不应该用它来清理。如果您的代码确实看起来很混乱，请尝试重构它，例如编写辅助方法，将一些逻辑放在单独的类中。

C++ 有头文件只是为了保持与 C 的向后兼容性。它有很多问题，例如，你编写了一个模板类并在定义中更改了签名，但忘记在声明中更改它，结果，你会得到一些奇怪错误。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-17T23:00:58.337

响应您的编辑：如果您担心大型类文件，您可以折叠代码部分。

您可以使用`partial`关键字。

一些文件.cs

```
public partial class MyClass
{
} 
```

其他文件.cs

```
public partial class MyClass
{
} 
```

请参阅[MSDN](http://msdn.microsoft.com/en-us/library/wa80x488%28v=vs.80%29.aspx)了解更多信息和限制，因为有一些适用的规则。

# php - 使用 PHP 的 AWS SQS SNS 协议

> ID：11075431
> 
> 赞同：1
> 
> 时间：2012-06-17T22:56:49.430
> 
> 标签：php, amazon-web-services, amazon-sqs

以下代码允许我`SNS`使用（队列）发送，`SQS`但我似乎无法选择亚马逊管理控制台中的协议 ![在此处输入图像描述](../Images/cb6854cab45b1a8b055a2af896aed6ab.png)

* 键都是随机字符串

```
<?php
require_once('sdk-1.5.6.2/sdk.class.php');  
$AWS_KEY = "6VVWTU4JDAAKHYB1C3ZN";
$AWS_SECRET_KEY = "GMSCUD8C0QA1QLV9Y3RP2IAKDIZSCHRGKEJSXZ4F";

//create a new SQS queue and grab the queue URL
$sqs = new AmazonSQS(array( "key" => $AWS_KEY, "secret" => $AWS_SECRET_KEY ));
$response = $sqs->create_queue('test-topic-queue');
$queue_url = (string) $response->body->CreateQueueResult->QueueUrl;
$queue_arn = 'arn:aws:sqs:us-east-1:ENCQ8gqrAcXv:test-topic-queue';

//create a new SNS topic and grab the topic ARN.
$sns = new AmazonSNS(array( "key" => $AWS_KEY, "secret" => $AWS_SECRET_KEY ));
$response = $sns->create_topic('test-topic');
$topic_arn = (string) $response->body->CreateTopicResult->TopicArn;

//Then give the SNS topic the permission to send messages to the SQS queue. ** allow all principals. SNS doesn't send from your account ID -- it has its own account ID that it sends from.
$queue_url = 'https://sqs.us-east-1.amazonaws.com/ENCQ8gqrAcXv/test-topic-queue';
$queue_arn = 'arn:aws:sqs:us-east-1:ENCQ8gqrAcXv:test-topic-queue';
$topic_arn = 'arn:aws:sns:us-east-1:ENCQ8gqrAcXv:test-topic';

$policy = new CFPolicy($sqs, array(
        'Version' => '2008-10-17',
        'Id' => 'sampleId',
        'Statement' => array(
                array(
                        'Resource' => $queue_arn,
                        'Effect' => 'Allow',
                        'Sid' => 'rule1',
                        'Action' => 'sqs:*',
                        'Condition' => array(
                                'StringEquals' => array(
                                        'aws:SourceArn' => $topic_arn
                                )
                        ),
                        'Principal' => array(
                                'AWS' => '*'
                        )
                )
        )
));

$response = $sqs->set_queue_attributes($queue_url, array(
        array('Name' => 'Policy', 'Value' => $policy->get_json())
));

//then subscribe the SQS queue to the SNS topic and grab the subscription ARN.
$queue_arn = 'arn:aws:sqs:us-east-1:ENCQ8gqrAcXv:test-topic-queue';
$topic_arn = 'arn:aws:sns:us-east-1:ENCQ8gqrAcXv:test-topic';
$response = $sns->subscribe($topic_arn, 'sqs', $queue_arn);

// normally here is where you would choose the protocol but this example sends this to SQS
// subscribe ( $topic_arn, $protocol, $endpoint, $opt ) 

$subscription_arn = (string) $response->body->SubscribeResult->SubscriptionArn;
//view the list of subscriptions to verify.
$topic_arn = 'arn:aws:sns:us-east-1:ENCQ8gqrAcXv:test-topic';

$q = new CFBatchRequest(200);
for ($i = 0; $i < 1000; $i++)
{
        $sns->batch($q)->publish($topic_arn, 'Hello world! ' . time());
}
$response = $sns->batch($q)->send();

//receive messages from the queue.
$queue_url = 'https://sqs.us-east-1.amazonaws.com/ENCQ8gqrAcXv/test-topic-queue';
$response = $sqs->receive_message($queue_url, array(
        'MaxNumberOfMessages' => 10,
));
print_r($response); 

// delete SQS queue
$queue_url = 'https://sqs.us-east-1.amazonaws.com/ENCQ8gqrAcXv/test-topic-queue'; 
$response = $sqs->delete_queue($queue_url);

?> 
```

**问题：**我会在哪里选择协议？
[此链接](http://docs.amazonwebservices.com/AWSSDKforPHP/latest/index.html#i=AmazonSNS)说这`subscribe()`是`protocol`定义的位置，但上面的示例将其发送到`SQS`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T08:48:32.723

您可以使用 SNS 推送到短信号码，也可以使用 SNS 推送到 SQS 队列。但 SQS 无法推送*任何内容*——包括推送到 SMS 号码。

也许您对基础架构组件感到困惑？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T04:09:11.237

订阅方法具有以下签名

```
subscribe ( $topic_arn, $protocol, $endpoint, $opt ) 
```

如果您要使用 SMS 作为协议进行订阅，请执行以下操作

```
$response = $sns->subscribe($topic_arn, 'sms', $phone_no); 
```

`$phone_no(String)`启用短信的设备的电话号码在哪里

当前支持的不同协议是 http、https、email、email-json、sms 和 sqs，具体取决于您必须更改`$endpoint`传递给 subscribe 方法的参数的协议。

查看[订阅方法的完整文档](http://docs.amazonwebservices.com/AWSSDKforPHP/latest/index.html#m=AmazonSNS/subscribe)

# c# - 完全关闭辅助窗口

> ID：11075435
> 
> 赞同：1
> 
> 时间：2012-06-17T22:57:00.850
> 
> 标签：c#, wpf, windows, user-interface

似乎第二个窗口没有关闭。这就是我正在做的事情......

*   我创建了一个新的 WPF 项目。

*   我在主窗口中放置了一个按钮。

*   我将以下代码放在按钮中以启动第二个窗口并隐藏主窗口。

    ```
    private void button1_Click(object sender, RoutedEventArgs e)
    {
        var projectWindow = new NewProjectInfo();
        this.Hide();
        projectWindow.Show();
    } 
    ```

- 新窗口是一个空白窗口，上面什么都没有。

- 在新窗口的“关闭”事件中，我将代码再次显示主窗口。

```
 private void Window_Closed(object sender, EventArgs e)
    {
        var mainWindow = new MainWindow();
        mainWindow.Show();
    } 
```

*   如果我运行程序并关闭主窗口**而不打开第二个窗口**，程序就会像我希望的那样结束。

*   如果我单击主窗口上的按钮，将我带到第二个窗口，然后关闭该窗口，将我带回主窗口，然后关闭主窗口，程序不会结束。（这意味着我必须在 Visual Studio 中按下停止按钮才能结束）

这就像访问第二个窗口让某种进程运行一样。

所以，当我关闭主窗口时，我可以运行：

```
 Application.Current.Close(); 
```

但这安全吗？我是否有机会将某些东西挂起来？或者有没有更好的方法来关闭第二个窗口，这样当我关闭主程序时程序就会结束？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T23:03:34.793

这些线

```
 var mainWindow = new MainWindow(); 
   mainWindow.Show(); 
```

创建一个新的 MainWindow 并显示它。原来的 MainWindow 仍然是隐藏的。

要解决您的问题，您需要对原始 MainWindow 实例的引用。
也许您可以在构建辅助窗口时传递此参考

```
// Create a NewProjectInfo instance and pass this 
var projectWindow = new NewProjectInfo(this); 
this.Hide(); 
projectWindow.Show(); 
```

并在projectWindow的构造函数中，将传入的引用保存在一个全局var中

```
var MainWindow _originalReference;

public NewProjectInfo(MainWindow original)
{
    _originalReference = original;
} 
```

现在窗口关闭事件可以使用引用的窗口

```
private void Window_Closed(object sender, EventArgs e)   
{   
    _originalReference.Show();   
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T23:08:55.070

`Application.Current.MainWindow.Show();`您可以简单地调用已关闭的事件处理程序，而不是创建一个新的主窗口吗？

# python - 如何在 matplotlab、scipy 等中连接不连续曲线

> ID：11075436
> 
> 赞同：6
> 
> 时间：2012-06-17T22:57:07.420
> 
> 标签：python, numpy, matplotlib, scipy

我有一个小问题，当我拍摄图像的轮廓时，我得到了这个数字：

![](../Images/e0e454ad4573c55fb730ebfa03b8bdbe.png) ![](../Images/220a2901e9f7c0bef15387d386373034.png)

如您所见，我可以提取轮廓，但是一旦我提取路径，它就会留下这些奇怪的割线，这些割线会穿过图像，因为曲线上有 2 个不连续区域。我想知道是否有办法断开不连续的行，或者是我的路径提取代码错误

```
import matplotlib.pyplot as plt
import numpy as np

def contourPath(img, width, height): 
    x         = np.arange(0,width)
    y         = np.arange(height,0,-1)
    X, Y      = np.meshgrid(x,y)
    plot      = plt.contour(X,Y,img, [0])
    pathList  = plot.collections[0].get_paths()
    x, y      = [], []
    for i in range(0, len(pathList)):
        iterPath = pathList[i].iter_segments()
        for point in iterPath:
            pt  = np.rint(point[0])
            x.append(pt[0])
            y.append(pt[1])
    X         =  np.hstack(x)
    Y         =  np.hstack(y)
    return np.dstack((X,Y))[0] 
```

感谢您的时间

对于 user545424 我猜这里。Matplotlib 轮廓函数工作正常，因为图像上有两个不连续的点导致这个小事件发生。

我了解到这些割线是由 scypi 引起的，但它引发了另一个关于库如何与轮廓点交互的问题

哦，好吧，我相信可以通过找到路径并对其进行插值来掩盖问题。但是，我喜欢避免重新寻找路径，因为旅行推销员问题在我的计算机上并不好。

你有什么建议吗？

![在此处输入图像描述](../Images/8f7eb2d3d16a5aee08da1120e9873578.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T20:29:42.440

我想我正在回答我自己的问题。那些奇怪的割线是由连接列表末端的 scipy 引起的。我相信默认行为是 scipy 将连接 2 个连续点，无论位置如何。顶点工作正常，因为它确实严格地采用了这个图像的轮廓并且它已经包围了曲线。割线之所以连接到顶部半圆的中间。那是最后一条路径结束的位置。

我想转换为极地并重新寻找路径很简单，但并不完全是最佳的，但是哦。

我想知道其他人是否有更好的解决方案

```
 def cart2polar(x,y, origin=None, size=np.array([200,200])):
      ny, nx= size[0], size[1]
      print size.shape
      if origin is None:
          origin_x, origin_y = nx//2, ny//2
      else:
          origin_x, origin_y = origin[0], origin[1]
      x -= origin_x
      y -= origin_y
      r = np.sqrt(x**2 + y**2)
      theta = np.arctan2(y, x)
      return r, theta

    def main():
      index = np.argsort(theta)
      r, theta = r[index[:]], theta[index[:]]
      f = interpolate.interp1d(theta,r)
      theta = np.linspace(round(theta.min()+.00005,),theta.max(), 200)
      r = f(theta)
      x,y = polar2cart(r, theta)

    def polar2cart(r, theta, origin=None, size=np.array([200,200]) ):
      ny, nx= size[0], size[1]
      if origin is None:
          origin_x, origin_y = nx//2, ny//2
      else:
          origin_x, origin_y = origin[0], origin[1]
      x += origin_x
      y += origin_y

      return x, y 
```

# c++ - 在相同类型的两个实现之间进行转换的最有效方法是什么？

> ID：11075440
> 
> 赞同：0
> 
> 时间：2012-06-17T22:58:02.987
> 
> 标签：c++

例如，我有一个 QMatrix4x4，我有一个 Ogre::Matrix4。

从QMatrix到Ogre::Matrix4来回转换有点繁琐，想知道有没有靠谱的解决方案？

现在我只是在 for 循环中复制每个元素，有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T23:04:32.077

在 C++11 中，如果这两种类型都是*layout-compatible*，你可以简单地`reinterpret_cast`在它们之间。例子：

```
#include <cassert>

struct X{
  int a, b, c, d;
};

struct Y{
  int arr[4];
};

int main(){
  X x{0, 1, 2, 3};
  Y& y = reinterpret_cast<Y&>(x);
  assert(y.arr[2] == 2);
} 
```

（我希望我的例子是对的；[住在 Ideone 上](http://ideone.com/KRG8g)。）

这种方法的问题是您需要深入研究实现的内部结构，即使在不同的版本中也可能不稳定。因此，简单地复制可能是最好的（如在大多数便携式/已知/可靠）方法中。

不过有一件事：我个人不知道所讨论的类型提供了哪些接口，Ogre 也可能提供不直接对 a`Matrix4`而是对（2D）数组进行操作的算法。检查 API 文档。

# php - 将xml文件保存到不同的目录

> ID：11075441
> 
> 赞同：0
> 
> 时间：2012-06-17T22:58:09.643
> 
> 标签：php, xml

我正在寻找使用 php5 将 xml 文件从根目录保存到不同的目录。有任何想法吗？

```
//write to the file
$filename = $id . ".xml";
$doc->save($filename); 
```

我想将文件保存到`/xml/`目录中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T23:35:24.967

将参数更改`$doc->save`为包含路径

```
$filename = '/xml/' . $id . ".xml";
$doc->save($filename); 
```

现在要记住的是，这是一个文件系统路径，而不是 Web URL，所以它实际上会保存在`/xml`not中`DOCUMENT_ROOT/xml`。

# php - 在 CakePHP 中使用 PHP 合并 MySQL 数据库中的重复记录

> ID：11075442
> 
> 赞同：1
> 
> 时间：2012-06-17T22:58:14.127
> 
> 标签：php, mysql, cakephp-2.0

我有一个表格，存储已输入的有关放入垃圾箱的废物量的数据。所以我的表是这样的：

```
Material  |  Weight
===================
Paper     |  10
Plastic   |  5
Paper     |  7 
```

如您所见，我将在表中包含重复的数据。目前我有多个不同材料的实例，它们都有不同的权重值。

在 PHP 中是否有可能获取这些重复的条目，将它们组合成一个条目，然后显示它们？所以代码会取 10Kg 的纸并将其添加到表中的另一个纸实例（7Kg）中，然后输出值？

我已经`GROUP BY`在 MySQL 中尝试过，但所做的只是结合所有条目并给我最高记录的值，这是不对的。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T23:09:06.523

使用 MySql，有一个`SUM`列。这将为每个分组汇总该列的所有值。这是假设重量列只是一个数字（10 而不是 10kg）。

```
SELECT 
    `material`, 
    SUM(`weight`) AS `weight` 
FROM `material_weights` 
GROUP BY `material` 
```

如果重量栏不只是一个数字（10 公斤而不是 10），那么就会有问题。

如果所有重量都以 KG 为单位，那么您应该从每个重量中删除“kg”值，并将重量列从文本转换为数字列。

如果有不同类型的权重（KG、LB、G 等），那么最好的方法是在表格中多出一个字段，将权重转换为 KG。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T23:12:43.573

由于您的所有数据似乎都在字符串中，因此您最好使用 php 迁移脚本来检查您的数据，然后合并重复项。您要做的第一件事是确定哪些材质有重复项。

> 从{TABLE} GROUP BY Material HAVING COUNT(*) > 1 中选择材料；

从那里你应该遍历返回的材料，并获取所有具有材料值的行。

> SELECT * FROM {TABLE} WHERE Material = '{$material}';

这将为您提供所有标记为该材质的行。从那里，对数值应用任何转换（以防万一有标记为 g 的值），以确保您对相同类型的值进行操作。然后，您将删除所有具有该类型材料的行。（你有备份，对吧？）

> 从 {TABLE} 中删除 Material = '{$material}';

最后，插入您刚刚确定的值。

> INSERT INTO {TABLE} (材料, 重量), ('$material', '$weight');

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-17T23:21:34.477

```
SELECT 
    material, 
    SUM(CAST(REPLACE(weight, 'kg', '') AS UNSIGNED)) AS weightsum
FROM
    tbl
GROUP BY
    material 
```

您可以使用`SUM()`with 函数`GROUP BY`来获取每种独特材料的重量总和。在您的情况下，您的`weight`字段似乎是一个字符串。您可以使用 简单地从每个值中取出“kg” `REPLACE`，然后将其转换为整数，然后将其传递给`SUM()`.

# ios - 无法使用分发配置文件签署我的 ios 应用程序

> ID：11075443
> 
> 赞同：0
> 
> 时间：2012-06-17T22:58:14.843
> 
> 标签：ios, app-store, xcode4.3, provisioning-profile

我已经为我的 ios 应用程序生成了分发配置文件，但我无法用它签署我的应用程序，我收到此错误：

配置文件与默认钥匙串中的任何有效证书/私钥对都不匹配

开发者证书运行良好，我可以将我的应用程序上传到我的测试设备，

但我注意到分发配置文件的此警告：未找到有效签名身份

这可能是我的分发配置文件问题的根源还是这是预期的警告？

![在此处输入图像描述](../Images/dd51625f17314b6c2635752ebe5bbf29.png)

我怀疑它禁止我签署应用程序以上传应用程序商店

![在此处输入图像描述](../Images/ccfc91ea75430da0a175e8351efcf10d.png)

我很确定我已经使我的所有捆绑包（应用程序？）标识符一致

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T23:05:01.297

您的钥匙串中需要有两组公钥和私钥。

其中一个将以“iPhone Developer：”为前缀，另一个以“iPhone Distribution：”为前缀。

通过在您的“ ”文件夹中打开钥匙串访问应用程序，确保***两者***都在您的钥匙串中。`/Application/Utilities`如果您没有看到两者，那么您的问题就存在（并且您需要从另一台安装了密钥的机器导入您的密钥）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T20:39:51.760

不要丢失你的钥匙！

如果您购买了一台新计算机并且没有导出您的密钥并且您的计算机没有您的 SOL，那么您必须重新开始该过程。

# java - Play 2.0 尝试从已经关闭的池中获取连接

> ID：11075446
> 
> 赞同：4
> 
> 时间：2012-06-17T22:58:40.443
> 
> 标签：java, playframework-2.0, akka, ebean

我有 AKKA 演员在 Play 2 应用程序中运行。有一个从数据库中检索到的 POJO 对象列表，并在消息中传递给参与者。当一个actor开始处理这些对象时，它会抛出这个异常。我猜它尝试从 DB 读取数据是因为延迟加载 ebean。在测试用例中运行时会发生这种情况。我没有在正常的应用程序环境中测试过。

**尝试从已关闭的池中获取连接**

```
at com.avaje.ebeaninternal.server.transaction.TransactionManager.createQueryTransaction(TransactionManager.java:356)
at com.avaje.ebeaninternal.server.core.DefaultServer.createQueryTransaction(DefaultServer.java:2021)
at com.avaje.ebeaninternal.server.core.OrmQueryRequest.initTransIfRequired(OrmQueryRequest.java:241)
at com.avaje.ebeaninternal.server.core.DefaultServer.findList(DefaultServer.java:1468)
at com.avaje.ebeaninternal.server.core.DefaultBeanLoader.loadBean(DefaultBeanLoader.java:360)
at com.avaje.ebeaninternal.server.core.DefaultServer.loadBean(DefaultServer.java:526)
at com.avaje.ebeaninternal.server.loadcontext.DLoadBeanContext.loadBean(DLoadBeanContext.java:143)
at com.avaje.ebean.bean.EntityBeanIntercept.loadBean(EntityBeanIntercept.java:548)
at com.avaje.ebean.bean.EntityBeanIntercept.preGetter(EntityBeanIntercept.java:638)
at models.MemberInfo._ebean_get_type(MemberInfo.java:4)
at models.MemberInfo.getType(MemberInfo.java:232)
at actors.MessageWorker.doSendToIOS(MessageWorker.java:161)
at actors.MessageWorker.onReceive(MessageWorker.java:97)
at akka.actor.UntypedActor$$anonfun$receive$1.apply(UntypedActor.scala:154)
at akka.actor.UntypedActor$$anonfun$receive$1.apply(UntypedActor.scala:153)
at akka.actor.Actor$class.apply(Actor.scala:311)
at akka.actor.UntypedActor.apply(UntypedActor.scala:93)
at akka.actor.ActorCell.invoke(ActorCell.scala:619)
at akka.dispatch.Mailbox.processMailbox(Mailbox.scala:196)
at akka.dispatch.Mailbox.run(Mailbox.scala:178)
at akka.dispatch.ForkJoinExecutorConfigurator$MailboxExecutionTask.exec(AbstractDispatcher.scala:505)
at akka.jsr166y.ForkJoinTask.doExec(ForkJoinTask.java:259)
at akka.jsr166y.ForkJoinPool$WorkQueue.runTask(ForkJoinPool.java:974)
at akka.jsr166y.ForkJoinPool.runWorker(ForkJoinPool.java:1478)
at akka.jsr166y.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:104) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-29T06:44:05.957

虽然我不确定它是否与你相关，但我会讲述我的故事。运行我的测试用例时出现了相同的错误消息，而不使用演员。

首先请注意，在停止 Play 应用程序期间，它的数据源是关闭的。

由于我的许多测试用例都需要在范围内运行，因此我在每个测试用例周围都`Application`使用了帮助程序。`WithApplication`我的问题是我的 DB-access 对象是一个单例（一个 Scala `object`），它只初始化`Datasource`一次。由于该对象从未在测试用例之间重新实例化，因此关闭的数据源仍然存在，导致上述错误。

我的解决方案是确保在测试用例之间重新创建数据源。

# javascript - 初始化动画 div 时的定位错误

> ID：11075447
> 
> 赞同：0
> 
> 时间：2012-06-17T22:59:36.467
> 
> 标签：javascript, jquery, animation, jquery-animate

我正在创建一个带有一系列链接的水平菜单栏。在当前页面链接下方，有一个绝对定位的 div，其大小固定，背景为黑色。当任何其他链接悬停时，此“选择指示器”会滑到悬停链接下方。我已经设法根据需要创建了这种效果。

但是，当页面首次加载时，我遇到了“选择器”div 的位置问题。出于某种原因，div 将它的初始位置设置为它应该在的位置（在当前页面链接下方）的左边正好 5 个像素。我使用与动画本身相同的代码来初始化 div，并且该错误仅在加载页面时出现。只要将链接悬停在上方，“选择器”就会滑入正确的位置，直到页面被刷新/重新加载。

可以在[www.jamiedavies.me找到菜单（和错误）的工作示例](http://www.jamiedavies.me/ "http://www.jamiedavies.me/")

这是我的导航栏的html结构：

```
<header>
    <h1>Main Title</h1>
    <nav id="mainNav">
        <ul>
            <li><a href="#1" title="Link1" class="current">Link1</a></li>
            <li><a href="#2" title="Link2">Link2</a></li>
            <li><a href="#3" title="Link3">Link3</a></li>
            <li><a href="#4" title="Link4">Link4</a></li>
        </ul>
    </nav>
    <div id="pageSelector"></div>
</header> 
```

这是相关的CSS：

```
nav#mainNav {
   position: absolute;
   right: 0px;
   top: 63px;
}

nav#mainNav ul li {
   display: inline;
   list-style-type: none;
   margin-left: 35px;
}

div#pageSelector {
   height: 5px;
   left: -999px;
   position: absolute;
   top: 91px;
   visibility: hidden;
   width: 25px;
} 
```

这是负责为选择器设置动画的 javascript/jquery 代码：

```
$( document ).ready( function() {

    var offset = $( "header" ).offset().left;

    $( "#pageSelector" ).css( "visibility", "visible" );

    $( "#mainNav li" ).find( "a" ).each( function( i ) {
        $( this ).mouseover( function( e ) {
            var l = $( this ).offset().left - offset;
            var w = $( this ).width();
            $( "#pageSelector" ).animate( {
                left: l,
                width: w
            }, 175, "swing" );
        } );
    } );

    $( "#mainNav" ).mouseleave( function( e ) {
        $( "#pageSelector" ).animate( {
            left: $( "#mainNav li a.current" ).offset().left - offset,
            width: $( "#mainNav li a.current" ).width()
        }, 175, "swing" );
    } );

    $( "#mainNav" ).mouseleave();
} ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T00:22:35.100

尝试使用

```
$(window).bind("load", function() { 
```

代替

```
$( document ).ready( function() { 
```

因为，动画脚本似乎在其他元素应该首先加载之前完成了执行，例如您的特殊字体和图形，这很可能导致对齐计算中的数学错误。

希望这能解决您的问题。

# ruby-on-rails - Heroku “我们很抱歉，但出了点问题”

> ID：11075450
> 
> 赞同：25
> 
> 时间：2012-06-17T22:59:57.073
> 
> 标签：ruby-on-rails, ruby, heroku

首先，我是 rails/heroku 的新手，所以请提前原谅新手！

我完成了 Rails 教程 (http://guides.rubyonrails.org/getting_started.html) 并生成了一个类似博客的“post”应用程序，将其推送到 github，然后推送到 heroku。

我的应用程序在本地运行良好，但是当我尝试在线运行它时，它出现红色字体错误中的“我们很抱歉，但出了点问题”。

这是heroku日志：

```
2012-06-17T18:20:21+00:00 app[web.1]: Started GET "/posts/new" for 24.246.75.91 at 2012-06-17 18:20:21 +0000
2012-06-17T18:20:21+00:00 app[web.1]: Processing by PostsController#new as HTML
2012-06-17T18:20:21+00:00 app[web.1]:   Rendered posts/_form.html.erb (19.4ms)
2012-06-17T18:20:21+00:00 app[web.1]:   Rendered posts/new.html.erb within layouts/application (32.8ms)
2012-06-17T18:20:21+00:00 app[web.1]: Completed 500 Internal Server Error in 39ms
2012-06-17T18:20:21+00:00 app[web.1]: 
2012-06-17T18:20:21+00:00 app[web.1]:     13: 
2012-06-17T18:20:21+00:00 app[web.1]: ActionView::Template::Error (undefined method `name' for #<Post:0x000000043b8e00>):
2012-06-17T18:20:21+00:00 app[web.1]:     14:   <div class="field">
2012-06-17T18:20:21+00:00 app[web.1]:     15:     <%= f.label :name %><br />
2012-06-17T18:20:21+00:00 app[web.1]:     18:   <div class="field">
2012-06-17T18:20:21+00:00 app[web.1]:     17:   </div>
2012-06-17T18:20:21+00:00 app[web.1]:     16:     <%= f.text_field :name %>
2012-06-17T18:20:21+00:00 app[web.1]:     19:     <%= f.label :title %><br />
2012-06-17T18:20:21+00:00 app[web.1]:   app/views/posts/_form.html.erb:16:in `block in _app_views_posts__form_html_erb___4393344465537738631_33651200'
2012-06-17T18:20:21+00:00 app[web.1]:   app/views/posts/_form.html.erb:1:in `_app_views_posts__form_html_erb___4393344465537738631_33651200'
2012-06-17T18:20:21+00:00 app[web.1]:   app/views/posts/new.html.erb:3:in `_app_views_posts_new_html_erb___263954971377171473_37473500'
2012-06-17T18:20:21+00:00 app[web.1]:   app/controllers/posts_controller.rb:35:in `new'
2012-06-17T18:20:21+00:00 app[web.1]: 
```

简而言之，f.name 是一个对象，表示数据库中的一个条目（f 的大部分信息也是如此）

“未定义的方法‘名称’”错误对我来说似乎很奇怪，因为它在本地工作得很好。

我的假设是数据库在 heroku 和我的应用程序之间没有正确链接。但是，我不知道如何解决/检查这个问题。

我的应用程序现在默认使用“共享数据库”。

关于什么检查的任何提示？我错过了什么？

编辑 1：迁移数据库。表“帖子”似乎已经被“检测到”。这是一个跟踪：

```
 Running rake db:migrate --trace attached to terminal... up, run.1
DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/01/04/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/Rakefile:7)
DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/01/04/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/Rakefile:7)
** Invoke db:migrate (first_time)
** Invoke environment (first_time)
** Execute environment
** Invoke db:load_config (first_time)
** Invoke rails_env (first_time)
** Execute rails_env
** Execute db:load_config
** Execute db:migrate
Migrating to CreatePosts (20120418005214)
==  CreatePosts: migrating ====================================================
-- create_table(:posts)
rake aborted!
An error has occurred, this and all later migrations canceled:

PG::Error: ERROR:  relation "posts" already exists
: CREATE TABLE "posts" ("id" serial primary key, "name" character varying(255), "title" character varying(255), "content" text, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.1/lib/active_record/connection_adapters/postgresql_adapter.rb:640:in `async_exec'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.1/lib/active_record/connection_adapters/postgresql_adapter.rb:640:in `block in execute'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.1/lib/active_record/connection_adapters/abstract_adapter.rb:280:in `block in log'
/app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.1/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.1/lib/active_record/connection_adapters/abstract_adapter.rb:275:in `log'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.1/lib/active_record/connection_adapters/postgresql_adapter.rb:639:in `execute'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.1/lib/active_record/connection_adapters/abstract/schema_statements.rb:170:in `create_table'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.1/lib/active_record/migration.rb:450:in `block in method_missing'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.1/lib/active_record/migration.rb:424:in `block in say_with_time'
/app/vendor/ruby-1.9.3-p0/lib/ruby/1.9.1/benchmark.rb:280:in `measure'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.1/lib/active_record/migration.rb:424:in `say_with_time'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.1/lib/active_record/migration.rb:444:in `method_missing'
/app/db/migrate/20120418005214_create_posts.rb:3:in `change'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.1/lib/active_record/migration.rb:393:in `block (2 levels) in migrate'
/app/vendor/ruby-1.9.3-p0/lib/ruby/1.9.1/benchmark.rb:280:in `measure'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.1/lib/active_record/migration.rb:393:in `block in migrate'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:118:in `with_connection'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.1/lib/active_record/migration.rb:377:in `migrate'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.1/lib/active_record/migration.rb:512:in `migrate'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.1/lib/active_record/migration.rb:704:in `block (2 levels) in migrate'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.1/lib/active_record/migration.rb:759:in `call'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.1/lib/active_record/migration.rb:759:in `block in ddl_transaction'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.1/lib/active_record/connection_adapters/abstract/database_statements.rb:190:in `transaction'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.1/lib/active_record/transactions.rb:208:in `transaction'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.1/lib/active_record/migration.rb:759:in `ddl_transaction'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.1/lib/active_record/migration.rb:703:in `block in migrate'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.1/lib/active_record/migration.rb:684:in `each'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.1/lib/active_record/migration.rb:684:in `migrate'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.1/lib/active_record/migration.rb:554:in `up'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.1/lib/active_record/migration.rb:535:in `migrate'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.1/lib/active_record/railties/databases.rake:153:in `block (2 levels) in <top (required)>'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `block in execute'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `block in invoke_with_call_chain'
/app/vendor/ruby-1.9.3-p0/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:116:in `invoke_task'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block (2 levels) in top_level'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `each'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block in top_level'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:88:in `top_level'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:66:in `block in run'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/bin/rake:33:in `<top (required)>'
/app/vendor/bundle/ruby/1.9.1/bin/rake:19:in `load'
/app/vendor/bundle/ruby/1.9.1/bin/rake:19:in `<main>'
Tasks: TOP => db:migrate 
```

编辑 2：尝试删除 te 数据库。奇怪的错误：

```
19:06:34[~/ED3/ed3/]>heroku run rake db:drop
Running rake db:drop attached to terminal... up, run.1
DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/01/04/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/Rakefile:7)
DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/01/04/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/Rakefile:7)
Couldn't drop mtstktqkyx : #<ActiveRecord::StatementInvalid: PG::Error: ERROR:  must be owner of database mtstktqkyx
: DROP DATABASE IF EXISTS "mtstktqkyx"> 
```

编辑 3：CreatePosts 迁移（来自 db/migrate/##..##_create_posts.rb）

```
class CreatePosts < ActiveRecord::Migration
  def change
    create_table :posts do |t|
      t.string :name
      t.string :title
      t.text :content

      t.timestamps
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-06-17T23:02:23.047

你迁移数据库了吗？

尝试运行：

```
heroku run rake db:migrate 
```

从您的项目目录中。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-06-18T02:50:55.240

Turns out my database in heroku was being referenced wrongly. This is what I did:

1.  rake db:drop - *this killed both test and development tables*
2.  re-created the two databases in posgresql *I have it local as well*
3.  rake db:migrate - *so at this point localhost is working again after 1.*
4.  heroku addons - *shared-database should be shown*
5.  heroku pg:reset SHARED_DATABASE - *can't do db:reset in heroku due to permission issues*
6.  heroku run rake db:migrate - *re-migrate the production db*

Although only steps 5 and 6 were the only ones addressing my primary issue directly.

Thanks all!!!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T00:24:38.347

看起来您有不止一个迁移来创建`post`模型。我会先看看迁移。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-03T13:33:13.910

我在 Heroku 上运行的 rails 应用程序遇到了这个问题。

我试过`heroku run rake db:migrate`了，但还是不行。

然后我跑了`heroku run rails db:schema:load`，它奏效了。

提示：当你试图让你的应用在 Heroku 上运行时，你用来让你的应用在本地运行的命令可能很有用。

# php - Facebook登录无法从非主页工作

> ID：11075451
> 
> 赞同：2
> 
> 时间：2012-06-17T23:00:03.983
> 
> 标签：php, facebook, api, oauth

我有一个（目前非常简单的）网站，该网站正在使用 Facebook 的“带有 Facebook 登录的网站”应用程序设置。我的问题表面上看起来很简单，但我无法解决，有人可以解释一下吗？

我的网站主页是（比如说）[https://www.mysite.net/](https://www.mysite.net/) - 当我使用下面的代码从这里登录时，它可以工作。

```
if(!$this->facebook->getUser())
    {
        //NOT LOGGED IN 
       $params = array(
          'scope' => 'email, publish_stream, user_photos, status_update',
          'redirect_uri' => current_url(),
        );  
        $auth_url = $this->facebook->getLoginUrl($params);  
        $auth_text = "Log In";
    } 
    else 
    {
        //LOGGED IN         
        $fbid = $this->facebook->getUser();
        $fbid = $fbid;
        $auth_url = "https://www.facebook.com/logout.php?confirm=1&next=".urlencode(base_url().'logout/')."&access_token=".$this->facebook->getAccessToken();
        $auth_text = "Log Out";
    }

<a href="<?=$auth_url;?>" class="btn btn-primary"><i class="icon-user"></i> <?=$auth_text;?></a> 
```

..效果很好。

但是，当我使用来自[https://www.mysite.net/second_page/](https://www.mysite.net/second_page/)的相同代码（并且用户需要登录）并且我在第二页上也使用上述代码时，登录脚本重定向到Facebook Auth Dialog（很棒），并重定向到 redirect_uri（也很棒），但用户没有登录到页面 - 即，它给出了“登录”对话框而不是预期的“注销”对话框。

我在这里做错了吗？我希望 facebook 登录对话框可以从我的应用程序指定站点根目录的任何页面上工作。我不想每次登录都将我的用户重定向到主页，他们需要能够从站点的任何页面登录。

想法？

问候， 保罗 G

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T04:11:32.080

我已经实施了一种解决方法。在不是基本 URL 的页面上，我让它们在会话变量中引用自己，如下所示：

```
if(!$this->facebook->getUser())
{
  // Set a session var <---
  $_SESSION['redirect_state'] = current_url();
  //NOT LOGGED IN 
   $params = array(
      'scope' => 'email, publish_stream, user_photos, status_update',
      'redirect_uri' => base_url(), // <-- Changed this back to base url.
    );  
    $auth_url = $this->facebook->getLoginUrl($params);  
    $auth_text = "Log In";
} 
else 
{
    //LOGGED IN         
    $fbid = $this->facebook->getUser();
    $fbid = $fbid;
    $auth_url = "https://www.facebook.com/logout.php?confirm=1&next=".urlencode(base_url().'logout/')."&access_token=".$this->facebook->getAccessToken();
    $auth_text = "Log Out";
}

<a href="<?=$auth_url;?>" class="btn btn-primary"><i class="icon-user"></i> <?=$auth_text;?></a> 
```

然后，登录脚本将重定向到应用程序的基本 URL。在基本 URL 中，我放置了一些代码检查 $_SESSION['redirect_state'] 的存在，然后将其杀死，然后重定向：

```
// Is this a redirect from a another page's login?
    if((isset($_SESSION['redirect_state'])))
    {
        $redir_page = $_SESSION['redirect_state'];  
        unset($_SESSION['redirect_state']);
        redirect($redir_page);
        exit;
    } 
```

用户现在被重定向回他们登录的页面。由于 FB 用户已登录，因此不会设置重定向会话变量，并且如果用户返回首页，则主页不会奇怪地重定向，因为再次未设置重定向会话变量。

我希望这对其他人有所帮助。我很惊讶我还没有发现其他人也在谈论这个问题:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T16:10:57.980

从数组 $param(this one -> redirect_uri) 中删除重定向 url 条目。仅当您希望在其他页面上重定向时才使用此选项。如果您想在同一页面上重定向，则无需提及，它会在登录后自动返回。

这是没有redirect_uri的相同代码...

```
if(!$this->facebook->getUser())
    {
        //NOT LOGGED IN 
       $params = array(
          'scope' => 'email, publish_stream, user_photos, status_update'
         );  
        $auth_url = $this->facebook->getLoginUrl($params);  
        $auth_text = "Log In";
    } `enter code here`
    else 
    {
        //LOGGED IN         
        $fbid = $this->facebook->getUser();
        $fbid = $fbid;
        $auth_url = "https://www.facebook.com/logout.php?confirm=1&next=".urlencode(base_url().'logout/')."&access_token=".$this->facebook->getAccessToken();
        $auth_text = "Log Out";
    }

<a href="<?=$auth_url;?>" class="btn btn-primary"><i class="icon-user"></i> <?=$auth_text;?></a> 
```

# oracle - Oracle 有内置的散列函数吗？

> ID：11075452
> 
> 赞同：15
> 
> 时间：2012-06-17T23:00:10.787
> 
> 标签：oracle, hash, plsql

> **可能重复：**
> [PL/SQL 中有散列函数吗？](https://stackoverflow.com/questions/5595774/is-there-any-hash-function-in-pl-sql)

我在 Oracle 11g 中有一个 NCLOB 数据库类型的列。我需要为其内容获取哈希值。如何使用任何内置的 Oracle 函数或在 Oracle 的 PL/SQL SP 中执行此操作？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-06-18T16:36:03.447

是的：散列和加密（相关但不完全相同）都是通过 SYS 包 DBMS_CRYPTO 完成的。

**简单的 SHA-1 散列**

```
l_hash := dbms_crypto.hash( l_src, dbms_crypto.HASH_SH1 ); 
```

**简单的 MD5 散列**

```
l_hash := dbms_crypto.hash( l_src, dbms_crypto.HASH_MD5 ); 
```

**dbms_crypto.hash() 概述**

hash() 函数被重载以接受以下类型：RAW、BLOB 和 CLOB。根据原始可接受输入类型的[隐式数据转换](http://docs.oracle.com/cd/E11882_01/server.112/e26088/sql_elements002.htm#SQLRF51046)为 RAW、CHAR、VARCHAR2、NCHAR、NVARCHAR2、LONG、BLOB。RAW/隐式 RAW 转换、BLOB 和 CLOB 未涵盖的所有其他数据类型（DATE、TIMESTAMP 等）必须首先通过 TO_CHAR()。

值得注意的是 dbms_crypto.hash() 支持以下散列算法：

*   HASH_MD4
*   HASH_MD5
*   HASH_SH1

**密码：以防万一**

如果您要存储密码，我建议您使用密码存储散列（bcrypt、PBKDF2 或 scrypt）而不是加密散列（md5、sha-1 等）。不同之处在于密码存储哈希意味着需要时间来破解，而加密哈希意味着快速完成。当通过蛮力攻击系统的密码列表时，在尝试破解通过密码算法传递的加盐值时，它的时间密集度要高出几个数量级。考虑到在单个值上使用密码哈希可能需要大约 100 毫秒（对于单个真实登录来说并不多），但对于整个密码列表的蛮力（每个密码尝试数百万/十亿次）来说非常慢。

**Oracle 讨厌密码哈希**

对于它的价值，我不知道 Oracle 提供的任何提供密码散列支持的软件包。但是，您可以通过使用“ [loadjava](http://docs.oracle.com/cd/E11882_01/java.112/e16548/ssid.htm#JJDBC28261) ”并将 Java bcrypt 实现放入与 Oracle 的 RDBMS 一起运行的 JVM 中来完成此操作。然后，您可以使用[PL/SQL 包装器](http://docs.oracle.com/cd/E11882_01/java.112/e10588/chseven.htm#JJDEV13294)来调用实现 bcrypt 的 Java 类。如果您使用的是中间层，则可以使用该语言（.NET、PHP、Perl、Ruby、Python、Java 等）提供的许多其他选项，而无需尝试使用“loadjava”。

**我的意思是加密不是哈希！**

如果您需要的散列没有被 dbms_crypto.hash() 覆盖，您可能正在寻找通过 dbms_crypto.encrypt 进行的加密，它的工作原理非常相似，只是它采用以下类型：

*   ENCRYPT_DES
*   ENCRYPT_3DES_2KEY
*   ENCRYPT_3DES
*   加密_AES
*   ENCRYPT_PBE_MD5DES
*   加密_AES128
*   加密_AES192
*   加密_AES256

[这是关于 DBMS_CRYPTO](http://docs.oracle.com/cd/E11882_01/appdev.112/e25788/d_crypto.htm#ARPLS664)的完整11gR2 文档。所有其他版本均可通过[tahiti.oracle.com](http://tahiti.oracle.com/)获得。只需单击您的版本，然后搜索“dbms_crypto”。

# java - Bjacc/j if 和 while 定义

> ID：11075457
> 
> 赞同：1
> 
> 时间：2012-06-17T23:00:48.570
> 
> 标签：java, yacc

所以我对 byacc/j 中的 if then else 和 while 定义有疑问。有人可以帮忙吗？input.y 在下面。我无法理解 yacc 错误。所以很明显，12条规则从未减少，但我应该怎么做？

```
%{
import java.lang.Math;
import java.io.*;
import java.util.StringTokenizer;
%}

/* YACC Declarations */
%token NUM
%left '-' '+'
%left '*' '/'
%left NEG /* negation--unary minus */
%right '^' /* exponentiation */
%token IF ELSE WHILE EXIT
%token EQ LE GE NE
%token STRING NUM ID

%%

PROGRAM: OPS
;

OPS:    OP
|       OPS OP
;

OP1:    '{' OPS '}'
|       EXPR ';'
|       IF '(' EXPR ')' OP1 ELSE OP1
|       WHILE '(' EXPR ')' OP1
|       EXIT ';'
;

OP2:    IF '(' EXPR ')' OP
|       IF '(' EXPR ')' OP1 ELSE OP2
|       WHILE '(' EXPR ')' OP2
;

OP:     OP1 | OP2 ;

EXPR:   EXPR1
|       ID '=' EXPR

EXPR1:  EXPR2
|       EXPR1 EQ EXPR2
|       EXPR1 LE EXPR2
|       EXPR1 GE EXPR2
|       EXPR1 NE EXPR2
|       EXPR1 '>' EXPR2
|       EXPR1 '<' EXPR2
;

EXPR2: TERM
|       EXPR2 '+' TERM
|       EXPR2 '-' TERM
;

TERM:   VAL
|       TERM '*' VAL
|       TERM '/' VAL
;

VAL:    NUM
|       '-' VAL
|       '!' VAL
|       '(' EXPR ')'
|       ID
|       ID '(' ARGS ')'
;

ARGS:
|       ARG
|       ARGS ',' ARG
;

ARG:    EXPR
|       STRING
;

input: /* empty string */
 | input line
 ;

line: '\n'
 | exp '\n' { System.out.println(" " + $1.dval + " "); }
 ;

exp: NUM { $$ = $1; }
 | exp '+' exp { $$ = new ParserVal($1.dval + $3.dval); }
 | exp '-' exp { $$ = new ParserVal($1.dval - $3.dval); }
 | exp '*' exp { $$ = new ParserVal($1.dval * $3.dval); }
 | exp '/' exp { $$ = new ParserVal($1.dval / $3.dval); }
 | '-' exp %prec NEG { $$ = new ParserVal(-$2.dval); }
 | exp '^' exp { $$ = new ParserVal(Math.pow($1.dval, $3.dval)); }
 | '(' exp ')' { $$ = $2; }
 ;
%%

String ins;
StringTokenizer st;

void yyerror(String s)
{
 System.out.println("par:"+s);
}

boolean newline;
int yylex()
{
String s;
int tok;
Double d;
 //System.out.print("yylex ");
 if (!st.hasMoreTokens())
 if (!newline)
 {
 newline=true;
 return '\n'; //So we look like classic YACC example
 }
 else
 return 0;
 s = st.nextToken();
 //System.out.println("tok:"+s);
 try
 {
 d = Double.valueOf(s);/*this may fail*/
 yylval = new ParserVal(d.doubleValue()); //SEE BELOW
 tok = NUM;
 }
 catch (Exception e)
 {
 tok = s.charAt(0);/*if not float, return char*/
 }
 return tok;
}

void dotest()
{
BufferedReader in = new BufferedReader(new InputStreamReader(System.in));
 System.out.println("BYACC/J Calculator Demo");
 System.out.println("Note: Since this example uses the StringTokenizer");
 System.out.println("for simplicity, you will need to separate the items");
 System.out.println("with spaces, i.e.: '( 3 + 5 ) * 2'");
 while (true)
 {
 System.out.print("expression:");
 try
 {
 ins = in.readLine();
 }
 catch (Exception e)
 {
 }
 st = new StringTokenizer(ins);
 newline=false;
 yyparse();
 }
}

public static void main(String args[])
{
 Parser par = new Parser(false);
 par.dotest();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T18:17:51.687

看起来您的 .y 文件中有两个独立的语法： `PROGRAM`和`input`. 由于没有`%start`指令，因此第一个 ( `PROGRAM`) 被视为您的语法，并且由于该语法从不引用`input`或后面的任何符号，因此它们都是无用的——它们在解析时永远不能减少`PROGRAM`。

您的文件中只能有一种语法——删除（或注释掉）不需要的语法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T23:14:59.923

我忘记了 yacc (OPS) 中的尾递归，但以下似乎是一种简化。

```
OPS:    OP RESTOPS
;

RESTOPS: OPS
|      
;

OP:    '{' OPS '}'
|       IF '(' EXPR ')' OP ELSEOP
|       WHILE '(' EXPR ')' OP
|       EXIT ';'
|       EXPR ';'
;

ELSEOP: ELSE OP
|
; 
```

# linux - 启动时在 ramdisk 上挂载 /var - Bash 脚本问题

> ID：11075459
> 
> 赞同：3
> 
> 时间：2012-06-17T23:00:58.630
> 
> 标签：linux, bash, boot, ramdisk, slackware

我有一个嵌入式设备，我需要将我的 /var 和 /tmp 放在 ram 中，以减少驱动器上的写入次数（紧凑型闪存）。我知道如何使用 /tmp 来做到这一点，因为每当我重新启动或关闭时，我都不必恢复任何东西。

但是 /var 目录有重要的东西。我一直在研究，我发现了这个，但它似乎不起作用。

这是脚本：

```
# insert this on file 'rc.sys.init'
# after the mount of the root file system
# to create the /var on ramdisk

echo "Create ramdisk........."
#dd if=/dev/zero of=/dev/ram0 bs=1k count=16384
mkfs.ext2 -j -m 0 -q -L ramdisk /dev/ram0
if [ ! -d /mnt/ramdisk ]; then
     mkdir -p /mnt/ramdisk
fi
mount /dev/ram0 /mnt/ramdisk
if [ -L /var ]; then
     tar -xf /vartmp.tar -C /mnt/ramdisk
else
    tar -C / -cf /vartmp.tar var
    cp -a /var /mnt/ramdisk
    rm -rf /var
    ln -s /mnt/ramdisk/var /var
fi 
```

* * *

```
# insert this into file 'halt'
# to stop the ram disk properly on shutdown.
#

if [ -e /vartmp.tar ]; then
     rm -f /vartmp.tar
fi;
tar -C /mnt/ramdisk -cf /vartmp.tar var 
```

这个脚本有问题吗？如果不是，我应该在哪个初始化和终止脚本中包含它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T03:37:18.603

对于所有有同样问题的人，我已经解决了我的问题（有点）

我发布的两个脚本是正确的并完成了这项工作。你必须小心的是你把它们放在哪里。

在 Slackware 中，第一个运行脚本是 rc.S。起初我将我的第一个脚本复制粘贴到那个脚本的中间。它绝对应该在那里，而不是我放的地方。您必须查看脚本 rc.S 在哪里调用 /var 中的特定目录或文件。ramdisk 的创建应该在这些行之前。

关闭脚本应该添加在rc.6脚本的底部（关闭脚本）

另外我应该指出，虽然这提高了驱动器的预期寿命，但它有点不稳定，有时会随机重启，所以要小心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-25T02:16:36.527

Nice script...but it seems to me that it is volatile for several reasons. First did you tell the system max ramdisk size...first as a kernel argument.....linux /vmlinuz `ramdisk_size=204800`......then in rc `mke2fs -t ext2 /dev/ram1 204800`.....and maybe use ram1 not ram0.......also use a script for manual saving of ramdisk contents to `/var.....cp -a /mnt/ramdisk/var/. /var`........backup real /var to another directoryusin tar compression, but introducing tar compression to reduce data size probably introduces lag, latency and instability. Just seems to me to be so.

# javascript - 在 Python 中将命令输出（stdout、stderr）输出到 Web

> ID：11075461
> 
> 赞同：0
> 
> 时间：2012-06-17T23:01:40.553
> 
> 标签：javascript, python, websocket

最近，我使用 Flask 框架开发了一个简短的 Python 脚本来通过 HTTP 启动一个进程（请参见[**此处**](https://github.com/rpoisel/scripts/tree/master/web_start)）。现在有一个足够的技术来将已启动进程的标准流（我对*stdout*和*stderr特别感兴趣）“管道”到 Web 的问题。*

你会说什么是最合适的方法来实现这一点？首先，我认为 websockets 非常适合。但在我看来，大多数实现都掩盖了它们连接的客户端。我认为我需要这些信息才能将输出发送给所有人。

**编辑**：我认为我的问题有点不清楚：我想在 Web 界面中查看已执行命令的输出。因此，我必须以某种方式通过 HTTP 将来自已执行进程的 stdout/stderr 的数据“传送”到 Web 界面。启动的命令可能会运行一段时间（更长）。调用`dd`命令的示例不具有代表性，因为它在给定设置中不输出任何内容。当然，我必须使用`subprocess.Process`类和对象的输出（例如通过使用`communicate()`方法）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T23:59:58.283

不是很清楚你的目标是什么。你的代码有这个。也许这是一个线索？

```
 current_app.process = subprocess.Popen(
            ['dd', 'if=/dev/zero', 'of=/dev/null']) 
```

浏览子流程的文档。你会发现你可以指定标准输出和标准错误。 [http://docs.python.org/library/subprocess.html#module-subprocess](http://docs.python.org/library/subprocess.html#module-subprocess)

一种策略可能是将 stdout/err 捕获到文件，然后将该文件重写为您的 http 响应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T08:44:58.663

一种可行的方法（并且是非阻塞的，可以为多个客户端提供服务）是使用 Twisted：

连接一个 ProcessProtocol

[http://twistedmatrix.com/documents/current/core/howto/process.html](http://twistedmatrix.com/documents/current/core/howto/process.html)

到 Twisted WebSocket 服务器

[https://github.com/tavendo/AutobahnPython](https://github.com/tavendo/AutobahnPython)

披露：我是高速公路的作者。

# node.js - 猫鼬流第一次返回很少的结果

> ID：11075462
> 
> 赞同：1
> 
> 时间：2012-06-17T23:01:50.753
> 
> 标签：node.js, mongoose

我正在开发一项新的实时新闻服务，现在我遇到了一个我不知道如何解决的问题。

首先，当用户连接到 NodeJS 服务器时，我创建了一个 Mongoose 流，因此我可以轻松快速地返回这些数据。

我现在遇到的问题是第一次只返回几组数据，下一个代码返回所有集合：

```
io.sockets.on('connection', function(socket) {
    console.log("New user has been connected");

    var stream = News.find().tailable().stream();

    stream.on('error', function (err) {
      console.error(err)
    });

    stream.on('data', function (doc) {
      socket.emit("newArticle", doc);
    }); 
}); 
```

所以，问题是......我如何才能第一次返回最近的十个结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T20:50:51.300

最后，我将查询限制在当前时间减去半小时，这样我第一次得到的只是一小部分数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T18:58:23.503

您是否尝试过限制查询？[如查询](http://mongoosejs.com/docs/query.html)下的 mongoose.js 文档中所示。

使用您的代码将是

```
io.sockets.on('connection', function(socket) {
  console.log("New user has been connected");

  var stream = News.find().tailable().limit(10).stream();

  stream.on('error', function (err) {
    console.error(err)
  });

  stream.on('data', function (doc) {
    socket.emit("newArticle", doc);
  });
}); 
```

# c++ - 我需要 __declspec(dllexport) 来自 DLL 的模板变量

> ID：11075464
> 
> 赞同：0
> 
> 时间：2012-06-17T23:01:56.057
> 
> 标签：c++, templates, dllexport

我有一个模板类，我必须在其中初始化一个成员变量（为 null），如下所示：

```
template <typename T>
T * Singleton<T>::m_pInstance = NULL; 
```

我把它放在类声明的末尾（在头文件中）。我意识到这个的正确位置是在 cpp 文件中，但是这个类很小并且只包含内联函数。

这在头文件是解决方案的一部分的常规程序中正常工作。但现在我想将该类添加到 DLL 中，并从 DLL 中导出它。

我在哪里可以将 __declspec(dllexport) 放在这个初始化中，以便我可以从 DLL 中导出这个变量？

我读过的文档说正确的方法如下：

```
// ENGINEPART_API is defined as __declspec(dllexport)
template <typename T> ENGINEPART_API
T * Singleton<T>::m_pInstance = NULL; 
```

DLL 构建良好，但是当我尝试将类导入我的程序时，我得到：

```
1>singleton.h(52): error C2720: 'Singleton<T>::m_pInstance' : '__declspec(dllimport)' storage-class specifier illegal on members 
```

**更新**

超人告诉我，我无法从 DLL 导出模板。好吧，我可以从使用该模板的 DLL 中导出类，这就是模板在 DLL 中的原因。我需要一种方法来初始化这个成员变量（它是静态的）。

类声明如下所示：

```
template <typename T> 
class ENGINEPART_API Singleton
{
private:
    static T *m_pInstance;
    // ... inline functions
}; 
```

我可以从使用模板的 DLL 中导出类：

```
class ENGINEPART_API blah : public Singleton <blah>
{...}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T03:52:07.787

您不能导出模板。仅当实际使用该类并且此时编译器需要访问类模板的整个源时，才会创建该类的实例。C++ 标准讨论了可用于导出类模板的导出关键字，但 AFAIK 只有一个编译器实现了这一点。所以你能做的最好的就是将整个模板类定义放在一个头文件中。

# c++ - 为什么我的程序的 objdump -D 看起来与 .S 不同

> ID：11075466
> 
> 赞同：0
> 
> 时间：2012-06-17T23:02:05.437
> 
> 标签：c++, compiler-construction, objdump, disassembly

我正在为我的 C++ 学习工具链并尝试使用 objdump。

来自 objdump 的反汇编文件甚至没有“Hello World”这个词。这是为什么？一点都不可靠吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T23:14:27.990

以下代码：

```
#include <stdio.h>
int main(void) { printf("Hello world\n"); } 
```

可以用 完全反汇编`objdump -Dslx my_prog`，其中包括以下内容：

```
Contents of section .rodata:
 400598 01000200 00000000 00000000 00000000  ................
 4005a8 48656c6c 6f20776f 726c6400           Hello world. 
```

如果您的不同，请发布代码等。

# css - ::在浏览器中选择背景颜色和颜色渲染

> ID：11075474
> 
> 赞同：5
> 
> 时间：2012-06-17T23:03:46.400
> 
> 标签：css, google-chrome, firefox, selection, background-color

## 问题

使用以下内容在浏览器`-webkit-`中根本无法正常工作：`-moz-`

```
#exampleElement {
    background-color: red; /* For example */
}

#exampleElement ::selection {
    color: black;
    background-color: white;
} 
```

## 结果：WebKit 和 Blink 驱动的浏览器

在 Chrome、Opera 和 Safari 中，`::selection`的`background-color`呈现好像是 50% 的 alpha 但字体颜色是正确的。

铬 29.0.1547.62：
![铬 29.0.1547.62](../Images/579c63aa459b5719525a8381cd673dc5.png)

歌剧 15.0.1147.130：
![歌剧 15.0.1147.130](../Images/66f9a63a57860232fe5aaf469bcbc0ac.png)

Safari 5.34.57.2：
![Safari 5.34.57.2](../Images/81ba343e2f67850f4c4bf4e04f33dbe6.png)

## 结果：Gecko 驱动的浏览器

在 Firefox 中，整个`::selection`规则被忽略。由于' 的黑暗， `::selection`'`background-color`恰好是白色的（感谢@BoltClock 注意到这一点）`#exampleElement``background-color`

火狐 22.0：
![火狐 22.0](../Images/94c4d0b8831c05a9c759afd1fe4e5957.png)

## 结果：支持 Trident 的浏览器

在 Internet Explorer 中，（您相信吗）一切都完美呈现。

Internet Explorer 10.0.9200.16660：
![Internet Explorer 10.0.9200.16660](../Images/55880b09eb8c0a245035e85f8ad68807.png)

这只是这些渲染引擎/浏览器的一个缺陷，还是有我不知道的替代方案`-webkit-`？`-moz-`

我在 jsFiddle 上保存了一个示例，供人们查看：http: [//jsfiddle.net/BWGJ2/](http://jsfiddle.net/BWGJ2/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T23:43:26.897

根据[quirksmode.org](http://www.quirksmode.org/css/selection.html)，`-webkit-selection`确实`-moz-selection`可用。我刚刚使用 Chrome (18) 和 Firefox (13) 对其进行了测试，并且可以确认它可以与 Firefox 一起使用，但是我在 Chrome 上没有成功`-webkit-selection`（它忽略了它），并且根据[这个 SO question](https://stackoverflow.com/questions/7545550/has-the-webkit-selection-selector-ever-been-supported)它不存在（答案说这也`::selection` *应该*适用于所有浏览器，但也不适用于我）。

正如[这个答案](https://stackoverflow.com/a/7224621/458274)中已经提到的那样，Chrome 强制选择透明，但您可以使用解决此问题

```
background:rgba(255, 255, 255, 0.99); 
```

有关更多详细信息，请查看 tw16 的链接答案

* * *

此外，这在 FF 上对我有用：

```
::selection { /* stuff */ }
::-moz-selection { /* stuff */} 
```

但这不会：

```
::selection, ::-moz-selection { /* stuff */ } 
```

但也许这与所有伪元素无关`::selection`但确实适用于所有伪元素，找不到答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T23:25:53.543

有[依赖于浏览器的版本](http://www.quirksmode.org/css/selection.html)。您使用的版本是标准的 CSS3 方式，但后来它[从 spec](http://www.ericfeminella.com/blog/2011/11/02/css3-selection-colors/)中删除了。我不知道它的浏览器支持...

还有其他需要考虑的事情：基于 ID 的 CSS 选择器可能会“[超过](http://www.vanseodesign.com/css/css-specificity-inheritance-cascaade/)”基于伪类的选择器，从而导致基于 ID 的 CSS 始终优先。因此，请尝试添加`!important`到您的`::selection`样式中，以确保在适用时始终使用它。

希望有帮助！

# animation - 由外部数据驱动的轻量级 3D 动画

> ID：11075479
> 
> 赞同：1
> 
> 时间：2012-06-17T23:04:32.080
> 
> 标签：animation, 3d

我是一名结构工程硕士生，从事葡萄牙寺庙结构的抗震评估工作。为了评估，我创建了结构的 3D 块模型，并将使用离散元代码来分析结构在各种地震（地震）记录下的行为。我将用于分析的软件能够定期生成结构的快照，然后可以将这些快照组合起来制作响应视频。但是，生成图像会减慢分析速度。此外，由于图片是特定角度的 2D 图像，因此无法在不重新运行模型的情况下旋转并查看其他角度的响应（当前需要 3 天的计算机时间）。

我正在寻找另一种方法来创建结构响应的电影。我想要的是一个非常轻量级的解决方案，我可以在其中引入我拥有的块模型，然后通过定期输入每个块的位置和三个主轴来生成动画，以动态生成动画。这些块被描述为具有定义所有顶点的顶部和底部平面的棱柱。由于模型是作为文本文件生成的，因此我可以修改输出，以便动画代码可以读取和理解它。该模型由大约 180 个块组成，每个块有 24 个顶点（即 4320 个顶点）。描述块轴的位置和三个单位向量是由程序产生的，我可以用我想要的方式把它们写出来。

主要问题是动画的质量应该不错。如果系统是基于矢量的并允许缩放，那就太好了。我希望能够通过简单的鼠标拖动实时旋转模型，而不会出现太多滞后或其他问题。

我的时间非常有限（实际上我已经很落后了）。这就是为什么我想问这里的专家，这样我就不会把时间浪费在最终不会奏效的事情上。我一直在使用 Rhino 和 Grasshopper 来生成我的模型，但我认为它不是用于此目的的正确工具。我在想处理可能能够处理这个问题，但我没有任何经验。我想做的另一件事是可能有一个 3D PDF 文件用于分发。但我不确定这是否可以用 3D PDF 完成。

非常感谢任何见解或指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T23:21:56.853

不要让这个名字欺骗了您，但商业软件[**BluffTitler DX9**](http://www.outerspace-software.com/blufftitler.html)可能正是您想要的。

它简单的界面提供了快速的学习曲线，可以快速教程观看或剖析。根据 GPU 的速度，实时预览是可扩展的。

**参考：**
[**模型层页面**](http://www.outerspace-software.com/modellayer.html)

[**用户提交的图库（3D 模型）**](http://www.outerspace-software.com/gallery/imagebrowser.php?F=32)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T18:44:16.883

来自 tetra4D 的 Jim Merry 在这里。我们为 Acrobat X 制作 3D CAD 转换工具来生成 3D PDF。Acrobat 有一个 3D javascript API，使您能够操作对象，即，在将模型转换为 3D PDF 后，您可以从动画信息中驱动对象的平移、旋转等。但是，如果您赶时间，我不确定我会推荐这种方法。另外 - 我认为您使用的格式（Rhino、Grasshopper、Processing）没有任何商业 3D PDF 生成工具。

如果您尝试对几何变形进行动画处理，3D PDF 根本无法帮助您。您可以捕获动画并将其编码为 Flash 视频并嵌入 PDF，但这是 Acrobat Pro 中多媒体工具的功能，即，并非特定于 3D。

# c - remquo：论点减少？

> ID：11075483
> 
> 赞同：6
> 
> 时间：2012-06-17T23:05:10.453
> 
> 标签：c, math, floating-point, numerical

在 C99 规范中，它提到了 remquo：

> remquo 函数旨在实现可以利用商的一些低位的参数缩减。请注意，x 相对于 y 的大小可能非常大，以至于商的精确表示是不切实际的。

在这种情况下，什么是“参数减少”，以及可以利用商的几个低位的示例是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T00:46:49.577

参数缩减意味着将周期函数的参数映射到规范周期（例如，（-π,π] 或类似）。如果使用 π/2 作为除数，商的​​低位足以确定三角函数的右符号/等。

然而不幸的是，`remquo`它对于实现标准的三角参数归约是无用的，因为`π`它是不合理的；*以 π 的近似值*为模减少大参数将为您提供*没有有效位*的结果，即所有错误。

但是，如果您正在编写`f(x)`定义为 sin(πx) 或类似函数的函数，则句点现在可以用浮点数精确表示，并且`remquo`可以完全满足您的需要，而`sin(2*M_PI*x)`直接调用将给出没有有效位的结果（即所有错误）什么时候`x`大。

# android - LinearLayout 应填充最小空间

> ID：11075485
> 
> 赞同：0
> 
> 时间：2012-06-17T23:05:17.867
> 
> 标签：android, android-layout, android-linearlayout

我有这个布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:gravity="left">
    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal">
        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Some text" />
    </LinearLayout>
    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="TextView"/>
</LinearLayout> 
```

但是，如果在第一个文本视图（在 LinearLayout 中）有很多文本，第二个文本视图就会离开屏幕。这可以通过将 android:layout_weigh="1" 设置为线性布局来解决。但是在这种情况下，线性布局将填充所有空间，并且我需要线性布局在短文本中填充最小空间，并且在线性布局中有很多文本时不隐藏第二个文本视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T23:16:24.077

一种解决方案是将您的第一个 TextView 放在 ScrollView 中，并将您的第二个 TextView 放在永远不会隐藏的固定页脚中（这可以通过[RelativeLayout](https://stackoverflow.com/questions/2318775/how-to-create-fixed-footer-in-android-layout)来完成）。

如果您的第一个 TextView 中有太多文本，那么您将能够在显示第二个 TextView 的同时滚动它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T23:12:26.840

如果第一个 textview 占用太多水平空间，第二个 textview 会渲染到屏幕外...

为了避免将第二个 textview 渲染到屏幕之外，您需要限制第一个 textview 的水平尺寸。你可以给第一个 textview 一个 android:layout_width 一个固定的数值。您可以将 android:singleLine 设置为 false。您可以将 android:maxWidth 设置为适当的值。（我没有尝试过这些解决方案，但它们应该可以工作）。

或者，您可以考虑使用单个 textview 而不是连续使用两个。

# ruby-on-rails-3 - 使用 Ruby on Rails 3 使用 MindBodyOnline Web 服务

> ID：11075488
> 
> 赞同：1
> 
> 时间：2012-06-17T23:05:52.343
> 
> 标签：ruby-on-rails-3, web-services, wsdl, mindbody

我有一个 Ruby on Rails 3 应用程序，我想使用[http://clients.mindbodyonline.com/api/0_5/ClassService.asmx?op=GetClasses](http://clients.mindbodyonline.com/api/0_5/ClassService.asmx?op=GetClasses)来显示站点上的类列表。

在 Rails 上执行此操作的推荐方法是什么？HTTP派对？

这是我正在使用的 API的[文档。](http://api.mindbodyonline.com/Doc)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T23:22:46.817

有一个使用 MindBody api 的 gem。我没有亲自使用它，但看起来它是同一个api。

```
http://rubygems.org/gems/mindbody 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-08T02:14:10.640

我用来使用 MindBody Web 服务的 Ruby gem 是 mindbody [-api gem](https://github.com/wingrunr21/mindbody-api)。

在我看来，它围绕 MindBody API 服务提供了易于使用的接口包装器，并且绝对让我在时间上比直接使用 Savon 创建自己的客户端等更方便。

# c# - 无法调用获取 Windows Azure 缓存实例

> ID：11075491
> 
> 赞同：0
> 
> 时间：2012-06-17T23:06:12.263
> 
> 标签：c#, azure, azure-storage, azure-worker-roles

尝试在 Windows Azure 中创建新的专用缓存角色，但`NotSupportedException: This operation is not supported by the cache`每次运行此代码时都会出现异常。作为总结，这是我所做的......

我使用以下代码构建缓存，并且只要我调用就会发生异常`GetCache(string)`：

```
_dataCacheFactory = new DataCacheFactory();
_cache = _dataCacheFactory.GetCache(cacheName); 
```

此外，我添加了适当的`<dataCacheClients>`配置部分和对以下程序集的引用（*所有引用中的程序集`Program Files\Microsoft SDKs\Windows Azure\.NET SDK\2012-06\ref`*）：

*   Microsoft.ApplicationServer.Caching.AzureClientHelper
*   Microsoft.ApplicationServer.Caching.AzureCommon
*   Microsoft.ApplicationServer.Caching.Client
*   Microsoft.ApplicationServer.Caching.Core
*   Microsoft.Web.DistributedCache

我还在 Azure 项目中设置了缓存辅助角色。

据我所知，我已经遵循了所有 MSDN 文档，任何人都可以建议这里可能有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T14:33:33.910

我猜您正在尝试获取命名缓存，Azure 共享缓存[不支持该缓存。](http://msdn.microsoft.com/en-us/library/windowsazure/gg278350.aspx)而不是`_dataCacheFactory.GetCache(cacheName)`，尝试使用`_dataCacheFactory.GetDefaultCache()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T16:21:17.883

当您使用[Windows Azure 缓存（专用和同位缓存）](https://www.windowsazure.com/en-us/develop/net/how-to-guides/cache/)时，您必须使用下面的参考资料（这是作为预览发布的）：

```
C:\Program Files\Microsoft SDKs\Windows Azure\.NET SDK\2012-06\ref\CachingPreview 
```

此外，当您使用[Windows Azure 共享缓存](http://msdn.microsoft.com/en-us/library/windowsazure/gg278356.aspx)时，您应该使用以下参考：

```
C:\Program Files\Microsoft SDKs\Windows Azure\.NET SDK\2012-06\ref\ 
```

**Windows Azure Cache (Dedicated and Co-located Cache)**和**Windows Azure Shared Cache**之间的区别在于，第一个缓存位于您的虚拟机中并通过创建累积共享缓存在实例之间共享，而第二个位于您的虚拟机之外（在 Windows Azure 中，您从 Windows Azure 管理门户配置它）并且所有实例都通过网络管道连接此缓存。

# sql - 在帖子中捕获第一个 img，将其删除然后关联为自定义字段发布？

> ID：11075493
> 
> 赞同：0
> 
> 时间：2012-06-17T23:06:32.077
> 
> 标签：sql, wordpress, custom-fields

在我的 WordPress 博客中有超过 500 篇文章。

**每个帖子都以小图像开头。**

我想从内部帖子中删除那些小图像并将它们显示为自定义字段。

我需要很长时间才能浏览所有帖子并进行必要的更改。

是否可以运行能够执行以下操作的 SQL 查询：

1.  捕捉小图像。
2.  从帖子中删除小图像。
3.  将小图像作为自定义字段关联到帖子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T23:38:18.520

我不认为 sql 可以做到这一点。相反，我会使用我刚刚在 Google 上搜索过的解析器 (http://simplehtmldom.sourceforge.net/) 编写一个小的 php 脚本来执行类似这样的操作（在伪代码中，您需要完成此操作）：

```
$post_collection = query('get all posts');

for( $i = 0; $i < $post_collection.length; $i++ ) {
  $html =  str_get_html( $post_collection[$i] );
  $that_first_image = $html->find('img', 1);
  query('save $that_first_image to custom field');
  $html->find('img', 1) = '';
  query('save $html over the old post');
} 
```

# c# - 构建 Windows 资源管理器扩展

> ID：11075496
> 
> 赞同：2
> 
> 时间：2012-06-17T23:07:00.970
> 
> 标签：c#, .net, python, windows, contextmenu

我正在寻找构建一个应用程序，该应用程序将依赖于向右键单击文件或文件夹时出现的菜单添加菜单扩展。我听说你可以用 Python 构建它，这里是我目前正在查看的资源：

[http://docs.python.org/extending/extending.html](http://docs.python.org/extending/extending.html)

[http://docs.python.org/extending/windows.html#building-on-windows](http://docs.python.org/extending/windows.html#building-on-windows)

但是，我不太确定我是否在寻找这种东西的正确方向。我应该寻找什么，是否可以在 Python 中构建这种东西，或者我必须学习 C#/.NET？

谢谢！

编辑：看起来这些东西被称为上下文菜单，并且涉及向注册表添加条目以便将应用程序与某些文件类型相关联。在这种情况下，我应该让我的应用程序在后台监听条目中的操作吗？此外，如果您知道如何在 OS X 中做同样的事情，或者为此有一些漂亮的跨平台的东西，那将是非常漂亮的！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T00:42:42.107

这是示例代码中的[示例代码](http://www.codeproject.com/Articles/10104/Add-a-context-menu-to-the-Windows-Explorer)。

另一种方法是使用 Windows 资源管理器工具来操作注册表，例如“*打开方式”*选项。基本上，使用它将文件扩展名与打开可执行文件相关联。但是，此技术不会将菜单项添加到 Windows 资源管理器中。但这更容易。

# c# - 带有复选框的 Winform TreeView - 仅更新可见节点

> ID：11075498
> 
> 赞同：3
> 
> 时间：2012-06-17T23:07:35.787
> 
> 标签：c#, winforms, treeview, checkbox

我是新来的，几乎到处都在寻找我的问题的答案 - 无济于事。我希望这里有人可以提供帮助。

我有一个 WinForm 应用程序，我使用 TreeView 在选定的根文件夹下显示文件夹结构。树视图已启用复选框。当我选中或取消选中 TreeNode 上的复选框时，该 TreeNode 下方的任何可见节点也会发生变化 - 到目前为止一切都很好。

问题是，当我进一步扩展节点时，新的可见节点*不会*更新到正确的状态。

我使用以下递归例程来执行更新：

```
 private void CheckAllChildNodes(TreeNode treeNode, bool nodeChecked)
    {
        foreach (TreeNode node in treeNode.Nodes)
        {
            node.Checked = nodeChecked;
            if (node.Nodes.Count > 0)
            {
                // If the current node has child nodes, call the
                // CheckAllChildNodes method recursively.
                CheckAllChildNodes(node, nodeChecked);
            }
        }
    } 
```

从此事件处理程序调用它：

```
 private void FileTreeView_AfterCheck(object sender, TreeViewCancelEventArgs e)
    {
        // The code only executes if the user caused the checked state to change.
        if (e.Action == TreeViewAction.ByMouse)
        {
            if (e.Node.Nodes.Count > 0)
            {
                // Calls the CheckAllChildNodes method, passing in the current
                // checked value of the TreeNode whose checked state changed.
                CheckAllChildNodes(e.Node, e.Node.Checked);
            }
        }
    } 
```

似乎递归函数只关心在执行时可见的 TreeNodes。

如果任何人都可以提供错误的线索，以及可以采取哪些措施来纠正它，将不胜感激。

提前致谢。

此致，

L.胡梅尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T01:55:30.413

两件事情。一，你也不需要“if (e.Node.Nodes.Count > 0)”。这有点多余，好像当您调用“foreach”时有 0 个节点，它会立即退出循环。

二，最简单的解决方案可能是只连接到 AfterExpand 方法，当节点展开时，然后设置子节点：

```
private void FileTreeView_AfterExpandobject sender, TreeViewEventArgs e)
{
    // Calls the CheckAllChildNodes method, passing in the current
    // checked value of the TreeNode whose checked state changed.
    CheckAllChildNodes(e.Node, e.Node.Checked);        
} 
```

另外，您确定要在事件方法中使用 TreeViewCancelEventArgs，而不仅仅是 TreeViewEventArgs？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T00:44:32.073

如果您使用数据绑定，则可能不是 TreeView 问题，而是数据绑定问题。它不会更新不可见的控件。有关 Winforms Tabcontrol 问题，请参阅此[MSDN 线程](http://social.msdn.microsoft.com/Forums/en-US/winformsdatacontrols/thread/70f0bbbb-07d5-4253-9a79-789700a8450a)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-17T23:14:10.640

我试图复制您在代码中可能正在做的事情，请您使用此代码并确认它是否有效或者您面临同样的问题。

```
 private void PopulateFolderTreeView(string directories, TreeNode parentNode)
            {
                string[] directoriesArray = Directory.GetDirectories(directories);
                string[] filesArrays = Directory.GetFiles(directories);
                if (directoriesArray.Length != 0)
                {
                    foreach (string currentDirectory in directoriesArray)
                    {
                        TreeNode myNode = new TreeNode(Path.GetFileNameWithoutExtension(currentDirectory));
                        if (parentNode == null)
                        {
                            treeView1.Nodes.Add(myNode);
                        }
                        else
                        {
                            parentNode.Nodes.Add(myNode);
                        }
                        PopulateFolderTreeView(currentDirectory, myNode);
                    }

                }
                if (filesArrays.Length != 0)
                {
                    foreach (string currentFile in filesArrays)
                    {
                        TreeNode myNode = new TreeNode(Path.GetFileName(currentFile));
                        if (parentNode == null)
                        {
                            treeView1.Nodes.Add(myNode);
                        }
                        else
                        {
                            parentNode.Nodes.Add(myNode);
                        }
                        //PopulateTreeView(currentDirectory, myNode);
                    }

                }
            }

     private void CheckAllChildNodes(TreeNode treeNode, bool nodeChecked)
            {
                foreach (TreeNode node in treeNode.Nodes)
                {
                    node.Checked = nodeChecked;
                    if (node.Nodes.Count > 0)
                    {
                        // If the current node has child nodes, call the
                        // CheckAllChildNodes method recursively.
                        CheckAllChildNodes(node, nodeChecked);
                    }
                }
            }

            private void treeView1_AfterCheck(object sender, TreeViewEventArgs e)
            {
                // The code only executes if the user caused the checked state to change.
                if (e.Action == TreeViewAction.ByMouse)
                {
                    if (e.Node.Nodes.Count > 0)
                    {
                        // Calls the CheckAllChildNodes method, passing in the current
                        // checked value of the TreeNode whose checked state changed.
                        CheckAllChildNodes(e.Node, e.Node.Checked);
                    }
                }

            } 
```

将此行放在 Form Load 事件或 Button Click 事件中

```
PopulateFolderTreeView(@"C:\Program Files\", null); 
```

# ios - 选择时子类 UITableViewCell 的奇怪行为

> ID：11075501
> 
> 赞同：1
> 
> 时间：2012-06-17T23:08:06.650
> 
> 标签：ios, uitableview

我有一个 UITableViewCell 的子类，其中有许多 UILabel、一个 UIImageView 和一个 UIView。

我将单元格设置为在选中时突出显示蓝色。我观察到的奇怪行为是我添加为 UITableViewCell 子类的属性的 UIView 在选择单元格时消失，并在取消选择单元格时返回。This UIView is just an empty view with a background color, so it is possible that the background color is being set to clear when the table view cell is selected. 其他元素均不受影响。

有谁知道这里发生了什么，以及如何解决它？

# c# - 获取三角形内的所有点

> ID：11075505
> 
> 赞同：5
> 
> 时间：2012-06-17T23:09:09.530
> 
> 标签：c#, polygon, fill

我有三点，例如：

```
Start 194 171
Right 216 131
Left  216 203 
```

我想得到那个三角形内的所有点。我将如何有效地做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T01:05:21.193

*请参阅[z3nth10n 的答案](https://stackoverflow.com/a/53730713/1282539)以获得更好的输入验证*

**介绍：**

总体思路是为范围内的每个 x 获取三角形的边缘（y-Wise），然后对于每个单个 x，您拥有三角形内存在的所有 y，通过简单的转换变成三角形内的所有点。

您可以将其视为将三角形切成条状，每个条的宽度为 1。因此，对于 X=0，在 A 和 B 之间的线上，Y 为 6，在 A 和 C 之间的线上，Y是-2，所以你可以看到X=0的条带在-2和6之间。因此，你可以看出(0, -2) (0, -1) (0, 0) ... (0 , 5) (0, 6) 都在三角形中。对三角形内最小和最大之间的 X 执行此操作，您将拥有三角形中的所有点！

**速度：**

> 对于三角形**(0, 0) (1, 8) (4, 6)** - 找到**16 个点。**
> 
> **在 3.68 秒内**完成1,000,000 次。

 ****执行：**

```
public IEnumerable<Point> PointsInTriangle(Point pt1, Point pt2, Point pt3)
{
    if (pt1.Y == pt2.Y && pt1.Y == pt3.Y)
    {
        throw new ArgumentException("The given points must form a triangle.");
    }

    Point tmp;

    if (pt2.X < pt1.X)
    {
        tmp = pt1;
        pt1 = pt2;
        pt2 = tmp;
    }

    if (pt3.X < pt2.X)
    {
        tmp = pt2;
        pt2 = pt3;
        pt3 = tmp;

        if (pt2.X < pt1.X)
        {
            tmp = pt1;
            pt1 = pt2;
            pt2 = tmp;
        }
    }

    var baseFunc = CreateFunc(pt1, pt3);
    var line1Func = pt1.X == pt2.X ? (x => pt2.Y) : CreateFunc(pt1, pt2);

    for (var x = pt1.X; x < pt2.X; x++)
    {
        int maxY;
        int minY = GetRange(line1Func(x), baseFunc(x), out maxY);

        for (var y = minY; y <= maxY; y++)
        {
            yield return new Point(x, y);
        }
    }

    var line2Func = pt2.X == pt3.X ? (x => pt2.Y) : CreateFunc(pt2, pt3);

    for (var x = pt2.X; x <= pt3.X; x++)
    {
        int maxY;
        int minY = GetRange(line2Func(x), baseFunc(x), out maxY);

        for (var y = minY; y <= maxY; y++)
        {
            yield return new Point(x, y);
        }
    }
}

private int GetRange(double y1, double y2, out int maxY)
{
    if (y1 < y2)
    {
        maxY = (int)Math.Floor(y2);
        return (int)Math.Ceiling(y1);
    }

    maxY = (int)Math.Floor(y1);
    return (int)Math.Ceiling(y2);
}

private Func<int, double> CreateFunc(Point pt1, Point pt2)
{
    var y0 = pt1.Y;

    if (y0 == pt2.Y)
    {
        return x => y0;
    }

    var m = (double)(pt2.Y - y0) / (pt2.X - pt1.X);

    return x => m * (x - pt1.X) + y0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-12-11T19:00:49.673

[@SimpleVar](https://stackoverflow.com/users/1282539/simplevar)答案很好，但它缺乏对有效三角形的良好检查。（这可能会导致溢出问题）。

所以我为 Unity3D 做了自己的实现：

```
public static IEnumerable<T> PointsInTriangle<T>(T pt1, T pt2, T pt3)
   where T : IPoint
{
    /*
         // https://www.geeksforgeeks.org/check-whether-triangle-valid-not-sides-given/
         a + b > c
         a + c > b
         b + c > a
     */

    float a = Vector2.Distance(new Vector2(pt1.x, pt1.y), new Vector2(pt2.x, pt2.y)),
          b = Vector2.Distance(new Vector2(pt2.x, pt2.y), new Vector2(pt3.x, pt3.y)),
          c = Vector2.Distance(new Vector2(pt3.x, pt3.y), new Vector2(pt1.x, pt1.y));

    if (a + b <= c || a + c <= b || b + c <= a)
    {
        Debug.LogWarning($"The given points must form a triangle. {{{pt1}, {pt2}, {pt3}}}");
        yield break;
    }

    if (TriangleArea(pt1, pt2, pt3) <= 1)
    {
        Point center = GetTriangleCenter(pt1, pt2, pt3);
        yield return (T)Activator.CreateInstance(typeof(T), center.x, center.y);

        return;
    }

    T tmp;

    if (pt2.x < pt1.x)
    {
        tmp = pt1;
        pt1 = pt2;
        pt2 = tmp;
    }

    if (pt3.x < pt2.x)
    {
        tmp = pt2;
        pt2 = pt3;
        pt3 = tmp;

        if (pt2.x < pt1.x)
        {
            tmp = pt1;
            pt1 = pt2;
            pt2 = tmp;
        }
    }

    var baseFunc = CreateFunc(pt1, pt3);
    var line1Func = pt1.x == pt2.x ? (x => pt2.y) : CreateFunc(pt1, pt2);

    for (var x = pt1.x; x < pt2.x; ++x)
    {
        int maxY;
        int minY = GetRange(line1Func(x), baseFunc(x), out maxY);

        for (int y = minY; y <= maxY; ++y)
            yield return (T)Activator.CreateInstance(typeof(T), x, y);
    }

    var line2Func = pt2.x == pt3.x ? (x => pt2.y) : CreateFunc(pt2, pt3);

    for (var x = pt2.x; x <= pt3.x; ++x)
    {
        int maxY;
        int minY = GetRange(line2Func(x), baseFunc(x), out maxY);

        for (int y = minY; y <= maxY; ++y)
            yield return (T)Activator.CreateInstance(typeof(T), x, y);
    }
}

private static int GetRange(float y1, float y2, out int maxY)
{
    if (y1 < y2)
    {
        maxY = Mathf.FloorToInt(y2);
        return Mathf.CeilToInt(y1);
    }

    maxY = Mathf.FloorToInt(y1);
    return Mathf.CeilToInt(y2);
}

private static Func<int, float> CreateFunc<T>(T pt1, T pt2)
    where T : IPoint
{
    var y0 = pt1.y;

    if (y0 == pt2.y)
        return x => y0;

    float m = (float)(pt2.y - y0) / (pt2.x - pt1.x);

    return x => m * (x - pt1.x) + y0;
}

    public static float TriangleArea<T>(T p1, T p2, T p3)
        where T : IPoint
    {
        float a, b, c;

        if (!CheckIfValidTriangle(p1, p2, p3, out a, out b, out c))
            return 0;

        return TriangleArea(a, b, c);
    }

    public static float TriangleArea(float a, float b, float c)
    {
        // Thanks to: http://james-ramsden.com/area-of-a-triangle-in-3d-c-code/

        float s = (a + b + c) / 2.0f;
        return Mathf.Sqrt(s * (s - a) * (s - b) * (s - c));
    }

    public static Point GetTriangleCenter<T>(T p0, T p1, T p2)
        where T : IPoint
    {
        // Thanks to: https://stackoverflow.com/questions/524755/finding-center-of-2d-triangle

        return new Point(p0.x + p1.x + p2.x / 3, p0.y + p1.y + p2.y / 3);
    }

    public static bool CheckIfValidTriangle<T>(T v1, T v2, T v3, out float a, out float b, out float c)
        where T : IPoint
    {
        a = Vector2.Distance(new Vector2(v1.x, v1.y), new Vector2(v2.x, v2.y));
        b = Vector2.Distance(new Vector2(v2.x, v2.y), new Vector2(v3.x, v3.y));
        c = Vector2.Distance(new Vector2(v3.x, v3.y), new Vector2(v1.x, v1.y));

        if (a + b <= c || a + c <= b || b + c <= a)
            return false;

        return true;
    } 
```

`IPoint``Point`接口对于自己的实现可能是一个好点（对于像这样的库`Clipper, TessDotNet or Poly2Tri`）。您可以随时更改它（两个`UnityEngine.Vector2`或`System.Drawing.Point`）。

希望这可以帮助！

**编辑：**我在这里解决了所有错误：

我也回答了我自己的问题：[https ://stackoverflow.com/a/53734816/3286975](https://stackoverflow.com/a/53734816/3286975)**

# jquery - Modernizr 导致 jQuery Isotope 出错

> ID：11075507
> 
> 赞同：8
> 
> 时间：2012-06-17T23:10:23.607
> 
> 标签：jquery, modernizr, shopify, jquery-isotope

我正在尝试将 Modernizr 添加到此页面：[http](http://www.alternativeradio.org/pages/test) ://www.alternativeradio.org/pages/test 。Modernizr 工作正常，并在本网站的其他页面上完成其工作。但是在这个使用 jQuery Isotope 的页面上，添加：

```
<script src="http://cdn.shopify.com/s/files/1/0070/7142/t/1/assets/modernizr.custom.js?128259" type="text/javascript"></script> 
```

到 HEAD 会导致出现两个 Javascript 错误：

```
.   Uncaught TypeError: Object #<Object> has no method 'addTest' jquery.isotope.min.js:11
.   Uncaught TypeError: Object [object Object] has no method 'isotope' free-downloads:2151 
```

我尝试通过 Modernizr.load 加载 jquery.isotope.min.js，但无济于事。我错过了什么？谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-18T20:53:04.757

我解决了这个问题。我正在使用没有 Modernizr.addTest 的 Modernizr 构建，虽然 Isotope 包含自己的版本 Modernizr，它可以自行工作，但在没有 Modernizr.addTest 的 Isotope 之前加载 Modernizr 会导致此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T20:44:07.970

这是一个非常神秘的错误。尝试加载 jQuery isotope 的非缩小版本和 Modernizr 的非缩小版本，看看它是否更具描述性。鉴于消息中的“#”，我还将寻找不产生任何结果的 jQuery 选择器。

# c# - 使用 wpf 在 Windows 上的任何位置检测文本框

> ID：11075508
> 
> 赞同：2
> 
> 时间：2012-06-17T23:10:44.933
> 
> 标签：c#, .net, wpf, windows

我想知道如何单击任何文本框并在每次单击它们时调用屏幕键盘之类的应用程序。WPF 是否将我限制在程序中，或者我可以单击任何文本框，例如在浏览器上？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T07:30:00.190

是的，你当然可以这样做——我正在做的正是你在我编写的 SDK 中所要求的。您可以定义一个附加的依赖属性来订阅文本框的焦点和左键单击事件。这些处理程序然后触发屏幕键盘显示。

要将这个附加的依赖属性应用于所有文本框，您只需为文本框定义一个全局样式。所以全局样式将如下所示。请注意键和目标类型如何具有相同的值。这就是使您的应用程序将其应用于应用程序中的所有文本框的原因。您只需将此样式放在应用程序的全局位置，例如 App.xaml 的资源部分。

```
 <Style x:Key="{x:Type TextBox}" TargetType="{x:Type TextBox}">
    <Setter Property="sdk:ClientKeyboardController.AutoShowKeyboard" Value="True"/>
  </Style> 
```

这是我附加的依赖属性的缩减版本，您需要填写空白以弹出屏幕键盘：

```
public class ClientKeyboardController : DependencyObject
{
    /// <summary>
    /// <para>
    /// Set this property to true to enable the focus based keyboard popup functionality.
    /// This will request the client device show it's on-screen keyboard whenever the text
    /// box gets focus.
    /// </para>
    /// <para>
    /// Note: to hide the keyboard, either enable the AutoHideKeyboard dependency property
    /// as well, or manually hide the keyboard at an appropriate time.
    /// </para>
    /// </summary>
    public static readonly DependencyProperty AutoShowKeyboardProperty = DependencyProperty.RegisterAttached(
        "AutoShowKeyboard",
        typeof(bool),
        typeof(ClientKeyboardController),
        new PropertyMetadata(false, AutoShowKeyboardPropertyChanged));

    /// <summary>
    /// <see cref="AutoShowKeyboardProperty"/> getter.
    /// </summary>
    /// <param name="obj">The dependency object to get the value from.</param>
    /// <returns>Gets the value of the auto show keyboard attached property.</returns>
    [AttachedPropertyBrowsableForChildrenAttribute(IncludeDescendants = false)]
    [AttachedPropertyBrowsableForType(typeof(TextBoxBase))]
    public static bool GetAutoShowKeyboard(DependencyObject obj)
    {
        return (bool)obj.GetValue(AutoShowKeyboardProperty);
    }

    /// <summary>
    /// <see cref="AutoShowKeyboardProperty"/> setter.
    /// </summary>
    /// <param name="obj">The dependency object to set the value on.</param>
    /// <param name="value">The value to set.</param>
    public static void SetAutoShowKeyboard(DependencyObject obj, bool value)
    {
        obj.SetValue(AutoShowKeyboardProperty, value);
    }

    /// <summary>
    /// Set this property to true to enable the focus based keyboard hide functionality.
    /// This will request the client device to hide it's on-screen keyboard whenever the
    /// text box loses focus.
    /// </summary>
    public static readonly DependencyProperty AutoHideKeyboardProperty = DependencyProperty.RegisterAttached(
        "AutoHideKeyboard",
        typeof(bool),
        typeof(ClientKeyboardController),
        new PropertyMetadata(false, AutoHideKeyboardPropertyChanged));

    /// <summary>
    /// AutoHideKeyboard getter
    /// </summary>
    /// <param name="obj">The dependency object we want the value from.</param>
    /// <returns>Gets the value of the auto hide keyboard attached property.</returns>
    [AttachedPropertyBrowsableForChildrenAttribute(IncludeDescendants = false)]
    [AttachedPropertyBrowsableForType(typeof(TextBoxBase))]
    public static bool GetAutoHideKeyboard(DependencyObject obj)
    {
        return (bool)obj.GetValue(AutoHideKeyboardProperty);
    }

    /// <summary>
    /// AutoHideKeyboard setter.
    /// </summary>
    /// <param name="obj">The dependency object to set the value on.</param>
    /// <param name="value">The value to set.</param>
    public static void SetAutoHideKeyboard(DependencyObject obj, bool value)
    {
        obj.SetValue(AutoHideKeyboardProperty, value);
    }

    /// <summary>
    /// Handler for the AutoShowKeyboard dependency property being changed.
    /// </summary>
    /// <param name="d">Object the property is applied to.</param>
    /// <param name="e">Change args</param>
    private static void AutoShowKeyboardPropertyChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        TextBoxBase textBox = d as TextBoxBase;
        if (null != textBox)
        {
            if ((e.NewValue as bool?).GetValueOrDefault(false))
            {
                textBox.GotKeyboardFocus += OnGotKeyboardFocus;
                textBox.PreviewMouseLeftButtonDown += OnMouseLeftButtonDown;
            }
            else
            {
                textBox.GotKeyboardFocus -= OnGotKeyboardFocus;
                textBox.PreviewMouseLeftButtonDown -= OnMouseLeftButtonDown;
            }
        }
    }

    /// <summary>
    /// Handler for the AutoHideKeyboard dependency property being changed.
    /// </summary>
    /// <param name="d">Object the property is applied to.</param>
    /// <param name="e">Change args</param>
    private static void AutoHideKeyboardPropertyChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        TextBoxBase textBox = d as TextBoxBase;
        if (null != textBox)
        {
            if ((e.NewValue as bool?).GetValueOrDefault(false))
            {
                textBox.LostKeyboardFocus += OnLostKeyboardFocus;
            }
            else
            {
                textBox.LostKeyboardFocus -= OnLostKeyboardFocus;
            }
        }
    }

    /// <summary>
    /// Left click handler. We handle left clicks to ensure the text box gets focus, and if
    /// it already has focus we reshow the keyboard. This means a user can reshow the
    /// keyboard when the text box already has focus, i.e. they don't have to swap focus to
    /// another control and then back to the text box.
    /// </summary>
    /// <param name="sender">The text box that was clicked on.</param>
    /// <param name="e">The left mouse click event arguments.</param>
    private static void OnMouseLeftButtonDown(object sender, MouseButtonEventArgs e)
    {
        TextBoxBase textBox = sender as TextBoxBase;
        if (null != textBox)
        {
            if (textBox.IsKeyboardFocusWithin)
            {
                // TODO: Show on-screen keyboard
            }
            else
            {
                // Ensure focus is set to the text box - the focus handler will then show the
                // keyboard.
                textBox.Focus();
                e.Handled = true;
            }
        }
    }

    /// <summary>
    /// Got focus handler. Displays the client keyboard.
    /// </summary>
    /// <param name="sender">The text box that received keyboard focus.</param>
    /// <param name="e">The got focus event arguments.</param>
    private static void OnGotKeyboardFocus(object sender, KeyboardFocusChangedEventArgs e)
    {
        TextBoxBase textBox = e.OriginalSource as TextBoxBase;
        if (textBox != null)
        {
            // TODO: Show on-screen keyboard
        }
    }

    /// <summary>
    /// Lost focus handler. Hides the client keyboard. However we skip hiding if the new
    /// element that gains focus has got the auto-show keyboard attached property set to
    /// true. This prevents screen glitching from quickly showing/hiding the keyboard.
    /// </summary>
    /// <param name="sender">The text box that lost keyboard focus.</param>
    /// <param name="e">The lost focus event arguments.</param>
    private static void OnLostKeyboardFocus(object sender, KeyboardFocusChangedEventArgs e)
    {
        TextBoxBase textBox = e.OriginalSource as TextBoxBase;
        if (textBox != null)
        {
            bool skipHide = false;
            if (e.NewFocus is DependencyObject)
            {
                skipHide = GetAutoShowKeyboard(e.NewFocus as DependencyObject);
            }

            if (!skipHide && ClientKeyboardController.CmpInput != null)
            {
                // TODO: Hide on-screen keyboard.
            }
        }
    }
} 
```

请注意，此方法仅适用于您当前的 WPF 应用程序。如果您想为其他进程执行此操作，您将需要查看挂钩机制。例如，您可以使用[Microsoft Active Accessibility API](http://msdn.microsoft.com/en-us/library/windows/desktop/dd373592%28v=vs.85%29.aspx)或像[EasyHook](http://easyhook.codeplex.com/)这样的挂钩库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T23:40:45.730

您可能需要使用诸如钩子之类的东西来访问其他应用程序中的文本框等。看看这个链接[全局钩子中的东西](http://www.codeproject.com/Articles/18638/Using-Window-Messages-to-Implement-Global-System-H)

# php - 将用户注册和订阅添加到 PHP MySQL Web 应用程序

> ID：11075510
> 
> 赞同：2
> 
> 时间：2012-06-17T23:11:11.577
> 
> 标签：php, mysql

我已经在一个网络应用程序上工作了几个月了。这是一个 PHP 和 MySQL 驱动的数据库应用程序，将对象相互关联。

我想添加一些功能，以便有人可以注册使用它并设置每月订阅。当他们登录应用程序时，只需使用他们自己的数据库中的数据进行填充。

我已经在网上进行了一些搜索，但我正在努力寻找添加此类功能的起点。

该应用程序依赖于数据库中的六个表。所以我也不确定为每个用户创建一个单独的数据库是否可行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T23:14:16.490

为每个用户创建一个数据库很少见——它很复杂，而且好处很少，但也有很多缺点（例如，维护多个同时的数据库连接，因为大多数库只连接到一个数据库）。您真正需要做的是创建一个`user`表，然后用`UserId`.

当用户注册时，创建一条新`User`记录，然后在所有引用该 Id 的其他表中创建他们的新条目。（实际上，只有每个关系对象的“根”需要 a`UserId`例如如果你有`Order`并且`OrderItems`只有`Order`表需要 a `UserId`）

没有更多细节，就不可能提供进一步的帮助。

顺便说一句，您应该考虑 db-per-user 的唯一情况是每个用户都需要唯一的表（在这种情况下，您的应用程序必须非常复杂才能实际使用数据）或者如果存在安全问题：将数据存储在一起（多个客户比多个用户更有可能）。

# html - 如何正确放置此按钮？

> ID：11075512
> 
> 赞同：0
> 
> 时间：2012-06-17T23:11:13.963
> 
> 标签：html, css, layout

我正在尝试放置一个按钮。我将它的位置设置为绝对，所以我不知道如何正确放置它。

它的按钮上写着“这是您的产品吗？”

在此处查看示例：（已删除）

我希望它被放置在右侧边栏中小部件的顶部，周围有 5px 的间距。我怎么做？

我最初从这里获取按钮： http: [//cssdeck.com/t/uHhhprW6](http://cssdeck.com/t/uHhhprW6)

感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T23:18:27.553

如果您`Button`将始终在同一个地方，那么您可以这样做：

```
​.but {
    position: absolute;
    width: 80px;
    height: 25px;
    background-color: #DEDEDE;
    right: 0;
    margin: 5px;
}​ 
```

只需编辑您的`right`或`top`您想要的任何内容。[小例子](http://jsfiddle.net/L4j8K/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T23:18:41.260

如果`position: absolute`在按钮上使用，则可以使用、`top`和属性指定其位置。例如，要将具有 id 的元素定位到页面的右上角，顶部和右侧的间距均为 5px，您可以使用以下 CSS 代码：`right``bottom``left``button`

```
#button {
    position: absolute;
    top: 5px;
    bottom: 5px;
} 
```

如果你只是想让元素走到父元素的右边，你应该使用`float: right`. 然后你可以使用`margin-top`, `margin-right`, `margin-bottom`and`margin-left`来确保元素周围有一些边距。

请参阅我的[示例小提琴](http://jsfiddle.net/jhogervorst/2veqC/)以了解不同之处。请注意，两个“按钮”都在 HTML 代码中的同一个 div 内，但绝对定位的按钮似乎在该块之外。

有关 CSS 定位的更多信息，请查看[这篇文章](http://www.barelyfitz.com/screencast/html-training/css/positioning/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T23:20:12.087

当一个元素有时，您必须使用、和 来`position: absolute`定位它。您在此属性上使用的值应该相对于最近的定位祖先（“定位”元素是一个具有除空白或之外的值的元素）。`left``right``top``bottom``position``static`

例如，考虑以下 HTML：

```
<div id="container">
    <div id="position_me"></div>
</div> 
```

以及以下 CSS：

```
#container { 
    width: 500px; 
    height: 500px; 
    position: relative; 
    border: 1px solid green;
}
#position_me { 
    width: 20px; 
    height: 20px; 
    position: absolute; 
    left: 100px; 
    top: 100px;
    border: 1px solid red;
} 
```

红色框距离容器的上边框 100 像素，距离容器的左边框 100 像素。

请参阅[工作示例](http://jsfiddle.net/K9NLw/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-17T23:29:16.297

我可以让它工作的最快方法是从您的规则中删除`top`, `left`,`float`和`margin-left`声明，并将其更改为.`.email``position``relative`

```
.email {
position: relative; /* not absolute */
width: 220px;
height: 30px;
font: .75em "lucida grande", arial, sans-serif;
margin: 0 0 5px 0;
} 
```

我想有很多更清洁/更简单的方法来制作这个特定的按钮 - 包含元素及其子元素似乎有很多绝对定位。但我建议的更改似乎可以快速解决。

# android - 从应用程序列表加载应用程序

> ID：11075513
> 
> 赞同：0
> 
> 时间：2012-06-17T23:11:22.780
> 
> 标签：android

我目前正在开发一个 android 项目，其中列出了手机上安装的所有应用程序。当用户单击它时，它应该提供包名称，以便我稍后可以启动该应用程序。目前我将包名称存储在下一行，但我认为这可能会使某些用户感到困惑，因为他们并不真正需要知道包名称而只知道应用程序名称。

因此，有没有一种方法可以将包名称存储在 ListView 中（使用带有 TextView 和 ImageView 的自定义适配器），当用户选择应用程序名称时我可以检索它。

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T23:18:10.340

一种方法是，您可以使用setTag [(Object tag)](http://developer.android.com/reference/android/view/View.html#setTag%28java.lang.Object%29)或[setTag(int key, Object tag)](http://developer.android.com/reference/android/view/View.html#setTag%28int,%20java.lang.Object%29)来存储这个额外的信息，`TextView`或者任何从以下扩展的视图`View`：

```
TextView tv = findViewById(R.id.textview);
tv.setTag(<package_name_string>);

tv.getTag(); // to get the value. 
```

其他方法是将该信息单独存储`List`并确保可以通过适配器访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T23:17:28.557

> 因此，有没有一种方法可以将包名称存储在 ListView 中（使用带有 TextView 和 ImageView 的自定义适配器），当用户选择应用程序名称时我可以检索它。

数据已经在您的自定义适配器中。就像在[这个示例项目](https://github.com/commonsguy/cw-omnibus/tree/master/Introspection/Launchalot)中一样，您可能正在使用`ArrayAdapter`从以下`List<ResolveInfo>`位置返回的一个`queryIntentActivities()`：

```
List<ResolveInfo> launchables=pm.queryIntentActivities(main, 0);

Collections.sort(launchables, new ResolveInfo.DisplayNameComparator(pm)); 

adapter=new AppAdapter(pm, launchables); 
```

（在哪里`AppAdapter extends ArrayAdapter<ResolveInfo>`）

如果是这样，您将获得从适配器启动应用程序所需的信息：

```
 @Override
  protected void onListItemClick(ListView l, View v,
                                 int position, long id) {
    ResolveInfo launchable=adapter.getItem(position);
    ActivityInfo activity=launchable.activityInfo;
    ComponentName name=new ComponentName(activity.applicationInfo.packageName,
                                         activity.name);
    Intent i=new Intent(Intent.ACTION_MAIN);

    i.addCategory(Intent.CATEGORY_LAUNCHER);
    i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK |
                Intent.FLAG_ACTIVITY_RESET_TASK_IF_NEEDED);
    i.setComponent(name);

    startActivity(i);    
  } 
```

# java - 将文件保存在两个单独的文件夹中时出现 FileNotFoundException

> ID：11075515
> 
> 赞同：0
> 
> 时间：2012-06-17T23:11:58.747
> 
> 标签：java, file

我正在使用 Spring 和 Hibernate。我正在使用 commons-fileupload-1.2.2 上传图片，如下所示。

```
String itemName = null;
String files = null;        
String itemStatus="true";
Random rand=new Random();
Long randNumber=Math.abs(rand.nextLong());

Map<String, String> parameters=new HashMap<String, String>();

if (ServletFileUpload.isMultipartContent(request))
{
    ServletFileUpload upload = new ServletFileUpload(new DiskFileItemFactory());
    List<FileItem> items = null;

    try
    {
         items = upload.parseRequest(request);
    }
    catch (FileUploadException e)
    {
         mv.addObject("msg", e.getMessage());
         mv.addObject("status", "-1");
    }

    for(FileItem item:items)
    {                
        if (!item.isFormField()&&!item.getString().equals(""))
        {
             itemName = item.getName();
             parameters.put(item.getFieldName(), item.getName());
             itemName = itemName.substring(itemName.lastIndexOf(File.separatorChar) + 1, itemName.length());

             itemName=randNumber+itemName;
             files = files + " " + itemName;

             ServletContext sc=request.getSession().getServletContext();
             File savedFile = new File(sc.getRealPath("images") , itemName);
             item.write(savedFile);

             File medium = new File(sc.getRealPath("images"+File.separatorChar+"medium") , itemName);
             item.write(medium);
        }
    }
} 
```

`itemName`解析请求后的图像文件的名称在哪里（ `enctype="multipart/form-data"`）。

图像首先保存在`images`文件夹中，然后保存在文件`images/medium`夹中。它不起作用，`FileNotFoundException`但是当我只保存一个文件（注释掉其中一个文件）时

```
File savedFile = new File(sc.getRealPath("images") , itemName);
item.write(savedFile); 
```

或这个

```
File medium = new File(sc.getRealPath("images"+File.separatorChar+"medium") , itemName);
item.write(medium); 
```

有用。为什么不能一次将两个文件保存在不同的文件夹中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T23:30:26.920

我没有使用 apache `commons-fileupload`，但该函数的 apidoc`FileItem#write(File file)`说，两次编写相同的项目可能不起作用。

> 如果对同一项目多次调用此方法，则不能保证成功。这允许特定实现在可能的情况下使用例如文件重命名，而不是复制所有底层数据，从而获得显着的性能优势。

DiskFileItem 类的 JavaDoc 说，

> 此方法只保证工作一次，即第一次为特定项目调用它。这是因为，在该方法重命名临时文件的情况下，该文件将不再可用于复制或稍后再次重命名。

您可能还想查看这个 JIRA： [DiskFileItem Jira 问题](https://issues.apache.org/jira/browse/FILEUPLOAD-193)

参考：[FileItem JavaDoc](http://commons.apache.org/fileupload/apidocs/org/apache/commons/fileupload/FileItem.html#write%28java.io.File%29)，[DiskFileItem JavaDoc](http://commons.apache.org/fileupload/apidocs/org/apache/commons/fileupload/disk/DiskFileItem.html#write%28java.io.File%29)

# javascript - jQuery 的 css() 应用于滚动事件时滞后

> ID：11075525
> 
> 赞同：2
> 
> 时间：2012-06-17T23:13:38.457
> 
> 标签：javascript, jquery, webkit, scroll, lag

我正在尝试实现一个简单的“固定标题”表。我知道这在理论上只能用 CSS 来完成，但是当涉及到 OSX Lion 及其消失的滚动条时，它就不能很好地工作了。所以我用jQuery来做。

方法很简单，只需 1.5 行代码：

```
$('.inbox').scroll(function() {

    $(this).find('.inbox-headers').css('top', $(this).scrollTop());

}); 
```

**[演示](http://jsfiddle.net/Db5DT/)**。

这在 Firefox 中运行良好且流畅，但在 webkit 浏览器中却非常落后。为什么会发生这种情况以及如何优化此代码？或者也许以不同的方式解决问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-17T23:15:17.753

“滚动”事件**非常**频繁地触发。如果您在某些浏览器中滚动时修改 DOM，总是很难跟上。

您可以做的是以下其中一项：

1.  在您的情况下，`position: fixed;`可能是一个不错的选择。
2.  如果没有，则让事件处理程序在未来启动一个 100 毫秒的计时器，取消该过程中的任何先前计时器。这样，DOM 只会在滚动停止或暂停后更新。
3.  如果您想要连续更新，请在进行更新时跟踪时间戳，如果少于一定时间（100 毫秒或其他时间），则在处理程序中不执行任何操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T23:33:08.303

```
function debounce(func, wait) {
    var timeout;
    return function() {
        var context = this, 
            args = arguments,
            later = function() {
                timeout = null;
                func.apply(context, args);
            };
        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
    };
}
$('.inbox').scroll(debounce(function() {
    $(this).find('.inbox-headers').css('top', $(this).scrollTop());
}, 100)); 
```

这是我在这种情况下经常使用的一个小去抖功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T23:40:35.883

做静态表头最好的方法是把表头和表体严格分开：

然后你应该只对 .body DIV 应用一个溢出：滚动样式

1.  无绝对定位
2.  没有滚动事件

如果您的表格非常宽，那么无论如何您都需要使用**滚动**事件

# windows - 如何在 Windows 上保持 ssh 连接打开并将其与 perl 一起使用？

> ID：11075526
> 
> 赞同：2
> 
> 时间：2012-06-17T23:14:08.470
> 
> 标签：windows, perl, ssh, putty

我正在尝试处理我正在写入 VMware 服务器上的备份文件的旧脚本。

最初该脚本仅在 Linux 上运行，但现在我试图弄清楚如何让它在 Windows 上运行。我需要的大多数 perl 模块都可以在 Windows 和 Linux 上运行，这很好。但是我似乎找不到一个模块，那就是 SSH 模块。

我的计划是使用 putty 或 plink 将命令发送到服务器并将它们返回给脚本。但是我看到的问题是每次我在脚本中调用 putty 时，它都会打开与服务器的新连接并在完成后关闭它。我正在寻找的是一种在打开连接后打开连接的方法，使其保持打开状态，然后从该连接发送和接收。只有在脚本调用关闭函数或其他东西时才关闭它。

知道我可以在哪里遇到这样的事情吗？

除非其他人有更好的主意，因为我对任何事情都持开放态度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T00:38:58.963

[CPAN](http://www.cpan.org/)有很多 SSH 客户端模块，例如 Net::SSH、Net::SSH::Perl 和 Net::SSH2。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T08:20:20.533

您也可以尝试使用 Expect

[http://metacpan.org/pod/Expect](http://metacpan.org/pod/Expect)

# php - PHP中的渐变图效果，无需额外的包？

> ID：11075533
> 
> 赞同：4
> 
> 时间：2012-06-17T23:15:12.900
> 
> 标签：php, image, colors, gradient

我知道 Imagemagick 可以通过将图像转换为灰度，然后创建渐变并执行颜色查找表转换来实现“渐变映射”效果。

我想知道的是 PHP 的默认图像函数是否可以拍摄全彩色图像，并将其变成双色调。

如果 IMG_FILTER_COLORIZE 允许我指定两种颜色，它会起作用！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-12T01:25:39.033

如果想获得“渐变图”效果。程序是：

1.  将您的图像设置为灰度...最简单的方法是使用 ATSC 开发的用于 HDTV 的模型（[http://en.wikipedia.org/wiki/Grayscale](http://en.wikipedia.org/wiki/Grayscale)）：

> 亮度 = 0.2126 * R + 0.7152 * G + 0.0722 * B

2.  一旦你有了你的亮度，你必须创建一个函数来将亮度从 0~100% 映射到你想要的从 0%~100% 的颜色渐变......换句话说：

> 亮度 = 0% --> 颜色 A
> 
> 亮度 = 100% --> 颜色 B
> 
> luma = X% --> A 和 B 之间的插值 ... InterpolatedColor = X% * B + ( 100 - X )% * A

当然，将这些公式应用于所有通道 R、G 和 B。

一旦您可以访问图像的像素，这可以在 PHP 中轻松完成。

# jquery - 为什么我不能输入 datepicker 文本框？

> ID：11075541
> 
> 赞同：2
> 
> 时间：2012-06-17T23:16:51.043
> 
> 标签：jquery, jquery-ui, jquery-plugins, datetimepicker

我稍微调整了日期时间选择器的工作方式。它在选择更改时触发。

但现在我无法在文本框中输入。我不仅将文本框用于日期时间，还让用户在我的应用程序中输入其他类型的信息。

**如何让用户在此文本框中输入内容？**所以所有其他设置保持不变。Datepicker 仅在选择更改时触发。不是点击文本框本身。

[jsfiddle 示例](http://jsfiddle.net/radek/dPRjS/8/)

html代码

```
<input id="datetime" type="text" name="datetime" value="" >
<select size=5>
    <option value="not">Not this one</option>
    <option value="not">Not this one</option>
    <option value="not">Not this one</option>
    <option value="datetimepicker">Select date and time</option>
</select>​ 
```

javascript代码

```
$('#datetime').datetimepicker({
    showOn: "button",
});
$('option[value=datetimepicker]').click(function() {
    $('#datetime').datetimepicker('show');
});
​ 
```

CSS代码

```
.ui-datepicker-trigger{display:none;}​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T23:53:03.840

您的代码默认禁用您的 INPUT 并从中创建 datetimepicker“按钮”，这就是您无法在 INPUT 字段中打印文本的原因：

```
$('#datetime').datetimepicker({
    showOn: "button",
}); 
```

让我们进一步看：

```
$('option[value=datetimepicker]').click(function() {
  // This part of code will work when you click inside SELECT field
} 
```

因此，当您在 SELECT 内单击时，您需要将输入转换为 datetimepicker，对吗？

为此，您只需将 datetimepicker 的初始化移动到之前的块中：

```
$('option[value=datetimepicker]').click(function() {
    $('#datetime').datetimepicker({
        showOn: "button",
    });
    $('#datetime').datetimepicker('show');
}); 
```

现在您可以在内部输入，直到按下 SELECT。当 SELECT 被按下时，datapicker 启动并且您在 INPUT 字段中的文本消失。

这是修改过的小提琴：http: [//jsfiddle.net/dPRjS/9/](http://jsfiddle.net/dPRjS/9/)

* * *

## 更新：

要在 datetimepicker 关闭后添加编辑 INPUT 的可能性，您需要销毁字段 INPUT 上创建的 datetimepicker，以使其恢复为 INPUT 的可能性：

当您单击输入字段时，您需要激活此操作：

```
$('#datetime').click(function(){
     $('#datetime').datetimepicker( "destroy" );
 }); 
```

工作更新小提琴：http: [//jsfiddle.net/dPRjS/10/](http://jsfiddle.net/dPRjS/10/)

# java - 如何在不最大化和最小化框架的情况下让 KeyListener 工作？

> ID：11075545
> 
> 赞同：3
> 
> 时间：2012-06-17T23:17:26.430
> 
> 标签：java, keylistener

我正在尝试使用 Java 1.4.2 编写一个简单的游戏它使用两个主屏幕，这两个主屏幕都使用`JPanel`. 其中一个只有一个`MouseListener`并且工作完美；使用第一个，您可以打开第二个。第二个屏幕使用 a`MouseListener`和 a `KeyListener`。该`mousePressed`方法工作正常。但是，该`keyPressed`方法起初不起作用；为了让它工作，我必须最小化窗口，然后在它工作之前再次重新选择它。

在第一个屏幕中，我被建议`toFront()`在打开第二个屏幕时输入一个命令；ie`secondFrame.toFront()` 但是，它给了我一个错误，说`No method "toFront()" was found in type "secondFrame"`- 即使`secondFrame`extends `JPanel`。

我听说过一些关于“键绑定”的信息；我不熟悉这个话题，但我宁愿从核心解决这个问题，而不仅仅是求助于解决方法。如果可能的话，我想在仍然使用`KeyListener`.

代码片段：

```
public TowerDefenceBoard{
    (generic stuff)
    setFocusable (true);
    addKeyListener (this);
    requestFocusInWindow ();
} 
```

有谁知道为什么会这样？有人有建议吗？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T09:50:35.483

尝试`requestFocsInWindow()`使用`KeyListener`

# ruby-on-rails - 为什么我得到“未定义的方法`strip！' #" 使用 MiniMagick 时？

> ID：11075548
> 
> 赞同：0
> 
> 时间：2012-06-17T23:17:53.933
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

我将 strip 方法放在 CarrierWave 初始化程序中：

```
 def strip
   manipulate! do |img|
     img.strip!
     img = yield(img) if block_given?
     img
   end
 end 
```

并调用上传者：

```
 version :thumb do
   process :resize_to_fit => [180, nil]
   process :quality => 70
   process :strip   
 end 
```

现在 Rails 吐出这个错误：

> 未定义的方法`strip！为了 ＃

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T04:45:18.130

### 未定义的#strip 方法

你定义你的方法是这样的：

```
def strip
  manipulate! do |img|
    img.strip!
    img = yield(img) if block_given?
    img
  end
end 
```

但从您的代码示例中不清楚*img*是否真的有 #strip 或 #strip！方法。该错误是抱怨未定义爆炸方法，因此请尝试`img.strip`。

### 内省

如果这不起作用，您可能需要在方法中插入一些调试代码，以便您可以看到*img*到底是什么，以及它实际支持的方法。例如：

```
 manipulate! do |img|
    puts img.class
    puts img.methods.sort
    img.strip
    img = yield(img) if block_given?
    img
  end 
```

希望有帮助。

### 也可以看看

[CarrierWave::MiniMagick](http://carrierwave.rubyforge.org/rdoc/classes/CarrierWave/MiniMagick.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T23:26:15.757

只需删除

## ！

从地带。

# machine-learning - Scikits Learn：线性核 SVM 中的特征权重

> ID：11075556
> 
> 赞同：2
> 
> 时间：2012-06-17T23:18:42.843
> 
> 标签：machine-learning, svm, scikits, feature-selection, scikit-learn

我正在处理文本分类问题（情感分析）。我想知道 scikit-learn 中是否有任何选项可以为特征添加“权重”（作为重要性的衡量标准）。我检查了文档，发现[SVC 的属性“coefs”](http://scikit-learn.sourceforge.net/stable/modules/generated/sklearn.svm.SVC.html)，定义如下：

```
 coef_   array, shape = [n_class-1, n_features]  
    Weights asigned to the features (coefficients in the primal problem). 
   This is only available in the case of linear kernel.coef_ is readonly property derived from dual_coef_ and support_vectors_ 
```

但是，此属性似乎是只读的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T09:32:06.940

`coef_`向量是机器学习算法学习到的参数的视图。手动设置它们没有意义，因为它们会自动根据数据进行优化调整。你可以做的是：

*   如果您事先知道某些类比其他类更重要，请设置 class_weight

*   如果您对某些样本（数据集中的行）比其他样本更重要，请设置 sample_weight

*   重新调整特征以使某些特征比其他特征具有更大的方差，例如，如果您使用 RBF 内核并希望使某些特征比其他特征更重要（通常最好将所有特征缩放为单位方差）

*   如果您使用内核并希望以这种方式编码特殊的先验知识，请使用自定义的预计算内核。

对于文本分类，数据非常暗淡，内核通常只是浪费资源而几乎没有增加预测准确性，因此最后两点可能与您的特定问题无关。

# .net - 带有简单注入器的 IoC 任务调度程序设计和代码示例建议

> ID：11075558
> 
> 赞同：1
> 
> 时间：2012-06-17T23:18:53.010
> 
> 标签：.net, design-patterns, dependency-injection, inversion-of-control, simple-injector

嗨，我正在使用[Simple Injector](http://simpleinjector.codeplex.com/)，我正在尝试实现一个调度程序服务，该服务以可编程的常规频率调用命令。我的设计决策如下：

1）我有一个运行后台线程并从容器解析`ICommandHandler<SyncExternalDataCommand>.Handle(someParameter)`并调用命令句柄方法的服务。

`RegisterCommandAsBusinessUnitCronJob`将为每个 BusinessUnit 调用，并在每次调用时将 ID 作为参数传递。我们还可以实现`RegistercommandAsCustomerContactCronJob`遍历客户记录。

**用后台线程这样设计调度器可以吗？**

2）我试图将组合根容器和调度程序之间的耦合保持在最低限度。

使用 Action 助手委托的方法有助于将代码保留在组合根部分中，而不是在服务中。**通过使用不同的设计，这种耦合是否可以进一步减少，或者这种耦合是否可以接受？**

代码如下（它尚未成为线程安全的），非常欢迎对上面的设计决策和改进/重新设计发表评论。

谢谢，克里斯

**容器的引导**

```
void Register(Container container)
{
    container.RegisterSingle<IUnitOfWorkFactory>(
        new UnitOfWorkFactory(container));
    container.RegisterLifetimeScope<IUnitOfWork, UnitOfWork>();
    container.RegisterSingle<ILogger, Logger>();
    container.RegisterSingle<ICronJobService, CronJobService>();
    container.Register<ICommandHandler<SyncExternalDataCommand>, 
        SyncExternalDataCommandHandler>();

    var cronJobService = container.GetInstance<ICronJobService>();

    cronJobService.RegisterCommandAsBusinessUnitCronJob("* 1 * * *",
        (Int32 id) =>
        {
            var command = new SyncExternalDataCommand()
            {
                businessUnitId = id
            };

            using (container.BeginLifetimeScope()) 
            { 
                // handler must be resolved INSIDE the scope. 
                var handler =
         container.GetInstance<ICommandHandler<SyncExternalDataCommand>>(); 
                handler.Handle(command); 
            }
        }
    );
} 
```

**调度服务**

```
// to be instantiated as a singleton by IoC container
public class CronJobService : ICronJobService
{
    // this dictionary is for tasks that will be called with 
    // the business unit primary key (Int32).
    private cronJobs = new Dictionary<Action<Int32>, string>();

    public void RegisterCommandAsBusinessUnitCronJob(
        string cronString, Action<Int32> commandFactory)
    {
        cronJobs.Add(commandFactory, cronString);
    }

    // this below is called when we are running a task
    protected static bool RunCreateAndHandleThread(
        object parameter)
    {
        var jobParameters = (ThreadJobParameters)parameter;

        if (!cancellationTokenSource.IsCancellationRequested)
        {
            // we will need to construct new graph with a
            // proxy command
            jobParameters.helper(jobParameters.businessUnitId);
        }

        return true;
    }

    protected static void SomeBackgroundLoop(
        RunHandlePollingLoopParameters parameters)
    {
        IUnitOfWork unitOfWork = 
            parameters.unitOfWorkFactory.CreateUnitOfWork();

        using (unitOfWork)
        {
            var businessUnits = 
                unitOfWork.BusinessUnitRepository.Get();

            // loop through cron jobs and business units
            foreach (var helperFactory in parameters.cronJobs.Keys)
            {
                // its time to run this job...
                if (isTimeToRunCronjob) 
                {
                    var jobParameters = new ThreadJobParameters
                    {
                        helper = helperFactory,
                        businessUnitId = businessUnit.Id
                    };

                    Task.Factory.StartNew<bool>(
                        RunCreateAndHandleThread, 
                        jobParameters, 
                        CronJobService.cancellationTokenSource.Token, 
                        TaskCreationOptions.LongRunning, 
                        TaskScheduler.Default);
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T10:11:54.157

> 用后台线程这样设计调度器可以吗？

当然。只要一切都是线程安全的。从 DI 的角度来看没有问题，但是您当然需要确保共享依赖项是线程安全的（就像您必须对所有多线程应用程序一样）。但是，当服务在没有多线程的情况下具有足够的性能/速度时，使应用程序成为单线程的。这使一切变得容易得多。

> 通过使用不同的设计，这种耦合是否可以进一步减少，或者这种耦合是否可以接受？

可能。您`CronJobService`依赖于`Container`. 这不是问题，只要它是[Composition Root](http://blog.ploeh.dk/2011/07/28/CompositionRoot.aspx)的一部分。但是，您`CronJobService`包含很多逻辑，这意味着您可能想要测试它，但这很难，因为您将它与容器和`Task.Factory`. 如果可以的话，把它分开。

可以使用 a `IUnitOfWorkFactory`（例如，看看[这个 SO question and answer](https://stackoverflow.com/questions/10585478/one-dbcontext-per-web-request-why/10588594#10588594)）。但是由于您已经`IUnitOfWork`注册了 Per Lifetime Scope，所以我真的看不出 a 有什么`IUnitOfWorkFactory`帮助。所以不用调用`CreateUnitOfWork`里面的`SomeBackgroundLoop`，你可以用 . 包裹这个方法`using (container.BeginLifetimeScope())`。这样，此方法在生命周期范围的上下文中运行，这意味着任何注入`IUnitOfWork`（在此线程内）都将是相同的工作单元。

# javascript - 如何使用 Twitter Bootstrap 中的弹出框显示图像？

> ID：11075560
> 
> 赞同：49
> 
> 时间：2012-06-17T23:19:14.193
> 
> 标签：javascript, twitter-bootstrap, popover

Twitter Bootstrap 弹出框功能的典型示例是带有标题的类固醇工具提示。

HTML：

```
<a href="#" id="blob" class="btn large primary" rel="popover" data-content="And here's some amazing content. It's very engaging. right?" data-original-title="A title">hover for popover</a> 
```

JS：

```
<script>
$("#blob").popover({offset: 10});
</script> 
```

我想使用 popover 来显示图像。这可能吗？

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-06-18T18:13:45.603

非常简单 ：）

```
<a href="#" id="blob" class="btn large primary" rel="popover">hover for popover</a>

var img = '<img src="https://si0.twimg.com/a/1339639284/images/three_circles/twitter-bird-white-on-blue.png" />';

$("#blob").popover({ title: 'Look! A bird!', content: img, html:true }); 
```

[http://jsfiddle.net/weuWk/](http://jsfiddle.net/weuWk/)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-31T05:01:55.833

有点类似于 mattbtay 所说的，但有一些变化。需要 html:true。
将此脚本放在页面底部靠近正文标记的位置。

```
<script type="text/javascript">
 $(document).ready(function() {
  $("[rel=drevil]").popover({
      placement : 'bottom', //placement of the popover. also can use top, bottom, left or right
      title : '<div style="text-align:center; color:red; text-decoration:underline; font-size:14px;"> Muah ha ha</div>', //this is the top title bar of the popover. add some basic css
      html: 'true', //needed to show html of course
      content : '<div id="popOverBox"><img src="http://www.hd-report.com/wp-content/uploads/2008/08/mr-evil.jpg" width="251" height="201" /></div>' //this is the content of the html box. add the image here or anything you want really.
});
});
</script> 
```

那么HTML是：

```
<a href="#" rel="drevil">mischief</a> 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-02-11T11:15:41.027

生成链接很简单:) html:

```
<span class='preview' data-image-url="imageUrl.png" data-container="body" data-toggle="popover" data-placement="top" >preview</span> 
```

js：

```
$('.preview').popover({
    'trigger':'hover',
    'html':true,
    'content':function(){
        return "<img src='"+$(this).data('imageUrl')+"'>";
    }
}); 
```

[http://jsfiddle.net/A4zHC/](http://jsfiddle.net/A4zHC/)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-06-20T03:30:03.187

这是我用的。

```
$('#foo').popover({
    placement : 'bottom',
    title : 'Title',
    content : '<div id="popOverBox"><img src="http://i.telegraph.co.uk/multimedia/archive/01515/alGore_1515233c.jpg" /></div>'
}); 
```

对于 HTML

```
<b id="foo" rel="popover">text goes here</b> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-04-07T13:40:19.883

在这里，我有一个 Bootstrap 3 弹出框的示例，当鼠标悬停在某些文本上时，它会显示一个带有标题的图像。我已经添加了一些您可能想要删除或更改的内联样式......

这在移动设备上也很有效，因为第一次点击会弹出图像，第二次点击会打开链接。html:

```
<h5><a href="#" title="Solid Tiles Template" target="_blank" data-image-url="http://s29.postimg.org/t5pik8lyf/tiles1_preview.jpg" class="preview" rel="popover" style="color: green; font-style: normal; font-weight: bolder; font-size: 16px;">Template Preview 1 <i class="fa fa-external-link"></i></a></h5>

<h5><a href="#" title="Clear Tiles Template" target="_blank" data-image-url="http://s9.postimg.org/rdonet7jj/tiles2_2_preview.jpg" class="preview" rel="popover" style="color: red; font-style: normal; font-weight: bolder; font-size: 16px;">Template Preview 2 <i class="fa fa-external-link"></i></a></h5>

<h5><a href="#" title="Clear Tiles Template" target="_blank" data-image-url="http://s27.postimg.org/8scrcdu9v/tiles3_3_preview.jpg" class="preview" rel="popover" style="color: blue; font-style: normal; font-weight: bolder; font-size: 16px;">Template Preview 3 <i class="fa fa-external-link"></i></a></h5> 
```

js：

```
$('.preview').popover({
    'trigger':'hover',
    'html':true,
    'content':function(){
        return "<img src='"+$(this).data('imageUrl')+"'>";
    }
}); 
```

[https://jsfiddle.net/pepsimax_uk/myk38781/3/](https://jsfiddle.net/pepsimax_uk/myk38781/3/)

# rest - REST API 支持的backbone.js 应用程序的后端架构？

> ID：11075561
> 
> 赞同：3
> 
> 时间：2012-06-17T23:19:29.483
> 
> 标签：rest, architecture, backbone.js, backend

我们正在寻求开发一个内部生产力应用程序，该应用程序相当 JS-heavy（想想：变成下拉列表的可编辑字段，当前页面上的大量动态添加和删除部分等），并由单独的现有 JSON 支持REST API 而不是本地数据库。

过去曾有过使用 Rails+jQuery 制作动态页面的糟糕经历，backbone.js 似乎是一个更合适的工具。问题是，**构建后端的好方法是什么？**Rails 似乎引入了不必要的复杂性，因为我们不会使用 ActiveRecord 数据库模型。我想到的其他一些想法是使用 Sinatra、Node.js 或纯 HTML。以下是更多注意事项：

*   它绝不是单页应用程序。将至少有 3 个不同的“非散列”URL 部分，因此路由引擎会有所帮助。
*   我们是一家 Ruby 商店，所以任何基于 Ruby 的东西都更容易维护。
*   这个应用程序是独一无二的，因为几乎没有动态保存数据到服务器。发回数据后页面重新加载很好。但是，如上所述，在此之前会有大量的客户端操作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T01:58:21.573

问题是将后端构建为纯 api 引擎。然后按照您的计划在客户端计算机上使用 MVC 堆栈。

Daniel Doubrovkine 是 Art.sy 的首席技术官。他使用骑在机架上的[葡萄。](https://github.com/intridea/grape)

Grape 是一种用于在 Rack 上构建 API 的 DSL。包括可测试性并处理多个版本、身份验证、访问控制和文档的问题。

他对此的[介绍。](http://www.slideshare.net/dblockdotorg/building-restful-apis-w-grape)他关于 Grape 最新版本的[博客文章。](http://code.dblock.org/grape-020-released)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T23:43:04.307

Backbone.js 相当灵活；没有多少是硬连线的。也就是说，默认情况下，它会查找返回格式为 JSON 的模型的后端服务。因此，如果您有一个具有属性*foo*的模型，那么您的服务应该返回以下内容：

```
{ "foo": "bar" } 
```

或者对于一个集合：

```
[ { "foo": "bar1" }, { "foo": "bar2" } ] 
```

除此之外，您可以通过为每种模型类型定义一个*urlRoot*属性来指定 URL 的外观，然后是一个*url*函数，该函数返回用于获取模型的 URL 给定*urlRoot*和模型的*cid*（客户端 ID）。

所以总而言之，如果你实现了一个可以使用原始 JSON 的标准 REST API，那么你应该没问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-07T07:45:11.920

[我已经看到Middleman](http://tech.pollev.com/books/html5-apps/)成功完成了它。

基本上 Middleman 会编译您的静态资产，然后您可以将其发送到 CDN 或基本 Web 服务器（例如 Apache 或 Nginx）。您需要的 3 个不同页面通过让 Middleman 生成 3 个单独的 HTML 文件来处理。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T15:57:12.340

您想知道在客户端的 Backbone 下使用什么？

看看[木偶](https://github.com/derickbailey/backbone.marionette)。[教程](http://davidsulc.com/blog/2012/04/15/a-simple-backbone-marionette-tutorial/)。[写博客](http://lostechies.com/derickbailey/2011/12/16/composite-javascript-applications-with-backbone-and-backbone-marionette/)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-26T09:13:01.563

既然你说你有 Ruby 专业知识，我建议你看看[Sinatra](http://www.sinatrarb.com/)。它看起来像是制作 REST 后端的最简单方法，尤其是对于 Ruby 开发人员而言。

# javascript - slides.js 不工作

> ID：11075562
> 
> 赞同：3
> 
> 时间：2012-06-17T23:19:30.283
> 
> 标签：javascript, jquery, slideshow

我有 HTML，其中包含以下顺序的脚本

```
<script src="../static/js/jquery.js" type="text/javascript">
<script src="../static/js/bootstrap.js" type="text/javascript">
<script src="../static/js/slides.js" type="text/javascript">
<script src="../static/js/app.js" type="text/javascript"> 
```

并且图像与 div 绑定为

```
<div id="slideshow">
    <div id="slides">
        <img src="../static/img/slideshow/01.JPG">
        <img src="../static/img/slideshow/02.JPG">
        <img src="../static/img/slideshow/03.JPG">
        <img src="../static/img/slideshow/04.JPG">
        <img src="../static/img/slideshow/05.JPG">
        <img src="../static/img/slideshow/06.JPG">
    </div>
</div> 
```

JQuery v1.7.2在哪里`jquery.js`并且`slide.js`是最新的 slide.js 下载。

对我来说，这似乎也是正确的顺序。我`app.js`做的是

```
$(function(){
    $('#slides').slides({
        width: 600,
        height: 120,
        pagination: false,
        previous: false
    });
    $('#slides').slides("play");
}); 
```

我在 Firefox 和 Chrome 上都试过了，它似乎不起作用，我所有的图像都一个接一个地显示

我在这里没有做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T23:31:41.600

你忘记了一些 div 类。

您可以在此处找到一个 jsfiddle 示例：http: [//jsfiddle.net/rNF8G/](http://jsfiddle.net/rNF8G/)

编辑1：

您可以将`play: 2000`属性添加到第一个块，而不是像这样调用它：`$('#slides').slides("play");` 在此处查看我的编辑：http: [//jsfiddle.net/rNF8G/1/](http://jsfiddle.net/rNF8G/1/)

编辑2：

要删除分页，您所要做的就是添加以下属性：

`generatePagination: false`

您可以在以下更新中看到它：http: [//jsfiddle.net/rNF8G/117/](http://jsfiddle.net/rNF8G/117/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T23:23:44.787

而不是这个...

```
$(function(){
    $('#slides').slides({
        width: 600,
        height: 120,
        pagination: false,
        previous: false
    });
    $('#slides').slides("play");
}); 
```

试试这个...

```
$(document).ready(function(){
    $('#slides').slides({
        width: 600,
        height: 120,
        pagination: false,
        previous: false
    });
    $('#slides').slides("play");
}); 
```

您似乎没有将处理程序正确附加到文档就绪事件

如果这不起作用，你能提供一个[jsfiddle](http://jsfiddle.net/)吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T23:26:56.520

尝试使用 JQuery 循环：http: [//jquery.malsup.com/cycle/](http://jquery.malsup.com/cycle/)

**HTML**

```
<div id="slides">
        <img src="../static/img/slideshow/01.JPG">
        <img src="../static/img/slideshow/02.JPG">
        <img src="../static/img/slideshow/03.JPG">
        <img src="../static/img/slideshow/04.JPG">
        <img src="../static/img/slideshow/05.JPG">
        <img src="../static/img/slideshow/06.JPG">
</div> 
```

**jQuery**

```
$('#slides').cycle({ 
        fx:     'scrollRight', 
    speed:  'slow', 
    timeout: 5000
}); 
```

# facebook-graph-api - 为什么我可以访问 Graph API 照片对象上的 /tags 连接，但同一张照片的 photo_tag FQL 表没有返回任何内容？

> ID：11075568
> 
> 赞同：0
> 
> 时间：2012-06-17T23:20:44.667
> 
> 标签：facebook-graph-api, photo, facebook-fql

我可以通过 Graph API 访问与特定照片关联的标签，但如果我尝试查询 photo_tag FQL 表，我会得到一个空响应。我在每种情况下都使用相同的访问令牌（在 Graph API Explorer 中对此进行测试）。

例如，如果`pid`is `123`，那么[https://graph.facebook.com/123/tags](https://graph.facebook.com/123/tags)会显示我想要查看的标签，但`select text from photo_tag where pid = '123'`什么也不返回。

这是一个错误还是 Facebook 平台最近发生了一些变化而我在这里遗漏了一些东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T02:06:55.810

您的 id`123`可能是 a`object_id`而不是`pid`.

试试这个查询：

```
SELECT text FROM photo_tag WHERE object_id = 123 
```

# javascript - Angularjs 周围有哪些工具/项目/集成？

> ID：11075572
> 
> 赞同：0
> 
> 时间：2012-06-17T23:21:31.603
> 
> 标签：javascript, angularjs

Anuglarjs 周围的生态系统如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T17:13:47.740

有许多举措正在进行中。聚会小组正在形成，如果你在海湾地区，我鼓励你参加谷歌赞助的 angularjs 会议（在谷歌）。此外，您可能想要监控 angularjs googlegroup 和 github wiki。由于有 1.0 生产版本（上周）。您应该会看到很多活动和更一致的消息传递。文档不完整，但是，这应该在接下来的几个月内得到纠正。有一些很棒的教程和示例。我建议查看 1.0 版本，以免与已弃用且可能完全过时的 api 混淆。

谷歌正在为 Angular 开发 Chrome 扩展，它可以让您更轻松地调试和检查性能。IDE 已经与 Webstorm 和 Netbeans 集成。注意：我不能说这些的当前状态是什么。

一些社区成员正在开发一个 .NET NUGET 包来设置 VS 解决方案。一个 angular-ui 组（我是成员）开始在 jquery-ui 和 twitter 引导程序中创建新的并包装现有的流行 UI 插件。

Google 还创建了一个[http://builtwith.angularjs.org/](http://builtwith.angularjs.org/)站点来展示案例项目。现在有一个稳定的版本，期待看到更多的事情发生。

希望这可以帮助。

# c# - UnityContainer.Resolve 相对于 Activator.CreateInstance 有什么优势？

> ID：11075574
> 
> 赞同：5
> 
> 时间：2012-06-17T23:21:36.737
> 
> 标签：c#, .net, unity-container, activator

我刚刚开始使用 Unity。我仍然想知道它的优点是什么。

`UnityContainer().Resolve<T>()`它可以返回为泛型类型注册的类型的具体实例`T`。

我想我也可以使用`Activator.CreateInstance<T>()`.

`Activator`是 .NET Framework 中的内置类，所以我想知道 Unity 的独特功能是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T00:05:11.053

MSDN 将这些描述为 Unity Container 的优势：

> 1.  简化对象创建，尤其是分层对象结构和依赖关系
> 2.  需求抽象；这允许开发人员在运行时或配置中指定依赖关系并简化横切关注点的管理
> 3.  通过将组件配置推迟到容器来提高灵活性
> 4.  服务定位能力；这允许客户端存储或缓存容器
> 5.  实例和类型拦截。

这是[链接](http://msdn.microsoft.com/en-us/library/ff647202.aspx)。

# python - 解开 Python 字符串？

> ID：11075583
> 
> 赞同：2
> 
> 时间：2012-06-17T23:23:48.847
> 
> 标签：python

我是菜鸟，如何从列表中删除引号和逗号？或者我如何“解开”？

在不显示字典 (dic) 的情况下，我使用的代码如下所示：

```
>>>import itertools
>>>list(itertools.product(dic[2], dic[3]) 
```

我的结果如下所示：

```
[('A', 'D'), ('A', 'E'), ('A', 'F'), ('B', 'D'), ('B', 'E'), ('B', 'F'), ('C', 'D'), ('C', 'E'), ('C', 'F')] 
```

我希望它们看起来像这样：

```
AD, AE, AF, BD, BE, BF, 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-17T23:26:07.567

你想产生一个字符串，所以你可以使用字符串操作（特别是[`join`](http://docs.python.org/library/stdtypes.html#str.join)方法）：

```
>>> import itertools
>>> a = ['A', 'B']
>>> b = ['D', 'E', 'F']
>>> print ', '.join(''.join(x) for x in itertools.product(a, b))
AD, AE, AF, BD, BE, BF 
```

实际上你甚至不需要`itertools`，你可以使用嵌套理解：

```
>>> print ', '.join(x + y for x in a for y in b) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T23:28:52.067

您可以使用[连接字符串方法](http://docs.python.org/library/stdtypes.html#str.join)：

```
>>> import itertools
>>> p = list( itertools.product( ['a','b','c' ],['e','f','g'] ) )
>>> p
[('a', 'e'), ('a', 'f'), ('a', 'g'), ('b', 'e'), ('b', 'f'), ('b', 'g'), ('c', 'e'), ('c', 'f'), ('c', 'g')]
>>> ', '.join( a+b for (a,b) in p )
'ae, af, ag, be, bf, bg, ce, cf, cg' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T23:30:15.853

```
import itertools
import sys
yourlist = list(itertools.product(dic[2], dic[3])
sys.stdout.write (yourlist[0][0] + yourlist[0][1])
for i in xrange (1, len(yourlist)):
    sys.stdout.write (", " + yourlist[i][0] + yourlist[i][1]) 
```

尽管其他答案使用了[join()](http://docs.python.org/library/stdtypes.html#str.join)方法（正确的“python”方法），但我给了你一个简单粗暴的解决方案，所以我不会因为你试图弄清楚 join( ) 方法有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-17T23:36:23.127

使用[列表理解](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)怎么办？

```
p = [('A', 'D'), ('A', 'E'), ('A', 'F'), ('B', 'D'), ('B', 'E'), ('B', 'F'), ('C', 'D'), ('C', 'E'), ('C', 'F')]

', '.join([''.join(i) for i in p]) 
```

和[join()](http://docs.python.org/library/stdtypes.html?highlight=join#str.join)连接字符串给出：

```
AD, AE, AF, BD, BE, BF, CD, CE, CF 
```

或者，[生成器表达式](http://www.python.org/dev/peps/pep-0289/)也可以工作（感谢@Nicklas B 提醒我，出于某种原因，我首先想到了列表理解）：

```
', '.join(''.join(i) for i in p) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-18T01:40:14.593

另一种解决方案：

```
In [61]: l=[('A', 'D'), ('A', 'E'), ('A', 'F'), ('B', 'D'), ('B', 'E'), ('B', 'F'), 
            ('C', 'D'), ('C', 'E'), ('C', 'F')]

In [62]: ', '.join(t[0]+t[1] for t in l)
Out[62]: 'AD, AE, AF, BD, BE, BF, CD, CE, CF' 
```

# ruby-on-rails - 这个错误在我的 Rails 应用程序中意味着什么

> ID：11075584
> 
> 赞同：0
> 
> 时间：2012-06-17T23:24:13.453
> 
> 标签：ruby-on-rails, ruby, amazon-s3, paperclip

在我的 rails 3.2.1 应用程序中，当我尝试从我的机​​器上传文件时，我在浏览器中收到此错误。

```
NoMethodError in AssetsController#create

undefined method `symbolize_keys' for #<String:0x00000104200ad0>
app/controllers/assets_controller.rb:53:in `block in create'
app/controllers/assets_controller.rb:52:in `create 
```

这是在我的开发机器上运行的 Rails 瘦服务器的输出：

```
Rendered assets/new.html.erb within layouts/application (5.8ms)
Completed 200 OK in 104ms (Views: 101.2ms | ActiveRecord: 0.5ms)

Started POST "/assets" for 127.0.0.1 at 2012-06-17 16:18:03 -0700
Served asset  - 404 Not Found (7ms)
Processing by AssetsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"XXXX=", "asset"=>{"user_id"=>"1",   "uploaded_file"=>#<ActionDispatch::Http::UploadedFile:0x0000010430e080 @original_filename="41382-450x-e_37.jpeg", @content_type="image/jpeg", @headers="Content- Disposition: form-data; name=\"asset[uploaded_file]\"; filename=\"41382-450x-e_37.jpeg\"\r\nContent-Type: image/jpeg\r\n", @tempfile=#<File:/var/folders/P+/P+AVMPNFEyO8F-xz7UfIP++++TI/-Tmp-/RackMultipart20120617-19438-1y1fya5>>}, "commit"=>"Create Asset"}

User Load (0.5ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
 (0.2ms)  BEGIN
SQL (0.5ms)  INSERT INTO "assets" ("created_at", "updated_at",     "uploaded_file_content_type", "uploaded_file_file_name", "uploaded_file_file_size",   "uploaded_file_updated_at", "user_id") 
VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"    [["created_at", Sun, 17 Jun 2012  23:18:03 UTC +00:00], 

["updated_at", Sun, 17 Jun 2012  23:18:03 UTC +00:00], ["uploaded_file_content_type",   "image/jpeg"], ["uploaded_file_file_name", "41382-450x-e_37.jpeg"],     

["uploaded_file_file_size", 36549], ["uploaded_file_updated_at", Sun, 17 Jun 2012  23:18:03 UTC +00:00], ["user_id", 1]]
[paperclip] Saving attachments.
[paperclip] saving assets/23/41382-450x-e_37.jpeg
 (0.1ms)  ROLLBACK

Completed 500 Internal Server Error in 7ms

NoMethodError (undefined method `symbolize_keys' for #<String:0x00000104200ad0>):
app/controllers/assets_controller.rb:53:in `block in create'
app/controllers/assets_controller.rb:52:in `create' 
```

这就是我在 Assets 控制器中的 create 方法的样子：

```
# POST /assets
# POST /assets.json
def create
 @asset = current_user.assets.new(params[:asset])

 respond_to do |format|
   if @asset.save
     format.html { redirect_to @asset, notice: 'Asset was successfully created.' }
     format.json { render json: @asset, status: :created, location: @asset }
   else
     format.html { render action: "new" }
     format.json { render json: @asset.errors, status: :unprocessable_entity }
   end
 end 
```

结尾

知道会发生什么吗？非常感谢一些反馈。

谢谢

* * *

编辑：我使用 AWS gem 按照[本](http://codyaray.com/downloads/2012/03/How-to-Build-a-Dropbox-like-Sharing-App-using-Ruby-on-Rails.html)教程将文件上传到亚马逊 s3。我的应用程序中有这个配置文件，位于 config/s3_credentials.yml，其中包含我的 amazon s3 凭据。

我在我的asset.rb 文件中使用这个代码：

```
 has_attached_file :uploaded_file,
                :path => "assets/:id/:basename.:extension",
                :storage => :s3,
                :s3_credentials => "#{Rails.root}/config/s3_credentials.yml",
                :bucket => "XXXX" 
```

这是视图调用的我的_form：

```
<%= simple_form_for @asset, :html=> { :multipart => true}  do |f| %>
  <%= f.error_notification %>

  <div class="form-inputs">
  <%= f.label :UserID %>
  <%= f.input :user_id %>
 </div>
 <div class="form-inputs">
<%= f.label :uploaded_file, "File" %>
    <%= f.file_field :uploaded_file %>
 </div>
<div class="form-actions">
 <%= f.button :submit %>
</div>
<% end %> 
```

s3_credential.yml 文件

```
development:
  access_key_id:"XXXXXXXXXX"
  secret_access_key:"XXXXXXXXXXXXXXXXXXXX"

production:
  access_key_id:"XXXXXXXXXX"
  secret_access_key:"lG/XXXXXXXXXXXXXXXXXXXX" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T23:43:29.067

听起来您正在尝试`@asset`从传递给控制器​​的字符串创建。Rails 期待 hashwithindifferentaccess，然后调用 symbolize_keys。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T23:29:58.450

这是因为 String 类型没有`symbolize_keys`方法。此方法仅来自 Hash 类型。

# android - 使用示例代码声称不支持 Android 应用内计费

> ID：11075585
> 
> 赞同：2
> 
> 时间：2012-06-17T23:24:39.253
> 
> 标签：android, android-service, in-app-billing

我遵循了在以下位置找到的 Android 应用内计费示例代码：http: [//developer.android.com/guide/market/billing/billing_integrate.html](http://developer.android.com/guide/market/billing/billing_integrate.html)

我已将该代码集成到我的应用程序中 - 并根据需要执行所有步骤，包括签署 apk - 上传、在应用程序产品列表中创建等。

出于某种原因，当我的应用程序在 onCreate 方法中有这些行时：

```
 Log.e("sc2","About to check if billing is supported");
    // Check if billing is supported.
    ResponseHandler.register(mDungeonsPurchaseObserver);
    if (!mBillingService.checkBillingSupported()) {
    Log.e("sc2","failed check for billing supported");
        showDialog(DIALOG_CANNOT_CONNECT_ID);
    }

    if (!mBillingService.checkBillingSupported(Consts.ITEM_TYPE_SUBSCRIPTION)) {
         Log.e("sc2","failed check for billing supported subscriptions");
        showDialog(DIALOG_SUBSCRIPTIONS_NOT_SUPPORTED_ID);
    }
    Log.e("sc2","Finished checking if billing is supported"); 
```

两个对话框都没有显示 - 表明所有内容都正确绑定到市场计费服务。

但是在 PurchaseObserver 回调这些行：

```
 private class SC2PurchaseObserver extends PurchaseObserver {
    public SC2PurchaseObserver(Handler handler) {
        super(UpgradesActivity.this, handler);
    }

    @Override
    public void onBillingSupported(boolean supported, String type) {
        if (Consts.DEBUG) {
            Log.e("sc2", "supported: " + supported+":"+type);
        }
        if (type == null || type.equals(Consts.ITEM_TYPE_INAPP)) {
            if (supported) {
                restoreDatabase();
                mBuyButton.setEnabled(true);
                mEditPayloadButton.setEnabled(true);
            } else {
                showDialog(DIALOG_BILLING_NOT_SUPPORTED_ID);
            }
        } else if (type.equals(Consts.ITEM_TYPE_SUBSCRIPTION)) {
            mCatalogAdapter.setSubscriptionsSupported(supported);
        } else {
            showDialog(DIALOG_SUBSCRIPTIONS_NOT_SUPPORTED_ID);
        }
    } 
```

日志消息显示如下：

支持：false:null 支持：false:subs

提示 android market 回调在应用计费标准中没有说明，也没有启用订阅....

有人可以解释为什么第一次检查可能没有失败 - 但回叫消息却像他们一样出现！？

非常感谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-20T11:57:35.033

这是我使用的代码[`Simple InApp Billing / Payment`](http://blog.blundellapps.com/wp-content/uploads/2012/02/InAppPurchaseTUT.rar)，您也可以使用。

![在此处输入图像描述](../Images/e1d1eff184b8732a795a5454b6e5e4ce.png)

![在此处输入图像描述](../Images/199e7903bf24a3942ecc8028d2f71afa.png)

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T10:50:00.233

创建请求包时是否更改了 BILLING_REQUEST_API_VERSION。以下方法来自示例项目

```
protected Bundle makeRequestBundle(String method) {
       Bundle request = new Bundle();
       request.putString(Consts.BILLING_REQUEST_METHOD, method);
       request.putInt(Consts.BILLING_REQUEST_API_VERSION, 2);
       request.putString(Consts.BILLING_REQUEST_PACKAGE_NAME, getPackageName());
       return request;
} 
```

# go - 从标志如何返回 (int) 而不是 (*int)？

> ID：11075586
> 
> 赞同：0
> 
> 时间：2012-06-17T23:24:57.170
> 
> 标签：go

该程序返回：

```
package main

import (
    "flag"
    "fmt"
)

func main() {
    num_agents := flag.Int("a", 10, "number of agents")
    flag.Parse();

    fmt.Printf("%#v",num_agents)
} 
```

输出

```
(*int)(0x18600110)` 
```

然而，这不是我想要的......我想要的是整数。

所以根据文档似乎我应该使用 flag.IntVar(&pointer_to_variable_integer)

```
package main

import (
    "flag"
    "fmt"
)

func main() {
    var num_agents int
    flag.IntVar(&num_agents,"a", 10, "number of agents")
    flag.Parse();

    fmt.Printf("%#v",num_agents)
} 
```

但是，这似乎不对...因为我需要编写 2 行代码，而 1 应该这样做。在我看来，不知何故

```
num_agents := flags.Int("a", 10, "number of agents") 
```

应该返回一个 int 而不是 *int.？或者也许有一种简单的方法可以从 *int 转换为 int ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T23:27:55.203

只需取消引用指针：

```
num_agents := flags.Int("a", 10, "number of agents")
fmt.Println(*num_agents) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-31T04:23:36.047

你也可以试试：

```
var num_agents int

func init() {
    flag.IntVar(&num_agents, "a", 10, "number of agents")
} 
```

# android - 如何通过 ContenProvider 访问您的 SQLite 表？

> ID：11075590
> 
> 赞同：0
> 
> 时间：2012-06-17T23:26:14.023
> 
> 标签：android, android-contentprovider

所以我一直在做研究，以便将我`super(Context context, Cursor cursor)`不推荐使用`CursorAdapter`的代码切换到`LoaderManager`and`CursorLoader`代码。我非常接近，但坚持最后一件事。我需要什么样的方式`URI`来访问我拥有的 SQLite 表？我是新手`ContentProviders`，所以在这方面请多多包涵。任何澄清将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T05:02:17.893

您必须使用以下 URI

```
Uri.parse("content://packagename/tablename"); 
```

此外，您必须在 onCreate() 中使用以下几行

```
 cr = getContentResolver();
 ContentProviderClient cpc = cr.acquireContentProviderClient(uri); 
```

当您想使用用户定义的内容 Privoder 时，上面的代码片段将起作用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T23:47:46.160

> 我需要什么样的 URI 才能访问我拥有的 SQLite 表？

你需要写一个`ContentProvider`. 作为写作的一部分`ContentProvider`，你将自己决定你想要你`Uri`的样子（除了强制性`content://`方案）。这`Uri`将是方案、您选择的唯一权限字符串和可选路径的组合：

```
`content://your.authority.goes.here/anything/else/is/optional` 
```

Android 开发人员文档包含[有关创建`ContentProvider`](http://developer.android.com/guide/topics/providers/content-provider-creating.html).

# iphone - 处理 ios 设备方向

> ID：11075600
> 
> 赞同：3
> 
> 时间：2012-06-17T23:28:20.803
> 
> 标签：iphone, ios, uiview, uideviceorientation

我的 uiviews 有问题，具体取决于设备方向...

我遇到的主要问题是

```
UIDeviceOrientationFaceUp
UIDeviceOrientationFaceDown 
```

弄乱了我的视图我只想支持纵向和横向（左右）所以如果设备改变方向我的视图会正确地改变自己..

这就是我目前实施的。基本上它是一个从屏幕底部向上滚动的 UIView，并且在这个视图中有几个按钮，用户可以选择这些按钮来加载不同的视图。

```
#pragma jumpBarButtons
- (void)jumpBarButtonPosition
{

    //orientation stuff
    if (jumpBar.isViewLoaded) {

        UIDeviceOrientation orientation = [[UIDevice currentDevice] orientation];

        switch (orientation) {
            case UIDeviceOrientationPortrait:
            {
                NSLog(@"Portrait");

                // Row one
                jumpButton1.frame = CGRectMake(18.45, 23.0, 57.0, 57.0);
                jumpButton2.frame = CGRectMake(93.9, 23.0, 57.0, 57.0);
                jumpButton3.frame = CGRectMake(169.35, 23.0, 57.0, 57.0);
                jumpButton4.frame = CGRectMake(244.8, 23.0, 57.0, 57.0);
                // Row tow
                jumpButton5.frame = CGRectMake(18.45, 95.0, 57.0, 57.0);
                jumpButton6.frame = CGRectMake(93.9, 95.0, 57.0, 57.0);
                jumpButton7.frame = CGRectMake(169.35, 95.0, 57.0, 57.0);
                jumpButton8.frame = CGRectMake(244.8, 95.0, 57.0, 57.0);
                // Row three
                jumpButton9.frame = CGRectMake(18.45, 167.0, 57.0, 57.0);
                jumpButton10.frame = CGRectMake(93.9, 167.0, 57.0, 57.0);
                jumpButton11.frame = CGRectMake(169.35, 167.0, 57.0, 57.0);
                jumpButton12.frame = CGRectMake(244.8, 167.0, 57.0, 57.0);
                // Row four
                jumpButton13.frame = CGRectMake(18.45, 239.0, 57.0, 57.0);
                jumpButton14.frame = CGRectMake(93.9, 239.0, 57.0, 57.0);
                jumpButton15.frame = CGRectMake(169.35, 239.0, 57.0, 57.0);
                jumpButton16.frame = CGRectMake(244.8, 239.0, 57.0, 57.0);
            }
                break;

case UIDeviceOrientationLandscapeLeft:
            case UIDeviceOrientationLandscapeRight:
            {
                viewSpaceHeight = 207;
                viewSpaceWidth = 480;

                // Row one
                jumpButton1.frame = CGRectMake(19.7, 9.0, 57.0, 57.0);
                jumpButton2.frame = CGRectMake(96.42, 9.0, 57.0, 57.0);
                jumpButton3.frame = CGRectMake(173.13, 9.0, 57.0, 57.0);
                jumpButton4.frame = CGRectMake(249.84, 9.0, 57.0, 57.0);
                jumpButton5.frame = CGRectMake(326.55, 9.0, 57.0, 57.0);
                jumpButton6.frame = CGRectMake(403.26, 9.0, 57.0, 57.0);
                // Row tow
                jumpButton7.frame = CGRectMake(19.7, 75.0, 57.0, 57.0);
                jumpButton8.frame = CGRectMake(96.42, 75.0, 57.0, 57.0);
                jumpButton9.frame = CGRectMake(173.13, 75.0, 57.0, 57.0);
                jumpButton10.frame = CGRectMake(249.84, 75.0, 57.0, 57.0);
                jumpButton11.frame = CGRectMake(326.55, 75.0, 57.0, 57.0);
                jumpButton12.frame = CGRectMake(403.26, 75.0, 57.0, 57.0);
                // Row three
                jumpButton13.frame = CGRectMake(19.7, 141.0, 57.0, 57.0);
                jumpButton14.frame = CGRectMake(96.42, 141.0, 57.0, 57.0);
                jumpButton15.frame = CGRectMake(173.13, 141.0, 57.0, 57.0);
                jumpButton16.frame = CGRectMake(249.84, 141.0, 57.0, 57.0);

            }
                break;
//.. 
```

如果纵向有 16 个 4,4,4,4 图标，那就差不多了，如果横向则图标是 6,6,4。如果设备面朝上或面朝下翻转会发生什么，所有这些按钮视图都会消失..我能做些什么来阻止这种情况，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T23:43:30.673

改为使用`UIInterfaceDirection`。它是[`UIApplication`](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIApplication_Class/Reference/Reference.html)类的一部分，仅包含以下值

```
typedef enum {
   UIInterfaceOrientationPortrait           = UIDeviceOrientationPortrait,
   UIInterfaceOrientationPortraitUpsideDown = UIDeviceOrientationPortraitUpsideDown,
   UIInterfaceOrientationLandscapeLeft      = UIDeviceOrientationLandscapeRight,
   UIInterfaceOrientationLandscapeRight     = UIDeviceOrientationLandscapeLeft
} UIInterfaceOrientation; 
```

您可以像这样轻松检查当前方向：

```
[[UIApplication sharedApplication] statusBarOrientation] 
```

# jquery - 使用 jquery 将 IETF 日期格式转换为较短的日期格式

> ID：11075601
> 
> 赞同：0
> 
> 时间：2012-06-17T23:28:32.570
> 
> 标签：jquery, date

我有一长串日期。看起来像这样：2012 年 6 月 18 日星期一 19:00:00。我的问题很简单。我希望它像这样显示：dd/mm/yyyy HH:mm (HH implament for 24 hours) 我正在使用 jQuery 及其所有 UI。请不要告诉我添加这个 Date.js 类。肯定可以通过简单的 jQuery 来完成 :) 谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T00:02:25.827

由于您已加载 jQueryUI，因此内置了一个完整的日期格式化实用程序，但它不处理时间。除此之外，您需要自己使用本机 javscript Date 对象或使用 date.js 之类的数据库来简化解析。

使用 jQUEeryUI 的示例：http: [//jsfiddle.net/qqLMd/](http://jsfiddle.net/qqLMd/)

```
 var newDate=$.datepicker.formatDate('yy-mm-dd', new Date('Mon Jun 18 2012 19:00:00'); 
```

[http://docs.jquery.com/UI/Datepicker/formatDate](http://docs.jquery.com/UI/Datepicker/formatDate)

您确信这是一个简单的 jQUery 过程是错误的。jQuery 在核心 API 中没有任何日期处理

[MDN 日期文档](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T23:44:07.207

那么你可以使用 substring() 方法。

```
var longDate = 'Mon Jun 18 2012 19:00:00';

var date = longDate.substring(8,10);
var month = longDate.substring(4,7);
var year = longDate.substring(11,15);
var hours = longDate.substring(16,18);
var minutes = longDate.substring(19,21);

if(month == "Jan")
    month = "01";
else if(month == "Feb")
    month = "02";
else if(month == "Mar")
    month = "03";
else if(month == "Apr")
    month = "04";
else if(month == "May")
    month = "05";
else if(month == "Jun")
    month = "06";
else if(month == "Jul")
    month = "07";
else if(month == "Aug")
    month = "08";
else if(month == "Sep")
    month = "09";
else if(month == "Oct")
    month = "10";
else if(month == "Nov")
    month = "11";
else if(month == "Dec")
    month = "12";

var oriDate = date + "/" + month + "/" + year + " ";
if(hours == 0)
    oriDate += "00:";
else
    oriDate += hours + ":";
if(minutes == 0)
    oriDate += "00";
else
    oriDate += minutes;

alert(oriDate); // 18/06/2012 19:00 
```

在此处检查 jsfiddle：http: [//jsfiddle.net/reygonzales/v2tSb/](http://jsfiddle.net/reygonzales/v2tSb/)

# css - 用 CSS 隐藏元素，而不知道它们的类或 ID，如此处所做

> ID：11075602
> 
> 赞同：0
> 
> 时间：2012-06-17T23:28:45.093
> 
> 标签：css, blogger

访问此[网页](http://brostyro.blogspot.com)。

这是一个没有顶部导航栏的博客网站。我们不知道导航栏的 id 那么它是如何隐藏的呢？

我试过`margin-bottom`了，但它留下了额外的空间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T23:32:51.070

看这个：

```
body {
    margin-top: -30px;
} 
```

这就是隐藏导航栏的原因。删除它并出现导航栏

# c++ - OpenCV：如何正确分割带有阈值的图像/使用二进制图像分割原始图像？

> ID：11075607
> 
> 赞同：2
> 
> 时间：2012-06-17T23:29:54.133
> 
> 标签：c++, opencv, contour, image-segmentation

我目前正在开发一个带有乳房 X 线摄影术的项目，并且我正在尝试理解如何将图像分割成两个部分：可搜索区域 (ROI) 和不可搜索区域。这个问题的重点仅针对实际图像分析/处理的底层算法。来自 Google 和 Stack Overflow 的大多数结果都产生了有用的信息，但它们都没有解释图像分析/处理的步骤以及为什么这些步骤很重要以及它们各自在做什么。

我编写了一个小代码段，它获取图像、重新调整图像大小并“二值化”图像。（如下。）有什么方法可以在我的二进制图像上追踪一条线（轮廓？），将这条线移动到我的原始图像，并将其用作让我的算法确定可搜索区域（ROI）从非可搜索区域？有没有更简单的方法来做到这一点？

```
// ** Main ** //
int main( int argc, char** argv )
{
  /// Load an image
  src = cvLoadImage(argv[1], CV_LOAD_IMAGE_GRAYSCALE);

  // Create Dummy Image
  Mat destination;
  destination = cvCreateMat(3328/5, 4084/5, CV_32FC1);
  resize(src, destination,cvSize(3328/5,4084/5),0,0);
  src = destination;

  /// Create a matrix of the same type and size as src (for dst)
  dst.create( src.size(), src.type() );

  /// Create a window
  namedWindow( window_name, CV_WINDOW_AUTOSIZE );

  // Binarize the Image   
  threshold(src, dst, 128, 255,CV_THRESH_BINARY | CV_THRESH_OTSU); 

  // Show the Image
  imshow( window_name, dst );

  /// Wait until user exit program by pressing a key
  waitKey(0);

  return 0;
  } 
```

为了澄清和重申，我查看了很多教程，但没有任何帮助，特别是。我将不胜感激我能得到的所有帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T01:26:36.440

要在二值化图像上查找线条，您需要使用递归函数，并创建第二个数组，其大小与您可以存储数据的图像相同。这是我最近编写的用于检测二值化图像中的斑点的代码示例（注意，这是在 C# 中，需要进行一些调整，例如使用 vector<> 而不是 list）。
首先，分析一个像素，看它是否值得追踪/尚未被追踪：

```
private List<Blob> FindBlobs(bool[] Data, int Width, int Height)
{
    bool[] IsBlob = new bool[Data.Length];
    List<Blob> Blobs = new List<Blob>();

    for (int y = 0; y < Height; y++)
    {
        for (int x = 0; x < Width; x++)
        {
            if (Data[y * Width + x])
            {
                Blob b = new Blob();
                TrackBlob(b, Data, x, y, Width, Height);
                Blobs.Add(b);
            }
        }
    }
    return Blobs;
} 
```

然后跟踪每个 blob：

```
private void TrackBlob(Blob blob, bool[] Data, int x, int y, int Width, int Height)
{
    for (int i = -1; i < 2; i++)
    {
        for (int j = -1; j < 2; j++)
        {
            if ((x + i) >= 0 && (x + i) < Width && (y + j) >= 0 && (y + j) < Height)
            {
                if (Data[(y + j) * Width + (x + i)])
                {
                    Data[(y + j) * Width + (x + i)] = false;
                    blob.AddPoint((x + i), (y + j));
                    TrackBlob(blob, Data, x + i, y + j, Width, Height);
                }
            }
        }
    }
} 
```

您可以轻松地将它们调整为仅搜索直线（我不知道您是否需要圆形线）。然后使用线的交点来构建一个具有已知边缘线的对象。

Alternatively, you can use Hough Lines and Circles (available in OpenCV) to trace lines and circles on the image for you. This has the benefit of giving lines in any orientation, but it does not give end points of straight lines.

# ruby-on-rails-3 - 导航栏中的当前选项卡

> ID：11075612
> 
> 赞同：1
> 
> 时间：2012-06-17T23:30:23.977
> 
> 标签：ruby-on-rails-3

我有一个导航栏，它是一个以标签作为列表元素的无序列表。我正在使用视图助手绘制每个单独的选项卡（列表项）。我想`active`根据视图提供的值将类应用于每个类。这可能吗？

详细地说，在视图助手上，我可能有类似的东西：

```
def tab_item(tab)
  content_tag :li, :class => ('active' if some_variable == tab) do
    link_to tab, "/#{tab}"
  end
end 
```

在特定的视图中，我会这样做：

```
<% somehow_set_some_variable('dash') %> 
```

然后，这将使它`some_variable`在视图助手中是`'dash'`，使该选项卡获得`'active'`类。

这有可能吗？如果没有，是否有另一种方法来解决这个问题？我应该在控制器上设置一个变量吗？

我已经看到基于当前控制器和/或操作的决定的文章和问题，但这太严格了，所以我想看看我是否可以采用这种方法。我想出的另一种解决方案是在一个视图助手中生成整个选项卡列表，该助手需要一个参数来激活选项卡，我在每个视图中都调用它。但是，我宁愿在布局中生成列表并在每个视图的基础上激活一个选项卡。

**解决方法**：到目前为止，我已经提出了一个折衷方案，但不知道如何做我在这个问题中提出的问题。如果传递给应用程序助手的参数与实例变量匹配，应用程序助手创建一个`li`标签并应用。`activate``@activate`

```
def nav_tab(tab)
  content_tag :li, :id => tab, :class => ('active' if tab == @activate) do
    link_to tab, "/#{tab}"
  end
end 
```

然后在控制器操作中，我只需设置该变量，例如：

```
def index
  # ...
  @activate = 'dash'
end 
```

这有效，并且具有我正在寻找的效果：导航栏是独立生成的，然后每个“操作”都可以指定要激活的选项卡，*如果*他们愿意的话。

我不确定这是否是解决此问题的最佳方法。我试图将这些东西保留在视图中，例如[这个问题](https://stackoverflow.com/a/3092076/101090)`<title>`，它可以针对特定于视图的更改完成此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T03:03:04.140

您可以试试这个，只需在应用程序帮助程序中定义一个方法，并通过为每个导航列表传递一个唯一的字符串来调用它

```
 def active_class(css_class)

    if controller.controller_name == css_class ||  css_class == "#{controller.controller_name}##{controller.action_name}" || css_class == inner_classes
       return "active"
    else
      return ""
    end   
  end

  def inner_classes
    pages = {
      "basic_files#new_part_price_file" => "basic_files#index",
      "basic_files#new_market_basket_file" => "basic_files#index",
      "basic_files#create" => "basic_files#index",
      "basic_files#edit"   => "basic_files#index",
      "basic_files#show"   => "basic_files#index",
      "basic_files#uploads"  => "basic_files#index",
      "basic_files#downloadable_part_price_file" => "basic_files#download_page",
      "basic_files#downloadable_market_basket_file" => "basic_files#download_page",
      "basic_files#download_part_price_file" => "basic_files#download_page",
      "basic_files#download_market_basket_file" => "basic_files#download_page",
    }   
    pages["#{controller.controller_name}##{controller.action_name}"]
  end 
```

在视图中，您可以像这样调用上述方法

```
<%= link_to 'Home',home_path,:class => "f1 #{active_class('home')}" %>

   <% if current_user.publisher? %>
    <%= link_to 'User',users_path,:class => "f1 #{active_class('users')}" %> 
    <%= link_to 'Upload',basic_files_path,:class => "f1 #{active_class('basic_files#index')}" %>
    <%= link_to 'Publish',publish_completed_basic_files_path,:class => "f1 #{active_class('basic_files#publish_completed')}" %>
    <%= link_to 'Report',audits_path ,:class => "f1 #{active_class('audits')}" %> 
```

`Note it just a example of how you can build automatic navigation highlighting`

# hadoop - 如何更改每个作业的 io.sort.mb？

> ID：11075615
> 
> 赞同：2
> 
> 时间：2012-06-17T23:30:26.343
> 
> 标签：hadoop, mapreduce

我想知道是否可以更改每个作业的 io.sort.mb 的值？我知道您可以在 mapred-site.xml 中为参数设置一个值，但我想以编程方式在不同的作业中使用不同的值。我试过 conf.setInt("io.sort.mb", someValue) 但它似乎不起作用。JVM 设置有足够的内存（如 2.25GB）并且没有其他作业在运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T06:49:36.880

当然，只需在提交之前将其设置在`Configuration`（在早期版本中）。`JobConf`它确实有效；我在 Mahout 中使用过它。确保在设置值之后和提交之前设置`conf`到您的值。`Job`确保你也设置正确`conf`！也许你可以说你怎么知道它不起作用。

# java - Java Swing：在 JPanel 的组件下绘制？

> ID：11075623
> 
> 赞同：4
> 
> 时间：2012-06-17T23:32:30.710
> 
> 标签：java, swing, components, jpanel, paint

我有一个 JPanel，里面有一个按钮。按钮的位置无关紧要。`paint(Graphics g)`代码是：

```
    @覆盖
    公共无效油漆（图形g）{
        super.paint(g);
        /* 绘制代码 */
    }

```

如果我想用黑色矩形填充面板的整个空间，同时面板中还有按钮，填充的矩形将简单地覆盖所有内容。因此，与其有一个按钮，然后按钮周围都是黑色，整个面板都是黑色的。

**有没有办法修改面板，或者绘画程序，使组件绘制在自定义绘画之上？**

我试图`super.paint(g)`在绘画的最后加上：

```
    @覆盖
    公共无效油漆（图形g）{
        /* 绘制代码 */
        super.paint(g);
    }

```

...认为它会先进行自定义绘画，然后简单地将组件放在上面。但是，如果这样做，自定义绘画将完全消失，只显示按钮。也就是说，只有一个按钮和一个白色（默认）背景，而不是黑色矩形。

有任何想法吗？

谢谢！

**编辑：**我想澄清黑色矩形是一个例子。我知道我可以简单地设置背景颜色，但我试图最终能够做任何我想要的自定义绘画。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-18T01:25:40.510

我想你想覆盖`paintComponent()`not `paint()`。

`paint()`通常不做任何绘画，而是委托给`paintComponent()`,`paintBorder()`和`paintChildren()`.

查看`javax.swing.JComponent.paint()`更多信息

例子：

```
 @Override
  public void paintComponent(Graphics g) {
    /* your draw code here */
  } 
```

你可以调用 super.paintComponent(g); 像往常一样绘制组件，但可以省略。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-18T00:10:30.097

您可以将面板的背景设置为黑色并调整 UI 委托的颜色。您可以`setBorderPainted(false)`根据需要突出显示该按钮。这是一个[sscce](http://sscce.org/)，可根据需要更新您的问题。这[`AnimationTest`](https://stackoverflow.com/a/3256941/230513)显示了如何`paintComponent()`更新面板“后面的”组件。

附录：`super.paintComponent(g)`先放置将确保组件看起来覆盖（可能会发生变化）背景。因为组件的背景颜色受其 UI 委托的控制，所以您可以执行以下任何操作：

*   使用`UIManager`来更改相应的属性，如下图所示。
*   使用`JButton`覆盖的自定义，如此[处](https://stackoverflow.com/a/4151403/230513)`paintComponent()`所示。
*   [使用自定义 UI 委托，如此处](https://stackoverflow.com/a/5755124/230513)所示。

SSCCE：

```
import component.Laf;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.event.ActionEvent;
import javax.swing.AbstractAction;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.UIManager;

/** @see https://stackoverflow.com/a/11075785/230513 */
public class ButtonPanel extends JPanel {

    public ButtonPanel() {
        this.setBackground(Color.black);
        final JButton b = new JButton(new AbstractAction("Button"){

            @Override
            public void actionPerformed(ActionEvent e) {
                System.out.println("Clicked");
            }
        });
        // b.setBorderPainted(false);
        this.add(b);
    }

    private void display() {
        UIManager.put("Button.foreground", Color.white);
        UIManager.put("Button.background", Color.black);
        JFrame f = new JFrame("ButtonPanel");
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.add(this);
        f.pack();
        f.setLocationRelativeTo(null);
        f.setVisible(true);
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                new ButtonPanel().display();
            }
        });
    }
} 
```

# c++ - 如何为windows预安装环境（Windows PE）构建应用程序？

> ID：11075627
> 
> 赞同：0
> 
> 时间：2012-06-17T23:33:22.270
> 
> 标签：c++, c, windows

我是 C++ 新手，我知道 windows pe 在库支持方面非常有限，因此所有内容都必须原生编写。这是我到目前为止所拥有的

```
// test.cpp : Defines the entry point for the console application.
//

#include "stdafx.h"

#include <stdio.h>
#include <windows.h>
#include <tchar.h>
#include <wimgapi.h>

DWORD
WINAPI
SampleCaptureCallback(
    IN      DWORD msgId,    //message ID
    IN      WPARAM param1,   //usually file name
    INOUT   LPARAM param2,   //usually error code
    IN      void  *unused
    )
{
    //First parameter: full file path for if WIM_MSG_PROCESS, message string for others
    TCHAR *message  = (TCHAR *) param1;
    TCHAR *filePath = (TCHAR *) param1;
    DWORD percent   = (DWORD)   param1;

    //Second parameter: message back to caller if WIM_MSG_PROCESS, error code for others
    DWORD errorCode = param2;
    DWORD *msg_back = (DWORD *) param2;
    DWORD seconds = (DWORD) param2;

    switch ( msgId )
    {
        case WIM_MSG_PROGRESS:

            // Prints out the current progress percentage.
            //
            system("cls");

            wprintf(L"__________________\n\n| Capture process|\t\t\n__________________\n\n%d %% captured. About %i seconds(s) remaining - %i minute(s)", (DWORD)param1, ((INT)seconds / 1000), ((INT)seconds / 60000));

            break;
        case WIM_MSG_PROCESS:

            //This message is sent for each file, capturing to see if callee intends to
            //capture the file or not.
            //
            //If you do not intend to capture this file, then assign FALSE in msg_back
            //and still return WIM_MSG_SUCCESS.
            //Default is TRUE.
            //

            //In this example, print out the file name being applied
            //
            //_tprintf(TEXT("FilePath: %s\n"), filePath);

            break;

        case WIM_MSG_ERROR:

            //This message is sent upon failure error case
            //
            printf("ERROR: %s [err = %d]\n", message, errorCode);
            break;

        case WIM_MSG_RETRY:

            //This message is sent when the file is being reapplied because of
            //network timeout. Retry is done up to five times.
            //
            printf("RETRY: %s [err = %d]\n", message, errorCode);
            break;

        case WIM_MSG_INFO:

            //This message is sent when informational message is available
            //
            printf("INFO: %s [err = %d]\n", message, errorCode);
            break;

        case WIM_MSG_WARNING:

            //This message is sent when warning message is available
            //
            printf("WARNING: %s [err = %d]\n", message, errorCode);
            break;
    }

    return WIM_MSG_SUCCESS;
}

void
SampleCaptureCleanup ( HANDLE hWim, HANDLE hImg, FARPROC callback )
{
    if (hImg) {
        WIMCloseHandle (hImg);
    }

    if (hWim) {
        WIMCloseHandle (hWim);
    }

    if (callback) {
        WIMUnregisterMessageCallback( NULL, callback );
    }
}

int _tmain(int argc, _TCHAR* argv[])
{
    HANDLE hWim = NULL;
    HANDLE hImg = NULL;
    DWORD  created = 0;
    DWORD  oFlag = 0, oAccess = 0;
    FARPROC callback = (FARPROC) SampleCaptureCallback;

    TCHAR *wimFile    = TEXT("C:\\work\\work.wim");  //destination .wim file
    TCHAR *tmpDir     = TEXT("C:\\work");               //temporary directory: OPTIONAL
    TCHAR *captureDir = TEXT("C:\\work");               //capture directory or drive

    SetConsoleTitle(L"Recovery");

    //generic capture/append call sequence
    //
    //w = WIMCreateFile()
    //WIMSetTemporaryPath() - optional
    //i = WIMCaptureImage()
    //WIMCloseHandle(i)
    //WIMCloseHandle(w)
    //

    //Set up access mode and open flag
    //
    if (argc < 1 || argc > 2) {
        SetLastError(ERROR_INVALID_PARAMETER);
        return 1;
    }

    if (argc == 1) {                        //capture
        oFlag   = WIM_CREATE_ALWAYS;
        oAccess = WIM_GENERIC_WRITE;
    }
    else if (*argv[1] != TEXT('a')) {       //append
        printf("need 'a' to append\n");
        SetLastError(ERROR_INVALID_PARAMETER);
        return 2;
    }
    else {
        oFlag   = WIM_OPEN_EXISTING;
        oAccess = WIM_GENERIC_WRITE | WIM_GENERIC_READ;
    }

    //Register callback
    //
    if (WIMRegisterMessageCallback( NULL,
                                    callback,
                                    NULL ) == INVALID_CALLBACK_VALUE) {
        printf ("Cannot set callback\n");
        return 3;
    }

    //Call SampleCleanup() upon exit from here
    //
    hWim = WIMCreateFile ( wimFile,             //existing .wim file to append to
                           oAccess,             //access mode
                           oFlag,               //open flag
                           0, // WIM_FLAG_VERIFY,     //recommended flag for file corruption check
                           WIM_COMPRESS_LZX, //or WIM_COMPRESS_LZX or WIM_COMPRESS_NONE
                           &created );

    if ( !hWim ) {
        printf ("Cannot open WIM file\n");

        SampleCaptureCleanup(hWim, hImg, callback);
        return 4;
    }

    //set temporary directory to work in
    //OPTIONAL, but recommended for large WIM file
    //
    //WIMSetTemporaryPath (hWim, tmpDir);         //OK to fail.

    //Now capture or append image
    //
    hImg = WIMCaptureImage ( hWim,
                             captureDir,  //capture directory or drive
                             0);          //WIM_FLAG_VERIFY

    if ( !hImg )
    {
        printf ("Cannot capture/append image\n");
        SampleCaptureCleanup (hWim, hImg, callback);
        return 5;
    }

    //Now we are done
    //
    SampleCaptureCleanup (hWim, hImg, callback);

    system("cls");
    wprintf(L"_____________\n\n| COMPLETED |\n_____________\n\nPress any key to exit...");

    getchar();

    return 0;
} 
```

它在windows中运行良好，但是当我在windows pe中运行它时，它说应用程序已经崩溃并且错误代码是0xc000007b。我的问题是如何使它编译为本机应用程序？我认为使用 wprintf 不是原生的？我错了吗？感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T16:36:20.407

在 PE 环境中进行 C/C++ 编码时的 2 个提示 1) PE 不包含 WOW，那么您必须在 64 位 PE 环境中使用 64 位版本的代码。2) 使 C/C++ 运行时库静态链接。

# javascript - Passport-twitter：在会话中找不到请求令牌

> ID：11075629
> 
> 赞同：22
> 
> 时间：2012-06-17T23:33:44.233
> 
> 标签：javascript, node.js, passport.js

就在昨天在 Heroku 上，我开始在快速登录 Twitter 时遇到此错误

```
Error: failed to find request token in session
    at Strategy.<anonymous> (/app/node_modules/passport-twitter/node_modules/passport-oauth/lib/passport-oauth/strategies/oauth.js:120:54)
    at Strategy.authenticate (/app/node_modules/passport-twitter/lib/passport-twitter/strategy.js:82:40)
    at Passport.authenticate (/app/node_modules/passport/lib/passport/middleware/authenticate.js:153:14)
    at callbacks (/app/node_modules/express/lib/router/index.js:272:11)
    at param (/app/node_modules/express/lib/router/index.js:246:11)
    at pass (/app/node_modules/express/lib/router/index.js:253:5)
    at Router._dispatch (/app/node_modules/express/lib/router/index.js:280:4)
    at Object.handle (/app/node_modules/express/lib/router/index.js:45:10)
    at Context.next (/app/node_modules/express/node_modules/connect/lib/http.js:204:15)
    at Context.<anonymous> (/app/node_modules/passport/lib/passport/context/http/actions.js:64:8) 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-03T08:47:35.150

YUHU 我解决了。问题是有时我的网站有 www 有时没有，所以显然会话存在问题。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-05-12T13:24:21.547

我在使用 Node.js、Express 和 Passport 时也遇到了这个错误，尽管我的修复与上面描述的不同。

我从“快速会话”文档中复制并粘贴了以下代码......

```
app.use(session({ secret: 'keyboard cat', key: 'sid', cookie: { secure: true }})) 
```

那**安全：真实**位指示 express-session 使用“https”，我在我的开发环境中没有设置。一旦我删除它，错误就消失了。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-04-04T23:21:02.630

这是一个很晚的答案，但我只是想出了另一个可能发生这种情况的原因。当制作**express-session**的人说 MemoryStore 不是用于生产时，他们是认真的。

如果您使用集群（pm2 或永久或在 Heroku 上运行），那么基于内存的 cookie 存储有其自身的一系列问题。您经常会丢失 cookie 或损坏它们（因为服务器端有两个或多个单独的进程，不共享公共内存）。

如果你想用集群运行你的 Node 应用程序，你需要使用 Redis 或一些数据库支持的 cookie 存储

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-07-30T06:01:29.697

在 Twitter 应用设置中，确保以下字段具有这些值：

网址： http: [//127.0.0.1 :3000](http://127.0.0.1:3000)

回调地址： http: [//127.0.0.1 :3000/auth/twitter/callback](http://127.0.0.1:3000/auth/twitter/callback)

**我正在使用端口号 3000。您可以将其更改为您正在使用的任何端口。

现在，在浏览器中导航到[http://127.0.0.1:3000 。](http://127.0.0.1:3000)这应该可以解决您的问题。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-06-21T06:36:19.350

这完全是随机的，而且我是 Node 新手……所以请随意使用盐。

实际上，我今晚看到了这个错误和一个非常相似的堆栈跟踪。原来，我刚刚将我的身份验证回调路由更改为如下所示：

`app.use('/auth/twitter/callback', twitterCallback);`

看看我是如何在`use`那里使用而不是`get`？一旦我把它改回来，我就不再收到这个错误了。

不过，我的堆栈跟踪看起来有点不同：

```
DEBUG: Error: failed to find request token in session
     at Strategy.<anonymous> (/Users/drhayes/src/incursion/node_modules/passport-twitter/node_modules/passport-oauth/lib/passport-oauth/strategies/oauth.js:122:54)  
     at Strategy.authenticate (/Users/drhayes/src/incursion/node_modules/passport-twitter/lib/passport-twitter/strategy.js:82:40)  
     at Passport.authenticate (/Users/drhayes/src/incursion/node_modules/passport/lib/passport/middleware/authenticate.js:153:14)  
     at Object.handle (native)  
     at next (/Users/drhayes/src/incursion/node_modules/express/node_modules/connect/lib/http.js:204:15)  
     at /Users/drhayes/src/incursion/node_modules/passport/lib/passport/middleware/authenticate.js:99:9  
     at /Users/drhayes/src/incursion/node_modules/passport/lib/passport/http/request.js:46:7  
     at pass (/Users/drhayes/src/incursion/node_modules/passport/lib/passport/index.js:229:30)  
     at /Users/drhayes/src/incursion/node_modules/passport/lib/passport/index.js:237:36  
     at /Users/drhayes/src/incursion/routes/auth.coffee:42:14 
```

您的来源最近是否发生了变化？您部署的 slug 中是否存在修订问题？

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-08-17T08:53:25.203

就我而言，这是由于反向代理和安全 cookie。设置`app.set('trust proxy', 1)`解决了这个问题。

[https://github.com/expressjs/session/issues/281#issuecomment-191327863](https://github.com/expressjs/session/issues/281#issuecomment-191327863)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-10-19T18:23:25.670

我有同样的问题，解决方案是，使用[http://127.0.0.1:3000/](http://127.0.0.1:3000/)而不是[http://localhost:3000](http://localhost:3000)获取站点，当请求发生时一切正常。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-02-01T20:24:26.023

Twitter 不接受 localhost 所以我被迫使用以下设置：

在[https://apps.twitter.com/app/](https://apps.twitter.com/app/) ....

```
website = http://127.0.0.1:3000
callback url: http://localhost:3000/login/twitter/callback 
```

护照上：

```
'callbackURL'       : 'http://localhost:3000/login/twitter/callback' 
```

注意：twitter 回调 url 使用 127.0.0.1 和 localhost

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-07-04T12:35:25.750

我使用了 passport-flickr 并通过将**127.0.0.1**更改为**localhost解决了同样的问题**

```
passport.use(new FlickrStrategy({
    ...
    callbackURL: "http://localhost:3000/auth/flickr/callback"
  }, 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-02-06T23:56:52.177

我有一次，我通过更改回调 URL 来修复它

*从* **127.0.0.1**

*到* **本地主机**

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-06-03T18:55:20.420

`sameSite`似乎是另一个罪魁祸首。从

```
const SESSION_OPTIONS = {
  ...
  cookie: {
    sameSite: true,
  },
}; 
```

到

```
const SESSION_OPTIONS = {
  ...
  cookie: {
    sameSite: app.get('env') === 'production' ? true : false,
  },
}; 
```

为我做了伎俩。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-11-05T21:22:46.680

对我来说相同的症状（没有请求令牌），但在这里尝试其他解决方案没有帮助（`secure: false`, `localhost`vs`127.0.0.1`等）

原来问题是由于使用`cookie-session`. 就我而言，我为该`expires`选项传递了一个数字，但该选项需要一个日期。改为使用`maxAge`，它需要一个数字。

# javascript - 如何自动用文本自动填充文本字段

> ID：11075635
> 
> 赞同：0
> 
> 时间：2012-06-17T23:35:35.013
> 
> 标签：javascript, jquery, html

我有一个简单的注册表单，我想做一个选项，比如有两个不同的字段，我想要的很简单，只是当我将文本添加到第一个字段时，它应该自动将相同的内容添加到下一个字段。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T23:41:19.783

```
$("#field1").change(function(){
    $("#field2").val(this.value);
}); 
```

**演示：http: [//jsfiddle.net/DerekL/CcDv4/](http://jsfiddle.net/DerekL/CcDv4/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T23:46:16.987

该`change`事件仅在满足 2 个条件时触发：

*   元素失去焦点；
*   该元素具有与`value`获得焦点时不同的属性。

如果您希望文本在键入时更改，可以将 jQuery 与 HTML5`input`事件一起使用：

```
//assuming `a` and `b` as text field IDs
$('#a').on('input', function() {
   $('#b').val($(this).val());
});​ 
```

[**JSFiddle**](http://jsfiddle.net/ult_combo/QTcGS/)

对于非 HTML5 浏览器，您可以扩展事件映射来模拟`input`事件：

```
$('#a').on('input keydown keypress keyup change blur', function() {
    $('#b').val($(this).val());
 });​ 
```

[**JSFiddle**](http://jsfiddle.net/ult_combo/QTcGS/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-17T23:42:29.630

```
$(function(){
    $('#txt1').on('change', function(e){
        $('#txt2').val($(this).val());
    });
});​ 
```

[**演示。**](http://jsfiddle.net/heera/GUeCD/3/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T05:55:34.940

为第一个字段提供 onchange 事件并为第二个字段分配值，如下所示

```
onchange="secondfieldname.value=firstfieldnamefieldname.value" 
```

# excel - 在单元格范围内搜索数字

> ID：11075640
> 
> 赞同：0
> 
> 时间：2012-06-17T23:37:00.363
> 
> 标签：excel, excel-formula

我想弄清楚是否有一种方法可以在一系列单元格中搜索某个数字？例如`=SEARCH(M5,A:A)`. 这会返回`#VALUE!`错误。有人有这方面的经验吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T00:01:00.647

您可以使用 COUNTIF 函数来计算指定值的范围。然后，您可以将 COUNTIF 函数包装在 IF 语句中以显示更好的消息

```
=IF(COUNTIF(YOUR_RANGE, YOUR_CRITERIA) = 1, "Found", "Not Found") 
```

# wordpress - 我应该如何从 api.mapmyfitness.com 下载数据？

> ID：11075641
> 
> 赞同：2
> 
> 时间：2012-06-17T23:37:03.673
> 
> 标签：wordpress, api, import

我想使用 MapMyFitness 的 API 在我的 Wordpress 网站上显示。它需要以对我的读者友好的格式，所以我认为它可以转换成帖子。我应该编写一个脚本直接从他们的服务器中提取这些数据（在每次页面刷新期间），还是应该为它创建和安排一个 cron 作业？我确实喜欢为它创建一个 cron 作业的想法（因为我的网站需要跟踪每条路线的评级和评论），但我不知道从哪里开始。

这是我用来从中获取数据的 URL：

[http://api.mapmyfitness.com/3.1/routes/get_route?&o=xml&r=&route_key=&route_id=15219484&created_date=&old_json=&loc=](http://api.mapmyfitness.com/3.1/routes/get_route?&o=xml&r=&route_key=&route_id=15219484&created_date=&old_json=&loc=)

API 确实支持 JSON，因此 &o= 参数可以设置为“&o=Json”。

这是我正在使用的 API 的链接：api.mapmyfitness.com/3.1/

这是上面链接中使用的 Routes 方法的链接。它显示了如何操作数据：api.mapmyfitness.com/3.1/routes/get_route?doc

请让我知道我是否应该提供有关我要完成的工作的更多详细信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T07:57:14.587

有几种方法可以解决这个问题..

但是为了简单起见，您可以只使用 XML 解析器来读取从 API 返回的 xml，这个 xml 文件，您可以用它做您想做的事情，为每个路由添加页面/帖子？

你在使用谷歌地图来显示路线点吗？

这里有一个小代码块，你可以在你的 wordpress 侧边栏中使用。

打开侧边栏.php

弹出这个小代码片段。

```
$url = "http://api.mapmyfitness.com/3.1/routes/get_route?&o=xml&r=&route_key=&route_id=15219484&created_date=&old_json=&loc=";
$xml= simplexml_load_file($url);

foreach($xml->output as $output){
   echo "User: ".$output->user->username."<br/>";
   echo "RouteName: ".$output->route_name;
   echo "<ul>";
   //loop through each point
   foreach($output->points as $point){
       echo "<li>Lat: ".$point->point->lat." Long: ".$point->point->lng."</li>";
   }
   echo "</ul>";
} 
```

这应该产生一个列表 **用户：** mm75 RouteName：All PANTHER TRACE - Riverview FL 2010 年 3 月 31 日下午 1:14

*   纬度：27.81178 经度：-82.330725
*   纬度：27.81178 经度：-82.330725

等等..等等..等等..

希望这能让你走上正轨，:)

马蒂

# html - 显示网页时防止垂直滚动条？

> ID：11075642
> 
> 赞同：0
> 
> 时间：2012-06-17T23:37:07.363
> 
> 标签：html, css, scroll

嘿，我正在尝试获取我的网站，因此它不会垂直滚动并且我现在正在努力滚动一点（最大 20 像素）

[网站在这里](http://22twenty.com/Final/)css : [css here](http://jsfiddle.net/8pNNK/)

希望你能帮忙

丹佛

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T23:44:48.783

你有`body { padding-bottom: 20px; }`。您的 box-model 设置为传统的 CSS2.1 模型，因此它的“高度”实际上是“100% + 20px”。消除填充，你就设置好了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T23:41:33.853

您的`#container`div 的高度为 100%。下面是你的页脚，它也有一些高度。你应该让你的容器不那么高或者把你的页脚放在你的容器里，这样两个元素的总高度就不会超过 100%。

# objective-c - 使用包含数字的字符串对 NSMutableArray 进行排序？

> ID：11075644
> 
> 赞同：5
> 
> 时间：2012-06-17T23:37:59.473
> 
> 标签：objective-c, sorting, nsarray

我有一个 NSMutableArray，它保存了用户的高分。我想按数字排列项目（数字存储在 NSStrings 中。）
示例：
4,2,7,8
到
2,4,7,8
如果数据存储在 NSStrings 中，最简单的方法是什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-24T21:57:47.157

此代码将执行此操作：

```
//creating mutable array
NSMutableArray *myArray = [NSMutableArray arrayWithObjects:@"4", @"2", @"7", @"8", nil];

//sorting
[myArray sortUsingComparator:^NSComparisonResult(NSString *str1, NSString *str2) {
    return [str1 compare:str2 options:(NSNumericSearch)];
}];

//logging
NSLog(@"%@", myArray); 
```

它使用块，确保您的目标操作系统支持（iOS 为 4.0，OSX 为 10.6）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T21:34:06.763

此代码有效。我尝试过这个：

```
NSMutableArray *unsortedHighScores = [[NSMutableArray alloc] initWithObjects:@"4", @"2", @"7", @"8", nil];

NSMutableArray *intermediaryArray = [[NSMutableArray alloc] init];

for(NSString *score in unsortedHighScores){

    NSNumber *scoreInt = [NSNumber numberWithInteger:[score integerValue]];
    [intermediaryArray addObject:scoreInt];
}

NSArray *sortedHighScores = [intermediaryArray sortedArrayUsingSelector:@selector(compare:)];
NSLog(@"%@", sortedHighScores); 
```

输出是这样的：

> 2
> 
> 4
> 
> 7
> 
> 8

如果您对代码有任何疑问，请在评论中提问。希望这可以帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T21:39:57.853

NSMutableArray 方法[sortUsingSelector:](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/Reference/Reference.html)应该这样做：

```
[scoreArray sortUsingSelector:@selector(localizedCaseInsensitiveCompare:)] 
```

应该这样做。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-04-12T10:37:57.633

如果数组是包含键的数值的 nsdictionaries`number`

```
isKeyAscending = isKeyAscending ? NO : YES;

[yourArray sortUsingComparator:^NSComparisonResult(NSDictionary *obj1, NSDictionary *obj2) {

    NSString *str1 = [obj1 objectForKey:@"number"];
    NSString *str2 = [obj2 objectForKey:@"number"];

    if(isKeyAscending) { //ascending order
        return [str1 compare:str2 options:(NSNumericSearch)];
    } else { //descending order
        return [str2 compare:str1 options:(NSNumericSearch)];
    }
}];

//yourArray is now sorted 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-02T23:18:11.587

[Darshit Shah](https://stackoverflow.com/users/2071021/darshit-shah)的[回答](https://stackoverflow.com/questions/13874256/sorting-number-using-nssortdescriptor)让事情变得顺利

```
NSSortDescriptor *descriptor = [[NSSortDescriptor alloc]initWithKey:@"rank"  ascending:YES selector:@selector(localizedStandardCompare:)]; 
```

# clojure - 通过 org.clojure/algo.monads 将 Reduce 实现为 Monadic Map

> ID：11075645
> 
> 赞同：1
> 
> 时间：2012-06-17T23:38:07.070
> 
> 标签：clojure, monads

## 语境

我目前正在阅读有关 Clojure 对 monads 的实现：org.clojure/algo.monads

直观地说，reduce 看起来像是应用于地图的 state-m。基本上，有一个“状态”，它是迄今为止的价值。

现在，我无法以“标准方式”完成这项工作，因为：

```
(domonad state-m
   [ ... I can only stuff a constant number of things here ...
     ... but I need to stuff here a list whose size is only known at run time ... ]
    ..) 
```

## 问题

有没有办法使用 state-m 将 reduce 实现为 monad？

我知道我永远不会在实践中使用它，这纯粹是为了启蒙+更好地理解事物如何组合在一起。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T05:01:56.913

我认为使用`domand`宏（没有运行时代码生成和评估）不可能实现您的要求。一种选择是直接使用state monad`m-bind`的`m-result`函数来获得所需的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T10:10:20.367

状态单子本身没有任何列表迭代的概念。所以你不能直接使用 state monad 来做到这一点。

您可以在 a 中使用 state monad`loop`来模拟 reduce - 但循环本身将提供类似 reduce 的行为，state monad 本身不会真正做出任何贡献。

# mysql - 在 Rails 中创建签入时创建/更新位置

> ID：11075650
> 
> 赞同：0
> 
> 时间：2012-06-17T23:38:52.573
> 
> 标签：mysql, ruby-on-rails, database

我正在尝试在我的 Rails 项目中保存签入时创建/更新位置，但是遇到了麻烦。

一个 Checkin belongs_to :location 和一个 Location has_many :checkins

我`accepts_nested_attributes_for :location, :allow_destroy => true`在我的签入模型中使用，并尝试在创建签入时创建一个位置，如下所示：

```
POST "checkin[note]=this-is-great&checkin[user_id]=123&checkin[location_attributes][name]=popeyes&checkin[location_attributes][id]=314" to http://localhost:3000/checkins.json 
```

但是，每次我运行它时，它都会抛出一个错误说

> 找不到 ID=314 的位置以进行 ID= 的签到

我不确定我在做什么正确..？如果它不存在，我希望它创建具有特定 ID 的位置，如果它确实存在，则更新相同的位置（根据 location_id）。

位置表有一个 id（主键）和名称（varchar）

checkin 表有一个 id（主键，自增）和 note（varchar）

任何人都成功地使用了accepts_nested_attributes_for？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T04:52:43.003

这是我为解决问题所做的：

我将 Locations 的 id 从主要更改为主要+自动增量，并停止尝试手动设置它。我决定单独存储foursquare_id（在不同的列中），而不是让它与我试图存储的foursquare_id相同。

我的签到模型如下所示：

```
 belongs_to :location, :autosave => true
  accepts_nested_attributes_for :location, :allow_destroy => true

 def autosave_associated_records_for_location
    if Location.find_by_foursquareID(location.foursquareID)
      self.location = Location.find_by_foursquareID(location.foursquareID)
    else
      self.location.save!
      self.location = self.location
    end
  end 
```

# javascript - .push() 将多个对象放入 JavaScript 数组返回“未定义”

> ID：11075651
> 
> 赞同：19
> 
> 时间：2012-06-17T23:38:56.150
> 
> 标签：javascript, arrays

当我将项目添加到 beats 数组然后 console.log 用户时，我得到了数组中正确数量的项目。但是当我检查 .length 时，我总是得到 1。尝试调用索引总是会给我这样的“未定义”： `Tom.beats[1]` 我认为我遗漏了一些明显的东西，但这让我感到沮丧。我怀疑我在滥用该`.push`方法，但我不确定。任何帮助是极大的赞赏！（使用 Chrome 开发工具）

```
//The USER

function User(name, role){
    this.beats = [ ]; 

    this.name = name;
    this.role = role;

    // add beats to beats array

    this.addBeats = function(beats){ 
        return this.beats.push(beats);
   };

}

// Three New Instances. Three New Users.

var Mal = new User("Mal", "Rapper");
Mal.addBeats(["love", "cash"]);

var Dan = new User("Dan", "Producer");
Dan.addBeats(["cake", "dirt", "sally-mae"]);

var Tom = new User("Tom", "Producer");
Tom.addBeats(["Fun", "Little", "Samsung", "Turtle", "PC"]);

// Check for position in beats array

console.log(Tom.beats); 
console.log(Mal.beats); 
console.log(Dan.beats); 

console.log(Mal.beats[1]);
console.log(Dan.beats[1]);
console.log(Tom.beats[1]); 
```

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-06-17T23:48:24.043

[`Array.push(...)`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/push)需要多个参数附加到列表中。如果你把它们放在一个数组中，这个“节拍”数组将被附加。

[`Array.concat(...)`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/concat)很可能不是您要查找的内容，因为它会生成一个新数组而不是附加到现有数组。

您可以使用[`[].push.apply(Array, arg_list)`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/apply)附加参数列表的项目：

```
this.addBeats = function(beats) { 
    return [].push.apply(this.beats, beats);
}; 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-05-19T10:28:22.893

### 扩展运算符

在支持[扩展运算符](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Operators/Spread_operator)的环境中，您现在可以执行以下操作：

```
this.addBeats = function (beats) {
    return this.beats.push(...beats);
}; 
```

或者，如果您需要更多控制来覆盖等

```
this.addBeats = function(beats) { 
    return this.beats.splice(this.beats.length, null, ...beats);
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-17T23:41:36.380

addBeats() 应该将 this.beats 与 beats 参数连接起来。

# asp.net - 访问 asp.net Ajax 手风琴面板内的按钮控件

> ID：11075653
> 
> 赞同：0
> 
> 时间：2012-06-17T23:39:26.540
> 
> 标签：asp.net, accordion

我有一个问题，我的手风琴面板带有动态生成的手风琴窗格，以及动态生成的控件，例如我的“btnVoucherProcess”按钮。现在我正在尝试使用“查找控件”方法访问我的按钮（btnVoucherProcess），如下所示：

```
 For i As Int32 = 0 To acAccomodation.Panes.Count - 1
        Dim btnVoucherProcess As Button CType(acAccomodation.FindControl("btnVoucherProcess" & i), Button) 'New Button("btnVoucherProcess" & i)
        btnVoucherProcess.Text = "Saved " & i
    Next 
```

如果我运行此代码会引发错误，该错误告诉我我的按钮为空。如何访问手风琴内的按钮 (btnVoucherProcess)。

提前致谢。

===========

这是整个代码 代码在page_load中调用

```
 The code that is called in page_load  Private Sub emptyDaysAddMode(ByVal duration As Integer)

    For i As Integer = 0 To duration - 1
        Dim pn As New AjaxControlToolkit.AccordionPane()
        pn.ID = "Pane" & i
        pn.HeaderContainer.Controls.Add(accomodation(i, "", "", "", txtMarkup.Text, 0, 0, 0, 0, 0, 0))
        pn.ContentContainer.Controls.Add(accomodationDetails(i))
        acAccomodation.Panes.Add(pn)
        'drRow(0) = i + 1
        'dtExcel.Rows.Add(drRow)
    Next
End Sub

Function accomodation(ByVal i As Int32, ByVal ID As String, ByVal dteDate As String, ByVal strDescription As String, ByVal Markup As Double, ByVal SGL As Int32, ByVal Twin As Int32, ByVal Triple As Int32, ByVal Child As Int32, ByVal Teen As Int32, ByVal ChildOR As Int32) As Table
    accomodation = New Table()

    Dim myTableRow As New TableRow
    myTableRow.Width = Unit.Percentage(100)
    Dim dayCell As New TableCell
    Dim txtDay As TextBox = New TextBox
    txtDay.ID = "txtDate" & i
    txtDay.Text = dteDate
    If txtDay.Text = "" And txtArrival.Text <> "" Then txtDay.Text = DateAdd("d", i, CType(txtArrival.Text, Date))
    txtDay.Width = Unit.Pixel(70)
    dayCell.Controls.Add(txtDay)

    Dim lblAccID As Label = New Label
    lblAccID.ID = "lblAccID" & i
    lblAccID.Text = ID
    lblAccID.Visible = False
    dayCell.Controls.Add(lblAccID)
    myTableRow.Cells.Add(dayCell)

    Dim hotelRateCell As New TableCell
    Dim txtHotelRate As TextBox = New TextBox
    txtHotelRate.ID = "txtHotelRate" & i
    txtHotelRate.Text = strDescription
    txtHotelRate.Width = Unit.Pixel(295)
    txtHotelRate.Attributes.Add("onkeyup", "javascript:Complete(this, event," & i & ")")
    hotelRateCell.Controls.Add(txtHotelRate)
    myTableRow.Cells.Add(hotelRateCell)

    Dim markupCell As New TableCell
    Dim txtmarkup As TextBox = New TextBox
    txtmarkup.ID = "txtMarkup" & i
    txtmarkup.Width = Unit.Pixel(35)
    txtmarkup.Text = Markup
    If txtmarkup.Text = 0 Then txtmarkup.Text = txtQuotationMarkup.Text
    txtmarkup.Attributes.Add("onchange", "javascript:accomodationCalc(" & i & ")")
    markupCell.Controls.Add(txtmarkup)
    myTableRow.Cells.Add(markupCell)

    Dim nightCell As New TableCell
    Dim txtnight As TextBox = New TextBox
    txtnight.ID = "txtnight" & i
    txtnight.Text = 1
    txtnight.Width = Unit.Pixel(25)
    txtnight.Attributes.Add("onchange", "javascript:accomodationCalc(" & i & ")")
    nightCell.Controls.Add(txtnight)
    myTableRow.Cells.Add(nightCell)

    Dim sglCell As New TableCell
    Dim txtSGL As TextBox = New TextBox
    txtSGL.ID = "txtSGL" & i
    txtSGL.Width = Unit.Pixel(25)
    txtSGL.Text = SGL
    txtSGL.Attributes.Add("onchange", "javascript:accomodationCalc(" & i & ")")
    sglCell.Controls.Add(txtSGL)
    myTableRow.Cells.Add(sglCell)

    Dim DBLCell As New TableCell
    Dim txtDBL As TextBox = New TextBox
    txtDBL.ID = "txtDBL" & i
    txtDBL.Width = Unit.Pixel(25)
    txtDBL.Text = Twin
    txtDBL.Attributes.Add("onchange", "javascript:accomodationCalc(" & i & ")")
    DBLCell.Controls.Add(txtDBL)
    myTableRow.Cells.Add(DBLCell)

    Dim trpCell As New TableCell
    Dim txtTRP As TextBox = New TextBox
    txtTRP.ID = "txtTRP" & i
    txtTRP.Width = Unit.Pixel(25)
    txtTRP.Text = Triple
    txtTRP.Attributes.Add("onchange", "javascript:accomodationCalc(" & i & ")")
    trpCell.Controls.Add(txtTRP)
    myTableRow.Cells.Add(trpCell)

    Dim chdCell As New TableCell
    Dim txtCHD As TextBox = New TextBox
    txtCHD.ID = "txtCHD" & i
    txtCHD.Width = Unit.Pixel(25)
    txtCHD.Text = Child
    txtCHD.Attributes.Add("onchange", "javascript:accomodationCalc(" & i & ")")
    chdCell.Controls.Add(txtCHD)
    myTableRow.Cells.Add(chdCell)

    Dim tnCell As New TableCell
    Dim txtTN As TextBox = New TextBox
    txtTN.ID = "txtTN" & i
    txtTN.Width = Unit.Pixel(25)
    txtTN.Text = Teen
    txtTN.Attributes.Add("onchange", "javascript:accomodationCalc(" & i & ")")
    tnCell.Controls.Add(txtTN)
    myTableRow.Cells.Add(tnCell)

    Dim childOWRCell As New TableCell
    Dim txtChildOWR As TextBox = New TextBox
    txtChildOWR.ID = "txtchildOWR" & i
    txtChildOWR.Width = Unit.Pixel(25)
    txtChildOWR.Text = ChildOR
    txtChildOWR.Attributes.Add("onchange", "javascript:accomodationCalc(" & i & ")")
    childOWRCell.Controls.Add(txtChildOWR)
    myTableRow.Cells.Add(childOWRCell)

    Dim CostCell As New TableCell
    Dim txtCost As TextBox = New TextBox
    txtCost.ID = "txtCost" & i
    txtCost.Width = Unit.Pixel(55)
    txtCost.Enabled = False
    CostCell.Controls.Add(txtCost)
    myTableRow.Cells.Add(CostCell)

    Dim SaleCell As New TableCell
    Dim txtSale As TextBox = New TextBox
    txtSale.ID = "txtSale" & i
    txtSale.Width = Unit.Pixel(55)
    txtSale.Enabled = False
    SaleCell.Controls.Add(txtSale)
    myTableRow.Cells.Add(SaleCell)

    Dim ProfitCell As New TableCell
    Dim txtProfit As TextBox = New TextBox
    txtProfit.ID = "txtProfit" & i
    txtProfit.Width = Unit.Pixel(60)
    txtProfit.Enabled = False
    ProfitCell.Controls.Add(txtProfit)
    myTableRow.Cells.Add(ProfitCell)

    Dim deleteCell As New TableCell
    Dim chkAccDelete As CheckBox = New CheckBox
    chkAccDelete.ID = "chkAccDelete" & i
    chkAccDelete.Width = Unit.Pixel(60)
    deleteCell.Controls.Add(chkAccDelete)
    myTableRow.Cells.Add(deleteCell)

    accomodation.Rows.Add(myTableRow)
    Return accomodation

End Function

Function accomodationDetails(ByVal i As Int32) As Table
    accomodationDetails = New Table()
    accomodationDetails.BorderColor = Color.Black
    accomodationDetails.BorderStyle = BorderStyle.Solid
    '------1st Row
    Dim tableRow1 As New TableRow
    Dim mycell1 As New TableCell
    mycell1.Text = "Description"
    mycell1.BackColor = Color.Gray
    'Dim tb As TextBox = New TextBox
    tableRow1.Cells.Add(mycell1)

    Dim mycell2 As New TableCell
    mycell2.Text = "Single"
    mycell2.BackColor = Color.Gray
    tableRow1.Cells.Add(mycell2)

    Dim mycell3 As New TableCell
    mycell3.Text = "Double"
    mycell3.BackColor = Color.Gray
    tableRow1.Cells.Add(mycell3)

    Dim mycell4 As New TableCell
    mycell4.Text = "Triple"
    mycell4.BackColor = Color.Gray
    tableRow1.Cells.Add(mycell4)

    Dim mycell5 As New TableCell
    mycell5.Text = "Child"
    mycell5.BackColor = Color.Gray
    tableRow1.Cells.Add(mycell5)

    Dim mycell6 As New TableCell
    mycell6.Text = "Teen"
    mycell6.BackColor = Color.Gray
    tableRow1.Cells.Add(mycell6)

    Dim mycell7 As New TableCell
    mycell7.Text = "Child(OR)"
    mycell7.BackColor = Color.Gray
    tableRow1.Cells.Add(mycell7)
    accomodationDetails.Rows.Add(tableRow1)

    '------2nd Row
    Dim tableRow2 As New TableRow
    Dim mycell1R2 As New TableCell
    mycell1R2.Text = "Cost"
    tableRow2.Cells.Add(mycell1R2)

    Dim mycell2R2 As New TableCell
    Dim txtSingle As TextBox = New TextBox
    txtSingle.ID = "txtSingle" & i
    txtSingle.Width = Unit.Pixel(60)
    mycell2R2.Controls.Add(txtSingle)
    tableRow2.Cells.Add(mycell2R2)

    Dim mycell3R2 As New TableCell
    Dim txtDouble As TextBox = New TextBox
    txtDouble.ID = "txtDouble" & i
    txtDouble.Width = Unit.Pixel(60)
    mycell3R2.Controls.Add(txtDouble)
    tableRow2.Cells.Add(mycell3R2)
    accomodationDetails.Rows.Add(tableRow2)

    Dim mycell4R2 As New TableCell
    Dim txtTriple As TextBox = New TextBox
    txtTriple.ID = "txtTriple" & i
    txtTriple.Width = Unit.Pixel(60)
    mycell4R2.Controls.Add(txtTriple)
    tableRow2.Cells.Add(mycell4R2)
    accomodationDetails.Rows.Add(tableRow2)

    Dim mycell5R2 As New TableCell
    Dim txtChild As TextBox = New TextBox
    txtChild.ID = "txtChild" & i
    txtChild.Width = Unit.Pixel(60)
    mycell5R2.Controls.Add(txtChild)
    tableRow2.Cells.Add(mycell5R2)
    accomodationDetails.Rows.Add(tableRow2)

    Dim mycell6R2 As New TableCell
    Dim txtTeen As TextBox = New TextBox
    txtTeen.ID = "txtTeen" & i
    txtTeen.Width = Unit.Pixel(60)
    mycell6R2.Controls.Add(txtTeen)
    tableRow2.Cells.Add(mycell6R2)

    Dim mycell7R2 As New TableCell
    Dim txtChildOR As TextBox = New TextBox
    txtChildOR.ID = "txtChildOR" & i
    txtChildOR.Width = Unit.Pixel(60)
    mycell7R2.Controls.Add(txtChildOR)
    tableRow2.Cells.Add(mycell7R2)
    accomodationDetails.Rows.Add(tableRow2)

    '------3rd Row
    Dim tableRow3 As New TableRow
    Dim mycell1R3 As New TableCell
    mycell1R3.Text = "Sales"
    tableRow3.Cells.Add(mycell1R3)

    Dim mycell2R3 As New TableCell
    Dim txtSingleSale As TextBox = New TextBox
    txtSingleSale.ID = "txtSingleSale" & i
    txtSingleSale.Width = Unit.Pixel(60)
    mycell2R3.Controls.Add(txtSingleSale)
    tableRow3.Cells.Add(mycell2R3)

    Dim mycell3R3 As New TableCell
    Dim txtDoubleSale As TextBox = New TextBox
    txtDoubleSale.ID = "txtDoubleSale" & i
    txtDoubleSale.Width = Unit.Pixel(60)
    mycell3R3.Controls.Add(txtDoubleSale)
    tableRow3.Cells.Add(mycell3R3)

    Dim mycell4R3 As New TableCell
    Dim txtTripleSale As TextBox = New TextBox
    txtTripleSale.ID = "txtTripleSale" & i
    txtTripleSale.Width = Unit.Pixel(60)
    mycell4R3.Controls.Add(txtTripleSale)
    tableRow3.Cells.Add(mycell4R3)

    Dim mycell5R3 As New TableCell
    Dim txtChildSale As TextBox = New TextBox
    txtChildSale.ID = "txtChildSale" & i
    txtChildSale.Width = Unit.Pixel(60)
    mycell5R3.Controls.Add(txtChildSale)
    tableRow3.Cells.Add(mycell5R3)

    Dim mycell6R3 As New TableCell
    Dim txtTeenSale As TextBox = New TextBox
    txtTeenSale.ID = "txtTeenSale" & i
    txtTeenSale.Width = Unit.Pixel(60)
    mycell6R3.Controls.Add(txtTeenSale)
    tableRow3.Cells.Add(mycell6R3)

    Dim mycell7R3 As New TableCell
    Dim txtChildORSale As TextBox = New TextBox
    txtChildORSale.ID = "txtChildORSale" & i
    txtChildORSale.Width = Unit.Pixel(60)
    mycell7R3.Controls.Add(txtChildORSale)
    tableRow3.Cells.Add(mycell7R3)
    accomodationDetails.Rows.Add(tableRow3)

    '-----4th Row
    Dim tableRow4 As New TableRow
    Dim mycell1R4 As New TableCell
    mycell1R4.Text = "Voucher remarks"
    tableRow4.Cells.Add(mycell1R4)

    Dim mycell2R4 As New TableCell
    mycell2R4.ColumnSpan = "6"
    Dim txtVoucherRemarks As TextBox = New TextBox
    txtVoucherRemarks.ID = "txtVoucherRemarks" & i
    txtVoucherRemarks.Width = Unit.Pixel(420)
    txtVoucherRemarks.TextMode = TextBoxMode.MultiLine
    mycell2R4.Controls.Add(txtVoucherRemarks)
    tableRow4.Cells.Add(mycell2R4)
    accomodationDetails.Rows.Add(tableRow4)

    '------5th Row
    Dim tableRow5 As New TableRow
    Dim mycell1R5 As New TableCell
    Dim chkPark As New CheckBox
    chkPark.ID = "chkPark" & i
    chkPark.Text = "Include park fees."
    mycell1R5.Text = ""
    mycell1R5.Controls.Add(chkPark)
    tableRow5.Cells.Add(mycell1R5)

    Dim mycell2R5 As New TableCell
    mycell2R5.ColumnSpan = "2"
    Dim btnVoucherProcess As Button = New Button
    btnVoucherProcess.ID = "btnVoucherProcess" & i
    btnVoucherProcess.Width = Unit.Pixel(120)
    btnVoucherProcess.Text = "Book"
    mycell2R5.Controls.Add(btnVoucherProcess)
    tableRow5.Cells.Add(mycell2R5)

    Dim mycell3R5 As New TableCell
    mycell3R5.ColumnSpan = "2"
    Dim btnVoucherCancel As Button = New Button
    btnVoucherCancel.ID = "btnVoucherCancel" & i
    btnVoucherCancel.Width = Unit.Pixel(120)
    btnVoucherCancel.Text = "Cancel voucher"
    mycell3R5.Controls.Add(btnVoucherCancel)
    tableRow5.Cells.Add(mycell3R5)

    Dim mycell4R5 As New TableCell
    mycell4R5.ColumnSpan = "2"
    Dim btnVoucherPrint As Button = New Button
    btnVoucherPrint.ID = "btnVoucherPrint" & i
    btnVoucherPrint.Width = Unit.Pixel(120)
    btnVoucherPrint.Text = "Print voucher"
    mycell4R5.Controls.Add(btnVoucherPrint)
    tableRow5.Cells.Add(mycell4R5)

    accomodationDetails.Rows.Add(tableRow5)

    Return accomodationDetails
End Function 
```

以下代码由手风琴外的按钮触发

```
 Protected Sub btnSaveAccomodation_Click(sender As Object, e As System.EventArgs) Handles btnSaveAccomodation.Click
    For i As Int32 = 0 To acAccomodation.Panes.Count - 1
        'For Each i As In Me.cdTransport.Items
        ' Dim btnVoucherProcess As Button = CType(acAccomodation.FindControl("btnVoucherProcess" & i), Button) 'New Button("btnVoucherProcess" & i)
        Dim controlName As String = "btnVoucherProcess" & i
        Dim btnVoucherProcess As Button = CType(acAccomodation.Panes(i).ContentContainer.FindControl("btnVoucherProcess" & i), Button)
        btnVoucherProcess.Text = "Saved " & i
        'Dim cboDay As DropDownList = CType(i.FindControl("cboDay"), DropDownList)
    Next

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T23:46:45.960

如果您正在动态呈现控件，然后您试图通过事件处理程序访问动态控件，例如按钮的 Click 方法实现，您将一无所获。

为了始终找到动态生成的控件，您应该始终在 Page_Load 事件中创建它们。总是。因此，尝试访问您的动态控件的事件处理程序会找到它们，我无法解释为什么，但是这个动态控件将包含用户在客户端输入的值。

# jquery - 制作一个简单的 jQuery 轮播

> ID：11075664
> 
> 赞同：0
> 
> 时间：2012-06-17T23:42:17.927
> 
> 标签：jquery, slideshow, show-hide

我想做一个非常简单的 jQuery 轮播，通过一组控件“返回”进行高级 | “前进”，无限循环。似乎所有现成的都有比我想要的更多的功能。

我现在的结构是这样的。HTML：

```
<section id="content">
  <a class="back">Back</a>
  <a class="forward"/>Forward</a>

  <article>
   <p>Lorem ipsum</p>
  </article>

  <article>
   <p>Lorem ipsum</p>
  </article>

  <article>
   <p>Lorem ipsum</p>
  </article>

</section> 
```

堆栈中的第一个是页面加载的默认值，我想在它前进时向左动画，在它后退时向右动画。

关于这在 jQuery 中可能是什么样子的任何指针？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T00:04:19.387

[30 天学习 jQuery](http://tutsplus.com/course/30-days-to-learn-jquery/)教程中的一课（实际上是两课）是一个简单的滑块实现，可以帮助您构建自己的轮播：

[http://tutsplus.com/lesson/the-obligatory-slider/](http://tutsplus.com/lesson/the-obligatory-slider/)
[http://tutsplus.com/lesson/prototypal-inheritance-and-refactoring-the-slider/](http://tutsplus.com/lesson/prototypal-inheritance-and-refactoring-the-slider/)

# javascript - 除非单击提交按钮，否则离开页面警报

> ID：11075666
> 
> 赞同：19
> 
> 时间：2012-06-17T23:42:40.987
> 
> 标签：javascript, onclick, submit, alert

如果用户尝试在订单流程完成之前以任何方式离开订单流程，我希望实施警告，当然除了付款按钮之后。

像这样的东西：

```
<script type="text/javascript">
window.onbeforeunload = function(){
return 'You must click "Buy Now" to make payment and finish your order. If you leave now your order will be canceled.';
};
if document.getElementsByClassName('eStore_buy_now_button').onclick = function(){
};
</script> 
```

我确信这在某些方面是有害的错误，但这是我可以说明我正在尝试的最佳方式。而且我知道有些浏览器会显示默认文本而不是我写的实际警告，这很好。

一些注意事项，我宁愿使用普通的旧 JS 而不是加载 jQuery 来完成这个简单的任务。页面没有设置，是一个简单的离开页面或者点击“立即购买”操作。

**更新**：

我向你保证，这不是为了我，而是为了用户。尽管已经明确解释了（做什么），但我认为用户在该过程真正完成之前出于即时满足而匆忙离开，忽略消息的心态。这是一个简单的两步过程，他们提交项目的详细信息，然后付款。无论出于何种原因，他们都在提交详细信息，然后大约 50% 的时间没有完成付款。然后他们会跟进“那么，你是在做这个项目还是在做什么？” 然后我必须解释“你从来没有完成你的订单”。他们接着说“哎呀，给你。”

不幸的是，我将其归为营销和网页设计 101。规则 #1，人们是愚蠢的。不要被粗鲁或悲观地理解。基本上，这个想法是假设每个人在你的设计和指导上都是愚蠢的，这样你就可以做出一个 5 岁的孩子可以做到的简单事情。我完全同意不将用户作为人质。但是这个页面只能在他们发起的预定订单过程的中间到达（这个页面永远不会以浏览的方式到达）。因此，我认为这是一个非常合理的用例，您可以在其中避免自己的常见用户错误。不精通技术的客户群体，因此他们确实需要这样的指导。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-17T23:46:33.227

```
document.querySelector('.eStore_buy_now_button').addEventListener("click", function(){
    window.btn_clicked = true;      //set btn_clicked to true
});

window.onbeforeunload = function(){
    if(!window.btn_clicked){
        return 'You must click "Buy Now" to make payment and finish your order. If you leave now your order will be canceled.';
    }
}; 
```

这将在页面卸载（例如离开页面）直到`btn_clicked`设置为时提醒用户`true`。

演示：http: [//jsfiddle.net/DerekL/GSWbB/show/](http://jsfiddle.net/DerekL/GSWbB/show/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T00:35:34.263

不要这样做。

在可用性方面有一条细线 - 一方面，有时我可能打算下订单但不小心离开了页面；另一方面，它可能很快就会变得烦人。当浏览器设置为保存上一个会话（即在下次启动时重新打开选项卡）并且一个页面以这种方式运行时，您最终*只会*重新打开该选项卡（在 Mac Safari 上确认），丢弃其余的标签。他们不会再向你购买了！

我建议您通过内联消息向用户明确表示该订单尚未提交，他们仍需要确认他们的操作，但如果他们不小心导航离开，您应该轻松找到他们离开了。将此类信息存储在 cookie 中是相当简单的，以便在后续页面访问时提示用户*“您有一个不完整的订单......，您想现在完成它吗？”*

作为替代方案，如果用户分心，您可以使用不活动警报（想想在线银行在会话即将到期时提示您）将用户带回“完成订单”页面。

如果您确定要依赖此事件，则[此问题](https://stackoverflow.com/q/276660/1081234)的答案可能会提供更好的见解。基本上，不应依赖基本文本警告之外的功能或其实现，因为跨浏览器的实现不一致（？）以及被用户阻止的可能性。

## 另一个更新：

在 Derek 对 Gmail 等使用的这种方法的评论的提示下，我看到[一篇文章](http://www.zachleat.com/web/dont-let-the-door-hit-you-onunload-and-onbeforeunload/)建议您坚持使用`onunload`并依靠 AJAX 调用来保存页面的状态——这支持了我关于允许用户拿起的想法即使从未触发 javascript 事件，他们也离开了。

# php - 通过PHP压缩没有空格的CSS？

> ID：11075670
> 
> 赞同：1
> 
> 时间：2012-06-17T23:43:22.840
> 
> 标签：php, css, compression

想知道如何从 css-tricks.com 访问像这样的 css 文件

[http://cdn.css-tricks.com/wp-content/themes/CSS-Tricks-9/style.css?v=9.5](http://cdn.css-tricks.com/wp-content/themes/CSS-Tricks-9/style.css?v=9.5)

不确定他是否使用 php 来完成此操作。我一直在阅读无数文章，但没有运气。

另外，在.css之后吐出版本号是否是自动化的？一直在看它，想知道如何实现一个干净的 css 文件。

任何帮助表示赞赏！谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T23:48:34.290

使用带有搜索/替换的编辑器并删除所有不必要的空格非常简单。例如，当我编写 CSS 时，我只使用空格来分隔关键字——我使用换行符和制表符来清晰地格式化它。所以我可以用空字符串替换所有制表符和换行符，结果是像上面那样“缩小”的 CSS。

版本号是一个相当常见的缓存技巧。它不会影响服务器端的任何内容，但浏览器会将其视为一个新文件，并将其缓存起来。这使得在进行更新时清除所有用户的缓存变得容易。不过，就我个人而言，我使用 PHP 函数来自动附加`"?t=".filemtime($file)`（换句话说，文件被修改的时间戳），这样就省去了手动更新版本号的麻烦。

* * *

这是我用来自动将修改时间附加到 JS 和 CSS 文件的确切代码：

```
<?php
ob_start(function($data) {
    chdir($_SERVER['DOCUMENT_ROOT']);
    return preg_replace_callback(
        "(/(?:js|css)/.*?\.(?:js|css))",
                     // all the relevant files are in /js and /css folders of the root
        function($m) {
           if( file_exists(substr($m[0],1)))
               return $m[0]."?t=".filemtime(substr($m[0],1));
           else return $m[0];
        },
        $data
    );
});
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T23:56:55.930

我会避免手动操作，因为您可能会损坏您的 CSS。有一些很好的工具可以为您解决这些问题而不会很棘手。

一个出色的解决方案是[Assetic](https://github.com/kriswallsmith/assetic)，它是一个资产管理器，允许您使用各种工具（yuicompressor、google 关闭等）进行过滤（缩小、压缩）。

它目前默认与 Symfony2 捆绑，但可以在任何 PHP 项目中独立使用。我已经在 Zend Framework 项目中成功实现了它。

# ruby-on-rails - 从 ActiveAdmin default_actions 中删除“显示”链接

> ID：11075671
> 
> 赞同：17
> 
> 时间：2012-06-17T23:43:25.910
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activeadmin

我已将资源的标题作为指向*Show*操作的链接。现在我想删除那个链接表单`default_actions`。

```
actions :all, :except => [:show] 
```

不会这样做，因为我需要`show`采取行动。

我也试过

```
column do |show|
  links = ''.html_safe
  links += link_to "Edit", edit_admin_show_path(show)
  links += ' '
  links += link_to "Del", admin_show_path(show), :confirm => 'Are you sure?', :method => :delete
  links
end 
```

但是删除链接不起作用，而是将我带到“*显示”*页面。

我会感谢任何帮助

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-06-21T12:11:03.147

我是这样做的（resource_path）。

```
column "" do |resource|
  links = ''.html_safe
  links += link_to I18n.t('active_admin.edit'), edit_resource_path(resource), :class => "member_link edit_link"
  links += link_to I18n.t('active_admin.delete'), resource_path(resource), :method => :delete, :confirm => I18n.t('active_admin.delete_confirmation'), :class => "member_link delete_link"
  links
end 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-08-15T21:53:28.753

较新的版本支持资源定义中的调用操作方法：

```
ActiveAdmin.register Foo do
  actions :all, except: [:edit, :destroy] #just show
  ... 
```

# android - 如何从 ListView 内的 TextView 获取 TextView 标记

> ID：11075675
> 
> 赞同：0
> 
> 时间：2012-06-17T23:43:35.760
> 
> 标签：android, listview, textview

我目前正在开发 android 项目，我正在使用自定义列表视图，其中每个项目都有 TextViews。我通过使用设置可显示文本`myTextView.setText("my text")`，然后使用设置 TextView 标记`myTextView.setTag("my tag")`。

一旦它在列表视图中，我希望允许用户单击列表视图中的项目并检索 textview 文本以及标签。

我试过`TextView textView = (TextView)getListAdapter().getItem(position);` 了，``TextView textView = (TextView)getListView().getItem(position); 但它一直说它不能从String到TextView。

如何从文本视图中获取标签和文本。

感谢您的任何帮助，您可以提供。

**更新 1** 根据要求，这是我正在使用的 ListActivity，下面是项目单击事件的代码

```
@Override
protected void onListItemClick(ListView l, View v, int position, long id) {

    //get selected items
    //String selectedValue = (String) getListAdapter().getItem(position);
    //TextView textView = (TextView)appArrayAdapter.getItem(position);
    TextView textView = (TextView)getListView().getChildAt(position);
    String selectedValue = textView.getText().toString();
    String selectedPackage = textView.getTag().toString();
    Intent intent = new Intent();
    intent.putExtra("appName", selectedValue);
    intent.putExtra("packageName", selectedPackage );
    setResult(0, intent);
    finish();
} 
```

下面的代码是设置列表适配器的代码

```
final ArrayList<ResolveInfo> list = (ArrayList<ResolveInfo>)pm.queryIntentActivities(intent, PackageManager.PERMISSION_GRANTED);

        ArrayList<String> arrayList = new ArrayList<String>();
        imageList = new ArrayList<Drawable>();
        packageName = new ArrayList<String>();
        for(int i = 0; i != list.size(); i++)
        {
            String text = list.get(i).activityInfo.applicationInfo.loadLabel(pm).toString();
            String appPackage = list.get(i).activityInfo.packageName;
            arrayList.add(text);
            Drawable imageId = list.get(i).activityInfo.applicationInfo.loadIcon(pm);
            packageName.add(appPackage);
            imageList.add(imageId);
        }

        appArrayAdapter = new AppArrayAdapter(this, arrayList);
        //setListAdapter(new AppArrayAdapter(this, arrayList));
        setListAdapter(appArrayAdapter);

    } 
```

下面的代码是 appArrayExtender 类

```
public class AppArrayAdapter extends ArrayAdapter<String>
    {
        private final Context context;
        private final ArrayList<String> arrayList;
        //private final ArrayList<Drawable> imageList;

        public AppArrayAdapter(Context context, ArrayList<String> arrayList/*, ArrayList<Drawable> imageList*/)
        {
            super(context, R.layout.select_apps, arrayList);
            this.context = context;
            this.arrayList = arrayList;
            //this.imageList = imageList;
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent)
        {
            LayoutInflater inflater = (LayoutInflater) context
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            View rowView = inflater.inflate(R.layout.select_apps, parent, false);
            TextView textView = (TextView)rowView.findViewById(R.id.label);
            ImageView imageView = (ImageView)rowView.findViewById(R.id.logo);

            textView.setText(arrayList.get(position));
            textView.setTag(packageName.get(position));
            imageView.setImageDrawable(imageList.get(position));
            //imageView.setImageResource(R.drawable.icon);
            return rowView;
        }
    } 
```

下面是布局的 XML

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:padding="5dp" >

    <ImageView
        android:id="@+id/logo"
        android:layout_width="50px"
        android:layout_height="50px"
        android:layout_marginLeft="5px"
        android:layout_marginRight="20px"
        android:layout_marginTop="5px" >
    </ImageView>

    <TextView
        android:id="@+id/label"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@+id/label" >
    </TextView>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T02:46:42.827

如果您想要 TextView 中的文本*，*请使用传递到的信息，`onClick`而不是所有额外的代码。框架传入被点击的视图（View v 参数）。如果是单个TextView，你可以这样做`v.getText().toString()`，如果是更复杂的布局，你可以使用`v.findViewById(R.id.TextView1)`来获取正确的TextView并`getText().toString()`在它上面使用：

```
@Override 
protected void onListItemClick(ListView l, View v, int position, long id) { 

    TextView textView = (TextView) v.findViewById(R.id.yourRowLayoutWidget);  // get the widget contained in the layout
    String selectedValue = textView.getText().toString(); // get the value of the widget into a string
    // do what you will with the string
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T23:52:43.930

当滚动列表视图时，刚刚消失的视图项目将作为参数 convertView 传递给适配器方法的 getView，因此您在 7 项上设置标记 fe，然后将其转换为第 1 个，因为第 7 个不再是 wisivle 并且第一项将有错误的标签；

我建议你扩展 BaseAdapter 并使用你需要的所有数据存储一些对象。

它看起来像这样

```
public class DialogsAdapter extends BaseAdapter {

    private final LayoutInflater mInflater;

    private List<YourObjectToStoreData> mData ;

    public DialogsAdapter(Context context, List<YourObjectToStoreData> data
    ) {
        this.mInflater = LayoutInflater.from(context);

        mData = data;
    }
    ... 
```

也看看[Holder Pattern](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/view/List14.html)它可能有用

# ios - 今天内存使用的安全限制？

> ID：11075680
> 
> 赞同：2
> 
> 时间：2012-06-17T23:44:11.797
> 
> 标签：ios, xcode

我正在为 iOS 开发游戏。根据配置文件工具，我使用的内存约为 80 MB（无泄漏）。这对我来说似乎是很多记忆。使用多少内存是安全的，是否存在与使用大量内存相关的特殊编程问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T23:49:25.727

这完全取决于您计划让您玩什么设备。iPad 可以玩 100 MB 的游戏，iPhone 3G 甚至*没有*100 MB。如果您使用大量内存，您的应用程序将被迫关闭，如果用户使用旧设备，这可能会导致重大问题。

# java - FileOutputStream 的问题

> ID：11075684
> 
> 赞同：-3
> 
> 时间：2012-06-17T23:45:22.353
> 
> 标签：java, io

为什么此代码会导致错误：`access denied`？

```
public void armazenaPerfil() throws FileNotFoundException, IOException {    
    FileOutputStream out = new FileOutputStream(this.login + "_perfil.mbk");
    ObjectOutputStream objOut = new ObjectOutputStream(out);          
    objOut.writeObject(this);
    System.out.println("Escrevi!");
    objOut.close();
} 
```

错误信息：

```
ric93_perfil.mbk(acess denied)

java.io.FileNotFoundException

at java.io.FileOutputStream.open(Native Method)

at java.io.FileOutputStream.<init>(FileOutputStream.java:212)

at java.io.FileOutputStream.<init>(FileOutputStream.java:104)

at br.uefs.ecomp.myBook.model.Perfil.armazenaPerfil(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T01:17:08.133

拒绝访问的问题基本上是操作系统说“你不能写那个”。基本上，操作系统级别的访问控制/权限问题会阻止您在指定位置读取或写入文件。

当您使用相对路径名写入文件时，JVM 将尝试将其写入相对于正在运行的应用程序当前工作目录的位置。哪个目录取决于 JVM 的启动方式，但如果您使用`java`命令从命令提示符启动，它将是命令 shell 的当前目录。

您可以了解当前导演实际使用的是 Brendan Long 建议的单线：

```
System.out.println(new File(pathname).getAbsolutePath()); 
```

`pathname`您尝试读取或写入的文件的路径名在哪里。请注意，这实际上并没有检查路径名是否引用了现有文件，或者告诉您应该能够创建或打开该文件。它*只是*告诉您文件的绝对路径名是*什么*。

# mysql - 统计多次登录的唯一用户数

> ID：11075690
> 
> 赞同：2
> 
> 时间：2012-06-17T23:46:42.603
> 
> 标签：mysql, count

我有多个网站在单个数据库上运行。

我的问题相关表结构如下：

```
USER
    - UserID
WEBSITE
    - WebsiteID
        - WebsiteName
LOGINRECORD
    - UserID
    - WebsiteID
    - LoginDate 
```

我想计算通过网站登录的唯一用户数。

像

```
Website          NumberofUserLoggedinMorethanOnce 
abc.com                     15 
def.com                     25 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T23:50:08.563

**编辑**：我误解了这个问题。应该是这样的：

```
SELECT WEBSITE.WebsiteName, count(*)
FROM WEBSITE 
INNER JOIN (
SELECT UserID, WebsiteID, count(*) FROM LOGINRECORD
GROUP BY UserID, WebsiteID
HAVING count(*) > 1) AS T1 ON t1.WebsiteID = WEBSITE.WebsiteID
GROUP BY WEBSITE.WebsiteName 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-17T23:55:06.647

```
SELECT WebsiteID,
       COUNT(*) AS cnt
  FROM (SELECT WebsiteID
          FROM LOGINRECORD
      GROUP BY WebsiteID,
               UserID
        HAVING count(*) > 1) x
GROUP BY WebsiteID 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-17T23:57:50.100

这是未经测试的，但试一试 -

```
select websitename, count(*)
from website
inner join
(
select userid, websiteid, count(*)
from loginrecord
inner join website on loginrecord.websiteid = website.websiteid
group by userid, websiteid
having count(*) > 1
) tbl
on tbl.websiteid = website.websiteid
group by websitename 
```

# ios5 - 不正确的颜色实现OpenGL ES2 - IOS

> ID：11075691
> 
> 赞同：0
> 
> 时间：2012-06-17T23:46:45.650
> 
> 标签：ios5, opengl-es-2.0

我有非常简单的 OpenGL ES 示例，类似于 Hehe 的示例： http: [//nehe.gamedev.net/tutorial/ios_lesson_02__first_triangle/50001/](http://nehe.gamedev.net/tutorial/ios_lesson_02__first_triangle/50001/)

如上图所示，三角形填充了三种颜色——红、蓝、绿。相反，在我的应用程序中，我总是得到几乎完全填充黑色的三角形，只有顶部顶点周围的小区域填充绿色，右底部周围的小区域填充红色......根本没有蓝色。

第一个问题是：**为什么颜色没有插入到我的三角形中间，为什么蓝色根本看不到？**

我的颜色数组中的任何更改都不会影响任何内容，例如，当我尝试将三角形设为白色时，颜色无论如何都不会改变......同时，如果我更改位置数组中的 Z 坐标，那么我可以看到蓝色。

第二个问题是：**为什么颜色的任何变化都不起作用，而位置的变化会改变颜色？**

好像在这里的某个地方我犯了一个愚蠢的错误，但我无法抓住它。

这是顶点/颜色数组：

```
const float colors[] = { // this does not work, triangle still black-green-red
    1.0, 1.0, 1.0, 1.0,
    1.0, 1.0, 1.0, 1.0,
    1.0, 1.0, 1.0, 1.0
};

const float positions[] = { // if i change 3rd index to 1.0 then i will see blue color
    -0.5, -0.5, 0.0, 1.0,
     0.0,  0.5, 0.0, 1.0,
     0.5, -0.5, 0.0, 1.0
}; 
```

这是 VBO：

```
- (BOOL)setupVBO 
{
    BOOL success = YES;

    glGenBuffers(1, &_positionBuffer);
    glBindBuffer(GL_ARRAY_BUFFER, _positionBuffer);
    glBufferData(
        GL_ARRAY_BUFFER, 
        sizeof(positions) * sizeof(float), 
        &positions[0], 
        GL_STATIC_DRAW);

    glGenBuffers(1, &_colorBuffer);
    glBindBuffer(GL_ARRAY_BUFFER, _colorBuffer);
    glBufferData(
        GL_ARRAY_BUFFER, 
        sizeof(colors) * sizeof(float), 
        &colors[0], 
        GL_STATIC_DRAW);

    return success;
} 
```

使成为 ：

```
- (void)render:(CADisplayLink*)displayLink
{
    glClearColor(0.5, 0.5, 0.5, 1.0);
    glClear(GL_COLOR_BUFFER_BIT);

    glBindBuffer(GL_ARRAY_BUFFER, _positionBuffer);
    glVertexAttribPointer(_positionSlot, 4, GL_FLOAT, GL_FALSE, 0, NULL);

    glBindBuffer(GL_ARRAY_BUFFER, _colorRenderBuffer);
    glVertexAttribPointer(_colorSlot, 4, GL_FLOAT, GL_FALSE, 0, NULL);

    glDrawArrays(GL_TRIANGLES, 0, 3);

    [_glContext presentRenderbuffer:GL_RENDERBUFFER];
} 
```

感谢您的任何建议...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T13:46:14.003

好的，我发现问题出在哪里:)

至于我是 Open GL 的初学者，我只是从示例中复制粘贴代码并重命名了一些变量......并没有发现我将 ColorBuffer（VBO 颜色，即绘图对象的实际颜色数据）变量重命名为 ColorRenderBuffer 变量（放置在GL 处理实际颜色数据的内存）

愚蠢的错误，我希望没有人会这样做:)

# php - Wordpress PHP 中的动态 Facebook og Meta 标签

> ID：11075694
> 
> 赞同：8
> 
> 时间：2012-06-17T23:47:31.447
> 
> 标签：php, facebook, wordpress, meta-tags

我正在尝试将动态 Facebook og 元标记添加到我的 Wordpress 网站。我将它们添加到 single.php 而不是通常推荐的 functions.php 文件，因为我在下面有代码，用于我创建的 Facebook 应用程序，每次有人查看单个博客帖子时都需要执行，因为它随后会发布到他们的 Facebook他们已阅读该特定帖子的时间表。我不想使用插件，因为我的一些插件曾经相互冲突，而且把它理顺是一团糟。我最大的问题是我需要`og:url`标签是动态的，尽管`og:title`, `og:description`,`og:image`等也应该是动态的。这是我在 single.php 文件顶部的代码：

编辑：这是我现在使用的工作代码。感谢大家的帮助：

```
 <?php

$params = array();
if(count($_GET) > 0) {
    $params = $_GET;
} else {
    $params = $_POST;
}
// defaults
if($params['type'] == "") $params['type'] = "picture";
if($params['locale'] == "") $params['locale'] = "en_US";
if($params['description'] == "") $params['description'] = "Visit Internet LOLs for the funniest humor on the web! :)";
?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
    <head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# internetlolsapp: http://ogp.me/ns/fb/internetlolsapp#">
        <title></title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>

        <!-- Open Graph meta tags -->
        <meta property="fb:app_id" content="378076268920252" />
        <meta property="og:site_name" content="meta site name"/>
        <meta property="og:url" content="<?php echo 'http://internetlols.com'.$_SERVER['REQUEST_URI']; ?>"/>
        <meta property="og:type" content="internetlolsapp:<?php echo $params['type']; ?>"/>

        <meta property="og:description" content="<?php echo $params['description']; ?>"/>

    </head>
</html>

  <script type="text/javascript">
  function postView()
  {
      FB.api(
        '/me/internetlolsapp:view',
        'post',
        { picture: '<?php echo 'http://internetlols.com'.$_SERVER['REQUEST_URI']; ?>' },
        function(response) {
       if (!response) {
          // FAIL GRACEFULLY alert('Error occurred : No Response');
       } else if (response.error) {
          // FAIL GRACEFULLY alert('Error occurred : ' + response.error);
       } else {
          // SUCCESS alert('View was successful! Action ID: ' + response.id);
       }
        });
  }
  </script>
</head>
<body>
  <div id="fb-root"></div>
  <script>
    window.fbAsyncInit = function() {
      FB.init({
        appId      : '378076268920252', // App ID
        status     : true, // check login status
        cookie     : true, // enable cookies to allow the server to access the session
        xfbml      : true  // parse XFBML
      });
    };

    // Load the SDK Asynchronously
    (function(d){
      var js, id = 'facebook-jssdk'; if (d.getElementById(id)) {return;}
      js = d.createElement('script'); js.id = id; js.async = true;
      js.src = "//connect.facebook.net/en_US/all.js";
      d.getElementsByTagName('head')[0].appendChild(js);
    }(document));
  </script>

</body>

<body onload='postView()'>
</html> 
```

我正在尝试遵循此处的代码：[动态生成 Facebook Open Graph 元标记](https://stackoverflow.com/questions/8431694/dynamic-generation-of-facebook-open-graph-meta-tags) ，并且每当我阅读博客文章时它都会发布到我的 Facebook 时间线，但是对于标题，它当然会发布“默认标题”并且当我单击“我的 Facebook 时间线上的默认标题”链接，它会将我发送到 single.php 的 URL，在 URL 的末尾有一堆废话

```
http://MYSITE.com/wp-content/themes/twentyeleven/single.php?fb_action_ids=10151048340001514&fb_action_types=internetlolsapp%3Aview&fb_source=other_multiline 
```

而不是博客文章 URL。我想知道它是否与我在“FB.api”之后的第 3 行中放置的 URL 有任何关系，但是当我阅读时，我尝试放在那里的任何其他内容都会阻止该应用程序在我的 Facebook 时间线上发布任何内容一篇博文。

任何想法如何解决这一问题？这几天我一直在拔头发。非常感激任何的帮助！提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-21T16:51:15.007

[我从 Facebook Featured Image and Open Graph Meta Tags ( http://www.ryanscowles.com](http://www.ryanscowles.com) )中改编了一个函数，并将其粘贴到 functions.php 上，它可以工作！（wordpress 3.5.1）

```
<?php
//function to limit description to 300 characters
function limit($var, $limit) {
    if ( strlen($var) > $limit ) {
        return substr($var, 0, $limit) . '...';
    }
    else {
        return $var;
    }
}

// Set your Open Graph Meta Tags
function fbogmeta_header() {
    if (is_single()) {
        //getting the right post content
        $postsubtitrare = get_post_meta($post->ID, 'id-subtitrare', true);
        $post_subtitrare = get_post($postsubtitrare);
        $content = limit(strip_tags($post_subtitrare-> post_content),297);
        ?>
        <meta property="og:title" content="<?php the_title(); ?>"/>
        <meta property="og:description" content="<?php echo $content; ?>" />
        <meta property="og:url" content="<?php the_permalink(); ?>"/>
        <?php $fb_image = wp_get_attachment_image_src(get_post_thumbnail_id(     get_the_ID() ), 'thumbnail'); ?>
        <?php if ($fb_image) : ?>
        <meta property="og:image" content="<?php echo $fb_image[0]; ?>" />
        <?php endif; ?>
        <meta property="og:type" content="<?php
        if (is_single() || is_page()) { echo "article"; } else { echo "website";}     ?>"
        />
        <meta property="og:site_name" content="<?php bloginfo('name'); ?>"/>
        <?php
        }
        }
add_action('wp_head', 'fbogmeta_header');
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-15T15:27:10.380

For what its worth, I use a function from Ryan S. Cowles to do this and it works perfectly. It inserts the data dynamically with the wp_head hook making every page load the OG meta info dynamically. Anytime one of your page links is used in the FB status box, it calls the info relating to that page. I use Featured Images on all of my pages but if you don't you could easily write in a default fallback.

This is in my functions file:

```
/*
Plugin Name: Facebook Featured Image and Open Graph Meta Tags
Version: 1.0
Plugin URI: http://www.ryanscowles.com
Description: Automatically set the posts' Featured Image as the thumbnail and set appropriate Open Graph meta tags for sharing on Facebook.
Author: Ryan S. Cowles
Author URI: http://www.ryanscowles.com
*/

define ('pluginDirName', 'fb-featured-image');
// Allow for Facebooks's markup language
add_filter('language_attributes', 'add_og_xml_ns');
function add_og_xml_ns($content) {
  return ' xmlns:og="http://ogp.me/ns#" ' . $content;
}

add_filter('language_attributes', 'add_fb_xml_ns');
function add_fb_xml_ns($content) {
  return ' xmlns:fb="https://www.facebook.com/2008/fbml" ' . $content;
}    

// Set your Open Graph Meta Tags
function fbogmeta_header() {
  if (is_single()) {
    ?>
        <meta property="og:title" content="<?php the_title(); ?>"/>
        <meta property="og:description" content="<?php echo strip_tags(get_the_content($post->ID)); ?>" />
        <meta property="og:url" content="<?php the_permalink(); ?>"/>
        <?php $fb_image = wp_get_attachment_image_src(get_post_thumbnail_id( get_the_ID() ), 'thumbnail'); ?>
        <?php if ($fb_image) : ?>
            <meta property="og:image" content="<?php echo $fb_image[0]; ?>" />
            <?php endif; ?>
        <meta property="og:type" content="<?php
            if (is_single() || is_page()) { echo "article"; } else { echo "website";} ?>"
        />
        <meta property="og:site_name" content="<?php bloginfo('name'); ?>"/>

<?php
  }
}
add_action('wp_head', 'fbogmeta_header'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T01:46:23.347

使用 Wordpress，您无需通过`$_GET`或传递此信息`$_POST`。Wordpress 为您提供了所有这些功能。

我可以理解您不想使用插件的愿望，但其中一些插件（如 Wordpress SEO 或官方 Facebook）可以为您添加此插件，让您的生活更轻松。如果没有，找一个简单的把它拆开看看他们在做什么。

如果你真的想自己动手，你应该使用[模板标签](http://codex.wordpress.org/Template_Tags)设置标题。[您可以通过the_title()](http://codex.wordpress.org/Function_Reference/the_title)函数检索帖子标题。您正在寻找的其他元数据点还有其他内容。

最后一点：您的`og:image`文件必须至少有 50 像素的一面，否则 Facebook 将不会显示它。Favicon，就像您尝试使用的一样，几乎总是太小。有关完整的图像规格，请参阅[此页面](https://developers.facebook.com/docs/share/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T16:48:07.123

我最终通过使用以下代码行使 Facebook og:url 标签动态化来解决它：

```
<meta property="og:url" content="<?php echo 'http://internetlols.com'.$_SERVER['REQUEST_URI']; ?>"/>

{ picture: '<?php echo 'http://internetlols.com'.$_SERVER['REQUEST_URI']; ?>' }, 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-18T12:51:39.247

要使`og:url`&`og:title`动态，请尝试使用此

```
<meta property="og:url" content="<?php echo get_permalink($post->ID); ?>"/>
<meta property="og:title" content="<?php echo $post->post_title; ?>"/> 
```

还有其他数据可通过该`$post`对象获得。有关更多信息，请参见此处[http://www.rlmseo.com/blog/wordpress-post-variable-quick-reference/](http://www.rlmseo.com/blog/wordpress-post-variable-quick-reference/)

# c++ - 使用 free() 时出现分段错误

> ID：11075697
> 
> 赞同：4
> 
> 时间：2012-06-17T23:48:16.197
> 
> 标签：c++, c, string

此代码导致分段错误：

```
int main(){

    char *p;
    char a[50] = "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa";
    p = (char *)malloc(50*sizeof(char));

    if(!p){
            cout << "Allocation Failure";
            cout << "\n";
    }
    else{
            cout << "Allocation Success";
            cout << "\n";
            p = a;
            cout << p;
            cout << "\n";
            free(p);
    }

    return 0;
} 
```

执行此程序后的输出为：

```
Allocation Success

aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa

Segmentation fault 
```

我无法找到错误。可能是什么原因？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-17T23:50:04.133

这：

```
p = a; 
```

复制*指针*，而不是指向内存的内容。 `p`现在指向数组的第一个元素`a`。所以当你这样做时`free(p)`，你试图释放一个非动态数组，这没有任何意义。¹

您应该调查[`strncpy()`](http://en.cppreference.com/w/cpp/string/byte/strncpy)复制字符串。

* * *

[1\. 而且还会造成内存泄露。]

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-17T23:50:09.910

您正在调用`free`未使用其中一种`malloc`方法分配的内存块。

当你这样做时：`p = a`你正在分配`p`堆栈数组使用的内存`a`。该内存不是使用分配的`malloc`，因此无法使用`free`.

此外，通过重新分配，您将忘记最初分配`malloc`并分配给的块`p`，从而导致内存泄漏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T23:53:06.920

`char a[50]`在堆栈上分配一个 50 个字符的数组。`a`因此指向堆栈上的地址。

`p = a`设置*p*指向与 a 相同的*地址*。因此，在 之后`p = a`，p 指向堆栈上的一个地址。请记住，*p*包含一个*地址*。

之后，`free(p)`尝试释放堆栈上的一个内存区域，这是非法的。您只能释放从 malloc() 获得的内存。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T00:26:13.753

你实际上是说 memcpy(p,a,50); 不是 p=a，记住 C 没有字符串数据类型。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-18T06:31:39.413

```
p = a; // p points a 
```

执行这一行，p 应该指向 const string ( `char *`)。您不能通过调用or`free()`获得任何东西。由于在此示例中您尝试使用 const 字符串，因此会出现错误。`malloc``calloc``free()`

# android - 如何保留同一个安卓应用程序的两个版本？

> ID：11075699
> 
> 赞同：2
> 
> 时间：2012-06-17T23:48:32.053
> 
> 标签：android, version

我们经常会看到两个版本的 Android 应用程序：付费版本和免费版本。我还在开发一个想要发布两个版本的应用程序。做这个的最好方式是什么？在我看来，创建两个项目并在其间复制文件似乎不是最好的方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-17T23:55:31.173

使用[Library Project](http://developer.android.com/guide/developing/projects/index.html#LibraryProjects)，正如官方开发指南所建议的那样：

> 如果您拥有多个 Android 项目共有的源代码和资源，您可以将它们移动到库项目中，以便更轻松地跨应用程序和版本进行维护。以下是您可以使用库项目的一些常见场景：
> 
> *   如果您正在开发使用某些相同组件的多个相关应用程序，您可以将冗余组件从它们各自的应用程序项目中移出，并在库项目中创建一组可重复使用的相同组件。
>     
>     
> *   如果您正在创建一个同时存在免费和付费版本的应用程序。您将两个版本共有的应用程序部分移动到库项目中。两个依赖项目，具有不同的包名称，将引用库项目并仅提供两个应用程序版本之间的差异。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T00:25:35.207

**更新：**这种方法实际上只适用于用 Eclipse 编译，因为 Android Studio 支持可以实现这一点的[构建风格。](http://developer.android.com/tools/building/configuring-gradle.html)

* * *

虽然@yorkw 和@Nate 的答案都很好，但由于其简单性，[这是我使用的方法。](http://blog.donnfelker.com/2010/08/05/howto-android-full-and-lite-versions/)来自文章：

> *   **com.example.myapp** - Android 项目库 - 这是我的整个应用程序所在的位置。FULL 和 LITE 版本的所有功能。
> *   **com.example.myapp.full** - Android 应用程序项目 - 这是一个外壳，其中包含仅完整版所需的图形和资源。基本上它是一个超轻的外壳。
> *   **com.example.myapp.lite** - Android 应用程序项目 - 这是另一个 shell，只包含 lite 版本所需的图形和资源。同样，它是一个超轻的外壳。

我还在应用程序启动时设置的库类中保留了一个静态变量`IS_PRO`。这应该只用于通知、警报等（例如要求用户升级到专业版）。

但是，这种方法有一个缺点：在库或其资源被修改时，您**必须随时清理和重建。**还请务必阅读[这篇](http://android-developers.blogspot.ca/2012/03/updated-sdk-tools-and-adt-revision-17.html)关于在项目和图书馆之间共享资源的帖子。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-17T23:53:10.270

我将其称为开发中的 FORK。开始一个新的应用程序开发，但让您的通用代码来自一个通用文件位置。对分叉的代码进行免费的编辑，并尽最大努力使该代码完全独立。

我实际上是在基于 iPhone 的应用程序上做到这一点的，我有一个免费版本和 2 个不同的付费版本（仅限单人游戏和多人游戏）。我会在 Android 上做同样的事情。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-17T23:57:37.033

例如，你可以使用 git。

创建分支“app_with_ads”，master 将是您的“付费”版本。在 master 中开发并定期合并到另一个。

在发布之前，您可能必须更改应用程序包或 Android\Manifest.xml 中的其他内容

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-18T00:12:42.460

[这是一个关于这样做](http://www.enscand.com/roller/enscand/entry/making_free_and_paid_versions)的小博客教程。

基本上是构建同一应用程序的完整版和精简版的方法，使用库项目来完成两个*版本*之间的代码重用。

# actionscript-3 - 在 AS 3.0 中打开 swf 的按钮

> ID：11075701
> 
> 赞同：0
> 
> 时间：2012-06-17T23:49:14.713
> 
> 标签：actionscript-3, flash-cs5

我一直试图在几个小时内为此找到合适的代码。但我发现的那些似乎都不起作用。我真的需要帮助...我很绝望...我有 2 个 swf 文件。我在第一个 swf 文件的末尾添加了一个按钮（下一个按钮）。按下此按钮时我想转到第二个 swf 文件。我知道如何使用 actionscript 2.0 (LoadMovie)...但我在 actionscript 3.0 中启动了我的 swf，现在...我需要在 AS 3.0 中编写代码。有人可以帮我处理这段代码吗？我尝试了一些我从其他用户那里看到的代码，但我不知道我做错了什么，他们中的任何一个都对我有用！

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T11:03:04.680

这应该有助于：

```
 // Set the URL of the second movie
var url:String = "url_of_your_second_movie"

// Create the loader object using the specified URL
var loader:Loader=new Loader();
var request:URLRequest;
request= new URLRequest(url);   

// Set the COMPLETE event handler  
loader.contentLoaderInfo.addEventListener(Event.COMPLETE, onComplete );  

// Start the load
loader.load( request );

// Fill the COMPLETE event handler as needed
private function onComplete(e:Event):void
{
    // Add the loaded content to the display list
    addChild(e.currentTarget.content);
    // Do whatever else is needed once the movie is completed
} 
```

# java - 如何找出从流中读取了多少个字符或字节？

> ID：11075709
> 
> 赞同：2
> 
> 时间：2012-06-17T23:51:09.203
> 
> 标签：java, io

Java`LineNumberReader`可以让我跟踪我所在的行，但是如何跟踪流中的字节（或字符）位置？

我想要类似于`lseek(<fd>,0,SEEK_CUR)`C 中的文件的东西。

编辑：我正在阅读一个文件`LineNumberReader in = new LineNumberReader(new FileReader(file))`，我希望能够不时打印“已处理 XX% 的文件”之类的内容。我知道的最简单的方法是查看第`file.length()`一个并将当前文件位置除以它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T01:45:28.493

我建议扩展 FilterInputStream 如下

```
public class ByteCountingInputStream extends FilterInputStream {

    private long position = 0;

    protected ByteCountingInputStream(InputStream in) {
        super(in);
    }

    public long getPosition() {
        return position;
    }

    @Override
    public int read() throws IOException {
        int byteRead = super.read();
        if (byteRead > 0) {
            position++;
        }
        return byteRead;
    }

    @Override
    public int read(byte[] b) throws IOException {
        int bytesRead = super.read(b);
        if (bytesRead > 0) {
            position += bytesRead;
        }
        return bytesRead;
    }

    @Override
    public int read(byte[] b, int off, int len) throws IOException {
        int bytesRead = super.read(b, off, len);
        if (bytesRead > 0) {
            position += bytesRead;
        }
        return bytesRead;
    }

    @Override
    public long skip(long n) throws IOException {
        long skipped;
        skipped = super.skip(n);
        position += skipped;
        return skipped;
    }

    @Override
    public synchronized void mark(int readlimit) {
        return;
    }

    @Override
    public synchronized void reset() throws IOException {
        return;
    }

    @Override
    public boolean markSupported() {
        return false;
    }

} 
```

你会像这样使用它：

```
File f = new File("filename.txt");
ByteCountingInputStream bcis = new ByteCountingInputStream(new FileInputStream(f));
LineNumberReader lnr = new LineNumberReader(new InputStreamReader(bcis));
int chars = 0;
String line;
while ((line = lnr.readLine()) != null) {
    chars += line.length() + 2;
    System.out.println("Chars read: " + chars);
    System.out.println("Bytes read: " + bcis.getPosition());
} 
```

你会注意到一些事情：

1.  此版本计算字节数，因为它实现了 InputStream。
2.  在客户端代码中自己计算字符或字节可能更容易。
3.  此代码将在字节从文件系统读取到缓冲区时立即计数，即使它们尚未被 LineNumberReader 处理。您可以将 count 个字符放在 LineNumberReader 的子类中来解决这个问题。不幸的是，您不能轻易地生成百分比，因为与字节不同，没有便宜的方法可以知道文件中的字符数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-04-03T08:40:45.183

ByteCountingInputStream**解决方案有一个缺点，它甚至在****LineNumberReader**处理输入字节之前就对其进行计数。这不是我的报告所需要的，我想出了一个替代方案。我假设输入文件是 ASCII 文本，带有 Unix 风格的行尾（单个**LF**字符）。

我已经构建了**LineNumberReader**的一个子集，它添加了位置报告：

```
import java.io.*;

public class FileLineNumberReader {
    private final LineNumberReader lnr;
    private final long length;
    private long pos;

    public FileLineNumberReader(String path) throws IOException {
        lnr = new LineNumberReader(new FileReader(path));
        length = new File(path).length();
    }

    public long getLineNumber() {
        return lnr.getLineNumber();
    }

    public String readLine() throws IOException {
        String res = lnr.readLine();
        if (res != null) {
            pos += res.length() + 1;
        }
        return res;
    }

    public long getPercent() {
        return 100*pos/length;
    }
} 
```

请注意，此类隐藏了许多为封装的**LineNumberReader**定义的方法，这些方法与我的目的无关。

# python - 在 Python 中动态实例化类

> ID：11075710
> 
> 赞同：1
> 
> 时间：2012-06-17T23:51:30.980
> 
> 标签：python, multithreading, class

我想根据数据库查询动态地将`threading.Thread`类添加到线程中。`queue`那可能吗？

例如：

```
import threading, Queue

class worker(threading.Thread):
    def run(self):
        while True:
            print 'doing stuff'

# get jobs from db
jobs = list(db.Jobs.find())

q = Queue.Queue(5)
for job in jobs:
    # instantiate a worker thread here.. don't know how to do this
    ...
    # start new worker thread
    new_worker_thread.start()
    # then add the worker to the queue
    q.put(new_worker_thread) 
```

任何建议都会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T00:08:17.717

只需使用：

```
new_worker_thread = worker() 
```

这将实例化一个新的工作线程。在此之后，您可以开始并将其放入队列中。

可以在此处找到有关线程的更多信息：[http ://www.tutorialspoint.com/python/python_multithreading.htm](http://www.tutorialspoint.com/python/python_multithreading.htm)

很实用的教程！

# php - 是否可以向 FB getloginurl() 发送自定义参数？

> ID：11075715
> 
> 赞同：0
> 
> 时间：2012-06-17T23:52:52.153
> 
> 标签：php, facebook, api

像这样的东西，以便在重定向回应用程序时可以使用 custom_param：

```
$params = array(
'scope' => 'email,publish_stream,user_photos,status_update',
'redirect_uri' => base_url(),
'custom_param' => 'bazinga',
);

// LOGGED OUT       
$auth_url = $this->facebook->getLoginUrl($params); 
```

如果你有这方面的经验，一个简单的是或不是会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T01:30:57.560

这并不是真正的意思，但是`state`您可以传递一个返回给您的参数。[请参阅文档](https://developers.facebook.com/docs/reference/dialogs/oauth/)

# html - 如何在服务器端修改和保存 html/css？

> ID：11075719
> 
> 赞同：1
> 
> 时间：2012-06-17T23:53:34.753
> 
> 标签：html, css

我是这个主题的新手，所以这对你们大多数人来说可能是一个愚蠢的问题。我有一个简单的服务器，几个用户可以访问。如果其中任何一个更改了元素的 CSS 属性，其他人应该能够实时看到更改。

我应该使用 node.js 之类的东西来执行此操作吗？如何保存用户所做的更改？

该页面看起来像这样：[http ://stom89.dyndns.org/](http://stom89.dyndns.org/)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T00:04:23.457

我认为您需要使用 sql 数据库并使用 javascript 来检测更改并通过 AJAX 进行更新。这是我最好的主意。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T00:13:50.657

我猜你想在你的 CSS / html 中改变的是状态。就像一盏灯是开/关的？然后，您需要将每个状态保存在 mySQL DB 中，然后获取每个用户的数据。如果你想让在线用户看起来像实时，那么使用 js(ajax) 定期同步数据。

没有数据库的替代方法是使用文件。

如果您不想为此使用 mysql，则可以使用文件。我建议使用 ini 文件。有关[如何读取/写入 ini 文件的更多信息，您可以访问此问题。](https://stackoverflow.com/questions/5695145/how-to-read-and-write-to-an-ini-file-with-php)它非常简单，您可以将每个变量放在一个漂亮的数组中。

你需要什么：一点 PHP，一点 jQuery（或 js），了解 GET 变量

我建议你创建 3 个文件。

> **index.php**：
> 您的主页面，即客户端。使用 get 变量提取信息。您可以为此使用 jQuery.get()。
> 
> **getstate.php**：
> 这个文件将读取 ini 文件并返回每个设备的状态。使用 index.php 中的 jQuery.get() 读取它们。
> 
> **savestate.php**：
> 这是您将从 index.php 发送新状态的文件 示例请求：[http ://address.goes.here/savestate.php?bedroomlight=1&garagelight=0](http://address.goes.here/savestate.php?bedroomlight=1&garagelight=0)

更有趣的是，ini 文件可以通过多种编程语言轻松编写/读取，因此您可以使用 Raspberry Pi 轻松操作数据。（比如有人开灯，脚本轮询状态可能会改变 ini 文件）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T00:10:28.320

如果我完全理解你的问题，我已经把这个话题搞砸了一段时间。我建议查看 python、ruby 或 node.js，尽管我不能说哪个对你来说最容易学习，但我建议使用 python 和一个可能是猿的[彗星服务器](https://www.google.com/search?num=100&q=comet+server)，只需让服务器将更新推送给那些已经在网站上。

**编辑：** 轮询建议:: [jQuery](http://api.jquery.com/category/ajax/)
[http://api.jquery.com/jQuery.get/](http://api.jquery.com/jQuery.get/)用于标准数据检索，这几乎是您所需要的。

# php - 使用 PHP 将 HTML 元素添加到当前页面

> ID：11075724
> 
> 赞同：2
> 
> 时间：2012-06-17T23:55:18.493
> 
> 标签：php, html, dom

所以我需要使用 php 动态添加 html 内容，这不是棘手的部分，但我试图将 HTML 放入文档中与运行 PHP 的位置不同的位置。例如：

```
<div id="firstDiv">
    <?php
        echo "<div id=\"firstDivA\"></div>";
        echo "<div id=\"secondDivA\"></div>";
    ?>
</div>
<div id="secondDiv">
</div> 
```

但我希望能够使用在“firstDiv”中执行的 PHP 将一些 HTML 放置在“secondDiv”中。最终结果应该是：

```
<div id="firstDiv">
    <div id="firstDivA"></div>
</div>
<div id="secondDiv">
    <div id="secondDivA"></div>
</div> 
```

但我不知道该怎么做。我阅读了 PHP 5 中的一些 DOM 内容，但找不到有关修改当前文档的任何内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T23:57:55.083

您可以在 HTML 中的任意位置打开/关闭 PHP 的“块”

```
<div id="firstDiv">
    <?php echo '<div id="firstDivA"></div>'; ?>
</div>
<div id="secondDiv">
    <?php echo '<div id="secondDivA"></div>'; ?>
</div> 
```

如有必要，您还可以使用[ob_start()](http://php.net/ob_start)和[ob_get_clean()](http://php.net/ob_get_clean)捕获输出：

```
<?php
$separator = "\n";

ob_start();
echo '<div id="firstDivA"></div>' . $separator;
echo '<div id="secondDivA"></div>' . $separator;
$content = ob_get_clean();

$sections = explode($separator, $content);
?>
<div id="firstDiv">
    <?php echo $sections[0]; ?>
</div>
<div id="secondDiv">
    <?php echo $sections[1]; ?>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T23:58:25.657

为什么不把相关代码移到正确的地方呢？

```
<div id="firstDiv"> 
    <?php 
        echo "<div id=\"firstDivA\"></div>"; 
    ?> 
</div> 
<div id="secondDiv"> 
    <?php 
        echo "<div id=\"secondDivA\"></div>"; 
    ?> 
</div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T00:00:07.130

该`.php`文件是连续的，因此如果您有两个单独`<?php ?>`的标签，它们将能够共享相同的变量。

```
 <div id="firstDiv">
 <?php
    echo "<div id=\"firstDivA\"></div>";
    $div2  = "<div id=\"secondDivA\"></div>";
 ?>
 </div>
 <div id="secondDiv">
    <?php echo $div2 ?>
 </div> 
```

这将产生预期的效果。（演示变量的使用）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T00:00:15.997

我不确定你在问什么。也许只是在第二个 div 中添加一个 echo 语句。

```
<div id="firstDiv">
    <?php echo "<div id=\"firstDivA\"></div>"; ?>
</div>
<div id="secondDiv">
    <?php echo "<div id=\"secondDivA\"></div>"; ?>
</div> 
```

或者你的意思是你想在 PHP 之后进行 DIV 更改？试试 jQuery！或者你的意思是你想在 PHP 完成之前进行 DIV 更改？也许 phpQuery 对你有好处。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-18T00:02:07.847

如果您想使用 XML 数据（阅读 XHTML），您宁愿使用适当的 XML 处理器。

[DomCrawler](http://symfony.com/doc/current/components/dom_crawler.html#adding-the-content)非常适合与 DOM 一起工作。它与本机 DOM 扩展一起工作，因此快速且广泛使用。

这是文档中有关如何添加内容的示例：

```
 $crawler = new Crawler();
  $crawler->addHtmlContent('<html><div class="foo"></div></html>');

  $crawler->filter('div')->attr('class') // returns foo 
```

# visual-studio-2010 - Microsoft SQL Server 2008 R2 安装

> ID：11075728
> 
> 赞同：1
> 
> 时间：2012-06-17T23:56:14.527
> 
> 标签：visual-studio-2010, sql-server-2008-r2, visual-c#-express-2010

我使用 VisualStudio 2010，并且我的计算机上还安装了 Visual C# 2010 Express。

而且我必须安装Microsoft SQL Server 2008 R2，但在滴注过程中出现警告——

> “此计算机上安装了以前版本的 Microsoft Visual Studio 2008。将 Microsoft Visual Studio 2008 升级到 SP1...”

当我尝试升级 VS 2008 时，它说“您的计算机上没有 VS 2008”。=)

如何使用 VS 2010 解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T00:06:01.057

**自担风险 我认为您**
需要在注册表中进行一些更改，请按照以下步骤 操作
1\. 在运行中键入 regedit
2\. 转到 HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\DevDiv
3\. 找到 VS 或 vs 文件夹将其重命名为 vs_1

希望它会奏效。这是我曾经做过的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T00:05:41.137

版本号不同，但这似乎是您的情况：

*   [http://support.microsoft.com/kb/956139](http://support.microsoft.com/kb/956139)

我最初的建议是“将您的 MSSQL 2008 安装视为全新安装”。我仍然建议“尝试‘全新安装’，看看你能走多远。”

然而，微软的建议是“首先卸载 MSVS 附带的版本”。

做任何你认为最好的事情。

我肯定会先备份；）

# ruby - gsub - 如何成为高效的 leet 生成器

> ID：11075732
> 
> 赞同：2
> 
> 时间：2012-06-17T23:57:01.170
> 
> 标签：ruby, regex

为了好玩，我在 ruby​​ 中创建了一个简单的 leet (1337) 生成器

所以我正在做这样的事情，它有效但看起来效率不高，我相信它可以只用一行来完成......

```
 def leet
       words = words.gsub(/a/, '4')
       words = words.gsub(/e/, '3')
       words = words.gsub(/i/, '1')
       words = words.gsub(/o/, '0')
       words = words.gsub(/s/, '5')
       words = words.gsub(/t/, '7')
       puts words
    end 
```

你能帮我一下吗？：） 谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T00:03:58.543

```
def leet(word)
  puts word.gsub(/[aeiost]/,'a'=>'4','e'=>'3','i'=>'1','o'=>'0','s'=>'5','t'=>'7')
end 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-18T00:56:07.200

```
def leet s
  s.tr 'aeiost', '431057'
end 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-18T00:11:29.497

一个更通用的 megas 版本：

```
class Leet
    @@map = {
        'a' => '4',
        'e' => '3',
        'i' => '1',
        'o' => '0',
        's' => '5',
        't' => '7'
    }
    @@re = Regexp.union(@@map.keys)

    def self.speak(str)
        str.gsub(@@re, @@map)
    end
end

puts Leet.speak('leet')
# l337 
```

根据需要进行调整`@@map`，然后离开。

# c# - 如何强制重复输入？

> ID：11075741
> 
> 赞同：0
> 
> 时间：2012-06-17T23:59:47.570
> 
> 标签：c#, duplicates, user-input

这段代码对我有用，除了它只检查一次重复，如果用户再次输入相同的整数，程序将第二次接受它。无论用户输入多少次，如何使该程序不接受输入？

```
 int[] shippedOrderNumbers = new int[5];

        Console.WriteLine("Please Input first Shipping Number: ");
        shippedOrderNumbers[0] = Convert.ToInt32(Console.ReadLine());           

        Console.WriteLine("Please Input second Shipping Number: ");
        shippedOrderNumbers[1] = Convert.ToInt32(Console.ReadLine());           

        if (shippedOrderNumbers[0] == shippedOrderNumbers[1])
        {
            Console.WriteLine("A dublicate number is not allowed please try again: ");
            shippedOrderNumbers[1] =Convert.ToInt32(Console.ReadLine());               
        }          

            Console.WriteLine("Please Input third Shipping Number: ");
            shippedOrderNumbers[2] = Convert.ToInt32(Console.ReadLine());

        if (shippedOrderNumbers[0] == shippedOrderNumbers[2] || shippedOrderNumbers[1] == shippedOrderNumbers[2])
        {
            Console.WriteLine("A dublicate number is not allowed please try again: ");
            shippedOrderNumbers[2] = Convert.ToInt32(Console.ReadLine());
        }                           
            Console.WriteLine("Please Input fourth Shipping Number: ");
            shippedOrderNumbers[3] = onvert.ToInt32(Console.ReadLine());               

        if (shippedOrderNumbers[0] == shippedOrderNumbers[3] || shippedOrderNumbers[1] == shippedOrderNumbers[3] || shippedOrderNumbers[2] == shippedOrderNumbers[3])
        {
            Console.WriteLine("A dublicate number is not allowed please try again: ");
            shippedOrderNumbers[3] = Convert.ToInt32(Console.ReadLine());
        }                           
            Console.WriteLine("Please Input fifth Shipping Number: ");
            shippedOrderNumbers[4] = Convert.ToInt32(Console.ReadLine());

        if (shippedOrderNumbers[0] == shippedOrderNumbers[4] || shippedOrderNumbers[1] == shippedOrderNumbers[4] || shippedOrderNumbers[2] == shippedOrderNumbers[4] || shippedOrderNumbers[3] == shippedOrderNumbers[4])
        {
            Console.WriteLine("A dublicate number is not allowed please try again: ");
            shippedOrderNumbers[4] = Convert.ToInt32(Console.ReadLine());
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T00:07:40.417

我认为您最好使用通用列表而不是数组。您还可以使用简单的循环来简化代码。请参阅以下示例。

```
IList<int> shippedOrderNumbers = new List<int>();

for (int = 0; i < 5; i++)
{
    Console.WriteLine("Please input the Shipping Number: ");

    int shippingNumber;
    if (!Int.TryParse(Console.ReadLine(), out shippingNumber) 
    {
        Console.WriteLine("Your shipping number is not an integer");
    }

    if (shippedOrderNumbers.Contains(shippingNumber)) 
    {
        Console.WriteLine("This shipping number has already been entered.");
    }
    else 
    {
        shippedOrderNumbers.Add(shippingNumber);
        Console.WriteLine("Thanks for submitting your shipping number.");
    }
} 
```

PS。我在记事本中写了这个，所以它**可能**不起作用，但应该给你一个关于如何解决你的问题的一般指南。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T00:08:44.540

沿着这些路线的东西应该这样做：

```
var shippedOrderNumbers = new List<int>();

var validOrderNumbers = 0;

while(validOrderNumbers < 5)
{
     Console.WriteLine("Input order number:");
     var nextOrderNumber = Convert.ToInt32(Console.ReadLine());
     if(shippedOrderNumbers.Any(son => son == nextOrderNumber))
     {
         Console.WriteLine("Duplicate order number. Please enter another");
         continue;
     }
     shippedOrderNumbers.Add(nextOrderNumber);
     validOrderNumbers++;
} 
```

# java - java.lang.NoClassDefFoundError: org/springframework/context/EnvironmentAware

> ID：11075742
> 
> 赞同：10
> 
> 时间：2012-06-17T23:59:48.093
> 
> 标签：java, eclipse, spring, security, tomcat

我正在使用 spring mvc 创建一个 Web 应用程序。我已经开始合并 Spring Security 库。当我尝试使用 Eclipse 将其部署到 tomcat 时，我现在在 tomcat 日志中收到以下错误。

我在我的库中使用以下 jar 版本

*   spring 框架版本 3.1.1.RELEASE
*   spring框架安全版3.1.0.RELEASE

我还在使用 STS 版本的 eclipse、maven 和 vmware vfabric tc Server（与 sts 捆绑在一起）。

这是tomcat日志

```
 SEVERE: Exception starting filter springSecurityFilterChain
java.lang.NoClassDefFoundError: org/springframework/context/EnvironmentAware
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
at org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:2820)
at org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:1150)
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1645)
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1523)
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
at org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:2820)
at org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:1150)
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1645)
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1523)
at org.apache.catalina.core.DefaultInstanceManager.loadClass(DefaultInstanceManager.java:415)
at org.apache.catalina.core.DefaultInstanceManager.loadClassMaybePrivileged(DefaultInstanceManager.java:397)
at org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:118)
at org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:252)
at org.apache.catalina.core.ApplicationFilterConfig.setFilterDef(ApplicationFilterConfig.java:372)
at org.apache.catalina.core.ApplicationFilterConfig.<init>(ApplicationFilterConfig.java:98)
at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4584)
at org.apache.catalina.core.StandardContext$2.call(StandardContext.java:5262)
at org.apache.catalina.core.StandardContext$2.call(StandardContext.java:5257)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
at java.util.concurrent.FutureTask.run(FutureTask.java:138)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:680)
Caused by: java.lang.ClassNotFoundException: org.springframework.context.EnvironmentAware
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1678)
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1523)
... 30 more 
```

这是我的 web.xml 文件

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns="http://java.sun.com/xml/ns/javaee"
xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
id="WebApp_ID" version="2.5">
<!--
    Display Name is used vides a short name for the application, 
    which will be displayed in the Tomcat Manager application.
    When used in <security-constraint>, this tag provides a name 
    for the security constraint.  
-->
<display-name>ImaginateFramework</display-name>

<welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
</welcome-file-list>
<servlet>
    <servlet-name>spring</servlet-name>
    <servlet-class>
        org.springframework.web.servlet.DispatcherServlet
    </servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>spring</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>spring</servlet-name>
    <url-pattern>*.html|*.htm|*.xhtm|*.jsp|*.jsf|*.php|*.pl|*.cf</url-pattern>
</servlet-mapping>

<!-- Security Config -->
<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>

<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

这是我的 spring-servlet.xml 文件

```
<?xml  version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:security="http://www.springframework.org/schema/security"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:aop="http://www.springframework.org/schema/aop"
xmlns:context="http://www.springframework.org/schema/context"
xmlns:jee="http://www.springframework.org/schema/jee" xmlns:lang="http://www.springframework.org/schema/lang"
xmlns:p="http://www.springframework.org/schema/p" xmlns:tx="http://www.springframework.org/schema/tx"
xmlns:util="http://www.springframework.org/schema/util" xmlns:mvc="http://www.springframework.org/schema/mvc"
xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
    http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
    http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee.xsd
    http://www.springframework.org/schema/lang http://www.springframework.org/schema/lang/spring-lang.xsd
    http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd
    http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd
    http://www.springframework.org/schema/mvc
    http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd
    http://www.springframework.org/schema/security
    http://www.springframework.org/schema/security/spring-security-3.1.xsd">

<security:ldap-server />
<security:http auto-config='true'>
    <security:intercept-url pattern="/**" access="ROLE_USER" />
</security:http>
<security:authentication-manager>
    <security:authentication-provider>
        <security:user-service>
            <security:user name="admin" password="password"
                authorities="ROLE_USER, ROLE_ADMIN" />
            <security:user name="bob" password="bob" authorities="ROLE_USER" />
        </security:user-service>
    </security:authentication-provider>
</security:authentication-manager>

<context:annotation-config />
<context:component-scan base-package="com.imaginatelabs.imaginate_framework.mvc" />
<mvc:annotation-driven />
<mvc:resources location="/images/" mapping="/images/**" />
<mvc:resources location="/scripts/" mapping="/scripts/**" />
<mvc:resources location="/themes/" mapping="/themes/**" />
<mvc:interceptors>
    <bean id="localeChangeInterceptor"
        class="org.springframework.web.servlet.i18n.LocaleChangeInterceptor">
        <property name="paramName" value="lang" />
    </bean>
    <bean id="themeChangeInterceptor"
        class="org.springframework.web.servlet.theme.ThemeChangeInterceptor">
        <property name="paramName" value="theme" />
    </bean>
</mvc:interceptors>

<bean id="jspViewResolver"
    class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="viewClass"
        value="org.springframework.web.servlet.view.JstlView" />
    <property name="prefix" value="/WEB-INF/jsp/" />
    <property name="suffix" value=".jsp" />
    <property name="order" value="1" />
</bean>

<bean id="propertyConfigurer"
    class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer"
    p:location="/WEB-INF/jdbc.properties" />

<bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource"
    destroy-method="close" p:driverClassName="${jdbc.driverClassName}"
    p:url="${jdbc.databaseurl}" p:username="${jdbc.username}" p:password="${jdbc.password}" />

<!-- Hibernate Components -->
<bean id="sessionFactory"
    class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="configLocation">
        <value>classpath:hibernate.cfg.xml</value>
    </property>
    <property name="configurationClass">
        <value>org.hibernate.cfg.AnnotationConfiguration</value>
    </property>
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">${jdbc.dialect}</prop>
            <prop key="hibernate.show_sql">true</prop>
        </props>
    </property>
</bean>

<tx:annotation-driven />
<bean id="transactionManager"
    class="org.springframework.orm.hibernate3.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory" />
</bean>

<!-- Tiles Components -->
<bean id="tilesViewResolver"
    class="org.springframework.web.servlet.view.UrlBasedViewResolver">
    <property name="viewClass"
        value="org.springframework.web.servlet.view.tiles2.TilesView" />
    <property name="order" value="0" />
</bean>
<bean id="tilesConfigurer"
    class="org.springframework.web.servlet.view.tiles2.TilesConfigurer">
    <property name="definitions">
        <list>
            <value>/WEB-INF/tiles.xml</value>
        </list>
    </property>
</bean>
<!-- Language Components -->

<bean id="messageSource"
    class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
    <property name="basename" value="classpath:messages" />
    <property name="defaultEncoding" value="UTF-8" />
</bean>

<bean id="localeResolver"
    class="org.springframework.web.servlet.i18n.CookieLocaleResolver">
    <property name="defaultLocale" value="en" />
</bean>

<!-- Theme Components -->
<bean id="themeSource"
    class="org.springframework.ui.context.support.ResourceBundleThemeSource">
    <property name="basenamePrefix" value="theme-" />
    <!-- Can I configure this to look in a directory on the server? -->
</bean>

<bean id="themeResolver"
    class="org.springframework.web.servlet.theme.CookieThemeResolver">
    <property name="defaultThemeName" value="default" />
</bean> 
```

（编辑） pom.xml

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
<modelVersion>4.0.0</modelVersion>
<groupId>myapp</groupId>
<artifactId>MyApp</artifactId>
<packaging>war</packaging>
<version>0.0.1-SNAPSHOT</version>
<name>App</name>
<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-war-plugin</artifactId>
            <version>2.1.1</version>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.3.2</version>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
            </configuration>
        </plugin>
    </plugins>
</build>
<properties>
    <org.springframework.version>3.1.1.RELEASE</org.springframework.version>
    <org.springframework.security.version>3.1.0.RELEASE</org.springframework.security.version>
    <org.apache.tiles>3.0.0</org.apache.tiles>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
</properties>
<dependencies>
    <dependency>
        <groupId>commons-beanutils</groupId>
        <artifactId>commons-beanutils</artifactId>
        <version>1.8.0</version>
    </dependency>
    <dependency>
        <groupId>commons-digester</groupId>
        <artifactId>commons-digester</artifactId>
        <version>2.0</version>
    </dependency>
    <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>1.2.16</version>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-api</artifactId>
        <version>1.5.8</version>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-log4j12</artifactId>
        <version>1.4.2</version>
    </dependency>
    <dependency>
        <groupId>org.apache.tiles</groupId>
        <artifactId>tiles-api</artifactId>
        <version>${org.apache.tiles}</version>
    </dependency>
    <dependency>
        <groupId>org.apache.tiles</groupId>
        <artifactId>tiles-core</artifactId>
        <version>${org.apache.tiles}</version>
    </dependency>
    <dependency>
        <groupId>org.apache.tiles</groupId>
        <artifactId>tiles-jsp</artifactId>
        <version>${org.apache.tiles}</version>
    </dependency>
    <dependency>
        <groupId>org.apache.tiles</groupId>
        <artifactId>tiles-servlet</artifactId>
        <version>${org.apache.tiles}</version>
    </dependency>
    <dependency>
        <groupId>org.apache.tiles</groupId>
        <artifactId>tiles-template</artifactId>
        <version>${org.apache.tiles}</version>
    </dependency>
    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>servlet-api</artifactId>
        <version>2.5</version>
    </dependency>
    <!-- 
    <dependency> 
        <groupId>org.springframework.webflow</groupId> 
        <artifactId>spring-webflow</artifactId> 
        <version>2.3.1.RELEASE</version> 
    </dependency> 
    -->
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-web</artifactId>
        <version>${org.springframework.security.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-config</artifactId>
        <version>${org.springframework.security.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-beans</artifactId>
        <version>${org.springframework.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-jdbc</artifactId>
        <version>${org.springframework.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-web</artifactId>
        <version>${org.springframework.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-webmvc</artifactId>
        <version>${org.springframework.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-orm</artifactId>
        <version>${org.springframework.version}</version>
    </dependency>
    <dependency>
        <groupId>hibernate</groupId>
        <artifactId>hibernate-entitymanager</artifactId>
        <version>3.4.0.GA</version>
    </dependency>
    <dependency>
        <groupId>taglibs</groupId>
        <artifactId>standard</artifactId>
        <version>1.1.2</version>
    </dependency>
    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>jstl</artifactId>
        <version>1.2</version>
    </dependency>
    <dependency>
        <groupId>mysql</groupId>
        <artifactId>mysql-connector-java</artifactId>
        <version>5.1.10</version>
    </dependency>
    <dependency>
        <groupId>commons-dbcp</groupId>
        <artifactId>commons-dbcp</artifactId>
        <version>20030825.184428</version>
    </dependency>
    <dependency>
        <groupId>commons-pool</groupId>
        <artifactId>commons-pool</artifactId>
        <version>20030825.183949</version>
    </dependency>
    <dependency>
        <groupId>org.apache.commons</groupId>
        <artifactId>commons-lang3</artifactId>
        <version>3.1</version>
    </dependency>
</dependencies> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-18T00:21:35.660

EnvironmentAware 位于 spring-context-3.1.1.RELEASE.jar 中，因此您缺少那个。

还要重新检查您的 Maven POM 文件，这样您就不会丢失任何其他 Spring 库，例如 spring-web、spring-webmvc（如果找到了 DispatcherServlet 类，您可能会拥有这些库）、spring-orm 如果您使用像 Hibernate、spring 这样的 ORM -jms 如果您使用 JMS 等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T00:08:29.033

您在运行时类路径中缺少 spring-mvc jar。导航到爆炸的战争并确保 spring-webmvc-3.1.1.RELEASE.jar 存在于`lib`目录中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-12T02:32:54.790

尝试清理您的项目，然后重新部署该项目。如果它仍然不起作用，请仔细检查您的 spring 库是否还有任何库。

# wpf - 如何强制 ItemsControl 验证行更改？

> ID：11075748
> 
> 赞同：1
> 
> 时间：2012-06-18T00:01:22.540
> 
> 标签：wpf, validation, mvvm, observablecollection, idataerrorinfo

我有一个`Model`被调用的`PhoneModel`和一个`ViewModel`被调用`PersonViewModel`的，它们都是 impelements`INotifyPropertyChanged`和`IDataErrorInfo`. 在`PersonViewModel`中，我有一个`ObservableCollection<PhoneModel> Phones`属性显示`ItemsControl`在我的视图中。所以，我创建了一些`Command`s 来添加和删除`PhoneModel`项目`Phones`。但是在添加、编辑和删除它们时，`Validation`没有被解雇。如何强制`ItemsControl`验证其内容？有什么办法吗？

```
public class PhoneModel : INotifyPropertyChanged, IDataErrorInfo {
    // has some validation roles and IDataErrorInfo is implemented full
    public string Number { get; set; }
}

public class PersonViewModel : INotifyPropertyChanged, IDataErrorInfo { 
    public ObservableCollection<PhoneModel> Phones { get; set /* implements INotifyPropertyChanged */ ; }
} 
```

并认为：

```
<ItemsControl ItemsSource="{Binding Phones}">
    <ItemsControl.ItemTemplate>
        <DataTemplate>
            <StackPanel Orientation="Horizontal">
                <TextBox 
                    Text="{Binding Number,
                        UpdateSourceTrigger=PropertyChanged,
                        Mode=TwoWay,
                        ValidatesOnExceptions=True, 
                        NotifyOnValidationError=True,
                        ValidatesOnDataErrors=True}"
                    />
            </StackPanel>
        </DataTemplate>
    </ItemsControl.ItemTemplate>
</ItemsControl> 
```

你能帮我吗？提前致谢。

**更新 1**

我尝试`@Michael G`了答案，但仍然无效。我的代码在这里：

1）我添加了一个集合更改事件处理程序：

```
Phones.CollectionChanged += PhonesChanged; 
```

2）在其中我尝试：

```
void PhonesChanged(object sender, NotifyCollectionChangedEventArgs e) {
    if(e.Action != NotifyCollectionChangedAction.Remove)
        return;
    var model = e.OldItems[0] as PhoneModel;
    if(model != null) {
        model.Validate();
        OnPropertyChanged(() => Phones);
    }
} 
```

3）我也尝试听每个电话项目的属性改变：

```
foreach(var phone in Phones)
    phone.PropertyChanged += new PropertyChangedEventHandler(phone_PropertyChanged); 
```

和：

```
void phone_PropertyChanged(object sender, PropertyChangedEventArgs e) {
    var phone = sender as PhoneModel;
    if(phone == null)
        return;
    phone.Validate();
    OnPropertyChanged(() => Phones);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T01:12:10.100

监听 Phones ObservableCollection 上的[CollectionChanged](http://msdn.microsoft.com/en-us/library/ms653375.aspx)事件。

```
Phones.CollectionChanged += new NotifyCollectionChangedEventHandler(Phones_CollectionChanged);

void Phones_CollectionChanged(object sender, NotifyCollectionChangedEventArgs e)
{
     //ValidatePhones();
     // OnPropertyChanged("Phones"); // Let IDataErrorInfo know
} 
```

此外，您可以在 PersonViewModel 中侦听每个“PhoneModel”的 PropertyChanged 事件，以便在 PhoneModel 对象上的属性发生更改时调用验证。

# email - 如何在 Go 中发送带有附件的电子邮件

> ID：11075749
> 
> 赞同：18
> 
> 时间：2012-06-18T00:01:45.847
> 
> 标签：email, go, smtp

我找到了这个库，并设法在空电子邮件中发送附件，但没有将文本和附件结合起来。

[https://github.com/sloonz/go-mime-message](https://github.com/sloonz/go-mime-message)

如何做呢？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-19T18:38:27.340

我最终自己实现了它：[https ://github.com/scorredoira/email](https://github.com/scorredoira/email)

用法很简单：

```
m := email.NewMessage("Hi", "this is the body")
m.From = "from@example.com"
m.To = []string{"to@example.com"}

err := m.Attach("picture.png")
if err != nil {
    log.Println(err)
}

err = email.Send("smtp.gmail.com:587", smtp.PlainAuth("", "user", "password", "smtp.gmail.com"), m) 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-06-26T11:28:19.460

为此，我创建了[gomail](https://github.com/go-gomail/gomail/)。它支持附件以及多部分电子邮件和非 ASCII 字符的编码。它有很好的文档记录和测试。

这是一个例子：

```
package main

func main() {
    m := gomail.NewMessage()
    m.SetHeader("From", "alex@example.com")
    m.SetHeader("To", "bob@example.com", "cora@example.com")
    m.SetAddressHeader("Cc", "dan@example.com", "Dan")
    m.SetHeader("Subject", "Hello!")
    m.SetBody("text/html", "Hello <b>Bob</b> and <i>Cora</i>!")
    m.Attach("/home/Alex/lolcat.jpg")

    d := gomail.NewPlainDialer("smtp.example.com", 587, "user", "123456")

    // Send the email to Bob, Cora and Dan.
    if err := d.DialAndSend(m); err != nil {
        panic(err)
    }
} 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2015-05-13T09:24:25.197

我更喜欢将[https://github.com/jordan-wright/email](https://github.com/jordan-wright/email)用于电子邮件目的。它支持附件。

> **人类电子邮件**
> 
> 电子邮件包被设计为易于使用，但足够灵活，不会受到限制。目标是为人类提供电子邮件界面。
> 
> 电子邮件包目前支持以下内容：
> 
> *   发件人、收件人、密件抄送和抄送字段
> *   “test@example.com”和“First Last”格式的电子邮件地址
> *   文本和 HTML 消息正文
> *   附件
> *   阅读回执
> *   自定义标题
> *   更多即将到来！

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-18T06:26:55.767

SMTP 协议中的附件是使用 Multipart MIME 消息发送的。

所以我建议你简单

*   创建一个`MultipartMessage`

*   将您的文本在第一部分设置为`TextMessage`(with `"Content-Type", "text/plain"`)

*   使用 . 将您的附件作为部件添加`AddPart`。

# ruby-on-rails-3 - Rails 路由重定向到错误的路径

> ID：11075754
> 
> 赞同：0
> 
> 时间：2012-06-18T00:03:12.217
> 
> 标签：ruby-on-rails-3, forms, routes

我有一个名为“clients”的视图，它显示了来自 Call 数据库的调用列表。这很好用。但是，当我添加一个带有表单的新按钮时，将创建调用，但它重定向到调用路径而不是客户端路径。

我不知道它为什么这样做，我唯一的理论是我正在处理在clients_controller 之外接触数据的操作，并且Rails 以某种方式默认为calls_path。我的删除操作也发生了同样的事情。有人可以帮我理解这一点吗？

```
calls_controller
def new
    @call = Call.new :call_status => "open"

    respond_with @call
  end

  def create
    @call = Call.new(params[:call])

     if @call.save
        redirect_to clients_path, notice: "Call was successfully created."
      else
        render :new
     end
  end 

  def destroy
      @call = Call.find(params[:id])
      @call.destroy

      respond_to do |format|
        format.html { redirect_to clients_index_path }
        format.json { head :no_content }
      end
    end

_form.html.erb
<%= form_for(@call) do |f| %>

  <%= f.label :caller_name %>
  <%= f.text_field :caller_name %>
  <%= f.label :caller_phone %>
  <%= f.text_field :caller_phone, :placeholder => 'xxx-xxx-xxxx' %>
  <%= f.label :caller_email %>
  <%= f.text_field :caller_email %>

  <%= f.button :submit %>

<% end %>

routes.rb
devise_for :users
  match 'mdt' => 'mdt#index'
  get "home/index"
  resources :medics
  resources :clients
  resources :users
  resources :units
  resources :mdt do
    collection do
      put "in_service"
      put "en_route"
      put "to_hospital"
      put "at_hospital"
      put "on_scene" 
      put "out_of_service" 
      put "at_station"
      put "staging"
      put "at_post"
      put "man_down"
  end
  end
  resources :calls do
    member do
      post 'close'
    end
  end
  root :to => 'home#index'
  devise_scope :user do
    get "/login" => "devise/sessions#new"
    delete "/logout" => "devise/sessions#destroy"
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T13:58:56.677

我遇到的问题是路线。我需要一个新呼叫的 post 方法。在创建了两个动作（一个用于创建，一个用于销毁）以及它们的路线之后，一切都开始工作了。看起来它正在尝试使用默认路由和操作，这些路由和操作会出于我的目的重新路由到错误的 URL。

```
resources :clients do
    collection do
      post "calls"
    end
    member do
      delete "cancel"
    end
  end

 def calls
    @call = Call.new(params[:call])

     if @call.save
        redirect_to clients_path, notice: "Call was successfully created."
      else
        render :new
     end
  end 

  def cancel
      @call = Call.find(params[:id])
      @call.destroy

      respond_to do |format|
        format.html { redirect_to clients_path }
        format.json { head :no_content }
      end
    end 
```

# php - 我怎样才能使它更安全？

> ID：11075758
> 
> 赞同：0
> 
> 时间：2012-06-18T00:04:17.603
> 
> 标签：php, login, hash

我正在用 PHP 制作一个登录系统，我想知道我目前拥有的这个哈希函数是否足够安全。

```
public function genHash( $user, $pass )
{
    $user = strtoupper($user);
    $staticSalt  = $this->staticSalt;
    $dynamicSalt = hash('SHA512', md5($user . $pass) . sha1($pass) . hash('SHA512', $user . $pass));
    $final       = hash('WHIRLPOOL', $pass . $dynamicSalt . $staticSalt);
    return $final;
} 
```

静态盐只是一堆随机字符。无论如何，我怎样才能使它更安全？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T00:08:40.280

您可以为每个用户使用不同的盐并将它们存储在数据库中，但除此之外，该系统看起来非常安全。（不知道服务器的详细信息）。

编辑：

从理论上讲，对字符串进行多重散列会增加散列冲突的可能性，但我没有发现任何可靠的东西表明这是一个实际风险。

# facebook - 向 username@facebook.com 发送电子邮件是一种允许的联系方式吗？

> ID：11075761
> 
> 赞同：2
> 
> 时间：2012-06-18T00:04:59.390
> 
> 标签：facebook, email, instant-messaging

我注意到我可以发送电子邮件`username@facebook.com`，它会被发送到用户的 Facebook 收件箱。这是否允许以编程方式完成（例如，通过 SendGrid 发送以重新吸引用户）？

有没有人有这样做的经验？如果允许，有什么需要注意或注意的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T04:31:18.020

您可以以编程方式执行此操作，但 Facebook 对此很聪明。如果您收到来自 Facebook 不认识的人或您不是朋友的电子邮件，那么它将转到该`Messages->Other`部分。如果它是映射到您朋友的 Facebook 个人资料的电子邮件，它将显示在您的收件箱中。

# ios - UIBackButton 背景不起作用？

> ID：11075763
> 
> 赞同：1
> 
> 时间：2012-06-18T00:05:23.617
> 
> 标签：ios, render

我的应用程序中的后退按钮在基于 Retina 的设备上完美运行，但在非 Retina 设备上存在严重问题。有谁知道为什么会这样？如您所见，UINavigationBar 背景覆盖在按钮的文本区域之上。但是，在 Retina 设备上查看时，它可以正确呈现。两个图像都有用于视网膜显示的@2x 版本，但由于某种原因，标准版本不会呈现。我使用此代码设置背景按钮的图像：

> ```
> UIImage *backButtonImage = [UIImage imageNamed:@"backbutt4on.png"];
> [[UIBarButtonItem appearance] setBackButtonBackgroundImage:backButtonImage forState:UIControlStateNormal barMetrics:UIBarMetricsDefault]; 
> ```

非视网膜：
![](../Images/54f84f405e8ef9150e1f13f5a877d3d3.png)

视网膜：
[![](../Images/73752227a5841d1582bd6460a3db6972.png)](https://i.stack.imgur.com/9lEMV.png)

# ios - UITableViewCell UILabel 多行对齐

> ID：11075764
> 
> 赞同：0
> 
> 时间：2012-06-18T00:05:33.037
> 
> 标签：ios, xcode, uitableview, vertical-alignment

我正在使用带有标签和详细信息的标准原型单元格。我将详细文本设置为两行，并将文本设置为带有换行符的内容。这很好用——但是，（左对齐）主标签已经失去了垂直居中，尽管我没有改变它的任何属性。

这是 Storyboard 中的样子：

![界面生成器的屏幕截图](../Images/aa6cb66ec4767c2cf5a95e8f4712ba21.png)

“标题”应垂直居中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T01:13:54.093

您可以继承 UITableViewCell 并在 initWithStyle 方法中进行布局。例如：

MyCustomCell.h 文件：

```
@interface MyCustomCell : UITableViewCell
{
    UILabel *_label1;
    UILabel *_label2;
    UILabel *_titleLabel;
}

@property (nonatomic, strong) UILabel *label1;
@property (nonatomic, strong) UILabel *label2;
@property (nonatomic, strong) UILabel *titleLabel;
@end 
```

MyCustomCell.m 文件：

```
#import "MyCustomCell.h"

@implementation MyCustomCell
@synthesize label1 = _label1;
@synthesize label2 = _label2;
@synthesize titleLabel = _titleLabel;

- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {
        // Initialization code
        self.label1 = [[UILabel alloc]initWithFrame:CGRectMake(x, y, w, h)];  //x: x coordinate, y: y coordinate, w is width , h is height
        self.label2 = [[UILabel alloc]initWithFrame:CGRectMake(x, y, w, h)];
        self.titleLabel = [[UILabel alloc]initWithFrame:CGRectMake(x, y, w, h)];
        self.titleLabel.font = [UIFont fontWithName:@"Times New Roman" size:30.0f]; //change font name and size per your needed.
        [self addSubview:self.label1];
        [self addSubview:self.label1];
        [self addSubview:self.titleLabel];
    }
    return self;
} 
```

在您拥有`cellForRowAtIndexPath`方法的类文件中，确保包含`#import "MyCustomCell.h"`并使用`MyCustomCell`而不是`UITableViewCell`分配单元格。并将数据分配给标签，如下所示：

```
cell.label1.text = xxxx;
cell.label2.text = xxxx;
cell.titleLabel.text = xxxx; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T01:32:50.180

您可以使用自定义单元格，您可以在其中定义自定义属性的属性。文本标签的大小不固定。我认为这就是对齐不起作用的原因。

# testing - TeamCity 测试可以异步运行吗

> ID：11075769
> 
> 赞同：3
> 
> 时间：2012-06-18T00:06:43.053
> 
> 标签：testing, automated-tests, teamcity

在我们的环境中，我们有很多长期运行的功能测试，这些测试目前会占用构建代理并强制其他构建排队。由于这些代理只等待测试结果，理论上它们可以将测试交给其他机器（测试代理），然后运行排队的构建，直到测试结果可用。

对于 CI 构建（包括单元测试），这应该保持内联，因为我们希望对失败进行即时反馈，但是最好在运行功能测试所花费的时间、结果的前置时间和吞吐量之间取得更好的平衡。我们的集体建设。

据我所知，TeamCity 本身并不支持这种情况，所以我认为有几个选择：

*   启动更多代理并将它们分配到“测试”池。触发功能构建配置以在这些代理上运行（由成功的 Ci 构建触发）。虽然这似乎是最干净的，但它的扩展性不是很好，因为我们有购买许可证的前置时间，并且经常需要在替代环境中运行测试，这会暂时使所需的测试代理数量增加一倍（或更多）。
*   添加构建或构建步骤以在外部机器上启动测试，然后立即将构建标记为成功，以便可以处理排队的构建，然后当测试完成时，我们将构建标记为成功/失败。这依赖于能够更新先前构建的结果（也许是 REST API？）。将某事标记为成功然后将其更新为失败也感觉很难看，但我们总是可以选择性地监控什么，所以我们只能看到最终结果。
*   继续旋转代理，直到我们不再有构建队列。问题在于它是一个移动的目标。如果我们知道高原在哪里（或是否存在），这将是可行的方法，但我们的使用模式意味着这是不可行的。

有没有人在类似的情况下取得了成功，或者知道上述任何我没有想到的优点/缺点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T12:57:16.033

您对可用选项的描述似乎非常准确。如果您想要实时更新构建进度，您将需要让一个 TeamCity 代理“忙碌”来处理每个正在运行的构建。

这里唯一的缺点似乎是代理许可证成本。如果测试构建只是在其他机器上启动进程，那么 TeamCity 代理进程本身可以在低端机器上运行，甚至可以在单台计算机上运行多个代理。

第二个场景的扩展可以是两个构建配置而不是一个：一个将启动外部流程，另一个可以在外部流程完整性时触发，然后将所有外部流程结果发布为它自己的。它还可以对开始构建具有快照依赖关系以维护关系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T04:47:24.233

For anyone curious we ended up buying more agents and assigning them to a test pool. Investigations proved that it isn't possible to update build results (I can definitely understand why this ugliness wouldn't be supported out of the box).

# codeigniter - Codeigniter 中的 FTP 镜像

> ID：11075771
> 
> 赞同：0
> 
> 时间：2012-06-18T00:07:35.903
> 
> 标签：codeigniter

我们在一个由数据库驱动的 CI 应用程序上维护 70 多个房地产网站（实际上，一个数据库和应用程序用于生产站点，一个数据库和应用程序用于开发站点），以便为每个站点提供必要的差异。我们提供定制的 CMS，以便物业经理可以定期更新他们的网站。有一个批准流程可以通过 CMS 将对其开发站点所做的更改推送到其生产站点。

CMS 的一项功能是上传相册。一旦专辑上传到开发并批准生产，我需要将此文件夹从开发资产复制到他们的生产资产。

我建立 FTP 连接并创建相册文件夹没有问题，使用：

```
$this->ftp->mkdir($path['ftpP'].'photoAlbums/'.$album[0]['albumFolderName'].'/', DIR_WRITE_MODE); 
```

($path['ftpP'] 看起来像这样：/httpdocs/edrAssets/propsP/700/

当我尝试在 FTP 类中使用镜像功能时，我没有收到任何错误或警告，但我也没有收到任何传输 - 什么也没有。

这是该代码：

```
$dLink = $path['ftpD'].'photoAlbums/'.$album[0]['albumFolderName'].'/';
$pLink = $path['ftpP'].'photoAlbums/'.$album[0]['albumFolderName'].'/';

$this->ftp->mirror($dLink, $pLink); 
```

从星期四晚上开始，我一直在与这个作斗争，需要一些建议。感谢所有帮助。

乔恩

请求的日志文件：

调试 - 2012-06-18 07:15:31 --> 控制器类已初始化

调试 - 2012-06-18 07:15:31 --> Ftp 类已加载。第二次尝试被忽略。

调试 - 2012-06-18 07:15:31 --> 在这里尝试 FTP

错误 - 2012-06-18 07:15:31 --> 严重性：警告 --> opendir() [function.opendir]: 无法访问 /httpdocs/edrAssets/propsD/700/photoAlbums/theUSOpen2012/ /var/www /vhosts/edrpropertyoperations.com/httpdocs/WEBdev/system/libraries/Ftp.php 532

错误 - 2012-06-18 07:15:31 --> 严重性：警告 --> opendir(/httpdocs/edrAssets/propsD/700/photoAlbums/theUSOpen2012/) [function.opendir]：未能打开目录：没有这样的文件或目录 /var/www/vhosts/edrpropertyoperations.com/httpdocs/WEBdev/system/libraries/Ftp.php 532

调试 - 2012-06-18 07:15:31 --> 最终输出发送到浏览器

调试 - 2012-06-18 07:15:31 --> 总执行时间：0.1626

**添加*********

 **```
 public function approved_create_album( $id ){   
         $thisTask = $this->mcms->getSingleAdminTask( $id );

         $album = $this->mcms->getAlbumByID($thisTask[0]['itemID']);    
         $path = $this->mcms->path_variables( $album[0]['propNumber']);

         $this->load->library('ftp');   
         $ftp['hostname'] = <REMOVED>;
         $ftp['username'] = <REMOVED>;  
         $ftp['password'] = <REMOVED>;
         $ftp['port']     = 21;     
         $ftp['passive']  = FALSE;  
         $ftp['debug']    = TRUE;   
         $ftp['ssl_mode'] = FALSE;  
         $this->ftp->connect($ftp);

         $dLink = $path['ftpD'].'photoAlbums/'.$album[0]['albumFolderName'].'/';    
         $pLink = $path['ftpP'].'photoAlbums/'.$album[0]['albumFolderName'].'/';

         if( !file_exists($pLink) && !is_dir($pLink)){
              $this->ftp->mkdir($path['ftpP'].'photoAlbums/'.$album[0]['albumFolderName'].'/', DIR_WRITE_MODE);     
         } // end if

         log_message('debug', 'Trying to FTP here');
         $this->ftp->mirror($dLink, $pLink);

         echo $dLink . " to " . $pLink; 
} // end approved_create_album function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T00:09:40.837

在您的代码中下拉到 unix 并使用命令行怎么样`rsync`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T08:09:40.850

我建议逐步调试：

1) 将 debug 设置为 TRUE，见[函数参考](http://codeigniter.com/user_guide/libraries/ftp.html)。您可能需要打开[error_reporting](http://codeigniter.com/user_guide/general/errors.html)。

2）连接到服务器（你做了）并上传文件。如果这有效，您就知道 a) 连接有效并且 b) 您的文件路径正确。

如果它仍然不起作用，请查看日志（或在此处发布它们;-)）。祝你好运！

**更新：**

我在自己的服务器上测试了 FTP 库。开箱即用，像魅力一样工作。因此，我们需要确定问题出在服务器还是您的 CI 配置上。

这是我接下来要做的事情：

1）尝试更少的配置，更少的变量，使用这个例子对所有内容进行硬编码：

```
<?php
$this->load->library('ftp');
$config['hostname'] = 'ftp.example.com';
$config['username'] = 'your-username'; 
$config['password'] = 'your-password';
$this->ftp->connect($config);
$this->ftp->mirror('/path/to/myfolder/', '/public_html/myfolder/');
$this->ftp->close(); 
```

如果它不起作用，那么：

2) 下载全新的 CI 安装并将其放在您的服务器上。您不需要任何配置或数据库连接。然后在新环境中尝试上面的示例。**

# makefile - 变量=@value@ 在 Makefiles

> ID：11075778
> 
> 赞同：3
> 
> 时间：2012-06-18T00:09:12.513
> 
> 标签：makefile, autoconf, gnu-make

我知道这会`@`抑制在 Makefile 中打印命令...

[http://www.gnu.org/software/make/manual/make.html#Echoing](http://www.gnu.org/software/make/manual/make.html#Echoing)

...我知道这`$@`是目标名称...

[http://www.gnu.org/software/make/manual/make.html#Automatic-Variables](http://www.gnu.org/software/make/manual/make.html#Automatic-Variables)

...但我找不到任何关于这样一行可能意味着什么的信息：

```
variable=@value@ 
```

我不想在这里修复任何东西，只是想更好地理解 Makefile。

更新：GNU autoconf 手册的“Makefile Subsituations”部分解释说它是一个被 autoconf 替换的值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T03:12:56.153

通常，您会在`Makefile.in`文件中找到它，这些文件由`configure`（又由`autoconf`）脚本处理。

在这种情况下，*如果**被告知*`@X@`，将由 shell 变量的值替换。如果不是，输入文件中的任何事件都不会被 触及，因此可替换字符串保持原样。如果你问我，这些实例表明构建系统中存在失误。`$X`*`configure`*`configure`

# c# - Lua 和 Lua 接口，使用未注册的 Lua 类？

> ID：11075779
> 
> 赞同：1
> 
> 时间：2012-06-18T00:09:19.667
> 
> 标签：c#, class, lua, bind

我使用 C# 的 LuaInterface。

在我的 C# 项目中，我得到了文件 Program.cs

它使用命名空间 Test，该类称为 Program。

在类 Program 中，我得到了 PrintTest() 方法。

我如何从 Lua 获得这种方法？我尝试过这样的事情：

luanet.Test.Program:PrintTest();

但是lua说“没有这种方法”。

我一直在看这个线程：[LuaInterface - 如何限制对 .Net 类的访问？](https://stackoverflow.com/questions/6171381/luainterface-how-to-restrict-access-to-net-classes)并设法像他一样创建了一个表单，所以问题只发生在我自己的自定义类中。

* * *

好的。问题似乎是 PrintTest 方法是静态的。如果我使它成为非静态的，它可以工作，但是如果我希望它是静态的，我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T01:39:41.720

尽管这个线程的年龄，我有同样的问题，并且能够找到一个令人满意的答案。

从 LuaInterface 1.5.1 开始，要调用类型的静态方法，您只需使用点运算符。

前任：

```
luanet.load_assembly("AssemblyName")
local Test = luanet.import_type("Test.Program")
Test.PrintTest() 
```

参考：[https ://github.com/megax/LuaInterface](https://github.com/megax/LuaInterface)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T03:56:27.720

它通常看起来像这样：

```
luanet.load_assembly("YourAssembly")
local Test  = luanet.import_type("Test.Program")
local test = Test()
test.PrintTest() 
```

# java - 字母的随机排列

> ID：11075788
> 
> 赞同：2
> 
> 时间：2012-06-18T00:13:22.560
> 
> 标签：java

我有城市：A、B、C、D、E

如何在 Java 中生成包含所有这些元素的初始解决方案？例如：BCDAE

目前我正在为 ABCDE 生成一个解决方案，然后将其混合起来，有没有更简单的方法可以做到这一点，我只是没想到？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T00:24:00.680

我会使用 Collections API 给我一个单行符：

```
List<String> letters;
Collections.shuffle(letters); 
```

[`Collections.shuffle()`](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#shuffle%28java.util.List%29)将元素按随机顺序排列。

这是一个小测试。每次运行此命令时，您都会得到随机顺序输出：

```
public static void main( String[] args ) {
    List<String> letters = Arrays.asList( "A", "B", "C", "D", "E" );
    Collections.shuffle( letters );
    System.out.println( letters );
} 
```

# java - Java - NullPointerException，而只是读取文件并返回一个 int

> ID：11075789
> 
> 赞同：0
> 
> 时间：2012-06-18T00:13:39.343
> 
> 标签：java, nullpointerexception, filereader

我正在尝试读取一个文件并弄清楚`String`该文件中出现了多少次。根据多少次，它会向玩家显示不同的对话（这是一个游戏）。这是我的代码

```
/**
 * Selects which dialogue to send depending on how many times the player has been jailed
 * @return The dialogue ID
 */
public static int selectChat() {
    System.err.println("Got to selectChar()");
    FileUtil.stringOccurrences(c.playerName, // NULLPOINTER HAPPENS HERE
        "./data/restrictions/TimesJailed.txt");

    if (FileUtil.stringCount == 1)
        return 495;
    if (FileUtil.stringCount == 2)
        return 496;
    if (FileUtil.stringCount >= 3) {
        return 497;
    }

    return 0;
} 
```

然后这是实际的文件读取方法

```
public static int stringCount;

/**
 * @param string
 * @param filePath
 * @return How many occurrences of the string there are in the file
 */
public static int stringOccurrences(String string, String filePath) {
    int count = 0;

    try {
        FileInputStream fstream = new FileInputStream(filePath);
        DataInputStream in = new DataInputStream(fstream);
        BufferedReader br = new BufferedReader(new InputStreamReader(in));
        String strLine;

        while ((strLine = br.readLine()) != null) {
            if (strLine.contains(string))
                count++;
        }

        in.close();
    }
    catch (Exception e) { // Catch exception if any
        System.err.println("Error: " + e.getMessage());
    }

    System.err.println(count);
    stringCount = count;
    return count;
} 
```

这就是我对 c 所做的一切

```
Client c;

public Jail(Client c) {
    this.c = c;
} 
```

有人可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T08:39:17.500

请按如下方式编写您的构造函数；

```
 Client c;

  public Jail(Client c) {
     if(c == null) {
         c = new Client();
     }
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T00:16:48.820

在我看来，`c`in`c.playerName`是空的。

还取决于`FileUtil`您使用的内容，这也可能导致 a`NullPointerException`何时`playerName`为空。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T00:17:14.833

据我所知，您的`stringOccurrences`方法不能抛出 NPE——它在`try`/`catch`块之外没有取消引用。

你在哪里赋值`c`？如果它为空，那么您的读取尝试`c.playerName`将产生一个`NullPointerException`. 要确定是否发生这种情况，请将您的代码更改为：

```
String myPlayerName = c.playerName; //now does NPE happen here ...
FileUtil.stringOccurrences(myPlayerName, // or here?
        "./data/restrictions/TimesJailed.txt"); 
```

# css - div 高度@一定宽度

> ID：11075791
> 
> 赞同：0
> 
> 时间：2012-06-18T00:14:01.397
> 
> 标签：css, html, height

有没有办法让 div 在某个宽度下具有某个高度？

所以在 800px 及以上的 div 高度将是 200px

然后在 400-799px 它将是 150px 等等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T00:18:21.850

您可能可以为此使用媒体查询。例如，如果`div`占据窗口的整个宽度，您可以使用：

```
@media all and (min-width:800px) {
    #elem {height:200px}
} 
```

如果您知道`div`相对于窗口的大小，则可以调整宽度阈值（例如，如果窗口左右总共有 20px 的边距，则添加 20）

# c# - 使用 switch 语句减少代码行

> ID：11075792
> 
> 赞同：0
> 
> 时间：2012-06-18T00:14:13.803
> 
> 标签：c#

我正在自学 C#，当前章节的挑战之一要求我提示用户输入字符串，写回字符串，计算字符数，字母“e”的实例，最后是所有元音的实例。它给出了使用提示，`switch`但我不知道该怎么做。我确实通过手动完成它来工作，但我认为这不是重点。:) 我如何使用`switch`语句来减少键入的行数？

```
Console.WriteLine("Please type a sentence and hit enter: ");

string myString = Console.ReadLine();

int letterCount = myString.Split('e').Length - 1;

Console.Clear();
Console.WriteLine("Thank you.  The sentence you entered was: \n\"{0}\"", myString);
Console.WriteLine("This sentence is {0} characters long.", myString.Length);
Console.WriteLine("It contains {0} instances of the letter \'e\'.", letterCount);

int vowelCount = 0;
int letterALower = myString.Split('a').Length - 1;
vowelCount += letterALower;

int letterELower = myString.Split('e').Length - 1;
vowelCount += letterELower;

int letterILower = myString.Split('i').Length - 1;
vowelCount += letterILower;

int letterOLower = myString.Split('o').Length - 1;
vowelCount += letterOLower;

int letterULower = myString.Split('u').Length - 1;
vowelCount += letterULower;

int letterAUpper = myString.Split('A').Length - 1;
vowelCount += letterAUpper;

int letterEUpper = myString.Split('E').Length - 1;
vowelCount += letterEUpper;

int letterIUpper = myString.Split('I').Length - 1;
vowelCount += letterIUpper;

int letterOUpper = myString.Split('O').Length - 1;
vowelCount += letterOUpper;

int letterUUpper = myString.Split('U').Length - 1;
vowelCount += letterUUpper;

Console.WriteLine("There are {0} vowels used.", vowelCount);
Console.ReadLine(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T01:31:39.557

我知道这不是一个很好的问题答案，但我无法抗拒一个班轮！

```
inputString.ToLower().Count(s=>"aeiou".Contains(s)); //count the vowels 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T00:21:20.213

这是一个简单的解决方案：

```
string str = Console.ReadLine();
string low_str = str.ToLower();
Console.Clear();
Console.WriteLine("Thank you.  The sentence you entered was: \n\"{0}\"", str);
Console.WriteLine("This sentence is {0} characters long.", str.Length);

int vowelCount = 0;
int eCount = 0;

for (int i = 0; i < low_str.Length; i++)
{
    switch(low_str[i])
    {
        case 'e': eCount ++; vowelCount++; break;
        case 'a': vowelCount++; break;
        case 'o': vowelCount++; break;
        case 'i': vowelCount++; break;
        case 'u': vowelCount++; break;
        case 'y': vowelCount++; break;
    }
}

Console.WriteLine("It contains {0} instances of the letter \'e\'.", eCount);
Console.WriteLine("There are {0} vowels used.", vowelCount);
Console.ReadLine(); 
```

请注意，使用此方法可以在更少的行中完成此操作（不是最好的方法，但我们不要深入了解框架细节 :)）：

```
int eCount = low_str.split(new char[]{'e'}) - 1;
int vowelCount = low_str.split(new char[]{'a','e','o','i','u','y'}) - 1; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T00:22:50.963

像这样的东西（伪代码，不是实际的 C#）？

```
foreach (c in mySentence)
{
  c = LowerCase(c);
  switch (c) {
    case 'a' :
    case 'e' :
    case 'i' :
    case 'o' :
    case 'u' :
      nVowels ++;
      break;
    case ' ' :
    case '\t' :
      nBlanks++;
      break;
    default :
      nChars++
      break;
  } 
```

这里有更多信息：

*   [http://msdn.microsoft.com/en-us/library/06tc147t%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/06tc147t%28v=vs.80%29.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-18T00:38:46.133

我个人会用 foreach 和一个数组或元音来做。这种方式很容易扩展，如下所示：

```
Char[] vowels = {'e', 'a', 'o', 'i', 'u', 'y'};
string str = Console.ReadLine();
string low_str = str.ToLower();
Console.Clear();
Console.WriteLine("Thank you.  The sentence you entered was: \n\"{0}\"", str);
Console.WriteLine("This sentence is {0} characters long.", str.Length);

int vowelCount = 0;
int eCount = 0;

foreach (char chara in low_str)
{
    foreach (char vowel in vowels)
    if (vowel == chara)
        vowelCount++;
    if (chara == 'e')
        eCount++;
}

Console.WriteLine("It contains {0} instances of the letter \'e\'.", eCount);
Console.WriteLine("There are {0} vowels used.", vowelCount);
Console.ReadLine(); 
```

# ios - 给定电影的 URL，如何检索它的信息？

> ID：11075795
> 
> 赞同：3
> 
> 时间：2012-06-18T00:14:25.237
> 
> 标签：ios, movie, duration

在 iOS 下，我需要获取用于进行移动的编解码器（H.264、MJPEG 等）、电影的宽度和高度、文件大小以及电影中的帧数。我尝试将 AVAsset 用于电影持续时间等，但持续时间始终为零。宽度/高度相同。我也尝试使用电影播放器​​控制器，但这也不起作用（见下面的代码）。这些文档有点令人困惑，并且有多种到达同一个地方的方式，你似乎无法到达同一个地方。

有没有人让上述信息正常工作？我确定我遗漏了一些东西，但我希望获得示例代码和/或指针？

编辑：我添加了一个更好的代码示例。但是，仍然存在一些问题。如何获取电影的创建日期、用于压缩它的编解码器以及电影的文件大小？有人想出这些吗？

谢谢

```
- (IBAction)getMovieInfo 
{
    int         hours = 0, minutes = 0, seconds = 0;

    NSURL* sourceMovieURL = [NSURL URLWithString:@"http://trailers.apple.com/movies/summit/stepuprevolution/stepuprevolution-tlr1_h480p.mov"];
    AVURLAsset* movieAsset = [AVURLAsset URLAssetWithURL:sourceMovieURL options:nil];

    NSArray *tracks = [movieAsset tracksWithMediaType:AVMediaTypeVideo];

    if ([tracks count] != 0) {
        AVAssetTrack *videoTrack = [tracks objectAtIndex:0];

        NSTimeInterval      durationSeconds = CMTimeGetSeconds([movieAsset duration]);
        CGSize              videoSize = videoTrack.naturalSize;

        //
        // Let's get the movie's meta data
        //

        // Start with the duration of the movie
        hours = durationSeconds / 3600;
        minutes = durationSeconds / 60;
        seconds = (int)durationSeconds % 60;
        durationLabel.text = [NSString stringWithFormat:@"%d:%d:%d", hours, minutes, seconds];

        // Next is the creation (posting) date of the movie
        //postedLabel.text = AVMetadataQuickTimeUserDataKeyCreationDate;

        //The resolution of the movie
        resolutionLabel.text = [NSString stringWithFormat:@"%g x %g", videoSize.width, videoSize.height];

        // The frame rate of the movie
        rateLabel.text = [NSString stringWithFormat:@"%g fps", [videoTrack nominalFrameRate]];

        // The frame count of the movie
        countLabel.text = [NSString stringWithFormat:@"%g", [videoTrack nominalFrameRate] * durationSeconds];

        // Get the codec used to compress the movie

        // And lastly, let's generate a thumbnail of the movie
        AVAssetImageGenerator *imageGenerator = [[AVAssetImageGenerator alloc] initWithAsset:movieAsset];

        if (imageGenerator != NULL) {

            CMTime      thumbPoint = CMTimeMakeWithSeconds(15.0, 600);
            NSError     *error = nil;

            CGImageRef thumbnail = [imageGenerator copyCGImageAtTime:thumbPoint actualTime:nil error:&error];

            if (thumbnail != NULL) {
                // Convert CGImage thumbnail to UIImage and then scale it.
                UIImage *tempImage = [[UIImage alloc] initWithCGImage:thumbnail];

                if (tempImage != NULL) {
                    // Let's scale the image and put the it into the imageview.                
                    self.thumbDisplay.image=[self scaleAndRotateImage:tempImage];

                    CGImageRelease(thumbnail);
                }
            }
        }
    }
}

- (UIImage *)scaleAndRotateImage:(UIImage *)image {

    CGImageRef  imgRef = image.CGImage;

    CGFloat     width = 135.0;
    CGFloat     height = 75.0;

    CGAffineTransform transform = CGAffineTransformIdentity;
    CGRect bounds = CGRectMake(0, 0, width, height);

    CGFloat scaleRatio = bounds.size.width / width;
    CGSize imageSize = CGSizeMake(CGImageGetWidth(imgRef), CGImageGetHeight(imgRef));
    CGFloat boundHeight;
    UIImageOrientation orient = image.imageOrientation;

    switch (orient) {

        case UIImageOrientationUp: //EXIF = 1
            transform = CGAffineTransformIdentity;
            break;

        case UIImageOrientationUpMirrored: //EXIF = 2
            transform = CGAffineTransformMakeTranslation(imageSize.width, 0.0);
            transform = CGAffineTransformScale(transform, -1.0, 1.0);
            break;

        case UIImageOrientationDown: //EXIF = 3
            transform = CGAffineTransformMakeTranslation(imageSize.width, imageSize.height);
            transform = CGAffineTransformRotate(transform, M_PI);
            break;

        case UIImageOrientationDownMirrored: //EXIF = 4
            transform = CGAffineTransformMakeTranslation(0.0, imageSize.height);
            transform = CGAffineTransformScale(transform, 1.0, -1.0);
            break;

        case UIImageOrientationLeftMirrored: //EXIF = 5
            boundHeight = bounds.size.height;
            bounds.size.height = bounds.size.width;
            bounds.size.width = boundHeight;
            transform = CGAffineTransformMakeTranslation(imageSize.height, imageSize.width);
            transform = CGAffineTransformScale(transform, -1.0, 1.0);
            transform = CGAffineTransformRotate(transform, 3.0 * M_PI / 2.0);
            break;

        case UIImageOrientationLeft: //EXIF = 6
            boundHeight = bounds.size.height;
            bounds.size.height = bounds.size.width;
            bounds.size.width = boundHeight;
            transform = CGAffineTransformMakeTranslation(0.0, imageSize.width);
            transform = CGAffineTransformRotate(transform, 3.0 * M_PI / 2.0);
            break;

        case UIImageOrientationRightMirrored: //EXIF = 7
            boundHeight = bounds.size.height;
            bounds.size.height = bounds.size.width;
            bounds.size.width = boundHeight;
            transform = CGAffineTransformMakeScale(-1.0, 1.0);
            transform = CGAffineTransformRotate(transform, M_PI / 2.0);
            break;

        case UIImageOrientationRight: //EXIF = 8
            boundHeight = bounds.size.height;
            bounds.size.height = bounds.size.width;
            bounds.size.width = boundHeight;
            transform = CGAffineTransformMakeTranslation(imageSize.height, 0.0);
            transform = CGAffineTransformRotate(transform, M_PI / 2.0);
            break;

        default:
            [NSException raise:NSInternalInconsistencyException format:@"Invalid image orientation"];

    }

    UIGraphicsBeginImageContext(bounds.size);
    CGContextRef context = UIGraphicsGetCurrentContext();

    if (orient == UIImageOrientationRight || orient == UIImageOrientationLeft) {
        CGContextScaleCTM(context, -scaleRatio, scaleRatio);
        CGContextTranslateCTM(context, -height, 0);
    } else {
        CGContextScaleCTM(context, scaleRatio, -scaleRatio);
        CGContextTranslateCTM(context, 0, -height);
    }

    CGContextConcatCTM(context, transform);

    CGContextDrawImage(UIGraphicsGetCurrentContext(), CGRectMake(0, 0, width, height), imgRef);
    UIImage *imageCopy = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return imageCopy;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-01T13:13:23.563

`NSURL`的方法`getResourceValue:forKey:error`允许您获取总字节数：

```
NSURL *fileUrl = [NSURL fileURLWithPath:filePath];
NSString *size = NULL;
[fileUrl getResourceValue:&size forKey:NSURLFileSizeKey error:nil];
NSLog(@"Bytes : %@",size); 
```

检查返回的任何错误是一种很好的做法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T16:30:15.167

尝试：

```
CMTime lengthTime = [movieAsset duration];
Float64 seconds = CMTimeGetSeconds(lengthTime);
NSLog(@"Asset is %g seconds long", seconds); 
```

# eclipse - 在eclipse中查看修改过的文件

> ID：11075797
> 
> 赞同：0
> 
> 时间：2012-06-18T00:14:57.503
> 
> 标签：eclipse

我正在向我的一个程序中添加一个简单的文件，当我使用特定参数运行程序时该文件会更新。

文件更新得很好，但它存储在 /bin 目录中，我不知道如何在编辑器中查看文件。

当我手动遍历 bin 文件夹并用记事本打开它时，我可以看到文件已更新。

有没有办法在编辑器中查看文件？

编辑：我已经在项目中有一个文件，但我没有更新，而是 bin 文件夹中的副本；我可以以某种方式将两者连接起来吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T18:23:19.587

`<project>/bin`正在从视图中过滤您的目录。右键单击您的项目，选择 Show In->Navigator 然后您应该能够看到您的 /bin 目录并双击您的文件以在编辑器中打开它。

或者，您可以使用`ctrl-shift-r`打开“打开资源”对话框，从三角形下拉菜单中选中“显示派生资源”，然后输入文件名。

该`/bin`目录由 Eclipse 构建器管理，因此如果您进行清理，您可能会丢失文件。我建议使用不同的目录来存放您的运行时文件。

# c - 如何从 C 创建 Cython cdef 公共类

> ID：11075798
> 
> 赞同：5
> 
> 时间：2012-06-18T00:15:04.617
> 
> 标签：c, cython

我有以下 test.pyx

```
cdef public class Foo[object Foo, type FooType]:  
   cdef public char* foo(self):  
       r = "Foo"  
       return r 
```

cython 将该代码编译为 test.h 和 test.c ，一切看起来都很好，但我不知道如何从 C 代码创建*Foo对象。*

即使我使用 Cython 函数创建它：

```
cdef public Foo create_Foo():
   return Foo() 
```

我不知道如何调用*foo*方法。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T16:01:45.203

我在 Cython 用户组中得到的答案：

方法可能不应该使用 Public，因为直接调用函数会破坏子类化。如果您需要从 C 中调用该方法，请为每个将对象作为额外参数的方法编写一个包装函数，然后调用该方法。例如

```
cdef char *foo_wrapper(Foo obj):
   return obj.foo() 
```

如果你有很多方法会很不方便，所以如果你一开始就可以控制 Foo 的设计，不要使用方法，而是使用函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T15:04:39.610

指定`create_ foo`为`def`或`cpdef`。`cdef`- ed 函数完全在 C 代码中转换，不会暴露给 Python 模块。

# regex - PowerShell 替换正则表达式

> ID：11075801
> 
> 赞同：4
> 
> 时间：2012-06-18T00:16:30.763
> 
> 标签：regex, powershell, replace

我有一个`select-string`正在搜索特定字符串的 IIS 日志并返回上面的 2 行和下面的一行。

结果如下所示：

```
2012-06-15 18:26:09 98.138.206.39 OutboundConnectionResponse SMTPSVC1 WEB10 - 25 - - 220+mta1083.sbc.mail.ne1.yahoo.com+ESMTP+YSmtp+service+ready 0 0 60 0 218 SMTP - - - -
2012-06-15 18:26:09 98.138.206.39 OutboundConnectionCommand SMTPSVC1 WEB10 - 25 EHLO - WEB10.DOMAIN>COM 0 0 4 0 218 SMTP - - - -
> 2012-06-15 18:26:09 74.125.244.10 OutboundConnectionResponse SMTPSVC1 WEB10 - 25 - - 550+IP+Authorization+check+failed+-+psmtp 0 0 41 0 218 SMTP - - - -
2012-06-15 18:26:09 74.125.244.10 OutboundConnectionCommand SMTPSVC1 WEB10 - 25 RSET - - 0 0 4 0 218 SMTP - - - - 
```

请注意，第三行以`>`表示`select-string`匹配的行开头。

我正在尝试`-replace`替换`>`它，`< font color="red">$1< /font>`但我的替换似乎不起作用。

这是我的代码：

```
$results = $results -replace "(^> )(.*)$", "< font color='red'>$1< font>" 
```

任何 PowerShell 正则表达式专家都可以告诉我为什么我的正则表达式不匹配吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T03:14:25.757

如果 $a 包含您的第三行的值，请尝试：

```
$a -replace '(^>)(.*)','font color="red">$2<font/>' 
```

两件事情 ：

1.  为您的 RegEx 使用单引号
2.  组的索引从 1 开始

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T08:47:40.143

您应该开始思考对象而不是文本，因为您看到的只是格式化的对象，而不是选择字符串的实际输出。而不是解析这个输出 - 使用你得到的对象（Get-Member 会让你发现它们）。

我想这应该做你需要的：

```
# Prepare test data...
$tring = @'
alfa
beta
gamma
delta
alfa
beta
alfa
beta
'@.Split("`n")

# Display results with actually matching line highlighted in red...
"<body>"
$tring | select-string 'delta' -Context 2,2 | foreach {
    $_.Context.PreContext
    "<font color='red'>$($_.Line)<font>"
    $_.Context.PostContext
}
"</body>" 
```

HTH 巴特克

# sqlite - 存储按时间顺序行的有效方法？

> ID：11075803
> 
> 赞同：0
> 
> 时间：2012-06-18T00:16:51.010
> 
> 标签：sqlite

我有一张这样的桌子：

```
CREATE TABLE IF NOT EXISTS grades(_id, timestamp, extra); 
```

我想在“时间戳”上创建一个索引，所以我正在做：

```
CREATE INDEX idx_timestamp ON grades(timestamp); 
```

我想根据时间戳一次选择 20 条记录，然后：

```
SELECT * FROM grades WHERE timestamp > 123 ORDER BY timestamp ASC LIMIT 20; 
```

那么，有没有更有效的方法可以定义“时间戳”列？我只是猜测将它指定为索引列是我们所能做的，并且为排序顺序指定“ASC”是一个无操作 - 或者我可以告诉 sqlite 首先存储按时间戳预排序的记录吗？

我基本上是在尝试实现一个分页系统，一次选择一个按时间顺序排列的 20 个项目的页面。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T00:25:31.513

这可以。它将使用索引进行排序，因此会提高速度。但是，根据您的操作，您可能需要缓存一些记录。

`SELECT * FROM grades WHERE timestamp > 123 ORDER BY timestamp ASC LIMIT 200;`

我们现在可以一次获得 200 个，但现在我们将让 javascript 或服务器处理分页。基本上，您将跟踪分页的位置，然后仅在需要时再次访问数据库。此外，通过对时间戳使用更有限的 WHERE 子句，它实际上非常快速和高效。比使用 LIMIT N,M 更好。

如果您执行第二个选项，您也可以缓存该查询，具体取决于它被命中的频率。所以，如果有多个人一直在查询某个东西，数据库会缓存它，它会很快回来，因为它已经在那里了。

# emacs - 创建小的只读非聚焦缓冲区

> ID：11075804
> 
> 赞同：1
> 
> 时间：2012-06-18T00:17:06.703
> 
> 标签：emacs, buffer

我在解释我需要什么时遇到问题，这就是为什么我找不到它（可能），但我会尽力而为。

我需要在模式行顶部的一行文本，有点像缓冲区中的页脚。它用于显示帮助，因此`with-electric-help`非常接近它，除了焦点存在问题（我可以将焦点移回原始窗口，但键绑定将是帮助缓冲区 - 不好）。

理想情况下，它只是位于模式行顶部的一行文本（不随缓冲区滚动）。

我只创建一个单独的缓冲区的问题：我不知道如何找出用户从以前显示“小缓冲区”的缓冲区中删除了焦点，所以我不知道什么时候隐藏它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T15:22:54.663

标题行听起来像它会做你想做的事。它与模式行基本相同，除了几乎没有人使用它并且它出现在窗口的顶部。

```
(setq header-line-format "some text") 
```

甚至更高级，您可以即时评估事物并设置面孔：

```
(setq header-line-format '(:eval (propertize (format "%d" (buffer-size)) 'face 'modeline-inactive))) 
```

# php - php mvc原则设计

> ID：11075809
> 
> 赞同：0
> 
> 时间：2012-06-18T00:18:31.143
> 
> 标签：php, model-view-controller, dojo, doctrine, doctrine-orm

我有一个关于自定义 mvc 框架的问题。我对如何实现模型部分有点困惑。我在想，既然学说实体将成为我的模型，那么我可以在我的文件结构中创建另一个名为 models 的文件夹，在这个模型文件夹中，我将拥有执行 crud 功能的单个文件。我尝试做自己的框架的原因是我打算在前端使用 dojo mvc。

例如我的模型文件夹看起来像：

模型 --> 用户记录器博客

并在里面说用户对我的一些代码进行分类：

```
class Users{

    public function getUsers(){ 

          $users = $this->em->getRepository('entities\Users')->findAll();
          echo // the data from 
    } 

    // also there will be setUsers, etc...      
} 
```

谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T15:10:10.787

在 MVC 的模型中（至少在[*我的*](https://stackoverflow.com/a/5864000/727208)理解中），Doctrine 应该只处理*Domain Objects*的信息存储和检索。

而且，根据您实际实现前端部分的方式，您可能在模型层上有一个非常薄的接口（这就是视图和控制器提供的），它基本上只提供 REST API。

您可能感兴趣的材料：

*   [图形用户界面架构](http://martinfowler.com/eaaDev/uiArchs.html)
*   [坚实的原则](http://en.wikipedia.org/wiki/SOLID_(object-oriented_design))
*   [得墨忒耳法则](http://c2.com/cgi/wiki?LawOfDemeter)

..添加了最后两个，因为您的代码位感觉有点不对劲。

# python - 在python中使用循环检查日期时间？

> ID：11075810
> 
> 赞同：0
> 
> 时间：2012-06-18T00:18:40.073
> 
> 标签：python, datetime, date, loops, for-loop

我正在编写一个程序，该程序使用从文件中收集信息以稍后输出，我现在的问题是测试给定的信息。我想测试用户输入的代码是否与文件中的日期相同。使用的文件包含格式为 YYYY、MM、DD 的日期和销售额。我正在尝试使用 for 循环针对用户输入测试文件的每一行，但我收到 datetime.date 不可迭代的错误。任何解决方案/替代方案？这是代码，

```
from datetime import date

def DateTest(Date, Position):

    firstTry = True
    validSyntax = False
    if validSyntax == False:

        if firstTry == True:
            try:
                Date = Date.strip().split(',')
                Year = int(Date[0])
                Month = int(Date[1])
                Day = int(Date[2])
                Date = date(Year, Month, Day)
            except:
                print "That is invalid input."
                firstTry = False
            else:
                validSyntax = True

        elif firstTry == False:
            Date = raw_input("Please input the desired %s date in the form YYYY,MM,DD: " % Position)
            try :
                Date = startDate.strip().split(',')
                Year = int(Date[0])
                Month = int(Date[1])
                Day = int(Date[2])
                Date = date(Year, Month, Day)
            except:
                print "That is invalid input."
            else:
                validSyntax = True
                print" ok got it"

        if validSyntax == True:
            for line in Date:
                line = line.strip().split(',')
                yearTest = int(line[0])
                monthTest = int(line[1])
                dayTest = int(line[2])
                dateTest = date(yearTest, monthTest, dayTest)
                if dateTest == Date:
                    "print debug"
startDate = raw_input("Please input the desired start date: ")
start = "start"
Response = DateTest(startDate, start) 
```

如您所见，我测试有效输入，然后测试文件中的日期，这告诉我 datetime 不可迭代。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T01:33:39.040

使用 strptime 它将清理您的代码。

```
>>> s = "1994,05,24"
>>> datetime_obj = datetime.datetime.strptime(s, "%Y,%m,%d")
>>> datetime_obj
datetime.datetime(1994, 5, 24, 0, 0) 
```

请注意，它为您提供了一个 datetime 对象，如果您只想要可以调用 .date() 的日期。

```
>>> date_obj = datetime_obj.date() 
```

如果要遍历文件，则需要有一个文件对象或文件名才能转换为文件对象。如果您的文件格式是 csv，则 csv 模块可能会有所帮助，但如果文件只是日期列表，那么您可能不需要它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T00:30:03.660

目前，如果我在 for 循环之前放置一个 print 语句：

```
if validSyntax == True:
        print Date
        for line in Date:
            ... 
```

它打印出来：

```
1995-06-24 
```

这不是一个列表，因此不可迭代。

您在此处将其从列表转换为日期对象：

```
Date = date(Year, Month, Day) 
```

如果删除此行，它将保留为列表而不是日期类型。

# python - WxPython & 符号的使用

> ID：11075811
> 
> 赞同：3
> 
> 时间：2012-06-18T00:19:27.750
> 
> 标签：python, wxpython

在 wxPython 中使用 & 符号有什么意义？我几乎在所有教程中都看到了它。例如，他们使用：

```
 menubar.Append(fileMenu, '&File') 
```

代替：

```
 menubar.Append(fileMenu, 'File') 
```

有什么不同？我应该总是使用 & 符号来命名吗？

顺便说一句，我从这个著名的 wxPython 教程中找到了这些示例：http: [//zetcode.com/wxpython/menustoolbars/](http://zetcode.com/wxpython/menustoolbars/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T01:04:50.597

和号是定义一个快捷键。在您的第一个示例中（即“&File”），您可以使用“Ctrl-F”访问“文件”菜单项

# python - 使用包含的相互引用的 XSD 解析 WSDL

> ID：11075817
> 
> 赞同：2
> 
> 时间：2012-06-18T00:21:04.637
> 
> 标签：python, soap, wsdl, suds

我正在尝试使用[suds 0.4 版](https://fedorahosted.org/suds/)和 python 2.7.1 版来访问肥皂 api，但是在尝试创建[Client](http://jortel.fedorapeople.org/suds/doc/suds.client.Client-class.html)对象时遇到错误。最简单的形式是这样的：

```
from suds.client import Client

url = 'http://tool-sb-api.hescloud.net/session/wsdl'
c = Client(url, cache=None) 
```

产生的错误是：

```
suds.TypeNotFound: Type not found: '(retrieveSessionByIdResponse, http://hes.lbl.gov/scoring_tool/session, )' 
```

我已经按照[记录的方法使用](https://fedorahosted.org/suds/wiki/Documentation#FIXINGBROKENSCHEMAs)[ImportDoctor](http://jortel.fedorapeople.org/suds/doc/suds.xsd.doctor.ImportDoctor-class.html)尝试了一些变体，但我得到了同样的错误。

在检查 WSDL 和来自 suds 的调试消息后，它似乎有一个包含列表

```
<definitions xmlns="http://schemas.xmlsoap.org/wsdl/" xmlns:tns="http://hes.lbl.gov/scoring_tool/session" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap-enc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" name="HesAPI_Session" targetNamespace="http://hes.lbl.gov/scoring_tool/session">
    <types>
        <xsd:schema targetNamespace="http://hes.lbl.gov/scoring_tool/session">
            <xsd:include schemaLocation="http://tool-sb-api.hescloud.net/public/xsd/session/input/newSessionFromAddress.xsd"/>
            <xsd:include schemaLocation="http://tool-sb-api.hescloud.net/public/xsd/session/output/newSessionFromAddressResponse.xsd"/>
            <xsd:include schemaLocation="http://tool-sb-api.hescloud.net/public/xsd/session/input/newLabelSession.xsd"/>
            ... 
```

相互引用。这是一个执行此操作的示例 xsd ( [newSessionFromAddressResponse.xsd](http://tool-sb-api.hescloud.net/public/xsd/session/output/newSessionFromAddressResponse.xsd) )。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsd:schema targetNamespace="http://hes.lbl.gov/scoring_tool/session" elementFormDefault="qualified" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:tns="http://hes.lbl.gov/scoring_tool/session">
    <xsd:element name="newSessionFromAddressResponse">
    <xsd:complexType>
        <xsd:sequence>
        <xsd:element name="returnCode" type="xsd:int"/>
        <xsd:element name="returnComment" type="xsd:string"/>
        <xsd:element name="readOnly" type="xsd:string"/>
        <xsd:element ref="tns:AddressList"/>

        <!-- RetrieveSessionByIdResponse is defined in retrieveSessionByIdResponse.xsd. In the event of an error, we won't have a retrieveSessionByIdResponse, hence minOccurs=0 -->
        <xsd:element ref="tns:retrieveSessionByIdResponse" minOccurs="0" maxOccurs="1"/>

        </xsd:sequence>
    </xsd:complexType>
    </xsd:element>

    <xsd:element name="AddressList">
    <xsd:complexType>
        <xsd:sequence>
        <xsd:element name="address" type="xsd:string"/>
        <xsd:element name="city" type="xsd:string"/>
        <xsd:element name="state" type="xsd:string"/>
        <xsd:element name="zipcode" type="xsd:string"/>
        </xsd:sequence>
    </xsd:complexType>
    </xsd:element>

</xsd:schema> 
```

suds 似乎有问题

```
<xsd:element ref="tns:retrieveSessionByIdResponse" minOccurs="0" maxOccurs="1"/> 
```

在不同的文件中定义。

我不确定此 WSDL 是否遵循[WSI-BP 1.0](http://www.ws-i.org/profiles/BasicProfile-1.0-2004-04-16.html)作为此 API 声明的管理者，或者问题是否在于 suds 无法正确处理“ref”属性。

无论哪种方式，我都会对成功创建的 suds Client 对象感到满意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T03:50:56.813

我通过创建[DocumentPlugin](http://jortel.fedorapeople.org/suds/doc/suds.plugin.DocumentPlugin-class.html)解决了这个问题，以便在解析之前将 xsd 文件的内容直接加载到文档中。

我必须重写[加载](http://jortel.fedorapeople.org/suds/doc/suds.plugin.DocumentPlugin-class.html#loaded)的函数并使用[minidom](http://docs.python.org/library/xml.dom.minidom.html)来完成（尽管任何 xml 库都可以工作）。我无法覆盖该`parsed`函数，因为我无法轻松创建 suds[元素](http://jortel.fedorapeople.org/suds/doc/suds.sax.element.Element-class.html)（它需要一个`options`包含可能超出范围的信息的变量）。

suds 在[此处](https://fedorahosted.org/suds/wiki/Documentation#DocumentPlugin)记录了 DocumentPlugin 的创建。

# javascript - 如何在 getElementsByClassName 中获取当前元素

> ID：11075819
> 
> 赞同：12
> 
> 时间：2012-06-18T00:21:30.387
> 
> 标签：javascript, dom-events, getelementsbyclassname, unobtrusive-javascript

考虑一个简单的 JS 事件

```
document.getElementsByClassName('test')[0].onclick=function(){
document.getElementsByClassName('test')[0].innerHTML = 'New Text';
} 
```

如何将此代码扩展为通常适用于所有带有`class="test"`. 我的意思是让元素被点击并替换它的内容。实际上，我们需要从点击事件中获取节点号（括号内提供）。

我试图在不显眼的代码中更好地理解 Javascript，而不是像 jQuery 这样的实用方法。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-18T00:26:58.013

只需遍历它们：

```
var elements = document.getElementsByClassName('test');

for (var i = 0; i < elements.length; i++) {
    elements[i].addEventListener('click', (function(i) {
        return function() {
            this.innerHTML = 'New Text';
        };
    })(i), false);
}​ 
```

我使用`(function(i) { return function() { ... }; })(i)`而不是仅仅`function() { ... }`因为如果您碰巧`i`在回调中使用，则值`i`将在`elements.length - 1`您调用它时出现。要修复它，您必须隐藏`i`并使其本质上按值传递。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-18T00:24:56.327

只需`this`在函数内部使用。`this`将是触发事件的元素。

```
(function() {
    var elms = document.getElementsByClassName("test"),
        l = elms.length, i;
    for( i=0; i<l; i++) {
        (function(i) {
            elms[i].onclick = function() {
                this.innerHTML = "New Text";
            };
        })(i);
    }
})(); 
```

它比 jQuery 的要复杂一些：

```
$(".test").click(function() {
    $(this).html("New Text");
}); 
```

但是如果没有 jQuery 添加的臃肿，它会明显更快；）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-18T00:24:37.480

```
var all = document.getElementsByClassName('test');
for(var i=0;i<all.length;i++)
    all[i].onclick=function(){
        this.innerHTML = 'New Text';
    } 
```

但最推荐使用 addEventListener （或 attachEvent，在 IE/Opera 的某些版本中，我猜）：

```
var all = document.getElementsByClassName('test');
for(var i=0;i<all.length;i++)
    all[i].addEventListener('click',function(){//If you're gonna use attachEvent, use 'onclick' instead of 'click'
        this.innerHTML = 'New Text';
    }}); 
```

# eclipse - Scala-IDE：如何在 Eclipse 中编译和执行多个源代码文件？

> ID：11075822
> 
> 赞同：0
> 
> 时间：2012-06-18T00:21:58.793
> 
> 标签：eclipse, scala, compilation, scala-ide, scala-2.9

我正在阅读 Martin Odersky 的*Programming in Scala*，到目前为止我一直在使用 vi 和命令行进行编译。我想学习使用 Eclipse 和 Scala-IDE 插件，但是对在 Eclipse 中编译和执行多个源代码文件缺乏基本的了解。

我的IDE如下：

*   Ubuntu 12.04
*   日食 3.7.2
*   斯卡拉插件 2.0.1
*   斯卡拉库 2.9.2

我正在使用第 4 章中的校验和示例进行练习。源代码如下：

**清单 4.1 和 4.2 / ChecksumAccumulator.scala**：

```
class ChecksumAccumulator {
    private var sum = 0
    def add(b: Byte) { sum += b }
    def checksum(): Int = ~(sum & 0xFF) + 1
}

import scala.collection.mutable.Map

object ChecksumAccumulator {

    private val cache = Map[String, Int]()

    def calculate(s: String): Int = 
        if (cache.contains(s))
            cache(s)
        else {
            val acc = new ChecksumAccumulator
            for (c <- s)
                acc.add(c.toByte)
            val cs = acc.checksum()
            cache += (s -> cs)
            cs
        }
} 
```

**清单 4.3 / Summer.scala：**

```
import ChecksumAccumulator.calculate

object Summer {
    def main(args: Array[String]) {
        for (arg <- args)
            println(arg + ": " + calculate(arg))
    }
} 
```

我可以`scalac Summer.scala ChecksumAccumulator.scala`在命令行中编译这些类。然后我可以使用命令行执行目标代码`scala Summer of love`，它返回“of”和“love”的校验和结果（分别为 -213 和 -182）。

我将如何使用 Eclipse 而不是命令行构建目标代码，以及如何`Summer`通过 Eclipse 调用目标代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T13:25:11.963

在 Eclipse 中，您可以创建一个新的 Scala 项目，并将源文件放在那里。一旦文件是同一个项目的一部分，就不需要做任何特别的事情：

只需单击运行 >> 运行方式 >> Scala 应用程序（或按 Alt + Shift + X、S）

玩得开心学习 Scala :)

# python - 给定相同 ID 的实体

> ID：11075824
> 
> 赞同：-2
> 
> 时间：2012-06-18T00:22:16.717
> 
> 标签：python, google-app-engine

我突然看到错误，到目前为止我只能通过创建具有相同 ID/键的实体的数据存储来解释。这似乎（我希望是疯狂的）这与一个实体组相关联。

它开始发生在大约 90 分钟前，当时我们获得的点击次数/秒 (12) 比我见过的要多，所以这很可能与第二个实例旋转有关 - 仪表板没有显示但是，第二个例子。

还有人看到什么奇怪的东西吗？如果是这样，请让我知道，以免我试图弄清楚我的代码如何因多个实例而失败。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T08:19:40.173

很可能您将数字[ID](https://developers.google.com/appengine/docs/python/datastore/modelclass#Model_get_by_id)与键的字符串表示形式混淆了。在您的数据存储中，每个实体的密钥始终是唯一的，但对于 ID 来说并不相同。他们不能保证会是一样的。同样对于相同的类型，如果它们是父级的，那么它只保证对于具有相同父级而不是模型类型级别的实体是唯一的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T05:37:29.297

我的问题最终归结于发布包含会话 ID 的链接的用户。单击该链接的其他用户获得了相同的会话，因此他们都使用了该会话中 ID 引用的相同实体。我正在添加逻辑，因此如果引用者不是我的站点，则会忽略显示的会话 ID。

所以答案是我没有从数据存储中获得重复的 ID。如果其他人认为这会在将来导致他们的错误，那么您可能错了（尽管请确保您了解有关不同实体类型和育儿的评论）。

# opengl - 设置 GLEW + 代码块

> ID：11075829
> 
> 赞同：1
> 
> 时间：2012-06-18T00:23:20.620
> 
> 标签：opengl, codeblocks, glew

我想让 GLEW 与 CodeBlocks 一起工作，并且一直在尝试让[网站](http://glew.sourceforge.net/install.html)
上提供的第一个方法起作用。 这是将glew静态编译成可执行文件的方法。但我没能把它弄好。 我在运行 CodeBlocks 10.05 的 PC 上，Windows 7。

这是我到目前为止所做的：

*   下载 GLEW 1.7.0
*   解压到 C：
*   在 CodeBlocks 中创建空项目
*   将 glew.h、wglew.h 和 glew.c 移到我的项目源目录中
*   将所有三个文件添加到项目中
*   将 glew.c 中 glew.h 和 wglew.h 的包含路径从

    ```
    #include <GL/glew.h> 
    #include <GL/wglew.h> 
    ```

    至

    ```
    #include "glew.h"
    #include "wglew.h" 
    ```

*   使用以下代码创建了一个简单的主文件

    ```
    #define GLEW_STATIC
    #include "glew.h"

    int main() {
        glewInit();
        return 0;
    } 
    ```

有了这个编译将导致大量的警告和错误。

*   错误如：

    ```
    glew.c|2933|undefined reference to `wglGetProcAddress@4'|
    glew.c|2934|undefined reference to `wglGetProcAddress@4'|
    glew.c|2935|undefined reference to `wglGetProcAddress@4'|
    glew.c|2936|undefined reference to `wglGetProcAddress@4'| 
    ```

*   警告，例如：

    ```
    glew.c|10050|warning: '__wglewReleaseVideoCaptureDeviceNV' redeclared without dllimport attribute: previous dllimport ignored|
    glew.c|10052|warning: '__wglewBindVideoImageNV' redeclared without dllimport attribute: previous dllimport ignored|
    glew.c|10053|warning: '__wglewGetVideoDeviceNV' redeclared without dllimport attribute: previous dllimport ignored|
    glew.c|10054|warning: '__wglewGetVideoInfoNV' redeclared without dllimport attribute: previous dllimport ignored|
    glew.c|10055|warning: '__wglewReleaseVideoDeviceNV' redeclared without dllimport attribute: previous dllimport ignored| 
    ```

我哪里做错了？
如有必要，我很乐意分享更多信息！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T14:56:23.610

您可以通过在 glew.c 中`opengl32`定义 s 之前将您的程序与这些警告链接起来来消除这些错误。`GLEW_STATIC``#include`

在任何情况下，您的程序都无法运行，因为您需要有一个有效的 OpenGL 上下文才能使用`glewInit`. 您需要使用 glut/glfw/SDL/wglCreateContext/etc 创建一个。

# java - 在 apache camel 中为单独的路由实现线程

> ID：11075830
> 
> 赞同：-1
> 
> 时间：2012-06-18T00:23:37.327
> 
> 标签：java, apache-camel

我想为 apache camel 中的每个路由实现一个不同的线程。我不想使用线程池或异步，因为我希望我的进程保持同步。我能否获得一个 Java DSL 格式的代码示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T15:50:36.387

您可以使用[camel-direct](http://camel.apache.org/direct.html)来获得单线程的同步请求/响应路由...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T04:04:48.510

每个路由都使用自己的线程，除非路由正在使用直接组件（http://camel.apache.org/direct），它将重新使用调用者线程。

例如有 2 条路线

```
from("file:foo").to("bean:blah");
from("jms:queue:bar").to("bean:great") 
```

是2条路线，每条路线都使用自己的线程。

另一方面，以下两条路线

```
from("file:foo").to("bean:blah").to("direct:bar");
from("direct:bar").to("bean:great") 
```

然后第二个路由是一个直接端点，将重新使用来自第一个路由的调用者线程，当第一个路由将消息路由到它时，使用：.to("direct:bar")

# amazon-ec2 - 创建映像后 EC2 实例停止工作

> ID：11075831
> 
> 赞同：1
> 
> 时间：2012-06-18T00:23:46.833
> 
> 标签：amazon-ec2, amazon-web-services, phpmyadmin, amazon-ami

我对 AWS 完全陌生。我设法拥有一个运行 PHPMyAdmin 的实例。然后我为此瞬间创建了一个图像（EBS AMI），并且无法再连接到我的 phpmyadmin 界面。

我知道这真的很愚蠢，但我不知道为什么会这样。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T06:49:48.030

确保在启动时启动服务器上所有需要的服务（例如 ssh、Apache / nginx、MySQL）。如果您创建系统的 AMI，AWS 将在创建映像时关闭您的服务器。

因此，SSH 进入您的实例，[查看正在运行的进程](http://www.cyberciti.biz/faq/show-all-running-processes-in-linux/)并启动您错过的进程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T04:17:44.380

如果您从 AWS 控制台获取图像，所有服务将停止并重新启动服务器以创建要创建的图像。但是，您需要重新启动所有服务，例如：mysql、apache 等。

# random - L'Ecuyer 在 CUDA C 中的 MRG32k3a 随机数生成器？

> ID：11075833
> 
> 赞同：-1
> 
> 时间：2012-06-18T00:23:59.917
> 
> 标签：random, cuda, prng

我在实现这一点时遇到了麻烦。我想在 gpu 集群上运行一些蒙特卡罗模拟，并需要随机数生成器为其工作。我想打印生成的随机数。有人可以举个例子解释一下吗？我在 unix 工作。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T00:47:18.563

[它从带有cuRAND 库](http://developer.nvidia.com/curand)的 CUDA 4.1 开始可用。

# php - WordPress：自定义查询

> ID：11075839
> 
> 赞同：2
> 
> 时间：2012-06-18T00:25:06.267
> 
> 标签：php, wordpress, pagination, array-merge

我有一个使用数组合并的自定义查询，因此我可以在一个列表中列出文章和自定义帖子类型的帖子，一次显示 5 个。下面的分页允许用户查看其余结果。我不断收到分页错误，但我几乎尝试了查询中 $paged 变量的所有变体以使分页工作，但它没有。我知道是我，可能是一个简单的语法问题……但我很难过。有任何想法吗？（注意：这个页面有多个，上面有问题的其他自定义查询）

这是我的代码：

```
<?php
$loop1 = array_merge( $wp_query->query, 
                      array( 'post_type' => array('post','podcasts', 'cat' => $cat_ID ), 
                             'paged' => ( get_query_var('page') ? get_query_var('page') : 1 ), 
                             'posts_per_page' => 5 ) ); 
query_posts( $loop1 );
while (have_posts()) : the_post(); ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T16:04:22.457

你有没有尝试过？

```
'paged' => ( get_query_var('paged') ? get_query_var('paged') : 1 ), 
```

# php - 隐藏 HTTP 引用的 301 重定向

> ID：11075840
> 
> 赞同：1
> 
> 时间：2012-06-18T00:25:17.687
> 
> 标签：php, javascript, redirect, google-analytics

我怎样才能有一个自定义的自制短 URL，它执行 301 重定向并隐藏引用站点。基本上，短 URL 是一个简单的 html 文件，其中包含一个位链接。目前，我在 html 文件中使用以下代码来解决问题

```
 <script language="javascript">
      location.replace("http://bit.ly/xxxxxxxxx")
   </script> 
```

但是，我发现发布商所报告的内容与 bitly 所报告的点击次数之间存在大量差异。我希望通过执行 301 重定向来避免这种差异。

关于这一点，是否有一个免费的源缩短 url 服务可以在隐藏 HTTP 引用时执行 301？我在 GitHub 上四处看了看，到目前为止我看过的那些都没有提供这样的功能。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T00:33:43.297

客户为推荐人发送什么取决于它，而不是你。您对此无能为力。

看到这篇文章： [https ://stackoverflow.com/a/1398318/362536](https://stackoverflow.com/a/1398318/362536)

事实证明，HTTP 的 RFC 没有说明客户端应该如何处理引用标头，因此看到混合结果并不奇怪。

# c# - 实体上下文不更新数据库

> ID：11075842
> 
> 赞同：2
> 
> 时间：2012-06-18T00:25:30.490
> 
> 标签：c#, entity-framework, entity

不知何故，我的实体数据上下文没有更新数据库。在.Net框架中，我做了以下事情：

1.  像这里一样创建实体模型：http: [//msdn.microsoft.com/en-us/library/bb399739](http://msdn.microsoft.com/en-us/library/bb399739(v=vs.90) (v=vs.90 )，表 = 名为“Level”的实体。

2.  在代码中为此模型添加了新上下文：

    ```
    Main_dataBaseEntities context;
    //...
    context = new Main_dataBaseEntities; 
    ```

3.  添加了具有 Path 属性的“Level”实体的新对象：

    ```
    var z = new Level {Path = "zPath"};
    context.Level.AddObject(z); 
    ```

4.  保存的更改：

    ```
    context.SaveChanges(); 
    ```

数据库表什么也没显示..我怎样才能添加新项目？））

我的Entity框架基于数据库创建的Entity类如下：

```
//------------------------------------------------------------------------------
// <auto-generated>
//    This code was generated from a template.
//
//    Manual changes to this file may cause unexpected behavior in your application.
//    Manual changes to this file will be overwritten if the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

using System;
using System.Data.Objects;
using System.Data.Objects.DataClasses;
using System.Data.EntityClient;
using System.ComponentModel;
using System.Xml.Serialization;
using System.Runtime.Serialization;

[assembly: EdmSchemaAttribute()]
#region EDM Relationship Metadata

[assembly: EdmRelationshipAttribute("Main_dataBaseModel", "FK_Terminals_Brokers", "Broker", System.Data.Metadata.Edm.RelationshipMultiplicity.ZeroOrOne, typeof(trust_manager_v_1._0.Broker), "Terminal", System.Data.Metadata.Edm.RelationshipMultiplicity.Many, typeof(trust_manager_v_1._0.Terminal), true)]
[assembly: EdmRelationshipAttribute("Main_dataBaseModel", "FK_Clients_Terminals", "Terminal", System.Data.Metadata.Edm.RelationshipMultiplicity.ZeroOrOne, typeof(trust_manager_v_1._0.Terminal), "Client", System.Data.Metadata.Edm.RelationshipMultiplicity.Many, typeof(trust_manager_v_1._0.Client), true)]
[assembly: EdmRelationshipAttribute("Main_dataBaseModel", "FK_ClientsTickers_Clients", "Client", System.Data.Metadata.Edm.RelationshipMultiplicity.ZeroOrOne, typeof(trust_manager_v_1._0.Client), "ClientTicker", System.Data.Metadata.Edm.RelationshipMultiplicity.Many, typeof(trust_manager_v_1._0.ClientTicker), true)]
[assembly: EdmRelationshipAttribute("Main_dataBaseModel", "FK_Risks_Clients", "Client", System.Data.Metadata.Edm.RelationshipMultiplicity.ZeroOrOne, typeof(trust_manager_v_1._0.Client), "Risk", System.Data.Metadata.Edm.RelationshipMultiplicity.Many, typeof(trust_manager_v_1._0.Risk), true)]
[assembly: EdmRelationshipAttribute("Main_dataBaseModel", "FK_ClientsTickers_Tickers", "Ticker", System.Data.Metadata.Edm.RelationshipMultiplicity.ZeroOrOne, typeof(trust_manager_v_1._0.Ticker), "ClientTicker", System.Data.Metadata.Edm.RelationshipMultiplicity.Many, typeof(trust_manager_v_1._0.ClientTicker), true)]
[assembly: EdmRelationshipAttribute("Main_dataBaseModel", "FK_Tickers_Currencies", "Currency", System.Data.Metadata.Edm.RelationshipMultiplicity.ZeroOrOne, typeof(trust_manager_v_1._0.Currency), "Ticker", System.Data.Metadata.Edm.RelationshipMultiplicity.Many, typeof(trust_manager_v_1._0.Ticker), true)]
[assembly: EdmRelationshipAttribute("Main_dataBaseModel", "FK_Levels_Strategies", "Strategy", System.Data.Metadata.Edm.RelationshipMultiplicity.ZeroOrOne, typeof(trust_manager_v_1._0.Strategy), "Level", System.Data.Metadata.Edm.RelationshipMultiplicity.Many, typeof(trust_manager_v_1._0.Level), true)]
[assembly: EdmRelationshipAttribute("Main_dataBaseModel", "FK_Levels_Tickers", "Ticker", System.Data.Metadata.Edm.RelationshipMultiplicity.ZeroOrOne, typeof(trust_manager_v_1._0.Ticker), "Level", System.Data.Metadata.Edm.RelationshipMultiplicity.Many, typeof(trust_manager_v_1._0.Level), true)]
[assembly: EdmRelationshipAttribute("Main_dataBaseModel", "FK_Transactions_Levels", "Level", System.Data.Metadata.Edm.RelationshipMultiplicity.ZeroOrOne, typeof(trust_manager_v_1._0.Level), "Transaction", System.Data.Metadata.Edm.RelationshipMultiplicity.Many, typeof(trust_manager_v_1._0.Transaction), true)]
[assembly: EdmRelationshipAttribute("Main_dataBaseModel", "FK_Risks_Strategies", "Strategy", System.Data.Metadata.Edm.RelationshipMultiplicity.ZeroOrOne, typeof(trust_manager_v_1._0.Strategy), "Risk", System.Data.Metadata.Edm.RelationshipMultiplicity.Many, typeof(trust_manager_v_1._0.Risk), true)]
[assembly: EdmRelationshipAttribute("Main_dataBaseModel", "FK_Risks_Tickers", "Ticker", System.Data.Metadata.Edm.RelationshipMultiplicity.ZeroOrOne, typeof(trust_manager_v_1._0.Ticker), "Risk", System.Data.Metadata.Edm.RelationshipMultiplicity.Many, typeof(trust_manager_v_1._0.Risk), true)]
[assembly: EdmRelationshipAttribute("Main_dataBaseModel", "FK_Transaction_Risk", "Risk", System.Data.Metadata.Edm.RelationshipMultiplicity.ZeroOrOne, typeof(trust_manager_v_1._0.Risk), "Transaction", System.Data.Metadata.Edm.RelationshipMultiplicity.Many, typeof(trust_manager_v_1._0.Transaction), true)]
[assembly: EdmRelationshipAttribute("Main_dataBaseModel", "FK_Transactions_Statuses", "Status", System.Data.Metadata.Edm.RelationshipMultiplicity.ZeroOrOne, typeof(trust_manager_v_1._0.Status), "Transaction", System.Data.Metadata.Edm.RelationshipMultiplicity.Many, typeof(trust_manager_v_1._0.Transaction), true)]
[assembly: EdmRelationshipAttribute("Main_dataBaseModel", "FK_Terminals_TerminalTypes", "TerminalType", System.Data.Metadata.Edm.RelationshipMultiplicity.ZeroOrOne, typeof(trust_manager_v_1._0.TerminalType), "Terminal", System.Data.Metadata.Edm.RelationshipMultiplicity.Many, typeof(trust_manager_v_1._0.Terminal), true)]

#endregion

namespace trust_manager_v_1._0
{
    #region Contexts

    /// <summary>
    /// No Metadata Documentation available.
    /// </summary>
    public partial class Main_dataBaseEntities : ObjectContext
    {
        #region Constructors

        /// <summary>
        /// Initializes a new Main_dataBaseEntities object using the connection string found in the 'Main_dataBaseEntities' section of the application configuration file.
        /// </summary>
        public Main_dataBaseEntities() : base("name=Main_dataBaseEntities", "Main_dataBaseEntities")
        {
            this.ContextOptions.LazyLoadingEnabled = true;
            OnContextCreated();
        }

        /// <summary>
        /// Initialize a new Main_dataBaseEntities object.
        /// </summary>
        public Main_dataBaseEntities(string connectionString) : base(connectionString, "Main_dataBaseEntities")
        {
            this.ContextOptions.LazyLoadingEnabled = true;
            OnContextCreated();
        }

        /// <summary>
        /// Initialize a new Main_dataBaseEntities object.
        /// </summary>
        public Main_dataBaseEntities(EntityConnection connection) : base(connection, "Main_dataBaseEntities")
        {
            this.ContextOptions.LazyLoadingEnabled = true;
            OnContextCreated();
        }

        #endregion

        #region Partial Methods

        partial void OnContextCreated();

        #endregion

        #region ObjectSet Properties

        /// <summary>
        /// No Metadata Documentation available.
        /// </summary>
        public ObjectSet<Broker> Broker
        {
            get
            {
                if ((_Broker == null))
                {
                    _Broker = base.CreateObjectSet<Broker>("Broker");
                }
                return _Broker;
            }
        }
        private ObjectSet<Broker> _Broker;

        /// <summary>
        /// No Metadata Documentation available.
        /// </summary>
        public ObjectSet<Client> Client
        {
            get
            {
                if ((_Client == null))
                {
                    _Client = base.CreateObjectSet<Client>("Client");
                }
                return _Client;
            }
        }
        private ObjectSet<Client> _Client;

        /// <summary>
        /// No Metadata Documentation available.
        /// </summary>
        public ObjectSet<ClientTicker> ClientTicker
        {
            get
            {
                if ((_ClientTicker == null))
                {
                    _ClientTicker = base.CreateObjectSet<ClientTicker>("ClientTicker");
                }
                return _ClientTicker;
            }
        }
        private ObjectSet<ClientTicker> _ClientTicker;

        /// <summary>
        /// No Metadata Documentation available.
        /// </summary>
        public ObjectSet<Currency> Currency
        {
            get
            {
                if ((_Currency == null))
                {
                    _Currency = base.CreateObjectSet<Currency>("Currency");
                }
                return _Currency;
            }
        }
        private ObjectSet<Currency> _Currency;

        /// <summary>
        /// No Metadata Documentation available.
        /// </summary>
        public ObjectSet<Level> Level
        {
            get
            {
                if ((_Level == null))
                {
                    _Level = base.CreateObjectSet<Level>("Level");
                }
                return _Level;
            }
        }
        private ObjectSet<Level> _Level;

        /// <summary>
        /// No Metadata Documentation available.
        /// </summary>
        public ObjectSet<Risk> Risk
        {
            get
            {
                if ((_Risk == null))
                {
                    _Risk = base.CreateObjectSet<Risk>("Risk");
                }
                return _Risk;
            }
        }
        private ObjectSet<Risk> _Risk;

        /// <summary>
        /// No Metadata Documentation available.
        /// </summary>
        public ObjectSet<Status> Status
        {
            get
            {
                if ((_Status == null))
                {
                    _Status = base.CreateObjectSet<Status>("Status");
                }
                return _Status;
            }
        }
        private ObjectSet<Status> _Status;

        /// <summary>
        /// No Metadata Documentation available.
        /// </summary>
        public ObjectSet<Strategy> Strategy
        {
            get
            {
                if ((_Strategy == null))
                {
                    _Strategy = base.CreateObjectSet<Strategy>("Strategy");
                }
                return _Strategy;
            }
        }
        private ObjectSet<Strategy> _Strategy;

        /// <summary>
        /// No Metadata Documentation available.
        /// </summary>
        public ObjectSet<sysdiagrams> sysdiagrams
        {
            get
            {
                if ((_sysdiagrams == null))
                {
                    _sysdiagrams = base.CreateObjectSet<sysdiagrams>("sysdiagrams");
                }
                return _sysdiagrams;
            }
        }
        private ObjectSet<sysdiagrams> _sysdiagrams;

        /// <summary>
        /// No Metadata Documentation available.
        /// </summary>
        public ObjectSet<Terminal> Terminal
        {
            get
            {
                if ((_Terminal == null))
                {
                    _Terminal = base.CreateObjectSet<Terminal>("Terminal");
                }
                return _Terminal;
            }
        }
        private ObjectSet<Terminal> _Terminal;

        /// <summary>
        /// No Metadata Documentation available.
        /// </summary>
        public ObjectSet<TerminalType> TerminalType
        {
            get
            {
                if ((_TerminalType == null))
                {
                    _TerminalType = base.CreateObjectSet<TerminalType>("TerminalType");
                }
                return _TerminalType;
            }
        }
        private ObjectSet<TerminalType> _TerminalType;

        /// <summary>
        /// No Metadata Documentation available.
        /// </summary>
        public ObjectSet<Ticker> Ticker
        {
            get
            {
                if ((_Ticker == null))
                {
                    _Ticker = base.CreateObjectSet<Ticker>("Ticker");
                }
                return _Ticker;
            }
        }
        private ObjectSet<Ticker> _Ticker;

        /// <summary>
        /// No Metadata Documentation available.
        /// </summary>
        public ObjectSet<Transaction> Transaction
        {
            get
            {
                if ((_Transaction == null))
                {
                    _Transaction = base.CreateObjectSet<Transaction>("Transaction");
                }
                return _Transaction;
            }
        }
        private ObjectSet<Transaction> _Transaction;

        #endregion
        #region AddTo Methods

        /// <summary>
        /// Deprecated Method for adding a new object to the Broker EntitySet. Consider using the .Add method of the associated ObjectSet&lt;T&gt; property instead.
        /// </summary>
        public void AddToBroker(Broker broker)
        {
            base.AddObject("Broker", broker);
        }

        /// <summary>
        /// Deprecated Method for adding a new object to the Client EntitySet. Consider using the .Add method of the associated ObjectSet&lt;T&gt; property instead.
        /// </summary>
        public void AddToClient(Client client)
        {
            base.AddObject("Client", client);
        }

        /// <summary>
        /// Deprecated Method for adding a new object to the ClientTicker EntitySet. Consider using the .Add method of the associated ObjectSet&lt;T&gt; property instead.
        /// </summary>
        public void AddToClientTicker(ClientTicker clientTicker)
        {
            base.AddObject("ClientTicker", clientTicker);
        }

        /// <summary>
        /// Deprecated Method for adding a new object to the Currency EntitySet. Consider using the .Add method of the associated ObjectSet&lt;T&gt; property instead.
        /// </summary>
        public void AddToCurrency(Currency currency)
        {
            base.AddObject("Currency", currency);
        }

        /// <summary>
        /// Deprecated Method for adding a new object to the Level EntitySet. Consider using the .Add method of the associated ObjectSet&lt;T&gt; property instead.
        /// </summary>
        public void AddToLevel(Level level)
        {
            base.AddObject("Level", level);
        }

        /// <summary>
        /// Deprecated Method for adding a new object to the Risk EntitySet. Consider using the .Add method of the associated ObjectSet&lt;T&gt; property instead.
        /// </summary>
        public void AddToRisk(Risk risk)
        {
            base.AddObject("Risk", risk);
        }

        /// <summary>
        /// Deprecated Method for adding a new object to the Status EntitySet. Consider using the .Add method of the associated ObjectSet&lt;T&gt; property instead.
        /// </summary>
        public void AddToStatus(Status status)
        {
            base.AddObject("Status", status);
        }

        /// <summary>
        /// Deprecated Method for adding a new object to the Strategy EntitySet. Consider using the .Add method of the associated ObjectSet&lt;T&gt; property instead.
        /// </summary>
        public void AddToStrategy(Strategy strategy)
        {
            base.AddObject("Strategy", strategy);
        }

        /// <summary>
        /// Deprecated Method for adding a new object to the sysdiagrams EntitySet. Consider using the .Add method of the associated ObjectSet&lt;T&gt; property instead.
        /// </summary>
        public void AddTosysdiagrams(sysdiagrams sysdiagrams)
        {
            base.AddObject("sysdiagrams", sysdiagrams);
        }

        /// <summary>
        /// Deprecated Method for adding a new object to the Terminal EntitySet. Consider using the .Add method of the associated ObjectSet&lt;T&gt; property instead.
        /// </summary>
        public void AddToTerminal(Terminal terminal)
        {
            base.AddObject("Terminal", terminal);
        }

        /// <summary>
        /// Deprecated Method for adding a new object to the TerminalType EntitySet. Consider using the .Add method of the associated ObjectSet&lt;T&gt; property instead.
        /// </summary>
        public void AddToTerminalType(TerminalType terminalType)
        {
            base.AddObject("TerminalType", terminalType);
        }

        /// <summary>
        /// Deprecated Method for adding a new object to the Ticker EntitySet. Consider using the .Add method of the associated ObjectSet&lt;T&gt; property instead.
        /// </summary>
        public void AddToTicker(Ticker ticker)
        {
            base.AddObject("Ticker", ticker);
        }

        /// <summary>
        /// Deprecated Method for adding a new object to the Transaction EntitySet. Consider using the .Add method of the associated ObjectSet&lt;T&gt; property instead.
        /// </summary>
        public void AddToTransaction(Transaction transaction)
        {
            base.AddObject("Transaction", transaction);
        }

        #endregion
    }

    #endregion

    #region Entities

    /// <summary>
    /// No Metadata Documentation available.
    /// </summary>
    [EdmEntityTypeAttribute(NamespaceName="Main_dataBaseModel", Name="Broker")]
    [Serializable()]
    [DataContractAttribute(IsReference=true)]
    public partial class Broker : EntityObject
    {
        #region Factory Method

        /// <summary>
        /// Create a new Broker object.
        /// </summary>
        /// <param name="id">Initial value of the ID property.</param>
        public static Broker CreateBroker(global::System.Guid id)
        {
            Broker broker = new Broker();
            broker.ID = id;
            return broker;
        }

        #endregion
        #region Primitive Properties

        /// <summary>
        /// No Metadata Documentation available.
        /// </summary>
        [EdmScalarPropertyAttribute(EntityKeyProperty=true, IsNullable=false)]
        [DataMemberAttribute()]
        public global::System.Guid ID
        {
            get
            {
                return _ID;
            }
            set
            {
                if (_ID != value)
                {
                    OnIDChanging(value);
                    ReportPropertyChanging("ID");
                    _ID = StructuralObject.SetValidValue(value);
                    ReportPropertyChanged("ID");
                    OnIDChanged();
                }
            }
        }
        private global::System.Guid _ID;
        partial void OnIDChanging(global::System.Guid value);
        partial void OnIDChanged();

        /// <summary>
        /// No Metadata Documentation available.
        /// </summary>
        [EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=true)]
        [DataMemberAttribute()]
        public global::System.String Name
        {
            get
            {
                return _Name;
            }
            set
            {
                OnNameChanging(value);
                ReportPropertyChanging("Name");
                _Name = StructuralObject.SetValidValue(value, true);
                ReportPropertyChanged("Name");
                OnNameChanged();
            }
        }
        private global::System.String _Name;
        partial void OnNameChanging(global::System.String value);
        partial void OnNameChanged();

        #endregion

        #region Navigation Properties

        /// <summary>
        /// No Metadata Documentation available.
        /// </summary>
        [XmlIgnoreAttribute()]
        [SoapIgnoreAttribute()]
        [DataMemberAttribute()]
        [EdmRelationshipNavigationPropertyAttribute("Main_dataBaseModel", "FK_Terminals_Brokers", "Terminal")]
        public EntityCollection<Terminal> Terminal
        {
            get
            {
                return ((IEntityWithRelationships)this).RelationshipManager.GetRelatedCollection<Terminal>("Main_dataBaseModel.FK_Terminals_Brokers", "Terminal");
            }
            set
            {
                if ((value != null))
                {
                    ((IEntityWithRelationships)this).RelationshipManager.InitializeRelatedCollection<Terminal>("Main_dataBaseModel.FK_Terminals_Brokers", "Terminal", value);
                }
            }
        }

        #endregion
    }

    /// <summary>
    /// No Metadata Documentation available.
    /// </summary>
    [EdmEntityTypeAttribute(NamespaceName="Main_dataBaseModel", Name="Client")]
    [Serializable()]
    [DataContractAttribute(IsReference=true)]
    public partial class Client : EntityObject
    {
        #region Factory Method

        /// <summary>
        /// Create a new Client object.
        /// </summary>
        /// <param name="id">Initial value of the ID property.</param>
        public static Client CreateClient(global::System.Guid id)
        {
            Client client = new Client();
            client.ID = id;
            return client;
        }

        #endregion
        #region Primitive Properties

        /// <summary>
        /// No Metadata Documentation available.
        /// </summary>
        [EdmScalarPropertyAttribute(EntityKeyProperty=true, IsNullable=false)]
        [DataMemberAttribute()]
        public global::System.Guid ID
        {
            get
            {
                return _ID;
            }
            set
            {
                if (_ID != value)
                {
                    OnIDChanging(value);
                    ReportPropertyChanging("ID");
                    _ID = StructuralObject.SetValidValue(value);
                    ReportPropertyChanged("ID");
                    OnIDChanged();
                }
            }
        }
        private global::System.Guid _ID;
        partial void OnIDChanging(global::System.Guid value);
        partial void OnIDChanged();

        /// <summary>
        /// No Metadata Documentation available.
        /// </summary>
        [EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=true)]
        [DataMemberAttribute()]
        public global::System.String Name
        {
            get
            {
                return _Name;
            }
            set
            {
                OnNameChanging(value);
                ReportPropertyChanging("Name");
                _Name = StructuralObject.SetValidValue(value, true);
                ReportPropertyChanged("Name");
                OnNameChanged();
            }
        }
        private global::System.String _Name;
        partial void OnNameChanging(global::System.String value);
        partial void OnNameChanged();

        /// <summary>
        /// No Metadata Documentation available.
        /// </summary>
        [EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=true)]
        [DataMemberAttribute()]
        public global::System.String Account
        {
            get
            {
                return _Account;
            }
            set
            {
                OnAccountChanging(value);
                ReportPropertyChanging("Account");
                _Account = StructuralObject.SetValidValue(value, true);
                ReportPropertyChanged("Account");
                OnAccountChanged();
            }
        }
        private global::System.String _Account;
        partial void OnAccountChanging(global::System.String value);
        partial void OnAccountChanged();

        /// <summary>
        /// No Metadata Documentation available.
        /// </summary>
        [EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=true)]
        [DataMemberAttribute()]
        public global::System.String Comment
        {
            get
            {
                return _Comment;
            }
            set
            {
                OnCommentChanging(value);
                ReportPropertyChanging("Comment");
                _Comment = StructuralObject.SetValidValue(value, true);
                ReportPropertyChanged("Comment");
                OnCommentChanged();
            }
        }
        private global::System.String _Comment;
        partial void OnCommentChanging(global::System.String value);
        partial void OnCommentChanged();

        /// <summary>
        /// No Metadata Documentation available.
        /// </summary>
        [EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=true)]
        [DataMemberAttribute()]
        public Nullable<global::System.Single> Assets
        {
            get
            {
                return _Assets;
            }
            set
            {
                OnAssetsChanging(value);
                ReportPropertyChanging("Assets");
                _Assets = StructuralObject.SetValidValue(value);
                ReportPropertyChanged("Assets");
                OnAssetsChanged();
            }
        }
        private Nullable<global::System.Single> _Assets;
        partial void OnAssetsChanging(Nullable<global::System.Single> value);
        partial void OnAssetsChanged();

        /// <summary>
        /// No Metadata Documentation available.
        /// </summary>
        [EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=true)]
        [DataMemberAttribute()]
        public global::System.String Virtual_Assets
        {
            get
            {
                return _Virtual_Assets;
            }
            set
            {
                OnVirtual_AssetsChanging(value);
                ReportPropertyChanging("Virtual_Assets");
                _Virtual_Assets = StructuralObject.SetValidValue(value, true);
                ReportPropertyChanged("Virtual_Assets");
                OnVirtual_AssetsChanged();
            }
        }
        private global::System.String _Virtual_Assets;
        partial void OnVirtual_AssetsChanging(global::System.String value);
        partial void OnVirtual_AssetsChanged();

        /// <summary>
        /// No Metadata Documentation available.
        /// </summary>
        [EdmScalarPropertyAttri 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T01:34:46.327

你有没有尝试过？

```
context.Levels.Add(z);
context.SaveChanges(); 
```

如果这不起作用，请围绕上述操作包装异常处理程序并捕获引发的异常。

所以完整的代码将是：

```
using(var context = new Main_dataBaseEntities())
{
  try
  { 
      var z = new Level {Path = "zPath"};
      context.Levels.Add(z);
      context.SaveChanges();
  }
  catch(Exception ex)
  {
      //View or handle exception here
  }      
} 
```

您应该在生产代码中用更具体的异常替换上面的异常，但在这里查看导致您的问题的原因就足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T04:47:30.823

savechanges方法返回[处于](http://msdn.microsoft.com/de-de/library/bb336792.aspx)已添加、已修改或已删除状态的对象的数量，尝试调试并查看作为返回值得到的内容以及是否引发任何异常。我个人更喜欢数据库优先的方法。

```
int num = context.SaveChanges(); 
```

# javascript - 使用 __proto__ 的简单 javascript 委托

> ID：11075847
> 
> 赞同：4
> 
> 时间：2012-06-18T00:26:27.753
> 
> 标签：javascript, inheritance, prototype

我已经习惯了 Java，所以当我尝试这样的事情时：

```
function subSection(pattern){
    this.total = 0;
    this.pattern = pattern;
    this.distance=0;
}

function enhancer(pattern){
    __proto__:subSection;
    this.pattern = pattern;
}

function silencer(pattern){
    __proto__:subSection;
    this.pattern = pattern;
}

var a = new enhancer("aaa");
document.write(a.distance) 
```

我得到“未定义”。我以为我继承了总和距离数据成员

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T00:43:46.243

不要使用[`__proto__`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/Proto)，它是 Mozilla 的专有财产（被其他一些人复制）并且已被弃用。分配给 construtor.prototpye。

该行：

```
> __proto__:subSection; 
```

没有给任何东西分配任何东西，它是一个标签 ( `__proto__`)，后跟一个语句，该语句`subSection`是对未分配给任何东西的 subSection 函数的引用。

你好像不懂原型继承，试试 Douglas Crockford's [Prototypal Inheritance in JavaScript](http://javascript.crockford.com/prototypal.html)

以下可能类似于您正在尝试做的事情，这里肯定有一千个类似的问题：

```
function SubSection(pattern) {
    this.pattern = pattern;
    this.total = 0;
    this.distance=0;
}

// Add a method to subSection.prototype
SubSection.prototype.getDistance = function() {
  return this.distance;
}

function Enhancer(pattern) {
    this.pattern = pattern;
}

// To make enhancer inherit from subSection, make its prototype
// an instance of subSection
Enhancer.prototype = new SubSection();

var a = new Enhancer("aaa");

document.write(a.getDistance()); // 0 
```

哦，按照惯例，构造函数名称以大写字母开头。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T00:44:58.987

```
function subSection(pattern){
    this.total = 0;
    this.pattern = pattern;
    this.distance=100;
}

function enhancer(pattern){
    this.__proto__=new subSection(pattern);
}

function silencer(pattern){
    this.__proto__=new subSection(pattern);
}

var a = new enhancer("aaa");
document.write(a.distance)​; 
```

但正如所说，这只是 Mozilla 的专有财产`RobG`。

[**演示。**](http://jsfiddle.net/heera/ZEaXK/)

**更新：**

```
function subSection(pattern){
    this.total = 0;
    this.pattern = pattern;
    this.distance=100;
}

function enhancer(pattern){
    function F(){};
    F.prototype = new subSection(pattern); // inherited subSection
    return new F();    
}

function silencer(pattern){
    function F(){};
    F.prototype = new subSection(pattern); // inherited subSection
    return new F();
}

var a = new enhancer("aaa");
document.write(a.distance)​; 
```

[**演示。**](http://jsfiddle.net/heera/ZEaXK/1/)

**有用的链接：** [**这里**](http://helephant.com/2009/01/18/javascript-object-prototype/)和[**这里**](http://javascript.info/tutorial/inheritance)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T00:45:33.947

你应该为你的对象使用原型继承。我会采用您的增强器对象并像这样定义它：

```
 //create Enhancer object
function Enhancer(pattern){
    this.subSection(pattern);    
}

//extend Enhancer with object methods
Enhancer.prototype = {

   subSection: function(pattern){
         this.pattern = pattern;
         this.total = 0;        
         this.distance=0;
  }

}; 
```

所以这就是我在这段代码中要做的事情：

1.  我正在用一个函数定义 Enhancer 对象。请注意，我将“Enhancer”大写以表示此数据结构的“对象”。
2.  我将“模式”值传递给对象并使用它来调用 Enhancer.subSection(); 我可以调用 .subSection() 作为 Enhancer 对象的方法，因为我将它定义为使用 .prototype 的方法。

这是这种方法的一个工作[小提琴示例](http://jsfiddle.net/nickadeemus2002/5gcdr/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T03:20:58.647

一般来说，应该在构造函数中而不是在构造函数中定义对象的每个实例的属性，例如`total`和`distance`旨在被初始化为完全相同的值。`subSection``prototype`

对象`prototype`基本上是一个“模板”，该对象的每个实例都基于该模板。每个实例都有在`prototype`.

因此这三个“类”（JavaScript 没有像 Java 这样的经典继承语言中定义的类，但有时习惯这些语言的人更容易使用该术语）应该声明如下：

```
function subSection(pattern) {
    this.pattern = pattern;
}

function enhancer(pattern) {
    this.pattern = pattern;
}

function silencer(pattern) {
    this.pattern = pattern;
} 
```

移出构造函数并`total`进入`distance`原型：`subSection``subSection`

```
subSection.prototype.total = 0;
subSection.prototype.distance = 0; 
```

下一步是在 之间设置原型继承`subSection`，`enhancer`并`silencer`使用无操作函数作为它们之间的一种代理：

```
function fn() {}
fn.prototype = subSection.prototype;

enhancer.prototype = new fn();
silencer.prototype = new fn(); 
```

最后，将和原型的`constructor`属性设置为正确的对象，以便实例的属性引用正确的构造函数。如果我们不采取这一步，那么or的任何实例都会错误地引用构造函数。`enhancer``silencer``constructor``enhancer``silencer``subSection`

```
enhancer.prototype.constructor = enhancer;
silencer.prototype.constructor = silencer; 
```

现在我们可以实例化`enhancer`and`silencer`对象，生成的实例将具有`total`and`distance`属性以及`constructor`引用相应对象的属性。

```
var a, b;
a = new enhancer('aaaa');
b = new silencer('bbbb');
console.log(a.total + ', ' + a.distance); // 0, 0
console.log(b.total + ', ' + b.distance); // 0, 0
console.log(a.constructor); // (string representation of enhancer constructor) 
```

我们`fn`在继承过程中使用函数作为代理的原因是因为一个对象应该能够从另一个对象继承，而该对象不一定具有相同的构造函数参数集。

假设我们有以下两个构造函数：

```
function Person(name, age, hometown) {
    this.name = name;
    this.age = age;
    this.hometown = hometown;
}

function Employee(name, company, title) {
    this.name = name;
    this.company = company;
    this.title = title;
} 
```

`Employee``Person`即使它们不共享同一组构造函数参数，也应该能够继承自。如果我们简单地将`Employee.prototype`的新实例设置为相等，`Person`则`Employee`原型将具有三个未定义的属性`name`和。`age``hometown`

```
Employee.prototype = new Person; // name, age and hometown are undefined
var e = new Employee('John Smith', 'New York Times', 'editor'); // e's prototype has undefined properties name, age and hometown 
```

通过使用 no-op 函数`fn`（我们几乎可以将它命名为任何我们想要的名称），我们最终为每个实例都提供了一个干净的原型，因为`fn`作为构造函数不需要任何参数。

这不是必需的，但它是设置原型继承的一种更简洁的方法：没有太多理由将带有未定义属性的原型弄乱。

# c - C：遍历字符串数组

> ID：11075850
> 
> 赞同：3
> 
> 时间：2012-06-18T00:27:59.320
> 
> 标签：c

我目前正在学习 C 并且正在努力解决如何遍历字符串数组。
假设我定义了一个数组，如下所示：

```
char* argv_custom[] = {"--debug", "--verbose", "--test", "--ultimate"}; 
```

现在，我将如何确定 argv_custom 中的字符串数量？（例如 argc_custom）
我一开始是不是走对了这条路？另外，是否可以执行以下操作：

*伪代码*

```
if ('--debug' in argv_custom) { // do stuff } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-18T00:29:46.173

> 现在，我将如何确定 argv_custom 中的字符串数量？

[规范](http://c-faq.com/aryptr/arraynels.html)的方式：

```
int argc_custom = sizeof(argv_custom) / sizeof(argv_custom[0]); 
```

**注意：**这只**适用**于数组本身，一旦你有一个指针（例如如果你传递`argv_custom`给一个函数），它就不再起作用了：

```
char **p = argv_custom;
int argc_custom = sizeof(p) / sizeof(p[0]);  // No me gusta 
```

* * *

> 是否可以做类似的事情：...

没有捷径。您必须遍历每个字符串，然后执行`strcmp`. 当然，您可以（并且可能应该）将此行为包装到一个函数中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T00:29:46.833

你可以做到`sizeof(argv_custom)/sizeof(argv_custom[0])`。这计算数组的总长度除以每个元素的大小。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-05-18T07:35:12.757

我已经多次遇到这个问题，从我发现我最喜欢的解决方案是迭代指针直到`null`. `sizeof`一旦您开始使用函数并传递数组，就会停止工作。

这是我在作业中一次又一次使用的范例，它真的很有帮助。完全相同的东西可用于获取 a 的长度`cstring`或遍历其字符。

```
char* argv_custom[] = {"--debug", "--verbose", "--test", "--ultimate"};
char **temp = argv_custom;
int size = 0;
while (*temp) {
    ++size;
    ++temp;
} 
```

这不是首选 using `sizeof`，但是当您想循环访问它时，它是一种替代方法。

# extjs4 - Extjs 4 MVC 自定义参数来存储负载监听器

> ID：11075853
> 
> 赞同：1
> 
> 时间：2012-06-18T00:29:44.377
> 
> 标签：extjs4, extjs-mvc

在我的控制器内部，我有在用户单击项目后运行的函数，该函数加载存储并使用 DataView 创建/填充 TabPanel（它有效）。当用户仅单击一个指定项目（if 子句）时，我想拆分存储并创建 2 个具有 2 个 DataViews 的面板。如何将自定义参数（record.data.name）传递给存储侦听器，以便检查单击了哪个项目？或者也许有不同的方法来实现我想要的？这是我的控制器的代码：

```
init: function() {
    this.control({
        'gallery_menu': {
            itemclick: this.show_gallery
        }
    });
},
imageStoreLoaded: function(ImageStore, store1, store2) {

},
show_gallery: function(view, record, item, index, e, opts) {

    Ext.getCmp('hania-viewport').setLoading('Loading data...');

    var tabb = Ext.ComponentQuery.query('.gallery_panel');

    var ImageStore = Ext.create('Gallery.store.Images');

    ImageStore.load({url: 'myphoto/index.php/api/feed/json/' + record.data.uuid});

    var gallery_view;

    if (record.data.name == 'Specified_item1') {
        var store1 = Ext.create('Gallery.store.Images');
        var store2 = Ext.create('Gallery.store.Images');

        //THIS WONT WORK - STORE IS NOT LOADED YET;
        ImageStore.each(function(r) {
                if (r.data.name.substring(0, 2) == 'PS') {
                    console.log('PS');
                    store1.add(r.copy());
                }else{
                    console.log('NOT PS');
                    store2.add(r.copy());
                }               
        });

        //IF I ADD LISTENER HOW CAN I RETURN/REFERENCE store1, store2 ???
        //OR how can i pass record.data.name so i could check which item was clicked?   
        ImageStore.addListener('load',this.imageStoreLoaded, this);

        var panel1 = Ext.widget('gallery_view', {
            title: 'xxx',
            autoScroll: true,
            store: store1,
            flex: 1
        });

        var panel2 = Ext.widget('gallery_view', {
            title: 'yyy',
            autoScroll: true,
            store: store2,
            flex: 2
        });

        gallery_view = Ext.create('Ext.panel.Panel',{
            id: record.data.uuid,
            title: 'abc',
            layout: {                   
                type: 'hbox',
                pack: 'start',
                align: 'stretch'
            },
            closable: true,
            autoScroll: true,
            items: [panel1, panel2]
        });

    }else{

        gallery_view = Ext.widget('gallery_view', {
            title: record.data.name + ' - Photo Gallery',
            id: record.data.uuid,
            closable:true,
            scrollable:true,
            autoScroll: true,
            store: ImageStore
        });
    }

     if (tabb[0].down('#' + record.data.uuid)) {
        tabb[0].setActiveTab(record.data.uuid);
     }else{
        tabb[0].add(gallery_view);
        tabb[0].setActiveTab(gallery_view);
     };

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T05:11:11.700

```
And the code:

show_gallery: function(view, record, item, index, e, opts) {

    Ext.getCmp('hania-viewport').setLoading('Loading data...');

    var tabb = Ext.ComponentQuery.query('.gallery_panel');

    var ImageStore = Ext.create('Gallery.store.Images');

    ImageStore.load({url: 'myphoto/index.php/api/feed/json/' + record.data.uuid});

    var gallery_view;

    if (record.data.name == 'Do kogo jestem podobna?') {
        var store1 = Ext.create('Gallery.store.Images');
        var store2 = Ext.create('Gallery.store.Images');

        function doStuff() {

            console.log(ImageStore);

            ImageStore.each(function(r) {
                if (r.data.raw_name.substring(0, 2) == 'PS') {
                    console.log('PS');
                    store1.add(r.copy());
                }else{
                    console.log('NOT PS');
                    store2.add(r.copy());
                }               
            });

            console.log(store1); 
            console.log(store2);
        }

        ImageStore.addListener('load',doStuff, this);

        var view1 = Ext.widget('gallery_view', {
            title: 'xxx',
            store: store1,
            flex: 1
        });

        var panel1 = Ext.create('Ext.panel.Panel',{
            title: 'Tata',
            items: view1,
            flex: 1
        });

        var view2 = Ext.widget('gallery_view', {
            //autoScroll: true,
            store: store2,
            flex: 1
        });

        var panel2 = Ext.create('Ext.panel.Panel',{
            title: 'Mama',
            items: view2,
            flex: 1
        });

        gallery_view = Ext.create('Ext.panel.Panel',{
            id: record.data.uuid,
            title: 'Do kogo jestem podobna?',
            width: 800,
            bodyStyle: 'padding: 25px;',
            layout: {                   
                type: 'hbox',
                pack: 'start',
                align: 'stretch'
            },
            closable: true,
            autoScroll: true,
            items: [panel1, panel2]
        });

    }else{

        gallery_view = Ext.widget('gallery_view', {
            title: record.data.name + ' - Photo Gallery',
            id: record.data.uuid,
            closable:true,
            scrollable:true,
            autoScroll: true,
            store: ImageStore
        });
    }

     if (tabb[0].down('#' + record.data.uuid)) {
        tabb[0].setActiveTab(record.data.uuid);
     }else{
        tabb[0].add(gallery_view);
        tabb[0].setActiveTab(gallery_view);
     };

} 
```

# python - 在 Django 模型中检索列名

> ID：11075856
> 
> 赞同：2
> 
> 时间：2012-06-18T00:29:49.563
> 
> 标签：python, django

如何使用**Django**中的**模型检索****MySQL**中表的列的名称？

 ****如果我使用的是**MySQLdb API**。我可以使用以下方法完成它：

```
cur = connection.cursor()
for k in cur.description:
    print k[0] 
```

但我不想以上述方式这样做。

我在**models.py中定义了以下内容**

```
class Third(models.Model):
    studentname = models.CharField(max_length=90)
    rollnumber = models.CharField(max_length=30, primary_key=True)
    college = models.CharField(max_length=120) 
```

我的输出应该列出**“studentname”、“rollnumber”、“college”**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T00:43:37.237

列出“第三”模型类的字段：

```
for field in Third._meta.fields
  print field.name 
```****

# android - 为什么我的用于点的 openGL 着色器程序有条带伪影？

> ID：11075860
> 
> 赞同：6
> 
> 时间：2012-06-18T00:31:17.170
> 
> 标签：android, opengl-es, glsl, opengl-es-2.0, shader

对于每个点，我的 OpenGL 着色器程序都会创建一个红色环，在不透明和完全透明之间平滑过渡。我的着色器程序有效，但有条带伪影。

片段着色器如下。

```
#version 110

precision mediump float;

void main() {
 float dist = distance(gl_PointCoord.xy, vec2(0.5, 0.5));

 // Edge value is 0.5, it should be 1.
 // Inner most value is 0 it should stay 0.
 float inner_circle = 2.0 * dist;
 float circle = 1.0 - inner_circle;

 vec4 pixel = vec4(1.0, 0.0, 0.0, inner_circle * circle );

 gl_FragColor = pixel;
} 
```

这是我认为不是问题原因的不太有趣的顶点着色器。

```
#version 110

attribute vec2 aPosition;

uniform float uSize;
uniform vec2 uCamera;

void main() {
 // Square the view and map the top of the screen to 1 and the bottom to -1.

 gl_Position = vec4(aPosition, 0.0, 1.0); 
 gl_Position.x = gl_Position.x * uCamera.y / uCamera.x;

 // Set point size
 gl_PointSize = (uSize + 1.0) * 100.0;
} 
```

请帮我弄清楚，为什么我的 OpenGL 着色器程序有条带伪影？

PS 顺便说一句，这是针对 Android Acer Iconia 平板电脑的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T14:46:34.070

Android 的 GLSurfaceView 默认使用 RGB565 表面。启用抖动 ( `glEnable(GL_DITHER)`) 或安装自定义`EGLConfigChooser`以选择每通道 8 位的 RGBA 或 RGBX 表面配置。

# asp.net - ajax jQuery asp.net 错误 Unexpected token <

> ID：11075862
> 
> 赞同：2
> 
> 时间：2012-06-18T00:33:11.007
> 
> 标签：asp.net, ajax, web-services, jquery

我无法将 ajax 功能添加到现有的 asp.net 4 网站。我都尝试在 aspx 页面中创建 webmethod，也尝试过 asmx，但在这两种情况下我都会收到此错误`Unexpected token <`

这是我的 jQuery：

函数 postAssets(datapm) {

```
 $.ajax({
            type: "POST",
            timeout: 20000,
            tryCount: 0,
            retryLimit: 10,
            url: "talk.asmx/HelloWorld",
            data: "{}",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (msg) {
                console.log('success postAssets '+msg.d);
            },
            complete: function (jqXHR, status) {
                if (status == 'success' || status == 'notmodified') {

                    console.log('complete postAssets' + jqXHR.responseText);
                }
            },
            error: function (req, status, error) {

                console.log('error postAssets');
            }
        });
    } 
```

这就是 asmx 中的内容：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Services;

/// <summary>
/// Summary description for talk
/// </summary>
[WebService(Namespace = "http://tempuri.org/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
// To allow this Web Service to be called from script, using ASP.NET AJAX, uncomment the following line. 
// [System.Web.Script.Services.ScriptService]
public class talk : System.Web.Services.WebService {

    public talk () {

        //Uncomment the following line if using designed components 
        //InitializeComponent(); 
    }

    [WebMethod]
    public string HelloWorld() {
        return "Hello World";
    }

} 
```

我想知道我是否遗漏了任何 webconfig 项目，还是全部内置在 asp.net 4 中？

```
<configuration>
  <connectionStrings />
  <system.web>
    <compilation debug="true" targetFramework="4.0" />
    <machineKey validationKey="BA5B68AB87AAEA30753960733E796568" decryptionKey="FAF15E4015737A7695D9761" validation="SHA1" />
    <authentication mode="Windows" />
  </system.web>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true" />
  </system.webServer>
</configuration> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T00:42:41.867

您是返回 JSON 还是标记？您对 jQuery`ajax()`方法的调用需要 JSON，但是如果您返回以`<`字符开头的标记，那么我可以想象它会抛出该异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-02T04:06:06.737

我想问题是你声明你的 Ajax 类型，`POST`而在你的 ASP 控制器中你声明`HelloWorld()`为 WebMethods。这就是为什么您的 ajax 找不到您的 HelloWorld 函数的原因。

尝试删除这一行：

```
[WebMethods] 
```

看看这是否有效。

# java - ByteBuffer：写入，然后回到缓冲区的开头并在之前写入的所有数据之前写入（前置？）

> ID：11075865
> 
> 赞同：2
> 
> 时间：2012-06-18T00:34:19.093
> 
> 标签：java, nio, bytebuffer, prepend

我在使用*ByteBuffer*时还是有点犹豫。我想要做的是将数据写入 ByteBuffer，然后转到 ByteBuffer 的开头并在所有数据之前写入一个字节（写入数据包的有效负载，然后附加标头。）我该怎么做那？

图表：

缓冲区开始于：

```
|  PAYLOAD  | 
```

添加操作码标头后的缓冲区（在我想做的之后）：

```
|  HEADER  |  PAYLOAD  | 
```

该| 只是作为数据类型的分隔符，而不是任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T00:45:46.720

您要查找的内容称为“分散-收集 I/O”，它由`ScatteringByteChannel.read(ByteBuffer[])`和支持`GatheringByteChannel.write(ByteBuffer[])`。注意数组。这些接口由`FileChannel`、`SocketChannel`和`DatagramSocketChannel`和 管道通道支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T00:47:15.037

```
ByteBuffer bbuf = ByteBuffer.allocate(HEADER_SZ + PAYLOAD_SZ);
bbuf.position(HEADER_SZ);
for(int i=0; i < PAYLOAD_SZ; i++)
    bbuf.put(payload[i]);
bbuf.rewind();
for(int i=0; i < HEADER_SZ; i++)
    bbuf.put(header[i]); 
```

我已经假设对源数据进行字节索引。批量放置会更好，但这是一个开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-30T19:42:53.640

我要为这个问题添加另一个答案，因为我今天遇到了这个问题，并且接受的解决方案对我的情况没有太大帮助。

为了解决我的问题，我定义了一个`int`表示将`ByteBuffer`保存的数据量（以字节为单位），以及`Queue<Consumer<ByteBuffer>>`如下：

```
/**
 * An {@code int} representing the amount
 * of bytes that this {@link OutgoingPacket}
 * will send.
 */
private int size;

/**
 * A {@link Queue} that lazily writes data to the
 * backing {@link ByteBuffer}.
 */
private final Queue<Consumer<ByteBuffer>> queue = new ArrayDeque<>(); 
```

接下来，我创建了`putByte`,`putInt`等方法。

```
/**
 * Writes a single {@code byte} to this
 * {@link Packet}'s payload.
 *
 * @param b
 *      An {@code int} for ease-of-use,
 *      but internally down-casted to a
 *      {@code byte}.
 * @return
 *      The {@link Packet} to allow for
 *      chained writes.
 */
public OutgoingPacket putByte(int b) {
    size++;

    queue.offer(payload -> payload.put((byte) b));
    return this;
} 
```

最后，我创建了一个分配并传递相应数据的`send`方法。`ByteBuffer`

```
/**
 * Transmits this {@link OutgoingPacket} to
 * a specific client.
 *
 * @param channels
 *      A variable amount of {@link AsynchronousSocketChannel}s.
 *
 * TODO: Send to {@link Client} instead.
 */
public void send(AsynchronousSocketChannel... channels) {
    /*
     * Allocate a new buffer with the size of
     * the data being added, as well as an extra
     * two bytes to account for the opcode and the
     */
    ByteBuffer payload = ByteBuffer.allocate(size + 2);

    /*
     * Write the opcode to the buffer.
     */
    payload.put((byte) opcode);

    /*
     * Write the length to the buffer.
     */
    payload.put((byte) size);

    /*
     * Add the rest of the data to the buffer.
     */
    queue.forEach(consumer -> consumer.accept(payload));

    /*
     * Flip the buffer so the client can immediately
     * read it on arrival.
     */
    payload.flip();

    /*
     * Write the buffer to the channels.
     */
    for (AsynchronousSocketChannel channel : channels) {
        channel.write(payload);
    }
} 
```

希望这将为将来遇到此问题的人提供见解！

# jquery - 骨干点击事件中断

> ID：11075866
> 
> 赞同：1
> 
> 时间：2012-06-18T00:34:39.560
> 
> 标签：jquery, node.js, backbone.js, dom-events

我正在使用 Node 作为后端在 Backbone 中构建一个应用程序。作为应用程序的一部分，我正在处理我的视图上的点击事件。一个例子是这样的：

```
window.MyView = Backbone.View.extend({
   tagName: 'section',
   className: 'calls',

   events: {
      'click a.first': 'gotoFirst',
      'click a.prev': 'gotoPrev',
      'click a.next': 'gotoNext',
      'click a.last': 'gotoLast',
      'click a.page': 'gotoPage'
   }, 
```

当我第一次加载视图并单击时，一切正常（单击事件得到正常处理）。但是，如果我导航到新视图，然后返回到第一个视图，则单击事件会中断。

通过导航到新视图，我的意思是我执行以下操作：

```
$container.empty();    
$container.append(window.myNewView.render().el); 
```

然后我像这样回去：

```
$container.empty();
$container.append(window.myView.render().el); 
```

但是当我重新渲染视图时，我的点击事件被破坏了。我怎样才能解决这个问题？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T00:42:02.123

当您通过调用删除视图时，`.empty()`您正在中途破坏 DOM 事件。但是在重新显示视图时它们不会自动重新附加。

你必须跳过铁环才能重新连接它们。读这个：

[http://tbranyen.com/post/missing-jquery-events-while-rendering](http://tbranyen.com/post/missing-jquery-events-while-rendering)

更好的答案是不要重用视图实例。每次需要显示视图时创建一个新的视图实例。

# antlr - 向 ANTLR 语法添加异常处理

> ID：11075867
> 
> 赞同：3
> 
> 时间：2012-06-18T00:35:07.090
> 
> 标签：antlr

当我调用一个语法时，例如

```
interpret
 : (op ';')*
 ; 
```

是否可以添加类似的 throw 子句`throws SQLException`？每次我用 ANTLR 编译语法时，我的 Parser 都会抛出错误，因为我没有在具体方法中添加任何 throw 子句。

我问这是因为规则调用使用给定 SQL 数据库连接的方法，所以我必须添加声明。

```
public final void op() throws RecognitionException { 
```

我想添加`SQLException`并`ClassNotFoundException`自动构建 antlr 生成的文件（Lexer、Parser）。

问候，红线

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T08:34:48.010

在[ANTLR 参考手册](http://www.antlr.org/share/1084743321127/ANTLR_Reference_Manual.pdf)的第 24 页上，它说：

> 要指定您的解析器（或树解析器规则）可以抛出非 ANTLR 特定异常，请使用 exceptions 子句。例如，这是一个简单的解析器规范，其中包含抛出 MyException 的规则：

```
class P extends Parser;

a throws MyException
  : A
  ;

ANTLR generates the following for rule a:

public final void a() 
  throws RecognitionException,
         TokenStreamException,
         MyException
{
  try {
    match(A);
  }
  catch (RecognitionException ex) {
    reportError(ex);
    consume();
    consumeUntil(_tokenSet_0);
  }
} 
```

似乎这在早期版本中没有实现：[throwing non-antlr exceptions](http://antlr.1301665.n2.nabble.com/throwing-non-antlr-exceptions-td6264835.html) 幸运的是，在[ANTLR 3.4 Release Notes](http://www.antlr.org/wiki/display/ANTLR3/ANTLR+3.4+Release+Notes)中，它说：

> 为 Java 目标实现解析器规则的“throwsSpec”功能

试一试。

# iphone - 在 iOS 5 项目中放置 JSON 解析代码的合适位置在哪里？

> ID：11075870
> 
> 赞同：2
> 
> 时间：2012-06-18T00:36:10.847
> 
> 标签：iphone, ios, json

我是iOS开发的菜鸟。现在我有一个项目可以解析 Web 服务器上的 JSON 文件并在 iPhone 屏幕上显示内容。在教程中，解析代码都在视图控制器中。然而，在我的项目中，有四个或五个屏幕使用来自同一个 JSON 文件的内容。将所有解析代码放入一个单独的类中，使用类方法，并使用类方法来解析不同视图控制器中的内容，是不是更好的方法？还是使用协议解析 JSON 并在视图控制器中实现不同内容需求的协议更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T00:43:07.433

我建议将所有解析放到它自己的类中——这样代码不会被重新实现无数次，你只需分配类并为其提供一些数据，或者给它一个遵循特定协议的委托，并告诉委托在解析时找到的信息或者在`^{}`解析器完成时为解析器类提供一个要调用的块。看看 NSXMLParser，我觉得好像你在做类似的事情，但是 JSON 而不是 xml

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T00:43:47.060

您可以创建一个新类来解析和存储来自 JSON 的信息，并在不同的视图控制器之间共享该类。下载 JSON 可以在其他类中完成。不过，这只是总体思路。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T00:48:25.070

也许在“实用程序”组的自己的班级中？此外，如果您正在研究 JSON 解析，请务必检查[NSJSONSerialization 类](https://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html)

# java - 如何处理 Jetty 异常 - 长时间运行的 HTTP 请求超时，但它调用的进程永远不会终止并且 Jetty 不满意

> ID：11075873
> 
> 赞同：10
> 
> 时间：2012-06-18T00:37:07.377
> 
> 标签：java, asynchronous, jetty, continuations

我有一个处理长时间运行的 HTTP 请求的 Jetty 服务器 - 响应由不同的进程 X 生成，并最终出现在 Jetty 请求定期检查的收集器哈希中。

有3种情况：

1.  进程 X 在 HTTP 请求的超时期限之前完成 - 没问题
2.  进程 X 在请求的超时期限后完成 - 没问题
3.  进程 X 永远不会完成 - 发生以下异常

如何检测这种情况（3）并在允许其他两种情况正常工作的同时防止异常？

例外：

```
2012-06-18 00:13:31.055:WARN:oejut.QueuedThreadPool:
java.lang.IllegalStateException: IDLE,initial
    at org.eclipse.jetty.server.AsyncContinuation.complete(AsyncContinuation.java:569)
    at server.AsyncHTTPRequestProcessor.run(AsyncHTTPRequestProcessor.java:72)
    at org.eclipse.jetty.server.handler.ContextHandler.handle(ContextHandler.java:1119)
    at org.eclipse.jetty.server.AsyncContinuation$1.run(AsyncContinuation.java:875)
    at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:599)
    at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:534)
    at java.lang.Thread.run(Thread.java:679) 
```

一个 HTTP 请求的 Jetty 延续：

```
public class AsyncHTTPRequestProcessor implements Runnable {

    private ConcurrentHashMap<String, String> collector;
    private Logger logger;
    private AsyncContext ctx;
    //Defined this here because of strange behaviour when running junit
    //tests and the response json string being empty...
    private String responseStr = null;

    public AsyncHTTPRequestProcessor(AsyncContext _ctx, 
            ConcurrentHashMap<String, String> _collector, Logger _logger) {
        ctx = _ctx;
        collector = _collector;
        logger = _logger;
    }

    @Override
    public void run() {

        logger.info("AsyncContinuation start");

        //if(!((AsyncContinuation)ctx).isInitial()){
        String rid = (String) ctx.getRequest().getAttribute("rid");
        int elapsed = 0;
        if(rid !=null)
        {

            logger.info("AsyncContinuation rid="+rid);

            while(elapsed<ctx.getTimeout())
            {
                if(collector.containsKey(rid)){
                    responseStr = collector.get(rid);
                    collector.remove(rid);

                    logger.info("--->API http request in collector:"+responseStr);
                    ctx.getRequest().setAttribute("status",200);
                    ctx.getRequest().setAttribute("response", responseStr);
                    ctx.getRequest().setAttribute("endTime",System.currentTimeMillis());
                    //ctx.complete();
                    break;
                }
                try {
                    Thread.sleep(10);
                    elapsed+=10;
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
            }
            //}
            logger.info("Collector in async stuff:");
            for(String key:collector.keySet()){
                logger.info(key+"->"+collector.get(key));
            }

            for(Entry<String, String> x:collector.entrySet()){
                logger.info(x.getKey()+"->"+x.getValue());
            }
            ctx.complete(); <---- this line 72
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-27T09:38:03.743

这里的问题不是您对 AsyncContext#complete() 的调用，而是代码的整体设计。

Continuations（Servlet async 也是一样）被设计为**异步**的。使用内部延续超时的 while 循环不能在这里。通过这样做，您正在将异步设计转换为同步设计。正确的做法是使用 Continuation#addContinuationListener() 注册一个监听器并实现 onTimeout() 方法来适当地处理超时情况。

一旦超时逻辑结束，我建议将流程 X 逻辑移至 AsyncHTTPRequestProcessor 类，并不再需要使用收集器。在处理过程中，您应该假设当前线程永远不会超时。通过这样做，您对 complete() 的调用是有意义的，您将不会受到收集器上并发问题的影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-14T17:42:36.493

在这种情况下，使用 try catch 块可能会有所帮助。

```
 try{
      ctx.complete()
   } catch (IllegalStateException e){
      //Handle it the way you prefer.
   } 
```

# c++ - 将 3 名玩家映射到 4 人桌

> ID：11075875
> 
> 赞同：0
> 
> 时间：2012-06-18T00:37:23.560
> 
> 标签：c++

假设我有一张顺时针方向的桌子，如下所示：

```
 2
1      3
   0 
```

这在 4 人游戏中运行良好，但在 3 人游戏中，服务器看不到第四把椅子。因此，我必须将 3 个玩家（其中一个可能坐在座位 [3] 上）映射到由 3 个 [2] 元素组成的数组。

因此，如果玩家坐在 2、3、0 位置，则 2 映射到 0，3 映射到 1，0 映射到 2。如果座位是 1、3、0，它会映射 1 到 0、3 到 1，以及 0 到2.

如果我想要一个标准映射来做这件事，什么是一个好的算法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T00:49:19.650

假设您有一个有序的座位结构，并做出一些假设，因为您的实施细节尚不清楚：

```
std::map<int, int> clockwisePositionMap;
int counter = 0;
for (Seat s : seatList) {
    if(s.isOccupied()) {
        clockwisePositionMap.insert( pair<int, int>(seat.getNumber(), counter));
        counter++;
    }
} 
```

请注意，这与您的任何一个示例都不匹配；它总是给予 0 第一优先级，但如果这是一个问题，您可以根据需要更改 for 循环。

# concurrency - Go 中生产者/消费者最简洁的成语是什么？

> ID：11075876
> 
> 赞同：14
> 
> 时间：2012-06-18T00:38:35.167
> 
> 标签：concurrency, go

我想做的是拥有一组生产者 goroutine（其中一些可能完成也可能不完成）和一个消费者例程。问题在于括号中的警告 - 我们不知道将返回答案的总数。

所以我想做的是：

```
package main

import (
  "fmt"
  "math/rand"
)

func producer(c chan int) {
  // May or may not produce.
  success := rand.Float32() > 0.5
  if success {
    c <- rand.Int()
  }
}

func main() {
  c := make(chan int, 10)
  for i := 0; i < 10; i++ {
    go producer(c, signal)
  }

  // If we include a close, then that's WRONG. Chan will be closed
  // but a producer will try to write to it. Runtime error.
  close(c)

  // If we don't close, then that's WRONG. All goroutines will
  // deadlock, since the range keyword will look for a close.
  for num := range c {
    fmt.Printf("Producer produced: %d\n", num)
  }
  fmt.Println("All done.")
} 
```

所以问题是，如果我关闭它是错误的，如果我不关闭 - 它仍然是错误的（参见代码中的注释）。

现在，解决方案将是一个带外信号通道，所有生产者都写入：

```
package main

import (
  "fmt"
  "math/rand"
)

func producer(c chan int, signal chan bool) {
  success := rand.Float32() > 0.5
  if success {
    c <- rand.Int()
  }
  signal <- true
}

func main() {
  c := make(chan int, 10)
  signal := make(chan bool, 10)
  for i := 0; i < 10; i++ {
    go producer(c, signal)
  }

  // This is basically a 'join'.
  num_done := 0
  for num_done < 10 {
    <- signal
    num_done++
  }
  close(c)

  for num := range c {
    fmt.Printf("Producer produced: %d\n", num)
  }
  fmt.Println("All done.")
} 
```

这完全符合我的要求！但对我来说，这似乎是一口。我的问题是：是否有任何成语/技巧可以让我以更简单的方式做类似的事情？

我在这里看了一下：http: [//golang.org/doc/codewalk/sharemem/](http://golang.org/doc/codewalk/sharemem/) 似乎`complete`chan （在开头初始化`main`）在一个范围内使用但从未关闭。我不明白怎么做。

如果有人有任何见解，我将不胜感激。干杯!

* * *

编辑：fls0815 有答案，并且还回答了无关闭通道范围如何工作的问题。

我上面的代码修改为工作（在 fls0815 提供代码之前完成）：

```
package main

import (
  "fmt"
  "math/rand"
  "sync"
)

var wg_prod sync.WaitGroup
var wg_cons sync.WaitGroup

func producer(c chan int) {
  success := rand.Float32() > 0.5
  if success {
    c <- rand.Int()
  }
  wg_prod.Done()
}

func main() {
  c := make(chan int, 10)
  wg_prod.Add(10)
  for i := 0; i < 10; i++ {
    go producer(c)
  }

  wg_cons.Add(1)
  go func() {
    for num := range c {
      fmt.Printf("Producer produced: %d\n", num)
    }
    wg_cons.Done()
  } ()

  wg_prod.Wait()
  close(c)
  wg_cons.Wait()
  fmt.Println("All done.")
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-18T00:51:16.327

只有生产者才能关闭频道。`range`您可以通过调用消费者来实现您的目标，消费者在您的生产者启动后在结果通道上迭代 ( )。在您的主线程中，您等待（参见 参考资料`sync.WaitGroup`）直到您的消费者/生产者完成他们的工作。生产者完成后，您关闭生成的通道，这将迫使您的消费者退出（`range`当通道关闭且没有缓冲项目时将退出）。

示例代码：

```
package main

import (
    "log"
    "sync"
    "time"
    "math/rand"
    "runtime"
)

func consumer() {
    defer consumer_wg.Done()

    for item := range resultingChannel {
        log.Println("Consumed:", item)
    }
}

func producer() {
    defer producer_wg.Done()

    success := rand.Float32() > 0.5
    if success {
        resultingChannel <- rand.Int()
    }
}

var resultingChannel = make(chan int)
var producer_wg sync.WaitGroup
var consumer_wg sync.WaitGroup

func main() {
    rand.Seed(time.Now().Unix())

    for c := 0; c < runtime.NumCPU(); c++ {
        producer_wg.Add(1)  
        go producer()
    }

    for c := 0; c < runtime.NumCPU(); c++ {
        consumer_wg.Add(1)
        go consumer()
    }

    producer_wg.Wait()

    close(resultingChannel)

    consumer_wg.Wait()
} 
```

我将`close`- 语句放入 main 函数的原因是因为我们有多个生产者。在上面的示例中关闭一个生产者中的通道会导致您已经遇到的问题（在关闭的通道上写入；原因是可能剩下一个生产者仍在生产数据）。只有在没有生产者时才应关闭频道（因此我建议仅由生产者关闭频道）。这就是在 Go 中构建通道的方式。[在这里](http://golang.org/pkg/builtin/#close)，您将找到有关关闭频道的更多信息。

* * *

与 sharemem 示例相关：AFAICS 此示例通过一次又一次地重新排队资源（从挂起 -> 完成 -> 挂起 -> 完成......等等）来无限运行。这就是 main-func 末尾的迭代所做的。它接收完成的资源并使用 Resource.Sleep() 将它们重新排队以待处理。当没有完成的资源时，它会等待并阻塞新资源的完成。因此无需关闭通道，因为它们一直在使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T04:47:32.060

总是有很多方法可以解决这些问题。这是使用 Go 中基础的简单同步通道的解决方案。没有缓冲通道，没有关闭通道，没有 WaitGroups。

它离你的“满口”解决方案真的不远，而且——很抱歉让你失望——并没有那么小。它确实将消费者放在自己的 goroutine 中，以便消费者可以在生产者生产数字时消费数字。它还区分了生产“尝试”可以以成功或失败告终。如果生产失败，则立即进行尝试。如果成功，则在使用该数字之前不会进行尝试。

```
package main

import (
    "fmt"
    "math/rand"
)

func producer(c chan int, fail chan bool) {
    if success := rand.Float32() > 0.5; success {
        c <- rand.Int()
    } else {
        fail <- true
    }
}

func consumer(c chan int, success chan bool) {
    for {
        num := <-c
        fmt.Printf("Producer produced: %d\n", num)
        success <- true
    }
}

func main() {
    const nTries = 10
    c := make(chan int)
    done := make(chan bool)
    for i := 0; i < nTries; i++ {
        go producer(c, done)
    }
    go consumer(c, done)

    for i := 0; i < nTries; i++ {
        <-done
    }
    fmt.Println("All done.")
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-09T01:52:39.433

我之所以添加这个，是因为现有的答案并没有使一些事情变得清楚。首先，codewalk 示例中的范围循环只是一个无限事件循环，它会不断地重新检查和更新同一个 url 列表。

接下来，通道本身已经*是*Go 中惯用的消费者-生产者队列。支持通道的异步缓冲区的大小决定了生产者在获得背压之前可以生产多少。在下面设置 N = 0 以查看锁步生产者消费者，而没有任何人领先或落后。事实上，N = 10 将让生产者在阻塞之前生产多达 10 个产品。

最后，在 Go 中编写通信顺序进程有一些很好的习惯用法（例如，为您启动 go 例程的函数，以及使用 for/select 模式来通信和接受控制命令）。我认为 WaitGroups 很笨拙，而是希望看到惯用的示例。

```
package main

import (
    "fmt"
    "time"
)

type control int
const  (
    sleep control = iota
    die // receiver will close the control chan in response to die, to ack.
)

func (cmd control) String() string {
    switch cmd {
    case sleep: return "sleep"
    case die: return "die"
    }
    return fmt.Sprintf("%d",cmd)
}

func ProduceTo(writechan chan<- int, ctrl chan control, done chan bool) {
    var product int
    go func() {
        for {
            select {
        case writechan <- product:
            fmt.Printf("Producer produced %v\n", product)
            product++
        case cmd:= <- ctrl:
            fmt.Printf("Producer got control cmd: %v\n", cmd)
            switch cmd {
            case sleep:
                fmt.Printf("Producer sleeping 2 sec.\n")
                time.Sleep(2000 * time.Millisecond)
            case die:
                fmt.Printf("Producer dies.\n")
                close(done)
                return
            }
            }
        }
    }()
}

func ConsumeFrom(readchan <-chan int, ctrl chan control, done chan bool) {
    go func() {
        var product int
        for {
            select {
            case product = <-readchan:
                fmt.Printf("Consumer consumed %v\n", product)
            case cmd:= <- ctrl:
                fmt.Printf("Consumer got control cmd: %v\n", cmd)
                switch cmd {
                case sleep:
                    fmt.Printf("Consumer sleeping 2 sec.\n")
                    time.Sleep(2000 * time.Millisecond)
                case die:
                    fmt.Printf("Consumer dies.\n")
                    close(done)
                    return
                }

            }
        }
    }()
}

func main() {

    N := 10
    q := make(chan int, N)

    prodCtrl := make(chan control)
    consCtrl := make(chan control)

    prodDone := make(chan bool)
    consDone := make(chan bool)

    ProduceTo(q, prodCtrl, prodDone)
    ConsumeFrom(q, consCtrl, consDone)

    // wait for a moment, to let them produce and consume
    timer := time.NewTimer(10 * time.Millisecond)
    <-timer.C

    // tell producer to pause
    fmt.Printf("telling producer to pause\n")
    prodCtrl <- sleep

    // wait for a second
    timer = time.NewTimer(1 * time.Second)
    <-timer.C

    // tell consumer to pause
    fmt.Printf("telling consumer to pause\n")
    consCtrl <- sleep

    // tell them both to finish
    prodCtrl <- die
    consCtrl <- die

    // wait for that to actually happen
    <-prodDone
    <-consDone
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-10T10:31:31.743

如果您使用带有 fanIn 功能的生成器模式，您可以使用没有等待组的简单无缓冲通道。

在生成器模式中，每个生产者返回一个通道并负责关闭它。然后 fanIn 函数遍历这些通道并将返回的值转发到它返回的单个通道。

当然，问题是 fanIn 函数在每个通道关闭时转发通道类型（int）的零值。

您可以通过使用通道类型的零值作为标记值来解决此问题，并且仅在它们不是零值时才使用来自 fanIn 通道的结果。

这是一个例子：

```
package main

import (
    "fmt"
    "math/rand"
)

const offset = 1

func producer() chan int {
    cout := make(chan int)
    go func() {
        defer close(cout)
        // May or may not produce.
        success := rand.Float32() > 0.5
        if success {
            cout <- rand.Int() + offset
        }
    }()
    return cout
}

func fanIn(cin []chan int) chan int {
    cout := make(chan int)
    go func() {
        defer close(cout)
        for _, c := range cin {
            cout <- <-c
        }
    }()
    return cout
}

func main() {
    chans := make([]chan int, 0)
    for i := 0; i < 10; i++ {
        chans = append(chans, producer())
    }

    for num := range fanIn(chans) {
        if num > offset {
            fmt.Printf("Producer produced: %d\n", num)
        }
    }
    fmt.Println("All done.")
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-14T10:39:00.847

producer-consumer 是一种常见的模式，为了方便仔细处理chan 通信，我编写了一个库[prosumer 。](https://github.com/jiacai2050/prosumer)例如：

```
func main() {
    maxLoop := 10
    var wg sync.WaitGroup
    wg.Add(maxLoop)
    defer wg.Wait()

    consumer := func(ls []interface{}) error {
        fmt.Printf("get %+v \n", ls)
        wg.Add(-len(ls))
        return nil
    }

    conf := prosumer.DefaultConfig(prosumer.Consumer(consumer))
    c := prosumer.NewCoordinator(conf)
    c.Start()
    defer c.Close(true)

    for i := 0; i < maxLoop; i++ {
        fmt.Printf("try put %v\n", i)
        discarded, err := c.Put(i)
        if err != nil {
            fmt.Errorf("discarded elements %+v for err %v", discarded, err)
            wg.Add(-len(discarded))
        }
        time.Sleep(time.Second)
    }

} 
```

close 有一个参数叫graceful，意思是是否耗尽底层的chan。

# javascript - 谷歌地图：使用菜单设置新的中心点

> ID：11075877
> 
> 赞同：3
> 
> 时间：2012-06-18T00:38:40.160
> 
> 标签：javascript, google-maps-api-3, onclick, center

我对谷歌地图很陌生。我要做的是设置一个地图，当单击 HTML 菜单时，该地图将以点为中心。

如果控件在地图之外，我是否说我不需要事件侦听器？

这是我在头部的代码：

```
 <script type="text/javascript">
        function init() {
            var myLatlng = new google.maps.LatLng(53.53562,-1.05642);
            var myOptions = {
                zoom: 8,
                center: myLatlng,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            }
            //draw the map
            var map = new google.maps.Map(document.getElementById("map"), myOptions);

            //set up the marker
            var marker = new google.maps.Marker({
                position: myLatlng,
                map: map,
            }); 
        }

        function resetMap(lat,long) {
                var latlong = lat+","+long;
                var newPos = new google.maps.LatLng(latlong)({
                setCenter: latlong,
                map: map,
                zoom:15,
            })

            //add a marker
            var marker = new google.maps.Marker({
                position: myLatlng,
                map: map,
                title:"New marker",
            })
        }   
    </script> 
```

HTML是这样的：

```
<body onLoad="init()">
    <div id="selecter">
        <select>
            <option onClick="resetMap(53.39433,-1.25754);">Thurcroft</option>
            <option onClick="resetMap(53.41615,-1.27833);">Wickersley</option>
            <option onClick="resetMap(53.47929,-1.14828);">M18/A1</option>
            <option onClick="resetMap(53.47802,-1.06633);">Rossington</option>
            <option onClick="resetMap(53.53562,-1.05642);">Armthorpe</option>
            <option onClick="resetMap(53.5914,-0.98797);">J5 M180</option>
            <option onClick="resetMap(53.61159,-0.96308);">Thorne</option>
            <option onClick="resetMap(53.62769,-0.95181);">Moorends</option>
        </select>
    </div>
    <div id="map">
    </div>
</body> 
```

...但是访问菜单时没有任何反应。谁能指出我正确的方向 - 所有建议都非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T23:47:46.230

我做了几个改变，

(1)`map`成为全局变量（放置在函数之外的级别），因此可以在`init`和`resetMap`

(2) 选项值包含一个带有坐标的字符串，但`google.maps.LatLng`需要两个参数，因此字符串在逗号处拆分

(3)`setOptions`调用recenterer和zoom，也可以调用个别函数setZoom和setCenter

[**演示和更新代码**](http://jsfiddle.net/yV6xv/66/)

```
function resetMap() {
    // retrieve new selection
    var latlongChoice = document.getElementById("placeSelect").value;

    // separate into lat and long
    var latlongParts = latlongChoice.split(",");
    var newPos = new google.maps.LatLng(latlongParts[0], latlongParts[1]);

    map.setOptions({
        center: newPos,
        zoom: 15
    });

    //add a marker
    var marker = new google.maps.Marker({
        position: newPos,
        map: map,
        title: "New marker"
    })
}​ 
```

...

```
 <select id="placeSelect" onchange="resetMap()">
        <option value="53.39433,-1.25754">Thurcroft</option>
        <option value="53.41615,-1.27833">Wickersley</option>
        ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T00:50:45.943

你不能把一个`onclick`函数放在一个选项中，你必须把一个`onchange`函数放在这样的选择标签中，

```
<select onchange="resetMap('53.39433', '-1.25754');">
    <option>Thurcroft</option>
    <option>Wickersley</option>
</select> 
```

您还确保在文件中包含地图 URL

# git - aptana studio 3 中的 Git 提交修改？

> ID：11075878
> 
> 赞同：1
> 
> 时间：2012-06-18T00:38:42.717
> 
> 标签：git, aptana, aptana3, git-commit, git-amend

我刚刚注意到，当我尝试修改提交时，Aptana Studio 3 中没有 git commit amend 功能。这是正确的还是我遗漏了什么？

如果它确实不存在，社区中是否有人知道它是否会被添加或如何请求它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T22:28:29.830

我发现您可以在提交后再次点击提交按钮并修改您的提交。我相信 aptana 仅在您当时没有检出文件时才会提示您，如果检出任何文件，它不会提示您并假定您需要新的提交。

# objective-c - 单击 UITableCell 将详细信息披露箭头更改为加载指示器，在 JSON 加载时继续

> ID：11075884
> 
> 赞同：0
> 
> 时间：2012-06-18T00:40:16.257
> 
> 标签：objective-c, xcode, json, uitableview

我有一个人名的表格视图，当我单击其中一个时，我会被带到该人的个人资料。然后使用 JSON 加载配置文件页面。我希望能够单击表格视图中的表格单元格并将详细信息披露按钮更改为加载指示器，直到加载配置文件上的 JSON 并转到配置文件页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T01:12:29.703

我有一些示例代码在这里演示了这一点：http: [//github.com/meekapps/MEEKActivityIndi​​cators](http://github.com/meekapps/MEEKActivityIndicators)

但一般概念是：

- 存储“加载”单元格的索引。应该从一开始就被初始化超出范围（例如-1）。

- 当用户点击一个单元格时，存储该索引并重新加载该单元格。

- 显示单元格 (cellForRowAtIndexPath) 时，将单元格附件设置为公开指示符或活动指示符（如果它的索引与加载单元格的存储索引匹配。

- 当视图消失时不要忘记重置配件。

# asn.1 - 使用 asn1c 将 XER 编码为缓冲区

> ID：11075886
> 
> 赞同：0
> 
> 时间：2012-06-18T00:41:28.830
> 
> 标签：asn.1

我正在使用 asn1c 对 DER 编码数据进行解码/编码。这工作正常。但是，对于日志记录，能够以 XER 格式（类似 XML）编写发送/接收的数据会很好。asn1c 生成的文件包含将 XER 编码数据写入 FILE* 的例程，例如 stdout。但是，我想将其编码到缓冲区中，以便在打印数据之前对其进行处理。谁能告诉我该怎么做？

我想要一个与 encode_to_buffer() 类似的接口，它对 DER 数据中的结构进行编码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T06:06:29.003

我刚刚发现了它是如何完成的：asn1c 生成的 xer_encode() 函数接受一个回调，该回调获取一个 XER 片段及其大小（以字节为单位）以及一个用户数据指针。通过编写适当的回调，我们可以将 XER 编码的数据放入缓冲区。

以下是我如何解决我的问题。我实现了一个 xer_buffer_t ，它包含一个缓冲区，它的大小并跟踪缓冲区的填充程度，以便回调可以在必要时重新分配。

```
void init_xer_buffer(xer_buffer_t* xer_buffer) {
    xer_buffer->buffer = malloc(1024);
    assert(xer_buffer->buffer != NULL);
    xer_buffer->buffer_size = 1024;
    xer_buffer->buffer_filled = 0;
}

void free_xer_buffer(xer_buffer_t* xer_buffer) {
    free(xer_buffer->buffer);
    xer_buffer->buffer_size = 0;
    xer_buffer->buffer_filled = 0;
}

static int xer_print2xerbuf_cb(const void *buffer, size_t size, void *app_key) {
    xer_buffer_t* xb = (xer_buffer_t*) app_key;
    while (xb->buffer_size - xb->buffer_filled <= size+1) {
        xb->buffer_size *= 2;
        xb->buffer_size += 1;
        xb->buffer = realloc(xb->buffer, xb->buffer_size);
        assert(xb->buffer != NULL);
    }
    memcpy(xb->buffer+xb->buffer_filled, buffer, size);
    xb->buffer_filled += size;
    *(xb->buffer+xb->buffer_filled) = '\0';
    return 1;
}

int xer_encode_to_buffer(xer_buffer_t* xb, asn_TYPE_descriptor_t *td, void *sptr) {
    asn_enc_rval_t er;
    if (!td || !sptr) return -1;
    er = xer_encode(td, sptr, XER_F_BASIC, xer_print2xerbuf_cb, xb);
    if (er.encoded == -1) return -1;
    return 0;
} 
```

# jquery - 使用 jQuery 切换多个 DIV

> ID：11075889
> 
> 赞同：2
> 
> 时间：2012-06-18T00:42:04.603
> 
> 标签：jquery, toggle

我有三个信息面板（ID 为和的 div `panel-one`，都带有 class ），我希望通过单击链接滑入和滑出（这些面板都有 ID和，都带有 class ）。如果单击其他链接之一时显示其中一个 div，我想隐藏可见 div 并显示新的。如果单击 div 自己的链接，我想切换显示/隐藏。我正在使用以下代码来执行此操作：`panel-two``panel-three``info-panel``toggle-one``toggle-two``toggle-three``toggle`

**HTML：**

```
<ul>
    <li><a id="toggle-one" class="toggle">One</a></li>
    <li><a id="toggle-two" class="toggle">Two</a></li>
    <li><a id="toggle-three" class="toggle">Three</a></li>
</ul>

<div id="panel-one" class="info-panel"><!-- content here --></div>
<div id="panel-two" class="info-panel"><!-- content here --></div>
<div id="panel-three" class="info-panel"><!-- content here --></div> 
```

**jQuery：**

```
$("#toggle-one").click(function () {
    if($("#panel-two").is(":visible")) {
        $("#panel-two").css("z-index", "9997").hide("slide", {direction: 'up'}, 750);
    } else if($("#panel-three").css("z-index", "9997").is(":visible")) {
        $("#panel-three").css("z-index", "9997").hide("slide", {direction: 'up'}, 750);
    }
    $("#panel-one").css("z-index", "9998").toggle("slide", {direction: 'up'}, 750);
    return false;
});

$("#toggle-two").click(function () {
    if($("#panel-one").is(":visible")) {
        $("#panel-one").css("z-index", "9997").hide("slide", {direction: 'up'}, 750);
    } else if($("#panel-three").is(":visible")) {
        $("#formlink").css("z-index", "9997").hide("slide", {direction: 'up'}, 750);
    } 
    $("#panel-two").css("z-index", "9998").toggle("slide", {direction: 'up'}, 750);
    return false;
});

$("#toggle-three").click(function () {
    if($("#panel-one").is(":visible")) {
        $("#panel-one").css("z-index", "9997").hide("slide", {direction: 'up'}, 750);
    }  else if($("#panel-two").is(":visible")) {
        $("#panel-two").css("z-index", "9997").hide("slide", {direction: 'up'}, 750);
    }
    $("#panel-three").css("z-index", "9998").toggle("slide", {direction: 'up'}, 750);
    return false;
}); 
```

它可以工作，但它非常冗长并且不能很好地扩展 - 管理三个信息 div 很好，但是如果/当需要添加更多信息时，它将变成维护的主要痛苦。我尝试使用类似于[Show/Hide Multiple Divs with Jquery](https://stackoverflow.com/questions/6967081/show-hide-multiple-divs-with-jquery)中概述的方法，但似乎无法使其正常工作 - 切换和隐藏行为效果不佳（隐藏的潜水显示何时应该' t 然后立即隐藏和类似的事情）。同样，我似乎也无法让[Jquery toggle on 3 div](https://stackoverflow.com/questions/10598952/jquery-toggle-on-3-divs)中显示的示例正常工作。

我确信有一种更清洁的方法可以做到这一点，但由于我有点 jQuery 和 javascript n00b，我真的不知道如何整理它。解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T00:46:07.967

将您的面板包裹在 a`<div>`中：`id``panels`

```
<div id="panels">
  <div class="info-panel"><!-- content here --></div>
  <div class="info-panel"><!-- content here --></div>
  <div class="info-panel"><!-- content here --></div>
</div> 
```

这*应该*有效：

```
$(".toggle").on('click', function() {
    var $panel = $('#panels').children().eq($(this).parent().index());

    $panel.toggle("slide", {direction: 'up'}, 750);
    $panel.siblings().hide("slide", {direction: 'up'}, 750);

    return false;
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T12:08:00.630

从[Blender](https://stackoverflow.com/users/464744/blender)发布的内容中获取指导​​，我最终选择了这个：

**HTML：**

```
<div id="togglelinks">
    <ul>
        <li><a class="toggle" href="#panel-one">One</a></li>
        <li><a class="toggle" href="#panel-two">Two</a></li>
        <li><a class="toggle" href="#panel-three">Three</a></li>
    </ul>
</div>

<div id="panels">
    <div id="panel-one" class="info-panel"><!-- content here --></div>
    <div id="panel-two" class="info-panel"><!-- content here --></div>
    <div id="panel-three" class="info-panel"><!-- content here --></div>
</div> 
```

**jQuery：**

```
$(".toggle").click(function() {
    var $toggled = $(this).attr('href');

    $($toggled).siblings(':visible').hide("slide", {direction: 'up'}, 750);
    $($toggled).toggle("slide", {direction: 'up'}, 750);

    return false;
}); 
```

对此感到高兴... 27 行 javascript 减至 6 行，而且这一切似乎都有效！但是，再次感谢 Blender，否则我永远不会走到这一步。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T01:32:23.857

我就是这样做的：

```
$("info-panel").click(function(){

    //put your div in memory
    var chosen = $(this);

    //Slide down all the toggle div or hide them
    $('.info-panel').slideUp('slow', function(){);

    //open the div you wanted
    chosen.slideToggle('slow',function(){});
} 
```

然后，激活它：

```
function openDiv(divId){
$("#"+divId).click();
} 
```

在 html 上，在 a href="#" ...设置 onclick 属性之后

```
a href="#" onclick="openDiv('panel-one')" 
```

# css - 有形状的 iframe 可能吗？

> ID：11075893
> 
> 赞同：3
> 
> 时间：2012-06-18T00:43:01.480
> 
> 标签：css, html, iframe

是否可以有一个六边形或菱形或除矩形或正方形以外的任何形状的 iframe？

或者甚至可能是一个div？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T00:45:13.137

你可以用 CSS 掩码来伪造它。

但它的一部分会被它掩盖。您不能在`iframe`这些形状之一中制作其内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T01:04:00.460

您可以将 iframe 形状（或者，更确切地说，iframe 容器形状）设置为非常容易的[椭圆形](http://jsfiddle.net/ovfiddle/eKm3C/2/)，但是菱形/十六进制形状的问题是，您首先无法设置*任何*html 元素以该形状呈现.

您可以尝试按照亚历克斯的建议使用口罩。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T00:43:54.993

不它不是。HTML 标准中没有这样做的可能性。您可以使用 DIV 包装 iframe 并获得一些效果，例如仅圆角

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T01:03:24.703

我认为您必须使用图像作为蒙版，然后对其进行绝对定位

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-20T16:45:20.303

根据您想要支持的浏览器，您可以使用边框半径、透明度和其他技巧[在 css 中创建许多形状](http://css-tricks.com/examples/ShapesOfCSS/)。

# c - 用纯 C 语言创建个人图像格式

> ID：11075897
> 
> 赞同：0
> 
> 时间：2012-06-18T00:43:20.507
> 
> 标签：c, image, webcam, image-formats

我不是软件工程师。对不起，如果你觉得这个问题很尴尬。

我想要一种图像格式，它**不**应该是内存效率高但易于在普通 C 中操作的图像格式。更具体地说，我希望将每个像素存储在以下形式的数组中：

像素[行#][列#][颜色]

其中索引 row# 和 column#（最大为 255）是坐标，索引 Color（最大为 2）包含由位置指定的像素的 RGB 值（*即*使用 pixel[255][255][1]检查或操作右下角像素内的绿色量）。

我的目标是在机器人应用程序中使用这种形式，以便能够通过使用“嵌套 for 循环”从左上角开始扫描图像轻松找到第一个红色/蓝色/绿色像素的**坐标***（是的，不是创造性的解决方案）* . 在这里，您可能会说，如果图像上有白色区域，代码将返回错误的坐标。我知道这一事实，但图像不会有复杂的图案，并且（如有必要）我可以将不相关的颜色存储为黑色。我也不关心亮度、伽马、阿尔法等等。

那么是否可以编写一个 C（或 C++，如果必须）代码以每隔 0.5 秒从网络摄像头拍摄一次快照，并将来自网络摄像头的**原始图像**转换为上面指定的形式？如果您说C不能直接到达相机，是否可以编写代码调用可以到达相机的软件，拍摄快照然后将原始数据存储在文件中？如果是，我如何使用 C 代码读取这个原始数据文件才能至少尝试转换？我在笔记本电脑上使用 Windows Vista。

很抱歉让这个问题很长，但我不想留下任何不清楚的地方。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T00:57:43.580

是的，这样的文件格式是可能的。只有理智才能阻止它被实施/使用。

不过，使用相当广泛的某些格式几乎可以按照您正在考虑的方式进行扫描。例如，一个 32 位 BMP 在文件上有一个小标题，用于说明图片大小（x,y 像素尺寸）后跟原始像素值之类的信息，所以它基本上只是 ColorColorColor...为图像中的像素数。

使用 32 位 BMP 进行扫描的代码将非常简单——打开文件、为缓冲区分配空间以读取数据等的代码很容易比扫描代码长本身。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T01:06:05.253

采用“标准”图像格式还意味着您拥有生成测试数据和独立查看结果的工具

用纯 C 语言编写最简单的代码（即使它不是很有效）是[可移植像素图](https://en.wikipedia.org/wiki/Portable_Pixmap#PPM_example)(ppm)。

它只是一个纯文本文件

```
P3 <cr>               # P3 means an ascii color file R,G,B
640 480 <cr>          # 640 pixels wide, 480 rows deep
255 <cr>              # maximum value is 255
# then just a row of RGB values separated by space with a CR 
255   0   0     0 255   0     0   0 255 #....... 640 triplets <cr> 
255 255   0   255 255 255     0   0   0  # ....... next row etc 
```

还有一个更有效的二进制版本，其中数据是纯 RGB 字节，因此很容易在一次操作中读入 C 数组

# windows-phone-7 - Windows Phone 7.5 POST 方法返回未找到远程服务器

> ID：11075903
> 
> 赞同：0
> 
> 时间：2012-06-18T00:43:57.597
> 
> 标签：windows-phone-7, post, httpwebrequest

我正在尝试进行 POST 但每次都返回一个错误说

> “远程服务器返回错误：未找到。”

我正在使用 Firefox 的 Firebug 扩展来获取 POST 方法的所有必要参数，但 firebug 说

> “... Firebug 已达到 Firebug 请求大小限制。...”

. Wireshark 也或多或少说了同样的话。

我不知道是否需要（在 windows phone 7 HttpWebRequest 上）在标头上指定一些额外的参数，因为 POST 方法很长。

这是我的代码：

```
private void GetResponseCallbackAGCP(IAsyncResult asynchronousResult)
{
  Uri url = new Uri("http://publico.agcp.ipleiria.pt/Paginas/ScheduleRptCursosSemanalPublico.aspx");
 postData = "MSO_PageHashCode=" + _MSO_PageHashCode +
                "&__SPSCEditMenu=" + ___SPSCEditMenu +
                "&MSOWebPartPage_PostbackSource=" +
                "&MSOTlPn_SelectedWpId=" +
                "&MSOTlPn_View=0" +
                "&MSOTlPn_ShowSettings=" + _MSOTlPn_ShowSettings +
                "&MSOGallery_SelectedLibrary=" +
                "&MSOGallery_FilterString=" +
                "&MSOTlPn_Button=" + _MSOTlPn_Button +
                "&MSOAuthoringConsole_FormContext=" +
                "&MSOAC_EditDuringWorkflow=" +
                "&MSOSPWebPartManager_DisplayModeName=" + _MSOSPWebPartManager_DisplayModeName +
                "&__EVENTTARGET=" + _eventTarget +
                "&__EVENTARGUMENT=" + _eventArg +
                "&MSOWebPartPage_Shared=" +
                "&MSOLayout_LayoutChanges=" +
                "&MSOLayout_InDesignMode=" +
                "&MSOSPWebPartManager_OldDisplayModeName=" + _MSOSPWebPartManager_OldDisplayModeName +
                "&MSOSPWebPartManager_StartWebPartEditingName=" + _MSOSPWebPartManager_StartWebPartEditingName +
                "&__LASTFOCUS=" +
                "&__REQUESTDIGEST=" + ___REQUESTDIGEST +
                "&__VIEWSTATE=" + _viewState +
                "&__EVENTVALIDATION=" + _eventEval +
                "&ctl00%24ctl12%24ctl00=http%3A%2F%2Fspserver%3A7250" +
                "&ctl00%24PlaceHolderAGCPUO%24ddlUO=" + escolaSelected +
                "&ctl00%24PlaceHolderAGCPUO%24ddlAnosLectivos=" + anoLectivoSelected +
                "&ctl00%24PlaceHolderAGCPUO%24ddlPeriodos=" + periodoSelected +
                "&ctl00%24PlaceHolderMain%24ddlCursos=" + cursoSelected +
                "&ctl00%24PlaceHolderMain%24ddlAnosCurr=" + anoCurricularSelected +
                "&ctl00%24PlaceHolderMain%24ddlPlanos=" + planoSelected +
                "&ctl00%24PlaceHolderMain%24ddlRamos=" + troncoSelected +
                "&ctl00%24PlaceHolderMain%24ddlTurmas=" + turmaSelected +
                "&ctl00%24PlaceHolderMain%24txtObservacoesHor=" +
                "&ctl00%24PlaceHolderMain%24ddlZoom=1250" +
                "&ctl00%24PlaceHolderMain%24ddlSemanas=" + semanaSelected +
                "&ctl00_PlaceHolderMain_DayPilotCalendar1_vsupdate=" +
                "&ctl00_PlaceHolderMain_DayPilotCalendar1_scrollpos=" +
                "&ctl00_PlaceHolderMain_DayPilotCalendar1_select=" +
                "&__spDummyText1=__spDummyText1&__spDummyText2=__spDummyText2";

            cc = new CookieContainer();

            webRequest2 = (HttpWebRequest)WebRequest.Create(url);
            webRequest2.Method = "POST";
            webRequest2.ContentType = "application/x-www-form-urlencoded";
            webRequest2.CookieContainer = cc;

            webRequest2.BeginGetRequestStream(new AsyncCallback(GetRequestCallback), webRequest2);
}

   private void GetRequestCallback(IAsyncResult asynchronousResult)
        {
            var request = asynchronousResult.AsyncState as HttpWebRequest;
            StreamWriter stream = new StreamWriter(request.EndGetRequestStream(asynchronousResult));
            stream.Write(postData);
            stream.Flush();
            stream.Close();
            request.BeginGetResponse(AuthCallback, request);
        }

        private void AuthCallback(IAsyncResult asyncResult)
        {
            HttpWebRequest request = (HttpWebRequest)asyncResult.AsyncState;
            HttpWebResponse response = (HttpWebResponse)request.EndGetResponse(asyncResult); //RETURNS an error saying "WebException was unhandle. The remote server returned an error: NotFound."
            using (StreamReader streamReader1 = new StreamReader(response.GetResponseStream()))
            {
                //string resultString = streamReader1.ReadToEnd();
                var info = streamReader1.ReadToEnd();
                System.Windows.Deployment.Current.Dispatcher.BeginInvoke(() =>
                {
                    webView.NavigateToString(info);
                });

            }
        } 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-27T09:46:10.077

此异常也是由于防火墙刚刚关闭防火墙

转到控制面板\所有控制面板项\Windows 防火墙\自定义设置并关闭防火墙。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T01:43:55.883

尝试使用 RestSharp，它大大简化了 Http 的东西。我一直在我所有的 WP7 项目中使用 RestSharp。

[http://restsharp.org/](http://restsharp.org/)

# c++ - 什么是最常用的 gcc/g++ 信息标志（不仅仅是优化）

> ID：11075904
> 
> 赞同：1
> 
> 时间：2012-06-18T00:44:13.473
> 
> 标签：c++, gcc, compiler-construction, g++

我发现 -E 对于查看预处理器输出和调试宏非常有用，并且我已经看到 -fdump-class-hierarchy 可以查看类层次结构的 v 表......我知道也有标志可以转储 asm 输出..与这些类似的其他一些广泛（或者可能有点未知但非常方便）的标志是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T17:05:41.677

我喜欢的几个标志：

`-x language`: 用于编译扩展名为 .c 或 .cpp 以外的文件

`-s`- 转储汇编。

`-g`- 调试构建。

`gcc -O3 -Q --help=optimizers | grep disabled`- 将为您提供所有优化标志，即使在之后仍然处于禁用状态`-O3`

[所有美妙选择的好地方](http://gcc.gnu.org/onlinedocs/gcc/Option-Summary.html)

# sql - 我如何实现这种复制？

> ID：11075905
> 
> 赞同：0
> 
> 时间：2012-06-18T00:44:24.117
> 
> 标签：sql, sql-server, sql-server-2008

我有一个`A`插入数据的主 SQL Server。感兴趣的表`A`如下所示：

`Name|Entry Time|Exit Time|Comments`

从这个主表中，我想在另一台服务器上构建一个表`B`，其中包含相同的数据，`A`但使用`WHERE`子句 ie带有一些额外的过滤器`WHERE Name IN ('John', 'Adam', 'Jack')`。

我不确定这叫什么，以及 SQL Server 本身是否支持它（或者我应该设置一个脚本来实现这一点）。复制意味着复制整个数据，但有人可以告诉我我在寻找什么以及如何实现这一目标吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T00:48:06.347

SQL Server 的事务复制支持过滤数据的能力。事实上，当您设置复制时，有一个“添加过滤器”对话框（假设您使用的是 SSMS）允许您创建过滤器（Where 子句）。

[您可以在此处](http://msdn.microsoft.com/en-us/library/aa337453%28v=sql.105%29.aspx)了解更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T00:50:18.527

事务复制确实支持文章过滤器，但老实说 - 我从来没有为带有过滤器的文章设置它。[本文可能](http://www.simple-talk.com/sql/database-administration/sql-server-replication-crib-sheet/)[对联机丛书](http://msdn.microsoft.com/en-us/library/ms151775(v=sql.100).aspx)中的该主题有所帮助。

如果它只有一个表和/或您不愿意进行复制，您可能希望使用触发器填充远程表（如果数据仅在插入时写入表并且从不更新，这显然会更容易）。但是您需要设置逻辑来处理远程服务器关闭的情况。

如果您不需要服务器 B 持续更新，第三种解决方案可能是可行的 - 您可以使用作业每隔*n*分钟手动移动数据 - 使用外部联接/合并或完全换出匹配的数据集过滤器（我在这种情况下使用了影子模式，以尽量减少这对服务器 B 的读者的影响 -[有关更多详细信息，请参阅此 dba.stackexchange 答案](https://dba.stackexchange.com/questions/14915/synchronising-databases-database-technologies)）。

# c - kernel/sched.c/context_switch() 是否保证每次切换进程时都会被调用？

> ID：11075910
> 
> 赞同：9
> 
> 时间：2012-06-18T00:45:09.593
> 
> 标签：c, linux, process, scheduler, context-switch

我想更改 Linux 内核，以便每次当前 PID 更改时 - 即，切换一个新进程 - 执行一些诊断代码（如果好奇，下面会详细解释）。我做了一些挖掘，似乎每次调度程序选择一个新进程时，`context_switch()`都会调用该函数，这是有道理的（这只是粗略分析`sched.c/schedule()`）。

问题是，Linux 调度程序现在对我来说基本上是黑魔法，所以我想知道这个假设是否正确。是否保证每次选择一个新进程以在 CPU 上获得一些时间时，都会调用 context_switch() 函数？或者内核源代码中是否有其他地方可以在其他情况下处理调度？（或者我完全误解了这一切？）

为了提供一些背景信息，我正在使用 MARSS x86 模拟器尝试对某些程序进行一些检测和测量。问题是我的仪器需要知道某些代码事件对应于哪个执行过程，以避免误解数据。这个想法是使用 MARSS 中的一些内置消息传递系统在每次上下文切换时传递新进程的 PID，因此它始终知道当前正在执行的 PID。如果有人能想到一种更简单的方法来实现这一点，那也将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T09:43:32.223

是的，你是对的。

当新进程被 选择时，`schedule()`将`context_switch()`负责从一个任务切换到另一个任务`schedule()`。

`context_switch()`基本上做两件事。它调用`switch_mm()`和`switch_to()`。

`switch_mm()`- 切换到新进程的虚拟内存映射

`switch_to()`- 将处理器状态从前一个进程切换到新进程（保存/恢复寄存器、堆栈信息和其他体系结构特定的东西）

至于你的方法，我想这很好。在使用内核时保持良好和干净是很重要的，并尽量保持相对简单，直到您获得更多知识。

# java - 将错误插入android sqlite数据库

> ID：11075911
> 
> 赞同：0
> 
> 时间：2012-06-18T00:45:12.633
> 
> 标签：java, android, sqlite, debugging

我正在尝试使用数据库助手类插入到我的数据库表中。
这是我创建要插入的对象的地方。

```
Item item1;
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    db = new MyDBAdapter(this);

    db.insertEntry(item1 = new Item("Bathtub", "Bathroom", "Typical", "Clean", "fill, wash", "Round, deep", "Bathroom", "Toilet, Bathroom", R.drawable.ic_launcher));
    Log.i("item", "item: " + item1.toString()); 
```

这是 Item 类 public class Item {

```
//private variables
int    _id;
String _item_name;
String _item_classification;
String _group;
String _use;
String _action;
String _properties;
String _location;
String _association;
int _img_id;

//Empty constructor
public Item(){

}

//constructor
public Item (int _id, String _item_name, String _group, String _item_classification, String _use, String _action, String _properties, String _location, String _association, int _img_id) {
    this._id = _id;
    this._item_name = _item_name;
    this._item_classification = _item_classification;
    this._group = _group;
    this._use = _use;
    this._action = _action;
    this._properties = _properties;
    this._location = _location;
    this._association = _association;
    this._img_id = _img_id;
}

public Item (String _item_name, String _group, String _item_classification, String _use, String _action, String _properties, String _location, String _association, int _img_id) {
    this._item_name = _item_name;
    this._item_classification = _item_classification;
    this._group = _group;
    this._use = _use;
    this._action = _action;
    this._properties = _properties;
    this._location = _location;
    this._association = _association;
    this._img_id = _img_id; 
```

当然，使用 getter 和 setter。现在，当我为我的数据库助手使用 insert 方法时，我收到一个错误，提示“组”附近的语法错误。为什么我的插入失败？

```
public class MyDBAdapter {
private static final String DATABASE_NAME = "myDatabase.db";
private static final String DATABASE_TABLE = "mainTable";
private static final int DATABASE_VERSION = 1;

//main table columns
public static final String KEY_ITEM              = "item_name";
public static final String KEY_GROUP             = "group";
public static final String ITEM_CLASSIFICATION   = "classification";
public static final String KEY_USE               = "use";
public static final String KEY_ACTION            = "action";
public static final String KEY_PROPERTIES        = "properties";
public static final String KEY_ASSOCIATION       = "association";
public static final String KEY_IMG_ID            = "img_id";

// The index (key) column name for use in where clauses.
public static final String KEY_ID="_id";

// The name and column index of each column in your database.
public static final int NAME_COLUMN = 1;
public static final int GROUP_COLUMN = 2;
public static final int CLASSIFICATION_COLUMN = 3;
public static final int USE_COLUMN = 4;
public static final int ACTION_COLUMN = 5;
public static final int PROPERTIES_COLUMN = 6;
public static final int ASSOCIATION_COLUMN = 7;
public static final int IMG_ID_COLUMN = 8;
// TODO: Create public field for each column in your table.

// SQL Statement to create a new database.
private static final String DATABASE_CREATE = "create table " + 
        DATABASE_TABLE + " (" 
        + KEY_ID + " integer primary key autoincrement, " 
        + KEY_ITEM + " TEXT, " 
        + KEY_GROUP + " TEXT, " 
        + ITEM_CLASSIFICATION + " TEXT, " 
        + KEY_USE + " TEXT, " 
        + KEY_ACTION + " TEXT, " 
        + KEY_PROPERTIES + " TEXT, " 
        + KEY_ASSOCIATION + " TEXT, " 
        + KEY_IMG_ID + " INTEGER);";

// Variable to hold the database instance
private SQLiteDatabase db;
// Context of the application using the database.
private final Context context;
// Database open/upgrade helper
private myDbHelper dbHelper;

public MyDBAdapter(Context _context) {
    context = _context;
    dbHelper = new myDbHelper(context, DATABASE_NAME, null, DATABASE_VERSION);
}

public MyDBAdapter open() throws SQLException {
    try {  
        db = dbHelper.getWritableDatabase();
    } catch (SQLiteException e) {
        db = dbHelper.getReadableDatabase();
    }
    return this;
}

public void close() {
    db.close();
}

public void insertEntry(Item item) {
    // TODO: Create a new ContentValues to represent my row
    // and insert it into the database.
    SQLiteDatabase db = dbHelper.getWritableDatabase();

    ContentValues values = new ContentValues();
    values.put(KEY_ITEM, item.get_item_name());
    values.put(KEY_GROUP, item.get_group());
    values.put(ITEM_CLASSIFICATION, item.get_item_classification());
    values.put(KEY_USE, item.get_use());
    values.put(KEY_ACTION, item.get_action());
    values.put(KEY_PROPERTIES, item.get_properties());
    values.put(KEY_ASSOCIATION, item.get_association());
    values.put(KEY_IMG_ID, item.get_img_id());

    // insert row to table
    try{
        db.insertOrThrow(DATABASE_TABLE, null, values);
    }catch (Exception e){Log.w("insertFail", "insert failed: " + e.toString());}
    db.close();
} 
```

我得到一个语法错误——>返回的sqlite：错误代码= 1，味精=靠近“组”：语法错误

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T00:47:40.633

您忘记了列名后的空格。改变，

```
private static final String DATABASE_CREATE = "create table " + 
    DATABASE_TABLE + " (" + KEY_ID + 
    " integer primary key autoincrement, " +
    KEY_ITEM + " text not null, " + KEY_GROUP + "TEXT, " + 
    ITEM_CLASSIFICATION + "TEXT, " + KEY_USE + "TEXT, " + 
    KEY_ACTION + "TEXT, " + KEY_PROPERTIES + "TEXT" + 
    KEY_ASSOCIATION + "TEXT," + KEY_IMG_ID + "INTEGER" +  ");"; 
```

至

```
private static final String DATABASE_CREATE = "create table " + 
    DATABASE_TABLE + " (" + KEY_ID + 
    " integer primary key autoincrement, " +
    KEY_ITEM + " text not null, " + KEY_GROUP + " TEXT, " + 
    ITEM_CLASSIFICATION + " TEXT, " + KEY_USE + " TEXT, " + 
    KEY_ACTION + " TEXT, " + KEY_PROPERTIES + " TEXT, " + 
    KEY_ASSOCIATION + " TEXT," + KEY_IMG_ID + " INTEGER" +  ");"; 
```

`TEXT`（注意和之前添加的空格`INTEGER`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T00:52:10.477

您正在创建一个字符串，如：

`...integer primary key autoincrement, item_name text not null, groupTEXT, classificationTEXT, useTEXT, actionTEXT, propertiesTEXT...`（原文如此）。

看到问题了吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T14:50:00.770

我在表中的列名中使用了“组”。显然这有一个问题。我猜“组”是 SQLite for android 的保留字。因此，如果其他人遇到此问题，请尝试更改列名。希望这会有所帮助。

# javascript - Flexslider 暂停按钮

> ID：11075913
> 
> 赞同：2
> 
> 时间：2012-06-18T00:45:14.900
> 
> 标签：javascript, jquery, flexslider

我正在尝试暂停使用 flexslider。这是我正在使用的代码。

```
$(window).load(function() {
$('.flexslider').flexslider({
    slideshowSpeed: 3000,
    animationDuration: 1100,
    directionNav: false,
    controlNav: true,
    pausePlay: true,
    pauseText: 'Pause',
    playText: 'Play', 

});
}); 
```

它只显示暂停的元素和文本，但不影响任何内容。我究竟做错了什么？

编辑：

查看 flexslider 代码，我认为这一定是处理按钮的部分。实际代码有点超出我的想象，但我看不到任何看起来像点击事件处理程序的东西。

```
 //////////////////////////////////////////////////////////////////

  //////////////////////////////////////////////////////////////////
  //FlexSlider: Pause/Play
  if (slider.vars.pausePlay) {
    var pausePlayScaffold = $('<div class="flex-pauseplay"><span></span></div>');

    if (slider.containerExists) {
      slider.controlsContainer.append(pausePlayScaffold);
      slider.pausePlay = $('.flex-pauseplay span', slider.controlsContainer);
    } else {
      slider.append(pausePlayScaffold);
      slider.pausePlay = $('.flex-pauseplay span', slider);
    }

    var pausePlayState = (slider.vars.slideshow) ? 'pause' : 'play';
    slider.pausePlay.addClass(pausePlayState).text((pausePlayState == 'pause') ? slider.vars.pauseText : slider.vars.playText);

    slider.pausePlay.bind(slider.eventType, function(event) {
      event.preventDefault();
      if ($(this).hasClass('pause')) {
        slider.pause();
        slider.manualPause = true;
      } else {
        slider.resume();
        slider.manualPause = false;
      }
    });
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T11:06:02.293

原来问题出在我的 CSS 上。我已经移动了**flex-control-nav**有序列表，它似乎阻止了点击事件，它一定已经覆盖了**flex-pauseplay** div。

# zend-framework - 在哪里添加 3 个函数以及如何编写 findByUsername - Zend Framework

> ID：11075924
> 
> 赞同：1
> 
> 时间：2012-06-18T00:48:15.100
> 
> 标签：zend-framework, find, mapper, fetchall

如 Zend 文档中所述，我有一个 User.php 模型、DbTable/User.php 模型和 UserMapper.php 文件。

映射器有 fetchAll()、find($id)、getDbTable()、save() 和 setDbTable()

如果我想添加以下功能：

1.  函数 doesUsernameExistAlready($username) {返回一个布尔值}
2.  函数 findByUsername($username) {返回一个 $user}
3.  function activateUser($user) {只需激活一个 $user}

要遵循 Zend 的最佳实践，应该在哪里添加这 3 个函数？应该将它们添加到 UserMapper.php 还是 User.php？还是它们属于控制器（UserController）？

对于 findByUsername，我如何编写一个函数来搜索我的用户表中的用户名？在我的例子中，用户名是电子邮件地址并且是唯一的（在 MySQL 中定义）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T03:51:48.087

@drew010 像往常一样是正确的，把这些函数放在你的映射器中。老实说，这些可能都可以放在抽象或基本映射器中，因此您的所有映射器都可以使用该功能。

您可以轻松地在映射器中创建一个函数 recordExists() 并将表和列作为参数传递：

```
 //you can either pass in the table name or have it be a property
  public function recordExists($table = null, $column) {
      //The table syntax may change depending on the scope
        $table = $this->_tableName;
        $exists = new Zend_Validate_Db_RecordExists(array(
        'table' => $table,
        'field' => $column
        )):

    return $exists;
    } 
```

对于 findBy() 方法，我喜欢将 3 个变量传递给该方法，然后使用 fetchAll() 返回一个对象数组。这样，如果列返回一行或五十行，我以相同的方式处理输出。

```
 /**
     * findByColumn() returns an array of rows selected
     * by column name and column value.
     * Optional orderBy value, pass $order as string ie 'id ASC'.
     *
     * @param string $column
     * @param string $value
     * @param string $order
     * @return array returns an array of objects
     */
public function findByColumn($column, $value, $order = NULL) {
        $select = $this->_getGateway()->select();
        $select->where("$column = ?", $value);
        if (!is_null($order)) {
            $select->order($order);
        }
        $result = $this->_getGateway()->fetchAll($select);
        $entities = array();
        foreach ($result as $row) {
            //create objects
            $entity = $this->createEntity($row);
            $entities[] = $entity;
        }
        return $entities;
    } 
```

至于你的最后一个问题，你可以通过获取行然后只保存开关来激活 aa 记录，我认为你设置了某种类型的标志或布尔值来激活记录。这可能需要进入具体的 UserMapper，因为我发现使用我用来保存记录的方法，基本的 save() 方法并不总是有效。

```
 //you'll set the activate switch when the user object is instantiated
    public function activate(Application_Model_User $user) {
        if (!is_null($user->id)) {
            $select = $this->_getGateway()->select();
            $select->where('id = ?', $user->id);
            $row = $this->_getGateway()->fetchRow($select);
            $row->activate = $user->activate;
            //This is the cool thing about save(), you can change as many or few columns as you need.
           $row->save()
        return $row;  
        } else {
           //handle error, as we only want to be able to change an existing user.
        }

    } 
```

这可能比您需要的更多，但我希望它有所帮助。

# javascript - 如何使用 setInterval 或 setTimeout 并在计数期间显示结果？

> ID：11075927
> 
> 赞同：8
> 
> 时间：2012-06-18T00:48:49.640
> 
> 标签：javascript

我正在尝试在调用函数之前将计时器从 5 秒倒计时到零，并且我可以成功地做到这一点，但是我还无法在倒计时时显示计时器值。不是显示值，而是`<div></div>`从空格变为“数字：0”。我已经使用了两者`setTimeout`并且`setInterval`结果相同。

```
<script type="text/javascript">
    for (i = 5; i > 0; i--) {
        function countDown() {
            setInterval(function () {
                document.getElementById("displayDiv").innerHTML = "Number: " + i;
            }, 1000);
        }
    }
</script> 
```

*我也尝试`.value`在`.innerHTML`没有帮助的情况下使用。*

```
<input type="button" value="Count" onclick="countDown()" />

<div id="displayDiv" /> 
```

这似乎应该很简单，但它让我难住了。任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-18T00:55:31.103

```
function countDown(i) {
    var int = setInterval(function () {
        document.getElementById("displayDiv").innerHTML = "Number: " + i;
        i-- || clearInterval(int);  //if i is 0, then stop the interval
    }, 1000);
}
countDown(5); 
```

演示： http: [//jsfiddle.net/DerekL/sFtqZ/](http://jsfiddle.net/DerekL/sFtqZ/)（包括额外的回调参数）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-18T00:54:44.640

尝试

```
<script type="text/javascript">
function countDown() {
var i = 5;
var myinterval = setInterval(function() {
    document.getElementById("displayDiv").innerHTML = "Number: " + i;

    if (i === 0) {
        clearInterval(myInterval);
        //call your function
    }
    else {
        i--;
       }
    }, 1000);
}​
</script> 
```

[http://jsfiddle.net/pjSKa/](http://jsfiddle.net/pjSKa/)

# java - 简单的 Java .class 文件编辑器？

> ID：11075931
> 
> 赞同：0
> 
> 时间：2012-06-18T00:49:31.153
> 
> 标签：java, class, compiler-construction

我有一个充满错误的 Java 类，甚至无法在我的计算机上编译（我不知道这个人是如何编译它的），但它以某种方式工作。我不能用我常用的工具重新编译它，所以我正在寻找可以编译它但可能会忽略错误的东西，或者我认为很酷的东西能够在反编译并显示文件源的程序中打开它，允许我编辑它，然后自动重新编译它。有点像 JD-GUI，但您可以编辑文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T00:55:41.460

我认为 Java 不存在这样的工具。或者至少，不是以有效解决您的问题的形式。

一种更有效的方法是找出导致这些编译错误的原因并修复它。*如果您在应该*编译的文件中遇到一堆错误（例如，因为它为其他人编译），则很可能是以下情况之一：

*   您的构建类路径不正确，因此编译器找不到外部依赖项。
*   您缺少一些包含外部依赖项的 JAR 文件。
*   您有一些 JAR 文件的错误版本。
*   您使用了错误版本的 Java SDK。

这些都很容易解决……一旦您知道问题所在。

如果您向我们提供了编译错误的样本，我们可以确认这一点……或提供更好的诊断。

* * *

**当前一代的反编译器在生成可编译**的源代码方面不是很好。此外，这种方法不会解决我上面列出的任何问题。（即使这样做了，你也会通过破解反编译的源代码将自己挖到一个非常深的洞里。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T01:00:24.353

尽管 Java 字节码比直接编译为可执行代码的语言更容易反编译，但众所周知，Java 反编译器效率低下，尤其是在处理更复杂的代码时，如果原始源代码使用泛型则更是如此。生成的源代码通常与原始源代码完全没有关系，如果它完全编译的话......

1.  如果您有该类的一些*人工生成*的源代码版本，我建议您尝试修复它，而不是尝试对`.class`文件进行逆向工程。

2.  如果你有一个`.class`文件，你仍然可以在子类中扩展或覆盖它的一些方法，本质上是修改它的行为。使用这样的继承并不总是可行的，但它通常有助于第三方黑盒代码......

3.  您可能想看看[Javassist](http://www.javassist.org/)。它是一个字节码操作库，除其他功能外，它还允许您在现有方法中插入 Java 语句。它确实有很多限制，但在某些情况下它可能非常有用......

# android - 安卓短信_id

> ID：11075938
> 
> 赞同：0
> 
> 时间：2012-06-18T00:50:21.837
> 
> 标签：android, sqlite, sms, android-contentprovider

我用谷歌搜索了几次，但找不到我要找的东西。Android 为每条短信分配一个 id。我想知道这个 id 是否总是唯一的？我可以依靠它来识别短信还是应该分配自己的短信？

谢谢 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T01:18:00.333

查看源代码[`MmsSmsDatabaseHelper`](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android-apps/4.0.3_r1/com/android/providers/telephony/MmsSmsDatabaseHelper.java)并注意该`createSmsTables`方法的实现：

```
private void createSmsTables(SQLiteDatabase db) {
    // N.B.: Whenever the columns here are changed, the columns in
    // {@ref MmsSmsProvider} must be changed to match.
    db.execSQL("CREATE TABLE sms (" +
               "_id INTEGER PRIMARY KEY," +
               "thread_id INTEGER," +
               "address TEXT," +
               "person INTEGER," +
               "date INTEGER," +
               "date_sent INTEGER DEFAULT 0," +
               "protocol INTEGER," +
               "read INTEGER DEFAULT 0," +
               "status INTEGER DEFAULT -1," + 
               "type INTEGER," +
               "reply_path_present INTEGER," +
               "subject TEXT," +
               "body TEXT," +
               "service_center TEXT," +
               "locked INTEGER DEFAULT 0," +
               "error_code INTEGER DEFAULT 0," +
               "seen INTEGER DEFAULT 0" +
               ");");

    /* rest of implementation not shown */
} 
```

`_id`分配给每条短信的 是是的`PRIMARY KEY`，它唯一地标识每条短信。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T04:56:47.040

SMS_ID 对于每条消息始终是唯一的。但是还有另一个名为 Thread_ID 的列对于每个对话都是通用的，即 android 手机中的非常对话给出了唯一的 Thread_Id。但是该特定线程中的每条消息都有一个唯一的 SMS_ID

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-18T00:54:31.540

由于它使用 SQLite，即关系数据库，因此不可能有重复的标识符。

# php - 这个三元运算符有什么问题？

> ID：11075939
> 
> 赞同：1
> 
> 时间：2012-06-18T00:50:38.717
> 
> 标签：php, css, ternary

我使用这样的寻呼系统：

```
<?php
$p = $_GET['p'];

switch($p)
{
    case "start":
        $p = "pages/start.php";
        $currentPageId = 1;
    break;

    case "customers":
        $p = "pages/customers.php";
        $currentPageId = 2;
    break;

    default:
        $p = "pages/start.php";
        $currentPageId = 1;
    break;
}
?> 
```

我想将 css 设置`class="active"`为我所在页面的菜单项。

如果我打印`<li>`这样的项目，它会起作用：

```
<li><a href="?p=start" <?php if ($currentPageId == 1) {echo "class='active'";}else {} ?>>Start</a></li> 
```

但我想改用三元运算符。我尝试了这段代码，但它不起作用：

```
<li><a href="?p=start" <?php ($currentPageId == '1') ? 'class="active"' : '' ?>>Startsida</a></li> 
```

知道为什么吗？

**编辑** 所以问题是我错过了一个`echo`. 现在让我稍微扩展一下这个问题......

我需要将我的整个封装`<ul>`在`<?php ?>`标签内。所以我想要的是这样的：

```
echo "<div id='nav'>";
 echo "<ul>";

   echo "<li><a href='?p=start' /* ternary operator to match if the page I'm on is equal to $currentPageId as defined in the paging system (above), if so set class='active' else do nothing*/>Start</a></li>;
   echo "<li><a href='?p=customers' /* ternary operator to match if the page I'm on is equal to $currentPageId as defined in the paging system (above), if so set class='active' else do nothing*/>Customers</a></li>;

 echo "</ul>";
echo "</div>"; 
```

我需要这样做，因为我将根据`if`语句显示链接..“如果用户是管理员，则显示此链接，否则不显示”...有人有解决方案吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-18T00:52:35.297

您缺少回声：

```
<li><a href="?p=start" <?php echo (($currentPageId == '1') ? 'class="active"' : '') ?>>Startsida</a></li> 
```

这应该够了吧。

* * *

解决第二个问题：

```
<?php
if($something == true) {
    echo "<div id='nav'>"."\n<br>".
            "<ul>"."\n<br>".
                '<li><a href="?p=start"'. (($currentPageId == '1') ? 'class="active"' : '') .'>Startsida</a></li>'."\n<br>".
                '<li><a href="?p=customers" '. (($currentPageId == '1') ? 'class="active"' : '') .' >Customers</a></li>'."\n<br>".
            "</ul>"."\n<br>".
            "</div>"."\n<br>";
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T00:56:47.827

正如其他人指出的那样，您缺少回声。我还想指出，在这种情况下您甚至不需要三元运算符，因为在 else 情况下您什么也不做：

```
<li><a href="?p=start" <?php if ($currentPageId == '1') echo 'class="active"'; ?>>Startsida</a></li> 
```

# perl - DBIx::类示例

> ID：11075943
> 
> 赞同：5
> 
> 时间：2012-06-18T00:51:21.973
> 
> 标签：perl, orm, catalyst, dbix-class

在下面的这个例子中：

```
my $rs = $schema->resultset('CD')->search(
{
  'artist.name' => 'Bob Marley'
  'liner_notes.notes' => { 'like', '%some text%' },
},
{
  join     => [qw/ artist liner_notes /],
  order_by => [qw/ artist.name /],
}
); 
```

DBIx[食谱](http://search.cpan.org/~ribasushi/DBIx-Class-0.08120/lib/DBIx/Class/Manual/Cookbook.pod#Multiple_joins)说这是将生成的 sql：

```
# Equivalent SQL:
# SELECT cd.*, artist.*, liner_notes.* FROM cd
# JOIN artist ON cd.artist = artist.id
# JOIN liner_notes ON cd.id = liner_notes.cd
# WHERE artist.name = 'Bob Marley'
# ORDER BY artist.name 
```

但是从食谱的其余部分来看，我一直相信查询只会选择 cd.*，除非当然 prefetch 是这样使用的：

```
my $rs = $schema->resultset('CD')->search(
{
  'artist.name' => 'Bob Marley'
  'liner_notes.notes' => { 'like', '%some text%' },
},
{
  join     => [qw/ artist liner_notes /],
  order_by => [qw/ artist.name /],
  prefetch => [qw/ artist liner_notes/],
}
); 
```

以下是让我相信这一点的陈述：

```
[Prefetch] allows you to fetch results from related tables in advance 
```

谁能向我解释一下我在这里缺少什么？或不？非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T03:09:05.947

这与食谱的[前一部分](http://search.cpan.org/~ribasushi/DBIx-Class-0.08120/lib/DBIx/Class/Manual/Cookbook.pod#Using_joins_and_prefetch)`Equivalent SQL`相矛盾，看起来像是一个错误。

在执行查询并应用过滤器和排序条件时，Join 将使用连接表中的列，但它不会返回连接表的列。这意味着如果您这样做，那么*每次*您调用该语句时`$cd->artist->name`，它都需要执行额外的操作`SELECT artist.* FROM artist WHERE artist.id = ?`以获取艺术家的姓名。

 *预取也用于从预取表中选择所有列。当您实际需要这些列时，使用预取会更有效，例如，您可以在`$cd->artist->name`不需要它来执行附加查询的情况下执行此操作。但是，如果您不需要这些列，那么加载该数据就会对性能造成不必要的影响。*

# c# - XNA 相机绕 Z 轴旋转

> ID：11075944
> 
> 赞同：1
> 
> 时间：2012-06-18T00:51:45.490
> 
> 标签：c#, xna

我正在为 3D 游戏创建相机。相机由以下变量组成：

```
static Vector3 cameraLookAt = new Vector3(0, 0, 0);
static Vector3 cameraPosition;
static float cameraZoom = 25; // Field of view 
const int cameraZoomNear = 3; // The furthest the camera can zoom in 
const int cameraZoomFar = 45; // The furthest the camera can zoom out 
static float cameraPitch; // Amount to change the pitch 
static float cameraRotation; // Amount to change the rotation 
```

默认情况下，“cameraLookAt”位于 (0, 0, 0)，“cameraPosition”位于 (0, 0, 10)，这意味着相机位于“cameraLookAt”位置的正上方，可以鸟瞰下方的对象（红绿蓝xyz平面测试对象）

'cameraLookAt' 可以沿 x 和 y 轴移动，然后相对于 'cameraLookAt' 位置和 'cameraPitch' 和 'cameraRotation' 的当前值计算 'cameraPosition'

目前，您可以很好地围绕 x/y 轴移动并更改相机的俯仰角以从鸟瞰视图变为地面视图。我遇到的问题是让相机旋转工作。

当旋转值改变时，它只有在音高改变时才会有任何影响 - 从程序启动时的默认值开始（直接向下看'cameraLookAt'）

当值发生变化时，您可以围绕 Z 轴旋转，但视图也会滚动，因此当您旋转 180 度时，相机也已滚动 180 度，并且您的视图是颠倒的。

下面是确定“cameraPosition”所在位置的代码，我确定这些行中的修复行。

```
 cameraPosition = cameraLookAt + new Vector3(0, 0, 10);

        Vector3 temp = Vector3.Normalize(cameraPosition - cameraLookAt); //creates a unit length vector that points in the direction from 'lookAt' to 'position'
        cameraPosition = Vector3.Transform(cameraPosition - cameraLookAt, Matrix.CreateRotationX(cameraPitch)) + cameraLookAt;
        cameraPosition = Vector3.Transform(cameraPosition - cameraLookAt, Matrix.CreateRotationZ(cameraRotation)) + cameraLookAt;

        view = Matrix.CreateLookAt(cameraPosition, cameraLookAt, new Vector3(0.0f, 1.0f, 0.0f));
        projection = Matrix.CreatePerspectiveFieldOfView(MathHelper.ToRadians(cameraZoom), graphics.GraphicsDevice.Viewport.AspectRatio, nearClip, farClip); 
```

这里还有一个问答，我发现它可以帮助我首先对其进行编码[XNA Rotate Camera Around It's CreateLookAt "Target"](https://stackoverflow.com/questions/5906907/xna-rotate-camera-around-its-createlookat-target)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T08:20:39.450

偏移量应在不改变其长度的情况下旋转，然后添加到相机位置。

我认为应该是这样的：

```
 offset = new Vector3(0, 0, 10);

   Vector3 rotatedOffset = Vector3.Transform( offset, 
                                      Matrix.CreateRotationX(cameraPitch) 
                                      * Matrix.CreateRotationZ(cameraRotation));

   cameraPosition = cameraLookAt + rotatedOffset; 
```

# ruby - gsub - 以大写形式转换第一次出现的字符

> ID：11075947
> 
> 赞同：2
> 
> 时间：2012-06-18T00:52:23.647
> 
> 标签：ruby, regex

我目前正在研究正则表达式（使用 ruby​​），我想在单词中找到第一次出现的非数字字符并将其大写。

我一直在尝试：

```
word.gsub!(/\D{0,1}/) do |w|
    w.capitalize
end 
```

希望它只会捕获第一次出现的非数字，而是返回所有大写的字母。这样做的正确方法是什么？

非常感谢！！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T01:06:24.780

`g`in[`gsub!`](http://ruby-doc.org/core-1.9.3/String.html#method-i-gsub-21)代表“全局”，意思是“字符串中的每一个出现” 。你想要常规[`sub!`](http://ruby-doc.org/core-1.9.3/String.html#method-i-sub-21)的。那只会找到第一个。干杯!

# ruby-on-rails - Rails 控制台忽略 ActiveRecord:Relation 对象中的换行符？

> ID：11075952
> 
> 赞同：0
> 
> 时间：2012-06-18T00:53:18.793
> 
> 标签：ruby-on-rails, postgresql, activerecord

我正在浏览[AR 查询界面指南](http://guides.rubyonrails.org/active_record_querying.html)，从中我得到的印象是 Rails 控制台应该将 .explain 命令输出中的 \n 解释为换行符，而不是将其作为原始文本打印在屏幕上。至少可以说，在一行上阅读查询是不方便的。

我可以通过在控制台的任何 ActiveRecord::Relation 对象输出前添加“print”来“修复”格式问题，如规范示例中所示：

```
print User.joins(:posts).explain 
```

它应该默认以这种方式工作，还是我做错了什么？人们总是坚持预先打印吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T01:02:29.663

是的，rails 控制台`\n`默认显示字符（而不是渲染）。我总是`print`像你一样添加。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T01:02:30.507

看起来很正常。

```
>> hi = "hello\nworld"
=> "hello\nworld"
>> hi
=> "hello\nworld"
>> puts hi
hello
world
=> nil 
```

如果您只是键入一个变量或方法，它会向您显示值或返回值的原始数据转储。

# ruby - HTTP 请求中的用户代理，Ruby

> ID：11075954
> 
> 赞同：5
> 
> 时间：2012-06-18T00:53:47.433
> 
> 标签：ruby, http, user-agent

我对Ruby很陌生。我已经尝试查看在线文档，但我没有找到任何非常有效的方法。我想在以下 HTTP 请求中包含一个用户代理，即 bot get_response() 和 get()。有人可以指出我正确的方向吗？

```
 # Preliminary check that Proggit is up
  check = Net::HTTP.get_response(URI.parse(proggit_url))
  if check.code != "200"
    puts "Error contacting Proggit"
    return
  end

  # Attempt to get the json
  response = Net::HTTP.get(URI.parse(proggit_url))
  if response.nil?
    puts "Bad response when fetching Proggit json"
    return
  end 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-18T13:45:16.743

[Amir F](https://stackoverflow.com/a/11077829/507794)是正确的，您可能喜欢使用其他 HTTP 客户端，例如 RestClient 或 Faraday，但如果您想坚持使用标准 Ruby 库，您可以像这样设置您的用户代理：

```
url = URI.parse(proggit_url)
req = Net::HTTP::Get.new(proggit_url)
req.add_field('User-Agent', 'My User Agent Dawg')
res = Net::HTTP.start(url.host, url.port) {|http| http.request(req) }
res.body 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T06:25:14.737

`Net::HTTP`非常低级，我建议使用[rest-client gem](https://github.com/archiloque/rest-client) - 它还会自动跟随重定向，并且更容易使用，即：

```
require 'rest_client'

response = RestClient.get proggit_url
if response.code != 200
  # do something
end 
```

# python - python中不正确的数据测试

> ID：11075957
> 
> 赞同：0
> 
> 时间：2012-06-18T00:54:47.387
> 
> 标签：python, testing, time

我正在尝试测试用户输入，但它似乎只在第一次通过。如果我第一次给出正确的数据，它会起作用，但如果我最初给出错误的数据，然后在重新提示后使用正确的数据，它永远不会识别它是正确的。知道为什么它第一次起作用，但在那之后的任何时候都不起作用吗？这是代码，

```
testDate = open("Sales.txt")

def DateTest(Date, Position):

    firstTry = True
    validSyntax = False
    Done = False
    while Done == False:

        while validSyntax == False:

            if firstTry == True:
                print "debug 2"
                try:
                    Date = Date.strip().split(',')
                    Year = int(Date[0])
                    Month = int(Date[1])
                    Day = int(Date[2])
                    Date = (Year, Month, Day)
                except:
                    print "That is invalid input."
                    firstTry = False
                else:
                    validSyntax = True
                    print "ok got it"

            elif firstTry == False:
                NewDate = raw_input("Please input the desired %s date in the form YYYY,MM,DD: " % Position)
                try :
                    NewDate = startDate.strip().split(',')
                    Year = int(NewDate[0])
                    Month = int(NewDate[1])
                    Day = int(NewDate[2])
                    NewDate = (Year, Month, Day)
                except:
                    print "That is invalid input."
                else:
                    validSyntax = True
                    print" ok got it"

        if validSyntax == True:
            for line in testDate:
                line = line.strip().split(',')
                yearTest = int(line[0])
                monthTest = int(line[1])
                dayTest = int(line[2])
                dateTest = (yearTest, monthTest, dayTest)
                if Year == yearTest:
                    if Month == monthTest:
                        if Day == dayTest:
                            Done = True
                            print "success" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T16:10:06.970

这是一个重构版本：

```
import time

DATE_FORMAT = '%Y,%m,%d'

def parse_date(date_str, fmt=DATE_FORMAT):
    try:
        return time.strptime(date_str.strip(), fmt)
    except ValueError:
        return None

def get_date(adj='', fmt=DATE_FORMAT, prompt='Please enter the {}date (like {}): '):
    prompt = time.strftime(prompt.format(adj.strip()+' ' if adj.strip() else '', fmt))
    # repeat until a valid date is entered
    while True:
        inp = raw_input(prompt)
        res = parse_date(inp, fmt)
        if res is None:
            print('Invalid input')
        else:
            return res

def get_test_date(date, adj='', fmt=DATE_FORMAT):
    return parse_date(date, fmt) or get_date(adj, fmt)

def find_date_in_file(fname, date_str='', adj=''):
    test_date = get_test_date(date_str, adj)
    with open(fname) as inf:
        for line in inf:
            if test_date == parse_date(line):
                print('Found!')
                return test_date

def main():
    find_date_in_file('Sales.txt', '2012,01,05', 'closing')

if __name__=="__main__":
    main() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T01:21:38.907

要解决它当前不起作用的原因：您从未设置过`startDate`，因此尝试`strip().split()`将不起作用：

```
 NewDate = raw_input("Please input the desired %s date in the form YYYY,MM,DD: " % Position)
            try :
                NewDate = startDate.strip().split(',') // startDate isnt set 
```

你可以试试

```
 startDate = raw_input("Please input the desired %s date in the form YYYY,MM,DD: " % Position)
            try :
                NewDate = startDate.strip().split(',') 
```

我同意评论者的观点，即您可以尝试重构代码以合并重复的部分。

# c# - “需要对象引用”事件处理程序

> ID：11075963
> 
> 赞同：0
> 
> 时间：2012-06-18T00:55:59.683
> 
> 标签：c#, timer, event-handling

有人可以告诉我为什么我在最后一行中收到错误“需要对象引用”来调用 CheckForMessage”。谢谢。

```
class Program
{
    private void CheckForMessage(object source, ElapsedEventArgs e)
    {
        Random random = new Random();
        Console.WriteLine("Checking for new Messages");
        if ((random.Next(9) == 0)) { Console.WriteLine("hello mum"); } else { Console.WriteLine("no message"); }
    }
    static void Main(string[] args)
    {
         Timer pollTimer=new Timer(100);
    pollTimer.Elapsed+=new ElapsedEventHandler(CheckForMessage);

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T01:04:34.390

您是否收到编译错误“访问非静态成员需要对象引用..”如果将 CheckForMessage 更改为静态方法会发生什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T01:07:50.240

您试图在`CheckForMessage`没有类实例的情况下调用实例方法 ()。只需将其更改为静态方法即可：

```
private static void CheckForMessage(object source, ElapsedEventArgs e) 
```

# http - VB NET - 拦截 http webbrowser 流量

> ID：11075966
> 
> 赞同：1
> 
> 时间：2012-06-18T00:56:37.140
> 
> 标签：http, browser, traffic

对不起英语。

我写了一个有网络浏览器的 vb 网络应用程序。在这个网络浏览器中运行德州扑克 Flash 应用程序。

我有必要在手牌完成后查看卡片以将手牌保存在 txt 文件中。我可以通过哪种方式拦截每个网络浏览器的 http 流量？

PS这是合法的。我只想在手完成后才能看到它。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T17:44:15.507

在互联网论坛我找到了解决方案：拦截浏览器的http流量是easykook。

问题是只有http数据包被拦截。以 xml 打包的 flash 应用程序被忽略。Flash 应用程序在 webbrowser 中加载，而不是在 axShockwaveFlash 中。

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T01:12:35.173

要使用 .NET 拦截 HTTP 流量，您需要创建一个 Web 代理并将您的 WebBrowser 控件定向到该代理。这里有一个广泛的讨论：

[如何在 C# 中创建一个简单的代理？](https://stackoverflow.com/questions/226784/how-to-create-a-simple-proxy-in-c)

话虽如此，您几乎肯定会发现通信是加密的。毕竟，您不希望其他人仅通过嗅探线路上的数据包就能够拦截您手中的卡片。

许多在线扑克游戏允许您在牌局结束后使用明确定义的机制下载牌局历史。我熟悉的所有扑克分析工具都使用这种方法。

如果由于某种原因您不能这样做，请考虑在显示手时进行屏幕截图。您可以查看屏幕上显示牌值的关键位置，并与 52 张可能牌中的每一张（或更可能只是显示牌值和花色的区域）的图像进行比较，以确定每个位置中的牌。

# android - 在 Wireshark 中看不到我的手机的 WiFi 流量？

> ID：11075968
> 
> 赞同：6
> 
> 时间：2012-06-18T00:56:50.727
> 
> 标签：android, windows, ubuntu, wireshark

所以，我在笔记本电脑上运行 Ubuntu Linux，在手机上运行 Android 4.0.4（我认为这无关紧要，但以防万一）。我的笔记本电脑与任何网络都没有关联，我的手机在我的网络上，并且已（通过 DHCP）分配了 192.168.0.109 的 IP。

在我的笔记本电脑上，我这样做了： `ifconfig wlan0 down && airmon-ng start wlan0 && ifconfig wlan0 up`..`mon0`如果我没记错的话，这为混杂模式创建了我的界面。

我启动了 Wireshark，将其附加到`mon0`并分配了一个**显示**过滤器`ip.addr == 192.168.0.109`，回到我的手机，然后导航到一些网站。我一无所获。

此处列出的步骤 -[无法使用 wireshark 读取从 wifi 网络捕获的数据包](https://stackoverflow.com/questions/8242451/unable-to-read-packets-captured-from-wifi-network-using-wireshark)- 也无济于事。

有人告诉我我做错了什么吗？:(

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T01:48:46.273

通过以下步骤设置 WPA 或 WPA2 密钥：

1.  编辑 » 首选项
2.  协议
3.  IEEE 802.11
4.  启用解密
5.  在密钥 #1 或下一个字段中输入 WPA 或 WPA2 密钥，或者在较新的版本中，使用“编辑”按钮添加一个类型`wpa-pwd`为`myPassword:mySSID`.

您可能需要监控模式（混杂模式可能不够用）。此外，请确保在您开始监控*后*设备连接（因为 Wireshark[需要握手数据包来解密](http://wiki.wireshark.org/HowToDecrypt802.11)）。

另请参阅[这些说明](http://wolfhoundsec.blogspot.com/2010/06/monitoring-wpa2-wireless-traffic-w.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T17:25:34.613

我遇到的问题是，当我切换模式时，我使用的 wifi 卡没有出错，但它仍然不支持它们。

使用另一张卡有效。

谢谢！

# android - 屏幕打开时获取片段以覆盖 onCreateView

> ID：11075969
> 
> 赞同：1
> 
> 时间：2012-06-18T00:56:54.487
> 
> 标签：android, google-maps, tabs, android-fragments, android-mapview

我的问题是在我的 MapFragment 中没有调用 onCreateView 来重新实例化/创建在 onPause 和 onStop 下删除的 Fragment 视图（一个 MapView 容器），因此为空。因此，由于地图视图为空，片段内容显示为黑色。

这只发生在一种情况下，那就是当我关闭并再次打开屏幕时。当我在暂停后滑回地图视图片段时，onCreateView 行为正常。由于我正在开发基于位置的游戏，因此屏幕需要经常关闭。

这里的任何帮助将不胜感激！=)

我有一个 FragmentActivity，它具有三个选项卡 ViewPager、FragmentPagerAdapter 以及所有这些：

```
mapFragment = Fragment.instantiate(this, MapFragment.class.getName());
fragments.add(mapFragment);
fragments.add(Fragment.instantiate(this, NavHelperActivity.class.getName()));
fragments.add(Fragment.instantiate(this, CompassTabActivity.class.getName()));
mPagerAdapter  = new MyPagerAdapter(super.getSupportFragmentManager(), fragments);

pager = (ViewPager)super.findViewById(R.id.viewpager);
pager.setAdapter(this.mPagerAdapter); 
```

MapFragment onCreateView(..) 这样做：

```
public View onCreateView(LayoutInflater inflater, ViewGroup container,
Bundle savedInstanceState) {
// This is where you specify you activity class
Intent i = new Intent(getActivity(), MapTabActivity.class);
Window w = mLocalActivityManager.startActivity("tag", i);
mapViewContainer = w.getDecorView();
mapViewContainer.setVisibility(View.VISIBLE);
mapViewContainer.setFocusableInTouchMode(true);
((ViewGroup)
mapViewContainer).setDescendantFocusability(ViewGroup.FOCUS_AFTER_DESCENDANTS);
return mapViewContainer; } 
```

并且 onPause 必须删除地图视图：

```
if (mapViewContainer != null) {
mapViewContainer.setVisibility(View.GONE);
((ViewGroup) mapViewContainer.getParent()).removeView(mapViewContainer);
mapViewContainer = null;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T22:53:43.280

**编辑，更新，解决方案：**

首先，不要明确地为空 mapViewContainer。

设置类变量：

```
private static ViewGroup parent; 
```

使用以下代码覆盖 onStart：

```
@Override
public void onStart() {
     super.onStart();
     parent = mapViewContainer.getParent();
} 
```

在 onResume 中，执行：

```
@Override
public void onResume() {
    super.onResume();

    if (mapViewContainer != null) {
        ((ViewGroup) parent).removeView(mapViewContainer);
        ((ViewGroup) parent).addView(mapViewContainer);
    }
} 
```

其余代码应保持不变。

感谢 casaflowa。

# sublimetext - Sublime Text 2 自动成对包围选择的方式可以改变吗？

> ID：11075970
> 
> 赞同：7
> 
> 时间：2012-06-18T00:57:16.877
> 
> 标签：sublimetext, sublimetext2

在 Sublime Text 2 中，您可以键入一个字符串，然后突出显示该字符串的某些部分，如下所示：

![在此处输入图像描述](../Images/58d4633c298d7b7c2235af4a78072fc5.png)

然后，您只需键入一个 " 就可以将所选文本包含在 " 中，这将为您提供：

![在此处输入图像描述](../Images/beb5fb637d7efafc0c086de1ca8dad28.png)

当你这样做时，光标结束在 d 和 " 之间，我真的希望它在所选字符串末尾的 " 之外结束。

![在此处输入图像描述](../Images/cf15635c43c2c5b0ff1c88e2305557e0.png)

这样的事情可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T10:06:31.930

这不是我使用的功能，但以下似乎工作正常。像这样创建一个片段：

```
<snippet>
    <content><![CDATA["$SELECTION"$0]]></content>
</snippet> 
```

`$0`指定光标退出点。将其键绑定到您的`/Packages/User/Default (Linux).sublime-keymap`文件中：

```
{ "keys": ["\""], "command": "insert_snippet", 
  "args": {"name": "Packages/User/quotes.sublime-snippet"}} 
```

# php - PHP 脚本不会转储 SQL，但 phpMyAdmin 会

> ID：11075972
> 
> 赞同：1
> 
> 时间：2012-06-18T00:57:43.927
> 
> 标签：php, mysql, mysqldump

我尝试将我的数据转储为 php 脚本，但没有命令行。[所以我用这个脚本](http://davidwalsh.name/backup-mysql-database-php)创建了我的 .sql 文件，然后我尝试使用我的脚本：

```
$link = mysql_connect($host, $user, $pass);
mysql_select_db($name, $link);
$sqlFile = 'sql.sql';
$fsize = filesize($sqlFile);
$fopen = fopen($sqlFile, 'r');
$fread = fread($fopen, $fsize);
fclose($fopen);
mysql_query($fread) or die(mysql_error());
mysql_close(); 
```

当我尝试转储数据时出现错误：

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'CREATE TABLE `ps_access` (`id_profile` int(10) unsigned NOT NULL,`id_tab` int(10' at line 1 
```

但是当我将 sql 粘贴到 phpMyAdmin sql 输入选项卡中时，此 sql 代码没有问题：

```
DROP TABLE IF EXISTS `ps_access`;
CREATE TABLE `ps_access` (
`id_profile` int(10) unsigned NOT NULL,
`id_tab` int(10) unsigned NOT NULL,
`view` int(11) NOT NULL,
`add` int(11) NOT NULL,
`edit` int(11) NOT NULL,
`delete` int(11) NOT NULL,
PRIMARY KEY (`id_profile`,`id_tab`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

那么我在 php 脚本中的错误在哪里以及如何修复它以转储数据？

平均 SQL 文件约为 800KB

最好的问候，乔治！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T01:06:11.330

如果您的平均 sql 文件约为 800Kb 并且您显示的内容是其中的一部分，那么您的字符串中有多个 sql 语句（除了您显示的两个...）并且您只能运行单个 sql 查询通过（已弃用...）`mysql_query`功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T01:06:49.403

发生错误是因为 mysql_query 不支持多个查询：

> mysql_query() 向与指定链接标识符关联的服务器上当前活动的数据库发送一个唯一查询（不支持多个查询）。

（[来源](http://php.net/manual/en/function.mysql-query.php)）

从理论上讲，您可以使用[explode](http://de.php.net/manual/en/function.explode.php) + foreach 循环分别发送每个查询，但实际上这可能无法按预期工作。请参阅：[从 PHP 中加载 .sql 文件](https://stackoverflow.com/questions/147821/loading-sql-files-from-within-php#149456)

# python - Python 和 XPath

> ID：11075973
> 
> 赞同：2
> 
> 时间：2012-06-18T00:58:31.093
> 
> 标签：python, xml, xpath, xmpp

我正在尝试解析[这个 XML](http://pastebin.com/d2b611t3)

我想获取所有机制的列表，所以我尝试使用 XPATH（请建议是否有更简单的方法）来获取机制......

这是我的代码：

```
parseMessage = libxml2.parseDoc(doc)
xpathcon = parseMessage.xpathNewContext()

xpathcon.xpathRegisterNs('urn','http://etherx.jabber.org/streams')
nodes = xpathcon.xpathEval("//urn:text()")
print nodes 
```

这是我得到的错误......

```
Entity: line 1: parser error : Premature end of data in tag stream line 1 
h"/><register xmlns="http://jabber.org/features/iq-register"/></stream:features> 
```

我知道我的代码并没有删除所有机制，但首先我只想解决手头的问题。无论如何要把它变成可以解析的正确XML？我是否需要添加新标题或删除标题或做其他事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T11:52:13.050

看起来您正在尝试构建 XMPP 库。为什么不使用[现有的库](http://xmpp.org/xmpp-software/libraries/)，例如[SleekXMPP](https://github.com/fritzy/SleekXMPP)？

如果您*确实*需要构建自己的 XMPP 库，则需要使用[流解析器](https://en.wikipedia.org/wiki/Simple_API_for_XML)，例如[Expat](http://docs.python.org/library/pyexpat)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T16:13:55.873

**请**使用[现有的 XMPP 库](http://xmpp.org/xmpp-software/libraries/)之一。

下一步：您不会成功地将 XMPP 视为文档。您将能够破解它几天，让自己相信您正在做某事，然后您会意识到无法判断服务器何时完成向您发送信息，所以没有办法知道什么时候调用你有什么文件。

相反，使用基于流的解析器。 [SleekXMPP](https://github.com/fritzy/SleekXMPP)使用[xml.etree.cElementTree.iterparse](http://docs.python.org/library/xml.etree.elementtree.html#xml.etree.ElementTree.iterparse)和套接字周围的包装器，使其闻起来像文件。可能还有其他方法，例如直接使用[xml.parsers.expat](http://docs.python.org/library/pyexpat.html)。

# java - Spring + Ehcache：没有键无法从 cacheManager 中取回缓存

> ID：11075974
> 
> 赞同：1
> 
> 时间：2012-06-18T00:58:41.027
> 
> 标签：java, spring, ehcache, spring-3

我正在为我的缓存层使用 Spring + Ehcache，它正在工作。但出于某种原因，我想手动操作缓存。

```
@Cacheable(value = "productAll")
public List<Product> getAllProduct()

@CacheEvict(value = "product", key = "#product.id")
public Product saveProduct(Product product) 

@Cacheable(value = "product")
public Product getProductById(Long id) 
```

这很好用，但是当我尝试手动更新 saveProduct 函数中的 productAll 缓存时。我无法从缓存管理器取回缓存

```
Cache cache = cacheManager.getCache("productAll");
cache.get(""); 
```

在这种情况下，当我们在 getProductAll 方法中缓存时没有提供密钥时，我应该使用什么密钥？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T17:48:55.787

试试这个：

```
Cache cache = cacheManager.getCache("productAll");
cache.get(0); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-09-30T10:14:43.507

以上解决方案都不适合我，但使用 SimpleKey.EMPTY 可以：

```
Cache cache = cacheManager.getCache("productAll");
cache.get(SimpleKey.EMPTY); 
```

来自[https://www.logicbig.com/tutorials/spring-framework/spring-integration/cache-key-generation.html](https://www.logicbig.com/tutorials/spring-framework/spring-integration/cache-key-generation.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-21T14:22:24.610

```
Cache cache = cacheManager.getCache("productAll");
cache.get(0).get(); 
```

# c# - 关于c#中的验证异常

> ID：11075975
> 
> 赞同：1
> 
> 时间：2012-06-18T00:58:44.127
> 
> 标签：c#, exception, system.drawing

我目前正在开发一个需要使用**System.Drawing.dll**的 PS Vita 项目。虽然我将**System.Drawing.dll**添加到引用中，但当我初始化一个**矩形**实例时，它给了我一个**VerificationException**错误。我的问题是，如何使我的程序工作。

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T01:09:38.257

试试[PEVerify 工具 (Peverify.exe)](http://msdn.microsoft.com/en-us/library/62bwd2yd%28v=vs.80%29.aspx)。它是一个命令行实用程序，用于验证程序集中的 IL 在特定运行时环境中是否是类型安全的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T01:05:58.653

根据[MSDN](http://msdn.microsoft.com/en-us/library/system.security.verificationexception.aspx)`VerificationException`：_

> 当安全策略要求代码是类型安全的并且验证过程无法验证代码是类型安全时抛出的异常。

`System.Drawing`使用 GDI+，这需要调用本地方法。这可能是异常的原因。再看一下 PS Vita 的文档并验证您可以使用哪些库。

# c++ - C++：首先调用/初始化哪个？其成员变量的类构造函数或构造函数？

> ID：11075978
> 
> 赞同：5
> 
> 时间：2012-06-18T01:00:10.100
> 
> 标签：c++, oop, class, initialization

像这样的东西如何在 Cpp 中初始化，当在 my 中时`main`，我这样做：`Testing test`？

```
class Testing
{
public:
    Testing();
    void initalize();
    ~Testing();

    void run();

private:
    int x;
    int y;
    int z;

    bool isBugged;

    OtherClass otherClass_;
}; 
```

顺序是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T01:03:14.413

首先调用类构造函数，初始化列表可用于参数化成员构造函数调用，否则在类构造函数入口处使用它们的默认构造函数。

```
Class() : otherClass_("fred", 42) {
//ctor body
} 
```

将在的 ctor 主体之前调用`OtherClass`的 ( `OtherClass(char *name, int age)`，比如说) 构造函数。`Class`否则将使用默认构造函数（无参数）。但是由于成员在主体中可用，因此它们是在进入主体之前构建的。上面的示例是一个初始值设定项列表，并且是 的`Class`构造函数显式调用成员构造函数的机会，否则这些构造函数将在此时解析为默认构造函数调用。

成员构造的顺序是它们在类声明中出现（声明的）的顺序。如果这与您在初始化程序列表中调用构造函数的顺序不同，您的编译器应该警告您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T01:02:22.767

您没有显示构造函数的代码，但假设它微不足道，那么在其中构造的唯一内容`Testing()`就是`OtherClass`.

其他成员变量如果`test`是*自动存储*则不会初始化，如果是*静态存储则**静态初始化*。这意味着如果是*自动存储*，它们的成员等。将有一个不确定的值，就像它们被声明为函数变量一样。*`test`*`x`**

 *** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T01:08:51.787

首先，基类子对象按照声明的顺序进行初始化（尽管您的类没有这些子对象）。

然后按照声明的顺序初始化成员。如果它们出现在构造函数的初始化列表中，那么它们会按照那里的指定进行初始化；否则它们是默认初始化的。对于您的`int`和`bool`成员以及一般的 POD 类型，这意味着它们未初始化（如果对象具有静态存储持续时间，则初始化为零），除非它们在初始化程序列表中。

Finally, the constructor body is executed. If that returns normally, then the object is fully constructed.**

# extjs - 谁能告诉我为什么我在 Sencha Touch 2 中的背景图片没有显示？

> ID：11075986
> 
> 赞同：1
> 
> 时间：2012-06-18T01:02:37.917
> 
> 标签：extjs, sencha-touch-2

这是我的主视图：

```
Ext.define("Test.view.Main", {
extend: 'Ext.Panel',
config: {
cls: 'transp'
}
}); 
```

这是我的app.css（的相关部分）：

```
/* line 3, ../themes/stylesheets/sencha-touch/default/core/_reset.scss */
body, div, dl, dt, dd, ul, ol, li, h1, h2, h3,
h4, h5, h6, pre, code, form, fieldset, legend,
input, textarea, p, blockquote, th, td {
margin: 0;
padding: 0;
}
.transp
{
   background-image: url(http://support.sencha.com/assets/images/logo-sencha.png);
   background-repeat: no-repeat;
   background-size: 100% 100%;
} 
```

我知道它可以识别类，因为当我将不透明度设置为 0 时，主视图的灰色背景不会显示。有人可以帮帮我吗？我完全不知所措。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T01:23:14.567

尝试`!important`在您的 CSS 属性中使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-15T20:23:04.537

FWIW，这对我不起作用。

我有一个带有 Sencha Touch 的表单面板，必须这样做： .TxPanel .x-scroll-container { background: url('img/txbackground.png') repeat center; }

将 TxPanel 添加到表单的 cls 设置后。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-16T20:55:18.267

在处理 CSS 时，大多数人没有意识到的曾经是特异性！[http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)

所以如果你有你的背景类 .myBackground{ background-image:.. } vs sencha 的 .x-container .x-component .x-background{ background-image:..} sencha 的类有更多的选择器和更高的特异性，并将覆盖您的 .myBackground 类！即使它是在 sencha 的 css 之后声明的！

无论如何，深入了解特异性对我在煎茶中的造型有很大帮助。

# android - 可扩展列表 GroupView 的箭头需要与不在视图中居中的文本对齐

> ID：11075989
> 
> 赞同：1
> 
> 时间：2012-06-18T01:03:52.570
> 
> 标签：android, xml, android-layout, expandablelistview

我目前已经定义了一个`ExpandableListView`允许我的第二个`GroupView`列表在其上方包含标题的方法。然而，这看起来对用户没有吸引力，因为展开箭头的流向没有与文本对齐，而是在视图的中心。有没有人对我可以做些什么来使它看起来更有吸引力有任何子问题？我需要在第二组之后有一个标题。

![在此处输入图像描述](../Images/1a3cd5a97068911a6265151aa8412e33.png)

**这段代码是我`GroupView`在我的自定义适配器中设置的。**

```
public View getGroupView(int groupPosition, boolean isExpanded, View convertView,
        ViewGroup parent) {

    TextView groupTitle = null;
    LayoutInflater layoutInflater = (LayoutInflater) mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View v = null;
    if(groupPosition == 1){
        v = layoutInflater.inflate(R.layout.custom_first_major_language_group_row, null);
    } else {
        v = layoutInflater.inflate(R.layout.custom_language_group_row, null);
    }
    groupTitle = (TextView) v.findViewById(R.id.text_element);
    String myText = this.getGroup(groupPosition).toString();
    groupTitle.setText(myText);

    return v;
} 
```

**custom_language_group_row.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >
    <TextView
        android:id="@+id/text_element"
        android:layout_width="fill_parent"
        android:layout_height="48dip"
        android:textSize="20sp"
        android:textColor="#fff"
        android:layout_marginLeft="48dip"
        android:gravity="center_vertical" 
        android:text = "Language Group Name"/>
</RelativeLayout> 
```

**custom_first_major_language_group_row.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >
         <TextView 
        android:textAppearance="?android:attr/textAppearanceMedium" 
        android:text="Major Languages"
        android:textColor="#000"
        android:background="#fff" 
        android:id="@+id/majorLanguageTitle" 
        android:layout_height="wrap_content" 
        android:layout_width="fill_parent" 
        android:layout_centerHorizontal="true"></TextView>

    <TextView
        android:id="@+id/text_element"
        android:layout_width="fill_parent"
        android:layout_height="48dip"
        android:textSize="20sp"
        android:textColor="#fff"
        android:layout_marginLeft="48dip"
        android:gravity="center_vertical" 
        android:layout_below="@+id/majorLanguageTitle"
        android:text = "Language Group Name"/>
</RelativeLayout> 
```

如果您对如何使下拉箭头与文本对齐有任何想法，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-16T03:44:19.723

所以我的答案是一个有点蹩脚的答案。我遇到了这个问题，但我注意到我的文本仅偏离中心约 4-5 dp（测试后）。因此，我没有将展开/折叠图像移动到正确居中，而是将文本居中，然后将底部边距添加到 5dp 的文本视图中。所以现在我的文本视图似乎更接近展开/折叠图像。

不是首选的解决方案，但它对我有用。

# android - 当自定义视图位于选项卡中时，自定义视图中的按钮

> ID：11075992
> 
> 赞同：4
> 
> 时间：2012-06-18T01:04:15.673
> 
> 标签：android, xml, view, tabs

**问题**

是否可以从与其他三个不同的 Activity 或 Java 文件运行一个选项卡，从而允许我将第二个 Activity 连接到第一个运行的服务器。

**关于我的应用程序的一些信息**

我拥有的是一个多选项卡式应用程序，具有几种不同的布局。其中之一是交互式图形布局。在此选项卡上，其中大部分需要是我已经设置为可以工作的自定义视图，但我需要在底部有一排小部件，如按钮、滑块等。我现在正处于运行图形布局的位置将其设置为`android:name=".Tab3Activity"`清单中的主要活动（. 这是我目前拥有的代码

**标签设置**

```
 th.setup();
    TabSpec specs = th.newTabSpec("tag0");
    specs.setContent(R.id.connecttionTab);
    specs.setIndicator("Connection Tab");
    th.addTab(specs);
    specs = th.newTabSpec("tag1");
    specs.setContent(R.id.tab1);
    specs.setIndicator("Zone Manager");
    th.addTab(specs);
    specs = th.newTabSpec("tag2");
    specs.setContent(R.id.tab2);
    specs.setIndicator("",res.getDrawable(R.drawable.ic_tab_vaccontrol));
    th.addTab(specs);
    //Intent intent = new Intent().setClass(this, Tab3Activity.class); tryed using this but
    //with this tab goes ontop of all the other ones and still doesnt work.
    TabSpec spec = th.newTabSpec("Tab3").setIndicator("Graphical Layout").setContent(R.id.tab3);
    th.addTab(spec); 
```

**Tab3活动**

```
public class Tab3Activity extends Activity 
{
    private Tab3 mTab3;
    @Override
    protected void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.tab3);
        mTab3 = (Tab3) findViewById(R.id.tab3_display);
    }

    public void onAddZone(View view)
    {
        mTab3.addZone();
    }
} 
```

**Tab3（查看类）**

```
public class Tab3 extends View implements OnTouchListener
{
    public Tab3(Context context, AttributeSet attrs)
    {
        super (context, attrs);
        setFocusable(true);
        setFocusableInTouchMode(true); 
        setOnTouchListener(this);
        requestFocus();
    }
    @Override
    protected void onDraw(Canvas canvas)
    {
        super.onDraw(canvas);
        //drawings
        invalidate();
    }
    @Override
    public boolean onTouch(View v, MotionEvent event) 
    {
        //onTouch
        return true;
    }   
    public void addZone() 
    {
        //String w = "W~20~0~0~0~0~0";
        Log.d("ZoneSize", "Zone set");
        //MyApplication.preferences.edit().putString( "ZoneSize", w ).commit();
        //MyApplication.preferences.edit().putBoolean("ZoneSizeReady", true).commit();
    }
} 
```

**XML**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:id="@+id/myLayout"
    android:orientation="vertical"
    android:layout_height="match_parent" >

    <com.zone.manager.Tab3
        android:id="@+id/tab3_display"
        android:layout_width="fill_parent"
        android:layout_height="620dp" />

         <LinearLayout
            android:layout_width="match_parent"
            android:orientation="horizontal"
            android:layout_height="match_parent" >   

            <Button
                android:id="@+id/addZone"
                android:layout_width="wrap_content"
                android:onClick="onAddZone"
                android:layout_height="wrap_content"
                android:text="Add Zone" />

            <Button
                android:id="@+id/helpZone"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Help" />

            <SeekBar
                android:id="@+id/seekBar1"
                android:paddingTop="9dp"
                android:layout_width="179dp"
                android:layout_height="wrap_content" />

        </LinearLayout>
</LinearLayout> 
```

感谢您给我的任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T11:38:52.533

虽然我们希望您发布您的崩溃日志，但我建议您不要使用旧的选项卡方法（当然，除非您的客户要求您使用这些选项卡）。Android 的 ui 模式自那个标签小部件以来已经发生了巨大的变化。

实现选项卡的现代方法是使用[ActionBar](http://developer.android.com/guide/topics/ui/actionbar.html)和[Fragments API](http://developer.android.com/guide/topics/fundamentals/fragments.html)，它们自 Honeycomb 以来就已经存在，但可用于早期的 android 版本作为支持库，您可以使用 android sdk 管理器下载。基于片段的方法将为您省去很多麻烦。

至于您的主要问题，尚不清楚您要通过从不同的活动启动某些东西来完成什么，但是如果您需要从一个活动启动一个长时间运行的任务并将结果返回给另一个，您可能需要阅读在[服务](http://developer.android.com/guide/topics/fundamentals/services.html)上（特别是，[IntentService](http://mobile.tutsplus.com/tutorials/android/android-fundamentals-intentservice-basics/)很可能是您正在寻找的）

# ios - 如何通过触摸在 cocos2d 中上下移动精灵

> ID：11075994
> 
> 赞同：0
> 
> 时间：2012-06-18T01:04:48.417
> 
> 标签：ios, cocos2d-iphone

我正在尝试上下移动我的精灵。这是我的代码。我不知道问题所在。可能是内容大小搞砸了。精灵只是不断消失。

```
 CGSize winSize = [[CCDirector sharedDirector] winSize];
    player = [CCSprite spriteWithFile:@"Player.png" 
                                           rect:CGRectMake(0, 0, 27, 40)];
    player.position = ccp(player.contentSize.width/2, winSize.height/2);
        [self addChild:player z:1]; 
```

```
 (void) registerWithTouchDispatcher
    {
        [[CCTouchDispatcher sharedDispatcher] addTargetedDelegate:self 
                                                 priority:0 swallowsTouches:YES];
    }

    -(BOOL) ccTouchBegan:(UITouch *)touch withEvent:(UIEvent *)event
    {
        return YES;
    }

    -(void)setPlayerPosition:(CGPoint)position {
        player.position = position;
    }

    -(void) ccTouchEnded:(UITouch *)touch withEvent:(UIEvent *)event  {
        CGPoint touchLocation = [touch locationInView: [touch view]];       
        touchLocation = [[CCDirector sharedDirector] convertToGL: touchLocation];
        touchLocation = [self convertToNodeSpace:touchLocation];

        CGPoint playerPos = player.position;
        CGPoint diff = ccpSub(touchLocation, playerPos);
        if (abs(diff.x) > abs(diff.y)) {
            if (diff.x > 0) {
                playerPos.x += contentSize_.width;
            } else {
                playerPos.x -= contentSize_.width; 
            }    
        } else {
            if (diff.y > 0) {
                playerPos.y += contentSize_.height;
            } else {
                playerPos.y -= contentSize_.height;
            }
        }

        if (playerPos.x <= (contentSize_.width *contentSize_.width) &&
            playerPos.y <= (contentSize_.height * contentSize_.height) &&
            playerPos.y >= 0 &&
            playerPos.x >= 0 ) 
        {
            [self setPlayerPosition:playerPos];
        }
    } 
```