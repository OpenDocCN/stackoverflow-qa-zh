# StackOverflow 问答 11515000-11515999

# entity-framework - 在企业项目中管理实体框架（包含数百个表）

> ID：11515000
> 
> 赞同：1
> 
> 时间：2012-07-17T01:47:22.870
> 
> 标签：entity-framework, entity-framework-4, ef-code-first, code-first

我在工作中使用实体框架并遇到了一些问题。

通常我听说创建包含与某些域相关的表的小型 Edmx 文件，即：Help Desk Edmx、HR Edmx 等。与其将所有表加载到一个大 Edmx 中，这会更简单，但出于性能考虑（在主要是设计和构建时间），这是不可行的。

我遇到了一些麻烦，首先是关于公共表，即：Employees Tables，它完全是 Edmx 的，当我使用 Employee 类引用并且对两个命名空间都有使用时发生冲突，然后我必须引用 Empoyee全名为 MyCompany.HelpDesk.Employee 的类。

看起来不自然。

我发现自己在所有 EDMX 中反复添加相同的表，这是一种返工，我花了几分钟时间在实体框架设计中添加一个表，因为我在添加表对话框中有 2k 个表。

也许 VS2012 可能是在同一个 Edmx 文件中加载 2k 表的解决方案（因为可以拆分设计器），但我不相信，因为它也会延迟编译，而不仅仅是打开设计器。

另一种选择可能是 Code First，但它没有一个像样的工具来将数据库逆向工程到类，因为它尝试从数据库加载所有表，大约需要 2 小时！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T09:00:38.683

您的问题通常没有解决方案。EF 支持某种方式[在多个 CSDL](http://blogs.msdn.com/b/adonet/archive/2008/11/25/working-with-large-models-in-entity-framework-part-2.aspx)文件之间共享公共实体，但它有很多缺点：

*   设计器不支持它（如果 VS2012 设计器支持，我没有尝试过）->您将 EDMX 文件维护为 XML
*   它仅在 CSDL 级别（类）上受支持 -> 您仍然有单个 SSDL（表）和 MSL（映射），您必须手动维护它们
*   仅与共享实体的单向关系（共享实体只能具有与其他共享实体的导航属性）。

VS2012 将允许您在单个 EDMX 中处理多个图表，但我真的不知道这对于 2k 表会有多快。

恕我直言，2k 表听起来不像 EF 映射功能的用例——尤其是对于您希望为您生成代码的功能。大规模开发通常涉及大规模编码或开发自己的工具。您当前的方式（通过再次映射共享实体）是使用默认 EF 工具的最佳方式。

如果您为 POCO 类使用 T4 生成器，您甚至可以修改 T4 模板以对所有 EDMX 文件始终使用相同的类。POCO 类仅由类名映射 - 命名空间没有任何区别。这将需要您在 T4 生成器中投入一些精力，以确保共享类仅生成一次并从您的所有模型特定类中正确引用。

顺便提一句。启动应用程序并加载所有映射需要多长时间？您是否使用预生成的 EF 视图？

# java - Android CookieSyncManager

> ID：11515001
> 
> 赞同：1
> 
> 时间：2012-07-17T01:47:47.230
> 
> 标签：java, android, http, cookies

当我们使用它时，cookies 是否保持持久性？手机重启后 cookie 是否仍然可用？我指的是这个链接：http: [//developer.android.com/reference/android/webkit/CookieSyncManager.html](http://developer.android.com/reference/android/webkit/CookieSyncManager.html)

假设我们正在使用 DefaultHttpClient，CookieSyncManager 会知道抓取 cookie，或者是否还有其他命令，然后我们仍需要触发链接中的命令？我们如何取回饼干？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T00:46:54.207

尝试设置 CookieSyncManager.getInstance().sync(); 在“onPageFinished”方法中，这对我来说就像一个魅力，即使重新启动它也会对cookie进行管理:)

这里的代码：

```
public void onCreate(Bundle savedInstanceState) {   
CookieSyncManager.createInstance(web.getContext());
        web = new WebView(this);  
        web.getSettings().setJavaScriptEnabled(true);
    web.loadUrl(url);
        web.setWebViewClient(new myWebClient());
... 
```

}

public class myWebClient extends WebViewClient { @Override public void onPageStarted(WebView view, String url, Bitmap favicon) { // TODO 自动生成的方法存根 super.onPageStarted(view, url, favicon); }

```
 @Override
    public void onPageFinished(WebView view, String url) {
        super.onPageFinished(view, url);
        CookieSyncManager.getInstance().sync();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T08:43:02.307

根据[Cookies & Webview - Android 中的 CookieSyncManager！](https://stackoverflow.com/questions/5729266/cookies-webview-cookiesyncmanager-in-android)似乎 CookieSyncManager 与 android 的内置 webview 一起使用：

```
CookieSyncManager.createInstance(webview.this); 
```

因此，如果他们的应用程序不是基于 web 视图，那么这不是一个人会使用的东西。

# asp.net - 如何编写一个好的更新存储过程？

> ID：11515005
> 
> 赞同：-1
> 
> 时间：2012-07-17T01:48:26.280
> 
> 标签：asp.net, sql-server

我想写一个存储过程（SQL server 2008r2），假设我有一个表：

```
人

列：
Id int (pk)
Date_of_birth 日期不为空
电话 int 允许 null
地址 int 允许 null
名称 nvarchat(50) 不为空

```

样本数据： `Id=1,Date_of_birth=01/01/1987,phone=88888888,address=null,name='Steve'`

存储过程中的更新语句，假设参数已经声明： `Update person set Date_of_birth=@dob,phone=@phone,address=@address,name=@name where id=@id`

该表有一个触发器来记录任何更改。现在我有一个用于更新上述人员表的 asp.net 更新页面

问题是，如果用户只想更新 address='apple street' ，上面的更新语句将更新所有字段但不检查原始值是否=新值，然后忽略该字段然后检查下一个字段。所以我的日志表将记录所有事件，即使列不会被更新。

在这一点上，我的解决方案

1.  通过 id 选择所有值并将它们存储到局部变量中。使用 if-else 检查并生成更新语句。最后动态运行生成的SQL（sp_executesql）
2.  通过 id 选择所有值并将它们存储到局部变量中。使用 if-else 分别检查和更新每个字段：

`If @dob <> @ori_dob
Begin
Update person set date_of_birth=@dob where id=@id
End` 

可能这是一个愚蠢的问题，但如果您有更好的想法，请告诉我，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T13:07:42.633

*This is an answer to a comment by the OP and does not address the original question. It would, however, be a rather ugly comment.*

You can use a statement like this to find the changes to `Address` within an `UPDATE` trigger:

```
select i.Id, d.Address as OldAddress, i.Address as NewAddress
  from inserted as i inner join
    deleted as d on d.Id = i.Id
  where d.Address <> i.Address 
```

One such statement would be needed for each column that you want to log.

You could accumulate the results of the `SELECT`s into a single table variable, then summarize the results for each `Id`. Or you can use `INSERT`/`SELECT` to save the results directly to your log table.

# image-processing - 神经网络图片分类

> ID：11515013
> 
> 赞同：-1
> 
> 时间：2012-07-17T01:49:05.897
> 
> 标签：image-processing, machine-learning, neural-network, feature-extraction

我想使用神经网络实现图片分类。我想知道从图片中选择特征的方法以及要使用的隐藏单元或图层的数量。

现在我有一个想法，将图像的大小更改为 50x50 或更小，以便特征的数量更少，并且所有输入的大小都是恒定的。特征将是每个像素的 RGB 值。会不会很好或还有其他更好的方法吗？

此外，我决定使用 1 个隐藏层，其单元数是输入中的一半。我可以更改数字以获得更好的结果。还是我需要更多层？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T07:02:58.803

50x50 图像特征矩阵是 2500 个具有 RGB 值的特征。您的神经网络可能会记住这一点，但很可能在其他图像上表现不佳。

因此这类问题更多是关于图像处理、特征提取。您的功能将根据您的要求而改变。请参阅[有关图像处理和神经网络的类似问题](https://stackoverflow.com/questions/11427411/feature-extraction-from-neural-networks)

1层网络只适合线性问题，你确定你的问题是线性的吗？否则你将需要多层神经网络

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T14:41:29.643

神经网络成功学习了许多图像数据集，例如

*   [MNIST](http://yann.lecun.com/exdb/mnist/)（在这里你会发现很多论文链接）
*   [诺布](http://www.cs.nyu.edu/~ylclab/data/norb-v1.0/)
*   和[CIFAR-10/100](http://www.cs.toronto.edu/~kriz/cifar.html)。

并不是说您需要很多训练示例。通常一个隐藏层就足够了。但是很难确定“正确”的神经元数量。有时隐藏神经元的数量甚至应该大于输入的数量。当您使用 2 个或更多隐藏层时，您通常需要更少的隐藏节点并且训练会更快。但是当你有很多隐藏层时，很难在第一层训练权重。

一种专门为图像设计的神经网络是卷积神经网络。它们通常比多层感知器工作得更好，而且速度更快。

# objective-c - 从超类调用方法

> ID：11515014
> 
> 赞同：0
> 
> 时间：2012-07-17T01:49:07.340
> 
> 标签：objective-c, ios

我不能吗？我需要从类中调用一个方法`A`，该方法在`B`从类继承的类`A`中。

```
@interface B : A 
```

在课堂`A`上，当我尝试做这样的事情时：

```
[B foo]; 
```

我有一个错误，导入也有`B`一个`A`错误。

有什么解决方案可以从类中调用该方法`A`吗？提前谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T01:52:31.650

如果您需要从父级调用子级的方法，这很好地表明该方法从一开始就真正属于父级。

将方法移至`A`，您的问题就会消失。

# android - 如何为小部件创建快捷方式？

> ID：11515016
> 
> 赞同：0
> 
> 时间：2012-07-17T01:49:20.070
> 
> 标签：android, android-widget

我已经创建了小部件，但是这个小部件不直接显示在主屏幕上，我希望它直接显示在主屏幕上，在应用程序部署后立即显示，就像快捷方式一样，点击快捷方式小部件会转到应用程序

有人可以建议我吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T02:06:48.073

> 我希望它在部署应用程序后立即直接显示在主屏幕上

在用户安装您的应用程序时，您不能运行任何代码。您必须等待他们启动它，或者对于主屏幕小部件，您必须等待他们明确地将其放置在主屏幕上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T02:09:10.543

您必须在清单中添加一条意图行，以通过快捷方式公开您想要执行的操作。

见：[http ://android-developers.blogspot.sg/2009/11/integrating-application-with-intents.html?m=1](http://android-developers.blogspot.sg/2009/11/integrating-application-with-intents.html?m=1)

# java - Eclipse 中的错误说我的 Main.java 不在文件夹中，但它不存在

> ID：11515019
> 
> 赞同：-1
> 
> 时间：2012-07-17T01:49:31.217
> 
> 标签：java, android, eclipse, file

嘿，谢谢大家的回答以及“跳过 48 帧！” 生病在这里发布错误

```
07-16 21:29:23.119: E/Trace(641): error opening trace file: No such file or directory (2)
07-16 21:29:23.309: D/dalvikvm(641): GC_FOR_ALLOC freed 73K, 3% free 8051K/8259K, paused 44ms, total 46ms
07-16 21:29:23.309: I/dalvikvm-heap(641): Grow heap (frag case) to 8.497MB for 614416-byte allocation
07-16 21:29:23.390: D/dalvikvm(641): GC_CONCURRENT freed 1K, 3% free 8650K/8903K, paused 33ms+16ms, total 79ms
07-16 21:29:23.709: I/Choreographer(641): Skipped 42 frames!  The application may be doing too much work on its main thread.
07-16 21:29:23.770: D/gralloc_goldfish(641): Emulator without GPU emulation detected.
07-16 21:29:29.019: I/Choreographer(641): Skipped 48 frames!  The application may be doing too much work on its main thread. 
```

这是main.java

公共类主要扩展活动{

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
Thread logoTimer = new Thread(){
    public void run(){
        try{
            sleep(5000);
            Intent menuIntent = new Intent("com.kamath.thebasics.MENU");
            startActivity(menuIntent);
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        finally{
        finish();   
        }
    }

};
logoTimer.start();
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
} 
```

}

和 menu.java

公共类菜单扩展 Activity {

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);
}

@Override
protected void onPause() {
    // TODO Auto-generated method stub
    super.onPause();
}

@Override
protected void onResume() {
    // TODO Auto-generated method stub
    super.onResume();
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T03:57:04.943

试试这个（在你的主要活动的 onCreate 内）：

```
Thread myThread = new Thread(){

        public void run(){

            try{
                sleep(5000);

            }catch(InterruptedException e){
                e.printStackTrace();

            }finally{
                Intent menuIntent = new Intent("com.kamath.thebasics.MENU");
                startActivity(menuIntent);

            }
        }
    };

    myThread.run(); 
```

也许这有帮助。

# java - 折叠选项，而不是 `if maybeT.isNone()`

> ID：11515022
> 
> 赞同：0
> 
> 时间：2012-07-17T01:49:55.967
> 
> 标签：java, functional-programming, functional-java

这是一个与[为什么 Option 没有折叠方法类似的问题？](https://stackoverflow.com/questions/5328007/why-doesnt-option-have-a-fold-method)，但对于功能-java。

如果选项为无，我想执行一些副作用。除了 有什么我可以使用的`if maybeT.isNone()`吗？

我的思路是这样的`Option<B> optionA.fold(Effect<Unit> none, F<A, B> some)`。

有什么已经存在的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T15:27:42.750

您可以使用[选项方法](https://github.com/functionaljava/functionaljava/blob/master/core/src/main/java/fj/data/Option.java#L131)

```
public final <B> B option(final P1<B> b, final F<A, B> f) {
  return isSome() ? f.f(some()) : b._1();
} 
```

# ruby-on-rails - 从加连接表嵌套的 Rails

> ID：11515027
> 
> 赞同：1
> 
> 时间：2012-07-17T01:50:29.080
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我有以下模型和运行 rails 3.01：

```
# file: app/models/product.rb
class Product < ActiveRecord::Base
  has_many :categories, :through => :product_categories
  has_many :product_categories, :dependent => :destroy
  accept_nested_attributes_for :product_categories
end

# file: app/models/category.rb
class Category < ActiveRecord::Base
  has_many :products, :through => :product_categories
  has_many :product_categories, :dependent => :destroy
end

# file: app/models/product_category.rb
class ProductCategory < ActiveRecord::Base
  belongs_to :product
  belongs_to :category
end 
```

ProductCategory 是我的连接表。我在我的产品表格中叫什么？我是在 Categories 表还是 ProdcutCategories 表上构建的？我真的很困惑我应该如何/哪些模型嵌套在我的产品中。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T03:38:20.837

该模型已配置为接受`products_categories`关联的属性。在您的表单中，只需像这样引用它：

```
<%= f.fields_for :products_categories do |pc| %>
  # fields go here 
```

`products_categories`请记住，在此表单呈现任何内容之前，您需要为关联构建新对象：

```
products.products_categories.build 
```

# php - 如何使用 CI 谷歌地图库启用默认打开信息窗口

> ID：11515029
> 
> 赞同：0
> 
> 时间：2012-07-17T01:50:54.390
> 
> 标签：php, codeigniter, google-maps

我正在使用**[biostall 的 codeigniter 谷歌地图库](http://biostall.com/codeigniter-google-maps-v3-api-library)**来显示我的谷歌地图。我按照说明显示信息窗口并在页面上正确显示地图。目前信息窗口仅在单击指针时打开。到目前为止的进展就像演示中显示的紫色图标。点击**[快速演示](http://biostall.com/demos/google-maps-v3-api-codeigniter-library/multiplemarkers)**。

我无法让信息窗口默认打开。请指教。

配置代码如下：

```
// map
$this->load->library('googlemaps');
// Initialize our map. Here you can also pass in additional parameters for customising the map (see below) 
$config['center'] = '37.4419, -122.1419';
$config['zoom'] = '14';
$config['map_width'] = '500px';
$this->googlemaps->initialize($config);

// set markers
$marker = array();
$marker['position'] = '37.4419, -122.1419';
$marker['infowindow_content'] = '<b>We are here!!</b>;
$marker['animation'] = 'DROP';
$this->googlemaps->add_marker($marker);

// Create the map. This will return the Javascript to be included in our pages <head></head> section and the HTML code to be placed where we want the map to appear. 
$data['map'] = $this->googlemaps->create_map(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T14:54:23.440

我遇到了同样的问题，您的模拟点击解决方案效果很好。但是我的信息窗口太大/我的缩放太高/我的 map-div 太小，所以 map-div 剪裁了信息窗口。所以我稍微修改了你的codeline，这个问题也解决了。

```
$config["onload"] = 'window.setTimeout("google.maps.event.trigger(marker_0, \'click\');",300);'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T12:19:36.770

感谢您使用我的图书馆。尝试将其添加到 $config 参数列表中：

```
$config['onload'] = "google.maps.event.trigger(marker_0, 'click');"; 
```

这将基本上模仿页面加载时对第一个标记的点击。

我没有对此进行测试，但它应该可以工作。如果它不让我知道，我会仔细看看。

祝你好运！

# ruby-on-rails - 不可能在 chrome 扩展中跨站点 ajax api 调用？

> ID：11515031
> 
> 赞同：0
> 
> 时间：2012-07-17T01:51:13.130
> 
> 标签：ruby-on-rails, ajax, ruby-on-rails-3, google-chrome-extension

我正在尝试创建一个调用我的 rails 应用程序 api 的 chrome 扩展程序。目前api返回json并且工作正常，但是当我尝试将它构建到chrome扩展中时，它说：

> 由于内容安全策略，拒绝从“http://mysite.com/demo?q=hello?callback=jQuery16409466155741829425_1342489669670&_=1342489677171”加载脚本。

我查找了文档[http://code.google.com/chrome/extensions/contentSecurityPolicy.html](http://code.google.com/chrome/extensions/contentSecurityPolicy.html)，听起来我不能这样做，除非我将我的网站实现为 https 版本。（在“放宽默认策略”部分）我不确定我是否理解正确，因此做出如此大的改变感觉很荒谬。我误解了吗？或者有解决方法吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T11:05:08.983

在 Chrome 扩展程序中，允许跨站点 XMLHttpRequests，**前提是**您在清单文件中定义源 - 请参阅[http://code.google.com/chrome/extensions/xhr.html](http://code.google.com/chrome/extensions/xhr.html)。

JSONP 实现使用标签加载外部脚本`<script>`，并将其插入到文档中。除非源通过[`"content_security_policy"`](http://code.google.com/chrome/extensions/contentSecurityPolicy.html#H2-3)条目被列入白名单，否则当[清单版本](http://code.google.com/chrome/extensions/manifestVersion.html)2 处于活动状态时不能使用 JSONP（不要**使用**清单 v1 来克服这个问题，因为它已被弃用，并且已经存在合适的替代方案）。

当您无法接收 JSON 响应而不是 JSONP 时，请使用普通请求获取数据，切断回调，然后解析它。例如：

```
// response is the response from the server
// Received through `XMLHttpRequest`, jQuery.ajax, or whatever you used
// cuts of jQuery....(  and the trailing )
response = response.replace(/^[^(]*\(/, '').replace(/\);?$/, ''); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T02:03:11.947

[默认情况下，由于相同的来源策略](http://en.wikipedia.org/wiki/Same_origin_policy)，浏览器不允许这样做。

但是，您可以通过发出[jsonp](http://en.wikipedia.org/wiki/JSONP)请求来解决此问题。

当您使用 jquery 时，使用[getJSON](http://api.jquery.com/jQuery.getJSON/)方法超级容易

# ruby-on-rails - 带有 Rails/Sinatra 的只读 Web 应用程序

> ID：11515033
> 
> 赞同：2
> 
> 时间：2012-07-17T01:51:28.090
> 
> 标签：ruby-on-rails, database, web-applications, sinatra

我正在 Rails 中开发一个管理 Web 应用程序。由于各种实施细节并不真正相关，支持此应用程序的数据库将拥有支持另一个单独网站所需的所有内容。似乎有两个明显的选择：

1.  构建一个 Web 应用程序，以某种方式以只读方式从同一数据库中读取数据。
2.  将 RESTful API 添加到原始应用程序并构建第二个站点，以便它从 API 获取其内容。

我的问题是：这些选项中的任何一个都可行吗？如果是这样，它们中的哪一个似乎是更好的选择？Rails、Sinatra 或任何其他基于 Rack 的 Web 框架是否特别适合此类项目？（我倾向于 Sinatra，因为它看起来比 Rails 更轻量级，而且我认为我的 Rails 经验会很好地延续到它。）

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T06:19:02.910

这两个都是可行的，我过去都使用过，但我会使用 API 方法。

快速免责声明：尚不清楚的一件事是这些应用程序的功能有何不同。例如，我可以想象旧的应用程序是处理单个记录的 CRUD 应用程序，而新的应用程序是执行大型复杂聚合查询的报告应用程序。这使得共享数据库（也许）更具吸引力，因为您访问数据的方式重叠非常小。我在下面假设情况*并非*如此。

无论如何，API方法。首先，坏处：

*   另一个依赖项（旧应用程序）。当它中断时，它会关闭两个应用程序。
*   多一跳来获取数据，因此延迟更高。
*   使用现有代码不如编写新代码有趣。只是。

但另一方面，好的：

*   对架构更改更具弹性。您的“旧”应用程序的 API 可以进行测试，您可以随心所欲地使用数据库（在旧应用程序的上下文中），并保持您的 API 符合其规范。您的新应用程序不会知道其中的区别，这很好。抽象 FTW。这是“另一个依赖”硬币的反面。

*   同一点，但从不同的角度来看：在我们共享数据库的方法中，您的架构 + 所有 SQL 实际上就是您的 API，它有两个客户端，旧应用程序和新应用程序。除非您的两个应用程序使用相同的数据做非常不同的事情，否则这绝不是最好的 API。定义太差了。

*   数据库管理员/仪器更好。假设您弄乱了一些查询并软管您的数据库。是哪个应用程序？这些查询来自哪里？基本上，可以与数据库交互的东西越少越好。相关：在一处优化您的读取查询，而不是两处。

*   如果您在现有应用程序中使用 RESTful 路由来执行非 API 操作，我猜您的 API 需求将与您现有的控制器代码有很大的重叠。这可能只是将您的数据转换为 JSON 而不是将其传递给视图的问题。Rails 使得使用动作来响应 API 和用户驱动的请求变得非常容易。因此，如果适用的话，这是一个巨大的 DRY 胜利。

*   如果您发现您的新应用*确实*需要一些可写性，会发生什么？或者至少可以访问您的旧应用程序不关心的某些字段（也许您使用脚本添加了它）？在共享数据库方法中，这很糟糕。另一方面，只需稍微扩展 API 即可。

基本上，我选择共享数据库方法的唯一方法是我讨厌旧代码并想重新开始。这是可以理解的（我已经做到了），但这不是架构上最合理的选择。

要考虑的第三个选项是在两个应用程序之间共享代码。例如，您可以生成模型代码。现在，您的 API 实际上是一些知道如何与数据库对话的 Ruby 类。更进一步，您可以编写一个 Sinatra 应用程序并将其安装在现有的 Rails 应用程序中并重用它的大部分。然后只需制定路由，使它们看起来像外部世界的独立应用程序。这是否实用显然取决于您的具体情况。

在具体技术方面，Sinatra 和 Rails 都是不错的选择。我倾向于 Rails 用于较大的项目，而 Sinatra 则用于较小的项目，但这只是我。做感觉好的事。

# jquery - 循环列表的jquery动画

> ID：11515034
> 
> 赞同：1
> 
> 时间：2012-07-17T01:51:28.360
> 
> 标签：jquery

我有一个要旋转的 li 元素的垂直列表，使其显示在滚轮上（如老虎机上的图标或密码锁上的数字）。我可以通过简单地添加以下内容来创建它：

```
$('#list li:first').before($('#list li:last')); 
```

问题是有时列表正是可见元素长度的数量，而我想保留的是最后一个元素从底部滑落并同时滑到顶部以创建圆形列表的外观。一个想法是如果列表元素的长度小于可见长度，则复制列表元素，并为每个 li 元素的 margin-top 属性设置动画以向下滑动，但是我有每个列表元素的重复项，有没有更好的方法？

任何帮助，将不胜感激。

编辑：基于 Alex Ball 下面的响应的旋转函数。

```
function rotate(direction){
    var firstElem = $('#list ul li:first');
    var lastElem = $('#list ul li:last');
    var elemHeight =  firstElem.height();

    if(direction == 'down') {
        firstElem.animate({'marginTop': '+=' + elemHeight + 'px'}, 500, 'linear', function(){
            $(this).css({'margin-top':0}).before(lastElem);         
        });
    }

    if(direction == 'up') {
        firstElem.animate({'marginTop': '-=' + elemHeight + 'px'}, 500, 'linear', function(){
            lastElem.after($(this));
            $(this).css({'margin-top':0});
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T07:07:28.867

这是一个例子（我使用了老虎机的想法，因为它很漂亮）

我从一些 div 容器和图像列表 (li) 开始，但这个想法对其他类型有效。

死记硬背的JS：

```
function rotate(id, n){

    console.log(id);    

     $('#'+id+' ul li:first').animate({'margin-top': '-='+$(this).height()+'px'}, 400, 'linear', function(){

          $(this).css({'margin-top':0}).parent().append($(this));

          i++;

          console.log('id: '+id+' i: '+i+' n: '+n);

          if(i < n) rotate(id, n);

     });

} 
```

见实际操作[FIDDLE](http://jsfiddle.net/A2dau/)

# ajax - 通过 AJAX 向 PHP 发送一个 Javascript 变量

> ID：11515036
> 
> 赞同：0
> 
> 时间：2012-07-17T01:51:36.660
> 
> 标签：ajax

我一直在浏览论坛，但没有解决我的问题。这很简单，真的，如果你能解释你的答案，我将不胜感激。

我是 AJAX 和 Javascript 的新手，我需要从我的 javascript 代码中发送一个变量，然后基本上将其“转换”为 php。这是我到目前为止所拥有的：

```
var selected = rowData.ID

jQuery.ajax({
    url: "test.php",
    type: 'POST',
    data: { selected },
    cache: false
}); 
```

我在代码中进一步使用这个选定的值。我使用 PHP 来显示（选择的值）。

```
"vars": [ 
    "(value of selected)" 
], 
```

但是，我似乎无法使我的 ajax 请求工作并将变量发送到我的 PHP 文件。这是我的 PHP 文件的样子：

```
$row = $_POST["selected"]; 
```

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T03:32:08.367

尝试用这个替换你的“数据：”：

```
 data: { 'selected': selected }, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-26T03:00:10.113

所以这是一个非常延迟的答案，但我也无法获得要发送的变量。我没有使用 php，但看到了 vlscanner 提供的大量示例，但谁知道为什么它不起作用。

我偶然发现了这个关于如何发送多个参数的解释，它同样适用于发送一个参数。 [http://weblog.west-wind.com/posts/2012/May/08/Passing-multiple-POST-parameters-to-Web-API-Controller-Methods](http://weblog.west-wind.com/posts/2012/May/08/Passing-multiple-POST-parameters-to-Web-API-Controller-Methods)

多：

```
data: JSON.stringify({ Album: album, User: user, UserToken: userToken }), 
```

或只有一个：

```
data: JSON.stringify({ Album: album}), 
```

我不是时间、效率等方面的专家，JSON.stringify 可能会增加不必要的批量，并且可能有一些正当的理由在没有 JSON.stringify 的情况下发送数据不起作用。但是，如果您陷入困境并且需要一些工作，这可能会帮助我们这些仍在问这个问题的人。

我怀疑我的没有工作，因为我将它发送到一个可能需要参数以 JSON 字符串形式出现的 asp 方法。接下来我得研究一下。每一步都是新的发现。

# c - 为什么在C中将0xffffffff转换为十进制是-1？

> ID：11515037
> 
> 赞同：3
> 
> 时间：2012-07-17T01:51:42.153
> 
> 标签：c

我以为结果会是`(2**32 - 1)`

```
#include <stdio.h>
int main(){
  unsigned int a = 0xffffffff;
  printf("the size of int a %d\n",a);
  return 0;
} 
```

但它给了我`-1`，有什么想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-17T01:54:32.927

您使用了错误的格式字符串。`%d`是有符号的十进制整数。你应该使用`%u`.

`printf`不知道您传递给它的变量的类型。您可以选择正确的格式字符串。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-17T01:53:41.207

您要求`printf()`将该值解释为有符号整数，其范围为`-(2**31)`to `(2**31)-1`。基本上，高位是符号位。阅读[二进制补码](https://en.wikipedia.org/wiki/Two%27s_complement)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-05-13T02:25:03.423

格式说明`%d`符用于打印有**符号**整数，并且由于您传入`0xffffffff`，`printf`因此正确输出`-1`.

问题是说明`%d`符用于有**符号**整数。你需要使用`%u`.

```
printf("%d",0xffffffff); // Will print -1

printf("%u",0xffffffff); // Will print 4294967295 
```

By the way, I would expect to see a compiler warning here -- something along the lines of *"printf() expects int value but argument has unsigned long int type"*, because most compilers detect the type mismatch.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T01:55:44.317

因为 %d 代表有符号整数。对于有符号整数，当整数为负时设置高位（第 32 位），或视情况而定。在 0xFFFFFFFF 中设置了高位，因此当转换为有符号整数时，结果为负。要将高位视为数字本身的一部分，请使用无符号类型

```
%lu or %u 
```

# php - 如何让登录表单与 symfony2 安全性一起使用

> ID：11515042
> 
> 赞同：0
> 
> 时间：2012-07-17T01:52:51.643
> 
> 标签：php, security, symfony

这是我的安全登录设置

```
form_login:
                # the user is redirected here when he/she needs to login
                login_path:                     /login

                # if true, forward the user to the login form instead of redirecting
                use_forward:                    false

                # submit the login form here
                check_path:                     /login_check

                # by default, the login form *must* be a POST, not a GET
                post_only:                      true 
```

我想问我是否需要制作控制器并为 /login 和 /login 检查定义路由

因为我没有在任何地方定义这些路线

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T02:30:28.863

只需使用`FOSUserBundle`为您准备的一切。

[https://github.com/FriendsOfSymfony/FOSUserBundle](https://github.com/FriendsOfSymfony/FOSUserBundle)

# html - 创建一个倾斜的元素

> ID：11515044
> 
> 赞同：0
> 
> 时间：2012-07-17T01:53:25.183
> 
> 标签：html, css, css-shapes

我正在尝试在我的网页中实现此效果..

![在此处输入图像描述](../Images/f650bdca56fe2618582f793b3396c6d9.png)

红框是我放置菜单的地方，我希望红框的底部倾斜。斜面右侧的部分需要透明，因为背景中可能存在灰色的图像。

我唯一能想到的是旋转元素，但这也会旋转我不想要的元素的内容。只有红色元素（将是纯色）的底部 bg 应该倾斜。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T02:11:51.077

您可以这样做，只需将旋转的部分突出显示为蓝色，您就可以看到会发生什么；）

如果您更改大小，您可能必须使用 top: 和 left: 值

编辑：添加了一个小菜单示例（真的很小^^）

[jsfiddle链接](http://jsfiddle.net/7cnfc/32/)

这是html部分：

```
<div id="menucontainer">
    <ul>
        <li>some</li>
        <li>menu</li>
        <li>here</li>
    </ul>
</div>
<div id="rotatedDiv">
</div>
<div id="background"></div> 
```

这里是css部分：

```
#menucontainer{
    position: relative;
    z-index: 100;
    background: red;
    height: 100px;
}

#menucontainer ul {
    position: absolute;
    bottom: 0px;
    left: 30px;    
}

#menucontainer li {
    list-style: none;
    margin-left: 10px;
    background: #123;
    display: inline-block;
}

#rotatedDiv {
    z-index: 99;
    background: blue;
    position: absolute;
    top: 14px;
    left: -5px;
    height: 90px;
    width: 200%;
    -moz-transform: rotate(-2deg);
    -webkit-transform: rotate(-2deg);
    -o-transform: rotate(-2deg);
    -ms-transform: rotate(-2deg);
    transform: rotate(-2deg);
}

#background {
    background: green;    
} 
```

您可能想以您能想到的任何方式对其进行修改，但我认为主要部分应该很清楚；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T02:27:09.787

您可以使用透明边框来做到这一点：

*html*

```
<div class="bgone">
    <div class="content">This is where the menu would go.</div>
</div>
<div class="bgtwo"></div> 
```

*css*

```
.bgone {
    height: 100px;
    background: black;
    position: relative;
}

.bgtwo {
    height: 50px;
    border-top: 100px solid black;
    border-right: 1000px solid transparent;

}
.content {
    position: absolute;
    top: 10px;
    left: 10px;
    color: #FFF;
} 
```

# resharper - Resharper，如何获取类的名称

> ID：11515046
> 
> 赞同：4
> 
> 时间：2012-07-17T01:53:38.247
> 
> 标签：resharper, resharper-6.0

我正在尝试在 Resharper（Visual Studio 的插件）中编写自定义模板。谁能告诉我如何使用宏获取班级名称和日期？

顺便说一句，我在哪里可以找到 Resharper 的那些内置宏？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T17:09:41.290

如果您的自定义模板将是新的*ReSharper*的***实时模板***，您可以使用***包含类型名称***
的 宏类名称和 宏***当前日期指定格式***或***当前日期和时间指定格式***的日期。

# powershell - Powershell填写路径

> ID：11515054
> 
> 赞同：1
> 
> 时间：2012-07-17T01:55:37.510
> 
> 标签：powershell, ironpython

我的当前目录是“C:\devel\test\”

我想运行类似的东西`command -m 'pwd'\data\test.xml`，它就像我进入了`command -m C:\devel\test\data\test.xml`

如果我正在编写脚本，我会：

```
$pwd = pwd
command -m $pwd\data\test.xml 
```

但不确定如何在提示下执行此操作。

**更新**

这可能是 IronPython 问题。使用下面建议的命令[azhrei](https://stackoverflow.com/users/360932/azhrei)`ipy -m ($pwd.path + "\data\test.xml")`我收到以下错误：

```
Unhandled exception:
Traceback (most recent call last):
  File "C:\Program Files (x86)\IronPython 2.7\Lib\runpy.py", line 101, in _get_module_details
  File "C:\Program Files (x86)\IronPython 2.7\Lib\runpy.py", line 170, in run_module
  File "C:\Program Files (x86)\IronPython 2.7\Lib\pkgutil.py", line 456, in get_loader
  File "C:\Program Files (x86)\IronPython 2.7\Lib\pkgutil.py", line 466, in find_loader
  File "C:\Program Files (x86)\IronPython 2.7\Lib\pkgutil.py", line 422, in iter_importers
ImportError: Import by filename is not supported. 
```

当我运行`ipy -m C:\devel\test\data\test.xml`它工作得很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T02:12:07.733

在命令提示符下使用 %CD%，因此：

`command -m %CD%\data\test.xml`

或者，如果您的意思是在 powershell 提示符下遇到问题：

`command -m ($pwd.path + "\data\test.xml")`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T02:20:51.090

您应该使用`join-path`cmdlet：

```
command -m "$(join-path $pwd 'data\test.xml')" 
```

它将处理规范化斜线等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T06:23:51.257

```
command -m "$pwd\data\test.xml" 
```

# mysql - MySQL 语法与 DELETE FROM？

> ID：11515057
> 
> 赞同：1
> 
> 时间：2012-07-17T01:55:43.410
> 
> 标签：mysql, sql

我有这部分`SQL`总是返回错误，尽管我找不到它返回错误的原因。我已经连接到数据库没有错误。我正在运行`PHP 5.2.17`, `MySQL 5.5.25a`, 和`Apache 2.4.2.`

`SQL`：_

```
DELETE FROM mail WHERE to=1 
```

错误：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“to=1”附近使用正确的语法

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T01:59:11.903

`TO`是[保留字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)，需要使用反引号：

```
 DELETE FROM mail WHERE `to` = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T02:24:33.297

通过添加`backticks`列名从**[MySQL 保留字中转义](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)**

```
DELETE FROM mail WHERE `to`=1 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-17T01:58:42.590

如果 to 的列不是例如 INT 或 DEC 你应该做它`to = "1"`

# android - 为什么我无法加载我的 Android 4.1 AVD？

> ID：11515059
> 
> 赞同：0
> 
> 时间：2012-07-17T01:55:53.950
> 
> 标签：android, avd

我对 Android 开发有点陌生。我按照教程设置 Eclipse 并创建了 4.1 AVD，但是当我尝试启动模拟器时它停止工作。它只是无限期地给了我闪亮的“Android”启动屏幕。我该怎么办？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T02:46:43.427

尝试以下操作：

1) 看看 Rob S. 建议的旧版 Android AVD 是否适合您？

2）您是否删除了 AVD 并创建了一个新的，以防万一。它也适合那些吗？

3) 杀死 adb 实例是启动 AVD 之前的下一个选项。

4) 如果您使用 Eclipse，请尝试使用 Wipe User Data 选项启动 AVD。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-17T02:27:19.443

尝试以下操作：

在命令行 cd 进入 android-sdks\platform tools 并执行 adb kill-server 和 adb start-server。

如果上述方法失败，请尝试：

- 重启模拟器

- 重启日食

- 重新启动您的计算机

# java - Java GUI设计的问题

> ID：11515061
> 
> 赞同：1
> 
> 时间：2012-07-17T01:56:00.420
> 
> 标签：java, swing, oop, events, jradiobutton

我在以面向对象的方式设计 GUI 时遇到了麻烦。以下代码将帮助我更清楚地表达我的问题：

```
import javax.swing;
import java.awt.*;
import java.awt.event.*;

public class QuoteOptionsPanel extends JPanel
{
    private JLabel quote;
    private JRadioButton comedy, philosophy, carpentry;
    private String comedyQuote, philosophyQuote, carpentryQuote;
    //-----------------------------------------------------------------
    // Sets up a panel with a label and a set of radio buttons
    // that control its text.
    //-----------------------------------------------------------------
    public QuoteOptionsPanel()
    {
        comedyQuote = "Take my wife, please.";
        philosophyQuote = "I think, therefore I am.";
        carpentryQuote = "Measure twice. Cut once.";

        quote = new JLabel (comedyQuote);
        quote.setFont (new Font ("Helvetica", Font.BOLD, 24));

        comedy = new JRadioButton ("Comedy", true);
        comedy.setBackground (Color.green);

        philosophy = new JRadioButton ("Philosophy");
        philosophy.setBackground (Color.green);

        carpentry = new JRadioButton ("Carpentry");
        carpentry.setBackground (Color.green);

        ButtonGroup group = new ButtonGroup();
        group.add (comedy);
        group.add (philosophy);
        group.add (carpentry);

        QuoteListener listener = new QuoteListener();
        comedy.addActionListener (listener);
        philosophy.addActionListener (listener);
        carpentry.addActionListener (listener);

        add (quote);
        add (comedy);
        add (philosophy);
        add (carpentry);

        setBackground (Color.green);
        setPreferredSize (new Dimension(300, 100));
    }
    //*****************************************************************
    // Represents the listener for all radio buttons.
    //*****************************************************************
    private class QuoteListener implements ActionListener
    {
        //--------------------------------------------------------------
        // Sets the text of the label depending on which radio
        // button was pressed.
        //--------------------------------------------------------------
        public void actionPerformed (ActionEvent event)
        {
            Object source = event.getSource();
            if (source == comedy)
                quote.setText (comedyQuote);
            else
                if (source == philosophy)
                    quote.setText (philosophyQuote);
                else
                    quote.setText (carpentryQuote);
        }
    }
} 
```

上面的代码简单地创建了一个带有三个单选按钮的面板，每个按钮对应一个引用。它还创建一个显示报价的标签。Whenever a button is selected, the text in the label is set to the corresponding quote. 我理解这段代码就好了。我在尝试修改它时遇到了麻烦。假设我想创建相同的程序，但单选按钮垂直堆叠在一起。还假设我决定通过将单选按钮添加到具有 BoxLayout 的面板来解决此问题，我在它自己的 BoxPanel 类中定义了它。（然后我会将 BoxPanel 添加到我的 QuoteOptionsPanel 中，它仍然包含我的报价 JLabel。）所以我的 BoxPanel 代码可能看起来像这样：

```
import java.awt.*;
import javax.swing.*;

public class BoxPanel extends JPanel
{
    private JRadioButton comedy, philosophy, carpentry;
    public BoxPanel()
    {
        setLayout (new BoxLayout (this, BoxLayout.Y_AXIS));
        setBackground (Color.green);

        comedy = new JRadioButton ("Comedy", true);
    comedy.setBackground (Color.green);
    philosophy = new JRadioButton ("Philosophy");
    philosophy.setBackground (Color.green);
    carpentry = new JRadioButton ("Carpentry");
    carpentry.setBackground (Color.green);

    ButtonGroup group = new ButtonGroup();
    group.add (comedy);
    group.add (philosophy);
    group.add (carpentry);

    QuoteListener listener = new QuoteListener();
    comedy.addActionListener (listener);
    philosophy.addActionListener (listener);
    carpentry.addActionListener (listener);

    }
    //*****************************************************************
    // Represents the listener for all radio buttons.
    //*****************************************************************
    private class QuoteListener implements ActionListener
    {
        //--------------------------------------------------------------
        // Sets the text of the label depending on which radio
        // button was pressed.
        //--------------------------------------------------------------
        public void actionPerformed (ActionEvent event)
        {
            Object source = event.getSource();

            I do not know what to do here.
        }
    }
} 
```

如您所见，我不知道如何定义我的 QuoteListener 类。我希望它执行与我发布的原始程序相同的功能，但不确定如何实现。显示报价的标签位于 QuoteOptionsPanel 中，因此我无权访问它。本质上，我要求使用属于不同面板上的组件的事件侦听器来更改一个面板上的标签的最佳方法。如果您能提供任何帮助，我将不胜感激。如果我没有足够清楚地表达我的问题，请告诉我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T02:09:46.013

有几种方法可以解决这个问题，但最关键的是获取和使用引用。假设将 JLabel 作为私有字段的类有一个公共方法，

```
public void setQuoteLabelText(String text) {
  quoteLabel.setText(text);
} 
```

然后，您必须通过构造函数参数或`setXXX(...)`setter 方法将对此类的可视化对象的引用传递给 BoxPanel 类。然后您的 ActionListener 可以调用此类对象的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T03:11:11.780

**1.**您可以创建一个您需要访问其私有实例变量**的类的实例。**

**2.**遵循封装的众多用途之一，即为该实例变量提供**私有实例变量和公共getter-setter。**

**3.**现在您可以通过调用类实例的公共方法来访问私有成员。

**4.**还有一件事，尝试使用 NetBeans 团队在 2005 年创建的**Group Layout**。使用 Window Builder Pro，现在从 google 中免费。

# c++ - 错误：主要声明中有两种或多种数据类型？

> ID：11515064
> 
> 赞同：1
> 
> 时间：2012-07-17T01:56:35.983
> 
> 标签：c++, function, if-statement, while-loop, declaration

对编码非常陌生，所以请理解；）

我基本上是在尝试使用`while`循环和`if`语句制作计算器。

```
#include <iostream>

using namespace std;

int x = 1;
int number;
int total = 0;
int amt = 1;
int a;
int b;
int c;
int d;
string ans;

class OperateClass 
```

我收到错误：“main”声明中有两种或多种数据类型

请解释这意味着什么/如何解决它。

我还想知道是否需要为每个函数（加、减、乘和除）创建一个新对象

请帮忙！

```
int main()
{

    cout << "Do you want to add, subtract, multiply or divide? I want to : " << endl;
    cin >> ans;

    if(ans == "add"){
        OperateClass opOper;
        opOper.add();

    }else{

        if(ans == "subtract"){
            OperateClass opOper
            opOper.subtract();
                }

    }else{

        if(ans == "multiply"){
            OperateClass opOper
            opOper.multiply();
        }

    }else{

        if(ans == "divide"){
            OperateClass opOper
            opOper.divide();

        }
    }

}

class OperateClass{
    public:
        int add(){
            while(x <= 3){
                cout << "Enter a number to use to add: " << endl;
                cin >> a;
                total = total + a;
                x++;
                amt++;
            }
        }

        int subtract(){
            while(x <= 3){
                cout << "Enter a number to use to add: " << endl;
                cin >> b;
                total = total - b;
                x++;
                amt++;
            }
        }

        int multiply(){
            while(x <= 3){
                cout << "Enter a number to use to add: " << endl;
                cin >> c;
                total = total * c;
                x++;
                amt++;
            }
        }

        int divide(){
            while(x <= 3){
                cout << "Enter a number to use to add: " << endl;
                cin >> d;
                total = total / d;
                x++;
                amt++;
            }
        }
}

int print(){
    cout << "Your total is: " << total << endl;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T02:01:43.053

该代码均无效。您以 开始一个类定义`class OperateClass`，但永远不要结束它并直接运行到`main`. （简化的）类定义采用以下形式：

```
class [name] {

};  // semi-colon terminates definition

// so...

class OperateClass {

}; 
```

接下来，您声明`main`......但它会导致一个`else`分支（？）。

```
int main()
{

    cout << "Do you want to add, subtract, multiply or divide? I want to : " << endl;
    cin >> ans;

    if(ans == "add"){
    OperateClass opOper;
    opOper.add();

}else{  // what is this? 
```

函数也必须通过它们的右大括号终止，即

```
int main() {

}  // function is over! 
```

现在看起来那些可能只是复制/粘贴错误。如果是这种情况，那么您可能只是忘记了类定义末尾的分号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T02:07:56.160

考虑以下程序：

```
class C

int main() {

}

class C {

}

void someFunc(){} 
```

这基本上是您的程序归结为必需品。以下是错误：

```
错误：“main”声明中有两种或多种数据类型
错误：预期的';' 类定义后

```

这是更正后的代码：

```
class C; //<--semicolon in forward declaration

int main() {

}

class C {

}; //<--semicolon after class definition

void someFunc(){} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T02:12:13.133

让我们对您的代码稍作修改，以使您的语法正确。

```
int main()
{

    cout << "Do you want to add, subtract, multiply or divide? I want to : " << endl;
    cin >> ans;

    if(ans == "add"){
    OperateClass opOper;
    opOper.add();
        }

else if (ans == "subtract"){
    OperateClass opOper;
    opOper.subtract();
        }

else if (ans == "multiply"){
    OperateClass opOper;
    opOper.multiply();
        }

else if(ans == "divide"){
    OperateClass opOper;
    opOper.divide();

        }
else {} 

} //end of main 
```

您的类变量声明语句“OperateClass opOper”也会在每种情况下重复，您也可以在 if-else 条件之外编写该语句以避免重复，因为该语句在任何情况下都是正确的。

# ios - 如何为 UIPopipverController 设置动画以从屏幕外滑动到屏幕上

> ID：11515066
> 
> 赞同：0
> 
> 时间：2012-07-17T01:57:05.080
> 
> 标签：ios

在 iOS 5.0 中，是否可以为 UIpopoverController 设置动画，使其在需要出现时从屏幕外滑入屏幕。

感谢您对此的帮助...

# jquery - 是否值得将现有的 iOS 应用程序从 Phonegap 1.2 升级到 1.9？

> ID：11515069
> 
> 赞同：3
> 
> 时间：2012-07-17T01:57:58.433
> 
> 标签：jquery, ios, cordova, iscroll

我正在开发的 PhoneGap 1.2 应用程序存在性能问题。我目前正在检查 jQuery 代码以尽我所能优化它，但我想知道通过将项目升级到 PhoneGap 1.9 可以获得多少改进（如果有的话）。升级这样一个旧版本的过程非常费力，所以我希望有人能与我分享他们的经验。

使用 Xcode 4.3.3、Phonegap 1.2、iScroll 4.1.9 和 jQuery 1.7.1。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T19:39:19.860

不，是的

您应该升级到 2.1（如果升级）

如果您没有遇到任何问题并且不想使用更多功能，则可以留在该版本。

如果您想实现新功能或在商店中创建新版本，您应该更新到 2.1

事实上，迁移到新版本是个好主意。

# c - 如何确定用于多边形逼近的 cvCanny 的最佳参数

> ID：11515072
> 
> 赞同：1
> 
> 时间：2012-07-17T01:58:28.900
> 
> 标签：c, opencv, computer-vision, feature-detection, edge-detection

这是我的源图像（忽略这些点，它们是稍后手动添加的）：

![在此处输入图像描述](../Images/e1b6f11709c8d2449662bb4f3b634e99.png)

我的目标是获得两只手的粗略多边形近似。像这样的东西：

![在此处输入图像描述](../Images/36f914215dbf9937b5e984b87a90b76a.png)

我对如何做到这一点有一个大致的想法；我想用它[`cvCanny`](http://www710.univ-lyon1.fr/~bouakaz/OpenCV-0.9.5/docs/ref/OpenCVRef_ImageProcessing.htm#decl_cvCanny)来寻找边缘，[`cvFindContours`](http://www710.univ-lyon1.fr/~bouakaz/OpenCV-0.9.5/docs/ref/OpenCVRef_ImageProcessing.htm#decl_cvFindContours)寻找轮廓，然后[`cvApproxPoly`](http://www710.univ-lyon1.fr/~bouakaz/OpenCV-0.9.5/docs/ref/OpenCVRef_StructAnalysis.htm#decl_cvApproxPoly).

我面临的问题是我不知道如何正确使用`cvCanny`，特别是最后3个参数（threshold1&2，apertureSize）我应该使用什么？我试着做：

```
cvCanny(source, cannyProcessedImage, 20, 40, 3); 
```

但结果并不理想。左手看起来比较好，但右手检测得很少：

![在此处输入图像描述](../Images/69be20579c7e25058ffe7b14b3bb1f47.png)

一般来说，它不像我想要的那样可靠。有没有办法猜测 Canny 的“最佳”参数，或者至少对他们所做的事情进行详细解释（初学者可以理解），以便我可以做出有根据的猜测？或者也许有更好的方法来完全做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T06:00:32.280

看来你必须降低你的门槛。

Canny 算法在滞后阈值上工作：如果至少一个像素与最大阈值一样亮，则它选择一个轮廓，如果它们高于下阈值，则取所有连接的轮廓像素。

论文建议以 2:1 或 3:1 的比例取两个阈值（例如 10 和 30，或 20 和 60 等）。对于某些应用程序，手动确定和硬编码的阈值就足够了。它也可能是你的情况。我怀疑如果你降低阈值，你会得到很好的结果，因为图像并不那么复杂。

已经提出了许多自动确定最佳精明阈值的方法。他们中的大多数依靠梯度幅度来估计最佳阈值。

**脚步：**

*   提取梯度（Sobel 是一个不错的选择）
*   您可以将其转换为 uchar。梯度理论上可以有比 255 更大的数值，但这没关系。opencv 的 sobel 返回 uchars。
*   制作结果图像的直方图。
*   在直方图的第 95 个百分位处取最大阈值，将较低的阈值设为 high/3。
*   您可能应该根据您的应用程序调整百分位值，但结果将比硬编码的高值和低值更稳健

**注意：**在 Matlab 中实现了一个出色的阈值检测算法。它基于上面的想法，但更复杂一些。

**注意 2**：如果图像区域之间的轮廓和光照变化不大，则此方法将起作用。如果图像的某个部分的轮廓更清晰，那么您需要局部自适应阈值，这是另一回事。但是看你的照片，应该不是这样的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-17T06:51:26.487

也许最简单的解决方案之一是对灰度图像进行 Otsu 阈值化，在二值图像上找到轮廓，然后对其进行近似。这是代码：

```
Mat img = imread("test.png"), gray;
vector<Vec4i> hierarchy;
vector<vector<Point2i> > contours;

cvtColor(img, gray, CV_BGR2GRAY);
threshold(gray, gray, 0, 255, THRESH_OTSU);
findContours(gray, contours, hierarchy, CV_RETR_EXTERNAL, CV_CHAIN_APPROX_SIMPLE);

for(size_t i=0; i<contours.size(); i++)
{
    approxPolyDP(contours[i], contours[i], 5, false);
    drawContours(img, contours, i, Scalar(0,0,255));
}

imshow("result", img);
waitKey(); 
```

这是结果：

![在此处输入图像描述](../Images/58c7e4538ea94ebc800032002e941a47.png)

# entity-framework - 每个类型的实体框架表 - 仅从基本类型列中选择

> ID：11515073
> 
> 赞同：7
> 
> 时间：2012-07-17T01:58:34.360
> 
> 标签：entity-framework, table-per-type

我们首先使用 EF 4.3 代码，并有一个像这样的对象模型：

```
class Content {  }

class Product:Content { }

class News:Content { } 
```

这些被映射为每个类型的表。

在某些情况下，我只想加载属于基表的列，例如所有内容标题的列表。但是像这样的查询

```
from c in Content
where c.IsDeleted == false
select c 
```

导致一些非常讨厌的 SQL 与其他两个表的连接。有没有办法强制 EF 只从基表中进行选择而不连接到其他表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T09:22:05.240

TPT 是有问题的，EF 生成的查询通常效率很低。此外，您的期望可能不正确。Linq-to-entities 总是返回实体的真实类型。`Content`如果记录实际上是一个`Product`实体，它不能返回类型的实例。您的查询只能有两种含义：

*   返回所有未删除的内容 - 这必须执行连接以正确实例化真实类型的实体。查询将返回和实例`Content`的枚举。`Product``News`
*   返回所有未删除`Content`的实例 - 这可能必须再次执行连接以正确实例化仅`Content`直接映射到的记录（与`Product`and无关`News`）。没有映射到`Product`或`News`将在枚举中返回的记录。Linq-to-entities 无法进行此查询 - 您需要使用 ESQL 和`OFTYPE ONLY`运算符。

您可以尝试以下几件事：

*   升级到 .NET 4.5 - TPT 查询有一些改进
*   返回属性的投影而不是`Content`-`Product`并且`News`也是内容，因此如果您`Content`从 Linq-to-entities 查询返回实例，您将永远不会在没有连接的情况下获得查询

# linux - 我的自旋锁有问题吗？

> ID：11515075
> 
> 赞同：11
> 
> 时间：2012-07-17T01:58:45.480
> 
> 标签：linux, assembly, linux-kernel, x86, kernel

这是我的自旋锁实现，但它似乎无法保护关键代码。我的实现有问题吗？

```
static __inline__ int xchg_asm(int* lock, int val) 
{
  int ret; 
  __asm__ __volatile__(
    LOCK "movl (%1),%%eax; 
    xchg (%1),%2; 
    movl %%eax, %0" :"=m" (ret) :"d"(lock), "c"(val)
  );
  return ret; 
}
void spin_init(spinlock_t* sl) 
{ 
  sl->val = 0; 
} 
void spin_lock(spinlock_t* sl) 
{ 
  int ret; 
  do { 
    ret = xchg_asm(&(sl->val), 1); 
  } while ( ret==0 ); 
}

void spin_unlock(spinlock_t* sl) 
{
  xchg_asm(&(sl->val), 0);
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-17T03:39:33.077

您的代码等于：

```
static __inline__ int xchg_asm(int* lock, int val) {
   int save_old_value_at_eax;

   save_old_value_at_eax = *lock;        /* with a wrong lock prefix */
   xchg *lock with val and discard the original value of *lock.
   return save_old_value_at_eax;           /* but it not the real original value of *lock */
} 
```

从代码中可以看出，`save_old_value_at_eax`cpu执行xchg时是没有真正的原始值的。**您应该通过 xchg 指令获取旧/原始值，而不是在执行 xchg 之前保存它**。（“它不是真正的旧值/原始值”是指，如果另一个 CPU 在此 CPU 保存值之后但在此 CPU 执行 xchg 指令之前获取锁，则此 CPU 将获取错误的旧值，并认为它占用了锁成功，因此，两个CPU同时进入CS）。您已将读取-修改-写入指令分成三个指令，整个三个指令都不是原子的（即使您将锁定前缀移动到 xchg）。

**我猜你认为锁定前缀会锁定全部三个指令**，但实际上锁定前缀只能用于它所附加的唯一指令（并非所有指令都可以附加）而且我们不需要在 SMP 上为 xchg 锁定前缀. 引用自 linux_kernel_src/arch/x86//include/asm/cmpxchg.h

```
/*
 * Note: no "lock" prefix even on SMP: xchg always implies lock anyway.
 * Since this is generally used to protect other memory information, we
 * use "asm volatile" and "memory" clobbers to prevent gcc from moving
 * information around.
 */ 
```

我的建议：

1.  不要重复自己，请使用 linux 内核的自旋锁。
2.  不要重复你自己，如果你确实想实现自旋锁，请使用 linux 内核的 xchg()、cmpxchg()。
3.  了解有关说明的更多信息。您还可以了解 linux 内核是如何实现它的。

# sql - 8 char 值的 SQL 日期转换，00 为天

> ID：11515081
> 
> 赞同：1
> 
> 时间：2012-07-17T01:59:14.217
> 
> 标签：sql, sql-server-2008, sql-date-functions, sqldatetime

我一直无法弄清楚如何正确转换数据。目前的形式是 varchar，数据如下：

19260200, 19770900, 20030400, 20120300, 20020500,

如您所见，我有年份和月份，但没有日期值。当我尝试将其插入格式化为日期时间的 SQL 字段中时，我得到了错误。任何人都知道我该如何解决这个问题？我正在使用一个包含 700,000 条记录的数据库，因此我需要能够编写一些代码来解决它，而不仅仅是手动完成和更改。

在此先感谢您的帮助！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T02:03:41.073

```
INSERT dbo.destination(date_column)
SELECT dt FROM 
(
  SELECT dt = CASE 
    WHEN src_date_column LIKE '%00' THEN 
      STUFF(src_date_column, 8, 1, '1') 
    ELSE src_date_column 
  END
  FROM dbo.source
) AS x
WHERE ISDATE(dt) = 1; 
```

处理评论：

`AS x`只是一个别名。派生表需要被称为某些东西。如果你只是说：

```
SELECT x FROM (SELECT x = 1); 
```

你得到这个无用的错误：

> 消息 102，级别 15，状态 1
> ';' 附近的语法不正确。

但如果你说：

```
SELECT x FROM (SELECT x = 1) AS y; 
```

至于您的其他问题，您可以简单地将其他列添加到内部`SELECT`，例如：

```
INSERT dbo.Citation(PatentNo, Citation, CitedBy, CitationDate)
SELECT PatentNo, Citation, WhoCitedThis, dt 
FROM 
(
  SELECT PatentNo, CitationSource, WhoCitedThis, dt = CASE
    WHEN CitationDate LIKE '%00' THEN STUFF(CitationDate, 8, 1, '1') 
    ELSE CitationDate 
  END 
  FROM dbo.CitationSource
) AS x
WHERE ISDATE(dt) = 1; 
```

现在，您需要决定要如何处理无效日期，例如 20120231 或 20120399。这些都被抛在了后面。我的第一个建议是创建一个适当的日期或日期时间列，并首先拒绝糟糕的日期进入系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T02:01:39.393

你可以尝试这样的事情：

```
cast(left(val, 6)+'01') as date) 
```

也就是说，在字符串中插入一个有效的日期值并进行转换。

# makefile - 追加到列表的开头

> ID：11515086
> 
> 赞同：6
> 
> 时间：2012-07-17T01:59:48.553
> 
> 标签：makefile, gnu-make

我有一个列出源文件的makefile：（缩短为相关）

```
SRCFOLDER=src/
SOURCES= main.cpp
OBJECTS=$(SOURCES:.cpp=.o) 
```

我想将字符串连接在一起，但对于`SOURCES`. 正如您在上面看到的，我这样做是为了`OBJECTS`，但我想这样做：（伪代码）

```
foreach(src in SOURCES)
  src = concate(SRCFOLDER, src) 
```

所以如果`SOURCES`是`main.cpp window.cpp`，结果就是`src/main.cpp src/window.cpp`。

我试过这个：

```
SOURCES=$(SOURCES:*=$(SRCFOLDER)/*) 
```

但我收到此错误：

```
makefile:12: *** Recursive variable `SOURCES' references itself (eventually). Stop. 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-17T02:46:37.483

```
SRCFOLDER := src
SOURCES := main.cpp window.cpp
SOURCES := $(addprefix $(SRCFOLDER)/, $(SOURCES)) 
```

# git - 为什么 powershell 和 posh git 中没有黄色

> ID：11515089
> 
> 赞同：10
> 
> 时间：2012-07-17T02:00:23.147
> 
> 标签：git, powershell, posh-git

好的，所以在 git bash 这个 cmd..

```
git log --pretty='%C(yellow)%h%Creset %s' --abbrev-commit 
```

给了我一个黄色的提交 id 和白色的主题行，但是在 powershell 中（使用 posh git）我没有得到黄色的提交 id（它是默认的白色）。

为什么 ？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-18T01:57:17.713

事实证明 PowerShell 的控制台呈现`System.ConsoleColor.DarkYellow`为白色：

```
[Enum]::GetValues([ConsoleColor]) | %{ Write-Host $_ -ForegroundColor $_ } 
```

改为使用`bold yellow`渲染`System.ConsoleColor.Yellow`，可以：

```
git log --pretty='%C(bold yellow)%h%Creset %s' --abbrev-commit 
```

# matlab - matlab显示3D数据的变化

> ID：11515093
> 
> 赞同：0
> 
> 时间：2012-07-17T02:00:51.523
> 
> 标签：matlab, visualization

我想做的是可视化 3 维数据的变化。例如我有两个数组：

前：

```
x y z
1 2 3
4 5 6
7 8 9 
```

后：

```
x y z
2 2 3
5 5 6
8 8 9 
```

我希望该图是 3D 散点数据，如下所示：

![在此处输入图像描述](../Images/c9dd0b20d8c8fb4004486988c4d8b073.png)

我知道 quiver3 绘制规范，但我不确定如何仅从 X、Y、Z 点的 2 个列表中做到这一点。

实际数据会复杂得多。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T02:24:27.567

[Arrow.m](http://www.mathworks.com/matlabcentral/fileexchange/278-arrow-m)可从 Matlab 文件交换中获得，它使绘制箭头变得非常容易：

```
>> A = [1 2 3; 4 5 6; 7 8 9];
>> B = [2 2 3; 5 5 6; 8 8 9];

>> hold on
>> scatter3(A(:,1), A(:,2), A(:,3))
>> scatter3(B(:,1), B(:,2), B(:,3))
>> arrow(A, B) 
```

否则，请查看[此问题](https://stackoverflow.com/questions/1962332/how-to-draw-vectors-physical-2d-3d-vectors-in-matlab)的其他答案。

# vb.net - Microsoft.VisualBasic.Compatibility.VB6.GroupBoxArray' 已过时

> ID：11515097
> 
> 赞同：1
> 
> 时间：2012-07-17T02:01:21.607
> 
> 标签：vb.net, .net-4.0, vb6, vb6-migration

我正在将 VB6 转换为 VB.NET，现在我遇到了这个警告。

我之前做过研究，结果是注释相关语句，然后在必要时添加新代码。到目前为止，它一直很好，直到我在评论后遇到其他问题。

我评论了过时的警告，但确实如此`AxMSFlexGrid Array.AxMSFlexGrid Array.GetIndex not found`（我收到了 7 条警告）。该问题使设计视图无法完全显示，如下图所示。[http://chanmingman.files.wordpress.com/2011/06/couldfindtype.jpg](http://chanmingman.files.wordpress.com/2011/06/couldfindtype.jpg)

但不再，我不知道发生了什么或我做了什么，它消失了。

我想知道为什么。有人遇到过这样的情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T19:32:17.920

它在 .Net 4 中已过时。这意味着它现在可以工作，但可能会在 .Net 的未来版本中被删除。您可能应该离开它，因为您无法理解代码。

# antlr - 如何将自定义代码注入词法分析器的 mToken()

> ID：11515099
> 
> 赞同：0
> 
> 时间：2012-07-17T02:01:37.737
> 
> 标签：antlr

我可以通过词法分析器规则中的 {} 块将我的自定义代码注入 mToken() 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T05:58:36.727

不，你不能。由于这个`mToken()`方法在超类中是抽象的`Lexer`，从你自己的语法派生的词法分析器扩展了它，你也不能在`@members{...}`你的词法分析器部分覆盖它。

# javascript - 在php生成的页面上获取勾选复选框列表的动态方法

> ID：11515104
> 
> 赞同：0
> 
> 时间：2012-07-17T02:02:30.293
> 
> 标签：javascript, php, button, checkbox, html-table

我有一个网页，它从 mysql db 返回动态行数，通过表输出到网页，其中第一列是通过以下代码的复选框：

```
while($row = mysql_fetch_array($result))
  {
    $id = $row['circuit_id'];
    echo "<tr>";
    echo "<td align=\"center\"><input name=\"checkbox[]\" type=\"checkbox\" id=\"checkbox[]\" value=" . $row['circuit_id'] . "></td>";
        if ($row['status_name'] == 'Disconnected') {
            echo "<td><font color=\"red\">" . $row['status_name'] . "</font></td>";
            } else {
            echo "<td>" . $row['status_name'] . "</td>";
            };
    echo "<td>" . $row['circuit_name'] . "</td>";
    echo "<td>" . $row['circuit_appID'] . "</td>";
    echo "<td>" . $row['circuit_appID'] . "</td>";
    echo "<td><a href=\"circuits_modify.php?id=".$row['circuit_id']."\"><img src=\"images/icons/application_edit.png \"></a></td>"; 
    echo "<td><a href=\"circuit_notes.php?id=".$row['circuit_id']."\" onclick=\"return popitup('circuit_notes.php?id=$id')\"><img src=\"images/icons/note_add.png \"></a></td>";
    echo "</tr>";
  }
echo "</table>"; 
```

在这个数据展示下方，我添加了一些 HTML 按钮（其中一个如下所示），允许用户对显示的数据进行“大规模”更新，在这种特殊情况下，可以将状态从一种状态更改为另一种状态通过复选框选择。

```
 echo "<table align=\"center\">";
    echo "<tr>";
    echo "<td>Set status to Migrated for selected records</td><td><a href=\"update_selected_records.php\"><img src=\"images/icons/application_edit.png \"></a></td>";
    echo "</tr>";
    echo "</table>"; 
```

有没有办法在不将所有内容更改为表单并使用简单的基于 html 的按钮将请求提交到服务器的情况下获取已选择的复选框列表？

我一直在通过 javascript 寻找这样的在线解决方案，但没有找到任何符合我需要的东西。

谢谢

我试图拼凑一些零碎的东西来到达我需要的地方，但根本没有取得太大进展，这是当前代码：

```
 var obj = {}
    $('#click').on('click', function() {
        $('input[type="checkbox"]').each(function() {
            var name = $(this).attr('id');
            obj[name] = $(this).is(':checked') ? 1 : 0;
        });
    $.each(obj, function(key, value) { 
        alert(key + ' : ' + value); 
    });
        console.log(obj);
    });​ 
```

我如何获得“真实”的列表，即。将框打勾到字符串中并使用“新”网址更新按钮？

任何帮助表示赞赏...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T02:25:50.383

jQuery 可以选择所有复选框并通过 AJAX 在后台提交它们。

jQuery 选择器： http: [//api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/)

jQuery AJAX：[http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

祝你好运，希望这对你有帮助！

# wordpress - 如何从 WordPress 的自定义字段中获取 Twitter 主题标签？

> ID：11515108
> 
> 赞同：0
> 
> 时间：2012-07-17T02:03:01.400
> 
> 标签：wordpress, twitter

我正在尝试获取自定义字段以提取我放入推文按钮的主题标签。

```
<a href="https://twitter.com/share" class="twitter-share-button" data-via="artofbackpackin" data-related="artofbackpackin" data-hashtags="<?php echo get_post_meta($post->ID, "tweethashtag", true); ?>">Tweet</a> 
```

我已经填写了自定义字段，但无论出于何种原因，主题标签都没有显示在推文按钮上。

有没有人尝试过这样做？

对不起。我应该添加更多细节。上面的代码和 javascript 来自官方 Twitter 分享按钮。 [https://twitter.com/about/resources/buttons#tweet](https://twitter.com/about/resources/buttons#tweet)

javascript 是这样的： < script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement( s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter- wjs");</script>

如果我要输入与数据相关的普通文本，它读起来没问题，并将主题标签添加到推文中。只是没有自定义字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T03:06:20.920

将“推文”文本更改为您的帖子元：

```
<a href="https://twitter.com/share" class="twitter-share-button" data-via="artofbackpackin" data-related="artofbackpackin" data-hashtags="<?php echo get_post_meta($post->ID, "tweethashtag", true); ?>"><?php echo get_post_meta($post->ID, "tweethashtag", true); ?></a> 
```

# java - 在java中，如何通过非递归算法删除一个文件夹/目录？

> ID：11515117
> 
> 赞同：2
> 
> 时间：2012-07-17T02:05:29.377
> 
> 标签：java, filesystems

如何通过 Java 中的非递归算法删除一个文件夹/目录？我想使用非递归算法以避免`StackOverflowErrors`文件夹具有非常深的路径。

有人可以在这方面提供一些建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T03:45:13.500

在蹩脚的伪代码中，因为我没有方便的 Java 编译器来测试它：

```
queue = [ rootDir ]
stack = []

while ( !queue.isEmpty() ) {
    currentDir = queue.take()
    stack.push( currentDir )
    files = currentDir.list()
    for ( f : files ) {
        if ( f.isDirectory() ) {
            queue.add( f )
        } else {
            f.delete()
        }
    }
}

while ( !stack.isEmpty() ) {
    f = stack.pop()
    f.delete()
} 
```

基本上，这段代码应该扫描一个目录，删除文件或排队子目录以进行进一步扫描。它将扫描的目录放在一个堆栈中，以便第二个`while`循环以正确的顺序删除它们（最深的优先）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-11T10:56:56.260

这是删除文件/文件夹的一般方法：

```
/**deletes a file/folder recursively, and returns true iff succeeded */
public static boolean deleteQuietly(File file) {
    if (file == null || !file.exists())
        return true;
    if (!file.isDirectory())
        return file.delete();
    LinkedList<File> dirs = new LinkedList<>();
    dirs.add(0, file);
    boolean succeededDeletion = true;
    while (!dirs.isEmpty()) {
        file = dirs.remove(0);
        File[] children = file.listFiles();
        if (children == null || children.length == 0)
            succeededDeletion &= file.delete();
        else {
            dirs.add(0, file);
            for (File child : children)
                if (child.isDirectory())
                    dirs.add(0, child);
                else
                    succeededDeletion &= child.delete();
        }
    }
    return succeededDeletion;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T02:49:45.877

这只是您改进的起点。

关键部分是找出要删除的目录。

这段伪代码应该可以帮助您找出某个目录下的所有目录：

```
Set<File> allDirectories = new Set<File>();
allDirectories.add(yourStartingDirectory);

while (hasMoreToRead) { 
  hasMoreToRead = false;
  for (File f : allDirectories) {
    if (f.isDirectory() && !allDirectories.contains(f)) {
      allDirectories.add(f);
      hasMoreToRead = true;
    }
  }
} 
```

这只是一个起点，但您应该能够完成其余的工作：避免重新访问`allDirectories`在先前迭代中处理过的目录；基于`allDirectories`;执行删除 通过以“正确”顺序删除来提高删除效率；ETC

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-17T03:07:32.560

```
// Deletes all files and subdirectories under dir.
// Returns true if all deletions were successful.
// If a deletion fails, the method stops attempting to delete and returns false.
public static boolean deleteDir(File dir) {
    if (dir.isDirectory()) {
        String[] children = dir.list();
        for (int i=0; i<children.length; i++) {
            boolean success = deleteDir(new File(dir, children[i]));
            if (!success) {
                return false;
            }
        }
    }

    // The directory is now empty so delete it
    return dir.delete();
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-17T05:46:16.983

要删除递归，您可以用显式堆栈替换调用堆栈以保存您仍需要处理的项目。在您的情况下，您可以跟踪完成当前文件夹后需要删除的所有父文件夹。这是一个使用 LinkedList 作为堆栈的示例：

```
public static void rmdir(File dir) {
    LinkedList<File> dirs = new LinkedList<File>();
    dirs.push(dir);

    while (dirs.peek() != null) {
        dir = dirs.pop();
        File[] contents = dir.listFiles();

        if (contents.length == 0) {
            dir.delete();
        } else {
            dirs.push(dir);

            for(File content : contents) {
                if (content.isDirectory()) {
                    dirs.push(content);
                } else {
                    content.delete();
                }
            }
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-17T02:17:48.090

我对您的问题的解释是您想删除一个目录而不递归到其中的目录。在这种情况下，您可以使用非常简单的循环来实现删除...

```
File directory = new File("c:\\directory_path")
if (!directory.exists()){
    return;
}

File[] files = directory.listFiles();
for (int i=0;i<files.length;i++){
    if (files[i].isFile()){
        boolean deleted = files[i].delete();
        if (!deleted){
            System.out.println("Problem deleting file " + files[i].getAbsolutePath());
        }
    }
} 
```

这将列出`Files`数组中的所有目录，然后遍历它们。如果文件是`normal file`，它将被删除。将跳过非正常文件，例如目录。

当然，还有其他类似的替代方案，例如`FileFilter`在`listFiles()`方法中添加 a 以便数组仅由普通文件填充，但实际上非常相似。

如果要删除目录树，则必须使用某种递归。不过，您可以采用不同的方法来处理它，这可能不会给您带来太多问题，例如构建一个`ArrayList`目录，然后`ArrayList`一次又一次地删除它们。这将有助于减少递归。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-09-04T05:39:52.173

```
public static final void delete(File file) throws IOException
{
    if (!file.exists())
        throw new IllegalArgumentException("File does not exist: " + file);

    if (file.isFile())
    {
        simpleDelete(file);
        return;
    }

    Deque<File> dirsQueue = new ArrayDeque<File>();
    dirsQueue.push(file);

    for (File dir; (dir = dirsQueue.peekLast()) != null;)
    {
        File[] children = dir.listFiles();

        if (children == null)
            throw new IOException("Unable to read directory: " + dir);

        if (children.length == 0)
        {
            simpleDelete(dir);
            dirsQueue.removeLast();
            continue;
        }

        for (File child : children)
        {
            if (child.isDirectory())
                dirsQueue.addLast(child);
            else
                simpleDelete(child);
        }
    }
}

private static final void simpleDelete(File file) throws IOException
{
    if (!file.delete())
        throw new IOException("Unable to delete " + (file.isDirectory() ? "directory" : "file") + ": " + file);
} 
```

# imagemagick - ImageMagick 不转换 JPEG

> ID：11515118
> 
> 赞同：5
> 
> 时间：2012-07-17T02:05:31.910
> 
> 标签：imagemagick

我遇到了 ImageMagick 在全新安装的 Mac OSX Lion 上无法转换 JPEG 的问题。我得到了休闲错误：

```
convert: unable to open module file `/Users/natewade/.magick/jpeg.la': No such file or directory @ warning/module.c/GetMagickModulePath/813.
convert: no decode delegate for this image format `test1.jpg' @ error/constitute.c/ReadImage/544.
convert: no images defined `test1.jpg' @ error/convert.c/ConvertImageCommand/3044. 
```

但是，使用 gif 和其他格式的转换效果很好。在谷歌搜索之后，我在网上遇到了很多人早在 2006 年就遇到了同样的问题。但他们都没有发布解决方案。

当您配置 Image magic 时，您可能会注意到这一点：

```
checking for JPEG... 
checking jconfig.h usability... no
checking jconfig.h presence... no
checking for jconfig.h... no
checking jerror.h usability... no
checking jerror.h presence... no
checking for jerror.h... no
checking jmorecfg.h usability... no
checking jmorecfg.h presence... no
checking for jmorecfg.h... no
checking jpeglib.h usability... no
checking jpeglib.h presence... no
checking for jpeglib.h... no
checking for jpeg_read_header in -ljpeg... no
checking for JPEG library is version 6b or later... no
checking if JPEG package is complete... no 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T02:08:23.297

这个问题已经解决了。此错误出现在 Mac OSX 10.7.3 上，但在谷歌搜索问题后，我发现其他版本的 OSX 以及其他操作系统（似乎最像 CentOS）发布了相同的问题。同样的修复也应该适用于其他 Linux 风格。

这个问题很容易解决。您需要做的就是安装 Libjpeg：

```
curl -O http://www.ijg.org/files/jpegsrc.v8c.tar.gz
$ tar zxvf jpegsrc.v8c.tar.gz
$ cd jpeg-8c/
$ ./configure
$ make
$ sudo make install 
```

重新安装 ImageMagick，你应该很高兴。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-05-15T15:06:05.257

必须安装 ghostscript - 所以对于 mac

```
brew install ghostscript

brew link --overwrite ghostscript

brew reinstall imagemagick --build-from-source 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-03T08:54:02.427

您需要有 JPEG 库的特定头文件，即安装了几个 *-devel 包，如 libjpeg-turbo-devel、openjpeg-devel。对于其他图像格式，如 PNG、TIFF、WMF 等（libpng-devel、libtiff-devel、libwmf-devel、ghostscript-devel 等）也是如此。

# android - Android 程序如何使用 NEON SIMD？

> ID：11515119
> 
> 赞同：9
> 
> 时间：2012-07-17T02:05:32.630
> 
> 标签：android, neon

我一直在学习一些关于 cpu 功能的知识，并偶然发现了 NEON。

从我读过的内容来看，NEON 似乎需要特定的编程才能使用它，但这是完全正确的吗，或者具有此功能的 cpu 是否仍然找到方法来实现它并加快某些应用程序的媒体进程，即使没有具体代码呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-17T06:19:45.053

有多种方法可以使用 NEON 指令。他们之中有一些是：

*   图书馆。您的 memcpy 很有可能是使用 NEON 手工制作的。API 中的音乐/视频播放库使用 NEON 和/或 GPU 进行加速。Aso，有使用它的第三方库。高通公司的 FastCV 就是一个很好的例子
*   编译器发布的指令。某些编译器在提供正确选项时会发出 NEON 指令。大多数编译器将使用 neon 进行浮点运算，但不会对其进行矢量化。他们会将该单元用作单一数据单元，只是因为它既快速又方便。GCC 和 ARM 编译器中有一些矢量化功能，但它们的范围和结果确实有限。
*   带有内在函数的手工编码 C [http://gcc.gnu.org/onlinedocs/gcc/ARM-NEON-Intrinsics.html](http://gcc.gnu.org/onlinedocs/gcc/ARM-NEON-Intrinsics.html)这可能是开始进入 NEON 世界的最佳方式。
*   手工编码的汇编程序。如果您想获得最大性能，这似乎是最好的。它还需要大量的努力和 CS 知识。

*   最后但同样重要的是，您只需下载使用 NEON 的应用程序即可使用它。您最喜欢的音乐播放器和相机应用程序让您的智能手机中的 NEON 装置得到充分利用。

结论：NEON的用法很多，但只有在代码中具体包含NEON指令的情况下才会使用。正如@pst 所说，从技术上讲，它必须以一段代码为*目标。*

# javascript - 为什么我的循环会产生重复的结果？

> ID：11515123
> 
> 赞同：1
> 
> 时间：2012-07-17T02:06:08.850
> 
> 标签：javascript, jquery

我想通过从javascript循环来创建可折叠列表（jquery mobile）。从那个循环中，我希望可折叠列表从 json 对象中获取内容。我用于循环的对象道具是`tipe`，但不知何故，它创建了一个所有人的可折叠列表，`tipe`而我想要的不是全部`tipe`
（例如，`tipe`来自 json 是“ESL”，“ESL”，“ESL”，“UHT”，“UHT” ,"WHP","WHP","WHP","WHP" ，我想创建像 "ESL","UHT","WHP" 这样的可折叠列表）

这是我到目前为止所做的>> [http://jsfiddle.net/sevtiandy/seXmc/36/](http://jsfiddle.net/sevtiandy/seXmc/36/)

```
for (i = 0; i < data[result].length; i++) {
        details +=
"<div data-role='collapsible' data-collapsed='true' data-theme='b' data-content-theme='c'>"+
"<h3>" + data[result][i].tipe + "</h3>"+
"<table width='100%' border='1' id='"+data[result][i].tipe+"'>"+
    "<tr>"+
        "<td rowspan='3' align='center' valign='middle' bgcolor='#CCCCCC'>MARKET CHANNEL</td>"+
        "<td colspan='2' align='center' valign='middle' bgcolor='#CCCCCC'>"+bulan3+"</td>"+
        "<td colspan='2' align='center' valign='middle' bgcolor='#CCCCCC'>"+bulan2+"</td>"+
        "<td colspan='8' align='center' valign='middle' bgcolor='#CCCCCC'>"+bulan1+"</td>"+
    "</tr>"+
    "<tr>"+
        "<td colspan='2' align='center' valign='middle' bgcolor='#CCCCCC'>ACT.</td>"+
        "<td colspan='2' align='center' valign='middle' bgcolor='#CCCCCC'>ACT.</td>"+
        "<td colspan='2' align='center' valign='middle' bgcolor='#CCCCCC'>PRO.</td>"+
        "<td colspan='2' align='center' valign='middle' bgcolor='#CCCCCC'>ACT.</td>"+
        "<td colspan='2' align='center' valign='middle' bgcolor='#CCCCCC'>BUD.</td>"+
        "<td colspan='2' align='center' valign='middle' bgcolor='#CCCCCC'>ACV. (%)</td>"+
    "</tr>"+
    "<tr>"+
        "<td align='center' valign='middle' bgcolor='#CCCCCC'>VAL</td>"+
        "<td align='center' valign='middle' bgcolor='#CCCCCC'>%</td>"+
        "<td align='center' valign='middle' bgcolor='#CCCCCC'>VAL</td>"+
        "<td align='center' valign='middle' bgcolor='#CCCCCC'>%</td>"+
        "<td align='center' valign='middle' bgcolor='#CCCCCC'>VAL</td>"+
        "<td align='center' valign='middle' bgcolor='#CCCCCC'>%</td>"+
        "<td align='center' valign='middle' bgcolor='#CCCCCC'>VAL</td>"+
        "<td align='center' valign='middle' bgcolor='#CCCCCC'>QTY</td>"+
        "<td align='center' valign='middle' bgcolor='#CCCCCC'>VAL</td>"+
        "<td align='center' valign='middle' bgcolor='#CCCCCC'>QTY</td>"+
        "<td align='center' valign='middle' bgcolor='#CCCCCC'>VAL</td>"+
        "<td align='center' valign='middle' bgcolor='#CCCCCC'>QTY</td>"+
    "</tr>"+    
"</table>"+
"</div>";
    }

    $("#tipe_" + kodenegara)
        .empty()
        .append(details)
        .trigger('create');
    $("#tipe_" + kodenegara).ready(function() {
        $('table.alt tr:odd').addClass('odd');
        $('table.alt tr:even').addClass('even');
    }); 
```

这是数组：

```
"GetReportIdResult": [
    {
      "act_qty1": "834",
      "act_val1": "11",
      "acvqty": "0.99",
      "acvval": "0.84",
      "budqty": "84332",
      "budval": "1315",
      "bulan1": "7",
      "bulan2": "6 ",
      "bulan3": "5 ",
      "cm_per1": "21.9",
      "cm_per2": "31.8",
      "cm_per3": "29.2",
      "cm_val1": "2",
      "cm_val2": "206",
      "cm_val3": "356",
      "mc": "Agen",
      "tipe": "ESL"
    },
    {
      "act_qty1": "17076",
      "act_val1": "186",
      "acvqty": "36.01",
      "acvval": "38.64",
      "budqty": "47416",
      "budval": "482",
      "bulan1": "7 ",
      "bulan2": "6 ",
      "bulan3": "5 ",
      "cm_per1": "8.6",
      "cm_per2": "7.0",
      "cm_per3": "8.1",
      "cm_val1": "16",
      "cm_val2": "47",
      "cm_val3": "54",
      "mc": "Hotel & Restaurant",
      "tipe": "ESL"
    },
    {
      "act_qty1": "30948",
      "act_val1": "299",
      "acvqty": "16.48",
      "acvval": "16.22",
      "budqty": "187788",
      "budval": "1841",
      "bulan1": "7 ",
      "bulan2": "6 ",
      "bulan3": "5 ",
      "cm_per1": "-3.2",
      "cm_per2": "-3.1",
      "cm_per3": "-3.1",
      "cm_val1": "-10",
      "cm_val2": "-61",
      "cm_val3": "-55",
      "mc": "Institution",
      "tipe": "ESL"
    },
    {
      "act_qty1": "8358",
      "act_val1": "121",
      "acvqty": "37.96",
      "acvval": "35.26",
      "budqty": "22019",
      "budval": "342",
      "bulan1": "7 ",
      "bulan2": "6 ",
      "bulan3": "5 ",
      "cm_per1": "26.7",
      "cm_per2": "28.4",
      "cm_per3": "30.1",
      "cm_val1": "32",
      "cm_val2": "128",
      "cm_val3": "155",
      "mc": "Lower Trade",
      "tipe": "ESL"
    },
    {
      "act_qty1": "53433",
      "act_val1": "943",
      "acvqty": "19.45",
      "acvval": "19.48",
      "budqty": "274742",
      "budval": "4844",
      "bulan1": "7 ",
      "bulan2": "6 ",
      "bulan3": "5 ",
      "cm_per1": "31.2",
      "cm_per2": "31.2",
      "cm_per3": "31.2",
      "cm_val1": "295",
      "cm_val2": "1423",
      "cm_val3": "1567",
      "mc": "Modern Market",
      "tipe": "ESL"
    },
    {
      "act_qty1": "0",
      "act_val1": "0",
      "acvqty": "0.00",
      "acvval": "0.00",
      "budqty": "732",
      "budval": "13",
      "bulan1": "7 ",
      "bulan2": "6 ",
      "bulan3": "5 ",
      "cm_per1": "0.0",
      "cm_per2": "34.5",
      "cm_per3": "34.8",
      "cm_val1": "0",
      "cm_val2": "9",
      "cm_val3": "15",
      "mc": "Agen",
      "tipe": "ESL500ML"
    },
    {
      "act_qty1": "156",
      "act_val1": "3",
      "acvqty": "0.00",
      "acvval": "0.00",
      "budqty": "0",
      "budval": "0",
      "bulan1": "7 ",
      "bulan2": "6 ",
      "bulan3": "5 ",
      "cm_per1": "33.0",
      "cm_per2": "33.2",
      "cm_per3": "33.3",
      "cm_val1": "1",
      "cm_val2": "2",
      "cm_val3": "4",
      "mc": "Hotel & Restaurant",
      "tipe": "ESL500ML"
    },
    {
      "act_qty1": "90",
      "act_val1": "2",
      "acvqty": "20.11",
      "acvval": "21.33",
      "budqty": "448",
      "budval": "8",
      "bulan1": "7 ",
      "bulan2": "6 ",
      "bulan3": "5 ",
      "cm_per1": "39.4",
      "cm_per2": "32.8",
      "cm_per3": "37.8",
      "cm_val1": "1",
      "cm_val2": "1",
      "cm_val3": "2",
      "mc": "Lower Trade",
      "tipe": "ESL500ML"
    },
    {
      "act_qty1": "3535",
      "act_val1": "68",
      "acvqty": "20.57",
      "acvval": "20.63",
      "budqty": "17189",
      "budval": "331",
      "bulan1": "7 ",
      "bulan2": "6 ",
      "bulan3": "5 ",
      "cm_per1": "39.7",
      "cm_per2": "40.8",
      "cm_per3": "40.3",
      "cm_val1": "27",
      "cm_val2": "140",
      "cm_val3": "166",
      "mc": "Modern Market",
      "tipe": "ESL500ML"
    },
    {
      "act_qty1": "2700",
      "act_val1": "29",
      "acvqty": "2.84",
      "acvval": "3.27",
      "budqty": "95040",
      "budval": "899",
      "bulan1": "7 ",
      "bulan2": "6 ",
      "bulan3": "5 ",
      "cm_per1": "9.5",
      "cm_per2": "11.1",
      "cm_per3": "12.9",
      "cm_val1": "3",
      "cm_val2": "76",
      "cm_val3": "74",
      "mc": "Agen",
      "tipe": "UHT"
    },
    {
      "act_qty1": "3216",
      "act_val1": "35",
      "acvqty": "18.93",
      "acvval": "19.03",
      "budqty": "16993",
      "budval": "184",
      "bulan1": "7 ",
      "bulan2": "6 ",
      "bulan3": "5 ",
      "cm_per1": "10.8",
      "cm_per2": "7.6",
      "cm_per3": "6.6",
      "cm_val1": "4",
      "cm_val2": "9",
      "cm_val3": "9",
      "mc": "Hotel & Restaurant",
      "tipe": "UHT"
    },
    {
      "act_qty1": "10701",
      "act_val1": "105",
      "acvqty": "23.85",
      "acvval": "24.15",
      "budqty": "44872",
      "budval": "434",
      "bulan1": "7 ",
      "bulan2": "6 ",
      "bulan3": "5 ",
      "cm_per1": "1.4",
      "cm_per2": "-0.6",
      "cm_per3": "-0.5",
      "cm_val1": "1",
      "cm_val2": "-3",
      "cm_val3": "-2",
      "mc": "Institution",
      "tipe": "UHT"
    },
    {
      "act_qty1": "5663",
      "act_val1": "65",
      "acvqty": "18.58",
      "acvval": "19.33",
      "budqty": "30487",
      "budval": "334",
      "bulan1": "7 ",
      "bulan2": "6 ",
      "bulan3": "5 ",
      "cm_per1": "12.7",
      "cm_per2": "12.0",
      "cm_per3": "11.2",
      "cm_val1": "8",
      "cm_val2": "36",
      "cm_val3": "40",
      "mc": "Lower Trade",
      "tipe": "UHT"
    },
    {
      "act_qty1": "16637",
      "act_val1": "197",
      "acvqty": "18.60",
      "acvval": "18.38",
      "budqty": "89424",
      "budval": "1072",
      "bulan1": "7 ",
      "bulan2": "6 ",
      "bulan3": "5 ",
      "cm_per1": "9.3",
      "cm_per2": "7.4",
      "cm_per3": "11.8",
      "cm_val1": "18",
      "cm_val2": "68",
      "cm_val3": "133",
      "mc": "Modern Market",
      "tipe": "UHT"
    },
    {
      "act_qty1": "84",
      "act_val1": "3",
      "acvqty": "2.10",
      "acvval": "2.10",
      "budqty": "4008",
      "budval": "132",
      "bulan1": "7 ",
      "bulan2": "6 ",
      "bulan3": "5 ",
      "cm_per1": "50.9",
      "cm_per2": "52.9",
      "cm_per3": "51.0",
      "cm_val1": "1",
      "cm_val2": "3",
      "cm_val3": "110",
      "mc": "Agen",
      "tipe": "WHP"
    },
    {
      "act_qty1": "948",
      "act_val1": "30",
      "acvqty": "26.33",
      "acvval": "27.82",
      "budqty": "3600",
      "budval": "108",
      "bulan1": "7 ",
      "bulan2": "6 ",
      "bulan3": "5 ",
      "cm_per1": "48.9",
      "cm_per2": "50.5",
      "cm_per3": "41.2",
      "cm_val1": "15",
      "cm_val2": "63",
      "cm_val3": "76",
      "mc": "Hotel & Restaurant",
      "tipe": "WHP"
    },
    {
      "act_qty1": "2604",
      "act_val1": "71",
      "acvqty": "9.18",
      "acvval": "9.28",
      "budqty": "28360",
      "budval": "769",
      "bulan1": "7 ",
      "bulan2": "6 ",
      "bulan3": "5 ",
      "cm_per1": "43.3",
      "cm_per2": "42.9",
      "cm_per3": "39.3",
      "cm_val1": "31",
      "cm_val2": "233",
      "cm_val3": "358",
      "mc": "Institution",
      "tipe": "WHP"
    },
    {
      "act_qty1": "6",
      "act_val1": "0",
      "acvqty": "3.33",
      "acvval": "4.26",
      "budqty": "180",
      "budval": "6",
      "bulan1": "7 ",
      "bulan2": "6 ",
      "bulan3": "5 ",
      "cm_per1": "60.4",
      "cm_per2": "0.0",
      "cm_per3": "0.0",
      "cm_val1": "0",
      "cm_val2": "0",
      "cm_val3": "0",
      "mc": "Lower Trade",
      "tipe": "WHP"
    },
    {
      "act_qty1": "266",
      "act_val1": "11",
      "acvqty": "50.38",
      "acvval": "50.51",
      "budqty": "528",
      "budval": "21",
      "bulan1": "7 ",
      "bulan2": "6 ",
      "bulan3": "5 ",
      "cm_per1": "48.6",
      "cm_per2": "48.8",
      "cm_per3": "49.2",
      "cm_val1": "5",
      "cm_val2": "14",
      "cm_val3": "17",
      "mc": "Modern Market",
      "tipe": "WHP"
    },
    {
      "act_qty1": "0",
      "act_val1": "0",
      "acvqty": "0.00",
      "acvval": "0.00",
      "budqty": "0",
      "budval": "0",
      "bulan1": "7 ",
      "bulan2": "6 ",
      "bulan3": "5 ",
      "cm_per1": "0.0",
      "cm_per2": "5.1",
      "cm_per3": "5.5",
      "cm_val1": "0",
      "cm_val2": "9",
      "cm_val3": "6",
      "mc": "Agen",
      "tipe": "CHEESE1K"
    },
    {
      "act_qty1": "127",
      "act_val1": "8",
      "acvqty": "0.98",
      "acvval": "0.98",
      "budqty": "13000",
      "budval": "845",
      "bulan1": "7 ",
      "bulan2": "6 ",
      "bulan3": "5 ",
      "cm_per1": "21.2",
      "cm_per2": "21.7",
      "cm_per3": "22.8",
      "cm_val1": "2",
      "cm_val2": "33",
      "cm_val3": "40",
      "mc": "Hotel & Restaurant",
      "tipe": "CHEESE1K"
    },
    {
      "act_qty1": "0",
      "act_val1": "0",
      "acvqty": "0.00",
      "acvval": "0.00",
      "budqty": "0",
      "budval": "0",
      "bulan1": "7 ",
      "bulan2": "6 ",
      "bulan3": "5 ",
      "cm_per1": "0.0",
      "cm_per2": "19.8",
      "cm_per3": "0.0",
      "cm_val1": "0",
      "cm_val2": "0",
      "cm_val3": "0",
      "mc": "Lower Trade",
      "tipe": "CHEESE1K"
    },
    {
      "act_qty1": "0",
      "act_val1": "0",
      "acvqty": "0.00",
      "acvval": "0.00",
      "budqty": "0",
      "budval": "0",
      "bulan1": "7 ",
      "bulan2": "6 ",
      "bulan3": "5 ",
      "cm_per1": "0.0",
      "cm_per2": "19.0",
      "cm_per3": "0.0",
      "cm_val1": "0",
      "cm_val2": "0",
      "cm_val3": "0",
      "mc": "Modern Market",
      "tipe": "CHEESE1K"
    }
  ]
} 
```

还有一件事，在我的可折叠列表中，有一张桌子，我想为行背景创建“斑马线”，怎么做？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T02:40:26.633

您需要循环两次数据：

```
var data = [
    // Data simplified and shortened for brevity
    {"type": "ESL", "val1": 17, "val2" 9.5},
    {"type": "ESL", "val1": 17, "val2" 9.5},
    {"type": "UHT", "val1": 17, "val2" 9.5},
    {"type": "ESL", "val1": 17, "val2" 9.5}
];

var final_results = {},
    type,
    current_row;
for (var i=0, l=data.length; i<l; i++) {
    current_row = data[i];
    type = current_row.type;
    // If we haven't seen this type before
    if (!final_results[type]) {
        // Add a results object designed to store multiple values of each key
        final_results[type] = {
            "val1": [],
            "val2": []
        };
    }
    // Then we can add the current data safely either way
    // This could be pushed into a function for reusability and clarity
    final_results[type].val1.push(current_row.val1);
    final_results[type].val2.push(current_row.val2);
    // More here as needed
}
// Now we can loop over the data in final_results
for (var entry in final_results) {
    if (Object.prototype.hasOwnProperty.call(final_results, entry)) {
        // Write out values to HTML here - better yet, use a templating engine
    }
} 
```

# c# - 如何重新分配标准错误流，以便库代码引发的异常也写入文件而不是控制台？

> ID：11515125
> 
> 赞同：0
> 
> 时间：2012-07-17T02:06:18.297
> 
> 标签：c#, .net, c#-4.0

在下面的测试程序中，错误输出被正确写入Error.txt。

```
using System;
using System.IO;

public class Test{
public static void Main(string[] args){
    Console.SetOut(new StreamWriter("Output.txt", true));
    Console.SetError(new StreamWriter("Error.txt", true));
    int[] test = new int[1];
    Console.Error.WriteLine(test[0]);
}
} 
```

但是，如果我们换行

```
 Console.Error.WriteLine(test[0]); 
```

至

```
 Console.Error.WriteLine(test[7]); 
```

这将导致异常，此异常的错误消息将打印到控制台而不是文件。如何以编程方式对其进行设置，以便将系统引发的异常的错误消息也重定向到文件？

由于运行该程序的上下文，简单的控制台重定向（2> 或 >）不是一个选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T03:17:09.020

我不认为 Console.SetError 方法实际上改变了应用程序的“DOS”错误输出，只是 Console.Error 输出的地方。您应该尝试 PInvoking SetStdHandle。例如，请参见此处：[Redirect stdout+stderr on a C# Windows service](https://stackoverflow.com/questions/1579074/redirect-stdoutstderr-on-a-c-sharp-windows-service)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T03:46:58.273

我相信，错误输出与您尝试使用它的方式不同。它只是输出有关某些错误的信息的一种方式。看看这个[http://msdn.microsoft.com/en-us/library/system.console.seterror.aspx](http://msdn.microsoft.com/en-us/library/system.console.seterror.aspx)

如果你想写一些关于错误的东西，你需要做下一个：

```
Console.Error.WriteLine("Error Log for Application {0}", appName); 
```

因此，如果您想将有关异常的信息写入 stderr，则需要捕获异常并将其消息定向到 stderr。

```
...
catch(Exception e) { Console.Error.WriteLine(e.Message); } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T03:49:46.197

你在寻找这样的东西吗？

```
FileStream errorFileStream = new FileStream("Error.txt", FileMode.OpenOrCreate);
StreamWriter errorStreamWriter = new StreamWriter(errorFileStream);
Console.SetError(errorStreamWriter);

string[] test = new string[2];
test[0] = "Hello";
test[1] = "World";

try
{
    Console.WriteLine(test[2]);
}
catch (Exception ex)
{
    Console.Error.WriteLine(ex.Message);
}

Console.Error.Close(); 
```

# android - Android：管理光标传递到 CursorAdapter

> ID：11515134
> 
> 赞同：1
> 
> 时间：2012-07-17T02:08:26.260
> 
> 标签：android, cursor, staledataexception

在冰淇淋三明治上，当我想恢复具有带有 CursorAdapter 的 gridview 的应用程序时，我的应用程序开始强制关闭，该 CursorAdapter 已将 managedQuery 传递给 CursorAdapter。异常将是 StaleDataException，表示我正在尝试访问正在关闭的游标。

我使用了 getContextResolver().query 而不是 managedQuery。当我尝试恢复应用程序时，帮助我停止强制关闭应用程序。

在那种情况下，如果我使用这种方式。我需要关闭游标还是被适配器关闭。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T02:54:43.457

根据使用 managedQuery 的[活动文档](http://developer.android.com/reference/android/app/Activity.html#managedQuery%28android.net.Uri,%20java.lang.String%5B%5D,%20java.lang.String,%20java.lang.String%5B%5D,%20java.lang.String%29)，您不需要手动关闭游标，而是手动使用 ContentResolver 您需要这样做。适配器不会关闭光标，因为它不知道（而不是 Activity）用户何时离开应用程序并且不再需要光标。[通常使用 null 调用changeCursor()](http://developer.android.com/reference/android/widget/CursorAdapter.html#changeCursor%28android.database.Cursor%29)（适配器将关闭旧的）或使用 null调用 swapCursor( [)](http://developer.android.com/reference/android/widget/CursorAdapter.html#swapCursor%28android.database.Cursor%29)（并手动关闭返回的游标）可能就足够了。

但我建议看一下[CursorLoader](http://developer.android.com/reference/android/content/CursorLoader.html)，因为它更方便、更可靠，并且是 Google 建议的加载游标的方式。如果您的目标是旧 Android，请考虑使用[支持库 v4 。](http://developer.android.com/tools/extras/support-library.html)

# c++ - 使用 TinyXML 获取分段错误

> ID：11515135
> 
> 赞同：2
> 
> 时间：2012-07-17T02:08:27.987
> 
> 标签：c++, xml, segmentation-fault, tinyxml

我目前有一个使用 TinyXML 解析的 XML 文件。我的 XML 文件的顶部如下所示：

```
<Classroom>12
    <ClassName>name</ClassName>
    ...
</Classroom> 
```

我正在尝试访问 ClassName 中的文本。我目前使用这个遇到分段错误：

```
TiXmlDocument doc;
doc.LoadFile(file);
TiXmlHandle  handle(&doc);

TiXmlElement * child = handle.FirstChild().FirstChild().ToElement();
cout<<child->GetText(); 
```

我究竟做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T03:13:46.947

1.  第一次调用 FirstChild() 返回一个 TiXmlElement 表示第一个`<Classroom>`
2.  对 FirstChild() 的第二次调用返回一个 TiXmlText 表示文本“12”
3.  TiXmlText 不会覆盖 ToElement() 函数，因此使用基类的 ToElement() 函数，该函数返回 NULL。

您可以将代码更改为以下内容：

```
TiXmlElement * child = handle.FirstChild("Classroom").FirstChild("ClassName").ToElement(); 
```

# php - 从个人资料中阻止用户

> ID：11515136
> 
> 赞同：1
> 
> 时间：2012-07-17T02:08:39.467
> 
> 标签：php, mysql, ajax

我想创建一个用户块我有按钮

```
<a type="button" value="1" name="block" Cursor="pointer" href="blockuser.php?uid='. $data['id'].'">Block</a> 
```

但我想知道如何最好地使用 PHP、Ajax 以及用户表或单独的块用户表来做到这一点。因此，当我单击块时，我可以使用用户 ID 将值 1 发送到数据库，并阻止他们使用开关查看我的整个配置文件，反之亦然。

然后，如果用户愿意，我将继续创建一个能够在任何给定时间取消阻止该用户的阻止列表。

隐私是必须的！感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T02:19:38.783

您的问题中唯一真正的问题是是否为此创建一个新表，因为其余的是针对您提到的技术的一组非常简单的任务。

就个人而言，我会选择简单地在当前用户表中添加一列，并用逗号分隔的用户 ID 列表填充它，您可以简单地在其中搜索用户 ID。这样做的好处是您只需要运行一个查询，而不是检查阻止列表所需的两个查询，然后在两表方案中获取查看的用户信息。

将用户添加到阻止列表是微不足道的（附加用户 ID 可能还有逗号），从阻止列表中删除用户只需要拆分阻止列表，删除正确的用户 ID，然后通过加入逗号重新构建列表。

此外，这仅在您需要身份验证才能查看配置文件时才有用，即使这样，也可以通过简单地创建一个新帐户来绕过这样的系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T02:21:09.700

在数据库中存储个人资料信息的每一行（可能是成员表？）上，您可以添加一个名为“blocked”的行，其中存储被阻止的成员的 ID 号。我会亲自使用分号分隔这些数字并`$blocked_ids = explode(";",$blocked)`获取每个被阻止的 ID。从那里，您可以使用以下方法检查是否要阻止此人访问个人资料：`if(in_array($user_id,$blocked_ids))`如果该值在数组中，则阻止个人资料查看。

希望对你有帮助，有什么问题可以在下方评论

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T02:21:53.540

就数据库而言，我可能会这样做 - 创建一个特定于块的表。两个基本字段是阻止者的 id 和被阻止的人的 id。这意味着如果一个人阻止了两个用户，他将在表中有两个条目 - 不要尝试创建一个 SQL 字段来充当数组。

目前，您正在设置使用带有 $_GET 参数的 PHP 阶段的标准请求。这并没有什么大问题，但是如果您希望整个操作在不刷新页面的情况下进行，您可以使用 Ajax。使用 jQuery： $.get("remove.php", { uid: "someID" } );

# java - Bean Property dataSource Not Writable in Spring + Hibernate 3（由于无法添加更多代码而重新发布）

> ID：11515138
> 
> 赞同：1
> 
> 时间：2012-07-17T02:09:06.147
> 
> 标签：java, spring, hibernate

我在粘贴上一个线程时遇到问题。以下是我之前提出的问题：

```
package com.springhibernate.example;

import org.hibernate.Query;
import org.hibernate.SessionFactory;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Repository;

@Repository
public class HibernateDaoImpl {
    @Autowired
    private SessionFactory sessionFactory;

    public int getCircleCount(){

        String hql = "Select count(*) from Circle";
        Query query = getSessionFactory().openSession().createQuery(hql);
        return (int) query.uniqueResult();

    }

    public SessionFactory getSessionFactory() {
        return sessionFactory;
    }

    public void setSessionFactory(SessionFactory sessionFactory) {
        this.sessionFactory = sessionFactory;
    }

} 
```

我有以下错误：

```
Invalid property 'dataSource' of bean class [com.springhibernate.example.HibernateDaoImpl]: Bean property 'dataSource' is not writable or has an invalid setter method. Does the parameter type of the setter match the return type of the getter?

at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1385)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1107)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:516)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:455)
        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
        at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
        at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:139)
        at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:83)
        at com.springhibernate.example.SpringHibernateDemo.main(SpringHibernateDemo.java:13)
    Caused by: org.springframework.beans.NotWritablePropertyException: Invalid property 'dataSource' of bean class [com.springhibernate.example.HibernateDaoImpl]: Bean property 'dataSource' is not writable or has an invalid setter method. Does the parameter type of the setter match the return type of the getter?
        at org.springframework.beans.BeanWrapperImpl.setPropertyValue(BeanWrapperImpl.java:1057)
        at org.springframework.beans.BeanWrapperImpl.setPropertyValue(BeanWrapperImpl.java:920)
        at org.springframework.beans.AbstractPropertyAccessor.setPropertyValues(AbstractPropertyAccessor.java:76)
        at org.springframework.beans.AbstractPropertyAccessor.setPropertyValues(AbstractPropertyAccessor.java:58)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1382)
        ... 13 more 
```

谢谢大家帮助....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-19T15:25:13.037

根据我的经验，这个错误可能是两个问题：

1）正如 Ale Zalazar 所说：xml 上没有数据源标签（写入器或读取器）

2）您必须在 Reader 或 writer 上实现（您需要数据源对象）：

`public void setSessionFactory(SessionFactory sessionFactory) { this.sessionFactory = sessionFactory; }`

或类似的东西：

```
private HibernateOperations hibernateTemplate;

public void setSessionFactory(SessionFactory sessionFactory) {
    this.hibernateTemplate = new HibernateTemplate(sessionFactory);
} 
```

取决于你如何实施。

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-16T07:33:27.263

你没有“数据源”`HibernateDaoImpl` 你应该使用这样的东西来让你的道工作。这是我为数据源和会话工厂设置的示例。并且要小心，因为那是区分大小写的：

```
<bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource"
destroy-method="close">
    <property name="driverClassName" value="org.postgresql.Driver" />
    <property name="url"
        value="jdbc:postgresql://localhost:9999/yourDBname" />
    <property name="username" value="userName" />
    <property name="password" value="passsssssword" />
</bean>

<!-- Hibernate 4 SessionFactory Bean definition -->
<bean id="hibernate4AnnotatedSessionFactory"
    class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="annotatedClasses">
        <list>
            <value>com.people.net.model.PersonPersistenceModel</value>
            <value>com.people.net.model.EmailPersistenceModel</value>
            <value>com.people.net.model.AddressPersistenceModel</value>
        </list>
    </property>
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">org.hibernate.dialect.PostgreSQLDialect
            </prop>
            <prop key="hibernate.show_sql">true</prop>
        </props>
    </property>
</bean>

<bean id="managerDAO" class="com.people.net.dao.ManagerDaoImpl">
    <property name="sFactory" ref="hibernate4AnnotatedSessionFactory" />
</bean> 
```

“sFactory”是“sessionFactory”（必须是您在数据访问对象-DAO 中使用的 SessionFactory 的属性名称）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-17T03:00:59.557

您不得使用

```
<property name="dataSource" ref="dataSource"/> 
```

在 applicationContext.xml 中 HibernateDaoImpl 的 bean 定义中。

如果你想这样做，你必须在 HibernateDaoImpl 中提供一个 setDataSource 方法和相应的属性 dataSource。

# php - PHP - 警告：printf()：参数太少奇怪的问题

> ID：11515142
> 
> 赞同：1
> 
> 时间：2012-07-17T00:46:40.320
> 
> 标签：php

我有一个奇怪的错误

当我运行以下代码时，有时我会得到

```
Warning: printf(): Too few arguments in /www/api/class.InvoicePayment.inc.php on line 92 
```

但是我不明白为什么会发生这种情况，因为在我的编码中我有这一行

```
if($output!="")
      printf($output); 
```

即使输出变量不为空，这个 printf 怎么能得到警告..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T19:20:35.847

[正如James McLeod](https://stackoverflow.com/a/11515143/367456)在第一个答案中所写，也许这可以帮助您：

```
printf(str_tr($output, '%', '%%'); 
```

您需要先转义`%`字符`$output`。这是通过`%`在它们前面添加另一个来完成的。另请参阅解释格式化代码的[`sprintf`手册页](http://de.php.net/sprintf)*文档[^(*，特别是这部分：*)](http://de.php.net/sprintf)*

 *> 6\. 类型说明符，说明应将参数数据视为何种类型。可能的类型：
> 
> *   % - 文字百分比字符。不需要任何参数。

这里的重要信息是 with`%%`而不是`%`不需要参数。

但这仅仅是为了解释，最好是你的情况：

```
print $output; 
```

您不需要在此处进行任何格式化打印，因此请使用[`print`^(*Docs*)](http://de.php.net/print)而不是`printf`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T01:34:40.763

如果 $output 包含一个或多个格式说明符，则可能会发生这种情况。你能用 echo 代替 printf 吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-11T09:43:43.283

```
 $replyTemplate = '<div class="module_content">
                    <fieldset style="width:100%%; float:left;">
                        <table width="100%%" align="center" border="1">
                            <tr>
                                <td width="15%%">
                                    <h3>%s</h3>
                                </td>
                                <td width="85%%">
                                    <h3>2015/06/11 09:06</h3>
                                    <h4>%s</h4>
                                </td>
                            </tr>
                        </table>
                    </fieldset><div class="clear"></div>
                </div>'; 
```

并使用 sprintf 代替 printf。

示例来自：[https ://stackoverflow.com/questions/30776376/using-printf-to-format-h​​tml-too-few-arguments](https://stackoverflow.com/questions/30776376/using-printf-to-format-html-too-few-arguments)*

# session - cURL 登录会话

> ID：11515145
> 
> 赞同：1
> 
> 时间：2012-07-17T02:09:42.323
> 
> 标签：session, authentication, cookies, curl, login

我需要使用网站作为登录用户。下面的代码很好地完成了这项工作，但是每次调用脚本时都必须登录。我只想登录一次，然后使用会话 cookie。

```
$c=curl_init();
$url='http://www.site.com/login/';              
$opt=array(CURLOPT_URL=>$url,CURLOPT_COOKIEJAR=>'cookie.txt',CURLOPT_POST=>1,CURLOPT_RETURNTRANSFER=>1,CURLOPT_POSTFIELDS=>'username=usr123&password=pass&submit='); //submit=1 works too
curl_setopt_array($c,$opt);
curl_exec($c);
$url='http://www.site.com/next';
$opt2=array(CURLOPT_URL=>$url,CURLOPT_RETURNTRANSFER=>1);
curl_setopt_array($c,$opt2);
$out=curl_exec($c);
echo $out;
curl_close($c); 
```

我尝试使用会话，但由于某种原因，用户登录不起作用。

```
$c=curl_init();
$ag='Mozilla/5.0 (Windows; U; Windows NT 5.1; ru; rv:1.9.0.7) Gecko/2009021910 Firefox/3.0.7 (.NET CLR 3.5.30729)';
if(!file_exists('cookie.txt')){
  $url='http://www.site.com/login/';
  $opt=array(CURLOPT_URL=>$url,
  CURLOPT_COOKIEJAR=>'cookie.txt',
  CURLOPT_COOKIEFILE=>'cookie.txt',
  CURLOPT_POST=>0,
  CURLOPT_RETURNTRANSFER=>1,
  CURLOPT_FOLLOWLOCATION=>1,
  CURLOPT_USERPWD=>'usr123:pass,
  CURLOPT_SSL_VERIFYPEER=>false,
  CURLOPT_SSL_VERIFYHOST=>0,
  CURLOPT_USERAGENT=>$ag);
  curl_setopt_array($c,$opt);
  curl_exec($c);
}  

$url='http://www.site.com/next/';
$opt2=array(CURLOPT_URL=>$url,
CURLOPT_COOKIEJAR=>'cookie.txt',
CURLOPT_COOKIEFILE=>'cookie.txt',
CURLOPT_RETURNTRANSFER=>1,
CURLOPT_FOLLOWLOCATION=>1,
CURLOPT_SSL_VERIFYPEER=>false,
CURLOPT_SSL_VERIFYHOST=>2,
CURLOPT_USERAGENT=>$ag);
curl_setopt_array($c,$opt2);
$out=curl_exec($c);
echo $out;
curl_close($c); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-08T01:32:34.857

解决方案：

```
if(!file_exists('cookie.txt')){
  $url='http://www.site.com/login/';                         

  $opt=array(CURLOPT_URL=>$url,CURLOPT_COOKIEJAR=>'cookie.txt',CURLOPT_POST=>1,
       CURLOPT_RETURNTRANSFER=>1,CURLOPT_POSTFIELDS=>'username=usr123&password=pass&submit=');
  curl_setopt_array($c,$opt);
  curl_exec($c);
}
$url='http://www.site.com/next';
$opt2=array(CURLOPT_URL=>$url,CURLOPT_COOKIEJAR=>'cookie.txt',CURLOPT_COOKIEFILE=>'cookie.txt',
      CURLOPT_POST=>0,CURLOPT_RETURNTRANSFER=>1,CURLOPT_USERPWD=>'usr123:pass');
curl_setopt_array($c,$opt2);
$output=curl_exec($c);
echo $output; 
```

# cocos2d-iphone - Cocos2D 2.0 - 向层添加精灵......中心呢？

> ID：11515147
> 
> 赞同：2
> 
> 时间：2012-07-17T02:09:59.310
> 
> 标签：cocos2d-iphone

我在图层中添加了一个精灵。转换图层时遇到很多问题。据我所知，一个图层的中心（anchorPoint）在左下角，一个图层在中间（对吗？） - 我对此并不完全确定。

在下图中，我用粉色表示 CClayer，用紫色表示 CCSprite。看看我认为中心在哪里。

当我将精灵添加到图层时，我认为 Cocos 会像在 A 中一样，但我希望它像在 B 中一样。我该怎么做？另一种可能性是C，我认为它更好，但这将涉及将图层的anchorPoint移动到中间并将精灵放在那里......我不知道如何做到这一点。

![在此处输入图像描述](../Images/62eb6adf1382748909abfcd3fc6b04c7.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T05:50:20.407

更改 CCSprite 的锚点。

```
CCSprite *sprite = [CCSprite spriteWithFile:@"sprite.png"];

//For case A
sprite.anchorPoint = ccp(0.0f,0.0f); 
sprite.position = ccp(0.0f,0.0f);

//For case B
sprite.anchorPoint = ccp(0.5f,0.5f); 
sprite.position = ccp(0.0f,0.0f);

//For case c
sprite.position = ccp(ScreenWidth/2.0f, ScreenHeight/2.0f);
sprite.anchorPoint = ccp(0.5f,0.5f); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T15:27:44.020

锚点是相对坐标。(0.f, 0.f) 是节点的左下角，(1.f, 1.f) 是右上角。所有的转换都与锚点相关。定位也是变换。这意味着在锚点 (0.5f, 0.5f) 的情况下，所有定位和其他变换都将相对于节点的中心应用。如果要将精灵放置在图层的左下角，只需将其锚点设置为 (0.f, 0.f) 并设置位置 (0.f, 0.f)。这意味着你的精灵的左下角将被放置到你的父层的 (0.f, 0.f) 坐标。

```
[sprite setAnchorPoint:ccp(0.f, 0.f)];
[sprite setPosition:ccp(0.f, 0.f)];
[layer addChild:sprite]; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-17T04:45:33.007

> 当我将精灵添加到图层时，我认为 Cocos 会像在 A 中一样，但我希望它像在 B 中一样。

不要试图猜测行为。将精灵添加到图层，看看会发生什么。

此外，`CCNode`它的所有子类，包括`CCSprite`，都有`position`属性，它表示节点相对于其父节点的位置。

# android - Android-需要在不开启GPS的情况下查找GPS信号强度

> ID：11515150
> 
> 赞同：2
> 
> 时间：2012-07-17T02:10:32.580
> 
> 标签：android, gps

我的应用程序应该使用或找到当前位置`GPS`。我可以通过以下方式轻松找到当前位置`Cellular network``WiFi``GPS`

```
LocationManager locationmanager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
LocationListener locationlistener = new mylocationlistener();
locationmanager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, locationlistener); 
```

功能`mylocationlistener()`如下

```
private class mylocationlistener implements LocationListener {
  @Override
  public void onLocationChanged(Location location) {
      if (location != null) {
      Toast.makeText(LocationActivity.this,"latitude: "+
          location.getLatitude() + "longitude: " + location.getLongitude(),
          Toast.LENGTH_LONG).show();
      }
  } 
```

它工作正常。我可以使用蜂窝网络通过上面的代码找出我需要更改的当前位置`locationmanager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, locationlistener);`

没关系，但我的挑战是

1.  我需要找到 GPS 信号强度才能激活 GPS。如果 GPS 信号强度很差，我将无法激活 GPS，因为它会耗尽电池电量。
2.  如果 GPS 信号很差，我必须通过蜂窝网络或 WiFi 找出当前位置。

所以，我的问题是，是否有任何方法可以在不打开的情况下确定 GPS 信号强度`GPS`？感谢您提前提供任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T02:13:47.910

不，您无法确定未打开的传感器的信号强度。

要确定卫星和手机等GPS单元之间的信号强度，两者需要收发GPS信号，这自然需要手机上的GPS开启。

这与您无法在不打开 WiFi 的情况下列出附近可用的 WiFi 网络的逻辑相同。

您最好的选择是暂时打开它，然后在您决定不使用它时将其关闭。

确定是否使用 GPS 的最简单方法是将其打开，然后使用 LocationManager 的[getBestProvider](http://developer.android.com/reference/android/location/LocationManager.html#getBestProvider%28android.location.Criteria,%20boolean%29)方法。如果最好的提供商不是 GPS，请再次将其关闭。您还可以使用 getGpsStatus 方法获取[GpsStatus](http://developer.android.com/reference/android/location/GpsStatus.html)对象，其中包含最大卫星数和接收修复所需的时间等指标。

有关如何启用/禁用 GPS 的信息，请参阅[像 Tasker 一样以编程方式启用 GPS。](https://stackoverflow.com/questions/4721449/enable-gps-programatically-like-tasker/5305835#5305835)遗憾的是，您只能在 2.3 之前的手机上以编程方式执行此操作，并且只能通过漏洞利用。“正确”的方式是提示用户启用或禁用它。

# css - 组合 CSS 文件：每个站点还是每个页面模板？

> ID：11515154
> 
> 赞同：6
> 
> 时间：2012-07-17T02:11:21.733
> 
> 标签：css, minify

我们都知道我们应该将我们的 CSS 合并到一个文件中，但是每个站点还是每个页面？我发现了两者的优点和缺点。

**这是场景：**

*   大型网站
*   CSS 文件分解为一个文件用于全局样式和多个文件用于模块

## 解决方案 A：将整个站点的所有 CSS 文件合并到一个文件中：

最好的部分是一个文件将在第一次点击后缓存在每一页上！不利的一面是，随着命名空间冲突的机会增加，选择器（类和 id）的命名约定变得更加重要。您还需要一个系统来在不同的页面上对相同的模块进行不同的样式设置。这会导致 CSS 中出现额外的选择器，这对浏览器来说更有用。这可能会导致内存和处理能力不足的移动设备（如 iPad）出现问题。如果您将媒体查询用于响应式设计，那么当您添加额外的样式时，您的麻烦会更加复杂。

## 解决方案 B：每个页面模板合并一个 CSS 文件：

（我所说的页面模板是指一种布局，但有许多不同的页面，例如文章页面）在这种情况下，您会失去上述选择的大部分问题，但也会失去一些缓存优势。这种技术最糟糕的部分是，如果您在 2 个不同的页面模板上有相同的样式，那么它们将被下载两次，每个页面一次！例如，这将发生在您的所有全局文件中。:(

## 概括：

因此，正如编程中常见的那样，这两种解决方案都不是完美的，但如果有人遇到这个问题并找到了答案，我很想听听！特别是，如果您知道任何有助于解决解决方案 A 的选择器问题的技术。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T02:32:48.607

当然，合并和缩小所有全局样式，例如您的站点模板、排版、表单等。我还会考虑将最重要和最常用的模块样式合并到全局样式表中，当然是您计划使用的样式表主页或入口点。

解决方案 B 不是一个好的解决方案：当您可以从最后一页的缓存中加载其中的一部分时，用户最终会为每个独特的布局/页面下载相同的内容。这种方法没有任何优势。

对于其余部分，我会将它们分开（并缩小）并根据需要单独加载它们。您可以使用Yahoo! 上描述的任何[预加载技术。](http://developer.yahoo.com/performance/rules.html#preload)开发者网络的《加速你的网站的最佳实践》指南预先加载用户的缓存：

> ### 预加载组件
> 
> 通过预加载组件，您可以利用浏览器空闲的时间并请求您将来需要的组件（如图像、样式和脚本）。这样，当用户访问下一页时，您可能已经在缓存中拥有大部分组件，并且您的页面将为用户加载更快。实际上有几种类型的预加载：
> 
> *   无条件预加载 - 一旦 onload 触发，您就继续获取一些额外的组件。查看 google.com 以获取有关如何请求加载精灵图像的示例。在 google.com 主页上不需要此精灵图像，但在连续搜索结果页面上需要。
>     
>     
> *   条件预加载 - 根据用户操作，您可以有根据地猜测用户接下来要去哪里并相应地进行预加载。在 search.yahoo.com 上，您可以看到在输入框中开始输入后如何请求一些额外的组件。

就冲突的选择器而言：组合所有文件并以任何其他方式进行操作都不会产生影响，这是您设计的问题。如果可能的话，以某种方式让所有模块“命名空间”，也许通过使用特定于模块的类的公共前缀，比如`blog-header`or `storefront-title`。有一个称为[“面向对象的 CSS”](http://oocss.org/)的概念可能会减少对大量冗余 CSS 和特定于模块的类名的需求，但这通常是在设计阶段完成的，而不是你可以“附加”到现有项目的东西.

HTTP 请求越少越好，但您必须考虑文件大小以及用户行为和活动。入口页面的初始下载时间是最重要的，因此您不想因为以后不会使用的东西而陷入困境。如果您真的想处理数字，请尝试一些不同的方法并使用 Firebug 或 Chrome 的开发人员工具来分析您的网站。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T02:51:40.777

我认为您可以制作需要每个模板的存储样式的 global.css。

您可以在每个模板中制作 css。

或者简单地使用像[lescss这样的 css 框架](http://lesscss.org)

# jakarta-ee - 在 web 应用程序中只编译 netbeans 中的一个类

> ID：11515160
> 
> 赞同：1
> 
> 时间：2012-07-17T02:12:03.570
> 
> 标签：jakarta-ee, web-applications, netbeans, compiler-construction, compilation

我想知道是否有一种方法可以只编译我在 Web 应用程序项目中更改的文件，而不是再次构建整个项目。重新构建项目需要花费大量时间，而不仅仅是编译那个文件。我可以使用“运行测试”功能来检查类是否已正确编写。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T00:44:23.697

我会查看 NetBeans 的 JRebel 插件。JRebel 是一个与 Web 服务器一起工作的热部署器。

[http://zeroturnaround.com/software/jrebel/installing-jrebel-for-netbeans/](http://zeroturnaround.com/software/jrebel/installing-jrebel-for-netbeans/)

[http://zeroturnaround.com/software/jrebel/](http://zeroturnaround.com/software/jrebel/)

# ms-access - 将文本转换为格式化的数字类型

> ID：11515161
> 
> 赞同：1
> 
> 时间：2012-07-17T02:12:04.130
> 
> 标签：ms-access, vba, ms-access-2003

我正在帮助某人整理数据库。它由 A-BBB 形式的文本类型的 ID 索引，其中 A 和 B 是数字 0-9。我们的应用程序需要这种形式，唯一的缺点是它按 ASCII 标准排序，因此编号为 1、10、2 等。显然，我们希望它先按 A 排序，然后按 BBB 排序。因此 ID 1-001、10-010、1-010 和 10-001 将按 1-001、1-010、10-001 和 10-010 排序。

我尝试更改表格以保存数字类型，并使用多种格式`#\###`来允许使用“-”字符。根据我对格式化数字的了解，# 存储一个数字，\ 将下一个字符显示为字面意思。

我是完全偏离了解决这个问题的轨道还是我错过了一些小东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T09:05:19.180

您可以按每一半排序，例如：

```
SELECT * FROM Table
ORDER BY Val(Left(ID,Instr(Id,"-"))), Val(Mid(ID,Instr(Id,"-")+1)) 
```

# java - 在 android 和 Apache Server 之间创建持久连接

> ID：11515163
> 
> 赞同：0
> 
> 时间：2012-07-17T02:12:08.933
> 
> 标签：java, http, sockets, tcp, persistent-connection

我需要在 Android 手机 (Java) 和运行 apache 的服务器之间创建通信。我要做什么，需要大量消息来来往往，而且我不知道“要搜索什么”，这将完成这项工作。也许名字是持久连接，也许是套接字……但我想你们中的一个人会知道我应该做什么。Android 手机上的我的代码需要接收恒定数据（以 1 或 2 秒的速率），并以 5 秒的速率发送（例如）。我应该在我的服务器中使用一个简单的 Web 服务器来做这些事情，并且每次打开一个带有 post 和 get 数据的 http 页面，并接收 json`s，还是有一种更简单有效的方法来做到这一点？谢谢！

# sql - sqlite3 select min, max together 比单独选择它们要慢得多

> ID：11515165
> 
> 赞同：6
> 
> 时间：2012-07-17T02:12:24.850
> 
> 标签：sql, sqlite, sql-execution-plan

```
sqlite> explain query plan select max(utc_time) from RequestLog;
0|0|0|SEARCH TABLE RequestLog USING COVERING INDEX key (~1 rows) # very fast

sqlite> explain query plan select min(utc_time) from RequestLog;
0|0|0|SEARCH TABLE RequestLog USING COVERING INDEX key (~1 rows) # very fast

sqlite> explain query plan select min(utc_time), max(utc_time) from RequestLog;
0|0|0|SCAN TABLE RequestLog (~8768261 rows) # will be very very slow 
```

当我单独使用`min`和`max`时，它工作得很好。但是，当我出于某种原因选择`min`and时，sqlite 会“忘记”索引。`max`有没有我可以做的配置（我`Analyze`已经用过，它不起作用）？或者对这种行为有什么解释吗？

# 编辑1

```
sqlite> .schema 

CREATE TABLE FixLog(
                    app_id text,  __key__id INTEGER,
                    secret text, trace_code text, url text,
                    action text,facebook_id text,ip text,
                    tw_time datetime,time datetime,
                    tag text,to_url text,
                    from_url text,referer text,weight integer,
                    Unique(app_id, __key__id)
                    );
CREATE INDEX key4 on FixLog(action);
CREATE INDEX time on FixLog(time desc);
CREATE INDEX tw_time on FixLog(tw_time desc);

sqlite> explain query select min(time) from FixLog;
0|0|0|SEARCH TABLE FixLog USING COVERING INDEX time (~1 rows)
sqlite> explain query select max(time) from FixLog;
0|0|0|SEARCH TABLE FixLog USING COVERING INDEX time (~1 rows)
sqlite> explain query plan select max(time), min(time) from FixLog;
0|0|0|SCAN TABLE FixLog (~1000000 rows) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-25T06:12:35.653

这是 sqlite 查询优化器的一个已知怪癖，如下所述：[http](http://www.sqlite.org/optoverview.html#minmax) ://www.sqlite.org/optoverview.html#minmax ：

> 假设存在适当的索引，将优化以下形式的查询以在对数时间内运行：
> 
> ```
>  SELECT MIN(x) FROM table;
>  SELECT MAX(x) FROM table; 
> ```
> 
> 为了使这些优化发生，它们必须完全按照上面显示的形式出现 - 仅更改表和列的名称。不允许添加 WHERE 子句或对结果进行任何算术运算。结果集必须包含单个列。MIN 或 MAX 函数中的列必须是索引列。

更新（2017 年 6 月 23 日）：最近，这已更新为索引查找可能会满足包含单个 MAX 或 MIN 的查询（允许算术之类的东西）；但是，它们仍然排除在单个查询中拥有多个这样的聚合运算符（因此 MIN,MAX 仍然很慢）：

> 包含单个 MIN() 或 MAX() 聚合函数（其参数是索引的最左列）的查询可能会通过执行单个索引查找而不是扫描整个表来满足。例子：
> 
> ```
> SELECT MIN(x) FROM table;
> SELECT MAX(x)+1 FROM table; 
> ```

# ruby-on-rails - Rails 的 belongs_to 和 has_many 关系问题

> ID：11515167
> 
> 赞同：0
> 
> 时间：2012-07-17T02:12:36.410
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我对 Rails 很陌生，正在构建我的第一个“真正的”应用程序并且努力理解如何使关系正常工作。

我有一个测验模型和图标模型。每个测验都属于_一个图标，一个图标有_许多测验。（将图标视为一个类别）。

在我的“新/编辑”测验表格上，我想要一个选择框来选择正确的图标。此刻我有...

```
<%= collection_select(:quiz, :icon_id, Icon.all, :id, :title, :prompt => true) %> 
```

在我的测验控制器中创建动作我有......

```
def create
   @icon = Icon.find(params[:quiz][:icon_id])
   @quiz = @icon.quizzes.build(params[:quiz])
   if @quiz.save
     flash[:success] = "New quiz created successfully!"
     redirect_to @quiz
   else
     render 'new'
   end
end 
```

当我提交表格时，我得到一个

```
Can't mass-assign protected attributes: icon_id 
```

我理解为 icon_id 的错误未在模型中分配为 attr_accessible 。

我可以使其可访问，因为没有真正的安全风险，或者我可以在传递给构建方法之前从测验哈希中删除 icon_id ，但这两个选项似乎都不是正确的做事方式。

这样做的正确方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T03:13:55.350

就放

```
attr_accessible :icon_id 
```

在您的测验模型中。

来自 Ruby on rails api：[attr_accessible：指定可以通过批量分配设置的模型属性白名单。](http://api.rubyonrails.org/classes/ActiveModel/MassAssignmentSecurity/ClassMethods.html#method-i-attr_accessible)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T03:25:26.213

TL;DR：Rails 有一个称为质量分配的功能，当您传入该 params[:quiz] 哈希时，您正在执行此操作。您需要为要使用批量分配更新的任何属性指定 attr_accessible。

快速历史课：

过去，默认情况下所有属性都是可批量分配的，因此您的代码可以正常工作。

几个月前，在 github 上有一个广为人知的事件，有人能够通过构建一个具有 user[:admin] = true 效果的帖子正文来利用此功能。这有效地为用户提供了管理员访问权限，因为应用程序并没有阻止任何人设置 admin = true。有一种方法可以防止这种情况发生，但开发人员错过了它。

Rails 对此的回应是默认保护所有属性，迫使开发人员明确指定任何可通过批量赋值更新的字段。我相信这是在 3.2.3 版本中。

# javascript - 如何更改现有的正则表达式以接受逗号

> ID：11515171
> 
> 赞同：1
> 
> 时间：2012-07-17T02:13:42.560
> 
> 标签：javascript, regex

> **可能重复：**
> [正则表达式匹配文本中带或不带逗号和小数的数字](https://stackoverflow.com/questions/5917082/regular-expression-to-match-numbers-with-or-without-commas-and-decimals-in-text)

```
var regex =  /^[0-9][0-9]{0,5}$|^[0-9][0-9]{0,5}[\.][0-9]$/; 
```

有效值为 3,000 30,000 在上面的正则表达式中寻找逗号。我无法得到它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T02:32:08.370

此正则表达式将测试逗号是否在正确的位置：

```
/^[0-9]{1,3}(,[0-9]{3})*(\.[0-9]*)?$/ 
```

您可以在此处输入验证的工作示例：http: [//jsfiddle.net/jfriend00/u9VRX/](http://jsfiddle.net/jfriend00/u9VRX/)

作为解释，正则表达式是：

```
start of string
1-3 digits
followed by 0 or more sequences of ,nnn where n is a digit
followed by an optional sequence that starts with a period
   and consists of 0 or more digits
end of string 
```

如果您不需要逗号并且无论如何都要解析数字，那么最简单的方法是先删除任何逗号，从而忽略它们：

```
var numStr = str.replace(/,/g, ""); 
```

如果您想在无效时确切知道出了什么问题，那么使用纯正则表达式要困难得多。我找不到解决问题的最简单方法，它通常也不会告诉你这个数字有什么问题，所以我会先使用一些普通的 javascript。

```
function checkValid(str) {
    // check for legal characters
    if (!str.match(/^[0-9,]+(\.[0-9]*)?$/)) {
        // illegal characters present
        return("illegal_chars");
    }

    // strip off trailing decimal part
    var parts = str.split(".");
    if (parts.length > 2) {
        // too many periods
        return("too_many_periods");
    }

    // split each comma segment (if there are any)
    parts = parts[0].split(",");
    if (parts.length > 1) {
        for (var i = parts.length - 1; i > 0; i--) {
            if (parts[i].length != 3) {
                // wrong number of digits between commas 
                return("wrong_digits_between_commas");
            }
        }

        if (parts[0].length > 3) {
            // wrong number of digits in first segment before first comma
            return("too many digits before first comma");
        }
    }

    // if you got here without any errors, then all commas are legal
    return("");  // indicate success
} 
```

您可以在此处键入时看到这个工作：http: [//jsfiddle.net/jfriend00/W6FnT/](http://jsfiddle.net/jfriend00/W6FnT/)

# jquery - 使用具有“缩放”效果的 Jquery Show() 仅对宽度进行动画处理不起作用

> ID：11515174
> 
> 赞同：3
> 
> 时间：2012-07-17T02:13:59.190
> 
> 标签：jquery, scale, show

我正在尝试使用 jQuery UI 中的“缩放”效果来显示（）和隐藏（）一个带有图像的 div。

我的问题出现了，因为我只想在水平方向上缩放 div。

我按照此页面上的信息执行此操作：http: [//docs.jquery.com/UI/Effects/Scale](http://docs.jquery.com/UI/Effects/Scale)

我的代码如下所示：

```
$('#myDiv').hide('scale', {direction: 'horizontal'}; 
```

和

```
$('#myDiv').show('scale', {direction: 'horizontal'}; 
```

虽然 hide() 按预期工作，但 show() 命令会水平和垂直缩放 div，尽管设置了“水平”设置。我猜我的 div 在隐藏后会有所不同，这会导致方向设置无法正常工作。

这可能是一个错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T04:29:23.747

像这样的事情能完成你想要的吗？

[http://jsfiddle.net/eSE2n/1/](http://jsfiddle.net/eSE2n/1/)

# html - 如何为以后的搜索和替换创建“变量”（有点像 HTML 中的合并字段

> ID：11515175
> 
> 赞同：2
> 
> 时间：2012-07-17T02:14:09.060
> 
> 标签：html, variables

我使用了很多（大约 20 个）FrontPage 2003（别笑！）所谓的“站点参数”，它们本质上是变量。我将它们用于产品数量、电话时间等。

我正在升级到 Expression Web，它不支持更改或添加这些参数。另外，我想为我们的面包屑路径创建变量。（因此产品页面可能有面包屑：产品>此产品>屏幕截图。因此，如果我们决定重命名产品，我希望能够轻松替换它。

我不想做的事情：

*   提供页面时替换该值。这会减慢速度并强制所有页面为 .aspx 等。我想坚持使用纯 html。
*   使用 Javascript 替换值（同样的原因，一小部分浏览器没有启用 .js）。

**我刚在想：**

```
we have <variable.products_count>20</variable.products_count> 
```

**但是**......很容易在其中获得另一个标签和文本，就像在这个例子中发生的那样：

```
<variable.products_count> we have <strong>20</strong>  </variable.products_count> 
```

现在，当我替换时，我正在替换标签和“我们有”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T03:28:06.207

> 我不想做的事情：在提供页面时替换值。这会减慢速度并强制所有页面为 .aspx 等。我想坚持使用纯 html。

从技术上讲，您是正确的；使用执行页面与静态页面可能会影响性能。但是插入一些动态值的开销是如此微不足道，以至于它甚至不应该考虑到决策制定过程中。

最简单的：

## HTML

```
<body>
    <div>Good old HTML</div>
    <div>A dynamic value: <%= SiteParameters.Foo %></div>
</body> 
```

## c#（或 VB.Net，或任何你喜欢的）

```
public static class SiteParameters 
{
    // This value could be pulled from a config file, a database, etc.
    public static readonly string Foo = "Hello World";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T23:23:44.047

您的*我们有*问题的示例可以很容易地重写以解决问题：

```
<variable.products_count> we have <strong>20</strong>  </variable.products_count> 
```

至：

```
we have <strong><variable.products_count></variable.products_count></strong> 
```

当然，我认为*更简单*的方法是稍微超越 HTML 语法并选择文档中不太可能出现的变量名称：

```
we have <strong>@@PRODUCTS_COUNT@@</strong> ... 
```

当您拥有其中的几个时，您可以用一个简单的文本替换工具将它们全部替换，例如`sed(1)`：

```
sed -e 's/@@PRODUCTS_COUNT@@/20/g'
    -e 's/@@PRODUCTS@@/Products/g'
    -e 's/@@SCREENSHOTS@@/Screen Shots/g' < inputfile > output.html 
```

要自动处理许多文件，您可能需要编写一个小脚本：

```
s/@@PRODUCTS_COUNT@@/20/g;
s/@@PRODUCTS@@/Products/g;
s/@@SCREENSHOTS@@/Screen Shots/g; 
```

并在所有文件上运行它：

```
for f in pre/*.html ; do sed -f /path/to/script < "$f" > "${f/pre/post}" ; done 
```

（`${f/pre/post}`替换为`pre`；`post`您的后处理文件将在`post/`目录中。）

# sql - Rails 对关联记录求和

> ID：11515177
> 
> 赞同：0
> 
> 时间：2012-07-17T02:15:04.613
> 
> 标签：sql, ruby-on-rails, activerecord

我有一个像这样工作的调查模型：

> ResponseSets 有许多 Responses
> Responses belongs_to Answer
> 答案模型有一个“值”列。

给定一个响应集，我想要与每个响应关联的答案的总和。

即，我希望*能够*做的（在虚构的代码中）是：

```
response_set.responses.answers.sum('value') 
```

但是，这显然不起作用，我需要通过 构建查询`response_set.responses`，但我不知道如何。

在 ActiveRecord 中解决这个问题的 SQL-fu 方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T05:09:28.453

答案是整数吗，从某​​种意义上说，您要查找与响应相关的所有数字答案并将它们全部加起来？我认为您可以使用 map 并注入类似的东西，这完全取决于您的模型/关联的设置方式。

```
response_set.responses.answers.map(:&value).inject(:+) 
```

你能发布你的模型吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T03:57:56.560

好吧，如果您使用的是 Rails 3.2，您可以执行以下操作：

`response_set.responses.answers.pluck(:value).inject{|sum,x| sum + x }`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T19:48:05.890

经过多次试验和错误，我想出了这个相对简单的解决方案，我希望这对将来的其他人有所帮助：

```
response_set.responses.joins(:answer).sum('answers.value') 
```

为了使这更方便，我只是在`ResponseSet`模型中将此方法设为：

```
def total_value
  self.responses.joins(:answer).sum('answers.value')
end 
```

# c# - ASP.net 关于 Javascript 和文本框输入的帮助

> ID：11515179
> 
> 赞同：0
> 
> 时间：2012-07-17T02:15:12.900
> 
> 标签：c#, javascript, asp.net, textbox

这是我正在处理的网页的基本流程：

*   用户单击按钮，弹出日期/时间选择器（有效）。
*   一个时间字符串填充一个文本框，例如，凌晨 4:00（有效）。
*   然后用户必须选择两个单选按钮之一，这应该读取文本框中的时间，radiobutton1 添加 4 小时，radiobutton2 添加 4.5（不起作用）。
*   然后总小时数显示在另一个文本框中（还没有做到这一点）。

除了第一项（从服务器检索日期）之外，大部分工作都是由 Javascript 完成的。

所以这是我正在处理的 Javascript：

```
function setHours(setting)
{
    var tempVal = document.getElementById('<%=Text6.ClientID%>');
    var nHours;
    var textHours = new DateTime(tempVal);
    alert(tempVal);
    textHours = getHours
    if (setting==true) {
        nHours = 4;
        alert("4");
    }
    else {
        nHours = 4.5
        alert("4.5");
    }
    textHours.setHours(textHours.getHours() + nHours);
    document.getElementById("text8").value = textHours;
} 
```

当用户单击两个单选按钮之一时调用此函数（一个为真，另一个为假）。请注意，我到处都有“警报”，因为最初，我无法触发整个函数。所以我注释掉了除了“if statements”和“alert”之外的所有东西，你瞧，它工作正常。

我假设问题出在 var 中，也许是“tempVal”如何检索 text6 中的值。

这是文本框的代码。

```
<form id='frmRequestApplicationForm' name='frmRequestApplicationForm' action='#' method='post'>
<input class="textboxdefault" type="text" name="Starttime" id="Text6" value="<%=(requestApplicationForm.StartimeError.ToString().Equals("")?requestApplicationForm.StarttimeDate.ToShortDateString().Equals("1/1/0001")?"":requestApplicationForm.StarttimeDate.ToShortTimeString(): requestApplicationForm.Starttime)%>"/>
</form> 
```

构建程序使我得到“Text6 不存在”。我不确定代码在哪里拒绝工作。

用简单的“Text6”替换“<%=Text6.ClientID%>”会使整个 Javascript 函数失败。

我可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T03:23:38.337

没关系。

我将“ `document.getElementById('<%=Text6.ClientID%>');`”替换为

```
document.frmRequestApplicationForm.Text6.value; 
```

现在似乎工作正常。

# asp.net-mvc - 如何从 ASP.NET MVC 中的 Post Action 中获取 Get 的路由参数？

> ID：11515180
> 
> 赞同：0
> 
> 时间：2012-07-17T02:15:14.083
> 
> 标签：asp.net-mvc, parameters, routes

我有两种方法，一种是 Get，一种是相关的 Post。

```
public ActionResult Edit(string id){...}

[HttpPost]
public ActionResult Edit(MyModel model){...} 
```

在 Post 方法中，我希望获取 Get 方法的 id 参数。可能吗？

目前，我正在做的是将 id 作为表单参数传递。

```
[HttpPost]
public ActionResult Edit(string id, MyModel model){...} 
```

还有什么方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T02:19:38.793

通常，ID 将是您正在编辑的模型的一部分。您可以使用 ID 在 GET Edit 方法中检索正确的模型，因此，它可能是 POST Edit 方法的 MyModel 模型参数的一部分。

只要您的 MyModel 类包含该 Id，那么从视图中发布它就应该正确绑定它。

米

# udp - 调整 UDT 的拥塞控制

> ID：11515183
> 
> 赞同：9
> 
> 时间：2012-07-17T02:15:34.973
> 
> 标签：udp, udp-data-transfer, congestion-control

我有一个运行 Linux 的嵌入式设备，它通过 LAN 提供传感器数据，但从不提供 WAN。[有时它可能驻留在http://en.wikipedia.org/wiki/Long_fat_network](http://en.wikipedia.org/wiki/Long_fat_network)的一端。

我继承的架构使用 TCP，但我想添加相当于 UDP 实时视频的内容。我不在乎丢包或订购。我只想知道当我掉线时在客户端，如果我发送太快，在服务器端。我**永远**不想重传。

还有其他地方我应该看吗？鉴于我最初的基准测试，UDT 目前太慢了。带有序列号的简单 UDP 客户端/服务器可以在这个嵌入式系统上维持约 80 Mbit/s，而未调整的 UDT 运行大约 30 Mbit/s。如果我使用它的 SOCK_DGRAM 接口，UDT 似乎过于激进地回退到它通常以 16 Mbit/s 运行的点。有没有人为这种应用程序成功调整过 UDT 的 CCC？我见过的最高吞吐量是 35 Mbit/s 与 UDT 的示例应用程序。

我应该直接跳到 RTP 吗？ [http://en.wikipedia.org/wiki/Real-time_Transport_Protocol](http://en.wikipedia.org/wiki/Real-time_Transport_Protocol)

# java - 规范化可迭代类型，使得输出是总和为 1 的浮点数的可迭代

> ID：11515185
> 
> 赞同：2
> 
> 时间：2012-07-17T02:16:05.217
> 
> 标签：java, python, floating-point

好的，

我遇到了一个舍入错误问题。我有一个 java 程序，它逐行读取一些数字列表。该程序要求此列表为浮点数（什么类型的浮点数？我怀疑是单精度）数字，其总和 S 在 0.999 和 1.001 之间（即 0.999 <= S <= 1.001）。这是一个例子：

```
from numpy import array, linalg

def Normalize(X):
    NumpyX = array(X)
    Norm = linalg.norm(NumpyX)
    Normalize = NumpyX/Norm
    return Normalize

def FileMaker(FilePointer,Vector)
    for i in Vector:
        FilePointer.write('%f\n'%i)
    return

#sum(SubstitutionPoints) does not add to 1
SubstitutionPoints =[0.00606508512067950,0.00675296642376962,0.00688999694872917,0.00580692396866418,0.00680583604896024,0.00609061670962565,0.00585881991631447,0.00577148570812953,0.00600882981888663,0.00618499536435559,0.00650767341787896,0.00670521809234427,0.00699374780209504,0.00841141135948587,0.00830145870238677,0.00879477131238090,0.00918627324146331,0.00958946761973615,0.01032404247887830,0.01093417870737930,0.01188202458790520,0.01261860720648550,0.01355451051017660,0.01473818756656830,0.01623978223562570,0.01811682034513980,0.01990010225231130,0.02154250858435480,0.02418185925226890,0.02583490296173980,0.02844212438633430,0.03194935989118780,0.03534228607419560,0.03971366519834600,0.04548573525944540,0.05190994307855660,0.05190994307855660,0.05190994307855660,0.05190994307855660,0.05190994307855660,0.05190994307855660,0.05190994307855660,0.05190994307855660,0.05190994307855660,0.05190994307855660,0.05190994307855660,0.05190994307855660,0.05190994307855660,0.05190994307855660,0.05190994307855660,0.05190994307855660,0.05190994307855660,0.05190994307855660,0.05190994307855660,0.05190994307855660,0.05190994307855660,0.05190994307855660,0.05190994307855660,0.05190994307855660,0.05190994307855660,0.05190994307855660,0.05190994307855660,0.05190994307855660,0.05190994307855660,0.05190994307855660,0.05190994307855660,0.05190994307855660,0.05190994307855660,0.05190994307855660,0.05190994307855660,0.05190994307855660,0.05190994307855660,0.05190994307855660,0.05190994307855660,0.05190994307855660,0.05190994307855660,0.05190994307855660,0.05190994307855660,0.05190994307855660,0.05190994307855660,0.05190994307855660,0.05190994307855660,0.05190994307855660,0.05190994307855660,0.05190994307855660,0.05190994307855660,0.05190994307855660,0.05190994307855660,0.05190994307855660,0.05190994307855660,0.05190994307855660,0.05190994307855660,0.05190994307855660,0.05190994307855660,0.05190994307855660,0.05190994307855660,0.05190994307855660,0.05190994307855660,0.05190994307855660,0.05190994307855660,0.05190994307855660]
NormedSP = Normalize(SubstitutionPoints)
SubFile = open('Sub.txt','w')
FileMaker(SubFile,NormedSP)
SubFile.close() 
```

由于python不使用单精度浮点数，我担心创建的文件会导致我的java程序出现问题，因为我的java程序（metasim）返回错误：

```
Simulating files:
[BorreliaBurgdorferiB31_CP32-3.fasta]
java.lang.Exception: Substitution rates don't sum to 1.0.
!!! FAILED !!! 
```

不幸的是，我无法调试 java 程序，因为它是“java 可执行文件”。我唯一的选择是提供正确的输入。

任何建议/帮助表示赞赏。

# 编辑

从尝试 float32() 的一些建议中，我修改了我的规范化方法：

```
def Normalize(self,X):
    Total = sum(X)
    NumpyX = array([float32(i) for i in X])
    Norm = linalg.norm(NumpyX,ord=1)
    Normalize = NumpyX/Norm
    return Normalize 
```

我开始怀疑这是单精度浮点问题。

我的输出是否被截断并导致错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T03:07:51.293

如果您只需要精确到小数点后三位，为什么不将这些值乘以 1000，用整数进行所有数学运算，然后只在输出中添加小数点？这样，应该很容易确保总和是准确的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T02:26:29.023

[`numpy.linalg.norm`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.linalg.norm.html)需要`ord=1`关键字 arg 来执行您期望的操作。使用您当前的数据和定义...

```
>>> Normalize(substitution_points).sum()
9.0451896403987444 
```

您可以改为这样做 - 这也可以正确缩放负值（对值`linalg.norm`求和`abs`）：

```
>>> def normalize(x):
...     a = numpy.array(x)
...     return a / a.sum()
... 
>>> normalize(substitution_points).sum()
0.99999999999999789 
```

`0.9999999... > 0.999`，因此根据您提供的规范，它*应该可以工作。*

但是......它似乎仍然无法正常工作。尝试使用`numpy.float16`-- 并注意创建浮点数组的更惯用的方法是这样的：

```
array([ 0.,  1.,  2.,  3.,  4.], dtype=float32) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T03:36:18.397

您的 Normalize 方法不会强制列表的总和为 1：除以范数会将*范*数设置为 1。要将总数设置为 1，您需要除以当前总数：

```
def normalize(X):
   total = sum(X)
   return [x/total for x in X] 
```

# asp.net - ajax 工具包 使用 asp .net 自动完成下拉菜单

> ID：11515188
> 
> 赞同：0
> 
> 时间：2012-07-17T02:16:25.490
> 
> 标签：asp.net, ajax, autocomplete

我有一个针对文本框的 Ajaxtool 工具包 AutoComplete 扩展器控件。我正在调用 Web 服务并返回要绑定到 AutoComplete 扩展器的值，并且效果很好。

现在，如果用户从自动完成下拉菜单中选择了一个值，目标文本框会填充它，但是如果用户在文本框中输入了一个值，并且如果该值在自动完成下拉菜单中，那么保留该值是可以的，但如果用户在文本框中键入不在自动完成下拉列表中的任何其他值，然后在文本框模糊时，应清除用户键入的值。这是 UI 条件。我不确定在文本框的 onblur() 中写什么代码。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T06:39:18.070

这个问题得到了解决。我将 web 服务结果保存在文本框的隐藏文件和模糊中，我将文本框中输入的值与隐藏字段中的列表进行了比较。

# ios - 更新应用程序后 Xcode localizable.strings 不起作用

> ID：11515190
> 
> 赞同：2
> 
> 时间：2012-07-17T02:17:01.943
> 
> 标签：ios, xcode, localization, workspace, localizable.strings

当我第一次开始 Apple 开发时，我开始了一个项目，并且可能在文件结构中犯了一些有趣的错误，这有助于导致这个问题。也就是说，我最近根据 WWDC 2012 的一些示例代码将我的 Xcode 项目切换到了工作区。

举例来说，假设 localizable.strings 文件中有一个键值对：“someStringThatShouldBeLocalized”=“root view title”

原始的“物理”结构类似于以下内容：

```
- iOS
-- localizable.strings
-- core data models & classes 
```

工作区结构类似于以下内容：

```
- iOS
- Mac OSX
- Shared
-- core data models & classes
-- en.lproj
--- localizable.strings 
```

localizable.strings 文件以及核心数据模型和类在所有三个项目中都被引用。当我构建并运行它们中的任何一个时，它都会按预期工作：

1.  使用正确的数据模型和类，并且
2.  使用了正确的本地化字符串 - “根视图标题”

但是，当我从 App Store 模拟更新（安装商店当前可用的应用程序，然后从 Xcode 运行或从源代码管理的标记副本安装）时，它无法按预期工作：

1.  使用了正确的数据模型和类，但是
2.  不正确/没有使用本地化字符串，我看到的只是调用 NSLocalizedString(key, comment) -“someStringThatShouldBeLocalized”的键

同样，仅在从以前安装的应用程序版本实际更新时才会出现问题。

谢谢。

# objective-c - 标签栏项目不接收变量

> ID：11515192
> 
> 赞同：0
> 
> 时间：2012-07-17T02:17:11.200
> 
> 标签：objective-c, xcode, uitabbarcontroller, uitabbaritem

首先，我正在使用情节提要。我首先创建了一个由一个类控制的视图控制器，在这个视图中，有一个文本字段，用户在其中输入一个数字，一个按钮使用模式将用户带到一个标签栏控制器，其中有两个项目“一”和“二”，“一" 和 "two" 将​​我们带到不同的视图控制器（由同一个类控制），但都带有标签，这个标签必须呈现用户在第一个视图中放入文本字​​段的值......我只知道该怎么做通过：

```
NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
[prefs setInteger:[mytextfield.text intValue] forKey:@"integerKey"]; 
```

在一个班级中，并且：

```
NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
NSInteger mynumber = [prefs integerForKey:@"integerKey"];

NSString *mystring = [[NSString alloc] initWithFormat:@"%i", mynumber];
mylabelonone.text = mystring;
mylabelontwo.text = mystring; 
```

在另一个班级...

但是，当我在模拟器中对其进行测试时，然后单击将我们带到“一”的按钮，标签是空的，即便如此，当我单击转到“二”的项目时，标签就在那里，并带有确切的数字！

我试图在标签栏控制器中更改“一”和“二”的顺序，然后问题发生在“二”上，一个是完美的！

我不知道会发生什么...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T02:36:05.957

表视图控制器以一种有趣的方式工作。在选项卡之间切换时，方法如 `viewWillAppear`或`viewWillDisappear`。

因此，问题变成了您将发布的代码行放在哪里。该代码将起作用，但前提是第一个代码在用户点击不同的选项卡之前运行，并且代码的第二部分在第一部分之后运行。

`– tabBarController:shouldSelectViewController:`和`tabBarController:didSelectViewController:`

另一种方法是导入一个视图，然后在仍然在第一个视图中时从第二个视图设置一个变量。

# jquery - Adsense 与 jquery-ui-map

> ID：11515194
> 
> 赞同：0
> 
> 时间：2012-07-17T02:17:32.993
> 
> 标签：jquery, google-maps, adsense

您可以在下面看到我的显示地图和标记的代码（来自 Json）：

```
$('#map_canvas').gmap().bind('init', function() { 
    $.getJSON( '../js/locate.php', function(data) { 
        $.each( data.markers, function(i, marker) {
            var mapvalue=new google.maps.LatLng(marker.latitude, marker.longitude);  

            $('#map_canvas').gmap('addMarker', { 
                'tags': [''+marker.category+''],
                'position': mapvalue, 
                'bounds': true,                             
                'icon':'../images/'+marker.category+'.png',
                'animation':google.maps.Animation.DROP
            }).click(function() {
                $('#map_canvas').gmap('openInfoWindow', { 'content': ''+marker.category+'<BR><div id="cust_content"></div>' }, this);
                setTimeout("opencust(\'" +marker.id+"\');",100);
            });                 
        });                                      
    });  
}); 
```

如何在我的地图上包含新的 adsense 脚本：[https ://developers.google.com/maps/documentation/javascript/advertising#AdvertisingAdUnit](https://developers.google.com/maps/documentation/javascript/advertising#AdvertisingAdUnit)

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T08:38:55.590

经过一番研究后，我做了一些改动。您需要执行以下步骤。

1.  首先在您的 Google Maps JS 中包含 Adsense。注意添加了**library=adsense&**

    ```
    <script src="http://maps.google.com/maps/api/js?libraries=adsense&sensor=true"></script> 
    ```

2.  如下修改你的JS。注意**$('#map_canvas').gmap('get','map')**

    ```
    $('#map_canvas').gmap().bind('init', function() {
        $.getJSON( '../js/locate.php', function(data) {
            $.each( data.markers, function(i, marker) {
                var mapvalue=new google.maps.LatLng(marker.latitude, marker.longitude);
                    $('#map_canvas').gmap('addMarker', {
                    'tags': [''+marker.category+''],
                    'position': mapvalue,
                    'bounds': true,
                    'icon':'../images/'+marker.category+'.png',
                    'animation':google.maps.Animation.DROP
                }).click(function() {
                    $('#map_canvas').gmap('openInfoWindow', { 'content': ''+marker.category+'<BR><div id="cust_content"></div>' }, this);
                    setTimeout("opencust(\'" +marker.id+"\');",100);
                });
            });
        });
        var adUnitDiv = document.createElement('div');
        var adUnitOptions = {
            format: google.maps.adsense.AdFormat.HALF_BANNER,
            position: google.maps.ControlPosition.TOP,
            backgroundColor: '#c4d4f3',
            borderColor: '#e5ecf9',
            titleColor: '#0000cc',
            textColor: '#000000',
            urlColor: '#009900',
            map: $('#map_canvas').gmap('get','map'),
            visible: true,
            publisherId: 'YOUR_PUBLISHER_ID'
        };
        adUnit = new google.maps.adsense.AdUnit(adUnitDiv, adUnitOptions);
    }); 
    ```

# html - 在 ASP.NET MVC 中处理可变数量的动态输入字段？

> ID：11515196
> 
> 赞同：4
> 
> 时间：2012-07-17T02:18:21.750
> 
> 标签：html, asp.net-mvc, web-services

我做过很多 C# 编程，但直到最近我才接触过很多网络。我一直在努力解决的一件事，并且真的认为一定有一种我不知道的更好方法，将数据以表格形式发送到服务器。

我正在使用 MVC4/C#，我正在开发一个至少有 18 个输入的 html 表单，其中一些有多个选择，并且用户可以单击“添加另一个”到某个位置，并且可以使输入字段的数量 30+。

有没有什么巧妙的方法可以将它打包成某种 javascript 对象，并将其作为 c# 中的对象接收？

我宁愿不使用表单发布帖子，因为我想使用 AJAX 并且不刷新页面。

到目前为止，我在这个项目中所做的唯一另一种形式是，大约有 6 个输入，但每个输入都是可选的。我构建了一个 queryurl 并使用了 jquery。只是这似乎比需要的痛苦更大，而且要小得多。

```
$.get(apiLink, function (response) {
        $("#SearchResults").html(response);
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T02:26:00.573

您可以使用您拥有的所有输入创建一个 JSON 对象，然后使用 JSON.NET 在控制器上对其进行解析

# iphone - 点击屏幕锁定按钮时，如何完全退出我的应用程序？

> ID：11515197
> 
> 赞同：4
> 
> 时间：2012-07-17T02:18:41.717
> 
> 标签：iphone, ios, ios5

我添加`UIApplicationExitsOnSuspend`到我的`Info.plist`并将其设置为`YES`. 当点击主页按钮时，该键完全退出我的应用程序。但是屏幕锁定呢？或者如何检测屏幕锁定事件？没有名为`UIApplicationExitsOnScreenLock`I want 的密钥。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T03:49:16.410

[请参阅此答案](https://stackoverflow.com/questions/706344/lock-unlock-events-iphone)中的巧妙解决方法。这似乎是唯一的方法，但它是一种 hack，因此对 iOS 的更改可能使其无法正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T03:26:04.657

像这样放弃是不合适的。在您的应用程序委托的 -applicationWillResignActive: 中，只需对用户进行身份验证，或者您尝试通过每次完全重新启动来完成的任何操作。我不知道钢制保险箱是什么，但它可能不会那样退出。

或者也许检查 UIApplicationProtectedDataWillBecomeUnavailable 通知？但是，如果用户启用了密码，它只会在设备锁定时发送。如果您在“秘密”文件上使用 NSFileProtectionComplete，请在处于非活动状态时关闭它们。

# umbraco - 强制 Umbraco 将 Home.aspx 设置为默认文档？

> ID：11515204
> 
> 赞同：2
> 
> 时间：2012-07-17T02:19:44.177
> 
> 标签：umbraco

我正在拼命寻找一种方法来强制（甚至破解）Umbraco 将默认文档设置为 Content/Pages/Home.aspx，而不是第一页。

（目前我创建了一个虚拟页面，该页面重定向到 Home.aspx 作为 Content 下的第一页 - 但它并不理想，尤其是 SEO）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T12:24:58.643

这很容易做到，向现有/当前默认文档添加一个名为“umbracoInternalRedirectId”的新字段，类型为“content-picker”。

在编辑该页面的内容时，选择内容选择器并将其指向您希望成为默认文档并保存/发布的页面，您应该一切顺利。

# objective-c - 解析 youtube api 提要 v2

> ID：11515205
> 
> 赞同：0
> 
> 时间：2012-07-17T02:19:44.137
> 
> 标签：objective-c, ios, xml, xpath, touchxml

我正在尝试解析 YouTube 数据 API 提供的 YouTube 提要。此提要列出[了特定用户上传的](https://developers.google.com/youtube/2.0/developers_guide_protocol#Videos_uploaded_by_a_specific_user)所有视频，例如：[https ://gdata.youtube.com/feeds/api/users/google/uploads?v=2](https://gdata.youtube.com/feeds/api/users/google/uploads?v=2)

我在我的 iOS 应用程序中使用 touchXML。我尝试`<entry>`使用 CXMLDocument 中的 nodesForXPath 函数收集所有节点。

```
NSURL *url = [NSURL URLWithString: newsFeedUrl];
CXMLDocument *feedParser = [[CXMLDocument alloc] initWithContentsOfURL:url options:0 error:nil];
NSArray *resultNodes = [feedParser nodesForXPath:@"//entry" error:nil];
NSLog(@"%@",resultNodes.count); // >>> return (null) 
```

但是这个查询不返回任何东西。我检查了 xpath 语法；我不认为这是错的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T23:57:33.680

我发现了这个问题。它是关于 Xpath 和命名空间的。为了使用 xpath 解析 XML 文档，我必须为我想要支持的每个命名空间创建一个默认映射。

```
NSDictionary * maps = [NSDictionary dictionaryWithObjects:[NSArray arrayWithObjects:@"http://www.w3.org/2005/Atom",@"http://search.yahoo.com/mrss/",@"http://a9.com/-/spec/opensearch/1.1/",@"http://schemas.google.com/g/2005",@"http://gdata.youtube.com/schemas/2007",@"W/\"C08MQXg-cSp7I2A9WhJRFEs.\"",nil] forKeys:[NSArray arrayWithObjects: @"ns",@"media",@"openSearch",@"gd",@"yt",@"etag",nil]];
NSArray *resultNodes = [feedParser nodesForXPath:@"//ns:entry" namespaceMappings:maps error:nil]; 
```

更多关于[TouchXML](https://stackoverflow.com/questions/526887/getting-the-value-of-an-element-in-cocoa-using-touchxml?answertab=active#tab-top)的解释。我发现了一篇关于[GDataXML](http://matthewcarriere.github.com/blog/2011/08/21/xpath-query-returns-no-results-using-libxml2-and-gdataxmldocument-nodesforxpath/)的帖子，它可能很有用。

# php - PHP，网络抓取工具 - 我是永远循环，还是应该分配更多内存，还是有更有效的方法来做到这一点？

> ID：11515209
> 
> 赞同：0
> 
> 时间：2012-07-17T02:20:45.540
> 
> 标签：php, web, screen-scraping, simple-html-dom

如果我将 $number <= 25，或 <= 50，或 <= 75 放入 for 循环中，此脚本将完全按照我的意愿工作，但如果我输入 100 或更高，则会引发错误：

> 致命错误：第 1074 行 /public_html/php-scraper/simplehtmldom_1_5/simple_html_dom.php 中允许的 67108864 字节内存大小已用尽（试图分配 24 字节）

有没有更好的编码方法？从网站上获取数据似乎一点也不奇怪。我是否需要分配或初始化更多内存（没有这方面的经验）。它只是看起来不像是一个复杂的 php 任务。我也不知道这个网页是什么，我只是为一家公司做这个，他们选择了这个目录。

谢谢阅读。这是代码

```
<?php

include_once 'simple_html_dom.php';

echo 'Category, AvnetPartNumber, Manufacturer, Price, Availability,';

//number is the value of which item the page starts with

for($number = 0; $number <= 100; $number = $number + 25){

// Create DOM from URL or file

$url = "http://avnetexpress.avnet.com/store/em/EMController/_/N-?Ns=PartNumber|0&action=excess_inventory&catalogId=&cutTape=&inStock=&langId=-1&myCatalog=&npi=&proto=&regionalStock=&rohs=&storeId=500201&term=&topSellers=&No=".$number;

$html = file_get_html($url);

$i = 0;

// Find all images 

foreach($html->find('td[class=small dataTd]') as $element) {

    if($i == 1 || $i == 3 || $i == 4 || $i == 7 || $i == 8){

        echo $element->plaintext . ',' ;

    }

    if($i == 8){
        $i =0;
    }

    else{
        $i++;
    }

    }
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T03:17:47.927

我会做的稍有不同，首先我会使用 curl（2 个原因它更快，你可以通过设置 useragent 看起来像一个普通的浏览器），最后不用打扰`simple_html_dom`，你可以用 PHP 内置的 domDocument 做些什么。

此外，您不想重置`$i`& 8，因为每行有 10 列，这会扭曲您的结果，因此在 9 上重置将按预期创建新行，在我的示例中，我将所有数据放在一个数组中，但是您应该把它放在一个数据库等中，你可以看到 4 页它的峰值内存使用量是 1.40MB，希望它有所帮助。

```
<?php 
$url = 'http://avnetexpress.avnet.com/store/em/EMController/_/N-?Nn=50&Ns=PartNumber|0&action=excess_inventory&catalogId=&cutTape=&inStock=&langId=-1&myCatalog=&npi=&proto=&regionalStock=&rohs=&storeId=500201&term=&topSellers=&No=';
//4 pages
$result = run_scrap($url,100,25);

//Memory usage
$memory = array();
$memory['used'] = getReadableFileSize(memory_get_peak_usage());
$memory['total'] = ini_get("memory_limit").'B';

print_r($result);

print_r($memory); //Array ( [used] => 1.40 MB [total] => 128MB ) 
/** Result
 * Array
(
    [0] => Array
        (
            [title] => Logic and Timing - Crystals
            [partnum] => ##BP11DCRK430
            [manufactuere] => TOKO America
            [price] => $0.3149
            [availability] => 4500 Stock
        )

    [1] => Array
        (
            [title] => Inductor - Inductor Leaded
            [partnum] => #187LY-471J
            [manufactuere] => TOKO America
            [price] => $0.3149
            [availability] => 100 Stock
        )

...
*/

function run_scrap($url,$total_items=100,$step=25){
    $range = range(0,$total_items,$step);
    $result = array();
    foreach($range as $page){
        $src    = curl_get($url.$page);
        $result = array_merge($result,process($src));
    }
    return $result;
}

function process($src){
    $return = array();
    $dom = new DOMDocument("1.0","UTF-8");
    @$dom->loadHTML($src);
    $dom->preserveWhiteSpace = false;

    $return = array();
    $i=0;
    $r=0;
    foreach($dom->getElementsByTagName('td') as $ret) {
        if($ret->getAttribute('class') == 'small dataTd'){

            switch($i){
                case 1:
                    $return[$r]['title'] = trim($ret->nodeValue);
                    break;
                case 3:
                    $return[$r]['partnum'] = trim($ret->nodeValue);
                    break;
                case 4:
                    $return[$r]['manufactuere'] = trim($ret->nodeValue);
                    break;
                case 7:
                    $return[$r]['price'] = trim($ret->nodeValue);
                    break;
                case 8:
                    $return[$r]['availability'] = trim($ret->nodeValue);
                    break;
                default:
                    break;
            }

            //Reset after col 9
            if($i == 9){
                $i = 0;
                $r++;
            }else{
                $i++;
            }
        }
    }
    return $return;
}

function curl_get($url){
    $return = '';
    (function_exists('curl_init')) ? '' : die('cURL Must be installed!');

    $curl = curl_init();
    $header[0] = "Accept: text/xml,application/xml,application/json,application/xhtml+xml,";
    $header[0] .= "text/html;q=0.9,text/plain;q=0.8,image/png,*/*;q=0.5";
    $header[] = "Cache-Control: max-age=0";
    $header[] = "Connection: keep-alive";
    $header[] = "Keep-Alive: 300";
    $header[] = "Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7";
    $header[] = "Accept-Language: en-us,en;q=0.5";

    curl_setopt($curl, CURLOPT_URL, $url);
    curl_setopt($curl, CURLOPT_USERAGENT, 'Mozilla/5.0 (X11; U; Linux i686; pl-PL; rv:1.9.0.2) Gecko/2008092313 Ubuntu/9.25 (jaunty) Firefox/3.8');
    curl_setopt($curl, CURLOPT_HTTPHEADER, $header);
    curl_setopt($curl, CURLOPT_HEADER, 0);
    curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($curl, CURLOPT_FOLLOWLOCATION, true);
    curl_setopt($curl, CURLOPT_TIMEOUT, 30);
    curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, false);

    $result = curl_exec($curl);
    curl_close($curl);
    return $result;
}

//Debug Function - not related to the scrapper
function getReadableFileSize($size, $retstring = null) {
    $sizes = array('bytes', 'kB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB');

    if ($retstring === null) { $retstring = '%01.2f %s'; }

    $lastsizestring = end($sizes);

    foreach ($sizes as $sizestring) {
        if ($size < 1024) { break; }
        if ($sizestring != $lastsizestring) { $size /= 1024; }
    }
    if ($sizestring == $sizes[0]) { $retstring = '%01d %s'; }
    return sprintf($retstring, $size, $sizestring);
}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T02:43:48.600

```
<?

require_once("SimpleHtmlDom/simple_html_dom.php");
$_htmlDom = new simple_html_dom();

echo 'Category, AvnetPartNumber, Manufacturer, Price, Availability,';

//number is the value of which item the page starts with

for($number = 0; $number <= 200; $number += 25){
    // Create DOM from URL or file
    $url = "http://avnetexpress.avnet.com/store/em/EMController/_/N-?Ns=PartNumber|0&action=excess_inventory&catalogId=&cutTape=&inStock=&langId=-1&myCatalog=&npi=&proto=&regionalStock=&rohs=&storeId=500201&term=&topSellers=&No=".$number;

    $html = file_get_contents($url);
    $_htmlDom->load($html);

    $i = 0;
    $elementList = $_htmlDom->find('td[class=small dataTd]');

    // Find all images 
    foreach($elementList as $element) {
        if($i == 1 || $i == 3 || $i == 4 || $i == 7 || $i == 8){
            echo $element->plaintext . ',' ;
        }

        if($i == 8){
            $i = 0;
        }else{
            $i++;
        }
        flush();
    }
}
?> 
```

此版本在 128MB RAM NAS 中测试（实际上它小于 80MB RAM），它可以工作。
我只是修改一些东西：

1.  改为OO
2.  使用 `$elementList` 变量来存储你的 `'td[class=small dataId]'`
3.  测试数量高达 200
4.  添加了`flush()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T02:29:06.720

该问题似乎与您的代码无关。当您增加时，`$number`您正在增加（看起来是）搜索返回的结果数量。

返回的结果越多，生成的网页就越大，因此最终会得到更多的 DOM 节点和链接。问题是当您尝试调用`$html->find()`. 我不确定该解析器是如何工作的，但它可能会在您加载脚本时将所有节点解析到内存中。

解决方案是提高 PHP 的[内存限制](http://www.php.net/manual/en/ini.core.php#ini.memory-limit)或每次请求提取少于 100 个结果，因为这似乎是您耗尽内存的地方。

`ini_set('memory_limit', '128M');`您可以通过在脚本开头调用来增加内存限制。注意：我只是随便挑`128M`的。将其设置为您认为需要的任何值。

# objective-c - 目标 c 中当月的星期二数

> ID：11515213
> 
> 赞同：3
> 
> 时间：2012-07-17T02:21:06.517
> 
> 标签：objective-c, calendar, weekday

我正在寻找一种方法来计算Objective C中当月星期二的数量。

例如，如果代码在今天（2012 年 7 月 16 日）运行，它将输出 5，因为 2012 年 7 月有 5 个星期二（第 3、10、17、24 和 31 日）。

我已经在 Excel 中看到了在线解决方案，但我正在努力将其转换为 Objective C。

谢谢你的帮助！好久不见，第一次。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T03:27:14.633

我们需要一个日历：

```
 NSCalendar *calendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar]; 
```

现在让我们获取当前月份和年份：

```
 NSDate *now = [NSDate date];
    NSDateComponents *monthAndYear = [calendar components:NSMonthCalendarUnit | NSYearCalendarUnit fromDate:now]; 
```

我们可以使用它来获取当前月份和年份的第一个星期二：

```
 NSDateComponents *firstTuesdayComponents = [monthAndYear copy];
    firstTuesdayComponents.weekday = 3; // Sunday = 1
    firstTuesdayComponents.weekdayOrdinal = 1; // First Tuesday
    NSDate *firstTuesday = [calendar dateFromComponents:firstTuesdayComponents]; 
```

我们也可以用它来获取下个月的第一天：

```
 NSDateComponents *firstOfNextMonthComponents = [monthAndYear copy];
    firstOfNextMonthComponents.month += 1;
    firstOfNextMonthComponents.day = 1;
    NSDate *firstOfNextMonth = [calendar dateFromComponents:firstOfNextMonthComponents]; 
```

现在我们可以询问两个日期之间的天数：

```
 NSDateComponents *differenceComponents = [calendar components:NSDayCalendarUnit fromDate:firstTuesday toDate:firstOfNextMonth options:0]; 
```

大多数星期有 7 天和一个星期二，因此我们应该将天数除以 7。如果有余数，我们应该将其四舍五入，因为我们是从星期二开始计算的。

```
 int tuesdayCount = (differenceComponents.day + 6) / 7; // Adding 6 makes the integer division round up.
    NSLog(@"There are %d Tuesdays in month %d of year %d.", tuesdayCount, (int)monthAndYear.month, (int)monthAndYear.year); 
```

现在让我们跳进时间机器来测试它：

```
There are 5 Tuesdays in month 1 of year 2012.
There are 4 Tuesdays in month 2 of year 2012.
There are 4 Tuesdays in month 3 of year 2012.
There are 4 Tuesdays in month 4 of year 2012.
There are 5 Tuesdays in month 5 of year 2012.
There are 4 Tuesdays in month 6 of year 2012.
There are 5 Tuesdays in month 7 of year 2012.
There are 4 Tuesdays in month 8 of year 2012.
There are 4 Tuesdays in month 9 of year 2012.
There are 5 Tuesdays in month 10 of year 2012.
There are 4 Tuesdays in month 11 of year 2012.
There are 4 Tuesdays in month 12 of year 2012. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T02:38:58.910

在查看 、和的输出时`cal 2012`，我得出了一些结论：`cal 2011``cal 2000`

每个月有四个或五个星期二。

要查找有五个星期二的月份，请注意：

*   对于有 31 天的月份，第一个必须在星期日、星期一或星期二
*   对于有 30 天的月份，第一个必须在星期一或星期二
*   对于有 29 天的月份，第一个必须在星期二

希望这是一个更容易解决的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T03:27:51.257

使用基于萨诺德在他的回答中所做的相同观察的算法，这应该可以解决问题：

```
- (NSUInteger)numberOfTuesdaysInMonthContainingDate:(NSDate *)date
{
    NSCalendar *calendar = [NSCalendar currentCalendar];

    NSUInteger numDaysInMonth = [calendar rangeOfUnit:NSDayCalendarUnit inUnit:NSMonthCalendarUnit forDate:date].length;

    NSDate *firstDayOfMonth;
    NSTimeInterval firstDayOfMonthLength;
    if (![calendar rangeOfUnit:NSMonthCalendarUnit startDate:&firstDayOfMonth interval:&firstDayOfMonthLength forDate:date]) {
        NSLog(@"Unable to calculate first day of the month for %@", date);
        return 0;
    }

    NSUInteger firstDayOfTheMonthWeekday = [calendar ordinalityOfUnit:NSWeekdayCalendarUnit inUnit:NSWeekCalendarUnit forDate:firstDayOfMonth];

    // The following is for Tuesday only, the math is more complex for an abitrary weekday
    NSUInteger numTuesdays = 4;
    NSUInteger minValidWeekday = 32 - numDaysInMonth; 
    if (firstDayOfTheMonthWeekday >= minValidWeekday && firstDayOfTheMonthWeekday <= 3) {
        numTuesdays = 5;
    }

    return numTuesdays;
} 
```

# iphone - 将 UIView 附加到 UIScrollView 的顶部

> ID：11515216
> 
> 赞同：1
> 
> 时间：2012-07-17T02:21:34.590
> 
> 标签：iphone, objective-c, ios, ipad

例如在 Tweetbot 的 iPhone 应用程序中。当您打开应用程序并收到新的推文时，它只会附加到 UIScrollView 的顶部，并且您看到的当前推文没有被刷新。我怎样才能达到同样的效果？假设我有一个 UIScrollView，其中一个 UIView 从原点 10,10 添加到 UIScrollView。

然后我下载了一些项目，我想把它放在 10,10.. 所以我基本上需要把这个旧项目移到 10,10 对吗？如果我这样做了，那么在那个移动的用户会看到它移动了，这不是我想要的效果。就像在 Tweetbot 的应用程序中一样，似乎没有任何变化，只是您将区域扩大到 10,10 以上并在那里添加新的东西。

我该怎么做呢？

基本上我想在 UIScrollView 中实现 insertRowAtIndexPath。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T02:29:59.980

如果您设置`contentOffset`不设置动画，则不会有可见的滚动动画。因此，如果您的新视图高 200 点，您可以将新视图的原点设置为 (10,10)，将旧视图的原点设置为 (10,210)，并将`contentOffset`滚动视图的原点设置为 (10,210)，您应该可以达到您想要的效果. 您还需要增加`contentSize`滚动视图的大小，使其足以容纳它包含的所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T02:47:09.520

将以这种方式重申这个问题：如何在不移动已经存在的内容的情况下将内容添加到 UIScrollView 的顶部（相对于它的当前偏移量）。

如果这是正确的问题，正确的答案是按照您的建议进行添加并向下移动，然后滚动与添加的内容相同的高度，从而产生旧内容没有移动的错觉。

```
- (void)insertRowAtTop {

    // not showing insert atIndexPath because I don't know how you have your subviews indexed
    // inserting at the top, we can just shift everything down.  you can extend this idea to
    // the middle but it requires that you can translate from rows to y-offsets to views

    // shift everything down
    for (UIView *view in self.scrollView.subviews) {
        if ([view isKindOfClass:[MyScrollViewRow self]]) {
            MyScrollViewRow *row = (MyScrollViewRow *)view;          // all this jazz so we don't pick up the scroll thumbs
            row.frame = CGRectOffset(row.frame, 0.0, kROW_HEIGHT);   // this is a lot easier if row height is constant
        }
    }
    MyScrollViewRow *newRow = [[MyScrollViewRow alloc] initWithFrame:CGRectMake(0.0,0.0,320.0,kROW_HEIGHT)];
    // init newRow
    [self.scrollView addSubview:newRow];

    // now for your question.  scroll everything so the user perceives that the existing rows remained still
    CGPoint currentOffset = self.scrollView.contentOffset
    self.scrollView.contentOffset = CGPointMake(currentOffset.x, currentOffset.y + kROW_HEIGHT);
} 
```

# drupal - 是否有合适的 Drupal 7 form api managed_file 教程？

> ID：11515221
> 
> 赞同：12
> 
> 时间：2012-07-17T02:22:10.750
> 
> 标签：drupal, drupal-7

我已经在互联网上搜索了半个小时，但找不到一个。

我想在 D7 中使用 managed_file 表单 api 来允许使用上传图像文件；更具体地说，我认为“#upload_validators”属性可以解决问题（如果可能，在上传之前验证文件扩展名；或者至少在验证阶段验证，但不在提交函数中验证）。我检查了示例模块中的 image_example 和 file_example，但找不到正确的用法。

所以我想知道是否有关于 managed_file 的适当教程？非常感谢。

更新：我在从 file.field.inc 搜索 drupal 目录后看到了一个示例，并按照示例编写了如下代码：

```
$form['file_upload'] = array(
  '#type'   => "managed_file",
  '#title'  => t("Upload"),
  '#descripion' => t("Only Image Files are allowed."),
  '#progress_indicator' => "bar",
  '#upload_location'    => "public://img/dish",
  "#upload_validators"  => array("file_validate_extensions" => "png gif jpg"),
); 
```

这解决了问题。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-17T03:01:19.647

`managed_file`这是一个正在使用的字段的示例，其中包括`#upload_validators`取自[https://drupal.stackexchange.com/a/5630/1103](https://drupal.stackexchange.com/a/5630/1103)

```
$form['picture']['file'] = array(
  '#type' => 'managed_file',
  '#title' => t('picture'),
  '#description' => t('Allowed extensions: gif png jpg jpeg'),
  '#default_value' => (isset($foo->picture->fid) ? $foo->picture->fid : ''),
  '#upload_location' => variable_get('picture_upload_location'),
  '#upload_validators' => array(
    'file_validate_extensions' => array('gif png jpg jpeg'),
    // Pass the maximum file size in bytes
    'file_validate_size' => array(MAX_FILE_SIZE*1024*1024),
  ),
); 
```

# objective-c - Mac App 中的滑动菜单

> ID：11515224
> 
> 赞同：0
> 
> 时间：2012-07-17T02:23:18.187
> 
> 标签：objective-c, macos, nstableview, nsscrollview

我怎样才能制作一个滑动菜单，例如（例如）Sparrow 的主电子邮件菜单？

在麻雀的情况下：

它是一列按钮，基本上可以滑动以显示 NSScrollView（带有自定义 NSTableView？），其中包含各种文件夹（收件箱、已发送等）。单击不同的帐户会导致该帐户向上滑动并显示内部的各种文件夹。

我怎么能做一个类似的菜单？

![在此处输入图像描述](../Images/512e321e858ca1d0168566abd415c7ea.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T02:51:49.523

这里有一些相当酷的 Apple 示例代码来处理表格视图和动画（但使用的东西通常只在 Mac OS X 10.7 中可用）：

[https://developer.apple.com/library/mac/#samplecode/AnimatedTableView/Listings/ATPopupWindow_m.html%23//apple_ref/doc/uid/DTS40008863-ATPopupWindow_m-DontLinkElementID_26](https://developer.apple.com/library/mac/#samplecode/AnimatedTableView/Listings/ATPopupWindow_m.html%23//apple_ref/doc/uid/DTS40008863-ATPopupWindow_m-DontLinkElementID_26)

此外，对于基本的窗口调整大小动画，您可以`setFrame:display:animate:`使用`NSWindow`.

# mysql - 如何在mac上由mysqld_safe启动杀死mysqld

> ID：11515227
> 
> 赞同：0
> 
> 时间：2012-07-17T02:24:04.883
> 
> 标签：mysql

任何人都知道如何在 mac 上杀死由 mysqld_safe 启动的 mysql。我尝试了以下命令，但它们都不起作用：

1) mysqladmin 关闭，2) kill -9 $pid_of_{mysqld_safe} 3) MYSQLCOM 关闭

请帮忙！谢谢，

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-17T06:50:08.223

在同事的帮助下，我用“launchctl unload”解决了这个问题

# ruby-on-rails - 无法使用 oauth_verifier 获取访问令牌，不断收到 401 错误

> ID：11515229
> 
> 赞同：0
> 
> 时间：2012-07-17T02:24:26.087
> 
> 标签：ruby-on-rails, twitter, oauth, twitter-oauth

我看到很多关于同一个问题的问题，但我找不到解决办法，所以我问了一个问题，以确保我没有错过任何事情。

在 Twitter 上，我将 callback_url 设置为“https://my_app_url/”。

```
# consumer
@consumer = OAuth::Consumer.new('consumer_id', 
                                'secret_key',
                                :site => 'https://api.twitter.com')

# request_token
@request_token = @consumer.get_request_token(:oauth_callback => "https://my_app_url/?state=#{state}")

# then get the user to log in via
login_url = @request_token.authorize_url

# I have a params[:oauth_token] and params[:oauth_verifier] in return
# I don't know what the oauth token is for
# I then should be able to get an access token

# all oauth calls are done in an object so @request_token has been conserved.
@access_token = @request_token.get_access_token(:oauth_verifier => params[:oauth_verifier])

# then it happens.
# => 401 Unauthorized 
```

我不知道为什么要提高 401。有没有我错过的步骤？我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T13:49:10.530

`get_request_token`在 OAuth 身份验证流程中为您提供临时 OAuth 令牌以对您进行身份验证。OAuth 验证器是用来证明用户授权应用程序的东西。`get_access_token`为了获得将用于所有经过身份验证的请求的最终 OAuth 令牌，您必须最后给出这个。

有关更多信息，请考虑阅读处理此问题的官方 Twitter 文档：[https](https://dev.twitter.com/docs/auth/using-oauth) ://dev.twitter.com/docs/auth/using-oauth ( [https://dev.twitter.com/docs/auth/implementing-sign-推特](https://dev.twitter.com/docs/auth/implementing-sign-twitter)用于描述过程）

# html - 如何在 HTML5 中修改画布透明度？

> ID：11515233
> 
> 赞同：0
> 
> 时间：2012-07-17T02:24:38.553
> 
> 标签：html

所以我有我的 index.html 和 canvas.css

```
body{
}
#canvasHIPPO{
 display:block;
 margin:0px auto 0px;
 width:100%;height:100%
 background-image:url('http://www.pcl.co.nz/site/pclimaging/images/Big%20Print%20Carry.jpg')
} 
```

在我的 index.html 中：

```
<div id="container">
<canvas id="canvasHIPPO" width="800" height="600" display="block"></canvas>
</div> 
```

我想知道如何：1）将画布居中在背景城市图像的顶部，尽管 2）不同的屏幕尺寸和/或 3）保持相同的纵横比。

我很确定 margin:0,auto 应该修复了 (1) 并将画布居中在背景图像的顶部......我错过了什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T03:03:39.927

您是要水平居中还是垂直居中图像？如果您将其水平居中，则在您的 css 中它应该是：

```
#content {
    background-image: url('http://www.pcl.co.nz/site/pclimaging/images/Big%20Print%20Carry.jpg');
}

#contentHIPPO {
    margin: 0 auto;
    display: block; 
    width: 800px;
    height: 600px;
} 
```

在你的 html 中：

```
<div id="content">
    <div id="contentHIPPO">Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat.</div>
</div> 
```

这将导致 div 水平居中，图像在背景中重复。如果您希望将图像重新调整到浏览器窗口的大小，则需要使用 javascript 来获取窗口的大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T04:48:06.147

你为什么不使用

```
display: webkit-box; 
```

新的 css3 提供了更多的属性遵循教程

[http://www.w3schools.com/css3/default.asp](http://www.w3schools.com/css3/default.asp)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T05:12:33.233

如果它是一个小项目，您总是可以将您的十六进制颜色 ( `#FFFFFF`) 转换为 RGB 和 Alpha（其中 Alpha 通道是透明度），看起来像这样`rgba(255,255,255,100)`。但是，如果您有数百甚至数千个颜色参考实例，则最好使用谷歌搜索教程。

# jquery - 如何制作颜色框内联图像，在视图中使用颜色框跳跳器创建，单击打开下一个图像

> ID：11515234
> 
> 赞同：0
> 
> 时间：2012-07-17T02:24:53.470
> 
> 标签：jquery, triggers, switch-statement, colorbox, next

我在视图中创建了一些画廊，使用颜色框触发器，其中包括图像、标题、评分按钮。一切正常，图像链接到节点。我希望我为彩盒图像库默认工作，这样当我单击图像时，它将在库中打开下一个图像。我完全被卡住了，我一直在搜索 inet 3 天，但没有找到任何东西。我尝试在颜色框叠加层内制作一个可点击的图像，它将切换到下一个画廊页面并尝试不同的代码变体，如下所示：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="/sites/all/libraries/colorbox/colorbox/jquery.colorbox-min.js"></script>
 <script type="text/javascript"> 
$(document).ready(function() {
   $("#nextlink").click(function() {
   $.colorbox.next();
   });
 }); 
```

当我单击下一个链接时，什么也没有发生。虽然 prev 和 next buttong 就像我想要的那样工作，但我没有成功应对他们的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T15:03:40.080

您是否已验证您的事件处理程序正在触发？此外，如果这是来自具有 href 属性的锚元素，则您必须处理默认行为。

```
$(document).ready(function() {
   $("#nextlink").click(function(e) {
       $.colorbox.next();
       e.preventDefault();
   });
}); 
```

在您尝试为其分配事件处理程序时，您的“#nextlink”是否存在于文档中？如果没有，您应该使用实时事件（或更新您的 jQuery 版本并使用更新的方法来处理事件委托）。

```
$(document).ready(function() {
   $("#nextlink").live('click', function(e) {
       $.colorbox.next();
       e.preventDefault();
   });
}); 
```

# yii - Yii - urlmanager 和活动高亮菜单

> ID：11515235
> 
> 赞同：1
> 
> 时间：2012-07-17T02:25:09.430
> 
> 标签：yii

我刚刚弄清楚如何配置 urlmanager 规则以使用诸如

```
'urlManager'=>array(
'urlFormat'=>'path',
'showScriptName'=>false,
'rules'=>array(
        '<type:\w+>s'=>'article/index',
) 
```

但是，现在我的 CMenu 没有为带有链接的主菜单提供活动突出显示

```
<?php $this->widget('zii.widgets.CMenu',array(
'items'=>array(
    array('label'=>'Articles', 'url'=>array('/articles')),

)); ?> 
```

即使我希望我的 URL 看起来像“/articles”，这种主动突出显示仍然有效吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T06:43:38.943

我找到了一个解决方案，虽然看起来有点恶心。我所做的只是添加一个“活动”条件来检查当前 URI 是否有“/article”作为前面。

```
array('label'=>'Articles', 
    'url'=>array('/articles'), 
    'active'=>strpos(Yii::app()->request->requestUri, '/article')===0), 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T19:07:02.847

```
array('label'=>'Articles', 
'url'=>array('/articles'), 
'active'=>Yii::app()->controller->name == 'articles'), 
```

# xml - Magento 缓存没有被清除

> ID：11515237
> 
> 赞同：7
> 
> 时间：2012-07-17T02:25:23.970
> 
> 标签：xml, magento, caching, local

我的**local.xml**中有一些配置问题，我无法加载我的 magento 前端和管理面板，然后我修复了我在**local.xml**中遇到的问题，为了加载我的新配置，我删除了所有内容**/var/cache**甚至**/var/session**文件夹中的内容。但令我惊讶的是，Magento 仍然加载旧的 local.xml 设置。

我尝试重新启动 apache 并清除了我的浏览器缓存，但没有任何效果。

有任何想法吗？？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-17T02:54:26.830

要更改核心配置并让它们保持不变（local.xml、基本 url 等），您需要清除 Magento 代码缓存，通常是通过实际手动`mage--?`删除`var/cache/`.

尽管您可以使用 phpMyAdmin 并查看数据库中的行已更新，但缓存配置可能会导致各种令人头疼的问题，包括基本 url 仍指向原始 Magento 安装（不同的文件夹、不同的服务器）。在删除缓存的配置信息之前，不会从数据库中重新读取配置。

如果您正在使用 APC 操作码缓存，则另一个卡住的地方是它。使用`apc.php`管理页面也可以清除它。停止和重新启动 Apache 将达到相同的结果

最后，如果您没有正确设置权限并且它们对您的网络服务器都是可读`var/cache/`和`var/tmp/`可写的，Magento 可能会将缓存的信息存储在**系统** `/tmp`目录中，这意味着清除 Magento 缓存的次数不会使缓存的配置消失，直到有人重新启动服务器，系统`/tmp`目录被清除，Magento 似乎自动读取它的配置。或者你被告知它并且你有权删除 Magento 缓存`/tmp`。这是在根目录下的系统临时存储文件夹中发生的一些文档（见图）

**注意：**如果您保存`local.xml`文件的备份副本，请确保将其重命名为类似的名称，`local.xml.sv1`否则您会发现 Magento 仍会读取它。

![系统 /tmp 中的 Magento 文件夹](../Images/c59e9697c7bd8ecc822480f9e89f67ef.png) ![系统 /tmp 中的 Magento 缓存](../Images/7fbd90583ebb80a0989d3ae9658a28fd.png)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-17T05:08:10.490

设法解决这个问题，这是有史以来最奇怪的事情。当我更改 local.xml 以解决问题时，我将旧文件的备份放在 local_back.xml 中。我只是删除了该文件，现在一切正常。不知道为什么 Magento 会选择那个文件。任何方式问题都已解决。

注意：有关详细信息，请参阅下面的评论，它是 .xml 文件扩展名

# javascript - JS 警报在 ColdFusion 中不起作用

> ID：11515238
> 
> 赞同：0
> 
> 时间：2012-07-17T02:25:25.917
> 
> 标签：javascript, coldfusion, coldfusion-8

我试图弄清楚为什么这个 JS 警报不起作用。警报的功能是验证之前是否选择了数据。

```
 <script type="text/javascript">
        alert("This location been chosen.\n Please choose another location.");
        history.back();
 </script> 
```

但是，当我尝试检查错误时，我正在打开 ColdFusion 调试，js 警报运行顺利。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T02:29:21.237

除非`window.alert`已重新定义，否则只要您向其传递一个字符串值（或转换为字符串），它就会起作用。

我怀疑脚本标签没有在您生成的源代码中输出，或者其他地方存在 JavaScript 错误，导致其后的所有代码无法解析。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T11:03:29.517

很可能您生成的 JavaScript 无效 - 检查浏览器中的 JavaScript 警告。

# ocaml - "let ()=" 和 "let _=" 有什么区别？

> ID：11515240
> 
> 赞同：13
> 
> 时间：2012-07-17T02:25:28.620
> 
> 标签：ocaml

```
let () = Random.self_init();;
let _ = Random.self_init ();;
│- : unit = () 
```

似乎“让（）”什么也没返回？

真挚地！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-17T07:27:00.720

`let`是用于定义新变量的关键字，如以下构造：

```
let pattern = expr 
```

例如

```
let a = 2 
```

将值赋给`2`name `a`。（请注意，这不是为已经存在的变量赋值的方法，但这是另一个主题）。

但`=`标志左侧的图案不仅仅是一个名字。例如

```
let (a,b) = (42,"foo") 
```

定义`a`和`b`, 分别为`42`和`"foo"`. 当然，双方的类型必须匹配。这里就是这种情况：双方都是 type `int * string`。

符号右侧的表达式`=`也可以详细说明，例如

```
let foo =
  let temp = String.make 10 'a' in
  temp.[2] <- 'b';
  temp 
```

定义`foo`为字符串`"aabaaaaaaa"`。（作为旁注，它还确保这`temp`是此代码片段的本地）。

现在，让我们同时使用：左边是匹配 type 值的模式`unit`，右边是 type 的表达式`unit`：

```
let () = Printf.printf "Hello world!\n" 
```

这解释了`let () =`构造。现在，关于`let _`，人们只需要知道它`_`可以在模式中用作通配符：它匹配任何类型的值并且不绑定任何名称。例如

```
let (a,_) = (42,"foo") 
```

定义`a`为`42`，并丢弃该值`"foo"`。`_`意思是“我知道这里有一些东西，我明确表示我不会使用它，所以我没有命名它”。这里`_`用于匹配 type 的值`string`，但它可以匹配任何类型的值，例如`int * string`：

```
let _ = (42,"foo") 
```

它没有定义任何变量，也不是很有用。当右手边有副作用时，这样的构造很有用，如下所示：

```
let _ = Printf.printf "Hello world!\n" 
```

这解释了问题的第二部分。

**实际用途**

两者都被使用，使用一个或另一个是一个口味问题。

`let () =`稍微安全一些，因为它让编译器检查右侧是否为`unit`. 除单位以外的任何其他类型的值通常都是错误。

`let _ =`稍微短一些（我见过这个论点）。（请注意，使用自动关闭括号的编辑器，击键次数是相同的 ;-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T03:31:34.163

我不是 OCaml 专家，尽管让我分享一些东西:)

`let`OCaml 中的可以代表两件事：

1.  分配变量的方式；
2.  您可以声明函数或将函数分配给名称的方式；

使用示例，您可以清楚地看到它是如何工作的： 分配变量：

```
# let ten = 10;;
val ten : int = 10

# let hello_world_string = "Hello World";;
val hello_world_string : string = "Hello World" 
```

声明函数：

```
# let sum a b = a+b;;
val sum : int -> int -> int = <fun>
# sum 2 3;;
- : int = 5 
```

因此，回答 let ()= 和 let _= 之间的区别的问题是：

在第一个示例中，您要声明一个没有名称、参数或指令的函数，该函数应该输出一个单元。第二个示例，您没有分配给 _，即 OCaml 的通配符，任何值。

正如我们在下面看到的，我们可以定义一个函数，该函数将立即执行，因为我们将无法再调用它：

```
# let () = print_string "Hello";;
Hello 
```

或者为 OCaml 的通配符分配一个类型和值，或者一个函数：

```
# let _ = 10;;
- : int = 10
# let _ = print_string "Maybe I answered your question :) ";;
Maybe I answered your question :) - : unit = () 
```

# php - php for循环并存储到数组中

> ID：11515242
> 
> 赞同：-1
> 
> 时间：2012-07-17T02:25:50.707
> 
> 标签：php, javascript, ajax

我正在尝试通过 ajax 请求将一些值从 javascript 传递到 php 文件，并将每个结果（来自 for 循环）存储到使用 php 的数组中。

```
queryData={"data":{"data_string":{"data":"medicine","default_field":"Content"}}}
testArgument=0;

$.ajax({
    url:"test/queryManipulate.php",
    type: 'POST',
    datatype: 'json',
    data: {field : queryData, start : testArgument},
    success:function(jsonQuery)
    {
       alert(jsonQuery);
    }
});

<?php

    $i=0;
for ($from = 0; $from <= 50; $from+=10)
{
$object=json_decode($_POST["field"]); 
$object->from=$from; 
$object=json_encode($object);
$ch = curl_init("http://localhost:9200/algotree//_search");
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, $object);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
$test= curl_exec($ch);
curl_close ($ch);
$newArray[$i]= $test;
$i++;
echo $newArray[2];
}
?> 
```

我的 for 循环不起作用。我是否以正确的方式使用它，以及如何将每个结果存储到 php 中的数组中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T05:58:44.810

在 javascript 中，在转换为 json 字符串之前，我们必须使用数组和对象来格式化数据，例如，

```
data_string  = new Object();
data = new Array();

data_string[data] = "medicine";
data_string[default_field] = "Content";

data.push(data_string); 
```

然后将数据编码为 json ，结果会像

```
{"data":{"data_string":{"data":"medicine","default_field":"Content"}}} 
```

然后通过ajax传递给php文件，然后使用解码json

`json_encode(data);`在php中

然后做进一步的处理..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T04:25:51.583

第一个循环应该是

```
 <?php
        for($from = $_POST["start"]; $from<50;$from+=10)
        {
             // other code
        } 
```

注意 $from += 10 不是 $from+10。

# android - Android - 从 JavaScriptInterface 中的主类调用方法

> ID：11515250
> 
> 赞同：3
> 
> 时间：2012-07-17T02:27:03.053
> 
> 标签：android

我对android开发比较陌生，我正在尝试制作一个允许我启动android相机应用程序的WebView。如何使用我的 JavaScriptInterface 调用主类中的方法？

谢谢。

```
public class MainActivity extends Activity {

    public static final int MEDIA_TYPE_IMAGE = 1888;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        WebView mainWebView = (WebView) findViewById(R.id.mainWebView);
        mainWebView.addJavascriptInterface(new JavaScriptInterface(this), "Android");
        WebSettings webSettings = mainWebView.getSettings();
        webSettings.setJavaScriptEnabled(true);

        mainWebView.setWebViewClient(new MyCustomWebViewClient());
        //mainWebView.setScrollBarStyle(View.SCROLLBARS_INSIDE_OVERLAY);

        mainWebView.loadUrl("file:///mnt/sdcard/page.html");
    }

    private class MyCustomWebViewClient extends WebViewClient {
        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
            view.loadUrl(url);
            return true;
        }
    }

    public void takePicture() {
        Intent intent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
        startActivityForResult(intent, MEDIA_TYPE_IMAGE);
    }

    protected void onActivityResult(int requestCode, int resultCode, Intent data) {  
        if (requestCode == MEDIA_TYPE_IMAGE) {  
            Bitmap photo = (Bitmap) data.getExtras().get("data"); 

            ByteArrayOutputStream stream = new ByteArrayOutputStream();
            photo.compress(Bitmap.CompressFormat.PNG, 100, stream);
            byte[] byteArray = stream.toByteArray();
            }}

    }

package com.cargowise.view;

import android.content.Context;
import android.os.Handler;
import android.widget.Toast;

public class JavaScriptInterface {

    Context mContext;

    /** Instantiate the interface and set the context */
    JavaScriptInterface(Context c) {
        mContext = c;
    }

    public void takePic() {
        MainActivity.takePicture();
    }

    public void showToast(String toast) {
        Toast.makeText(mContext, toast, Toast.LENGTH_SHORT).show();
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T02:30:50.050

您已经存储了应该能够用来访问您的`MainActivity`.

改变这个：

```
public void takePic() {
    MainActivity.takePicture();
} 
```

对此：

```
public void takePic() {
    ((MainActivity)mContext).takePicture();
} 
```

注意：您可能想要添加一些类型检查或限制提供给 a 的上下文类型`MainActivity`以强制执行正确的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-25T12:49:46.447

调用 ((MainActivity)mContext).takePicture() 的建议（可能）是错误的，至少对我来说它失败了。原因是调用*不会*在主/UI 线程上，而是在另一个线程上。

此外，您必须将 @JavascriptInterface 注释放在每个接口方法之前。

调用主 UI 线程的正确方法是：

```
...inside JavaScriptInterface class

public void takePic() {
    ((MainActivity)mContext).post(new Runnable() {
        @Override
        public void run() {
            ((MainActivity)mContext).takePicture();
        }
    });
} 
```

在 Kotlin 中，它看起来要简单得多：

```
@JavascriptInterface
fun takePic() {
    (mContext as MainActivity).mainWebView?.post {
        (mContext as MainActivity).takePicture()
    }
} 
```

WebView 与 Android 后端集成的完整示例，在 JS 和 Android 之间来回调用 bak，在这里：[https ://github.com/latitov/Android_WebViewApp_FullScreen](https://github.com/latitov/Android_WebViewApp_FullScreen)

# javascript - 使用 Jquery 操作表单的复选框

> ID：11515253
> 
> 赞同：0
> 
> 时间：2012-07-17T02:27:17.867
> 
> 标签：javascript, jquery, checkbox

我正在尝试做一个对我来说很奇怪的表格。

基本概念是我的表单中有一列产品复选框，如果您选择该产品，则需要检查相关产品复选框。

在表格中，我还有另外两列是产品的价格和尺寸。我想计算价格和尺寸的数量取决于打勾的产品。到目前为止，我只获得了正在检查的产品的价值，而不是价格和尺寸的价值。另外，如何动态进行计算。

这是html，[http://jsfiddle.net/DDEzm/2/](http://jsfiddle.net/DDEzm/2/)

希望有人能帮忙，非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T02:38:50.887

要获得该值，您需要做的事情如下：

```
$(function(){
    $("[name='chkProduct']").live('change',function(){
        var totalCost = 0;
        $("[name='chkProduct']").each(function(i){
            if($(this).attr("checked")) {
                var price = $(this).parent().next().find("[name='price']").val();
                var size= $(this).parent().next().next().find("[name='size']").val();
                totalCost = totalCost + (price * size);
                $("#presult").val(totalCost);
            }
        });
    });
});​ 
```

但是您可能需要添加检查以确保您尝试添加的是数字，方法是限制输入，或者在单击复选框时进行检查。例如，您可以使用 javascripts `parseInt`。

此外，您可以有一个名称或类来识别复选框。这样您就不必为每个复选框编写更改函数。

**编辑**

我对其进行了修改，以便它可以与所有复选框一起使用并计算总数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T02:42:44.180

试试这个，这个解决方案是基于你的标记：

```
$(function(){
    $('#cb1').live('change',function(){
        if ($(this).is(':checked')) {
           var val = 0;
           val = parseInt($('#tb1').val(), 10) + parseInt($('#tb2').val(), 10)
           $('#presult').val(val)             
        } else {
           $('#presult').val('0')              
        }
    });
}); 
```

[演示](http://jsfiddle.net/DDEzm/5/)

# javascript - 表格 HTML 溢出

> ID：11515257
> 
> 赞同：0
> 
> 时间：2012-07-17T02:28:25.090
> 
> 标签：javascript, html, css, html-table

我正在努力为我的网站制作一个更好看的会员列表。[http://www.pimpkings.com/memberlist](http://www.pimpkings.com/memberlist)

```
<table width="100%" rules="cols" border="1" cellspacing="2" cellpadding="1">
<colgroup span="5" </colgroup>
  <tr>
<td class="{memberrow.ROW_CLASS}" td align="center" width="200" valign="top" border="0" cellpadding="0">
<span class="gen"><a class="gen" href="{memberrow.U_VIEWPROFILE}">{memberrow.USERNAME}</a></span>
      <div class="avatar mini"><a href="{memberrow.U_VIEWPROFILE}">{memberrow.AVATAR_IMG}</a></div>
  <align="center" border="0" cellspacing="0" width="200">
    <center><font face="verdana" decoration="yes" size="2" color="white">Information</font></center>
    <br /><font face="verdana" size="1" color="green">Interest:</font>&nbsp;&nbsp;<br />
<span class="gen">{memberrow.INTERESTS}</span>
    <br /><font face="verdana" size="1" color="green">Join Date:</font> &nbsp;&nbsp; <br />
<span class="gensmall">{memberrow.JOINED}</span>
    <br /><font face="verdana" size="1" color="green">Last Visited:</font> &nbsp;&nbsp;  <br />
<span class="gensmall">{memberrow.LASTVISIT}</span>
    <br /><font face="verdana" size="1" color="green">Post Count:</font>&nbsp;&nbsp;  <br />
<span class="gen">{memberrow.POSTS}</span>
<align="right" border="0" cellspacing="2" width="200">
  <center> <br /><font face="verdana" size="2" color="green">Contact</font><br /></center>
&nbsp;{memberrow.PM_IMG}&nbsp;
&nbsp;{memberrow.WWW_IMG}&nbsp;
    </tr>
    </td>
    </body> 
```

问题是当我添加另一个

```
 <td> 
```

它使它复制了我所要求的信息。实际上，我会按照我所说的方式编写代码，因此当您访问该站点时，您会看到我在说什么。我只是不希望它重复任何成员信息。所以基本上

1.  会员 2\. 会员
2.  会员 4\. 会员
3.  会员 6\. 会员

是我的意思

不是

1.会员 1.会员 2.会员 2.会员

...

有没有办法做到这一点？我正在使用一个论坛网站，我可以访问 CSS 样式表以及此代码的位置。也许是 Javascript 代码？？？请尽快帮助我正在做的代码是一个开放的网站，但需要一个即将开放的正在付费的网站。请和谢谢大家。

还有任何方法可以为成员背景表重复背景图像？

我想制作 3 列，它们调用代码中列出的变量而不重复。

再次感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T09:48:18.050

**HTML**

```
<div class="tableHold">
  <div> 1  </div>
  <div> 2  </div>
  <div> 3  </div>
  <div> 4  </div>
  <div> 5  </div>
  <div> 6  </div>
</div> 
```

**CSS**

```
.tableHold {
  overflow: auto;
}

.tableHold div {
  float: left;
  width: 100px;
  border: 1px solid black;
} 
```

[在http://codebins.com/bin/4ldqpak](http://codebins.com/bin/4ldqpak)上试试这个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T02:33:38.980

你不应该使用表格。欢迎来到 CSS 浮动的世界。这是一个闪亮的新示例：

**HTML**

```
<ul class="tableHold">
    <li>1</li>
    <li>2</li>
    <li>3</li>
    <li>4</li>
    <li>5</li>
    <li>6</li>
</ul> 
```

**CSS**

```
.tableHold {
    overflow: auto;
}

.tableHold li {
    float: left;
    width: 100px;
    border: 1px solid black;
} 
```

[这里有一些关于事情如何运作的更多信息。](http://www.alistapart.com/articles/css-floats-101/) [这是一个可以玩的小提琴。](http://jsfiddle.net/j9SRu/)

# java - 注入方法宁静服务

> ID：11515265
> 
> 赞同：0
> 
> 时间：2012-07-17T02:29:28.397
> 
> 标签：java, rest, inject

我有一堆带有`@GET`和`@PUT`方法的 RESTful Web 服务（80）。我想为`@OPTIONS`每个服务添加一个方法。`@OPTIONS`我希望能够将它们注入服务中，而不是为每个服务手动编写方法。做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T03:08:26.163

我不知道您的环境，但我认为我使用的技术中最好的方法是在配置文件中指定“自动扫描”属性，该属性的声明因技术而异，但这个想法保持不变：所有组件都在部署开始时被扫描对不起我的英语:)但我希望这个回复能帮助你

# ms-access - 在子窗体中搜索数据并让它在主窗体中返回正确的公司记录

> ID：11515266
> 
> 赞同：0
> 
> 时间：2012-07-17T02:29:33.893
> 
> 标签：ms-access

新手警告！我制作了一个简单的数据库来管理国际业务联系。本来是自用的，现在老板突然要明天给公司董事会看！一个表“公司”包含公司的能力等。另一个表“联系人”包含我们在公司的联系人及其地址和联系信息。表之间的关系是一对多的。主表单使用公司表中的字段，并有一个用于输入联系信息的子表单。大多数时候，我知道将使用主表单中的公司数据来搜索表单。但是，我知道比我更新手的人最终会想要在子表单中搜索联系人的姓名，并让它在主表单中返回正确的公司记录。我该怎么做呢？按表单过滤似乎仅适用于主表单。我在论坛中找不到任何有用的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T09:23:36.007

首先，创建一个表单查找联系人，这可以是您表单中的一个弹出窗口。搜索子表单没有意义，因为您不会以这种方式找到所有联系人。找到联系人后，获取公司 ID 并在主窗体中找到公司。

您可以使用联系人列表框并在选择联系人时或通过弹出窗口上的按钮在主窗体上找到公司，这将允许您的用户查看联系人选择而无需关闭形式。

# algorithm - 树排序而不造树

> ID：11515269
> 
> 赞同：1
> 
> 时间：2012-07-17T02:30:08.777
> 
> 标签：algorithm, sorting, tree

我需要写一些东西来获取如下所示的数据：

```
B
    b
    c
    a
A
    b
    a
D
    a
        b
        a   
C 
```

并像这样排序：

```
A
    a
    b
B
    a
    b
    c
C
D
    a
        a
        b 
```

数据看起来与我在上面的呈现方式完全相同（字母除外）。它是一个多行字符串，其中选项卡的数量决定了树中的层次结构级别。

我希望能够自行对每个层次结构进行排序。

我一直无法想出一个像样的算法，所以我在这里问。

我在 PHP 中这样做，但是任何伪代码方法将不胜感激。

另外，我意识到我可以先构建一棵树，然后对该树进行排序和输出，但我正在尝试找到一个更优雅的解决方案。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T02:30:08.777

我实际上在提问的过程中解决了这个问题，所以我会回答我自己的问题，这可能对这里的其他人有帮助。可能还有其他很好的答案......

```
class TreeLineSorter {
    function sort($tree_lines) {
        $sorted_line_groups = $this->group_and_sort_lines($tree_lines);

        return $this->get_sorted_lines($sorted_line_groups);
    }

    private function cmp_line_groups($a, $b) {
        return strcasecmp($a[0], $b[0]); 
    }

    private function get_line_level($line) {
        return strspn($line, "\t");
    }

    private function get_line_groups($lines) {
        $curr_level = $this->get_line_level($lines[0]);
        $line_groups = array();
        $idx = -1;

        foreach($lines as $line) {
            $level = $this->get_line_level($line);

            if ($level == $curr_level) {
                $idx++;
            }

            $line_groups[$idx][] = $line;
        }

        return $line_groups;
    }

    private function group_and_sort_lines($lines) {
        $line_groups = $this->get_line_groups($lines);

        usort($line_groups, array($this,'cmp_line_groups'));

        foreach($line_groups as $key=>$group) {
            if (sizeof($group) > 1) {
                $new_group = array(array_shift($group));
                $new_group = array_merge($new_group, $this->group_and_sort_lines($group));

                $line_groups[$key] = $new_group;
            }
        }

        return $line_groups;
    }

    private function get_sorted_lines($sorted_line_groups) {
        $lines = array();

        foreach($sorted_line_groups as $group) {
            if (is_array($group)) {
                if (sizeof($group) > 1) {
                    $lines = array_merge($lines, $this->get_sorted_lines($group));
                }
                else {
                    $lines[] = $group[0];
                }
            }
            else {
                $lines[] = $group;
            }
        }

        return $lines;
    }
} 
```

这是示例用法：

```
 $sample_text = <<<QES
B
\tb
\tc
\ta
A
\tb
\ta
D
\ta
\t\tb
\t\ta   
C
QES;

    $tree_lines = explode("\n",$sample_text);

    $tree_line_sorter = new TreeLineSorter();

    $sorted_tree_lines = $tree_line_sorter->sort($tree_lines);

    print_r($tree_lines);
    print_r($sorted_tree_lines); 
```

# html - 使用多个搜索选项“标记”搜索字段的最佳方式

> ID：11515271
> 
> 赞同：0
> 
> 时间：2012-07-17T02:30:21.080
> 
> 标签：html, forms

我有一个搜索表格，有点困惑。我有 4 个可供人们选择的选项，它们位于 SearchQueryTextBox 的正上方，我不知道该怎么做...

它们应该是 a `label`、 a`legend`还是 an `a`？

我不认为他们应该是一个`legend`.

我在想我应该把它们都变成`label`s，因为它在语义上最有意义。

这就是我所说的：

![在此处输入图像描述](../Images/3e594c26ef63a53e3f08927b73028398.png)

[编辑]：文本框上方的每个“选项”都是可点击的。例如，如果用户单击附件，则文本框将获得焦点并允许他们搜索附件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T02:35:03.543

如果它们是可点击的，它们应该是`button`'s 或`a`'s

您是在最语义化的标记之后，还是希望这对禁用 javascript 等有意义？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T02:37:16.023

我想说，既然它们是选项，你应该使用`<select>`and `<option>`。这也允许优雅降级；没有javascript，它就变成了一种形式。

# python - 金字塔项目：尝试维护时出现“ValueError：变量分配...”

> ID：11515273
> 
> 赞同：2
> 
> 时间：2012-07-17T02:30:28.803
> 
> 标签：python, pyramid

尝试运行 Pyramid 项目时出现以下错误。据我所知，这在一夜之间出现了，我不知道如何开始调试它：

```
C:\mas\mas>..\Scripts\pserve.exe serve development.ini --reload
Starting subprocess with file monitor
Traceback (most recent call last):
  File "C:\mas\Scripts\pserve-script.py", line 8, in <module>
    load_entry_point('pyramid==1.3.2', 'console_scripts', 'pserve')()
  File "C:\mas\lib\site-packages\pyramid-1.3.2-py2.7.egg\pyramid\scripts\pserve.
py", line 47, in main
    return command.run()
  File "C:\mas\lib\site-packages\pyramid-1.3.2-py2.7.egg\pyramid\scripts\pserve.
py", line 221, in run
    vars = self.parse_vars(restvars)
  File "C:\mas\lib\site-packages\pyramid-1.3.2-py2.7.egg\pyramid\scripts\pserve.
py", line 330, in parse_vars
    % arg)
ValueError: Variable assignment 'development.ini' invalid (no "=") 
```

有什么问题，或者我应该如何确定它？抱歉，我的问题相当含糊，但如果我对我所问的问题有更多了解，我可能已经在 Google 上找到了答案：)。

**第 328 - 330 行：**

```
 raise ValueError(
            'Variable assignment %r invalid (no "=")'
            % arg) 
```

**开发.ini**

```
[app:main]
use = egg:mas

pyramid.reload_templates = true
pyramid.debug_authorization = false
pyramid.debug_notfound = false
pyramid.debug_routematch = false
pyramid.default_locale_name = en
pyramid.includes = pyramid_debugtoolbar
    pyramid_tm
    pyramid_beaker

sqlalchemy.url = sqlite:///%(here)s/mas.db

# Cache settings
cache.regions = default_term, second, short_term, long_term
cache.type = memory
cache.second.expire = 1
cache.short_term.expire = 60
cache.default_term.expire = 300
cache.long_term.expire = 3600

# Beaker sessions
#session.type = file
#session.data_dir = %(here)s/data/sessions/data
#session.lock_dir = %(here)s/data/sessions/lock
session.type = memory
session.key = akhet_demo
session.secret = 0cb243f53ad865a0f70099c0414ffe9cfcfe03ac

[server:main]
use = egg:waitress#main
host = 0.0.0.0
port = 6543

# Begin logging configuration

[loggers]
keys = root, mas, sqlalchemy

[handlers]
keys = console

[formatters]
keys = generic

[logger_root]
level = INFO
handlers = console

[logger_mas]
level = DEBUG
handlers =
qualname = mas

[logger_sqlalchemy]
level = INFO
handlers =
qualname = sqlalchemy.engine
# "level = INFO" logs SQL queries.
# "level = DEBUG" logs SQL queries and results.
# "level = WARN" logs neither.  (Recommended for production systems.)

[handler_console]
class = StreamHandler
args = (sys.stderr,)
level = NOTSET
formatter = generic

[formatter_generic]
format = %(asctime)s %(levelname)-5.5s [%(name)s][%(threadName)s] %(message)s

# End logging configuration 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T02:59:04.367

Ich，我已经解决了，我在错误的地方寻找问题。问题是这个命令：

```
..\Scripts\pserve.exe serve development.ini --reload 
```

应该是这个命令：

```
..\Scripts\pserve.exe development.ini --reload 
```

我不知道我的批处理文件是如何或何时更改的，但是如果有人遇到类似的问题，希望这会有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T02:41:55.787

看来您的参数顺序是倒序的 - 它应该是：

```
..\Scripts\pserve.exe development.ini --reload 
```

# opencv - 矩阵和矩阵有什么区别 和 Emgu 简历中的 McvMat？

> ID：11515274
> 
> 赞同：2
> 
> 时间：2012-07-17T02:30:41.667
> 
> 标签：opencv, emgucv

Emgu cv中的Matrix和McvMat有什么区别？如何创建 McvMat？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T09:34:02.437

A是OpenCV`Matrix`的包装器，是它的结构格式。提供更多功能`cvMat``MCvMat``Matrix``MCvMat`

```
Matrix<int> r = new Matrix<int>(2, 3);
MCvMat m = r.MCvMat; 
```

详情 > [Emgu.CV.Matrix](http://www.emgu.com/wiki/files/2.0.0.0/html/ec1c8c3f-a99c-a082-e794-bb74db961c60.htm)

# mysql - mySQL 复合主键与一部分键自动增量

> ID：11515276
> 
> 赞同：1
> 
> 时间：2012-07-17T02:30:49.527
> 
> 标签：mysql, sql, database, sqlite

我们正在寻找一个带有“复合主键”（共 2 个字段）的表，其中一个字段需要自动递增。

```
CREATE TABLE test_table(
  field1 INTEGER,
  field2 INTEGER AUTOINCREMENT,
  field3 INTEGER,
  PRIMARY KEY (field1, field2)
) 
```

我们使用上面的代码，但它会引发一些错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T02:44:49.043

自增列必须是您在定义中指定的*第一*列。`PRIMARY KEY`此外，您需要`_`在“AUTOINCREMENT”中使用下划线 ( )：

```
CREATE TABLE test_table(
  field1 INTEGER,
  field2 INTEGER AUTO_INCREMENT,
  field3 INTEGER,
  PRIMARY KEY (field2, field1)
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T02:45:41.523

你拼错了 auto_increment ;)

# .net - 不做循环..从 mssql 数据库添加时间跨度

> ID：11515277
> 
> 赞同：0
> 
> 时间：2012-07-17T02:30:51.960
> 
> 标签：.net, vb.net, sql-server-2008

我需要此代码的帮助..它已成功添加，但它不会从每个数据库记录中循环..我的数据库中有 3 条记录，但他只检测到 1 条，我使用循环..它不会循环并添加到它..对修改此代码有任何帮助吗？

我有来自字段名的 3 条记录：dtr_grantotal：

1.  = 10:41:00
2.  = 01:11:00
3.  = 03:30:10

    ```
    sqlSTR = "select * from tblTImelog where dtr_datelog Between '" & DateTimePicker1.Text & "' AND '" & DateTimePicker2.Text & "'"
    ExecuteSQLQuery(sqlSTR)

    _totalDays = sqlDT.Rows.Count

    If sqlDT.Rows.Count > 0 Then
        Dim T1 As String = "00:00:00"
        Dim myRow As DataRow = sqlDT.Rows(sqlDT.Rows.Count - 1)
        Dim span1 As TimeSpan = TimeSpan.Parse(T1)

        For i = 0 To sqlDT.Rows.Count - 1
            Dim span2 As TimeSpan = TimeSpan.Parse(sqlDT.Rows(i)("dtr_grandtotal"))
            t1 = span1.Add(span2).ToString
        Next 

        MsgBox(t1)
    End If 
    ```

    他只从我的 msgbox 中显示第一个.. 虽然我在我的 for 循环中添加了它..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T02:41:27.933

你`t1`每次都在覆盖你的。改为这样做：

```
For i = 0 To sqlDT.Rows.Count - 1
    Dim span2 As TimeSpan = TimeSpan.Parse(sqlDT.Rows(i)("dtr_grandtotal"))
    span1 = span1.Add(span2)
Next 

t1 = span1.ToString
MsgBox(t1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T02:46:12.083

用这个替换你的 For 循环：

```
 For i = 0 To sqlDT.Rows.Count - 1
            Dim span2 As TimeSpan = TimeSpan.Parse(sqlDt.Rows(i)("dtr_grandtotal").ToString)
            span1 = span1.Add(span2)
        Next

        MsgBox(span1.ToString) 
```

# php - 明显的 PHP 语法错误

> ID：11515280
> 
> 赞同：0
> 
> 时间：2012-07-17T02:31:45.807
> 
> 标签：php, wordpress, syntax-error, qr-code

基本上，我一直在尝试制作一个简单的 Wordpress 小部件，它显示带有当前页面 URL 的 QR 码。我正在使用解析 PHP 的简单文本小部件的修改版本。

```
function the_qrcode($permalink = '', $title = '') {
    if($permalink && $title == '') {
        $permalink = 'http://eternityofgamers.com/forums';
        $title = 'Forums';
    }

    echo '<img src="http://api.qrserver.com/v1/create-qr-code/?data=' .$permalink. '" alt="QR: ' .$title. '"/>;
} 
```

有人可以告诉我这有什么问题吗？当我将它添加到`functions.php`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T02:34:28.837

查看 StackOverflow 的语法高亮。`'`在函数最后一行的末尾，您的字符串上缺少一个单引号：

```
echo '<img ...' .$title. '"/>;
                             ^ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T02:36:25.763

关闭 echo 行上的最后一个单引号为：

```
echo '<img src="http://api.qrserver.com/v1/create-qr-code/?data=' .$permalink. '" alt="QR: ' .$title. '"/>'; 
```

# c - C：变量具有初始化程序但类型不完整

> ID：11515287
> 
> 赞同：10
> 
> 时间：2012-07-17T02:33:02.617
> 
> 标签：c, struct

试图让我的头脑了解旧的 C 语言。目前在结构上并收到此错误：

```
"variable 'item1' has initializer but incomplete type" 
```

这是我的代码：

```
typedef struct
{
    int id;
    char name[20];
    float rate;
    int quantity;
} item;

void structsTest(void);

int main()
{
    structsTest();

    system("PAUSE");
    return 0;
}

void structsTest(void)
{
    struct item item1 = { 1, "Item 1", 345.99, 3 };
    struct item item2 = { 2, "Item 2", 35.99, 12 };
    struct item item3 = { 3, "Item 3", 5.99, 7 };

    float total = (item1.quantity * item1.rate) + (item2.quantity * item2.rate) + (item3.quantity * item3.rate);
    printf("%f", total);
} 
```

我猜可能结构定义在错误的位置，所以我将它移到文件的顶部并重新编译，但我仍然得到同样的错误。我的错在哪里？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-17T02:35:56.527

摆脱`struct`之前`item`，你已经 typedef 了它。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-17T02:36:07.660

`typedef struct { ... } item`创建一个未命名的`struct`类型，然后`typedef`将其传递给 name `item`。所以没有`struct item`- 只是`item`和一个未命名的`struct`类型。

要么使用`struct item { ... }`，要么将所有`struct item item1 = { ... }`s 更改为`item item1 = { ... }`. 你做哪一个取决于你的喜好。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-17T02:43:50.163

问题是

```
typedef struct { /* ... */ } item; 
```

不声明类型名称`struct item`，仅`item`。如果您希望能够同时使用这两个名称，请使用

```
typedef struct item { /* ... */ } item; 
```

# python - 在熊猫中捕捉时间

> ID：11515290
> 
> 赞同：4
> 
> 时间：2012-07-17T02:35:00.000
> 
> 标签：python, pandas, time-series

使用*熊猫 0.8.0*，

```
import pandas
import pandas.tseries.offsets
h = pandas.tseries.offsets.Hour()
times = pandas.date_range(start='2010-1-1 1:00:05', periods=3, freq='3H')
times 
```

> [2010-01-01 01:00:05, ..., 2010-01-01 07:00:05] 长度：3，频率：3H，时区：无

```
times.snap(h) 
```

> [2010-01-01 01:00:05, ..., 2010-01-01 07:00:05] 长度：3，频率：H，时区：无

这是因为：

```
h.onOffset(times[0]) 
```

> 真的

我猜这个功能是相当新的，它似乎没有太多的文档记录。

> 前滚和回滚方法完全符合您的预期：

我更大的目标是使用 2 个频率（例如 4 小时和 1 天）并根据第一个频率模第二个（例如 7:05:33 -> 1、19:59:59 -> 4、 21:44:00 -> 5)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-09T03:02:41.333

我需要类似的东西，这是我捕捉 30 秒数据的实现：

```
import pandas as pd
from pandas.tseries.offsets import Tick
from pandas.tslib import Timedelta

class HalfMinute(Tick):
    _inc = Timedelta(seconds=30)

    def _snap_delta(self, dt):
        d = Timedelta(seconds=dt.second, microseconds=dt.microsecond)
        if d >= self._inc:
            d -= self._inc
        return d

    def onOffset(self, dt):
        return not self._snap_delta(dt)

    def rollforward(self, dt):
        return dt + (self._inc - self._snap_delta(dt))

    def rollback(self, dt):
        return dt - self._snap_delta(dt)

def test_snap():
    from random import random
    from datetime import timedelta
    # 1 hour of test data
    grid_index = pd.date_range('2015-09-09 00:00:00', '2015-09-09 01:00:00', freq='30S')

    # add uniform noise of maximum +-5 seconds
    mess_index = pd.Index(dt + timedelta(seconds=(random() - 0.5) * 10)
                          for dt in grid_index)

    snapped_index = mess_index.snap(HalfMinute())

    assert snapped_index.equals(grid_index) 
```

在您的情况下，您可以执行类似的操作来制作 Offset 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T16:58:35.510

Hour DateOffset 是“每小时”而不是“每小时每小时”。您可以尝试继承 Hour 来覆盖 onOffset。您还可以签出 TimeSeries.between_time 方法。

# branch - CVS 分支能否覆盖现有的具有相同名称的较小分支？

> ID：11515295
> 
> 赞同：0
> 
> 时间：2012-07-17T02:35:39.547
> 
> 标签：branch, cvs

假设您有一个提交到 CVS 的目录结构：

目录A/目录B/目录

dirB 已使用分支名称“development”进行了分支。

是否可以从 dirB 中删除“开发”分支，然后在 dirA 上创建一个新的“开发”分支？

我们目前在一个遗留的 CVS 存储库中有这个，其中一小部分存储库有一个“开发”分支。我们想删除这个分支并在整个存储库中创建一个全局“开发”分支。现有分支的历史和状态是微不足道的，可以被处理掉。

那么，如果我们执行“cvs -dB development dirB”，然后在 dirA 上重新创建分支，是否会出现问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T03:02:47.857

你有两个问题：

'是否可以从 dirB 中删除“开发”分支，然后在 dirA 上创建一个新的“开发”分支？

对此的回答是“是”，但根据提交到 CVS 中的目录结构 dirA/dirB/dirC 的含义，它的含义会有所不同。

如果您有一个存储库，并且目录结构都包含在一个以 dirA 为根的 cvsroot 下，那么从 dirB 中删除“开发”分支将意味着从 cvsroot 下的所有内容中删除“开发”分支。那时，在 dirA 上创建一个新的“开发”分支将导致整个层次结构中的所有文件按照您的需要进行分支。

相反，如果您的意思是您有一个本地目录结构 dirA/dirB/dirC，并且您已将 dirA 提交给托管在一个 CVSROOT 的 CVS，并将 dirB 提交给托管在另一个 cvsroot 的 CVS，那么您对 ​​dirA 和 dirB 所做的操作将是独立的在某种程度上，您阻止 dirB 被提交给 dirA 的 cvsroot。如果您以这种方式进行设置，则最好维护您所说的存档，从 dirB 的所有深度的所有文件夹中删除所有 CVS 子文件夹，然后将其提交给 dirA，使其成为同一个 cvsroot 的一部分，然后根据需要添加“开发”作为分支。

你的第二个问题：'如果我们做一个“cvs -dB development dirB”，然后在 dirA 上重新创建分支，会有什么问题吗？

对此的回答基本上是“不”，除了您将无法再通过检查分支“开发”来访问事物；你仍然可以通过个人提交来获得它们，正如你所说，历史和状态是微不足道的。如果您以第一种方式进行设置，它将按照您的建议进行，快速删除然后在适当的级别重新创建。如果你有第二种方式设置，删除是不必要的，但是清理 CVS 子目录，然后在 dirA 下提交 dirB 将所有内容放在一个 cvsroot 下是必不可少的，此时，添加“开发”不会破坏任何内容“ 分支。

# android - 在 ListView (Android) 上重现 MediaPlayer

> ID：11515296
> 
> 赞同：0
> 
> 时间：2012-07-17T02:35:49.087
> 
> 标签：android, listview, scroll, media-player

我从 android 开始，我用 ListView 制作了一个应用程序。ListView 的每个元素都有一个不同的 Mediaplayer，当您按下按钮时会播放。

它在模拟器中可以正常工作，但是当我在我的手机（Acer E140）上尝试它时，它只能再现最初可见的元素的声音。当我向下滚动并尝试重现任何其他内容时，应用程序崩溃了。正如我所说，它在模拟器上正常工作。

有任何想法吗？

非常感谢你！

这是代码的相关部分：

```
public class SoundsActivity extends Activity {

Dialog dialog;
final int DIALOGO_ALERTA=1;
final int DIALOGO_SALIR=2;
final int DIALOGO_NEW=3;
final int DIALOGO=4;
private static final int MNU_OPC1 = 1;
private static final int MNU_OPC2 = 2;
Elem[] datos = new Elem[50];

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    this.setVolumeControlStream(AudioManager.STREAM_MUSIC);
    setContentView(R.layout.main);
    datos[0]=new Elem ("1.","Rin", MediaPlayer.create(SoundsActivity.this, R.raw.rin));
    datos[1]=new Elem ("2.","Shirou", MediaPlayer.create(SoundsActivity.this, R.raw.shirou));
    datos[2]=new Elem ("3.","Assasin", MediaPlayer.create(SoundsActivity.this, R.raw.assasin));
    datos[3]=new Elem ("4.","Avenger", MediaPlayer.create(SoundsActivity.this, R.raw.avenger));
    datos[4]=new Elem ("5.","Rider", MediaPlayer.create(SoundsActivity.this, R.raw.rider));
    datos[5]=new Elem ("6.","Berseker", MediaPlayer.create(SoundsActivity.this, R.raw.berseker));
    datos[6]=new Elem ("7.","Caster", MediaPlayer.create(SoundsActivity.this, R.raw.caster));
    datos[7]=new Elem ("8.","Lancer", MediaPlayer.create(SoundsActivity.this, R.raw.lancer));
    datos[8]=new Elem ("9.","Archer", MediaPlayer.create(SoundsActivity.this, R.raw.archer));
    datos[9]=new Elem ("10.","Saber", MediaPlayer.create(SoundsActivity.this, R.raw.saber));

    SharedPreferences settingss = getSharedPreferences("perfil", MODE_PRIVATE);
    String empty = "";
    for(int i=0; i<datos.length; i++){
        empty= empty+ "F";
    }
    String info = settingss.getString("save", empty);
    salvada(info);
    class Adaptador extends ArrayAdapter {
        private MediaPlayer mp=null;
        Activity context;

            Adaptador(Activity context) {
                super(context, R.layout.listitem_titular, datos);
                this.context = context;

            }

            public View getView(final int position, View convertView, final ViewGroup parent) {
            LayoutInflater inflater = context.getLayoutInflater();
            View item = inflater.inflate(R.layout.listitem_titular, null);

            final TextView lblTitulo = (TextView)item.findViewById(R.id.Nombre);
            final String nom= datos[position].getNombre();
            lblTitulo.setText(nom);
            TextView numer = (TextView)item.findViewById(R.id.Number);
            final String num= datos[position].getNum();
            //numer.setText(num);
            String g= "" +position;
            numer.setText(g);
            final ImageView img = (ImageView)item.findViewById(R.id.tick);
            final Button btnn = (Button)item.findViewById(R.id.Check);
            final ToggleButton bss = (ToggleButton)item.findViewById(R.id.Play);
            if(datos[position].getGuessed()==true){
                lblTitulo.setVisibility(View.VISIBLE);
                btnn.setVisibility(View.INVISIBLE);
                img.setVisibility(View.VISIBLE);
                notifyDataSetChanged();
            } 

            bss.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View v) {
                    if(mp!= null && mp.isPlaying()){
                        mp.pause();
                        mp.seekTo(0);
                    }
                        mp=datos[position].mp;
                        mp.start();

                }
            });

            btnn.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View v) {
        Bundle b = new Bundle(); 
                    b.putString("Numero", num);
                    b.putString("Nombre", nom);
                    b.putInt("Posicion", position);
        showDialog(DIALOGO_ALERTA, b);
                }

            });

            return(item);
        }

    }

        Adaptador adaptador = new Adaptador(this);

        ListView lstOpciones = (ListView)findViewById(R.id.LstOpciones);

        lstOpciones.setAdapter(adaptador);      
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T13:32:06.703

`MediaPlayer`在任何给定程序中使用多个对象通常是一个坏主意。对于播放多个声音片段，`SoundPool`是公认的解决方案。

[http://developer.android.com/reference/android/media/SoundPool.html](http://developer.android.com/reference/android/media/SoundPool.html)

`MediaPlayer`太重了，无法创建那么多实例。`MediaPlayer`否则，我建议使用一个在选择项目时更改其源的单一来重新设计您的类`ListView`。

# javascript - jQuery：分离没有字符串选择器

> ID：11515297
> 
> 赞同：0
> 
> 时间：2012-07-17T02:35:51.077
> 
> 标签：javascript, jquery, dom, appendto, detach

我正在尝试分离一个 DOM 元素以将其附加到另一个 DOM 元素。但是 jQuery 拒绝做任何事情，默默地。

问题是，我不能使用字符串选择器，因为我不知道如何选择这个元素。当我第一次将一些 html 代码附加到初始父级时（通过“appendTo”.

```
this.element = $(my_html_string).appendTo(some_dom_parent); 
```

这很好用。未按预期工作的代码如下：

```
this.transferTo = function(dom_parent)
{
    $(this.element).detach()
    $(this.element).appendTo(dom_parent);
} 
```

会发生什么：

*   该元素不会从任何位置移除。
*   元素被附加到新的父元素。
*   以前在两个元素上都会触发绑定点击事件。
*   该单击事件将弹出对话框附加到元素。它总是被附加到新父元素中的元素，无论我点击哪一个。

我尝试了一些硬编码的分离，例如：

```
$('#very_specific_id').detach() 
```

...它的工作原理。但问题是，我没有放置 ID，这听起来是一种非常糟糕的方法。

所以问题似乎取决于我正在保存一个 jQuery DOM 元素并尝试从中使用 .detach ，而不是像其他人一样使用 $(".query") 。

想法？解决方法？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T02:48:47.503

尝试改变这个：

```
this.transferTo = function(dom_parent)
{
    $(this.element).detach()
    $(this.element).appendTo(dom_parent);
} 
```

对此：

```
this.transferTo = function(dom_parent)
{
    var $thisElement = $(this.element);
    $thisElement.detach()
    $thisElement.appendTo(dom_parent);
} 
```

# c - 声明数组的更好方法？

> ID：11515307
> 
> 赞同：2
> 
> 时间：2012-07-17T02:37:53.633
> 
> 标签：c, arrays, syntax

我正在用 C 语言编写并使用 GCC 进行编译。

有没有更好的方法来声明积分。我很惊讶地看到点是一个数组。是否有某种声明点的方法，所以它看起来更像一个数组。

```
typedef struct Span
{
    unsigned long lo;
    unsigned long hi;
} Span;

typedef struct Series
{
    unsigned long *points;
    unsigned long count;
    unsigned long limit;
} Series;

void SetSpanSeries(Series *self, const Span *src)
{
    unsigned long *points;

    if (src->lo < src->hi )
    {

        // Overlays second item in series.
        points = self->points;  // a pointer in self structure
        points[0] = src->lo;
        points[1] = src->hi;
        self->count = 1;
    }
} 
```

* * *

现在让我们说点指向一个数组结构。

```
typedef struct Span
{
    unsigned long lo;
    unsigned long hi;
} Span;

span *points[4]; 
```

现在我该如何编写这些代码行？我做对了吗？

```
points = self->points;  // a pointer in self structure
points[0].lo = src->lo;
points[0].hi = src->hi; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T02:50:44.387

使用声明`unsigned long *points`,`points`是一个指针。它指向数组的开头。`arr[x]`与 相同`*(arr + x)`，所以`arr`是数组（在这种情况下，它获取数组的地址，添加`x`并取消引用“指针”）还是指针（在这种情况下，它获取指针值，添加`x`和取消引用指针），`arr[0]`仍然获得相同的数组访问。

在这种情况下，您不能将其声明`points`为数组，因为您没有*将*其用作数组 - 您将其用作指向数组的指针。指针是浅拷贝——如果更改指针指向的数据，它会更改原始数据。要创建常规数组，您需要进行深层复制，这将防止您的更改`pointer`影响数组`self`，这最终是您想要的。

事实上，你可以重写整个事情没有`points`：

```
void SetSpanSeries(Series *self, const Span *src)
{
    if (src->lo < src->hi )
    {
        self->points[0] = src->lo;
        self->points[1] = src->hi;
        self->count = 1;
    }
} 
```

至于你的第二个例子，是的，`points[0].lo`是正确的。`points->lo`也是正确的，只要您只访问`points[0]`. （或者`self->points[0].lo`如果你完全拿出来`points`。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T02:51:42.737

将指针视为数组的能力肯定会让大多数 C 初学者感到困惑。当作为参数传递给函数时，数组甚至会*衰减*为指针，给人的印象是数组和指针是完全可互换的——它们不是。[Expert C Programming: Deep C Secrets](https://rads.stackoverflow.com/amzn/click/com/0131774298)中有一个很好的描述。（这是我最喜欢的书之一；如果你想了解 C，强烈推荐它。）

无论如何，写作与大多数人阅读（和写作）`pointer[2]`一样，数组语法要容易得多。`*(pointer+2)`

由于您正在使用此`*points`变量来更轻松地访问另一个内存块（ 中的指针`points`）`struct Series`，因此您*不能*将数组用于局部变量，因为您无法将数组的基数重新分配给其他东西。考虑以下非法代码：

```
int foo[10];
int *bar;
int wrong[10];

bar = foo; /* fine */
wrong = foo; /* compile error -- cannot assign to the array 'wrong' */ 
```

重写此代码的另一个选项是删除临时变量：

```
if (src->lo < src->hi) {
    self->points[0] = src->lo;
    self->points[1] = src->hi;
    self->count = 1;
} 
```

我不确定临时变量是否有助于提高易读性——它只是节省了输入几个字符，但以添加*大量*字符为代价。（也是一个令人困惑的变量。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T02:51:19.220

在中间部分，您说点是指向结构跨度的指针的数组 4。在第三部分中，您从 self->points 分配点（意味着点的先前值，该数组，已丢失）。然后，您取消引用点，就好像它是一个 struct Span 数组，而不是一个指向 struct Span 的指针数组。

在其他作品中，这无法编译，因为您正在混合类型，即使您没有，您也正在覆盖由 points 变量的定义分配的内存。

提供 Series 的定义可能有助于解释发生了什么。

但可以肯定的是，在第一个示例中，点数可能应该是 a `Span *points`，但没有看到 Series，我们无法确定。

# atk4 - 使用 $_GET 访问参数

> ID：11515308
> 
> 赞同：0
> 
> 时间：2012-07-17T02:37:53.993
> 
> 标签：atk4

我在我的用户注册中添加了一个电子邮件验证步骤。我似乎无法访问电子邮件链接中传递的参数；

链接：activation.php?email=someone@somewhere.com&key=5614c46be05a95f55f2231d8dea41418d17b197a

这是页面代码；

```
class page_activation extends Page {
    function init(){
        parent::init();

    if($this->api->auth->isLoggedIn())$this->api->redirect('index');

    $loginAccount = $_GET['email'];
    $activationKey = $_GET['key'];

    $this->add('H1')->set('Activated');
    $this->add('H3')->set('Account: '.$loginAccount);
    $this->add('H3')->set('Key: '.$_GET['key']);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T20:30:36.883

```
var_dump($_GET); 
```

*   检查检查器中的网络选项卡以确保实际通过了获取参数。
*   检查 mod 重写规则

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T01:59:16.650

我找到了一个解决方案，以防它可能对某人有所帮助。看来您可以访问 $_SERVER 变量，但在您访问该页面时 $_GET 变量已丢失。这是我用来从电子邮件链接访问传递的变量的一些代码；

```
class page_activation extends Page {
function init(){
    parent::init();

    if($this->api->auth->isLoggedIn())$this->api->redirect('index');

    $data = parse_url($_SERVER['REQUEST_URI'], PHP_URL_QUERY);
    $queryParts = split('[;&]', $data);

    $params = array(); 
    foreach ($queryParts as $param) { 
        $item = explode('=', $param); 
        $params[$item[0]] = $item[1]; 
    }

    $loginAccount = $params['email'];
    $activationKey =  $params['key'];

    $this->add('H1')->set('Activated');
    $this->add('H3')->set('Account: '.$loginAccount);
    $this->add('H3')->set('Key: '.$activationKey);

} 
```

}

# objective-c - segue.destinationViewController - NSInvalidArgumentException

> ID：11515313
> 
> 赞同：0
> 
> 时间：2012-07-17T02:39:09.053
> 
> 标签：objective-c, xcode

当用户在 UITableViewController 中选择一行时，我想转到另一个 viewController 并将其 UIImageView 设置为先前设置的图像。现在，我将其设为通用 - 始终显示 /images/en.jpeg。

flickrTVC.m (UITableViewController):

```
@implementation flickrTVC

...

-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([segue.identifier isEqualToString:@"showPhoto"])
        UIImage *photo = [UIImage imageWithContentsOfFile:@"images/en.jpeg"];
        [segue.destinationViewController setDisplayedPhoto:photo];
    }
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    [self performSegueWithIdentifier:@"showPhoto" sender:self];
} 
```

我有*-(void)setDisplayedPhoto:(UIImage *)image;* （它将 self.photo 设置为图像）在我的 photoViewController.h（segue.destinationViewController）中。我正进入（状态

```
Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[UIViewController setDisplayedPhoto:]: unrecognized selector sent to instance 0x1f5c4a60' 
```

在以下行：*[segue.destinationViewController setDisplayedPhoto:photo];* . 即使实现空白，错误仍然出现。我是objective-c的新手，可能我只是把一些事情搞砸了。

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T02:45:36.177

发生异常是因为存在的对象未定义方法`setDisplayedPhoto:`。这可能是因为`segue.destinationViewController`当前设置为完全不同的控制器（例如，与您想象的不同的视图）。也可能是您定义了与该方法相似但不完全相同的东西；如果是这样，那么编译器可能已发出有关`setDisplayedPhoto:`方法调用的警告。

# visual-studio-2010 - C++ Visual Studio 中的错误“C3145”和“C2061”

> ID：11515314
> 
> 赞同：1
> 
> 时间：2012-07-17T02:39:16.060
> 
> 标签：visual-studio-2010, compiler-errors, c++-cli

编辑：什么是 C++/CLI？我在 Visual Studio 中编程，据我所知，使用 C++ ...另外，第一个错误已由 Peter 的评论解决，但我仍然坚持第二个。

我是 C++ 世界的新手，之前我所有的工作都是用 Java 完成的。我不熟悉指针和垃圾收集的使用（尽管我相信我理解这个概念），我相信这可能是我问题的根源。我收到以下错误消息：

```
1>Runner.cpp(6): error C3145: 'formOutOfTime' : global or static variable may not have managed type 'System::Windows::Forms::Form ^'
1>          may not declare a global or static variable, or a member of a native type that refers to objects in the gc heap
1>Runner.cpp(22): error C2061: syntax error : identifier 'FormOutOfTime' 
```

我的代码是这样的：

PurpleHealth.cpp（这是我相信系统调用来启动它的文件）：

```
#include "FormOutOfTime.h"

#include "FormParentalOverride.h"
#include "Runner.h"

using namespace PurpleHealth;

[STAThreadAttribute]
int main(array<System::String ^> ^args)
{
    // Enabling Windows XP visual effects before any controls are created
    Application::EnableVisualStyles();
    Application::SetCompatibleTextRenderingDefault(false); 

    // Create the main window and run it
    //Application::Run(gcnew FormOutOfTime());
    Runner* runner = new Runner();

    //delete runner;

    return 0;
} 
```

Runner.h（这是我要运行所有主要代码并启动表单的头文件。我也为头文件背后的目的而苦苦挣扎）

```
#include "stdafx.h"
#include "FormOutOfTime.h"
#include "FormParentalOverride.h"

class Runner
{
public:

    Runner();
    ~Runner();

    // functions

private:

    void Go();
    // member variables

}; 
```

最后是Runner.cpp：

```
#include "stdafx.h"
#include "Runner.h"
#include "FormOutOfTime.h"
#include "FormParentalOverride.h"
//Variable Dclaration
System::Windows::Forms::Form^ formOutOfTime;//Error Here***************************

Runner::Runner()
{
    // Do stuff if you need to

    this->Go();
}

Runner::~Runner()
{
    // Clear memory if you need to
}

void Runner::Go()
{
     formOutOfTime = gcnew FormOutOfTime();//Error Here***************************
    formOutOfTime->ShowDialog();
} 
```

请帮助我解决这些消息，甚至对形式的批评表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T03:11:44.437

托管指针不能在静态或全局范围内声明。它们只能在函数范围内声明。将 formOutOfTime 的声明从 runner.cpp 文件的顶部移到 Go 方法中

# slimdx - 装配参考 SlimDX？

> ID：11515315
> 
> 赞同：0
> 
> 时间：2012-07-17T02:39:23.597
> 
> 标签：slimdx, xinput

我查看了另一篇涉及 SlimDX 的帖子，并想在我的项目中引用它（用于 Xbox 360 输入），但在安装 SlimDX 后，找不到这些文件。我尝试在我的整台计算机上搜索 Slimdx，但没有任何显示。这是在 Windows 7 上。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T19:44:23.277

我认为默认位置是：c:\program files (x86)\SlimDX SDK (version)

# scala - 我应该如何使用 ScalaTest 测试 AKKA FSM 超时

> ID：11515316
> 
> 赞同：1
> 
> 时间：2012-07-17T02:40:09.647
> 
> 标签：scala, akka, scalatest

是否有一种惯用的方法来测试状态超时。我的演员采用指定在不同状态下花费的持续时间的类型。一些类似的东西：

```
startWith(Off,_)    

when(Off, stateTimeout = Durations.OffDuration ) => Case Event(,_) goto(On) 

when(On, stateTimeout = Durations.OnDuration ) => Case Event(TurnOn,_) goto(Off) 
```

我想测试一下 Off 是否确实转到 On ，反之亦然。

我可以做类似的事情：

```
val durations = new Durations(1 NanoSecond,1 Second)    
// get actor from system

thread.sleep(OffDuration) // 1 nanosecond of wait
assert(actor.StateName == On) 
```

但是睡觉的呼唤感觉不对，我也在争分夺秒地选择“神奇的”持续时间值”

# jquery - 如何获取下一个输入元素的值？

> ID：11515318
> 
> 赞同：1
> 
> 时间：2012-07-17T02:40:33.567
> 
> 标签：jquery, html

我有以下代码：

```
<li class="order_line">
  <div class="rating">
    <input type="textbox" value="10" maxlength="3" class="store_rating" name="item_rating"> 
  </div>
  <div class="cost">
    <input type="textbox" readonly="readonly" value="469" maxlength="3" class="store_cost" name="item_rating">
  </div>
</li> 
```

我得到的最接近的是使用此代码：

```
var cost = $(this).parent().next().html(); 
```

An`alert(cost)`将输出整个`<input...`字符串。

但我无法获得价值。

我发现了几个类似的问题（这就是我几乎得到解决方案的方式），但我无法完成最后的步骤。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T02:42:34.837

`var cost = $(this).parent().next().find("input").val();`

您需要在父级中搜索`div`以找到`input`，然后使用获取值`val()`

或者如果你只有两个，就像上面的例子一样，你可以使用类似的东西：

`$("input").not(this).val()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T02:42:24.730

`.parent()`让你进入一个`<div>`元素，并`.next()`让你进入下一个`<div>`. 你想要`<div>`一个`<input>`.

# c# - FromBody 不绑定字符串参数

> ID：11515319
> 
> 赞同：41
> 
> 时间：2012-07-17T02:40:34.190
> 
> 标签：c#, .net, asp.net-web-api

我有一个类似于[ASP.NET MVC 4 RC Web API Parameter Binding Issue](https://stackoverflow.com/questions/11158617/asp-net-mvc-4-rc-web-api-parameter-binding-issue)的问题，但我试图通过使用 [FromBody] 属性来解决它。

Fiddler 报告以下请求（不包括用户代理字符串等不相关的位）

```
PUT http://localhost:82/api/account/shoppinglistitems HTTP/1.1
Host: localhost:82
Connection: keep-alive
Content-Length: 11
Origin: http://localhost:3000
Content-Type: application/x-www-form-urlencoded
Accept: application/json, text/javascript, */*; q=0.01

query=apple 
```

我的控制器动作是

```
[HttpPut]
public ShoppingListItemWebModel CreateShoppingListItem([FromBody]string query) {
    // query is null
} 
```

我可以将参数包装为复杂类型，但这似乎是解决问题的技巧。或者我可以将查询放在 URI 中，但这不符合 API 其余部分的模式。有可能这样做吗？如果是这样，我的错误在哪里？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-07-17T07:01:09.917

将您的请求更改为

```
PUT http://localhost:82/api/account/shoppinglistitems HTTP/1.1
Host: localhost:82
Connection: keep-alive
Content-Length: 11
Origin: http://localhost:3000
Content-Type: application/x-www-form-urlencoded
Accept: application/json, text/javascript, */*; q=0.01

=apple 
```

注意缺少“查询”

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2015-02-24T16:52:22.433

如果您使用 AngularJS 而不是 jQuery，您可能希望选择以下替代方案，因为 AngularJS`application/json`默认使用内容类型。

```
PUT http://localhost:82/api/account/shoppinglistitems HTTP/1.1
Host: localhost:82
Connection: keep-alive
Content-Length: 7
Origin: http://localhost:3000
Content-Type: application/json
Accept: application/json, text/javascript, */*; q=0.01

'apple' 
```

请注意，该值包含在字符串引号中（单引号或双引号）。

# php - 如何转义其他代码 - php

> ID：11515320
> 
> 赞同：0
> 
> 时间：2012-07-17T02:40:36.720
> 
> 标签：php, if-statement, escaping

我有一个带有 action='#' 的表单，它输出一些输入

以及点击提交按钮时的声明

```
if($_POST['edit'] == 'Edit') 
{
    manipulation here
    with printout
} 
```

这里发生的是 MAIN FORM 的输出和单击 SUBMIT 按钮时打印出的 IF STATEMENT 的输出

我想要的是，当单击提交按钮时，只会显示 IF STATEMENT 上的 PRINTOUT。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T02:45:42.717

您是否尝试过使用 else 扩展 if 语句 - 一种或另一种类型的情况？

```
//when form is submitted
if($_POST['edit'] == 'Edit') 
{
    manipulation here
    with printout
}
//when form not submitted
else 
{
    //display form
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T02:46:35.760

如果我理解正确，您不想在提交后显示表单。如果是这种情况，您可以检查是否设置了表单提交的值之一，并根据该值显示原始表单。

这是一个例子：

```
<?php if( !isset($_POST['edit']) ): ?>
    <form action="#">
        <input type="text" name="edit" />
        ...
        <input type="submit" value="Submit" />
    </form>
<?php else: ?>
    Display other information.
<?php endif; ?> 
```

# sql - 在视图上构建 Postgresql 视图

> ID：11515321
> 
> 赞同：-1
> 
> 时间：2012-07-17T02:41:04.827
> 
> 标签：sql, postgresql, views

我的一位 OpenERP 客户遇到了问题。我需要为他们构建一个自定义对象，因为他们有一个问题，有时他们在售出后会收到退货。所以我需要将其标记为负数，并从之前的销售总额中减去。

```
SELECT sum(rsm1.product_qty_out) as "out"
     , sum(rsm2.product_qty_in) as "in"
     , rsm2.location_id
     , rsm2.product_id
     , rsm2.month
from report_stock_move as rsm1, report_stock_move as rsm2
where rsm2.location_id in (
    select id
    from stock_location
    where "name" = 'Consumers'
    )
and rsm1.location_id not in (
    select id
    from stock_location
    where "name" = 'Consumers'
    )
and rsm1.location_dest_id = rsm2.location_id
and rsm2.location_dest_id = rsm1.location_id
and rsm1.state = 'done' -- both are in done state
and rsm2.state = rsm1.state
group by rsm2.location_id, rsm2.month, rsm2.product_id
; 
```

有人有想法么？此外，根据我用于分组的表，我不断得到不同的结果。这是为什么？

**编辑** 对不起，我急于解决这个问题，我似乎已经明确了我的观点。来自 stock_location 表的具有消费者 location_id 的 report_stock_moves 需要为负，并汇总到具有另一个地方的 location_id 的 report_stock_moves 中，但 Consumer 是 location_dest_id。

例子：

```
location_id = Some Place (actually ID of stock_location of course)
product_qty = 8
location_dest_id Consumers
date = 2012-07-02

location_id = Consumer
product_qty = 4
location_dest_id Some Place
date = 2012-07-04 
```

这里有两个记录示例。他们附有不同的日期，所以我可能想取最大日期，或者如果我想将它们合并或分组，我可能想取最大日期或退货日期（从消费者到某个地方），以便当它们放在一起时，我得到 4，而不是说 8，如果我没有把它们放在一起，只看消费者的情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T02:19:02.017

以防以后有人为此而苦苦挣扎。我会在这里粘贴我的答案。如果有人可以帮助我解释为什么 union all in here 似乎有效，我会全力以赴。我可以做简单的 SQL，但我不太了解联合是如何工作的，尤其是在这种情况下。

```
select max(total.id) as id,
                     sum(total.product_qty) as product_qty,
                     total.location_id as location_id,
                     total.date as "date",
                     total.year as year,
                     total.month as month,
                     total.day as day,
                     total.product_id as product_id
                     from (
                       -- From Consumer back to location
                        select -max(id) as id,
                        -sum(product_qty) as product_qty, 
                        location_dest_id as location_id, 
                        "date", year, month, day, product_id
                        from report_stock_move
                        where location_id in (
                            select id
                            from stock_location
                            where "name" = 'Consumers'
                        )
                        and "state" = 'done'
                        group by location_dest_id, "date", year, month, day, product_id

                        union all

                        -- From Location to Consumer
                        select max(id) as id,
                        sum(product_qty) as product_qty, 
                        location_id, "date", year, month, day, product_id
                        from report_stock_move
                        where location_id not in (
                            select id
                            from stock_location
                            where "name" = 'Consumers'
                        )
                        and "state" = 'done'
                        and location_dest_id in (
                            select id
                            from stock_location
                            where "name" = 'Consumers'
                        )
                        group by location_id, "date", year, month, day, product_id
                     ) as total
                     group by location_id, "date", year, month, day, product_id 
```

# python - Python：获取不同字典深度的值计数

> ID：11515322
> 
> 赞同：2
> 
> 时间：2012-07-17T02:41:17.257
> 
> 标签：python, recursion, dictionary

我正在尝试定义一个函数，该函数将允许我在字典的各个级别获取值计数。例如，如果我有类似的东西：

```
vehicles = {
    'Ford': {
        'Falcon': {
            '2008': 10, 
            '2009': 12, 
            '2010': 5
        }
    }, 
    'Holden': {
        'Commodore': {
            '2008': 15, 
            '2009': 11, 
            '2010': 5
        }
    }
} 
```

我希望能够调用一个函数来计算每个深度的值。因此，在深度 0 处，该函数将返回每个值的总和 (58)。在深度 1，该函数将返回一个带有`{'Ford': 27, 'Holden': 31}`. 在深度 2，该函数将返回一个带有`{'Ford': {'Falcon': 27}, 'Holden': {'Commodore': 31}}`. ETC...

我想我需要挖掘到最大深度并在我回到关卡时开始对值求和，但我对 Python 还很陌生，而且我很挣扎。可能我需要使用递归？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T03:07:56.000

我的解决方案，未经彻底测试

```
 def sum_values(data):
    if type(data.values()[0]) != dict:
        return sum(data.values())
    else:
        return sum(sum_values(v) for v in data.values())

def depth_values(data, depth = 0):
    if depth == 0:
        return sum_values(data)
    else:
        return dict(
            (k, depth_values(v, depth-1))
            for k, v in data.items()
        ) 
```

测试：

```
 print depth_values(vehicles, 0) # >> 58
print depth_values(vehicles, 1) # >> {'Holden': 31, 'Ford': 27}
print depth_values(vehicles, 2) # >> {'Holden': {'Commodore': 31}, 'Ford': {'Falcon': 27}}
print depth_values(vehicles, 3) # exceptions 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T03:13:46.263

这似乎起到了作用，尽管我作弊并进行类型检查（这几乎是你能得到的最不符合标准的），而且我假设字典中只有整数和键。我会注意到这种方法适用于分布不均匀的树。

```
def score(n):
    if type(n) == int:
        return n
    else:
        return sum([score(n[x]) for x in n])

def fold_dict(xs, d):
    if d == 1:
        if type(xs) == int:
            return xs            
        return {n: score(xs[n]) for n in xs}
    else:
        if type(xs) == int:
            return xs    
        return {n: fold_dict(xs[n], d - 1) for n in xs} 
```

示例输入、输出：

```
>>> y = {'a': {'a1': {'a11': 5, 'a12': 2, 'a13': 8}, 'a2': 6}, 'b': 7, 'c': {'c1': 18, 'c2': 1}}
>>> fold_dict(y, 1)
{'a': 21, 'c': 19, 'b': 7}
>>> fold_dict(y, 2)
{'a': {'a1': 15, 'a2': 6}, 'c': {'c2': 1, 'c1': 18}, 'b': 7} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T02:59:23.087

您可以检查字典的最大深度，如使用`isinstance`和`recursion`

例如，

```
depth = 0
dict = { ... }
def find_depth(dict):
    # dict = { ... }
    for key in dict:
        if isinstance(dict[key], dict):
            depth += 1
            find_depth(dict[key])
            break 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T03:08:56.973

```
def values_at_depth(d, depth):
    if depth == 0:
        sum = 0
        for k, v in d.iteritems():
            if hasattr(v, "keys"):
                sum += values_at_depth(v, 0)
            else:
                sum += v
        return sum
    else:
        ret = {}
        for k, v in d.iteritems():
            ret[k] = values_at_depth(v, depth-1)
        return ret 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-18T02:52:35.173

如果有人感兴趣，我修改了@Ned Batchelder 的函数以返回一个元组，该元组除了报告值的总和外，还报告不同深度的键数。希望这是有道理的...

无论如何，这里是：

```
def values_at_depth(d, depth = 0):
    if depth == 0:
        sumVal = 0
        sumKey = 0
        for k, v in d.iteritems():
            if hasattr(v, "keys"):
                sumKey += collectCnt(v, 0)[0]
                sumVal += collectCnt(v, 0)[1]
            else:
                sumVal += v
                sumKey += 1
        return (sumKey,sumVal)
    else:
        ret = {}
        for k, v in d.iteritems():
            ret[k] = collectCnt(v, depth-1)
        return ret 
```

PS。我不知道把这些额外的信息放在哪里。如果它应该在其他地方，请告诉我。

# shell - 将参数从 shell 传递到 awk 作为数组

> ID：11515328
> 
> 赞同：3
> 
> 时间：2012-07-17T02:42:27.943
> 
> 标签：shell, awk

我正在使用 shell 脚本，其中我正在使用 awk 脚本。我`awk`通过使用`-v`选项将参数传递给 shell 脚本。在某个时间点，当参数大小超过某个限制时，我收到“参数列表太长错误”。这是我之前的问题，但我已经找到了相同的根本原因。现在我的问题是：

> 使用 -v 选项将变量从 shell 传递到 awk = too large ⟶ 因此获取参数列表太长错误

我的想法是将大变量分成小块并将其存储在一个数组中，然后将数组传递给`awk`而不是将单个变量传递给`awk`.

我的问题是：

*   是否可以将大变量分解为小数组，然后将其传递回`awk`. 我知道如何在`awk`脚本中修改 shell 变量。但是如何修改`awk`脚本中的 shell 数组呢？

我读到 -v 选项是不可取的，他们建议通过管道传递变量值。所以如果是这样的话

```
echo variable | awk '{}' 
```

所以变量将被管道化。但是我必须将数组与其他一些变量一起传递。请你帮助我好吗？

```
 CODE DESCRIPTION
 addvariable=""
 export variable
 loop begins
 eval $(awk -v tempvariable="$addvariable" '{tempvariable=tempvariable+"long string"  variable=tempvariable(Here is where the shell variable(variable) is being modified )}')

  In shell
  addvariable=$variable (Taking the new value of shell variable and feeding back to awk in the next iteration)
   loop ends 
```

所以现在的问题是随着 addvariable 和 variable 不断增加，我得到参数太长的错误.. 所以我要做的就是将 tempvariable 分成小块，然后将它存储在 variable[1] variable[2]等，然后将其分配给 addvariable[1]、addvariable[2] 和 feed addvariable[1]、[2]，而不是作为一个整体提供整个 addvariable。所以我的问题是如何将它作为一个数组提供。以及如何将awk中的大数据存储到变量[1]变量[2]中

代码 addshellvariable=""

```
for i in {0..10}
{
zcat normalfile{i} > FILE A
zcat hugefile{i} > FILE

export shellvariable=""
getdate=grep "XXX" FILE B|sort|Uniq (getdate contains a list of id's)
eval $(awk -v getdata="$getdata" -v addshellvariable="$addshellvariable" BEGIN {tempvariable="";split(addshellvariable,tempshellvariableArray,"*");while(t <= length(tempshellvariable)) {awkarray[tempshellvariableArray[t]];} {for(id in ids) {awkarray[id];} END {for(id in awkarray) {tempvariable=tempvariable"*"id"*"awkarray[id]}  **print "shellvariable"=tempvariable;**}} FILE A)

  addshellvariable=$shellvariable;
} 
```

所以你可以看到 awk 被嵌入到 shell 中。每次我需要将 awkarray 内容再次反馈到 awk 时.. 这样我就能够获得更新的内容，这就是我通过再次打印 shell 变量来获取 shell 变量中的 awk 数组内容的原因存储在另一个 shell 变量“addshellvariable”中，并在下一次迭代中将其提供给 awk。但问题是当 shellvariable 大小增加某个点时，我得到一个 Argument too long 错误。因此，我想要一个解决方案，而不是
**print "shellvariable"=tempvariable;** 我可以把它做成**print "shellvariable[1]"=A part of tempvariable;** 等等 ...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T03:35:12.347

你的外壳似乎限制了你。我怀疑您的猜测是正确的，这不是 awk 问题，而是您调用 awk 的脚本语言。

您可以使用从文件加载的变量预加载 awk。看一下这个：

```
$ printf 'foo=2\nbar=3\nbaz=4\n' > vars
$ printf 'snarf\nblarg\nbaz\nsnurry\n' > text
$ awk 'NR==FNR{split($0,a,"=");vars[a[1]]=a[2];next} $1 in vars {print vars[$1]}' vars text
4
$ 
```

**这是如何运作的？**

前两行 printf 为我们提供了原始数据。如果您对它们不完全清楚，则在没有重定向的情况下运行它们（或 cat 结果文件）。

awk 脚本有两个主要部分。awk 脚本由`condition { commands }`. 在这种情况下，我们有两个这样的集合。

第一组的条件为**`NR==FNR`**。如果 awk 正在处理的当前记录号 (NR) 与当前文件中的当前记录号相同，则评估为“真”。显然，这只适用于第一个文件，因为从第二个文件的第一行开始，NR 是 1 加上第一个文件的行数。

在本节中，我们`split()`根据它的等号划线，并将数据放入一个名为 的数组`vars`中。

第二组的条件为**`$1 in vars`**，如果当前行的第一个单词作为`vars`数组的下标存在，则计算结果为真。我仅将其作为一个示例来说明您可以使用 vars 做什么，因为我不知道您要使用这些变量实现什么目标。

这是否解决了您的问题？如果没有，我们将需要查看您的一些代码以了解如何修复它。

* * *

**更新**评论中的每个建议，这里证明它适用于大变量：

首先，我们准备输入数据：

```
$ dd if=/dev/random of=out.rand count=128k bs=1k
131072+0 records in
131072+0 records out
134217728 bytes transferred in 3.265765 secs (41098404 bytes/sec)
$ b64encode -o out.b64 out.rand out.rand
$ ls -lh out.b64
-rw-r--r--  1 ghoti  wheel   172M Jul 17 01:08 out.b64
$ awk 'BEGIN{printf("foo=")} NR>1{printf("%s",$0)} END{print ""}' out.b64 > vars
$ ls -lh vars
-rw-r--r--  1 ghoti  wheel   170M Jul 17 01:10 vars
$ wc -l vars
       1 vars
$ cut -c1-30 vars
foo=orq0UgQJyUAcwJV0SenJrSHu3j 
```

好的，我们在一行中有一个~170MB 的变量。让我们把它吸进awk。

```
$ awk 'NR==FNR{split($0,a,"=");vars[a[1]]=a[2];next} END{print length(vars["foo"]);print "foo=" substr(vars["foo"],0,26);}' out.var bar
178956971
foo=orq0UgQJyUAcwJV0SenJrSHu3j 
```

我们可以看到变量的大小，前 26 个字符与我们从 shell 中看到的一致。是的，它有效。

# android - 将负颜色设置为 Android 视图？

> ID：11515330
> 
> 赞同：2
> 
> 时间：2012-07-17T02:42:34.470
> 
> 标签：android, google-maps, map

我们可以为 Android 视图设置负颜色吗？实际上，我的项目需要“夜间模式”而不是“卫星”或“街景”模式的 Android 地图。我花了半天的时间来调查这个问题，但我没有找到解决办法。我认为我们可以设置负颜色来查看，以便我们可以在 Android 地图中制作“夜间模式”。有没有人有想法，任何帮助表示赞赏。

提前致谢

# php - 如果“选择”的验证失败，则回发数据

> ID：11515335
> 
> 赞同：0
> 
> 时间：2012-07-17T02:43:27.453
> 
> 标签：php

一旦提交选择的选项，数据不会被存储。只想知道如果验证失败如何回发数据

以下行并不适合我。

```
 <select id="numbers" name="numbers" value="<?php echo (isset($_POST['numbers'])) ? $_POST['numbers'] : " "; ?>"/> 
```

如果有人可以帮我一把？

非常感谢，这是我的代码

```
<?php

if(isset($_POST['numbers']) &&($_POST['fruits']) && $_POST['numbers'] != "null" && $_POST['fruits'] !== "null")
{
  echo "Thank you!";
} elseif  (isset($_POST['numbers']) && $_POST['numbers'] = "null") {
    echo "you forgot to choose a number";
    }
    elseif(isset($_POST['fruits']) && $_POST['fruits'] = "null")
{
    echo "you forgot to choose fruit name";
    }

?>

  <form id="form" name="form"  method="post" action="">

      <label for="expiry">Select</label>
                <select id="numbers" name="numbers" value="<?php echo (isset($_POST['numbers'])) ? $_POST['numbers'] : " "; ?>"/>
                <option value="null" selected="selected">-</option>
                <option  value="01">01</option>
                <option value="02">02</option>
                <option value="03">03</option>
              </select>

                <select id="fruits" name="fruits" value="<?php echo (isset($_POST['fruits']))? $_POST['fruits'] : ''; ?>"/>
                <option value="null" selected="selected">-</option>
                <option value="Apple">Apple</option>
                <option value="Banana">Banana</option>
                <option value="Pear">Pear</option>

              </select>

   <input type="submit" value="Send"  />
  </form> 
```

解决了，也许不是最好的方法，但至少得到了排序：

```
<?php
$item = null; # 
$itemyear = null; 

if(isset($_POST['numbers'])){
$item = $_POST['numbers'];
}
if(isset($_POST['fruits'])){
$itemyear = $_POST['fruits'];
}

if(isset($item) && isset($itemyear) && $item != "null" && $itemyear !== "null")
{
  echo "Thank you!";
} elseif  ($item == "null") {
    echo "you forgot to choose a number";
    }
    elseif($itemyear == "null")
{
echo "you forgot to choose fruit name";
}

?>

  <form id="form" name="form"  method="post" action="">

      <label for="expiry">Select</label>
            <select id="numbers" name="numbers" />
                <option value="null" selected="selected">-</option>
                <option  value="01" <?php if($item == '01'): echo "selected='selected'"; endif; ?>>01</option>
                <option value="02" <?php if($item == '02'): echo "selected='selected'"; endif; ?>>02</option>
                <option value="03" <?php if($item == '03'): echo "selected='selected'"; endif; ?>>03</option>
              </select>

              <select id="fruits" name="fruits" />
                <option value="null" selected="selected">-</option>
                <option value="Apple"<?php if($itemyear == 'Apple'): echo "selected='selected'"; endif; ?> >Apple</option>
                <option value="Banana"<?php if($itemyear == 'Banana'): echo "selected='selected'"; endif; ?>>Banana</option>
                <option value="Pear"<?php if($itemyear == 'Pear'): echo "selected='selected'"; endif; ?>>Pear</option>

              </select>

   <input type="submit" value="Send"  />
  </form>

<?php 
echo $item ."-". $itemyear;
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T04:14:06.100

您不能`value`在`<select>`. 您必须找到正确的`<option>`并设置其`selected`属性。就个人而言，我在 上放置了一个`data-default`属性`<select>`，然后使用 JavaScript 循环遍历选项并找到正确的选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T13:11:20.620

哦，现在我明白了。

我不知道通常的做法是什么，但一种方法是在将用户重定向回来时将所有数据作为查询字符串。它不留在 $_POST 全局中的原因是因为它只保留在您发布到的页面上，然后它就消失了。

因此，当您将用户重定向回来时

```
if(validationFailed)
{
    header("Location: page.php?data=example");
} 
```

然后可以使用 page.php 在 page.php 中检索数据

```
$data = $_GET['data']; // contains "example" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T02:56:18.047

PHP isset() 函数返回 true 或 false（取决于输入是否......以及......设置。

你会想用这个： `value='<?php echo (isset($_POST['numbers'])) ? $_POST['numbers'] : ""; ?>`

# python - NLTK 词干产生奇怪的结果

> ID：11515339
> 
> 赞同：4
> 
> 时间：2012-07-17T02:43:51.887
> 
> 标签：python, nlp, nltk

运行后，`nltk.stem.porter.PorterStemmer().stem_word(word)`我得到了许多带有 'ing' 截断或 'y' 与 'i' 交换的单词。例如，“质量”变成“质量”，（甚至更陌生）“价值”变成“价值”？

由于生成的单词不是实际的英文单词，我不确定我打算如何使用它们？我最好的猜测是，我打算将词干放入另一个函数中，该函数将为我提供来自该词干的所有派生/子词（例如 'valu' 将返回`['valuing','valued', 'values', ...]`。有这样的函数吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T02:49:47.390

词干提取通过一系列去除常见后缀和前缀的转换规则来提取词干。因此产生的结果可能不是一个实际的英文单词。词干提取的一般用途是对单词进行规范化，以使它们被认为是相同的。例如：

```
stem_word('value') == stem_word('valuing') 
```

然后可以对词干词进行索引以进行搜索。对传入查询执行相同的词干提取，以便在进行查找时查询词与索引中的词干词匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T02:52:31.957

我不熟悉那个特定的功能，但一般来说，词干意味着词根，不一定是合法的英语词。

你在用nltk书吗？本章介绍词干提取：http: [//nltk.googlecode.com/svn/trunk/doc/book/ch03.html](http://nltk.googlecode.com/svn/trunk/doc/book/ch03.html)

# node.js - “指定的模块无法找到。” 将带有本机插件的项目复制到服务器机器时

> ID：11515341
> 
> 赞同：4
> 
> 时间：2012-07-17T02:44:23.397
> 
> 标签：node.js, 64-bit, windows-server-2008-r2

我为节点创建了一个本机插件，一个 64 位 dll，使用`/clr`标志编译以访问另一个 .net dll。

一切都在我的开发盒（Windows 7、64 位）上运行良好，但是当将整个目录复制到服务器盒（Windows Server 2008 R2、64 位、.net 4.0 客户端配置文件和扩展安装）时，a

```
var myaddon = require('./build/Release/myaddon'); 
```

产生以下错误：

```
module.js:485
  process.dlopen(filename, module.exports);
          ^
Error: The specified module could not be found.
C:\Users\x\build\Release\myaddon.node
    at Object.Module._extensions..node (module.js:485:11)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12)
    at Module.require (module.js:362:17)
    at require (module.js:378:17) 
```

我知道它成功地找到了文件“myaddon.node”，因为当我稍微更改 require 语句以指向不存在的文件时，它会抱怨不同的错误消息。

没有我的 require 语句，节点可以正常启动。

为什么会出现错误以及如何解决？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-17T03:58:27.420

在出于调试目的从头开始一个插件之后`/clr`- 效果很好 - 我想通了。

*   设置“/clr”标志会强制您将“/MT”（运行时库的静态链接）更改为“/MD”（rt 库的动态链接）
*   动态链接意味着需要在目标机器上安装 C++ dll

在我的情况下，这意味着在服务器上安装[Microsoft Visual C++ 2010 SP1 Redistributable Package (x64)](http://www.microsoft.com/en-us/download/details.aspx?id=13523 "Microsoft Visual C++ 2010 SP1 可再发行包 (x64)")。

# jquery - div 的手风琴

> ID：11515344
> 
> 赞同：0
> 
> 时间：2012-07-17T02:44:40.170
> 
> 标签：jquery

我正在制作 Div 的手风琴，这里是代码：

```
 $('.answer').hide();
 $('.question').click (function(){
    $('.answer').slideUp();
    $('#question'+$(this).attr('target')).slideDown('slow');
 }) 
```

它工作正常，但我想要它，所以当我再次点击同一个问题时它会关闭。
这是我使用的 HTML：

```
<h1 class="question" target="1">Some Question</h1>
<p id="question1" class="answer">Some Answer</p>
<h1 class="question" target="2">Another question</h1>
<p id="question2" class="answer">Another answer</p> 
```

提前致谢

请看这里的代码：http: [//jsfiddle.net/FMLhc/](http://jsfiddle.net/FMLhc/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T03:10:10.600

这有效：

[http://jsfiddle.net/FMLhc/15/](http://jsfiddle.net/FMLhc/15/)

基本上，只需检查切换的状态，然后做你需要做的事情。

# jquery - 瓶子响应不触发ajax回调

> ID：11515351
> 
> 赞同：0
> 
> 时间：2012-07-17T02:45:37.950
> 
> 标签：jquery, ajax, callback, bottle

我有以下使用 jquery 的 ajax 帖子：

```
$.post("/login", {}, function(data){
    alert("yolo");
}); 
```

这是由单击按钮触发的，并且“/ login”映射到我的服务器（使用Bottle）：

```
@route('/login', method='POST')
def login():
    return "something" 
```

我面临的问题是我的回调永远不会被调用，而是我取回了一个在我的身体里有“东西”的 html 页面。

如何让我的浏览器将我的服务器响应视为数据而不是新的 html 页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T03:06:51.517

我怀疑你是用标签内的提交按钮之`$.post`类的东西来触发你的。如果是这种情况，那么您的表单将执行标准提交并由您的服务器重定向到相关操作。为了防止这种情况（并允许 ajax 发生），您需要阻止浏览器默认的表单提交行为。这可以像这样轻松完成：`.click``<form>`

```
 $('#IDofYourForm').submit(function(e){ e.preventDefault(); }); 
```

# php - 查询具有一对多关系的两个表

> ID：11515354
> 
> 赞同：0
> 
> 时间：2012-07-17T02:46:10.040
> 
> 标签：php, mysql, join, one-to-many

我觉得有点尴尬，因为可能有一个简单的解决方案，但我不知道足够多的 MySQL 来做到这一点。如何使用一个查询从每个表中获取数据，然后返回一个数组，如下图所示？我所做的每一次尝试最终都会返回一个标签，或者返回同一任务的多个数组，每个数组都有一个不同的标签。

我的查询结构应该是什么样的？

谢谢！

[http://i.stack.imgur.com/ViqEs.png](http://i.stack.imgur.com/ViqEs.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T03:05:13.847

图像的数组实际上显示了两次查询后数据的样子，而不是一次。为了能够在单个查询中完成，这是因为数据不太复杂，您可以使用 a`GROUP_CONCAT()`获取任务的所有标签，然后使用查询后逻辑将数据拆分为单独的数组。

获取所有请求数据的 SQL 查询将是：

```
SELECT
    tasks.*, GROUP_CONCAT(tag_name) AS tags
FROM
    tasks LEFT JOIN tags ON tags.task_id=tags.id
WHERE
    id=2 
```

此查询将返回一条记录；在该记录中，该列`tags`将保存属于该任务的所有标签的逗号分隔列表。您可以将该列中的数据拆分为一个数组以构建所需的结构。

一个例子，使用 PHP：

```
$result = mysql_query("SELECT tasks.*, GROUP_CONCAT(tag_name) AS tags FROM tasks LEFT JOIN tags ON tags.task_id=tags.id WHERE id=2");

// create the "$task" array that has a "task" and "tags" index
$task = array('task' => array(), 'tags' => array());
$task['task'] = mysql_fetch_assoc($result);

// split the comma-separated list of tags into an array
$task['tags'] = explode(',', $task['task']['tags']);

// delete the original "tags" entry that's returned by the sql query
unset($task['task']['tags']); 
```

请注意，此示例没有任何数据验证、连接信息或其他逻辑，应仅用作如何将数据拆分为所需结构的粗略想法。

# google-app-engine - 使用 Objectify 4 的实体、实体组和列表

> ID：11515356
> 
> 赞同：1
> 
> 时间：2012-07-17T02:46:13.087
> 
> 标签：google-app-engine, google-cloud-datastore, objectify

我在解决这类问题时遇到了一些困难：

我有一些嵌套实体，我正在尝试将它们保留在同一个事务中（启用 HRD）。

实体 A：

```
@Entity 
public class A {
    @Id Long id;
    List<B> children;
} 
```

实体 B：

```
@Entity 
public class B {
    @Id Long id;
} 
```

当我尝试保留 6 个实例时（只有两个实体组，A e B）......

```
public void testOfy() {
    ofy.getFactory().register(A.class);
    ofy.getFactory().register(B.class);

    List<B> list = new ArrayList<B>();

    final A a0 = new A();
    final B b1 = new B();
    final B b2 = new B();
    final B b3 = new B();
    final B b4 = new B();
    final B b5 = new B();

    Ofy o = ofy.transaction();

    try {
        o.save().entities(b1).now(); list.add(b1);
        o.save().entities(b2).now(); list.add(b2);
        o.save().entities(b3).now(); list.add(b3);
        o.save().entities(b4).now(); list.add(b4);
        o.save().entities(b5).now(); list.add(b5);

        a0.children = list;
        o.save(a0);
        o.getTxn().commit();
    }

    finally {
        if (o.getTxn().isActive())
            o.getTxn().rollback();
    }

} 
```

我得到了例外：

```
java.lang.IllegalArgumentException: operating on too many entity groups in a single transaction.
at com.google.appengine.api.datastore.DatastoreApiHelper.translateError(DatastoreApiHelper.java:36) 
```

但是，如果我只放 5 个实例，一切正常......

```
public void testOfy() {
    ofy.getFactory().register(A.class);
    ofy.getFactory().register(B.class);

    List<B> list = new ArrayList<B>();

    final A a0 = new A();
    final B b1 = new B();
    final B b2 = new B();
    final B b3 = new B();
    final B b4 = new B();
    final B b5 = new B();

    Ofy o = ofy.transaction();

    try {
        o.save().entities(b1).now(); list.add(b1);
        o.save().entities(b2).now(); list.add(b2);
        o.save().entities(b3).now(); list.add(b3);
        o.save().entities(b4).now(); list.add(b4);
        // o.save().entities(b5).now(); list.add(b5);

        a0.children = list;
        o.save(a0);
        o.getTxn().commit();
    }

    finally {
        if (o.getTxn().isActive())
            o.getTxn().rollback();
    }

} 
```

我正在使用 Objectify 4.0b3，有人有什么建议吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T03:12:33.873

您误解了实体组是什么。实体组不是一个*类*，它是一个*实例*（或一组实例）。

这些实体中的每一个都代表一个单独的实体组。XG 交易允许每个交易最多五个 EG。第 6 个产生您看到的错误。

# php - 我的 PDO 绑定如何仍然弄乱我的查询？

> ID：11515358
> 
> 赞同：0
> 
> 时间：2012-07-17T02:46:20.807
> 
> 标签：php, sql, pdo

下面是一个设计用于处理自定义类的搜索场景的函数。

我已经绊倒了这样一个事实，即 PDO 默认将参数绑定为字符串，即使不合适也会导致整数->字符串转换。正如您将看到的，我通过手动检查类型是否为整数然后在这些情况下强制使用 int 来纠正这个问题。问题是，我的解决方案只适用于 0 的“开始”值——任何更高的错误，我不知道为什么。如果我手动将开始/计数值设置为适当的值（即，我使用 {$count} 而不是 :count），一切正常，所以看起来绑定仍然搞砸了。

如何？或者如果我错了……什么是对的？

```
 /*Query is:  
    SELECT tutor_school.id 
    FROM tutor_school, tutor_states 
    WHERE tutor_states.stateName=:state AND tutor_states.id=tutor_school.state 
    GROUP BY tutor_school.id order by tutor_school.name asc 
    LIMIT :start, :count*/

    $db = Database::get_user_db();
    $statement = $db->prepare($query);
    foreach ($executeArray as $key => $value)
    {
        if (getType($value) == 'integer')
        {
            $statement->bindParam($key, $executeArray[$key], PDO::PARAM_INT);
        }
        else
        {
            $statement->bindParam($key, $value);
        }
    }
    var_dump($executeArray);//count and start are still ints
    if ($statement->execute())
    {
        var_dump($executeArray);//start and count are now strings
        var_dump($statement->errorInfo());
        var_dump($query);
        $values = $statement->fetchAll();
        $return = array();
        foreach ($values as $row)
        {
            $school = School::schoolWithId($row[0]);
            if (!empty($school))
            {
                $return[] = $school;
            }
        }
        return $return;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T04:58:37.147

元数据（例如`LIMIT`参数）不能被参数化。您将不得不改用（经过适当清理的）插值。

# c++ - 需要帮助从类中调用函数

> ID：11515365
> 
> 赞同：0
> 
> 时间：2012-07-17T02:47:15.613
> 
> 标签：c++, class, function, object, if-statement

我无法从中选择功能`class OperateClass`

它询问用户“你想加、减、乘还是除？我想：”（主要）。无论我放什么，它都会转到 function `int add`。我究竟做错了什么？

```
#include <iostream>

using namespace std;

int x = 1;
int number;
int total = 0;
int amt = 1;
int a;
int b;
int c;
int d;
string ans;

class OperateClass{
    public:
        int add(){
            while(x <= 2){
                cout << "Enter a number to use to add: " << endl;
                    cin >> a;
                total = total + a;
                x++;
                amt++;
            }
        }

        int subtract(){
            while(x <= 2){
                cout << "Enter a number to use to add: " << endl;
                    cin >> b;
                total = total - b;
                x++;
                amt++;
            }
        }

        int multiply(){
            while(x <= 2){
                cout << "Enter a number to use to add: " << endl;
                    cin >> c;
                total = total * c;
                x++;
                amt++;
            }
        }

        int divide(){
            while(x <= 2){
                cout << "Enter a number to use to add: " << endl;
                    cin >> d;
                total = total / d;
                x++;
                amt++;
            }
        }
};

int main()
{

cout << "Do you want to add, subtract, multiply or divide? I want to : " << endl;
cin >> ans;

if(ans == "add"){
OperateClass opOper;
opOper.add();
    }

else if (ans == "subtract"){
    OperateClass opOper;
    opOper.subtract();
    }

else if (ans == "multiply"){
    OperateClass opOper;
    opOper.multiply();
    }

else if(ans == "divide"){
    OperateClass opOper;
    opOper.divide();

    }

} 
```

另外，下面的功能是否足以打印？

```
void print(){
    cout << "Your total is: " << total << endl;  Where should I call this?

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T02:52:05.127

所有方法都有相同的文本`"Enter a number to use to add: "`

# sql - 在电子邮件中格式化数据集

> ID：11515367
> 
> 赞同：1
> 
> 时间：2012-07-17T02:47:57.570
> 
> 标签：sql, vb.net, dataset

我有一个程序，在加载时将使用来自查询的信息加载数据集。然后我通过电子邮件发送信息。除输出外，一切正常。输出被包装而不是表格格式。如果我调试程序并将“Payouts”的“Value”粘贴到 txt 文档中并将其保存为 html 文件，则它的格式正确（以表格形式显示）。这是我的代码：

```
Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load

        Try
            Dim SmtpServer As New SmtpClient()
            Dim mail As New MailMessage()
            Me.Paid_Out_TbTableAdapter.Fill(Me.DataDeliveryServiceDataSet.Paid_Out_Tb)
            Dim payouts = _
            <html>
                <body>
                    <table>
                        <tr><th>My First Column Header</th><th>My Second Column Header</th></tr>
                        <%= From paidOut In Me.DataDeliveryServiceDataSet.Paid_Out_Tb.AsEnumerable _
                            Select <tr><td><%= paidOut.Store_Id %></td><td><%= paidOut.Paid_Out_Comment %></td></tr> %>
                    </table>

                </body>
            </html>

            SmtpServer.Credentials = New  _
            Net.NetworkCredential("****", "****")
            SmtpServer.Port = 25
            SmtpServer.Host = "*****"
            mail = New MailMessage()
            mail.From = New MailAddress("*@*.com")
            mail.To.Add("*@*.com")
            mail.Subject = "Test Mail"
            mail.IsBodyHtml = True
            mail.Body = payouts
            SmtpServer.Send(mail)
            MsgBox("mail send")
        Catch ex As Exception
            MsgBox(ex.ToString)
        End Try
End Sub 
```

以下是在电子邮件中作为正文发送的内容：

我的第一列标题我的第二列标题4567办公用品4567按事故报告为每个 ROB 提供服务的报销4567服务发票退款# ******* *4567办公用品和佳得乐

正如您所看到的，它只是被包装而不是格式化......我怎样才能让正文以 TXT 格式作为表格，或以 HTML 格式作为表格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T03:03:18.823

该`CStr(XElement)`函数只返回元素的内容。采用：

```
mail.body=payouts.ToString() 
```

# ios - insertRowsAtIndexPaths: with scrollToRowAtIndexPath: 导致 UITableView 部分被错误地隐藏

> ID：11515374
> 
> 赞同：5
> 
> 时间：2012-07-17T02:48:51.290
> 
> 标签：ios, cocoa-touch, uitableview, uikit

我创建了一个带有可点击部分的 UITableview。当你点击它们时，

1.  它们“扩展”以显示其中的细胞
2.  单击的部分滚动到视图的顶部。

我计算所有索引路径以插入/删除必要的单元格，然后使用以下代码插入它们：

```
[self.tableView beginUpdates];
[self.tableView insertRowsAtIndexPaths:pathsToOpen withRowAnimation:insertAnimation];
[self.tableView deleteRowsAtIndexPaths:pathsToClose withRowAnimation:deleteAnimation];
[self.tableView endUpdates];
[self.tableView scrollToRowAtIndexPath:[pathsToOpen objectAtIndex:0]  atScrollPosition:UITableViewScrollPositionTop animated:YES]; 
```

只有一个问题 - 所选部分下方的部分是隐藏的。第一个屏幕截图显示了 tableview 的外观。第二个屏幕截图显示了它的实际外观。

![部分消失](../Images/adc214e0af6120adf90e4bbec5da7c24.png)

如果您向上滚动（因此隐藏部分在屏幕外）然后向下滚动，隐藏部分将被带回（再次可见）。我对为什么会发生这种情况的猜测如下：

插入/删除动画与 TableView 同时发生`scrollToRowAtIndexPath`，这使 TableView 感到困惑。如果我没有完成`scrollToRowAtIndexPath`第 3 节和第 4 节，就会出现在屏幕外——所以 tableView 仍然以某种方式认为它们在屏幕外。UITableview 隐藏了屏幕外的单元格/部分作为优化。如果我用 2 秒调用`scrollToRowAtIndexPath`a ，则第 3 和第 4 部分将正确显示。`dispatch_after`

所以我想我知道为什么会这样，但我不知道如何修复/覆盖这个 UITableview 优化。实际上，如果我`scrollViewDidEndScrollingAnimation`在此函数中实现然后添加断点，应用程序会正确显示第 3 和第 4 部分（这就是我获得第一个屏幕截图的方式）。但是一旦继续这个功能，细胞就会消失。

完整的项目可以在[这里下载](https://www.dropbox.com/sh/2ks8pw8q6mhb2u2/o2SzAuFmGi/DiveNav-ExpandableSections)

* * *

附加实现细节：部分是合法的 UITableView 部分。我添加了一个触发对 tableview 的委托回调的 tapGestureRecognizer。下面包括打开这些部分的整个方法。

```
- (void)sectionHeaderView:(SectionHeaderView *)sectionHeaderView sectionOpened:(NSInteger)sectionOpened
{
    // Open
    sectionHeaderView.numRows = DefaultNumRows;
    sectionHeaderView.selected = YES;
    NSMutableArray *pathsToOpen = [[NSMutableArray alloc] init];
    for (int i = 0; i < sectionHeaderView.numRows; i++)
    {
        NSIndexPath *pathToOpen = [NSIndexPath indexPathForRow:i inSection:sectionOpened];
        [pathsToOpen addObject:pathToOpen];
    }

    // Close
    NSMutableArray *pathsToClose = [[NSMutableArray alloc] init];
    if (openSectionHeader)
    {
        for (int i = 0; i < openSectionHeader.numRows; i++)
        {
            NSIndexPath *pathToClose = [NSIndexPath indexPathForRow:i inSection:openSectionHeader.section];
            [pathsToClose addObject:pathToClose];
        }
    }

    // Set Correct Animation if section's already open
    UITableViewRowAnimation insertAnimation = UITableViewRowAnimationBottom;
    UITableViewRowAnimation deleteAnimation = UITableViewRowAnimationTop;
    if (!openSectionHeader || sectionOpened < openSectionHeader.section)
    {
        insertAnimation = UITableViewRowAnimationTop;
        deleteAnimation = UITableViewRowAnimationBottom;
    }

    openSectionHeader.numRows = 0;
    openSectionHeader.selected = NO;
    openSectionHeader = sectionHeaderView;

    [self.tableView beginUpdates];
    [self.tableView insertRowsAtIndexPaths:pathsToOpen withRowAnimation:insertAnimation];
    [self.tableView deleteRowsAtIndexPaths:pathsToClose withRowAnimation:deleteAnimation];
    [self.tableView endUpdates];
    [self.tableView scrollToRowAtIndexPath:[pathsToOpen objectAtIndex:0]  atScrollPosition:UITableViewScrollPositionTop animated:YES];
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T17:30:37.380

据我所知，返回已使用的剖面视图时会出现问题。代替：

```
- (UIView *)tableView:(UITableView*)tableView viewForHeaderInSection:(NSInteger)section
{
    return [self.sectionHeaderViews objectAtIndex:section];
} 
```

如果我每次都创建一个新视图，我不会遇到问题：

```
- (UIView *)tableView:(UITableView*)tableView viewForHeaderInSection:(NSInteger)section{
    SectionHeaderView *sectionHeaderView = [self.tableView dequeueReusableCellWithIdentifier:SectionHeaderView_NibName];
    sectionHeaderView.textLabel.text = [NSString stringWithFormat:@"Section %d", section];

    UITapGestureRecognizer *tapRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:sectionHeaderView action:@selector(handleTap:)];
    [sectionHeaderView addGestureRecognizer:tapRecognizer];
    sectionHeaderView.section = section;
    sectionHeaderView.delegate = self;
    return sectionHeaderView;
} 
```

这可能是因为您正在使用`[self.tableView dequeueReusableCellWithIdentifier:SectionHeaderView_NibName];`创建节标题并将它们保存在一个数组中，我不认为 UITableViewCell 是为此创建的，但我不确定。您可能需要考虑前面的 UITableViewCell 用于剖面视图，而是使用其他东西（可能是带有 UILabel 的 UIImageView）。或者您可以不将剖面视图存储在数组中......您当前设置代码的方式，您不需要数组并且创建新视图很简单，您无需担心它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-20T11:44:17.717

@AaronHayman 的回答有效（**IMO 的接受和赏金应该归他所有，就目前而言 - 这只是不适合评论！**），但我会更进一步 - 你不应该在部分使用单元格标头，并且您不应该使用出队机制来实质上加载笔尖。

节标题视图不应该是单元格，使用它们代替常规视图可能会产生无法预料的效果，特别是如果它们被 deqeueued - 当您这样做时，表格会保留这些可重用单元格的列表，并回收它们当它们离开屏幕，但您的部分标题*不可*重复使用时，每个部分都有一个。

在您的示例项目中，我将 SectionHeaderView 的超类更改为普通 UIView，并将您的`createSectionHeaderViews`方法更改为直接从那里的 nib 加载：

```
NSMutableArray *sectionHeaderViews = [[NSMutableArray alloc] init];
    UINib *headerNib = [UINib nibWithNibName:SectionHeaderView_NibName bundle:nil];
    for (int i = 0; i < 5; i++)
    {
        SectionHeaderView *sectionHeaderView = [[headerNib instantiateWithOwner:nil options:nil] objectAtIndex:0];
        sectionHeaderView.textLabel.text = [NSString stringWithFormat:@"Section %d", i];

        UITapGestureRecognizer *tapRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:sectionHeaderView action:@selector(handleTap:)];
        [sectionHeaderView addGestureRecognizer:tapRecognizer];
        sectionHeaderView.section = i;
        sectionHeaderView.delegate = self;

        [sectionHeaderViews addObject:sectionHeaderView];
    }
    self.sectionHeaderViews = sectionHeaderViews; 
```

我还从您的 viewDidLoad 中注释掉了 register for reuse 行。这可以防止节标题消失。

# iphone - 如何在 AVAudioPlayer 发布时调试此死锁？

> ID：11515378
> 
> 赞同：1
> 
> 时间：2012-07-17T02:49:23.067
> 
> 标签：iphone, ios, ipad, avaudioplayer, deadlock

在我的 iPhone 应用程序中，我发布了一个 AVAudioPlayer 实例（这样我就可以用不同的 URL 初始化另一个实例）。通常这工作正常，但偶尔我会在主线程上遇到死锁：

```
Thread 1, Queue : com.apple.main-thread
#0  0x357e00d8 in __psynch_mutexwait ()
#1  0x3497d67a in pthread_mutex_lock ()
#2  0x359997a6 in -[AVAudioPlayer privCommonCleanup] ()
#3  0x35999bb6 in -[AVAudioPlayer dealloc] ()
#4  0x3338a174 in _objc_rootRelease () 
```

该应用程序只是停止，不接受任何输入。没有崩溃或任何事情，它只是停止。

它似乎没有与应用程序中的任何其他线程进行交互，但为了完整起见，它们是：

```
Thread 2, Queue : com.apple.libdispatch-manager
#0  0x357d03a8 in kevent ()
#1  0x33b03eaa in _dispatch_mgr_invoke ()
#2  0x33b03bc8 in _dispatch_mgr_thread ()
Thread 3, Queue : (null)
#0  0x357e0cd4 in __workq_kernreturn ()
#1  0x34983f3c in _pthread_wqthread ()
#2  0x34983cd0 in start_wqthread ()
Thread 4 WebThread, Queue : (null)
#0  0x357d0004 in mach_msg_trap ()
#1  0x357d0200 in mach_msg ()
#2  0x3573e3f2 in __CFRunLoopServiceMachPort ()
#3  0x3573d12a in __CFRunLoopRun ()
#4  0x356c04a4 in CFRunLoopRunSpecific ()
#5  0x356c036c in CFRunLoopRunInMode ()
#6  0x37406ca2 in _ZL12RunWebThreadPv ()
#7  0x34989734 in _pthread_start ()
#8  0x349895f0 in thread_start ()
Thread 5, Queue : (null)
#0  0x357e0cd4 in __workq_kernreturn ()
#1  0x34983f3c in _pthread_wqthread ()
#2  0x34983cd0 in start_wqthread ()
Thread 6 AQClient, Queue : (null)
#0  0x357d0004 in mach_msg_trap ()
#1  0x357d0200 in mach_msg ()
#2  0x3573e3f2 in __CFRunLoopServiceMachPort ()
#3  0x3573d12a in __CFRunLoopRun ()
#4  0x356c04a4 in CFRunLoopRunSpecific ()
#5  0x356c036c in CFRunLoopRunInMode ()
#6  0x34e2cb2e in GenericRunLoopThread::Entry(void*) ()
#7  0x34db3ca2 in CAPThread::Entry(CAPThread*) ()
#8  0x34989734 in _pthread_start ()
#9  0x349895f0 in thread_start ()
Thread 7, Queue : (null)
#0  0x357d0004 in mach_msg_trap ()
#1  0x357d0200 in mach_msg ()
#2  0x3573e3f2 in __CFRunLoopServiceMachPort ()
#3  0x3573d12a in __CFRunLoopRun ()
#4  0x356c04a4 in CFRunLoopRunSpecific ()
#5  0x356c036c in CFRunLoopRunInMode ()
#6  0x34af9b74 in -[NSRunLoop(NSRunLoop) runMode:beforeDate:] ()
#7  0x34b13522 in -[NSRunLoop(NSRunLoop) run] ()
#8  0x000c83fe in +[AFURLConnectionOperation networkRequestThreadEntryPoint:] at /Users/hiltonc/Documents/Code/LDSMobileApps/LDSScriptureHeroes/External/LDSMobileAccount/External/AFNetworking/AFNetworking/AFURLConnectionOperation.m:151
#9  0x34b05a80 in -[NSThread main] ()
Thread 8 com.apple.NSURLConnectionLoader, Queue : (null)
#0  0x357d0004 in mach_msg_trap ()
#1  0x357d0200 in mach_msg ()
#2  0x3573e3f2 in __CFRunLoopServiceMachPort ()
#3  0x3573d12a in __CFRunLoopRun ()
#4  0x356c04a4 in CFRunLoopRunSpecific ()
#5  0x356c036c in CFRunLoopRunInMode ()
#6  0x34b05bb8 in +[NSURLConnection(Loader) _resourceLoadLoop:] ()
#7  0x34b05a80 in -[NSThread main] ()
Thread 12 com.apple.CFSocket.private, Queue : (null)
#0  0x357e0570 in select$DARWIN_EXTSN ()
#1  0x35742640 in __CFSocketManager ()
#2  0x34989734 in _pthread_start ()
#3  0x349895f0 in thread_start () 
```

我真的不知道如何深入了解这个问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T13:14:00.753

释放一个并在委托调用中替换它肯定会导致这种类型的问题。基本上你想运行（在 ARC 下）：

```
avPlayer.delegate = nil
[avPlayer stop];
avPlayer = nil; //overkill
avPlayer = [AVPlayer alloc] init....
avPlayer .... 
```

如果您发现需要在委托方法中执行上述操作，则只需将上述代码包装在一个块中并将其分派到主队列（我假设 avPlayer 是一个 ivar 或属性）。

# jquery - jQuery $.ajax POST 多选选择

> ID：11515379
> 
> 赞同：1
> 
> 时间：2012-07-17T02:49:28.420
> 
> 标签：jquery, ajax, multiple-select

我有一个多项选择作为我的输入表单的一部分，我想通过 jQuery AJAX 提交它的选定值。

我尝试使用以下语法。

```
$('#multipleselect').val().join('|'); 
```

那行得通，但我遇到的问题是用户不需要从多项选择中选择任何内容。如果他们不这样做，我会收到错误消息，因为您无法加入空对象。

有什么建议么？

另请记住，还有其他值正在提交。例如：

```
data: "name=" + $("#name").val() + "&multipleselect=" + $("#multipleselect").val().join('|'); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-17T03:02:04.553

您可以使用[序列化](http://api.jquery.com/serialize/)方法：

> 将一组表单元素编码为字符串以进行提交。

```
var data = $('form').serialize() 
```

# javascript - 为什么“element.innerHTML+=”代码不好？

> ID：11515383
> 
> 赞同：60
> 
> 时间：2012-07-17T02:50:00.500
> 
> 标签：javascript, html, innerhtml, anti-patterns

我被告知不要使用`element.innerHTML += ...`这样的附加内容：

```
var str = "<div>hello world</div>";
var elm = document.getElementById("targetID");

elm.innerHTML += str; //not a good idea? 
```

它有什么问题？，我还有什么其他选择？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-07-17T02:52:23.850

每次`innerHTML`设置时，都必须解析 HTML、构建 DOM 并将其插入到文档中。这需要时间。

例如，如果`elm.innerHTML`有数千个 div、表格、列表、图像等，那么调用`.innerHTML += ...`将导致解析器重新解析*所有这些内容*。这也可能破坏对已构建的 DOM 元素的引用并导致其他混乱。实际上，您要做的就是在末尾附加一个新元素。

最好只打电话`appendChild`：

```
var newElement = document.createElement('div');
newElement.innerHTML = '<div>Hello World!</div>';
elm.appendChild(newElement);​​​​​​​​​​​​​​​​ 
```

这样，现有的内容`elm`就不会被再次解析。

**注意：** [某些] 浏览器可能足够聪明，可以优化`+=`操作符而不重新解析现有内容。我没有研究过这个。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2015-11-30T09:40:23.173

是的，`elm.innerHTML += str;`这是一个非常糟糕的主意。
用作`elm.insertAdjacentHTML( 'beforeend', str )`完美的替代品。

典型的“浏览器必须重建 DOM”的答案确实不能解决这个问题：

1.  首先，浏览器需要遍历 elm 下的每个元素，它们的每个属性，以及它们的所有文本、注释和流程节点，并将它们转义以构建一个字符串。

2.  然后你有一个长字符串，你附加到它。这一步没问题。

3.  第三，当您设置innerHTML 时，浏览器必须删除它刚刚经过的所有元素、属性和节点。

4.  然后它解析字符串，从它刚刚销毁的所有元素、属性和节点构建，以创建一个几乎相同的新 DOM 片段。

5.  最后它附加新节点，浏览器必须布局整个事情。这可能是可以避免的（参见下面的替代方案），但即使附加节点需要布局，旧节点也会缓存其布局属性，而不是从新节点重新计算。

6.  但它还没有完成！浏览器还必须通过扫描*所有*javascript 变量来回收旧节点。

问题：

*   某些属性可能不会被 HTML 反映，例如 的当前值`<input>`将丢失并重置为 HTML 中的初始值。

*   如果您在旧节点上有任何事件处理程序，它们将被销毁，您必须重新附加所有它们。

*   如果您的 js 代码引用了任何旧节点，它们不会被销毁，而是会被孤立。它们属于文档，但不再位于 DOM 树中。当您的代码访问它们时，可能不会发生任何事情，或者可能会引发错误。

*   这两个问题都意味着它对 js 插件不友好——插件可能会附加处理程序，或者保留对旧节点的引用并导致内存泄漏。

*   如果您养成使用 innerHTML 进行 DOM 操作的习惯，您可能会意外更改属性或做其他您不想做的事情。

*   您拥有的节点越多，效率就越低，电池电量就越多。

简而言之，它效率低下，容易出错，简直是懒惰和无知。

* * *

**最好的选择是[`Element.insertAdjacentHTML`](https://developer.mozilla.org/en-US/docs/Web/API/Element/insertAdjacentHTML)**，我没有看到其他答案提到：

`elm.insertAdjacentHTML( 'beforeend', str )`

几乎相同的代码，没有 innerHTML 的问题。没有重建，没有处理程序丢失，没有输入重置，内存碎片更少，没有坏习惯，没有手动元素创建和分配。

它允许您在一行中将 html 字符串注入元素，包括属性，甚至允许您注入复合元素和多个元素。它的速度得到了[优化](https://hacks.mozilla.org/2011/11/insertadjacenthtml-enables-faster-html-snippet-injection/)——在 Mozilla 的测试中它快了*150*倍。

如果有人告诉你它不是跨浏览器，它非常有用，它是 HTML5[标准](https://w3c.github.io/DOM-Parsing/#widl-Element-insertAdjacentHTML-void-DOMString-position-DOMString-text)并且在[所有浏览器](http://caniuse.com/#feat=insertadjacenthtml)上都可用。

> 永远不要再写`elm.innerHTML+=`了。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2019-05-03T13:35:43.233

## 短的

如果您将`innerHTML += ...`（更新内容）更改为`innerHTML = ...`（重新生成内容），那么您将获得**非常快的代码**。看起来最慢的部分`+=`是将 DOM 内容作为字符串读取（不将字符串转换为 DOM）

使用的缺点`innerHTML`是您会丢失旧的内容事件处理程序 - 但是您可以使用标签参数来省略它，例如`<div onclick="yourfunc(event)">`这在小型项目中是[可以接受的](https://stackoverflow.com/a/54769527/860099)

## 长

[我在 Chrome、Firefox 和 Safari（ 2019](https://jsperf.com/inner-html-perf-test/7)年 5 月）上进行了性能测试（您可以在您的机器上运行它们，但请耐心等待 - 大约需要 5 分钟）

[![在此处输入图像描述](../Images/68a2105446fd1a0f14e70eff6654f554.png)](https://i.stack.imgur.com/jJcks.png)

```
function up() {
  var container = document.createElement('div');
  container.id = 'container';
  container.innerHTML = "<p>Init <span>!!!</span></p>"
  document.body.appendChild(container);
}

function down() {
  container.remove()
}

up();

// innerHTML+=
container.innerHTML += "<p>Just first <span>text</span> here</p>";
container.innerHTML += "<p>Just second <span>text</span> here</p>";
container.innerHTML += "<p>Just third <span>text</span> here</p>";

down();up();

// innerHTML += str
var s='';
s += "<p>Just first <span>text</span> here</p>";
s += "<p>Just second <span>text</span> here</p>";
s += "<p>Just third <span>text</span> here</p>";
container.innerHTML += s;

down();up();

// innerHTML = innerHTML+str
var s=container.innerHTML+'';
s += "<p>Just first <span>text</span> here</p>";
s += "<p>Just second <span>text</span> here</p>";
s += "<p>Just third <span>text</span> here</p>";
container.innerHTML = s;

down();up();

// innerHTML = str
var s="<p>Init <span>!!!</span></p>";
s += "<p>Just first <span>text</span> here</p>";
s += "<p>Just second <span>text</span> here</p>";
s += "<p>Just third <span>text</span> here</p>";
container.innerHTML = s;

down();up();

// insertAdjacentHTML str
var s='';
s += "<p>Just first <span>text</span> here</p>";
s += "<p>Just second <span>text</span> here</p>";
s += "<p>Just third <span>text</span> here</p>";
container.insertAdjacentHTML("beforeend",s);

down();up();

// appendChild
var p1 = document.createElement("p");
var s1 = document.createElement("span"); 
s1.appendChild( document.createTextNode("text ") );
p1.appendChild( document.createTextNode("Just first ") );
p1.appendChild( s1 );
p1.appendChild( document.createTextNode(" here") );
container.appendChild(p1);

var p2 = document.createElement("p");
var s2 = document.createElement("span"); 
s2.appendChild( document.createTextNode("text ") );
p2.appendChild( document.createTextNode("Just second ") );
p2.appendChild( s2 );
p2.appendChild( document.createTextNode(" here") );
container.appendChild(p2);

var p3 = document.createElement("p");
var s3 = document.createElement("span"); 
s3.appendChild( document.createTextNode("text ") );
p3.appendChild( document.createTextNode("Just third ") );
p3.appendChild( s3 );
p3.appendChild( document.createTextNode(" here") );
container.appendChild(p3);

down();up();

// insertAdjacentHTML
container.insertAdjacentHTML("beforeend","<p>Just first <span>text</span> here</p>");
container.insertAdjacentHTML("beforeend","<p>Just second <span>text</span> here</p>");
container.insertAdjacentHTML("beforeend","<p>Just third <span>text</span> here</p>");

down();up();

// appendChild and innerHTML
var p1 = document.createElement('p');
p1.innerHTML = 'Just first <span>text</span> here';
var p2 = document.createElement('p');
p2.innerHTML = 'Just second <span>text</span> here';
var p3 = document.createElement('p');
p3.innerHTML = 'Just third <span>text</span> here';
container.appendChild(p1);
container.appendChild(p2);
container.appendChild(p3);
```

```
b {color: red}
```

```
<b>This snippet NOT test anythig - only presents code used in tests</b>
```

* * *

*   对于所有浏览器，这`innerHTML +=`是最慢的解决方案。
*   chrome 最快的解决方案`appendChild`- 它比第二个快速解决方案快约 38%，但它非常不方便。令人惊讶的是，Firefox`appendChild`比`innerHTML =`.
*   我们获得的第二个快速解决方案和类似的[`insertAdjacentHTML str`](https://developer.mozilla.org/en-US/docs/Web/API/Element/insertAdjacentHTML)性能`innerHTML = str`
*   如果我们仔细观察大小写`innerHTML = innerHTML +str`并与之进行比较，`innerHTML = str`看起来最慢的部分`innerHTML +=`是将DOM 内容作为字符串**读取**（不是将字符串转换为 DOM）
*   如果您想更改 DOM 树，则生成第一个完整字符串（使用 html）并仅更新/重新生成 DOM**一次**
*   混合实际上比纯`appendChild`慢`innerHTML=``innerHTML=`

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-07-17T02:58:50.110

另一种选择是`.createElement()`,`.textContent`和`.appendChild()`。`+=`如果您要处理大量数据，则附加只是一个问题。

**演示：http:** [//jsfiddle.net/ThinkingStiff/v6WgG/](http://jsfiddle.net/ThinkingStiff/v6WgG/)

### 脚本

```
var elm = document.getElementById( 'targetID' ),
    div = document.createElement( 'div' );
div.textContent = 'goodbye world';
elm.appendChild( div ); 
```

### HTML

```
<div id="targetID">hello world</div> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-17T02:54:00.240

如果用户使用的是旧版本的 IE（或者也可能是新版本的 IE，还没有尝试过），a 上的 innerHTML`td`会导致问题。IE中的表格元素是只读的，tsk tsk tsk。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-04-03T22:51:02.367

我刚刚学到了为什么 innerHTML 不好的艰难方法，在下面的代码中，当您设置 innerHTML chrome 丢失 onclick 事件[jsFiddle](https://jsfiddle.net/706gwu9t/)

```
var blah = document.getElementById('blah');
var div = document.createElement('button');
div.style['background-color'] = 'black';
div.style.padding = '20px;';
div.style.innerHTML = 'a';
div.onclick = () => { alert('wtf');};

blah.appendChild(div);

// Uncomment this to make onclick stop working
blah.innerHTML += ' this is the culprit';

<div id="blah">
</div> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-17T02:56:25.800

Mike 的答案可能更好，但另一个考虑因素是您正在处理字符串。JavaScript 中的字符串连接可能非常慢，尤其是在一些较旧的浏览器中。如果您只是连接来自 HTML 的小片段，那么它可能并不明显，但如果您在页面的主要部分重复附加某些内容，您很可能会在浏览器中看到明显的暂停。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-02-26T10:34:03.283

“element.innerHTML+=" 是错误代码的另一个原因是因为`innerHTML`最近发现直接更改属性在原则上是不安全的，现在这反映在例如[Mozilla 的警告中](https://developer.mozilla.org/en-US/docs/Web/API/Element/innerHTML)。

这是一个不使用`innerHTML`属性或`insertAdjacentHTML`方法的 Javascript 安全/XSS 验证安全/证明实际示例。一些 htmlElement 的内容被更新并替换为新的 HTML 内容：

```
const parser = new DOMParser(),
      tags = parser.parseFromString('[some HTML code]'), `text/html`).body.children, 
      range = document.createRange();
range.selectNodeContents(htmlElement);
range.deleteContents();
for (let i = tags.length; i > 0; i--)
{
     htmlElement.appendChild(tags[0]); 
     // latter elements in HTMLCollection get automatically emptied out with each use of
     // appendChild method, moving later elements to the first position (0), so 'tags' 
     // can not be walked through normally via usual 'for of' loop
} 
```

但是，解析器生成的 DOM 对于您需要插入[可能最终出现在 DOM 中但未执行的脚本节点](https://stackoverflow.com/questions/22945884/domparser-appending-script-tags-to-head-body-but-not-executing/)的情况可能太安全了。在这种情况下，可能需要使用此方法：

`const fragment = document.createRange().createContextualFragment('[some HTML code]');`

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-03-24T19:40:40.803

一种方法（但未经性能测试）：（受 DDRRSS 响应的启发）

```
 const parser = new DOMParser();
    const parsedBody = parser.parseFromString(str, 'text/html').body;
    for(let i = 0; i <= parsedBody.childNodes.length; i++){
        const tag = parsedBody.childNodes[i];
        if(!tag) continue;

        if(tag instanceof Text){
            codeElement.append(document.createTextNode(tag.textContent));
        } else if(tag instanceof HTMLElement){
            codeElement.appendChild(tag.cloneNode(true));
        }}

    codeElement.appendChild(document.createTextNode(parsedBody.innerText)); 
```

# node.js - 如何在 node.js 中跟踪多个文件？

> ID：11515385
> 
> 赞同：1
> 
> 时间：2012-07-17T02:50:21.273
> 
> 标签：node.js, tail

当使用下面的代码tail一个文件时，我们可以成功输出数据。

```
var spawn = require('child_process').spawn;
var filename = '/logs/error.log';
var tail = spawn("tail", ["-f", filename]);
tail.stdout.on("data", function (data) {
    console.log(data);
}); 
```

但是当我将文件名更改为“/logs/*.log”时，我没有找到任何输出。谁能告诉我是什么原因？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T03:00:57.663

在控制台输入`tail -f /logs/*.log`时，扩展`/logs/*.log`由 shell 处理；当`tail`程序得到参数时，它们已经被扩展为`tail -f /logs/error.log /logs/other.log`. 您需要自己为 Node 进行扩展：

```
var fs = require('fs');
var spawn = require('child_process').spawn;
var filename = fs.readdirSync('/logs').map(function(file) { return '/logs/' + file });
var tail = spawn("tail", ["-f"].concat(filename));
tail.stdout.on("data", function (data) {
    console.log(data);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T03:00:05.337

因为既不`tail`也不`spawn`知道如何将带有通配符的文件名扩展为匹配的文件名集合。这通常由 shell 执行，因此在这种情况下，您需要自己在代码中执行此操作。

# javascript - 展开 JAVASCRIPT 菜单

> ID：11515388
> 
> 赞同：0
> 
> 时间：2012-07-17T02:51:11.567
> 
> 标签：javascript, menu, expand

谁能告诉我为什么这个功能掉到了页面的顶部？

任何想法如何解决这个问题？

或者有什么建议可以使用更好的代码？

PS这是ebay模板，相当大的菜单部分。

```
<script type="text/javascript">
startList = function() {

if (document.getElementById) {
    navRoot = document.getElementById("nav");
    for (i=0; i<navRoot.childNodes.length; i++) {
        node = navRoot.childNodes[i];
        if (node.nodeName=="LI") {
        node.onclick=function() {

    this.className = (this.className == "on") ? "off" : "on";

            }
        }
    }
 }
}
window.onload=startList;

</script> 
```

我有一个基本的标记：

```
<ul id="nav">
  <li><a href="#">Home </a></li>
  <li><a href="#">About &gt;</a> 
    <ul>
      <li><a href="#">History </a></li>
      <li><a href="#">Team </a></li>
      <li><a href="#">Offices </a></li>
    </ul>
  </li>
  <li><a href="#">Services &gt;</a> 
    <ul>
      <li><a href="#">Web Design </a></li>
      <li><a href="#">Internet Marketing </a></li>
      <li><a href="#">Hosting </a></li>
      <li><a href="#">Domain Names </a></li>
      <li><a href="#">Broadband </a></li>
    </ul>
  </li>
  <li><a href="#">Contact Us &gt;</a> 
    <ul>
      <li><a href="#">United Kingdom</a></li>
      <li><a href="#">France</a></li>
      <li><a href="#">USA</a></li>
      <li><a href="#">Australia</a></li>
    </ul>
  </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T02:54:21.777

你为什么不把它简化一下？你可以试试：

```
<li><a href="javascript:List(this);">Home </a></li> 
```

并将您的 JS 更改为：

```
function List(element)
{
    element.parentNode.className = (element.parentNode.className == "on") ? "off" : "on";
} 
```

这要简单得多。

编辑：或者你只是替换`href="#"`为`href="javascript:return(false);"`. 作为`#`对不存在的锚点的引用，它将带您到页面顶部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T08:18:44.367

在这里，我使用 jQuery 完成了 bin：

1) 首先在 html 标头标签中包含最新的 jquery.js 文件。

2）HTML：

```
<ul id="nav">
  <li>
    <a href="#">
      Home 
    </a>
  </li>
  <li>
    <a href="#">
      About &gt;
    </a>

    <ul>
      <li>
        <a href="#">
          History 
        </a>
      </li>
      <li>
        <a href="#">
          Team 
        </a>
      </li>
      <li>
        <a href="#">
          Offices 
        </a>
      </li>
    </ul>
  </li>
  <li>
    <a href="#">
      Services &gt;
    </a>

    <ul>
      <li>
        <a href="#">
          Web Design 
        </a>
      </li>
      <li>
        <a href="#">
          Internet Marketing 
        </a>
      </li>
      <li>
        <a href="#">
          Hosting 
        </a>
      </li>
      <li>
        <a href="#">
          Domain Names 
        </a>
      </li>
      <li>
        <a href="#">
          Broadband 
        </a>
      </li>
    </ul>
  </li>
  <li>
    <a href="#">
      Contact Us &gt;
    </a>

    <ul>
      <li>
        <a href="#">
          United Kingdom
        </a>
      </li>
      <li>
        <a href="#">
          France
        </a>
      </li>
      <li>
        <a href="#">
          USA
        </a>
      </li>
      <li>
        <a href="#">
          Australia
        </a>
      </li>
    </ul>
  </li>
</ul> 
```

3）CSS样式：

```
ul#nav{
  background-color:#445566;
}
ul li{
  list-style:none;
}
ul li ul{
  background-color:#558888;
}
ul li a{
  color:#fff;
  text-decoration:none;
}
.off ul{
  display:none;
}
.on ul{
  display:block;
} 
```

4）脚本标签中的JQuery：

```
$(function() {
    $("ul li ul").each(function() {
        $(this).parent().addClass('off');
    });
    $("ul li").mouseenter(function() {
        if ($(this).hasClass('off')) {
            $(this).removeClass('off');
            $(this).addClass('on');
        }
    });
    $("ul li").mouseleave(function() {
        if ($(this).hasClass('on')) {
            $(this).removeClass('on');
            $(this).addClass('off');
        }
    });
}); 
```

在 bin 上尝试： http: [//codebins.com/bin/4ldqpal](http://codebins.com/bin/4ldqpal)

# c - 在 C 中实现 shell 并需要帮助处理输入/输出重定向

> ID：11515399
> 
> 赞同：20
> 
> 时间：2012-07-17T02:53:27.810
> 
> 标签：c, linux, shell

### 第二轮

在阅读了一些答案后，我修改后的代码是：

```
int pid = fork();

if (pid == -1) {
    perror("fork");
} else if (pid == 0) {   

    if (in) { //if '<' char was found in string inputted by user
        int fd0 = open(input, O_RDONLY, 0);
        dup2(fd0, STDIN_FILENO);
        close(fd0);
        in = 0;
    }

    if (out) { //if '>' was found in string inputted by user
        int fd1 = creat(output, 0644);
        dup2(fd1, STDOUT_FILENO);
        close(fd1);
        out = 0;
    }   

    execvp(res[0], res);
    perror("execvp");
    _exit(1);
} else {
    waitpid(pid, 0, 0);
    free(res);
} 
```

它可以工作，但似乎没有重新连接标准输出或类似的东西。这是执行：

```
SHELL$ cat > file
hello, world
this is a test
SHELL$ cat < file //no output
SHELL$ ls //no output 
```

'<' 和 '>' 都可以工作，但是执行后没有输出。

* * *

### 第1轮

一段时间以来，我一直在用 C 编写一个相对简单的 shell，但在实现输入 (<) 和输出 (>) 重定向时遇到了麻烦。帮我找出以下代码中的问题：

```
int fd;
int pid = fork();
int current_out;

if (in) { //if '<' char was found in string inputted by user
    fd = open(input, O_RDONLY, 0);
    dup2(fd, STDIN_FILENO);
    in = 0;
    current_out = dup(0);
}

if (out) { //if '>' was found in string inputted by user
    fd = creat(output, 0644);
    dup2(fd, STDOUT_FILENO);
    out = 0;
    current_out = dup(1);
}

if (pid == -1) {
    perror("fork");
} else if (pid == 0) {       
    execvp(res[0], res);
    perror("execvp");
    _exit(1);
} else {
    waitpid(pid, 0, 0);
    dup2(current_out, 1);
    free(res);
} 
```

我可能有一些不必要的材料，因为我一直在尝试不同的东西来让它发挥作用。我不确定出了什么问题。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-17T08:00:55.333

重定向后打开的文件描述符太多。让我们剖析这两段：

```
if (in) { //if '<' char was found in string inputted by user
    fd = open(input, O_RDONLY, 0);
    dup2(fd, STDIN_FILENO);
    in = 0;
    current_in = dup(0);  // Fix for symmetry with second paragraph
}

if (out) { //if '>' was found in string inputted by user
    fd = creat(output, 0644);
    dup2(fd, STDOUT_FILENO);
    out = 0;
    current_out = dup(1);
} 
```

我将是慈善的，忽略你忽略错误的事实。但是，您需要对系统调用进行错误检查。

在第一段中，您打开一个文件并在变量中捕获文件描述符（很可能是 3）`fd`。然后将文件描述符复制到标准输入 ( `STDIN_FILENO`) 上。但请注意，文件描述符 3 仍处于打开状态。然后你做一个`dup(0)`（为了一致性，应该是`STDIN_FILENO`），得到另一个文件描述符，也许是 4。所以你有文件描述符 0、3 和 4 指向同一个文件（并且，实际上，相同的打开文件描述 - 注意打开的文件描述不同于打开的文件描述符）。如果您的意图`current_in`是保留（父）shell 的标准输入，则必须`dup()`在执行`dup2()`覆盖输出。但是，最好不要更改父 shell 的文件描述符；它比重新复制文件描述符的开销更少。

然后您或多或少地重复第二段中的过程，首先覆盖文件描述符 3 的唯一记录，该记录通过`fd = creat(...)`调用打开但获得一个新的描述符，可能是 5，然后将其复制到标准输出中。然后你做一个`dup(1)`，产生另一个文件描述符，也许是 6。

因此，您将主 shell 的标准输入和标准输出重定向到文件（并且无法将它们恢复为原始值）。因此，您的第一个问题是您正在执行重定向`fork()`；你应该在之后做`fork()`——尽管当你在进程之间进行管道时，你需要在分叉之前创建管道。

您的第二个问题是您需要关闭过多的文件描述符，其中一个您不再有参考。

因此，您可能需要：

```
if ((pid = fork()) < 0)
    ...error...
else if (pid == 0)
{
    /* Be childish */
    if (in)
    {
        int fd0 = open(input, O_RDONLY);
        dup2(fd0, STDIN_FILENO);
        close(fd0);
    }

    if (out)
    {
        int fd1 = creat(output , 0644) ;
        dup2(fd1, STDOUT_FILENO);
        close(fd1);
    }
    ...now the child has stdin coming from the input file, 
    ...stdout going to the output file, and no extra files open.
    ...it is safe to execute the command to be executed.
    execve(cmd[0], cmd, env);   // Or your preferred alternative
    fprintf(stderr, "Failed to exec %s\n", cmd[0]);
    exit(1);
}
else
{
    /* Be parental */
    ...wait for child to die, etc...
} 
```

在您执行任何此操作之前，您应该确保您已经刷新了 shell 的标准 I/O 通道，可能是使用`fflush(0)`，这样如果分叉的子进程由于问题而写入标准错误，则不会有多余的重复输出。

另请注意，`open()`应检查各种调用。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-09-20T20:59:43.883

重定向后打开的文件描述符太多。您需要的代码是这个。

```
 if (pid == 0)
{          /* for the child process:         */

    // function for redirection ( '<' , '>' )

    int fd0,fd1,i,in=0,out=0;
    char input[64],output[64];

    // finds where '<' or '>' occurs and make that argv[i] = NULL , to ensure that command wont't read that

    for(i=0;argv[i]!='\0';i++)
    {
        if(strcmp(argv[i],"<")==0)
        {        
            argv[i]=NULL;
            strcpy(input,argv[i+1]);
            in=2;           
        }               

        if(strcmp(argv[i],">")==0)
        {      
            argv[i]=NULL;
            strcpy(output,argv[i+1]);
            out=2;
        }         
    }

    //if '<' char was found in string inputted by user
    if(in)
    {   

        // fdo is file-descriptor
        int fd0;
        if ((fd0 = open(input, O_RDONLY, 0)) < 0) {
            perror("Couldn't open input file");
            exit(0);
        }           
        // dup2() copies content of fdo in input of preceeding file
        dup2(fd0, 0); // STDIN_FILENO here can be replaced by 0 

        close(fd0); // necessary
    }

    //if '>' char was found in string inputted by user 
    if (out)
    {

        int fd1 ;
        if ((fd1 = creat(output , 0644)) < 0) {
            perror("Couldn't open the output file");
            exit(0);
        }           

        dup2(fd1, STDOUT_FILENO); // 1 here can be replaced by STDOUT_FILENO
        close(fd1);
    }

    execvp(*argv, argv);
    perror("execvp");
    _exit(1);

    // another syntax
    /*      if (!(execvp(*argv, argv) >= 0)) {     // execute the command  
            printf("*** ERROR: exec failed\n");
            exit(1);
     */ 
}

    else if((pid) < 0)
    {     
        printf("fork() failed!\n");
        exit(1);
    }

    else {                                  /* for the parent:      */

        while (!(wait(&status) == pid)) ; // good coding to avoid race_conditions(errors) 
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-17T03:11:55.793

这是正在发生的事情。在您调用之后`fork()`，有两个进程正在执行，它们是原始进程的副本。不同之处在于其返回值`fork()`存储在`pid`.

然后两个进程（shell 和子进程）将它们的标准输入和标准输出重定向到相同的文件。我认为您试图将以前的 fd 保存在 中`current_out`，但正如 Seth Robertson 指出的那样，这目前不起作用，因为正在保存错误的文件描述符。父级还恢复其标准输出，但不恢复标准输入。

你可以修复这个错误，但你可以做得更好。您实际上不必重定向父母的输出，只需重定向孩子的输出。所以简单地先检查一下`pid`。然后也不需要恢复任何文件描述符。

# php - 从函数调用非全局变量？

> ID：11515404
> 
> 赞同：1
> 
> 时间：2012-07-17T02:53:49.873
> 
> 标签：php, function, variables, joomla, global

在开发 Joomla! 插件，我遇到了一些非常有趣的东西。其中一个事件没有返回值，但它从函数内部调用变量。先验知识告诉我，这只有在函数内部的变量是全局的时才有效，但调度程序能够从函数外部调用变量。

**编辑：我刚刚发现从函数内部访问的变量需要是参数之一！这可能是 func_get_params() 还是 call_user_func()？**

调用代码：

```
$instance = JDispatcher::getInstance();
$instance->trigger(onJoomCalledEvent, array(&$link, $other_params)); 
```

插件（片段）：

```
class plgMyPlugin extends JPlugin{

    onJoomCalledEvent($link, $other_params){
        $link = "Some Value Here";
        return false;
    }
} 
```

此函数返回 false，但不知何故，应用程序 (Joomla!) 能够提取 $link 的值。这是怎么做到的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T00:15:33.910

插件定义是否如下所示：

```
class plgMyPlugin extends JPlugin{

    onJoomCalledEvent(&$link, $other_params){
        $link = "Some Value Here";
        return false;
    }
} 
```

Than it's [pass by reference](http://php.net/manual/en/language.references.pass.php). If it's indeed the way you posted above than it's call time pass by reference which is deprecated and emits a warning starting with PHP 5.3.

# c# - C# - 表单用户按钮单击，获取用户单击的下一个窗口

> ID：11515411
> 
> 赞同：1
> 
> 时间：2012-07-17T02:54:45.293
> 
> 标签：c#, winforms

这不应该是一个困难的问题，但是很难用谷歌搜索这个问题并理解这个想法。

问题很简单：我有一个窗口窗体，用户按下一个按钮，然后，它将等待用户单击另一个窗口。它存储选定的窗口信息以供以后操作（特别是尺寸）。

按下按钮后，如何获取下一个用户单击的活动窗口？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T03:46:12.993

您需要获取前景窗口。

```
[DllImport("user32.dll")]
static extern IntPtr GetForegroundWindow();

[DllImport("user32.dll", SetLastError = true)]
static extern bool GetWindowRect(IntPtr hWnd, out Rectangle lpRect); 

Rect rect = new Rect ();
GetWindowRect(GetForegroundWindow(), out rect);

//calculate width and height from rect

using (Bitmap bitmap = new Bitmap(width, height))
{
    using (Graphics g = Graphics.FromImage(bitmap))
    {
        Size size = new System.Drawing.Size(width, height);
        g.CopyFromScreen(new Point(rect.Left, rect.Top), Point.Empty, size);
    }
    bitmap.Save("C://test.jpg", ImageFormat.Jpeg);
}

[StructLayout(LayoutKind.Sequential)]
public struct Rect {
    public int Left;
    public int Top;
    public int Right;
    public int Bottom;
} 
```

我在 SO 的这两个答案中找到了大部分代码。修改它以适合您的问题

[捕捉窗口](https://stackoverflow.com/questions/1163761/c-sharp-capture-screenshot-of-active-window)

[查找窗口宽度和高度](https://stackoverflow.com/questions/637819/find-window-height-width)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T19:00:55.457

对您的问题感兴趣，我创建了这个小屏幕捕获应用程序。

它有奇怪的解决方法：

1.  用于在 winform 外捕获鼠标位置的计时器很奇怪，但比使用[Global System Hooks](http://www.codeproject.com/Articles/6362/Global-System-Hooks-in-NET)更容易实现。您可以尝试使用链接中的 lib 或自己实现它。您不需要使用 Timer，更重要的是您可以放弃这种不断重新激活表单。
2.  我在 SE 信息中的某处找到了关于覆盖 CreateParams 的信息，但我再也找不到指向它的链接，它允许您单击槽形式（我认为并非所有添加的参数都是必需的，但正如我所说，我失去了链接 :)）。
3.  仅捕获窗口的可见部分+所有与其重叠的窗口（可能是因为您有一个 windowHandle 到它，您可能会尝试以某种方式显示/激活它）。
4.  对于某些窗口，它会在窗口内获取控件。
5.  提供的应用程序可能非常不专业和不安全，可能会炸毁您的计算机，所以要小心;P

    使用的表格是无边界的，不透明度设置为 80%。

![用过的形式](../Images/6ae5375b0bc2f94f6d8e4e0c5eb2158e.png)

```
使用系统；
使用 System.Collections.Generic；
使用 System.ComponentModel；
使用 System.Data；
使用 System.Drawing；
使用 System.Linq；
使用 System.Text；
使用 System.Windows.Forms；
使用 System.Runtime.InteropServices；命名空间窗口信息
{
    公共部分类 CurrentWindow ：表格
    {
        矩形 GDIrect = new Rectangle(0, 0, 100, 100);
        [DllImport("user32.dll")]
        公共静态外部 IntPtr WindowFromPoint(Point lpPoint);
        [DllImport("user32.dll")]
        public static extern bool GetCursorPos(out Point lpPoint);
        [DllImport("user32.dll")]
        私有静态外部 IntPtr GetWindowRect(IntPtr hWnd, ref Rect rect);
        [DllImport("user32.dll")]
        静态外部 IntPtr GetForegroundWindow();
        [StructLayout(LayoutKind.Sequential)]
        公共结构矩形
        {
            公共 int 左;
            公共int顶部；
            公共 int 权利；
            公共 int 底部；
        }
        公共当前窗口（）
        {
            初始化组件（）；
        }
        受保护的覆盖 CreateParams CreateParams
        {
            得到
            {
                CreateParams baseParams = base.CreateParams;
                baseParams.ExStyle |= (int)(
                  0x00080000 |
                  0x08000000 |
                  0x00000080 |
                  0x00000020
                  );
                返回基本参数；
            }
        }
        公共静态 IntPtr GetWindowUnderCursor()
        {
            点 ptCursor = new Point();
            GetCursorPos(out ptCursor);
            返回 WindowFromPoint(ptCursor);
        }
        公共位图 CaptureScreen()
        {
            var result = new Bitmap(this.DisplayRectangle.Width, this.DisplayRectangle.Height);
            使用 (var g = Graphics.FromImage(result))
            {
                g.CopyFromScreen(this.Location.X, this.Location.Y, 0, 0, this.DisplayRectangle.Size);
            }
            返回结果；
        }
        private void timer1_Tick(对象发送者，EventArgs e)
        {
            IntPtr windowHandle = GetWindowUnderCursor();
            矩形矩形 = 新矩形（）；
            GetWindowRect(windowHandle, ref rect);
            GDIrect = new Rectangle(rect.Left, rect.Top, rect.Right - rect.Left, rect.Bottom - rect.Top);

 this.Location = new Point(GDIrect.Left, GDIrect.Top);
            this.Size = GDIrect.Size;
            this.Activate();
        }
        private void CurrentWindow_KeyPress(object sender, KeyPressEventArgs e)
        {
            if (e.KeyChar == 'c')
            {
                this.Visible = false;
                Bitmap bmp = CaptureScreen();
                bmp.Save(Application.StartupPath + "\\example.png");
                this.Visible = true;
            }
            else if (e.KeyChar == 'x')
            {
                this.Close();
            }
        }
    }
} 
```

你可以将它添加到您的应用程序并在单击按钮后运行，它应该可以工作，但我只单独测试过它。祝你好运 ：）。

# events - onmouseup 不喜欢与渐变组

> ID：11515412
> 
> 赞同：1
> 
> 时间：2012-07-17T02:55:08.820
> 
> 标签：events, svg, gradient, onmouseup

我制作了这个小国旗图标。

[http://www.trjps.co.uk/image_store_old/estonia_flag.svg](http://www.trjps.co.uk/image_store_old/estonia_flag.svg)

鼠标悬停时，它会亮起。当您向下单击时，它会变亮（这是通过使叠加渐变可见来完成的），并且它也会移动一点。

一切都由组标签中的一组mouseon、mouseouts等控制

当鼠标按下然后移动时会出现问题。指针一碰到覆盖层，就会发生 mouseup 事件。指针从未离开该组，因为覆盖在同一组中。

我什至尝试将所有渐变停靠点放在组中，但没有任何变化。

我忽略了什么吗？非常感谢任何帮助或提示。

天然气

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T05:06:33.323

也许这是一个浏览器错误。如果该元素是事件元素的子元素并且允许事件传播，则该元素的突然*鼠标块*不应触发 mouseup。

`fill-opacity`您可以通过操作而不是解决此问题`visibility`：

```
 //remove  .setAttribute('visiblity', ...)
   onmousedown="getElementById('flash').setAttribute('fill-opacity',1)"
   onmouseup="getElementById('flash').setAttribute('fill-opacity',0)" 
```

而你的`#flash`元素...

```
<!--Removed visibility="hidden" added fill-opacity="1" and removed fill-opacity:0 from styles -->
<path
     style="fill:url(#radialGradient3033);fill-rule:nonzero;stroke:#ffffff;stroke-width:1.2529794;stroke-opacity:0"
     d="M 423.65326,432.06998 C 405.51096,436.96285 390.19952,445.00107 368.27826,447.66373 362.06308,452.02659 356.97847,456.99773 353.34076,462.22623 L 353.34076,496.06998 C 359.10138,502.25487 368.35017,506.24285 379.40326,507.60123 401.52711,502.8051 417.56662,493.26432 440.49701,490.66373 445.27742,487.01892 449.28524,482.98308 452.37201,478.78873 L 452.37201,443.19498 C 445.96886,436.83241 435.72653,432.94392 423.65326,432.06998 z"
     id="flash"
     inkscape:connector-curvature="0"
     fill-opacity="1"
 /> 
```

# ruby-on-rails - Rails - 在 2step 向导中导入 CSV 文件

> ID：11515413
> 
> 赞同：0
> 
> 时间：2012-07-17T02:55:19.327
> 
> 标签：ruby-on-rails, ruby-on-rails-3, import, ruby-on-rails-3.2, wizard

我有一个非常具体的问题。我有应用程序，我需要在 CSV 文件中导入数据，这是在上传处理后，然后带有结果的概览页面显示给用户。

我已经有了如何解析 CSV 文件的方法。它工作正常。但它只是一个步骤形式：

1.  新 - 方法和带有表单的 erb 文件

2.  post后处理CSV文件的方法=>并且数据在DB中。

它工作正常，但我还想自动生成一个 CSV 文件，其中包含在首次上传时失败的行。根据此[链接](http://www.funonrails.com/2012/01/csv-file-importexport-in-rails-3.html)，我已经为此编写了方法。但不幸的是，这种方法的用户体验很糟糕。因为，如果您生成带有错误的新 CSV 文件，它只会发送一个由以下方法调用的下载弹出窗口：

```
send_data errCSV, :type => 'text/csv; charset=iso-8859-1; header=present', :disposition => "attachment; filename=#{errFile}.csv" 
```

在第二个 POST 方法之后，我想添加一个重定向到另一个视图，其中将包含诸如“导入概述”标题和错误数、正确行数以及调用此临时可下载文件的方法上的链接。

然后我的问题是，我怎样才能有效地并且不保存 CSV 通过 3 步向导？

**编辑**

```
def upload_csv
 #method which render form
end

def import_csv
 #method implemented logic for parsing CSV
 #POST METHOD
 redirect_to overview_method_view
end

def overview
 #method which could create a overview
end 
```

我需要在 import_csv 和概览之间传递值（假设是一个数组）。我不想保存任何文件。只是考虑使用 Session。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T05:25:49.343

你能指定哪个是你的第二个 POST 方法吗？我认为我没有完全理解这个问题。

顺便说一句，如果您想在请求之间保留信息但不想使用生成的 csv，则必须使用数据库、会话或闪存

**编辑：**

在这种情况下，您可以使用 session，您只需要做：

```
def import_csv
  #Business logic
  session[:csv_info] = ... #What you want to be persisted between request
  redirect_to overview_method_view
end 

def overview
  @whatever = session[:csv_info]
end 
```

希望能帮助到你！

# mysql - 将查询从 mysql 转换为 oracle 时出错

> ID：11515414
> 
> 赞同：0
> 
> 时间：2012-07-17T02:55:21.990
> 
> 标签：mysql, oracle, postgresql, oracle10g

我在我的 web 应用程序中的 mysql 中有四个查询，我试图将它们转换为 oracle 查询。但是，当我尝试运行新查询时，日期时间字符串会中断。有人可以帮我弄清楚我做错了什么吗？

PostreSQL 查询：-

> 插入 o_stat_daily (businesspath,resid,day,value)
> (select businesspath, int8(substring(businesspath from position(':' in businesspath) + 1 for position(']' in businesspath) - position(':' in businesspath) - 1)), date_trunc('day',creationdate) as d, count(*) as c from o_loggingtable where actionverb='launch' and actionobject='node' and businesspath != '' group by businesspath, d);
> 
> 插入 o_stat_weekly (businesspath,resid,week,value)
> (select businesspath, int8(substring(businesspath from position(':' in businesspath) + 1 for position(']' in businesspath) - position(':' in businesspath) - 1)), to_char(creationdate, 'IYYY') || '-' || to_char(creationdate, 'IW') as d, count(*) as c from o_loggingtable where actionverb='launch' and actionobject='node ' and businesspath != '' group by businesspath, d);
> 
> 插入 o_stat_dayofweek (businesspath,resid,day,value)
> (select businesspath, int8(substring(businesspath from position(':' in businesspath) + 1 for position(']' in businesspath) - position(':' in businesspath) - 1)), int8(to_char(creationdate, 'D')) as d, count(*) as c from o_loggingtable where actionverb='launch' and actionobject='node' and businesspath != '' group by businesspath, d );
> 
> 插入 o_stat_hourofday (businesspath,resid,hour,value)
> (select businesspath, int8(substring(businesspath from position(':' in businesspath) + 1 for position(']' in businesspath) - position(':' in businesspath) - 1)), int8(to_char(creationdate, 'HH24')) as d, count(*) as c from o_loggingtable where actionverb='launch' and actionobject='node' and businesspath != '' group by businesspath, d );

甲骨文查询：-

> 插入 o_stat_daily (businesspath,resid,day,value)
> (select businesspath, convert(substr(businesspath, locate(':', businesspath) + 1, locate(']', businesspath) - locate(':', businesspath) - 1), int), convert(creationdate,date) d, count(*) c from o_loggingtable where actionverb='launch' and actionobject='node' and businesspath != '' group by businesspath, d);
> 
> 插入 o_stat_weekly (businesspath,resid,week,value)
> (select businesspath, convert(substr(businesspath, locate(':', businesspath) + 1, locate(']', businesspath) - locate(':', businesspath) - 1), int), year(creationdate)+ '-'+repeat('0',2-length(convert((dayofyear(creationdate)-dayofweek(creationdate))/7,varchar(7))))+ convert((dayofyear(creationdate)-dayofweek(creationdate))/7,varchar(7)) d, count(*) c from o_loggingtable where actionverb='launch' and actionobject='node' and businesspath != '' group by商业路径，d)；
> 
> 插入 o_stat_dayofweek (businesspath,resid,day,value)
> (select businesspath, convert(substr(businesspath, locate(':', businesspath) + 1, locate(']', businesspath) - locate(':', businesspath) - 1), int), dayofweek(creationdate) d, count(*) c from o_loggingtable where actionverb='launch' and actionobject='node' and businesspath != '' group by businesspath, d);
> 
> 插入 o_stat_hourofday (businesspath,resid,hour,value)
> (select businesspath, convert(substr(businesspath, locate(':', businesspath) + 1, locate(']', businesspath) - locate(':', businesspath) - 1), int), hour(creationdate) d, count(*) c from o_loggingtable where actionverb='launch' and actionobject='node' and businesspath != '' group by businesspath, d);

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T09:52:02.980

我没有重写你所有的查询，而是只写了最后一个。

oracle 查询应该是这样的：

```
INSERT INTO o_stat_hourofday (
   businesspath,
   resid,
   hour,
   VALUE
)
SELECT businesspath,
       TO_NUMBER (
          SUBSTR (
             businesspath,
             INSTR(businesspath, ':') + 1,
             INSTR(businesspath, ']') - INSTR(businesspath, ':') - 1
          )
       ),
       TO_NUMBER(TO_CHAR(creationdate, 'HH24')) d,
       COUNT (*) c
  FROM o_loggingtable
 WHERE actionverb = 'launch'
   AND actionobject = 'node'
   AND businesspath IS NOT NULL
 GROUP BY businesspath,
          TO_NUMBER (
             SUBSTR (
                businesspath,
                INSTR(businesspath, ':') + 1,
                INSTR(businesspath, ']') - INSTR(businesspath, ':') - 1
             )
          ), 
          TO_NUMBER(TO_CHAR(creationdate, 'HH24')); 
```

仅供参考，Oracle 无法识别该`HOUR`函数，并且`CONVERT`在 oracle 中将一个字符集转换为另一个字符集，而不是将字符串转换为数字。LOCATE 也不是 Oracle 函数，您需要使用它`INSTR`来查找字符串中的字符。

阅读[TO_CHAR](http://www.techonthenet.com/oracle/functions/to_char.php)（包括日期格式等）、[TO_NUMBER](http://www.techonthenet.com/oracle/functions/to_number.php)和[INSTR](http://www.techonthenet.com/oracle/functions/instr.php)。

希望这对你有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T01:11:36.470

我还添加了其余三个查询。他们都在工作。感谢奥利的帮助。

```
INSERT INTO o_stat_daily (
   businesspath,
   resid,
   DAY,
   VALUE
)
SELECT businesspath,
       TO_NUMBER (
          SUBSTR (
             businesspath,
             INSTR(businesspath, ':') + 1,
             INSTR(businesspath, ']') - INSTR(businesspath, ':') - 1
          )
       ),
       to_date(creationdate)
       d,
       COUNT (*) c
  FROM o_loggingtable
 WHERE actionverb = 'launch'
   AND actionobject = 'node'
   AND businesspath IS NOT NULL
 GROUP BY businesspath,
          TO_NUMBER (
             SUBSTR (
                businesspath,
                INSTR(businesspath, ':') + 1,
                INSTR(businesspath, ']') - INSTR(businesspath, ':') - 1
             )
          ), 
          to_date(creationdate);

INSERT INTO o_stat_weekly (
   businesspath,
   resid,
   WEEK,
   VALUE
)
SELECT businesspath,
       TO_NUMBER (
          SUBSTR (
             businesspath,
             INSTR(businesspath, ':') + 1,
             INSTR(businesspath, ']') - INSTR(businesspath, ':') - 1
          )
       ),
       to_char(creationdate, 'IYYY') || '-' || to_char(creationdate, 'IW') 
       d,
       COUNT (*) c
  FROM o_loggingtable
 WHERE actionverb = 'launch'
   AND actionobject = 'node'
   AND businesspath IS NOT NULL
 GROUP BY businesspath,
          TO_NUMBER (
             SUBSTR (
                businesspath,
                INSTR(businesspath, ':') + 1,
                INSTR(businesspath, ']') - INSTR(businesspath, ':') - 1
             )
          ), 
          to_char(creationdate, 'IYYY') || '-' || to_char(creationdate, 'IW') ;

INSERT INTO o_stat_dayofweek (
   businesspath,
   resid,
   day,
   VALUE
)
SELECT businesspath,
       TO_NUMBER (
          SUBSTR (
             businesspath,
             INSTR(businesspath, ':') + 1,
             INSTR(businesspath, ']') - INSTR(businesspath, ':') - 1
          )
       ),
       TO_NUMBER(TO_CHAR(creationdate, 'D')) d,
       COUNT (*) c
  FROM o_loggingtable
 WHERE actionverb = 'launch'
   AND actionobject = 'node'
   AND businesspath IS NOT NULL
 GROUP BY businesspath,
          TO_NUMBER (
             SUBSTR (
                businesspath,
                INSTR(businesspath, ':') + 1,
                INSTR(businesspath, ']') - INSTR(businesspath, ':') - 1
             )
          ), 
          TO_NUMBER(TO_CHAR(creationdate, 'D')); 
```

# python - Python IndexError：查看if语句时列表索引超出范围

> ID：11515416
> 
> 赞同：0
> 
> 时间：2012-07-17T02:55:48.953
> 
> 标签：python, arrays, list, indexing

我无法克服这个错误。我正在做一个类似于合并排序中的合并的例程。也许我实例化了一些错误。这是代码：

```
def MergeAndCountSplitInv(arr, length):
    left = arr[0:length/2]
    right = arr[length/2+1: length]

    i = 0
    j = 0
    numSplitInv = 0
    newArray = [0] * length
    for k in range(len(arr)):
        if (left[i] < right[j]):
            #newArray.insert(k, left[i])
            newArray.append(left[i])
            i = i + 1
        else: #(right[j] < left[i]
            #newArray[k].insert(k, right[j])
            newArray.append(right[j])
            j = j + 1
            numSplitInv = numSplitInv + (length/2 - i)

    return ReturnValue(newArray, numSplitInv) 
```

错误如下：

`File "InversionCount.py", line 31, in MergeAndCountSplitInv if (left[i] < right[j]): IndexError: list index out of range`

感谢您的任何帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T03:01:04.247

一个问题是您对切片索引的理解。这两行：

```
left = arr[0:length/2]
right = arr[length/2+1: length] 
```

应改为：

```
left = arr[:length/2]
right = arr[length/2:] 
```

包含起始索引，而结束索引是切片中*未*包含的第一个元素，因此要获得完整的分区，您对左侧的结尾使用与右侧的开头相同的索引。

但真正的问题是，你增加`i`并且`j`没有检查你是否已经离开了`left`or的末尾`right`，所以你最终会得到一个索引错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T03:01:15.817

您忘记检查是否已经使用了列表中的所有元素，如果有，请扩展其他元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T03:02:28.210

为了使问题更加明显，请考虑您的列表是否最终是这样的：

```
right = [1, 2, 3, 4]
left = [5, 6, 7, 8] 
```

然后，您将`right`在到达末尾之前附加所有内容`left`- 但您仍将尝试查看是否`right[5] < left[0]`- 这将给出您看到的错误。您需要添加检查任何一个列表何时用尽 - 例如：

```
if i >= len(right):
   newArray.extend(left)
   break 
```

同样的`j >= len(left)`情况。

# android - Android：翻译动画和相对布局

> ID：11515419
> 
> 赞同：2
> 
> 时间：2012-07-17T02:56:16.783
> 
> 标签：android, android-layout, android-animation

我想通过将所有内容移动到它要出现的位置来显示一个视图，然后使其可见（给出它下面的项目只是滑动为它腾出空间的效果）。我目前`TranslateAnimation`在 a 中的视图上使用 a `RelativeLayout`。我的第一个想法是测量我将要显示的视图，并翻译第一个受影响的视图。我的希望是，如果我为一个 View 设置动画，它也会移动布局中依赖于它的所有其他内容。但尝试后，只有带有动画的视图移动。我知道我可以把下面的所有东西都放在一个布局中，然后翻译布局，但是为了布局效率和使流程尽可能通用，

**如何使 View 的所有 RealtiveLayout 依赖项随其移动，或者以其他方式获得所描述的效果？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T06:59:14.623

将动画应用于整个RelativeLayout 或封装在顶部RelativeLayout 内的分组RelativeLayout 中的子组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T07:30:30.747

写一个动画类

```
public class Animate extends Animation implements AnimationListener {
    public int height,width;

    @Override
    public void initialize(int width, int height, int parentWidth,
            int parentHeight) {
        // TODO Auto-generated method stub
        super.initialize(width, height, parentWidth, parentHeight);
        this.width = width;
        this.height = height;
        setDuration(500);
        setFillAfter(true);
        setInterpolator(new LinearInterpolator());
    }

    Camera camera = new Camera();

    @Override
    protected void applyTransformation(float interpolatedTime, Transformation t) {
        // TODO Auto-generated method stub
        super.applyTransformation(interpolatedTime, t);

        Matrix matrix = t.getMatrix();
        camera.save();

        camera.getMatrix(matrix);
        matrix.setTranslate(0, (-height * interpolatedTime));

        matrix.preTranslate(0, -height);
        camera.restore();

    } 
```

用它来动画你的布局

```
View v= new View(); 
// use whatever view you want and set it up
v.startAnimation(new Animate()); 
```

# php - 在搜索中摆脱 %40

> ID：11515423
> 
> 赞同：0
> 
> 时间：2012-07-17T02:56:33.600
> 
> 标签：php, mysql, search, urlencode

我正在尝试使用此代码将电子邮件地址作为搜索关键字返回，以便在表单中搜索时提取搜索结果。但是关键字在浏览器中以 user%40domain.com 的形式发布。我需要它注册为 user@domain.com 以便数据库 mysql 查询可以在数据库中找到它。这是现在的代码，它不起作用。

```
 if (isset($_GET['search']) && tep_not_null($_GET['search'])) {
      $keywords = tep_db_input(tep_db_prepare_input($_GET['search']));
      $search = "where c.customers_lastname like '%" . $keywords . "%' or c.customers_email_address like '%" . urlencode($keywords) . "%'";
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T02:59:27.543

%40 相当于@。它会被转换，因为您使用`urlencode()`. 如果您想在将其显示到页面之前将其转换回来，则相反并使用`urldecode()`.

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T03:03:45.770

[John](https://stackoverflow.com/a/11515435/377270)和TurdPile都有基本的答案——使用——但他们错过了一个*关键*点——你已经完成了所有输入，直接对用户的输入进行了[清理。](https://stackoverflow.com/a/11515434/377270)如果要在此例程中提供 URL 解码，则**必须在对输入进行解码后执行输入清理**。否则，正确清理然后进行 URL 解码的输入可能会引入[SQL 注入攻击](http://en.wikipedia.org/wiki/SQL_injection)。`urldecode()`

 ***切换到[PDO](http://php.net/manual/en/book.pdo.php)以避免不得不考虑输入清理——只需正确使用参数化语句，您就不会编写容易受到注入攻击的程序。***

# javascript - 为什么我不能使用 javascript 显示新图像？

> ID：11515432
> 
> 赞同：0
> 
> 时间：2012-07-17T02:59:18.963
> 
> 标签：javascript

我正在尝试创建一个页面，允许查看者在每次用户单击时查看新图像。这些图像被命名为 0.jpg、1.jpg、2.jpg、3.jpg 和 4.jpg。

但是，图像 URL 在单击时永远不会改变。我还尝试在 Chrome 开发者工具中分析图像，并且控制台没有错误。这是为什么？

这是我的javascript。

```
var imageCount = 5;
var currentIndex = Math.floor(Math.random() * imageCount);

  function loadNewPhoto() {
    currentIndex = (currentIndex + (Math.random() * 3) + 1) % imageCount;
    alert(currentIndex);
    document.getElementById('generatedImage').src = 'images/' + currentIndex + '.jpg';
  }

  // Shuffle order of photos.
  document.onready = function() {
    loadNewPhoto();
    document.getElementById('getMeNewPhotoLink').onclick(function(e) {
      e.preventDefault();
      loadNewPhoto();
    });
  } 
```

和 HTML

```
<a href="#" id="getMeNewPhotoLink">
    <img id="generatedImage" src="images/0.jpg" alt="" />
</a>​ 
```

[http://jsfiddle.net/qLQZf/](http://jsfiddle.net/qLQZf/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T03:11:30.453

得到它在这里工作是你的[演示](http://jsbin.com/uzizur/5/edit#preview)

新的 HTML：

```
<a href="javascript:shuffle()" id="getMeNewPhotoLink" >
    <img id="generatedImage" src="images/0.jpg" alt="" />
</a> 
```

`href`现在是一个 javascript 函数`"#"`，而不是一个更优雅的解决方案

新的 Javascript：

```
var imageCount = 5;
var currentIndex = Math.floor(Math.random() * imageCount);
alert(currentindex);
  function loadNewPhoto() {
    currentIndex = Math.floor((currentIndex + (Math.random() * 3) + 1) % imageCount);//Added Math.floor, else was generating decimal value
    alert(currentIndex);
    document.getElementById('generatedImage').src = 'images/' + currentIndex + '.jpg';
  }

  // Shuffle order of photos, no need of preventdefault, onclick and ready event handling via code.

  function shuffle() {
     loadNewPhoto();
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T03:34:51.693

在您的原始代码中，您错误地分配了`onclick`处理程序。它应该是：

```
document.getElementById('getMeNewPhotoLink').onclick = function(e) {
  e.preventDefault();
  loadNewPhoto();
}; 
```

# javascript - Javascript i（索引，迭代器）：如果用作变量，它是否总是被解释为索引位 置？

> ID：11515436
> 
> 赞同：0
> 
> 时间：2012-07-17T02:59:45.987
> 
> 标签：javascript

```
var names = ["Ringo", "John", "Paul", "George"];

for (var i = 0; i < names.length; i++) {
    alert("Say hello to " + names[i]);
} 
```

在上面的代码中，我假设是最后一块 (names[i]) 使数组的索引发生更改以给我正确的名称。这是真的？到底发生了什么？是什么使索引发生更改，以便更改名称？如果我要为变量使用另一个标签，比如“a”、“b”甚至“计数器”，而不是“i”，它还能工作吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T03:27:06.340

第一部分 `var names = ["Ringo", "John", "Paul", "George"];` 是您的数组定义。您正在加载一个包含 4 个项目的 JavaScript 数组。它们在数组中的索引如下：

```
0 = "Ringo"
1 = "John"
2 = "Paul"
3 = "George" 
```

要在 JS 中单独引用这些项目，您可以这样做：

```
var nameOne = names[0]; //nameOne = "Ringo"
var nameTwo = names[1]; //nameTwo = "John" 
```

代码中的`for`循环逐步遍历数组中的每个项目。`var i = 0`表示我们正在创建一个新变量以用作数组的索引。这很容易是`var a`, `var b`, `var indexOfTheArray`。任何。

下一部分`i < names.length`是导致`for`循环重复直到满足的条件。在这种情况下，它说“只要 的值`i`小于数组的长度就循环`names`”。`array.length`给出数组中的项目总数. 所以`names.length`等于4。

最后一部分是一个特殊的 JS 命令`i++`。这表示“将值加 1 `i`”。

每次`for`循环到达右括号时，它都会增加`i`并评估条件。

在循环内部，`i`表示您正在使用的数组的当前索引。

您可以`names[i]`在循环中使用任意多次，`for`并且在下次到达结束括号并循环返回之前它不会改变。然后`i`将递增，您将在数组中获得下一个值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T03:01:12.537

`i`是一个完全普通的变量。由于循环
中的语句，它会增加。`i++`

您可以使用任何字符串或数值执行数组索引，无论它来自什么。

# c# - 在类之间传递 ManualResetEvent 对象

> ID：11515443
> 
> 赞同：0
> 
> 时间：2012-07-17T03:00:24.617
> 
> 标签：c#, manualresetevent

我的程序包含多个线程，我想使用单个 ManualResetEvent 对象来控制它们。当我创建一个新对象（例如 new ManualResetEvent MRE = new ManualResetEvent(args);）时，我希望所有类都可以访问 MRE，但是将它作为参数不断传递是很麻烦的。将其设为静态会更好吗？或者有没有更有效的方法？-谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-28T08:48:44.557

隐藏依赖项是错误的做法。如果你所有的类都需要同一个 a 的实例，`ManualResetEvent`把它添加为依赖并不麻烦，它就是预期的接口。

对象的构造函数必须显示它所具有的对象的依赖关系。

# android - YouTube 流媒体协议和端口号到不同的设备

> ID：11515445
> 
> 赞同：2
> 
> 时间：2012-07-17T03:00:35.593
> 
> 标签：android, video, streaming, wireshark

我想知道是否有人知道 YouTube 在将视频流式传输到不同客户端时是否使用不同的协议和/或端口号。例如，他们是否有可能使用 HTTP、Mozilla Firefox（或任何其他网络浏览器）的端口 80 以及类似[RTSP](http://en.wikipedia.org/wiki/Real_Time_Streaming_Protocol)的端口 53 来流式传输到 Android 平台？我知道 Android VideoView/MediaPlayer 库支持 HTTP 流，但[这个 SO 线程](https://stackoverflow.com/questions/1007695/streaming-youtube-videos)的答案表明 RTSP 是可能的。

更一般地说，有没有什么好的方法来确定 YouTube、Netflix、ESPN 等视频服务器/提供商使用哪些流协议和端口？我尝试过使用 Wireshark，但我意识到将特定 IP 地址与主机/域名相关联是多么麻烦。此外，Wireshark 似乎没有区分传输层协议和应用层协议（也就是说，对于一些 2 个具有相同源 IP 地址的随机数据包，对于第一个数据包它列出正在使用的协议是 TCP，对于第二个数据包它说它的协议是HTTP）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T05:45:04.507

我认为 Wireshark 是你最好的选择。根据我掌握的捕获情况，我可以说 Netflix 和 Android 2.2、Android 4.0、iOS 4.3.3 和 iOS 5.x 上的 Youtube 应用程序仅使用 HTTP 和 HTTPS（端口 80 和 443）进行通信。不确定这代表了各个应用程序的哪些版本，但所有这些都是在 2011 年和 2012 年捕获的。

要确定您的捕获是否有任何不是 DNS、HTTP 端口 80 或 HTTPS 端口 443 的数据包，请尝试使用如下过滤器。替换`1.2.3.4`为您用于测试的设备的 IP 地址。

```
ip.src==1.2.3.4 && not dns && tcp.dstport != 80  && tcp.dstport!=443 
```

有关开始使用 wireshark 的建议，请参阅此[SO 问题](https://stackoverflow.com/questions/589185/what-are-some-good-wireshark-tutorials)。

# ios5 - ios地图注释出现在错误的地方

> ID：11515446
> 
> 赞同：1
> 
> 时间：2012-07-17T03:00:39.760
> 
> 标签：ios5, mapkit, mkannotation

我正在使用 IOS SDK 5.1 并使用 MapKit 开发应用程序。从 api 检索数据后，我有以下代码在地图上放置注释。

```
- (void)placeAnnotationsOnMap:(NSString *)responseString {

for (id<MKAnnotation> annotation in _mapView.annotations) {
    [_mapView removeAnnotation:annotation];
}
NSData *jsonData = [responseString dataUsingEncoding:NSUTF8StringEncoding];

NSError *e = nil;
NSArray *jsonArray = 
[NSJSONSerialization 
 JSONObjectWithData: jsonData 
 options: kNilOptions
 error: &e];

for(NSArray *cache in jsonArray ){
    for(NSDictionary *item in jsonArray) {
        NSLog(@"Item: %@", item);
        NSString * comment = [item objectForKey:@"comment"];

        NSNumber * latitude = [item objectForKey:@"locationLat"];
        NSNumber * longitude = [item objectForKey:@"locationLong"];
        NSString * numCachers = [item objectForKey:@"numCachers"];
        CLLocationCoordinate2D coordinate;
        coordinate.latitude = latitude.doubleValue;
        coordinate.longitude = longitude.doubleValue; 
        CustomAnnotation *cacheAnnotation = [[CustomAnnotation alloc] initWithTitle:comment numCachers:numCachers coordinate:coordinate];
        [_mapView addAnnotation:cacheAnnotation];
    }

} 
```

}

还有我的 viewForAnnotation 方法。

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation {

static NSString *identifier = @"CustomAnnotation";   
CLLocationCoordinate2D coord = [annotation coordinate];

    MKPinAnnotationView *annotationView = (MKPinAnnotationView *) [_mapView dequeueReusableAnnotationViewWithIdentifier:identifier];
    if (annotationView == nil) {
        annotationView = [[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:identifier];
    } else {
        annotationView.annotation = annotation;
    }

    annotationView.enabled = YES;
    annotationView.canShowCallout = YES;

    return annotationView; 
```

}

问题是注释出现在错误的位置。我目前从我的后端服务返回一个位置，该位置具有华盛顿特区白宫的经纬度。问题是注释出现在中国。

即使我将 lat long 硬编码为 38.8977 、 77.0366 （基本上不是从 json 响应中解析它），它也会出现在中国。

关于我做错了什么有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T04:42:04.243

有趣的是，似乎所有其他位置都可以正常工作。也许在白宫丢针有一些安全限制？

更新...安娜在下面是正确的！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-05T08:37:14.200

MapKit 中的坐标表示是错误的，但我确信它们在 CLLocation 坐标中是正确的

# forms - 移动 Safari 日期选择器输出格式

> ID：11515460
> 
> 赞同：0
> 
> 时间：2012-07-17T03:02:34.163
> 
> 标签：forms, mobile, datepicker, mobile-safari

是否可以格式化移动 Safari 日期选择器的输出？我需要将我的日期格式化为：

月/日/年

但是，移动 Safari 日期选择器将日期格式化为：

月 DD, YYYY

并将其提交为：

YYYY-MM-DD

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T03:09:22.560

尝试像这样格式化

```
<input type="date" value"mm/dd/yyyy" /> 
```

无论如何，请记住世界上大多数人首先使用一天。

# mysql - SQL 选择数据与多列匹配的行

> ID：11515461
> 
> 赞同：0
> 
> 时间：2012-07-17T03:02:32.877
> 
> 标签：mysql

我有多对由用户输入（php）计算的笛卡尔坐标（X，Y），它们形成一个范围（描绘一个多边形）。

从我的数据库（600 个点）中，我需要找到该范围内（多边形内）的任何点，并排除该范围外的任何点。

我想在一个 SQL 语句中完成这一切，但我似乎无法理解将同一行的两个不同值匹配到两个不同列的逻辑。

我想我在两个表之间拆分数据并使用内部连接？但这似乎有点过头了。

我曾尝试使用 MYSQL 的几何部分（尝试使用“点”数据类型搜索坐标对），但我看不到导入的数据（成功导入后）。当我从一行中选择所有数据并尝试显示 $row["coords"] （应该是点数据）时，我得到的只是一堆奇怪的 ASCII 字符和正方形......

所以希望有一种简单的方法可以使用常规 SQL 来完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T04:09:09.597

假设你有这样的表：

表格1：

```
ID     |    INT
X_POS  |    INT
Y_POS  |    INT 
```

ID - 自增主键 X_POS - 点的 X 坐标 Y_POS - 点的 Y 坐标

现在您有如下示例数据：

```
ID | X_POS | Y_POS
1  | 3.25  | 1.75
2  |-0.5   | 2.17 
```

ETC..

现在，您要选择 X 轴上点在 -1.34 和 1.28 之间以及 Y 轴上在 -5.63 和 0.98 之间的所有行

您的查询应该如下：

```
SELECT * FROM TABLE_1 
WHERE 
(X_POS BETWEEN -1.34 AND 1.28) AND
(Y_POS BETWEEN -5.63 AND 0.98) 
```

您可以在此处测试此示例：[SQLFIDDLE](http://sqlfiddle.com/#!2/afa24)

**更新：**

你绝对应该使用[MySQL Spatial Extension](https://dev.mysql.com/doc/refman/5.7/en/spatial-types.html)

> 我尝试过使用 MYSQL 的几何部分（尝试使用“点”数据类型搜索坐标对），但我看不到导入的数据

请提供有关您的表 (SHOW CREATE TABLE) 和您用于导入数据的方式的更多详细信息。

那我可以帮你。

# c - 关于C中#define语法的一些东西

> ID：11515462
> 
> 赞同：4
> 
> 时间：2012-07-17T03:02:41.900
> 
> 标签：c

谁能解释一下

`#define something (54)`

意思是？为什么 54 在括号内？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T03:19:27.783

`#define something (54)`告诉 C 预处理器在实际编译代码之前用“(54)”替换任何匹配“something”的文本。

您经常会看到使用`( )`around a的原因是，在某些情况下，当文本被替换为更大的表达式`#define`时，它可以防止被替换的文本产生不利或未定义的行为。`#defined`这种不利影响可能是运算符优先级的变化等。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-17T03:28:41.340

将任何#define 语句放在括号内通常是一个好主意。这是一个好习惯，大多数日常程序员都坚持这个好习惯。

例如：

```
#define TWO_PLUS_ONE    2 + 1 
```

如果我这样使用它：

```
3 * TWO_PLUS_ONE 
```

我希望看到答案为 9，但是由于运算符优先级，计算出的答案将是 7。您可以找到许多这样的极端情况（请参阅[http://www.gimpel.com/html/bugs. .htm](http://www.gimpel.com/html/bugs.htm)）。这就是 C++ 程序员尖叫“宏是邪恶的！”的原因。但我们是 C 程序员，我们是精英，我们并不害怕。

同样的例子：

```
#define TWO_PLUS_ONE    (2 + 1) 
```

这将在所有情况下给出预期的结果。

大多数程序员都希望他们的实践适用于所有情况，因此它易于记忆、易于实践和易于操作。所以在简单的情况下

```
#define SOMETHING    (54) 
```

去做就对了。这是个好主意。学会成为团队的一员，他们正在努力帮助你。顺便说一句，接下来他们会说，“应该是（54u）”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T03:07:49.813

括号是多余的。我无法想象在`(54)`语义上与`54`. 现在，如果我错了……给我看；我会学到一些新东西。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-17T03:07:58.377

这种情况下的括号将被忽略。和写法一样：

```
#define something 54 
```

他们只是帮助您喜欢数学，例如：

```
#define something (54-2)/2 
```

不同于

```
#define someotherthing 54-2/2 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-04T03:13:31.640

你为什么要用这个

```
#define SOMETHING    (54) 
```

而不是这个

```
const int SOMETHING = 54; 
```

我不确定答案是什么——我认为这种用法`#define`可能有点过时。也就是说，**括号的使用很好，因为它使两种类型的声明的行为方式基本相同**。所以现在如果你想调整值......

```
#define SOMETHING (54+1) 
```

或者

```
const int SOMETHING = 54+1; 
```

...它们通常仍然等同于“清单常量”。如果没有括号，它们将不等价，因为在计算表达式*之前*`#define`使用了简单的替换。

 *因此，如果`#define`像这样应用该值...

```
int a = 2*SOMETHING; 
```

...根据声明中是否使用括号，您会得到不同的结果：

```
int a = 2*54+1; // no parentheses -- answer is 109
int a = 2*(54+1); // parentheses -- answer is 110 
```

当然，只要分配的值是一个简单的常量，就像在您的示例中一样，括号的存在对编译器没有任何影响。 **这只是为了编写此代码或将来可能修改此代码的人的利益。** 通过始终如一地应用这种形式的声明，作者试图减少人为错误的发生。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-17T03:07:00.440

“()”是括号而不是[括号]。它本质上是一个空操作。任何时候 54 有效，(54) 都有效，就像 (50+4) 有效，或 (27*2) 或任何其他表达式一样。

也许您可以向我们提供有关您看到的这个“质量标准”错误的更多信息？也许有人不喜欢括号，因为它们是不必要的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-17T03:20:55.990

可能是这样编写的，以便于将来的更改；考虑更改`54`为`1024*54`or `1024+54`-- 使用括号，可以直接进行更改而无需进一步考虑。如果在没有括号的情况下进行更改，那么*在程序中使用的**任何地方，`something`*运算符评估的优先级都很重要。*

# c++ - 如何打印通过引用传递的 glm::vec3 类型的向量值？

> ID：11515469
> 
> 赞同：58
> 
> 时间：2012-07-17T03:04:30.403
> 
> 标签：c++, glm-math

我有一个小的 obj 加载器，它需要两个参数并将它们传递回输入变量。但是这是我第一次这样做，我现在不知道如何打印所述值。这是我测试加载程序是否正常工作的主要功能。我有两个类型`glm::vec3`的向量来保存顶点和法线数据。

```
std::vector<glm::vec3> vertices;
std::vector<glm::vec3> normals;    

int main() {
    bool test = loadOBJ("cube.obj", vertices, normals);
    for (int i = 0; i < vertices.size(); i++) {
       std::cout << vertices[i] << std::endl;   // problem line
    }

    return 0;   
} 
```

上面评论的那一行是产生无用信息的原因。如果我这样离开它并运行程序，我会收到一堆错误（*太无格式且无法在此处粘贴*），如果我添加引用运算符，我会得到如下输出：

```
0x711ea0
0x711eac
0x711eb8
0x711ec4    // etc 
```

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：130
> 
> 时间：2013-02-23T22:47:26.810

glm 对此有一个扩展。添加`#include "glm/ext.hpp"`或`"glm/gtx/string_cast.hpp"`

然后打印一个向量，例如：

```
glm::vec4 test;
std::cout<<glm::to_string(test)<<std::endl; 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-12-12T14:09:41.230

我认为最优雅的解决方案可能是已经发布的两个答案的组合，并添加了模板，因此您不必为所有向量/矩阵类型重新实现运算符（但这将函数定义限制为头文件） .

```
#include <glm/gtx/string_cast.hpp>

template<typename genType>
std::ostream& operator<<(std::ostream& out, const genType& g)
{
    return out << glm::to_string(g);
} 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-07-17T03:13:52.400

`glm::vec3`不会超载`operator<<`，因此您无法打印矢量本身。但是，您可以做的是打印向量的成员：

```
std::cout << "{" 
          << vertices[i].x << " " << vertices[i].y << " " << vertices[i].z 
          << "}"; 
```

更好的是，如果你经常使用它，你可以超载`operator<<`自己：

```
std::ostream &operator<< (std::ostream &out, const glm::vec3 &vec) {
    out << "{" 
        << vec.x << " " << vec.y << " "<< vec.z 
        << "}";

    return out;
} 
```

然后打印，只需使用：

```
std::cout << vertices[i]; 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2020-10-13T14:15:55.963

GLM`operator<<()`在`<glm/gtx/io.hpp>`

```
#include <iostream>
#include <glm/glm.hpp>
#include <glm/gtx/io.hpp>

int main()
{
   glm::vec3 v(1.0f, 2.0f, 3.0f);
   std::cout << v << std::endl;
} 
```

输出是：

```
[    1.000,    2.000,    3.000] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-25T05:14:46.793

要正确解决重载问题，您可以执行以下操作：

```
// Writes a generic GLM vector type to a stream.
template <int D, typename T, glm::qualifier P>
std::ostream &operator<<(std::ostream &os, glm::vec<D, T, P> v) {
  return os << glm::to_string(v);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-03-13T17:00:34.710

详细说明 JAB 的答案，我使用以下内容来避免`'operator <<' is ambiguous`错误：

```
#include <glm/glm.hpp>
#include <glm/gtx/string_cast.hpp>

/**
 * can_cout<T> tells whether there already exists an override of operator<< that
 * supports T.
 */
template <typename, typename = void>
struct can_cout : public std::false_type {};

template <typename T>
struct can_cout<T, std::void_t<decltype(operator<<(std::declval<std::ostream>(), std::declval<T>()))> > : public std::true_type {};

/**
 * Implement operator<< iff GlmType is handled by glm::to_string but there is
 * not already an override of operator<< that hanldes this type.
 */
template<
    typename GlmType,
    typename = std::enable_if_t<!can_cout<GlmType>::value>,
    typename = decltype(glm::to_string(std::declval<GlmType>()))
>
std::ostream& operator<<(std::ostream& out, const GlmType& g)
{
    return out << glm::to_string(g);
} 
```

# php - 如何更新购物车数量

> ID：11515471
> 
> 赞同：0
> 
> 时间：2012-07-17T03:04:44.407
> 
> 标签：php, database, shopping-cart

我正在制作购物车，附上这张照片

![在此处输入图像描述](../Images/21b1e1ad83e02350e655202ff3d27577.png)

产品的总和取决于买家我的问题是如何按更新按钮来更新产品的所有数量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T03:06:31.863

您将需要使用 Javascript 来更新表单本身。

```
$(document).ready( function() { 
    $(".update_button").click( function() {
        //update the quantities here.
    });
}); 
```

# java - 设计游戏随机化逻辑

> ID：11515474
> 
> 赞同：0
> 
> 时间：2012-07-17T03:05:33.163
> 
> 标签：java, android

我正在创建一个随机添加精灵到我的场景的游戏。随机性是加权的，我可以根据为我的方法提供的参数更改权重，以更改我想要添加的精灵比其他精灵更多。

现在游戏是回合制的。所以，在第一轮中，我希望精灵的重量需要向用户展示很多，我将通过重量设置，并将其他精灵设置为较低的重量，以便在第一阶段轻松。

第二轮我想通过将更多不需要的精灵混合到场景中来改变权重并使其更难一点。

问题是我不想硬编码，因为我希望用户尽可能多地进行。那么我怎么能在没有硬编码的地方做我需要它做的事情呢？

希望这是有道理的

**编辑：**

所以基本上发生的事情是我有一个 wiehgt 方法来控制一个精灵被添加到场景中的概率超过其他 3 个精灵。

```
updateWeights(int itemNumber, double weight); 
```

这是我用来更新每个精灵重量的方法，方法是提供精灵 itemNumber 然后是我想要使用的重量。

我想做的是随着用户根据我设置的要求在游戏中走得更远，通过将权重更改为不同的权重，游戏将逐渐变得更难。问题是必须在场景中显示的精灵比其他精灵应该总是高于其他精灵（这就是我不想使用随机生成器的原因）。明白了吗？如果有人对此有更简单的逻辑，请随时提出建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T03:21:07.687

找出整数的一些函数来确定权重。

例如， try `weight(n) = 1/(1 + e^(-n + b))`，你可以改变`b`平衡。这总是返回一个介于 0 和 1 之间的数字。

# matlab - 使用递归构建树状图的matlab结构

> ID：11515475
> 
> 赞同：0
> 
> 时间：2012-07-17T03:05:37.133
> 
> 标签：matlab, recursion

我想在 MATLAB 中使用递归来生成复制树状图的链接结构。

例如，一个非常简单的树状图可以用调用`linkage`函数生成的矩阵来表示。

```
1 2 1.0
4 3 1.5 
```

其中第一次联动在项目1和2之间，距离为1.0，第二次联动在项目3和1和2合并之间，用4表示，距离为1.5

因此，从这个矩阵中，我想要一个类似于 node1.children = {node2, node3} 和 node2.children = {node4, node5} 的结构。其中叶子笔记是node3 item3，node4是item 1，node5是item 2。

我将如何编写一个递归函数来生成这种类型的结构？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T06:53:36.717

我会创建一个`node`派生自`handle`.

```
classdef node<handle

    properties
        children
    end

    methods
        % a method that parses the incoming matrix and hands it over to its
        % children to do the same
    end
end 
```

这样做的好处是你可以在 children 中保存它，`obj.children{end+1}=newChild`而你保存的只是对 child 的引用，因为你从`handle`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T09:04:37.377

除了提到有一个节点类作为句柄的子类。

您可以使用以下策略非常优雅地做到这一点：

1.  准备一个空列表以包含所有节点（单元格？）
2.  当您阅读一行时，查找节点是否在列表中 - 否则制作它们并添加它们
3.  将孩子添加到父母
4.  从 1 开始重复，直到列表完成
5.  现在从列表中获取根节点-它将在您想要的结构中

# php - Wordpress 小部件问题

> ID：11515478
> 
> 赞同：0
> 
> 时间：2012-07-17T03:06:15.447
> 
> 标签：php, wordpress, qr-code

我正在尝试使用 PHP 显示当前页面的二维码。`the_permalink()`在我的论坛上返回空白。

```
function the_qrcode( $permalink ) {
    if($permalink == '') {
        $permalink = 'http://eternityofgamers.com/forums';
    }

    echo $permalink;
} 
```

在启用 PHP 的文本小部件中，我有`<?php the_qrcode(the_permalink()); ?>`

在主页上，`$permalink`回显为`http://eternityofgamers.com/archives/74http://eternityofgamers.com/forums`而不是`http://eternityofgamers.com/archives/74`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T03:32:12.223

the_permalink() 应该在循环中使用。如果您想获取当前的帖子链接，请使用[get_permalink](http://codex.wordpress.org/Function_Reference/get_permalink)。

```
<?php the_qrcode(get_permalink()); ?> 
```

# wcf - WCF 测试客户端中的 https 使用 basicHttpBinding 绑定

> ID：11515496
> 
> 赞同：3
> 
> 时间：2012-07-17T03:08:21.397
> 
> 标签：wcf, web-services, service, https, client

我需要知道需要对以下 web.config 进行哪些更改才能显示在 WCF 测试客户端中。我希望看到一个调用 ssl、https 协议的 web.config。我希望应用程序显示在 WCF 测试客户端中而不会出现元数据错误。顺便说一句，我尝试了 mexHttpsBinding 并摆脱了 httpGetEnabled="False"。都没有奏效。我也尝试过创建一个 https 端点——不开心。

```
<compilation debug="true" targetFramework="4.0" /> 
```

```
<services>

  <service name="WcfService1_ssl.Service1" behaviorConfiguration="OhBehave">

    <endpoint address="" binding="basicHttpBinding" contract="WcfService1_ssl.IService1" bindingConfiguration="secureBinding" />

    <!-- VERIFY:  Verify address="mex" section is commented or deleted to avoid any mexHttpBinding. -->

    <endpoint address="mex"   binding="mexHttpBinding" contract="IMetadataExchange" />

  </service>

</services>

<behaviors>

  <serviceBehaviors>

    <behavior name="OhBehave">

      <dataContractSerializer maxItemsInObjectGraph="2147483646" />

      <serviceMetadata httpGetEnabled="False"  httpsGetEnabled="True" />

      <serviceDebug includeExceptionDetailInFaults="true" />

    </behavior>

  </serviceBehaviors>

</behaviors>

<bindings>

  <basicHttpBinding>

    <clear />

    <binding name="secureBinding" closeTimeout="10:00:00" openTimeout="10:00:00" receiveTimeout="10:10:00" sendTimeout="10:10:00" bypassProxyOnLocal="false"

             hostNameComparisonMode="StrongWildcard" maxBufferSize="2147483647"

             maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647" messageEncoding="Text">

      <readerQuotas maxStringContentLength="2147483647" />

      <security mode="Transport">

        <transport clientCredentialType="None"></transport>

      </security>

    </binding>

  </basicHttpBinding>

</bindings>

<serviceHostingEnvironment multipleSiteBindingsEnabled="true"  aspNetCompatibilityEnabled="true" /> 
```

```
<modules runAllManagedModulesForAllRequests="true"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T05:00:17.197

您可以使用[soapUI](http://www.soapui.org/)测试https ，不要认为wcf测试客户端支持https

# command-line - 如何使用 FINDSTR 将字符串中的所有单词大写？

> ID：11515508
> 
> 赞同：0
> 
> 时间：2012-07-17T03:10:42.793
> 
> 标签：command-line, batch-file, windows-7-x64, windows-scripting, findstr

我正在清理数千个文件名，大多数文件名的结构如下：“xxxx xxxx - xxxxx xxxx xxxx.yyy” 问题是有些是大写的，有些不是。（实际上还有其他问题，但我可以轻松解决这些问题。）

我想取一串任何字符，并在任何句点之前大写所有单词。
最好使用单行代码，使用管道，而不是像使用 FIND 那样使用文件。
最后，我更愿意一次将整个字符串大写，但我不反对单独处理每个单词。

例子：

```
Input:  "this - string IS an EXAMPLE 4 u"
Output: "This - String IS An EXAMPLE 4 U" 
```

我想忽略所有大写字母和非字母字符（破折号、下划线、数字等），让它们不受影响地通过。

所以我希望能够使用这样的代码（第二行是相关的）：

```
for /f "tokens=*" %%x in ('dir /b *.zzz') do ( 
    for /f "tokens=*" %%y in ('echo %%x ^| findstr /r "s/\s\w/\U$&/g;"') do (
        rename "%%x" "%%y" )) 
```

如果可能的话，我希望能够像这样在命令行上对其进行测试：

```
echo hello to you | findstr /r "s/\s\w/\U$&/g;" 
```

我的问题是上面的例子没有提供任何输出。

如您所见，我搜索了正则表达式的示例，但无法使用 findstr 使它们即插即用。

我宁愿不将文件扩展名大写，但这很容易解决，所以我不在乎。

请不要 sed、grep 或任何其他 3rd 方软件建议，尽管我愿意接受其他基于 MS 的解决方案（Enterprise 或 Ultimate 附带的或可从 Microsoft 下载的东西）。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T12:00:47.020

FINDSTR 对正则表达式的支持*极为*有限。从命令行输入 or ，你就会明白我的意思了`HELP FINDSTR`。`FINDSTR /?`更糟糕的是，支持的正则表达式功能是以非标准方式实现的。看看[Windows FINDSTR 命令有哪些未记录的功能和限制？](https://stackoverflow.com/questions/8844868/what-are-the-undocumented-features-and-limitations-of-the-windows-findstr-comman)- 正则表达式限制在答案的底部进行了描述。最终结果是 FINDSTR 对您的情况没有任何帮助（不是双关语）。

我相信用 PowerShell 做你想做的事情应该相当容易，但我还没有学过那种语言。您也可以使用 VBScript 或 JScript。这三个都具有强大的正则表达式支持。

不使用正则表达式实现批处理解决方案并不难。

如果你有一个`%%F`包含文件名的 FOR 变量（可能带有路径信息），那么`%%~nF`只会给你文件名，没有扩展名。`%%~xF`会给你文件的扩展名。`HELP FOR`从命令行键入以获取完整文档。

没有将字符串转换为大写的内置命令，但是使用另一个 FOR 循环来实现是微不足道的。SET 命令支持搜索和替换，搜索部分不区分大小写。所以它只需要搜索和替换每个字母。

***编辑***
*我已将代码修复为仅按照要求将每个单词的第一个字母大写。该代码仅将空格识别为单词边界。您必须为要支持作为单词边界的每个字符添加额外的搜索和替换操作。*

```
@echo off
setlocal enableDelayedExpansion
for %%F in (*.yyy) do (
  set "name= %%~nF"
  for %%C in (
    A B C D E F G H I J K L M
    N O P Q R S T U V W X Y Z
  ) do set "name=!name: %%C= %%C!"
  set "name=!name:~1!"
  echo ren "%%F" "!name!%%~xF"
) 
```

除了一个潜在的问题外，上述方法效果很好：它会损坏任何包含该`!`字符的文件名，因为在扩展时启用了延迟`%%F`扩展。解决方法是在循环内打开和关闭延迟扩展。

```
@echo off
setlocal disableDelayedExpansion
for %%F in (*.yyy) do (
  set "original=%%F"
  set "name= %%~nF"
  set "ext=%%~xF"
  setlocal enableDelayedExpansion
  for %%C in (
    A B C D E F G H I J K L M
    N O P Q R S T U V W X Y Z
  ) do set "name=!name: %%C= %%C!"
  set "name=!name:~1!"
  echo ren "!original!" "!name!!ext!"
  endlocal
) 
```

上面的两个脚本都会简单地 ECHO 将执行的重命名命令。只需删除 REN 之前的 ECHO，脚本就会真正重命名您的文件。

# internet-explorer - IE BHO Tab 键焦点问题

> ID：11515511
> 
> 赞同：0
> 
> 时间：2012-07-17T03:11:27.963
> 
> 标签：internet-explorer, tabs, key, accessibility, bho

我们目前正在为 Internet Explorer 实现浏览器帮助对象 (BHO)。BHO 使用 OBJECT 标记嵌入到 HTML 中。我们正面临着键盘可访问性问题。用例如下：

1.  用户可以使用 ALT+D 将焦点从 BHO 移动到 IE chrome（具体为地址栏）。
2.  现在，我们期望通过 IE chrome 的连续选项卡，用户最终应该将注意力集中在 BHO 上。
3.  但是，BHO 的重点并没有转移。
4.  它在 IE chrome 中的最后一个组件上保留两次，然后返回地址栏。

我们已经尝试在 OBJECT 标记上设置 tabindex 属性。然而，没有运气。

您的帮助将不胜感激。

干杯，维卡斯K。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T16:08:21.083

BHO 不是通过 OBJECT 嵌入的。ActiveX 控件是。你的 BHO 和你的 ActiveX 控件**不应该是同一个对象**。他们有不同的站点，您需要实施`IObjectWithSite`. 怎么办？

无论如何，我的精神力量告诉我你忘记实施了`IInputObject`。

# ant - ant 完成变量替换后，有没有办法查看“最终”build.xml 文件？

> ID：11515514
> 
> 赞同：2
> 
> 时间：2012-07-17T03:11:39.983
> 
> 标签：ant, build, refactoring

我希望能够转储构建文件的中间版本——一个完全扩展的“包含”内联和为给定目标扩展的变量。

我不在乎是否必须实际执行目标才能获得此扩展（我知道变量可以根据执行路径获得不同的值）

我正在重构十几个几乎相同的 build.xml 文件，我想确保它尽可能接近纯重构。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T08:56:57.660

不幸的是，没有办法使用 ant 开箱即用地做到这一点。

您必须编写一个模拟 ant 变量替换过程的程序。我知道 Eclipse ant 编辑器会这样做（尽管不是 100% 的时间）。也许你可以蚕食其中的一些代码。

抱歉，我无法提供实际的解决方案。但我认为对于一些读者来说，知道他们不需要搜索命令行选项或其他东西可能仍然是有用的信息。

# python - 将脚本设置为在计算的时间后暂停和恢复

> ID：11515517
> 
> 赞同：1
> 
> 时间：2012-07-17T03:12:09.057
> 
> 标签：python, sleep, resume, suspend

更新如下：

我有一个脚本，它有一个我制作的函数，它可以根据几个因素计算将脚本设置为休眠的时间，这意味着脚本可能不需要再次运行半小时，也可能需要几天时间。

现在，我曾认为 time.sleep(seconds) 会将程序设置为睡眠状态，然后将其唤醒并再次运行。

```
time.sleep(3600)
runScriptAgain() 
```

显然，这并没有像我想象的那样。当然，大多数事情似乎从来没有像我想的那样，学习的乐趣！

无论如何，一旦我发现脚本永远不会恢复，我就四处寻找其他方法来做到这一点。有人提到过`os.exec`，但根据我的（非常有限的）知识，它看起来像是用来从脚本中运行其他东西。然后我尝试了该`threading.Timer`功能，但这似乎也没有达到我想要的效果。或者我不知道我在做什么，这更有可能。然后我看到人们提到线程和守护进程以及我根本不知道的事情。

我在想也许是一个 for 循环，但这似乎很业余（锅遇到水壶！），我不确定它甚至会如何工作（如果有的话）。

```
timeToSleep = SleepValue()
count = 0 
while count < timeToSleep:
    count + 1
    time.sleep(1)
runscript() 
```

那么有没有一种简单的方法可以将脚本设置为停止运行一段特定的时间，再次运行，然后休眠直到下一次？我认为必须有一个非常简单的方法来做到这一点，但我真的不知道。我在使用 Python 3.2.3 的 Windows 7 上，而且我现在才学习 python 几个月，所以任何复杂的东西都可能超出我的技能水平。

更新：

```
def something():
    print('Hello!')

def sleep():
    time.sleep(5)
    runscript()

def runscript():
    something()
    sleep()

runscript() 
```

好的，这就是我的代码当前设置的方式。我用这个简单的代码试过了，问题似乎是它永远不会醒来？我不确定发生了什么。我以为它会调用第一个函数，打印项目，然后休眠 5 秒，然后重复 ad naseum。也许有人可以解释我应该怎么做。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T03:35:32.903

你可能想看看 python 的[sched](http://docs.python.org/library/sched.html)模块，或者可能是[Advanced Python Scheduler](http://packages.python.org/APScheduler/)之类的东西。无论哪种方式，如果您想从脚本中运行调度，您必须将其设置为长时间运行的进程或服务。Ignacio Vazquez-Abrams 的想法是最简单的 - 只需使用操作系统的调度程序（Windows 的任务调度程序或 Linux 上的 cron）每 x 分钟运行一次。让您的脚本最初读取配置文件以确定它是否应该完成执行或退出。如果您需要在下次运行时更新或更改，只需更新配置文件即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T03:28:26.670

我像这样设置了一个脚本， time.sleep( 3600 ) 对我有用。将运行代码放在 while 循环中，然后让它运行。无需与某个值进行比较。

```
KEEP_GOING = should_we_keep_going( )

while KEEP_GOING:
     Time.sleep( 100 )
     Runscript( )
KEEP_GOING = should_we_keep_going( ) 
```

我还要说设置计划任务的想法是一个绝妙的想法。

# primefaces - Primefaces 保存/通过过滤的数据表结果列表

> ID：11515518
> 
> 赞同：6
> 
> 时间：2012-07-17T03:12:12.643
> 
> 标签：primefaces, filter, datatable, render

目前，我正在使用具有排序/过滤功能的数据表从我的数据库中成功显示图像元数据。在我的数据表下方，我使用第三方图像覆盖流（[http://www.jacksasylum.eu/ContentFlow/](http://www.jacksasylum.eu/ContentFlow/)）成功地显示了我的图像。我现在使用相同的列表来显示两者。在我的数据表中过滤我的数据后，我需要使用过滤后的数据表结果动态更新我的封面流中的图像列表。

使用 PrimeFaces 的最佳方法是什么？谁能指出我的工作示例？

这是我的代码：

screenshotData.xhtml

```
<h:form>
        <p:dataTable var="scrshot" value="#{screenshots}" paginator="true" rows="8" 
                 paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}" 
                 rowsPerPageTemplate="5,10,15" widgetVar="dataTable" draggableColumns="true"
                 emptyMessage="No screenshot data found with given criteria"> 
          <f:facet name="header"> 
            <p:outputPanel> 
                <h:outputText value="Search all fields:"/> 
                <p:inputText id="globalFilter" onkeyup="dataTable.filter()" style="width:150px" /> 
            </p:outputPanel> 
          </f:facet>
          <p:column headerText="Time" sortBy="#{scrshot.time}" filterBy="#{scrshot.time}" filterMatchMode="startsWith"> 
            <h:outputText value="#{scrshot.time}" /> 
          </p:column> 
          <p:column headerText="Id" sortBy="#{scrshot.id}" filterBy="#{scrshot.id}" filterMatchMode="startsWith"> 
            <h:outputText value="#{scrshot.id}" /> 
          </p:column> 
          <p:column headerText="User" sortBy="#{scrshot.user}" filterBy="#{scrshot.user}" filterMatchMode="startsWith"> 
            <h:outputText value="#{scrshot.user}" /> 
          </p:column>
          </p:dataTable>   
        </h:form>     
        <br/>
        <h:form>
          <p:outputPanel id="imgBlock" layout="block">
           <div class="ContentFlow"  style="width: 1400px; height: 500px" align="center">
            <div class="loadIndicator"><div class="indicator"></div></div>
            <div class="flow">
              <a4j:repeat var="img" value="#{screenshots}" rendered="true">
                 <div class="item">       
                     <img class="content" id="images" src="ImgServlet?id=#{img.id}" title="#{img.time}" draggable="true"/>
                     <div class="label">#{img.id}</div>
                  </div>
              </a4j:repeat>
             </div>         
           <div class="globalCaption"></div>
           <div class="scrollbar"><div class="slider"><div class="position"></div></div></div>
          </div>
         </p:outputPanel> 
       </h:form>   
............... 
```

截图.java

```
@Entity
@XmlRootElement
@Table(name="imgTable", uniqueConstraints = @UniqueConstraint(columnNames = "id"))
public class Screenshot implements Serializable, PhotoInterface {
    private static final long serialVersionUID = 1L;

    @Id
    @GeneratedValue
   private Long id;
   private String user;
   private Timestamp time;
-------- Getters/Setters --------- 
```

ScreenshotListProducer.java

```
@RequestScoped
public class ScreenshotListProducer {
   @Inject
   private EntityManager em;

   private List<Screenshot> screenshots;

   @Produces
   @Named
   public List<Screenshot> getScreenshots() {
      return screenshots;
   } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-17T12:37:10.727

我发现这是一个有趣的问题，所以我做了一些研究。首先，我发现[这个](http://forum.primefaces.org/viewtopic.php?f=3&t=23336)笑了。然后我偶然发现了[这个](http://forum.primefaces.org/viewtopic.php?f=3&t=17941)。答案似乎是：

将此添加到`<p:datatable>`：

```
<p:ajax event="filter" listener="#{bean.onFilter}" update = "@this"/> 
```

在豆子里：

```
public Map<String, String> onFilter(AjaxBehaviorEvent event) {
       DataTable table = (DataTable) event.getSource();
       List<Screenshot> obj =   table.getFilteredData();

       // Do your stuff here

       Map<String, String>  filters = table.getFilters();
       return filters;
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-09T07:06:38.343

感谢您对此问题和其他问题的所有评论。

我将与 PrimeFaces 5.1 分享解决方案：

```
public Map<String, Object> onFilter(AjaxBehaviorEvent event) {
        System.out.println("FILTRAMOS LA TABLA");
        DataTable table = (DataTable) event.getSource();
        List<Actual> obj = table.getFilteredValue();

        listaActivosFijosFiltrados = obj;

        if (obj != null) {
            System.out.println("filtered = " + obj.size());
        } else {
            System.out.println("No records found");
        }

        Map<String, Object> filters = table.getFilters();
        return filters;
    } 
```

# abpeoplepickerview - 如何从 ABPeoplePickerNavigationController 中选择“组”而不是单个“人员”？

> ID：11515521
> 
> 赞同：0
> 
> 时间：2012-07-17T03:12:35.747
> 
> 标签：abpeoplepickerview, addressbookui

尽管 iOS 的地址簿编程指南清楚地解释了 ABPeoplePickerNavigationController 类如何允许用户浏览他们的联系人列表并选择一个人。我想知道如何才能选择“组”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:46:28.330

我不知道你的问题现在是否解决了。我只是遇到了同样的问题。据我所知，iOS 没有提供“现成”的方式来访问地址簿中的组，例如人员选择器[http://developer.apple.com/library/ios/#documentation/ContactData/Conceptual/AddressBookProgrammingGuideforiPhone /Chapters/UI_Controllers.html](http://developer.apple.com/library/ios/#documentation/ContactData/Conceptual/AddressBookProgrammingGuideforiPhone/Chapters/UI_Controllers.html)。
但是，您可以像下面的示例代码一样访问所有组信息（您必须添加错误处理），但您必须自己编写用户界面。

```
CFErrorRef error;
ABAddressBookRef addressBook = ABAddressBookCreateWithOptions (NULL, &error);
CFArrayRef groups = ABAddressBookCopyArrayOfAllGroups (addressBook);
ABRecordRef firstGroup = CFArrayGetValueAtIndex (groups,0);
CFStringRef nameOfFirstGroup = ABRecordCopyCompositeName (firstGroup);
CFRelease(nameOfFirstGroup);
CFArrayRef members = ABGroupCopyArrayOfAllMembers (firstGroup);
ABRecordRef firstMember = CFArrayGetValueAtIndex (members,0);
CFStringRef nameOfFirstMember = ABRecordCopyCompositeName (firstMember);
CFRelease(nameOfFirstMember);
CFRelease(members);
CFRelease(groups);
CFRelease(addressBook); 
```

编辑：
对不起，上面的代码过早地释放了不同的对象。请将`CFRelease`语句放在代码的末尾。

# python - 使用 fastcgi 在共享主机上部署站点

> ID：11515523
> 
> 赞同：2
> 
> 时间：2012-07-17T03:12:55.703
> 
> 标签：python, django, apache, fastcgi

我正在尝试在他们的 Debian VPS 上将站点部署在名为“dreamhost”的共享主机上。我已关注[django 文档](https://docs.djangoproject.com/en/dev/howto/deployment/fastcgi/?from=olddocs#apache-shared-hosting) 当我在浏览器中访问服务器 ip 时出现以下错误：

```
The requested URL / was not found on this server.

Additionally, a 404 Not Found error was encountered while trying to use an ErrorDocument to handle the request. 
```

我有一个项目，`/home/user_name/project/`我在这个目录中创建了两个文件。

**.htacess**

```
AddHandler fastcgi-script .fcgi
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ dispatch.fcgi/$1 [QSA,L] 
```

**调度.fcgi**

```
#!/usr/bin/python
import sys, os

sys.path.insert(1, '/home/user_name/project')

# Set the DJANGO_SETTINGS_MODULE environment variable.
os.environ['DJANGO_SETTINGS_MODULE'] = "project.path.to.settings"

from django.core.servers.fastcgi import runfastcgi
runfastcgi(method="threaded", daemonize="false") 
```

我已经执行了`./dispatch.fcgi`它，它在终端中显示了站点主页。当我尝试在浏览器中访问时，什么都不起作用，总是出现 404 错误。`hello.fcgi`脚本也给出 404 错误。我已经尝试了所有技术，但没有任何效果:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T03:18:17.640

Dreamhost 提供了使用 WSGI、FastCGI 或您想要的任何其他方法安装 Django 的说明。在他们的wiki上查找。我认为地址是[http://wiki.dreamhost.com/Django](http://wiki.dreamhost.com/Django)。
**更新：（**由于某种原因，我无法在我的计算机上添加评论）您尝试使用 mod_wsgi 了吗？

# ruby-on-rails - Facebook FQL API - APIError：1：发生未知错误

> ID：11515526
> 
> 赞同：0
> 
> 时间：2012-07-17T03:13:23.580
> 
> 标签：ruby-on-rails, facebook-fql

我有一个 FQL 查询，它给出了一个 page_id 来查找你的 Facebook 朋友的照片 location_post。

```
rest_client.fql_query("SELECT id, page_id, author_uid, coords, type, timestamp FROM location_post WHERE author_uid IN (SELECT uid2 FROM friend WHERE uid1=me()) AND type = 'photo' AND page_id = 212068492162618") 
```

但是，它返回 APIError: 1: An unknown error occurred

> Koala::Facebook::APIError: 1: an unknown error occurred from /opt/local/lib/ruby/gems/1.8/gems/koala-1.0.0/lib/koala/rest_api.rb:16:in `rest_call' from /opt/local/lib/ruby/gems/1.8/gems/koala-1.0.0/lib/koala.rb:55:in`api' from /opt/local/lib/ruby/gems/1.8/gems/koala-1.0.0/lib/koala/rest_api.rb:13:in `rest_call' from /opt/local/lib/ruby/gems/1.8/gems/koala-1.0.0/lib/koala/rest_api.rb:7:in` fql_query' from (irb):51 from :0

如果我摆脱了**author_uid IN (SELECT uid2 FROM friend WHERE uid1=me())**，如下所示或**page_id = 212068492162618**，那么它可以工作

```
rest_client.fql_query("SELECT id, page_id, author_uid, coords, type, timestamp FROM location_post WHERE AND type = 'photo' AND page_id = 212068492162618 LIMIT 500") 
```

知道为什么会发生这种情况吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T21:43:16.930

我相信您要尝试的查询是

从 location_post WHERE type = 'photo' AND page_id = 212068492162618 中选择 id、page_id、author_uid、坐标、类型、时间戳

[这将自动扩展到您的所有朋友，如https://developers.facebook.com/docs/reference/fql/location_post/](https://developers.facebook.com/docs/reference/fql/location_post/)上的示例中所示

# java - OpenGL slick-util 缺少类：UnicodeFont 未包含在 .jar 中

> ID：11515533
> 
> 赞同：0
> 
> 时间：2012-07-17T03:13:54.693
> 
> 标签：java, opengl, fonts, jar

我有一个主要问题：slick-util.jar 中缺少 UnicodeFont 类。

在它说无法解析导入后，我使用了 eclipse 的“搜索存储库”功能，并在 lwjgl 下载文件夹中搜索了该类，但均无济于事。TrueTypeFont.class 存在并正常运行，但已弃用，我不想使用它。有什么办法可以以某种方式将 UnicodeFont 类添加到 slick-util .jar 中？如果没有，还有其他方法可以让课程与程序的其余部分集成吗？还是我必须在四边形上渲染字符纹理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T22:18:50.463

为 UnicodeFont 使用 slick.jar 而不是 slick-util.jar。

# php - 无法使用数字键作为字符串的 PHP 数组

> ID：11515536
> 
> 赞同：29
> 
> 时间：2012-07-17T03:14:14.757
> 
> 标签：php, arrays, json

我有一个将数字键作为字符串类型的 PHP 数组。

但是当我尝试访问它们时，PHP 给了我一个未定义的索引错误。

```
$a = (array)json_decode('{"1":1,"2":2}');
var_dump($a);
var_dump(isset($a[1]));
var_dump(isset($a["1"]));
var_dump($a[1]);
var_dump($a["1"]); 
```

输出：

```
数组（大小=2）
    '1' => 整数 1
    '2' => 整数 2

布尔假

布尔假

错误：E_NOTICE：未定义的偏移量：1

空值

错误：E_NOTICE：未定义的偏移量：1

空值

```

如何访问这些值？

演示：[http ://codepad.viper-7.com/8O03IM](http://codepad.viper-7.com/8O03IM)

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-09-13T01:51:17.190

所以，我还没有看到任何其他答案涉及到这一点，但@xdazz 接近了。

让我们开始我们的环境，`$obj`等于解码字符串的对象表示法：

```
php > $obj = json_decode('{"1":1,"2":2}');

php > print_r($obj);
stdClass Object
(
    [1] => 1
    [2] => 2
)

php > var_dump( $obj );
object(stdClass)#1 (2) {
  ["1"]=>
  int(1)
  ["2"]=>
  int(2)
} 
```

如果您想访问字符串，我们知道以下操作将失败：

```
php > echo $obj->1;

Parse error: parse error, expecting `T_STRING' or `T_VARIABLE' or `'{'' or `'$'' in php shell code on line 1 
```

**访问对象变量**

您可以像这样访问它：

```
php > echo $obj->{1};
1 
```

这与说：

```
php > echo $obj->{'1'};
1 
```

**访问数组变量**

数组的问题是以下返回空白，这是类型转换的问题。

```
php > echo $obj[1];
php > 
```

如果您将其类型转换回来，该对象将再次可访问：

```
php > $obj = (object) $obj;
php > echo $obj->{1};
1 
```

这是一个可以为您自动执行上述操作的功能：

```
function array_key($array, $key){
    $obj = (object) $array;
    return $obj->{$key};
} 
```

示例用法：

```
php > $obj = (array) $obj;
php > echo array_key($obj, 1);
1

php > echo array_key($obj, 2);
2 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-07-17T03:19:03.060

如果需要数组，请将[json_decode](http://php.net/manual/en/function.json-decode.php)的第二个参数设置为`true`.

```
$a = json_decode('{"1":1,"2":2}', true); 
```

***编辑：*** 当您将 std 对象转换为数组时，数字字符串键不会转换为数字。这是一个例子。

```
$obj = new stdClass;
$obj->{'1'} = 1;
$arr = (array) $obj;
var_dump($arr);
var_dump(isset($arr[1])); 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-07-17T03:28:20.827

显然，这是一个已知问题，并且没有修复它的计划；请参阅[Doc Bug #45959 对象到数组的转换导致奇怪的行为](https://bugs.php.net/bug.php?id=45959)：

> 修复这意味着性能下降，因此最好将其保留为已知问题，但记录在案。

（然后）在[数组类型的文档中](http://php.net/language.types.array#language.types.array.casting)指出了这种不稳定（强调我的）：

> 如果将对象转换为数组，则结果是一个数组，其元素是对象的属性。键是成员变量名称，有一些值得注意的例外：**整数属性不可访问**......这可能导致一些意外行为......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-14T08:42:30.410

是的。我同意，PHP 在从对象到数组的类型转换方面存在问题，但 foreach 正在智能地处理对象或关联数组。

```
$a = json_decode('{"1":1,"2":2}'); //need not typecast but doesnt break even if u typecast

foreach ($a as $k=>$v){
    echo $v;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-14T21:27:20.147

我最近遇到了同样的问题。

```
$obj = new stdClass();
$obj->{'0'} = "test";

$array = (array)$obj;
foreach ($array as $key => $value) {
   $array[$key] = strtoupper($value);
}
var_dump($array); 
```

此代码输出：

```
array(2) {
  ["0"]=>
  string(4) "test"
  [0]=>
  string(4) "TEST"
} 
```

发现在调试将递归对象转换为数组的方法时，我已经疯了。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-09-10T15:07:02.257

我有同样的问题（但使用array_intersect_key）。

这是我的解决方案：

```
$array = array_combine(array_keys($array), $array); 
```

# jquery - 尝试将 Ajax 请求添加到数据表

> ID：11515537
> 
> 赞同：0
> 
> 时间：2012-07-17T03:14:25.400
> 
> 标签：jquery, datatables

我正在尝试向我的表中添加一些功能，允许用户选择一行或多行，以便在用户单击删除按钮后，它将向服务器发送 Ajax 请求，从该服务器中删除表中的项目。我一直在查看数据表网站，该网站是我添加到页面的脚本，其中有很多内容，我不确定我到底需要什么来完成这个。

```
$( '#table' ).dataTable({
    "sDom": '<"top"lTf<"clear">>rt<"actions"<"actions-left"i><"actions-right"p>>',
    "bAutoWidth": false,
    "sPaginationType" : "full_numbers",
    "oTableTools": {
    "aButtons": [
            {
                "sExtends":    "text",
                "sButtonText": "Add"
            },
            {
                "sExtends":    "text",
                "sButtonText": "Edit"
            },
            {
                "sExtends":    "text",
                "sButtonText": "Delete",
                "sAjaxUrl": "delete_title"
            },
        ]
    },
    "aoColumnDefs": [
        { "bSortable": false, "aTargets": [ 0 ] },
        { "sWidth": "20px", "aTargets": [ 0 ] },
        { "sWidth": "40px", "aTargets": [ 1 ] },
        { "sClass": "alignCenter", "aTargets": [ 1 ] }
    ]
});

<?php            
        $tmpl = array ( 'table_open'  => '<table class="table" id="titles-table">' );
        $data = array('name' => 'titles', 'class' => 'selectall');
        $this->table->set_heading(form_checkbox($data), 'ID', 'Title Name', 'Style', 'Status');            
        $this->table->set_template($tmpl);             
        foreach ($titles as $row)
        {
            $checkbox_data = array(
                'name'        => 'titles',
                'id'          => $row->id
            );
            $this->table->add_row(form_checkbox($checkbox_data), $row->id, $row->title_name, $row->type_name, $row->status_name);
        }
        echo $this->table->generate(); 
        ?> 
```

有没有其他人看到我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T14:00:29.227

检查[服务器端处理](http://datatables.net/release-datatables/examples/data_sources/server_side.html)的示例。

您需要将 sAjaxSource 添加到 DataTable Initialization 中，并在其中定义删除。此外，您可能需要将额外的服务器参数推送到服务器端。你可以使用这样的东西：

```
//Example from one of my projects:
//This adds extra data to the ajax request sent by datatables. 
"fnServerParams": function (aoData) {
        aoData.push({ "name": "bu", "value": BU });
        aoData.push({ "name": "SLAName", "value": SLANAME });
        aoData.push({ "name": "substep", "value": STEP });
        aoData.push({ "name": "timeperiod", "value": TIME });
        var UserFilter = $("#userFilter").val();
        aoData.push({ "name": "user", "value": UserFilter });
    } 
```

如果您需要更多帮助或更多详细信息，请询问！

//编辑1

```
$( '#table' ).dataTable({
"sDom": '<"top"lTf<"clear">>rt<"actions"<"actions-left"i><"actions-right"p>>',
"bAutoWidth": false,
"sPaginationType" : "full_numbers",
"sAjaxSource" : "/path/to/function",
"fnServerParams": function (aoData) {
    aoData.Push(ArrayWithCheckboxInfo);
},
"oTableTools": {
"aButtons": [
        {
            "sExtends":    "text",
            "sButtonText": "Add"
        },
        {
            "sExtends":    "text",
            "sButtonText": "Edit"
        },
        {
            "sExtends":    "text",
            "sButtonText": "Delete",
            "sAjaxUrl": "delete_title"
        },
    ]
},
"aoColumnDefs": [
    { "bSortable": false, "aTargets": [ 0 ] },
    { "sWidth": "20px", "aTargets": [ 0 ] },
    { "sWidth": "40px", "aTargets": [ 1 ] },
    { "sClass": "alignCenter", "aTargets": [ 1 ] }
] 
```

});

然后在服务器端根据来自阵列的信息处理复选框。我不知道您是否要从数据表或数据库中删除该行，但您可以同时执行这两项操作，然后它将更新的数据发送到客户端。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T19:03:54.177

替代路线是直接使用 jquery/javascript 来进行竞标。这是我为非常相似的事情所做的一个示例，它不是您的原因的直接答案..但是如果更改为匹配您的 id 的类等。可以为您的事业提供很多帮助

```
 $("#hideme").click(function(e)
        {
            e.preventDefault();
            var postArray = new Array();
            i=0;
            $("input:checked").each(function()
            {
                var theID = $(this).attr("name");
                theID = theID.replace("offerterms-", "");
                postArray.push(theID);
                $(this).parents("tr").animate(
                    {"color":"#FFF", "background-color":"#FFF"},
                    "5000",
                    function()
                    {
                        $("input:checked").parents("tr").remove();
                        $("table.datatable TR").removeClass("darkrow");
                        $("table.datatable TR:odd").addClass("darkrow");
                    });
            });
            $.post("./hide/", {"entry":postArray}, function(data)
            {
                if((".datatable tr").length == 1){$(".datatable").hide();$("#hideme").hide();$("#recordCount").text("0");}
                else{$("#recordCount").text((parseInt($("#recordCount").text())-1));}
                //alert(data.msg);
            }, "json");
        }); 
```

这是做什么的，本质上是遍历表并构建一个选中复选框的数组以发布到我的后端，此时我使用该数组来处理我的数据库条目并在我的情况下预先形成数据的隐藏以便隐藏以供使用在另一个类似的表格上，管理员可以查看这些表格并稍后取消隐藏它们。无论如何，在遍历表格时，它会在每行的基础上隐藏所有带有选中复选框的行。

# c# - 从控制台转换为 Windows 服务错误

> ID：11515540
> 
> 赞同：0
> 
> 时间：2012-07-17T03:14:57.737
> 
> 标签：c#, powershell, windows-services, lync

在我的解决方案中，我有一个控制台项目`reg`来启动我的应用程序，它工作正常

现在我想将控制台替换为 Windows 服务`Service1` ，但它不起作用并且给我一个错误来连接数据库

这是我的解决方案，我`Service1 item`改用控制台`reg`

![在此处输入图像描述](../Images/94b793bfa5610aaf9398831038578e40.png)

这是我的`onStart`方法

```
 protected override void OnStart(string[] args)
      {
            System.Diagnostics.Debugger.Launch();
                 EventLog.WriteEntry("Service Started...");
                 ConfigureServer();
      } 
```

在这里，问题发生了 **无法运行登录请求的数据库xds**

```
 using (System.Management.Automation.PowerShell powershell = System.Management.Automation.PowerShell.Create())
                     {
                          powershell.Runspace = myRunSpace;
                          powershell.Commands.AddScript("Get-CsTrustedApplicationPool");
                          Collection<PSObject> results = null;
                          Collection<ErrorRecord> errors = null;
                          try
                          {
                                results = powershell.Invoke();
                                errors = powershell.Streams.Error.ReadAll();
                          } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T03:35:33.127

您的服务在哪个帐户上运行？

![在此处输入图像描述](../Images/483adef37d8573be557a7b17238cedf6.png)

# javascript - 为什么我不能使用 javascript 在表中添加新行？

> ID：11515544
> 
> 赞同：-1
> 
> 时间：2012-07-17T03:15:39.580
> 
> 标签：javascript

```
function add(tableID) {
    var table = document.getElementById(tableID);

    var rowCount = table.rows.length;
    var row = table.insertRow(rowCount);

    var cell1 = row.insertCell(0);
    cell2.innerHTML = rowCount;

    var cell2 = row.insertCell(1);
    var element1 = document.createElement("input");
    element1.type = "text";
    cell2.appendChild(element1);   
} 
```

[jsFiddle：添加一行](http://jsfiddle.net/89Q7T/)

我的代码有什么问题？它似乎不起作用。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T05:13:03.517

这是您更正的代码

功能添加（表ID）{

```
var table = document.getElementById(tableID);

var rowCount = table.rows.length;
var row = table.insertRow(rowCount);

var cell1 = row.insertCell(0);
cell1.innerHTML = rowCount;

var cell2 = row.insertCell(1);
var element1 = document.createElement("input");
element1.type = "text";
cell2.appendChild(element1); 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T03:19:35.417

工作版本：http: [//jsfiddle.net/89Q7T/1/](http://jsfiddle.net/89Q7T/1/)

你有一个简单的错字：

```
var cell1 = row.insertCell(0);
cell2.innerHTML = rowCount; // should be cell1 
```

# ios - 获取 UIWebview 的当前域

> ID：11515547
> 
> 赞同：0
> 
> 时间：2012-07-17T03:15:54.593
> 
> 标签：ios, regex, uiwebview, nsstring

我想获取 UIWebView 的当前域

例如：

[http://amtmall.com/i15104234454.htm?sid=a0c935526ab19ee7051225579c90cf96&spm=875.124399.275145.1](http://a.m.tmall.com/i15104234454.htm?sid=a0c935526ab19ee7051225579c90cf96&spm=875.124399.275145.1) -> tmall.com

有没有可靠的方法来做到这一点？

我看到有人建议这个：

```
 NSString *currentURL = myWebView.request.URL.absoluteString; 
```

我知道正则表达式可以做到。还有什么办法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T03:59:59.730

首先，当你说你想获得域名时是什么意思。本质上，你想有多严谨？域解析可能非常复杂（请参阅：[如何从 URL 获取域名](https://stackoverflow.com/questions/569137/how-to-get-domain-name-from-url)）。

至少从 URL.absoluteURL.host 开始，而不是 URL.absoluteString。这样您就不必从 URL 字符串中提取主机。

您可能还希望使用`[webView stringByEvaluatingJavaScriptFromString:@"document.domain"]`它作为您的起点。至少这样你就会知道浏览器认为域是什么。

希望任何混乱都有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-05-27T11:46:31.977

在 Swift 中，您可以通过以下方式从 Web 视图中获取主机 URL：

```
webView.url?.host 
```

更多信息[在这里](https://developer.apple.com/documentation/foundation/url/1780168-host)

# c++ - 如何扫描文件夹中的所有文件，包括 VC++ 2008 中的子文件夹？

> ID：11515548
> 
> 赞同：0
> 
> 时间：2012-07-17T03:16:01.517
> 
> 标签：c++, file, visual-c++, directory, visual-c++-2008

我想在 VC++ 2008（Windows 窗体应用程序）中构建一个应用程序。

在这里，我想浏览我选择的文件夹（按钮“浏览”），这样当我按下“扫描”按钮时，我的应用程序将找到我选择的文件夹中的所有文件，包括子文件夹。然后所有文件都放在一个列表框中，我有这个代码将在c#中而不是在c++中，如何在c++中更改我的代码？

```
private void btnScan_Click_1(object sender, EventArgs e)
    {

        List<string> search = Directory.GetFiles(folderBrowserDialog1.SelectedPath, "*.*", SearchOption.AllDirectories).ToList();
        progressBar1.Maximum = search.Count;
        //foreach (Directory.GetDirectories.search))

        foreach(string item in search)
        {
            try
             {
                StreamReader stream = new StreamReader(item);
                string read = stream.ReadToEnd();
                foreach(string st in viruslist)
                {
                if(Regex.IsMatch(read,st))
                {
                viruses+=1;
                    label1.Text+= viruses;
                    listBox1.Items.Add(item);
                }
                progressBar1.Increment(1);
                }

             }
             catch(Exception ex)
             {

             }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T12:42:37.640

此代码可能有效....

```
#include <Windows.h>

#include <stdio.h>
#include <stdlib.h>

#include <vector>
#include <string>

struct SearchFile
{
    typedef std::vector<std::string> FileNameArray;
    FileNameArray files;

    FileNameArray::iterator begin()
    {
        return files.begin();
    }

    FileNameArray::iterator end()
    {
        return files.end();
    }

    int count() const
    {
        return (int)files.size();
    }

    std::string operator[](int index)
    {
        return files[index];
    }

    void operator()(const std::string &path, const std::string &pattern)
    {
        WIN32_FIND_DATA wfd;
        HANDLE hf;
        std::string findwhat;
        std::vector<std::string> dir;

        findwhat = path + "\\*";  // directory

        hf = FindFirstFile(findwhat.c_str(), &wfd);
        while (hf != INVALID_HANDLE_VALUE)
        {
            if (wfd.cFileName[0] != '.' && (wfd.dwFileAttributes & FILE_ATTRIBUTE_DIRECTORY))
            {
                std::string found;

                found = path + "\\" + wfd.cFileName;
                dir.push_back(found);
            }

            if (!FindNextFile(hf, &wfd))
            {
                FindClose(hf);
                hf = INVALID_HANDLE_VALUE;
            }
        }

        findwhat = path + "\\" + pattern;  // files

        hf = FindFirstFile(findwhat.c_str(), &wfd);
        while (hf != INVALID_HANDLE_VALUE)
        {
            if (wfd.cFileName[0] != '.' && !(wfd.dwFileAttributes & FILE_ATTRIBUTE_DIRECTORY))
            {
                std::string found;

                found = path + "\\" + wfd.cFileName;
                files.push_back(found);
            }

            if (!FindNextFile(hf, &wfd))
            {
                FindClose(hf);
                hf = INVALID_HANDLE_VALUE;
            }
        }

        // continue with directories
        for (std::vector<std::string>::iterator it = dir.begin(); it != dir.end(); ++it)
            this->operator()(*it, pattern);
    }
};

int main(void)
{
    SearchFile sf;

    // get all .jpg files in current dir
    sf(".", "*.jpg");

    for (int i = 0; i != sf.count(); ++i)
    {
        printf("%s\n", sf[i].c_str());
    }

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T03:43:50.650

由于您有一个 .NET 应用程序（因为您使用的是 Windows 窗体），最简单的方法是使用[System::IO::Directory::GetFiles()](http://msdn.microsoft.com/en-us/library/ms143316.aspx#Y0)列出文件夹和所有子文件夹中的所有文件。

```
array<String^>^ files = GetFiles(folder, "*.*", System::IO::SearchOption::AllDirectories); 
```

AllDirectories 选项使 GetFiles 搜索所有子文件夹中的文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T03:58:29.683

使用 findfirst 和 findnext() 来实现。查看下面的 msdn 链接了解更多详细信息。

[http://msdn.microsoft.com/en-us/library/zyzxfzac(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/zyzxfzac(v=vs.71).aspx)

# ruby-on-rails - 如何在按钮中使用 Unicode (rails form_for)？

> ID：11515554
> 
> 赞同：3
> 
> 时间：2012-07-17T03:17:23.053
> 
> 标签：ruby-on-rails, unicode, erb

```
<%= f.button "Vote &#9650;" %> 
```

我正在尝试打印文本 + Unicode 三角形。找不到语法。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T03:23:55.433

默认情况下，Rails 视图中输出的字符串会自动转义。

你需要通过告诉 Rails 字符串是 HTML 安全的来阻止它转义：

```
 "Vote &#9650;".html_safe 
```

# vim - Vim 技巧 - 如何将目录视为“文件夹”？

> ID：11515555
> 
> 赞同：6
> 
> 时间：2012-07-17T03:17:34.503
> 
> 标签：vim

我在 ubuntu 终端中工作，不小心“vim-ed”到一个文件夹而不是 cd-ing 到它。不知何故，这显示了一个显示目录内容的窗口，就好像它是桌面上的一个文件夹一样。那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T04:03:54.017

默认情况下，vim 使用内置`netrw`插件将目录打开到缓冲区中。有关`:help netrw`信息，请参阅。此外，许多用户喜欢[NERDTree](https://github.com/scrooloose/nerdtree/)等其他插件来编辑目录。您可以使用编辑文件夹

```
:e /path/to/directory 
```

或者在启动 vim 时直接打开它：

```
vim /path/to/directory 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T03:19:21.163

如果这是目录：

```
/some/directory/on/filesystem/ 
```

你只是`vim`目录：

```
vim /some/directory/on/filesystem 
```

在 *nix 中，所有目录实际上都是文件，并且以类似的方式处理。因此可以直接编辑它们。请注意，stackoverflow 可能不是这个问题的最佳位置。

# java - 复制 BufferedImage 时出现数组索引错误

> ID：11515569
> 
> 赞同：0
> 
> 时间：2012-07-17T03:19:23.797
> 
> 标签：java, arrays, image

所以我试图在我的程序中缓存一组图像的两个副本。我有一个包含两个引用的对象和一个加载图像并将它们传递给该特定类的新实例的循环。但是，大约在第 25 次迭代时，当类进行复制时，我得到了一个数组索引越界异常。我推断它试图复制到第二个副本中不存在的像素，或者它超出了第一个副本的范围。

以下是重要的代码部分：

循环：

```
Hashtable<String, Sheet> tempHashTable = new Hashtable<String, Sheet>();
for(int ii = 0; ii < sheetNames.size(); ii++) {
   try {
      File tempSheetFile = new File(Constants.TEMP_DIR, sheetNames.get(ii));
      BufferedImage tempSheet = ImageIO.read(tempSheetFile);
      System.out.println(sheetNames.get(ii));
      tempHashTable.put(sheetNames.get(ii), new Sheet(tempSheet));
   } catch (IOException ex) {
   }
} 
```

表初始化：

```
private BufferedImage defaultSheet;
private BufferedImage currentSheet;

public Sheet(BufferedImage defaultSheet) {
    this.defaultSheet = defaultSheet;
    currentSheet = new BufferedImage(defaultSheet.getWidth(), defaultSheet.getHeight(), BufferedImage.TYPE_INT_ARGB);
    currentSheet.setData(defaultSheet.getData()); //Error line
} 
```

错误：

```
Exception in thread "AWT-EventQueue-0" java.lang.ArrayIndexOutOfBoundsException: 64 
```

最奇怪的是第二个 BufferedImage 是用第一个的大小创建的，那么为什么我们会得到一个数组索引异常呢？

**编辑**：好的，所以我切换`BufferedImage.TYPE_INT_ARGB`到`defaultSheet.getType()`并且错误消失了。现在的问题是，之前给我错误的相同图像现在显示在程序中，而没有源文件中肯定存在的红色和 alpha 通道。

**编辑**：永远不要将故障归因于可怕的编程可以充分解释的故障。新代码让构造函数加载图像两次，而不是复制现有实例的数据。更干净，虽然我使用`javapng`这里提供的库[http://code.google.com/p/javapng/](http://code.google.com/p/javapng/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T03:50:23.053

尝试在构造函数中将行更改为以下内容`Sheet`：

```
currentSheet = new BufferedImage(defaultSheet.getWidth(), defaultSheet.getHeight(), defaultSheet.getType()); 
```

# ember.js - EmberJS 路由：从父级创建子路由

> ID：11515572
> 
> 赞同：0
> 
> 时间：2012-07-17T03:19:50.347
> 
> 标签：ember.js, ember-old-router

我正在尝试创建一条路由以在父级上添加子实体。我的路由器看起来像这样。我在父母的节目中有一条嵌套路线，我很确定这是错误的。这样做似乎停止了页面转换之间的 URL 更改，并且当我从父模板通过 导航到 addChild 路由时`{{action doAddChild href=true}}`，URL 中的 :parent_id 未定义。我猜这是因为我没有在应该是父项的操作上设置上下文，但是我从哪里得到呢？

实现这一目标的最佳方法是什么？我显然是在吠叫错误的树...

```
App.Router = Ember.Router.extend
    enableLogging: true
    root: Ember.Route.extend
        index: Ember.Route.extend
            route: "/"
        parents: Ember.Route.extend
            route: "/parents"
            doShow: Ember.Route.transitionTo('show')
            index: Ember.Route.extend
                route: "/"
                connectOutlets: (router) ->
                    router.get("applicationController").connectOutlet "parents"
            show: Ember.Route.extend
                route: "/:parent_id"
                doAddChild: Ember.Route.transitionTo('addChild')
                modelType: App.Parent
                connectOutlets: (router, parent) ->
                    router.get("applicationController").connectOutlet "parent", parent
                addChild: Ember.Route.extend
                    route: "/addChild"
                    connectOutlets: (router) ->
                        router.get("applicationController").connectOutlet "addChild" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T07:33:32.120

你的第一个问题是你的表演路线。正如您所说，它不会转换，这是因为路由器只能正确转换到叶节点。当前的答案是添加一个虚拟索引路由。

```
Router = Ember.Router.extend
    enableLogging: true
    root: Ember.Route.extend
        index: Ember.Route.extend
            route: "/"
        parents: Ember.Route.extend
            route: "/parents"
            doShow: Ember.Route.transitionTo('show.index')
            index: Ember.Route.extend
                route: "/"
                connectOutlets: (router) ->
                    router.get("applicationController").connectOutlet "parents"
            show: Ember.Route.extend
                route: "/:parent_id"
                doAddChild: Ember.Route.transitionTo('addChild')
                connectOutlets: (router, parent) ->
                    router.get("applicationController").connectOutlet "parent", parent
                index: Ember.Route.extend
                    route: "/"
                addChild: Ember.Route.extend
                    route: "/addChild"
                    connectOutlets: (router) ->
                        router.get("applicationController").connectOutlet "addChild" 
```

手指交叉也解决了其他所有问题。

# php - 使用正则表达式删除存储的 apc 键

> ID：11515579
> 
> 赞同：5
> 
> 时间：2012-07-17T03:20:59.867
> 
> 标签：php, caching, apc

是否可以使用一种方法使您能够使用正则表达式删除存储的 apc 条目？

例如，当新数据输入数据库时​​，我想从缓存中删除一些用户查询，以便下次运行查询时显示新数据。

假设您有一个缓存的朋友列表查询，但是当添加新朋友时，该用户的所有缓存朋友查询都将被删除......

如果我有这样的用户好友列表键：

```
$sql = "SELECT * FROM friends WHERE userId = :userId";

$sqlKey = str_replace(":userId", $userId, $sql);    
$key = $userId."-friend".md5('query'.$sqlKey);

$data = friendsArray;
apc_add($key, $data, 60 * 10); 
```

然后期望的结果是在运行添加新朋友查询后删除所有以当前 userId 开头的条目，以确保朋友列表在下次查看时显示新用户：

```
apc_delete("~$userId-friend([a-f0-9]+)~"); 
```

由于好友列表 sql 和添加好友 sql 位于不同的文档中，这似乎是无需重写和键入 sql 的最简单方法，但我认为不支持正则表达式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-16T14:00:37.210

正如[J Fox 在 php.net 上所写](http://www.php.net/manual/en/function.apc-delete.php#101794)，apc_delete 还接受键数组或 APCIterator 对象。APCIterator 接受正则表达式。所以你的代码应该是这样的：

```
// delete all keys beginning with a regex match
$toDelete = new APCIterator('user', '/^' . $userId . '-friend([a-f0-9]+)/', APC_ITER_VALUE);

var_dump( apc_delete($toDelete) );
// returns boolean true|false on success or failure 
```

# mongodb - Mongodb：我如何传递一个“集合”参数来使用？

> ID：11515580
> 
> 赞同：1
> 
> 时间：2012-07-17T03:21:05.620
> 
> 标签：mongodb

我有我的 JS 文件。我在顶部声明了一个变量，称为：

```
var aCollection = db.myCollection; 
```

我有一个存储的 JS 过程，它接受两个参数。要使用的字符串“id”和“collection”。

如何传递两个参数，以及一个集合作为参数？

```
db.eval("runSP('32', aCollection"); 
```

如果我执行上述操作，那么我会收到一个异常，说“aCollection”不存在。

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T03:58:28.637

您是否尝试过只做一个javascript concat？

```
db.eval("runSP('32', '"+aCollection+"')"(; 
```

对集合变量与字符串的连接进行完整性检查：

```
> use test
switched to db test
> show collections
system.indexes
system.js
> var aCollection = db.system.js;
> print ("foo" + aCollection + "bar");
footest.system.jsbar 
```

您的函数将接收集合的字符串名称。如果这就是您所期望的所有功能，那么您很好。如果您需要在 javascript 函数中解析集合，可以执行以下操作：

```
function runSP(numberVal, aCollection) {
    var coll = db[aCollection];
    coll.find();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T04:39:22.893

`db.eval`可以接受多个参数，这些参数传递给作为第一个参数提供的函数：

```
db.eval(runSP, '32', aCollection); 
```

# java - Swing：将鼠标悬停在半透明 JPanel 上的单选按钮标签上

> ID：11515582
> 
> 赞同：6
> 
> 时间：2012-07-17T03:21:07.277
> 
> 标签：java, swing, jpanel, jradiobutton, translucency

在我的问题中，我有一个不透明的 JPanel 和另一个位于第一个 JPanel 上的半透明（半透明）的 JPanel。当我在顶部 JPanel 上添加单选按钮时。问题是每次我在每个单选按钮的标签区域上输入鼠标时（每次我将鼠标从标签上移开时），它都会变得越来越暗。

```
package trial;

import java.awt.Color;
import javax.swing.ButtonGroup;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JRadioButton;

public class Test {

public static void main(String arg[]){
    JFrame rootframe = new JFrame("Test panel");
    rootframe.setSize(800, 550);
    rootframe.setExtendedState(JFrame.MAXIMIZED_BOTH);

    JPanel basePanel = new JPanel(); //fills rootFrame
    basePanel.setOpaque(true);
    basePanel.setBackground(Color.yellow );     

    JPanel panelContainingRadioButtons = new JPanel();//wraps radio buttons
    panelContainingRadioButtons.setOpaque(true);
    panelContainingRadioButtons.setBackground(new Color(0,0,0,100) );

    ButtonGroup buttonGroup1 = new ButtonGroup();

    JRadioButton jRadioButton1 = new JRadioButton();
    jRadioButton1.setText("Text A...............................");
    jRadioButton1.setOpaque(false);
    jRadioButton1.setForeground( Color.white);
    buttonGroup1.add(jRadioButton1);

    JRadioButton jRadioButton2 = new JRadioButton();
    jRadioButton2.setOpaque(false);
    jRadioButton2.setForeground( Color.white);
    buttonGroup1.add(jRadioButton2);
    jRadioButton2.setText("Text B.......................");

    JRadioButton jRadioButton3 = new JRadioButton();
    jRadioButton3.setOpaque(false);
    jRadioButton3.setForeground( Color.white);
    buttonGroup1.add(jRadioButton3);
    jRadioButton3.setText("Text C................................");

    panelContainingRadioButtons.add(jRadioButton1);
    panelContainingRadioButtons.add(jRadioButton2);
    panelContainingRadioButtons.add(jRadioButton3);

    basePanel.add(panelContainingRadioButtons);

    rootframe.add(basePanel);
    rootframe.setVisible(true);

}
} 
```

我相信这不是单选按钮的问题，因为在另一种情况下，我观​​察到在相同条件下，如果我将 JLabel 添加到顶部 JPanel，并将侦听器添加到顶部面板，以便 jLabel 文本的颜色将鼠标悬停时更改，鼠标退出时重置为原始颜色，文本在不同的位置重新绘制，如下图所示：-

![http://s13.postimage.org/6yn3cw48n/Untitled.png](../Images/ce5c2dba7abca99998f175a4ebc4696d.png)

如有必要，我也会发布该代码。我认为这两种情况都存在同样的问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-17T03:50:11.323

您可能会因为用于背景的透明颜色而获得这些绘画工件。JComponents 不支持透明色作为背景色。这是@camickr 的一篇好[文章](http://tips4java.wordpress.com/2009/05/31/backgrounds-with-transparency/)，详细解释了该问题并提供了替代解决方案。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-17T03:50:30.933

您的结果并不意外，因为默认`Graphics2D` *组合*是[`AlphaComposite.SRC_OVER`](http://docs.oracle.com/javase/7/docs/api/java/awt/AlphaComposite.html#SRC_OVER). 如果您想要不同的结果，则需要使用不同的模式；[`AlphaComposite.SRC`](http://docs.oracle.com/javase/7/docs/api/java/awt/AlphaComposite.html#SRC)，例如，*不是*相加的。相关示例可在[此处](https://stackoverflow.com/a/7824225/230513)、[此处](https://stackoverflow.com/a/2166500/230513)和[此处找到](https://sites.google.com/site/drjohnbmatthews/threadwatch)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T11:08:11.593

而不是使用红色、绿色、蓝色和 alpha 例如： setBackground(new Color(236, 233, 216, 220)); 使用 setBackground（新颜色（236,233,216））；这是红色，绿色，蓝色。它将完美地工作。

# backbone.js - `lib` 中的骨干木偶、RequireJS 和依赖项

> ID：11515583
> 
> 赞同：1
> 
> 时间：2012-07-17T03:21:09.487
> 
> 标签：backbone.js, requirejs, marionette

我一直在开发 Backbone/RequireJS 应用程序，现在正在更新它以使用 Marionette。当 Marionette AMD 尝试在 root 中搜索 jquery、主干和下划线时，它一开始会中断`/`，但是，我有这些库`/lib`，我可以修改代码。解决这个问题的正确方法是什么？（如果可能的话，不要将库移出`/lib`）。

我现在所做的是使用有效的非 AMD 版本。但有时，我`CollectionView`在某些视图中遇到未定义的错误，这让我想知道它是否与为 RequireJS 使用非 AMD 构建有关

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T03:53:38.830

您不能（或至少不应该）修改每个库的源代码来告诉它它的依赖项在哪里。但是，您可以控制*代码*的位置。

我使用的方法是从[Volo 的默认项目模板](https://github.com/volojs/create-template)中复制的，将 RequireJS 设置`baseUrl`为`/lib`文件夹，以便您的库代码可以轻松找到它的依赖项，然后使用[`paths`配置](http://requirejs.org/docs/api.html#config-paths)将“app”别名到*我的*代码所在的任何位置，如下所示：

## 目录布局

```
/www 
  /js
    main.js
    /lib
      backbone.js
      backbone.marionette.js
      (etc)
    /app
      my-code.js
      view.js 
```

## main.js（或者你配置 RequireJS 的任何地方）

```
requirejs.config({
    baseUrl: 'www/js/lib',
    paths: {
        app: '../app'
    }
});
// Go on to load another module that contains the actual app. Example:
requirejs(['app/my-code']); 
```

配置中的所有路径`paths`都相对于`baseUrl`. 为上述定义映射`app`意味着当 RequireJS 加载名为*app/foo*的模块时，它将使用*(baseUrl)/../app/foo.js*：

## 我的代码.js

```
define(['backbone', 'app/view'], (Backbone, MyView) {/*...*/} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T14:02:28.117

这是一个常见问题，我知道有两种解决方案：

1) 为您的项目修改 AMD 版本的 Marionette。

指定这两个库的正确路径，就可以了。这是 Marionette 依赖列表中的一个简单更改，不会影响其余功能。

但这是个坏主意。这意味着您必须更改代码，并且每次获得新版本时都必须再次更改它。

2）在requirejs中使用命名模块/路径

我已经将依赖项指定为“jquery”、“underscore”、“backbone”字符串，这意味着您可以使用命名路径来配置这些依赖项所在的位置。

将此包含在您的 requirejs 配置中：

```
 require.config({
  paths: {
    "jquery": "/your/path-to/jquery"
  }
}); 
```

现在 Marionette 将找到“jquery”依赖项

这是两种解决方案中较好的一种，因为它不需要您更改木偶文件。它只需要你配置 RequireJS 来提供这些命名路径。

# java - 具有多线程的 Java 解析器

> ID：11515584
> 
> 赞同：1
> 
> 时间：2012-07-17T03:21:11.157
> 
> 标签：java, multithreading, parsing, multiprocessing

目前我有一个解析器设置，它将解析约 200 万条记录的 csv 文件。然后我应用一些过滤算法来清除我想要包含/排除的记录。最后将所有内容写回一个新的 csv 文件。

我做了一些基准测试，结果发现将数据写入 csv 非常昂贵，并且在同时过滤和附加到文件时会导致速度大幅下降。我想知道我是否可以执行所有过滤，将要写入的行放入队列中，然后当队列已满或所有过滤完成时，让第二个进程自行执行所有写入。

所以基本上总结一下：

```
Read line 
Decide whether to discard or keep
if I'm keeping the file, add it to the "Write Queue"
Check if the write queue is full, if so, start the new process that will begin writing
Continue filtering until completed 
```

感谢你的帮助！

***编辑：*** 我写的方式如下：

```
FileWriter fw = new FileWriter("myFile.csv");
BufferedWriter bw = new BufferedWriter(fw);
while(read file...) {
   //perform filters etc...
    try {
        bw.write(data.trim());
        bw.newLine();

    }catch(IOException e) {
        System.out.println(e.getMessage());
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T03:51:15.533

读取和写入进程都受 I/O 限制（寻找磁盘上的扇区并在内存中执行磁盘 I/O），而过滤过程则完全受 CPU 限制。这是多线程的一个很好的候选。

我会使用三个线程：读取、过滤和写入。这需要两个队列，但没有理由在处理之前等待队列变满。

*   读取器线程从文件中读取数据并将行追加到传入队列中。
*   过滤器线程从传入队列中获取行并将通过过滤器的行写入传出队列。
*   写入器线程从传出队列中获取行并将它们写入新文件。

确保使用缓冲的读取器和写入器来最小化读取器和写入器线程之间的争用。您希望尽量减少磁盘查找，因为这将成为瓶颈，假设过滤过程相当简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T04:23:17.917

除非您对使用 Spring 有任何限制，否则您可能需要考虑使用 Spring Batch。

# magento - 如何在 Magento 中为小部件实例添加新的块引用？

> ID：11515586
> 
> 赞同：3
> 
> 时间：2012-07-17T03:22:02.113
> 
> 标签：magento, widget

在 magento（Admin > CMS > Widget Instance）中添加新的小部件实例时，您需要为其选择布局更新。在块引用选项中，有几个默认区域，如页面顶部、页面底部、左侧、右侧......如何将自定义新区域添加到此选择框？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T03:36:27.747

好的。找到了答案。去`page.xml`，添加这个

```
<block type="core/text_list" name="custom_script" as="custom_script" translate="label">
    <label>IMPORTANT TO HAVE THIS TAG</label>
</block> 
```

重要的标签是`<label>`. 没有这个，您将看不到选择框中的区域。感谢Anthony Nguyen。

# c++ - 共享库中的成员函数指针地址

> ID：11515587
> 
> 赞同：1
> 
> 时间：2012-07-17T03:22:17.343
> 
> 标签：c++, linux, shared-libraries, function-pointers, member-function-pointers

我要解决的问题是制作一个函数名列表，映射到相应的成员函数指针。

我试图使用 nm 命令直接从 .so 文件中获取函数指针，然后通过函数指针调用它们，但我无法成功。

在 .so 文件中：

```
0xd52=>DerivedModel::DoSomething()
0xd94=>DerivedModel::checkReference() 
```

偏移量为 0x42。

但在运行时：

```
0x804d26e DoSomething
0x804d29c checkReference 
```

偏移量为 0x2E。

函数之间的偏移量有所不同。为什么应该不同？我想 vtable 是相同的，所以偏移量应该是相同的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T07:43:35.210

以下可能是符号表中的索引。

```
0xd52=>DerivedModel::DoSomething()
0xd94=>DerivedModel::checkReference() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T04:14:00.890

原因是 nm 返回符号的虚拟地址。共享库通常将符号表、数据段存储在不同的地方（检查[ELF](http://en.wikipedia.org/wiki/Executable_and_Linkable_Format)格式）。nm 返回符号表的地址。但是，当您加载库时，加载器会查找符号表并为每个函数加载数据部分，以便在运行时处理偏移量变化。

# c# - 从 ValueType 继承引用类型

> ID：11515590
> 
> 赞同：0
> 
> 时间：2012-07-17T03:22:57.837
> 
> 标签：c#, .net, vb.net

我们知道，在框架中，许多值类型即 Int32、Double 等确实继承自引用类型，即抽象类（System.ValueType 和实习生 System.Object 类）。现在我想知道是否可以通过 C# 代码显式模拟类似的概念。是的，我绝对知道 C# 编译器规则会阻止它完成。不知道VB.NET是否也阻塞？

下面的代码示例只是演示得很清楚。

```
 //Error code : Can not be done
    public abstract class MyClass
    {

    }

    public struct MyStruct : MyClass
    {
    } 
```

所以我虽然尝试通过 ilasm.exe 做同样的事情，但它给出了奇怪的错误，除了大量的谷歌搜索之外我无法解决。我向您提出的任何问题是，在框架内部可以进行这种继承，但在外部则不能。

因此，有什么方法可以模拟这种情况吗？

*PS：不，我在解决现实世界问题方面没有取得任何成就。只是会满足我的想法和学习。*

感谢和快乐编码，

禅行者:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T06:18:30.237

参见 ECMA 335 (http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-335.pdf)

第 I.8.9.10 节（值类型继承）：

> 在未装箱的形式中，值类型不继承自任何类型。装箱值类型应直接继承自，`System.ValueType`除非它们是枚举，在这种情况下，它们应继承自`System.Enum`。盒装值类型应密封。
> 
> 逻辑上，装箱的类型对应一个值类型
> 
> > 是一个对象类型。
> > 
> > 将指定哪个对象类型是它的基本类型（即，它继承自的对象类型）。
> > 
> > 将具有未定义字段的基本类型。
> > 
> > 将被密封以避免处理价值切片的复杂性。

此处指定的限制性更强的规则允许更有效的实施，而不会严重损害功能。

因此，非枚举值类型只能从 System.ValueType 继承是通用类型系统的限制，而不是 C# 语言的限制。

# python - 文件存在错误 - Python tarfile

> ID：11515591
> 
> 赞同：1
> 
> 时间：2012-07-17T03:23:01.800
> 
> 标签：python, tarfile

我在 Ubuntu 环境中的 tarfile 包遇到了一个有趣的问题。我在 /tmp/ 文件夹中有 jdk 包 (jdk-7u5-linux-x64.tar.gz) 和另一个包 (blah.tar.gz)。两者都可以（这意味着我可以通过右键单击它们来提取它们）。使用 blah.tar.gz 包，我使用流动代码：

```
import tarfile 
tar = tarfile.open('/tmp/blah.tar.gz', 'r:gz') 
tar.extractall()
tar.close() 
```

它运作良好。但是，当我尝试使用 jdk 包时（ tar = tarfile.open('/tmp/jdk-7u5-linux-x64.tar.gz', 'r:gz') ）。我收到以下错误：

```
In [26]: tar.extractall()
---------------------------------------------------------------------------
OSError                                   Traceback (most recent call last)

/home/bubuzzz/Projects/secude/java/jdk/<ipython console> in <module>()

/usr/lib/python2.7/tarfile.pyc in extractall(self, path, members)
   2044                 tarinfo = copy.copy(tarinfo)
   2045                 tarinfo.mode = 0700
-> 2046             self.extract(tarinfo, path)
   2047 
   2048         # Reverse sort directories.

/usr/lib/python2.7/tarfile.pyc in extract(self, member, path)
   2081 
   2082         try:
-> 2083             self._extract_member(tarinfo, os.path.join(path, tarinfo.name))
   2084         except EnvironmentError, e:
   2085             if self.errorlevel > 0:

/usr/lib/python2.7/tarfile.pyc in _extract_member(self, tarinfo, targetpath)
   2165             self.makedev(tarinfo, targetpath)
   2166         elif tarinfo.islnk() or tarinfo.issym():
-> 2167             self.makelink(tarinfo, targetpath)
   2168         elif tarinfo.type not in SUPPORTED_TYPES:
   2169             self.makeunknown(tarinfo, targetpath)

/usr/lib/python2.7/tarfile.pyc in makelink(self, tarinfo, targetpath)
   2240             # For systems that support symbolic and hard links.

   2241             if tarinfo.issym():
-> 2242                 os.symlink(tarinfo.linkname, targetpath)
   2243             else:
   2244                 # See extract().

OSError: [Errno 17] File exists 
```

我仍然不知道这里出了什么问题。因为当我将 jdk 包移动到另一个文件夹并使用该代码时，它再次运行良好。在运行代码之前，“tmp”文件夹是空的。有谁知道如何解决这个问题？

# android - Android Switched Startup Activity：旧的 Startup Activity 仍然如此

> ID：11515592
> 
> 赞同：0
> 
> 时间：2012-07-17T03:23:06.897
> 
> 标签：android, navigation, android-activity, back-button

这里很奇怪。

我最初有一个活动是启动活动（活动 A）。`android:launchMode="singleTask"`它有与之关联的标签。没问题。我的要求发生了变化，现在我将 Activity B 设为启动活动。我复制了意图过滤器，将名称更改为“.ActivityB”，并将启动模式标签也移了过来。

它似乎工作正常；当我启动应用程序时，我转到 Activity B。但是，当我从 Activity B 转到 Activity A 然后单击后退按钮时，应用程序退出并且不会重新打开（如果我没有启动模式标签，它将重新打开。 )

另一个例子。如果我从活动 A 到活动 B 到活动 A 到活动 B 一切都很好。当我单击返回时，我转到 Activity A（如预期的那样）但是当我再次单击返回时，我转到 Activity A 的前一个实例（哦哦），然后我再次单击返回并退出应用程序。两次都跳过活动 B。

我显然忽略了一些东西，但我不知道是什么。在切换启动活动之前，我没有覆盖任何后退按钮功能，并且一切正常。

**编辑** 以下是我的清单在任何更改之前的摘录

```
<activity android:name=".ActivityA" android:windowSoftInputMode="stateHidden" android:label="@string/app_name" android:launchMode="singleTask">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name="ActivityB"></activity> 
```

这是更改后的摘录

```
<activity android:name=".ActivityB" android:windowSoftInputMode="stateHidden" android:label="@string/app_name" android:launchMode="singleTask">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name="ActivityA"></activity> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T03:44:25.953

听起来像活动 B 被`finish()`调用或什么的。`OnCreate`我建议在, `OnPause`, ,中放入一些日志语句`OnResume`，`OnDestroy`这样您就可以监控 Activity B 的生命周期。它是一个高地活动（只能有 1 个），因此您不必担心会创建多个实例。此外，您可能会查看/覆盖[`onNewIntent`](http://developer.android.com/reference/android/app/Activity.html#onNewIntent%28android.content.Intent%29)并在那里放置一些日志记录调用。

`finish()`不是真正的答案，而是在开始活动 A 后或当活动 B 进入后台而你忘记它时，给你或某人打电话的甜甜圈美元。

如果不是这种情况，我会对活动 B 如何/何时死亡感兴趣。通常，如果它在返回时由于某些错误而停止，Android 会向你咆哮，但既然你没有提到我猜它不是。

# mysql - 什么时候应该在 MySQL 中使用 UNSIGNED 和 SIGNED INT？

> ID：11515594
> 
> 赞同：123
> 
> 时间：2012-07-17T03:23:12.870
> 
> 标签：mysql

我什么时候应该在 MySQL 中使用 UNSIGNED 和 SIGNED INT ？什么更好用或者这只是个人喜好？因为我见过它是这样使用的；

```
id INT(10) UNSIGNED NOT NULL AUTO_INCREMENT 
```

和

```
id INT(11) NOT NULL AUTO_INCREMENT 
```

* * *

## 回答 #1

> 赞同：196
> 
> 时间：2012-07-17T03:25:59.827

`UNSIGNED`只存储正数（或零）。另一方面，signed 可以存储负数（即，可能有一个负*号*）。

`INTEGER`这是每种类型可以存储的值范围的表格：

![MySQL INTEGER 类型和长度](../Images/a14ad3974bc286985f362e6d5d4d5771.png)
^(来源：[http ://dev.mysql.com/doc/refman/5.6/en/integer-types.html](http://dev.mysql.com/doc/refman/5.6/en/integer-types.html))

`UNSIGNED`范围从`0`to *`n`*，而有符号的范围从 about `-n/2`to `n/2`。

在这种情况下，您有一个`AUTO_INCREMENT`ID 列，因此您不会有底片。因此，使用`UNSIGNED`. 如果您不使用`UNSIGNED`该`AUTO_INCREMENT`列，则您的最大可能值将是原来的一半（并且值范围的负半部分将未被使用）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-17T03:25:55.730

用于`UNSIGNED`非负整数。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-11-21T16:14:44.043

基本上`UNSIGNED`，您为整数提供了两倍的空间，因为您明确指定不需要负数（通常是因为您存储的值永远不会是负数）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-07-18T12:29:06.290

我不同意**vipin cp**。

确实是第一位用于表示符号。但是**1**表示负值，**0**表示正值。更多的负值以不同的方式编码（二进制补码）。TINYINT 示例：

```
The sign bit
|
1000 0000b = -128d  
...  
1111 1101b = -3d  
1111 1110b = -2d  
1111 1111b = -1d  

0000 0000b = 0d  
0000 0001b = 1d  
0000 0010b = 2d  
...  
0111 1111b = 127d 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-10-14T05:11:20.513

对于负整数值，`SIGNED`使用，对于非负整数值，`UNSIGNED`使用。它总是建议使用`UNSIGNED`id 作为主键。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-01-15T16:55:32.680

我认为，以分钟或小时或秒格式`UNSIGNED`存储`time_duration`（例如：）`resolved_call_time = resolved_time(DateTime)-creation_time(DateTime)`值之类的值肯定是非负数的最佳选择

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-07-18T12:36:58.023

如果您知道要存储的号码类型，则可以进行相应选择。在这种情况下，您的“id”永远不会是负数。所以你可以使用无符号整数。有符号整数的范围：-n/2 到 +n/2 无符号整数的范围：0 到 n 所以你有两倍的可用正数。相应地选择。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-08-17T05:55:31.947

我想在 a 中添加的一件事`signed int`，即`default value in mysql`，`1 bit`将用于表示`sign`。`-1 for negative and 0 for positive.` 因此，如果您的应用程序仅插入正值，则最好指定无符号。

# c# - 按顺序休眠组

> ID：11515595
> 
> 赞同：0
> 
> 时间：2012-07-17T03:23:20.193
> 
> 标签：c#, nhibernate, fluent-nhibernate, group-by, sql-order-by

**任务表：**

```
id AssigneeID Name
1    2        TODO1
2    3        TODO2
3    1        TODO3 
```

**受让人表：**

```
id Name Status
1  Max  Available
2  Ryan NotAvailable
3  Lisa NotAvailable 
```

我的**jqgrid**表是这样的：

```
Name   Assignee Status
TODO1  Ryan     NotAvailable
TODO2  Lisa     NotAvailable
TODO3  Max      Available 
```

我想对状态列进行排序，所以我这样做了：

```
var query = scope.Session.QueryOver<Task>().Where(s=>s.Id!=null);

var x = query.Select(Projections.Distinct(Projections.Property<Task>(task => task.AssigneeID))).AddSortExpression("Status desc").List<Assignee>(); 
```

但是，这会返回错误，因为 Status 位于 Assignee 表中，而不是 Task 表中。

此外，我如何在我的代码中使用 GROUP BY 因为我认为一旦我尝试对状态进行排序就会导致错误。它不知道先放哪个，Ryan 的 NotAvailable 或 Lisa 的 NOT Available ...请帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T12:43:47.310

首先，您需要让 NH 了解任务和受让人之间的关联。那你为什么需要一个 groupBy

```
class Task
{
    public virtual Assignee Assignee { get; set; }
} 
```

如果你只需要这 3 个属性

```
SomeDto dto = null;
Assignee assignee = null;
session.QueryOver<Task>()
    .JoinAlias(task => task.Assignee, () => assignee)
    .OrderBy(() => assignee.Status)
    .SelectList(list => list
        .Select(task => task.Name).WithAlias(() => dto.Name)
        .Select(() => assignee.Name).WithAlias(() => dto.Assignee)
        .Select(task => assignee.Status).WithAlias(() => dto.Status))
    .TransformUsing(Transformers.AliasToBean<SomeDto>())
    .List<SomeDto>() 
```

或者如果您希望返回整个任务和受理对象

```
Assignee assignee = null;
var tasks = session.QueryOver<Task>()
    .JoinAlias(task => task.Assignee, () => assignee)
    .OrderBy(() => assignee.Status)
    .List(); 
```

# seo - 如何使用 robots.txt 禁止所有子域的索引？

> ID：11515599
> 
> 赞同：0
> 
> 时间：2012-07-17T03:23:45.277
> 
> 标签：seo

当前`*.domain.com`显示与内部相同的内容`domain.com`并指向相同的文档根，

如何阻止 SE 索引子域？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T03:39:15.083

您的子域如何呈现不同的 robots.txt 文件

```
User-agent: *
Disallow: / 
```

# c - OpenCL。数组寻址/指针的奇怪错误

> ID：11515601
> 
> 赞同：2
> 
> 时间：2012-07-17T03:24:05.960
> 
> 标签：c, linux, arrays, pointers, opencl

我有这个简单的内核用于测试。

```
__kernel void nfa(__global const int *a, __global int *output)
{
        output[0] = a[0];
} 
```

注意：这是在 cpu 上运行的，内存可能在主机上。它会导致此错误。

*** 检测到 glibc****./program: malloc(): smallbin 双链表已损坏：0x0000000000a4a540 ** **

 *我怀疑这会以某种方式破坏程序的一部分，因为它正在访问主机内存。但据我所知，所有内存都正确分配。它在堆栈上，但在运行时保持在范围内。

但是，如果我这样做：

```
 __kernel void nfa(__global const int *a, __global int *output)
    {
            a = a;
            output[0] = a[0];
    } 
```

结果是答案 2，这是正确的，因为 a 是具有 [2, 4, 8] 的数组；

对其自身的分配解决了这个问题......

这也很好，结果为 4。

```
 __kernel void nfa(__global const int *a, __global int *output)
    {
            output[0] = a[1];
    } 
```

似乎只是访问 a[0]，而不分配给它自己会导致问题。

有谁知道发生了什么？

我在 Linux 上使用 AMD OpenCL 驱动程序（使用英特尔 CPU，但我有 AMD 卡）。

编辑：

创建缓冲区的代码（精简下来，数组和缓冲区之间还有其他代码）：

```
int a[3];
a[0] = 2;
a[1] = 4;
a[2] = 8;

cl::Buffer bufferA = cl::Buffer(context, CL_MEM_READ_ONLY | CL_MEM_USE_HOST_PTR , sizeof(int) * 3, &a); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-14T00:20:19.217

我可能是错的（我没有使用 C++ OpenCL，但我相信它与 C 绑定大致相同）但我相信：

调用 cl::Buffer 的最后一个参数类型是 void*。你想要的是一个指向你传入的内存块的指针，在这种情况下是数组（因为数组，它会自动转换为指针）。您已经传入了一个*指向*数组的指针（即指向指针的指针），编译器会悄悄地将其强制转换为 void*。这意味着，您最终会复制数组指针，然后在内存中复制 2 个整数之后发生的任何事情。我可以想象这会导致糟糕的结果

我不确定为什么 a=a 或 output = a[1] 会修复它，因为我没有做 CPU OpenCL 的经验，而且我不确定具体是如何工作的。在 GPU 上，您可能可以将其解释为设备出于性能原因缓存内存，从而防止发生内存失效（或其他情况）

编辑：哎呀，刚刚意识到这有多大了，我应该学会更好地阅读*

# xcode - 我的游戏突然崩溃，短信发送到已释放的实例 0x13b07370 ......知道为什么

> ID：11515602
> 
> 赞同：0
> 
> 时间：2012-07-17T03:24:14.817
> 
> 标签：xcode, cocos2d-iphone, chipmunk

我正在使用花栗鼠开发一个游戏，我们必须拖动一个移动图像并将其放入一个盒子中。我正在一个班级中创造一个类似炸弹的生物。当我单击炸弹并开始在触摸结束阶段拖动时，我为另一个类 [PlayLayer] 创建了一个委托，并将炸弹传递给该类的方法`[delegate draggingFinishedForBomb:self];`。在此我检查炸弹是否在盒子里。一切正常，但我的游戏随机崩溃显示：

> [PlayLayer draggingFinishedForBomb:]：消息发送到已释放实例 0x13b07370

我已经在 super dealloc 中释放了所有的 alloc。我找不到原因。

# wordpress - Wordpress - 删除 wp-post-image 类

> ID：11515605
> 
> 赞同：0
> 
> 时间：2012-07-17T03:25:11.293
> 
> 标签：wordpress

长话短说，我发现当一些帖子与 reddit 共享时，它会提取错误的图像。它从侧边栏中提取图像，我认为它这样做是因为缩略图具有 wp-post-image 作为其类，因此它认为那是发布图像，但它只是侧边栏的一部分......

我怎样才能让它从函数 the_post_image 中删除该类，这样我就不必担心这个了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T15:59:21.743

您是否尝试过使用“Facebook Like Thumbnail”插件？我的一个网站也遇到了同样的问题，它能够解决这个问题。[http://blog.ashfame.com/2011/02/wordpress-plugin-fix-facebook-like-thumbnail/](http://blog.ashfame.com/2011/02/wordpress-plugin-fix-facebook-like-thumbnail/)

# php - 编写此 sql 查询的最有效方法是什么？

> ID：11515608
> 
> 赞同：-5
> 
> 时间：2012-07-17T03:25:31.357
> 
> 标签：php, mysql, sql

我相当不错并且正在编写 SQL 查询，但我的大脑一直在旋转，试图找出编写查询的最佳方法。这是设置：

表**动物**有列：**animal_id**、**farmer_id**、**type**、**born_on**

这张表中有很多行，记录了每个农民的所有动物出生情况。

**我需要做的是获取农民的所有农民 ID，在他们最近的 10 个动物出生中，至少有 3 个属于“绵羊”类型。**

任何帮助表示赞赏！

这是我的尝试：

```
SELECT a.farmer_id
  FROM Animals a
 WHERE
    (select count(game_id)
       from Animals b
      where b.farmer_id = a.farmer_id
      ORDER BY born_on DESC LIMIT 10) >= 3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T04:47:23.837

这有点困难，因为 MySQL 没有 Row_Number() 所以你需要模拟它。一种方法是使用自联接和计数。您也可以使用`@rownumber` [此处描述的技术](https://stackoverflow.com/questions/10485769/mysql-update-a-column-with-an-int-based-on-order/10485817#10485817)

在我的示例中，我使用 animal_id 来查找最近的，但您可能希望将 JOIN 条件更改为 `AND t1.born_on < t2.born_on`

```
SELECT farmer_id 
FROM 
(

SELECT t1.farmer_id, 
       t1.animal_id, 
       Count(t2.animal_id) rn, 
       t1.type 
FROM   table1 t1 
       LEFT JOIN table1 t2 
              ON t1.farmer_id = t2.farmer_id 
                 AND t1.animal_id < t2.animal_id 
GROUP  BY t1.farmer_id, 
          t1.animal_id, 
          t1.type
    ) as t
WHERE RN < 10
and type = 'Sheep'
HAVING COUNT(animal_id) >= 3 
```

[演示](http://sqlfiddle.com/#!2/5a76b/14)

使用的样本数据

```
| ANIMAL_ID | FARMER_ID |  TYPE |
---------------------------------
|         1 |         1 |   dog |
|         2 |         1 |   dog |
|         3 |         1 |   dog |
|         4 |         1 |   dog |
|         5 |         1 |   dog |
|         6 |         1 |   dog |
|         7 |         1 |   dog |
|         8 |         1 |   dog |
|         9 |         1 |   dog |
|        10 |         1 |   dog |
|        11 |         2 |   dog |
|        12 |         2 |   dog |
|        13 |         2 |   dog |
|        14 |         2 |   dog |
|        15 |         2 |   dog |
|        16 |         2 |   dog |
|        17 |         2 | sheep |
|        18 |         2 | sheep |
|        19 |         2 | sheep |
|        20 |         3 | sheep |
|        21 |         3 | sheep |
|        22 |         3 | sheep |
|        23 |         3 |   cat |
|        24 |         3 |   cat |
|        25 |         3 |   cat |
|        26 |         3 |   cat |
|        27 |         3 |   cat |
|        28 |         3 |   cat |
|        29 |         3 |   cat |
|        30 |         3 |   cat | 
```

结果只有 2，因为即使 3 有三只羊，它们也不在最后 10 只

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T04:38:30.607

假设您使用的是 PHP（在此处标记），而不是进行一次查询，进行多次查询并进行选择（通用或绵羊）要简单得多

或者，选择三只羊，获取指数，然后再选择七只羊，其中指数不是前三只羊的指数。

# ruby-on-rails - 使用 ActiveRecord 按关联字段排序

> ID：11515619
> 
> 赞同：1
> 
> 时间：2012-07-17T03:26:44.920
> 
> 标签：ruby-on-rails, activerecord, associations

是否可以编写一个 ActiveRecord 查询，如果关联存在则按关联字段排序，否则按对象本身的属性排序？

**示例：**我有一个`Discussion`对象`has_many :comments`。我想显示按 排序的讨论列表`discussion.latest_comment.created_at`。但是，有些讨论可能没有任何评论，在这种情况下，我想改用他们的`discussion.created_at`属性。

问题是我需要结果是一个`ActiveRecord::Relation`（出于性能原因，也因为我们使用 Kaminari [它需要一个 Relation 对象]）。

我唯一能想到的就是实际创建一个新字段，就像每次发布新评论时`discussion.latest_comment_at`最初填充然后更新一样。`discussion.created_at`然而，从维护的角度来看，这似乎不是很直接（例如，当评论被删除时会发生什么？）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T03:31:29.693

我不知道如何通过 SQL 来做到这一点，所以我作弊了，我让我的代码[在创建主题时](https://github.com/radar/forem/blob/master/app/models/forem/post.rb#L116-118)[设置一个`last_post_at`](https://github.com/radar/forem/blob/master/app/models/forem/post.rb#L116-118)属性。

这样，我就可以对主题进行排序，`last_post_at`而不必一次查询两个表。

我见过其他论坛系统也是这样做的，看起来你正在设计的正是一个类似论坛的系统。

# python - 在 Python 中安全访问对象，无需 try/catch

> ID：11515620
> 
> 赞同：4
> 
> 时间：2012-07-17T03:26:58.040
> 
> 标签：python, idioms, accessor

在 Objective-C 中，你可以做`[variable valueForKeyPath:@"abc.def"]`，`[[variable abc] def]`如果 `abc`不存在，`variable`你`nil`最终会得到一个值，并且不会得到错误或异常。这真的很方便。Python中有这样的东西吗？我知道你可以（至少对于字典）

```
abc = variable.get('abc', None)
if abc:
    def = abc.get('def', None) 
```

或者

```
try:
    def = variable.get('abc').get('def')
except:
    pass 
```

这似乎非常冗长。当我只想访问对象的属性或返回 None 值时，有没有更简单的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T03:39:15.753

关于什么

```
def = variable.get('abc', {}).get('def',None) 
```

好吧，这只适用于 dict..

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T03:49:20.130

您可以使用嵌套调用`getattr`：

```
def = getattr( getattr(variable, 'abc', None), 'def', None) 
```

您也可以省去方法，而只需抓住`AttributeError`

```
try:
    def = variable.abc.def
except AttributeError:
    def = None 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T04:00:26.893

Python 通过设计避免了这种行为，因为它可能导致难以诊断的错误。通过引发异常，程序员被迫使用 dict.get()、getattr() 等显式请求默认值，或者以其他方式处理查找失败的情况。程序恰好在程序中发生错误的地方停止。

在 Objective C 的情况下（以及 PHP，这是出了名的不愉快的调试），程序可能会在你意识到你的变量设置不正确之前继续运行很长时间。一般来说，错误发生的时间越长，查找原因就越困难。这很不方便。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-17T03:36:33.200

对于您想要的内容，没有简短的内置语法。您可能想编写一个辅助函数来为您执行此操作，或者`collections.defaultdict`可能有用。

# css - Css文本换行问题

> ID：11515623
> 
> 赞同：0
> 
> 时间：2012-07-17T03:27:13.120
> 
> 标签：css, paging

检查此链接 www.checkwebsitedemo.com/paging.jpg 上的图像，您会注意到 Next >> 的一部分包含在 2 行中，即 >> 显示在第 2 行，我希望它们始终在同一行中。如果空间较小，则整个 Next 按钮应转到下一行，但不应中断。

请让我知道如何通过 css 做到这一点。下面是我的css代码。

```
 .paging {font-size:15px !important; line-height:250%; text-align:center;}
    .paging .paginate, span.inactive, a.current {font-size:12px; margin:1px; padding:3px 5px;}
    .paging span.paginate_dropdown {float:right;}
    .paging span.inactive {background:none !important; border:1px solid #CCCCCC !important; color:#CCCCCC !important; cursor: default;}
    .paging a.paginate {border:1px solid #CCCCCC; color:#0A246A; text-decoration:none;}
    .paging a.paginate:hover {background:#088AD8; border:1px solid #000000; color:#FFFFFF; text-decoration:none; text-shadow:0 1px 1px #000000;}
    .paging a.current {background:#088AD8; border:1px solid #000000; color:#FFFFFF; font-weight:bold; text-decoration:none; text-shadow:0 1px 1px #000000;} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T03:32:19.327

使用`display: inline-block;`应该让那个按钮粘在一起；要么留在第一线，要么一起被推倒。

但是，总的来说，您应该调整样式，以免按钮被推到第二行。也许“......”还有几页。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T03:44:33.263

添加`white-space:nowrap;`到您正在谈论的按钮的CSS。

# ios - 从传递的 id 设置 NSString

> ID：11515625
> 
> 赞同：0
> 
> 时间：2012-07-17T03:27:14.527
> 
> 标签：ios, nsstring, master-detail

我有一个使用主详细信息模板的 ios 应用程序，主视图将 NSString 的 id 传递给子视图，以便子视图显示在用户可以编辑的文本视图中。我想要做的是，当按下按钮从子视图返回到主视图时，将传入的 NSString 的文本设置为用户将其更改为的任何内容。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T04:17:38.093

我对此的回答是不要将字符串传递给详细视图。通过一个模型。主节点和细节节点之间的数据必须有一些覆盖模型。传递模型，在细节中更新模型，然后当你回到master时，模型中的变化会自动反映在master中。

这是一个示例，假设 master 包含一个模型数组，这些模型对应于 tableView 的单元格。然后，在详细视图中，当您更改 self.model.myString 时，主视图也将更新。

```
@interface MySimpleModel
@property (copy, nonatomic) NSString *myString;
@end 
```

…</p>

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([segue.identifier isEqualToString:@"To Detail From Master"])
    {
        // Get which indexPath of the cell in the master to use.
        NSIndexPath *indexPath = [self.tableView indexPathForCell:(UITableViewCell *)cell];

        // Get reference to the destination view controller
        DetailViewController *vc = [segue destinationViewController];

        // Pass any objects to the view controller here, like...
        vc.model = (MySimpleModel *)[self.models objectAtIndex:indexPath.row];
    }
} 
```

# asp.net-mvc - 如何在我的视图模型中使用复杂对象？

> ID：11515626
> 
> 赞同：3
> 
> 时间：2012-07-17T03:27:14.733
> 
> 标签：asp.net-mvc

我刚刚开始使用 MVC，并且正在开发我的第一个项目。我一直在试图解决我的视图模型和域对象的问题。

我的视图模型由一个客户对象和一个地址对象组成。问题是，即使客户和地址的所有属性都显示在视图上，如果我在视图模型中明确定义每个属性，我只能保存更改。换句话说，我需要在视图模型中复制客户和地址对象的属性。这解决了我所有的问题。

我的问题是，我是否需要在视图模型中显式定义每个属性，还是有一种方法可以使用 Customer 类型的 Customer 属性和 Address 类型的 Address 属性定义视图模型（这会更简单）？

根据我在网上找到的内容，我认为答案是我必须在视图模型中定义每个属性。如果这是正确的，有没有办法自动为我做这个映射？

ASP.NET MVC 4

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T03:33:40.777

[AutoMapper](https://github.com/AutoMapper/AutoMapper)在制图方面非常流行。

关于您的 ViewModel 定义，您希望您的 ViewModel 直接对应于您的 View。您的 ViewModel 中不应有未在 View 上使用的属性。如果您有无逻辑视图（您应该这样做！），那么通常您的 ViewModel 上的属性将直接与您在您的视图上的字段相关。

当然，有时两个 ViewModel 会使用完全相同的属性，并且没有什么可以阻止您执行以下操作：

```
public class CustomerViewModel {
    public string Name { get; set; }
    public AddressViewModel Address { get; set; }
}

public class AddressViewModel {
    public string AddressLine1 { get; set; }
} 
```

问题是，一旦你开始这样做，很容易让自己滑入一个没有在某处使用过一次或两次的属性，可能会引入一些 ViewModel 继承，最终得到非常混乱的 ViewModel。

**一般来说，我发现建议使用平面 ViewModels**。例如，如果您有两个需要客户和地址信息的视图，只需点击一下，为这两个视图创建一个单独的 ViewModel 并复制它们的属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T03:42:58.527

在. **_** _ `ViewModel`您的 ViewModel 可能看起来与您的域模型相似。但是您的视图模型只需要视图所需的属性。不是所有的属性。

例如：您可能有一个带有属性的客户域模型`CustomerID, FirstName,LastName,CreatedDate,CreatedBy,LastModifiedDate`。

```
public class CustomerDomainModel
{
  public int CustomerID { set;get;}
  public string FirstName { set;get;}
  public string LastName { set;get;}
  public DateTime CreatedDate { set;get;}
  public DateTime LastModifiedDate { set;get;}
  public int  CreatedBy { set;get;}
} 
```

但是在您的视图中（UI 表单），您可能需要仅显示 和 的`FirstName`字段`LastName`。所以你的 viewModel 可能只有这 3 个属性（名字和姓氏 + 另一个属性`CustomerID`也有）

```
public class CustomerViewModel
{
  //My view is going to use only these 3 fields.
  // Hence no other properties i am defining here
  public int CustomerID { set;get;}
  public string FirstName { set;get;}
  public string LastName { set;get;} 
} 
```

要在这 2 个（域对象到 ViewModel）之间进行映射，您可以考虑使用[Automapper](https://github.com/AutoMapper/AutoMapper)

# java - 如何迭代地图列表并找到一个字段的最大值并删除其他

> ID：11515630
> 
> 赞同：0
> 
> 时间：2012-07-17T03:27:47.970
> 
> 标签：java, list, map

如何迭代地图列表并找到字段的最大值

我有一张清单，里面有一张地图

`listGrid={{id=5,name="person",no=9},{id=6,name="person",no=19},{id=6,name="jam",no=10}}`

我想要结果 div，因为它应该删除重复的 id 并且拥有最多没有字段

```
 List<Map> listGrid=new ArrayList<Map>();
    Map<String,Object> resultMap=new HashMap<String,Object>();
    resultMap.put("id", "5");
    resultMap.put("name", "one");
    resultMap.put("no", 1);
    listGrid.add(resultMap);
    resultMap.put("id", "5");
    resultMap.put("name", "one");
    resultMap.put("no", 11);
    listGrid.add(resultMap);
    resultMap.put("id", "1");
    resultMap.put("name", "one");
    resultMap.put("no", 5);

    List list=new ArrayList();
     Map  mapList=new HashMap();
       ListIterator litr = listGrid.listIterator(); 
        while(litr.hasNext()) {

            Map element = (Map)litr.next(); 
            String id= (String) element.get("id");
            Integer damagesNo = (Integer) element.get("no");
            if(mapList.containsKey(id)){
            Integer mapCode = (Integer) mapList.get(id);
            int damagesNoInt = damagesNo;
            int mapCodeInt = mapCode;
            if(damagesNoInt <= mapCodeInt){
                int i=litr.nextIndex()-1;
                list.add(i);
            }
            else{
                mapList.put(id, damagesNo);

            }}
            else{
                mapList.put(id, damagesNo);
            }
        }
        System.out.println(listGrid); 
```

我试过这个，但它不能正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T04:34:07.377

根据我的说法，您应该为您的 id、no、name 值创建 DTO 类对象，并对它们进行处理，这将是一种正确的方法

试试这个代码

```
public static void main(String[] args) throws IOException {

        List<Map> listGrid = new ArrayList<Map>();

        Map<String, Object> resultMap = new HashMap<String, Object>();
        resultMap.put("id", "5");
        resultMap.put("name", "person");
        resultMap.put("no", 9);
        listGrid.add(resultMap);
        resultMap = new HashMap<String, Object>();
        resultMap.put("id", "6");
        resultMap.put("name", "person");
        resultMap.put("no", 19);
        listGrid.add(resultMap);
        resultMap = new HashMap<String, Object>();
        resultMap.put("id", "6");
        resultMap.put("name", "jam");
        resultMap.put("no", 21);
        listGrid.add(resultMap);
        resultMap = new HashMap<String, Object>();
        resultMap.put("id", "6");
        resultMap.put("name", "jam");
        resultMap.put("no", 21);
        listGrid.add(resultMap);
        List<Map> destListGrid = new ArrayList<Map>();
        HashMap<String, Object> destMap = new HashMap<String, Object>();

        ListIterator litr = listGrid.listIterator();
        while (litr.hasNext()) {

            HashMap<String, Object> element = (HashMap<String, Object>) litr
                    .next();
            String id = (String) element.get("id");
            Integer damagesNo = (Integer) element.get("no");
            if (destMap.containsKey(id)) {
                Integer mapCode = (Integer) destMap.get(id);
                if (mapCode <= damagesNo) {
                    destMap.remove(id);
                    destMap.put(id, damagesNo);
                }
            } else {
                destMap.put(id, damagesNo);
            }
        }

        for (Map map : listGrid) {

            if (destMap.containsKey(map.get("id"))
                    && destMap.get(map.get("id")) == map.get("no")) {
                            destMap.remove(map.get("id"));  
                destListGrid.add(map);
            }
        }

        System.out.println(destListGrid);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T06:23:24.670

只有在适合您的情况下，我才会建议其他方式。该解决方案基于创建专用类`hashCode`和`equals`重写方法，允许标准数据结构在您身上工作。您需要 hashCode 来返回您的实体的 id 值和 equals 方法来比较 id 是否相等，并比较不比较任何值，而不是只允许具有更大值的实体替换以前的实体。请参阅代码：

```
public class MapList {

static class Entity {

    int id;
    String name;
    int no;

    public int hashCode() {
        return id;
    }

    public boolean equals(Object o) {
        if (o instanceof Entity) {
            Entity entity = (Entity) o;
            return id == entity.id && entity.no >= no;
        }
        return false;
    }

    public Entity(int id, String name, int no) {
        this.id = id;
        this.name = name;
        this.no = no;
    }

    public String toString() {
        return String.format("[id=%d,name='%s',no=%d]", id, name, no);
    }

}

public static void main(String[] args) {
    List<Entity> initialList = new ArrayList<Entity>();
    initialList.add(new Entity(5, "person", 9));
    initialList.add(new Entity(6, "person", 19));
    initialList.add(new Entity(6, "jam", 10));
    System.out.println(initialList);
    Set<Entity> magicCleanSet = new HashSet<Entity>();
    magicCleanSet.addAll(initialList);
    System.out.println(magicCleanSet);
} 
```

}

输出是：

```
[[id=5,name='person',no=9], [id=6,name='person',no=19], [id=6,name='jam',no=10]]
[[id=5,name='person',no=9], [id=6,name='person',no=19]] 
```

希望这将有助于并适合您的任务。

# java - MySql 通知

> ID：11515635
> 
> 赞同：-2
> 
> 时间：2012-07-17T03:28:19.810
> 
> 标签：java, mysql

再会！我正在开发一个使用 java 和 mysql 作为后端的应用程序。我的问题是，我希望在数据库发生更改时通知应用程序，例如对记录的插入/删除/更新。我用谷歌搜索了很多次，找到了一些答案，比如使用 JMS 和其他。我需要一些帮助来获得这个功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T07:37:26.680

数据库中的用户 mysql 触发器。如果您不使用触发器，请[在此处](http://dev.mysql.com/doc/refman/5.0/en/create-trigger.html)学习。

# c++ - 拆分共享内存？

> ID：11515638
> 
> 赞同：0
> 
> 时间：2012-07-17T03:28:27.183
> 
> 标签：c++, winapi

使用分配的共享内存块`CreateFileMapping()`并给出它的句柄。一些数据是使用写入的`MapViewOfFile()`——称之为“源”

现在我希望将共享内存分成许多小块并获取它们的句柄。
有没有办法在不`CreateFileMapping()`再次调用并从“源”复制的情况下做到这一点？

`OpenFileMapping()`并且`MapViewOfFile()`使用适当的偏移量将起作用，但问题是，在这种情况下，调用的进程`OpenFileMapping()`可以访问其他进程在“源”中写入的数据，并且它们可能会因使用错误的偏移量而损坏。

长话短说，我正在寻找类似的东西`OpenFileMapping(String name, UINT **offset**, ...)`

* * *

最后一句话具有误导性。

我真正想做的是这样的：

```
<Host process>
HANDLE hShm = CreateFileMapping(INVALID_HANDLE_VALUE, ..., "shm");
void* pShm = MapViewOfFile(hShm);
UINT numShms = *(UINT*)pShm;   // first 4 bytes stores number of shared memory blocks
HANDLE *hShmSplit = new HANDLE[numShms];    
for(size_t i=0; i<numShms; i++) {
   TCHAR shmName[32];
   wsprintf(shmName, "shm%d", i);
   // suppose offset is set
   pShm+=offset;
   hShmSplit[i] = *CreateFileMappingFromExistingMapping*(pShm, shmName);
}
CloseHandle(hShm);   // no longer used

<Client process>
TCHAR* shmName="shm1";
HANDLE hShm = OpenFileMapping(shmName);
LPVOID p = MapViewOfFile(hShm);
// use shared memory 
// Now the client process has access to shm1 but not to shm2, shm3, or other shm_x's. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T13:37:46.960

共享内存通过将相同的物理内存页面映射到多个进程的虚拟地址空间来工作。一旦进程可以访问内存页面，它就可以访问整个页面。内存页的长度为 4KB（尽管有 Itanium）。

因此，如果您可以将映射文件拆分为多个片段，那么这些片段必须从页面边界开始，并且大小必须是 4KB 的精确倍数。所以它不会那么有用。

如果您想与不同的客户端进程安全地共享不同的内存位，则必须为每个进程使用单独的映射。

# javascript - 使用jquery创建导航系统

> ID：11515641
> 
> 赞同：0
> 
> 时间：2012-07-17T03:29:03.687
> 
> 标签：javascript, jquery, navigation

我正在尝试创建一个菜单系统，当单击列表锚点时，会显示 ul 列表下方的 div。但系统无法正常工作，我无法控制用户是否超过了显示的 div。下面是代码

*   我创建了 UL 列表来创建选项卡
*   我创建了 DIV 作为要显示的页面
*   我创建了 jquery mouseenter 事件来显示与链接 ID 具有相同类的 div
*   我使用 mouseleave 函数来隐藏显示的 div。

    ```
     <style>
     .tabs_button ul {list-style:none; margin:0px; padding:0px;}
     .tabs_button ul li {float:left; display:inline; margin-right:50px;}
    .tabs_button ul li a{color:#FFF; text-decoration:none;}
     .tabs_button ul li a:hover{color:#FFC222;}
      .tab_pages{clear:both; position:absolute; }
        .tab_pages div{display:none;width:200px; height:200px; background-           color:#CCC;margin-top:30px;}
     </style>
     <script>
         $(document).ready(function(e) {
        $(".tabs_button a").mouseenter(function(e) {
        var tid=this.id;
    $(".tab_pages div").hide();
             $(".tab_pages ."+tid).show();
             });
           $(".tabs_button a").mouseleave(function(e) {
    var tid=this.id;
            $(".tab_pages ."+tid).hide();
             });

             });
           </script>
        <div class="tabs_button">
        <ul>
         <li><a href="#" id="page1">Cars</a></li>
         <li><a href="#" id="page2">Price & Offers</a></li>
         <li><a href="#" id="page3">Chevy Experience</a></li>
         <li><a href="#" id="page4">Service</a></li>
         <li><a href="#" id="page5">Contact Us</a></li>
          </ul>
          </div>
         <div class="tab_pages">
         <div class="page1">
         Cars Display Page
          </div>
            <div class="page2">
             Offers Display Page
             </div>
            <div class="page3">
            Chevy Exp Page
             </div>
             <div class="page4">
            Service Display Page
             </div>
              <div class="page5">
             Contact us Display Page
             </div>
               </div> 
    ```

在这里，我遇到的主要问题是如果用户将鼠标悬停在 div 上，则保持 div 显示。

编辑：[小提琴](http://jsfiddle.net/VVPtX/6/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T07:58:44.550

[我已经在http://codebins.com/bin/4ldqpam](http://codebins.com/bin/4ldqpam)上为上述问题创建了完整的代码库， 所以，试试吧。

要解决此问题，请执行以下步骤：

1) 首先在 html 标头标签上包含最新的 jQuery.js javascript 文件。

2）HTML（一点点变化）

```
<div class="tabs_button">
  <ul>
    <li id="page1">
      <a href="#">
        Cars
      </a>
    </li>
    <li id="page2">
      <a href="#">
        Price &amp; Offers
      </a>
    </li>
    <li id="page3">
      <a href="#">
        Chevy Experience
      </a>
    </li>
    <li id="page4">
      <a href="#">
        Service
      </a>
    </li>
    <li id="page5">
      <a href="#">
        Contact Us
      </a>
    </li>
  </ul>
</div>

<div class="tab_pages">
  <div class="page1">
    Cars Display Page
  </div>

  <div class="page2">
    Offers Display Page
  </div>

  <div class="page3">
    Chevy Exp Page
  </div>
  <div class="page4">
    Service Display Page
  </div>
  <div class="page5">
    Contact us Display Page
  </div>
</div> 
```

3）CSS（添加更多样式）：

```
body{
  background-color:#000;
}
.tabs_button{
  width:950px;
}
.tabs_button ul {
  list-style:none;
  margin:0px;
  padding:0px;

}
.tabs_button ul li {
  width:120px;
  float:left;
  display:inline;
  margin-left:10px;
  margin-right:10px;
  text-align:center:

}
.tabs_button ul li:hover a{
  color:#FFC222;
}
.tabs_button ul li:hover{
  background-color:#445566;
}
.tabs_button ul li a{
  color:#FFF;
  text-decoration:none;
}
.tabs_button ul li a:hover{
  color:#FFC222;
}
.tabs_button ul li.selected a{
  color:#FFC222;
}
.tabs_button ul li.selected{
  background-color:#445566;
}
.tab_pages{
  clear:both;
  position:absolute;
}
.tab_pages div{
  display:none;
  width:120px;
  height:200px;
  color:#fff;
  background-color:#445566;
  margin-top:27px;
  position:absolute;
} 
```

4) 用于菜单导航的 JQuery：

```
$(".tabs_button li,.tab_pages div").mouseenter(function() {
    var className = $(this).attr('id');
    $(".tabs_button #" + className).removeClass("selected");
    if (typeof(className) == "undefined" || className == null) {
        className = $(this).attr('class');
        $(".tabs_button li").removeClass("selected");
        $(".tabs_button #" + className).addClass("selected");
    }

    $(".tab_pages div").hide();
    var offset = $(".tabs_button li#" + className).offset();
    $(".tab_pages ." + className).css({
        'left': offset.left - 8
    });
    $(".tab_pages ." + className).show();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T03:57:08.370

删除 (".tab_pages div").hide(); 从你的 mouseenter() 事件。此外，在 .tab_pages 样式中，将 position:absolute 更改为 float:left。如果要使用绝对定位，则需要指定顶部或底部位置以及左侧或右侧位置，例如 - top:0px; 左：0像素。但是由于您指定了 30px 的上边距，请使用浮动 - 绝对定位的 div 不能添加边距。最后，在您的 .tabs_button ul li 样式中， display:inline 不做任何事情 - 调用 float:left 将 li 更改为块元素 - 这就是您想要的。我已经复制了带有以下更改的代码 - 应该适合你。

```
 <style>
    .tabs_button ul {list-style:none; margin:0px; padding:0px;}
    .tabs_button ul li {float:left; margin-right:50px;}
    .tabs_button ul li a{color:#FFF; text-decoration:none;}
    .tabs_button ul li a:hover{color:#FFC222;}
    .tab_pages{clear: both; float: left; }
    .tab_pages div{display:none;width:200px; height:200px; background-color:#CCC;margin-top:30px;}
 </style>

 <script>
     $(document).ready(function(e) {

        $(".tabs_button a").mouseover(function(e) {
            var tid=this.id;
            $(".tab_pages ."+tid).stop().show();
         });

       $(".tabs_button a").mouseout(function(e) {
        var tid=this.id;
            $(".tab_pages ."+tid).stop().hide();
         });

         });
       </script>
       <body>
    <div class="tabs_button">
    <ul>
     <li><a href="#" id="page1">Cars</a></li>
     <li><a href="#" id="page2">Price &amp; Offers</a></li>
     <li><a href="#" id="page3">Chevy Experience</a></li>
     <li><a href="#" id="page4">Service</a></li>
     <li><a href="#" id="page5">Contact Us</a></li>
      </ul>
   </div>

     <div class="tab_pages">
     <div class="page1">
        Cars Display Page
      </div>

      <div class="page2">
         Offers Display Page
      </div>

        <div class="page3">
        Chevy Exp Page
         </div>
         <div class="page4">
        Service Display Page
         </div>
          <div class="page5">
         Contact us Display Page
         </div>
      </div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T03:40:40.753

尝试改用鼠标悬停事件，例如：

```
 $(".tabs_button a,.tab_pages").mouseover(function() {

}); 
```

# objective-c - 在 prepareForSegue 中设置 UIImageView.image

> ID：11515643
> 
> 赞同：4
> 
> 时间：2012-07-17T03:29:43.617
> 
> 标签：objective-c

我想继续使用具有 UIImageView 的 photoViewController。在 flickrTVC 中，我说：

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([segue.identifier isEqualToString:@"showPhoto"])
    {
        photoViewController *vc = [segue destinationViewController];
        UIImage *photo = [UIImage imageWithContentsOfFile:@"images/en.jpeg"];
        [vc setDisplayedPhoto:photo];
    }
} 
```

setDisplayedPhoto 方法的实现是：

```
-(void)setDisplayedPhoto:(UIImage *)image
{
    [_imageView setImage:image]; //@property (nonatomic, strong) IBOutlet UIImageView *imageView;
} 
```

但是当我继续时， UIImageView 是白色的......为什么会这样？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-17T03:51:19.090

`prepareForSegue:sender:`当您的源视图控制器收到消息时，您的目标视图控制器尚未加载其视图层次结构。所以你的目标 VC 的`_imageView`变量是`nil`.

推荐的方法是将图像（或者更好的是图像文件名）存储为目标 V​​C 的属性，然后在目标 VC 的`viewDidLoad`或`viewWillAppear:`方法中设置图像视图的图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-27T10:32:46.667

在设置视图的o之前调用[vc view]

# php - 为什么这个模型在控制器中工作时会返回“非对象错误”？

> ID：11515644
> 
> 赞同：0
> 
> 时间：2012-07-17T03:29:44.770
> 
> 标签：php, debugging, codeigniter

在我的控制器中，我从那里获取数据（效果很好）：

```
$data['query'] = $this->db->query("MY DB QUERY");  
$this->load->view('shopci_view', $data); 
```

从类模型函数中获取数据：

```
 class Shopci_model extends CI_Controller {

      function __construct()
      {
        parent::__construct(); //model constructor
      }

      //display sale itmes on shopci_view.php
      function sale_items()
      {    

        $query = $this->db->query('MY DB QUERY - SAME AS ABOVE');

        return $query->result();
      }

  } 
```

新的控制器功能：

```
//load model, auto connect to db
$this->load->model('Shopci_model', '', TRUE);    
//Display items for sale
$data['query'] = $this->Shopci_model->sale_items();  
$this->load->view('shopci_view', $data); 
```

错误：

> 致命错误：在 shopci_view 中的非对象上调用成员函数 result()

这是在我切换到模型之前工作的视图中的行（没有更改视图）：

```
<?php foreach($query->result() as $row): ?> 
```

任何帮助表示赞赏。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T04:48:59.593

在您的模型中，您希望返回数据以传递给控制器​​。所以在你的模型中你会有

```
function sale_items()
{
    $query = $this->db->query(SAME AS OLD);
    return $query;
} 
```

然后您的控制器将是相同的，您视图中的 foreach 应该如下

```
<?php foreach ($query as $row): ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T03:46:02.220

在您的模型中，您将 $query 作为 result() 数组返回给控制器。

所以你不能再使用'foreach $query->result()' - 因为你已经这样做了；

这应该工作

```
 <?php foreach($query as $row): ?> 
```

或者，如果您愿意 - 只需将模型从

```
 return $query->result(); 
```

至

```
 return $query; 
```

# objective-c - Objective-C - CABasicAnimation 在动画后应用更改？

> ID：11515647
> 
> 赞同：61
> 
> 时间：2012-07-17T03:30:36.620
> 
> 标签：objective-c, core-animation

我`CABasicAnimation`用来移动和调整图像视图的大小。我希望将图像视图添加到超级视图、动画，然后从超级视图中删除。

为了实现这一点，我正在监听我的委托调用，`CAAnimationGroup`一旦它被调用，我就会从超级视图中删除图像视图。

问题是有时图像在从超级视图中删除之前会在初始位置闪烁。避免这种行为的最佳方法是什么？

```
CAAnimationGroup *animGroup = [CAAnimationGroup animation];
    animGroup.animations = [NSArray arrayWithObjects:moveAnim, scaleAnim, opacityAnim, nil];
    animGroup.duration = .5;
    animGroup.delegate = self;
    [imageView.layer addAnimation:animGroup forKey:nil]; 
```

* * *

## 回答 #1

> 赞同：189
> 
> 时间：2012-07-17T03:45:10.313

将动画添加到图层时，动画不会更改图层的属性。相反，系统会创建图层的副本。原始层称为模型层，复制层称为表示层。表示层的属性随着动画的进行而改变，但模型层的属性保持不变。

当你移除动画时，系统会破坏表现层，只留下模型层，然后模型层的属性控制层的绘制方式。因此，如果模型层的属性与表示层属性的最终动画值不匹配，该层将立即重置为动画之前的外观。

要解决此问题，您需要将模型层的属性设置为动画的最终值，*然后*将动画添加到层。您希望按此顺序执行此操作，因为更改图层属性可以为该属性添加*隐式*动画，这会与您要显式添加的动画冲突。您要确保显式动画覆盖隐式动画。

那么你是如何做到这一切的呢？基本配方如下所示：

```
CABasicAnimation *animation = [CABasicAnimation animationWithKeyPath:@"position"];
animation.fromValue = [NSValue valueWithCGPoint:myLayer.position];
layer.position = newPosition; // HERE I UPDATE THE MODEL LAYER'S PROPERTY
animation.toValue = [NSValue valueWithCGPoint:myLayer.position];
animation.duration = .5;
[myLayer addAnimation:animation forKey:animation.keyPath]; 
```

我没有使用动画组，所以我不知道您可能需要更改什么。我只是将每个动画分别添加到图层中。

我还发现使用该方法为一个或多个动画设置完成处理程序更容易`+[CATransaction setCompletionBlock:]`，而不是尝试使用动画的委托。您设置事务的完成块，然后添加动画：

```
[CATransaction begin]; {
    [CATransaction setCompletionBlock:^{
        [self.imageView removeFromSuperview];
    }];
    [self addPositionAnimation];
    [self addScaleAnimation];
    [self addOpacityAnimation];
} [CATransaction commit]; 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-07-17T03:45:39.027

CAAnimations 完成后会自动删除。有一个属性`removedOnCompletion`可以控制它。您应该将其设置为`NO`.

此外，还有一个被称为 的东西，`fillMode`它控制动画在其持续时间之前和之后的行为。这是声明的属性`CAMediaTiming`（`CAAnimation`符合）。您应该将其设置为`kCAFillModeForwards`.

通过这两种更改，动画应该在完成后仍然存在。但是，我不知道您是否需要在组中更改这些，或在组中的单个动画上，或两者兼而有之。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-12-10T18:40:24.077

这是一个可以帮助某人的 Swift 示例

这是渐变层上的动画。它正在为属性设置动画`.locations`。

@robMayoff 回答完全解释的关键点是：

# 令人惊讶的是，当你做一个图层动画时，你实际上设置了最终值，首先，在你开始动画之前！

下面是一个很好的例子，因为动画会无休止地重复。

当动画无休止地重复时，如果你犯了“在动画之前忘记设置值”的经典错误，你会偶尔看到动画之间的“闪光”！

```
var previousLocations: [NSNumber] = []
...

func flexTheColors() { // "flex" the color bands randomly

    let oldValues = previousTargetLocations
    let newValues = randomLocations()
    previousTargetLocations = newValues

    // IN FACT, ACTUALLY "SET THE VALUES, BEFORE ANIMATING!"
    theLayer.locations = newValues

    // AND NOW ANIMATE:
    CATransaction.begin()

    // and by the way, this is how you endlessly animate:
    CATransaction.setCompletionBlock{ [weak self] in
        if self == nil { return }
        self?.animeFlexColorsEndless()
    }

    let a = CABasicAnimation(keyPath: "locations")
    a.isCumulative = false
    a.autoreverses = false
    a.isRemovedOnCompletion = true
    a.repeatCount = 0

    a.fromValue = oldValues
    a.toValue = newValues

    a.duration = (2.0...4.0).random()

    theLayer.add(a, forKey: nil)
    CATransaction.commit()
} 
```

以下内容可能有助于为新程序员澄清一些事情。请注意，在我的代码中，我这样做：

```
 // IN FACT, ACTUALLY "SET THE VALUES, BEFORE ANIMATING!"
    theLayer.locations = newValues

    // AND NOW ANIMATE:
    CATransaction.begin()
    ...set up the animation...
    CATransaction.commit() 
```

但是在另一个答案的代码示例中，它是这样的：

```
 CATransaction.begin()
    ...set up the animation...
    // IN FACT, ACTUALLY "SET THE VALUES, BEFORE ANIMATING!"
    theLayer.locations = newValues
    CATransaction.commit() 
```

关于“在动画之前设置值！”的代码行的位置。..

让那行***实际上“在”*** begin-commit 代码行中实际上是完全可以的。只要你在`.commit()`.

我只提到这一点，因为它可能会使新动画师感到困惑。

# python - 如何使用 PyGreSQL 和 PostgreSQL 自动增加主键

> ID：11515648
> 
> 赞同：1
> 
> 时间：2012-07-17T03:30:36.940
> 
> 标签：python, postgresql, pygresql

我的 PostgreSQL 中有一张表：

```
CREATE SEQUENCE dember_id_seq INCREMENT BY 1 MINVALUE 1 START 1;
CREATE TABLE dember (id INT NOT NULL, did VARCHAR(255) DEFAULT NULL, dnix VARCHAR(255) DEFAULT NULL, durl TEXT DEFAULT NULL, created TIMESTAMP(0) WITHOUT TIME ZONE NOT NULL, modified TIMESTAMP(0) WITHOUT TIME ZONE NOT NULL, status BOOLEAN NOT NULL, dnickname VARCHAR(255) DEFAULT NULL, PRIMARY KEY(id)); 
```

当我想插入一条记录时，我使用以下代码：

```
import pg
db = pg.DB(....)
db.insert('dember',{'did':did,'dnix':dnix,'durl',durl,'created',now, 'modified':now, 'status':'true','dnickname':nickname'}) 
```

然后插入代码不起作用，我收到以下错误：

> pg.ProgrammingError：错误：“id”列中的空值违反非空约束

看来我必须将 {'id':number} 添加到值字典中。

有什么建议么？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T04:40:24.087

您应该为自己省点麻烦并使用[`serial`](http://www.postgresql.org/docs/current/interactive/datatype-numeric.html#DATATYPE-SERIAL)，而不是`int`：

> 数据类型`serial`和`bigserial`不是真正的类型，而只是用于创建唯一标识符列的符号方便（类似于某些其他数据库支持的 AUTO_INCREMENT 属性）。

所以说：

```
create table t (
    id serial not null primary key
    -- ...
) 
```

将创建`id`为`integer`列，为其创建序列，将默认值`id`设置为序列中的下一个值，并将序列的所有者设置为`id`列；最后一点很重要，隐含的

```
ALTER SEQUENCE t_id_seq OWNED BY t.id; 
```

一个`serial`类型确实确保当列消失时序列将被删除。如果您不设置序列的所有者，您可能会在数据库中留下未使用的序列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T03:32:40.927

您忘记将序列分配给列。

```
CREATE TABLE dember (id INT NOT NULL DEFAULT nextval('dember_id_seq'), ... 
```

# c++ - QLineEdit 可见宽度设置？

> ID：11515661
> 
> 赞同：14
> 
> 时间：2012-07-17T03:32:57.023
> 
> 标签：c++, qt, user-interface

如何使用*Qt 4.8.1*及更高版本设置 QLineEdit 的可见宽度。示例是将可见宽度设置为某个像素大小或字符宽度。我希望只使用 C++ 而不是 QML。

我的想法是朝着这个街区的方向发展：

```
QHBoxLayout *nameRow = new QHBoxLayout; 

QLineEdit   *firstNameText = new QLineEdit,
            *middleIntText = new QLineEdit,
            *lastNameText = new QLineEdit;
//Whatever method is needed here to edit visible width
//firstNameText->???
//middleIntText->???
//lastNameText->???

nameRow->addWidget(firstNameText);
nameRow->addWidget(middleIntText);
nameRow->addWidget(lastNameText);

layout->addLayout(nameRow);

QWidget window;
window.setLayout(layout);
window.show(); 
```

**答案更新：（**或*见下文*）

```
firstNameText->setMaximumWidth(100);
firstNameText->setFixedWidth(120);

middleIntText->setMaximumWidth(50);
middleIntText->setFixedWidth(60);

lastNameText->setMaximumWidth(100);
lastNameText->setFixedWidth(120); 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-17T03:58:27.063

```
firstNameText->setMaximumWidth(100);
firstNameText->setFixedWidth(120); 
```

您可以使用这两个功能，它们会相应地调整宽度。

# c - 如果指针的地址是 64 位，为什么打印时它显示为 6 个字节？

> ID：11515662
> 
> 赞同：15
> 
> 时间：2012-07-17T03:33:29.757
> 
> 标签：c, pointers

```
#include <stdio.h>
int main(void){
  int *ptr;
  printf("the value of ptr is %p",ptr);
} 
```

这给了我`0x7fffbd8ce900`，只有 6 个字节。应该是 8 字节（64 位）吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-17T03:38:45.593

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-17T03:36:35.137

这只是意味着前两个字节为零（顺便说一句，目前 x86-64 芯片可以保证这一点——但在这种情况下这并不意味着什么，因为您的指针未初始化）。`%p`允许截断前导零，就像任何其他数字类型一样。`%016p`，然而，不是。这应该可以正常工作：

```
printf("the value of ptr is %016p", ptr); 
```

* * *

## 回答 #3

> 赞同：-6
> 
> 时间：2012-07-17T06:43:08.410

因为 6 字节地址只是虚拟地址（实际物理地址的偏移量）。在物理架构（例如 X86）中，内存被划分为可以由单个索引寄存器寻址的部分，而无需更改 16 位段选择器。在 X86-CPU 的实模式下，一个段总是使用 16 位（2 字节）的段选择器，这将在程序开始运行时由操作系统动态决定（即创建实际运行的进程） ）。

因此，如果您的变量具有 48 位地址 0x7fffbd8ce900，并且您的程序具有段选择器偏移量 08af，则变量的实际地址为 (0x08af<<48)+0x7fffbd8ce900 = 0x08af7fffbd8ce900，即 64 位。

进一步阅读请转向： [x86内存分割](http://en.wikipedia.org/wiki/X86_memory_segmentation)

# user-interface - 在标题栏中绘制菜单

> ID：11515669
> 
> 赞同：1
> 
> 时间：2012-07-17T03:34:26.000
> 
> 标签：user-interface, xul

在 XUL 中，如何在标题栏通常所在的位置绘制菜单（或任何其他内容）？

这张图片不是 XUL 应用程序，但它说明了我想要完成的工作：

![Dreamweaver 标题栏](../Images/5c1236a72a90298bc4c318d95d819cf8.png)

请注意顶部的菜单如何与最小/最大/关闭按钮对齐。

在[Mozilla 开发人员参考](https://developer.mozilla.org/en/XUL/Attribute/drawintitlebar)中，我看到该元素有一个`drawintitlebar`属性。`<window>`但是，将其设置为“真”并不会改变我能看到的任何内容。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T09:43:48.290

[答案与这个问题](https://stackoverflow.com/a/9565916/785541)基本相同- 没有简单的方法。您不能只在标题栏中放一些东西，您必须自己替换操作系统提供的标题栏。因此，您使用`chromemargin="0,-1,-1,-1"`属性删除通常的标题栏，并将`<xul:titlebar>`其作为窗口的第一个元素。它应该包含通常的最小化/最大化/关闭按钮（如果您使用正确的`-moz-appearance`样式，这些按钮看起来会正确）。然后，您将能够将菜单放入`<xul:titlebar>`元素中。但是您将需要大量代码和样式来确保您的窗口在所有操作系统上看起来都像本机窗口。

# jquery - 为什么选中取消选中不显示/隐藏内容？

> ID：11515671
> 
> 赞同：0
> 
> 时间：2012-07-17T03:34:47.700
> 
> 标签：jquery

```
http://gomoxy.com/una/edmontonautoloans/credit-application.php 
```

我的jQuery代码：

```
$("#callback_toggle").is(':checked')){
    $("#txthiden").hide();
    }else{
   $("#txthiden").show();
} 
```

当我选中复选框时，我想隐藏`txthiden`div 中的内容。反之亦然。默认状态是未选中。并且`txthiden`div 中的内容正在显示。为什么我的代码不起作用。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T03:39:46.963

**工作演示** [http://jsfiddle.net/ACnn4/1/](http://jsfiddle.net/ACnn4/1/)

**代码**

```
$("#callback_toggle").on('change', function() {
    if ($(this).is(':checked')) {
        $("#txthiden").hide();
    } else {
        $("#txthiden").show();
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T03:39:43.447

改变：

```
$("#callback_toggle").is(':checked')){ 
```

到：

```
if ($("#callback_toggle").is(':checked')) { 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T03:41:12.443

[在此处对拼写错误和基于表格的布局进行强制性咆哮`<div>`]

您需要为此使用事件处理程序。您的代码试图在 DOMready 中进行切换，而不是在复选框被切换时进行切换。

```
$('#callback_toggle').change(function() {
    if ($(this).is(":checked")) {
        ("#txthiden").hide();
    } else {
        ("#txthiden").show();
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T03:42:11.120

你可以试试这个应该可以的。

这可能是最简单的一个。[看演示](http://jsfiddle.net/vJ8bN/)

```
$("#callback_toggle").click(function() {
        $("#txthiden").toggle();
});​ 
```

这个也可以

```
$("#callback_toggle").click(function() {
    if ($(this).is(':checked')) {
        $("#txthiden").hide();
    } else {
        $("#txthiden").show();
    }
});​ 
```

# android - Android 将画布保存到位图中

> ID：11515674
> 
> 赞同：1
> 
> 时间：2012-07-17T03:34:59.237
> 
> 标签：android

我一直在努力将画布转换为位图。
这是我关于 onDraw 函数的代码。我尝试了很多变化，但我仍然没有得到答案。

```
 @Override
public void onDraw(Canvas canvas) {
    super.onDraw(canvas);

    Bitmap bitmap = Bitmap.createBitmap(canvas.getWidth(),canvas.getHeight(),Bitmap.Config.ARGB_8888);  
    canvas.setBitmap(bitmap);
    for(List<Point> pointA : pointWhole)
    {
        Point prev = null;
        for (Point point : pointA) {
            if(prev != null)
            {
                canvas.drawLine(prev.x, prev.y, point.x, point.y, paint);
            }
            prev = point;
        }
    }
} 
```

它似乎没有保存整个位图。

# magento - 了解magento版本

> ID：11515676
> 
> 赞同：-1
> 
> 时间：2012-07-17T03:35:17.967
> 
> 标签：magento

这是一个简单的问题，但我无法通过谷歌找到

**如何通过控制面板**了解我使用的 magento 版本

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T04:02:54.680

当您登录到 magento admin 时，您可以在中间的最底部找到它。**

# php - 如何使用 foreach 回显一个数组数组？

> ID：11515680
> 
> 赞同：0
> 
> 时间：2012-07-17T03:35:33.440
> 
> 标签：php, arrays, foreach

我正在尝试自动化我的导航链接。如何自动回显`foreach`。我现在得到未定义的偏移量......我可以忽略数组中的第一项（即标题）吗？

```
'control' => array( 0=>'Controls',
                    1=> array('Add school','add.school.php'),
                    2=> array('Add doctor','add.doctor.php'),
                    3=> array('Add playgroup','add.play.php'),
                    4=> array('Suggestions','suggestion.php'),
                    5=> array('List tutor service','list.tutor.php'),
                    6=> array('Create playgroup','create.play.php'),
                        7=> array('Dashboard', 'dashboard.php')
                        ),

 <?php  

    foreach ($nav['control'] as $value=>$key){
                echo'<a href="'.$key[2].'">'.$key[1].'</a>';
                }
   ?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T03:37:22.333

数字数组从 0 开始索引，而不是 1。你想要`[1]`和`[0]`分别。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T03:39:29.743

```
// for key => value is more nature.
foreach ($nav['control'] as $key => $value){
   // should skip the first.
   if ($key === 0) {
     continue;
   }
   // array is 0 base indexed.
   echo'<a href="'.$value[1].'">'.$value[0].'</a>';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T03:38:31.257

```
foreach ($nav['control'] as $value=>$key) {
                echo'<a href="'.$key[1].'">'.$key[0].'</a>';
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T03:50:26.707

嵌套数组需要嵌套循环。

```
foreach($array as $key => $value){
  if($key != 0){
  foreach($value as $k => $v){
    if($k == 0){ $title = $v;}
    if($k == 1){ $link = $v;}
  }
//put code to run for each entry here (i.e. <div> tags, echo $title and $link)
} 
```

当我只使用两个字段时，我的个人实践是将第一个推入数组 ['id'] 并将第二个作为值，即

```
while($row_links = sth->fetch (PDO::FETCH_ASSOC)){
  $array[$row_links['title']] = $row_links['link'];
} 
```

那么你可以使用

```
<?php foreach($array as $key => $value){ ?>
  <a href="<?php echo $value; ?>"><?php echo $key; ?></a>
<?php } ?> 
```

# java - JSP java io文件最后修改日期是纪元，尽管在FTP中文件日期是昨天-tomcat6

> ID：11515684
> 
> 赞同：0
> 
> 时间：2012-07-17T03:36:19.727
> 
> 标签：java, jsp, tomcat

我已经阅读了一个文件目录。我把所有的文件列表都拿出来了。但是最后修改日期有问题。我用 ftp 应用程序检查文件的日期是昨天。

部分代码是

```
File file1 = new File(filePath+retFilename);

SimpleDateFormat sdf = new SimpleDateFormat("dd-MM-yyyy h:mm:ss a");
long getModifiedDateTime = file1.lastModified();
java.util.Date fmtModifiedDateTime = new java.util.Date(getModifiedDateTime);                   
String getModifiedDate = sdfDate.format(fmtModifiedDateTime); 
```

修改后的日期总是返回纪元。并且没有捕获到 i/o 异常。我的 ftp 应用程序是核心 FTP

还有一件事是

```
long fileSize = file1.length(); 
```

文件大小似乎为0。它与上次修改日期有什么关系吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T15:28:03.603

`File.lastModified``0L`如果文件不存在或存在某种 I/O 错误，则返回- 可能包括文件权限不足。唯一应该抛出异常的情况是如果 a`SecurityManager`撤销了对资源的访问。这可能是您在尝试此操作时看到“01-01-1970”（一种令人困惑的日期格式 IMO）的原因。

尝试使用`File.isFile`, `File.isDirectory`, `File.exists`, 或`File.canRead`在尝试调用之前`File.lastModified`：您可能有一个`File`未指向有效位置的对象。

# ios - 如何将 MKMapView 中选定的注释定位到 iPad 屏幕的底部

> ID：11515689
> 
> 赞同：1
> 
> 时间：2012-07-17T03:36:48.400
> 
> 标签：ios

在 iOS 5.0、iPad、MKMapview 中，一旦用户从给定的位置表列表中选择了一个位置，我需要在 MKMapview 上移动该位置的注释，使其显示在屏幕底部。

所以我不能只使用注释的位置调用 setCenterCoordinate ，因为这会使该注释在屏幕上居中，而我需要使注释出现在屏幕底部。

我该怎么做？

任何帮助都感激不尽。谢谢！

# android - 如何在 android 2.2（及更高版本）上挤压像素

> ID：11515695
> 
> 赞同：-1
> 
> 时间：2012-07-17T03:37:49.083
> 
> 标签：android, android-intent, image, pixels, pinch

我希望能够把我的手指捏在一起以挤压我的图像的一部分，然后让图像立即恢复到原始形式并做相反的事情并将图片的一部分膨胀并恢复到原始我会怎么做这？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T04:52:57.337

虽然我认为这可能是您正在寻找的内容： [Android Image in Canvas with Touch Events](https://stackoverflow.com/questions/5743328/android-image-in-canvas-with-touch-events)。您将需要花更多时间阅读 Android 中提供了哪些 API。我还建议仔细阅读 API Demos 应用程序中的每个项目，并查看提供的源代码。

# android - 如何修复错误设计Edittext

> ID：11515696
> 
> 赞同：0
> 
> 时间：2012-07-17T03:38:01.973
> 
> 标签：android, android-layout

我使用 android 4.0.3 设计：theme.holo 当我更改编辑文本的颜色时，它在第一次编辑文本时显示线条为黑色。更改背景颜色时如何隐藏edittext的黑线？观看图片：[点击这里](https://lh6.googleusercontent.com/-DDBRe0V3eBo/UATctb3A_ZI/AAAAAAAACZw/XCSES8RHFdY/w426-h245-k/7-17-2012+10-13-03+AM.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T03:43:21.767

你应该可以使用

```
android:cursorVisible="false" 
```

在您的 xml 或

```
editTxt.setCursorVisible(false); 
```

来自java

**编辑：**

在 EditText 上使用[OnFocusChangeListener](http://developer.android.com/reference/android/view/View.OnFocusChangeListener.html)在获得和失去焦点时获取回调，并使用 setCursorVisible() 方法将光标设置为您需要的任何状态。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T10:52:17.617

你可以在你的布局中设置 android:textCursorDrawable="@null"

# php - 注意：未定义索引：在第 25 行的 sample.php 中提交

> ID：11515700
> 
> 赞同：0
> 
> 时间：2012-07-17T03:38:34.953
> 
> 标签：php

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T03:39:53.757

这正是它所说的：您正在寻址数组中的未定义索引

```
$arr = array();
echo $arr['foo']; 
```

在上面的示例中，数组为空，但我尝试输出`'foo'`不存在的项目值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T03:40:04.313

这意味着您正在尝试访问不存在的数组的一部分。

如果您有一个包含 5 个元素的数组，您可以通过以下方式访问它们：

`$array[0]`通过到`$array[4]`

但是如果你尝试`$array[76]`哪个不存在，你会得到一个*未定义的索引*错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T03:40:41.930

你可能有一个你正在访问的数组，比如`$_POST['submit']`. 该错误消息是说数组的元素“提交”不存在，并且它正在引发警告。

在访问数组元素之前，您应该在使用它们`isset()`之前检查它们是否存在，以避免出现警告。

编辑：可能的重复：[PHP中的未定义索引](https://stackoverflow.com/questions/5676945/undefined-index-in-php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T03:43:43.837

您是否在表格中正确提到了该`GET`方法`POST`？我认为您正在访问/测试它而不声明它。让我知道是否是这种情况。

# android - HoloEverywhere 编辑文本无法正常工作且未按应有的方式显示

> ID：11515704
> 
> 赞同：1
> 
> 时间：2012-07-17T03:39:14.693
> 
> 标签：android, android-edittext, actionbarsherlock, android-holo-everywhere

我在我的项目中使用 HoloEverywhere 编辑文本。

```
 <com.WazaBe.HoloEverywhere.EditTextHolo 
            android:id="@+id/etmembname"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:singleLine="true"/> 
```

它没有按应有的方式工作。我无法在其中输入任何内容。单击它时我什至没有得到光标。

但是，当我使用键盘上的箭头键时，我可以在 edittextholo 的开头看到一个光标，但无法输入任何内容。

此外，它并没有按照预期的方式出现。就像在默认的 ICS edittext 中一样，我无法在 edittextholo 中看到蓝色下划线。

此外，当我单击 Eclipse 中的“图形布局”选项卡时，我会收到类似的警告。

**布局编辑器中的图形预览可能不准确：不支持 Typeface.createFromAsset()。（忽略此会话）**

我的进口或使用有什么问题吗？请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T23:13:23.853

有这个问题是原因所以要么将 HoloEverywhere 更新到最新版本，要么从源代码中提取新版本的 EditTextHolo

[https://github.com/Prototik/HoloEverywhere/issues/40](https://github.com/Prototik/HoloEverywhere/issues/40)

# java - 使用 Rhino 从评估的 JS 中获取函数名称及其参数

> ID：11515710
> 
> 赞同：3
> 
> 时间：2012-07-17T03:39:44.233
> 
> 标签：java, javascript, function, rhino

我正在使用[犀牛](https://www.mozilla.org/rhino/)。做完之后

```
Context cx = Context.enter();
Scriptable scope = cx.initStandardObjects();
cx.evaluateString(scope, "function f(x,y){ return x+y}", "<cmd>", 1, null); 
```

我想知道有一个带有名称`f`和两个参数的函数`x`，`y` 但找不到任何可以帮助我的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T10:12:58.857

尝试使用下一个代码。

```
package com.qarea.rhinotest;

import org.mozilla.javascript.Context;
import org.mozilla.javascript.Scriptable;

public class RhinoTest {

    public static void main(String[] args) {
        Context cx = Context.enter();
        Scriptable scope = cx.initStandardObjects();
        cx.evaluateString(scope, "function f(x,y){ return x+y}", "<cmd>", 1, null);
        try {
            String result = (String) cx.evaluateString(scope, "f.toString()", "<cmd>", 1, null);
            System.out.println(result);
        } catch (org.mozilla.javascript.EcmaError ex) {
            System.out.println(ex.getMessage());
        }
    }
}
//  Maven dependency
//    <dependency>
//      <groupId>org.mozilla</groupId>
//      <artifactId>rhino</artifactId>
//      <version>1.7R4</version>
//    </dependency> 
```

输出是：

```
function f(x, y) {
    return x + y;
} 
```

# javascript - NETWORK_ERR 和 less.js

> ID：11515721
> 
> 赞同：1
> 
> 时间：2012-07-17T03:40:44.793
> 
> 标签：javascript, css, less

我正在使用 less.js 来获得更好的响应式 css 设计，但现在我在使用基于 webkit 的浏览器和 chrome 时遇到了 NETWORK_ERR。但是Firefox不会有这种问题。

我试图用谷歌搜索我的问题，但似乎唯一的解决方案是将更少的文件放在其他服务器上，否则不可避免地将 less.js 的 src 读取为“文件：**///* *xxxx/less.js”而不是“文件：*** */ /* *xxxx/less.js" .

我的问题是，有什么办法可以将 file:/// 的方式更改为 file://？

还有一个问题，有没有更好的 css 框架可以做出更好的响应和组织设计？Less.js 很好组织，我也使用 javascript 来更改一些变量动态。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T04:39:13.493

从可以充当 CDN 的不同服务器提供 css js 和图像总是好的。在您的情况下，您也可以解决 chrome 问题。

以下是您的 file:/// 到 file:// 问题的一些解决方案（不确定您是否已经看过这些）

看看这个[链接](https://stackoverflow.com/questions/3084892/less-js-not-working-in-chrome)

你可以通过几种方式来看看 Nathan Strutz 的回答，他建议在你的快捷方式中添加一个命令行开关 -allow-file-access-from-files，Chrome 将允许你加载 LESS.JS 而无需任何问题，以及下面你可以如何添加命令行开关。

我也对 MrClean 的回答（最后一个回答）特别感兴趣，虽然我还没有尝试过，但你可以试一试。

为了回答您的第二个问题，有很多框架可以进行 css 响应式设计，[请单击此处](http://speckyboy.com/2011/11/17/15-responsive-css-frameworks-worth-considering/)查看列表，我对基础、mqframework、Golden Grid System 框架和 Fluid Baseline Grid 特别感兴趣。

# vb6 - 尝试在 VB6 中学习多态性等，但我的代码没有按照我的意愿去做

> ID：11515724
> 
> 赞同：2
> 
> 时间：2012-07-17T03:41:31.773
> 
> 标签：vb6, parameters, polymorphism

这是我在命令按钮上的内容；它只是创建变量并尝试输出它们的 ID（应该是从基类继承的实例变量。）

```
Private Sub Command1_Click()
    Dim ball1 As Ball, ball2 As Ball
    Dim cube1 As Cube, cube2 As Cube

    Set ball1 = New Ball
    Set cube1 = New Cube
    Set cube2 = New Cube
    Set ball2 = New Ball

    MsgBoxTheID (ball1)  'errors; should be 0
    MsgBoxTheID (ball2)  'errors; should be 3
    MsgBoxTheID (cube1)  'errors; should be 1
    MsgBoxTheID (cube2)  'errors; should be 2

    Call ball1.MsgBoxID  ' works; displays 0
    Call ball2.MsgBoxID  ' works; displays 3
    Call cube1.MsgBoxID  ' works; displays 1
    Call cube2.MsgBoxID  ' works; displays 2

End Sub 
```

模型1.bas：

```
Global globalID As Integer

Public Sub MsgBoxTheID(theObj As BaseObj)
    ' this function is meant to accept objects of type Ball, Cube, and BaseObj
    MsgBox theObj.ID
End Sub 
```

BaseObj 类模块：

```
Public ID As Integer
Public isVisible As Boolean

Public Sub setVisiblity(newVis As Boolean)
    isVisible = newVis
End Sub

Public Sub MsgBoxID()
    MsgBox ID
End Sub

Private Sub Class_Initialize()
    ID = globalID
    globalID = globalID + 1
End Sub 
```

球类模块：

```
Implements BaseObj
Private theObj As BaseObj
Public radius As Double

Private Property Let BaseObj_ID(ByVal RHS As Integer)
End Property
Private Property Get BaseObj_ID() As Integer
End Property
Private Property Let BaseObj_isVisible(ByVal RHS As Boolean)
End Property
Private Property Get BaseObj_isVisible() As Boolean
End Property

Public Sub MsgBoxID()
    Call theObj.MsgBoxID
End Sub

Private Sub BaseObj_MsgBoxID()
    Call theObj.MsgBoxID
End Sub

Public Sub BaseObj_setVisiblity(newVis As Boolean)
End Sub

Private Sub Class_Initialize()
    Set theObj = New BaseObj
End Sub 
```

立方体类模块：

```
Implements BaseObj
Private theObj As BaseObj
Public sideLength As Double

Private Property Let BaseObj_ID(ByVal RHS As Integer)
End Property
Private Property Get BaseObj_ID() As Integer
End Property
Private Property Let BaseObj_isVisible(ByVal RHS As Boolean)
End Property
Private Property Get BaseObj_isVisible() As Boolean
End Property

Public Sub MsgBoxID()
    Call theObj.MsgBoxID
End Sub

Private Sub BaseObj_MsgBoxID()
    Call theObj.MsgBoxID
End Sub

Public Sub BaseObj_setVisiblity(newVis As Boolean)
End Sub

Private Sub Class_Initialize()
    Set theObj = New BaseObj
End Sub 
```

有几件事我不喜欢，其中两件事我的印象是不可避免的：(1) 与 C++ 相比它是一团糟，以及 (2) Ball 和 Cube 类仅***包含***BaseObj 类型的对象。他们实际上并没有从 BaseObj 继承任何东西。他们只是被迫实现相同的接口（whoopty doo。）

更糟糕的是，这是我真正希望可以纠正的问题，当涉及到参数传递时，它们似乎无法填充基类的对象。

难道我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T04:07:53.833

Visual Basic 6 不是学习“更纯粹”的 OOP 形式的理想语言。VB6 旨在实现一个非常混合版本的基于对象的编程，它围绕 Microsoft 组件对象模型 (COM) 世界，其*接口继承*方向。VB6 不支持*实现*继承，这往往会使您正在寻找的那种多态性难以实现。

我记得 VB6 时代有一些技巧可以“解决”（某种程度）实现继承问题，尤其是在用基类的对象替换子类时。我记得的一个技巧是声明一个基接口类型的属性过程，它返回对“Me”的引用作为返回类型。这会“欺骗”运行时提供到所需接口的转换。通过在 VB6 的一个设计对话框中将其“过程编号”设置为 -4，还有另一个魔术技巧可以使属性成为“默认”属性。

重点？如果你真的想进入传统的 OO 编程，如果没有必要，不要尝试用 VB6 来学习它。升级到（至少）VB.NET、C# 或 Java。我并不是说作为 VB6 的仇恨者——见鬼，知道这些愚蠢的细节支付了很长一段时间的账单——但将其自身的小特质转化为对 OOP 的良好、基本的理解是一个难以破解的难题。

祝你好运！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T12:15:35.523

你已经想出了如何解决这个错误，但我会贡献“为什么”。

在 VB6（和 VB5 等）中，调用方法/函数/子例程/语句有两种语法。第一个是这样的：

```
MySubName arg1, arg2, arg3, arg4 
```

Blech，我知道这是我对 C 和 Java 的偏见，但我喜欢在我的参数列表周围看到括号。该语法是这样的：

```
Call MySubName(arg1, arg2, arg3, arg4) 
```

所以这两者是等价的。

您遇到的不是呼叫的效果。您遇到的是非 Call 版本中不需要的括号的影响。括号强制其中的语句/参数在语句的其余部分之前进行评估（想想数学运算顺序）。

所以这：

```
SomeSub (arg1) 
```

是这样的：

```
temp = (arg1) 
SomeSub temp 
```

此外，VB6 中的对象可以具有“默认属性”。这使您可以编写如下代码：

```
Dim name as String
name = txtName 
```

不是将文本框对象引用分配给名称，而是使用 .Text 的默认属性，结果如下：

```
Dim name as String
name = txtName.Text 
```

因此，当您尝试评估时，`SomeSub (arg1)`我认为它会尝试定位并执行对象的默认属性并将该值传递给`SomeSub`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T10:06:20.370

嗯，我想通了，有点。

```
MsgBoxTheID (ball1)  'errors; should be 0
MsgBoxTheID (ball2)  'errors; should be 3
MsgBoxTheID (cube1)  'errors; should be 1
MsgBoxTheID (cube2)  'errors; should be 2 
```

...需要更改为...

```
Call MsgBoxTheID (ball1)  'errors; should be 0
Call MsgBoxTheID (ball2)  'errors; should be 3
Call MsgBoxTheID (cube1)  'errors; should be 1
Call MsgBoxTheID (cube2)  'errors; should be 2 
```

...即使`MsgBoxTheID`没有返回类型，这很奇怪，因为我一直认为`Call`这只是您可以用来丢弃返回值而无需声明变量的东西，如下所示：

```
dim unneededVar as Integer
unneededVar = FunctionNameThatReturnsAnInteger() 
```

但我想不会。所以......我必须仔细阅读该`Call`语句正在做什么以使这个示例程序工作，但它现在肯定可以工作。（我还必须添加`BaseObj_ID = theObj.ID`到`Property Get BaseObj_ID() As Integer`正在实现的类中的方法`BaseObj`。）

# java - 在 Java 中将证书字节 [] 转换为 X509Certificate

> ID：11515725
> 
> 赞同：6
> 
> 时间：2012-07-17T03:41:40.827
> 
> 标签：java, x509certificate

我已将证书作为 Base64 编码字符串存储在数据库中。我可以从数据库中读取它并对其进行解码，但我想将解码的字节 [] 转换为 X509Certificate。我正在寻找示例代码来执行此操作。我努力了：

```
CertificateFactory certFactory = CertificateFactory.getInstance("X.509");
InputStream in = new ByteArrayInputStream(bytes);
X509Certificate cert = (X509Certificate)certFactory.generateCertificate(in); 
```

这会导致编码类型出现问题。代表证书的有效示例字符串或字节 [] 将是好的。

任何指针都会很棒！谢谢。

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-07-17T07:34:05.747

您的示例代码看起来不错。`byte[]`您可以使用 openssl 自己生成：

```
openssl genrsa -out privkey.pem
openssl req -new -x509 -key privkey.pem -outform DER -out cert.der 
```

# blackberry - 如何制作内联标签字段

> ID：11515730
> 
> 赞同：1
> 
> 时间：2012-07-17T03:42:50.430
> 
> 标签：blackberry, java-me, blackberry-eclipse-plugin

我正在使用 Blackberry 应用程序（OS 5.0），需要显示用户最近的推文。
我能够从 Twitter 端获取数据。现在在解析实体（主题标签、网址、用户提及等）之后，我需要以单独的格式（颜色、粗体等）显示它们。所以我对推文的不同部分使用了不同的 LabelFields。
但是 LabelFields 默认是块元素。如何将这些 LabelFields 内联，使其看起来像在 Twitter 中的显示方式？

像这样：
![在此处输入图像描述](../Images/2dc0704c4003334d7596a94eb17ab227.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T13:30:39.087

其他人建议使用 RichTextField，但您必须编写自己的文本过滤器来为语法着色 - 这将需要很多努力。如果内联可点击链接是必须的，那么我个人会使用 BrowserField 但这意味着您的逻辑必须将一整屏的推文输出到 html 中（屏幕不喜欢有多个浏览器字段 - 它是可行的不止一个，但有一些技巧）并管理点击事件 - 更多复杂性。

或者，您可以执行以下操作：http: [//devblog.blackberry.com/2009/10/how-to-use-table-view-layout/](http://devblog.blackberry.com/2009/10/how-to-use-table-view-layout/)您不会在文本正文中有可点击区域，但它仍然使用本机字段而不是使用标记“作弊”，这可能是最好的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T16:19:57.750

我发现 Blackberry SDK 中有一个名为 ActiveRichTextField 的组件，它会自动扫描其内容并解析链接，使它们成为可聚焦和可点击的。此外，如果 Twitter 应用程序安装在该设备中，它还将解析实体。现在它解决了我的问题。多谢你们。

# c++ - gcc/g++ 对空主函数给出不同的响应

> ID：11515733
> 
> 赞同：0
> 
> 时间：2012-07-17T03:43:28.223
> 
> 标签：c++, c, gcc, g++, return

我正在使用 g++ (Ubuntu/Linaro 4.6.1-9ubuntu3) 4.6.1 gcc (Ubuntu/Linaro 4.6.1-9ubuntu3) 4.6.1

如果我制作的 cpp 和 c 文件仅包含

```
int main(const int argc, const char *const argv[])
{

} 
```

并`g++ -Wall test_warnings.cpp`在没有警告的情况下编译它。

如果我用它编译它，`gcc -Wall test_warnings.c`我会收到您期望的警告：

```
test_warnings.c: In function ‘main’:
test_warnings.c:4:1: warning: control reaches end of non-void function [-Wreturn-type] 
```

如果使用 -Wreturn-type 而不是 -Wall，则会表现出相同的行为。

为什么 g++ 没有给我一个返回丢失的警告？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-17T03:47:44.007

因为 C 和 C++ 是不同的语言。

在 C++ 中，到达结尾`main()`而不执行`return`语句等同于执行`return 0;`.

在 C 语言中，从 1990 年 ISO 标准开始，落到末尾`main()`会向调用环境返回未定义的状态。

C99 改变了这一点，基本上采用了 C++ 规则——但 gcc 默认不实现 C99。（尝试编译`-std=c99`。）

无论如何，`return 0;`在`main()`.

# haskell - 如何更改 GHC 的编译目录？

> ID：11515734
> 
> 赞同：2
> 
> 时间：2012-07-17T03:43:29.943
> 
> 标签：haskell, compilation, ghc

我有一个程序，比如说`src/sample.hs`，我希望它编译（使用`ghc --make`）到`build/sample.exe`.

我已经想出了如何将`.hi`和`.o`文件映射到构建文件夹，但我似乎找不到任何关于如何将可执行文件编译到不同目录的信息。有谁知道如何做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T05:21:52.373

如何显式设置包含目录的输出文件名？在这里工作，我没有在 Windows 上测试过，所以我不确定你是否需要 .exe 扩展名。

```
ghc --make -o build/sample.exe src/sample.hs 
```

另外值得注意的是：`--make`从 GHC 7.0 开始默认启用。

# java - Eclipse Java 项目。如何定义输出类目录并生成类的jar

> ID：11515737
> 
> 赞同：1
> 
> 时间：2012-07-17T03:43:50.203
> 
> 标签：java, eclipse

> **可能重复：**
> [Android 项目无法在 Eclipse 中引用其他项目](https://stackoverflow.com/questions/10778865/android-project-unable-to-reference-other-project-in-eclipse)

我有一个 Eclipse Java 项目。我没有看到 bin 目录。它有一个应用程序并且运行良好。但是，我有问题。我需要将其中一些类包含在另一个项目中，即 Android java 项目中。所以有两件事我真的不明白该怎么做：

1）指定一个输出文件夹，以便在这个项目中有一个真正可见的bin目录？

2) 使用这些类自动生成一个 .jar 文件，以便我可以将 jar 文件包含在另一个项目中。

是的，我是一位经验丰富的程序员，不，我根本不清楚如何查看项目属性下的选项。仅包括整个项目用于编译，但在运行时缺少 java 项目中的类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T04:46:02.477

1）指定一个输出文件夹，以便在这个项目中有一个真正可见的bin目录？

该目录在那里，但 Eclipse 默认隐藏它。如果要查看它，首先需要切换到“资源”透视图（Window -> Open Perspective -> Other...，然后选择“Resource”并单击 OK）。从那里，单击 Package Explorer 视图（右上角）中的向下三角形按钮，然后从下拉菜单中选择“Customize View...”。取消选择“Java 输出文件夹”选项并单击确定。

如果您出于某种原因想要更改此目录的位置，请右键单击任何 Java 项目，选择“构建路径”->“配置构建路径”。输出目录的位置在“源”选项卡中指定。

2) 使用这些类自动生成一个 .jar 文件，以便我可以将 jar 文件包含在另一个项目中。

正如 Code Droid 的回答中提到的，更好的选择通常是修改构建路径以包含包含文件作为依赖项的项目。但是，如果您真的需要 jar 文件，一个简单的选项是“文件”->“导出...”。在“Java”下，您会找到“JAR 文件”（或“可运行的 JAR 文件”，如果您想使用 -jar 选项使其可执行）。选择要包含的类后，单击“下一步”，您将有机会保存配置，以便将来轻松执行相同的导出操作。

# android - IllegalArgumentException 使用 AsyncTask

> ID：11515738
> 
> 赞同：1
> 
> 时间：2012-07-17T03:43:54.680
> 
> 标签：android, image, file-upload, android-asynctask

我本来是用自定义方法上传一些照片，但我决定用an`AsyncTask`来上传照片，因为我想在上传的过程中显示a`ProgessBar`并且不明白如何在我的原始方法中使用一个。当我执行时，我`AsyncTask`的 an`IllegalArgumentException`被抛出，但我不明白为什么。

```
private void doFileUpload(){

        Log.d("imagepath", "imagepath: " + imagepath);
                    finalPath = new File(imagepath);
                    if (!finalPath.exists()){
                        try {
                              finalPath.createNewFile();
                              copyFile(new File(filePath), finalPath);
                        } catch (IOException e) {
                                 // TODO Auto-generated catch block
                               e.printStackTrace();
                        }
                    }

                    Bitmap bmpPic = BitmapFactory.decodeFile(imagepath);
                    int MAX_IMAGE_SIZE = 300000; // max final file size
                    if ((bmpPic.getWidth() >= 600) && (bmpPic.getHeight() >= 600)) {
                          BitmapFactory.Options bmpOptions = new BitmapFactory.Options();
                          bmpOptions.inSampleSize = 1;
                          while ((bmpPic.getWidth() >= 600) && (bmpPic.getHeight() >= 600)) {
                              bmpOptions.inSampleSize++;
                              bmpPic = BitmapFactory.decodeFile(filePath, bmpOptions);
                          }
                            Log.d("bmpOptions.inSampleSize", "Resize: " + bmpOptions.inSampleSize);
                        }
                        int compressQuality = 104; // quality decreasing by 5 every loop. (start from 99)
                        int streamLength = MAX_IMAGE_SIZE;
                        while (streamLength >= MAX_IMAGE_SIZE) {
                           ByteArrayOutputStream bmpStream = new ByteArrayOutputStream();
                           compressQuality -= 5;
                           Log.d("compressQuality", "Quality: " + compressQuality);
                           bmpPic.compress(Bitmap.CompressFormat.JPEG, compressQuality, bmpStream);
                           byte[] bmpPicByteArray = bmpStream.toByteArray();
                           streamLength = bmpPicByteArray.length;
                           Log.d("streamLength", "Size: " + streamLength);
                        }
                    try {
                        FileOutputStream bmpFile = new FileOutputStream(finalPath);
                        bmpPic.compress(Bitmap.CompressFormat.JPEG, compressQuality, bmpFile);
                        bmpFile.flush();
                        bmpFile.close();
                    } catch (Exception e) {
                        Log.e("ERROR", "Error on saving file");
                    }

        File file1 = new File(imagepath);
        try
        {

             HttpClient client = new DefaultHttpClient();
             HttpPost post = new HttpPost(URL);

             FileBody bin1 = new FileBody(file1,imageType);
             //String abc=bin1.getMediaType();
             //System.out.println("abc :"+abc);
             System.out.println("imageType :"+imageType);
             MultipartEntity reqEntity = new MultipartEntity();

             if(use.equals("EditData")){
                 reqEntity.addPart("uploadedfile1", bin1);
                 reqEntity.addPart("uID", new StringBody(md5_id));
                 reqEntity.addPart("uPWD", new StringBody(md5_pass));
                 reqEntity.addPart("TYPE", new StringBody("NWPHOTO"));
                 reqEntity.addPart("REF", new StringBody(Ref));
                 reqEntity.addPart("CAT", new StringBody(cat0));
                 System.out.println("imageType :"+imageType+" "+md5_id+" "+md5_pass+" "+Ref+" "+cat0);
             }else if(use.equals("NewData")){
                 reqEntity.addPart("uploadedfile1", bin1);
                 reqEntity.addPart("uID", new StringBody(md5_id));
                 reqEntity.addPart("uPWD", new StringBody(md5_pass));
                 reqEntity.addPart("TYPE", new StringBody("INSERTNW"));
                 reqEntity.addPart("Title", new StringBody(newTitle));
                 reqEntity.addPart("News", new StringBody(newNews));
                 reqEntity.addPart("CAT", new StringBody(cat0));
                 reqEntity.addPart("use", new StringBody("NewData"));
                 System.out.println("imageType :"+imageType+" "+md5_id+" "+md5_pass+" "+cat0+" "+newNews+" "+newTitle);
             }

             post.setEntity(reqEntity);
             HttpResponse response = client.execute(post);
             resEntity = response.getEntity();
             final String response_str = EntityUtils.toString(resEntity,"UTF-8");
             if (resEntity != null) {

                 Log.i("RESPONSE PHOTO",response_str);
                 runOnUiThread(new Runnable(){
                        public void run() {

                             try {
                                System.out.println("n Response photo from server : " + response_str);
                                Toast.makeText(getApplicationContext(),"Upload Complete. Check the server uploads directory.", Toast.LENGTH_LONG).show();
                            } catch (Exception e) {
                                e.printStackTrace();
                                Log.e("log_tag", "error"+e.toString());
                            }
                        }
                   });
             }
        }
        catch (Exception ex){
             Log.e("Debug", "error: " + ex.getMessage(), ex);
        }

} 
```

**堆栈跟踪**

```
07-17 11:22:34.715: E/AndroidRuntime(18379): FATAL EXCEPTION: main
07-17 11:22:34.715: E/AndroidRuntime(18379): java.lang.IllegalArgumentException: View not attached to window manager
07-17 11:22:34.715: E/AndroidRuntime(18379):    at android.view.WindowManagerImpl.findViewLocked(WindowManagerImpl.java:380)
07-17 11:22:34.715: E/AndroidRuntime(18379):    at android.view.WindowManagerImpl.removeView(WindowManagerImpl.java:225)
07-17 11:22:34.715: E/AndroidRuntime(18379):    at android.view.Window$LocalWindowManager.removeView(Window.java:432)
07-17 11:22:34.715: E/AndroidRuntime(18379):    at android.app.Dialog.dismissDialog(Dialog.java:278)
07-17 11:22:34.715: E/AndroidRuntime(18379):    at android.app.Dialog.access$000(Dialog.java:71)
07-17 11:22:34.715: E/AndroidRuntime(18379):    at android.app.Dialog$1.run(Dialog.java:111)
07-17 11:22:34.715: E/AndroidRuntime(18379):    at android.app.Dialog.dismiss(Dialog.java:268)
07-17 11:22:34.715: E/AndroidRuntime(18379):    at com.planbiz.net.News_Edit$UploadImage.onPostExecute(News_Edit.java:1019)
07-17 11:22:34.715: E/AndroidRuntime(18379):    at com.planbiz.net.News_Edit$UploadImage.onPostExecute(News_Edit.java:1)
07-17 11:22:34.715: E/AndroidRuntime(18379):    at android.os.AsyncTask.finish(AsyncTask.java:417)
07-17 11:22:34.715: E/AndroidRuntime(18379):    at android.os.AsyncTask.access$300(AsyncTask.java:127)
07-17 11:22:34.715: E/AndroidRuntime(18379):    at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:429)
07-17 11:22:34.715: E/AndroidRuntime(18379):    at android.os.Handler.dispatchMessage(Handler.java:99)
07-17 11:22:34.715: E/AndroidRuntime(18379):    at android.os.Looper.loop(Looper.java:130)
07-17 11:22:34.715: E/AndroidRuntime(18379):    at android.app.ActivityThread.main(ActivityThread.java:3687)
07-17 11:22:34.715: E/AndroidRuntime(18379):    at java.lang.reflect.Method.invokeNative(Native Method)
07-17 11:22:34.715: E/AndroidRuntime(18379):    at java.lang.reflect.Method.invoke(Method.java:507)
07-17 11:22:34.715: E/AndroidRuntime(18379):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
07-17 11:22:34.715: E/AndroidRuntime(18379):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
07-17 11:22:34.715: E/AndroidRuntime(18379):    at dalvik.system.NativeStart.main(Native Method) 
```

**我的`AsyncTask`**

```
class UploadImage extends AsyncTask<String, String, String> {

            @Override
            protected void onPreExecute() {
                super.onPreExecute();
                pDialog = new ProgressDialog(News_Edit.this);
                pDialog.setMessage("Loading ...");
                pDialog.setIndeterminate(false);
                pDialog.setCancelable(false);
                pDialog.show();
            }

            protected String doInBackground(String... args) {
            Log.d("imagepath", "imagepath: " + imagepath);
                        finalPath = new File(imagepath);
                        if (!finalPath.exists()){
                            try {
                                  finalPath.createNewFile();
                                  copyFile(new File(filePath), finalPath);
                            } catch (IOException e) {
                                     // TODO Auto-generated catch block
                                   e.printStackTrace();
                            }
                        }

                        Bitmap bmpPic = BitmapFactory.decodeFile(imagepath);
                        int MAX_IMAGE_SIZE = 300000; // max final file size
                        if ((bmpPic.getWidth() >= 600) && (bmpPic.getHeight() >= 600)) {
                              BitmapFactory.Options bmpOptions = new BitmapFactory.Options();
                              bmpOptions.inSampleSize = 1;
                              while ((bmpPic.getWidth() >= 600) && (bmpPic.getHeight() >= 600)) {
                                  bmpOptions.inSampleSize++;
                                  bmpPic = BitmapFactory.decodeFile(filePath, bmpOptions);
                              }
                                Log.d("bmpOptions.inSampleSize", "Resize: " + bmpOptions.inSampleSize);
                            }
                            int compressQuality = 104; // quality decreasing by 5 every loop. (start from 99)
                            int streamLength = MAX_IMAGE_SIZE;
                            while (streamLength >= MAX_IMAGE_SIZE) {
                               ByteArrayOutputStream bmpStream = new ByteArrayOutputStream();
                               compressQuality -= 5;
                               Log.d("compressQuality", "Quality: " + compressQuality);
                               bmpPic.compress(Bitmap.CompressFormat.JPEG, compressQuality, bmpStream);
                               byte[] bmpPicByteArray = bmpStream.toByteArray();
                               streamLength = bmpPicByteArray.length;
                               Log.d("streamLength", "Size: " + streamLength);
                            }
                        try {
                            FileOutputStream bmpFile = new FileOutputStream(finalPath);
                            bmpPic.compress(Bitmap.CompressFormat.JPEG, compressQuality, bmpFile);
                            bmpFile.flush();
                            bmpFile.close();
                        } catch (Exception e) {
                            Log.e("ERROR", "Error on saving file");
                        }

                File file1 = new File(imagepath);
                try
                {

                     HttpClient client = new DefaultHttpClient();
                     HttpPost post = new HttpPost(URL);

                     FileBody bin1 = new FileBody(file1,imageType);
                     //String abc=bin1.getMediaType();
                     //System.out.println("abc :"+abc);
                     System.out.println("imageType :"+imageType);
                     MultipartEntity reqEntity = new MultipartEntity();

                     if(use.equals("EditData")){
                         reqEntity.addPart("uploadedfile1", bin1);
                         reqEntity.addPart("uID", new StringBody(md5_id));
                         reqEntity.addPart("uPWD", new StringBody(md5_pass));
                         reqEntity.addPart("TYPE", new StringBody("NWPHOTO"));
                         reqEntity.addPart("REF", new StringBody(Ref));
                         reqEntity.addPart("CAT", new StringBody(cat0));
                         System.out.println("imageType :"+imageType+" "+md5_id+" "+md5_pass+" "+Ref+" "+cat0);
                     }else if(use.equals("NewData")){
                         reqEntity.addPart("uploadedfile1", bin1);
                         reqEntity.addPart("uID", new StringBody(md5_id));
                         reqEntity.addPart("uPWD", new StringBody(md5_pass));
                         reqEntity.addPart("TYPE", new StringBody("INSERTNW"));
                         reqEntity.addPart("Title", new StringBody(newTitle));
                         reqEntity.addPart("News", new StringBody(newNews));
                         reqEntity.addPart("CAT", new StringBody(cat0));
                         reqEntity.addPart("use", new StringBody("NewData"));
                         System.out.println("imageType :"+imageType+" "+md5_id+" "+md5_pass+" "+cat0+" "+newNews+" "+newTitle);
                     }

                     post.setEntity(reqEntity);
                     HttpResponse response = client.execute(post);
                     resEntity = response.getEntity();
                     response_str = EntityUtils.toString(resEntity,"UTF-8");
                }catch (Exception ex){
                     Log.e("Debug", "error: " + ex.getMessage(), ex);
                }
                return null;
            }

            protected void onPostExecute(String file_url) {
                if (resEntity != null) {
                    pDialog.dismiss();
                         Log.i("RESPONSE PHOTO",response_str);
                         runOnUiThread(new Runnable(){
                                public void run() {
                                    try {
                                        System.out.println("n Response photo from server : " + response_str);
                                        Toast.makeText(getApplicationContext(),"Upload Complete. Check the server uploads directory.", Toast.LENGTH_LONG).show();
                                    } catch (Exception e) {
                                        e.printStackTrace();
                                        Log.e("log_tag", "error"+e.toString());
                                    }
                                }
                           });
                     }
                }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T04:46:28.733

`OnPostExecute`在 UI 线程上调用。尝试将方法更改为；

```
@Override
protected void onPostExecute(String file_url) {
    if (resEntity != null) {
        pDialog.dismiss();
        Log.i("RESPONSE PHOTO",response_str);
        Toast.makeText(getApplicationContext(),"Upload Complete. Check the server uploads directory.", Toast.LENGTH_LONG).show();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T04:55:37.533

您不需要在 AsyncTask 中启动新线程。尝试在不使用新线程的情况下完成所有任务。（就像在你的`onPostExecute()`

> AsyncTask 允许正确和轻松地使用 UI 线程。此类允许在 UI 线程上执行后台操作并发布结果，而无需操作线程和/或处理程序。
> 
> 异步任务由在后台线程上运行的计算定义，其结果在 UI 线程上发布

阅读[文档](http://developer.android.com/reference/android/os/AsyncTask.html)以获得更好的理解。

还尝试替换吐司中的上下文值

```
Toast.makeText(News_Edit.this,"Upload Complete. Check the server uploads directory.", Toast.LENGTH_LONG).show(); 
```

# php - 脚本无法登录

> ID：11515739
> 
> 赞同：1
> 
> 时间：2012-07-17T03:44:03.873
> 
> 标签：php, mysql, login

我知道我在这里遗漏了一些东西。我已经盯着这个简短的脚本有一段时间了，我看不出它哪里出了问题。这是我的脚本：

[http://pastebin.com/FtNetNtwj](http://pastebin.com/FtNeNtwj)

这是正在运行的脚本：

[http://troop007.tk/login.007?action=login](http://troop007.tk/login.007?action=login)

用户名和密码都是“演示”。我输入用户名和密码，按登录，而不是带我进入 login.007?action=logincheck，它永远不会离开 login.007?action=login。

我有一个名为 users 的 MySQL 表，在该表中有两个字段：用户名和密码。

我使用的脚本是这里找到的脚本的修改版本：[http ://www.phpeasystep.com/phptu/6.html](http://www.phpeasystep.com/phptu/6.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T04:03:30.727

我会放弃那个教程，登录安全性不能掉以轻心，你不应该在数据库中有明文密码，它们应该用盐进行散列，并且两者都应该在成功登录后更改。

**这是一个安全的登录脚本：**

它使用 PDO 进行数据库连接，实际登录表单使用随机密钥进行登录，例如。不是用户名/密码。密码使用 sha512 x 25k 次和 16 字节密钥盐进行哈希处理，暴力保护。希望能帮助到你。

```
<?php
session_start();

/**
 * Table

CREATE TABLE IF NOT EXISTS `users` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `username` varchar(45) DEFAULT NULL,
  `pass_hash` varchar(255) DEFAULT NULL,
  `pass_salt` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=0 ;

 */

//DB Stuff
define('DBHOST','localhost');
define('DBNAME','yourdb');
define('DBUSER','root');
define('DBPASS','');
//End Config:---

//Open a PDO Database connection
try {
    $db = new PDO("mysql:host=".DBHOST.";dbname=".DBNAME, DBUSER, DBPASS);
    $db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    $db->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
}catch (Exception $e){
    die('Cannot connect to mySQL server.');
}

class Login{
    public $db;
    public $user;
    public $pass;
    public $error;
    // sha512
    public $algo = '$6';
    // Cost parameter, 25k iterations
    public $cost = '$rounds=25000$';

    function __construct(PDO $db){
        $this->db = $db;
        $this->global_salt = sha1($_SERVER['HTTP_HOST']);
    }

    /**
     * Return a random seed for the mt_rand function
     */
    function make_seed(){
        list($usec, $sec) = explode(' ', microtime());
        return (float) $sec + ((float) $usec * 100000);
    }

    /**
     * Return a random unique salt for new created hash/crypt function salts
     */
    function unique_salt(){
        $salt = null;
        mt_srand($this->make_seed());
        for($i=0;$i < mt_rand(1,10);$i++){
            $salt = sha1($this->global_salt.$salt.mt_rand().uniqid().microtime(true));
        }
        return substr($salt,0,16);
    }

    /**
     * Hash a given password and store parts in:
     * $this->salt = a unique 16 byte salt
     * $this->hash = The full crypted hash sting including algo/cost/salt/crytedpassword
     * $this->full_salt = Just algo/cost/salt section, the first 33 bytes 
     * $this->hashed_password = Just crytedpassword section, proceeding bytes after first 33 bytes
     * 
     */
    function hash($password){
        $this->salt = $this->unique_salt();
        $this->full_hash = crypt($password, $this->algo.$this->cost.$this->salt);
        $this->full_salt = substr($this->full_hash, 0, 33);
        $this->hashed_password = substr($this->full_hash, 33);
        return $this->full_hash;
    }

    /**
     * Method to validate the given crypto hash against the given password
     */
    function check_password($hash, $salt, $password){
        $hash = ($this->algo.$this->cost.$salt.'$'.$hash);
        if($hash == crypt($password, substr($hash, 0, 33))){
            //Regenerate new hash and salt for given password
            $this->update_keys();
            $this->status = true;
            $_SESSION['logged_in']=true;
            return true;
        }else{
            $this->status = false;
            return false;
        }
    }

    /**
     * Set error
     */
    function set_error($type,$value){
        $this->error[$type]=$value;
    }

    /**
     * Output error
     */
    function error($type){
        echo (isset($this->error[$type]))?$this->error[$type]:null;
    }

    /**
     * Logout and regenirate session and redirect to index
     */
    static function logout(){
        unset($_SESSION['logged_in']);
        session_regenerate_id(true);
        exit(header('Location: ./index.php'));
    }

    function anti_brute($intval){
        if(!isset($_SESSION['access_time'])){
            $_SESSION['access_time']=time();
        }else{
            $t = time()-$_SESSION['access_time'];
            if($t <= $intval){
                $this->set_error('global','Time violation');
                $_SESSION['access_time']=time();
                return true;
            }
            $_SESSION['access_time']=time();
            return false;
        }
    }

    function process_login(){
        if($_SERVER['REQUEST_METHOD']=='POST'){

            $this->user   = (isset($_SESSION['userParam']) && isset($_POST[$_SESSION['userParam']]))?$_POST[$_SESSION['userParam']]:null;
            $this->pass   = (isset($_SESSION['passParam']) && isset($_POST[$_SESSION['passParam']]))?$_POST[$_SESSION['passParam']]:null;
            $this->create = (isset($_SESSION['createParam']) && isset($_POST[$_SESSION['createParam']]))?$_POST[$_SESSION['createParam']]:null;

            $cont = true;
            if($this->user == null || strlen($this->user) <= 2){$this->set_error('user','Please enter a username!'); $cont=false;}
            if($this->pass == null || strlen($this->pass) <= 2){$this->set_error('pass','Please enter a password!'); $cont=false;}

            if($cont==true){
                //Alls good continue
                if($this->create != null && $this->create=='1'){
                    //Check user for new account
                    if($this->check_user()==true){$this->set_error('user','Username already taken.');return;}
                    //Create account
                    $this->create_account();
                }else{
                    //Stop really fast request 2 seconds
                    if($this->anti_brute(2)==false){
                        //Attempt to login
                        $this->check_login();
                    }
                }
            }else{
                //Error with form
                $this->set_error('global','Please fill in login form!');
            }
        }
    }

    function check_user(){
        $sql = 'SELECT 1 FROM users WHERE username=:username';
        $statement = $this->db->prepare($sql);
        $statement->bindParam(':username', $this->user, PDO::PARAM_STR);
        $statement->execute();
        $result = $statement->fetch(PDO::FETCH_ASSOC);

        if(!empty($result)){return true;}else{return false;}
    }

    function check_login(){
        $sql = 'SELECT pass_hash, pass_salt FROM users WHERE username=:username';
        $statement = $this->db->prepare($sql);
        $statement->bindParam(':username', $this->user, PDO::PARAM_STR);
        $statement->execute();
        $result = $statement->fetch(PDO::FETCH_ASSOC);

        $this->check_password($result['pass_hash'], $result['pass_salt'], $this->pass);
    }

    function create_account(){
        //Create new account
        $this->hash($this->pass);
        $sql = 'INSERT into users (username, pass_hash, pass_salt) VALUES (:username, :pass_hash, :pass_salt)';
        $statement = $this->db->prepare($sql);
        $statement->bindParam(':username', $this->user, PDO::PARAM_STR);
        $statement->bindParam(':pass_hash', $this->hashed_password, PDO::PARAM_STR);
        $statement->bindParam(':pass_salt', $this->salt, PDO::PARAM_STR);
        $statement->execute();

        $this->status = true;
        $_SESSION['logged_in']=true;
    }

    function update_keys(){
        //Update account password hash & salt
        $this->hash($this->pass);
        $sql = 'UPDATE users SET pass_hash=:pass_hash, pass_salt=:pass_salt WHERE username=:username';
        $statement = $this->db->prepare($sql);
        $statement->bindParam(':username', $this->user, PDO::PARAM_STR);
        $statement->bindParam(':pass_hash', $this->hashed_password, PDO::PARAM_STR);
        $statement->bindParam(':pass_salt', $this->salt, PDO::PARAM_STR);
        $statement->execute();

        $this->status = true;
        $_SESSION['logged_in']=true;
    }

}//END Login class

//Logout handler
if(isset($_GET['logout'])){ Login::logout(); }

$login = new Login($db);

//Login handler
$login->process_login();

//Debug
echo '<pre>';
print_r($login);
echo '</pre>';

//Check login status
if(isset($_SESSION['logged_in']) && $_SESSION['logged_in']==true){
    //Logged in
    echo '<a href="?logout">Logout</a>';
}else{
    //Not Logged In

    //Show login form & create uniqie parrams for user/pass/create post keys
    $_SESSION['userParam']   = sha1(uniqid().microtime(true));
    $_SESSION['passParam']   = sha1(uniqid().microtime(true));
    $_SESSION['createParam'] = sha1(uniqid().microtime(true));
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Secure Login</title>
</head>

<body>
<h1>Secure Login Example</h1>
<h3>Please login:</h3>

<?php $login->error('global'); ?>

<form method="POST" action="">
  <label for="user">Username :&nbsp; </label>
  <input type="text" name="<?=$_SESSION['userParam'];?>" size="29"> <?php $login->error('user'); ?>
  <br />
  <label for="pass">Password :&nbsp; </label>
  <input type="text" name="<?=$_SESSION['passParam'];?>" size="29"> <?php $login->error('pass'); ?>
  <br /> 
  <input type="submit" value="Login">&nbsp; and create my account:<input type="checkbox" name="<?=$_SESSION['createParam'];?>" value="1">
</form>
</body>
</html>
<?php } ?> 
```

# job-scheduling - 防止执行非 SGE 程序

> ID：11515742
> 
> 赞同：0
> 
> 时间：2012-07-17T03:44:21.127
> 
> 标签：job-scheduling, system-administration, sungridengine

从SGE节点的系统管理来看，是否可以强制用户通过qsub运行长时间运行的程序，而不是单机运行？

问题是同一台机器充当控制节点和计算节点。因此，我无法将长时间运行的程序与使用“gcc”编译的用户区分开来。理想情况下，我想强制用户通过 qsub 提交长时间运行的作业（即超过一个小时）。我什至不介意有点刻薄并杀死运行时间超过一个小时但没有通过 qsub 提交的作业。

到目前为止，我所能做的就是发送电子邮件要求用户“请使用 qsub！”...

我查看了 SGE 配置，但似乎没有任何相关性。但也许我只是错过了一些东西......任何帮助将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T12:10:02.053

我对您的设置有点困惑，但我假设用户通过登录也是计算节点来提交作业。以下是一些想法，从最好到最坏：

1.  显然，最好的办法是为用户提供一个单独的控制节点。

2.  除此之外，运行一个资源有限的虚拟机作为控制节点。

3.  在节点上配置用户级资源限制（例如**ulimit ）。**您可以限制 CPU、内存和进程的使用，这可能是您关心的而不是时钟时间。

听起来最后一个可能最适合你。这也不难。

# javascript - 使用jQuery获取表单提交并存储在变量中的复选框值

> ID：11515743
> 
> 赞同：2
> 
> 时间：2012-07-17T03:44:24.467
> 
> 标签：javascript, jquery, forms, checkbox

使用带有“测试”类的多个复选框的表单（只能检查其中一个，但类似于使用单选按钮 - 顺便说一句，不是我的想法！）。

提交表单后，我想获取选中的复选框的值并将其存储在变量中 - 任何人都可以在这里提供帮助吗？

干杯!

克里斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T03:47:37.730

```
$("form").submit(function() {
    var aVariable = $('input.test[type="checkbox"]:checked', this).val();
}); 
```

`.val()`如果在空的 jQuery 对象上调用，则返回`undefined`，如果没有选中复选框，则会出现这种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T05:54:26.900

请在代码箱上尝试以下解决方案：

注意：首先在 header 标签上添加最新的 jquery.js javascript 文件。

HTML：

```
<form id="frm1" method="post">
  <input type="radio" class="test" checked="checked" value="radio1">
  Radio1
  <input type="radio" class="test" checked="checked" value="radio2">
  Radio2
  <input type="radio" class="test" value="radio3">
  Radio3
  <br/>
  <input type="checkbox" class="test" checked="checked" value="check1">
  Check1
  <input type="checkbox" class="test" value="check2">
  Check2
  <input type="checkbox" class="test" checked="checked" value="check3">
  Check3
  <br/>
  <input type="submit" value="submit" />
</form> 
```

脚本标签中的 jQuery：

```
$(function() {

    $("#frm1").submit(function() {
        $("input.test[type=checkbox]:checked").each(function() {
            alert($(this).val());
        });

        return false;
    });
}); 
```

我已经在[http://codebins.com/bin/4ldqpap上完成了 bin](http://codebins.com/bin/4ldqpap)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T11:13:19.167

这会起作用

```
$(function() {
    $("#frm1").submit(function() {
        $("input.test[type=checkbox]:checked").each(function() {
            alert($(this).val());
        });

        return false;
    });
}); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-03-09T09:57:15.040

```
var inputElements = document.getElementsByClassName('messageCheckbox');
    var checkedValue=[];
    for(var i=0; inputElements[i]; ++i){
       console.log(inputElements[i]);
       if(inputElements[i].checked){
           checkedValue.push(inputElements[i].value);
       }
    }
alert(checkedValue) 
```

# c# - 如何检测不是英文的输入？

> ID：11515746
> 
> 赞同：2
> 
> 时间：2012-07-17T03:44:46.693
> 
> 标签：c#, .net, regex, vb.net

我正在尝试检测输入是否不是英文字符，将不允许输入，我正在使用下面的代码来验证输入。如果输入是非英语的，例如**'ກັ​ຫ​ກ່​ຫ່'**、**'你好**'，则代码可以正常工作。当输入包含英文字符和非英文字符时，下面的代码将允许输入通过，我不希望这种情况发生。如果在输入中检测到任何非英文字符，我如何禁止输入？

```
If Not Regex.IsMatch(Edt.Text, "[A-Za-z0-9]") Then
End If 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T03:52:04.167

使用这个正则表达式：

```
^[A-Za-z0-9]*$ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T03:52:58.297

如果包含*任何*拉丁字母或阿拉伯数字，该`Regex.IsMatch`调用将成功。`Edt.Text`

 *首先，您需要更清楚地定义问题；特别是，您需要准确确定允许使用哪些字符（考虑空格和标点符号）。

然后您需要修改正则表达式，使其匹配整个字符串，可能类似于：

```
"^[something]*$" 
```

在哪里`something`留下作为练习。*

# java - 我如何知道 JVM 配置的目标？

> ID：11515747
> 
> 赞同：0
> 
> 时间：2012-07-17T03:44:46.587
> 
> 标签：java, jvm

我如何知道 JVM 配置的目标？

我知道如何为我的服务器设置 JVM，这可以通过命令完成

`'java -Xmx3550m -Xms3550m -Xmn2g -Xss128k'`.

但是什么命令可以看到它是什么样的？有什么指导吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T06:18:16.747

您可以使用 VisualVm/Jconsole 连接到正在运行的 jvm。这将为您提供所需的所有信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T06:26:01.533

如果您正在运行 linux，则可以使用类似的东西`ps -efx | grep java`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T06:51:17.587

您可以使用 VisualVM 显示有关 JVM 的信息。

如果您想查看命令行参数，您可以使用它`jps -lvm`来列出所有 Java 进程。

最大尺寸有点可疑。看来您正在尝试在 64 位操作系统上选择 32 位 JVM 的最大大小（在某些操作系统上可能约为 3.5 GB）就我个人而言，我只会使用 64 位 JVM 并使用 4 GB，因为它使用32 位引用，因此这样做几乎没有缺点。

# php - 使用选择框表单方法获取时如何获取链接网址？

> ID：11515748
> 
> 赞同：0
> 
> 时间：2012-07-17T03:44:57.680
> 
> 标签：php

我有一个示例代码：

```
<form action="index.php" method="get">
<select name="id">
   <option value="1">One</option>
   <option value="2">Two</option>
</select>
<input type="submit" value="submit" name="submit" />
</form> 
```

当我提交表单时 url 是 " `index.php?id=1`" // 或`index.php?id=2`

=> 如何解决它是结果 " `index.php?id=1&name=One`" // 或`index.php?id=2&name=Two`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T04:25:15.263

我认为最好的方法是从数据库中填充选项。使用这些值作为数据库 ID 号。然后，您可以为每个选项存储尽可能多的信息。例子：

```
//some sort of loop{
<option value="
<?php echo $row_option['id'];?>">
<?php echo $row_option['display_text'];?></option> 
} 
```

在另一端查询 db 的值；使用该值所需的任何数据。

# iphone - NSUserDefaults 保存

> ID：11515753
> 
> 赞同：-1
> 
> 时间：2012-07-17T03:45:57.780
> 
> 标签：iphone, ios, xcode, nsuserdefaults

我有我的代码`NSUserDefaults`，但是当我需要调整它时，我会做这样的事情：

```
 // OLD save
  NSInteger myInt = [prefs integerForKey:@"MYINTEGER"];

   // if need to be adjusted will be NEW save
 if(myInt > index){
    myInt--;
    [[NSUserDefaults standardUserDefaults] setInteger:myInt forKey:@"MYINTEGER"];
 } 
```

因为我的问题是当我再次重新加载它时，它似乎在新保存后当然已调整。
只是想知道是否有办法重新加载以前的保存？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T04:08:48.620

如果您使用单个整数值，则无法使用 NSUserDefaults 获取先前的保存，它将覆盖最后一个值。
您可以在 NSUserDefaults 中使用 NSArray 而不是单个整数值，其中最后一个元素将给出最新值，而前一个元素将给出后续值。或者，如果您只需要前一个值和新值，请尝试使用两个键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T04:03:35.290

当您使用相同的密钥时，您之前的值将被替换。因此您无法获取之前的值。所以使用不同的密钥。

# javascript - 如何在 Javascript 中创建动态数组？

> ID：11515756
> 
> 赞同：2
> 
> 时间：2012-07-17T03:46:08.323
> 
> 标签：javascript, jquery

我需要动态创建以下数组，例如：

```
var data = { point: [
              { x:5, y:8 },
              { x:8, y:10},
              ]};

 console.log(data.point[0].x);   // 5  n=0
 console.log(data.point[1].y);   // 10 n=1 
```

在某些时候，我的应用程序需要将数组扩展为 2 个以上的项目（n=0，n=1）。请让我知道该怎么做（即 n = 9 ）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T03:48:42.937

您可以使用[Array.push](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/push)方法将元素添加到数组中。

```
var point = {x:1,y:1};
data.point.push(point); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T03:49:10.183

你可以像这段代码一样使用方法'push'

```
 var data = { point: [
                      { x:5, y:8 },
                      { x:8, y:10},
                      ]};

         console.log(data.point[0].x);   // 5  n=0
         console.log(data.point[1].y);   // 10 n=1

        data.point.push({x:4,y:3});

        console.log(JSON.stringify(data.point)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T03:55:19.607

你可以这样做：

```
var data = {'points' : []};

function addPoint(x, y) {
    data.points.push({'x' : x, 'y' : y});
}

function getPoint(index) {
    return data.points[index];
}

addPoint(10, 20);
addPoint(5, 3);

var p = getPoint(1);
alert(p.x + ", " + p.y); //alerts => "5, 3" 
```

这适用于任意数量的点。

**更新**

清除阵列

```
function clearPoints() {
    data.points = [];
} 
```

**更新 2**

如果您有一个简单的页面，这些小功能将可以正常工作。如果这个点处理最终会成为更大系统的一部分，那么做这样的事情可能会更好：

```
var data = {
    'points' : [], 
    addPoint : function(x, y) {
        this.points.push({
            'x' : x, 
            'y' : y
        });
    }, 
    getPoint : function(index) {
        return this.points[index];
    }, 
    clearPoints : function() {
        this.points = [];
    }, 
    removePoint : function(index) {
        this.points.splice(index, 1);
    }
}; 
```

示例用法：

```
alert(data.points.length); // => 0

data.addPoint(1, 2);
data.addPoint(8, 12);
data.addPoint(3, 7);
alert(data.points.length); // => 3

var p = data.getPoint(2); //p = {x:3, y:7};

data.removePoint(1); 
alert(data.points.length); // => 2

data.clearPoints();
alert(data.points.length); // => 0 
```

它可以让您的点处理更简洁，更易于使用和更新。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T03:58:15.470

您可以按照说明使用[push()](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/push)函数，也可以使用索引向数组添加其他项目，这在[Google 样式指南](http://google-styleguide.googlecode.com/svn/trunk/javascriptguide.xml)中是首选。后一种方法确实需要您有一个指向最后一个索引的指针。

> 请注意，由于将值分配给数组比使用 push() 更快，因此您应该尽可能使用分配。

```
for(var i=lastIndex; i < numOfNewPoints; i++){
    data.point[i] = {x:4, y:3};
} 
```

# objective-c - 使用方法[NSBundle loadNibNamed：xibName owner：[NSApplication sharedApplication]]加载Nib时如何传递参数？

> ID：11515759
> 
> 赞同：1
> 
> 时间：2012-07-17T03:46:20.113
> 
> 标签：objective-c, xib

当我使用`loadNibNamed`方法加载`xib`文件时，如何传递一些参数？

```
[NSBundle loadNibNamed:xibName owner:[NSApplication sharedApplication]]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T05:45:01.840

为了在实例化你的类时传递参数，向 `loadNibNamed:owner:`方法添加一个包装器并将你的参数传递给这个包装器。

这是此的代码片段：

> ```
> (ClassName *) GetInstanceWithParameter1:(ParameterType *)param1 
>                             andParameter2:(ParameterType *)param2 {
>      ClassName *instance = [[ClassName alloc] initWithNibNamed:nibName               
>                                                         bundle:nibBundle];
>      instance -> P1 = param1;
>      instance -> P2 = param2;
>      return instance;
> } 
> ```

这里 P1 和 P2 是对应于 param1 和 param2 的类级别变量。现在您可以在代码中的任何位置使用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-03T10:08:26.130

这是我所做的对我有用的事情的一个例子。

假设您有一个 UIView 的 Xib (Nib) 文件 (MyNibView.xib)。

那个 UIView 有一个与之关联的 Class，叫做 NibView，它有一个 header 和一个 main 文件；NibView.h 和 NibView.h。

> 如果您不知道如何将类链接到 Nib：
> 
> 单击您的 Nib > 转到 Identity Inspector > 在 Custom Class > Class 下输入您的 Class。

1）在 NibView.h 中确保您已实例化对象（您想要通过的对象）。对于这个例子，我将使用一个名为 name 的 NSString。

```
@property NSString *name; 
```

2) 在 NibView.m 中创建一个函数（例如 helloWorld），然后在该函数中对传入的对象执行任何您想要执行的操作。

```
- (void) helloWorld {
    NSLog(@"hello %@",self.name);
} 
```

3）写那个方法也是 NibView.h

```
@property NSString *name;

- (void) helloWorld; 
```

4) 在您从中传递数据的类中（例如可能是 ViewController），导入您的视图类

```
#import "NibView.h" 
```

并编写以下代码：

```
NSArray *nib =[[NSBundle mainBundle]loadNibNamed:@"MyNibView" owner:self options:nil];
// At this point - (void)awakeFromNib is called
NibView *view = [nib objectAtIndex:0];
view.name = @"Bob";
// Now lets call the method "helloWorld"
[view helloWorld];
// This line sets the MyNibView as the UIView of a ViewController (only relevant for this example).
self.view = view; 
```

希望这可以帮助其他人喜欢它帮助我

# java - 在java中混合图像

> ID：11515761
> 
> 赞同：2
> 
> 时间：2012-07-17T03:46:22.860
> 
> 标签：java, graphics, opacity, transition, fading

好吧，我的游戏引擎运行顺畅，在所有机器上都完美运行！在继续向引擎添加功能之前，我想增强引擎的图形功能。我关注的是褪色和混合图像。我将需要一些平滑的过渡，因此在不使用任何 3rd 方库（如 OpenGL）的情况下，如何在绘制图形对象时将不透明度应用于图像？

感谢您的任何回复：D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T04:45:15.390

也许使用[AlphaComposite](http://docs.oracle.com/javase/tutorial/2d/advanced/compositing.html)可能是您正在寻找的？

```
Image image = new Image(...);
float alpha = 0.5;
@Override
public void paintComponent(Graphics g) {
    Graphics2D g2d = (Graphics2D)g;
    AlphaComposite composite = AlphaComposite.getInstance(AlphaComposite.SRC_OVER, alpha);
    g2d.setComposite(composite);
    g2d.drawImage(image, 0, 0, null);
} 
```

您可以将 alpha 设置为您想要的任何透明度级别（介于 0.0 和 1.0 之间）。在这种情况下，您可能希望使用[AlphaComposite.SRC_OVER](http://docs.oracle.com/javase/7/docs/api/java/awt/AlphaComposite.html#SRC_OVER)来覆盖透明图像并查看其背后，除非您要进行其他操作（如果是这样，您可以很容易地在第一时间看到所有可用的常量及其解释提供的链接）。

# haskell - 在操作系统线程周围改组 Haskell 线程时，ThreadID 是否一致？

> ID：11515772
> 
> 赞同：4
> 
> 时间：2012-07-17T03:48:57.737
> 
> 标签：haskell, concurrency

在 Haskell 中，forkIO 创建了一个未绑定（Haskell）线程，而 forkOS 创建了一个绑定（本机）线程。[我在这里](https://stackoverflow.com/questions/11443824/how-does-hopengl-behave-with-regards-to-other-threads-and-tchans-in-haskell)提到的上一个问题的答案是不能保证 Haskell 线程保持在同一个操作系统线程上，这似乎得到了[Control.Concurrent](http://hackage.haskell.org/packages/archive/base/4.5.1.0/doc/html/Control-Concurrent.html)模块的文档的支持。我的问题是，如果一个正在运行的 Haskell 线程被交换到另一个操作系统线程，它的 ThreadID 会保持不变吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-17T03:54:52.030

是的。

> A`ThreadId`是表示线程句柄的抽象类型。

这就是您向特定线程发送异步信号的方式：使用`ThreadId`. 涉及哪个操作系统线程并不重要，而且目标线程很可能根本没有绑定到任何操作系统线程（例如，它正在休眠）。

“操作系统线程”的存在在某种程度上是一个实现细节，尽管如果您将 FFI 与某些库一起使用，则需要管理它们。否则，您几乎可以忽略代码中的操作系统线程。

# android - Android - 当我的活动即将引发 OutOfMemory 异常时是否有任何回调？

> ID：11515776
> 
> 赞同：2
> 
> 时间：2012-07-17T03:49:14.723
> 
> 标签：android, memory-management

我有一个 ViewFlipper，在它的每个子视图中，我在上面放了一个位图。问题是我担心我的应用程序（特别是那个 Activity）会耗尽内存并引发 (OutOfMemory) 异常。

我想在捕获“OutOfMemory”异常时，但这已经太晚了......

我想在我的活动“**即将**耗尽内存”时实现一些回调方法（例如，如果我再分配 2 个或 3 个位图，它将耗尽内存）。

有什么我们可以实现的方法，以便我可以释放其中的一些加载的位图吗？如果我的应用程序仍有足够的内存将位图保存在内存中，我不想释放位图。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T03:59:23.540

您可以在此时验证系统的可用内存

[如何在 Android 中发现我的应用程序的内存使用情况？](https://stackoverflow.com/questions/2298208/how-to-discover-memory-usage-of-my-application-in-android)

在 android 4.1 中，新的 ComponentCallbacks2 常量如 TRIM_MEMORY_RUNNING_LOW 和 TRIM_MEMORY_RUNNING_CRITICAL 在系统调用 onLowMemory() 之前为前台进程提供了有关内存状态的更多信息。

# spring - 如何避免 Spring 中的验证消息从“&”转换为“&”

> ID：11515787
> 
> 赞同：0
> 
> 时间：2012-07-17T03:50:31.207
> 
> 标签：spring, spring-mvc, internationalization

我正在开发一个支持英语和阿拉伯语的 Spring MVC 应用程序。

我分别为英语和阿拉伯语创建了`messages_en.properties`和。`messages_ar.properties`

在`messages_ar.properties`中，我将[Unicode](http://unicode.org/charts/)字符（例如`&#1604`）用于阿拉伯字符。

我将`messages_en.properties`&`messages_ar.properties`用于弹簧消息和验证消息。

这`<spring:message code="label.dateTime"/>`适用于验证错误，但不适用于验证错误`<form:errors path="*" />`。

我发现`<form:errors path="*" />`将 unicode 从转移`&#1604`到**`&amp;`**`#1604.`

有没有人遇到过类似的问题以及如何避免 Spring 转换 unicode 字符？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T00:47:28.240

我发现了问题。它是表单错误标签，默认情况下，它设置 htmlEscape="ture" 会将 "&" 转换为 "&"。来解决这个问题。只需添加属性 htmlEscape="false" 即可形成错误标签。

# shell - 登录shell和交互式shell？

> ID：11515788
> 
> 赞同：0
> 
> 时间：2012-07-17T03:50:31.843
> 
> 标签：shell

谁能告诉我什么是登录 shell 和交互式 shell 以及它们各自读取的配置（etc/profile、etc/bashrc、.bash_profile ...）？

我看到了一些这样的解释：登录 shell 是一个参数零的第一个字符是 - 或以 --login 选项开头的 shell。交互式 shell 是在没有非选项参数且没有 -c 选项的情况下启动的，其标准输入和错误都连接到终端（由 isatty(3) 确定），或者以 -i 选项启动。PS1 已设置并且 $- 包括 i 如果 bash 是交互式的，则允许 shell 脚本或启动文件测试此状态。

但这更令人困惑！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T03:55:06.223

`man bash`您系统上的命令（`INVOCATION`部分）讨论了所有这些，并描述了何时读取哪些文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T04:12:04.613

好吧，如果您不信任手册页，请尝试使用 strace。

```
strace -o/tmp/tr -f bash
exit
grep open /tmp/tr | grep $HOME 
```

对我来说，这表明：

```
18316 open("/home/sethrobertson/.bashrc", O_RDONLY) = 3 
```

它向你展示了什么？

# c++ - 声明 Boost C++ 矩阵会导致分段错误

> ID：11515792
> 
> 赞同：0
> 
> 时间：2012-07-17T03:50:53.250
> 
> 标签：c++, boost, matrix, segmentation-fault, numeric

这一行：

```
boost::numeric::ublas::matrix<double> prices (vec.size() - 1, vec[0].size() - 1); 
```

调试时不断导致分段错误。我不明白为什么，因为到目前为止，在代码中，它与另一个已经运行的程序相同。我还尝试通过以下方式（不同的运行）声明矩阵：

```
boost::numeric::ublas::matrix<double> prices;  
boost::numeric::ublas::matrix<double> prices(1, 1); 
```

但它仍然发生！哇！！这在 Eclipse CDT 和 QtCreator 中都会发生。

**编辑：**
vec 是一个二维字符串向量：

```
vector< vector<string> > etf_prices`; 
```

# visual-studio-2008 - 断言 afxcurrentinstancehandle null 从 exe 调用 MFC dll

> ID：11515793
> 
> 赞同：0
> 
> 时间：2012-07-17T03:50:59.333
> 
> 标签：visual-studio-2008, visual-c++, mfc, visual-studio-debugging, vtk

我有一个 MFC 应用程序，我在其中从 exe 调用 mfc dll (vtkMFC.dll)。我在 afxwin1.inl 中得到如下调试断言。

> { 断言（afxCurrentInstanceHandle ！= NULL）；

我尝试使用`AfxSetResourceHandle(GetModuleHandle("vtkMFC.dll"))`但仍然遇到相同的错误。我正在使用`"use MFC in a static library"`选项。下面是我的代码：

> ```
>  AFX_MANAGE_STATE(AfxGetStaticModuleState())
>     CWaitCursor WC; // sometimes takes a while to start
>     CCCADApp *app = (CCCADApp *)AfxGetApp();
>     CFrameWnd *frame = app->pVtkTemplate->CreateNewFrame( this, NULL );
>     // first init creates the view 
>     app->pVtkTemplate->InitialUpdateFrame( frame, this, FALSE);
>     CvtkMDIView* view= dynamic_cast<CvtkMDIView*>(frame->GetActiveView()); 
>     //
>     // automatic correction - try to load initial field if solution is not available
>     if(run->GetStatus()==CDawesRun::NOTRUN) options=VTKInitialField|VTKGrid|(options & VTKView2D);
>     if(view) view->setData(run,options,variable); // set data
>     // show the view and frame
>     app->pVtkTemplate->InitialUpdateFrame( frame, this, TRUE); 
> ```

我的主应用程序是使用“多线程调试 (/MTd)”选项构建的，其中 dll 是使用多线程调试 DLL (/MDd) 构建的。它与此有关吗？请帮我。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T09:27:54.480

为什么静态链接到 MFC/CRT？我不确定 MFC，但我相信不支持在应用程序的不同模块中静态/动态地链接 CRT。

您可以尝试使用 /MDd 构建，*并*动态链接到 MFC，并说是否有帮助？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-22T02:47:25.297

我有同样的问题。我通过添加一个调用来修复它：

```
AfxWinInit(::GetModuleHandle(NULL), NULL, ::GetCommandLine(), 0)) 
```

在我开始调用 MFC 函数和对象（如 CWaitCursor）之前。该函数通常在 WinMain() 中调用。

# javascript - 添加技能时的 LinkedIn 样式标记

> ID：11515798
> 
> 赞同：0
> 
> 时间：2012-07-17T03:52:19.387
> 
> 标签：javascript, jquery

我在网上寻找好的 javascript 标记库。我正在阅读以下帖子：[jQuery autocomplete tagging plugin like StackOverflow's input tags?](https://stackoverflow.com/questions/519107/jquery-autocomplete-tagging-plug-in-like-stackoverflows-input-tags)

但恐怕我的设计约束略有不同。在向个人资料添加技能时，我希望它更受欢迎。所以它不是内联的。有什么可以在线获得的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T18:59:33.887

我最终使用了 tagit ( [http://jquery.webspirited.com/2011/02/jquery-tagit-a-jquery-tagging-plugin/](http://jquery.webspirited.com/2011/02/jquery-tagit-a-jquery-tagging-plugin/) )，并且能够根据我的需要对其进行自定义。做起来并不难。

# objective-c - 使用叶子视图渲染页面

> ID：11515799
> 
> 赞同：0
> 
> 时间：2012-07-17T03:52:50.747
> 
> 标签：objective-c, ios

我正在使用[Leaves 项目](https://github.com/brow/leaves/)从一个 pdf 页面移动到另一个它工作正常。现在页面卷曲是从左到右，从右到左，就像一个笔记本。我需要从上到下和从下到上卷曲它。有谁知道这样做的方法，或任何其他模板来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T13:46:59.797

只需使用 Apple 的 UIPageViewController 而不是 Leaves [http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIPageViewControllerClassReferenceClassRef/UIPageViewControllerClassReference.html](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIPageViewControllerClassReferenceClassRef/UIPageViewControllerClassReference.html)

例如，这为您提供了他们在 iBooks 中使用的准确卷曲，因此卷曲视图的矩阵更漂亮（更逼真）。

只需将所有笔记设为 View 并为视图提供 UIPageViewController 它还有脊椎所在的各种选项以及其他内容

要进行卷曲，您可以 `[UIView setAnimationTransition:UIViewAnimationTransitionCurlUp forView:self.view cache:YES]; [UIView setAnimationTransition:UIViewAnimationTransitionCurlDown forView:self.view cache:YES];`像提到的 bala 那样使用或实例化另一个负责向上和向下转换的 UIPageViewController。如果您想真正进入视图并可能通过多个项目进行切换，我将只使用 2 个 uipageviewcontrollers 所以一个水平和一个垂直

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T05:29:41.597

这种方法

```
 SampleViewController *sampleView = [[[SampleViewController alloc] init] autorelease];
    [sampleView setModalTransitionStyle:UIModalTransitionStylePartialCurl];
    [self presentModalViewController:sampleView animated:YES]; 
```

在[本](http://timneill.net/2010/09/modal-view-controller-example-part-1/)教程中可能会有所帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T01:06:38.960

现有的叶子视图被硬编码为从左到右。您可以轻松地创建一个硬编码的自上而下的版本，但很可能有更强大的通用解决方案。

但是，如果你一定要使用叶子，你可以重写它的源代码以适应它。下面的解决方案硬编码垂直运动。如果您需要水平和垂直选项，您将需要做更多的工作。

* * *

# 展示

## 设置图层

在每次调用中反转轴`CGPointMake`。这修复了显示阴影的渐变。

也更改`topPage.contentsGravity = kCAGravityLeft;`为`topPage.contentsGravity = kCAGravityBottom;`和`topPageReverseImage.contentsGravity = kCAGravityRight;`。`topPageReverseImage.contentsGravity = kCAGravityTop;`这是一个微妙的变化，可确保传入的页面以正确的边缘显示。

## setLayerFrames

大多数几何变化都发生在这里。原始代码奇怪地在某些地方使用了视图边界，而在其他地方使用了图层边界。我复制了这些，但最好在生产中使用此代码之前了解区别是否有意义。

```
- (void) setLayerFrames {
    topPage.frame = CGRectMake(self.layer.bounds.origin.x, 
                               self.layer.bounds.origin.y, 
                               self.bounds.size.width,
                               leafEdge * self.layer.bounds.size.height);
    topPageReverse.frame = CGRectMake(self.layer.bounds.origin.x,
                                      self.layer.bounds.origin.y + (2*leafEdge-1) * self.layer.bounds.size.height,
                                      self.bounds.size.width,
                                      (1-leafEdge) * self.layer.bounds.size.height);
    bottomPage.frame = self.layer.bounds;
    topPageShadow.frame = CGRectMake(0,
                                     topPageReverse.frame.origin.y - 40,
                                     bottomPage.bounds.size.width,
                                     40);
    topPageReverseImage.frame = topPageReverse.bounds;
    topPageReverseImage.transform = CATransform3DMakeScale(1, -1, 1);
    topPageReverseOverlay.frame = topPageReverse.bounds;
    topPageReverseShading.frame = CGRectMake(0,
                                             topPageReverse.bounds.size.height - 50,
                                             topPageReverse.bounds.size.width,
                                             50 + 1);
    bottomPageShadow.frame = CGRectMake(0,
                                        leafEdge * self.bounds.size.height,
                                        bottomPage.bounds.size.width,
                                        40);
    topPageOverlay.frame = topPage.bounds;
} 
```

* * *

# 相互作用

## 更新目标矩形

在哪里计算`nextPageRect`和`prevPageRect`，将它们放在底部和顶部而不是左右。

## touchesMoved:withEvent:

更改`self.leafEdge = touchPoint.x / self.bounds.size.width;`为`self.leafEdge = touchPoint.y / self.bounds.size.height;`。

# oauth-2.0 - 我应该在摘要领域内协商 OAuth2 身份验证吗？

> ID：11515801
> 
> 赞同：0
> 
> 时间：2012-07-17T03:53:05.243
> 
> 标签：oauth-2.0, facebook-authentication, digest-authentication

我可能混淆了概念，但我一直在[web2py Google Group](https://groups.google.com/forum/#!topic/web2py/FyxbO0WGMhU)上讨论​​他们应该实现摘要身份验证。

使用 OAuth2，我认为 auth-key 应该被散列并且只在身份验证领域内发送。

如果有所不同，我使用 JavaScript 客户端，接口使用 JSONRPC 服务器端公开，OAuth2 使用 Facebook 完成。

**我应该在摘要领域内协商 OAuth2 吗？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T03:19:41.320

你把事情搞糊涂了——OAuth 中没有摘要领域的概念。也没有“身份验证密钥”之类的东西。您拥有的是一个身份验证令牌，它代表您已由用户/实体颁发的声明。

由于令牌代表 [client_id, user, scope, expiration] 元组，因此它不能用于生成哈希，因为该哈希将无用 - 资源服务器无法对所有可能的组合进行哈希以找到匹配项。

如果您想要传输安全性，只需使用 SSL（不考虑具有有效证书的 MiTM 攻击等）。

也就是说，当攻击者已经能够拦截您的流量时，使用摘要保护凭据（令牌）是毫无用处的......

* * *

此外，为 OAuth2 背后的故事添加一些内容 - 它如此简单的原因（依靠 SSL 进行保护）是几乎每个人都可以管理的东西。

事情越复杂，出错的几率就越高。

# python - Python Heroku 上的僵尸 SharedDataMiddleware

> ID：11515804
> 
> 赞同：6
> 
> 时间：2012-07-17T03:53:14.823
> 
> 标签：python, heroku, flask

我正在 Heroku 上设置一个 Flask 应用程序。在我添加静态文件之前一切正常。我正在使用这个：

```
from werkzeug import SharedDataMiddleware
app = Flask(__name__)
app.wsgi_app = SharedDataMiddleware(app.wsgi_app, {'/static': os.path.join(os.path.dirname(__file__), 'static') }) 
```

第一次部署应用程序时，./static 中的相应文件将在 herokuapp.com/static 上可用。但是在初始部署之后，Heroku 上的文件永远不会改变。如果我将最后一行更改为：

```
app.wsgi_app = SharedDataMiddleware(app.wsgi_app, {'/assets': os.path.join(os.path.dirname(__file__), 'static') }) 
```

静态文件的新 URL herokuapp.com/assets，然后我可以看到更新的文件。

似乎文件的镜像卡在系统中。我已经更改了四次，仍然可以访问所有 URL。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T07:34:23.507

SharedDataMiddleware 默认发送`Cache-Control`和`Expires`HTTP 标头，这意味着您的 Web 浏览器甚至可能不会向服务器发送请求，而只会使用缓存中的旧文件。尝试[禁用缓存](http://werkzeug.pocoo.org/docs/middlewares/)：

```
app.wsgi_app = SharedDataMiddleware(
    app.wsgi_app,
    {'/static': os.path.join(os.path.dirname(__file__), 'static')},
    cache=False) 
```

Flask 对静态文件做同样的事情。要在那里[禁用它](http://flask.pocoo.org/docs/config/)：

```
app.config['SEND_FILE_MAX_AGE_DEFAULT'] = None 
```

# linux - 如何从 VM 克隆 Git 存储库？

> ID：11515806
> 
> 赞同：0
> 
> 时间：2012-07-17T03:53:41.733
> 
> 标签：linux, git, ubuntu, ssh, virtual-machine

我目前正在使用 Git 在虚拟 Ubuntu 机器中进行开发，我需要将此 repo 克隆到另一个 CentOS VM。我不知道如何使用`user@server:/path.git`语法描述 git repo 的位置。

任何人都可以指出我正确的方向吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T04:08:14.117

您可以从另一个虚拟机 ping 通吗？如果是这样，那么您可以 ping 的 IP 应该可以 ssh 到。

如果您无法 ping，那么您的主机可能可以从两个虚拟机访问。您可以在那里创建一个服务器存储库。例如，github.com 或 bitbucket.com 或许多其他可能是合适的第三方主机。也许您可以安装一个代理（squid 或 dante-socks 或类似的东西）以允许 VM 相互通信。

如果您有电子邮件连接，也许您可​​以来回邮寄 git-bundle，而不是使用正常的实时 git 连接。有很多方法可以做到这一点，但我们确实需要更多地了解这些 Vms 的网络和通信环境才能说得更多。

# php - 将 jQuery 变量写入文件

> ID：11515815
> 
> 赞同：1
> 
> 时间：2012-07-17T03:55:36.240
> 
> 标签：php, jquery, html, file-io

我使用 jquery 函数来处理下面给出的表单。

```
$("#advertForm").submit(function(e)
{
  var url=$(target).attr('title');
  var imgname=$(target).attr('name');
  var Form = { };

  $.post('processAdvert.php', Form, function(data)
            {
               if(data == "Success")
                    {

                            setTimeout( function() {  location=url }, 2500 );
                            return;
                    }
            });
return false;
}); 
```

我需要将 url 和 imgname 写入文本文件。我知道没有办法在 jquery 中编写文件。我可以使用任何 PHP 函数 (fwrite) 将此变量写入文件吗？如何将此变量写入文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T04:25:36.603

是的，您可以通过某种方式做到这一点。向您的 php 文件发送 ajax 请求。处理您的数据，创建文件，使用[fput() 方法](http://php.net/manual/en/function.fputs.php)写入一些数据，使用强制下载类，该类将允许您在那一刻下载文件。询问您是否有任何困惑。

# php - 如何在 php 中去掉像 � 这样的字符串？

> ID：11515817
> 
> 赞同：0
> 
> 时间：2012-07-17T03:56:07.740
> 
> 标签：php, string, character-encoding, escaping, strip

如何在 php 中消除像 � 这样的奇数字符串？

我已经使用了类似 html_entity_decode 的 php 函数，但它仍然不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T06:14:41.130

尝试在您的数据库配置文件中添加这些行。

```
$con = mysql_connect("localhost","root","");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }
mysql_set_charset('utf8',$con);
mysql_select_db("db_name", $con);

<meta http-equiv="Content-Type" content="text/html; charset=utf8" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T04:09:12.953

� 不仅仅是一个符号 - 它是用于替换浏览器无法理解的符号的符号。这通常是由编码问题引起的——你设置了错误的编码，或者有人使用了不同编码的符号。

你不能只是神奇地把它去掉，因为它不仅仅是一个字符。简单地说，编码是一个你不能只是挥动魔杖的地方——你必须决定一个编码，然后执行它。

如果您正在接受用户输入，老实说，我不知道如何帮助解决这个问题。您可以检查常见原因（与连字符**不同的**弯引号和破折号是我最常遇到的问题），并强制对其进行手动替换，但如果用户想要输入编码错误的字符，则没有你可以做很多事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T04:12:32.387

尝试将您更改`<meta charset`为 iso-8859-1 之类的

```
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T04:38:19.363

如果您的内容采用 ANSI 编码，请使用

```
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /> 
```

您可以使用像 ( NOTEPAD ++ ) 这样的编辑器来检查文件的编码

# objective-c - 应用程序窗口应在应用程序启动警告结束时具有根视图控制器

> ID：11515818
> 
> 赞同：9
> 
> 时间：2012-07-17T03:56:26.467
> 
> 标签：objective-c, ios, ios5, uiviewcontroller

我已经被这个警告困扰了几个小时了。我环顾四周寻找答案，尝试了所有我找到但找不到解决方案的答案。这是我拥有的代码的简写，它是 Xcode 默认生成的。

这是在我的 AppDelegate

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
    self.window.rootViewController = self.navigationController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

我在 main.m 上有这个（根据[这个答案](https://stackoverflow.com/questions/7520971/applications-are-expected-to-have-a-root-view-controller-at-the-end-of-applicati)）

```
int main(int argc, char *argv[])
{
    @autoreleasepool {
        int retVal = UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));
        return retVal;
    }
} 
```

我的 MainWindow.xib 中的所有连接也正确连接。所以我现在很茫然。有什么我可能会丢失的吗？提前致谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-17T04:21:46.303

如果你`rootViewController`有`application:didFinishLaunchingWithOptions:`一个`MainWindow.xib`. 通常一个项目遵循以下三个模板之一：

*   有些项目有一个`MainWindow.xib`. 目标的“主界面”在目标的“摘要”选项卡（或其 Info.plist）中设置为“主窗口”。此 xib 的文件所有者是`UIApplication`. xib 包含一个实例`AppDelegate`，连接到文件所有者的`delegate`插座。xib 还包含 a `UIWindow`，其`rootViewController`出口连接到 a `UIViewController`（或子类，例如`UINavigationController`），它也在 xib 中。当应用程序委托接收到`application:didFinishLaunchingWithOptions:`消息时，xib 已完全加载，因此窗口及其根视图控制器已设置好。

*   其他项目没有`MainWindow.xib`. 目标的“主界面”为空。相反，该`UIApplicationMain`函数创建一个 的实例`AppDelegate`，将其设置为`UIApplication`的委托，并将`application:didFinishLaunchingWithOptions:`消息发送给它。应用程序委托通过创建一个`UIWindow`、创建一个（或多个）视图控制器并设置窗口的`rootViewController`属性来处理该消息。默认版本如下所示：

    ```
    - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
    {
        self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
        // Override point for customization after application launch.
        self.viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
        self.window.rootViewController = self.viewController;
        [self.window makeKeyAndVisible];
        return YES;
    } 
    ```

*   有些项目有一个`MainStoryboard.storyboard`. 我不会详细描述这一点，因为它似乎与您的问题无关。

您所描述的问题听起来像是您使用了第一个模板的一半和第二个模板的一半。那是行不通的。您需要决定采用哪种方法，然后全力以赴。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T02:28:33.097

您可以打开 xib 文件并在占位符中右键单击“文件的所有者”。如果view没有连接到View outlet，则按住“Ctrl”键并拖动鼠标右键单击进行设计，然后再次运行^^（不要拖动到特定控件，当出现边框视图时拖动到背景设计）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-08T10:00:13.057

I have this message because I had in my RootViewController @property(weak, nonatomic) IBOutlet UIView* **loadView**; and viewDidLoad was called twice... Rename it to something else...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T06:14:37.973

我在我的项目中解决了问题，请按照以下步骤解决它..

1) 打开主视图控制器 nib 文件，该文件在`appDelegate` eg.ViewCotroller.xib中有引用

2）在 nib 文件上检查视图连接，如果没有连接到文件所有者，则连接它。

3) 现在运行项目。

# python - 如何添加我自己的自定义元数据以在 Plone 4.1 中创建自定义集合？

> ID：11515819
> 
> 赞同：-1
> 
> 时间：2012-07-17T03:56:26.880
> 
> 标签：python, plone

> **可能重复：**
> [在 Plone 4 的集合视图中扩展表列](https://stackoverflow.com/questions/5455250/extending-table-columns-in-collection-view-in-plone-4)

我希望添加默认克隆元数据以外的元数据。例如，客户姓名、产品代码等字段作为创建集合视图的新字段标准。如何添加我自己的自定义元数据以在 Plone 4.1 中创建自定义集合？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T06:45:18.583

这里的第二个答案：[Extended table columns in collection view in Plone 4](https://stackoverflow.com/questions/5455250/extending-table-columns-in-collection-view-in-plone-4)可以帮助你。您必须在目录中添加索引和元数据（转到 zmi -> portal_catalog 并使用索引和元数据选项卡）并使用 plone 控制面板将这些新字段分配给集合。这是完整的答案：

“在控制面板 -> 集合（通常是 /portal_atct/atct_manageTopicIndex）中，您可以定义所需的每个元数据。集合取决于 portal_catalog 元数据和索引，因此您必须在其中添加自定义字段。在模块配置文件中使用 GenericSetup 来告诉ZCatalog 创建新索引，或手动创建。在前一种情况下，请注意重新安装模块可能会清除新创建的索引（[http://maurits.vanrees.org/weblog/archive/2009/12/catalog](http://maurits.vanrees.org/weblog/archive/2009/12/catalog) )。”

# c# - 如何从 Adob e Indesign 文件、C# 中加载和提取文本内容？

> ID：11515820
> 
> 赞同：4
> 
> 时间：2012-07-17T03:56:28.983
> 
> 标签：c#, adobe-indesign

我想加载 Adob​​e Indesign 文件，然后我想读取文件的所有文本内容（提取文本数据）。我怎么能在 C# 中呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T04:05:27.557

Indesign dll 可以作为 COM 引用添加到 C# 应用程序。它确实提供了获取文件信息的方法。

编辑：我没有在计算机上安装这些东西，所以不能真正编写一些代码。但是[这个](http://cssdk.host.adobe.com/sdk/1.0/docs/WebHelp/app_notes/id_obj_model.htm)链接应该有帮助。

# iphone - UITableView 覆盖/隐藏图像？

> ID：11515825
> 
> 赞同：0
> 
> 时间：2012-07-17T03:57:11.667
> 
> 标签：iphone, objective-c, ios, xcode, uitableview

![在此处输入图像描述](../Images/a3ef785d6b4603f15ff21388a27d41c0.png)

我想在`images`我的上方制作 2 `tableView`- 一个`image`在顶部，一个在视图底部。就像图片上的一样。我`image`在顶部成功了（当我滚动 时`tableView`，它在图像下方滚动），但是，`image`底部的 没有出现。我所做的是，我只是调整了 的大小`tableView`并在顶部和底部缩短了它并添加了`UIImageView's`. 但在底部，没有`image`. 我也尝试在代码中做到这一点：

```
CGRect flagsFrame = CGRectMake(0, 460, 320, 11);

UIImageView *bottomFlags = [[UIImageView alloc]initWithFrame:flagsFrame];
bottomFlags.image = [UIImage imageNamed:@"flags_down"];

[self.view addSubview:bottomFlags];
[self.view bringSubviewToFront:bottomFlags]; 
```

但什么也没有发生。为什么没有图片？看起来像`tableView`覆盖图像或其他东西。

谢谢 ！

**升级版：**

```
<UIWindow: 0x1be340; frame = (0 0; 320 480); layer = <UIWindowLayer: 0x1be430>>
   | <UILayoutContainerView: 0x1c0d00; frame = (0 0; 320 480); autoresize = W+H; layer = <CALayer: 0x1c0da0>>
   |    | <UITransitionView: 0x1c1040; frame = (0 0; 320 431); clipsToBounds = YES; autoresize = W+H; layer = <CALayer: 0x1c1410>>
   |    |    | <UIViewControllerWrapperView: 0x1ca7a0; frame = (0 0; 320 431); autoresize = W+H; layer = <CALayer: 0x1ca0b0>>
   |    |    |    | <UILayoutContainerView: 0x1c5bf0; frame = (0 0; 320 431); autoresize = W+H; layer = <CALayer: 0x1c5c40>>
   |    |    |    |    | <UINavigationTransitionView: 0x1c5fa0; frame = (0 0; 320 431); clipsToBounds = YES; autoresize = W+H; layer = <CALayer: 0x1c4da0>>
   |    |    |    |    |    | <UIViewControllerWrapperView: 0x108ff0; frame = (0 64; 320 367); autoresize = W+H; layer = <CALayer: 0x109020>>
   |    |    |    |    |    |    | <UIView: 0x1d43f0; frame = (0 0; 320 367); autoresize = W+H; layer = <CALayer: 0x13bce0>>
   |    |    |    |    |    |    |    | <UIImageView: 0x13bd10; frame = (0 0; 320 460); autoresize = RM+BM; userInteractionEnabled = NO; layer = <CALayer: 0x140fa0>>
   |    |    |    |    |    |    |    | <UITableView: 0x9ec800; frame = (0 0; 320 367); clipsToBounds = YES; opaque = NO; autoresize = W+H; layer = <CALayer: 0x19cda0>; contentOffset: {0, 4165.5}>
   |    |    |    |    |    |    |    |    | <CustomCell: 0x10f5b0; baseClass = UITableViewCell; frame = (0 4097; 320 75); autoresize = W; layer = <CALayer: 0x10b1e0>>
   |    |    |    |    |    |    |    |    |    | <UIGroupTableViewCellBackground: 0x10f510; frame = (9 0; 302 75); autoresize = W; layer = <CALayer: 0x13c330>>
   |    |    |    |    |    |    |    |    |    |    | <UIView: 0x19eae0; frame = (1 0; 300 1); hidden = YES; autoresize = W; layer = <CALayer: 0x125990>>
   |    |    |    |    |    |    |    |    |    |    | <UIView: 0x10e9b0; frame = (1 74; 300 1); hidden = YES; autoresize = W+TM; layer = <CALayer: 0x128fe0>>
   |    |    |    |    |    |    |    |    |    | <UITableViewCellContentView: 0x10f6c0; frame = (10 0; 280 74); layer = <CALayer: 0x109620>>
   |    |    |    |    |    |    |    |    |    |    | <UIImageView: 0x115880; frame = (70 10; 350 25); userInteractionEnabled = NO; layer = <CALayer: 0x18d1e0>>
   |    |    |    |    |    |    |    |    |    |    | <UILabel: 0x13ba00; frame = (70 10; 230 25); text = 'Слиток'; clipsToBounds = YES; userInteractionEnabled = NO; layer = <CALayer: 0x117da0>>
   |    |    |    |    |    |    |    |    |    |    | <UILabel: 0x13eef0; frame = (70 40; 120 18); text = 'Бесценно'; clipsToBounds = YES; userInteractionEnabled = NO; layer = <CALayer: 0x126be0>>
   |    |    |    |    |    |    |    |    |    |    | <UIImageView: 0x10e350; frame = (10 10; 50 50); userInteractionEnabled = NO; layer = <CALayer: 0x117c30>>
   |    |    |    |    |    |    |    |    |    | <UIButton: 0x109ab0; frame = (280 0; 30 74); opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x10d080>>
   |    |    |    |    |    |    |    |    |    |    | <UIImageView: 0x191090; frame = (10 30; 10 13); clipsToBounds = YES; opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x11b880>>
   |    |    |    |    |    |    |    |    |    | <UIView: 0x10e2e0; frame = (10 0; 300 1); layer = <CALayer: 0x10e310>>
   |    |    |    |    |    |    |    |    | <CustomCell: 0x1ca8b0; baseClass = UITableViewCell; frame = (0 4172; 320 75); autoresize = W; layer = <CALayer: 0x11cee0>>
   |    |    |    |    |    |    |    |    |    | <UIGroupTableViewCellBackground: 0x11e610; frame = (9 0; 302 75); autoresize = W; layer = <CALayer: 0x1c5da0>>
   |    |    |    |    |    |    |    |    |    |    | <UIView: 0x1dd650; frame = (1 0; 300 1); hidden = YES; autoresize = W; layer = <CALayer: 0x11d140>>
   |    |    |    |    |    |    |    |    |    |    | <UIView: 0x117d50; frame = (1 74; 300 1); hidden = YES; autoresize = W+TM; layer = <CALayer: 0x143680>>
   |    |    |    |    |    |    |    |    |    | <UITableViewCellContentView: 0x1183f0; frame = (10 0; 280 74); layer = <CALayer: 0x16e8a0>>
   |    |    |    |    |    |    |    |    |    |    | <UIImageView: 0x130740; frame = (70 10; 350 25); userInteractionEnabled = NO; layer = <CALayer: 0x10c170>>
   |    |    |    |    |    |    |    |    |    |    | <UILabel: 0x116b70; frame = (70 10; 230 25); text = 'Бонго'; clipsToBounds = YES; userInteractionEnabled = NO; layer = <CALayer: 0x10cc60>>
   |    |    |    |    |    |    |    |    |    |    | <UILabel: 0x115d80; frame = (70 40; 120 18); text = '$15 - $120'; clipsToBounds = YES; userInteractionEnabled = NO; layer = <CALayer: 0x115bb0>>
   |    |    |    |    |    |    |    |    |    |    | <UIImageView: 0x12e9c0; frame = (10 10; 50 50); userInteractionEnabled = NO; layer = <CALayer: 0x143620>>
   |    |    |    |    |    |    |    |    |    | <UIButton: 0x11e580; frame = (280 0; 30 74); opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x15a240>>
   |    |    |    |    |    |    |    |    |    |    | <UIImageView: 0x11f520; frame = (10 30; 10 13); clipsToBounds = YES; opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x1dd1d0>>
   |    |    |    |    |    |    |    |    |    | <UIView: 0x11e350; frame = (10 0; 300 1); layer = <CALayer: 0x118540>>
   |    |    |    |    |    |    |    |    | <CustomCell: 0x11c420; baseClass = UITableViewCell; frame = (0 4247; 320 75); autoresize = W; layer = <CALayer: 0x1912b0>>
   |    |    |    |    |    |    |    |    |    | <UIGroupTableViewCellBackground: 0x112f10; frame = (9 0; 302 75); autoresize = W; layer = <CALayer: 0x11e230>>
   |    |    |    |    |    |    |    |    |    |    | <UIView: 0x117aa0; frame = (1 0; 300 1); hidden = YES; autoresize = W; layer = <CALayer: 0x109940>>
   |    |    |    |    |    |    |    |    |    |    | <UIView: 0x1decf0; frame = (1 74; 300 1); hidden = YES; autoresize = W+TM; layer = <CALayer: 0x123b60>>
   |    |    |    |    |    |    |    |    |    | <UITableViewCellContentView: 0x115c60; frame = (10 0; 280 74); layer = <CALayer: 0x7275af0>>
   |    |    |    |    |    |    |    |    |    |    | <UIImageView: 0x10b7c0; frame = (70 10; 350 25); userInteractionEnabled = NO; layer = <CALayer: 0x101330>>
   |    |    |    |    |    |    |    |    |    |    | <UILabel: 0x128e70; frame = (70 10; 230 25); text = 'Кресло массажер'; clipsToBounds = YES; userInteractionEnabled = NO; layer = <CALayer: 0x117520>>
   |    |    |    |    |    |    |    |    |    |    | <UILabel: 0x10e3b0; frame = (70 40; 120 18); text = '$10 - $75'; clipsToBounds = YES; userInteractionEnabled = NO; layer = <CALayer: 0x104c50>>
   |    |    |    |    |    |    |    |    |    |    | <UIImageView: 0x18dc70; frame = (10 10; 50 50); userInteractionEnabled = NO; layer = <CALayer: 0x10f270>>
   |    |    |    |    |    |    |    |    |    | <UIButton: 0x112e80; frame = (280 0; 30 74); opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x11ceb0>>
   |    |    |    |    |    |    |    |    |    |    | <UIImageView: 0x111890; frame = (10 30; 10 13); clipsToBounds = YES; opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x11e6b0>>
   |    |    |    |    |    |    |    |    |    | <UIView: 0x114480; frame = (10 0; 300 1); layer = <CALayer: 0x11d110>>
   |    |    |    |    |    |    |    |    | <CustomCell: 0x115fc0; baseClass = UITableViewCell; frame = (0 4322; 320 75); autoresize = W; layer = <CALayer: 0x125960>>
   |    |    |    |    |    |    |    |    |    | <UIGroupTableViewCellBackground: 0x10ceb0; frame = (9 0; 302 75); autoresize = W; layer = <CALayer: 0x116220>>
   |    |    |    |    |    |    |    |    |    |    | <UIView: 0x11e280; frame = (1 0; 300 1); hidden = YES; autoresize = W; layer = <CALayer: 0x11e2b0>>
   |    |    |    |    |    |    |    |    |    |    | <UIView: 0x10edb0; frame = (1 74; 300 1); hidden = YES; autoresize = W+TM; layer = <CALayer: 0x10ede0>>
   |    |    |    |    |    |    |    |    |    | <UITableViewCellContentView: 0x11c540; frame = (10 0; 280 74); layer = <CALayer: 0x1179a0>>
   |    |    |    |    |    |    |    |    |    |    | <UIImageView: 0x112940; frame = (70 10; 350 25); userInteractionEnabled = NO; layer = <CALayer: 0x10e530>>
   |    |    |    |    |    |    |    |    |    |    | <UILabel: 0x111090; frame = (70 10; 230 25); text = 'Громкоговоритель'; clipsToBounds = YES; userInteractionEnabled = NO; layer = <CALayer: 0x110a30>>
   |    |    |    |    |    |    |    |    |    |    | <UILabel: 0x1423c0; frame = (70 40; 120 18); text = '$10 - $75'; clipsToBounds = YES; userInteractionEnabled = NO; layer = <CALayer: 0x11c5a0>>
   |    |    |    |    |    |    |    |    |    |    | <UIImageView: 0x130880; frame = (10 10; 50 50); userInteractionEnabled = NO; layer = <CALayer: 0x11b8b0>>
   |    |    |    |    |    |    |    |    |    | <UIButton: 0x10d650; frame = (280 0; 30 74); opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x1910f0>>
   |    |    |    |    |    |    |    |    |    |    | <UIImageView: 0x10a9a0; frame = (10 30; 10 13); clipsToBounds = YES; opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x10e4d0>>
   |    |    |    |    |    |    |    |    |    | <UIView: 0x117a00; frame = (10 0; 300 1); layer = <CALayer: 0x117a30>>
   |    |    |    |    |    |    |    |    | <CustomCell: 0x12d010; baseClass = UITableViewCell; frame = (0 4397; 320 75); autoresize = W; layer = <CALayer: 0x123b30>>
   |    |    |    |    |    |    |    |    |    | <UIGroupTableViewCellBackground: 0x111640; frame = (9 0; 302 75); autoresize = W; layer = <CALayer: 0x1f2260>>
   |    |    |    |    |    |    |    |    |    |    | <UIView: 0x1116a0; frame = (1 0; 300 1); hidden = YES; autoresize = W; layer = <CALayer: 0x10ebf0>>
   |    |    |    |    |    |    |    |    |    |    | <UIView: 0x10ec20; frame = (1 74; 300 1); hidden = YES; autoresize = W+TM; layer = <CALayer: 0x10ec50>>
   |    |    |    |    |    |    |    |    |    | <UITableViewCellContentView: 0x10c100; frame = (10 0; 280 74); layer = <CALayer: 0x10f330>>
   |    |    |    |    |    |    |    |    |    |    | <UIImageView: 0x11b8e0; frame = (70 10; 350 25); userInteractionEnabled = NO; layer = <CALayer: 0x1185b0>>
   |    |    |    |    |    |    |    |    |    |    | <UILabel: 0x115f50; frame = (70 10; 230 25); text = 'Перочиный ножик'; clipsToBounds = YES; userInteractionEnabled = NO; layer = <CALayer: 0x109820>>
   |    |    |    |    |    |    |    |    |    |    | <UILabel: 0x115d10; frame = (70 40; 120 18); text = '$15 - $80'; clipsToBounds = YES; userInteractionEnabled = NO; layer = <CALayer: 0x1f22e0>>
   |    |    |    |    |    |    |    |    |    |    | <UIImageView: 0x112900; frame = (10 10; 50 50); userInteractionEnabled = NO; layer = <CALayer: 0x10ce80>>
   |    |    |    |    |    |    |    |    |    | <UIButton: 0x10f470; frame = (280 0; 30 74); opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x1ca720>>
   |    |    |    |    |    |    |    |    |    |    | <UIImageView: 0x10dee0; frame = (10 30; 10 13); clipsToBounds = YES; opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x10df20>>
   |    |    |    |    |    |    |    |    |    | <UIView: 0x1125d0; frame = (10 0; 300 1); layer = <CALayer: 0x118100>>
   |    |    |    |    |    |    |    |    | <CustomCell: 0x11c310; baseClass = UITableViewCell; frame = (0 4472; 320 75); autoresize = W; layer = <CALayer: 0x11ce00>>
   |    |    |    |    |    |    |    |    |    | <UIGroupTableViewCellBackground: 0x10b580; frame = (9 0; 302 75); autoresize = W; layer = <CALayer: 0x155850>>
   |    |    |    |    |    |    |    |    |    |    | <UIView: 0x155880; frame = (1 0; 300 1); hidden = YES; autoresize = W; layer = <CALayer: 0x1128d0>>
   |    |    |    |    |    |    |    |    |    |    | <UIView: 0x10bb80; frame = (1 74; 300 1); hidden = YES; autoresize = W+TM; layer = <CALayer: 0x10bbb0>>
   |    |    |    |    |    |    |    |    |    | <UITableViewCellContentView: 0x11cc70; frame = (10 0; 280 74); layer = <CALayer: 0x109b90>>
   |    |    |    |    |    |    |    |    |    |    | <UIImageView: 0x1dd5f0; frame = (70 10; 350 25); userInteractionEnabled = NO; layer = <CALayer: 0x1185e0>>
   |    |    |    |    |    |    |    |    |    |    | <UILabel: 0x115ca0; frame = (70 10; 230 25); text = 'Игровая консоль'; clipsToBounds = YES; userInteractionEnabled = NO; layer = <CALayer: 0x117c00>>
   |    |    |    |    |    |    |    |    |    |    | <UILabel: 0x162e10; frame = (70 40; 120 18); text = '$170 - $500'; clipsToBounds = YES; userInteractionEnabled = NO; layer = <CALayer: 0x10c140>>
   |    |    |    |    |    |    |    |    |    |    | <UIImageView: 0x10cc10; frame = (10 10; 50 50); userInteractionEnabled = NO; layer = <CALayer: 0x173d10>>
   |    |    |    |    |    |    |    |    |    | <UIButton: 0x10bc90; frame = (280 0; 30 74); opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x140a90>>
   |    |    |    |    |    |    |    |    |    |    | <UIImageView: 0x109360; frame = (10 30; 10 13); clipsToBounds = YES; opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x10f740>>
   |    |    |    |    |    |    |    |    |    | <UIView: 0x118350; frame = (10 0; 300 1); layer = <CALayer: 0x118380>>
   |    |    |    |    |    |    |    |    | <UIImageView: 0x142450; frame = (0 360; 320 7); alpha = 0; opaque = NO; autoresize = TM; userInteractionEnabled = NO; layer = <CALayer: 0x15dc80>>
   |    |    |    |    |    |    |    |    | <UIImageView: 0x100b70; frame = (0 5608; 320 11); opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x141f60>>
   |    |    |    |    |    |    |    |    | <UIImageView: 0x1d4d20; frame = (312 4427.5; 7 36); alpha = 0; opaque = NO; autoresize = LM; userInteractionEnabled = NO; layer = <CALayer: 0x1d4d80>>
   |    |    |    |    |    |    |    | <UIImageView: 0x12ea90; frame = (0 0; 320 11); autoresize = RM+BM; userInteractionEnabled = NO; layer = <CALayer: 0x126aa0>>
   |    |    |    |    |    |    |    | <UILabel: 0x124eb0; frame = (0 -135; 320 90); text = 'В комплекте подарите деву...'; clipsToBounds = YES; hidden = YES; userInteractionEnabled = NO; layer = <CALayer: 0x13ff90>>
   |    |    |    |    |    |    |    | <UIImageView: 0x72763e0; frame = (126 -64; 64 64); hidden = YES; opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x7275840>>
   |    |    |    |    | <UINavigationBar: 0x1c5c70; frame = (0 20; 320 44); autoresize = W; layer = <CALayer: 0x1c5d60>>
   |    |    |    |    |    | <UINavigationBarBackground: 0x1c5f60; frame = (0 0; 320 44); opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x1c5ff0>>
   |    |    |    |    |    | <UINavigationItemView: 0x1c17c0; frame = (116 8; 88 27); opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x1c1810>>
   |    |    |    |    |    | <UINavigationItemButtonView: 0x1c1840; frame = (5 7; 80 30); opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x109560>>
   |    | <UITabBar: 0x1c0fe0; frame = (0 431; 320 49); autoresize = W+TM; layer = <CALayer: 0x1c10c0>>
   |    |    | <_UITabBarBackgroundView: 0x1c1290; frame = (0 0; 320 49); opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x1c1320>>
   |    |    | <UITabBarButton: 0x1c89e0; frame = (2 1; 103 48); opaque = NO; layer = <CALayer: 0x1c9be0>>
   |    |    |    | <UITabBarSelectionIndicatorView: 0x1ca310; frame = (0 2; 103 44); opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x1ca3a0>>
   |    |    |    | <UITabBarSwappableImageView: 0x1c9770; frame = (28 2; 48 32); opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x1c82c0>>
   |    |    |    | <UITabBarButtonLabel: 0x1c9a40; frame = (27 34; 50 13); text = 'Giftopedia'; clipsToBounds = YES; opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x1c9b50>>
   |    |    | <UITabBarButton: 0x1ca9c0; frame = (109 1; 102 48); opaque = NO; layer = <CALayer: 0x1c0c00>>
   |    |    |    | <UITabBarSwappableImageView: 0x1c96a0; frame = (27 2; 48 32); opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x1c9bb0>>
   |    |    |    | <UITabBarButtonLabel: 0x1c8100; frame = (24 34; 55 13); text = 'Избранное'; clipsToBounds = YES; opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x1c9700>>
   |    |    | <UITabBarButton: 0x1ca4a0; frame = (215 1; 103 48); opaque = NO; layer = <CALayer: 0x1caff0>>
   |    |    |    | <UITabBarSwappableImageView: 0x1c8830; frame = (27 2; 48 32); opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x1cb0c0>>
   |    |    |    | <UITabBarButtonLabel: 0x1c8380; frame = (18 34; 66 13); text = 'Информация'; clipsToBounds = YES; opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x1bf790>> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T04:00:21.877

看过去`recursiveDescription`，我看到两个`UIImageView`大小为 320x11 的 s。一个是 的兄弟`UITableView`：

```
<UIImageView: 0x12ea90; frame = (0 0; 320 11); autoresize = RM+BM; userInteractionEnabled = NO; layer = <CALayer: 0x126aa0>> 
```

此图像视图的原点位于 (0,0)，因此我推断它是顶部图像视图。它`UITableView`在输出中列在 之后，这意味着它在堆叠顺序中位于 table view 的上方 - 它“更接近”用户的眼睛，并将绘制在 table view 的顶部。

另一个尺寸为 320x11 的图像视图被列为表视图的子视图：

```
<UIImageView: 0x100b70; frame = (0 5608; 320 11); opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x141f60>> 
```

所以在我看来，您将底部图像视图添加为表格视图的子视图，但您需要将其添加为表格视图的兄弟。您需要将其添加为表视图的超级视图的子视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T04:01:05.720

# 如果您希望图像保持在表格顶部

如果您希望 UItableView 上的图像始终如一，则将 UITableView 和两个页眉/页脚视图作为同一 UIView 的子视图并将页眉/页脚视图放在前面。诀窍是关闭他们`userInteraction`的触摸通过他们到`UITableView`下面。

```
UIView *container = [[UIView alloc] initWithFrame:CGRectMake(0,0,320,460)];
[container addSubview:tableView];
[container addSubview:headerView];
[container addSubview:footerView];

headerView.userInteractionEnabled = NO;
footerView.userInteractionEnabled = NO; 
```

# 如果您希望图像随表格滚动

您应该在 UITableView 实例的顶部和底部使用`tableHeaderView`和设置 UIView。`tableFooterView`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T08:45:36.897

it seem there is a little problem in this line:

`bottomFlags.image = [UIImage imageNamed:@"flags_down"];`

**try to add an extension for the image's name** (`.png`), otherwise the the `image` property will be `nil` and you won't see the image in your entire life.

# java - java注解等用例

> ID：11515833
> 
> 赞同：2
> 
> 时间：2012-07-17T03:58:28.787
> 
> 标签：java, xml, reflection, configuration, annotations

据我所知，使注释生效的唯一方法是反射。没有反射，java注解变得毫无用处。这是正确的吗？

```
public class Main{
    @SomeAnnotation(name="some",value="annotation")
    public void method(){
        //do something.
    }
    public static void main(String...args){
        Main main = new Main();
        //Just call the method directly, How to make the @SomeAnnotation make sense?
        main.method();
    }
} 
```

例如，您首先获得一个 java Method 对象，然后检查所有显示的注解。如果你得到你想要的，然后通过反射调用该方法。例如。

```
Method.invoke(Object, Object...args) 
```

人们说注解可以减少繁琐的 XML，但回到 XML 配置，使用模式就像我们加载和解析 XML 文件，当我们调用某个方法时，我们首先获取或检查配置信息，然后做真正的事情。如何通过 Annotation 实现这一点？我们得到的唯一方法是反射？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T04:51:05.187

注解的[RetentionPolicy](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/annotation/RetentionPolicy.html)（它本身被声明为元注解）向您展示[注解](http://docs.oracle.com/javase/1.5.0/docs/guide/language/annotations.html)不仅被反射使用，而且在编译或构建时也被使用（就像[注解处理工具](http://docs.oracle.com/javase/1.5.0/docs/guide/apt/index.html)一样）。

如果您需要示例代码来理解注释处理，它可以在[注释文档](http://docs.oracle.com/javase/1.5.0/docs/guide/language/annotations.html)的末尾找到（通过一个小程序检查另一个测试类）。

# java - 如何在Android中从现在到时间变得不同

> ID：11515835
> 
> 赞同：-7
> 
> 时间：2012-07-17T03:58:34.200
> 
> 标签：java, android, datetime

在那里！

我的任务是显示从创建消息以来已经过去了多少时间。例如，我 5 分钟前发送消息，我有很长的时间，我需要显示消息“5 分钟前”。

我从 System.currentTimeMillis() 获取当前日期并在创建消息时执行子日期，但是我不知道如何获得像“5 分钟前”这样的消息。

你可以帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T04:08:12.780

将两次的差异从毫秒转换为分钟，然后将结果时间与字符串“mins ago”连接起来

`long timeDifference = messageTime - currentTime;
String message = (timeDifference/60000) + " mins ago";`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T04:03:25.257

您知道表示时间变化的 long 以毫秒为单位（假设原始消息创建的时间戳和当前时间戳都是通过 System.currentTimeMillis() 创建的）。

然后，您可以使用简单的数学将毫秒转换为分钟。1,000 毫秒 = 1 秒，因此 60,000 = 1 分钟。

你到底在哪里遇到这个问题？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T04:15:12.467

试试这个代码

```
import java.util.Calendar;

public class DateDifferent{  
  public static void main(String[] args){
  long diff = yourMilliseconds - nowMilliseconds;
  long diffSeconds = diff / 1000;
  long diffMinutes = diff / (60 * 1000);
  long diffHours = diff / (60 * 60 * 1000);
  long diffDays = diff / (24 * 60 * 60 * 1000);
  }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-17T04:18:09.940

你可以有这个静态方法。

```
public static String getElapsedTime(Date oldDate) {
    long duration = System.currentTimeMillis() - oldDate.getTime();
    long seconds = TimeUnit.MILLISECONDS.toSeconds(duration);
    long days = TimeUnit.MILLISECONDS.toDays(duration);
    long hours = TimeUnit.MILLISECONDS.toHours(duration);
    long minutes = TimeUnit.MILLISECONDS.toMinutes(duration);

    if (days > 0) {
        return days + " days";
    }
    if (hours > 0) {
        return hours + " hrs";
    }
    if (minutes > 0) {
        return minutes + " minutes";
    }

    return seconds + " seconds";

} 
```

# ruby-on-rails-3 - Rails - Update_attributes 正在工作，现在出现未定义的方法错误

> ID：11515839
> 
> 赞同：0
> 
> 时间：2012-07-17T03:59:31.060
> 
> 标签：ruby-on-rails-3, update-attributes

这是有效的，但现在我在调用 update_attributes 时收到以下错误：

```
NoMethodError in SongsController#update

undefined method `name' for nil:NilClass
Rails.root: C:/Sites/music3

Application Trace | Framework Trace | Full Trace
app/controllers/songs_controller.rb:164:in `update' 
```

令我困惑的是我的@song 对象中没有“名称”。（见下面的模式），但艺术家做到了。歌曲和艺术家通过多对多关系关联。似乎 update_attributes 也在尝试更新艺术家对象？没想到它应该这样做。真的不确定这里有什么帮助，我们将不胜感激。

谢谢，

```
Song Controller
def update
    @artist = Artist.find(params[:artist_id])
    authorize! :update, @artist
    @song = Song.find(params[:form_song_id])
    @song.artists <<  @artist
    @s3_test = params[:s3_name]

    @song.update_attributes(params[:song]) #causing the error  
 end 
```

架构

```
create_table "artists", :force => true do |t|
    t.string   "name"
    t.string   "city"
    t.string   "province"
    t.string   "country"
    t.text     "influence"
    t.text     "bio"
    t.text     "contact_info"
    t.date     "date_founded"
    t.date     "created_date"
    t.datetime "created_at"
    t.datetime "updated_at"
    t.string   "url_slug"
    t.string   "pay_pal"
    t.string   "image"
  end

  create_table "songs", :force => true do |t|
    t.string   "song_name"
    t.string   "song_artist"
    t.string   "song_contribute_artist"
    t.string   "song_written"
    t.string   "song_licence_type"
    t.string   "song_url_slug"
    t.date     "song_licence_date"
    t.integer  "song_plays"
    t.text     "lyrics"
    t.datetime "created_at"
    t.datetime "updated_at"
    t.string   "s3_name"
    t.string   "download_link"
    t.string   "torrent_link"
    t.string   "s3_id"
    t.integer  "s_a_id"
  end 
```

示例参数。

```
{"utf8"=>"âœ“",
 "_method"=>"put",

 "song"=>{"s3_name"=>#<ActionDispatch::Http::UploadedFile:0x260e908 @original_filename="done good (final final).mp3",
 @content_type="audio/mp3",
 @headers="Content-Disposition: form-data; name=\"song[s3_name]\"; filename=\"done good (final final).mp3\"\r\nContent-Type: audio/mp3\r\n",
 @tempfile=#<File:C:/Users/Ted/AppData/Local/Temp/RackMultipart20120716-1600-ohtooj>>,
 "song_name"=>"Done Good",
 "song_artist"=>"Grimes",
 "song_contribute_artist"=>"",
 "song_written"=>"Ted Kennedy",
 "song_licence_type"=>"copywrite",
 "song_licence_date(1i)"=>"2012",
 "song_licence_date(2i)"=>"7",
 "song_licence_date(3i)"=>"17",
 "song_plays"=>"",
 "song_url_slug"=>"",
 "lyrics"=>"None"},
 "commit"=>"Upload",
 "artist_id"=>"1",
 "form_song_id"=>"5",
 "id"=>"create"} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T05:09:39.163

试试这个，因为那些不在歌曲课上。

```
params[:song].delete("@content_type")
params[:song].delete("@tempfile")
params[:song].delete("@headers") 
```

# mysql - mysql数据库

> ID：11515841
> 
> 赞同：0
> 
> 时间：2012-07-17T03:59:43.943
> 
> 标签：mysql, database, default

请你们解释一下这些数据库是如何创建的：

*   mysql
*   phpmyadmin
*   信息模式
*   性能模式

我知道这是一个新手问题，我可能会猜到其中一些的答案，例如“创建 phpmyadmin 数据库的原因”是因为我安装了 phpmyadmin 并且该数据库是与 . 这不确定，所以我只需要澄清一下。

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T04:03:23.237

Mysql 是一个数据库服务器。它提供对数据库的访问。它作为服务在机器上运行。

Phpmyadmin 是一个基于 php 的工具，您可以安装它来从网页管理 mysql。

最后两个是可以由应用程序创建的数据库，例如 phpmyadmin，用于存储有关数据库其余部分或数据库表的模式信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T04:21:57.910

这些是您`SHOW DATABASES`在干净的 MySQL 安装上执行时显示的标准数据库集。

*   mysql - 这是在安装 MySQL 服务器时创建的，由操作系统的包管理系统或作为 MySQL 包的一部分提供的脚本创建
*   information_schema - 元数据库，它在磁盘上不存在
*   performance_schema - 元数据库，但它确实在磁盘上存储了一些文件

任何其他数据库都是用户/应用程序创建的。

# jquery - jQuery：无法选择链接

> ID：11515851
> 
> 赞同：1
> 
> 时间：2012-07-17T04:00:37.490
> 
> 标签：jquery, wordpress, upload, media

我正在尝试在我正在开发的自定义插件中使用 wordpress 的媒体上传弹出窗口。

到目前为止一切正常，我能够上传图像并将它们插入到一个字段中，但是我还有另一个字段需要指向上传的 pdf 的链接。

```
tb_show('', 'media-upload.php?type=image&amp;TB_iframe=true;height=200');
window.send_to_editor = function(html) {
    console.log(html);

    console.log(jQuery('a', html));
    console.log(jQuery('a', html).attr('href'));

    console.log(jQuery('img', html));
    console.log(jQuery('img', html).attr('src'));

    imgurl = jQuery('a', html).attr('href');
    current_upload.prev().val(imgurl);

    tb_remove();
} 
```

对于图像，这将是我的输出，这是正确的，因为它能够选择图像源

```
<a href="http://to.local/wp-content/uploads/2012/07/Screen-Shot-2012-06-20-at-12.15.52-PM.png"><img src="http://to.local/wp-content/uploads/2012/07/Screen-Shot-2012-06-20-at-12.15.52-PM-300x221.png" alt="" title="Screen Shot 2012-06-20 at 12.15.52 PM" width="300" height="221" class="alignnone size-medium wp-image-49" /></a> to.js:54
[]
undefined
[
    <img src=​"http:​/​/​to.local/​wp-content/​uploads/​2012/​07/​Screen-Shot-2012-06-20-at-12.15.52-PM-300x221.png" alt title=​"Screen Shot 2012-06-20 at 12.15.52 PM" width=​"300" height=​"221" class=​"alignnone size-medium wp-image-49">​
]
http://to.local/wp-content/uploads/2012/07/Screen-Shot-2012-06-20-at-12.15.52-PM-300x221.png 
```

但是当我选择 PDF 时，我得到了这个：

```
<a href='http://to.local/wp-content/uploads/2012/07/01-Mobile-Characteristics-and-Interaction-Design-Principles-Slides2.pdf'>01 Mobile Characteristics and Interaction Design Principles (Slides)</a> to.js:54
[]
undefined
[]
undefined 
```

所以我不明白为什么 jQuery('img', html) 可以正常工作，而 jQuery('a', html) 不能正常工作，而在这两种情况下，返回的 html 中都有一个链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T04:20:34.843

html 本身是一个“a”。

```
console.log(jQuery(html).attr('href')); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T04:21:11.847

假设*是*元素。`html = jQuery('<a href="http://to.local/wp-content/uploads/2012/07/Screen-Shot-2012-06-20-at-12.15.52-PM.png"><img src="http://to.local/wp-content/uploads/2012/07/Screen-Shot-2012-06-20-at-12.15.52-PM-300x221.png" alt="" title="Screen Shot 2012-06-20 at 12.15.52 PM" width="300" height="221" class="alignnone size-medium wp-image-49" /></a>');`_`html` *`<a>`*

 *`jQuery('a', html)`尝试`<a>`在 的子级中进行选择`html`，因为那里没有`<a>`元素，所以不返回任何结果。

由于`<img>`是 , 中的`<a>`父级的子级`html`，因此`jQuery('img', html)`有效。

在您的情况下，要获取 的`href`属性`html`，请执行以下操作：

```
jQuery(html).attr("href") 
```

（删除`jQuery()`if`html`已经是一个 jQuery 对象）*

# scalaquery - 如何使用带有 ScalaQuery 或 SLICK 的链接表来呈现多对多关系？

> ID：11515852
> 
> 赞同：16
> 
> 时间：2012-07-17T04:00:40.253
> 
> 标签：scalaquery

我最近问了一个类似的问题，并在使用 Lift Mapper 解决多对多关系问题上[得到了很好的答复。](https://stackoverflow.com/a/11513553/828757)我查看了[ScalaQuery/SLICK 文档](https://github.com/slick/slick/wiki)，但它没有记录涉及链接表的持久数据的方法。如果有人知道如何使用 SLICK 进行多对多映射，如果你能分享它会很棒。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-18T12:52:58.523

[这个测试](https://github.com/slick/slick/blob/01251edbc7f970f29f3a471d7eee27460e6846cf/src/test/scala/scala/slick/test/ql/ForeignKeyTest.scala#L177)（由 Stefan Zeiger 创建）在 SLICK 测试套件中是新的，并且很好地回答了这个问题：

```
def testManyToMany(): Unit = db withSession {

    object A extends Table[(Int, String)]("a") {
      def id = column[Int]("id", O.PrimaryKey)
      def s = column[String]("s")
      def * = id ~ s
      def bs = AToB.filter(_.aId === id).flatMap(_.bFK)
    }

    object B extends Table[(Int, String)]("b") {
      def id = column[Int]("id", O.PrimaryKey)
      def s = column[String]("s")
      def * = id ~ s
      def as = AToB.filter(_.bId === id).flatMap(_.aFK)
    }

    object AToB extends Table[(Int, Int)]("a_to_b") {
      def aId = column[Int]("a")
      def bId = column[Int]("b")
      def * = aId ~ bId
      def aFK = foreignKey("a_fk", aId, A)(a => a.id)
      def bFK = foreignKey("b_fk", bId, B)(b => b.id)
    }

    (A.ddl ++ B.ddl ++ AToB.ddl).create
    A.insertAll(1 -> "a", 2 -> "b", 3 -> "c")
    B.insertAll(1 -> "x", 2 -> "y", 3 -> "z")
    AToB.insertAll(1 -> 1, 1 -> 2, 2 -> 2, 2 -> 3)

  /*val q1 = for {
      a <- A if a.id >= 2
      aToB <- AToB if aToB.aId === a.id
      b <- B if b.id === aToB.bId
    } yield (a.s, b.s)*/

    val q1 = for {
      a <- A if a.id >= 2
      b <- a.bs
    } yield (a.s, b.s)

    q1.foreach(x => println(" "+x))

    assertEquals(Set(("b","y"), ("b","z")), q1.list.toSet)
  } 
```

更新：

我不太确定在 Scala 中集成业务逻辑和持久性的最佳方式是什么（因为这不仅仅是 OO 或 FP），所以[我问了一个关于这个的新问题](https://stackoverflow.com/q/11542153/828757)。希望这可以帮助其他对此问题也感到好奇的人。

# heroku - 有没有在 Heroku 上放置应用程序的教程

> ID：11515855
> 
> 赞同：0
> 
> 时间：2012-07-17T04:01:14.933
> 
> 标签：heroku

我在[https://blooming-summer-8571.herokuapp.com/](https://blooming-summer-8571.herokuapp.com/)上完全免费部署了我的应用程序，但我想开始为我自己的自定义域的托管付费。我还购买了一个域名，我想把我的应用程序放在上面。什么是最好的资源，甚至是谷歌搜索关键词，可以帮助我通过 heroku 做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T04:23:59.923

最好的办法是通过位于以下位置的 heroku 开发中心：

*   [https://devcenter.heroku.com/](https://devcenter.heroku.com/)

有从非常基础到更高级的主题。您正在寻找自定义域设置，可在此处找到相关说明：[https ://devcenter.heroku.com/articles/custom-domains](https://devcenter.heroku.com/articles/custom-domains)

# python - Python多语言本地化

> ID：11515856
> 
> 赞同：2
> 
> 时间：2012-07-17T04:01:20.393
> 
> 标签：python, localization, gettext

我正在开发一个用 python 编写的后端项目，为我的前端手机提供多语言字符串。我如何获得一些会改变位置的文本翻译。我想知道该怎么做？
示例：
Cathy 邀请 Thomas。
翻译成
Thomas 被 Cathy 邀请了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T04:04:24.167

改用 dict 插值。

```
_('%(inviter)s invited %(invitee)s.') % {'inviter': 'Cathy', 'invitee': 'Thomas'}
             ↓↓↓↓↓↓↓
 u'%(invitee)s 被 %(inviter)s 邀請了.' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T04:06:01.143

您可以使用参数化字符串插值

```
params = {"inviter": "Cathy", "invitee": "Thomas"}
eng_str = "%(inviter)s invited %(invitee)s" % params
trans_str = "%(invitee)s 被 %(inviter)s 邀請了." % params 
```

# sql-server - 如何生成 VS 2010 DataCompare 结果的汇总报告

> ID：11515858
> 
> 赞同：0
> 
> 时间：2012-07-17T04:02:47.597
> 
> 标签：sql-server, visual-studio-2010, data-comparison

我正在执行 SQL Server 数据库迁移任务。迁移后，我需要比较新旧数据库。我需要向需求团队生成一份汇总报告（通过另一个表格或 excel 都可以），以评估差异是否需要修复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T04:17:40.557

有很多免费和付费工具可用于这项工作。如果您准备好使用付费工具，red-gate SQL Compare 是一个非常好的工具。您可以在网上搜索有关可用免费工具的评论。

# php - PHP preg_replace_callback 适用于 5.3 但不适用于 5.2.17

> ID：11515860
> 
> 赞同：0
> 
> 时间：2012-07-17T04:02:55.063
> 
> 标签：php, regex, preg-replace-callback

我有以下代码：

```
 return preg_replace_callback("#\{gallery: '(.+?)'(?: dir: ([0-1]))?\}#i", create_function('$i', '$dir = isset( $i[2] ) ? 1 : 0; $oGallery = new Gallery( $i[1] ) ; $oGallery->PublicSide($dir);' ), $string); 
```

问题是这适用于我的本地主机（PHP5.3）但是当我将它上传到我的服务器（5.2.17）时它没有..任何想法为什么？似乎与单引号有关`"#\{gallery: '(.+?)'(?: dir: ([0-1]))?\}#i"`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T04:23:39.197

您实际上并没有从回调中返回任何内容，因此它不会进行任何替换。也许你打算这样做，而不是？

```
... return $oGallery->PublicSide($dir); ... 
```

# android - onBeginningOfSpeech() 是本地触发还是由服务器触发？

> ID：11515872
> 
> 赞同：3
> 
> 时间：2012-07-17T04:05:23.293
> 
> 标签：android, speech-recognition

[onBeginningOfSpeech()](http://developer.android.com/reference/android/speech/RecognitionListener.html#onBeginningOfSpeech%28%29)的文档说：

> [调用时] 用户已开始说话。

但它没有说明这是麦克风识别（即本地）事件还是服务器识别事件（即需要谷歌语音服务器来确认语音开始）。

我试图在[源代码](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.2_r1.1/android/speech/SpeechRecognizer.java#SpeechRecognizer.InternalListener.onBeginningOfSpeech%28%29)中找到线索，但在某些时候我迷失在服务、回调、接口之间……这不是一个简单的谁-呼叫-谁序列。

您是否碰巧知道[onBeginningOfSpeech()](http://developer.android.com/reference/android/speech/RecognitionListener.html#onBeginningOfSpeech%28%29)是在本地执行（例如本地电路检测 RMS 变化）还是必须前往 Google 服务器并获得他们的“是/否”？

我知道语音识别本身会传输到 Google 的服务器，但它是否也为[onBeginningOfSpeech()](http://developer.android.com/reference/android/speech/RecognitionListener.html#onBeginningOfSpeech%28%29)完成？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T15:56:42.043

有趣的问题。出于好奇，我做了一个小测试。在一个示例应用程序中，我禁用了 WiFi `onReadyForSpeech()`：

```
WifiManager wifiManager = (WifiManager)getSystemService(Context.WIFI_SERVICE); 
wifiManager.setWifiEnabled(false); 
```

并观察发生了什么。果然，`onBeginningOfSpeech()`只要他有一点点噪音，麦克风就会被叫到。它甚至不必是言语。

所以@KevinJunghans 的结论是正确的：`onBeginningOfSpeech()`不是由谷歌服务器决定或发起的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T13:42:51.930

检测语音开始和语音结束必须在本地执行，因为系统基本上必须“监听”以确定这些事件何时发生。这无法通过远程服务有效执行。在语音识别中寻找语音的开头和结尾称为端点，并使用复杂的信号处理来确定这一点。对于 Google 语音，客户端设备确定语音开始和开始录制的时间，然后确定语音结束的时间以停止录制。在某些系统上，端点还负责消除录音两端的过度静音。讲话的开始也可以由用户做出的选择触发，例如点击网络浏览器上的麦克风图标。然后将此录制的音频发送到 Google 服务器进行分析并返回结果。有关 Google 的非官方 API 以及它如何处理此音频的更多详细信息，请查看[这篇文章](http://mikepultz.com/2011/03/accessing-google-speech-api-chrome-11/)。

# mysql - 最好的 git mysql 版本控制系统？

> ID：11515875
> 
> 赞同：15
> 
> 时间：2012-07-17T04:05:43.153
> 
> 标签：mysql, database, git, version-control, merge

我已经开始与一个小型开发团队一起使用 git，这些开发团队来来去去从事不同的项目；在我们开始使用 Wordpress 之前，它运行良好。因为 Wordpress 在 MySQL 中存储了很多配置，所以我们决定需要将其包含在我们的提交中。

这工作得很好（在预提交时使用 msyql 转储，并在签出后将转储文件推送到 mysql 中），直到两个人对插件进行修改并提交，然后一切都再次崩溃。

我查看了我能找到的所有解决方案，并认为 Liquibase 是最接近的选择，但对我们不起作用。它要求您在 XML 中指定模式，这实际上是不可能的，因为我们使用的插件会自动将数据/表/修改插入数据库。
我计划在几天内悬赏它，看看是否有人有“金发姑娘的解决方案”：

**问题：**
有没有办法在语义上对 MySQL 数据库进行版本控制（不使用差异编辑：这意味着它不只是采用两个版本并对其进行差异化，而是记录按顺序运行的实际查询以从旧版本中获取到当前的）不需要开发人员编写的模式文件，并且可以使用 git 合并。

我知道我不可能是唯一一个遇到这种问题的人，但希望有人能解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T07:52:56.737

处理数据库版本控制的正确方法是通过仅添加的版本脚本。由于这种性质，它会一直发生冲突，因为每个分支都将附加到同一个文件中。你想要那个。它使开发人员意识到彼此的更改如何影响其数据的持久性。Rerere 将确保您只解决一次冲突。（请参阅我关于重新共享的博客文章：http: [//dymitruk.com/blog/2012/02/05/branch-per-feature/](http://dymitruk.com/blog/2012/02/05/branch-per-feature/)）

将每个更改都包含在 if then 子句中，该子句检查版本号、更改架构或修改查找数据或其他内容，然后递增版本号。您只需为每次更改继续执行此操作。

在伪代码中，这是一个示例。

```
if version table doesn't exist
  create version table with 1 column called "version"
  insert the a row with the value 0 for version
end if
-- now someone adds a feature that adds a members table
if version in version table is 0
  create table members with columns id, userid, passwordhash, salt
    with non-clustered index on the userid and pk on id
  update version to 1
end if
-- now some one adds a customers table
if version in version table is 1
  create table customers with columns id, fullname, address, phone
    with non-clustered index on fullname and phone and pk on id
  update version to 2
end if
-- and so on 
```

这样做的好处是，如果您使用的是静态语言，您可以在成功构建测试项目后自动运行此脚本 - 它总是会让您保持最新状态。如果您刚刚更新到最新版本，则所有验收测试都应该通过。

问题是，你如何同时在 2 个不同的分支上工作？我过去所做的只是启动了一个新实例，该实例在 db 名称中由分支名称分隔。您的配置文件已被清理（参见 git smudge/clean）以将连接字符串设置为指向该分支的新实例或现有实例。

如果您使用的是 ORM，则可以自动生成此脚本，例如，nhibernate 将允许您将尚未反映在 db 模式中的图形更改导出为 sql 脚本。因此，如果您为客户类添加了映射，NHibernate 将允许您生成表创建脚本。您只需编写添加 if-then 包装器的脚本，即可在功能分支上实现自动化。

集成分支和发布候选分支有一些特殊要求，如果您要重置这些分支，则需要擦除和重新创建数据库。通过确保新版本`git branch --contains`是旧版本，这很容易做到。如果没有，请擦拭并再生。

我希望这很清楚。这在过去运作良好，并且要求每个开发人员能够在他们的机器上创建和销毁他们自己的数据库实例，尽管可以在具有额外实例命名约定的中央实例上工作。

# java - 检测两个正方形/矩形JAVA之间的重叠

> ID：11515880
> 
> 赞同：-1
> 
> 时间：2012-07-17T04:06:46.757
> 
> 标签：java, geometry, logic, overlap

我不知道如何完成这个。我自己学习，我发现了这个练习，你有一个这样的矩形类：

```
public class Rectangulo {

private int x, y, width, heigth;

public Rectangulo(int x, int y, int width, int heigth){
    this.x = x;
    this.y = y;
    this.width = width;
    this.heigth = heigth;
}

public boolean isOverlaping(Rectangulo r1, Rectangulo r2){

} 
```

而且我必须完成该方法，因此如果 2 个矩形重叠/碰撞，则返回 true，否则返回 false。你能给我任何指导来帮助我思考这个问题，或者提示吗？

我不必使用 intersects 方法。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T04:09:30.907

如果您查看该方法，您将获得两个矩形对象作为参数，r1 和 r2。每个实例都有其特定的 x、y、宽度和高度值。您可以使用这些值来确定两个矩形是否碰撞或重叠

对于您的具体疑问，您可能需要阅读[Rectangle 的 javadoc。](http://docs.oracle.com/javase/6/docs/api/java/awt/Rectangle.html). 这将帮助您了解如何在 Java 中创建矩形

# qt - How to force MSVS 2010 to use qt debug libraries in a C++ project?

> ID：11515881
> 
> 赞同：1
> 
> 时间：2012-07-17T04:06:51.313
> 
> 标签：qt, debugging, build, linker

I have a C++ project that uses QT libraries. The project is in MSVS 2010. When I try to build the project in "Debug mode" I get this error:

```
qtmain.lib(qtmain_win.obj) : error LNK2038: mismatch detected for '_ITERATOR_DEBUG_LEVEL': value '0' doesn't match value '2' in audiomixerboard.obj 
```

The correct "qtmain" library with debug info is called "qtmaind.lib", but for some reason in my project it wants to use "qtmain.lib".

My question is: how to force the MSVS 2010 linker to use qt libraries with debug information?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T04:17:57.587

Simply specify qtmaind.lib in the properties->linker->input tab, addition dependancies field

# iphone - 在设备锁定时从 iPod Library 播放 AVAudio

> ID：11515883
> 
> 赞同：3
> 
> 时间：2012-07-17T04:07:13.220
> 
> 标签：iphone, objective-c, ios, avaudioplayer, avplayer

只是一个快速的问题。

我已经将我的程序设置为能够在后台播放`AVAudioPlayer`，`AVPlayer`效果很好。我可以播放歌曲，锁定屏幕，声音将继续播放。

我遇到的问题是`[AVPlayer play]`在我的屏幕已经锁定时打电话。这最终导致没有音乐被播放。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T04:17:42.793

你需要告诉你的播放器监听控制事件：

```
- (void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];

    [[UIApplication sharedApplication] beginReceivingRemoteControlEvents];
    [self becomeFirstResponder];
}
- (BOOL)canBecomeFirstResponder {
    return YES;
}
- (void)viewWillDisappear:(BOOL)animated {
    [super viewWillDisappear:animated];
    [[UIApplication sharedApplication] endReceivingRemoteControlEvents];
    [self resignFirstResponder];
} 
```

然后你可以像这样对它们采取行动：

```
- (void)remoteControlReceivedWithEvent:(UIEvent *)event {
    if (event.type == UIEventTypeRemoteControl) 
        {
        if (event.subtype == UIEventSubtypeRemoteControlPlay) 
            {
            [AVPlayer play];
            } 

        else if (event.subtype == UIEventSubtypeRemoteControlPause) 
            {
            [AVPlayer pause];
            } 
        else if (event.subtype == UIEventSubtypeRemoteControlTogglePlayPause) 
            {
                if (!AVPlayer.playing) 
                    {
                        [AVPlayer play];

                    } else if (AVPlayer.playing) 
                    {
                        [AVPlayer pause];
                    }
            }
        else if (event.subtype == UIEventSubtypeRemoteControlNextTrack)
            {
            [self myNextTrackMethod];
            }
        else if (event.subtype == UIEventSubtypeRemoteControlPreviousTrack)
            {
            [self myLastTrackMethod];
            }
        }
} 
```

# java - 在 Java 中，我想以 'foo' 的名称调用对象的方法，但 'foo' 是一个字符串。我该如何解决这个问题？

> ID：11515890
> 
> 赞同：1
> 
> 时间：2012-07-17T04:08:22.967
> 
> 标签：java, string, oop, function

我有一个名为“foo”的对象（Object foo = new Object()）。我想在另一个方法中调用这个对象，我在签名中传递一个带有这个对象名称的字符串。如何使用表示对象名称的字符串来调用此对象？

我收到一个找不到符号错误。

这是一些代码：

```
//from main method
Object foo = new Object();
Monitor monitor = new Monitor();
//end main method

class Monitor {
  public Monitor() {
    Manager manager = new Manager();
  }

//IMPORTANT - info.objectName is user input, and for this example it is "foo"

  public void processArgument(Instruction info) {
    if (info.command == "read") int value = manager.read(info.objectName);
  }
}

class Manager {
  public int read(String obj) {
    return obj.getRead();
  }
}

class Object {
  private int value;
  public int getRead() {return value;}
} 
```

我希望这是有道理的，我不太擅长这个，但我需要一些帮助。这是针对具有严格的反代码共享策略的类，所以我试图尽可能抽象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T04:16:24.093

### 简短的回答

Java 或 JVM 不支持此功能。

### 长答案为什么

给定`MyCustomObject xxx = new MyCustomObject();`

在`xxx`给`MyCustomObject`定`String s = "xxx";`. 因为无法在 JVM 中搜索名为`xxx`. 没有任何方法可以让您查找`xxx`给定任意`String`.

### 重复的问题

[Java反射：通过输入名称获取给定类的实例？](https://stackoverflow.com/questions/5067987/java-reflection-get-instances-of-a-given-class-found-by-entering-its-name)如果你不能通过引用名找到它，你就不能在它上面调用任何方法！

### 哈克解决方法

您可以自己将此引用存储在某种`Map<String, T>`结构中，然后传递该结构并自行搜索，但这不是 JVM 或语言本身内置的任何东西。强制执行这一点几乎是不可能的，它会给某些`static`数据引入紧密耦合，并且许多其他糟糕的设计问题会在未来引起很多麻烦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T04:58:00.250

如果你想调用一个名为“foo”的方法，

1.  获取 foo 方法的类对象。
2.  调用 getDeclaredMethod()，它返回 Method 对象。
3.  调用方法对象上的调用方法。

```
Class classOfFoo = FooClass.class;

FooClass obj = new FooClass(); //Or may be you have your own object.

classOfFoo.getDeclaredMethod("foo",fooParameter.class).invoke(obj,fooParametersObj); 
```

你可能想看看反射 API。

[getDeclaredMethod(String name,Class... parameterTypes)](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getDeclaredMethod%28java.lang.String,%20java.lang.Class...%29)

[公共对象调用（对象 obj，对象... args）](http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/Method.html#invoke%28java.lang.Object,%20java.lang.Object...%29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T17:19:50.037

有两种方法可以原生地做到这一点，还有一种不那么原生的方式。

*   如果语句
*   函子图
*   反射

## 选项1

你所拥有的是选项 1，它大部分是正确的，你只是使用了错误的比较方式。比较你的

```
public void processArgument(Instruction info) {
    // this is bad - uses reference comparison
    if (info.command == "read") 
        int value = manager.read(info.objectName);
} 
```

与推荐

```
public void processArgument(Instruction info) {
    // this is good - actually compares the values
    if (info.command.equals("read"))
        int value = manager.read(info.objectName);
} 
```

有些人会认为执行以下操作会更好，因为如果`info.command`为 null，则不会引发异常。就我个人而言，我不喜欢这样，因为我宁愿获得例外，但很多人提倡它，他们有一个完全正当的理由这样做。

```
public void processArgument(Instruction info) {
    // "read" can never be null, so no null pointer exception here
    if ("read".equals(info) )
        int value = manager.read(info.objectName);
} 
```

当然，当您添加更多行为时，您只需添加更多 if 语句。

在 Java 7 中，您可以这样做：

```
public void processArgument(Instruction info) {
    switch(info.command) {
        case "read": manager.read(info.objectName); break;
        case "write": manager.write(info.objectName); break;
        default: throw new IllegalArgumentException("Command " + info.command + " not supported");
    }
} 
```

## 选项 2

另一种选择是使用利用匿名类的 Map，如下所示：

```
// define this somewhere
abstract class Functor {
    Manager m;
    Functor(Manager m) { this.m = m; }
    void execute(Instruction info);
}

// somewhere you have access to
Map<String,Functor> funcs = new HashMap<String,Functor>();

// add this to a static block, or constructor, depending
funcs.put("read", new Functor(manager) {
    public void execute(Instruction info) { m.read(info.objectName); }
});
funcs.put("write", new Functor(manager) {
    public void execute(Instruction info) { m.write(info.objectName); }
} 
```

然后当你打电话给你的论点

```
public void processArgument(Instruction info) {
    Functor f = funcs.get(info.command);
    if(f == null) throw new IllegalArgumentException("Operation " + info.command + " not supported");
    f.execute(info);
} 
```

## 选项 3

使用反射作为 SagarDabas 在他的帖子中概述的内容。请注意，这可能需要特殊的访问权限，并且不会为您提供灵活的正确性选项。

# penetration-testing - 是否可以在 Raspberry Pi 上加载 BackTrack 5？

> ID：11515898
> 
> 赞同：3
> 
> 时间：2012-07-17T04:09:31.650
> 
> 标签：penetration-testing, raspberry-pi

我正在考虑在[Raspberry Pi](http://www.raspberrypi.org/quick-start-guide)上加载 Back Track 5并想知道这是否可能，或者我是否正在为自己浪费大量时间？

[BackTrack5](http://www.backtrack-linux.org/downloads/)的ARM 版本约为 1 GB，而Raspberry Pi 推荐 的[“Squeeze”Debian版本为 443 MB。](http://downloads.raspberrypi.org/download.php?file=/images/debian/6/debian6-19-04-2012/debian6-19-04-2012.zip)

我有一个 8GB 的​​ SD 卡，我将使用它来复制 BackTrack 并尝试在 Raspberry Pi 上加载。但我只是想知道这是否可能，或者是否有人以前尝试过。将不胜感激所有/任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-08T20:43:00.140

现在 Back Track 的继任者 Kali 完全支持 Raspberry Pi：

[http://www.kali.org/downloads/](http://www.kali.org/downloads/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T14:14:44.453

您应该注意的是 pi 的启动过程。您必须在 SD 卡上有一个完全正常工作的引导分区 (vfat) 才能启动它。因此安装成为一个问题，因为您无法从要安装它的媒体以外的其他媒体启动。

可能可以创建一个单独的安装分区并从那里安装，但这似乎很乱。

我能想到的其他选择是使用 VM 安装或按照 raspian 的方式制作 .img。

祝你好运！我希望 BackTrack 在 pi 上工作！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T22:05:14.973

你不能没有大量的工作。

当然，[piksel bitworks](https://stackoverflow.com/users/910069/piksel-bitworks)在他的回答中报告的内容是正确的，但是应该可以使用您自己的计算机从准备好的映像安装它以写入 SD 卡。

在我看来，主要的一点是你必须得到 Backtrack 的代码并自己编译它。您将无法使用作为 ARM Backtrack 提供的图像文件，因为它似乎是为 ARMv7 编译的，而 Raspberry PI 具有 ARM11 CPU，这意味着它具有 ARMv6 架构（[Raspberry PI 硬件](http://elinux.org/RaspberryPiBoard#Hardware)）。

将您真正要使用的软件安装到与 Raspberry Pi 兼容的发行版中对我来说似乎更有效，而且可能还可以帮助您更好地使用可用资源。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T14:38:52.087

Pi 可以运行 linux，而不是安装 BT 5 只需安装工具。或者使用安装了许多相同工具的各种 Pi 发行版之一，例如：[http](http://blog.pwnieexpress.com/post/24967860602/raspberry-pwn-a-pentesting-release-for-the-raspberry) ://blog.pwnieexpress.com/post/24967860602/raspberry-pwn-a-pentesting-release-for-the-raspberry或[http://sourceforge.net/projects/pwnpi/](http://sourceforge.net/projects/pwnpi/)

# cakephp-2.0 - 使用数据源在 cakephp 中保存多条记录

> ID：11515901
> 
> 赞同：0
> 
> 时间：2012-07-17T04:10:01.110
> 
> 标签：cakephp-2.0

有没有办法在 Cakephp 2.0 中将 saveAll() 与数据源一起使用？我已经能够成功使用 save()，但是 saveAll() 会触发错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T04:12:53.463

是的，您可以将 saveAll 与数据源一起使用。你应该像这样传递数组：

```
 $data = array([0] => array(
                                [ModelName] = array(
                                                    [fieldName] => value1,
                                                     ...
                                                    )
                             )
                   [1] => array( ............
                   ..............
                   ) 
```

然后，如果您使用 $this->ModelName->saveAll($data)，您将能够一次保存多条记录。而且，如果您传递一个选项“'deep' => true”，那么您将能够在多个相关表中保存多条记录。

```
$this->ModelName->saveAll($data, array('deep' => true)); 
```

# iphone - 为什么我的测试人员不允许测试我的 iphone 应用程序？

> ID：11515902
> 
> 赞同：0
> 
> 时间：2012-07-17T04:10:36.220
> 
> 标签：iphone, ios, xcode, xcode3.2

我正在使用 TestFlight，所以我的一些测试人员可以测试我的新/第一个应用程序。我通过配置助手获取了我的所有证书和配置文件信息，按照他们的步骤操作，使用 Build 和 Archive 来创建 .ipa 等。

但是，我的测试人员告诉我他们的设备没有权限。其中一种设备是 iPhone 4S。

我正在使用 xcode 3（我的操作系统可以拥有的最新版本），我的基本 sdk 是 iOS 4.3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T04:13:03.130

您的测试人员拥有的设备...您需要在您的帐户中添加他们的设备 ID 在您的配置文件中添加这些设备使用该配置文件构建您的应用程序并给他们它会工作...

# perl - Perl Cryptology：使用打包和解包功能加密/解密 ASCII 字符

> ID：11515904
> 
> 赞同：2
> 
> 时间：2012-07-17T04:10:53.043
> 
> 标签：perl, encryption, cryptography, ascii, unpack

我需要帮助弄清楚这两个子例程如何工作以及它们返回什么值或数据结构。这是代码的最小表示：

```
#!/usr/bin/perl
use strict; use warnings;

# an array of ASCII encrypted characters
my @quality = ("C~#p)eOA`/>*", "DCCec)ds~~", "*^&*"); # for instance

# input the quality
# the '@' character in front deferences the subroutine's returned array ref 
my @q = @{unpack_qual_to_phred(@quality)};

print pack_phred_to_qual(\@q) . "\n";

sub unpack_qual_to_phred{
    my ($qual)=@_;
    my $upack_code='c' . length($qual);
    my @q=unpack("$upack_code",$qual);
    for(my $i=0;$i<@q;$i++){
        $q[$i]-=64;
    }
    return(\@q);
}

sub pack_phred_to_qual{
    my ($q_ref)=@_;
    @q=@{$q_ref};
    for(my $i=0;$i<@q;$i++){
        $q[$i]+=64;
    }
    my $pack_code='c' . int(@q);
    my $qual=pack("$pack_code",@q);

    return ($qual);
}

1; 
```

据我了解，该`unpack_qual_to_phread()`子例程显然会解密存储在`@quality`. 该子例程读入一个包含 ASCII 字符元素的数组。数组的每个元素都经过处理并明显解密。然后，子例程返回一个包含解密数组元素的数组 ref。我对此非常了解，*但是*我对 Perl 函数`pack`和`unpack`. 我也无法在网上找到任何好的例子。

我认为`pack_phred_to_qual`子程序将质量数组 ref 转换回 ASCII 字符并打印它们。

谢谢。非常感谢任何帮助或建议。此外，如果有人可以提供一个简单的例子来说明 Perl`pack`和`unpack`函数是如何工作的，那也会有所帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T04:25:00.920

这很简单，就像打包一样。Is 正在调用`unpack("c12", "C~#p)eOA`/>*)`，它依次获取每个字母并找到该字母的 ascii 值，然后从该值中减去 64（嗯，减去 64 是一个后处理步骤，与打包无关）。所以字母“C”是ascii 67，67-64是3。因此该函数的第一个值是3。接下来是“~”，即ascii 126。126-64是62。接下来是#，即ascii 35 , 35-64 是 -29 等等。

从您的脚本生成的完整数字集是：

3,62,-29,48,-23,37,15,1,32,-17,-2,-22

“加密”步骤只是颠倒了这个过程。添加 64，然后转换为 char。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T04:32:14.470

无需计算长度。这些功能可以简化为

```
sub unpack_qual_to_phred { [ map $_ - 64, unpack 'c*', $_[0] ] }
sub pack_phred_to_qual { pack 'c*', map $_ + 64, @{ $_[0] } } 
```

在加密方面，这是一个疯狂的简单替换密码。它只是从每个字符的字符数中减去 64。它可以写成

```
sub encrypt { map $_ - 64, @_ }
sub decrypt { map $_ + 64, @_ } 
```

打包/解包根本不考虑加密/解密；这只是迭代每个字节的一种方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T04:21:53.267

这不是您问题的完整答案，但是您是否阅读[过 perlpacktut](http://perldoc.perl.org/perlpacktut.html)？或者[perldoc上的](http://perldoc.perl.org/index.html)[打包](http://perldoc.perl.org/functions/pack.html)/[解包](http://perldoc.perl.org/functions/unpack.html)文档？这些可能对帮助您理解有很大帮助。

编辑：

这是一种简单的思考方式：假设您在内存中存储了一个 4 字节的数字 1234。如果它在 perl 标量 $num 中，那么

```
pack('s*', $num) 
```

会回来

```
π♦ 
```

或“1234”的实际*内部存储*值是什么。因此`pack()`将标量值视为字符串，并将其转换为数字的实际二进制表示（您会看到“pi-diamond”打印出来，因为那是该数字的 ASCII 表示）。反过来，

```
unpack('s*', "π♦") 
```

将返回字符串“1234”。

* * *

您的子程序的`unpack()`一部分`unpack_qual_to_phred()`可以简化为：

```
my @q = unpack("c12", "C~#p)e0A`/>*"); 
```

这将返回一个 ASCII 字符对列表，每对对应于第二个参数中的一个字节。

# twitter - 传递参数 Twitter API 时无法使用 OAuth 错误进行身份验证

> ID：11515905
> 
> 赞同：0
> 
> 时间：2012-07-17T04:11:15.917
> 
> 标签：twitter, twitter-oauth

当我将参数传递给 Twitter API 时，我收到“无法使用 OAuth 进行身份验证”错误。如果我不传递任何参数，那么它工作正常。

任何人都可以研究这个问题并为我提供解决方案。

我的 OAuth 请求数组如下

```
Array
(

[method] => GET
[uri] => Array
(
    [host] => api.twitter.com
    [path] => 1/direct_messages.json
)

[auth] => Array
(
    [method] => OAuth
    [oauth_token] => 605267577-YwEtkLXgDZcXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
    [oauth_token_secret] => p2SKUjaRz7oUqW8jmXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
    [oauth_consumer_key] => PAu4LlcETXXXXXXXXXXXXX
    [oauth_consumer_secret] => OA2ISmIYMXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
)

[body] => Array
(
    [count] => 200
)

[header] => Array
(
    [Authorization] => OAuth oauth_version="1.0",oauth_signature_method="HMAC-SHA1",oauth_token="605267577-YwEtkLXgDZcLaFIZHdJxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",oauth_consumer_key="PAu4LlcETSxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",oauth_nonce="616caa42455f6a490f7fce089fdb56b5",oauth_timestamp="1342592116",oauth_signature="B2Dr4CioXL55fwxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"
)

) 
```

我传递了“count”参数，这是我得到的响应

```
Array
(
    [error] => Could not authenticate with OAuth.
    [request] => /1/direct_messages.json
) 
```

提前致谢， Intekhab

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-13T16:11:26.683

在我发现 API 需要在 oauth 数组和 URL 查询中包含该参数之前，我遇到了同样的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T13:58:40.470

您没有正确进行身份验证。你必须遵循这个过程：[https ://dev.twitter.com/docs/auth/authorizing-request](https://dev.twitter.com/docs/auth/authorizing-request)

# android - 如何在 Android NDK 中从 pthread(C) 调用回调(JAVA)

> ID：11515906
> 
> 赞同：3
> 
> 时间：2012-07-17T04:11:34.607
> 
> 标签：android, java-native-interface, pthreads, android-ndk

我想在 pthread 函数中调用 java 方法。

但我面临：

```
JNI_ERROR: non-VM thread making JNI calls 
```

我应该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T09:56:55.593

问题是您的线程未连接（或不正确）到 VM。当您通过 JNI 桥从 Java 调用 C++ 时，您的调用正在处理的 pthread 将附加到 vm。在 C++ 中拥有由 JNI 调用调用的线程至少可以说是不稳定的。您可能所做的是创建一个新线程并尝试从它进行调用而不在调用之前将其附加到 VM。我认为要解决您的问题，您应该将线程附加到 VM。

因此，如果您看到[Android 提示和技巧](http://developer.android.com/guide/practices/jni.html)，则有一个关于该主题的部分如果您转到线程部分，您可以看到他们清楚地说明的部分：

> 在附加线程之前，它没有 JNIEnv，并且无法进行 JNI 调用。

您可以在提供的链接中找到解决问题的详细步骤。

发表你的进展...

# java - 来自数据库的动态 Jtree

> ID：11515916
> 
> 赞同：1
> 
> 时间：2012-07-17T04:13:23.200
> 
> 标签：java, swing, jdbc, hashmap, jtree

我有一个名为 tree1 的数据库表，它有一个名为 student_details 的表。这个表有 3 列 student_name、student_details、student_phone

现在，我能够从数据库中检索学生详细信息，但只能以静态方式。

问题是当我插入一个新的学生详细信息行 {student_name,student_details,student_phone} 我希望它显示在我的 Jtree 上。虽然 Hashmap 是解决方案，但我无法理解如何在 Jtree 中使用 hashmap 来创建动态节点。

下面是我可以做一个静态Jtree的代码，我想让它动态化。谁能告诉我如何使用代码示例来做到这一点？

```
package tree_try;

import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.FocusEvent;
import java.awt.event.FocusListener;
import java.beans.Statement;
import java.sql.*;
import java.util.ArrayList;
import java.util.Iterator;
import javax.swing.*;
import javax.swing.event.TreeSelectionEvent;
import javax.swing.event.TreeSelectionListener;
import javax.swing.tree.*;

public class SimpleTree extends JFrame
{
   public Connection connect = null;

   public Statement statement = null;
   public Statement statement2 = null;
    public Statement statement3 = null;
      public Statement statement4 = null;
   public Statement statement5 = null;
    public Statement statement6 = null;

   public ResultSet resultSet = null;
   public ResultSet resultSet2 = null;
    public ResultSet resultSet3 = null;
     public ResultSet resultSet4 = null;
   public ResultSet resultSet5 = null;
    public ResultSet resultSet6 = null;

   public ArrayList arrayList = new ArrayList();
   public ArrayList arrayList2 = new ArrayList();
   public ArrayList arrayList3 = new ArrayList();
   public ArrayList arrayList4 = new ArrayList();

   static String store[] = new String[10];
   static String store2[] = new String[10];
   static String store3[] = new String[10];

   //for the panel

   static String store4[] = new String[10];
   static String store5[] = new String[10];
   static String store6[] = new String[10];
    static String store7[] = new String[10];

   //for panel over

   int i=0;
   int i1=0;
   int i2=0;
   int i3=0;

    JPanel jp1 = new JPanel();
    JPanel jp2 = new JPanel();
    JFrame jf1 = new JFrame();

    JButton jb1 = new JButton("Save");
       JButton jb2 = new JButton("Cancel");

    JTextField jt1= new JTextField();
    JTextField jt2 = new JTextField();
    JTextField jt3= new JTextField();
    JTextField jt4 = new JTextField();

    JLabel jl0 = new JLabel();

    JLabel jl1 = new JLabel("Name : ");
    JLabel jl2 = new JLabel("Adress : ");
    JLabel jl3 = new JLabel("Phone Number : ");
    JLabel jl4 = new JLabel("Other Deatils : ");
    JLabel jl5 = new JLabel("");

  public static void main(String[] args)
  {
    new SimpleTree();
  }

  public SimpleTree() 
  {

    super("Schools database");
    WindowUtilities.setNativeLookAndFeel();
    addWindowListener(new ExitListener());

     //db part
      try 
                {
            Class.forName("org.apache.derby.jdbc.ClientDriver").newInstance();
            connect = DriverManager.getConnection("jdbc:derby://localhost:1527/treedata1","suraj","suraj");
            PreparedStatement statement = connect.prepareStatement("SELECT * from school_details");
                        PreparedStatement statement2 = connect.prepareStatement("select student_name from student_details where s_id =1");   
                         PreparedStatement statement3 = connect.prepareStatement("select student_name from student_details where s_id =2");   

                         //for the panel display

                         //PreparedStatement statement5 = connect.prepareStatement("select student_name from student_details where s_id =1");   
                         //PreparedStatement statement6 = connect.prepareStatement("select student_name from student_details where s_id =2");

            resultSet = statement.executeQuery();
            while (resultSet.next()) 
                        {
                String sname = resultSet.getString("school_name");
                String sid = resultSet.getString("s_id");
                arrayList.add(sname);
                                System.out.println("this is stsement one"+sname);
                                //arrayList.add(number);

            }

                        resultSet2 = statement2.executeQuery(); 
                        while (resultSet2.next())
                        {
                                String user2 = resultSet2.getString("student_name");
                //int  number2 = resultSet2.getInt("s_id");
                                arrayList2.add(user2);
                                System.out.println("this is stsement two"+user2);
                        }
                      //  System.out.println(arrayList); 
                         resultSet3 = statement3.executeQuery(); 
                        while (resultSet3.next())
                        {
                                String user3 = resultSet3.getString("student_name");
                //int  number2 = resultSet2.getInt("s_id");
                                arrayList3.add(user3);
                                System.out.println("this is stsement three"+user3);
                        }
                        System.out.println("this is after statement 3 before 4");

        } 
                catch (Exception e2) 
                {
            e2.printStackTrace();
        } 

      //
    Iterator it = arrayList.iterator();
    while (it.hasNext()) 
    {
         store[i]= (String) it.next();
         i++; 
                 //System.out.println(it.next());
    }

    Iterator it2 = arrayList2.iterator();
    while (it2.hasNext()) 
    {
         store2[i1]= (String) it2.next();
         i1++;        
        //System.out.println(it.next());
    }

     Iterator it3 = arrayList3.iterator();
    while (it3.hasNext()) 
    {
         store3[i2]= (String) it3.next();
         i2++;        
       // System.out.println(it.next());
    }

    // ------------------------- Visible Settings start here --------------------//

     Object[] hierarchy ={"Click for schools",new Object[] {store[0],new Object[] { "Student Details",store2[0],store2[1] } },new Object[] { store[1],new Object[] { "Student Details",store3[0],store3[1]}}};
    DefaultMutableTreeNode root = processHierarchy(hierarchy);
    final JTree tree = new JTree(root);

   // setSize(275, 300);
    jp1.setSize(50,50);
    jp1.setBackground(Color.WHITE);
    jf1.setExtendedState(Frame.MAXIMIZED_BOTH);
    jf1.setLayout(new GridLayout(1,2));
    jf1.setVisible(true);
    jf1.add(new JScrollPane(tree), BorderLayout.WEST);
    jf1.add(jp1);
    jp1.setLayout(null);

  jl0.setBounds(10,1,500,100);  
  jp1.add(jl0);

 jl1.setBounds(55,90,150,100);   
 jt1.setBounds(225,130, 155, 25);

 jp1.add(jl1);
 jp1.add(jt1);

 jl2.setBounds(55,160, 150, 100);
 jt2.setBounds(225,200, 155, 25);

 jp1.add(jl2);
 jp1.add(jt2);

 jl3.setBounds(55,230,150,100);
 jt3.setBounds(225,270, 155, 25);

  jp1.add(jl3);
  jp1.add(jt3);

 jl4.setBounds(55,295, 150, 100);
 jt4.setBounds(225,330, 155, 25);

  jp1.add(jl4); 
  jp1.add(jt4);

  jb1.setEnabled(false);
  jb2.setEnabled(false);

 jb1.setBounds(150,430, 100, 50);
 jb2.setBounds(350,430, 100, 50);

  jp1.add(jb1);
  jp1.add(jb2);

  //-----------------Visible setting stop here--------------------------//

   //------------------- Element actions here------------------------//

    jt1.addFocusListener(new FocusListener() {

            @Override
            public void focusGained(FocusEvent e) 
            {
             jb1.setEnabled(true);
             jb2.setEnabled(true);    
            }

            @Override
            public void focusLost(FocusEvent e) 
            {
                jb1.setEnabled(false);
                jb2.setEnabled(false); 
            }
        });

    //now for the tree

    tree.addTreeSelectionListener(new TreeSelectionListener() {

            @Override
            public void valueChanged(TreeSelectionEvent e) {
                jf1.dispose();
                //jl0.setText("Displaying information About :  "+tree.getLastSelectedPathComponent().toString());
                store7[0]= tree.getLastSelectedPathComponent().toString(); 
                System.out.println("in store 7 of 0"+store7[0]);
                dbaction db = new dbaction(store7[0]);
            }
        }); 

   }
//------------------------------------end of action listening-------------------------

  private DefaultMutableTreeNode processHierarchy(Object[] hierarchy) 
  {
    DefaultMutableTreeNode node = new DefaultMutableTreeNode(hierarchy[0]);DefaultMutableTreeNode child;
    for(int i=1; i<hierarchy.length; i++) 
    {
      Object nodeSpecifier = hierarchy[i];
      if (nodeSpecifier instanceof Object[])  // Ie node with children
        child = processHierarchy((Object[])nodeSpecifier);
      else
        child = new DefaultMutableTreeNode(nodeSpecifier); // Ie Leaf
      node.add(child);
    }
    return(node);
  }

    private void close() 
    {
        try {
            if (resultSet != null) 
                        {
                resultSet.close();
            }
            if (statement != null) 
                        {
                //statement.
            }
            if (connect != null) 
                        {
                connect.close();
            }
        } 
        catch (Exception e3) 
                {
        e3.printStackTrace();
        }
    }
} 
```

当然 dbaction.java 是我连接到数据库并获取详细信息的地方。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T05:02:34.683

最好为树创建数据模型。[如何使用树](http://docs.oracle.com/javase/tutorial/uiswing/components/tree.html)教程有很好的例子。还可以通过[了解 TreeModel](http://java.sun.com/products/jfc/tsc/articles/jtree/)了解更多详细信息。

顺便说一句，不要执行长时间运行的任务，例如在[Event Dispatch Thread](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)上访问数据库。查看[SwingWorker](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingWorker.html)以完成此类任务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T06:08:14.720

Max 链接到的`JTree`教程有一节涵盖[“a 的动态更新`JTree`”](http://docs.oracle.com/javase/tutorial/uiswing/components/tree.html#dynamic)，其中包含有关如何更新 a 的必要片段`TreeModel`。基本思想是更新`JTree`( `TreeModel`) 后面的模型并从`TreeModel`. 将`JTree`监听这些事件并相应地更新自身。

除此之外，还有其他一些建议：

*   You should only access Swing components on the Event Dispatch Thread (EDT), which is currently not the case in your example. See the [Concurrency in Swing](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html) tutorial for more information
*   The moment you adjust your main method to run on the EDT, you should avoid the long running taks (the database access), as it will block the EDT and leave you with an unresponsive UI (as Max already indicated).
*   You should avoid the `null` layout and the manual placing of all your components using `setBounds`. Otherwise simple things like resizing the UI will results in a messed-up layout. Use a `LayoutManager` instead. The usage of `LayoutManager`s is also covered in the ['`LayoutManager` tutorial'](http://docs.oracle.com/javase/tutorial/uiswing/layout/index.html) on the Oracle site.

# android - Android如何让Gallery自动滚动到第一项？

> ID：11515918
> 
> 赞同：1
> 
> 时间：2012-07-17T04:13:30.210
> 
> 标签：android, scroll, gallery

我按照这个主题[自动滚动一个画廊小部件](https://stackoverflow.com/questions/8155245/auto-scroll-a-gallery-widget)来创建一个画廊，每 5 秒从左到右自动滚动一次。这是我的画廊：

```
public class MyBannersGallery extends Gallery {

private Handler handler;

public MyBannersGallery(Context ctx, AttributeSet attrSet) {
    super(ctx, attrSet);
    handler = new Handler();
    postDelayedScrollNext();
}

private void postDelayedScrollNext() {
    handler.postDelayed(new Runnable() {
        public void run() {
            postDelayedScrollNext();
            onKeyDown(KeyEvent.KEYCODE_DPAD_RIGHT, null);
        }
    }, 5000);

}

private boolean isScrollingLeft(MotionEvent e1, MotionEvent e2) {
    return e2.getX() > e1.getX();
}

public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,
        float velocityY) {
    int kEvent;
    if (isScrollingLeft(e1, e2)) {
        kEvent = KeyEvent.KEYCODE_DPAD_LEFT;
    } else {
        kEvent = KeyEvent.KEYCODE_DPAD_RIGHT;
    }
    onKeyDown(kEvent, null);
    return true;
} 
```

}

当它滚动到我的画廊的尽头时，它停止了。现在我想检测我的画廊是否滚动到最后。如果是这样，请向左滚动到第一项。我应该如何编辑我的课程以存档？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T04:33:08.877

Gallery 扩展自 AdapterView，因此您可以使用方法 'getSelectedItemPosition()' 来确定当前图像索引的位置。所以也许这样的事情会起作用？

```
private void postDelayedScrollNext() {
    handler.postDelayed(new Runnable() {
        public void run() {
            // check to see if we are at the image is at the last index, if so set the 
            // selection back to 1st image.
            if (getSelectedItemPosition() == getCount() - 1) {
               setSelection(0);
               postDelayedScrollNext();
               return;
            }
            postDelayedScrollNext();

            onKeyDown(KeyEvent.KEYCODE_DPAD_RIGHT, null);
        }
    }, 5000);

} 
```

当然，这只是一个快速破解。如果你想要画廊很好地滚动回第一个项目的漂亮动画，那么你必须做额外的工作，但想法是一样的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-15T18:56:48.797

这个表格对我有用：

```
public MyBannersGallery(Context context, AttributeSet attrs) {
    super(context, attrs);
    handler = new Handler();
    postDelayedScrollNext(0);
}

private void postDelayedScrollNext(final int position) {
    handler.postDelayed(new Runnable() {
        public void run() {
             if (getSelectedItemPosition() == getCount() - 1) {
               setSelection(0);
               postDelayedScrollNext(0);
               return;
            }
            setSelection(position+1);
            postDelayedScrollNext(position+1);

        }
    }, 4000);

} 
```

# java - javacv中opencv Mat.copyto()方法的等价方法是什么？

> ID：11515920
> 
> 赞同：4
> 
> 时间：2012-07-17T04:13:54.353
> 
> 标签：java, opencv, javacv

我找到了用于识别图像边缘的 opencv 代码示例，我尝试将其转换为 javacv 但我找不到 Mat.copyto() 方法的方法。请有人可以解释一下相等的方法吗？这是示例代码。
[http://docs.opencv.org/doc/tutorials/imgproc/imgtrans/canny_detector/canny_detector.html](http://docs.opencv.org/doc/tutorials/imgproc/imgtrans/canny_detector/canny_detector.html)

```
 Mat src, src_gray;
   Mat dst, detected_edges;

   int edgeThresh = 1;
   int lowThreshold;
   int const max_lowThreshold = 100;
   int ratio = 3;
   int kernel_size = 3;
   char* window_name = "Edge Map";

   void CannyThreshold(int, void*)
   {
     /// Reduce noise with a kernel 3x3
     blur( src_gray, detected_edges, Size(3,3) );

     /// Canny detector
     Canny( detected_edges, detected_edges, lowThreshold, lowThreshold*ratio, kernel_size );

     /// Using Canny's output as a mask, we display our result
     dst = Scalar::all(0);

     src.copyTo( dst, detected_edges);
     imshow( window_name, dst );
    } 
```

这是转换后的方法

```
CvMat src, src_gray;
CvMat dst, detected_edges;

int edgeThresh = 1;
int lowThreshold;
final int max_lowThreshold = 100;
int ratio = 3;
int kernel_size = 3;
String window_name = "Edge Map";
int CannyThreshold()
{
  cvSmooth(src_gray, detected_edges, 3, 3);
  cvCanny( detected_edges, detected_edges, lowThreshold, lowThreshold*ratio, kernel_size );
  cvZero(dst);
  src.copyTo( dst, detected_edges); // *** This line gives compile error
  cvShowImage( window_name, dst );
 } 
```

请有人可以解释 Mat.copyto() 的相等方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T13:17:17.130

在传统的 C API 中，这是`cvCopy(src, dst, detected_edges)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T11:09:44.650

我想这是最相似的：

```
CvMat dst = src.clone(); 
```

# iphone - 更改为其他 UIView 时希望保留缓存数据

> ID：11515923
> 
> 赞同：0
> 
> 时间：2012-07-17T04:14:16.530
> 
> 标签：iphone, xcode, uiview

我很想得到一些帮助或任何我可以用来搜索的关键字。

我的问题是我有一个名为“UpdateViewController.xib”的 UIView，它以编程方式加载 20 个小图像和这些图像下方的文本。当用户单击这些图像时，它将更改为我由 IB 创建的下一个视图，称为“imageSumVuew.xib”，并且我有一个链接回 UpdateViewController 的按钮。

```
#import "imageSumView.h"  // next view that i wanna load//
// the transition to next view
imageSumView *nextView = [[imageSumView alloc]init];
self.modalPresentationStyle = UIModalTransitionStyleCrossDissolve;
[self presentViewController:nextView animated:YES completion:NULL];
[nextView release]; 
```

在 nextView 我有类似的代码回到这个视图

```
#import "UpdateViewController.h"  // old that i wanna load back//
    // the transition to old view
    UpdateViewController *oldView = [[UpdateViewController alloc]init];
    self.modalPresentationStyle = UIModalTransitionStyleCrossDissolve;
    [self presentViewController:oldView animated:YES completion:NULL];
    [oldView release]; 
```

问题是当它确实加载回 UpdateViewController 时，我所有的图像和文本都必须重新加载。

问题是“**我如何保持 UpdateViewController 视图的缓存？** ”，我不希望用户重新加载图像，因为他们必须在此页面之间来回多次查看他们想要选择的图像.

想想 Instragram，你看到你的朋友图像列表然后你想检查你的第一个朋友的照片，然后你回到你朋友的整体图像而不加载并选择第二个朋友。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T05:32:58.873

首次下载后，将具有唯一 ID 的图像数据存储到临时目录。下次在您的目录中检查该用户 ID 的图像，如果存在则从那里加载图像。例如 ：

```
#define TMP NSTemporaryDirectory()
    NSString *filename=[NSMutableString stringWithFormat:@"userimage_%@",userId];

    NSString *uniquePath = [TMP stringByAppendingPathComponent:filename];
    NSData *dataImage = [NSData dataWithContentsOfURL:[NSURL URLWithString:imageUrl]]
    UIImage *image = [[UIImage alloc] initWithData: dataImage];
    [UIImageJPEGRepresentation(image, 1.0f) writeToFile: uniquePath atomically: YES];
    [图片发布]；

```

要获取您的图像，您可以执行以下操作：

```
- (NSData *) getImage: (NSString *)userId
{
    NSString *filename=[NSMutableString stringWithFormat:@"userimage_%@,userId];
    NSString *uniquePath = [TMP stringByAppendingPathComponent: 文件名];

    if([[NSFileManager defaultManager] fileExistsAtPath: uniquePath])
    {
        返回 [[NSData alloc] initWithContentsOfFile:uniquePath];
    }
    返回零；
 }

```

# javascript - 动态访问 Javascript 变量

> ID：11515924
> 
> 赞同：1
> 
> 时间：2012-07-17T04:14:25.030
> 
> 标签：javascript

我知道你可能认为这是一个重复或愚蠢的问题。但答案对我没有帮助。

这是我的简单问题：

```
var option1 = "some text";
var option2 = "some text";
var option3 = "some text"; 
```

我想在 for 循环中访问元素“option1、option2、option3”：

```
for(var i = 1; i < 4; i++)
{
    alert(option+i);   
} 
```

我知道它不应该是 option+i 但我不知道如何解决这个问题。

我在这里先向您的帮助表示感谢。

如果您发现这是重复的，请标记此问题。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T04:17:26.317

如果它们是`window`范围内的变量，那么您可以访问`window['option'+i]`. 但是，你真的应该只使用一个数组：

```
var option = [
    "some text",
    "option 2",
    "option 3"
];
for( var i=0; i<3; i++) alert(option[i]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T04:19:59.420

尝试这个：

```
var option1 = "some text";
var option2 = "some text";
var option3 = "some text";

for(var i = 1; i < 4; i++)
{
 alert(eval('option'+i) + '\n');
} 
```

如果您尝试使用数组或通过`window`Kolink 发布的方式访问它，那就更好了。如果你确实使用`eval`了，请确保没有任何不受你控制的东西被认为是`eval`安全风险。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T04:22:02.403

请试试这个：

```
 option = new Array();
    option[1] = "some text";
    option[2] = "some text";
    option[3] = "some text";
    for(var i = 1; i < 4; i++)
    {
        alert(option[i]);   
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T04:17:17.430

将循环更改为如下所示：

```
for(var i = 1; i < 4; i++)
{
    alert(eval("option"+i));   
} 
```

如果您有任何问题，请告诉我

# c++ - C++：字符串运算符重载

> ID：11515925
> 
> 赞同：4
> 
> 时间：2012-07-17T04:14:25.683
> 
> 标签：c++, operator-overloading, c++-standard-library

我可以重载现有类中的现有函数/运算符吗？

我试图做：

```
#include <iostream>
#include <string>
using namespace std;

string& string::operator<<(const string& str) {
  this->append(str);
} 
```

但这给了我错误：

```
test.cpp:5: error: too few template-parameter-lists 
```

我怎样才能做到这一点？还是我不能？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-17T04:16:22.960

除非您修改该类的定义，否则您不能将成员函数添加到该类。改用自由函数：

```
string& operator<<(string & lhs, const string & rhs) {
    return lhs += rhs;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T05:07:41.690

我遵从本杰明关于在`string`对象上创建类流接口的回答。但是，您可以使用 a`stringstream`代替。

```
#include <sstream>

std::istringstream ss;
ss << anything_you_want;

std::string s = ss.str(); // get the resulting string
ss.str(std::string());    // clear the string buffer in the stringstream. 
```

这为您提供了您想要的类似流的界面，`string`而无需定义新功能。

此技术通常可用于扩展`string`. 也就是说，定义一个提供扩展功能的包装类，并且该包装类还提供对底层`string`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-27T14:02:57.393

利用

> std::ostringstream

```
#include <sstream>
#include <iostream>

using namespace std;

int main()
{
    std::ostringstream ss;
    ss << "Hello" << " " << "world";

    std::string s = ss.str(); 
    ss.str(std::string()); 

    cout << s << endl;
    return 0;
} 
```

[https://onlinegdb.com/rkanzeniI](https://onlinegdb.com/rkanzeniI)

# objective-c - __block 属性声明

> ID：11515926
> 
> 赞同：4
> 
> 时间：2012-07-17T04:14:37.387
> 
> 标签：objective-c, ios, gcc, llvm, llvm-gcc

我必须修复一些使用 LLVM（在 iOS 上）构建得很好的现有代码，以便它也可以使用 llvm-gcc-4.2 构建。我已经完成了几乎所有的事情，除了在几个地方发现的这种模式：

```
@property (nonatomic, retain) __block id myProperty; 
```

我怀疑这里的意图是允许从块内部访问该属性而不保留`self`. 如何删除`__block`gcc 此处不支持的属性，但仍能达到相同的效果？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-17T05:19:24.740

我建议你发现了一个编译器错误，即声明：

```
@property (nonatomic, retain) __block id myProperty; 
```

是没有意义的。限定符用于本地（堆栈分配）变量，`__block`因此它们通过引用传递给块，因此可以更新它们，并且通常[*]存储在堆上而不是堆栈上。

因此，限定符`__block`在与对象实例有关的属性声明上没有任何意义，这些对象实例在 Obj-C 中始终是堆分配的。

只需`__block`从属性声明中删除 - 对于每个编译器。

[*] 如果一个块从未被复制到堆中，编译器可能会优化 __block 变量并且也不会将它们移动到堆中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-17T04:17:42.960

在块中使用变量之前，创建一个类型为 的本地指针`__block`。永远不要`__block`在`@property`声明中使用。

例如：`TypeOfVariable __block *bock_pointer = self.property;`

`^{ inside the block use bock_pointer }`

# jquery-mobile - 使用 base64 进行照片滑动，图像

> ID：11515927
> 
> 赞同：1
> 
> 时间：2012-07-17T04:15:01.630
> 
> 标签：jquery-mobile, cordova, photoswipe

我正在使用 Phonegap (Cordova-1.9.0) 和 jQuery Mobile 1.0.1 开发一个 iPad 应用程序。我需要为我的应用程序使用图片库。在我的应用程序中。我找到了照片滑动图片库。我从 iPad 相机捕获图像并保存为 Camera.DestinationType.DATA_URL (Phonegap api)。我的 imagea 保存为 base64，类型。

当我将图像保存为 Camera.DestinationType.FILE_URI 时，Photoswipe 图像库工作正常。

但我的问题是我如何使用 Camera.DestinationType.DATA_URL 使用 photoswipe 画廊？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-17T07:39:10.180

我找到了类似问题的解决方案。

我在网页中使用带有 base64 的 photoSwipe，它是这样工作的：

```
<li><a href="data:image/png;base64,<c:out value='${entry.imagenString}'/>"><img src="data:image/png;base64,<c:out value='${entry.imagenString}'/>"></a></li> 
```

在 href 和 src 属性中，我将 base64 字符串与表示法表示为 base64。

我会尝试在 Phonegap 中使用它，但我认为那必须是相同的代码。

编辑：我在 Phonegap 中对其进行了测试，并且可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-04T04:58:21.570

我用这个：

```
var imagesArray = data.callback.include.images;
    // images : 
    if(imagesArray && imagesArray.length > 0  && imagesArray != null && imagesArray != undefined){
        var images = imagesArray.map((item)=>{
            var link = item.trim();
            var base = link.split('base64,');
            var a = base[0];
            var b = base[1];
            return `<figure itemprop="associatedMedia" itemscope itemtype="http://schema.org/ImageObject">
                <a href=${a}base64,${b} itemprop="contentUrl" data-size="1024x1024">
                    <img src=${a}base64,${b} itemprop="thumbnail" alt="Image description" />
                </a>
                <figcaption itemprop="caption description">CAPTION :</figcaption>                   
            </figure>`
        })
        // building the gallery : 
        var now = new Date().getTime();
        var galleryClassName = "gal-" + shareId + "-" + commentId + "-" + now;
        var gallery = `<div class="comments-gallery ${galleryClassName} gallery" itemscope itemtype="http://schema.org/ImageGallery">
                         ${images}      
                    </div>`;
    }else { gallery = "" } 
```

然后包括画廊变量，然后通过调用它的类来初始化它

```
var output = `<div class="row"> ${gallery} </div>`;
 // init gallerires : 
        initPhotoSwipeFromDOM("." + galleryClassName); 
```

# javascript - 使用按钮访问 parentNode

> ID：11515928
> 
> 赞同：0
> 
> 时间：2012-07-17T04:15:06.077
> 
> 标签：javascript, html

我正在尝试访问按钮元素（div）的 parentNode，但每次都会出错。这是我想要做的。简单地说，这是一个有 2 个 div 的页面。我只希望一次显示一个 div。第一个页面上有一个按钮可以切换到第二个页面，第二个页面上有一个按钮应该返回到第一个页面（但没有，因为它无法找到 parentNode）。

```
 <div class="pageContent" id="page_3">
            <div class="primaryPage" id="primaryPage_3">
                <h2>Bills_______________________</h2>
                <p>Here are my monthly Bills<br><br>blah blah</p>
                <button type="button" id="billButton" onclick="newBill()">Add Bill</button>
            </div>
            <div class="pageContent" id="billPage">
                <p>this is the bill page</p>
                <button class="backButton" onclick="back()">Back</button>
            </div>
        </div>

function newBill(){
document.getElementById("primaryPage_3").style.display = "none";
document.getElementById("billPage").style.display = "block";
document.getElementById("billPage").setAttribute("back", "primaryPage_3");
}

function back(){
var previousPage = this.parentNode.getAttribute("back");
this.parentNode.style.display = "none";    
document.getElementById(previousPage).style.display = "block";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T04:16:24.510

改变这个...

```
onclick="back()" 
```

对这个...

```
onclick="back.call(this)" 
```

* * *

调用函数 using`.call()`允许您手动设置被调用函数的调用上下文*（`this`值）*。在这里它将它设置为当前元素。

# objective-c - 点击时使 UIViewController 成为 UIImagePicker

> ID：11515932
> 
> 赞同：1
> 
> 时间：2012-07-17T04:15:43.900
> 
> 标签：objective-c, ios, uiimagepickercontroller, uitabbar

我有一个使用 的应用程序，`UITabBarController`其中一个选项卡应该是完整的相机视图（类似于 Instagram）。当我启动应用程序并转到该视图时，大部分屏幕都是空白的，并且没有加载图像库选择器/相机视图。任何帮助将不胜感激。

这是我的`viewDidLoad`方法：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.

    imagePicker = [[UIImagePickerController alloc] init];

    if([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera]) {
        [imagePicker setSourceType:UIImagePickerControllerSourceTypeCamera];
    } else {
        [imagePicker setSourceType:UIImagePickerControllerSourceTypePhotoLibrary];
    }

    [imagePicker setDelegate:self];

    [imagePicker setEditing:NO];

    // Place image picker (camera viewing angle on the screen)
    [self presentViewController:imagePicker animated:YES completion:nil];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T04:52:52.297

尝试将该代码放在 viewDidAppear 中——这对我有用。更好的是，将除最后一行之外的所有内容都放在 viewDidLoad 中，因此它只调用一次，然后将最后一行放在 viewDidAppear 方法中。当您取消图像选择器（我测试的唯一东西）时，它会重新出现，因为 viewDidAppear 将再次被调用，因此您需要像这样实现 imagePickerControllerDidCancel: 以防止这种情况发生：

```
- (void)imagePickerControllerDidCancel:(UIImagePickerController *)picker {
    [self dismissViewControllerAnimated:YES completion:nil];
    self.imagePicker = nil;
} 
```

并且，在您的 viewDidAppear 中，放入 if 语句以查看选择器是否存在，然后再尝试显示它：

```
if (self.imagePicker) {
    [self presentViewController:self.imagePicker animated:YES completion:nil];
    } 
```

# android - AsyncTaskLoader onLoadFinished 有一个挂起的任务和配置更改

> ID：11515934
> 
> 赞同：24
> 
> 时间：2012-07-17T04:15:59.850
> 
> 标签：android, android-loadermanager, asynctaskloader, android-loader

我正在尝试使用`AsyncTaskLoader`在后台加载数据来填充详细视图以响应选择的列表项。我已经让它大部分工作了，但我仍然有一个问题。*如果我在列表中选择第二个项目，然后在第一个选定项目的加载完成之前*旋转设备，那么`onLoadFinished()`调用将报告正在停止的活动而不是新活动。当只选择一个项目然后旋转时，这很好用。

这是我正在使用的代码。活动：

```
public final class DemoActivity extends Activity
        implements NumberListFragment.RowTappedListener,
                   LoaderManager.LoaderCallbacks<String> {

    private static final AtomicInteger activityCounter = new AtomicInteger(0);

    private int myActivityId;

    private ResultFragment resultFragment;

    private Integer selectedNumber;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        myActivityId = activityCounter.incrementAndGet();
        Log.d("DemoActivity", "onCreate for " + myActivityId);

        setContentView(R.layout.demo);

        resultFragment = (ResultFragment) getFragmentManager().findFragmentById(R.id.result_fragment);

        getLoaderManager().initLoader(0, null, this);

    }

    @Override
    protected void onDestroy() {
        super.onDestroy();
        Log.d("DemoActivity", "onDestroy for " + myActivityId);
    }

    @Override
    public void onRowTapped(Integer number) {
        selectedNumber = number;
        resultFragment.setResultText("Fetching details for item " + number + "...");
        getLoaderManager().restartLoader(0, null, this);
    }

    @Override
    public Loader<String> onCreateLoader(int id, Bundle args) {
        return new ResultLoader(this, selectedNumber);
    }

    @Override
    public void onLoadFinished(Loader<String> loader, String data) {
        Log.d("DemoActivity", "onLoadFinished reporting to activity " + myActivityId);
        resultFragment.setResultText(data);
    }

    @Override
    public void onLoaderReset(Loader<String> loader) {

    }

    static final class ResultLoader extends AsyncTaskLoader<String> {

        private static final Random random = new Random();

        private final Integer number;

        private String result;

        ResultLoader(Context context, Integer number) {
            super(context);
            this.number = number;
        }

        @Override
        public String loadInBackground() {
            // Simulate expensive Web call
            try {
                Thread.sleep(5000);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }

            return "Item " + number + " - Price: $" + random.nextInt(500) + ".00, Number in stock: " + random.nextInt(10000);
        }

        @Override
        public void deliverResult(String data) {
            if (isReset()) {
                // An async query came in while the loader is stopped
                return;
            }

            result = data;

            if (isStarted()) {
                super.deliverResult(data);
            }
        }

        @Override
        protected void onStartLoading() {
            if (result != null) {
                deliverResult(result);
            }

            // Only do a load if we have a source to load from
            if (number != null) {
                forceLoad();
            }
        }

        @Override
        protected void onStopLoading() {
            // Attempt to cancel the current load task if possible.
            cancelLoad();
        }

        @Override
        protected void onReset() {
            super.onReset();

            // Ensure the loader is stopped
            onStopLoading();

            result = null;
        }

    }

} 
```

列表片段：

```
public final class NumberListFragment extends ListFragment {

    interface RowTappedListener {

        void onRowTapped(Integer number);

    }

    private RowTappedListener rowTappedListener;

    @Override
    public void onAttach(Activity activity) {
        super.onAttach(activity);

        rowTappedListener = (RowTappedListener) activity;
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);

        ArrayAdapter<Integer> adapter = new ArrayAdapter<Integer>(getActivity(),
                                                                  R.layout.simple_list_item_1,
                                                                  Arrays.asList(1, 2, 3, 4, 5, 6));
        setListAdapter(adapter);

    }

    @Override
    public void onListItemClick(ListView l, View v, int position, long id) {
        ArrayAdapter<Integer> adapter = (ArrayAdapter<Integer>) getListAdapter();
        rowTappedListener.onRowTapped(adapter.getItem(position));
    }

} 
```

结果片段：

```
public final class ResultFragment extends Fragment {

    private TextView resultLabel;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View root = inflater.inflate(R.layout.result_fragment, container, false);

        resultLabel = (TextView) root.findViewById(R.id.result_label);
        if (savedInstanceState != null) {
            resultLabel.setText(savedInstanceState.getString("labelText", ""));
        }

        return root;
    }

    @Override
    public void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);

        outState.putString("labelText", resultLabel.getText().toString());
    }

    void setResultText(String resultText) {
        resultLabel.setText(resultText);
    }

} 
```

我已经能够使用普通`AsyncTask`的 s 来完成这项工作，但我正在尝试了解更多关于`Loader`s 的信息，因为它们会自动处理配置更改。

* * *

**编辑**：我想我可能已经通过查看[LoaderManager](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.3_r1/android/app/LoaderManager.java?av=f#552)的来源找到了问题。当`initLoader`在配置更改后调用时，`LoaderInfo`对象的`mCallbacks`字段更新为新活动作为 的实现`LoaderCallbacks`，正如我所期望的那样。

```
public <D> Loader<D> initLoader(int id, Bundle args, LoaderManager.LoaderCallbacks<D> callback) {
    if (mCreatingLoader) {
        throw new IllegalStateException("Called while creating a loader");
    }

    LoaderInfo info = mLoaders.get(id);

    if (DEBUG) Log.v(TAG, "initLoader in " + this + ": args=" + args);

    if (info == null) {
        // Loader doesn't already exist; create.
        info = createAndInstallLoader(id, args,  (LoaderManager.LoaderCallbacks<Object>)callback);
        if (DEBUG) Log.v(TAG, "  Created new loader " + info);
    } else {
        if (DEBUG) Log.v(TAG, "  Re-using existing loader " + info);
        info.mCallbacks = (LoaderManager.LoaderCallbacks<Object>)callback;
    }

    if (info.mHaveData && mStarted) {
        // If the loader has already generated its data, report it now.
        info.callOnLoadFinished(info.mLoader, info.mData);
    }

    return (Loader<D>)info.mLoader;
} 
```

但是，当有一个挂起的加载器时，主`LoaderInfo`对象也有`mPendingLoader`一个引用 a 的字段`LoaderCallbacks`，并且这个对象永远不会随着`mCallbacks`字段中的新活动而更新。我希望看到代码看起来像这样：

```
// This line was already there
info.mCallbacks = (LoaderManager.LoaderCallbacks<Object>)callback;
// This line is not currently there
info.mPendingLoader.mCallbacks = (LoaderManager.LoaderCallbacks<Object>)callback; 
```

似乎正因为如此，挂起的加载程序调用`onLoadFinished`了旧的活动实例。如果我在此方法中设置断点并使用调试器进行我觉得缺少的调用，那么一切都会按我的预期工作。

新问题是：我是否发现了错误，或者这是预期的行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T13:59:12.100

在大多数情况下，如果 Activity 已经被销毁，您应该忽略此类报告。

```
public void onLoadFinished(Loader<String> loader, String data) {
    Log.d("DemoActivity", "onLoadFinished reporting to activity " + myActivityId);
    if (isDestroyed()) {
       Log.i("DemoActivity", "Activity already destroyed, report ignored: " + data);
       return;
    }
    resultFragment.setResultText(data);
} 
```

`isDestroyed()`此外，您应该在任何内部类中插入检查。Runnable - 是最常用的情况。

例如：

```
// UI thread
final Handler handler = new Handler();
Executor someExecutorService = ... ;
someExecutorService.execute(new Runnable() {
    public void run() {
        // some heavy operations
        ...
        // notification to UI thread
        handler.post(new Runnable() {
            // this runnable can link to 'dead' activity or any outer instance
            if (isDestroyed()) {
                return;
            }

            // we are alive
            onSomeHeavyOperationFinished();
        });
    }
}); 
```

但在这种情况下**，最好的方法是避免将 Activity 上的强引用传递给另一个线程**（AsynkTask、Loader、Executor 等）。

最可靠的解决方案在这里：

```
// BackgroundExecutor.java
public class BackgroundExecutor {
    private static final Executor instance = Executors.newSingleThreadExecutor();

    public static void execute(Runnable command) {
        instance.execute(command);
    }
}

// MyActivity.java
public class MyActivity extends Activity {
    // Some callback method from any button you want
    public void onSomeButtonClicked() {
        // Show toast or progress bar if needed

        // Start your heavy operation
        BackgroundExecutor.execute(new SomeHeavyOperation(this));
    }

    public void onSomeHeavyOperationFinished() {
        if (isDestroyed()) {
            return;
        }

        // Hide progress bar, update UI
    }
}

// SomeHeavyOperation.java
public class SomeHeavyOperation implements Runnable {
    private final WeakReference<MyActivity> ref;

    public SomeHeavyOperation(MyActivity owner) {
        // Unlike inner class we do not store strong reference to Activity here
        this.ref = new WeakReference<MyActivity>(owner);
    }

    public void run() {
        // Perform your heavy operation
        // ...
        // Done!

        // It's time to notify Activity
        final MyActivity owner = ref.get();
        // Already died reference
        if (owner == null) return;

        // Perform notification in UI thread
        owner.runOnUiThread(new Runnable() {
            public void run() {
                owner.onSomeHeavyOperationFinished();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T16:34:35.693

也许不是最好的解决方案，但是......这个代码每次都重新启动加载器，这很糟糕，但只有解决这个问题 - 如果你想使用加载器。

```
Loader l = getLoaderManager().getLoader(MY_LOADER);
if (l != null) {
    getLoaderManager().restartLoader(MY_LOADER, null, this);
} else {
    getLoaderManager().initLoader(MY_LOADER, null, this);
} 
```

顺便提一句。我正在使用 Cursorloader ...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-08T13:59:15.667

一种可能的解决方案是在自定义单例对象中启动 AsyncTask，并从您的 Activity 中的单例访问 onFinished() 结果。每次旋转屏幕时，执行 onPause() 或 onResume()，都会使用/访问最新的结果。如果您的单例对象中仍然没有结果，则您知道它仍然很忙，或者您可以重新启动任务。

另一种方法是使用像 Otto 这样的服务总线，或者使用 Service。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-09-09T07:37:29.320

好的，如果我误解了任何内容，我正在努力理解这一点，但是当设备旋转时，您会丢失对某些内容的引用。

来一刀...

会添加

```
android:configChanges="orientation|keyboardHidden|screenSize" 
```

在该活动的清单中修复您的错误？或阻止`onLoadFinished()`说活动停止？

# jquery - Jquery hide() 函数在页面加载时显示

> ID：11515935
> 
> 赞同：2
> 
> 时间：2012-07-17T04:16:10.077
> 
> 标签：jquery

场景：我有一个包含多个 DIV 的页面。一些 DIV 应该在第一页加载时隐藏。我使用了 Jquery hide() 函数来隐藏 DIV。

问题：由于某种原因，jquery 隐藏功能似乎只部分工作，即需要完全隐藏的 DIV 显示一秒钟并隐藏。

请问有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-17T04:18:29.190

在 DOM 准备好之前，您的 javascript 不会被执行（您不能隐藏尚不存在的元素），因此浏览器会呈现它然后隐藏它。根据您的浏览器的速度以及您的代码的效率，您可能会或可能不会注意到它。

一个更好的解决方案是使用 css 隐藏加载元素。

```
#elementId { display:none; } 
```

您可以将此规则包含在样式标签中以及其余的 CSS 中。如果您有许多要隐藏/显示的元素，请给它们一个通用的类名；然后您可以一次切换它们的可见性。的CSS将是：

```
.commonClassName { display:none; } 
```

然后在您的 jQuery 中，您可以调用`.show()`以显示它们，或`.toggle()`打开/关闭它们的可见性。jQuery 类选择器与 CSS 选择器相同：

```
$('.commonClassName').show(); 
```

**注意：**您也可以使用 html 样式属性进行样式更改： `style="display:none;"`但是，由于我在评论中概述的原因，这通常不是采用的路线。

# scala - <% 运算符在 Scala 泛型中是什么意思？

> ID：11515940
> 
> 赞同：6
> 
> 时间：2012-07-17T04:16:34.843
> 
> 标签：scala, generics, specs2

在 specs2 中有一个名为 Around 的方法，[在此处记录](http://etorreborre.github.com/specs2/guide/org.specs2.guide.Structure.html#Around)，其中包含以下示例：

```
object http extends Around {
  def around[T <% Result](t: =>T) = openHttpSession("test") {
    t  // execute t inside a http session
  }
} 
```

可以在[此处](https://github.com/etorreborre/specs2/blob/1.11/src/main/scala/org/specs2/specification/Around.scala)找到此代码的源代码。

我很好奇 <% 运算符在这种情况下的含义是什么？

**编辑：**这是关于这个主题的可靠答案，[什么是 Scala 上下文和视图边界？](https://stackoverflow.com/questions/4465948/what-are-scala-context-and-view-bounds)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T06:15:28.633

这是一个视图绑定。这意味着， type`T`必须可转换为 type `Result`。有关类型边界的更多信息，我建议您[http://www.cs.uwaterloo.ca/~brecht/courses/702/Possible-Readings/scala/ProgrammingInScala.pdf](http://www.cs.uwaterloo.ca/~brecht/courses/702/Possible-Readings/scala/ProgrammingInScala.pdf)，从第 61 页开始。

# haskell - 导入例外

> ID：11515942
> 
> 赞同：-1
> 
> 时间：2012-07-17T04:17:00.357
> 
> 标签：haskell

这是我的“在元组程序列表中搜索”：

```
 import Data.List
   import Data.Char
   data BookInfo = Book Int String [String]
      deriving(Show)

   enter :: Int->String->[String]->BookInfo
   enter id name subject=Book id name subject
   bookId   (Book id _     _  ) = id
   index :: BookInfo -> Int
   index (Book id name subject) =  bookId  (Book id name subject) 
        arrayentering book bookList
         | empty book = bookList
         | otherwise  = book : bookList
         where
         empty (Book _ name subject) = all isSpace name && all (all isSpace) subject
         bubbleSort::(Ord t) => [t]->[t]
         bubbleSort[x,y,z,xs]=
                if x<y then x : [y,z,xs]
                       else y : [x,z,xs]
         superBubble::(Ord t) =>[[t]]->[[t]]
         superBubble a=map bubbleSort a
         combining::[BookInfo]->[[Int]]
         combining books=superBubble [(map index books)] 

          bsearch :: [[a]]-> a -> a -> Int 
          bsearch ms key s  

                  | elemtIndex m ms = s  return 9999
                  |
                    key=m  elemIndex m ms
                  |
                    key<m  bsearch (splitAt ms o) key o 
                   | otherwise bsearch (splitAt ms (o+2) ) key n  
                  o<-s/2-1
                  n<-length ms
         finalBsearch::(Ord)=> [a]->a->a->Int
         finalBsearch ms key s= bsearch  (combining ms) key s 
```

尝试编译它会导致错误： `ERROR line 2 - Syntax error in input (unexpected keyword "import")`.

这是什么意思，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T05:31:44.290

你是这样缩进第二行的吗？

```
import Data.List
 import Data.Char 
```

如果是这样，解析器会认为有 1 个语句而不是 2 个语句。

# android - 为什么我的自定义对话框不能自动关闭？

> ID：11515943
> 
> 赞同：-1
> 
> 时间：2012-07-17T04:16:59.093
> 
> 标签：android, dialog

我定义了一个 CustomDialog 类如下：

```
public class CustomDialog {
    Dialog dialog;
    public void show(Contex contex, int duration){
        Handler timeHandler = new Handler(){
    @Override
    public void handleMessage(Message msg) {
    switch (msg.what) {
    case 1:
    dialog.dismiss();
    break;
    default:
    break;
    }               
    };
       dialog = new dialog(contex);
       dialog.show();
       Message message = new Message();
   message.what = 1 ;
   timeHandler.sendMessageDelayed(message, duration);
    }
} 
```

在Activity中，我新建了一个CustomDialog对象，调用了show()方法，但是对话框不能自动关闭，谁能告诉我为什么？活动中的代码：

```
CustomDialog myDialog = new CustomDialog();
myDialog.show(this,2000); 
```

它不起作用。它是创建自定义对话框的正式方式吗？如果不是，谁能告诉我创建一个的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T05:04:05.177

```
Try this:

    public class CustomDialog {
        Dialog dialog;
        public void show(Contex contex, int duration){
            Handler timeHandler = new Handler(){
        @Override
        public void handleMessage(Message msg) {
        switch (msg.what) {
        case 1:
        dismiss();
        break;
        default:
        break;
        }               
        };
           dialog = new dialog(contex);
           dialog.show();Timer timer = new Timer();
Timer timer=new Timer(); 
   timer.schedule(new TimerTask() {
        @Override
        public void run() {
        //dismiss the dialog here
        dialog.dismiss();
        }
    }, duration);

        }
    } 
```

# python - 如何在 Python 中使用多处理队列？

> ID：11515944
> 
> 赞同：130
> 
> 时间：2012-07-17T04:17:08.710
> 
> 标签：python, multithreading, multiprocessing

我在尝试理解多处理队列在 python 上的工作方式以及如何实现它时遇到了很多麻烦。假设我有两个从共享文件访问数据的 python 模块，我们将这两个模块称为写入器和读取器。我的计划是让读取器和写入器都将请求放入两个单独的多处理队列中，然后让第三个进程在循环中弹出这些请求并按此执行。

我的主要问题是我真的不知道如何正确实现 multiprocessing.queue，你不能真正为每个进程实例化对象，因为它们将是单独的队列，你如何确保所有进程都与共享队列相关（或在这种情况下，排队）

* * *

## 回答 #1

> 赞同：158
> 
> 时间：2012-07-17T05:18:04.190

> 我的主要问题是我真的不知道如何正确实现 multiprocessing.queue，你不能真正为每个进程实例化对象，因为它们将是单独的队列，你如何确保所有进程都与共享队列相关（或在这种情况下，排队）

这是一个读取器和写入器共享单个队列的简单示例……写入器向读取器发送一堆整数；当写入器用完数字时，它会发送“DONE”，让读取器知道要跳出读取循环。

您可以根据需要生成任意数量的阅读器进程...

```
from multiprocessing import Process, Queue
import time
import sys

def reader_proc(queue):
    """Read from the queue; this spawns as a separate Process"""
    while True:
        msg = queue.get()  # Read from the queue and do nothing
        if msg == "DONE":
            break

def writer(count, num_of_reader_procs, queue):
    """Write integers into the queue.  A reader_proc() will read them from the queue"""
    for ii in range(0, count):
        queue.put(ii)  # Put 'count' numbers into queue

    ### Tell all readers to stop...
    for ii in range(0, num_of_reader_procs):
        queue.put("DONE")

def start_reader_procs(qq, num_of_reader_procs):
    """Start the reader processes and return all in a list to the caller"""
    all_reader_procs = list()
    for ii in range(0, num_of_reader_procs):
        ### reader_p() reads from qq as a separate process...
        ###    you can spawn as many reader_p() as you like
        ###    however, there is usually a point of diminishing returns
        reader_p = Process(target=reader_proc, args=((qq),))
        reader_p.daemon = True
        reader_p.start()  # Launch reader_p() as another proc

        all_reader_procs.append(reader_p)

    return all_reader_procs

if __name__ == "__main__":
    num_of_reader_procs = 2
    qq = Queue()  # writer() writes to qq from _this_ process
    for count in [10**4, 10**5, 10**6]:
        assert num_of_reader_procs > 0
        assert num_of_reader_procs < 4
        all_reader_procs = start_reader_procs(qq, num_of_reader_procs)

        writer(count, len(all_reader_procs), qq)  # Queue stuff to all reader_p()
        print("All reader processes are pulling numbers from the queue...")

        _start = time.time()
        for idx, a_reader_proc in enumerate(all_reader_procs):
            print("    Waiting for reader_p.join() index %s" % idx)
            a_reader_proc.join()  # Wait for a_reader_proc() to finish

            print("        reader_p() idx:%s is done" % idx)

        print(
            "Sending {0} integers through Queue() took {1} seconds".format(
                count, (time.time() - _start)
            )
        )
        print("") 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2019-07-22T06:07:57.330

这是一个非常简单的用法，`multiprocessing.Queue`它`multiprocessing.Process`允许调用者将“事件”加上参数发送到单独的进程，该进程将事件分派到进程上的“do_”方法。(Python 3.4+)

```
import multiprocessing as mp
import collections

Msg = collections.namedtuple('Msg', ['event', 'args'])

class BaseProcess(mp.Process):
    """A process backed by an internal queue for simple one-way message passing.
    """
    def __init__(self, *args, **kwargs):
        super().__init__(*args, **kwargs)
        self.queue = mp.Queue()

    def send(self, event, *args):
        """Puts the event and args as a `Msg` on the queue
        """
       msg = Msg(event, args)
       self.queue.put(msg)

    def dispatch(self, msg):
        event, args = msg

        handler = getattr(self, "do_%s" % event, None)
        if not handler:
            raise NotImplementedError("Process has no handler for [%s]" % event)

        handler(*args)

    def run(self):
        while True:
            msg = self.queue.get()
            self.dispatch(msg) 
```

用法：

```
class MyProcess(BaseProcess):
    def do_helloworld(self, arg1, arg2):
        print(arg1, arg2)

if __name__ == "__main__":
    process = MyProcess()
    process.start()
    process.send('helloworld', 'hello', 'world') 
```

`send`发生在父进程中，发生`do_*`在子进程中。

我省略了任何明显会中断运行循环并退出子进程的异常处理。您还可以通过覆盖`run`来控制阻塞或其他任何东西来自定义它。

这实际上仅在您有一个工作进程的情况下有用，但我认为这是对这个问题的相关答案，以展示一个具有更多面向对象的常见场景。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2020-08-03T17:20:51.030

我查看了堆栈溢出和网络上的多个答案，同时尝试设置一种使用队列传递大型熊猫数据帧的多处理方式。在我看来，每个答案都在重复相同类型的解决方案，而没有考虑在设置此类计算时肯定会遇到的大量边缘情况。问题是同时有很多事情在起作用。任务数量、worker 数量、每个任务的持续时间以及任务执行过程中可能出现的异常。所有这些都使同步变得棘手，并且大多数答案都没有解决您如何进行同步。所以这是我摆弄了几个小时后的看法，希望这对大多数人来说足够通用，觉得它很有用。

在任何编码示例之前的一些想法。由于`queue.Empty`or`queue.qsize()`或任何其他类似的方法对于流量控制是不可靠的，因此任何类似的代码

```
while True:
    try:
        task = pending_queue.get_nowait()
    except queue.Empty:
        break 
```

是假的。即使几毫秒后队列中出现另一个任务，这也会杀死工作人员。工人不会恢复，一段时间后所有工人都会消失，因为他们随机发现队列暂时空了。最终结果将是主要的多处理函数（进程上带有 join() 的那个）将在所有任务未完成的情况下返回。好的。如果您有数千个任务并且缺少一些任务，那么祝您调试好运。

另一个问题是哨兵值的使用。许多人建议在队列中添加一个哨兵值来标记队列的末尾。但是到底要向谁标记呢？如果有 N 个工作人员，假设 N 是可用的核数，则单个哨兵值只会将队列的末尾标记给一个工作人员。当没有剩余工作时，所有其他工人将坐等更多工作。我见过的典型例子是

```
while True:
    task = pending_queue.get()
    if task == SOME_SENTINEL_VALUE:
        break 
```

一名工作人员将获得哨兵值，而其余工作人员将无限期等待。我遇到的任何帖子都没有提到您需要将哨兵值提交到队列中的次数至少与您拥有工人的次数一样多，以便所有人都能得到它。

另一个问题是任务执行期间的异常处理。同样，这些应该被捕获和管理。此外，如果您有一个`completed_tasks`队列，您应该在决定工作完成之前以确定的方式独立计算队列中有多少项目。再次依赖队列大小必然会失败并返回意外结果。

在下面的示例中，该`par_proc()`函数将接收一个任务列表，其中包括应与任何命名参数和值一起执行这些任务的函数。

```
import multiprocessing as mp
import dill as pickle
import queue
import time
import psutil

SENTINEL = None

def do_work(tasks_pending, tasks_completed):
    # Get the current worker's name
    worker_name = mp.current_process().name

    while True:
        try:
            task = tasks_pending.get_nowait()
        except queue.Empty:
            print(worker_name + ' found an empty queue. Sleeping for a while before checking again...')
            time.sleep(0.01)
        else:
            try:
                if task == SENTINEL:
                    print(worker_name + ' no more work left to be done. Exiting...')
                    break

                print(worker_name + ' received some work... ')
                time_start = time.perf_counter()
                work_func = pickle.loads(task['func'])
                result = work_func(**task['task'])
                tasks_completed.put({work_func.__name__: result})
                time_end = time.perf_counter() - time_start
                print(worker_name + ' done in {} seconds'.format(round(time_end, 5)))
            except Exception as e:
                print(worker_name + ' task failed. ' + str(e))
                tasks_completed.put({work_func.__name__: None})

def par_proc(job_list, num_cpus=None):

    # Get the number of cores
    if not num_cpus:
        num_cpus = psutil.cpu_count(logical=False)

    print('* Parallel processing')
    print('* Running on {} cores'.format(num_cpus))

    # Set-up the queues for sending and receiving data to/from the workers
    tasks_pending = mp.Queue()
    tasks_completed = mp.Queue()

    # Gather processes and results here
    processes = []
    results = []

    # Count tasks
    num_tasks = 0

    # Add the tasks to the queue
    for job in job_list:
        for task in job['tasks']:
            expanded_job = {}
            num_tasks = num_tasks + 1
            expanded_job.update({'func': pickle.dumps(job['func'])})
            expanded_job.update({'task': task})
            tasks_pending.put(expanded_job)

    # Use as many workers as there are cores (usually chokes the system so better use less)
    num_workers = num_cpus

    # We need as many sentinels as there are worker processes so that ALL processes exit when there is no more
    # work left to be done.
    for c in range(num_workers):
        tasks_pending.put(SENTINEL)

    print('* Number of tasks: {}'.format(num_tasks))

    # Set-up and start the workers
    for c in range(num_workers):
        p = mp.Process(target=do_work, args=(tasks_pending, tasks_completed))
        p.name = 'worker' + str(c)
        processes.append(p)
        p.start()

    # Gather the results
    completed_tasks_counter = 0
    while completed_tasks_counter < num_tasks:
        results.append(tasks_completed.get())
        completed_tasks_counter = completed_tasks_counter + 1

    for p in processes:
        p.join()

    return results 
```

这是运行上述代码的测试

```
def test_parallel_processing():
    def heavy_duty1(arg1, arg2, arg3):
        return arg1 + arg2 + arg3

    def heavy_duty2(arg1, arg2, arg3):
        return arg1 * arg2 * arg3

    task_list = [
        {'func': heavy_duty1, 'tasks': [{'arg1': 1, 'arg2': 2, 'arg3': 3}, {'arg1': 1, 'arg2': 3, 'arg3': 5}]},
        {'func': heavy_duty2, 'tasks': [{'arg1': 1, 'arg2': 2, 'arg3': 3}, {'arg1': 1, 'arg2': 3, 'arg3': 5}]},
    ]

    results = par_proc(task_list)

    job1 = sum([y for x in results if 'heavy_duty1' in x.keys() for y in list(x.values())])
    job2 = sum([y for x in results if 'heavy_duty2' in x.keys() for y in list(x.values())])

    assert job1 == 15
    assert job2 == 21 
```

加上另一个有一些例外

```
def test_parallel_processing_exceptions():
    def heavy_duty1_raises(arg1, arg2, arg3):
        raise ValueError('Exception raised')
        return arg1 + arg2 + arg3

    def heavy_duty2(arg1, arg2, arg3):
        return arg1 * arg2 * arg3

    task_list = [
        {'func': heavy_duty1_raises, 'tasks': [{'arg1': 1, 'arg2': 2, 'arg3': 3}, {'arg1': 1, 'arg2': 3, 'arg3': 5}]},
        {'func': heavy_duty2, 'tasks': [{'arg1': 1, 'arg2': 2, 'arg3': 3}, {'arg1': 1, 'arg2': 3, 'arg3': 5}]},
    ]

    results = par_proc(task_list)

    job1 = sum([y for x in results if 'heavy_duty1' in x.keys() for y in list(x.values())])
    job2 = sum([y for x in results if 'heavy_duty2' in x.keys() for y in list(x.values())])

    assert not job1
    assert job2 == 21 
```

希望这会有所帮助。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2018-02-03T01:11:45.423

在“ `from queue import Queue`”中没有调用模块`queue`，而是`multiprocessing`应该使用。因此，它应该看起来像“ `from multiprocessing import Queue`”

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2020-06-27T09:53:58.520

刚刚做了一个简单而通用的示例，用于演示在 2 个独立程序之间通过队列传递消息。它没有直接回答 OP 的问题，但应该足够清楚地表明这个概念。

服务器：

`multiprocessing-queue-manager-server.py`

```
import asyncio
import concurrent.futures
import multiprocessing
import multiprocessing.managers
import queue
import sys
import threading
from typing import Any, AnyStr, Dict, Union

class QueueManager(multiprocessing.managers.BaseManager):

    def get_queue(self, ident: Union[AnyStr, int, type(None)] = None) -> multiprocessing.Queue:
        pass

def get_queue(ident: Union[AnyStr, int, type(None)] = None) -> multiprocessing.Queue:
    global q

    if not ident in q:
        q[ident] = multiprocessing.Queue()

    return q[ident]

q: Dict[Union[AnyStr, int, type(None)], multiprocessing.Queue] = dict()
delattr(QueueManager, 'get_queue')

def init_queue_manager_server():
    if not hasattr(QueueManager, 'get_queue'):
        QueueManager.register('get_queue', get_queue)

def serve(no: int, term_ev: threading.Event):
    manager: QueueManager
    with QueueManager(authkey=QueueManager.__name__.encode()) as manager:
        print(f"Server address {no}: {manager.address}")

        while not term_ev.is_set():
            try:
                item: Any = manager.get_queue().get(timeout=0.1)
                print(f"Client {no}: {item} from {manager.address}")
            except queue.Empty:
                continue

async def main(n: int):
    init_queue_manager_server()
    term_ev: threading.Event = threading.Event()
    executor: concurrent.futures.ThreadPoolExecutor = concurrent.futures.ThreadPoolExecutor()

    i: int
    for i in range(n):
        asyncio.ensure_future(asyncio.get_running_loop().run_in_executor(executor, serve, i, term_ev))

    # Gracefully shut down
    try:
        await asyncio.get_running_loop().create_future()
    except asyncio.CancelledError:
        term_ev.set()
        executor.shutdown()
        raise

if __name__ == '__main__':
    asyncio.run(main(int(sys.argv[1]))) 
```

客户：

`multiprocessing-queue-manager-client.py`

```
import multiprocessing
import multiprocessing.managers
import os
import sys
from typing import AnyStr, Union

class QueueManager(multiprocessing.managers.BaseManager):

    def get_queue(self, ident: Union[AnyStr, int, type(None)] = None) -> multiprocessing.Queue:
        pass

delattr(QueueManager, 'get_queue')

def init_queue_manager_client():
    if not hasattr(QueueManager, 'get_queue'):
        QueueManager.register('get_queue')

def main():
    init_queue_manager_client()

    manager: QueueManager = QueueManager(sys.argv[1], authkey=QueueManager.__name__.encode())
    manager.connect()

    message = f"A message from {os.getpid()}"
    print(f"Message to send: {message}")
    manager.get_queue().put(message)

if __name__ == '__main__':
    main() 
```

**用法**

服务器：

```
$ python3 multiprocessing-queue-manager-server.py N 
```

`N`是一个整数，表示应该创建多少个服务器。复制`<server-address-N>`服务器的一个输出并将其作为每个`multiprocessing-queue-manager-client.py`.

客户：

```
python3 multiprocessing-queue-manager-client.py <server-address-1> 
```

**结果**

服务器：

```
Client 1: <item> from <server-address-1> 
```

要点：[https ://gist.github.com/89062d639e40110c61c2f88018a8b0e5](https://gist.github.com/89062d639e40110c61c2f88018a8b0e5)

* * *

**UPD ：**[在这里](https://pypi.org/project/ipcq/)创建了一个包。

服务器：

```
import ipcq

with ipcq.QueueManagerServer(address=ipcq.Address.AUTO, authkey=ipcq.AuthKey.AUTO) as server:
    server.get_queue().get() 
```

客户：

```
import ipcq

client = ipcq.QueueManagerClient(address=ipcq.Address.AUTO, authkey=ipcq.AuthKey.AUTO)
client.get_queue().put('a message') 
```

[![在此处输入图像描述](../Images/3b4ece3a318966f0fc10c7fc4b4d1688.png)](https://i.stack.imgur.com/L2KuI.gif)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-12-04T03:57:42.870

我们实现了这两个版本，一个是简单的多**线程**池，可以执行多种类型的可调用对象，使我们的生活更轻松，第二个版本使用**进程**，在可调用对象和要求方面不太灵活，需要额外调用 dill。

将frozen_pool 设置为true 将冻结执行，直到在任一类中调用finish_pool_queue。

线程版本：

```
'''
Created on Nov 4, 2019

@author: Kevin
'''
from threading import Lock, Thread
from Queue import Queue
import traceback
from helium.loaders.loader_retailers import print_info
from time import sleep
import signal
import os

class ThreadPool(object):
    def __init__(self, queue_threads, *args, **kwargs):
        self.frozen_pool = kwargs.get('frozen_pool', False)
        self.print_queue = kwargs.get('print_queue', True)
        self.pool_results = []
        self.lock = Lock()
        self.queue_threads = queue_threads
        self.queue = Queue()
        self.threads = []

        for i in range(self.queue_threads):
            t = Thread(target=self.make_pool_call)
            t.daemon = True
            t.start()
            self.threads.append(t)

    def make_pool_call(self):
        while True:
            if self.frozen_pool:
                #print '--> Queue is frozen'
                sleep(1)
                continue

            item = self.queue.get()
            if item is None:
                break

            call = item.get('call', None)
            args = item.get('args', [])
            kwargs = item.get('kwargs', {})
            keep_results = item.get('keep_results', False)

            try:
                result = call(*args, **kwargs)

                if keep_results:
                    self.lock.acquire()
                    self.pool_results.append((item, result))
                    self.lock.release()

            except Exception as e:
                self.lock.acquire()
                print e
                traceback.print_exc()
                self.lock.release()
                os.kill(os.getpid(), signal.SIGUSR1)

            self.queue.task_done()

    def finish_pool_queue(self):
        self.frozen_pool = False

        while self.queue.unfinished_tasks > 0:
            if self.print_queue:
                print_info('--> Thread pool... %s' % self.queue.unfinished_tasks)
            sleep(5)

        self.queue.join()

        for i in range(self.queue_threads):
            self.queue.put(None)

        for t in self.threads:
            t.join()

        del self.threads[:]

    def get_pool_results(self):
        return self.pool_results

    def clear_pool_results(self):
        del self.pool_results[:] 
```

工艺版本：

```
 '''
Created on Nov 4, 2019

@author: Kevin
'''
import traceback
from helium.loaders.loader_retailers import print_info
from time import sleep
import signal
import os
from multiprocessing import Queue, Process, Value, Array, JoinableQueue, Lock,\
    RawArray, Manager
from dill import dill
import ctypes
from helium.misc.utils import ignore_exception
from mem_top import mem_top
import gc

class ProcessPool(object):
    def __init__(self, queue_processes, *args, **kwargs):
        self.frozen_pool = Value(ctypes.c_bool, kwargs.get('frozen_pool', False))
        self.print_queue = kwargs.get('print_queue', True)
        self.manager = Manager()
        self.pool_results = self.manager.list()
        self.queue_processes = queue_processes
        self.queue = JoinableQueue()
        self.processes = []

        for i in range(self.queue_processes):
            p = Process(target=self.make_pool_call)
            p.start()
            self.processes.append(p)

        print 'Processes', self.queue_processes

    def make_pool_call(self):
        while True:
            if self.frozen_pool.value:
                sleep(1)
                continue

            item_pickled = self.queue.get()

            if item_pickled is None:
                #print '--> Ending'
                self.queue.task_done()
                break

            item = dill.loads(item_pickled)

            call = item.get('call', None)
            args = item.get('args', [])
            kwargs = item.get('kwargs', {})
            keep_results = item.get('keep_results', False)

            try:
                result = call(*args, **kwargs)

                if keep_results:
                    self.pool_results.append(dill.dumps((item, result)))
                else:
                    del call, args, kwargs, keep_results, item, result

            except Exception as e:
                print e
                traceback.print_exc()
                os.kill(os.getpid(), signal.SIGUSR1)

            self.queue.task_done()

    def finish_pool_queue(self, callable=None):
        self.frozen_pool.value = False

        while self.queue._unfinished_tasks.get_value() > 0:
            if self.print_queue:
                print_info('--> Process pool... %s' % (self.queue._unfinished_tasks.get_value()))

            if callable:
                callable()

            sleep(5)

        for i in range(self.queue_processes):
            self.queue.put(None)

        self.queue.join()
        self.queue.close()

        for p in self.processes:
            with ignore_exception: p.join(10)
            with ignore_exception: p.terminate()

        with ignore_exception: del self.processes[:]

    def get_pool_results(self):
        return self.pool_results

    def clear_pool_results(self):
        del self.pool_results[:] 
```

> ```
> def test(eg):
>         print 'EG', eg 
> ```

拨打电话：

```
tp = ThreadPool(queue_threads=2)
tp.queue.put({'call': test, 'args': [random.randint(0, 100)]})
tp.finish_pool_queue() 
```

或者

```
pp = ProcessPool(queue_processes=2)
pp.queue.put(dill.dumps({'call': test, 'args': [random.randint(0, 100)]}))
pp.queue.put(dill.dumps({'call': test, 'args': [random.randint(0, 100)]}))
pp.finish_pool_queue() 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2021-01-18T21:42:24.603

一个多生产者和多消费者的例子，经过验证。它应该很容易修改以涵盖其他情况，单/多生产者，单/多消费者。

```
from multiprocessing import Process, JoinableQueue
import time
import os

q = JoinableQueue()

def producer():
    for item in range(30):
        time.sleep(2)
        q.put(item)
    pid = os.getpid()
    print(f'producer {pid} done')

def worker():
    while True:
        item = q.get()
        pid = os.getpid()
        print(f'pid {pid} Working on {item}')
        print(f'pid {pid} Finished {item}')
        q.task_done()

for i in range(5):
    p = Process(target=worker, daemon=True).start()

# send thirty task requests to the worker
producers = []
for i in range(2):
    p = Process(target=producer)
    producers.append(p)
    p.start()

# make sure producers done
for p in producers:
    p.join()

# block until all workers are done
q.join()
print('All work completed') 
```

解释：

1.  本例中有两个生产者和五个消费者。
2.  JoinableQueue 用于确保存储在队列中的所有元素都将被处理。'task_done' 用于通知工作人员已完成。'q.join()' 将等待所有标记为完成的元素。
3.  使用＃2，无需加入等待每个工人。
4.  但重要的是加入等待每个生产者将元素存储到队列中。否则程序立即退出。

# ruby - 字节 < 0xC0 字节 < 0x80

> ID：11515952
> 
> 赞同：0
> 
> 时间：2012-07-17T04:17:48.317
> 
> 标签：ruby, string

有人可以帮我理解这个 Ruby 脚本在做什么吗？

```
def clean_up dirty_text
  newstr = ""

  dirty_text.each_byte do |byte|
    newstr << if byte < 0x80
      byte.chr
    elsif byte < 0xC0
      "\xC2" + byte.chr
    else
      "\xC3" + (byte - 64).chr      
    end
  end

  newstr
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T04:21:41.317

这是将 Latin-1 转码为 UTF-8 的一种粗鲁方式。

[“每个软件开发人员绝对、肯定必须了解 Unicode 和字符集的绝对最低要求（没有借口！）”](http://www.joelonsoftware.com/articles/Unicode.html)

# html - 使用 HTML5 在画布内拖放功能

> ID：11515953
> 
> 赞同：7
> 
> 时间：2012-07-17T04:17:53.453
> 
> 标签：html

大家好，我们可以使用 html5 在画布中放置拖放功能吗？

我的实际要求是将图像拖到应该在画布内完成的文本框中...请分享您的想法..以下链接我用来学习拖放，但应该在画布内完成..

[http://www.w3schools.com/html5/tryit.asp?filename=tryhtml5_draganddrop](http://www.w3schools.com/html5/tryit.asp?filename=tryhtml5_draganddrop)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T04:27:33.380

您可以在本教程中了解更多信息：http: [//html5.litten.com/how-to-drag-and-drop-on-an-html5-canvas/](http://html5.litten.com/how-to-drag-and-drop-on-an-html5-canvas/)

从您对问题的有限描述来看，听起来您将项目拖到画布上，本教程可能是最佳匹配。

这是您可以粘贴到文件中并在兼容 HTML5 的浏览器中打开的实际代码，它将起作用：

```
<!doctype html>
<html>
<head>
<meta charset="UTF-8" />
<title>Canvas Drag and Drop Test</title>
</head>
<body>
<section>

<div>
<canvas id="canvas" width="400" height="300">
This text is displayed if your browser does not support HTML5 Canvas.
</canvas>
</div>

<script type="text/javascript">

var canvas;
var ctx;
var x = 75;
var y = 50;
var WIDTH = 400;
var HEIGHT = 300;
var dragok = false;

function rect(x,y,w,h) {
 ctx.beginPath();
 ctx.rect(x,y,w,h);
 ctx.closePath();
 ctx.fill();
}

function clear() {
 ctx.clearRect(0, 0, WIDTH, HEIGHT);
}

function init() {
 canvas = document.getElementById("canvas");
 ctx = canvas.getContext("2d");
 return setInterval(draw, 10);
}

function draw() {
 clear();
 ctx.fillStyle = "#FAF7F8";
 rect(0,0,WIDTH,HEIGHT);
 ctx.fillStyle = "#444444";
 rect(x - 15, y - 15, 30, 30);
}

function myMove(e){
 if (dragok){
  x = e.pageX - canvas.offsetLeft;
  y = e.pageY - canvas.offsetTop;
 }
}

function myDown(e){
 if (e.pageX < x + 15 + canvas.offsetLeft && e.pageX > x - 15 +
 canvas.offsetLeft && e.pageY < y + 15 + canvas.offsetTop &&
 e.pageY > y -15 + canvas.offsetTop){
  x = e.pageX - canvas.offsetLeft;
  y = e.pageY - canvas.offsetTop;
  dragok = true;
  canvas.onmousemove = myMove;
 }
}

function myUp(){
 dragok = false;
 canvas.onmousemove = null;
}

init();
canvas.onmousedown = myDown;
canvas.onmouseup = myUp;

</script>

</section>
</body>
</html> 
```

# php - 我在哪里可以获得具有多任务支持的 cron

> ID：11515956
> 
> 赞同：-6
> 
> 时间：2012-07-17T04:17:57.707
> 
> 标签：php, cron, multitasking

我在哪里可以获得或下载免费的共享软件 cron 管理器，它支持多任务处理并支持 php。所以我可以同时运行php脚本

还有1个。他们可以使用哪种数据存储机制来共享和交换数据。db、file、memcache、socket 或其他任何东西

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T04:57:28.630

您没有指定这是用于哪个操作系统。任何 Linux/Unix 系统，包括 MacOS，都内置了 cron 或 cron 类型的软件。甚至 Windows 也具有任务调度功能，包括`at`一次性作业。换句话说，您可能已经拥有 cron 或 cron 类型的软件，并且没有费心在您的系统中寻找它。

Cron 本身不具备“多任务处理”功能。它只是在指定的时间间隔启动一个或多个指定的程序。如果你想要多任务处理，你告诉 cron 同时启动同一个作业的多个副本。

至于共享数据，请记住每个 cron 作业都将是一个单独的进程/实例，并且基本上完全独立于同一脚本的任何其他副本。同样，你没有指定你在哪个操作系统上，所以我们不能告诉你如何共享数据——我们可以指出你在 Linux 上使用 unix 域套接字，但如果你在 Windows 上，那毫无意义。

因此，与其抱怨被否决，不如看看你的问题并意识到它是多么的低效，并提供我们需要能够正确回答你的细节。现在，我们只能猜测你想要什么。

# cuda - cuda 内核将整数转换为 const char*

> ID：11515961
> 
> 赞同：1
> 
> 时间：2012-07-17T04:18:33.943
> 
> 标签：cuda, integer, char, constants

我正在尝试从`__global__ kernel()`CUDA 中的函数内将整数（32 位）转换为 const char*，但我找不到方法。

我不能使用字符串函数，因为它抱怨我正在尝试调用主机函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T05:36:25.377

您可以在线搜索 itoa() 实现，并使用涵盖您需要的设备功能。

不过，您可能需要重新考虑您的设计。如果您需要在 GPU 上格式化字符串，则可能是您走错了路。

# vba - 调用自定义属性时出错

> ID：11515965
> 
> 赞同：2
> 
> 时间：2012-07-17T04:19:01.767
> 
> 标签：vba, excel

我希望使用 vba 进行深度优先搜索算法，所以我定义了一个名为“node”的对象，它应该包含一个“parentNode”。

我试图将 parentNode 定义为集合并使用以下

```
Public Property Let Parent(ByRef inputNode As Node)
    Set parentNode = New Collection
    hasParentNode = True
    parentNode.Add inputNode

End Property

Public Property Get Parent() As Node
    Parent = parentNode.Item(1)
End Property 
```

但是当我打电话给 node.Parent 我得到了`Object variable or With block variable not set`

我知道这是由于“Parent = parentNode.Item(1)”这一行，正确的做法应该是什么？我希望它返回由 Ref 分配的 parnetNode

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T14:16:02.090

由于 Node 是一个对象（我假设，我不知道`Node`实际上是什么类），因此您的代码缺少`Set`关键字：

```
Public Property Get Parent() As Node
  Set Parent = parentNode.Item(1) 
End Property 
```

得到`Object variable or With block variable not set` ~~通常~~有时意味着缺少`Set`关键字。

# c - 如何使用 C 将 char 数组更改为 int？

> ID：11515966
> 
> 赞同：0
> 
> 时间：2012-07-17T04:19:08.503
> 
> 标签：c

我现在正在学习 C，我正在解析一个原始注册表文件并阅读它。

我现在有一些问题，

```
000011E0    00 00 00 00 60 01 00 00 B9 01 00 00 00 00 00 00 
000011F0    20 C0 26 00 FF FF FF FF 00 00 00 00 FF FF FF FF 
00001200    10 FC 00 00 FF FF FF FF 4C 00 01 00 00 00 00 00
this is hex value of REGISTRY file.

fseek(fp,0x11F0,SEEK_SET);

char tmp[4];
int now = ftell(fp);
for(int i = 0 ; i < 4 ; i++){
    tmp[i] = fgetc(fp);
    } 
```

我制作了这个 tmp 数组，但我需要 0x0026c020。如何将此数组更改为该值？或者请建议我更好的算法。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T04:21:51.920

如果您知道该值以与主机操作系统架构相同的字节顺序存储，您可以这样做：

```
int value = *(int *)tmp; 
```

但是，您不应该*像*在此处那样以倒序读取字节——这会改变字节顺序并导致错误的值。尝试这个：

```
int value;
if (fread(&value, sizeof(value), 1, fp) != 1) {
    /* Could not read, handle error. */
}

/* value is set, inspect it */ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T04:57:12.437

要将字符串转换为整数，已经有可用的函数，其中一个函数是 strtoul()。

您可以使用标准 strtoul() 函数将字符串转换为整数值。

# java - 如何强制 java web start 在与 IE 相同的显示器上启动启动画面和以后的窗口

> ID：11515967
> 
> 赞同：3
> 
> 时间：2012-07-17T04:19:11.207
> 
> 标签：java, browser, java-web-start, multiple-monitors

场景：笔记本电脑有多个显示器，使用投影仪作为第二个显示器。

将 IE 带到投影仪监视器，键入 jnlp 路径以启动 java web 启动，但 Java 启动屏幕（第一次，稍后将显示应用程序的启动窗口）显示在笔记本电脑自己的监视器（系统的第一个监视器）上。java web start 应用程序的后期窗口也是如此。我需要手动拖动窗口，但观众错过了启动窗口。

问题：有没有办法告诉 javaws 显示 Java 启动画面，以及将来的应用程序启动画面与启动它的浏览器出现在同一个显示器上？另外，如何让 java 应用程序知道它在哪个显示器上，因为用户可能将 IE 放在他拥有的任何显示器上？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T23:52:12.593

JWS splash 与基于 AWT 的不同[`SplashScreen`](http://docs.oracle.com/javase/8/docs/api/java/awt/SplashScreen.html)，不提供任何程序员控制。因此，您的问题的答案是“无法完成”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T16:00:00.260

部分回答您的问题，您可以通过在 JNLP 文件中更改图标标记属性来更改启动画面。

参考。 [http://docs.oracle.com/javase/6/docs/technotes/guides/javaws/developersguide/faq.html#206](http://docs.oracle.com/javase/6/docs/technotes/guides/javaws/developersguide/faq.html#206)

[https://blogs.oracle.com/thejavatutorials/entry/chang_the_java_web_start](https://blogs.oracle.com/thejavatutorials/entry/changing_the_java_web_start)

# android - 在 LinearLayout 中清除 TableLayout 会删除 TextView Header

> ID：11515968
> 
> 赞同：0
> 
> 时间：2012-07-17T04:19:23.997
> 
> 标签：android, android-linearlayout, tablelayout

我有一个嵌入了 TextView 和 TableLayout 的 LinearLayout。这是我的 xml 文件的格式。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" 
 >
 <TextView
        android:id="@+id/txtHeader"
        android:layout_width="match_parent"
        android:text="Header"  />
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:stretchColumns="1">
     <TableRow>
      <!-- Column 1 -->
      <TextView
         android:id="@+id/row1Item1"
         android:text="Column1" />
       <!-- Column 2 -->
      <TextView
         android:id="@+id/row1Item2"
         android:text="Column2" />
     </TableRow>
</TableLayout> 
</LinearLayout> 
```

我正在向表中动态添加行。每次，我得到一个更新，我需要清除表并写入新信息（行数是变量）。所以，每当我必须更新时，我都会尝试清除表格作为第一步。

```
 ll = (LinearLayout)findViewById(R.id.wlayout);
    tb = (TableLayout)findViewById(R.id.wtable);

private void on Update(){
tb.removeAllViewsInLayout();

Create table dynamically..
} 
```

但它也删除了我的文本标题。我也尝试过 ll.removeView(tb)，其中 ll 是 LinearLayout。谁能帮帮我吗。我是安卓新手。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T04:22:26.240

您没有为 TableLayout 标签提供 id。请提供 id 然后尝试清除它。

```
 <TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="+@id/wtable"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:stretchColumns="1">
     <TableRow>
      <!-- Column 1 -->
      <TextView
         android:id="@+id/row1Item1"
         android:text="Column1" />
       <!-- Column 2 -->
      <TextView
         android:id="@+id/row1Item2"
         android:text="Column2" />
     </TableRow>
</TableLayout> 
```

然后试试这个..

```
tb = (TableLayout)findViewById(R.id.wtable);  
tb.removeAllViewsInLayout(); 
```

# r - 在 R 中生成组（家庭）

> ID：11515970
> 
> 赞同：2
> 
> 时间：2012-07-17T04:19:47.773
> 
> 标签：r, dataframe

我有以下类型的数据：

```
Person <- c("A",  "B", "C",  "D",  "E",  "E",  "F",  "G", "H", "I")
MOM <- c(   NA,   NA,   NA,  "A",  "A",   NA,  "A",  "B", "C", NA)
DAD <- c(   NA,   NA,   NA,  "B",  "B",   NA,  "E",  "A", "B", NA)
Xv <- 1:10
myd <- data.frame (Person, MOM, DAD, Xv, stringsAsFactors=F)
myd 
       Person  MOM  DAD Xv
1       A <NA> <NA>  1
2       B <NA> <NA>  2
3       C <NA> <NA>  3
4       D    A    B  4
5       E    A    B  5
6       E <NA> <NA>  6
7       F    A    E  7
8       G    B    A  8
9       H    C    B  9
10      I <NA> <NA> 10 
```

此数据包括 Person 和他们的 Mom 和 Dad 列。我想为此数据创建家庭组。NA 是信息缺失。定义了一个具有共同 MOM 和 DAD 的家庭。创始人是那些同时拥有 NA，family = 0 的人。

这是我能弄清楚的，这对我来说并不完美：

```
fun <- function(i) {
  i1 <- if (is.na(myd[i, 2])) i else match(myd[i, 2], myd[1:i, 2])
  i2 <- if (is.na(myd[i, 3])) i else match(myd[i, 3], myd[1:i, 3])
  min(i1, i2)
}
myd$family <- as.numeric(factor(sapply(1:nrow(myd), fun)))
  Person  MOM  DAD Xv family
1       A <NA> <NA>  1      1
2       B <NA> <NA>  2      2
3       C <NA> <NA>  3      3
4       D    A    B  4      4
5       E    A    B  5      4
6       E <NA> <NA>  6      5
7       F    A    E  7      4
8       G    B    A  8      6
9       H    C    B  9      4
10      I <NA> <NA> 10      7 
```

上述功能在某种意义上是不完善的：家庭数据不包括他们父母的数据，例如家庭 4 应该包括 A 和 B 的数据。因此完整的家庭看起来像：

```
1       A <NA> <NA>  1      1
2       B <NA> <NA>  2      2
4       D    A    B  4      4
5       E    A    B  5      4 
```

另一件事（至少对我来说是），作为 DAD = A 和 MOM = B 与 DAD = B 和 MOM = A 相同。因此家庭 4 和 6 是相同的 A 和 B 父母的产物，所以应该相同.

```
4       D    A    B  4      4
5       E    A    B  5      4
8       G    B    A  8      6 
```

因此预期的输出是：

```
Person  MOM  DAD Xv     family
# founders 
1       A <NA> <NA>  1      0
2       B <NA> <NA>  2      0
3       C <NA> <NA>  3      0
10      I <NA> <NA> 10      0
6       E <NA> <NA>  6      0
# Family 1
1       A <NA> <NA>  1      1
2       B <NA> <NA>  2      1
4       D    A    B  4      1
5       E    A    B  5      1
8       G    B    A  8      1
# Family 2
1       A <NA> <NA>  1      2
6       E <NA> <NA>  6      2
7       F    A    E  7      2
# Family 3
2       B <NA> <NA>  2      3
3       C <NA> <NA>  3      3
9       H    C    B  9      3 
```

**编辑：**

遗憾的是（好！）在人类遗传学中，我们需要处理类似的变量——家庭、三人组、妈妈（父母 1、母亲、女性）、父亲（父亲、父母 2、男性）、个人/主体等。这使得一切都相似并且问题类似。

```
 Family vs Trio 
  1 Nuclear family 
  A  x   B
      |
   C   D  E

  Trio -> 3 trios  
  A x B      A x B       A x B
     |         |            |
     C          D           E 
```

**提问者的编辑：**我同意下面的评论作为作业，请不要回答这个问题一段时间（你认为足够好的时间已经过去了作业提交时间）。如果我得到答案，我会在稍后（3 个月左右）发布。

**编辑**

**创始人定义**- 父母双方不知道他们是否是任何儿子/女儿的人，因此他们在 MOM 和 DAD 列中都有。这些被认为是家庭 0，因为它们是其他家庭的一部分，但该列表不是真正的家庭。

```
 Person  MOM  DAD Xv     family
    1       A <NA> <NA>  1      0
    2       B <NA> <NA>  2      0
    3       C <NA> <NA>  3      0
    10      I <NA> <NA> 10      0
    6       E <NA> <NA>  6      0 
```

** 家庭定义***一个家庭由父母（妈妈和爸爸）以及所有的儿子和女儿组成。如果 Person DAD and MOM 与另一个人 DAD 和 MOM 匹配，则应将其视为一个家庭。例如，以下列表中的 D 和 E 人有 MOM = A 和 DAD = B，这两个人与 D 和 E 一起组成了一个家庭。现在我们需要从创始人列表（家庭 0）中回收他们父母（A 和 B）的数据。

```
 # Family 1
        Person  MOM  DAD     Xv     family
    1       A <NA> <NA>  1      1
    2       B <NA> <NA>  2      1
    4       D    A    B  4      1
    5       E    A    B  5      1 
```

同样与人类情况相反，一个人可以是 MOM 或 DAD（可以转换性别），因此 A (MOM) 和 B (DAD) 产生的后代与 B (MOM) 和 A(DAD) 产生的后代相同，因此我们需要将以下个人添加到家庭 1 列表中。

```
 Person  MOM   DAD     Xv     family
   8       G       B    A       8      1 
```

因此家庭 1 的完整列表变为：

```
 Person  MOM   DAD Xv     family
1       A <NA> <NA>  1      1
2       B <NA> <NA>  2      1
4       D    A    B  4      1
5       E    A    B  5      1
8       G    B    A  8      1 
```

族 1 可以用图解表示为：

```
 MOM   x   DAD             MOM   x   DAD
              A  |   B        or       B  |     A 
            -----------------          ------
           |                 |           |
           D                 E           G 
```

**这是部分解决方案：**

```
myd1 <- data.frame(myd$DAD, myd$MOM) 
myd$family<-as.factor(apply(myd1,1,function(x){paste(x[order(x)],collapse='-')}))
   Person  MOM  DAD Xv family
1       A <NA> <NA>  1  NA-NA
2       B <NA> <NA>  2  NA-NA
3       C <NA> <NA>  3  NA-NA
4       D    A    B  4    A-B
5       E    A    B  5    A-B
6       E <NA> <NA>  6  NA-NA
7       F    A    E  7    A-E
8       G    B    A  8    A-B
9       H    C    B  9    B-C
10      I <NA> <NA> 10  NA-NA 
```

它没有给出家庭编号，而是 A 和 B 的家庭。NA-NA 是创始人，它在崩溃之前下令，因此 AB 成为 BA。

**剩下的问题**是 AB 家庭需要从人 A 和 B 回收的数据（尽管他们在家庭 NA-NA 组中）。

```
 Person  MOM  DAD Xv family
1       A <NA> <NA>  1  NA-NA
2       B <NA> <NA>  2  NA-NA
4       D    A    B  4    A-B
5       E    A    B  5    A-B 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T17:13:41.740

我不确定你是否已经弄清楚了，但这里有一个解决方案。

首先，您的数据：

```
# Your data
myd <- data.frame(Person = c("A", "B", "C", "D", "E", 
                             "E", "F", "G", "H", "I"),
                  MOM = c(NA, NA, NA, "A", "A", NA, "A", "B", "C", NA),
                  DAD = c(NA, NA, NA, "B", "B", NA, "E", "A", "B", NA),
                  Xv = 1:10, stringsAsFactors=F) 
```

其次，我们通过将原始数据中的第 2 列和第 3 列合并在一起来识别这些族。我们会用这个给`split`你`data.frame`成一个列表。

```
# Identifying the families
fam = apply(myd[2:3], 1, function(x) paste0(sort(x), collapse=" ")) 
```

第三，我们将其拆分`data.frame`为一个列表。在这种情况下，我们最终得到一个包含四个`data.frame`s 的列表：一个用于创始人，一个用于每个家庭。

```
# Splitting the data by founders and families
temp_1 = split(myd, fam)
names(temp_1)[1] = "Founders" 
```

第四，我们做一些简单的匹配和子集来识别哪些创始人属于哪些家族。

```
# Identify which families the founders belong to
temp_2 = lapply(1:length(temp_1),
                function(x) temp_1[[1]][which(temp_1[[1]]$Person %in% 
                  unique(unlist(temp_1[[x]][,c(2,3)], use.names=FALSE))),]) 
```

最后，我们`rbind`将这些数据放在一起。

```
# "Merging" (with rbind) founders and their families
OUT = lapply(1:length(temp_1), function(x) rbind(temp_2[[x]], temp_1[[x]]))
names(OUT) = names(temp_1) 
```

这是输出：

```
OUT
# $Founders
#    Person  MOM  DAD Xv
# 1       A <NA> <NA>  1
# 2       B <NA> <NA>  2
# 3       C <NA> <NA>  3
# 6       E <NA> <NA>  6
# 10      I <NA> <NA> 10
# 
# $`A B`
#   Person  MOM  DAD Xv
# 1      A <NA> <NA>  1
# 2      B <NA> <NA>  2
# 4      D    A    B  4
# 5      E    A    B  5
# 8      G    B    A  8
# 
# $`A E`
#   Person  MOM  DAD Xv
# 1      A <NA> <NA>  1
# 6      E <NA> <NA>  6
# 7      F    A    E  7
# 
# $`B C`
#   Person  MOM  DAD Xv
# 2      B <NA> <NA>  2
# 3      C <NA> <NA>  3
# 9      H    C    B  9 
```

## 更新：data.frame 输出

如果您更喜欢 a`data.frame`而不是 a `list`，您可以在完成前面的步骤*后执行以下操作：*

```
OUT = do.call("rbind", 
              lapply(1:length(OUT), 
                     function(x) cbind(OUT[[x]], fam = names(OUT[x]))))
OUT
#    Person  MOM  DAD Xv      fam
# 1       A <NA> <NA>  1 Founders
# 2       B <NA> <NA>  2 Founders
# 3       C <NA> <NA>  3 Founders
# 6       E <NA> <NA>  6 Founders
# 10      I <NA> <NA> 10 Founders
# 11      A <NA> <NA>  1      A B
# 21      B <NA> <NA>  2      A B
# 4       D    A    B  4      A B
# 5       E    A    B  5      A B
# 8       G    B    A  8      A B
# 12      A <NA> <NA>  1      A E
# 61      E <NA> <NA>  6      A E
# 7       F    A    E  7      A E
# 22      B <NA> <NA>  2      B C
# 31      C <NA> <NA>  3      B C
# 9       H    C    B  9      B C 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T01:53:10.930

如果您想要每个“家庭”的字符向量都相同，那么使用该`interaction`函数会更紧凑。这些方面的东西：

```
myd$fam <- with( myd, as.character( interaction(MOM,DAD)))
myd$fam[ is.na(myd$fam) ] <- 0 
```

如果您想要数字（这似乎不明智，但这就是您提出请求的方式），那么请`as.character`使用`as.numeric`

```
myd$fam <- with( myd, as.numeric( interaction(MOM,DAD)))
myd$fam[ is.na(myd$fam) ] <- 0 
```

我从来没有想过你怎么能让“A”同时代表妈妈和爸爸。您可能需要解释您如何理解人类遗传学的这一方面。供家庭使用的分割`split`

```
> split(myd, myd$fam)
$`0`
   Person  MOM  DAD Xv fam
1       A <NA> <NA>  1   0
2       B <NA> <NA>  2   0
3       C <NA> <NA>  3   0
6       E <NA> <NA>  6   0
10      I <NA> <NA> 10   0

$`2`
  Person MOM DAD Xv fam
8      G   B   A  8   2

$`4`
  Person MOM DAD Xv fam
4      D   A   B  4   4
5      E   A   B  5   4

$`6`
  Person MOM DAD Xv fam
9      H   C   B  9   6

$`7`
  Person MOM DAD Xv fam
7      F   A   E  7   7 
```

# .net - 在 ASP.NET MVC 中我可以在哪里放置自定义类？

> ID：11515973
> 
> 赞同：69
> 
> 时间：2012-07-17T04:20:09.220
> 
> 标签：.net, asp.net-mvc

我有一些实用功能和分页功能。我想分别为这些函数创建名为 Utility 和 Pagination 的类，以便我可以在多个控制器中使用这些类函数。

那么我可以将这些类放在我的文件夹结构中的什么位置，然后我该如何访问呢？

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-07-17T04:26:11.897

您可以`Helpers`在根目录下创建一个名为的新文件夹，并将您的课程物理保存在那里。我会将我的类保存在一个不同的命名空间下，称为`Helpers`

```
namespace MyProject.Helpers
{
  public class CustomerHelper
  {
        //Do your class stuff here
  }
} 
```

要在我的其他类（例如：控制器）中使用它，我可以使用完全限定名称

```
var custHelper=new MyProject.Helpers.CustomerHelper(); 
```

或者

在顶部添加一条`Import`语句，以便我可以跳过完全限定名称

```
//Other existing Import statements here
using MyProject.Helpers;
public class RackController : Controller
{
  public ActionResult Index()
  {
     var custHelper=new CustomerHelper(); 
     //do something with this  
     return View();    
  } 
} 
```

如果您认为您的 Helper 方法也可以在另一个项目中使用，您可以考虑将它们**物理保存在一个单独的项目**（类型类库）中。要在您的项目中使用它，请添加对该项目的引用并像我们上面所做的那样使用它（使用完全限定名称或使用 import 语句）

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-17T04:24:20.787

你可以把你的助手类放在任何你认为合乎逻辑和方便的地方。

`Helpers`我个人从主项目文件夹中创建了一个文件夹。

您可以在任何地方使用它们，方法是完全限定类名或使用`using`语句。

在 Razor 视图中，您将使用

```
@using MyProject.Helpers 
```

在您将使用的控制器或模型中

```
using MyProject.Helpers; 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-06-15T08:14:57.790

另一种方法可能是创建一个基本控制器类并在那里添加您的通用逻辑，并从您的基本控制器派生您的控制器。

```
public class MyBaseController:Controller
{
   public void CommonFunction()
    {
    }
} 
```

像使用...

```
public HomeController:MyBaseController
{
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-07-17T09:03:26.420

您可以创建一个新项目，然后将公共类放入项目中。如果你想使用它们，只需添加引用项目。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-09-22T17:23:47.673

另外，请务必将您的类的“构建操作”设置为“编译”。在 Visual Studio 2015 中，默认情况下，在 App_Code 中创建的每个类（通过右键单击 -> 添加 -> 类）都将“内容”作为构建操作。

# google-closure-compiler - 为什么用 Plovr 编译我的 Closure 代码会给我奇怪的符号？

> ID：11515974
> 
> 赞同：1
> 
> 时间：2012-07-17T04:20:13.247
> 
> 标签：google-closure-compiler, plovr

我跑了`java -jar ~/PlovrFiles/plovr.jar build ~/js/config.js > /tmp/compiled.js`

但是，Closure 编译器会发出一个带有奇怪符号的奇怪错误，例如`RPP?LQ?RP*)?K??,)I?S??$?d?$?`.

```
Exception in thread "main" com.google.gson.JsonSyntaxException: com.google.gson.stream.MalformedJsonException: Expected literal value near ??*??RPP?LQ?RP*)?K??,)I?S??$?d?$? ???
    at com.google.gson.JsonParser.parse(JsonParser.java:64)
    at com.google.gson.JsonParser.parse(JsonParser.java:44)
    at org.plovr.ConfigParser.createBuilderFromFile(ConfigParser.java:29)
    at org.plovr.ConfigParser.parseFile(ConfigParser.java:98)
    at org.plovr.cli.BuildCommand.runCommandWithOptions(BuildCommand.java:55)
    at org.plovr.cli.BuildCommand.runCommandWithOptions(BuildCommand.java:31)
    at org.plovr.cli.AbstractCommandRunner.runCommand(AbstractCommandRunner.java:41)
    at org.plovr.cli.Command.execute(Command.java:47)
    at org.plovr.cli.Main.mainWithExitCode(Main.java:56)
    at org.plovr.cli.Main.main(Main.java:30)
Caused by: com.google.gson.stream.MalformedJsonException: Expected literal value near ??*??RPP?LQ?RP*)?K??,)I?S??$?d?$? ???
    at com.google.gson.stream.JsonReader.syntaxError(JsonReader.java:1111)
    at com.google.gson.stream.JsonReader.readLiteral(JsonReader.java:1079)
    at com.google.gson.stream.JsonReader.nextValue(JsonReader.java:808)
    at com.google.gson.stream.JsonReader.quickPeek(JsonReader.java:382)
    at com.google.gson.stream.JsonReader.peek(JsonReader.java:340)
    at com.google.gson.JsonParser.parse(JsonParser.java:59)
    ... 9 more
t.js 
```

起初，我认为这些符号是由于我的文本编辑器 JEdit 生成的隐藏缓存文件造成的。但是，删除这些文件并没有消除此错误。我路径中的所有文件似乎都没有这些符号。关于我可以在哪里调试此错误的任何建议？

这是我的简单`config.js`文件。

```
// File: config.js
{
  "id": "myApp",
  "paths": ".",
  "inputs": "mainengine.js"
} 
```

# ios - iCloud 错误“操作无法完成。（LibrarianErrorDoman 错误 10 - 无法配置集合。）”

> ID：11515986
> 
> 赞同：1
> 
> 时间：2012-07-17T04:21:58.923
> 
> 标签：ios, icloud, nsmetadataquery

我想将我现有的应用程序迁移到 iCloud。

在我尝试学习该做什么的过程中，我尝试了一个示例应用程序，该应用程序已按照演示中的描述运行（如 iTunes 斯坦福大学课程的第 17 课所示）。

有这个问题的人可以帮我诊断我搞砸了什么步骤导致以下失败吗？这只是基本上告诉我没有要查询的数据吗？还是有其他事情我没有正确配置？

我在我的控制台中得到以下内容（在我调用后立即出现在下面的代码中`[self.iCloudQuery startQuery];`

```
item update error: 0, Error Domain=LibrarianErrorDomain Code=10 "The operation couldn‚Äôt be completed.
(LibrarianErrorDomain error 10 - Unable to configure the collection.)" UserInfo=0x11ee00 {NSDescription=Unable to
configure the collection.} 
```

我创建了一个开发配置文件，在 iTunes 连接上打开了 iCloud。

我打开了权利。以下是内容：

![在此处输入图像描述](../Images/080819cdc11834524c96eafd140026be.png)

代码直接来自斯坦福大学 iTunes 讲座：

```
#import "DocumentViewController.h"

@interface DocumentViewController ()
@property (strong, nonatomic) NSArray* documents; // of NSURLs
@property (strong, nonatomic) NSMetadataQuery* iCloudQuery;
@end

@implementation DocumentViewController
@synthesize documents = _documents;
@synthesize iCloudQuery = _iCloudQuery;

- (void)setDocuments:(NSArray*)documents {
    // always sort documents alphabetically
    documents
      = [documents sortedArrayUsingComparator:^NSComparisonResult(NSURL* url1, NSURL* url2) {
            return [[url1 lastPathComponent] caseInsensitiveCompare:[url2 lastPathComponent]];
        }];
    if (![documents isEqualToArray:_documents])
    {
        _documents = documents;
        [self.tableView reloadData];
    }
}

- (NSMetadataQuery*)iCloudQuery {
    if (!_iCloudQuery)
    {
        _iCloudQuery = [[NSMetadataQuery alloc] init];
        _iCloudQuery.searchScopes
          = [NSArray arrayWithObject:NSMetadataQueryUbiquitousDocumentsScope];
        _iCloudQuery.predicate
          = [NSPredicate predicateWithFormat:@"%K like '*'", NSMetadataItemFSNameKey];
        [[NSNotificationCenter defaultCenter] addObserver:self
                                                 selector:@selector(processCloudQueryResults:)
                                                     name:NSMetadataQueryDidFinishGatheringNotification
                                                   object:_iCloudQuery];
        [[NSNotificationCenter defaultCenter] addObserver:self
                                                 selector:@selector(processCloudQueryResults:)
                                                     name:NSMetadataQueryDidUpdateNotification
                                                   object:_iCloudQuery];
    }
    return _iCloudQuery;
}

#pragma mark - private implementation

- (NSURL*)iCloudURL {
    return [[NSFileManager defaultManager] URLForUbiquityContainerIdentifier:nil];
}

- (NSURL*)iCloudDocumentsURL {
    return [self.iCloudURL URLByAppendingPathComponent:@"Documents"];
}

- (NSURL*)filePackageURLForCloudURL:(NSURL*)url
{
    if ([url.path hasPrefix:self.iCloudDocumentsURL.path])
    {
        NSArray* iCloudDocumentsURLComponents = self.iCloudDocumentsURL.pathComponents;
        NSArray* urlComponents = url.pathComponents;
        if (iCloudDocumentsURLComponents.count < urlComponents.count)
        {
            NSRange newRange = NSMakeRange(0, iCloudDocumentsURLComponents.count+1);
            urlComponents = [urlComponents subarrayWithRange:newRange];
            url = [NSURL fileURLWithPathComponents:urlComponents];
        }
    }
    return url;
}

- (void)processCloudQueryResults:(NSNotification*)notification
{
    [self.iCloudQuery disableUpdates];
    NSMutableArray* documents = [NSMutableArray array];
    NSUInteger resultCount = self.iCloudQuery.resultCount;
    for (NSUInteger i = 0; i < resultCount ; ++i)
    {
        NSMetadataItem* item = [self.iCloudQuery resultAtIndex:i];
        NSURL* url = [item valueForAttribute:NSMetadataItemURLKey];
        url = [self filePackageURLForCloudURL:url];
        [documents addObject:url];
    }
    self.documents = documents;
    [self.iCloudQuery enableUpdates];
}

#pragma mark - overrides

- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];
    if (![self.iCloudQuery isStarted])
        [self.iCloudQuery startQuery];
    [self.iCloudQuery enableUpdates];
}

- (void)viewWillDisappear:(BOOL)animated {
    [self.iCloudQuery disableUpdates];
    [super viewWillDisappear:animated];
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T09:10:03.773

对于遇到此问题的其他任何人......显然，这是当您没有在您正在测试的设备上启用 iCloud 时发生的错误。一旦我在设备上启用了 iCloud，错误就停止在我的日志中发生。

所以现在我知道要检查什么错误才能向用户显示一个对话框，说“连接到 iCloud 将无法工作，直到你在系统偏好中注册 iCloud”。

# javascript - JS/AJAX 自动提交表单：禁用回车键以防止页面刷新

> ID：11515989
> 
> 赞同：2
> 
> 时间：2012-07-17T04:22:22.513
> 
> 标签：javascript, jquery

我正在使用一个函数，它将通过 ajax 提交，而无需单击按钮的帮助。但我目前遇到两个问题，经过反复试验并没有找到合理的解决方案：

首先有什么办法可以禁用输入按钮单击（这会导致整个页面刷新）？

[JS 函数如何工作的JSFIDDLE](http://jsfiddle.net/pXA6U/3/)基本示例

其次，感觉就像我正在绕道而行，以显示已发布的内容。如何更改函数的这一部分`$('#special').html('<p>' + $('#resultval', result).html() + '</p>');`以使其 POST 仅在调用的 div 内`#special`而不需要`span or <p> #resultval`？

每次我通过 php 回显时，我都必须像这样设置它以显示结果：`<div id="special"><span id="resultval">This is the result.</span></div>`

```
<script>
    $(document).ready(function() {
     var timer = null; 
     var dataString;   
     function submitForm(){
       $.ajax({ type: "POST",
                url: "posting.php",
                data: dataString,
                success: function(result){

                   $('#special').html('<p>' +  $('#resultval', result).html() + '</p>');

                }

       });
       return false;
     }
     $('#ytinput').on('keyup', function() {
        clearTimeout(timer);
        timer = setTimeout(submitForm, 050);
        var name = $("#ytinput").val();
        dataString = 'name='+ name;
     });
     }); 

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T09:30:08.190

```
$(document).ready(function() {
 var timer = null; 
 var dataString;   
 function submitForm(event){// the function call on click or on submit onclick=submitForm(event);

    event.preventDefault(); //to prevent enter key
   $.ajax({ type: "POST",
            url: "posting.php",
            data: dataString,
            success: function(result){

               $('#special').text(result); //you can use text() or html() only

            }

   });
   return false;
 }
 $('#ytinput').on('keyup', function() {
    clearTimeout(timer);
    timer = setTimeout(submitForm, 050);
    var name = $("#ytinput").val();
    dataString = 'name='+ name;
 });
 }); 
```

# c# - 从列表中删除重复值的最佳算法

> ID：11515991
> 
> 赞同：5
> 
> 时间：2012-07-17T04:22:42.617
> 
> 标签：c#, algorithm, list, duplicate-removal

从列表中删除重复值的最佳算法是什么？我试过这个：

```
for (int i = 0; i < AuthorCounter-1; i++)
{
    for (int j = 0; j < AuthorCounter-1; j++)
    {
        if (i != j)
        {
            if (AuthorGroupNode.Nodes[i].Text == AuthorGroupNode.Nodes[j].Text)
            {
                AuthorGroupNode.Nodes[j].Remove();
                AuthorCounter--;
            }

        }
    }
} 
```

这里，`AuthorGroupNodes`是节点列表。它在某种程度上做对了，但并不完美。任何人有更好的解决方案？？？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T04:28:02.577

您当前的算法是 O(N-squared)，对于大型列表，它的性能会很差。

如果空间不是问题，您可以保留一个`HashSet<int>`节点的哈希值。遍历列表一次。如果节点的哈希值在 HashSet 中，就知道这是一个重复节点。跳过它。如果哈希不在HashSet中，则将此节点添加到一个新列表中，并将该节点的哈希添加到HashSet中。

这将执行 O(N)，并且需要内存用于原始列表、列表副本减去任何重复项以及 HashSet。该算法是非破坏性的。

如果您可以使用 Linq，只需执行

```
var distinctList = originalList.Distinct().ToList(); 
```

**更新**

发现这几乎就是 Jon Skeet 重新实现 Distinct 的方式。

```
public static IEnumerable<TSource> Distinct<TSource>( 
    this IEnumerable<TSource> source) 
{ 
    return source.Distinct(EqualityComparer<TSource>.Default); 
} 

public static IEnumerable<TSource> Distinct<TSource>( 
    this IEnumerable<TSource> source, 
    IEqualityComparer<TSource> comparer) 
{ 
    if (source == null)  
    { 
        throw new ArgumentNullException("source"); 
    } 
    return DistinctImpl(source, comparer ?? EqualityComparer<TSource>.Default); 
} 

private static IEnumerable<TSource> DistinctImpl<TSource>( 
    IEnumerable<TSource> source, 
    IEqualityComparer<TSource> comparer) 
{ 
    HashSet<TSource> seenElements = new HashSet<TSource>(comparer); 
    foreach (TSource item in source) 
    { 
        if (seenElements.Add(item)) 
        { 
            yield return item; 
        } 
    } 
} 
```

[https://codeblog.jonskeet.uk/2010/12/30/reimplementing-linq-to-objects-part-14-distinct/](https://codeblog.jonskeet.uk/2010/12/30/reimplementing-linq-to-objects-part-14-distinct/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-17T04:52:01.330

这就像一种享受：

```
var xs = new []
{
    2, 3, 2, 4, 3, 3, 5, 6,
};

var ys = xs
    .ToLookup(z => z, z => z)
    .Select(x => x.First()); 
```

对于您的代码，它看起来像这样：

```
var nodes = AuthorGroupNode.Nodes
    .ToLookup(z => z.Text, z => z)
    .Select(x => x.First())
    .ToArray(); 
```

再简单不过了。:-)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-17T04:34:50.570

小猪支持 Eric J. 的回答...您需要实现 EqualityComparer 以完全控制如何识别不同的项目。

```
class Program
{
    static void Main(string[] args)
    {
        var list = new List<SampleClass>();
        // add some items

        var distinctItems = list.Distinct(new SampleClass());
    }
}

public class SampleClass : EqualityComparer<SampleClass>
{
    public string Text { get; set; }

    public override bool Equals(SampleClass x, SampleClass y)
    {
        if (x == null || y == null) return false;
        return x.Text == y.Text;
    }

    public override int GetHashCode(SampleClass obj)
    {
        if (obj == null) return 0;
        if (obj.Text == null) return 0;
        return obj.Text.GetHashCode();
    }
} 
```

更多信息：http: [//msdn.microsoft.com/en-us/library/bb338049](http://msdn.microsoft.com/en-us/library/bb338049)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-17T04:42:26.577

您永远不会检查列表的最后一个元素，您的第二个 for 需要更改为此才能工作：

```
for (int j = 0; j < AuthorCounter; j++) 
```

您正在检查每对节点两次。首先检查 i = 0 和 j = 1 的时间，然后检查 i = 1 和 j = 0 的时间。不需要在 i 之前或等于 i 之前开始 j。当 i = 0 时，您的内部循环将删除该元素的所有重复项，以便您知道`AuthorGroupNodes.Nodes[0]`是唯一的。下次通过外循环时，您将确定它`AuthorGroupNodes.Nodes[1]`是独一无二的。因此，您可以从 j 等于 i + 1 开始，然后取消对 i == j 的检查。同样，当您删除节点时， j 仍会增加​​到下一个节点。这将跳过 j 处的新节点，这是您删除的节点之后的节点，因此您应该减少 j，或者如果您不删除节点，则只增加 j：

```
for (int j = i + 1; j < AuthorCounter;)
{
    if (AuthorGroupNode.Nodes[i].Text == AuthorGroupNode.Nodes[j].Text)
    {
        AuthorGroupNode.Nodes[j].Remove();
        AuthorCounter--;
    }
    else
    {
        j++;
    }
} 
```

您说这可行但并不完美，所以我假设您没有使用标准列表，并且您的节点使用 Remove() 方法处理自己从列表中的删除。

如果列表按您要比较的字段排序，则可以完全删除内部 for 循环并删除当前元素的任何重复项，直到找到不同的元素：

```
for (int i = 0; i < AuthorCounter-1;)
{
    if (AuthorGroupNode.Nodes[i].Text == AuthorGroupNode.Nodes[i + 1].Text)
    {
        AuthorGroupNode.Nodes[i].Remove();
        AuthorCounter--;
    }
    else
    {
        i++;
    }
} 
```

# ajax - 在加载数据之前显示 Ajax 加载器

> ID：11515994
> 
> 赞同：10
> 
> 时间：2012-07-17T04:22:59.803
> 
> 标签：ajax, jquery

您好朋友，我想在数据加载之前显示 Ajax 加载器，特别是 div，但问题是数据在同一页面上动态出现，但我的脚本从另一个文件调用数据， `Script.php`请参阅下面的代码

**脚本**

```
<script>
function loadingAjax(div_id)
{
    $("#"+div_id).html('<img src="ajax-loader.gif"> saving...');
    $.ajax({
        type: "POST",
        url: "script.php",
        data: "name=John&id=28",
        success: function(msg){
            $("#"+div_id).html(msg);
        }
    });
}
</script> 
```

**HTML**

```
<body onload="loadingAjax('myDiv');">

<div id="myDiv"></div>

<div id="xyz"><img src="ss/image/abc.jpg" /></div>

</body> 
```

它工作正常，但我想在同一页面中加载数据请帮助我

提前致谢 ....

**编辑**

我想在加载数据之前显示加载`#xyz`器`#myDiv`

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-07-17T04:41:57.097

您可以尝试使用以下 html -

```
<body onload="loadingAjax('myDiv');">
    <div id="myDiv">
        <img id="loading-image" src="ajax-loader.gif" style="display:none;"/>
    </div>
</body> 
```

和脚本 -

```
<script>
function loadingAjax(div_id) {
      var divIdHtml = $("#"+div_id).html();
      $.ajax({
           type: "POST",
           url: "script.php",
           data: "name=John&id=28",
           beforeSend: function() {
              $("#loading-image").show();
           },
           success: function(msg) {
              $("#"+div_id).html(divIdHtml + msg);
              $("#loading-image").hide();
           }
      });
}
</script> 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2016-06-08T10:37:22.770

您可以尝试使用以下脚本

```
<script>
function ajax()
{
    var options = {};
    options.url = '';
    options.type = 'post';
    options.data = '';
    options.dataType = 'JSON'; // type data get from sever
    options.contentType = 'application/json';// type data post to sever
    options.async = false;
    options.beforeSend = function () {

    };

    options.success = function (data)
    {

    };
    options.error = function (xhr, status, err) {

        console.log(xhr.responseText);
    };
    $.ajax(options);
}
</script> 
```