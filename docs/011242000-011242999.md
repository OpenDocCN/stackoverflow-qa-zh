# StackOverflow 问答 11242000-11242999

# sencha-touch - 如何访问 tpl 中的属性名称（不仅仅是值）？

> ID：11242001
> 
> 赞同：1
> 
> 时间：2012-06-28T09:47:33.073
> 
> 标签：sencha-touch, extjs, sencha-touch-2

基本上我要做的是创建一个视图，其中任意 JSON 对象将被渲染到一个表中，每一行只是键：值（可以安全地假设该对象不包含嵌套数组/对象/等。 ）。

例如，如果我有一个像这样的对象：

```
{
    "Name": "John Doe",
    "Age": 34
} 
```

在 tpl 中呈现它的常用方法是：

```
<td>Name:</td><td>{Name}</td>
<td>Age:</td><td>{Age}</td> 
```

但是，我想把它当作我实际上并不知道属性名称，所以我*想要*这样的东西：

```
<tpl for=".">
    <td>{property.key}</td><td>{property.val}</td>
</tpl> 
```

知道这怎么可能吗？我似乎无法在文档中找到我要查找的内容。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T12:47:15.200

对于将来面临同样问题的任何人，我得出的解决方案实际上是可行的，如果看起来有点难看......

基本上，在`{[ ]}`标签中，您可以执行任意代码，并可以访问一些特殊变量，例如`values`等。起初这似乎是有限的，但如果您只是在其中包含一个自执行函数，它会返回您想要的值渲染模板，你基本上可以在这里做任何事情。

例子：

```
tpl: [
    '<table>',
    '{[ (function() { var output = []; for (i in values) { output.push("<tr><td>" + i + "</td><td>" + values[i] + "</td></tr>"); } return output.join(""); }()) ]}',
    '</table>'
] 
```

希望这可以帮助其他人将来遇到同样的问题！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-01T07:01:55.557

一个更优雅的解决方案将是

```
 <tpl foreach=".">
       <tr>
        <td>{[xkey]}</td>
        <td>{.}</td>
       </tr>
    </tpl> 
```

# ruby-on-rails-3 - Ruby on Rails 3：带有新控制器动作的 HABTM

> ID：11242006
> 
> 赞同：2
> 
> 时间：2012-06-28T09:47:39.573
> 
> 标签：ruby-on-rails-3, routes, has-and-belongs-to-many

我正在尝试为 has_and_belongs_to _many 用户的项目模型创建 M:N 关系。一个用户可以加入许多项目，但项目也有许多用户。我想我不需要通过，因为我的连接表不会有另一列。

所以我将关联包含在我的两个模型中（has_and_belongs_to_many :projects 和 has_and_belongs_to_many :users）并设置了一个新的迁移：

```
class AddProjectsUsersTable < ActiveRecord::Migration
  def self.up
    create_table :projects_users, :id => false do |t|
      t.references :project, :user
    end
  end

  def self.down
    drop_table :projects_users
  end
end 
```

那行得通..我不确定接下来的事情是否正确-但我尝试了一些方法。我试图在我的用户控制器中创建一个新操作，我可以在其中设置与该用户与项目的关系。

```
 def joinProject
    @user = current_user
    @user.projects = Project.find(params[:id])

    respond_to do |format|
        format.html { redirect_to @project, notice: 'Successfully joined project.' }
        format.json { head :no_content }
    end
  end 
```

这可能是错误的方式，因为它说：“ `undefined method 'each' for #<Project:0x00000103f10028>`”

**我该如何设置这种关系？好像我真的不明白这种 HABTM 关系是如何运作的..**

可以请任何人帮助我吗？

一些可能有趣或错误的进一步信息；）

我创建了这条路线：

```
 match "joinProject_user/:id" => "users#joinProject", :as => :joinProject 
```

我在我的视图中调用了控制器操作，如下所示：

```
 <%= link_to 'Join', joinProject_path(project) %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T09:57:08.130

控制器操作的第二行应该是：

```
@user.projects += [Project.find(params[:id])] 
```

甚至

```
@user.project_ids += [params[:id]] 
```

这会将传递的项目附加到现有项目集合中。该`User#projects=`方法（由 habtm 关联定义）需要一个集合而不是 Project 对象。在内部，它尝试调用`each`，所以它失败了，因为项目没有响应`each`.

# java - 在java中读取属性文件时发生文件未找到错误

> ID：11242007
> 
> 赞同：4
> 
> 时间：2012-06-28T09:47:39.710
> 
> 标签：java, properties, classpath

我在包下创建属性文件`resources/common/configure/`

然后我创建代码

```
 Properties prop = new Properties();

    try {
           //load a properties file
        prop.load(new FileInputStream("resources/common/configure/commonData.properties"));

           //get the property value and print it out
            System.out.println(prop.getProperty("id"));

    } catch (IOException ex) {
        ex.printStackTrace();
    } 
```

但我收到以下错误

```
java.io.FileNotFoundException: (The system cannot find the path specified) 
```

请让我知道如何获取此属性文件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T09:51:02.560

尝试

```
prop.load(getClass().getResourceAsStream("resources/common/configure/commonData.properties")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T10:02:08.500

该程序尝试在相对于您运行它的位置指定的路径中找到“commonData.properties”。提供正确的相对路径或配置文件的完整路径可能会解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T09:51:08.557

使用绝对文件路径。打印完整路径，您将能够发现您的问题。

或者，使用`getClass().getResourceAsStream()`.

# antlr - ANTLR Tree Walker 不应该输出 AST？

> ID：11242008
> 
> 赞同：0
> 
> 时间：2012-06-28T09:47:42.987
> 
> 标签：antlr, antlr3

我使用 ANTLR 制作了自己的语言。语法是完整的，但我想制作一个验证输入的 tree walker。但这不起作用。当我（不小心）在 tree walker 中使用 output=AST 时，它编译时没有错误，但它不接受任何输入。（它说 org.antlr.runtime.tree.CommonTree 不能转换为 tools.ANode）。但我认为 output=AST 不能在 tree walker 中使用。但是，它不会编译。它给出了一个

```
internal error: /.../src/AwesomeChecker.g : java.lang.IllegalStateException: java.lang.NullPointerException
org.deved.antlride.runtime.AntlrErrorListener$DynamicToken.invokeMethod(AntlrErrorListener.java:59)
org.deved.antlride.runtime.AntlrErrorListener$DynamicToken.getLine(AntlrErrorListener.java:64)
org.deved.antlride.runtime.AntlrErrorListener.report(AntlrErrorListener.java:131)
org.deved.antlride.runtime.AntlrErrorListener.message(AntlrErrorListener.java:115)
org.deved.antlride.runtime.AntlrErrorListener.warning(AntlrErrorListener.java:99)
org.antlr.tool.ErrorManager.grammarWarning(ErrorManager.java:742)
org.antlr.tool.ErrorManager.grammarWarning(ErrorManager.java:757)
org.antlr.tool.Grammar.parseAndBuildAST(Grammar.java:655)
org.antlr.Tool.getRootGrammar(Tool.java:626)
org.antlr.Tool.process(Tool.java:459)
org.deved.antlride.runtime.Tool2.main(Tool2.java:24) 
```

当我尝试使用命令行编译时，它说我应该添加 output=AST。我的第一个想法是编译器看到一些只能在树解析器中使用的符号，但我找不到任何“非法”符号。

你能帮我么？

检查器的语法是：

```
//AwesomeChecker.g: ANTLR (context) checker voor Awesome++

tree grammar AwesomeChecker;

options
{
    tokenVocab = Awesome;       //import tokens from Awesome.tokens
    ASTLabelType = ANode;       //AST nodes are of type ANode
}

//Alter code generation so catch-clauses get replaced with this action.
//This disables ANTLR error handling: Exceptions are propagated upwards.
@rulecatch
{
    catch (RecognitionException re) 
    {
        throw re;
    }
}

@header
{
    import tools.*;
    import java.util.List;
    import java.util.ArrayList; 
}

@members
{
    //symbol table voor de identifiers
    private SymbolTable ST      = new SymbolTable();
    //voor de AST types
    private Checker checker     = new Checker();

    private void enter(ANode id, boolean isVar) throws AwesomeException {
        try {
            IdEntry ie = new IdEntry(id, isVar);
            this.ST.enter(id.getText(), ie);
        }
        catch (SymbolTableException e)  {
            throw new AwesomeException(id, "Al gedeclareerd");
        }
    }
}

start
    : program
    ;

program
        @init                   {   this.ST.openScope();    }
    :   ^(PROGRAM statement+)   {   this.ST.closeScope();   }
    ;

statement
    :   op=IDENTIFIER e=assignment_statement
            {
                checker.checkTypes($op, $e.start, op, checker.ANY_TYPE);
            }
    |   output_stat
    |   input_stat
    |   if_statement[false]
    |   do_while_statement
    |   declaration
    ;

assignment_statement
    : (op=BECOMES^ e=expr)+
            {
                op.setExprType($e.start.getExprType());
            }
    ;

declaration
    :   ^(DECL t=type c=CONST? id=IDENTIFIER (e=expr)?)
            {
                boolean isVar = (c == null); 
                int type = id.setExprType($t.start.getExprType());
                if(e == null) {

                } else {            
                    checker.checkType($e.start, type);
                }
                this.enter(id, isVar);
            }
    ;

type
    :   t=BOOLEAN
            {$t.setExprType(checker.BOOL_TYPE);}
    |   t=INTEGER
            {$t.setExprType(checker.INT_TYPE);}
    |   t=CHAR
        {$t.setExprType(checker.CHAR_TYPE);}
    ;

statements_block
        @init               {   this.ST.openScope();    }
    :   statement*
        {this.ST.closeScope();}
    ;

expr
    :   ^(op=COMPOUND (statement)* e=expr)
                {
                    op.setExprType($e.start.getExprType());
                }
    |   ^(op = (PLUS | MINUS | MULTIPLY)    e1=expr e2=expr)    
                            {   
                                checker.checkTypes($e1.start, $e2.start, op, checker.INT_TYPE); 
                                op.setExprType(checker.INT_TYPE);   
                            }
    |   ^(op = (DIVIDE | MODULUS)   e1=expr e2=expr)    
                            {   
                                checker.checkTypes($e1.start, $e2.start, op, checker.INT_TYPE);
                                if ($e2.text.equals("0"))
                                {
                                    throw new AwesomeException($e2.start, "Cannot divide by zero");
                                }
                                op.setExprType(checker.INT_TYPE);   
                            }
    |   ^(op = (SMALLER | SMALLEREQUAL | GREATEREQUAL | GREATER) e1=expr e2=expr)   
                            {   
                                checker.checkTypes($e1.start, $e2.start, op, checker.INT_TYPE); 
                                op.setExprType(checker.BOOL_TYPE);  
                            }
    |   ^(op = (EQUAL | NOTEQUAL) e1=expr e2=expr)  
                            {   
                                checker.checkTypes($e1.start, $e2.start, op, checker.ANY_TYPE); 
                                op.setExprType(checker.BOOL_TYPE);  
                            }
    |   ^(op = (AND | OR) e1=expr e2=expr)  
                            {   
                                checker.checkTypes($e1.start, $e2.start, op, checker.BOOL_TYPE);
                                op.setExprType(checker.BOOL_TYPE);  
                            }
    |   ^(op = UNARYEXPR (PLUS | MINUS) e1=expr)        
                            {   
                                checker.checkType($e1.start, checker.INT_TYPE);     
                                op.setExprType(checker.INT_TYPE);   
                            } 
    |   ^(op = UNARYEXPR NOTEQUAL e1=expr)      
                            {   
                                checker.checkType($e1.start, checker.BOOL_TYPE);    
                                op.setExprType(checker.BOOL_TYPE);  
                            }
    ;

input_stat
    :   ^(op=INPUT v=varlist)
                            {   
                                int type = $v.start.getExprType();
                                op.setExprType(type);
                            }
    ;

output_stat
    :   ^(op=OUTPUT v=varlist)
                            {
                                int type = $v.start.getExprType();
                                op.setExprType(type);
                            }
    ;

if_statement[boolean isExpr]
    :   ^(op=IF cond=expr (statements_block|op1=operand) (ELSE (statements_block|op2=operand))?)
            {
                checker.checkType($cond.start, checker.BOOL_TYPE);
                if(isExpr) {
                    int type = checker.checkTypes($op1.start, $op2.start, op, $op1.start.getExprType());
                    op.setExprType(type);
                } else {
                    op.setExprType(checker.VOID_TYPE);
                }
            }
    ;

do_while_statement
    :   ^(op=DO statements_block WHILE cond=expr)
        {
            checker.checkType($cond.start, checker.BOOL_TYPE);
            op.setExprType(checker.VOID_TYPE);
        }
    ;

varlist
    :   expr (COMMA expr)*
    ;

operand
    :   IDENTIFIER
    |   literal
    |   expr
    ;

literal
    :   NUMBER
    |   CHARLITERAL
    |   boolliteral  
    ;

boolliteral
        :    TRUE | FALSE
        ; 
```

语法.g 是：

```
grammar Awesome;

options {
    k=1;                                // LL(1) - do not use LL(*)
    language=Java;                      // target language is Java (= default)
    output=AST;                         // build an AST
}

tokens {
    COLON       =   ':'     ;
    COMMA       =   ','     ;
    SEMICOLON   =   ';'     ;
    LPAREN      =   '('     ;
    RPAREN      =   ')'     ;
    LBRACKET    =   '{'     ;
    RBRACKET    =   '}'     ;

    // keyword for AST
    DECL        =   'decl'  ;
    UNARYEXPR   =   'unexpr';
    COMPOUND    =   'compound';
    ASSIGNMENT  =   'ASSIGNMENT';

    // operators
    BECOMES     =   '='     ;
    PLUS        =   '+'     ;
    MINUS       =   '-'     ;
    MULTIPLY    =   '*'     ;
    DIVIDE      =   '/'     ;
    MODULUS     =   '%'     ;
    EXCLAMATION =   '!'     ;

    // comparators
    AND             =   'AND'   ;
    OR              =   'OR'    ;
    SMALLER         =   '<'     ;
    SMALLEREQUAL    =   '<='    ;
    GREATER         =   '>'     ;
    GREATEREQUAL    =   '>='    ;
    EQUAL           =   '=='    ;
    NOTEQUAL        =   '!='    ;  

    // keywords
    PROGRAM     =   'program'   ;
    RETURN      =   'return'   ;
    VAR         =   'var'       ;
    CONST       =   'const'     ;
    INPUT       =   'input'     ;
    OUTPUT      =   'output'     ;
    IF          =   'if'        ;
    THEN        =   'then'      ;
    ELSE        =   'else'      ;
    DO          =   'do'        ;
    WHILE       =   'while'     ;

    // types
    INTEGER     =   'int'   ;
    BOOLEAN     =   'bool'  ;
    CHAR        =   'char'  ;
    STRING      =   'string';

    TRUE        =   'true';
    FALSE       =   'false';

}

// Parser rules
start
    : program
    ;

program
    :   (statement)+ EOF
            ->  ^(PROGRAM statement+)
    ;

statement
    :   IDENTIFIER assignment_statement SEMICOLON!
    |   output_stat SEMICOLON!
    |   input_stat SEMICOLON!
    |   if_statement
    |   do_while_statement
    |   declaration SEMICOLON!
    ;

declaration
    :   type CONST? IDENTIFIER (BECOMES expr)?
        -> ^(DECL type CONST? IDENTIFIER (BECOMES expr)?)
    ;

type
    :   BOOLEAN
    |   INTEGER
    |   CHAR
    |   STRING
    ;

statements_block
    :   LBRACKET statement* RBRACKET
    ;

assignment_statement
    : (BECOMES^ expr)+
    ;

expr
    :   expr_or
    |   expr_compound
    |   if_statement
    ;

expr_unary
    :   operand
    |   PLUS operand -> ^(UNARYEXPR PLUS operand)
    |   MINUS operand -> ^(UNARYEXPR MINUS operand)
    |   EXCLAMATION operand -> ^(UNARYEXPR EXCLAMATION operand)
    ;

expr_multiply
    :   expr_unary ((MULTIPLY | DIVIDE | MODULUS)^ expr_unary)*
    ;

expr_plus
    :   expr_multiply ((PLUS | MINUS)^ expr_multiply)*
    ;

expr_compare
    :   expr_plus ((SMALLER | SMALLEREQUAL | GREATEREQUAL | GREATER | EQUAL | NOTEQUAL)^ expr_plus)*
    ;

expr_and
    :   expr_compare (AND^ expr_compare)* 
    ;

expr_or
    :   expr_and (OR^ expr_and)* 
    ;

expr_compound
    :   LBRACKET (statement)* RETURN expr SEMICOLON RBRACKET
        -> ^(COMPOUND (statement)* expr)
    ;

do_while_statement
    :   DO^ statements_block WHILE expr
    ;

if_statement
    :   IF^ expr (statements_block|operand) (ELSE (statements_block|operand))?
    ;

input_stat
    :   INPUT^ LPAREN! varlist RPAREN!
    ;

output_stat
    :   OUTPUT^ LPAREN! varlist RPAREN!
    ;

varlist
    :   expr (COMMA expr)*
    ;

operand
    :   IDENTIFIER
    |   literal
    |   LPAREN! expr RPAREN!
    ;

literal
    :   NUMBER
    |   CHARLITERAL
    |   boolliteral  
    ;

boolliteral
        :    TRUE | FALSE
        ;

// Lexer rules

IDENTIFIER
    :   LETTER (LETTER | DIGIT)*
    ;

CHARLITERAL
    :   '\'' LETTER '\''
    ;

NUMBER
    :   DIGIT+
    ;

COMMENT
    :   '[' .* ']' 
            { $channel=HIDDEN; }
    ;

WS
    :   (' ' | '\t' | '\f' | '\r' | '\n')+
            { $channel=HIDDEN; }
    ;

fragment DIGIT  :   ('0'..'9') ;
fragment LOWER  :   ('a'..'z') ;
fragment UPPER  :   ('A'..'Z') ;
fragment LETTER :   LOWER | UPPER ;

// EOF 
```

编辑：我发现

```
assignment_statement
        : (op=BECOMES^ e=expr)+ 
```

是错误，应该是

```
assignment_statement
        : (op=BECOMES e=expr)+ 
```

它编译没有错误！:D 谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T12:34:52.990

我找到

```
assignment_statement
        : (op=BECOMES^ e=expr)+ 
```

是错误，应该是

```
assignment_statement
        : (op=BECOMES e=expr)+ 
```

我没有更改语法文件选项中的任何内容。

它现在编译没有错误！:D 谢谢你的帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T10:23:00.273

> 但我认为`output=AST`不能用于树行者。

当然可以。这个想法是您的第一个语法将输入文本转换为节点树，然后树语法执行一些其他操作。如果您正在制作一个编译器，那么可能会在解析和代码生成阶段之间使用 tree walker。您的输出类型必须是 AST，以便流程的下一阶段可以完成它的工作......即使您实际上没有对树进行任何更改或对其进行任何其他操作。

您的问题是树语法中的这一行：

```
ASTLabelType = ANode 
```

在树语法中，它期望传入的 AST 具有该类型的节点，但您的第一个语法不会创建该类型的节点。它创建默认的 CommonTree 节点。所以只需在第一个语法中设置同一行。

我`ASTLabelType`什至在官方参考书中也没有看到很多文档，但是在 antlr wiki的[“树构造”页面底部附近有一些关于自定义节点类型的注释。](http://www.antlr.org/wiki/display/ANTLR3/Tree+construction)

# python - 如何将种子链接存储在数据库中？

> ID：11242012
> 
> 赞同：-4
> 
> 时间：2012-06-28T09:47:57.643
> 
> 标签：python, django, scrapy

我在一个包含磁铁种子列表的蜘蛛中有一个 python 列表。现在我如何将此列表/磁力种子存储在数据库字段中？这是代码：

```
class MySpider(BaseSpider):

    name = "myspider"
    allowed_domains = ["thepiratebay.se"]
    base_url = "http://www.thepiratebay.se/search/%s/"
    start_urls = []

    def __init__(self, *args, **kwargs):
        movies = Movie.objects.all()
        for movie in movies:
            self.start_urls.append(self.base_url % movie.name)
        super(MySpider, self).__init__(*args, **kwargs)

    def parse(self, response):
        self.log('Hi, this is an item page! %s' % response.url)
        hxs = HtmlXPathSelector(response)
        items = hxs.select('//table/tr/td[contains(@class, "detName")]')
        item = items
        item_name = hxs.select('//a[@class="detLink"]/text()').extract()[1]
        print item_name  #list containing movie names      
        torrent_link = hxs.select('//a[@title="Download this torrent using magnet"]/@href').extract()[1]
        print torrent_link # torrent_link contains list of torrent links 
```

现在我想将这些链接保存在数据库中？？？怎么做 ？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T12:25:21.307

如果您不知道如何保存到数据库，那么我*强烈*建议您在[此处学习 django 教程](https://docs.djangoproject.com/en/dev/intro/tutorial01/)。它将向您展示所有使用 sqlite 的 CRUD 内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T10:32:16.117

假设您没有使用 python 进行数据库编程的经验，我建议您在谷歌上搜索“python 数据库教程”（我建议从 sqlite 开始）并尝试遵循它并将其调整为您当前的脚本。

# ajax - JSF、ajax 和 commandLink，不重定向？

> ID：11242015
> 
> 赞同：0
> 
> 时间：2012-06-28T09:48:20.197
> 
> 标签：ajax, jsf, commandlink

我正在使用 jsf 应用程序，我想使用 commandLink 在我的托管 bean 上执行一个操作，其中有一个服务器调用，但我不想重新加载页面，我尝试使用 commandButton 和属性更新有用？我怎样才能用 commandLink 做到这一点？

我通过使用 primefaces 3.2 的 commadLink 解决了这个问题 :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T12:57:24.777

只需返回`null`或`void`从操作方法。

```
<h:commandLink value="submit" action="#{bean.submit}">
    <f:ajax />
</h:commandLink> 
```

和

```
public void submit() {
    // ...
} 
```

您也可以改用该`<f:ajax listener>`属性。

```
<h:commandLink value="submit">
    <f:ajax listener="#{bean.submit}" />
</h:commandLink> 
```

# c# - 如何使用 Linq to sql 概念从 DataGrid 获取特定列值并将其添加为 wpf 中的组合框项

> ID：11242016
> 
> 赞同：0
> 
> 时间：2012-06-28T09:48:23.743
> 
> 标签：c#, wpf, linq-to-sql

![状态](../Images/6439bbbf3faaf28c73051e42da46c119.png)

我已经在 DataGrid 控件中加载了上面的表状态。但是我想获取特定的列**state_name**，然后将它的值（Tx，TN，UP，Nul，.....）添加到组合框项目中。我编写的将状态表加载到 DataGrid 控件中的代码。

```
 using (DataClasses1DataContext _mc = new DataClasses1DataContext())
        {
            var _MyCountry = from cntry in _mc.GetTable<state>() select cntry;
            grd_table.ItemsSource = _MyCountry;                
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T10:55:12.663

有很多解决方案，但我个人会使用 linQ，因为它很容易使用。我猜您希望您的 ComboBoxItems 的值是状态的 state_id 和显示的名称 state_name？以下代码对您有帮助吗？

```
 grd_table.ItemsSource = _MyCountry;
        comboBox.ItemsSource = (from m in _MyCountry select m).ToList();
        comboBox.DisplayMemberPath = "state_name";
        comboBox.SelectedValuePath = "state_id"; 
```

# python - 将scrapy蜘蛛构建到我自己的程序中，我不想从命令行调用scrapy）

> ID：11242019
> 
> 赞同：8
> 
> 时间：2012-06-28T09:48:33.883
> 
> 标签：python, web-scraping, scrapy

与这个问题类似： [stackoverflow: running-multiple-spiders-in-scrapy](https://stackoverflow.com/questions/10943745/running-multiple-spiders-in-scrapy)

我想知道，我可以从另一个 python 程序中运行整个scrapy 项目吗？可以说我想构建一个需要抓取几个不同站点的完整程序，并且我为每个站点构建整个scrapy项目。

我不想从命令行运行，而是想运行这些蜘蛛并从中获取信息。

我可以在 python 中使用 mongoDB，我已经可以构建包含蜘蛛的 scrapy 项目，但现在只需将它们全部合并到一个应用程序中。

我想运行一次应用程序，并且能够从我自己的程序中控制多个蜘蛛

为什么要这样做？好吧，这个应用程序也可能使用 API 连接到其他站点，并且需要实时比较 API 站点与抓取站点的结果。我不想从命令行调用scrapy，这一切都意味着是自包含的。

（我最近一直在问很多关于抓取的问题，因为我正在尝试找到合适的解决方案来构建）

谢谢 ：）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-28T10:28:01.677

是的，你当然可以；）

[这个想法（灵感来自这篇博文）](http://tryolabs.com/Blog/2011/09/27/calling-scrapy-python-script/)是创建一个 worker，然后在你自己的 Python 脚本中使用它：

```
from scrapy import project, signals
from scrapy.conf import settings
from scrapy.crawler import CrawlerProcess
from scrapy.xlib.pydispatch import dispatcher
from multiprocessing.queues import Queue
import multiprocessing

class CrawlerWorker(multiprocessing.Process):

    def __init__(self, spider, result_queue):
        multiprocessing.Process.__init__(self)
        self.result_queue = result_queue

        self.crawler = CrawlerProcess(settings)
        if not hasattr(project, 'crawler'):
            self.crawler.install()
        self.crawler.configure()

        self.items = []
        self.spider = spider
        dispatcher.connect(self._item_passed, signals.item_passed)

    def _item_passed(self, item):
        self.items.append(item)

    def run(self):
        self.crawler.crawl(self.spider)
        self.crawler.start()
        self.crawler.stop()
        self.result_queue.put(self.items) 
```

使用示例：

```
result_queue = Queue()
crawler = CrawlerWorker(MySpider(myArgs), result_queue)
crawler.start()
for item in result_queue.get():
    yield item 
```

另一种方法是执行scrapy crawl 命令`system()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-08T15:49:35.787

Maxime Lorant 的回答终于解决了我在自己的脚本中构建爬虫时遇到的问题。它解决了我遇到的两个问题：

1.  它允许连续调用蜘蛛两次（在scrapy教程中的简单示例中，这会导致崩溃，因为您无法两次启动twister reactor）

2.  它允许将变量从蜘蛛返回到脚本中。

只有一件事：这个例子不适用于我现在使用的scrapy版本（Scrapy 1.5.2）和Python 3.7

在玩了一些代码之后，我得到了一个我想分享的工作示例。我还有一个问题，请参阅下面的脚本。这是一个独立的脚本，所以我也添加了一个蜘蛛

```
import logging
import multiprocessing as mp

import scrapy
from scrapy.crawler import CrawlerProcess
from scrapy.signals import item_passed
from scrapy.utils.project import get_project_settings
from scrapy.xlib.pydispatch import dispatcher

class CrawlerWorker(mp.Process):
    name = "crawlerworker"

    def __init__(self, spider, result_queue):
        mp.Process.__init__(self)
        self.result_queue = result_queue
        self.items = list()
        self.spider = spider
        self.logger = logging.getLogger(self.name)

        self.settings = get_project_settings()
        self.logger.setLevel(logging.DEBUG)
        self.logger.debug("Create CrawlerProcess with settings {}".format(self.settings))
        self.crawler = CrawlerProcess(self.settings)

        dispatcher.connect(self._item_passed, item_passed)

    def _item_passed(self, item):
        self.logger.debug("Adding Item {} to {}".format(item, self.items))
        self.items.append(item)

    def run(self):
        self.logger.info("Start here with {}".format(self.spider.urls))
        self.crawler.crawl(self.spider, urls=self.spider.urls)
        self.crawler.start()
        self.crawler.stop()
        self.result_queue.put(self.items)

class QuotesSpider(scrapy.Spider):
    name = "quotes"

    def __init__(self, **kw):
        super(QuotesSpider, self).__init__(**kw)

        self.urls = kw.get("urls", [])

    def start_requests(self):
        for url in self.urls:
            yield scrapy.Request(url=url, callback=self.parse)
        else:
            self.log('Nothing to scrape. Please pass the urls')

    def parse(self, response):
        """ Count number of The's on the page """
        the_count = len(response.xpath("//body//text()").re(r"The\s"))
        self.log("found {} time 'The'".format(the_count))
        yield {response.url: the_count}

def report_items(message, item_list):
    print(message)
    if item_list:
        for cnt, item in enumerate(item_list):
            print("item {:2d}: {}".format(cnt, item))
    else:
        print(f"No items found")

url_list = [
    'http://quotes.toscrape.com/page/1/',
    'http://quotes.toscrape.com/page/2/',
    'http://quotes.toscrape.com/page/3/',
    'http://quotes.toscrape.com/page/4/',
]

result_queue1 = mp.Queue()
crawler = CrawlerWorker(QuotesSpider(urls=url_list[:2]), result_queue1)
crawler.start()
# wait until we are done with the crawl
crawler.join()

# crawl again
result_queue2 = mp.Queue()
crawler = CrawlerWorker(QuotesSpider(urls=url_list[2:]), result_queue2)
crawler.start()
crawler.join()
#
report_items("First result", result_queue1.get())
report_items("Second result", result_queue2.get()) 
```

如您所见，代码几乎相同，除了一些导入由于scrapy API的变化而发生变化。

有一件事：我收到了 pydistatch 导入的弃用警告：

```
 ScrapyDeprecationWarning: Importing from scrapy.xlib.pydispatch is deprecated and will no longer be supported in future Scrapy versions. If you just want to connect signals use the from_crawler class method, otherwise import pydispatch directly if needed. See: https://github.com/scrapy/scrapy/issues/1762
  module = self._system_import(name, *args, **kwargs) 
```

我在[这里](https://github.com/scrapy/scrapy/issues/2959#issuecomment-335656753)找到了如何解决这个问题。但是，我无法让这个工作。有人知道如何应用 from_crawler 类方法来摆脱弃用警告吗？

# php - Phing - 大型部署

> ID：11242021
> 
> 赞同：1
> 
> 时间：2012-06-28T09:48:43.127
> 
> 标签：php, phing

我正在尝试开始使用 phing 来部署我正在处理的项目。到目前为止，我只是在生产服务器上使用了“git pull”并手动进行了其他需要的操作。

通过网络，我看到很多人推荐以下过程：

1.  在本地计算机上准备和存档所有内容
2.  SCP/FTP 到生产服务器并在那里解压
3.  更新几个符号链接

我喜欢这个过程，因为它的透明度、安全性和易于返回到以前的版本。但是我的项目代码（以及所有主题/图像等）大约需要 300Mb，整个过程大约需要 2 小时才能完成，而早些时候我只花了不到一分钟。

为一个简单的修补程序等待 2 小时似乎真的太多了。关于如何克服这个问题的任何想法？或者，也许您会建议不同的部署方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T16:07:29.603

为了扩展 marcelog 的评论，如果您有很多不会随时间变化的静态内容（主题），那么您可能希望将其与代码部署分开并让它 1) 单独控制版本，这样它就不会经常刷新 2) 将其放在不同的服务器/主机上以区分静态与非静态。

如果您查看您的提交历史并且您还没有触及 repo 的整个部分，为什么不将它们提取到一个不会每次都重新发布的不同 repo 中呢？

# c# - 如何在c#中将图像与稍微不同的另一个图像（旋转、亮度、角度）进行比较

> ID：11242022
> 
> 赞同：3
> 
> 时间：2012-06-28T09:48:43.307
> 
> 标签：c#, image-processing, comparison, pattern-matching, template-matching

我正在创建一个应用程序来通过书脊识别书籍。我想做的是给书脊拍照并将其与书籍数据库相匹配。

我希望为此使用模式匹配和模板匹配。首先，我希望使用保存在数据库中的书脊模板通过模板匹配搜索书籍，并将它们与拍摄的照片匹配。但是这个过程非常昂贵，并且需要很长时间才能遍历数据库中保存的所有图像。

所以我想用直方图代替。使用直方图和阈值处理后，我能够找到类似的图像。但问题是，当涉及到书籍时，可能会有相同颜色甚至不同光照条件的书脊。因此，逐像素搜索和比较会产生很多假阴性结果，这些图像可能会因不同的光照条件、一点点旋转和大小而有所不同。

如果可以，请指导我如何通过书脊认出这本书。

到目前为止，我一直在使用颜色平均值，但这还不够，我可以用来识别这本书的其他独特功能是什么。

![在此处输入图像描述](../Images/79eda47e14623fdb56d3439d59a44938.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T10:31:47.363

您应该使用旋转和缩放不变描述符来比较您的图像（在某种预处理之后，可能是阈值和边缘检测），例如傅立叶描述符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T12:34:38.677

您可以为每个图像使用基于 SIFT 的描述符，这些描述符可以存储在哈希图中。然后是为正在搜索的图像创建描述符并在哈希图上查找的问题。

[在此处阅读 SIFT](http://en.wikipedia.org/wiki/Scale-invariant_feature_transform)

# json - kaazing publishBasic 传递 json 数据并在 node.js 中捕获它

> ID：11242029
> 
> 赞同：0
> 
> 时间：2012-06-28T09:48:54.043
> 
> 标签：json, node.js, message-passing, kaazing

kaazing publishBasic 传递 json 数据并在 node.js 中捕获它

下面是通过 kaazing AMQP 库将数据发布到 RabbitMQ 的代码

```
var body = new ByteBuffer();
body.putString("new_bidder", Charset.UTF8);
body.flip();

var headers = {};
publishChannel.publishBasic(body, headers, consumeExchange, "server.aa.bb", false, false); 
```

这是在 node.js 中捕获数据的代码

```
q.subscribe(function (message) {
// Print messages to stdout
var msg = message.toString('UTF-8');
console.log(msg.length);
// console.log(message);
}) 
```

问题是 publishBasic 函数期望正文以字节为单位，我想传递 json 并在 node.js 中获取该 json

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T17:39:56.453

只需使用 JSON.stringify。

```
var myObject = {
     bidder : "new_bidder",
     property2 : property2_value,
};

var body = new ByteBuffer();
body.putString(JSON.stringify(myObject), Charset.UTF8);
body.flip();

publishChannel.publishBasic(body, headers, consumeExchange, "server.aa.bb", false, false); 
```

在 Node.JS 中，您使用 JSON.parse：

```
q.subscribe(function (message) {
   var msg = message.toString('UTF-8'); 
   // Print messages to stdout
   console.log(msg);
   // now convert back to JSON object so you can use in your code
   var myObject = new Object();
   myObject = JSON.parse(msg);
   console.log(msg.bidder);
}) 
```

# c# - 在 C# 中直接在 DateTimePicker 上转到月份和年份

> ID：11242033
> 
> 赞同：3
> 
> 时间：2012-06-28T09:48:59.023
> 
> 标签：c#, datetimepicker

`DateTimePicker`如果用户在我的日期中键入它会自动聚焦它的月份部分，并且在其中键入该日期后转到年份部分，我该如何实现这一点？
因为我不希望他必须按右键来聚焦它......有没有办法以编程方式做到这一点？

用户不可能已经点击了月份或年份部分，因为他用键盘完成了所有操作，并`DateTimePicker`通过按 TAB 来聚焦。

格式很短：`DD/MM/YYYY`...

有人知道吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T10:03:47.730

尝试使用事件 valuechanged

尝试这个：

```
private void dateTimePicker1_ValueChanged(object sender, EventArgs e)
    {
        SendKeys.Send("{Right}");
    } 
```

基本上，当您按下右箭头时，焦点部分会发生变化，该代码行模拟右箭头键按下

# c++ - 在 windows xp 中运行 windows 7 C++/Cli 应用程序

> ID：11242035
> 
> 赞同：0
> 
> 时间：2012-06-28T09:49:03.090
> 
> 标签：c++, windows-7, windows-xp, c++-cli

我已经在 windows 7 环境下的 Visual Studio 2010 中的 c++/cli 中创建了一个应用程序。它工作得很好。但是我后来才知道 xp 平台。现在我想在 windows xp 中安装我的应用程序。现在我觉得我遇到了一个大问题。我是否需要在 windows xp 中使用本机 c++ 再次重做应用程序，或者我可以在 xp 中安装 .net 并执行应用程序。请阐明一些光..

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T10:37:23.350

此外，请确保您静态链接运行时库（或者如 stijn 所说，如果动态链接，则安装所需的依赖项），以便将程序中使用的所有库例程复制到最终的 EXE 文件中。

> 在配置属性、C/C++、代码生成、运行时库 -> 多线程 (/MT)
> 
> 此外，如果使用 MFC：
> 
> 配置属性、常规、使用 MFC -> 在静态库中使用 MFC
> 
> 此外，如果使用 ATL：
> 
> 配置属性、类型、ATL 的使用 -> 到 ATL 的静态链接

参考：[vs2010 运行时中的静态链接](http://social.msdn.microsoft.com/Forums/en/vcgeneral/thread/845617aa-ab76-4fe1-a658-d020828598b8 "微软")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T09:56:15.397

无需重做一切。安装 .Net 3.5 或 4（取决于您在 VS2010 中使用的内容）和本机代码的依赖项（例如 crt 可再发行组件）应该可以解决问题。

但是请注意，Windows vista/7 中的 kernel.dll 的某些功能在 Windows XP 中根本不存在。我曾经花了很长时间弄清楚`InitializeSRWLock`XP 不存在。解决此类问题可能非常困难，因此请确保您有一台运行 XP 的机器来测试所有内容。

# php - $PHP_SELF 在页面加载后立即执行

> ID：11242037
> 
> 赞同：1
> 
> 时间：2012-06-28T09:49:08.793
> 
> 标签：php, mysql, html

我创建了一个 HTML 页面来向 MySQL 数据库输入数据。我在同一个 HTML 页面中嵌入了 PHP 代码。这是代码，

```
<html>
<head>
</head>
<body>

<?php

/* Database connection operations */
require_once("db_handler.php");

$conn = iniCon();
$db = selectDB($conn);

?>

<b id="loc_caption_1">Enter a new location</b>
<div id="loca">
    <form name="locForm" action="<?php echo $PHP_SELF; ?>" method="post" >
        <table width="300" border="0">
          <tr>
            <td>Location ID</td>
            <td><input type="text" name="lid" readonly="readonly" value="<?php echo $new_id; ?>" style="text-align:right" /></td>
          </tr>
          <tr>
            <td>Code</td>
            <td><input type="text" name="code" style="text-align:right" /></td>
          </tr>
          <tr>
            <td>Location</td>
            <td><input type="text" name="loc" style="text-align:right" /></td>
          </tr>
        </table>
</div>
<br/>
<div id="buttons">
    <input type="reset" value="Clear" /> <input type="submit" value="Save" />
</div>
    </form>

<?php

/* Saving new record */
$id = $_POST["lid"];
$code = $_POST["code"];
$location = $_POST["loc"];

$query = "INSERT INTO locations(LID, Code, Location) VALUES('$id', '$code', '$location')";

if (!mysql_query($query, $conn))
{
    die("Error " . mysql_error());
}
else
{
    echo "<br/><br/>";
    echo "1 record added successfully!";
    echo "<meta http-equiv=\"refresh\" content=\"3;URL=locations.php\">";
}

mysql_close($conn);

?>

</body>
</html> 
```

我遇到的问题是，为将数据插入数据库而编写的 PHP 代码块在页面加载后立即执行一次。我怎样才能阻止这种情况发生？我希望它等到我将数据输入表单并且当我按下提交按钮时，然后执行。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T09:51:51.063

首先为发布按钮命名，例如

```
<input type="submit" value="Save" name="GoBtn" /> 
```

将要在提交后执行的代码放在下面的包装器中

```
if(isset($_POST['GoBtn'])
{
  //code here
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T09:51:52.980

将 php 代码放在 IF 中

```
if(isset($_POST["submit"])){ // if form is submitted
 // do insert things
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T09:52:15.567

您的 php 页面被解释为一个流程：这意味着首先显示表单，然后执行 php 代码部分，插入空值（我猜）。

在脚本部分中，您必须使用以下内容测试您是否处于表单显示上下文或表单提交上下文中：

```
if ($_POST) {
   // form submit context
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-28T09:52:24.713

将提交按钮标签更改为：

```
<input type="submit" name="submitForm" value="Save" /> 
```

在执行插入的 PHP 代码之前，检查 submitForm 为：

```
if(isset($_POST["submitForm"]){
//follow the insertion PHP code
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-28T09:51:01.590

您需要检查是否提交了任何数据，然后才能开始工作：

```
if (!empty($_POST)) {
    ...
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-28T09:51:19.453

您保存数据的代码应该是`if (!empty($_POST))`块状的。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-28T09:51:34.250

您只需要检查是否提交。

```
<?php
if(isset($_POST['submit']))  // Check if form submitted or not
{
  --- //Code for insert to database.
}
?> 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-06-28T09:55:42.527

1.  在插入数据库之前，您必须检查 $_POST 中是否有可用的变量。

    if(!empty($_POST["lid"])) {
    /* 保存新记录 */ $id = mysqli_real_escape_string($_POST["lid"]); $code = mysqli_real_escape_string($_POST["code"]); $location = mysqli_real_escape_string($_POST["loc"]);

    $query = "INSERT INTO locations(LID, Code, Location) VALUES('$id', '$code', '$location')";

    if (!mysql_query($query, $conn)) { die("Error " . mysql_error()); } 其他 { 回声“

    ”; echo "1条记录添加成功！"; 回声“”；}

    mysql_close($conn); }

2.  使用 mysqli_* 函数，mysql_* 函数现在已被贬值。

3.  在插入数据库之前使用 mysqli_real_escape_string() 以防止 sql 注入。
4.  您应该将此数据库插入区域移动到页面顶部并使用“header('location:locations.php');” 用于重定向。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-06-28T10:03:08.603

根据发布数据的存在执行 PHP 代码块。为了精炼，您甚至可以在语义上测试发布的值。

```
if ( (array_key_exists('lid', $_POST) 
AND  (array_key_exists('code', $_POST) 
AND  (array_key_exists('loc', $_POST) ) {
   then execute PHP code block
} 
```

# c# - 使用带有 WCF SOAP 的 XmlSerializer 添加根 xmlns

> ID：11242038
> 
> 赞同：4
> 
> 时间：2012-06-28T09:49:22.053
> 
> 标签：c#, xml, wcf, soap, xsd

我有一个由我们的客户从第三方提供的 XML Schema 文档生成的类文件。我应该能够将这个生成的类用于客户的 SOAP Web 服务，但是我遇到了一些问题。

我创建了一个`ServiceContract`接口，因此我可以使用 WCF`ChannelFactory`连接到 Web 服务，如下所示：

```
[ServiceContract(Namespace = "http://theircompany.co.uk/theirapp/v1")]
[XmlSerializerFormat]
public interface IWebService
{
    [OperationContract]
    EPSStatus serviceNotifyDataEventSet(
        [XmlElement(Namespace = "http://www.thirdparty.org/thirdapp")] DataEventSet dataSet
    );
} 
```

两者`EPSStatus`都`DataEventSet`在我生成的类文件中。的重要部分`DataEventSet`：

```
[System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "2.0.50727.42")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(Namespace="http://www.thirdparty.org/thirdapp")]
[System.Xml.Serialization.XmlRootAttribute(Namespace="http://www.thirdparty.org/thirdapp", IsNullable=false)]
public partial class DataEventSet {
    //...
} 
```

当我现在尝试调用时，`IWebService.serviceNotifyDataEventSet`我得到以下 SOAP 正文（在他们的服务器上启用了 WCF Trace 时发现）：

```
<s:Body xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <serviceNotifyDataEventSet xmlns="http://theircompany.co.uk/theirapp/v1">
        <dataSet>
            <dataEvents xsi:type="q1:DAInt" xmlns="" xmlns:q1="http://www.thirdparty.org/thirdapp">
                <id>47245361157</id>
                <time>
                    <tick_time>141728877218</tick_time>
                    <time>2012-06-28T10:07:57.218+01:00</time>
                    <time_type>OSACBM_TIME_MIMOSA</time_type>
                </time>
                <value>42</value>
            </dataEvents>
            <id xmlns="">0</id>
            <site xmlns="">
                <category>SITE_SPECIFIC</category>
            </site>
            <time xmlns="">
                <tick_time>141728877218</tick_time>
                <time>2012-06-28T10:07:57.218+01:00</time>
                <time_type>OSACBM_TIME_MIMOSA</time_type>
            </time>
        </dataSet>
    </serviceNotifyDataEventSet>
</s:Body> 
```

因此，我可以调用 Web 服务，看起来好像我的数据正在正确序列化，但是在服务器端`dataSet`却是空的。我还从一个与以下主体一起工作的客户那里得到了跟踪：

```
<soap:Body>
    <serviceNotifyDataEventSet xmlns="http://theircompany.co.uk/theirapp/v1">
        <dataSet xmlns="http://www.thirdparty.org/thirdapp">
            <dataEvents xmlns:q1="http://www.thirdparty.org/thirdapp" xsi:type="q1:DAReal" xmlns="">
                <id>47245361408</id>
                <time>
                    <tick_time>141730618844</tick_time>
                    <time>2012-06-28T10:36:58.843+01:00</time>
                    <time_type>OSACBM_TIME_MIMOSA</time_type>
                </time>
                <value>12.34</value>
            </dataEvents>
            <id xmlns="">0</id>
            <site xmlns="">
                <category>SITE_SPECIFIC</category>
            </site>
            <time xmlns="">
                <tick_time>141730618843</tick_time>
                <time>2012-06-28T10:36:58.843+01:00</time>
                <time_type>OSACBM_TIME_MIMOSA</time_type>
            </time>
        </dataSet>
    </serviceNotifyDataEventSet>
</soap:Body> 
```

我能看到的唯一区别是根命名空间设置在`dataSet`工作数据包上：`<dataSet xmlns="http://www.thirdparty.org/thirdapp">`. 在我的数据包上，根本没有指定命名空间。

我的问题是，我的分析听起来合理吗？如果是，有什么方法可以让根 xmlns 在我的 xmlns 上正确输出`dataSet`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T12:59:58.623

我现在已经设法使用一种相对简单的方法来实现它。幸运的是，从 XML 模式生成的代码将`xsd`所有类标记为不带构造函数的部分类。我添加了自己的部分类来定义覆盖命名空间的默认构造函数，如下所示：

```
public partial class DataEventSet 
{
    [XmlNamespaceDeclarations]
    public XmlSerializerNamespaces _xmlns;

    /// <summary>
    /// Constructor for DataEventSet that sets up default namespaces
    /// </summary>
    public DataEventSet()
    {
        _xmlns = new XmlSerializerNamespaces();
        _xmlns.Add("", "http://www.thirdparty.org/thirdapp");
        _xmlns.Add("o", "http://www.thirdparty.org/thirdapp");
    }
} 
```

现在序列化如下：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Body xmlns:s="http://www.w3.org/2003/05/soap-envelope">
  <serviceNotifyDataEventSet xmlns="http://theircompany.co.uk/theirapp/v1">
    <dataSet xmlns="http://www.thirdparty.org/thirdapp" xmlns:o="http://www.thirdparty.org/thirdapp">
      <dataEvents xsi:type="o:DABool" xmlns="" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
        <id>47245361157</id>
        <value>true</value>
      </dataEvents>
      <id xmlns="">0</id>
      <site xmlns="">
        <category>SITE_SPECIFIC</category>
      </site>
      <time xmlns="">
        <tick_time>396106152171</tick_time>
        <time>2012-07-20T13:29:12.171Z</time>
        <time_type>OSACBM_TIME_MIMOSA</time_type>
      </time>
    </dataSet>
  </serviceNotifyDataEventSet>
</s:Body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T14:49:21.130

你的分析听起来很合理。在查看您发布的代码时，我质疑`DataEventSet`该类是否是您应该在`<dataSet>`元素方面查看的类。使用`System.Xml.Serialization.XmlRootAttribute`应该允许您为元素定义/应用正确的命名空间。我的猜测是，您需要在不同的类上使用此属性才能`<dataSet>`正确输出元素。

# asp.net - 使用RequiredFieldValidator 检查两个文本框中的至少一个是否有一些文本？

> ID：11242042
> 
> 赞同：2
> 
> 时间：2012-06-28T09:49:27.650
> 
> 标签：asp.net, validation, requiredfieldvalidator

我的 asp.net 页面上有两个文本框和一个提交按钮。如何使用单个或多个RequiredFieldValidators 来检查两个文本框中的至少一个在提交按钮单击时是否有一些文本？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T11:31:59.400

除了两个文本框外，还添加了一个 CustomValidator 并调用服务器端验证。

```
<asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
<br />
<asp:TextBox ID="TextBox2" runat="server"></asp:TextBox>
<br />
<asp:CustomValidator ID="CustomValidator1" runat="server" ErrorMessage="CustomValidator" OnServerValidate="CustomValidator_ServerValidate"></asp:CustomValidator>
<br />
<asp:Button ID="Button1" runat="server" onclick="Button1_Click" Text="Button" /> 
```

服务器端功能

```
public void CustomValidator_ServerValidate(object source, System.Web.UI.WebControls.ServerValidateEventArgs args)
    {
        args.IsValid = true;

        if (TextBox1.Text == "" && TextBox2.Text == "")
        {
            CustomValidator1.ErrorMessage = "Enter value in at least one text Box";
            args.IsValid = false;

        }
    } 
```

希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T11:14:49.260

您还可以将 ClientValidationFunction 属性与 CustomValidator 和客户端函数一起使用

```
<asp:TextBox ID="txtBoxId1" runat="server"></asp:TextBox>
<asp:TextBox ID="txtBoxId2" runat="server"></asp:TextBox>
<asp:CustomValidator ID="cvId" runat="server" ClientValidationFunction="Validators.DoWork">
error</asp:CustomValidator>

<script language="javascript">
var Validators = {
DoWork: function (source, clientside_arguments) {

    var valid_val = true;

    //get the controls values using jQuery
    var txtBoxId1= $('input:text[id*=txtBoxId1]').val();
    var txtBoxId2= $('input:text[id*=txtBoxId2]').val();

    if (your condition) {
        valid_val = false;
    }

    clientside_arguments.IsValid = valid_val;
}
}
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T10:19:01.820

首先，如果一个字段不是必须的，你不应该使用[RequiredFieldValidator](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.requiredfieldvalidator.aspx)而是你可以使用[CustomValidator](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.customvalidator.aspx)。

> RequiredFieldValidator - 检查以确保用户输入了一个值。
> 
> CustomValidator - 根据您（开发人员）提供的自定义验证逻辑检查表单字段的值。

这句话来自[Scott Mitchell 的 Using the CustomValidator Control](http://www.4guysfromrolla.com/articles/073102-1.aspx)。

您还可以[根据 DropDownList 的值检查此动态启用或禁用RequiredFieldValidator，](https://stackoverflow.com/questions/2554840/dynamically-enable-or-disable-requiredfieldvalidator-based-on-value-of-dropdownl)因为如果您应该使用RequiredFieldValidator，则如果TextBox 之一有效，则需要动态禁用两者之一。

# sql - DB2 9.7 上唯一约束的最大大小

> ID：11242044
> 
> 赞同：0
> 
> 时间：2012-06-28T09:49:30.890
> 
> 标签：sql, db2, unique-constraint

我创建了一个表： CREATE TABLE myTable ( id int GENERATED ALWAYS AS IDENTITY (START WITH 1, INCREMENT BY 1, NO CACHE)PRIMARY KEY, pcdurl varchar(2000) NOT NULL )

我想让 pcdurl 属性**成为一个唯一的约束。**

但我得到一个**SQL 633 错误。** 我猜这是因为大小超过了允许的最大数量。 **我的第一个问题是这个数字是多少？**

[这里](http://publib.boulder.ibm.com/infocenter/dzichelp/v2r2/index.jsp?topic=/com.ibm.db2z9.doc.codes/src/tpc/n613.htm)它说数字是 255-n，其中 n 是允许空值的列数。

但我也在此[页面](http://publib.boulder.ibm.com/infocenter/db2luw/v9r7/index.jsp?topic=/com.ibm.db2.luw.sql.ref.doc/doc/r0001029.html)上阅读：“唯一约束中列的最大组合长度（通过唯一索引支持，以字节为单位）8192”

**所以我的第二个问题是如何**在将属性保持为唯一键约束的同时克服这个问题？

非常感谢您提前

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T09:57:16.803

本质上，您将不得不找到一个较小的表示，`pdcurl`以便您对该表示执行唯一约束。

您可以有一个附加字段，它是 的散列`pdcurl`，并使该散列值成为唯一字段。根据散列函数，您发生碰撞的可能性很小（可能*很小）。*但它总是会防止重复。

或者你可能会发现你所有的 url 都以相同的路径开头，所以用`.\`什么替换那个部分？

# reload - 由“play start”启动时如何自动重新加载代码？

> ID：11242046
> 
> 赞同：1
> 
> 时间：2012-06-28T09:49:32.080
> 
> 标签：reload, playframework-2.0

您知道，在 play2 中，我们可以使用`play ~run`自动重新加载更改的代码而无需重新启动。

但是现在我必须使用`play start`在公共服务器上启动我的播放应用程序，让一些用户使用和测试。

有什么办法可以让游戏仍然自动重新加载？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T10:16:43.630

`run`不，这就是和之间的区别`start`

所以你只需要停止应用程序并再次运行它：

`play stop`

或者

```
kill `cat RUNNING_PID` 
```

如果是`dist`没有游戏机的版本

编辑：为了继续运行应用程序，您应该启动应用程序的两个实例并使用 ie。[lighthttpd](/questions/tagged/lighthttpd "显示标记为“lighthttpd”的问题")作为负载平衡器：[http ://www.playframework.org/documentation/2.0.2/HTTPServer（](http://www.playframework.org/documentation/2.0.2/HTTPServer)**使用 lighttpd 设置**部分）

# android - 将对象数组传递给微调器并为其显示的文本指定字段名称？

> ID：11242049
> 
> 赞同：0
> 
> 时间：2012-06-28T09:49:56.863
> 
> 标签：android, android-widget

有没有办法（如 .net、flex 等）向微调器传递对象数组和用于显示微调器中值的字段？从数据库中检索实体，将您想要的部分转换为适配器到字符串等......并将其传递给微调器，这有点痛苦。一个更好的解决方案是传递容器目录并告诉微调器，使用此字段显示为微调器项目标题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T10:11:55.820

我不确定我是否正确地回答了您的问题，但您可以以某种方式将您的微调器绑定到一个对象数组（在“专业”下面的示例中）。

```
 ArrayAdapter<Specialty> adapter = new ArrayAdapter<Specialty>(this,android.R.layout.simple_spinner_item, specialities);
        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        mSpecialtySpinner.setAdapter(adapter); 
```

在 Specialty 对象中，我重写了我的 toString() 方法以显示我希望我的微调器显示的内容。

# php - DESC 在 SQL 中做了什么？

> ID：11242055
> 
> 赞同：-1
> 
> 时间：2012-06-28T09:50:11.200
> 
> 标签：php, sql

我对“DESC”这个词的作用感到困惑？它的目的是什么？您能否提供其他示例，谢谢！

```
$result = mysql_query("SELECT *, ROUND(score/(1+(losses/wins))) AS performance FROM images ORDER BY ROUND(score/(1+(losses/wins))) DESC LIMIT 0,10"); 
```

编辑：意识到这是一个愚蠢的问题，应该使用谷歌，我现在知道答案停止攻击我，我明白了。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-28T09:57:36.363

您可以按升序或降序对记录进行排序。默认值为 ASCENDING，`ASC`在 SQL 语法中缩写为。相反的当然是 DESCENDING，缩写为`DESC`.

例如，

```
SELECT * FROM images ORDER BY id ASC 
```

这可能会给：

```
 id | image
 ---+-----------
 1  | bird.png 
 2  | flower.png 
```

然而

```
SELECT * FROM images ORDER BY id DESC 
```

会给：

```
 id | image
 ---+-----------
 2  | flower.png 
 1  | bird.png 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-04T13:39:06.357

`DESC`表示**下降**。

如果您的数据库中有字母`A`-`Z`并且您按 对它们进行排序`ASC`，它将从`A`到`Z`。

`ORDER BY DESC``Z`将它们从到排序`A`。

`0`- `9`，升序和降序（例如）也是如此。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T09:50:59.373

它说“按降序排序”。

它是一个可选关键字，可以与`ORDER BY`. （默认情况下按升序进行排序。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-28T09:51:15.677

`ORDER BY XXX DESC`将结果按降序排列，而不是按升序排列 ( `ASC`)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-28T09:52:00.580

`DESC`按指定列的降序对结果集进行排序，而不是`ASC`默认的升序

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-28T09:52:30.620

DESC 是一个明确的词，用于提及 Order 以使其降序。一个简单的 Order by 就可以了

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-28T09:57:06.360

它按降序对记录进行排序。[从这里](http://blog.sqlauthority.com/2009/11/24/sql-server-interesting-observation-top-100-percent-and-order-by/)了解更多关于订购的信息

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-28T10:05:12.287

`DESC`表示对选中的数据进行降序排序。示例语法：

```
SELECT `name` from users where `name` LIKE '%Emmett%' ORDER BY `name`; 
```

这将按字母降序产生/获取名称

# apache-flex - 在 Flash CS5 中创建 Flex 4.5 主题

> ID：11242057
> 
> 赞同：1
> 
> 时间：2012-06-28T09:50:18.477
> 
> 标签：apache-flex, flex4.5

我正在使用 Flash Professional CS5 为我的项目创建一个主题。在 Flex 3 中，我可以选择创建 css 文件来导入这个主题。但是我怎样才能在 Flex 4.5 中实现相同的功能呢？说，如果我在 Flash 中创建一个按钮设计，我应该如何将它导入到 flex 4.5 作为按钮的主题。

# android - AlarmManager 发出 AlarmApp

> ID：11242058
> 
> 赞同：0
> 
> 时间：2012-06-28T09:50:34.850
> 
> 标签：android, alarmmanager

我有一个关于alarmmanager的问题，我之前制作过简单的警报应用程序并且它成功了，但我尝试用更多功能再次制作它。但是我的警报管理器的未决意图永远不会被调用，所以我的警报永远不会响起。这是我在选中时使用工具按钮调用该函数时的代码

```
public void onClick(View v) {
    if(toggleButton.isChecked())
    {
        sts = 1;
        alarmDb = new TorasanDatabaseAdapter(context);
        alarmDb.open();
        alarmDb.updateAlarm(alarm._id,sts);
        alarmDb.close();
        Alarm.talarm.setText("aaaaaaaa");
        Intent alarmIntent = new Intent(context, MyAlarmService.class);
        alarmIntent.putExtra("id", alarm._id);
        alarmIntent.putExtra("sound", alarm.sound);
        PendingIntent pendingAlarmIntent = PendingIntent.getService(context, alarm._id, alarmIntent, PendingIntent.FLAG_UPDATE_CURRENT );
        AlarmManager alarmManager = (AlarmManager)context.getSystemService(context.ALARM_SERVICE);
        Calendar AlarmCal = Calendar.getInstance();
        int currentstatus = sts;
        alarm.status = currentstatus;
        Log.i("ID", " alarm hour: " + alarm.hour + " minute: " + alarm.minute+" status:"+alarm.status);
        AlarmCal.setTimeInMillis(System.currentTimeMillis());
        AlarmCal.set(Calendar.HOUR_OF_DAY, alarm.hour);  // set user selection
        AlarmCal.set(Calendar.MINUTE, alarm.minute);        // set user selection
        AlarmCal.set(Calendar.SECOND, 0);
        alarmManager.set(AlarmManager.RTC_WAKEUP, AlarmCal.getTimeInMillis(),pendingAlarmIntent);
    } 
```

MyAlarmService.java

```
public class MyAlarmService extends Service {

   public void onCreate() {
      Toast.makeText(this, "MyAlarmService.onCreate()", Toast.LENGTH_SHORT).show();
   }

   public IBinder onBind(Intent intent) {
      return null;
   }

   public void onDestroy() {
      super.onDestroy();
      Toast.makeText(this, "MyAlarmService.onDestroy()", Toast.LENGTH_SHORT).show();
   }

   public void onStart(Intent intent, int startId) {
      super.onStart(intent, startId);
      Bundle extras = intent.getExtras();
      String sound = extras.getString("sound");
      int hour = extras.getInt("hour");
      int minute = extras.getInt("minute");
      int id = extras.getInt("id");
      int status = extras.getInt("status");
      int statusdone = extras.getInt("statusdone");
      int statusdelete = extras.getInt("statusdelete");  
      Toast.makeText(this, "asadsadasdad", Toast.LENGTH_SHORT).show();
      Log.i("ID"," H="+hour+" M="+minute);
      Intent alertIntent = new Intent();
      alertIntent.setClass(this,DisplayNotifications.class);
      alertIntent.putExtra("sound", sound);
      alertIntent.putExtra("id", id);
      alertIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
      startActivity( alertIntent );       
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T09:57:43.263

您传递给 AlarmManager 的 PendingIntent 必须供 BroadcastReceiver 使用。您已经传递了一个 PendingIntent 供服务使用。

AlarmManager 不会为您启动服务。它所要做的就是发送一个广播意图。

**编辑：添加代码示例：**

代替

```
PendingIntent.getService() 
```

和

```
PendingIntent.getBroadcast() 
```

# java - 如何在 Eclipse RCP 项目中加载工作区外的类文件

> ID：11242059
> 
> 赞同：0
> 
> 时间：2012-06-28T09:50:46.210
> 
> 标签：java, eclipse, rcp

Eclipse RCP 中有没有一种方法可以在工作区之外加载类文件并将它们放入 IJavaProject？还是 IResource？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T11:09:21.513

由于 Eclipse 3.3 也支持外部文件，请参阅这个[Eclipse Wiki](http://wiki.eclipse.org/FAQ_How_do_I_open_an_editor_on_a_file_outside_the_workspace%3F)。

# wpf - 为什么这个 StringFormat 不起作用？

> ID：11242060
> 
> 赞同：2
> 
> 时间：2012-06-28T09:50:48.567
> 
> 标签：wpf, string-formatting

我有一个绑定到可观察集合的 DevXPress GridControl。我想格式化“WorkedHours”，但不知何故无法正常工作，所以结果看起来很难看。这是代码：

```
 <dxg:GridControl  ItemsSource="{Binding Result}">
            <dxg:GridControl.TotalSummary>
                <dxg:GridSummaryItem SummaryType="Sum" FieldName="Worked" DisplayFormat="0.0"/>
            </dxg:GridControl.TotalSummary>
            <dxg:GridControl.Columns>
                <dxg:GridColumn Header="Month" DisplayMemberBinding="{Binding Path=Month}" Visible="{Binding Path=GroupByMonth}" Width="80"/>
                <dxg:GridColumn Header="Name" DisplayMemberBinding="{Binding Path=Name}" Visible="{Binding Path=ShowName}" Width="220"/>
                <dxg:GridColumn Header="Project code" DisplayMemberBinding="{Binding Path=ProjectCode}" Visible="{Binding Path=ShowProjects}" Width="80" />
                <dxg:GridColumn Header="Project description" DisplayMemberBinding="{Binding Path=ProjectDescription}" Visible="{Binding Path=ShowProjects}" Width="270"/>
                <dxg:GridColumn Header="Wbs code" DisplayMemberBinding="{Binding Path=WbsCode}" Visible="{Binding Path=ShowWbs}" Width="80" />
                <dxg:GridColumn Header="Wbs description" DisplayMemberBinding="{Binding Path=WbsDescription}" Visible="{Binding Path=ShowWbs}"  Width="270" />
                <dxg:GridColumn Header="Comment" DisplayMemberBinding="{Binding Path=Comment}" Visible="{Binding Path=ShowComment}"  Width="270" />
                <dxg:GridColumn Header="Worked hours" DisplayMemberBinding="{Binding Path=Worked,StringFormat=\{0\:N0\}}"  Width="100" FieldName="Worked" />
            </dxg:GridControl.Columns>
            <dxg:GridControl.View>
                <dxg:TableView AllowGrouping="True" ShowAutoFilterRow="True" ShowTotalSummary="True"/>
            </dxg:GridControl.View>
        </dxg:GridControl> 
```

关于如何解决它的任何想法？非常感谢。我尝试了不同的格式化选项，但它们都没有像预期的那样工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T10:03:11.643

更改您的 StringFormat =>`StringFormat=N0`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T12:35:35.863

这似乎是 DevExpress 中的一个错误，请参阅以下链接：

[https://www.devexpress.com/Support/Center/p/Q257296.aspx](https://www.devexpress.com/Support/Center/p/Q257296.aspx)

他们建议改用`GridColumn.EditSettings`附加属性..

# email - 用作链接href时，大括号转换为十六进制代码

> ID：11242061
> 
> 赞同：0
> 
> 时间：2012-06-28T09:50:55.007
> 
> 标签：email, jsp, url-encoding

当出现在链接 href 中时，大括号将转换为其十六进制代码。我有一个发送 url 的电子邮件功能（其中有大括号）。单击电子邮件中的链接时，大括号将转换为其十六进制代码（%7B 和 %7D），从而导致无法打开网页。我使用jsp、javascript和html。

我从表单（包括要发送的链接）中获取详细信息并发送到 jsp 页面。该链接使用 javascript encodeURIComponent 进行编码，并使用 java.net.URLDecoder.decode(str, "UTF-8") 在 jsp 中进行解码。这完美地解码了该值，但是当它被写为链接的 href 时，只有花括号转换为十六进制代码。

它的 adobe scene7 图像 url 类似于

www.somedomain.com/PROD_NAME?wid=600&sharpen=1&color=235,198,59&obj=shirt/shirt_fabric/pocket&decal&sharp=0&src=is{sample/test3/ugc//9895846.tif?wid=150}&pos=0,1.2&res= 30

它按原样显示在邮件中，但是当单击该链接时，它在浏览器中显示为

www.somedomain.com/PROD_NAME?wid=600&sharpen=1&color=235,198,59&obj=shirt/shirt_fabric/pocket&decal&sharp=0&src=is%7Bsample/test3/ugc//9895846.tif?wid=150%7D&pos=0,1.2&res= 30

这会导致处理 url 失败。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T18:12:13.350

如果您还没有遇到解决方案，您可以用括号替换大括号。

例如：

`www.somedomain.com/PROD_NAME?wid=600&sharpen=1&color=235,198,59&obj=shirt/shirt_fabric/pocket&decal&sharp=0&src=is{sample/test3/ugc//9895846.tif?wid=150}&pos=0,1.2&res=30`

至

`www.somedomain.com/PROD_NAME?wid=600&sharpen=1&color=235,198,59&obj=shirt/shirt_fabric/pocket&decal&sharp=0&src=is(sample/test3/ugc//9895846.tif?wid=150)&pos=0,1.2&res=30`

# python - Python中意外的浮点表示

> ID：11242062
> 
> 赞同：4
> 
> 时间：2012-06-28T09:50:55.590
> 
> 标签：python, dictionary, hashtable

您好，我在 Python 中使用字典来存储一些城市及其人口：

```
population = { 'Shanghai' : 17.8, 'Istanbul' : 13.3, 'Karachi' : 13.0, 'mumbai' : 12.5 } 
```

现在，如果我使用 command `print population`，我会得到结果：

```
{'Karachi': 13.0, 'Shanghai': 17.800000000000001, 'Istanbul': 13.300000000000001, 'mumbai': 12.5} 
```

而如果我使用命令`print population['Shanghai']`，我会得到`17.8`.

`17.8`我对你的问题是 the和 the是如何分别`13.3`变成`17.800000000000001`and的`13.300000000000001`？所有这些信息是如何产生的？以及为什么将其存储在那里，因为我的初始输入表明我不需要那些额外的信息，至少据我所知。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T10:04:45.747

这在 Python 3.1 中已更改。从[新增](http://docs.python.org/dev/whatsnew/3.1.html#other-language-changes)功能页面：

> Python 现在使用 David Gay 的算法来寻找不会改变其值的最短浮点表示。这应该有助于减轻围绕二进制浮点数的一些混淆。
> 
> `1.1`使用在二进制浮点中没有精确等价的数字很容易看出其重要性。由于没有精确的等价物，因此类似的表达式`float('1.1')`计算为最接近的可表示值，即`0x1.199999999999ap+0`十六进制或`1.100000000000000088817841970012523233890533447265625`十进制。该最接近的值曾经并且仍然用于后续的浮点计算。
> 
> 新的是数字的显示方式。以前，Python 使用一种简单的方法。的值`repr(1.1)`被计算为`format(1.1, '.17g')`评估为`'1.1000000000000001'`。使用 17 位的优势在于它依靠 IEEE-754 保证来确保`eval(repr(1.1))`将精确地往返于其原始值。缺点是许多人发现输出令人困惑（误认为二进制浮点表示的内在限制是 Python 本身的问题）。
> 
> 的新算法`repr(1.1)`更智能并返回`'1.1'`. 实际上，它搜索所有等效的字符串表示形式（使用相同的底层浮点值存储的字符串表示形式）并返回最短的表示形式。
> 
> 新算法倾向于在可能的情况下发出更清晰的表示，但它不会改变基础值。因此，`1.1 + 2.2 != 3.3`即使陈述可能暗示其他情况，情况仍然如此。
> 
> 新算法依赖于底层浮点实现中的某些特性。如果没有找到所需的特征，将继续使用旧算法。此外，文本 pickle 协议通过使用旧算法确保跨平台可移植性。
> 
> （由 Eric Smith 和 Mark Dickinson 供稿；[第 1580 期](http://bugs.python.org/issue1580)）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T09:53:29.433

您需要阅读浮点数在计算机中的工作原理。

基本上，并非所有十进制数都可以精确存储，在这些情况下，您将获得最接近的可能数字。有时这种抽象会泄漏，您会看到错误。

这可能是由于用于您描述的两个用例的打印逻辑不同。我无法重现该行为（在 Win64 中使用 Python 2.7.2）。

如果您使用一个完全可表示的数字*，*例如`1.5`，我猜效果会消失。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T10:01:57.167

如果您想让小数点完全按照您在世界上任何机器上指定的方式表示，则必须使用 decimal.Decimal。

有关信息，请参阅 Python 手册：http: [//docs.python.org/library/decimal.html](http://docs.python.org/library/decimal.html)

```
>>> from decimal import Decimal
>>> print Decimal('3.14')
3.14 
```

# actionscript-3 - 禁用 CTRL 按下以选择列表中的多个值

> ID：11242068
> 
> 赞同：1
> 
> 时间：2012-06-28T09:51:06.023
> 
> 标签：actionscript-3, apache-flex, list, flex4.5, itemrenderer

我有一个 Spark.List 的自定义 itemrenderer

```
<?xml version="1.0" encoding="utf-8"?>
<s:ItemRenderer xmlns:fx="http://ns.adobe.com/mxml/2009"
                xmlns:s="library://ns.adobe.com/flex/spark"
                xmlns:mx="library://ns.adobe.com/flex/mx"
                autoDrawBackground="true">
    <s:states>
        <s:State name="normal"/>
        <s:State name="selected"/>
        <s:State name="hovered"/>
    </s:states>
    <s:CheckBox label="{data.name}" selected.selected="true" selected.normal="false"/>

</s:ItemRenderer> 
```

名单：

```
 private function get UOAbilitate():List
        {
            var l:List = new List();
            l.dataProvider = listaUOA;
            l.allowMultipleSelection = true;                
            l.itemRenderer = new ClassFactory(CheckBoxItemRenderer);
            return l;                   
        }
        [Bindable]private var listaUOA:ArrayCollection = new ArrayCollection([
                {name: "Uo1"},
                {name: "Uo2"},
                {name: "Uo3"},
                {name: "Uo4"},
                {name: "Uo5"},
                {name: "Uo6"},
                {name: "Uo7"},
                {name: "Uo8"},
                {name: "Uo9"},
                {name: "Uo10"},
                {name: "Uo11"},
                {name: "Uo12"}
            ]); 
```

复选框以正确的方式运行。如果我选择了一个值，那么选择另一个值将导致选择新值并取消选择旧值..

使用 CTRL 两个项目保持选中状态..我将获得相同的结果而无需按 ctrl 键...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T10:26:24.190

最简单的方法是创建一个 List 的子类，如下所示：

```
public class MyList extends List {

    public function MyList() {
        allowMultipleSelection = true;
    }

    override protected function item_mouseDownHandler(event:MouseEvent):void {
        event.ctrlKey = true;
        super.item_mouseDownHandler(event);
    }

} 
```

我们默认设置`allowMultipleSelection`为`true`（List 组件的默认值为`false`），并拦截 MouseEvent.MOUSE_DOWN 以便我们可以欺骗 List 以为始终按下 CTRL 键。

如果您正在寻找 DataGrid 类的类似行为，请阅读此答案：[火花 Datagrid 中的 SelectItem 方法？](https://stackoverflow.com/questions/11061331/selectitem-method-in-spark-datagrid/11062143#11062143)

注意：对于 CheckBoxes 情况列表，我创建了一个名为 CheckBoxGroup 的可重用自定义组件，它执行此操作并默认分配 CheckBoxItemRenderer。这样我就不必一遍又一遍地这样做。（它还做了一些其他自定义的事情，比如一次选择所有的框，但这不是主题）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-01T00:21:40.427

上述解决方案有效，但有一个小错误！正确的代码是：

```
public class MyList extends List {

    public function MyList() {
        allowMultipleSelection = true;
    }

    override protected function handleCellRendererClick(event:MouseEvent):void {
         event.ctrlKey = true;
        super.handleCellRendererClick(event);
    }
} 
```

# java - Java：HttpURLConnection 的 NIO 版本？

> ID：11242069
> 
> 赞同：1
> 
> 时间：2012-06-28T09:51:06.083
> 
> 标签：java, webclient, nio, httpurlconnection

我要下载很多很多网页，我打算`HttpURLConnection`用来做，因为它很方便。

但是，我不想使用基于线程的下载。我希望使用`async download`并且仍然使用 HttpURLConnection。

有办法吗？我真的需要`java nio`，但不想自己写socket客户端。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T09:52:43.600

尝试[netty](http://www.jboss.org/netty/)或[vert.x](http://vertx.io/)；后者是在前者的基础上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T15:04:12.000

看看[async-http-client](https://github.com/sonatype/async-http-client)。从自述文件：

> Async Http Client 库的目的是允许 Java 应用程序轻松执行 HTTP 请求并异步处理 HTTP 响应。

# jmeter - jmeter - 循环控制器和循环计数差异

> ID：11242070
> 
> 赞同：1
> 
> 时间：2012-06-28T09:51:06.943
> 
> 标签：jmeter

我有一个简单的场景：

*   登录
*   执行搜索1
*   执行搜索2
*   执行搜索3

现在，这两种方法之间有区别吗

1.  10 个线程，1 个循环，登录 + 循环控制器（3 个循环）用于搜索
2.  10 个线程，3 个循环，仅一次用于登录 + 搜索的控制器

理论上行为应该是相同的，即 10 个用户登录并运行三个搜索，对吗？
还是有区别？
哪种方法更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T10:55:53.407

你的情况没有区别。

这种情况很简单，对于更复杂的情况，当您在单个线程组中可以有更多的循环时，第一种情况可能更可取，因为处理采样器的这一部分的循环不需要接触线程组参数......完全主观。

# javascript - 如何访问嵌套的 iframe？

> ID：11242074
> 
> 赞同：1
> 
> 时间：2012-06-28T09:51:14.977
> 
> 标签：javascript, jquery, html, dom

我需要将帖子消息（[window.postmessage](https://developer.mozilla.org/en/DOM/window.postMessage)）发送到 iframe。
如果我在父页面中有单个 iframe，目前它可以工作。但我想让它适用于嵌套的 iframe。
标准是：

*   我可以在最后一个叶子 iframe 中添加侦听器代码。
*   不知道 iframe 嵌套的长度。
*   需要双向通信，从父母到孩子也需要通过叶子 iframe 到父母。

我厌倦了第三方 iframe，请给我一些合适的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-09-05T13:35:36.830

很老的问题，但是，我有一个类似的问题，我想出了一个解决方案。将来可能会帮助其他人。

我们总是`postMessage`可以`iframe`使用和`iframe``.parent``.frames[i][j][k]`

例如，如果您想将消息发布到 first`iframe`内 third `iframe`，您可以这样做：

```
window.frames[2][0].postMessage(msg, "*"); 
```

[在https://javascript.info/cross-window-communication](https://javascript.info/cross-window-communication)查看更多信息

> 对于 iframe，我们可以使用以下方式访问父/子窗口：
> 
> *   window.frames - 嵌套窗口对象的集合，
> *   window.parent, window.top 是对父窗口和顶层窗口的引用，
> *   iframe.contentWindow 是标签内的窗口。

postMessage 接口允许窗口相互交谈，无论它们来自哪个来源。所以，这是绕开“同源”政策的一种方式。[在此处](https://javascript.info/cross-window-communication#cross-window-messaging)查看更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T15:13:37.283

您可以实现自己向上或向下传播事件的事件系统。

在所有 iframe 中添加类似的内容将向下传播事件。

```
//create a jquery object to use the bind/trigger event system
var vent = $({});

function trigger(event, args) {
    //trigger for the current iframe
    vent.trigger(event, args);

    //propagate down for all nested iframes
    $.each(getAllIframes(), function(i, iframe) {
        iframe.trigger(event, args);
    });
}

function bind(event, callback) {
    vent.bind(event, callback);
}

function getAllIframes() {
    return $("iframe").map(function(){
      return this.contentWindow;
    });
} 
```

您可以以类似的方式实现事件冒泡，但必须具有某种绑定到所有子框架的初始化逻辑。

# javascript - 自定义html中的下拉列表

> ID：11242076
> 
> 赞同：0
> 
> 时间：2012-06-28T09:51:16.093
> 
> 标签：javascript, html, cordova

我已经定义了一个下拉列表，如下所示。我在带有phonegap的Android上使用它。我想从 html 中自定义下拉列表。我想将它显示为一个下拉列表，而不会出现在前面。可能吗？

```
<html>
<head>
<title>Title</title>
<script type="text/javascript" src="phonegap-1.4.1.js"></script>
<script type="text/javascript" src="JS/Util.js"></script>
<script type="text/javascript" src="JS/Language.js"></script>
<script type="text/javascript"> 

function dropdown(){  var drp = document.getElementById("numberlist");
var optn = document.createElement("OPTION");
optn.text="3";
optn.value="3";
drp.add(optn);
} 

</script>
</head>

<body onload="dropdown();">
<div id="main3"></div>

<form><select id = "numberlist"><option>12</option><option>24</option><option>36</option></select></form>

</body>

</html> 
```

# javascript - 用于查找地点数量的经纬度的 JavaScript

> ID：11242078
> 
> 赞同：1
> 
> 时间：2012-06-28T09:51:23.283
> 
> 标签：javascript, latitude-longitude

我从未使用过 JavaScript。在我的应用程序中，我使用的是 SQL Server 数据库 2005，其中包含特定城市的近 2200 个地址。我必须找到所有这些位置的纬度和经度。为此，我想使用 JavaScript。有人可以指导我如何使用 JavaScript 查找多个地址的纬度和经度吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T09:55:53.340

试试这个 ：

```
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false">
<script type="text/javascript">

var geocoder = new google.maps.Geocoder();
var address = "纽约";

geocoder.geocode（{'地址'：地址}，功能（结果，状态）{

如果（状态 == google.maps.GeocoderStatus.OK）{
    var 纬度 = 结果[0].geometry.location.lat();
    var longitude = 结果[0].geometry.location.lng();
    }
});
</脚本>

```

# php - CodeIgniter - 将按钮值传递给表单

> ID：11242083
> 
> 赞同：0
> 
> 时间：2012-06-28T09:51:43.887
> 
> 标签：php, codeigniter

我有这个代码（视图）：

> ```
>  <?php echo $own['own'] ? form_open('games/updateOwn', 'id="ownGame"') : 
>              form_open('games/setOwn', 'id="ownGame"'); ?>
>             <input type="hidden" name="userid" value="<?php echo $userid; ?>">
>             <input type="hidden" name="gameid" value="<?php echo $game['id'];?>">
>             <button value="1" name="own[]">Mam/miałem</button>
>             <button value="2" name="own[]">Chcę mieć</button>
>             <button value="3" name="own[]">Nie interesuje mnie</button>
>         </form> 
> ```

这是将所有权置于 db 中的简单形式。模型：

```
public function Own($data) {
        $gameid = $this->input->post('gameid');
        $userid = $this->input->post('userid');
        $own = $this->input->post('own');

        $this->db->cache_delete('games',$gameid);

        $ins_own = array(
            'user_id' => $userid,
            'game_id' => $gameid,
            'own' => $own
        );

        $q = $this->db->insert('ownership', $ins_own);
    } 
```

我的问题是，`own`(`button`的值) 没有提交。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T10:46:58.477

这是一种解决方法，根本不是一个好的解决方案，但现在似乎可行。它最大的缺陷是必须启用 JavaScript。但是，这里是：

**看法**

```
 <input type="hidden" name="own" value="" id="own">

            <button value="1"<?php echo $own['own'] == '1' ? ' class="selected"' : ''; ?>>Mam/miałem</button>
            <button value="2"<?php echo $own['own'] == '2' ? ' class="selected"' : ''; ?>>Chcę mieć</button>
            <button value="3"<?php echo $own['own'] == '3' ? ' class="selected"' : ''; ?>>Nie interesuje mnie</button> 
```

**JavaScript (jQuery):**

```
 $('form#ownGame button').each(function() {
        $(this).click(function() {
            var val = $(this).val();
            $('#own').val(val);
            return false;
        })
    }) 
```

我希望它可以帮助某人。但我**仍然愿意接受您的任何新主张或答案！**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T10:29:38.543

`<button>`默认情况下将具有一种按钮，因此您应该添加`type="submit"`每个按钮以使其正常工作。

```
<button type="submit" value="1" name="own">Mam/miałem</button>
<button type="submit" value="2" name="own">Chcę mieć</button>
<button type="submit" value="3" name="own">Nie interesuje mnie</button> 
```

# w3c-validation - W3C 验证器上的 500 内部服务器错误

> ID：11242085
> 
> 赞同：0
> 
> 时间：2012-06-28T09:51:48.913
> 
> 标签：w3c-validation, internal-server-error

当我尝试验证我的网站 www.flowers-for-you.nl 时，我收到 500 内部服务器错误。该网站在任何浏览器中都可以正常呈现。

如何找到并解决此错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T10:07:05.187

它由浏览器呈现，但响应的状态码为 500。您可以在 firebug 中看到它（见屏幕）。也许您在页面脚本中设置了标题 500？

> header("HTTP/1.0 500 被忍者攻击");

或者您的页面脚本中可能有一些错误 - 请注意您的后端日志:)

![在此处输入图像描述](../Images/c100219400a8225a3e2d4e2b28a569cb.png)

# design-patterns - 将 OData 与存储库模式一起使用

> ID：11242088
> 
> 赞同：1
> 
> 时间：2012-06-28T09:51:52.617
> 
> 标签：design-patterns, repository, odata

我创建了一个数据库（SQL Server 2008 Express），并使用 Visual Studio 2010 中的 OR 设计器在顶部创建了一些 LINQ to SQL 实体（称为 LinqEntitiesDataContext）。然后我创建了一个 Repository 类和关联的 IRepository 接口，其中包含一堆提供对数据实体的有意义访问的漂亮而简单的 CRUD 方法。例如，有一个方法：

```
IQueryable<User> QueryUsersByType(UserTypeEnum userType) 
```

另一个：

```
void CreateUserWithDefaultType(User user) 
```

现在我想让这个存储库“通过网络”可用，并希望使用 WCF 数据服务 (OData) 来提供访问。但是我看到的每个 OData 示例最终都提供了对实体本身（例如用户实体）的直接访问，他们通过使数据上下文类实现 IUpdatable 并创建一个引用此数据上下文类的 WCF 数据服务来做到这一点。就我而言，这意味着使 LinqEntitiesDataContext IUpdatable 并将其用作服务类型——这完全避免了使用我的 Repository 类。

我觉得我需要让数据服务公开我的存储库：

```
DataService<Repository>  // *Not* DataService<LinqEntitiesDataContext> 
```

但是我需要让我的存储库实现 IUpdatable，避免调用我现有的更新方法（例如 CreateUserWithDefaultType）

我在这里想念什么？有没有一个很好的例子来说明如何正确地做到这一点，暴露存储库层而不是实体层？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T21:32:38.327

我认为@Bull 在这里是在正确的轨道上，但想进一步建立一个答案。

正如他所说，OData 主要设计用于处理实体，而不是预定义的方法。例如，要实现您的第一个示例，您只需要公开一个 IQueryable 用户，这将允许任何 OData 客户端形成 URL，例如`http://yourdomain/Users?$filter=UserType eq Administrator`. 如果您使用的是 WCF 数据服务客户端，那么有一个 LINQ 提供程序可以让您执行类似`context.Users.Where(u => u.UserType == "Administrator")`. （另外，请注意 WCF 数据服务目前不支持我们的服务模型中的枚举。）

类似地，第二种方法通常只是一个 POST 到`http://yourdomain/Users`（与我们在第一个示例中看到的用户相同的 IQueryable），您可以在模型或数据库中设置默认类型。

如果您真的想使用您的存储库，您可能最好按照 Alex 的博客中所述处理完整的自定义数据服务提供程序：http: [//blogs.msdn.com/b/alexj/archive/2010/01/07 /data-service-providers-getting-started.aspx](http://blogs.msdn.com/b/alexj/archive/2010/01/07/data-service-providers-getting-started.aspx)

最后一点——我们确实希望在不久的将来公开我们的供应商；这将大大简化您在这里尝试实现的目标。我们会将这篇文章视为该特定功能重要性的另一个参考计数。:)

HTH，马克

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T15:20:55.743

我想你错过了这张照片。OData 可以将您的实体公开为提要。Odata 也称为 WCF 数据服务，获取有关 ODATA/WCF 数据服务的基本信息的正确位置在这里：

1.  来自 msdn [http://msdn.microsoft.com/en-us/library/cc668796的快速入门教程](http://msdn.microsoft.com/en-us/library/cc668796)
2.  将数据公开为服务。[http://msdn.microsoft.com/en-us/library/dd728286](http://msdn.microsoft.com/en-us/library/dd728286)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-30T13:49:11.863

我最终使用 WebApi 2 端点对所有存储过程和函数进行自定义 api 调用，当需要从 db 中提取大量数据时，然后对所有其他普通表使用 OData v3 端点，这样我就不必担心通过 api 调用发送的过滤和查询参数.

# c# - 有没有办法将 Microsoft Word 文档转换为记事本文件 .txt 格式？

> ID：11242091
> 
> 赞同：5
> 
> 时间：2012-06-28T09:51:55.310
> 
> 标签：c#, asp.net, web-applications, ms-word, office-interop

我试试这段代码

```
string[] ext = att.Name.Split('.');
string file = ext[0].ToString();
object Target = file + ".txt";
object nullobject = System.Reflection.Missing.Value;

Application.Documents.Open(ref FileName, ref nullobj, ref nullobj, ref nullobj, ref nullobj, ref nullobj, ref nullobj, ref nullobj, ref nullobj, ref value, ref value, ref nullobj, ref nullobj, ref nullobj, ref nullobj, ref nullobj);
object format = Microsoft.Office.Interop.Word.WdSaveFormat.wdFormatUnicodeText;

Application.ActiveDocument.SaveAs(ref Target, ref format,
                        ref Unknown, ref Unknown, ref Unknown,
                        ref Unknown, ref Unknown, ref Unknown,
                        ref Unknown, ref Unknown, ref Unknown,
                        ref Unknown, ref Unknown, ref Unknown,
                        ref Unknown, ref Unknown);
Application.Visible = false;
Microsoft.Office.Interop.Word.Document oDoc1 = Application.ActiveDocument;
string strNewDocText1 = oDoc1.Content.Text; 
```

但在 strNewDocText1 中获取输出，包括项目符号和额外的单词格式

我想将我的 word 文档的简单纯文本格式转换为文本文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T10:14:27.730

我相信你从这里拿了这个例子：http: [//www.codeproject.com/Articles/5273/How-to-convert-DOC-into-other-formats-using-C](http://www.codeproject.com/Articles/5273/How-to-convert-DOC-into-other-formats-using-C)

所以基本上你有一个 RTF，它必须转换为纯文本。这是一个例子

最简单的方法就是添加对 System.Windows.Forms.dll 的引用。

```
System.Windows.Forms.RichTextBox rtBox = new System.Windows.Forms.RichTextBox();

string richText = text// The rich text (with bullets and so on.)
rtBox.Rtf = richText ;
string plainText = rtBox.Text;

System.IO.File.WriteAllText(@"output.txt", plainText); 
```

# c# - 复制多维数组的子部分

> ID：11242092
> 
> 赞同：2
> 
> 时间：2012-06-28T09:51:56.377
> 
> 标签：c#, multidimensional-array

在处理（基于java的语言）中我可以做到这一点；

```
int [][] a = new int[3][2];
for (int i = 0; i < 3; i++)
{
  a[i][0] = i;
  a[i][1] = i+3;
}
int [] b = a[2]; 
```

b 是一个一维数组，其值为 2 和 5。它采用数组 a 的第 2 行中的数组。

matlab语法将是

```
b = a(3,:); 
```

c#有什么等价物吗？我似乎找不到任何东西，但似乎是一个相当有用且明显的功能。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T09:58:14.030

C# 有[多维数组](http://msdn.microsoft.com/en-us/library/2yd9wwz4)，但也有数组数组（也称为[*锯齿*数组](http://msdn.microsoft.com/en-us/library/2s05feca.aspx)）。第二种形式是您所追求的：

```
// This is a jagged array. It has 3 rows, each of which is an int[] in its own right.
// Each row can also have a different number of elements from all the others, so if
// a[i][N] is valid for some i and N, a[x][N] is not necessarily valid for other x != i
var a = new int[3][];

// To populate the array you need to explicitly create an instance for each sub-array
for (int i = 0; i < 3; i++)
{
      a[i] = new[] { i, i + 3 };
}

// And now this is possible:
var b = a[2]; 
```

如果您手头有一个多维数组，则需要手动进行复制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T09:58:01.670

C# 区分*交错数组*( `[][]`) 和*多维数组*( `[,]`)：

**锯齿状阵列：**

这应该是可能的；每个数组元素只是一个数组本身。

**多维数组：**

在这里，您必须自己逐个元素地进行复制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T10:03:20.943

除了其他答案：如果您真的想要副本，即您不想`b[0] = 42;`更改`a[2][0];`，请执行以下操作：

```
int [] b = (int[])a[2].Clone(); 
```

# mysql - 4 位用户名 - CakePHP

> ID：11242096
> 
> 赞同：1
> 
> 时间：2012-06-28T09:52:04.390
> 
> 标签：mysql, cakephp, cakephp-2.0, user-registration

我有一个带有注册表单的小页面。当用户想要注册时，他们只需点击一个按钮，就会生成一个四位数的随机数。

为此，我有了以下想法。我将为用户名呈现一个表单并将“Temp”定义为默认值。如果用户单击“注册”，则会添加“临时”用户。现在我将使用以下 mysql 语句更新 users 表并将用户名更改为随机代码：

```
 'UPDATE `users` SET `username` = FLOOR( 1000 + ( RAND( ) 
*8999 ) ) WHERE id = ' + $this->Auth->user('id') + ';' 
```

这是整个 php 代码。

```
 $this->User->query('UPDATE `users` SET `username` = FLOOR( 1000 + ( RAND( )
 *8999 ) ) WHERE id = ' + $this->Auth->user('id') + ';'); 
```

但这不起作用。你怎么看？创建自动生成的用户名的最佳解决方案是什么？

更新：感谢'kinjal'

```
 $this->User->query('UPDATE `users` SET `username` = FLOOR( 1000 + ( RAND( ) 
*8999 ) ) WHERE id = '.$this->Auth->user('id').';'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T10:18:54.143

首先，您在应该使用句号连接变量和字符串的地方使用加号。

您应该在 Cake 中生成用户名，这样您就可以`isUnique`在模型中使用验证，如果您想在 MySQL 中执行此操作，则需要对所有以前的用户名进行大型子查询。

您还应该在将用户名插入数据库之前生成用户名，这将阻止您返回并编辑该行，这似乎是一种非常奇怪的做事方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T12:12:44.330

与其创建临时用户然后更改用户名，您可以在表中启用用户名字段上的 AUTO_INCREMENT，而是手动创建第一个用户并将其用户名设置为 1000。

然后，您不必找出用户名，但之后您创建的任何用户都将拥有用户名 1001、1002、1003 .... 等。

这种方法虽然有点非正统。

# sockets - 使用关闭而不是关闭来重用套接字

> ID：11242098
> 
> 赞同：1
> 
> 时间：2012-06-28T09:52:14.250
> 
> 标签：sockets, vxworks

在套接字上使用关闭而不是关闭，是否可以在套接字上连接多次？

```
s = socket(...);

for(;;)

{

     connect(s,...);

     //do some work

     shutdown (s, 2);

} 
```

我正在测试它并得到 errno 22。它应该工作吗？

我想以这种方式使用它，因为应用程序的循环速度非常快，并且我的套接字最终处于 TIME_WAIT 状态，并持有大量资源。

我已经尝试过 SO_REUSEADDR 但我的套接字仍然处于 TIME_WAIT 状态..

运行 vxworks 5.5.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T10:56:13.460

> 在套接字上使用关闭而不是关闭，是否可以在套接字上连接多次？

不可以。TCP 套接字一旦连接就不能重新连接。

# iphone - 从裁剪的图像中删除不需要的区域

> ID：11242101
> 
> 赞同：3
> 
> 时间：2012-06-28T09:52:16.837
> 
> 标签：iphone, crop, uibezierpath

我正在通过触摸裁剪图像。为此，我正在使用`UIBezierPath`.

我可以裁剪出选定的区域，但不需要的区域（不在裁剪部分内）仍然没有占用空间。或者换句话说，我无法摆脱裁剪区域之外的区域。

那么，我怎样才能删除这个不需要/无用的区域？

这是我的代码：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    UIView *touchedView = [delegate viewForUseWithTool:self];
    for (UITouch *touch in [event allTouches]) {
        // remember the touch, and its original start point, for future
        [trackingTouches addObject:touch];
        CGPoint location = [touch locationInView:touchedView];
        [startPoints addObject:[NSValue valueWithCGPoint:location]];
        UIBezierPath *path = [UIBezierPath bezierPath];
        path.lineCapStyle = kCGLineCapRound;
        [path moveToPoint:location];
        [path setLineWidth:delegate.strokeWidth];
        [path addLineToPoint:location];
        [paths addObject:path];
    }
}
- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {
    for (UITouch *touch in [event allTouches]) {
        // make a line from the start point to the current point
        NSUInteger touchIndex = [trackingTouches indexOfObject:touch];
        // only if we actually remember the start of this touch...
        if (touchIndex != NSNotFound) {
            UIBezierPath *path = [paths objectAtIndex:touchIndex];
            PathDrawingInfo *info = [PathDrawingInfo pathDrawingInfoWithPath:path fillColor:[UIColor clearColor] strokeColor:delegate.strokeColor];
            [delegate addDrawable:info];
            [trackingTouches removeObjectAtIndex:touchIndex];
            [startPoints removeObjectAtIndex:touchIndex];
            [paths removeObjectAtIndex:touchIndex];
        }
    }
}
- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {
    for (UITouch *touch in [event allTouches]) {
        // make a line from the start point to the current point
        NSUInteger touchIndex = [trackingTouches indexOfObject:touch];
        // only if we actually remember the start of this touch...
        if (touchIndex != NSNotFound) {
            UIBezierPath *path = [paths objectAtIndex:touchIndex];
            PathDrawingInfo *info = [PathDrawingInfo pathDrawingInfoWithPath:path fillColor:[UIColor clearColor] strokeColor:delegate.strokeColor];
            [delegate addDrawable:info];
            [trackingTouches removeObjectAtIndex:touchIndex];
            [startPoints removeObjectAtIndex:touchIndex];
            [paths removeObjectAtIndex:touchIndex];
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T06:57:36.823

我可以通过遵循[这个答案](https://stackoverflow.com/a/2232899/1276636)来调整结果图像的大小。对于视网膜显示，我不得不将cropRect 的大小加倍，并且在[这个答案](https://stackoverflow.com/a/4641481/1276636)的帮助下检测到了视网膜显示。

## 编辑

我找到了一个更好的解决方案。以下是步骤：

1.  转换`UIImage`为`UIImageView`,
2.  按照[这个答案](https://stackoverflow.com/a/7210247/1276636)。

# selenium - Capybara：如何强制它在所有测试中使用 JavaScript 驱动程序？

> ID：11242103
> 
> 赞同：0
> 
> 时间：2012-06-28T09:52:23.943
> 
> 标签：selenium, cucumber, capybara, bdd

我想向我的老板展示测试如何让我们的生活更轻松，从长远来看可以节省很多钱。

为此，我想向他展示我所有使用活动 JavaScript 驱动程序进行的 Cucumber 测试，因此所有测试都在浏览器中运行，而不仅仅是标有 @javascript/@selenium 的那些。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T10:44:08.617

把它放在像你的 env.rb 这样合理的地方：

```
Capybara.default_driver = :selenium 
```

# iphone - 在 iphone 应用程序中解析 json url 时出错

> ID：11242105
> 
> 赞同：0
> 
> 时间：2012-06-28T09:52:25.550
> 
> 标签：iphone

我是 iPhone 应用程序的新手。我想实现 json 解析。我已经尝试过网络上提供的示例。但是在进行 json 解析时无法找到获取 url 索引值的确切方法。有没有人早点完成。作为初学者，任何人都可以指导我。

等待正面回应

在此先感谢 Iphone 开发人员

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T09:58:21.987

为了你的看法

```
 NSURLRequest *request = [NSURLRequest requestWithURL:  
                             [NSURL URLWithString:Str_URL]];  
   // NSLog(@"\n\n\n request ===%@\n\n\n",request);
    NSURLConnection *theConnection=[[NSURLConnection alloc] initWithRequest:request delegate:self]; 
    if (theConnection) {

        // Create the NSMutableData to hold the received data.

        // receivedData is an instance variable declared elsewhere.

        responseData = [[NSMutableData data] init];

    } else {

        // Inform the user that the connection failed.

    }

#pragma mark NSURLConnection Delegate methods  
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response { 
    //NSLog(@"\n\n\n response ===%@\n\n\n",response);
    [responseData setLength:0];  
}  

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {  
    //NSLog(@"\n\n\n data ===%@\n\n\n",data);
    [responseData appendData:data];  
}  

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error {  
    NSString *strerror = [NSString stringWithFormat:@"Connection failed: %@", [error description]];  
    NSLog(@"\n\n\n error ===%@\n\n\n",strerror);

}  

- (void)connectionDidFinishLoading:(NSURLConnection *)connection {  

    //NSString *responseString = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];

    if(responseData != nil)
    {
        NSError *error = nil;
        id result = [NSJSONSerialization JSONObjectWithData:responseData options:NSJSONReadingMutableContainers error:&error];
       }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T09:58:50.633

尝试这个

```
-(void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    [responseData setLength: 0];
}
-(void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    [responseData appendData:data];
}

-(void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{
    NSLog(@"ERROR with theConenction");
    [connection release];
    responseData = nil;
}

-(void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    [connection release];
    NSString *responseString = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];
    responseData = nil;
    NSLog(@"response String= %@",responseString);

    SBJSON *parser = [[SBJSON alloc] init];
    NSDictionary *data = (NSDictionary *) [parser objectWithString:responseString error:nil]; 

    NSDictionary *menu = (NSDictionary *) [data objectForKey:@"MainTag"];
    NSString *com=(NSString *) [menu objectForKey:@"yourSubTag"];
} 
```

# java - Maven 与 Eclipse Juno

> ID：11242107
> 
> 赞同：55
> 
> 时间：2012-06-28T09:52:32.760
> 
> 标签：java, eclipse, maven, eclipse-juno

我刚刚升级到 Eclipse v4.2 (Juno)。Maven 插件似乎丢失了。我如何得到它？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-06-28T10:06:53.407

您需要的所有信息都在[m2e 1.1 的发布公告中](http://dev.eclipse.org/mhonarc/lists/m2e-users/msg02654.html)提供：

> m2e 1.1 已作为今天 Eclipse Juno 同步发布的一部分发布。
> 
> [...]
> 
> m2e 1.1 已包含在“Eclipse IDE for Java Developers”包中，可从[http://eclipse.org/downloads/](http://eclipse.org/downloads/)获得，或者可以从 Eclipse Juno 发布存储库 [2] 安装。Eclipse 3.7/Indigo 用户可以从 m2e 发布存储库安装新版本 [3]
> 
> [...]
> 
> [2] [http://download.eclipse.org/releases/juno](http://download.eclipse.org/releases/juno)
> 
> [3] [http://download.eclipse.org/technology/m2e/releases](http://download.eclipse.org/technology/m2e/releases)

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-06-28T10:09:44.873

m2e 仅包含在 Eclipse 的 Java 开发人员版本中，您可以在此页面（“Maven”主题）上看到：http: [//www.eclipse.org/downloads/compare.php](http://www.eclipse.org/downloads/compare.php)

但是，获取 m2e 的一种简单方法是通过 Eclipse Marketplace：

转到 Help -> Eclipse Marketplace 并查找 m2e。单击“Maven Integration for Eclipse”，然后单击安装（如果您在浏览器中打开市场，则将安装链接拖放到正在运行的 Eclipse 工作区），等等！

直接浏览器访问：[http ://marketplace.eclipse.org/content/maven-integration-eclipse](http://marketplace.eclipse.org/content/maven-integration-eclipse)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-05-15T15:35:01.600

您应该能够使用 Help -> Install New Software 对话框安装 m2e（eclipse 的 maven 项目）。在该对话框中打开 Juno 站点 ( [http://download.eclipse.org/releases/juno](http://download.eclipse.org/releases/juno) ) 并展开 Collaboration 组（或在过滤器中键入 m2e）。选择两个 m2e 选项并按照安装对话框进行操作

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-12-10T05:16:15.283

来自 Eclipse

*   前往帮助
*   日食市场
*   搜索 eclipse 的 m2e 或 maven 集成
*   单击 Install against - 'Maven Integration for Eclipse (Juno and newer) 1.4'
*   重启并享受！！！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-01-12T20:12:21.050

这就是我尝试从 Eclipse Market 安装 m2e 时得到的结果。我正在使用 Eclipse Juno。

无法完成安装，因为找不到一项或多项所需项目。正在安装的软件：m2e - Eclipse 的 Maven 集成（包括孵化组件）1.5.0.20140606-0033 (org.eclipse.m2e.feature.feature.group 1.5.0.20140606-0033) 缺少要求：Eclipse 的 Maven 集成 1.5.0.20140606-0033 (org.eclipse.m2e.core 1.5.0.20140606-0033) 需要 'bundle com.google.guava [14.0.1,16.0.0)' 但找不到无法满足依赖关系：来自：m2e - Eclipse 的 Maven 集成（包括孵化组件） 1.5.0.20140606-0033 (org.eclipse.m2e.feature.feature.group 1.5.0.20140606-0033) To: org.eclipse.m2e.core [1.5.0.20140606-0033]

但是，以下链接是完美的，它对我有用。

[http://marketplace.eclipse.org/content/maven-integration-eclipse-wtp-juno-0](http://marketplace.eclipse.org/content/maven-integration-eclipse-wtp-juno-0)

问候， 比拉尔

# c# - 在 azure 和其他应用程序上使用类：监控困境

> ID：11242109
> 
> 赞同：0
> 
> 时间：2012-06-28T09:52:42.080
> 
> 标签：c#, logging, azure, console-application, monitoring

首先，我是 C# 的初学者，我没有很多程序员的习惯。

我想在 Windows azure 和控制台应用程序上使用相同的类。
例如这个：

```
public static class Conversion
{
    public static void Convert(string fileName)
    {
        // ...
        if (error)
            Console.WriteLine("It is a error in Conversion.Convert(string).");
        // ...
        Console.WriteLine("Conversion success !");
    }
} 
```

但是，在 azure 的控制台上显示并不是很有用。我想创建一个接口和它的 2 个实现。

```
public interface ILog
{
    void Write(string str);
    void WriteLinge(string str);
} 
```

和

```
public static class LogAzure : ILog
{
    public static void WriteLine(string str)
    {
        Trace.WriteLine(str);
    }

}

public static class LogConsole : ILog
{
    public static void WriteLine(string str)
    {
        Console.WriteLine(str);
    }
} 
```

所以在我的转换方法中，我必须使用 ILog.WriteLine()。

**问题：**
首先——也是更重要的——这是一个好主意/做法吗？

如果是：
如何知道我是否在 Azure 中？( [RoleEnvironment.IsAvailable](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.serviceruntime.roleenvironment.isavailable) ??)
如何使用 LogAzure 或 LogConsole ？（对我的方法有论据？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T13:38:44.490

在这两种情况下都应该使用 Trace。配置控制台应用程序以使用[ConsoleTraceListener](http://msdn.microsoft.com/en-us/library/system.diagnostics.consoletracelistener.aspx)和 azure 版本以使用[Azure 诊断](https://www.windowsazure.com/en-us/develop/net/common-tasks/diagnostics/)

# c# - 来自 C# 桌面应用程序的 Web 服务 CAS 身份验证

> ID：11242113
> 
> 赞同：1
> 
> 时间：2012-06-28T09:52:51.157
> 
> 标签：c#, web-services, cas

我们正在编写一个 wpf-desktop 应用程序，使用 web 服务从另一个工具 (RPlan) 接收数据。Web 服务使用 CAS 对用户进行授权。如何在桌面应用程序中执行此操作？我只找到了 asp.net 的样本。

CAS 说明： [http ://www.jasig.org/cas](http://www.jasig.org/cas)

有人可以帮助我们吗？

谢谢托比

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T12:30:04.687

CAS 实际上是一个带有 cookie、HTTP 302 重定向的面向 Web 的 SSO……在您的情况下，我知道您希望在 WPF 应用程序中显示一个登录屏幕，然后将“CAS 身份验证”发送到所需的 Web 服务。由于我认为您不想使用嵌入式浏览器，因此您可以使用 CAS 的扩展，它允许使用 REST 对服务（您的 Web 服务）进行身份验证（票证授予票证概念）并获得对服务（您的 Web 服务）的访问权限（服务票证概念）请求：[https](https://wiki.jasig.org/display/CASUM/RESTful+API) ://wiki.jasig.org/display/CASUM/RESTful+API 。最好的问候，杰罗姆

# actionscript-3 - AS3 - 刷新位图的最有效方法

> ID：11242116
> 
> 赞同：2
> 
> 时间：2012-06-28T09:52:57.897
> 
> 标签：actionscript-3, flash, bitmap, bitmapdata

我在一个类中有这个函数，它可以创建我传入的任何 DisplayObject 的位图。如您所见，每次创建新位图时，我都会创建一个新的 BitmapData 对象和一个新的 Bitmap 对象。

有没有办法调整这个函数，这样我每次运行这个函数时就不必重新创建这两个对象了？

```
private var bitmapData:BitmapData;
private var bm:Bitmap; 

crop(someSprite.width, someSprite.height, someSprite);

private function crop(_width:Number, _height:Number, displayObject:DisplayObject):void {

bitmapData.dispose();
bitmapData = new BitmapData( _width, _height, false, 0xFFFFFFFF );  
bitmapData.draw(displayObject);

bm = null;
bm = new Bitmap(bitmapData, PixelSnapping.ALWAYS, true);
bm.smoothing = true;
bm.alpha = 0;

} 
```

谢谢，

标记

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T10:05:01.800

如果显示对象尺寸每次都更改，则每次都必须重新创建`BitmapData`。

对于`Bitmap`对象，您不需要重新创建它。您可以简单地直接设置位图数据：

```
bm.bitmapData = bitmapData; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T10:02:33.753

如果您想避免每次只在您期望的最大尺寸中创建一个 BitmapData 时都创建一个新的 BitmapData，并且在您的裁剪方法中，您首先使用 yourMap.fillRect(yourMap.rect,0) 清除该地图，然后进行绘制右上角使用带有裁剪尺寸的剪辑矩形。为了获得额外的微小性能提升，您可以设置 Bitmap 对象的 ScrollRect 属性，以将其显示为裁剪后的尺寸。

# jakarta-ee - glassfish 3 的更新工具无法启动

> ID：11242121
> 
> 赞同：1
> 
> 时间：2012-06-28T09:53:27.037
> 
> 标签：jakarta-ee, glassfish

当我启动更新工具时，什么也没有发生。我尝试从命令行和 NetBeans 执行此操作。没有任何反应，没有错误或异常。我的操作系统是 Windows 7 64。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T14:34:56.830

我在使用 Java EE6 和 EE7 JDK 时遇到了（并且仍然存在）同样的问题。我的解决方案是使用域管理控制台中的更新工具选项（可以从 Netbeans 中启动，也可以从使用 localhost:4848 的浏览器启动）。这解决了这个问题，但它仍然让我恼火，你提到的两个选项都不起作用。

# java - 如何使用全局 log4j.xml

> ID：11242122
> 
> 赞同：0
> 
> 时间：2012-06-28T09:53:27.370
> 
> 标签：java, log4j

我有一个使用 log4j 的 Java 库。该库本身仅包含一个 log4j.property 文件，该文件具有以下内容：

```
log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.Target=System.out
log4j.appender.stdout.layout=org.apache.log4j.SimpleLayout
log4j.rootLogger=info, stdout 
```

该库由另一个应用程序使用，该应用程序具有自己的全局 log4j.xml。

我在全局 log4j.xml 中放了这样的行：

```
<logger name="com.my.package">
    <level value="info"/>
</logger> 
```

但是，日志中不显示任何日志。

这里出了什么问题？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T10:24:28.500

我能想到的2件事：

1.  log4j.xml 文件不在类路径上。
2.  您正在编写 DEBUG 消息，并且记录器设置为 INFO。

# iphone - 获取 Facebook 帐户详细信息

> ID：11242143
> 
> 赞同：2
> 
> 时间：2012-06-28T09:55:11.873
> 
> 标签：iphone, ios5, sharekit

我正在为 Facebook 和 Twitter 使用 Sharekit，我想获取 Facebook 帐户详细信息，例如用户 ID、个人资料名称等。请提供您的建议和帮助。我之前得到了详细信息，但现在我无法检索它。

请在下面找到代码，

```
 if ([[NSUserDefaults standardUserDefaults] objectForKey:@"kSHKFacebookUserInfo"]){
            NSDictionary *facebookUserInfo = [[NSUserDefaults standardUserDefaults] objectForKey:@"kSHKFacebookUserInfo"];
           fbUseremail = [facebookUserInfo objectForKey:@"email"];
            NSLog(@"FBid-- %@",fbUseremail);
        }
        if ([[NSUserDefaults standardUserDefaults] objectForKey:@"kSHKFacebookUserInfo"]){
            NSDictionary *facebookUserInfo = [[NSUserDefaults standardUserDefaults] objectForKey:@"kSHKFacebookUserInfo"];
            fbUserName = [facebookUserInfo objectForKey:@"name"];
            NSLog(@"FBName-- %@",fbUserName);
        } 
```

现在它崩溃了，因为 facebookUserInfo 为 NULL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T12:03:19.260

我刚刚使用演示应用程序进行了尝试，并且效果很好。要查找正在发生的事情，您可以在 SHKFacebook.m`- (void)request:(FBRequest *)fbRequest didLoad:(id)result`的第 411 行中休息一下。现在您可以看到，您从 Facebook 得到了什么。

要获取用户信息，您必须首先从 Facebook 获取：

```
SHKItem *item = [[SHKItem alloc] init];
item.shareType = SHKShareTypeUserInfo;
[SHKFacebook shareItem:item]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T10:57:05.237

您可以使用 Facebook Graph API 获取用户名。将以下方法添加到 FBConnect 包的 FBSession.m 类中。

```
 #import "JSON.h" 
```

............

```
static NSString *const kGraphAPIURL = @"https://graph.facebook.com/";
//static NSString *const kFBGraphAPIUserName = @"name"; 
```

............

```
// Get user name via Facebook GraphAPI.

- (NSString *)getUserNameByUID:(FBUID)aUID {

 NSString *userName_ = nil;

 NSURL *serviceUrl = [NSURL URLWithString:[NSString stringWithFormat:@"%@%qi", kGraphAPIURL, aUID]];

 [UIApplication sharedApplication].networkActivityIndicatorVisible = YES;

 NSError *error = nil;
 NSString *jsonString = [NSString stringWithContentsOfURL:serviceUrl encoding:NSUTF8StringEncoding error:&error];

 if (error != nil) {
   NSLog(@"######### error: %@", error);
 }

 if (jsonString) {

    // Parse the JSON into an Object and 
    // serialize its object to NSDictionary
    NSDictionary *resultDic = [jsonString JSONValue]; // U have resultDic with information

    //if (resultDic) {
        //userName_ = [resultDic valueForKey:kFBGraphAPIUserName];
    //}
 }

 [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;

 return userName_;
} 
```

# c# - 最优化的 TPL 数据流设计？

> ID：11242144
> 
> 赞同：1
> 
> 时间：2012-06-28T09:55:24.263
> 
> 标签：c#, architecture, asynchronous, concurrency, tpl-dataflow

我想询问如何使用 TPL Dataflow 最好地设计最佳架构。我还没有编写代码，所以没有可以发布的示例代码。我也不是在寻找代码（除非自愿），但非常感谢设计方面的帮助：

要求如下：

我有 3 个以特定方式相互依赖的核心数据块。Datablock1 是生产 Foo1 类型对象的生产者。Datablock2 应该订阅 Foo1 对象（来自 Datablock1），并且可能（不是在每个 Foo1 上，受特定函数约束）生成 Foo2 对象，并将其存储在输出队列中以供其他数据块使用。Datablock3 还使用 Foo1 对象（来自 Datablock1）并可能生成 Foo3 对象，Datablock2 使用这些对象并转换为 Foo2 对象。

总而言之，以下是数据块以及它们各自产生和消耗的内容：

*   Datablock1：生产（Foo1），消费（无）
*   Datablock2：生产（Foo2），消费（Foo1，Foo3）
*   Datablock3：生产（Foo3），消费（Foo1）

另一个要求是在 Datablock2 和 Datablock3 中几乎同时处理相同的 Foo1。如果 Foo1 对象首先由 Datablock2 使用，然后一旦 Datablock2 完成其工作，同样的 Foo1 对象将被发布到 Datablock3 以供其工作。Datablock2 中的 Foo2 对象可以来自对 Foo1 对象或 Foo3 对象的操作。

我希望这是有道理的，如果仍然不清楚，我很乐意解释更多。

我的第一个想法是为 3 个数据块中的每一个创建 TPL 数据流块，并让它们处理不同对象类型的传入流。另一个想法是拆分数据块，让每个数据块只处理一种对象类型的流。您有什么建议，或者是否有更好的解决方案可能有效？

Svick 已经在 Datablock1 上提供了帮助，它已经投入使用，我只是纠结于如何将我当前的环境（如上所述）转换为 TPL Dataflow。

任何想法或指针都非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T13:50:32.920

让我们把这个问题分成三个并独立解决。

第一个是如何有条件地生产一个项目。我认为最好的选择是使用[`TransformManyBlock`](http://msdn.microsoft.com/en-us/library/hh194784%28v=vs.110%29.aspx)并让您的函数返回一个包含一个或零个项目的集合。

另一种选择是[有条件地链接两个块](http://msdn.microsoft.com/en-us/library/hh462705%28v=vs.110%29.aspx)，以便`null`s 被忽略并`null`在您不想产生任何东西时返回。但是如果你这样做，你还必须将源链接到 a [`NullTarget`](http://msdn.microsoft.com/en-us/library/hh462765%28v=vs.110%29.aspx)，这样`null`s 就不会留在它的输出缓冲区中。

第二个问题是如何将 Foo1s 发送到块#2 和块#3。我可以在这里看到两种方式：

1.  使用`BroadcastBlock`链接到两个目标块（#2 和#3）。小心这一点，因为`BroadcastBlock`没有输出队列，所以如果目标块推迟了一个项目，这意味着它不会处理它。因此，在这种情况下，您不应该设置`BoundedCapacity`块 #2 和 #3。如果您不这样做，它们将永远不会推迟，所有消息都将由两个块处理。
2.  在块 #2 处理 Foo1 之后，手动`Post()`（或更好地`SendAsync()`）将其用于块 #3。

我不确定“大约在同一时间”到底是什么意思，但总的来说，TPL Dataflow 不对独立块的处理顺序做出任何保证。[您可以使用custom`TaskScheduler`](http://blogs.msdn.com/b/pfxteam/archive/2010/04/09/9990424.aspx)更改不同块的优先级，但我不确定这在这里是否有用。

最后一个也是最复杂的问题是如何在单个块中处理不同类型的项目。有几种方法可以做到这一点，但我不确定哪种方法最适合您：

1.  不要在单个块中处理它们。有一个`TransformBlock<Foo1, Foo2>`和一个`TransformBlock<Foo3, Foo2>`。然后，您可以将它们都链接到一个`BufferBlock<Foo2>`.
2.  正如您所建议的，使用`BatchedJoinBlock<Foo1, Foo3>`, with `batchSize`of 1。这意味着结果`Tuple<IList<Foo1>, IList<Foo3>>`将始终包含 one`Foo1`或 one `Foo3`。
3.  `BatchedJoinBlock`通过将 链接到`TransformBlock`产生更合适类型的 a 来增强先前的解决方案。这可能是`Tuple<Foo1, Foo3>`（其中一项将始终为`null`）或类似 F# 的东西[`Choice<Foo1, Foo3>`](http://msdn.microsoft.com/en-us/library/ee353439.aspx)，它确保仅设置两者中的一项。
4.  从头开始创建一个新的块类型，这正是您想要的。它应该`ISourceBlock<Foo2>`并且也有两个属性：`Target1`类型`ITarget<Foo1>`和`Target2`类型`ITarget<Foo3>`，就像内置的连接块一样。

使用选项 #1 和 #3，您还可以将块封装到单个自定义块中，从外部看起来就像 #4 中的块，以便更容易重用。

# java - 需要使用hadoop cloudera的demo

> ID：11242145
> 
> 赞同：0
> 
> 时间：2012-06-28T09:55:42.127
> 
> 标签：java, hadoop, cloudera

我是hadoop的初学者。我了解使用 map reduce 的基本工作流程。我使用 hadoop api 在 eclipse 中编写了一些基本的独立程序。我想进入真正的东西并亲自动手。到目前为止，我已经下载了 cloudera vmdk 并将其安装在 VMWare Fusion 上。

有人可以指出我正确的位置，在那里我可以找到清晰的信息如何继续前进。我想在 2 台或更多机器上使用 hdfs 并编写一些使用这些系统资源进行并行计算的独立应用程序来解决我的任务。互联网上的所有烤箱我刚刚发现了对 map reduce 和许多高级主题的理解，但没有什么特别的。

请引导我到正确的地方，在那里我可以找到教程或视频讲座，以帮助我前进

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T11:25:25.567

> 请引导我到正确的地方，在那里我可以找到教程或视频讲座，以帮助我前进

这是论坛中不断出现的问题。[这](http://www.thecloudavenue.com/p/hadoop-mapreduce-resources.html)是我发现随着时间的推移有趣的 Hadoop 材料的综合列表。

MapReduce 可以用来解决很多有趣的算法。检查[this](http://atbrox.com/2011/05/16/mapreduce-hadoop-algorithms-in-academic-papers-4th-update-may-2011/)和[this](http://www.umiacs.umd.edu/~jimmylin/MapReduce-book-final.pdf)以了解可以在 MapReduce 之上实现的各种算法。选择一个您感兴趣的主题并开始实施它，然后您将熟悉 Hadoop/MapReduce。

# c# - 在现有项目上实施命名约定的最简单方法是什么？

> ID：11242147
> 
> 赞同：2
> 
> 时间：2012-06-28T09:55:42.763
> 
> 标签：c#, visual-studio-2010, automation, naming-conventions, standards

我刚刚继承了一个有点迷宫的项目——也没有命名约定，这使得解析变得困难。因此误读一行并浪费一两个小时是非常令人沮丧的。

例如，是否有一种自动化的方法来确保所有方法都有一个大写字母，所有公共变量都有一个大写字母，所有私有变量都带有下划线前缀？

我会自己做，但项目很大，不会有效地利用时间。

你能给我什么建议来解决这个问题，除了“忍住！” ? :)

该项目使用 C#，我使用的是 VS2010。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T10:04:53.770

如果你碰巧有[Resharper](http://www.jetbrains.com/resharper/)（你应该！不，真的，如果你没有 RUN 来获取你的副本）、[StyleCop](http://stylecop.codeplex.com/)和[用于 Resharper](http://stylecop.forresharper.org/)插件的 StyleCop，你可以部分自动化你的代码清理。不过，设置所有内容（定义 StyleCop 规则等）可能不是一项简单的任务。因此，根据您的代码库大小，这可能是一项有利可图的投资，也可能不是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T10:20:38.870

我在重构方面没有太多经验，但我想到的第一个解决方案是有用的**重命名**功能 VS2010，用于重命名项目的成员。

![重命名特征](../Images/3a8136be35b3dcd1da2c3c8a0873d12c.png)

通过这种方式，您可以重命名，例如，从其定义开始，对变量的所有引用。此功能也在[此处](http://www.dotnetjalps.com/2010/03/rename-feature-in-visual-web-developer.html)和[SO](https://stackoverflow.com/questions/1098654/visualstudio-shortcut-for-when-renaming-variable)中进行了讨论。**也许，您必须更改很多成员的定义，但是，通过这种方式，您可以比使用Find & Replace**节省很多时间。

此外，实现目标的最佳工具可能是[ReSharper](http://www.jetbrains.com/resharper/)，用于重构 C# 代码。我的同事用它来重构和改进代码。关于 ReSharper 的一些内容也在 SO、[here](https://stackoverflow.com/questions/6433654/how-to-reformat-naming-styles-with-resharper?lq=1)和[here](https://stackoverflow.com/questions/8192993/resharper-rename-feature-similar-to-visual-studio-rename-is-it-possible)中进行了讨论。

# c# - 资源文件的 C# 安全性

> ID：11242149
> 
> 赞同：4
> 
> 时间：2012-06-28T09:55:52.897
> 
> 标签：c#, security, embedded-resource

我找了一个小时，但我什么也没找到。
我阅读了有关**资源文件**的教程，并决定尝试一下。当我看到输出时我很惊讶，因为资源文件在 DLL 中发生了更改，而不是在 .exe 文件中。

我的问题是：

*   这些文件如何安全？
*   什么可以安全存放在其中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T10:03:55.680

[谷歌](http://msdn.microsoft.com/en-us/library/xbx3z216.aspx)第一次点击“资源文件安全站点：msdn.microsoft.com”指出：

> **警告**
> 
> 不要使用资源文件来存储密码、安全敏感信息或私人数据。

他们不会无缘无故地说：资源文件默认情况下没有加密或混淆，因此任何使用资源编辑器、msil.exe 或 JustDecompile 等程序的人都可以看到资源文件的内容。

您可以使用某种密钥应用加密，但是您必须再次将密钥存储在某处才能解密资源。这个密钥本身也会遇到同样的问题：你在哪里安全地存储它，所以攻击者不能用它来解密你的资源？

如果您必须分发您的程序，这几乎是不可能的，因此只需寻找替代解决方案。也许解释你到底想做什么有助于找到一个有用的答案。

# c++ - 循环类依赖，同时在 C++ 中包含头文件

> ID：11242150
> 
> 赞同：0
> 
> 时间：2012-06-28T09:55:53.013
> 
> 标签：c++, class, header, include, dependencies

我正在使用 Visual Studio 2010 开发一个 C++ 程序。我有这些类定义和头文件：
sh：

```
class s : oe {
    ...
}; 
```

日：

```
class t : oe {
    ...
}; 
```

oe.h：

```
class oe {
    ...
    o getO();//we reference to class 'o' in oe.h, so we must include o.h begore oe.h
}; 
```

＆ 哦 ：

```
class o {
    ...
    s getS();//we reference to class 's' in o.h, so we must include s.h begore o.h 
}; 
```

问题是我们引用了类'o' `oe.h`，所以我们必须包含`o.h`before `oe.h`，并且我们引用了类's' `o.h`，所以我们必须包含`s.h`before `o.h`，但我们不能这样做，因为`s.h`需要`oe.h`&`oe.h`需要`o.h`&`o.h`需要`s.h`！
如您所见，类依赖循环中存在某种循环，因此我无法编译该项目。如果我删除 sh & th & oe.h 之间的依赖关系，问题就会解决（这里是`stdafx.h`针对这种状态的）：

```
#include "s.h"
#include "t.h"
#include "o.h"
#include "oe.h" 
```

但我必须使用所有给定的依赖项并且我不能删除任何依赖项。任何的想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T09:57:52.320

您可以改用**前向声明**并将实现移动到实现文件来解决此问题。

而不是包含一个标头`s`，只需转发声明它：

```
class s; 
```

除了类的数据成员之外，您几乎可以将它用作不完整类型。（假设实现是分开的）。

**这很可能无法解决根本问题**，即您的设计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T10:04:48.090

前向声明不仅适用于返回值的指针/引用。

因此，您可以执行以下操作：

**oe.h：**

```
class o;

class oe {
    o getO();
}; 
```

**oe.cpp：**

```
#include "oe.h"
#include "o.h"

o oe::getO() {
    return o();
} 
```

根据需要冲洗并重复...由于文件中不再有`#include`s `.h`，因此没有机会循环包含依赖项。

# apache - 在事件链中调用 servlet

> ID：11242152
> 
> 赞同：1
> 
> 时间：2012-06-28T09:56:05.960
> 
> 标签：apache, tomcat, servlets, proxy

我已将 Apache httpd 配置为用作转发代理服务器。

如何在事件链中添加在 tomcat 上运行的 servlet，以便 servlet 可以访问通过 apache 转发代理服务器的请求和响应，并在需要时修改它们（基于某些关键字）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T10:37:49.810

apache 中的[mod_rewrite](http://httpd.apache.org/docs/1.3/mod/mod_rewrite.html)模块实际上可以重写 url。

**参考：**

*   [Mod重写示例](http://www.sitepoint.com/apache-mod_rewrite-examples/)

# internet-explorer - Internet Explorer - 过滤阴影属性使文本内部变得丑陋

> ID：11242154
> 
> 赞同：0
> 
> 时间：2012-06-28T09:56:23.100
> 
> 标签：internet-explorer, text, css

我在 Internet Explorer（Internet Explorer 7 Internet Explorer 8）中通过以下 CSS 应用了一个带有框阴影的 div。

```
box-shadow:        0px 0px 15px #FF00CC;
-o-box-shadow:     0px 0px 15px #FF00CC;
-moz-box-shadow:   0px 0px 15px #FF00CC;
-webkit-box-shadow:0px 0px 15px #FF00CC;
zoom: 1;
filter: progid:DXImageTransform.Microsoft.Shadow(Color=#ff99eb, Strength=7, Direction=0),
        progid:DXImageTransform.Microsoft.Shadow(Color=#ff99eb, Strength=7, Direction=90),
        progid:DXImageTransform.Microsoft.Shadow(Color=#ff99eb, Strength=7, Direction=180),
        progid:DXImageTransform.Microsoft.Shadow(Color=#ff99eb, Strength=7, Direction=270),
        progid:DXImageTransform.Microsoft.Chroma(Color='#ffffff');
background-color:#FFFFFF;
border:1px solid #FF00CC; 
```

它给了它一个盒子阴影，但是使里面的文字变得模糊和难看，也就是黑色的文字失去了清晰度：

![在此处输入图像描述](../Images/e959e032379f22159775d1af40ee2f50.png)

如果没有盒子阴影属性，它是这样的：

![在此处输入图像描述](../Images/9fb611d6a94d05fd464ebee713229496.png)

除了给 div 一个盒子阴影之外，我怎样才能使内部文本正常？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T11:53:45.757

它可以在 Internet Explorer 8 中通过在内容中包含一个额外的 div 来克服，`position:relative;`文本再次具有它的荣耀：

```
<div class="shadow-box">
    <div style="position:relative;">Lorem ipsum dosectetur adipisicing elit</div>
    </div>

    .shadow-box {
        box-shadow:        0px 0px 15px #FF00CC;
        -o-box-shadow:     0px 0px 15px #FF00CC;
        -moz-box-shadow:   0px 0px 15px #FF00CC;
        -webkit-box-shadow:0px 0px 15px #FF00CC;
        zoom: 1;
        filter: progid:DXImageTransform.Microsoft.Shadow(Color=#ff99eb, Strength=7, Direction=0),
                progid:DXImageTransform.Microsoft.Shadow(Color=#ff99eb, Strength=7, Direction=90),
                progid:DXImageTransform.Microsoft.Shadow(Color=#ff99eb, Strength=7, Direction=180),
                progid:DXImageTransform.Microsoft.Shadow(Color=#ff99eb, Strength=7, Direction=270),
                progid:DXImageTransform.Microsoft.Chroma(Color='#ffffff');
        background-color:#FFFFFF;
        border:1px solid #FF00CC;
    } 
```

但是在 Internet Explorer 7 中，如果您使用阴影过滤器，它会删除字体上的 cleartype 属性，并且根据我的搜索没有任何修复

感谢*[CSS Box Shadow](http://css-tricks.com/snippets/css/css-box-shadow/)*和*[How to simulation CSS3 box-shadow in IE 6-8 without JavaScript。](http://www.useragentman.com/blog/2011/08/24/how-to-simulate-css3-box-shadow-in-ie7-8-without-javascript/)*.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-28T10:23:12.100

您可以使用阴影创建一个空白`div`并将其他元素的文本移动到它上面。您可以使用负边距或绝对位置。

# java - 如何使用我们在 SD 卡中创建的密钥（兼容全球平台的智能卡）

> ID：11242155
> 
> 赞同：1
> 
> 时间：2012-06-28T09:56:26.177
> 
> 标签：java, cryptography, key, smartcard, javacard

我实际上正在做一个使用 SD 卡（使用 java 卡技术的智能卡）来实现一些功能的项目，例如：与另一张卡（客户端）进行相互身份验证。所以我写了一些java卡小程序，但现在我有一个问题：

从卡规范或全球平台规范的那些参考资料中，我没有找到一种方法来重用卡上的密钥（不在卡外创建密钥库），首先我试图在 api dispo 中找到一些方法，我还没找到；然后实际上我必须在 java 卡小程序中编写程序，所以我如何检索/访问/使用卡上现有的密钥集；为了在身份验证中使用加密？

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T13:57:24.177

只需将密钥保存到小程序中的变量中即可。默认情况下，所有变量都是持久的。

您当然可以实现导入/导出功能，允许在小程序安装后将现有密钥对安装到小程序中。

**更新**

不要处理安全域——如果你想从你的小程序中访问一个密钥，把它存储在里面。

例如，使用 RSA 密钥，您可以逐个字段地导入它（例如 RSA 公钥的模数和指数）。对于导入，您必须将所有内容传输到`byte[]`表单中。然后可以使用一个或多个 APDU 将字节数组传输到卡中。如果字节数组对于一个 APDU 的有效载荷数据来说太长，则需要多个 APDU。

一旦您传输了指数或模数数据，您就可以创建公钥实例，然后设置它的组件。

```
RSAPublicKey pub = KeyBuilder.buildKey(ALG_RSA, LENGTH_RSA_1024);
pub.setExponent(...);
pub.setModulus(...); 
```

如果将创建的 RSAPublicKey 实例保存在 applet 类的字段变量中，则可以确保它是持久保存的。

与您可以为其他加密算法创建私钥和密钥的方式相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-02T20:51:12.273

Java 卡小程序没有任何机制可以从 PUT 到相关安全域的密钥创建 Java 密钥对象。小程序可用的 GP 服务来自[org.globalplatform.GPSystem](http://www.win.tue.nl/pinpasjc/docs/apis/gp22/index.html)类，包括访问安全通道、持卡人验证、锁定卡等。设备上的 Java 卡小程序也可以发布自己的服务。

可以通过颁发者安全域 (ISD) 加载小程序，然后它与该安全域相关联。因此，它可以访问基于 ISD 密钥的安全通道实现。

org.globalplatform.Application.processData() 方法将在applet 可选择之前处理STORE DATA APDU。请参阅 GP 卡规范 v.2.3.1 的第 7.3.2 节。在applet 可选择之后，applet 可以处理安全通道APDU（[此处](https://stackoverflow.com/questions/29455715/java-card-applets-secure-data-transmission-and-secure-channel)）并将安全通道实现委托给ISD。

如果传入的数据包含密钥材料，则小程序可以将这些密钥字节传输到 Java Key 对象。

# sql-server - 在 SQL Server 存储过程中显示一组指令的“经过时间”的一种优雅方式

> ID：11242157
> 
> 赞同：1
> 
> 时间：2012-06-28T09:56:49.440
> 
> 标签：sql-server, performancecounter, database-performance

我在存储过程中有几个阶段，目前能够通过减去`DATETIME`值以非常原始的方式显示经过的时间。

你知道/推荐一种更优雅的方式吗？（我猜 RAISERROR 仍然是以同步方式显示包含经过时间的标签的最佳方式）

# xcode - 播放系统声音

> ID：11242159
> 
> 赞同：0
> 
> 时间：2012-06-28T09:57:07.133
> 
> 标签：xcode, audio, uialertview

我有一个`UILocalNotification`播放以下声音：

```
notification1.soundName = @"Alarm"; 
```

当应用程序打开时，我使用

```
- (void)application:(UIApplication *)application didReceiveLocalNotification:(UILocalNotification *)notification 
```

在 appDelegate 中拦截用户不会注意到的警报，但不会播放声音。如何让声音播放？在进一步提到的方法中，我有一个`UIAlertView`但我找不到用声音触发它的可能性。

谢谢！

# html - 如何将 HTML 文件转换为图像文件

> ID：11242165
> 
> 赞同：2
> 
> 时间：2012-06-28T09:57:29.307
> 
> 标签：html, forms, submit, eps

我有一个使用 HTML 制作的信头，我想将其转换为图像如何完成。我想在我的网站上使用它，即当用户点击提交按钮时，它应该在后台转换它......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T06:26:04.917

您可以使用 VBScript 将您的 HTML 页面转换为图像

```
Dim snap

'Create the Html Snapshot Object
Set snap = CreateObject("HTMLSNAP2.HtmlSnap.1")

'Begin to capture the web page
snap.SnapUrl "http://www.google.com/", "google.jpg" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T08:47:21.070

如果您使用的是 PHP，那么您可以看这里：

[https://stackoverflow.com/questions/1963900/php-library-for-converting-html-to-image](https://stackoverflow.com/questions/1963900/php-library-for-converting-html-to-image)

那里的问题有几种解决方案。

当用户单击“提交”时，您可以让脚本将 HTML 发送到服务器，然后返回结果。我应该想到的大多数解决方案都相当快，具体取决于要转换的 HTML 的复杂性......

# c# - 使用 DI/抽象工厂模式时的依赖处理

> ID：11242166
> 
> 赞同：3
> 
> 时间：2012-06-28T09:57:29.627
> 
> 标签：c#, entity-framework, dependency-injection, repository-pattern, abstract-factory

在下面的简化示例中，我有一个我认为以相当合理的方式定义的 DataContext 和 Repository：

```
public interface IUnitOfWork 
{
   int SaveChanges();
}

public class DataContext : DbContext, IUnitOfWork 
{
    public DbSet<Car> Cars { get ; set; }
}

public interface ICarsRepository 
{
    Car Find(int id);
    void Add(Car car);
}

public class SqlCarsRepository : ICarsRepository 
{
    private DataContext  _context;
    public SqlCarsRepository(DataContext context)
    {
       _context = context;
    }

    public Car Find(int id) 
    {
        return _context.Cars.Find(id);
    }

    //etc
} 
```

我正在努力研究如何使用 DI 和抽象工厂模式来实现我想要的。在 MVC 应用程序中，这很容易设置 - 控制器需要在其构造函数中实现 IUnitOfWork 和 ICarsRepository 的实例。我可以将容器配置为使用不同的控制器工厂为每个 Http 请求提供相同的 DataContext 实例。不知何故，似乎一次性依赖项已正确处理。

但是我想在 Windows 服务中使用相同的存储库。这是多线程的，每个线程在启动时都需要访问自己的存储库，并且每个线程都应该有自己的 DataContext / UnitOfWork。但我不知道该怎么做：

*   应用程序的复合根是服务启动时，因此无法为每个线程解析依赖关系（线程按需启动）。
*   我不确定如何使用抽象工厂模式。线程需要 IUnitOfWork 和 ICarsRepository 的实例，但共享相同的 DataContext。我可以创建一个抽象工厂来在一次调用中创建它们，并将其传递给线程，但是我不知道如何处理 DataContext。我不希望线程必须关心对 ICarsRepository 实现的依赖项是一次性的。我绝对不希望线程知道 ICarsRepository 依赖于 DataContext，因为那样拥有接口似乎毫无意义——线程可能只依赖于 SqlCarsRespository。
*   我不想让 SqlCarsRepository 成为一次性的并让它处理 DataContext，因为可能有其他人在使用 DataContext，而且它一开始并没有创建它。
*   我认为我可以创建一个隐藏 IUnitOfWork 和 ICarsRepository 的 CarsService（并使用抽象工厂获取它的实例），但我仍然不知道如何处理 DataContext 依赖项

做我正在尝试的最好方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T11:24:23.100

> > 因此无法为每个线程解决依赖关系

他们可以，而且事实上，他们应该这样做。您应该在每个线程的开头解析一个新的对象图。不这样做意味着您只能使用线程安全的依赖项，而您的情况并非如此。

> > 我不确定如何使用抽象工厂模式

我认为首先，尝试`DataContext`在您的 MVC 应用程序中将您定义为 Per Web Request，并在您的 Windows 服务中定义为 Per Lifetime Scope（或您使用的容器中可用的任何内容）。在您的 Windows 服务中，每个线程都将获得自己的生命周期范围。定义范围通常允许您在范围结束时释放实例。

> > 我不希望线程必须关心对 ICarsRepository 实现的依赖项是一次性的

您的线程应该关心这一点，但您的业务逻辑不应该。启动新线程时，您将必须拥有一些允许启动和结束范围以及解析和使用图的根类型的基础架构代码。此代码应该是您的组合根的一部分，因此应用程序的其余部分应该忽略这一点。如果您使用 Per Lifetime Scope（或其他显式生命周期）注册了某些类型，您的容器将知道何时处置这些实例。基础设施代码只需要告诉容器，范围已经结束。

> > 我不想让 SqlCarsRepository 一次性

`SqlCarsRepository`应该依赖于一个没有实现的接口，在`IDisposable`这种情况下没有什么可以处理的。它应该是负责处理 的容器`DataContext`，并且通过正确的注册，您可以执行此操作。

> > 做我正在尝试的最好方法是什么？

你的设计听起来很合理，但这里有一些其他的 SO 问题，可能会给你更多的工作：

*   [每个 Web 请求一个 DbContext……为什么？](https://stackoverflow.com/questions/10585478/one-dbcontext-per-web-request-why/10588594#10588594)
*   [创建对象的线程中的依赖注入](https://stackoverflow.com/questions/10281132/dependency-injection-in-thread-that-create-objects)
*   [在多线程应用程序中使用 DI。](http://simpleinjector.codeplex.com/wikipage?title=How-to#Multi_Threaded_Applications)

# java - 容器内的 Java Quartz 作业

> ID：11242171
> 
> 赞同：3
> 
> 时间：2012-06-28T09:57:45.697
> 
> 标签：java, quartz-scheduler

[使用http://quartz-scheduler.org/documentation/quartz-2.1.x/examples/Example1](http://quartz-scheduler.org/documentation/quartz-2.1.x/examples/Example1)中提到的说明成功安排了第一个 java Quartz 作业

由于它是一个独立的应用程序，我们使用 main 方法。我想让它成为一个容器管理的。所以，我按照[http://quartz-scheduler.org/documentation/quartz-2.1.x/cookbook/ServletInitScheduler中的说明添加了代码](http://quartz-scheduler.org/documentation/quartz-2.1.x/cookbook/ServletInitScheduler)

但是我无法在容器环境中在预定时间自动运行该作业。我仍然必须使用主要方法并手动运行作业。

请为此建议我一个解决方案。

这是石英调度程序代码的链接。 [https://gist.github.com/60b236e7fd1432c76248](https://gist.github.com/60b236e7fd1432c76248)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T22:52:03.993

我认为你有几个问题需要解决。

1.  检查石英文档并修改您的 web.xml 以使用侦听器或 servlet 方法。你目前两者都有。

2.  您需要另一个 servlet 在 tomcat 中运行以创建作业。谷歌了解如何创建一个简单的 servlet 或询问更多信息。您必须获取由quartz init servlet 创建的调度程序工厂——查看quartz init servlet 的javadocs 以了解如何执行此操作。它们使其在 servlet 上下文中可供其他 servlet 获取

# git - 如何将来自外国回购的补丁视觉应用到我的？

> ID：11242173
> 
> 赞同：1
> 
> 时间：2012-06-28T09:57:53.310
> 
> 标签：git, patch

一位同事从他的 git repo 中向我发送了一个补丁。由于它不是克隆，因此他的`index`条目包含我的仓库中不知道的哈希值。样本：

```
index 20589f5..bbdd152 100644 
```

`20589f5`存在于他的仓库中，但不在我的仓库中。

当我尝试使用 TortoiseMerge 应用补丁时，我收到消息

```
fatal: not a valid object name 
```

**我怎么能欺骗 TortoiseMerge 接受补丁？**

* * *

编辑：它不一定是 TortioseMerge。任何其他可以让我直观地应用我的补丁（并在 Windows 上运行，最好是免费的）的工具也很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T10:12:01.170

Git 补丁实际上只是 mbox 格式的统一差异。如果您不关心 Git 元数据或合并历史记录，您可以将补丁文件直接提供给命令行上的*补丁命令。*例如：

```
cd /path/to/project
patch < 0001-foo.patch 
```

这当然有效，但是如果维护历史对您很重要，那么使用 git-bundle(1) 传输完整的分支可能是更好的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T00:23:18.530

由于它来自一位同事，因此最好的答案是让他提供缺失的数据，或者通过补丁系列或让您从他的存储库中获取。如果你能得到这些数据，任何其他路线都只是浪费时间。

否则，您有一个补丁不能完全应用于您当前的工作树，并且您没有足够的信息来执行 3 路合并。

现在，如果您仍然想尝试应用补丁，我建议使用`git am`（或者`git apply`，如果他提供了差异而不是补丁——这是不好的做法）尝试应用补丁。您可以使用该`--reject`选项强制尽可能多地应用它。Git 将为没有完全适用于当前树的差异块创建“.rej”文件。然后，您可以尝试手动应用这些。

另一种选择是通过编辑器手动应用整个补丁。

无需`patch`按照其他地方的建议使用。`git apply`将永远是可取的。

现在，你想在视觉上做到这一点，我能提供的最好的建议`--interactive`是`git apply`. 这将允许您逐个应用补丁块。

您不能使用 Tortoisemerge 执行此操作，因为 Tortoisemerge[需要](http://tortoisesvn.net/docs/release/TortoiseMerge_en/tme-automation.html)两个或三个完整的文件才能执行合并。由于您的索引值与存储库中的已知 blob 不对应，因此您无法向 Tortoisemerge 提供完整的基本文件修订。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T05:40:50.707

如果您在没有任何参数的情况下手动启动 TortoiseMerge，则会出现一个对话框提示您在“合并”和“应用统一差异”之间进行选择。选择后者并将补丁选择为“Diff 文件”，并将您的 Git 工作树选择为“目录”。按下“确定”后，会出现一个窗口，其中列出了修补程序修改的所有文件。然后单击“修补所有项目”或选择一个文件并单击“修补选择项目”。这将在 TortoiseMerge 中直观地应用补丁。

# java - 在基于 Spring 的 Web 应用程序中处理会话过期事件

> ID：11242174
> 
> 赞同：2
> 
> 时间：2012-06-28T09:57:59.597
> 
> 标签：java, spring, spring-security, session-timeout

我在我的应用程序中使用 Spring 安全功能，但我发现当会话过期时，所有请求 ajax 都返回页面 login.jsp（不是重定向，在 http 响应中，它放置所有 html 内容）这是登录页面我的网络应用程序。我在我的应用程序中使用了很多 ajax 请求，目标是返回某些错误代码，例如 510，而不是登录页面。

```
<session-management session-authentication-strategy-ref="example" /> 
```

没有 invalid-session-url 我试图使 invalid-session-url = "", 不起作用。非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T10:40:32.400

使用自定义[AuthenticationEntryPoint](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#auth-entry-point)：

```
package com.example.spring.security
// imports here

public class AjaxAwareAuthenticationEntryPoint
     extends LoginUrlAuthenticationEntryPoint {

  public AjaxAwareAuthenticationEntryPoint(final String loginFormUrl) {
    super(loginFormUrl);
  }

  @Override
  public void commence(final HttpServletRequest request, final HttpServletResponse response, final AuthenticationException authException)
      throws IOException, ServletException {

    if ("XMLHttpRequest".equals(request.getHeader("X-Requested-With"))) {
      response.sendError(403, "Forbidden");
    } else {
      super.commence(request, response, authException);
    }
  }
} 
```

定义一个 bean 并`entry-point-ref`在[`<http>`element](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#nsa-http)中使用它：

```
<http entry-point-ref="authenticationEntryPoint">
  <!-- more configuration here -->
</http>

<bean id="authenticationEntryPoint"
   class="com.example.spring.security.AjaxAwareAuthenticationEntryPoint">
 <constructor-arg value="/login.jsp"/>
</bean> 
```

# python - 用一个按键暂停无限循环

> ID：11242176
> 
> 赞同：2
> 
> 时间：2012-06-28T09:58:02.600
> 
> 标签：python, loops, ubuntu, while-loop, infinite

我是 python 新手，我一直在尝试找到一种简单的方法来暂停正在运行的 while 循环，从而可以从暂停的位置重新启动它。我在谷歌上搜索了帮助和提示，但我发现的一切似乎都非常复杂。有没有一种简单的方法可以做到这一点？

我读过你可以使用 termios 和 tkinter。

我正在使用 ubuntu。

抱歉语言错误

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T12:12:44.873

这是一个在无限循环中运行的简单 tkinter 程序。按`space`暂停/取消暂停，然后按`Esc`退出。

注意：以下内容适用于 Python 2.x，如果您使用的是 Python 3，`Tkinter`请将第一行更改为`tkinter`（小写 t）。

```
from Tkinter import *
import time

class MyLoop():
    def __init__(self, root):
        self.running = True
        self.aboutToQuit = False
        self.root = root
        self.someVar = 0
        self.root.bind("<space>", self.switch)
        self.root.bind("<Escape>", self.exit) 

        while not self.aboutToQuit:
            self.root.update() # always process new events

            if self.running:
                # do stuff
                self.someVar += 1
                print(self.someVar)
                time.sleep(.1)

            else: # If paused, don't do anything
                time.sleep(.1)

    def switch(self, event):
        print(['Unpausing','Pausing'][self.running])
        self.running = not(self.running)

    def exit(self, event):
        self.aboutToQuit = True
        self.root.destroy()

if __name__ == "__main__":
    root = Tk()
    root.withdraw() # don't show the tkinter window
    MyLoop(root)
    root.mainloop() 
```

这是一个可能的输出，我在退出之前手动暂停和取消暂停程序两次。

```
1
2
3
4
5
6
7
Pausing
Unpausing
8
9
10
11
12
13
14
15
16
Pausing
Unpausing
17
18
19
20
21
22
23
24
25 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T10:13:39.783

不要谈论如何使用单个按键来完成，而是要恢复和暂停您可以使用的 while 循环`generator functions`，请参见下面的示例：

```
i=-1
def infi():
   global i
   while i<99999999:
       i+=1
       yield i

a=iter(infi())

for x in range(6):
    print(next(a))
#loop paused at 5     
print('now it wil start from start 6')

for x in range(11):
    print(next(a)) 
```

**输出：**

```
0
1
2
3
4
5
now it wil start from start 6
6
7
8
9
10
11
12
13
14
15
16 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-01T20:10:01.787

老兄，这是一个while循环......不要在while循环中运行它，这会阻塞CPU，只需尝试使用计时器......

这是从未显示的窗口获取输入的 python 3 示例，在 OSX、Linux Ubuntu 和 Windows 8 上进行了测试

```
import tkinter as tk
import time

class App():
    def __init__(self):
        self.state = 'running'
        self.cnt = 0
        self.root = tk.Tk()
        self.update_clock()
        self.root.bind("<Key>", self.key)
        self.root.geometry('1x1+9000+9000')
        self.root.mainloop()

    def update_clock(self):
        now = time.strftime("%H:%M:%S")
        self.root.after(100, self.update_clock)
        self.root.focus_set()
        if(self.state == 'running'):
            self.cnt = self.cnt + 1
        if(self.cnt <= 100):
            print('state: ',self.state,' count:',self.cnt,'%')
        else:
            exit()

    def key(self,event):
        self.root.focus_force()
        if(event.keysym == 'Escape'):
            self.state = 'paused'
        elif(event.keysym == 'space'):
            self.state = 'running'
        print("pressed", repr(event.keysym))
        print("state",self.state)
app=App()
app.mainloop() 
```

您可以为此感谢@saranyan...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-09T23:03:36.077

我一直在寻找这个解决方案，但结果非常简单。我很高兴选择模块仅适用于 Unix 系统，但它使事情变得非常简单。

```
import sys
import select
inputSrc = [sys.stdin]

while True:

    # Do important stuff

    # Check if a key was pressed and if so, process input
    keypress = select.select(inputSrc, [], [], 0)[0]
    while keypress:
        for src in keypress:
            line = src.readline()
            if not line:
                inputSrc.remove(src)
            else:
                # The "enter" key prints out a menu
                if line == "\n":
                    print "Test Paused\nOptions: [0]: Quit  [any other key]: Resume"
                elif line.rstrip() == "0":
                    exit(0)
                elif len(line) >= 1: #any other key
                    print "Resuming..."
                    keypress = None 
```

# php - 将查询结果转换为 HTML 列表

> ID：11242181
> 
> 赞同：3
> 
> 时间：2012-06-28T09:58:45.140
> 
> 标签：php, mysql

我真的只是在涉足 PHP 和 MySQL 领域。我已经按照我想要的方式完成了这项工作，但我知道它很丑陋，我想知道真正知道他们在做什么的人会如何完成它。

```
 function displayCategoryMenu($db){  
       echo '<ul class="class">';
       foreach($db->query('SELECT * FROM categoryDb, thingDb WHERE category = category AND categoryId= "aaa0001"  ORDER BY category, thingName') as $row){
          if($categoryName!== $row['categoryName']){
            $categoryName= $row['CategoryName'];
            echo '<li class="category">'.$categoryName.'</li>';
          }
          echo'<li><a class="fader" href="?&amp;page='.$row['thingId']">'.$row['thingName'].'</a></li>';
      }
      echo '</ul>';

       echo '<ul class="class">';
       foreach($db->query('SELECT * FROM categoryDb, thingDb WHERE category = category AND categoryId= "aaa0002"  ORDER BY category, thingName') as $row){
          if($categoryName!== $row['categoryName']){
            $categoryName= $row['CategoryName'];
            echo '<li class="category">'.$categoryName.'</li>';
          }
          echo'<li><a class="fader" href="?&amp;page='.$row['thingId']">'.$row['thingName'].'</a></li>';
      }
      echo '</ul>';
      $db=null;
    } 
```

这基本上会产生一个无序列表菜单，其中第一个孩子充当标题：

```
 <ul>
       <li>category1Name</li>
       <li><a>thing</a></li>
       <li><a>thing</a></li>
       <li><a>thing</a></li>
    </ul>
    <ul>
       <li>category2Name</li>
       <li><a>thing</a></li>
       <li><a>thing</a></li>
       <li><a>thing</a></li>
    </ul> 
```

或者：

**类别1**

*   事物
*   事物
*   事物

**类别2**

*   事物
*   事物
*   事物

等等……

每个 ul 代码的唯一区别是“categoryId”（aaa0001、aaa0002 等......）我只能想象我正在努力解决这个问题，我可以收集到最丑陋的代码。我很想看看应该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T10:05:48.330

您应该将类​​别 ID 列表存储在数组中的某个位置，并在使用变量代替类别 ID 时对其进行迭代。就像是 ：

```
function displayCategoryMenu($db){  
    $categoryIds = array('aaa0001', 'aaa0002');

    foreach ($categoryIds as $categoryId) {
        echo '<ul class="class">';
        foreach($db->query('SELECT * FROM categoryDb, thingDb WHERE category = category AND categoryId= "' . $categoryId . '"  ORDER BY category, thingName') as $row) {
            if($categoryName !== $row['categoryName']){
                $categoryName = $row['CategoryName'];
                echo '<li class="category">' . $categoryName . '</li>';
            }
            echo '<li><a class="fader" href="?&amp;page=' . $row['thingId'] . '">' . $row['thingName'] . '</a></li>';
        }
        echo '</ul>';
    }
} 
```

这里的数组`$categoryIds`包含您必须显示的 ID 列表，您可以动态生成它或根据需要将其作为函数参数传递，它很容易扩展。循环遍历该数组的每个元素，并对循环中变量`foreach`表示的每个 ID 执行完全相同的 HTML 显示和 SQL 查询作业。`$categoryId`

**关于您的行的**旁注**`$db = null;`：如果您不将`$db`函数参数[作为参考](http://php.net/manual/en/language.references.pass.php)传递，那么在您的函数中修改其*值*不会对原始变量产生任何影响，此处不需要此行。**

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T12:16:34.223

使用您所做的相同功能，我会同时选择所有类别和事物，如下所示：

```
function renderCategoryMenus($db, $category_id_array)
{  
   // Convery array('a00','b00') to string "'a00','b00'"
   $category_ids = "'" . implode("','", $category_id_array) "'";

   // Change * to just the fields you need
   // Use a join
   // WHERE id IN ('a00','b00')

   $query = 
      'SELECT CategoryName, thingName 
      FROM categoryDb 
      INNER JOIN thingDb 
      ON categoryDb.category = thingDb.category 
      WHERE categoryId IN \''. $category_ids .'\'  
      ORDER BY category, thingName'; 

   $results = $db->query($query);

   // Initialize your variables
   $output = '';
   $categoryName = '';

   foreach($results as $row) 
   {
      if ($categoryName != $row['categoryName']) // If this is a new category
      {
         if ($categoryName != '') // And it is NOT the first new category
         {
            $output .= '</ul>'; // End off the previous category
         }         

         $categoryName = $row['CategoryName'];

         // Store your output into a variable so you can return it
         $output .= '<ul class="class"><li class="category">' . 
            $categoryName . '</li>';
      }

      $output .= '<li><a class="fader" href="?&amp;page=' . 
         $row['thingId'] . '>' . $row['thingName'] . '</a></li>';
   }

   // End off the last category
   if ($output != '') // If we had any categories whatsoever
   {
      $output .= '</ul>';
   }

    return $output;
}    

echo renderCategoryMenus($db, array('aaa0001', 'aaa0002')); 
```

一种更简单的方法是使用像 Yii 那样的对象关系映射器。

使用[Yii](http://www.yiiframework.com/)，你可以做一些简单的事情：

```
function renderCategoryAsMenu($category)
{  
   $output .= '<ul class="class"><li class="category">' . 
      $categoryName . '</li>';      

   // This bit actually selects all 'things' in this 'category'
   foreach ($category->things as $thing)   
      $output .= '<li><a class="fader" href="?&amp;page=' . 
         $thing->thingId . '>' . $thing->thingName . '</a></li>';
   }

   $output .= '</ul>';

    return $output;
}    

$category_keys = array('a00','b00');
$categories = Category::model()->findAllByPk($category_keys);

$output = '';
foreach ($categories as $category)
{
   $output .= renderCategoryAsMenu();
}
echo output; 
```

你甚至可以让 renderCategoryAsMenu 成为模型上的一个函数，在这种情况下你可以说`$category->renderAsMenu()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T10:21:56.160

尝试这样的事情..我认为它更容易......并且为了调试我建议你使用ie `$sql_query`：

```
<?php
function displayCategoryMenu($db){  

    $sql_query  =  'SELECT * FROM 
                        categoryDb 
                    LEFT JOIN thingDb
                        ON categoryDb.category = thingDb.category
                    WHERE
                        thingDb.visible = 1                     
                    ORDER BY 
                        thingDb.category ASC, 
                        thingDb.thingName';

    $result = $db->query($sql_query);
    if(!mysql_error()){

    foreach ($result as $row) {
        if($currentcategory <> $row['CategoryName']){
            $output .=  '<ul class="class">';
            $output .=  '   <li class="category">'.$categoryName.'</li>';
            $output .=  '   <li><a class="fader" href="?&amp;page='.$row['thingId'].'">'.$row['thingName'].'</a></li>';
            $output .=  '</ul>';
        } else {
            $output .=  '<li><a class="fader" href="?&amp;page='.$row['thingId'].'">'.$row['thingName'].'</a></li>';
        }

        $currentcategory = $row['CategoryName'];

    }
    }else{
        $output = mysql_error().'<br>QUERY: '.$sql_query;
    }

    echo $output;

?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T10:19:01.277

根据您希望显示的类别 ID：

我会建议 1 个查询并遍历结果集。

那将是

1）没有 WHERE 子句（除非你需要它来加入，因为你有 2 个 WHERE 条件）

```
SELECT * FROM categoryDb, thingDb ORDER BY category, thingName 
```

2) 或扩展 WHERE

```
WHERE categoryId="aaa001" OR categoryId="aaa002" ... 
```

另外我建议：

```
if($categoryName!== $row['categoryName'])
{
    echo '<li class="category">' . $row['CategoryName'] . '</li>';
} 
```

您可以将函数重命名为“writeCategoryMenu”。**

# sql - 在（左）加入表格时保留数组的所有元素

> ID：11242182
> 
> 赞同：0
> 
> 时间：2012-06-28T09:58:47.243
> 
> 标签：sql, arrays, postgresql, left-join, postgresql-9.1

我正在尝试按月分组从我的费用表中提取所有 12 个月的费用。如果一个月没有结果，我仍然希望收到这个月价值 0（零）值的结果。

我的数据库是 PostgreSQL 9.1。

我写了这个查询，但我没有成功执行它或理解如何更正它。

```
SELECT fta.liability_id, fta.amount
     , date_part('month', fta.act_date) AS act_month
FROM  (
   select i
   from generate_series(1,array_upper(ARRAY[1,2,3,4,5,6,7,8,9,10,11,12],1)) i) as ym
LEFT OUTER JOIN financial_t_account fta on ym.i = fta.act_month; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T19:05:53.003

错误是您尝试`act_month`在 JOIN 条件中引用输出列的名称 ( )，但它不可见 - 它尚未计算！尝试：

```
SELECT fta.liability_id
      ,fta.amount
      ,date_part('month', fta.act_date) AS act_month
FROM  (
   SELECT i
   FROM   generate_series(1,array_upper(ARRAY[1,2,3,4,5,6,7,8,9,10,11,12],1)) i
   ) ym
LEFT JOIN financial_t_account fta
          ON ym.i = date_part('month', fta.act_date)::int; 
```

您可以在很大程度上简化为：

```
SELECT fta.liability_id
      ,fta.amount
      ,date_part('month', fta.act_date) AS act_month
FROM   generate_series(1,12) ym(i)
LEFT   JOIN financial_t_account fta
            ON ym.i = date_part('month', fta.act_date)::int; 
```

或者，如果您想从数组中获取任意月份，请使用[`unnest()`](http://www.postgresql.org/docs/current/interactive/functions-array.html#ARRAY-FUNCTIONS-TABLE)而不是[`generate_series()`](http://www.postgresql.org/docs/current/interactive/functions-srf.html)：

```
... 
FROM   unnest(ARRAY[1,2,4,57,8,11,12]) ym(i)
... 
```

使用[CTE](http://www.postgresql.org/docs/current/interactive/queries-with.html)（或子查询）来避免重复表达式（并计算两次）：

```
WITH x AS (
   SELECT *, date_part('month', act_date)::int As act_month
   FROM financial_t_account
)
SELECT x.liability_id
      ,x.amount
      ,x.act_month
FROM   generate_series(1,12) ym(i)
LEFT   JOIN x ON ym.i = x.act_month; 
```

# c - 数组访问算法是在编译时还是运行时完成的？

> ID：11242185
> 
> 赞同：1
> 
> 时间：2012-06-28T09:58:53.387
> 
> 标签：c

假设我有一个数组

```
int aVar[10];
...
...
for(i=0; i<10; i++)
    aVar[i] = i*10; 
```

在这里，我所知道的是数组被引用为指针，索引值的位置是用类似的东西计算出来的`(base address of aVar) + sizeof(int) * i`：如果我错了，请纠正我。

我的问题：

在运行可执行文件之前编译器是否已经完成了这个计算，或者在执行时完成了在数组中查找确切位置的算术计算？

当然，我们无法`aVar`在编译时得到地址。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T10:13:52.037

“当然我们不能在编译时得到aVar的地址？”

是的，实际上，我们可以，或者说足够接近。如果它是全局的或静态的，那么它将占据链接器可以解析的固定位置——不是在编译时而是在运行时。如果它在堆栈上，则堆栈指针的偏移量在编译时是已知的，因此在地址可以采用偏移量 + 寄存器内容形式的机器（例如 PC）上不需要计算任何内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T10:03:25.967

名义上它是在运行时完成的，但标准并不关心结果是否正确（标准将此称为“as-if”规则）。这取决于编写 C 实现的人，并且可能取决于您使用的优化选项。

如果编译器展开循环，那么它将知道堆栈指针的偏移量`aVar[0]`等`aVar[1]`，就像它知道`aVar`堆栈指针的偏移量一样。因此，看起来像这样的代码没有不可避免的障碍：

```
store 0 at some constant offset from the stack pointer
store 10 at a slightly larger constant offset from the stack pointer
etc. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T10:51:42.683

“无法在编译时获取 aVar 的地址”。没错，但是编译器可以在进入循环*之前*生成代码来计算其地址，并且在性能方面它需要优化的循环体，而不是循环前代码。

一个好的编译器对此进行优化，要么将该基地址放入循环内的寄存器中，因此它不必重新获取它，或者注意到您的数组访问以与索引相同的方式扫描数组。一个非常聪明的编译器会意识到 i*10 是根据数组索引计算得出的，并且没有其他内容，并且也会替换索引。所以编译出来的优化代码大概更像：

```
int aVar[10];
...
...
register int* p = &aVar;  // my C syntax may be slight wrong here
for(i=0; i10<10*10; i10+=10)
    *p = i10; 
```

（循环也可以反转，因此 i10 可以从 100 计数到零。由于减法通常在广泛使用的机器中产生条件代码，这可以节省比较指令。）

# vb6 - VB 形式的预期语句结束

> ID：11242187
> 
> 赞同：0
> 
> 时间：2012-06-28T09:59:05.397
> 
> 标签：vb6

我们得到以下代码的“预期：语句结束错误”和 VB 突出显示 Begin VB.Form **Form1**

```
Begin VB.Form Form1
   Caption = "Form1"
   ClientHeight = 3090
   ClientLeft = 60
   ClientTop = 450
   ClientWidth = 4680
   Icon  = "Form1.frx":0000
   LinkTopic = "Form1"
   ScaleHeight = 3090
   ScaleWidth = 4680
   StartUpPosition = 3    'Windows Default
End

Attribute VB_Name = "Form1"
Attribute VB_GlobalNameSpace = False
Attribute VB_Creatable = False
Attribute VB_PredeclaredId = True
Attribute VB_Exposed = False 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T10:18:20.587

该代码来自 .frm 文件，在 IDE 中不可编辑。

您无需输入此信息，当您从表单中添加编辑和删除控件和属性时，它会自动生成。

与 VB.NET 不同，您不能自己在 VB6 IDE 中编辑“设计器”代码。

# java - Etherpad 的时间线功能是如何工作的？

> ID：11242188
> 
> 赞同：1
> 
> 时间：2012-06-28T09:59:05.817
> 
> 标签：java, node.js, real-time, comet, etherpad

我想了解 Etherpad 的时间线功能是如何工作的。

如果你不知道这里的 etherpad 软件是它的一个实现 - [http://piratepad.net/](http://piratepad.net/)

做一些编辑，写点东西，加粗，使用编辑器，然后在右上角你会看到时间线。单击它并播放它。

我可以看到这样的 JSON 响应 - [http://img6.imagebanana.com/img/vmot5xt0/Selection_060.png](http://img6.imagebanana.com/img/vmot5xt0/Selection_060.png)但任何人都可以将其分解为可以理解的内容。

这是来自它的 Node.js 端口的一段代码 - [https://github.com/Pita/etherpad-lite/blob/master/src/node/handler/TimesliderMessageHandler.js#L359](https://github.com/Pita/etherpad-lite/blob/master/src/node/handler/TimesliderMessageHandler.js#L359)

我对理解 JSON 响应及其工作原理非常感兴趣。还有什么数据库最适合此类应用程序（etherpad、google docs 等）。Nosql（如 mongodb）或 sql（如 mysql）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T17:07:37.243

当您拖动时间滑块时，相关更改会从服务器发送到您发现的客户端。

更改被编码为将现有文档内容编辑为新文档内容的指令。见[https://github.com/ether/etherpad-lite/wiki/Changeset-Library](https://github.com/ether/etherpad-lite/wiki/Changeset-Library)

原文描述为：[https ://github.com/ether/pad/blob/master/infrastructure/ace/easysync-notes.txt](https://github.com/ether/pad/blob/master/infrastructure/ace/easysync-notes.txt)

Etherpad 主要在 SQL 上运行。也许有其他 DB:s 的实验，但对于 etherpad 来说最重要的是读取/写入变更集的原始表。关系数据库可能是性能和健全性的最佳选择。MySQL 是 etherpad 的默认设置。Postgres 已经在开发中。[http://appolo85.wordpress.com/2010/03/22/first-steps-understanding-etherpad/](http://appolo85.wordpress.com/2010/03/22/first-steps-understanding-etherpad/)上的数据库表列表

（因此，nosql 类型的数据库因此不是一个好主意。如果 mysql 对您来说太无聊，也许可以尝试使用全内存数据库以获得不错的速度提升。还要注意常规 etherpad 在强大服务器上的 java+scala 上运行，如果您想设置自己的服务器，这可能是您的主要障碍。）

# javascript - JQuery fadeIn/fadeOut 错误 - fadeTo 正常工作

> ID：11242194
> 
> 赞同：5
> 
> 时间：2012-06-28T09:59:50.593
> 
> 标签：javascript, jquery, fadeout

我已经认识到 jQuery fadeIn() 函数的行为，这对我来说似乎是错误的。

这些代码片段应该是等效的：

```
function fadeIn1(){
    $("#fadediv1").stop(true).fadeIn(2000); 
}

function fadeOut1(){
    $("#fadediv1").stop(true).fadeOut(2000);            
} 
```

和：

```
function fadeIn2(){
    $("#fadediv2").stop(true).fadeTo(2000, 1);  
}

function fadeOut2(){
    $("#fadediv2").stop(true).fadeTo(2000, 0);          
} 
```

但实际上示例 1 的行为很奇怪。我创建了一个示例页面，您可以在其中自己进行测试：http: [//neo1.fomalhaut.uberspace.de/virtualGuitar/example.html](http://neo1.fomalhaut.uberspace.de/virtualGuitar/example.html)

上一个是不能正常工作的那个。如果你用鼠标进入红色的div，蓝色的div会开始淡入。在它还在淡入的时候离开它。现在它停止淡入并开始淡出。如果你现在重新进入它，当它淡出时，它会冻结，尽管它应该再次开始淡入。但它没有。

在下面的示例中，一切都按我的预期工作，这里我使用了 fadeTo 函数。

现在有人可以告诉我我是对的，并且这种行为不应该发生，因为fadeIn 和fadeOut 就像fadeTo 一样，目标不透明度为1 和0？还是我弄错了，由于某种原因，这应该是那样的？

JQuery 版本是最新版本 (1.7.2)，在 Chrome、Firefox 和 Opera 中进行了测试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T20:53:43.040

您的问题是 .stop() 正在元素上设置新的不透明度样式，无论您在哪里运行 .stop() 。所以现在jQuery认为它应该动画的不透明度是它在fadeOut序列期间停止时的位置。

您可以使用 fadeTo()，如演示中所示。或者你可以使用类似的东西：

`$("#fadediv1").stop().animate({'opacity':'toggle'}, 2000);`

切换选项将记住您的最大值/最小值。所以如果你像`opacity: 0.5`在 CSS 中那样设置 fadediv，它只会在 0 到 0.5 之间进行动画处理。

# plugins - 删除 SalesOrderDetail 实体上的插件问题 - CRM2011

> ID：11242196
> 
> 赞同：1
> 
> 时间：2012-06-28T10:00:20.790
> 
> 标签：plugins, dynamics-crm, dynamics-crm-2011, crm

我在 salesorderdetail 实体上的删除插件上遇到了一个非常烦人的错误。如下所示，我在实体上注册了一个创建后插件，该插件创建了另一个 salesorderdetail 记录（产品的支持线）。现在我有一个删除插件，当我删除最初的 salesorderdetail 记录时应该触发它。为了消除混淆 A 创建 B，当 A 被删除（删除插件触发）时自动删除 B。我的逻辑和插件适用于机会产品线和 qoute 产品线。当我尝试删除 A（初始 salesorderdetail）时，出现错误“无法更新详细信息，因为父级不可编辑”。现在我的问题是如何避免错误？如果有人可以在这里帮助我，我将非常感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T10:13:23.627

根据您当前的逻辑，您是否有可能使用两个不同的实体？

一种可能的情况是，当您现在处理来自同一实体的两条记录时，删除插件会触发两次，并可能在第二次执行时引发异常。

为避免这种情况，只需在执行方法的开头添加它：

```
if(pluginExecutionContext.Depth > 1)
    return; 
```

您的插件将被禁止被其他插件或自身触发。

问候，

凯文

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T10:19:32.023

我相信您的`salesorder`记录需要处于“新”( `statuscode == 1`) 状态才能进行编辑。

因此，您的删除插件可能需要将 salesorder 状态设置为“new”，删除所需的 orderdetail 记录，然后将其设置回原始值。

# c# - 如何停止 Windows 服务 C#？

> ID：11242198
> 
> 赞同：3
> 
> 时间：2012-06-28T10:00:25.437
> 
> 标签：c#, .net, windows-services

我的 Windows 服务正在 OnStart() 方法中创建 1 个线程。线程代码包含 1 个 while 循环，如下所示：

```
 Thread mworker;       
    AutoResetEvent mStop = new AutoResetEvent(false); 
     protected override void OnStart(string[] args)
{
    // TODO: Add code here to start your service.

    mworker = new Thread(pwd_fetch);
    mworker.IsBackground = false;
    mworker.Start();
}

protected override void OnStop()
{
    // TODO: Add code here to perform any tear-down necessary to stop your service.
    mStop.Set();
    mworker.Join();
}

private void pwd_fetch()
{
    while(true)
    {
        //some other code

        if (mStop.Set()==true)
            break;
    }
} 
```

我希望 while 循环条件为真，但要打破循环，我正在使用 if() 指令，但仍然无法停止服务。

有谁知道，为什么会这样？我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T10:05:44.870

要停止服务，您必须调用 servicecontroller 实例并停止它

```
ServiceController service = new ServiceController("ServiceName");
service .Stop(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T10:07:28.503

在您的线程循环方法中，您需要使用 mStop.WaitOne （有超时）。调用 set 将设置句柄......这不是你想要在这里做的。

```
 if (mStop.WaitOne(500))
     break; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T06:35:17.103

1.Use a boolean variable instead of "true" always in while loop Then you can set it to false where you need to terminate the codes inside the loop.

2.Call mworker.Abort() to stop the thread.

3.Stop service by

`new ServiceController("ServiceName").Stop();`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T10:17:24.143

您必须在服务启动事件中添加线程代码，而不是在启动时添加。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-28T10:08:23.083

如果您希望服务自行停止，您可以简单地调用：

```
this.Stop() 
```

# php - 未获取查询字符串参数

> ID：11242199
> 
> 赞同：0
> 
> 时间：2012-06-28T10:00:28.870
> 
> 标签：php, .htaccess

我面临从查询字符串中获取变量的问题。我为我的页面使用了 htaccess 重定向。

我写了以下规则。

```
RewriteEngine On
RewriteRule ^([a-zA-Z0-9-/]+).htm$ category.php?uniqname=$1
RewriteRule ^([a-zA-Z0-9-/]+).htm/$ category.php?uniqname=$1 
```

如果我输入`gold-plated-chain.htm`的是我重定向到的浏览器， 这条规则正在做什么`category.php?uniqname=gold-plated-chain` 现在我想传递一个变量，所以我这样做`gold-plated-chain.htm?page=2`但是我无法在 category.php 上获取页面变量我正在正确重定向但没有那个页面变量

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T10:04:45.530

我 /think/ 你所追求的是 QSA 标志（参见[http://httpd.apache.org/docs/2.0/mod/mod_rewrite.html](http://httpd.apache.org/docs/2.0/mod/mod_rewrite.html)），它应该附加查询字符串。

尝试将 [QSA] 添加到 RewriteRule 行的末尾。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T10:09:18.643

您需要添加一个 [QSA] 标志来告诉重写引擎合并查询字符串。添加 [L] 标志并指定基数总是明智的。逃避“。”也是明智之举。字符，因为这被解释为通配符 您也可以结合这两个规则。因此：

```
RewriteEngine On
RewriteBase   /
RewriteRule   ^([\w-/]+)\.htm/?$   category.php?uniqname=$1  [L,QSA] 
```

顺便说一句，`\w`只是`a-zA-Z0-9`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T10:02:00.620

您应该从正则表达式中删除 ^。这意味着字符串的开始。

# symfony - 在 Silex 中隐藏仅用于子请求的路由

> ID：11242205
> 
> 赞同：1
> 
> 时间：2012-06-28T10:01:02.133
> 
> 标签：symfony, silex

我创建了一条`sitemap`显示站点站点地图的路线。该站点地图几乎包含在使用以下 Twig 构造的每个页面中：

```
{% if app.debug %}
{{ render(path('sitemap')) }}
{% else %}
<esi:include src="{{ path('sitemap') }}" />
{% endif %} 
```

这样在调试中我也会看到该页面。这很完美。虽然，站点地图也可以使用`/sitemap`. 我怎样才能避免这种情况？即有没有一种方法可以使站点地图路线仅可用于子请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T10:47:22.593

您需要以某种方式检查当前处理的请求是主请求还是子请求。这由[render](https://github.com/fabpot/Silex/blob/master/src/Silex/Provider/TwigCoreExtension.php#L31)正确设置，然后传递给[handle](https://github.com/fabpot/Silex/blob/master/src/Silex/Application.php#L495)，然后传递给[内核](https://github.com/symfony/HttpKernel/blob/master/HttpKernel.php#L105)。不幸的是，没有简单的方法可以从控制器（或中间件）获取类型。

HttpKernel 在解析请求之后，但在执行控制器之前发出 KernelEvents::CONTROLLER 事件。这将获取请求类型。

如果你像这样写一个事件监听器，你仍然可以中止：

```
use Symfony\Component\HttpKernel\KernelEvents;
use Symfony\Component\HttpKernel\Event\FilterControllerEvent;

$app["dispatcher"]->addListener(KernelEvents::CONTROLLER, function (FilterControllerEvent $event) use ($app) {
    $internals = array("sitemap");
    $route = $event->getRequest()->get("_route");

    if (in_array($route, $internals) && $event->getRequestType() == HttpKernelInterface::SUB_REQUEST) {
        return $app->abort(403);
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T00:46:26.030

将此添加到您的`security.yml`文件将允许您保护控制器：

```
access_control:
    - { path: ^/private, roles: IS_AUTHENTICATED_ANONYMOUSLY, ip: 127.0.0.1  }
    - { path: ^/private, roles: ROLE_NO_ACCESS } 
```

然后将您的控制器放在以以下开头的路径下`/private`：

```
<route id="whatever" pattern="/private/sitemap">
        <default key="_controller">AcmeDemoBundle:Sitemap:whatever</default>
</route> 
```

这是一种保护所有子请求的通用方法`/private`，以使人们无法访问`/private/sitemap`。嵌入控制器将起作用，因为您的服务器将发出请求（`127.0.0.1`通过环回接口）。

* * *

*   `/private`您现在可以使用URL 开头的属性以相同的方式保护任何子请求。
*   这些元素在访问列表中的顺序很重要。我通常将非常安全的元素放在列表的顶部。

# sencha-touch-2 - 带有列表的滚动面板

> ID：11242207
> 
> 赞同：0
> 
> 时间：2012-06-28T10:01:08.560
> 
> 标签：sencha-touch-2

我正在尝试创建一个视图，顶部有一个面板，其中包含一些 HTML，在其下方我想放置一个列表。当用户滚动面板时，我希望整个内容都滚动，以便顶部面板滚动屏幕并且用户可以浏览到列表。

我似乎无法找出正确的布局设置来完成这项工作。基本代码如下：

```
Ext.define("myApp.view.myView", {
  extend: 'Ext.Panel',
  config: {
    title: 'Nieuw',
    fullscreen: true,
    scrollable: true,
    items: [
      {
        xtype: 'panel',
        html: 'my content',
      },
      {
        xtype: 'my_list',
      }
    ]
  }
}); 
```

my_list 是一个简单的 Ext.List 类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T11:12:11.173

一些简单的事情要做：

1.  配置你`myApp.view.myView`的：`extend: 'Ext.Container'`和`layout: 'vbox'`
2.  配置您的列表`scrollable: false`

希望能帮助到你。

# java - 将java中的字符串拆分为固定长度的块

> ID：11242208
> 
> 赞同：10
> 
> 时间：2012-06-28T10:01:23.957
> 
> 标签：java, string, split

我在一个名为 string1 到 string7 的程序中有七个字符串。

每个字符串的大小为 30 个字符。

我将得到一个长度未知的输入字符串。

我必须将此输入字符串拆分为 30 个字符字符串，然后将第一个子字符串设置为 string1，将第二个子字符串设置为 string2，依此类推，直到可能。如果输入字符串大于 210 个字符，则末尾的剩余字符串将被忽略。

当输入字符串的大小小于 210 字符时如何处理这种情况。

例如 145 在这种情况下 string1 到 string4 将是完整的，而 string5 将由剩余的 15 个字符组成。

如何很好地处理这个？

我可以逐个字符地读取字符并将前 30 个字符和字符串 1 放入字符串 2 中，等等，直到所有字符都被消耗完。

但是有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-28T10:03:38.463

如果您可以使用第三方库，使用[Guava](https://github.com/google/guava)这[只是](https://google.github.io/guava/releases/snapshot-jre/api/docs/com/google/common/base/Splitter.html#fixedLength-int-)

```
Iterable<String> chunks = Splitter.fixedLength(30).split(string); 
```

这可以转换为 a `List<String>`with eg [`Lists.newArrayList`](https://google.github.io/guava/releases/snapshot-jre/api/docs/com/google/common/collect/Lists.html#newArrayList-java.lang.Iterable-)。

（披露：我为 Guava 做出了贡献。）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-11-12T18:09:25.860

```
private static Collection<String> splitStringBySize(String str, int size) {
    ArrayList<String> split = new ArrayList<>();
    for (int i = 0; i <= str.length() / size; i++) {
        split.add(str.substring(i * size, Math.min((i + 1) * size, str.length())));
    }
    return split;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-28T10:27:55.263

由于您的字符串不在数组或列表中，因此您需要明确分配它们。

```
 Matcher m = Pattern.compile(".{1,30}").matcher(s);
    String s1 = m.find() ? s.substring(m.start(), m.end()) : "";
    String s2 = m.find() ? s.substring(m.start(), m.end()) : "";
    String s3 = m.find() ? s.substring(m.start(), m.end()) : "";
    String s4 = m.find() ? s.substring(m.start(), m.end()) : "";
    String s5 = m.find() ? s.substring(m.start(), m.end()) : "";
    String s6 = m.find() ? s.substring(m.start(), m.end()) : "";
    String s7 = m.find() ? s.substring(m.start(), m.end()) : ""; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-07-26T18:33:34.223

如何使用 char 数组来拆分字符串，创建一个接收块大小和要考虑的最大大小的通用方法，并返回一个 String 数组？

```
public class SplitStringIntoFixedSizeChunks {

    public static String[] Split(String text, int chunkSize, int maxLength) { 
        char[] data = text.toCharArray();       
        int len = Math.min(data.length,maxLength);
        String[] result = new String[(len+chunkSize-1)/chunkSize];
        int linha = 0;
        for (int i=0; i < len; i+=chunkSize) {
            result[linha] = new String(data, i, Math.min(chunkSize,len-i));
            linha++;
        }
        return result;
    }

    public static void main(String[] args) { 
        String x = "flskdafsld~fdsakçkçfsda sfdaldsak~çfdskkfadsçlkçfldskçlflçfdskçldksçlkfdslçakafdslçdsklçfdskçlafdskçkdfsçlkfds~çlkfasdçlçfdls~kçlf~dksçlsakdçlkfç";
        System.out.println("x length: "+x.length());
        String[] lines = Split(x, 30, 210);
        for (int i=0; i < lines.length; i++) {
            System.out.println("lines["+i+"]: (len: "+lines[i].length()+") : "+lines[i]);
        }
    }
} 
```

* * *

此示例结果：

```
x length: 145
lines[0]: (len: 30) : flskdafsld~fdsakçkçfsda sfdald
lines[1]: (len: 30) : sak~çfdskkfadsçlkçfldskçlflçfd
lines[2]: (len: 30) : skçldksçlkfdslçakafdslçdsklçfd
lines[3]: (len: 30) : skçlafdskçkdfsçlkfds~çlkfasdçl
lines[4]: (len: 25) : çfdls~kçlf~dksçlsakdçlkfç 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-28T10:12:47.637

这是应该起作用的东西：

```
 String str = "11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111";
        if (str.length() > 210)
        {
            str =  str.substring(0, 209);
        }
        String newStr  = str.replaceAll("(.{30})", "$1|");
        System.out.println(newStr);
        String[] newStrings = newStr.split("\\|"); 
```

它的作用是接受给定的字符串，并且每隔 30 个字符，它就会抛出一个分隔符。在这种情况下，我假设您知道用户将输入什么以及不输入什么，这样您就可以输入一个用户不会输入的分隔符（或一组分隔符）。完成后，我使用刚刚添加的分隔符拆分字符串。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-28T10:23:07.180

这可能会帮助你。

```
public static void main(String args[]) throws IOException {
            BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
            String st = br.readLine();
            int len = st.length();
            String[] str = new String[7];
            len=len/30;
            int i=0;
            for(; i<7 && i<len; i++  ){
                str[i] = st.substring(30*i, 30*(i+1));
                System.out.println(str[i]);
            }
            if(i!=7){
                str[i] = st.substring(30*i, st.length());
                System.out.println(str[i]);
                }

        } 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-06-25T00:22:21.307

我遇到了这种技术的特定用法的问题。一个用户将 M$ Word 内容复制/粘贴到一个 HTML 字段中，该字段最终被该技术提取并拆分为多个数据库字段。

该技术打破了 M$ Word 对回车和其他 ASCII 字符的使用。REGEX 将拆分每个回车而不是指定数量的字符。为了纠正这个问题，我将 Michael Besteck 的代码修改为以下内容：

```
Matcher m = Pattern.compile(".{1,30}", Pattern.DOTALL).matcher(s);
String s1 = m.find() ? s.substring(m.start(), m.end()) : "";
String s2 = m.find() ? s.substring(m.start(), m.end()) : "";
String s3 = m.find() ? s.substring(m.start(), m.end()) : "";
String s4 = m.find() ? s.substring(m.start(), m.end()) : "";
String s5 = m.find() ? s.substring(m.start(), m.end()) : "";
String s6 = m.find() ? s.substring(m.start(), m.end()) : "";
String s7 = m.find() ? s.substring(m.start(), m.end()) : ""; 
```

这正确地解释了 ASCII 字符。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-28T10:23:18.243

这就是我所做的。似乎工作。如果我在任何地方错了，请发表评论：

```
package com.mypackage;

import java.util.ArrayList;
import java.util.List;

public class TestClass {

public static List<String> splitEqually(final String text, final int size) {

    List<String> ret = new ArrayList<String>((text.length() + size - 1) / size);
    for (int start = 0; start < text.length(); start += size) {

        if (start + size > 0) {

            String temp = text.substring(start, Math.min(text.length(), start + size));
            int length = temp.length();

            for (int i = 0; i < (size - length); i++) {
                temp = temp + " ";
            }

            ret.add(temp);

        } else {
            ret.add(text.substring(start, Math.min(text.length(), start + size)));
        }

    }
    return ret;
}

public static void main(final String args[]) {

    String input = "hello wo";

    String str1, str2, str3, str4, str5;

    List<String> result = TestClass.splitEqually(input, 3);

    try {
        str1 = result.get(0);
        System.out.println("1: " + result.get(0));

        str2 = result.get(1);
        System.out.println("2: " + result.get(1));

        str3 = result.get(2);
        System.out.println("3: " + result.get(2));

        str4 = result.get(3);
        System.out.println("4: " + result.get(3));

        str5 = result.get(4);
        System.out.println("5: " + result.get(4));

    } catch (IndexOutOfBoundsException e) {
    }

}
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-06-28T10:51:19.007

```
import java.util.ArrayList;

public class Test {

public static void main(String[] args) {

    // your input
    String input = "";

    // strings 1-7 as array list
    ArrayList<String> results = new ArrayList<String>();

    int length;

    if(input.length() > 210) {

        length = 210;

    } else {

        length = input.length();

    }

    for(int i = 0; i <= length; i += 30) {

        if((length - (i + 30)) > 0) {

            results.add(input.substring(i, i + 30));

        } else {

            results.add(input.substring(i, length));

        }

    }

    for(int a = 0; a < results.size(); a++) {

        System.out.println("size: " + results.get(a).length() + " content: " + results.get(a));

    }

    }

    } 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-04-01T18:15:20.120

```
private   Collection<String> splitStringBySize(String strPrm, int sizePrm) {
    ArrayList<String> splitLcl = new ArrayList<>();
    int lLcl=strPrm.length();
    int quantityLcl = lLcl / sizePrm;
    for (int  i = 0; i <  quantityLcl; i++) {
        splitLcl.add(strPrm.substring(i * sizePrm,(i+1) * sizePrm ));
    }
    int tailLcl = lLcl % sizePrm;

    if(tailLcl>0){
        splitLcl.add(strPrm.substring(lLcl-tailLcl,lLcl));
    }
    return splitLcl;
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-08-25T11:14:00.847

使用 Streams，这应该以一种简单的方式完成：

```
 private static Stream<String> splitToFixedSize(String input, int maxSize) {
    var noOfChunks = (int) Math.ceil((float) input.length() / maxSize);

    return IntStream.range(0, noOfChunks).mapToObj(i -> {
      var start = i * maxSize;
      var end = Math.min((i + 1) * maxSize, input.length());
      return input.substring(start, end);
    });
  } 
```

# c# - 类级别的“[HandleError]”，方法级别的覆盖

> ID：11242209
> 
> 赞同：2
> 
> 时间：2012-06-28T10:01:25.640
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, error-handling

我有一个在类级别具有 HandleError 属性的 C# MVC 3 控制器

```
[HandleError(View = "MyErrorPage")]   
public class MyController : Controller
{ 
```

在方法级别，我得到了：

```
[HttpPost]
[MyExceptionHandler]
public ActionResult DoSomeStuff(FormCollection fc)
{ 
```

MyExceptionHandler 看起来像：

```
public class MyExceptionHandlerAttribute : FilterAttribute, IExceptionFilter
{
    public void OnException(ExceptionContext filterContext)
    {
        //do Stuff

        JsonResult result = new JsonResult {
            Data = new { 
                    error = "Your request blah blah...."
                }
            };
        filterContext.Result = result;
        filterContext.ExceptionHandled = true;
    }
} 
```

这在我的本地主机上运行良好。即，在调用方法'DoSomeStuff' [MyExceptionHandler] 中的异常时，不会调用类级别[HandleError]。然而，在开发环境中，类级别 [HandleError] 开始发挥作用。结果是 HandleError view=MyErrorPage 被渲染。

1.  我知道 [HandleError] 在 localhost 上是多余的，但可以更正（或配置选项）？
2.  我不确定是否在开发环境（不是本地主机）上调用了 MyExceptionHandler 。可以在类级别[HandleError]之前调用吗？

我的问题是我需要 [MyExceptionHandler] 成为唯一调用的处理程序。我希望能够在我的本地主机上调用 [HandleError]，以便我可以在本地模拟问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T18:02:05.937

我找到了解决方案：

```
[HandleError(View = "MyErrorPage", Order = 2)] 
```

解决了这个问题（具体来说，`Order = 2`）。

原因是这个处理程序现在的优先级低于方法级处理程序。因此，首先执行方法级处理程序，根据上面的代码，它将异常标记为已处理，因此永远不会执行控制器级处理程序。

问题仅在 localhost 上的原因是因为 [HandleError] 默认情况下未在 localhost 上启用。但是，在开发环境中它是自动启用的。

然后我会认为我可以通过设置在 localhost 上看到问题：

```
<system.web>
   <customErrors mode="On" /> 
```

但由于某种原因，这不起作用....无论如何，我猜是单独的问题。

仅供参考，我试图在这里总结所有这些错误处理的东西（重点是 AJAX）：http: [//outbottle.com/net-mvc-3-custom-ajax-error-handling-2/](http://outbottle.com/net-mvc-3-custom-ajax-error-handling-2/)

谢谢

# javascript - 函数语句需要 JQuery 中的名称错误

> ID：11242212
> 
> 赞同：1
> 
> 时间：2012-06-28T10:01:30.953
> 
> 标签：javascript, jquery

我有这个函数，但它给了我函数语句需要名称 onStop 函数

```
<script type="text/javascript">
 jQuery( function($) {
    $('#Hnav, #Nnav').NestedSortable(
            {
                accept: 'sort',
                noNestingClass: "no-children",
                helperclass: 'helper',
                autoScroll: true,
                onChange: function(serialized) {
                onStop : function(){
                    $('#output').html($(this).id);
                },
                    nestingPxSpace : '0'
            }
    );
});
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T10:04:18.817

在此上下文中，`this`指的是`onStop`事件发生的 DOM 元素。DOM 元素不是 jQuery 对象。

jQuery`$(this)`对象没有`id`属性，而 DOM 元素有。因此，请使用：

```
$('#output').html(this.id); 
```

或者：

```
$('#output').html($(this).attr("id")); 
```

并且不要忘记关闭`onChange`处理函数中的括号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T10:03:50.133

缺少一个括号，并且您使用错误的语法获取 id 试试这个，

```
$('#output').html($(this).id); 
```

应该

```
$('#output').html(this.id); 
```

或者

```
$('#output').html($(this).attr(id));

  jQuery(function($) {
    $('#Hnav, #Nnav').NestedSortable({
        accept: 'sort',
        noNestingClass: "no-children",
        helperclass: 'helper',
        autoScroll: true,
        onChange: function(serialized) {
            alert("changed");// Changed to fix
        },               
        onStop: function() {
             $('#output').html(this.id);
        },
        nestingPxSpace: '0'       
    });
});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T10:20:50.307

代码中有两个问题，

1.  内部函数未正确关闭。
2.  使用了 jQuery 选择器不支持的元素的 id 属性。

修改后的代码是，

```
jQuery( function($) {
    $('#Hnav, #Nnav').NestedSortable(
            {
                accept: 'sort',
                noNestingClass: "no-children",
                helperclass: 'helper',
                autoScroll: true,
                onChange: function(serialized) {
                    //A empty function
                },
                onStop : function(){
                    $('#output').html($(this).attr("id"));
                },
                nestingPxSpace : '0'
            }
    );
}); 
```

# python - python pyserial多次写入串口

> ID：11242213
> 
> 赞同：1
> 
> 时间：2012-06-28T10:01:34.687
> 
> 标签：python, serial-port, pyserial

我正在从同一个串行端口写入和读取。这是什么问题：

当我一个接一个地写入串口时，如下面的代码：

```
import serial
import array

rec = serial.Serial()
trans = serial.Serial()

rec.port = "/dev/ttyUSB0"
rec.baudrate = 9600
rec.timeout = 0.5
rec.open()

trans.port = "/dev/ttyUSB0"
trans.baudrate = 9600
trans.timeout = 0.5
trans.open()

if trans.isOpen():
   trans.write("\xFE\x1D\xFF\xFF\xFF\xFF\xFF\xFF\xFF\xFF\xFF\xFF\xFF\xFF\xFF\xFF\xFF\xFF\xFF\xFF\xFF\xFF\xFF\xFF\xFF\xFF\xFF\xFF\xFF\xFF\xFF\xFF\xFF\xE2")    
   trans.write("\xFE\x1D\xFF\xFF\xFF\xFF\xFF\xFF\xFF\xFF\xFF\xFF\xFF\xFF\xFF\xFF\xFF\xFF\xFF\xFF\xFF\xFF\xFF\xFF\xFF\xFF\xFF\xFF\xFF\xFF\xFF\xFF\xFF\xE3")

while rec.isOpen():

response = rec.readline()

etc. etc. etc 
```

只要 while 循环转动，我就一直只读取第一个发送的字符串。我还尝试在 while 循环之后发送数据：（我没有删除 if 语句）

```
while rec.isOpen():
    trans.write("\x00\x00")
    response = rec.readline() 
```

我从串口读取的内容仍然是：
“\xFE\x1D\xFF\xFF\xFF\xFF\xFF\xFF\xFF\xFF\xFF\xFF\xFF\xFF\xFF\xFF\xFF\xFF\xFF\ xFF\xFF\xFF\xFF\xFF\xFF\xFF\xFF\xFF\xFF\xFF\xFF\xFF\xFF\xE2"

除了第一个之外，我无法发送任何其他数据。为什么会这样？我应该怎么办？

注意：同样在 while 循环中，我尝试读取两次： response = rec.readline() response = rec.readline()

这一次，当我打印读取的数组时，它会打印 []，这意味着我无法读取任何内容。问候

编辑：现在我使用了两个不同的 USB 端口 ttyUSB0 和 ttyUSB1 来检查我的问题是否与这种情况有关。但是从同一个端口写入和读取似乎没有什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T10:13:34.533

问题可能是端口配置错误。您必须设置正确的值

```
ser = serial.Serial(
    port='/dev/ttyUSB0',
    baudrate=9600,
    parity=???,
    stopbits=???,
    bytesize=???) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T12:41:56.343

我没有看到换行符，因此您应该尝试使用 rec.read(bytes) 或使用 \0d\0a 或其他内容完成行。

见[http://pyserial.sourceforge.net/shortintro.html#readline](http://pyserial.sourceforge.net/shortintro.html#readline)

# php - Etsy 如何知道某人何时使用 PayPal 付款？

> ID：11242215
> 
> 赞同：2
> 
> 时间：2012-06-28T10:01:40.363
> 
> 标签：php, api, paypal, payment-gateway, checkout

[Etsy](http://www.etsy.com/) （创意产品卖家的网站集体）如何知道付款是通过 Paypal 支付的？PayPal Express Checkout 是否可以使用我的帐户 API，但纯粹通过指定帐户电子邮件将付款发送到另一个帐户？

当您从 Etsy 购买商品时，付款会直接转给卖家。似乎 Etsy 使用 PayPal Express Checkout 来实现这一点，使用它自己的 API 详细信息（我假设）。付款后，Etsy 就意识到了这一点。它会从销售中删除该项目并向您发送一封确认电子邮件。当付款直接转到另一个帐户时，Etsy 如何做到这一点？

据我所知，PayPal 只会将付款发送到 API 所链接的帐户。当您第一次致电以使用 Paypal 设置 Express Checkout 时，有没有办法通过您在此过程中实际想要付款的帐户的电子邮件地址？我似乎无法在任何地方找到这个领域。或者也许它是以完全不同的方式完成的。有人知道这个过程在 Etsy 中是如何工作的吗？

*注意：我知道当你在 Etsy 中设置卖家账户时，你只需要提供你想要付款的贝宝电子邮件地址，而不是给他们任何 API 访问权限。我已经对此进行了测试。*

*这都是在建立一个基本上做同样事情的网站的背景下，允许卖家在我们的网站上拥有自己的迷你商店。付款需要直接到卖家那里，我们需要确认买家已经付款。我不希望卖家必须在 PayPal 帐户中设置任何东西或类似的东西。因此，如果您有任何其他想法/建议我可以如何实现这一目标，我很想听听他们的意见。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T10:03:21.287

由于成功回调 url，它知道这一点。

关于如何确认其他两方之间的交易，请看[这个问题](https://stackoverflow.com/questions/7313346/verify-paypal-donation-between-two-3rd-parties)

所以我猜不是快速结账，而是即时付款通知。

我能想到的使用 Express Checkout 的唯一方法是每个接收方都有一个单独的商家帐户。作为 netom 在[这个问题中的一个答案](https://stackoverflow.com/questions/3749229/multi-merchant-payment-system-with-paypal)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-28T15:42:50.733

我不相信 Etsy 使用 Express Checkout，而是使用 PayPal Adaptive Payments。
使用 Adaptive Payments，您只需为主要或次要收款人指定不同的电子邮件地址，即可更改资金的收款人。

另请参阅我在[中间人在线支付中的回答](https://stackoverflow.com/questions/7519936/online-payments-for-a-middleman/7520053#7520053)

至于 Etsy 的确认；由于 Etsy 是使 API 调用 PayPal 的人 - 并且仅在每笔交易的基础上更改接收者 - 他们只需指定一个 ipnNotificationUrl 以便在交易完成时通过[PayPal IPN收到通知。](https://www.paypal.com/ipn)

# xml - 计算 XSLT 中的行数

> ID：11242216
> 
> 赞同：1
> 
> 时间：2012-06-28T10:01:40.473
> 
> 标签：xml, xslt

转换此 XML 时，我需要计算此 XML 节点中的换行数

```
 <SpecialInstraction>One
Two
Three
Four
Five
Six
Seven
Eight
Nine
Ten
Eleven
twelve
thirteen
fourteen
fifteen</SpecialInstraction> 
```

像上面的例子一样有 14 个换行符。

我试图确定“ `&#xD;&#xA;`”和“ `&#13;`”的出现次数，但即使上述 XML 没有变化，每次此 XML 进行序列化/反序列化时，出现的次数也会不断变化。

有人知道如何从 XSLT 中的 XML 节点的值中获取行数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T11:38:09.783

**使用**：

```
string-length() - string-length(translate(., '&#xA;', '')) 
```

**虽然通过使用上面的 XPath 单线，您根本不需要 XSLT，为了完整性，这里是它**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="text()">
     <xsl:value-of select=
     "string-length() - string-length(translate(., '&#xA;', ''))"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时**：

```
<SpecialInstraction>One
    Two
    Three
    Four
    Five
    Six
    Seven
    Eight
    Nine
    Ten
    Eleven
    twelve
    thirteen
    fourteen
    fifteen</SpecialInstraction> 
```

**产生了想要的正确结果：**

```
14 
```

**请注意**：

此解决方案 onlu 计算 NL 字符的数量。为什么我忽略了 CR？仅仅是因为根据**[W3C XML 规范](http://www.w3.org/TR/2008/REC-xml-20081126/)**，任何兼容的 XML 解析器都必须执行以下操作：

> *在完成任何其他处理之前，XML 文档中字面上存在的所有 #xD 字符都将被删除或替换为 #xA 字符。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T10:07:39.240

StackOverflow上有一个类似的问题[- (count the number of words in a xml node using xsl)](https://stackoverflow.com/questions/6188189/count-the-number-of-words-in-a-xml-node-using-xsl) 用于计算字符串中的空格数。我已经修改了从那里偷来的代码以使用换行符。

```
<xsl:template name="word-count">
        <xsl:param name="data"/>
        <xsl:param name="num"/>
        <xsl:variable name="newdata" select="$data"/>
        <xsl:variable name="remaining" select="substring-after($newdata,'&#10;')"/>                

        <xsl:choose>
                <xsl:when test="$remaining">
                        <xsl:call-template name="word-count">
                                <xsl:with-param name="data" select="$remaining"/>
                                <xsl:with-param name="num" select="$num+1"/>
                        </xsl:call-template>
                </xsl:when>
                <xsl:when test="$num = 1">
                        no words...
                </xsl:when>
                <xsl:otherwise>
                        <xsl:value-of select="$num"/>
                </xsl:otherwise>
        </xsl:choose>                
</xsl:template> 
```

# java - assertEquals(Double, Double) 和 assertEquals(double, double, delta) 之间的 Junit 区别

> ID：11242224
> 
> 赞同：13
> 
> 时间：2012-06-28T10:02:26.333
> 
> 标签：java, unit-testing, junit

我有一个junit测试断言两个Double对象具有以下内容：

```
Assert.assertEquals(Double expected, Double result); 
```

这很好，然后我决定将其更改为使用原始双精度而不是被弃用，除非您还提供增量。

所以我想知道在这个 assertEquals 中使用 Double 对象或原始类型有什么区别？为什么使用没有 delta 的对象可以，但不推荐使用没有 delta 的原语？Java 是否在后台做一些已经考虑到默认增量值的事情？

谢谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-28T10:07:30.413

JUnit 中没有带有签名的[断言方法](http://junit.sourceforge.net/javadoc/org/junit/Assert.html)

```
assertEquals(Double expected, Double result); 
```

然而，有一个通用的对象：

```
assertEquals(Object expected, Object result); 
```

这会调用对象的`equals`方法，正如您所料，不建议使用它来比较`Double`对象。

正如您所观察到的，对于双精度数，绝对有必要使用 delta 进行比较，以避免浮点舍入问题（已在其他一些答案中解释过）。如果您使用`assertEquals`带`double`参数的 3 参数版本

```
assertEquals(double expected, double actual, double delta); 
```

您`Double`的 s 将被默默地拆箱`double`，一切都会正常工作（并且您的测试不会意外失败:-)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-28T10:06:19.740

双重数学很少给出*完全相同*的结果。例如，`0.1 * 0.1 != 0.01`。在比较双精度结果时，通常至少需要一些增量。

另一方面，如果您要比较 boxed `Double`s，它假定您想要完全相等。Java 没有考虑默认的 delta 值，但`Double.equals`与 的行为略有不同`==`：特别是[它对 NaN 的处理](http://docs.oracle.com/javase/6/docs/api/java/lang/Double.html#equals%28java.lang.Object%29)。

这在测试中是有意义的，因为`Double.NaN != Double.NaN`，但是在测试中，如果您期望 an`NaN`并且`NaN`返回，那是一个正确的答案。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-05-24T12:46:31.773

最好写这样的东西：

```
assertEquals(23.0, 250.0, 0.0) 
```

0.0 - 它是增量。阅读为什么不推荐使用您的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T10:05:16.267

[资源。](http://junit.sourceforge.net/javadoc/org/junit/Assert.html#assertEquals%28double,%20double,%20double%29) 断言两个双精度或浮点数在正增量内相等。如果不是，则抛出 AssertionError。如果期望值为无穷大，则忽略增量值。NaN 被视为相等。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-28T10:05:48.070

我会说比较双打，原始或对象，没有增量是没有用的。了解流动点数的工作原理是进行数值工作的关键。

该对象可能在幕后使用 .equals ；除了==之外，原语别无选择。

仅仅因为对象版本没有使用增量并不能使它成为一个更好的主意。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-02-28T00:07:10.420

我正在回答有关 JUnit 5 的更新。无论版本如何，`assertEquals(Double expected, Double actual)`都会被路由到`assertEquals(Object expected, Object actual)`，因为正如其他人已经解释的那样，`Double`它是隐式扩展的原始包装器`Object`。

但是`assertEquals(double expected, double actual)`（使用两个原语而不是两个原语包装器）在 JUnit 4 上下文中调用已弃用的过程。我不知道它是否已经在 J​​Unit 3 中被弃用。但猜猜看：它在 JUnit 5 中没有被弃用。

像这样的浮点类型`double`本质上是不精确的。假设`expected = 0.3`。是如何`actual`计算的？如果`3.0 / 10`是结果可能是准确的。但如果它是臭名昭著的`0.1 + 0.2`，它将偏离 0.00000000000000004（如果减去 0.3 ，它会以某种方式变为 5.551115123125783 × 10 ^(-17 ）。)

一般来说，浮点乘法和除法比浮点加法和减法更可靠。

以下示例来自具有`org.junit.jupiter.api.Assertions.*`静态导入的测试类。

```
 @Test
    void testDeltaExample() {
        double expected = 0.3;
        double actual = 0.1 + 0.2;
        assertEquals(expected, actual);
    } 
```

结果：

> org.opentest4j.AssertionFailedError: 预期: <0.3> 但在 org.junit.jupiter.api.AssertionUtils.fail(AssertionUtils.java:55) 处为 <0.30000000000000004> 在 org.junit.jupiter.api.AssertionUtils.failNotEqual(AssertionUtils .java:62) 在 org.junit.jupiter.api.AssertEquals.assertEquals(AssertEquals.java:65) 在 org.junit.jupiter 的 org.junit.jupiter.api.AssertEquals.assertEquals(AssertEquals.java:70)。 api.Assertions.assertEquals(Assertions.java:868) ...

你在乎它是否会像那样减少一点吗？如果你不这样做，那么你会想要一个像 0.0000000000000001 这样的增量。

如果需要，您仍然可以使用 JUnit 5 中的“老式”JUnit（但除了迁移现有测试套件或看到它可以完成之外，您不应该出于任何原因想要这样做）。

```
 @Test
    void testDeltaExample() {
        double expected = 0.3;
        double actual = 0.1 + 0.2;
        org.junit.Assert.assertEquals(expected, actual);
    } 
```

（您的 IDE 应该在右大括号之前的行中显示删除线）。即使具有完全相同的位模式（在此示例中不会），`expected`此测试也会失败。`actual`

> java.lang.AssertionError: 使用 assertEquals(expected, actual, delta) 在 org.junit.Assert.assertEquals(Assert.java:667) 比较 org.junit.Assert.fail(Assert.java:88) 的浮点数) 在 org.junit.Assert.assertEquals(Assert.java:656) ...

许多非常聪明的 Java 程序员学习了 SQL 连接等复杂的东西，根本不关心浮点数，所以他们只使用 0.0 的 delta。

因此，JUnit 开发人员似乎认为教育人们了解浮点的弱点不是他们的工作。所以`org.junit.jupiter.api.Assertions.assertEquals(double expected, double actual)`在技术上是新的，根本没有被弃用。

绝对清楚，在 JUnit 5 中仍然可以使用 delta 进行浮点比较。从 Scala 的角度来看，您可以将其视为`assertEquals(expected: Double, actual: Double, delta: Double = 0.0)`.

# android - 成功发布的 Runnable 只有在父级无效时才会执行

> ID：11242226
> 
> 赞同：1
> 
> 时间：2012-06-28T10:02:31.007
> 
> 标签：android, android-listview, message-queue, runnable

我有时会遇到以下情况：

*   我调用 View.post(Runnable r) 它返回 true
*   调用 android.os.Looper.myLooper().dump(...) 时，runnable 似乎不在 messageQueue 中
*   在主布局上调用 invalidate 后（例如 20 秒后），Runnable 被执行

这只会不时发生，它会发生在多个设备和多个 Android 版本上。

问题似乎类似于[Runnable is posted failed but not run](https://stackoverflow.com/questions/4083787/runnable-is-posted-successfully-but-not-run) and [Android: Button within ListView not received onClick events](https://stackoverflow.com/questions/4327783/android-button-within-listview-not-receiving-onclick-events)

有人可以解释在什么情况下 Runnable 被发布但没有被执行（还）？以及为什么它确实在（父）无效后被执行。

注意：使用 runOnUiThread 发布 Runnable 工作正常，但我不能使用它：我真正的问题是有时 OnClickListener 没有被调用；这可以追溯到 View.onTouchEvent 中对 post(performClick) 的调用。

我假设我的视图层次结构处于某种奇怪的状态，但我一无所知。
我的视图是在代码中创建的，大致包括

*   相对布局
*   列表显示
*   Horizo​​ntalListView（来自[http://www.dev-smart.com/archives/34](http://www.dev-smart.com/archives/34)）
*   我的视图

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T09:44:53.777

答案在这里给出[ListView.hasWindowFocus==true 但子视图 hasWindowFocus==false](https://stackoverflow.com/questions/11257357/listview-haswindowfocus-true-but-child-views-haswindowfocus-false)

ListView 不喜欢视图的适配器。

# .htaccess - codeIgniter 的 .htaccess 规则

> ID：11242227
> 
> 赞同：0
> 
> 时间：2012-06-28T10:02:36.390
> 
> 标签：.htaccess, codeigniter-2

对于以下标准，我需要一个 .htaccess 规则。我在 codeIgniter 工作

我需要改变：

[http://project.com/projectname/controller_folder/sub_folder_in_controller](http://project.com/projectname/controller_folder/sub_folder_in_controller)

至：

[http://project.com/projectname/sub_folder_in_controller](http://project.com/projectname/sub_folder_in_controller)

因此，如果有任何东西以 . 开头`/controller_folder/sub_folder_in_controller`，我需要将其转换为`/sub_folder_in_controller`.

请帮忙，提前谢谢

-Vamsi

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T16:26:55.733

默认情况下，codeigniter 允许您将控制器组织在一级子文件夹中。查看[控制器用户指南](http://codeigniter.com/user_guide/general/controllers.html#subfolders)。

# android - 从 WebView 启动自定义 Android 应用程序

> ID：11242230
> 
> 赞同：7
> 
> 时间：2012-06-28T10:02:44.313
> 
> 标签：android, android-webview

如果我在 Android 本机浏览器中打开它，我有一个 HTML 文件正在启动一个应用程序，但是当我尝试在 WebView 中打开它时，它无法启动该应用程序，并且显示“网页不可用”。我认为我的 WebView 无法处理为应用程序定义的方案“my.special.scheme://”。

我阅读[了 Launching an Android Application from the Browser](https://stackoverflow.com/questions/6139508/launching-an-android-application-from-the-browser)，但它没有涵盖有关从 WebView 启动应用程序的信息。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-06-13T04:27:51.783

确实，带有自定义 URI 方案的链接不会自动加载从 WebView 启动的应用程序。

您需要做的是将自定义 WebViewClient 添加到您的 WebView：

```
webView.setWebViewClient(new CustomWebViewClient()); 
```

然后在 shouldOverrideUrlLoading() 中，有以下代码：

```
public boolean shouldOverrideUrlLoading(final WebView webView, final String url) {

    if (url.startsWith("my.special.scheme://")) {

        final Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(url));

        // The following flags launch the app outside the current app
        intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_SINGLE_TOP);

        activity.startActivity(intent);

        return true;
    }  

    return false;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-28T10:48:04.477

我不确定，但我相信 WebView 根本不处理自定义 URI 方案。

解决方法是覆盖[WebViewClient.shouldOverrideUrlLoading()](http://developer.android.com/reference/android/webkit/WebViewClient.html#shouldOverrideUrlLoading%28android.webkit.WebView,%20java.lang.String%29)并手动测试 URL 是否使用您的 URI 方案，启动您的应用程序并`true`在匹配时返回，否则返回`false`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-23T04:46:54.877

我`ACTION_VIEW`使用 URL 执行 URL 以在默认浏览器中打开 URL，这将重定向到相关的应用程序（我必须通过银行应用程序解决这个与付款有关的问题）

# c# - WM_QUERYENDSESSION 给我带来了问题

> ID：11242232
> 
> 赞同：6
> 
> 时间：2012-06-28T10:02:49.070
> 
> 标签：c#, wndproc

制作一个简单的应用程序，所以当用户退出 Windows 时，它当然会关闭应用程序。我们正在制作一个简单的 USB 警报应用程序，如果在用户注销时检测到 USB，它会停止关闭

这是到目前为止的代码。

```
public Form1()
    {
        InitializeComponent();
    }

    private static int WM_QUERYENDSESSION = 0x11;
    private static bool systemShutdown = false;
    protected override void WndProc(ref System.Windows.Forms.Message m)
    {
        if (m.Msg == WM_QUERYENDSESSION)
        {
            //MessageBox.Show("queryendsession: this is a logoff, shutdown, or reboot");
            systemShutdown = true;
            m.Result = (IntPtr)0;
        }

        // If this is WM_QUERYENDSESSION, the closing event should be
        // raised in the base WndProc.
        m.Result = (IntPtr)0;
        base.WndProc(ref m);

    } //WndProc 

    private void Form1_FormClosing(object sender, FormClosingEventArgs e)
    {
        if (systemShutdown)
        {
            systemShutdown = false;
            bool hasUSB = false;

            foreach (DriveInfo Drive in DriveInfo.GetDrives())
            {
                if (Drive.DriveType == DriveType.Removable)
                {
                    hasUSB = true;
                }
            }

            if (hasUSB)
            {
                e.Cancel = true;
                MessageBox.Show("You still have USB device plugged in, please unplug it and log off again");
            }
            else
            {
                e.Cancel = false;
            }
        }
    } 
```

发生的事情是正在显示 Windows 强制程序退出屏幕，如果您将 0 返回到 WM_QUERYENDSESSION，我在某处读到它不会显示这个，但它仍然显示这个......

有任何想法吗？

编辑：

我们使用了有人回应的代码，但我们仍然得到这个屏幕。

![我们要避免的屏幕！](../Images/204946f8b187a25749f3daa5c3c3563c.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T10:12:09.300

你有没有尝试过

```
[DllImport("advapi32.dll", SetLastError=true)]
static extern bool AbortSystemShutdown(string lpMachineName); 
```

应该中止关机。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T10:29:33.383

[这个链接](http://blogs.msdn.com/b/oldnewthing/archive/2012/06/14/10319617.aspx)是相关的。它说明您应该使用[ShutdownBlockReasonCreate 和](http://msdn.microsoft.com/en-us/library/aa376877%28VS.85%29.aspx)[ShutdownBlockReasonDestroy](http://msdn.microsoft.com/en-us/library/aa376878%28v=VS.85%29.aspx) 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T10:34:37.010

通过添加此代码，我现在可以正常工作了

```
 [DllImport("user32.dll", SetLastError = true)]
    static extern int CancelShutdown(); 
```

我还将标题从 WM_QUERYENDSESSION = 0x11; 到 WM_QUERYENDSESSION = 0x0011；

不确定这是否有任何作用，但代码似乎有效，感谢所有答案

# asp.net - 使用开放 XML 将 excel 与 asp.net Web 应用程序集成

> ID：11242233
> 
> 赞同：0
> 
> 时间：2012-06-28T10:02:51.147
> 
> 标签：asp.net, excel, openxml, openxml-sdk

我想在 web 上使用 excel 应用程序，例如使用开放 XML 的 asp.net web 应用程序中的 google docs。我该怎么做？

# android - 使用 Gps 定位定位

> ID：11242234
> 
> 赞同：4
> 
> 时间：2012-06-28T10:02:53.340
> 
> 标签：android

我正在使用服务类，它调用实现位置侦听器的内部类，它为我提供了我的位置详细信息...但我需要定期执行此操作..我使用了带循环器的线程，但它只执行一次请帮助

这是我更新的答案 更新的答案

```
 public class MyService extends Service 
{
     String GPS_FILTER = "";
     Thread triggerService;
     LocationListener locationListener;
     LocationManager lm;
     private static final long MINIMUM_DISTANCE_CHANGE_FOR_UPDATES = 1000; // in Meters
     private static final long MINIMUM_TIME_BETWEEN_UPDATES = 1000*60; // in Milliseconds
     protected LocationManager locationManager;
     boolean isRunning = true;
     @Override
     public void onCreate() 
     {
           // TODO Auto-generated method stub
           super.onCreate();
           GPS_FILTER = "MyGPSLocation";
//           locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
//           locationManager.requestLocationUpdates(
//                   LocationManager.GPS_PROVIDER, 
//                   MINIMUM_TIME_BETWEEN_UPDATES, 
//                   MINIMUM_DISTANCE_CHANGE_FOR_UPDATES,
//                   new MyLocationListener());
     }

     @Override
     public void onStart(Intent intent, int startId)
     {
           // TODO Auto-generated method stub
           super.onStart(intent, startId);     
           turnGPSOn();
           Toast.makeText(getApplicationContext(), "Hello1",Toast.LENGTH_LONG).show();
           LocationManager locationManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE);
           locationListener = new MyLocationListener();
           locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER,MINIMUM_TIME_BETWEEN_UPDATES, 1.0f, locationListener);

     }

     @Override
     public void onDestroy() {
           // TODO Auto-generated method stub
           super.onDestroy();
          // removeGpsListener();
     }

     @Override
     public IBinder onBind(Intent intent) {
           // TODO Auto-generated method stub
           return null;
     }

//     private void removeGpsListener(){
//           try{
//                 lm.removeUpdates(locationManager);
//           }
//           catch(Exception ex){
//                 System.out.println("Exception in GPSService --- "+ex);
//           }
//     }

     private class MyLocationListener implements LocationListener
     {

         public void onLocationChanged(Location location) 
         {
            postdata(location.getLatitude(),location.getLongitude());
             String message = String.format(
                     "New Location \n Longitude: %1$s \n Latitude: %2$s",
                     location.getLongitude(), location.getLatitude()
             );
             Toast.makeText(MyService.this, message, Toast.LENGTH_LONG).show();
             turnGPSOnOff();
         }

         public void onStatusChanged(String s, int i, Bundle b) {
//              Toast.makeText(MyService.this, "Provider status changed",
//                     Toast.LENGTH_LONG).show();
         }

         public void onProviderDisabled(String s) {
//             Toast.makeText(MyService.this,
//                     "Provider disabled by the user. GPS turned off",
//                     Toast.LENGTH_LONG).show();
         }

         public void onProviderEnabled(String s) {
//             Toast.makeText(MyService.this,
//                     "Provider enabled by the user. GPS turned on",
//                     Toast.LENGTH_LONG).show();
         }

     } 
```

也使用调用服务

```
 Calendar cur_cal = Calendar.getInstance();
   cur_cal.setTimeInMillis(System.currentTimeMillis());
   Intent intent = new Intent(this, MyService.class);
   PendingIntent pintent = PendingIntent.getService(login.this, 0, intent, 0);
   AlarmManager alarm = (AlarmManager)getSystemService(Context.ALARM_SERVICE);
   alarm.setRepeating(AlarmManager.RTC_WAKEUP, cur_cal.getTimeInMillis(), 60*1000, pintent); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T11:27:02.310

尝试这个...

```
TimerTask doAsynchronousTask;
long timerCall = 5000;  
final Handler handler = new Handler();  
Timer timer = new Timer();

public static int times = 0;

 // For tracking
doAsynchronousTask = new TimerTask() {
        @Override
        public void run() {
            handler.post(new Runnable() {
                public void run() {
                    try {
                        performBackgroundTask.execute();//In this function add your code which you want to  call repeatedly. OR ADD  lm = (LocationManager)getSystemService(Context.LOCATION_SERVICE);
                         Toast.makeText(getApplicationContext(), "Hello1",Toast.LENGTH_LONG).show();
                         gpsLocationListener = new GpsListener();
                         long minTime = 30000; // 5 sec...
                         float minDistance = 10;
                         lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, minTime, minDistance, gpsLocationListener);

                         Log.d("BGT", "BGT=" + times++);//how many time it called
                    } catch (Exception e) {
                    }
                }
            });
        }
    };
    timer.schedule(doAsynchronousTask, 0, timerCall);// execute in every 50000 ms 
```

`

# c++ - 2D 图形加速

> ID：11242235
> 
> 赞同：0
> 
> 时间：2012-06-28T10:03:01.087
> 
> 标签：c++, c, mobile

我注意到一些现代移动硬件支持 2D 硬件加速 bitBLT 操作。是否有任何相当标准的库允许应用程序开发人员利用 2D 硬件加速？（对于 2D 的东西，对于 3D 的 OpenGL 会很好）

编辑：我知道 OpenGL 可用于 2D 操作，但是当使用 openGL 时，使用 3D 硬件块而不是 2D 硬件块。我正在寻找一个直接使用 2D 硬件块的 API。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-28T10:04:17.497

`OpenGL`不仅可以用于 3d，还可以用于 2d。所以答案是：`OpenGL`

市场上几乎所有的游戏（包括 2d 游戏）都使用`OpenGL`渲染。你可能想看看`Cocos2d-x`。它是一个跨平台的 c++ 游戏引擎，使用 OpenGL 进行 2d 图形

# class - VBA 自定义类不捕获事件

> ID：11242237
> 
> 赞同：2
> 
> 时间：2012-06-28T10:03:07.107
> 
> 标签：class, events, ms-access, vba

我正在尝试创建一个类来管理 Access 2010 中组合框的事件。这里有代码：

**类 TestEvents**

```
Public WithEvents cbMyCombo As Access.ComboBox

Public Property Get AssociatedCombo() As Access.ComboBox
    Set AssociatedCombo = cbMyCombo
End Property

Public Sub cbMyCombo_Change()
    MsgBox "Combo has changed!"
End Sub

Private Sub Class_Initialize()
   Set cbMyCombo = Form_Form1.Combo1
End Sub 
```

**Form1 代码**（包含名为 Combo1 的组合框）

```
Option Compare Database
Option Explicit
Private MyTestEvents As TestEvents

Private Sub Form_Load()
   Set MyTestEvents = New TestEvents
   MsgBox MyTestEvents.AssociatedCombo.Name
End Sub 
```

运行代码时，我（如预期）收到一条带有组合框名称 (Combo1) 的消息，因此 TestEvents.AssociatedCombo 属性指向正确的对象**，但当**我更改组合值时没有任何反应。我希望收到“组合已更改”的消息。

有什么我做错了吗？

在此先感谢您的帮助 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T10:30:34.063

默认情况下，在 VBA 中根本不会引发表单控件的沉没事件；要启用它们（并随后启用您的`WithEvents`），您需要连接要处理的每个事件；

```
Set cbMyCombo = Form_Form1.Combo1 '//please put this in a property!

cbMyCombo.OnKeyDown = "[Event Procedure]"
cbMyCombo.OnBlaDeBla = "[Event Procedure]" 
```

（请注意，这是您需要设置的实际字符串值，而不是占位符/示例）

您也可以在控件属性的事件选项卡上执行此操作。

# jsf - "?faces-redirect=true" 的语义 为什么不到处使用它

> ID：11242240
> 
> 赞同：8
> 
> 时间：2012-06-28T10:03:09.263
> 
> 标签：jsf, redirect, post, navigation

我想了解在 JSF2.0 中添加标签`"?faces-redirect=true"`的 action 属性背后的语义是什么。`<h:commandlink>`无论有没有它，应用程序确实导航到操作中指定的目标页面。所以乍一看似乎唯一的效果是装饰性的，即向用户提供反馈（如果他正在查看浏览器访问的 URL）他已经移动到一个新页面。但是，如果它是如此无害且无副作用，我不明白为什么它不是默认行为。我怀疑这与JSF2.0的基于post的机制有关。我在浏览 JSF 应用程序时注意到，在他的浏览器上看到的 URL（当`?faces-redirect=true`不使用时）是“上一个”“页面”的 URL。

元NB。我在防火墙后面并被“SO 需要来自另一个域的外部 JavaScript”问题所困扰，所以我为没有格式化而道歉。当我可以从另一个域访问时，我还将在几个小时内提供有关您的答案的反馈。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-28T13:02:48.407

根本不应该使用 POST 执行逐页导航。您应该使用 normal `<h:link>`or`<h:button>`代替`<h:commandLink>`or `<h:commandButton>`。

所以而不是

```
<h:commandLink value="Next page" action=nextpage.xhtml?faces-redirect=true" /> 
```

你实际上应该使用

```
<h:link value="Next page" outcome="nextpage.xhtml" /> 
```

这具有该网站现在对 SEO 友好的主要好处。Searchbots 即不索引表单。

`<h:commandLink>` **仅**当您需要提交带有一些用户输入的表单时才使用。但是，如果需要有条件地呈现/包含，结果往往只是呈现在同一页面中。只有在绝对需要转到不同页面（例如登录/注销）的成功提交时，您确实应该发送重定向。这就是所谓的[Post-Redirect-Get 模式](http://en.wikipedia.org/wiki/Post/Redirect/Get)。

### 也可以看看

*   [如何在 JSF 中导航？如何使 URL 反映当前页面（而不是上一个页面）](https://stackoverflow.com/questions/15521451/how-to-navigate-in-jsf-how-to-make-url-reflect-current-page-and-not-previous-o)
*   [什么时候应该使用 h:outputLink 而不是 h:commandLink？](https://stackoverflow.com/questions/4317684/when-should-i-use-houtputlink-instead-of-hcommandlink)

# php - 如何解析 SOAP 以列出所有请求和对象名称

> ID：11242247
> 
> 赞同：0
> 
> 时间：2012-06-28T10:03:33.337
> 
> 标签：php, soap, xpath, namespaces, simplexml

当我知道命名空间和请求名称时，我能够解析 XML SOAP。

因为我有不同类型的 SOAP 请求，所以我想在 SOAP 文件中获取请求名称。我的 SOAP 的一部分摘录：

```
<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope 
   xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" 
   xmlns:ns1="http://schema.example.com" 
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
   xmlns:xsd="http://www.w3.org/2001/XMLSchema"
   xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/"
   SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"
>
<SOAP-ENV:Body>
 **<ns1:SendMailling>**
 <campagne xsi:type="ns1:Campaign"><ActivateDedup xsi:nil="true"/><BillingCode     xsi:nil="true"/><DeliveryFax xsi:type="ns1:DeliveryFax"/>
 <DeliveryMail xsi:type="ns1:DeliveryMail">
 ... 
```

PHP代码：

```
if(is_file($file))
    {
        $content=file_get_contents($file);

        $xml = simplexml_load_string($content);
        $xml->registerXPathNamespace('ns1', 'http://schema.example.com');

        foreach ($xml->xpath('\\SOAP-ENV:') as $item)
        {
            //certainly the bad way?
            echo "<pre>";
                print_r($item);
            echo "</pre>";

        }

        echo "<pre>";
            print_r($xml);
        echo "</pre>";

    } 
```

我没有得到任何结果......我想让出现：'SendMailling'（识别请求名称）

当我特别指定

```
//foreach($xml->xpath('//ns1:SendMailling') as $item) 
```

没有问题。

我试过 了`foreach($xml->xpath('//ns1') as $item)`
，`$xml->xpath('//SOAP-ENC'), $xml->xpath('//Body')`但是...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T10:51:31.903

> *我很难理解你的问题，所以这可能不是答案。*

如果我理解正确，您想选择所有元素节点，它们是 / 命名空间中的直接`<SOAP-ENV:Body>`子`ns1`节点`http://schema.example.com`。

您已经注册了要用于的命名空间前缀`SimpleXMLElement::xpath`：

```
$xml->registerXPathNamespace('ns1', 'http://schema.example.com'); 
```

据我所知，您尚未注册`SOAP-ENV`/ 命名空间。`http://schemas.xmlsoap.org/soap/envelope/`

在 XPath 中要匹配一个元素，您可以指定它的命名空间。有多种方法可以做到这一点：

```
*               All elements in any namespace.
prefix:*        All elements in namespace "prefix" (registered prefix)
prefix:local    Only "local" elements in namespace "prefix" 
```

例如选择所有带有`ns1`前缀的元素：

```
//ns1:* 
```

您可能想要限制这一点，因为您只想要直接的子节点`<SOAP-ENV:Body>` ，因此使用前缀注册该命名空间`SOAP-ENV`并扩展先前的 xpath：

```
/SOAP-ENV:Body/ns1:* 
```

这应该包含您正在寻找的所有元素。

* * *

（OP :) 再次感谢，当我做一个

```
foreach ($xml->xpath('//SOAP-ENV:Body/ns1:*') as $item) {
    echo $item->getName() . "<br>";
} 
```

一切正常，我得到了请求 Name `'SendMailling'`。

# c# - 当按标题栏关闭按钮asp.net c#时如何捕捉会话结束

> ID：11242252
> 
> 赞同：0
> 
> 时间：2012-06-28T10:03:44.630
> 
> 标签：c#, asp.net, sql-server, session-state, sessionend

我对 asp.net Web 应用程序有一些疑问。使用 sql server 会话状态的 Web 应用程序。注销事件可以删除会话，但按标题栏关闭按钮要删除会话。按下标题栏关闭按钮时可以控制哪些事件。我读到了 session_end 事件可以在按下标题栏关闭按钮时捕获。但是不能使用 sql server 会话状态产生 session_end 事件。怎么能抓？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T10:08:13.407

关闭浏览器不会结束服务器上的会话，服务器无法区分打开或关闭的浏览器，它只是接收请求然后发送响应并坐在那里等待另一个请求。在没有请求的一定时间后，会话将超时并且 session_end 事件将运行。

如果您想结束会话，则必须在关闭浏览器时将某种 ajax 请求发回服务器，以便服务器知道结束会话。

编辑

你可以使用 jQuery 做这样的事情

```
$(window).unload(function() {
  $.post('someurl');
}); 
```

将 someurl 替换为 Web 服务、处理程序或 mvc 控制器操作或类似内容的 url，告诉服务器浏览器已关闭。

然后服务器端你就做

```
Session.Abandon(); 
```

# oracle - ORA:00900 - 无效的 SQL 语句

> ID：11242255
> 
> 赞同：-1
> 
> 时间：2012-06-28T10:03:54.023
> 
> 标签：oracle, plsql

我是甲骨文广阔世界的新手。我要做的是创建一个存储过程并检索其结果。我的程序是

```
Create or Replace Procedure usp_RotaPlateProductie_Select(
afdelingId in varchar2,
productTypeId in varchar2,
productieData out sys_refcursor)
IS 
Begin
Open productieData for
Select Rotaplateproductie.Batchnummer, Cpiplusproductieorder.Productnummer,
    Product.Omschrijving, Productieresultaatrtplrol.Bruto_In_Meters
    From Rotaplateproductie inner join Productieresultaatrtplrol on
    Rotaplateproductie.Batchnummer = Productieresultaatrtplrol.Batchnummer 
    inner join Cpiplusproductieorder on 
    Productieresultaatrtplrol.ProductieNummer =  Cpiplusproductieorder.ProductNummer 
    inner join Product on
    Cpiplusproductieorder.Productnummer = Product.Productnummer
    Where Rotaplateproductie.Afdelingid = '3144' and Rotaplateproductie.producttype = 'PT005'   
END; 
```

并使用下面的代码我试图执行它。

```
var rc REFCURSOR
EXEC usp_RotaPlateProductie_Select('3144','PT005', :rc); 
```

在执行上述行时，我收到 Ora:00900 错误。

当我运行程序的查询部分时，它运行良好，但是使用程序它给了我错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T11:28:15.420

正如 Shareef 指出的那样，您在过程中的语句中缺少分号，但看起来您实际上并没有正确创建它。您需要`/`在过程之后告诉 Oracle 执行代码并实际进行创建。我认为它将`var`and`exec`语句视为单个调用的一部分，这是不正确的。但我也不确定你是如何运行它的；如果它在 SQL Developer 中，您需要“运行脚本”(F5) 而不仅仅是“运行”。

```
Create or Replace Procedure usp_RotaPlateProductie_Select(
    p_afdelingId in varchar2,
    p_productTypeId in varchar2,
    p_productieData out sys_refcursor)
IS 
Begin
    Open p_productieData for
        Select Rotaplateproductie.Batchnummer, Cpiplusproductieorder.Productnummer,
            Product.Omschrijving, Productieresultaatrtplrol.Bruto_In_Meters
        From Rotaplateproductie
        inner join Productieresultaatrtplrol on
            Rotaplateproductie.Batchnummer = Productieresultaatrtplrol.Batchnummer 
        inner join Cpiplusproductieorder on 
            Productieresultaatrtplrol.ProductieNummer = Cpiplusproductieorder.ProductNummer 
        inner join Product on
            Cpiplusproductieorder.Productnummer = Product.Productnummer
        Where Rotaplateproductie.Afdelingid = p_afdelingId
        and Rotaplateproductie.producttype = p_productTypeId; 
END;
/
var rc REFCURSOR
EXEC usp_RotaPlateProductie_Select('3144','PT005', :rc);
print :rc 
```

我已经切换到使用 IN 参数，并且我冒昧地更改了名称，以便您可以区分参数和列名；它们是相同的，这可能会导致混淆。

您可能还会发现给表取别名很有用；没有功能上的区别，但可能更容易阅读：

```
Create or Replace Procedure usp_RotaPlateProductie_Select(
    p_afdelingId in varchar2,
    p_productTypeId in varchar2,
    p_productieData out sys_refcursor)
IS 
Begin
    Open p_productieData for
        Select rp.Batchnummer, cppo.Productnummer,
            p.Omschrijving, pra.Bruto_In_Meters
        From Rotaplateproductie rp
        inner join Productieresultaatrtplrol par
            on rp.Batchnummer = pra.Batchnummer 
        inner join Cpiplusproductieorder cppo
            on pra.ProductieNummer = cppo.ProductNummer 
        inner join Product p
            on cppo.Productnummer = p.Productnummer
        Where rp.Afdelingid = p_afdelingId
        and rp.producttype = p_productTypeId; 
END;
/ 
```

如果您收到一条消息，表明程序编译时带有警告，请执行“显示错误”以获取详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T10:12:09.463

你运行代码了吗

```
Select Rotaplateproductie.Batchnummer, Cpiplusproductieorder.Productnummer,
    Product.Omschrijving, Productieresultaatrtplrol.Bruto_In_Meters
    From Rotaplateproductie inner join Productieresultaatrtplrol on
    Rotaplateproductie.Batchnummer = Productieresultaatrtplrol.Batchnummer 
    inner join Cpiplusproductieorder on 
    Productieresultaatrtplrol.ProductieNummer =  Cpiplusproductieorder.ProductNummer 
    inner join Product on
    Cpiplusproductieorder.Productnummer = Product.Productnummer
    Where Rotaplateproductie.Afdelingid = '3144' and Rotaplateproductie.producttype = 'PT005' 
```

我它有效请回复我想你最后错过了分号

> **;**
> 
> @Mavrik 已编辑
> 
> 在查询末尾添加分号后，正确创建了过程。谢谢，但是当我尝试使用以下代码执行它时，它仍然返回相同的错误代码
> 
> var rc REFCURSOR EXEC usp_RotaPlateProductie_Select('3144','PT005', :rc);

**更新 1：** 如果你有 ora 00900 可能是因为

[Oracle/PLSQL：ORA-00900 错误](http://www.techonthenet.com/oracle/errors/ora00900.php)

# python - 剥离 URL - Python

> ID：11242258
> 
> 赞同：2
> 
> 时间：2012-06-28T10:04:00.163
> 
> 标签：python, regex, url, strip

好的，我如何使用正则表达式删除 http**和/或**www 只是为了让**http://www.domain.com/**进入**domain.com**

假设 x 为任何类型的 TLD 或 cTLD

**输入示例**：

[http://www.domain.x/](http://www.domain.x/)

www.domain.x

**输出**：

域.x

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-28T10:10:06.120

不要使用正则表达式，使用 urlparse 获取 netloc

```
>>> x = 'http://www.domain.com/'
>>> from urlparse import urlparse
>>> o = urlparse(x)
>>> o
ParseResult(scheme='http', netloc='www.domain.com', path='/', params='', query='', fragment='')
>>> 
```

接着

```
>>> o.netloc
'www.domain.com'
>>> if o.netloc.startswith('www.'): print o.netloc[4:]
... 
domain.com
>>> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-28T10:28:14.873

如果您真的想使用正则表达式而不是`urlparse()`或拆分字符串：

```
>>> domain = 'http://www.example.com/'
>>> re.match(r'(?:\w*://)?(?:.*\.)?([a-zA-Z-1-9]*\.[a-zA-Z]{1,}).*', domain).groups()[0]
example.com 
```

正则表达式可能有点简单，但有效。它也没有替换，但我认为获取域更容易。

要支持像“co.uk”这样的域，可以执行以下操作：

```
>>> p = re.compile(r'(?:\w*://)?(?:.*?\.)?(?:([a-zA-Z-1-9]*)\.)?([a-zA-Z-1-9]*\.[a-zA-Z]{1,}).*')
>>> p.match(domain).groups() 
```

（“谷歌”，“co.uk”）

因此，您必须检查“co.uk”等域的结果，并在这种情况下再次加入结果。普通域应该可以正常工作。当您有多个子域时，我无法使其工作。

没有正则表达式或花哨模块的单行代码：

```
>>> domain = 'http://www.example.com/'
>>> '.'.join(domain.replace('http://','').split('/')[0].split('.')[-2:]) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T10:26:27.513

这是其中一种方法：

```
 >>>import re
    >>>str1 = 'http://www.domain.x/'
    >>>p1 = re.compile('http://www.|/')
    >>>out = p1.sub('',str1) 
```

# ruby - 无法安装 RVM 的单用户版本

> ID：11242259
> 
> 赞同：7
> 
> 时间：2012-06-28T10:04:10.983
> 
> 标签：ruby, rvm

问题很简单：

我无法安装RVM（单用户安装），好像我按照RVM网站上的说明进行操作，即：

```
$ curl -L https://get.rvm.io | bash -s stable 
```

我在安装脚本文件的第 360 行（以 echo 开头的行）收到权限被拒绝错误：

```
# Perform the actual installation, first we obtain the source using whichever
# means was specified, if any. Defaults to head.
  case "${version}" in  
    (head) 
       echo "${branch}" > "$rvm_path/RELEASE"    
       install_head ${branch:-master} || exit $?  
  ;; 
```

这是错误消息：

olivier@~$ curl -L [https://get.rvm.io](https://get.rvm.io) | bash -s 稳定

**bash：第 360 行：/usr/local/rvm/RELEASE：权限被拒绝**

如果我在上面的命令中的“bash”之前添加“sudo”，它工作正常，但它是多用户安装......

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-28T20:57:27.333

事实上，我通过卸载旧版本的 RVM:`sudo rvm implode`然后删除文件解决了这个问题`/etc/rvmrc`。完成后，我可以安装单用户版本，一切正常！

抱歉，我想编辑您的答案或通过我的评论完成它，但我不能（评论只能在 5 分钟内编辑......至少我赞成......）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-10-04T20:51:59.830

一旦你进行了系统范围的安装，你就不能运行单用户安装，因为它会首先检测你的系统范围的安装并尝试更新它。

但是可以通过指定安装路径来进行 root 安装，然后进行用户安装：

> curl -sSL [https://get.rvm.io](https://get.rvm.io) | bash -s 稳定**--path $HOME/.rvm**

您还必须在您的用户路径中手动设置单用户安装路径，因为当您已经拥有系统范围的安装（不是真正的预期用途）时，RVM 不会创建它：

```
# .bashrc
PATH=$PATH:$HOME/.rvm/bin # Add RVM to PATH for scripting 
```

并加载您的用户 rvm ：

```
# .bash_profile
[[ -s "$HOME/.rvm/scripts/rvm" ]] && source "$HOME/.rvm/scripts/rvm" # Load RVM into a shell session *as a function* 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-28T18:56:07.607

您是在 ~/.rvmrc、/etc/rvmrc 还是在您的一个 bash 脚本中设置 rvm_path？我建议删除这两个文件以及 ~/.rvm，然后尝试在不使用 sudo 的情况下再次安装 rvm。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-01T08:44:20.163

这对我有用，首先卸载所有版本，然后作为***用户***（没有 root）执行以下命令：

例如，我正在使用 Ruby 2.6.3 和 Rails 5.2.2 并在这些网页中设置一些帮助：

[https://gorails.com/setup/ubuntu/20.04](https://gorails.com/setup/ubuntu/20.04)

[https://rvm.io/rvm/install](https://rvm.io/rvm/install)

```
$ gpg --keyserver hkp://keys.gnupg.net --recv-keys 409B6B1796C275462A1703113804BB82D39DC0E3 7D2BAF1CF37B13E2069D6956105BD0E739499BDB
$ curl -sSL https://get.rvm.io | bash -s stable --ignore-dotfiles

$ source ~/.rvm/scripts/rvm
$ rvm install 2.6.3
$ rvm use 2.6.3 --default
$ ruby -v

$ gem install rails -v 5.2.2
$ rails -v 
```

检查路径：

```
$ which -a gem
$ which -a ruby 
```

现在您可以添加一些宝石（在您的应用程序目录中）：

```
$ gem install faker 
```

一切对我来说都很好，希望这会有所帮助！

# css - 如何使用纯 CSS 创建对角线标题

> ID：11242262
> 
> 赞同：0
> 
> 时间：2012-06-28T10:04:24.463
> 
> 标签：css

我们如何使用**纯 CSS**创建对角标题线，如下图所示：-

![在此处输入图像描述](../Images/63091298ed4138be83c408c5028d8de4.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T10:19:16.143

通过使用`:after`伪元素和透明边框，这很容易。如果添加该`:before`部分，您甚至可以获得抗锯齿（当然，计算 50% 的颜色是您的任务）：

[http://jsbin.com/ejomav/3/edit#javascript,html,live](http://jsbin.com/ejomav/3/edit#javascript,html,live)

```
​&lt;div>New Music</div>
<div>Old Music</div>

div {
    float: left;
    margin-right: 2.5em;
    line-height: 2em;
    width: 110px;
    position: relative;
    font-family: sans-serif;
    font-weight: bold;
    color: white;
    background: black;
}
div:after {
    content: ' ';
    display: block;
    position: absolute;
    width: 0px;
    height: 0px;
    top: 0;
    right:        -2em;
    border:        1em solid transparent;
    border-bottom: 1em solid black;
    border-left:   1em solid black;
}

div:before {
    content: ' ';
    display: block;
    position: absolute;
    width:  0px;
    height: 0px;
    top:    0px;
    margin-right: -1px;
    right:        -2em;
    border:        1em solid transparent;
    border-bottom: 1em solid #8080FF;
    border-left:   1em solid #8080FF;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T10:18:16.700

这似乎是最合适的示例（您*在更新问题之前*提供的图像是相同的）： http:
[//net.tutsplus.com/tutorials/html-css-techniques/how-to-create-diagonal-lines-with -css/](http://net.tutsplus.com/tutorials/html-css-techniques/how-to-create-diagonal-lines-with-css/)

**HTML**

```
<a href="#">Rohit AZAD</a> 
```

**CSS**

```
a {

  padding:10px;
  text-decoration:none;
  color:white;
  height:0;
  line-height:50px;
  display:inline-block;
  font-weight:bold;
  border-right:30px solid transparent;
  border-bottom:30px solid blue;

} 
```

演示：- [http://jsbin.com/uhibub/edit#html,live](http://jsbin.com/uhibub/edit#html,live)

# c# - 滚动条已禁用

> ID：11242263
> 
> 赞同：0
> 
> 时间：2012-06-28T10:04:26.577
> 
> 标签：c#, wpf, xaml, scrollbar

我试图像这样实现一个 ScrollViewer；

```
<Height="auto" Width="auto"
            MaxHeight="500" MaxWidth="400"
            ResizeMode="NoResize" WindowStyle="None">
        <Grid>
            <StackPanel>
                <ScrollViewer Name="scrlBr">
                    <StackPanel Orientation="Vertical">
                        <TextBlock Name ="txtBlock" Margin="10" Height="auto" 
Width="auto" TextWrapping="Wrap"></TextBlock>
                        <Button Name="btnOk" Click="btnOk_Click" Width="80"
HorizontalAlignment="Center">Close!</Button>
                    </StackPanel>
                </ScrollViewer>
                <Label HorizontalAlignment="Center" FontSize="3" 
Name="lblScrollDown">\/</Label>
            </StackPanel>
        </Grid>
    </Window> 
```

我遇到的问题是滚动条显示为已禁用，而文本显然从窗口消失了，我看不到`btnOk`. 当然，如果窗口具有固定的高度，`TextBlock`并且`Button`包含在 中的 and`Scrollviewer`比窗口大，那么应该启用 ScrollBar，不是吗？

**更新**

我发现问题在于`ScrollViewer`在`StackPanel`. 可能会尝试使用`Grid`...更新来。

**解决方案**

我对`Stackpanel`这个问题的看法是正确的，并同意 Heinzi 的建议，即使用`DockPanel`一切都很好。：） 谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T10:08:03.163

问题是你的`StackPanel`. 它总是占据它需要的所有垂直空间，所以 ScrollPanel 的*容器*比窗口​​本身大得多，而且 ScrollViewer 认为不需要滚动。

解决方案：将 替换`StackPanel`为`DockPanel`. 将`<Label>`声明移动到顶部并将其停靠在 DockPanel 的底部。DockPanel 中的最后一个子节点（`ScrollViewer`在本例中为）总是填充剩余空间：

```
<Grid> 
    <DockPanel> 
        <Label DockPanel.Dock="Bottom" ... Name="lblScrollDown">\/</Label> 
        <ScrollViewer Name="scrlBr"> 
             ...
        </ScrollViewer> 
    </DockPanel> 
</Grid> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T11:35:22.780

也许你需要写这样的东西

```
<ScrollViewer Name="scrlBr" VerticalScrollBarVisibility="auto" HorizontalScrollBarVisibility="auto">
...
</ScrollViewer> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T10:17:26.563

尝试从 ScrollViewer 设置`CanContentScroll`属性`True`并设置 StackPanel 的固定高度，因为 StackPanel 设计为在一个方向上无限增长。或者更好的是，使用不同的面板来堆叠您的物品。

# sql-server - 使用 t-sql 重命名磁盘上的文件

> ID：11242267
> 
> 赞同：1
> 
> 时间：2012-06-28T10:04:47.760
> 
> 标签：sql-server, tsql

我正在使用 T-SQL

我在这里有一些 excel 文件：`C:\MyFiles\`

我想删除该目录中文件名中的所有撇号。

现在要删除撇号，可以使用这样的代码。

```
update MyTable
set FileName= replace(FileName, '''', '') 
```

如果我在数据库中拥有所有文件名，那么使用上面的代码很容易。但我需要更新位于磁盘上的文件名。

我将如何使用 T-SQL 执行此操作？

它必须是 T-SQL，因为我需要将它添加到存储过程中的现有代码中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T10:34:07.253

```
SET NOCOUNT ON;

 CREATE TABLE #FileList
    (
     FileID INT IDENTITY(1, 1)
    ,Line VARCHAR(512)
    )  

 CREATE TABLE #temp
    (
     isFileThere BIT
    ,isDirectory BIT
    ,parentDirExists BIT
    )

 DECLARE @Command VARCHAR(1024)
 ,  @RowCount INT
 ,  @counter INT
 ,  @FileName VARCHAR(1024)
 ,  @FileExists BIT
 SET @Command = 'dir C:\MyFiles\  /A-D  /B'

 PRINT @Command
 INSERT #FileList
        EXEC master.dbo.xp_cmdshell @Command

 DELETE FROM #FileList
 WHERE  Line IS NULL

 SELECT @RowCount = COUNT(*)
 FROM   [#FileList]

 SET @counter = 1

 WHILE ( @counter <= @RowCount ) 
    BEGIN
        SELECT  @FileName = [Line]
        FROM    [#FileList]
        WHERE   [FileID] = @counter 

        SET @Command = 'C:\MyFiles\' + @FileName + ''

 PRINT @Command

        INSERT  [#temp]
                EXEC master.dbo.xp_fileExist @Command

        SELECT  @FileExists = [isFileThere]
        FROM    [#temp] 

        IF @FileExists = 1
            AND CHARINDEX('''', @FileName) > 0 
            SET @Command = 'REN "C:\MyFiles\' + @FileName + '" "'
                + REPLACE(@FileName, '''', '') + '"'
        ELSE 
            SET @Command = ''

        SET @counter = @counter + 1

        PRINT @Command

        IF LEN(@Command) > 0 
            EXEC master.dbo.xp_cmdshell @Command

    END 

 DROP TABLE #FileList

 DROP TABLE [#temp] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T11:26:24.867

首先你需要启用 xp_cmdshell

```
EXEC sp_configure 'show advanced options', 1
GO
RECONFIGURE
GO
EXEC sp_configure 'xp_cmdshell', 1
GO
RECONFIGURE
GO 
```

然后您可以使用 sp_cmdshell 从目录中检索文件名

```
Declare @Directory TABLE (Files Varchar(MAX))
Declare @File TABLE (Name varchar(MAX))
INSERT INTO @Directory
EXEC XP_CMDSHELL 'DIR "D:"'
Insert into @File
Select reverse(LEFT(reverse(Files),charindex(' ' ,reverse(Files)))) from @Directory
Select * from  @FILE 
```

现在，您在表变量 @FILE 中获取文件名，并使用 replace 之类的函数或您自己的自定义函数将撇号替换为确切的文件名

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T12:30:00.463

试试这个它会为你工作

1）如下所述创建一个sp

```
CREATE PROCEDURE dbo.ListPathsXML
@FileSpec VARCHAR(2000),
@order VARCHAR (80) = '/O-D',--sort by date time oldest first
@xmlFileList XML OUTPUT

AS
DECLARE @myfiles TABLE (MyID INT IDENTITY(1,1) PRIMARY KEY, FullPath VARCHAR(2000))
DECLARE @CommandLine VARCHAR(4000)
IF @order IS NOT NULL -- abort if the order is silly
   BEGIN
   SELECT @CommandLine =LEFT('dir "' + @FileSpec + '" /A-D /B /S '+@order,4000)
   INSERT INTO @MyFiles (FullPath)
       EXECUTE xp_cmdshell @CommandLine
   DELETE FROM @MyFiles WHERE fullpath IS NULL
       OR fullpath = 'File Not Found'
   END
SET @xmlFileList = (SELECT fullpath FROM @MyFiles
                         FOR
                          XML PATH('thefile'),
                              ROOT('thefiles'),
                              TYPE) 
```

2）然后给出要替换文件名的目录名称

```
DECLARE @LotsOfText NVARCHAR(MAX),
       @ii INT,
       @iiMax INT,
       @File VARCHAR(2000),
       @Command NVARCHAR(4000)
DECLARE @files TABLE (MyID INT IDENTITY(1,1) PRIMARY KEY, [Path] VARCHAR(2000))

DECLARE @FileList XML
EXECUTE ListPathsXML 'D:\QAconfig\',
    DEFAULT , @XMLFileList = @FileList OUTPUT

INSERT INTO @files(path)
   SELECT   x.thefile.value('fullpath[1]', 'varchar(2000)') AS [path]
        FROM    @FileList.nodes('//thefiles/thefile') AS x ( thefile )
--don't look at the current errorlog!
SELECT @ii=1, @iiMax=MAX(MyID) FROM @Files
WHILE @ii<=@iiMax
   BEGIN
   SELECT @File= [path] FROM @files WHERE MyID=@ii
   print @File
   SELECT @command='EXEC master..xp_cmdshell' + '''MOVE '+ Replace(@FILE,'''','''''') + ' ' +REPLACE(@FILE,'''','') +''''
   print @command
   EXECUTE sp_ExecuteSQL @command--, N'@lotsOfText nvarchar(max) output ',@lotsoftext output 
   SELECT @ii=@ii+1
   END 
```

# google-chrome - Chrome 商店统计信息

> ID：11242269
> 
> 赞同：3
> 
> 时间：2012-06-28T10:04:49.180
> 
> 标签：google-chrome, google-chrome-extension, google-chrome-devtools, web-statistics

我正在使用谷歌分析为我们的 chrome 扩展构建一个漏斗。

当谈到漏斗开始时的 chrome 商店统计信息时，开发人员的仪表板提供的数据是有限的（仅限展示次数和安装次数）。

我正在寻找诸如对我的扩展页面的推荐、点击扩展页面但未安装它的人数（不是展示次数）等数据。

可以在仪表板或 GA 中找到这些数据吗？在哪里？如果没有，我该如何跟踪呢？

非常感谢！埃弗拉特

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T22:20:03.017

您可以从 Developer Dashboard 将 Google Analytics ID 添加到您的项目中。在 Analytics 中创建一个新帐户，在 Chrome 开发者仪表板中单击您的项目旁边的“编辑”，然后在页面底部附近添加 ID。（我不确定这个功能有多新，但有点难找）。

在 Analytics 内部，我为 URL 设置了一个目标`/track_install/detail/ext/free/{% my extension id %}`，用于跟踪安装。这显示了目标漏斗中未安装的观看次数。推荐与任何其他分析页面一样可用。GA 更加细化并且实时更新，而不是像仪表板那样每天一次。

# android - 设置 Android Gridview 项目的位置

> ID：11242272
> 
> 赞同：1
> 
> 时间：2012-06-28T10:04:56.373
> 
> 标签：android, gridview, gravity

我的 Gridview 一次可以显示 21 (3x7) 个图像。没问题..能够显示21张图像。

21张图片显示：-（没问题）

```
1   2   3   4   5   6   7

8   9   10  11  12  13  14

15  16  17  18  19  29  21 
```

但是，如果我只想显示 10 张图像，那么问题就来了。图像在 1.5 行后开始显示。但是，我想从第一行开始显示任意数量的图像（1 - 21）

==============

..空行出现在顶部..

```
1   2   3   4   5   6   7

8   9   10 
```

请帮助我...如何从起始行正确排列图像..

我已经尝试了所有值：

**gridview [ iIndex ].setGravity( Gravity.START );**

# c# - C#中的浮点数到十进制转换

> ID：11242277
> 
> 赞同：0
> 
> 时间：2012-06-28T10:05:13.470
> 
> 标签：c#, floating-point, decimal-point

```
int i = 1;        // -2,147,483,648 to 2,147,483,647
float f = 2.1f;      // -3.402823e38 to 3.402823e38
long l = 3;       // -922337203685477508 to 922337203685477507
double dbl = 4.5;   // -1.79769313486232e308 to 1.79769313486232e308
decimal dec = 5.2m;  // -79228162514264337593543950335 to 79228162514264337593543950335

dec = i;     // No error
dec = l;     // No error

dec = f;    // Compiler error
dec = dbl;  // Compiler error

f = (float)dec; // No error (May loss precision) ok

**dec = (decimal)dbl;** // No error  why it requires ? 
```

为什么上面的代码需要显式转换。浮点数/双精度数 > 十进制数的范围？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T10:11:40.640

因为这不仅仅是关于精度；您也需要考虑*范围*- 坦率地说，`1.79769313486232e308`它**真的非常**大（如小数点左侧 > 300 位）。您的断言“小数的偶数范围 > 浮点数或双精度数”是不正确的。

```
var dbl = double.MaxValue;
var dec = (decimal) dbl; // BOOM! 
```

`double`a的范围*大于*a的范围`decimal`。

此外，您可能需要考虑`double.NaN`和。`double.PositiveInfinity``double.NegativeInfinity`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T10:14:44.133

我相信转换取决于数据类型的大小而不是数据类型的范围。

```
Integral Types

DataType    Size    . Net (CTS) Comments
byte    1   System.Byte 0 - 255 It is Unsigned
sbyte   1   System.SByte    -128 to 127 - Signed
short   2   System.Int16    
ushort  2   System.UInt16   
int     4   System.Int32     
uint    4   System.Unt32    
long    8   System.Int64    
ulong   8   System.UInt64   

Floating Types
decimal 16  System.Decimal  Has up to 28 digits after decimal
float   4   System.Single   Has up to 8 digits after decimal
double  8   System.Double   Has up to 15 digits after decimal 
```

# java - 设置正确的多线程

> ID：11242281
> 
> 赞同：0
> 
> 时间：2012-06-28T10:05:22.123
> 
> 标签：java, multithreading

不幸的是，我对如何正确设置线程的理解非常糟糕。我知道在 SO.SE 和其他网站上都有大量关于此的信息，但我似乎无法将我正确阅读的内容与我正在做的事情联系起来。

我的问题是我有一种方法，它采用两个参数，其中一个参数除以另一个参数。商（结果）用于填充可视进度条。当商达到 1, 时`(readBytes/contentLength == 1)`，我希望某个线程（我猜）在从布局中删除进度条之前等待给定时间。我知道将值设置为进度条所需的所有代码以及如何将其从视图中删除，*我的问题是如何让它等待，例如，在触发操作以删除组件之前等待 2000 毫秒？*

这可能是基本的线程知识，但我遇到了很大的问题。

到目前为止，我已经尝试了这两种方法：

```
@Override
    public void updateProgress(long readBytes, long contentLength) {

        this.contentLength = contentLength;

        if(readBytes != 0 && contentLength != 0 && fileListItem != null)    {

            fileListItem.getProgressIndicator().setValue(readBytes/contentLength);

            synchronized (this) {
                while(readBytes/contentLength != 1) {
                    try {
                        wait();
                    } catch (InterruptedException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    };
                    fileListItem.removeProgressIndicator();                 
                }
            }
        }

        if(!itemIsAdded)    {

            checkFileCompatibility(contentLength);

        }
    } 
```

**和**

```
@Override
    public void updateProgress(long readBytes, long contentLength) {

        this.contentLength = contentLength;

        if(readBytes != 0 && contentLength != 0 && fileListItem != null)    {

            if(readBytes/contentLength == 1)    {
                Thread t = new Thread();
                t.start();
                try {
                    t.wait(2000);
                    fileListItem.removeProgressIndicator();
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                t.interrupt();
            } else  {
                fileListItem.getProgressIndicator().setValue(readBytes/contentLength);
            }
        }

        if(!itemIsAdded)    {

            checkFileCompatibility(contentLength);

        }
    } 
```

没有成功。在第一个示例中，主线程似乎是等待的线程，没有任何反应。在第二个示例中，我在`t.wait(2000);`. 我不知道该怎么做。。

**编辑：**根据 Bohemian 的意见，我得到了它的工作。

```
@Override
    public void updateProgress(final long readBytes, final long contentLength) {

        this.contentLength = contentLength;

        if(readBytes != 0 && contentLength != 0 && fileListItem != null)    {

            if(!threadIsRunning)    {
                new Thread(new Runnable() {

                    @Override
                    public void run() {
                        threadIsRunning = true;
                        while(!fileIsAdded) {
                            try {
                                Thread.sleep(2000);
                            } catch (InterruptedException e) {
                                // TODO Auto-generated catch block
                                LOGGER.error(e.getMessage());
                                break;
                            }
                        }
                        fileListItem.removeProgressIndicator();
                        threadIsRunning = false;
                    }
                }).start();
            }

            fileListItem.getProgressIndicator().setValue(readBytes/contentLength);
            if(readBytes == contentLength)
                fileIsAdded = true;
        }

        if(!itemIsAdded)    {

            checkFileCompatibility(contentLength);

        }
    } 
```

它仍然需要一些整理，但基础现在正在工作！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T11:05:05.057

[SwingWorker](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingWorker.html)很可能是适合您任务的工具。Javadoc 中有完整的代码示例。注意方法`setProgress`——这是更新进度条的理想选择。

如果您真正需要的只是清除进度条的固定 2 秒延迟，那么您想使用[Swing Timer](http://java.sun.com/products/jfc/tsc/articles/timer/)。它甚至不涉及多线程，您只需编写一个回调处理程序，该处理程序将在指定的延迟后执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T10:28:33.587

我认为你真正需要的是

```
Thread.sleep(2000); 
```

而不是`wait`. 虽然`wait`可以用于睡眠，但它的主要功能是用于线程间信号，并且需要锁定正在等待的对象，而您尚未获得该锁定，因此出现异常。

**编辑**：经过进一步检查，我注意到您做事不正确。您只是在创建一个没有关联`run`方法的线程：

```
Thread t = new Thread();
t.start(); 
```

因此，您的线程没有执行任何操作。

我建议阅读有关如何正确设置线程的 Java 线程教程：http: [//docs.oracle.com/javase/tutorial/essential/concurrency/runthread.html](http://docs.oracle.com/javase/tutorial/essential/concurrency/runthread.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T10:31:25.543

我不会让主线程等待。这是不好的做法，因为它不可扩展并且会使您的 GUI 紧张。

相反，我会将超时值和几个[回调传递](http://en.wikipedia.org/wiki/Callback_%28computer_programming%29)给工作线程，以在它超过超时/完成工作时执行。这样主线程就可以自由地回去做它想做的任何事情。

仅出于说明目的，您的“完成”回调可能如下所示：

```
new Runnable() {
    public void run() {
        // code that hides the progress bar
    }
} 
```

您的“超时”回调可能如下所示：

```
new Runnable() {
    public void run() {
        // code that displays an error message
    }
} 
```

顺便说一句，要让线程做某事，您还可以传递一个 Runnable：

```
new Thread(new Runnable() {
    public void run() {
        // code that runs when your thread starts
    }
}).start(); 
```

# java - 不满意的链接错误

> ID：11242282
> 
> 赞同：0
> 
> 时间：2012-06-28T10:05:34.660
> 
> 标签：java

我在尝试加载库时遇到异常：UnsatisfiedLinkError。我已将库文件放在正确的路径中，并将路径添加到 PATH 环境变量。但似乎没有任何效果。直到我更改了 Tomcat 配置并将 -Djava.library.path=C:\Windows\System32 添加到 java 选项中。我的一位同事不必这样做，但它在她的系统上运行良好，我错过了什么？任何人都可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-26T16:07:29.257

在 JNI 中，Java 本地方法的名称和对应的 C 函数的名称不同。为了调用 C 函数，C 函数的名称必须包含前缀“Java_”、类名和方法名。简单的方法是使用程序“javah”来生成包含所有定义的头文件。

尝试以下 Windows 示例：（记住 Java 类名必须与相应的文件名相同）

步骤 1\. 创建以下 Java 文件 (P.java)：

```
class P
{
  static
  {
    // "P" is the name of DLL without ".dll"
    System.loadLibrary ("P");
  }

  public static native void f(int i);

  public static void main(String[] args)
  {
    f(1);
  }
} 
```

步骤 2.javac P.java

步骤 3.javah P

然后，“javah”生成头文件“Ph”

步骤 4\. 创建文件“P.def”，包括以下两行（此文件定义导出的符号，在本例中为 C 函数的名称）：

```
EXPORTS
Java_P_f 
```

第 5 步。创建您的 C 文件 (Pc)：

```
#include "p.h"

JNIEXPORT void JNICALL Java_P_f(JNIEnv *env, jclass c, jint i)
{
  printf("%i\n",i);
} 
```

步骤 6\. 在 Visual Studio 命令提示符中，定义以下变量：

设置 JAVA_HOME= JDK的路径

设置包含=%include%;%JAVA_HOME%\include;%JAVA_HOME%\include\win32

步骤 7\. 生成 DLL：

cl /LD Pc P.def

步骤 8\. 运行 Java 程序：

爪哇

（注：P.dll 和 P.class 位于同一目录下）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T12:04:45.647

一种选择可能是注册 dll

```
Regsvr32 “path to your dll.dll”. 
```

这将安装/注册dll（我假设它是一个dll）

但我一般观察到，如果它是 COM dll，那么你必须注册它并将其放入 System32

# sql-server - 在 sql server management studio 中打开视图超时

> ID：11242288
> 
> 赞同：0
> 
> 时间：2012-06-28T10:06:07.277
> 
> 标签：sql-server

当我尝试在 SQL Server 管理工作室中使用“打开视图”打开复杂视图时，执行大约 30 秒后遇到错误：SQL 执行错误。错误来源：.Net SqlClient 数据提供程序错误消息：超时已过期。在操作完成之前超时时间已过或服务器没有响应。

实际上，如果我在查询窗口中执行此视图，它只需要 36 秒。

我参考这篇文章但没有工作： http: [//support.microsoft.com/kb/915849](http://support.microsoft.com/kb/915849) 请帮助，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T10:11:57.810

为连接超时和执行超时设置 timeout=0（无限）。

参考下图。

![设置连接超时=0 也设置执行超时=0](../Images/42f0899052c27ce977454a3d8052598f.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-19T15:50:39.890

你好有解决办法：

运行 -> regedit -> Computer\HKEY_CURRENT_USER\Software\Microsoft\SQL Server Management Studio\11.0（或 14.0 取决于 SSMS 的版本）\DataProject\SQLQueryTimeout

将值 30 更改为 300

问题解决了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-09T20:19:26.183

我认为这是一个错误，所以我将其添加到 Connect 反馈站点。投票给它，希望我们能解决它。

[https://connect.microsoft.com/SQLServer/Feedback/Details/3115872](https://connect.microsoft.com/SQLServer/Feedback/Details/3115872)

# python - 如何在模板中迭代 Django CHOICES - 不使用表单或模型实例

> ID：11242290
> 
> 赞同：6
> 
> 时间：2012-06-28T10:06:12.807
> 
> 标签：python, django

我目前使用选项来定义月份列表和一周中的几天列表。

我想在我的模板中显示这些选项列表，而不必与特定实例或表单相关。

例如...

在我的模型中：

```
MONTH_CHOICES = (
    ('01', 'January'),
    ('02', 'February'),
    ('03', 'March'),
etc

DAY_CHOICES = (
    ('01', 'Monday'),
    ('02', 'Tuesday'),
    ('03', 'Wednesday'),
etc

class Item(models.Model):
    month = models.CharField(choices=MONTH_CHOICES)
    day = models.CharField(choices=DAY_CHOICES) 
```

在我看来：

```
month_choices = MONTH_CHOICES 
```

在我的模板中：

```
{% for month in month_choices %}
{{ month }}<br />
{% endfor %} 
```

上面的代码输出：

```
('01', 'January')
('02', 'February')
('03', 'March') 
```

如何只输出每个选项的名称（或值）？

或者，是否有更好的方法来记录模型的月份和星期几 - 以及稍后使用月份和日期对实例进行分组/呈现？

谢谢！:)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2015-02-27T20:52:11.740

有更好的方法来做到这一点。

```
{% for value, text in form.[field_name].field.choices %}
    {{ value }}: {{ text }}
{% endfor %} 
```

form 是您传递给模板的表单变量。[field_name] 是您在模型中定义的字段名称。在这种情况下，“月”

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-28T10:30:10.490

您可以在迭代元组时简单地解包它：

```
{% for n, month in month_choices %}
{{ n }}, {{ month }}<br />
{% endfor %} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-28T10:07:44.997

```
{% for month in month_choices %}
{{ month.1 }}<br />
{% endfor %} 
```

尽管从语义上讲，您可能应该使用`<ul>`and`<li>`而不是`<br>`.

# jquery - 通过 ajax 的 jquery 和复选框数据

> ID：11242291
> 
> 赞同：0
> 
> 时间：2012-06-28T10:06:14.343
> 
> 标签：jquery

我正在尝试创建一组复选框，我可以检查并通过 ajax 发送。

理想情况下，我希望通过 ajax 将几条信息发送到 php 脚本，`the checkbox that has been checked`以及`id`

它`id`基于 URL，所以我可以使用`$_GET['id']`.

因此，如果用户选中了这两个框，则需要发送到 php 脚本的值将是：

`53` `57` `1`- 此值是 URL 中的值。

到目前为止，我有以下内容：

```
<input type="checkbox" name="test[]" value="53" id="part_shipping" />
<input type="checkbox" name="test[]" value="57" id="part_shipping" />
<input name="confirm" type="button" value="confirm" />

<script type="text/javascript" src="http://code.jquery.com/jquery.js"></script>
<script type="text/javascript">

$('input[type=button]').click( function() {
   $(":checked").each(function() {
   var value = $(this).val();
         id = 'id:1';
         data = 'shipping:' + value;
         console.log(data);
   });
    $.post("ajax.php", data);   
});

</script> 
```

如何在数据中附加 id，使其显示为： `shipping:53 shipping:57 id:1`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T10:15:36.477

如果`<input>`标签不在 a`<form>`中，则添加一个：

```
<form id="myForm">
    ...
    <input type="checkbox" name="test[]" value="53" id="part_shipping" />
    <input type="checkbox" name="test[]" value="57" id="part_shipping" />
    <input name="confirm" type="button" value="confirm" />
    ...
</form> 
```

现在，您可以使用 jQuery`.serialize()`编写格式为“name1=value1&name2=value2&name3=value3”等的数据字符串，其中名称与 HTML 中给出的名称相同：

```
$(function() {
    $('input[type=button]').click( function() {
        $.post("ajax.php", $("#myForm").serialize());   
    });
}); 
```

复选框只有在被选中时才会出现在序列化表单中。而且我认为我说按钮不会包含在序列化中是对的。

这样做的好处是脚本可以响应表单中的设计更改。如果添加或删除字段，则不需要更改 javascript。

# java - 策略文件转换

> ID：11242293
> 
> 赞同：1
> 
> 时间：2012-06-28T10:06:26.920
> 
> 标签：java, security, policyfiles

如何将策略配置文本文件转换为 Policy 对象，以便在方法调用*Policy.setPolicy()* ( [API](http://docs.oracle.com/javase/1.4.2/docs/api/java/security/Policy.html) ) 中使用？

# ios - ios - sqlite 准备语句

> ID：11242298
> 
> 赞同：0
> 
> 时间：2012-06-28T10:06:44.420
> 
> 标签：ios, xcode, sqlite

我正在尝试从 ios 应用程序中的 sqlite 数据库中读取数据。当我运行该应用程序时，它能够打开数据库，但在日志文件中它显示消息 - “准备语句存在问题”。我不知道我的准备语句有什么问题这是我的代码 -

```
-(NSString *)dataFilePath{
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    return [documentsDirectory stringByAppendingPathComponent:kFilename];
} 
```

在**viewDidLoad**我有 -

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    myarray = [[NSMutableArray alloc]init];

    sqlite3 *database;
    if(sqlite3_open([[self dataFilePath]UTF8String], &database)!=SQLITE_OK){
        sqlite3_close(database);
       NSAssert(0, @"Failed to open database");
    }

    const char *createSQL = @"SELECT ID, TITLE FROM FIRST ORDER BY TITLE;"; //first is the table in the database
    sqlite3_stmt *sqlStmt;
    if(sqlite3_prepare_v2(database, [createSQL UTF8String], -1, &sqlStmt, nil)!=SQLITE_OK){
        NSLog(@"Problem with prepare statement"); //this is where the code gets stuck and I don't know why
    }else{

        while(sqlite3_step(sqlStmt)==SQLITE_ROW){
            NSInteger number = sqlite3_column_int(sqlStmt, 0);
            NSString *title = [NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStmt, 1)];
            [myarray addObject:title];
        }
        sqlite3_finalize(sqlStmt);
    }
    sqlite3_close(database);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T12:08:35.620

您可以尝试几件事。

1.  清理您的应用程序，从模拟器或设备中删除并尝试再次安装新副本，看看它是否有效。

2.  在终端中打开您的数据库并尝试在那里运行您的 sql 语句。检查您是否获得了所需的输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T15:11:16.453

如果您的准备语句失败，而不仅仅是报告“准备语句问题”，请尝试检索错误消息，例如，

```
NSLog(@"%s Prepare failure '%s' (%1d)", __FUNCTION__, sqlite3_errmsg(database), sqlite3_errcode(database)); 
```

这可能会让您更好地指示问题。

我过去看到的一个问题是可能找不到数据库（因为它没有包含在包中，名称中的拼写错误等）但是`sqlite3_open`如果它不存在，标准函数将创建它，因此将`sqlite3_open`成功，但在新创建的空白数据库中找不到相关表。比`sqlite3_open`会更好：

```
sqlite3 *database;
if (sqlite3_open_v2([[self dataFilePath] UTF8String], &database, SQLITE_OPEN_READWRITE, NULL) != SQLITE_OK) {
    sqlite3_close(database); // not sure you need to close if the open failed
    NSAssert(0, @"Failed to open database");
} 
```

这样，如果找不到数据库，您会收到警告。但是如果你已经完成`sqlite3_open`了，你可能有一个空白数据库，所以你可能想要重置你的模拟器和/或从你的设备中删除应用程序，然后再尝试使用`sqlite3_open_v2`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T10:41:08.177

尝试将 nil 更改为 NULL。此外，尝试将 SQL 语句定义为 const char。

```
....

const char *sql = "SELECT ID, TITLE FROM FIRST ORDER BY TITLE";
sqlite3_stmt *sqlStmt;

if(sqlite3_prepare_v2(database, sql, -1, &sqlStmt, NULL)!=SQLITE_OK){

.... 
```

# ios - 如何从 iOS 中的非 UI 线程更新 UI 标签

> ID：11242307
> 
> 赞同：20
> 
> 时间：2012-06-28T10:07:11.583
> 
> 标签：ios, xcode

我是iOS开发的新手，我有简单的objective -c class“MoneyTimer.m”来运行定时器，从那里我想用定时器的变化值更新一个UI标签。我想知道如何从非 UI 线程访问 UI 元素？我正在使用 Xcode 4.2 和故事板。

在黑莓中，只需获取事件锁，就可以从非 UI 线程更新 UI。

```
//this the code from MyTimerClass

 {...
    if(nsTimerUp == nil){

        nsTimerUp = [NSTimer scheduledTimerWithTimeInterval: 1.0 target:self selector:@selector(countUpH) userInfo:nil repeats: YES];
 ...}

(void) countUpH {

sumUp = sumUp + rateInSecH;
 **//from here i want to update the UI label **
...
} 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-06-28T10:33:04.760

这是最快和最简单的方法是：

```
- (void) countUpH{

   sumUp = sumUp + rateInSecH;
   //Accessing UI Thread
   [[NSOperationQueue mainQueue] addOperationWithBlock:^{

      //Do any updates to your label here
      yourLabel.text = newText;

   }];
} 
```

如果你这样做，你不必切换到不同的方法。

希望这可以帮助。

山姆

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T10:18:18.637

您的问题没有提供太多信息或细节，因此很难确切知道您需要做什么（例如，是否存在“线程”问题等）。

无论如何，假设您的 MoneyTimer 实例具有对您可以使用的当前 viewController 的引用`performSelectorOnMainThread`。

//

```
- (void)performSelectorOnMainThread:(SEL)aSelector withObject:(id)arg waitUntilDone:(BOOL)wait; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-03-23T03:02:13.350

正确的做法是这样的：

```
- (void) countUpH  {
   sumUp = sumUp + rateInSecH;
   //Accessing UI Thread
   dispatch_async(dispatch_get_main_queue(), ^{

   //Do any updates to your label here
    yourLabel.text = newText;
   });
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-28T10:25:51.683

我过去做过相同的事情。

我使用了一个函数来设置标签文本：

```
- (void)updateLabelText:(NSString *)newText {
    yourLabel.text = newText;
} 
```

然后用[performSelectorOnMainThread在主线程上调用这个函数](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsobject_Class/Reference/Reference.html)

```
NSString* myText = @"new value";
[self performSelectorOnMainThread:(@selector)updateLabelText withObject:myText waitUntilDone:NO]; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-28T10:29:57.673

假设该标签位于同一类中：

```
 if(nsTimerUp == nil){
        nsTimerUp = [NSTimer scheduledTimerWithTimeInterval: 1.0 target:self selector:@selector(countUpH) userInfo:nil repeats: YES];
    [self performSelectorOnMainThread:@selector(updateLabel)
                                           withObject:nil
                                        waitUntilDone:NO];

    }

-(void)updateLabel {
    self.myLabel.text = @"someValue";
} 
```

# java - Java 没有看到下载的文件，直到我手动更新它

> ID：11242308
> 
> 赞同：0
> 
> 时间：2012-06-28T10:07:17.697
> 
> 标签：java, eclipse, swing, file, download

在我的 Java Swing 应用程序中，我使用`RandomAccessFile`类从网络加载图片。下载完成后，应该显示缩略图，但它不显示，并抛出异常“找不到文件”。但是，当我在 Eclipse 中按下`F5`文件下载到的那些文件夹时，文件会出现在其中，之后我的应用程序可以正常工作，并显示缩略图。请帮忙，我必须做什么才能自动更新文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T10:18:42.333

听起来您在下载后没有调用 close() 。

# android - Html 5 Android PhoneGap

> ID：11242314
> 
> 赞同：0
> 
> 时间：2012-06-28T10:07:30.977
> 
> 标签：android

我正在开发一个安卓应用程序。在那，我试图在 javascript 中获取图像，但它没有加载。有人可以帮我在电话间隙android应用程序中的javascript中获取图像...

代码：

```
<img src="img/nextIcon.png" /></span>' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T11:54:16.960

为什么结束跨度标签？

基本上你的文件应该是这样的：

```
<!DOCTYPE HTML>
<html>
<head>
<title>Something</title>
<script type="text/javascript" charset="utf-8" src="cordova-1.8.1.js"></script>
<script type="text/javascript" charset="utf-8">
  function onLoad() {
  document.addEventListener("deviceready", onDeviceReady, false);
  }
  function onDeviceReady() {

  }

  </script>
</head>
<body onload="onLoad()">

<img src="img/nextIcon.png" />

</body>
</html> 
```

然后当然您应该将图像包含在一个名为 img 的文件夹中，该文件夹位于您的 www 文件夹中

# javascript - 需要在不换页的情况下禁用 html 页面上的滚动？

> ID：11242321
> 
> 赞同：1
> 
> 时间：2012-06-28T10:07:56.770
> 
> 标签：javascript, jquery, html

我有一个单击按钮的 HTML 页面，我正在显示与 div 在同一页面上制作的弹出窗口。在显示该弹出窗口时，我需要禁用父页面的滚动条。目前我正在这样做：

```
/* Function to disable parent page scrollbar */
function DisableParentPageScroll(){
    $('body,html').css('overflow-y','hidden');
}

/* Function to enable parent page scrollbar */
function EnableParentPageScroll(){
    $('body,html').removeAttr("style");
} 
```

但是当我禁用页面时，会观察到页面偏移。我怎样才能防止这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T10:33:49.860

您使用**Page Shift**的术语，它的发生是因为您正在移除滚动条，并且当​​移除滚动条时，空间变为空，然后设计文档获得更多空间并因此移动。如果你想避免这种情况，你必须`Padding or Margin`在外部包装器或`<body>`.

例如像这样

```
/* Function to disable parent page scrollbar */
function DisableParentPageScroll(){
    $('html').css('overflow', 'hidden'); // Added this for few browsers
    $('body').css({
        'overflow-y':'hidden',
        'padding-right': '20px' // Asuming the scrollbar width as 20px
     });
}

/* Function to enable parent page scrollbar */
function EnableParentPageScroll(){
    $('html').removeAttr('style'); // Added this for few browsers
    $('body').css({
        'overflow-y':'auto',
        'padding-right': '0'
     });
} 
```

# php - 更改 PHP $_SERVER['HTTP_CONNECTION'] 值

> ID：11242322
> 
> 赞同：1
> 
> 时间：2012-06-28T10:08:00.260
> 
> 标签：php, apache

我的一台服务器`$_SERVER['HTTP_CONNECTION']`设置为`close`需要`keep-alive`在我的 phpinfo() 中设置它，知道在哪里更改吗？

Apache 配置有

```
KeepAlive On
MaxKeepAliveRequests 100
KeepAliveTimeout 100 
```

难道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T10:16:06.647

`$_SERVER['HTTP_CONNECTION']`**是客户端作为请求的一部分发送**的 HTTP`Connection`标头的值。它不是服务器设置。您不能更改它，也不能强制客户端在该标头中发送另一个值。这取决于客户。

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-30T11:27:07.503

Connection 的内容：当前请求的标头，如果有的话。**

# java - Hibernate - 我可以混合命名参数和位置参数吗？

> ID：11242326
> 
> 赞同：7
> 
> 时间：2012-06-28T10:08:15.200
> 
> 标签：java, sql, hibernate

我有一个查询字符串：

```
session.createSQLQuery("SELECT C.FIRSTNAME AS firstName, C.LASTNAME as lastName FROM ADDRESSBOOK_CONTACT AS C WHERE C.ADDRESSBOOK_ID = :addressbookId AND firstName = ?"); 
```

设置我的位置参数时，查询正常运行但没有结果：

```
query.setParameter(0, "firstname1010");
query.setParameter("addressbookId", addressbook.getId()); 
```

这是错误的。如果我将位置更改为命名：

```
query.setParameter(firstname, "firstname1010"); 
```

然后我的查询返回正确的结果。

无需对我为什么这样做进行复杂的解释，我想知道是否应该支持混合这两种类型？我正在使用休眠 3.6.3.Final

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T11:54:24.767

从类级文档上`org.hibernate.Query`：

> 您不能在同一查询中混合和匹配 JDBC 样式参数和命名参数。

所以你看到的行为是完全可以预料的。

# linux - printk loglevel 在模块编程中的使用

> ID：11242328
> 
> 赞同：4
> 
> 时间：2012-06-28T10:08:17.280
> 
> 标签：linux, linux-kernel, linux-device-driver, printk

在 Rubini 的书[LDD3 中](http://lwn.net/Kernel/LDD3/)，`printk`作者说我们可以为我们的消息提供日志级别/优先级。但是我尝试了一个简单的模块程序，它具有不同的 printk 日志级别，但它显示了我在程序中写入 printk 消息的相同顺序，为什么它没有根据优先级打印？

我在这里复制了代码

```
 #include<linux/module.h>
  #include<linux/kernel.h>
  static __init int log_init(void)
     {
         printk(KERN_INFO"inside init 4 \n");
         printk(KERN_ERR"inside init 3\n");
         printk(KERN_CRIT"inside init 2\n");

         return 0;
     }
  static __exit void log_exit(void)
    {
        printk("inside exit\n");
    }
  module_init(log_init);
  module_exit(log_exit);

  MODULE_LICENSE("GPL"); 
```

我得到如下输出

```
[ 1508.721441] inside init 4 
[ 1508.721448] inside init 3
[ 1508.721454] inside init 2
root@jitesh-desktop:~/DD/debug/print# 
```

那么我如何根据优先级打印它

```
init 2
init 3
init 4 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-28T10:24:01.927

你混淆了的目的`printk`优先级的目的。它们并不像您在这里希望的那样改变执行顺序。

通过为不同的内核消息分配不同的优先级，我们可以***通过内核命令行******指定适当的值来过滤掉出现在控制台上的所需消息`loglevel`***。例如，在 linux 内核中。有许多具有`KERN_DEBUG`优先级的消息。这些只是普通的调试消息。因此，如果您启用`loglevel`最多 7 个，那么您将在控制台上看到大量消息！您的重要错误和警告将被这些正常的调试消息所掩盖。

因此，当您调试严重问题时，您可以将 指定`loglevel`为较低的值，以便在控制台上仅显示严重错误和警告。

**注意**：不管是什么`loglevel`，所有`printk`消息都存储在内核缓冲区中。优先级决定了其中哪一个进入控制台。

# c# - 换行符和空行被忽略

> ID：11242330
> 
> 赞同：-1
> 
> 时间：2012-06-28T10:08:25.240
> 
> 标签：c#, asp.net

我正在尝试使用以下代码从 txt 文件中读取一些文本：

```
 using (StreamReader sr = 
                 File.OpenText(System.IO.Path.GetFullPath("OrderEmailBody.txt")))
  {
      String input;
      while ((input = sr.ReadLine()) != null)
      {
          emailBody += input;
      }
} 
```

txt 文件有一些空白行和换行符，但此代码忽略了 txt 文件中的所有换行符和空白行。请建议如何解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T10:11:34.197

它不会忽略它们，您只是不将它们添加到您的邮件正文中。

```
emailBody += input + Environment.NewLine; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T10:11:51.473

```
 using (StreamReader sr = 
             File.OpenText(System.IO.Path.GetFullPath("OrderEmailBody.txt")))
  {
      String input;
      while ((input = sr.ReadLine()) != null)
      {
          emailBody += input;
          email += Environment.NewLine;
      }
  } 
```

# android - Android 自定义光标适配器

> ID：11242331
> 
> 赞同：1
> 
> 时间：2012-06-28T10:08:31.720
> 
> 标签：android, android-cursoradapter

我为联系人应用程序创建了一个应用程序。我的自定义光标适配器有一个问题，每次我上下滚动时都有两个文本视图和图像视图，图像在另一个列表项上重复。任何人都可以帮助我解决这个问题。提前致谢。

这是一个代码

```
@Override
public void bindView(View view, Context context, Cursor cursor) {
    if(view !=null){

        ViewHolder holder = initViewHolder(view);

        holder.displayName.setText(getUserDisplayName(cursor.getString(userid)));
        holder.groupId.setText(cursor.getString(group));

                holder.displayPhoto.setImageURI(imageUri);

    }

}

private ViewHolder initViewHolder(View view) {
    ViewHolder innerViewHolder = null;
    if(innerViewHolder == null){
        innerViewHolder = new ViewHolder();
        innerViewHolder.displayName  =(TextView) view.findViewById(R.id.name);
        innerViewHolder.groupId = (TextView) view.findViewById(R.id.groupId);
        innerViewHolder.displayPhoto = (ImageView) view.findViewById(R.id.photo);
    }
    return innerViewHolder;
}

class ViewHolder{
    TextView displayName;
    TextView groupId;
    ImageView displayPhoto;
}

@Override
public View newView(Context context, Cursor cursor, ViewGroup parent) {
    return inflater.inflate(R.layout.contact_list_item, null);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T10:40:40.340

这是 newView() 和 bindView() 的示例实现。

```
public View newView(Context context, Cursor cursor, ViewGroup parent) {
    View view = inflater.inflate(R.layout.list_item_whatever, null);
    ViewHolder holder = new ViewHolder();
    holder.displayName = (TextView) view.findViewById(R.id.name);
    holder.groupId = (TextView) view.findViewById(R.id.groupId);
    holder.displayPhoto = (ImageView) view.findViewById(R.id.photo);
    view.setTag(holder);
    return view;
}

@Override
public void bindView(View view, Context context, Cursor cursor) {
    ViewHolder holder = (ViewHolder) view.getTag();
    if (holder.displayName != null) {
        holder.displayName.setText(getUserDisplayName(cursor.getString(userid)));
    }
    if (holder.groupId != null) {
        holder.groupId.setText(cursor.getString(group));
    }
    if (holder.displayPhoto != null) {
        holder.displayPhoto.setImageURI(imageUri);
    }
} 
```

此外，对于 imageUri，您可能也希望从光标中获取它...
目前，您对所有列表项使用相同的 URI

# php - Smarty 中未知方法 register_block 的调用

> ID：11242332
> 
> 赞同：1
> 
> 时间：2012-06-28T10:08:36.163
> 
> 标签：php, smarty

我正在使用 Smarty 的最新版本，我正在尝试注册一个块，但出现以下错误：

> 致命错误：未捕获的异常 'SmartyException' 带有消息'调用未知方法'register_block'。

我刚刚在课堂上扩展了 Smarty，然后：

```
$this->register_block('myTag', 'myFunction'); 
```

为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T10:43:08.627

`register_block()`是 Smarty2 API。您正在 Smarty 3 中寻找[registerPlugin()](http://www.smarty.net/docs/en/api.register.plugin.tpl)。您还可以选择使用向后兼容层[SmartyBC](http://www.smarty.net/docs/en/bc.tpl)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T10:26:54.340

您是否扩展了 Smarty 或 Smarty_Compiler（我没有使用最新的，所以您需要检查有哪些类）

在我的旧版本 class Smarty_Compiler extends Smarty { 所以你需要将其更改为 class Smarty_Compiler extends MySmartyVersion {

你可以创建或修改一个插件来做你想做的事。

# html - Firefox rotate3d 从 -90deg 到 -180deg 错误？

> ID：11242334
> 
> 赞同：4
> 
> 时间：2012-06-28T10:08:38.870
> 
> 标签：html, firefox, css, css-transforms

我正在构建一个 3D 内容滑块 jQuery 插件，并且在 Firefox 中有一个奇怪的行为，它在相反方向上从 -90 度旋转到 -180 度到 270 度。我知道其中一些东西是实验性的，但我无法找到有关此问题的任何其他文档，如果实际上这是一个问题。

任何帮助是极大的赞赏。

问题演示（在 webkit 和 FF 中查看最新）：http: [//jsbin.com/iwokok/8/](http://jsbin.com/iwokok/8/) 插件：[https ://github.com/pmp/jquery-box-slider](https://github.com/p-m-p/jquery-box-slider)

**编辑：使用 Mozilla 记录的错误您可以在**[https://bugzilla.mozilla.org/show_bug.cgi?id=769892](https://bugzilla.mozilla.org/show_bug.cgi?id=769892) 跟踪错误报告的状态

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T09:48:53.507

如果您认为自己发现了 Firefox 的错误，那么您应该在 Firefox 错误跟踪器上提交错误：

[https://bugzilla.mozilla.org/](https://bugzilla.mozilla.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T01:52:32.430

## 编辑：下面的文字是错误的；我误读了 CSS。

您正在旋转然后平移的变换与平移然后旋转的变换之间进行插值。

当两个列表中的变换函数的类型不匹配时，根据规范，两个变换都被折叠成一个变换矩阵，并在矩阵上执行插值。

在矩阵表示中，-180deg 和 180deg 之间没有区别。因此，插值最终看起来像是从 -90 度变为 180 度，具体取决于所选择的精确插值方法（最后我检查过，3d 变换规范实际上并未定义矩阵的精确插值方法）。

通常，如果您希望通过不依赖于浮点错误和各种中间计算的变换插值获得可重现的结果，您希望在具有相同函数且顺序相同的变换列表之间进行插值。

# c# - 每个实体的 MVC3 控制器还是每个实体组的控制器？

> ID：11242335
> 
> 赞同：4
> 
> 时间：2012-06-28T10:08:44.477
> 
> 标签：c#, asp.net-mvc-3

可能是一个愚蠢的问题：

我在应用程序数据库中有许多参考表，我想从我的 MVC3 站点对其进行更新。

我可以为这些表中的每一个创建一个具有 CRUD 方法的“ReferenceController”

或者

我可以为这个引用表（实体）创建一个具有 CRUD 方法的“EntityController”。

不确定是否有一个合理的模式可以遵循？

* * *

**编辑：**

如果我确实为每个聚合创建了一个控制器，那么如何命名控制器上的方法？

```
e.g.
ReferenceController.CreateBusiness();
MyApplication/Reference/CreateBusiness
? 
```

我有多个完全不相关的“参考”实体，这是否意味着控制器中有大量方法？例如，列出、创建、阅读、更新、删除 + 确认？

您可以使控制器方法通用并具有 Create(T ...) 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T06:18:51.193

我会做这样的事情：

一个通用的 Crud 存储库，例如：

```
class CrudRepo<TEntity> where T : class{
  void All();
  void Add(TEntity entity);
  void Edit(TEntity entity);
  void Delete(TEntity entity);
} 
```

然后是一个通用的 Crud 控制器，例如

```
class CrudController<TEntity> where T : class{
    CrudRepository<TEntity> Repository;

    [HttpPost]
    ActionResult Add(TEntity entity){
      Repository.Add(entity);
    }

    // Similer for other actions
} 
```

对于特定类型的实体，只需扩展 CrudController 如下：

```
class StudentController : CrudController<Student> 
```

**编辑1：**

如果你真的有太多实体，有办法消除继承`CrudController`每个实体的需要。您可能想为此编写自定义`ControllerFactory`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T10:24:44.627

[每个聚合 root](https://stackoverflow.com/questions/1958621/whats-an-aggregate-root)应该有一个存储库。同样代表控制器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T04:24:58.593

想到两件事：

1.  使用类似 WEB API 的东西，这样您就不必为每个实体重新创建样板代码。
2.  只为顶级实体创建类似 CRUD 的控制器，即为任何客户端都无法更改的东西创建控制器的意义何在。

# php - 仅使用谷歌浏览器在 xls 文件中导出查询问题

> ID：11242340
> 
> 赞同：0
> 
> 时间：2012-06-28T10:08:59.660
> 
> 标签：php, mysql, export-to-excel, export-to-csv

我遇到的问题仅与 Google Chrome 有关，其他任何地方都可以正常工作。

我正在尝试将查询导出到 xls 文件中，但是当我尝试使用 Chrome 执行此操作时出现此错误：

Sql 错误：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“FROM hostess”附近使用正确的语法

我的代码如下：

```
<?php
$username = $_POST['username'];

$host = '';
$user = '';
$pass = '';
$db = '';
$table = 'hostess';
$file = 'Report_Hostess';

$link = mysql_connect($host, $user, $pass) or die("Can not connect." . mysql_error());
mysql_select_db($db) or die("Can not connect.");
mysql_query("SET NAMES UTF8");

$select = "SELECT ".$username." FROM hostess";

$export = mysql_query ( $select ) or die ( "Sql error : " . mysql_error( ) );

$fields = mysql_num_fields ( $export );

for ( $i = 0; $i < $fields; $i++ )
{
    $header .= mysql_field_name( $export , $i ) . "\t";
}

while( $row = mysql_fetch_row( $export ) )
{
    $line = '';
    foreach( $row as $value )
    {                                            
        if ( ( !isset( $value ) ) || ( $value == "" ) )
        {
            $value = "\t";
        }
        else
        {
            $value = str_replace( '"' , '""' , $value );
            $value = '"' . $value . '"' . "\t";
        }
        $line .= $value;
    }
    $data .= trim( $line ) . "\n";
}
$data = str_replace( "\r" , "" , $data );

if ( $data == "" )
{
    $data = "\n(0) Records Found!\n";                        
}
$filename = $file."_".date("Y-m-d_H-i",time());
header("Content-type: application/octet-stream");
header("Content-Disposition: attachment;filename=".$filename.".xls");
header("Pragma: no-cache");
header("Expires: 0");
print "$header\n$data";

exit;
?> 
```

$username 只是一个带有逗号分隔值（如 id、name、surname 等）的字符串，用于构建查询。

你能告诉我为什么我只使用谷歌浏览器就会出现这个错误吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T10:35:07.173

> 结果如下： SELECT FROM hostessSql 错误：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“FROM hostess”附近使用正确的语法

```
select [SOMETHING] FROM hostess 
```

您的 $username 设置不正确。

```
$username = $_POST['username']; 
```

你确定要邮寄吗？

建议：按照@eggyal 的建议做...

# asp.net - Viewstate 仍在页面源中出现

> ID：11242341
> 
> 赞同：0
> 
> 时间：2012-06-28T10:09:01.767
> 
> 标签：asp.net, .net-4.0, viewstate

在我的页面的页面指令中，我设置了 EnableViewState="false"。但是我仍然在我的页面源上看到一些视图状态与这个字段

```
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="/................................... 
```

如何完全删除视图状态。我正在使用.NET 4。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T11:07:51.767

您看到的是[Control State](http://msdn.microsoft.com/en-us/library/1whwt1k7.aspx)。它无法关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T10:15:17.640

尝试使用`ViewStateMode`属性，因为您正在使用.net 4

```
ViewStateMode="Disabled" 
```

检查这些链接

1.  [视图状态控制asp.net 4.0](http://www.codeproject.com/Articles/81489/ViewState-Control-in-ASP-NET-4-0)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T10:16:12.207

你不能，这是网络表单的一个功能。如果您不喜欢这样，请改用 MVC。

# c# - ToogleSwitch 没有主题颜色

> ID：11242344
> 
> 赞同：1
> 
> 时间：2012-06-28T10:09:04.593
> 
> 标签：c#, windows, windows-phone-7, xaml, windows-phone-7.1

我在 WindowsPhone 7.1 程序上插入了一个工具开关，我希望这个控件采用主题颜色（如 Windows Phone 上的“警报”程序）。

实际上，我的 toggleSwitch 是这样的：

![在此处输入图像描述](../Images/734acef4168344df36af7e2a49f525c2.png)

我会这样（就像我的主题）：

![在此处输入图像描述](../Images/ca335ccfeee851476fd1bf725e385727.png)

这是我的 XAML 代码：

```
 <toolkit:ToggleSwitch Margin="193,371,0,0" Name="toggleSwitch1" VerticalAlignment="Top" Width="190" Height="114" /> 
```

你有想法吗？我已经厌倦了几个技巧，但没有改变:(

非常感谢，

最好的祝福，

编辑 ：

我试过这个，但没有改变

```
 <toolkit:ToggleSwitch Margin="193,371,0,0" Name="toggleSwitch1" VerticalAlignment="Top" Width="190" Height="114" Header="{Binding Path=LocalisedResources.Show24HourText}">
        <toolkit:ToggleSwitch.HeaderTemplate>
            <DataTemplate>
                <ContentControl Foreground="{StaticResource PhoneForegroundBrush}" Content="{Binding}" />
            </DataTemplate>
        </toolkit:ToggleSwitch.HeaderTemplate>
    </toolkit:ToggleSwitch> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T10:54:11.370

我倾向于使用 HeaderTemplate 来确保前景是重音颜色尝试

```
<toolkit:ToggleSwitch Name="btnShow24Hrs" IsChecked="true" Click="btnShow24Hrs_Click" Header="{Binding Path=LocalisedResources.Show24HourText}">
    <toolkit:ToggleSwitch.HeaderTemplate>
        <DataTemplate>
            <ContentControl Foreground="{StaticResource PhoneForegroundBrush}" Content="{Binding}" />
        </DataTemplate>
    </toolkit:ToggleSwitch.HeaderTemplate>
</toolkit:ToggleSwitch> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T20:44:35.927

问题解决了，这是由于当前的 HTC 主题！

# git - git push to remote 会出现快进错误

> ID：11242345
> 
> 赞同：0
> 
> 时间：2012-06-28T10:09:07.130
> 
> 标签：git

我正在尝试部署到远程服务器，这是我得到的错误 -

```
git push uat release/1.1:release
To ubuntu@ubuntu-jvm:/repos/tms/uat
 ! [rejected]        release/1.1 -> release (non-fast-forward)
error: failed to push some refs to 'ubuntu@ubuntu-jvm:/repos/tms/uat'
To prevent you from losing history, non-fast-forward updates were rejected
Merge the remote changes (e.g. 'git pull') before pushing again.  See the
'Note about fast-forwards' section of 'git push --help' for details 
```

当我尝试从遥控器拉出时，这是我得到的错误：

```
git pull uat release:release/1.1
remote: Counting objects: 58, done.
remote: Compressing objects: 100% (33/33), done.
remote: Total 35 (delta 17), reused 8 (delta 0)
Unpacking objects: 100% (35/35), done.
From ubuntu-jvm:/repos/tms/uat
 ! [rejected]        release    -> release/1.1  (non-fast-forward) 
```

我在远程位置有一个裸露的 git 存储库。

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T10:17:05.803

您的两个存储库不同步。您将需要处理本地存储库上的任何合并冲突，然后再次推送。

```
git checkout release/1.1
git fetch --all
git merge origin/release
# resolve conflicts
git commit -av
git push 
```

# ios - 在加载数据之前阻止视图作为模态视图打开

> ID：11242346
> 
> 赞同：0
> 
> 时间：2012-06-28T10:09:16.280
> 
> 标签：ios, view, modal-dialog

我想知道视图是否有可能在加载某些数据之前阻止自己作为模态视图打开。

例如：

```
addTimeViewController = [[[AddTimeViewController alloc] initWithNibName:@"AddTimeViewController" bundle:nil] autorelease];
addTimeViewNavigationController = [[[UINavigationController alloc] initWithRootViewController:addTimeViewController] autorelease];

Item *item = (Item *)[_dataModel.items objectAtIndex:_currentEditCell];    
[self.navigationController presentModalViewController:addTimeViewNavigationController animated:YES];

[addTimeViewController updateTime:item]; 
```

这会将 AddTimeViewController 作为模式打开，但 AddTimeViewController 必须在显示之前加载某些数据。

有没有办法阻止它在加载数据之前在模式视图中打开自己？我想在 AddTimeViewController 本身内部执行此操作，我不想发送通知并这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T10:11:20.033

您不应该阻止 viewController 加载自身，而是在 ViewController 打开时，您可以添加一些中间视图，告诉用户您当前正在从远程源加载数据

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T10:11:52.370

`ViewController`仅当所有数据任务完成时才加载新的。

如果从服务器获取大量数据，那么您可以在后台线程中获取 -

```
Item *item = (Item *)[_dataModel.items objectAtIndex:_currentEditCell];
[self performSelectorOnMainThread:@selector(loadNewView)
                       withObject:item
                    waitUntilDone:YES];

-(void)loadNewView {
    addTimeViewController = [[[AddTimeViewController alloc] initWithNibName:@"AddTimeViewController" bundle:nil] autorelease];
    addTimeViewNavigationController = [[[UINavigationController alloc] initWithRootViewController:addTimeViewController] autorelease];

    [self.navigationController presentModalViewController:addTimeViewNavigationController animated:YES];
} 
```

# javascript - 如何修复我的 JQuery 错误？

> ID：11242349
> 
> 赞同：0
> 
> 时间：2012-06-28T10:09:38.090
> 
> 标签：javascript, jquery, jquery-ui

该脚本在此处的 jsfiddle 上：[代码](http://jsfiddle.net/abude/kmhEQ/1/)

**它目前的作用**：它是一种具有两种类型的 URL 字段 textarea 和输入的表单，它将这些字段中的文本转换为可点击的链接。

**工作原理：**如果您单击链接旁边的链接，您可以编辑链接或双击链接。**如果**您单击一次链接，它会将您带到该页面。

**上次更新：**我`.trigger('blur');`在最后一行添加了，**因为**在我这样做之前，文本区域显示的链接就像一个合并的链接，**例如**：`test.com`并且`test2.com`正在显示`test.comtest2.com`，在我添加了最后一次更新之后，textera 的拆分也开始了页面的负载不仅在 textarea 的编辑上（它在没有上次更新的情况下工作，但只有当您编辑 textarea 并在链接之间放置一个空格时，我希望它能够在页面负载上工作，因为 textarea 格式是已作为一个链接前行发送）。

**我的问题：**在我进行最后一次更新后，双击搞砸了，它应该只能编辑链接，除非单击一次，否则不会转到该页面，**但**现在它编辑它并在一秒钟内完成也到那个页面。**我想要**双击只是为了编辑而不去那个页面。并且只需单击一下即可。

提前非常感谢！

代码也在这里：

`$('.a0 a').click(function(){`

```
var href = $(this).attr('href');

// Redirect only after 500 milliseconds
if (!$(this).data('timer')) {
   $(this).data('timer', setTimeout(function () {
      window.open(href, '_blank')
   }, 500));
}
return false; // Prevent default action (redirecting)});

$('.a0').dblclick(function(){
clearTimeout($(this).find('a').data('timer'));
$(this).find('a').data('timer', null);

$(this).parent().find('input,textarea').val($(this).find('a').text()).show().focus();
$(this).hide();})

$('.a0').click(function(){
       $(this).parent().find('input,textarea').val($.map($(this).find('a'),function(el){return $(el).text();}).join(" ")).show().focus();
$(this).hide();})

$('#url0, #url1,#url4').each(
function(index, element){
    $(element).blur(function(){
            var vals = this.value.split(/\s+/),
    $container = $(this).hide().prev().show().empty();

$.each(vals, function(i, val) {
    if (i > 0) $("<span><br /></span>").appendTo($container);
    $("<a />").html(val).attr('href',/^https?:\/\//.test(val) ? val : 'http://' + val).appendTo($container);;
});  })
}).trigger('blur'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T10:26:59.697

双击总是先于以下事件链：

mousedown, mouseup, *click* , mousedown, mouseup, *click* , **dblclick**

您可以让您的点击事件等待并检查之后是否发生了双击事件。[setTimeout](https://developer.mozilla.org/en/DOM/window.setTimeout)是你的朋友。请务必从`event`传递给您的处理程序的对象中复制您需要的任何数据。该对象在处理程序完成后被销毁 - 这是*在*您的延迟处理程序被调用之前。

* * *

您可以手动调度双击事件以防止单击事件在它们之前执行。[见小提琴](http://jsfiddle.net/BZ3YP/)

```
// ms to wait for a doubleclick
var doubleClickThreshold = 300;
// timeout container
var clickTimeout;
$('#test').on('click', function(e) {
    var that = this;
    var event;

    if (clickTimeout) {
        try {
            clearTimeout(clickTimeout);
        } catch(x) {};

        clickTimeout = null;
        handleDoubleClick.call(that, e);
        return;
    }

    // the original event object is destroyed after the handler finished
    // so we'll just copy over the data we might need. Skip this, if you
    // don't access the event object at all.
    event = $.extend(true, {}, e);
    // delay click event
    clickTimeout = setTimeout(function() {
        clickTimeout = null;
        handleClick.call(that, event);
    }, doubleClickThreshold);

});

function handleClick(e) {
    // Note that you cannot use event.stopPropagation(); et al,
    // they wouldn't have any effect, since the actual event handler
    // has already returned
    console.log("click", this, e);
    alert("click");
}

function handleDoubleClick(e) {
    // this handler executes synchronously with the actual event handler,
    // so event.stopPropagation(); et al can be used!
    console.log("doubleclick", this, e);
    alert("doubleclick");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T10:37:16.797

jsfiddle 出于某种原因拒绝加载我的连接，所以看不到代码。根据您的解释，我建议您查看[event.preventDefault](http://api.jquery.com/event.preventDefault/)以增加对点击事件应该发生的事情的更多控制。这可以与@rodneyrehm 的回答结合使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T22:51:43.803

参考我之前的**[回答](https://stackoverflow.com/a/11253961/500725)**。

为了您的快速参考，我在此处粘贴了我的答案

```
$('.a0 a').click(function(){
    var href = $(this).attr('href');

    // Redirect only after 500 milliseconds
    if (!$(this).data('timer')) {
        $(this).data('timer', setTimeout(function() {
            window.open(href, '_blank')
        }, 500));
    }
    return false; // Prevent default action (redirecting)
});

$('.a0').dblclick(function(){
    var txt = document.createElement('div');
    $.each($(this).find('a'), function(i, val) {
        clearTimeout($(val).data('timer'));
        $(val).data('timer', null);
        $(txt).append($(val).text()); 
        $("<br>").appendTo(txt);
    });
    var content = $(this).parent().find('input,textarea');
    var text = "";
    $.each($(txt).html().split("<br>"), function(i, val) {
        if (val != "")
            text += val + "\n"; 
    });
    $(content).html(text);
    $(this).hide();
    $(content).show().focus();
})

$('#url0, #url1, #url4').each(function(index, element) {
    $(element).blur(function(){
        if ($(this).val().length == 0)
            $(this).show();
        else
        {
            var ele = this;
            var lines = $(ele).val().split("\n");
            var divEle = $(ele).hide().prev().show().empty();
            $.each(lines, function(i, val) {
                $("<a />").html(val).attr({
                    'href': val, 
                    'target': '_blank'}).appendTo(divEle);
                $("<br/>").appendTo(divEle);
            });
        }
    });
});
​ 
```

# image-processing - 对 HSI 和 HSL 颜色空间感到困惑

> ID：11242350
> 
> 赞同：1
> 
> 时间：2012-06-28T10:09:42.963
> 
> 标签：image-processing, computer-vision

我正在阅读一本关于图像处理算法和对比度算法的书，它说我可以先使用 RGB->HSL 或 RGB->HSI，然后在亮度分量上对灰度图像应用对比度技术。

然后它只给出这个公式，而不是其他颜色转换公式：

L(x,y) = 0.299*R(x,y) + 0.587*G(x,y) + 0.114*B(x,y)

这个公式既不适用于 HSL 中的 L，也不适用于 HSI 中的 I，这让我感到困惑。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T15:16:46.863

这是`luma`第四个项目符号中提到的值：[http ://en.wikipedia.org/wiki/HSL_and_HSV#Lightness](http://en.wikipedia.org/wiki/HSL_and_HSV#Lightness)

# c++-cli - 如何从 dll 中导出原生类（即 protobuf 生成的类）

> ID：11242354
> 
> 赞同：0
> 
> 时间：2012-06-28T10:09:58.013
> 
> 标签：c++-cli, native, dllimport, mixed-mode

我正在尝试在 C++/CLI 中编写一个包装 dll 以在 c# 中使用一些本机类。

为了测试，我创建了另一个使用 dll 的 C++/CLI 项目。

我的问题是，我想在测试项目的 dll 项目中使用本机类之一，但链接器抱怨它没有找到此类成员的符号。我想这是因为未定义本机类`ref public`。由于本机类代码是由 Google Protobuffers 编译器自动生成的，因此我无法添加`ref public`它。

不要误会我，我不想在以后的c#项目中使用这个native class但是我想在Test项目中直接访问它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T14:07:37.227

我认为您必须遵循典型的本机 C++ 方式来执行此操作：从 dll 导出类，从测试项目链接到 dll，然后在需要使用该类的测试项目中#include 头文件。

我认为没有一种“托管方式”来引用和使用本机类（如果我错了，希望其他人会纠正我）。

# php - 如何知道用户在joomla中提交了哪个表单

> ID：11242357
> 
> 赞同：1
> 
> 时间：2012-06-28T10:10:14.167
> 
> 标签：php, forms, joomla

我们如何知道用户在登录后提交了哪个表单。即，在登录用户提交表单之后，我们如何在数据库中存储用户在当前会话中提交的表单的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T13:20:05.327

Older post but wanted to update. What you should be using is this in your form:

```
<?php echo JHTML::_( 'form.token' ); ?> 
```

Then process with:

```
JRequest::checkToken() or die( 'Invalid Token' ); 
```

See this **[Resource](http://docs.joomla.org/How_to_add_CSRF_anti-spoofing_to_forms)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T10:15:32.367

在您的表单字段中创建隐藏元素以传递用户信息并存储它。

```
<input type="hidden" type="text" value="<?php echo USER_ID; ?>" name="user_loggedin_ID" /> 
```

现在，无论您在哪里保存表单字段，只需添加另一个字段来存储此值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T10:26:00.413

隐藏表单不安全，如果我将其更改为非数字或任何我想要的值怎么办？您可以使用它`$session =& JFactory::getSession();`来获取当前会话。并将其存储到数据库中并与当前会话进行比较。阅读此[http://docs.joomla.org/Accessing_the_database_using_JDatabase](http://docs.joomla.org/Accessing_the_database_using_JDatabase)以了解在 joomla 中处理数据库。

# android - onDestroy 中的 NullPointer 异常

> ID：11242358
> 
> 赞同：0
> 
> 时间：2012-06-28T10:10:14.857
> 
> 标签：android, nullpointerexception

我的函数中有这个函数`onDestroy`，它导致崩溃：

```
@Override
protected void onDestroy() {
    Server.setPresence(false, CONSTANTS.USER.userId);
    super.onDestroy();
} 
```

* * *

**服务器.Java**

```
private static final String TAG = "Cove Server";
private static final String PATH = "http://10.0.0.2:8001/data_connection";
private static HttpResponse response = null;
private static StringEntity se = null;
private static final int TIMEOUT = 30000;
private static HttpParams hParams = new BasicHttpParams();
private static HttpClient client;
private static HttpPost post = null;
public static String actionKey = null;

private static JSONObject sendRequest(JSONObject req) {
    try {
        HttpConnectionParams.setConnectionTimeout(hParams, TIMEOUT);
        client = new DefaultHttpClient(hParams);
        actionKey = req.getString("actionKey");
        se = new StringEntity(req.toString());
        se.setContentEncoding(new BasicHeader(HTTP.CONTENT_ENCODING,
                "application/json"));
        se.setContentType(new BasicHeader(HTTP.CONTENT_TYPE,
                "application/json"));
        post = new HttpPost(PATH);
        post.setEntity(se);

        Log.d(TAG, "http request is being sent");
        response = client.execute(post);
        Log.d(TAG, "http request was sent");

        if (response != null
                && response.getStatusLine().getStatusCode() == HttpStatus.SC_OK) {
            InputStream in = response.getEntity().getContent();
            String a = convertFromInputStream(in); // CALLS A FUNCTION THAT PARSES THE RESPONSE TO String
            in.close();
            return new JSONObject(a);
        }

    } catch (UnsupportedEncodingException e) {
        Log.d(TAG, "encoding request to String entity faild!");
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        Log.d(TAG, "executing the http POST didn't work");
        e.printStackTrace();
    } catch (IOException e) {
        Log.d(TAG, "executing the http POST didn't work");
        e.printStackTrace();
    } catch (JSONException e) {
        Log.d(TAG, "no ActionKey");
        e.printStackTrace();
    }
    return null;
}

public static JSONObject setPresence(boolean isActive, String userId) {
    JSONObject request = new JSONObject();
    try {
        request.put("actionKey", (isActive) ? "UserPresenceActive"
                : "UserPresenceInactive");
        request.put("userId", userId);
        return sendRequest(request);
    } catch (JSONException e) {
        e.printStackTrace();
    }
    return null;
} 
```

**日志猫**

```
06-28 12:59:11.970: E/AndroidRuntime(19806): FATAL EXCEPTION: main
06-28 12:59:11.970: E/AndroidRuntime(19806): java.lang.RuntimeException: Unable to destroy activity {com.yishai/com.thepoosh.MyActivity}: java.lang.NullPointerException
06-28 12:59:11.970: E/AndroidRuntime(19806):    at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:3124)
06-28 12:59:11.970: E/AndroidRuntime(19806):    at android.app.ActivityThread.handleDestroyActivity(ActivityThread.java:3142)
06-28 12:59:11.970: E/AndroidRuntime(19806):    at android.app.ActivityThread.access$1200(ActivityThread.java:127)
06-28 12:59:11.970: E/AndroidRuntime(19806):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1192)
06-28 12:59:11.970: E/AndroidRuntime(19806):    at android.os.Handler.dispatchMessage(Handler.java:99)
06-28 12:59:11.970: E/AndroidRuntime(19806):    at android.os.Looper.loop(Looper.java:137)
06-28 12:59:11.970: E/AndroidRuntime(19806):    at android.app.ActivityThread.main(ActivityThread.java:4507)
06-28 12:59:11.970: E/AndroidRuntime(19806):    at java.lang.reflect.Method.invokeNative(Native Method)
06-28 12:59:11.970: E/AndroidRuntime(19806):    at java.lang.reflect.Method.invoke(Method.java:511)
06-28 12:59:11.970: E/AndroidRuntime(19806):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
06-28 12:59:11.970: E/AndroidRuntime(19806):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
06-28 12:59:11.970: E/AndroidRuntime(19806):    at dalvik.system.NativeStart.main(Native Method)
06-28 12:59:11.970: E/AndroidRuntime(19806): Caused by: java.lang.NullPointerException
06-28 12:59:11.970: E/AndroidRuntime(19806):    at com.thepoosh.MyActivity.onDestroy(MyActivity.java:340)
06-28 12:59:11.970: E/AndroidRuntime(19806):    at android.app.Activity.performDestroy(Activity.java:4629)
06-28 12:59:11.970: E/AndroidRuntime(19806):    at android.app.Instrumentation.callActivityOnDestroy(Instrumentation.java:1082)
06-28 12:59:11.970: E/AndroidRuntime(19806):    at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:3111)
06-28 12:59:11.970: E/AndroidRuntime(19806):    ... 11 more 
```

我怀疑由于服务器没有发回响应并且`Server.setPresence()`没有返回，因此应用程序进入 ANR。

那是对的吗？我应该怎么做才能解决这个问题？崩溃的原因是否不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T10:17:34.877

```
06-28 12:59:11.970: E/AndroidRuntime(19806): Caused by: java.lang.NullPointerException
06-28 12:59:11.970: E/AndroidRuntime(19806):    at com.thepoosh.MyActivity.onDestroy(MyActivity.java:340)
06-28 12:59:11.970: E/AndroidRuntime(19806):    at android.app.Activity.performDestroy(Activity.java:4629) 
```

看起来`onDestroy is last function is stacktrace`所以调用还没有去 Server.setPresence .. 所以它看起来 可能在该行只有 null `USER`。`CONSTANTS.USER.userId`所以检查一下。

```
@Override
protected void onDestroy() {
    if(null==CONSTANTS.USER){
    Server.setPresence(false, CONSTANTS.USER.userId);
    }else{
         Toast.makeText(this,"is null",Toast.LENGHT_LONG).show();
      }
    super.onDestroy();
} 
```

# java - XPath 处理空节点

> ID：11242361
> 
> 赞同：0
> 
> 时间：2012-06-28T10:10:24.077
> 
> 标签：java, xml, xpath

如果我得到这个 XML（第一个标签是空的）

```
<messages>
    <message>                                                                                             
            <name>Kiro</name>                                                                       
            <acc></acc>                                                                     
            <date>20120506</date>                                                                       
            <template>TMPL_ACC_UP</template>                                                                    
        </message>                                                              
        <message>                                                                       
            <name>Third</name>                                                                  
            <acc>555</acc>                                                                  
            <date>20120507</date>                                                                       
            <template>TMPL_ACC_UP</template>                                                                
        </message>                                                              
</messages> 
```

现在我使用这个 XPath 表达式获取所有帐户：“//message/acc/text()”，并获取 1 的节点列表（不包括空节点）。我想为空标签 ['555',''] 获取空字符串。我怎样才能做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T12:49:50.680

**在 XPath 2.0 中，可以使用这样的单行**：

```
/*/message/acc/string() 
```

**但是，这不能作为对单个 XPath 1.0 表达式求值的结果产生**。

如果必须使用 XPath 1.0，解决方案是选择所有`/*/message/acc`元素，然后在托管 XPath 的 PL 中，输出每个选定元素的*字符串值*。

**例如，这个 XSLT 1.0 转换**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>

 <xsl:template match="/">
  <xsl:text>[</xsl:text><xsl:apply-templates/><xsl:text>]</xsl:text>
 </xsl:template>
 <xsl:template match="acc">
    <xsl:if test="preceding::acc">, </xsl:if>
   <xsl:text>'</xsl:text><xsl:value-of select="."/><xsl:text>'</xsl:text>
 </xsl:template>
 <xsl:template match="text()"/>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<messages>
    <message>
            <name>Kiro</name>
            <acc></acc>
            <date>20120506</date>
            <template>TMPL_ACC_UP</template>
        </message>
        <message>
            <name>Third</name>
            <acc>555</acc>
            <date>20120507</date>
            <template>TMPL_ACC_UP</template>
        </message>
</messages> 
```

**产生想要的正确结果：**

```
['', '555'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T10:18:10.437

我会遍历节点并将它们的文本提取为值

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:template match="/">
  <html>
  <body>[
      <xsl:for-each select="//message/acc">
       '<xsl:value-of select="text()"/>',
      </xsl:for-each>]
  </body>
  </html>
</xsl:template>
</xsl:stylesheet> 
```

结果：`[ '', '555', ]`

# c# - errorProvider1 不包含定义和扩展方法

> ID：11242364
> 
> 赞同：0
> 
> 时间：2012-06-28T10:10:27.897
> 
> 标签：c#, .net, error-handling

我刚开始学习 C# 并开始使用 Windows Forms 项目。当我尝试验证文本字段时，我收到此错误：

> 错误 1“Downloader.SDownloader”不包含“errorProvider1”的定义，并且找不到接受“Downloader.SDownloader”类型的第一个参数的扩展方法“errorProvider1”（您是否缺少 using 指令或程序集引用？） C:\Users\Bad_Wolf\documents\visual studio 2010\Projects\Register\Register\Form1.cs 77 22 注册

有我的源代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace Downloader {
    public partial class SDownloader : Form {
        public SDownloader() {
            InitializeComponent();
        }
        private void fname_MouseClick(object sender, MouseEventArgs e) {
           fname.Text = "";
        }
        private void fname_TextChanged(object sender, EventArgs e) {

        }
        private void lname_MouseClick(object sender, MouseEventArgs e) {
            lname.Text = "";
        }
        private void lname_TextChanged(object sender, EventArgs e) {

        }
        private void username_MouseClick(object sender, MouseEventArgs e) {
            username.Text = "";
        }
        private void email_MouseClick(object sender, MouseEventArgs e) {
            email.Text = "";
        }
        private void password_MouseClick(object sender, MouseEventArgs e) {
            password.Text = "";
        }
        private void password2_MouseClick(object sender, MouseEventArgs e) {
            password2.Text = "";
        }
        private void password2_TextChanged(object sender, EventArgs e) {

        }
        private void register_Click(object sender, EventArgs e) {

        }
        private void fname_Validating(object sender, CancelEventArgs e) {
            string errorMsg;
            if (fname.Text.Trim().Length < 4) {
                e.Cancel = true;
                fname.Select(0, fname.Text.Length);
                this.errorProvider1.SetError(fname, errorMsg);
            }
        }
        private void fname_Validated(object sender, EventArgs e) {

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T10:30:00.473

您收到此错误的原因是您没有在设计视图中将[ErrorProvider](http://msdn.microsoft.com/en-us/library/system.windows.forms.errorprovider.aspx)添加到表单中。添加 ErrorProvider 并为其命名`errorProvider1`

![在此处输入图像描述](../Images/0a9952a55d1c8a943f8dea34dbc77728.png)

# html - 我想知道这种制作表格元素的方式是好是坏？

> ID：11242367
> 
> 赞同：0
> 
> 时间：2012-06-28T10:10:47.973
> 
> 标签：html, html-table

我有一个条件，如图所示：

![在此处输入图像描述](../Images/d0e8809e1e2212362a296100a24a72a3.png)

它只允许使用非常简单的 HTML TABLE 元素来解决。

我想知道我的这个解决方案已经是最好的了吗？

[http://jsbin.com/exazif/](http://jsbin.com/exazif/)

 `查看代码：http: [//jsbin.com/exazif/edit#javascript,html](http://jsbin.com/exazif/edit#javascript,html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T10:21:59.703

如果你必须使用 a `<table>`，这个方法很好。但是你不应该写`colspan="250"`. Colspan 不是为此而设计的。如果您不必使用 a`<table>`您可以使用浮动 div。

老实说，关于什么更好：表格或 div 存在很大的争论。[在此处阅读更多相关信息。](http://coding.smashingmagazine.com/2009/04/08/from-table-hell-to-div-hell/)

这是关于基本表格的非常[好的教程。](http://www.w3schools.com/html/html_tables.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-04T13:06:55.633

你应该给你的 td 标签 id，然后使用 css 而不是过时的 html 属性。

css

```
table {
  border: none;
  width: 800px;
  border-collapse: collapse; /* instead of cellspacing */
}
td {
  padding: 0;
}
td#first_first {
  background-color: 'red';
  width: 400px;
}
td#first_second {
  background-color: 'blue';
  width: 400px;
} 
```

在你的 html 中

```
<table>
 <tr>
  <td id="first_first">400x200</td>
  <td id="first_second">400x200</td>
 </tr>
...
</table> 
```

Colspan 表示一个 td 单元格扩展了多少列。所以在你的代码中它没有正确使用。[https://developer.mozilla.org/en-US/docs/Web/HTML/Element/td](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/td)`

# powershell - 测试可执行文件是否在 PowerShell 的路径中

> ID：11242368
> 
> 赞同：69
> 
> 时间：2012-06-28T10:10:49.463
> 
> 标签：powershell

在我的脚本中，我将要运行一个命令

```
pandoc -Ss readme.txt -o readme.html 
```

但我不确定是否`pandoc`已安装。所以我想做（伪代码）

```
if (pandoc in the path)
{
    pandoc -Ss readme.txt -o readme.html
} 
```

我怎样才能真正做到这一点？

* * *

## 回答 #1

> 赞同：127
> 
> 时间：2012-06-28T10:15:58.547

您可以通过[Get-Command (gcm)进行测试](http://ss64.com/ps/get-command.html)

```
if (Get-Command "pandoc.exe" -ErrorAction SilentlyContinue) 
{ 
   pandoc -Ss readme.txt -o readme.html
} 
```

如果您想测试路径中不存在命令，例如显示错误消息或下载可执行文件（想想 NuGet）：

```
if ((Get-Command "pandoc.exe" -ErrorAction SilentlyContinue) -eq $null) 
{ 
   Write-Host "Unable to find pandoc.exe in your PATH"
} 
```

尝试

```
(Get-Help gcm).description 
```

在 PowerShell 会话中获取有关 Get-Command 的信息。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-02-01T15:52:21.303

这是大卫布拉班特的回答精神的一个功能，它检查最小版本号。

```
Function Ensure-ExecutableExists
{
    Param
    (
        [Parameter(Mandatory = $True)]
        [string]
        $Executable,

        [string]
        $MinimumVersion = ""
    )

    $CurrentVersion = (Get-Command -Name $Executable -ErrorAction Stop).Version

    If ($MinimumVersion)
    {
        $RequiredVersion = [version]$MinimumVersion

        If ($CurrentVersion -lt $RequiredVersion)
        {
            Throw "$($Executable) version $($CurrentVersion) does not meet requirements"
        }
    }
} 
```

这允许您执行以下操作：

```
Ensure-ExecutableExists -Executable pscp -MinimumVersion "0.62.0.0" 
```

如果满足要求或抛出错误，它什么也不做。

# java - (J2me) 流作为缓冲区？

> ID：11242372
> 
> 赞同：1
> 
> 时间：2012-06-28T10:11:17.433
> 
> 标签：java, java-me, buffer, outputstream

在这里，我有一个 j2me 应用程序，我需要从输出流传输或保存实时数据。

如果我使用一个线程将数据写入流，并且在写入某些无字节后，另一个线程从中获取一个字节数组，保存或传输它并将流重置为零会发生什么。

即对其调用reset ..这实际上等于使用流作为固定大小的缓冲区..

这里的限制是我可能无法为此目的使用 byteBuffer 对象

这会使流无效，因为第一个线程仍在连接它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T12:55:06.367

我假设您将使用`java.io.ByteArrayOutputStream`class，它是`CLDC 1.0`J2ME 标准的一部分。

CLDC 1.0 没有说明`ByteArrayOutputStream`.

但是如果你看一下实现`ByteArrayOutputStream`，所有需要的方法似乎是`synchronized`：

```
public synchronized byte toByteArray()[] { ... }
public synchronized void reset() { ... }
public synchronized void write(byte b[], int off, int len) { ... } 
```

如果您可以访问 J2ME 类的源代码。你可以仔细检查一下。

如果方法是同步的，那么按照您的计划使用流应该是安全的。

# jquery - 使用 Jquery 和 Tapestry 动态添加文本字段

> ID：11242374
> 
> 赞同：0
> 
> 时间：2012-06-28T10:11:25.057
> 
> 标签：jquery, html, textfield, tapestry

我需要在 .tml 文件中动态显示 10 个文本字段，以便用户可以删除或添加所需的数字。我找到了一个带有 Jquery 和 html 表单的示例，问题是我没有设法转换 Tapestry 中的代码。这是[教程](http://www.mkyong.com/jquery/how-to-add-remove-textbox-dynamically-with-jquery/) 你能告诉我是否可以将它与挂毯一起使用，如果可以，请帮助我修改代码

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T12:08:46.223

Tapestry 5 有一个很好的组件，称为[AjaxFormLoop](http://tapestry.apache.org/current/apidocs/org/apache/tapestry5/corelib/components/AjaxFormLoop.html)。可以在[JumpStart 示例](http://jumpstart.doublenegative.com.au/jumpstart/examples/ajax/formloop1)页面上找到有关如何使用它的示例。

我相信您可以通过使用[tapestry5-jquery](https://github.com/got5/tapestry5-jquery)模块使jquery 代码正常工作。尽管没有任何代码或错误消息，但无法帮助您解决特定问题。

# c# - 创建一个加密的密码并将其存储在 sqlite 中以用于身份验证

> ID：11242375
> 
> 赞同：1
> 
> 时间：2012-06-28T10:11:33.520
> 
> 标签：c#, winforms, saltedhash

我有一个带有登录表单的 WinForms 应用程序，我想将加密的用户名和密码存储在 SQLite 数据库中。我看到我可以使用salt和hash，但是我不知道如何对代码中的密码进行加密，并在我们进行身份验证时进行比较。

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T11:25:03.230

您将需要获取用户名和密码（来自屏蔽文本框的密码，最好使用第二个框进行确认）对其进行加盐，并从密码创建哈希，然后将明文用户名和密码的加盐哈希插入到数据库。然后，您可以通过将数据库存储的版本与用户输入的加盐（相同的盐！）哈希值进行比较来验证用户密码。

请注意，每个用户都应该有自己的盐，您在创建帐户时为该用户随机生成盐。（这比黑客可以发现的全局盐值更安全）。

看看[这篇文章](http://msdn.microsoft.com/en-us/magazine/cc164107.aspx)。它几乎涵盖了所有基础，但**不要**按照文章中的建议使用 SHA-1。您需要一个计算量很大的慢速散列函数，例如 BCrypt 或 PBKDF2（包含在 .NET 中）。请参阅[“什么是密码的良好散列函数”](https://crypto.stackexchange.com/questions/24/what-makes-a-hash-function-good-for-password-hashing)。（感谢@CodeInChaos 指出这一点）。

您可以使用System.Security.Cryptography 中的[Rfc2898DeriveBytes](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rfc2898derivebytes.aspx)来创建密码的加盐哈希，PBKDF2 样式。

```
byte[] salt = Guid.NewGuid().ToByteArray[];
Rfc2898DeriveBytes saltedHash = new Rfc2898DeriveBytes("P@$$w0rd", salt, 1000); 
```

一个好的经验法则是迭代次数应该使散列操作花费大约一秒钟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T11:37:45.933

您需要将散列密码和盐存储在数据库中。为每个用户使用**随机盐**（GUID 应该没问题）您可以使用以下内容散列您的密码：

记得添加`using System.Security.Cryptography;`命名空间。

```
 public static string ComputeHash(string passwordPlainText, string saltString)
    {
        // Convert plain text into a byte array.
        byte[] saltBytes = Encoding.UTF8.GetBytes(saltString);

        // Convert plain text into a byte array.
        byte[] plainTextBytes = Encoding.UTF8.GetBytes(plainText);

        // Allocate array, which will hold plain text and salt.
        byte[] plainTextWithSaltBytes =
                new byte[plainTextBytes.Length + saltBytes.Length];

        // Copy plain text bytes into resulting array.
        for (int i = 0; i < plainTextBytes.Length; i++)
            plainTextWithSaltBytes[i] = plainTextBytes[i];

        // Append salt bytes to the resulting array.
        for (int i = 0; i < saltBytes.Length; i++)
            plainTextWithSaltBytes[plainTextBytes.Length + i] = saltBytes[i];

        // Because we support multiple hashing algorithms, we must define
        // hash object as a common (abstract) base class. We will specify the
        // actual hashing algorithm class later during object creation.
        HashAlgorithm hash;

        hash = new SHA256Managed();

        // Compute hash value of our plain text with appended salt.
        byte[] hashBytes = hash.ComputeHash(plainTextWithSaltBytes);

        // Create array which will hold hash and original salt bytes.
        byte[] hashWithSaltBytes = new byte[hashBytes.Length +
                                            saltBytes.Length];

        // Copy hash bytes into resulting array.
        for (int i = 0; i < hashBytes.Length; i++)
            hashWithSaltBytes[i] = hashBytes[i];

        // Append salt bytes to the result.
        for (int i = 0; i < saltBytes.Length; i++)
            hashWithSaltBytes[hashBytes.Length + i] = saltBytes[i];

        // Convert result into a base64-encoded string.
        string hashValue = Convert.ToBase64String(hashWithSaltBytes);

        // Return the result.
        return hashValue;
    } 
```

您可以更改`SHA256Managed`任何其他支持的哈希算法。

**更新**：我认为您需要先了解这个概念。我将尝试解释它：

在登录之前，您需要在数据库中创建用户。要创建它们，您需要用户名和密码。

1.  例如，生成一个随机 SALT `Guid.NewGuid().ToString();`。
2.  现在你将这个盐添加到你的密码中并对结果进行哈希处理，这意味着增加你的密码对暴力攻击的安全性。（这一步可以用`string ComputeHash(string passwordPlainText, string saltString)`我之前贴的函数来完成。
3.  将用户名（由用户提供）、salt（guid）和密码（computeHash 的结果）保存在数据库中。
4.  使用带有用户数据的表登录！

# c# - 对数据表进行排序会影响参考数据表

> ID：11242383
> 
> 赞同：1
> 
> 时间：2012-06-28T10:11:58.067
> 
> 标签：c#, datatable

我有一种类似于下面写的方法（这只是我在 C# 中工作的伪代码）：

```
function GenerateChart(DataTable dt)
{
    DataTable dtChartTable = dt;
    dtChartTable.DefaultView.Sort = "SomeColumnName";
    //remaining functionality
} 
```

上面的代码所做的是它还对 dt 中的记录进行排序。我不明白它为什么这样做。就像一个注释：这个函数是从两个不同的地方调用的。在一个地方我发送一个 Datatable 对象，而在另一个地方，Datatable 直接从存储在 session 中的那个引用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T10:16:43.397

这是正确的。您正在将 dtChartTable 变量设置为由 dt 变量表示的相同内存。因此，对 dtChartTable 进行排序会影响第二个使用的相同 DefaultView 属性。

如果您不想要这种行为，您可以使用创建 dt 的副本

```
DataTable dtChartTable = dt.Copy(); 
```

但这很昂贵，因为这样每个数据行都是重复的。
另一种可能性是创建一个新的 DataView

```
DataView view = new DataView(dt);
view.Sort = "SomeColumnName";  
...... 
```

这不会影响原始的 dt.DefaultView，您可以从这个新的 DataView 处理您的 datarowview

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T10:19:07.440

当你这样做

```
DataTable dtChartTable = dt; 
```

它会创建一个新副本，但两者都引用内存中的相同位置，因为 Datatable 是引用类型，因此您在一个中的更改会反映在另一个中。

而是做

```
 DataTable dtChartTable = dt.Copy(); 
```

这会复制并引用内存中的不同位置。一个方面的变化不会反映在另一个方面。

# python - 存储大量模拟配置、运行值和最终结果的首选（或推荐）方式

> ID：11242387
> 
> 赞同：7
> 
> 时间：2012-06-28T10:12:04.900
> 
> 标签：python, database, design-patterns, simulation

我正在使用一些网络模拟器。在对其进行一些扩展之后，我需要进行很多不同的模拟和测试。我需要记录：

*   模拟场景配置
*   每个设备每时间单位 t 的某些参数值（例如缓冲区大小、信号质量、位置）
*   从这些记录值计算的最终结果

在执行模拟后需要第二个数据来执行一些可视化（简单的动画，随着时间的推移显示一些统计数据）。

我正在使用 Python 和 matplotlib 等来对数据进行后处理并编写适当的应用程序（现在考虑 pyQt 或 Django，但这不是问题的主题）。现在我想知道存储这些数据的最佳方式是什么？

我的第一个猜测是使用 XML 文件，但是 XML 语法的开销可能太大（我的意思是，文件可以增长到非常大的大小，尤其是对于数据类型的第二部分）。所以我试图设计一个数据库......但这在我看来也不是正确的方法......也许两者兼而有之？

我试图在谷歌中找到一些线索，但没有发现什么特别之处。您是否曾经需要存储此类数据？你是怎么做到的？是否有任何“设计模式”？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-30T07:55:55.130

**单独的关注点：**

除了思考用于存储数据的技术（DBMS、CSV，或者可能是[科学数据的特定格式之一](http://mariovalle.name/sdm/scientific-data-management.html)）之外，请注意您需要管理**三种截然不同的数据**：

*   *模拟场景配置：*这些（通常）相当小，但它们需要易于编辑，易于重复使用，并且应该允许重现模拟运行。在这里，**文本或代码文件**似乎是一个不错的选择（这些也应该是版本控制的）。

*   *原始模拟数据*：如果您关心模拟性能，那么您应该非常小心，因为如果实施不当，在运行期间写入 3 GB 数据可能会花费大量时间。一种方法是**为此目的使用现有的文件格式**（见下文），看看它们是否适合您。如果没有，您仍然可以使用 DBMS。此外，包含生成数据的场景的描述（或至少是参考）通常是一个好主意，因为这有助于您管理结果。

*   *后处理数据：*如何存储这主要**取决于后处理工具**。例如，如果您的可视化应用程序已经有一个类结构，您可以定义一种文件格式，以便于读取所需的数据。

**寻找现有的解决方案：**

您面临的问题（*如何管理模拟数据？*）是根本性的，有许多潜在的解决方案，每个解决方案都有一定的权衡。当您从事网络模拟工作时，**请查看您社区中使用的其他工具提供了哪些功能**。可能是他们的开发人员遇到了您甚至没有预料到的问题（关于可重复性等），并且已经找到了一个好的解决方案。例如，您可以查看**[OMNeT++](http://omnetpp.org)**如何处理模拟输出：模拟配置在单独的文件中定义，结果被写入`vec`并`sca`文件（取决于它们的性质）。据我了解您对分层数据的问题，这也是受支持的（向量获得唯一的 ID 并与某些模型实体的属性相关联）。其他工具已经可以处理这些文件格式，例如[将](http://www.omnetpp.org/doc/omnetpp/manual/usman.html#sec411)它们转换为其他格式，如 CSV/MATLAB 文件，因此您甚至可以考虑创建相同格式的文件（[在此处](http://www.omnetpp.org/doc/omnetpp/manual/usman.html#sec542)记录）并**使用现有工具/转换器进行后处理。**

许多其他模拟工具将具有类似的功能，因此请查看最适合您的工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T11:57:44.060

听起来您需要为每种情况记录或多或少相同类型的信息，所以关系数据库听起来很合适——为什么您认为它“不是正确的方法”？

如果您的数据适合 CSV 文件的集合，那么您就已经可以使用关系数据库了！只需存储在数据库表中，您就可以支持外键和查询。如果您继续实施面向对象的解决方案，您可以从数据库中初始化您的对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T12:15:55.427

如果您的数据结构众所周知且稳定，并且您需要一些 SQL 查询/计算功能，那么像 SQLite 这样的轻量级关系数据库可能是可行的方法（只要确保它可以处理您最终的 3+GB 数据） .

否则 - 即每个模拟场景可能需要一个专用的数据结构来存储结果 - 并且您不需要任何 SQL 功能，那么您可能会更好地使用更自由的解决方案（面向文档的数据库、OO 数据库、文件系统 + csv，无论如何）。

请注意，在第二种情况下您仍然可以使用 SQL 数据库，但是您必须为每个结果集动态创建表，当然还要动态创建相关的 SQL 查询。

# c++ - 在 C++ 中从 ATL::CString 转换为字符串

> ID：11242388
> 
> 赞同：1
> 
> 时间：2012-06-28T10:12:07.690
> 
> 标签：c++, string, cstring

> **可能重复：**
> [如何将 CString 和 ::std::string ::std::wstring 相互转换？](https://stackoverflow.com/questions/258050/how-to-convert-cstring-and-stdstring-stdwstring-to-each-other)

好的，我知道我的问题可能是微不足道的，但我还没有找到如何将 ATL::Cstring 转换为基本字符串。[我已经尝试过http://msdn.microsoft.com/en-us/library/ms235631%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/ms235631%28v=vs.80%29.aspx)页面的“从 CString 示例转换”，但它不起作用。有任何应有的指示吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T10:52:28.467

这应该工作 -

```
CStringA cstr1("Hello");
std::string str1(cstr1); 
```

或者

```
CStringW cstr2(L"Hello");
std::wstring str2(cstr2); 
```

`CString`是一个可以转换为`CStringA`或`CStringW`取决于是否`UNICODE`定义的宏。

分配`CStringA`to`std::wstring`和`CStringW`to`std::string`将不起作用，这可能是您正在发生的事情。

# php - 使用 str_replace 删除某些 html 标签

> ID：11242395
> 
> 赞同：-1
> 
> 时间：2012-06-28T10:12:12.183
> 
> 标签：php, str-replace

> **可能重复：**
> [去除标签的 PHP 函数，白名单标签和属性列表除外](https://stackoverflow.com/questions/3387445/php-function-to-strip-tags-except-a-list-of-whitelisted-tags-and-attributes)

我有一个带有一些不需要的 html 标签的数据库，我需要保留一些 html 格式。我尝试使用 str_replace 删除不需要的标签，但它不起作用：

```
$newdrp = str_replace('<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd"><html>',"",$row_Recordset1['full_description']); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T10:16:46.740

如果要删除所有 html，请使用以下命令：

```
$newdrp = strip_tags($text);

```

如果您只想删除一些 html，请使用以下命令：

```
$newdrp = strip_tags($text, '<div> <a>');

```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-28T10:14:16.543

如果您只想允许某些标签，您可以使用：

```
$newdrp = strip_tags($row_Recordset1['full_description'], '<span> <div>'); 
```

# php - 如果使用存储过程需要 PHP PDO PARAMS？

> ID：11242396
> 
> 赞同：3
> 
> 时间：2012-06-28T10:12:15.563
> 
> 标签：php, sql, sql-server, database, pdo

我是 PHP 新手，但不是编程新手。来自 ASP [经典] 背景。简而言之，我使用的是 PHP 5.4，在 IIS7 和 SQL Server 2005 Express 上使用 FastCGI。我已经学习了基础知识，并且花了相当长的时间研究安全性。

我正在清理 GET 和 POST 输入数据。我的数据库连接字符串位于 Web 根目录之外的单独文件中。我正在使用带有命名占位符以及 db 存储过程的 PDO 准备语句 [尽管我听说查询 + 引用执行得更快]。

我试图理解为什么我需要在 bindParam 函数中使用其他参数，特别是数据类型选项“PDO::PARAM_STR, 12”[该示例中的第二个参数表示数据长度对吗？]。

在 bindParam 中指定数据类型和长度有什么好处？如果我正在使用已经指定数据类型和长度的存储过程，是否需要它？另外，我相信我需要使用“PDO::PARAM_INPUT_OUTPUT”之类的东西来从存储的过程中返回一个值？

谢谢！

** 编辑 **
出于某种原因，如果我使用 PDO::PARAM_STR 参数，我存储的过程似乎不会将数据写入数据库。所以我省略了那个论点。这是我的代码：

```
$sql1 = $conn->prepare("EXEC insert_platts :userAgent, :userIp, 1, :source");
$sql1->bindParam(':userAgent', $userAgent);
$sql1->bindParam(':userIp', $userIp);
$sql1->bindParam(':source', $source);
$sql1->execute(); 
```

此外，我没有从存储的过程中返回标识值，而是使用 lastInsertId() 代替：

```
$lastRow = $conn->lastInsertId();
print $lastRow; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T20:02:26.050

不，不需要数据类型和数据长度。我正在使用 mysql 存储过程，并且参数从不输入值，尽管我当然会验证它们。我想原因是额外的安全性和 INOUT 参数。引用：

> 要从存储过程返回 INOUT 参数，请使用按位 OR 运算符设置 PDO::PARAM_INPUT_OUTPUT

你试过这个吗？

```
$params = array(
            ':userAgent'=>$userAgent,
            ':userIp' => $userIp,
            ':source' => $source
          );
$sql1 = $conn->prepare("EXEC insert_platts :userAgent, :userIp, 1, :source");
$sql1->execute($params); 
```

关于特殊字符：您是否使用正确的编码？我的意思是，php 应用程序和数据库中的相同编码......有时很难在脚本中使用一种编码，而在数据库中使用另一种编码......并且经常会出现这样的问题......

# c# - ASPNET 工作进程在生成异步 Process.Start 时停止响应

> ID：11242398
> 
> 赞同：0
> 
> 时间：2012-06-28T10:12:19.877
> 
> 标签：c#, asp.net, .net

在 ASPNET 页面中，我需要生成一个进程来执行一些 CPU 繁重的工作 (ffmpeg)。我希望：
a）在不等待进程退出的情况下向客户端发送响应
b）在进程完成后做某事
如果我这样做：

```
Process pc = new Process();
pc.EnableRaisingEvents = true;
pc.StartInfo.UseShellExecute = false;
pc.StartInfo.WorkingDirectory = AppDir;
pc.StartInfo.FileName = AppDir + "ffmpeg.exe";
pc.StartInfo.Arguments = ... some strings ...
pc.Exited += new EventHandler(handlerExit);
pc.Start();
// End Page
Response.Flush();
this.Context.ApplicationInstance.CompleteRequest();

void handlerExit(object sender, System.EventArgs e)
    {
            string[] files = Directory.GetFiles(vars["path"] ,vars["filein"] + "*");
            for (int i = 0; i < files.Length; i++)
            {
                File.Delete(files[i]);
            }
    } 
```

当 ffmpeg 仍在运行时，浏览器正确接收响应，但 ASPNET 停止响应每个后续请求。当进程退出时，ASPNET Worker 进程重新开始响应。我试图调整进程优先级启动选项，如 AboveNormal 或 Idle，但没有成功。有什么想法可以管理这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T10:13:52.443

这是由于会话锁定。在您调用的页面上禁用会话。

参考：

[对 Web 服务的 jQuery Ajax 调用似乎是同步的](https://stackoverflow.com/questions/9052401/jquery-ajax-calls-to-web-service-seem-to-be-synchronous/9052457#9052457)

[在共享同一会话时处理另一个 Web 应用程序时 Web 应用程序被阻止](https://stackoverflow.com/questions/9426673/web-app-blocked-while-processing-another-web-app-on-sharing-same-session/9427550#9427550)

[完全替换 ASP.Net 的会话](https://stackoverflow.com/questions/8989648/replacing-asp-nets-session-entirely/9021543#9021543)

# excel - Excel 数据验证下拉列表中的空白值

> ID：11242399
> 
> 赞同：3
> 
> 时间：2012-06-28T10:12:24.387
> 
> 标签：excel, vba, excel-2007

我不知道从 Cell A1 到 A65555 会有多少个值。我有 B1，它设置了基于 A 列的数据验证，如下所示 A1:A65555

值存在于最多 10 行的 A 列中。（从 A1 到 A10）

但是当我单击 B1 时，它会显示空值以及 A1 到 A10。我希望 A 列的所有非空值都列在 B1 中。

注意：我在数据验证设置中勾选了“忽略空白单元格”选项。或任何人让我知道如何通过 VBA 设置数据验证？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T11:18:43.513

假设您在 A 列中没有间隙，在列底部只有一些空白行（因为数据始终是 A1:AN，其中 1 < N <= 65555）

公式 => 定义名称

输入一些名称（如 ValidationList）

用这个作为你的公式`=OFFSET(INDIRECT("Sheet1!$A$1"),0,0,COUNTA(Sheet1!$A:$A),1)`

然后将数据验证列表定义为您输入的名称（并再次检查忽略空白，以便在您没有选择任何内容时不会出错）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-06T20:00:31.643

我写了一些代码，通过 vba 以编程方式插入数据验证并忽略空白，因此列表将更容易滚动。

Sheets("Whatsup_msg") 列 J 中的验证，来自 Source Sheets("Phones_Emails") 列 A。

```
Sub ValidateNonBlanks()
Dim lastRowCombo As Long
Dim lastRowSource As Long
Dim rangeSource As Range
Dim rangeCombo  As Range

lastRowCombo = 150
lastRowSource = Sheets("Phones_Emails").Cells(Rows.Count, "A").End(xlUp).row

Set rangeCombo = Sheets("Whatsup_msg").Range("J4:J" & lastRowCombo)
Set rangeSource = Sheets("Phones_Emails").Range("A4:A" & lastRowSource)

With rangeCombo.Validation
    .Delete
.Add Type:=xlValidateList, AlertStyle:=xlValidAlertStop, Operator:= _
xlBetween, Formula1:="=Phones_Emails!$A$2:$A$" & lastRowSource
    .IgnoreBlank = True
    .InCellDropdown = True
    .InputTitle = ""
    .ErrorTitle = ""
    .InputMessage = ""
    .ErrorMessage = ""
    .ShowInput = True
    .ShowError = True
End With

End Sub 
```

# html - 爬虫能否找到使用 body 的 onLoad() 和 ajax 加载的内容？

> ID：11242400
> 
> 赞同：1
> 
> 时间：2012-06-28T10:12:26.740
> 
> 标签：html, ajax, seo

我创建了一个 HTML 页面，我在其中使用 body 的 onLoad 回调，通过 Ajax 调用从 Servlet 获取内容并将其发送到 div（内容包含有关书籍的信息 - 每本书作为包含标题、标签、作者等的表.)。

现在我想知道当我将此页面提交给搜索引擎时，机器人是否能够抓取此 ajax 内容？

任何帮助/建议表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T11:44:10.967

不会。搜索引擎一般不会抓取 Ajax 内容。唯一的例外是您显然没有实施的[Google 的可抓取 ajax 提案。](http://googlewebmastercentral.blogspot.com/2009/10/proposal-for-making-ajax-crawlable.html)[但无论如何都不鼓励使用它](http://isolani.co.uk/blog/javascript/BreakingTheWebWithHashBangs)。所以你的网站绝对不是搜索引擎友好的。

您应该做的是构建网站以在没有 JavaScript 的情况下工作，然后使用[渐进增强](http://www.alistapart.com/articles/understandingprogressiveenhancement/)使其在启用 JavaScript 的情况下*更好地*工作。

# javascript - 如何将谷歌地图的脚本地图居中

> ID：11242402
> 
> 赞同：0
> 
> 时间：2012-06-28T10:12:34.093
> 
> 标签：javascript, google-maps, google-maps-api-3

我试图在我指定的 LatLng 上将地图居中，但我不确定如何做到这一点。我有这个**iframe**链接：

```
<iframe width="425" height="350" frameborder="0" scrolling="no" marginheight="0" 
marginwidth="0" src="https://maps.google.es/maps?f=q&amp;source=embed&amp;
hl=es&amp;geocode=&amp;q=Cam%C3%AD+Vell+d'Altea,+33,+L'Alf%C3%A0s+del+Pi&amp;
aq=0&amp;oq=cam%C3%AD+vell+d'altea+33&amp;
sll=40.396764,-3.713379&amp;sspn=13.49375,19.753418&amp;ie=UTF8&amp;hq=&amp;
hnear=Cam%C3%AD+Vell+d'Altea,+33,+03581+L'Alf%C3%A0s+del+Pi,+Alicante,+Comunidad+
Valenciana&amp;t=m&amp;ll=38.570757,-0.076316&amp;spn=0.001743,0.004128&amp;
z=14&amp;layer=c&amp;cbll=38.570736,-0.076335&amp;panoid=DplK9JGOu0KAPqoT95VMgQ&amp;
cbp=12,309.4,,0,8.19&amp;output=svembed"></iframe><br /><small> 
```

我希望它成为使用 Google API 的脚本位置。我有这个代码：

```
<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
  html { height: 100% }
  body { height: 100%; margin: 0; padding: 0 }
  #map_canvas { height: 100% }
</style>
<script type="text/javascript"
  http://maps.googleapis.com/maps/api/js?key=MY_KEY&sensor=false&callback=initialize>
</script>
<script type="text/javascript">
  function initialize() {
    var myOptions = {
      center: new google.maps.LatLng(13.49375,19.75341),
      zoom: 12,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    var map = new google.maps.Map(document.getElementById("map_canvas"),
        myOptions);
  }
  function loadScript() 
  {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src = "http://maps.googleapis.com/maps/api/js?key=MY_KEY&sensor=false&callback=initialize";
    document.body.appendChild(script);
  }
  window.onload = loadScript;
</script> 
```

但是我想把iframe的具体地址放到刚才复制的Google API中。我不知道这样做很热。

那么，如何在 Google 地图 API 上链接地图？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T10:21:02.017

执行此操作的简单方法是使用像 maps.huge.info/pinpointaddress.htm 这样的地理编码服务，它会为您提供一些坐标。（对于那个，您需要稍微移动标记以使其显示坐标）。

然后，用`13.49375,19.75341`正确的坐标替换你的代码，比如`38.570918,-0.076218`：

```
center: new google.maps.LatLng(38.570918,-0.076218), 
```

* * *

不要一次问多个问题。请再问一个关于街景的问题。不清楚您是在 API 地图还是 Google 地图地图中询问街景。

# regex - 正则表达式中的`?:`是什么意思

> ID：11242403
> 
> 赞同：8
> 
> 时间：2012-06-28T10:12:34.283
> 
> 标签：regex

我看到一个正则表达式来匹配一个 URL: `/^\/users?(?:\/(\d+)(?:\.\.(\d+))?)?/`。我`?:`对每场小组赛开始时的用法感到困惑。

那是什么意思？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-28T10:17:59.517

`(?:)`（`()`是表达式的一部分）是一个*非捕获组*。

请参阅[http://www.regular-expressions.info/refadv.html](http://www.regular-expressions.info/refadv.html)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-28T10:17:39.373

这是一个非捕获组，因此如果进行匹配，则不会捕获该特定组。

[http://www.regular-expressions.info/refadv.html](http://www.regular-expressions.info/refadv.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T10:18:15.190

通读：[http ://docs.python.org/library/re.html](http://docs.python.org/library/re.html)

> (?:...)

常规括号的非捕获版本。匹配括号内的任何正则表达式，但组匹配的子字符串在执行匹配后无法检索或稍后在模式中引用。

# android - 使用 Django 向 C2DM (android) 发布推送通知

> ID：11242405
> 
> 赞同：1
> 
> 时间：2012-06-28T10:12:43.157
> 
> 标签：android, django, push-notification

我在这里找到了如何使用 Django 向 Android 设备发送推送通知（[这里](https://stackoverflow.com/questions/9033824/pushing-data-from-django-app-to-android-app)[是代码](https://github.com/patrickbaumann/c2dmprototype/blob/master/pushprototypedjango/push/views.py#L93)）。

所以采用了它，我的代码如下所示：

```
def sendAndroidPushNotification(registration_id, collapse_key, a, b) :
    try:
        auth = getNewAndroidAuthorizationToken() # this works I'm fetching new token so this is up to date (its length is 267 characters)
        push_request = urllib2.Request("https://android.apis.google.com/c2dm/send")

        data = urllib.urlencode({'data.testA'     : a,
                                 'data.testB'     : b,
                                 'collapse_key'   : collapse_key,
                                 'registration_id': registration_id
                                 })
        push_request.add_data( data )
        push_request.add_header('Authorization', 'GoogleLogin auth=' + auth)
        push_request.add_header('Content-Type', 'application/x-www-form-urlencoded')
        push_request.add_header('Content-Length', len(data))
        urllib2.build_opener().open(push_request)

    except urllib2.HTTPError as e:
        print 'got exception during push notification'
        print 'Reason: "{0}" code: {1}'.format(e.reason, e.code)

        pass 
```

这给了我错误：“原因：“未经授权”代码：401”（有时是 403）。使用*httplib.HTTPSConnection*而不是*urllib2.Request*的版本有同样的问题。

[它看起来与此处显示的代码](https://github.com/patrickbaumann/c2dmprototype/blob/master/pushprototypedjango/push/views.py#L93)几乎相同，所以我完全感到困惑。我做错了什么？

* * *

**编辑：**

以防万一，这是我获取授权令牌的方式（看起来它工作正常），也许我的解析是错误的：

```
def getNewAndroidAuthorizationToken() :
    request = urllib2.Request("https://www.google.com/accounts/ClientLogin")

    data  = urllib.urlencode({'accountType' : 'HOSTED_OR_GOOGLE',
                              'Email'       : 'someaccount@gmail.com',
                              'Passwd'      : 'asdjsdfa',
                              'service'     : 'ac2dm',
                              'source'      : 'com.mycompany.mypackage',})
    request.add_data(data)

    content = urllib2.build_opener().open(request)

    lines = content.readlines()
    for line in lines :
        if line.find("Auth=")==0 :
            return line[5:]
    return 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T11:20:51.337

`C2DM`已弃用。鼓励开发人员切换到`GCM, C2DM`将在短时间内得到支持。简单的 API，而不是`ClientLogin`和`oAuth2`不支持的。

[http://developer.android.com/guide/google/gcm/index.html](http://developer.android.com/guide/google/gcm/index.html)

# html - 我可以使用 :after 在图标集上设置流体宽度吗

> ID：11242406
> 
> 赞同：0
> 
> 时间：2012-06-28T10:12:43.433
> 
> 标签：html, css, responsive-design

我有一个导航，在我的文本集之后有图标，在 CSS 中使用 :after ：

```
a.pro-serv:after { 
  content: url('../imgs/pro.png'); 
  position: absolute; 
  top: 65px; 
  left: 50%; 
  margin-left: -31px; 
} 
```

我使用绝对定位将其设置为位于文本下方...（是的，它们是大按钮）。但它是一个响应式网站，因此导航项目的宽度会缩小，其中一个或两个图标太宽，但由于我设置它们的方式，我无法找到改变它们大小的方法，我担心我不能，但我希望有人可能有一个解决方案，以便图标大小的变化做出反应..这甚至可能吗？

提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T13:14:07.577

您是否尝试过使用媒体查询来加载较小版本的图标？让背景图像响应是一项艰巨的任务。如果您将它们放入 img 标签中，您将更轻松

# nservicebus - 当处理程序抛出异常时，NServiceBus 2.6 会不断重试消息

> ID：11242408
> 
> 赞同：0
> 
> 时间：2012-06-28T10:12:53.143
> 
> 标签：nservicebus

我们有一个很少发生的生产问题，但是一旦发生，就会使整个服务无法使用。

问题是消息处理程序中的异常会导致 NServiceBus 进入无限循环，在该循环中不断重试消息。

我发现这篇文章似乎描述了同样的问题，但我找不到解决方法：

[http://tech.dir.groups.yahoo.com/group/nservicebus/message/4316](http://tech.dir.groups.yahoo.com/group/nservicebus/message/4316)

# sencha-touch-2 - Sencha Touch 2 应用程序已构建，但 iOS 模拟器仍在 applOading 指示器上

> ID：11242410
> 
> 赞同：1
> 
> 时间：2012-06-28T10:12:54.137
> 
> 标签：sencha-touch-2

我使用 Sencha Touch 2“构建 Sencha 原生应用程序”构建了一个应用程序。应用程序构建完成，IOS 模拟器成功。但是，应用程序仍保留在页面上，并带有一个加载指示器（三个闪烁的点）。没有错误或警告。该应用程序在 Chrome 浏览器中加载并正常工作。

请问有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T07:13:10.090

我希望你找到了解决方案。如果没有，以下是我的建议。我陷入了同样的问题。它扼杀了我在模拟器中运行应用程序的兴奋[因为没有要处理的错误，不知道出了什么问题]。搜索了 sencha 的模棱两可的文档和论坛，发现了以下修复：

**第 1 步：打开 app.json 文件。**

**第 2 步：搜索：**

```
/**
 * Build options
 */
"buildOptions": {
    "product": "touch",
    "minVersion": 3,
    "debug": false,
    "logger": "no"
}, 
```

**第 3 步：将最后一行“logger”：“no”更改为“logger”：false**

我还没有找到为什么需要更改的答案。可能他们已经更改了 SDK 中配置关键字的值，但没有在 app.json 中更新 [如果有人可以帮助理解原因，那就太好了]。我不知道。但这对我有用。我能够在 iOS 模拟器中测试该应用程序。我还没有在安卓模拟器和实际设备上测试过。

希望这可以帮助！。

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T04:13:58.127

我正在与可能是相同的问题作斗争，这似乎是由于它试图加载各种文件，即使它们的内容已捆绑到 app.js 中。您可以通过在 Web 检查器的“资源”选项卡中查找红色文件来查看这是否是您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-14T10:21:50.153

您还可以查看 iOS Simulator 日志：iOS Simulator -> Debug -> Open System Log ...

可能会告诉您 comfig.xml 中的某些条目丢失了

# php - Codeigniter 2.1 - 多个文件上传不起作用

> ID：11242411
> 
> 赞同：0
> 
> 时间：2012-06-28T10:12:56.543
> 
> 标签：php, codeigniter

我有点问题。当我选择上传一张图片时，功能起作用。但是对于多个图像它不起作用，我得到错误

> 您没有选择要上传的文件。

（如果用户输入正确的代码，则通过JS创建更多图像上传的字段。如果未输入代码或输入错误，则使用原始输入来选择文件）。似乎有什么问题？

控制器功能：

```
function img_upload($folder) {
        $this->path = './public/img/' . $folder;
        $imgs = array();        
        $config = array(
            'allowed_types' => 'jpg|jpeg|png|gif',
            'upload_path' => $this->path
        );
        $CI = &get_instance();
        $CI->load->library('upload', $config);

        foreach ($_FILES as $key => $value) {

            if (!$CI->upload->do_upload($key)) {
                return $error = implode(',',array('error' => $CI->upload->display_errors()));
            } else {
                $q = $CI->upload->data();
                $config['image_library'] = 'gd2';
                $config['source_image'] = $this->path . '/' . $q['file_name'];
                $config['new_image'] = $this->path . '/thumbs';
                $config['create_thumb'] = FALSE;
                $config['maintain_ratio'] = TRUE;
                $config['width'] = 128;
                $config['height'] = 128;

                $CI->load->library('image_lib');
                $CI->image_lib->clear();
                $CI->image_lib->initialize($config); 
                $CI->image_lib->resize();                       
                array_push($imgs, $q['file_name']);
            }      
        }

        if(empty($imgs)){
            return FALSE;
        } else {
            return implode(',', $imgs);
        }
    } 
```

用于选择文件的 HTML 的一部分：

```
<label for="image">Slika</label><input type="file" name="userfile" id="image" /> 
```

用于添加新字段的 JS：

```
code.on('focusout', function(){
       if(!$(this).val())
           {
              $('label[for^=image_paid], input[id^=image_paid], input[name=time]').remove();                              
           }
       if(!$('#image4').length > 0)
           {$.ajax({
           type: 'POST', 
           url: '<?php echo base_url() ?>global_info/gi_get_ad_payment_code',
           data: 'code=' + code.val(),
           success: function(data){
             for(i = 1; i<=4; i++)
            {
               $('#image').after('<label for="image' + i +'">Slika</label><input type="file" name="userfile" id="image' + i +'" />');
            }  
            code.after('<input type="hidden" name="time" value="'+ data +'" />');            
            code.after('<input type="hidden" name="paid" value="1" />');            
           },
           error: function(){
               alert('nije uspeh');
           }
        }); /* KRAJ NA AJAX */
        };/* KRAJ NA IF */        
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T11:23:40.480

如果你不介意使用这个插件。它会很好用....我已经使用过很多次了.. [http://www.plupload.com/](http://www.plupload.com/)

# c++ - 是否可以使用字符串从 STL 重新初始化位集？

> ID：11242416
> 
> 赞同：-1
> 
> 时间：2012-06-28T10:13:18.580
> 
> 标签：c++, stl, bitset

是否可以用字符串重新初始化位集？我有一个像这样的简单类：

```
class Bits{
  public:
  bitset<1024>b;
}; 
```

是否有可能稍后我得到一个字符串并在代码中用字符串设置位（字符串长度为 1024，只有 1 和 0）？

```
Bits c;
c.b.something(string); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T10:16:14.193

是的，最简单的是：

```
b = bitset<1024>(some_string_form); 
```

# jquery - 通过单击链接 jQuery 更改褪色图像

> ID：11242418
> 
> 赞同：0
> 
> 时间：2012-06-28T10:13:27.603
> 
> 标签：jquery, image, slideshow, fading

我创建了一个图像褪色幻灯片阅读[这篇文章](http://snook.ca/archives/javascript/simplest-jquery-slideshow/)。代码如下所示：

```
$(document).ready(function() {
    $('#iPhoneExample img:gt(0)').hide();
    setInterval(function() {
        $('#iPhoneExample :first-child').fadeOut(1000)
        .next('img').fadeIn(1000)
        .end().appendTo('#iPhoneExample');
    }, 3000);
}); 
```

这是 HTML 和 CSS：

```
<div id="iPhoneExample">
<img src="photo1.png" alt="" />
<img src="photo2.png" alt="" />
<img src="photo3.png" alt="" />
<img src="photo4.png" alt="" />
<img src="photo5.png" alt="" />
<img src="photo6.png" alt="" />
</div>

#iPhoneExample {
    width:305px;
    height:597px;
    background:url('immagini/iphoneBg.png') center no-repeat;
    position:relative;
    margin:0px 20px 0px 94px;
}
#iPhoneExample img {
    position:absolute;
    top:106px;
    right:22px;
    bottom:104px;
    left:25px;
} 
```

现在我想这样做。当页面加载时，幻灯片开始，但我有 6 个链接，每个图像一个，我想用来显示相应的图像......例如幻灯片开始并显示 photo3 但如果我点击 photo5 链接，幻灯片必须显示照片 5，然后继续显示照片 6 等。

我相信我应该使用该`.click`功能，但我不知道在其中写什么。我是 jQuery 的新手。

非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T20:16:22.660

```
<html>
<head>
<style>
div { width: 850px; height: 350px; background: green; }
</style>
<script type = "text/javascript" src = "jquery.js"></script>
<script type = "text/javascript" />
$(function() {
arr = ['photo1.jpg','photo2.jpg','photo3.jpg','photo4.jpg','photo5.jpg','photo6.jpg'];
$("#iPhoneExample").append("<img src = '"+arr[0]+"' />");
timer = setInterval(function() {
var curnum = parseInt(($("#iPhoneExample").find("img").attr("src").match(/\d/g))[0]);
var nextnum = curnum > 5 ? 0 : curnum;
$("#iPhoneExample img").replaceWith("<img src = '"+arr[nextnum]+"' />");
},3000);
$("a").click(function(e) {
  if ($("a").filter(function() { return $(this).hasClass("clicked"); }).length)
    {
      clearInterval(newtimer);
    }
  else {
        $("a:first").addClass('clicked');
       }    
  e.preventDefault();
  var curnum = parseInt(($(this).attr("href").match(/\d/g))[0]);
  nextnum = curnum-1;
  clearInterval(timer);
  $("#iPhoneExample").html("<img src = '"+arr[curnum-1]+"' />");
  newtimer = setInterval(function() {
  nextnum = nextnum + 1 > 5 ? 0 : nextnum + 1;
  $("#iPhoneExample").html("<img src = '"+arr[nextnum]+"' />");
  },3000);
  });

});
</script>
</head>
<body>
<div id = "iPhoneExample"></div>
<a href = "www.photo1.html">Photo1</a>
<a href = "www.photo2.html">Photo2</a>
<a href = "www.photo3.html">Photo3</a>
<a href = "www.photo4.html">Photo4</a>
<a href = "www.photo5.html">Photo5</a>
<a href = "www.photo6.html">Photo6</a>
</body>
</html> 
```

# r - 使用 ggplot2 绘制两个变量 - 相同的 x 轴

> ID：11242420
> 
> 赞同：5
> 
> 时间：2012-06-28T10:13:32.723
> 
> 标签：r, plot, ggplot2

我有两个具有相同 x 轴的图 - x 的范围都是 0-5。我想将它们组合到一个图表中，但我没有找到之前的示例。这是我得到的：

```
c <- ggplot(survey, aes(often_post,often_privacy)) + stat_smooth(method="loess")
c <- ggplot(survey, aes(frequent_read,often_privacy)) + stat_smooth(method="loess") 
```

我怎样才能将它们结合起来？y 轴是“经常隐私”，在每个图中，x 轴是“经常发布”或“经常阅读”。我想我可以轻松地（以某种方式）组合它们，因为它们的范围都是 0-5。

非常感谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-28T12:36:10.087

Ben 的解决方案的示例代码。

```
#Sample data
survey <- data.frame(
  often_post = runif(10, 0, 5), 
  frequent_read = 5 * rbeta(10, 1, 1), 
  often_privacy = sample(10, replace = TRUE)
)
#Reshape the data frame
survey2 <- melt(survey, measure.vars = c("often_post", "frequent_read"))
#Plot using colour as an aesthetic to distinguish lines
(p <- ggplot(survey2, aes(value, often_privacy, colour = variable)) + 
  geom_point() +
  geom_smooth()
) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-28T12:23:04.743

您可以使用`+`在同一`ggplot`对象上组合其他图。例如，要为两对列绘制点和平滑线：

```
ggplot(survey, aes(often_post,often_privacy)) + 
geom_point() +
geom_smooth() + 
geom_point(aes(frequent_read,often_privacy)) + 
geom_smooth(aes(frequent_read,often_privacy)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-14T05:23:46.210

试试这个：

```
df <- data.frame(x=x_var, y=y1_var, type='y1') 
df <- rbind(df, data.frame(x=x_var, y=y2_var, type='y2'))
ggplot(df, aes(x, y, group=type, col=type)) + geom_line() 
```

[![在此处输入图像描述](../Images/c087a8fec48e2bb9a1c0723f02f04509.png)](https://i.stack.imgur.com/VB1mJ.png)

# android - Android TabPage Indicator 内容包装问题

> ID：11242421
> 
> 赞同：9
> 
> 时间：2012-06-28T10:13:34.057
> 
> 标签：android, android-viewpager, tabpage, indicator, viewpagerindicator

我遇到了 ViewPager 的另一个问题，我现在无法用我目前的知识解决它。

我有 TabPageIndicator 和 ViewPager，在每个选项卡上，我都显示文本。这是简单的文本视图：

```
<?xml version="1.0" encoding="utf-8"?>
<view xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    class="viewpagerindicator.TabPageIndicator$TabView" >

    <TextView
        android:id="@+id/vpi_tab_text"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:singleLine="true"
        android:ellipsize="marquee"
        android:gravity="center"
        android:paddingBottom="10dip"
        android:paddingLeft="8dip"
        android:paddingRight="8dip"
        android:paddingTop="10dip"
        android:textColor="@drawable/vpi_tab_text_color"
        android:typeface="serif" />

</view> 
```

我希望选项卡中的文本始终是单行并且始终是整个文本，而不是椭圆形，不换行，不超过 1 行。用户必须能够完整阅读它...

但我不能那样做，我尝试了不同的选项，但仍然遇到一些问题 - 文本不止一行，但只显示第一行，或者只显示部分文本。

你经历过类似的事情吗？

任何帮助表示赞赏

编辑一：

我相信问题出在这里：

```
@Override
public void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
final int widthMode = MeasureSpec.getMode(widthMeasureSpec);
final boolean lockedExpanded = widthMode == MeasureSpec.EXACTLY;
setFillViewport(lockedExpanded);
    final int childCount = mTabLayout.getChildCount();
    if (childCount > 1 && (widthMode == MeasureSpec.EXACTLY || widthMode == MeasureSpec.AT_MOST)) {
        if (childCount > 2) {
            mMaxTabWidth = (int) (MeasureSpec.getSize(widthMeasureSpec) * 0.4f);
        } else {
            mMaxTabWidth = MeasureSpec.getSize(widthMeasureSpec) / 2;
        }
    } else {
        mMaxTabWidth = -1;
    }

    final int oldWidth = getMeasuredWidth();
    super.onMeasure(widthMeasureSpec, heightMeasureSpec);
    final int newWidth = getMeasuredWidth();

    if (lockedExpanded && oldWidth != newWidth) {
        // Recenter the tab display if we're at a new (scrollable) size.
        setCurrentItem(mSelectedTabIndex);
    }
 } 
```

mMaxTabWidth...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T11:05:13.810

我认为问题很简单，我注释掉了这部分：

```
 @Override
        public void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
            super.onMeasure(widthMeasureSpec, heightMeasureSpec);

            // Re-measure if we went beyond our maximum size.
//          if (mParent.mMaxTabWidth > 0 && getMeasuredWidth() > mParent.mMaxTabWidth) {
//              super.onMeasure(MeasureSpec.makeMeasureSpec(mParent.mMaxTabWidth, MeasureSpec.EXACTLY), heightMeasureSpec);
//          }
        } 
```

现在它按照我想要的方式工作......我一直在查看代码的错误部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-22T07:26:03.003

当它不应该省略标签中的文本时，我遇到了问题。我在这里找到了修复[，#227](https://github.com/JakeWharton/Android-ViewPagerIndicator/issues/227#issuecomment-18881187)使用@larham 的建议。这基本上是他所做的，但最好阅读他对他所做的事情以及他为什么这样做的解释：

在 TabPageIndicator.java 中，替换以下内容：

```
mTabLayout.addView(tabView, new LinearLayout.LayoutParams(0, MATCH_PARENT, 1)); 
```

和：

```
mTabLayout.addView(tabView, new LinearLayout.LayoutParams(WRAP_CONTENT, MATCH_PARENT, 1)); 
```

那为我修好了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T06:56:29.670

我有一个类似的问题，没有显示整个文本。我解决了它减少左/右样式填充。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-13T07:58:04.880

更新 ViewPageIndicator 库 :) 已正式修复 :)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-08T09:17:23.503

我使用 Wrap 内容属性，而不是宽度的 Layout weight=1。在 TabPageIndicator 类的 addTab(int,CharSequence,int) 方法中，将 mTab​​Layout.addView 替换为以下内容：

mTabLayout.addView(tabView, new LinearLayout.LayoutParams(WRAP_CONTENT, WRAP_CONTENT));

# iphone - 如何添加外部框架GPUImage框架？

> ID：11242423
> 
> 赞同：13
> 
> 时间：2012-06-28T10:13:37.387
> 
> 标签：iphone, frameworks, gpuimage

我正在使用 iOS 开发 iPhone 应用程序。我需要添加 GPUImage 框架，我按照这个 url 来添加目的。[http://www.sunsetlakesoftware.com/2012/02/12/introducing-gpuimage-framework](http://www.sunsetlakesoftware.com/2012/02/12/introducing-gpuimage-framework)

现在我将 GPUImage xcodeproject 文件拖放到我的项目中。在这个项目产品文件夹中有 libGPImage.a 文件。它显示空文件夹，在此文件中丢失。它显示像红色。我无法访问 GPUImage 类文件。为什么会这样。

谢谢，

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-01T19:49:43.653

[正如其他人评论的那样，我在GitHub 主页](https://github.com/BradLarson/GPUImage)上提供了框架安装的分步说明。我将重现以下内容：

> 一旦您获得了该框架的最新源代码，就可以非常简单地将其添加到您的应用程序中。首先将 GPUImage.xcodeproj 文件拖到应用程序的 Xcode 项目中，以将框架嵌入到项目中。接下来，转到应用程序的目标并将 GPUImage 添加为目标依赖项。最后，您需要将 libGPUImage.a 库从 GPUImage 框架的 Products 文件夹拖到应用程序目标中的 Link Binary With Libraries 构建阶段。
> 
> GPUImage 需要一些其他框架才能链接到您的应用程序中，因此您需要在应用程序目标中添加以下内容作为链接库：
> 
> *   核心媒体
> *   核心视频
> *   OpenGLES
> *   AV基金会
> *   石英芯
> 
> 您还需要找到框架标头，因此在项目的构建设置中，将标头搜索路径设置为从应用程序到 GPUImage 源目录中 framework/ 子目录的相对路径。使此标头搜索路径递归。
> 
> 要在您的应用程序中使用 GPUImage 类，只需使用以下内容包含核心框架标头：
> 
> ```
> #import "GPUImage.h" 
> ```
> 
> 注意：如果您在尝试使用 Interface Builder 构建界面时遇到错误“Unknown class GPUImageView in Interface Builder”等，您可能需要在项目的构建设置中将 -ObjC 添加到您的 Other Linker Flags 中。
> 
> 此外，如果您需要将其部署到 iOS 4.x，当前版本的 Xcode (4.3) 似乎要求您在最终应用程序中弱链接 Core Video 框架，否则您会看到崩溃并显示消息“未找到符号” : _CVOpenGLESTextureCacheCreate" 当您创建存档以上传到 App Store 或进行临时分发时。为此，请转到项目的 Build Phases 选项卡，展开 Link Binary With Libraries 组，然后在列表中找到 CoreVideo.framework。将列表最右侧的设置从必需更改为可选。
> 
> 此外，这是一个支持 ARC 的框架，因此如果您想在针对 iOS 4.x 的手动引用计数应用程序中使用它，您还需要将 -fobjc-arc 添加到您的其他链接器标志中。

如果您按照第一段中的步骤进行操作，当您将 libGPUImage.a 库从 Products 文件夹拖到 Link Binary With Libraries 构建阶段时，它确实会显示为红色。原因是在这个阶段还没有构建静态库。不用担心，因为如果您按照上一步将项目添加为应用程序的依赖项，则静态库将在您的应用程序之前构建。从这一点开始，一切都应该正常工作。

这些是我现在在几个应用程序上使用的安装说明，它们对每个应用程序都有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T10:29:00.273

***尝试这个***

> projet Target > summary > framwork > add Others.> than browser to "BradLarson-GPUImage-6619cd2/framework>GPUImage.xcodeproj" 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T10:24:34.297

您提供的这个网址不起作用......无论如何，您是否尝试通过将 *.a 文件添加到您的目标的构建设置中来将其添加到您的项目中？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T10:24:56.737

您需要按照说明在项目中添加框架，您可以在 [https://github.com/BradLarson/GPUImage中的“将框架添加到您的 iOS 项目”部分中查看这些内容](https://github.com/BradLarson/GPUImage)

# javascript - 我可以 $.wrap() 围绕数组中的元素集合吗？

> ID：11242430
> 
> 赞同：8
> 
> 时间：2012-06-28T10:14:14.213
> 
> 标签：javascript, jquery, dom

假设我有一个像这样的“项目”集合：

```
<p class="item">Item 1</p>
<p class="item">Item 2</p>
<p class="item group">Item 3</p>
<p class="item group">Item 4</p>
<p class="item">Item 5</p>
```

我想遍历项目并在任何具有“组”类的对象周围包装一个包含 div，以产生类似这样的结果（分组的项目**总是**彼此相邻）：

这是我得到的脚本：

```
var group = [];

$('.item').each(function(i, item) {
  if ($(item).hasClass('group')) {
    group.push(item);
  }
});

$(group).wrap('<div class="wrapper" />');
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<p class="item">Item 1</p>
<p class="item">Item 2</p>
<div class="wrapper">
  <p class="item group">Item 3</p>
  <p class="item group">Item 4</p>
</div>
<p class="item">Item 5</p>
```

发生的情况是包装 div 分别包装在数组中的每个元素周围（这是有道理的），但我需要它将所有元素包装在一起。有什么办法可以做到这一点吗？这是一个[jsFiddle](http://jsfiddle.net/LanMt/2/)。

这个问题可能有一个更复杂的变体，这将是这样一种情况，即这些组有几个“组”，每个组都被包装在自己的“组”`div`中。初始状态：

```
<p class="item">Item 1</p>
<p class="item">Item 2</p>
<p class="item group">Item 3</p>
<p class="item group">Item 4</p>
<p class="item">Item 5</p>
<p class="item group">Item 6</p>
<p class="item group">Item 7</p>
<p class="item group">Item 8</p>
<p class="item">Item 9</p>
```

期望状态：

```
<p class="item">Item 1</p>
<p class="item">Item 2</p>
<div class="wrapper">
  <p class="item group">Item 3</p>
  <p class="item group">Item 4</p>
</div>
<p class="item">Item 5</p>
<div class="wrapper">
  <p class="item group">Item 6</p>
  <p class="item group">Item 7</p>
  <p class="item group">Item 8</p>
</div>
<p class="item">Item 9</p>
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-28T10:16:35.313

尝试[`wrapAll`](http://api.jquery.com/wrapAll/)方法：

```
$(".group").wrapAll("<div class='wrap' />"); 
```

**演示：http:** [//jsfiddle.net/LanMt/3/](http://jsfiddle.net/LanMt/3/)

* * *

为了包装单独的`.group`元素组，您可以使用以下内容：

```
$(".group").map(function() {
    if (!$(this).prev().hasClass("group")) {
        return $(this).nextUntil(":not(.group)").andSelf();
    }
}).wrap("<div class='wrap' />"); 
```

**演示：http:** [//jsfiddle.net/LanMt/5/](http://jsfiddle.net/LanMt/5/)

[上面的代码是在@Jon's answer](https://stackoverflow.com/a/11242594/1249581)的帮助下组装而成的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-28T10:24:25.623

您可以使用`.filter`和的组合`.map`来实现所需的结果：

```
$(".item.group")
.filter(function() {
    return !$(this).prev().is(".group");
})
.map(function() {
    return $(this).nextUntil(":not(.group)").andSelf();
})
.wrap('<div class="wrap" />'); 
```

[**看到它在行动**](http://jsfiddle.net/rA7zS/)。

[](http://jsbin.com/amijiq/edit#javascript,html,live)**解决当前 JSFiddle 问题的[**JS Bin 示例。**](http://jsbin.com/amijiq/edit#javascript,html,live)**

 **### 基本原理

该方法将*每个项目*[`.wrap`](http://api.jquery.com/wrap/)嵌入到您选择的标记内的当前 jQuery 对象中。因此，如果你想在同一个包装器中包装多个元素，你必须将这 N 个元素与一个 jQuery 对象匹配，然后创建另一个包含*一个*元素的 jQuery 对象：第一个 jQuery 对象。您应该将后一个对象传递给.**`.wrap`**

 **所以我们需要在这里为每个组创建一个 jQuery 对象，然后将所有这些放入另一个“主”jQuery 对象中。首先选择所有`.group`自身之前没有`.group`兄弟元素的元素：

```
$(".item.group")
.filter(function() {
    return !$(this).prev().is(".group");
}) 
```

从每个这样的元素，创建一个 jQuery 对象，其中包含该元素和所有以下同级元素`.group`：

```
.map(function() {
    return $(this).nextUntil(":not(.group)").andSelf();
}) 
```

生成的 jQuery 对象会自动放置在“主”对象中，因为它们取代了`.filter`我们在创建的 jQuery 对象中选择的裸元素`$(".item.group")`。最后一次调用`.wrap`... 结束了。:)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-28T10:22:02.893

使用 wrapAll 而不是 wrap。

```
$(".group").wrapAll('<div class="wrap" />'); 
```

wrapAll 的文档可以在 - [http://api.jquery.com/wrapAll/找到](http://api.jquery.com/wrapAll/)

可以在以下位置找到其他可用的包装方法 - [http://api.jquery.com/category/manipulation/dom-insertion-around/](http://api.jquery.com/category/manipulation/dom-insertion-around/)

编辑：

对于可能有多个组的复杂情况，我们可以使用带有 $.each 的 wrapAll 来实现它，如下所示 -

```
var group = [];
        $(".item").each(
          function(i, item) {            
            if ($(item).hasClass("group")) {
                group.push(item);
            }
            else {
                $(group).wrapAll('<div class="wrap" />');
                group = [];
            }
          }
        ); 
```****

# java - 如何从 java 代码执行 ssh bash 命令？

> ID：11242435
> 
> 赞同：0
> 
> 时间：2012-06-28T10:14:19.783
> 
> 标签：java, ssh, execute

我知道有很多关于这个问题的线索，但我没有找到正确的方法：我按照这个例子：[想要从 Java 调用 linux shell 命令](https://stackoverflow.com/questions/1410741/want-to-invoke-a-linux-shell-command-from-java)来运行命令。ssh 命令的问题在于身份验证。当我运行它时，我需要设置密码

```
$ ssh root@server 'fgrep Exception *.log*' 
Enter passphrase for key '/././.ssh/id_rsa': 
```

我怎样才能在这里传递密码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T11:00:17.217

有一些库可用于调用 ssh。[***Java Secure Channel (JSCH)***](http://www.jcraft.com/jsch/examples/)是一个非常流行的库，被 maven、ant 和 eclipse 使用。它是具有 BSD 风格许可证的开源软件。

如果需要ssh认证，可以通过java使用。

如果您仍然需要通过密码传递，有两种方法可以做您想做的事。一个涉及存储的密码，一个不涉及。

两者都是非交互式的，这意味着当您不在那里输入密码时它们可以工作。

1.  不需要密码的方式。您可以在 SSH 中使用公钥/私钥身份验证而不是密码。我将假设您使用的是 OpenSSH，它几乎随每个 Linux 发行版一起提供。

    **脚步 ：**

    *   配置您的 SSH 服务器以接受私钥登录。在 /etc/ssh/sshd_config 中确保有一行显示 PubkeyAuthentication yes （并且前面没有 # ）。如果更改此文件，则需要重新启动 sshd 服务。

    *   **在您的本地机器（不是服务器）上，使用ssh-keygen -t rsa**创建自己的一对密钥 （您可以使用 rsa 以外的其他选项，但我保持简单）。不要指定密码。将密钥保存在提示的位置。

    *   打开您刚刚创建的 id_rsa.pub 文件的内容（这是一行很长的文本），并将内容复制到服务器计算机上 $HOME/.ssh/authorized_keys 文件的末尾。如果文件不存在，则创建该文件。

    [更多详情请参阅此处](http://www.ibm.com/developerworks/library/l-keyc/index.html)。

2.  基本思想是使用expect，这是一个管理自动化工具，在出现提示时将密码输入到ssh。它可能并不总是有效，当它不起作用时，很难弄清楚为什么不这样做。我推荐第一种方法。

    无论如何，这里有一个命令，你可以在它做你想做的事情之前戳它。

脚本代码为：

```
 expect -c 'spawn ssh user@remote.host ; expect assword ; send  "passphrase\n" ; interact' 
```

Expect 可能未安装在您的系统上。确保安装

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T10:20:21.380

您需要从执行中获取 InputStream（具有输出）并等待它向您询问密码，然后获取 OutputStream（您将其输入到该命令中）并向其发送您想要的密码。

阅读[这篇文章](http://www.javaworld.com/javaworld/jw-12-2000/jw-1229-traps.html)

# c++ - 查找数组中的最小元素及其索引

> ID：11242439
> 
> 赞同：6
> 
> 时间：2012-06-28T10:14:36.660
> 
> 标签：c++, parallel-processing, openmp

使用 OpenMP 3.1，可以有一个`reduction`子句`min`：

```
double m;
#pragma omp parallel for reduction(min:m)
for (int i=0;i< n; i++){ 
  if (a[i]*2 < m) {
    m = a[i] * 2;
} 
return m; 
```

假设我还需要最小元素的*索引*；有没有办法为此使用该`reduction`子句？`nowait`我相信替代方法是使用and手动编写减少`critical`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T10:24:34.907

> 假设我还需要最小元素的索引；有没有办法为此使用减少条款？

抱歉不行。OpenMP 中可能减少的列表非常……小。特别是，`min`并且`max`是唯一的“高级”功能，它们是不可定制的。完全没有。

我不得不承认，我不喜欢 OpenMP 的缩减方法，正是因为它一点也不可扩展，它只是为处理特殊情况*而设计的。*当然，这些都是有趣的特殊情况，但从根本上说它仍然是一种糟糕的方法。

对于此类操作，您需要通过将线程局部结果累加到线程局部变量中并在最后将它们组合来自己实现归约。

执行此操作的最简单方法（实际上非​​常接近 OpenMP 实现缩减的方式）是为每个线程创建一个包含元素的数组，并使用`omp_get_thread_num()`它来访问一个元素。但是请注意，如果阵列中的元素共享一个缓存行，这将导致由于错误共享而导致性能下降。为了缓解这种情况，请填充数组：

```
struct min_element_t {
    double min_val;
    size_t min_index;
};

size_t const CACHE_LINE_SIZE = 1024; // for example.
std::vector<min_element_t> mins(threadnum * CACHE_LINE_SIZE);

#pragma omp parallel for
for (int i = 0; i < n; ++i) {
    size_t const index = omp_get_thread_num() * CACHE_LINE_SIZE;
    // operate on mins[index] …
} 
```

# c++ - boost:enable_if 在模板类中定义专用方法

> ID：11242445
> 
> 赞同：0
> 
> 时间：2012-06-28T10:15:05.673
> 
> 标签：c++, templates, boost, enable-if

我想要一个自定义方法 - 我将在模板类中调用 MyMethod - 我将调用 Foo - 仅当 Foo 已使用某些模板参数类型实例化时（例如，当 A 为 int 且 B 为字符串时），否则，我不希望 MyMethod 存在于任何其他可能的 Foo 实例上。

那可能吗 ？

例子：

```
template<class A, class B>
class Foo
{
    string MyMethod(whatever...);
} 
```

boost:enable_if 可以提供帮助吗？

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T10:36:20.730

您真正想要的是专业化您的模板。在您的示例中，您将编写：

```
template<>
class Foo<int, string>
{
    string MyMethod(whatever...); 
}; 
```

你也可以使用 enable_if：

```
template<typename A, typename B>
class Foo
{
    typename boost::enable_if<
            boost::mpl::and_<
                boost::mpl::is_same<A, int>,
                boost::mpl::is_same<B, string>
            >,
            string>::type MyMethod(whatever...){}
}; 
```

如果没有重载，也可以使用 static_assert：

```
template<typename A, typename B>
class Foo
{
    string MyMethod(whatever...)
    {
         static_assert(your condition here, "must validate condition");
         // method implementation follows
    }
}; 
```

当您尝试调用 MyMethod 并且未设置条件时，这将产生编译错误。

# ios - iOS中属性列表中的排序键

> ID：11242449
> 
> 赞同：1
> 
> 时间：2012-06-28T10:15:21.997
> 
> 标签：ios, sorting, plist

我创建了一个属性列表，其中键为 1 到 11，所有值都为 0。

该列表将用作选择器视图的数据源。

我有这些财产：

```
@property (nonatomic, strong) NSDictionary *erfaring;
@property (nonatomic, strong) NSArray *erfaringKeys; 
```

这在实现文件中：

```
NSString *erfaringFile = [[NSBundle mainBundle]
                         pathForResource:@"Erfaring" ofType:@"plist"];
erfaring = [[NSDictionary alloc] initWithContentsOfFile:erfaringFile];
erfaringKeys = [erfaring allKeys]; 
```

问题是，当键被加载到选择器视图时，它们的排序错误，如：7、3、8、4、11、9、5、1、6、2、10。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T10:22:16.723

您将需要对字典的键进行排序

```
NSDictionary *dic = [NSDictionary dictionaryWithObjectsAndKeys:
                     @"String 1", @"1",
                     @"String 4", @"4",
                     @"String 3", @"3",
                     @"String 2", @"2", nil];

NSArray *sortedKeys = [dic keysSortedByValueUsingSelector:@selector(compare:)]; 
```

然后使用排序的键进行迭代

```
for (NSString *sortedKey in sortedKeys) {
    NSString *value = [dic objectForKey:sortedKey];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T10:20:28.783

您可以在加载选择器之前对数组进行排序-

```
erfaringKeys = [erfaring allKeys];
erfaringKeys = [erfaringKeys sortedArrayUsingSelector:@selector(compare:)]; 
```

# silverlight - 如何在后台代理和前台应用程序之间使用互斥锁作为数据库？

> ID：11242450
> 
> 赞同：1
> 
> 时间：2012-06-28T10:15:30.937
> 
> 标签：silverlight, windows-phone-7, mutex, background-agents

如何使用互斥锁在后台代理和前台应用程序之间进行数据库同步？任何人都可以帮助我为 wp7 学习这两个（wp7 的可实现代码）。请尝试添加一些代码片段，以帮助我以简单的方式理解这些技术。非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T15:39:14.073

以下是一些可能对您有帮助的文章：

[在 WP7 Mango 中实现互斥量和监视器](https://stackoverflow.com/questions/7637183/implementing-mutex-and-monitor-in-wp7-mango)

[如何从 Windows Phone 上的前台应用程序发出 ScheduledTask 信号？](https://stackoverflow.com/questions/7030715/how-to-signal-a-scheduledtask-from-a-foreground-app-on-windows-phone)

[http://www.pitorque.de/MisterGoodcat/post/Windows-Phone-Background-Agents-Pitfall-(3-of-n).aspx](http://www.pitorque.de/MisterGoodcat/post/Windows-Phone-Background-Agents-Pitfall-(3-of-n).aspx)

# c# - 如何在 ViewModel 和 Model 之间进行通信异步调用

> ID：11242453
> 
> 赞同：0
> 
> 时间：2012-06-28T10:15:32.603
> 
> 标签：c#, silverlight, mvvm-light

我正在用 MVVMLight 编写一个 MVVM Silverlight 应用程序。我在问自己在 Model 和 ViewModel 之间进行通信的最佳方式是什么。我的模型有来自 web 服务的异步调用，我不知道获取返回值的最佳方法是什么。

我试过这个：

```
public static void ModifySomething(Something s)
{
    var c = MyServiceFactory.GetService();
    c.ModifySomethingCompleted += (sender, e) =>
    {
        if (e.Error != null)
        {
            Messenger.Default.Send(new XyzException(e.Error, "ModifyError"));
            return;
        }
        Messenger.Default.Send(e.Result, "ModifyOk");
    };
    c.ModifySomethingAsync(s);
} 
```

还有这个：

```
public static void ModifySomething(Something s, Action<Something, Exception> callback)
{
    var c = ServiceFactory.RecupererService();
    c.ModifySomethingCompleted += (sender, e) =>
    {
        if (callback != null) callback(e.Result, e.Error);
    };
    c.ModifySomethingAsync(s);
} 
```

两者都有效，在第一个示例中，我使用的是 MvvmLight Messenger，因此我必须为模型的每个方法注册一个字符串消息列表，然后任何 ViewModel 都可以挂钩此操作。

在第二个示例中，我使用经典方法发送在 Completed 事件上触发的回调。只触发了一个回调，但代码更具可读性。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T10:47:13.217

我会说：取决于！严重地！这取决于

*   你想完成什么（良好的设计、可扩展性等）
*   你习惯做什么
*   您想要的目标环境想要什么
*   有多少人在做这个项目
*   估计。1.000 件以上

我喜欢第一种方法，因为它给了我类似服务总线的行为，如果我愿意，我可以使用配置。第二个在类型安全方面更具体，因为您可能会在发布消息时出错。

# java - 在 HttpResponse 中发送波形文件会使其损坏

> ID：11242456
> 
> 赞同：0
> 
> 时间：2012-06-28T10:16:03.177
> 
> 标签：java, audio, download, wav, httpresponse

我正在尝试从我的 Java Spring 项目的资源中读取一个 wav 文件，然后将该文件转换为字节数组并将其写入 HttpResponse 的输出流。当我从我的 Web 应用程序收到文件时，它被垃圾数据破坏了。

这是我的 servlet 中的代码：

```
response.setContentType("audio/wav");
response.setHeader("Content-Disposition", "attachment;filename=audio-qrcode-"+"hellosine"+".wav");
response.setHeader("Pragma", "private");
response.setHeader("Cache-Control", "private, must-revalidate");
response.setHeader("Accept-Ranges", "bytes")

URL helloSineWav = QRcodeController.class.getClassLoader().getResource("hellosine.wav");
byte[] audioBytes = IOUtils.toByteArray(helloSineWav.openStream());
response.setContentLength(audioBytes.length);
ServletOutputStream outStream = response.getOutputStream();
outStream.write( audioBytes );
outStream.flush();
outStream.close(); 
```

我尝试解决的另一种方法是：

```
ServletOutputStream out = response.getOutputStream();
byte[] buf = new byte[1024];
int len;
while ((len = is.read(buf)) > 0) {
    out.write(buf, 0, len);
}
is.close();
out.close(); 
```

两种方法都有效，但在另一端给了我一个损坏的音频文件。我不确定为什么会这样。它与标题有关吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T09:01:58.703

我解决了这个问题。它与 httpResponse 或任何这些都没有真正的关系。我将 wave 文件添加到 Java 项目并从中打包了一个 war 文件。但是当我部署项目并且资源文件被解压缩时，它会改变文件的大小，并引入一些垃圾信息。我目前正在研究为什么会发生这种情况。但就这个问题而言，当我用正确大小的文件替换波形文件时，它可以工作。很抱歉打扰各位了。

# asp.net - 限制按钮客户端点击事件的回发

> ID：11242460
> 
> 赞同：0
> 
> 时间：2012-06-28T10:16:18.720
> 
> 标签：asp.net

我在更新面板中有一个 asp 按钮，并且更新面板附带了一个更新进度。我想在按钮的客户端点击事件上限制页面回发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T10:19:19.607

对我有用的东西：

... OnclientClick="yourfunction(); return false;"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T10:21:29.663

您可以进行 javascript 函数调用，返回 true 表示继续，返回 false 表示停止。

```
function AskFor()
{
    if(continue check)
     return true;
    else
     return false;
} 
```

并在您的按钮上添加`OnClientClick="return AskFor();"`

# silverlight - 如何在 Windows Phone 7 中播放网络电台？

> ID：11242461
> 
> 赞同：1
> 
> 时间：2012-06-28T10:16:21.373
> 
> 标签：silverlight, windows-phone-7

我有这个用于无线电流的 URL“rtmp://203.146.251.6/live”。

如何在 Windows Phone 7 上播放它？

# facebook - 如何检索与自定义打开图形对象 URL 关联的 facebook ID？

> ID：11242467
> 
> 赞同：2
> 
> 时间：2012-06-28T10:16:50.880
> 
> 标签：facebook, facebook-graph-api, facebook-fql

我已经定义了一个自定义对象并创建了一个使用元标记*`my_object`*托管的实例：*`my_url`*

```
<meta property="fb:app_id" content="my_app_id" />
<meta property="og:type" content="my_namespace:my_object" />
<meta property="og:url" content="my_url" />
<meta property="og:title" content="my_title" />
<meta property="og:description" content="my_description" /> 
```

我能够在我的应用程序中使用它*`my_url`*作为标识符来喜欢这个对象。现在我想检索有关此特定实例的信息，如下所述：[https ://developers.facebook.com/docs/opengraph/objects/#retrieve](https://developers.facebook.com/docs/opengraph/objects/#retrieve)

即，我想执行：

```
GET https://graph.facebook.com/1015012577744568 
```

但是文档根本没有提到这个`1015012577744568`数字 ID 的来源。我只有*`my_url`*作为标识符，以下查询不起作用：

```
GET https://graph.facebook.com/my_url 
```

所以问题是：**如何为我的对象实例获取这个 facebook 数字 ID？**

# python - _ <__method_name> 模式覆盖了父 <__method_name>，为什么？

> ID：11242469
> 
> 赞同：2
> 
> 时间：2012-06-28T10:17:00.133
> 
> 标签：python, inheritance

我今天看到一个示例，该方法覆盖了具有不同名称的基类中的方法，这是如何以及*为什么*可能的？它可能有什么用途？

```
>>> class A(object):
...   def foo(self):
...     self.__bar()
...   def __bar(self):
...     print "original"
... 
>>> class B(A):
...   def _A__bar(self):
...     print "overridden"
... 
>>> B().foo()
overridden 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T10:22:35.373

哇，这真的太可怕了。

这是有效的，因为以双下划线开头的方法 - 中的`__bar`方法`A`- 被命名为在 Python 中模拟“私有”函数的一种非常基本的方式。但它们实际上并不是私有的，它们只是以 . 为前缀`_classname`。所以这里的 coder 就是利用这个来覆盖 A 中所谓的私有方法。

这行得通，但你永远不应该这样做。（事实上​​，你几乎不应该使用双下划线私有属性，但这是一个不同的讨论。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T10:26:29.443

这样类就可以具有不会意外与子类的属性混淆的属性。这很少是必要的，这就是为什么您不会经常看到`__`前缀属性的原因（我经常看到 Java 程序员滥用它，因为他们认为它做了一些它没有做的事情）

这段代码不适合抨击类的属性。Python 不会阻止你这样做，但很难找到编写这样的代码的充分理由

# jsp - 带有标记库的 Jsp 脚本

> ID：11242479
> 
> 赞同：-2
> 
> 时间：2012-06-28T10:17:39.620
> 
> 标签：jsp, struts, jstl, displaytag

下面是我的代码片段，我正在使用带有标记库的脚本。

```
 <display:column title="Modify">
        <%String userType=(String)session.getAttribute("userType");
        if(userType.equalsIgnoreCase("D"))
        {
        %>

     <html:link action="/deleteOwner.do?type=del&owner_id=${data.owner_id}">Delete</html:link> 

     <%} else if(userType.equalsIgnoreCase("A")){%>

        <c:if test="${data.type == 'A'}">  

     <html:link action="/deleteOwner.do?type=del&owner_id=${data.owner_id}">Delete</html:link> 
        </c:if>
                </display:column>

        <%}%> 
```

但我越来越

```
org.apache.jasper.JasperException: Unable to compile class for JSP: 

An error occurred at line: 280 in the generated java file
Syntax error, insert "while ( Expression ) ;" to complete DoStatement 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T13:14:35.443

尽量不要将 scriptlet 与 jstl 混合使用。只会让你头疼。而是将 if/else 语句替换为 choose/when/otherwise 语句。

对于您的 equalsIgnoreCase() 语句，您可以简单地在您的 userType 上调用 fn:toUpperCase 来进行比较。

使用 EL，您可以使用 ${userType} 拉取 userType 参数

# javascript - 如何调整谷歌信息窗口的大小

> ID：11242480
> 
> 赞同：1
> 
> 时间：2012-06-28T10:17:42.433
> 
> 标签：javascript, css, google-maps, google-maps-markers, infowindow

我在 Google 地图上使用 infoWindow 显示一些信息时遇到问题。我想让这个白色 div 更小，以便它的大小可以匹配其中的灰色框。我想让这个从标记到白色 div 的“白色”箭头也更小。

这是图片： ![在此处输入图像描述](../Images/09e19c6db72dbb94c8f3e083660973e3.png)

我的代码：

```
var contentString = '<form >'+
  '<h2><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Data:</b></h2>'+
  '<div id="bodyContent">'+
  '<div style=width:220px;display:inline-block;>'+
  '<p>&nbsp;' +'</p>' + '<p>&nbsp;' + '</p>' + '<p>&nbsp;' + '</p>' +
  '<p>&nbsp;' + '</p>' + '</div>'+
  '<div style=width:220px;display:inline-block;>'+
  '<p>&nbsp;' +'</p>' + '<p>&nbsp;' + '</p>' + '<p>&nbsp;' + '</p>' +
  '<p>&nbsp;' + '</p>' + '</div>'+ '</div>'+ '</form>';
var infowindow = new google.maps.InfoWindow({
  content: contentString
});
/* info window */
infowindow.open(map,tracked); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T14:56:47.760

您可以通过多种方式更改 infoWindow 的大小。一种是在 中设置标签的`width` and `height`，这本质上是白色 infoWindow 的样式。所以，。`<form>``contentString``<form style="width:240px; height:240px">`

另一个选项是`maxWidth`为您的 infoWindow 设置选项 - 没有选项`height`，我相信它会根据您的内容进行调整。请参阅[Google Maps API 参考以获取 infoWindowOptions](https://developers.google.com/maps/documentation/javascript/reference#InfoWindowOptions)。您必须像这样设置它：

```
 var infowindow = new google.maps.InfoWindow({
        content: contentString,
        maxWidth: 240
    }); 
```

但是，我认为当前的 API 无论如何都不能更改“白色”箭头的大小。您可以考虑使用[infoBubble 库](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobubble/)- 它是您可以与 Google 地图一起使用的众多开源库之一（这里是其他库的链接：[http ://code.google.com/p/google-maps-utility-库-v3/wiki/库](http://code.google.com/p/google-maps-utility-library-v3/wiki/Libraries)）。几乎，您将声明 infoBubble 与您声明 infoWindow 相同 - 但您有更多样式选项 - 特别是针对您的情况，您可以更改`arrowSize`：

```
 infoBubble = new InfoBubble({
        content: contentString,
        minWidth: 240, //width of your infoWindow/infoBubble
        arrowSize: 3 //set your desired size            
    }); 
```

# c# - C# - 从由 javascript 生成的 webbrowser 获取变量

> ID：11242482
> 
> 赞同：0
> 
> 时间：2012-06-28T10:17:55.460
> 
> 标签：c#, javascript, browser

已通过网络浏览器下载页面，需要获取邮件地址。但它是由javastript生成的。在代码中我可以找到这个脚本：

```
<script type="text/javascript" charset="utf-8">var i='&#109;a'+'i&#108;'+'&#116;o';var a='impexta&#64;impexta&#46;sk';document.write('<a href="'+i+':'+a+'" onclick="_kt.i(386728, 20);">'+a+'</a>');</script> 
```

我到处阅读如何调用脚本，我不知道他的名字。所以我想要的是获得“a”变量值。

编辑：之前的代码：

```
...
WebBrowser wb = new WebBrowser();
wb.DocumentCompleted += new WebBrowserDocumentCompletedEventHandler(wb_DocumentCompleted);
wb.Navigate(url);

for (; wb.ReadyState != WebBrowserReadyState.Complete; )
{
    System.Windows.Forms.Application.DoEvents();
}
...

void wb_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
{
        WebBrowser wb = sender as WebBrowser;
        if (wb != null)
        {
            if (wb.ReadyState == WebBrowserReadyState.Complete)
            {
                HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
                doc.Load(wb.DocumentStream);
             }
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T19:31:46.970

我找到了简单的解决方案。只需在 HTML 代码中找到字符串的正确部分：

```
foreach (HtmlNode link in root.SelectNodes("//script"))
{
    if (link.InnerText.Contains("+a+"))
    {
        string[] strs = new string[] { "var a='", "';document.write" };
        strs = link.InnerText.Split(strs, StringSplitOptions.None);
        outMail = System.Net.WebUtility.HtmlDecode(strs[1]);
        if (outMail != "")
        {
            break;
        }
    }
} 
```

# android - 单击行时无法使用 arrayadapter 在列表视图中找到索引或位置

> ID：11242485
> 
> 赞同：0
> 
> 时间：2012-06-28T10:18:02.053
> 
> 标签：android, android-listview

我使用以下教程链接[http://www.ezzylearning.com/tutorial.aspx?tid=1763429创建了一个列表视图](http://www.ezzylearning.com/tutorial.aspx?tid=1763429)

结果是，活动列表如下图 ![在此处输入图像描述](../Images/0c1c5ae6f98eda7a55af3804d28d87e2.png)

现在，我想通过单击单个行导航到不同的活动屏幕。我确实有导航到下一个屏幕的想法，但是我无法找到每一行的正确位置。我对android了解不多，所以如果我的问题太愚蠢，请直言不讳。

虽然代码在上面的链接中可用，但我附上了 .xml 文件和 .java。这里也是。

**主要的.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical" 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#FFFFFF"> 

     <ListView
        android:id="@+id/listView1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" />

</LinearLayout> 
```

**listview_item_row.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal" 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="10dp">

     <ImageView android:id="@+id/imgIcon"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:gravity="center_vertical"
        android:layout_alignParentTop="true"
        android:layout_alignParentBottom="true"
        android:layout_marginRight="15dp"
        android:layout_marginTop="5dp"
        android:layout_marginBottom="5dp" />

     <TextView android:id="@+id/txtTitle"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:gravity="center_vertical"
        android:layout_alignParentTop="true"
        android:layout_alignParentBottom="true"
        android:textStyle="bold"
        android:textSize="22dp"
        android:textColor="#000000"
        android:layout_marginTop="5dp"
        android:layout_marginBottom="5dp" />

</LinearLayout> 
```

**天气.java**

```
public class Weather {
    public int icon;
    public String title;
    public Weather(){
        super();
    }

    public Weather(int icon, String title) {
        super();
        this.icon = icon;
        this.title = title;
    }
} 
```

**WeatherAdapter.java**

```
public class WeatherAdapter extends ArrayAdapter<Weather>{

    Context context; 
    int layoutResourceId;    
    Weather data[] = null;

    public WeatherAdapter(Context context, int layoutResourceId, Weather[] data) {
        super(context, layoutResourceId, data);
        this.layoutResourceId = layoutResourceId;
        this.context = context;
        this.data = data;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View row = convertView;
        WeatherHolder holder = null;

        if(row == null)
        {
            LayoutInflater inflater = ((Activity)context).getLayoutInflater();
            row = inflater.inflate(layoutResourceId, parent, false);

            holder = new WeatherHolder();
            holder.imgIcon = (ImageView)row.findViewById(R.id.imgIcon);
            holder.txtTitle = (TextView)row.findViewById(R.id.txtTitle);

            row.setTag(holder);
        }
        else
        {
            holder = (WeatherHolder)row.getTag();
        }

        Weather weather = data[position];
        holder.txtTitle.setText(weather.title);
        holder.imgIcon.setImageResource(weather.icon);

        return row;
    }

    static class WeatherHolder
    {
        ImageView imgIcon;
        TextView txtTitle;
    }
} 
```

**MainActivity.java**

```
public class MainActivity extends Activity {

    private ListView listView1;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Weather weather_data[] = new Weather[]
        {
            new Weather(R.drawable.weather_cloudy, "Cloudy"),
            new Weather(R.drawable.weather_showers, "Showers"),
            new Weather(R.drawable.weather_snow, "Snow"),
            new Weather(R.drawable.weather_storm, "Storm"),
            new Weather(R.drawable.weather_sunny, "Sunny")
        };

        WeatherAdapter adapter = new WeatherAdapter(this, 
                R.layout.listview_item_row, weather_data);

        listView1 = (ListView)findViewById(R.id.listView1);

        View header = (View)getLayoutInflater().inflate(R.layout.listview_header_row, null);
        listView1.addHeaderView(header);

        listView1.setAdapter(adapter);
    } 
```

任何帮助将不胜感激谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T10:22:07.577

你需要附上`OnItemClickListener`

```
listView1.setOnItemClickListener(new OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView <?> adapterView, View view, int position, long id) {
        // position is index of the row that was clicked
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T10:20:33.160

在哪里`listView1.setOnItemClickListener`？你有没有设置`setOnItemClickListener to listView1?.`和在下面的代码 onItemClick 有`position`。

```
listView1.setOnItemClickListener(new OnItemClickListener() {
@Override
public void onItemClick(AdapterView<?> parent, View view, int position,long id) {

            }
        }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T10:20:37.787

你应该做这样的事情

```
listView1.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view, int position, long id) { //do something
        }
    }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-28T10:22:21.163

使用 setOnItemSelectedListener 和列表[http://developer.android.com/reference/android/widget/AdapterView.OnItemSelectedListener.html](http://developer.android.com/reference/android/widget/AdapterView.OnItemSelectedListener.html)

```
listView1.addHeaderView(header);
listView1.setAdapter(adapter);

listView1.setOnItemSelectedListener(
    new OnItemSelectedListener() {
        @Override
        public void onItemSelected(
            AdapterView<?> parent, View view, int pos, long id
        ) {
             //where pos is your index 
        }

        @Override
        public void onNothingSelected(AdapterView<?> arg0) {}

    }
); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-28T10:23:50.577

试试这个方法...

```
listView1.setOnItemClickListener(new AdapterView.OnItemClickListener() {

                        @Override
                        public void onItemClick(AdapterView<?> arg0, View arg1,
                                int position, long arg3) {

    Toast.makeText(context, position+"", Toast.LENGTH_LONG).show();

                                Intent go_detail_Activity_Intent= new Intent(context,Target_Activity.class);
                                go_detail_Activity_Intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                                context.startActivity(go_detail_Activity_Intent);

                        }
                    }); 
```

我认为它对你有帮助。

# java - 在java中启动对象的位置

> ID：11242488
> 
> 赞同：-3
> 
> 时间：2012-06-28T10:18:05.143
> 
> 标签：java, while-loop

这个问题与我对另一个问题的回答有关。原来的问题在[这里](https://stackoverflow.com/questions/11241215/using-hashmapstring-string-as-a-key-object-in-my-hashmapk-v/11242397#11242397)

任何人都可以解释为什么错误的代码会按照评论中解释的方式失败（因为它是伪代码）

```
 // bad code
        ResultSet rs = getDataFromDBMS("Select * from [tableName];");

            //temp uses a collection member within it to hold a list of column names to data value pairs (hashmap<String,String>)
        Object temp = new objectToHoldInfoFromResultSet();

        // loop over the result set
        while (rs.next)// for each row in the result set
        {
            for (int i = 1; i <= rs.getNumberColums; i++) {
                temp.add(infoAboutColumn);
            }
            temp.printInfo();// always prints correct (ie current) info
                    //the print just takes the hashmap member and asks for a       
                    //toString() on it
            anotherObject(makeUseOf(temp));// always uses info from first
                   //iteration. Essentially grabs the hashMap member of temp, and puts
                   //this into another collection of type 
                   //HashMap< HashMap<String,String>, temp> see the linked question
                   //for more detail.

        }

        // Seemingly each loop into the while the temp.doSomethingToData(); uses
        // the temp object created in the first iteration

        // good code
        ResultSet rs = getDataFromDBMS("Select * from [tableName];");

        // loop over the result set
        while (rs.next)// for each row in the result set
        {
            Object temp = new objectToHoldInfoFromResultSet();// moving
                                                                // declaration
                                                                // of temp into
                                                                // the while
                                                                // loop solves
                                                                // the problem.
            for (int i = 1; i <= rs.getNumberColums; i++) {
                temp.add(infoAboutColumn);
            }
            temp.printInfo();// always prints correct (ie current) info

            anotherObject(makeUseOf(temp));// also uses the correct (ie current)
                                            // info.

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T10:26:40.327

我不知道为什么一个是好的，另一个是坏的。我的猜测（不知道 objectToHoldInfoFromResultSet 和其他方法的行为是什么）如下：

在第一种情况下，“objectToHoldInfoFromResultSet”（应该大写）每次都创建一次

```
temp.add(infoAboutColumn); 
```

被调用，新的记录数据被添加到对象中。我猜应该为每条记录清除此信息......否则你会得到很多重复。通过重新初始化持有者对象来处理复制。即 (1 2 3 4 5 6) 而不是 (1 1 2 1 2 3 1 2 3 4 1 2 3 4 5 1 2 3 4 5 6)。

对各种礼物不了解，我也无话可说。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T10:26:45.717

`temp.printInfo()`如果不知道什么和在做什么，我们就无法可靠地回答这个问题`makeUseOf()`。很容易实现它们以按照您描述的方式行事。

当您`temp`在循环外实例化时，您将在循环的所有迭代中使用相同的对象。因此，它可以从每次迭代中收集数据（例如，收集到一个集合中）。然后，方法可以获取在当前迭代中累积的数据，以及从任何先前的迭代中累积的数据，如果不是故意的，这可能会导致问题。

所以让我们假设`temp`包含一个集合，并且在每次迭代中，结果集中的一列被添加到它。现在，如果`temp.printInfo()`实现打印有关此集合中*最后一个*元素的信息，而实现对集合中的*第一个*`makeUseOf()`元素执行某些操作，则会得到您观察到的行为。

 *OTOH，当您`temp`在循环内实例化时，您将在每次迭代中获得一个新的、不同的对象，它不会“记住”早期迭代中的任何数据。因此，即使使用上面概述的实现`temp.printInfo()`，`makeUseOf()`您也会得到正确的结果。*

# jasper-reports - 如何仅显示超过一页的报告的第 x 页

> ID：11242490
> 
> 赞同：3
> 
> 时间：2012-06-28T10:18:09.817
> 
> 标签：jasper-reports

我正在使用 jasper 报告-4.5.0。我正在使用这个 jasper 生成不同格式的报告。我想在我的报告中显示 Y 页的 X 页。所以我正在使用 iReport 提供的页码文本字段，该字段在调色板中可用。它在所有报告中显示页码，即使是具有单页的报告也是如此。

所以我的要求是如果我的报告只有一页，我不想要第 x 页。我该如何做到这一点？

下面的代码目前我正在根据给定的答案使用。

```
<textField>
                    <reportElement x="395" y="121" width="20" height="20">
                       <printWhenExpression><![CDATA[$V{PAGE_COUNT} > 1]]></printWhenExpression>
                    </reportElement>
                    <textElement textAlignment="Right"/>
                    <textFieldExpression><![CDATA["Page "+$V{PAGE_NUMBER}+" of"]]></textFieldExpression>
                </textField>
                <textField evaluationTime="Report">
                    <reportElement x="350" y="121" width="45" height="20">
                    <printWhenExpression><![CDATA[$V{PAGE_COUNT} > 1]]></printWhenExpression>
                    </reportElement>
                    <textElement/>
                    <textFieldExpression><![CDATA[" " + $V{PAGE_NUMBER}]]></textFieldExpression>
                </textField> 
```

如果我这样使用，我将无法获得超过一页的报告中的页码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T18:13:45.653

您需要为`Print When Expression`包含`"Page "+$V{PAGE_NUMBER}+" of"`和的两个字段设置`" " + $V{PAGE_NUMBER}`。包含这两个字段的 jrxml 部分应类似于：

```
<textField>
    <reportElement uuid="90a3462d-cfa2-4768-904a-1edf4191f1b7" x="250" y="16" width="80" height="20">
        <printWhenExpression><![CDATA[$V{PAGE_COUNT} > 1]]></printWhenExpression>
    </reportElement>
    <textElement textAlignment="Right"/>
    <textFieldExpression><![CDATA["Page "+$V{PAGE_NUMBER}+" of"]]></textFieldExpression>
</textField>
<textField evaluationTime="Report">
    <reportElement uuid="01d43267-3247-48bb-9822-8b58ea860d7f" x="330" y="16" width="40" height="20">
        <printWhenExpression><![CDATA[$V{PAGE_COUNT} > 1]]></printWhenExpression>
    </reportElement>
    <textElement/>
    <textFieldExpression><![CDATA[" " + $V{PAGE_NUMBER}]]></textFieldExpression>
</textField> 
```

# sql - 实体框架 - 导航属性问题

> ID：11242502
> 
> 赞同：0
> 
> 时间：2012-06-28T10:18:47.670
> 
> 标签：sql, visual-studio-2010, entity-framework-4

我有一个名为“PublicUserNotification”的表，其中包含以下列：

1.  PublicUserId - 映射到 PublicUser.Id
2.  FromPublicUserId - 映射到 PublicUser.Id

但是，当我在 Visual Studio 2010 中更新我的 edmx 文件时，问题就开始了。

这两列的导航属性设置为“PublicUser”和“PublicUser_1”。

这使得在此表上使用 EF 令人困惑，因为我们不知道 PublicUser_1 实际映射到。

因此，我的问题是，是否有人知道阻止这种情况发生的方法，而是让 EF 为这种情况创建“有用的”导航属性名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T10:31:12.790

打开您的 edmx 文件并右键单击您的设计器。选择“模型浏览器”。在模型浏览器中，您可以浏览到实体类型并打开您的表。如果您选择导航属性并打开属性窗口，您可以更改导航属性的名称。

# android - 如何在主屏幕中隐藏所有应用程序快捷方式？

> ID：11242504
> 
> 赞同：-2
> 
> 时间：2012-06-28T10:18:54.707
> 
> 标签：android

我的 Android 模拟器显示了很多应用程序快捷方式。如何在主屏幕中隐藏所有应用程序快捷方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T10:20:29.527

你**不能**。您无法控制应用程序中的第三方应用程序行为。此外，您对应用程序中的主屏幕没有任何权利。**从设置应用程序**中手动删除这些应用程序是一种选择。

# .net-4.0 - DataAnnotations：Visual Studio 不允许覆盖 RequiresValidationContext 属性

> ID：11242505
> 
> 赞同：1
> 
> 时间：2012-06-28T10:18:56.593
> 
> 标签：.net-4.0, data-annotations, visual-studio-2012, .net-4.5

我试图通过继承`ValidationAttribute`并发现奇怪的事情来实现自定义验证属性。
我的自定义属性需要验证上下文，所以我查看了 ValidationAttribute 的 R# 反编译源并看到，我需要在自定义属性类中覆盖它：

```
public virtual bool RequiresValidationContext
{
  get
  {
    return false;
  }
} 
```

现在有趣的部分 - Visual Studio 2012 不允许我这样做，告诉我没有这样的覆盖属性，尽管在运行项目时，在调试视图中我可以看到该属性。

有趣的是，在参考路径中我看到：

> C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework.NETFramework\v4.0\System.ComponentModel.DataAnnotations.dll

但在 R# 反编译文件中是不同的路径：

> 组装位置：C:\Windows\Microsoft.NET\Framework\v4.0.30319\System.ComponentModel.DataAnnotations.dll

因此，编译器使用与运行时不同的 dll。所以，我尝试将引用 dll 切换到一个 R# 反编译，但看起来 VS2012 无论如何都用它的版本替换它，在项目文件中它看起来像：

```
<Reference Include="System.ComponentModel.DataAnnotations" /> 
```

因此，项目中没有保存路径。如果不手动编辑项目，是否有任何解决方案？

顺便说一句，使用 4.5 NET 它可以正常工作，我的意思是它认为 RequiresValidationContext 属性是应该的。

更新：正如他们所说，图片胜过千言万语：

![在此处输入图像描述](../Images/7a872ab59deee21bc4e5f8ae9d769f5d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T11:13:39.903

解决方案很简单，将属性 RequiresValidationContext 添加到[.NET 4.5](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.validationattribute.requiresvalidationcontext%28v=vs.110%29.aspx)的 ValidationAttribute 中。由于您正在使用 C# 4.0 进行编码/使用/开发，我怀疑您的目标是 .NET Framework 4.0，并且在该版本中该属性不[存在](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.validationattribute%28v=vs.100%29.aspx)。

所以你不能覆盖该属性，因为它不存在。

# postgresql - 从 CSV 批量导入 PostgreSQL 失败。错误：整数的无效输入语法：“1990-01-02”

> ID：11242512
> 
> 赞同：1
> 
> 时间：2012-06-28T10:19:15.300
> 
> 标签：postgresql, csv, data-import

我正在将 CSV 文件中的数据导入到 postgreSQL 表中。

该表如下所示：

```
CREATE TABLE foo_stats (
                        td                      DATE NOT NULL,
                        ins_id                  INTEGER CHECK (ins_id > 0) NOT NULL,
                        df_id                   INTEGER CHECK (df_id > 0) NOT NULL,
                        pc                      REAL NOT NULL DEFAULT 0.0,
                        ph                      REAL DEFAULT 0.0 NOT NULL,
                        pl                      REAL DEFAULT 0.0 NOT NULL,
                        av                      REAL DEFAULT 0.0 NOT NULL,
                        cv                      BIGINT DEFAULT 0 NOT NULL,
                        avi                     REAL DEFAULT 0.0 NOT NULL,
                        cmi                     BIGINT DEFAULT 0 NOT NULL,
                        vwp                     REAL CHECK (vwp >= 0) NOT NULL,
                        atr                     REAL NOT NULL DEFAULT -99999,
                        pv                      REAL NOT NULL DEFAULT -99999,
                        pr                      REAL NOT NULL DEFAULT -99999,

                        PRIMARY KEY                     (ins_id, df_id, td)
                        ); 
```

在批量复制之前，我使用删除主键`ALTER TABLE DROP CONSTRAINT PRIMARY KEY`

这是我`COPY`在 psql CLI 调用命令时的 CL 跟踪：

```
mydb=# COPY foo_stats FROM '/path/to/data/foo_stats.csv' WITH CSV;
ERROR:  invalid input syntax for integer: "1990-01-02"
CONTEXT:  COPY foo_stats, line 1, column id: "1990-01-02"
mydb=# 
```

以下是输入 CSV 文件的前几行：

```
"1990-01-02",388,3,-99999,0.913,0.91,0.0,0,0.0,0,0,-99999,-99999,-99999
"1990-01-02",388,4,-99999,0.913,0.91,0.0,0,0.0,0,0,-99999,-99999,-99999
"1990-01-02",388,1,-99999,0.913,0.91,0.0,0,0.0,0,0,-99999,-99999,-99999
"1990-01-02",388,7,-99999,0.913,0.91,0.0,0,0.0,0,0,-99999,-99999,-99999
"1990-01-02",388,6,-99999,0.913,0.91,0.0,0,0.0,0,0,-99999,-99999,-99999 
```

输入文件中的数据列与表模式中的顺序相同。谁能解释为什么我收到错误消息？

PS：我在 Ubuntu 10.0.4 LTS 上使用 PostgreSQL 8.4

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T10:56:42.787

在此处剪切和粘贴您的表定义和示例数据显示一切正常。

所以 - 你的表定义或你的文件不是你想象的那样。如果您的表列的顺序不同，您可以在 COPY 命令中指定列。

如果文件不同，则可能是肉眼看不到的东西，或者您会在询问之前发现它。我不认为这个文件有任何机会来自 Windows 机器？

需要检查的三件事：

1.  文件开头的不必要的字节顺序标记 (BOM)
2.  \r\n 而不是 \n 的行尾
3.  任何其他控制代码

尝试剪切+粘贴您的示例数据，看看是否导入。如果是这样，请尝试在文本编辑器中打开您的真实文件并重新保存。如果这样可以解决问题，请使用十六进制编辑器并查看示例文件中的实际字节。

# android - 检查是否使用 Android 应用程序启用了蓝牙

> ID：11242519
> 
> 赞同：4
> 
> 时间：2012-06-28T10:20:04.680
> 
> 标签：android, bluetooth

我想检查是否在使用 Android 应用程序的设备中启用了蓝牙。我使用了 .isEnabled 方法。但是有一个错误。我发现（通过注释行）错误出在 .isEnabled 方法中。你能帮我解决这个问题吗？

```
final BluetoothAdapter bluetooth = BluetoothAdapter.getDefaultAdapter();

submitButton.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View v) {
        String status = "Bluetooth";

        if(bluetooth != null) {
            if (bluetooth.isEnabled()) {
                String mydeviceaddress = bluetooth.getAddress();
                String mydevicename = bluetooth.getName();
                status = ("Address "+ mydeviceaddress + " Name" + mydevicename);
                Toast.makeText(getApplicationContext(), "" + status + "", Toast.LENGTH_LONG).show();
            } else {
                status = ("Bluetooth not enabled");
                Toast.makeText(getApplicationContext(), "" + status + "", Toast.LENGTH_LONG).show();
            }
        } else {
            Toast.makeText(getApplicationContext(), "" + status + "", Toast.LENGTH_LONG).show();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2014-01-09T01:25:07.843

这对我来说效果最好：

```
/**
 * Check for Bluetooth.
 *
 * @return true if Bluetooth is available.
 */
public boolean isBluetoothAvailable() {
    final BluetoothAdapter bluetoothAdapter = BluetoothAdapter.getDefaultAdapter();

    return bluetoothAdapter != null 
        && bluetoothAdapter.isEnabled() 
        && bluetoothAdapter.getState() == BluetoothAdapter.STATE_ON;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-28T10:25:34.750

尝试这个。

```
BluetoothAdapter bluetoothAdapter = BluetoothAdapter.getDefaultAdapter();
if (bluetoothAdapter == null) {
    // Device does not support Bluetooth
} else {
    if (!bluetoothAdapter.isEnabled()) {
        // Bluetooth is not enabled
    }
} 
```

在你的`AndroidManifest.xml File`添加

```
<uses-permission android:name="android.permission.BLUETOOTH" /> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-08-17T08:52:47.810

Jared Burrows 的答案似乎是正确的，但是我必须在它开始工作之前添加一个附加项。我必须检查蓝牙状态。

```
public static boolean isBluetoothAvailable() {
    final BluetoothAdapter bluetoothAdapter = BluetoothAdapter.getDefaultAdapter();

    return (bluetoothAdapter != null &&
            bluetoothAdapter.isEnabled() &&
            bluetoothAdapter.getState() == BluetoothAdapter.STATE_ON);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-02T14:34:43.203

为什么不只是：

```
...
return mBluetoothAdapter != null && mBluetoothAdapter.isEnabled(); 
```

# jquery - 在 AJAX 成功时动态生成表行

> ID：11242536
> 
> 赞同：5
> 
> 时间：2012-06-28T10:20:49.967
> 
> 标签：jquery, ajax, html-table

我想做的是：当用户点击发送时，我希望数据显示在一个`<tr/>`（每个字段都嵌套在自己的`<td/>`）中。

我已经编写了一个实际执行此操作的脚本，但系统还不是动态的。

HTML：

```
<form name="contact" method="post" action="">
    <p>
        <label for="name">Name</label>
        <input type="text" name="name" id="name" />
    </p>
    <p>
        <label for="age">Age</label>
        <input type="text" name="age" id="age" />
    </p>
    <p>
        <label for="mail">Mail</label>
        <input type="text" name="mail" id="mail" />
    </p>
    <p>
        <input type="submit" name="submit" id="submit" value="Send" />
    </p>
</form>
<table id="results"></table> 
```

JS：

```
$(function() {
    $("#submit").click(function() {

        var name = $("input#name").val();
        var age = $("input#age").val();
        var mail = $("input#mail").val();

        var dataString = [name, age, mail];
        var n = dataString.length;

        $.ajax({
            type: "POST",
            url: "process.php",
            data: dataString,
            success: function() {
                $('#results').append(
                    $('<tr>')
                        .append($('<td>').append(dataString[0]))
                        .append($('<td>').append(dataString[1]))
                        .append($('<td>').append(dataString[2]))
                );
            }
        });
        return false;
    });
}) 
```

如您所见，我使用 手动获取字段`dataString[x]`，但是如何使该系统**动态化**？

我正在考虑使用如下循环，但我似乎无法使其工作：

```
for(var i = 0; i < n; i++){
    row += "$('<td>').append("+dataString[i]+")";
}

$('#results').append(
    $('<tr>')
        .append(row)
); 
```

关于如何做到这一点的任何提示？或者你会有更清洁的解决方案吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-28T10:30:32.917

这行代码：

```
row += "$('<td>').append("+dataString[i]+")"; 
```

不是创建元素并向其附加数据，它只是连接`row`变量和字符串文字（包含 jQuery 代码）。

为什么不创建`row`一个**实际**的行 - 而不是包含行内容的字符串 - 然后将其附加到`success`回调处理程序中：

```
var row = $('<tr>');
for(var i = 0; i < n; i++) {
    row.append($('<td>').html(dataString[i]));
} 
```

然后：

```
$('#results').append(row); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T10:39:53.497

```
var row = '<tr>';
var col = '';
for(var i=0;i<dataString.length;i++)
    col += '<td>'+dataString[i]+'</td>';
row += '</tr>';
$('#results').append(row); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T10:56:26.417

试试这个，它肯定会奏效。

```
var str ='<tr>';
$.each(dataString, function(i){
    str += '<td>' + this + '<td>';
}
$('#results').append(str + '</tr>'); 
```

# html - 图像不垂直对齐中间 div

> ID：11242538
> 
> 赞同：2
> 
> 时间：2012-06-28T10:20:55.567
> 
> 标签：html, css

我正在尝试将图像插入到 div 中，但它没有居中对齐。

你能帮我么 ！

```
<div style="width:200px; height:200px; flaot:left; margin:0; padding:0;"><img src="image.png" width="100" height="100" /></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T10:23:37.923

```
<img style="vertical-align:middle;" src="image.png" width="100" height="100" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T10:41:38.117

如果你知道所有尺寸（div 和 img），你可以使用类似的东西：[tinkerbin](http://tinkerbin.com/vrUv9i8w)

CSS：

```
#content{
    width: 200px;
    height: 200px;
    margin: 0;
    padding: 0;
    float: left;
    line-height: 200px;
}

#content img{
    vertical-align: middle;      
}
​ 
```

HTML：

```
<div id="content">
    <img src="http://placekitten.com/120/120" width="100" height="100" />
</div>​ 
```

或者更多版本：[tinkerbin](http://tinkerbin.com/LpfINtHS)

CSS：

```
#content{
    width: 200px;
    height: 200px;
    margin: 0;
    padding: 0;
    float: left;
    position: relative;
}

#content img{
   position: relative;
   top: 50%;
   margin-top: -50px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T10:47:49.500

我通常使用它并且它有效...

```
<div style="width:200px; height:200px; margin:0; padding:0; display: table-cell; vertical-align: middle;"><img src="image.png" width="100" height="100" /></div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T10:27:12.177

当您知道所涉及的高度时，您可以使用负边距来实现这一点：

```
<div style="width:200px; height:200px; float:left; margin:0; padding:0;"><img src="image.png" width="100px" height="100px" style="margin-top: -50px" /></div> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-28T10:40:52.483

嘿，现在习惯于在你的**CSS**`Dispaly:table-cell`中属性和**删除** `float:left;`

 **像这样

**css**

```
.parent{
  width:200px; 
  height:200px;
 text-align:center;
  display:table-cell;
  vertical-align:middle;
  margin:0; padding:0;
  background:red;
} 
```

**html**

```
<div class="parent">
  <img src="http://outgrow.me/wp-content/uploads/2012/06/ramos-305x203.jpg" width="100px" height="100px" />
</div> 
```

现场演示[http://tinkerbin.com/4IU9UvR9](http://tinkerbin.com/4IU9UvR9)**

# c++ - 依赖于 std::begin() 和 std::end() 的 ADL？

> ID：11242542
> 
> 赞同：13
> 
> 时间：2012-06-28T10:21:05.713
> 
> 标签：c++

在对标准容器进行迭代时，您认为省略`std::`前缀并依靠 ADL 来查找定义是否是个好主意？例子：

```
std::vector<int> vec = get_vec();
// range-based for loop would be preferred here, but just for the sake of example
for (auto it = begin(vec), end = end(vec); it != end; ++it) { /*...*/ } 
```

是否有任何理由这样做或不这样做？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-28T10:28:59.670

如果您打算使用 ADL 来更改容器类型而不更改循环，请添加`using std::begin; using std::end;`. 这确保它可以`std`从其他具有`begin`和`end`成员的命名空间中找到容器的函数，但在它们的命名空间中没有自由函数。

```
namespace my {
    template <typename T>
    struct container {
        // ... stuff
        iterator begin();
        iterator end();
    };
    // no begin/end free functions
}

my::container<int> vec = get_vec();
using std::begin;
using std::end;
for (auto it = begin(vec), end = end(vec); it != end; ++it) { /*...*/ }
// defaults to std::begin which defaults to .begin() member function 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-28T10:30:19.827

> 您认为省略 std:: 前缀并依靠 ADL 查找定义是个好主意吗？

我认为这是个好主意。在这样的模板中变得有必要：

```
template<typename Container>
void do_work(Container const & c)
{ 
  using std::begin;  //enable ADL
  using std::end;    //enable ADL 

  //now let compiler search the correct begin/end in the initialization part
  for(auto it = begin(c), itend = end(c); it != itend ; ++it)
  {
       //do work
  } 
} 
```

这里既然`Container`可以是程序员定义的类型，比如在 namespace 中`xyz`，那么如果我编写`std::begin`而不是仅仅`begin`（在初始化部分），上面的函数模板将如何工作？

# java - 在数据库中存储 Windows 路径并使用 java 通过 Hibernate 检索

> ID：11242543
> 
> 赞同：0
> 
> 时间：2012-06-28T10:21:09.210
> 
> 标签：java, windows, hibernate, file

使用 java 如果我将 windows 路径存储在 h2 数据库中，然后尝试使用 Hibernate 通过匹配文件名来检索对象，即

```
public static List<Object[]> findSongsRecNoAndModifiedDateWithinFolder(Session session, String folder)
    {
        Query q = session.createQuery("select recNo, filename, lastModified from Song t1 where t1.filename like :filename");
        q.setParameter("filename", folder+'%', StandardBasicTypes.STRING);
        List<Object[]> results = (List<Object[]>)q.list();
        return results;
    } 
```

我没有匹配。

如果我在添加到数据库时将所有 '\' 转换为 '/' 并尝试检索它所有工作，但这有点痛苦，我试图忽略 UNIX 和 Windows 文件路径之间的差异。

所以问题与 Windows 文件分隔符 '\' 也是 Java（和数据库）转义字符有关。但我真的不明白Java、数据库或休眠的问题，如果我能解决它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T10:40:36.580

有关您的问题的答案，请参见[http://groups.google.com/group/h2-database/browse_thread/thread/390eed5e21584faa?pli=1](http://groups.google.com/group/h2-database/browse_thread/thread/390eed5e21584faa?pli=1)`\` ：是 H2 中的默认转义字符，您需要将其转义（使用另一个`\`) 如果您在 like 子句中使用它。

或者您可以将默认转义字符设置为空字符串以避免这种转义问题。请参阅[http://www.h2database.com/javadoc/org/h2/constant/DbSettings.html](http://www.h2database.com/javadoc/org/h2/constant/DbSettings.html)并搜索“defaultEscape”。

# ios - 如何使水平 uiscrollview 垂直可拖动？

> ID：11242554
> 
> 赞同：0
> 
> 时间：2012-06-28T10:21:58.107
> 
> 标签：ios, uiscrollview

我有一个 uiscrollview，内容大小为

```
scrollView.contentSize = CGSizeMake(self.view.frame.size.height*3, self.view.frame.size.height); 
```

即水平 3 页，我可以水平滚动。

我的问题是，我怎样才能让这个滚动视图像 UIWebView 一样垂直拖动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T10:25:25.403

我不确定我明白你想做什么，但不会

```
scrollView.contentSize = CGSizeMake(self.view.frame.size.height*3, self.view.frame.size.height *3); 
```

和你一起工作？或者你还想达到什么目标

# android - Android：如何获取文件的最后修改日期？

> ID：11242566
> 
> 赞同：0
> 
> 时间：2012-06-28T10:22:24.603
> 
> 标签：android

应用程序需要写入文件的最后修改日期。

```
 void Dater(String DateFile) {
          File file = new File(DateFile);
          if(file.exists()){
              Long lastModified = file.lastModified();
              Date date = new Date(lastModified);
              textView2.setText(String.valueOf(date));
          }
      } 
```

但是 textView2 是空的。文件没问题（我打开它）。

```
Dater("n" + String.valueOf(itemname)+".txt"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T10:28:30.763

我认为你的 file.exists() 失败了。给出文件的绝对路径

如果是内部文件，那么

```
Dater(activity.getFilesDir().getAbsolutePath() + "/n" + String.valueOf(itemname)+".txt"); 
```

如果在 sdcard 上，那么

```
Dater(Environment.getExternalStorageDirectory() + "/n" + String.valueOf(itemname)+".txt"); 
```

# asp.net - Appfabric 缓存 maxconnectionstoserver

> ID：11242572
> 
> 赞同：0
> 
> 时间：2012-06-28T10:22:46.047
> 
> 标签：asp.net, appfabric, connection, throttling

我有一个关于使用 AppFabric 缓存时网络连接限制的查询。

就基于 ASP.NET WCF 的应用程序而言，Windows AppFabricCache 'maxConnectionsToServer' 设置如何与 System.Net 'maxconnection' 设置交互？

例如。如果如下所示，maxConnectionsToServer 设置为 100，但 maxconnection 设置为 50，那么 maxconnection 是否会“覆盖”并变为 100？或者 maxconnection 中的值是否限制了 maxConnectionsToServer 的值？

...

```
<dataCacheClient requestTimeout="2000" channelOpenTimeout="0" maxConnectionsToServer="100">
  <hosts>
    <host name="127.0.0.1" cachePort="22233" />
  </hosts>
  <localCache isEnabled="true" sync="TimeoutBased" objectCount="10000" ttlValue="21600" />
</dataCacheClient> 
```

...

```
<configuration> 
  <system.net> 
    <connectionManagement> 
      <add address="*" maxconnection="50"/> 
    </connectionManagement> 
  </system.net> 
</configuration> 
```

...

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T05:23:59.737

`system.net/connectionManagement`对 AppFabric 使用的 net.tcp 连接没有影响，只有由`ServicePoint`基础结构管理的 HTTP 连接。因此，您不必担心，只需为`maxConnectionsToServer`. 除非您看到争用，否则我可能不会将其设置为高于核心数。

为了将来参考，我还应该指出，如果您使用的是 ASP.NET 并且没有更改默认`processModel/@autoConfig`属性，那么 ASP.NET 实际上将覆盖通过 .config 文件将“*”最大连接数设置为 12 * 环境的任何尝试.处理器计数。如果您无法更改machine.config 或在 IIS7.5 中为应用程序池使用 CLRConfigFile，那么您必须通过在应用程序启动期间设置（例如）`processModel/@autoConfig`以编程方式重新覆盖此值。`ServicePointManager.DefaultEndpointConnectionLimit``Application_Start`

# javascript - 如何减少 html5 音频缓冲区的大小？

> ID：11242581
> 
> 赞同：2
> 
> 时间：2012-06-28T10:23:18.467
> 
> 标签：javascript, html, html5-audio

我正在使用 javascript 创建一个音频元素，我想在音频开始播放之前控制缓冲区大小或缓冲区填充量，以便在音频播放之前减少延迟并减少延迟。

音频数据是一个流，用户将选择播放多个流中的一个，因此“预加载”音频数据根本不可行。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-12T22:05:33.073

我没有看到任何关于更改缓冲区大小的参考。一个建议是在音量调低的情况下开始播放音频。然后停止并将其重置为开始和音量备份。甚至设置起点可能会导致内部代码将数据加载到缓冲区中。我认为您需要启动缓冲区。

# javascript - jQuery 选择器在控制台中不起作用

> ID：11242586
> 
> 赞同：7
> 
> 时间：2012-06-28T10:23:45.380
> 
> 标签：javascript, jquery, console

我这辈子都做不出来。我正在运行 js，并且“容器状态..”是页面上正在运行的 js 的控制台日志。它显示了一个选择器，但如果我想在控制台中做任何事情，它只会返回 null。我假设我以某种方式在某处编写了 jQuery 函数，就好像我调用了 jQuery

```
>>> $
function() 
```

这就是我调用选择器的方式

```
Container state 3 jQuery(div.module-carousel)
>>> $('body')
null 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-28T10:30:37.690

jQuery 使用 2 个命名空间，`jQuery`并且`$`. 另一个图书馆可以使用`$`. 尝试使用`jQuery`代替`$`（假设它也没有被覆盖）：

```
jQuery('body'); 
```

或者将 jQuery 包装在一个立即函数中并在其中使用`$`，这样您就不需要`$`在现有代码中替换：

```
(function($){
    //"$" in here is jQuery
    //code that uses $ as jQuery will work in here
}(jQuery)); //pass in jQuery and execute 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-28T10:37:04.137

您可以在控制台上编写任何命令之前使用它。

```
$ = jQuery.noConflict(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-28T10:32:47.260

如果您`$`超载（但不是`jQuery`），并且您想在控制台中工作，只需执行以下操作：

```
$ = jQuery; 
```

就如此容易。

要获得更完整的解决方案（真正的开发，而不仅仅是控制台），请使用[@Joseph the Dreamer](https://stackoverflow.com/a/11242700/851498)的解决方案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-28T10:28:44.867

Firefox 和 Chrome 都定义`$`为`document.getElementById`控制台中的简写。当页面定义`$`.

因此，加载 jQuery（例如[通过小书签](https://stackoverflow.com/a/9624997/938089?command-for-loading-jquery-on-google-chrome-inspector)），您就可以使用 jQuery 选择器。

如果您不需要特定于 jQuery 的选择器，您也可以使用`$$`，它是 的简写`document.querySelectorAll`，它支持 CSS(3) 选择器。

# python - python脚本忽略文件中的换行符

> ID：11242588
> 
> 赞同：3
> 
> 时间：2012-06-28T10:23:49.993
> 
> 标签：python, shell

以下内容在一个文件中。我使用 shell 脚本调用 python 脚本。这个 python 脚本发送邮件。但是在邮件内容中我看到输出如下所示。它都在一个行中。我做错了什么

```
 /usr/bin/python $DIR/sm.py "$message"  "`cat /tmp/alert.txt`" 
```

输入：以下是alert.txt的内容

```
 Thu Jun 28 14:29:26 IST 2012

  Disk usage limit exceeded -Current disk usage is 167G-Configured disk usage is 200HTTPD connections exceeded configured usage limit -Current HTTPD connections is 21-Configured HTTPD connection is 20

  ========================OTHER INFO==================
  Total fds: 8
  Socket fds: 0
  Other fds: 8
  Free memory :Free Memory:183732
  Buffered memory Buffered Memory:78224
  Cache memory : Cache Memory:579040
  Disk usage is 167G
  DB connections 1
  Network connections 21
  CPU Usage: 0.0 
```

输出：

```
 Thu Jun 28 14:29:26 IST 2012 Disk usage limit exceeded -Current disk usage is 167G-Configured disk usage is 200HTTPD connections exceeded configured usage limit -Current HTTPD connections is 21-Configured HTTPD connection is 20 ========================OTHER INFO================== Total fds: 8 Socket fds: 0 Other fds: 8 Free memory :Free Memory:183732 Buffered memory Buffered Memory:78224 Cache memory : Cache Memory:579040 Disk usage is 167G DB connections 1 Network connections 21 CPU Usage: 0.0 
```

这是 sm.py

```
import logging
import smtplib
import sys
from email.MIMEText import MIMEText
from email.MIMEMultipart import MIMEMultipart

      try:
         smaid = qs[0].id
         gmailUser = 'no-reply@xxxxxxxxxxx.com'
         gmailPassword = '12345'
         mailServer = smtplib.SMTP('smtp.gmail.com', 587)
         mailServer.ehlo()
         mailServer.starttls()
         mailServer.ehlo()
         mailServer.login(gmailUser, gmailPassword)

         to_addr = "xxxxx@xx.com"
         subject = sys.argv[1]
         body = sys.argv[2]
         try:
             msg = MIMEMultipart()
             msg['From'] = gmailUser
             msg['To'] = to_addr
             msg["Content-type"] = "text/html"
             sub = subject
             msg['Subject'] = sub
             body = body

             msg.attach(MIMEText(body, 'html'))
             mailServer.sendmail(gmailUser, to_addr, msg.as_string())
         except:
             write_exception("send exception")

         mailServer.close()
     except:
          write_exception("send exception1") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T10:37:01.347

如果您坚持发送 HTML，则需要 HTML 换行符：

```
import cgi
# escape special HTML characters
body = cgi.escape(body)
# use HTML line breaks
body = body.replace("\r\n", "\n").replace("\n", "<br />\n") 
```

但可能你既不需要 Multipart 也不需要 HTML，所以你可以使用[`smtplib.SMTP.sendmail`](http://docs.python.org/library/smtplib.html#smtplib.SMTP.sendmail)：

```
headers = (('From', gmailUser), 
           ('To', to_addr), 
           ('Subject', subject))

# normalize newlines to CR+LF, as required by SMTP
body = body.replace("\r\n", "\n").replace("\n", "\r\n")

msg = '\r\n'.join("%s: %s" % kv for kv in headers) + '\r\n'*2 + body

mailServer.sendmail(gmailUser, [to_addr], msg) 
```

此外，您不应通过命令行提供文件内容，因为命令行是有长度限制的。相反，您应该通过 STDIN 提供文件，例如 in`python ... < /tmp/alert.txt`并通过

```
import sys
body = sys.stdin.read() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T10:39:13.437

发送它`text/plain`而不是`text/html`. 您那里没有任何 HTML。那应该可以解决它，因为然后由客户来正确显示文本。新行在 HTML 中没有相同的效果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T10:42:39.927

您将邮件的内容类型设置为“text/html”，因此用户的邮件代理显然会将正文解释并呈现为 html。如果要保留纯文本格式，请不要将内容类型设置为 text/html。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T10:44:29.990

你用的是哪个外壳？

```
"`cat xxx`" 
```

在 csh 中将删除所有换行符并返回一个空格分隔的字符串

```
> cat >testfile
line 1
line 2
<ctrl-d>
> echo "`cat testfile`"
line 1 line 2 
```

# visual-studio-2010 - 视觉工作室设置项目：更新不起作用

> ID：11242592
> 
> 赞同：4
> 
> 时间：2012-06-28T10:24:12.727
> 
> 标签：visual-studio-2010, windows-installer, setup-project, visual-studio-setup-proje

我几天都面临一个问题，经过多次研究，我找不到任何适合我的情况。

事情是这样的：我正在使用 Visual Studio 2010 开发一个包含多个项目和一个安装项目的解决方案。我希望安装项目创建一个 MSI 文件以将产品从 1.5 版更新到 1.6 版。

我按照本教程[http://www.simple-talk.com/dotnet/visual-studio/updates-to-setup-projects/](http://www.simple-talk.com/dotnet/visual-studio/updates-to-setup-projects/)更新了解决方案的每个项目的程序集版本和文件版本号。

我的安装项目的设置是：
DetectNewerInstalledVersion : **True**
InstallAllUsers : **True**
RemovePreviousVersions : **True**
版本 : **1.6.3**
ProductCode 与之前版本的 ProductCode 不同，UpgradeCode 与之前版本
的 UpgradeCode 相同。

我读到通常 MSI 应该删除版本比现有文件新的文件并替换为新文件。当我运行以前的 MSI（将产品从 1.4 更新到 1.5 的那些）时，它就像描述的那样工作得很好。（我不确定它是用哪个版本的 Visual Studio 编译的，但我猜它是用 VS2008 编译的）。

现在，当我运行我的 MSI 时，它似乎首先运行将旧 .exe 替换为新 .exe 的“安装序列”，然后运行擦除 .exe 的“卸载序列”。当安装“完成”时，我的应用程序目录中不再有 .exe。（但是在“添加/删除程序”面板中，产品显示为安装在 1.6 版中）。

（注意：我可以注意到 MSI 的“安装”部分或“卸载”部分何时运行，因为两者都具有打开控制台应用程序的自定义操作，我可以在其中进行跟踪）。

经过更多研究，我将旧 MSI 与我的 ORCA 进行了比较，我注意到表 InstallExecuteSequence 的差异：
对于旧 MSI，RemoveExistingProducts 的序列号为**1525**，介于 InstallInitialize (1500) 和 AllocateRegistrySpace (1550) 之间。
使用我的 MSI，RemoveExistingProducts 的序列号是**6550**，介于 InstallExecute (6500) 和 InstallFinalize (6600) 之间。
我在表格中看不到任何其他差异。

我什至尝试使用 ORCA 手动编辑 MSI，并将 RemoveExistingProduct 的序列号设置为 1525。在执行时，“卸载部分”运行正确，但随后出现 2356 错误（经过一些研究，我猜这是因为手动编辑MSI 损坏了它）。

如果有人有一个想法来解释我的 MSI 的行为以及如何解决它？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-08-09T17:08:26.683

这似乎是插件“Microsoft Visual Studio 2017 Installer Projects”的错误。使用不正确的序列号（太高）构建 msi 文件。旧产品的卸载发生*在*安装新文件之后，因此新文件会被错误地删除。

手动修复：更改顺序，以便在安装新项目之前卸载旧产品。

*   使用 orca.exe（或任何适合您的编辑器）打开 msi
*   转到 InstallExecuteSequence 表
*   更改 RemoveExistingProducts 序列号，使其位于 InstallValidate 和 InstallInitialize 之间。例如，我将其从 6550 更改为 1450。

我最终创建了一个简单的脚本来自动执行此修复作为后期构建步骤。你可以在 github 上找到它... [InstallerStuff](https://github.com/DigitalCoastSoftware/InstallerStuff)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-13T21:25:13.670

那篇文章在两个方面已经过时了：

1.  它没有说明 Visual Studio 安装项目的更高版本中的升级已更改为在现有文件的“顶部”，之后旧产品被删除。这不是一个错误，这是一个功能。示例：如果您安装的产品包含一个数据库，然后客户使用一百万个数据库条目填充该数据库，则旧升级在安装新版本产品之前将其删除。

2.  因为新版本是在旧版本上安装的，所以应用了文件替换更新规则，例如新版本替换旧版本（基于文件版本）并且不会删除首次安装后修改的文件（因此保留我们假设的数据库）。

[https://docs.microsoft.com/en-us/windows/desktop/msi/default-file-versioning](https://docs.microsoft.com/en-us/windows/desktop/msi/default-file-versioning)

话虽如此，这似乎不是问题的原因。如果您从 VS 2008 升级到 VS 2010，听起来您遇到了这个问题：

[https://support.microsoft.com/en-us/help/2418919/fix-files-and-registry-keys-for-the-installation-path-disappear-unexpe](https://support.microsoft.com/en-us/help/2418919/fix-files-and-registry-keys-for-the-installation-path-disappear-unexpe)

# scala - 对象自注释是什么意思？

> ID：11242593
> 
> 赞同：5
> 
> 时间：2012-06-28T10:24:20.593
> 
> 标签：scala, mixins, self-type

> **可能重复：**
> [scala 自类型和特征子类之间有什么区别？](https://stackoverflow.com/questions/1990948/what-is-the-difference-between-scala-self-types-and-trait-subclasses)

我将自注释理解为对编译器的承诺，程序员表明一个特征将与带注释的特征混合。例如：

```
scala> trait X
defined trait X

scala> trait Y { this: X => }
defined trait Y

scala> new Y {}
<console>:10: error: illegal inheritance;
self-type Y does not conform to Y's selftype Y with X
              new Y {}
                  ^

scala> new Y with X {}
res1: Y with X = $anon$1@1125a40 
```

在前面的示例中，第三个表达式失败，因为我们没有为新实例设置有效的 X。显然，最后一个效果很好。到现在为止还挺好。现在，让我们看另一个涉及对象的示例。

```
scala> object Z { this: X => }
defined module Z 
```

我知道该对象正在实例化失败，并带有 X 承诺（我们现在正在创建一个带有未来承诺的实例！），如下几行所示，其中的特征已稍作修改：

```
scala> trait X { class X1 }
defined trait X

scala> trait Y { this: X => new X1 }
defined trait Y

scala> object Z { this: X => new X1 }
<console>:8: error: not found: type X1
       object Z { this: X => new X1 }
                                 ^ 
```

那么，对象自注释意味着什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T11:16:21.617

事实上，你可以对类做同样的事情——添加一个不被继承的自我类型，但你将无法实例化这样的类。

允许单例对象具有自我类型不会以任何方式使程序无效 - 您根本无法从单例对象中调用任何自我类型的方法（或实例化其内部类），因为它没有t 继承自类型。

尽管如此，它可能是一个错误，您可能希望[提交一个错误](http://issues.scala-lang.org)。

# jquery - jQuery从变量中获取数据

> ID：11242595
> 
> 赞同：1
> 
> 时间：2012-06-28T10:24:28.050
> 
> 标签：jquery, html, variables

我有一个加载了 html 代码的变量 ()：

```
$.get(url, function (res, data) {
    response = res.responseText;
} 
```

响应变量被加载：

```
<html>
<head>
</head>

<body>
    <div id="version">1</div>
</body>

</html> 
```

如何将 div#version 的内容检索到可变版本？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T10:26:41.617

由于您使用的是 jQuery 并且响应**是**html，因此您可以简单地执行以下操作：

```
var version = $(res.responseText).find('#version').html(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-28T10:31:11.433

如果您希望 jQuery 解析结果生成的 HTML 并仅检索您的内容，`#version`可以使用以下命令：

```
var response = '<html><head></head><body><div id="version">1</div></body></html>';

var version = $( response ).filter( '#version' ).text(); 
```

* * *

**编辑：**参考@freakish，谁是更好的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T10:26:20.310

试试这个 -

```
var version = document.getElementById("version").innerHTML; 
```

或者如果您使用的是 jquery，那么试试这个 -

```
var version = $("#version").text(); 
```

# android - ArrayList 为空并出现错误

> ID：11242601
> 
> 赞同：1
> 
> 时间：2012-06-28T10:24:43.703
> 
> 标签：android, android-view, android-adapter

我的片段中有这个扩展 ListFragment：

```
try {
    FileInputStream in = getActivity().getApplicationContext().openFileInput("list");
    ObjectInputStream i = new ObjectInputStream(in);
    myData = (ArrayList<HashMap<String, MessageRecord>>) i.readObject();
    if (myData != null) {
        this.totalmessages = myData.size();
        mySimpleAdapter = new MySimpleAdapter(getActivity().getApplicationContext(),  myData, R.layout.menurow, mStrings, new int [] {R.id.ivDirection, R.id.tvMessage});
        setListAdapter(mySimpleAdapter);
    }
    in.close();
   } 
```

我收到此错误：

```
Error: Fetch Message List
Error: java.lang.NullPointException
Error: ...FragmentMessages$1.run(FragmentMessages.java:307) 
```

最后一行指向

```
mySimpleAdapter.notifyDataSetChanged(); 
```

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T10:31:27.130

[`notifyDataSetInvalidated()`](http://developer.android.com/reference/android/widget/BaseAdapter.html#notifyDataSetInvalidated%28%29)如果数组为空，并且数组不为空，则调用`notifyDataSetChanged()`。

为了更清楚一点，如果您的数据为空并且在 listView 上设置了[emptyView](http://developer.android.com/reference/android/widget/AdapterView.html#setEmptyView%28android.view.View%29)，`notifyDataSetInvalidated()`则会显示空视图。您收到的错误是因为在调用`notifyDataSetChanged()`时，适配器试图在没有数据的情况下创建一个 listView 视图，因此无法构造该视图。

# c# - How to populate more than one controls via DataSet?

> ID：11242603
> 
> 赞同：0
> 
> 时间：2012-06-28T10:24:46.823
> 
> 标签：c#, winforms, combobox, dataset

I have 5 ComboBoxes and want to populate each of them by the same DataSet

```
foreach (Control c in panPrev.Controls)
{
    if ((string)c.Tag == "cb") //these are ComboBoxes
    {
        c.DataSource = ds01.Tables[0];
        c.DisplayMember = "cars";
    }
} 
```

Error 1: 'System.Windows.Forms.Control' does not contain a definition for 'DataSource'...
Error 2: 'System.Windows.Forms.Control' does not contain a definition for 'DisplayMember..

Please, help.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T10:30:52.900

You have to cast them to `ComboBox`, anyway, i would use the [`Enumerable.OfType`](http://msdn.microsoft.com/en-us/library/bb360913.aspx) approach:

```
var combos = panPrev.Controls.OfType<ComboBox>();
foreach (var combo in combos)
{
    combo.DataSource = ds01.Tables[0];
    combo.DisplayMember = "cars";
} 
```

[`Enumerable.OfType`](http://msdn.microsoft.com/en-us/library/bb360913.aspx) filters the controls by the type and casts them accordingly.

Note that you need to add `using System.Linq;`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T10:30:23.170

You have to cast it to ComboBox, something like this :

```
foreach (Control c in panPrev.Controls)
{
    if (c is ComboBox) 
    {
        (c as ComboBox).DataSource = ds01.Tables[0];
        (c as ComboBox).DisplayMember = "cars";
    }
} 
```

# spring - 默认 Spring Security 重定向到 favicon

> ID：11242609
> 
> 赞同：14
> 
> 时间：2012-06-28T10:25:00.567
> 
> 标签：spring, spring-security

我正在使用 Spring Security 3.1。授权后重定向时出现问题。它重定向到一个 favicon 404 错误。添加`role_anonymous`favicon 没有帮助。

```
<beans:beans xmlns="http://www.springframework.org/schema/security"
xmlns:beans="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.springframework.org/schema/beans 
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/security 
    http://www.springframework.org/schema/security/spring-security-3.1.xsd">

<!--To enable spring security comment this string
    <http auto-config="true" security="none"/>-->

    <!-- To enable spring security remove comment from this code-->
        <http auto-config="true">
                <intercept-url pattern="/**" access="ROLE_ADMIN"/>
                <intercept-url pattern="/favicon.ico" access="ROLE_ANONYMOUS" />
        </http>

<authentication-manager>
    <authentication-provider>
        <user-service>
            <user name="hey" password="there" authorities="ROLE_ADMIN" />
        </user-service>
    </authentication-provider>
</authentication-manager>

</beans:beans> 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-06-28T12:40:39.930

您最好从过滤器链中完全省略该路径。

采用

```
<http pattern="/favicon.ico" security="none" />

<http auto-config="true">
    <intercept-url pattern="/**" access="ROLE_ADMIN"/>
</http> 
```

反而。

还要记住，您需要`intercept-url`从最特定模式到最不特定模式对元素进行排序，因此您的原始配置无论如何都会忽略 favicon 模式。

我还建议您不要使用`auto-config`而是明确指定要使用的功能，以便您清楚要添加到安全过滤器链中的内容。

# c# - 如何在没有管理员权限的情况下在 Windows 7 操作系统中获取注册表项

> ID：11242610
> 
> 赞同：1
> 
> 时间：2012-06-28T10:25:04.303
> 
> 标签：c#, .net

在我的应用程序（Windows C#.net）中，我试图获取注册表项。在 Windows XP（有和没有管理员权限）中工作正常，在具有管理员权限的 Windows 7 中工作正常。但是在没有管理员权限的 Windows 7 中，当我尝试获取注册表项时，应用程序正在崩溃。

我正在使用以下代码获取注册表项

Microsoft.Win32.RegistryKey rgKey = Microsoft.Win32.Registry.LocalMachine.CreateSubKey(rgPath);

可以帮助在 Windows 7 中获取没有管理员权限的注册表项。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T10:31:54.400

如果没有管理员权限，它无法在 Windows7 中完成。

这是它的解决方案。

打开项目并进入项目菜单并选择添加新项目。将有一个名为“应用程序清单文件”的项目。将此添加到您的项目中。将打开一个看起来像 xml 的文件。

在该文件中搜索以下行。

```
<requestedExecutionLevel level="asInvoker" uiAccess="false" /> 
```

并用这一行替换它

```
<requestedExecutionLevel level="requireAdministrator" uiAccess="false" /> 
```

保存文件并重建解决方案。现在您的软件每次在 Windows7 上执行之前都会要求管理员权限。

享受 ：）

# iphone - 是否可以在 iPhone 上的 admob 横幅上放置 png

> ID：11242615
> 
> 赞同：0
> 
> 时间：2012-06-28T10:25:23.437
> 
> 标签：iphone, objective-c, ios

我是一个设计师。我有一个问题，是否可以像图片上那样实现“删除广告按钮”？那么 png 层是在广告横幅上吗？

[https://skitch.com/e-guanxsi/edi4s/removead](https://skitch.com/e-guanxsi/edi4s/removead)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T10:30:38.853

我不明白为什么不，只需在您将加载横幅的`UIButton`上方放置一个。`UIView`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T10:31:57.207

是的，这很容易实现，程序员只需要在他的内容视图上添加一个按钮。

# facebook - 是否有可能知道每次有人在 facebook 群组中发帖？

> ID：11242620
> 
> 赞同：0
> 
> 时间：2012-06-28T10:25:37.870
> 
> 标签：facebook, facebook-php-sdk

我希望我的程序在每次有人向 Facebook 群组发帖时都能收到通知。有没有可能得到这个实时。我的意思是我希望在帖子发布后立即举办活动......？

如果有可能怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T11:10:56.620

[Facebook 使用其API](https://developers.facebook.com/docs/reference/api/realtime/)提供基于实时推送的通知。但目前它不支持页面。所以目前你不能实时做到这一点，你可以通过轮询 Facebook 服务器以获取具有小池时间（可能是几秒）的特定页面来使其成为实时。

# objective-c - Objective-C：UILabel 开放式报价

> ID：11242632
> 
> 赞同：-2
> 
> 时间：2012-06-28T10:26:38.283
> 
> 标签：objective-c, ios, uilabel

我将使用 UILabel 在我的应用程序上进行对话，但我不知道如何为其添加 Open & End 报价。

一个能做到的怎么办？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T10:29:54.957

如果你想在你的字符串中打印一个 " 你需要转义它

转义 a`"`是通过`\`在它之前添加 a 来完成的

```
NSString *string = @"\"Hello\"!"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T10:29:34.007

您可以在`NSString`. 你需要使用像 -

```
NSString *myString = @"quote: \"";

self.myLabel.text = @"Your text with quotation: \""; 
```

# java - 处理 vps numproc 限制

> ID：11242638
> 
> 赞同：0
> 
> 时间：2012-06-28T10:26:47.153
> 
> 标签：java, linux, tomcat, vps

[这是我的 vps 套餐](http://order.1and1.co.uk/VirtualServerL)，每月 14.99 英镑，所以不贵。

Thay 将 numproc 限制为 96，当我注册时，他们并没有明确表示这是一个限制，但我想我没有问是我的错。

我正在运行 Tomcat，如果我用完了 numproc，那么 Java 将崩溃，容器将需要手动重启。

所以我在 server.xml 中添加了以下内容来限制线程数。实验使我将数字 20 作为一个稳定的最大值。

```
<Connector port="80" protocol="HTTP/1.1"
           maxThreads="20" 
           connectionTimeout="20000"
           redirectPort="8443" /> 
```

我在想使用 maxThreads="20" 会阻止超过 20 个 servlet 请求同时运行，如果不是这种情况，请纠正我。

我认为numproc是所有线程的最大数量？如果是这样，那么我有时会运行近 76 个其他线程，看起来很多，但有 Java、Tomcat、Hibernate、Ehcash、FTP、SSH、MYSQL 和 2 个 JavaMelody 实例

无论如何，我的问题是。

设置 maxThreads="20" 是保持 numproc 下降的最佳方法，还是有更好的方法。最后，我的 vps 限制为 96 是否不公平？

顺便说一句，我距离达到任何其他系统限制还有很长的路要走。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T10:46:58.587

> 最后，我的 vps 限制为 96 是否不公平？

绝对不。对于每月 14.99 英镑的费用，您不能指望大量的处理器资源。此外，同时 20 个 servlet 请求是相当多的......

> ......当我注册时，他们并没有明确表示这是一个限制......

是的。它被称为“精美印刷品”。但是，如果您不阅读合同中的“细则”，那么您就不能真正抱怨。

（我无法识别您正在使用的软件包/产品，但`numprocs`网站上记录了这些限制；例如[http://help.1and1.co.uk/servers-c40665/virtual-server-c63188/virtuozzo-power- panel-c63246/extended-resources-of-a-1and1-virtual-server-a686172.html](http://help.1and1.co.uk/servers-c40665/virtual-server-c63188/virtuozzo-power-panel-c63246/extended-resources-of-a-1and1-virtual-server-a686172.html)）

看，如果你不能忍受这个，要么：

*   寻找更好的供应商，或
*   升级到更好（更昂贵）的软件包。

您可以尝试抱怨或恳求您的情况是一个特例，但我怀疑它会有所作为。你*应该*读过那个精美的印刷品。

* * *

> 设置 maxThreads="20" 是保持 numproc 下降的最佳方式。

这只解决了 servlet 请求线程池的大小。MySQL 工作线程呢？MySQL连接数？您的 FTP 服务的同时请求数？您需要 2 个 JavaMelody 实例吗？等等。

您可以做的一件事是进行 Java 线程转储以查看 JVM 中存在哪些其他线程。也许您没有考虑过的事情正在消耗您的 numprocs 配给。

# c - 如何从 time_t 中提取小时数？

> ID：11242642
> 
> 赞同：8
> 
> 时间：2012-06-28T10:27:00.533
> 
> 标签：c, time, time-t

我想从表示自纪元以来的秒数的 time_t 值中提取小时、分钟和秒作为整数值。

小时的值不正确。为什么？

```
#include <stdio.h>
#include <time.h>

#include <unistd.h>

int main()
{
    char buf[64];

    while (1) {
        time_t t = time(NULL);
        struct tm *tmp = gmtime(&t);

        int h = (t / 360) % 24;  /* ### My problem. */
        int m = (t / 60) % 60;
        int s = t % 60;

        printf("%02d:%02d:%02d\n", h, m, s);

        /* For reference, extracts the correct values. */
        strftime(buf, sizeof(buf), "%H:%M:%S\n", tmp);
        puts(buf);
        sleep(1);
    }
} 
```

输出（小时应为 10）

```
06:15:35
10:15:35

06:15:36
10:15:36

06:15:37
10:15:37 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-28T10:31:14.913

```
int h = (t / 3600) % 24;  /* ### Your problem. */ 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-28T10:29:45.390

您的调用`gmtime()`已经完成，结果`struct tm`包含所有字段。请参阅[文档](http://linux.die.net/man/3/gmtime)。

换句话说，只是

```
printf("hours is %d\n", tmp->tm_hour); 
```

我认为这是正确的方法，因为它避免了在代码中手动进行转换的大量数字。它以最好的方式做到这一点，通过使其成为别人的问题（即，将其抽象出来）。所以修复你的代码不是通过添加缺失的`0`，而是通过使用`gmtime()`.

还要考虑时区。

# google-apps-script - 进度指标

> ID：11242644
> 
> 赞同：0
> 
> 时间：2012-06-28T10:27:20.707
> 
> 标签：google-apps-script

我想在请求期间执行进度指示器。我试过

```
function waitOn(){
 var app = UiApp.getActiveApplication();
 var panel= app.getElementById("LoadingPanel").setVisible(true);
return app;                             
}

function waitOff(){
 var app = UiApp.getActiveApplication();
 var panel= app.getElementById("LoadingPanel").setVisible(false);
return app;      
}

function login(e){
waitOn();
...
waitOff();
return app;
} 
```

加载面板永远不会显示。如果我注释掉waitOff，则在登录功能执行后显示加载面板（没用）

拥有这种显示器的最佳方式是什么？

文森特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T11:11:16.370

一种解决方案是为`waitOn`函数使用单独的事件处理程序，例如

```
function test() {
  var handlerLogin = app.createServerHandler('login');
  var handlerWait = app.createServerHandler('onWaitEvent');
  buttonLogin.addClickHandler(handlerLogin);
  buttonLogin.addClickHandler(handlerWait);
}
function onWaitEvent(e) {
   ...
   waitOn();
   ...
}
function login(e){
  ...
  waitOff();
  return app;
} 
```

# wordpress - Disqus Wordpress 插件无法正确计算评论

> ID：11242646
> 
> 赞同：1
> 
> 时间：2012-06-28T10:27:39.467
> 
> 标签：wordpress, disqus

我正在运行 WordPress 3.4 和 Disqus 2.72。

我有一个问题 - 每次我写评论时，我发现 Disqus 并没有计算在内。

例如：

**在博客条目列表中显示 0 条评论**

![在此处输入图像描述](../Images/a62fe28a2f9fb67fd4c7b7eccefa0029.png)

**当您打开博客条目时，它会显示 3 条评论**

![在此处输入图像描述](../Images/c1106d1a91324e55ac9ef6917c94221d.png)

你可以在我的网站上找到这个：http: [//www.mac-nutrition.com/category/blogs/](http://www.mac-nutrition.com/category/blogs/)

到目前为止，我已将以下代码添加到主题的*functions.php*文件中，但它并没有真正帮助（最后）：

```
// Disqus: Prevent from replacing comment count
remove_filter('comments_number', 'dsq_comments_text');
remove_filter('get_comments_number', 'dsq_comments_number');
remove_action('loop_end', 'dsq_loop_end'); 
```

我也尝试过使用 Web Ninja Comment Fixer ( [http://wordpress.org/extend/plugins/web-ninja-comment-count-fixer/](http://wordpress.org/extend/plugins/web-ninja-comment-count-fixer/) ) 但没有成功。

这是我目前的 Disqus 设置：

![在此处输入图像描述](../Images/94650018c9cbccc3852b9f6b9c449379.png)

提前谢谢了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T17:49:21.183

尝试启用 Disqus 插件中高级选项下的“评论计数”复选框。这将在页脚中输出 Disqus JavaScript，并且应该解决这个问题。

如果这不起作用，这可能是由您当前的主题或插件引起的。您可以通过暂时恢复到默认的 WordPress 主题来测试这一点。如果这不能解决这个问题，请尝试禁用除 Disqus 之外的所有插件。

如果您仍然看到问题，请告诉我们 - 随时再次发推文！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T22:50:08.233

我看到 Amanda Nudelman 已经回答了。通常，Amanda 提到的将是最佳答案，并且在这种情况下确实是正确的建议。

但是，在这种情况下，您似乎正在使用 Thesis 主题。由于论文使用非标准的 WordPress 评论计数代码，Disqus 插件无法识别评论计数链接以替换它们。因此，计数继续反映来自 WordPress 本身而不是 Disqus 的计数。

这是我们无法在 Disqus 插件本身中解决的问题，我们建议直接与 Thesis 的开发人员联系。

关于持续为 0 的评论计数，这是因为评论当前未在启用 Disqus 2012 的情况下同步回 WordPress。我们只是一起解决了这个问题，目前正在测试它；它将很快在下一个插件更新中发布。然后评论将定期同步回 WordPress，并且计数将基本上反映 Disqus 中的数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-29T08:48:39.133

说一下，在 2013 年，Disqus 默认为该问题引入了一个“补丁”复选框，这可能很有用。做的工作！

要查看此内容，请进入您的插件并单击 DISQUS 插件行中的“设置”。

![WordPress 评论总是用 disqus 显示 0](../Images/232db8d900aca9bee1360b24995505fe.png)

# javascript - JavaScript 中的十进制验证

> ID：11242647
> 
> 赞同：0
> 
> 时间：2012-06-28T10:27:43.430
> 
> 标签：javascript, validation, decimal, dom-events

我使用以下脚本进行十进制验证。我只需要输入像 123.00 这样的数字和点符号。以下函数不支持那么精细的字母，但它也不允许**输入点（。）**符号？如何使用此功能输入点符号？

```
function isNumberKey(evt)
      {
         var charCode = (evt.which) ? evt.which : event.keyCode
         if (charCode > 31 && (charCode < 48 || charCode > 57))
            return false;
         else
         return true;
      } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T10:29:55.857

```
function isNumberKey(evt)
       {
          var charCode = (evt.which) ? evt.which : event.keyCode
          if (charCode != 46 && charCode > 31 
            && (charCode < 48 || charCode > 57))
             return false;

          return true;
       } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-01T08:29:15.737

尝试这个：

//验证数字字段

```
function validate(x) {
    var decimal = /^[1-9][\.\d]*(,\d+)?$/;
    if (x.match(decimal)) {
        return true;
    } else {
        return false;
    }
} 
```

您还可以检查 parseFloat 方法并返回 NaN。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T23:13:00.303

```
function validateFloatKeyPress2(valor, presicion, event) {
        var keyCode = (document.all) ? event.keyCode : event.which;
        if (keyCode == 8) {
            return true;
        }            
        if (keyCode == 46 && valor.value.indexOf(".") >= 0) {               
            return false;
        }
        //Enable Only float values
        if ((keyCode >= 48 && keyCode <= 57) || (keyCode == 46)) {

            if (reverse(valor.value).indexOf(".") > (presicion - 1)) {
                return false;
            }
            return true;
        }
        else {
            return false;
        }
    }

function reverse(s) {
        var o = '';
        for (var i = s.length - 1; i >= 0; i--)
            o += s[i];
        return o;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-01T12:44:24.877

通过 isNaN() 方法检查

变量 a =3.00003

isNaN(a) 将返回 false

var b ='3.0.0' isNaN(b) 将返回 true

我认为这种方法可以解决您的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-22T08:03:07.947

```
function IsNumeric(e) {
        var keyCode = e.which ? e.which : e.keyCode;
        var ret = ((keyCode == 46 || keyCode >= 48 && keyCode <= 57) || specialKeys.indexOf(keyCode) != -1);
        return ret;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-28T10:31:07.147

使用正则表达式，它是一种更优雅的方法。

```
function isNumberKey(evt)
      {
         var charCode = (evt.which) ? evt.which : event.keyCode
         if (charCode.match('/^[-+]?([0-9]*\.[0-9]+|[0-9]+)$/'))
            return false;
         else
         return true;
      } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-07-02T05:54:17.217

```
      函数 checkDecimal(num){   

        var chkDecimal= /^\d+\.\d{0,2}$/;
        返回 chkDecimal.test(num);

      }

      警报（检查十进制（0.2））
      警报（检查十进制（1））  

```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-08-12T05:53:16.907

您的问题的完整解决方案是

```
function isNumberKey(e)
    {
        var code = (code ? code : e.which);           
        if (code != 46 && code > 31 && (code < 48 || code > 57))
            return false;
            //if it is (.)
        else if (code == 46) {
             var Value = this.value;
            //if value already contains (.) character
            if (Value.indexOf('.') != -1) {
                var splt = Value.split('.');
                //if there is already(.) char then return false
                if (splt.length >= 2)
                    return false;
            }
        }
        return true;
    } 
```

# c# - XAML 无法设置来自不同程序集的基类属性的值

> ID：11242651
> 
> 赞同：0
> 
> 时间：2012-06-28T10:27:52.837
> 
> 标签：c#, xaml

很难想出一个简洁的标题！

我在一个解决方案中有两个 WPF 项目。第一个，WpfApplication 定义 Class1。第二，WpfControlLibrary 定义从 Class1 继承的 Class2、从 Class2 继承的 Class3 和 UserControl1。它们如下所示：

**WpfApplication Class1**

```
namespace WpfApplication5
{
  public class Class1
  {
    public string Property1 { get; set; }
  }
} 
```

**WpfControlLibrary Class2 和 Class3**

```
namespace WpfControlLibrary1
{
  public class Class2
  {
    public string Property2 { get; set; }
  }
  public class Class3 : Class2
  {
    public string Property3 { get; set; }
  }
} 
```

总之，Class 1 有 Property1，Class2 有 Property1（通过继承）和 Property2，Class3 有 Property1 和 Property2（都通过继承）和 Property3。用户控件的 XAML 是：

```
<UserControl x:Class="WpfControlLibrary1.UserControl1"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         xmlns:b="clr-namespace:WpfApplication5;assembly=WpfApplication5"
         xmlns:l="clr-namespace:WpfControlLibrary1"
         mc:Ignorable="d" 
         d:DesignHeight="300" d:DesignWidth="300">
  <UserControl.Resources>
      <b:Class1 x:Key="test1" Property1="xxx" />
      <l:Class2 x:Key="test2" Property1="xxx" Property2="yyy" />
      <l:Class3 x:Key="test3" Property2="yyy" Property3="zzz" />
      <l:Class3 x:Key="test4">
        <l:Class3.Property1>xxx</l:Class3.Property1>
        <l:Class3.Property2>yyy</l:Class3.Property2>
        <l:Class3.Property3>zzz</l:Class3.Property3>
      </l:Class3>
  </UserControl.Resources>
  <Grid>

  </Grid> 
```

问题是 XAML 无法编译，并给出以下错误：

```
The property 'Property1' does not exist in XML namespace 'clr-namespace:WpfControlLibrary1'.
The property 'Property1' was not found in type 'Class2'.
The attachable property 'Property1' was not found in type 'Class3'. 
```

看起来 XAML 无法处理从不同程序集继承的属性。这是对的吗，还是我看了太久了。我尝试了设置 Property1 和事件的不同形式，`b:Property1=`但`b:Class1.Property1=`似乎都不起作用。还是我一直在研究这个太久和过于复杂的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T12:35:48.083

尽管我在上面引用了我的坏例子，但我将在这里添加我自己的答案，以尝试解释我认为发生的事情，以供其他任何发生的人使用。

当您使用 XAML 从不同的程序集实例化对象时，命名空间如下所示：

```
xmlns:b="clr-namespace:WpfApplication5;assembly=WpfApplication5" 
```

请注意，它具有命名的程序集。它似乎也将程序集复制到 bin 文件夹中。就我而言，发生了一些疯狂的事情，并且复制的程序集已经有几个小时了。因此，即使 c# 可以编译，XAML 也不能。发生了一些神奇的事情，因此该程序集的构建在配置管理器中神秘地未选中。但是，再次检查并重建仍然没有重建 exe。在这种兴奋中，Visual Studio 崩溃并重新启动（仅仅是我还是 VS2010 经常发生这种情况）。

最后我不得不删除所有的 DLL 项目并自己构建主应用程序。然后我可以重新添加 DLL 项目并进行编译。然后一切都按预期工作。

# android - Android : 水平滑动活动（例如 Play 商店）

> ID：11242655
> 
> 赞同：3
> 
> 时间：2012-06-28T10:28:02.473
> 
> 标签：android, android-activity, slide

进行滑动活动和/或我们 Play Store 等图像的最佳方法是什么？我知道它是 ViewPager，但它对图像滑动有好处吗？还有其他方法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T10:31:29.750

您可能应该阅读一些有关[Horizo](http://developer.android.com/reference/android/widget/HorizontalScrollView.html) ​​ntalScrollView 、[GalleryView](http://saigeethamn.blogspot.co.il/2010/05/gallery-view-android-developer-tutorial.html)和[Pager](http://android-developers.blogspot.co.il/2011/08/horizontal-view-swiping-with-viewpager.html)的信息。

祝你好运。

# c# - 通过 Selenium Webdriver 启动 InternetExplorer 浏览器后，无法找到网页上识别的任何元素

> ID：11242657
> 
> 赞同：0
> 
> 时间：2012-06-28T10:28:27.893
> 
> 标签：c#, internet-explorer, webdriver

我正在使用`selenium Webdriver 2.24`自动化网站。一旦使用 webdriver 启动**IE 浏览器**，驱动程序就无法在页面上找到任何存在的字段（例如文本框、按钮等）并且正在抛出`unable to locate the element`.

我曾经`Visual Studio C#`写过代码。同样适用于 Firefox。

**注意：**当我尝试时`Driver.Pagesource`；它返回一个空值

解决此问题的可能原因/建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T01:18:28.157

其他人也遇到了 2.24 的问题——尝试回到 2.23 或继续升级到 2.25。

# uiview - 带有 UIView 的可拖动箭头

> ID：11242663
> 
> 赞同：0
> 
> 时间：2012-06-28T10:28:50.020
> 
> 标签：uiview, xamarin.ios, draggable, uipangesturerecognizer

我正在尝试创建一个可以在两侧向任何方向移动的可拖动箭头（如图所示）

![在此处输入图像描述](../Images/8e5dc716487e472adf9b8f860c039e3f.png)

有没有可能做点什么？

我试过这样的事情：

![在此处输入图像描述](../Images/331a2ac2d5e2c298dc9433668c3f1820.png)

它是一个带有两个子视图（蓝色和绿色）的 UIView。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T15:09:44.813

您可以将手势识别器添加到包含视图中，然后根据事件更改您的视图。

# python - 如何解析 Apple 的 IAP 收据格式错误的 JSON？

> ID：11242667
> 
> 赞同：4
> 
> 时间：2012-06-28T10:29:16.063
> 
> 标签：python, json, in-app-purchase

我像这样[从苹果那里得到了 JSON](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/StoreKitGuide/VerifyingStoreReceipts/VerifyingStoreReceipts.html)

```
{
    "original-purchase-date-pst" = "2012-06-28 02:46:02 America/Los_Angeles";
    "original-transaction-id" = "1000000051960431";
    "bvrs" = "1.0";
    "transaction-id" = "1000000051960431";
    "quantity" = "1";
    "original-purchase-date-ms" = "1340876762450";
    "product-id" = "com.x";
    "item-id" = "523404215";
    "bid" = "com.x";
    "purchase-date-ms" = "1340876762450";
    "purchase-date" = "2012-06-28 09:46:02 Etc/GMT";
    "purchase-date-pst" = "2012-06-28 02:46:02 America/Los_Angeles";
    "original-purchase-date" = "2012-06-28 09:46:02 Etc/GMT";
} 
```

这不是我们所知道的[JSON 。](http://www.json.org/)在 JSON 中，它明确定义为

> 每个名称后跟 :（冒号），名称/值对用 ,（逗号）分隔。

我什至如何在 python 的 json （或 simplejson ）模块中解析它？

`json`仅支持`separators`in `json.dumps()`、 not in`json.loads()`和 in `simplejson/decoder.py`， the具有and的`def JSONObject()`硬编码分隔符。`:``,`

我能做些什么？写我自己的解析器？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T10:38:38.400

那确实比较乱。一个快速的解决方法是用正则表达式替换有问题的分隔符：

```
line = re.compile(r'("[^"]*")\s*=\s*("[^"]*");')
result = line.sub(r'\1: \2,', result) 
```

您还需要删除最后一个逗号：

```
trailingcomma = re.compile(r',(\s*})')
result = trailingcomma.sub(r'\1', result) 
```

通过这些操作，示例加载为 json：

```
>>> import json, re
>>> line = re.compile('("[^"]*")\s*=\s*("[^"]*");')
>>> result = '''\
... {
...     "original-purchase-date-pst" = "2012-06-28 02:46:02 America/Los_Angeles";
...     "original-transaction-id" = "1000000051960431";
...     "bvrs" = "1.0";
...     "transaction-id" = "1000000051960431";
...     "quantity" = "1";
...     "original-purchase-date-ms" = "1340876762450";
...     "product-id" = "com.x";
...     "item-id" = "523404215";
...     "bid" = "com.x";
...     "purchase-date-ms" = "1340876762450";
...     "purchase-date" = "2012-06-28 09:46:02 Etc/GMT";
...     "purchase-date-pst" = "2012-06-28 02:46:02 America/Los_Angeles";
...     "original-purchase-date" = "2012-06-28 09:46:02 Etc/GMT";
... }
... '''
>>> line = re.compile(r'("[^"]*")\s*=\s*("[^"]*");')
>>> trailingcomma = re.compile(r',(\s*})')
>>> corrected = trailingcomma.sub(r'\1', line.sub(r'\1: \2,', result))
>>> json.loads(corrected)
{u'product-id': u'com.x', u'purchase-date-pst': u'2012-06-28 02:46:02 America/Los_Angeles', u'transaction-id': u'1000000051960431', u'original-purchase-date-pst': u'2012-06-28 02:46:02 America/Los_Angeles', u'bid': u'com.x', u'purchase-date-ms': u'1340876762450', u'original-transaction-id': u'1000000051960431', u'bvrs': u'1.0', u'original-purchase-date-ms': u'1340876762450', u'purchase-date': u'2012-06-28 09:46:02 Etc/GMT', u'original-purchase-date': u'2012-06-28 09:46:02 Etc/GMT', u'item-id': u'523404215', u'quantity': u'1'} 
```

它也应该处理嵌套映射。这确实假设值本身没有转义`"`引号。如果有的话，无论如何你都需要一个解析器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-12T21:36:50.827

如果将以下内容添加到 iTunes 的 HTTP 请求标头中

```
{'Content-Type' : 'application/json'} 
```

它将返回一个真正的 JSON 格式的响应，该响应将与 json.loads 一起使用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-09T12:56:42.507

我让这个辅助函数工作了，目前它似乎工作得很好。我正在使用它将传入（未经验证的）收据转换为 JSON 并提取交易 ID。验证后，我比较了 2 个交易 ID 以确保它们匹配：

```
 function PropertyArrayStringToArray($data)
    {
        $data = str_replace(PHP_EOL, '', $data); 
        $data = preg_replace('/\t/', '', $data);  
        $data = str_replace('" = "'  ,'":"',$data);
        $data = str_replace('"="'    ,'":"',$data);
        $data = str_replace('";'     ,'",',$data);
        $data = str_replace(',}'     ,'}',$data);
        return json_decode($data,true);
    } 
```

随意使用它（风险自负）并改进它。

# c# - 在网格中仅显示所需的列

> ID：11242675
> 
> 赞同：1
> 
> 时间：2012-06-28T10:29:38.603
> 
> 标签：c#, asp.net, telerik

在我的网格（Telerik 的 RadGrid）中，我将 LINQ 方法返回的内容（对象列表）作为数据源。

```
GridDetails.DataSource = DAODetails_Prix.GetMontantDevisAcceptes_Details_Prix(annee, mois); 
```

和：

```
 public static List<Details_Prix> GetMontantDevisAcceptes_Details_Prix(int annee,int month)
    {
        DataClassesActilogDataContext db = ContextSingleton.GetDataContext();
        List<Details_Prix> liste;

        var v = from i in db.Details_Prix
                where (i.dtDevisFact.Value.Month==month &&  i.dtDevisFact.Value.Year==annee &&i.DevisAccept==true)
                select i;

        liste = v.ToList();

        return liste;
    } 
```

我的问题是我不希望显示对象的所有字段。我只需要其中一些在我的网格中。我应该怎么做？在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T10:37:05.763

在 Telerik Rad 网格中

```
 protected void RadGrid1_ColumnCreated(object sender, Telerik.WebControls.GridColumnCreatedEventArgs e)
  {
       if (e.Column.UniqueName == "ColumnName")
       {
           e.Column.Visible = false;
       }
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T10:49:17.160

您也可以在绑定后像下面那样做。如果您不想参加 ColumnCreated 事件。

```
GridDetails.DataSource = DAODetails_Prix.GetMontantDevisAcceptes_Details_Prix(annee, mois);
GridDetails.DataBind()

// hide columns which is not required
 GridDetails.MasterTableView.GetColumn("ColumnName").Visible = False 
```

# drupal-7 - 在 drupal 站点中哪里可以找到幻灯片

> ID：11242676
> 
> 赞同：0
> 
> 时间：2012-06-28T10:29:38.680
> 
> 标签：drupal-7

我们得到了一个网站 xyz.com，其中主页有图片滑动。我们不知道它是否是块（或）视图。

现在我们的网站迁移到 abc.com。主页没有显示图像滑动。当我检查元素图像时就在那里。但是它们没有加载，因为使用的 javascript 被提供了错误的链接。div 的 id 为“幻灯片”。使用了 javascript slides.min.jquery.js。我无法在块或视图中看到那些幻灯片。

请告诉我在哪里可以找到它，以便我可以更改 javascript 链接。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T05:04:14.200

解决了这个问题。问题是图像 url 错误，我们使用的是自己的主题。因此更改了站点/所有/主题/我们的主题文件夹/模板/page.tpl.php 中的网址。它工作得很好。

# android - 适用于 Android C/C++ 的 Eclipse CDT

> ID：11242686
> 
> 赞同：1
> 
> 时间：2012-06-28T10:30:00.697
> 
> 标签：android, c++, c, eclipse, eclipse-cdt

我正在尝试设置 Eclipse IDE 来帮助我管理和浏览适用于 android 的 C/C++ 源代码。

按照[http://source.android.com/source/downloading.html](http://source.android.com/source/downloading.html)上的说明，我有源的本地副本并按照[http://source.android.com/source/using-eclipse.html](http://source.android.com/source/using-eclipse.html)上的说明进行操作已设置 Eclipse 以导航 Java 源代码。

我正在使用 ubuntu 12.04 并为 Eclipse indigo 安装了 CDT 8.0.2，所以我有 C/C++ 开发工具。我现在需要做的是为 android 源设置各种项目。

是从现有源创建项目的简单方法，它将索引所有代码，以便我可以在函数调用之间导航？只需在我的目录结构中的哪个级别执行“来自现有源的新项目”调用？是否已经有类似用于 Java 设置的 .classpath 的配置？

提前谢谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T14:26:54.077

可以安装eclipse的Android插件（通过eclipse：帮助->安装新软件）并填写[https://dl-ssl.google.com/android/eclipse/](https://dl-ssl.google.com/android/eclipse/) 建议使用通用的eclipse，而不是光盘。您可以以相同的方式安装 cdt 插件。

如果你有 cdt: create new project: c++ from existing code。瞧。

# iphone - EXC_BAD_ACCESS 与 ARC

> ID：11242688
> 
> 赞同：-2
> 
> 时间：2012-06-28T10:30:05.997
> 
> 标签：iphone, objective-c, ios, automatic-ref-counting

我正在使用 ARC，我有一个 CustomTableViewController，我正在向我的背景单元格、页眉和页脚添加一个 CustomView。

例如在`tableView:viewForFooterInSection`方法中我放了这些代码行：

```
- (UIView *) tableView:(UITableView *)tableView viewForFooterInSection:(NSInteger)section
{
    CustomFooter *footer = [[CustomFooter alloc] init];
    return footer;
} 
```

CustomFooter 是 UIView 的子类，它绘制一个矩形作为背景单元格`- (void)drawRect:(CGRect)rect`

当我在模拟器上运行应用程序时，它可以工作，但是当我在我的 iPhone 上尝试时它崩溃了。

我该如何解决？

这是我的崩溃报告：

```
Date/Time:       2012-06-28 12:37:07.168 +0200
OS Version:      iPhone OS 5.1.1 (9B206)
Report Version:  104

Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: KERN_INVALID_ADDRESS at 0x00000009
Crashed Thread:  0

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   libobjc.A.dylib                 0x3508cf78 objc_msgSend + 16
1   CoreFoundation                  0x372d5e90 CFRetain + 76
2   CoreFoundation                  0x372dfb74 +[__NSArrayI __new::] + 48
3   CoreFoundation                  0x372dfa8e -[__NSPlaceholderArray   initWithObjects:count:] + 294
4   CoreFoundation                  0x3730ce68 +[NSArray arrayWithObjects:] + 460
5   CustomTable                     0x0004766e drawLinearGradient (Common.m:15)
6   CustomTable                     0x00048c14 -[CustomFooter drawRect:]   (CustomFooter.m:50)
7   UIKit                           0x3107015e -[UIView(CALayerDelegate) drawLayer:inContext:] + 270
8   QuartzCore                      0x374b74de -[CALayer drawInContext:] + 110
9   QuartzCore                      0x374b6b38 CABackingStoreUpdate_ + 1776
10  QuartzCore                      0x374b632e CA::Layer::display_() + 950
11  QuartzCore                      0x374b5f5a CA::Layer::display() + 122
12  QuartzCore                      0x374b5e9c CA::Layer::display_if_needed(CA::Transaction*) + 168
13  QuartzCore                      0x374b5844 CA::Context::commit_transaction(CA::Transaction*) + 228
14  QuartzCore                      0x374b5578 CA::Transaction::commit() + 308
15  QuartzCore                      0x374dd90a CA::Transaction::flush() + 38
16  QuartzCore                      0x374dd8dc +[CATransaction flush] + 28
17  UIKit                           0x310a6108 -[UIApplication _reportAppLaunchFinished] + 36
18  UIKit                           0x31093b2c -[UIApplication _runWithURL:payload:launchOrientation:statusBarStyle:statusBarHidden:] + 1256
19  UIKit                           0x31061abc -[UIApplication handleEvent:withNewEvent:] + 1004
20  UIKit                           0x31061560 -[UIApplication sendEvent:] + 48
21  UIKit                           0x31060f34 _UIApplicationHandleEvent + 5820
22  GraphicsServices                0x33aa3224 PurpleEventCallback + 876
23  CoreFoundation                  0x3736151c __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 32
24  CoreFoundation                  0x373614be __CFRunLoopDoSource1 + 134
25  CoreFoundation                  0x3736030c __CFRunLoopRun + 1364
26  CoreFoundation                  0x372e349e CFRunLoopRunSpecific + 294
27  CoreFoundation                  0x372e3366 CFRunLoopRunInMode + 98
28  UIKit                           0x31092864 -[UIApplication _run] + 544
29  UIKit                           0x3108fcce UIApplicationMain + 1074
30  CustomTable                     0x00046798 main (main.m:16)
31  CustomTable                     0x0004673c start + 32

Thread 1 name:  Dispatch queue: com.apple.libdispatch-manager
Thread 1:
0   libsystem_kernel.dylib          0x315343a8 kevent + 24
1   libdispatch.dylib               0x304b9ea4 _dispatch_mgr_invoke + 708
2   libdispatch.dylib               0x304b9bc2 _dispatch_mgr_thread + 30

Thread 2:
0   libsystem_kernel.dylib          0x31544cd4 __workq_kernreturn + 8
1   libsystem_c.dylib               0x33bfcf36 _pthread_wqthread + 610
2   libsystem_c.dylib               0x33bfccc8 start_wqthread + 0

Thread 3:
0   libsystem_kernel.dylib          0x31544cd4 __workq_kernreturn + 8
1   libsystem_c.dylib               0x33bfcf36 _pthread_wqthread + 610
2   libsystem_c.dylib               0x33bfccc8 start_wqthread + 0

Thread 4 name:  WebThread
Thread 4:
0   libsystem_kernel.dylib          0x31534004 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x315341fa mach_msg + 50
2   CoreFoundation                  0x373613ec __CFRunLoopServiceMachPort + 120
3   CoreFoundation                  0x37360124 __CFRunLoopRun + 876
4   CoreFoundation                  0x372e349e CFRunLoopRunSpecific + 294
5   CoreFoundation                  0x372e3366 CFRunLoopRunInMode + 98
6   WebCore                         0x32c8cc9c _ZL12RunWebThreadPv + 396
7   libsystem_c.dylib               0x33c0272e _pthread_start + 314
8   libsystem_c.dylib               0x33c025e8 thread_start + 0

Thread 0 crashed with ARM Thread State:
r0: 0x00125860    r1: 0x30d16b7c      r2: 0x3f9a3570      r3: 0x0014b170
r4: 0x00000001    r5: 0x2fe41188      r6: 0x0014b178      r7: 0x2fe4114c
r8: 0x0014b170    r9: 0x0c345adf     r10: 0x00000002     r11: 0x00000001
ip: 0x3f97f814    sp: 0x2fe41140      lr: 0x372d5e97      pc: 0x3508cf78
cpsr: 0x00000030 
```

这是我在 CustomFooter 中的 drawRect 函数：

```
- (void)drawRect:(CGRect)rect
{

CGContextRef context = UIGraphicsGetCurrentContext();

CGColorRef whiteColor = [UIColor colorWithRed:1.0 green:1.0 blue:1.0 alpha:1.0].CGColor; 
CGColorRef lightGrayColor = [UIColor colorWithRed:230.0/255.0 green:230.0/255.0 blue:230.0/255.0 alpha:1.0].CGColor;
CGColorRef darkGrayColor = [UIColor colorWithRed:187.0/255.0 green:187.0/255.0 blue:187.0/255.0 alpha:1.0].CGColor;
CGColorRef shadowColor = [UIColor colorWithRed:0.2 green:0.2 blue:0.2 alpha:0.5].CGColor;

CGFloat paperMargin = 9.0;
CGRect paperRect = CGRectMake(self.bounds.origin.x+paperMargin, 
                              self.bounds.origin.y,
                              self.bounds.size.width-paperMargin*2, 
                              self.bounds.size.height);

CGRect arcRect = paperRect;
arcRect.size.height = 8;

CGContextSaveGState(context);
CGMutablePathRef arcPath = createArcPathFromBottomOfRect(arcRect, 4.0);
CGContextAddPath(context, arcPath);
CGContextClip(context);            
drawLinearGradient(context, paperRect, lightGrayColor, darkGrayColor);
CGContextRestoreGState(context);

CGContextSaveGState(context);
CGPoint pointA = CGPointMake(arcRect.origin.x, 
                             arcRect.origin.y + arcRect.size.height - 1);
CGPoint pointB = CGPointMake(arcRect.origin.x, arcRect.origin.y);
CGPoint pointC = CGPointMake(arcRect.origin.x + arcRect.size.width - 1, 
                             arcRect.origin.y);
CGPoint pointD = CGPointMake(arcRect.origin.x + arcRect.size.width - 1, 
                             arcRect.origin.y + arcRect.size.height - 1);
draw1PxStroke(context, pointA, pointB, whiteColor);
draw1PxStroke(context, pointC, pointD, whiteColor);    
CGContextRestoreGState(context);

CGContextAddRect(context, paperRect);
CGContextAddPath(context, arcPath);
CGContextEOClip(context);
CGContextAddPath(context, arcPath);
CGContextSetShadowWithColor(context, CGSizeMake(0, 2), 3.0, shadowColor);
CGContextFillPath(context);

CFRelease(arcPath);
} 
```

绘制线性渐变

```
void drawLinearGradient(CGContextRef context, CGRect rect, CGColorRef startColor, CGColorRef  endColor)
{
CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
CGFloat locations[] = { 0.0, 1.0 };
NSArray *colors = [NSArray arrayWithObjects:(__bridge id)startColor, (__bridge id)endColor, nil];
CGGradientRef gradient = CGGradientCreateWithColors(colorSpace, (__bridge CFArrayRef) colors, locations);

CGPoint startPoint = CGPointMake(CGRectGetMidX(rect), CGRectGetMinY(rect));
CGPoint endPoint = CGPointMake(CGRectGetMidX(rect), CGRectGetMaxY(rect));

CGContextSaveGState(context);
CGContextAddRect(context, rect);
CGContextClip(context);
CGContextDrawLinearGradient(context, gradient, startPoint, endPoint, 0);
CGContextRestoreGState(context);

CGGradientRelease(gradient);
CGColorSpaceRelease(colorSpace);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T12:22:50.670

这里没有足够的上下文来确定地诊断问题，但我目前的猜测是您的函数`drawLinearRect()`创建了一个`NSArray`using`arrayWithObjects:`并且参数列表中的对象之一是垃圾。确保列表是 nil 终止的，并且其中的所有对象都是合理的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T13:23:07.553

JeremyP 对数组初始化程序崩溃的分析是正确的。我猜根本原因是：

`CGColorRef whiteColor = [UIColor colorWithRed:1.0 green:1.0 blue:1.0 alpha:1.0].CGColor;`

我的猜测是，由于您在此声明之外不使用`UIColor`您创建的，它将被 ARC 急切地发布。这也意味着`CGColor`您没有以任何方式保留的（以及 ARC 不会为您保留的）可能也被释放和解除分配。

尝试为每个 UIColors 使用类似的东西（对于白色的，只需使用`[UIColor whiteColor]`）：

```
UIColor *color = [UIColor ...];
CGColorRef cgColor = CFRetain(color.CGColor);
color = nil; 
```

# c++ - 我可以从我的程序启动我的 MSI 安装程序吗？

> ID：11242691
> 
> 赞同：1
> 
> 时间：2012-06-28T10:30:19.010
> 
> 标签：c++, windows-installer

我希望用户能够通过单击 UI 上的按钮来重新配置他们的安装（打开/关闭组件）。这将使用`msiexec /i`命令（或等效命令）启动安装程序，并且与单击“程序和功能”窗口对话框中的“更改”具有相同的效果。

我有一种可能的方法：[安装 MSI 的副本](https://stackoverflow.com/q/88078/319618)并使用它来触发安装向导。

但是，我想知道是否可以使用注册表或其他方法找到并触发 MSI 安装程序向导，而不是制作安装程序的副本。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T11:39:06.620

卸载信息存储在[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\<your app>](http://msdn.microsoft.com/en-us/library/windows/desktop/aa372105%28v=vs.100%29.aspx)中，其中 <your app> 是名称或 GUID（取决于您的安装）。在您的应用程序的键下，该`ModifyPath`值应该包含修改命令 -`msiexec.exe /I ...`左右。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T11:47:48.990

你可以打电话`msiexec /i <ProductCode>`，它会找出其余的。您需要将产品代码存储在某处 - 您可以轻松地将一个条目添加到您的 MSI 的注册表表中，`[ProductCode]`用作值。

# batch-file - XP 批处理文件中的错误级别报告

> ID：11242693
> 
> 赞同：0
> 
> 时间：2012-06-28T10:30:20.723
> 
> 标签：batch-file, windows-xp

过去我不必编写太多批处理文件代码，我试图通过编写测试批处理文件来了解为什么其他人的代码失败。我的代码：

```
:DoUntil
type p.txt >> log.txt
if %ERRORLEVEL% EQU 0 goto DoUntil

ECHO %ERRORLEVEL% 
```

p.txt 是一个现有的文本文件，具有一个简单的字符串，就像 log.txt 一样。

然后我运行两次以得到错误：

```
The process cannot access the file because it is being used by another process. 
```

如你所料。现在我希望设置 ERRORLEVEL 并由回声返回一个值，那么我做错了什么请命令按照我的预期得到这个回声？（它永远不会碰到回声）

或者在任何地方我都可以获得“类型”的可能返回值列表？由于所有术语的常用程度，我发现在这个主题上进行谷歌搜索非常令人沮丧！我在这里阅读了其他一些问题，这些问题帮助我纠正了示例代码中的一个问题，但不是基本问题。

### 编辑：

Jeb 在下面的回答非常完美地回答了我的问题，但我未能继续推进。我们的问题代码如下：

```
:DoUntil
type p.txt >> log.txt
if ERRORLEVEL 1 goto DoUntil 
```

所以代码试图说“如果类型失败，重试直到它工作”。我们是否通过在类型末尾没有“|| rem”子句+空语句来表示 if 语句基本上什么都不做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T10:42:28.133

重定向错误似乎存在错误/功能。所以你需要一个小技巧来获取错误代码。

```
:DoUntil
type p.txt >> log.txt || rem
if %ERRORLEVEL% EQU 0 goto DoUntil

ECHO %ERRORLEVEL% 
```

dbenham[在这里描述了它](https://stackoverflow.com/a/10358437/463115)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T11:38:41.177

在您更新的答案中回答您的最后一个问题 - 这并不那么简单。如果重定向成功但 TYPE 失败（可能 p.txt 不存在），则 IF 将正确捕获 TYPE 返回的 ERRORLEVEL。但是如果重定向失败，则永远不会执行 TYPE 并且没有正确设置 ERRORLEVEL。因此，随后的 IF 正在测试在您的语句运行之前存在的 ERRORLEVEL 的值。

同样，解决方法是使用`||`运算符。只要命令成功并且成功时不将 ERRORLEVEL 设置为 0，则可以使用除 REM 之外的任何命令。该`||`操作实际上将 ERRORLEVEL 设置为重定向失败的结果。以下命令有可能进一步设置 ERRORLEVEL。REM 可能是您可以使用的最安全的东西，`||`以保证最终的 ERRORLEVEL 是您想要的。

这是将最后 3 行合并为 1 且不使用 REM 的修复的变体

```
@echo off
setlocal enableDelayedExpansion
:loop
echo hello>test.txt && goto loop || echo !errorlevel! 
```

或者，不使用延迟扩展

```
@echo off
:loop
echo hello>test.txt && goto loop || call echo %%errorlevel%% 
```

我们不能简单地使用`|| echo %errorlevel%`，因为 %errorlevel% 在解析语句时会被扩展，这是在重定向有机会失败之前。

# android - DroidGap 无法解析为类型

> ID：11242697
> 
> 赞同：5
> 
> 时间：2012-06-28T10:30:31.353
> 
> 标签：android, cordova, android-emulator

嗨，我收到一个错误，即 DroidGap 无法解析为我的代码的类型

```
package com.hello.ponegap;

import android.app.Activity;
import android.os.Bundle;
import com.hello.*;

public class HelloponegapActivity extends DroidGap  {
  /** Called when the activity is first created. */ 

  @Override  public void onCreate(Bundle savedInstanceState) {      
     super.loadUrl("file:///android_asset/www/index.html");
     super.onCreate(savedInstanceState);  
  }
} 
```

在此先感谢，当我右键单击 lib 时，我也没有获得构建路径

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-28T11:54:20.910

将此行添加到导入

```
import org.apache.cordova.DroidGap; 
```

* * *

编辑：

如果您使用的是 Eclipse，则可以使用组合键`Ctrl + Shift + O`来组织导入。这将删除未使用的导入，并且还将导入所需的包和/或类（如果有多种可能性，例如`android.view.View.OnClickListener`和`android.content.DialogInterface.OnClickListener`，Eclipse 将让您有机会选择要导入的所需类）。

* * *

编辑：

您没有将 cordova jar 添加到构建路径中。我`.classpath`在 github repo 上检查了你的文件，它缺少这一行：`<classpathentry kind="lib" path="libs/cordova-1.8.1.jar"/>`.

**解决方法：**右键`codova-1.x.x.jar`->构建路径->添加到构建路径。

请尝试按照[此处](http://docs.phonegap.com/en/1.8.1/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android)定义的步骤进行操作。

* * *

编辑

执行以下操作： 1\. 右键单击​​项目。2\. 单击属性。3\. 在左侧，选择 Java Build Path。4\. 您会看到四个选项卡：`Source`、`Projects`、`Libraries`、`Order and Export`。选择`Libraries`。5\. 在右键单击按钮`Add JARs...`。6\. 在您的项目中搜索`cordova-1.x.x.jar`，然后选择它。7\. 单击`OK`。8\. 完成

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-28T12:45:13.977

**Eclpise：** 这可能很愚蠢，但是如果您添加了 cordova jar 并且应用程序仍然无法在您的模拟器或设备上运行，请检查您是否还选中了 jar 文件左侧的复选框

“项目属性 > Java 构建路径 > 排序和导出”

# java - 在 java web 服务中只加载文件和对象一次

> ID：11242706
> 
> 赞同：1
> 
> 时间：2012-06-28T10:30:47.167
> 
> 标签：java, web-services

我有一个完整的 web 服务，需要加载经过训练的模型文件并创建一些其他对象，这需要很多时间。因此我只需要这样做一次（在启动 web 服务时）。目前，系统会在每次 Web 服务调用时加载经过训练的文件和其他一些对象，而且成本很高。你能告诉我如何处理这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T10:38:27.680

您可以使用[单例](http://en.wikipedia.org/wiki/Singleton_pattern)模式。它用于确保某些资源只创建一次。所以基本上，你可以有一个类，其目的是实例化这些文件并让 web 服务调用这个类，就像这样（取自[Wikipedia](http://en.wikipedia.org/wiki/Singleton_pattern)）：

```
public class Singleton {
    private static volatile Singleton instance = null;
    private static File file1;
    ... 

    private Singleton() 
    {  
        //Load whatever you need here.
    }

    public static Singleton getInstance() {
            if (instance == null) {
                    synchronized (Singleton.class)
                            if (instance == null) {
                                    instance = new Singleton();
                            }
            }
            return instance;
    }

   ...
   //Other getter and setters for your files and other objects 
```

}

然后，在您的网络服务中，您可以执行以下操作：

```
...
Singleton.getInstance().getSomeFile();
... 
```

# jquery - 通过 JQuery 从数据库到数据表到通用集合到 JSON

> ID：11242707
> 
> 赞同：1
> 
> 时间：2012-06-28T10:30:52.060
> 
> 标签：jquery, asp.net, json, service, web

好人，我进退两难，时间绝对不在我这边。

**我的目标** 是我想通过数据集/数据表从数据库中获取记录，然后到一个通用集合，最后到一个在客户端使用 JQuery 的 JSon 对象，以改善用户体验。

**到目前为止**的工作方式 我的代码在 Web 服务中工作，直到数据被移交给客户端/浏览器为止。

**我不确定的事情** 由于我对 JSON 和 JQuery 的经验很少或几乎没有经验，因此来自 Web 服务的数据不会显示在 Web 浏览器中。我不知道问题出在哪里。

**代码** 在这里我附上我的其余代码：

1.  hotelrates.vb 文件，hotelrates.asmx 文件背后的代码

> ```
> Imports System.Web
> Imports System.Web.Services
> Imports System.Web.Services.Protocols
> Imports System.Web.Script.Services
> Imports System.Collections.Generic
> Imports System.Linq
> Imports System.Data
> Imports MySql.Data.MySqlClient
> Imports System.Reflection
> 
> <WebService([Namespace]:="http://tourslogin.net/")> _
> <WebServiceBinding(ConformsTo:=WsiProfiles.BasicProfile1_1)> _
> <ScriptService()> _
> Public Class Hotelrates
>  Inherits WebService
>  <WebMethod()> _
>  Public Function GetRates() As Generic.List(Of Rate)
>     Dim m_globalfunctions As New clsGlobalFunctions
>     Dim SQL As String = "SELECT 
> ```
> 
> tblhotelrates.ID,供应商,From_date,To_Date,Room_type,Room_basis FROM tblhotelrates,tblHotels WHERE tblhotelrates.SupplierID=tblHotels.ID "
> 
> ```
>  Dim clsDB As New clsDatabase("jksafarisdbConnectionString")
>      Dim dsCostingDetails As DataSet
>      Try
>         dsCostingDetails = clsDB.QueryDataSet(SQL, "jksafarisdbConnectionString")
> 
>         Dim s As Rate
>         Dim c As New Generic.List(Of Rate)
>         For Each dr As DataRow In dsCostingDetails.Tables(0).Rows
>             s = New Rate
>             With s
>                 .myID = m_globalfunctions.CheckDBNull(dr("ID"))
>                 .Supplier = m_globalfunctions.CheckDBNull(dr("Supplier"))
>             End With
>             c.Add(s)
>         Next
> 
>         Return c
>     Catch ex As Exception
>         MsgBox(ex.Message)
>     Finally
>         clsDB.Close()
>     End Try
> 
> End Function End Class <Serializable()> _ Public Class Rate
> Private _myID As String
> Private _supplier As String
> 
> Public Property myID() As String
>     Get
>         Return _myID
>     End Get
>     Set(ByVal value As String)
>         _myID = value
>     End Set
> End Property
> 
> Public Property Supplier() As String
>     Get
>         Return _supplier
>     End Get
>     Set(ByVal value As String)
>         _supplier = value
>     End Set
> End Property End Class 
> ```

1.  客户端代码JQuery/Json

> ```
> <div id="output"></div>
> <script type="text/javascript">
> $(function () {
> 
>  $('#Button1').click(getRates);
> 
>  });
> 
> function getRates() {
> 
> $.ajax({
> 
>     type: "POST",
> 
>     url: "Hotelrates.asmx/GetRates",
> 
>     data: "{}",
> 
>     contentType: "application/json; charset=utf-8",
> 
>     dataType: "json",
> 
>     success: function (response) {
> 
>         var rates = response.d;
> 
>         $('#output').empty();
> 
>         $.each(rates, function () {
> 
>             $('#output').append('<p><strong>' + Rate.myID + ' ' +
> 
>                         Rate.myID + '</strong><br /> Year: ' +
> 
>                         Rate.mySupplier + '<br />');
> 
>         });
> 
>     },
> 
>     failure: function (msg) {
> 
>         $('#output').text(msg);
> 
>     }
> });
>      }
> 
>   </script>
>   </asp:Content> 
> ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T11:41:17.247

您的 js 中的 Rate 变量似乎没有声明。

尝试使用以下方法更改您的成功回调函数：

```
success: function (response) {
    var rates = response.d;
    $('#output').empty();

    for (var r in rates) {
        $('#output').append('<p><strong>' + rates[r].myID + ' ' +
                    rates[r].myID + '</strong><br /> Year: ' +
                    rates[r].mySupplier + '<br />');

    }
} 
```

# javascript - 如何识别 Selenium 页面中的元素，当它在保存后自动更新时？（自动化相关）

> ID：11242709
> 
> 赞同：0
> 
> 时间：2012-06-28T10:30:53.347
> 
> 标签：javascript, testing, selenium, automation, automated-tests

我在网页的窗口中有一个元素，我第一次能够识别它，并且能够成功地自动化测试用例。但是，在第二次保存后，元素的 div 会像 div(name) 一样更新，更改为 div(name[1])...

我怎样才能始终成功地识别这个元素？我想每次都单击 div(name) 附近的元素，并且页面没有其他唯一标识符。

我正在使用硒进行测试自动化。我测试的网站是用 ext-js 构建的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T03:07:08.527

当您提到类似 Selenium 的框架时，您到底是什么意思？Ext JS 的自动化是一件比较棘手的事情。我建议使用[Sahi Pro](http://sahi.co.in)来自动化 ext js 应用程序。

让我说一下原因：

1.  Sahi 不仅仅取决于您要识别的元素的 ID。因此即使 id 发生变化，它也可以使用它在窗口中的相对位置来识别它。因此，如果您的 div 靠近某个标题：

    ### 这是一个 div

    这是我的 div

您可以将 div 标识为 _div(0, _near(_heading3("This is a div")));。

还有其他可用于可靠识别元素的访问器。您还可以使用其他信息（例如类、标签、文本等）来识别元素。

希望有帮助。谢谢，维维克

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T07:29:48.100

该元素在主网格布局中更新，下一次，我正在识别的元素变为 item[1]，来自 item...所以，我别无选择，只能使元素独一无二，为此，我从主网格布局中删除了该项目，它会自动更新...这解决了我的问题...从下一次开始，自动化工具始终识别该元素...

# linux - 如何检查 Ubuntu 上是否存在预构建的包

> ID：11242720
> 
> 赞同：1
> 
> 时间：2012-06-28T10:31:39.203
> 
> 标签：linux, ubuntu, prebuild

我正在尝试安装`gtk-pixbuf 2.61.1`，但它说它缺少`TIFF library`, 从它说的[gnome 站点](http://developer.gnome.org/gtk/2.24/gtk-building.html)

> 在从源代码安装这些库之前，您应该检查您的操作系统供应商是否有这些库的预构建包，而这些库您尚未安装

我是新手，`Ubuntu`不确定如何在从源代码安装它们之前检查这些预构建的包是否存在。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-28T10:38:14.143

您可以使用它`apt-cache search`来查找您需要的库。

在我的系统上我有 Debian，差异很小，例如

```
$ apt-cache search libtiff dev
libtiff5-alt-dev - Tag Image File Format library (TIFF), alternative development files
libtiff5-dev - Tag Image File Format library (TIFF), development files
libtiff4-dev - Tag Image File Format (TIFF) library (old version), development files 
```

当你找到你的库时，你需要安装它：

```
 $ apt-get install libtiff5-dev 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T10:37:23.080

您可以使用

```
 dpkg --get-selections 
```

列出 Ubuntu 在您的系统上安装的所有软件包。看看这个链接[http://www.howtogeek.com/howto/linux/show-the-list-of-installed-packages-on-ubuntu-or-debian/](http://www.howtogeek.com/howto/linux/show-the-list-of-installed-packages-on-ubuntu-or-debian/)

# javascript - 输入框上的 Href 不起作用

> ID：11242722
> 
> 赞同：0
> 
> 时间：2012-06-28T10:31:40.177
> 
> 标签：javascript, html, anchor, inputbox

我正在尝试将输入框与给定的 url 链接，但它目前无法在我的网站上运行...

我已经尝试了两个代码，但都没有工作......

第一个：

```
<a href="http://google.com">
<input name="category" id="category" type="text" value="example" style="cursor:pointer;"  readonly="readonly" disabled="disabled" /></a> 
```

第二：

```
<input name="category" id="category" type="text" value="example" style="cursor:pointer;" onclick="location.href ='http://google.com'" readonly="readonly" disabled="disabled" /> 
```

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T10:32:55.197

它被标记为禁用，因此`onclick`不会触发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T10:33:28.563

```
<input name="category" id="category" type="text" value="example" style="cursor:pointer;" onclick="document.location.href ='http://google.com'" readonly="readonly" /> 
```

# java - 如何使用 Selenium WebDriver 处理 HtmlUnitDriver 的身份验证？

> ID：11242723
> 
> 赞同：3
> 
> 时间：2012-06-28T10:31:44.260
> 
> 标签：java, selenium, webdriver, htmlunit-driver

如何使用 HtmlUnitDriver 处理身份验证？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T12:15:09.753

如果这是您需要的基本身份验证，您可以在创建 HtmlUnitDriver 实例时执行此操作：（代码在 scala 中，但您可以轻松地将其更改为 java）

```
new HtmlUnitDriver() {
  override def modifyWebClient(client: WebClient) = {
    val creds = new DefaultCredentialsProvider()
    creds.addCredentials("user-name", "user-password");
    client.setCredentialsProvider(creds)
    client
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T11:11:10.723

在java中尝试这个似乎对我有用

```
WebDriver driver = new HtmlUnitDriver() {
    protected WebClient modifyWebClient(WebClient client) {
        // This class ships with HtmlUnit itself
        DefaultCredentialsProvider creds = new DefaultCredentialsProvider();

        // Set some example credentials
        creds.addCredentials("username", "password");

        // And now add the provider to the webClient instance
        client.setCredentialsProvider(creds);

        return client;
    }
}; 
```

# facebook - Facebook Open Graph 对象未按需要显示

> ID：11242726
> 
> 赞同：0
> 
> 时间：2012-06-28T10:31:47.690
> 
> 标签：facebook, facebook-graph-api, facebook-opengraph

我为我的 FB 应用程序定义了一个动作和一个对象。该对象对于操作是必需的，它包含 4 个重要属性，但其中一个属性是一个字符串数组，它可以包含许多项目（例如 12 个项目）。

当我在仪表板中设计我的 Graph 对象时，UI 看起来不错，所有属性都显示在“预览”部分中，在我的 12 个特定属性项中，显示了 2 个并且有一个“全部显示”链接按钮.

![在此处输入图像描述](../Images/8505f69469493483f3116af392ddb2c9.png)

这些 wodcontent 对我的对象来说非常重要，没有它们，动作对其他人毫无意义。

我的问题是，当我定义我的操作（引用/指向上述对象）的外观时，我可以看到 OBJECT_TITLE 是硬编码显示的，并且有 4 个标题字段可以定义要显示的内容。

![在此处输入图像描述](../Images/62d94041c98cb29505907085784a9868.png)

是否有可能以某种方式显示我的漂亮对象预览 UI 以执行该操作？因此，当执行操作时，我看到对象显示为在对象的仪表板设置页面中预览，并且不仅显示对象的标题和 4 个可选标题字段。

我的第二个问题是可以用多行显示 wodcontent 属性吗？这将非常有助于阅读清晰度。

# axapta - 如何在 Axapta 中创建查询？

> ID：11242728
> 
> 赞同：1
> 
> 时间：2012-06-28T10:31:54.913
> 
> 标签：axapta, dynamics-ax-2009

这与我之前的一个问题有关。我有一个带有 3 个连接表的（不是那么）“复杂”查询。这是查询：

```
 select  somefield
from WMSTRANSPORT INNER join GMSWmslocationwrkctr On WMSTRANSPORT.TOLOCATION = GMSWMSLOCATIONWRKCTR.WMSLOCATIONID
inner join WMSLOCATIONSUM on WMSTRANSPORT.TOLOCATION = WMSLOCATIONSUM.WMSLOCATIONID
where 
EXPEDITIONSTATUS=3 OR EXPEDITIONSTATUS =4 
```

如何“转换”为 X++ 代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T13:02:09.107

只需将 ON 子句更改为 WHERE 子句，使用 == 代替 =，然后使用 || 而不是 OR：

```
select somefield
from WMSTRANSPORT 
where (WMSTRANSPORT.EXPEDITIONSTATUS==3 || WMSTRANSPORT.EXPEDITIONSTATUS==4)
join GMSWmslocationwrkctr where WMSTRANSPORT.TOLOCATION == GMSWMSLOCATIONWRKCTR.WMSLOCATIONID
join WMSLOCATIONSUM where WMSTRANSPORT.TOLOCATION == WMSLOCATIONSUM.WMSLOCATIONID 
```

# android - USB_DEVICE_ATTACHED 仅启动 Galaxy S3 ICS 的活动

> ID：11242730
> 
> 赞同：9
> 
> 时间：2012-06-28T10:31:57.550
> 
> 标签：android, usb

最近，我一直在尝试根据我见过的所有示例和示例使用广播接收器接收意图 android.hardware.usb.action.USB_DEVICE_ATTACHED。

我已经在清单中声明了一个接收者；

```
<receiver android:name=".UsbDeviceReceiver">
        <intent-filter>
            <action android:name="android.hardware.usb.action.USB_DEVICE_ATTACHED" />
            <action android:name="android.hardware.usb.action.USB_DEVICE_DETACHED" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </receiver>
    <meta-data android:name="android.hardware.usb.action.USB_DEVICE_ATTACHED" 
                android:resource="@xml/device_filter"/> 
```

我在活动代码中也做了类似的事情——onStart 和 OnStop 注册/注销接收器。

```
 IntentFilter filter = new IntentFilter();
    filter.addAction(UsbManager.ACTION_USB_DEVICE_ATTACHED);

    registerReceiver(mUsbReceiver, filter); 
```

但是，我发现意图被抓住了。观察 logcat 我可以看到附加 USB 设备会寻找要启动的活动，而分离则广播分离意图。根据上述样本，情况不应该如此。

我是否遗漏了一些关于元数据的激烈内容？我对 android.hardware.usb.action.USB_DEVICE_DETACHED 没有任何问题。也许这是安装在galaxy s3上的android版本的错误？也许这是 ICS 的“功能”。

欢迎任何相关信息！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T00:29:08.313

这是一个已知的缺陷：

[http://code.google.com/p/android/issues/detail?id=25701](http://code.google.com/p/android/issues/detail?id=25701)

和这里：

[http://code.google.com/p/android/issues/detail?id=25703](http://code.google.com/p/android/issues/detail?id=25703)

但是不要屏住呼吸等待它被修复。当您查看错误报告时，请给它加星标，以便您收到报告更新的通知。这可能是其他人要求修复的评论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T20:31:20.770

我找到的解决方法`USB_ACCESSORY_ATTACHED`是只有一个按钮`OpenAccessory(accessory)`再次调用我的方法，这似乎对我有用。也许这也适用`USB_DEVICE_ATTACHED`。只需在某处设置设备已连接/未连接状态，如果未连接，用户只需点击该按钮即可。

编辑：我发现放入`android:launchMode="singleTask"`清单似乎“注册”了 的意图`USB_ACCESSORY_ATTACHED`，尽管它从来没有这样显示它确实像它正在做的那样工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-16T10:00:45.707

您可以在清单中声明意图过滤器，如下所述：http: [//developer.android.com/guide/topics/connectivity/usb/host.html](http://developer.android.com/guide/topics/connectivity/usb/host.html)

然后你在 onResume() 或 onNewIntent() 中捕获 android.hardware.usb.action.USB_DEVICE_ATTACHED。

当您的活动正在运行并附加您的 USB 设备时，主要意图被抛出到 onResume() 但 android.hardware.usb.action.USB_DEVICE_ATTACHED 到 onNewIntent()。据此调整您的代码。

你可以声明 onNewIntent() 如下：

```
@Override
    protected void onNewIntent(Intent intent) 
    {
        super.onNewIntent(intent);
        System.out.println("onNewIntent" + intent.getAction());
        if (UsbManager.ACTION_USB_DEVICE_ATTACHED.equals(intent.getAction())) {
        mDevice = (UsbDevice) intent.getParcelableExtra(UsbManager.EXTRA_DEVICE);
        if(mDevice!= null)
            mUsbManager.requestPermission(mDevice, mPermissionIntent);
        }
    } 
```

和 onResume() 类似。

在 android 4.0.4 设备上测试：Samsung Galaxy tab 750

# windows - 安装服务时出现 System.BadImageFormatException

> ID：11242732
> 
> 赞同：0
> 
> 时间：2012-06-28T10:32:03.587
> 
> 标签：windows, service, windows-services, badimageformatexception

我已经使用 exe4j 创建了一个 exe（选择创建一个服务）我正在使用 v2.0 .net 框架库运行 installutil

```
 installutil c:\...\myExe 
```

我得到

该模块应包含程序集清单 - badimageformatexception

我该如何解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T11:01:47.073

InstallUtil 是 NET 创建的服务的安装程序。
我怀疑它是否可以安装使用 exe4j 创建的服务。

我会尝试使用 sc.exe

[查看参考资料](http://support.microsoft.com/kb/251192)

# sql - 如何在 SQL 中创建删除触发器，从子表中删除一条记录更新父表中的记录数？

> ID：11242733
> 
> 赞同：0
> 
> 时间：2012-06-28T10:32:05.483
> 
> 标签：sql, sql-server, sql-server-2008

我创建了两个表。首先是杂志

```
CREATE TABLE [dbo].[Magzine](
[ID] [int] IDENTITY(1,1) NOT NULL,
[Name] [nvarchar](350) NULL,
[MagzineType] [int] NOT NULL,
[TotalPages] [int] NOT NULL,
[DateCreated] [datetime] NOT NULL,
[Active] [bit] NOT NULL, CONSTRAINT [PK_tblMagzine] PRIMARY KEY CLUSTERED (
[ID] ASC)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]) ON [PRIMARY] GO 
```

它有一个列名 TotalPages 保存杂志中的总页数

这是 MagzinePage 表。

```
CREATE TABLE [dbo].[MagzinePage](
[ID] [int] IDENTITY(1,1) NOT NULL,
[MagzineID] [int] NOT NULL,
[Title] [nvarchar](255) NULL,
[SubTitle] [nvarchar](255) NULL,
[Photo] [nvarchar](255) NULL,
[Description] [nvarchar](2000) NULL,
[DateCreated] [datetime] NOT NULL,
[CreatedBy] [nvarchar](25) NOT NULL,
[Active] [bit] NOT NULL,
[IsMapped] [bit] NULL, CONSTRAINT [PK_tblPage] PRIMARY KEY CLUSTERED (
[ID] ASC)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]) ON [PRIMARY] GO 
```

我已经创建了一个在 magzinePage 表中插入数据的触发器，它可以根据 ID 处理插入到表中的记录总数这里是触发器

```
Alter TRIGGER trgAfterInsert ON [dbo].[MagzinePage] 
    FOR INSERT

    AS
    Declare @MagzineID int;
    Declare @TotalPages int;
    Set @MagzineID= (Select Top 1 MagzineID From MagzinePage Order By ID Desc)
    Set @TotalPages =  (Select Count(MagzineID) from MagzinePage Where MagzineID=@MagzineID Group By MagzinePage.MagzineID) 

        Update Magzine Set TotalPages=@TotalPages Where ID= @MagzineID

        PRINT 'AFTER INSERT trigger fired.'
    GO 
```

现在我想创建一个触发器，目的是在删除 magzinePage 表中的记录时帮助减少 Magzine 表中的总页数。

请帮我想办法解决这个问题。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T10:40:48.053

您可以创建一个索引视图，该视图将始终为您保持最新的计数：

```
create view dbo.vwMagzinePageCount 
with schemabinding
as
select [MagzineID], count_big(*) as TotalPages
from dbo.[MagzinePage]
group by [MagzineID];
go

create unique clustered index cdxMagzinePageCount 
    on dbo.vwMagzinePageCount (MagzineID);
go 
```

我保留了你对“杂志”的拼写。从许多角度（正确性、性能等）来看，这比触发器要好得多。*引擎将在任何*操作中保持此计数最新。从 Magzine 表中删除 TotalPages 列。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T10:42:10.787

如果您确实**需要**存储计数，无论出于何种原因，您是否考虑过让 SQL Server 为您完成这项工作？如果您`TotalPages`从第一个表中删除，并定义此视图：

```
CREATE VIEW dbo.MagzineWithPages
WITH SCHEMABINDING
AS
    select m.ID,Name,MagzineType,COUNT_BIG(*) as TotalPages,m.DateCreated,m.Active
    from
        dbo.Magzine m
            inner join
        dbo.MagzinePage mp
            on
                m.ID = mp.MagzineID
    group by
        m.ID,Name,MagzineType,m.DateCreated,m.Active
GO
CREATE UNIQUE CLUSTERED INDEX IX_MagzineWithPages on MagzineWithPages (ID) 
```

然后`COUNT()`将在添加和删除页面行时自动更新。这还具有您可能希望更新此定义的好处，例如忽略`Active`为 0 的页面。

* * *

*为什么你的*触发器坏了 - 像这样运行 INSERT：

```
INSERT INTO [dbo].[MagzinePage]([MagzineID],[DateCreated],[CreatedBy],[Active]) VALUES
(1,CURRENT_TIMESTAMP,'Me',1),
(2,CURRENT_TIMESTAMP,'Me also',1) 
```

该`TOP 1 MagzineID`表中的 将是`1`或`2`。您将为其中一个运行更新，而错过另一个。

* * *

如果您真的想将其保留在原始表格中（如果您坚持，我强烈建议您不要这样做）：

```
CREATE TRIGGER T_MagzinePage on dbo.MagzinePage
AFTER INSERT,UPDATE,DELETE
AS

SET NOCOUNT ON

;with Deltas as (
    select MagzineID,COUNT(*) as Cnt,0 as Del from inserted group by MagzineID
    union all
    select MagzineID,COUNT(*),1 from deleted group by MagzineID
), Merged as (
    select MagzineID,SUM(CASE WHEN Del=0 then Cnt ELSE -Cnt END) as Net
)
update m set TotalPages = TotalPages + Net
from Magzine m
inner join
Merged mm
on
    m.MagzineID = mm.MagzineID 
```

应该将其作为单个触发器（废弃现有的触发器），并正确处理插入中的多行，以及更新更改`MagzineID`和一大堆其他问题。

# android - 从 java 代码更改 xml 选择器值

> ID：11242735
> 
> 赞同：6
> 
> 时间：2012-06-28T10:32:09.623
> 
> 标签：android

我正在尝试为多个按钮创建一个通用图像选择器。是否可以从 java 代码中更改 xml 的“android:drawable”资源？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-28T10:40:43.720

使用[StateListDrawable](http://developer.android.com/reference/android/graphics/drawable/StateListDrawable.html)通过代码查看选择器：

```
StateListDrawable states = new StateListDrawable();
states.addState(new int[] {android.R.attr.state_pressed},
    getResources().getDrawable(R.drawable.pressed));
states.addState(new int[] {android.R.attr.state_focused},
    getResources().getDrawable(R.drawable.focused));
states.addState(new int[] { },
    getResources().getDrawable(R.drawable.normal));

imageView.setImageDrawable(states);  //YOUR IMAGE HERE
//AND FOR BUTTON
 button.setBackgroundDrawable(states);//FOR BUTTON 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T10:39:05.637

您可以设置从 java 中绘制的按钮，例如

```
 btnSettings.setBackgroundResource(R.drawable.ic_launcher); 
```

# git - Git：如何接受子模块冲突的“他们的”版本？

> ID：11242736
> 
> 赞同：6
> 
> 时间：2012-06-28T10:32:13.453
> 
> 标签：git, conflict, git-submodules

如果发生子模块冲突（即当要合并的两个提交包含引用提交的不同更改时），我怎样才能轻松地将子模块设置为“他们的”提交？如果是文件，我会执行：

```
git checkout --theirs <file> 
```

但是，这不适用于子模块。在更技术层面上，我拥有的是一个包含`submodule`阶段*1*、*2*和*3*的索引：

```
$ git ls-files -s module
160000 89b085c4269259fa22632353071e6875f158afde 1       submodule
160000 b9ad3bc8aafdf52a2adf74620afae8934474b82d 2       submodule
160000 1afd42893d18ef5edeeadd67e7c65262505e6004 3       submodule 
```

我想要的是在第*0*阶段拥有“他们的”版本：

```
$ git ls-files -s module
160000 1afd42893d18ef5edeeadd67e7c65262505e6004 0       submodule 
```

**更新：**删除了参考[http://fiji.sc/wiki/index.php/Git_submodule_tutorial](http://fiji.sc/wiki/index.php/Git_submodule_tutorial)上的错误断言。

**更新 2：**添加了与索引相关的示例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T04:46:57.630

您的父存储库只是指您的子模块存储库的当前工作版本。“子模块指针”始终指向子模块的工作副本。

因此，您必须将子模块存储库置于您想要的状态（在这种特定情况下，通过将其更新为“他们的”版本）。之后，“子模块指针”将自动更新（当然，您必须提交更改）。

# android - 使用关闭按钮关闭整个应用程序

> ID：11242740
> 
> 赞同：0
> 
> 时间：2012-06-28T10:32:53.213
> 
> 标签：android, android-activity

如果我使用我的应用程序`finish()`，它将关闭活动**A**。对于像**A** -> **B** -> **C**（*当前可见*）这样的活动堆栈，如果我`finish()`在**C**中使用它将关闭**C**，而不是**A**或**B**和**B**恢复。

在这种情况下，如果我需要通过单击活动**C**中的关闭按钮**一目了然地关闭所有活动，**那么解决方案是什么？Android 是否提供任何技术来实现这一点？

 *** * *

**注意：**我在[**这里**](https://stackoverflow.com/questions/10927301/closing-of-activity-in-android)找到了一个部分有用的解决方案，不足以解决我的问题。虽然你可能会从这里得到一些想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T10:48:11.107

参考这个链接它会帮助你

[完成之前的所有活动](https://stackoverflow.com/questions/6330260/finish-all-previous-activities)

```
Intent intent = new Intent(getApplicationContext(), Home.class);
intent.addFlags(FLAG_ACTIVITY_CLEAR_TOP);
startActivity(intent); 
```

这将清除家庭顶部的所有活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T11:48:51.840

好的，在关闭按钮上单击将广播发送到您的家庭活动，然后调用：

```
// Inside broadcast recevier do this, it wont allow then write below code in a separate function and call this. 
Intent intent = new Intent(getApplicationContext(), Home.class);
intent.addFlags(FLAG_ACTIVITY_CLEAR_TOP);
startActivity(intent);
finish();
System.exit(0); 
```

它肯定会起作用，我以前已经做过，它对我有用。**

# php - 如何获取我用来分割字符串的分割字符串

> ID：11242741
> 
> 赞同：2
> 
> 时间：2012-06-28T10:32:53.507
> 
> 标签：php

我有一个字符串如下

“2012-06-29 Some text 2012-06-30 Some text ..” 我正在使用 split（日期的正则表达式）在 php 中拆分上述文本，但我也需要获取该日期。我想得到我用来分割字符串的分割字符串。我需要拆分字符串、日期和单独变量中的字符串来处理。

像

> ```
>  2012-06-29 App Started
>    2012-06-30 Login Event 
> ```

我怎样才能在php中得到这个

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T10:38:36.283

像什么？

```
preg_match_all("#(?<date>[0-9]{4}-[0-9]{2}-[0-9]{2}) (?<text>[^0-9]+)#", $text, $matches) 
```

示例代码

```
 $text = "2012-12-25 xmas 1984-06-01 Puggans birhday 2012-07-28 today";

        preg_match_all("#(?<date>[0-9]{4}-[0-9]{2}-[0-9]{2}) (?<text>[^0-9]+)#", $text, $matches, PREG_SET_ORDER);

        foreach($matches as $current_match)
        {
                echo "<tr><td>" . $current_match['date'] . "</td><td>" . trim($current_match['text']) . "</td></tr>\n";
        }
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T10:39:19.893

也可以使用 PREG_SPLIT_DELIM_CAPTURE 尝试 preg_split。

[http://www.php.net/manual/en/function.preg-split.php](http://www.php.net/manual/en/function.preg-split.php)

```
$text="2012-06-29 App Started
2012-06-30 Login Event";

$data=preg_split("/([0-9]{4}\-[0-9]{2}\-[0-9]{2})/", $text, 0, PREG_SPLIT_DELIM_CAPTURE);

print_r($data); 
```

给出：

数组（[0] => [1] => 2012-06-29 [2] => 应用启动 [3] => 2012-06-30 [4] => 登录事件）

切断第一个，然后您的所有数据都是替代字段。

如果您按 \nDATE 拆分，这将允许您**在文本中也有日期。**

```
$text="2012-06-29 App Started 2003-20-02
2012-06-30 Login Event";

$data=preg_split("/\\n([0-9]{4}\-[0-9]{2}\-[0-9]{2})/", "\n".$text, 0, PREG_SPLIT_DELIM_CAPTURE); 
```

# php - GCM 与 PHP（谷歌云消息）

> ID：11242743
> 
> 赞同：216
> 
> 时间：2012-06-28T10:32:56.613
> 
> 标签：php, android, firebase-cloud-messaging, google-cloud-messaging

> **更新：不推荐使用** [GCM](https://developers.google.com/cloud-messaging/)，请使用[FCM](https://firebase.google.com/docs/cloud-messaging/)

如何将新的[Google Cloud Messaging](https://en.wikipedia.org/wiki/Google_Cloud_Messaging)集成到PHP 后端？

* * *

## 回答 #1

> 赞同：238
> 
> 时间：2012-06-28T21:34:28.310

此代码将通过 PHP CURL 向多个注册 ID 发送 GCM 消息。

```
// Payload data you want to send to Android device(s)
// (it will be accessible via intent extras)    
$data = array('message' => 'Hello World!');

// The recipient registration tokens for this notification
// https://developer.android.com/google/gcm/    
$ids = array('abc', 'def');

// Send push notification via Google Cloud Messaging
sendPushNotification($data, $ids);

function sendPushNotification($data, $ids) {
    // Insert real GCM API key from the Google APIs Console
    // https://code.google.com/apis/console/        
    $apiKey = 'abc';

    // Set POST request body
    $post = array(
                    'registration_ids'  => $ids,
                    'data'              => $data,
                 );

    // Set CURL request headers 
    $headers = array( 
                        'Authorization: key=' . $apiKey,
                        'Content-Type: application/json'
                    );

    // Initialize curl handle       
    $ch = curl_init();

    // Set URL to GCM push endpoint     
    curl_setopt($ch, CURLOPT_URL, 'https://gcm-http.googleapis.com/gcm/send');

    // Set request method to POST       
    curl_setopt($ch, CURLOPT_POST, true);

    // Set custom request headers       
    curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);

    // Get the response back as string instead of printing it       
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

    // Set JSON post data
    curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($post));

    // Actually send the request    
    $result = curl_exec($ch);

    // Handle errors
    if (curl_errno($ch)) {
        echo 'GCM error: ' . curl_error($ch);
    }

    // Close curl handle
    curl_close($ch);

    // Debug GCM response       
    echo $result;
} 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-07-03T14:22:01.517

```
<?php
    // Replace with the real server API key from Google APIs
    $apiKey = "your api key";

    // Replace with the real client registration IDs
    $registrationIDs = array( "reg id1","reg id2");

    // Message to be sent
    $message = "hi Shailesh";

    // Set POST variables
    $url = 'https://android.googleapis.com/gcm/send';

    $fields = array(
        'registration_ids' => $registrationIDs,
        'data' => array( "message" => $message ),
    );
    $headers = array(
        'Authorization: key=' . $apiKey,
        'Content-Type: application/json'
    );

    // Open connection
    $ch = curl_init();

    // Set the URL, number of POST vars, POST data
    curl_setopt( $ch, CURLOPT_URL, $url);
    curl_setopt( $ch, CURLOPT_POST, true);
    curl_setopt( $ch, CURLOPT_HTTPHEADER, $headers);
    curl_setopt( $ch, CURLOPT_RETURNTRANSFER, true);
    //curl_setopt( $ch, CURLOPT_POSTFIELDS, json_encode( $fields));

    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
    // curl_setopt($ch, CURLOPT_POST, true);
    // curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode( $fields));

    // Execute post
    $result = curl_exec($ch);

    // Close connection
    curl_close($ch);
    echo $result;
    //print_r($result);
    //var_dump($result);
?> 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-06-28T22:58:34.407

这很容易做到。Elad Nava 放在这里的页面上的[cURL代码有效。](http://en.wikipedia.org/wiki/CURL)Elad[评论了](http://developer.android.com/guide/google/gcm/gcm.html#response)他收到的错误。

描述在处理该收件人的消息时发生的错误的字符串。可能的值与上表中记录的相同，加上“不可用”（意味着 GCM 服务器很忙，无法处理该特定收件人的消息，因此可以重试）。

我已经设置了一个似乎正在运行的服务（ish），到目前为止，我所拥有的只是谷歌无法获得的回报。这很可能很快就会改变。

要回答这个问题，请使用 PHP，确保[Zend 框架](http://en.wikipedia.org/wiki/Zend_Framework)在您的包含路径中，然后使用以下代码：

```
<?php
    ini_set('display_errors',1);
    include"Zend/Loader/Autoloader.php";
    Zend_Loader_Autoloader::getInstance();

    $url = 'https://android.googleapis.com/gcm/send';
    $serverApiKey = "YOUR API KEY AS GENERATED IN API CONSOLE";
    $reg = "DEVICE REGISTRATION ID";

    $data = array(
            'registration_ids' => array($reg),
            'data' => array('yourname' => 'Joe Bloggs')
    );

    print(json_encode($data));

    $client = new Zend_Http_Client($url);
    $client->setMethod('POST');
    $client->setHeaders(array("Content-Type" => "application/json", "Authorization" => "key=" . $serverApiKey));
    $client->setRawData(json_encode($data));
    $request = $client->request('POST');
    $body = $request->getBody();
    $headers = $request->getHeaders();
    print("<xmp>");
    var_dump($body);
    var_dump($headers); 
```

我们终于得到它了。在 Zend Framework PHP 中使用 Google 的新 GCM 的工作（很快就会工作）示例。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2012-11-21T09:22:15.837

找了很久终于搞清楚我到底需要什么，使用 PHP 作为服务器端脚本语言连接到 GCM，下面的教程将让我们清楚地了解如何设置开始所需的一切使用 GCM

[使用 Google Cloud Messaging (GCM)、PHP 和 MySQL 的 Android 推送通知](http://www.androidhive.info/2012/10/android-push-notifications-using-google-cloud-messaging-gcm-php-and-mysql/)

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2012-06-29T20:15:50.557

实际上，我现在在 Zend_Mobile 树的一个分支中工作：[https ://github.com/mwillbanks/Zend_Mobile/tree/feature/gcm](https://github.com/mwillbanks/Zend_Mobile/tree/feature/gcm)

这将与 ZF 1.12 一起发布，但是，它应该为您提供一些关于如何执行此操作的很好的示例。

这是一个关于它如何工作的快速演示......

```
<?php
require_once 'Zend/Mobile/Push/Gcm.php';
require_once 'Zend/Mobile/Push/Message/Gcm.php';

$message = new Zend_Mobile_Push_Message_Gcm();
$message->setId(time());
$message->addToken('ABCDEF0123456789');
$message->setData(array(
    'foo' => 'bar',
    'bar' => 'foo',
));

$gcm = new Zend_Mobile_Push_Gcm();
$gcm->setApiKey('MYAPIKEY');

$response = false;

try {
    $response = $gcm->send($message);
} catch (Zend_Mobile_Push_Exception $e) {
    // all other exceptions only require action to be sent or implementation of exponential backoff.
    die($e->getMessage());
}

// handle all errors and registration_id's
foreach ($response->getResults() as $k => $v) {
    if ($v['registration_id']) {
        printf("%s has a new registration id of: %s\r\n", $k, $v['registration_id']);
    }
    if ($v['error']) {
        printf("%s had an error of: %s\r\n", $k, $v['error']);
    }
    if ($v['message_id']) {
        printf("%s was successfully sent the message, message id is: %s", $k, $v['message_id']);
    }
} 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2013-03-29T13:27:17.917

您也可以尝试这段代码，[来源](http://dexxtr.com/post/46586478992/google-cloud-messaging-gcm-for-php)：

```
<?php
    define("GOOGLE_API_KEY", "AIzaSyCJiVkatisdQ44rEM353PFGbia29mBVscA");
    define("GOOGLE_GCM_URL", "https://android.googleapis.com/gcm/send");

    function send_gcm_notify($reg_id, $message) {
        $fields = array(
            'registration_ids'  => array( $reg_id ),
            'data'              => array( "message" => $message ),
        );

        $headers = array(
            'Authorization: key=' . GOOGLE_API_KEY,
            'Content-Type: application/json'
        );

        $ch = curl_init();
        curl_setopt($ch, CURLOPT_URL, GOOGLE_GCM_URL);
        curl_setopt($ch, CURLOPT_POST, true);
        curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
        curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
        curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($fields));

        $result = curl_exec($ch);
        if ($result === FALSE) {
            die('Problem occurred: ' . curl_error($ch));
        }

        curl_close($ch);
        echo $result;
    }

    $reg_id = "APA91bHuSGES.....nn5pWrrSz0dV63pg";
    $msg = "Google Cloud Messaging working well";

    send_gcm_notify($reg_id, $msg); 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2013-09-03T00:24:31.910

很多教程已经过时，甚至当前的代码也没有考虑到设备注册 ID 何时更新或设备取消注册。如果这些项目未选中，最终将导致阻止接收消息的问题。 [http://forum.loungekatt.com/viewtopic.php?t=63#p181](http://forum.loungekatt.com/viewtopic.php?t=63#p181)

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2013-09-20T07:56:42.027

```
<?php

function sendMessageToPhone($deviceToken, $collapseKey, $messageText, $yourKey) {    
    echo "DeviceToken:".$deviceToken."Key:".$collapseKey."Message:".$messageText
            ."API Key:".$yourKey."Response"."<br/>";

    $headers = array('Authorization:key=' . $yourKey);    
    $data = array(    
        'registration_id' => $deviceToken,          
        'collapse_key' => $collapseKey,
        'data.message' => $messageText);  
    $ch = curl_init();    

    curl_setopt($ch, CURLOPT_URL, "https://android.googleapis.com/gcm/send");    
    if ($headers)    
        curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);    
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);    
    curl_setopt($ch, CURLOPT_POST, true);    
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);    
    curl_setopt($ch, CURLOPT_POSTFIELDS, $data);    

    $response = curl_exec($ch);    
    var_dump($response);
    $httpCode = curl_getinfo($ch, CURLINFO_HTTP_CODE);    
    if (curl_errno($ch)) {
        return false;
    }    
    if ($httpCode != 200) {
        return false;
    }    
    curl_close($ch);    
    return $response;    
}  

$yourKey = "YOURKEY";
$deviceToken = "REGISTERED_ID";
$collapseKey = "COLLAPSE_KEY";
$messageText = "MESSAGE";
echo sendMessageToPhone($deviceToken, $collapseKey, $messageText, $yourKey);
?> 
```

在上面的脚本中只需更改：

> “YOURKEY”到 API 密钥到 API 控制台的服务器密钥。
> “REGISTERED_ID” 带有您设备的注册 ID
> “COLLAPSE_KEY” 带有您需要的密钥
> “MESSAGE”带有您要发送的消息

如果您在这方面遇到任何问题，请告诉我，我可以使用相同的脚本成功获得通知。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2015-03-13T03:02:44.973

您可以使用 packagist 上提供的这个 PHP 库：

[https://github.com/CoreProc/gcm-php](https://github.com/CoreProc/gcm-php)

安装后你可以这样做：

```
$gcmClient = new GcmClient('your-gcm-api-key-here');

$message = new Message($gcmClient);

$message->addRegistrationId('xxxxxxxxxx');
$message->setData([
    'title' => 'Sample Push Notification',
    'message' => 'This is a test push notification using Google Cloud Messaging'
]);

try {

    $response = $message->send();

    // The send() method returns a Response object
    print_r($response);

} catch (Exception $exception) {

    echo 'uh-oh: ' . $exception->getMessage();

} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-11-21T20:19:26.927

我知道这是一个迟到的答案，但它可能对那些想要使用当前 FCM 格式（GCM 已被弃用）开发类似应用程序的人有用。
以下 PHP 代码已用于发送主题播客。所有使用上述频道/topis 注册的应用程序都会收到此推送通知。

```
<?php

try{
$fcm_token = 'your fcm token';
$service_url = 'https://fcm.googleapis.com/fcm/send';
$channel = '/topics/'.$adminChannel;
echo $channel.'</br>';
      $curl_post_body = array('to' => $channel,
        'content_available' => true,
        'notification' => array('click_action' => 'action_open',
                            'body'=> $contentTitle,
                            'title'=>'Title '.$contentCurrentCat. ' Updates' ,
                            'message'=>'44'),
        'data'=> array('click_action' => 'action_open',
                            'body'=>'test',
                            'title'=>'test',
                            'message'=>$catTitleId));

        $headers = array(
        'Content-Type:application/json',
        'Authorization:key='.$fcm_token);

    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $service_url);
    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
    curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($curl_post_body));

    $result = curl_exec($ch);
    if ($result === FALSE) {
        die('FCM Send Error: ' . curl_error($ch));
        echo 'failure';
    }else{

    echo 'success' .$result;
    }
    curl_close($ch);
    return $result;

}
catch(Exception $e){

    echo 'Message: ' .$e->getMessage();
}
?> 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-07-05T08:36:15.803

这是@Elad Nava发布的上述PHP代码的android代码

**MainActivity.java（启动器活动）**

```
public class MainActivity extends AppCompatActivity {
    String PROJECT_NUMBER="your project number/sender id";
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        GCMClientManager pushClientManager = new GCMClientManager(this, PROJECT_NUMBER);
        pushClientManager.registerIfNeeded(new GCMClientManager.RegistrationCompletedHandler() {
            @Override
            public void onSuccess(String registrationId, boolean isNewRegistration) {

                Log.d("Registration id", registrationId);
                //send this registrationId to your server
            }

            @Override
            public void onFailure(String ex) {
                super.onFailure(ex);
            }
        });
    }
} 
```

**GCMClientManager.java**

```
public class GCMClientManager {
    // Constants
    public static final String TAG = "GCMClientManager";
    public static final String EXTRA_MESSAGE = "message";
    public static final String PROPERTY_REG_ID = "your sender id";
    private static final String PROPERTY_APP_VERSION = "appVersion";
    private final static int PLAY_SERVICES_RESOLUTION_REQUEST = 9000;
    // Member variables
    private GoogleCloudMessaging gcm;
    private String regid;
    private String projectNumber;
    private Activity activity;
    public GCMClientManager(Activity activity, String projectNumber) {
        this.activity = activity;
        this.projectNumber = projectNumber;
        this.gcm = GoogleCloudMessaging.getInstance(activity);
    }
    /**
     * @return Application's version code from the {@code PackageManager}.
     */
    private static int getAppVersion(Context context) {
        try {
            PackageInfo packageInfo = context.getPackageManager()
                    .getPackageInfo(context.getPackageName(), 0);
            return packageInfo.versionCode;
        } catch (NameNotFoundException e) {
            // should never happen
            throw new RuntimeException("Could not get package name: " + e);
        }
    }
    // Register if needed or fetch from local store
    public void registerIfNeeded(final RegistrationCompletedHandler handler) {
        if (checkPlayServices()) {
            regid = getRegistrationId(getContext());
            if (regid.isEmpty()) {
                registerInBackground(handler);
            } else { // got id from cache
                Log.i(TAG, regid);
                handler.onSuccess(regid, false);
            }
        } else { // no play services
            Log.i(TAG, "No valid Google Play Services APK found.");
        }
    }
    /**
     * Registers the application with GCM servers asynchronously.
     * <p>
     * Stores the registration ID and app versionCode in the application's
     * shared preferences.
     */
    private void registerInBackground(final RegistrationCompletedHandler handler) {
        new AsyncTask<Void, Void, String>() {
            @Override
            protected String doInBackground(Void... params) {
                try {
                    if (gcm == null) {
                        gcm = GoogleCloudMessaging.getInstance(getContext());
                    }
                    InstanceID instanceID = InstanceID.getInstance(getContext());
                    regid = instanceID.getToken(projectNumber, GoogleCloudMessaging.INSTANCE_ID_SCOPE, null);
                    Log.i(TAG, regid);
                    // Persist the regID - no need to register again.
                    storeRegistrationId(getContext(), regid);
                } catch (IOException ex) {
                    // If there is an error, don't just keep trying to register.
                    // Require the user to click a button again, or perform
                    // exponential back-off.
                    handler.onFailure("Error :" + ex.getMessage());
                }
                return regid;
            }
            @Override
            protected void onPostExecute(String regId) {
                if (regId != null) {
                    handler.onSuccess(regId, true);
                }
            }
        }.execute(null, null, null);
    }
    /**
     * Gets the current registration ID for application on GCM service.
     * <p>
     * If result is empty, the app needs to register.
     *
     * @return registration ID, or empty string if there is no existing
     *     registration ID.
     */
    private String getRegistrationId(Context context) {
        final SharedPreferences prefs = getGCMPreferences(context);
        String registrationId = prefs.getString(PROPERTY_REG_ID, "");
        if (registrationId.isEmpty()) {
            Log.i(TAG, "Registration not found.");
            return "";
        }
        // Check if app was updated; if so, it must clear the registration ID
        // since the existing regID is not guaranteed to work with the new
        // app version.
        int registeredVersion = prefs.getInt(PROPERTY_APP_VERSION, Integer.MIN_VALUE);
        int currentVersion = getAppVersion(context);
        if (registeredVersion != currentVersion) {
            Log.i(TAG, "App version changed.");
            return "";
        }
        return registrationId;
    }
    /**
     * Stores the registration ID and app versionCode in the application's
     * {@code SharedPreferences}.
     *
     * @param context application's context.
     * @param regId registration ID
     */
    private void storeRegistrationId(Context context, String regId) {
        final SharedPreferences prefs = getGCMPreferences(context);
        int appVersion = getAppVersion(context);
        Log.i(TAG, "Saving regId on app version " + appVersion);
        SharedPreferences.Editor editor = prefs.edit();
        editor.putString(PROPERTY_REG_ID, regId);
        editor.putInt(PROPERTY_APP_VERSION, appVersion);
        editor.commit();
    }
    private SharedPreferences getGCMPreferences(Context context) {
        // This sample app persists the registration ID in shared preferences, but
        // how you store the regID in your app is up to you.
        return getContext().getSharedPreferences(context.getPackageName(),
                Context.MODE_PRIVATE);
    }
    /**
     * Check the device to make sure it has the Google Play Services APK. If
     * it doesn't, display a dialog that allows users to download the APK from
     * the Google Play Store or enable it in the device's system settings.
     */
    private boolean checkPlayServices() {
        int resultCode = GooglePlayServicesUtil.isGooglePlayServicesAvailable(getContext());
        if (resultCode != ConnectionResult.SUCCESS) {
            if (GooglePlayServicesUtil.isUserRecoverableError(resultCode)) {
                GooglePlayServicesUtil.getErrorDialog(resultCode, getActivity(),
                        PLAY_SERVICES_RESOLUTION_REQUEST).show();
            } else {
                Log.i(TAG, "This device is not supported.");
            }
            return false;
        }
        return true;
    }
    private Context getContext() {
        return activity;
    }
    private Activity getActivity() {
        return activity;
    }
    public static abstract class RegistrationCompletedHandler {
        public abstract void onSuccess(String registrationId, boolean isNewRegistration);
        public void onFailure(String ex) {
            // If there is an error, don't just keep trying to register.
            // Require the user to click a button again, or perform
            // exponential back-off.
            Log.e(TAG, ex);
        }
    }
} 
```

**PushNotificationService.java**（通知生成器）

```
public class PushNotificationService extends GcmListenerService{

    public static int MESSAGE_NOTIFICATION_ID = 100;

    @Override
    public void onMessageReceived(String from, Bundle data) {
        String message = data.getString("message");
        sendNotification("Hi-"+message, "My App sent you a message");
    }

    private void sendNotification(String title, String body) {
        Context context = getBaseContext();
        NotificationCompat.Builder mBuilder = (NotificationCompat.Builder) new NotificationCompat.Builder(context)
                .setSmallIcon(R.mipmap.ic_launcher).setContentTitle(title)
                .setContentText(body);
        NotificationManager mNotificationManager = (NotificationManager) context
                .getSystemService(Context.NOTIFICATION_SERVICE);
        mNotificationManager.notify(MESSAGE_NOTIFICATION_ID, mBuilder.build());
    }
} 
```

**AndroidManifest.xml**

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.WAKE_LOCK" />
<uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
<permission android:name="com.example.gcm.permission.C2D_MESSAGE"
    android:protectionLevel="signature" />
<uses-permission android:name="com.example.gcm.permission.C2D_MESSAGE" />
<application
    android:allowBackup="true"
    android:icon="@mipmap/ic_launcher"
    android:label="@string/app_name"
    android:supportsRtl="true"
    android:theme="@style/AppTheme" >
    <activity android:name=".MainActivity" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <service
        android:name=".PushNotificationService"
        android:exported="false">
        <intent-filter>
            <action android:name="com.google.android.c2dm.intent.RECEIVE" />
        </intent-filter>
    </service>

    <receiver
        android:name="com.google.android.gms.gcm.GcmReceiver"
        android:exported="true"
        android:permission="com.google.android.c2dm.permission.SEND">
        <intent-filter>
            <action android:name="com.google.android.c2dm.intent.RECEIVE" />
            <category android:name="package.gcmdemo" />
        </intent-filter>
    </receiver>
</application> 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-03-28T11:59:05.800

用这个

```
 function pnstest(){

                $data = array('post_id'=>'12345','title'=>'A Blog post', 'message' =>'test msg');

                $url = 'https://fcm.googleapis.com/fcm/send';

                $server_key = 'AIzaSyDVpDdS7EyNgMUpoZV6sI2p-cG';

                $target ='fO3JGJw4CXI:APA91bFKvHv8wzZ05w2JQSor6D8lFvEGE_jHZGDAKzFmKWc73LABnumtRosWuJx--I4SoyF1XQ4w01P77MKft33grAPhA8g-wuBPZTgmgttaC9U4S3uCHjdDn5c3YHAnBF3H';

                $fields = array();
                $fields['data'] = $data;
                if(is_array($target)){
                    $fields['registration_ids'] = $target;
                }else{
                    $fields['to'] = $target;
                }

                //header with content_type api key
                $headers = array(
                    'Content-Type:application/json',
                  'Authorization:key='.$server_key
                );

                $ch = curl_init();
                curl_setopt($ch, CURLOPT_URL, $url);
                curl_setopt($ch, CURLOPT_POST, true);
                curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
                curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
                curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);
                curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
                curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($fields));
                $result = curl_exec($ch);
                if ($result === FALSE) {
                    die('FCM Send Error: ' . curl_error($ch));
                }
                curl_close($ch);
                return $result;

} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-01-18T12:07:00.883

这是我从 CodeMonkeysRU 派生的一个库。

我分叉的原因是因为谷歌需要指数退避。我使用 redis 服务器对消息进行排队，并在设定的时间后重新发送。

我还更新了它以支持 iOS。

[https://github.com/stevetauber/php-gcm-queue](https://github.com/stevetauber/php-gcm-queue)

# c# - 尝试以编程方式创建和打开新的 Outlook 电子邮件

> ID：11242745
> 
> 赞同：15
> 
> 时间：2012-06-28T10:32:57.627
> 
> 标签：c#, winforms, outlook

我有一个 winforms 应用程序，我正在尝试创建一种方法来创建和打开一个新的 Outlook 电子邮件。到目前为止我有

```
private void CreateOutlookEmail()
    {
        try
        {                
            Outlook.MailItem mailItem = (Outlook.MailItem)
                this.CreateItem(Outlook.OlItemType.olMailItem);
            mailItem.Subject = "This is the subject";
            mailItem.To = "someone@example.com";
            mailItem.Body = "This is the message.";
            mailItem.Importance = Outlook.OlImportance.olImportanceLow;
            mailItem.Display(false);
        }
        catch (Exception eX)
        {
            throw new Exception("cDocument: Error occurred trying to Create an Outlook Email"
                                + Environment.NewLine + eX.Message);
        }
    } 
```

但是“CreateItem”引用带有错误消息下划线

“不包含 CreateItem 的定义”

我认为“CreateItem”是 MS Office 项目的标准方法，但不可否认，我确实在另一个网站上找到了上述代码并简单地复制了它。

请问我误会了什么？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-06-28T10:41:01.537

想想看。您正在调用当前对象的`CreateItem`方法。`this`你`CreateItem`在这个类中定义了方法吗？

而不是你的：

```
Outlook.MailItem mailItem = (Outlook.MailItem) this.CreateItem(Outlook.OlItemType.olMailItem); 
```

您需要以下线路：

```
Outlook.Application outlookApp = new Outlook.Application();
Outlook.MailItem mailItem = (Outlook.MailItem) outlookApp.CreateItem(Outlook.OlItemType.olMailItem); 
```

您创建一个 Outlook 应用程序的实例，您可以在该实例上调用该`CreateItem`方法。

## 编辑

还有两件事可以使这项工作正常进行。

1）将包的引用添加`Microsoft.Office.Interop.Outlook`到您的项目中

2) 确保您的班级中有适当的 using 语句

```
using Outlook = Microsoft.Office.Interop.Outlook; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-28T10:58:38.123

试试这个

```
string subject = "My subject";
string emailTag = string.Format("mailto:someone@test.com?subject={0}", subject);
System.Diagnostics.Process.Start(emailTag); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-07-04T11:56:31.433

根据我的经验，Office.Interop 可能会很麻烦，只需使用适当的参数启动 Outlook 可能代表一个更简单、更便携的选项：

```
System.Diagnostics.Process.Start("C:\\Program Files (x86)\\Microsoft Office\\Office12\\OUTLOOK.EXE", "/c ipm.note /m name@address.com")); 
```

Outlook 命令行开关为您提供更多选项以及众多信息来源（尝试[http://www.outlook-tips.net/how-to/using-outlook-command-lines](http://www.outlook-tips.net/how-to/using-outlook-command-lines)）

# .net - WCF 证书和 非 .net 客户端

> ID：11242746
> 
> 赞同：0
> 
> 时间：2012-06-28T10:32:58.470
> 
> 标签：.net, wcf, wcf-security

我正在开发 WCF 服务。我使用 WsHttpBinding 和 customUserNameValidator 通过用户名和密码进行访问。但是我遇到的问题是，一旦我使用用户名/密码，我就需要某种安全通道，这意味着我应该生成两个证书——一个用于服务，一个用于客户端。问题是 - 是否有可能这样做不需要客户证书，如果是的话 - 怎么做？以及如何为非.net 客户端定制 WCF 服务的安全性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T16:52:36.407

您可以在设置传输和消息安全性时将客户端凭据设置为无。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T11:49:42.670

使用 wsHttpBinding 绑定类型时不需要有两个证书。您只需使用 TransportWithMessageCredential 在服务器上设置一个证书，该证书用于点对点通道通信，其中用户凭据被加密并存储在消息中。

在以下链接中，您可以找到与带有用户名身份验证的 wsHttpBinding 相关的完整示例：http: [//msdn.microsoft.com/en-us/library/ff648840.aspx](http://msdn.microsoft.com/en-us/library/ff648840.aspx)。

# iphone - 以编程方式备份 完整的 iPhone 地址簿

> ID：11242748
> 
> 赞同：1
> 
> 时间：2012-06-28T10:33:04.257
> 
> 标签：iphone, objective-c, ios, xcode

我需要以编程方式备份​​所有联系人的所有记录（号码、姓名、图像……）。我阅读了有关 AddressBook.framework 的信息，但是有没有一种简单的方法可以备份所有联系人？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T08:39:47.720

1.一种方法是创建一个包含所有联系人的 vCard 字符串。像这样：

```
ABAddressBookRef addressBook = ABAddressBookCreate();
CFArrayRef peopleForBackup  = ABAddressBookCopyArrayOfAllPeople(addressBook);
CFDataRef vcards = (CFDataRef)ABPersonCreateVCardRepresentationWithPeople(peopleForBackup);
vcardString = [[NSString alloc] initWithData:(NSData *)vcards encoding:NSUTF8StringEncoding]; 
```

并将此字符串写入文件进行备份。

2.从通讯录中删除当前联系人：

```
ABAddressBookRef addressBook = ABAddressBookCreate();
CFArrayRef people = ABAddressBookCopyArrayOfAllPeople(addressBook);
int arrayCount = CFArrayGetCount(people);
ABRecordRef abrecord;

for (int i = 0; i < arrayCount; i++) {
    abrecord = CFArrayGetValueAtIndex(people, i);
    ABAddressBookRemoveRecord(addressBook,abrecord, NULL);
}
CFRelease(people); 
```

3.要从备份中恢复，您只需将 vcard 文件读入字符串并遍历 vcard 中的人员记录并将它们作为记录添加到地址簿，然后保存。

```
ABAddressBookRef addressBook = ABAddressBookCreate();
NSData *stringData = [NSData dataWithContentsOfFile:contactFilePath];
NSString *vcardFromFile = [[NSString alloc] initWithData:stringData encoding:NSUTF8StringEncoding];

CFDataRef vCardData = (CFDataRef)[vcardFromFile dataUsingEncoding:NSUTF8StringEncoding];

ABRecordRef defaultSource = ABAddressBookCopyDefaultSource(addressBook);
CFArrayRef vCardPeople = ABPersonCreatePeopleInSourceWithVCardRepresentation(defaultSource, vCardData);

for (CFIndex index = 0; index < CFArrayGetCount(vCardPeople); index++) {
    ABRecordRef person = CFArrayGetValueAtIndex(vCardPeople, index);
    ABAddressBookAddRecord(addressBook, person, NULL);
    CFRelease(person);
}

CFRelease(vCardPeople);
CFRelease(defaultSource);
bool success = ABAddressBookSave(addressBook, NULL); 
```

这种方法的一个问题是我不知道一种方法来维护联系人的链接（exchange、facebook ...）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T14:22:13.157

这取决于您要备份的联系人的哪些属性。如果要备份他们的名字和姓氏，请执行以下操作：

```
//CREATE ARRAYS STORING FIRST NAMES AND LAST NAMES
NSMutableArray *firstNames = [[NSMutableArray alloc] init];
NSMutableArray *lastNames = [[NSMutableArray alloc] init];

ABAddressBookRef addressBook = ABAddressBookCreate();
NSArray *arrayOfPeople = (__bridge_transfer NSArray *)ABAddressBookCopyArrayOfAllPeople(addressBook);
CFRelease(addressBook);

for(NSUInteger index = 0; index <= ([arrayOfPeople count]-1); index++){

    ABRecordRef currentPerson = (__bridge ABRecordRef)[arrayOfPeople objectAtIndex: index];
    [firstNames addObject: (__bridge_transfer NSString *)ABRecordCopyValue(currentPerson, kABPersonFirstNameProperty)];
    [lastNames addObject: (__bridge_transfer NSString *)ABRecordCopyValue(currentPerson, kABPersonLastNameProperty)];        
}

//BACKUP THE ARRAYS IN A PLIST 
NSArray *array=[NSArray arrayWithObjects: firstNames, lastNames, nil];
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSLibraryDirectory, NSUserDomainMask, YES);
NSString *location = [[paths objectAtIndex:0] stringByAppendingString:@"/somefilename.plist"];
[array writeToFile:location atomically:YES]; 
```

如果您对代码有任何疑问，请在评论中提问。希望这可以帮助！

# android - Android改变标签的背景

> ID：11242753
> 
> 赞同：2
> 
> 时间：2012-06-28T10:33:13.650
> 
> 标签：android, android-tabhost

有谁知道我可以如何编辑标签背景，以便在未选择它时我有一个红色渐变背景，当它被选择时是一个深红色渐变？也将文本颜色更改为白色？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T10:51:04.273

您可以使用此代码

```
TabHost.TabSpec spec;
TabHost tabHost = getTabHost();
spec = tabHost.newTabSpec("1").setIndicator("Tab Host 1", res.getDrawable(R.drawable.XXX)).setContent(intent_name);
tabHost.addTab(spec);
tabHost.setCurrentTab(2);
setTabColor(tabHost);
tabHost.setOnTabChangedListener(new OnTabChangeListener() {
    @Override
    public void onTabChanged(String tabId) {
          setTabColor(tabHost);
    }
});
}

public static void setTabColor(TabHost tabhost) {
    for (int i = 0; i < tabhost.getTabWidget().getChildCount(); i++) {
        tabhost.getTabWidget().getChildAt(i).setBackgroundColor(Color.parseColor("#000000")); // unselected
    }

    tabhost.getTabWidget().getChildAt(tabhost.getCurrentTab()).setBackgroundColor(Color.parseColor("#74df00")); // selected
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T10:41:12.003

在您的 drawables 文件夹中创建一个新文件，例如 background.xml。

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <!-- When selected, use red-->
    <item android:drawable="@drawable/gradient_red"
          android:state_selected="true"/>
    <!-- When not selected, use dark rebg-->
    <item android:drawable="@drawable/gradien_dark_red"/>
</selector> 
```

为您的背景使用新的可绘制对象。

# java-me - 按钮字段（使用图像作为按钮）焦点问题

> ID：11242758
> 
> 赞同：1
> 
> 时间：2012-06-28T10:33:41.900
> 
> 标签：java-me, lwuit, setfocus, lwuit-button

在单行中，我们显示文本字段以输入搜索文本以及搜索图像作为按钮字段。在该行下方，我们正在显示名称列表。

这里的问题是，图像按钮字段在键盘箭头键向下移动期间没有获得焦点。但是在向上移动期间，当我们单击向左箭头时，它会获得焦点。但是对于向下运动来说，向上箭头运动并没有获得焦点。

输入搜索文本的文本字段：

```
final TextField tfTeamSearch = new TextField();      
tfTeamSearch.setFocus(true); 
```

图像按钮字段：

```
btnSearchImage = new Button();
btnSearchImage.setIcon(imgSearchUnFocus);
btnSearchImage.getStyle().setBgTransparency(0);
btnSearchImage.getStyle().setBorder(null);
btnSearchImage.getStyle().setFont(font);
btnSearchImage.getSelectedStyle().setFont(font);
btnSearchImage.getPressedStyle().setFont(font);
btnSearchImage.getUnselectedStyle().setFont(font);
btnSearchImage.setFocusable(true); 
```

你能帮我如何使用箭头键设置向上和向下移动的焦点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T04:21:29.513

首先：如果您希望将焦点设置为，则应该使用`tfTeamSearch.requestFocus()`而不是。只改变样式。`tfTeamSearch.setFocus(true)``TextField``tfTeamSearch.setFocus(true)`

其次：您可以使用`Component`methods `setNextFocusDown`、`setNextFocusUp`或设置焦点下的下一个组件`setNextFocusLeft`。`setNextFocusRight`

# c# - 如何调用 AddPath()？

> ID：11242759
> 
> 赞同：0
> 
> 时间：2012-06-28T10:33:45.807
> 
> 标签：c#, multithreading, function, invoke

我有以下功能：

```
 public void AddPath(String full_path)
    {
        TreeView tree_view = TheTreeView;
        String[] split_path;
        TreeNodeCollection current_nodes;

        if (tree_view == null)
            return;
        if (String.IsNullOrEmpty(full_path))
            return;

        split_path = full_path.Split(tree_view.PathSeparator.ToCharArray());
        current_nodes = tree_view.Nodes;

        for (Int32 i = 0; i < split_path.Length; i++)
        {
            TreeNode[] found_nodes = current_nodes.Find(split_path[i], false);

            if (found_nodes.Length > 0)
            {
                current_nodes = found_nodes.First().Nodes;
            }
            else
            {
                TreeNode node;

                node = new TreeNode();
                node.Name = split_path[i]; // name is the same thing as key
                node.Text = split_path[i];

                current_nodes.Add(node);
                current_nodes = node.Nodes;
            }
        }
    } 
```

我需要从一个单独的线程调用这个函数。我该怎么做？我知道如何调用 TreeView.Nodes.Add() 但我该怎么做呢？0.o

-斯文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T10:41:15.857

如果您需要从与创建它的线程不同的线程调用 UI 中的某个对象（即您的情况），答案是您实际上不能。一个更好的答案是您可以通过调用 winform [Control.Invoke](http://msdn.microsoft.com/en-us/library/zyzhdc6b.aspx)和 WPF [Dispatcher.Invoke](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcher.invoke.aspx)。[只有在 winform 中，您才能使用此方法](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.invokerequired.aspx)调查是否确实需要调用调用。通常，您应该将异步部分与更新 UI 的部分分开，以避免混淆太多代码。

# protocol-buffers - 从生成的 Protocol Buffer 类继承

> ID：11242760
> 
> 赞同：5
> 
> 时间：2012-06-28T10:33:46.147
> 
> 标签：protocol-buffers

协议缓冲区文档警告说...

> 您永远不应该通过从它们继承来向生成的类添加行为。这将破坏内部机制并且无论如何都不是好的面向对象的实践。

来源：[协议缓冲区基础](https://developers.google.com/protocol-buffers/docs/javatutorial)

我的两部分问题是：

1.  这会破坏哪些内部机制？
2.  无论如何，这在什么方面不是一个好的 OO 实践？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T10:41:26.690

1.  “出了什么问题”将是非常具体的实现。如果您引用了*特定的实现*，则可能会回答，但从更一般的意义上说：这不是受支持的场景，并且如果您子类化，则不需要实现正常工作或根本不需要。这是一个未定义的行为，这意味着。此外，协议缓冲区不支持继承，因为并非所有目标平台都支持它。关键思想：

    *   可能有代码根据预期类型列表检查传入对象 - 如果你的不在那里，它可能会失败
    *   它不会处理您添加的任何字段等
    *   序列化程序的整个想法是稳健地返回您序列化的内容；如果您序列化 a `SomeDerivedClass`，则序列化程序无法将其返回给您
    *   像这样的库的全部意义在于隐藏血腥的实现细节；你不应该弄乱任何实现（多态性必须*设计用于*）
2.  作为面向对象的关注；这不是你的类型；它是一个为特定目的而设计的 DTO。常见的用法可能是从 DTO*映射*到您的域模型/从您的域模型映射，这可能更复杂，或者如果有用的话可能*封装*DTO（可能作为外观）。

# android - 我如何知道用户是在“升级”还是“安装”Android 应用程序？

> ID：11242764
> 
> 赞同：2
> 
> 时间：2012-06-28T10:33:59.577
> 
> 标签：android

我开发了一个 android 应用程序，当用户从市场升级应用程序时出现问题。全新安装没有问题，但是在将当前应用程序升级到新版本时，会产生一些问题。

那么是否有可能知道用户是第一次安装应用程序还是在升级应用程序？

请分享你的想法..

提前致谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T11:41:12.143

> 那么是否有可能知道用户是第一次安装应用程序还是在升级应用程序？

不是直接的。

但是，在您的应用程序第一次运行时，您可以将您的数据写入`versionCode`内部存储（例如，在 a 中`SharedPreferences`），然后在您的应用程序的后续运行中，将您的数据`versionCode`与保存的数据进行比较。

*   如果没有保存的值，说明您的应用刚刚安装，或者用户在设置中点击了“清除数据”

*   如果有保存的值，并且`versionCode`您的应用程序中的 比保存的值更新，则应用程序已更新

*   如果有一个保存的值，并且`versionCode`您的应用程序中的值与保存的值相同，则安装/升级方面没有发生任何事情

# android - Android NFC 应用架构

> ID：11242765
> 
> 赞同：0
> 
> 时间：2012-06-28T10:34:04.780
> 
> 标签：android, android-activity, nfc, android-lifecycle, android-applicationrecord

目前我正在开发一个类似于任务启动器和三星 tectiles 的应用程序，但我遇到了一个问题。

然后扫描特定标签，启用技术的最佳架构是什么。现在它就像这样工作 - 我写入标签 AAR 记录，该记录启动我的活动，执行一些操作并立即完成它。

问题是屏幕在开始和结束活动之间闪烁。也许您对如何改进有任何建议？

谢谢你

* * *

通过添加 android:theme="@android:style/Theme.NoDisplay" 解决

# algorithm - 通过添加最小边来制作二分图 SCC

> ID：11242767
> 
> 赞同：0
> 
> 时间：2012-06-28T10:34:12.313
> 
> 标签：algorithm

有一个二分图 B(E, V1, V2) 使得 e = (v1, v2) 对于 e ∈ E, v1 ∈ V1, v2 ∈ V2。B 中的边是有方向的。

我想制作一个图 G(E ∪ E', V2 ∪ V2)，使得图 G 是强连通分量，具有最小 sizeof(E')。（sizeof(A) 是集合 A 中的元素数） E' 不必是 V1 -> V2。

例如，如果 V1 = {1, 2, 3} 和 V2 = {a, b}，则有一个二分图 B(E, V1, V2)，其中 E = {(1, a), (2, a) , (2, b), (3, b)}。然后 E' = {(a, 3), (a, 1), (b, 2)} 使 G(E ∪ E', V2 ∪ V2) 中的所有顶点强连接。（每当我选择顶点对 v1 和v2，存在从 v1 到 v2 的路径）

有人可以给我一些想法吗？或者是否有一个众所周知的算法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T22:36:50.457

Eswaran 和 Tarjan 的一个定理说，具有 r 个源（即，没有传入边的顶点）和 s 个汇（即，没有传出边的顶点）的无环有向图可以通过添加 max(r, s) 边来实现强连接（参见例如[在这里](http://books.google.de/books?id=mqGeSQ6dJycC&lpg=PA969&ots=xPJLOYdrPe&pg=PA969#v=onepage&q&f=false)）。因此，您需要添加 max(sizeof(A), sizeof(B)) 边。这本书还解释了如何找到解决方案（一个简单的顶点匹配系统）。

# firefox-addon - 如何从 JavaScript XPCOM 组件创建隐藏的 iframe/浏览器？

> ID：11242771
> 
> 赞同：2
> 
> 时间：2012-06-28T10:34:22.320
> 
> 标签：firefox-addon, xul, xpcom

我需要一个隐藏的 iframe 用于所有打开的 Firefox 窗口。

现在我在 XUL 覆盖中创建 iframe，所以它是为每个浏览器窗口创建的。

我认为我应该使用 XPCOM 组件为所有浏览器窗口提供单个 iframe 实例，但我找不到如何从中创建 XUL 元素的方法。

是否可以？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T11:38:00.490

[您可以在隐藏窗口](https://developer.mozilla.org/en/XPCOM_Interface_Reference/nsIAppShellService#Attributes)内创建一个框架：

```
var hiddenWindow = Components.classes["@mozilla.org/appshell/appShellService;1"]
                             .getService(Components.interfaces.nsIAppShellService)
                             .hiddenDOMWindow;
var frame = hiddenWindow.document.getElementById("myExtensionFrame");
if (!frame)
{
  var XUL_NS = "http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul";
  frame = hiddenWindow.document.createElementNS(XUL_NS, "iframe");
  frame.setAttribute("id", "myExtensionFrame");
  frame.setAttribute("src", "...");
  hiddenWindow.document.documentElement.appendChild(frame);
} 
```

但是，如果您只需要一个运行全局代码的地方，那么还有更好的方法——比如[JavaScript 代码模块](https://developer.mozilla.org/en/JavaScript_code_modules/Using)。

# c# - 使用 SQL Server Compact 与专用 SQL Server 数据库的缺点

> ID：11242772
> 
> 赞同：6
> 
> 时间：2012-06-28T10:34:23.700
> 
> 标签：c#, .net-4.0, sql-server-ce, sql-server-express

我想知道使用 SQL Server Compact 数据库 ( `.sdf`) 和完整的数据库（例如 SQL Server Express）之间的主要区别是什么？

是否存在任何重大的性能问题，如果有，紧凑型数据库在开始注意到这一点之前可以达到多大？

在开始项目时，我发现使用紧凑型数据库是一种简单、直接且干净的解决方案，我应该何时转换并转移到专用数据库？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-28T10:39:58.590

咱们试试吧：

*   最大 2 GB 文件大小
*   没有存储过程，触发器等。
*   没有进程，但已加载到您的 AppDomain
*   据我所知，没有基于成本的优化器或查询计划
*   缺乏多个用户同时访问

这里最大的问题是，CE 只是您系统上的一个文件，您可以通过使用 dll 的简单 InApp 调用来访问。就是这样，在许多情况下这已经足够了。很多人会说，你可以稍后切换到 SQLS，但我不这么认为。这是一个完全不同的世界！CE在我眼里是单品。

请记住，当您不想发布您的应用程序时，您需要部署 CE-DLL！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T14:54:42.440

在此处查看我的比较表：http: [//erikej.blogspot.dk/2011/01/comparison-of-sql-server-compact-4-and.html](http://erikej.blogspot.dk/2011/01/comparison-of-sql-server-compact-4-and.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-28T10:38:04.137

SQL Compact 不支持存储过程。您直接在代码中编写所有查询。这足以让我选择 SQL Express。现在，我们还可以选择[LocalDB](https://stackoverflow.com/questions/9655362/localdb-deployment-on-client-pc)来简化部署场景。

# objective-c - 没有 @property 和 @synthesize 的 ARC 和实例变量

> ID：11242778
> 
> 赞同：1
> 
> 时间：2012-06-28T10:34:43.767
> 
> 标签：objective-c, automatic-ref-counting

我想知道当我在这种情况下创建没有@property 的变量时，ARC 是如何知道如何工作的：

```
@interface MyClass: NSObject
{
    NSString *name;
}
-(NSString*)name;
-(void)setName:(NSString*)the_name; 
```

我可以在这段代码中使用 __strong 关键字吗？：

```
@interface MyClass : NSObject
{
    NSString __strong *name;
} 
```

或者我必须以这种方式编写访问器方法？：

```
-(void)setName:(NSString*)the_name{
   name = __strong the_name;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T10:36:28.123

不，你不需要做任何特别的事情：没有 ARC 关键字时，`__strong`关键字是*隐含的。*

**编辑**您也不需要`__strong`在 setter 中使用：ARC 知道要保留`the_name`，因为`name`已经是`__strong`参考。

# node.js - Heroku 项目与 node express 和 mongoLAB

> ID：11242784
> 
> 赞同：0
> 
> 时间：2012-06-28T10:35:19.740
> 
> 标签：node.js, rest, heroku, express, mlab

您如何从 node express 连接和创建其余 api 以在 heroku 上与 mongolab 一起使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T15:28:22.990

Probably the best way to connect to MongoLab from a Node.js app running on Heroku is to use the Node.js MongoDB driver:

[http://www.mongodb.org/display/DOCS/node.JS#node.JS-Node.jsDriver](http://www.mongodb.org/display/DOCS/node.JS#node.JS-Node.jsDriver)

# sql-server-2008 - SQL where in using 参数

> ID：11242785
> 
> 赞同：1
> 
> 时间：2012-06-28T10:35:27.853
> 
> 标签：sql-server-2008, asp.net-4.0

我正在尝试使用 sql 中的参数来获得“在哪里”工作。

```
SELECT * FROM tablename WHERE(name IN (@names)) 
```

所以我在 sqlmanager 中执行 SQL，并在@name 值中输入'Name1'，'Name2'，当我被要求时。这样，查询返回 0 行。但是，如果我将 SQL 更改为：

```
SELECT * FROM tablename WHERE(name IN ('Name1','Name2')) 
```

有用。

让它发挥作用的诀窍是什么？

这篇文章为我解决了这个问题：[链接到帖子](https://stackoverflow.com/a/337752/1425580)感谢所有回复:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T10:47:50.777

请试试这个..

```
Declare @names varchar(150)
Set @names = '''Name1'',''Name2'''
Declare @str varchar(max) 
set @str = 'SELECT * FROM tablename WHERE(name IN ('+@names+'))'
Execute(@str) 
```

# css - 如何使用 image 而不是 box-shadow 来达到类似的效果？

> ID：11242787
> 
> 赞同：2
> 
> 时间：2012-06-28T10:35:36.680
> 
> 标签：css

我想实现如下图所示的盒子阴影效果：

[图片在这里](http://i.stack.imgur.com/BpqGM.png)

**但是我不想使用 css3`box-shadow`属性。**（这是因为我正在构建一个 phonegap android 应用程序，它在使用时有滞后问题`box-shadow`。）

任何人都可以指导我如何利用图像或其他一些技术来设计 div 样式，如上图所示。代码会很有帮助，因为我不是 CSS 专家。

**有关信息：**

呈现上述 div 的 css3 代码如下：

```
.drop-shadow {
    position: relative;
    float: left;
    width: 40%;
    padding: 1em;
    margin: 2em 10px 4em;
    background: white;
    -webkit-box-shadow: 0 1px 4px rgba(0, 0, 0, 0.3), 0 0 40px rgba(0, 0, 0, 0.1) inset;
    -moz-box-shadow: 0 1px 4px rgba(0, 0, 0, 0.3), 0 0 40px rgba(0, 0, 0, 0.1) inset;
    box-shadow: 0 1px 4px rgba(0, 0, 0, 0.3), 0 0 40px rgba(0, 0, 0, 0.1) inset;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T12:58:11.173

使用其中一种较旧的技术来实现此效果：

*   [偏移阴影](http://www.cssplay.co.uk/menu/shadow2.html)
*   [包裹阴影](http://www.cssplay.co.uk/menu/shadow3.html)
*   [图像阴影](http://www.pmob.co.uk/temp/image-shadow-background.htm)

# matlab - Star 16 QAM 调制器和解调器 Matlab

> ID：11242788
> 
> 赞同：1
> 
> 时间：2012-06-28T10:35:45.197
> 
> 标签：matlab, encoding, communication, signal-processing

我需要star 16 QAM调制器和解调器设计matlab代码

请建议我如何制作代码。下面给出的示例星座图。我想用不同的环半径为这个星座制作代码。

[星座点样本](https://i.stack.imgur.com/8tmNW.gif)![在此处输入图像描述](../Images/26c7d6a8a42eb4ea77100a076514bdc8.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-01T16:24:10.197

[这](http://pastebin.com/MDcVLZhh)是一个示例 Matlab 脚本，它使用灰度映射进行 Star-16-QAM 映射，对 AWGN 通道进行建模并进行决策和解映射。还计算误码率 (BER)。我将很快解释它是如何工作的。

首先，我们创建一个随机位序列，其中“0”和“1”以相等的概率出现。还定义了星座图的内圆和外圆的半径。

```
% Random bit sequence
numberOfBits = 1e5;
x = rand(1, numberOfBits);
x( x < 0.5 ) = 0;
x( x >= 0.5 ) = 1;

% Radius of inner and outer circle
r1 = 1;
r2 = 2; 
```

在下一步中，我们定义将整数索引号映射到复数符号的映射表。这是以这样一种方式完成的，即两个相邻符号仅在一位上有所不同。这称为灰色映射。

```
% Define mapping table applying Gray mapping
mappingTable(1) = r1 * exp(1i* 0);
mappingTable(2) = r1 * exp(1i* pi/4);
mappingTable(3) = r1 * exp(1i* 3*pi/4);
mappingTable(4) = r1 * exp(1i* pi/2);
mappingTable(5) = r1 * exp(1i* 7*pi/4);
mappingTable(6) = r1 * exp(1i* 3*pi/2);
mappingTable(7) = r1 * exp(1i* pi);
mappingTable(8) = r1 * exp(1i* 5*pi/4);
mappingTable(9:16) = mappingTable(1:8) ./ r1 .* r2; 
```

现在对于每个 4 位块，我们计算符号索引并在映射表中查找相应的复杂符号。

```
if mod(numberOfBits, 4) ~= 0
    error('numberOfBits must be a multiple of 4.');
end
mappedSymbols = zeros(1, numberOfBits / 4);

% Map bits to symbols
for i = 1:4:length(x)

    symbolBits = x(i:i+3);

    symbolIndex = 2^3 * symbolBits(1) + 2^2 * symbolBits(2) + 2^1 * symbolBits(3) + 2^0 * symbolBits(4);

    % Mapping
    mappedSymbols((i - 1)/4 + 1) = mappingTable( symbolIndex + 1);
end 
```

在实际的通信系统中，复数符号的实部和虚部现在将被转换为模拟信号（使用脉冲整形器）并被调制到射频载波上。在这里，我们假设 D/A 和 A/D 转换以及调制和解调是理想的，因此我们不需要对其进行建模。此外，假设信道是理想的，即在频域中是平坦的。但是，我们将通过添加高斯白噪声来考虑噪声。请注意，噪声功率均匀分布在信号的实部和虚部上。

```
% Add white Gaussian noise
snr = 20; % signal-to-noise ratio in dB
meanSignalPower = (r1^2 + r2^2)/2;
snr_lin = 10^(snr/10); % linear scale
meanNoisePower = meanSignalPower ./ snr_lin;
receivedSignal = mappedSymbols + randn(1, length(mappedSymbols)) * sqrt(meanNoisePower/2) +...
    1i * randn(1, length(mappedSymbols)) * sqrt(meanNoisePower/2); 
```

最后，对于每个接收到的符号，我们确定距离最小的星座点，并将符号索引转换回位序列。

```
% Decision and demapping
receivedBits = zeros(1, numberOfBits / 4);
for i = 1:length(receivedSignal)
  [mindiff minIndex] = min(receivedSignal(i) - mappingTable);
  symbolIndex = minIndex - 1;
  bitString = dec2bin(symbolIndex, 4);
  receivedBits((i-1)*4 + 1) = str2double(bitString(1));
  receivedBits((i-1)*4 + 2) = str2double(bitString(2));
  receivedBits((i-1)*4 + 3) = str2double(bitString(3));
  receivedBits((i-1)*4 + 4) = str2double(bitString(4));
end 
```

当然，我们对位错误的数量感兴趣：

```
numberOfBitErrors = nnz( x - receivedBits );
ber = numberOfBitErrors / numberOfBits; % bit error rate
disp(['SNR: ' num2str(snr) ' dB']);
disp(['Bit error rate (BER): ' num2str(ber)]); 
```

绘制发射和接收信号会产生典型的星座图：

```
figure;
plot( real(receivedSignal), imag(receivedSignal), '.'); hold on;
absLim = max( max(real(receivedSignal)), max(imag(receivedSignal)));
xyLimits = [-absLim*1.1 absLim*1.1];
xlim( xyLimits );
ylim( xyLimits );
plot( real(mappedSymbols), imag(mappedSymbols), '.r'); hold off;
xlim( xyLimits );
ylim( xyLimits );
xlabel('real part');
ylabel('imaginary part');
legend('received', 'transmitted'); 
```

![Star-16-QAM通过AWGN信道传输后的星座图](../Images/16812df66fb8a4da05c01561fcaaa721.png)

我上传了一个完整的源代码：http: [//pastebin.com/MDcVLZhh](http://pastebin.com/MDcVLZhh)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T11:55:57.073

最简单的是使用映射表。首先，生成具有所需星座点的向量。IE，

```
r1 = 1;  % first radius
r2 = 2;  % second radius
c = [ r1*exp(j*2*pi/8*[0..7])  r2*exp(j*2*pi/8*[0..7]) ]; 
```

c 中星座点的顺序决定了从比特到符号的映射。接下来，要调制选择一个介于 1 .. length(c) 之间的数字*i*，并将 c(i) 作为星座点。

要将接收到的数据解调回符号索引，只需选择最近的星座点。即，如果接收到的噪声符号是'y'：

```
[dummy, estimated_sym] = min(y - c); 
```

警告：代码未经测试，可能需要稍作调整。

# iphone - xcode 索引文件损坏

> ID：11242792
> 
> 赞同：0
> 
> 时间：2012-06-28T10:35:55.167
> 
> 标签：iphone, objective-c, xcode

嗨，我在开发人员离开公司后继承了一个 xcode 项目。我需要向 iphone 应用程序添加新图像，但是当我添加图像时出现错误：

```
"error: bad index file sha1 signature fatal: index file corrupt" 
```

我一直在寻找解决方案，并找到了一些关于删除“构建”文件的文章，这将解决问题。但我在目录或 xcodes 项目视图中找不到这个文件。有人能指出我正确的方向吗？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T10:41:59.910

如果要清理构建文件夹，请按键盘`option + shift + command + K`

或前往`Product(while pressing option key)->clean build folder`

# java - java在Java中实现动态插件

> ID：11242793
> 
> 赞同：1
> 
> 时间：2012-06-28T10:35:57.533
> 
> 标签：java, dynamic, extensible, serviceloader

我根据本教程开发了一个加载插件的应用程序：http://solitarygeek.com/java/a-simple-pluggable-java-application [，](http://solitarygeek.com/java/a-simple-pluggable-java-application)但我遇到了一个问题。在我的主应用程序中，我有一个带有静态方法的类，我如何从我的插件内部访问该类？当我尝试从加载的插件访问该类时，它给了我一个找不到类的错误，尽管插件和应用程序正在运行。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T11:00:18.727

在插件架构中，您不应该直接访问插件实现类。您可以使用的*接口*是您可以访问实现类**实例的接口。**这显然排除了任何静态方法。将这些方法重构为实例方法并通过接口公开它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T11:07:38.647

听起来像一个类加载器问题。加载插件的类加载器看不到您的主类。没有代码示例很难说。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T12:05:00.380

我设法通过使用应用程序类加载器作为父类加载器创建类加载器来解决我的问题，如下所示：
URLClassLoader MyLoader = new URLClassLoader(new URL[]{},MyClass.class.getClassLoader())，现在，所有加载的类我的应用程序对使用 MyLoader 加载的插件可见

# memory-leaks - 如何从 Valgrind 获取完整的调用堆栈？

> ID：11242795
> 
> 赞同：24
> 
> 时间：2012-06-28T10:36:01.480
> 
> 标签：memory-leaks, valgrind, callstack

我使用以下参数运行[Valgrind ：](http://valgrind.org/)

```
--leak-check=full --show-reachable=yes --leak-resolution=high --num-callers=100 --trace-children=yes 
```

在内存泄漏日志中，我看到一些错误消息，其中包含直到 main 的完整堆栈跟踪，但有些消息如下所示：

```
==3956== 1,999,140 (68,796 direct, 1,930,344 indirect) bytes in 5,733 blocks are definitely lost in loss record 8,842 of 8,845
==3956==    at 0x4022AB8: malloc (vg_replace_malloc.c:207)
==3956== 
```

如何获取这些错误的完整堆栈跟踪？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2014-08-14T05:03:14.700

获取完整的堆栈跟踪将需要所有可能涉及泄漏的库/可执行文件的调试符号（并且在 设置的限制内`--num-callers`）。

如果您自己构建它们中的任何一个，则需要`-g`在 gcc 中指定标志（或任何其他编译器中的相关标志）。

请注意，[valgrind](/questions/tagged/valgrind "显示标记为“valgrind”的问题")并非万无一失，有时可能会遗漏泄漏或无法提供完整的堆栈跟踪（尤其是在您使用线程或复杂`class`实现的情况下）。

对于没有调试信息的库，堆栈跟踪将在该库处停止。

作为一个免费工具，[valgrind](/questions/tagged/valgrind "显示标记为“valgrind”的问题")非常擅长它的功能，但是像 IBM 这样的地方可以以高价出售内存配置文件是有原因的。

# erp - Opentaps ERP 可安装文件

> ID：11242796
> 
> 赞同：0
> 
> 时间：2012-06-28T10:36:04.567
> 
> 标签：erp, opentaps

我做了一个 Opentaps ERP 项目。现在我想在客户端安装它。如何在客户端安装它？

如何制作 opentaps 的可执行文件（例如用于 android 和 iphone）？

还是我们必须在客户端安装整个 opentaps 文件夹（1.25 GB）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T09:55:21.183

您通常安装整个文件夹。这么大的原因是您可能安装了包含大量数据的 derby 数据库。

您应该将您的 opentaps 版本存储在存储库中，然后将该存储库克隆到生产机器中。这样你就可以随时同步并添加补丁

# asp.net - 从项目外的普通 HTML 文件调用 MVC4 Web API

> ID：11242797
> 
> 赞同：1
> 
> 时间：2012-06-28T10:36:07.203
> 
> 标签：asp.net, asp.net-mvc

我正在尝试学习 MVC4 Web API。我正在从 VS2010 本身运行我的项目。

我的项目网址是 localhost:31735

当直接从浏览器本身调用 WebAPI 时。它的工作方式类似于 localhost:31735/api/products/

我现在想从项目外部的普通 HTML 文件中调用 Webapi。

我试着这样做

```
 $(document).ready(function () {
           // Send an AJAX request 
            $.getJSON("http://localhost:31735/api/products/",
            function (data) {
            // On success, 'data' contains a list of products. 
               $.each(data, function (key, val) {

                // Format the text to display. 
                var str = val.Name + ': $' + val.Price;

                // Add a list item for the product. 
                $('<li/>', { html: str }).appendTo($('#products'));
            });
        });
    }); 
```

但这不起作用。你能帮我吗。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T10:38:47.870

> 我现在想从项目外部的普通 HTML 文件中调用 Webapi。

您不能这样做，因为[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)限制会阻止您发送跨域 AJAX 请求。有[多种可能的解决方法](http://usejquery.com/posts/the-jquery-cross-domain-ajax-guide)，其中之一是使用[JSONP](http://en.wikipedia.org/wiki/JSONP)而不是 JSON。

这是[一篇文章](https://stackoverflow.com/a/9422178/29407)，描述了如何使用自定义媒体格式化程序来实现这一目标。

# php - 找到匹配的数组并使用 php 返回密钥

> ID：11242800
> 
> 赞同：0
> 
> 时间：2012-06-28T10:36:23.717
> 
> 标签：php, arrays, matching

我有一个这样的数组：

```
Array
(
    [2] => Array
        (
            [0] => name2 surname
            [1] => email2@email.com
            [2] => 834502034
            [3] => image url3
        )

    [3] => Array
        (
            [0] => name3 surname
            [1] => email2@email.com
            [2] => 7648484886
            [3] => image url3
        )

    [0] => Array
        (
            [0] => name0 surname
            [1] => email0@email.com
            [2] => 56783658658
            [3] => image url0
        )

    [1] => Array
        (
            [0] => name1 surname
            [1] => email1@email.com
            [2] => 7648484886
            [3] => image url1
        )

) 
```

您会注意到一些值是相同的，并且可能只有一个值差异。

我需要找出另一个单个数组是否与任何子数组匹配并返回密钥。

我要匹配的数组不是多维的：

```
Array
            (
                [0] => name1 surname
                [1] => email1@email.com
                [2] => 7648484886
                [3] => image url1
            ) 
```

如何确定我的单个数组是否在主数组中并返回 KEY？我已经尝试使用带有回调的array_diff_uassoc，它返回不匹配的键=> 数组，我想我可以匹配两个结果的计数以查看是否存在差异，但我仍然需要匹配数组的键。我要比较的数组将始终具有确切的值 [0]、[1]、[2] 和 [3]。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T10:40:37.480

[`array_search`](http://php.net/manual/en/function.array-search.php)将这样做，利用[在 PHP 中比较数组是否相等的工作原理](http://php.net/manual/en/language.operators.comparison.php#example-118)（这意味着每个子数组中的项目顺序*和*您提供作为搜索目标的数组中的项目顺序必须相同！）：

```
$master = array(
    array('surname', 'foo'),
    array('surname', 'bar'),
);

$key = array_search(array('surname', 'baz'), $master));

if ($key === false) {
    echo "not found";
}
else {
    echo "found, key is $key";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T10:40:55.120

由于它是完全匹配的，因此您可以为此使用[array_search](http://php.net/array_search)：

```
$key = array_search($array_to_find, $array_to_search_in); 
```

# html - 如何将宽度设置为 auto + 5px？

> ID：11242802
> 
> 赞同：1
> 
> 时间：2012-06-28T10:36:39.137
> 
> 标签：html, css

我想知道，这样的事情，可能吗？：

```
#test{
    background-color: red;
    width:auto + 5px;
} 
```

我不想有一个`<div>`, 完全符合其中文本的宽度。我希望它是“'文本宽度'+ 5px”。

可以用css吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T10:38:30.050

我建议使用填充：

```
#test {
    background-color: red;
    width:auto;
    padding:0 5px;
} 
```

这将在右侧和左侧创建 5px 的填充。顶部和底部的填充为 0。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T10:39:09.490

div 的自动宽度为 100%。如果您只需要其内容的宽度，请使用`float: left/right`

```
#test {
    float: left/right;
    background-color: red;
    padding-left: 5px;
    /* OR */
    padding-right: 5px;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T10:39:05.130

使用填充。

```
 #test{
        background-color: red;
        width:auto;
        padding: 0px 5px;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T10:41:08.117

如果你想达到这样的效果，`width:auto + 5px`那么你将不得不使用样式表语言`sass`等`compass`。

如果您想在文本周围有额外的空格，那么您可以使用如下填充 -

```
#test {
   padding:5px;  //for all top, right, bottom, left
    OR
   padding:5px 3px; //5px for top, bottom and 3px for left right
    OR
   padding:5px 3px  4px;  //5px for top, 3px for left and right and 4px for bottom
    OR
   padding: 5px 4px 3px 2px;  //goes this way, top-right-bottom-left
} 
```

# sql - 根据键值使用另一个表中的数据更新一个表中的字段

> ID：11242803
> 
> 赞同：0
> 
> 时间：2012-06-28T10:36:44.317
> 
> 标签：sql, tsql, sql-server-2008-r2, subquery

我需要通过匹配两个表中的 ID 字段，将文本数据与辅助表 tblSecond 中的 Notes 字段连接起来，从而更新表 tblMain 中的 Notes 字段。

我正在使用以下 SQL：

```
UPDATE tblMain
SET tblMain.Notes = (tblMain.Notes + (SELECT DISTINCT Notes FROM tblSecond
WHERE tblSecond.ID = tblMain.ID)) 
```

但我收到以下错误

> 子查询返回超过 1 个值。

大概是因为 SELECT 语句正在返回整个结果集。

我将如何成功执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T10:51:43.273

如果子查询返回超过 1 个值，则表示 tblSecond 包含超过 1 个对应 ID 的条目。所以我建议先检查你的数据。

更新本身也可以使用`from`子句编写，类似这样（未经测试）

```
update tblMain
    set Notes = a.Notes + b.Notes
from
    tblMain a
    inner join tblSecond b on a.Id = b.Id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T10:55:08.640

如果子查询返回超过 1 个值，它将处理。

```
UPDATE tblmain 
SET    tblmain.notes = ( tblmain.notes 
                         + (SELECT DISTINCT notes + ' ' 
                            FROM   tblsecond 
                            WHERE  tblsecond.id = tblmain.id 
                            FOR xml path ('')) ) 
```

# java - 如何查看 Java Web 应用程序，就像它是服务器上的最新版本一样？

> ID：11242804
> 
> 赞同：0
> 
> 时间：2012-06-28T10:36:44.350
> 
> 标签：java, iis, web-applications

我一直在浏览教程，但由于我不知道大多数术语，所以所有教程都是胡言乱语。我是java新手，我做的大部分事情都是反复试验。我们有这个 java web 应用程序，它有大约 4 个解决方案，我们使用 SVN 签入了我们的代码。我可以在本地运行应用程序，但不能作为整个应用程序运行。如果我们将它构建在一个最后显示 ....\hudson 的服务器中，我们只能将其视为一个整体。这是我唯一一次可以看到我签入的代码是否与用 grails 和 gwt 编写的其他模块一起工作得很好。我想知道我是否可以通过本地做到这一点？就像我在 IIS 中为 asp .net web 应用程序所做的那样。我的问题是通过 IDE 运行时我看不到所有帧。我总是犯我运行 gwt 项目的错误，它工作正常，然后我运行 grails 工作正常。但是当我在构建中检查它时，有些东西坏了。当我使用 cookie 进行调试时，同样的问题。如果 cookie 由 grail 模块传递给 gwt 模块，如果我不能同时运行这两个模块，我该怎么做？:(。hudson 中的构建是供所有人查看的，我不想在 100% 工作之前检查我编写的代码，并且项目中的某个地方没有任何问题。

对不起这里的菜鸟。我什至不知道我需要安装什么，或者这是否可能？以下是我拥有的东西：

> Tomcat Apache 6.0 JDK, JRE7

我相信我需要在 C:\Program Files\Apache Software Foundation\Tomcat 6.0 中有 webapps 文件夹。我在任何地方都看不到一个非常容易遵循的教程。谁能帮帮我？至少指出我从哪里开始？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T11:05:38.623

Hudson 是一个持续集成服务器。它的目标是检查你的应用程序的源代码，编译它，运行单元测试和其他各种代码质量检查，构建应用程序，并潜在地部署它。

构建/部署通常使用使用构建文件的构建工具（Maven、Ant、Gradle 等）完成。您应该能够使用相同的构建文件运行相同的构建，该构建文件必须与源代码位于 SVN 存储库中，并将应用程序部署在您自己的本地服务器上。

现在我想知道的是：整个构建过程和基础设施并不是神奇地构建的。您公司中一定有人创建并记录了它，或者至少知道它是如何工作的。你为什么不问问这个人你应该怎么工作？

# c# - 有哪些 C# 和 ASP.NET 中的开源 Web 门户应用程序？

> ID：11242815
> 
> 赞同：1
> 
> 时间：2012-06-28T10:37:30.090
> 
> 标签：c#, asp.net

有哪些适合 IT 组织内部使用的开源 Web 门户应用程序，最好用 C# 和 ASP.NET 编写？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T10:51:55.783

看看[DotNet Nuke 社区版](http://dotnetnuke.codeplex.com/)。它在 Codeplex 上是开源的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T10:40:43.243

看看[Umbraco](http://umbraco.org/)，它是一个开源的 ASP.NET/C# CMS

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T11:03:58.653

[Orchard](http://www.orchardproject.net/)是一个开源的 ASP.NET/C# CMS。

# ios - 在收到来自服务器请求的响应的特定时间间隔后更改选项卡视图

> ID：11242816
> 
> 赞同：0
> 
> 时间：2012-06-28T10:37:32.623
> 
> 标签：ios, uitabbarcontroller, nsurlconnection, viewwillappear

在具有 的应用程序中`UITabBarController`，我想实现以下场景：

当用户在**“X”选项卡**上时，他/她会做一些事情然后移动到另一个选项卡。然后他/她再次回到“X”选项卡（*比如 5 分钟后-> 这很重要，因为我将来可能会将 5 分钟更改为 10 分钟*），然后我想显示一些消息，例如您的“会话已过期”。

每当用户返回“X”选项卡时，它需要发出服务器请求以获取响应代码。根据这一点，我想显示弹出窗口“会话已过期”。

我想到了以下实现方式：

在`viewWillAppear:`所有视图的**“X”选项卡** `viewController`中加载的每种方法中，`UITabBarController`我都会发出服务器请求并检查响应并相应地执行操作。

***但这将涉及我想避免的许多服务器请求。***

我无法得出解决方案。我怎样才能达到我的要求。？

非常感谢提前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T10:41:12.010

您只需在选项卡栏委托方法中执行一次 -

```
- (void)tabBarController:(UITabBarController *)tabBarController 
    didSelectViewController:(UIViewController *)viewController 
```

在这个基于标签索引的方法中，你可以拥有你的代码，你不需要在几个视图控制器中编写代码。

# android - 将不同的按钮拖放到视图中（Android）？

> ID：11242819
> 
> 赞同：1
> 
> 时间：2012-06-28T10:37:41.083
> 
> 标签：android, image, views, buttonclick

在创建剪贴画调色板时需要将不同的按钮拖放到视图中。我添加了我想要的图像作为按钮的背景。我尝试了代码，它运行良好，但问题是每次单击按钮都会丢弃相同的图像。这是我的代码

```
 layout = (FrameLayout) findViewById(R.id.LinearLayout01);
    // layout.setOnTouchListener(this);

    btn = (Button) findViewById(R.id.btn);
    btn.setDrawingCacheEnabled(true);
    btn.setOnTouchListener(this);

    btn2 = (Button) findViewById(R.id.btn2);
    btn2.setDrawingCacheEnabled(true);
    btn2.setOnTouchListener(this);

    btn3 = (Button) findViewById(R.id.btn3);
    btn3.setDrawingCacheEnabled(true);
    btn3.setOnTouchListener(this);

    btn4 = (Button) findViewById(R.id.btn4);
    btn4.setDrawingCacheEnabled(true);
    btn4.setOnTouchListener(this);

    params = new LayoutParams(LayoutParams.WRAP_CONTENT,
            LayoutParams.WRAP_CONTENT);

    }

@Override
public boolean onTouch(View view, MotionEvent me) {
             if (me.getAction() == MotionEvent.ACTION_DOWN) {
        status = START_DRAGGING;
        image = new ImageView(this);
        image.setImageBitmap(btn.getDrawingCache());
        layout.addView(image, params);

    }
    if (me.getAction() == MotionEvent.ACTION_UP) {
        status = STOP_DRAGGING;
        Log.i("Drag", "Stopped Dragging");
    } else if (me.getAction() == MotionEvent.ACTION_MOVE) {
        if (status == START_DRAGGING) {
            System.out.println("Dragging");
            image.setPadding((int) me.getRawX(), (int) me.getRawY(), 0, 0);
            image.invalidate();
        }
    }
            return false;
} 
```

# java - 从 Java 运行 C++ 可执行文件时没有错误或输出

> ID：11242820
> 
> 赞同：1
> 
> 时间：2012-06-28T10:37:42.360
> 
> 标签：java, c++, executable

我正在尝试从我的 Java Web 应用程序运行 c++ 可执行文件。当我转到相关页面时，它会执行命令并运行可执行文件，但不会产生任何输出。

这是我的代码：

```
URL createWav = QRcodeController.class.getClassLoader().getResource("createWav");
log.info("The path of the c++ executable obtained: "+ createWav.getPath());
Process p1 = Runtime.getRuntime().exec("chmod 777 " + createWav.getPath());
p1.waitFor();
int exitVal=1;
try {
        Process p2 = Runtime.getRuntime().exec(createWav.getPath(), args);
        exitVal = p2.waitFor();
}
catch (Exception e)
{
    log.error(e.getStackTrace());
}
if(exitVal == 1)
    throw new Exception("Error in c++ program"); 
```

它不会抛出任何错误，因此 c++ 程序运行良好，但它不会生成它应该生成的文件。当我在同一台机器上从命令行运行相同的命令时，它可以完美地生成所需的文件。我不确定我做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T10:40:58.890

[从进程](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Process.html)中获取输出流和错误流，看看会发生什么。

现在你在盲目地工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T10:47:22.023

C++ 程序将其输出写入管道，而不是 Java 程序的标准输出。使用[Process.getOutputStream()](http://docs.oracle.com/javase/7/docs/api/java/lang/Process.html#getOutputStream%28%29)访问该流，或者在 Java 1.7 中使用一个`ProcessBuilder`可以使用[redirectOutput](http://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html#redirectOutput%28java.lang.ProcessBuilder.Redirect%29)的地方，如下所示：

```
pb.redirectOutput(ProcessBuilder.Redirect.INHERIT) 
```

如果您的 C++ 程序*可能会将*内容写入其标准错误流，您可能应该以相同的方式处理它。

另请注意，如果与管道关联的缓冲区已满，则将这些流中的任何一个连接到管道并且*不从该管道读取可能会导致您的应用程序阻塞输出。*要简单地忽略输出，您必须明确地将其重定向到`/dev/null`. 这不是你刚才的目标，但它可能处于不同的情况。

# css - a:hover box-shadows 使用 PIE

> ID：11242822
> 
> 赞同：0
> 
> 时间：2012-06-28T10:37:47.970
> 
> 标签：css, hover, css3pie

我正在寻求使用 CSS3 Pie 的帮助，

我已将它应用于我网站的某些方面，以便他们能够在早期版本的 IE 中使用 box-shadows 并且它似乎工作正常，但是当我尝试将它应用于 a:hover 时它根本不会拿起并且没有应用样式。

如果有人不确定 CSS3 PIE 是什么，请查看：[http ://css3pie.com/](http://css3pie.com/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T11:09:21.567

由于没有提供详细信息，我只能建议您使用 PIE 的 Javascript 版本 - [PIE.js - PIE JavaScript 版本](http://css3pie.com/documentation/pie-js/) 您需要使用 Javascript 添加悬停功能，并在内部使用 PIE.attach 方法。

另一个钩子 - 例如，在未“悬停”的元素上设置零属性

 `````
a {
  border: 1px solid transparent;
  border-radius: 4px;
  behavior: url(/path/to/PIE.htc);
}
a:hover {
  border-color: blue;
} 
`````

# java - 为什么我不能将 java 线程名称与字符串进行比较？

> ID：11242824
> 
> 赞同：1
> 
> 时间：2012-06-28T10:37:51.993
> 
> 标签：java, string, oop

我有一个java线程代码。我有 3 个线程，我给它们都起了名字。2 个消费者线程名称`Consumer1`和`Consumer2`. 一个名为 的生产者线程`Producer`。我有一个同步方法，我尝试比较线程的名称。我希望如果线程名称是 consumer2，我希望它休眠一段时间。像这样：

```
public synchronized String getReferer()
    {
        try{
            String threadName = Thread.currentThread().getName();
            System.out.println("Thread name: "+threadName);
            System.out.println(" compatre"+threadName=="Consumer2");
            if(threadName == "Consumer2"){
                System.out.println("It is consumer2\. ...wait, you #$%^!!!");
                //this.wait();
            }
        }catch(Exception e){
            this.displayAndExit(e);
        }
        String line = "";
        int i = 0;
        try{
            finished = 0;
            if(this.hostnames2.isEmpty()){
                line = null;
            }else{
                line = this.hostnames2.take();
            }
        }catch(Exception e){
            this.displayAndExit(e);
        }
        return line;
    }
} 
```

我一个接一个地启动所有线程，第一个生产者和消费者。如果我在所有地方都可以看到 threadName，会发生`Consumer1`什么`Consumer2`。但是在第二个sop中我看到了这样的东西！！！

> 线程名称：Consumer2 false

现在，由于方法是同步的，因此线程在进入时会对其进行锁定。因此，如果是 Consumer2，那么当两个语句都背靠背时，它与字符串“Consumer2”的比较怎么会失败？

这是线程的主要方法和调用。

```
public class OffensiveFilterApplicator 
{
    public static void main(String [] args)
    {
        String pathToCSV = "src/unique_referer_dump3.txt";
        CSVResourceHandler csvResHandler = new CSVResourceHandler(pathToCSV);
        HostnameFileData hfd = new HostnameFileData();
        HostnameReader hr = new HostnameReader(hfd, csvResHandler.getCSVFileHandler());
        VexigoCallOps vco = new VexigoCallOps(hfd);
        Thread producer = new Thread(hr);
        Thread consumer1 = new Thread(vco);
        Thread consumer2 = new Thread(vco);
        producer.setName("Producer");
        producer.start();
        consumer1.setName("Consumer1");
        consumer2.setName("Consumer2");
        consumer1.start();
        consumer2.start();
    }
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-28T10:38:34.193

您不能使用`==`. 你必须使用`equals`.

在“.equals”和“==”之间阅读更多 [内容？](https://stackoverflow.com/q/1643067/324900)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T10:56:25.360

线程不存储线程名称的字符串。它将名称存储为 a `char[]`，因此每次您调用时，`getName()`您实际上都会得到一个不同的对象。

```
Thread t = Thread.currentThread();
for (int i = 0; i < 10; i++)
    System.out.println(Integer.toHexString(System.identityHashCode(t.getName()))); 
```

打印类似的东西

```
4318f375
1b17a8bd
2e471e30
3f0ef90c
7000a32b
39d8957f
3a3ee284
768965fb
36867e89
37dd7056 
```

为什么它不存储`String`给定的`setName`我不知道。我认为它是出于历史原因。

# c# - Devexpress如何删除仪表控件中的空间？

> ID：11242829
> 
> 赞同：0
> 
> 时间：2012-06-28T10:38:14.237
> 
> 标签：c#, winforms, devexpress, gauge

我在 Winforms 中使用了 DevExpress Gauge 控件。我想删除边界和 ArcScaleBackgroundLayerComponent 之间未使用的空间。 ![在此处输入图像描述](../Images/80c08c7f748b9d749e03bf1217eb87f1.png) 这个怎么做？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T10:48:11.730

如坐标系中所述，圆形仪表的相对宽度和高度等于 250。这意味着当启用自动布局功能时，它们始终具有矩形形状。因此，为了完成您的任务，您可以更改所有元素的大小以拉伸它们以填充整个矩形。但是，在这种情况下，仪表看起来不成比例：它将被拉伸到顶部。

如果以前的解决方案不适合您，则需要禁用 AutoLayout 功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T10:37:09.107

当[GaugeControl.AutoLayout](http://documentation.devexpress.com/#WindowsForms/DevExpressXtraGaugesWinGaugeControlBase_AutoLayouttopic)属性设置为 true 时，您可以使用 GaugeControl.LaoutPadding 属性的零值，或者在 GaugeControl 中指定量规[Bounds](http://documentation.devexpress.com/#WindowsForms/DevExpressXtraGaugesWinGaugeControlBase_LayoutPaddingtopic)属性[本身](http://documentation.devexpress.com/#CoreLibraries/DevExpressXtraGaugesCoreModelBaseGauge_Boundstopic)。

# c# - 替换 WCF 客户端代理中未知 DataContract 的属性值

> ID：11242836
> 
> 赞同：1
> 
> 时间：2012-06-28T10:38:37.717
> 
> 标签：c#, wcf, datacontract

> **可能重复：**
> [WCF：数据合同正在转换为消息合同](https://stackoverflow.com/questions/3586877/wcf-data-contract-being-converted-to-message-contract)

我有一个通用的 WCF 代理，对于那些不熟悉它的人来说，它是一个具有以下 OperationContract 的方法的类。

```
[OperationContract(Action = "*", ReplyAction = "*")]
void Proxy(Message requestMessage); 
```

最近出现的要求之一是，我需要将 Message 中所有类型为 IPAddress 的属性替换为提供请求消息的那些属性的 IPAddress 值。

即类似的东西，

```
public void Proxy(Message requestMessage)
{
    try
    {
        // Client IP address, not currently used!
        IPAddress clientIP = IPAddress.Parse((requestMessage
            .Properties[RemoteEndpointMessageProperty.Name] 
            as RemoteEndpointMessageProperty).Address);
        var factory = new ChannelFactory<IDmzProxy>("client");
        IDmzProxy dmzProxy = factory.CreateChannel();
        dmzProxy.Proxy(requestMessage);
        factory.Close();
    }

    // No leakage of data!  Any exceptions still return void!
    catch (Exception exception)
    {
        Log.Fatal(
            "Exception occurred on proxying the request",
            exception);
        return;
    }
} 
```

现在的问题是如何将 requestMessage 中 IPAddress 类型的元素设置为我检索到的 clientIP？

**编辑 1**

我尝试过但失败的事情，

```
requestMessage.GetBodyAttribute("ipAddress", "http://schemas.datacontract.org/2004/07/System.Net") 
```

**编辑 2**

一种方法似乎是替换 MessageBody 的 XML。这对我来说似乎有点矫枉过正（那么 WCF 的意义何在？）。

这也不是特别容易，因为 MessageBody 需要通过其属性名称而不是元素名称来匹配元素。

```
 <ipAddress xmlns:a="http://schemas.datacontract.org/2004/07/System.Net" xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
    <a:m_Address>3772007081</a:m_Address>
    <a:m_Family>InterNetwork</a:m_Family>
    <a:m_HashCode>0</a:m_HashCode>
    <a:m_Numbers xmlns:b="http://schemas.microsoft.com/2003/10/Serialization/Arrays">
      <b:unsignedShort>0</b:unsignedShort>
      <b:unsignedShort>0</b:unsignedShort>
      <b:unsignedShort>0</b:unsignedShort>
      <b:unsignedShort>0</b:unsignedShort>
      <b:unsignedShort>0</b:unsignedShort>
      <b:unsignedShort>0</b:unsignedShort>
      <b:unsignedShort>0</b:unsignedShort>
      <b:unsignedShort>0</b:unsignedShort>
    </a:m_Numbers>
    <a:m_ScopeId>0</a:m_ScopeId>
  </ipAddress> 
```

**编辑 3**

当然不是重复的，这是大致工作的东西，还需要一些工作来替换我所追求的节点，

```
 public void Proxy(Message requestMessage)
    {
        try
        {
            Log.Info("Received request");
            requestMessage = SourceNATMessage(requestMessage);

            // Check if there is an accepted action we have to catch
            // If the Accepted Action is set, and the action is not the same
            // then just return);)
            if (!String.IsNullOrEmpty(AcceptedAction) &&
                !requestMessage.Headers.Action.EndsWith(AcceptedAction))
            {
                Log.WarnFormat(
                    "Invalid request received with the following action {0}\n" +
                    "expected action ending with {1}",
                    requestMessage.Headers.Action,
                    AcceptedAction);
                return;
            }

            // otherwise, let's proxy the request
            Log.Debug("Proceeding with forwarding the request");
            var factory = new ChannelFactory<IDmzProxy>("client");
            IDmzProxy dmzProxy = factory.CreateChannel();
            dmzProxy.Proxy(requestMessage);
            factory.Close();
        }

        // No leakage of data!  Any exceptions still return void!
        catch (Exception exception)
        {
            Log.Fatal(
                "Exception occurred on proxying the request",
                exception);
            return;
        }
    }

    private static Message SourceNATMessage(Message message)
    {
        IPAddress clientIp =
                IPAddress.Parse(
                    ((RemoteEndpointMessageProperty)
                     message.Properties[
                         RemoteEndpointMessageProperty.Name]).Address);

        Log.DebugFormat("Retrieved client IP address {0}", clientIp);

        var stringBuilder = new StringBuilder();
        XDocument document;

        using (XmlWriter writer = XmlWriter.Create(stringBuilder))
        {
            message.WriteBody(writer);
            writer.Flush();
            document = XDocument.Parse(stringBuilder.ToString());
        }

        var deserializer = new DataContractSerializer(typeof(IPAddress));

        foreach (XElement element in
            from element in document.DescendantNodes().OfType<XElement>()
            let aNameSpace = element.GetNamespaceOfPrefix("a")
            let iNameSpace = element.GetNamespaceOfPrefix("i")
            where
                aNameSpace != null &&
                aNameSpace.NamespaceName.Equals(SystemNetNameSpace) &&
                iNameSpace != null &&
                iNameSpace.NamespaceName.Equals(XmlSchemaNameSpace) &&
                deserializer.ReadObject(element.CreateReader(), false) is IPAddress
            select element)
        {
            element.ReplaceWith(new XElement(element.Name, deserializer.WriteObject());
        }

        return Message.CreateMessage(message.Version,
                                     message.Headers.Action,
                                     document.CreateReader());
    } 
```

**编辑 4**

对于那些感兴趣的人来说，工作代码不能在问题结束时作为答案发布。

```
private static Message SourceNatMessage(Message message)
{
    IPAddress clientIp =
            IPAddress.Parse(
                ((RemoteEndpointMessageProperty)
                    message.Properties[
                        RemoteEndpointMessageProperty.Name]).Address);

    Log.DebugFormat("Retrieved client IP address {0}", clientIp);

    var stringBuilder = new StringBuilder();
    XDocument document;

    using (XmlWriter writer = XmlWriter.Create(stringBuilder))
    using (XmlDictionaryWriter dictionaryWriter =
        XmlDictionaryWriter.CreateDictionaryWriter(writer))
    {
        message.WriteBodyContents(dictionaryWriter);
        dictionaryWriter.Flush();
        document = XDocument.Parse(stringBuilder.ToString());
    }

    var deserializer = new DataContractSerializer(typeof(IPAddress));
    var clientIpXml = new StringBuilder();
    using (var xmlWriter = XmlWriter.Create(clientIpXml))
    {
        deserializer.WriteObject(xmlWriter, clientIp);
        xmlWriter.Flush();
    }

    var clientElement = XElement.Parse(clientIpXml.ToString());

    foreach (XElement element in
        from element in document.DescendantNodes().OfType<XElement>()
        let aNameSpace = element.GetNamespaceOfPrefix("a")
        let iNameSpace = element.GetNamespaceOfPrefix("i")
        where
            aNameSpace != null &&
            aNameSpace.NamespaceName.Equals(SystemNetNameSpace) &&
            iNameSpace != null &&
            iNameSpace.NamespaceName.Equals(XmlSchemaNameSpace) &&
            element.NodeType == XmlNodeType.Element
        select element)
    {
        try
        {
            deserializer.ReadObject(element.CreateReader(), false);
            element.ReplaceNodes(clientElement);
        }
        catch (SerializationException) { }
    }

    Message sourceNatMessage = Message.CreateMessage(message.Version,
                                    null,
                                    document.CreateReader());
    sourceNatMessage.Headers.CopyHeadersFrom(message);
    sourceNatMessage.Properties.CopyProperties(message.Properties);

    return sourceNatMessage;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T13:11:42.740

在正常情况下，您不必这样做。您的消息已经包含您正在寻找的信息。

```
OperationContext context = OperationContext.Current;
MessageProperties messageProperties = context.IncomingMessageProperties;
RemoteEndpointMessageProperty endpointProperty = messageProperties[RemoteEndpointMessageProperty.Name] as RemoteEndpointMessageProperty; 
```

在 endpointProperty.Address 属性上找到客户端 IP 地址，在 endpointProperty.Port 属性上找到端口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T11:25:34.147

只需使用自定义寻址标头注释您的 SOAP 消息。

# java - 无法在黑莓中解密 AES 的 php 代码密文

> ID：11242837
> 
> 赞同：0
> 
> 时间：2012-06-28T10:38:37.783
> 
> 标签：java, php, blackberry, aes

我正在编写一个使用 AES (ECB) 模式加密和解密数据的应用程序。黑莓代码的加密数据通过php代码成功解密。但问题是，当我从 php 获取加密文本时，我无法用黑莓代码解密它。即使我没有得到任何异常。

这是我加密和解密文本的代码。

```
public static  byte[] encrypt( byte[] keyData, byte[] data )
throws CryptoException, IOException
{
    // Create the AES key to use for encrypting the data.
    // This will create an AES key using as much of the keyData
    // as possible.
    AESKey key = new AESKey( keyData );

    // Now, we want to encrypt the data.
    // First, create the encryptor engine that we use for the actual
    // encrypting of the data.
    AESEncryptorEngine engine = new AESEncryptorEngine( key );

    // Since we cannot guarantee that the data will be of an equal block
    // length we want to use a padding engine (PKCS5 in this case).
    PKCS5FormatterEngine fengine = new PKCS5FormatterEngine( engine );

    // Create a BlockEncryptor to hide the engine details away.
    ByteArrayOutputStream output = new ByteArrayOutputStream();
    BlockEncryptor encryptor = new BlockEncryptor( fengine, output );

    encryptor.write( data );

    encryptor.close();
    output.close();

    return output.toByteArray();
}
public static String AESDecryption(byte[] keyData,byte[] cipherText, int dataLength ) throws CryptoException, IOException {

    // Create the input stream based on the ciphertext
    ByteArrayInputStream in = new ByteArrayInputStream( cipherText, 0, dataLength );

    // Now create the block decryptor and pass in a new instance
    // of an AES decryptor engine with the specified block length
    BlockDecryptor cryptoStream = new BlockDecryptor(new AESDecryptorEngine( new AESKey( keyData )), in );

    byte[] T= new byte[dataLength];
    // Read the decrypted text from the AES decryptor stream and
    // return the actual length read

    int length= cryptoStream.read( T );
  String str= new String(T);

  return str;
} 
```

提前致谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T11:02:45.200

这是接受密钥和加密数据（以字节数组的形式）并以字节数组的形式返回解密数据的方法：

```
public static byte[] decrypt(byte[] keyData, byte[] ciphertext) 
         throws CryptoException, IOException {

    // First, create the AESKey again.
    AESKey key = new AESKey(keyData);

    // Now, create the decryptor engine.
    AESDecryptorEngine engine = new AESDecryptorEngine(key);
    // Since we cannot guarantee that the data will be of an equal block length
    // we want to use a padding engine (PKCS5 in this case).
    PKCS5UnformatterEngine uengine = new PKCS5UnformatterEngine(engine);

    // Create the BlockDecryptor to hide the decryption details away.
    ByteArrayInputStream input = new ByteArrayInputStream(ciphertext);
    BlockDecryptor decryptor = new BlockDecryptor(uengine, input);

    // Now, read in the data.
    byte[] temp = new byte[100];
    DataBuffer buffer = new DataBuffer();

    for (;;) {
        int bytesRead = decryptor.read(temp);
        buffer.write(temp, 0, bytesRead);

        if (bytesRead < 100) {
            // We ran out of data.
            break;
        }
    }

    byte[] plaintext = buffer.getArray();

    return plaintext;
} 
```

注意加密/解密不直接对字符串进行操作。它仅适用于字节数组。因此，作为最后的操作，您需要使用`String(byte[] bytes)`或`String(byte[] bytes, String enc)`构造函数将解密的字节数组转换为字符串。如果您的字符串使用“ISO-8859-1”编码（这是 BlackBerry 的默认编码）以外的任何编码进行编码，则第二个构造函数会很有用。

**更新：**

事实证明，您没有在服务器端使用 PKCS5 填充并将加密的字节数据转换为 HEX 字符串，那么解决方案代码是：

```
// this is to convert HEX to bytes
public static byte[] convertHexToBytes(String s) {
    int len = s.length();
    byte[] data = new byte[len / 2];
    for (int i = 0; i < len; i += 2) {
        data[i / 2] = (byte) ((Character.digit(s.charAt(i), 16) << 4)
                             + Character.digit(s.charAt(i+1), 16));
    }
    return data;
}

// this is the same as initial version, but we don't handle PKCS5 padding here
public static byte[] decrypt(byte[] keyData, byte[] ciphertext)
        throws CryptoException, IOException {

    // First, create the AESKey again.
    AESKey key = new AESKey(keyData);

    // Now, create the decryptor engine.
    AESDecryptorEngine engine = new AESDecryptorEngine(key);

    // Create the BlockDecryptor to hide the decryption details away.
    ByteArrayInputStream input = new ByteArrayInputStream(ciphertext);
    BlockDecryptor decryptor = new BlockDecryptor(engine, input);

    // Now, read in the data.
    byte[] temp = new byte[100];
    DataBuffer buffer = new DataBuffer();

    for (;;) {
        int bytesRead = decryptor.read(temp);
        buffer.write(temp, 0, bytesRead);

        if (bytesRead < 100) {
            // We ran out of data.
            break;
        }
    }

    byte[] plaintext = buffer.getArray();

    return plaintext;
}

// and finally :)
String key =       "1234567890123456";
String encrypted = "48b983c4f1575280d244b74cf689efe5";

byte[] keyBytes = key.getBytes();
byte[] encryptedBytes = convertHexToBytes(encrypted);

// displays "nirav bhandari"
Dialog.inform(new String(decrypt(keyBytes, encryptedBytes))); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T12:11:16.947

调用解密函数时，如何将密文转换为Byte[]？

# node.js - 在nodejs上用mocha测试backbonejs

> ID：11242842
> 
> 赞同：2
> 
> 时间：2012-06-28T10:38:49.170
> 
> 标签：node.js, backbone.js, requirejs, mocha.js

我有一个 nodejs 应用程序，它具有使用backbonejs 和requirejs 构建的客户端代码。我想使用 mocha 在我的 nodejs 服务器上测试客户端代码。

我的摩卡测试文件：test/view.coffee

```
requirejs = require 'requirejs'
global.define = requirejs

requirejs.config
  nodeRequire: require
  baseUrl: '../public/javascripts/libs/'
  paths:
    jquery: "jquery"
    Underscore: "underscore"
    Backbone: "backbone"
  shim:
    'jquery':
      exports: '$'
    'Underscore':
      exports: '_'
    'Backbone':
      deps: ['jquery', 'Underscore']
      exports: 'Backbone'

requirejs ['../public/javascripts/views/test_view'], (TestView) ->
  describe 'TestView', ->
    view = new TestView() 
```

要测试的 Backbonejs 文件：public/javascripts/views/test_view.coffee

```
define [
  'Backbone'
], (Backbone) ->
  class TestView extends Backbone.View
    initialize: ->
      ...
  TestView 
```

在 public/javascripts/libs 中，我有 jquery、主干和下划线的缩小（不是 AMD）版本。

当我运行测试时，我收到以下错误消息：

```
Error: Calling node's require("../public/javascripts/views/test_view")
failed with error: Error: Calling node's require("Underscore")
failed with error: Error: Cannot find module 'Underscore'
  at /node_modules/requirejs/bin/r.js:2262:27 
```

不知何故，未读取 test/view.coffee 中 requirejs.config 的路径属性。如果我从路径中删除 Backbone: "backbone"，我不会收到模块 'Backbone' 丢失的错误消息。我没有在 nodejs 服务器上安装 Backbone 和 Underscore。

**编辑：** 通过将 requirejs.config baseUrl 更改为“public/javascripts/views/test_view”来修复路径问题。Requirejs 没有使用 baseUrl 块的文件路径（test/view.coffee）。对于 requirejs ['...'], (TestView) 部分，我必须使用 test/view.coffee 文件的路径。

当我使用 mocha 运行测试时，出现以下错误：

```
throw e; // process.nextTick error, or 'error' event on first tick
              ^
Error: Calling node's require("../public/javascripts/views/test_view")
  failed with error: TypeError: Object #<Object> has no method 'load' 
```

**编辑：** 我忘了提到我已将“jade！templates/test_template”添加到我的 test_view 中。我删除了它，现在 mocha 正在运行测试。但我得到了错误：

```
TypeError: object is not a function
  at Object.CALL_NON_FUNCTION_AS_CONSTRUCTOR (native) 
```

该行：

```
view = new TestView() 
```

导致错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T12:49:38.770

这里的问题是，在服务器上，RequireJS 回退到节点的 require()。一个可能的解决方案是使用 NPM 安装 Backbone，并将 node_modules/backbone/backbone.js 符号链接到 public/lib/backbone.js。然后，您可以使用节点或 RequireJS 的 require() 来要求主干。

# drag-and-drop - TreeItem 是否支持拖放？

> ID：11242847
> 
> 赞同：7
> 
> 时间：2012-06-28T10:39:05.433
> 
> 标签：drag-and-drop, javafx, javafx-2

我目前正在使用代表文件系统的 JavaFx-2 的[TreeView 。](http://docs.oracle.com/javafx/2/api/javafx/scene/control/TreeView.html)

我想启用[拖放](http://docs.oracle.com/javafx/2/drag_drop/jfxpub-drag_drop.htm)以允许移动操作，但看起来[TreeItem](http://docs.oracle.com/javafx/2/api/javafx/scene/control/TreeItem.html)不包括拖动事件侦听器。我只能在 englobing TreeView 对象上实现拖放，但它不适用于子项目。

我是否遗漏了什么，或者 TreeItems 还不支持拖放事件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-09T15:44:30.033

Csh 在 Oracle 论坛上回答的问题：[https ://forums.oracle.com/forums/message.jspa?messageID=10426066#10426066](https://forums.oracle.com/forums/message.jspa?messageID=10426066#10426066)

> 您必须在 TreeCell 上实现拖放。
> 
> 像这样写一个 CellFactory：

```
TreeView<String> treeView = new TreeView<String>();
    treeView.setCellFactory(new Callback<TreeView<String>, TreeCell<String>>() {
        @Override
        public TreeCell<String> call(TreeView<String> stringTreeView) {
            TreeCell<String> treeCell = new TreeCell<String>() {
                protected void updateItem(String item, boolean empty) {
                    super.updateItem(item, empty);
                    if (item != null) {
                        setText(item);
                    }
                }
            };

            treeCell.setOnDragDetected(new EventHandler<MouseEvent>() {
                @Override
                public void handle(MouseEvent mouseEvent) {

                }
            });

            return treeCell;
        }
    }); 
```

如果他想声称自己的声誉或在他的解决方案中添加信息，我将更改此答案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-19T20:01:45.570

@Timst 的答案是正确的，但是您应该更改“updateItem”方法，因为在上述情况下您将无法设置“TreeItem”的图形并且树崩溃将无法正常工作（不会清除子节点中的文本）。

只需将方法更改为：

```
@Override
protected void updateItem(String item, boolean empty) {
    super.updateItem(item, empty);
    if (!empty && item != null) {
        setText(item);
        setGraphic(getTreeItem().getGraphic());
    }else{
        setText(null);
        setGraphic(null);
    }
} 
```

# tfs - 如何处理在当前 SCRUM sprint 期间必须完成的不可预见的任务

> ID：11242853
> 
> 赞同：0
> 
> 时间：2012-06-28T10:39:23.740
> 
> 标签：tfs, scrum

在我们的 sprint 中，我们发现我们需要完成一些不可预见但绝对必要的任务才能完成。

您如何将这些作为最佳实践来处理？我应该在 sprint backlog 上创建这个任务并将完成的时间放入其中吗？或者我应该将这些额外的时间添加到我最初正在处理的任务中吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T15:11:17.520

Unforseen tasks will always be there.

As a developer, please raise it in the upcoming Standup meeting (Daily Scrum). Make it visible on the scrum board. Make sure your Product Owner/Stakeholder knows this ad-hoc requirement. Ask your Product owner to de-commit the low-prio user story in order to accommodate such high-prio urgent tasks.

This will lead to consistent Velocity of the Team. Such ad-hoc tasks will be known to Product Owner so no conflict at the end of Sprint. Tasks with equivalent complexity will be de-committed, therefore developer will not be overloaded or pressurised.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T19:56:28.257

在 sprint 会话期间为故事创建的任务仅仅是开始。新任务通常被确定为实现故事的一部分。如果超过 3 小时，我通常建议添加它们。我们通常不会在 Scrum 团队中跟踪完成的小时数，但我们会投入剩余的精力。这很有用，因为它更新了我们用来跟踪 sprint 进度的 Sprint 燃尽报告。如果这是一项小任务，并且将剩余的工作添加为另一项任务的一部分是有意义的，那么它也可以。我建议将您的任务控制在 2 天以内。如果一项任务的剩余工作量超过 2 天，您应该想办法将其分解为更小的步骤。

Martin Rajotte - Incycle Software 的 Scrum 教练和 TFS 专家

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T07:06:32.523

First thing: If there's something that you have to do in order to complete the sprint, do it, and make sure to **record** it.

That means that if you are discovering a new task required to complete a story, add it to the story, make note of the increased remaining tasks (or hours) in your **burndown** chart, and mark it as **unplanned work**.

If this is a task that is unrelated to any story that you are currently committed to, you should (assuming that you *really* must) do it, record it, and mark it (unplanned). You should consider adding a story that describes the reason (who & why) you're doing it.

The important thing, is to analyze the unplanned work during your **retrospective**; you should strive to minimize these occurrences, by spending more effort on planning, and communicating the importance of the stability of the sprint (as may be the case).

In any case, I'd advise against a dogma of "we're agile / doing scrum, so we can't do it in this sprint". Be *really* agile, and inspect, learn and adapt.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-28T16:29:36.917

总会有意想不到的任务。不确定性的锥体在这一事实中非常清楚，Scrum 承认这一点。冲刺计划被描述为确定要完成的工作和开始的计划。

Scrum 甚至消除了对任务和时间的期望，因为团队很可能使用不同的机制（例如 ATDD）来监控他们的进度。

所以，简短的回答：做适合你团队的事情。重点是让你发现你的过程。

# mysql - MySQL：从时间序列数据中提取计数器差异

> ID：11242855
> 
> 赞同：3
> 
> 时间：2012-06-28T10:39:34.970
> 
> 标签：mysql, series

我有一个这样的 MySQL 表：

```
CREATE TABLE IF NOT EXISTS `mytable` (
  `ts` datetime NOT NULL,
  `cnt` int(10) unsigned NOT NULL,
  PRIMARY KEY (`ts`)
) ENGINE=InnoDB; 
```

每当我们获得更新时，我们都会在其中存储事件计数器的值；这些更新在任意时间到达。

如何提取每 X 时间（例如 5 分钟、一天、一个月等）的事件数？我可以将其简化为通过日期/时间 sql 函数（例如小时、天、月等）轻松提取的间隔。

虽然我们没有任何保证，但与我想提取的间隔相比，平均数据是“密集的”。例如。数据通常每小时多次出现，但我永远不会要求间隔小于 1 小时的事件计数。如果存储的数据中存在“问题”（例如大漏洞），则结果中存在“问题”是可以接受的。

例如，我可以通过这样的查询（24 小时示例）获得我感兴趣的计数器值：

```
SELECT ts, cnt
FROM mytable
GROUP BY DATE( ts ) 
ORDER BY ts DESC 
```

...并且事件计数可以通过将每一行的计数器与其前任相减来轻松计算。但如果可能的话，我想在 SQL 中做到这一点。

另外，如果这个问题有一个好名字（我认为当你使用时间序列和计数器时这是一个相当常见的名字）我想知道它以提高我的词汇量:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T04:29:19.030

如果您将 AUTO_INCREMENT PRIMARY KEY 添加到您的表中，那将是 aolveable。

您提供的表模式无效（PRIMARY KEY on `timestamp`，但没有这样的列）。

您是否介意我们：

```
ALTER TABLE mytable DROP PRIMARY KEY, ADD COLUMN id INT UNSIGNED AUTO_INCREMENT PRIMARY KEY 
```

?

如果是这样，那么可以完成以下操作，我将分步介绍：

```
SELECT
  TIMESTAMPDIFF(SECOND, m1.ts, m2.ts) AS diff_seconds,
  m2.cnt - m1.cnt AS diff_cnt
FROM
  mytable m1 JOIN mytable m2 ON (m1.id = m2.id-1)
; 
```

以上显示了连续样本之间的时间和cnt差异。让我们添加第三列：

```
SELECT
  TIMESTAMPDIFF(SECOND, m1.ts, m2.ts) AS diff_seconds,
  m2.cnt - m1.cnt AS diff_cnt,
  (m2.cnt - m1.cnt)/TIMESTAMPDIFF(SECOND, m1.ts, m2.ts) AS cnt_per_second
FROM
  mytable m1 JOIN mytable m2 ON (m1.id = m2.id-1)
; 
```

I evaluated cnt_per_second. Multiply by 60 to get cnt per minute, and so on.

Now, the total average would be:

```
SELECT 
  avg(cnt_per_second)
FROM (
  SELECT
    TIMESTAMPDIFF(SECOND, m1.ts, m2.ts) AS diff_seconds,
    m2.cnt - m1.cnt AS diff_cnt,
    (m2.cnt - m1.cnt)/TIMESTAMPDIFF(SECOND, m1.ts, m2.ts) AS cnt_per_second
  FROM
    mytable m1 JOIN mytable m2 ON (m1.id = m2.id-1)
) sel_diff
; 
```

Add original n1.ts to first query if you want to know *when* a diff was recorded, and so you will also be able to know the average count events in a given time period.

# asp.net - 添加文本时防止多行文本框拉伸

> ID：11242856
> 
> 赞同：4
> 
> 时间：2012-06-28T10:39:35.550
> 
> 标签：asp.net, html, css

下面是我的`HTML`：

```
<table width="100%" >
  <tr>
    <td>
      <asp:TextBox ID="tbNewNote" TextMode="MultiLine" runat="server" CssClass="width:100% "/>
    </td>                                
  </tr>
</table> 
```

当`textbox`填充文本时，它会扩大到超出屏幕边缘。

**我怎样才能摆脱这种行为？**

提前致谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-10-17T14:40:47.663

```
<asp:TextBox runat="server" TextMode="MultiLine" Rows="5" Columns="20" style="resize:none;" ></asp:TextBox> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-28T10:59:17.103

在您的 css 中创建以下类并在要修复其宽度的文本框中使用它：

```
.CSSclass{

resize:none;
} 
```

如果您希望所有带有多行文本模式的文本框都相同，您可以在您的 css 中编写以下内容：

```
.textarea{
resize:none;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-28T10:42:16.077

对您的代码进行以下更改，删除 CssClass="width:100%"，您在此处提供类而不是 css 属性。其次，我为您的 TextBox 添加了固定宽度，现在它不会扩展。

```
 <table width="100%" >
      <tr>
       <td>
        <asp:TextBox ID="tbNewNote" TextMode="MultiLine" runat="server" Width="200px"/>
       </td>                                
      </tr>
    </table> 
```

# exception - PHPWord 在 IIS 服务器中不起作用

> ID：11242857
> 
> 赞同：0
> 
> 时间：2012-06-28T10:39:38.213
> 
> 标签：exception, ms-word, fatal-error, phpword

我正在使用[PHPWord](http://phpword.codeplex.com/documentation)，它在 windows 7、linux 服务器中完美运行。但在 windows NT IIS/6.0 服务器中，出现这样的错误信息

> 致命错误：未捕获的异常“异常”，消息“无法关闭 zip 文件。” 在 C:\inetpub\wwwroot\site\PHPWord\PHPWord\Template.php:109 堆栈跟踪：#0 C:\inetpub\wwwroot\site\PHPWord\PHPWord\paid.php(36): PHPWord_Template->save(' test.docx') #1 C:\inetpub\wwwroot\site\PHPWord\PHPWord\letter.php(6): include_once('C:\inetpub\wwwr...') #2 {main} 在 C 中抛出： \inetpub\wwwroot\site\PHPWord\PHPWord\Template.php 在第 109 行

以下代码正在创建错误：

> require_once 'PHPWord/PHPWord.php';
> 
> $PHPWord = 新 PHPWord(); //挖掘（$row_case）；
> 
> $filename = '测试';
> 
> $document = $PHPWord->loadTemplate('test-temp.docx');
> 
> $document->setValue('date', date('F d, Y'));
> 
> $document->setValue('weekday', date('l')); $document->setValue('time', date('H:i'));
> 
> $document->save($filename.'.docx');

有什么我必须在服务器中安装的东西，或者有什么办法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T09:14:50.617

编辑文件：

```
C:\inetpub\wwwroot\site\PHPWord\PHPWord\Template.php 
```

在第 108 行之后添加这一行：

```
print $this->_objZip->getStatusString(); 
```

这应该打印出无法关闭 zip 文件的可读原因。

最常见的原因之一是文件丢失或临时目录不可访问。

# iphone - 解析、时间调度、表视图重载数据

> ID：11242864
> 
> 赞同：0
> 
> 时间：2012-06-28T10:40:05.390
> 
> 标签：iphone, ios, facebook, parsing

我有三个班级，我只是在 tableView 中显示我的 Facebook 朋友。我成功地在friendArray中获得了我所有朋友的名字。我必须在 FriendList 类中显示朋友的名字。

1)RootViewController类

2)FriendList 类

3)Facebook互动课

**我的问题是：**

我的 FriendList 类在获取（解析）完成之前加载。并且在我的数组中，**friendArray 计数为 0。（因为（获取）解析未完成）**。在我的控制台数组计数是 150。

```
friendListObject.friendArray = parsedArray; // where get data

-(void)butoonClicked               
{
    FBFeedPost *post = [[FBFeedPost alloc]initWithFriendList:self.imageView.image];
    [post publishPostWithDelegate:self];
    FriendList *friendList=[[FriendList alloc]initWithNibName:@"FriendList" bundle:[NSBundle mainBundle]];
    [[self navigationController] pushViewController:friendList  animated:YES];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T10:47:53.683

完成对 facebook 数据的解析后，您可以将朋友数组传递给 FriendList 类。这可以通过调用 FriendList 中的函数来完成。您可以使用此传递的数组填充friendListObject.friendArray并调用`[tableview reloadData];`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T10:50:15.257

`UITableView`有一个方法被调用`reloadData`来刷新自己和它的所有数据源方法。

只需`[yourTable reloadData]`在解析器完成解析时调用。

# jquery - jquery桌面到手机

> ID：11242865
> 
> 赞同：0
> 
> 时间：2012-06-28T10:40:12.587
> 
> 标签：jquery, mobile

我在前端使用 jquery/html 并在后端使用 webservice (restful) 开发了一个 Web 应用程序，如何在移动设备上检查该站点的兼容性？

我在谷歌上搜索了一个叫做 jquery mobile 的东西，这对我有什么帮助？我的意思是我可以在移动设备上使用相同的代码（桌面代码）还是我需要单独开发代码，以及如何测试应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T10:45:21.550

jquery mobile 是一个构建像 webapps 这样的原生框架。
它支持 iphone 过渡动画，并且兼容多浏览器。

测试移动应用程序 -> 查看这些工具

[http://speckyboy.com/2010/04/12/mobile-web-and-app-development-testing-and-emulation-tools/](http://speckyboy.com/2010/04/12/mobile-web-and-app-development-testing-and-emulation-tools/)

[http://www.genuitec.com/mobile/](http://www.genuitec.com/mobile/)

# java - 如何使用 doGet 方法捕获从 android 应用程序发送到 servlet 的 JSON 对象？

> ID：11242868
> 
> 赞同：2
> 
> 时间：2012-06-28T10:40:26.027
> 
> 标签：java, android, json, servlets

我想从用户那里获取用户名、密码和电子邮件 ID，构造一个 JSON 对象并将其发送到 java servlet，然后读取它并将其插入 MySql 对象。我已经使用了这个 php 服务器（来源：[http](http://www.androidhive.info/2011/10/android-login-and-registration-screen-design/) ://www.androidhive.info/2011/10/android-login-and-registration-screen-design/ ）但我需要借助 java servlet . 早些时候我通过如下传递 url 参数来做到这一点，它工作正常，但现在我想将信息用作 JSON 参数：

安卓代码：

```
try {
                url = new URL("http://10.0.2.2:8080/Servlet/Servlet?param1="
                        + uname + "&param2=" + pwd + "&param3=" + eid);
                // url = new URL("http://10.0.2.2:8080/Servlet/Servlet");
                HttpURLConnection urlConnection = (HttpURLConnection) url
                        .openConnection();
                InputStream in = new BufferedInputStream(
                        urlConnection.getInputStream());

                urlConnection.disconnect();

            } catch (Exception e) {
                e.printStackTrace();
            } 
```

小服务程序代码：

```
protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException
    {

        req.setCharacterEncoding("UTF-8");
        resp.setCharacterEncoding("UTF-8");
        final String uname = req.getParameter("param1");
        final String pwd = req.getParameter("param2");
        final String eid = req.getParameter("param3"); 
```

我看过这个（http://stackoverflow.com/questions/11074934/the-json-object-sent-from-android-application-is-null-when-i-want-to-access-him）但是无法理解。

JSON代码如下（来源：[http](http://www.androidhive.info/2011/10/android-login-and-registration-screen-design/) ://www.androidhive.info/2011/10/android-login-and-registration-screen-design/ ）：

```
public class JSONParser {

    static InputStream is = null;
    static JSONObject jObj = null;
    static String json = "";

    // constructor
    public JSONParser() {

    }

    public JSONObject getJSONFromUrl(String url, List<NameValuePair> params) {

        // Making HTTP request
        try {
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);
            httpPost.setEntity(new UrlEncodedFormEntity(params));

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    is, "iso-8859-1"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            json = sb.toString();
            Log.e("JSON", json);
        } catch (Exception e) {
            Log.e("Buffer Error", "Error converting result " + e.toString());
        }

        // try parse the string to a JSON object
        try {
            jObj = new JSONObject(json);            
        } catch (JSONException e) {
            Log.e("JSON Parser", "Error parsing data " + e.toString());
        }

        // return JSON String
        return jObj;

    }
}

public JSONObject loginUser(String email, String password){
        // Building Parameters
        List<NameValuePair> params = new ArrayList<NameValuePair>();
        params.add(new BasicNameValuePair("tag", login_tag));
        params.add(new BasicNameValuePair("email", email));
        params.add(new BasicNameValuePair("password", password));
        JSONObject json = jsonParser.getJSONFromUrl(loginURL, params);
        // return json
        // Log.e("JSON", json.toString());
        return json;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T10:05:29.147

您可以通过编写准备好的 JSONObject 对象并将其序列化到 servlet 来使用简单的序列化。如果您从 java 到 java 通信，序列化非常方便。

```
Map<Object, Object> data = new Hashtable<Object, Object>(0);
data.put("etc", "etc");
...

URLConnection con = url.openConnection();
con.setDoInput(true);
con.setDoOutput(true);
new ObjectOutputStream(con.getOutputStream()).writeObject(data); 
```

并从 servlet

```
Map<Object, Object> data = (Map<Object, Object>) new ObjectInputStream(request.getInputStream()).readObject(); 
```

您甚至可以通过此方法传递复杂的可序列化对象。您也可以从服务写入对象并在客户端读取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T11:54:16.503

首先，您正在创建一个 Post 请求。一般建议从get调用post。

```
protected void doGet(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException
{
    doPost(request, response);
} 
```

这就是我根据他的请求构建 JSON 对象的方法

```
 */
protected void doPost(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException
{

    HttpSession httpSession = request.getSession(false);
    JSONObject jJobObject = JSONObject.fromObject(request.getParameter("data"));
    JJob jJob = (JJob) JSONObject.toBean(jJobObject, JJob.class);
    String strTerm = (String) httpSession.getAttribute("terminal");
    Integer term = null;
    try {
        term = Integer.parseInt(strTerm);
    }
    catch(Exception e) {
        //
    }
    jJob = PersoJobService.createJob(jJob, (Integer) httpSession.getAttribute("userId"), term );
    writeResponse(JSONObject.fromObject(jJob), request, response);
} 
```

# php - 将服务器创建的图像上传到 FTP 服务器

> ID：11242890
> 
> 赞同：0
> 
> 时间：2012-06-28T10:41:34.573
> 
> 标签：php, image, ftp, pdo, jpeg

我一遍又一遍地阅读我的代码，但我无法弄清楚什么是错的..

脚本：

```
 <?
    require_once("../constant/constant.php");
    if($_POST['action'] == 'imgsave'){

    $admin = $_POST['admin'];
    $profile = $_POST['profile'];

    $sth = $conn->prepare("SELECT * FROM profiles WHERE profile_id = '".$profile."'");
    $sth->execute();
    $row = $sth->fetch(PDO::FETCH_ASSOC);

    $targ_w = 180;
    $targ_h = 120;

    $src = imagecreatefromjpeg('../uploads/'.$profile.'.jpg');

    $tmp = imagecreatetruecolor($targ_w, $targ_h);
    imagecopyresampled($tmp, $src, 0,0,$_POST['x'],$_POST['y'],$targ_w,$targ_h,$_POST['w'],$_POST['h']);

    //Grab new image
    ob_start();
    imagejpeg($tmp);
    $image = ob_get_contents();
    ob_end_clean();
    imagedestroy($tmp);
    imagedestroy($src);

    //Create temporary file and write to it
    $fp = tmpfile();
    fwrite($fp, $image);
    rewind($fp);

    //Upload new image
    $conn_id = ftp_connect('ftp.test.com');
    ftp_login($conn_id,'user','pass');
    ftp_fput($conn_id,'/profiles/'.$row['path'].'/preview2.jpg', $fp, FTP_BINARY);
    fclose($fp);

    }
    ?> 
```

它与 jCrop 脚本相结合，我想要的只是修改原始脚本以将其发布到 FTP ..

```
 $src = imagecreatefromjpeg($folder.$filename);
    $tmp = imagecreatetruecolor($targ_w, $targ_h);
    imagecopyresampled($tmp, $src, 0,0,$_POST['x'],$_POST['y'],$targ_w,$targ_h,$_POST['w'],$_POST['h']);
    imagejpeg($tmp, $folder.'t_'.$filename,100);

    imagedestroy($tmp);
    imagedestroy($src); 
```

如您所见，原始脚本非常简单..而且我想我陷入了它变得多么先进的问题..任何人都可以看到解决方案，或者给我一个提示，告诉我还有什么可以做的..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T10:49:22.793

脚本正在运行...！没问题！

# java - 存根生成失败并出现 java.net.unknownhostexception

> ID：11242892
> 
> 赞同：0
> 
> 时间：2012-06-28T10:41:39.033
> 
> 标签：java, web-services, blackberry, stub

我正在尝试使用 java sunwireless 工具包生成存根文件。我能够在 chrome 中打开链接

![在此处输入图像描述](../Images/f837398b629e5d01c32b5d55b083f684.png) 我收到此错误如何解决

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T06:40:57.657

从浏览器中将 WSDL 保存为 *.xml，然后生成存根，URL 是本地文件的路径 *.xml；

注意 WSDL 在你的浏览器中有两种状态，一般是这样的： [http://webservice.webxml.com.cn/WebServices/WeatherWS.asmx](http://webservice.webxml.com.cn/WebServices/WeatherWS.asmx)
浏览器会处理给你阅读
[http://webservice.webxml.com.cn/ WebServices/WeatherWS.asmx?wsdl](http://webservice.webxml.com.cn/WebServices/WeatherWS.asmx?wsdl)
纯 XML

# c - 编译警告：没有规则为架构 i386 处理 sourcecode.cc 类型的文件

> ID：11242894
> 
> 赞同：2
> 
> 时间：2012-06-28T10:42:02.853
> 
> 标签：c, xcode, curl, xcode4, xcode4.2

我正在尝试构建`libcurl`为with on with的`static`库`iOS``xcode 4.2 + sdk 5.0``OSX 10.6.8``apple llvm compiler 3.0 or LLVM GCC 4.2.`

它编译成功（使用两个编译器），但有很多`warnings`这样的：

```
warning: no rule to process file '$(PROJECT_DIR)/../../../../ProjectName/Libs/curl-7.26.0/src/tool_bname.c' of type sourcecode.c.c for architecture i386 
```

我检查了`target->Compile Sources`。它有所有`.c`需要的文件，但没有任何 `.h`文件。

我也尝试改变`Compile Sources`As to`C`但没有任何效果。

我不明白如何修复它以及为什么 C 源类型是`sourcecode.c.c`

# objective-c - ios5 - 单击按钮时出现“EXC_BAD_ACCESS”

> ID：11242896
> 
> 赞同：1
> 
> 时间：2012-06-28T10:42:09.837
> 
> 标签：objective-c, ios, button, exc-bad-access

我是 Objective C 的初学者。

目前我尝试在我的主窗口中显示一个视图。此视图包含一个按钮。由于某种原因，单击此按钮 xcode 会引发错误。

希望你能帮助我理解我做错了什么。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    self.window.backgroundColor = [UIColor whiteColor];

    BtnView *btn = [[BtnView alloc] init];
    [self.window addSubview:btn.view];        
    [self.window makeKeyAndVisible];

    return YES;
} 
```

我的按钮视图的 viewController 有一个用于识别触摸事件 h 文件的操作：

```
- (IBAction)touched:(id)sender; 
```

并在 m 文件中

```
- (IBAction)touched:(id)sender {
    //actions ...
} 
```

通过触摸按钮，我收到以下错误：

![在此处输入图像描述](../Images/59896f823f49923b099e0b07c6191ab4.png) 怎么了？

.m 文件：

![在此处输入图像描述](../Images/e7c35f676cbeb17a1162eb75c280a309.png)

h 文件： ![在此处输入图像描述](../Images/09ba2e4e120af4369248345dfa365cd3.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T11:14:15.813

我假设您为此项目启用了 ARC。

当您从`didFinishLaunchingWithOptions:`分配给的对象返回时，`btn`将被释放，因为您将其分配给仅在该方法中定义的局部变量。`BtnView *btn`为您的班级创建一个属性，`strong`它应该留在周围以处理按钮按下。（记得`self.btn`在引用它时使用。）

（但是，我很好奇，为什么不首先将按钮放在主视图上，然后不用担心额外的控制器和子视图？）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T11:00:28.913

```
- (IBAction)touched 
```

尝试不使用发件人

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T11:02:51.720

在 .xib 文件中，您可以将按钮连接到文件的所有者。

1) 右键单击​​按钮。然后会出现一个窗口。您可以`Touch Up Inside`在该窗口中看到并单击小圆圈并拖动到文件所有者并连接到`touched`. 我想这会对你有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T11:20:54.480

是否有任何特定原因需要整个 UIViewController 成为按钮？执行此操作的常规方法是将 UIViewController 作为控制器，然后将 UIButton 作为其视图的子视图放在 viewDidLoad 方法中，将其连接到所需的方法，甚至在需要时将其放在整个屏幕上。如果您需要自定义外观，您也可以使用 UIButton 来实现。

# javascript - 如何以小时和分钟显示 Google viz 折线图间隔？

> ID：11242907
> 
> 赞同：0
> 
> 时间：2012-06-28T10:42:48.217
> 
> 标签：javascript, google-visualization

我得到了一个以分钟或小时为单位显示间隔的折线图。日期设置正确，图表显示正确。我的问题是标签。

传递给图表的数据：

```
U
 D: Array[96]
  0: Object
  c: Array[2]
   0: Object
    v: Wed Jun 27 2012 00:00:00 GMT+0200 (Romance Daylight Time)
    __proto__: Object
   1: Object
   length: 2
   __proto__: Array[0]
   __proto__: Object
  1: Object
   c: Array[2]
    0: Object
     v: Wed Jun 27 2012 00:15:00 GMT+0200 (Romance Daylight Time)
     __proto__: Object
    1: Object
    length: 2
  (...) 
```

图表显示如下： ![在此处输入图像描述](../Images/992eda5000437697f618fda29bbe0237.png)

现在的问题是标签应该显示小时范围并且垂直线消失:(（如果显示超过 1 天，它们会显示）。

我一直在展示[https://developers.google.com/chart/interactive/docs/gallery/linechart#Data_Format](https://developers.google.com/chart/interactive/docs/gallery/linechart#Data_Format)来检查解决方案，但我找不到任何关于为什么时间隐藏在垂直轴。

任何人都知道如何显示它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T10:59:49.403

（当我找到它的其余部分时，我会更新这个答案）要在工具提示中显示小时数，它可以使用 DateFormat 进行配置：

```
var dateFormatter = new google.visualization.DateFormat({pattern : 'HH:mm'});
dateFormatter.format(googledata, 0);
(...)
vis.draw(googledata, { 
```

我发现的所有参考资料都指出在使用折线图时无法更改 hAxis 上的标签:(

# jquery - 如果 div 包含单词 "example" ，则 addClass 显示 none 到另一个 div

> ID：11242910
> 
> 赞同：3
> 
> 时间：2012-06-28T10:42:57.917
> 
> 标签：jquery, if-statement, contains

我试图隐藏一个`div`，如果一个特定的词在另一个里面`div`。

```
if (jQuery("div.contactUs:contains('contact')")) {
jQuery(".hideThis").css("display","none");
} 
```

但这似乎不起作用。有任何想法吗 ？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-28T10:45:51.423

您需要检查[`length`](http://api.jquery.com/length/)返回的 jQuery 对象：

```
if (jQuery("div.contactUs:contains('contact')").length) {
    jQuery(".hideThis").css("display","none");
} 
```

这样做的原因是 jQuery 返回一个对象，即使没有找到匹配的元素，也永远不会计算为`false`.

另请注意，您可以使用[`hide`](http://api.jquery.com/hide/)而不是`css`，只是为了使您的代码更短一点：

```
if (jQuery("div.contactUs:contains('contact')").length) {
    jQuery(".hideThis").hide();
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-28T10:45:04.233

试试这个，这可以显示**[它是如何工作的](http://jsfiddle.net/rajaadil/uREUT/2/)**

```
if (jQuery("div.contactUs").text().indexOf('contact') != -1) {

jQuery(".hideThis").css("display","none");

} 
```

# javascript - JQuery - 在浏览器关闭事件上执行任务

> ID：11242918
> 
> 赞同：0
> 
> 时间：2012-06-28T10:43:38.603
> 
> 标签：javascript, jquery

很简单的问题。当用户关闭浏览器时，我需要执行一项任务。我知道以下功能：

```
$(window).bind("beforeunload", function() {
    返回假；
})

$(窗口).unload(函数() {
    返回假；
})

```

但是这两个 - 提出一个询问用户的警报 - “留在这个页面上” - “离开这个页面”（至少在 Chrome 上）。

我不希望这种情况发生。我只想在他关闭时执行一项任务，例如更新数据库上的时间，了解他何时离开。

任何想法谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T10:51:00.043

这不可能跨浏览器正确完成，因为 Opera 实际上并不支持它：\ 如此处所述：[cross-browser Onunload 和 Onbeforeunload ? （尤其是歌剧 11）](https://stackoverflow.com/questions/4683221/cross-browser-onunload-and-onbeforeunload-particularly-opera-11)和许多其他有据可查的地方。

此外，正如其他人提到的那样，有不同程度的实现，例如 Firefox，您可以将自己的消息添加到显示在 beforeunload 上的警报框中，但在 Chrome 中您不能，它只会显示一些没有多大意义的通用消息.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T10:47:51.407

您可以定期保存用户状态（使用 ajax）或只记录对服务器的最后一个请求（在后端）。

# objective-c - 核心数据唯一性不起作用？

> ID：11242919
> 
> 赞同：3
> 
> 时间：2012-06-28T10:43:42.143
> 
> 标签：objective-c, ios, core-data, ios5, nsmanagedobjectcontext

使用两个托管对象上下文时，我在单个上下文中遇到了同一实体的重复对象的问题。

考虑以下代码：

```
[childMOC performBlockAndWait:^{

    // CREATE PERSON IN CHILD MOC
    Person *person = [NSEntityDescription insertNewObjectForEntityForName:@"Person" 
                                                   inManagedObjectContext:childMOC];

    person.name = @"Ben";

    // SAVE CHILD MOC TO PUSH CHANGES TO MAIN MOC
    [childMOC save:nil];

    NSManagedObjectID *personID = person.objectID;

    [mainMOC performBlockAndWait:^{
        // SAVE MAIN MOC TO PERSIST THE PERSON AND REPLACE ID TO PERMANENT
        [mainMOC save:nil];

        // GET THE PERSON IN THE MAIN MOC
        Person *personInMainContext = (Person*)[mainMOC objectWithID:personID];

        // GET THE PERSON'S NEW PERMANENT ID
        NSManagedObjectID *personIdAfterSaveToPersistentStore = personInMainContext.objectID;

        [childMOC performBlockAndWait:^{

            // GET THE PERSON IN THE CHILD MOC WITH ITS NEW PERMANENT ID
            // (this is common when sending the id from mainMOC to childMOC)
            Person *samePersonFetchedFresh = (Person*)[childMOC objectWithID:personIdAfterSaveToPersistentStore];

            // THE PERSON OBJECTS SHOULD BE EXACTLY THE SAME BECAUSE THE MOC GUARANTEES UNIQUING
            samePersonFetchedFresh.name = @"Jerry";
            NSLog(@"%@ & %@", person.name, samePersonFetchedFresh.name);

            // OUTPUT: Ben & Jerry
            // NOT THE SAME?!
        }];
    }];
}]; 
```

这意味着在子 MOC 中创建的对象在保存在主 MOC/持久存储中时会失去其独特的能力。

谁能解释为什么 uniquing 在这种情况下不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T12:29:28.253

在记录其名称之前尝试刷新您的人。我认为唯一有效但缓存失效可能不会。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T13:06:54.943

在某个地方，您应该收听主上下文`NSManagedObjectContextDidSaveNotification`，并使用 将更改传播到子上下文`mergeChangesFromContextDidSaveNotification`。

如果完全合并不适合您的需要，您还可以使用 .单独更新每个实体`refreshObject:mergeChanges:`。

如果您不想处理最新的实例和旧副本，则必须以一种或另一种方式传播更改。

这不是自动完成的，这是好的，因为操作可能非常繁重。对于相关上下文，您必须在适当的时候处理合并。例如，如果您使用一些 JSON 服务填充数据库，您将使用上下文向数据库添加实体，并且您希望在数据一致时更新 UI，而不是每次将内容保存到主要上下文，也许还有磁盘。同样，该上下文肯定对 UI 中所做的更改不感兴趣，然后保存到主上下文/磁盘。因此，该过程不是自动的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T20:28:58.930

我的解决方案是：

1）使用背景MOC作为父MOC，主MOC作为子MOC。作为奖励，我不需要保存主 MOC 来获得永久 ID。

```
[DC.backgroundMOC performBlock:^{
    // Add, save and update managed objects
    [DC saveContext]; // The changes is being pushed to the main context
}]; 
```

2) 使用 NSManagedObjectContextDidSaveNotification 使主 MOC 保持最新（主 MOC 正在更新 UI）

```
- (void) backgroundMOCSaved:(NSNotification*)notification {
    [mainMOC performBlock:^{
        [mainMOC mergeChangesFromContextDidSaveNotification:notification];
    }];
} 
```

# php - 在 PHP 中使用 bcmath 计算第 N 个根

> ID：11242920
> 
> 赞同：5
> 
> 时间：2012-06-28T10:43:43.620
> 
> 标签：php, bcmath

我们正在寻找 PHP 中的第 N 个根。我们需要对一个非常大的数字执行此操作，Windows 计算器返回 2。使用以下代码，我们得到 1。有人知道这是如何工作的吗？

```
echo bcpow(18446744073709551616, 1/64); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-28T11:25:00.343

好吧，似乎 PHP 和 BC 库有一些限制，在互联网上搜索后，我发现了这篇[有趣的文章/代码：](https://web.archive.org/web/20140418034945/http://www.osix.net/modules/article/?id=775)

所以你应该使用这个功能：

```
<?php

function NRoot($num, $n) { 
    if ($n<1) return 0; // we want positive exponents 
    if ($num<=0) return 0; // we want positive numbers 
    if ($num<2) return 1; // n-th root of 1 or 2 give 1 

    // g is our guess number 
    $g=2; 

    // while (g^n < num) g=g*2 
    while (bccomp(bcpow($g,$n),$num)==-1) { 
        $g=bcmul($g,"2"); 
    } 
    // if (g^n==num) num is a power of 2, we're lucky, end of job 
    if (bccomp(bcpow($g,$n),$num)==0) { 
        return $g; 
    } 

    // if we're here num wasn't a power of 2 :( 
    $og=$g; // og means original guess and here is our upper bound 
    $g=bcdiv($g,"2"); // g is set to be our lower bound 
    $step=bcdiv(bcsub($og,$g),"2"); // step is the half of upper bound - lower bound 
    $g=bcadd($g,$step); // we start at lower bound + step , basically in the middle of our interval 

    // while step!=1 

    while (bccomp($step,"1")==1) { 
        $guess=bcpow($g,$n); 
        $step=bcdiv($step,"2"); 
        $comp=bccomp($guess,$num); // compare our guess with real number 
        if ($comp==-1) { // if guess is lower we add the new step 
            $g=bcadd($g,$step); 
        } else if ($comp==1) { // if guess is higher we sub the new step 
            $g=bcsub($g,$step); 
        } else { // if guess is exactly the num we're done, we return the value 
            return $g; 
        } 
    } 

    // whatever happened, g is the closest guess we can make so return it 
    return $g; 
}

echo NRoot("18446744073709551616","64");

?> 
```

希望这有帮助...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-05-09T11:08:42.380

HamZa 的解决方案在任意精度下工作时遇到问题，所以我稍微采用了它。

```
<?php

function NthRoot($Base, $NthRoot, $Precision = 100) {
    if ($NthRoot <  1) return 0;
    if ($Base    <= 0) return 0;
    if ($Base    <  2) return 1;
    $retVal    = 0;
    $guess     = bcdiv($Base, 2, $Precision);
    $continue  = true;
    $step = bcdiv(bcsub($Base, $guess, $Precision), 2, $Precision);
    while ($continue) {
        $test = bccomp($Base, bcpow($guess, $NthRoot, $Precision), $Precision);
        if ($test == 0) {
            $continue = false;
            $retVal   = $guess;
        }
        else if ($test > 0) {
            $step  = bcdiv($step, 2, $Precision);
            $guess = bcadd($guess, $step, $Precision);
        }
        else if ($test < 0) {
            $guess = bcsub($guess, $step, $Precision);
        }
        if (bccomp($step, 0, $Precision) == 0) {
            $continue = false;
            $retVal   = $guess;
        }
    }
    return $retVal;
} 
```

# php - PHP OAUTH 类 api

> ID：11242922
> 
> 赞同：0
> 
> 时间：2012-06-28T10:43:59.210
> 
> 标签：php, api, authentication, oauth

我在 PHP.net 中使用 OAuth::fetch() 示例（[输出代码](http://php.net/manual/en/oauth.fetch.php)。我使用的 cod 是

```
<?PHP
try{
$oauth = new OAuth("consumer_key","consumer_secret",OAUTH_SIG_METHOD_HMACSHA1,OAUTH_AUTH_TYPE_AUTHORIZATION);
$oauth->setToken("access_token","access_token_secret");

$oauth->fetch("http://photos.example.net/photo?file=vacation.jpg");

$response_info = $oauth->getLastResponseInfo();
header("Content-Type: {$response_info["content_type"]}");
echo $oauth->getLastResponse();
} catch(OAuthException $E) {
 echo "Exception caught!\n";
}?> 
```

错误消息是

致命错误：在第 3 行的 C:\wamp\www\Jesvin\MyTest1\test1.php 中找不到类 'OAuth'

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T10:55:05.783

您没有可用的 OAuth 类。它是一个 php 扩展而不是核心包的一部分，您需要手动将其安装到 wamp 中。首先要做的是检查扩展是否可用但未加载。

您的 php 扩展库将类似于 /path/to/wamp/ **php/ext**（我不使用 wamp，因此您必须在 Google 上搜索您的路径或在您的文件系统中查找自己）。

如果你看到一个 oauth 扩展，你可以跳过安装 oauth，如果你不需要，你需要一个预编译的 dll，看这里：http: [//downloads.php.net/pierre/](http://downloads.php.net/pierre/)并搜索“oauth”，有 2 （不确定你应该使用哪一个，所以选择一个，如果它不起作用，试试另一个）。

下载它并将 dll 与其他 php 扩展一起粘贴到您的扩展目录中。

然后找到您的 php.ini 文件（您可以使用文件`<?php phpinfo; ?>`并将其加载到浏览器中以查看 php.ini 的位置）。查找定义扩展名的位置并取消注释或将此行添加到您的 php.ini 文件

`extension=php_oauth.dll`

确保上面代码中的 dll 名称与您下载并安装到扩展文件夹中的名称相同。还要确保此行的开头没有分号**。**

那应该差不多了。希望 php 能很好地加载 DLL 并且它会工作。使用预编译的 dll 并不总是有效，但在这种情况下，它有望工作。

# java - 如何使用 JMockit 模拟 spring 注入的类

> ID：11242923
> 
> 赞同：6
> 
> 时间：2012-06-28T10:44:05.103
> 
> 标签：java, spring, junit, mocking, jmockit

我的代码：

```
class A extends X {
    @Autowired
    B b;

    @Override
    method() {
        //do something
        b.callMethodInB;
        //do something
    }

}

class B extends X {
    @Autowired
    C c;

    @Override
    method() {
        //do something
        c.callMethodInC;
       //do something
    }

} 
```

我需要`method()`在`A`. 那么如何模拟`B`. 我正在使用 Junit4 和 Jmockit。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-02T14:08:31.853

尝试这样的事情：

```
import org.junit.*;
import mockit.*;

public class ATest
{
    @Tested A a;
    @Injectable B b;

    @Test
    public void testMethod()
    {
        a.method();

        new Verifications() {{ b.callMethodInB(); }};
    }
} 
```

JMockit 自动`A`使用注入的`B`实例（来自模拟字段`b`）进行实例化，并将其设置为`a`测试类中的字段。这与使用的 DI 框架（Spring）无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T10:59:12.040

由于 Mocking Frameworks 通常依赖于 DI（依赖注入），这基本上意味着您需要在方法签名中传输模拟对象，我不确定这是否可能。

但是看看[这里](https://bitbucket.org/kubek2k/springockito/wiki/Home)，它可能会给你一个关于如何做的方向。

# javascript - 如何将日期从 oData 转换为 JavaScript 中的日期？

> ID：11242924
> 
> 赞同：1
> 
> 时间：2012-06-28T10:44:06.433
> 
> 标签：javascript, jquery, odata

我有一个基于 WCF 数据服务的 oDate 源。当我浏览它时，我会看到如下日期：

```
<d:SignedUp m:type="Edm.DateTime">2001-01-01T00:00:00</d:SignedUp> 
```

当我使用 jQuery 和 JSONP 检索这些数据并提醒日期时，我看到：

```
/Date(978307200000)/ 
```

我需要将此值转换回 Date 对象，然后我可以根据需要对其进行格式化，但我不知道如何执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T10:54:41.900

使用类似以下函数将您的 Json 日期转换为数据对象：

```
function parseJsonDate(jsonDate) {
  var offset = new Date().getTimezoneOffset();
  var parts = /\/Date\((-?\d+)([+-]\d{2})?(\d{2})?.*/.exec(jsonDate);

  if (parts[2] == undefined)
      parts[2] = 0;

  if (parts[3] == undefined)
      parts[3] = 0;

  return new Date(+parts[1] + offset + parts[2] * 3600000 + parts[3] * 60000);
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T11:44:42.033

您还可以将您的服务更新为 OData V3 (WCF Data Services 5.0)，并从客户端请求 JSON 为 V3（MinDataServiceVersion 标头设置为 3.0）。在 V3 Verbose JSON 中，日期时间格式已从 /Date(...)/ 更改为大多数 jscript 库应该能够正常读取的典型 XSD 格式。

# iphone - 我在哪里下载 iPhone 应用程序所需的初始数据？

> ID：11242929
> 
> 赞同：0
> 
> 时间：2012-06-28T10:44:16.790
> 
> 标签：iphone, soap, xcode4

我有一个应用程序，我需要从网络服务中获取国家、语言等的列表，这在整个应用程序中都是必需的。所以，我必须调用大约 6 个 Web 服务 (SOAP)。我在哪里调用这些 Web 服务？它应该在后台运行吗？如果是这样，例如，如果解析尚未完成并且用户选择选择一个国家/地区，则不会填充数组。如果我在 appDelegate 中运行它并等到我得到列表，那么它可能需要时间。这个问题可能是愚蠢的或在任何地方重复。我真的需要知道什么是最好的方法。任何帮助都会救我！非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T10:45:55.790

您可以启动一个新线程来下载这些文件，然后在`didFinishLaunchingWithOptions`下载完成时保存它们以便以后使用，注意您必须启动一个新线程而不是使用当前线程

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T11:10:34.367

您可以在后台线程中下载数据，并在下载数据时显示和活动指示器。如果您在主线程中下载数据，则会导致 UI 挂起，并且应用程序将无响应，直到数据下载完成。您可以通过以下链接更好地了解它。

[在线程中下载数据](https://stackoverflow.com/questions/6965265/can-i-use-a-background-thread-to-parse-data/6965350#6965350)

# eclipse - Eclipse 包版本容差

> ID：11242934
> 
> 赞同：1
> 
> 时间：2012-06-28T10:44:32.907
> 
> 标签：eclipse, eclipse-plugin, osgi

我正在尝试使用第三方工具（即 IBM Installation Manager）将 Eclipse 产品安装到现有的 Eclipse 安装中，但它失败了，并出现了一些此类错误

> CRIMA1054E: 将捆绑包“org.eclipse.equinox.p2.repository.tools_2.0.1.R36x_v20100823”安装到此现有 Eclipse 安装中不满足现有捆绑包“org”的“[2.0.100,3.0.0)”版本容差.eclipse.pde.ui"

不幸的是，我无法透露受影响产品的任何细节，所以我想把它变成一个更笼统的问题。

在对 Eclipse 平台进行了一些研究之后，我的理解是它是 OSGi 规范的关键特性之一，应该能够将同一个包（≘ 插件？）的多个版本安装到同一个环境中。如果包*org.eclipse.pde.ui*已经存在，我假设它所需的*[...].p2.repository.tools*版本也已经可用。

**我的问题：**为什么将另一个版本的插件添加到环境中会是一个问题？我对 Eclipse 和 OSGi 有什么误解吗？

*附带问题*：版本*2.0.1.R36[...]*不应该在*[2.0.100,3.0.0)*内吗？不过，这并没有真正影响我的主要问题，因为我还有其他明显超出容忍范围的示例。

**一些初步的想法和理论**

1.  即使 Eclipse 允许插件的并行版本，一些插件仍然与它们自己的其他版本发生冲突。尽管如此，我还是希望出现更多错误，例如“[...].repository.tools_x 与现有捆绑包 org.eclipse.pde.ui 所需的 [...].repository.tools_y 不兼容”

2.  安装不会被 Eclipse 阻止，而是被 IBM Installation Manager 阻止。它可能会进行一些内部依赖检查，但懒得考虑并行捆绑版本安装。

再次关于该特定产品：不幸的是，该产品无法通过常规 Eclipse 软件安装机制获得。我还想避免手动将其放入我的 Eclipse 中，因为我依赖于定期更新，而这些更新仅通过 IBM Installation Manager 提供。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T11:15:35.137

任何提供 UI 的 Eclipse 插件都必须将单例指令设置为 true。这意味着框架中只能有一个具有该符号名称的包，有关更多信息，请参阅[http://wiki.osgi.org/wiki/Bundle-SymbolicName](http://wiki.osgi.org/wiki/Bundle-SymbolicName)。

我去检查了我的 Eclipse（3.8）版本中的 org.eclipse.equinox.p2.repository.tools 包，我可以看到它确实有 singleton=true。

您说：“2.0.1.R36[...] 在 [2.0.100,3.0.0) 内”

事实并非如此，因为 2.0.1 < 2.0.100。

# ruby-on-rails - 显示 created_at 时未定义方法“getlocal”？

> ID：11242935
> 
> 赞同：4
> 
> 时间：2012-06-28T10:44:36.333
> 
> 标签：ruby-on-rails, mongoid

我使用 rails 3.2.6、ruby 1.9.3 和 mongoid gem 3.0。

我想显示数据库条目的 created_at 字段，但出现以下错误：

```
undefined method `getlocal' for "Wed, 25 Apr 2012 15:04:37 -0400":String 
```

这是导轨代码：

```
<dt>Erstellt am:</dt><dd><%= @app.created_at %></dd> 
```

任何建议有什么问题？有错误修正吗？我认为应该工作吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T13:56:33.200

`getlocal`是**Time**类上的一个方法，所以可能是混合对象类型的问题。系统期望 是`@app.created_at`Time 的一个实例，**而不是 DateTime**。确保字段类型为`created_at`DateTime，并且在创建/更新此字段时，确保您放入的对象也是 DateTime 对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T19:02:11.190

尝试将以下内容添加到您的模型中

```
include Mongoid::Timestamps 
```

见[http://mongoid.org/en/mongoid/docs/extras.html#timestamps](http://mongoid.org/en/mongoid/docs/extras.html#timestamps)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-27T20:05:54.347

如果您使用 mongoid，而不是
`@app.created_at`
尝试
`@app[:created_at]`
这对我有用

# xml - 使用 xsl 创建站点地图/嵌套列表

> ID：11242936
> 
> 赞同：0
> 
> 时间：2012-06-28T10:44:37.913
> 
> 标签：xml, xslt

我有很长的 xml 元素列表。

每个元素都有一个 ID 和一个 PARENT_ID。

如何基于此制作站点地图/嵌套列表？具有 null 值的元素是最顶层的父元素。

我想在 HTML 中显示带有 UL 和 LI 的列表。

```
<ROOT>
<SITEMAP>
    <ARRAY>
        <ID>1</ID>
        <NAME>Test</NAME>
        <PARENT_ID>NULL</PARENT_ID>
    </ARRAY>
    <ARRAY>
        <ID>2</ID>
        <NAME>Test2</NAME>
        <PARENT_ID>3</PARENT_ID>
    </ARRAY>
    <ARRAY>
        <ID>3</ID>
        <NAME>Test3</NAME>
        <PARENT_ID>NULL</PARENT_ID>
    </ARRAY>
    <ARRAY>
        <ID>4</ID>
        <NAME>Test4</NAME>
        <PARENT_ID>1</PARENT_ID>
    </ARRAY>
    <ARRAY>
        <ID>5</ID>
        <NAME>Test5</NAME>
        <PARENT_ID>4</PARENT_ID>
    </ARRAY>
</SITEMAP> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T11:02:48.320

密钥模板将如下所示：

```
<xsl:template matches="ARRAY"> 
   <xsl:variable name="id" select="ID"/>
   <output>
      <!-- output goes here -->
      ...
      <!-- now process every ARRAY with a PARENT_ID equal to the current node's id. (I.e. its children.) -->
      <xsl:apply-templates select="/ROOT/SITEMAP/ARRAY[PARENT_ID = $id]"/>
   </output>
</xsl:template> 
```

然后你开始：

```
<xsl:template matches="/">
   <xsl:apply-templates select="/ROOT/SITEMAP/ARRAY[PARENT_ID = 'NULL']"/>
</xsl:template> 
```

请注意，如果您的层次结构中有任何循环，则此转换将无限运行。

# c++ - 从函数返回结构

> ID：11242938
> 
> 赞同：-3
> 
> 时间：2012-06-28T10:44:56.100
> 
> 标签：c++

嗨，我的程序中有这两条代码：

```
PIMAGE_IMPORT_DESCRIPTOR PE::GetImportedLibInfo(LPSTR libName )
{
    PIMAGE_DOS_HEADER doshdr = (PIMAGE_DOS_HEADER)EntryPoint;
    PIMAGE_NT_HEADERS nthdr = (PIMAGE_NT_HEADERS)((DWORD)doshdr + doshdr->e_lfanew);
    DWORD tmp =nthdr->OptionalHeader.DataDirectory[IMAGE_DIRECTORY_ENTRY_IMPORT].VirtualAddress;
    DWORD Rva = RvaToOffset((DWORD)tmp);
    if(Rva != -1)
    {
        Rva += EntryPoint; 
        PIMAGE_IMPORT_DESCRIPTOR iid =(PIMAGE_IMPORT_DESCRIPTOR)(DWORD)Rva;

        while(iid->Characteristics)
        {
            char* dll = (char*)((DWORD_PTR)RvaToOffset(iid->Name)+ EntryPoint);
            DWORD res=lstrcmp((LPCSTR)dll,(LPCSTR)libName);
            if(res == 0)
            {
                return iid;
            }
            iid ++;
        }
    }
    return NULL;
}

VOID FillLibInfo(PIMAGE_IMPORT_DESCRIPTOR iiD)
{
    if(iiD != NULL)
    {
        char* buff[20];
        wsprintf((LPSTR)&buff,"%08lX",(DWORD)iiD->OriginalFirstThunk);
        SetDlgItemText(hImpDlg,IDC_EDIT1,(LPCSTR)&buff);
        wsprintf((LPSTR)&buff,"%08lX",(DWORD)iiD->TimeDateStamp);
        SetDlgItemText(hImpDlg,IDC_EDIT2,(LPCSTR)&buff);
        wsprintf((LPSTR)&buff,"%08lX",(DWORD)iiD->ForwarderChain);
        SetDlgItemText(hImpDlg,IDC_EDIT3,(LPCSTR)&buff);
        wsprintf((LPSTR)&buff,"%08lX",(DWORD)iiD->FirstThunk);
        SetDlgItemText(hImpDlg,IDC_EDIT4,(LPCSTR)&buff);
    }
} 
```

然后我这样使用它：

```
FillLibInfo(GetImportedLibInfo("MyLibName")); 
```

附加的是我的文本框在我通过鼠标悬停它们之前不会实现文本

在几次调用`GetImportedLibInfo()`程序崩溃之后。我认为这是堆栈损坏的东西......

有人可以给我一个提示吗？

@编辑：

PE类定义：

```
class PE
{
private:
DWORD ptrImgDosHeader;
DWORD RvaToOffset(DWORD Rva);
DWORD RvaToMemory(DWORD Rva);

public:
DWORD EntryPoint;
PE(DWORD ptrMemory);
~PE();
VOID EnumSections(BOOL (*ptrCallBack)(PIMAGE_SECTION_HEADER));
VOID EnumImports(BOOL (*ptrCallBack)(LPSTR,DWORD),DWORD);
VOID EnumImportedFunctionsFromLib(LPSTR,BOOL (*ptrCallBack)(LPSTR,LPSTR));
VOID EnumExportedFunctions(BOOL (*ptrCallBack)(LPSTR,LPSTR,LPSTR));
WORD GetPeType();
DWORD ValidatePE();
DWORD ValidateNtHeader();
PIMAGE_IMPORT_DESCRIPTOR GetImportedLibInfo(LPSTR lib);
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T10:52:46.237

您正在将字符串写入 char 指针数组，而不是 char 数组，因此您正在写入一些随机指针（无论未初始化数组的第一个元素指向什么，这将是未分配的内存）。

尝试使用`char buff[20]`代替`char* buff[20]`，然后使用`wsprintf( buff, ... )`和`SetDlgItemText( ..., buff )`。

# javascript - 如何获取本地时间，而不是服务器时间？

> ID：11242942
> 
> 赞同：0
> 
> 时间：2012-06-28T10:45:04.660
> 
> 标签：javascript, asp.net, vb.net, nodatime

无论服务器时间设置是否正确，我都使用这些代码行来找出印度古吉拉特邦的当地时间。但我注意到这不起作用。此行生成 SERVER TIME，但不生成 LOCAL TIME。如果服务器时间意外更改，则会导致问题。

在世界上任何国家/地区获得 LOCAL TIME 的确切解决方案是什么？

```
Dim zoneId As String = "Indian Standard Time"
Dim tzi As TimeZoneInfo = TimeZoneInfo.FindSystemTimeZoneById(zoneId)
Dim result As DateTime = TimeZoneInfo.ConvertTimeFromUtc(DateTime.UtcNow, tzi) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T12:09:28.260

您可能想看看 Noda，它是 Joda 的一个 .net 端口，一个用于处理日期的开源项目。这已由 Stack Overflows、Jon Skeet 移植。

几个链接可能会有所帮助。

[http://www.codeproject.com/Articles/78213/Noda-DateTime-Extensions-for-NET](http://www.codeproject.com/Articles/78213/Noda-DateTime-Extensions-for-NET)

[在此处输入链接描述](http://code.google.com/p/noda-time/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T10:51:24.467

无论服务器定义的时间如何，您想要的是正确的本地时间。

首先，服务器应该配置正确的日期/时间。如果您不能信任它，我认为您必须依靠第三方提供商提供的服务来告诉您正确的时间。

另一个问题建议您可以连接到的服务：[Web 服务 - 城市的当前时区？](https://stackoverflow.com/questions/55901/web-service-current-time-zone-for-a-city)

如果你想要的是客户端的时间，你必须通过 Javascript 获取它并发送到服务器端。

祝你好运！

# c# - 禁用/刷新 OleDbConnection 缓存

> ID：11242945
> 
> 赞同：9
> 
> 时间：2012-06-28T10:45:19.830
> 
> 标签：c#, caching, oledb, jet, oledbconnection

我一直在`OleDbConnection`努力争取让它不缓存。基本上我正在访问一个共享 Access 数据库，该数据库正在从另一个应用程序写入，然后我正在读回值（检查它是否通过 Last Write time 和随后的 1 秒延迟刷新）。

不幸的是，这完全不可靠。

我一直在阅读（并且发疯）如何禁用连接池，并且随后在每次可能的更新之后，在重新连接之前执行以下操作：

```
_connection.Close();
_connection.Dispose();
_connection = null;
OleDbConnection.ReleaseObjectPool();
GC.Collect(); 
```

除此之外，连接字符串使用 禁用连接池`OLE DB Services = -2`。最后，我还在`PageTimeout`Jet 4.0 的注册表中更改为“10”。

不幸的是，所有这些措施都没有效果。现在我唯一能想到的就是[这篇 Microsoft 知识库文章](http://support.microsoft.com/kb/200300)中提到的内容，然后调用`JRO.JetEngine.RefreshCache`. 唯一的问题是它的论点是一个`ADODB.Connection`. 我宁愿不重写我的整个数据库层以及我的软件正在读取记录以使用旧 COM 对象只是为了拥有此功能，但它似乎很可能是唯一的方法。

我的问题是，虽然目前正在进行重写以使用 ADODB（甚至不是 ADO.NET！）的任务，是否可以禁用缓存`OleDbConnection`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-01-08T04:28:45.817

最后，我找到了一个解决方法：使用 OdbcConnection 而不是 OleDbConnection。

这是旧代码：

```
string mdbConnectionString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + mdbFile + ";OLE DB Services=-2";
using (OleDbConnection conn = new OleDbConnection(mdbConnectionString)) {
    conn.Open();
    //Do your query
} 
```

这是新的：

```
string mdbConnectionString = "Driver={Microsoft Access Driver (*.mdb, *.accdb)};Dbq=" + mdbFile;
using (OdbcConnection conn = new OdbcConnection(mdbConnectionString)) {
    conn.Open();
    //Do your query
} 
```

一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-07T14:28:02.090

您可能有一些运气将“;Jet OLEDB:Flush Transaction Timeout”属性设置为 0 或某个较低的数字。

[请参阅文档](https://docs.microsoft.com/en-us/sql/ado/guide/appendixes/microsoft-ole-db-provider-for-microsoft-jet?view=sql-server-2017)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-27T04:58:32.173

### 32 位应用程序

在 32 位 C# 应用程序中，多年来我一直在这样做以刷新缓存：

```
public static void RefreshDatabaseCache(
    string connectionString)
{
    // The type of the ADODB connection. Used for dynamically creating.
    var adodbType = Type.GetTypeFromProgID(@"ADODB.Connection");

    // The main ADODB connection object.
    var adodbInstance = Activator.CreateInstance(adodbType);

    // --

    // Open the connection.
    adodbType.InvokeMember(
        @"Open",
        BindingFlags.InvokeMethod,
        null,
        adodbInstance,
        new object[]
        {
            connectionString,
            string.Empty,
            string.Empty,
            0
        });

    try
    {
        // The type of the JET engine. Used for dynamically creating.
        var jroType = Type.GetTypeFromProgID(@"JRO.JetEngine");

        // The main JET engine object.
        var jroInstance = Activator.CreateInstance(jroType);

        // Refresh the cache.
        jroType.InvokeMember(
            @"RefreshCache",
            BindingFlags.InvokeMethod,
            null,
            jroInstance,
            new[]
            {
                adodbInstance
            });
    }
    finally
    {
        // Close the connection.
        adodbType.InvokeMember(
            @"Close",
            BindingFlags.InvokeMethod,
            null,
            adodbInstance,
            new object[]
            {
            });
    }
} 
```

我在我的整个应用程序中使用 OleDB，就在上面的函数中，我正在使用这个“ADODB”的东西。

### 64 位应用程序

在 64 位 C# 应用程序中，我目前不知道*这样*做的方法。

# android - android绘制图像

> ID：11242948
> 
> 赞同：0
> 
> 时间：2012-06-28T10:45:42.597
> 
> 标签：android, android-layout, android-emulator, android-canvas

我正在创建一个绘画应用程序，但我无法在图像上绘制/绘画任何东西，请帮助我：

```
public class DrawingSurface extends SurfaceView implements SurfaceHolder.Callback {
    private Boolean _run;
    protected DrawThread thread;
    private Bitmap mBitmap;
    public boolean isDrawing = true;
    public DrawingPath previewPath;

    private CommandManager commandManager;

    public DrawingSurface(Context context, AttributeSet attrs) {
        super(context, attrs);

        getHolder().addCallback(this);

        commandManager = new CommandManager();
        thread = new DrawThread(getHolder());
    }

    private Handler previewDoneHandler = new Handler(){
        @Override
        public void handleMessage(Message msg) {
            isDrawing = false;
        }
    };

    class DrawThread extends  Thread{
        private SurfaceHolder mSurfaceHolder;

        public DrawThread(SurfaceHolder surfaceHolder){
            mSurfaceHolder = surfaceHolder;

        }

        public void setRunning(boolean run) {
            _run = run;
        }

        @Override
        public void run() {
            Canvas canvas = null;
            while (_run){
                if(isDrawing == true){
                    try{
                        canvas = mSurfaceHolder.lockCanvas(null);
                        if(mBitmap == null){
                          //  mBitmap =  Bitmap.createBitmap (1, 1, Bitmap.Config.ARGB_8888);
                             mBitmap=BitmapFactory.decodeResource(getResources(),R.drawable.splashscreen);

                        }
                //       final Canvas c = new Canvas (mBitmap);
                        mBitmap=BitmapFactory.decodeResource(getResources(),R.drawable.splashscreen);

                   //     c.drawColor(0, PorterDuff.Mode.CLEAR);
                       canvas.drawColor(0, PorterDuff.Mode.CLEAR);

                     //   commandManager.executeAll(c,previewDoneHandler);
                     //   previewPath.draw(c);

                        canvas.drawBitmap (mBitmap, 0,  0,null);
                    } finally {
                        mSurfaceHolder.unlockCanvasAndPost(canvas);
                    }

                }

            }

        }
    }

    public void addDrawingPath (DrawingPath drawingPath){
        commandManager.addCommand(drawingPath);
    }
   // Bitmap mBitmap = Bitmap.createScaledBitmap(Bitmap src, int dstWidth, int dstHeight, boolean filter);

    public boolean hasMoreRedo(){
        return commandManager.hasMoreRedo();
    }

    public void redo(){
        isDrawing = true;
        commandManager.redo();

    }

    public void undo(){
        isDrawing = true;
        commandManager.undo();
    }

    public boolean hasMoreUndo(){
        return commandManager.hasMoreUndo();
    }

    public Bitmap getBitmap(){
        return mBitmap;
    }

    public void surfaceChanged(SurfaceHolder holder, int format, int width,  int height) {
        // TODO Auto-generated method stub
        mBitmap =  Bitmap.createBitmap (width, height, Bitmap.Config.ARGB_8888);;
    }

    public void surfaceCreated(SurfaceHolder holder) {
        // TODO Auto-generated method stub
        thread.setRunning(true);
        thread.start();
    }

    public void surfaceDestroyed(SurfaceHolder holder) {
        // TODO Auto-generated method stub
        boolean retry = true;
        thread.setRunning(false);
        while (retry) {
            try {
                thread.join();
                retry = false;
            } catch (InterruptedException e) {
                // we will try it again and again...
            }
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T11:25:00.060

为什么不让自己更轻松，将您的应用程序拆分为多个表面视图。使用 framelayout 以便您可以控制视图的顺序。我假设您希望能够处理触摸事件（它是一个绘画程序，对吗？），因此在一个视图中处理这些事件并在另一个视图中处理您的绘图，这样代码将更易于管理。创建两个自定义表面视图（在我的例子中，一个是 GLSurfaceView，另一个是 SurfaceView）。一个视图实现图像，第二个视图可以处理带有图形和/或按钮的 GUI。关键是在 XML 中创建一个自定义 GLSurfaceView（或者在您的情况下是两个 Surfaceview），它使用扩展的 SurfaceView 的类名。此外，您必须使 GUI 视图透明。因此，调用绘图类并处理触摸事件的 Surface 视图将具有如下代码：

```
public class MainSurfaceView extends GLSurfaceView
//Constructor
public MainSurfaceView(Context context, AttributeSet attrs) {       
    super(context, attrs);
    Log.d(TAG, "Constructor called...");
    this.context = context;

    mRenderer = new MainRenderer();
    setEGLConfigChooser(8, 8, 8, 8, 16, 0); 

    setRenderer(mRenderer);
    getHolder().setFormat(PixelFormat.TRANSLUCENT);    

    setZOrderOnTop(true);

    //Render only when there is a change
    setRenderMode(GLSurfaceView.RENDERMODE_WHEN_DIRTY);         
}

//TouchEvent handler
@Override
public boolean onTouchEvent(MotionEvent event) {
    Log.d(TAG, "onTouchEvent called...");
    x = event.getX();
    y = event.getY();

    switch (event.getAction()) {
    case MotionEvent.ACTION_MOVE:

        float dx = x - mPreviousX;
        float dy = y - mPreviousY;

        //Reverse direction of rotation if above midline
        if (y > getHeight() / 2) {
            dx = dx * -1;
        }

        //Reverse direction of rotation if of the midline
        if (y < getWidth() / 2) {
            dy = dy * -1;
        }

        Main.mAngle += (dx + dy) * TOUCH_SCALE_FACTOR;

        TextView txtView = (TextView) ((Activity)context).findViewById(R.id.mangle);
        txtView.setText("Angle: " + String.valueOf(Main.mAngle));

        requestRender();
    }

    mPreviousX = x;
    mPreviousY = y;

    return true;
} 
```

将您要绘制的图像放在单独的表面视图上（这也将使更改图像更容易）。所以你的 Activity 类会有这样的代码（注意我的第二个视图是 GLsurfaceview）：

```
 public class Main extends Activity {
 @Override
public void onCreate(Bundle savedInstanceState) {
    Log.d(TAG, "onCreate called...");
    Log.d(TAG, "state is: " + state.toString());
    super.onCreate(savedInstanceState);

    // When working with the camera, it's useful to stick to one orientation.
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);

    //Set full screen
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);

    setContentView(R.layout.main);

    //Substantiate surfaces
    cameraView = (CameraView) findViewById(R.id.camera);
    mGLView = (MainSurfaceView) findViewById(R.id.glSurfaceView);        

    //Initialize TextViews
    txtView = (TextView) findViewById(R.id.mangle);
    txtView.setText("Angle: " + String.valueOf(mAngle)); 

    }
} 
```

希望对您有所帮助...

# wcf - wcf tcp: 错误 10061

> ID：11242949
> 
> 赞同：0
> 
> 时间：2012-06-28T10:45:49.503
> 
> 标签：wcf, tcp

我有一项服务，其中包含两个要与 tcp 绑定一起使用的合同。服务配置文件是这样的：

```
<system.serviceModel>
    <bindings>
      <netTcpBinding>
        <binding name="ServiceDocumentos" transferMode="Streamed"
                 maxBufferSize="67108864"
                      maxReceivedMessageSize="67108864" maxBufferPoolSize="67108864"
                   closeTimeout="00:00:10"
                       openTimeout="00:00:10" receiveTimeout="00:20:00"
                       sendTimeout="00:01:00" maxConnections="100"/>
        <binding name="ServiceCore" transferMode="Buffered"
                 maxBufferSize="67108864"
                      maxReceivedMessageSize="67108864" maxBufferPoolSize="67108864"
                   closeTimeout="00:00:10"
                       openTimeout="00:00:10" receiveTimeout="00:20:00"
                       sendTimeout="00:01:00" maxConnections="100"/>
      </netTcpBinding>

      <basicHttpBinding>
        <binding name="ServiceDocumentos" messageEncoding="Mtom" transferMode="Streamed"  />
        <binding name="ServiceCore" messageEncoding="Mtom" transferMode="Buffered" />
      </basicHttpBinding>

      <wsDualHttpBinding>
        <binding name="ServiceDocumentos" messageEncoding="Mtom"/>
        <binding name="ServiceCore" messageEncoding="Mtom"/>
      </wsDualHttpBinding>
    </bindings>

    <services>
      <service behaviorConfiguration="CMMSService" name="GTS.CMMS.Service.Service">
        <endpoint binding="netTcpBinding" bindingConfiguration="ServiceDocumentos"
                 name="ServiceDocumentos" contract="GTS.CMMS.Service.IServiceDocumentos"
         address="ServiceDocumentos/">
          <identity>
            <dns value="localhost" />
          </identity>
        </endpoint>

        <endpoint address ="net.tcp://localhost:6000/CMMSService/ServiceCore/"
                 binding="netTcpBinding" bindingConfiguration="ServiceCore"
                 name="ServiceCore" contract="GTS.CMMS.Service.IService">
          <identity>
            <dns value="localhost" />
          </identity>
        </endpoint>

        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"
                 listenUriMode="Explicit">
        </endpoint>

        <host>
          <baseAddresses>
            <add baseAddress="http://localhost:8500/CMMSService" />
            <add baseAddress="net.tcp://localhost:8501/CMMSService" />
          </baseAddresses>
        </host>

      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="CMMSService">
          <serviceMetadata httpGetEnabled="True"/>
          <serviceDebug includeExceptionDetailInFaults="True" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel> 
```

客户端配置文件为：

```
<system.serviceModel>
    <bindings>
      <netTcpBinding>
        <binding name="ServiceDocumentos" closeTimeout="00:01:00" openTimeout="00:01:00"
         receiveTimeout="00:10:00" sendTimeout="00:01:00" hostNameComparisonMode="StrongWildcard"
         maxBufferSize="3670016" maxBufferPoolSize="524288" maxReceivedMessageSize="3670016"
         transferMode="Streamed">
          <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="65536"
           maxBytesPerRead="4096" maxNameTableCharCount="16384" />
        </binding>
        <binding name="ServiceCore" closeTimeout="00:01:00" openTimeout="00:01:00"
         receiveTimeout="00:10:00" sendTimeout="00:01:00" hostNameComparisonMode="StrongWildcard"
         maxBufferSize="2097152" maxBufferPoolSize="524288" maxReceivedMessageSize="2097152"
         transferMode="Buffered">
          <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="65536"
           maxBytesPerRead="4096" maxNameTableCharCount="16384" />
          <security mode="None">
            <transport clientCredentialType="None" />
            <message clientCredentialType="UserName" algorithmSuite="Default" />
          </security>
        </binding>
      </netTcpBinding>

      <basicHttpBinding>
        <binding name="ServiceDocumentos" closeTimeout="00:01:00" openTimeout="00:01:00"
         receiveTimeout="00:10:00" sendTimeout="00:01:00" allowCookies="false"
         bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
         maxBufferSize="3670016" maxBufferPoolSize="524288" maxReceivedMessageSize="3670016"
         messageEncoding="Mtom" textEncoding="utf-8" transferMode="Streamed"
         useDefaultWebProxy="true">
          <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="65536"
           maxBytesPerRead="4096" maxNameTableCharCount="16384" />
        </binding>
        <binding name="ServiceCore" closeTimeout="00:01:00" openTimeout="00:01:00"
         receiveTimeout="00:10:00" sendTimeout="00:01:00" allowCookies="false"
         bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
         maxBufferSize="2097152" maxBufferPoolSize="524288" maxReceivedMessageSize="2097152"
         messageEncoding="Mtom" textEncoding="utf-8" transferMode="Buffered"
         useDefaultWebProxy="true">
          <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="65536"
           maxBytesPerRead="4096" maxNameTableCharCount="16384" />
          <security mode="None">
            <transport clientCredentialType="None" proxyCredentialType="None"
             realm="" />
            <message clientCredentialType="UserName" algorithmSuite="Default" />
          </security>
        </binding>
      </basicHttpBinding>

      <wsDualHttpBinding>
        <binding name="ServiceDocumentos" messageEncoding="Mtom"/>
        <binding name="ServiceCore" messageEncoding="Mtom"/>
      </wsDualHttpBinding>
    </bindings>

    <client>
      <!--<endpoint address="net.tcp://localhost:8501/CMMSService/ServiceDocumentos/"
       binding="netTcpBinding" bindingConfiguration="ServiceDocumentos"
       contract="IServiceDocumentos" name="ServiceDocumentos" />
      <endpoint address="net.tcp://localhost:8501/CMMSService/ServiceCore/"
       binding="netTcpBinding" bindingConfiguration="ServiceCore"
       contract="IService" name="ServiceCore" />-->

      <endpoint address="net.tcp://localhost:8501/CMMSService/ServiceDocumentos/"
       binding="netTcpBinding" bindingConfiguration="ServiceDocumentos"
       contract="IServiceDocumentos" name="ServiceDocumentos" />
      <endpoint address="net.tcp://localhost:6000/CMMSService/ServiceCore/"
       binding="netTcpBinding" bindingConfiguration="ServiceCore"
       contract="IService" name="ServiceCore" />
    </client>
  </system.serviceModel> 
```

我正在使用不同的绑定进行测试。例如，如果对于一个合同，IServiceDocumentos 我使用 tcp，而对于另一个合同，我使用 wsDualHttpBinding 的主合同，一切正常。我可以使用这两个合同。

如果我对这两个合约使用 tcp，那么我会收到错误 tcp 10061。

我尝试为每个合同使用单独的完整地址，因为我猜问题可能是使用相同的端口，但问题仍然存在。但是，如果我为每个端点使用一个完整的单独地址，那么如果我使用不同的绑定就可以了。

另外我尝试启动服务 tcp 端口共享（Windows XP 中的服务），但问题没有解决。

我尝试禁用防火墙，但这并不能解决问题。

谢谢。

编辑：

当我运行服务时，我使用以下命令：

```
netstat -ona || find "6000" 
```

我得到以下信息：

TCP 0.0.0.0:6000 0.0.0.0 监听 2690

所以我认为 por 已打开并正在聆听。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T11:11:44.700

我认为您以错误的方式定义了服务端点的收件人。只要启用端口共享，就不必为每个 tcp 地址使用不同的端口。这是通过使用任何 .NET 3.0 安装上可用的 Net.TCP 端口共享服务来实现的。默认情况下，该服务未启用，因此您必须自己启用它。有关如何启用 Net.TCP 端口共享服务，请查看以下链接：http: [//msdn.microsoft.com/en-us/library/ms733925.aspx](http://msdn.microsoft.com/en-us/library/ms733925.aspx)。

# asp.net-mvc-4 - Appharbor 实时部署构建

> ID：11242950
> 
> 赞同：0
> 
> 时间：2012-06-28T10:45:50.470
> 
> 标签：asp.net-mvc-4, msdeploy, appharbor

将最新版本部署到 AppHarbor 实时站点的最佳策略是什么，而用户在部署过程中不会看到任何错误。但是，当您部署新版本时，工作进程将始终重新启动。这里推荐的策略是什么。

StackOverflow 如何将构建或错误修复部署到实时站点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T12:36:41.807

如果您当前在使用 AppHarbor 部署新版本时遇到错误，请与我们联系以便我们查看。

工作人员重新启动不应导致错误，只是在部署后访问该站点的第一批用户会出现一些初始缓慢。我们还致力于热插拔，以便我们只有在工作人员全部热身并运行时才切换到新版本。

# sql - 从查询返回列名的表中选择特定列的数据

> ID：11242953
> 
> 赞同：3
> 
> 时间：2012-06-28T10:45:57.927
> 
> 标签：sql, oracle

我写了 2 个单独的查询

1)

```
 SELECT COLUMN_NAME
  FROM ALL_TAB_COLUMNS
 WHERE TABLE_NAME =
       (SELECT DISTINCT UT.TABLE_NAME
          FROM USER_TABLES UT
         WHERE UT.TABLE_NAME = 'MY_TABLE')
   AND COLUMN_NAME NOT IN ('AVOID_COLUMN') 
```

2)

```
 SELECT *
      FROM MY_TABLE MT
     WHERE MT.COL1 = '1' 
```

第一个查询返回除我要避免的列之外的所有列的名称。第二个返回表中所有列的数据。有没有办法合并这些查询，以便从第一个查询返回的第二个查询中只选择那些列的数据？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T10:56:27.420

您必须为此使用动态 SQL（顺便说一句，我摆脱了 USER_TABLES 查询的子选择 - 这是不必要的）：

```
var  cur refcursor
/
declare
  v_stmt varchar2(4000);
begin
  v_stmt := 'SELECT ';  
  for cur in (
    SELECT COLUMN_NAME
    FROM ALL_TAB_COLUMNS
    WHERE TABLE_NAME =
       'MY_TABLE'
    AND COLUMN_NAME NOT IN ('AVOID_COLUMN')
  ) 
  loop
    v_stmt := v_stmt || cur.column_name || ',';
  end loop;
  -- get rid of trailing ','
  v_stmt := regexp_replace(v_stmt, ',$', '');

  v_stmt := v_stmt || ' from my_table MT WHERE MT.COL1 = ''1''';
  dbms_output.put_line(v_stmt);
  open :cur for v_stmt;
end; 
```

# c# - 如何以 Explorer 的方式处理 WM_MOUSEHWHEEL？

> ID：11242956
> 
> 赞同：2
> 
> 时间：2012-06-28T10:46:23.463
> 
> 标签：c#, scroll, mousewheel

我有带滚轮的罗技 M705 鼠标，允许水平滚动。我已经在我的 C# 程序中成功地为这个按钮事件实现了一个处理程序（按照[这里](http://www.philosophicalgeek.com/2007/07/27/mouse-tilt-wheel-horizontal-scrolling-in-c/)的描述实现），但到目前为止我只能让它滚动*一次*。*在资源管理器中，当我向右按下滚轮时，它会不断*向右滚动，直到我松开滚轮。在我的程序中，它只滚动一步。在我松开并再次按下滚轮之前，看不到[WM_MOUSEHWHEEL消息！](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645614%28v=vs.85%29.aspx)

**Q：**如何实现消息的*连续*水平滚动`WM_MOUSEHWHEEL`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T14:47:28.313

将此添加到所有控件（表单、子项等）：

```
protected override void WndProc(ref System.Windows.Forms.Message m)
{
    base.WndProc(ref m);

    const int WM_MOUSEHWHEEL = 0x020E;
    if (m.Msg == WM_MOUSEHWHEEL)
    {
        m.Result = new IntPtr(HIWORD(m.WParam) / WHEEL_DELTA);
    }
} 
```

关键是为所有可能处理消息的控件返回一个非零值！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T15:01:05.210

使用 IMessageFilter

```
 public partial class MyForm: Form, IMessageFilter
...
 public ImageForm(Image initialImage)
        {
            InitializeComponent();            
            Application.AddMessageFilter(this);
        }

/// <summary>
        /// Filters out a message before it is dispatched.
        /// </summary>
        /// <returns>
        /// true to filter the message and stop it from being dispatched; false to allow the message to continue to the next filter or control.
        /// </returns>
        /// <param name="m">The message to be dispatched. You cannot modify this message. </param><filterpriority>1</filterpriority>
        public bool PreFilterMessage( ref Message m )
        {
            if (m.Msg.IsWindowMessage(WindowsMessages.MOUSEWHEEL))  //if (m.Msg == 0x20a)
            {   // WM_MOUSEWHEEL, find the control at screen position m.LParam      
                var pos = new Point(m.LParam.ToInt32() & 0xffff, m.LParam.ToInt32() >> 16);
                var hWnd = WindowFromPoint(pos);
                if (hWnd != IntPtr.Zero && hWnd != m.HWnd && FromHandle(hWnd) != null)
                {
                    SendMessage(hWnd, m.Msg, m.WParam, m.LParam);
                    return true;
                }
            }

            return false;
        }

        [DllImport("user32.dll")]
        private static extern IntPtr WindowFromPoint(Point pt);

        [DllImport("user32.dll")]
        private static extern IntPtr SendMessage(IntPtr hWnd, int msg, IntPtr wp, IntPtr lp); 
```

也在表格结束时添加：

```
Application.RemoveMessageFilter(this); 
```

这将获取所有窗口消息（尽管此处仅捕获鼠标滚轮）-通过使用鼠标位置找到控件，然后您可以强制窗口将消息发送到该控件，即使它没有焦点。

注意：我使用了 WindowsMessages.MOUSEWHEEL，它来自一个枚举消息的类，只需替换

> ```
> if (m.Msg.IsWindowMessage(WindowsMessages.MOUSEWHEEL)) 
> ```

最后带有注释位

> `if (m.Msg == 0x20a)`

# c# - 使用本机代码时 Unity 崩溃

> ID：11242958
> 
> 赞同：1
> 
> 时间：2012-06-28T10:46:27.033
> 
> 标签：c#, objective-c, xcode, plugins, unity3d

所以我尝试在 Xcode 中统一交流 c# 代码和客观 c 代码。这是我的代码：

文本.h

```
extern "C" {
int textTotexture(int hello,int world);
} 
```

文本.mm

```
int textTotexture(int hello,int world){
NSString *myString =[[NSString alloc] init];
NSSize size = [myString sizeWithAttributes:0];
NSImage* newImage = [[NSImage alloc] initWithSize: size]; 
[newImage lockFocus]; 

/* if you have a second image you're going to overlay on top of the first, do the same except use NSCompositeSourceOver as the operation */
//NSRect myRect = NSMakeRect(0,0,size.width,size.height);

//[myString drawInRect:myRect withAttributes:0]; 
[newImage unlockFocus];
//NSData *imageData = [newImage TIFFRepresentation];
//NSBitmapImageRep *imageRep = [NSBitmapImageRep imageRepWithData:imageData];
//NSDictionary *imageProps = [NSDictionary dictionaryWithObject:[NSNumber numberWithFloat:1.0] forKey:NSImageCompressionFactor];
//imageData = [imageRep representationUsingType:NSPNGFileType properties:imageProps];
//int len = [imageData length];
//memcpy(data, [imageData bytes], len);
return hello+world;
} 
```

调用函数：

```
[DllImport("CubePlugin")]
public static extern int textTotexture(int s, int w);
Debug.Log(textTotexture(1,2)); 
```

调试日志返回 3 时，基本通信很好。但只要我添加功能代码，统一就会崩溃。我怀疑一些本机代码并没有运行到最后。

我刚刚发现当我添加锁定焦点并失去焦点时会出现问题。我应该怎么做才能避免这样做但实现我的目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T15:51:20.713

你如何处理你的类“文本”并不明显，但你可以试试这个：（我在没有编辑器的情况下写作，所以可能有错别字）

```
@implementation text
//.... 
-(int)textToTexture:(int)A andValue:(int)B
{
   int result = 0;
   // do stuff
   return result
}
@end

static text* myObject = nil;

extern "C"{
   int textToTexture(int a, int b)
  {
     if(myObject == nil)
         myObject = [[text alloc] init];

     return [myObject textToTexture:a andValue:b];
  }
} 
```

在你的 C# 文件中

```
[DllImport ("__Internal")]
public static extern int textTotexture(int a, int b); 
```

然后调用函数

# javascript - 动态添加时数据属性未以所需格式呈现，未转义双引号

> ID：11242962
> 
> 赞同：0
> 
> 时间：2012-06-28T10:46:53.293
> 
> 标签：javascript, jquery

我试图用一些数据属性动态添加一个 div 标签，但数据属性没有以正确的格式呈现。请在下面找到代码

```
$('<a href="#" id="opendialog2" data-role="button">Open Dialog2</a><div id="inlinecontent2" style="display:none" data-options="{"mode":"blank","headerText":"Yo","headerClose":true,"blankContent":true}"><ul data-role="listview"><li>Some</li><li>List</li><li>Items</li></ul><a rel="close" data-role="button" href="#">Close</a></div>').appendTo('#myDiv') 
```

div inlinecontent2 呈现为

```
<div mode":"blank","headertext":"yo","headerclose":true,"blankcontent":true}"="" data-options="{" style="display: none;" id="inlinecontent2"> 
```

数据选项属性呈现所有混乱

我希望得到它呈现如下

```
<div id="inlinecontent" style="display:none" data-options='{"mode":"blank","headerText":"Yo","headerClose":true,"blankContent":true}'> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T10:51:13.493

您需要转义引号：

```
$('<a href="#" id="opendialog2" data-role="button">Open Dialog2</a><div id="inlinecontent2" style="display:none" data-options="{\"mode\":\"blank\",\"headerText\":\"Yo\",\"headerClose\":true,\"blankContent\":true}"><ul data-role="listview"><li>Some</li><li>List</li><li>Items</li></ul><a rel="close" data-role="button" href="#">Close</a></div>').appendTo('#myDiv') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T11:37:25.500

您需要转义引号（不同）：

```
$('<a href="#" id="opendialog2" data-role="button">Open Dialog2</a><div id="inlinecontent2" style="display:none" data-options=\'{"mode":"blank","headerText":"Yo","headerClose":true,"blankContent":true}\'><ul data-role="listview"><li>Some</li><li>List</li><li>Items</li></ul><a rel="close" data-role="button" href="#">Close</a></div>').appendTo('#myDiv') 
```

# php - 在mysql中拆分字符串

> ID：11242966
> 
> 赞同：0
> 
> 时间：2012-06-28T10:47:06.713
> 
> 标签：php, mysql

好的，所以我已经查找了几种完成此操作的方法，但它们都不适合我，让我给你一些详细信息，说明为什么我尝试过的方法不起作用。

我已经尝试过`SUBSTRING_INDEX`，而且我们大多数人都知道它只会根据字符串中的定界符数量“拆分”，而且所有行的数量都不相同，所以这是不行的，我也尝试了这里找到的方法[http://blog.fedecarg.com/2009/02/22/mysql-split-string-function/](http://blog.fedecarg.com/2009/02/22/mysql-split-string-function/)

我再次相信它取决于您查询中的分隔符数量。

我已经搜索并搜索了一种方法来完成这项工作，但我只是找不到让它工作的方法。我仍然是 PHP 的新手，所以这可能是一个简单的修复，我只是以某种方式忽略了它，但我不确定。

这是我正在使用的；

这是sql查询

```
$sql = "SELECT * FROM offers WHERE type='$type' and country='$membercountry' LIMIT $start, $limit";
    $result = mysql_query($sql); 
```

`country`是具有我的逗号分隔字符串的列。有些行只是有类似的东西，`US`而其他行有`US,AU,CA,GB`

我需要拆分这些的原因是因为实际显示优惠的页面会检查用户国家/地区是否与优惠国家/地区匹配，并且当它作为一个完整的长字符串读取时显然会不匹配，这意味着这些优惠不会向用户显示。

我和我的一个朋友谈过，他说要使用`explode()`，但我很确定你不能`explode()`在 sql 查询中使用。

我知道我可能没有尽可能地解释这一点，我整晚都在做这个项目，所以我有点累。

另外作为说明，我知道我可以做到每个报价都有多行提供不同国家/地区的位置，但是其中一些报价允许所有国家/地区都这样做，这意味着对于 1 报价我会喜欢243 行，这会让我觉得我只是马虎！

如果有人可以推动我朝着正确的方向前进，我将不胜感激！

谢谢，凯西

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T10:55:34.927

有点奇怪/糟糕的数据设计：名为`country`. 除此之外，你也许可以用[`FIND_IN_SET()`](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_find-in-set).

```
mysql> SELECT * FROM offers WHERE FIND_IN_SET('CA', country); 
```

性能方面.. 这不会很好，但我希望您可以使用良好的索引在其他字段上进行选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T10:49:47.583

这样的事情可能会奏效：

```
$sql = "SELECT * FROM offers WHERE type='$type' and country LIKE '%$membercountry%' LIMIT $start, $limit"; 
```

# python - python搜索图片谷歌图片

> ID：11242967
> 
> 赞同：8
> 
> 时间：2012-06-28T10:47:12.063
> 
> 标签：python, image, search

我很难用 python 搜索谷歌图像搜索。我只需要使用标准 python 库（所以 urllib、urllib2、json、..）

有人可以帮忙吗？假设图像是 jpeg.jpg 并且在我运行 python 的同一个文件夹中。

我尝试了一百种不同的代码版本，使用标头、用户代理、base64 编码、不同的网址（images.google.com、[http ://images.google.com/searchbyimage?hl=en&biw=1060&bih=766&gbv=2&site =search&image_url=](http://images.google.com/searchbyimage?hl=en&biw=1060&bih=766&gbv=2&site=search&image_url=) {{URL 到你的图片}}&sa=X&ei=H6RaTtb5JcTeiALlmPi2CQ&ved=0CDsQ9Q8 等等....)

没有任何效果，它总是一个错误，404、401 或损坏的管道:(

请给我看一些python脚本，它实际上会用我自己的图像作为搜索数据搜索谷歌图像（'jpeg.jpg'存储在我的计算机/设备上）

谢谢谁能解决这个问题

戴夫：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T07:31:10.510

我在 Python 中使用以下代码搜索 Google 图片并将图片下载到我的计算机：

```
import os
import sys
import time
from urllib import FancyURLopener
import urllib2
import simplejson

# Define search term
searchTerm = "hello world"

# Replace spaces ' ' in search term for '%20' in order to comply with request
searchTerm = searchTerm.replace(' ','%20')

# Start FancyURLopener with defined version 
class MyOpener(FancyURLopener): 
    version = 'Mozilla/5.0 (Windows; U; Windows NT 5.1; it; rv:1.8.1.11) Gecko/20071127 Firefox/2.0.0.11'
myopener = MyOpener()

# Set count to 0
count= 0

for i in range(0,10):
    # Notice that the start changes for each iteration in order to request a new set of images for each loop
    url = ('https://ajax.googleapis.com/ajax/services/search/images?' + 'v=1.0&q='+searchTerm+'&start='+str(i*4)+'&userip=MyIP')
    print url
    request = urllib2.Request(url, None, {'Referer': 'testing'})
    response = urllib2.urlopen(request)

    # Get results using JSON
    results = simplejson.load(response)
    data = results['responseData']
    dataInfo = data['results']

    # Iterate for each result and get unescaped url
    for myUrl in dataInfo:
        count = count + 1
        print myUrl['unescapedUrl']

        myopener.retrieve(myUrl['unescapedUrl'],str(count)+'.jpg')

    # Sleep for one second to prevent IP blocking from Google
    time.sleep(1) 
```

您还可以[在此处](https://developers.google.com/image-search/v1/jsondevguide)找到非常有用的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-12T20:59:39.507

Google 图片搜索 API 已弃用，我们使用 google 搜索使用正则表达式和 Beautiful soup 下载图片

```
from bs4 import BeautifulSoup
import requests
import re
import urllib2
import os

def get_soup(url,header):
  return BeautifulSoup(urllib2.urlopen(urllib2.Request(url,headers=header)))

image_type = "Action"
# you can change the query for the image  here  
query = "Terminator 3 Movie"
query= query.split()
query='+'.join(query)
url="https://www.google.co.in/searches_sm=122&source=lnms&tbm=isch&sa=X&ei=4r_cVID3NYayoQTb4ICQBA&ved=0CAgQ_AUoAQ&biw=1242&bih=619&q="+query

print url
header = {'User-Agent': 'Mozilla/5.0'} 
soup = get_soup(url,header)

images = [a['src'] for a in soup.find_all("img", {"src": re.compile("gstatic.com")})]
#print images
for img in images:
  raw_img = urllib2.urlopen(img).read()
  #add the directory for your image here 
  DIR="C:\Users\hp\Pictures\\valentines\\"
  cntr = len([i for i in os.listdir(DIR) if image_type in i]) + 1
  print cntr
  f = open(DIR + image_type + "_"+ str(cntr)+".jpg", 'wb')
  f.write(raw_img)
  f.close() 
```

# c# - 如何从 DataGrid 列单元格中读取？

> ID：11242972
> 
> 赞同：0
> 
> 时间：2012-06-28T10:47:33.087
> 
> 标签：c#, asp.net, silverlight, xaml, datagrid

我现在把这个问题弄乱了大约 2 天，并在许多板上搜索了解决问题的解决方案:(

我在名为*"Betrag"*的 DataGrids 列中通过 linq XML Attributes 编写。

现在我想获取所有这些条目，然后将它们加起来为一个数字（该列的所有条目都是数字！）。

我希望有人可以帮助我解决这个问题。

最好的问候， 法比安

现在一些代码：

```
 data = new List<Daten>();
        data = (from datensatz in doc1.Descendants("datensatz")

                            select new Daten

                            {
                                //datum = "27.6.2012",
                                datum =datensatz.Attribute("datum").Value,
                                //zweck = "Eröffnung",
                                zweck =datensatz.Attribute("zweck").Value,
                                //empfang = benutzer,
                                empfang =datensatz.Attribute("empfang").Value,
                                //betrag = "0€"
                                betrag =datensatz.Attribute("betrag").Value + "€"

                            }).ToList();

                this.Daten.ItemsSource = data;
                //THIS CODE ADDS THE ATTRIBUTES TO MY GRID 
```

然后我尝试了这个：

```
kontostand += Convert.ToInt32(Daten.Columns[3].GetCellContent(1).ToString()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T13:26:35.027

为什么不只是做这样的事情......

```
var sum = data.Sum(item=>item.betrag);//you might have to parse as number. 
```

您可以将该值放在页面上的属性中，然后将数据绑定表达式放在要显示该值的任何位置。

我认为您应该避免尝试对单元格中的值求和。

另外，如果可能的话，我认为您应该将 betrag 属性设为整数。您始终可以通过在前面的代码中使用 String.Format 来添加符号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T10:59:08.630

这个 ：

```
kontostand += Convert.ToInt32(Daten.Columns[3].GetCellContent(1).ToString()); 
```

如果它是一个 asp 网格，应该是这样的：

```
kontostand += Convert.ToInt32(Daten.Rows.Cells[3].innerText); 
```

如果没有，那么您需要循环行。

# java - 错误 [org.jboss.msc.service.fail] MSC00001: 无法启动服务 jboss.deployment-mount-provider

> ID：11242973
> 
> 赞同：1
> 
> 时间：2012-06-28T10:47:39.783
> 
> 标签：java, eclipse, jboss7.x

我可以从命令行毫无问题地运行我的 Jboss 服务器，但通过 eclipse 我得到以下错误。在服务器详细信息中，我可以看到服务器“未连接”，并且在超时（450 秒）到期后停止尝试连接。

我需要能够通过 ecrise 启动 jboss，以便于部署过程并能够调试代码。

这是错误日志...

```
12:26:21,740 INFO  [org.jboss.modules] JBoss Modules version 1.1.1.GA
12:26:21,942 INFO  [org.jboss.msc] JBoss MSC version 1.0.2.GA
12:26:22,002 INFO  [org.jboss.as] JBAS015899: JBoss AS 7.1.1.Final "Brontes" starting
12:26:22,116 ERROR [org.jboss.msc.service.fail] MSC00001: Failed to start service jboss.deployment-mount-provider: org.jboss.msc.service.StartException in service jboss.deployment-mount-provider: JBAS015843: Failed to create temp file provider
    at org.jboss.as.server.deployment.DeploymentMountProvider$Factory$ServerDeploymentRepositoryImpl.start(DeploymentMountProvider.java:111) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) [rt.jar:1.6.0_23]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) [rt.jar:1.6.0_23]
    at java.lang.Thread.run(Thread.java:679) [rt.jar:1.6.0_23] 
```

有人可以帮忙解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-07-05T09:25:26.660

显示此错误，因为您可能没有该文件夹的适当权限。将用户切换到 root 用户并尝试运行“standalone.sh”命令。我想这会解决你的问题。否则更改您的用户的权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-12T13:23:34.707

该错误是由于没有足够的内存空间造成的。请检查您的 Jboss 的独立文件夹下的 tmp 文件夹。使用清除其内容

```
rm -rfv tmp/* 
```

然后重新启动您的 Jboss 服务器。

# php - AJAX JQUERY 相关：- 如何在 ajax 加载页面上调用 ajax

> ID：11242974
> 
> 赞同：1
> 
> 时间：2012-06-28T10:47:40.870
> 
> 标签：php, javascript, ajax, jquery

假设我通过 AJAX 调用搜索。现在我想在页面上调用另一个 AJAX 将由 AJAX 加载并且可以编辑。

```
<input type="button" id=sb value="Search Contacts" />

<input type="text" name="search" placeholder="search contacts" id="s1" style="display:none" />

<input type="text" id="b1" value="<?php echo $username ; ?>" style="display:none;float:left" /> 
```

我正在使用 AJAX 调用 php 文件。现在，我还想对通过 AJAX 加载的数据调用 AJAX。可能吗？

**或者**

我可以通过 AJAX 调用包含页面的 jquery (AJAX) 吗？那会奏效吗？

我正在通过 AJAX 创建搜索框及其从数据库中显示的结果，它以表格的形式提供给我。现在，我想将该表转换为实时表，单击时可以编辑该表并可以存储数据。

我知道如何创建实时表，但不知道如何同时调用搜索和实时表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T10:51:53.337

您需要使用 Jquery 委托将事件绑定到活动元素

```
$('body').delegate('#yourtableid','click /*or watever you want*/',function(){
//do stuff here (editing)
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T11:01:01.550

假设你有类似这种结构和 jQuery 1.7+ 的东西

```
<div id="resultContainer">
  <table>
    <tr>
      <!-- editable data -->
      <span>data</span>

      <!-- that turns into like this on click -->
      <form>
        <input type="text" value="data">
        <input type="submit" value="save"> 
```

在父页面上，您需要附加“委托处理程序”，它们是放置在父元素上的事件处理程序，为当前或将来的子元素执行。

因此，假设我们有一个容器 div id 为“resultContainer”，您可以在其中转储实时数据，我们将附加它的处理程序：

```
//attach a delegated submit handler on resultContainer for forms
$('#resultContainer').on('submit','form',function(event){
    //do what you want when an item is edited
    //"this" inside here is the DOM element form, which fired the submit
    //prevent the default submit action using event.preventDefault()
    //$(this).serialize() turns the form data into a serialized query string
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T11:04:09.620

我的应用程序的 PHP 页面在此实时搜索中应用了分页

```
<html>
<head>
<script type="text/javascript">
//====================================================================================================================
//============================================first call when page load=============================================
    function ajaxCall(n)
    {
        //alert("display ajacCall ");
        //alert("page no ::"+n);

        var ajaxRequest;
        try
        {
                ajaxRequest = new XMLHttpRequest();
        } 
        catch (e)
        {
                try
                {
                        ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP");
                } 
                catch (e) 
                {
                        try
                        {
                                ajaxRequest = new ActiveXObject("Microsoft.XMLHTTP");
                         } 
                    catch (e)
                    {
                            alert("Your browser broke!");
                            return false;
                    }
            }
        }
        ajaxRequest.onreadystatechange=function()
        {
                if(ajaxRequest.readyState==4)
                {
                        //alert("Response :: "+ajaxRequest.responseText);
                        document.getElementById("displayButton").innerHTML=ajaxRequest.responseText;
                        if(n!=0)
                        {
                            disp_Record(n);
                        }
                        else
                        {
                            disp_Record(0);
                        }
                }
        }

        var query="ajaxhendler.php?msg=select";
        //alert("Request ::" +query);
        ajaxRequest.open("POST",query,true);
        ajaxRequest.send();
    }
//================================================Display Recodr to button Press================================================
//================================================Display Record to Static Button===============================================
    function disp_Record(n)
    {   
        //alert("display record function");
        var ajaxRequest;
        try
        {
                ajaxRequest = new XMLHttpRequest();
        } 
        catch (e)
        {
                try
                {
                        ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP");
                } 
                catch (e) 
                {
                        try
                        {
                                ajaxRequest = new ActiveXObject("Microsoft.XMLHTTP");
                        } 
                    catch (e)
                    {
                            alert("Your browser broke!");
                            return false;
                    }
            }
        }
        ajaxRequest.onreadystatechange=function()
        {
                if(ajaxRequest.readyState==4)
                {
                        //alert("Response :: "+ajaxRequest.responseText);
                        document.getElementById("displayRecord").innerHTML=ajaxRequest.responseText;
                }
        }

        //alert("txt::"+ txt)
        var query="ajaxhendler.php?msg=selectRecordNo&no_of_record="+n;
        //alert("Request ::" +query);
        ajaxRequest.open("POST",query,true);
        ajaxRequest.send();
    }

//==============================================For Live search==============================================================
//===========================================For live search Display Button=================================================
    function callSearch(n,text)
    {   
        //alert("call Search First Function");
        var ajaxRequest;
        try
        {
                ajaxRequest = new XMLHttpRequest();
        } 
        catch (e)
        {
                try
                {
                        ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP");
                } 
                catch (e) 
                {
                        try
                        {
                                ajaxRequest = new ActiveXObject("Microsoft.XMLHTTP");
                        } 
                    catch (e)
                    {
                            alert("Your browser broke!");
                            return false;
                    }
            }
        }
        ajaxRequest.onreadystatechange=function()
        {
                if(ajaxRequest.readyState==4)
                {
                        //alert("Response :: "+ajaxRequest.responseText);
                        document.getElementById("displayButton").innerHTML=ajaxRequest.responseText;
                        if(n!=0)
                        {
                            disp_Record_live(n,text);
                        }
                        else
                        {
                            disp_Record_live(0,text);
                        }
                }
        }
        var txt=document.getElementById("txtsearch").value;
        //alert("txt::"+ txt)
        var query="ajaxhendler.php?msg=selectRecord&txt="+txt;
        //alert("Request ::" +query);
        ajaxRequest.open("POST",query,true);
        ajaxRequest.send();
    }

//====================================================================================================================
function disp_Record_live(n,text)
    {   
        //alert("Display Record live Second Function");
        var ajaxRequest;
        try
        {
                ajaxRequest = new XMLHttpRequest();
        } 
        catch (e)
        {
                try
                {
                        ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP");
                } 
                catch (e) 
                {
                        try
                        {
                                ajaxRequest = new ActiveXObject("Microsoft.XMLHTTP");
                        } 
                    catch (e)
                    {
                            alert("Your browser broke!");
                            return false;
                    }
            }
        }
        ajaxRequest.onreadystatechange=function()
        {
                if(ajaxRequest.readyState==4)
                {
                        //alert("Response :: "+ajaxRequest.responseText);
                        document.getElementById("displayRecord").innerHTML=ajaxRequest.responseText;
                }
        }

        var txt=document.getElementById("txtsearch").value;
        //alert("txt::"+ txt)
            var query="ajaxhendler.php?msg=select_Record_No_live&no_of_record_live="+n+"&findR="+txt;
        //alert("Request ::" +query);
        ajaxRequest.open("POST",query,true);
        ajaxRequest.send();
    }

</script>

</head>

<body onLoad="<?php if($_GET['txt']=="")
                    {
                        echo "ajaxCall(";
                        $n=0; if($_GET['page']!=null)
                            { 
                                echo $_GET['page']; 
                            }
                            else
                            { 
                                echo $n;
                            }
                        echo ")";
                    }
                    else
                    {
                        echo "callSearch(";
                        echo $_GET['page'].",'".$_GET['txt']."')";
                    } ?>" onUnload="msg()" bgcolor="#CCCCCC">
        <form>
 <table width="100%">

  <tr bgcolor="#CCFFCC">
                                <td  colspan="5"> 
                                       <font color="#CC6666">Search Record By Name</font><input type="text" name="txtsearch" id="txtsearch" value="<?php echo $_GET['txt'];?>" onKeyUp="callSearch(<?php
                                       $n=0; 
                                       if($_GET['page']!=null)
                                       { 
                                        echo $_GET['page'].",'".$_GET['txt']."'";
                                        }
                                        else
                                        { echo $n;}

                                        ?> )"/>
                                </td>
                                <td align="right">  
                                        <a href="insert.php">Insert Record</a>
                                </td>
                            </tr>
                </table>
                <table width="100%">
                             <tr>
                                    <td>
                                        <div id="displayRecord"></div>
                                    </td>
                            </tr>
                            <tr>
                                <td>
                                    <div id="displayButton">
                                    </div>
                                </td>
                            </tr>
                </table>

        </form>
</body>
</html> 
```

这是我的 Handlerpage.php

```
<?php
        $page_name = "http://localhost/desk.php";
        $msg=$_GET['msg'];
if($msg=='select')
        {

                load_pages($_GET['page']);
        }
        if($msg=="selectRecord")
        {
                live_search_pages();
        }
        if($msg=="selectRecordNo")
        {
            $n=$_GET['no_of_record'];
            disp_Record($n);
        }
        if($msg=="select_Record_No_live")
        {
            $n=$_GET['no_of_record_live'];
            live_search($n,$t);

        }

//==================================================================pages============================================
//=====================================================Static button================================================
function load_pages($page)
{
        $cn=mysql_connect("localhost","root","");
        mysql_select_db("per_info",$cn);
        $query="SELECT count(*) 'TR' from p_info";
        $rs = mysql_query($query);
        $rec = mysql_fetch_array($rs);
        $n=$rec['TR'];
        if($n>0)
        {
        $pages=ceil($n/3);

        $i=0;

        echo "<table align=\"center\"><tr><td align=\"right\" bgcolor=\"#666666\"><font color=\"#FFFFFF\">Pages : </td><td align=\"center\" bgcolor=\"#666666\">";
        while($i<$pages)
        {
                echo "<input type=\"button\" value=\"".($i+1).""; echo "\" onclick=\"disp_Record(".($i*3).")\" />";
                $i=$i+1;
        }
        echo "</td></tr></table>";
        }
        else
        {
            echo "No Record Found";
        }
}
//============================================Selected record Display By Button========================================
//==========================================Display Record for static Record==========================================
        function disp_Record($btn)
        {
                $cn=mysql_connect("localhost","root","");
                mysql_select_db("per_info",$cn);

                //$btn=1;

                    $query="SELECT u.p_id 'ID', u.p_name 'NAME', u.p_add 'ADDRESS', l1.loc_name 'CITY', l2.loc_name
                        'STATE',u.p_gen
                        'GENDER', u.p_photo 'PIC', u.p_phone 'PH'
                        FROM p_info u, tbl_state l1, tbl_state l2
                        WHERE u.p_city = l1.loc_id
                        AND l2.loc_id = l1.loc_parent ORDER BY u.p_id desc LIMIT ".$btn.", 3";

                    $rs = mysql_query($query);
                    echo "<table width=\"100%\" frame=\"hsides\" >
                            <th bgcolor=\"#666666\"><font color=\"#FFFFFF\">Name</font></th>
                                <th bgcolor=\"#666666\"><font color=\"#FFFFFF\">Address</font></th>
                                <th bgcolor=\"#666666\"><font color=\"#FFFFFF\">City</font></th>
                                <th bgcolor=\"#666666\"><font color=\"#FFFFFF\">State</font></th>
                                <th bgcolor=\"#666666\"><font color=\"#FFFFFF\">Gender</font></th>
                                <th bgcolor=\"#666666\"><font color=\"#FFFFFF\">Photo</font></th>
                                <th bgcolor=\"#666666\"><font color=\"#FFFFFF\">Phone No</font></th>
                                <th bgcolor=\"#666666\"></th>
                                <th bgcolor=\"#666666\"></th>";
                while($row=mysql_fetch_array($rs))
                {

                    echo "<tr>
                                <td>".$row['NAME']."</td>
                                <td>".$row['ADDRESS']."</td>
                                <td>".$row['CITY']."</td>
                                <td>".$row['STATE']."</td>
                                <td>";if($row['GENDER']=="1")
                                        {
                                                echo "Male";
                                        }
                                        else
                                        {
                                                echo "Female";
                                        }
                                echo "</td>
                                <td>
                                    <img src=\"".$row['PIC']."\" alt=\"Pulpit rock\" width=\"50\" height=\"50\" />      
                                </td>";
                                echo "<td>".$row['PH']."</td>
                                <td><input type=\"button\" value=\"Edit\" onclick=\"getid(".$row['ID'].",".$btn.",'')\"/></td>
                                <td><input type=\"button\" value=\"Delete\" onclick=\"callDelete(".$row['ID'].",".$btn.",'')\"/></td>
                          </tr>";

                }

        }

//==========================================================Live search By Button=====================================

function live_search_pages()
{
        $txt=$_GET['txt'];
        $cn=mysql_connect("localhost","root","");
        mysql_select_db("per_info",$cn);
        $query="SELECT count(*) 'TR' from p_info where p_name like '".$txt."%'";
        $rs = mysql_query($query);

        $rec = mysql_fetch_array($rs);
        $n=$rec['TR'];
        if($n>0)
        {
            $pages=ceil($n/3);

            $i=0;

            echo "<table align=\"center\"><tr><td align=\"right\" bgcolor=\"#666666\"><font color=\"#FFFFFF\">Pages : </td><td align=\"center\" bgcolor=\"#666666\">";
            while($i<$pages)
            {
                    echo "<input type=\"button\" value=\"".($i+1).""; echo "\" onclick=\"disp_Record_live(".($i*3).")\" />";
                    $i=$i+1;
            }
            echo "<td></tr></table>";
            }
        else
        {
            echo "No record Found";
        }
}
//================================================================Live search==========================================
        function live_search($btn,$text)
        {
                $txt=$_GET['findR'];
                $text=$_GET['text'];
                $cn=mysql_connect("localhost","root","");
                mysql_select_db("per_info",$cn);

                if($text==null)
                {

                $query="SELECT u.p_id 'ID', u.p_name 'NAME', u.p_add 'ADDRESS', l1.loc_name 'CITY', l2.loc_name 'STATE', u.p_gen 
                        'GENDER', u.p_photo 'PIC', u.p_phone 'PH'
                        FROM p_info u, tbl_state l1, tbl_state l2
                        WHERE u.p_city = l1.loc_id
                        AND l2.loc_id = l1.loc_parent
                        AND u.p_name LIKE '".$txt."%' ORDER BY u.p_id desc LIMIT ".$btn.", 3";
                }
                else
                {

                    $query="SELECT u.p_id 'ID', u.p_name 'NAME', u.p_add 'ADDRESS', l1.loc_name 'CITY', l2.loc_name 'STATE',u.p_gen
                        'GENDER', u.p_photo 'PIC', u.p_phone 'PH'
                        FROM p_info u, tbl_state l1, tbl_state l2
                        WHERE u.p_city = l1.loc_id
                        AND l2.loc_id = l1.loc_parent
                        AND u.p_name LIKE '".$text."%' ORDER BY u.p_id desc LIMIT ".$btn.", 3";
                }
                if($rs=mysql_query($query))
                {
                    echo "<table width=\"100%\" frame=\"hsides\">
                                <th bgcolor=\"#666666\"><font color=\"#FFFFFF\">Name</font></th>
                                    <th bgcolor=\"#666666\"><font color=\"#FFFFFF\">Address</font></th>
                                    <th bgcolor=\"#666666\"><font color=\"#FFFFFF\">City</font></th>
                                    <th bgcolor=\"#666666\"><font color=\"#FFFFFF\">State</font></th>
                                    <th bgcolor=\"#666666\"><font color=\"#FFFFFF\">Gender</font></th>
                                    <th bgcolor=\"#666666\"><font color=\"#FFFFFF\">Photo</font></th>
                                    <th bgcolor=\"#666666\"><font color=\"#FFFFFF\">Phone No</font></th>
                                    <th bgcolor=\"#666666\"></th>
                                    <th bgcolor=\"#666666\"></th>";
                    while($row=mysql_fetch_array($rs))
                    {
                            echo "<tr>
                                        <td>".$row['NAME']."</td>
                                        <td>".$row['ADDRESS']."</td>
                                        <td>".$row['CITY']."</td>
                                        <td>".$row['STATE']."</td>
                                        <td>";if($row['GENDER']=="1")
                                                {
                                                        echo "Male";
                                                }
                                                else
                                                {
                                                        echo "Female";
                                                }
                                        echo "</td>
                                        <td>
                                            <img src=\"".$row['PIC']."\" alt=\"Pulpit rock\" width=\"50\" height=\"50\" />      
                                        </td>";
                                        echo "<td>".$row['PH']."</td>
                                        <td><input type=\"button\" value=\"Edit\" onclick=\"getid(".$row['ID'].",".$btn.",'".$txt."')\"/></td>
                                        <td><input type=\"button\" value=\"Delete\" onclick=\"callDelete(".$row['ID'].",".$btn.",'".$txt."')\"/></td>
                                  </tr>";

                    }
                }
                else
                {
                    echo "error";
                }
        }
?> 
```

我希望它会帮助你

# javascript - 谷歌图表：柱形图、饼图不透明度

> ID：11242975
> 
> 赞同：1
> 
> 时间：2012-06-28T10:47:46.073
> 
> 标签：javascript, html, charts, google-visualization

根据上面的标题，是否可以设置图表的不透明度？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T11:03:00.603

只需设置包含图表的元素的不透明度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-22T06:01:47.700

背景颜色：'透明'，

即 var options = { title: '缺陷分类', is3D: true, 'width':600, 'height':300, backgroundColor: '#EFEFFB', //backgroundColor: 'transparent', };

# rest - 当 jersey 无法映射查询参数时，出现 404 失败，为什么会这样？

> ID：11242983
> 
> 赞同：5
> 
> 时间：2012-06-28T10:48:12.310
> 
> 标签：rest, jersey

我不是任何球衣大师，但我读到球衣无法根据查询参数解析 java 方法，但有时看起来确实如此，这是我的示例。

这是服务器代码：

```
@GET
@Path("/services")
public String getAll(
        @QueryParam("limit") Integer limit,
        @QueryParam("offset") Integer offset){
        return "1 2 3";
} 
```

这是客户端代码：

```
ClientResponse response = webResource
        .path("services")
        .queryParam("limit", "ab")
        .get(ClientResponse.class);
logger.info(response.toString());
assertEquals(response.getStatus(), 200); 
```

看起来球衣不喜欢“ab”并且无法映射查询参数，因此它返回 404，但是如果 limit =“1”，我可以找到正确的方法。

jersey 在这种情况下返回 404 是否正确？我知道我可以使用 String 而不是 Integer 来扩展接口以覆盖任何可行的 sintax 错误的所有处理。我可以配置 jersey 代表我执行此操作吗？

我正在使用服务器：grizzly/1.9.18，jersey 1.11

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T09:36:38.300

目前这在泽西岛是不可能的。也许我们可以想出一个功能来使它更友好。可以将诸如 @ErrorParam 注释之类的东西附加到参数上。如果存在此类参数并且某些 QueryParam 转换失败，则查询参数将使用默认值填充，并且错误参数的真实字符串值将添加到使用 @ErrorParam 注释的参数中传递的名称-值映射中？

```
@GET
@Path("/services")
public String getAll(
        @QueryParam("limit") Integer limit,
        @QueryParam("offset") Integer offset,
        @ErrorParam MultivaluedMap<String, String> typeErrors) {

    if (!typeErrors.isEmpty()) {
        // do something
    }

    return "1 2 3";
} 
```

我在这里提交了 RFE：http://java.net/jira/browse/JERSEY-1263

如果您有意见，请发表评论。

# python - python中的包继承

> ID：11242984
> 
> 赞同：2
> 
> 时间：2012-06-28T10:48:16.413
> 
> 标签：python

有没有办法在 python 中进行包继承，即说包 A 有模块 mod1、mod2 和其他一些子包。现在包 B 应该从 A 继承所有模块和子包，这样应该可以做到`import B.mod1`。

我已经通过以下链接 [http://peak.telecommunity.com/doc/src/peak/config/modules.html](http://peak.telecommunity.com/doc/src/peak/config/modules.html)中的包继承部分，但无法`import peak.api`。我也试过在`__init__`子包文件中导入父包的所有模块，但没有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T11:00:31.003

```
# package B __init__.py
from A import mod1, mod2, modN 
```

这就是你所需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T10:51:22.010

有可能的。您所要做的就是声明`__all__`变量，`__init__`其中应该包含您想要公开的所有模块。有关详细信息，请参阅[文档](http://docs.python.org/tutorial/modules.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T12:02:57.080

是的。例如，参见`numpy`'s `__init__.py`(Python 2.7) 的源代码：

```
import core
from core import *
import compat
import lib
from lib import *
import linalg
import fft
import polynomial
import random
import ctypeslib
import ma
import matrixlib as _mat
from matrixlib import *

# Make these accessible from numpy name-space
#  but not imported in from numpy import *
from __builtin__ import bool, int, long, float, complex, \
     object, unicode, str
from core import round, abs, max, min

__all__.extend(['__version__', 'pkgload', 'PackageLoader',
           'show_config'])
__all__.extend(core.__all__)
__all__.extend(_mat.__all__)
__all__.extend(lib.__all__)
__all__.extend(['linalg', 'fft', 'random', 'ctypeslib', 'ma']) 
```

# android - 我无法从我的 Android 设备访问我的 Apache 服务器

> ID：11242989
> 
> 赞同：0
> 
> 时间：2012-06-28T10:48:34.153
> 
> 标签：android, apache, http, request

这是我第二次在 stackoverflow 上提问。我正在尝试在我的安卓手机上访问我在台式计算机上设置的本地 apache 服务器（以 ie. 192.168.1* *. ** 开头的 IP）。*但不知何故，它根本不允许我访问服务器！:( 奇怪的是，有时它确实允许我访问服务器大声笑！但每次尝试只有 20 次。此外，它也不允许我访问笔记本电脑上的服务器。我真的需要一些帮助大家..当我使用模拟器在我的台式电脑上本地工作时，它工作正常。我已经做了很多关于它的研究，但我找不到任何解决方案。

谢谢你们

======================================

```
ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();

HttpClient client = new DefaultHttpClient(setHttpParams());
HttpPost request = new HttpPost(PATH + FILENAME);

if (json != null) {

        request.setEntity(new ByteArrayEntity(json.toString().getBytes("UTF8")));
        request.setHeader("json", json.toString());

} else {

        request.setEntity(new UrlEncodedFormEntity(nameValuePairs));
}

HttpResponse response = client.execute(request); 
```

这就是代码，当它尝试执行请求时会发生错误。请求包括 apache 服务器 ip PATH (192.168\. ****** ) + FILE_NAME(ie. index.php)。我知道它为什么会导致错误，因为我无法访问 192.168。*******服务器并读取所需的文件。我需要这方面的帮助 =* (*

 ** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T10:56:14.143

对于运行网络服务器的计算机：

*   确保您的个人防火墙规则不会阻止对 Web 服务器的访问。
*   为了让您的手机通过无线方式访问网络服务器，服务器需要可从网络访问。可能是您的计算机位于公司防火墙后面，阻止了从外部来源对其进行访问。
*   如果您只是想从电话访问它，请确保网络服务器和电话都在同一个网络上，即它们具有来自相同地址范围的 IP 地址。您可以通过将您的机器连接到无线 AP（通过以太网或无线）并确保您的手机连接到同一个无线 AP 来做到这一点。

此外，我刚刚再次阅读了您的问题并注意到了这条线

> 它也不允许访问我的笔记本电脑上的服务器

如果您无法在运行它的机器上本地访问网络服务器，那么您配置网络服务器的方式有问题。因此，首先确保您的 Web 服务器正在运行并正确配置。打开浏览器并转到，`http://localhost`或者`http://192.168.x.x`如果一切配置正确，您将能够访问您的网页。

基本上这是网络 101，如果它仍然给您带来问题，请发布一些详细信息，例如什么网络服务器、什么端口等。

如果您是网络概念的新手并且不知道如何配置 Web 服务器，请`Apache`只说 Google 如何配置 Apache 或使用一种名为的东西`XAMPP`，它是一个包含 Apache、MySQL、PHP、FileZilla 等的开发人员友好包。请注意，XAMPP 永远不会可以在生产环境中使用，因为它的默认配置是为了让新用户更容易安装、配置和运行上述软件包。*

# html - 如何在 HTML 中强制打印背景图像？

> ID：11242991
> 
> 赞同：8
> 
> 时间：2012-06-28T10:48:47.317
> 
> 标签：html, css, image

我需要打印上面有几个背景图像的报告页。但只有这些图像是不可打印的。这些图像实际上是图形的徽标，因此在报告中非常重要。

我有另一个选项，我可以裁剪它们并作为标签包含在页面中，但这是最后一个选项。因此在此之前我想知道是否有任何方法可以强制打印这些图像？有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-28T11:12:27.517

默认情况下，浏览器在打印页面时会忽略背景 css 规则，而使用 css 无法克服这一点。

用户将需要更改其浏览器设置。

因此，您需要打印的任何图像都应呈现为内联图像而不是 css 背景。您可以使用 css 来显示仅用于打印的内联图像。像这样的东西。

HTML

```
<div class"graph-image graph-7">
  <img src="graph-7.jpg" alt="Graph Description" />
</div> 
```

CSS

```
.graph-7{background: url(../img/graphs/graph-7.jpg) no-repeat;}
.graph-image img{display: none;}

@media print{
  .graph-image img{display:inline;}
} 
```

使用此代码或类似代码，意味着图像在 html 中使用一次，在 css 中使用一次。html 版本使用 css 隐藏，打印时正常显示。这是一个 hack，但它会做你想做的事。它将打印图像。

话虽如此，你正在做的是非常糟糕的做法。任何向用户传达有意义信息的东西都不应该单独使用 css 来传达。它不仅在语义上不正确，而且使图形对用户的用处降低。内联图像要好得多，如果可以的话，那就是你应该使用的。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2017-09-19T14:01:48.570

当您将 !important 属性添加到背景图像时，它在 google chrome 中工作确保您首先添加属性并重试，您可以这样做

```
.class-name {
    background: url('your-image.png') !important;
} 
```

您也可以使用这些有用的印刷辊并将其放在 css 文件的末尾

```
@media print {
* {
    -webkit-print-color-adjust: exact !important; /*Chrome, Safari */
    color-adjust: exact !important;  /*Firefox*/
  }
} 
```

# lua - Lua Pattern - 如何使用这个 lua 模式获取所需的字符串

> ID：11242993
> 
> 赞同：1
> 
> 时间：2012-06-28T10:49:04.490
> 
> 标签：lua

```
local invoiceData =
[[I N V O I C E
Invoice No. :
ABCDEFG125469857
Invoice Date May
2012
]] 
```

我使用的模式是

```
 print (string.match(invoiceData,'\nInvoice Date (.-)\n')) 
```

我想获取作为**MAY12的字符串****发票日期**。或**0512** .. 请帮忙

 ****谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T10:59:30.743

不要与 匹配`.-`，而是更具体地使用`%w+`(alpha-nums) 和`%d+`(digits) 来匹配月份和年份。

剧本：

```
local invoiceData =
[[I N V O I C E
Invoice No. :
ABCDEFG125469857
Invoice Date May
2012
]]

month, year = string.match(invoiceData,'Invoice%s+Date%s+(%w+)%s+%d*(%d%d)')
print(month, year) 
```

将打印：

```
5月12日
```****

# mysql - 如何连接 MYSQL 中查找表中的字符串值

> ID：11242994
> 
> 赞同：0
> 
> 时间：2012-06-28T10:49:15.867
> 
> 标签：mysql

我有三个表：上传、标签和上传标签。Upload 保存文件上传的详细信息，tag 保存标签名称，upload_tag 是一个查找表，它将上传 ID 与标签 ID 匹配，即：

```
+--------------------------------------------------------+
| upload                                                 |
+--------------------------------------------------------+
|id         |name                                        |
+-----------+--------------------------------------------+
|1          |file_1.jpg                                  |
+-----------+--------------------------------------------+
|2          |file_2.doc                                  |
+-----------+--------------------------------------------+

+--------------------------------------------------------+
|tag                                                     |
+--------------------------------------------------------+
|id         |name                                        |
+-----------+--------------------------------------------+
|1          |a_tag                                       |
+-----------+--------------------------------------------+
|2          |b_tag                                       |
+-----------+--------------------------------------------+
|3          |c_tag                                       |
+-----------+--------------------------------------------+

+--------------------------------------------------------+
|upload_tag                                              |
+-----------+--------------------------------------------+
|upload_id  |tag_id                                      |
+-----------+--------------------------------------------+
|1          |1                                           |
+-----------+--------------------------------------------+
|1          |2                                           |
+-----------+--------------------------------------------+
|2          |3                                           |
+-----------+--------------------------------------------+
|2          |2                                           |
+-----------+--------------------------------------------+ 
```

我需要使用标签字符串从数据库中提取上传，但都在一行中，因此结果如下所示：

```
+----------------------------------------------------+
|filename      |tags                                 |
+--------------+-------------------------------------+
|file_1.jpg    |a_tag; b_tag                         |
+--------------+-------------------------------------+
|file_2.doc    |c_tag; b_tag                         |
+--------------+-------------------------------------+ 
```

目前，我认为最好的方法是创建一个 MySQL 函数，该函数接受一个上传 id 并返回格式化的标签字符串。我在这里是正确的，还是有更好的方法来实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T10:51:17.517

您应该使用`LEFT JOIN`子句和`GROUP_CONCAT()`函数。

```
SELECT          u.name AS filename,
                GROUP_CONCAT(t.name SEPARATOR '; ') AS tags
    FROM        upload u
    LEFT JOIN   upload_tags ut
        ON      u.id = ut.upload_id
    LEFT JOIN   tag t
        ON      t.id = ut.tag_id
    GROUP BY    u.id; 
```

`GROUP_CONCAT`是一个聚合函数，这意味着它适用于多行（组织为组），而不是`CONCAT`适用于多列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T10:57:35.823

尝试这个 ：：

```
select 
upload.name as filename
GROUP_CONCAT(tag.name SEPARATOR '; ') as tags
from 
upload_tag ut 
inner join upload  on (ut.upload_id = upload.id)
inner join tags on (ut.tag_id = tags.id) 
group by ut.upload_id 
```

# c# - 远程识别ip地址

> ID：11242999
> 
> 赞同：0
> 
> 时间：2012-06-28T10:49:41.747
> 
> 标签：c#, remoting, .net-1.1

远程处理中是否有任何方法可以识别传入请求的 IP 地址。请注意我使用的是 .Net Framework 1.1